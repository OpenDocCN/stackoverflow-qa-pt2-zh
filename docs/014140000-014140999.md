# StackOverflow 问答 14140000-14140999

# c# - 将vector2列表发送到php

> ID：14140006
> 
> 赞同：0
> 
> 时间：2013-01-03T13:36:44.043
> 
> 标签：c#, php, list, unity3d

我需要将 Vector2 列表从 Unity3d 发送到 php 页面。不幸的是，我不知道如何正确地做到这一点。

我得到了这个代码：

```
public void SaveTappedPositions(List<Vector2> tappedPositions)
{
    WWW url = new WWW(SAVE_TAPPED_POSITIONS_URL + UDID + "&tappedPositions=" + tappedPositions);
    StartCoroutine(SendRequest(url));
} 
```

好吧，它成功发送了，但是网址是这样的

```
http://www.url.com?deviceId=260e3a51d6339640503c04ca06d5b63c3ffc282c&
    tappedPositions=System.Collections.Generic.List`1[UnityEngine.Vector2] 
```

这当然不好。我需要某种长字符串（至少 PHP 可以处理）中的所有 Vector2，然后将其发送过来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:08:13.797

你需要发送一个字符串，而不是一个列表。

```
StringBuilder sb = new StringBuilder();
            foreach (string aa in tappedPositions) { sb.Append(aa + ";"); }//i used ; for separetato,is your choice. 
```

然后通过以下方式发送：

```
WWW url = new WWW(SAVE_TAPPED_POSITIONS_URL + UDID + "&tappedPositions=" + sb); 
```

# windows - Matlab onCleanup 与已编译的应用程序（Windows）

> ID：14140008
> 
> 赞同：6
> 
> 时间：2013-01-03T13:36:46.777
> 
> 标签：windows, matlab, windows-7, signals, matlab-compiler

我有一个用 matlab 编译器制作的应用程序。
我想`shutdown activities`在它结束的时候做一些。由于似乎不可能在 matlab 中捕获信号（或者我不能），所以我检查了使用`onCleanup`（[Matlab: Is it possible to create signal handlers (.m scripts)](https://stackoverflow.com/questions/5906967/matlab-is-it-possible-to-create-signal-handlers-m-scripts)）。它在 matlab（本机）中工作，但不在已编译的应用程序中。
我尝试使用**CTRL-C**和**taskkill**（仅适用于**/f**）结束应用程序。在这两种情况下，onCleanup 方法都没有执行。
此处用于测试目的

```
function sigtest(varargin)
remainder=onCleanup(@()save('exit.mat'));
b=1;
while true
    disp(datestr(now));
    a=rand(round(5*b));%to be saved
    pause(10);
    b=a(1);
end 
```

我的源代码，我通过`mcc -m -v sigtest.m`.
作为另一个尝试，我插入了这些行

```
myexiter=addlistener(System.AppDomain.CurrentDomain,'ProcessExit',...
    @(a,b)save('listexit.mat')); 
```

在第 2 行之后，这个 .NET-Event 也不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T07:00:33.153

如果您在 M 代码中注册关闭活动，它们只会在进程正常关闭时起作用。该`taskkill /f`命令将执行“强制”关闭，我认为这将立即终止该过程。Matlab 解释器将没有机会运行任何仍待处理的清理代码。我认为控制台应用程序（已编译的 sigtest.m 将作为其运行）上的 Ctrl-C 将具有相同的效果。同样适用于 .NET-Event：如果您强行终止该进程，则该回调永远不会有机会运行。

如果您想要运行退出代码或任何其他清理内容，您需要找到一种方法让程序找出何时应该退出并启动更优雅的关闭本身。例如，在您的 sigtest 示例中，您可以在每次循环结束时检查 stdin，查看用户是否输入了“退出”，如果是，则调用`exit()`. 然后你的 onCleanup 东西应该运行。

在 GUI 编译的 Matlab 应用程序中，这更简单；您有 GUI 控件来退出应用程序。我不知道规范的方法是使控制台编译的 Matlab 应用程序响应用户退出请求，或者是否有一个好的方法。如果您认为用户可能希望请求优雅地中止其操作，您可能希望将其设为 GUI 应用程序。

# javascript - 每列的分组行摘要 - jqGrid

> ID：14140014
> 
> 赞同：2
> 
> 时间：2013-01-03T13:37:31.883
> 
> 标签：javascript, jquery, jqgrid

我正在使用带有分组列的 jqGrid-4.4.1。

我能够进行分组，但我确实需要类似这样的东西：

![旧版网格](../Images/918b09dc30bd8c908b70e83b22f9ff81.png)

jqGrid 的示例代码：

```
$("#gridData").jqGrid({
                    colModel: colData, // col model array
                    colNames: colNamesArray, // column names array
                    data: rows, // data
                    datatype: "local", 
                    height: 'auto',
                    width: '100%',
                    viewrecords: false,
                    sortorder: "asc",
                    gridview: true,
                    grouping:true, 
                    groupingView: { 
                        groupField: ['Group'],
                        groupColumnShow: [false]

                    }

                } 
```

);

目前，我有这样的事情：但**我需要在每列的分组行中使用逗号分隔值。**

![网页视图](../Images/e2136e953f6064153ac95fe663252e35.png)

我将值作为逗号分隔的字符串。但我没有得到它如何与列映射

是否可以 ？任何指针都会非常棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:43:20.217

我建议您使用`groupSummary: [true]`选项`groupingView`来创建额外的摘要行。需要为汇总行`summaryType`中的所有列定义属性，该属性`colModel`不应为空且可选`summaryTpl`。在[答案](https://stackoverflow.com/a/7622718/315935)中，我展示了如何在摘要行中创建自定义值。

[您也可以像在答案](https://stackoverflow.com/a/10805487/315935)中那样创建自定义分组行。我建议您使用`groupSummary`选项`groupingView`而不是创建自定义的主要原因是 jqGrid 中分组行的实现。jqGrid 使用`colspan`属性使分组行跨越所有列。您需要的是*每列*的摘要信息。因此分组摘要的内部结构更适合您的要求。唯一的缺点是不会显示折叠组的摘要信息。

# requirejs - 剂量 requirejs 需要所有 JS 文件来支持 AMD

> ID：14140017
> 
> 赞同：0
> 
> 时间：2013-01-03T13:37:53.277
> 
> 标签：requirejs, amd

我很少阅读有关[requireJS](http://requirejs.org/)的内容并试图理解它。

我想知道的：

1.  我应该以特定的方式或像 Module-Pattern 这样的模式来构建我的文件吗？
2.  使用库时，这些文件应该支持 AMD 吗？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:47:29.570

1.  您可以以任何您认为合适的方式构建文件。RequireJS加载加载 require.js 的 script 标签的属性中引用[的脚本文件。](http://requirejs.org/docs/api.html#jsfiles)`data-main`从该文件中，您可以自由地要求您想要的任何模块。

2.  库**不需要**支持 AMD。您可以使用[shim 配置](http://requirejs.org/docs/api.html#config-shim)加载将值导出到全局范围的模块（即普通的 javascript 文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:48:21.717

大多数情况下，我正在设置一个结构如下的**require.js项目：**

*   根
    *   js
        *   模块类型1
            *   模组1
            *   模组2
        *   模块Type2
            *   模组1
            *   模组2
        *   应用程序.js
        *   引导程序.js
    *   库
        *   要求
            *   需要.js
        *   库1
            *   lib1.js
    *   css/img/partials/...
    *   索引.html

并且初始**bootstrap.js**有一个`require.config`对象和一个初始`require`：

```
/*global define, require */

require.config({
    baseUrl: 'js',
    paths: {
      lib1: '../lib/lib1/lib1'
    },
    shim: {
      lib1: ['something']
    } 
});
require(['lib1', 'app'], function (lib1, app) {
   app.doSth();
}); 
```

在您的 html 页面中，您只需要一个`script`带有`data-main`属性的标签：

```
<body>
    ...
    <script type="text/javascript" src="lib/require/require.js" data-main="js/bootstrap"></script>
</body> 
```

**编辑：**模块不必与 AMD 兼容，但如果它们在您自己的控制之下，最好让它们与 AMD 兼容。您可以[使用](http://requirejs.org/docs/api.html#config-shim).`require.config`

# java - 了解 OAuth2 客户端凭据流

> ID：14140020
> 
> 赞同：16
> 
> 时间：2013-01-03T13:38:04.027
> 
> 标签：java, spring, rest, spring-security, oauth-2.0

我正在尝试了解和实现我们的新 REST 服务器和我们现有的客户端应用程序之间的客户端凭据流。我已经像[这样](https://stackoverflow.com/questions/14138556/spring-security-context-setup-for-2-legged-client-credentials-oauth2-server)设置了 spring-security OAuth2 。据我目前的理解，我的服务器现在应该支持以下请求：

```
$ curl -X -v -d 'client_id=the_client&client_secret=secret&grant_type=client_credentials' -X POST "http://localhost:9090/oauth/token" 
```

但我明白了

```
InsufficientAuthenticationException: There is no client authentication 
```

由这里引起（弹簧安全代码）`Principal`：`null`

```
@FrameworkEndpoint
@RequestMapping(value = "/oauth/token")
public class TokenEndpoint extends AbstractEndpoint {

    @RequestMapping
    public ResponseEntity<OAuth2AccessToken> getAccessToken(Principal principal,
            @RequestParam("grant_type") String grantType, @RequestParam Map<String, String> parameters) {

        if (!(principal instanceof Authentication)) {
            throw new InsufficientAuthenticationException( 
```

所以看来，我需要先**对服务器进行身份验证**。但这**不是我想做的**。我希望我的两台服务器使用共享密钥相互通信。OAuth 提供者服务器应根据请求向（受信任的）客户端服务器提供访问令牌，以便客​​户端服务器随后可以使用该令牌访问服务器上的所有 REST 资源。这应该保护 REST 资源免受外部访问。

稍后我想将选定的资源提供给第三方，并最终为服务器到服务器的通信实现一些更细粒度的安全性。但现在我需要保护 REST 服务器免受外部访问。

看起来我可能对整个客户端凭据流程或那里的 spring-security 应用有一些误解，所以任何澄清都将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-03T16:59:52.267

您没有向授权服务器验证您的客户端。

你需要做这样的事情：

```
curl --user the_client:secret --data "grant_type=client_credentials" http://localhost:9090/oauth/token 
```

这是向授权服务器验证客户端，然后指定 grant_type 和其他参数。这将返回类型为“承载”的访问令牌，其范围由 oauth 客户端详细信息确定。获得令牌后，您可以通过设置 Authorization 标头来访问受保护的资源：

```
curl -H "Authorization: Bearer <accessToken>" <resourceUrl> 
```

# android - 如何在广播接收器 onCallEnded() 中完成活动

> ID：14140021
> 
> 赞同：0
> 
> 时间：2013-01-03T13:38:02.657
> 
> 标签：android, android-activity, broadcastreceiver, sip

我有一个问题，如何在 brodcastreceiver onCallEnded (SIP) 中完成活动。有一个这样的brodcastreceiver：

```
public class IncomingCallReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
         SipAudioCall incomingCall = null;
        try {

            SipAudioCall.Listener listener = new SipAudioCall.Listener() {

                ...

                @Override
                public void onCallEnded(SipAudioCall call) {

                 // IncomingCallActivity.finish();

                }
            };

            Main mainActivity = (Main) context;
            incomingCall = mainActivity.manager.takeAudioCall(intent, listener);
            mainActivity.call = incomingCall;

            Intent i = new Intent(context, IncomingCallActivity.class);  
            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  
            context.startActivity(i); 
```

然后开始新的活动来接听或拒绝来电，但是通话结束后如何关闭它？`IncomingCallActivity.finish()`中不能使用`onCallEnded`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:43:24.650

你可以这样做：

```
 @Override
            public void onCallEnded(SipAudioCall call) {

             // IncomingCallActivity.finish();
             //Here set any value like an int
             intToClose = 1;

            } 
```

然后在您的活动中检查`intToClose`，如果它是 1 则只需调用`fnish();`

更新：这段代码是我的想法，所以它可能有一些错误。将此添加到您当前的活动中，或类似以下内容：

```
scheduler = Executors.newSingleThreadScheduledExecutor ( );
                    scheduler.scheduleAtFixedRate ( new Runnable ( ) {
                public void run ( )
                    {
                      runOnUiThread ( new Runnable ( ) {
                      public void run ( ) {
                      closeInt = IncomingCallReceiver.intToClose;
                      if ( closeInt == 1 ) {    
                          scheduler.shutdown ( );       
                          finish ( );
                       }

                     }
                } );
            }
        }, 750, 750, TimeUnit.MILLISECONDS ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:59:53.840

首先，为什么您可以在 IncomingCallActivity 本身中添加侦听器。我认为这不会有什么不同。

其次为您的解决方案，

使用 FLAG_ACTIVITY_SINGLE_TOP 开始您的活动，以便您在活动的 onNewIntent(Intent intent) 中收到新的 Intent。

然后 onCallEnded 再次启动活动。

```
Intent i = new Intent(context, IncomingCallActivity.class);  
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  
i.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);  
i.putExtra("Close", true); // an extra which says to finish the activity.
context.startActivity(i); 
```

现在在 onNewIntent(Intent intent)

```
if(intent.getBooleanExtra("Close", false))
  finish(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-05T12:30:12.950

*   我用这段代码解决了我的问题。

*   试试这个，你的问题就解决了。空闲状态下没有`endcall`广播等。`finish()`编码快乐！！

    ```
    if (state.equals(TelephonyManager.EXTRA_STATE_IDLE)) {
       ((Activity)context).finish();
    } 
    ```

# php - 查询在 SQL-server 中有效，但在 php-input 中无效

> ID：14140024
> 
> 赞同：1
> 
> 时间：2013-01-03T13:38:10.990
> 
> 标签：php, sql-server

我正在用 php 编写一个 Web 应用程序（我对此有相当的了解），并且已经获得了对 SQL Server 数据库中存储过程的查询。这就是我使用其中之一的方式：

```
 function exampleFunction ($productId, $serialNbr, $companyName1, $companyName2, $companyName3) {

    return ' exec dbo.getStuffFromDatabase @product_id = ' . $productId . ', 
                                            @serial_id = ' . $serialNbr . ',
                                        @is_company_name1 = ' . $companyName1 . ', 
                                            @is_company_name2 = ' . $companyName2 . ',

@is_company_name3 = ' . $companyName3;
    } 
```

我以前从未使用过数据库编程，可能我犯了一些简单的错误，但我无法让它工作。我想知道 $companyName 变量是否遗漏了一些东西 - 据我所知，它们就像布尔值（位：s），可以取值 0 和 1。我尝试使用真/假整数和这些值的字符串，没有一个工作。当我在 SQL Server 管理器中执行此查询时，它工作正常。

谢谢！

编辑：

Server Management Studio 中的脚本：

```
declare @product_id varchar(16)
declare @serial_id int
declare @is_company_name1 bit
declare @is_company_name2 bit
declare @is_company_name2 bit

set @product_id = 'all'
set @serial_id = 9999999
set @is_company_name1 = 0
set @is_company_name2 = 0
set @is_company_name2 = 1

exec [dbo].[getStuffFromDatabase] 
@product_id = @product_id,
@serial_id = @serial_id,
@is_company_name1 = @is_company_name1,
@is_company_name2 = @is_company_name2,
@is_company_name3 = @is_company_name3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:27:08.470

你需要一些引号`product_id`：

```
return ' exec dbo.getStuffFromDatabase @product_id = \'' . $productId . '\', 
                                        @serial_id = ' . $serialNbr . ',
                                    @is_company_name1 = ' . $companyName1 . ', 
                                        @is_company_name2 = ' . $companyName2 . ',

@is_company_name3 = ' . $companyName3; 
```

但是，您可能想查看是否有工具可以使用参数而不是将 SQL 构建为单个字符串。这将大大有助于避免 SQL 注入的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:45:55.733

您需要创建从 PHP 到 SQL Server 的连接，最好使用 SQLSRV 或 PDO 扩展。（这基本上就是 SQL Server Manager 为您做的事情）

```
$pdo = new PDO(...);
$stmt = $pdo->prepare('exec dbo.getStuff ...');
$res = $stmt->execute(array($productId, $serialNbr, ...));
return $res; 
```

代替 ... 您需要提供所需的参数。

看：

*   [PDO](http://php.net/manual/en/class.pdo.php)
*   [PDO声明](http://php.net/manual/en/class.pdostatement.php)

编辑：在stackoverflow上找到了一些例子：

*   [带有 SqlServer 存储过程的 PHP PDO 不返回所有数据](https://stackoverflow.com/questions/5913347/php-pdo-with-sqlserver-stored-procedure-doesnt-return-all-the-data)
*   [使用 pdo_sqlsrv 执行存储过程](https://stackoverflow.com/questions/9982466/executing-a-stored-procedure-with-pdo-sqlsrv)
*   [在 PHP 5.4.4 中使用 PDO DBLIB 调用 3 个存储过程失败](https://stackoverflow.com/questions/11440499/calling-3-stored-procedures-with-pdo-dblib-in-php-5-4-4-fails)

尽管它们也有问题，但它们确实对执行存储过程所需的内容给出了很好的印象。

Edit2：另外几个使用 sqlsrv_* 的例子：

*   [在 php 调用中获取 MS 存储过程的输出](https://stackoverflow.com/questions/8355577/getting-output-of-ms-stored-proc-on-php-call-sqlsrv)
*   [带有命名参数的 php sqlsrv_query 存储过程](https://stackoverflow.com/questions/13274261/php-sqlsrv-query-stored-procedure-with-naming-parameters)

# c++ - 在直接 x 中旋转 3D 网格

> ID：14140030
> 
> 赞同：1
> 
> 时间：2013-01-03T13:38:59.390
> 
> 标签：c++, directx

我继承了一个我正在努力改进的 Direct x 项目。我遇到的问题是我有 2 个网格，我想移动一个独立于另一个。目前我可以简单地操纵世界矩阵，但我无法旋转个人网格。

```
 V( g_MeshLeftWing.Create( pd3dDevice, L"Media\\Wing\\Wing.sdkmesh", true)); 
```

加载网格，稍后渲染

```
renderMesh(pd3dDevice, &g_MeshLeftWing ); 
```

有没有办法可以旋转网格。我尝试使用 matirx 对其进行转换但没有成功？

```
g_MeshLeftWing.TransformMesh(&matLeftWingWorld,0); 
```

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:45:45.823

首先，您似乎正在加载“.sdkmesh”文件。DirectX SDK 中大量记录了“.sdkmesh”是为 SDK 制作的，不应用作实际的网格加载/绘图解决方案。

因此，我建议您开始寻找加载和绘制模型的替代方法，这不仅会让您对 DirectX 有更深入的了解，而且从长远来看，它最终会回答您的问题！

# objective-c - 从基于文档的应用程序中获取 managedObjectContext

> ID：14140033
> 
> 赞同：1
> 
> 时间：2013-01-03T13:39:00.850
> 
> 标签：objective-c, core-data, nsmanagedobjectcontext

我刚刚创建了一个基于文档的应用程序，现在我想在表格视图中显示我的数据。为此，我创建了一个 tableViewController 类，但我需要获取 managedObjectContext ......但我不知道该怎么做，我总是得到 null ......

```
NSManagedObjectContext *context = [[NSApp delegate] managedObjectContext]; 
```

或者

```
NSManagedObjectContext *context = [[[NSDocumentController sharedDocumentController] currentDocument] managedObjectContext]; 
```

但是当我尝试直接在 Document.m（NSPersistentDocument 的子类）中获取 managedObjectContext 时，它永远不会为空。

我究竟做错了什么？谢谢你的帮助！

缺口

# php - Ajax 登录系统的安全性

> ID：14140037
> 
> 赞同：0
> 
> 时间：2013-01-03T13:39:16.427
> 
> 标签：php, javascript, jquery, mysql, ajax

我制作了一个登录系统，它使用基本的 ajax 请求和一些反馈，并且运行良好（代码在底部）。

**除了我将要输入的散列和加盐密码**（所以不要挂断），使用 Ajax/jQuery 处理这些请求的安全含义是什么：最重要的是：

1.  当涉及到这是依赖于 JS 而不是纯 PHP 时，一般的看法是什么 - 人们是否进行了冗余，简单地说这是一个仅限 JS 的网站是否合法（大量网站基于 Twitter 引导程序，所以它有点依赖于 JS）。

2.  我的 PHP 和 JS 接口是否正确？（我的 cookie 还能用吗？）

3.  如何创建一种安全的方式来使用 jQuery .load() 在成功登录后引入我的内容？

4.  关于使我的系统安全的任何一般性建议？

    ```
     $(function login() {

     $("form .button").click(function () {

     // getting form values and assigning variable names
     var username = $("form #username").val();
     var password = $("form #password").val();
     var remember = $("form #remember").val();

     // concatenating variables to form the data used by the Ajax post method
     var dataString = 'username=' + username + '&password=' + password + '&remember=' + remember;

     // begin Ajax post function
     $.ajax({
         type: "POST",
         url: "controls/login/process.php",
         data: dataString,
         success: function (response) {
             if (response == 'success') {
                 alert("SUCCESS");
             } else {
                 $('.alert').find('span').text('Incorrect username or password');
                 $('.alert').addClass('alert-error').fadeIn('fast');
             }
         },
         error: function () {
             $('.alert').find('span').text('An error occured, try again');
             $('.alert').addClass('alert-error').fadeIn('fast');

         }
     });

     return false;

     });
     }); 
    ```

这与

```
<?php
session_start();
// Starting the session
require '../../tools/db/connect.php';
// Including the database connection file
session_set_cookie_params(2*7*24*60*60);
// Making the cookie live for 2 weeks

if($_SESSION['reference'] && !isset($_COOKIE['unifyLogin']) && !$_SESSION['remember']){
    // If you are logged in, but you don't have the cookie and you have not checked the remember checkbox (a browser restart), destroy the session 
    $_SESSION = array();
    session_destroy();
    echo "expired";
}

$_POST['username'] = mysql_real_escape_string($_POST['username']);
$_POST['password'] = mysql_real_escape_string($_POST['password']);
$_POST['remember'] = (int)$_POST['remember'];
// Escaping all input data
$row = mysql_fetch_assoc(mysql_query("SELECT ID,REFERENCE FROM USER WHERE USERNAME='{$_POST['username']}' AND PASSWORD='{$_POST['password']}'"));

if($row['REFERENCE']) {
$_SESSION['secure'] =  false;
// If everything is OK login
$_SESSION['id'] = $row['ID'];
$_SESSION['reference'] = $row['REFERENCE'];
$_SESSION['remember'] = $_POST['remember'];
// Store some data in the session
setcookie('unifyLogin',$_POST['remember']);
// We create the cookie
echo "success";
} else {
echo "failure";
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:47:15.827

确保网站安全的最佳方法是使用 SHA-512 加密您的密码。

```
$rounds = 5000
$cryptedPwd = crypt($password, '$6$rounds=' . $rounds . '$SOMeSILLySTrInG$'); 
```

解密：

```
$pwdEntered = trim($_POST['password']);
if (crypt($pwdEntered, $pwdHashed) == $pwdHashed){
// do something
} 
```

您还可以添加蛮力保护，也许使用日志文件...

我建议你使用 PDO 而不是普通的 mysql 连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-06T14:24:17.867

我发现最好的密码安全方法是 php 的内部方法，当然使用 php 进行登录。

[http://php.net/manual/en/function.password-hash.php](http://php.net/manual/en/function.password-hash.php)

password_hash("rasmuslerdorf", PASSWORD_DEFAULT);

password_verify('rasmuslerdorf', $hash);

它将盐存储在您的数据库中，并为您进行全方位检查。

经过数小时的加密和安全性阅读后，我花了很长时间才找到这种方法，它不仅可靠，而且使用起来非常简单。

我建议您通过帖子发送信息，然后使用它。同样在往返行程中，如果您没有往返行程，有人可以跳过您的 javascript 散列并使用纯散列登录。这样，如果他们尝试使用散列，它将重新散列并将其作为错误的 pw 返回，这就是它的本质。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:08:14.170

> 当涉及到这是依赖于 JS 而不是纯 PHP 时，一般的看法是什么 - 人们是否进行了冗余，简单地说这是一个仅限 JS 的网站是否合法（大量网站基于 Twitter 引导程序，所以它有点依赖于 JS）。
> 
> 我的 PHP 和 JS 接口是否正确？（我的 cookie 还能用吗？）

很难说今天有多少人在禁用 javascript 的情况下使用互联网，但是您的 javascript 不应该是令人讨厌的，并且您的网站应该仍然可以在禁用 javascript 的情况下工作。做起来并不难。而不是使用`.click()`AJAX 查询，您应该使用`.submit()`它并将其绑定到您的表单。这样，您仍然可以仅通过 PHP 处理表单。

这也是最好的做法之一，不要`.click()`在提交按钮上绑定事件，否则我无法通过按 Enter 提交表单。

然后在您的 PHP 中，您将能够通过检查`$_SERVER['X-Requested-With']`.

然后你可以有两种不同的行为：

```
if ( isset( $_SERVER['X-Requested-With'] ) ) {
    // comes from jQuery
} else {
    // basic submit
} 
```

我认为这大致就是你应该如何接口你的应用程序。

> 如何创建一种安全的方式来使用 jQuery .load() 在成功登录后引入我的内容？

你可以从你的 PHP 中返回 true 或 false。或者，如果您需要重新显示一些数据，您可以传递一个 json 对象。假设您有一个要传回的数据数组

PHP

```
if ( isset( $_SERVER['X-Requested-With'] ) ) {
    $data = array('success' => true , 'username' => $username );
    return json_encode( $data );
} 
```

> 关于使我的系统安全的任何一般性建议？

您在 POST 中发送数据（通过 AJAX），这并不比以正常方式发布数据更安全。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T15:35:33.327

回答问题 #3：在将不受信任的数据插入 HTML 时对其进行转义和清理，就像您对“传统”PHP 站点所做的那样。如果服务器返回未转义的文本，使用 jQuery 的[.text()](http://api.jquery.com/text/)方法将文本插入到元素中；**不要将文本插入为 HTML**（例如`$(...)`）。

我认为问题 #1 的答案已经很清楚了；有一小部分用户（包括搜索引擎）不能或出于隐私或安全原因选择不运行 JavaScript。您可能不想拒绝为他们提供服务。

我对问题 #2 和 #4 的评论如下。

* * *

```
var dataString = 'username=' + username + '&password=' + password + '&remember=' + remember; 
```

jQuery 可以为您执行此操作（包括您丢失的转义查询字符串）。只需将它们存储在一个对象中，您可以将其传递给 jQuery 而不是字符串：

```
var dataObject = {
    username: username,
    password: password,
    remember: remember
}; 
```

另请注意 jerome.s 建议将 AJAX 响应作为 JSON 返回并避免弃用 jQuery 功能。对于 JSON 响应，确保最外面的对象是对象，而不是数组。

* * *

```
$_POST['username'] = mysql_real_escape_string($_POST['username']);
$_POST['password'] = mysql_real_escape_string($_POST['password']);
$_POST['remember'] = (int)$_POST['remember'];
// Escaping all input data
$row = mysql_fetch_assoc(mysql_query("SELECT ID,REFERENCE FROM USER WHERE USERNAME='{$_POST['username']}' AND PASSWORD='{$_POST['password']}'")); 
```

PHP MySQL 扩展自 PHP 5.5 起[已弃用](http://php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)。我会使用 MySQLi 扩展或 PDO。两者都提供准备好的语句，允许您避免手动 SQL 转义参数值。

要实现[per-user salts](http://www.owasp.org/index.php/Password_Storage_Cheat_Sheet)，您需要更改此查询。具体来说，您必须检索散列密码和相应的盐，然后使用该盐对输入的密码进行散列。如果密码正确，计算的哈希值应该与存储在数据库中的哈希值匹配。

* * *

```
if($row['REFERENCE']) {
$_SESSION['secure'] =  false;
// If everything is OK login
$_SESSION['id'] = $row['ID'];
$_SESSION['reference'] = $row['REFERENCE'];
$_SESSION['remember'] = $_POST['remember'];
// Store some data in the session
setcookie('unifyLogin',$_POST['remember']);
// We create the cookie
echo "success"; 
```

PHP 使用相当宽松的会话处理模型，因为它将接受任意会话 ID 值，并且您的代码不会在成功登录后重新生成会话 ID。因此，您的网站可能容易受到[会话固定](//en.wikipedia.org/wiki/Session_fixation)攻击。

我也没有看到任何针对“登录 CSRF”或[点击劫持](//en.wikipedia.org/wiki/Clickjacking)的保护措施。

另请注意 Jeffrey 的评论：“`if($row['REFERENCE']) {`如果在数据库中未找到匹配项，则该行将生成错误”。

**编辑：**您还应该对不成功的登录尝试实施速率限制（以减慢自动密码猜测的速度）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T13:47:28.483

您正在使用 JS 作为与服务器交互的另一种方式，而不是常规浏览。因此，它的安全性不亚于您请求的任何其他页面。

如果您将登录凭据发布到 PHP 页面以检查登录，请像使用常规请求（可能是会话）一样存储信息。现在，每次使用 AJAX 从服务器请求数据时，在发回数据之前再次检查服务器端的会话。如果它未经授权，只需返回一个错误。在 JS 中，您现在可以检查响应并据此采取行动。

我建议使其安全的方法是开发每个页面，就好像它是由常规浏览器请求的一样。如果你能做到这一点，它在使用 AJAX 时也是安全的。

作为非安全建议。除非您愿意牺牲一些访问者（旧手机、平板电脑或仅禁用 js 的浏览器），否则不要制作仅 javascript 的网站。

# c# - 文本框 VerticalScrollbar 无法正常工作 - 错误还是我做错了？- Windows 应用商店应用

> ID：14140038
> 
> 赞同：0
> 
> 时间：2013-01-03T13:39:17.050
> 
> 标签：c#, .net, windows-8, windows-store-apps

我在 Windows 应用商店应用中有一个 TextBox，我想启用垂直滚动条。

```
<TextBox Name="myTextBox" 
     ScrollViewer.VerticalScrollBarVisibility="Auto">
</TextBox> 
```

问题是滚动条只适用于鼠标滚轮，如果我点击滚动条并向上或向下移动它就不会移动。

滚动条的向上箭头也不起作用，但向下箭头起作用。

这是 Visual Studio 的错误还是我遗漏了什么？

这是完整的代码：

```
 <TextBox x:Name="descriptionTextBox" HorizontalAlignment="Left" Margin="132,110,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Height="345" Width="295" FontSize="20" BorderThickness="0" FontFamily="Segoe Print" 
                 ScrollViewer.VerticalScrollBarVisibility="Auto" AcceptsReturn="True">
            <TextBox.Background>
                <ImageBrush/>
            </TextBox.Background>
        </TextBox> 
```

文本框位于网格内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:35:35.517

问题在于重叠的网格。

# java - 如何在休眠中将子查询用于“from”子句？

> ID：14140049
> 
> 赞同：10
> 
> 时间：2013-01-03T13:39:45.453
> 
> 标签：java, sql, hibernate, subquery, hql

我有三个表：`class`、`student`和`teacher`

```
table class
{
    class_id(PK)
}

table student
{
    student_id(PK)
    class_id(PK+FK)
}

table teacher
{
    teacher_id(PK)
    class_id(PK+FK)
} 
```

我在 SQL 中有一个查询，效果很好。

```
SELECT data.class_id, count(data.class_id) AS count
FROM ((SELECT class_id FROM student)
        union all
        (SELECT class_id FROM teacher)) AS data
GROUP BY data.user_id
ORDER BY count desc 
```

该查询在**from 子句**和**联合操作**中包含子查询。我无法将其转换为 HQL。

请从上述 SQL 查询中给我高效的 HQL 查询。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T16:27:02.077

不幸的是[HQL 不支持 UNION 查询](https://hibernate.onjira.com/browse/HHH-1050)。解决您的问题的两种替代策略是：

*   将 Pojo映射[到 aa 视图](https://stackoverflow.com/questions/201023/hibernate-union-alternatives)
*   或[继承映射](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch10.html)。特别是[每个具体类](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch10.html#inheritance-tableperconcrete)策略的表，其中抽象`Person`超类继承自`Student`并且`Teacher`似乎很适合您的问题：

    ```
    select p.id, count(c)
    from Person p join p.classes c
    group by p.id
    order by count(c) desc 
    ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-03T15:04:01.543

您不能`from`在 HQL 的子句中放置子查询。只有`select`or`where`子句。

# javascript - Bootstrap table-striped 不会改变颜色

> ID：14140051
> 
> 赞同：8
> 
> 时间：2013-01-03T13:40:02.697
> 
> 标签：javascript, jquery, twitter-bootstrap

正如您最近在我的问题历史中看到的那样，我正在尝试理解 Jquery/Javascript :) 我遇到了以下问题，并想向你们提出。

我有下表（注意：这是检查元素抓取的 HTML，我不确定为什么 style="background-color: rgb(255, 255, 255); 存在..）：

```
<table class="table table-striped table-condensed" id="instance-table">
    <thead>
        <tr id="checkrow">
            <th><input type="checkbox" id="checkall"></th>
            <th>Column A</th>
            <th>Column A</th>
            <th>Column A</th>
        </tr>
    </thead>
    <tbody id="instanceInnerContent">
        <tr style="background-color: rgb(255, 255, 255);">
            <td class="act"><input type="checkbox"></td>
            <td>Value 1</td>
            <td>Value 2</td>
        </tr>
            <tr style="background-color: rgb(255, 255, 255);">
            <td class="act"><input type="checkbox"></td>
            <td>Value 1</td>
            <td>Value 2</td>
        </tr>
    </tbody>
</table> 
```

并使用以下代码选择行或全部选择或选择行单击：

```
// if user clicks on checkbox with id="checkall" - all checkboxes are selected
// and table row background is highlighted
 $('body').on('click', '#checkall', function () {
    $('input:checkbox:not(#checkall)').prop('checked',this.checked);
    if ($(this).is(':checked') == true) {
        $("#instance-table").find('tr:not(#checkrow)').css("background-color","#ccc");
        //$('#instance-action').removeAttr('disabled');
    } else  {
        $("#instance-table").find('tr:not(#checkrow)').css("background-color","#fff");
        //$('#instance-action').attr('disabled', 'disabled');
    }
});  

// if user clicks on checkbox, diffrent than checkbox with id="checkall" , 
// then checkbox is checked/unchecked
$('body').on('click', 'input:checkbox:not(#checkall)', function () {
    if($("#checkall").is(':checked') == true && this.checked == false) {
        $("#checkall").prop('checked',false);
        $(this).closest('tr').css("background-color","#ffffff");
    }
    if(this.checked == true) {
        $(this).closest('tr').css("background-color","#ccc");
        //$('#instance-action').removeAttr('disabled');
        // function to check/uncheck checkbox with id="checkbox"
        CheckSelectAll(); 
    }
    if(this.checked == false)  {
        $(this).closest('tr').css("background-color","#ffffff");
        //$('#instance-action').attr('disabled', 'disabled');
    }
});

// if user clicks, someware on table row, checkbox is checked/unchecked
// and table row background is highlighted or not
$('body').on('click', '#instance-table tbody tr', function () {
    var this_row = $(this);
    var checkbox = this_row.find('input:checkbox');
    if (event.target.type !== 'checkbox') {    
        if ( checkbox.is(':checked') == false ) {
            checkbox.prop('checked', true);
            this_row.css("background-color","#ccc");
            //$('#instance-action').removeAttr('disabled');
            CheckSelectAll();
        } else {
            checkbox.prop('checked', false);
            this_row.css("background-color","#fff");
            //$('#instance-action').attr('disabled', 'disabled');
            CheckSelectAll();
        }
    }    
});

function CheckSelectAll() {
 var flag = true;
 $('input:checkbox:not(#checkall)').each(function() {
  if(this.checked == false)
   flag = false;
   //console.log(flag);
 });
  $("#checkall").attr('checked',flag);
 } 
```

但不知何故，条纹表行没有突出显示，怎么会？虽然代码已经在这里，但我也有一个问题，如果我手动检查每一行，它不会检查 checkall 复选框。当我手动检查 checkall 复选框，取消选中每个复选框，然后再次手动检查每一行时，它会起作用。我找不到错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T14:44:43.190

似乎引导程序正在设置每个 td 背景颜色。因此，将 tr 设置为背景颜色不起作用，即使您添加了 !important。我通过向每个 td 添加一个具有所需背景颜色的类来解决它

**CSS：**

```
.selected { background-color: #ddd !important; } 
```

**代码：**

注意：代码是检查是否单击了行的第一个 td 中的复选框的函数的一部分。

```
$(this).parent().parent().children('td').each(function() {
 $(this).addClass("selected");
}); 
```

它可能不是一个简洁的解决方案，但它有效:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T13:49:03.153

我对样式表的经验是，您应该选择行的单元格而不是行本身。

`$(this).closest('tr td').css("background-color","#ffffff");`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T10:21:38.497

[工作小提琴](http://jsfiddle.net/XUtur/13/)

```
 $('#checkall').on("change", function() {
        if(!$(this).is(":checked")) {
             $(".checkbox").each( function() {
                 $(this).prop("checked" , false);
                 $(this).parent().parent().css({ "background" : "#fff" });
             });
        }
        else {
             $(".checkbox").each( function() {
                 $(this).prop("checked" , true);
                 $(this).parent().parent().css({ "background" : "#ccc" });
             });
        }
});
$(".checkbox").on("change", function() {
    if ($(".checkbox:checked").length == $(".checkbox").length) {
         $("#checkall").prop("checked" , true);
         $(this).parent().parent().css({ "background" : "#ccc" });
    }
    else {
        if($(this).is(":checked")) {
            $("#checkall").prop("checked" , false);
            $(this).parent().parent().css({ "background" : "#ccc" });
        }
        else {
            $("#checkall").prop("checked" , false);
            $(this).parent().parent().css({ "background" : "#fff" });
        }
    }
});​ 
```

# function - 如何在框架中创建“隐藏功能”以使某些东西可见而另一些不可见？（爪哇）

> ID：14140058
> 
> 赞同：0
> 
> 时间：2013-01-03T13:40:32.160
> 
> 标签：function, visible, jdeveloper, invisible

我正在尝试做一个用户界面来补充一个简单的编程代码。

我决定在一个框架中完成所有事情，而不是使用不同的框架。

而不是只是从框架中粘贴代码（很多！）我将尝试解释它的样子：

我有三个不同的标题：**客户**、**船**和**订单**

在每个标题下方，我在几个文本字段旁边都有几个不同的标签，有点像这样：

```
 Customer                   Boat                       Order

 Name: [textfield]          Model: [textfield]         Name: [textfield]
 Adress: [textfield]        Price: [textfield]         Model: [textfield] 
```

* * *

正如您可能想象的那样，当您可以看到所有连接到不同标题的文本字段和标签时，它看起来有点愚蠢。

**当我首先启动应用程序时，我希望框架仅显示实际标题“客户”、“船”、“订单”。

连接到标题的所有其他标签、文本字段、按钮应该是不可见的。在标题旁边，我想添加某种按钮/JRadioButton/Checkbox（每个标题一个）。因此，当您“选中/填充”其中一个标题的按钮/复选框时，我希望与它相关的所有内容都变得可见。但与其他标题相关的所有其他标题都保持不可见。**

我怎样才能做到这一点？我应该使用什么组件？代码应该是什么样的？

谢谢您的帮助！

/克里斯

# html - 像#top 一样，从中间加载页面？

> ID：14140059
> 
> 赞同：0
> 
> 时间：2013-01-03T13:40:35.500
> 
> 标签：html

如何从中间重新加载页面，我有 5,6 个显示图像的链接，而第一个图像没有链接。所以当我点击下面的链接时，它总是显示顶部的图像。

1\. 注册
2\. 展示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:44:43.357

你的问题非常难以理解......但如果我的**猜测**是正确的，你想在你想要滚动到的位置放置一个锚点（带有名称）。例如：

```
<a name="mymiddle">...</a> 
```

然后你可以调用你的页面，这将滚动到那个位置：

```
mypage.htm#mymiddle 
```

# objective-c - 关闭文本框的代码错误

> ID：14140060
> 
> 赞同：0
> 
> 时间：2013-01-03T13:40:39.730
> 
> 标签：objective-c, ios, ios5, compiler-warnings

我在这里关注了一个关于如何在用户按下返回键时关闭键盘的问题（似乎再也找不到确切的问题了）。我已经实现了 Resign First Responder 代码，它在应用程序中运行良好，但是为了使其正常工作，据说将以下行添加到`viewDidLoad`.

```
self.symbolstext.delegate = self; 
```

虽然这很好用，并且键盘确实会关闭 Xcode 给出如下警告，

```
Assigning to 'id<UITextFieldDelegate>' from incompatible type 'MemorableSettings *const __strong' 
```

可以这样留下它还是如何解决此警告。

# vb.net - 如何仅将数值添加到 vb.net 中的文本框

> ID：14140067
> 
> 赞同：2
> 
> 时间：2013-01-03T13:41:38.603
> 
> 标签：vb.net, validation

我制作了一个包含 3 个文本框和一个名为“计算”的按钮的 vb.net 表单。我要做的就是在文本框中输入一些值，然后单击计算数字的按钮。我已经完成了计算编码部分。

现在我只想在文本框中输入数字，如果我输入字母或符号，当我单击确定按钮时，我需要使用确定按钮获得严重错误消息。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:12:45.143

如果您希望在用户在 WinForm 应用程序中输入他们的值时能够处理这个问题，那么这非常有效：

```
Private Sub TextBox_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles Textbox.KeyDown
        Select Case e.KeyCode
            Case Keys.D0 To Keys.D9, Keys.NumPad0 To Keys.NumPad9, _
                    Keys.OemPeriod, Keys.Decimal, Keys.Back, Keys.Delete, _
                    Keys.Left, Keys.Right
                If e.Shift = True Then
                    e.SuppressKeyPress = True
                    Exit Sub
                End If
                e.SuppressKeyPress = False
            Case Else
                e.SuppressKeyPress = True
        End Select
    End Sub 
```

它允许在文本框中进行数字、小数和导航（删除、退格、左和右）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:51:57.847

您可以使用`Int32.TryParse`(或`Double.TryParse`) 检查输入的数字是否为整数（或双精度数，带小数位）。

```
Dim num As Int32
If Not Int32.TryParse(textBox1.Text, num) Then
    MessageBox.Show("Please enter only integers!", "Critical Warning",
                     MessageBoxButtons.OK, MessageBoxIcon.Warning)
End If 
```

[**`MessageBox.Show`方法**](http://msdn.microsoft.com/en-us/library/365dky5y.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:02:17.980

您没有指定您是为 Asp 编码还是为 WinForms WinForms 编码：

```
Private Sub TextBoxes_TextChanged(sender As System.Object, e As System.EventArgs) Handles TextBox1.TextChanged,TextBox2.TextChanged,TextBox3.TextChanged
  'Assuming TextBox1,TextBox2,TextBox3 are your textboxes
   Dim txt as new textbox
   txt=DirectCast(sender,TextBox)
   If IsNumeric(txt.text)=False Then
     'Here put your code: what you would to do if user insert a not numeric value
     'For example, messagobox, ErrorProvider, or clear the textBox etc
   End if

End Sub 
```

# mongodb - Grails mongodb 插件，处理关系循环

> ID：14140069
> 
> 赞同：0
> 
> 时间：2013-01-03T13:41:49.330
> 
> 标签：mongodb, grails, associations, grails-orm

给定社交网络中的个人资料：

```
Class Profile {
   String name
   List<Profile> friends

   static hasMany = [friends:Profile]
} 
```

想象一个配置文件 A 与配置文件 B 是朋友，反之亦然：

```
a.addToFriends(b)
b.addToFriends(a) 
```

加载配置文件时

```
def p = Profile.get(id) 
```

该循环导致堆栈溢出，因为所有关联都被加载到任何深度。看起来[mongodb 插件](http://grails.org/plugin/mongodb)不支持延迟加载，这将防止恶性加载循环。我的灵魂是使用低级 gmongo API，将 ObjectID 存储在朋友集合中，并在 ProfileService.getProfileById() 方法中手动加载关联。这工作正常，但我更喜欢尽可能使用 GORM。现在我根本无法将 GORM 用于可能循环的此类课程。有没有办法教mongodb插件延迟加载？我已经尝试将 fetchMode 设置为惰性，但它只是没有工作....有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T02:37:28.937

据我所知，Grails 至少有 2 个 MongoDB Gorm 插件。如果你使用[的是基于 morphia 的](https://github.com/jkuehn/gorm-mongodb)，惰性引用可以通过`@Reference(lazy=true)`.

# xml - XML - 查找给定节点遍历的路径

> ID：14140073
> 
> 赞同：1
> 
> 时间：2013-01-03T13:42:09.023
> 
> 标签：xml, perl, xpath

我有一个类似的xml

```
<Screen>
    <window name="gui">
        <widget name="status" pos="0:0">
            <timedate name="timedate"/>
            <message name="message"/>
        </widget>
    </window>
</Screen> 
```

这个 xml 的一个好处是每个节点都有唯一的名称。它不会在 xml 中的任何地方重复。

要找到一个节点，我可以使用 xpath 进行查询，并将得到它的存在/不存在的结果，但我需要找到遍历的路径。

例如，我可以使用 xpath 查询“//timedate”来搜索 timedate 节点，但除此之外，我还需要遍历的路径，即 Screen/window/widget/timedate。

请建议我一些方法来检索路径。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:24:38.673

**有关完整解决方案，请参阅此答案**：[https](https://stackoverflow.com/a/4747858/36305) ://stackoverflow.com/a/4747858/36305 。

虽然解决方案在 XSLT 中，但如有必要，可以将代码转换为任何其他编程语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:31:56.340

确切的细节取决于您用来处理 XML 的模块。例如，在[XML::XSH2](http://p3rl.org/XML%3a%3aXSH2)中，您可以使用`pwd`命令。

一个更详细的[XML::LibXML](http://p3rl.org/XML%3a%3aLibXML)示例：

```
#!/usr/bin/perl
use warnings;
use strict;
use feature qw(say);

use XML::LibXML;

my $x = XML::LibXML->load_xml(location => 'example.xml');
my $n = $x->find('//timedate')->shift;
say $n->nodePath; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T18:47:01.710

CPAN 有一个工具[xpathify](https://metacpan.org/module/xpathify)，它本身是[HTML::Untemplate](https://metacpan.org/module/SYP/HTML-Untemplate-0.015/lib/HTML/Untemplate.pod)包的一部分：

![截屏](../Images/ef3deef176bb8ff19b87221b6b1025ce.png)

# javascript - 使用 jQuery 从 asp.net 响应中检索 JSON 值

> ID：14140076
> 
> 赞同：1
> 
> 时间：2013-01-03T13:42:15.763
> 
> 标签：javascript, asp.net, json, jquery

我正在做一个小项目。主要是为了获得一些理解，因为我是一个完整的网络菜鸟。在以下问题中可能会或可能不会明显。

我的最终结果是从数据库中获取一堆值。将它们放入 JSON 对象，然后使用一些 jQuery/JavaScript 处理数据。我一直在做大量的阅读，在这里浏览了大量的帖子，但我找不到与我的问题有关的东西。

我正在使用 VS2010 C#。我在客户端受 IE7 的约束，但我可以使用 Firefox 进行测试。我现在也在努力`localHost`。

我的 JavaScript 如下。

```
function plotMarkers() {
var pathStart = new String(window.location);
var newPath = pathStart.replace("Default.aspx", "getMarkers.aspx");
alert(newPath);
$("#statusDiv").html('<a href="' + newPath + '">JSON Data</a>');

$.getJSON(newPath, function (data) {

    alert("Loading JSON");
    $.each(data, function (index, elem) {

        var myLatlng = new google.maps.LatLng(elem.lat, elem.lng);
        var marker = new gogle.maps.Marker({
            position: myLatlng,
            title: elem.title
        });

        marker.setMap(map);
    });

}, function () { alert("loaded") });} 
```

我在 Firefox 中没有收到任何 Javascript 错误，但在 IE7 中却有。永远不会在`alert("Loading JSON")`任何地方开火。我从来没见过。

我的 getMarkers.aspx 代码

```
public partial class getMarkers : System.Web.UI.Page {
    protected void Page_Load(object sender, EventArgs e) {
        JavaScriptSerializer jsonSer = new JavaScriptSerializer();

        List<marker> markerList = new List<marker>();
        markerList.Add(new marker(-34.397, 150.644, "Test"));
        markerList.Add(new marker(-50, 150.644, "Test2"));

        string sJSON = jsonSer.Serialize(markerList);
        Response.ContentType = "application/json";
        Response.Write(sJSON);
    }
} 
```

我可以单击“statusDiv”中的链接，它会将我带到 aspx 页面。我在 IE7 中遇到错误，但在 Firefox 中可以正常工作。在这些页面中解析回给我的 JSON 是正确的。我将响应复制并粘贴到另一个函数中，绘图仪将两个图钉放在我的地图上。

1.  代码似乎没有进入`$.getJSON`函数。

2.  IE7 的设置存在问题（或一般问题）`getMarkers.aspx`。谷歌搜索了一些教程，这就是我结束的地方。我的方法可能完全错误。或者我错过了我应该做的事情。我似乎找不到那个具体的教程，它一定是在我愤怒的 2 天并计数谷歌冒险中意外关闭的。

Firefox`getMarkers.aspx`将 JSON 显示为第一行，然后是 html。只是浏览器中的纯文本。

IE7 显示一个 XML 错误并告诉我 JSON 字符串不允许出现在文档的顶层。我确实阅读了一些关于 IE7 的文章，总是试图用一个精心设计的解决方法来解析 XML。我不能这样做，因为我不知道有多少客户会使用它。有没有更好的方法来做我正在做的事情？

如果有人能指出我需要去的方向，我将不胜感激。希望我的帖子不会太复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:53:09.060

您可能希望在页面加载方法结束时使用 Response.End()，以便在 JSON 之后不会呈现网页的其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:52:56.943

在我看来，对于初学者来说，您需要[json2](https://github.com/douglascrockford/JSON-js)库来处理 IE7 的问题。

至于触发你的函数 - 我看不到实际调用 plotMarkers() 的任何地方，它只是定义的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:06:38.623

单击#statusDiv 链接时，您是否尝试在现有页面的地图上显示标记？如果是这样，那么您做错了：不要在#statusDiv 中放置链接，只需确保在单击它时调用 getJSON 函数。试试这个 ：

```
function plotMarkers() {
    var pathStart = new String(window.location);
    var newPath = pathStart.replace("Default.aspx", "getMarkers.aspx");
    alert(newPath);
    $("#statusDiv").text('JSON Data');
    $("#statusDiv").on('click',function(){

        $.getJSON(newPath, function (data) {

        alert("Loading JSON");
        $.each(data, function (index, elem) {

            var myLatlng = new google.maps.LatLng(elem.lat, elem.lng);
            var marker = new gogle.maps.Marker({
                position: myLatlng,
                 title: elem.title
            });

            marker.setMap(map);
        });

    }, function () { alert("loaded") });
});
} 
```

# windows - 用于构建多平台安装程序的软件

> ID：14140080
> 
> 赞同：0
> 
> 时间：2013-01-03T13:42:21.957
> 
> 标签：windows, macos, installation, installshield

我需要为 Windows 和 Macintosh 平台构建一个安装程序。此安装程序必须：

*   删除现有文件夹，
*   将文件夹复制到特定目的地，
*   启动程序。

今天我在 Windows 上使用 .bat，在 Macintosh 上使用 applescript。

但是 UI 并不漂亮，所以我尝试找到一个或将软件创建漂亮的安装。

我希望有人能帮助我。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:50:34.663

您可以使用以下工具：

*   [国家安全情报局](http://nsis.sourceforge.net/Main_Page)
*   [德诺瓦](http://www.denova.com/)
*   [安装4j](http://www.ej-technologies.com/products/install4j/overview.html)
*   [安装构建器](http://installbuilder.bitrock.com/)

亲切的问候，

NDakotaBE

# c++ - 扩展上下文没有方法

> ID：14140083
> 
> 赞同：0
> 
> 时间：2013-01-03T13:42:26.887
> 
> 标签：c++, apache-flex, actionscript, air, native

我正在尝试为 adobe flex 项目构建一个用 C++ 编写的本机扩展。我仔细检查了所有内容一百次，但无论我做什么，我总是得到错误“扩展上下文没有名为 getHelloWorld 的方法”。

这是我的代码：

Flash builder actionscript 类：

```
package
{
    import flash.events.EventDispatcher;
    import flash.external.ExtensionContext;

    public class QCARBridge extends EventDispatcher
    {
        private var extContext:ExtensionContext;

        public function QCARBridge()
        {
            extContext = ExtensionContext.createExtensionContext("NativeQCAR", null);

            if(!extContext) {
                throw new Error("Extension context couldn't be created :(");
            }
        }

        // Native methods
        public function getTestString():String {
            return extContext.call("getTestString") as String;
        }

        public function isSupported():int {
            return extContext.call("isSupported") as int;
        }

        public function getHelloWorld():String {
            return extContext.call("getHelloWorld") as String;
        }
    }
} 
```

Flash builder extension.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<extension xmlns="http://ns.adobe.com/air/extension/3.1">
    <id>NativeQCAR</id>
    <versionNumber>1</versionNumber>
    <platforms>
        <platform name="Windows-x86">
            <applicationDeployment>
                <nativeLibrary>libNativeQCAR.dll</nativeLibrary>
                <initializer>initializer</initializer>
                <finalizer>finalizer</finalizer>
            </applicationDeployment>
        </platform>
    </platforms>
</extension> 
```

和 C++ 代码：

```
#include "main.h"
#include "Stdlib.h"
#include "String.h"

FREObject isSupported(FREContext ctx, void* funcData, uint32_t argc, FREObject argv[])
{
  FREObject result;

  uint32_t isSupportedInThisOS = 1;

  FRENewObjectFromBool( isSupportedInThisOS,  &result);

  return result;
}

FREObject getTestString(FREContext ctx, void* funcData, uint32_t argc, FREObject argv[])
{
  FREObject result;

  const char *str = "De android library zegt ook eens hallo...";
  FRENewObjectFromUTF8(strlen(str)+1, (const uint8_t *)str, &result);

  return result;
}

FREObject getHelloWorld(FREContext ctx, void* funcData, uint32_t argc, FREObject argv[])
{
  FREObject result;

  const char *str = "Hello World!!  This is your DLL talking!";
  FRENewObjectFromUTF8(strlen(str)+1, (const uint8_t *)str, &result);

  return result;
}

void contextInitializer(void* extData, const uint8_t* ctxType, FREContext ctx, uint32_t* numFunctions, const FRENamedFunction** functions)
{
  *numFunctions = 3;
  FRENamedFunction* func = (FRENamedFunction*) malloc(sizeof(FRENamedFunction) * (*numFunctions));

  func[0].name = (const uint8_t*) "getTestString";
  func[0].functionData = NULL;
  func[0].function = &getTestString;

  func[1].name = (const uint8_t*) "isSupported";
  func[1].functionData = NULL;
  func[1].function = &isSupported;

  func[2].name = (const uint8_t*) "getHelloWorld";
  func[2].functionData = NULL;
  func[2].function = &getHelloWorld;

  *functions = func;
}

void contextFinalizer(FREContext ctx)
{
  return;
}

void initializer(void** extData, FREContextInitializer* ctxInitializer, FREContextFinalizer* ctxFinalizer)
{
  *ctxInitializer = &contextInitializer;
  *ctxFinalizer = &contextFinalizer;
}

void finalizer(void* extData)
{
  return;
} 
```

似乎我已经以正确的方式连接了所有点，但为什么它不工作呢？

# c# - 将换行符附加到字符串的最佳方法，除了最后一个

> ID：14140084
> 
> 赞同：39
> 
> 时间：2013-01-03T13:42:26.943
> 
> 标签：c#, .net, string, refactoring

我正在寻找最好/最干净的方法来迭代字符串列表，然后创建一个由换行符分隔的字符串（最后一个除外）。像这样：

```
String 1
String 2
String 3 
```

我在这里写了两个循环，在字符串末尾有一个换行符（我想避免），另一个没有。对我来说，这个不仅看起来不“干净”。我认为会有一种更简单的方法来做到这一点，以便逻辑几乎与在字符串末尾有一个新行的示例中一样简单。

```
List<string> errorMessages = new List<string>();
string messages = "";

//Adds newline to last string. Unwanted.
foreach(string msg in errorMessages)
{
    messages += msg + "\n";
}

messages = "";
bool first = true;

//Avoids newline on last string
foreach (string msg in errorMessages)
{
    if(first)
    {
        first = false;
        messages = msg;
    }
    else
    {
        messages += "\n" + msg;
    }
} 
```

也许这是一厢情愿的想法，但我原以为这是很常见的事情，可以保证有更好的方法来实现我的目标。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-03T13:45:13.527

使用连接

```
string.Join(System.Environment.NewLine, errorMessages); 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-01-03T13:45:00.550

您可以使用[String.Join](http://msdn.microsoft.com/en-us/library/dd783876(v=vs.100).aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)。

```
string.Join("\n", errorMessages); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-01-03T13:48:08.603

```
using System;

string.Join(Environment.NewLine, errorMessages); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-03T13:46:38.290

最短的方法是使用`.Aggregate(...)`或`String.Join(...)`。

```
var messages = errorMessages.Aggregate((x, y) => x + Environment.NewLine + y); 
```

或者

```
var messages = String.Join(Environment.NewLine, errorMessages); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2022-01-12T14:03:44.617

I was having problems using

```
string.Join(System.Environment.NewLine, errorMessages); 
```

In the page, instead of the new line I was getting **\r\n** instead. I solved it by using

```
string.Join("<br>", errorMessages); 
```

# python - 在 While 循环中使用时将 Raw_input 保存到列表中

> ID：14140089
> 
> 赞同：0
> 
> 时间：2013-01-03T13:42:43.843
> 
> 标签：python

我今天已经发布了一个问题，它有两个问题。其中一个解决得很好，然后就有点复杂了。所以请原谅我，但我将另一个问题单独发布，因为它混淆了一些窥视：

我是python新手，所以提前道歉。任何帮助深表感谢。我已经被这个代码困住了 2 周了，我的视野很狭隘，无法解决：

基本上，我们的任务是掌握面向对象的编程。不幸的是，我们不得不使用很多人不喜欢的“get”和“set”，但是，根据我们的导师，我们必须这样做。我们被告知 tp 创建一个程序，向用户呈现一个带有 3 个选项的屏幕。1.添加学生。2\. 查看学生和 3\. 删除学生.. 在我的 AddStudent 函数中，我必须要求用户输入 fname Lname age degree 学习 ID 号（这些是简单的位）以及每个模块的模块名称和等级，我已经设法创建了一个循环，它会一遍又一遍地要求用户输入模块和相应的等级，并且当用户在 modulname 字段中输入 -1 时会中断所述循环。但是，当尝试将其保存到名为 students[] 的列表中时... （它在我的代码的所有函数的最顶部，显然使它成为全局）它保存来自用户的所有输入：年龄名称等，但是当涉及到保存模块名称和等级时，它只保存最后一个输入而不是我需要的多个输入。我不确定它是在我的 AddStudent 函数中它没有保存还是在我的 ViewStudent 函数中：两者都在下面（记住我必须使用 GET 和 SET malarky）；）

```
students[] # Global List

def addStudent():
    print 
    print "Adding student..."
    student = Student()
    firstName = raw_input("Please enter the student's first name: ")
    lastName = raw_input("Please enter the student's last name: ")
    degree = raw_input("Please enter the name of the degree the student is studying: ")
    studentid = raw_input("Please enter the students ID number: ")
    age = raw_input("Please enter the students Age: ")

    while True:
        moduleName = raw_input("Please enter module name: ") 
        if moduleName == "-1":
            break
        grade = raw_input ("Please enter students grade for " + moduleName+": ")

    student.setFirstName(firstName) # Set this student's first name
    student.setLastName(lastName)
    student.setDegree(degree)# Set this student's last name
    student.setGrade(grade)
    student.setModuleName(moduleName)
    student.setStudentID(studentid)
    student.setAge(age)
    students.append(student)
    print "The student",firstName+' '+lastName,"ID number",studentid,"has been added to the system." 
```

………………………………………………………………………………

```
def viewStudent():
    print "Printing all students in database : "

    for person in students:
            print "Printing details for: " + person.getFirstName()+" "+ person.getLastName()
            print "Age: " + person.getAge()
            print "Student ID: " + person.getStudentID()
            print "Degree: " + person.getDegree()
            print "Module: " + person.getModuleName()
            print "Grades: " + person.getGrade() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:52:23.193

您的问题是该模块是您不断更改的单个变量。相反，让它成为一个列表。

```
while True:
        moduleName = raw_input("Please enter module name: ") 
        if moduleName == "-1":
            break
        grade = raw_input ("Please enter students grade for " + moduleName+": ") 
```

应该是这样的

```
modules = []

while True:
        moduleName = raw_input("Please enter module name: ") 
        if moduleName == "-1":
            break
        grade = raw_input ("Please enter students grade for " + moduleName+": ")
        modules.append((moduleName, grade)) 
```

添加一个新变量，`student`它是“模块”并且是一个列表。

然后`modules`将是一个元组列表，`(moduleName, grade)`要显示它们，请从以下位置更改行`viewstudent`：

```
 print "Module: " + person.getModuleName()
        print "Grades: " + person.getGrade() 
```

到：

```
for module, grade in person.getModules():
       print "Module: " + module
       print "Grades: " + grade 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:38:44.063

看来你需要这样的东西：

```
modules = {}

while True:
    module_name = raw_input("Please enter module name: ") 
    if module_name:
        grade = raw_input ("Please enter students grade for " + module_name +": ")
        modules[module_name] = grade 
```

模块是一个字典（其他语言中的“哈希映射”），每个模块名称都是键，等级是值，或者你也可以用元组来做，无论你的船漂浮在哪里。

不是检查 -1 作为停止条件，而是检查是否为真，在 python 中，任何空的都被评估为假。

# uiimageview - 长按自定义项 UICollectionViewCell 图像更改

> ID：14140093
> 
> 赞同：0
> 
> 时间：2013-01-03T13:42:48.970
> 
> 标签：uiimageview, uigesturerecognizer, cell, uicollectionview, gestures

如何在长按手势后更改单元格图像视图？

有了这个，当我单击一个单元格（长按）时，会出现 4 个自定义项目，但是当我选择其中一个时，应用程序会崩溃。（如果您删除 :(Cell*)cell 和 cell.imageView.image = [UIImage imageNamed:[NSString stringWithFormat:@"ICUbedRED.png"]]; 它可以工作...我的意思是出现 alertView 但图像当然不会'不改变）。

```
 - (void)longPress:(UILongPressGestureRecognizer *)recognizer {
    if (recognizer.state == UIGestureRecognizerStateBegan) {
        Cell *cell = (Cell *)recognizer.view;
        [cell becomeFirstResponder];

        UIMenuItem *highDep = [[UIMenuItem alloc] initWithTitle:@"High Dependency" action:@selector(hiDep:)];
        UIMenuItem *lowDep = [[UIMenuItem alloc] initWithTitle:@"Low Dependency" action:@selector(lowDep:)];
        UIMenuItem *booked = [[UIMenuItem alloc] initWithTitle:@"Booked"     action:@selector(booked:)];
        UIMenuItem *free = [[UIMenuItem alloc] initWithTitle:@"Free" action:@selector(free:)];

            UIMenuController *menu = [UIMenuController sharedMenuController];
    [menu setMenuItems:[NSArray arrayWithObjects:booked, highDep, lowDep, free, nil]];
        [menu setTargetRect:cell.frame inView:cell.superview];
        [menu setMenuVisible:YES animated:YES];

   }
} 
```

空隙是：

```
 - (void)hiDep:(Cell*)cell
 {
    NSLog(@"Bed is HiDep");

    cell.imageView.image = [UIImage imageNamed:[NSString stringWithFormat:@"ICUbedRED.png"]];

     UIAlertView *testAlert = [[UIAlertView alloc] initWithTitle:@"This Bed is High     Dependency"
                                                message:@""
                                               delegate:self cancelButtonTitle:@"OK"       otherButtonTitles:nil, nil];

    [testAlert show];
    [testAlert release];

  }

- (void)lowDep:(Cell*)cell
 {.
    cell.imageView.image = [UIImage imageNamed:[NSString     stringWithFormat:@"ICUbedYELLOW.png"]];
..}

 - (void)free:(Cell*)cell
 {..
    cell.imageView.image = [UIImage imageNamed:[NSString stringWithFormat:@"ICUbedGREEN.png"]];
.}

 - (void)booked:(Cell*)cell
 {..
    cell.imageView.image = [UIImage imageNamed:[NSString stringWithFormat:@"ICUbedBLUE.png"]];
.} 
```

细胞构建方法是：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView     cellForItemAtIndexPath:(NSIndexPath *)indexPath{

     static NSString *identifier = @"Cell";
    Cell *cvc = (Cell *)[collectionView dequeueReusableCellWithReuseIdentifier:identifier forIndexPath:indexPath];

    int i = indexPath.row%[labelArray count];
    number = i;

    UILongPressGestureRecognizer *recognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPress:)];

    [cvc addGestureRecognizer:recognizer];

    cvc.imageView.image = [UIImage imageNamed:[NSString stringWithFormat:@"icubed.png"]];
    cvc.label.text =  [labelArray objectAtIndex:number];

       return cvc;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:22:20.753

@dottorfeelgood 它正在崩溃

```
cell.imageView.image = [UIImage imageNamed:[NSString stringWi...... 
```

因为，对象作为参数返回给方法，如

*   (void)lowDep:(Cell*)cell 不属于 Cell 类，返回的参数属于 UIMenuItem 类。因为您单击的是 menuItems 而不是 Cell。

您可以在 UICollectionView 默认提供的 UICollectionCell 解决方案上使用 MenuItems 和相应的操作，而不是做您现在正在做的事情。[你可以在这里](http://paulsolt.com/2012/11/uicollectionview-custom-actions-and-uimenucontroller/)查看本教程！

只需实现 3 个委托方法和

```
// These methods provide support for copy/paste actions on cells.
// All three should be implemented if any are.
- (BOOL)collectionView:(UICollectionView *)collectionView shouldShowMenuForItemAtIndexPath:(NSIndexPath *)indexPath;
- (BOOL)collectionView:(UICollectionView *)collectionView canPerformAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender;
- (void)collectionView:(UICollectionView *)collectionView performAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender; 
```

并将您需要的自定义菜单项设置为 ViewdidLoad 中的 sharedMenuController。

希望这会有所帮助，请原谅我的不良句子形成。

# ios - 缩放 MKMapview 以绑定注释使注释在 mapview 的边缘

> ID：14140096
> 
> 赞同：0
> 
> 时间：2013-01-03T13:42:55.663
> 
> 标签：ios, mkmapview

嗨，有 MKMapView，我根据添加到 mapview 的注释进行缩放，但有时我会看到地图缩放到某个级别，其中注释落在边缘并且一半可见。下面是我用来设置地图区域的代码。

MKPolygon *poly = [MKPolygon polygonWithCoordinates:points count:annotationCount]; MKCoordinateRegion region=MKCoordinateRegionForMapRect([poly boundingMapRect]);

请提供一些解决方案，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:49:14.793

所以你的区域太小了，你有没有考虑把它做大？

您的[MKCoordinateRegion](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKitDataTypesReference/Reference/reference.html)有一个 CLLocationCoordinate2D（中心）和一个 MKCoordinateSpan（跨度）。那个 MKCoordinateSpan 有一个 latitudeDelta （考虑这个高度）和一个 longitudeDelta （考虑这个宽度）。你想要做的是一个稍微大一点的区域。所以我的第一个猜测是

```
region.span.latitudeDelta = region.span.latitudeDelta * 1.01; 
```

然后将您的地图视图设置为该区域

# iphone - 没有从电子邮件发送 url 链接

> ID：14140098
> 
> 赞同：-3
> 
> 时间：2013-01-03T13:42:59.447
> 
> 标签：iphone, objective-c, ios, mfmailcomposeviewcontroller

在我的 iphone 应用程序中，在 MFMailComposer 中，我正在添加一个附件。该附件作为 url 链接。在该链接中有一个 pdf 文件。当我单击发送时，url 链接不会发送到目标邮件地址。

我正在使用此代码

```
 -(void)sendMail
 {
    MFMailComposeViewController *mailView= [[MFMailComposeViewController alloc] init];
    mailView.mailComposeDelegate=self;
    [mailView setSubject:titleString];
    NSArray  *array = [[NSArray alloc]initWithObjects:emailString, nil];
    [mailView setToRecipients:array];
    NSData *textData = [NSData dataWithContentsOfFile:self.fileString];
    [mailView addAttachmentData:textData mimeType:@"text/plain" fileName:self.fileString];

    [mailView setMessageBody:self.templatetextstring isHTML:YES];
    [self presentModalViewController:mailView animated:YES];
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:49:17.353

使用此代码

```
NSString *link = [NSString stringWithFormat:@"http://www.google.com"];
[controller setMessageBody:[NSString stringWithFormat:@"<p><font size=\"2\" face=\"Helvetica\"><a href=%@></br>%@</br></a></br></font></p>",link,@"Google"] isHTML:YES]; 
```

希望对你有帮助。。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:56:36.747

我不确定我是否理解您的问题，您可能是要附加 pdf 文档还是只想添加指向 pdf 文档的链接，所以我会回答这两个问题。这是我用来将 pdf 数据附加到电子邮件的代码

```
- (void)emailFile
{
    if(![MFMailComposeViewController canSendMail]) {
        UIAlertView *cantSend = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Device not configured to send email" delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
       [cantSend show];
    } else {
        MFMailComposeViewController *mailView = [[MFMailComposeViewController alloc] init];
        mailView.mailComposeDelegate = self;

        [mailView setSubject:@"PDF Attached to email"];

        // Adding an actual PDF document to the email.
        [mailView addAttachmentData:(__bridge NSData *)myPDFData mimeType:@"pdf" fileName:@"AttachedPDFDocument"];

        [mailView setMessageBody:[NSString stringWithFormat:@"Sending %@. This email maybe sent as junk mail",fileName] isHTML:NO];
        [self presentModalViewController:mailView animated:YES];
     }
} 
```

请注意，我添加的是 pdf 数据而不是实际的 pdf，然后我将扩展名 (MimeType) 设置为 pdf，然后设置文件的名称，将附件添加到您正在构建的电子邮件中非常简单。

要将链接添加到电子邮件，就像

```
 - (void)emailFile
{
    if(![MFMailComposeViewController canSendMail]) {
        UIAlertView *cantSend = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Device not configured to send email" delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
       [cantSend show];
    } else {
        MFMailComposeViewController *mailView = [[MFMailComposeViewController alloc] init];
        mailView.mailComposeDelegate = self;

        [mailView setSubject:@"PDF Link added in HTML"];

        // Adding a HTML Link to an email. Remembering to set the Message to allow HTML.
        NSString *link = [NSString stringWithFormat:@"http://www.google.com"];
        [mailView setMessageBody:[NSString stringWithFormat:@"<p><font size=\"2\" face=\"Helvetica\"><a href=%@></br>%@</br></a></br></font></p>",link,@"Google"] isHTML:YES];

        [self presentModalViewController:mailView animated:YES];
     }
} 
```

请注意，您没有附加任何数据，您将其设置`setMessage`为使用 HTML，而第一个示例不使用 HTML。现在，这将允许您`NSString`在包含 html 元素的消息正文中设置一个。

**编辑**

myPDFData 是`CFDataRef`我从网络服务下载的 PDF 的数据内容之一，然后用户可以通过电子邮件将其转发给自己。如果您正在使用，`ARC`那么您需要在`(__bridge NSData *)myPDFData`设置附件数据时添加网桥。

希望这可以帮助。

# php - laravel 路由和控制器视图架构

> ID：14140112
> 
> 赞同：1
> 
> 时间：2013-01-03T13:43:58.947
> 
> 标签：php, laravel, laravel-routing

我正在与 Laravel 合作一个新项目，我想设置一个新的 URL，

`/project/create`

我认为这就像执行以下操作一样简单，

```
<?php

class Project_Controller extends Base_Controller {

    public function action_create()
    {
        return "Step 1";
    }

} 
```

但是这会返回一个 404，你能不能只基于 /controller/action 设置一个 url 不是这种情况，我必须这样做吗？

```
Route::get('/project/create', function()
{
    return View::make('project.index');
}); 
```

或类似网站需要的每个 URL/请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:57:50.663

您可以进行控制器路由。

**选项1：**

```
// Register a specific controller
Route::controller('project'); 
```

**选项 2**（在 Laravel 3 中不推荐，因为有时会出现错误）：

```
 // Register all controllers and all routes
 Route::controller(Controller::detect()); 
```

您可以[在此处查看有关路由和控制器路由的更多选项](http://www.laravel.com/docs/routing#the-basics)

# android - 在适用于 Android 的 Adob e AIR (Flex 4.6.0) 中显示前置摄像头、视频和 VideoDisplay 的错误

> ID：14140114
> 
> 赞同：5
> 
> 时间：2013-01-03T13:44:15.580
> 
> 标签：android, actionscript-3, apache-flex, air, flex4.6

我目前正在努力工作`AS3`并`Flex 4.6`创建一个 android 应用程序。我正在使用前置摄像头并将其附加到`Video`我作为子对象添加到对象的本地对象上`VideoDisplay`。

当我在我的计算机上调试时，一切正常，但是当我构建项目并在我的 Android 设备上运行它时，我的本地视频显示变成了灰色网格。例如，我拍摄了设备的照片。![问题图片](../Images/071e6928c70a102cf220a4d9bec5e534.png)

我根据 Stackoverflow 上的一篇文章编写了这个方法来初始化前后摄像头。

```
private function InitCamera():void {
            var CamCount:int = ( Camera.isSupported ) ? Camera.names.length : 0;
            for( var i:int = 0; i < CamCount; i++ ) {
                var cam:Camera = Camera.getCamera( String( i ) );
                if( cam ) {
                    if( cam.position == CameraPosition.FRONT ) {
                        CamFront = cam;
                        continue;
                    }

                    if( cam.position == CameraPosition.BACK ) {
                        CamBack = cam;
                        continue;
                    }

                    if( cam.position == CameraPosition.UNKNOWN ) {
                        CamFront = cam;
                        continue;
                    }
                }
            }
        } 
```

我编写了这个方法来创建一个`Video`对象，将前面附加`Camera`为默认摄像头并将`Video`作为子项添加到`VideoDisplay`：

```
private function SetUpLocalVideo():void {
            Debug( "Setting up local video" );
            LocalVideo = new Video( this.LVideo.width, this.LVideo.height );
            LocalVideo.attachCamera( CamFront );

            LVideo.addChild( LocalVideo ); <--- this is the VideoDisplay
        } 
```

我一直在互联网上寻找解决方案，但到目前为止我没有找到任何解决方案。

以前有没有其他人遇到过这个问题？你能和我分享你的解决方案吗？我很感激帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T12:20:00.803

将**渲染模式**设置为**直接**在您的 application.xml 上

```
<renderMode>direct</renderMode> 
```

如果它仍然不起作用，请将主 flex 应用程序的**dpi 设置更改为 240**。

# c# - 如何在 WPF 中以漂亮的平铺格式显示动态数量的对象？

> ID：14140119
> 
> 赞同：2
> 
> 时间：2013-01-03T13:44:42.820
> 
> 标签：c#, wpf

我想制作可以显示 1 或 2 个视频的应用程序。

在窗口的左侧将有 2 个标记为“1”或“2”的按钮作为我想在应用程序右侧显示的图块数量。

通过单击“1”，将在整个右侧播放视频。
单击“2”将在右侧显示 2 个视频，分 2 个图块。

目前，它唯一显示 1 个视频的完整窗口图块，以及将整个窗口拆分为 2 个并显示 2 个视频的另一个图块，但如果我想要 4 个视频，我想将主窗口拆分为 4 个并显示 4 个不同的视频。

实现这一点的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T14:43:59.757

根据您在[评论](https://stackoverflow.com/questions/14140119/wpf-display-object-on-canvas-in-tile-look-alike#comment19581145_14140119)中所说的话，听起来您想要按钮来创建动态数量的视频并将它们很好地显示在网格中

`ObservableCollection<VideoPlayer>`我将首先在您的[DataContext](http://rachel53461.wordpress.com/2012/07/14/what-is-this-datacontext-you-speak-of/)中创建一个包含您想要的视频数量的第二个属性，以及包含`VideoPlayerCollection.Count`四舍五入的平方根的第二个属性，用于确定网格大小。

然后我会显示`VideoPlayerCollection`using 将`ItemsControl`其`ItemsPanelTemplate`设置为 a `UniformGrid`or `Grid`，它将行数和列数绑定到您的`GridSize`属性。

（您可能需要构建一些`AttachedProperties`来绑定这些属性，因为网格没有行/列计数属性，我不记得 UniformGrid`Rows`和`Columns`属性`DependencyProperties`是否可以绑定到。我有一些示例如果您对示例感兴趣，请在[此处](http://rachel53461.wordpress.com/2011/09/17/wpf-grids-rowcolumn-count-properties/)绑定`Grid's`RowCount 和 ColumnCount的 AttachedProperties）

最后，您的 Buttons 会修改您`VideoPlayerCollection`以添加或删除您想要显示的任意数量的项目。

所以你最终的 XAML 可能看起来像这样：

```
<DockPanel>

    <StackPanel DockPanel.Dock="Left">
        <Button Content="One Window" 
                Command="{Binding ModifyVideoCountCommand}"
                CommandParameter="1" />
        <Button Content="Two Windows" 
                Command="{Binding ModifyVideoCountCommand}"
                CommandParameter="2" />
        <Button Content="Four Windows" 
                Command="{Binding ModifyVideoCountCommand}"
                CommandParameter="4" />
    </StackPanel>

    <ItemsControl ItemsSource="{Binding VideoPlayerCollection}"
                  ItemTemplate="{StaticResource VideoPlayerTemplate}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <UniformGrid Rows="{Binding GridSize}" Columns="{Binding GridSize}" />
            </ItemsPanelTemplate>
        </ItemsPanelTemplate>
    </ItemsControl>

</DockPanel> 
```

虽然`DataContext`您的表单后面将包含以下属性：

```
ICommand ModifyVideoCountCommand { get; set; }
ObservableCollection<VideoPlayer> VideoPlayerCollection { get; set; }
int GridSize 
{
    get
    {
        return Math.Ceiling(Math.Sqrt(VideoPlayerCollection.Count));
    }
} 
```

根据您是否使用 a `Grid`，您可能还需要向您的类添加`RowIndex`和`ColumnIndex`属性，`VideoPlayer`以指定应该放置哪个`Grid.Row`和每个 VideoPlayer。`Grid.Column`

```
<ItemsControl.ItemContainerStyle>
    <Style>
        <Setter Property="Grid.Column" 
                Value="{Binding ColumnIndex}" />
        <Setter Property="Grid.Row" 
                Value="{Binding RowIndex}" />
    </Style>
</ItemsControl.ItemContainerStyle> 
```

# c# - 替换 unicode 字符

> ID：14140122
> 
> 赞同：0
> 
> 时间：2013-01-03T13:44:47.897
> 
> 标签：c#, regex, string, replace

```
String jData="Memur adayar\u0131n\u0131n en b\u00fcy\u00fck sorunar"
    + "\u0131ndan KPSS \u0 131 ";   
jData = Regex.Replace(jData, @"\\u0 ", @"\\u0", RegexOptions.Compiled).Trim(); 
```

我必须`"\u0 "`在 jData中替换为`"\u0"`（即删除尾随空格字符，如果有的话），但我使用的方法不起作用。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:07:27.840

所以你在字符串中有一些格式错误的 Unicode 转义，你想通过删除`0`. 这很简单：

```
jData = Regex.Replace(jData, @"(\\u0)\s+(\w+)", "$1$2"); 
```

所有这一切中最困难的部分是弄清楚所有反斜杠应该是什么意思。C# 可以帮助您支持逐字字符串的替代字符串文字语法，您必须用反斜杠转义的唯一字符是反斜杠本身。（您也必须转义引号，但您可以使用另一个引号，即 ie `""`）。

* * *

顺便说一句，我回答这个问题的真正原因是建议您不要使用`RegexOptions.Compiled`. 我敢肯定你听过很多人说它使正则表达式工作得更快。这是真的，但它过于简单化了。阅读[这篇文章](http://www.codinghorror.com/blog/2005/03/to-compile-or-not-to-compile.html)可以很好地讨论这个问题。帮自己一个忙，`RegexOptions.Compiled`甚至忘记存在，直到遇到一个没有它就无法解决的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:48:41.970

查找： `@"\\u0 "` 替换：`@"\\u0"`

他们是一样的。尝试使用大写的 O 或正常的 o

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:04:43.233

我想我成功了

```
string jData= @"Memur adayar\u0131n\u0131n en b\u00fcy\u00fck sorunar\u0131ndan KPSS \u0 131 ";   
jData = Regex.Replace(jData, @"\\u0 ", @"\u0", RegexOptions.Compiled).Trim(); 
```

`'@'`请注意，我在输入字符串前面添加了一个额外的内容。在正则表达式部分，我将第三个参数更改为`@"\u0"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T14:10:58.053

您的示例字符串有问题。我假设您实际上想要字符串中的反斜杠，在这种情况下，最简单的方法是将 @ 放在字符串文字之前。然后我相信你在第二行遇到了相反的问题，你应该在每个字符串中只使用一个反斜杠，或者省略@。没有理由在这里使用 Regex.Replace() 。jData.Replace() 就足够了：

```
 String jData=@"Memur adayar\u0131n\u0131n en b\u00fcy\u00fck sorunar"
            + @"\u0131ndan KPSS \u0 131 ";   
        jData = jData.Replace(@"\u0 ", @"\u0").Trim(); 
```

# java - 在 Play 商店中共享应用的链接

> ID：14140123
> 
> 赞同：0
> 
> 时间：2013-01-03T13:44:48.473
> 
> 标签：java, android, android-intent, google-play

在 Play 商店的应用页面上有一个按钮，允许用户通过 fx facebook 和 google+ 分享他/她正在查看的应用。有没有办法可以创建从我的应用程序到此操作的快捷方式。我知道如何创建打开所需应用程序页面的意图，但您可以直接将用户发送到此类操作。

非常感谢

截图：（我说的是顶部的蓝色突出显示按钮）

![在此处输入图像描述](../Images/b6c0c127ce6b5ca23a56ce9e14cd341f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:54:24.067

你当然可以创建它。

这个来自 Android 开发者博客的链接准确地解释了你想要什么。

[http://android-developers.blogspot.in/2012/02/share-with-intents.html](http://android-developers.blogspot.in/2012/02/share-with-intents.html)

更新：

对不起，我误读了你的问题。如果您想直接连接到 Play 商店中的动作，这是不可能的。你将无法控制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:05:15.390

据我了解，您希望您的应用程序列在该共享操作中。

您已在`AndroidManifest.xml`

```
 <activity
        android:name=".SendingActivity"
        android:label="@string/app_name"
          >
        <intent-filter>
            <action android:name="android.intent.action.SEND" />
            <data android:mimeType="*/*" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.SEND_MULTIPLE" />
            <data android:mimeType="*/*" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        </activity> 
```

# io - 在windows或windows CE环境下能否准确读取高频硬件输入？

> ID：14140126
> 
> 赞同：0
> 
> 时间：2013-01-03T13:44:59.883
> 
> 标签：io, driver, hardware

这个问题跨越了软件和硬件之间模糊的界限，所以我希望社区觉得它属于 stackoverflow，否则我会很感激一些关于将它移到哪里的建议。

我的团队目前正在开发机器人控制器，尽管我们的大多数 I/O 要求都相当温和，但我们有一个特定的输入，偶尔会以 2 微秒的间隔触发（数字上升或下降）。我们需要能够准确地为输入打上时间戳并记录下来。我们不需要立即采取任何行动。我们觉得我们应该能够利用高速 USB 或 PCI-E 总线来促进这种高速输入，但我们缺乏这方面的专业知识，也不知道解决这个问题的方法是什么喜欢，或者如果它甚至可以在没有昂贵/非常复杂的专有解决方案的情况下实现。

总结：有没有办法在 windows 或 windows CE 环境下准确读取 2 微秒 (500 KHz) 输入并加时间戳？

实施想法/愿景/方法的奖励积分！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:51:14.690

我不会尝试直接在 Windows 中执行此操作？你的 Windows 机器上有什么 GPIO？大约或低于 20 美元，有一长串基于串行或基于 USB 的解决方案（货架微控制器板），您可以对其进行编程，使其唯一的工作是观察 I/O 并为其添加时间戳，然后随意通过 USB 或串行（或其他）将此数据发送到主机。

我正在考虑 msp430 启动板、恒星 lauchpad、stm32f0 发现或 stm32f4 发现、arduinos 家族、mbed、leaf labs maple mini 等等。

要在 Windows 下正确执行此操作，您无论如何都需要添加一些硬件......

# java - java-field.set(objec1,object2) 仅在 object1 是字符串时有效

> ID：14140127
> 
> 赞同：0
> 
> 时间：2013-01-03T13:45:01.967
> 
> 标签：java, field

我是java新手。我正在尝试从 XML 文件中的字段填充一个类。我制作的这段代码看起来可以工作，但只适用于字符串字段

编码：

```
private void setValue(String className,  Node n, Object thObject) {

    try {

         Class oClass = thObject.getClass();
        Field [] f =  thObject.getClass().getDeclaredFields();
        for (int i = 0 ; i < f.length; i++){
            if  (f[i].getName() == n.getNodeName()){
                    f[i].setAccessible(true);
                    try {
                        Object value = n.getNodeValue();
                        if (value != null) {
                            f[i].set(thObject, value);
                        }
                    } catch (IllegalAccessException e) {
                    }
                }
            }

    } 
```

`f[i].set`只有当它是一个字符串字段时才有效

我尝试这样做：

```
f[i].setInt(thObject, Integer.parseInt(value.toString())) 
```

但没有工作的领域说空。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:53:18.513

使用 Field.set() 不会更改数据类型以适应字段类型。如果要设置多种类型，则必须先进行转换。例如

```
Field field = thObject.getClass().getDeclaredField(n.getNodeName());
field.setAccessible(true);
Object value = n.getNodeValue();
Object asType = convertToType(value, field.getType());
field.set(thObject, asType); 
```

您必须实现 convertToType 以满足您的需求。

* * *

这是一个简单的实现。

```
private static final Map<Class, Class> WRAPPER_MAP = new LinkedHashMap<Class, Class>() {{
    put(boolean.class, Boolean.class);
    put(byte.class, Byte.class);
    put(char.class, Character.class);
    put(short.class, Short.class);
    put(int.class, Integer.class);
    put(float.class, Float.class);
    put(long.class, Long.class);
    put(double.class, Double.class);
}};

public static <T> T convertToType(Object o, Class<T> clazz) {
    Class<T> wrapper = WRAPPER_MAP.get(clazz);
    if (wrapper != null)
        clazz = wrapper;
    if (o == null || clazz.isInstance(o))
        return (T) o;
    try {
        try {
            Method valueOf = clazz.getDeclaredMethod("valueOf", o.getClass());
            return (T) valueOf.invoke(null, o);
        } catch (NoSuchMethodException e1) {
            Constructor<T> constructor = clazz.getConstructor(o.getClass());
            return constructor.newInstance(o);
        }
    } catch (Exception e) {
        throw new AssertionError(e);
    }
}

public static void main(String... args) {
    String text = "1000";
    for (Class clazz : new Class[]{String.class, Integer.class, double.class, BigDecimal.class, Thread.class}) {
        Object o = convertToType(text, clazz);
        System.out.println(o.getClass() + " " + o);
    }

    Object o = convertToType("RUNNABLE", Thread.State.class);
    System.out.println(o.getClass() + " " + o);

    String dateString = new Date().toString();
    Date date = convertToType(dateString, Date.class);
    System.out.println(date.getClass() + " " + date);
} 
```

印刷

```
class java.lang.String 1000
class java.lang.Integer 1000
class java.lang.Double 1000.0
class java.math.BigDecimal 1000
class java.lang.Thread Thread[1000,5,main]
class java.lang.Thread$State RUNNABLE
class java.util.Date Thu Jan 03 17:08:50 GMT 2013 
```

日期字符串必须是[Date 将解析的格式](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#parse%28java.lang.String%29)，或者您可以使用 SimpleDateFormat 来使用您选择的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:53:26.897

由于该`Node#getNodeValue()`方法返回一个字符串，因此您只能在字符串类型的字段上设置该值。对于其他字段类型，您必须将节点值从字符串转换为目标字段类型。您可以检查该字段以获取其类型并从那里获取它。

对于刚接触 Java 的人来说，这是一项艰巨的工作。祝你好运！

# iphone - 在 QuickBlox 中创建聊天室

> ID：14140132
> 
> 赞同：0
> 
> 时间：2013-01-03T13:45:28.773
> 
> 标签：iphone, ios, xmppframework, quickblox

我正在尝试使用我的 iOS 应用在[QuickBlox中创建一个聊天室。](http://quickblox.com/)

```
[[QBChat instance] createPrivateRoomWithName:@"My Room"];

- (void)createPrivateRoomWithName:(QBChatRoom*)room{
    NSLog(@"Private room %@ was created", room.name);

    // Add users to this room
    NSNumber *anny = [NSNumber numberWithInt:300];
    NSNumber *jim = [NSNumber numberWithInt:357];
    NSArray *users = [NSArray arrayWithObjects:anny, jim, nil];

    [[QBChat instance] addUsers:users toRoom:room];
} 
```

但是在使用此代码后，我的应用程序崩溃了，下面是崩溃日志。

```
2013-01-03 19:13:55.234 Chat.Points[11178:23d03] +[QBDDXMLElement elementWithName:xmlns:]: unrecognized selector sent to class 0x22f73c
2013-01-03 19:13:55.241 Chat.Points[11178:23d03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[QBDDXMLElement elementWithName:xmlns:]: unrecognized selector sent to class 0x22f73c'
*** First throw call stack:
(0x32fe012 0x29eae7e 0x33892ad 0x32edbbc 0x32ed94e 0x101e05 0x2da153f 0x2db3014 0x2da3418 0x2da32a6 0x2da4280 0x2da3fcb 0x990f7b24 0x990f96fe)
libc++abi.dylib: terminate called throwing an exception 
```

![在此处输入图像描述](../Images/aa70296c99299770f031eb1d4d8897e6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:14:58.577

在创建房间之前，您必须登录 QuickBlox Chat。

解决方案是：

1）您必须将 **-ObjC**标志添加到其他链接器标志

2) 添加到 SplashController.h 聊天委托 QBChatDelegate

```
@interface SplashController : UIViewController <QBActionStatusDelegate, FBServiceResultDelegate, FBSessionDelegate, QBChatDelegate>{ 
```

3) 添加到 SplashController.m,

如果

```
}else if([result isKindOfClass:[QBMRegisterSubscriptionTaskResult class]]){ 
```

在顶部的下一行：

```
 // Login to QuickBlox Chat
    //
    [[QBChat instance] setDelegate:self];
    [DataManager shared].currentQBUser.password = [NSString stringWithFormat:@"%u", [[[DataManager shared].currentFBUser objectForKey:kId] hash]];
    [[QBChat instance] loginWithUser:[DataManager shared].currentQBUser];
    //
    // 
```

4）最后，添加到末尾

```
#pragma mark-
#pragma mark QBChatDelegate

- (void)chatDidLogin{
    [[QBChat instance] createPrivateRoomWithName:@"ChatRRoom"];
}

- (void)chatRoomDidCreate:(QBChatRoom *)room{
    NSLog(@"Room did create %@", room);
    myRoom = [room retain];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T08:11:26.193

只需在目标设置的其他链接器标志中添加 -ObjC 标志。希望它能解决你的问题。

# xcode - Xcode oclint 分析仪

> ID：14140144
> 
> 赞同：1
> 
> 时间：2013-01-03T13:46:30.800
> 
> 标签：xcode, static-analysis

我想在我的项目中使用[oclint](http://oclint.org)（一个 Objective-C 静态分析器），但官方[文档](http://oclint.org/docs/)并没有清楚地描述如何配置它。

我该如何使用它？

我已经安装了`oclint`包，然后将[用于捕获项目配置的脚本](https://github.com/oclint/oclint-xcodebuild/blob/master/oclint-xcodebuild)复制到项目的文件夹中。运行这个脚本会创建一个名为的空文件`compile_commands.json`，它不会用任何数据填充 xcodebuild.log。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:13:22.383

我认为这个脚本不会将任何内容添加到`xcodebuild.log`. 它从中读取。您可能希望在运行脚本之前手动运行`xcodebuild`并将输出保存到其中。`xcodebuild.log`

查看[文档](http://docs.oclint.org/en/0.7/guide/xcodebuild.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T19:45:03.313

我很幸运能够手动将脚本复制到我的项目文件夹中，然后在命令行上执行它。

虽然这没有将 oclint 的功能集成到 XCode 中，但它确实通过标准输出提供反馈。

然后根据这个反馈更新我的代码以符合 oclint 的建议并迭代运行 oclint 直到我的代码符合 oclint 的规则。

# xml - xslt：将任意数量的 xml 文件加入单个 xml

> ID：14140154
> 
> 赞同：-2
> 
> 时间：2013-01-03T13:47:02.953
> 
> 标签：xml, xslt, join

我有以下 xsl 脚本，它可以通过一个字段将两个 xml 文件合并为一个文件：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:strip-space elements="*"/>
  <xsl:output method="xml" indent="yes" />

  <xsl:key name="trans" match="Transaction" use="id" />

  <!-- Identity template to copy everything we don't specifically override -->
  <xsl:template match="@*|node()">
    <xsl:copy><xsl:apply-templates select="@*|node()" /></xsl:copy>
  </xsl:template>

  <!-- override for Mail elements -->
  <xsl:template match="Mail">
    <xsl:copy>
      <!-- copy all children as normal -->
      <xsl:apply-templates select="@*|node()" />
      <xsl:variable name="myId" select="id" />
      <Transaction_data>
        <xsl:for-each select="document('transactions.xml')">
          <!-- process all transactions with the right ID -->
          <xsl:apply-templates select="key('trans', $myId)" />
        </xsl:for-each>
      </Transaction_data>
    </xsl:copy>
  </xsl:template>

  <!-- omit the id element when copying a Transaction -->
  <xsl:template match="Transaction/id" /> 
```

我想通过同一个连接节点对任意数量的 xml 文件执行相同的过程。是否有可能以某种方式在单个 xsl 文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:15:27.140

如果您想处理任意数量的输入文件，请考虑将带有文件名的 XML 文档作为参数传递，例如将`files-to-process`具有类似内容的文件作为参数传递

```
<files>
  <file>foo.xml</file>
  <file>bar.xml</file>
  <file>baz.xml</file>
</files> 
```

然后有

```
<xsl:param name="files-url" select="'files-to-process.xml'"/>
<xsl:variable name="files-doc" select="document($files-url)"/> 
```

然后简单地改变

```
 <xsl:template match="Mail">
    <xsl:copy>
      <!-- copy all children as normal -->
      <xsl:apply-templates select="@*|node()" />
      <xsl:variable name="myId" select="id" />
      <Transaction_data>
        <xsl:for-each select="document('transactions.xml')">
          <!-- process all transactions with the right ID -->
          <xsl:apply-templates select="key('trans', $myId)" />
        </xsl:for-each>
      </Transaction_data>
    </xsl:copy>
  </xsl:template> 
```

到

```
 <xsl:template match="Mail">
    <xsl:copy>
      <!-- copy all children as normal -->
      <xsl:apply-templates select="@*|node()" />
      <xsl:variable name="myId" select="id" />
      <Transaction_data>
        <xsl:for-each select="document($files-doc/files/file)">
          <!-- process all transactions with the right ID -->
          <xsl:apply-templates select="key('trans', $myId)" />
        </xsl:for-each>
      </Transaction_data>
    </xsl:copy>
  </xsl:template> 
```

这样，您可以处理`files/file`作为参数传入的文档中命名的所有文件。

# .net - 处理从动态加载的 .NET dll 引发的事件

> ID：14140161
> 
> 赞同：3
> 
> 时间：2013-01-03T13:47:17.370
> 
> 标签：.net, plugins, dll

我有一个动态加载一些 dll 文件的 VB.NET 应用程序。所有插件都在一个文件夹中，我的应用程序从该文件夹加载所有 dll 文件。

为了加载 dll，我使用以下代码

```
_aAssembly = Reflection.Assembly.LoadFile(_File.FullName)
_aClass = _aAssembly.GetType(_AssemblyName & "." & ClassName)
_aAddin = Activator.CreateInstance(_aClass) 
```

在此 dll 中运行方法

```
Function RunMethod(ByVal Method As String, Optional ByVal Paramter() As Object = Nothing) As Object
    Dim aMethode As MethodInfo = _aClass.GetMethod(Method)
    Return aMethode.Invoke(_aAddin, Paramter)
End Function 
```

这很完美。但现在我想在我的 dll 文件中触发一个事件并在我的主应用程序中处理它们。我首先将以下代码添加到我的 dll 中：

```
Public Shared Event GotSomethingToSend(Str As String) 
```

我用

```
RaiseEvent GotSomethingToSend(Str) 
```

我的问题是我不知道如何在我的主应用程序中“捕捉”事件。甚至可能吗？我已经尝试过`GetEvent()`：

```
Dim ei As EventInfo = _aAssembly.GetType(_AssemblyName & "." & ClassName).GetEvent("GotSomethingToSend") 
```

但我没有走得很远......对此有任何帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:17:14.800

你已经有了一个`EventInfo`实例，你只需要将它连接到你的应用程序中的一个方法。尝试调用[EventInfo.AddEventHandler](http://msdn.microsoft.com/en-us/library/system.reflection.eventinfo.addeventhandler.aspx)，例如

```
ei.AddEventHandler(_aAddin, DirectCast(AddressOf MyGotSomethingToSendHandlerMethod, GotSomethingToSendEventHandler))

Private Delegate Sub GotSomethingToSendEventHandler(str As String)

Private Sub MyGotSomethingToSendHandlerMethod(str As String)
    ' TODO: Event handling code.
End Sub 
```

注意 - 类型转换是必需的，因为编译器无法在这种后期绑定方案中推断出正确的委托类型。

**附录**

尽管上面的代码应该可以满足您的需求，但 Microsoft 建议您坚持所有事件签名 ( `sender As Object, e As TEventArgs`) 的通用标准。如果你想这样做，你可以重新设计代码如下：

```
' Encapsulate all event data in a dedicated class.
Public Class GotSomethingToSendEventArgs
    Inherits EventArgs
    Public Property Data As String
End Class

' Handler method now looks like this.
Private Sub MyGotSomethingToSendHandlerMethod(sender As Object, e As GotSomethingToSendEventArgs)
End Sub

' Wire-up code now looks like this.
ei.AddEventHandler(_aAddin, DirectCast(AddressOf MyGotSomethingToSendHandlerMethod, EventHandler(Of GotSomethingToSendEventArgs))) 
```

# jquery - 将 jquery 与 PHP 混合使用

> ID：14140164
> 
> 赞同：0
> 
> 时间：2013-01-03T13:47:25.060
> 
> 标签：jquery

我的 cakephp 应用程序中有一个 jquery 日历

```
 <?php //foreach ($mealplans as $mealplan){ ?>
            { 
                title: '<?php echo $mealplan['Mealplan']['event_name'] . ", ". $mealplan['Mealplan']['total_calories']. " cals"; ?>',
                start: new Date(y, m, <?php
                $event = $mealplan['Mealplan']['event_date']; echo substr($event, 0, -8); ?>, 0),
                end: new Date(y, m, 16),
                allDay: true,
                url: 'http://localhost/mealplans/view/1'
            },
            <?php //} ?> 
```

当我取消注释 foreach 及其最后的花括号时，它会打印出我在 1 月 15 日至 1 月 16 日的第一个用餐计划，但我希望它打印出所有这些计划。大多数 php 都在 jquery 代码中工作，只是这一部分不起作用。当我取消注释 foreach 及其结束括号时，日历就会消失。您可以在[http://myownmealplanner.com/calendars/navigate](http://myownmealplanner.com/calendars/navigate)查看日历代码来自[http://arshaw.com/fullcalendar/docs/usage/](http://arshaw.com/fullcalendar/docs/usage/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:15:51.593

我发现了问题。一些膳食计划没有与之关联的日期，因此日期代码已损坏。它现在在本地主机上工作。

# c# - 如何获取具有名称字符串的类成员值？

> ID：14140168
> 
> 赞同：6
> 
> 时间：2013-01-03T13:47:34.960
> 
> 标签：c#, .net, reflection

> **可能重复：**
> [如何动态读取 C# 类的属性？](https://stackoverflow.com/questions/4629/how-can-i-read-the-properties-of-a-c-sharp-class-dynamically)

我必须只使用他们的名字字符串来获取类成员的值。我想我必须使用反射，但我不确定如何使用。你能帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T13:53:11.960

```
MemberInfo member = typeof(MyClass).GetMember("membername"); 
```

[GetMember 参考。](http://msdn.microsoft.com/en-gb/library/system.type.getmember.aspx)

如果您知道要查找的成员类型，则可以使用`.GetMethod`, `.GetField`,`.GetProperty`等。

如果您不知道您正在使用的类型：

```
var myobject = someobject;
string membername = "somemember";
MemberInfo member = myobject.GetType().GetMember(membername); 
```

不同的成员类型有不同的获取价值的方法。对于你会做的财产：

```
var myobject = someobject;
string propertyname = "somemember";
PropertyInfo property = myobject.GetType().GetProperty(membername);
object value = property.GetValue(myobject, null); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-03T13:52:24.080

```
public class Foo
{
  public string A { get; set; }
}
public class Example
{
  public void GetPropertyValueExample()
  {
    Foo f = new Foo();
    f.A = "Example";
    var val = f.GetType().GetProperty("A").GetValue(f, null);
  }
} 
```

# three.js - 如何使用 Three.js 为自定义几何图形的单面设置透明度？

> ID：14140169
> 
> 赞同：0
> 
> 时间：2013-01-03T13:47:40.683
> 
> 标签：three.js

我有方形底座的自定义几何图形，它看起来像一个圆锥体。这是 jsfiddle 链接：http: [//jsfiddle.net/suvKg/18/](http://jsfiddle.net/suvKg/18/)

我在这里获得了整个对象的透明度：

```
 var meshMaterial = new THREE.MeshLambertMaterial( { color: 0xffffff, opacity: 0.6, depthWrite: false, depthTest: false, vertexColors: THREE.VertexColors } ); 
```

但我不希望将透明度应用于圆锥体的底部，而只有侧面应该有它。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:15:37.963

您需要`THREE.MeshFaceMaterial()`用于整个网格。例如，如果您`geometry`有 X 面和 2 种不同的材料：

```
var materials = [
  new THREE.MeshLambertMaterial( { color: 0xffffff, opacity: 0.6, depthWrite: false, depthTest: false, vertexColors: THREE.VertexColors } ),
  new THREE.MeshLambertMaterial( { color: 0xffffff, opacity: 1, depthWrite: false, depthTest: false, vertexColors: THREE.VertexColors } )
]; // the two materials 

var mesh = new THREE.Mesh(yourGeometry, new THREE.MeshFaceMaterial(materials)); //tell three.js that you will have several materials in your geometry 
```

然后，您将需要`materialIndex`根据材料索引手动确定每个面

```
yourGeometry.faces[0].materialIndex = 0; 
yourGeometry.faces[1].materialIndex = 0;
yourGeometry.faces[2].materialIndex = 1; // <= the cone base 
...
yourGeometry.faces[lastFaceIndex].materialIndex = 0; 
```

注意：默认参数`materialIndex`是`0`，因此在您的情况下，您只需要确定其材料索引的一个面

# java - 打包。找不到命名资源：“信息”

> ID：14140172
> 
> 赞同：1
> 
> 时间：2013-01-03T13:47:59.537
> 
> 标签：java, maven, java-web-start, izpack

我已经使用 izpack-maven-plugin 构建了可执行的 .jar 文件。如果我像这样运行它：java -jar install.jar -一切都很好。但是如果我使用 JWS 运行它，我会收到一条错误消息：

```
Can't load log handler "com.izforge.izpack.util.LogHandler"
java.lang.ClassNotFoundException: com.izforge.izpack.util.LogHandler
java.lang.ClassNotFoundException: com.izforge.izpack.util.LogHandler

Exception in thread "AWT-EventQueue-0" com.izforge.izpack.api.exception.IzPackException: com.izforge.izpack.api.exception.ContainerException: com.izforge.izpack.api.exception.ResourceNotFoundException: Cannot find named resource: 'info'
    at com.izforge.izpack.installer.bootstrap.InstallerGui$1.run(InstallerGui.java:64)

Caused by: com.izforge.izpack.api.exception.ContainerException: com.izforge.izpack.api.exception.ResourceNotFoundException: Cannot find named resource: 'info'

Caused by: com.izforge.izpack.api.exception.ResourceNotFoundException: Cannot find named resource: 'info' 
```

有任何想法吗？谢谢。

# facebook - 完全隐藏 Facebook 应用程序的存在

> ID：14140177
> 
> 赞同：2
> 
> 时间：2013-01-03T13:48:16.027
> 
> 标签：facebook

我需要在用户的个人资料中完全隐藏应用程序的存在，以便除了应用程序的用户之外没有其他人会知道该应用程序。（不会在时间轴上发布通知。）它将是一个私人应用程序（在社交网络上看到这样的东西很奇怪，嗯？），只有它的用户才能看到。把它想象成一个私人助理。

正如我所发现的，解决方案是从应用设置面板中禁用设置 > 高级 > 社交发现。足以解决我的问题吗？我问这个是因为除了字段附近的小问号让我偏执之外，没有好的文档。

# jquery - 页面中心的图像 - 可调整大小

> ID：14140181
> 
> 赞同：0
> 
> 时间：2013-01-03T13:48:32.673
> 
> 标签：jquery, html, css

我想将图像居中到网站的中心。比当窗口调整大小时，我想完成该图像不会调整大小，而不是调整大小，它应该由浏览器窗口左右裁剪，以便图像中心位于图像的垂直中心。

```
<div class="image-container">
    <img src=imgpath/image.jpg">
</div> 
```

我试过这个：

```
.image-container img{
   width: 100%;
   min-width: 1440 !important;
   margin: 64px auto 0 auto;
   height: auto;
   min-height: 400px !important;
}

img {
   vertical-align: middle;
} 
```

有任何人知道如何制作这个。如果 jq 不应该这样做，我会更喜欢 CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:22:03.593

您可以使用`display:table-cell`将内部图像对齐到 div 的中间。

但在这种情况下，您不能提供边距，因为表格单元格强制 div 充当 td，从技术上讲，您不能为表格 td 提供边距。

所以我用白色为 div 添加了边框。

```
.image-container{
  background: #C8BFE7;
  text-align: center;
  display:table-cell;
  vertical-align:middle;
  border:white 5px solid
} 
```

​</p>

演示：http: [//jsfiddle.net/Arav8/3/](http://jsfiddle.net/Arav8/3/)

# php - 接受 PHP 表单中的重音符号

> ID：14140192
> 
> 赞同：0
> 
> 时间：2013-01-03T13:49:06.887
> 
> 标签：php, forms, preg-match

在我的表格中，我在注册数据库之前做了一些验证

```
 if( isset($form['lastname']) && !empty($form['lastname']) && !preg_match ('/[^a-z]/i', $form['lastname']))

{

} 
```

这不接受像“benoît”或“hélène”这样的口音

有谁知道让他们被允许？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:53:40.443

[法语口音](http://en.wikipedia.org/wiki/French_alphabet)，与[德语元音](http://en.wikipedia.org/wiki/Germanic_umlaut)变音等一样，是**超出 AZ**的词。

如果需要过滤数字（0-9），可以使用 smth. 像这样（不推荐）。

```
if( isset($form['lastname']) && !empty($form['lastname']) && !preg_match ('/[^0-9]/i', $form['lastname'])) {

} 
```

# javascript - 为 Backbone 上的默认属性调用验证方法

> ID：14140196
> 
> 赞同：0
> 
> 时间：2013-01-03T13:49:10.957
> 
> 标签：javascript, backbone.js

由于我已将 Backbone 从 0.9.2 升级到 0.9.9，因此出现了一些错误。

当我使用哈希默认值实例化一个新模型时。validate 方法被调用以验证这些值并且失败了。

基本上我想用新消息设置contactModel，但是这个消息应该不同于默认消息。这就是在此模型的实例中验证失败的原因。这在主干 0.9.2 中运行良好，因为在实例中没有调用验证方法。

有人可以解释这有什么问题吗？

这是我的 BackboneModel ：

```
class ContactModel extends Backbone.Model

    defaults :

        message : 'Initial message'

    validate : ( attrs_ ) =>

        if attrs_.message.toString() is @.defaults.message.toString()

            return 'Same message'

        if attrs_.message.length < 55

            return 'Your message is too short buddy'

    sync : =>

         #Custom Sync implementation 
```

这是我的 BackboneView ：

```
class ContactPageView extends AbstractView

    id          : 'contact-page'
    template    : null
    model       : null

    events : 

        'keypress #contactTextArea'     : 'onKeyPress'
        'submit #contactForm'           : 'submit'

    init : ->

        @model = new ContactModel()

        console.log @model.get 'message'

        #Print "undefined"

        @model.bind "success", @success, this

        @model.bind "error", @error, this

        @template = _.template $( '#template_page_contact' ).html() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:01:13.603

在 Backbone 0.9.9 中，模型验证的语义发生了变化，因此验证应确保模型**永远不会**处于无效状态，即使在模型初始化时也是如此。有了这个更改，模型实例化将失败，因为 rule `attrs_.message.toString() is @.defaults.message.toString()`，并且没有办法绕过它。

**但是**，该更改后来被回滚，并且验证已放宽以允许无效状态，直到保存模型。我认为这将在下一个 Backbone 版本中可用，但目前还没有公开可用的版本进行此更改。[这个 GitHub 问题页面](https://github.com/documentcloud/backbone/issues/1961)讨论了为什么要对 0.9.9 进行更改，以及如何对下一个版本进行更改。

同时，您可以更改验证逻辑、返回到较早发布的版本或使用[未发布的主版本](https://raw.github.com/documentcloud/backbone/master/backbone.js)，风险自负。

# javascript - 后端带有 Java 的富 Web 应用程序（HTML5 + JS）？

> ID：14140202
> 
> 赞同：1
> 
> 时间：2013-01-03T13:49:58.510
> 
> 标签：javascript, jquery, jsf, jakarta-ee, ria

现在有很多很棒的 Javascript 库可用于创建丰富的 Web 应用程序，我想将其中一个用于我正在开发的网站的前端，因为它们似乎提供了比您通常看到的更好的界面使用 JSF、Facelets、PrimeFaces 等...我读过很多关于 Java EE 表示层的抱怨，另一方面，当涉及到 Javascript 和 HTML5 时，情况似乎越来越好。

我想知道如何去做这件事？一个 JSP 和 Facelets 可以让表示层中的项目直接映射到服务器上的对象。当您使用 Javacript 库作为您的前端时，您将如何处理这个问题？

我将在服务器上使用 Java EE，但是将它与前端的 Javascript RIA 库集成的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:58:50.083

Google Web Toolkit 前端最容易与 Java EE 后端结合，因为它通过自己的通信系统开箱即用地支持这一点。否则，RESTful 服务很容易通过 javascript 进行通信，并且很容易在 Java EE 中创建，尤其是在像 netbeans 这样的 IDE 的帮助下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:02:19.260

如果您的问题只是关于将对象从后端映射到 JavaScript 前端，那么我建议结合使用 JAX-RS 实现（RESTEasy、Restlet、Apache CXF、...）和 Jackson（JSON 提供程序）。

这种组合允许您发布 REST API 并将您的域对象转换为 JSON，因此您可以使用 AJAX 请求通过 JavaScript 轻松访问这些对象。

但是当然这给开发人员留下了很多通信处理，如果你想要一个更完整的包，像 Google Web Toolkit 这样的框架可能是一个更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:57:31.520

您可以使用带有 HTML/HTML5 的 JQuery、ExtJS、Dojo 等 JavaScript 库创建前端。

要与 Java EE 服务器通信，可以使用 Ajax 请求和 xml/json 格式的响应。

# c++ - 通过 CakePHP 与 C++ 应用程序交互

> ID：14140204
> 
> 赞同：2
> 
> 时间：2013-01-03T13:50:07.243
> 
> 标签：c++, cakephp, architecture, cakephp-2.0

我想知道哪种解决方案最适合在 Windows 环境中通过 CakePHP 与 C++ 应用程序及其数据进行交互。

我正在考虑创建一个 API，例如使用 Delphi 或 Java，它可以处理 JSON 请求，同时可以链接到 C++ 应用程序。

这是一个非常笼统的问题，但我想对此有任何反馈，或者知道是否有人以前尝试过类似的事情以及为此实施了什么解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:30:29.217

首先，您需要定义“最佳”：最高性能、最容易实现、最佳可扩展性、最便携......？

如果您可以修改 C++ 应用程序，我不会在中间创建组件（您建议用 Delphi 或 Java 编写），而是添加一个 PHP 可以直接访问的接口。如果您不能这样做，那么您当然需要创建这样的组件。在这种情况下，存在与在 C++ 应用程序中嵌入接口的选项大致相同的选项：

一种简单的方法是使用套接字（请参阅[PHP 中的进程间通信与连续进程？](https://stackoverflow.com/questions/956245/interprocess-communication-within-php-with-a-continous-process)）。更重量级的方法是[http://activemq.apache.org/](http://activemq.apache.org/)。

当然，您可以公开 Web 服务（SOAP、REST、XML 或 JSON...）。这当然是一个非常便携的接口，但可能不是最快的（中间有更多层）。

# javascript - HTML/JS：对创建图像按钮的方法感到困惑

> ID：14140209
> 
> 赞同：7
> 
> 时间：2013-01-03T13:50:40.933
> 
> 标签：javascript, html, image, button

我需要创建一个仅由图像组成的简单按钮，当用户单击它时，它将打开一个 JQuery 对话框。

我正在阅读并注意到许多解决方案：`<button>`，`<image>`使用 a `<a>`，使用 CSS 修改按钮背景等...

这令人困惑，实现我的图像按钮的正确方法是什么？

谢谢。

**PS：**按钮/图像应该是可聚焦的。欢迎使用可操作的 JSFiddle 示例。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T14:00:02.947

正确的方法很大程度上取决于如果 JavaScript 不可用，按钮将做什么。

如果您要提交表格，那么：

```
<button> <img src="..." alt="..."> </button> 
```

如果您要转到一个 URL，那么：

```
<a href="..."> <img src="..." alt="..."> </a> 
```

如果你什么都不做（通常不是一个好主意，你应该遵循[Progressive Enhancement](http://en.wikipedia.org/wiki/Progressive_enhancement)和[Unobtrusive JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)的原则，但如果你首先只用 JavaScript 生成按钮并且对用户的损失是方便而不是然后是基本功能）：

```
<button type="button"> <img src="..." alt="..."> </button> 
```

然后，您将 JavaScript 绑定到表单的提交事件或按钮/锚点的单击事件，并[阻止默认行为](https://developer.mozilla.org/en/docs/DOM/event.preventDefault)，因此如果 JavaScript 成功执行，则不会提交表单/不会跟踪链接。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T10:38:35.047

创建一个按钮并为其放置`background-image`。检查小提琴。 [http://jsfiddle.net/siyakunde/Y38nz/](http://jsfiddle.net/siyakunde/Y38nz/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-11T08:55:45.987

经过多次努力，我找到了解决方案：http: [//jsfiddle.net/YRY8M/3/](http://jsfiddle.net/YRY8M/3/)。

```
<html>
  <head></head>
  <body>
    <input type="image" tabindex="0" onclick="doSomething()" src="http://upload.wikimedia.org/wikipedia/commons/thumb/0/0c/White_and_yellow_flower.JPG/320px-White_and_yellow_flower.JPG"
    />
    <br />
    <button tabindex="1">I am focussable too !!!</button>
  </body>
</html> 
```

还有一些javascript：

```
function doSomething() {
  alert('Hello!'); 
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-05T16:03:15.103

这取决于您在每种情况下都想做什么。没有指导方针说“你应该这样做”，但有些情况下某些情况比其他情况更合适。

例如，根据[这篇](http://reference.sitepoint.com/html/button#compatibilitysection)`<button>`评论，8 及以下版本的 IE在尝试将其用作提交按钮时，在标签方面存在一些错误行为。

但是`<button>`HTML5 中添加了一些新属性，您可以[在此处](http://www.w3schools.com/tags/tag_button.asp)看到，其中`autofocus`包括大多数现代主流浏览器将支持的其他有用的属性。

在您想要保持“焦点”的情况下（我假设带有选项卡支持），如果您使用单个`<image>`作为按钮（带有或不带有`<a>`），则必须添加一些 JS 代码以使图像在适当时具有焦点选项卡被按下。所以你将不得不编写更多的代码来做同样的事情。

还有一种可能适合您的解决方案，因为您不需要将表单提交到服务器端。使用`<input type="image"`类型并`src`在其中定义属性，将是可聚焦的，并且不需要运行任何 JS 代码或任何困难的 CSS。[你可以在这里](http://www.w3.org/TR/html-markup/input.image.html)找到更多关于它的语法

因此，最终由您决定使用其中的哪一个。我会使用我认为更灵活、更容易编码、易于重用且大多数目标浏览器都支持的那个。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-11T13:22:37.597

使用 jQuery，就像你拥有它一样......

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery-1.8.3.js"></script>

        <style type="text/css">
            #theBtn{
                margin: 20% auto 0;
                background: url('http://upload.wikimedia.org/wikipedia/commons/thumb/0/0c/White_and_yellow_flower.JPG/320px-White_and_yellow_flower.JPG');
                width: 100px;
                height: 50px;
            }
        </style>
    </head>
    <body>
        <div id="theBtn"></div>

        <script type="text/javascript">
            $(document).ready(function(){
                $("#theBtn").click(function(){
                    if(confirm('Are you sure?')){
                        $("#theBtn").fadeOut('slow');
                    }
                });
            });
        </script>
    </body>
</html> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-11T15:10:55.523

在`<button>`tag 中，放置您的图像，并附加一个点击事件以`<button>`在点击时打开对话框。
[JSFiddle](http://jsfiddle.net/svineet/cJWRk/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-03T13:53:31.180

首先，有一个图像或一个按钮。但不是两者兼而有之。我想说，创建一个图像并将您的代码放在该图像的 onclick() 函数中。

```
 var img= $("#my-image-id");
    image.click(function() {
    // your code here
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-11T08:53:04.090

据我所知，您无法更改 Safari 按钮的外观，这就是我建议使用`a`该解决方案的原因。这是我的简单代码：http: [//jsfiddle.net/djgBK/1/](http://jsfiddle.net/djgBK/1/)

依据是：

1.  取一个`a`元素把链接内容放在左边，

2.  然后用实际上是背景的图像替换它。因为它的`a`元素用户只能使用`TAB`按钮来选择它。

更重要的是，使用`a`elemet 将让您放置`title`将在悬停/进入按钮后显示的内容。

# java - 正则表达式提取分隔符内的字符串

> ID：14140210
> 
> 赞同：2
> 
> 时间：2013-01-03T13:50:48.110
> 
> 标签：java, regex

我正在尝试提取分隔符内的字符串出现（在这种情况下是括号），但不是引号内的字符串（单引号或双引号）。这是我尝试过的 - 这个正则表达式获取括号内的所有出现，以及引号内的那些（我不想要引号内的那些）

```
public class RegexMain {
    static final String PATTERN = "\\(([^)]+)\\)";
    static final Pattern CONTENT = Pattern.compile(PATTERN);
    /**
     * @param args
     */
    public static void main(String[] args) {
        String testString = "Rhyme (Jack) and (Jill) went up the hill on \"(Peter's)\" request.";
        Matcher match = CONTENT.matcher(testString);
        while(match.find()) {
            System.out.println(match.group()); // prints Jack, Jill and Peter's
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:56:20.437

你可以试试

```
public class RegexMain {
    static final String PATTERN = "\\(([^)]+)\\)|\"[^\"]*\"";
    static final Pattern CONTENT = Pattern.compile(PATTERN);
    /**
     * @param args
     */
    public static void main(String[] args) {
        String testString = "Rhyme (Jack) and (Jill) went up the hill on \"(Peter's)\" request.";
        Matcher match = CONTENT.matcher(testString);
        while(match.find()) {
            if(match.group(1) != null) {
                System.out.println(match.group(1)); // prints Jack, Jill
            }
        }
    }
} 
```

此模式将匹配带引号的字符串以及带括号的字符串，但只有带括号的字符串才会在`group(1)`. 由于`+`和`*`在正则表达式中是贪婪的，它会更喜欢匹配`"(Peter's)"`.`(Peter's)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T19:06:40.637

在这种情况下，您可以优雅地使用后瞻和前瞻运算符来实现您想要的。这是 Python 中的一个解决方案（我总是用它在命令行上快速尝试一些东西），但是 Java 代码中的正则表达式应该是相同的。

此正则表达式匹配前面使用正向后视的左括号和使用正向超前的右括号的内容。但是，当左括号前面是一个使用负后瞻的单引号或双引号，以及当右括号后面是一个使用负前瞻的单引号或双引号时，它会避免这些匹配。

```
In [1]: import re

In [2]: s = "Rhyme (Jack) and (Jill) went up the hill on \"(Peter's)\" request."

In [3]: re.findall(r"""
   ...:     (?<=               # start of positive look-behind
   ...:         (?<!           # start of negative look-behind
   ...:             [\"\']     # avoids matching opening parenthesis preceded by single or double quote
   ...:         )              # end of negative look-behind
   ...:         \(             # matches opening parenthesis
   ...:     )                  # end of positive look-behind
   ...:     \w+ (?: \'\w* )?   # matches whatever your content looks like (configure this yourself)             
   ...:     (?=                # start of positive look-ahead
   ...:         \)             # matches closing parenthesis 
   ...:         (?!            # start of negative look-ahead
   ...:             [\"\']     # avoids matching closing parenthesis succeeded by single or double quote
   ...:         )              # end of negative look-ahead  
   ...:     )                  # end of positive look-ahead
   ...:     """, 
   ...:     s, 
   ...:     flags=re.X)
Out[3]: ['Jack', 'Jill'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:32:19.267

**注意：**这不是最终回复，因为我对JAVA不熟悉，但我相信它仍然可以转换成JAVA语言。

就我而言，最简单的方法是将字符串中的引号部分替换为空字符串，然后查找匹配项。希望您对 PHP 有点熟悉，这就是这个想法。

```
$str = "Rhyme (Jack) and (Jill) went up the hill on \" (Peter's)\" request.";

preg_match_all(
    $pat = '~(?<=\().*?(?=\))~',
    // anything inside parentheses
    preg_replace('~([\'"]).*?\1~','',$str),
    // this replaces quoted strings with ''
    $matches
    // and assigns the result into this variable
);
print_r($matches[0]);
// $matches[0] returns the matches in preg_match_all

// [0] => Jack
// [1] => Jill 
```

# html - 影响 div 宽度的滚动条

> ID：14140212
> 
> 赞同：0
> 
> 时间：2013-01-03T13:51:06.217
> 
> 标签：html, css

我有一个属性溢出自动的 div。如何使这个 div 的内容水平对齐，有和没有显示滚动条。滚动条弄乱了 div 的宽度。我希望你明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:57:49.350

```
overflow-x: scroll;
overflow-y: hidden; 
```

来源：[仅具有水平滚动的 Div](https://stackoverflow.com/questions/443700/div-with-horizontal-scrolling-only)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-16T06:56:35.870

尝试`overflow-y: overlay`改用。

```
.your-content{
   overflow-y: overlay;
} 
```

注意:::**`overflow-y: overlay`已被弃用。**

但这会使滚动条显示为覆盖而不影响 div 或元素的宽度。

# tomcat - log4j 配置加载

> ID：14140217
> 
> 赞同：0
> 
> 时间：2013-01-03T13:51:27.510
> 
> 标签：tomcat, log4j

我的 tomcat 应用程序中有几个 log4j.xml logj 配置文件。一个在我的应用程序中`/home/toto/etc/log4j.xml`，另一个在我的`WEB-INF/classes/`应用程序中。

这两个配置文件似乎被加载了，但是，你知道它们是按什么顺序加载的，或者它们是否在编译时合并了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:53:10.017

您可以将此参数添加到 JVM args 以查看 log4j 正在做什么，然后它将从加载配置的位置记录：

```
-Dlog4j.debug 
```

另外，如果您希望覆盖它们，我认为 log4j.properties 文件优先于 .xml 文件，因此您可以创建一个 log4j.properties 文件。

# iphone - 如何录制主视图？

> ID：14140224
> 
> 赞同：0
> 
> 时间：2013-01-03T13:51:48.000
> 
> 标签：iphone, objective-c, ios

我的应用程序中有重新编码。

我创建了一个自定义 ScreenCapture 视图来进行重新编码。

现在我想为主视图录制视频。（即在 self.view 上），但它不起作用。

我使用以下代码来记录我的自定义视图：

```
- (IBAction)btnRecording_Pressed:(id)sender {
    if (Isrecording ==YES)
    {
        //
        //  imgDustbin.hidden=YES;
        //  [[NSUserDefaults standardUserDefaults ] setValue:@"NO" forKey:@"DUSTBIN"];

        //---
        [voiceRecorder stop];
        [captureview stopRecording];
        AVAudioSession *audioSession = [AVAudioSession sharedInstance];
        NSError *err = nil;
        [audioSession setCategory :AVAudioSessionCategoryPlayAndRecord error:&err];
        if(err)
        {
            NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
            return;
        }
        [audioSession setActive:YES error:&err];

        err = nil;
        if(err){
            NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
            return;
        }

        recordSetting = [[NSMutableDictionary alloc] init];

        [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatLinearPCM] forKey:AVFormatIDKey];
        [recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey];
        [recordSetting setValue:[NSNumber numberWithInt: 2] forKey:AVNumberOfChannelsKey];

        [recordSetting setValue :[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
        [recordSetting setValue :[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];
        [recordSetting setValue :[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey];

        //    NSString *recorderFilePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];//26
        NSString *recorderFilePath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) objectAtIndex:0];

        recorderFilePath = [recorderFilePath stringByAppendingPathComponent:@"tempRecording.caf"];
        NSURL *urls = [NSURL fileURLWithPath:recorderFilePath];
        err = nil;
        voiceRecorder = [[ AVAudioRecorder alloc] initWithURL:urls settings:recordSetting error:&err];
        //[recorder setMeteringEnabled:YES];

        if(!voiceRecorder){
            NSLog(@"recorder: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
            UIAlertView *alert =
            [[UIAlertView alloc] initWithTitle: @"Warning"
                                       message: [err localizedDescription]
                                      delegate: nil
                             cancelButtonTitle:@"OK"
                             otherButtonTitles:nil];
            [alert show];
            [alert release];
            return;
        }

        //prepare to record
        [voiceRecorder setDelegate:self];
        [voiceRecorder prepareToRecord];

        //scrren short of screen

        if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
            UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, NO, [UIScreen mainScreen].scale);
        else
            UIGraphicsBeginImageContext(self.view.bounds.size);

        [captureview.layer renderInContext:UIGraphicsGetCurrentContext()];

        UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        NSData * imageData = UIImageJPEGRepresentation(viewImage, 1.0);
        //    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);//26
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);

        NSString *documentsDirectory = [paths objectAtIndex:0];
        documentsDirectory = [documentsDirectory stringByAppendingPathComponent:@"VideoScreen.jpg"];

        [imageData writeToFile:documentsDirectory atomically:YES];

        //--------------------
        [voiceRecorder record];
        [captureview performSelector:@selector(startRecording) withObject:nil afterDelay:0];

        Isrecording =NO;
        [btnRecord setTitle:@"Stop" forState:UIControlStateNormal];

    }
    else if (!Isrecording)
    {
        //
        imgDustbin.hidden =NO;
        [[NSUserDefaults standardUserDefaults ] setValue:@"YES" forKey:@"DUSTBIN"];

        //------
        [voiceRecorder stop];
        [captureview stopRecording];
        [self createVideo];
        Isrecording=YES;
        [btnRecord setTitle:@"Record" forState:UIControlStateNormal];
    }
} 
```

这该怎么做 ？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:59:44.857

我已经为我的设置删除了一些项目特定的代码，但是如果您有输入和输出设置，那么预览/预览层代码就是您要寻找的。您添加一个子层，显示将录制的视频。

```
 - (void)setupSession{
        // create a capture session set session preset
        // get a camera, front facing if possible
        // check to see if camera is available
        // create input
        // create output

        // add output
        [session beginConfiguration];
        [session addInput:input];
        [session addOutput:output];
        [session commitConfiguration];

        // configure orientation
        connection = [output connectionWithMediaType:AVMediaTypeVideo];
        //check to make sure you can record

        // Important for you, the preview layer
        // add preview layer
        captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
        if ([captureVideoPreviewLayer isOrientationSupported])
        {
            [captureVideoPreviewLayer setOrientation:[[UIDevice currentDevice] orientation]];
        } else {
            NSLog(@"Cannot set preview orientation");
        }
        [captureVideoPreviewLayer setFrame:[_previewView bounds]];

        //add sublayer to mainview where you are setting your recording from
        [[self.view layer] addSublayer:captureVideoPreviewLayer];

        // start session
        [session startRunning];
    } 
```

# c# - 捕获对 TFS 2012 事件订阅中的工作项所做的所有更改

> ID：14140226
> 
> 赞同：2
> 
> 时间：2013-01-03T13:52:05.787
> 
> 标签：c#, event-handling

我所追求的是一种捕获对存储在我们的新 TFS 2012 服务器上的工作项中某些字段所做的所有更改的方法，以便我可以根据结果执行其他逻辑（通过帮助台 API 处理更新）开发人员改变了什么。

我已经苦苦挣扎了一个多星期，谷歌搜索和阅读参考资料，但似乎 TFS 2012 没有任何效果。

我尝试了以下设置：

[在 TFS 2010 中开发和调试服务器端事件处理程序 (GeeksWithBlogs)](http://geekswithblogs.net/jakob/archive/2010/10/27/devleoping-and-debugging-server-side-event-handlers-in-tfs-2010.aspx "极客博客")

和许多其他“可信”的来源，没有运气。

我对一般建议不感兴趣，但对这个问题的具体解决方案不感兴趣。可能不止一种方法可以做到这一点，但我会选择一种可行的方法。

我将应用程序开发的这一部分推迟到接近截止日期，因为当第一次阅读它时，这似乎是一件简单的事情。我想我可以只使用 Microsoft.TeamFoundation.WorkItemTracking.Client 库来完成这项工作，但事实证明没有预定义的事件可以从客户端代码订阅。（或者我还没有找到它）。所以我想我需要创建一个自定义事件处理程序并将其安装到 TFS 上的插件目录中，如上面提到的链接中所述，但是当我这样做时，我在调试 TFS 时遇到异常并且没有任何反应：

```
First-chance exception at 0x000007FEFD90BCCD (KernelBase.dll) in w3wp.exe 
```

所以现在我已经超过了最后期限，恐慌地寻找可行的解决方案，然后求助于一些手动方式来定期循环并检查工作项，就像我必须在应用程序的帮助台端处理工单一样。

如果我对事件和代表有更多了解，我想我可以为此创建一个好的解决方案，但我没有，而且我现在正在学习 C#，所以...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:05:42.547

我有一个类似的问题。通过执行以下步骤解决它 a) 参考以下程序集的 11.0.0.0 版本

```
Microsoft.TeamFoundation.Client.dll
Microsoft.TeamFoundation.Common.dll
Microsoft.TeamFoundation.Framework.Server.dll
Microsoft.TeamFoundation.WorkItemTracking.Client.dll
Microsoft.TeamFoundation.WorkItemTracking.Server.DataAccessLayer.dll 
```

b) 将目标框架更改为 .NET Framework 4

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:58:44.147

创建 TFS`ISubscriber`事件处理程序是在 TFS 内操作数据的最有效方式。重要的是，您的插件是针对正确的 .NET Framework 版本构建的，并且是 AnyCPU 或 x64。x86 二进制文件无法在 TFS 2012（仅限 x64）中加载。另外，在 TFS 2012 中，这些插件现在应该是 .NET 4.0/4.5，并且它们必须引用 11.0.0.0 服务器位。

如果没有确切异常的更多详细信息（可能已记录到事件日志中，或者您可以通过将调试器附加到 TFS Web 应用程序来找到该异常），我们将无法帮助您调试您在当前实现中遇到的问题。

作为替代方案，您可以使用更易于使用的“旧式”SOAP 事件处理程序，因为它需要您使用客户端对象模型。此外，它更容易调试，因为它可以在您的本地机器上运行，而无需安装完整的 TFS 实例。在 TFS 2012 中，您可以从 Web 访问界面配置这些类型的警报，方法是单击您的姓名（右上角），然后选择“我的警报”。

单击“可以从高级警报管理页面管理团队警报”链接以配置新事件并将其“格式”设置为“SOAP”。在“发送至”中，您可以指定必须由 TFS 调用以处理这些警报的 Web 服务 URL。

创建此类服务的最简单方法是创建一个简单的 .asmx Web 服务并添加一个具有以下签名的方法：

```
 [SoapDocumentMethod(Action="http://schemas.microsoft.com/TeamFoundation/2005/06/Services/Notification/03/Notify", RequestNamespace = " http://schemas.microsoft.com/TeamFoundation/2005/06/Services/Notification/03")]
 [WebMethod(MessageName=”Notify”)]
 public void Notify(string eventXml)
 {
         //Write your custom code here
         //Use eventXml to extract event related fields and their values
 } 
```

# c# - 在 Windows 窗体 C# 中复制粘贴控件

> ID：14140230
> 
> 赞同：1
> 
> 时间：2013-01-03T13:52:20.450
> 
> 标签：c#, .net, winforms

我正在尝试使用剪贴板复制粘贴控件实例。我能够复制控件但无法取回复制的对象。

下面的示例代码。

```
 [Serializable]
public class myControl
{
    private Control _copiedControl;
    public myControl(Control ctrl)
    {
        _copiedControl = ctrl;
    }

    public Control CopiedControl
    { 
        get 
        {
            return _copiedControl;
        }
        set 
        {
            _copiedControl = value;                
        }
    }
}

private void btnCopy_Click(object sender,EventArgs e)
{
    Clipboard.SetData("myControl", new myControl((Control)myButton));
}          

private void btnPaste_Click(object sender, EventArgs e)
{
    if(Clipboard.ContainsData("myControl"))
    {
                // Condition is satisfied here.. 

        myControl obj = Clipboard.GetData("myControl") as myControl;
                    // obj is null and control is lost..
        if(obj != null)
        {
            myPanel.Controls.Add(obj.CopiedControl);
        }
    }
} 
```

我无法使用 GetData() 方法获取复制的控件。我不确定有什么问题，有人可以指导我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:27:28.937

您将“myControl”标记为可序列化，但实际上它不是可序列化的，Control 类不支持二进制序列化。与控件关联的窗口的运行时状态太麻烦了，首先是窗口只能有一个父窗口。可悲的是 Clipboard.SetData() 方法并没有抱怨这一点。

有一个非常简单的解决方法，剪贴板只能包含一个项目，并且在进程之间复制永远不会起作用。因此，您不妨伪造它并保留自己对控件的引用。像这样的东西：

```
 private Control clipBoardRef;

    private void btnCopy_Click(object sender, EventArgs e) {
        clipBoardRef = myButton1;
        Clipboard.SetData("myControl", "it doesn't matter");
    }

    private void btnPaste_Click(object sender, EventArgs e) {
        if (Clipboard.ContainsData("myControl")) {
            Control ctl = clipBoardRef;
            // etc...
        }
    } 
```

# multidimensional-array - pl/pgsql 合并或组合数组

> ID：14140235
> 
> 赞同：2
> 
> 时间：2013-01-03T13:52:24.190
> 
> 标签：multidimensional-array, plpgsql, postgresql-9.0

如何在 pl/pgsql 中合并/组合数组？

例如，我有 3 个数组：`{1,2,3}`、`{"a","b","c"}`和`{32,43,23}`

合并后我需要得到：

```
{{1,"a",32}, {2,"b",43}, {3,"c",23}} 
```

我的 PostgreSQL 版本是 9.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T02:10:01.470

听起来您想要一个 n 参数`zip`函数，就像在某些函数式语言和具有函数式扩展的语言中所发现的那样。

在这种情况下，您不能完全按照您的意愿进行操作，因为这些数组属于异构类型。PostgreSQL 数组必须是同质类型的，所以这不起作用。您显示的所需结果是无效数组。

您可以创建一个 s 数组`ROW`（匿名记录），或将所有值转换为`text`.

例如：

```
SELECT array_agg(ROW(a,b,c)) 
FROM (
  SELECT 
    unnest('{1,2,3}'::integer[]),
    unnest('{"a","b","c"}'::text[]),
    unnest('{32,43,23}'::integer[])
)
x(a,b,c); 
```

将产生：

```
{"(1,a,32)","(2,b,43)","(3,c,23)"} 
```

这是一个转换为文本的三个行类型的数组。使用起来会很尴尬，因为 Pg 对匿名记录的支持非常有限；最重要的是，在这种情况下，您不能将文本值强制转换为，而`RECORD(integer,text,integer)`实际上必须`CREATE TYPE`强制转换为定义的类型。

由于该限制，您可能希望将所有值转换为`text`并使用`text`. 您希望能够使用简单的 来做到这一点`array_agg`，但令人沮丧的是，这失败了：

```
SELECT array_agg(ARRAY[a::text,b,c::text]) 
FROM (
  SELECT 
    unnest('{1,2,3}'::integer[]),
    unnest('{"a","b","c"}'::text[]),
    unnest('{32,43,23}'::integer[])
)
x(a,b,c); 
```

生产：

```
ERROR:  could not find array type for data type text[] 
```

因为`array_agg`不支持数组作为输入。您需要定义另一个`array_agg`接受`text[]`输入的变体。前段时间写过一篇，现在找不到了；如果我找到它，我会尝试找到它并更新。同时，您可以通过将内部数组转换为`text`：

```
SELECT array_agg(ARRAY[a::text,b,c::text]::text) 
    FROM (
      SELECT 
        unnest('{1,2,3}'::integer[]),
        unnest('{"a","b","c"}'::text[]),
        unnest('{32,43,23}'::integer[])
    )
    x(a,b,c); 
```

产生如下输出：

```
 {"{1,a,32}","{2,b,43}","{3,c,23}"} 
```

...好吧，我还没有找到我写的那个，但[这里有一个来自 Erwin 的例子，它做得很好](https://stackoverflow.com/a/9845460/398670)。试试这个：

```
CREATE AGGREGATE array_agg_mult (anyarray)  (
    SFUNC     = array_cat
   ,STYPE     = anyarray
   ,INITCOND  = '{}'
);

SELECT array_agg_mult(ARRAY[ARRAY[a::text,b,c::text]]) 
FROM (
  SELECT 
    unnest('{1,2,3}'::integer[]),
    unnest('{"a","b","c"}'::text[]),
    unnest('{32,43,23}'::integer[])
)
x(a,b,c); 
```

输出：

```
 {{1,a,32},{2,b,43},{3,c,23}} 
```

# java - 使用 Java Web Start 部署应用程序

> ID：14140236
> 
> 赞同：3
> 
> 时间：2013-01-03T13:52:35.490
> 
> 标签：java, tomcat, apache-poi, noclassdeffounderror, java-web-start

我最近用 Java 开发了一个完整的系统，它连接到数据库（使用`jtds.jdbc.Driver`）并使用 Apache POI 将表格内容导出和导入到 Excel 工作表中。我使用 Swing 作为用户界面。用户将与它进行交互以进行身份​​验证和文件管理。

显然客户想要部署它，所以我开始在 Apache Tomcat 服务器上使用 Java Web Start 进行部署。

我参考[了这个](http://www.mkyong.com/java/java-web-start-jnlp-tutorial-unofficial-guide/comment-page-1/#comment-126081)有趣的教程。自从我关注了它

## 启动文件

```
<jnlp spec="1.0+" codebase="http://localhost:8080/" href="Test.jnlp">
  <information>
    <title>Talisman</title>
    <vendor>CCT</vendor>
    <homepage href="http://localhost:8080/"/>
    <description>Testing Testing</description>
  </information>
  <resources>
    <j2se version="1.6+"/>
    <jar href="Talisman.jar"/>
  </resources>
  <application-desc main-class="cct.karim.karim"/>
</jnlp> 
```

## 运行时异常

```
java.lang.NoClassDefFoundError: org/apache/poi/ss/usermodel/CellStyle
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2442)
    at java.lang.Class.getMethod0(Class.java:2685)
    at java.lang.Class.getMethod(Class.java:1620)
    at com.sun.javaws.Launcher.executeApplication(Unknown Source)
    at com.sun.javaws.Launcher.executeMainClass(Unknown Source)
    at com.sun.javaws.Launcher.doLaunchApp(Unknown Source)
    at com.sun.javaws.Launcher.run(Unknown Source)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: org.apache.poi.ss.usermodel.CellStyle
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at com.sun.jnlp.JNLPClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 9 more 
```

似乎是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:54:42.383

您的部署中没有包含 POI jar。我怀疑您还需要部署其他 jars。您的应用所需的一切都必须下载并安装在客户端的主机上。

你需要这样一行：

```
 <jar href="apache-poi.x.y.jar"/> 
```

对于每个 jar 文件。

# c# - 从字符串中删除一个字符

> ID：14140239
> 
> 赞同：-5
> 
> 时间：2013-01-03T13:52:57.163
> 
> 标签：c#, .net, string

我正在寻找一种可以删除字符串字符的方法。例如，我有 " 3*X^4" 并且我想删除字符 '*' 和 '^' 那么字符串将是这样的 "3X4" 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:55:24.763

也许：

```
string s = Regex.Replace(input, "[*^]", ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T13:55:31.130

```
var s = "3*X^4";
var simplified = s.Replace("*", "").Replace("^", "");
// simplified is now "3X4" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:08:28.603

试试这个..它将从字符串中删除所有特殊字符

```
public static string RemoveSpecialCharacters(string str) 
{
    StringBuilder sb = new StringBuilder();
    foreach (char c in str) 
    {
       if ((c >= '0' && c <= '9') || (c >= 'A' && c <= 'Z') || (c >= 'a' && c <= 'z') 
       || c ==  '.' || c == '_')
       {
          sb.Append(c);
       }
    }
 return sb.ToString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T13:56:51.880

试试这个： [String.Replace（旧字符串，新字符串）](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)

```
string S = "3*X^4";
string str = S.Replace("*","").Replace("^",""); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T14:02:31.613

另一种解决方案是手动提取不需要的字符 - 这可能比重复调用（`string.Replace`尤其是针对大量不需要的字符）稍微更高性能：

```
StringBuilder result = new StringBuilder(input.Length);
foreach (char ch in input) {
    switch (ch) {
        case '*':
        case '^':
            break;
        default:
            result.Append(ch);
            break;
    }
}
string s = result.ToString(); 
```

或者*提取*是错误的词：相反，您复制所有字符，除了那些您不想要的字符。

# c++ - Boost 属性树的并发问题

> ID：14140243
> 
> 赞同：7
> 
> 时间：2013-01-03T13:53:17.780
> 
> 标签：c++, multithreading, boost, istream, boost-propertytree

我开发了一个简单的包装器，它用 Boost 属性树封装了一个 JSONObject。问题是此代码中的分段错误：

```
void JSONObject::parse(const std::string &text)
{
    std::istringstream ss(text);
    boost::property_tree::read_json(ss, *pt);
} 
```

一点上下文，我正在使用 JSON 进行消息序列化。如果程序只使用一个线程，它就可以正常工作。但是如果程序使用两个线程在上面代码的最后一行给出了分段错误。

每个线程都有自己的 JSONObject 对象，并且线程之间不共享任何变量。我的想法是，流可能在内部不是线程安全的。

谁能帮我？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T11:10:49.033

我发现了问题。要使 boost 属性树成为线程安全的，必须添加此标志：

```
#define BOOST_SPIRIT_THREADSAFE 
```

添加此标志后，代码运行没有任何问题。

谢谢您的帮助。

# jquery - 我如何正确地做咖啡脚本或=？

> ID：14140246
> 
> 赞同：0
> 
> 时间：2013-01-03T13:53:25.450
> 
> 标签：jquery, coffeescript, operators, dom-manipulation

我想要做的是同时获取项目列表，隐藏它们并将它们分配给这样的变量：

```
jQuery ->
    client_list or= $('.client-list').find('.actions').hide() 
```

但这会中断并且 ActionController 说`Error: the variable "client_list" can't be assigned with ||= because it has not been defined.`

我该如何解决？这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:18:13.747

你在 coffeescript 中的做法是这样的：

```
client_list = client_list ? $('.client-list').find('.actions').hide() 
```

但是我认为这样做没有任何意义，除非您稍后在运行时重用该调用（如在延迟加载中）。

所以实际上在这种情况下根本不需要使用`?`。

# data-structures - 未排序的优先队列

> ID：14140251
> 
> 赞同：0
> 
> 时间：2013-01-03T13:53:37.613
> 
> 标签：data-structures

我被误导了一点，所以有点困惑。这就是我所理解的未排序优先级队列。有人可以确认吗？未排序的优先级队列是我们在最后插入并根据优先级（即队列中的最小值）删除元素的队列。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:59:54.170

优先级队列是一个抽象的数据结构，定义了get-min、push和pop-min方法，也可能是union。具体实现是否使用排序容器不应该影响我们应该能够执行的操作。

有几种可能的实现方式，其中最流行的是使用二进制堆（在某种程度上未排序），但一种方式也使用例如排序列表。我认为，无论您在哪里听说过`unsorted priority queue`此人，都可能意味着优先级队列，该队列未使用排序列表或其他排序容器实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:01:27.733

数据结构中的基本队列基于先到先服务（FIFO）先进先出，第一个元素被插入队列中，一个将在队列中被服务或执行，最后一个元素将被最后服务或执行，此方法表示未排序的队列。

对于排序队列，它将对插入的元素进行排序，然后将它们作为排序方法执行

如果您添加了某种附加到队列的排序算法，它将像算法一样工作。更多信息： http: [//en.wikipedia.org/wiki/Priority_queue](http://en.wikipedia.org/wiki/Priority_queue)
[http://en.wikipedia.org/wiki/Sorting_algorithm](http://en.wikipedia.org/wiki/Sorting_algorithm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:13:31.510

队列和优先级队列之间存在概念上的差异。队列是一种先进先出的数据结构，允许高效访问队列的两端（头和尾）。Priority Queue 是一种*抽象*数据结构，它提供 getBestItem() 函数，但没有具体说明如何（因此是*abstract*）。

Unsorted Priority Queue 可以指一种 PQ 实现，它不进行间歇性工作（不组织元素）并将 getBestItem() 实现为简单的线性搜索。这使得 getBestItem() 非常低效（*O(n)*），但插入/删除非常便宜（*O(1)*）。如果 Insert/Delete 频繁，而 getBestItem() 不是，这可能是一个有效的选择。

# objective-c - SimpleDB - 位置比较选择表达式

> ID：14140253
> 
> 赞同：1
> 
> 时间：2013-01-03T13:53:49.907
> 
> 标签：objective-c, ios, core-location, amazon-simpledb, coordinate

我有一个坐标，假设任何纬度和经度值。

我在 SimpleDB 上有一个域设置，其中包含许多具有“纬度”和“经度”属性的项目（简单字符串）。现在我想要做的是查询 SimpleDB 并查看当前位置坐标是否与 SimpleDB 的项目坐标相距“x”米。“x”应该是 10。

我的应用程序使用包含纬度和经度的属性将项目上传到 SimpleDB。我检测用户位置，获取坐标，并且我想使用选择表达式来查看坐标是否相距“x”米。那么他们是**更好**的方法吗？或者这是最好的方法，如果是这样，我该怎么做？

这是选择表达式的示例，我只是不知道在这种情况下如何使用它以及`'%@'`将填充什么值。这整个格式可能会关闭，这只是我的想法。

> ```
> select * from test-app-simpledb where Latitude >= '%@' AND Latitude <= '%@' AND Longitude >= '%@' AND Longitude <= '%@' 
> ```

所以“test-app-simpledb”是我的SimpleDB域名，纬度和经度是我比较坐标的属性。它们都转换为字符串。

那么，我该如何做位置比较选择表达式。查询项目的坐标（纬度和经度属性）是否相距“x”（在本例中为 10）米。

有什么办法可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T17:04:21.670

在修改后的问题中，很明显实际问题是如何对 Amazon SimpleDB 数据库进行查询，以查看数据库中的位置是否在 iOS 应用程序提供的位置的某个半径范围内。

正如您正确识别的那样，如果可能，您确实希望在服务器端而不是客户端执行此操作。并且特定的解决方案将高度依赖于特定的数据库技术（在这种情况下为 SimpleDB）。

这个问题[在 AWS SimpleDB 上的空间查询](https://stackoverflow.com/questions/11843428/spatial-queries-on-aws-simpledb)中有所涉及。我建议检查一下以获取更多信息。

作为适当距离算法的代理，您可以将米的距离转换为纬度和经度范围。因此，您可以在 iOS 中计算纬度和经度的最小值和最大值，然后在`WHERE`子句中将它们传递到远程数据库。然后服务器可以根据这些标准过滤结果。诚然，这为您提供了一个方形区域（而不是通过正确计算距离获得的圆形区域），但它可以非常容易地快速限制结果集，而无需在服务器上使用特殊的地理定位逻辑。为此，您可以使用 定义一个区域[`MKCoordinateRegionMakeWithDistance`](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MapKitFunctionsReference/Reference/reference.html#//apple_ref/c/func/MKCoordinateRegionMakeWithDistance)，然后获取它的[`span`](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MapKitDataTypesReference/Reference/reference.html#//apple_ref/doc/uid/TP40009734-CH1-SW29).

```
MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(originalCoordinate, 200, 200);
MKCoordinateSpan span = region.span; 
```

这使您可以以给定位置的纬度`span.latitudeDelta`和`span.longitudeDelta`经度为中心，以定义位置周围的方形区域。为了证明这一点，这里的中心图钉是我在时代广场的位置，阴影区域是一个区域（使用上面`span`的 200m 宽和高构造），它涵盖了我当前位置以东 100m 到以西 100m 之间的经度，以及我当前位置以北 100m 和以南 100m 的纬度。

![使用 span 定义一个正方形区域](../Images/d19ae85f80a3b3f5a1d922d6e314ed29.png)

这是一种使用`MapKit.framework`函数来大大简化远程数据库的 SQL 查询以根据地理距离过滤位置的方法。如果方形区域有问题，您还可以使用`CLLocation`实例方法将结果下载到 iOS 应用程序后进一步过滤，[`distanceFromLocation`](https://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/occ/instm/CLLocation/distanceFromLocation:)以确定实际距离。但是，通过限制服务器检索位置的经度和纬度，您可以显着简化服务器检索过程，同时不会因过多的地理位置计算而受到阻碍。

但是你真的想让 SimpleDB 做完整的、适当的距离计算，我不得不把它留给其他人。

* * *

下面，是我的原始答案。在最初的问题中，我将其误解为“如何构建一个围绕特定位置的圆圈中的坐标列表？” 正如修订后的问题所表明的那样，这根本不是问题，但我会在这里保留我的旧答案以供历史参考。

**原答案：**

如果您使用[计算新坐标 x 米和 y 度距一个坐标](https://stackoverflow.com/questions/6633850/calculate-new-coordinate-x-meters-and-y-degree-away-from-one-coordinate/6634982#6634982)，实现可能如下所示：

```
NSInteger numberOfPoints = 10;

for (double bearing = 0.0; bearing < 360.0; bearing += (360.0 / numberOfPoints))
{
    CLLocationCoordinate2D coordinate = [self coordinateFromCoord:originalCoordinate
                                                     atDistanceKm:distanceKm 
                                                 atBearingDegrees:bearing];
    // do whatever you want with this coordinate
} 
```

它似乎工作正常。例如，我有一个应用程序使用此例程在时代广场距离我 100m 处放置 10 个大头针：

![时代广场](../Images/e4bfa6912cf7271c01482092a8c332ad.png)

# endeca - 维度值的条件

> ID：14140257
> 
> 赞同：2
> 
> 时间：2013-01-03T13:53:59.120
> 
> 标签：endeca

当我不需要准确的尺寸值和一些动态范围值但没有预定义的情况时，有人可以帮助我吗？例如，如果我想获得价格低于 1000 但高于 700 的所有产品。如何在管道中或使用 Assembler API 配置这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:02:39.720

在流水线中，可以定义一个 Dimension values of Type: range，只要事先知道范围即可。

为了检索任意范围，您可以使用以下查询参数：

```
Nf=p_PRICE|BTWN 0 100 (for a range)
Nf=p_PRICE|LTEQ 100  (for all < 100)
Nf=p_PRICE|GTEQ 100  (for all > 100 
```

祝你好运

# netbeans - netbeans 的智能代码自动完成

> ID：14140261
> 
> 赞同：0
> 
> 时间：2013-01-03T13:54:22.967
> 
> 标签：netbeans

netbeans 7 有一些插件可以像 Sublime Text 2 一样使代码自动完成智能？，例如当我输入：

```
inpos 
```

它将生成：

```
$this->input->post('someparam'); 
```

我做了一些谷歌搜索，但没有找到。

提前谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:14:39.400

是的，您可以按照以下步骤轻松完成此操作。

**1.**转到**工具**，然后单击**选项**。

**2.**弹出一个新窗口。

**3.**在**编辑器**部分下，选择**代码模板**选项卡。

**4.**现在您将看到各种选项，如**语言**、**模板**等...

**5.**在**模板**选项下，您可以定义自己的缩写，例如您的**inpos**

**6.**对于您的**inops ，在****Expanded Text**区域下定义您希望在展开时显示的文本，例如**$this->input->post('someparam');**

**7.**现在单击**确定**。

现在在编辑器上写下你的缩写，然后按**Tab 键**来获取你的代码。（你可以为这个和其他选项设置另一个键）。

# php - PHP如何为表格中的HTML添加样式

> ID：14140272
> 
> 赞同：0
> 
> 时间：2013-01-03T13:54:51.223
> 
> 标签：php, html-table

我希望能够设置此表的样式：

在深色背景下，返回的文本不可读：

```
 <?php
    echo "
        <table border = '1'>
        <tr>
        <th>Client ID</th>

    </tr>";
        echo "<tr>";
        echo "<td>" .$clientID. "</td>";
        echo "</tr>";
    echo "</table>";
}
?> 
```

PHP 正在工作。但是如何更改表格中文本的颜色？

**找到了解决方案**

我找到了一个简单的解决方案。使用`bgcolor = '#fff'`，这解决了问题。

```
 <?php
    echo "
        <table border = '1'>
            *bgcolor='#fff'*
        <tr>
        <th>Client ID</th>

    </tr>";
        echo "<tr>";
        echo "<td>" .$clientID. "</td>";
        echo "</tr>";
    echo "</table>";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:04:26.827

以下是如何在页面上实现样式的基本概要：

**HTML 头**

```
<head>
    <!-- example css -->
    <style type="text/css">
        table.mytable {
            border: 1px solid #FF0000;
        }
        table.mytable > thead > tr > th {
            font-size: 2em;
        }
        table.mytable > tbody > tr > td {
            color: #999;
        }
    </style>
    <!-- or below: include a css file -->
    <link rel="stylesheet" type="text/css" href="/path/to/my/css/file.css">
</head> 
```

**你的表**（查看我对 DOM 的更改）

```
<table class="mytable">
    <thead>
        <tr>
            <th>Client ID</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <!-- notice how I include php without echoing the whole table -->
                <?php echo $clientID; ?>
            </td>
        </tr>
    </tbody>
</table> 
```

**学习 CSS**

查看[此网站](http://w3schools.com/cssref/default.asp)以获取良好的教程和参考，以将 css 属性添加到您的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:07:41.013

尝试使用 Bootstrap，只需下载它并将文件放在正确的文件夹中，将 css 文件放在 css 文件夹中，将 js 文件放在 javascript 文件夹中，与图像相同，最后在代码中添加如下类：

```
<?php
echo "
    <table class='table table-striped' >
    <tr>
    <th>Client ID</th>

</tr>";
    echo "<tr>";
    echo "<td>" .$clientID. "</td>";
    echo "</tr>";
echo "</table>";
}
?> 
```

在这里查看更多信息：http: [//twitter.github.com/bootstrap/base-css.html#tables](http://twitter.github.com/bootstrap/base-css.html#tables)

# wpf - 如何在 C# 应用程序中使用 RichTextBox 数据（文本 + 图像）生成 PDF

> ID：14140275
> 
> 赞同：0
> 
> 时间：2013-01-03T13:55:05.820
> 
> 标签：wpf, pdf-generation, richtextbox, rtf

我在 wpf 应用程序中有一个richTextBox，它有 Text + Image

我想用 RichtextBox 生成 PDF，它同时显示 RichTextBox 的文本和图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:59:55.977

这里有一些或多或少相同的问题。注意 RichTextBox 的 Document 属性是一个 FlowDocument。

[WPF：流文档到 PDF](https://stackoverflow.com/questions/5334711/wpf-flowdocument-to-pdf)

[将 FlowDocument 转换为 PDF 的最佳方法是什么](https://stackoverflow.com/questions/9182137/whats-the-best-way-to-convert-a-flowdocument-into-pdf)

[如何在 PDF 和 Word 中保存 flowDocument 的内容？](https://stackoverflow.com/questions/5349490/how-to-save-the-content-of-flowdocument-in-pdf-and-word)

# java - 如何在序列化 XML 文件时去掉行分隔符“”

> ID：14140277
> 
> 赞同：1
> 
> 时间：2013-01-03T13:55:07.390
> 
> 标签：java, xml-serialization, eclipse-rcp, newline

我在（Eclipse RCP 应用程序的）XML 编辑器中有一个 XML 文件，我想将 XML 文档从编辑器到外部位置正确序列化为一个文件。

但是，在导出文件时，我必须首先删除根元素中存在的 xmlns 属性。

因此，当要导出的文档具有**LF**字符作为行分隔符但如果它具有**CRLF**行分隔符时，该操作可以正常工作，在生成的文件中，我可以看到行分隔符已被部分编码。

这是要导出的文档示例（假设它具有**CRLF**作为行分隔符）：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<document xmlns="http://mynamespace/">
    <entete>
        <rubrique>30</rubrique>
        <meta>
            <description>blablabla</description>
            <keywords>bla bla bla</keywords>
        </meta> 
```

这是结果：

```
<?xml version="1.0" encoding="ISO-8859-1"?>&#13;
<document>&#13;
    <entete>&#13;
        <rubrique>30</rubrique>&#13;
        <meta>&#13;
            <description>blablabla</description>&#13;
            <keywords>bla bla bla</keywords>&#13;
        </meta>&#13; 
```

正如我们所见，每一行都有一个`&#13;`字符......

这是我的代码

```
IDOMModel model = (IDOMModel) targetEditor.getAdapter(IDOMModel.class);
IDOMDocument doc = model.getDocument();
FileOutputStream fos = null;
String xmlns = "";

File documentFile = new File(outputDir, fileName);
fos = new FileOutputStream(documentFile);
doc.getDocumentElement().removeAttribute("xmlns");

DOMImplementationRegistry registry = DOMImplementationRegistry.newInstance();
DOMImplementationLS impl = (DOMImplementationLS) registry.getDOMImplementation("LS");

LSSerializer writer = impl.createLSSerializer();
writer.getDomConfig().setParameter("xml-declaration", Boolean.FALSE);

LSOutput output = impl.createLSOutput();
output.setByteStream(fos);

writer.write(model.getDocument(), output); 
```

我尝试了许多不同的选择...

有人知道如何解决吗？

先感谢您。

# php - Oracle/Php：插入一行，看看是否已经在表中

> ID：14140280
> 
> 赞同：0
> 
> 时间：2013-01-03T13:55:16.487
> 
> 标签：php, oracle, unique

我有一个包含 4 列（id、name、surname、tel）的表，
id 是主键
名称，surname 和 tel 是唯一的。

现在我必须插入一行，如果已经有一行具有该名称-姓-tel 的行，则获取 id 并返回它，否则正常插入。

我想到了2个策略：
1）在插入之前做一个选择，如果没有找到就插入它，否则取id
2）尝试插入，如果发生错误代码1（违反唯一约束）做选择并取id

哪一个更好？还是我可以通过 php 执行另一种策略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:01:51.000

你是对的，这些是最好的选择。就性能而言，如果有的话，差异很小。

如果你做第一个，你还必须实施第二个。因为在您的第一个`SELECT`请求和您的第二个`INSERT`语句之间，另一个进程可能已经更改了数据库，除非您在单个事务中执行此操作。

你可以把它变成一个`SELECT INTO`语句来在一个查询中插入/检查，但是你仍然需要做第二个`SELECT`来获取 ID。

所以总而言之：我会选择第二个选项，您可以在其中插入并检查错误。

# javascript - Black Berry 的波纹模拟器：如何使用 sql lite？

> ID：14140281
> 
> 赞同：1
> 
> 时间：2013-01-03T13:55:16.950
> 
> 标签：javascript, html, sqlite, blackberry, ripple

我必须将 sql lite 数据库放在哪里才能与使用类似以下的 sql lite 脚本访问它的应用程序一起使用？：

```
function GetComuni(dbName,sqlStmt)
{
    try
    {
        if (!window.openDatabase) {
            alert('Databases are not supported on this device. Sorry', 'error');
        } else {
            var db;
            var version = '1.0';
            var maxSize = 102400;

            db = window.openDatabase(dbName, version, dbName, maxSize);

            db.transaction(
                function (tx) {
                    tx.executeSql(sqlStmt, [], function (tx, result) {
                            var schemanode = document.GetElementById('COMUNI');
                            schemanode.innerHTML = "";
                            dataset = result.rows;
                            for (var i = 0, item = null; i < dataset.length; i++) {
                                item = dataset.item(i);
                                var notediv = document.createElement('div');
                                notediv.innerHTML = 'Codice Provincia:' + item['PROVINCIA'] + 'Nome:' + item['NAME'];
                                schemanode.appendchild(notediv);
                            }
                        }
                    )
                }
            )
        }
    }
    catch(ex)
    {
        alert(ex);
    }
} 
```

在此先感谢，西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:59:14.747

您不需要将数据库放在任何地方。当您的应用程序调用 window.openDatabase() 时，系统会确定保存数据库的位置。

但是，我确实在您的代码片段中看到了问题。在 db = window.openDatabase() 之后立即调用 db.transaction。由于这两个语句都是异步的，因此不能保证在您启动事务时数据库已经打开。

这是一个可以帮助您入门的工作示例？ [http://blackberry.github.com/WebWorks-Samples/kitchenSink/js/html5/webdb.js](http://blackberry.github.com/WebWorks-Samples/kitchenSink/js/html5/webdb.js)

# jquery - 带有淘汰赛的jQuery tablesorter - 添加行

> ID：14140287
> 
> 赞同：5
> 
> 时间：2013-01-03T13:55:52.557
> 
> 标签：jquery, knockout.js, tablesorter

我正在尝试将 tablesorter 与 savesort 小部件一起使用。该表由 knokout 填充。

第一次填充表格时，我得到了正确数量的行，并且它记得排序。然后，我使用 ajax 并绑定到敲除数组，用数据重新填充表。然后数据加倍，但淘汰赛（正确）仅跟踪一半数据。

到目前为止，我已经追踪到当我在此方法中应用保存的排序时：

```
self.tablesorter = function () {
                        $('table.tablesorterTranslation').trigger("update");
                        setTimeout(function () {
                            var sl = $.tablesorter.storage($('table.tablesorterTranslation'), 'tablesorter-savesort');
                            var sortList = (sl && sl.hasOwnProperty('sortList') && $.isArray(sl.sortList)) ? sl.sortList : '';
                            if (sortList && sortList.length > 0) {
                                // update sort change
                                $('table.tablesorterTranslation').trigger("sorton", [sortList]);
                            }
                        }, 1000);
                        return false;
                    }; 
```

此方法由敲除后操作绑定调用。

在调用该方法之前，我为敲除数组中的每个项目都有一个表行，在 postaction 之后，我有两个，一个由敲除跟踪，一个似乎是由 tablesorter 添加的。

这是由于 tablesorter 缓存值，有没有办法清理它？

的HTML：

```
 <table class="tablesorterTranslation" data-bind="visible: contents().length > 0">
                <colgroup>
                    <col class="referencenumber"/>
                    <col class="title"/>
                </colgroup>
                <thead>
                    <tr>
                        <th class="referencenumber">Ref number</th>
                        <th class="title">Title</th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: contents, postAction: tablesorter(), visible: contents().length > 0">
                    <tr>
                        <td class="referencenumber">
                            <span data-bind="text: contentReferenceNumber"></span>
                        </td>
                        <td class="title">
                            <a data-bind="attr: {href: previewUrl, title: previewTitle}, click: previewpopup" class="preview_translation"><%: AdminResources.Menu_Preview %></a>
                      </td>
                </tr>
            </tbody>
        </table> 
```

重新填充表的 ajax：

```
self.setContentList = function () {
                        if ($('#LanguageIdNameValuePairs option').length > 0) {
                            self.contents.removeAll();
                            self.loading(true);
                            $.ajax('<%= Url.Action("GetContentList", "TranslateContentMenu") %>',
                                {
                                    dataType: 'json',
                                    data: {
                                        languageId: $('#LanguageIdNameValuePairs').val(),
                                        page: self.page
                                    },
                                    success: function (allData) {
                                        var mappedContent = $.map(allData, function (item) { return new ContentViewModel(item); });
                                        self.loading(false);
                                        self.contents(mappedContent);
                                    }
                                });
                        } else {
                            self.contents(new Array());
                        }
                    }; 
```

内容视图模型：

```
(function (ko) {
    PODIUM.translation.ContentViewModel = function(data) {
        this.contentReferenceId = ko.observable(data.contentReferenceId);
        this.contentName = data.contentName;
        this.previewUrl = ko.observable(data.previewUrl);
        this.previewTitle = ko.observable(data.previewTitle);
        this.publishTitle = ko.observable(data.publishTitle);
        this.contentReferenceNumber = ko.observable(data.contentReferenceNumber);
    };
}(ko)); 
```

最后，使用 savesort 填充表并定义 tablesort（我认为 savesort 是问题）。

```
 $('#OptionsMenu').change(function () {
            viewModel.setContentList();
        });
        $('table.tablesorterTranslation').tablesorter({
            widgets: ["saveSort"],
            widgetOptions: {}
        }); 
```

我有一个带有一些值的选择列表，当它发生变化时，我从服务器获取新值并重新填充表。这是它记住旧值的地方，但我想“清理”表格并重新开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:19:10.583

我自己找到了答案，但不是我想要的。

基本上，由于我使用的是淘汰赛，我不应该对视图本身进行更改，而是更改视图模型。所以，我看了一下对数组进行排序，然后让淘汰赛来完成剩下的工作。

我首先删除了 tablesorter 的所有痕迹（除了桌子上的 css 类，因为我已经在样式表中使用了它）。

然后我添加了这个方法：

```
 self.sortContents = function (element, sortProperty) {
                var elem = $(element);
                var direction = (elem.hasClass('headerSortDown')) ? 'headerSortUp' : 'headerSortDown';
                var selector = $.trim($(element).attr('class').replace('header', '').replace('headerSortUp', '').replace('headerSortDown', ''));
                if (direction == 'headerSortUp') {
                    self.filterStorage.updateSortFilter(selector, sortProperty);
                    self.contents.sort(function(left, right) {
                        return left[sortProperty] == right[sortProperty] ? 0 : (left[sortProperty] > right[sortProperty] ? -1 : 1);
                    });
                    elem.removeClass('headerSortDown');
                    elem.addClass('headerSortUp');
                } else {
                    self.filterStorage.updateSortFilter(selector, sortProperty);
                    self.contents.sort(function (left, right) {
                        return left[sortProperty] == right[sortProperty] ? 0 : (left[sortProperty] < right[sortProperty] ? -1 : 1);
                    });
                    elem.removeClass('headerSortUp');
                    elem.addClass('headerSortDown');
                }
            }; 
```

请注意，我使用与 tablesort 插件相同的 css 类，这是因为 tablesorter 已经在应用程序的其他地方使用，并且这些类已经存在 css。

我将表头更改为：

```
<th class="title header" data-bind="click: function(data, event){ return sortContents($(event.target), 'contentName')}"><%: AdminResources.ContentOverview_Title %></th> 
```

然后，由于我在这个烂摊子中起床，试图保存排序状态，我不得不为此找出一些东西。所以我创建了一个带有 to 方法、更新和获取的新类。这保存了我排序的标题和方向。

```
function getSortFilter() {
    var cookie = $.cookie(tableSortedByCookie);
    return JSON.parse(cookie);
}
function updateSortFilter(selector, property) {
    $.cookie(tableSortedByCookie, null);
    $.cookie(tableSortedByCookie, JSON.stringify({ selector: selector, property: property }), { path: '/' });
} 
```

您可以在 sortcontents 方法中查看更新的用法。（此方法在包含表格的页面的视图模型上）。

然后我将它添加到 ajax 成功方法的底部：

```
var tableSortCookie = self.filterStorage.getSortFilter();
if (tableSortCookie != null && tableSortCookie.selector != null) {
   var header = $('.tablesorterTranslation th.' + tableSortCookie.selector);
   self.sortContents(header, tableSortCookie.property);
} 
```

然后，我能够使用敲除对数据进行排序，以及在更改数据和刷新页面时存储状态并加载状态。

# mysql - 具有两个连接的查询中的 mysql 聚合函数给出了意外的结果

> ID：14140288
> 
> 赞同：1
> 
> 时间：2013-01-03T13:56:02.893
> 
> 标签：mysql, join, aggregate-functions

给定以下（非常简化的）mysql表结构：

**产品**

*   ID

**产品类别**

*   ID
*   product_id
*   状态（整数）

**产品标签**

*   ID
*   product_id
*   some_other_numeric_value

我试图找到与某个 product_tag 相关联的每个产品，并且与至少一个 status-attribute 为 1 的类别相关联。

我尝试了以下查询：

```
SELECT *

FROM `product` p

JOIN `product_categories` pc
ON p.`product_id` = pc.`product_id`

JOIN `product_tags` pt
ON p.`product_id` = pt.`product_id`

WHERE pt.`some_value` = 'some comparison value'

GROUP BY p.`product_id`

HAVING SUM( pc.`status` ) > 0

ORDER BY SUM( pt.`some_other_numeric_value` ) DESC 
```

现在我的问题是：`SUM(pt.some_other_numeric_value)`返回意外的值。

我意识到，如果有问题的产品与 product_categories 表的关系不止一个，那么与**product_tags****表**的每个关系都被计算为与**product_categories**表的关系一样多的时间！

 **例如：如果 id=1 的产品与 ids = 2、3 和 4 的 product_categories 有关系，并且与 id 为 5 和 6 的 product_tags 有关系 - 那么如果我插入 a `GROUP_CONCAT(pt.id)`，那么它会给出**5,6,5 ,6,5,6**而不是预期的**5,6**。

起初我怀疑是连接类型（左连接、右连接、内连接等）有问题，所以我尝试了所有我知道的连接类型，但无济于事。我还尝试在`GROUP BY`子句中包含更多的 id 字段，但这也没有解决问题。

有人可以向我解释这里到底出了什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T14:30:43.073

您通过关系将“主” ( `product`) 表连接到两个表 (`tags`和) ，因此这是意料之中的，您正在创建一个迷你笛卡尔积。对于同时具有多个关联标签和多个关联类别的产品，将在结果集中创建多行。如果您分组依据，您在聚合函数中会得到错误的结果。`categories``1:n`

* * *

避免这种情况的一种方法是删除两个连接之一，如果您不需要该表的结果，这是一个有效的策略。假设您不需要表中`SELECT`列表中的任何内容`product_categories`。然后您可以使用半联接（该`EXISTS subquery)`表：

```
SELECT p.*,
       SUM( pt.`some_other_numeric_value` )

FROM `product` p

JOIN `product_tags` pt
  ON p.`product_id` = pt.`product_id`

WHERE pt.`some_value` = 'some comparison value'

  AND EXISTS
      ( SELECT *
        FROM product_categories pc
        WHERE pc.product_id = pc.product_id
         AND  pc.status = 1
      ) 

GROUP BY p.`product_id`

ORDER BY SUM( pt.`some_other_numeric_value` ) DESC ; 
```

* * *

规避此问题的另一种方法是 - 在 - 之后`GROUP BY MainTable.pk`- 在`DISTINCT`内部`COUNT()`或`GROUP_CONCAT()`聚合函数中使用。这有效，但您不能将其与`SUM()`. 因此，它在您的特定查询中没有用。

* * *

第三种选择 - 始终有效 - 是首先按两个（或更多）边表分组，然后加入主表。在你的情况下是这样的：

```
SELECT p.* ,
       COALESCE(pt.sum_other_values, 0) AS sum_other_values
       COALESCE(pt.cnt, 0) AS tags_count,
       COALESCE(pc.cnt, 0) AS categories_count,
       COALESCE(category_titles, '') AS category_titles

FROM `product` p

JOIN 
    ( SELECT product_id
           , COUNT(*) AS cnt
           , GROUP_CONCAT(title) AS category_titles
      FROM `product_categories` pc
      WHERE status = 1
      GROUP BY product_id
    ) AS pc
  ON p.`product_id` = pc.`product_id`

JOIN 
    ( SELECT product_id
           , COUNT(*) AS cnt
           , SUM(some_other_numeric_value) AS sum_other_values
      FROM `product_tags` pt
      WHERE some_value = 'some comparison value'
      GROUP BY product_id
    ) AS pt
ON p.`product_id` = pt.`product_id`

ORDER BY sum_other_values DESC ; 
```

*`COALESCE()`那里并不严格需要 - 以防万一您将内部连接更改为外部`LEFT`连接。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:21:04.610

你不能通过求和函数排序

相反，您可以这样做

```
 SELECT * ,SUM( pt.`some_other_numeric_value` ) as sumvalues

 FROM `product` p

 JOIN `product_categories` pc
 ON p.`product_id` = pc.`product_id`

 JOIN `product_tags` pt
 ON p.`product_id` = pt.`product_id`

 WHERE pt.`some_value` = 'some comparison value'

 GROUP BY p.`product_id`

 HAVING SUM( pc.`status` ) > 0

 ORDER BY sumvalues DESC 
```**

# c# - 如何添加像 example.com/id 这样的 MapRoute

> ID：14140295
> 
> 赞同：0
> 
> 时间：2013-01-03T13:56:21.910
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-routing, url-routing

我想创建一个 URL 缩短器网站。我提供的 URL 就像短 URL 的值在`example.com/XXX`哪里 。`XXX`

我想有网站`example.com`，网址是`example.com/xxx`. 我想`xxx`从 URL 获取并将用户重定向到数据库中的等效 URL。

如何实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:49:23.883

在 RouteConfig 中创建一个新路由，例如：

```
 public class RouteConfig
    {
        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute("empty",
                            "{id}",
                            new {controller = "Home", action = "Index", id = UrlParameter.Optional}
                );

            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            );

        }
    } 
```

只需使用索引中传递的 id 进入您的数据库

```
 public ActionResult Index(int id)
  {
        //Do Stuff with db
        return View();
  } 
```

asp.net mvc 文档[在这里](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-custom-routes-cs)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:42:45.740

您在默认控制器操作中执行所需重定向的一种方式。默认情况下，在 asp.net mvc 中它是 home/index。

所以在索引操作中你应该有这样的代码

```
public ActionResult Index(string id)
{
      var url = Db.GetNeededUrl(id);
      return Redirect(url);
} 
```

因此，现在如果用户输入这样的地址 site.com/NewYear，您将被重定向到数据库中的等效 url。

# forms - 如何将 Windows 窗体移植到 Delphi 中的控制台应用程序

> ID：14140300
> 
> 赞同：1
> 
> 时间：2013-01-03T13:56:42.487
> 
> 标签：forms, delphi, console-application, delphi-2010

我在 Windows 窗体中使用 ScktComp 和 Winsock 创建了一个聊天服务器。如何在控制台应用程序中做同样的事情？

我发现这是一个[起点，](http://www.delphipages.com/forum/showthread.php?t=47967)但是里面的链接（线程的作者回答“几乎完美的答案”）已经过期。

控制台应用程序中`ServerSocketClientConnect`/和其他方法的等价物是什么？`ClientSocketConnect`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:12:55.940

Delphi 在控制台应用程序中使用相同的类和非可视组件。您不需要更改您使用的类，但您需要学习如何通过手动输入来向单元添加内容，而不是依赖 Delphi IDE 为您生成代码。

您可以使用以下步骤自己创建它们，或者您可以使用在控制台应用程序中使用包含非可视组件的 VCL Win32 GUI 应用程序时已经构建的数据模块。

脚步：

1.  将包含要使用的类或组件的单元名称添加到 Uses 子句。

2.  像构造一个类一样构造组件：

    ```
     var
        aSomething:TSomething;
      begin
        aSomething := TSomething.Create(Parameter1,Parameter2);
      end; 
    ```

3.  记得在正确的地方释放它。

    ```
     aSomething.Free; 
    ```

但是我很难理解为什么要将聊天服务器变成控制台应用程序，而不是作为玩具或实验。在实际使用中，您可能想要一个 Win32 GUI，或者您想要一个完全非可视化的服务（NT 风格的服务），您可以创建它，而无需将 APPTYPE 更改为控制台，但它可以在没有任何 GUI 的情况下运行，尽管如此。

我可以看到编写控制台应用程序的主要实际原因是从命令行编写有用的东西，例如构建帮助实用程序等。制作控制台应用程序本身非常容易。首先创建一个新的空控制台应用程序，向其中添加一个新的空帕斯卡单元，创建一个 main 方法，然后将您想要的单元名称添加到您正在处理的 main-unit 的 uses 子句中。这里的所有都是它的。

您可以继续使用您当前正在使用的服务器套接字和客户端套接字，但我建议您忘记控制台应用程序，除非您真的需要它，因为您所做的只是使程序的开发和操作更多很难没有真正的目的。您不必更改组件或类以在控制台应用程序中使用它们，但是，我应该说 GUI 或控制台类似，Delphi 中“Internet”选项卡上的 TTcpClient 和 TTcpServer 组件不适合实际使用任何现实世界的应用程序。它们是为了向后兼容而存在的，应该被认为是“过时的”和“不再以任何严肃的方式使用”。

查看真正的 TCP/IP 库，如 Indy、ICS、Synapse 或任何东西，除了来自组件选项板的“Internet”页面的那些组件，它们不适合在任何规模的现实世界中使用，除了“玩具”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T15:29:19.417

一些 VCL 类需要 Windows 消息循环和/或窗口句柄。因此，如果您更改应用程序类型，它们可能会停止工作。

还要检查现有代码是否用于`synchronize`在 VCL 主线程中运行代码。在非 VCL 应用程序中使用同步可能很[危险](https://stackoverflow.com/questions/10689159/)。

# html - 很难设置边框图像

> ID：14140302
> 
> 赞同：0
> 
> 时间：2013-01-03T13:56:50.403
> 
> 标签：html, css, slider, border, slideshow

我正在尝试为我的网站设置一个相当复杂的边框图像。我不能将其设置为背景图像，因为它实际上是幻灯片的边框，并且幻灯片内容在实际滑动时必须位于边框下方，而对于背景图像，我假设内容只会在其上方。

所以，基本上我需要帮助如何使它成为一个 div 的边框图像。或者，如果有更好的方法然后将其作为边界，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:14:12.090

制作透明的 png 图像不是 html，您需要使用 Photoshop 或 Gimp 等软件来完成，否则您可以使用 div 来完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:44:21.490

您可以使用之前/之后的伪元素将您不寻常的“边框”附加为背景图像。

```
div.slide {
    background: yellow;
    position: relative;
}

div.slide:before {
    display:  block;
    content: " ";
    position: absolute;
    width: 100%;
    height: 100%;
    background: url(slide-bg.png) no-repeat;
    background-size: 100% 100%;
    z-index: 1;
} 
```

[http://jsfiddle.net/kTgJJ/](http://jsfiddle.net/kTgJJ/)

该演示使用不透明到透明的渐变，因此您可以看到效果。您的图像只需要有透明区域供文本显示，以及不应该显示的不透明区域。根据需要添加填充`.slide`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:50:12.240

```
<style>
    .screen {
        height: 422px;  
        width: 820px;       
    }
    .back {
        position: absolute;
        height: 422px;      
        width: 820px;       
        background-image:url('test.png');
    }
    .content {
        position: absolute;
        height: 320px;
        width: 672px;
        margin-left: 73px;
        margin-top: 56px;
        border-radius: 50px;
        overflow:hidden;
    }
</style>
<div class="screen" >
    <div class="content" >
        put here what ever you want to put inside
    </div>
    <div class="back" ></div>
</div> 
```

用你的形象和我一起工作

# python - 蟒蛇计算器

> ID：14140303
> 
> 赞同：-7
> 
> 时间：2013-01-03T13:56:50.713
> 
> 标签：python

我在网上找到了这个计算器代码。

我想添加一些函数，比如 pow() 但它返回一个错误。

错误：

> 按钮（powF，左，'pow'，lambda w=display: w.set(w.pow()))
> 
> AttributeError：StringVar 实例没有属性“pow”

* * *

```
from Tkinter import * 
import math

def frame(root, side):
   w = Frame(root)
   w.pack(side=side, expand=YES, fill=BOTH) 
   return w

def button(root, side, text, command=None):
   w = Button(root, text=text, command=command)
   w.pack(side=side, expand=YES, fill=BOTH)
   return w

class Calculator(Frame):
   def __init__(self):
       Frame.__init__(self)
       self.option_add('*Font', 'Verdana 20 bold') 
       self.pack(expand=YES, fill=BOTH)  
       self.master.title('tk') 
       self.master.iconname("calcu1ator") 

       display = StringVar()
     Entry(self,relief=SUNKEN,textvariable=display).pack(side=TOP,expand=YES,fill=BOTH)

       for key in ("123", "456", "789", "-0."):
           keyF = frame(self, TOP)

           for char in key:
               button(keyF, LEFT, char,lambda w=display, c=char: w.set(w.get() + c))

       opsF = frame(self, TOP)

       for char in "+-*/=":
           if char == '=':
               btn = button(opsF, LEFT, char)
               btn.bind('<ButtonRelease-1>',lambda e, s=self, w=display: s.calc(w), '+')
           else:
               btn = button(opsF, LEFT, char,lambda w=display, s=' %s '%char:w.set(w.get()+s))

       clearF = frame(self, BOTTOM)
       button(clearF, LEFT, 'Clr', lambda w=display: w.set(''))

       #powF = frame(self, BOTTOM)
       #button(powF, LEFT, 'pow', lambda w=display: pow(w,2))

   def calc(self, display):
       try:
           display.set(eval(display.get()))
       except:
           display.set("ERROR")

if __name__ == '__main__':
   Calculator().mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:52:20.057

您不能将`display`as 参数提供给`pow`函数，它需要一个数字。并且不要忘记设置显示。

```
 powF = frame(self, BOTTOM)
   button(powF, LEFT, 'pow', lambda w=display: w.set(pow(float(w.get()),2))) 
```

# razor - 用户代码未处理 ArgumentNullException。剃须刀 MVC 4

> ID：14140305
> 
> 赞同：1
> 
> 时间：2013-01-03T13:56:53.923
> 
> 标签：razor, asp.net-mvc-4

我所做的如下：

```
@{var parent = new BlogCommentModel();}
@foreach (var comment in Model.Comments)
{

@foreach (var child in Model.Comments.Where(x => x.CommentParentID == comment.Id))
{

if (child.ChildCommentList!= null || child.ChildCommentList.Any())
{
parent = child;

foreach (var cmt in parent.ChildCommentList)
{

}

}

} 
```

当 ChildCommentList 为空时。它抛出一个异常：

用户代码未处理 ArgumentNullException。- {"值不能为空。\r\n参数名称：源"}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:12:11.847

您应该在下面的行中使用 AND 运算符。

```
if (child.ChildCommentList!= null && child.ChildCommentList.Any()) 
```

# c# - 多线程 RDLC 报告不刷新

> ID：14140306
> 
> 赞同：1
> 
> 时间：2013-01-03T13:56:56.307
> 
> 标签：c#, parallel-processing, rdlc

Gurus 我们正在.NET 4.0 中开发一个win forms 应用程序，它使用RDLC 控件生成PDF 报告。由于报告生成需要大量时间，我们决定为每个文件实现 Parallel.. 使用以下代码，它会为第一条记录生成 PDF，然后系统就会挂起.. 请帮助我们...

```
 public void generatereport()
        {
            button1.Enabled = false;
            button4.Enabled = false;
            DataTable dtBranch = new DataTable();
            dtBranch = getBranchNo(); -- we might get around 300 rows here

            try
            {
                Parallel.ForEach(dtBranch.AsEnumerable(), drow =>
                   {
                       // Shows the ReportData along with the branch code
                        reportdate = drow["reportdate"].ToString();
                       string branchName = drow["BranchNo"].ToString();
                        ProcessReport(branchName);
                   });
                  reportViewer2.Visible = false;
            button1.Enabled = true;
            button4.Enabled = true;
            lblMsg.Text = "Branch Summary Generated at '" + @fullpath + "'";
            }
            catch (AggregateException e)
            {
                //Console.Write(e.Data + e.Message);
                //Console.ReadLine();
            }

        }

        private void ProcessReport(string branName)
        {
            if (reportViewer2.InvokeRequired)
            {
                ProcessReportCallBack d = new ProcessReportCallBack(ProcessReport);
                Invoke(d, new object[] { branName });
            }
            else
            {
                log.Debug("branch" + DateTime.Now.ToString());
                DataTable dt = new DataTable();
                dt = getReportOrderNoBasedonBranchID(branName);//Get all the report order no as per the branch id

                    this.sp_getReportOrderNoTableAdapter.Fill(this.getRptNo.sp_getReportOrderNo, branName);
                    this.reportViewer2.LocalReport.SubreportProcessing += new Microsoft.Reporting.WinForms.SubreportProcessingEventHandler(this.reportViewer2_Subreport1);
                    this.reportViewer2.Clear();
                    this.reportViewer2.ProcessingMode = ProcessingMode.Local;
                    this.reportViewer2.LocalReport.ReportPath = @"Master.rdlc";
                    this.reportViewer2.Refresh();

                    Savepdf("reportViewer2", branName + "_" + reportdate);

            }
    } 
```

在保存 PDF 中，我们正在生成 PDF 报告..

```
byte[] bytes = null;

                bytes = reportViewer2.LocalReport.Render(
                "PDF", null, out mimeType, out encoding,
                 out extension,
                out streamids, out warnings);
                filename = BranchName + '_' + "Summary" + ".pdf";

                using (FileStream fs = new FileStream(@fullpath + '\\' + filename, FileMode.Create))
                {
                    fs.Write(bytes, 0, bytes.Length);
                    fs.Close();
                }
                bytes = null; 
```

请提供您的反馈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:50:29.877

您不需要示例代码来导出到 PDF，当`RDLC`已经呈现到`ReportViewer`尝试从以下位置找到此图标时`ToolBars of ReportViewer Control`：

![在此处输入图像描述](../Images/0f6dccfbb17332c94bc06ccab1afbbaa.png)

**编辑**：

[以编程方式将 RDLC 报告另存为 PDF](https://stackoverflow.com/questions/1652203/save-rdlc-reports-as-pdf-programaticaly)

```
public void Save(ReportViewer viewer, string savePath)
{
    byte[] Bytes = viewer.LocalReport.Render("PDF", "", null, null, null, null, null);

    using (FileStream Stream = new FileStream(savePath, FileMode.Create)) {
        Stream.Write(Bytes, 0, Bytes.Length);
    }
} 
```

# php - 如何选择一个字段是数组成员的数据？

> ID：14140314
> 
> 赞同：0
> 
> 时间：2013-01-03T13:57:41.653
> 
> 标签：php, mysql, arrays, select, field

使用 PHP 和 MySQL。我有一个数组 P，其中包含可能的产品类别数的值。在我的表格中，它还有“类别”字段，其中存储了类别编号和其他字段。我想要的是在所有行中选择数据，其中字段“类别”在数组 P 中有任何值。我该怎么办？

例如
P=[1,7,13]

```
SELECT * FROM table WHERE category=P[1] OR categry=P[2] OR category=P[3].... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:01:04.520

采用：

```
$categories = implode(', ', $p); // Where $p is the array 
SELECT * FROM table WHERE category IN ($categories) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:00:47.693

尝试[implode() 函数](http://php.net/manual/en/function.implode.php)：

```
$sql = "SELECT * FROM table WHERE category IN (".implode(",", $P).")" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:01:15.680

你应该使用`IN`关键字：

```
SELECT * FROM table WHERE category IN (p[1], p[2], p[3]) 
```

与`implode`：

```
$categories = implode(',', $P); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T14:01:56.540

使用字符串连接：

```
$P = array(1, 7, 13);
$query = "SELECT * FROM table WHERE category=".$P[1]." OR 
            category=".$P[2]." OR category=".P[3]."...."; 
```

或者

```
$query = "SELECT * FROM table WHERE category={$P[1]} OR 
            category={$P[2]} OR category={P[3]}...."; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T14:14:59.360

由于 P 数组中的**值可能多于/少于 3 个**，因此最好先进行查询：

```
$p = array('1', '2', '3', '4', '5');

$auto = '';
foreach($p as $value){
    $auto .= "'".$value."'" . " OR category= ";
}
$auto = substr($auto, 0 , strlen($auto) - 14);

$the_query = "SELECT * FROM table WHERE category= $auto";

echo $the_query;
// mysql_query($the_query); 
```

上面代码中 P 有 3 个值的结果将是：

```
SELECT * FROM table WHERE category= '1' OR category= '2' OR category= '3' OR category= '4' OR category= '5' 
```

`P`这将自动根据数组中的值数量进行查询。

# delphi - 在带有 Indy 10.5.9 的 Windows 上启用和使用 iconv 的步骤

> ID：14140315
> 
> 赞同：1
> 
> 时间：2013-01-03T13:57:47.383
> 
> 标签：delphi, cross-platform, indy, iconv

对于使用 Internet Direct (Indy) 的跨平台开发，启用[iconv](http://en.wikipedia.org/wiki/Iconv)支持而不是特定于操作系统的 Windows 字符转换可能很有用。

这将允许在 Delphi IDE 中继续在 Windows 上开发和测试代码，但仍然能够在不同平台上编译代码之前找到与转换相关的问题。

**Indy 10 已经包含在 Linux 和 Windows 上使用 iconv API 的代码。**

在 Windows 上，需要一些准备工作：

*   将 iconv API DLL 复制到应用文件夹或搜索路径
*   定义**use_iconv**条件符号

这个问题的目的是帮助在 Windows 平台上开始使用 iconv。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:30:57.627

如果我快速浏览一下我在[gettext for windows sourceforge project](https://sourceforge.net/projects/gettext/)中找到的 iconv.h ，并且如果我正确理解了 C 代码，那么 iconv.dll 的包装单元可能看起来像这样，并且可以用于输入和印地组件的输出。

```
unit iconv;

interface

//based on version 1.9.1 https://sourceforge.net/projects/gettext/

type
  TIconv = pointer;

function iconv_open(const PAnsiChar:tocode; const PAnsiChar:fromcode): TIconv; cdecl;
function iconv(cd:TIconv; var inbuf:PAnsiChar; var inbytesleft:integer; var output:PAnsiChar; var outbytesleft:integer): integer; cdecl;
function iconv_close(cd:TIconv): integer; cdecl;

const
  ICONV_TRIVIALP            =0;  // int *argument
  ICONV_GET_TRANSLITERATE   =1;  // int *argument
  ICONV_SET_TRANSLITERATE   =2;  // const int *argument
  ICONV_GET_DISCARD_ILSEQ   =3;  // int *argument
  ICONV_SET_DISCARD_ILSEQ   =4;  // const int *argument

type
  TiconvlistDoOne=function(namescount:cardinal; const names:PAnsiChar; data:pointer): integer; cdecl;

function iconvctl(cd:TIconv; request:integer; argument:pointer): integer; cdecl;
procedure iconvlist(do_one:TiconvlistDoOne; data:pointer); cdecl;
procedure libiconv_set_relocation_prefix(const orig_prefix:PAnsiChar; const curr_prefix:PAnsiChar); cdecl;

implementation

function iconv_open; external 'iconv.dll';
function iconv; external 'iconv.dll';
function iconv_close; external 'iconv.dll';
function iconvctl; external 'iconv.dll';
procedure iconvlist; external 'iconv.dll';
procedure libiconv_set_relocation_prefix; external 'iconv.dll';

end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:52:35.580

Free Pascal 有一个 iconv 头文件（包 iconvenc），它要么与 delphi 兼容，要么应该很容易更新。从[FPC websvn 接口模块 iconvenc](http://svn.freepascal.org/cgi-bin/viewvc.cgi/trunk/packages/iconvenc/ "FPC websvn接口模块iconvenc")或最新的 RC (2.6.2rc1) 获取它，因为它可能从 2.6.0 年开始更新。

但它比仅仅提供标头更复杂，因为 windows 上的 iconv 不支持 errno，因此无法处理 EILSEQ 和 EI2BIG，因此您需要预先正确分配内存（如 4*charsize）。

我得到了如何处理非 errno iconv 目标[PHP](http://svn.php.net/viewvc/php/php-src/trunk/ext/iconv/iconv.c?revision=280602&view=markup "PHP")的代码，但它还没有经过很好的测试。（见 src/iconvert.inc）

# jsf - 使用 urlrewrite 动态生成链接

> ID：14140319
> 
> 赞同：1
> 
> 时间：2013-01-03T13:57:55.530
> 
> 标签：jsf, url-rewriting, hyperlink

我正在使用 urlrewriting 并且我的模式匹配`../products/product_id`并映射到`/product.jsf?product_id=$1`.

重写表现良好，但我无法生成动态链接。

在迭代的上下文中：

```
...
  <h:link value="view product" outcome="products/#{item.id}"/>
... 
```

案例非常简单。我只希望生成的 url 具有“products/123”的形式，但页面没有呈现，我猜是因为结果无法在生成时解决。

我可以生成一个带有“/product.jsf”的链接并添加一个视图参数。但我更喜欢另一种方式。我怎么会有这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:27:03.613

如果您没有有效的导航案例结果，请使用纯 HTML `<a>`。

```
<a href="products/#{item.id}">view product</a> 
```

根据当前的 URI，您可能只需要自己添加上下文路径。

```
<a href="#{request.contextPath}/products/#{item.id}">view product</a> 
```

# c# - XMLStringWriter 的最大大小限制

> ID：14140321
> 
> 赞同：0
> 
> 时间：2013-01-03T13:58:00.567
> 
> 标签：c#, .net-2.0

我知道没有为 XML Doc 定义这样的限制！当我尝试使用 XMLStrinWriter 实时构建 XML 时，系统出现错误消息`System Out of memory exception`

我认为我不需要提供示例代码！我只是想知道限制的大小限制`XMLStringWriter`

# android - 按钮不显示

> ID：14140322
> 
> 赞同：0
> 
> 时间：2013-01-03T13:58:01.097
> 
> 标签：android, android-layout

这是我的 xml 代码（我关注了这篇[文章](https://stackoverflow.com/questions/4873523/buttons-not-displaying-in-linear-layout)，但它不起作用）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<WebView
    android:id="@+id/webChapter"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:layout_alignParentTop="true"/>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal" 
    android:layout_below="@+id/webChapter"
    android:layout_alignParentBottom="true">

    <Button
        android:id="@+id/btnMenu"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Back To Menu" />

    <Button
        android:id="@+id/btnNavi"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Example" />

    <Button
        android:id="@+id/btnQuestion"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Quiz" />
</LinearLayout> 
```

这是图形的：

![在此处输入图像描述](../Images/4b1e1671af4b5cfed6b0320b0404841b.png)

当我的 webview 变得太高时，我的按钮不会显示。我该怎么办？感谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:05:15.920

尝试以下操作：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<WebView
    android:id="@+id/webChapter"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:layout_alignParentTop="true"
    android:layout_above="@+id/linearlayout"/>

<LinearLayout
    android:id="@+id/linearlayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal" 
    android:layout_alignParentBottom="true">

    <Button
        android:id="@+id/btnMenu"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Back To Menu" />

    <Button
        android:id="@+id/btnNavi"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Example" />

    <Button
        android:id="@+id/btnQuestion"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Quiz" />
</LinearLayout> 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:05:05.640

试试下面的布局，希望它对你有用。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:weightSum="10" >

    <WebView
        android:id="@+id/webChapter"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="9" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:gravity="center_horizontal" >

        <Button
            android:id="@+id/btnMenu"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Back To Menu" />

        <Button
            android:id="@+id/btnNavi"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Example" />

        <Button
            android:id="@+id/btnQuestion"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Quiz" />
    </LinearLayout>
</LinearLayout> 
```

上面的代码将在 webview 下方有按钮。如果您可以使用 webview 上方的按钮，那么也不需要使用权重。您可以将 webview 放在按钮布局下方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:06:03.587

嗨试试这个

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<WebView
    android:id="@+id/webChapter"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:layout_alignParentTop="true"
    android:layout_alignBottom="@+id/btnLayout"/>

<LinearLayout
    android:id="@+id/btnLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal" 
    android:layout_below="@+id/webChapter">

    <Button
        android:id="@+id/btnMenu"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Back To Menu" />

    <Button
        android:id="@+id/btnNavi"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Example" />

    <Button
        android:id="@+id/btnQuestion"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Quiz" />
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T14:06:18.677

您可以为您的 webview 固定一个高度，或者为您的 LinearLayout 定义一个 id 并`android:layout_above`在您的 webView 上设置属性，以保证您的 webview 将位于按钮上方而不是浮动在它们之上。

尝试这样的事情：

```
<WebView
    android:id="@+id/webChapter"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/lowerBar"
    android:layout_alignParentTop="true"/>

<LinearLayout
    android:id="@+id/lowerBar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal" 
    android:layout_alignParentBottom="true"> 
```

# javascript - javascript获取嵌套数组元素

> ID：14140323
> 
> 赞同：-5
> 
> 时间：2013-01-03T13:58:04.883
> 
> 标签：javascript, json, for-loop

在 javascript 中，我如何从这个数组中获取单个元素？

[http://pastebin.com/n8yrnCpf](http://pastebin.com/n8yrnCpf)

我需要遍历它并格式化数据

例如，我将如何获得数组 [0] [1] [1]

也许有一些 json 脚本可以快速完成

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:08:34.567

Json来自**J** ava **S** cript **Object** **Notation**。它是一种与 javascript 兼容的格式，因此您可以循环访问它，并根据需要访问它。换句话说，你*确实*可以得到.***`array[0][1][1]`***

 ***如果您要求的是如何接收字符串中的 JSON 并将其转换为“可用”的 JavaScript 变量，您可以这样做：

```
var json_string = "[[['whatever','and'],['more','whatever']]]"
var parsed_json = JSON.parse (json_string)
console.log (parsed_json[0][0]) 
```

或者，如果您使用旧浏览器（IE7 等），您可以使用 JQuery 及其老版本的安全函数 parseJSON：

```
var json_string = "[[['whatever','and'],['more','whatever']]]"
var parsed_json = $.parseJSON (json_string)
console.log (parsed_json[0][0]) 
```***

# java - 在Java中查找文本和点之间的文本的正则表达式

> ID：14140326
> 
> 赞同：1
> 
> 时间：2013-01-03T13:58:23.160
> 
> 标签：java, regex

我正在抓取一个网站，它有相对 url，我想把它们变成绝对路径。出于这个原因，我想使用正则表达式。

例如

```
 String text =  new String();
 text +="Lorem Ipsum /image/xyz.jpg"; 
 text +=" Lorem Ipsum /image/xyz2.jpg";
 text +=" Lorem Ipsum /image/xyz2.jpg";
 Pattern pattern = Pattern.compile("\\/image\\/.*\\.");
 Matcher matcher = pattern.matcher(text);
 while(matcher.find()){
  System.out.println(matcher.group());
 } 
```

我想得到这样的输出：

```
/image/xyz.
/image/xyz2.
/image/xyz2. 
```

我认为我的正则表达式似乎不正确。我应该如何改变它才能正常工作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:11:32.870

以下应该可以解决问题：

```
Pattern.compile("\\/image\\/[^.]*\\."); 
```

这是假设只有一个“。” 匹配中的字符，即没有多个“.”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:08:32.940

试试这个正则表达式：

```
/.*/\w+\. 
```

对于以下文本：

```
Lorem Ipsum /image/xyz.jpg 
```

它会匹配这个

```
/image/xyz. 
```

PS：我使用 .NET 正则表达式进行了测试，但是这个在 java 中应该可以正常工作

# jquery - 右一格，左一格，宽度固定

> ID：14140328
> 
> 赞同：0
> 
> 时间：2013-01-03T13:58:30.477
> 
> 标签：jquery, css, jsfiddle

多谢你们。**它解决了**。不要回答。

```
jsfiddle.net/GMLGn/5/ 
```

我仍然不明白它是如何工作的......

无论我尝试多少，黑色边框 div 都不会向右浮动并进入红色边框（除了左侧的绿色边框）。

简而言之，我想要绿色和黑色并排的 `jsfiddle.net/GMLGn/` 任何想法？

代码太长，无法在此处发布（堆栈字符限制），并且在当前场景中提供部分代码是不可行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:03:27.807

绿色边框在周围，`#frontpage-image`但`.gallery`块不在其中。因此，不会将另一个块放入其中是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:14:59.590

试试这个：

```
.w1{
    margin:0 auto;
    width:1000px;
    padding:0 0 274px;
    /*NEW*/
    position:relative;
}
.gallery{
    width: 290px;
    min-height: 410px;
    padding: 20px 16px 6px 29px;
    line-height: 17px;
    color: #454444;
    background: url(../images/bg-gallery.png) no-repeat;
    border: thick solid rgb(0,0,0);
    /*NEW*/
    position:absolute;
    top:165px;
    right:0;   
} 
```

测试：http: [//jsfiddle.net/GMLGn/4/](http://jsfiddle.net/GMLGn/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:15:06.710

在`#frontpage-image`.

```
float: left;
width: 64%; 
```

# php - OAuth-PHP 和 Twitter

> ID：14140329
> 
> 赞同：0
> 
> 时间：2013-01-03T13:58:31.083
> 
> 标签：php, twitter, oauth, twitter-oauth

我正在尝试使用 OAuth-PHP 使用 PHP 发布推文，但我似乎无法弄清楚如何实现这一点。有没有人有关于如何做到这一点的任何提示，或者我应该去哪里看？

我已经看过 OAuth-PHP 库附带的示例，但我不确定如何调整它以发布推文。

到目前为止，我发现了一个类似的问题，但没有答案：[Sending a tweet with oauth-php?](https://stackoverflow.com/questions/10260919/sending-a-tweet-with-oauth-php)

我正在使用的代码是这样的：

```
 define("TWITTER_CONSUMER_KEY", $this->config->Twitter->ConsumerKey);
    define("TWITTER_CONSUMER_SECRET", $this->config->Twitter->ConsumerSecret);

    define("TWITTER_OAUTH_HOST","https://api.twitter.com/");
    define("TWITTER_REQUEST_TOKEN_URL", TWITTER_OAUTH_HOST . "oauth/request_token");
    define("TWITTER_AUTHORIZE_URL", TWITTER_OAUTH_HOST . "oauth/authorize");
    define("TWITTER_ACCESS_TOKEN_URL", TWITTER_OAUTH_HOST . "oauth/access_token");
    define("TWITTER_PUBLIC_TIMELINE_API", TWITTER_OAUTH_HOST . "statuses/public_timeline.json");
    define("TWITTER_UPDATE_STATUS_API", TWITTER_OAUTH_HOST . "statuses/update.json");

    define('OAUTH_TMP_DIR', function_exists('sys_get_temp_dir') ? sys_get_temp_dir() : realpath($_ENV["TMP"]));

    // Twitter test
    $options = array('consumer_key' => TWITTER_CONSUMER_KEY, 'consumer_secret' => TWITTER_CONSUMER_SECRET);
    OAuthStore::instance("2Leg", $options);

    try {
        $request = new OAuthRequester(TWITTER_UPDATE_STATUS_API, "POST", array('status' => $msg));
        $result = $request->doRequest();
    }
    catch(OAuthException2 $e) {
        echo "Exception: " . $e->getMessage();
    } 
```

这是我想要做的，但我得到一个异常：请求失败，代码为 401：{“request”：“/statuses/update.json”，“error”：“无效/过期令牌”}

由于我是 OAuth 的新手，我可能错过了一个重要的步骤并且不知道它......

有什么线索吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:51:54.173

没关系，我只是使用了另一个 OAuth 实现，以及一个 twitter oauth 库。

发帖，这才是最重要的。

我只是想要一个可以用于多个社交网络的独立库，我将尝试使用这个库来实现与 facebook 相同的功能。

# xml - 使用 Spring 批处理将复杂的 XML 解组为 java

> ID：14140332
> 
> 赞同：0
> 
> 时间：2013-01-03T13:58:45.043
> 
> 标签：xml, jaxb, xstream, spring-batch

我使用 Spring 批处理来解析 XML 文档并对这些 XML 文档中包含的数据进行操作。

我有如下文件：

```
<rootDoc>
  <group id="13001L000001" box="13000B000001" operator="jsmith">
    <mail numMail="3A06049714560"/>
    <mail numMail="3A06049714561"/>
    <mail numMail="3A06049714562"/>
    <mail numMail="3A06049714565"/>
  </group>
  <group id="13001L000002" box="13000B000001" operator="jsmith">
    <mail numMail="3A06049714570"/>
    <mail numMail="3A06049714571"/>
    <mail numMail="3A06049714572"/>
    <mail numMail="3A06049714575"/>
  </group>
</rootDoc> 
```

理想情况下，对于每个文档，我希望能够获得`group`s 的集合，并为每个组获得 s 的`mail`集合

我不知道如何使用 XStream 来达到这个目的......是否可以使用 XStream 实现我想要做的事情，或者我是否需要 JaxB？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:17:27.263

XStream 将是“最简单”的恕我直言 - 本质上允许您快速构建一组 POJO 来映射文档，然后使用 XStream 配置将文档解析为它们。例如对于 rootDoc；

```
import java.io.Serializable;
import java.util.List;

public class Root implements Serializable {

private List<Group> groups;

//setters and getters...

} 
```

为集团

```
import java.io.Serializable;
import java.util.List;

public class Group implements Serializable {

private String id;

private String box;

private String operator;

private List<Mail> mailItems;

//setters and getters...

} 
```

和邮件项目

```
import java.io.Serializable;

public class Mail implements Serializable {

private String numMail;

//setters and getters...

} 
```

要为此对象设置 XStream，可以使用以下配置

```
 XStream xstream = new XStream(new StaxDriver());
    xstream.alias("mail", Mail.class);
    xstream.useAttributeFor(Mail.class,"numMail");
    xstream.alias("group", Group.class);
    xstream.useAttributeFor(Group.class, "box");
    xstream.useAttributeFor(Group.class, "id");
    xstream.useAttributeFor(Group.class, "operator");
    xstream.addImplicitCollection(Group.class, "mailItems");
    xstream.alias("rootDoc", Root.class);
    xstream.addImplicitCollection(Root.class, "groups"); 
```

并用它来阅读文档

```
Root result = (Root) xstream.fromXML(...source); 
```

现在您可以像使用任何父对象一样使用 Root POJO 并检索相应的组和邮件项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:17:15.177

XStream 主要用于 xml 的编组和解组，您可以将 xml 解组为 java 对象，然后运行这些对象并完成您的任务。

如果您想对数据“做出反应”，我宁愿建议使用对不同标签做出反应的 sax/stax 阅读器。

由于提到了 JaxB，它的作用几乎与 XStream 相同。从我的经验来看，我完全发现 XStream 更容易使用。但是，如果您想详细了解这些差异，请查看这篇文章： http: [//www.stackoverflow.com/questions/4230499/java-to-xml-conversions](http://www.stackoverflow.com/questions/4230499/java-to-xml-conversions)这篇文章还讨论了其他几种可能的解决方案与您相关。

# iphone - 如何在 iphone sdk 中包含文件 pcap.h？

> ID：14140334
> 
> 赞同：1
> 
> 时间：2013-01-03T13:58:49.027
> 
> 标签：iphone, ios, xcode

在他们使用[过的 pcap 的 Apple 文档中](http://developer.apple.com/library/ios/#documentation/System/Conceptual/ManPages_iPhoneOS/man3/pcap.3.html)

```
#include <pcap.h> 
```

但`#include <pcap.h>` 在我的项目中给出了“找不到文件”的错误。

是否需要导入任何库才能在我的项目中包含 pcap.h？但是苹果手册页没有提到它。问题是，我如何在我的项目中包含 pcap.h？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:24:01.113

该库`libpcap`在 iPhone OS 平台上不可用，但仅在 Mac OS X 平台上可用。

简短的回答，你不能在 iPhone 上按原样使用这个库，但你可以将一些功能移植到 iPhone。由于安全限制，除非系统越狱，否则您将无法在 iPhone 上执行数据包捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:28:46.160

我查看了您提到的 iPhone 应用程序 -NetStat-。据我了解，它为所有端口打开了侦听器。

您可以使用套接字帮助程序类并为必要的端口设置侦听器。

这是一个示例[http://code.google.com/p/entropydb/wiki/SocketWrapper](http://code.google.com/p/entropydb/wiki/SocketWrapper)

# java - 当行超过 2048 个字符时，Apache Telnet 客户端正在发送垃圾字符

> ID：14140340
> 
> 赞同：0
> 
> 时间：2013-01-03T13:59:24.963
> 
> 标签：java, telnet, apache-commons-net

```
create Lwresd_Profile lwresd_Profile_Id test description test lwresd_Dns_Server_Id test lwresd_Dns_Arguments test cache_Size 1 log_State 1 lwresd_Atributes 1 ars_Profile_Id wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww lwresd_Listen_Port 1 dns_Zone_Label_Id test 
```

变成：

```
create Lwresd_Profile lwresd_Profile_Id test description test lwresd_Dns_Server_Id test lwresd_Dns_Arguments test cache_Size 1 log_State 1 lwresd_Atributes 1 ars_Profile_Id wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G^G 
```

每当该行超过 2048 个字符时，它就会开始发送垃圾字符。Apache telnet API（org.apache.commons.net.telnet）中是否有任何选项来增加行大小限制。

这是用于发送命令的代码：

```
TelnetClient telnet = new TelnetClient();
telnet.connect(server, 8123);

public void write(String value) {
try {
PrintStream out = new PrintStream(telnet.getOutputStream());
out.println(value);
out.flush();
System.out.println(value);
}
catch (Exception e) {
e.printStackTrace();
}
}
String Command = "create " + entityName;

for (int k = 0; k < pSize; k++) {
    String str = pNames[k];
    str = str.replaceAll("(.)([A-Z])", "$1_$2");
    Command = Command + " " + str + " " +sTest.getParamValue(pNames[k]);
    }

  System.out.println("Command :" + Command);
  write(Command); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:35:26.027

解决了这个问题。这是telnet服务器的问题，限制为2048个字符。

# ios - 有没有办法防止iOS6杀死特定的任务进程？

> ID：14140341
> 
> 赞同：0
> 
> 时间：2013-01-03T13:59:28.843
> 
> 标签：ios, ipad

我知道 iOS 有自己的任务管理方法，用户可能永远不需要关心进程背景。但我的要求是始终保持程序活着，在任何情况下都不能被杀死。

有没有办法做到这一点，比如“LOCK”或其他已经存在的功能？我使用的是 iPad4 ios6.01 系统。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:18:33.850

不，那是不可能的。（如果你考虑一下也不应该。是什么阻止*每个*应用程序都说它不能被杀死？）

您可以获得的最接近的是 VoIP 应用程序，它们确实在后台运行并在它们死亡时自动重生。

另一种方法是像所有其他应用程序一样工作：当您的应用程序进入后台时，您保存状态，以便在它被杀死时恢复。iOS 6 甚至还有状态恢复功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:18:58.383

**简短而简单**
不，没有办法让您的应用程序“无法杀死”。

**更长一点**
如果您的应用程序需要在后台运行时接收位置更新，您可以使用 Apple 提供的标准方式来接收。

另外两个选项是：您的应用程序是 VoIP 应用程序（afaik 他们也会在系统启动时自动启动）或者您正在后台播放音频。在不了解 iOS 如何处理此类应用程序的太多细节的情况下，如果 iDevice 内存不足（或用户杀死它），它们可能会被杀死。但你可能已经知道了。

但是，正如您已经提到的，iOS 会自行管理所有内容，并将杀死在后台运行的应用程序以释放内存。此外，众所周知，用户可能随时使用 iOS 的任务切换器杀死您的应用程序。

并且不要尝试使用所描述的方法只是在后台运行任务。如果 Apple 发现了这件事，您的 App 将很快被 App Store 拒绝/下架。

# java - Spring 集成 - 入站通道适配器是多线程的吗？

> ID：14140342
> 
> 赞同：1
> 
> 时间：2013-01-03T13:59:31.373
> 
> 标签：java, multithreading, spring, spring-integration, timertask

我有以下弹簧集成配置 v1.0.4。

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:mail="http://www.springframework.org/schema/integration/mail"
xmlns:int="http://www.springframework.org/schema/integration"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
    http://www.springframework.org/schema/integration/mail
    http://www.springframework.org/schema/integration/mail/spring-integration-mail-2.1.xsd 
    http://www.springframework.org/schema/util 
    http://www.springframework.org/schema/util/spring-util-2.0.xsd">

    <util:properties id="javaMailProperties">
    <prop key="mail.imap.socketFactory.class">javax.net.ssl.SSLSocketFactory</prop>
    <prop key="mail.imap.socketFactory.fallback">false</prop>
    <prop key="mail.store.protocol">imaps</prop>
    <prop key="mail.debug">false</prop>
</util:properties>

 <mail:inbound-channel-adapter id="imapAdapter"
                                  store-uri="imaps://user:pass@domain:993/inbox"                                    
                                  channel="recieveEmailChannel"
                                  auto-startup="true"                                      
                                  java-mail-properties="javaMailProperties">
    <int:poller> 
    <int:interval-trigger initial-delay="1000" interval="2000"
    fixed-rate="true"/>
    </int:poller>
</mail:inbound-channel-adapter>

<int:channel id="recieveEmailChannel">        
    <int:interceptors>
        <int:wire-tap channel="logger"/>
    </int:interceptors>
</int:channel>

<int:logging-channel-adapter id="logger" level="DEBUG"/>

<int:service-activator input-channel="recieveEmailChannel" ref="emailReceiverService" method="receive"/>

<bean id="emailReceiverService" class="com.mycompany.DefaultEmailReceiverUtilService">
</bean> 
```

**DefaultEmailReceiverUtilService**

```
public class DefaultEmailReceiverUtilService implements
        EmailReceiverUtilService
{

    public void receive(Message<?> message)
    {
        //Processing the emails
    }
} 
```

**问题：**

1.  它是多线程的吗？或者电子邮件将以串行方式处理？如果是，那么如何使其成为多线程？
2.  当我的应用程序在 Eclipse 调试模式下运行时，我可以看到一些 Timer 任务线程，但是每个请求都会以顺序方式执行相同的计时器任务，而且我的线程数（Timer 任务）也在稳步增长。我可能会误解它。

如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:19:19.050

我认为你需要的是一个队列通道。您的 receiveEmailChannel 应该类似于：

```
<int:channel id="recieveEmailChannel">  
<int:queue/>
<int:interceptors>
    <int:wire-tap channel="logger"/>
</int:interceptors>
</int:channel> 
```

我相信您会知道如何定义队列通道。您当前拥有的点对点通道是同步的，一次只能传递 1 条消息。

当前，如果您要向该通道添加某些内容，它将等到服务激活器完成，而使用队列通道时，服务激活器应在检测到队列中的某些内容后立即启动一个新线程。

# sql - MS-Access 日期查询

> ID：14140345
> 
> 赞同：0
> 
> 时间：2013-01-03T13:59:42.093
> 
> 标签：sql, ms-access, ms-access-2003

我有一个工作正常的查询，除了在某些日期之间不计算。我最初的查询 SQL 是

```
SELECT 
Roster.UserID, 
SchedulingLog.Category, 
Sum(IIf([CatDetail] Like '*Gain*',[Value],0)) AS Gain,
Sum(IIf([CatDetail] Like '*Used*',[Value],0))+Sum(IIf([CatDetail] Like 'Adj*',[Value],0)) AS Used,
[Gain]+[Used] AS [Left]
FROM SchedulingLog INNER JOIN Roster ON SchedulingLog.UserID = Roster.UserID
WHERE (((SchedulingLog.EventDate)>DateSerial(Year(Date()),5,20)))
GROUP BY Roster.UserID, SchedulingLog.Category
HAVING (((SchedulingLog.Category) Like "DH*" Or (SchedulingLog.Category) Like "Comp*")); 
```

此 SQL 工作正常，直到新的一年。我在`WHERE`语句中修改了我的代码以使用`BETWEEN`限定符，但我无法让它工作。这是新的 SQL...

```
SELECT
Roster.UserID,
SchedulingLog.Category,
Sum(IIf([CatDetail] Like '*Gain*',[Value],0)) AS Gain,
Sum(IIf([CatDetail] Like '*Used*',[Value],0))+Sum(IIf([CatDetail] Like 'Adj*',[Value],0)) AS Used, 
[Gain]+[Used] AS [Left]
FROM SchedulingLog INNER JOIN Roster ON SchedulingLog.UserID = Roster.UserID
WHERE (((SchedulingLog.EventDate) Between DateSerial(Year(Date()-1),5,20) And DateSerial(Year(Date()),5,20)))
GROUP BY Roster.UserID, SchedulingLog.Category
HAVING (((SchedulingLog.Category) Like "DH*" Or (SchedulingLog.Category) Like "Comp*")); 
```

新 SQL 的目的是收集去年 5-20-2012 和今年 5-20-2013 之间的信息。我在哪里错过了船？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:04:38.753

你的错误在这里：

```
DateSerial(Year(Date()-1),5,20) 
```

它应该是：

```
DateSerial(Year(Date())-1,5,20) 
```

只需在即时窗口中输出两个语句即可查看差异。

您的代码 ( `Year(Date()-1)`) 从今天的日期（2013 年 1 月 3 日 - 1 = 2013 年 1 月 2 日！！）中减去 1 并从中获取年份（2013 年），因此结果为 20th May **2013**。
因此，您正在有效地加载 2013 年 5 月 20 日至 2013 年 5 月 20 日的数据！

我的代码 ( `Year(Date())-1`) 获取今天日期的年份 (2013) 并从中减去 1 (--> 2012)，因此结果是 20th May **2012**。

# facebook - Facebook 图形 api 不返回电子邮件

> ID：14140348
> 
> 赞同：10
> 
> 时间：2013-01-03T13:59:48.897
> 
> 标签：facebook, facebook-graph-api

我打电话

```
https://graph.facebook.com/<user_id>/?access_token=<valid_token> 
```

要不就

```
https://graph.facebook.com/me/?access_token=<valid_token> 
```

并取回不包含我需要的主要用户电子邮件的 json 对象。我为应用程序设置了电子邮件权限，但没有效果。有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T14:11:41.707

您还记得在登录请求中询问电子邮件权限吗？您可以通过在登录请求 (&scope=email) 中添加类似这样的范围参数来执行此操作：

```
https://www.facebook.com/dialog/oauth?client_id=YOUR_APP_ID&redirect_uri=YOUR_REDIRECT_URI&state=SOME_ARBITRARY_BUT_UNIQUE_STRING&scope=email 
```

[Facebook API 参考](http://developers.facebook.com/docs/howtos/login/server-side-login/#step4)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-03T14:10:39.237

您可能没有`email`访问令牌的权限。

您可以使用[Acess Token Debugger进行验证](https://developers.facebook.com/tools/debug)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-07T18:11:43.717

我相信您的问题是，即使在授予访问电子邮件的权限后，您也无法通过 Graph API 获取电子邮件信息。在较新的版本中，您需要将字段参数传递给 API 以获取其他信息，例如电子邮件。默认情况下，它只提供 id 和 name 作为响应。请在下面找到有关如何从图表中获取其他信息的示例：

```
https://graph.facebook.com/me?fields=id,email,first_name,gender,last_name,link,locale,name,timezone,updated_time,verified&access_token=<value of access_token>&debug=all 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-15T13:29:11.543

电子邮件可能未在 facebook 中验证。在这种情况下，facebook 不会通过 API 提供它。确保您的代码处理这种情况。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-03T11:06:03.877

自 API 版本 2.5 发布以来，您可以获得如下用户电子邮件：`https://graph.facebook.com/v2.5/me?fields=id,name,email`

# jquery - jQuery 脚本在 firefox 和 chrome 上工作，但在 ie 10 上没有使用

> ID：14140351
> 
> 赞同：1
> 
> 时间：2013-01-03T13:59:53.883
> 
> 标签：jquery, html, internet-explorer-10

以下代码是 IE 10 未正确拾取的 html 表单的头部部分。IE10 简单地忽略了 jQuery，并且显示了整个表单，即使它在 jQuery 代码中明确指示不应该这样做。此代码在 firefox/chrome/IE9/Safari 下完美运行。只是 IE10 导致了这个问题。非常感谢

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>company</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/style.css" type="text/css">   
    <script src="js/jquery-1.6.4.min.js" type="text/javascript"></script>
    <script src="js/script.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            /*Hiding the form */
            $(".1").css("display", "none");
            $(".2").css("display", "none");
            $(".3").css("display", "none");
            $(".4").css("display", "none");

            function goToByScroll(id){
                $('html,body').animate({scrollTop: $("#"+id).offset().top},'bottom');
            }

            $("input:radio[name=query-form][disabled=false]:last").attr('checked', true);

            $("input:radio[name=query-form]").click(function () {
                $(".1").css("display", "none");
                $(".2").css("display", "none");
                $(".3").css("display", "none");
                $(".4").css("display", "none");

                $("#country").click(function() {
                    $("html, body").animate({ scrollTop: $(document).height() }, "slow");
                    return false;
                });

                goToByScroll("country");
                if ($("#option1").is(":checked")) 
                    $(".1").show("fast");
                else if ($("#option2").is(":checked")) 
                    $(".2").show("fast");
                else if ($("#option3").is(":checked")) 
                    $(".3").show("fast");
                else if ($("#option4").is(":checked")) 
                    $(".4").show("fast");

            });
        });     
    </script>

    <!--[if lt IE 8]> 
        <div style='clear:both; text-align:center; position:relative;'><a href="http://www.microsoft.com/windows/internet-explorer/default.aspx?ocid=ie6_countdown_bannercode"><img src="http://storage.ie6countdown.com/assets/100/images/banners/warning_bar_0000_us.jpg" border="0" alt="" /></a></div>  
    <![endif]-->
    <!--[if lt IE 9]>
        <script type="text/javascript" src="js/html5.js"></script>
        <link rel="stylesheet" href="css/ie.css" type="text/css" media="screen">   
    <![endif]-->
</head> 
```

我们用这个以前的代码解决了这个问题，现在你能告诉我为什么下面的代码在 IE10 中不起作用。这与上面非常相似，但是，这次我们处理的是下拉菜单。同样，此代码在所有其他浏览器中都能完美找到。IE10 似乎真的很迂腐。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Company</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/style.css" type="text/css">   
    <script src="js/jquery-1.6.4.min.js" type="text/javascript"></script>
    <script src="js/script.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            /*Hiding the form */
            $(".install_download").css("display", "none");
            $(".hosted_install").css("display", "none");
            $(".reseller_install").css("display", "none");

            function goToByScroll(id){
                $('html,body').animate({scrollTop: $("#"+id).offset().top},'bottom');
            }

                goToByScroll("country");

                $(".subject_category").change(function(){

                    $(".install_Download").css("display", "none");
                    $(".hosted_install").css("display", "none");
                    $(".reseller_install").css("display", "none");

                    switch ($(".subject_category option:selected").text()) {                
                        case "General Enquiry":
                            $(".General_Enquiry").show("fast");
                            break;
                        case "Install/Download":
                            $(".install_download").show("fast");
                            goToByScroll("message");
                            break;
                        case "Hosted Install":
                            $(".hosted_install").show("fast");
                            goToByScroll("message");
                            break;
                        case "Solution Provider - Install":
                            $(".reseller_install").show("fast");
                            goToByScroll("message");
                            break;
                    }
                });
        });     
    </script>

    <!--[if lt IE 8]> 
        <div style='clear:both; text-align:center; position:relative;'><a href="http://www.microsoft.com/windows/internet-explorer/default.aspx?ocid=ie6_countdown_bannercode"><img src="http://storage.ie6countdown.com/assets/100/images/banners/warning_bar_0000_us.jpg" border="0" alt="" /></a></div>  
    <![endif]-->
    <!--[if lt IE 9]>
        <script type="text/javascript" src="js/html5.js"></script>
        <link rel="stylesheet" href="css/ie.css" type="text/css" media="screen">   
    <![endif]-->
</head> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:04:41.407

基本上 CSS 类名称**必须**以下划线 (_)、破折号 (-) 或字母 (a–z) 开头，而不是您的情况下的数字，后跟任意数量的破折号、下划线、字母或数字. 有一个问题：如果第一个字符是破折号，第二个字符**必须**是字母或下划线，并且名称必须至少有 2 个字符长：

```
-?[_a-zA-Z]+[_a-zA-Z0-9-]* 
```

以破折号或下划线开头的标识符通常保留用于特定于浏览器的扩展，如`-moz-opacity`.

由于包含转义的 Unicode 字符（没有人真正使用），这一切都变得更加复杂。

请注意，根据[CSS 语法](http://www.w3.org/TR/CSS21/grammar.html#scanner)，以两个破折号开头的规则（例如`--indent1`）是无效的。但是，我很确定我已经在实践中看到了这一点。

# qt - 从属模式下的 Mplayer - 多个实例

> ID：14140355
> 
> 赞同：2
> 
> 时间：2013-01-03T14:00:05.233
> 
> 标签：qt, qprocess, mplayer

我正在开发一个显示各种媒体的 Qt 应用程序。目前视频文件存在问题。由于在使用带 ATI 显卡加速的 Phonon 时存在一些问题，我们目前在从属模式下使用 mplayer 和 vaapi。

但是，加载文件存在问题。每次显示新文件时，mplayer 需要一些时间（大约 2 秒）来加载它，只显示黑屏。由于大多数文件都很短（10 - 25 秒），因此非常引人注目。第一个问题是 - 有人知道如何告诉 mplayer 在播放前一个文件时开始加载一个文件吗？可能吗？

第二个：我正在考虑创建两个 mplayer 实例，告诉一个加载第一个文件，另一个加载第二个文件，然后告诉第二个暂停。第一个文件完成后，我会取消暂停第二个文件。我正在使用 QProcesses 但现在第二个 mplayer 在第二个完成之前不会启动，即使我没有暂停它。在下面的代码中，player1 和 player2 是 QProcess 对象，player2 在 player1 完成之前不会开始做任何事情。所有“readyRead ...”插槽都是我解析 mplayer 输出的函数。到目前为止，他们并没有做太多，只是将输出打印到 qDebug()。

你知道为什么这两个过程不一起开始吗？如果我在 player1 中使用例如 mplayer，在 player2 中使用 vlc，它可以正常工作，我可以从命令行运行两个 mplayer 实例。

```
bool Player::run(){
    QStringList args;
    args << "-va" << "vaapi" << "-vo" << "vaapi:gl" << "-noborder" << "-framedrop" << "-v" << "-slave" << "-idle";
    connect(&player1, SIGNAL(readyReadStandardError()), this, SLOT(readyReadErr1()));
    connect(&player1, SIGNAL(readyReadStandardOutput()), this, SLOT(readyReadOut1()));
    connect(&player2, SIGNAL(readyReadStandardError()), this, SLOT(readyReadErr2()));
    connect(&player2, SIGNAL(readyReadStandardOutput()), this, SLOT(readyReadOut2()));
    player1.start("mplayer", args << "-geometry" << "860x540+0+0");
    player2.start("mplayer", args << "-geometry" << "860x540+800+500");
    player1.write("loadfile w_1.avi 1\n");
    player2.write("loadfile w_2.avi 1\n");

    if (!player1.waitForStarted(5000))
    {
        return false;
    }
    player2.waitForStarted(5000);

    player1.waitForFinished(50000);

    player2.waitForFinished(10000);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:57:28.720

我不知道您是否同时找到了解决问题的方法，但是我正在从 bash 脚本中执行类似的操作，并且启动多个实例在后台运行时效果很好。双 mplayer 技巧也不错，我想我可能不得不使用它。无论如何，几个小时后我的 bash hack，但请注意，FIFO 目前只为其中一个创建，我正在考虑一个好的命名方案：

```
#!/bin/bash

set -e

set -u

# add working directory to $PATH
export PATH=$(dirname "$0"):$PATH

res_tuple=($(xres.sh))
max_width="${res_tuple[0]}"
max_height="${res_tuple[1]}"

echo "w = $max_width, h = $max_height"

mplayer() {
  /home/player/Downloads/vaapi-mplayer/mplayer \
    -vo vaapi \
    -va vaapi \
    -fixed-vo \
    -nolirc \
    -slave \
    -input file="$5"\
    -idle \
    -quiet \
    -noborder \
    -geometry $1x$2+$3+$4 \
    { /home/player/Downloads/*.mov } \
    -loop 0 \
    > /dev/null 2>&1 &
}

mfifo() {
  pipe='/tmp/mplayer.pipe'

  if [[ ! -p $pipe ]]; then
    mkfifo $pipe
  fi
}

half_width=$(($max_width / 2))
half_height=$(($max_height / 2))

mfifo

mplayer $half_width $half_height 0 0 $pipe 
mplayer $half_width $half_height $half_width 0 $pipe
mplayer $half_width $half_height 0 $half_height $pipe
mplayer $half_width $half_height $half_width $half_height $pipe 
```

# c# - 如何使用先前目录的 URL 创建操作链接？

> ID：14140357
> 
> 赞同：0
> 
> 时间：2013-01-03T14:00:07.957
> 
> 标签：c#, model-view-controller, url, directory, actionlink

所以我有这个动作链接

```
@Html.ActionLink("Logout","LogoutConfirmation","Login") 
```

这将我带到一个网址，例如：
**mysite.com/myaccount/Login/LogoutConfirmation**
但是该文件夹不位于“myaccount”中，它只是我在此网页上的当前位置。如何创建操作链接以将我带到：
**mysite.com/Login/LogoutConfirmation**
而不是文件夹“myaccount”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:21:29.327

正如我的评论中所述，只需使用重载方法来包含一个空的`Area`.

`@Html.ActionLink("Logout","logoutConfirmation", "Login", new {Area=""},null)`

# c# - 事件 100，System.ServiceModel.Activation 4.0.0

> ID：14140361
> 
> 赞同：6
> 
> 时间：2013-01-03T14:00:19.943
> 
> 标签：c#, .net, iis

在过去的几周里，我看到 Windows 日志中出现错误，引用以下内容：

```
The description for Event ID 100 from source System.ServiceModel.Activation 4.0.0.0 cannot be found. Either the component that raises this event is not installed on your local computer or the installation is corrupted. You can install or repair the component on the local computer.

If the event originated on another computer, the display information had to be saved with the event.

The following information was included with the event: 

System.InvalidOperationException: Etw registration failed with error code e.
   at System.Runtime.Diagnostics.DiagnosticsEventProvider..ctor(Guid providerGuid)
   at System.Runtime.Diagnostics.EtwProvider..ctor(Guid id)
   at System.Runtime.Diagnostics.DiagnosticTrace.CreateEtwProvider(Guid etwProviderId)
   at System.Runtime.Diagnostics.DiagnosticTrace..ctor(String traceSourceName, Guid etwProviderId)
w3wp
1540 
```

这是一个 windows server 2008，在 IIS 和 .NET 4 下运行站点

这些错误现在每 30 秒左右发生一次，我不知道它们来自哪里。

所有站点都在默认的 ASP.NET v4.0 应用程序池下运行。

其他人以前有这个错误吗？

我真的不想做任何像.NET 修复这样的事情，除非我必须这样做，因为这是一个实时服务器并且它上面的站点正在使用中。

谢谢你的帮助。

# riak - 为什么有些人说 Riak 最终是一致的

> ID：14140363
> 
> 赞同：-4
> 
> 时间：2013-01-03T14:00:25.813
> 
> 标签：riak, eventual-consistency

在 Riak 中，默认数据桶被复制到 3 个不同的节点 (N=3)。此外，在读取或写入请求被认为成功之前必须响应的副本数量是 2 个节点（R=2，W=2）。

我们知道当 N 小于或等于 R+W 时，Riak 提供了强一致性。因此通过这些默认值，Riak 提供了强一致性（如 MySQL）。我无法理解为什么有些人说 Riak 不是强一致性，它提供了最终一致性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:45:12.440

R 和 W 值（连同 PW（主要写入）、PR（主要写入）和 DW（持久写入））允许您根据应用程序的要求调整一致性。尽管这可以保证正常操作期间的一致性，但由于 Riak 如何处理网络分区等故障场景，它仍然最终保持一致。

如果我们假设我们有一个由 5 个节点组成的集群，其中 N 设置为 3，并且在一段时间内将 2 个节点与其余节点进行分区，那么所有节点仍然能够根据前面提到的参数同时接受读取和写入。如果我们进一步假设 PR 和 PW 设置为 0，则可以在分区就位时更新分区两侧的记录。这可能会导致在集群连接恢复之前无法解决的不一致问题，从而使系统最终保持一致。

PR 和 PW 允许用户指定必须存在一定数量的主分区所有者才能使读/写成功，如果这些设置为 > 0 的值，则分区集群可能不会允许在网络分区持续期间对所有节点上的所有对象进行读/写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:03:46.840

Riak 和类似系统提供的更好的术语可能是*可调*一致性，因为它们提供了在一致性、可用性和分区容限之间进行权衡决策的能力。相比之下，MySQL 和其他 RDBMS 系统竭尽全力*保证*一致性。这是一项昂贵的保证，并不总是物有所值。

# iphone - 导航反向推送动作

> ID：14140365
> 
> 赞同：-1
> 
> 时间：2013-01-03T14:00:32.313
> 
> 标签：iphone, objective-c

在 ViewController 中，我怎么知道反向推送发生的时间？（和prepareForSegue方法一样）导致这个（prepareForSegue）没有响应这个动作（反向推送）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:03:29.747

实现[viewWillDisappear:](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/viewWillDisappear%3a)。如果[self.isMovingFromParentViewController](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/isMovingFromParentViewController)为 YES，那么您的 View Controller 将被弹出。

```
- (void) viewWillDisappear:(BOOL)animated {
    if ( self.isMovingFromParentViewController ) {
        // ...
        NSLog(@"%@",  self.navigationController.topViewController ) ;
        // ...
    }
} 
```

# wpf - wpf 在集合中搜索

> ID：14140370
> 
> 赞同：-1
> 
> 时间：2013-01-03T14:00:48.167
> 
> 标签：wpf, search, collections

如何搜索我的收藏？

不能让它工作......我不只需要这样做：

```
 Contacts c = new Contacts();

        if (c.Contact_name == "Test") {
            MessageBox.Show("exists!");
        } 
```

不工作:-)

```
public ObservableCollection<Contacts> contacts = new ObservableCollection<Contacts>();

    class Contacts
{
    public string Contact_id { get; set; }
    public string Contact_name { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:03:35.600

您正在设置`c`一个新实例，`Contacts`该实例没有将`Contact_name`属性设置为任何东西......

如果您尝试在集合中搜索特定联系人，最简单的方法可能是使用以下 Linq 语句，该语句将返回集合中与您的条件匹配的第一个对象，或者`null`如果没有找到对象

```
contacts.FirstOrDefault(p => p.Contact_name == "Test"); 
```

还有其他 Linq 扩展可能更适合您，这取决于您想要什么，例如`.Exists()`您是否只想知道某个项目是否存在

如果您不使用`Linq`，最简单的方法是使用循环

```
foreach(var c in contacts)
{
    if (c.Contact_name == "Test") {
        MessageBox.Show("exists!");
    }
} 
```

# user-interface - 如何将您的 Photoshop 设计放入您的 Windows 8 应用程序中？

> ID：14140380
> 
> 赞同：0
> 
> 时间：2013-01-03T14:01:24.657
> 
> 标签：user-interface, windows-8

有人可以向我解释，或指出一些不错的文章，我如何使用我的 Photoshop 设计并将其正确实施到我的应用程序中？我想为应用程序使用 Xaml/VB。我制作了一个不错的游戏设计，我想使用它，但我不明白如何将这个设计用于我的 xaml 应用程序。边框应始终位于屏幕的边框上。

图片样本：[http ://social.msdn.microsoft.com/Forums/getfile/215154](http://social.msdn.microsoft.com/Forums/getfile/215154)

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:30:27.493

最简单的方法是使用具有“从 Photoshop 导入”选项的 Blend。

1.  首先，下载 Blend。尽管它安装了适用于 Windows 8 的免费版本的 Visual Studio Express 2012，它位于页面[的](http://aka.ms/JenVS2012)中间，以蓝色显示，但该版本不支持导入器。您可以使用 Expression Blend 4 或[Expression Blend for Silverlight 5 预览](http://www.microsoft.com/en-us/download/details.aspx?id=9503)来导入您的 Photoshop 图像，然后将生成的画布复制到 Blend for Visual Studio 2012。
2.  然后，打开混合。取消所有向导，或创建一个项目然后关闭它。然后，在“文件”菜单下，您应该会看到一个“导入”选项，它允许您导入 Adob​​e Photoshop 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:02:37.853

[这篇](http://msdn.microsoft.com/en-us/library/hh134795(v=expression.40).aspx)关于“导入 Adob​​e Photoshop 文件”的文章可能会有所帮助。
或者，如果可以接受绕道，这里还有[另一个](http://www.mikeswanson.com/xamlexport/)用于将 Adob​​e Illustrator 转换为导出 WPF 和 Silverlight 兼容的 XAML。
由于只需要转换后的 XAML 文件，因此项目是 WPF 项目还是 Windows 8 项目并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:33:25.620

在我给出答案之前，需要注意一件事：MS 设计指南建议您避免将自己的 chrome 添加到应用程序中 - 设计理念是您不需要这样做。

也就是说，您可以通过将图像分成 8 个部分并在应用程序 XAML 中具有覆盖网格来实现此目的。这类似于您可能希望在 HTML 中布置相同内容的方式。

```
<!-- content for the game here -->
<Grid Background="Transparent">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="30" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="30" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="30" />
        <RowDefinition Height="*" />
        <RowDefinition Height="30" />
    </Grid.RowDefinitions>
    <Image Height="30" Width="30" Source="TopLeftSlice.png" />
    <Image Height="30" Grid.Column="1" Source="TopMiddleSlice.png" />
    <Image Height="30" Width="30" Grid.Column="2" Source="TopRightSlice.png" />
    <Image Width="30" Grid.Row="1" Source="MiddleLeftSlice.png" />
    <Image Width="30" Grid.Row="1" Grid.Column="2" Source="MiddleRightSlice.png" />
    <Image Height="30" Width="30" Grid.Row="2" Source="BottomLeftSlice.png" />
    <Image Height="30" Grid.Row="2" Grid.Column="1" Source="BottomMiddleSlice.png" />
    <Image Height="30" Width="30" Grid.Row="2" Grid.Column="2" Source="BottomRightSlice.png" />
</Grid> 
```

您需要弄乱图像上的宽度、高度和拉伸属性以使它们看起来正确，但只要在您的页面上正确定义了这些属性，它就应该显示为覆盖，并且您之前定义的内容应该显示通过间隙/透明胶片。

# ruby - 使用 MongoDB map/reduce 生成 GeoJSON 热图

> ID：14140382
> 
> 赞同：1
> 
> 时间：2013-01-03T14:01:28.900
> 
> 标签：ruby, mongodb, mapreduce, mongoid, heatmap

我正在使用以 GeoJSON 作为输入的 javascript 地图来可视化年度英国电影放映。你可以在这里看到它适用于 2011 年的数据：http: [//screened2011.herokuapp.com](http://screened2011.herokuapp.com)

GeoJSON 的生成效率非常低 - 每个“图块”通常需要 5 秒以上。

我有一个 Ruby 应用程序，它在 MongoDB 中查询边界框内的一组“筛选”（由 JS 请求），然后生成一个二维数组，表示在每个 16x16 中发生的筛选总数。这显然是瓶颈——它正在攻击服务器并拉下所有这些放映。

我想用一个 map/reduce 查询替换它，该查询将边界框中的所有筛选计数聚合到一个 16x16 的值数组中，但我没有取得太大的成功——这是我第一个 map/reduce 的任务！

这是我的代码的简化版本，其中删除了不相关的内容（这很糟糕，如果这不是即将结束的黑客攻击，我会重构）：

```
get :boxed, :map => "/screenings/year/:year/quadrant/:area/bbox/:bbox", :provides => [:json, :jsonp], :cache => false do
    box = parameter_box(params[:bbox]) # returns [[minx,miny],[maxx,maxy]]
    year = params[:year].to_i
    screenings = Screening.where(:location.within(:box) => box).where(:year => year)
    jsonp Screening.heatmap(screenings, box, 16)
 end

def self.heatmap screenings, box, scale
  grid = []
  min_x = box[0][0]
  min_y = box[0][1]
  max_x = box[1][0]
  max_y = box[1][1]
  box_width = max_x.to_f - min_x.to_f
  box_height = max_y.to_f - min_y.to_f

  return [] if box_width == 0 || box_height == 0

  # Set up an empty GeoJSON-style array to hold the results
  scalef = scale.to_f
  (0..(scale - 1)).each do |i| 
    grid[i] = []
    (0..(scale - 1)).each do |j| 

      box_min_x = min_x + (i * ( box_width / scalef  ))
      box_max_x = min_x + ((i + 1) * ( box_width / scalef  ))
      box_min_y = min_y + (j * ( box_height / scalef  ))
      box_max_y = min_y + ((j + 1) * ( box_height / scalef  ))

      grid[i][j] = { 
        :count => 0,
        #:id => "#{box_min_x}_#{box_max_x}_#{box_min_y}_#{box_max_y}",
        :coordinates => [
          [
            [box_min_x,box_min_y], [box_min_x, box_max_y], [box_max_x, box_max_y], [box_max_x, box_min_y], [box_min_x,box_min_y]
          ]
        ]
      } 
    end
  end

  # This loop is the bottleneck and I'd like to replace with a map-reduce
  screenings.only(:location, :total_showings).each do |screening|
    x = (scale * ((screening.location[0] - min_x) / box_width)).floor
    y = (scale * ((screening.location[1] - min_y) / box_height)).floor
    raise if x > (scale - 1)
    raise if y > (scale - 1)
    grid[x][y][:count] += screening.total_showings.to_i
  end

  # This converts the resulting 16x16 into GeoJSON
  places = []
  grid.each do |x|
    x.each do |p|
      if p[:count].to_i > 0
        properties = {}
        properties[:total_showings] = p[:count]
        places << {
          "id" => p[:id],
          "type" => "Feature",
          "geometry" => {
            "type" => "Polygon",
            "coordinates" => p[:coordinates]
          },
          "properties"=> properties
        }
      end
    end
  end

  {
    "type" => "FeatureCollection",
    "features" => places
  }
end 
```

我正在使用 Mongoid，所以我可以将 mapreduce 链接到筛选查询，我希望这会大大加快这个过程 - 但是我应该如何让类似下面的东西传递给这个函数呢？：

```
[
  [1,20000,30,3424,53,66,7586,54543,76764,4322,7664,43242,43,435,32,643],
  ...
] 
```

...基于此结构中的几百万条记录（基本上是对边界框内的每个记录求和）：

```
{"_id"=>BSON::ObjectId('50e481e653e6dfbc92057e8d'),
 "created_at"=>2013-01-02 18:52:22 +0000,
 "ended_at"=>Thu, 07 Jun 2012 00:00:00 +0100,
 "events"=>["10044735484"],
 "film_id"=>BSON::ObjectId('4f96a91153e6df5ebc001afe'),
 "genre_ids"=>[],
 "location"=>[-2.003309596016, 52.396317185921],
 "performance_id"=>"9001923080",
 "specialised"=>false,
 "started_at"=>Fri, 01 Jun 2012 00:00:00 +0100,
 "total_showings"=>1,
 "updated_at"=>2013-01-02 18:52:22 +0000,
 "venue_id"=>BSON::ObjectId('4f9500bf53e6df004000034d'),
 "week"=>nil,
 "year"=>2012} 
```

先谢谢各位了！

# osx-lion - 为什么打开终端窗口时显示 -bash: PATH: command not found？

> ID：14140383
> 
> 赞同：1
> 
> 时间：2013-01-03T14:01:31.397
> 
> 标签：osx-lion, epd-python

我安装了 EPD Free 7.3.2，它运行良好，直到我想修改 PATH 以指向我的 Python 脚本所在的位置。我放弃了，恢复到原来的 .bash_profile 文件。

```
# Setting PATH for EPD_free-7.3-2
# The orginal version is saved in .bash_profile.pysave
PATH = "/Library/Frameworks/Python.framework/Versions/Current/bin:${PATH}"
export PATH 
```

启动终端时，我得到这个：

```
Last login: Thu Jan  3 08:50:20 on ttys000
-bash: PATH: command not found 
```

但是，我能够运行 iPython 和 EPD 附带的所有库，没有问题。任何人都知道“PATH：找不到命令”的问题是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T14:04:36.863

周围的空间`=`是个问题。使用此作业：

```
PATH="/Library/Frameworks/Python.framework/Versions/Current/bin:${PATH}" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T14:04:43.193

您需要删除周围的空格`=`：

```
PATH="/Library/Frameworks/Python.framework/Versions/Current/bin:${PATH}" 
```

否则，您将尝试`PATH`使用`=`and`"/Library..."`作为其参数运行（不存在的）命令。

# google-maps - 在我的谷歌地图上，当我缩小到 10 级以上时，我的所有标记都消失了

> ID：14140385
> 
> 赞同：0
> 
> 时间：2013-01-03T14:01:32.737
> 
> 标签：google-maps, maps

我的谷歌地图在高于 10 的缩放级别下工作正常，但如果我缩小我的标记就会消失。我看不到错误在哪里。已尝试使用 v3 和 v2。也从 .png 标记更改为 .gif。尝试在地图上使用更少的点。

它在所有浏览器中都存在同样的问题。

感谢您的帮助...

[http://test.onionring.co.uk/map-towns.asp?region=柴郡](http://test.onionring.co.uk/map-towns.asp?region=Cheshire)

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:56:45.400

这是你的问题（标记管理器正在做你告诉它做的事情）：

```
manager.addMarkers(batch, 11); 
```

根据[文档](http://gmaps-utility-library-dev.googlecode.com/svn/tags/markermanager/1.1/docs/reference.html)，11 是最小缩放（标记将出现的第一个缩放）。

```
addMarker(marker:Marker, minZoom:Number, opt_maxZoom:Number) 
```

# mysql - MySQL - 根据一件事向某些用户显示行而不向其他用户显示行

> ID：14140387
> 
> 赞同：1
> 
> 时间：2013-01-03T14:01:41.223
> 
> 标签：mysql

我在数据库中有 10 个用户。每个用户都可以发布任意数量的链接。每个用户都可以看到其他用户发布的所有链接。

如果一个用户点击一个链接，例如：google.com，他将不会再看到它，但那些没有点击该链接的用户，他们仍然可以点击该链接。

为此，我有 2 个表（也许它们构建得很糟糕，除了它们与外键无关）。

```
linksPosted

id   |   link   |   user
1        g.com      john
2        h.com      patrick
3        i.com      stephan
4        k.com      bart
....

clicksMade

id   |   link   |   user
1        g.com      jack
2        h.com      nick
... 
```

因此，有一个主页，每个用户都可以看到其他用户发布的链接。每次发布链接时，都会将其添加到 linksPosted 表中。好的。

然后，例如，Jack 单击了 g.com，因此他将无法再次单击 g.com。但是，由于尼克没有点击 g.com，他将能够点击它。

如何在 SQL 查询中向某些用户显示一些行而不向其他用户显示一些行？

**我试过这个没有我想要的结果：**

```
Select * from linksPosted Except Select * from ClicksMade
SELECT * FROM linksPosted WHERE id NOT IN(SELECT id FROM ClicksMade);
SELECT t1.* FROM linksPosted AS t1 LEFT OUTER JOIN ClicksMade AS t2 ON t1.word = t2.word AND 1.user = t2.user WHERE t2.id IS NULL 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:05:52.513

尝试这个 ：：

```
Select lp.link
from 
linkposted lp
left join 
(Select cm.id from clickMade where userId= ?
) as tempComment
cm on (lp.id=tempComment.id)
where cm.id is null 
```

或者

```
 Select lp.link
    from 
    linkposted lp
where id not in
    (
     Select cm.id from clickMade where userId= ?
    ) 
```

# c++ - 使用 100% CPU 的 C++ 编译代码

> ID：14140390
> 
> 赞同：0
> 
> 时间：2013-01-03T14:01:51.310
> 
> 标签：c++, memory, memory-management

我有以下代码（它获取所有进程，然后在其中搜索正则表达式模式，用于更大的恶意软件检测个人项目的代码），该代码执行我想要的，但唯一的问题是它使用 100% 的 CPU，怎么办我做错了吗？内存分配不好？我用 MS Visual Studio 2010 (cl.exe /EHsc mycode.cpp) 编译它

```
#include <windows.h>
#include <stdio.h>
#include <stdlib.h>
#include <tchar.h>
#include <tlhelp32.h>
#include <psapi.h>
#include <iostream>
#include <fstream>
#include <string>
#include <algorithm>
#include <iterator>
#include <regex>

using namespace std;

#pragma comment(lib, "psapi.lib") 

void PrintProcessNameAndID(DWORD);
void find_locs(HANDLE process);
void ListProcesses();

int main(int argc, char **argv) {
    ListProcesses();
}

void find_locs(HANDLE process) {

    unsigned char *p = NULL;
    MEMORY_BASIC_INFORMATION info;

    for ( p = NULL;
        VirtualQueryEx(process, p, &info, sizeof(info)) == sizeof(info);
        p += info.RegionSize )
    {
        std::string buffer;

        if (info.State == MEM_COMMIT &&
            (info.Type == MEM_MAPPED || info.Type == MEM_PRIVATE))
        {
            DWORD bytes_read;

            buffer.resize(info.RegionSize);
            ReadProcessMemory(process, p, &buffer[0], info.RegionSize, &bytes_read);
            buffer.resize(bytes_read);

            const std::tr1::regex rx("([\\w-+]+(?:\\.[\\w-+]+)*@(?:[\\w-]+\\.)+[a-zA-Z]{2,7})");
            std::tr1::match_results<std::string::const_iterator> res; 
            std::tr1::regex_search(buffer, res, rx);

            ofstream myfile;
            myfile.open ("proc.txt", ios::app);

            for (unsigned int i=0; i<res.size(); ++i)
            {
                std::cout << res[i] << std::endl;
                myfile << res[i] << "\n";
            }

            myfile.close();
        }
    }
}

void ListProcesses()
{
    DWORD aProcesses[1024];
    DWORD cbNeeded;
    DWORD cProcesses;
    unsigned int i;

    if (!EnumProcesses(aProcesses,sizeof(aProcesses),&cbNeeded))
        return;

    cProcesses = cbNeeded / sizeof(DWORD);

    for ( i = 0; i < cProcesses; i++ )
    {
        PrintProcessNameAndID(aProcesses[i]);
    }
}

void PrintProcessNameAndID(DWORD processID)
{
    TCHAR szProcessName[MAX_PATH]; // = TEXT("<unknown>");

    HANDLE hProcess = OpenProcess(PROCESS_QUERY_INFORMATION | PROCESS_VM_READ, FALSE, processID);

    if (NULL != hProcess)
    {
        HMODULE hMod;
        DWORD cbNeeded;

        if (EnumProcessModules(hProcess, &hMod, sizeof(hMod),
             &cbNeeded))
        {
            GetModuleBaseName(hProcess, hMod, szProcessName,
                               sizeof(szProcessName)/sizeof(TCHAR));
        }
    }
    _tprintf(TEXT("pid: %u file: %s\n"), processID, szProcessName);
    find_locs(hProcess);
    CloseHandle(hProcess);
} 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T14:02:44.500

程序占用 100% 的处理器没有任何问题......（我不知道如何将这个答案扩展到此之外）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T14:07:40.447

任何程序在没有调用的情况下连续运行`Sleep`（对操作系统说“我现在已经完成了”）将尝试尽可能快地运行，在前一个循环之后请求下一次循环迭代。它需要每个可用的 CPU 周期，因为您已请求它这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T14:10:51.770

几件事：

以 100% 运行的 CPU 并不少见。如果您正在运行计算密集型任务（例如素数计算），则尤其如此。例如：

[如何从 C 程序中获得 100% 的 CPU 使用率](https://stackoverflow.com/questions/9244481/how-to-get-100-cpu-usage-from-a-c-program)

或者，在您的情况下可能更适用的是，这是由于与 Windows 本身、您的硬件组合和配置相关的事物的无数组合：

[http://www.techradar.com/us/news/computing/why-is-my-cpu-running-at-100-710254](http://www.techradar.com/us/news/computing/why-is-my-cpu-running-at-100-710254)

总而言之，这不是太担心的事情。*一般来说*，就是这样。

# regex - nodejs regex - 需要帮助来理解代码

> ID：14140392
> 
> 赞同：0
> 
> 时间：2013-01-03T14:01:52.893
> 
> 标签：regex, node.js

您能否解释一下这段代码的作用（来自 Blair Mitchelmore jquery.query-2.1.6.js）？

```
 var parse = function(path) {
      var m, rx = /\[([^[]*)\]/g, match = /^([^[]+?)(\[.*\])?$/.exec(path), base = match[1], tokens = [];
      while (m = rx.exec(match[2])) tokens.push(m[1]);
      return [base, tokens];
    }; 
```

我刚刚开始学习 nodejs 正则表达式，我想确保我理解上面的代码。

谢谢，李

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:34:22.533

```
var m, rx = /\[([^[]*)\]/g, 
```

一个变量被声明，一个正则表达式被定义并存储为第二个变量。

```
match = /^([^[]+?)(\[.*\])?$/.exec(path), 
```

仍在变量声明块中，此正则表达式在函数参数上执行：

*   `/^`正则表达式分隔符，字符串开头
*   `([^[]+?)`至少匹配一个字符，尽可能少，不匹配任何左方括号。捕获。
*   `(\[.*\])?`匹配一个左方括号，任何东西，然后是一个右方括号。与括号一起捕获。
*   `$/`字符串结尾，正则表达式分隔符。

此正则表达式将分隔`path`两个参数。第一个方括号之前的任何内容，以及任何方括号内的任何内容（强制）。

```
base = match[1], tokens = []; 
```

假设正则表达式匹配，这将调用第一个匹配“base”，并将创建一个名为“tokens”的空数组。

```
while (m = rx.exec(match[2]))
  tokens.push(m[1]); 
```

这将重复匹配方括号上第一个定义的正则表达式，并从捕获的值构建一个数组。正则表达式匹配：

*   `\[`一个左方括号，
*   `([^[]*)`不包括左方括号的任何其他内容（已捕获），
*   `\]`和一个右方括号

此时，假设`path`参数格式正确，`base`保存 中方括号之前的部分`path`，并`tokens`保存方括号的内容。

```
return [base, tokens]; 
```

将所说的两个变量作为二元素数组返回（我不会在这里判断编码风格；假设我更喜欢一个对象）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:22:28.683

您是否好奇实际代码的作用或正则表达式的作用？

该代码非常基本，但这里有一个解释，可能匹配您的两个正则表达式：

`/\[([^[]*)\]/g`-> [http://regex101.com/r/uP0hR6](http://regex101.com/r/uP0hR6)

`/^([^[]+?)(\[.*\])?$/`-> [http://regex101.com/r/wG3aG4](http://regex101.com/r/wG3aG4)

我希望这有帮助！

# c# - 防止 OnClientClick 到 Button 的 newtab 以触发页面上的其他点击

> ID：14140395
> 
> 赞同：1
> 
> 时间：2013-01-03T14:02:10.293
> 
> 标签：c#, asp.net

我正在使用一个`Button`in`Web form`并且`onclick`事件应该在新选项卡中打开一个报告。我正在使用`onclientclick`的属性，`Button`但它启用所有其他`Button`或`Radio Button`在新选项卡中重定向。如何防止这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:31:26.207

在按钮单击而不是 OnClientClick 上使用此代码

```
btnPrint.Attributes.Add("onclick", "window.open('yourpage.aspx'); return false;"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-14T14:34:58.463

如果您启用 OnClientClick 在新选项卡中打开，则必须在打开窗口后恢复此功能。

你有 2 个选项

1.  单击窗口上的任何其他按钮

2.  片刻之后 setTimeout()

在以下范围内使用此功能/代码：

```
function ResetTarget() {
   window.document.forms[0].target = '';
} 
```

# c# - 我应该缩放我的方程输出数据吗？

> ID：14140398
> 
> 赞同：4
> 
> 时间：2013-01-03T14:02:27.103
> 
> 标签：c#, equation, backpropagation, neural-network

通过[这个](http://home.agh.edu.pl/~vlsi/AI/backp_t_en/backprop.html)链接，我实现了一个神经网络来计算`y=x*x`（x 是输入，y 是输出）方程。我在输入层取 1 个单元，在隐藏层取 4 个单元，在输出层取 1 个单元。但是，当我输入例如`2`作为输入（因此所需的输出为 4）时，我得到的输出值为 0.99999999 .... 对于所有其他大于 1 的输入数字也会发生这种情况（其输出正确，值介于 0 和 1 之间）。我也使用[了这个](http://msdn.microsoft.com/en-us/magazine/jj658979.aspx)链接并改变了它来解决我的方程，但输出是一样的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:16:58.953

正如皮特所说。我应该标准化我的输出（和输入）以获得正确的答案。

# php - 不能做表

> ID：14140407
> 
> 赞同：1
> 
> 时间：2013-01-03T14:03:06.023
> 
> 标签：php, sql, postgresql, heroku

我最近制作了一个 postgresql 数据库，但由于某种原因，我无法在其中制作表格。我是否可以从 php 脚本或终端创建它，我很好；但我搜索了很多地方，找不到任何有用的东西。我之前在 mysql 中做过很多工作，但 postgresql 恰好给我带来了问题。

我知道在我的 php 文件中我已正确连接到我的数据库，并且我已经运行了该脚本的多个版本，例如（在 pg_connect 之后插入）：

```
$tsk1 = pg_query("
CREATE TABLE IF NOT EXISTS `elb` (
  `id` int(8) NOT NULL AUTO_INCREMENT,
  `user` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `pass` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `name` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`_id`),
  UNIQUE KEY `_user` (`_user`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=3"); 
```

我也试过

```
 $tsk1 = pg_query("
        CREATE TABLE IF NOT EXISTS 'elb' (
          'id' int(8),
          'user' varchar(128),
          'pass' varchar(128),
          'name' varchar(128),
         "); 
```

我也试过这个，但得到一个 500 错误。而且我知道我已连接，因为我尝试仅更改密码中的一个字符并返回“无法连接”。

```
<?php
$dbconn = pg_connect("host=hostname port=portnum dbname=mydb user=myuser password=mypass sslmode=require options='--client_encoding=UTF8'") or die('Could not connect: ' . pg_last_error()); 

$sql = pg_query('CREATE TABLE "elb" (
  "id" int(8),
  "user" varchar(128),
  "pass" varchar(128),
  "name" varchar(128)
)');

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T14:42:54.520

`int(8)`在 PostgreSQL 中没有意义，其中`int`32 位整数 (aka `int4`) 和`bigint`64 位整数 (aka `int8`)。

如果您收集并报告了实际的数据库错误消息（应该在数据库日志文件中）而不是简单地说“500 错误”，这将更容易诊断。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T14:06:51.563

MySQL 可能是唯一使用反引号 ( ```) 作为名称分隔符的 DBMS。因此，如果您确定要连接到 PostgreSQL 数据库，则需要删除脚本中的所有反引号。

CREATE TABLE 语句之后的`ENGINE=...`,`DEFAULT CHARSET=...`和其他选项也很可能是特定于 MySQL 的，应该删除。

如果您需要在查询中分隔名称，请使用双引号 ( `"`)：

```
 CREATE TABLE IF NOT EXISTS "elb" (
      "id" int(8),
      "user" varchar(128),
      ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T17:12:59.737

您遇到的元问题是您没有阅读从 PostgreSQL 服务器返回的错误消息。如果你不先解决这个问题，你在使用 PHP/PG 编程时就无法高效。

您的 PHP 环境可能已`display_errors`设置为关闭。这是生产的推荐值。来自 php.ini：

```
; 该指令控制 PHP 是否以及在何处输出错误，
; 通知和警告。错误输出在开发过程中非常有用，但是
; 在生产环境中可能非常危险。取决于代码
; 这是触发错误，敏感信息可能会泄漏
; 超出您的应用程序，例如数据库用户名和密码或更糟。
; 建议将错误记录在生产服务器上，而不是
; 将错误发送到 STDOUT。
; 可能的值：
; Off = 不显示任何错误
; stderr = 向 STDERR 显示错误（仅影响 CGI/CLI 二进制文件！）
; On 或 stdout = 向 STDOUT 显示错误
; 默认值：开
; 开发价值：开
; 产值：关闭
; http://php.net/display-errors

display_errors = 关闭

```

假设您无法更改不是服务器管理员的情况，您应该能够在开发时将其动态设置为 On in，方法是在脚本的开头添加：

```
ini_set('display_errors', 'On'); 
```

之后，PG 错误应在发生时自动显示在页面上。

如果编写生产质量代码，您需要检查每次`pg_query`调用的结果，并在`FALSE`使用[pg_last_error](http://php.net/manual/en/function.pg-last-error.php)函数获取错误消息并根据上下文将其输出到日志或页面中时。

# jquery - 反复点击jquery效果

> ID：14140411
> 
> 赞同：1
> 
> 时间：2013-01-03T14:03:17.183
> 
> 标签：jquery

我为页面上的下拉菜单实现了 jquery 的淡入/淡出。

它不是悬停的，因此需要单击。它工作正常，没有问题，除了当你无缘无故地反复点击该东西时。

我设置它的方式是在单击时增加菜单栏的高度（同时淡入/淡出另一个 div），以在我的布局的所有部分周围视觉上实现 4px 边框。

如果您反复单击（假设您是一个过度活跃的 12 岁 ADD，或者一个双击所有内容的老妇人），格式可能会变得混乱。

有什么解决办法吗？

HTML：

```
<a class="springtrail_link stadd" href="#" id="add" data-hidden="1" data-lastid="<?php echo $lastid ?>">Change Category</a> 
```

JS：

```
$('.stadd').live('click', function(){
        var hidden = $(this).data('hidden')
        var lastid = $(this).data("lastid");
        var divid = "#suggested";
        if (hidden == 0)
        {
            hide(divid)
            $('.stadd').data('hidden', '1');
        } else
        {
            buildsuggested(lastid);
            show(divid);
            $('.stadd').data('hidden', '0');
        }
});  

function show(divid) {
    $(divid).slideDown('fast');
    var stheight = $('#springtrail').height();
    var pxheight = stheight + 4;
    $('#springtrail').animate({height: pxheight+'px'});
    $('#springtrail').css( 'border-bottom-left-radius' , '0px');
    $('#springtrail').css( 'border-bottom-right-radius' , '0px');
}

function hide(divid) {
    $(divid).fadeOut('fast');
    var stheight = $('#springtrail').height();
    var pxheight = stheight - 4;
    $('#springtrail').animate({height: pxheight+'px'});
    $('#springtrail').css( 'border-bottom-left-radius' , '4px');
    $('#springtrail').css( 'border-bottom-right-radius' , '4px');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:16:28.257

由于您没有发布任何代码，我假设您的问题可能与排队动画效果有关。

让我们假设一些与此类似的基本 HTML：

```
<button type="button" id="in">In</button>
<button type="button" id="out">Out</button>
<br/>
<img id="book" src="http://placehold.it/350x150" alt="" width="100" height="123" /> 
```

和这样的基本脚本：

```
$('#in').click(function() {
    $('#book').fadeIn('slow', function() {});
});

$('#out').click(function() {
    $('#book').fadeOut('slow', function() {});
}); 
```

[**演示**](http://jsfiddle.net/B4CFa/)- 每次都排队的动画效果

这里的问题是每次单击它都会执行淡入淡出效果，因此快速单击两个按钮会导致排队。在您停止单击以完成后，此队列将继续运行，这在某些情况下可能会导致不良影响。

为了防止这种行为，您可以使用[**jQuery 的 stop()**](http://api.jquery.com/stop/)方法来停止当前动画。与此类似：

```
$('#in').click(function() {
    $('#book').stop(true, true).fadeIn('slow', function() {});
});

$('#out').click(function() {
    $('#book').stop(true, true).fadeOut('slow', function() {});
}); 
```

[**DEMO**](http://jsfiddle.net/ZDGQQ/) - 停止动画效果

现在，这将确保在开始下一个动画之前停止动画，解决一些不希望的结果。

`true, true`有关调用时参数的更多详细信息，请参阅上面链接的文档`stop()`。

# c# - 以编程方式设置打印机功能

> ID：14140412
> 
> 赞同：4
> 
> 时间：2013-01-03T14:03:26.300
> 
> 标签：c#, printing, settings

我正在开发一个 C# 桌面应用程序，我需要在其中更改一些打印机设置并打印一些图片。在我的程序中，我已经可以设置纸张尺寸、打印机名称等...如果我进入打印机首选项的高级选项，有一个名为“打印机功能”的部分。我不知道如何访问打印机设置中的参数。例如有“Border”、“Overcoat Finish”、“2inch cut”等。我特别感兴趣的是“2inch cut”。

![在此处输入图像描述](../Images/f279ef83f4cd9fd00a43142ffbd2f1ee.png)

如何在运行时获取这些属性？

*更新* 我改变了图片和问题更具体一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:11:21.473

好的，所以我遇到了一个非常适合我的解决方案，希望这对其他人有帮助。

经过一番研究，我发现我的打印机没有设置为允许通过驱动程序访问这些功能。所以我所做的是在 Windows 中的打印机和设备中创建第二个配置文件，该配置文件使用相同的驱动程序连接到同一端口上的同一台打印机。然后使用我的程序，我只需根据我的需要选择不同的打印机配置文件。奇迹般有效。

感谢所有做出贡献的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:33:43.233

您可以使用 DEVMODE 结构的 dmPrintQuality 成员设置打印机质量。其他打印机功能可能不适用于所有打印机。某些打印机驱动程序可能会公开与其他打印驱动程序完全不同的属性。这通常使用上述结构的 dmDriverExtra 额外成员来完成。正如[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183565%28v=vs.85%29.aspx)所说 dmDriverExtra 是私人打印机数据：

> 包含遵循此结构的私有驱动程序数据的字节数。如果设备驱动程序不使用特定于设备的信息，则将此成员设置为零。

# websocket - Firefox for Socket.io 上的“页面加载时 websocket 被中断”

> ID：14140414
> 
> 赞同：58
> 
> 时间：2013-01-03T14:03:29.333
> 
> 标签：websocket, socket.io

```
Error: The connection to <websocket> was interrupted while the page was loading.
Source File: localhost/socket.io/node_modules/socket.io-client/dist/socket.io.js
Line: 2371 
```

我是 socket.io 的新手，我试图搜索这个，但我没有得到答案。

当我在 Firefox 上刷新页面时，Websocket 被中断。这就是服务器端等待授权客户端的原因。

这是代码： **server.js**

```
var app = require('http').createServer(handler),
  io = require('socket.io').listen(app),
  fs = require('fs')

app.listen(8080);

function handler(req, res) {
  fs.readFile(__dirname + '/index.html',
    function (err, data) {
      if (err) {
        res.writeHead(500);
        return res.end('Error loading index.html');
      }
      res.writeHead(200);
      res.end(data);
    });
}

io.sockets.on('connection', function (socket) {
  socket.emit('news', {
    hello: 'world'
  });
  socket.on('my other event', function (data) {
    //alert(JSON.stringify(data));  
    console.log(data);
  });

}); 
```

**索引.html**

```
<script src="node_modules/socket.io-client/dist/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost:8080');

  socket.on('news', function (data) {
    alert(JSON.stringify(data));
    console.log(data);
    socket.emit('my next event', { my: 'data' });
  });

</script> 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2014-05-21T13:15:00.193

发生这种情况是因为，您没有关闭打开的 websocket。

此代码将删除此错误：

```
$(window).on('beforeunload', function(){
    socket.close();
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-03-29T13:13:13.050

这似乎是 Firefox 中的一个开放错误（截至 2015-03-29）：

[https://bugzilla.mozilla.org/show_bug.cgi?id=712329](https://bugzilla.mozilla.org/show_bug.cgi?id=712329)

正如 Alexander 指出的那样，解决方法（目前）是在 beforeunload 上调用 websocket 上的 close() 。

**2016-04 更新**：根据 Bugzilla 的说法，这将在 Firefox 48 中修复

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-11T09:56:07.073

我刚刚浏览了 Socket.IO 教程，我遇到了这个确切的问题。我尝试了发布的解决方案，但它们似乎根本不起作用。

经过一番摆弄，一些尖叫和一些橡皮鸭，我终于弄清楚了问题所在。问题是它在正确初始化套接字变量之前尝试连接到套接字。Javascript 嘘嘘 #1。

如果您将修改您的文件以包含 jQuery，然后像这样包装您的函数：

```
 <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
	<script>
    $(function(){
      var socket = io.connect('http://localhost:8080');

      socket.on('news', function (data) {
        alert(JSON.stringify(data));
        console.log(data);
        socket.emit('my next event', { my: 'data' });
      });	
    });
    </script>
```

你会取得更大的成功。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T17:58:38.577

这对您的应用程序有什么影响？我的猜测是在控制台中看到错误并不是很好。

这里的问题是您看到 Firefox 登录此错误并且您无能为力。无法使用`try...catch`块或通过`websocket.onerror`/捕获此错误`websocket.onclose`。

请参阅：[如何捕获 WebSocket 连接中断？](https://stackoverflow.com/questions/13616960/how-do-i-catch-a-websocket-connection-interruption)

有关的：

*   [WebSocket.onclose 应该由用户导航触发还是刷新触发？](https://stackoverflow.com/questions/10965720/should-websocket-onclose-be-triggered-by-user-navigation-or-refresh)
*   [Firefox - 竞争条件允许虚拟 WebSocket 连接在选项卡关闭后继续存在](https://bugzilla.mozilla.org/show_bug.cgi?id=765738)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-30T16:16:30.193

多年来，我的自定义基于 Undertow 的网络服务器一直存在这个问题——我的问题是我的服务器没有响应套接字关闭消息。

根据[Jan Wielemaker](https://stackoverflow.com/users/717069/jan-wielemaker)的评论，我检查了我的套接字关闭处理程序代码`AbstractReceiveListener.onFullCloseMessage`并意识到我没有调用超级方法。添加`super.close()`套接字后，客户端会完全关闭，并且不会发出错误。

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2019-02-23T02:27:41.140

一种解决方案是对断开连接事件设置超时。

```
 setTimeout(() => {
            $('#offlineModal').modal('show')
          }, 5000) 
```

# jquery - chrome 和 safari 中显示的 Fancybox 滚动条不是 firefox？

> ID：14140418
> 
> 赞同：1
> 
> 时间：2013-01-03T14:03:45.790
> 
> 标签：jquery, css, fancybox, overflow, fancybox-2

我在这个页面上使用花哨的盒子[http://kimcolemanprojects.com/django_django.html](http://kimcolemanprojects.com/django_django.html)

当您单击显示视频的链接时，它会显示我不想出现的滚动条。似乎该元素已被赋予溢出样式：自动，但我找不到为了更改它而声明的位置。顺便说一句，这发生在 safari 和 chrome 上，但不是 firefox。

谢谢你的时间。

安吉拉 x

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:40:05.717

将`scrolling: "no"`选项添加到您的脚本中，例如：

```
$(".fancybox").attr('rel', 'gallery').fancybox({
    beforeLoad: function() {
        var el, id = $(this.element).data('title-id');
        if (id) {
            el = $('#' + id);

            if (el.length) {
                this.title = el.html();
            }
        }
    },
    scrolling: "no" //<-- get rid of the scroll bars inside fancybox
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:10:27.890

可能有一个浏览器默认设置`overflow`为自动。在这种情况下，您必须`overflow: hidden`在样式表中声明这些灯箱元素。

另外，我在 Chrome 23 或最新版本的 safari 中看不到滚动条。

# ruby - 如何根据一些自定义规则对 ruby 中的哈希进行排序

> ID：14140419
> 
> 赞同：3
> 
> 时间：2013-01-03T14:03:48.617
> 
> 标签：ruby, hash

我有一个这样的数组：

```
["Is", "Gandalf", "The", "Gray", "Insane"] 
```

我想根据数组中键的位置对哈希进行排序。例如，我想排序：

```
{:count=>21, "Is"=>19, "Gandalf"=>1, "Gray"=>0, "Insane"=>1, "The"=>5} 
```

进入这个：

```
{"Is"=>19, "Gandalf"=>1, "The"=>5, "Gray"=>0, "Insane"=>1, :count=>21} 
```

另一个例子是排序：

```
{:count=>3, "Is"=>11, "Insane"=>22, "Gray"=>0, "Gandalf"=>12, "The"=>2} 
```

进入这个：

```
{"Is"=>11, "Gandalf"=>12, "The"=>2, "Gray"=>12, "Insane"=>22, :count=>3} 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:45:19.027

```
class Hash
  def sort_by_array a; Hash[sort_by{|k, _| a.index(k) || length}] end
end 
```

将适用于第一个示例：

```
a = ["Is", "Gandalf", "The", "Gray", "Insane"]

{:count=>21, "Is"=>19, "Gandalf"=>1, "Gray"=>0, "Insane"=>1, "The"=>5}.sort_by_array(a)
# => {"Is"=>19, "Gandalf"=>1, "The"=>5, "Gray"=>0, "Insane"=>1, :count=>21} 
```

但是，它不适用于您的第二个示例，因为您对第二个示例的期望结果不仅是排序，还需要更改 的值`"Gray"`：

```
{:count=>3, "Is"=>11, "Insane"=>22, "Gray"=>0, "Gandalf"=>12, "The"=>2}.sort_by_array(a)
# => {"Is"=>11, "Gandalf"=>12, "The"=>2, "Gray"=>0, "Insane"=>22, :count=>3}

# You wanted
# => {"Is"=>11, "Gandalf"=>12, "The"=>2, "Gray"=>12, "Insane"=>22, :count=>3} 
```

由于尚不清楚`12`for的值`"Gray"`来自何处，因此无法以满足您的第二个示例的方式回答您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:10:41.443

我建议，通过按您需要的顺序填充数组，将其转换为数组。然后，您可以通过使用该数组或将该数组转换为哈希图来访问该数组本身。

[http://x3ro.de/ruby-19-array-hash/](http://x3ro.de/ruby-19-array-hash/)

讨论类似行的一个链接是，

[如何排序不简单的散列（散列的散列）](https://stackoverflow.com/questions/362105/how-to-sort-not-simple-hash-hash-of-hashes)

# magento - 无法呈现自定义块模板

> ID：14140421
> 
> 赞同：0
> 
> 时间：2013-01-03T14:03:54.847
> 
> 标签：magento, magento-1.7

我正在使用magento 1.7并且我已经创建了自定义小部件块但是由于某种原因我无法呈现模板我不知道为什么请给出正确的解决方案如果我从_toHtml返回字符串代码然后它的显示代码我的代码有什么问题但是通过 phtml 模板文件我无法渲染任何东西

```
block\slider.php

<?php

class XXXX_Slider_Block_Slider extends Mage_Core_Block_Template
{
    /**
     * Constructor. Set template.
     */
    protected function _construct()
    {
        parent::_construct();
        $this->setTemplate('slider/slider.phtml');
    }
    protected function _toHtml()
    {
        return parent::_toHtml();
    }
}

and this is my slider/slider.phtml

slider is executed 
```

这里是我的 cms.xml

```
<?xml version="1.0"?>
<!--
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
-->
<layout version="0.1.0">
<!--
Default layout, loads most of the pages
-->

    <default>
        <reference name="footer">
            <block type="cms/block" name="cms_footer_links" before="footer_links">
                <!--
                    The content of this block is taken from the database by its block_id.
                    You can manage it in admin CMS -> Static Blocks
                -->
                <action method="setBlockId"><block_id>footer_links</block_id></action>
            </block>
        </reference>
    </default>

    <cms_page translate="label">
        <label>CMS Pages (All)</label>
        <reference name="content">
            <block type="slider/slider" name="easyshop.slider" template="slider/slider.phtml"/>
            <block type="core/template" name="page_content_heading" template="cms/content_heading.phtml"/>
            <block type="page/html_wrapper" name="cms.wrapper" translate="label">
                <label>CMS Content Wrapper</label>
                <action method="setElementClass"><value>std</value></action>
                <block type="cms/page" name="cms_page"/>
            </block>
        </reference>
    </cms_page>

    <cms_index_index translate="label">
        <label>CMS Home Page</label>
        <remove name="cms_page" />
    </cms_index_index>

    <cms_index_defaultindex>
        <remove name="right"/>
        <remove name="left"/>

        <reference name="root">
            <action method="setTemplate"><template>page/1column.phtml</template></action>
        </reference>
        <reference name="content">
            <block type="core/template" name="default_home_page" template="cms/default/home.phtml"/>
        </reference>
    </cms_index_defaultindex>

    <cms_index_noroute translate="label">
        <label>CMS No-Route Page</label>
    </cms_index_noroute>

    <cms_index_defaultnoroute>
        <remove name="right"/>
        <remove name="left"/>

        <reference name="root">
            <action method="setTemplate"><template>page/1column.phtml</template></action>
        </reference>
        <reference name="content">
            <block type="core/template" name="default_no_route" template="cms/default/no-route.phtml"/>
        </reference>
    </cms_index_defaultnoroute>

</layout> 
```

请如果您认为问题需要更多改进，那么您可以编辑，但请不要做不必要的投票这是我在这里分享的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:15:10.317

你为什么从 Mage_Core_Block_Abstract 扩展你的块？抽象类没有属性 $_template 并且您的 _toHtml() 方法不实现模板输出。您需要从 Mage_Core_Block_Template 类扩展。

Magento 有几种块类型。[你可以在这个](https://stackoverflow.com/a/11771624/1375058)答案中找到好的列表。

# html - CSS 布局随分辨率变化

> ID：14140423
> 
> 赞同：0
> 
> 时间：2013-01-03T14:04:06.927
> 
> 标签：html, css, layout

我正在为广播电台设计一个聊天页面，我正在 32 英寸屏幕上使用 1360X768 Res'。

当我让朋友检查页面布局时，他们会变得混乱或元素在屏幕上变小，页面不会保持一致。

如果可能的话，我想知道是否有一个固定设置我需要插入到 CSS 中的“body”中，这样​​就不会发生这样的事情，当我在我的屏幕中移动一个元素时，它会在其他分辨率/屏幕上保持不变.

[有问题的网页](http://www.tranceil.fm/player/chat)

*   警告：页面中有自动播放音乐。

此外，如果可以询问 2 个不同但相关的事情。我想将底部的滚动统计数据添加到底部播放器..就在它说“正在播放”的地方。

但是我尝试的一切都不会让它在它之上..z-index 不会有帮助。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:07:26.043

*   你犯的第一个错误是你在设计一个特定的分辨率。
*   您犯的第二个错误是您设计的分辨率远高于最常用的 1024x768。

看看[MediaQueries](http://www.w3.org/TR/css3-mediaqueries/)。它们使您可以构建一个流畅的网站，该网站在给定的分辨率下会发生巨大的变化。

# json - Restkit：将包含 10 个对象的对象映射结果强制转换为单个结果。

> ID：14140432
> 
> 赞同：1
> 
> 时间：2013-01-03T14:04:38.030
> 
> 标签：json, mapping, restkit

如果我要返回 JSON 中的一组对象，并且我已经为这些对象设置了映射，为什么 RestKit 只返回一个对象而不是一个数组？

RestKit 在日志中给出了这个输出：将包含 10 个对象的强制对象映射结果转换为单个结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:13:36.330

这取决于您在 RKObjectMappingResult 上调用的方法。

```
...
yourMapping = [RKObjectMapping mappingForClass:[YourExchangeObject class]];   
[yourMapping mapKeyPath:@"attribute" toAttribute:@"attribute"];  
...

RKObjectMappingProvider *provider = [RKObjectMappingProvider new]; 
[provider setMapping:yourMapping forKeyPath:@""]; 

RKObjectMapper *mapper = [RKObjectMapper mapperWithObject:parsedData mappingProvider:provider];
RKObjectMappingResult *mappingResult = [mapper performMapping]; 
```

所以现在如果你打电话

```
NSObject *object = [mappingResult asObject]; 
```

您将收到“包含...的强制对象映射结果”警告，并且只会提供一个结果

改为打电话

```
NSArray *array = [mappingResult asCollection]; 
```

它应该可以工作

# c - 并行化函数，Kernel里面的Kernel可以吗？GCC OpenCL

> ID：14140439
> 
> 赞同：1
> 
> 时间：2013-01-03T14:04:54.810
> 
> 标签：c, opencl

我是 OpenCL 领域的新手，我想增加对它的了解。

我试图找到有关如何使用 OpenCL 构建“复杂功能”的信息。对于“复杂函数”，我的意思是可以并行化并且内部具有也可以并行化的函数的函数。我看过如下链接：

*   [从另一个 OpenCL 内核调用 OpenCL 内核](https://stackoverflow.com/questions/7741256/calling-opencl-kernel-from-another-opencl-kernel)
*   [多个 OpenCl 内核](https://stackoverflow.com/questions/3979419/multiple-opencl-kernels)

现在，我在这里提出我的问题，我将使用一个示例：

```
// A and B are int vectors
// The value of M and N are different!! M != N
for(int i=0; i<=M-2;i++){
  for(int j=i+1;j<=M-1;j++){
    distance=calculate_distance(A[i],B[j]);
    //more sequential instructions
  }
} 
```

并且 calculate_distance 连接两个向量并有一个循环：

```
for(int i=0; i<=N-1;i++)
  // Some sequential instructions 
```

这个完整的代码片段可以并行化吗？在那种情况下如何（这是内核内部的标题内核的原因）？

注意：我正在使用 Intel(R) SDK for OpenCL - Offline Compiler 2012 (Windows) 来检查我的内核。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:50:37.863

为了编写并行代码，您需要更加关注数据流。你的输入数据是什么样的？你的输出数据是什么样的？如何将一段输入数据转换为输出数据？

至于您的问题：

*   由于数据流不明显，因此无法确定您提供的示例是否可并行化。
*   您可以从内核代码中调用函数，它们将被内联到内核中。

暗示：

还要检查[Converting C/C++ for loops into CUDA](https://stackoverflow.com/questions/6613106/converting-c-c-for-loops-into-cuda) - 它是 CUDA 而不是 OpenCL，但原理是相似的。

如果您的输出数据只是一个值（例如最大距离），您可能需要查看归约内核并了解它们是如何工作的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T14:08:15.903

使您的功能可[重入](http://en.wikipedia.org/wiki/Reentrancy_%28computing%29)。

# actionscript-3 - 在 ActionScript 3 中为影片剪辑分配整数值

> ID：14140440
> 
> 赞同：0
> 
> 时间：2013-01-03T14:04:59.287
> 
> 标签：actionscript-3, variable-assignment, movieclip

我正在尝试使用 ActionScript 3 在 Flash 中制作纸牌游戏。我不太熟悉该语言（随着 AS2 长大），但我认为它更适合这个项目。

不过，这方面的坏处是我马上遇到了一个问题：我将每张卡片都视为一个电影剪辑，但我真正需要的是为卡片分配一些整数值（事实并非如此，但作为一个例子，假设我正在玩扑克，我希望所有的 A 都携带价值 1，因为它们是最好的牌，2 给国王，等等）。

我试图寻找它，但我发现的只是如何制作电影剪辑数组。我知道这个问题应该不会太难！有人可以帮助我吗？

（顺便说一句，我真的应该使用电影剪辑还是按钮更方便？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:49:30.340

首先，从我的角度来看，除非你真的需要，否则不要使用组件，因为它们需要更长的时间来绘制并且它们不灵活。过去我和他们有很多问题（我发布的[这个问题](https://stackoverflow.com/questions/11677547/actionscript-3-uiscrollbar-bug-width-of-container-returns-85px)就是其中之一）。

关于 MovieClip 的... MovieClip 类是**动态**的，因此您可以为它分配任何虚拟属性，没问题。所以`yourMcInstance.someVar = 3`是完全有效的。

我认为 AS3 的主要变化之一是引入了**Sprite**类，它基本上是一个没有时间线的 MovieClip。它要轻得多，除非您手动创建帧动画，否则它是为任何可以处理鼠标（和许多其他）事件的容器选择的类。但是，它不是动态类，因此`yourSpriteInstance.someVar = 3`无效。这就是为什么鼓励使用自定义类的原因。使用自定义类，您可以选择扩展类并创建自定义属性和方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:01:00.920

要将影片剪辑添加到数组：

```
const clips:Array = [];

function addNewCardToCardsArray(array:Array, color:String, value:int):MovieClip {
  const clip:MovieClip = new MovieClip();
  clip.color = color;
  clip.value = value;

  return array[array.length] = clip;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:49:30.163

因为影片剪辑是对象，所以您实际上可以将变量直接附加到它们。

```
var card:MovieClip = new MovieClip(); //create a blank MC
addchild(card);

card.id = 5; //You can attach vars like this 
```

# sql - 在滚动天数上使用 PIVOT

> ID：14140441
> 
> 赞同：1
> 
> 时间：2013-01-03T14:05:02.333
> 
> 标签：sql, tsql, sql-server-2008-r2, pivot

```
;WITH myRubbish AS
    (
    SELECT user, [20121231], [20130101], [20130102]
    FROM 
        ( 
        SELECT
            DateKey,
            user,
            revenue
        FROM    xxx.dbo.yyy
        WHERE DateKey > CONVERT(CHAR(8),GETDATE()-4,112)
        ) x
        PIVOT
        (
        SUM(revenue)
        FOR DateKey IN ([20121231], [20130101], [20130102]) 
        ) u
    )
SELECT * 
FROM myRubbish; 
```

我将如何调整它以便它可以每天运行并且列会自动重命名为过去 3 天？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:09:17.120

您将需要实现查询的动态 SQL 版本。与此类似：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(convert(CHAR(8), DateKey, 112))
                    from xxx.dbo.yyy
                    WHERE DateKey > CONVERT(CHAR(8),GETDATE()-4,112)
                      -- and Datekey <= CONVERT(CHAR(8),GETDATE(),112) -- include this is you want to limit the records
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT [user],' + @cols + ' from 
             (
                SELECT DateKey, [user], revenue
                FROM    xxx.dbo.yyy
                WHERE DateKey > CONVERT(CHAR(8),GETDATE()-4,112)
                  -- and Datekey <= CONVERT(CHAR(8),GETDATE(),112)  -- include this is you want to limit the records
            ) x
            pivot 
            (
                SUM(revenue)
                for DateKey in (' + @cols + ')
            ) p '

execute(@query) 
```

# javascript - 使用 jQuery 在新窗口中打开任何带有 .pdf 的链接？

> ID：14140446
> 
> 赞同：6
> 
> 时间：2013-01-03T14:05:15.977
> 
> 标签：javascript, jquery, hyperlink

如何`.pdf`使用 jQuery 在新窗口中打开所有带有文件扩展名的链接？我需要改变这个：

```
<a href="domain.com/pdf/parkingmap.pdf">parking map</a> 
```

对此：

```
<a href="domain.com/pdf/parkingmap.pdf" target="_blank">parking map</a> 
```

`/pdf`如果有帮助，所有文件都在一个文件夹中。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-03T14:06:39.137

为此，您可以选择任何具有以结尾的属性`a`的元素，并为其添加一个属性。尝试这个：`href``.pdf``target="_blank"`

```
$(function() {
    $('a[href$=".pdf"]').prop('target', '_blank');
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T14:08:17.963

一种方法，假设您希望*不*以结尾的链接`pdf`在同一页面中打开：

```
$('a').click(
    function(e){
        e.preventDefault();
        if (this.href.split('.').pop() === 'pdf') {
            window.open(this.href);
        }
        else {
            window.location = this.href;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-07T10:42:58.193

jQuery one-liner:

```
$('a[href$=".pdf"]').attr('target','_blank'); 
```

Current Javascript:

```
for (let a of document.querySelectorAll("a")) {
    if (a.href.match("\\.pdf$")) {
        a.target = "_blank";
    }
} 
```

Older browsers :

```
var anchors = document.body.getElementsByTagName('a');
for (var i = 0; i < anchors.length; i++) {
    if(anchors[i].getAttribute('href').match('\\.pdf$') {
        anchors[i].setAttribute('target', '_blank');
    }
} 
```

Try it here : [http://codepen.io/gabssnake/pen/KyJxp](http://codepen.io/gabssnake/pen/KyJxp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-22T14:51:56.517

```
<a onclick=ViewPdf(test.pdf) href="">

function ViewPdf(FileName) {
    var url = '../Home/GetPDF?fileName=' + FileName;
    window.open(url, '_blank');

}
```

现在像下面这样写 ActionResult

```
public ActionResult GetPDF(string fileName)
        {
            try
            {
                byte[] fileData = System.IO.File.ReadAllBytes(Functions.GetConfigValue("CDXFilePath") + fileName);
                string resultFileName = String.Format("{0}.pdf", fileName);
                Response.AppendHeader("Content-Disposition", "inline; filename=" + resultFileName);
                return File(fileData, "application/pdf");
            }
            catch
            {
                return File(Server.MapPath("/Content/") + "FileNotFound.html", "text/html");
            }
        } 
```

# php - Zend Framework 2 - Hydrator 策略没有响应和保湿

> ID：14140447
> 
> 赞同：0
> 
> 时间：2013-01-03T14:05:19.057
> 
> 标签：php, doctrine-orm, zend-form, zend-framework2

我基本上实施[了这个策略](https://github.com/zendframework/zf2/pull/2072)。

主要区别是（我猜）我使用`Doctrine2`.

构造函数类被调用（打印了一个测试回显），但是这两个函数`extract()`并`hydrate()`没有。

我添加的策略如下：

```
$hydrator = new DoctrineEntity($entityManager);
$hydrator->getHydrator()->addStrategy('my_attribute', new MyHydrationStrategy());
$form->setHydrator($hydrator); 
```

[在这里发布了](https://github.com/doctrine/DoctrineORMModule/issues/93)一种类似的问题。

也许问题在于我添加此策略的方式。但老实说我不知道​​...

如果有人能给我一个提示我做错了什么，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:20:03.123

请参考这篇文章，以获得更清洁和更合适的解决方案！

[Zend Framework 2 - Doctrine 关系的 Hydrator 策略不起作用](https://stackoverflow.com/questions/14142488/zend-framework-2-hydrator-strategy-for-doctrine-relationship-not-working/14145627#14145627)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:35:19.353

@Sam[在 GitHub 上](https://github.com/doctrine/DoctrineORMModule/issues/93#issuecomment-11844822)解决了这个问题。

> 这是目前普遍存在的问题。问题是：addStrategy() 是 ZF2 的 ClassMethodHydrator 的一个东西——这个 hydrator 在 DoctrineEntity 中静默使用。要添加自定义策略，只需不要使用 DoctrineEntity 而是使用 ClassMethodsHydrator 本身。在 ClassMethods 上，您将能够添加 Strategies
> 
> 你也可以看看这个问题/公关[学说/DoctrineModule#106](https://github.com/doctrine/DoctrineModule/issues/106)

我的代码现在看起来像这样：

```
$hydrator = new ClassMethodsHydrator();
$hydrator->addStrategy('my_attribute', new MyHydrationStrategy());
$form->setHydrator($hydrator); 
```

*BTW：属性中的下划线不会导致任何问题*

不幸的是，我偶然发现了另一个基于外键关系的问题，它似乎甚至是一个`Doctrine` [问题](https://github.com/doctrine/DoctrineModule/issues/122)。[但我会为此提出一个新问题](https://stackoverflow.com/q/14142488/1331671)。

# r - R plot x轴标签显示域的第一个和最后一个值

> ID：14140448
> 
> 赞同：0
> 
> 时间：2013-01-03T14:05:27.383
> 
> 标签：r, plot

要么我太笨，要么不可能。对于我的情节，请检查以下内容：

![在此处输入图像描述](../Images/101fc6fc4c789145f2644a340ba5bbfc.png)

这已经很好了。但是，我需要 x 轴上的第一个和最后一个元素的标签。这意味着，根据情节，标签应该从 c1m1 到 c1m31。我能做到这一点吗？我已经通过“at”和“labels”用轴命令替换了标签。边界之间的值并不重要，但曲线的范围需要明确。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:10:11.603

您只需要首先绘制没有 x 轴的图形，然后使用轴命令将标签放置在您想要的位置

下面的例子展示了如何使用数组的第一个和最后一个元素

```
rainfall <- c(2, 5, 4, 5, 12)
days <- c("Mon","Tue","Wed","Thu","Fri")
plot (rainfall, xaxt="n")
axis(1, at=c(1,length(days)), lab=c(days[1], days[length(days)])) 
```

将仅在第一个和最后一个数据点生成带有 x 标签的图。这里的关键是`xaxt="n"`in`plot`命令和`axis`下一行的命令。

PL。[浏览http://www.harding.edu/fmccown/r/](http://www.harding.edu/fmccown/r/)上的教程

# extjs - Sencha GXT 3.0 如何捕获网格复选框取消选中

> ID：14140449
> 
> 赞同：1
> 
> 时间：2013-01-03T14:05:34.427
> 
> 标签：extjs, gxt

我想要做的就是每次使用 CheckBoxSelectionModel 选中或取消选中 Grid 中的项目时捕获一个事件。使用 SelectionHandler 可以轻松选中/选中的部分。我没有看到任何在多选模式下触发取消选择事件的东西。我有一个包含 1000 个左右项目的网格，我让用户多选项目以在地图上进行跟踪。It's not giong to perform well to scan the entire model whenever a selection changes so I'm wondering how to handle this.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T12:27:02.973

你是对的。SelectionHandler 只会提供选中/选中状态。我有类似的要求，我通过覆盖 CheckBoxSelectionModel 的 onSelectChange() 方法解决了这个问题。

这是供您参考的示例代码。

```
IdentityValueProvider<VO> identity = new IdentityValueProvider<VO>();
CheckBoxSelectionModel<VO> sm = new CheckBoxSelectionModel<VO>(identity) {

    protected void onSelectChange(VO model, boolean select) {

        super.onSelectChange(model, select);
        if (select) {
            // Do something on select ...
        } else {
            // Do something on deselect ...
        }
    };
}; 
```

希望这可以帮助。

# java - textField.getText() 只能带字符串，如果我想让它带一个 int 怎么办？

> ID：14140450
> 
> 赞同：0
> 
> 时间：2013-01-03T14:05:35.767
> 
> 标签：java, string, int, gettext

我有个问题。我有一个 UI，其中包含几个文本字段，您应该在其中输入随机字符/数字/字母。

```
 String socSecNbr = textFieldCustomerSocSecNbr.getText(); 
```

在这种情况下，当然，我想将 socSecNbr 更改为 int。但随后 getText() 方法不起作用。

我必须将其更改为什么？我尝试了以下代码，但它仍然无法正常工作：

```
 int socSecNbr = textFieldCustomerSocSecNbr.getInstance(); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:08:34.070

您可以使用将字符串解析为整数

```
int a= Integer.parseInt(socSecNbr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:15:51.937

在java中你可以这样做：

```
 int value =  Integer.valueOf(textFieldCustomerSocSecNbr.getText()); 
```

# javascript - 验证和聚焦元素

> ID：14140457
> 
> 赞同：0
> 
> 时间：2013-01-03T14:06:26.743
> 
> 标签：javascript, asp.net

我想验证一个 ASP.TextBox 是否只输入带有 javascript 函数的整数值。如果用户输入非整数值，它应该显示警告消息并保持焦点在当前元素上。我使用了以下程序：

在网页的 Asp.TextBox 元素上：

```
onchange="return isInteger(this);" onblur="return isInteger(this);" 
```

并在functions.js文件中验证函数

```
function isInteger(mobj) {
var mval = mobj.value;
if (isNaN(parseInt(mval))) {
    alert("Plese Enter a Valid Integer...!");
    mobj.focus();
    return false;
}
 return true; 
} 
```

它是否正确，或者是否有任何正确的方法来进行验证。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:28:16.207

`onblur`在这里验证就足够了..

有时一起使用`onchange`和`onblur`会产生两个警报，即当焦点丢失并`onchange`一起触发时......

[在这里](http://jsfiddle.net/fCnBY/)试试...

如果您单独使用 onchange ，只有在您保持文本不变时第一次失去焦点时才会收到警报......就像[这里](http://jsfiddle.net/fCnBY/1/)......否则如果它无效，您必须清除文本框值......

`onkeyup`可能是最好的选择，但您仍然可能需要像[这里](http://jsfiddle.net/fCnBY/2/)一样清除文本框值...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:19:46.653

是的想法是正确的。这就是你必须验证你的文本框的方式。

[使用 javascript 验证文本框值](https://stackoverflow.com/questions/2986768/validating-a-text-box-value-using-javascript)

[http://social.msdn.microsoft.com/Forums/en-US/netfxjscript/thread/07a91c1d-34db-44d8-9bd6-a424394a7028/](http://social.msdn.microsoft.com/Forums/en-US/netfxjscript/thread/07a91c1d-34db-44d8-9bd6-a424394a7028/)

或者还有另一种方法在文本框上使用onKeyUp()，检查文本框的值，如果输入不是整数则返回false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:21:54.660

您可以使用 ASP.NET **RegularExpressionValidator**控件来验证您的文本框输入值。

例如。

```
<asp:TextBox id="textbox1" runat="server" />
<asp:RegularExpressionValidator
ControlToValidate="textbox1"
ValidationExpression="\d{1,10}"
ErrorMessage="Plese Enter a Valid Integer...!"
runat="server" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T14:25:32.937

这个想法是正确的，但 onchange 就足够了。onblur 不是必需的，因为您不想在每次控件失去焦点（即选项卡通过或仅单击）时进行验证而不进行任何更改。

# entity-framework-4 - MVC 4 实体框架 - UserProfile 的外键

> ID：14140462
> 
> 赞同：0
> 
> 时间：2013-01-03T14:06:42.407
> 
> 标签：entity-framework-4, asp.net-mvc-4, foreign-key-relationship

我使用内置的帐户控制器/模型/视图创建了一个标准的 MVC 4 应用程序。我现在尝试添加另一个控制器，但我想创建与现有用户的外键关系，但我收到错误消息：

类型“MVC4App.Models.ListingModel”的属性“CreatedBy”上的 ForeignKeyAttribute 无效。在依赖类型“MVC4App.Models.ListingModel”上找不到外键名称“UserId”。Name 值应该是逗号分隔的外键属性名称列表。

上市示范代码为：

使用系统；使用 System.ComponentModel.DataAnnotations.Schema；

```
namespace MVC4App.Models
{
    public class ListingModel
    {
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int Id { get; set; }

        public string Location { get; set; }

        public string Instrument { get; set; }

        public string Genres { get; set; }

        public string Description { get; set; }

        [ForeignKey("UserId")]
        public virtual UserProfile CreatedBy { get; set; } 

        public DateTime CreatedOn { get; set; }
    }
} 
```

我在这里想念什么？还是有更好的方法我应该这样做？

另外我假设我可以在项目中稍后向用户个人资料添加额外的属性，例如电子邮件地址或头像图像的链接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:09:29.723

您必须将 UserId 添加到您的实体：

```
namespace MVC4App.Models
{
    public class ListingModel
    {
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int Id { get; set; }

        public string Location { get; set; }

        public string Instrument { get; set; }

        public string Genres { get; set; }

        public string Description { get; set; }

        public int UserId {get; set;}
        [ForeignKey("UserId")]
        public virtual UserProfile CreatedBy { get; set; } 

        public DateTime CreatedOn { get; set; }
    }
} 
```

# asp.net - 如果在 aspx 中使用 eval

> ID：14140464
> 
> 赞同：0
> 
> 时间：2013-01-03T14:06:45.810
> 
> 标签：asp.net, if-statement, eval

如何正确设置转发器中.aspx文件中的条件？

如果来自 db 的值为 true，我正在尝试设置文本颜色。我想这样写：

```
<%# if(Eval("correct")==true) ? <li Style="color: green"><%#Eval("answer")%></li> : <li><%#Eval("answer")%></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:34:54.247

好的，我已经解决了！

```
<asp:Repeater runat="server" ID="repOdpowiedzi">
                <ItemTemplate>
                    <ul>

                    <li style="color: <%# Convert.ToBoolean(Eval("correct")) ? "green" : "black"  %>"><%# Eval("answer") %></li>
                        </ul>
                </ItemTemplate>
            </asp:Repeater> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:16:01.457

您可以使用**Repeater ItemDataBound 事件**

**示例代码：**

```
 void Repeater1_ItemDataBound(Object Sender, RepeaterItemEventArgs e) {
          // Execute the following logic for Items and Alternating Items.
          if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {

         DataRowView drv = e.Item.DataItem as DataRowView;

             if ((bool)drv["correct"] == true) {
                ((Label)e.Item.FindControl("Label1")).Text= "<li Style='color: green'>" + drv["correct"].ToString() +"</li>";
             }
             else
            {
              ((Label)e.Item.FindControl("Label1")).Text= "<li>" + drv["correct"].ToString() +"</li>";
            }
          }
       } 
```

# android - 每次开始新的应用程序

> ID：14140465
> 
> 赞同：0
> 
> 时间：2013-01-03T14:06:46.553
> 
> 标签：android, android-activity

现在，发生的事情是当我按下主页键时，会显示最后一个活动活动。但我想要的是每次用户按下主页键并从启动器启动应用程序时都以新的方式启动应用程序。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:04:51.973

我认为您可以在按下主页按钮时覆盖 onPause() 事件，并在那里您可以实现完成您的活动。在启动您的活动时将意图标志设置为 FLAG_ACTIVITY_CLEAR_TOP 您的后台堆栈会很清晰，因此在完成最后一个活动后，任务和堆栈上没有任何活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:32:40.667

在创建意图时，您可以设置标志。例如

```
 Intent intent = new Intent();
   intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS); 
```

# iphone - obj-c 将 c-struct 添加到字典

> ID：14140469
> 
> 赞同：8
> 
> 时间：2013-01-03T14:06:55.010
> 
> 标签：iphone, objective-c, dictionary, struct, mapkit

我无法将 C-struct 添加到 NSDictionary。
C 结构是 MapKit.h 上的 MKCoordinateRegion。

该声明是

```
typedef struct {
    CLLocationCoordinate2D center;
    MKCoordinateSpan span;
} MKCoordinateRegion; 
```

和 CLLocationCoordinate2D 的声明是

```
typedef struct {
    CLLocationDegrees latitude;
    CLLocationDegrees longitude;
} CLLocationCoordinate2D; 
```

MKCoordinateSpan 是一样的。

现在，我想将 MKCoordinateRegion 添加到 NSDictionary。

```
 CLLocationCoordinate2D center = CLLocationCoordinate2DMake(40.723128, -74.000694);
    MKCoordinateSpan span = MKCoordinateSpanMake(1.0, 1.0);
    MKCoordinateRegion region = MKCoordinateRegionMake(center, span);
    NSMutableDictionary *param = [[NSMutableDictionary alloc] init];
    [param setObject:region forKey:@"region"]; 
```

5 行有错误。
错误消息是“将 'MKCoordinateRegion' 发送到不兼容类型 'id' 的参数”

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T14:14:19.147

您不能将结构直接放入字典中，但您*可以*使用 an`NSValue`将其包装成可以添加的方式。

[示例](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/NumbersandValues/Articles/Values.html#//apple_ref/doc/uid/20000174-BAJJHDEG)：

```
typedef struct { 
  float real; 
  float imaginary; 
} ImaginaryNumber; 

ImaginaryNumber miNumber; 
miNumber.real = 1.1; 
miNumber.imaginary = 1.41; 

NSValue *miValue = [NSValue value: &miNumber 
                        withObjCType:@encode(ImaginaryNumber)]; 

[param setObject:miValue forKey:@"region"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T14:10:17.460

尝试将您的结构转换为`NSData`

```
NSData *data = [NSData dataWithBytes:&region length:sizeof(MKCoordinateRegion)];
 [param setObject:data forKey:@"region"]; 
```

# android - 如何将 ImageButton 的前景图像设置为空

> ID：14140472
> 
> 赞同：1
> 
> 时间：2013-01-03T14:07:13.403
> 
> 标签：android, android-layout

我有一些 ImageButtons 被用作分段控件，每个都有一个背景集，前景图像将是一个复选标记，显示当前选择了 3 个中的哪一个。其他 2 个按钮应该没有前景图像。图像在 XML 中定义（见下文）。

```
 <ImageButton
                android:id="@+id/style_light_button"
                android:layout_width="@dimen/style_color_segment_width"
                android:layout_height="@dimen/style_button_segment_height"
                android:background="@drawable/button_segmented_light"
                android:src="@drawable/icons_checkmark_dark" />

            <ImageButton
                android:id="@+id/style_sepia_button"
                android:layout_width="@dimen/style_color_segment_width"
                android:layout_height="@dimen/style_button_segment_height"
                android:background="@drawable/button_segmented_sepia"
                android:src="@drawable/icons_checkmark_dark" />

            <ImageButton
                android:id="@+id/style_dark_button"
                android:layout_width="@dimen/style_color_segment_width"
                android:layout_height="@dimen/style_button_segment_height"
                android:background="@drawable/button_segmented_dark"
                android:src="@drawable/icons_checkmark_light" /> 
```

在代码中单击一个时，我将清除未单击的 2 中的复选标记，并确保将其添加到单击的那个中。

```
ImageButton lightModeButton = (ImageButton)findViewById(R.id.style_light_button);
ImageButton sepiaModeButton = (ImageButton)findViewById(R.id.style_sepia_button);
ImageButton darkModeButton = (ImageButton)findViewById(R.id.style_dark_button); 
```

我都试过了`setImageBitmap(null)`，`setImageDrawable(null)`但他们都崩溃了。

```
lightModeButton.setImageBitmap(null);
sepiaModeButton.setImageDrawable(null);
darkModeButton.setImageResource(R.drawable.icons_checkmark_light); 
```

如何清除图像，或者在显示背景图像的同时隐藏前景图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:21:01.253

来自[安卓文档](http://developer.android.com/reference/android/view/View.html#setBackgroundResource%28int%29)：

```
 public void setBackgroundResource (int resid) 
```

*将背景设置为给定资源。资源应引用 Drawable 对象**或 0 以移除背景。***

我不知道它是否可以使用，`setImageResource(int resId)`所以试试这个：

```
sepiaModeButton.setImageResource(0); 
```

代替

```
sepiaModeButton.setImageDrawable(null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:20:50.847

例如，您可以创建一个 Transclude drawable，在您的 Drawable 目录上创建文件 transclude_drawable.xml ，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<selector
  xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@android:color/transparent" />
</selector> 
```

之后只需设置`ImageButton.setImageResource(R.drawable.transclude_drawable);` 不要忘记`ImageButton`使用您的引用更改 ，例如`lightModeButton`。

# google-maps - 将标记添加到静态谷歌地图的中心

> ID：14140473
> 
> 赞同：16
> 
> 时间：2013-01-03T14:07:20.837
> 
> 标签：google-maps

创建谷歌地图并以给定位置为中心非常简单（见下文）。创建谷歌地图并通过执行类似的操作在其上显示标记也很简单`markers=color:blue%7Clabel:S%7C11211%7C11206%7C11222`。

我将如何创建一个像下面这样的简单居中地图，但在最中心添加一个标记？谢谢

```
<img alt="Map" src="http://maps.google.com/maps/api/staticmap?center=+AUBURN+WA+98001&amp;zoom=14&amp;size=400x400&amp;sensor=false"> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-26T21:52:32.913

我猜地图会自动适合显示指定的标记， [在这里你会发现](https://developers.google.com/maps/documentation/static-maps/intro#MarkerLocations)

> 标记位置
> 
> 每个标记描述符必须包含一组一个或多个位置，定义在地图上放置标记的位置。这些位置可以指定为纬度/经度值或地址。这些位置使用竖线字符 (|) 分隔。
> 
> 位置参数定义标记在地图上的位置。如果该位置不在地图上，只要提供了中心和缩放参数，该标记将不会出现在构建的图像中。但是，如果未提供这些参数，静态地图服务器将自动构建包含所提供标记的图像。（请参阅下面的隐式定位。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-14T10:38:36.037

如果地图，您还可以在顶部添加自己的居中背景图像:)

```
background: url('yourmarker.png' ) center no-repeat, url(http://maps.google.com/maps/api/staticmap?center=AUBURN+WA+98001&zoom=14&amp&size=400x400); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-16T05:32:00.007

在这里我一步一步地给出代码

```
NSString *strLat = [NSString stringWithFormat:@"%f",_message.latitude];
NSString *strLong = [NSString stringWithFormat:@"%f",_message.longitude];
NSString *strURL = [NSString stringWithFormat:@"%@center=%@,%@&zoom=15&size=200x200&markers=color:red%%7Clabel:C%%7C%@,%@&key=%@",https://maps.googleapis.com/maps/api/staticmap?,strLat,strLong,strLat,strLong,GOOGLE_API_BROWSER_KEY];
NSLog(@"strURL %@",strURL);
strURL = [strURL stringByReplacingOccurrencesOfString:@"%%" withString:@"%"]; 
```

现在你有一个图片网址

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-08T18:57:32.957

地址的谷歌静态地图参考：

[https://developers.google.com/maps/documentation/maps-static/dev-guide#Addresses](https://developers.google.com/maps/documentation/maps-static/dev-guide#Addresses)

这是我最近用来执行此操作的 JavaScript 函数。传递给函数的addressElements 参数是一个地址元素数组，例如`['10 Main St', 'Brownsville', 'MS', '27123', 'USA']`。

您可以看到我已经注释掉了 center 和 zoom 属性，因为您在定义标记时不需要这些属性。要删除标记，只需取消注释这两行并注释掉标记行。

您显然可以自己构建此图像，但我使用 URLSearchParams 来简化参数创建并自动对它们进行 URL 编码。

```
function getGoogleMapsImage(addressElements) {
    var image = Nucleus.element('img');
    image.width = '256';
    image.height = '256';
    var joined = addressElements.join(',');
    var params = new URLSearchParams();
    //params.append('center', joined);
    //params.append('zoom', '15');
    params.append('size', '256x256');
    params.append('maptype', 'roadmap');
    params.append('key', 'YOUR_API_KEY_HERE');
    params.append('markers', 'color:red|label:C|' + joined);
    var url = 'https://maps.googleapis.com/maps/api/staticmap?' + params.toString();
    image.src = url;
    return image;
} 
```

# c++ - 创建一个数组，使其包含二进制中从 0 到 N 的元素

> ID：14140475
> 
> 赞同：-2
> 
> 时间：2013-01-03T14:07:34.427
> 
> 标签：c++, c, algorithm, data-structures

我需要一个快速算法，它将所有可能的数字生成到一个数组中，直到给定数字 N 二进制。

```
e.g N=3
Then the array should be {0,0,0},{0,0,1}.....{1,1,1}
N<=17\. 
```

到目前为止，我已经尝试过这是一个递归解决方案。

```
void print_digits(int n, std::string const& prefix = "") {
    if (!n) {
        printf("%s,",prefix.c_str());
        return;
    }
    print_digits(n-1, prefix + '0');
    print_digits(n-1, prefix + '1');
} 
```

我需要一个更好的算法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:25:35.677

C++ 中的所有整数都以二进制表示形式直接存储在内存中。因此，如果您只想存储 N 个数字，您应该直接将它们“按原样”写入数组

```
std::vector<unsigned> Numbers;
// if N is length of the number, calculate the maximum as 2^N - 1
long long Max = 1 << N - 1;
for (unsinged i = 0; i < Max; ++i)
    Numbers.push_back(i); 
```

如果您想以二进制表示形式编写它们，这也非常简单，即使您想自己编写所有代码。（*请原谅，因为这只是一个简单的示例实现*）

```
void PrintAsBits(unsigned value) {
    for (int i = sizeof(unsigned) * 8 - 1; i >= 0; --i)
        cout << ((1 << i) & value) ? 1 : 0;
    cout << '\n';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:05:32.280

以防万一有人再关心，下面的代码实现了原始规范，它要求一种填充二维数组的方法，其中每个值都表示为一个数值数组，其元素对应于其值的二进制数字，以大端顺序排列.

```
#include <iostream>

static const int DIGIT_COUNT = 10;

static const int VALUE_COUNT = 1 << DIGIT_COUNT;
unsigned char g_binarray[VALUE_COUNT][DIGIT_COUNT];

void Populate() {
    for(int i=0; i<VALUE_COUNT; ++i) {
        unsigned char (&curr)[DIGIT_COUNT] = g_binarray[i];
        for(int di=0; di<DIGIT_COUNT; ++di) {
            curr[di] = unsigned char((i >> (DIGIT_COUNT - 1 - di)) & 1);
        }
    }
}

void DumpArray() {
    static const char *digits = "01";
    for(int i=1; i<VALUE_COUNT; ++i) {
        for(int di=0; di<DIGIT_COUNT; ++di) {
            std::cout << digits[!!g_binarray[i][di]];
        }
        std::cout << "    " << i << std::endl;
    }
}

int main(int argc, char* argv[]) {
    Populate();
    DumpArray();
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T13:17:32.863

正如我在 1 篇文章中所写：

示例：如果您需要长度为 4，那么您必须有 2^4 = 16 个不同的数组。

您可以使用这个简单的 Java 代码来生成所有数组：

```
for (int i=0; i < 16; i++) {
        System.out.println(Integer.toBinaryString(i));
} 
```

这个的输出：

> 0 1 10 11 100 101 110 111 1000 1001 1010 1011 1100 1101 1110 1111

# selenium - 调用 Firefox webdriver 时调用目标异常

> ID：14140476
> 
> 赞同：1
> 
> 时间：2013-01-03T14:07:35.017
> 
> 标签：selenium

在 Eclipse 中，当我尝试调用 Firefox Web 驱动程序时，出现以下异常

```
java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.cisco.nm.crostest.aidan.TestExecutor.callExecute(TestExecutor.java:740)
at com.cisco.nm.crostest.aidan.TestExecutor.testLms(TestExecutor.java:909)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at junit.framework.TestCase.runTest(TestCase.java:164)
at junit.framework.TestCase.runBare(TestCase.java:130)
at junit.framework.TestResult$1.protect(TestResult.java:106)
at junit.framework.TestResult.runProtected(TestResult.java:124)
at junit.framework.TestResult.run(TestResult.java:109)
at junit.framework.TestCase.run(TestCase.java:120)
at junit.framework.TestSuite.runTest(TestSuite.java:230)
at junit.framework.TestSuite.run(TestSuite.java:225)
at org.junit.internal.runners.OldTestClassRunner.run(OldTestClassRunner.java:76)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:38)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)
Caused by: java.lang.AbstractMethodError: org.apache.xerces.dom.DeferredElementNSImpl.getTextContent()Ljava/lang/String;
    at org.openqa.selenium.firefox.internal.FileExtension.readIdFromInstallRdf(FileExtension.java:133)
    at org.openqa.selenium.firefox.internal.FileExtension.writeTo(FileExtension.java:60)
    at org.openqa.selenium.firefox.internal.ClasspathExtension.writeTo(ClasspathExtension.java:63)
    at org.openqa.selenium.firefox.FirefoxProfile.installExtensions(FirefoxProfile.java:465)
    at org.openqa.selenium.firefox.FirefoxProfile.layoutOnDisk(FirefoxProfile.java:443)
    at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:77)
    at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:244)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:110)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:190)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:183)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:179)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:92)
    at com.cisco.nm.crostest.ipcenter.scripts.IPCmCreate.execute(IPCmCreate.java:439)
    ... 25 more 
```

我使用的代码是

```
 Connection oracleCon = oracleUtils.getOracleConnection();
    System.out.println("check1");
    WebDriver driver = new FirefoxDriver();
    status_flag = CreateTicket(driver,oracleCon,xmlFileName,TcParam); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-20T21:40:16.877

更新 java 1.7-minor 版本对我有用。

# asp.net - 知道给定的 url 是否是页面 url（不是静态文件）

> ID：14140478
> 
> 赞同：1
> 
> 时间：2013-01-03T14:07:38.620
> 
> 标签：asp.net, url

有没有办法知道给定的 url 是页面的 url，而不是静态文件的 url？

我需要它从给定的 url 下载内容，我不想下载带有附加 .php 扩展名的大视频文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:17:56.823

通常，页面的 URL 不会说明其内容。以 .html 结尾的 URL 可能包含 HTML 或其他任何内容。您拥有的唯一（大部分）可靠参考是`Content-Type`HTTP 标头的值（例如对于 HTML 应该是`text/html`，或者在 XHTML 的情况下它也可能是`application/xhtml+xml`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:10:36.427

您可以使用：**[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)**

```
using System.Net;

using (WebClient client = new WebClient())
{
    client.DownloadFile("http://yoursite.com/anypage.aspx", @"C:\anyfile.html");

    string htmlCode = client.DownloadString("http://yoursite.com/anypage.aspx");
} 
```

# php - 处理退回邮件

> ID：14140481
> 
> 赞同：0
> 
> 时间：2013-01-03T14:07:54.787
> 
> 标签：php

假设我正在使用任何服务提供商发送 1000 封电子邮件。有什么方法可以知道哪些电子邮件无法发送，可能是因为电子邮件 ID 错误？

假设我使用 gmail 服务提供商向“rohit1234@gmail.com”发送了一封电子邮件，并说像“rohit1234@gmail.com”这样的 ID 不存在。所以这不会被交付。我如何从服务提供商处得知这封电子邮件因任何原因未送达？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:13:41.393

您要查找的内容称为“[未送达报告](http://en.wikipedia.org/wiki/Non_delivery_report)”。

链接的 Wikipedia 文章包括[RFC 3464](https://www.rfc-editor.org/rfc/rfc3464)（和 RFC 6522）的链接和示例，其中记录了标准化的报告格式。较旧的邮件服务器是在标准化之前构建的，因此您最终将为此构建*大量*特殊代码。Lotus Notes、旧版本的 Exchange，尤其是 qmail 是最严重的违规者，其中有*很多*。

如果您真的想自己做这件事，而不是像评论中建议的那样使用第三方服务，那么我强烈建议您使用现有的邮件阅读库。我使用Zend 框架 1.x 版中的[Zend Mail取得了一定程度的成功。](http://framework.zend.com/manual/1.12/en/zend.mail.read.html)它公开了每条消息和每条消息中的 MIME 组件，这使得报告块的检测非常简单。

# r - 使用 MICE 包进行多次插补后合并 Cox PH 结果

> ID：14140482
> 
> 赞同：7
> 
> 时间：2013-01-03T14:07:56.853
> 
> 标签：r, cox-regression, r-mice

我有一个包含生存数据和一些缺失协变量的数据集。我已经成功地应用了mice-package来使用该`mice()`函数来估算m个数据集，创建了一个`imputationList`对象并在每个m数据集上应用了一个Cox PH模型。随后，我使用该函数汇总了结果`MIcombine()`。这导致了我的问题：

如何获得每个协变量的汇总估计值的 p 值？它们是否隐藏在`MIcombine`物体内的某个地方？

我知道 p 值并不是一切，但是在没有相应 p 值的情况下报告估计值和置信区间对我来说似乎很奇怪。我可以计算一个近似值。[使用例如Altman 提供的公式](http://www.bmj.com/content/343/bmj.d2304)从置信区间中获取 p 值，但这似乎过于复杂。我已经四处寻找答案，但我什至找不到任何人提到这个问题。我是否忽略了一些明显的东西？

例如：

```
library(survival)
library(mice)
library(mitools)
test1 <- as.data.frame(list(time=c(4,3,1,1,2,2,3,5,2,4,5,1), 
          status=c(1,1,1,0,1,1,0,0,1,1,0,0), 
          x=c(0,2,1,1,NA,NA,0,1,1,2,0,1), 
          sex=c(0,0,0,0,1,1,1,1,NA,1,0,0)))

dat <- mice(test1,m=10)

mit <- imputationList(lapply(1:10,complete,x=dat))

models <- with(mit,coxph(Surv(time, status) ~ x + strata(sex)))

summary(MIcombine(models)) 
```

我试图对 MIcombine 对象的结构进行排序，但到目前为止还没有找到 p 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-20T10:46:01.867

```
models <- with(dat,coxph(Surv(time, status) ~ x + strata(sex)))
summary(pool(models)) 
```

# html - 使用 GWT 和 AppEngine Blobstore 上传多个文件？

> ID：14140483
> 
> 赞同：5
> 
> 时间：2013-01-03T14:07:59.107
> 
> 标签：html, google-app-engine, gwt, file-upload, blobstore

我将如何在 GWT 和 AppEngine Blobstore 中创建一个现代的、类似 Gmail 的多文件上传？

最常见的解决方案是[gwtupload](http://code.google.com/p/gwtupload/)，这是一个由 Manolo Carrasco 编写的优秀 GWT 组件。但是，最新版本 0.6.6 不能与 blobstore 一起使用（至少我不能让它工作），并且它不支持多文件选择。在最新的 0.6.7 快照中有一个多文件选择补丁，但尽管它允许选择多个文件（使用 HTML5 中的“multiple”属性），它仍然在一个巨大的 POST 请求中发送它们（并显示进度一大堆文件）。

还有其他关于 SO 的问题（例如[here](https://stackoverflow.com/questions/7124269/uploading-multiple-images-to-gae-blobstore-using-html5-multiple-file-input)或[here](https://stackoverflow.com/questions/10472244/file-upload-to-appengine-blobstore)），但答案通常使用 HTML5“multiple”属性并将它们作为一个大的 POST 请求发送。它有效，但它不是我所追求的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-03T14:07:59.107

尼克约翰逊为此写了一些[很棒的博客文章](http://blog.notdot.net/2010/03/Implementing-a-dropbox-service-with-the-Blobstore-API-Part-1)。[他使用称为Plupload](http://www.plupload.com/)的通用且广为接受的 JavaScript 上传组件，并将文件上传到用 Python 编写的 AppEngine 应用程序。Plupload 支持不同的后端（*运行时*）以支持多个文件选择（HTML5、flash、Silverlight 等）并处理上传进度和其他与上传相关的客户端事件。

他的解决方案的问题是（1）它在 Python 中，（2）它在 JavaScript 中。这就是[gwt-plupload](http://code.google.com/p/gwt-plupload/)的作用所在。它是由 Samuli Järvelä 编写的 Plupload的[JSNI包装器，它允许在 GWT 环境中使用 Plupload。](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)然而，该项目已经过时（自 2010 年以来没有提交），但我们可以使用它来获得灵感。

因此，以下是构建多文件上传组件的分步说明。这将全部在一个项目中，但它（尤其是 JSNI 包装器）可以提取到它自己的 .jar 文件或库中，以便在其他项目中重用。源代码可[在 Bitbucket 上找到](https://bitbucket.org/joscarsson/gwt-gaemultiupload-example/)。

[该应用程序在http://gwt-gaemultiupload-example.appspot.com/](http://gwt-gaemultiupload-example.appspot.com/)上的 AppEngine 上可用（不计费，所以不要指望它可用或工作）。

## 截图

![示例应用程序屏幕截图](../Images/ebd0f710b7b46a5eba2e97b693ea07f2.png) ![示例应用程序屏幕截图](../Images/4fc38dfe2c7c357f3c08efbba60fded2.png) ![示例应用程序屏幕截图](../Images/1805c55c7e9bc4970d14e3018b6806c5.png)

## 第 1 步 - 小服务程序

Blobstore 的工作方式如下：

1.  客户端向 blobstore 询问可用于上传文件的 URL。
2.  客户端将文件发布到接收到的 URL。
3.  收到整个 POST 后，blobstore 会将客户端重定向到成功 URL（在创建上传 URL 时指定）。

为了支持这一点，我们需要两个 servlet。一个用于生成文件上传的 URL（请注意，每个文件上传都需要一个唯一的 URL），一个用于接收完成的上传。两者都将非常简单。下面是 URL 生成器 servlet，它将以纯文本形式将 URL 写入 HTTP 响应。

```
public class BlobstoreUrlGeneratorServlet extends HttpServlet {     
    private static BlobstoreService blobstore = BlobstoreServiceFactory.getBlobstoreService();

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        resp.setHeader("Content-Type", "text/plain");
        resp.getWriter().write(blobstore.createUploadUrl("/uploadfinished"));
    }
} 
```

然后，用于接收成功上传的 servlet，它将 blobkey 打印到`System.out`：

```
public class BlobstoreUploadFinishedServlet extends HttpServlet {
    private static BlobstoreService blobstore = BlobstoreServiceFactory.getBlobstoreService();

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        Map<String, List<BlobKey>> blobs = blobstore.getUploads(req);
        List<BlobKey> blobKeyList = blobs.get("file");

        if (blobKeyList.size() == 0)
            return;

        BlobKey blobKey = blobKeyList.get(0);

        System.out.println("File with blobkey " + blobKey.getKeyString() + " was saved in blobstore.");
    }
} 
```

我们还需要在`web.xml`.

```
<servlet>
    <servlet-name>urlGeneratorServlet</servlet-name>
    <servlet-class>gaemultiupload.server.BlobstoreUrlGeneratorServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>urlGeneratorServlet</servlet-name>
    <url-pattern>/generateblobstoreurl</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>uploadFinishedServlet</servlet-name>
    <servlet-class>gaemultiupload.server.BlobstoreUploadFinishedServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>uploadFinishedServlet</servlet-name>
    <url-pattern>/uploadfinished</url-pattern>
</servlet-mapping> 
```

如果我们现在运行应用程序并访问`http://127.0.0.1:8888/generateblobstoreurl`，我们将看到类似

```
http://<computername>:8888/_ah/upload/ahpnd3QtZ2FlbXVsdGl1cGxvYWQtZXhhbXBsZXIbCxIVX19CbG9iVXBsb2FkU2Vzc2lvbl9fGAEM 
```

如果我们要将文件发布到该 URL，它将保存在 blobstore 中。但是请注意，本地开发 Web 服务器的默认 URL 是`http://127.0.0.1:8888/`，而 blobstore 生成的 URL 是`http://<computername>:8888/`. 这将在以后引起问题，因为出于安全原因，Plupload 将无法将文件 POST 到另一个域。这只发生在本地开发服务器上，发布的应用程序只有一个 URL。通过编辑 Eclipse 中的运行配置来修复它，添加`-bindAddress <computername>`到参数中。这将导致本地开发服务器改为托管 Web 应用程序`http://<computername>:8888/`。您可能需要`<computername>`在 GWT 浏览器插件中允许它在此更改后加载应用程序。

到目前为止一切顺利，我们拥有了我们需要的 servlet。

# 第 2 步 - 上传

下载 Plupload（我使用的是最新版本，1.5.4），解压缩，并将`js`文件夹复制到`war`我们 GWT 应用程序的目录中。对于这个例子，我们不会使用`jquery.plupload.queue`或者`jquery.ui.plupload`我们将创建自己的 GUI。我们还需要 jQuery，它是我从[Google APIs](https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js)下载的。

接下来，我们需要在我们的应用程序中包含 JavaScript，因此编辑`index.html`并将以下内容添加到`<head>`标签中。

```
<script type="text/javascript" language="javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" language="javascript" src="js/plupload.full.js"></script> 
```

所以现在我们的应用程序中包含了 Plupload。接下来，我们需要将它包装起来以便能够与 GWT 一起使用。这是使用 gwt-plupload 的地方。我没有使用项目中的 jar 文件，而是复制了源文件以便能够对它们进行修改。包装器的主要对象是`Plupload`类，它由`PluploadBuilder`. 还有接口`PluploadListener`，可以实现接收客户端事件。

# 第 3 步 - 将其放在一起

所以现在我们需要在我们的 GWT 应用程序中实际使用 Plupload。我将以下内容添加到`Index.ui.xml`UIBinder：

```
<g:Button text="Browse" ui:field="btnBrowse" />
<g:Button text="Start Upload" ui:field="btnStart" /><br />
<br />
<h:CellTable width="600px" ui:field="tblFiles" /> 
```

有一个用于浏览文件的按钮、一个用于开始上传的按钮和一个用于显示上传状态的 CellTable。在`Index.java`中，我们初始化 Plupload 如下：

```
btnBrowse.getElement().setId("btn-browse");
PluploadBuilder builder = new PluploadBuilder();
builder.runtime("html5");
builder.useQueryString(false);
builder.multipart(true);
builder.browseButton(btnBrowse.getElement().getId());
builder.listener(this);
plupload = builder.create();
plupload.init(); 
```

该`runtime`属性告诉 Plupload 使用哪个后端（我只测试了 HTML5，但其他的应该也可以）。`multipart`需要启用Blobstore 。我们还需要为浏览按钮设置一个 ID，然后告诉 Plupload 使用该 ID。单击此按钮将弹出 Plupload 的文件选择对话框。最后，我们将自己添加为侦听器（实现`PluploadListener`）`create()`和`init()`Plupload。

要显示准备上传的文件，我们只需将数据添加到`tblFilesDataProvider`事件中的列表数据提供程序 from `UploadListener`。

```
@Override
public void onFilesAdded(Plupload p, List<File> files) {
    tblFilesDataProvider.getList().addAll(files);
} 
```

要显示进度，我们只需在收到进度更改通知时更新列表：

```
@Override
public void onFileUploadProgress(Plupload p, File file) {
    tblFilesDataProvider.refresh();
} 
```

我们还为 实现了一个点击处理程序`btnStart`，它只是告诉 Plupload 开始上传。

```
@UiHandler("btnStart")
void btnStart_Click(ClickEvent event) {
    plupload.start();
} 
```

现在可以选择文件，它们将被添加到待上传列表中，我们可以开始上传。剩下的唯一部分就是实际使用我们之前实现的 servlet。目前，Plupload 不知道 POST 上传到哪个 URL，所以我们需要告诉它。这是我对 gwt-plupload 源代码进行更改的地方（除了小错误修复）；我向 Plupload 添加了一个名为`fetchNewUploadUrl`. 它的作用是在我们之前定义的 servlet 上执行 Ajax GET 请求以获取上传 URL。它同步执行此操作（为什么稍后会清楚）。当请求返回时，它将这个 URL 设置为 Plupload 的 POST URL。

```
private native void fetchNewUploadUrl(Plupload pl) /*-{
    $wnd.$.ajax({
        url: '/generateblobstoreurl',
        async: false,
        success: function(data) {
          pl.settings.url = data;
        },
    });
}-*/;

public void fetchNewUploadUrl() {
    fetchNewUploadUrl(this);
} 
```

Plupload 将在其自己的 POST 请求中发布每个文件。这意味着我们需要在每次上传开始之前给它一个新的 URL。`PluploadListener`幸运的是，我们可以实现一个事件。这就是请求必须同步的原因：否则在我们在下面的事件处理程序中收到上传 URL 之前，上传就会开始（`pl.fetchNewUploadUrl()`会立即返回）。

```
@Override
public void onBeforeUpload(Plupload pl, File cast) {
    pl.fetchNewUploadUrl();
} 
```

就是这样！您现在拥有 GWT HTML5 多文件上传功能，可将文件放置在 AppEngine Blobstore 中！

# 传递参数

如果您想添加其他参数（例如上传文件所属实体的 ID），我添加了一个有关如何添加的示例。有一个方法`Plupload`叫做`setExtraValue()`我实现为：

```
public native void setExtraValue(String value) /*-{
    this.settings.multipart_params = {extravalue: value}
}-*/; 
```

额外的值可以作为`multipart_params`. 这是一个映射，因此可以扩展功能以允许许多任意键值对。该值可以在`onBeforeUpload()`事件处理程序中设置

```
@Override
public void onBeforeUpload(Plupload pl, File cast) {
    pl.setExtraValue(System.currentTimeMillis() + " is unique.");
    pl.fetchNewUploadUrl();
} 
```

并在接收完成上传的 servlet 中检索为

```
String value = req.getParameter("extravalue"); 
```

示例项目包含此示例代码。

# 最后的话

我绝不是专家级 GWT 开发人员。这是我经过数小时的挫折后想出的，没有找到我想要的功能。在我开始工作后，我想我应该写一个**完整**的例子，因为我使用/关注的每个组件/博客文章/等都遗漏了一些部分。我并不以任何方式暗示这是最佳实践代码。欢迎提出意见、改进和建议！

# c# - 改变 kinect 角度会改变身体角度

> ID：14140490
> 
> 赞同：0
> 
> 时间：2013-01-03T14:08:14.740
> 
> 标签：c#, kinect

我遇到了一个问题，我不知道如何解决它我正在寻找身体各个关节的角度（比如说肩关节）问题是将 kinect 设置在不同的高度和不同的角度会改变关节的角度我应该怎么做

我知道什么时候方法是从地板固定高度 kinect 并将我的应用程序中的角度设置为一个 kinect 角度，但这不是好的编程。如果有人改变了 kinect 角度，如果关节角度不同，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:13:14.313

这就是为什么很多游戏在关卡启动等过程中都会设置“校准”阶段的原因……需要校准的软件默认让用户知道在校准后不要更改角度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:30:52.567

对于“校准”，您可以查看此页面[http://channel9.msdn.com/coding4fun/kinect/One-example-of-a-Kinect-calibration-method](http://channel9.msdn.com/coding4fun/kinect/One-example-of-a-Kinect-calibration-method)

主要思想是存储每个角度的跟踪关节数，并选择跟踪关节数最多的角度。

# html - 如何实现 SVG 1.2 Tiny textArea？

> ID：14140493
> 
> 赞同：9
> 
> 时间：2013-01-03T14:08:15.250
> 
> 标签：html, svg

我最近在互联网上浏览到 SVG 本地有一个[textArea](http://www.w3.org/TR/SVGTiny12/text.html#TextInAnArea)（我可能需要这个用于文本换行）

我使用了该示例并在 HTML5 元素内的 Chrome 上对其进行了测试，但它不会显示 textArea 元素，有人知道如何正确实现 SVG textArea 吗？还是可能还不支持 SVG 1.2 tiny？（我只使用通常的 SVG 1.1）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T14:39:02.247

检查 UA 是否支持[http://www.w3.org/Graphics/SVG/feature/1.2/#TextFlow](http://w3.org/TR/SVGTiny12/feature.html#specific)特征字符串，如果支持则显示 SVG textArea，否则在 foreignObject 中显示 html textarea，例如

```
<switch>
    <g requiredFeatures="http://www.w3.org/Graphics/SVG/feature/1.2/#TextFlow">
        <textArea width="200" height="300">whatever</textArea>
    </g>
    <foreignObject width="200" height="300">
        <textArea xmlns="http://www.w3.org/1999/xhtml" style="width: 200px;height: 300px">otherwise</textArea>
    </foreignObject>
</switch> 
```

# python - 如何从相机（或网络摄像头）在 python 中捕获视频（和音频）

> ID：14140495
> 
> 赞同：28
> 
> 时间：2013-01-03T14:08:17.510
> 
> 标签：python, video-capture

我正在寻找一个解决方案，无论是在 linux 还是在 windows 中，它都可以让我

*   同时从我的网络摄像头和麦克风录制视频（+音频）。
*   将其保存为 file.AVI（或 mpg 或其他）
*   录制时在屏幕上显示视频

就我而言，压缩不是问题，我实际上更喜欢捕获 RAW 并在以后压缩它。

到目前为止，我已经用 VB 中的一个 ActiveX 组件完成了它，它处理了所有事情，我想继续使用 python（VB 解决方案不稳定、不可靠）。

到目前为止，我已经看到仅捕获 VIDEO 或单个帧的代码...

到目前为止我看过

*   OpenCV - 在那里找不到音频捕获
*   PyGame - 没有同时捕获音频（AFAIK）
*   VideoCapture - 仅提供单帧。
*   SimpleCV - 没有音频
*   VLC - 将 VideoLAN 程序绑定到 wxPthon - 希望它会做（仍在研究这个选项）
*   kivy - 刚刚听说过，没能让它在 Windows SO FAR 下工作。

问题 - 是否有用于 python 的视频和音频捕获库？

或 - 如果有的话，还有哪些其他选择？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2016-05-13T11:47:51.670

答：没有。python 中没有单一的库/解决方案可以同时进行视频/音频录制。您必须分别实现并以智能方式合并音频和视频信号以最终生成视频/音频文件。

我为您提出的问题找到了解决方案。我的代码解决了您的三个问题：

*   同时录制来自网络摄像头和麦克风的视频和音频。
*   它将最终的视频/音频文件保存为 .AVI
*   取消注释第 76、77 和 78 行将使视频在录制时显示在屏幕上。

我的解决方案`pyaudio`用于音频录制、`opencv`视频录制和`ffmpeg`混合两个信号。为了能够同时记录两者，我使用多线程。一个线程录制视频，第二个线程录制音频。我已经将我的代码上传到了 github，并且在这里也包含了它的所有重要部分。

[https://github.com/JRodrigoF/AVrecordeR](https://github.com/JRodrigoF/AVrecordeR)

注意：`opencv`无法控制网络摄像头进行录制的 fps。它只能在文件的编码中指定所需的最终 fps，但网络摄像头通常会根据规格和光照条件（我发现）表现不同。因此必须在代码级别控制 fps。

```
import cv2
import pyaudio
import wave
import threading
import time
import subprocess
import os

class VideoRecorder():  

    # Video class based on openCV 
    def __init__(self):

        self.open = True
        self.device_index = 0
        self.fps = 6               # fps should be the minimum constant rate at which the camera can
        self.fourcc = "MJPG"       # capture images (with no decrease in speed over time; testing is required)
        self.frameSize = (640,480) # video formats and sizes also depend and vary according to the camera used
        self.video_filename = "temp_video.avi"
        self.video_cap = cv2.VideoCapture(self.device_index)
        self.video_writer = cv2.VideoWriter_fourcc(*self.fourcc)
        self.video_out = cv2.VideoWriter(self.video_filename, self.video_writer, self.fps, self.frameSize)
        self.frame_counts = 1
        self.start_time = time.time()

    # Video starts being recorded 
    def record(self):

#       counter = 1
        timer_start = time.time()
        timer_current = 0

        while(self.open==True):
            ret, video_frame = self.video_cap.read()
            if (ret==True):

                    self.video_out.write(video_frame)
#                   print str(counter) + " " + str(self.frame_counts) + " frames written " + str(timer_current)
                    self.frame_counts += 1
#                   counter += 1
#                   timer_current = time.time() - timer_start
                    time.sleep(0.16)
#                   gray = cv2.cvtColor(video_frame, cv2.COLOR_BGR2GRAY)
#                   cv2.imshow('video_frame', gray)
#                   cv2.waitKey(1)
            else:
                break

                # 0.16 delay -> 6 fps
                # 

    # Finishes the video recording therefore the thread too
    def stop(self):

        if self.open==True:

            self.open=False
            self.video_out.release()
            self.video_cap.release()
            cv2.destroyAllWindows()

        else: 
            pass

    # Launches the video recording function using a thread          
    def start(self):
        video_thread = threading.Thread(target=self.record)
        video_thread.start()

class AudioRecorder():

    # Audio class based on pyAudio and Wave
    def __init__(self):

        self.open = True
        self.rate = 44100
        self.frames_per_buffer = 1024
        self.channels = 2
        self.format = pyaudio.paInt16
        self.audio_filename = "temp_audio.wav"
        self.audio = pyaudio.PyAudio()
        self.stream = self.audio.open(format=self.format,
                                      channels=self.channels,
                                      rate=self.rate,
                                      input=True,
                                      frames_per_buffer = self.frames_per_buffer)
        self.audio_frames = []

    # Audio starts being recorded
    def record(self):

        self.stream.start_stream()
        while(self.open == True):
            data = self.stream.read(self.frames_per_buffer) 
            self.audio_frames.append(data)
            if self.open==False:
                break

    # Finishes the audio recording therefore the thread too    
    def stop(self):

        if self.open==True:
            self.open = False
            self.stream.stop_stream()
            self.stream.close()
            self.audio.terminate()

            waveFile = wave.open(self.audio_filename, 'wb')
            waveFile.setnchannels(self.channels)
            waveFile.setsampwidth(self.audio.get_sample_size(self.format))
            waveFile.setframerate(self.rate)
            waveFile.writeframes(b''.join(self.audio_frames))
            waveFile.close()

        pass

    # Launches the audio recording function using a thread
    def start(self):
        audio_thread = threading.Thread(target=self.record)
        audio_thread.start()

def start_AVrecording(filename):

    global video_thread
    global audio_thread

    video_thread = VideoRecorder()
    audio_thread = AudioRecorder()

    audio_thread.start()
    video_thread.start()

    return filename

def start_video_recording(filename):

    global video_thread

    video_thread = VideoRecorder()
    video_thread.start()

    return filename

def start_audio_recording(filename):

    global audio_thread

    audio_thread = AudioRecorder()
    audio_thread.start()

    return filename

def stop_AVrecording(filename):

    audio_thread.stop() 
    frame_counts = video_thread.frame_counts
    elapsed_time = time.time() - video_thread.start_time
    recorded_fps = frame_counts / elapsed_time
    print "total frames " + str(frame_counts)
    print "elapsed time " + str(elapsed_time)
    print "recorded fps " + str(recorded_fps)
    video_thread.stop() 

    # Makes sure the threads have finished
    while threading.active_count() > 1:
        time.sleep(1)

#    Merging audio and video signal

    if abs(recorded_fps - 6) >= 0.01:    # If the fps rate was higher/lower than expected, re-encode it to the expected

        print "Re-encoding"
        cmd = "ffmpeg -r " + str(recorded_fps) + " -i temp_video.avi -pix_fmt yuv420p -r 6 temp_video2.avi"
        subprocess.call(cmd, shell=True)

        print "Muxing"
        cmd = "ffmpeg -ac 2 -channel_layout stereo -i temp_audio.wav -i temp_video2.avi -pix_fmt yuv420p " + filename + ".avi"
        subprocess.call(cmd, shell=True)

    else:

        print "Normal recording\nMuxing"
        cmd = "ffmpeg -ac 2 -channel_layout stereo -i temp_audio.wav -i temp_video.avi -pix_fmt yuv420p " + filename + ".avi"
        subprocess.call(cmd, shell=True)

        print ".."

# Required and wanted processing of final files
def file_manager(filename):

    local_path = os.getcwd()

    if os.path.exists(str(local_path) + "/temp_audio.wav"):
        os.remove(str(local_path) + "/temp_audio.wav")

    if os.path.exists(str(local_path) + "/temp_video.avi"):
        os.remove(str(local_path) + "/temp_video.avi")

    if os.path.exists(str(local_path) + "/temp_video2.avi"):
        os.remove(str(local_path) + "/temp_video2.avi")

    if os.path.exists(str(local_path) + "/" + filename + ".avi"):
        os.remove(str(local_path) + "/" + filename + ".avi") 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-03-05T10:49:55.093

对于上面提出的问题：是的，代码也应该在 Python3 下工作。我对其进行了一些调整，现在适用于 python2 和 python3（在 2.7 和 3.6 的 windows7 上对其进行了测试，尽管您需要安装 ffmpeg 或至少在同一目录中安装可执行文件 ffmpeg.exe，您可以在此处获取它：[https ://www.ffmpeg.org/download.html](https://www.ffmpeg.org/download.html)）。当然，您还需要安装所有其他库 cv2、numpy、pyaudio，如下所示：

```
pip install opencv-python numpy pyaudio 
```

您现在可以直接运行代码：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
# VideoRecorder.py

from __future__ import print_function, division
import numpy as np
import cv2
import pyaudio
import wave
import threading
import time
import subprocess
import os

class VideoRecorder():  
    "Video class based on openCV"
    def __init__(self, name="temp_video.avi", fourcc="MJPG", sizex=640, sizey=480, camindex=0, fps=30):
        self.open = True
        self.device_index = camindex
        self.fps = fps                  # fps should be the minimum constant rate at which the camera can
        self.fourcc = fourcc            # capture images (with no decrease in speed over time; testing is required)
        self.frameSize = (sizex, sizey) # video formats and sizes also depend and vary according to the camera used
        self.video_filename = name
        self.video_cap = cv2.VideoCapture(self.device_index)
        self.video_writer = cv2.VideoWriter_fourcc(*self.fourcc)
        self.video_out = cv2.VideoWriter(self.video_filename, self.video_writer, self.fps, self.frameSize)
        self.frame_counts = 1
        self.start_time = time.time()

    def record(self):
        "Video starts being recorded"
        # counter = 1
        timer_start = time.time()
        timer_current = 0
        while self.open:
            ret, video_frame = self.video_cap.read()
            if ret:
                self.video_out.write(video_frame)
                # print(str(counter) + " " + str(self.frame_counts) + " frames written " + str(timer_current))
                self.frame_counts += 1
                # counter += 1
                # timer_current = time.time() - timer_start
                time.sleep(1/self.fps)
                # gray = cv2.cvtColor(video_frame, cv2.COLOR_BGR2GRAY)
                # cv2.imshow('video_frame', gray)
                # cv2.waitKey(1)
            else:
                break

    def stop(self):
        "Finishes the video recording therefore the thread too"
        if self.open:
            self.open=False
            self.video_out.release()
            self.video_cap.release()
            cv2.destroyAllWindows()

    def start(self):
        "Launches the video recording function using a thread"
        video_thread = threading.Thread(target=self.record)
        video_thread.start()

class AudioRecorder():
    "Audio class based on pyAudio and Wave"
    def __init__(self, filename="temp_audio.wav", rate=44100, fpb=1024, channels=2):
        self.open = True
        self.rate = rate
        self.frames_per_buffer = fpb
        self.channels = channels
        self.format = pyaudio.paInt16
        self.audio_filename = filename
        self.audio = pyaudio.PyAudio()
        self.stream = self.audio.open(format=self.format,
                                      channels=self.channels,
                                      rate=self.rate,
                                      input=True,
                                      frames_per_buffer = self.frames_per_buffer)
        self.audio_frames = []

    def record(self):
        "Audio starts being recorded"
        self.stream.start_stream()
        while self.open:
            data = self.stream.read(self.frames_per_buffer) 
            self.audio_frames.append(data)
            if not self.open:
                break

    def stop(self):
        "Finishes the audio recording therefore the thread too"
        if self.open:
            self.open = False
            self.stream.stop_stream()
            self.stream.close()
            self.audio.terminate()
            waveFile = wave.open(self.audio_filename, 'wb')
            waveFile.setnchannels(self.channels)
            waveFile.setsampwidth(self.audio.get_sample_size(self.format))
            waveFile.setframerate(self.rate)
            waveFile.writeframes(b''.join(self.audio_frames))
            waveFile.close()

    def start(self):
        "Launches the audio recording function using a thread"
        audio_thread = threading.Thread(target=self.record)
        audio_thread.start()

def start_AVrecording(filename="test"):
    global video_thread
    global audio_thread
    video_thread = VideoRecorder()
    audio_thread = AudioRecorder()
    audio_thread.start()
    video_thread.start()
    return filename

def start_video_recording(filename="test"):
    global video_thread
    video_thread = VideoRecorder()
    video_thread.start()
    return filename

def start_audio_recording(filename="test"):
    global audio_thread
    audio_thread = AudioRecorder()
    audio_thread.start()
    return filename

def stop_AVrecording(filename="test"):
    audio_thread.stop() 
    frame_counts = video_thread.frame_counts
    elapsed_time = time.time() - video_thread.start_time
    recorded_fps = frame_counts / elapsed_time
    print("total frames " + str(frame_counts))
    print("elapsed time " + str(elapsed_time))
    print("recorded fps " + str(recorded_fps))
    video_thread.stop() 

    # Makes sure the threads have finished
    while threading.active_count() > 1:
        time.sleep(1)

    # Merging audio and video signal
    if abs(recorded_fps - 6) >= 0.01:    # If the fps rate was higher/lower than expected, re-encode it to the expected
        print("Re-encoding")
        cmd = "ffmpeg -r " + str(recorded_fps) + " -i temp_video.avi -pix_fmt yuv420p -r 6 temp_video2.avi"
        subprocess.call(cmd, shell=True)
        print("Muxing")
        cmd = "ffmpeg -y -ac 2 -channel_layout stereo -i temp_audio.wav -i temp_video2.avi -pix_fmt yuv420p " + filename + ".avi"
        subprocess.call(cmd, shell=True)
    else:
        print("Normal recording\nMuxing")
        cmd = "ffmpeg -y -ac 2 -channel_layout stereo -i temp_audio.wav -i temp_video.avi -pix_fmt yuv420p " + filename + ".avi"
        subprocess.call(cmd, shell=True)
        print("..")

def file_manager(filename="test"):
    "Required and wanted processing of final files"
    local_path = os.getcwd()
    if os.path.exists(str(local_path) + "/temp_audio.wav"):
        os.remove(str(local_path) + "/temp_audio.wav")
    if os.path.exists(str(local_path) + "/temp_video.avi"):
        os.remove(str(local_path) + "/temp_video.avi")
    if os.path.exists(str(local_path) + "/temp_video2.avi"):
        os.remove(str(local_path) + "/temp_video2.avi")
    # if os.path.exists(str(local_path) + "/" + filename + ".avi"):
    #     os.remove(str(local_path) + "/" + filename + ".avi")

if __name__ == '__main__':
    start_AVrecording()
    time.sleep(5)
    stop_AVrecording()
    file_manager() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-03T14:11:32.037

我会推荐 ffmpeg。有一个 python 包装器。

[http://code.google.com/p/pyffmpeg/](http://code.google.com/p/pyffmpeg/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-10T19:04:16.337

我一直在寻找一个很好的答案，我认为它是[GStreamer](http://gstreamer.freedesktop.org/modules/gst-python.html) ...

python 绑定的文档非常简单，大部分似乎都围绕着旧的 0.10 版本的 GStreamer 而不是新的 1.X 版本，但 GStreamer 是一个非常强大的跨平台多媒体框架，可以流式传输、复用、转码，并显示几乎所有内容。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-03-21T21:02:09.083

我在一个项目中使用了 JRodrigoF 的脚本一段时间。但是，我注意到有时线程会挂起，这会导致程序崩溃。另一个问题是 openCV 不能以可靠的速率捕获视频帧，并且 ffmpeg 在重新编码时会扭曲我的视频。

我想出了一个新的解决方案，它可以更可靠地记录我的应用程序并提供更高的质量。它目前仅适用于 Windows，因为它使用`pywinauto`内置的 Windows 相机应用程序。脚本的最后一位通过检查视频名称的时间戳来进行一些错误检查，以确认视频成功录制。

[https://gist.github.com/mjdargen/956cc968864f38bfc4e20c9798c7d670](https://gist.github.com/mjdargen/956cc968864f38bfc4e20c9798c7d670)

```
import pywinauto
import time
import subprocess
import os
import datetime

def win_record(duration):
    subprocess.run('start microsoft.windows.camera:', shell=True)  # open camera app

    # focus window by getting handle using title and class name
    # subprocess call opens camera and gets focus, but this provides alternate way
    # t, c = 'Camera', 'ApplicationFrameWindow'
    # handle = pywinauto.findwindows.find_windows(title=t, class_name=c)[0]
    # # get app and window
    # app = pywinauto.application.Application().connect(handle=handle)
    # window = app.window(handle=handle)
    # window.set_focus()  # set focus
    time.sleep(2)  # have to sleep

    # take control of camera window to take video
    desktop = pywinauto.Desktop(backend="uia")
    cam = desktop['Camera']
    # cam.print_control_identifiers()
    # make sure in video mode
    if cam.child_window(title="Switch to Video mode", auto_id="CaptureButton_1", control_type="Button").exists():
        cam.child_window(title="Switch to Video mode", auto_id="CaptureButton_1", control_type="Button").click()
    time.sleep(1)
    # start then stop video
    cam.child_window(title="Take Video", auto_id="CaptureButton_1", control_type="Button").click()
    time.sleep(duration+2)
    cam.child_window(title="Stop taking Video", auto_id="CaptureButton_1", control_type="Button").click()

    # retrieve vids from camera roll and sort
    dir = 'C:/Users/m/Pictures/Camera Roll'
    all_contents = list(os.listdir(dir))
    vids = [f for f in all_contents if "_Pro.mp4" in f]
    vids.sort()
    vid = vids[-1]  # get last vid
    # compute time difference
    vid_time = vid.replace('WIN_', '').replace('_Pro.mp4', '')
    vid_time = datetime.datetime.strptime(vid_time, '%Y%m%d_%H_%M_%S')
    now = datetime.datetime.now()
    diff = now - vid_time
    # time different greater than 2 minutes, assume something wrong & quit
    if diff.seconds > 120:
        quit()

    subprocess.run('Taskkill /IM WindowsCamera.exe /F', shell=True)  # close camera app
    print('Recorded successfully!')

win_record(2) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-23T07:36:52.153

你可以做离线 html,js 代码来做视频和录音。使用 python lib python webview 打开该页面。它应该可以正常工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-04T13:16:35.217

在使用 JRodrigoF 的解决方案时，我随机收到“[Errno -9999] 意外主机错误”，发现这是由于竞争条件造成的，在 AudioRecorder 类的 record() 中最后一次读取音频流之前可以关闭它。

我稍作修改，以便在 while 循环之后完成所有关闭过程，并添加了一个函数 list_audio_devices()，它显示了可供选择的音频设备列表。我还添加了音频设备索引作为参数来选择音频设备。

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
# VideoRecorder.py

from __future__ import print_function, division
import numpy as np
import cv2
import pyaudio
import wave
import threading
import time
import subprocess
import os

class VideoRecorder():
    "Video class based on openCV"
    def __init__(self, name="temp_video.avi", fourcc="MJPG", sizex=640, sizey=480, camindex=0, fps=30):
        self.open = True
        self.device_index = camindex
        self.fps = fps                  # fps should be the minimum constant rate at which the camera can
        self.fourcc = fourcc            # capture images (with no decrease in speed over time; testing is required)
        self.frameSize = (sizex, sizey) # video formats and sizes also depend and vary according to the camera used
        self.video_filename = name
        self.video_cap = cv2.VideoCapture(self.device_index)
        self.video_writer = cv2.VideoWriter_fourcc(*self.fourcc)
        self.video_out = cv2.VideoWriter(self.video_filename, self.video_writer, self.fps, self.frameSize)
        self.frame_counts = 1
        self.start_time = time.time()

    def record(self):
        "Video starts being recorded"
        # counter = 1
        timer_start = time.time()
        timer_current = 0
        while self.open:
            ret, video_frame = self.video_cap.read()
            if ret:
                self.video_out.write(video_frame)
                # print(str(counter) + " " + str(self.frame_counts) + " frames written " + str(timer_current))
                self.frame_counts += 1
                # counter += 1
                # timer_current = time.time() - timer_start
                time.sleep(1/self.fps)
                # gray = cv2.cvtColor(video_frame, cv2.COLOR_BGR2GRAY)
                # cv2.imshow('video_frame', gray)
                # cv2.waitKey(1)
            else:
                break

    def stop(self):
        "Finishes the video recording therefore the thread too"
        if self.open:
            self.open=False
            self.video_out.release()
            self.video_cap.release()
            cv2.destroyAllWindows()

    def start(self):
        "Launches the video recording function using a thread"
        video_thread = threading.Thread(target=self.record)
        video_thread.start()

class AudioRecorder():
    "Audio class based on pyAudio and Wave"
    def __init__(self, filename="temp_audio.wav", rate=44100, fpb=2**12, channels=1, audio_index=0):
        self.open = True
        self.rate = rate
        self.frames_per_buffer = fpb
        self.channels = channels
        self.format = pyaudio.paInt16
        self.audio_filename = filename
        self.audio = pyaudio.PyAudio()
        self.stream = self.audio.open(format=self.format,
                                      channels=self.channels,
                                      rate=self.rate,
                                      input=True,
                                      input_device_index=audio_index,
                                      frames_per_buffer = self.frames_per_buffer)
        self.audio_frames = []

    def record(self):
        "Audio starts being recorded"
        self.stream.start_stream()
        t_start = time.time_ns()
        while self.open:
            try:
                data = self.stream.read(self.frames_per_buffer)
                self.audio_frames.append(data)
            except Exception as e:
                print('\n' + '*'*80)
                print('PyAudio read exception at %.1fms\n' % ((time.time_ns() - t_start)/10**6))
                print(e)
                print('*'*80 + '\n')
            time.sleep(0.01)
        self.stream.stop_stream()
        self.stream.close()
        self.audio.terminate()
        waveFile = wave.open(self.audio_filename, 'wb')
        waveFile.setnchannels(self.channels)
        waveFile.setsampwidth(self.audio.get_sample_size(self.format))
        waveFile.setframerate(self.rate)
        waveFile.writeframes(b''.join(self.audio_frames))
        waveFile.close()

    def stop(self):
        "Finishes the audio recording therefore the thread too"
        if self.open:
            self.open = False

    def start(self):
        "Launches the audio recording function using a thread"
        audio_thread = threading.Thread(target=self.record)
        audio_thread.start()

def start_AVrecording(filename="test", audio_index=0, sample_rate=44100):
    global video_thread
    global audio_thread
    video_thread = VideoRecorder()
    audio_thread = AudioRecorder(audio_index=audio_index, rate=sample_rate)
    audio_thread.start()
    video_thread.start()
    return filename

def start_video_recording(filename="test"):
    global video_thread
    video_thread = VideoRecorder()
    video_thread.start()
    return filename

def start_audio_recording(filename="test", audio_index=0, sample_rate=44100):
    global audio_thread
    audio_thread = AudioRecorder(audio_index=audio_index, rate=sample_rate)
    audio_thread.start()
    return filename

def stop_AVrecording(filename="test"):
    audio_thread.stop()
    frame_counts = video_thread.frame_counts
    elapsed_time = time.time() - video_thread.start_time
    recorded_fps = frame_counts / elapsed_time
    print("total frames " + str(frame_counts))
    print("elapsed time " + str(elapsed_time))
    print("recorded fps " + str(recorded_fps))
    video_thread.stop()

    # Makes sure the threads have finished
    while threading.active_count() > 1:
        time.sleep(1)

    # Merging audio and video signal
    if abs(recorded_fps - 6) >= 0.01:    # If the fps rate was higher/lower than expected, re-encode it to the expected
        print("Re-encoding")
        cmd = "ffmpeg -r " + str(recorded_fps) + " -i temp_video.avi -pix_fmt yuv420p -r 6 temp_video2.avi"
        subprocess.call(cmd, shell=True)
        print("Muxing")
        cmd = "ffmpeg -y -ac 2 -channel_layout stereo -i temp_audio.wav -i temp_video2.avi -pix_fmt yuv420p " + filename + ".avi"
        subprocess.call(cmd, shell=True)
    else:
        print("Normal recording\nMuxing")
        cmd = "ffmpeg -y -ac 2 -channel_layout stereo -i temp_audio.wav -i temp_video.avi -pix_fmt yuv420p " + filename + ".avi"
        subprocess.call(cmd, shell=True)
        print("..")

def file_manager(filename="test"):
    "Required and wanted processing of final files"
    local_path = os.getcwd()
    if os.path.exists(str(local_path) + "/temp_audio.wav"):
        os.remove(str(local_path) + "/temp_audio.wav")
    if os.path.exists(str(local_path) + "/temp_video.avi"):
        os.remove(str(local_path) + "/temp_video.avi")
    if os.path.exists(str(local_path) + "/temp_video2.avi"):
        os.remove(str(local_path) + "/temp_video2.avi")
    # if os.path.exists(str(local_path) + "/" + filename + ".avi"):
    #     os.remove(str(local_path) + "/" + filename + ".avi")

def list_audio_devices(name_filter=None):
    pa = pyaudio.PyAudio()
    device_index = None
    sample_rate = None
    for x in range(pa.get_device_count()):
        info = pa.get_device_info_by_index(x)
        print(pa.get_device_info_by_index(x))
        if name_filter is not None and name_filter in info['name']:
            device_index = info['index']
            sample_rate = int(info['defaultSampleRate'])
            break
    return device_index, sample_rate

if __name__ == '__main__':
    start_AVrecording()
    time.sleep(5)
    stop_AVrecording()
    file_manager() 
```

# javascript - Does JavaScript run again when the browser retrieves a cached html page?

> ID：14140500
> 
> 赞同：2
> 
> 时间：2013-01-03T14:08:29.007
> 
> 标签：javascript, html, ajax, http, caching

I have a html page that doesn't change too much and I want to cache it for one week for ex. In this html I have some JS scripts that does some ajax requests and modifies the html. When the browser loads this page, does the JS scripts run?

10x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:09:21.017

Yea, it does.
JavaScript is always executed on page load, cached or not.

Unless you're postponing the JS with a `onload` handler, of course, then it's executed after the page's loaded.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:14:59.213

Yes, JS code runs each time the page is loaded. As well, you can use onLoad event on body tag or jQuery event $(docuemnt).load(...).

# mysql - 如何设计索引/查询以避免在简单的 MySQL 查询中进行文件排序？

> ID：14140504
> 
> 赞同：0
> 
> 时间：2013-01-03T14:08:36.420
> 
> 标签：mysql, indexing, query-optimization, filesort

我有一张桌子`entrytable`，里面有`datum`, `username`, `status`, `status_spam_user`,`status_spam_system`和`text`.

我想从具有`username`, `status`, `status_spam_user`,的特定值的行中选择列文本的内容`status_spam_system`。由于这可能会导致一长串条目（> 30'000），我想限制匹配行的数量。在此之前，匹配的行应按 column 排序`datum`。

```
SELECT text
FROM entrytable
WHERE user = 'username' &&
`status` = '1' && (
    `status_spam_user` = 'no_spam'
    || (
        `status_spam_user` = 'neutral' &&
        `status_spam_system` = 'neutral'
    )
)
ORDER BY datum DESC
LIMIT 6430 , 10 
```

我在表中添加了两个索引：

*   index_datum（基准）
*   index_status_mit_spam（用户，状态，status_spam_user，status_spam_system）

对于此查询，`index_status_mit_spam`使用索引。由于索引不包含列`datum`的信息，因此必须单独进行排序（即文件排序）。是否可以以某种方式设计我的查询/索引，它对`WHERE`以及有用`ORDER BY`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:10:59.700

在 status_spam_user/status_spam_system上的 index 上添加索引`(user, status, datum)` 不能使用，因为 OR 条件（它被使用到状态部分），并且必须使用索引的所有先前部分才能满足 order by part一个索引

# c++ - 清单常量与 C++ 关键字“const”

> ID：14140506
> 
> 赞同：10
> 
> 时间：2013-01-03T14:08:41.227
> 
> 标签：c++

阅读 Meyers 的书（第 2 项“Prefer const to #define）我想理解下面列出的一些句子：

1.  参考`#define ASPECT_RATIO 1.653`和`const aspect_ratio = 1.653`Meyers 之间的比较，“......在浮点常量的情况下（例如在此示例中），使用常量可能会产生比使用更小的代码`#define`。” 问题是：迈耶斯的代码越小，可执行文件的磁盘空间就越小？为什么它更小？我认为这在 32 位系统上可能是有效的，因为在这种情况下，一个`int`（或指针）需要 4 个字节和一个双 8 个字节。因为`ASPECT_RATIO`可能不会进入符号表，所以名称被替换为值，而在其他情况下可以使用`const`指向唯一双精度值的指针。在这种情况下，这个概念在 64 位机器上将不再有效（因为指针和双精度是相同的字节数）。我不知道我是否很好地解释了我的意思，尤其是这个想法是否正确？

2.  然后迈耶斯问“......虽然好的编译器不会`const`为整数类型的对象留出存储空间（除非你创建一个指针或对对象的引用），但草率的编译器可能会，你可能不愿意为这样的对象留出内存对象...”在这种情况下，内存是正在执行的进程占用的 RAM？如果验证这一点是正确的，我可以使用任务管理器（在 Win 中）或顶部（在 Linux 中）吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T14:21:59.323

首先，微优化是愚蠢的。不要在意几个恒定的 double 值会耗尽所有 RAM。它不会发生。如果是这样，那就处理它，而不是在你知道它甚至相关之前。

其次，`#define`如果使用过多，即使按照`ALL_CAPS_DEFINES`惯例，也会产生令人讨厌的副作用。迟早你会错误地创建一个用于其他变量名称的短宏，替换预处理器会给你一个深不可测且可避免的错误，并且根本无法调试。正如问题评论中的链接问题所述，宏缺乏命名空间和类范围，并且在 C++ 中绝对不好。

第三，C++11 增加了`constexpr`，它允许类型安全的宏性能（不管这个误称是什么意思）常量表达式。甚至还有那些（参见 SO Chat 中的 C++ Lounge）在编译时使用`constexpr`. 不幸的是，并非所有声称支持 C++11 的主要编译器实际上都支持足够多的 C++11 特性来真正有用（我在看着你，MSVC2012！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:57:37.133

1.  它“可能”产生较小代码的原因是多次使用定义可能（可能：优化器做奇怪的事情）也一次又一次地生成相同的常量。而使用 const 只会生成一个定义，然后引用相同的定义（如果优化器不计算内联内容）。
2.  链接可执行文件时，链接器会输出几个部分。有些部分包含常量，有些部分包含可执行代码。您的（操作系统）系统在执行之前是否将可执行文件加载到 ram 中，在 C++ 标准中没有定义。我使用过代码从闪存存储执行的系统，因此只有堆栈和动态分配的内存使用 ram。

# jquery - 仅为部分字段自定义 jQuery Validation 的 errorPlacement

> ID：14140507
> 
> 赞同：7
> 
> 时间：2013-01-03T14:08:41.270
> 
> 标签：jquery, jquery-validate

我想`errorPlacement`为某些字段自定义唯一的，其余的则遵循插件的默认位置。就像是：

```
errorPlacement : function(error, element) {
    if($(element).prop("id") === "mySpecialField") {
        $("#mySpecialErrorMessageHolder").append(error);
    }
    else {
        // this is not valid syntax but it's what I really want...
        super.errorPlacement(error, element);
    }
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-03T14:11:36.200

```
errorPlacement : function(error, element) {
    if($(element).prop("id") === "mySpecialField") {
        $("#mySpecialErrorMessageHolder").append(error);
    }
    else {
        error.insertAfter(element); // default error placement.
    }
} 
```

[查看源代码](https://github.com/jzaefferer/jquery-validation/blob/master/jquery.validate.js#L696)，默认行为是使用`insertAfter`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T14:11:36.313

使用`error.insertAfter(element);`，这是默认值：

```
errorPlacement : function(error, element) {
    if($(element).prop("id") === "mySpecialField") {
        $("#mySpecialErrorMessageHolder").append(error);
    }
    else {
        error.insertAfter(element);
    }
} 
```

# jquery-mobile - jQuery mobile 1.2：覆盖 .ui-disabled 的不透明度

> ID：14140508
> 
> 赞同：0
> 
> 时间：2013-01-03T14:08:46.010
> 
> 标签：jquery-mobile

我正在尝试覆盖`ui-disabled`我的应用程序中的不透明度，以获得一个**带有白色文本的不可聚焦的文本字段** ，我可以根据 js ( `<disabled="true">`) 更改该文本字段。

我不知道它是否适用于所有`opacity`设置为的浏览器`1`

或如何准确使用此页面上的建议（在 mobileinit 上或作为 css 文件以及语义如何）：http: [//jquerymobile.com/demos/1.2.0/docs/api/themes.html](http://jquerymobile.com/demos/1.2.0/docs/api/themes.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:22:29.660

您可以使用自己的覆盖 jQuery Mobile 的 CSS。在你的 html 中的 jqm*之后*包含一个样式表，或者`style=...`在你的 html 标签上使用一个属性——要么会覆盖默认值。因此**级联****样式表**中的级联。

我强烈推荐使用大多数浏览器内置的开发者工具。例如，在 Chrome 中，右键单击网页中的任何内容并选择检查元素。它将向您显示元素的计算 CSS，包括哪些样式来自哪个 CSS 文件，哪些样式被其他样式表覆盖等。您甚至可以在工具中编辑样式并查看更改的样子。

在这里，您可以看到样式表 f.css 覆盖了 jqm 样式表中的几个属性，它在多个位置设置它们并用各种类覆盖自身：

![CSS 检查员](../Images/1e01389eb06143a328e47c5435e5490a.png)

# java - 如何在 Spring JAX-WS Web 服务中与 HTTP Session 交互

> ID：14140509
> 
> 赞同：1
> 
> 时间：2013-01-03T14:08:46.847
> 
> 标签：java, web-services, spring, jax-ws

我正在将旧版 Web 服务从在 JBoss 中运行移植到使用 Spring 在 Jetty 中运行。

这是我的网络服务类：

```
@WebService( serviceName = "Authentication" )
public class AuthenticationWebService
{
    @Resource
    private WebServiceContext context;

    public boolean authenticate( @WebParam( name = "clientRef" ) final String clientRef, @WebParam( name = "username" ) final String username, @WebParam( name = "password" ) final String password )
    {
         ... DO THE ACTUAL LOGIN - DB CALLS ETC

         // finally, store the username in the httpsession
         final HttpServletRequest request = (HttpServletRequest) context.getMessageContext().get( MessageContext.SERVLET_REQUEST );
         final HttpSession session = request.getSession();
         session.setAttribute( "FIELD_USERNAME", username );
    }
} 
```

为了公开服务，我的 Spring xml 如下所示：

```
 <bean id="wsExporter" class="org.springframework.remoting.jaxws.SimpleHttpServerJaxWsServiceExporter">
        <property name="basePath" value="/webServices/"/>
        <property name="port" value="9494"/>
    </bean>

    <bean class="com.example.AuthenticationWebService" /> 
```

Web 服务在我的 Jetty 服务器中导出，我可以调用它（通过使用 JaxWsPortProxyFactoryBean 的 Junit 类），但是我通过 request.getSession() 得到一个空指针异常。

看起来“javax.xml.ws.servlet.request”不是 context.getMessageContext() 映射上的条目。

用谷歌搜索，所有建议都指向这是获取 servlet 请求的正确方法。这可能是我用 Spring 导出服务的方式吗？

注意 - 我不能也不想改变这个遗留服务在设置/读取 http 会话值时的行为，但我会对 Web 服务可以做到这一点的其他方式感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:58:44.273

By default sessions are not maintained by jaxws. Add this line prior to getting the session.

```
context.getMessageContext().put(javax.xml.ws.BindingProvider.SESSION_MAINTAIN_PROPERTY, true) 
```

# scala - Scala 用于理解的可索引数据结构

> ID：14140512
> 
> 赞同：7
> 
> 时间：2013-01-03T14:09:18.593
> 
> 标签：scala, data-structures, for-comprehension

我刚刚在 Coursera 上观看了 Martin Odersky 的第 6 周关于 Scala 的讲座。在第 5 讲中，他说

*“... **for**的翻译不仅限于列表或序列，甚至是集合；*

*它仅基于方法**map、flatMap 和 withFilter**的存在。*

*这让你也可以为你自己的类型使用 for 语法——你必须只为这些类型定义 map、flatMap 和 withFilter。”*

我要解决的问题是我们有一个批处理过程，它从几个数据库加载数据、组合数据并以某种方式导出结果。数据小到可以放入内存（每个源系统有 100,000 条记录），但大到足以考虑性能。

我可以使用传统的内存数据库（如 H2）并通过 ScalaQuery 或类似的东西访问它，但我真正需要的只是一种能够有效地搜索和连接来自不同源系统的数据的方法——相当于 SQL 的索引和加入。使用成熟的关系数据库 + Scala ORM 来处理可以通过一些 Scala 原生的数据结构轻松有效地解决的问题，感觉真的很尴尬。

我的第一个天真的方法是结合一个或多个“索引”（可以像在数据库系统中一样实现为 B 树）的 Vector 数据结构（用于快速直接访问）。这种组合数据结构的*map、flatMap、withFilter*方法可以足够智能以使用索引，如果它们有一个用于查询字段的索引 - 或者它们可以有一个“提示”来使用索引。

我只是想知道这样的数据结构是否已经存在并且可用，还是我需要自己实现它们？是否有解决此问题的 Scala 库或集合框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:45:22.137

不在标准库中（`Vector`当然，除了 ），而且我不知道有任何非标准库提供它们。

# java - 二叉树的后序遍历不一致地跳转到同级或父级

> ID：14140516
> 
> 赞同：2
> 
> 时间：2013-01-03T14:09:33.110
> 
> 标签：java, tree, binary-tree, postorder

在二叉树中输入以下值（{18, 26, 52, 78, 45, 16, 67, 58, 73, 11}）时，您会收到此树：

![二叉树图像](../Images/9202ddc60947bcb0607ec41cde78cb96.png)

PreOrder 和 InOrder 遍历都像我期望的那样工作。然而，当谈到 PostOrder (PO) 时，我收到的东西与我想象的不同。

据我了解，PO首先搜索左子树，然后搜索右子树，最后搜索节点（以根节点结尾）。

当通过这棵树在 PO 中遍历时，您最终会得到以下结果：{11, 16, 45, 58, 73, 67, 78, 52, 26, 18}。当写出这个结果背后的逻辑时，你会得到以下结果：从根开始，跟随完整的左，你最终在 11 这是你的第一个节点。之后，您上一层并获取其父级 (16)。你继续这样做直到你到达根（它不被包括在内，因为它不是一个leftChild）。一旦你通过了这个初始的左子树，你在右边向下一层并检查那里的 leftChilds。如果没有，你就往下一层，也就是我们找到 45 的地方。

此时我们有一个 {11, 16, 45} 的列表。我们继续这个并最终得到 58，这是我们在结果中的下一个值。这就是我困惑的地方：我们得到的下一个值是 73，与预期的 67 相反。为什么当找到另一个 leftChild（它的父级）时它会跳到 73？

以下代码负责遍历 PostOrder 中的树：

```
public void postorderTraversal(){
    postorderHelper(root);
}

private void postorderHelper(Node node){
    if(node != null){
        postorderHelper(node.getLeftNode());
        postorderHelper(node.getRightNode());
        System.out.print(node.getData() + " ");
    }
} 
```

我猜这是因为值 73 的节点在 parentNode 之前处理（左右优先级），但为什么 45-52-78 三角形中不是这种情况呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:18:06.447

> 我猜这是因为值 73 的节点在 parentNode 之前处理（左右优先级），但为什么 45-52-78 三角形中不是这种情况呢？

是的，因为 45 在 78 之前，而在 52 之前。

左兄弟姐妹总是在右兄弟姐妹之前被访问，而右兄弟姐妹总是在父母之前被访问。*它们之间还*访问了什么将取决于左右兄弟姐妹有什么孩子。

树遍历的[维基百科页面](http://en.wikipedia.org/wiki/Tree_traversal#Depth-first_traversal)将其描述为：

> 要以后序遍历非空二叉树，请在每个节点处递归执行以下操作：
> 
> *   遍历左子树。
> *   遍历右子树。
> *   访问根。

因此，如果您访问过它的*所有*子节点，您只会访问一个节点，并且您总是会在访问右子树之前访问左子树。结果中的所有内容都与此相关。

# three.js - 重复时自动保持纹理的比例和纹理的大小

> ID：14140518
> 
> 赞同：3
> 
> 时间：2013-01-03T14:09:43.617
> 
> 标签：three.js

我正在使用three.js 来建造房子，我有墙壁和墙壁的纹理。

墙壁基本上是 CubeGeometry。

我采用了独特的比例：1cm = 1px

纹理可以是砖块或任何其他建筑材料，但纹理文件始终为 512x512，其中包含细节。例如：纹理文件中的一块砖将是每 4px 10px。

我需要保持这个比例来保持场景的真实性。

```
var texture = THREE.ImageUtils.loadTexture("images/wall.jpg");

texture.wrapS = THREE.RepeatWrapping;
texture.wrapT = THREE.RepeatWrapping;

texture.repeat = new THREE.Vector2(0.2 , 0.2);

var wall = new THREE.Mesh(new THREE.CubeGeometry(100, 100, 10), new THREE.MeshBasicMaterial({ map: texture })); 
```

这很好用，因为情况很简单；），为每面墙（可以有任何尺寸）制作一个比例也很简单

但实际上我有很多其他几何图形（程序生成等等），是否有任何机会像：“THREE.KeepMyTextureSizeAndRepeat”包装？还是我需要为每个自定义几何图形制作比率？

如果您对这个用例有任何建议，我会很高兴:)

非常感谢

编辑：最终目标是在 2D 画布中做类似“模式”的事情

```
var pattern = context.createPattern(imageObj, repeatOption);
context.fillStyle = pattern;
context.fill(); 
```

当你做这样的事情时，例如在一个矩形上，模式将被重复保持纵横比（例如[http://www.html5canvastutorials.com/tutorials/html5-canvas-patterns-tutorial/](http://www.html5canvastutorials.com/tutorials/html5-canvas-patterns-tutorial/)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:56:11.520

您必须自己计算每个比率，因为纹理对像素一无所知。它只知道紫外线。

# php - 为什么此 UPDATE 查询不适用于 php

> ID：14140519
> 
> 赞同：-1
> 
> 时间：2013-01-03T14:09:47.210
> 
> 标签：php, mysql, sql-update

嗨，我很难理解为什么这没有更新数据库。它重新加载指向的页面，`HEADER`但不更新任何字段。任何帮助将不胜感激。

**更新表格**

```
 <?php
    include("../script/dbconnect.php");
    include("../script/addprodcat.php");

    $post = get_posts($_GET['id']);

    if ( isset($_POST['name'], $_POST['description'], $_POST['price'], $_POST['sale'], $_POST['picture'], $_POST['category']) ) {
    $errors = array();

        $name = trim($_POST['name']);
        $description = trim($_POST['description']);

        if ( empty($name) ) {
            $errors[] = 'You need to supply a title';
        }   else if ( strlen($name) > 255 ) {
        $errors[] = 'Title cannot be longer than 255 characters';
        }

        if ( empty($description) ) {
        $errors[] = 'You need to supply text';
        }

        if ( empty($price) ) {
        $errors[] = 'You need to supply text';
        }

        if ( empty($sale) ) {
        $errors[] = 'You need to supply text';
        }

        if ( empty($picture) ) {
        $errors[] = 'You need to supply text';
    }

    if (! category_exists('id', $_POST['category']) ) {
    $errors[] = 'Category does not exist';

    }

    if ( empty($errors) ) {
    edit_product($_GET['id'], $name, $description, $price, $sale, $picture, $_POST['category']);
    header("Location: ../admin/edit_products.php?id={$post[0]['post_id']}");
    die();
    }
}
?>
<div style="width:100%; height:150px; background-color:white;"><span style="font-family:saxMonoRegular; letter-spacing:2px; display:block; font-size:4.5em; text-align:center; padding-top:15px;"> Edit <?php echo $post[0]['name']; ?> </span></div>

<div class="link" style="width:100%; background-color:#ccc;">

<form action="" method="post">

<?php
if ( isset($errors) && ! empty($errors) ) {
echo '<ul><li>', implode('</li><li>', $errors), '</li></ul>';
}
?>

<label for="name">Title</label>
<input type="text" name="name" value="<?php echo $post[0]['name']; ?>"><br/>
<label for="price">Price</label>
<input type="text" name="price" value="<?php echo $post[0]['price']; ?>"><br/>
<label for="sale">Sale</label>
<input type="text" name="sale" value="<?php echo $post[0]['sale']; ?>"><br/>
<label for="picture">Picture</label>
<input type="text" name="picture" value="<?php echo $post[0]['picture']; ?>"><br/>

<label for="description">Description</label>
<textarea  name="description" rows="15" cols="50"><?php echo $post[0]['description']; ?></textarea><br/>

<label for="prod_id">Category</label>
<select name="prod_id">
<?php
foreach ( get_categories() as $category ) {
$selected = ( $category['name'] == $post[0]['name'] ) ? " selected" : '';
?>

<option value="<?php echo $category['id']; ?>" <?php echo $selected; ?>> <?php echo $category['name']; ?></option>
<?php
}
?>
</select><br/>

<input class="button-link" type="submit" value="Edit Post">
</form>

</div> 
```

**addprodcat.php**

```
function edit_product($id, $prod_id, $prod_sub_id, $name, $description, $price, $sale, $picture, $category) {

      $id           = (int) $id;  
      $prod_id      = (int) $prod_id;
      $prod_sub_id  = (int) $prod_sub_id;
      $name         = mysql_real_escape_string($name);
      $description  = mysql_real_escape_string($description);
      $price        = mysql_real_escape_string($price);
      $sale         = mysql_real_escape_string($sale);
      $picture      = mysql_real_escape_string($picture);
      $category = (int) $category;

      mysql_query("UPDATE `products` SET 
      `cat_id`     = {$category},
      `prod_id`         = {$prod_id},
      `prod_sub_id `    = '{$prod_sub_id}',
      `name`            = '{$name}',
      `description`     = '{$description}',
      `price`           = '{$price}',
      `sale`            = '{$sale}',
      `picture`         = '{$picture}'
      WHERE `id`        = {$id}");
    echo mysql_error();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T14:13:57.340

您的更新表单仅将 7 个参数传递给`edit_products`函数；然而，这个函数需要 9。

```
edit_product($_GET['id'], $name, $description, $price, $sale, $picture, $_POST['category']); 
```

...

```
function edit_product($id, $prod_id, $prod_sub_id, $name, $description, $price, $sale, $picture, $category) 
```

`$prod_id`你也需要通过`$prod_sub_id`。

作为一个额外的说明，在调试代码时注释掉任何重定向是值得的，因为否则会显示任何（非致命）错误/警告被遗漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:51:01.393

函数参数的数量不同。该函数需要 9，但您提供了 7。

这是在冗长的行中发生的常见用户错误。

像这样使用编码标准：

```
function edit_product(
    $id, 
    $prod_id, 
    $prod_sub_id, 
    $name, 
    $description, 
    $price, 
    $sale, 
    $picture, 
    $category
) {
    /*function code */
} 
```

当您“调用”该功能时也遵循相同的标准。

# erlang - Erlang matchspecs 与元组比较

> ID：14140520
> 
> 赞同：0
> 
> 时间：2013-01-03T14:09:55.087
> 
> 标签：erlang, tuples, matching

我想`erlang datetime`将标准格式`{{Y,M,D},{H,Min,Sec}}`的值`MNESIA table`用于记录目的，并且能够通过与恒定的开始和结束时间元组进行比较来选择日志条目。

似乎 matchspec 保护编译器以某种方式将元组值与保护子表达式混淆了。评估`ets:match_spec_compile(MatchSpec)`失败

```
MatchSpec = [
{
{'_','$1','$2'}
,
[
{'==','$2',{1,2}}
]
,
['$_']
}
] 
```

但是当我`$2`与任何非元组值进行比较时成功。

是否存在匹配守卫不能比较元组值的限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T19:12:22.623

我相信答案是在使用元组时使用双括号（请参阅[http://www.erlang.org/doc/apps/erts/match_spec.html#id69408](http://www.erlang.org/doc/apps/erts/match_spec.html#id69408)的变量和文字部分）。因此，要在 matchspec 表达式中使用元组，请用大括号将该元组括起来，如下所示，

```
{'==','$2',{{1,2}}} 
```

所以，如果我正确理解你的例子，你会有

```
22> M=[{{'_','$1','$2'},[{'==','$2',{{1,2}}}],['$_']}].
[{{'_','$1','$2'},[{'==','$2',{{1,2}}}],['$_']}]

23> ets:match_spec_run([{1,1,{1,2}}],ets:match_spec_compile(M)).
[{1,1,{1,2}}]

24> ets:match_spec_run([{1,1,{2,2}}],ets:match_spec_compile(M)).
[] 
```

**编辑**：（很抱歉编辑您的答案，但这是以可读形式获得我的评论的最简单方法）是的，必须这样做。获取匹配规范的一种更简单的方法是使用（伪）函数`ets:fun2ms/1`，该函数将*文字*fun 作为参数并返回匹配规范。所以

```
10> ets:fun2ms(fun ({A,B,C}=X) when C == {1,2} -> X end).
[{{'$1','$2','$3'},[{'==','$3',{{1,2}}}],['$_']}] 
```

外壳识别`ets:fun2ms/1`. 有关详细信息，请参阅[ETS 文档](http://www.erlang.org/doc/man/ets.html)。Mnesia 使用与 ETS 相同的匹配规范。

# javascript - 为什么 jquery 的 .each() 回调将 indexInArray 作为第一个参数而不是 valueOfElement？

> ID：14140523
> 
> 赞同：3
> 
> 时间：2013-01-03T14:10:06.907
> 
> 标签：javascript, loops, foreach, jquery

一个奇怪的问题，但是每次我使用[jQuery.each()](http://api.jquery.com/jQuery.each/)时，我都想知道为什么`indexInArray`是第一个参数而不是第二个参数（第二个当前是值本身），就像 native 一样`array.forEach()`？

有[一个相同但未回答的问题](http://api.jquery.com/jQuery.each/#comment-125736511)，在 API 文档上也有相当多的赞成票`.each()`！

通常情况下，我发现代码“作用于”值而不是索引，导致函数体中有一个未使用的变量（这让 js(h|l)int 抱怨，我认为有充分的理由） . 那么，为什么值不是第一个参数呢？

这是早期版本中考虑不周的实现的宿醉，还是有充分的理由？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T14:11:09.957

原因是`foreach`jQuery`$.each`将其作为`this`.

因此，该索引似乎更经常有用。这是一个很好的理由。

我写“出现”，因为这并非没有危险：`this`与原始类型的值不完全相同：在这种情况下，值被包装为对象。

为什么危险？

原因如下：

```
[1, 2, 3].forEach(function(v) {
    if (v===2) console.log('found!');
}); 
```

控制台中的输出：

```
found! 
```

现在使用 jQuery：

```
$.each([1, 2, 3], function() {
    if (this===2) console.log('found!');
}); 
```

输出是什么？

没有。

[（请注意，我在此相关问题](https://stackoverflow.com/questions/13123360/jquery-each-this-vs-valueofelement)中详细介绍了导致此问题的实现。）

今天，随着人们越来越习惯于标准的 javascript 函数，可能会认为使用其他顺序会更好（这是[Underscore.js](http://underscorejs.org/#each)的选择）。首先提供索引的原因是好的，但可能还不够好。但也许这并不重要，因为我们可能不会继续使用`$.each`现在`foreach`普遍可用的（至少对于数组）。

# mysql - 使 mac os x apache 使用现有的 mysql

> ID：14140525
> 
> 赞同：0
> 
> 时间：2013-01-03T14:10:11.463
> 
> 标签：mysql, apache, xampp

通常我将 XAMPP 与它的 php 和 mysql 实例一起使用，并且效果很好 - 但由于各种原因，我需要使用 Mac OS X 的内置 apache 进行更改。我已经设置好了，它工作正常，但现在我想我还需要设置相应的 mysql 服务器？我希望它使用我也与 xampp 一起使用的现有 mysql 服务器。

我现有的 mysql 服务器似乎位于 /Applications/XAMPP/xamppfiles/var/mysql/

如何让 apache 将该 mysql 服务器用于数据库？

我知道这些问题是绝对初学者的问题，但是自从我上次这样做以来已经有好几年了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:21:38.553

您的问题令人困惑（如何让 apache 使用该 mysql 服务器作为数据库？）

您正在从 PHP 连接到 Mysql。不是来自阿帕奇。

在您的应用程序配置文件（通常是 PHP 应用程序中的 config.php）中使用现有 mysql 服务器的详细信息。

# ios - 当键盘弹出自动布局时调整 UITextView 的大小

> ID：14140536
> 
> 赞同：0
> 
> 时间：2013-01-03T14:10:53.090
> 
> 标签：ios, objective-c, xcode, layout

我想在键盘出现时调整 UITextView 的大小，但我似乎无法做到这一点。我创建了一个带有 UITextView 的视图。在代码中，我想手动调整这个文本视图的高度。我这样做：

```
_textView.translatesAutoresizingMaskIntoConstraints  = NO;

NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:_textView attribute:NSLayoutAttributeHeight relatedBy:NSLayoutRelationEqual toItem:nil attribute:NSLayoutAttributeNotAnAttribute multiplier:1.0f constant:216.0f];
[_textView addConstraint:constraint]; 
```

在Interface Builder中，我说text view和superview之间的margin可以大于等于0。

当我运行该应用程序时，它给出了无法同时满足约束的错误：

```
"<NSLayoutConstraint:0x886e550 V:[UITextView:0x7b0fa00(216)]>",
"<NSLayoutConstraint:0x886f7c0 UITextView:0x7b0fa00.bottom == UIView:0x886e3c0.bottom>",
"<NSLayoutConstraint:0x886f700 V:|-(0)-[UITextView:0x7b0fa00]   (Names: '|':UIView:0x886e3c0 )>",
"<NSAutoresizingMaskLayoutConstraint:0x71a2d10 h=--- v=--- V:[UIWindow:0x8a792f0(480)]>",
"<NSAutoresizingMaskLayoutConstraint:0x71a1490 h=-&- v=-&- UIView:0x886e3c0.height == UIWindow:0x8a792f0.height - 20>"

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x886e550 V:[UITextView:0x7b0fa00(216)]> 
```

我不确定如何确保满足所有约束。谁能帮我解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-30T21:09:17.907

在 iOS7 中，设置 UIEdgeInsets 可能比调整视图大小更好，因为我们有时会处理半透明。在某些应用程序中，我们仍然希望看到文本在工具栏、键盘或其他 UI 覆盖层中滚动。另一个好处是动画通常不需要更改内容插图，因为这发生在“幕后”。

Apple 在他们的开发者资源中提供了一个非常简单和优雅的解决方案，尽管它有些隐藏并且很难找到。这是一个链接：

[https://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html](https://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)

完整的代码片段请参见清单 5-1。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T15:48:28.160

可能的重复

[出现键盘时如何在iOS上调整UITextView的大小？](https://stackoverflow.com/questions/7169702/how-to-resize-uitextview-on-ios-when-a-keyboard-appears)?

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) 
                                             name:UIKeyboardWillShowNotification object:self.view.window]; 

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) 
                                             name:UIKeyboardWillHideNotification object:self.view.window]; 

- (void)keyboardWillShow:(NSNotification *)notif
{
[thetextView setFrame:CGRectMake(20, 49, 280, 187)]; //Or where ever you want the view to go

}

- (void)keyboardWillHide:(NSNotification *)notif
{
[thetextView setFrame:CGRectMake(20, 49, 280, 324)]; //return it to its original position

} 
```

# asp.net - 可重用的 jQuery 删除函数

> ID：14140540
> 
> 赞同：2
> 
> 时间：2013-01-03T14:11:02.420
> 
> 标签：asp.net, asp.net-mvc, jquery

我使用以下函数删除表中的一行

```
//delete individual row
jQuery('.stdtable img.delete').click(function(){
    var c = confirm('Continue delete?');
    if(c) jQuery(this).parents('tr').fadeOut(function(){ 
        jQuery(this).remove();
    });
    return false;
}); 
```

这段代码在一个单独的 js 文件中，对所有页面都是通用的。现在我想添加一个从数据库中删除行的 Ajax 操作。但根据我所在的页面，它必须调用不同的控制器。

示例：产品页面必须在 ProductController 中调用 delete ProductGroup 页面必须在 ProductGroupController 中调用 delete

如何处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T14:20:33.907

如果您需要某种方法来定义要调用的控制器，您可以`data`在表上放置一个属性。像这样的东西：

```
<table class="stdtable" data-remove-url="@Url.Action("DeleteRow", "MyController")">
    <tr data-id="1">
        AAA
        <img class="delete" src="foo.jpg" />
    </tr>
    <tr data-id="2">
        BBB
        <img class="delete" src="foo.jpg" />
    </tr>
 </table> 
```

然后在您的 jQuery 中，您可以将此值作为`url`请求的参数以及`id`要删除的参数。

```
jQuery('.stdtable img.delete').click(function(e) {
    e.preventDefault();
    if (confirm('Continue delete?')) {
        var $el = $(this);
        var $tr = $el.closest('tr');
        var url = $el.closest('table').data('remove-url');
        var id = $tr.data('id');

        $tr.fadeOut(function() { 
            $el.remove();
            $.post(url, { rowId = id }); // do the delete on the server 
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:18:33.847

您可以将自定义属性添加到您的表或行，其中包含您需要调用的控制器的 url。在您的方法中，您可以阅读此自定义属性以获取控制器的 url。在此处查找[JQuery attr 方法](http://api.jquery.com/attr/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:24:32.930

如果我正确理解您的问题，您想单击带有类删除的图像以调用删除数据库中的该行。最简单的解决方案是

```
<img data-rowid="1" src="something.jpg"/> 
```

```
 jQuery('.stdtable img.delete').click(function(e){
    e.preventDefault();
    var c = confirm('Continue delete?');
    var that = this;
    if(c) {
        var id = this.data("rowid");
        jQuery.ajax({ url : "/resource/"+id, method : "DELETE" 
              statusCode: {
                 200: function() {
                       jQuery(that).parents('tr').fadeOut(function(){ 
                            jQuery(that).remove();
                       });
                 }
              }});

    }
    return false;
}); 

```

# jsp - JavaBeans 的地方

> ID：14140544
> 
> 赞同：-1
> 
> 时间：2013-01-03T14:11:21.687
> 
> 标签：jsp, javabeans

我应该把我的 JavaBeans 放在哪里？

我应该将它们放在 WEB-INF/jsp/beans 或其他地方吗？

我使用 GlassFish。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:34:51.830

基本上，JavaBeans 是实体，它们是

*   为可重用性而设计“一次编写，随处运行”
*   传递一个对象而不是多个
*   可序列化的零参数构造函数，可通过 getter 和 setter 访问

所以我认为没有必要考虑很多我应该把它放在哪里？考虑到你遵循编码标准。我会建议`WEB-INF\classes\com\myproject\beans`

# java - 使用数据库现有表创建实体类？

> ID：14140545
> 
> 赞同：22
> 
> 时间：2013-01-03T14:11:27.540
> 
> 标签：java, hibernate

我有由 DBA 创建的表。我想为每个表提供实体类以供进一步查询。有人可以建议如何使用 eclipse 自动创建实体类吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-12-09T08:20:02.637

如果使用 JPA 进行持久化，则可以使用 Eclipse 提供的“JPA 工具”从表中生成 java 实体类。

这是[教程](http://shengwangi.blogspot.com/2014/12/how-to-create-java-classes-from-tables.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T09:47:13.687

你可以试试**Telosys**代码生成器。它可以帮助这种工作。

它允许使用基本模板从任何数据库生成 Java (POJO) 类，您还可以创建自己的模板（Velocity 文件）来生成 DAO 类

欲了解更多信息，请参阅[http://www.telosys.org](http://www.telosys.org)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-03T14:19:24.067

[您可以使用Hibernate Tools](http://www.hibernate.org/subprojects/tools.html)生成类。有两种方法可以生成这些类，称为[逆向工程和代码生成](http://docs.jboss.org/tools/3.2.1.GA/en/hibernatetools/html_single/#refeng_codegen)[死链接] -

1.  您可以使用 Hibernate Tools Eclipse 插件。
2.  您可以使用 Hibernate 工具 jar 编写 Ant 脚本。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-03T14:16:41.587

[这](http://www.mkyong.com/hibernate/how-to-generate-code-with-hibernate-tools/)是一个关于如何使用 Eclipse 从现有数据库生成实体类的好教程。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-03T14:17:21.057

你可以看看[Spring Roo](http://www.springsource.org/spring-roo)。它有[数据库逆向工程](http://static.springsource.org/spring-roo/reference/html/base-dbre.html)。存在[eclipse 集成](http://www.springsource.org/sts)，因此您可以在 eclipse 中执行此操作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-25T09:50:27.193

使用此存储库中的代码尝试此[完整示例，](https://github.com/streamvk/entity-generator)并且 src/document 中有一个 word-document 供参考。

# javascript - 空 Mime 类型

> ID：14140553
> 
> 赞同：1
> 
> 时间：2013-01-03T14:11:48.750
> 
> 标签：javascript, mime-types, w3c, fileapi

我正在尝试加载 .zip 文件（带有类型验证） - 它的 mime 类型是空字符串。这很奇怪，因为它只能在 chrome 中重现，而且只能在少数计算机上重现（！！！）

（我想这是 chrome 错误[http://code.google.com/p/chromium/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status %20Owner%20Summary&groupby=&sort=&id=133803](http://code.google.com/p/chromium/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary&groupby=&sort=&id=133803) )

这不是很好的解决方案 - 如果 file.type 为空，则检查文件名 - 所以也许 smbdy 可以提供更好的解决方案

我已经设法[在 Google Chrome 中找到 zip 文件的 Mime 类型，](https://stackoverflow.com/questions/856013/mime-type-for-zip-file-in-google-chrome/14138225#14138225)但它不适合 - 我不使用 Symphony

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:18:54.427

更好的方法是根据文件元数据在服务器端检测 mime 类型。

# java - JPA 2：如何在 @ElementCollection 表中声明主键列

> ID：14140556
> 
> 赞同：3
> 
> 时间：2013-01-03T14:11:57.683
> 
> 标签：java, hibernate, jpa, annotations, jpa-2.0

在 JPA2 中，当我们在使用 @ElementCollection 和 @CollectionTable 注释的实体中使用 Embed-able（基本类型，如 String.. 等）对象时，会创建新表，但在新表中如何在列中声明主键约束？以下是我的代码

```
public class Employee {
@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private int id;
private String name; 
private String salary;
@Transient
private String phnNum;
@Enumerated(EnumType.STRING)
private EmployeeType type;

@ElementCollection
@CollectionTable(name="vacations" , joinColumns=@JoinColumn(name="Emp_Id"))
private Collection<Vacation> vacationBooking;

@ElementCollection
private Set<String> nickNames;

    ................... 
```

使用此代码，“假期”和“员工昵称”两个表在模式中创建。但我想在两个表中声明一个主键列。我为此做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-30T16:42:47.030

JPA 2.0 不支持主键*本身：*

> 来自[维基书籍](https://en.wikibooks.org/wiki/Java_Persistence/ElementCollection#Primary_keys_in_CollectionTable)：
> 
> JPA 2.0 规范没有提供在 Embeddable 中定义 Id 的方法。但是，要删除或更新 ElementCollection 映射的元素，通常需要一些唯一键。否则，在每次更新时，JPA 提供者都需要从实体的 CollectionTable 中删除所有内容，然后将值插入回来。因此，JPA 提供者很可能会假设 Embeddable 中所有字段的组合是唯一的，并结合外键 (JoinColumn(s))。但是，如果 Embeddable 很大或很复杂，这可能效率低下，或者根本不可行。
> 
> 一些 JPA 提供程序可能允许在 Embeddable 中指定 Id，以解决此问题。请注意，在这种情况下，ID 只需要对集合而不是表是唯一的，因为包含外键。有些人可能还允许为此使用 CollectionTable 上的唯一选项。否则，如果您的 Embeddable 很复杂，您可以考虑将其设为实体并改用 OneToMany。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:32:21.817

您的意思是要将 Employee 表中的“id”作为外键分配给 Vacation 表吗？在这种情况下，您应该使用 @OneToMany 而不是 @ElementCollection

# c# - VS 调试器并行任务中的“等待”是什么意思？

> ID：14140558
> 
> 赞同：0
> 
> 时间：2013-01-03T14:12:25.017
> 
> 标签：c#, visual-studio-2010, debugging, parallel-processing, task

```
3   Waiting HtmlAgilityPack.HtmlWeb.Get ProcessTorrent.AnonymousMethod__6() 6904 (Worker Thread)    1 (torrent.vshost.exe)
4   Running HtmlAgilityPack.HtmlWeb.Get ProcessTorrent.AnonymousMethod__6() 6880 (Worker Thread)    1 (torrent.vshost.exe)
5   Waiting HtmlAgilityPack.HtmlWeb.Get ProcessTorrent.AnonymousMethod__6() 6884 (Worker Thread)    1 (torrent.vshost.exe)
6   Waiting HtmlAgilityPack.HtmlWeb.Get ProcessTorrent.AnonymousMethod__6() 6536 (Worker Thread)    1 (torrent.vshost.exe)
7   Waiting HtmlAgilityPack.HtmlWeb.Get ProcessTorrent.AnonymousMethod__6() 6992 (Worker Thread)    1 (torrent.vshost.exe)
8   Waiting HtmlAgilityPack.HtmlWeb.Get ProcessTorrent.AnonymousMethod__6() 5148 (Worker Thread)    1 (torrent.vshost.exe)
9   Waiting HtmlAgilityPack.HtmlWeb.Get ProcessTorrent.AnonymousMethod__6() 7016 (Worker Thread)    1 (torrent.vshost.exe)
10  Running HtmlAgilityPack.HtmlDocument.Load   ProcessTorrent.AnonymousMethod__6() 7096 (Worker Thread)    1 (torrent.vshost.exe)
11  Waiting HtmlAgilityPack.HtmlWeb.Get ProcessTorrent.AnonymousMethod__6() 6988 (Worker Thread)    1 (torrent.vshost.exe) 
```

您可以看到只有 2 个任务正在运行，这是否意味着处于等待状态的其他任务正在等待 2 个正在运行的任务完成，或者他们正在等待 HtmlAgilityPack.HtmlWeb.Get 完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:59:43.237

他们可能正在等待任何事情。它可能是另一个线程，它可能是操作系统做某事（例如文件/网络 IO 完成），它可能是一个计时器，或者只是在他们等待的事情完成后安排。

在这种情况下，鉴于该行的其余部分是: `HtmlAgilityPack.HtmlWeb.Get`，看起来他们正在等待网络 IO。

# xquery - xquery 在另一个函数中调用维护函数

> ID：14140560
> 
> 赞同：0
> 
> 时间：2013-01-03T14:12:30.170
> 
> 标签：xquery, marklogic

使用 MarkLogic Xquery，我有一个函数`(admin:add-collection-to-publication)`调用另一个维护函数`( admin:check-collections-exists)`，该函数检查元素是否存在，如果不存在，则创建该特定元素。

我调用维护功能的方式是使用**let**。这似乎是一种奇怪的方式，要做到这一点，它需要创建一个未使用的变量。我是否应该返回一个序列，调用是序列`admin:check-collections-exists`中的第一项，然后后续处理是第二个元素？只是寻找标准的优雅方式来做到这一点。我的职能是：

```
declare function admin:add-collection-to-publication($pub-name, $collection-name)
{
(:does this publication have a COLLECTIONS element?:)
let $unnecessary-variable := admin:check-collections-exists($pub-name)
    (:now go and do what this function does:)
return "do some other stuff then return"

 };

 declare function admin:check-collections-exists($pub-name)
 {
if(fn:exists($pubs-node/pub:PUBLICATION[pub:NAME/text()=$pub-name]/pub:COLLECTIONS))
then
    "exists"
else
    xdmp:node-insert-child($pubs-node/pub:PUBLICATION[pub:NAME/text()=$pub-name],<pub:COLLECTIONS/>)
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:28:25.380

使用序列是不可靠的。MarkLogic 很可能会尝试并行评估序列项，这可能导致创建在“同时”时间甚至在其他工作之后发生。最好的方法确实是使用`let`. `let`总是在 之前评估`return`。请注意，虽然`let`'s 也可以并行评估，但优化器足够聪明，可以检测依赖关系。

就个人而言，我经常使用未使用的变量。例如插入日志语句，在这种情况下，我有一个未使用的变量名，我每次都会重用：

```
let $log := xdmp:log($before)
let $result := do:something($before)
let $log := xdmp:log($result) 
```

您还可以使用非常短的变量名，例如`$_`. 或者您可以重新考虑实际给变量一个合理的名称，然后使用它，即使您知道它永远不会到达 else

```
let $exists := 
    if (collection-exists()) then
        create()
    else true()
return
    if ($exists) then
        "do stuff"
    else () (: never reached!! :) 
```

！

# github - 如何只关注 Github 上的特定问题，而不是观看整个项目？

> ID：14140564
> 
> 赞同：102
> 
> 时间：2013-01-03T14:12:47.747
> 
> 标签：github

是否可以只关注 Github 上的特定问题（而不是观看整个项目）？我想在一个特定问题发生变化（拉取、状态变化、新评论）时通过电子邮件收到通知。这可能吗？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-01-03T14:18:10.213

根据下面 pennstatephil 的评论，`SUBSCRIBE`底部右侧窗格中有一个：

![github 屏幕截图](../Images/c2a5e88a38e5feccf8c73fa2fb98a3b8.png)

# macos - 未找到架构 x86_64 编译错误的 LLVM OS X 符号

> ID：14140570
> 
> 赞同：5
> 
> 时间：2013-01-03T14:13:16.943
> 
> 标签：macos, compilation, llvm, clang

我已经成功编译了`LLVM kalidoscope`C 中的示例。

现在我正在扩展代码：

```
#include "llvm/Support/CommandLine.h"

static cl::opt<std::string> InputFilename(cl::Positional, cl::desc("<input file>"), cl::Required);

int mail(... 
```

现在我编译使用：

clang++ -g toy.cpp `llvm-config --cppflags --ldflags --libs all`-O3 -o toy

在此更改之后，我收到以下错误：

`Undefined symbols for architecture x86_64: "typeinfo for llvm::cl::GenericOptionValue", referenced from: typeinfo for llvm::cl::OptionValueCopy<std::string> in toy-Pq1GSI.o ld: symbol(s) not found for architecture x86_64 clang: error: linker command failed with exit code 1 (use -v to see invocation)`

可能出了什么问题，我该如何解决？

版本：

```
clang++ -v Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn) Target: x86_64-apple-darwin12.2.0 Thread model: posix

brew info llvm llvm: stable 3.2 (bottled), HEAD http://llvm.org/ /usr/local/Cellar/llvm/3.2 (628 files, 106M) * https://github.com/mxcl/homebrew/commits/master/Library/Formula/llvm.rb
==> Options
--all-targets   Build all target backends
--universal     Build a universal binary
--rtti  Build with C++ RTTI
--shared    Build LLVM as a shared library
--with-clang    Build Clang C/ObjC/C++ frontend
==> Caveats Extra tools and bindings are installed in /usr/local/Cellar/llvm/3.2/share/llvm and /usr/local/Cellar/llvm/3.2/share/clang. 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2019-01-22T09:20:44.563

似乎将编译命令更改为此是一个修复：

```
clang++ -g toy.cpp llvm-config --cxxflags --ldflags --libs -O3 -o toy 
```

# .net - 特定应用程序没有基于 WCF 的命名管道服务的端点

> ID：14140572
> 
> 赞同：1
> 
> 时间：2013-01-03T14:13:27.033
> 
> 标签：.net, wcf, windows-services

我在使用基于 WCF 的命名管道端点 (.Net Framework 4.0) 与 Windows 窗体（通知托盘）应用程序进行通信时遇到了一个奇怪的问题。

安装设置后，该服务会正确地将消息发送到我的 winform（通知托盘）应用程序并按预期工作。

但是一旦我重新启动机器。服务找不到 Namedpipe 端点。我尝试通过从 VS 2010 创建另一个应用程序来发送消息，它能够将消息发送到我的 Windows 窗体（通知托盘）应用程序。

windows服务抛出的异常是

```
 There was no endpoint listening at net.pipe://localhost/Pipe/Pipe1 that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details.
Error innerException : System.IO.PipeException: The pipe endpoint 'net.pipe://localhost/Pipe/Pipe1' could not be found on your local machine.
Error stackStrace : Server stack trace: at System.ServiceModel.Channels.PipeConnectionInitiator.GetPipeName(Uri uri, IPipeTransportFactorySettings transportFactorySettings) at System.ServiceModel.Channels.NamedPipeConnectionPoolRegistry.NamedPipeConnectionPool.GetPoolKey(EndpointAddress address, Uri via) at System.ServiceModel.Channels.CommunicationPool`2.TakeConnection(EndpointAddress address, Uri via, TimeSpan timeout, TKey& key) at System.ServiceModel.Channels.ConnectionPoolHelper.EstablishConnection(TimeSpan timeout) at System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.OnOpen(TimeSpan timeout) at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout) at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannel.CallOpenOnce.System.ServiceModel.Channels.ServiceChannel.ICallOnce.Call(ServiceChannel channel, TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade) at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) Exception rethrown at [0]: at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) at NamedPipe.Communication.IPipeService.PipeIn(String data) at NamedPipe.Sender.SendMessage(String messages, String PipeName) at NamedPipe.Sender.SendMessage(String messages). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:40:35.453

我想认为这个问题与安全环境有关。在安全上下文“SYSTEM”下运行的服务可以在安装程序安装后立即找到“命名管道”服务的端点，因为安装程序通过 UAC 弹出窗口提升其权限，从而运行 Windows 服务和 WinForm( **Namedpipe Host** ) 应用程序在相同的安全上下文下，因此找到了端点。重新启动后，尽管 Winform 应用程序位于登录用户的安全上下文中，但服务仍处于相同的安全上下文中，这导致“NamedPipe”托管在与服务不同的安全上下文中。并且该服务试图找到落入其安全上下文中的端点，但这次不是。因此**“**例外。

# jquery - Chrome 背景位置不起作用

> ID：14140580
> 
> 赞同：2
> 
> 时间：2013-01-03T14:13:43.117
> 
> 标签：jquery, google-chrome, background-position

悬停鼠标查看顶部大图：[http ://www.silviaalessandro.com/negozio/borsa3-2](http://www.silviaalessandro.com/negozio/borsa3-2)

放大镜在除 Google Chrome 之外的所有浏览器中都能正常工作。

jQuery 更新精细的背景位置：

> ```
>  plg.magny.css({
>     left: e.pageX,
>     top: e.pageY,
>     backgroundPosition: Math.round(plg.options.bgLeftModifier+origX)+'px '+Math.round(plg.options.bgTopModifier+origY)+'px'
>   }); 
> ```

我在 Chrome 开发人员选项卡上看到放大镜背景位置发生了变化，但 Chrome 无法呈现它。当您滚动进入（更改放大镜大小）时，背景位置会更新。

可能是什么问题呢？

# web-services - 使用 JAX-WS 修改 Web 服务的响应

> ID：14140583
> 
> 赞同：5
> 
> 时间：2013-01-03T14:13:56.400
> 
> 标签：web-services, soap, jax-ws

如何修改响应的命名空间，如下所示：

旧回应：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:GetAmountResponse xmlns:ns2="http://ws.dsi.otn.com/dab">
         <etat>0</etat>
         <montant>500.0</montant>
      </ns2:GetAmountResponse>
   </soap:Body>
</soap:Envelope> 
```

想要新的回应：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <GetAmountResponse xmlns="http://ws.dsi.otn.com/dab">
         <etat>0</etat>
         <montant>500.0</montant>
      </GetAmountResponse>
   </soap:Body>
</soap:Envelope> 
```

我想删除 ns2 命名空间前缀。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:11:21.060

在第一种情况下，`GetAmountResponse`在命名空间中，`http://ws.dsi.otn.com/dab`而在默认（空）命名空间中。`etat``montant`

在您想要的新消息中`GetAmountResponse`，`etat`和`montant`都在 namespace 中`http://ws.dsi.otn.com/dab`。

可以从类的名称空间控制名称空间。全部使用相同的命名空间，您将把它们放在同一个命名空间中，为类保留默认值，它们默认为空命名空间。

例如，如果您的 Web 服务类中有这样的内容：

```
@WebMethod
    public 
    @WebResult(name = "getAmountResponse", targetNamespace = "http://ws.dsi.otn.com/dab")
    AmountResponse getAmount(
            @WebParam(name = "getAmountRequest", targetNamespace = "http://ws.dsi.otn.com/dab") AmountRequest request) {

        AmountResponse response = new AmountResponse();
        response.setEtat(0);
        response.setMontant(500.0);

        return response;
    } 
```

像这样的响应类：

```
@XmlRootElement
public class AmountResponse {
    private int etat;
    private double montant;
    // getter and setters omitted
} 
```

你最终会得到第一种肥皂信息。

但是，如果您将响应类更改为如下所示：

```
@XmlRootElement(namespace = "http://ws.dsi.otn.com/dab")
@XmlAccessorType(XmlAccessType.NONE)
public class AmountResponse {

    @XmlElement(namespace = "http://ws.dsi.otn.com/dab")
    private int etat;

    @XmlElement(namespace = "http://ws.dsi.otn.com/dab")
    private double montant;

    // getters and setter omitted
} 
```

您将把所有标签放在同一个命名空间中，并获得与您想要的新型消息等效的东西。我说等价是因为我不认为你会得到这个：

```
<GetAmountResponse xmlns="http://ws.dsi.otn.com/dab">
     <etat>0</etat>
     <montant>500.0</montant>
</GetAmountResponse> 
```

它更有可能得到这样的东西：

```
<ns2:getAmountResponse xmlns:ns2="http://ws.dsi.otn.com/dab">
     <ns2:etat>0</ns2:etat>
     <ns2:montant>500.0</ns2:montant>
</ns2:getAmountResponse> 
```

两条消息的“XML 含义”相同，尽管它们看起来不一样。

如果您绝对希望它看起来像那样，我认为您将不得不去“低级”并使用诸如[SOAP 处理程序之类的东西来拦截响应并对其进行修改](http://jax-ws.java.net/articles/handlers_introduction.html)。但请注意，在消息上线之前更改消息并非易事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T21:32:28.537

logical handler are enough to transform to the message as expected :

```
package com.ouertani.slim;

import java.io.ByteArrayInputStream;
import java.io.InputStream;
import javax.xml.transform.Source;
import javax.xml.transform.stream.StreamSource;
import javax.xml.ws.LogicalMessage;
import javax.xml.ws.handler.LogicalHandler;
import javax.xml.ws.handler.LogicalMessageContext;
import javax.xml.ws.handler.MessageContext;

/**
 *
 * @author ouertani
 */
public class MyLogicalHandler implements LogicalHandler<LogicalMessageContext> {

    @Override
    public boolean handleMessage(LogicalMessageContext messageContext) {
        /// extract state and amount
        int state = 0;
        double amount = 200.0;
        transform(messageContext, state, amount);
        return false;
    }

    public boolean handleFault(LogicalMessageContext messageContext) {
        return true;
    }

    public void close(MessageContext context) {
    }
    private void transform( LogicalMessageContext messageContext, int etat, double montant){
            LogicalMessage msg = messageContext.getMessage();

        String htom = "<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"+
   "<soap:Body>"+
      "<GetAmountResponse xmlns=\"http://ws.dsi.otn.com/dab\">"+
         "<etat>"+etat+"</etat>"+
         "<montant>"+montant+"</montant>"+
      "</GetAmountResponse>"+
   "</soap:Body>"+
"</soap:Envelope>";
        InputStream is = new ByteArrayInputStream(htom.getBytes());
        Source ht = new StreamSource(is);
        msg.setPayload(ht);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-24T14:56:19.220

# ubuntu - Hadoop Namenode 安全模式错误

> ID：14140585
> 
> 赞同：0
> 
> 时间：2013-01-03T14:14:05.990
> 
> 标签：ubuntu, hadoop

我的环境是hadoop 0.23.5集群（三个节点：两个用于namenode，一个用于nodemangement和resourcemangement，三个节点都是datanode）

我在谷歌上搜索了有关如何离开 namenode 安全模式的所有答案并得到了相同的答案：

```
hadoop dfsadmin -safemode leave 
```

因为我在 ubuntu 12.10 上运行 hadoop 0.23.5 并且似乎需要更改为：

```
hdfs dfsadmin -safemode leave 
```

但我仍然收到以下错误...

```
safemode: FileSystem file:/// is not an HDFS file system 
```

有谁知道怎么回事？

非常感谢您抽出时间给我一些建议。

# c++ - 如何使用 libav* 将 KLV 数据包编码为 H.264 视频

> ID：14140590
> 
> 赞同：5
> 
> 时间：2013-01-03T14:14:17.103
> 
> 标签：c++, ffmpeg, h.264, libav

目前我正在使用 libav* 对 H.264 视频进行编码。我想将 KLVPackets 添加到比特流中，但不知道在哪里实现它。

avcodec 中有一个结构，但我不确定如何将其写入帧元数据

```
typedef struct {
    UID key;
    int64_t offset;
    uint64_t length;
} KLVPacket; 
```

当前 FFMPEG 代码（仅留下相关代码）：

```
av_register_all();

pOutputFormat = av_guess_format(NULL, fileName, NULL);
pFormatCtx=avformat_alloc_context();
pVideoStream = av_new_stream(pFormatCtx,0);
pCodecCtx=pVideoStream->codec;
...
av_dump_format(pFormatCtx, 0, fileName,1);
pCodec = avcodec_find_encoder(pCodecCtx->codec_id);
avio_open(&pFormatCtx->pb, fileName, AVIO_FLAG_READ_WRITE)
avformat_write_header(pFormatCtx, &pDict);
...
avcodec_encode_video(pCodecCtx,outbuf,outbuf_size,ppicture);
...
int ret = av_interleaved_write_frame(pFormatCtx, &pkt); 
```

有人知道我可以使用的任何示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T05:33:19.607

KLV 元数据是独立于视频的流。您可以将流复用到具有自己的 PID 的 MPEG-2 传输流中。

另一种实现方式是将 KLV 作为单独的流发送。也就是说，在一个 IP/端口上播放您的视频，在另一个 IP/端口上播放您的 KLV。

无论哪种方式，您最大的问题都是将 KLV 数据同步到视频。我还没有找到一个可以在 KLV 中很好地混合视频的开源库。您可以付费购买一些图书馆，但我还没有使用其中任何一个。

# websocket - 反向 websockify

> ID：14140592
> 
> 赞同：2
> 
> 时间：2013-01-03T14:14:19.777
> 
> 标签：websocket

我正在寻找 websockify 的倒数。因此，我不想代理连接到自己不做 WebSockets 的服务器（即 websockify 所做的），而是想用一个不了解 WebSockets 的客户端连接到一个基于 WebSockets 的东西。

这存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:00:13.027

如果你考虑 .NET，我会选择 XSockets [http://xsockets.net](http://xsockets.net) 你可以从任何使用 TCP/IP 的东西连接到 XSockets。

问候乌夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-20T16:30:13.200

是的，请参阅[https://github.com/jimparis/unwebsockify/](https://github.com/jimparis/unwebsockify/)

> Unwebsockify 是一个 TCP 到 WebSocket 代理/桥接器。它接受普通的 TCP 连接并连接到 WebSocket 服务器，有效地将 WS 支持添加到本机不支持它的客户端。它本质上与 websockify 正好相反。

# c# - 如何将 Silverlight DLL 插入 WPF 应用程序

> ID：14140593
> 
> 赞同：2
> 
> 时间：2013-01-03T14:14:28.440
> 
> 标签：c#, wpf, silverlight, dll

在将 Silverlight DLL 添加到 WPF 应用程序中时，我遇到了问题：

> 类型“System.Windows.Controls.UserControl”在未引用的程序集中定义。您必须添加对程序集“System.Windows，Version=5.0.5.0，Culture=neutral，PublicKeyToken=7cec85d7bea7798e”的引用。C:....\Documents\Visual Studio 2010\Projects\YeniWPF_SilverlightDLL\YeniWPF_SilverlightDLL\MainWindow.xaml.cs 26 13 YeniWPF_SilverlightDLL

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T14:15:54.480

不可能将 Silverlight DLL 包含到 WPF 应用程序中。尽管它们都使用 .NET 语言，但它们的编译方式不同，因此彼此不兼容。Silverlight 在 Silverlight 插件下运行，并具有 .NET 库的精简版。

**如果您有权访问原始源代码，则可以通过将 .cs 文件链接**到 WPF 应用程序来重新使用该代码。这样，当构建 WPF 应用程序时，它会将 .cs 文件编译为正确的类型。

正如 Will 指出的，如果您使用的是 .NET 4 或更高版本，如果您有原始源代码，您还可以构建一个[可移植类库。](http://msdn.microsoft.com/en-us/library/gg597391%28v=vs.100%29.aspx)

# php - PHP substr() 函数允许您设置起点和终点并保持 HTML 格式？

> ID：14140596
> 
> 赞同：4
> 
> 时间：2013-01-03T14:14:37.837
> 
> 标签：php, html, formatting, split, substr

使用 PHP 中的普通`substr()`函数，您可以决定从哪里“开始”切割字符串，以及设置长度。长度可能是使用最多的，但在这种情况下，我需要从头开始剪掉大约 120 个字符。问题是我需要保持字符串中的 html 完整，并且只剪切标签中的实际文本。

我为它找到了一些自定义函数，但我还没有找到一个允许您设置起点的函数，例如。你想从哪里开始切割字符串。

这是我发现的一个：[使用 PHP substr() 和 strip_tags() 同时保留格式且不破坏 HTML](https://stackoverflow.com/questions/2398725/using-php-substr-and-strip-tags-while-retaining-formatting-and-without-break)

所以，我基本上需要一个`substr()`与原始功能完全相同的功能，除了保持格式。

有什么建议么？

要修改的示例内容：

```
<p>Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going <a href="#">through the cites</a> of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus</p> <p>Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the <strong>Renaissance</strong>. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32.</p> 
```

从一开始就切断5后：

```
<p>ary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going <a href="#">through the cites</a> of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus</p> <p>Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the <strong>Renaissance</strong>. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32.</p> 
```

开头和结尾有 5 个：

```
<p>ary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going <a href="#">through the cites</a> of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus</p> <p>Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the <strong>Renaissance</strong>. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.1</p> 
```

是啊，你明白我的意思吗？

如果要在一个单词的中间停止切割，我宁愿它切断整个单词，但这并不是非常重要。

** 编辑：** 固定引号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:31:52.137

您所要求的内容涉及很多复杂性（本质上，在给定*字符串偏移量的情况下生成一个有效的 html 子集），如果您以**文本字符*数表示的方式重新表述您的问题，那会更好您想要保留而不是剪切其中包含 html 的任意字符串。如果你这样做了，这个问题就变得容易多了，因为你可以使用真正的 HTML 解析器。您无需担心：

*   不小心将元素切成两半。
*   不小心将实体切*成两半*。
*   不计算元素内的文本。
*   确保字符实体算作单个字符。
*   确保所有元素都正确关闭。
*   确保您不会破坏字符串，因为您使用`substr()`的是 utf-8 字符串。

可以*使用*正则表达式（使用`u`标志）和`mb_substr()`标签堆栈（我以前做过）来完成此操作，但是有很多边缘情况，您通常会遇到困难。

但是，DOM 解决方案相当简单：遍历所有文本节点，计算字符串长度，并根据需要删除或子串其文本内容。下面的代码执行此操作：

```
$html = <<<'EOT'
<p>Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going <a href="#">through the cites</a> of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus</p> <p>Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the <strong>Renaissance</strong>. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32.</p>
EOT; 
```

```
function substr_html($html, $start, $length=null, $removeemptyelements=true) {
    if (is_int($length)) {
        if ($length===0) return '';
        $end = $start + $length;
    } else {
        $end = null;
    }
    $d = new DOMDocument();
    $d->loadHTML('<html><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><title></title></head><body>'.$html.'</body>');
    $body = $d->getElementsByTagName('body')->item(0);
    $dxp = new DOMXPath($d);
    $t_start = 0; // text node's start pos relative to all text
    $t_end   = null; // text node's end pos relative to all text

    // copy because we may modify result of $textnodes
    $textnodes = iterator_to_array($dxp->query('/descendant::*/text()', $body));

// PHP 5.2 doesn't seem to implement Traversable on DOMNodeList,
// so `iterator_to_array()` won't work. Use this instead:
// $textnodelist = $dxp->query('/descendant::*/text()', $body);
// $textnodes = array();
// for ($i = 0; $i < $textnodelist->length; $i++) {
//  $textnodes[] = $textnodelist->item($i);
//}
//unset($textnodelist);

    foreach($textnodes as $text) {
        $t_end = $t_start + $text->length;
        $parent = $text->parentNode;
        if ($start >= $t_end || ($end!==null && $end < $t_start)) {
            $parent->removeChild($text);
        } else {
            $n_offset = max($start - $t_start, 0);
            $n_length = ($end===null) ? $text->length : $end - $t_start;
            if (!($n_offset===0 && $n_length >= $text->length)) {
                $substr = $text->substringData($n_offset, $n_length);
                if (strlen($substr)) {
                    $text->deleteData(0, $text->length);
                    $text->appendData($substr);
                } else {
                    $parent->removeChild($text);
                }
            }
        }

        // if removing this text emptied the parent of nodes, remove the node!
        if ($removeemptyelements && !$parent->hasChildNodes()) {
            $parent->parentNode->removeChild($parent);
        }

        $t_start = $t_end;
    }
    unset($textnodes);
    $newstr = $d->saveHTML($body);

    // mb_substr() is to remove <body></body> tags
    return mb_substr($newstr, 6, -7, 'utf-8');
}

echo substr_html($html, 480, 30); 
```

这将输出：

```
<p> of "de Finibus</p> <p>Bonorum et Mal</p> 
```

`p`请注意，您的“子字符串”跨越多个元素这一事实并不令人困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:59:08.780

这是一个开始，利用`DOMDocument`（一个 xml/html 解析器），`RecursiveIteratorIterator`（用于轻松遍历递归结构）和自定义`DOMNodeList`迭代器实现，与`RecursiveIteratorIterator`.

它仍然很草率（不返回副本，但作用于`DOMNode`/的引用`DOMDocument`），并且它没有常规的花哨功能`substr()`，例如`$start`和/或的负值`$length`，但它似乎做工作，到目前为止。我敢肯定有错误。但它应该让您了解如何使用`DOMDocument`.

自定义迭代器：

```
class DOMNodeListIterator
    implements Iterator
{
    protected $domNodeList;

    protected $position;

    public function __construct( DOMNodeList $domNodeList )
    {
        $this->domNodeList = $domNodeList;
        $this->rewind();
    }

    public function valid()
    {
        return $this->position < $this->domNodeList->length;
    }

    public function next()
    {
        $this->position++;
    }

    public function key()
    {
        return $this->position;
    }

    public function rewind()
    {
        $this->position = 0;
    }

    public function current()
    {
        return $this->domNodeList->item( $this->position );
    }
}

class RecursiveDOMNodeListIterator
    extends DOMNodeListIterator
    implements RecursiveIterator
{
    public function hasChildren()
    {
        return $this->current()->hasChildNodes();
    }

    public function getChildren()
    {
        return new self( $this->current()->childNodes );
    }
} 
```

实际功能：

```
function DOMSubstr( DOMNode $domNode, $start = 0, $length = null )
{
    if( $start == 0 && ( $length == null || $length >= strlen( $domNode->nodeValue ) ) )
    {
        return;
    }

    $nodesToRemove = array();
    $rii = new RecursiveIteratorIterator( new RecursiveDOMNodeListIterator( $domNode->childNodes ), RecursiveIteratorIterator::SELF_FIRST );
    foreach( $rii as $node )
    {
        if( $start <= 0 && $length !== null && $length <= 0 )
        {
            /* can't remove immediately
             * because this will mess with
             * iterating over RecursiveIteratorIterator
             * so remember for removal, later on
             */
            $nodesToRemove[] = $node;
            continue;
        }

        if( $node->nodeType == XML_TEXT_NODE )
        {
            if( $start > 0 )
            {
                $count = min( $node->length, $start );
                $node->deleteData( 0, $count );
                $start -= $count;
            }

            if( $start <= 0 )
            {
                if( $length == null )
                {
                    break;
                }
                else if( $length <= 0 )
                {
                    continue;
                }
                else if( $length >= $node->length )
                {
                    $length -= $node->length;
                    continue;
                }
                else
                {
                    $node->deleteData( $length, $node->length - $length );
                    $length = 0;
                }
            }
        }
    }

    foreach( $nodesToRemove as $node )
    {
        $node->parentNode->removeChild( $node );
    }
} 
```

用法：

```
$html = <<<HTML
<p>Just a short text sample with <a href="#">a link</a> and some trailing elements such as <strong>strong text<strong>, <em>emphasized text</em>, <del>deleted text</del> and <ins>inserted text</ins></p>
HTML;

$dom = new DomDocument();
$dom->loadHTML( $html );
/*
 * this is particularly sloppy:
 * I pass $dom->firstChild->nextSibling->firstChild (i.e. <body>)
 * because the function uses strlen( $domNode->nodeValue )
 * which will be 0 for DOMDocument itself
 * and I didn't want to utilize DOMXPath in the function
 * but perhaps I should have
 */
DOMSubstr( $dom->firstChild->nextSibling->firstChild, 8, 25 );

/*
 * passing a specific node to DOMDocument::saveHTML()
 * only works with PHP >= 5.3.6
 */
echo $dom->saveHTML( $dom->firstChild->nextSibling->firstChild->firstChild ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:53:14.673

如果它不是更长的文本（因为运行时），你可以试试这个。

> 但在这种情况下，我需要从一开始就剪掉大约 120 个字符。

正是这样做的。输入您的文本或从某处抓取它，然后输入从头开始删除的字符数。

**请不要强调这一点：它是短字符串的解决方案，它不是最好的方法，但它是一个完整的工作代码示例！**

```
<?php
$text = "<a href='blablabla'>m</a>ylinks...<b>not this code is working</b>......";
$newtext = "";
$delete = 13;
$tagopen = false;

while ($text != ""){
    $checktag=$text[0];
    $text=substr( $text, 1 );
    if ($checktag =="<" || $tagopen == TRUE){
        $newtext .= $checktag;
        if ($checktag == ">"){
        $tagopen = FALSE;
        }
        else{
        $tagopen = TRUE;
        }
    }
    elseif ($delete > 0){   
        $delete = $delete -1 ;
        }
    else
    {
    $newtext .= $checktag;

    }
}
echo $newtext;

?> 
```

它返回：

```
<a href='blablabla'></a><b> this code is working</b>...... 
```

# ffmpeg - 如何让 ffmpeg 流式传输我的网络摄像头？

> ID：14140602
> 
> 赞同：0
> 
> 时间：2013-01-03T14:14:56.837
> 
> 标签：ffmpeg

我想流式传输我的网络摄像头并设法使用以下方法成功地将其流式传输到 bambuser.com，但需要能够在本地查看它。

这成功地将其发布给 babuser：

```
ffmpeg -v debug -f alsa -ac 1 -i hw:1,0 -acodec libmp3lame -itsoffset 00:00:00  
-f video4linux2 -s 360x240 -i /dev/video0 -r 15 -f flv -ar 44100 
rtmp://522f4133d0.fme.bambuser.com/b-fme/0bacf5bb634dbbbd52bdd99d71406dc6f362c 
```

我尝试了以下方法，但得到“RTMP_Connect0，连接套接字失败。111（连接被拒绝）rtmp://localhost:8090/：不允许操作”

```
ffmpeg  -v debug  -f alsa -ac 1 -i hw:1,0 -acodec libmp3lame -itsoffset 00:00:00
-f video4linux2 -s 360x240 -i /dev/video0 -r 15 -f flv -ar 44100 
rtmp://localhost:8090/ 
```

我将如何更改它以便能够从本地主机查看它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:03:31.767

使用 rtmp ffmpeg 只能传输到“正在侦听的 rtmp 接收器”（或者可能是[http://ffmpeg.org/trac/ffmpeg/wiki/StreamingGuide#Pointtopointstreaming](http://ffmpeg.org/trac/ffmpeg/wiki/StreamingGuide#Pointtopointstreaming)提到了 rtmp 的“侦听”选项，也许这可以工作。有没有您希望在 localhost:8090 上有一个 rtmp 服务器？

# html5-canvas - createImageData 与 createImageDataHD

> ID：14140607
> 
> 赞同：1
> 
> 时间：2013-01-03T14:15:05.777
> 
> 标签：html5-canvas

createImageData 和 createImageDataHD 有什么区别？非高清版本[的官方规格如下：](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#pixel-manipulation)

> **返回具有给定尺寸**的 ImageData 对象。返回对象中的所有像素都是透明的黑色。

对于高清版：

> 返回一个 ImageData 对象**，其尺寸等于参数中给定的尺寸乘以画布位图中与每个坐标空间单元对应的像素数。**返回对象中的所有像素都是透明的黑色。

你能向我解释一下它们的含义以及高清版本的用例是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:35:28.160

该用例适用于更高分辨率的屏幕，例如 Retina 显示器。

虽然这样的显示器有更多的字面像素，但由于 CSS 像素的可变性，在这样的系统上显示的浏览器仍然表现得好像它具有正常的分辨率；在此处查看[CSS 对像素和锚单元的讨论](http://www.w3.org/TR/CSS21/syndata.html#length-units)。

> 对于分辨率较低的设备，以及具有异常观看距离的设备，建议将锚单元改为像素单元。对于此类设备，建议像素单位是指最接近参考像素的设备像素的总数。[***即，让像素为普通设备上的像素。***]
> 
> 对于印刷媒体和类似的高分辨率设备，锚单位应该是标准物理单位之一（英寸、厘米等）。[***即，假设高分辨率设备上的像素为 96 dpi。***]

这一点很重要，因此视网膜屏幕上显示像素的双倍密度不会导致每个网站都只有一半宽和一半高。

画布规范的[像素操作例程](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#pixel-manipulation)假定一个 CSS 像素等于底层位图中的一个像素，但这无法利用更高分辨率的屏幕。

# javascript - Javascript“未捕获的类型错误”

> ID：14140611
> 
> 赞同：-1
> 
> 时间：2013-01-03T14:15:19.883
> 
> 标签：javascript, playlist

以下错误会阻止应用程序工作：

```
"Uncaught TypeError: Cannot call method 'removeAttribute' of null" 
"Uncaught TypeError: Cannot call method 'appendChild' of null" 
```

该应用程序应在加载后立即播放视频播放列表。如果您单击第二个视频，然后单击返回第一个视频，播放列表将播放。无论我是否放置，我都会收到相同的错误

```
<script type="text/javascript" src="js/playlist_jquery.js"></script> 
```

在 HEAD 标签之间或在结束 BODY 标签之前

这是一个例子： [http ://bit.ly/10QO0mv](http://bit.ly/10QO0mv)

任何见解都会有所帮助。

谢谢 - 德里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T20:27:11.093

加载页面后，视频现在就会播放。我忽略了 SublimeVideo 播放器中的设置。基本上，您不能在播放列表中的第一个视频的视频标签中引用“崇高”类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:20:57.260

尝试将您的代码放入 onload 事件中：

```
<script type="text/javascript">
window.onload = function(){
    ...
}
</script>
</head>
<body> 
```

也许您的脚本在页面完全加载之前正在执行，因此该`getElementById()`方法返回`null`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:25:08.617

加载正文后尝试开始播放视频

```
$(document).ready(function() {
   // start video streaming once all resources are done loading
 }); 
```

# android - 将文件保存在 android 设备的内部存储器中

> ID：14140612
> 
> 赞同：-1
> 
> 时间：2013-01-03T14:15:22.420
> 
> 标签：android

我正在尝试制作一个在 sd 卡上保存临时文件的应用程序。

如果用户没有 sd 卡，我希望应用程序将文件保存在内部存储中

对不起我的英语。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:27:56.403

这是我用于在 SD 卡或内部存储上缓存的内容，但要小心。您必须定期清除缓存，尤其是在内部存储上。

```
private static boolean sIsDiskCacheAvailable = false;
private static File sRootDir = null;

public static void initializeCacheDir(Context context){
    Context appContext = context.getApplicationContext();

    File rootDir = null;

    if(Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())){
        // SD card is mounted, use it for the cache
        rootDir = appContext.getExternalCacheDir();
    } else {
        // SD card is unavailable, fall back to internal cache
        rootDir = appContext.getCacheDir();

        if(rootDir == null){
            sIsDiskCacheAvailable = false;
            return;
        }
    }

    sRootDir = rootDir;

    // If the app doesn't yet have a cache dir, create it
    if(sRootDir.mkdirs()){
        // Create the '.nomedia' file, to prevent the mediastore from scanning your temp files
        File nomedia = new File(sRootDir.getAbsolutePath(), ".nomedia");
        try{
            nomedia.createNewFile();
        } catch(IOException e){
            Log.e(ImageCache.class.getSimpleName(), "Failed creating .nomedia file!", e);
        }
    }

    sIsDiskCacheAvailable = sRootDir.exists();

    if(!sIsDiskCacheAvailable){
        Log.w(ImageCache.class.getSimpleName(), "Failed creating disk cache directory " + sRootDir.getAbsolutePath());
    } else {
        Log.d(ImageCache.class.getSimpleName(), "Caching enabled in: " + sRootDir.getAbsolutePath());

        // The cache dir is created, you can use it to store files
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:20:14.820

您可以使用 Context 的 getExternalCacheDir() 方法获取文件引用，您可以在其中将文件存储在 SD 卡上。当然，您必须像往常一样进行常规检查以确保外部存储已安装并可写，但这可能是存储该类型临时文件的最佳位置。您可能想要做的一件事就是设置您可以在缓存目录中使用的最大空间量，然后，每当您需要写入新的临时文件时，如果该文件超过最大空间，则开始删除临时文件，从最旧的开始，直到有足够的空间。或者，也许这样的事情会起作用：

```
 if(Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)) {
File externalRoot = Environment.getExternalStorageDirectory();
File tempDir = new File(externalRoot, ".myAppTemp");
 } 
```

在前面加上“。” 应该使文件夹隐藏，我很确定。

# php - 按标签/类别组织博客文章

> ID：14140613
> 
> 赞同：0
> 
> 时间：2013-01-03T14:15:23.910
> 
> 标签：php, wordpress

有没有一种方法，默认情况下它会按最新的优先顺序显示我的帖子。假设他们正在寻找有关体育的博客文章，那么他们可以单击我将放置在页面一侧的选项，以允许他们显示所有体育博客文章。

我不知道这是由 wordpress 中的标签还是类别完成的。有没有可以帮助我做到这一点的插件？或者只是标准的php代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:14:49.980

您的模板文件中类似下面的内容将对其进行排序：

```
$args=array(
                      'orderby' => 'post_date',
                      'order' => 'DESC'
); 
```

WP Codex 上的优秀参考指南 - [http://codex.wordpress.org/Function_Reference/query_posts](http://codex.wordpress.org/Function_Reference/query_posts)

所以：-

```
<?php
                  $args=array(
                  'orderby' => 'post_date',
                  'order' => 'DESC',
                   );
                 $recent_posts = get_posts($args);
                 foreach( $recent_posts as $recent ){

                 ?>
                <?php

                    $mypages = get_post( $recent->ID );
                    $name  = $mypages->post_name;
                    $content = $mypages->post_content;

                ?>
                <?php if(has_post_thumbnail()) : ?>
                    <div class="thumb">
                        <?php the_post_thumbnail(); ?>
                    </div>
                <?php else : ?>
                    <div class="thumb">
                        <img src="aDefaultImage.jpg" />
                    </div>
                <?php endif; ?>
                <p><?php the_date('jS F Y','<span class="date">','</span><br />'); ?>
    <?php echo $content; ?></p>
            <?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:56:23.327

默认情况下，该功能在 wordpress 中有。

1.  首先创建体育娱乐等类别。
2.  创建您的帖子并在右侧选择它们所属的类别。
3.  然后转到外观->菜单并将类别添加到您在主题中显示的菜单中。
4.  如果你想把它添加到一边。然后小部件会有所帮助。
5.  首先安装插件类别帖子 [http://wordpress.org/extend/plugins/category-posts/](http://wordpress.org/extend/plugins/category-posts/) 转到外观->小部件并在所需的小部件中添加类别帖子。

# c# - 使用实体框架同时更新和添加子行

> ID：14140617
> 
> 赞同：5
> 
> 时间：2013-01-03T14:15:39.917
> 
> 标签：c#, asp.net, entity-framework

在同时修改和添加子行时，我遇到了一些麻烦。我正在使用答案中的技术：[stackoverflow.com/questions/5557829/](https://stackoverflow.com/questions/5557829/update-row-if-it-exists-else-insert-logic-with-entity-framework) ...。

问题出在以下代码中：

```
public void EditReport(tbl_inspection inspection)
{
    foreach (var roll in inspection.tbl_inspection_roll)
    {                    
        container.tbl_inspection_roll.Attach(roll);
        container.ObjectStateManager.ChangeObjectState(roll, (roll.id_inspection_roll == 0) ? EntityState.Added : EntityState.Modified);
    }

    container.SaveChanges();
} 
```

我总是至少有 1 行要更新。当我要添加 1 行时，它工作正常，问题是当我尝试同时添加多于 1 行时，显示众所周知的错误：

> ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。

感觉好像我在这里错过了一些东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:23:10.563

我认为您需要将修改后的内容与添加的内容分开。在您链接到 Ladislav 的问题中，有以下代码作为示例：

```
if (myEntity.Id != 0)
{
    context.MyEntities.Attach(myEntity);
    context.ObjectStateManager.ChangeObjectState(myEntity, EntityState.Modified);
}
else
{
    context.MyEntities.AddObject(myEntity);
}

context.SaveChanges(); 
```

我认为专门使用 Attach 而不是使用 AddObject 是导致错误的原因。

编辑：请尝试以下附加部分：

```
var r = new tbl_inspection_roll { id_inspection_roll = roll.id_inspection_roll };
container.tbl_inspection_roll.Attach(r);
container.Entry(r).CurrentValues.SetValues(roll); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:34:41.727

这里的问题是因为两个或多个子存根具有相同的键：0。一旦您尝试附加第一个对象，它就会触发错误。

必须使用某种 DTO 重新设计该方法（我认为将 ViewModel 对象传递给域模型层是不正确的，这就是我使用存根的原因）。或者直接从控制器调用一个函数来添加/修改。

编辑：

这是代码：

```
public void EditReport(Inspection obj)
{
    var inspection = new tbl_inspection
    {
        id_inspection = obj.ID,
        code = obj.Code       
    };

    foreach (var roll in obj.Rolls)
    {                    
        var rollStub = new tbl_inspection_roll
        {
            id_inspection_roll = roll.ID,
            id_inspection = obj.ID,
            description = roll.Description
        };

        container.tbl_inspection_roll.Attach(roll);
        container.ObjectStateManager.ChangeObjectState(roll, (roll.id_inspection_roll == 0) ? EntityState.Added : EntityState.Modified);
    }

    container.tbl_inspection.Attach(inspection);
    container.ObjectStateManager.ChangeObjectState(inspection, EntityState.Modified);

    container.SaveChanges();
} 
```

欢迎任何更好的解决方案......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T20:21:27.293

如果我正确理解您的问题，您正在尝试保存包含 ParentObject 和相关 ChildObjects 的对象图并且您收到异常，因为 Attach() 无法协调数据库中 ChildObjects 和附加 ParentObject 之间的 Id 冲突。

以下是我过去使用过的解决方法。它不漂亮，但它完成了工作。

```
public ParentObject Upsert(ParentObject newParentObject)
{
    // Check for an existing ParentObject.
    ParentObject exisitingParentObject = container.ParentObjects.SingleOrDefault(o => o.Id == newParentObject.Id);

    // If not an existing ParentObject
    if (exisitingParentObject == null)
    {
        // Add a new ParentObject
        exisitingParentObject = container.ParentObjects.Add(container.ParentObjects.Create());
    }

    // Update the properties of the existing ParentObject with the values of the new ParentObject
    var parentEntry = container.Entry(exisitingParentObject);
    parentEntry.CurrentValues.SetValues(newParentObject);

    // Remove ChildObjects that are in the existing but not in the new.
    for (int i = exisitingParentObject.ChildObjects.Count() - 1; i >= 0; i--)
    {
        ChildObject exisitingChildObject = exisitingParentObject.ChildObjects[i];
        if (!newParentObject.ChildObjects.Any(o => o.Id == exisitingChildObject.Id))
        {
            container.ChildObjects.Remove(exisitingChildObject);
        }
    }

    // Upsert new ChildObjects
    foreach (ChildObject newChildObject in newParentObject.ChildObjects)
    {
        // Check for an existing ChildObject
        ChildObject exisitingChildObject = exisitingParentObject.SingleOrDefault(o => o.Id == newChildObject.Id);

        // If not an existing ChildObject
        if (exisitingChildObject == null)
        {
            // Add a new ChildObject
            exisitingChildObject = exisitingParentObject.ChildObjects.Add(container.ChildObject.Create());
        }

        var childEntry = container.Entry(exisitingChildObject);
        childEntry.CurrentValues.SetValues(newChildObject);
    }

    container.SaveChanges();

    return exisitingParentObject;
} 
```

# sql-server - 如果没有要加入的记录，忽略 SQL INNER JOIN？

> ID：14140619
> 
> 赞同：14
> 
> 时间：2013-01-03T14:15:50.440
> 
> 标签：sql-server, tsql, inner-join

我有以下加入

```
INNER JOIN @SynonymTable AS A ON ([Products].[Title] LIKE A.[Synonym]) 
```

@SynonymTable 表变量包含（如果需要）项目术语列表，例如：

```
%shirt%
%blouse%
%petticoat% 
```

这些都是基于特定关键字搜索的同义词列表，例如术语“衬衫” - 然后我可以从中找到所有可能相关的项目等。问题是，如果没有提供关键字该查询显然不加入任何东西。

如果同义词表中没有项目，是否有消除连接或返回所有项目的方法？

我[在查询中找到了诸如 Bypass last INNER JOIN](https://stackoverflow.com/questions/3830619/bypass-last-inner-join-in-query)之类的帖子，但无法让它适用于我的场景？

任何帮助或建议都会很棒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T14:45:43.590

您可以像这样使用一个选择：

```
SELECT * FROM Products 
LEFT JOIN @SynonymTable AS A ON ([Products].[Title] LIKE A.[Synonym])
WHERE A.[Synonym] IS NOT NULL 
      OR NOT EXISTS (SELECT B.[Synonym] FROM @SynonymTable B) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T14:33:38.613

使用两个不同的查询，检查是否`synonymtable`有行并运行查询，`inner join`否则从`products`表中返回行

```
IF EXISTS (SELECT * FROM @SynonymTable)
BEGIN
  SELECT * FROM Products 
  INNER JOIN @SynonymTable AS A ON ([Products].[Title] LIKE A.[Synonym])
END
ELSE
  SELECT * FROM Products 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:35:20.820

一个解决方案是不在同义词表上加入，而是在 where 子句中使用它

不是最优雅的代码，但应该可以工作（除非你有一个很大的同义词表，否则它会变慢）

```
where ((select count(1) from @SynonymTable) = 0 or 
       (select count(1) from @SynonymTable 
        where [Products].[Title] LIKE @SynonymTable.[Synonym]) > 0 )) 
```

# excel - 无法为函数内的单元格区域着色

> ID：14140625
> 
> 赞同：1
> 
> 时间：2013-01-03T14:16:02.013
> 
> 标签：excel, vba

我正在尝试为作为参数传递给函数的单元格着色，但它似乎不起作用。这是代码：

```
Sub my_test(Target As Range)

    With Target.Cells(1, 1).Interior
        .ColorIndex = 3
        .PatternColorIndex = xlAutomatic
    End With

End Sub

Function f_Lookup_domain(P_Cell_name As Range, ByVal P_Default As String) As String

    Call my_test(P_Cell_name)
    v_Cell_name = P_Cell_name.Value

    ' Application.Volatile
    'Lookup the domain of a signal from the cell name
    '
    v_temp = Application.VLookup(v_Cell_name, Range("n_IO_cell_lookup"), 2, False)
    If Application.IsError(v_temp) Then
        ' cell given is not a real IO cell, try to use default
        If P_Default = "CUT" Then
            v_temp = "Unknown"
        Else
            v_temp = P_Default
        End If
    End If
    f_Lookup_domain = v_temp

End Function 
```

没有错误报告，函数返回正确的值。`my_test`被调用但单元格没有被绘制。如果我`my_test`使用以下测试台调用：

```
Sub Testbench()

    Call my_test(Range("D10"))

End Sub 
```

它确实正确地为单元格着色。是不是好像`P_Cell_name`不是一个范围？有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:32:57.083

像这样调用的用户定义函数不能修改范围或工作表的属性（与其值相关的属性除外），如果您尝试它将默默地失败。

[Excel 中自定义函数的限制说明](http://support.microsoft.com/kb/170787)。

[条件格式](http://office.microsoft.com/en-gb/excel-help/use-a-formula-to-apply-conditional-formatting-HA102809768.aspx)功能可以提供帮助。

# ruby-on-rails - Ruby - 为什么这个构造返回零？

> ID：14140635
> 
> 赞同：2
> 
> 时间：2013-01-03T14:16:52.270
> 
> 标签：ruby-on-rails, ruby, heroku, null, string

我有这个简单的结构：

```
<% if !@user.address.empty? && !@user.zip.empty? %>
   <%= @user.address+', '+@user.zip%>
<% end %> 
```

如果是`address`并`zip`填写，没关系。但如果没有，就不会在 localhost 上打印出中间行。那也没关系。

但是在 Heroku 上，如果`address`没有`zip`填写，我会收到错误

```
ActionView::Template::Error (undefined method `empty?' for nil:NilClass): 
```

这怎么可能？注意：`address`并且`zip`有 datatype `varchar(255)`。

**编辑：**我忘了添加一个重要说明：`@user`是**NEVER** `nil`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T14:24:41.330

尝试使用`present?`

表面之下`present?`就是它将测试 空`!blank?`字符串以及 for`nil`和。`{}``[]`

在你的情况下：

```
<% if @user.address.present? && @user.zip.present? %>
  <%= "#@user.address, #@user.zip" %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T14:20:06.527

您只能使用`empty?`on `[]`, `{}`, `""`, "" 但不能使用 on `nil`。

改用[`blank?`](http://api.rubyonrails.org/v2.3.8/classes/Object.html#M000024)：

```
!@user.address.blank? && !@user.zip.blank? 
```

使其肯定使用[`present?`](http://api.rubyonrails.org/classes/Object.html#method-i-present-3F)：

```
@user.address.present? && @user.zip.present? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:22:59.270

可能在您的本地数据库中，这些值不是 null，而是实际的空字符串。但是在 Heroku 中，当您检索没有地址的值时，您会得到一个空值。

如果您使用的是 Rails，那么您也可以使用`blank?`which 检查 nil。

只是要注意`blank?`并且`present?`是[积极支持的一部分。](http://guides.rubyonrails.org/active_support_core_extensions.html#extensions-to-all-objects)

# iphone - 适用于 iPad 的 LinkedIn 登录对话框

> ID：14140638
> 
> 赞同：0
> 
> 时间：2013-01-03T14:17:07.910
> 
> 标签：iphone, ios, ipad, linkedin

这个登录 UI 是唯一可用的吗？这些[文档](https://developer.linkedin.com/documents/authentication)并不特定于 iPhone 甚至智能手机应用程序，但这似乎是专门针对智能手机的。例如，iPad 是否有替代 UI？是否可以创建自己的，或者这是否被禁止？

![在此处输入图像描述](../Images/c55ed86ddbcc4af1ff6caedc468f7083.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:38:00.863

似乎这是唯一可用的登录 UI：

[http://developer.linkedin.com/forum/linkedin-authentication-through-api](http://developer.linkedin.com/forum/linkedin-authentication-through-api)

# javascript - jQGrid 中用于事件 viewGridRow 的顶部和左侧选项的问题，无法解析光标位置

> ID：14140640
> 
> 赞同：0
> 
> 时间：2013-01-03T14:17:10.620
> 
> 标签：javascript, jquery, jqgrid

我的 jQGrid 有问题。我正在尝试这样做，以便在触发 viewGridRow 事件时，将弹出窗口的位置设置为光标的位置。我在网格中有一个很长的列表，默认情况下将窗口放在网格的顶部。

atm 我有通过 jQuery 检索光标位置的函数：

```
var CursorX;
var CursorY;
$(document).bind('dblclick', function (e) { CursorX = e.pageX; })
$(document).bind('dblclick', function (e) { CursorY = e.pageY; }) 
```

viewGridRow 的配置如下：

```
ondblClickRow: function (rowid) {
    jQuery("#grid").jqGrid('viewGridRow', rowid, {
        top: CursorY,
        left: CursorX,
        modal: true,
        width: 1500,
        caption: "View Item",
        recreateForm: true,
        beforeShowForm: function (form) {
            jQuery("#grid").
            setColProp('last_instruct', { formatter: "unformat" });
        },
    });
}, 
```

问题是它似乎不起作用。

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:23:00.080

刚刚在我自己的一个网格上进行了测试，正如所写的那样，问题是 jQgrid 在变量更新之前正在处理 ondblClick 事件。

取消您的绑定：

```
var CursorX;
var CursorY;
$(document).bind('dblclick', function (e) { CursorX = e.pageX; })
$(document).bind('dblclick', function (e) { CursorY = e.pageY; }) 
```

然后移动到

```
 top: e.pageY,
    left: e.pageX, 
```

您还需要将 ondblClickRow 更新为

```
ondblClickRow: function (rowid, iRow, iCol, e) { 
```

**编辑**（以确保 jQgrid 每次都重新创建一个新的视图/编辑等窗口。例如（每次重新创建一个新的编辑表单）

```
 $.extend($.jgrid.edit, { closeAfterEdit: true, recreateForm: true }); 
```

作为旁注，您可能想考虑当用户双击一个区域时会发生什么，该区域会生成一个超出正常查看区域的表单。

# java - 线程“主”org.hibernate.MappingException 中的异常：关联引用未映射的类休眠

> ID：14140643
> 
> 赞同：0
> 
> 时间：2013-01-03T14:17:12.157
> 
> 标签：java, hibernate, jakarta-ee, exception, hibernate-mapping

我有一个休眠异常，这是日志和异常。我将附上代码和 hbm 地图。

```
12:39:45,077  INFO Environment:570 - Hibernate 3.5.6-Final
12:39:45,124  INFO Environment:588 - loaded properties from resourcehibernate.properties: {hibernate.bytecode.use_reflection_optimizer=false}
12:39:45,124  INFO Environment:781 - Bytecode provider name : javassist
12:39:45,124  INFO Environment:662 - using JDK 1.4 java.sql.Timestamp handling
12:39:45,483  INFO Configuration:1518 - configuring from resource: /hibernate.cfg.xml
12:39:45,483  INFO Configuration:1495 - Configuration resource: /hibernate.cfg.xml
12:39:45,686  INFO Configuration:655 - Reading mappings from resource : com/beans /User.hbm.xml
12:39:45,874  INFO HbmBinder:348 - Mapping class: User -> user
12:39:46,092  INFO Configuration:655 - Reading mappings from resource : com/beans/Groupe.hbm.xml
12:39:46,139  INFO HbmBinder:348 - Mapping class: Groupe -> groupe
12:39:46,155  INFO Configuration:1633 - Configured SessionFactory: sf
Exception in thread "main" org.hibernate.MappingException: Association references unmapped class: com.beans.User
at org.hibernate.cfg.HbmBinder.bindCollectionSecondPass(HbmBinder.java:2473)
at org.hibernate.cfg.HbmBinder$CollectionSecondPass.secondPass(HbmBinder.java:2752)
at org.hibernate.cfg.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:66)
at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1221)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1377)
at com.beans.Logic.init(Logic.java:22)
at com.beans.Logic.<init>(Logic.java:16)
at com.beans.Test.main(Test.java:12) 
```

用于会话管理的代码是 Logic.java：

```
package com.beans;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.*;

public class Logic {
protected Configuration cfg;
protected SessionFactory sfg;
protected Session s;
protected Transaction tx;

public Logic() {

    this.init();

}

public void init() {
    this.setCfg(new Configuration().configure());
    this.setSfg(this.getCfg().buildSessionFactory());
    this.setS(this.getSfg().openSession());
    this.setTx(this.getS().beginTransaction());
}

public Configuration getCfg() {
    return cfg;
}

public void setCfg(Configuration cfg) {
    this.cfg = cfg;
}

public SessionFactory getSfg() {
    return sfg;
}

public void setSfg(SessionFactory sfg) {
    this.sfg = sfg;
}

public Session getS() {
    return s;
}

public void setS(Session s) {
    this.s = s;
}

public Transaction getTx() {
    return tx;
}

public void setTx(Transaction tx) {
    this.tx = tx;
}

} 
```

用户类：

```
 package com.beans;

 // Generated 3 janv. 2013 12:07:19 by Hibernate Tools 3.4.0.CR1

/**
* User generated by hbm2java
 */
  public class User implements java.io.Serializable {

/**
 * 
 */
private static final long serialVersionUID = 1L;
private Integer userId;
private Groupe groupe;
private String username;
private String password;
private String email;

public User() {
}

public User(Groupe groupe, String username, String password, String email) {
    this.groupe = groupe;
    this.username = username;
    this.password = password;
    this.email = email;
}

public Integer getUserId() {
    return this.userId;
}

public void setUserId(Integer userId) {
    this.userId = userId;
}

public Groupe getGroupe() {
    return this.groupe;
}

public void setGroupe(Groupe groupe) {
    this.groupe = groupe;
}

public String getUsername() {
    return this.username;
}

public void setUsername(String username) {
    this.username = username;
}

public String getPassword() {
    return this.password;
}

public void setPassword(String password) {
    this.password = password;
}

public String getEmail() {
    return this.email;
}

public void setEmail(String email) {
    this.email = email;
}

 } 
```

用户.hbm：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
 "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 3 janv. 2013 12:07:19 by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
<class name="User" table="user" catalog="apurement">
    <id name="userId" type="java.lang.Integer">
        <column name="user_id" />
        <generator class="identity" />
    </id>
    <many-to-one name="groupe" class="com.beans.Groupe" fetch="select">
        <column name="groupe_id" not-null="true" />
    </many-to-one>
    <property name="username" type="string">
        <column name="username" length="45" not-null="true" />
    </property>
    <property name="password" type="string">
        <column name="password" length="45" not-null="true" />
    </property>
    <property name="email" type="string">
        <column name="email" length="45" not-null="true" />

    </property>

</class>
 </hibernate-mapping> 
```

groupe.java：

```
package com.beans;

// default package
// Generated 3 janv. 2013 12:07:19 by Hibernate Tools 3.4.0.CR1

import java.util.HashSet;
import java.util.Set;

/**
 * Groupe generated by hbm2java
 */
 public class Groupe implements java.io.Serializable {

/**
 * 
 */
private static final long serialVersionUID = 1L;
private Integer groupeId;
private String groupeName;
private String groupeRole;
private Set users = new HashSet(0);

public Groupe() {
}

public Groupe(String groupeName, String groupeRole) {
    this.groupeName = groupeName;
    this.groupeRole = groupeRole;
}

public Groupe(String groupeName, String groupeRole, Set users) {
    this.groupeName = groupeName;
    this.groupeRole = groupeRole;
    this.users = users;
}

public Integer getGroupeId() {
    return this.groupeId;
}

public void setGroupeId(Integer groupeId) {
    this.groupeId = groupeId;
}

public String getGroupeName() {
    return this.groupeName;
}

public void setGroupeName(String groupeName) {
    this.groupeName = groupeName;
}

public String getGroupeRole() {
    return this.groupeRole;
}

public void setGroupeRole(String groupeRole) {
    this.groupeRole = groupeRole;
}

public Set getUsers() {
    return this.users;
}

public void setUsers(Set users) {
    this.users = users;
}

} 
```

Groupe.hbm.xml

```
<?xml version="1.0"?>
 <!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
   "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
 <!-- Generated 3 janv. 2013 12:07:19 by Hibernate Tools 3.4.0.CR1 -->
 <hibernate-mapping>
   <class name="Groupe" table="groupe" catalog="apurement">
      <id name="groupeId" type="java.lang.Integer">
        <column name="groupe_id" />
        <generator class="identity" />
      </id>
     <property name="groupeName" type="string">
        <column name="groupe_name" length="100" not-null="true" />
    </property>
    <property name="groupeRole" type="string">
        <column name="groupe_role" length="45" not-null="true" />
    </property>
    <set name="users" table="user" inverse="true" lazy="true" fetch="select">
        <key>
            <column name="groupe_id" not-null="true" />
        </key>
        <one-to-many class="com.beans.User" />
    </set>
  </class>
 </hibernate-mapping> 
```

休眠.cfg：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
                                     "http://hibernate.sourceforge.net/hibernate- configuration-3.0.dtd">
<hibernate-configuration>
 <session-factory name="sf">
  <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
  <property name="hibernate.connection.password">root</property>
  <property name="hibernate.connection.url">jdbc:mysql://localhost/apurement</property>
  <property name="hibernate.connection.username">root</property>
  <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
  <mapping class="com.beans.User" resource="com/beans/User.hbm.xml"/>
  <mapping class="com.beans.Groupe" resource="com/beans/Groupe.hbm.xml"/>
 </session-factory>
</hibernate-configuration> 
```

各位大大，问题在哪里？？？？？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:21:53.693

`<class name="User" table="user" catalog="apurement">`应该是`<class name="com.beans.User" table="user" catalog="apurement">`。

简而言之：提供一个完全限定的类名。

您不仅需要为声明提供完全限定的类名，还需要在引用类的任何地方提供完全限定的类名。就像在多对一或关系中

```
<many-to-one name="cuentas" class="com.banking.domain.Cuenta" fetch="select">
        <column name="cuenta_id" />
    </many-to-one> 
```

并且

```
<one-to-many class="com.mauriciogracia.banking.domain.Cuenta" /> 
```

# c# - 下载大量小文件

> ID：14140646
> 
> 赞同：0
> 
> 时间：2013-01-03T14:17:15.590
> 
> 标签：c#, wcf, client-server

我正在寻求改进 WCF 客户端/服务器，以便它处理大量小文件，比现在更快。

我编写了一个 WCF 客户端和一个服务器来跨网络移动文件。

我通过从客户端调用服务器（发送我想下载的文件的名称作为参数），然后让服务器返回一个 Stream

简化示例：

```
//CLIENT CODE>>
Stream stream = syncService.GetStream(fileName);
//<<CLIENT CODE

//SERVER CODE>>
public Stream GetStream(string fileName)
{
   string filePathOnServer = ServerService.Service1.SERVER_FILES_PATH + fileName;
   return File.OpenRead(filePathOnServer);
}
//<<SERVER CODE 
```

如果我需要获取多个文件，然后我会递归调用 GetStream，并将流保存到客户端计算机上的文件中。它在移动少量大文件时可以接受我遇到的问题是，无论大小如何，下载单个文件的开销约为 1/10 秒；因此，如果我想下载大量 1Kb 的文件，我基本上被限制为最大 10Kbs。

我希望有人对替代实施提出建议。我尝试从服务器返回一个流列表，但我认为 WCF 不允许这样做。

我需要能够在不压缩文件的情况下做到这一点。

我正在考虑尝试返回一个由多个连接的流组成的流，但我不确定是否有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:31:11.850

我会更改您的 WCF 方法以接受文件名集合（即`List<string>`或 `string[]`），然后将它们打包。我知道[SharpZipLib](http://www.icsharpcode.net/opensource/sharpziplib/)在生成 ZIP 文件方面效果很好。

您将 ZIP 文件流式传输回客户端，客户端将依次解压缩并处理文件。

一个更大的文件应该传输速度快几个数量级，*并且*带宽更轻（因为您将处理更少的网络相关开销），更不用说您将有一个 WCF 调用而不是每个文件一个的事实（一个巨大的瓶颈）。

# c# - 连接字符串 - N 层应用程序

> ID：14140648
> 
> 赞同：4
> 
> 时间：2013-01-03T14:17:25.130
> 
> 标签：c#, asp.net, entity-framework, connection-string, multi-tier

我一直在寻找这个问题的答案，但之前提出的所有问题似乎都是一个复杂的变体，并且没有回答这个问题，所以我想我应该问一下。

我正在开发具有以下内容的三层应用程序......

*   DAL - 使用实体框架的数据访问层
*   BLL - 业务逻辑层
*   Web 应用程序 - MVC Web 应用程序

我创建了一个实体框架模型、存储库类，我的连接字符串在 DAL App.Config 文件中。我现在已经在 BLL 中创建了我的第一个类，它引用了 DAL。在尝试测试以下非常基本的方法时，我收到与 BLL 中缺少连接字符串有关的错误。

```
public static List<DAL.Item> getItems() {

        List<DAL.Item> result = new List<Item>();

        DAL.Repositories.ItemRepository myRepository = new    DAL.Repositories.ItemRepository();
        result = myRepository.GetAll().ToList();

        return result;

    } 
```

为什么 BLL 寻找连接字符串？我在这里错过了一些非常明显的东西吗？

如果我需要跨多个层包含连接字符串，这违背了 n 层结构的目的，那么最好的方法是什么？任何人都可以为我阐明这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:20:40.460

您正在新建一个 DAL 实例，该实例反过来将尝试查看您的配置文件（由于范围在业务层/单元测试中而未找到。您应该做的是查看控制反转（IoC ) 并将 DAL 注入业务逻辑层。然后您可以模拟出不会尝试并实际命中配置文件/数据库等的 DAL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:20:41.507

按原样将连接字符串属性从 app.config 复制到 web.config 连接字符串部分...这将解决

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:23:12.673

连接字符串应该在您的表示层（在您的情况下为 mvc 项目）。只需`connectionStrings`在 web.config 中的节点上添加条目，然后`System.Configuration`在数据层上读取它。

在 web.config 中定义一个连接字符串

```
<connectionStrings>
    <add name="ConnectionStringName" connectionString="Data Source=.\SQLEXPRESS; Database=DataBaseName;..." providerName="System.Data.SqlClient" />
</connectionStrings> 
```

在 Entity-Framework 的 DataContext 中，您可以在 web.config 文件中传递密钥

```
public class ApplicationDbContext : DbContext
{
    public ApplicationDbContext()
        : base("ConnectionStringName")
    {
    }

    // DbSet properties...
} 
```

要从配置文件中读取并获取字符串，您必须为`System.Configuration`程序集添加引用并尝试以下操作：

```
using System.Configuration;

string connectionString = ConfigurationManager.ConnectionStrings["connectionStringName"].ConnectionString; 
```

# php - Zend Framework 主机名验证器

> ID：14140651
> 
> 赞同：2
> 
> 时间：2013-01-03T14:17:42.037
> 
> 标签：php, zend-framework

我需要一个表单内的 URL 验证器。现在我正在使用：

```
$url = new Zend_Form_Element_Text('url');
$url->addValidator(new Zend_Validate_Hostname()); 
```

上面的代码将验证 URL 的 like:`www.domain.com`但将无法验证`http://www.domain.com`.

我应该使用什么验证器来验证有和没有协议 URL 的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-13T09:37:43.203

这将验证域和 uri：

```
$form->addElement ('text', 'url',array(
            '验证器' => 数组 (
                    大批（
                        '打回来'，
                        真的，
                        ['回调' => 函数（$值）{
                            if (Zend_Uri::check($value)) {
                                $hostnameValidator = new Zend_Validate_Hostname(Zend_Validate_Hostname::ALLOW_DNS); //不允许本地主机名，这是默认的
                                $uriHttp = Zend_Uri_Http::fromString($value);
                                返回 $hostnameValidator->isValid($uriHttp->getHost());
                            }
                            返回假；
                        }],
                        'messages' => [Zend_Validate_Callback::INVALID_VALUE => '请输入一个有效的 URL']
                    )
                )
            ));
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T10:24:26.457

您需要删除方案 http，或实施新的可重用验证器 [http://www.rondobley.com/2011/09/24/how-to-validate-a-url-with-a-scheme-and- Zend 框架中的主机名/](http://www.rondobley.com/2011/09/24/how-to-validate-a-url-with-a-scheme-and-hostname-in-zend-framework/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:08:26.307

你不能用 Zend_Validate_Hostname 来做。你可以这样做，是编写你自己的验证器，它将sting分成两部分 - 并使用 Zend_Validate_Hostname 作为主机名和 Zend_Validate_InArray 作为协议来验证它们

# pygtk - 用户可调节面板 pygtk

> ID：14140652
> 
> 赞同：0
> 
> 时间：2013-01-03T14:17:43.903
> 
> 标签：pygtk, glade

如何使用 GLADE 在 PyGTK 中创建用户可调节面板？我的窗口中有 2 个面板。两个面板都是水平包装的，但它们仍然恰好是窗口的一半。而且我要求它们是用户可调节的（具有相同高度的不同宽度）。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:22:23.077

您正在寻找[GtkPaned](http://developer.gnome.org/gtk3/stable/GtkPaned.html)小部件，而不是 GtkBox。

这个小部件只允许两个孩子，并有一个分隔符/处理程序，允许用户手动调整孩子的区域。它非常符合您对问题的描述。

# c# - 使用什么代替 c# 事件来使代码易于移植到 c++？

> ID：14140660
> 
> 赞同：2
> 
> 时间：2013-01-03T14:18:11.400
> 
> 标签：c#, events

我正在写 C#。我喜欢使用`event`. 我的班级很自然地只发布事件而不关心他们将处理谁以及如何处理。但是，由于我需要将代码迁移到 c++，我还应该使用`event`吗？将这样的代码重写为 C++ 有多容易？使用其他更容易重写为 c++ 的技术可能有意义吗？

**upd**我[在 C++、Composition 中发现了类似的问题 C#-like events](https://stackoverflow.com/questions/4461093/c-like-events-in-c-composition)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:47:59.707

.net 中的事件（包括 C#）只是对观察者设计模式的一种解释；这种相同模式的任何 C++ 实现都会有“相似”的行为。

编辑：一些关于主题的快速搜索链接：

*   [一个SO帖子](https://stackoverflow.com/questions/2225162/observer-design-pattern-in-c)

*   [教程站点上的 C++ 中的观察者模式](http://login2win.blogspot.com/2008/05/c-observer-patterm.html)

*   [代码项目文章](http://www.codeproject.com/Articles/888/Applying-Observer-Pattern-in-C-Applications)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:58:46.697

使用什么**代替**c#**事件**来使代码易于移植到 c++？

如果您确定您的想法仅与**event**相关，那么我认为您无需进行任何更改。

**只需为event**编写一个底层类，即可达到您的目标。

你可能有各种方法可以做。第一步是考虑回调。

这里我提供了一些代码，例如，通过 P-invoke 调用 c++ 回调并在 c# 中包装到委托中。

导入回调：

```
[DllImport("devlink.dll")]
static extern int DLRegisterType2CallDeltas(uint pbxh,DLCALLLOGEVENT cb); 
```

定义委托：

```
public delegate void DLCALLLOGEVENT(uint pbxh, StringBuilder info); 
```

声明事件：

```
public event EventHandler<CallLogEventArgs> CallLogEvent; 
```

包装要调用的事件：

```
DLRegisterType2CallDeltas(
    pbxHandle,
    (pbxh, info) => {
        lock(thisLock)
            if(
                default(EventHandler<CallLogEventArgs>)!=CallLogEvent
                &&
                pbxHandle==pbxh
                )
                CallLogEvent(this, new CallLogEventArgs(info));
    }
    ); 
```

你需要在 C++中做一些**反转/反转的事情。**但首先，为**事件**或**委托**实现一个类会让你更接近完成你所要求的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:21:46.737

您可以使用 lambdas 和 std::function 在 C++11 中轻松实现事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T14:31:25.723

如果有疑问，您总是可以直接回到 Windows API。查看事件等。[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686364(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686364%28v=vs.85%29.aspx)。

我已经有好几年没有写过 c++ 了，但那时我很高兴地使用了这些。在.net 世界中，System.Threading 中有包装器，但在底层它们是相同的。

显然，我在这里假设您的目标是（并且将仍然是）Windows。这有点像大锤的方法，但我认为它是万无一失的。

# mysql - 根据日期从行中选择一项

> ID：14140662
> 
> 赞同：1
> 
> 时间：2013-01-03T14:18:14.783
> 
> 标签：mysql, sql, select

我有两个表共享一个公共键“itemID”，第一个表保存每个 itemID 的最新价格，第二个表保存 itemID 价格的任何更改的日期和值，如图所示。每当将新条目放入 tPriceHistory 表时，tLatestItemPrice 表就会自动更新

```
tLatestItemPrice TABLE
itemID,   latestPrice
---------------------
item1     400
item2     75
item3     621

tPriceHistory TABLE
itemID,   PriceChangeDate,  NewPrice
------------------------------------
item1     Jan 8th 2012      400
item1     Jan 7th 2012      300
item1     Jan 6th 2012      280
item1     Jan 3rd 2012      270
item2     Jan 8th 2012      75
item2     Jan 5th 2012      72
item2     Jan 1st 2012      60
item3     Jan 7th 2012      621
item3     Jan 6th 2012      601
item3     Jan 2nd 2012      598 
```

我想要一个查询，返回 tLatestItemPrice 表中的最新价格与特定日期的商品价格之间的价格差异。即，如果我要求在 1 月 4 日和 1 月 4 日之间更改价格，我希望查询返回以下数据集

```
itemID    Price change from 4th Jan
--------------------------
item1     130  (i.e. 400-270)
item2      15
item3      23 
```

运行 mysql Ver 14.14 Distrib 5.5.29，适用于 Linux (x86_64)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:24:07.613

我强烈建议使用可由数据库排序的标准格式来格式化您的日期（正如@JW 所指出的那样）。

然后，您可以执行两个子选择以在给定日期获取两个不同的价格，然后在父查询中您可以对它们的价格执行减法运算。

像这样的东西（但这是一个混乱的快速想法！）：

```
select itemID, TO_P.NewPrice as currentPrice, (FROM_P.NewPrice - TO_P.NewPrice) as priceChange
from tPriceHistory as P 
left join (select itemID, PriceChangeDate, NewPrice from PRICES where PriceChangeDate = 'from_date') as FROM_P on FROM_P.itemID = P.itemID
left join (select itemID, PriceChangeDate, NewPrice from PRICES where PriceChangeDate = 'to_date') as TO_P on TO_P.itemID = P.itemID 
```

显然，由于您的日期没有以机器友好的方式格式化，这只会为您提供明确日期的价格，您需要修改它以使用您的数据**，**甚至可能将您的数据更改为遵循更标准的日期格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:32:54.153

试试这个

```
 select t1.itemID,   (max(NewPrice)-min(NewPrice)) As PRICE  
  from  tPriceHistory t1

  group by t1.itemID
  order by t1.itemID 
```

[**这里演示 SQLFIDDLE**](http://sqlfiddle.com/#!2/643d4/18)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:39:40.283

这就是当您将日期作为字符串存储在表中时的结果

```
SELECT  a.ITEMID, 
        d.NewPrice - a.NEWPRICE `Price change from 4th Jan`
FROM    tPriceHistory a
        INNER JOIN
        (
          SELECT itemID, 
                 DATE_FORMAT(MAX(STR_TO_DATE(PriceChangeDate, '%b %D %Y')),'%b %D %Y') maxDate
          FROM   tPriceHistory
          WHERE  STR_TO_DATE(PriceChangeDate, '%b %D %Y') <= '2012-01-04'
          GROUP BY itemID
        ) AsOfDatePrice ON a.itemID = AsOfDatePrice.ItemID AND
                           a.PriceChangeDate = AsOfDatePrice.MaxDate
        INNER JOIN 
        (
          SELECT itemID, 
                 DATE_FORMAT(MAX(STR_TO_DATE(PriceChangeDate, '%b %D %Y')),'%b %D %Y') maxDate
          FROM   tPriceHistory
          GROUP BY itemID 
        ) LatestDate ON a.itemID = LatestDate.itemid
        INNER JOIN tPriceHistory d
            ON LatestDate.itemid = d.itemID AND
               LatestDate.maxDate = d.PriceChangeDate 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!2/643d4/13)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T14:49:13.213

我想这样解决：

```
select
  tLatestItemPrice.itemID,
  latestPrice-Substring_Index(prices, ',', -1)
from tLatestItemPrice inner join (
  select
    tPriceHistory.itemID,
    GROUP_CONCAT(NewPrice order by
       str_to_date(PriceChangeDate, '%b %D %Y')) as prices
  from tPriceHistory
  where str_to_date(PriceChangeDate, '%b %D %Y')<'2012-01-04'
  group by itemID ) mx
  on tLatestItemPrice.itemID=mx.itemID 
```

（这并不总是最佳的，因为字符串`price`可能会变得更长`group_concat_max_len`，也可能很慢，但我认为这个想法很好）。

看到[这个小提琴](http://sqlfiddle.com/#!2/88232/1/0)。

# zend-studio - Zend Studio 9 设置导出/导入

> ID：14140664
> 
> 赞同：2
> 
> 时间：2013-01-03T14:18:24.550
> 
> 标签：zend-studio

简单的问题：

有没有办法将设置导出/导入到 Zend Studio 9 中的新安装。主要需要的方面是重新创建我的代码着色设置。

我在“导出”菜单中看不到任何相关内容，并且过去从隐藏的应用程序数据中复制不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T11:04:44.560

如果我理解正确，我不确定。在“文件”中有“导入”和“导出”功能。然后只需选择“常规”>“首选项”即可导出您的设置。这对我有用。

![Zend Studio 首选项导出](../Images/61ffcbe57f8d685ed6fe53a5e5bba949.png)

# ruby-on-rails - -bash：备份：找不到命令

> ID：14140666
> 
> 赞同：1
> 
> 时间：2013-01-03T14:18:28.560
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, backup, rbenv

我的开发环境中有[备份 gem](https://github.com/meskyanichi/backup)，并且工作正常。

但是，我尝试在 vps 上的环境生产中安装此 gem，然后尝试：

```
backup generate:model --trigger my_backup --databases='mongodb' --storages='s3' --compressors='gzip' 
```

我得到：

```
-bash: backup: command not found 
```

我在我的生产服务器上`rbenv gem`用于生产。

我该如何解决这个错误？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:33:39.360

尝试`rbenv rehash`或尝试`bundle exec backup`

# php - 将 PHP 字符串转换为二进制格式并在连接到服务器时重新转换它们

> ID：14140669
> 
> 赞同：1
> 
> 时间：2013-01-03T14:18:33.513
> 
> 标签：php

我正在寻找一个 php 脚本，该脚本将使用二进制协议连接到服务器，发送查询并从中接收数据。我想知道如何在 php 中实现它？到目前为止，我有：

```
<?php
$fp = fsockopen("111.111.10.10", "2222", $errno, $errstr, 10);
if (!$fp) {
    echo "$errstr ($errno)<br />\n";
} else {
    fwrite($fp, "You message");
    while (!feof($fp)) {
        echo fgets($fp, 128);
    }
    fclose($fp);
}
?> 
```

当我说二进制时，我不是指计算机语言的底层，我是指发送到服务器的特定字符串应该转换为“0101001”，因为这是服务器读取和转换信息的方式。我需要一种将 php 字符串转换为这种格式并重新转换回来的方法。

如果你不完全理解这个问题，我会解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:30:54.907

要从字符串创建二进制字符串，您需要几个步骤。首先将所有字符更改为数字`ord()`，然后将数字转换为十进制`decbin`。我也曾经`str_pad`让它每个字符有 8 位。

我添加了一个间隔以提高可读性

```
<?php
$str = 'Hello world';
$l = strlen($str);
$result = '';
while ($l--) {
    $result = str_pad(decbin(ord($str[$l])), 8, "0", STR_PAD_LEFT) . ' - ' . $result;
}
print $result;

//01001000 - 01100101 - 01101100 - 01101100 - 01101111 - 00100000 - 01110111 - 01101111 - 01110010 - 01101100 - 01100100
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:22:13.687

使用[pack](http://php.net/pack)和[unpack](http://php.net/unpack)转换为/从二进制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:21:51.143

它们已经采用二进制表示。通过将它们传输到服务器`fwrite`就足够了。

套接字的另一端将接收二进制字符串并按原样处理它。

# ruby - 使用迭代器将数组内的数字相乘

> ID：14140677
> 
> 赞同：1
> 
> 时间：2013-01-03T14:14:39.557
> 
> 标签：ruby

如果我要从预先存在的数组中创建一个新数组并使用数学运算符修改内容，那么这样做的好方法是什么？当我尝试使用下面的代码时，我收到有关未定义方法的错误。

```
ary1 = [1, 2, 3, 4, 5]
ary2 = ary1.each { |i| 
    ary1[i] = ary1[i] * 10
}
p ary1
p ary2 
```

我假设数学运算符不包含在 Array 类中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T14:22:24.230

您正在寻找`map`功能（[docs](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-map)）：

```
ary1 = [1, 2, 3, 4, 5]
ary2 = ary1.map {|value| value * 10} 
```

`map`通常是通过转换给定数组来生成新数组的好方法。您将一个块传递给它，该块会为数组中的每个项目调用。该块接收每个项目 - 而不是索引 - 作为参数，我称之为`value`. 块的返回值被收集到一个新数组中，然后在`map`函数完成时返回。

# prolog - 查看短语/3 翻译的标准方法？

> ID：14140678
> 
> 赞同：3
> 
> 时间：2013-01-03T14:19:03.583
> 
> 标签：prolog, dcg, gnu-prolog, iso-prolog

我正在尝试深入研究以下 GNU Prolog 行为：

```
test(X,I,O) :- phrase(X,I,O).
?- test(("a",!,"b"),"ab",""). 
```

有没有标准的方法来查看短语/3 的翻译？

根据 ISO DCG 提案 (*)，我们需要有一个 expand_term/2。现在我可以用它来检查：

```
?- expand_term((foo --> "a", !, "b"),X).
X = (foo([97|A],B):-!,A=[98|B]) 
```

这是否告诉我在我的 test/3 中如何使用短语/3？

(*) ISO/IEC DTR 13211–3:2006
定句语法规则
Klaus Daessler
2012 年 11 月 20 日
[http://www.complang.tuwien.ac.at/ulrich/iso-prolog/dcgs/dcgsdin121120.pdf](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/dcgs/dcgsdin121120.pdf)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T02:30:43.253

> 有没有标准的方法来查看短语/3 的翻译？

没有。 的意思`phrase/3`是定义的，但是后面的实际实现是不可访问的。有几种不同的方式，如何`phrase/3`定义。它可以像[在 YAP](http://yap.git.sourceforge.net/git/gitweb.cgi?p=yap/yap-6.3;a=blob;f=pl/grammar.yap;h=f532a6c0238cec9f9bc425d205e7a7648e8943ec;hb=9c42dfa26caec69285c25df681d0d06ecb8e61ad#l135)中一样简单：

```
phrase(P, S0, S) :-
        call(P, S0, S). 
```

或者它可以使用`expand_term/2`（或类似的东西）。那是：

```
phrase(P, S0, S) :-
   expand_term(( pseudont --> P ), ( pseudont(CS0, CS) :- Goal) )),
   S0 = CS0,
   S = CS,
   Goal. 
```

它可以在调用后执行最终的统一`Goal`：

```
phrase(P, S0, S) :-
   expand_term(( pseudont --> P ), ( pseudont(CS0, CS) :- Goal) )),
   S0 = CS0,
   Goal,
   S = CS. 
```

并且通过引入（依赖于实现的）约定，扩展的谓词总是在最后一个参数中使用未实例化和未别名的变量调用，这将允许在存在半上下文的情况下进行尾递归。

这完全取决于实施者。

> 这是否告诉我在我的 test/3 中如何使用短语/3？

不，没有办法说。

但是，你为什么要问？或者，换个说法：

> 不同但一致的实现会`phrase/3`产生什么影响？

## 资源消耗

这应该是显而易见的。考虑`?- phrase([],Xs).`哪个不会在 YAP 中的堆上创建任何术语，但会为上面的 naive `expand_term`-expansion 这样做。但是，资源消耗超出了当前标准的范围。

## 变量排序

考虑`..., phrase([], Xs, Xs), ...`YAP 中规则的主体：`Xs`仍然是局部变量，而`expand_term`基于 - 的短语使其成为全局变量。在许多实现中，这会影响变量的相对顺序。现在，标准在 7.2.1 中明确指出：

> 如果 X 和 Y 是不相同的变量，则
> X term_precedes Y 应依赖于实现
> ，除非在创建排序列表（
> 7.1.6.5、8.10.3.1 j）期间排序应保持不变。

所以这又不是问题，但这仍然可能很烦人。

## NSTO财产

Prolog 标准（即第 1 部分 ISO/IEC 13211-1）仅在 NSTO 时定义执行。也就是说，如果在执行期间发生的所有统一都是 NSTO — 不受发生检查的影响（参见 7.3.3）。

现在，考虑您的情况：`phrase(("a",!,"b"), Xs, Ys)`. 乍一看，这相当于`phrase("ab", Xs, Ys)`. 但现在考虑假设[`set_prolog_flag(double_quotes,chars)`](https://stackoverflow.com/a/8269897/772868)

```
?- Xs = [c|_], Xs = Ys, phrase(("a",!,"b"), Xs, Ys). 
```

毫无疑问，这个查询应该会失败。但它是 NSTO 吗？天真地，我们可以假设这可以替换为：

```
?- Xs = [c|_], Xs = Ys, Xs = [a,b|Ys]. 
```

这相当于：

```
?- Xs = [c|_], Xs = [a,b|Xs]. 
```

显然，`Xs = [a,b|Xs]`只有 STO （受发生检查）。而且两者一起都是STO！要理解这一点，请考虑 7.3.2 中的 Herbrand 算法。本质上，它“以任何顺序”不确定地重写方程。这是一个这样的推导：

```
 Xs = [c|Zs], Xs = [a,b|Xs].
(7.3.2 f) Xs = [c|Zs], [c|Zs] = [a,b,c|Zs].
(7.3.2 d) Xs = [c|Zs], c = a, Zs = [b,c|Zs].
(7.3.2 g) failure (not unifiable, positive occurs-check) 
```

当然，这种推导是不寻常的。通常，在 存在的情况下会立即失败`c = a`，但该算法在这方面是不确定的。只有当所有可能的推导都不导致 7.3.2 g 时，一组方程才是 NSTO。引用 7.3.3：

> 一组方程（或两项）是“不受
> 发生检查”（NSTO）的，如果没有办法继续执行
> Herbrand 算法的步骤，从而
> 发生 7.3.2 g。

## 冻结/2 和何时/2

这些构造也可能受到影响。尽管现有标准文件目前未涵盖它们，但了解潜在影响仍然具有相关性。考虑：

```
?- freeze(L, (X=1;X=2)), phrase(("a",!,"b"),L).
L = [a, b],
X = 1. 
```

B、SICStus、SWI、YAP 都产生了这一答案。所以削减意义重大。

* * *

无论如何，感谢您的提问——我仅在回答您的问题时才理解 NSTO 问题！这显然对如何制定 DCG 翻译有一些影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T03:51:47.497

由于 ISO DCG 没有定义一种方法来确定哪个短语/3 用作执行术语，因此唯一的方法是查阅源代码。在这里可以找到：

[http://sourceforge.net/projects/gprolog/](http://sourceforge.net/projects/gprolog/)

短语/3 谓词在名为 expand.pl 的文件中定义。它的定义使用'$dcg_trans_body'/4。我们可以检查一下：

```
GNU Prolog 1.4.2
By Daniel Diaz
Copyright (C) 1999-2012 Daniel Diaz
| ?- '$dcg_trans_body'(("a",!,"b"), In, Out1, Body).

Body = (!,A=[98|Out1])
In = [97|A] 
```

所以第一个终端确实合并到了 In 参数中，类似于 foo 规则。由于这是在调用 phrase/3 时完成的，所以这应该不是问题。

# xcode - 如何在视图控制器 StoryBoard Xcode 之间发送数据

> ID：14140679
> 
> 赞同：2
> 
> 时间：2013-01-03T14:19:03.947
> 
> 标签：xcode, uiviewcontroller, storyboard

请帮我..

我想在情节提要的不同控制器之间传递数据。例如。

第一个视图控制器

```
NSString *firstValue;

firstValue = @"First Number"; 
```

现在我想将它发送到结果视图控制器并存储在

```
NSString *resultFromFirstVC; 
```

并显示在标签中。

```
[label setText: resultFromFirstVC]; 
```

所以标签显示：

> 第一个数字

![Xcode 故事板](../Images/71fd7de84bc60a884a439363e505854f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T15:19:42.093

使用此方法在所有视图控制器中传递属性

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"ShowNewVC"]) {
        NextViewController *nextVC = (NextViewController *)[segue destinationViewController];
        nextVC.someProperty = self.myProperty;
    }
} 
```

更改“NextViewController”的名称以匹配您的名称。请务必在 Storyboard 文件中添加“Segue Identifiers”。

这应该有效。但是，当您必须通过这么多视图控制器传递此属性时，您可以考虑创建一个单例“数据管理器”对象来存储数据。视图控制器可以通过单例访问数据。

祝你好运！

# breeze - 在许多实体中保存更改需要大量时间（Breeze SaveChanges 方法）

> ID：14140684
> 
> 赞同：0
> 
> 时间：2013-01-03T14:19:21.710
> 
> 标签：breeze

我将 Breeze 与实体框架代码优先模型一起使用。

使用数据库（MySQL）的常规操作工作正常，但是当我保存一个具有 50-60 个子实体的父实体（一对多关系）时，操作保存需要很多时间 - 接近 40 秒。- 1分钟。这些实体没有很多属性，并且在本地计算机上安装了 MySQL。

如何加快此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:26:25.980

我试图重现这一点，但到目前为止还无法做到。我的测试在不到 1 秒的时间内保存了 5 个父实体（客户）和 49 个子实体（订单）（总共 250 个实体）。我正在使用我们在微风 DocCode 示例中包含的 NorthwindIB SQL Server 数据库。（在下载页面上提供的微风示例 zip 中）。

您能否在不涉及微风的情况下测试您的保存以查看问题是否与您正在使用的 MySQL EF 提供程序有关？我只是在这里猜测。

# java - 休眠中的 saveAll 方法更新插入时间戳

> ID：14140692
> 
> 赞同：0
> 
> 时间：2013-01-03T14:19:54.800
> 
> 标签：java, spring, hibernate

有一个名为的类`events`，它是到类的多对一映射`location`

使用休眠和弹簧。

当我使用`eventsDao.saveAll(entities);`插入时间戳时，仅为列表中的第一个对象创建。

这就是我的映射文件中时间戳的外观，

```
<property name="insertTime" type="org.joda.time.contrib.hibernate.PersistentLocalDateTime" column="INSERTTIME"/> 
```

如何更改它以保存列表中所有对象的插入时间戳？请有任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:39:54.137

这就是您使用注释的方式。不确定 xml 配置的等价物是什么。您可以在创建实例时创建一个新的 Date() ，然后在实体更新时更新更新的字段：

```
private Date created = new Date();
private Date updated = new Date();

@PreUpdate
public void setLastUpdate() {  this.updated = new Date(); } 
```

不要为任何这些方法提供 setter，只提供 getter。

# c-preprocessor - 不需要的重新定义

> ID：14140693
> 
> 赞同：0
> 
> 时间：2013-01-03T14:20:01.513
> 
> 标签：c-preprocessor

我想在我的代码中定义日志级别：

```
#define INFO 1
#define WARNING 2
#define ERROR 4
#define DEBUG 8 
```

但是在其他一些标准的微软库中已经定义了 ERROR 并且看起来其他词也被保留了。遇到这种情况怎么处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:26:11.773

不幸的是，无论你喜欢与否，Microsoft 都定义了许多宏，这些宏会被注入到你的代码中。所以你最好不要重复他们的错误，避免定义宏。

您可以做的最好的事情是定义*常量*而不是宏，并将它们放在命名空间中以避免名称冲突。例如：

```
namespace Log
{
  const int Info = 1;
  const int Warning = 2;
  const int Error = 4;
  const int Debug = 8;
} 
```

然后你会在你的代码中使用它们`Log::Info`，`Log::Error`等等。

编辑：正如 Tinctorius 在评论中指出的那样，`enum`在这种情况下你可能会更好地使用：

```
enum LogLevel
{
  Info = 1;
  Warning = 2;
  Error = 4;
  Debug = 8;
} 
```

在这种情况下，您不需要在值前面加上`enum`类型名称，只需使用这种类型的变量即可。例如：

```
LogLevel level = Warning; 
```

这具有提供类型安全性的优点。您还可以重用其他`enum`s 的名称。

# javascript - 如何使用 jQuery 将前一个元素传递给另一个元素？

> ID：14140695
> 
> 赞同：0
> 
> 时间：2013-01-03T14:20:08.517
> 
> 标签：javascript, jquery, validation

我想做这个。

```
<p class="validator">This is an error!</p>
<input type="text" validator="isGoodValue" value=""/>

<p class="validator">This is an error 2!</p>
<label>
<input type="text" validator="isGoodValue" value=""/></label>

<div><p class="validator">This is an error 3!</p></div>
<label>
<input type="text" validator="isGoodValue" value=""/></label>    

<script>
$('input').change( function() {
 if (!isGoogValue( $(this).val() )) {
     $(this).GET_ME_THE_VALIDATOR_ABOVE_ME().show();
 }
 else {
     $(this).GET_ME_THE_VALIDATOR_ABOVE_ME().hide();
 }
});
</script> 
```

获取确切信息的 GET_ME_THE_VALIDATOR_ABOVE_ME 代码可能是什么

上面的验证器，独立于 HTML 结构？或者 jQuery 的什么功能做这个工作......？？？

我正在尝试使用最接近的，父级，上一个.. 但这效果不佳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:22:31.600

尝试这个

```
 if (!isGoogValue( $(this).val() )) {
     $(this).prevAll('.validator:first').show();
 }
 else {
     $(this).prevAll('.validator:first').hide();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:59:56.293

真正的解决方案是拥有一些一致的结构，这样您的错误消息就不会与您的输入完全断开，然后您可以使用类似于 Anton 建议的解决方案。

或者，如果绝对不可能将您的 HTML 重构为理智的东西，您可以为您的所有输入提供 ID，并为您的错误消息提供 ID，这些信息可能以某种方式相关。例如，输入 1 的 ID 为`input1`，其对应的错误为`input1error`。然后你可以做这样的事情：

```
$('input').change( function() {
     if (!isGoodValue( $(this).val() )) {
         var id = $(this).attr("id");
         $("#" + id + "error").show();
     }
     else {
         var id = $(this).attr("id");
         $("#" + id + "error").hide();
     }
 }); 
```

看到这个[小提琴](http://jsfiddle.net/NqNvY/1/)。

现在，您的错误出现在哪里并不重要，只要它们可以通过它们的 id 以某种方式关联即可。

[此小提琴](http://jsfiddle.net/NqNvY/3/)中显示的另一个解决方案假设第 n 个输入对应于第 n 个验证器，如下所示：

```
$('input').each(function(index, elem) {
    var idx = index;
    $(elem).change(function() {
        var val = $('.validator').eq(idx);
        if (!isGoodValue( $(this).val() )) {
            val.show();                
        }
        else {
            val.hide();
        }
    });            
}); 
```

# java - 关于 JAVA 邮件传输对象的快速说明

> ID：14140700
> 
> 赞同：0
> 
> 时间：2013-01-03T14:20:16.777
> 
> 标签：java, smtp, jakarta-mail

我正在尝试使用 Java 邮件 API 实现邮件模块。到目前为止我所做的是

```
session = Session.getInstance(serverDetails,
                new javax.mail.Authenticator() {
                    protected PasswordAuthentication getPasswordAuthentication() {
                        return new PasswordAuthentication(userName, password);
                    }
                });
try {
            transport = session.getTransport("smtp");
            transport.connect();
        } catch (MessagingException e) {
            System.out.println(e.getMessage());
        }
MimeMessage message = new MimeMessage(session);
        // set the mail sender address
        message.setFrom(new InternetAddress(userName));
        // set the recipient addresses
        message.setRecipients(Message.RecipientType.TO,
                InternetAddress.parse(toAddr));
        // set subject of the mail
        message.setSubject(subject);
        // Set the body of the message
        message.setText(body);
        // Create a SMTP message object by which we will be able to get the
        // delivery status
        SMTPMessage smtpMsg = new SMTPMessage(message);
        smtpMsg.setReturnOption(SMTPMessage.RETURN_HDRS);
        smtpMsg.setNotifyOptions(SMTPMessage.NOTIFY_SUCCESS
                | SMTPMessage.NOTIFY_FAILURE);
        // attach the listeners for the connection and transmission
        transport.addConnectionListener(this);
        transport.addTransportListener(this);
        // connect to the server and send the message
        try{
            transport.sendMessage(smtpMsg, smtpMsg.getAllRecipients());
        }catch(IllegalStateException e){
            e.printStackTrace();
        } 
```

我只初始化一次传输并尝试在一个循环中发送多封邮件（上面的代码没有显示循环部分）。允许吗？我可以使用单个 trasport 对象实例发送多封邮件吗？

我收到以下错误

```
 org.quartz.core.ErrorLogger schedulerError
    SEVERE: Job (group1.job1 threw an exception.
    org.quartz.SchedulerException: Job threw an unhandled exception. [See nested exception: java.lang.IllegalStateException: Not connected]
        at org.quartz.core.JobRunShell.run(JobRunShell.java:213)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:525)
    Caused by: java.lang.IllegalStateException: Not connected
        at com.sun.mail.smtp.SMTPTransport.checkConnected(SMTPTransport.java:2263)
        at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1075)
        at org.mail.MailSender.sendMailAction(MailSender.java:237)
        at org.mail.MailSender.sendMail(MailSender.java:100)
        at com.util.PopulateMailQueue.populateQueue(PopulateMailQueue.java:172)
        at org.mail.cronjob.CronJob.execute(CronJob.java:14)
        at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
        ... 1 more 
```

请帮我指出这里的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T07:23:13.590

是的，您可以在连接后和关闭传输之前循环发送多封邮件。

```
transport.connect();

for (int i = 0; i < count; i++) {

    //  Create your message
        transport.sendMessage(smtpMsg, smtpMsg.getAllRecipients());
    }

transport.close(); 
```

您收到该错误，可能是因为您在发送所有邮件之前关闭了传输

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T14:25:50.997

你能检查你的控制台日志吗？可能是你错过了一个例外。因为这：

```
....
   transport.connect();
} catch (MessagingException e) {
    System.out.println(e.getMessage());
} 
```

仅将问题记录到控制台，然后继续。如果连接失败，您甚至不会在正常日志中看到它。

# javascript - 如何在 if 语句中使用多个元素、多个事件、但相同的函数

> ID：14140701
> 
> 赞同：0
> 
> 时间：2013-01-03T14:20:20.247
> 
> 标签：javascript, jquery

假设我有：

如果（事件 X 发生在元素 A 上）执行代码 R

如果（事件 Y 发生在元素 B 上）执行代码 R

在 jQuery 中，而不是 2 个 if 语句，你如何拥有 1 个 if 语句：

如果（事件 X 发生在元素 A）或（事件 Y 发生在元素 B）执行代码 R

我一直在研究绑定方法，但一直找不到解决方案。这就像谷歌的搜索功能：如果你点击“搜索”按钮，它就会执行搜索。但是，如果您在输入框中键入内容并按“回车”键，它也会执行搜索。同样，两个不同的元素（按钮和输入框），两个不同的事件（鼠标单击和按键），但功能相同（搜索）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:25:48.563

您的最终代码中不会有任何`if`语句。您必须将每个事件的事件处理程序绑定到每个元素，事件处理程序当然可以是同一个函数：

```
function event_handler() {
    // ...
}

$(elementA).on('eventX', event_handler);
$(elementB).on('eventY', event_handler); 
```

我建议阅读 jQuery 教程：[http](http://docs.jquery.com/Tutorials) ://docs.jquery.com/Tutorials 。

要了解有关事件处理的更多信息，请查看以下文章：[http](http://www.quirksmode.org/js/introevents.html) ://www.quirksmode.org/js/introevents.html 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:29:09.070

您可以使用多个用逗号分隔的 jQuery 选择器（如 CSS 选择器）。生成的 jQuery 对象列表将包含所有这些对象。

`.bind()`如果您使用or`.on()`并将第一个参数设置为由空格分隔的事件名称列表，则允许在 jQuery 中绑定多个事件。

```
function handler_function (e) {
    e.target // contains the element that triggered the event (which was clicked for ex.)
    e.type // contains the event type that triggered the event
    e.keyCode // contains a number representing the key that has been pressed (if any)
}
$('button#button_id, input[type=text]#input_box')
    .bind('keyup click hover touch drag drop', handler_function); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:26:24.833

您需要向两个事件/元素组合添加相同的功能：

```
$('#elementA').on('click', myEventHandler);
// You can specify multiple Events:
$('#elementB').on('mousedown mouseup blur', myEventHandler);
// Or specify multiple elements:
$('#elementB, #elementC').on('click', myEventHandler);

function myEventHandler(e){
    console.log(e.type); // Event type ('mousedown', 'mouseup' etc)
    console.log(this);  // The element that triggered the event.
    // Do stuff.
} 
```

但是您不能在1 行中`click`绑定`'#elementA'` **和绑定。** `mousedown``'#elementB'`

所以，不，没有“单线” jQuery 函数可以将多个***不同的***事件绑定到***不同的***元素。

基本上，[看看 jQuery 的`.on()`](http://api.jquery.com/on/)

# objective-c - UISearchBar 仅在 UIAlertView 显示后工作

> ID：14140705
> 
> 赞同：1
> 
> 时间：2013-01-03T14:20:38.993
> 
> 标签：objective-c, ios

我的应用程序中有一个搜索栏，但它仅在`alertViewShow`. 我已经实现了委托的所有方法：`shouldChangeTextInRange`,,,`searchBarShouldEndEditing``searchBarShouldBeginEditing`

状态栏没问题...知道出了什么问题吗？

```
 -(IBAction)btnSearchClick:(id)sender {
      if (!searchBarVisivel) {
          [searchBar setHidden:NO];
          searchBarVisivel = YES;
    }
    else
    {
        searchBarVisivel = NO;
        [searchBar setHidden:YES];
        [searchBar resignFirstResponder];
    }
} 
```

//搜索栏出现，当我触摸搜索栏的文本字段时，键盘出现，但是当我数字时......什么都没有......

当我调用其他提醒消息的事件时...搜索栏在...之后工作

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert"
                                                 message:@"Alert message"
                                                delegate:self
                                       cancelButtonTitle:@"Não"
                                       otherButtonTitles:@"Sim",nil];
[alert show]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:52:43.290

我错过了 appDelegate ，***applicationDidFinishLauching下面的代码***

```
 self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
[self.window makeKeyAndVisible]; 
```

现在 SearchBar 工作正常！

# jquery - 加载 div 期间的动画

> ID：14140709
> 
> 赞同：0
> 
> 时间：2013-01-03T14:20:40.787
> 
> 标签：jquery, fancybox-2

我想在页面加载期间使用旋转动画，但仅用于 div 内容（在该 div 中生成 à 大表期间）。

我尝试使用 fancybox.showLoading() 和 hideLoading()，因为我已经将 fancybox2 用于其他事情，但没有结果......

你有什么想法可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:24:34.047

看看这个： http: [//net.tutsplus.com/tutorials/javascript-ajax/how-to-create-an-awesome-image-preloader/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-an-awesome-image-preloader/)

它工作正常并且可重复使用。

# tfs - 在 TFS 中解锁项目的命令是什么？

> ID：14140710
> 
> 赞同：0
> 
> 时间：2013-01-03T14:20:44.263
> 
> 标签：tfs, unlock

解锁物品的命令是什么？我的开发人员在本地进行了一些更改（我不在乎）并去度假，将项目锁定在 TFS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:20:44.263

这是许多用户提出的问题，可以在博客文章中找到答案以及更多内容：http: [//techkn0w.wordpress.com/2007/06/21/unlocking-items-locked-by-someone-else -in-tfs-源控制](http://techkn0w.wordpress.com/2007/06/21/unlocking-items-locked-by-someone-else-in-tfs-source-control)

# open-source - 简历上的开源软件与许可软件

> ID：14140716
> 
> 赞同：-1
> 
> 时间：2013-01-03T14:20:55.663
> 
> 标签：open-source, onresume

我的问题是关于在简历上写上你知道一门官方语言但主要尝试过它的开源对应语言的想法（例如：放下你知道 MATLAB，但你知道 Octave 几乎与 MATLAB 相似）。我还计划学习其他语言，如 Mathematica、IDL 和 SPSS，但我找到了他们的开源免费同行，我一直想知道我是否可以使用开源软件练习，然后写下我知道“官方”的简历“编程语言。

任何反馈将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:28:01.557

对你熟悉的软件诚实，让潜在的雇主决定你是否适合这个职位。

即使您是单声道高级用户，也没有什么能阻止您申请 Visual Studio .net 开发人员职位；但如果你没有接受过使用 VS 的培训，请不要撒谎，这是肯定不会被 IMO 聘用的方法

# android - 仅平板电脑应用程序的布局

> ID：14140717
> 
> 赞同：1
> 
> 时间：2013-01-03T14:20:56.450
> 
> 标签：android, android-layout

我打算创建一个只需要在平板设备上运行的 android 应用程序。如果是这样，我必须在哪个文件夹中创建布局？

*   资源/布局或
*   res/layout-大

我会将屏幕限制放在清单文件中。如果我必须将布局文件保留在 res/layout-large 中，我可以删除文件夹 res/layout 吗？哪种是创建仅限平板电脑的 android 应用程序布局的最佳方式？请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:23:39.977

如果您的目标只是您可以`res/layout`直接使用的平板电脑，如果您支持不同平板电脑的不同布局（大 / xlarge / 等），则使用带有限定符的文件夹。

# php - 这些嵌套循环没有结果

> ID：14140719
> 
> 赞同：0
> 
> 时间：2013-01-03T14:20:59.897
> 
> 标签：php, if-statement, while-loop

我正在尝试嵌套两个 while 循环和一个 if 语句。

```
$Query = "SELECT * from lijst";  
$Query2 = "SELECT * from users";
$Result = mysql_query( $Query );  
$Result2 = mysql_query( $Query2 ); 

$Return = "<lijst>"; 
while ( $Lijst = mysql_fetch_object( $Result ))  
{ 

    $Return .= "<lijst>"; 
    while ($Users = mysql_fetch_object( $Result2 ))     
    { 
        if($Lijst['userid'] == $Users['userid'])
        {             
                        $Return .= "<username>".$Users->username."</username>"; 
        }

    }   
    $Return .= "<lijstid>".$Lijst->lijstid."</lijstid>"; 
    $Return .= "</lijst>";  
} 
$Return .= "</lijst>"; 

mysql_free_result($Result); 
mysql_free_result($Result2); 
print ($Return) 
```

但是，我没有得到任何结果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:26:28.577

你有两个错别字。

```
while ( $Users = mysql_fetch_object( $Result2 ) ) { if($Lijst['userid'] == $Users['userid') { 
```

应该：

```
while ( $Users = mysql_fetch_object( $Result2 ) ) { if($Lijst['userid'] == $Users['userid']) { 
```

和

```
print ($return) 
```

错过最后的半列

```
print ($return); 
```

除此之外，您的代码似乎有点混乱。以下不做任何事情：

```
$Return .= ""; 
```

以下是相同的代码，但没有混乱（变量名​​中的大写字母）。这使得编码和人们帮助你变得更容易。

```
$query   = "SELECT * from lijst";
$query2  = "SELECT * from users";

$result  = mysql_query($query);
$result2 = mysql_query($query2);
$return  = "";

while ($lijst = mysql_fetch_object($result)) {
    while ($users = mysql_fetch_object($result2)) {
        if ($lijst['userid'] == $users['userid']) {
            $return .= $users->username;
        }
    }
    $return .= "<lijstid>".$lijst->lijstid."</lijstid>"; 
}
mysql_free_result($result);
mysql_free_result($result2);
print ($return); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:27:58.890

调用时`mysql_fetch_object()`，您应该将数据作为对象而不是数组访问

```
 if($Lijst['userid'] == $Users['userid']) 
```

应该变成：

```
 if($Lijst->userid == $Users->userid) 
```

# ruby-on-rails - 在表单视图中计算信息

> ID：14140722
> 
> 赞同：1
> 
> 时间：2013-01-03T14:21:18.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3

```
<%= f.label :months, "Experience" %>
<%= f.hidden_field :months, :value => (params[:Years]*12) + params[:Months] %>
<%= number_field_tag "Years", nil, placeholder:"Years" %> Years <%= number_field_tag "Months", nil, placeholder:"Months" %> Months 
```

如上; 我想计算并传递所需的信息。目前我在 * 方法上出错：

```
undefined method `*' for nil:NilClass 
```

任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:12:20.603

可能大写符号`:Year`是问题所在。为哈希提供一个新密钥，它将返回`nil`。

如果没有，`params[:year]`您应该使用引用的: 或什至 else 之一`#to_i`进行`|| 0`转换`Integer(value)`。

然而，这种操作在渲染视图之前在控制器方法中更安全，因为`params`操作很容易。您可以在控制器中设置一个变量，然后使用它。

**控制器**

```
def action
  @months = (params[:years].to_i*12) + params[:months].to_i
end 
```

**看法**

```
<%= f.hidden_field :months, :value => @months %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:25:21.817

# 1

params[:years] 为零，dooooh

你可以用

```
raise params[:Years].inspect 
```

# 2

不兼容的类型，请尝试：

```
:value => ((params[:Years].to_i * 12) + params[:Months].to_i) 
```

# android - DatabaseOpenHelper 错误

> ID：14140723
> 
> 赞同：0
> 
> 时间：2013-01-03T14:21:18.450
> 
> 标签：android, eclipse, sqlite, sqliteopenhelper

```
package com.example.namedb;

import android.database.sqlite.SQLiteDatabase;
import android.database.SQLException;
import android.content.Context;

public class DataSource 
{
    private SQLiteDatabase db;
    private dbOpenHelper database_helper;

    public DataSource(Context context) 
    {
        database_helper = new dbOpenHelper(context);
    }

      public void open() throws SQLException 
      {
        db = database_helper.getWritableDatabase();
      }

      public void close() 
      {
          database_helper.close();
      }

} 
```

我在 dbOpenHelper 上有一个错误，它说 dbOpenHelper 无法解析为一种类型。我不明白这个错误，我不知道如何解决它。伙计们，我需要你的帮助。请解释错误以及我该如何解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:27:55.500

你需要一个名为`dbOpenHelper`. 在您的班级中添加以下声明。它扩展`SQLiteOpenHelper` 并覆盖了它的方法。

```
 private static class dbOpenHelper extends SQLiteOpenHelper {

    dbOpenHelper(Context context) 
    {
       super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) 
    {
         db.execSQL("CREATE TABLE " + TABLE_NAME + " (id INTEGER PRIMARY KEY, name TEXT, number TEXT, skypeId TEXT, address TEXT)"); //create table query
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
       db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
       onCreate(db);
    }
} 
```

此外，您的名称不遵循标准的 java 命名约定。您可以在`SQLiteOpenHelper` [此处找到相关的详细信息](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:29:17.790

请看一看。我已经提供了创建数据库的代码。与android中的公共类。

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class MyDB {
     public static final String KEY_ROWID = "_id";
        public static final String KEY_FIRSTNAME = "ID";
        public static final String KEY_LASTNAME = "CS";
        public static final String KEY_DESIGNATION = "CN";
        public static final String KEY_DN = "DN";  

        private static final String TAG = "MyDB";       
        private static final String DATABASE_NAME = "test.db";    
        private static final int DATABASE_VERSION = 1;

        private static final String DATABASE_CREATE_ValidateUser_DriverInfo =
            "create table tabletest1 (_id integer primary key autoincrement, "
            + "ID text not null, CS text not null,CN text not null,DN text not null);";

        private static final String DATABASE_CREATE_ValidateUser_TripInfo =
                "create table tabletest2 (_id integer primary key autoincrement, "
                + "TI text not null, PU text not null,LN text not null,FN text not null,Origin varchar not null,De text not null);";

        private Context context;
        private DatabaseHelper DBHelper;
        private SQLiteDatabase db;

        public MyDB(Context ctx) 
        {
            this.context = ctx;
            DBHelper = new DatabaseHelper(context);
        }

        private static class DatabaseHelper extends SQLiteOpenHelper 
        {
            DatabaseHelper(Context context) 
            {
                super(context, DATABASE_NAME, null, DATABASE_VERSION);
            }

            @Override
            public void onCreate(SQLiteDatabase db) 
            {
                db.execSQL(DATABASE_CREATE_ValidateUser_DriverInfo);
                db.execSQL(DATABASE_CREATE_ValidateUser_TripInfo);
            }

            @Override
            public void onUpgrade(SQLiteDatabase db, int oldVersion, 
                                  int newVersion) 
            {
                Log.w(TAG, "Upgrading database from version " + oldVersion 
                      + " to "
                      + newVersion + ", which will destroy all old data");
                db.execSQL("DROP TABLE IF EXISTS Employee");
                onCreate(db);
            }
        }

        public MyDB open() throws SQLException 
        {
            db = DBHelper.getWritableDatabase();
            return this;
        }

        //---closes the database---    
        public void close() 
        {
            DBHelper.close();
        }

        public long insertTitle(ContentValues initialValues,String TableName) 
        {

            return db.insert(TableName, null, initialValues);
        }

} 
```

使用以下代码调用数据库并将值插入其中。

```
 ContentValues initialValues;

    MyDB mmdb=new MyDB(getBaseContext());            
    mmdb.open();
    initialValues = new ContentValues();
                                initialValues.put("ID", ID);
                                initialValues.put("CS", CS);
                                initialValues.put("CN", CN);
                                initialValues.put("DN", DN);

                            mmdb.insertTitle(initialValues,"ValidateUser_DriverInfo");  
            mmdb.close(); 
```

这是创建它的示例和简单代码。

# android - 使用 API 从 Google Play 开发者那里获取统计信息

> ID：14140728
> 
> 赞同：79
> 
> 时间：2013-01-03T14:21:44.793
> 
> 标签：android, statistics

我负责开发一个网站，该网站应该能够向客户显示来自 Apple 应用商店和 Google Play 商店的统计数据，以便他们可以轻松查看正在发生的事情。

我已经找到了一些获取 App Store 数据的方法，但 Google Play 开发者的统计数据似乎更难获得。

我听说过抓取，但这不是一个很好的解决方案，因为每当开发人员控制台获得重大更新时，它可能会被破坏。

例如，我正在寻找可以像 Andlytics 或 App Annie 那样工作的东西，所以我可以使用 AJAX 或其他东西（可能是 JSON 格式？）获取数据并将其放入数据库。

目前，我还没有找到任何可靠的解决方案（除了抓取，这似乎是一种不稳定的方法），而且这个问题已经被问过一段时间了，所以我允许自己再问一次，因为也许现在有一些解决这个问题的解决方案。

我能找到的只有 Google Play API，它允许我从应用程序的公共页面获取数据，但不能从开发人员控制台获取数据，并进行身份验证。

任何提示或帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-21T22:32:07.057

***愿源与你同在。***

Andlytics 是[开源](https://github.com/AndlyticsProject/andlytics)且积极开发的，您可能会在其中找到有用的东西 :)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-06-06T14:06:24.363

您的 Google Play 统计信息会发布到存储在 Google Cloud Storage 存储桶中的文件 ( [https://support.google.com/googleplay/android-developer/answer/6135870?p=financial_export&rd=1#export](https://support.google.com/googleplay/android-developer/answer/6135870?p=financial_export&rd=1#export) )

您可以下载上述链接中提到的 gsutil 工具并将其设置为 cron 作业，以便每天将文件复制到您想要的任何位置，或者您可以使用 Google Cloud Storage API ( [https://cloud.google。 com/storage/docs/apis](https://cloud.google.com/storage/docs/apis)）去自己获取文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-17T16:15:13.677

我知道这已经得到解答，但是这个解决方案值得特别注意。有一种从开发者控制台获取数据的好方法。看看：[https ://github.com/tmurakam/googleplay_dev_scraper](https://github.com/tmurakam/googleplay_dev_scraper)

我让它在我的树莓派上运行，效果非常好。使用 bash 脚本安装和进一步自动化它非常简单。我真的向任何有兴趣从开发者控制台获取数据的人推荐这个刮板！有了这个，你可以从开发者控制台获取几乎所有的数据。我会定期抓取下载数量并将它们保存到我的网页中。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-01-28T06:07:39.843

谷歌似乎已经允许我们通过他们的 API 获取这些数据。这是一个页面，其中包含您可以发出请求的所有可用指标。

[https://developers.google.com/analytics/devguides/reporting/core/dimsmets#mode=web&cats=user,lifetime_value_and_cohorts,channel_grouping,app_tracking](https://developers.google.com/analytics/devguides/reporting/core/dimsmets#mode=web&cats=user,lifetime_value_and_cohorts,channel_grouping,app_tracking)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-14T06:03:46.010

您可以在 IOS 和 Android 项目中使用 Google Analytics 来记录安装和应用内购买。你可以在[这里查看](http://www.google.com/analytics/)。将谷歌分析添加到两个平台应该很容易。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-05-22T13:55:28.387

为什么不使用 App Annie、AppFigures（和类似的）API，让他们负责抓取/连接 Google Play 和 App Store？

[http://support.appannie.com/categories/20082753-Analytics-API](http://support.appannie.com/categories/20082753-Analytics-API)

[http://docs.appfigures.com/](http://docs.appfigures.com/)

# java - Wicket Wizard Dropdown modelValue 不会更新

> ID：14140729
> 
> 赞同：0
> 
> 时间：2013-01-03T14:21:45.450
> 
> 标签：java, wicket

我正在创建一个带有定价服务列表的 ListView。每个定价服务都有一个不同条款的列表，这是一个 DropDownChoice。问题是当我在下拉列表中选择各种值时，术语的值不会更新。这是一个向导，因此我尝试在单击“下一步”之前使用正确的术语更新向导（向导对象有一个 ProductOrder 对象，该对象具有一个术语对象）。

谢谢， 泰尔杰

```
 public ServiceSelectionStep(final NewSubscriptionWizard wizard) {

    final ListView<PricedService> serviceChoiceList = new ListView<PricedService>(
            "serviceList", 
            wizard.getCompanyPriceModel().getPricedServices()) {

        protected void populateItem(ListItem<PricedService> item) {
            final PricedService service = item.getModel().getObject();
            // Adding labels to the list.
            addPricedServiceLabels(item, service);

            DropDownChoice<Term> termsDropDown = new DropDownChoice<Term>(
                    "term", 
                    new PropertyModel<Term>(wizard.getProductOrder(), "term"),
                    service.getTerms(), 
                    new ChoiceRenderer<Term>("description"));

            item.add(termsDropDown);
        }
    };
    add(serviceChoiceList);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:57:29.800

您可以使用 AJAX 回调来执行此操作。检查 Wicket 示例中的“下拉选择示例”。

[http://www.wicket-library.com/wicket-examples/ajax/](http://www.wicket-library.com/wicket-examples/ajax/)

[这](http://www.wicket-library.com/wicket-examples/ajax/wicket/bookmarkable/org.apache.wicket.examples.source.SourcesPage?5&SourcesPage_class=org.apache.wicket.examples.ajax.builtin.ChoicePage)是向您展示如何使用正确模型执行此操作的重要文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:39:00.530

尝试在 AjaxFormComponentUpdatingBehavior 中定位 termsDropDown。

```
termsDropDown.add(new AjaxFormComponentUpdatingBehavior("onchange") {

            @Override
            protected void onUpdate(AjaxRequestTarget target) {

                wizard.getProductOrder().setService(service);
                System.out.println("Chosen term: " + wizard.getProductOrder().getTerm());

                target.addComponent(termsDropDown); 

            }
        });
        item.add(termsDropDown); 
```

# c# - 文件夹扫描图像和图像大小取决于图像宽度

> ID：14140731
> 
> 赞同：0
> 
> 时间：2013-01-03T14:21:48.343
> 
> 标签：c#, image, image-resizing

是否可以在 C# 的帮助下调整图像大小？我有一个文件夹，里面有数千张图片。我需要制作一个应用程序来扫描该文件夹中的所有图像并检查它们的大小参数，然后将那些宽度低于 300 像素的图像按比例调整大小，使其宽度等于 300 像素。有可能吗？以及那时的样子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:28:56.320

检查这个线程。它包含调整图像大小的代码示例[http://forums.asp.net/t/1038068.aspx](http://forums.asp.net/t/1038068.aspx) 要获取文件夹中所有文件的文件名，您可以使用

```
var startPath = @"c:\temp";
var imageFileExtensions = 
    new [] { ".jpg", ".gif", ".jpeg", ".png", ".bmp" };
var pathsToImages = 
    from filePath in Directory.EnumerateFiles(
         startPath, 
         "*.*", 
         SearchOption.AllDirectories)
    where imageFileExtensions.Contains(Path.GetExtension(filePath))
    select filePath; 
```

调整图像大小，您可以使用

```
 public System.Drawing.Bitmap ResizeImage(System.Drawing.Image image, int width, int height) 
    { 
        //a holder for the result 
        Bitmap result = new Bitmap(width, height); 

        //use a graphics object to draw the resized image into the bitmap 
        using (Graphics graphics = Graphics.FromImage(result)) 
        { 
            //set the resize quality modes to high quality 
            graphics.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality; 
            graphics.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic; 
            graphics.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality; 
            //draw the image into the target bitmap 
            graphics.DrawImage(image, 0, 0, result.Width, result.Height); 
        } 

        //return the resulting bitmap 
        return result; 
    } 
```

# java - WS-Security：使用axis2/rampart验证证书链

> ID：14140737
> 
> 赞同：1
> 
> 时间：2013-01-03T14:22:00.630
> 
> 标签：java, axis2, ws-security, rampart, jks

我尝试对用 Java/Axis2 编写的肥皂服务器和客户端之间的通信进行加密和签名。加密有效，但是当我从 java 密钥库中删除根证书时，没有任何改变。如果没有根证书，就无法验证服务器和客户端的证书。似乎壁垒不关心证书链，因为没有错误消息。但是如果没有根证书，肯定会出现错误消息！

我是否必须以特殊方式配置 java 密钥库？它注意到，商店中已经存在一个根证书，因为当我从 openssl 的链中导入一个 normel 证书时，一切正常，并且没有诸如：你想信任新证书之类的问题吗？

还是我必须配置壁垒来测试认证链？

# java - 使用 java.util.Date 获取过去的日期

> ID：14140745
> 
> 赞同：7
> 
> 时间：2013-01-03T14:22:31.933
> 
> 标签：java

下面是我用来访问过去 10 天前的日期的代码。输出为“20130103”，即今天的日期。我怎样才能返回今天的日期 - 10 天？我仅限于使用内置的 java 日期类，所以不能使用 joda 时间。

```
package past.date;

import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;

public class PastDate {

    public static void main(String args[]){

        DateFormat dateFormat = new SimpleDateFormat("yyyyMMdd");
        Date myDate = new Date(System.currentTimeMillis());
        Date oneDayBefore = new Date(myDate.getTime() - 10);    
        String dateStr = dateFormat.format(oneDayBefore);      
        System.out.println("result is "+dateStr);

    }

} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T14:25:26.253

您可以使用`Calendar`'s 方法操作日期。

```
DateFormat dateFormat = new SimpleDateFormat("yyyyMMdd");
Date myDate = new Date(System.currentTimeMillis());
System.out.println("result is "+ dateFormat.format(myDate));
Calendar cal = Calendar.getInstance();
cal.setTime(myDate);
cal.add(Calendar.DATE, -10);
System.out.println(dateFormat.format(cal.getTime())); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T14:24:53.103

这条线

```
Date oneDayBefore = new Date(myDate.getTime() - 10); 
```

将日期设置为 10 毫秒，而不是 10 天。最简单的解决方案是减去 10 天内的毫秒数：

```
Date tenDaysBefore = new Date(myDate.getTime() - (10 * 24 * 60 * 60 * 1000)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T14:34:30.273

使用`Calendar.add(Calendar.DAY_OF_MONTH, -10)`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T14:24:31.557

> Date 类表示特定的时间瞬间，精度为毫秒。

```
Date oneDayBefore = new Date(myDate.getTime() - 10); 
```

所以这里你只减去 10 毫秒，但是你需要减去 10 天乘以 10 * 24 * 60 * 60 * 1000

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-02-28T14:06:19.763

你也可以这样做：

```
Date tenDaysBefore = DateUtils.addDays(new Date(), -10); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-18T12:57:41.893

```
Date today = new Date();
Calendar cal = new GregorianCalendar();
cal.setTime(today);
cal.add(Calendar.DAY_OF_MONTH, -30);
Date today30 = cal.getTime();
System.out.println(today30); 
```

# matlab - 如何找到向量中 n 个最小元素的索引

> ID：14140746
> 
> 赞同：13
> 
> 时间：2013-01-03T14:22:34.890
> 
> 标签：matlab

如何在 MATLAB 的一维数组中获取“n 个最小元素”的索引？

该数组是一个行向量。

我可以使用 ; 找到最小的元素及其索引

```
[C, ind] = min(featureDist); 
```

向量是这样的：

```
featureDist =

  Columns 1 through 8

   48.4766   47.3743   59.5736   59.7450   55.0489   58.2620   63.3865   50.1101 
```

等等...

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-03T14:27:53.550

您可以使用该[`sort`](http://www.mathworks.com/help/matlab/ref/sort.html)功能。要获得最小的 n 个元素，您可以编写如下函数：

```
function [smallestNElements smallestNIdx] = getNElements(A, n)
     [ASorted AIdx] = sort(A);
     smallestNElements = ASorted(1:n);
     smallestNIdx = AIdx(1:n);
end 
```

让我们试试你的数组：

```
B = [48.4766 47.3743 59.5736 59.7450 55.0489 58.2620 63.3865 50.1101];
[Bsort Bidx] = getNElements(B, 4); 
```

返回

```
BSort = 
    47.3743   48.4766   50.1101   55.0489
Bidx = 
    2 1 8 5 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-03T03:48:20.020

我知道这是一个非常晚的回复，但我希望能帮助以后可能有这个问题的任何人。

如果 A 是元素数组，yu 可以尝试使用 find 函数来确定 n 个最小元素的索引。

[~, idx] = find(A > -Inf, n, 'first')

要确定 n 个最大的元素，

[~, idx] = find(A < Inf, n, 'last')

# neo4j - 得到介绍 [linkedin] 喜欢

> ID：14140750
> 
> 赞同：0
> 
> 时间：2013-01-03T14:23:00.653
> 
> 标签：neo4j

我使用 Neo4j 与人和公司作为节点和这些之间的friend_of/works_at 关系。我想知道如何实现一个被引入到使用中链接的二级连接。我们的想法是在您希望申请的公司获得第二学位。如果有这些二度连接，那么您想知道您的一度连接中谁可以将您介绍给这些二度连接。

为此，我正在尝试此查询：

```
START from = node:Nodes(startNode), company = node:Nodes(endNode)
MATCH from-[:FRIEND_OF]->f-[:FRIEND_OF]-fof-[:WORKS_AT]->company
WHERE not(fof = from) and not (from-[:FRIEND_OF]->fof)
RETURN distinct f.name, fof.name, company.name 
```

但是，这会返回重复的朋友名称 (fof.name)，因为 distinct 应用于作为一个整体返回的所有参数。可能就像我有朋友 X 和 Y，他们都与在 C 公司工作的 Z 有联系。这样，我得到了 XZC 和 YZC。但是，我想在 Z 上应用 distinct，这样我得到 XZC 或 YZC 或者可能是连接到 Z 的所有朋友的列表/集合/聚合。这可能像 ["X","Y"..]-> Z 我应该如何修改我的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:25:45.993

[http://console.neo4j.org/?id=s1m14g](http://console.neo4j.org/?id=s1m14g)

```
start joe=node:node_auto_index(name = "Joe") 
match joe-[:knows]->friend-[:knows]->friend_of_friend 
where not(joe-[:knows]-friend_of_friend) 
return collect(friend.name), friend_of_friend.name 
```

# c# - 在 C# 中操作和打印 docx 文档

> ID：14140754
> 
> 赞同：-1
> 
> 时间：2013-01-03T14:23:09.133
> 
> 标签：c#, docx

我用 C# 开发了一个应用程序。我想让 sers 定义自己的打印模板来打印证书。目前它接受 html 并用值替换关键字。然而，用户不熟悉 html 设计，转换器不能提供良好的设计结果，并且为获得相同的设计而手写 html 代码非常耗时。

我想让我的应用程序打开 docx 文件，用值替换关键字并打印。

任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:38:19.347

请查看[使用 C# 在 Word 2007 文档中自动搜索和替换](http://weblogs.asp.net/guystarbuck/archive/2008/05/13/automated-search-and-replace-in-multiple-word-2007-documents-with-c.aspx)

您还可以查看[Microsoft Word 模板](http://msdn.microsoft.com/en-us/library/office/aa140287%28v=office.10%29.aspx)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:44:55.483

[MSDN 站点](http://msdn.microsoft.com/en-us/library/kw65a0we%28v=vs.100%29.aspx)有关于 Word 对象模型的信息。

# python - Python 的 `str.format()`、填充字符和 ANSI 颜色

> ID：14140756
> 
> 赞同：15
> 
> 时间：2013-01-03T14:23:17.123
> 
> 标签：python, string, terminal, ansi-colors

在 Python 2 中，我`str.format()`用于将正在打印的一堆文本列对齐到终端。基本上，它是一个表格，但我没有打印任何边框或任何东西——它只是文本行，对齐到列中。

*   没有色彩摆弄，一切都按预期打印。
*   如果我用 ANSI 颜色代码包装一整行（即一个`print`语句），一切都会按预期打印。
*   **但是：**如果我尝试使每一列在一行中具有不同的颜色，则对齐会被取消。从技术上讲，保持*对齐*；填充*字符*（空格）没有按需要打印；实际上，填充字符似乎已被完全删除。

我已经用[`colorama`](http://pypi.python.org/pypi/colorama)和验证了同样的问题[`xtermcolor`](https://github.com/broadinstitute/xtermcolor/)。结果是一样的。因此，我确信这个问题与`str.format()`字符串中间的 ANSI 转义序列打得不好有关。

但我不知道该怎么办！:( 我真的很想知道这个问题是否有任何解决方法。

颜色和对齐是提高可读性的有力工具，而可读性是软件可用性的重要组成部分。如果可以在不手动对齐每一列文本的情况下实现这一点，那对我来说意义重大。

一点帮助？☺

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-06-06T23:56:13.637

这是一个非常晚的答案，对于在努力使用内置 ANSI 颜色代码格式化文本时找到此页面的任何人来说，都是面包屑。

[byoungb](https://stackoverflow.com/questions/14140756/python-s-str-format-fill-characters-and-ansi-colors#comment73552881_14140783)关于对预着色文本的长度做出填充决定的评论是完全正确的。但是，如果您已经有彩色文本，这里有一个解决方法：

在 PyPI 上查看我的[ansiwrap](https://pypi.python.org/pypi/ansiwrap)模块。它的主要目的是提供`textwrap`ANSI 彩色文本，但它也导出告诉你“如果它*不*包含 ANSI 控制代码`ansilen()`，这个字符串会多长时间？” 它在对预着色文本进行格式设置、列宽和换行决策方面非常有用。在您想要的. 例如：*`width - ansilen(s)``s``s``width`*

 *```
def ansi_ljust(s, width):
    needed = width - ansilen(s)
    if needed > 0:
        return s + ' ' * needed
    else:
        return s 
```

此外，如果您需要在某些时候拆分、截断或组合彩色文本，您会发现 ANSI 的有状态特性使这成为一件苦差事。您可能会发现`ansi_terminate_lines()`有帮助；它“修补”子字符串列表，以便每个子字符串具有独立的、独立的 ANSI 代码，其效果与原始字符串相同。

[ansicolors](https://pypi.python.org/pypi/ansicolors)的最新版本还包含`ansilen()`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-03T14:25:23.100

Python 不区分“普通”字符和 ANSI 颜色代码，它们也是终端解释的字符。

换句话说，打印`'\x1b[92m'`到终端可能会改变终端文本的颜色，Python 只将其视为一组 5 个字符。如果您`print repr(line)`改为使用，python 将改为打印字符串文字形式，包括对非 ASCII 可打印字符使用转义码（因此 ESC ASCII 码 27 显示为`\x1b`）以查看添加了多少。

您需要手动调整列对齐方式以允许这些额外字符。

如果没有您的实际代码，我们很难为您提供帮助。*

# arrays - 查找数组中出现频率最高的三元组

> ID：14140757
> 
> 赞同：5
> 
> 时间：2013-01-03T14:23:20.237
> 
> 标签：arrays, algorithm, data-structures

我们有一个包含 N 个数字的数组。所有数字都在 1-k 之间。

问题是如何找到找到最频繁的三元组的最佳方法。

我解决这个问题的方法是：

假设输入类似于 { 1, 2, 3, 4, 1, 2, 3, 4}

首先搜索三元组（1,2,3）的计数，从数组中的第二个元素开始，直到数组的末尾。现在我们将计数为 1。现在从 { 2, 3, 4) 开始并搜索数组。

对于每个三元组，我们扫描数组并找到计数。像这样我们运行数组 n-1 次。

这样我的算法以 n*n 时间复杂度的顺序运行。有没有更好的方法

这个问题。？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:27:02.290

您可以在`O(n * log n)`最坏情况下的空间和时间复杂度下做到这一点：只需将所有三元组插入平衡二叉搜索树，然后找到最大值。

或者，您可以使用哈希表来获取`O(n)`预期时间（如果您选择了一个好的哈希函数，这通常比现实中的搜索树方法更快）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T14:50:34.550

是否有任何内存边界，即它是否在有内存限制的设备上运行？

如果没有，也许这可能是一个很好的解决方案：遍历数组并为每个三重构建和表示对象（或结构，如果在 c# 中实现）进入 map 作为键，三重计数器作为值。

如果您适当地实现`hash`和`equals`运行，您将能够找到数字顺序是否重要的​​“最受欢迎”三元组，例如`1,2,3 != 2,1,3`或`1,2,3 == 2,1,3`

遍历整个数组后，您必须找到最大值，其键将是您的“*最受欢迎*”三元组。通过这种方法，您也可以找到 X 最受欢迎的三元组。此外，您只需扫描一次数组并聚合所有三元组（每个三元组无需额外扫描）。

# drupal - 当前页面的 Drupal 令牌

> ID：14140760
> 
> 赞同：2
> 
> 时间：2013-01-03T14:23:38.910
> 
> 标签：drupal, drupal-7

您好，我希望我能正确解释这一点。

我正在尝试在 webform 默认值字段中填充当前页面标题。

我可以使用 %nid - 节点 ID 返回节点 ID 或名称。%title - 节点标题。

有人知道我需要输入什么来填充当前页面标题吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:05:49.517

如果升级到[Webform 4](http://drupal.org/project/webform)，您可以使用 Drupal 样式的标记，允许您设置`[current-page:title]`为组件值。

# python - 如何修改我的 .bash_profile 文件，以便在不输入文件路径的情况下运行我的 python 脚本？

> ID：14140766
> 
> 赞同：1
> 
> 时间：2013-01-03T14:24:03.470
> 
> 标签：python, osx-lion, epd-python

我是 OSX 新手，熟悉此环境中的文件结构。我的 .bash_profile 文件如下所示：

```
# Setting PATH for EPD_free-7.3-2
# The orginal version is saved in .bash_profile.pysave
PATH="/Library/Frameworks/Python.framework/Versions/Current/bin:${PATH}"
export PATH 
```

我的脚本位于多个目录中，例如：

```
/Users/LMS/Documents/pydata-book
/Users/LMS/Documents/python_scripts 
```

我想做的是打开我的终端，输入脚本的名称（例如 myscript.py），然后执行，就像在 windows 环境中通过指定 *.py 文件与 Python 的关联一样.

有人可以帮我用mac完成这个吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:26:57.720

试着把它放在你的 .bash_profile 中：

```
# Setting PATH for EPD_free-7.3-2
# The orginal version is saved in .bash_profile.pysave
PATH="/Library/Frameworks/Python.framework/Versions/Current/bin:/Users/LMS/Documents/pydata-book:/Users/LMS/Documents/python_scripts:${PATH}"

export PATH 
```

基本上，你把包含你想要的可执行文件的目录，用'：'分隔

# c++ - 编写 GUI (C++/Windows) 的最佳方式

> ID：14140777
> 
> 赞同：-1
> 
> 时间：2013-01-03T14:24:57.133
> 
> 标签：c++, windows, user-interface, mfc, gtk

我想知道用 C++ 编写 GUI 的最佳和更快的方法是什么。

过去，我只使用 Windows API 创建了我的 GUI。现在我想阅读一些关于 GTK、MFC、QT ecc 等其他库的建议。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:27:35.600

使用 Qt。它功能强大且易于使用，而且它是跨平台的。如果我需要 C++ 的 GUI，我总是选择 Qt。

# opencv - OpenCV中的局部MinimaMaxima

> ID：14140786
> 
> 赞同：0
> 
> 时间：2013-01-03T14:25:29.077
> 
> 标签：opencv

我正在尝试将 MATLAB 代码转换为 OpenCV。我在将 MATLAB findpeaks 函数转移到 Opencv 时遇到了一些困难。此函数查找向量的局部最小值和最大值。

我唯一的想法是使用子向量并找到它的全局最小值和最大值，但这看起来不像 findpeaks 函数。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:08:46.803

有句谚语说“做你自己的编码而不是从无处寻找那个”！

我只是平滑了信号，并将每个元素与周围的元素进行了比较。

取决于噪声的应用和存在，计算中考虑的平滑窗口或周围元素的数量可能不同。

谢谢你的帮助。

# javascript - Google Chrome 扩展 Websocket 对象错误未定义为 facebook.com

> ID：14140793
> 
> 赞同：0
> 
> 时间：2013-01-03T14:25:57.350
> 
> 标签：javascript, google-chrome-extension

当我在 Google Chrome 扩展的 contentscript.js 文件中使用 WebSocket 对象时遇到问题。它仅对 facebook.com 主页产生错误。Err.Message 给了我未定义的价值。我不知道为什么它只在 facebook.com 上给出错误。以下行产生错误

```
var ws = new WebSocket("ws://localhost:3345/"); 
```

下面是代码片段`contentscript.js`：

```
/////////////////////SendMessage/////////////////////// <br/>
//Description: We are creating websocket(Chrome API).  <br/>
/////////////////////////////////////////////////////// <br/>

function SendMessage(message) {
    try {
        if ("WebSocket" in window) {

            //creating websocket(Chrome API)
            //Below code line produces error on facebook.com
            var ws = new WebSocket("ws://localhost:3345/");

            //Hook function against  ws.onmessage event.
            ws.onmessage = function (evt) {

                OnMessage(evt);
            };

            ws.onopen = function () {
              ws.send( message););
            };

        }
    }
    catch (err) { alert("Err->" + err.Message); }
} 
```

这是 mainfest.json 代码

```
{
  "name" : "myextension",
  "version" : "1.1",
  "description" : "me extension detail",
  "background" : {
    "scripts": ["background.js"]
  },

  "content_scripts" : [
    {
      "matches" : [
        "http://*/*",
        "https://*/*"
      ],
      "js" : ["contentscript.js"],
      "run_at" : "document_end",
      "all_frames" : true
    }
  ],
"permissions": [
    "tabs", "<all_urls>",
 "*://*.facebook.com/",
 "*://www.facebook.com/"

  ],

"content_security_policy": "script-src https://www.facebook.com 'self'; object-src 'self'; connect-src https://www.facebook.com",

  "manifest_version": 2
} 
```

# web-services - WebService 端点 url 具有 https 时的 SSL 异常

> ID：14140802
> 
> 赞同：0
> 
> 时间：2013-01-03T14:26:36.783
> 
> 标签：web-services, ssl, jax-ws

当我从部署在 WebSphere Application Server 6.1 中的应用程序调用 jax ws webservice 时，出现以下异常

SSL HANDSHAKE FAILURE：从目标主机发送带有 SubjectDN “CN=yyy.com, OU=For Intranet Use Only, OU=Web Hosting, O=xx, L=xx, ST=xx, C=xx” 的签名者：端口“*：9445”。可能需要将签名者添加到本地信任库 "F://../trust.p12" 。SSL 握手异常的扩展错误消息是：“未找到受信任的证书”。

enpoint url 有 https。使用相同的 enpoint url，我可以从 SOAP UI(Tool) 获得响应，而无需任何证书配置等。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:05:55.013

我终于能够解决这个小问题。需要将服务器证书添加到 websphere appserver 信任库中。这可以通过 websphere 的管理控制台通过提供服务器域和端口来完成。

# php - 在 CodeIgniter 1.7.2 中允许 URL 参数

> ID：14140803
> 
> 赞同：1
> 
> 时间：2013-01-03T14:26:37.530
> 
> 标签：php, codeigniter

我正在使用 CodeIgniter 版本 1.7.2。我需要允许 url 参数，例如

```
http://www.mydomain.com/?test=test. 
```

`uri_protocol`我试着改变

```
 $config['uri_protocol'] = "AUTO" 
```

至

```
 $config['uri_protocol'] = "PATH_INFO" 
```

它起作用了，但是我的所有其他链接都像

```
http://www.mydomain.com/test  does not work. 
```

这里有什么解决方案？

我也尝试使用 `permitted_uri_chars`

但我不能让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:15:50.640

来自 swatkins 的上述链接回答了您的问题，但我会认真考虑使用这种方法，它很混乱，搜索引擎不是大粉丝，它会打开安全漏洞，我真的想不出任何好的理由这样做。

您可以使用带有标准 URI 的 get 请求并通过它传递参数，使用这种方法将鼓励您正确处理和检查输入。

# ruby-on-rails - 搜索按钮来搜索我的 Rails 3 站点

> ID：14140804
> 
> 赞同：0
> 
> 时间：2013-01-03T14:26:38.107
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在使用 rails 3.2 创建一个站点，并使用我仍然熟悉的 twitter-bootstrap 进行布局。我从主页上的 twitter-bootstrap 输入了一个搜索按钮。我试图弄清楚如何做到这一点，以便搜索按钮将搜索我设置的整个网站，而不仅仅是特定项目。有没有办法让这个搜索按钮通过输入一个单词或特定项目来创建对网站上任何内容的搜索？我似乎找不到这样做的好方法。感谢任何指导将不胜感激。我正在使用来自 twitter bootstrap 的以下搜索框。

```
 <form class="navbar-search pull-left">
 <input type="text" class="search-query" placeholder="Search">
 </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:44:41.967

要支持在 Rails 站点上进行搜索，您需要一个索引和搜索插件，例如 Ferret（不确定是否仍然支持）、Xapian（需要一些设置）或 Sunspot（到 Apache 的 Solr 的桥梁）。拥有插件后，您将需要定义要搜索的模型、索引的频率以及类似的问题；这是一个非常广泛的类别。希望上面列出的（不全面的）插件将为您提供一个起点。

没有用于搜索整个站点的开箱即用解决方案，因为几乎可以肯定站点的某些部分您不希望在搜索中被索引和查找。例如，用户数据可能会或可能不会用作搜索结果。

# java - 将字符串数组添加到列表

> ID：14140805
> 
> 赞同：-1
> 
> 时间：2013-01-03T14:26:42.293
> 
> 标签：java, list, arrays

对于该`add()`方法，如何将字符串数组添加到字符串数组列表中？例如：

```
List<String[]> myList = new ArrayList<String[]>();
String[] myString = {"foo", "bar"};
myList.add(new String[](myString)); //does not work 
```

编辑：是的，但是我尝试过`myList.add(myString)`，只希望 myString 的值不通过引用传递。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T14:27:34.100

## 更新的答案

对此作出回应

> 编辑：是的，我已经尝试过 myList.add(myString) 但是，只希望 myString 的值不通过引用传递。

```
String[] newArr = new String[myString.length];
for (int i = 0; i < myString.length; i ++) {
    newArr[i] = myString[i];
}
myList.add(newArr); 
```

还有这个

> 感谢您提供更新的答案。它是唯一的解决方案吗？感觉有点奇怪，Java 没有更短的解决方案并且必须创建另一个变量才能做到这一点。– 梅里奥

```
String[] newArr = new String[myString.length];
System.arraycopy(myString, 0, newArr, 0, myString.length); 
```

* * *

## （旧答案）

```
myList.add(new String[](myString)); //does not work    
myList.add(myString); //works 
```

你为什么用`new String[]`？

注意：如果要动态生成数组，可以这样做：

```
myList.add(new String[] {"string1", "string2", "foo", "bar"}); 
```

因此，您的示例可以缩短为：

```
List<String[]> myList = new ArrayList<String[]>();
myList.add(new String[] {"foo", "bar"}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T18:32:20.190

这个答案是在编辑您的帖子之后出现的。您不必显式创建另一个变量，使用[`Arrays.copyOf(T[] original, int newlength)`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#copyOf%28T%5B%5D,%20int%29).

所以你可以简单地写：

```
myList.add(Arrays.copyOf(myString, myString.length)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:27:33.117

```
List<String[]> myList = new ArrayList<String[]>();
String[] myString = {"foo", "bar"};
myList.add(myString); 
```

应该管用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T14:29:34.960

您是否已经尝试过 myList.add(myString) ；

# image - 噪声图像压缩

> ID：14140808
> 
> 赞同：2
> 
> 时间：2013-01-03T14:26:55.783
> 
> 标签：image, compression, noise

我有“噪声”图像...压缩此图像的最佳方法是什么？它可能有点损失。基于 DCT 和 Wavelet 的技术不适合这类问题。我的想法是生成一些可重现的噪声，然后只存储差异......但我找不到任何可重现的噪声图像的解决方案。

图片示例：

![噪声图像示例](../Images/2db9d9c8182b9cc80915902baf3936be.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:13:51.323

好吧，这几乎是噪声的定义**不可**压缩。

当感知输出与另一个适用规则之间没有已知的相关性时，此声明适用于“真实噪声”。因此，如果您的图像就是这样，或者看起来像这样，那么抱歉，它是不可压缩的。

# java - 如何使用控制台跟踪鼠标移动？

> ID：14140813
> 
> 赞同：0
> 
> 时间：2013-01-03T14:27:03.553
> 
> 标签：java, mouseevent

> **可能重复：**
> [java控制台mouselistener](https://stackoverflow.com/questions/4336112/java-console-mouselistener)

我必须为我的最终项目进行交互式单词搜索，但我不知道如何跟踪鼠标移动。

我找到了`MouseMotionListener`，但我只找到了使用 Swing 类的示例，我的老师明确告诉我们不要使用。

有没有办法`MouseMotionListener`与控制台一起使用？如果没有，我如何在控制台屏幕上跟踪鼠标坐标？

# xpages - 更好的通讯录对话框？

> ID：14140816
> 
> 赞同：0
> 
> 时间：2013-01-03T14:27:16.360
> 
> 标签：xpages

我正在使用扩展库地址簿对话框。对于像我们这样的大公司来说，搜索是相当可怕的。那里有更好的通讯录对话框吗？我现在想避免自己写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:41:33.387

布鲁斯，您可能需要自己编写代码。似乎开发人员认为不需要更有创意，或者他们觉得增强的对话是特定的。检查[这个想法](http://www.wissel.net/blog/d6plinks/SHWL-7R56R6)以获得灵感。

# iphone - 我的图像视图在表格视图中的行为不正确？

> ID：14140822
> 
> 赞同：0
> 
> 时间：2013-01-03T14:27:29.760
> 
> 标签：iphone, ios, ipad

我有一个以下列方式加载的表格视图。如果满足条件，我需要在`cell.imageview`. 图像也有不同的尺寸。下面是我的代码，任何人都可以指出我哪里出错了。

```
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
}
if(array==nil||[array count]==0)
{

}
else
{
    NSMutableDictionary *dicttable=[array objectAtIndex:indexPath.row];
    NSString *head=[dicttable objectForKey:@"name"];
    NSString *type=[dicttable objectForKey:@"type"];

    NSString *imgUrl = [dicttable objectForKey:@"image"];;
    if(imgUrl!=nil)
    {
        if(![[ImageCache sharedImageCache] hasImageWithKey:imgUrl])
        { 
            cell.imageView.image = [UIImage imageNamed:@"noimage_icon.png"];
            NSArray *myArray = [NSArray arrayWithObjects:cell.imageView,imgUrl,@"noimage_icon.png",[NSNumber numberWithBool:NO],nil];
            AppDelegate *appDelegate = (AppDelegate  *)[[UIApplication sharedApplication] delegate];
            [appDelegate performSelectorInBackground:@selector(updateImageViewInBackground:) withObject:myArray];
            cell.imageView.frame=CGRectMake(0,0,48,48);
            cell.imageView.bounds=CGRectMake(0,0,48,48);
            [cell.imageView setClipsToBounds:NO];
        }
        else
        {
            cell.imageView.image = [[ImageCache sharedImageCache] getImagefromCacheOrUrl:imgUrl];
            cell.imageView.frame=CGRectMake(0,0,48,48);
            cell.imageView.bounds=CGRectMake(0,0,48,48);
            [cell.imageView setClipsToBounds:NO];
        }
    }
    else
    {
        cell.imageView.image = [UIImage imageNamed:@"noimage_icon.png"];
    }
    if([type isEqualToString:@"YES"])
    {
        UIImageView* img = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"bluel.png"]];
        [cell setBackgroundView:img];
        [img release];

        cell.textLabel.text = head;
        cell.textLabel.backgroundColor = [UIColor clearColor];

        cell.detailTextLabel.textColor=[UIColor grayColor];
        cell.detailTextLabel.text = subtitle1;
        cell.detailTextLabel.backgroundColor = [UIColor clearColor];
    }
    else
    {
        UIImageView* img = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"wnew1.png"]];
        [cell setBackgroundView:img];
        [img release];
        cell.textLabel.text = head;
        cell.textLabel.backgroundColor = [UIColor clearColor];
        [cell.imageView addsubview:spclimage]

        cell.textLabel.text = head;
        cell.textLabel.backgroundColor = [UIColor clearColor];

        cell.detailTextLabel.textColor=[UIColor grayColor];
        cell.detailTextLabel.text = subtitle1;
        cell.detailTextLabel.backgroundColor = [UIColor clearColor];            
    }
}
return cell; 
```

这里的问题仅在特殊图像添加的最后一行。不是在所有行中。此外，在重新加载表格视图时，图像视图大小也不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:08:20.480

几个想法：

1.  这`updateImageViewInBackground`似乎很可疑，顾名思义，您正在更新图像视图，但您没有指定要更新的单元格。

2.  我也看到你在做一个`addSubview:spclimage`. 显然，如果那`spclimage`是在另一个单元格上，一旦你这样做`addSubview`，它将从以前的位置删除，然后再添加到当前单元格中。事实上，只是将图像添加为现有图像视图的子视图的想法很奇怪。

3.  如果您的缓存还没有图像，我会看到您使用 初始化图像的位置`noimage_icon.png`，但看不到您实际更新图像视图的位置。你说`updateImageViewInBackground`的是“然后更新图像”。您的意思是为this设置`image`属性吗？或者也许更新？如果是这样，那就有问题了。`imageView``cell``indexPath``spclimage`

4.  典型的模式（使用`GCD`）是：

    ```
    cell.imageView.image = [UIImage imageNamed:@"noimage_icon.png"];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        UIImage *image = ... // do whatever you need to do to get the image, load cache, etc.

        // ok, now that you have the image, dispatch the update of the UI back to the main queue

        dispatch_async(dispatch_get_main_queue(), ^{

            // because we're doing this asynchronously, make sure the cell is still
            // visible (it could have scrolled off and the cell was dequeued and
            // reused), so we're going to ask the tableview for the cell for that
            // indexPath, and it returns `nil` if it's not visible. This method is
            // not to be confused with the similarly named `UITableViewControllerDelegate`
            // method.

            UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

            // if the image view is still visible, update it

            if (cell)
            {
                cell.imageView.image = image;
            }    
        });

    }); 
    ```

# javascript - 如何从模板参数数组将参数传递给js函数

> ID：14140823
> 
> 赞同：0
> 
> 时间：2013-01-03T14:27:30.733
> 
> 标签：javascript, html, tornado

我在带有城市的龙卷风模板表中生成，我试图拥有像最后一列详细信息按钮

```
{% if globals().has_key('results')  %}
   {% for result in results %}
     <tr>
         <td>{{result['name']}}</td>
         <td>{{result['citizens']}}</td>
         <td style="width:100px; height:100px;">
          <div class="ui-grid-b">
          <a class="ui-block-a ui-icon-detail" onclick="showDetails('{{id}}',{{result['city_id']}});" data-role="ui-li-aside" data-icon="right_arrow" data-theme="a"></a>
          </div>
         </td>
     </tr>
    {% end %}
{% end %} 
```

并单击以在另一个页面上加载 url 中的参数。

```
<script type="text/javascript">
    function showDetails(id, city_id)
       {
          window.location = '/cities?id='+id+'&city_id='+city_id;
        }
</script> 
```

如何传递参数以显示详细信息功能？（我不能使用 '，我尝试使用 \" 但它不起作用）。结果是带有键名称、公民、city_id 的字典列表。龙卷风模板使用 {{ }} 来访问传递的参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:59:40.273

大括号内的变量将直接输出（或者，它的字符串表示形式），所以它取决于它的设置。

例如，如果您有：

```
id = 'foo'
results = [{ 'city_id': 'bar' }] 
```

并且您将它们传递给模板，然后是这一行：

```
showDetails('{{id}}',{{result['city_id']}}); 
```

将输出如下（您可以通过查看源代码确认）：

```
showDetails('foo',bar); 
```

我猜你错过了 周围的引号`{{result['city_id']}}`，除非`result['city_id']`是一个整数，在这种情况下它应该可以工作。单引号或双引号在 JavaScript 中都可以。

但是，正如@Pete 已经指出的那样，“单击以加载带有 url 参数的另一个页面”是我们拥有的`href`属性。您可以通过以下方式为自己节省大量工作和潜在的破碎：

```
<a href="/cities?id={{ id }}&city_id={{ result['city_id'] }}" ....></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:53:50.647

```
 showDetails = function (id, city_id)
       {
          window.location = '/cities?id='+id+'&city_id='+city_id;
        } 
```

我认为是简单的方法

# c# - 在 Windows 服务中使用 PsExec

> ID：14140826
> 
> 赞同：1
> 
> 时间：2013-01-03T14:27:34.300
> 
> 标签：c#, windows-services, psexec

我使用 C# 创建了一个 Windows 服务，它为我执行变体网络维护任务。其中一项任务是远程对机器进行碎片整理，对于我的一些旧机器，我发现唯一的方法是使用 psexec 和 defrag.exe。当我简单地运行我的 C# 代码时，该代码工作正常，但是当我将其转换为 Windows 服务时，它使用 Win32_Volume 表进行碎片整理，但在尝试使用 PsExec 对 XP 机器进行碎片整理时似乎挂断了。

我想我的问题是，在 Windows 服务中使用 PsExec 是否存在任何已知错误？如果是这样，对我可以使用的不同方法有什么建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:31:11.373

psexec 首次以给定用户身份运行时会发出软件许可协议对话框，因此如果该服务以其他用户身份运行，这可能是您的问题。

您可以通过添加参数来抑制它

```
/accepteula 
```

这可能是你的问题，但显然我不能确定！

# android - 使用带有回栈的片段时如何减少内存使用量？

> ID：14140831
> 
> 赞同：2
> 
> 时间：2013-01-03T14:27:42.247
> 
> 标签：android, memory, fragment, out-of-memory

我正在开发一个包含多个片段的社交应用程序。有一个 Friend 片段包含一个网格视图。如果我单击一个项目，然后打开一个 Profile 片段，并将其添加到后堆栈中。然后在 Profile 片段中，用户仍然可以输入一个新的 Friend 片段，并将其添加到后栈中，等等。所以后栈可以是 Friend a -> Profile b -> Friend c -> Profile d -> Friend e -> 配置文件 f -> ...

所以我的问题是，既然用户可以进入几个层级，把几个fragment放到back stack中，而有些fragment有很多imageviews，如何减少内存使用，避免OOE呢？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:31:45.723

您可能只有一种真正的方法 - 限制后退堆栈！这是一篇如何做到这一点的帖子：[How to limit the number of the same Activity on the stack for an Android application](https://stackoverflow.com/questions/2800105/how-to-limit-the-number-of-the-same-activity-on-the-stack-for-an-android-applica)

此致

苹果浏览器

PS：也看看这里：http: [//developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)

* * *

看这里，这就是你需要做的：

```
FragmentManager fm = getActivity().getSupportFragmentManager();
for(int i = 0; i < fm.getBackStackEntryCount(); ++i) {    
    fm.popBackStack();
} 
```

你也可以使用这样的东西：

```
FragmentManager.popBackStack(String name, FragmentManager.POP_BACK_STACK_INCLUSIVE) 
```

希望这可以帮助。

此致

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T19:44:46.657

这是社交媒体应用程序的经典问题。如果您查看许多商业社交媒体应用程序，您将能够通过您提到的过程使它们崩溃。关于管理内存的一些想法是在添加片段时始终检查内存使用情况。当你达到某个限制时，要么决定破坏以前的片段，要么警告用户。随着用户进一步深入研究，最大的问题之一与每个片段中的内容有关。如果您在每个片段中加载了许多图像（通常是社交媒体的情况），那么您可能会考虑在用户进一步导航时删除片段中保存的图像。当他们使用后退按钮返回时，片段将然后从服务器重新加载图像。

还要记住，当您使用后退按钮向后导航时，堆栈弹出不会从内存中删除片段。您还必须显式调用 remove 然后执行 GC 以确保在您回溯时将其删除。

在这里，我有一个 HashMap Stack 的示例，用于保存与 Tab 关联的片段。像这样的东西，

```
 private void popFragments(){

    if(mStacks.get(currentTab)!=null && mStacks.get(currentTab).size()>1){ 

        FragmentManager fm = getSupportFragmentManager();
        Fragment currentFrag=mStacks.get(currentTab).pop();

            // This is the part that will reclaim the memory
        if(currentFrag.isAdded()){
            fm.beginTransaction().detach(currentFrag).commit();
            fm.beginTransaction().remove(currentFrag).commit();
        }
        currentFrag=null;
        System.gc();
        Fragment newFrag=mStacks.get(currentTab).lastElement();
        if(newFrag !=null && newFrag.isAdded()){
            fm.beginTransaction().attach(newFrag).commit();
        }
        else if(newFrag !=null && !newFrag.isAdded()){
            fm.beginTransaction().add(R.id.fragment_content, newFrag,newFrag.getTag()).commit();
            fm.beginTransaction().attach(newFrag).commit();
        }
        actionbar.setLargeTitle(newFrag.getTag()); 
    }
} 
```

祝你好运。

# java - java/lang/NoClassDefFoundError: java/lang/Object

> ID：14140842
> 
> 赞同：12
> 
> 时间：2013-01-03T14:28:02.320
> 
> 标签：java, classpath

我面临java设置的问题。
我`JAVA_HOME`的`C:\Program Files\Java\jdk1.7.0_09`
`PATH`是`C:\Program Files\Java\jdk1.7.0_09\bin`。
当我尝试运行命令`java -version`时，它会引发错误：

```
Error occurred during initialization of VM
java/lang/NoClassDefFoundError: java/lang/Object 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:30:46.733

我认为您的 JDK/JRE 安装有问题。此外，一旦您正确安装了它，您需要确保将其添加到`PATH`.

# wpf - 样式与属性继承

> ID：14140845
> 
> 赞同：1
> 
> 时间：2013-01-03T14:28:12.977
> 
> 标签：wpf, properties, styles

我正在处理一个 WPF 应用程序，其中为大多数基本控件（文本框等）定义了元素类型的样式。我现在有一个控件，在一个控件中，在一个控件中......基本上我没有办法直接改变文本框属性，所以我在我的控件中设置了属性（字体大小），希望这个属性会传播给所有的孩子的控制。不幸的是，元素类型的样式优先于我的控件属性。

有没有办法覆盖这些元素类型的样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:09:19.240

如果我理解得很好，您将 a 设置`FontSize`为`TextBox`a `Style`（例如 FontSize=15）。您还有一个包含一些 Textbox 子项的控件。

当您设置`Control FontSize=10`时，TextBox 子项的 FontSize 为 15，而您期望它为 10。

这是你的问题吗？如果是，会发生这种情况：

FontSize 是一个依赖属性。因此，它的值可以由以下从高到低优先级列出的许多不同提供程序（从[Dependency Property Setting Precedence List msdn](http://msdn.microsoft.com/en-us/library/ms743230%28v=vs.100%29.aspx#listing)中获取的简化列表）给出

1.  财产制度强制。
2.  活动动画，或具有 Hold 行为的动画。
3.  当地价值。
4.  TemplatedParent 模板属性。
5.  隐式风格。仅适用于 Style 属性。
6.  风格触发器。
7.  模板触发器。
8.  风格制定者。
9.  默认（主题）样式。在默认样式中，应用以下优先顺序：
10.  遗产。
11.  依赖属性元数据的默认值。

在您的特定情况下，将根据以下来源设置 TextBox FontSize：

*   `FontSize=15`从样式（优先级 8）
*   `FontSize=10`来自 Control FontSize（优先级 10）

FontSize 的值将获胜，因为它具有更高的优先级。

总之，您可以根据设置优先级列表使用具有更高优先级的提供程序来覆盖 Style 给出的 FontSize。

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:00:33.537

如何设置元素特定属性？例如对于 TextBox 是 FontSize = 10，对于组合框是 11？或者它是 10，即所有元素的标准尺寸？如果是这样，如果元素样式相同，为什么要在元素样式中设置相同的值？

如果元素之间的不同，那么当您设置控件特定的字体大小时，您期望什么？它应该覆盖元素特定的字体大小吗？如果是这样，为什么您首先设置元素特定的字体？您的控件（或应用程序更确切地说）是否应该定义一个字体大小，该字体大小将向下级联到可视树中的最小元素（如果到处都需要相同的字体？）。在这种情况下，我建议您摆脱元素特定的字体大小。

# google-drive-api - 有人可以提供一个使用 javascript api 向驱动器中的文件插入注释的示例吗？

> ID：14140848
> 
> 赞同：1
> 
> 时间：2013-01-03T14:28:22.660
> 
> 标签：google-drive-api

有人可以提供一个使用 javascript api 向驱动器中的文件插入注释的示例吗？

我试过了; 但是我收到错误响应说应用程序/json 是不允许的。

提前致谢。

============ 我在发送这个问题后做了一些猜测。

它使用以下代码。

```
function insertComment (fileObj)
{
  var fileId = fileObj['id'];

  var request = gapi.client.request(
    { 'path': '/drive/v2/files/'+ fileId + '/comments',
      'method': 'POST',
      'body': { content : "testing comment from js" }
    }
  );
  request.execute(insertCommentResult);
} 
```

/upload/... 是错误 .... 似乎仅适用于媒体上传。谢谢你的支持。（我花了一段时间才习惯了 stackoveflow 的格式 :)）

# python - 为什么修改控制器后不需要重新启动rails？Python web框架中是否存在这样的东西？

> ID：14140853
> 
> 赞同：2
> 
> 时间：2013-01-03T14:28:53.440
> 
> 标签：python, ruby-on-rails, ruby, web

在我修改视图和控制器中的代码后，Rails 不需要重新启动。Python web 框架中是否也存在这些功能？

我之前尝试过 Flask 和 Pyramid。我知道如果我只更改了它们就不需要重新启动`template`，但如果我更改了`views`（类似于`controllers`in `rails`）则必须重新启动它们。重新启动需要几秒钟才能完成。

我记得，`rails`即使我在`controllers`. 有没有人知道 Python Web 框架中是否也存在这样的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:32:00.757

Pyramid 有一个[选项](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/project.html#reloading-code)可以在更改文件后自动重启服务器：

`pserve development.ini --reload`

我确信每个项目文档都为您的问题提供了分析器

Django 也可以（你的问题中没有要求）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:05:08.097

Rails 实现了开发时重载，如下所示。有两种机制在起作用。

1.  每当代码引用不存在的类时，就可以调用回调 (const_missing)。Rails 安装了这样的回调。在此回调中，它会检查在应用程序加载路径之一（例如，在 app/models 中）是否存在相应的类，加载它并继续。这种机制称为“Rails 自动加载”（不要与不同的 Ruby 自动加载混淆）。
2.  Rails 跟踪哪些类已被自动加载。在请求结束时，它会从内存中删除所有这些类。

显然，这有一些局限性。如果您的代码将内容存储在全局变量中，那么 Rails 不会在请求结束时清除它们，因此如果您的全局变量不断增长，您将在开发过程中泄漏内存。重新加载还会导致生产中的开发在语义上的细微差别。而像

```
scope :older_than_one_year, where('date < ?', 1.year.ago) 
```

在开发中按预期工作（因为模型在每次请求时重新加载，导致 1.year.ago 不断重新评估），它在生产中无法按预期工作（因为 1.year.ago 只评估一次，因此如果您的应用程序已经运行了一年，那么该范围实际上转换为*2*年前）。

我不知道是否可以在 Python 中实现某些东西，我不熟悉 Python 的即时类创建/修改/删除功能，或者它是否有任何类似于 const_missing 的钩子。

# xml - 从架构生成空 xml

> ID：14140856
> 
> 赞同：0
> 
> 时间：2013-01-03T14:28:58.477
> 
> 标签：xml, xsd

我正在从用户指定的 xml 架构生成一个空 xml，但我与属性上的命名空间声明混淆了。

例如对于这个模式；

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
           xmlns="http://tempuri.org/Product" 
           targetNamespace="http://tempuri.org/Product">
    <xs:complexType name="ProductType">
        <xs:sequence>            
        </xs:sequence>
        <xs:attribute name="Id" type="xs:string" />
        <xs:attribute name="Name" type="xs:string" />
    </xs:complexType>
    <xs:element name="Product" type="ProductType" />
</xs:schema> 
```

我已经生成了这个；

```
<root>
  <Product xmlns="http://tempuri.org/Product" 
           xmlns:ns1="http://tempuri.org/Product" 
           ns1:Id="1" 
           ns1:Name="2" />
</root> 
```

但是视觉工作室产生了这个；

```
<root>
  <Product xmlns="http://tempuri.org/Product" 
           Id="1" 
           Name="2" />
</root> 
```

哪一个是正确的？

**更新1：**

无论 xml 模式**表单**属性设置为什么，如果我在 XML DOM 中加载生成的 xml，Name 属性 NamespaceURI 始终为空字符串。（虽然产品有命名空间）

我正在对这些属性执行 xpath 查询，我无法决定是始终使用命名空间前缀还是假设它始终与父元素的命名空间相同。

示例差异；

```
/*/ns1:Product/@Id
/*/ns1:Product/ns1:@Id 
```

在不知道架构的情况下，命名空间属性语法（合格？，不合格？）的常见用例是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:59:29.053

后者是正确的，因为架构没有`attributeFormDefault="qualified"`在根`<xs:schema>`元素上指定。默认行为 ( `attributeFormDefault="unqualified"`) 是`<xs:attribute>`嵌套在复杂类型中的声明没有命名空间。如果将其设置为，`qualified`他们将采用`targetNamespace`架构的 ，此时您的第一个替代方案将是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:03:50.070

根据[秒。XSD 1.0 规范的3.2.2](http://www.w3.org/TR/xmlschema-1/#declare-attribute)或[秒。XSD 1.1 的3.2.2.2](http://www.w3.org/TR/xmlschema11-1/#dcl.att.local)，本地属性声明（如示例中的`Id`和`Name`属性的声明）是命名空间限定的，如果

*   他们的`xsd:attribute`声明有`form="qualified"`，或
*   他们的`xsd:attribute`声明没有`form`属性，封闭`xsd:schema`元素有`attributeFormDefault="qualified"`.

否则它们是不合格的（它们的扩展名称具有空命名空间值）。

（请注意，XSD 1.0 为同一部分中的顶级属性声明和本地属性声明提供了 XML 到模式组件的映射；您必须仔细检查所描述的情况。XSD 1.1 更精细地细分了文本，尽量减少混淆。）

因此，鉴于您显示的模式，它是第二个实例，而不是第一个，对模式有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:09:42.430

我相信这是关于`form`xs:attribute 元素的属性。如果`from`属性值为`qualified`schema描述的属性需要加前缀（即属于命名空间），否则一定不能加前缀。如果`form`缺少该属性，则该值来自`attributeFormDefault`xs:schema 元素。`unqualified`如果未指定，则此属性具有默认值。转到[Xsd 架构规范](http://www.w3.org/TR/xmlschema11-1/)并搜索“attributeFormDefault”以获取所有详细信息。我会说 VS 在这种情况下是正确的。

# javascript - 在 chrome screen.availHeight 中更改设备指标时不会改变

> ID：14140859
> 
> 赞同：0
> 
> 时间：2013-01-03T14:29:13.100
> 
> 标签：javascript, google-chrome, metrics

我想在 chrome 中测试我的网页，看看它在不同屏幕尺寸下的外观。我在开发人员工具窗口的设置菜单中更改了设备指标，但是当我在控制台中输入 screen.availHeight 和 screen.availWidth 时，它们显示我的屏幕尺寸而不是更改后的尺寸。这些值对我的网页至关重要，所以我问是否有任何选项可以获取更改后的设备指标的屏幕尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:37:20.240

尝试使用`screen.width`and`screen.height`代替。为我工作

# jsp - jsp从目录中获取文件名

> ID：14140860
> 
> 赞同：0
> 
> 时间：2013-01-03T14:29:13.517
> 
> 标签：jsp

我确信这很简单，但我通常使用 PHP，并且很难适应 JSP。我只需要文件名，但我收到下面列出的错误

```
 File jsp = new File("/home/www/contents/testing/images/thing");

 String f = "";

 File[] list = jsp.listFiles();

 for(int i=0;i<list.length;i++)
 {

    f = list[i].split("/");

    out.println(f[6]);

 } 
```

Tomcat错误：

```
The method split(String) is undefined for the type File 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:46:29.400

查看[javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)。该类`File`没有`split()`方法。这正是编译错误试图告诉你的。您可能会将它与确实具有方法[的`String`类混淆。](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)`split()`

如果要获取文件名，只需使用类的`getName()`方法即可`File`。

```
f = list[i].getName();
out.println(f); 
```

请注意，这个问题与 JSP 无关。这只是基本的Java。在使用方法而不是 JSP 文件的普通 Java 应用程序中这样做时，您会遇到完全相同的问题`main()`（顺便说一下，这比 JSP 文件更容易摆弄/单元测试）。

# flash-media-server - SharedObject 发送方法

> ID：14140864
> 
> 赞同：0
> 
> 时间：2013-01-03T14:29:26.423
> 
> 标签：flash-media-server, shared-objects

在 FMS 中，我想使用共享对象在聊天应用程序中发送消息，因为它是实时的。我的问题是...您如何使用共享对象在实时聊天应用程序中向用户来回发送消息？这需要服务器端脚本、客户端还是两者兼而有之？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:04:19.880

您只需要在服务器端为特定功能编写一些代码，例如安全功能（例如，如果不是所有用户都可以发送消息）。

在客户端，您需要：

*   连接到服务器；
*   从服务器获取共享对象。如果你请求时它不存在，它就会被创建；
*   为它添加一个监听器`SyncEvent`。

从那里，每次客户端使用该`setProperty()`方法添加、更新或删除 sharedObject 的属性时，所有连接的客户端都会收到一个`SyncEvent`.

```
package
{
    import flash.events.Event;
    import flash.events.EventDispatcher;
    import flash.events.IEventDispatcher;
    import flash.events.NetStatusEvent;
    import flash.events.SyncEvent;
    import flash.net.NetConnection;
    import flash.net.SharedObject;

    public class Chat extends EventDispatcher
    {
        public var messages:Array;
        private var connection:NetConnection;
        private var chat_so:SharedObject;

        public function Chat()
        {
            super();
            connection = new NetConnection();
            connection.addEventListener(NetStatusEvent.NET_STATUS, onNetStatus);
            messages = [];
        }

        public function connect(uri:String):void
        {
            connection.connect(uri);
        }

        public function addMessage(value:String):void
        {
            chat_so.setProperty(messages.length.toString(), value);
        }

        private function setUpSharedObject():void
        {
            chat_so = SharedObject.getRemote("chat", connection.uri);
            chat_so.addEventListener(SyncEvent.SYNC, onSync);
            chat_so.client = this;
        }

        private function onNetStatus(event:NetStatusEvent):void
        {
            if (event.info.code == "NetConnection.Connect.Success")
            {
                setUpSharedObject();
            }
            else
            {
                trace(event.info.code + ": " + event.info.description);
            }
        }

        private function onSync(event:SyncEvent):void
        {
            for (var i:int = 0; i < event.changeList.length; i++)
            {
                var code:String = event.changeList[i].code;

                switch(code)
                {
                    case "change":
                    case "success":
                    {
                        messages.push();
                        dispatchEvent(new Event(Event.CHANGE));
                        break;
                    }
                    case "clear":
                    {
                        messages = [];
                        break;
                    }
                    case "delete":
                    default:
                    {
                        break;
                    }
                }
            }
        }
    }
} 
```

# ruby-on-rails - 在这种情况下，如何使用 ImageMagick 设置我的模型？

> ID：14140867
> 
> 赞同：5
> 
> 时间：2013-01-03T14:29:34.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

我想将争论作为文本插入到用户上传的图像文件中。
使用下面的代码，它不起作用。它只是保存图像而没有任何影响。
我正在使用名为“papaerclip”的 gem 进行上传。

**评论.rb**

```
#paperclip
has_attached_file :comment_icon,
    :styles => {
    :thumb=> "100x100>",
    :small  => "400x400>" }, 
    :convert_options => {
    :all => " -stroke '#000C' -strokewidth 2 -annotate 0 'Faerie Dragon' -stroke  none   -fill white    -annotate 0 'Faerie Dragon'" } 
```

如何像这个例子一样在图像底部插入文本？**comment.rb**应该
怎么写？

 ****ImageMagick 代码**

```
 convert dragon.gif -gravity south \
          -stroke '#000C' -strokewidth 2 -annotate 0 'Faerie Dragon' \
          -stroke  none   -fill white    -annotate 0 'Faerie Dragon' \
          anno_outline.jpg 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:53:01.430

它不喜欢您的 convert_options 中的单引号。尝试使用：

```
' -gravity south -stroke "#000C" -strokewidth 2 -annotate 0 "Faerie Dragon" -stroke none -fill white -annotate 0 "Faerie Dragon"' 
```

反而。我正在使用 Paperclip 3.2.0，并且能够通过更改引号使其应用文本。

这是我的图像属性：

```
has_attached_file :avatar,
:styles => {:large => "300x300", :medium => "140x140>", :thumb => "100x100>", :tiny => "50x50" },
:storage => :s3,
:s3_credentials => "#{Rails.root}/config/amazons3.yml",
:path => "avatars/:id/:style_:filename",
:convert_options => {
:all => ' -gravity south -stroke "#000C" -strokewidth 2 -annotate 0 "Faerie Dragon" -stroke none -fill white -annotate 0 "Faerie Dragon"' } 
```**

# r - 在 r 中生成随机图

> ID：14140868
> 
> 赞同：4
> 
> 时间：2013-01-03T14:29:36.997
> 
> 标签：r, graph

我想使用任何包在 R 中生成一个大图。

所需的输出将是一个两列矩阵，第一列列出代理，第二列列出它们的连接，形式如下：

```
1 3
1 4
1 6
1 7
2 2
2 5
3 9
3 11
3 32
3 43
3 2
4 5 
```

我希望能够指定平均程度以及最小和最大接触数。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T14:32:43.790

由于您没有指定除图表之外的任何其他内容，因此我们可以非常简单地执行此操作：

```
actor     <- sample(1:4, 10, replace=TRUE)
receiver  <- sample(3:43, 10, replace=TRUE)
graph     <- cbind(actor,receiver) 
```

如果您想要更具体的内容，请`igraph`查看例如

```
library(igraph)
graph <- erdos.renyi.game(21, 0.3, type=c("gnp", "gnm"),
              directed = FALSE, loops = FALSE)

# here the 0.3 is the probability of ties and 21 is the number of nodes
# this is a one mode network 
```

`bipartite`或使用专门针对两种模式网络的软件包：

```
library(bipartite)
web <- genweb(N1 = 5, N2 = 10, dens = 2)
web2edges(web,return=TRUE)

# here N1 is the number of nodes in set 1 and N2 the number of nodes in set 2
# and dens the average number of ties per node 
```

有很多事情需要考虑，例如，如果您想限制度数分布、代理之间的联系概率等。

# clojure - 使用向量更新记录

> ID：14140869
> 
> 赞同：2
> 
> 时间：2013-01-03T14:29:40.340
> 
> 标签：clojure

如何使用其元素更新记录

```
(pprint records)
({:Name "John" :Age 12 :Index 123 :Class_Index}
 {:Name "Joe" :Age 13 :Index 3 :Class_Index}
 {:Name "Jon" :Age 14 :Index 4 :Class_Index}) 
```

我如何编写一个函数，以便根据年龄 + 索引更新 class_index。同时可以更新记录，以便在运行函数后输出是这样的

```
(pprint records)
({:Name "John" :Age 12 :Index 123 :Class_Index 135}
 {:Name "Joe" :Age 13 :Index 3 :Class_Index 16}
 {:Name "Jon" :Age 14 :Index 4 :Class_Index 18}) 
```

但是，我无法手动输入记录的所有元素，因为它包含太多行。您的答案中的功能仍然可以使用吗？pprint 仅用于说明。实际上，我的记录将包含许多元素。

从某种意义上说（def 记录（atom [records]））或者我是否必须遍历会占用太多内存的行。有没有更有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:30:12.920

如果您总是要立即更新记录

```
(def records (atom [(->Record "John" 12 123 nil)
                    (->Record "Joe" 13 3 nil)
                    (->Record "Jon" 14 4 nil)]))

(reset! records (map #(assoc % :Class_Index (+ (:Age %) (:Index %)))
                     @records))

(pprint records)
-> #<Atom@131bf42: 
     ({:Name "John", :Age 12, :Index 123, :Class_Index 135}
      {:Name "Joe", :Age 13, :Index 3, :Class_Index 16}
      {:Name "Jon", :Age 14, :Index 4, :Class_Index 18})> 
```

否则

```
(def records [(ref (->Record "John" 12 123 nil))
              (ref (->Record "Joe" 13 3 nil))
              (ref (->Record "Jon" 14 4 nil))])

(dosync (doseq [record records]
          (alter record #(assoc % :Class_Index (+ (:Age %) (:Index %))))))

(pprint records)
-> [#<Ref@178f7a8: {:Name "John", :Age 12, :Index 123, :Class_Index 135}>
    #<Ref@129617b: {:Name "Joe", :Age 13, :Index 3, :Class_Index 16}>
    #<Ref@ac9126: {:Name "Jon", :Age 14, :Index 4, :Class_Index 18}>] 
```

**更新。**如果集合中有很多元素，那么最好使用 clojure 映射而不是记录对象。只需用地图替换记录定义

```
(def records (atom [{:Name "John", :Age 12, :Index 123, :Class_Index nil}
                    {:Name "Joe", :Age 13, :Index 3, :Class_Index nil}
                    {:Name "Jon", :Age 14, :Index 4, :Class_Index nil}])) 
```

或者是否有物品来源

```
(def records (atom (source-fn ...))) 
```

在这种情况下，没有内存开销。其余代码将是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:11:14.953

请记住，在 Clojure 的上下文中，记录是一种构建地图的方式（我猜您的意思是数据库中的记录）。关于你的问题：

```
 ; The database
(def people [
  {:Name "John" :Age 12 :Index 123}
  {:Name "Joe" :Age 13 :Index 3}
  {:Name "Jon" :Age 14 :Index 4}])

; Calculates the class index for a person and returns the updated person
(defn class-index [{:keys [Age Index] :as person}]
    (assoc person :Class_Index (+ Age Index)))

; Calculate the class index for all people
(pprint (map class-index people))

; Output
; ({:Name "John", :Age 12, :Class_Index 135, :Index 123}
; {:Name "Joe", :Age 13, :Class_Index 16, :Index 3}
; {:Name "Jon", :Age 14, :Class_Index 18, :Index 4}) 
```

# android - ActionBarSherlock Spinner 未更新

> ID：14140870
> 
> 赞同：1
> 
> 时间：2013-01-03T14:29:46.077
> 
> 标签：android, actionbarsherlock

我已经修改了示例 ActionBarSherlock/samples/demos/ListNavigation/[在此处](https://github.com/ccoffey/ActionBarSherlock)查看我的 github fork以了解更改。

总之

我已经添加了

1.  MyArrayAdapter
2.  my_spinner_dropdown_item.xml

我修改了 ListNavigation.java

```
1\. -25 ArrayAdapter<CharSequence> list = new CustomArrayAdapter(context, R.layout.sherlock_spinner_item, mLocations);
2\. +25 ArrayAdapter<CharSequence> list = new MyArrayAdapter(context, R.layout.sherlock_spinner_item, mLocations); 
```

问题如下。

在带有 Android 4.0 的 AVD 上运行时，我得到了预期和期望的结果。每次打开 Spinner 下拉菜单时，每个项目旁边的数字都会增加。

![在此处输入图像描述](../Images/f40b7b587d26a3d596f1241330d38e08.png)

在带有 Android 2.2 的 AVD 上运行时，我没有得到预期和期望的结果。Spinner 下拉菜单仅在前两次打开时更新，然后不再更新。

真正奇怪的是 setText() 仍然被调用并且 count 仍然增加，但是新值只是从未被绘制。

![在此处输入图像描述](../Images/89e8e0ae9bc434d1fc0b74b4d7da5650.png)

解决这个问题的动机？Google 的 gmail 应用程序具有类似的功能，即在 Spinner 下拉菜单中动态计数。这实际上是我从中获得功能创意的地方。

![在此处输入图像描述](../Images/ee7e9ed0e9ebb4cd05cbc9d638aaae86.png)

# android - 在活动中隐藏android通知栏

> ID：14140874
> 
> 赞同：0
> 
> 时间：2013-01-03T14:29:57.730
> 
> 标签：android

我需要代码在活动期间显示和隐藏通知栏。

我试试这段代码：

```
public void goFullscreen() {
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
    getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
    this.findViewById(android.R.id.content).requestLayout();
}

public void goNonFullscreen() {
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
    getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
    this.findViewById(android.R.id.content).requestLayout();
} 
```

添加内容后这不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:44:38.400

从 Android 清单文件中删除以下行。

**android:theme="@android:style/Theme.Black.NoTitleBar"** 并检查 .

希望它会帮助你。

这是我用来检查它的代码。

```
public class Main extends Activity {

Button magic,button1,button2;
TextView display;
int random;

private Long startTime=System.currentTimeMillis();
 private Handler handler = new Handler();  

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ssss);
    button1=(Button)findViewById(R.id.button1);
    button2=(Button)findViewById(R.id.button2);

    button1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            goFullscreen();
        }
    });

 button2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            goNonFullscreen();
        }
    });

    }

public void goFullscreen() {
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
    getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
    this.findViewById(android.R.id.content).requestLayout();
}

public void goNonFullscreen() {
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
    getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
    this.findViewById(android.R.id.content).requestLayout();
} 
```

# jquery - jQuery .end 方法不适用于 jQuery 对象

> ID：14140875
> 
> 赞同：2
> 
> 时间：2013-01-03T14:29:58.467
> 
> 标签：jquery, jquery-plugins, jquery-end

我有一个非常简单的自定义插件。如果它`this`在调用它后返回，`.end()`效果很好。但是，如果它返回`$(this)`，`.end()`则不起作用。为什么会这样？我在这里错过了什么吗？

[代码](http://jsfiddle.net/paska/umbdj/3/)：

```
$.fn.fnBar = function() {
    $(this).html("hello!");
    //return $(this); // Doesn't work
    return this; // Works!
};

$("div")
    .find("span")
        .fnBar()
    .end()
    .css("color", "red"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T14:31:16.637

从文档中：

> 结束当前链中最近的过滤操作，并将匹配的元素集返回到其先前的状态。

在

```
$("div").find("span").fnBar().end() 
```

`end`将过滤的状态设置为调用之前的状态`find`。

使用 just `$(this)`，您正在重建一个新的 jQuery 对象，没有任何历史记录。你没有过滤操作，也没有链，所以它没有什么可取消的。

jQuery`end`函数是这样实现的：

```
end: function() {
    return this.prevObject || this.constructor(null);
}, 
```

这意味着您可以通过记录`prevObject`jQuery 对象的属性来查看差异：

```
console.log(this.prevObject);
console.log($(this).prevObject); // will give undefined 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T14:33:34.570

在 jQuery 方法内部，`this`已经是 jQuery 对象。`$(this)`创建一个**全新**的jQuery 对象，没有过滤历史。

同样的问题，但可能更容易理解：

```
var bar = $("div").find("span");
// This doesn't work
$(bar).end().css("color", "red");
// This does
bar.end().css("color", "red"); 
```

# php - 在 php 中格式化时间，如 mysql 的 date_format

> ID：14140876
> 
> 赞同：-2
> 
> 时间：2013-01-03T14:30:00.607
> 
> 标签：php

我们如何像使用 mysql 的 date_format 一样在 php 中格式化时间？

在 mySql 中我们这样做 `date_format(now(),'%M %e, %Y') as time`。php 的当前时间可以格式化为 2013 年 1 月 3 日吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:31:55.413

是的。查看[PHP 日期](http://php.net/manual/en/function.date.php)。

```
echo date('F j, Y', time()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:32:44.887

代码是：

```
date("Y-m-d",strtotime(date())) 
```

[有关date() 函数的](http://php.net/manual/en/function.date.php)更多信息和[有关 strtotime() 函数的一些信息](http://php.net/manual/en/function.strtotime.php)

# php - 一个文件中的多个 PHP 查询用于 AJAX 调用

> ID：14140879
> 
> 赞同：3
> 
> 时间：2013-01-03T14:30:17.593
> 
> 标签：php, ajax

当谈到 AJAX 时，我是一个完全的菜鸟，只是想知道是否：

创建 ajax 调用时：

```
 $.ajax( {
    type: 'POST',
    url:'http://link.to.php/file.php', 
    data: { 'link': variable},
    }) 
```

我是否必须创建多个 PHP 文件，每个文件只有我想使用的单个查询，或者我可以在一个文件中编译它们吗？例如

```
**File1.php
//containing a singular query**
<?php

include ('connection.php');
    if(isSet($_POST['link'])){

        $curUrl=$_POST['link'];

        $curUrl=mysql_real_escape_string($curUrl);

        $nextSet = "SELECT * FROM shortlink_analytics WHERE shortlink = '$curUrl' ORDER BY hitTime ASC";

        $array = array();

        $query = mysql_query($nextSet);

        while($row = mysql_fetch_array($query)){

            $array[] = '<tr><td>'.$row['hitTime'].'</td></tr>';

        }

        echo json_encode ($array);

    }
?> 
```

或者我可以让他们像下面这样：

```
File2.php
//containing multiple querys
<?php

include ('connection.php');
    if(isSet($_POST['link'])){

        $curUrl=$_POST['link'];

        $curUrl=mysql_real_escape_string($curUrl);

        $nextSet = "SELECT * FROM shortlink_analytics WHERE shortlink = '$curUrl' ORDER BY hitTime ASC";

        $array = array();

        $query = mysql_query($nextSet);

        while($row = mysql_fetch_array($query)){

            $array[] = '<tr><td>'.$row['hitTime'].'</td></tr>';

        }

        echo json_encode ($array);

    }

    if(isSet($_POST['link2'])){

        $curUrl2=$_POST['link2'];

        $curUrl=mysql_real_escape_string($curUrl2);

        $nextSet = "SELECT * FROM shortlink_analytics WHERE shortlink = '$curUr2l' ORDER BY hitTime ASC";

        $array2 = array();

        $query = mysql_query($nextSet);

        while($row = mysql_fetch_array($query)){

            $array[] = '<tr><td>'.$row['hitTime2'].'</td></tr>';

        }

        echo json_encode ($array2);

    }
?> 
```

如果我可以像**File2.php**一样拥有它，我该如何定位正确的查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:42:24.827

这完全取决于您打算进行的查询数量。这个文件越大，需要的处理就越多，管理起来就越困难。如果您确实使用单个文件，我会考虑使用 switch 语句。Switch 和 If 语句已经过基准测试，并且 Switch 语句比 If 更有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T14:44:09.010

您可以对从 AJAX 调用的 PHP 文件运行任意数量的查询。

但是请记住，如果您要返回 JSON 数据，您希望一次返回所有内容。因此，只需累积所有输出数据，然后一次性推送所有内容（代码已被删减）：

```
if(isSet($_POST['link'])){
    $array1 = array();

    while($row = mysql_fetch_array($query)){
        $array1[] = '<tr><td>'.$row['hitTime'].'</td></tr>';
    }
}

if(isSet($_POST['link2'])){
    $array2 = array();

    while($row = mysql_fetch_array($query)){
        $array2[] = '<tr><td>'.$row['hitTime'].'</td></tr>';
    }
}

$return = array();
if(isset($array1)){
    $return['array1'] = $array1;
}
if(isset($array2)){
    $return['array2'] = $array2;
}

echo json_encode($return); 
```

当作为对象返回到 javascript 时，这将允许您更清晰地提供信息：

```
success:function(data){
    console.log(data.array1);
    console.log(data.array2);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:36:22.347

AJAX 调用与页面调用没有什么不同。因此，您可以像传统方式一样将所有内容放在一个 .php 文件中；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T14:36:41.707

你可以像在`File2.php`. 例如，您可以像这样实现它：

*   在ajax调用中，添加参数：`data: { 'link': variable, 'query': query},`
*   在php页面中，读取参数：`$action = $_POST['query']; switch($action){...}`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T15:09:38.690

答案是肯定的，AJAX 调用所做的就是使用您提供的 POST / GET 变量加载文件，然后返回输出。

因此，通过使用 if 语句，您可以将所有 AJAX 调用处理代码保存在同一个文件中；如果你希望。

# php - CodeIgniter - 最后一个 else if 语句不满足条件

> ID：14140885
> 
> 赞同：0
> 
> 时间：2013-01-03T14:30:42.740
> 
> 标签：php, forms, codeigniter, if-statement

我认为这只是我犯的一个简单错误，但直到现在我仍然无法解决为什么我的最后一个 else if {} 语句在满足条件时没有执行。

这是我的表格。我有 3 个表单元素作为用户输入值的选项。他们可以选择上传文本、照片或电影。这是我的PHP：

```
if ( $this->input->post('text') !== '') {

   //this executes fine when it meets the condition

} else if ( $this->input->post('photo') !== '' ) {

   // this also works fine

} else if ( $this->input->post('video') !== '' ) {

   /* however, I can't get to this condition when 
   the user chooses to upload the movie.
   It always go the second condition.
   */

} 
```

编辑：

这是我的看法：

```
<form action="<?php echo base_url()?>action/post" method="post" enctype="multipart/form-data">
     <ul class="nav nav-tabs">
         <li class="active">
              <a href="#status" data-toggle="tab">Update Status</a>
         </li>
         <li>
              <a href="#photos" data-toggle="tab">Post Photos</a>
         </li>
         <li>
              <a href="#videos" data-toggle="tab">Post Videos</a>
         </li>
     </ul>
     <div class="tab-content">
         <div class="tab-pane active" id="status">
              <textarea name="text"></textarea>
          </div>
          <div class="tab-pane" id="photos">
              <input type="file" name="photo" class="input" />
              <input type="text" name="photos-detail" placeholder="description" />
          </div>
          <div class="tab-pane" id="videos">
              <input type="file" name="video" class="input" />
              <input type="text" name="videos-detail" placeholder="description" />
          </div>
      </div>
      <button type="submit" class="btn btn-primary" name="post">Post</button>
 </form> 
```

任何想法都会非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:58:25.120

你不能像那样可靠地检查文件输入。我通常检查文件大小以查看是否已上传任何内容，因此您可以执行以下操作（应该可以）：

```
if ( $this->input->post('text') !== '') {    
   //code   
} else if((isset($_FILES["photo"]["size"])) && ($_FILES["photo"]["size"] > 0)){   
   // code 2    
} else if((isset($_FILES["video"]["size"])) && ($_FILES["video"]["size"] > 0)){    
    // code 3    
} 
```

**注意** 你不能只检查文件大小，否则你会得到未定义的索引错误——因此 isset()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T18:14:07.877

如果我使用相同的代码，我得到的结果是我的视图显示了整个代码行。

```
if ( $usuario->party !== '') {
   <a href="<?php echo base_url('vincular/party') ?>"><img src="<?php echo base_url('assets/img/link/sprite1_13.png') ?>"></a>
} else {
   <a href="<?php echo base_url('vincular/party') ?>"><img src="<?php echo base_url('assets/img/link/party.png') ?>"></a>
} 
```

如果我不使用我的代码可以正常工作：

```
<?php foreach ($usuarios->result() as $usuario) { ?>
    <div id="cuerpo" class="cuerpoMyPerfil">
        <div id="columna1">                    
            <div id="contenColumn1" class="corner">
                <div class="myFoto">
                    <img  src="<?php echo base_url('assets/img/testimonials/user.jpg') ?>" width="100%" height="auto" alt="nombre" />                </div>
                <div class="myNombre">
                    <?php
                    echo $usuario->nombre . "<br/>";
                    echo $usuario->apellidos;
                    ?>
                </div>
                <div class="myDescripcion">
                    <?php echo $usuario->acerca; ?>
                </div>
if ( $usuario->party !== '') {
   <a href="<?php echo base_url('vincular/party') ?>"><img src="<?php echo base_url('assets/img/link/sprite1_13.png') ?>"></a>
} else {
   <a href="<?php echo base_url('vincular/party') ?>"><img src="<?php echo base_url('assets/img/link/party.png') ?>"></a>
}

                <dl class="dl-vertical">
                    <!-- Verificar que tenga valores en la tabla vincular
                    Si lo trae, poner el ícono prendido, de lo contrario el apagado-->
                    <dt>

                    <a href="<?php echo base_url('vincular/dating') ?>"><img class="pull-right" src="<?php echo base_url('assets/img/link/love.png') ?>"></a></dt>
                    <dt><a href="<?php echo base_url('vincular/network') ?>"><img src="<?php echo base_url('assets/img/link/network.png') ?>"></a>
                    <a href="<?php echo base_url('vincular/friends') ?>"><img class="pull-right" src="<?php echo base_url('assets/img/link/friends.png') ?>"></a></dt>
                </dl>

            </div>
            <div class='myTextInvi'>
                <div class='textInvitacionActual floatL'>Tienes Invitaciones disponibles</div>
                <div class='numInvitacionActual floatL' ><?php echo $usuario->disponibles; ?></div>
            </div>
            <div class='myBtnInvi'>
                <a href="<?php echo base_url('oneperfil/invite') ?>">
                    <div class='textBtnInvitacion'>ENVIAR INVITACIÓN</div>
                </a>
            </div>
        </div>
    </div>
<?php } ?> 
```

# c - scanf没有响应？

> ID：14140892
> 
> 赞同：0
> 
> 时间：2013-01-03T14:30:58.463
> 
> 标签：c

我最近开始学习 C 并且正在尝试编写密码数据保护程序。我正在编写一个函数，它应该测试一个文件 password.txt 是否存在，如果它不存在，它将获得一个空值，然后要求用户设置一个主密码并重复。但是它不允许用户重复密码。有小费吗？- 干杯（记住只是 C 而不是 C++）

```
/*Headers*/
#include <stdio.h>
#include <stdlib.h>

#define MAX_LENGTH 99

int main(void){

    /*Variable Declaration*/
    char password[] = "Lakaka";

    masterPassword();

    printf("Welcome to Fort-Knox.");

getchar();
return 0;
}

int masterPassword(void){
    /*Password Comparison Variables*/
    char password[MAX_LENGTH];
    char password1[MAX_LENGTH];

    FILE*fp;
    if (fp == NULL){
        printf("Choose a master password:\n");
        scanf("%c", password);
        printf("Please repeat password:\n");
        scanf("%c", password1);

        if (password == password1){
            printf("Password Accepted.");
            fp = fopen("password.txt", "w+");
            printf("File Created");
            fclose(fp);
            return 0;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:31:58.033

读取字符串时，`%s`不用`%c`作格式说明符。`%c`只读取一个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T14:34:09.630

您的格式说明符错误。

这也是错误的：

```
if (password == password1) 
```

这只会比较转换为指针的数组。您需要通过调用逐个字符比较`strcmp()`：

```
if( strcmp(password, password1) == 0 )
{
  printf("match!\n");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:33:16.160

使用`"%s"`而不是`"%c"`

`%c`仅适用于 1 个字符

`%s`用于字符串

```
scanf("%s", password);
scanf("%s", password1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T14:42:10.273

你需要做

```
scanf("%s", password); 
```

and to compare use :

```
strncmp(password,password1,MAX_LENGTH) 
```

it´s always more safe :)...

# networking - GStreamer：通过网络流式传输 vorbis 编码的音频

> ID：14140893
> 
> 赞同：3
> 
> 时间：2013-01-03T14:31:04.677
> 
> 标签：networking, stream, udp, gstreamer, vorbis

我想编写一个通过网络传输音频和视频的应用程序。作为一个简单的开始，我想尝试音频部分。

我想通过网络从我的麦克风流式传输 vorbis 编码的音频。我从接收器的以下管道开始：

`gst-launch-0.10 tcpserversrc host=localhost port=3000 ! oggdemux ! vorbisdec ! audioconvert ! audio/x-raw-int, endianness="(int)1234", signed="(boolean)true", width="(int)16", depth="(int)16", rate="(int)22000", channels="(int)1" ! alsasink`

对于发件人：

`gst-launch-0.10 autoaudiosrc ! audio/x-raw-int,rate=22000,channels=1,width=16 ! audioconvert ! vorbisenc ! oggmux ! tcpclientsink host=localhost port=3000`

这种作品，但音频很抢眼。

有人可以给我一个提示，我可以如何通过网络*顺利地*从我的麦克风进行 vorbis 编码和流式传输音频？

编辑：我使用`audiotestsrc`并记录了输出：[http ://db.tt/oDuQ2O41](http://db.tt/oDuQ2O41)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:54:32.263

将您的发件人管道更改为 -

`gst-launch-0.10 autoaudiosrc ! audio/x-raw-int,rate=22000,channels=1,width=16 ! audioconvert ! vorbisenc ! identity silent=true sync=true ! oggmux ! tcpclientsink host=localhost port=3000`

这将控制流水线时钟的数据生成速率。让我知道这个是否奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:36:38.723

我已经尝试了下面的这些命令（对原始帖子中的命令进行了轻微修改），它们能否为我解决“snatchy”声音问题

发件人：

```
gst-launch-0.10 autoaudiosrc ！\
音频/x-raw-int, endianness="(int)1234", signed="(boolean)true", width="(int)16", depth="(int)16", rate="(int) 22000", 频道="(int)1" ！\
音频转换！\
伏比生！\
oggmux 最大延迟=50 最大页面延迟=50 ！\
tcpclientsink 主机=localhost 端口=3000

```

接收者：

```
gst-launch-0.10 tcpserversrc 主机=本地主机端口=3000 ！\
奥格德多克斯！\
沃尔比斯德！\
音频转换！\
音频/x-raw-int, endianness="(int)1234", signed="(boolean)true", width="(int)16", depth="(int)16", rate="(int) 22000", 频道="(int)1" ！\
脉冲接收器

```

# html - 创建小按钮

> ID：14140897
> 
> 赞同：2
> 
> 时间：2013-01-03T14:31:12.847
> 
> 标签：html, css, button

我正在尝试制作一个 11 像素 x 11 像素的按钮，但似乎我尝试的每个浏览器的按钮最小宽度为 12 像素（IE9 除外，它是 16 像素）。有没有办法解决这个问题，还是我需要使用锚标签？

**我的 CSS**

```
#testButton
{
    background-image: url(images/Sprites.png);
    width: 11px;
    height: 11px;
    border: 0 none transparent;
} 
```

**IE 中的结果**

![在此处输入图像描述](../Images/6b5a8fc00883efe84d6246217355a91a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:39:04.290

每个浏览器都有一些默认的 CSS。尝试使用**[css 重置](http://meyerweb.com/eric/tools/css/reset/)**

尝试 在您的按钮 css 中添加`padding`和`margin``0`

```
#testButton
{
    background-image: url(images/Sprites.png);
    width: 11px;
    height: 11px;
    border: 0 none transparent;
    padding:0;
    margin:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:41:21.467

好的，这么有趣的问题。我一直在[这里](http://jsfiddle.net/mutahhir/dEt6w/)玩。我在这里在 Mac 上运行 Safari。

对我来说，这（我认为）适用于一个简单的`<button></button>`元素：

```
button {
  width: 2px;
  height: 2px;
  padding: 0px;
  box-sizing: border-box;
  border: 0;
  background: red;
} 
```

我认为要注意的重要一点是`box-sizing`参数。[您可以在此处](http://css-tricks.com/box-sizing/)获得有关它的更多信息。当然，还有`padding`风格。

# asp.net - 每年创建一个新的数据库表

> ID：14140899
> 
> 赞同：0
> 
> 时间：2013-01-03T14:31:14.220
> 
> 标签：asp.net, sql, vb.net

我必须基于使用大型数据库的现有 Excel 应用程序创建一个新应用程序。对于新应用程序，我将使用 Microsoft Web Developer (VB.NET)。Excel 应用程序处理一些订单以及与这些订单相关的一些数据。

因为它是一个大数据库，所以我需要以编程方式为每年创建一个表。例如：2013 年的订单将在 Orders_2013 中，2014 年的订单将在 Orders_2014 中等等......但是我的新应用程序应该能够在所有表中进行搜索；如果我搜索从 2012 年到现在是 2013 年的订单，应用程序应该能够在特定的数据库表中搜索。

我必须使用旧的数据库结构，这是一种挫折。如果我创建一个新的数据库结构，我必须能够从旧数据库中导入所有内容。

我每年都需要一些关于如何构建应用程序以创建新数据库的指导。

我读了一些关于 SQL Management Studio 的东西，我可以使用一个任务来创建一个脚本，用于每年生成一个新表，但到目前为止我还没有能够创建一个。我会继续搜索，但如果有人知道我在找什么，请分享该信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:07:31.440

首先让我说我会提倡单表设计，同时使用视图来保持向后兼容性。我将假设您束手无策，根本无法修改表结构，因此无法使用单表。

在 SQL Management Studio 中，您可以在“设计视图”中创建一个年度表。完成后，您可以右键单击该表并让它生成一个 CREATE TABLE 脚本，您可以每年执行该脚本，并使用不同的表名。我不知道 SQL Management Studio 是否可以安排它，但我会自己简单地做，因为它每年只有一次。

至于统一搜索，您可以创建一个视图，该视图是所有年份特定表的并集并对其进行搜索。这样，您只需修改搜索组件即可使用新视图。但是，您还必须每年更新此视图，这应该非常简单。

# oracle - 在 SQLAlchemy 中使用 Oracle 服务名称

> ID：14140902
> 
> 赞同：12
> 
> 时间：2013-01-03T14:31:27.130
> 
> 标签：oracle, sqlalchemy

我遇到了一个令人讨厌的小问题，使用服务名称通过 SQLAlchemy 连接到 Oracle 模式。这是我作为脚本的代码。（出于安全原因，尖括号之间的项目是实际值的占位符）

```
from sqlalchemy import create_engine

if __name__ == "__main__":                                                                                                                                                        
    engine = create_engine("oracle+cx_oracle://<username>:<password>@<host>/devdb")                                                                                                                                                   
    result = engine.execute("create table test_table (id NUMBER(6), name VARCHAR2(15) not NULL)")
    result = engine.execute("drop table test_table") 
```

其中“devdb”是服务名称而不是 SID。运行此脚本的结果是堆栈跟踪。

```
(oracle-test)[1]jgoodell@jgoodell-MBP:python$ python example.py 
Traceback (most recent call last):
  File "example.py", line 8, in <module>
    result = engine.execute("create table test_table (id NUMBER(6), name VARCHAR2(15) not NULL)")
  File "/Users/jgoodell/.virtualenvs/oracle-test/lib/python2.6/site-packages/sqlalchemy/engine/base.py", line 1621, in execute
    connection = self.contextual_connect(close_with_result=True)
  File "/Users/jgoodell/.virtualenvs/oracle-test/lib/python2.6/site-packages/sqlalchemy/engine/base.py", line 1669, in contextual_connect
    self.pool.connect(),
  File "/Users/jgoodell/.virtualenvs/oracle-test/lib/python2.6/site-packages/sqlalchemy/pool.py", line 272, in connect
    return _ConnectionFairy(self).checkout()
  File "/Users/jgoodell/.virtualenvs/oracle-test/lib/python2.6/site-packages/sqlalchemy/pool.py", line 425, in __init__
    rec = self._connection_record = pool._do_get()
  File "/Users/jgoodell/.virtualenvs/oracle-test/lib/python2.6/site-packages/sqlalchemy/pool.py", line 777, in _do_get
    con = self._create_connection()
  File "/Users/jgoodell/.virtualenvs/oracle-test/lib/python2.6/site-packages/sqlalchemy/pool.py", line 225, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/jgoodell/.virtualenvs/oracle-test/lib/python2.6/site-packages/sqlalchemy/pool.py", line 318, in __init__
    self.connection = self.__connect()
  File "/Users/jgoodell/.virtualenvs/oracle-test/lib/python2.6/site-packages/sqlalchemy/pool.py", line 368, in __connect
    connection = self.__pool._creator()
  File "/Users/jgoodell/.virtualenvs/oracle-test/lib/python2.6/site-packages/sqlalchemy/engine/strategies.py", line 80, in connect
    return dialect.connect(*cargs, **cparams)
  File "/Users/jgoodell/.virtualenvs/oracle-test/lib/python2.6/site-packages/sqlalchemy/engine/default.py", line 279, in connect
    return self.dbapi.connect(*cargs, **cparams)
sqlalchemy.exc.DatabaseError: (DatabaseError) ORA-12505: TNS:listener does not currently know of SID given in connect descriptor
 None None 
```

如果 'devdb' 是一个 SID 而不是一个服务名称，这个例子就可以正常工作，我一直在尝试连接字符串的不同排列，但没有找到任何有效的方法。SQLAlchemy 文档中似乎也没有任何内容明确解释如何处理 Oracle 连接的 SID 与服务名称。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-03T14:34:41.227

我找到了答案，您必须在 '@" 之后的连接字符串中使用与 tnsnames.ora 文件中使用的相同的连接字符串，就像这样

```
from sqlalchemy import create_engine

if __name__ == "__main__":                                                                                                                                                        
    engine = create_engine("oracle+cx_oracle://<username>:<password>@(DESCRIPTION = (LOAD_BALANCE=on) (FAILOVER=ON) (ADDRESS = (PROTOCOL = TCP)(HOST = <host>)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = devdb)))")                                                                                                                                                   
    result = engine.execute("create table test_table (id NUMBER(6), name VARCHAR2(15) not NULL)")
    result = engine.execute("drop table test_table") 
```

这个例子运行得很好，您可以注释掉 drop 语句并检查 DB 以查看表是否已创建。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-02-05T02:28:22.077

```
import cx_Oracle
dsnStr = cx_Oracle.makedsn('myhost','port','MYSERVICENAME')
connect_str = 'oracle://user:password@' + dsnStr.replace('SID', 'SERVICE_NAME') 
```

makedns 将创建一个这样的 TNS：

> (DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=myhost)(PORT=1530)))(CONNECT_DATA=(SID=MYSERVICENAME)))

用“SERVICE_TYPE”替换“SID”让它为我工作。

* * *

如果您使用的是烧瓶、sqlalchemy 和 oracle：

```
from flask import Flask
from flask_sqlalchemy import SQLAlchemy
import cx_Oracle

app = Flask(__name__)
dnsStr = cx_Oracle.makedsn('my.host.com', '1530', 'my.service.name')
dnsStr = dnsString.replace('SID', 'SERVICE_NAME')
app.config['SQLALCHEMY_DATABASE_URI'] = 'oracle://myschema:mypassword@' + dnsStr
db = SQLAlchemy(app) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-08-28T13:20:06.617

模块 sqlalchemy 现在可以处理 oracle service_names。看一看：

```
from sqlalchemy.engine import create_engine

DIALECT = 'oracle'
SQL_DRIVER = 'cx_oracle'
USERNAME = 'your_username' #enter your username
PASSWORD = 'your_password' #enter your password
HOST = 'subdomain.domain.tld' #enter the oracle db host url
PORT = 1521 # enter the oracle port number
SERVICE = 'your_oracle_service_name' # enter the oracle db service name
ENGINE_PATH_WIN_AUTH = DIALECT + '+' + SQL_DRIVER + '://' + USERNAME + ':' + PASSWORD +'@' + HOST + ':' + str(PORT) + '/?service_name=' + SERVICE

engine = create_engine(ENGINE_PATH_WIN_AUTH)

#test query
import pandas as pd
test_df = pd.read_sql_query('SELECT * FROM global_name', engine) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-17T16:31:14.827

cx_Oracle 支持将 service_name 传递给 makedsn 函数。

[http://cx-oracle.sourceforge.net/html/module.html?highlight=makedsn#cx_Oracle.makedsn](http://cx-oracle.sourceforge.net/html/module.html?highlight=makedsn#cx_Oracle.makedsn)

如果 create_engine() API 将 service_name 传递给它对 makedsn 进行的底层调用，那就太好了……像这样：

```
oracle = create_engine('oracle://user:pw@host:port', service_name='myservice')

TypeError: Invalid argument(s) 'service_name' sent to create_engine(), using configuration OracleDialect_cx_oracle/QueuePool/Engine.
Please check that the keyword arguments are appropriate for this combination of components. 
```

# java - 如何组织我的 Java Eclipse 项目，以便用户只需要进行一次导入？

> ID：14140906
> 
> 赞同：3
> 
> 时间：2013-01-03T14:31:52.057
> 
> 标签：java, eclipse

如何组织我的 Java Eclipse 项目，以便用户只需要进行一次导入？

我正在开发一个图形库，其中有各种包，例如 graphics.A、graphics.B 等，但是当我将这个库提供给用户时，我希望他能够通过说导入图形来使用它. 我不知道该怎么做。我现在拥有它的方式，他将不得不导入 graphics.A。*, 导入图形.B.* ， ETC。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T14:37:32.780

在 Java 中用单行导入所有子包是不可能的。

```
import graphics.*; 
```

如果和是子包，将只导入 中的类`graphics`，`graphics.A`并且`graphics.B`不会被导入。`A``B`

因此，要么将所有类放在一个子包中，要么用户必须多次导入，例如

```
import graphics.A.*;
import graphics.B.*; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T14:48:02.720

好吧，工具应该负责管理进口。我不确定为什么单一导入很重要，但我不知道你的动机，所以我会接受它。

*   将所有类放在一个包中。（完全不推荐。）
*   创建一个代理类，一旦实例化，它就会进入包层次结构并为您实例化所有内容并返回 Object 实例或您设计的某些根类型。（完全不推荐。）
*   假设您的开发人员有工具可以为他们管理导入并且不用担心。（受到推崇的。）

# python - 如何使用套接字获取网页使用python

> ID：14140914
> 
> 赞同：7
> 
> 时间：2013-01-03T14:32:19.733
> 
> 标签：python, http, sockets

我知道使用 urllib2 获取网页很容易，但我想知道是否有使用套接字实现获取网页功能的示例，我 google 了很多，我没有找到任何示例，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T19:59:35.370

这是我掀起的东西。它不会捕获异常来处理错误。YMMV

```
import socket
request = b"GET / HTTP/1.1\nHost: stackoverflow.com\n\n"
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect(("stackoverflow.com", 80))
s.send(request)
result = s.recv(10000)
while (len(result) > 0):
    print(result)
    result = s.recv(10000) 
```

# java - 比较两个字符串并读入一个数字

> ID：14140931
> 
> 赞同：-2
> 
> 时间：2013-01-03T14:33:34.000
> 
> 标签：java, string, equals

我让用户输入一个字符串（命令）。我的代码是检查用户输入的内容。例如“加法”“除法”“减法”等...

并且会像这样附上一个数字。“ADD3”或“ADD5”

我应该如何以有效的方式对此进行编码，而不是做大量的 if 语句

这就是我现在所拥有的

```
public class Cell {

public static void main (String[] args) {

    String command = "";

    command= JOptionPane.showInputDialog(null, "Enter The Command" );

    if (command.equalsIgnoreCase("ADD")) {
              BLAH BLAH BLAH
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:39:07.660

我认为你应该这样做：

```
userInput.toLowerCase().startsWith("add"); // or divide/subtract/multiply... 
```

我认为这段代码很容易解释，除了`toLowerCase()`可能。那是为了模拟不区分大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T14:44:13.120

最有效的方法是遵循假设用户输入`ADD 3`

```
String[] inputs=command.split(" ");
String actualCommand=inputs[0];
int number=Integer.parseInt(inputs[1]) 
```

在此之后使用`switch`or`if-else`来检查实际的命令并用数字做一些事情。

# java - 插入和退出 SQLite 数据库并显示到 TextView - Android

> ID：14140933
> 
> 赞同：0
> 
> 时间：2013-01-03T14:33:37.753
> 
> 标签：java, android, sqlite, cursor, illegalstateexception

我正在尝试为高分表实现 SQLite 数据库。我只是在测试它，看看我的数据库创建、插入和选择是否正在使用以下代码。我正在尝试将第一行插入数据库，然后立即从中提取并将值显示到 TextViews。所有硬编码都是为了测试目的，以使数据库正常工作。

我在以下几行中收到 IllegalStateException 。我已在相应行的错误中进行了评论。

任何关于代码结构的额外建议也非常感谢。

先感谢您！

高分.java

```
public class Highscores extends Activity {

    DatabaseHelper dh;
    SQLiteDatabase db;
    int percentages;
    long scores;
    TableLayout table;
    TableRow rowHeader, row1, row2, row3, row4, row5, row6, row7, row8, row9, row10;
    TextView rank, percentage, score;
    Button btn1;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.highscoresmain);

        dh = new DatabaseHelper(this);
        db = dh.openDB();
        long x = 11;
        int y = 22;
        dh.insert(x, y);
        percentages = dh.getPercentage(db);  //Line 45
        scores = dh.getScore(db);

        Button btn1 = (Button)findViewById(R.id.homeBtn);

        TextView rank = (TextView)findViewById(R.id.rank);
        TextView percentage = (TextView)findViewById(R.id.percentage);
        TextView score = (TextView)findViewById(R.id.score);

        TextView r1r = (TextView)findViewById(R.id.r1r);
        TextView r1p = (TextView)findViewById(R.id.r1p);
        TextView r1s = (TextView)findViewById(R.id.r1s);

        rank.setText("Rank Column - TEST");
        percentage.setText("Percentage Column - TEST ");
        score.setText("Score Column - Test");
        r1r.setText("test..rank");
        r1p.setText(percentages);
        r1s.setText("test..score");

        table = (TableLayout)findViewById(R.id.tableLayout);

              dh.closeDB(db);
         }
       } 
```

数据库助手.java

```
public class DatabaseHelper extends SQLiteOpenHelper { 

    SQLiteDatabase db;

    private static final String TABLE = "HighscoresList"; 
    public static DatabaseHelper mSingleton = null;

    // Table columns names. 
    private static final String RANK = "_id"; 
    private static final String SCORE = "score"; 
    private static final String PERCENTAGE = "percentage";

    public DatabaseHelper(Context context) { 
        super(context, DB_NAME, null, DATABASE_VERSION); 
    }

    public synchronized static DatabaseHelper getInstance(Context context) {
        if(mSingleton == null) {
            mSingleton = new DatabaseHelper(context.getApplicationContext());
        }
        return mSingleton;
    }

    public SQLiteDatabase openDB() {
        db = this.getWritableDatabase();
        return db;
    }

          //I am using hard coded numbers in the below 2 methods for testing purposes.
public long getScore(SQLiteDatabase db) {
    Cursor c = db.rawQuery("SELECT " + SCORE + " FROM " + TABLE + " WHERE " + SCORE + " = " + 11 + ";", null);  //Line 45
    long i = 0;
    if(c.getCount() != 0) {
           c.moveToFirst();
           int columnIndex = c.getInt(c.getColumnIndex("SCORE"));
           if(columnIndex != -1) {
               i = c.getLong(columnIndex);
           } else { 
               i = 999; 
           }
    } else {
        i = 555;
    }
    c.close();
    return i;
}

public int getPercentage(SQLiteDatabase db) {
    Cursor c = db.rawQuery("SELECT " + PERCENTAGE + " FROM " + TABLE + " WHERE " + PERCENTAGE + " = " + 22 + ";", null);
    int i = 0;
    if(c.getCount() != 0) {
           c.moveToFirst();
           int columnIndex = c.getInt(c.getColumnIndex("PERCENTAGE"));
           if(columnIndex != -1) {
               i = c.getInt(columnIndex);
           } else { 
               i = 999; 
           }
    } else {
        i = 555;
    }
    c.close();
    return i; 
```

}

```
 //Insert new record.
    public long insert(long score, int percentage) {
        ContentValues values = new ContentValues();
        values.put(SCORE, score);
        values.put(PERCENTAGE, percentage);

        return db.insert(TABLE, null, values);
          }
} 
```

LogCat 输出

```
01-03 15:39:13.952: E/AndroidRuntime(938): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.Highscores}: java.lang.IllegalStateException: Couldn't read row 0, col -1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it.
01-03 15:39:13.952: E/AndroidRuntime(938):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-03 15:39:13.952: E/AndroidRuntime(938):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-03 15:39:13.952: E/AndroidRuntime(938):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-03 15:39:13.952: E/AndroidRuntime(938):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-03 15:39:13.952: E/AndroidRuntime(938):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-03 15:39:13.952: E/AndroidRuntime(938):  at android.os.Looper.loop(Looper.java:137)
01-03 15:39:13.952: E/AndroidRuntime(938):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-03 15:39:13.952: E/AndroidRuntime(938):  at java.lang.reflect.Method.invokeNative(Native Method)
01-03 15:39:13.952: E/AndroidRuntime(938):  at java.lang.reflect.Method.invoke(Method.java:511)
01-03 15:39:13.952: E/AndroidRuntime(938):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-03 15:39:13.952: E/AndroidRuntime(938):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-03 15:39:13.952: E/AndroidRuntime(938):  at dalvik.system.NativeStart.main(Native Method)
01-03 15:39:13.952: E/AndroidRuntime(938): Caused by: java.lang.IllegalStateException: Couldn't read row 0, col -1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it.
01-03 15:39:13.952: E/AndroidRuntime(938):  at android.database.CursorWindow.nativeGetLong(Native Method)
01-03 15:39:13.952: E/AndroidRuntime(938):  at android.database.CursorWindow.getLong(CursorWindow.java:507)
01-03 15:39:13.952: E/AndroidRuntime(938):  at android.database.CursorWindow.getInt(CursorWindow.java:574)
01-03 15:39:13.952: E/AndroidRuntime(938):  at android.database.AbstractWindowedCursor.getInt(AbstractWindowedCursor.java:69)
01-03 15:39:13.952: E/AndroidRuntime(938):  at com.example.test.DatabaseHelper.getPercentage(DatabaseHelper.java:67)
01-03 15:39:13.952: E/AndroidRuntime(938):  at com.example.test.Highscores.onCreate(Highscores.java:45)
01-03 15:39:13.952: E/AndroidRuntime(938):  at android.app.Activity.performCreate(Activity.java:5104)
01-03 15:39:13.952: E/AndroidRuntime(938):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-03 15:39:13.952: E/AndroidRuntime(938):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-03 15:39:13.952: E/AndroidRuntime(938):  ... 11 more 
```

**编辑：** 我更新了我的`getScore()`和`getPercentage()`方法。无论如何，我仍然使用了一些硬编码的数字，所以我确切地知道发生了什么，但程序仍然崩溃。似乎 if-else 语句应该将 i 设置为 555 而不是崩溃，但事实并非如此。

我也更新了 LogCat 输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:58:58.620

我没有看到任何数据库初始化代码覆盖 onCreate 但它说您的列在表中不存在再次检查它的名称或检查表。还要养成使用完光标后关闭光标的习惯。否则，当您没有关闭前一个游标时，数据库将抛出错误。

刚刚注意到您在将其定义为时使用“PERCENTAGE”的错误

```
PERCENTAGE = "percentage"; 
```

所以在使用定义的变量时要保持一致。

[Android - SQLite Cursor getColumnIndex() 区分大小写？](https://stackoverflow.com/questions/9029668/android-sqlite-cursor-getcolumnindex-is-case-sensitive)

```
public int getPercentage(SQLiteDatabase db) {
    Cursor c = db.rawQuery("SELECT " + PERCENTAGE + " FROM " + TABLE + " WHERE " + PERCENTAGE + " = " + 22 + ";", null);
    int i = 0;
    if (c.moveToFirst())
    {
        int colIdx = c.getColumnIndex(PERCENTAGE);
        if (colIdx != -1) // Column exists
            i = c.getInt(colIdx);  //Line 54
    }
    c.close();
    return i;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T14:50:35.140

基于大卫的评论：

```
public int getPercentage(SQLiteDatabase db) {
     Cursor c = db.rawQuery("SELECT " + PERCENTAGE + " FROM " + TABLE + " WHERE " + PERCENTAGE + " = " + 22 + ";", null);
     if(c.getCount() != 0){
            c.moveToFirst();
            int i = c.getInt(c.getColumnIndex(PERCENTAGE));  //Line 54
            return i;
     } else { return 0 }
} 
```

始终如一地使用该常量，并确保它与您的 sqllite DB 完全相同。显然 getColumnIndex 区分大小写 ;)

# c# - 错误：System.TypeLoadException

> ID：14140936
> 
> 赞同：0
> 
> 时间：2013-01-03T14:33:39.993
> 
> 标签：c#, visual-studio-2010, visual-studio

目前我正在使用 VS.Net 2010 IN C# 中的继承解决方案。当我运行此解决方案并单击菜单中的任何选项卡时，屏幕显示以下错误：

例外的细节：

```
System.TypeLoadException: No se puede cargar el tipo 'PraxairUsuarioBL.EmpresaBL' 
del ensamblado 'PraxairUsuarioBL, Version=1.0.0.0, Culture=neutral, 
PublicKeyToken=null' 
porque el método 'getall' no tiene implementación (no RVA). 
```

我在项目中引用了 PraxairUsuarioBL。

我告诉我的一个人：“当您有一个针对另一个程序集的一个版本编译的程序集，但使用该其他程序集的不同版本执行时，通常会发生这种情况。这允许应用程序运行，但是当一个方法是调用它可能会丢失，定义可能不同等。”

我认为这不是代码的问题。我确信错误是程序集。但是我必须遵循哪些步骤才能做到这一点？

什么是“没有实施（没有 RVA）。”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:37:43.547

似乎您的问题在 SO 中的相关线程中得到了详细解决 -[什么可能导致 Visual Studio 单元测试中的 System.TypeLoadException？](https://stackoverflow.com/q/5735673/1437962)

此外，您还可以查看[如何在 .NET 中调试 System.TypeLoadException 错误？](https://stackoverflow.com/q/5691100/1437962).

一个可能的问题是**您的版本不匹配**。确保为目标框架编译所有程序集，例如在 .NET 4.0 中。

# python - Python：机械化

> ID：14140939
> 
> 赞同：0
> 
> 时间：2013-01-03T14:34:19.630
> 
> 标签：python, django, mechanize

我的问题很简短，我正在使用机械化模块登录网站，但是如何找出用户是否成功登录。例如。

```
br = open("http://xyz.com/signin")
br['login'] = xxxx
br['password'] = xxx
result = br.submit().read()
f  = open('s.html', 'w')
f.write(result)
f.close 
```

现在，如果登录信息为真，s.html 将包含下一个重定向页面，如果信息为假，它将包含错误页面。现在如何找出用户的用户名和密码是真实的......提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:36:26.467

您必须查看为您服务的页面内容。

如果它有字符串

> 登录失败

或类似的然后你知道它失败了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T04:12:49.520

如果登录成功，它通常会重定向到不同的页面，否则它会保留在同一页面上并出现错误消息

你可以使用这样的东西

```
if br.geturl()==("https://address of the page after login"):
        print "SUCCESS" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-24T12:50:31.210

您可以`br.geturl()`在登录时使用并检查它是否是 URL。假设它是`xyz.com/welcome`.

# networking - 从 Javascript/Mac OS X 小部件/Dashcode 连接到服务器服务

> ID：14140941
> 
> 赞同：0
> 
> 时间：2013-01-03T14:34:23.463
> 
> 标签：networking, widget, dashcode

我的问题很简短：我正在尝试**打开一个简单的 TCP 连接**（假设在端口 110 = POP3 上）**发送命令**并使用 Dashcode 使用 Mac OS X 小部件中的 Javascript API**获取响应。**但问题是我不知道如何让这些东西发挥作用。

那么你有什么想法吗？我试过 XHTTPRequest 但顾名思义，这个东西适用于 HTTP 协议，但我不需要这个 HTTP 东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:46:47.323

我找到了一种解决方法：使用 ruby​​ 脚本可以轻松获取我需要的那些信息。并且 ruby​​ 似乎与 Mac OS X 捆绑在一起。 ruby​​ 脚本可以在 Dashcode 中添加并通过`widget.system("/usr/bin/ruby yourscript.rb", null)`.

为我工作！

# java - 如何在 GWT Web 项目中导入 xml 文件并将其作为 fileInputStream 参数（）传递，因为 java 项目的方式失败

> ID：14140949
> 
> 赞同：0
> 
> 时间：2013-01-03T14:34:56.437
> 
> 标签：java, gwt, xml-import

在 Eclipse 的 Java 项目中，我们可以通过以下方式导入 xml 文件：File-->Import-->Xml 然后我们可以给出包含 xml 文件的文件夹的路径。所以整个文件夹都被导入了，我们可以将 xml 传递为`FileInputStream(new File("foldername/xmlfilename.xml"))`;

我们如何在 Eclipse 的 GWT 项目中导入 xml 文件并将其作为参数传递给 `FileInputStream(())`。请帮助，因为它不能像 Java 项目那样完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:39:48.560

您不能使用 FileInputStream，并且 GWT 中没有模拟替代的 File api。

您可以在服务器端对其进行处理，然后通过“JSON”、XML 或纯文本“响应”将其发送到 GWT 客户端代码。

[您可以在https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication中](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication)**的处理响应**部分下参考有关将此数据拉到客户端的信息

如果您想将 XML 推送到客户端 - [https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsXML](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsXML)

# android - Android 服务：seekbar 不工作

> ID：14140951
> 
> 赞同：0
> 
> 时间：2013-01-03T14:35:04.207
> 
> 标签：android, service, media-player, seekbar

我正在使用管理搜索栏的 Android 服务。这是代码（我只是放了有关搜索栏的代码）：

```
 public class MediaPlayerService extends Service implements
        Runnable,
        SeekBar.OnSeekBarChangeListener {

    private MediaPlayer mediaPlayer = null;
    private AudioManager audioManager;
    private SeekBar seekBarTime;

    @Override
    public void onCreate() {

        //SET SEEKBAR
        LayoutInflater inflater = ( LayoutInflater ) getSystemService( LAYOUT_INFLATER_SERVICE );
        View layout = inflater.inflate( R.layout.play_song , null);
        seekBarTime = (SeekBar) layout.findViewById(R.id.seekBarTime);
        seekBarTime.setOnSeekBarChangeListener(this);
        Thread thread = new Thread(this);
        thread.start();
    }

    public void run() {

        if(mediaPlayer != null) {
            int currentPosition = 0;
            int total = mediaPlayer.getDuration();
            seekBarTime.setMax(total);
            while (currentPosition < total && mediaPlayer != null ) {
                try {
                    Thread.sleep(1000);
                    currentPosition = mediaPlayer.getCurrentPosition();
                } catch (InterruptedException e) {
                    return;
                } catch (Exception e) {
                    return;
                }
                seekBarTime.setProgress(currentPosition);
            }
        }
    }

    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
        Log.w("disgustingapps", "seekbar");
        if (fromUser == true) {
            mediaPlayer.seekTo(progress);
        }
    }

    public void onStartTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }

    public void onStopTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }
} 
```

问题有两个。我将尝试用我糟糕的英语来解释这一点：1）我希望服务自动更新搜索栏以显示歌曲的当前时间（ mediaPlayer.getCurrentPosition() ）2）我希望用户被允许移动搜索栏以便在歌曲的时间之间移动 这两件事都不起作用。似乎 seekbar 与代码完全“独立”。我的意思是：光标根本不移动，如果用户移动它，歌曲会继续播放，什么也不做。请帮助我提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T04:48:02.677

您不能在 Android 服务中使用 SeekBar（或任何 UI 控件）

# jquery - 用于 jquery 选择的正则表达式替换

> ID：14140955
> 
> 赞同：1
> 
> 时间：2013-01-03T14:35:14.133
> 
> 标签：jquery, regex

我正在尝试使用 jquery 来定位一些动态表单变量。唯一的问题是它们包含方括号（它们是数组格式），我似乎无法让正则表达式正常工作，然后用正确的 jquery 格式替换字符串。

演示代码：

```
<div id="test[array][1]">wibble</div>
<div id="test[array][2]">wibble</div>
<div id="test[array][3]">WIBBLE</div>
<div id="test[array][4]">WIBBLE</div>
<button onclick="clicky();">test</button>

<script>

function clicky() {
//1 fail
$("#test[array][1]").html("moo");

//2 works
element = "#test\\[array\\]\\[2\\]";
console.log(element);
$(element).html("moo");

//3 fail
element = "#test[array][3]";

element.replace(/\[/g, "\\[");
element.replace(/\[/g, "\\]");
$(element).html("moo");  
console.log(element);

//4 fail     
element = "#test[array][4]";     

element.replace(/\[.*?\]/g,'\\$1');
console.log(element);

 $(element).html("moo");

};    

</script> 
```

Array[2] 正在工作，但我需要能够将随机生成的字符串转换为 jQuery 可接受的版本。它也让我感到困惑，因为 console.log 显示的元素只有 1 个反斜杠。

我传入了一个字符串，例如'#test [array] [1]'，并且需要将其转换为jQuery 将接受作为标识符的格式。

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:46:52.443

您仍然可以使用旧的 document.getElementById 函数，然后在需要时将其转换为 jQuery 元素。

样本：

```
$('#clicky').click(function() {    
var element = document.getElementById("test[array][1]");
$(element).html('moo');    
});   ​

<div id="test[array][1]">wibble</div>
<div id="test[array][2]">wibble</div>
<div id="test[array][3]">WIBBLE</div>
<div id="test[array][4]">WIBBLE</div>
<button id="clicky">test</button> 
```

提琴手：http: [//jsfiddle.net/tatzz/2/](http://jsfiddle.net/tatzz/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:49:56.810

你可以试试这个来做你的字符串替换......

```
element = "#test[array][3]";
element = element.replace(/\[/g, "\\\\[");
element = element.replace(/\]/g, "\\\\]");
$(element).html("moo");  
console.log(element); 
```

您需要将替换的结果分配回变量。

# garbage-collection - asp.net 4.5 GC 性能变化？

> ID：14140956
> 
> 赞同：3
> 
> 时间：2013-01-03T14:35:15.390
> 
> 标签：garbage-collection, .net-4.5, asp.net-4.5

经过数周的测试，我们在 ASP.NET 生产应用程序上部署了 .NET 4.5（从 4.0 升级）。正如我们的测试所证明的那样，站点功能是可靠的。尽管我们正在努力解决可能会引发其他问题的差异，但仍有一些差异。

我有一个关于垃圾收集性能监控计数器的问题。在 4.5 之前，我的经验法则是 gen2 有 10x gen1 集合，gen1 有 10x gen0 集合。基于此，GC 计数器的健康快照将是

```
gen0 1200
gen1 150
gen2 20 
```

现在 4.5 正在运行 10x 规则似乎不再适用。我看到的数字更像这样（与以前大致在一天中的同一时间拍摄）：

```
gen0 850
gen1 650
gen2 400 
```

我也看到比以前更多的“诱导 GC”。此外，“所有堆中的字节数”和“缓存条目”要低得多，但我们的网站响应速度非常快，CPU 也像以前一样好且低。

当我们部署 4.5 时，我们没有对 4.0 应用程序进行任何更改。

我不想解决不存在的问题，但似乎“正常”已经改变。这有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:46:59.083

这是一场虚惊。在 4.5 迁移后的两周监控后，GC 计数器确实遵循原始模式 - gen0 ~10x gen1 ~10x gen2。

所以一切都很好！现在要深入了解为什么没有出现编译... :)

# objective-c - 将 NSDate 转换为 NSString

> ID：14140959
> 
> 赞同：1
> 
> 时间：2013-01-03T14:35:50.303
> 
> 标签：objective-c, nsstring, nsdate

> **可能重复：**
> [将 NSDate 转换为 NSString](https://stackoverflow.com/questions/576265/convert-nsdate-to-nsstring)
> [将字符串转换为 nsdate](https://stackoverflow.com/questions/2311421/convert-string-to-nsdate)

目前我有这个代码。它用于将事件添加到日历中。

```
[...]
event.startDate = [[NSDate date] dateByAddingTimeInterval:86400];
event.endDate = [[NSDate date] dateByAddingTimeInterval:90000]; 
```

我需要的是添加到特定开始日期和结束日期的代码，这就是 NSString 派上用场的地方。但到目前为止，我还没有成功转换它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T14:37:58.957

请参阅此代码：

**NSString 到 NSDate**

```
NSString *dateString = @"01-02-2010";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
// this is imporant - we set our input date format to match our input string
// if format doesn't match you'll get nil from your string, so be careful
[dateFormatter setDateFormat:@"dd-MM-yyyy"];
NSDate *dateFromString = [[NSDate alloc] init];
// voila!
dateFromString = [dateFormatter dateFromString:dateString];
[dateFormatter release]; 
```

**NSDate 转换为 NSString：**

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd-MM-yyyy"];
NSString *strDate = [dateFormatter stringFromDate:[NSDate date]];
NSLog(@"%@", strDate);
[dateFormatter release]; 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:38:27.867

将 NSDate 转换为 NSString 为

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateStyle:NSDateFormatterMediumStyle];

NSString *string = [dateFormatter stringFromDate:date];
[dateFormatter release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:40:47.923

如果您需要“1937 年 11 月 23 日”这样的格式，这是一个示例：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateStyle= NSDateFormatterMediumStyle;
NSString* string= [formatter stringFromDate: date]; 
```

查看其他样式的[参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)。如果您需要另一种没有常量的样式，则可以使用日期格式，在本例中为：

```
formatter.dateFormat= @"MMM dd, yyyy"; // same as medium style 
```

但首选方法是使用样式，仅在没有属性样式时才使用格式。

# c++ - 如何更快地生成自恋数字？

> ID：14140960
> 
> 赞同：25
> 
> 时间：2013-01-03T14:36:04.670
> 
> 标签：c++, algorithm

“自恋数字”是 n 位数字，其中所有数字的 n 次方之和等于该数字。

所以，`153`是一个自恋的数字，因为`1^3 + 5^3 + 3^3 = 153`.

现在给定 N，找出所有 N 位长度的自恋数字？

**我的方法：**是遍历所有数字做数字幂的总和

并检查它是否相同的数字，我计算了权力。

但这还不够好，有没有更快的方法？！

**更新：** 自然界中只有 88 个自恋数字，最大的是 39 位，但我只需要长度为 12 或更少的数字。

**我的代码：**

```
long long int powers[11][12];
// powers[x][y] is x^y. and its already calculated

bool isNarcissistic(long long int x,int n){
    long long int r = x;
    long long int sum = 0;

    for(int i=0; i<n ; ++i){
        sum += powers[x%10][n];
        if(sum > r)
            return false;
        x /= 10;
    }
    return (sum == r);
}

void find(int n,vector<long long int> &vv){
    long long int start = powers[10][n-1];
    long long int end = powers[10][n];

    for(long long int i=start ; i<end ; ++i){
        if(isNarcissistic(i,n))
            vv.push_back(i);
    }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-03T14:45:38.150

由于总共只有 88 个自恋数字，您可以将它们存储在查找表中并对其进行迭代： http: [//mathworld.wolfram.com/NarcissisticNumber.html](http://mathworld.wolfram.com/NarcissisticNumber.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-03T14:47:39.673

从另一端开始。迭代所有非递减`d`数字序列的集合，计算`d`-th 次方的总和，并检查它是否产生（排序后）您开始使用的序列。

既然有

9×10^(d-1)

`d`- 数字，但仅限于

```
(10+d-1) `choose` d 
```

非递减数字序列`d`，将搜索空间减少了接近`d!`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-06T06:46:27.143

下面的代码实现了@Daniel Fischer 的想法。它复制了[Mathworld 中引用的表格](http://oeis.org/A005188)，然后再打印一些 11 位数字，并验证这里没有 12 位[数字](http://archive.lib.msu.edu/crcmath/math/math/n/n023.htm)。

实际上，生成所有可能的非递增数字字符串的*直方图而不是字符串本身会更简单，并且可能更快一点。*直方图是指索引为 0-9 的相应数字频率的表。这些可以直接比较，无需排序。但是下面的代码在 < 1 秒内运行，所以我不打算实现直方图的想法。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_DIGITS 12

// pwr[d][n] is d^n
long long pwr[10][MAX_DIGITS + 1];

// Digits and final index of number being considered.
int digits[MAX_DIGITS];
int m;

// Fill pwr.
void fill_tbls(void)
{
  for (int d = 0; d < 10; d++) {
    pwr[d][0] = 1;
    for (int p = 1; p <= MAX_DIGITS; p++) 
      pwr[d][p] = pwr[d][p-1] * d;
  }
}

// qsort comparison for integers descending
int cmp_ints_desc(const void *vpa, const void *vpb)
{
  const int *pa = vpa, *pb = vpb;
  return *pb - *pa;
}

// Test current number and print if narcissistic.
void test(void)
{
  long long sum = 0;
  for (int i = 0; i <= m; i++)
    sum += pwr[digits[i]][m + 1];
  int sum_digits[MAX_DIGITS * 2];
  int n = 0;
  for (long long s = sum; s; s /= 10)
    sum_digits[n++] = s % 10;
  if (n == m + 1) {
    qsort(sum_digits, n, sizeof(int), cmp_ints_desc);
    if (memcmp(sum_digits, digits, n * sizeof(int)) == 0) 
      printf("%lld\n", sum);
  }
}

// Recursive generator of non-increasing digit strings.
// Calls test when a string is complete.
void gen(int i, int min, int max)
{
  if (i > m) 
    test();
  else {
    for (int d = min; d <= max; d++) {
      digits[i] = d;
      gen(i + 1, 0, d); 
    }
  }
}

// Fill tables and generate.
int main(void)
{
  fill_tbls();
  for (m = 0; m < MAX_DIGITS; m++)
    gen(0, 1, 9);
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-22T23:39:02.980

我在 Lua 中编写了一个程序，它在 30829.642 秒内找到了所有自恋数字。该程序的基础是递归数字值计数数组生成器函数，它在为所有数字值生成数字值计数时调用检查函数。每个嵌套循环迭代：

FROM i= 0 和 a+x*d^o+(sx)*(d-1)^o >= 10^(o-1) 的解中的较大者，其中 - 'a' 是到目前为止的数字幂， - 'd' 是当前数字值（0-9 为基数 10）， - 'o' 是总位数（数字值计数数组的总和必须加起来), - 's' 表示在数组添加到 'o' 之前剩余的可用插槽

UP TO i<= 's' 中的较小者以及对于具有相同变量的 x 的 a+x*d^o < 10^o 的解。

这可确保检查的数字始终具有与“o”相同的位数，因此更有可能自恋，同时避免不必要的计算。

在循环中，它执行递归调用，递减数字值 'd' 添加当前数字值的贡献 (a=a+i*d^o) 并从 ' 中取出已用完的 i 个数字槽s'。

我写的要点是：

```
local function search(o,d,s,a,...) --Original number of digits, digit-value, remaining digits, accumulative sum, number of each digit-value in descending order (such as 5 nines)
    if d>0 then
        local d0,d1=d^o,(d-1)^o
        local dd=d0-d1
        --a+x*d^o+(s-x)*(d-1)^o >= 10^(o-1) , a+x*d^o < 10^o
        for i=max(0,floor((10^(o-1)-s*d1-a)/dd)),min(s,ceil((10^o-a)/dd)-1) do
            search(o,d-1,s-i,a+i*d0,i,...) --The digit counts are passed down as extra arguments.
        end
    else
        --Check, with the count of zeroes set to 's', if the sum 'a' has the same count of each digit-value as the list specifies, and if so, add it to a list of narcissists.
    end
end

local digits=1 --Skip the trivial single digit narcissistic numbers.
while #found<89 do
    digits=digits+1
    search(digits,9,digits,0)
end 
```

编辑：我忘了提到我的程序找到了 89 个自恋数字！这些是它发现的：

```
0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 153, 370, 371, 407, 1634, 8208, 9474, 54748, 92727, 93084, 548834, 1741725, 4210818, 9800817, 9926315, 24678050, 24678051, 88593477, 146511208, 472335975, 534494836, 912985153, 4679307774, 32164049650, 32164049651, 40028394225, 42678290603, 44708635679, 49388550606, 82693916578, 94204591914, 28116440335967, 4338281769391370, 4338281769391371, 21897142587612075, 35641594208964132, 35875699062250035, 1517841543307505039, 3289582984443187032, 4498128791164624869, 4929273885928088826, 63105425988599693916, 128468643043731391252,449177399146038697307, 21887696841122916288858, 27879694893054074471405, 27907865009977052567814, 28361281321319229463398, 35452590104031691935943, 174088005938065293023722, 188451485447897896036875, 239313664430041569350093, 1550475334214501539088894, 1553242162893771850669378, 3706907995955475988644380, 3706907995955475988644381, 4422095118095899619457938, 121204998563613372405438066, 121270696006801314328439376, 128851796696487777842012787, 174650464499531377631639254, 177265453171792792366489765, 14607640612971980372614873089, 19008174136254279995012734740, 19008174136254279995012734741, 23866716435523975980390369295, 1145037275765491025924292050346, 1927890457142960697580636236639, 2309092682616190307509695338915, 17333509997782249308725103962772, 186709961001538790100634132976990, 186709961001538790100634132976991, 1122763285329372541592822900204593, 12639369517103790328947807201478392, 12679937780272278566303885594196922, 1219167219625434121569735803609966019, 12815792078366059955099770545296129367, 115132219018763992565095597973971522400, 115132219018763992565095597973971522401 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-09T03:00:16.587

对于后代 ;-) 这与@Krakow10 的方法最相似，递归地生成数字包，从 9 开始，然后是 8，然后是 7 ... 到 0。

它是 Python3 代码，可以在不到 10 分钟的时间内（在我的盒子上）找到所有 1 到 61 位（第一个“显然不可能”的宽度）的 base-10 解决方案。这是迄今为止我听说过的最快的解决这个问题的代码。有什么诀窍？没有技巧 - 只是乏味;-) 随着我们的进行，到目前为止，部分总和产生了对可行延续的限制。该代码只关注那些，因此能够尽早切断大量搜索。

注意：这找不到 0。我不在乎。虽然所有参考文献都说有 88 个解决方案，但他们的表都有 89 个条目。一定是某个急切的编辑后来添加了“0”，然后其他人都盲目地复制了它;-)

**编辑**通过在搜索早期利用一些部分和约束，新版本的速度是原来的两倍多——现在在我的盒子上完成了 4 分钟多一点。

```
def nar(width):
    from decimal import Decimal as D
    import decimal
    decimal.getcontext().prec = width + 10
    if width * 9**width < 10**(width - 1):
        raise ValueError("impossible at %d" % width)
    pows = [D(i) ** width for i in range(10)]
    mintotal, maxtotal = D(10)**(width - 1), D(10)**width - 1

    def extend(d, todo, total):
        # assert d > 0
        powd = pows[d]
        d1 = d-1
        powd1 = pows[d1]
        L = total + powd1 * todo # largest possible taking no d's
        dL = powd - powd1  # the change to L when i goes up 1
        for i in range(todo + 1):
            if i:
                total += powd
                todo -= 1
                L += dL
                digitcount[d] += 1
            if total > maxtotal:
                break
            if L < mintotal:
                continue
            if total < mintotal or L > maxtotal:
                yield from extend(d1, todo, total)
                continue
            # assert mintotal <= total <= L <= maxtotal
            t1 = total.as_tuple().digits
            t2 = L.as_tuple().digits
            # assert len(t1) == len(t2) == width
            # Every possible continuation has sum between total and
            # L, and has a full-width sum.  So if total and L have
            # some identical leading digits, a solution must include
            # all such leading digits.  Count them.
            c = [0] * 10
            for a, b in zip(t1, t2):
                if a == b:
                    c[a] += 1
                else:
                    break
            else:  # the tuples are identical
                # assert d == 1 or todo == 0
                # assert total == L
                # This is the only sum we can get - no point to
                # recursing.  It's a solution iff each digit has been
                # picked exactly as many times as it appears in the
                # sum.
                # If todo is 0, we've picked all the digits.
                # Else todo > 0, and d must be 1:  all remaining
                # digits must be 0.
                digitcount[0] += todo
                # assert sum(c) == sum(digitcount) == width
                if digitcount == c:
                    yield total
                digitcount[0] -= todo
                continue
            # The tuples aren't identical, but may have leading digits
            # in common.  If, e.g., "9892" is a common prefix, then to
            # get a solution we must pick at least one 8, at least two
            # 9s, and at least one 2.
            if any(digitcount[j] < c[j] for j in range(d, 10)):
                # we're done picking digits >= d, but don't have
                # enough of them
                continue
            # for digits < d, force as many as we need for the prefix
            newtodo, newtotal = todo, total
            added = []
            for j in range(d):
                need = c[j] - digitcount[j]
                # assert need >= 0
                if need:
                    newtodo -= need
                    added.append((j, need))
            if newtodo < 0:
                continue
            for j, need in added:
                newtotal += pows[j] * need
                digitcount[j] += need
            yield from extend(d1, newtodo, newtotal)
            for j, need in added:
                digitcount[j] -= need
        digitcount[d] -= i

    digitcount = [0] * 10
    yield from extend(9, width, D(0))
    assert all(i == 0 for i in digitcount)

if __name__ == "__main__":
    from datetime import datetime
    start_t = datetime.now()
    width = total = 0
    while True:
        this_t = datetime.now()
        width += 1
        print("\nwidth", width)
        for t in nar(width):
            print("   ", t)
            total += 1
        end_t = datetime.now()
        print(end_t - this_t, end_t - start_t, total) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-03T15:05:52.093

我认为这个想法是产生相似的数字。例如， 61 与 16 相似，因为您只是求和

> 6^n +1^n

所以

> 6^n+1^n=1^n+6^n

通过这种方式，您可以减少大量的数字。例如在 3 位数字场景中，

> 121==112==211,

你明白了。您需要先生成这些数字。而且您需要生成这些数字，而无需实际从 0-n 迭代。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-06T16:06:42.913

**Python版本是：**

```
def generate_power_list(power):
return [i**power for i in range(0,10)]

def find_narcissistic_numbers_naive(min_length, max_length):
for number_length in range(min_length, max_length):

    power_dict = generate_power_dictionary(number_length)

    max_number = 10 ** number_length
    number = 10** (number_length -1)
    while number < max_number:

        value = 0
        for digit in str(number):
            value += power_dict[digit]

        if value == number:
            logging.debug('narcissistic %s ' % number)

        number += 1 
```

**递归解决方案：**

在此解决方案中，每个递归处理正在使用的数字数组中的单个数字，并尝试该数字的所有适当组合

```
def execute_recursive(digits, number_length):
index = len(digits)
if digits:
    number = digits[-1]
else:
    number = 0
results = []
digits.append(number)    

if len(digits) < number_length:
    while number < 10:
        results += execute_recursive(digits[:], number_length)
        number += 1
        digits[index] = number

else:
    while number < 10:
        digit_value = sum_digits(digits)
        if check_numbers_match_group(digit_value, digits):
            results.append(digit_value)
            logging.debug(digit_value)

        number += 1
        digits[index] = number

return results

def find_narcissistic_numbers(min_length, max_length):
for number_length in range(min_length, max_length):
    digits = []
    t_start = time.clock()
    results = execute_recursive(digits, number_length)
    print 'duration: %s for number length: %s' %(time.clock() - t_start, number_length) 
```

**自恋数字检查** 在基础版本中，当检查数字是否与数字匹配时，我们会遍历每个数字类型，以确保每种类型的数字相同。在这个版本中，我们添加了在进行全面检查之前检查数字长度是否正确的优化。

我预计这会对较小的数字长度产生更大的影响，因为随着数字长度的增加，分布中间往往会有更多的数字。结果在一定程度上支持了这一点：

1.  n=16：提高 11.5%
2.  n=19：提高 9.8%

```
def check_numbers_match_group(number, digits):
number_search = str(number)

# new in v1.3
if len(number_search) != len(digits):
    return False

for digit in digit_list:
    if number_search.count(digit[0]) != digits.count(digit[1]):
        return False

return True 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-03T14:55:35.557

如果它是自恋数，我认为您可以使用[多项式定理对检查进行一些优化。](http://en.wikipedia.org/wiki/Multinomial_theorem)
您可以计算 (a+b+c+..)^n- 非 n 次幂值
的总和，例如对于 n=2 您应该比较 x 和 (a+b)^2-2*a*b 其中 a 和b 是数字 x 的位数

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2016-07-29T16:29:54.377

```
'''We can use Nar() function to calculate the Narcissitic Number.'''

import math
def Nar(num):
   sum=0
   n=len(str(num))
   while n>0:
     temp=num%10
     sum=sum+math.pow(temp,n)
     num=num/10
   return sum
x=input()
y=Nar(x)
if x==y:
  print x,' is a Narcissistic number'
else:
 print x,' is not a Narcissistic number' 
```

# entity-framework - 测试 EF ConcurrencyCheck

> ID：14140961
> 
> 赞同：0
> 
> 时间：2013-01-03T14:36:08.307
> 
> 标签：entity-framework, unit-testing, concurrency

我有一个基础对象，其中包含一个 Version 属性，标记为 ConcurrencyCheck

```
public class EntityBase : IEntity, IConcurrencyEnabled
{
    public int Id { get; set; }
    [ConcurrencyCheck] 
    [Timestamp]
    public byte[] Version { get; set; }
} 
```

这可行，但是，我想编写一个测试以确保它不会被破坏。不幸的是，我似乎无法弄清楚如何编写不依赖于物理数据库的测试！

以及有效的相关测试代码，但使用数据库......

```
 protected override void Arrange()
    {
        const string asUser = "ConcurrencyTest1"; // used to anchor and lookup this test record in the db

        Context1 = new MyDbContext();
        Context2 = new MyDbContext();
        Repository1 = new Repository<FooBar>(Context1);
        Repository2 = new Repository<FooBar>(Context2);
        UnitOfWork1 = new UnitOfWork(Context1);
        UnitOfWork2 = new UnitOfWork(Context2);

        Sut = Repository1.Find(x => x.CreatedBy.Equals(asUser)).FirstOrDefault();

        if (Sut == null)
        {
            Sut = new FooBar
                {
                    Name = "Concurrency Test"
                };

            Repository1.Insert(Sut);
            UnitOfWork1.SaveChanges(asUser);
        }

        ItemId = Sut.Id;
    }

    protected override void Act()
    {
        _action = () =>
            {
                var item1 = Repository1.FindById(ItemId);
                var item2 = Repository2.FindById(ItemId);

                item1.Name = string.Format("Changed @ {0}", DateTime.Now);
                UnitOfWork1.SaveChanges("test1");

                item2.Name = string.Format("Conflicting Change @ {0}", DateTime.Now);
                UnitOfWork2.SaveChanges("test2"); //Should throw DbUpdateConcurrencyException
            };
    }

    [TestMethod]
    [ExpectedException(typeof(DbUpdateConcurrencyException))]
    public void Assert()
    {
        _action();
    } 
```

如何删除数据库要求？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:50:27.947

我建议将您的 MyDbContext 提取到一个 interface`IMyDbContext`中，然后创建一个 TestDbContext 类，该类也将按照您在那里的方式实现 SaveChanges，除了返回一个随机值（如 1）而不是实际保存到数据库中。

那时，您需要做的就是测试，事实上，所有实体的版本号都增加了。

或者您也可以执行[此处](http://odetocode.com/Blogs/scott/archive/2011/05/31/faking-dbcontext.aspx)或[此处](http://romiller.com/2012/02/14/testing-with-a-fake-dbcontext/)找到的示例。

[编辑：我实际上只是在这篇博](http://www.remondo.net/entity-framework-concurrency-checking-with-timestamp/)文中找到了一个使用 TimeStamp 进行并发检查的直接示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T18:11:31.977

我认为你不应该试图模拟这种行为来启用“纯”单元测试。有两个原因：

*   它需要大量模拟数据库行为的代码：以具有版本值的方式实现对象，缓存原始对象（以模拟存储），在更新时修改版本值，将版本值与原始值进行比较，当版本不同时抛出异常，甚至更多。所有这些代码都可能存在错误，更糟糕的是，可能与实际情况略有不同。

*   您将陷入循环推理：您专门为单元测试编写代码，然后……您编写单元测试来测试此代码。绿色测试表明一切正常，但未涵盖应用程序代码的基本部分。

这只是 linq 到难以（不可能）模拟的实体的众多方面之一。我在[这里](https://stackoverflow.com/a/13352779/861716)编制了这些差异的列表。

# javascript - 我的 Facebook 应用程序画布 URL 不是安全 URL

> ID：14140969
> 
> 赞同：2
> 
> 时间：2013-01-03T14:36:47.540
> 
> 标签：javascript, facebook-javascript-sdk

我在 Facebook 上创建了一个应用程序。我的网站是一个安全网站，并使用 https 打开。但生成的 Canvas URL 不是安全 URL。下面是生成的 URL [http://apps.facebook.com/mcadeveloper](http://apps.facebook.com/mcadeveloper)

问题：当用户未登录 Facebook 时，此 URL 没有响应。

有什么方法可以将 Canvas URL 更改为安全 URL？

# vim - 缓冲区加载和缓冲区保存触发命令

> ID：14140970
> 
> 赞同：1
> 
> 时间：2013-01-03T14:36:53.710
> 
> 标签：vim

我想编写一个`vim`插件，在编辑器中对文本进行某些文本转换，但我不希望这些转换在文件中可见。

例如，考虑`Gnarly`我要编辑的文本文件中的单词。加载时，我希望我的 vim 脚本将其更改为`G`，但是当我保存缓冲区时，我希望它扩展回`Gnarly`.

我的场景有点复杂，因为它会涉及到一个外部脚本，但我想看看它是如何被调用的。

此外，我希望能够将此更改仅应用于基于其扩展名的某些文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:57:37.223

见`:h autocmd`。您需要的事件是`BufRead`和`BufWrite`。

也许你会对`:h conceal`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T12:03:17.233

首先，定义您自己的文件类型，例如`gnarly`. 阅读`:help new-filetype`详细信息，但基本上是这个 autocmd：

```
:autocmd BufRead,BufNewFile *.gnarly        set filetype=gnarly 
```

然后，Vim 7.3 中引入的*隐藏*功能就是要走的路。编写语法脚本`~/.vim/syntax/gnarly.vim`。对于您的示例，它将包含：

```
:syntax keyword gnarlyConceal Gnarly conceal cchar=G 
```

但您也可以`:syntax match`用于更复杂的模式。

最后，默认情况下隐藏是关闭的。要打开它，请将以下命令放入`~/.vim/ftplugin/gnarly.vim`（您也可以将其放入语法文件中，但这种分离建议由 Vim 附带的所有完整插件完成）：

```
:setlocal conceallevel=1 
```

您也可以自定义`'concealcursor'`行为。如果您仍然需要帮助，请查看帮助页面或使用隐藏的现有插件。

# php - php - 函数中的变量迭代

> ID：14140972
> 
> 赞同：2
> 
> 时间：2013-01-03T14:36:56.050
> 
> 标签：php, function

我想要这样的结果

```
50+2+2+2+2 = 58 
```

但我得到了这样的结果

```
50
2
2
2
2 
```

这些是我的代码。

```
<?php

$height = 50;

echo $height;

function hey($x)
{
    return $height += $x;
}

$i = 4;

while($i != 0)
{
    echo "<br>".hey(2);

    $i--;
}

?> 
```

请注意，我的变量和循环的位置必须并且确实在该位置。

我需要对我的代码进行哪些更改。我是使用 php 函数的新手。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:39:25.203

您可以使用这样的`global`变量尝试：

```
function hey($x)
{
    global $height;
    return $height += $x;
} 
```

并且仅在调用函数之后打印变量高度。如果您没有将`global`变量放在函数内部的变量之前，那么您似乎在函数内部创建了一个新变量。使用 global 您告诉服务器获取您在函数外部创建的变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:40:03.260

在这个函数中：

```
function hey($x)
{
    return $height += $x;
} 
```

`$height`不在范围内，因此未定义。你应该把它传入：

```
function hey($x, $height)
{
    return $height += $x;
} 
```

然后像这样调用它：

```
hey(2, $height); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:40:56.800

这是范围问题：

```
function hey($x)
{
    global $height;
    return $height += $x;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T14:39:50.263

改成：

```
global $height; 
```

然后

```
while($i != 0)
{
    echo "+".hey(2);

    $i--;
}

echo "=" . $height; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T14:59:01.770

我不明白你想要的，但如果你需要这样的输出，请试试这个代码..

br 意思是到底部，所以我删除它。

```
<?php
    $height = 50;

    echo $height;

    function hey($x)
    {

        echo " + $x";

        return $x;

    }

    $i = 4;

    while($i != 0)
    {
        $height += hey(2);

        $i--;
    }

    echo " = $height";
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T15:10:48.887

这是在线演示： http: [//phpfiddle.org/main/code/6h1-x5z](http://phpfiddle.org/main/code/6h1-x5z)

```
 <?php
        function getResult($height = 50, $increment = 2, $times = 4){
         echo $height."+";
         $total = 0;
         for ($i = 0; $i < $times; $i++){
            $total += $increment;     
          if ($i != ($times-1)){
           echo $increment."+";
          }
          else{
           echo $increment." = ".($height+$total);
          }          
         }      
        }    
        //usage
        getResult(50,2,4);
//The print out: 50+2+2+2+2 = 58
    ?> 
```

# plot - 如何向implicit_plot 添加标记？

> ID：14140980
> 
> 赞同：0
> 
> 时间：2013-01-03T14:38:02.377
> 
> 标签：plot, gnuplot, maxima

该图是由 Maxima 中的以下命令生成的。如何在给定坐标处添加点/标记？

```
load(implicit_plot);
ip_grid_in:[15,15]$
implicit_plot ([x^2 = y^3 - 3*y + 1, y=x^2], [x, -4, 4], [y, -4, 4], 
           [gnuplot_preamble, "set zeroaxis"]); 
```

我曾尝试添加`[discrete, [[1.0,1.0], [1.0, 2.0]]]`到方程式列表中，但显然`implicit_plot`无法处理它（可能是因为它不是方程式）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:49:58.150

我不是最大值向导，但在 gnuplot 中，我会使用`set label`.

```
set label 1 at 1,1 point
set label 2 at 1,2 point 
```

根据您上面的内容，我认为您可以将其添加到序言中：

```
implicit_plot ([x^2 = y^3 - 3*y + 1, y=x^2], [x, -4, 4], [y, -4, 4], 
       [gnuplot_preamble, "set zeroaxis;set label 1 at 1,1 point;set label 2 at 1,2 point"]); 
```

这有点难看，但我敢打赌它有效:)

当然，`unset`如果 maxima 重新使用相同的 gnuplot 实例并且不`reset`隐式发出 a，您可能需要在后面的序言中使用这些标签：

```
unset label 1; unset label 2 
```

您可以做很多事情来自定义点的外观（颜色、点类型等）。在 gnuplot 中，`help label`如果您有兴趣，应该讨论这些选项。

# coldfusion - Application.cfc 中的自定义方法

> ID：14140981
> 
> 赞同：3
> 
> 时间：2013-01-03T14:38:07.833
> 
> 标签：coldfusion, coldfusion-9, application.cfc

我们有四种不同的环境：dev、q/a、test 和 prod。我决定将我们转换`Application.cfm`为`Application.cfc`并将它们放入我们的源代码控制中。有很多应用程序变量对每个环境都有不同的值。

我最终创建了几个 sql server 表来根据它们的类型存储这些环境变量。现在，我正在动态设置这些应用程序变量。

我的问题是我开始在 application.cfc 中添加自定义方法。我不是 100% 确定这是否是最好的地方。[例如：getAppLinks()、setAppLinks()]。否则，我可以创建一个新的 cfc 并从`Application.cfc`.

所有这些方法当前都在方法中被调用一次`onApplicationStart()`。

有人对在中实现自定义方法有任何意见`Application.cfc`吗？

谢谢

编辑：添加了一个自定义方法：

```
 <cffunction name="setUpAppDSNs" access="private" returnType="void" output="false">
    <cfargument name="dsn"        type="string" required="yes">
    <cfargument name="serverName" type="string" required="yes">
    <cfscript>
        var dsnNames   = structNew();           
        var qryAppDSNs = new Query(dataSource = '#arguments.dsn#',  
                                   sql        = ' SELECT dsnID, #arguments.serverName#Server, description
                                                  FROM cfAppDSN ').execute().getResult();  
         for (i = 1; i lte qryAppDSNs.recordCount; i++) {
            dsnNames['#qryAppDSNs.description[i]#'] = qryAppDSNs['#serverName#Server'][i]; 
         }

         StructAppend(application,dsnNames);
    </cfscript>
</cffunction> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:50:53.327

我有一个类似的问题，并通过使用我们的 globalFunctions.cfc 扩展 application.cfc 来解决它

```
<cfcomponent displayname="Application" 
     output="false" extends="shared.cfc.globalFunctions"> 
```

我不知道这是否对您有用，但它允许我们在多个不同的应用程序中使用相同的功能，而无需维护这些功能的多个副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T21:52:42.303

Application.cfc 只是一个 CFC。关于它的唯一“特殊”事情是：

1.  CF 每次请求都会实例化它的一个实例；
2.  巧合的是，ColdFusion 会在其中寻找一些事件处理程序和拦截器（onApplicationStart() 等）。

但它仍然只是一个 CFC。鉴于它被称为 Application.cfc 并忙于应用程序生命周期，因此将与应用程序生命周期相关的方法放入其中是有意义的 - 与组织任何 CFC 相同。

所以回答你的问题...... Application.cfc 正是你这些方法的正确位置。

# vertica - 在 Linux 上引导期间启动 Vertica 数据库

> ID：14140982
> 
> 赞同：5
> 
> 时间：2013-01-03T14:38:08.677
> 
> 标签：vertica

我在 Ubuntu 虚拟机中安装了 Vertica，我希望在引导期间启动一个特定的数据库，而不是我必须登录、打开 admintools 并从那里开始。

那么，是否有一个命令行可以让我在没有用户交互的情况下启动它？我应该在哪个运行级别添加它？另外，我使用特定用户来运行与 Vertica 相关的所有内容，是否需要在我的引导脚本中考虑到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-17T18:09:23.813

为什么不在你的 admintools “Set Restart Policy” 中设置重启策略（重启时重启） 你有 3 个选项： Never ksafe always -- 选择这个在启动时启动。

就是这样！ ![在此处输入图像描述](../Images/a6d8ae3614b92f1dc393792d1538cd48.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T14:16:28.373

admintools -t start_db

```
[dbadmin@hostname ~]$ admintools -t start_db --help
Usage: start_db [options]

Options:
  -h, --help            show this help message and exit
  -d DB, --database=DB  Name of database to be started
  -p DBPASSWORD, --password=DBPASSWORD
                        Database password in single quotes
  -i, --noprompts       do not stop and wait for user input(default false)
  -F, --force           force the database to start at an epoch before data
                        consistency problems were detected. 
```

# symfony - Symfony2 - 如何构造 id = 产品映射

> ID：14140987
> 
> 赞同：0
> 
> 时间：2013-01-03T14:38:18.107
> 
> 标签：symfony, doctrine

我想做这样的映射：

**用户**可以拥有多个**游戏**。**游戏**可以有多个**所有者**。

我在表中有`id`列，在`game`表中`game`有`user`列`ownership`。我如何连接这些字段？我想要`game`和表相关的字段`user`。`ownership``user``game`

我试过`OneToMany`and `ManyToMany`，但第一个导致生成额外的列。我**不想**在`game`表中插入任何内容。

--edit-- 我的@ManyToMany 代码：

```
/**
 * @ORM\ManyToMany(targetEntity="Ownership")
 * @ORM\JoinTable(name="ownership",
 *      joinColumns={JoinColumn(name="user", referencedColumnName="id")},
 *      inverseJoinColumns={JoinColumn(name="game", referencedColumnName="id")}
 *      )
 */ 
```

它会在 Symfony 的命令行中导致错误：

```
 [Doctrine\Common\Annotations\AnnotationException]                            
  [Semantical Error] Couldn't find constant JoinColumn, property GameShelf\Us  
  ersBundle\Entity\User::$ownership. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:16:17.070

当然，如果像你说的那样，你需要多对多的关系：

> 用户可以拥有多个游戏。游戏可以有多个所有者。

Doctrine 应该创建第三个表（它只能包含两个外键：game_id 和 owner_id）。

错误是因为 Doctrine 不知道是什么而引起`JoinColumn`的。您只是做了错误的注释，因为您忘记了（又一次！;)）在`JoinColumn``@ORM. 正确的注释应如下所示：

```
/**
 * @ORM\ManyToMany(targetEntity="Ownership")
 * @ORM\JoinTable(name="ownership",
 *      joinColumns={@ORM\JoinColumn(name="user", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="game", referencedColumnName="id")}
 *      )
 */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:47:05.250

听起来你需要引入一个新的实体（比如 OwnedGame）来保持游戏和所有者之间的联系（可能还有它自己的属性，比如它被购买的时间等）。

那么 OwnedGame 将是带有 Game 和 Owner 的 ManyToOne，Game 和 Owner 都不需要包含新列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:51:49.527

你对你想要的东西的描述根本不合适。一方面，您希望仅在用户和游戏之间建立关系，并且只在游戏和所有者之间建立关系。

但另一方面，你说用户和所有者在某种程度上是相关的，但游戏和用户不是。

您应该通读 [http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#many-to-many-unidirectional](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#many-to-many-unidirectional) 并尝试找到您真正需要的内容。我会推荐与连接表的多对多关系。因此，您不必处理表中的其他字段

# ruby-on-rails - 使用 has_many 时连接模型中的验证失败：通过

> ID：14140994
> 
> 赞同：12
> 
> 时间：2013-01-03T14:38:52.977
> 
> 标签：ruby-on-rails, activerecord

我的完整代码可以在[https://github.com/andyw8/simpleform_examples看到](https://github.com/andyw8/simpleform_examples)

我有一个`ProductCategory`带有以下验证的连接模型：

```
validates :product, presence: true
validates :category, presence: true 
```

我的`Product`模型具有以下关联：

```
has_many :product_categories
has_many :categories, through: :product_categories 
```

当我尝试创建具有类别的新产品时，`@product.save!`控制器中的调用失败并显示：

```
Validation failed: Product categories is invalid 
```

当我删除验证时，一切正常并且连接模型被正确保存。

我正在使用`strong_parameters`，但我*认为*这不应该与这个问题有关。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T09:48:03.833

这是回调链中的“竞赛条件”。

当您创建产品时，它在保存之前没有任何 id，因此`product`没有`ProductCategory`.

```
Product.new(name: "modern times", category_ids:[1, 2]) #=> #<Product id: nil > 
```

在验证的那个阶段（保存之前），`ProductCatgory`不能将任何 id 分配给它的外键`product_id`。

这就是您进行关联验证的原因：因此验证发生在整个事务的范围内

更新：正如评论中所说，您仍然无法确保产品/类别的存在。有很多方法取决于您为什么要这样做（例如，通过某种形式直接访问 ProductCategory）

*   您可以创建一个标志来拥有`validates :product, presence: true, if: :direct_access?`
*   或者如果您只能更新它们：`validates :product, presence: true, on: "update"`
*   首先创建您的产品（在 products_controller 中）并在之后添加类别

...但实际上这些都是简单的妥协或解决方法`@product.create(params)`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-07-31T16:02:52.463

`inverse_of`已记录在您的加入模型上指定以解决此问题：

[https://github.com/rails/rails/issues/6161#issuecomment-6330795](https://github.com/rails/rails/issues/6161#issuecomment-6330795) [https://github.com/rails/rails/pull/7661#issuecomment-8614206](https://github.com/rails/rails/pull/7661#issuecomment-8614206)

**简化示例：**

```
class Product < ActiveRecord::Base
  has_many :product_categories, :inverse_of => :product
  has_many :categories, through: :product_categories
end

class Category < ActiveRecord::Base
  has_many :product_categories, inverse_of: :category
  has_many :products, through: :product_categories
end

class ProductCategory < ActiveRecord::Base
  belongs_to :product
  belongs_to :category

  validates :product, presence: true
  validates :category, presence: true
end

Product.new(:categories => [Category.new]).valid? # complains that the ProductCategory is invalid without inverse_of specified 
```

改编自：[https ://github.com/rails/rails/issues/8269#issuecomment-12032536](https://github.com/rails/rails/issues/8269#issuecomment-12032536)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T04:24:11.010

很确定你只需要更好地定义你的关系。我仍然可能错过了一些，但希望你能明白。

```
class Product < ActiveRecord::Base
  include ActiveModel::ForbiddenAttributesProtection

  validates :name, presence: true
  validates :description, presence: true
  validates :color_scheme, presence: true

  belongs_to :color_scheme

  has_many :product_categories, inverse_of: :product
  has_many :categories, through: :product_categories
end

class ProductCategory < ActiveRecord::Base
  belongs_to :product
  belongs_to :category

  validates_associated :product
  validates_associated :category

  # TODO work out why this causes ProductsController#create to fail
  # validates :product, presence: true
  # validates :category, presence: true
end

class Category < ActiveRecord::Base
  has_many :product_categories, inverse_of: :category
  has_many :products, through: :product_categories
end 
```

# javascript - 显示 Chrome 扩展的通知

> ID：14140995
> 
> 赞同：0
> 
> 时间：2013-01-03T14:38:55.790
> 
> 标签：javascript, google-chrome-extension, notifications

我刚刚构建了一个简单的 chrome 扩展来显示特定关键字的推文。它工作正常。如果用户单击它显示的扩展图标，则每次有新推文可用时。

但是有没有办法在扩展图标中显示一些通知以指示检索到新数据？

这是我的javascript代码

```
var req=null;
window.onload = function() {
    req = new XMLHttpRequest();
    req.open("GET", "http://search.twitter.com/search.atom?q=20SongsThatILike", true);
    req.onload = showTweets;
    req.send(null);
}

function showTweets() {
    var title=req.responseXML.getElementsByTagName('title')[1].childNodes[0];
    var author=req.responseXML.getElementsByTagName('author')[1].childNodes[0].childNodes[0];

    document.body.appendChild(title);
} 
```

这是我的html代码

```
<html>
  <head>
    <title>Getting Started Extension's Popup</title>
    <style>
      body {
        min-width:357px;
        overflow-x:hidden;
      }

      img {
        margin:5px;
        border:2px solid black;
        vertical-align:middle;
        width:75px;
        height:75px;
      }
    </style>

    <!-- JavaScript and HTML must be in separate files for security. -->
    <script src="script.js"></script>
  </head>
  <body>
  </body>
</html> 
```

这是 manifest.json

```
{
  "name": "My First Extension",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The first extension that I made.",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "permissions": [
    "http://search.twitter.com/*"
  ]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:32:47.673

您可以使用

```
chrome.browserAction.setBadgeText({text: '<number_of_new_teets>'}); 
```

此代码将在 y 的图标上放一个数字

# php - 如何将php脚本放入php脚本中的html脚本中

> ID：14140997
> 
> 赞同：2
> 
> 时间：2013-01-03T14:38:56.633
> 
> 标签：php, html

我知道我的问题有点令人困惑，但我的意思是我想在 PHP 'echo' 中显示一个 HTML 表单。所以我的整个 HTML 代码都在我的 php 打开和关闭标签中，然后在我的 HTML 脚本中，我想要一个 php 代码，但我收到一条错误消息：

解析错误：语法错误，意外的 'echo' (T_ECHO)，期待 ',' 或 ';'

我的代码是这样的：

```
<?php
   echo '<form method="post" id="customForm" action="add_assessment.php">
    <table>
     // this line is where I get the error
    <input type="hidden" name="res_id" value='echo($_GET['res_id']);' />
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T14:42:31.630

您可以`.`在 PHP 中使用来连接字符串。所以你可以这样写：

```
<?php
   echo '<form method="post" id="customForm" action="add_assessment.php">
    <table>
     // this line is where I get the error
   <input type="hidden" name="res_id" value="'.$_GET['res_id'].'" />';
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T14:42:50.057

`.`可用于连接字符串。您还可以使用`,`which 将它们作为单独的回声发送。

```
<?php
   echo '<form method="post" id="customForm" action="add_assessment.php">
    <table>
    <input type="hidden" name="res_id" value="' . intval($_GET['res_id']) . '" />';
?> 
```

不要忘记 XSS 保护。将`intval()`用户输入从 $_GET 转换为整数，确保它不是恶意的。这似乎是您系统的重要 ID。您应该确保更改它不会破坏您的代码，如果会，请考虑改用[Sessions](http://www.tizag.com/phpT/phpsessions.php)。

XSS 或跨站点脚本攻击是指攻击将 javascript 注入您的页面以试图使其以不同方式工作或重定向用户。在这种情况下，攻击者可以将此表单发送到不同的位置。如果此表格包含信用卡信息、其他个人信息或您的申请中的内部数据；攻击者只需将用户链接到包含错误数据的表单即可访问该信息。

如果设置正确，用户可能甚至都不知道他们的信息被盗了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:40:54.633

```
<?php
   echo '<form method="post" id="customForm" action="add_assessment.php">
    <table>
    <input type="hidden" name="res_id" value="' . $_GET['res_id'] . '" />';
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T14:41:28.363

干得好：

```
<?php
   echo '<form method="post" id="customForm" action="add_assessment.php">
    <table>
    <input type="hidden" name="res_id" value="' . $_GET['res_id'] . '" />';
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T14:45:11.473

在这里，您可以从官方 php 文档中找到如何使用 php-tag 的说明：http: [//php.net/manual/en/language.basic-syntax.phpmode.php](http://php.net/manual/en/language.basic-syntax.phpmode.php)