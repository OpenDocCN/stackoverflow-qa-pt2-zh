# StackOverflow 问答 14343000-14343999

# html - 允许 TinyMCE 中的标签

> ID：14343006
> 
> 赞同：1
> 
> 时间：2013-01-15T17:10:33.393
> 
> 标签：html, tinymce, html5-canvas

我有一个使用 tinyMCE 的现有站点（我没有构建它）。我试图避免将其撕掉并与其他东西一起使用，所以我想我会尝试看看是否有人以前做过。

概述：

应用程序中的页面用于编辑测验/作业的问题。99% 的问题都是非常标准的东西：文本框、文本区域等。但是，剩下的东西，需要有画布。为这些分配编写了一个漂亮的小图形实用程序，但是只要有带有`<canvas>`标签的东西，我们就需要手动编辑数据库中的数据。

问题：

有没有办法告诉 TinyMCE 允许`<canvas>`标签在保存时只存在而不被删除？我不一定希望 TinyMCE 对标签做任何事情，我只是希望它留在那里，这样我们就不必在每次有人想要更改值时编辑数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:16:57.797

这可以使用 tinymce 配置轻松完成。查看设置[valid_elements](http://www.tinymce.com/wiki.php/Configuration%3avalid_elements)和[valid_children](http://www.tinymce.com/wiki.php/Configuration%3avalid_children)。您将需要添加`canvas`到 valid_elemnts 并使用该`valid_children`设置定义有效的子代。

# sql - 如何在 R 中表示非规范化表？

> ID：14343011
> 
> 赞同：2
> 
> 时间：2013-01-15T17:10:48.747
> 
> 标签：sql, r, dataframe

给定分层数据，如下所示：

```
nodes <- data.frame(node_id=c(1,2,3),node_label=c('a','a','b'))
arcs <- data.frame(arc_id=c(1,2),from_node_id=c(1,2),to_node_id=c(2,3)) 
```

`R`以下最接近的解决方案是`SQL VIEW`什么？

（所以**不仅仅是**一个新的data.frame，还有确保数据完整性的机制，如`SQL VIEW`）

```
CREATE VIEW AS
SELECT
    arcs.*,
    from_node.node_label,
    to_node.node_label
FROM
    arcs
    JOIN nodes AS from_node ON
        arcs.from_node_id = from_node.node_id
    JOIN nodes AS to_node ON
        arcs.to_node_id = to_node.node_id; 
```

或者作为一个更好的定义，如果`merge()`没有循环或临时变量，以下如何可能？

```
merge(arcs,data.frame(label='e'),by.x='from_node_label',by.y='label') 
```

我试过的：

*   如果我试图直接访问这两个数据帧，如下所示，许多矩阵运算就会变成循环。

    ```
    nodes[nodes$node_id=arcs[i,]$from_node_label,] 
    ```

*   如果使用嵌套数据框，例如`arcs$from_node <- node[c(1,2),]`，这看起来很有希望，但数据需要手动更新，并且仍然不允许合并

    ```
    > merge(arcs,data.frame(label='e'),by.x='from_node$label',by.y='label')
    Error in fix.by(by.x, x) : 'by' must specify uniquely valid column(s) 
    ```

*   最后，我使用以下两个函数将数据框展开为非规范化的“视图”，并在完成后折叠它。唯一的问题是我仍然必须手动保证受影响的列在数据框“扩展”时不会改变。

    ```
    expand_arcs <- function(nodes,arcs) {
        from_nodes <- nodes
        names(from_nodes) <- paste('from',names(from_nodes),sep='_')

        to_nodes <- nodes
        names(to_nodes) <- paste('to',names(to_nodes),sep='_')

        arcs <- merge(merge(
            arcs,
            from_nodes),
            to_nodes)

        return(list(nodes,arcs))
    }

    collapse_arcs <- function(nodes,arcs) {
        arcs <- arcs[c('arc_id','from_node_id','to_node_id')]

        return(list(nodes,arcs))
    } 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T17:23:42.633

您可以在 sql 中翻译您的代码，但更容易使用`sqldf`包，因为您似乎对 sql 很满意

```
library(sqldf)

sqldf("SELECT   arcs.*, from_node.node_label, to_node.node_label
       FROM  arcs
       JOIN nodes AS from_node 
            ON arcs.from_node_id = from_node.node_id
       JOIN nodes AS to_node 
            ON arcs.to_node_id = to_node.node_id;")

 arc_id from_node_id to_node_id node_label node_label
1      1            1          2          a          a
2      2            2          3          a          b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T17:24:21.900

我倾向于同意@agstudy。但是在基础 R 中，您只需`merge`分两步执行此操作：

```
foo = merge(arcs, nodes, by.x='from_node_id', by.y='node_id')
bar = merge(foo, nodes, by.x='to_node_id', by.y='node_id')

bar
#   to_node_id from_node_id arc_id node_label.x node_label.y
# 1          2            1      1            a            a
# 2          3            2      2            a            b 
```

您可以相应地重命名。如果您使用该`data.table`包并使用键控 data.tables 执行此合并，它将非常快。

# javascript - 在 GLSL 中嵌入 ARB 程序集

> ID：14343012
> 
> 赞同：0
> 
> 时间：2013-01-15T17:10:50.353
> 
> 标签：javascript, glsl, webgl

我有一些用 ARB 程序集编写的着色器脚本，它们应该与 OpenGL ES 2.0 一起使用。现在我必须将应用程序移植到浏览器，并且我正在研究使用 WebGL。WebGL 不接受预编译脚本。所以我正在寻找重用汇编脚本的最简单方法。我想知道是否可以在 GLSL 中嵌入程序集片段，就像我们在 C 中嵌入程序集一样。正如您可能从我的问题中猜到的那样，我是一个 GL 菜鸟。我的问题甚至有意义吗？有没有办法让 WebGL 程序接受汇编脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:35:44.140

你没有。GLSL 不会以任何方式、形状或形式使用“ARB”或与之交互。此外，WebGL 无法访问 ARB 程序集；它*仅*由桌面 OpenGL 使用。

使用它们的方法是在 GLSL 中重写它们。

# cakephp - cakephp 你如何在模型中调用控制器的动作

> ID：14343014
> 
> 赞同：0
> 
> 时间：2013-01-15T17:11:00.677
> 
> 标签：cakephp, model, controller, after-save

我在消息模型中的 afterSave 中工作。我想在每次创建消息时发送一封电子邮件以通知收件人他们的新消息。我在消息控制器中有一个发送电子邮件的操作，我想从 afterSave 中调用它。

我试过这样称呼它：

```
function afterSave($created){
    if($created){
        $this->msgToEmail($this->data);
    }
} 
```

我收到一个 sql 错误，因为它在模型内部而不是控制器中查找函数。

如何声明模型函数？是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T17:44:52.683

您在其他模型中使用模型方法，永远不要使用控制器！

所以让你的代码成为一个模型方法。那么您可以轻松使用它。

在 1.3 中，您现在可以在模型方法中破解组件。直到您最终可以升级到 2.x。

```
App::import('Component', 'Email');
$this->Controller = new Controller();
$this->Email = new EmailComponent(null);
$this->Email->initialize($this->Controller);
// from/to/subject/...
$this->Controller->set('text', $this->data['Model']['content']);
return $this->Email->send(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:20:14.433

要声明模型方法，只需将其放入您的模型（而不是控制器）中。

在您的模型文件中：

```
public function msgToEmail($data) {
    // code to send your email...
} 
```

另外，不要忘记`CakeEmail`在模型文件的顶部导入：

```
App::uses('CakeEmail', 'Network/Email'); 
```

# excel - Excel 宏：从表到列

> ID：14343015
> 
> 赞同：0
> 
> 时间：2013-01-15T17:11:01.600
> 
> 标签：excel, vba

我有一个包含多个行和列的 Excel 表，如下所示：

```
1 2 3
4 5 6
7 8 9 
```

我需要编写宏，它将我的所有数据转换为一列并将其放入`sheet2`

```
1
2
3
4
5
6
7
8
9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:13:18.700

我在这个网站上找到了一个公式，可以满足你的要求： [http ://www.cpearson.com/excel/TableToColumn.aspx](http://www.cpearson.com/excel/TableToColumn.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:25:55.983

```
Sub Macro1()

    Dim StartTable As Range     ' The original table of data
    Dim RNdx As Long            ' Row index
    Dim CNdx As Long            ' Column index

    Dim TabeRowIndex As Long        ' Row number of Range("StartTable")
    Dim TableColumnIndex As Long    ' Column number of Range("StartTable")
    Dim N As Long               ' Index into ColumnData
    Dim WS As Worksheet         ' Worksheet reference

    '''''''''''''''''''''''''''
    ' Initialize the variables.
    '''''''''''''''''''''''''''
    Set ColumnData = Range("ColumnData")
    Set StartTable = Range("StartTable")
    TabeRowIndex = Range("StartTable").Row
    TableColumnIndex = Range("StartTable").Column
    Set WS = Worksheets("Sheet1")
    N = 0

    ''''''''''''''''''''''''''''''''''''''
    ' Loop across then down filling
    ' cells with element N of ColumnData.
    ''''''''''''''''''''''''''''''''''''''
    For RNdx = TabeRowIndex To (TabeRowIndex + (StartTable.Rows.Count))
        For CNdx = TableColumnIndex To TableColumnIndex + StartTable.Columns.Count - 1
            N = N + 1
            ColumnData.Cells(N, 1) = WS.Cells(RNdx, CNdx).Value
        Next CNdx
    Next RNdx

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-29T13:02:35.990

使用公式的替代答案`sheet2`：（
您的列数为 3 - 您可以更改它）

```
=INDIRECT(CONCATENATE("'Sheet1'!"; ADDRESS(FLOOR(ROW()-1; 3)/3+1; MOD(ROW()-1; 3)+1))) 
```

# windows - 检查当前用户会话中是否有进程正在运行

> ID：14343018
> 
> 赞同：2
> 
> 时间：2013-01-15T17:11:11.380
> 
> 标签：windows, powershell, process, windows-7-x64

我需要帮助创建一个查找正在运行的进程的 powershell 脚本，如果它不存在则启动它。现在，我拥有的 VB 脚本会查找进程并启动，但由于 Windows 7 快速用户切换，该进程可以在任何用户会话中运行，它使脚本认为它在当前用户会话中运行。非常感谢任何帮助或指示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T19:16:42.220

比较简单的代码：

```
if (
    Get-WmiObject -Class Win32_Process -Filter "Name = 'explorer.exe'" | 
        where { 
            $_.GetOwner().User -eq $env:USERNAME 
        }
    ) { 
    "explorer is running for $env:username" 
} 
```

这应该忽略为当前用户以外的任何其他用户运行的此进程。只需将 explorer.exe 替换为实际进程并更改逻辑以满足您的需要。

# windows - 如何调试 vbscript ShellExecute

> ID：14343019
> 
> 赞同：1
> 
> 时间：2013-01-15T17:11:12.160
> 
> 标签：windows, vbscript, runas

我有一个小的 vbs 脚本：

```
Set UAC = CreateObject("Shell.Application")
UAC.ShellExecute "C:\bin\addtopath.bat",  chr(34) & "C:\bin" & chr(34), "", "runas", 1 
```

`C:\bin\addtopath.bat`存在，我从[这个问题](https://stackoverflow.com/questions/13414496/how-do-you-pass-parameters-containing-spaces-in-vbs)中得到了一些想法。这里发生的是 a`cmd`打开并立即关闭，我无法识别它所说的内容。我怎么知道出了什么问题？

`C:\bin\addtopath.bat`：

```
pause
echo %1
pause
:: BatchGotAdmin
:-------------------------------------
REM  --> Check for permissions
>nul 2>&1 "%SYSTEMROOT%\system32\cacls.exe" "%SYSTEMROOT%\system32\config\system"

REM --> If error flag set, we do not have admin.
if '%errorlevel%' NEQ '0' (
    echo Requesting administrative privileges...
    goto UACPrompt
) else ( goto gotAdmin )

:UACPrompt
    echo Set UAC = CreateObject^("Shell.Application"^) > "%temp%\getadmin.vbs"
    echo UAC.ShellExecute "%~s0",  chr(34) ^& %1 ^& chr(34), "", "runas", 1 >> "%temp%\getadmin.vbs"
    pause
    "%temp%\getadmin.vbs"
    exit /B

:gotAdmin
    if exist "%temp%\getadmin.vbs" ( del "%temp%\getadmin.vbs" )
    pushd "%CD%"
    CD /D "%~dp0"
:--------------------------------------
echo %1
pause
setenv -a PATH %1

pause 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:42:04.323

你在调用什么批处理文件？你为什么不在 VBSCRIPT 中做所有事情呢？

调试您的 vbscript 可以使用调试器通过使用 /D /X 参数来完成

```
 cscript /d /x file.vbs
    wscript /d /x file.vbs 
```

调试批处理文件是一场噩梦。以下是调试批处理文件的一些帮助： [http ://www.robvanderwoude.com/battech_debugging.php](http://www.robvanderwoude.com/battech_debugging.php)

# python - serialport2 中的 python bytes() 和 node.js

> ID：14343022
> 
> 赞同：0
> 
> 时间：2013-01-15T17:11:16.707
> 
> 标签：python, node.js, serial-port

我正在尝试让 python 脚本使用 pyserial 写入串行端口，使用 serialport2 写入 node.js。

我对`bytes()`python很困惑，不知道有人能帮帮我吗？

Python：

```
ser.write(bytes(chr(160))
ser.write(bytes(chr(157)) 
```

那么如何在 node.js 中执行此操作？

node.js 中使用的 serialport2 位于[此处](https://github.com/joeferner/node-serialport2/blob/master/README.md)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:48:50.140

可能您`String.fromCharCode(code)`在 JS 中搜索将字符代码转换为字符串。

用 serialport2 试试这个：

```
port.write(String.fromCharCode(160, 157)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:49:08.903

从[node-serialport2 自述文件](https://github.com/joeferner/node-serialport2/blob/master/README.md)：

> **写（缓冲区，[回调]）**
> 
> 将数据写入串行端口。
> 
> **论据**
> 
> *   `buffer`- 这可以是节点缓冲区对象或字符串。
> *   `callback(err, byteWritten)`- 写入字节后调用的回调。

因此，您可以提供一个字符串对象或 Buffer 对象作为参数。一个[Buffer 对象](http://docs.nodejitsu.com/articles/advanced/buffers/how-to-use-buffers)可能会做你想做的事（发送整数值）：

> `var buffer = new Buffer([ 8, 6, 7, 5, 3, 0, 9]);`
> 
> 这会将缓冲区初始化为此数组的内容。请记住，数组的内容是表示字节的整数。

对于您的数据，它将是：

```
var buffer = new Buffer([160, 157]); 
```

顺便说一句，您不需要在 Python 中使用 PySerial 进行任何特殊的转换。从[PySerial API 文档](http://pyserial.sourceforge.net/pyserial_api.html)：

> **写（数据）**
> 
> *   参数：`data`– 要发送的数据。
> *   返回： 写入的字节数。
> *   引发 SerialTimeoutException：如果为端口配置了写入超时并且超过了时间。
> 
> 将字符串数据写入端口。
> 
> *在 2.5 版更改：在可用时接受 bytes 和 bytearray 实例（Python 2.6 和更新版本），否则接受 str 实例。*

请注意“2.5 版中的更改”说明。

# android - 子项的不同布局

> ID：14343024
> 
> 赞同：0
> 
> 时间：2013-01-15T17:11:19.093
> 
> 标签：android, expandablelistview

我正在开发一个包含可扩展列表视图的应用程序。

在我的可扩展列表视图中，我想为每个子视图设置不同的布局。

我的自定义可扩展列表适配器如下所示：

```
public Object getGroup(int arg0) 
{
    // TODO Auto-generated method stub
    return menu[arg0];
}

public int getGroupCount()
    {
    // TODO Auto-generated method stub
    return menu.length;
}

public long getGroupId(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

public View getGroupView(int position, boolean arg1, View view, ViewGroup parent) 
{
    if(view==null)
    {
        view = inflater.inflate(R.layout.edit_head, null);

    }
    TextView head = (TextView)view.findViewById(R.id.list_item_text_view_head);
    head.setText(menu[position]);
    return view;
}

public Object getChild(int arg0, int arg1) {
    // TODO Auto-generated method stub
    return null;
}

public long getChildId(int arg0, int arg1) {
    // TODO Auto-generated method stub
    return 0;
}

public View getChildView(int groupPosition, int childPosition, boolean arg2, View childView,
        ViewGroup parent) 
{
    if(childView==null)
    {
        childView = inflater.inflate(R.layout.edit_child, null, false);
    }

    return childView;
} 
```

但是单击它不显示其子级的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:35:03.890

You can create you own adapter:

```
 public class ExpandableAdapter extends BaseExpandableListAdapter {

        @SuppressWarnings("unused")
        private Context context;
        private ArrayList<String> groups;
        private ArrayList<ArrayList<Expand>> expand;
        private LayoutInflater inflater;

        public ExpandableAdapter(Context context, 
                            ArrayList<String> groups,
                            ArrayList<ArrayList<Expand>> expand) { 
            this.context = context;
            this.groups = groups;
            this.expand = expand;
            inflater = LayoutInflater.from( context );
        }
        public Object getChild(int groupPosition, int childPosition) {
            return expand.get( groupPosition ).get( childPosition );
        }

        public long getChildId(int groupPosition, int childPosition) {
            return (long)( groupPosition*50+childPosition );
        }
        public View getChildView(int groupPosition, int childPosition, boolean isLastChild, 
                View convertView, ViewGroup parent) {
            View v = null;
            if( convertView != null )
                v = convertView;
            else
                v = inflater.inflate(R.layout.child_row, parent, false); 
            Expand c = (Expand)getChild( groupPosition, childPosition);
            TextView color = (TextView)v.findViewById( R.id.grp_child_primero);
            if( color != null )
                color.setText( c.getTitulo());
            TextView rgb = (TextView)v.findViewById( R.id.grp_child_segundo);
            if( rgb != null )
                rgb.setText( c.getDato());
            return v;
        }

        public int getChildrenCount(int groupPosition) {
            return expand.get( groupPosition ).size();
        }
        public Object getGroup(int groupPosition) {
            return groups.get( groupPosition );        
        }
        public int getGroupCount() {
            return groups.size();
        }

        public long getGroupId(int groupPosition) {
            return (long)( groupPosition*50 );
        } 
        public View getGroupView(int groupPosition, boolean isExpanded, View convertView, 
                                                                            ViewGroup parent) {
            View v = null;
            if( convertView != null )
                v = convertView;
            else
                v = inflater.inflate(R.layout.group_row, parent, false); 
            String gt = (String)getGroup( groupPosition );
            TextView expandGroup = (TextView)v.findViewById( R.id.grp_child_primero);
            if( gt != null )
                expandGroup.setText( gt );
            return v;
        }
        public boolean hasStableIds() {
            return true;
        }
        public boolean isChildSelectable(int groupPosition, int childPosition) {
            return true;
        } 
        public void onGroupCollapsed (int groupPosition) {} 
        public void onGroupExpanded(int groupPosition) {}

    } 
```

With one xml for rows:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/negro">

    <TextView android:id="@+id/grp_child_primero"
         android:focusable="false"
         android:textSize="20sp"
         android:textStyle="bold"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:gravity="center_vertical"
         android:background="@drawable/negro"/>

    <TextView android:id="@+id/grp_child_segundo"
         android:focusable="false"
         android:textSize="18sp"
         android:textStyle="normal"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:gravity="center_vertical"
         android:background="@drawable/negro"/>

</LinearLayout> 
```

And other for groups:

```
<?xml version="1.0" encoding="utf-
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/negro">

    <TextView android:id="@+id/grp_child_primero"
         android:layout_width="wrap_content"
         android:paddingLeft="30dp"
         android:textSize="20sp"
         android:textColor="@drawable/blanco"
         android:textStyle="normal"
         android:layout_height="wrap_content"
         android:gravity="center_horizontal|center_vertical"
         android:background="@drawable/negro"/>

</LinearLayout> 
```

And after that:

```
ExpandAdapter youadapter = new ExpandAdapter(getApplicationContext(), 
        namesGroups, nameChilds);
setListAdapter(youadapter); 
```

Where namesGroups and nameChilds are list the data for rows and groups. With the method setListAdapter, you can set the adapter to the ExpandableListActivity ;) And finally Expand class is a simple POJO:

```
public class Expand {
    public String titulo = null;
    public String dato = null;

    public Expand( String titulo, String dato) {
        this.titulo = titulo;
        this.dato = dato;
    }
    public String getTitulo() {
        return titulo;
    }
    public String getDato() {
        return dato;
    }
} 
```

Looks primarily as getChildView method (in ExpandableAdapter class) is implemented, and some inside if you do not think it is complicated to implement what you want

# excel - Excel 电子表格 - 如果 B 列中的电子邮件地址存在于 A 列中，则在 C 列中说“找到匹配项”

> ID：14343025
> 
> 赞同：2
> 
> 时间：2013-01-15T17:11:24.827
> 
> 标签：excel

我在 Excel 电子表格中有两列电子邮件地址。我需要知道 A 列中是否存在 B 列中的电子邮件地址。

如果 A 列中确实存在 B 列中的电子邮件地址，我希望它在 C 列中相应的电子邮件地址旁边显示“找到匹配”。

我正在玩一些我在 StackOverflow 上找到的东西，看起来像：

```
=IF(ISNA(VLOOKUP 
```

但我无法让它工作（我不是 Excel 的完整新手，但不幸的是我不太熟悉更高级的公式）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T17:15:03.563

你可以试试这个（在`C1`）：

```
=IF(COUNTIF(A:A,B1)>0, "Match Found","") 
```

从一开始`C1`，这将接收电子邮件`B1`并计算它在列中出现的次数`A`。如果结果> 0，`Match Found`将显示；否则，单元格将为空 ( `""`)。

尽管您可以找到它们的许多用途，但通常 a`VLOOKUP`将用于您想要查找一个值并在同一行但在不同列中返回相应值的情况（例如，如果您有一个电子邮件表地址和名字，以及单独的电子邮件列表，您可以使用`VLOOKUP`单独的电子邮件列表旁边的 来“查找”主表中的电子邮件，找到匹配行，然后返回表中的第二列，其中将是名称）。[这](http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx)是官方文档。

# javascript - 设置子节点的属性

> ID：14343040
> 
> 赞同：1
> 
> 时间：2013-01-15T17:11:52.090
> 
> 标签：javascript, xml

我如何将属性添加到“testTwo”标签？Javascript菜鸟..

```
 var XML = document.createElement("test");
        var Node = document.createElement("testOne");
        Node.setAttribute("id", "0");
        Node.setAttribute("random", "0"); 
        Node.appendChild( document.createElement("testTwo"));

        XML.appendChild(Node);

        console.log(XML.innerHTML); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:14:59.453

预先创建`testTwo`节点。示例代码是：

```
var XML = document.createElement("test");
var Node = document.createElement("testOne");
Node.setAttribute("id", "0");
Node.setAttribute("random", "0"); 
var testtwo = document.createElement("testTwo");
testtwo.setAttribute("attr", "attrval");
Node.appendChild(testtwo);

XML.appendChild(Node);

console.log(XML.innerHTML); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:17:37.763

您对第一个节点有正确的技术。对第二个节点使用相同的东西。在将其附加到某处之前创建您的第二个节点（testTwo）。创建具有您想要与其关联的所有属性的节点。然后，一旦按照您想要的方式完成所有操作，然后`append`将其发送到您想要的父节点。

这将是代码的样子。

```
var XML = document.createElement("test");
var Node = document.createElement("testOne");
Node.setAttribute("id", "0");
Node.setAttribute("random", "0"); 

//Create the 2nd node first
var node2 = document.createElement("testTwo");
//add the attributes you want for this node
node2.setAttribute("key", "value");
node2.setAttribute("key2", "value2");
//once you're done append it.
Node.appendChild( node2 );

XML.appendChild(Node);

console.log(XML.innerHTML); 
```

# backbone.js - 是否可以选择使用 Syphon 序列化的特定形式？

> ID：14343044
> 
> 赞同：0
> 
> 时间：2013-01-15T17:12:04.453
> 
> 标签：backbone.js

[Siphon](https://github.com/derickbailey/backbone.syphon)的`serialize`方法接收一个视图和一组选项作为参数。如果该视图有多个表单，它将扫描它并序列化它找到的*第一个表单。*但我有几个表单的视图，我想选择它应该序列化的特定表单。使用 Syphon 可以吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T18:24:07.980

如果您使用的是 jQuery，则非常简单：

```
Backbone.Syphon.serialize($("#form_id")[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:20:49.457

实际上，我可以使用 Underscore.js 找到绕过 Syphon 的方法：

```
 var serializeForm = function(el) {
    var result = {};
    _.each($(el).serializeArray(), function(e){
      if (e.value) result[e.name] = e.value
    });
    return result;
  } 
```

此函数将根据表单字段生成一个 javascript 对象。结果中仅包含具有值的字段。

# asp.net - 在实现自定义 oracle 配置文件提供程序 asp.net vb.net 时遇到问题

> ID：14343050
> 
> 赞同：1
> 
> 时间：2013-01-15T17:12:20.343
> 
> 标签：asp.net, vb.net, oracle, profile, provider

我正在尝试为 ASP.net webforms oracle 项目实现自定义配置文件类。

这是我使用 VB.net 的基本配置文件类

```
Public Class BaseProfile
    Inherits ProfileBase

    Public Shared Function GetUserProfile(ByVal un As String) As BaseProfile
        Return TryCast(Create(un), BaseProfile)
    End Function

    Public Shared Function GetUserProfile()
        Return TryCast(Create(Membership.GetUser().UserName), BaseProfile)
    End Function

    Public Property PreviousPage() As String
        Get
            Return TryCast(MyBase.Item("previouspage"), String)
        End Get
        Set(value As String)
            MyBase.Item("previouspage") = value
        End Set
    End Property

End Class 
```

这是我尝试使用课程的方式

```
 If userProfile Is Nothing Then
            userProfile = BaseProfile.GetUserProfile()

        End If

        userProfile.PreviousPage = Request.UrlReferrer.ToString() 
```

这是我的 web.config 配置文件标签的设置方式

```
<profile defaultProvider="SqlProvider" inherits="AppNamespace.BaseProfile">
  <providers>
    <add name="SqlProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="OraMembershipConnection"  applicationName="AppNamespace" />

   <add name="OraMembershipProvider" type="Oracle.Web.Profile.OracleProfileProvider",  Oracle.Web,  Culture=neutral" connectionStringName="OraMembershipConnection" ApplicationName="AppNamespace"/>
  </providers>

</profile> 
```

当我使用 defaultProvider="SqlProvider" 时，它允许我创建我的 BaseProfile 类，但是当我尝试设置一个属性时，我收到一条错误消息

```
A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) 
```

当我使用 defaultProvider="OraMembershipProvider" 时，我在类初始化时收到此错误

```
Provider must implement the class 'System.Web.Profile.ProfileProvider'. (C:\development\proj\web.config line 177) 
```

我试图在网上找到这方面的文档。当我尝试使用 OracleProfileProvider 继承 BaseProfile 时，我不能再使用 Create 函数，因为它们在该类中不存在。

我需要一些指导或建议来弄清楚我做错了什么！谢谢。

是的，“OraMembershipConnection”是适用于项目其他部分的有效工作连接。

# c++ - 如何在 Visual Studio 中解决 make_shared 的 10 个限制

> ID：14343054
> 
> 赞同：4
> 
> 时间：2013-01-15T17:12:48.317
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11, shared-ptr

在一些旧代码上使用 C++10 的新功能时，我最终遇到了无法调用`make_shared`需要 12 个参数的问题。我记得微软的 STL 谈到他们如何使用仿真，`make_shared`并且最多 10 个。`make_shared`显然，仅仅为此重构代码是不可能的，所以基本上我的问题是 - 有没有办法在 VS 2010中获得超过 10 个参数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T00:12:51.450

```
make_shared<foobar>(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12); 
```

可以替换为

```
shared_ptr<foobar>(new foobar(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)); 
```

在 C++11 中，std::make_shared 实际上是对使用第二种方法创建对象的性能优化，因为它只执行一次内存分配而不是两次，但是一旦超过 10 个变量，你就没有太多选择了关于使用哪个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T12:21:49.197

如果你真的想利用`make_shared`它的效率优势，那么你仍然可以这样做：

```
#include <tuple>
#include <memory>
#include <redi/index_tuple.h>

template<typename X, typename... Args>
  std::shared_ptr<X>
  make_shared_TO_THE_MAX(Args&&... args)
  {
    struct Wrapper
    {
      X x;

      template<typename... T>
        Wrapper(std::tuple<T...> targs) : Wrapper(targs, to_index_tuple<T...>{}) { }

      template<typename T, unsigned... I>
        Wrapper(T targs, index_tuple<I...>) : x(std::get<I>(targs)) { }
    };

    auto wrapped = std::make_shared<Wrapper>(std::forward_as_tuple(std::forward<Args>(args)...));
    return std::shared_ptr<X>(wrapped, &wrapped->x);
  } 
```

这将构造函数参数捆绑到一个引用元组中并将其传递给`make_shared`，因此`make_shared`不能处理 10 个参数并不重要，因为它只有一个。而不是`make_shared<X>`它使用`make_shared<Wrapper>`which 将为 a 分配空间`Wrapper`（它的大小和布局与其类型的成员相同`X`）并使用参数元组构造它。构造函数委托给另一个构造函数，该`Wrapper`构造函数扩展元组以传递给`X`构造函数。

最后，它使用`shared_ptr`别名构造函数返回`shared_ptr<X>`与 共享所有权`shared_ptr<Wrapper>`但存储`X`对象地址的 a。

`<redi/index_tuple.h>`是[我自己的标题](https://gitorious.org/redistd/redistd/blobs/master/include/redi/index_tuple.h)，但我正在尝试为 C++14 获得[类似](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3493.html)的标准化。

这也可以在没有可变参数模板的情况下完成，但工作量更大。这是两个参数，十二个再加十个！

```
#include <tuple>
#include <memory>

template<typename X, typename Arg0, typename Arg1>
  std::shared_ptr<X>
  make_shared_TO_THE_MAX(Arg0&& arg0, Arg1&& arg1)
  {
    struct Wrapper
    {
      X x;

      template<typename T0, typename T1>
        Wrapper(std::tuple<T0, T1> targs)
        : x(std::get<0>(targs), std::get<1>(targs)) { }
    };

    auto wrapped = std::make_shared<Wrapper>(std::forward_as_tuple(std::forward<Arg0>(arg0), std::forward<Arg1>(arg1)));
    return std::shared_ptr<X>(wrapped, &wrapped->x);
  } 
```

# javascript - 为什么获取数据的 Ajax $.get() 函数调用会出现乱序？

> ID：14343058
> 
> 赞同：-2
> 
> 时间：2013-01-15T17:12:51.433
> 
> 标签：javascript, jquery, get

我有以下 JavaScript 代码，我试图从 WebAPI 项目中的操作中获取一些数据。我遇到的问题是，当我使用数据集变量时，我收到一条错误消息，指出数据集未定义。另外，我希望我的第 1 号警报首先触发，但第 2 号警报首先触发，数据集未定义，然后第 2 号警报触发，然后它包含我的数据。我在这里做错了什么？

```
<script type="text/javascript">
    $().ready(function() {
        var dataset;
        $.get("http://localhost:9619/api/values", function(data) {
            dataset = data;
            alert("No. 1 " + dataset);
        });

        alert("No. 2 " + dataset);
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:15:41.213

`$.get()`是异步的。所以回调的执行会延迟到请求完成。

您的情况下的执行顺序是这样的：

```
1\. start the get request
2\. alert( "No. 2 " );
3\. [request has finished] execute the callback:  alert( "No. 1 " ); 
```

您应该将所有依赖于`$.get()`请求的代码添加到相应的回调中。这样您就可以确保请求成功并且您的变量已设置。

另一个不太可取的解决方案是使用`$.ajax()`并将其`async`参数设置为 false。但在这种情况下，所有 JavaScript 代码的执行都会等到您的请求完成并且您的页面同时冻结。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:16:21.387

警报`No. 2`应该首先使用 value 触发`undefined`，因为 ajax 请求是异步的。之后，您应该`No. 1`收到从请求中收到的值的警报。您可以通过使用同步 ajax 请求（不好的做法）来获得您期望的行为。

试试这个：

```
$().ready(function() {
    var dataset;
    $.ajax({
         url: 'http://localhost:9619/api/values', 
         success: function(result) {
                   dataset = data;
                   alert("No. 1 " + dataset);
                },
         async: false
    });
    alert("No. 2 " + dataset);
}); 
```

用于同步请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T17:17:37.000

*$.get*是“异步的”，因为它在继续之前不会等待它完成。第二个参数是回调函数（这是你把

```
alert("No. 1 " + dataset); 
```

当你跑步时会发生什么

```
$.get("http://localhost:9619/api/values", function(data) 
```

它立即进入下一行：

```
alert("No. 2 " + dataset); 
```

然后当 AJAX 调用完成时，它会运行回调函数

```
dataset = data;
alert("No. 1 " + dataset); 
```

这是关于异步 javascript 的一个很好的介绍：[编写异步 Javascript 101](http://www.slideshare.net/clutchski/writing-asynchronous-javascript-101)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T17:18:48.260

由于 $.get() 是一个异步调用，一旦控制到达那里它就会被触发，并且由于它本质上是异步的，所以它不需要等待完成调用。所以控制转移到你的下一个警报（并且ajax调用可能仍在完成的路上）。

# c# - 在 EntityFramework 中保存更改之前是否有必要将 EntityReference 属性设为 NULL？

> ID：14343065
> 
> 赞同：0
> 
> 时间：2013-01-15T17:13:13.777
> 
> 标签：c#, .net, entity-framework

首先，我不是实体框架方面的专家。

而且我在一个项目的存储库中看到了一些代码，其中

*   将实体上的 EntityReference 属性设为 NULL
*   并保留 EntityReference 的 ID

在保存此实体的更改之前。

例如，它在保存 Foo 实体之前执行此设置：

```
if (foo.Bar !=null)
{
  foo.BarID = foo.Bar.ID;
  foo.Bar = null;
} 
```

这可以是 EntityFramework 相关的要求，以使 EntityReference 属性为空，但仅使用它们的 ID 来保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:10:05.243

应该编写该代码以防止数据库更改为`Bar`实体。

看这个例子：

```
var foo = db.Foo.Include("Bar").First() // get some foo from db
foo.SomeColumn = "i have changed!";
var barId = foo.BarID; // get the "bar" id

foo.Bar.SomeColumn = "i have changed!"; // this will change the values from this column
db.SaveChanges(); // i will save changes from "bar" and from "foo", becouse "bar" was attached on get 
```

在该代码中，您更改了两个实体的值，也许您的代码正试图阻止这种情况。如果你不包括`Bar`它只是不更新​​。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T18:55:11.780

不，通常这不是必需的。例如，当使用附加实体时，您可以更改 FK 属性或引用，两者都可以：

```
var foo = context.Foos.Include("Bar").Single(f => f.ID == 1); 
```

然后...

```
foo.BarID = 5;
context.SaveChanges(); 
```

...会工作和...

```
var newBar = new Bar { ID = 5 };
context.Bars.Attach(newBar);
foo.Bar = newBar;
context.SaveChanges(); 
```

...也会起作用。无需取消引用。

如果您的问题中的代码可能有意义

*   `foo`-`foo.Bar`关系处于不一致/矛盾的状态
*   *你知道出*了什么问题

例如：

```
var foo = new Foo { ID = 1 };

foo.BarID = 4;
foo.Bar = new Bar { ID = 5 };

repo.UpdateFoo(foo); 
```

并且`UpdateFoo`是：

```
public void UpdateFoo(Foo foo)
{
    context.Foos.Attach(foo); // will throw an exception
    context.Entry(foo).State = EntityState.Modified;
    context.SaveChanges();
} 
```

该`Attach`行将引发异常，因为 FK 值为`BarID`但`4`引用`foo.Bar`的是`Bar`number `5`。EF 不知道什么是有效的并且会拒绝写一个更新。

您现在可以通过将问题中的代码添加到`UpdateFoo`方法中来解决此问题：

```
public void UpdateFoo(Foo foo)
{
    if (foo.Bar !=null)
    {
        foo.BarID = foo.Bar.ID;
        foo.Bar = null; // this line is not really necessary
    }

    context.Foos.Attach(foo); // no  exception anymore
    context.Entry(foo).State = EntityState.Modified;
    context.SaveChanges();
} 
```

但这依赖于`foo.Bar`（ID = 5）有效且`foo.BarID`（ID = 4）无效的假设。

通常这不一定是正确的，它可能只是相反的方式。在我看来，这个片段是一种代码异味，它试图修复存储库层中实际在另一层（业务层左右）中创建的不一致。

# jquery - jQuery：修改 load() 函数中的 responseText

> ID：14343066
> 
> 赞同：0
> 
> 时间：2013-01-15T17:13:14.507
> 
> 标签：jquery, ajax, load

是否可以在添加到元素之前修改 responseText？

```
$('#target').load('script.php', params, function(response,status,xhr){
    response         = 'foo';  // doesn't work
    xhr.responseText = 'foo';  // doesn't work
    return 'foo';              // doesn't work        
}) 
```

我想获得我想要的唯一方法是使用该`ajax`方法并在成功后填充我的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:19:07.867

你必须使用[jQuery 的`get`方法](http://api.jquery.com/jQuery.get/)：

```
$.get('script.php', params, function (responseText) {
    $('#target').html( responseText + 'foo' );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-20T15:15:19.393

```
<body>
  <div>
    <img id="random-dog" src=""/>
  </div>
  <button>Get me a doggo</button>

  <script>
    $("button").click(function () {
      $("#random-dog").load("https://dog.ceo/api/breeds/image/random", function (responseTxt, statusTxt, xhr) {
        if (statusTxt == "success")
          this.setAttribute("src", JSON.parse(responseTxt).message);
        console.log("External content loaded successfully!");
        if (statusTxt == "error")
          console.log("Error: " + xhr.status + ": " + xhr.statusText);
      });
    });
  </script>
</body> 
```

在回调函数内部，如果状态文本为成功，则处理响应并将其设置为`this`src 属性。`this`表示选择器元素。

API结构是：

```
{
    "message": "https://images.dog.ceo/breeds/whippet/n02091134_10242.jpg",
    "status": "success"
} 
```

# swipe - 滑动事件处理

> ID：14343068
> 
> 赞同：0
> 
> 时间：2013-01-15T17:13:15.963
> 
> 标签：swipe

我正在编码滑动以删除功能。它在第一个事件上运行良好，但是..如果我刷了两次......它似乎无法正常工作。

如果我向左滑动两次，我不知道为什么“删除”按钮会消失。

请在下面查看我的代码：

```
<div id="showlist">
<div id="btn_del">Delete</div>  
</div>

<style>
#showlist {
width:100%;
height:100px;
background:#DDD;
border-bottom:1px dashed #666;
}

#btn_del {
float:right;
margin-right:-60px;
background:red;
padding:5px;
display:none;margin; 
border:1px solid #FFF; 
margin-top:20px;
color:#FFF;
font:12px Arial;
font-wieght:bold;
border-radius:5px;
}
</style>

<script>
$('#showlist').bind({  
swipeleft: function() {    
$("#showlist").animate( {'width': '90%'}, 300 );
    $("#btn_del").fadeIn();

},  
swiperight: function() {    
$("#btn_del").hide();
$("#showlist").animate( {'width': '100%'}, 300 );
},
preventDefaultEvents: true
}); 
```

演示：http: [//jsfiddle.net/Chae/uLwJg/2/](http://jsfiddle.net/Chae/uLwJg/2/)

任何帮助将不胜感激。

来自首尔的蔡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:24:20.173

我只是自己解决了这个问题。我将检查代码用于删除按钮对象的可见性。

```
$('#showlist').bind({  

swipeleft: function() {   
  chk = $("#btn_del").is(':visible');
  if (!chk) {
     $("#showlist").animate( {'width': '90%'}, 300 );
     $("#btn_del").fadeIn();
  } 
},  

swiperight: function() {    
  $("#btn_del").hide();
  $("#showlist").animate( {'width': '100%'}, 300 );
},

preventDefaultEvents: true
}); 
```

# jquery - 将 PHP 页面内容加载到 PhoneGap 移动应用程序中

> ID：14343069
> 
> 赞同：1
> 
> 时间：2013-01-15T17:13:16.320
> 
> 标签：jquery, html, cordova

我目前正在开发在PhoneGap 上运行的移动应用程序（iOS 和Android）HTML5、CSS3 和jQuery Mobile，以生成将在移动设备上运行的可执行文件。

我的应用程序在其操作中将从位于我的 PHP 服务器上的 PHP 页面加载动态内容。PhoneGap 无法在手机上生成包含 PHP 文件的应用程序，我试图从位于我的应用程序中的服务器的“news.php”页面显示内容，但徒劳无功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:56:28.207

您的问题有一个简单的解决方案：

***不要这样做！***

创建一个静态 html 页面，它通过 ajax 请求从您的服务器加载内容。发送正确的 cors-header 并为您的应用创建域白名单。

说明：如果我可以破坏您的网络服务器，并向您的页面添加 JavaScript，那么我将能够读取/删除，使用安装了您的应用程序的设备执行所有操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:47:27.063

我只是必须让您知道，Apple 不允许为您的基本功能获取 html 页面，如果您这样做，他们将拒绝您的应用程序。您的所有基本资产都应位于您的应用程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T17:46:20.317

这取决于您将如何创建应用程序。没有什么能阻止你这样做。您可以将 loadUrl 引用到远程 Web 服务器，而不是使用 phonegap www 目录中的文件，因此会话将起作用。这是一个例子：

Phonegap + 安卓：

在您的主要活动类中，方法 onCreate 将 loadUrl 更改为：

```
super.loadUrl("http://.../index.php"); 
```

iPhone + Phonegap 是另一个故事，仍然可以做到。因为这里有很多变化，这里有一个教程：[http ://www.joeldare.com/wiki/open_a_url_in_phonegap](http://www.joeldare.com/wiki/open_a_url_in_phonegap)

还有一件事，您必须为 Phonegap 启用互联网连接。

当您使用 android 平台时，将此行添加到您的 AndroidManifest：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

必须在您的 html 文件中设置视口元标记。

还有一件事，如果您正在创建一个 iOS 应用程序，那么由于我的第一个解决方案，您的应用程序很有可能会被发布。在这种情况下，您需要使用某种 Web 服务请求来处理它。

# android - 动画位图以在曲线上移动

> ID：14343072
> 
> 赞同：0
> 
> 时间：2013-01-15T17:13:22.057
> 
> 标签：android, bitmap, android-animation

我将如何在 android 中为位图设置动画，使其以抛物线拱形或任何其他弯曲路径在屏幕上移动？目前，我正在使用的方法是使用 onDraw() 方法在画布上绘制一个带有 x/y 坐标的位图，然后在绘制完位图后将该 x/y 坐标增加一，此时方法调用 invalidate() 以使用新位置重绘位图。

更新：

也许这会给我正在尝试做的事情提供更多背景信息。下面是我现在为我的位图制作动画的实现：

```
canvas.drawColor(Color.TRANSPARENT);
canvas.drawBitmap(gBall, x, y, null);

x += changeX;
y += changeY;

if(x >= (canvas.getWidth()-gBall.getWidth()) || x <= 0)
    changeX = -changeX;
if(y >= (canvas.getHeight()-gBall.getHeight()) || y <= 0)
    changeY = -changeY;

invalidate(); 
```

有没有办法在仍然使用此实现时使位图 gBall 曲线接近屏幕边缘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:53:12.023

实现一个自定义动画器。要实现自定义动画器，您所要做的就是覆盖 Animator 类的 applyTransformation 方法。然后，您可以使用自定义类的实例调用 View.startAnimation。考虑到谷歌开发人员为实现流畅动画所付出的努力，这可能是最好的解决方案——比在处理程序上执行操作要好得多，因为垃圾收集可能会导致故障。正确实现的动画，在其 applyTransform 方法中不执行内存分配，可以运行而不会产生任何垃圾收集。

如果您查看平台资源，很快就会发现无故障动画是 Android 4.x 的主要开发目标。谷歌工程师投入了大量工作来确保动画运行时不会出现故障。您的平局和无效策略实际上可能运作良好。处理程序的方法不是那么多。但如果是我，我会花更多的时间来利用已经投入到动画中的努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:46:59.220

使用 Handler 来控制速度：

```
public void draw(Canvas canvas, ...){
   if (System.currentTimeMillis() - lastCall < PERIOD-50){
       mHandler.postDelayed(mReDrawRunnable,PERIOD);
       return;
   }

   //to call back
   mHandler.removeCallbacks(mReDrawRunnable);
   mHandler.postDelayed(mReDrawRunnable,PERIOD);
   lastCall = System.currentTimeMillis();

   //your code here
   ...

}
private long lastCall = 0;
private static final PERIOD = 250; //millis
private Handler mHandler = new Handler();
private Runnable mReDrawRunnable==new Runnable() {
          public void run() {YourClass.this.invalidate();}
        }; 
```

这是一种快速的方法，它应该可以工作。您应该创建另一个线程来控制绘图。

# php - 如何用php计算数组内容并分配数字位置

> ID：14343073
> 
> 赞同：-1
> 
> 时间：2013-01-15T17:13:27.397
> 
> 标签：php, arrays, cout

我正在做一个网站项目，我从我的数据库中获取数组并使用 foreach 语句输出其内容。我想使用 php 脚本来计算数组中有多少项目，并为每个项目分配数字位置，这样如果第一个项目的数字位置是奇数，我将应用 css float:left 样式，但如果它是偶数它会浮动：对

请问有什么帮助吗？？？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:51:52.323

CSS3 有很好的特性*(.list:nth-child(odd) {float:left;} .list:nth-child(even) {float:right;} )*，但要注意这在许多浏览器（ie8 和下面，较旧的Firefox等）..至少每个使用WinXP + IE的用户都会看到一个没有不同颜色的普通列表。

jQuery（也注意到这里）也可以选择*$('.xy:odd').css({'float':'left'});* ，但是如果你没有在你的项目中使用 jQuery，那么它只是一个很大的（90kb jQuery 库）开销。如果使用 php，性能也会更好。

因此，您最好使用 php 和模操作数*(if $count % 2)*，请参阅 Joseph Silber 的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:23:06.460

使用[模操作数](http://php.net/manual/en/language.operators.arithmetic.php)：

```
<?php foreach ( $array as $index => $item ): ?>
    <div class="<?php echo $index % 2 ? 'even' : 'odd'; ?>"></div>
<?php endforeach; ?> 
```

然后在你的 CSS 中使用这些类名：

```
.odd {  float: left }
.even { float: right } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T17:22:12.833

您只能使用 css 来做到这一点：

```
.list:nth-child(odd) {float:left;}
.list:nth-child(even) {float:right;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T17:14:47.000

我认为您也可以将 jquery 与 :odd 选择器一起使用。

# django - 默认列表页面上的 Django 管理员内联？

> ID：14343077
> 
> 赞同：0
> 
> 时间：2013-01-15T17:13:34.110
> 
> 标签：django, django-admin

我有一个表，其中只有少数条目，如果我可以在他们的列表中使用内联而不是强迫员工每次都点击进入编辑页面，那就太好了。

也就是说，当有人单击通常会提供模型对象列表的链接时，他们应该会看到内联显示的模型对象。

我尝试过这样的事情，但不出所料，它给出了一个错误，因为没有外键：

```
class MyModelInline(admin.StackedInline): 
    model = MyModel               

class MyModelAdmin(admin.ModelAdmin): 
    inlines = [MyModelInline,]    

admin.site.register(MyModel, MyModelAdmin) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:17:47.110

为了让它像你描述的那样工作，你需要一个“编辑器”模型作为数据的父级。您要显示的所有行都应该有一个指向单个“编辑器”模型对象的外键。所以，在models.py中：

```
from django.db import models

class Editor(models.Model):
    pass

class MyModel(models.Model):
    name = models.CharField(max_length=100) # Field added for demonstration
    # ... add any other fields you like ...
    editor = models.ForeignKey(Editor) 
```

在 admin.py 中：

```
from django.contrib import admin
from Test.models import Editor, MyModel

class MyModelInline(admin.StackedInline):
    model = MyModel

class EditorAdmin(admin.ModelAdmin):
    inlines = [MyModelInline,]
admin.site.register(Editor, EditorAdmin) 
```

其他一些需要考虑的事情：

当您以编程方式创建新的 MyModel() 对象时，您必须始终将外键设置为指向编辑器。应该只有一个编辑器实例才能按照您的描述工作。使用管理界面时，应使用编辑器对象的管理页面自动设置此外键。我建议在生产中限制除您自己之外的所有人创建和删除编辑器对象。如果有人删除了编辑器对象，那么所有 MyModel 对象也会消失。

* * *

备选方案：

1）如果管理人员所做的编辑很简单，那么我建议改为[实施“操作” 。](https://docs.djangoproject.com/en/dev/ref/contrib/admin/actions/)

2）还有[覆盖管理模板](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#overriding-admin-templates)的可能性。我个人不太喜欢这个选项，因为每次更新 Django 时，我都必须检查我的更改是否不会干扰新功能。但是，有时这是在管理界面中执行一些更高级操作的唯一方法。我已经在我自己的项目中完成了这项工作，但希望将更改保持在最低限度。

# javascript - 安全地解包 jQuery 实例以获取包装的 DOM 元素

> ID：14343079
> 
> 赞同：2
> 
> 时间：2013-01-15T17:13:38.713
> 
> 标签：javascript, jquery, dom

用 jQuery 包装两次 HTML 元素是一种安全的操作，因为它返回相同 DOM 元素的实例：

```
var $a = $('#foo');
var $b = $($a);
alert($b.get(0) === $a.get(0)); // true 
```

它允许灵活设置配置对象，这些对象可能包含选择器、DOM 元素或 jQuery 实例。

我不知道，所以在我的个人库中，我使用方法扩展了 jQuery，以安全地包装和解开对象。

jQuery 核心中是否有一个安全的向后操作来从它们的相关 jQuery 实例中解开 DOM 元素？

我的意思是这样的事情：

```
function unwrap(obj) {
    return (obj instanceof jQuery) ? obj.get(0) : obj;
} 
```

这足够聪明，可以避免每次都有条件检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:37:56.740

将所有内容包装在 jQuery 中然后从结果数组中获取第 0 个元素会更有意义：

```
jQuery( elem )[0]; 
```

如果传递一个 jQuery 对象，`jQuery( jQueryObject )`将以相同的顺序返回相同的元素。如果您传递一个元素，则返回该元素。如果您传递一个 jQuery 对象，这将返回其中的第一个元素。如果你传递一个选择器，这将返回 DOM 中的第一个匹配项。

我们在 jQuery UI 中使用类似的技术来基本上解析您在选项中传递给小部件的任何选择器/元素/jquery 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:26:24.440

[Detect DOM object vs. jQuery Object](https://stackoverflow.com/questions/4140015/detect-dom-object-vs-jquery-object)似乎包含了这个问题的答案。

每个 jQuery 对象都有一个 jquery 属性。就像是：

```
function unwrap(obj) {
    return (obj.jquery) ? obj.get(0) : obj;
} 
```

# algorithm - 将真/假向量分解为其部分

> ID：14343080
> 
> 赞同：4
> 
> 时间：2013-01-15T17:13:39.617
> 
> 标签：algorithm, list

我想知道这是否是一个既定的计算机科学问题，是否有任何多项式时间解或近似

假设我有一些由真值和假值组成的列表 X

```
X = [True, False, True, False, True...True] 
```

我还有一组与 X 长度相同的其他列表，具有真值和假值

```
A = [False, True, True, True, True, False .... False]
B = [False, False, True, False, True, False .... False]
...etc 
```

现在，我想找到这些其他列表的“总和”（将按位 OR 运算符应用于每个元素。即 F + F = F 、 F + T = T 、 T + T = T ）最能解释在列表 X 中看到的观察结果（我可以引入一个评分系统，它会为匹配给出一些分数，并对解决方案中的不匹配进行惩罚），并且由于可能有许多可能的解决方案，我想对算法施加惩罚它在其解决方案中使用的更多列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T17:21:59.310

您所描述的问题是 NP-hard 通过减少[最小集覆盖问题](http://en.wikipedia.org/wiki/Set_cover_problem)，已知是 NP-hard。

减少如下。给定一个包含 n 个元素的集合 S，创建一个包含 n 个“true”副本的列表作为您的列表 X。然后，对于集合封面中可能允许的每个集合，将其替换为在每个位置具有 true 或 false 的列表基于集合是否包含 S 的给定元素。如果将无穷大的惩罚分配给不匹配并将成本分配给每个列表，则原始集合中存在大小为 k 或更小的集合覆盖设置覆盖问题当且仅当您的问题有成本 k 或更少的解决方案。

这意味着对于这个问题没有已知的多项式时间算法，您将需要接受近似答案或愿意让您的程序在某些输入上运行很长时间。

希望这可以帮助！

# ios - 如何修复 EKErrorDomain Code=1 “未设置日历

> ID：14343081
> 
> 赞同：6
> 
> 时间：2013-01-15T17:13:39.723
> 
> 标签：ios, calendar, eventkit

我想为 iPhone 日历创建一个日历条目，我尝试了以下代码

```
 EKEventStore *eventStore = [[EKEventStore alloc] init];
        EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
        event.title     = self.selectedPost.postTitle;
        event.notes     = self.selectedPost.postContent;
        event.startDate =  self.selectedPost.startDate;
        event.endDate   =  self.selectedPost.endDate;

        EKCalendar *targetCalendar = nil;
        targetCalendar = [eventStore defaultCalendarForNewEvents];
        NSLog(@"%@",targetCalendar);
        [event setCalendar:targetCalendar];
        NSError *err;
        [eventStore saveEvent:event span:EKSpanThisEvent error:&err];
        UIAlertView *alert = nil;
        NSLog(@"err %@",err);
        if (err) {
            alert = [[UIAlertView alloc] initWithTitle:@"Error" message:[err localizedDescription] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
        }
        else{
            alert = [[UIAlertView alloc] initWithTitle:@"Success" message:@"Added to calender" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
        }

        [alert show]; 
```

但结果是

```
2013-01-15 22:31:34.682 Project[40863:907] defaultCalendarForNewEvents failed: Error Domain=EKCADErrorDomain Code=1013 "The operation couldn’t be completed. (EKCADErrorDomain error 1013.)"
2013-01-15 22:31:34.683 Project[40863:907] (null)
2013-01-15 22:31:34.690 Project[40863:907] err Error Domain=EKErrorDomain Code=1 "No calendar has been set." UserInfo=0x1d535ba0 {NSLocalizedDescription=No calendar has been set.} 
```

我知道这是因为

```
[eventStore defaultCalendarForNewEvents]; 
```

返回空值。我试过 [eventStore calendarWithIdentifier:event.calendarItemIdentifier]; 和其他一些代码但结果相同如何解决这个任何想法

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T18:38:15.940

如果这是在 iOS 6.0 或更高版本上，您必须首先请求访问用户的日历，然后 EventKit 将使用方法[-[EKEventStore requestAccessToEntityType:completion:]将它们交给您](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html#//apple_ref/occ/instm/EKEventStore/requestAccessToEntityType:completion:)

[查看日历和提醒编程指南](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/ReadingAndWritingEvents.html#//apple_ref/doc/uid/TP40004775-SW1)中给出的示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-09T09:56:01.813

为了不浪费您的时间，请确保您使用的是[-[EKEventStore requestAccessToEntityType:completion:]中的位掩码](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html#//apple_ref/occ/instm/EKEventStore/requestAccessToEntityType%3acompletion%3a)

像这样

```
EKEventStore *eventStore = [[EKEventStore alloc] init];
[eventStore requestAccessToEntityType:EKEntityMaskEvent completion:^(BOOL granted, NSError *error) {
    // ...
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-12T19:43:34.133

我通过确保标题与我正在创建的标题不同来修复它，例如我有`dance`几个晚上，所以一晚我会做`Dance`，另一个在开头有句号`.Dance`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-23T20:00:30.810

添加这些行

```
if(eventStore.defaultCalendarForNewEvents==nil)
*eventStore = [[EKEventStore alloc] init]; 
```

第二行将仅在您授予访问权限时第一次执行

您的代码应如下所示

```
 EKEventStore *eventStore = [[EKEventStore alloc] init];
    EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
    event.title     = self.selectedPost.postTitle;
    event.notes     = self.selectedPost.postContent;
    event.startDate =  self.selectedPost.startDate;
    event.endDate   =  self.selectedPost.endDate;

    EKCalendar *targetCalendar = nil;
   if(eventStore.defaultCalendarForNewEvents==nil)
      *eventStore = [[EKEventStore alloc] init];
    targetCalendar = [eventStore defaultCalendarForNewEvents];
    NSLog(@"%@",targetCalendar);
    [event setCalendar:targetCalendar];
    NSError *err;
    [eventStore saveEvent:event span:EKSpanThisEvent error:&err];
    UIAlertView *alert = nil;
    NSLog(@"err %@",err);
    if (err) {
        alert = [[UIAlertView alloc] initWithTitle:@"Error" message:[err localizedDescription] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
    }
    else{
        alert = [[UIAlertView alloc] initWithTitle:@"Success" message:@"Added to calender" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
    }

    [alert show]; 
```

这对我有用

# android - 无法在 Android 应用程序中打开 pdf 文档

> ID：14343086
> 
> 赞同：1
> 
> 时间：2013-01-15T17:13:50.190
> 
> 标签：android, pdf, assets

我想知道任何人都可以帮助我解决我遇到的问题。我看过很多相同问题的帖子，但我仍然无法解决这个问题。我创建了一个 PDF 文档。我已将创建的 PDF 文件放入我的 res/raw 文件夹中（我也尝试放入 assets 文件夹中），并尝试在我的应用程序中打开它。当我单击按钮时，它会打开对话框，我可以选择使用 adobe reader、amazon kindle 或 polaris office 完成操作。但是当我尝试打开 pdf 时，我收到一条错误消息，提示“无法打开该文档，因为它不是有效的 PDF 文档”。

以下是我用来尝试打开 pdf 的代码，有人知道为什么这不起作用吗？

```
String fileName = "android.resource://" + getPackageName() + "/" + R.raw.user_manual_v1_0_0;            
File file = new File(fileName);

Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.setDataAndType(Uri.fromFile(file), "application/pdf");

startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T17:18:04.687

它不会起作用，因为很少有 PDF 查看器（如果有的话）被设置为从资源中打开 PDF，而且没有人可以直接从资产中读取。

将文件复制到文件系统会更好。如果你将它复制到外部存储，你可以在上面打开一个 PDF 查看器。如果您将其复制到内部存储 - 默认情况下，您的应用程序私有 - 您可以创建一个`ContentProvider`以将 PDF 提供给查看器。[此示例应用程序](https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/Files)演示了后一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T16:51:51.963

确保不要忘记您的应用访问外部文件的权限。将这两行放在清单中：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

# entity-framework - 处理从实体框架中的存储过程返回的多个结果集

> ID：14343094
> 
> 赞同：2
> 
> 时间：2013-01-15T17:14:08.170
> 
> 标签：entity-framework, stored-procedures

我有一个这样的存储过程：

```
CREATE STORED PROCEDURE Test1
AS
BEGIN
SELECT * FROM Table1
SELECT * FROM Table2
END 
```

现在我想在 EF.How 中使用这个过程？！我可以同时使用从 EF 中的过程返回的两个 SELECT 请求吗？！

注意：我知道如果它只返回结果，我该如何使用这个存储过程

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T00:34:33.103

这是你的问题的答案

```
 using (var db = new EF_DEMOEntities())
    {
       var cmd = db.Database.Connection.CreateCommand();
       cmd.CommandText = "[dbo].[proc_getmorethanonetable]";

        try
        {
            db.Database.Connection.Open();
            using (var reader = cmd.ExecuteReader())
          {
                var orders = ((IObjectContextAdapter)db).ObjectContext.Translate<Order>(reader);
               GridView1.DataSource = orders.ToList();
                GridView1.DataBind();
                   reader.NextResult();
                 var items =  
         ((IObjectContextAdapter)db).ObjectContext.Translate<Item>(reader);
                 GridView2.DataSource = items.ToList();
                GridView2.DataBind();
                reader.NextResult();
                 var collect =  ((IObjectContextAdapter)db).ObjectContext.Translate<object>(reader);
         GridView3.DataSource = collect.ToList();
         GridView3.DataBind();

      }
     }
         finally
        {
           db.Database.Connection.Close();
     }
} 
```

# keyboard-events - 如何在 tv-container 中禁用自动重复的关键事件

> ID：14343096
> 
> 赞同：0
> 
> 时间：2013-01-15T17:14:13.257
> 
> 标签：keyboard-events, google-tv, google-closure, google-closure-library

有没有办法禁用自动重复的关键事件？具体来说，我正在使用关闭 google tv web ui 库，并且当按住/向上滚动浏览 tv-container-vertical 的组件时，我希望它一次只移动一个，无论是否按下键或举行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:35:13.203

简短的回答是，这并非易事。您需要使用自己的处理程序定义键行为，该处理程序将覆盖 GTV 提供的用于键导航的闭包库代码。

# iphone - 通过cardDav协议的iphone同步联系人

> ID：14343099
> 
> 赞同：1
> 
> 时间：2013-01-15T17:14:19.963
> 
> 标签：iphone, ios

我正在尝试开发一个用于同步联系人的应用程序 IO 我想使用**cardDav**协议我尝试安装 baikal 服务器，但我没有找到任何可供 ios 或 api 使用的客户端，任何人都知道如何在 iphone 中集成客户端 caraddav 以与之通信服务器发送/接收电子名片

提前致谢

# gmaps4rails - 隐藏或显示可见标记时更新 gmaps4rails 'clusters'

> ID：14343112
> 
> 赞同：0
> 
> 时间：2013-01-15T17:14:48.177
> 
> 标签：gmaps4rails, visible, marker, markerclusterer

这个 javascript 代码隐藏了谷歌地图上的所有标记，我最初在 Rails 3.2 应用程序中使用 gmaps4rails gem 填充了这些标记。

```
var markers=Gmaps.map.markers
for(i=0;i<markers.length;i++){markers[i].serviceObject.setVisible(false); } 
```

我遇到的问题是，在运行上述代码之前和之后，“集群”仍然显示相同的计数器。我搜索了一下，还没有找到要添加以更新集群的写入行。

PS 我*很*确定“集群”是我所说的正确名称。我指的是当您缩小到没有足够空间区分各个标记的视图时地图显示的计数器，并且地图显示带有地图数量的彩色圆形图标该区域的标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:24:40.053

如果你想用一组不同的标记更新你的地图，我们会打电话给他们`differentMarkers`你可以打电话

```
var differentMarkers = ...
Gmaps.map.replaceMarkers(differentMarkers); 
```

并且集群将更新。

如果要向现有集合添加标记，请使用

```
var additionalMarkers = ...
Gmaps.map.addMarkers(additionalMarkers); 
```

我还没有找到删除标记的方法，但是您可以`replaceMarkers`使用已删除标记的数组调用 。

不确定这是否是它应该完成的方式，但似乎有效。

* * *

在 gmaps4rails 的 wiki 中也解释了以这种方式添加和替换标记。[https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Javascript-goodies](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Javascript-goodies)

# python - Selenium - Python & Opera - 允许不受信任的 SSL 证书？Opera.profile

> ID：14343114
> 
> 赞同：0
> 
> 时间：2013-01-15T17:14:53.523
> 
> 标签：python, selenium, webdriver, opera, qa

我已经在互联网上搜索了这个问题的解决方案，但仍然没有任何运气。

我不是在寻找 JAVA 中的解决方案，因为周围的大多数其他帖子都是。我正在为我的公司平台运行 Python 中的自动化测试脚本，这实际上是一个质量保证问题。到目前为止，似乎没有任何支持在 Python 中创建 Opera 浏览器配置文件，因此我需要找到另一种方法

我想用 Opera 浏览器在 Python 中实现我的测试脚本。当我使用我们平台的安全地址运行脚本时，我收到“服务器证书链不完整，签名者未注册”警报并且测试失败。

我没有找到接受这个弹出窗口的方法。我试过使用：

```
java -jar selenium-server-standalone-2.28.0.jar -trustAllSSLCertificates 
```

（当然，使用正确的目录。）我还尝试使用 webdriver 接受警报窗口，更改 Opera 中的受信任证书设置，使用cybervillain.cer（证书没有随 selenium 服务器一起提供，我不得不在 eleswhere 找到它.)

有没有办法像 firefox 一样为 Opera 创建浏览器配置文件？或者有没有办法使用其他方法接受证书？我想将我的测试脚本保存在 Python 中，因此将不胜感激。

经过不断的研究，我仍然无法在 Python 中找到解决此问题的方法。我开始相信它目前是使用 Python 绑定 Selenium 的不受支持的功能。我仍然不明白为什么这个问题被关闭，即使它与被标记为重复的问题完全不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:14:19.243

您可以尝试在浏览器上安装**cybervillian**证书。

它带有 selenium 服务器 jar。您可以通过提取罐子找到它。

# iphone - 是否可以修改 iPhone 应用程序以使其在 iPad 上全屏运行？

> ID：14343120
> 
> 赞同：0
> 
> 时间：2013-01-15T17:15:12.320
> 
> 标签：iphone, ipad, in-app-purchase

我有一个付费的 iPhone 应用程序，我想创建一个更新版本，它将作为 iPhone 应用程序运行，直到用户完成应用程序内购买，该应用程序将使用全屏。

有没有什么方法可以在应用已经分发后从小尺寸的 iPhone 应用变成全屏的 iPad 应用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:06:18.087

您可以做的是在您的应用程序中检查是否有任何付款，然后如果应用程序已付款，则加载不同的数据。

如果用户已付费，最简单的方法是为您的布局加载不同的 xib 文件。然而，用户需要退出并重新启动应用程序才能将付款计入账户。而且您需要在代码中以编程方式决定加载一个 xib 或另一个。但这是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:27:39.493

**简短的回答**：不，这是不可能的。

**更长的答案**：这将涉及在运行时动态设置构建设置（特别是**Targeted Device Family**）。然而，这些设置是读取和编译/构建时间。该解决方案并非不可能，将涉及使用不同设置重建应用程序。无论如何，这不太可能被 Apple 允许

# google-checkout - 谷歌结帐集成-codeigniter

> ID：14343121
> 
> 赞同：0
> 
> 时间：2013-01-15T17:15:13.453
> 
> 标签：google-checkout

我有网站内置`codeigniter`框架。

我想用`google checkout`. 我已使用此代码转移资金，但我需要返回一些东西，以便我可以知道转移成功，然后将值输入我的数据库。

我不知道该怎么做。

*谁能逐步告诉我如何做到这一点？*

我的表格：

```
<form action="https://sandbox.google.com/checkout/api/checkout/v2/checkoutForm/Merchant/xxxxxxx" id="BB_BuyButtonForm" method="post" name="BB_BuyButtonForm" target="_top"> 
    <input name="item_name_1" type="hidden" value="Deposite"/> 
    <input name="item_description_1" type="hidden" value="Money Deposite"/>
    <input name="item_quantity_1" type="hidden" value="1"/>
    <input name="item_price_1" type="text" value="30.0"/>
    <input name="item_currency_1" type="hidden" value="USD"/>
    <input name="_charset_" type="hidden" value="utf-8"/><br />
    <input alt="" src="https://sandbox.google.com/checkout/buttons/buy.gif?merchant_id=xxxxxxxx&amp;w=117&amp;h=48&amp;style=white&amp;variant=text&amp;loc=en_US" type="image"/>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:22:18.237

> ...但是我需要返回一些东西，以便我可以知道传输成功，然后将值输入到我的数据库中...

[Google Checkout API](https://developers.google.com/checkout/developer/)调用“第 2 部分”或“处理结帐订单” 。

这是[使用他们的 Java lib 的教程](https://developers.google.com/checkout/developer/Google_Checkout_Custom_Processing_How_To)。请注意，这并不意味着您*“必须”* 使用这个（或任何）特定的库，它只是向您展示流程。

其他库在[这里](https://developers.google.com/checkout/samplecode)。

# spring - 入站通道在 Spring 中不起作用

> ID：14343123
> 
> 赞同：0
> 
> 时间：2013-01-15T17:15:39.560
> 
> 标签：spring, spring-aop, spring-integration

我正在尝试从 FTP 复制文件并希望将其放置在本地计算机中。

为此，我创建了一个入站通道配置：

```
<bean name="publishStockSessionFactory"
      class="org.springframework.integration.ftp.session.DefaultFtpSessionFactory">
  <property name="host"
        value="10.255.255.1" />
<property name="port" value="21" />
    <property name="username"
        value="test" />
    <property name="password"
        value="test" />
</bean>

<bean id="stockLocalDirectory" class="java.lang.String">
    <constructor-arg
        value="/opt/test" />
</bean>

<bean id="stockRemoteDirectory" class="java.lang.String">
    <constructor-arg
        value="stock" />
</bean>

<int-ftp:inbound-channel-adapter 
     local-directory="# {stockLocalDirectory}"             
     channel="stockFilesFromFTP"  
     session-factory="publishStockSessionFactory" 
     remote-directory="#{stockRemoteDirectory}" 
     delete-remote-files="true" 
     filename-regex="Stock*.csv" >
    <int:poller fixed-rate="120000" max-messages-per-poll="100" />
</int-ftp:inbound-channel-adapter>

<int:publish-subscribe-channel id="stockFilesFromFTP" /> 
```

启动时出现的错误是

```
INFO   | jvm 1    | main    | 2013/01/15 22:20:02.715 | 2013-01-15 22:20:02,699 
ERROR  task-scheduler-4     ErrorHandler            : failed to send message 
to  channel 'stockFilesFromFTP' within timeout: -1 
```

我们打开的调试是

```
log4j.logger.org.springframework.aop=DEBUG
org.springframework.integration.channel.DirectChannel=DEBUG
org.springframework.integration.channel.MessagePublishingErrorHandler=DEBUG
org.springframework.integration.config.xml.PointToPointChannelParser=DEBUG 
```

你能建议我如何调试这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:47:31.007

我对 FTPclientfactory bean 使用了以下类型的配置。它也有超时参数，因此如果您因连接超时而遇到问题，这将对您有所帮助。

```
<bean id="testapp.standardFTPClientFactory" class="org.springframework.integration.ftp.DefaultFTPClientFactory"
        abstract="true">
        <property name="host" value="${ftp.host}"/>
        <property name="username" value="${ftp.username}"/>
        <property name="password" value="${ftp.password}"/>
        <property name="port" value="${ftp.port}"/>
        <property name="remoteWorkingDirectory" value="${ftp.remotedir}"/>
        <property name="dataTimeout" value="3600000"/>
        <property name="connectTimeout" value="${ftp.connectTimeout}"/>
        <property name="clientMode" value="2"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:44:37.697

使用调试级别日志记录运行。

您必须在频道上至少有一位订阅者`stockFilesFromFTP`。

# javascript - 在启动 Firebug 控制台之前自动执行 javascript 行

> ID：14343125
> 
> 赞同：0
> 
> 时间：2013-01-15T17:15:41.490
> 
> 标签：javascript, firefox, console, firebug

通常，在 linux/unix 终端中，可以使用预先确定的代码行来初始化控制台。我正在使用带有 Firebug 的 javascript 控制台，我问是否可以使用 Firebug 的 javascript 控制台（可能是一些脚本......）。

**编辑1：**

一个例子：

最初，当我启动 Firebug 的 javascript 控制台时，Jquery 库不能与 一起使用`$`，因为 Jquery 是我项目中的命名空间，所以我必须编写一行代码以将终端 simbol`$`用作 Jquery（类似于`$=PROJECT.NAME.$`）；

每次刷新 Firefox 时，我都想避免这行代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:34:43.947

如果您不想在代码中重新分配 $，我建议创建一个小书签来执行重新分配。每次打开 Firebug 时都必须单击书签。

名称：$重新分配

网址：javascript:$=PROJECT.NAME.$

（创建书签的方式与创建书签的方式相同，但它不是打开网页，而是执行 URL 中的 javascript。）

# java - Ant 构建适用于一个系统，而不适用于另一个系统

> ID：14343134
> 
> 赞同：1
> 
> 时间：2013-01-15T17:16:13.083
> 
> 标签：java, ant, compiler-errors, hudson, findbugs

我们最近将 FindBugs 添加到我们的构建和测试过程中，但是当我们使用 @SuppressWarning 注释时我们遇到了构建问题。

更有趣的是，代码将在我们的三台开发人员笔记本电脑上编译，但不能在我们的构建系统上编译，即使代码相同并且使用的 Java 编译器也相同（1.5.0_22 - 32 位）。

问题是：我们有一个项目 HCSBeans，它依赖于另一个项目 CommonLibrary。CommonLibrary 使用一次@SuppressWarning，而 HCSBeans 没有。CommonLibrary 构建在我们的笔记本电脑和构建系统上，但 HCSBeans 不构建在构建系统上。在这一点上，我找不到构建系统和我的笔记本电脑之间的区别。

这是构建系统的详细 Ant 输出（注意：我们没有使用 Maven）：

```
-do-compile:
    [mkdir] Created dir: C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\build\empty
    [javac] com\hcs\orc\ui\BindingHandler.java added as com\hcs\orc\ui\BindingHandler.class doesn't exist.
    [javac] com\hcs\orc\ui\JRadioButtonUpdatable.java added as com\hcs\orc\ui\JRadioButtonUpdatable.class doesn't exist.
    [javac] com\hcs\orc\ui\JTextAreaSizeFix.java added as com\hcs\orc\ui\JTextAreaSizeFix.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCAssignmentPanel.java added as com\hcs\orc\ui\ORCAssignmentPanel.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCCheckBox.java added as com\hcs\orc\ui\ORCCheckBox.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCLabel.java added as com\hcs\orc\ui\ORCLabel.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCLabelBeanInfo.java added as com\hcs\orc\ui\ORCLabelBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCPanel.java added as com\hcs\orc\ui\ORCPanel.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCPanelBeanInfo.java added as com\hcs\orc\ui\ORCPanelBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCRadioButton.java added as com\hcs\orc\ui\ORCRadioButton.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCRadioButtonBeanInfo.java added as com\hcs\orc\ui\ORCRadioButtonBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCRadioButtonGroup.java added as com\hcs\orc\ui\ORCRadioButtonGroup.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCRadioButtonGroupBeanInfo.java added as com\hcs\orc\ui\ORCRadioButtonGroupBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCScrollPane.java added as com\hcs\orc\ui\ORCScrollPane.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCScrollPaneBeanInfo.java added as com\hcs\orc\ui\ORCScrollPaneBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCSeparator.java added as com\hcs\orc\ui\ORCSeparator.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCSeparatorBeanInfo.java added as com\hcs\orc\ui\ORCSeparatorBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCSplitPane.java added as com\hcs\orc\ui\ORCSplitPane.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCSplitPaneBeanInfo.java added as com\hcs\orc\ui\ORCSplitPaneBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTabbedPane.java added as com\hcs\orc\ui\ORCTabbedPane.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTabbedPaneBeanInfo.java added as com\hcs\orc\ui\ORCTabbedPaneBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTable.java added as com\hcs\orc\ui\ORCTable.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTableBeanInfo.java added as com\hcs\orc\ui\ORCTableBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTextArea.java added as com\hcs\orc\ui\ORCTextArea.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTextAreaBeanInfo.java added as com\hcs\orc\ui\ORCTextAreaBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTextField.java added as com\hcs\orc\ui\ORCTextField.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTextFieldBeanInfo.java added as com\hcs\orc\ui\ORCTextFieldBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTextPane.java added as com\hcs\orc\ui\ORCTextPane.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTextPaneBeanInfo.java added as com\hcs\orc\ui\ORCTextPaneBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\RoundButtonBorder.java added as com\hcs\orc\ui\RoundButtonBorder.class doesn't exist.
    [javac] com\hcs\orc\ui\TextLabelUI.java added as com\hcs\orc\ui\TextLabelUI.class doesn't exist.
    [javac] com\hcs\orc\ui\TextTransfer.java added as com\hcs\orc\ui\TextTransfer.class doesn't exist.
    [javac] com\hcs\orc\ui\TouchButton.java added as com\hcs\orc\ui\TouchButton.class doesn't exist.
    [javac] com\hcs\orc\ui\TouchButtonUpdatable.java added as com\hcs\orc\ui\TouchButtonUpdatable.class doesn't exist.
    [javac] C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\resources\black_box.gif skipped - don't know how to handle it
    [javac] C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\resources\black_box_disabled.gif skipped - don't know how to handle it
    [javac] C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\resources\black_box_x.gif skipped - don't know how to handle it
    [javac] C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\resources\black_box_x_disabled.gif skipped - don't know how to handle it
    [javac] Compiling 34 source files to C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\build\classes
    [javac] Using external javac compiler
    [javac] Compilation arguments:
    [javac] '-d'
    [javac] 'C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\build\classes'
    [javac] '-classpath'
    [javac] 'C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\build\classes;C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\CommonLibrary\dist\CommonLibrary.jar;C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\lib\swing-layout-1.0.4.jar'
    [javac] '-sourcepath'
    [javac] 'C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\build\empty'
    [javac] '-target'
    [javac] '1.5'
    [javac] '-encoding'
    [javac] 'windows-1252'
    [javac] '-g'
    [javac] '-source'
    [javac] '1.5'
    [javac]
    [javac] The ' characters around the executable and arguments are
    [javac] not part of the command.
    [javac] Files to be compiled:
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\BindingHandler.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\JRadioButtonUpdatable.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\JTextAreaSizeFix.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCAssignmentPanel.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCCheckBox.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCLabel.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCLabelBeanInfo.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCPanel.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCPanelBeanInfo.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCRadioButton.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCRadioButtonBeanInfo.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCRadioButtonGroup.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCRadioButtonGroupBeanInfo.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCScrollPane.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCScrollPaneBeanInfo.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCSeparator.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCSeparatorBeanInfo.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCSplitPane.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCSplitPaneBeanInfo.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTabbedPane.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTabbedPaneBeanInfo.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTable.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTableBeanInfo.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTextArea.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTextAreaBeanInfo.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTextField.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTextFieldBeanInfo.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTextPane.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTextPaneBeanInfo.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\RoundButtonBorder.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\TextLabelUI.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\TextTransfer.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\TouchButton.java
    [javac]     C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\src\com\hcs\orc\ui\TouchButtonUpdatable.java
    [javac] An exception has occurred in the compiler (1.5.0_22). Please file a bug at the Java Developer Connection (http://java.sun.com/webapps/bugreport)  after checking the Bug Parade for duplicates. Include your program and the following diagnostic in your report.  Thank you.
    [javac] com.sun.tools.javac.code.Symbol$CompletionFailure: file edu\umd\cs\findbugs\annotations\SuppressWarnings.class not found
      [ant] Exiting C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\HCSBeans\build.xml.
  [antcall] Exiting C:\Documents and Settings\stephen\.hudson\jobs\ORC Trunk\workspace\orc\nb\build.xml. 
```

这是我笔记本电脑的详细 Ant 输出：

```
-do-compile:
    [mkdir] Created dir: C:\hcs\orc\nb\HCSBeans\build\empty
    [javac] com\hcs\orc\ui\BindingHandler.java added as com\hcs\orc\ui\BindingHandler.class doesn't exist.
    [javac] com\hcs\orc\ui\JRadioButtonUpdatable.java added as com\hcs\orc\ui\JRadioButtonUpdatable.class doesn't exist.
    [javac] com\hcs\orc\ui\JTextAreaSizeFix.java added as com\hcs\orc\ui\JTextAreaSizeFix.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCAssignmentPanel.java added as com\hcs\orc\ui\ORCAssignmentPanel.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCCheckBox.java added as com\hcs\orc\ui\ORCCheckBox.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCLabel.java added as com\hcs\orc\ui\ORCLabel.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCLabelBeanInfo.java added as com\hcs\orc\ui\ORCLabelBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCPanel.java added as com\hcs\orc\ui\ORCPanel.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCPanelBeanInfo.java added as com\hcs\orc\ui\ORCPanelBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCRadioButton.java added as com\hcs\orc\ui\ORCRadioButton.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCRadioButtonBeanInfo.java added as com\hcs\orc\ui\ORCRadioButtonBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCRadioButtonGroup.java added as com\hcs\orc\ui\ORCRadioButtonGroup.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCRadioButtonGroupBeanInfo.java added as com\hcs\orc\ui\ORCRadioButtonGroupBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCScrollPane.java added as com\hcs\orc\ui\ORCScrollPane.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCScrollPaneBeanInfo.java added as com\hcs\orc\ui\ORCScrollPaneBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCSeparator.java added as com\hcs\orc\ui\ORCSeparator.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCSeparatorBeanInfo.java added as com\hcs\orc\ui\ORCSeparatorBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCSplitPane.java added as com\hcs\orc\ui\ORCSplitPane.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCSplitPaneBeanInfo.java added as com\hcs\orc\ui\ORCSplitPaneBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTabbedPane.java added as com\hcs\orc\ui\ORCTabbedPane.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTabbedPaneBeanInfo.java added as com\hcs\orc\ui\ORCTabbedPaneBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTable.java added as com\hcs\orc\ui\ORCTable.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTableBeanInfo.java added as com\hcs\orc\ui\ORCTableBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTextArea.java added as com\hcs\orc\ui\ORCTextArea.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTextAreaBeanInfo.java added as com\hcs\orc\ui\ORCTextAreaBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTextField.java added as com\hcs\orc\ui\ORCTextField.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTextFieldBeanInfo.java added as com\hcs\orc\ui\ORCTextFieldBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTextPane.java added as com\hcs\orc\ui\ORCTextPane.class doesn't exist.
    [javac] com\hcs\orc\ui\ORCTextPaneBeanInfo.java added as com\hcs\orc\ui\ORCTextPaneBeanInfo.class doesn't exist.
    [javac] com\hcs\orc\ui\RoundButtonBorder.java added as com\hcs\orc\ui\RoundButtonBorder.class doesn't exist.
    [javac] com\hcs\orc\ui\TextLabelUI.java added as com\hcs\orc\ui\TextLabelUI.class doesn't exist.
    [javac] com\hcs\orc\ui\TextTransfer.java added as com\hcs\orc\ui\TextTransfer.class doesn't exist.
    [javac] com\hcs\orc\ui\TouchButton.java added as com\hcs\orc\ui\TouchButton.class doesn't exist.
    [javac] com\hcs\orc\ui\TouchButtonUpdatable.java added as com\hcs\orc\ui\TouchButtonUpdatable.class doesn't exist.
    [javac] C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\resources\black_box.gif skipped - don't know how to handle it
    [javac] C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\resources\black_box_disabled.gif skipped - don't know how to handle it
    [javac] C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\resources\black_box_x.gif skipped - don't know how to handle it
    [javac] C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\resources\black_box_x_disabled.gif skipped - don't know how to handle it
    [javac] Compiling 34 source files to C:\hcs\orc\nb\HCSBeans\build\classes
    [javac] Using external javac compiler
    [javac] Compilation arguments:
    [javac] '-d'
    [javac] 'C:\hcs\orc\nb\HCSBeans\build\classes'
    [javac] '-classpath'
    [javac] 'C:\hcs\orc\nb\HCSBeans\build\classes;C:\hcs\orc\nb\CommonLibrary\dist\CommonLibrary.jar;C:\Program Files (x86)\NetBeans 7.2\platform\modules\ext\swing-layout-1.0.4.jar'
    [javac] '-sourcepath'
    [javac] 'C:\hcs\orc\nb\HCSBeans\build\empty'
    [javac] '-target'
    [javac] '1.5'
    [javac] '-encoding'
    [javac] 'windows-1252'
    [javac] '-g'
    [javac] '-source'
    [javac] '1.5'
    [javac]
    [javac] The ' characters around the executable and arguments are
    [javac] not part of the command.
    [javac] Files to be compiled:
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\BindingHandler.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\JRadioButtonUpdatable.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\JTextAreaSizeFix.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCAssignmentPanel.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCCheckBox.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCLabel.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCLabelBeanInfo.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCPanel.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCPanelBeanInfo.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCRadioButton.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCRadioButtonBeanInfo.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCRadioButtonGroup.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCRadioButtonGroupBeanInfo.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCScrollPane.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCScrollPaneBeanInfo.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCSeparator.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCSeparatorBeanInfo.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCSplitPane.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCSplitPaneBeanInfo.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTabbedPane.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTabbedPaneBeanInfo.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTable.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTableBeanInfo.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTextArea.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTextAreaBeanInfo.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTextField.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTextFieldBeanInfo.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTextPane.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\ORCTextPaneBeanInfo.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\RoundButtonBorder.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\TextLabelUI.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\TextTransfer.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\TouchButton.java
    [javac]     C:\hcs\orc\nb\HCSBeans\src\com\hcs\orc\ui\TouchButtonUpdatable.java 
```

除了编译错误，我没有看到任何区别。

其他值得注意的事情：

1.  从 SVN 删除并重新检查两个项目的源代码。
2.  比较Java的版本。两者都是 32 位 Java 1.5.0_22。我知道这已经过时了，但我们有客户坚持这样做。
3.  在 CommonLibrary 中只有一个对 @SuppressWarning 的引用，而在 HCSBeans 中没有。
4.  我们在构建 CommonLibrary 时使用了 annotations.jar 和 jsr305.jar，但是它们没有与它打包，也没有被 HCSBeans 引用。构建后它们不应该是必需的。
5.  我们的笔记本电脑是 64 位的，而构建系统是 32 位的，但两个 Java 安装都是 32 位的。
6.  所有计算机都是 MS Windows。

**更新**

我将构建服务器切换为使用 Java 1.6 编译 HCSBean 并且代码编译（在删除了对 SwingUtilities2 的未使用导入之后），但是如果我将其切换回 Java 1.5，它仍然会失败并出现相同的错误。我开始怀疑 Java 1.5 编译器有问题。

**更新 2**

一位同事发现了实际的差异。不知道为什么会发生，但这是生成的构建之间的差异。在我们的笔记本电脑上，CommonLibrary.jar MANIFEST.MF 文件包含以下行：

```
Class-Path: lib/annotations.jar lib/jsr305.jar 
```

这意味着在构建 HCSBeans 项目时，它会找到它需要的 annotations.jar 文件。但是，当我们在构建服务器上构建时，这个 Class-Path 行不存在。不知道为什么，但这是下一个调查路线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:09:04.427

所以我们发现了问题。我们的笔记本电脑安装了 NetBeans（即使我们不是直接从 NetBeans 构建）正在使用 CopyLibs 构建 jar 文件，该文件将所需的行添加到 Manifest.MF 文件中：

```
Class-Path: lib/annotations.jar lib/jsr305.jar 
```

但是，我们的构建服务器（没有安装 NetBeans）使用 j2seproject1:jar 来构建 jar 文件。

解决方案是在我们的构建服务器上构建时将其添加到 -D Javac 属性中（对于那些感兴趣的人来说，这是 Hudson）：

```
libs.CopyLibs.classpath=C:\\Documents and Settings\\stephen\\.hudson\\jobs\\ORC Trunk\\workspace\\orc\\lib\\netbeans\\org-netbeans-modules-java-j2seproject-copylibstask.jar 
```

现在我们的笔记本电脑和构建服务器都在使用 CopyLibs 并且它们都可以编译。

哎呀！搞清楚什么乱七八糟的。

感谢一路上给我指点的人（@Peter-Eliot & @Disco3）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:23:48.830

看起来该库使用的是 FindBugs 版本的 SuppressWarning，而不是`java.lang`版本。`@SuppressWarning`和`@java.lang.SuppressWarning`/或删除 FindBugs 版本的 SuppressWarning 的导入，看看是否可以修复它？

还可以尝试将 FindBugs 作为库添加到 hudson 查看的类路径中。看起来您正在使用 NetBeans 构建您的开发人员机器，如果 Netbeans 将 FindBugs 偷偷带入 ant 使用的类路径，我不会感到震惊

# javascript - 谷歌地图 api 初始缩放错误

> ID：14343140
> 
> 赞同：0
> 
> 时间：2013-01-15T17:16:27.033
> 
> 标签：javascript, php, google-maps

我有以下代码：

```
<?php if($_GET['postcode']){ ?>

//alert(<?php echo $_GET['postcode'];?>)

<?php }?>

      function initialize() {
        var mapOptions = {
          zoom: 6,
          center: new google.maps.LatLng("<?php echo $_GET['postcode'];?>"),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var map = new google.maps.Map(document.getElementById('map_canvas'),mapOptions);
        map.setTilt(45);

        var addressArray = new Array("<?php echo $_GET['postcode'];?>");
        var geocoder = new google.maps.Geocoder();

        var markerBounds = new google.maps.LatLngBounds();

        for (var i = 0; i < addressArray.length; i++) {
        geocoder.geocode( { 'address': addressArray[i]}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {

        var contentString = '<div id="content">'+
        '<div id="siteNotice">'+
        '</div>'+
        '<h4 id="firstHeading" class="firstHeading">HELLO</h4>'+
        '<div id="bodyContent">'+
        '<p><b>Hello!!</b>' + <?php echo $_GET["order_id"];?> + '</p>'+
        '</div>'+
        '</div>';

        var infowindow = new google.maps.InfoWindow({
        content: contentString
        });

        var marker = new google.maps.Marker({
        map: map, 
        title:"Order Number",
        position: results[0].geometry.location
        });

        markerBounds.extend(results[0].geometry.location);
        map.fitBounds(markerBounds);

        google.maps.event.addListener(marker, 'click', function() {
        infowindow.open(map,marker);
        });

        } else {
        alert("Geocode was not successful for the following reason: " + status);
        }
        });
        }
      }

      function loadScript() {
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&' +
            'callback=initialize';
        document.body.appendChild(script);
      }

      window.onload = loadScript;
    </script> 
```

出于某种原因，当地图加载时，缩放级别已满，因此它会直接放大到标记中。我尝试在初始化部分调整缩放级别，但我没有高兴。我的猜测是，它与标记边界有关。任何人都知道如何调整缩放以使其不会完全缩放到标记上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:31:19.787

> 出于某种原因，当地图加载时，缩放级别已满，因此它会直接放大到标记中。

如果你有一个包含一个 LatLng 的[边界](https://developers.google.com/maps/documentation/javascript/reference#Map)对象，它应该尽可能放大。从文档中：

```
fitBounds(bounds:LatLngBounds) 无 将视口设置为包含给定的边界。

```

如果你只有一个标记，不要使用 fitBounds，使用 .setCenter （在标记的坐标上，.setZoom （到你想要的缩放级别）。

如果您的代码需要处理这两种情况（一个标记或多个标记），请计算您添加到边界的标记，如果数字是 1，则使用 .setCenter/.setZoom，如果超过 1，请使用 .fitBounds。

# java - 用Java制作3D？DLP 链接眼镜

> ID：14343146
> 
> 赞同：1
> 
> 时间：2013-01-15T17:16:47.407
> 
> 标签：java, 3d

对于一个学校项目，我们有带有 Acer 投影仪的 DLP Link 眼镜，我们想用 Java 开发一个演示应用程序，展示一些 3D 功能。不幸的是，我找不到关于如何制作它的好资源，我想知道你有什么想法吗？

如何将我的应用程序链接到这些眼镜？我怎样才能轻松地用 Java 开发一些东西，让我能够真正显示 3D ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:19:35.090

如果运行您的代码的系统中的显卡支持 3D 输出，您只需使用标准的 OpenGL 或 DirectX 3D 功能，其余的由显卡完成。您可能根本不必担心您的显卡是否在 3D 投影仪、2D 常规显示器或它使用哪种类型的眼镜上输出东西……

为此，您可以从这里开始：[http ://en.wikipedia.org/wiki/Java_OpenGL](http://en.wikipedia.org/wiki/Java_OpenGL)

# python - 如何正确地将键/值参数的字典传递给 kwargs？

> ID：14343147
> 
> 赞同：2
> 
> 时间：2013-01-15T17:16:53.350
> 
> 标签：python, keyword-argument

我有以下内容：

```
class Foo:
        def __init__(self, **kwargs):
                print kwargs

settings = {foo:"bar"}
f = Foo(settings) 
```

这会产生一个错误：

```
Traceback (most recent call last):
  File "example.py", line 12, in <module>
    settings = {foo:"bar"}
NameError: name 'foo' is not defined 
```

如何正确地将键/值 args 的字典传递给 kwargs？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T17:17:25.190

使用[`**kw`调用约定](http://docs.python.org/2/reference/expressions.html#calls)：

```
f = Foo(**settings) 
```

这适用于任何采用关键字参数的可调用对象：

```
def foo(spam='eggs', bar=None):
    return spam, bar

arguments = {'spam': 'ham', 'bar': 'baz'}
print foo(**arguments) 
```

或者您可以使用关键字参数调用该函数：

```
f = Foo(foo="bar")
foo(spam='ham', bar='baz') 
```

您的错误无关紧要，您没有定义`foo`，您可能打算将其设为字符串：

```
settings = {'foo': 'bar'} 
```

# .net-4.0 - 防止 SelectionChanged 在 DataBinding 操作期间进行评估

> ID：14343150
> 
> 赞同：1
> 
> 时间：2013-01-15T17:17:11.400
> 
> 标签：.net-4.0, datagridview

有一种情况，我需要在完成绑定操作`SelectionChanged`之前抑制事件逻辑。`DataGridView`

我尝试设置一个布尔标志变量来表示绑定操作，但它基本上会在`DataBindingComplete`添加每一行之后触发。

有没有办法我可以`Dirty`为整个控件设计一个标志，这样`SelectionChanged`事件才被触发，直到完整`DataSource`绑定到`DataGridView`？

# joomla - 如何为 joomla 2.5 模块添加 2 个模板

> ID：14343153
> 
> 赞同：0
> 
> 时间：2013-01-15T17:17:17.343
> 
> 标签：joomla

我想为 Joomla 2.5 构建我的第一个模块，但我有一个问题。我想为我的模块提供多个模板，站点管理员可以从模块的配置中选择模板。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:25:51.590

您计划创建一个 joomla 2.5 前端模块。然后您可以实现您的要求如下

您可以使用 joomla 模块覆盖概念。对于您使用的每个模板，您可以在模板文件夹中编写模块以进行覆盖。

如下 TEMPLATE_NAME/html/mod_login/default.php

有关更多详细信息[，请查看此](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)。

我希望这能解决你的问题..

# drupal - Drupal 管理新闻“我保存的搜索”视图

> ID：14343158
> 
> 赞同：-1
> 
> 时间：2013-01-15T17:17:47.750
> 
> 标签：drupal, views

我使用 Drupal 管理新闻属性 6.0 / 1.2 用户可以搜索一个词，之后用户可以保存这个搜索词。但是所有用户都可以看到这个保存的搜索。

我只想显示用户自己保存的搜索。仅示例我保存的搜索...我尝试添加参数但不能。

我怎么能做这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:48:58.960

您没有指定版本以及您使用什么模块来实现，但我认为这个模块非常适合保存的搜索 -

[http://drupal.org/project/views_savedsearches](http://drupal.org/project/views_savedsearches)

而且您必须设置权限，例如谁可以访问哪个搜索，您一定会实现您正在寻找的...

# java - GridLayout 中的文本字段宽度不会改变

> ID：14343159
> 
> 赞同：0
> 
> 时间：2013-01-15T17:17:52.173
> 
> 标签：java, swing, jtextfield

我正在尝试将文本字段放在标签旁边。而不是该文本字段位于标签下方并填充一行。我试图给像 JTextfield(10) 这样的列，但这也没有用。这是关于我正在使用的布局吗？

```
public class guessTheNumber extends JFrame{

private JLabel info, info2, info3;
private JTextField input;

public guessTheNumber(){

    super("Guessing Game");
    setLayout(new GridLayout(6,3));

    info = new JLabel("I have a number between 1 and 1000.",SwingConstants.CENTER);
    add(info);

    info2 = new JLabel("Can you guess my number?",SwingConstants.CENTER);
    add(info2);

    info3 = new JLabel("Please enter your first guess:");
    add(info3);

    input = new JTextField("",10);
    add(input);

}
public static void main(String[] args) {

    guessTheNumber gtn = new guessTheNumber();
    gtn.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    gtn.setLocationRelativeTo(null);
    gtn.setSize(500, 200);
    gtn.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:29:00.927

尝试使用`JPanel`. 也就是在JPanel的布局管理器中添加`JPanel`，`JFrame`然后设置。你知道，

```
JPanel jp = new JPanel();
add(jp); 
jp.setLayout(new GridLayout(6,3)); 
```

请记住，您现在必须将标签和文本字段添加到面板而不是 JFrame

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:08:21.987

我很惊讶将初始化更改为`GridLayout(6,4)`不起作用。

如果您想`info3`和`input`一起显示，您可以尝试以下摘录：

```
info3 = new JLabel("Please enter your first guess:");
input = new JTextField("",10);

// Combine both components in a sub-container
JPanel containerPanel = new JPanel();
containerPanel.add(info3);    
containerPanel.add(input);

// Add the container to the guessTheNumber
add(containerPanel); 
```

# wpf - WPF组合框上的选定索引更改？

> ID：14343163
> 
> 赞同：2
> 
> 时间：2013-01-15T17:18:14.563
> 
> 标签：wpf, vb.net, combobox, selectionchanged

我正在将我的应用程序从 WinForms 转换为 WPF。我在WinForms中遇到了这个问题，如果我清除一个组合框，它不会触发combobox.selectedindexchange。它仅在用户实际更改索引时触发。

这就是我需要的功能。但是在 WPF 中我只能找到 combobox.SelectionChanged。不幸的是，这会在索引更改和清除组合框（任何更改）时触发。

在 WPF 中，如何仅在用户更改索引时触发事件？我假设有一个我缺少的解决方案，就像 WinForms 解决方案一样。我试图不玩带有全局变量的游戏，并且不得不跟踪以前选择的内容……那真是一团糟。

Mouseleave 也是一团糟。

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:02:54.237

在您的情况下，您可以在`SelectionChanged`事件中实施：

```
Private Sub OnSelectionChanged(sender As System.Object, e As System.Windows.Controls.SelectionChangedEventArgs)
    Dim combo = TryCast(sender, ComboBox)

    If combo.SelectedItem IsNot Nothing Then
        'do something
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T18:05:58.187

您可以删除事件处理程序，调用 clear 方法并再次添加事件处理程序。

示例代码：

```
<StackPanel>
    <ComboBox Name="myCB"                   
              SelectionChanged="ComboBox_SelectionChanged">
         <ComboBoxItem>test1</ComboBoxItem>
         <ComboBoxItem>test2</ComboBoxItem>
         <ComboBoxItem>test3</ComboBoxItem>
     </ComboBox>

     <Button Content="Clear" Click="Button_Click" />
</StackPanel> 
```

主窗口类：

```
Class MainWindow 

    Private Sub ComboBox_SelectionChanged(sender As System.Object, e As System.Windows.Controls.SelectionChangedEventArgs)
        Console.WriteLine("Selected index: {0}", CType(sender, ComboBox).SelectedIndex)
    End Sub

    Private Sub Button_Click(sender As System.Object, e As System.Windows.RoutedEventArgs)
        RemoveHandler Me.myCB.SelectionChanged, AddressOf ComboBox_SelectionChanged
        Me.myCB.Items.Clear()
        AddHandler Me.myCB.SelectionChanged, AddressOf ComboBox_SelectionChanged    
    End Sub
End Class 
```

# openlayers - Geoserver+Openlayers：如何在 WPS 过滤几何上执行专题地图

> ID：14343164
> 
> 赞同：1
> 
> 时间：2013-01-15T17:18:15.297
> 
> 标签：openlayers, gis, geoserver, wms, wps

我目前正在使用 Geoserver 开发一个小型 Openlayers 项目。

我一直在使用 WMS 基础层和 WPS 服务来执行大多数计算，例如缓冲区、相交等。执行和链接这些操作非常容易。

但是，我似乎找不到在几何对象上执行专题地图的方法。我认为可能的唯一方法是将 SLD 文件附加到 WMS 请求，但这只会破坏使用 WPS 链接操作的意义，我认为它实际上会完全取代 WPS。

WMS是要走的路吗？

# html - iPad 离线 WebApp 游戏

> ID：14343165
> 
> 赞同：-1
> 
> 时间：2013-01-15T17:18:17.423
> 
> 标签：html, caching, web-applications, cache-manifest

我想通过离线 web 应用程序（使用 cache.manifest 和 canvas）在 iPad 上制作一个超级基本的一键式太空入侵者游戏。敌人会飞过你的船，你只需按下按钮向他们射击，无需左右移动。在我开始开发之前，我想知道它是否能达到鼻烟效果。

有人有制作简单的离线网络应用游戏的经验吗？这样的游戏会表现出色吗？它会支持详细的图像图形（不仅仅是几何基础）吗？我所需要的只是基本的 Flash 级游戏支持/性能。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:49:41.927

[是的，您可以使用WebGL](http://pt.wikipedia.org/wiki/WebGL)获得良好的性能。如果你想要一个例子，试试这个 HTML5 版本的[愤怒的小鸟](http://chrome.angrybirds.com/)，它是为了展示 WebGL 技术而开发的。

也有很多 HTML5 游戏框架来帮助开发，一些例子是：

[EaselJSlimeJs](http://www.createjs.com/#!/EaselJS)[影响](http://impactjs.com/)[Gamequery](http://gamequeryjs.com/)
[_](http://www.limejs.com/)

# search-engine - 页面排名信息

> ID：14343166
> 
> 赞同：0
> 
> 时间：2013-01-15T17:18:25.703
> 
> 标签：search-engine, blogs, pagerank

我看到人们吹嘘或讨论他们的页面排名信息。

如何客观地批评某人所说的话。例如，如果有人说他们的博客是“Pagerank 3”，那到底是什么意思？

我是否有足够的信息来真正理解该指标的效用？如： 1\. 什么搜索引擎 2\. 需要什么搜索查询才能在搜索结果中看到博客 3\. 其他？

据我了解，“pagerank 3”意味着该博客将是特定查询搜索结果中的第三个结果。但也许这是对 pagerank 的一个非常基本的理解，就像事实证明它们是层一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:38:08.820

我会给出更完整的答案。

在谷歌开始时，结果是这样排序的

* * *

#1 结果：Pagerank 分数 * 相关性分数（例如：100）

#2 结果：Pagerank 分数 * 相关性分数（例如：90）

#3 结果：Pagerank 分数 * 相关性分数（例如：80）

* * *

为了了解网站所有者的 pagerank 是什么，谷歌给出了一个指标（这是一个例子）：

* * *

实际 PageRank 分数 > 10000 = PageRank 指标（由 google 提供）5

实际 PageRank 分数 > 1000 = PageRank 指标 4

实际 PageRank 分数 > 100 = PageRank 指标 3

实际 PageRank 分数 > 10 = PageRank 指标 2

实际 PageRank 分数 > 5 = PageRank 指标 1

实际 PageRank 分数 > 0 = PageRank 指标 0

* * *

但是，到目前为止，Pagerank 已经成为解释排名的数百个指标中的一个指标。

# php - 将目录路径转换为 javascript 对象

> ID：14343169
> 
> 赞同：1
> 
> 时间：2013-01-15T17:18:30.540
> 
> 标签：php, javascript, dot-operator

我有一个 PHP 中的目录路径/文件列表，如下所示：

```
path1/path2/foo1_jpg
path1/foo2_png
path2/path3/bar_pdf
path2/
path1/ 
```

我想将这些转换为 javascript 对象。我想只是将“/”转换为句点，然后说类似的话：

```
<script>
    var files = new Array();
    <?php $dirlist = getFileList("images",true); ?> //returns array of directory paths (and other info)
    <?php foreach($dirlist as $file): ?>
        files.<?=$file['name']?> = "$file['name']"; 

        //where $file['name'] returns, for example, path1.path2.foo1_jpg

    <?php endforeach; ?>
console.log(files);
</script> 
```

我唯一的问题是文件名或目录是否以数字开头，即我不能说：`files.001.foo = "bar";`

我相信我需要重载点运算符来处理以数字开头的名称。这是最好的方法，还是有其他方法？

我实际上是在尝试将表单的 php 字符串解析`"x1x2...xn/y1y2...yn/..."`为嵌套的 javascript 对象，其中 x_i、y_i、z_i 等是“/”以外的字符`x1x2x3...xn.y1y2...yn.z1z2z3...zn = {};`。我想我在[这里](https://stackoverflow.com/questions/5484673/javascript-how-to-dynamically-create-nested-objects-using-object-names-given-by)找到了一些解决方案，因为该用户还尝试基于分隔字符串（在他的情况下为“_”）动态添加 javascript 对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:30:56.133

Where do I start: Don't use `new Array()` to create a new array, just use the literal `[]`. Google the reasons.

An array isn't the same as an object - it's an augmentation of `Object`. so it doesn't support the dot-notation as such. Also, your PHP code is off: the quoted `$files['name']` is ambiguous (PHP doesn't know what to print out: the value of $file, followed by `['name']` as a simple string, or `$file['name']`. But more than that: it's not in php tags...

Here's one way to do what you want - but you shouldn't use it:

```
var files = {};//create object. properties can be numeric, too
<?php
    foreach ($dirlist as $key => $file)
    {//use $key for numeric index/properties
        echo 'files['.$key.'] = "'.$file['name'].'";';
        //or with double quotes:
        echo "files[$key] = '{$file['name']}';";//need the curly's for ambiguity, or rather avoid ambiguity
    }
?> 
```

If you want the properties to have leading zeroes, then you can by either using `str_pad` or `substr('000'.$key,-3);`

Here's what I'd do:

```
var files = JSON.parse('<?= json_encode($dirlist); ?>'); 
```

That's it.

# android - 运行 robolectric 测试时不调用 TextWatcher 方法和覆盖的 EditText.onTextChanged()

> ID：14343172
> 
> 赞同：0
> 
> 时间：2013-01-15T17:18:51.680
> 
> 标签：android, unit-testing, robolectric

我做了一个非常简单的 Android 活动：

```
public class SimpleActivity extends Activity {

private EditText editText1;
private EditText editText2;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    LinearLayout verticalLayout = new LinearLayout(this);
    verticalLayout.setOrientation(LinearLayout.VERTICAL);
    editText1 = new EditText(this) {
        @Override
        protected void onTextChanged(CharSequence text, int start,
                int lengthBefore, int lengthAfter) {
            // TODO Auto-generated method stub
            super.onTextChanged(text, start, lengthBefore, lengthAfter);
        }
    };
    editText1.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            System.out.println(s.toString());
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }
    });
    editText1.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
    verticalLayout.addView(editText1);
    editText2 = new EditText(this);
    editText2.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
    verticalLayout.addView(editText2);
    setContentView(verticalLayout);
}

public EditText getEditText1() {
    return editText1;
}

public EditText getEditText2() {
    return editText2;
}

} 
```

当我在我的 Android 设备上运行此代码时，会在组件初始化时调用重写的 EditText.onTextChanged() 方法和 TextWatcher.onTextChanged() 方法。当我调用方法 editText1.setText("text") 时，它们也被正确调用

当我在 Roboelectric 测试运行器中创建 SimpleActivity 时，它已创建并且 editText1/editText2 不为空，但是在组件初始化和调用 EditText.setText() 时不会调用 EditText.onTextChanged() 和 TextWatcher.onTextChanged() 如何制作 TextWatcher工作？它是我的应用程序的重要部分，如果不处理文本更改事件，就无法对其进行测试。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:58:02.550

使用 Robolectric 1.1，我测试了这段代码：

```
@RunWith(RobolectricTestRunner.class)
public class TestSimpleActivity {

    @Test
    public void testMethod() {
        SimpleActivity activity = new SimpleActivity();
        activity.onCreate(null);
        activity.getEditText1().setText("hello world");
    }

} 
```

我能够看到 TextWatcher.onTextChanged() 触发，但不是 EditText.onTextChanged()。如果两者都被解雇，那将是理想的，但看看[https://github.com/pivotal/robolectric/blob/robolectric-1.1/src/main/java/com/xtremelabs/robolectric/shadows/ShadowTextView.java# L63](https://github.com/pivotal/robolectric/blob/robolectric-1.1/src/main/java/com/xtremelabs/robolectric/shadows/ShadowTextView.java#L63)。看起来 TextWatcher 会触发，但 onTextChange() 似乎没有为子类实现。

如果您需要该功能，则必须在 Robolectric 中实现它。不幸的是，Robolectric 在实施方面存在差距。

# c# - 使用嵌套 for 循环将 Lambda 转换为 Linq 语句

> ID：14343174
> 
> 赞同：1
> 
> 时间：2013-01-15T17:18:56.157
> 
> 标签：c#, linq, lambda

有没有办法重写`GetTransformedCollection`下面的方法，使其使用 Linq 语句而不是表达式？我目前正在尝试解决“无法将带有语句体的 lambda 表达式转换为表达式树”错误。

```
public class Obj1
{
    public int Id { get; set; }
    public string[] Names { get; set; }
    public string[] Tags { get; set; }
}

public class EntCollections
{
    private List<Obj1> _results;

    [SetUp]
    public void SetUp()
    {
        _results = new List<Obj1>
        {
            new Obj1 {Id = 1, Names = new[] {"n1"}, Tags = new[] {"abc", "def"}},
            new Obj1 {Id = 2, Names = new[] {"n2", "n3"}, Tags = new[] {"ghi"}},
            new Obj1 {Id = 3, Names = new[] {"n1", "n3"}, Tags = new[] {"def", "xyz"}}
        };
    }

    private static Dictionary<string, List<string>>
        GetTransformedCollection(IEnumerable<Obj1> results)
    {
        var list = new Dictionary<string, List<string>>();

        foreach (var result in results)
        {
            foreach (var id in result.Names)
            {
                if (list.ContainsKey(id))
                {
                    list[id].AddRange(result.Tags);
                }
                else
                {
                    list.Add(id, result.Tags.ToList());
                }
            }
        }

        return list;
    }

    [Test]
    public void Test()
    {
        var list = GetTransformedCollection(_results);

        Assert.That(list["n1"], Is.EquivalentTo(new [] { "abc", "def", "def", "xyz" }));
        Assert.That(list["n2"], Is.EquivalentTo(new [] { "ghi" }));
        Assert.That(list["n3"], Is.EquivalentTo(new [] { "ghi", "def", "xyz" }));
    } 
```

Ps 我不太担心结果类型是字典，这只是将其表示为返回类型的最简单的方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T17:26:11.240

我个人会使用 a [`ILookup`](http://msdn.microsoft.com/en-us/library/bb534291.aspx)，只要你有 a ，这是一个不错的选择`Dictionary<T1, List<T2>>`，并且是用 构建的[`ToLookup()`](http://msdn.microsoft.com/en-us/library/bb549211.aspx)：

```
// Flatten the objects (lazily) to create a sequence of valid name/tag pairs
var pairs = from result in results
            from name in result.Names
            from tag in result.Tags
            select new { name, tag };

// Build a lookup from name to all tags with that name
var lookup = pairs.ToLookup(pair => pair.name, pair => pair.tag); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T17:26:44.390

想法是找到结果字典的所有键，然后从原始序列中找到对应的值`Obj1`

```
var distinctNames = results.SelectMany(val => val.Names).Distinct();

return distinctNames
      .ToDictionary(name => name, 
                    name => results
                            .Where(res => res.Names.Contains(name))
                            .SelectMany(res => res.Tags)
                            .ToList()); 
```

# scala - Scala 2.10 与 2.9 不兼容

> ID：14343175
> 
> 赞同：4
> 
> 时间：2013-01-15T17:19:03.003
> 
> 标签：scala, scala-2.10, scala-2.9

什么是 Scala 2.10 与 2.9 不兼容以及如何处理它们？

尤其是核心库，但流行库的任何问题都可能很有趣。

感谢官方文档的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:33:14.817

不确定是否存在错误，但是[类型推断和存在类型存在问题，](https://issues.scala-lang.org/browse/SI-5330)现已修复（但尚未发布修复，因此当前版本 2.10.0 中仍然存在该问题）

它是[SI-5330](https://issues.scala-lang.org/browse/SI-5330)。在问题的描述（以及各种评论）中，有一些代码示例用于在 scala 2.9 中编译，而现在无法在 2.10 中编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:19:03.003

找到了其中的几个：

*   默认演员库是 Akka

迁移到 Akka：

[http://docs.scala-lang.org/overviews/core/actors-migration-guide.html](http://docs.scala-lang.org/overviews/core/actors-migration-guide.html)

或者包括旧的。例如使用 Maven：

```
<dependency>
  <groupId>org.scala-lang</groupId>
  <artifactId>scala-actors</artifactId>
  <version>2.10.0</version>
</dependency> 
```

*   扩展案例类会导致编译错误

不要从案例类继承。如果您使用案例类进行匹配，请使用提取器模式：

[http://www.scala-lang.org/node/112](http://www.scala-lang.org/node/112)

*   删除了一些不推荐使用的方法，`List`包括：`-`, `--`, `first`, `sort`...

看：

[http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.List](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.List)

[http://www.scala-lang.org/api/2.9.2/index.html#scala.collection.immutable.List](http://www.scala-lang.org/api/2.9.2/index.html#scala.collection.immutable.List)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T23:24:16.447

我认为总的来说它们不是源代码不兼容的。确实存在一些差异，特别是与存在和模式匹配相关的差异——一些是由于 2.10.0 上的新错误，一些是由于 2.9.2 上的旧错误已得到修复。

当然，很多不推荐使用的东西都被删除了，但这不言而喻。

# c# - 无法在 .NET 中使用 C# 创建可缩放的 png 图像

> ID：14343176
> 
> 赞同：1
> 
> 时间：2013-01-15T17:19:04.300
> 
> 标签：c#, .net, image-processing, visual-studio-2012, raster

我正在尝试基于字符串创建图像。图像需要是光栅的（否则如果我需要缩小它会失去分辨率）。我正在使用以下代码：

```
Bitmap bitmapimage = new Bitmap(200, 100);
Graphics bitmapGraphics = Graphics.FromImage(bitmapimage );   
bitmapGraphics .DrawString("test", new Font("Arial",50), Brushes.Black, new Point(0, 0));              
bitmapimage .Save("Image.png", System.Drawing.Imaging.ImageFormat.png);
textPictureBox.Image = bitmapimage ; 
```

我得到的是这样的图像（缩放后）：

![测试图像](../Images/79b84acaffeeee15b6162ef399fa8669.png)

为什么是这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:25:49.243

我认为您误解了“光栅”的含义。光栅图像是网格，每个网格位置有一个像素。当您将光栅图像放大到足够远时，即使使用抗锯齿等技术，网格也会变得清晰可见。

**另一方面，**矢量图形是基于***算法*的。它们存储有关如何在给定画布上再现图像的说明。当您缩放矢量图像时，图像将保持清晰，因为它仍然遵循指令，而不是简单地缩放先前的渲染。**

 **所有主要的图像类型（bmp、gif、png、jpeg）都是光栅类型，不支持矢量图形。png 图像是您的示例**被**光栅化...实际上，不可能创建*未*光栅化的 png 图像。矢量图像的一个示例是某些字体类型或 Photoshop (psd) 文件（有点……实际上，Photoshop 文件最终往往比矢量更光栅）。

在这种情况下，可能最简单的解决方案是首先将图像绘制得非常大......足够大以至于您不需要放大，并使用足够大的字体来填充空间。您还需要确保您使用的是完全矢量绘制的字体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T17:22:36.247

尝试使用 Vector Basic 图形，如果使用它，放大或缩小都不会出现问题

o [C# 中的矢量图形 (MSDN)](http://msdn.microsoft.com/en-us/library/t5c9b4dt.aspx)

o[示例项目 (MSDN)](http://code.msdn.microsoft.com/windowsapps/Drawing-bfc39296)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T19:08:22.033

**矢量**图形是可缩放的，而**光栅**则不是。
文本字体是可缩放的（除非您使用位图字体），但是一旦您在位图上绘制字符串，该文本就会变成光栅图像，因此无法再缩放。因此，如果您需要在位图上绘制文本，请尝试使用大图像并使用抗锯齿文本（同样，此图像无法缩放，但如果足够大，则无需放大）。

* * *

这是您的代码的修改版本（文本将与 PNG 图像一样大）：

添加以下内容`using`：

```
using System.Drawing.Imaging;
using System.Drawing.Drawing2D;
using System.Drawing.Text; 
```

将此行添加到您的表单中（作为私有类字段）：

```
 Random rnd = new Random(); 
```

其余代码：

```
 int scl = rnd.Next(100, 451);
        Bitmap bitmapimage = new Bitmap(2 * scl, scl);
        Graphics bitmapGraphics = Graphics.FromImage(bitmapimage);
        bitmapGraphics.CompositingMode = CompositingMode.SourceOver;
        bitmapGraphics.TextRenderingHint = TextRenderingHint.AntiAlias;  // text is now anti-aliased
        bitmapGraphics.SmoothingMode = SmoothingMode.HighQuality;
        bitmapGraphics.DrawString("test", new Font("Arial", scl * 9 / 10, GraphicsUnit.Pixel), Brushes.Black, new Point(0, 0));
        bitmapimage.Save("Image.png", ImageFormat.Png);
        bitmapGraphics.Dispose(); 
```

顺便说一句，如果您在打印机的 Graphics 对象上绘制文本，该文本仍然是可缩放的，因为打印机不使用像素（但如果您在打印机的 Graphics 对象上绘制光栅图像，如果放大，该图像会变得模糊） .**

# jquery - 在春季使用 jquery 表单发布到数据库

> ID：14343177
> 
> 赞同：2
> 
> 时间：2013-01-15T17:19:04.763
> 
> 标签：jquery, forms, spring, hibernate

我正在使用 postgres 开发 Spring API，我想在 jquery 中创建带有少量动画的表单，并且我想将表单数据提交到数据库表。无论如何不使用弹簧形式？或者我可以将 jquery ajax 调用操作添加到 spring 表单中吗？

我的 jquery 页面可以很好地与所有 ajax 自动填充作为一个独立的组件一起正常工作。但是我现在想与 spring 集成，这样当我提交表单时，数据会使用 hibernate 发布到数据库中。

是否可以在春季使用相同的jquery页面？任何人都可以提出一些建议吗？

```
 @RequestMapping(method = RequestMethod.GET)
public ModelAndView getVisitor() {

    return new ModelAndView("visitor", "command", new Visitor());
    // return "visitor";
}

@RequestMapping(method = RequestMethod.POST)
public String addVisitor(@ModelAttribute("visitor")Visitor visitor,
        ModelMap model) {
    System.out.println(visitor.getComment());
    String resp = visitorService.add(visitor);
    return resp;
}
} 
```

我的控制器中有这个，一旦我提交表单，它就会尝试发布到 addVisitor 但访问者对象为空。

```
<form action="visitor" method="post" class="fancy-form">

        <div class="">
            <input type="text" maxlength="50" id="name" name="name" /><label
                for="name">Name: </label>
        </div>
        <fieldset name="address">
            <legend>Address</legend>
            <p class="instructions">Start by entering your zip code.</p>
            <div>
                <div>
                    <input type="text" name="street1" id="street1"><label
                        for="street1">Street #1</label>
                </div>
            </div>
            <div>
                <div>
                    <input type="text" name="street2" id="street2"> <label
                        for="street2">Street #2</label>
                </div>
            </div>
            <div>
                <div class="city-wrap">
                    <input type="text" name="city" id="city"> <label
                        for="city">City</label>
                </div>
                <div class="county-wrap">
                    <input type="text" name="county" id="county"> <label
                        for="county">County</label>
                </div>
                <div class="state-wrap">
                    <input type="text" name="state" id="state"> <label
                        for="state">State</label>
                </div>

                <div class="zip-wrap">
                    <input type="text" pattern="[0-9]*" maxlength="5" required
                        name="zip" id="zip"> <label for="zip">Zip</label>
                    <p class="zip-error">Not a real zip code.</p>

                </div>

            </div>

        </fieldset>
        <div>
            <input type="button" id="go" value="Find Me" />
        </div>

        <div class="">
            <label for="comment">Comment: </label>
            <textarea id="comment" name="comment" rows="4" cols="50"
                maxlength="2000">Enter comment here...</textarea>
        </div>
        <div>
            <input type="submit" value="Submit" />
        </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:07:43.100

你**序列化**你的表单数据了吗？

```
$.ajax({type:'POST', url: 'post_action_url', data:$('#FormId').serialize(), success: function(response) { 
//response here
}}); 
```

# imagick - 任何人都有使用 Imagick::setImageClipMask 的示例或经验吗？

> ID：14343182
> 
> 赞同：0
> 
> 时间：2013-01-15T17:19:19.473
> 
> 标签：imagick

我正在努力让它发挥作用。
$text_layer->setImageClipMask($mask_layer); 我希望 $mask_layer 的所有黑色区域都会擦除 $text_layer 的匹配区域。它没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T20:22:39.057

该[`compositeImage`](http://www.php.net/manual/en/imagick.compositeimage.php)方法可以达到您想要的效果。在 PHP 中，您可以执行以下操作：

```
<?php

// Open image
$image = new \Imagick('image.png');

// Create, draw mask
$mask = new \Imagick();
$mask->newImage($image->getImageWidth(), $image->getImageHeight(), 'transparent', 'png');

$mask_shape = new \ImagickDraw();
$mask_shape->setStrokeAntialias(true);

$mask_shape->setFillColor('white');
$mask_shape->setStrokeColor('white');
$mask_shape->circle($image_width/2, $image_height/2, 0, $image_height/2);

$mask->drawImage($mask_shape);

// Apply mask to image
$image->compositeImage($mask, \Imagick::COMPOSITE_COPYOPACITY, 0, 0, \Imagick::CHANNEL_ALL);

// Save newly-"masked" image
$image->writeImage('image.png'); 
```

之前和之后：

![在此处输入图像描述](../Images/c2f29620569828a7f92d93087f7022da.png)

最好是在 Photoshop 中创建一个蒙版并将其存储在您的项目中。您可以像这样打开您的遮罩`$mask = new \Imagick('mask.png');`并直接应用它，而无需像我上面那样动态生成遮罩。

# c - 如何定义枚举增量步骤？

> ID：14343183
> 
> 赞同：1
> 
> 时间：2013-01-15T17:19:28.073
> 
> 标签：c, enums

我想用非恒定步骤定义枚举。我希望 2 个枚举变量之间的步骤如下所示：

```
enum test {
   a1 = 1,
   a2 = 1<<2,
   a3 = 1<<3,
   a4, // a4 deduced automatically as 1<<4
   a5 // a5 deduced automatically as 1<<5
} 
```

有没有办法按照上面的例子来定义它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:21:02.863

您必须手动执行此操作，或者可能使用宏观诡计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T17:52:22.120

这？

```
#include <stdio.h>

#define enum_(x, n) x##n=1<<n

enum type {
    enum_(a, 0),
    enum_(a, 1),
    enum_(a, 2),
    enum_(a, 3),
    enum_(a, 4),
    enum_(a, 5)
};

int main(void)
{
    printf("%d %d %d %d %d %d\n", a0, a1, a2, a3, a4, a5);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T17:25:05.177

如果枚举成员没有分配，

*   然后将考虑第一个枚举成员为零。

*   对于其他成员，它只会通过在其上添加一个来使用前一个成员的值。

此外，在您的程序中，赋值 ( `=`) 运算符未在枚举定义中使用。它应该如下所示。

```
#include <stdio.h>
enum test 
{
   a1 = 1,
   a2 = 1<<2,
   a3 = 1<<3,
   a4, // a4 deduced automatically as 1<<4
   a5 // a5 deduced automatically as 1<<5
};

void main()
{
   printf("%d, %d", a4, a5);
} 
```

输出是

```
9, 10 
```

# ruby - 正确构造此 SOAP 标头？

> ID：14343188
> 
> 赞同：2
> 
> 时间：2013-01-15T17:19:43.320
> 
> 标签：ruby, soap, savon

我正在尝试构建一个正确的 SOAP 标头：

```
<soapenv:Envelope
xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:sen="https://webservices.averittexpress.com/SendWebImageService">
<soapenv:Header
xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/"
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> <ns:authnHeader
soapenv:mustUnderstand="0"
xmlns:ns="http://webservices.averittexpress.com/authn">
<Username>xxxxxxxx</Username> <Password>xxxxxxxx</Password>
</ns:authnHeader> </soapenv:Header> 
```

这是我的 Savon 客户电话，我使用的是版本 2：

```
client = Savon.client(
  wsdl: api_url,
  raise_errors: false,
  convert_request_keys_to: :camelcase,
  element_form_default: :qualified,
  env_namespace: :soapenv,
  soap_header: {'username' => username, 'password' => password }
) 
```

我收到以下 SOAP 错误：

```
fault=>
  {:faultcode=>"soapenv:Server",
  :faultstring=>"java.lang.NullPointerException",
  :detail=>nil}} 
```

我如何得到这`sapoenv:mustUserstand="0"`条线，它是什么？

另外，我很困惑如何设置`xmlns:ns="http://webservices.averittexpress.com/authn">`.

我几乎没有使用 SOAP 请求的经验，并且来自 Ruby/Rails RESTful 背景。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:50:08.443

Savon 使用[Gyoku](https://rubygems.org/gems/gyoku)将 SOAP 标头和正文都转换为 XML。
遵循此库约定，您的 Hash 需要如下所示：

```
soap_header = {
  "ns:authnHeader" => {
    "@soapenv:mustUnderstand" => 0,
    "@xmlns:ns" => "http://webservices.averittexpress.com/authn",
    "Username"  => "x",
    "Password"  => "x"
  }
}

Savon.client(:soap_header => soap_header) 
```

# macos - Mac OS X：YASM：错误：macho：抱歉，无法在 64 模式下应用 32 位绝对重定位

> ID：14343190
> 
> 赞同：2
> 
> 时间：2013-01-15T17:19:59.053
> 
> 标签：macos, assembly, nasm, yasm

NASM 编译得很好，但是当我使用 YASM 时出现以下错误：

> hello.asm:12：错误：macho：抱歉，不能在 64 位模式下应用 32 位绝对重定位，请考虑“[_symbol wrt rip]”用于内存访问，“qword”和“dq _foo”用于指针。

生成文件

```
test: hello
    ./hello
hello:
    yasm -f macho64 hello.asm   
    ld -o hello hello.o
clean:
    rm *.o *.core hello 
```

系统公司

```
%define stdin       0
%define stdout      1
%define stderr      2

%define SYS_nosys   0
%define SYS_exit    1
%define SYS_fork    2
%define SYS_read    3
%define SYS_write   4

section .text
align 4
access.the.osx.kernel:
    syscall
    ret

%macro  system  1
    mov rax, %1
    call    access.the.osx.kernel
%endmacro

%macro  sys.exit    0
    system  SYS_exit
%endmacro

%macro  sys.write   0
    system  SYS_write
%endmacro 
```

你好.asm

```
%include 'system.inc'

section .data
hello   db  'Hello, World!', 0Ah
hbytes  equ $-hello

section .text
global  start
start:
mov rax, 0x2000004
mov rdi, stdout
mov rsi, hello
mov rdx, hbytes
syscall
;sys.write

xor rdi, rdi
mov rax, 0x2000001
syscall
;sys.exit 
```

有谁知道发生了什么？如果你能解释为什么 NASM 有效，但 YASM 不是，那将是一个奖励。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:54:07.223

我让它工作了。`yasm`你必须明确告诉它地址是 64 位的，如下所示：

```
mov rsi, qword hello 
```

文档在这里讨论了这种情况：[https ://github.com/yasm/yasm/wiki/AMD64](https://github.com/yasm/yasm/wiki/AMD64)

# javascript - 创建语音气泡

> ID：14343193
> 
> 赞同：0
> 
> 时间：2013-01-15T17:20:05.733
> 
> 标签：javascript, c#-4.0, html5-canvas

![在此处输入图像描述](../Images/5e17d149b6dd4f62c16cb7d794b9a9e4.png)

我正在使用 VS asp.net 开发画布样式的图形界面。我想用个别事件创建语音气泡。例如 - 我屏幕上的红点，如果客户点击它，会出现一个对话气泡以提供有关该事件的更多信息。

**如何使这些事件可交互？**

现在我正在使用一个简单的画布：

```
<canvas id="myCanvas" width="930" height="900"style="border:2px solid #000000;"></canvas> 

// function to draw a circle - x,y, radius, color: coordinates, radius and the color of the circle.
                function draw_circle(x, y, radius, color) {
                        ctx.beginPath();
                        ctx.arc(x, y, radius, 0, 2 * Math.PI, false);
                        ctx.fillStyle = color;
                        ctx.fill();
                        ctx.stroke();
                    }

// function to draw a triangle - x: Life event's x-coordinate on the timeline.
                function draw_triangle(x) {
                        ctx.fillStyle = 'purple';
                        ctx.strokeStyle = 'white';
                        ctx.lineWidth = 1;
                        ctx.beginPath();

                        ctx.moveTo(x, 560);
                        ctx.lineTo(x+5, 550);
                        ctx.lineTo(x-5, 550);
                        ctx.lineTo(x, 560);

                        ctx.fill();
                        ctx.stroke();
                        ctx.closePath();
                    } 
```

ETC..

我相信要使这些事件 - 圆形、条形线、三角形与语音气泡更具交互性，我将不得不修改此代码......**这些 javascript 函数是否可以交互？悬停或点击？**

我看着泡泡

[http://www.scriptol.com/html5/canvas/speech-bubble.php](http://www.scriptol.com/html5/canvas/speech-bubble.php)

但我想要一些只与基于客户端鼠标点击的特定事件相关的东西。只要。

我想要这样的东西：-

[http://simile-widgets.org/wiki/Timeline_CustomEventDetailDisplay](http://simile-widgets.org/wiki/Timeline_CustomEventDetailDisplay)

但根据我正在使用的代码量身定制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:37:43.943

如果要在画布上绘制对话气泡以响应鼠标单击/悬停，则必须捕获*相对于页面上画布位置*的鼠标 x 和 y ，然后确定画布的部分是否包含该圆圈被点击/悬停。

我个人会为每个可点击区域创建一个对象，给它 x/y/width/height 属性，然后在点击它时调用一个函数。像这样的东西：

```
<canvas id="myCanvas" width="930" height="900"style="border:2px solid #000000;"></canvas>

var buttons = [];

var mouse = 
{
    x: 0,
    y: 0
}

var buttons[] = new Button(100, 100, 100, 100, 'speechbubble');

window.addEventListener('load', function()
{
    addEventListener('mousemove', function(evt)
    {
        getMousePos(evt);
    }, false);

    addEventListener('click', clickHandler, false);

}, false);

function getMousePos(e)
{
    mouse.x = e.pageX - document.getElementById('myCanvas').offsetLeft;
    mouse.y = e.pageY - document.getElementById('myCanvas').offsetTop;
}

function clickHandler()
{
    for (var i = 0; i < buttons.length; i++)
    {
        if (buttons[i].inBounds()) buttons[i].execute();
    }
}

function Button(x, y, w, h, func)
{
    this.x = x;
    this.y = y;
    this.width = w;
    this.height = h;
    this.func = func;
}

Button.prototype.execute = function()
{
    switch (this.func)
    {
        case 'speechbubble':
            // do stuff here
        break;
    }
}

Button.prototype.inBounds = function()
{
    if (mouse.x > this.x && mouse.x < this.x + this.width &&
        mouse.y > this.y && mouse.y < this.y + this.height) return true;
} 
```

# android - 当android ListView中没有足够的项目时如何启用滚动

> ID：14343197
> 
> 赞同：1
> 
> 时间：2013-01-15T17:20:15.393
> 
> 标签：android, listview, scroll

在实现 pull-to-refresh`ListView`时，我发现如果没有项目或只有少数项目，则 ListView 的滚动被禁用。所以我不能触发“拉”事件。我该如何克服呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:00:58.730

ListView-scrolling 是动态的，所以基本上你不能按照你计划的方式做你想做的事。使用 GestureDetector 可能会更容易看看[这个](http://www.techrepublic.com/blog/app-builder/use-androids-gesture-detector-to-translate-a-swipe-into-an-event/1577)，它可能会有所帮助。

# jquery - DataTables - 如何将 id、类和事件附加到 DataTables 中添加的单元格？

> ID：14343199
> 
> 赞同：3
> 
> 时间：2013-01-15T17:20:34.747
> 
> 标签：jquery, datatables

在使用以下代码时，我需要向 DataTables 中新添加的单元格添加 id、类和事件。我怎样才能做到这一点？

```
var rtn = oTable.fnAddData(['Cell1Value', 'Cell2Value', 'Cell3Value']); 
```

我试图在单击这个新添加的单元格时触发一个 javaScript 函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T17:55:18.703

这有点笨拙，但你可以通过做这样的事情来实现你想要的。

[***在这里创建了一个小提琴***](http://jsfiddle.net/FG8FS/)

**HTML**

```
 <table cellpadding="0" cellspacing="0" border="0" class="display" id="example" width="100%">
        <thead>
            <tr>
                <th>Rendering engine</th>
                <th>Browser</th>
                <th>Platform(s)</th>
                <th>Engine version</th>
                <th>CSS grade</th>
            </tr>
        </thead>
        <tbody>
            <tr class="odd gradeX">
                <td>Trident</td>
                <td>Internet
                     Explorer 4.0</td>
                <td>Win 95+</td>
                <td class="center"> 4</td>
                <td class="center">X</td>
            </tr>
            <tr class="even gradeC">
                <td>Trident</td>
                <td>Internet
                     Explorer 5.0</td>
                <td>Win 95+</td>
                <td class="center">5</td>
                <td class="center">C</td>
            </tr>
            <tr class="odd gradeA">
                <td>Trident</td>
                <td>Internet
                     Explorer 5.5</td>
                <td>Win 95+</td>
                <td class="center">5.5</td>
                <td class="center">A</td>
            </tr>
      </tbody>  
        <tfoot>
            <tr>
                <th>Rendering engine</th>
                <th>Browser</th>
                <th>Platform(s)</th>
                <th>Engine version</th>
                <th>CSS grade</th>
            </tr>
        </tfoot>
    </table>
<button id="addnewrow">Add New Row</button> 
```

**JS**

```
$('#addnewrow').click(function(){
//add row
  var newRow = $('#example').dataTable().fnAddData( [
   "1",
    "2",
    "3",
    "4",
     "5"]
  );

  //change cell attributes
  var oSettings = dataTable.fnSettings();
var nTr = oSettings.aoData[ newRow[0] ].nTr;
$('td', nTr)[0].setAttribute( 'id', 'newid1' );
$('td', nTr)[1].setAttribute( 'id', 'newid2' );
$('td', nTr)[2].setAttribute( 'id', 'newid3' );
$('td', nTr)[3].setAttribute( 'id', 'newid4' );
$('td', nTr)[4].setAttribute( 'id', 'newid5' );

}); 
```

然后你可以简单地委托你的新 id 或类的点击像这样

```
$('table').delegate('#newid1','click', function(){
 alert('clicked on new cell 1') 
}) 
```

[这是参考](http://datatables.net/forums/discussion/4342/setting-tr-id-after-using-fnadddata-solved/p1)

# ruby-on-rails - 验证不起作用

> ID：14343204
> 
> 赞同：0
> 
> 时间：2013-01-15T17:20:50.417
> 
> 标签：ruby-on-rails

所以首先我有这门课：

```
class User < ActiveRecord::Base
  attr_accessible :email, :name

end 
```

并且能够在 ruby​​ 沙箱中创建和保存用户。

然后我添加了这样的验证：

```
validates(:name, presence: true) 
```

保存了我的更改，回到控制台，然后说：

```
>> user = User.new(name: "", email: "mhartl@example.com")
>> user.save 
```

它应该返回 FALSE，因为名称为空。但它返回了真实。为什么？也许我应该重新启动沙盒控制台？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:23:49.220

尝试做：

```
reload! 
```

在控制台中。

这将重新加载您的模型，并且应该选择新的验证。这使得无需重新启动控制台。我每天使用这个就像 bajillion 次。:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:23:37.777

是的，没关系。我重新启动了沙盒控制台，现在验证工作正常。

# java - 关于 Spring 转换器以及 Jaxb2RootElementHttpMessageConverter 如何在 Spring MVC 中工作的一些信息

> ID：14343206
> 
> 赞同：0
> 
> 时间：2013-01-15T17:21:09.613
> 
> 标签：java, spring, spring-mvc, converter

我有一些关于 Spring MVC 消息转换器使用的问题。

如果我有以下情况：

在我看来，我有以下链接：

```
 <a id="writeXmlAccept" class="writeXmlLink" href="<c:url value="/messageconverters/xml" />">Write XML via Accept=application/xml</a> 
```

此链接向 URL 生成 HTTP 请求：**“/messageconverters/xml”**

**与具有class="writeXmlLink"**的此链接的单击事件相关，我有以下 Jquery 回调函数：

```
$("a.writeXmlLink").click(function() {
    /* Variabile che contiene il riferimento all'elemento nel DOM che ha 
       scatenato l'evento click (il link clickato) */
    var link = $(this);     

    // Viene eseguita la chiamata ajax 
    $.ajax({ 
        // Indirizzo verso cui è indirizzata la richiesta 
        url: link.attr("href"),     
        /* Prima di inviare l'HTTP Request esegui la funzione passandogli il
           parametro req che rappresenta l'HTTP Request */
        beforeSend: function(req) { 
            // Se l'url termina con .xml 
            if (!this.url.match(/\.xml$/)) {
              // Aggiunge alla HTTP Request l'header Accept: application/xml 
                req.setRequestHeader("Accept", "application/xml");       
            }

        },
        success: function(xml) {        // Caso di successo: 
            MvcUtil.showSuccessResponse(MvcUtil.xmlencode(xml), link);
        },
        error: function(xhr) {          // Caso di errore: 
            MvcUtil.showErrorResponse(xhr.responseText, link);
        }
    });
    return false;
}); 
```

由于 URL **"/messageconverters/xml"**不以 *.xml 模式结尾，因此该请求`if`中未执行正文并且未设置标头`Accept`

好的，所以这个函数只执行我的HTTP请求的ajax调用并等待响应。

我的控制器类处理这个 HTTP 请求的方法如下：

```
/* Metodo che gestisce HTTP Request di tipo GET dirette verso 
 * l'URL: "/messageconverters/xml" */
@RequestMapping(value="/xml", method=RequestMethod.GET)
public @ResponseBody JavaBean writeXml() {
    return new JavaBean("bar", "apple");
} 
```

此方法仅创建并返回一个新的 JavaBean 对象，以评估它的两个属性

JavaBean 是我的示例中的一个类，它只有 2 个属性，getter 和 setter 方法以及 toString() 方法，这个：

```
@XmlRootElement
public class JavaBean {

    @NotNull
    private String foo;

    @NotNull
    private String fruit;

    public JavaBean() {
    }

    public JavaBean(String foo, String fruit) {
        this.foo = foo;
        this.fruit = fruit;
    }
        // GETTER & SETTER & toString()
} 
```

因此，增值的 JavaBean 对象返回给客户端（浏览器），在我的视图中显示以下输出：

```
<javaBean><foo>bar</foo><fruit>apple</fruit></javaBean> 
```

我会很好地理解转换器在此示例中何时以及如何工作：

我认为使用转换器是**`Jaxb2RootElementHttpMessageConverter`**因为我在我的视图中编写 XML 代码，并且因为我的 JavaBean 类使用`@XmlRootElement`注释进行注释，该注释是实现 Java 类和 XML 字段之间映射的 JAXB 注释。

那么，当我点击我的链接时会发生什么？

创建了增值的 JavaBean 对象，当我返回它时（在 HTTP 响应的主体字段内），这个 JavaBean 对象由 Jaxb2RootElementHttpMessageConverter 转换为 XML 文档？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:56:43.197

使用 FireBug 之类的工具，查看确切的请求和响应标头。它会让事情变得更容易。

我怀疑响应没有正确的内容类型或 MIME 类型，即它应该是`application/xml`或`text/xml`。

您需要在控制器方法中指定响应内容类型。为此，只需将内容类型值分配给注释的`produces`属性。`@RequestMapping`

例如在 spring 文档[http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html中可用](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html)

希望这可以帮助。

# asp.net-web-api - WebApi 参数

> ID：14343208
> 
> 赞同：0
> 
> 时间：2013-01-15T17:21:16.250
> 
> 标签：asp.net-web-api, asp.net-web-api-routing

我对 WebApi 很陌生，不了解参数映射。我有一个带有 2 个参数的 HttpGet 方法的控制器。在 WebApiConfig 映射中定义如下

```
config.Routes.MapHttpRoute(
                name: "MyActionApi",
                routeTemplate: "api/{controller}/{action}/{p},{q}"); 
```

这似乎工作正常。

以此类推，我添加了另一个具有 3 个参数 HttpGet 方法的控制器 (DetailsController)。

我已经添加

```
config.Routes.MapHttpRoute(
                name: "MyActionApi2",
                routeTemplate: "api/{controller}/{action}/{p},{q},{r}"); 
```

但是导航到

```
http://mysite/api/Details/CrossReport/12,14,Peter 
```

给出 404 错误并说

> 在与请求匹配的控制器“详细信息”上未找到任何操作。

但是像这样导航

```
http://mysite/api/Details/FilterByDate/12,14?q=10 
```

给出正确的结果。

这是为什么？我想像第一种情况一样用逗号分隔。为什么它在第一种情况下有效，而在第二种情况下无效？

工作控制器的方法：

```
public IEnumerable<Order> FilterByDate(DateTime dateStart, DateTime dateEnd). 
```

不工作：

```
public IEnumerable<Detail> FilterByDate(DateTime dateStart, DateTime dateEnd, int maxCount) 
```

两者都有 HttpGet 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:13:48.103

您需要定义一个匹配的操作。尝试在您的 DetailsController 类上添加具有以下签名的操作：

```
[HttpGet]
public IEnumerable<Detail> CrossReport(string p, string q, string r) 
```

如您所见，操作名称和参数名称必须与您的路线上的名称相匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T17:21:31.090

想一想，您是否确保在路由配置中 MyActionApi2 在 MyActionApi 之前？如果我没记错的话，它会寻找第一个可能的匹配......所以 MyActionApi 会匹配（即使有 3 个参数）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-11T12:00:10.863

WebApi 中有两种类型的参数：路由中的参数和 body/url 中的参数。

## 路由中的参数

在这个例子中，id 参数在路由中。

```
http://mysite/api/Details/CrossReport/{id} 
```

路由参数由“/”分隔，并且有部分路由。

```
http://mysite/api/Details/CrossReport/{id}/{name}/{detailId} 
```

在您的 web api 控制器中，您必须是：

```
public IEnumerable<Order> FilterByDate(int id, string name, int detailId) 
```

## 正文/网址中的参数

url 中的参数由 & 分隔，所有这些参数都在 ? 在路线。例如。

```
http://mysite/api/Details/CrossReport?id=3&name="john"&detailId=5 
```

并且在您的 web api 控制器中是相同的：

```
public IEnumerable<Order> FilterByDate(int id, string name, int detailId) 
```

如果对象由其他属性复合：

```
public class MyObject 
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

您只能在消息正文中包含一个，并且您必须在消息正文中发送并且您的 Web api 控制器接收它们：

```
public IEnumerable<Order> FilterByDate(MyObject obj) 
```

# php - 如何在数组中写入俄语字符？

> ID：14343218
> 
> 赞同：0
> 
> 时间：2013-01-15T17:21:57.090
> 
> 标签：php

```
while ($row = $result->fetch_array(MYSQLI_ASSOC)) {
$arr[] = array('answer_id' => $row['answer_id'], 'answer' => "Привет!");
}
$result->close();
echo json_encode($arr); 
```

代替俄语字符，回答：null。浏览器显示：

```
[Object]  
0: Object  
answer: null  
answer_id: "1010002"  
__proto__: Object  
length: 1  
__proto__: Array[0] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:24:25.563

检查您的代码编辑器以确保您的 php 文件是 UTF-8 格式。

# ruby-on-rails - 使用咖啡脚本隐藏/显示 Div - Rails？

> ID：14343220
> 
> 赞同：0
> 
> 时间：2013-01-15T17:22:04.760
> 
> 标签：ruby-on-rails, coffeescript, registration, show-hide

没有多少网站提供关于如何使用咖啡脚本显示或隐藏 div 的精美教程。我想做的是：我有一个形状像按钮的 div，链接到使用 Devise 的 user_registration 路径。我想在用户可以注册和做他们的事情的按钮旁边显示一个 div。所以基本上我很感兴趣，如果你对如何制作有任何想法，例如，除了 ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:31:52.270

use toogle

```
$('#target').toggle ->  alert 'First handler for .toggle() called.', ->  alert 'Second handler for .toggle() called. 
```

# c# - 不需要的实体属性（例如电子邮件和网址）的属性验证，这可能吗？

> ID：14343221
> 
> 赞同：0
> 
> 时间：2013-01-15T17:22:11.357
> 
> 标签：c#, asp.net-mvc-4

我正在尝试像这样将验证属性添加到我的实体属性中。：

```
[StringLength(100, ErrorMessage = "Must be between 1 to 100 characters")]
[EmailAddress]
public string Email { get; set; } 
```

我遇到的事实是这些属性不是必需的，但它仍然应用属性验证，并且返回的电子邮件地址无效，特别是当这个非必需字段为空时。

当属性不需要且为空时，有什么方法可以使用这些 [Email] 和 [Url]？

我假设有，但在这方面找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:25:28.287

你所拥有的应该工作。你有`[Required]`模型属性的属性吗（假设这是一个视图模型）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T16:12:48.070

您可以为电子邮件设置值，如果电子邮件字段为空，则返回模型的值：`

```
@Html.TextBoxFor(m=>m.Email,new{Value=""}) 
```

# javascript - jQuery/HTML DOM 方法参数

> ID：14343228
> 
> 赞同：0
> 
> 时间：2013-01-15T17:22:35.427
> 
> 标签：javascript, jquery, oop, parameters

考虑到我是 jQuery 的新手（但我希望了解更多信息），我不知道这些到底该怎么称呼。

如何在 DOM 中创建一个 jQuery 插件，或者甚至是一个方法，你可以有这样的参数：

"foo":"bar", "foo2":1.5,

一个工作示例（使用 jQuery Transit）：

$('.box').transition( **{ x: '200px', y: '20px' }** );

这些类型的参数叫什么（如果有的话），我如何将它们用于插件，甚至 DOM？（虽然我真的更喜欢 DOM）。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:31:38.993

These are just objects,

You can define them like this,

```
var x = { 'z' : 100, 'c' : 200 } 
```

you can pass them into a function like this,

```
doSomething(x); 
```

and you can use them in a function like this,

```
function dosomething(x) {
  var z = x.z;
  var x = x.c;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:30:38.433

You mean [objects](http://api.jquery.com/Types/#Object)?

To add a function or create a plugin:

```
jQuery.fn.myPlugin = function(object1, object2){
  // Here 'this' is the set of matched elements
} 
```

# html - 2013 年最先进的网站图标是什么？

> ID：14343231
> 
> 赞同：16
> 
> 时间：2013-01-15T17:22:47.943
> 
> 标签：html, browser, favicon

去年，Favicon 业务变得复杂起来。（重新）发明了新型设备，例如平板电脑和智能手机。他们以新的方式使用网站图标（例如，作为主屏幕上的应用程序图标），并且需要特定于供应商的方式来链接它们。以类似的方式，浏览器现在允许为网络应用程序创建桌面快捷方式（它们也使用图标作为图标）。更糟糕的是，我们现在在便携式设备和笔记本电脑中都有高分辨率（“视网膜”）显示器，这需要更高分辨率的图像来显示图标。更糟糕的是，不同的浏览器（和版本）支持不同的图标图像格式和不同的大小。从 16x16-only .ico-only IE6 开始，到现在支持 .svg 图标的 Opera 结束。

**为了在当今大多数设备和浏览器上支持清晰的图标，我应该怎么做？**

到目前为止，我能找到的最好的资源是[html5boilerplate](https://github.com/h5bp/html5-boilerplate)，它建议使用以下文件：

```
apple-touch-icon-114x114-precomposed.png
apple-touch-icon-144x144-precomposed.png
apple-touch-icon-57x57-precomposed.png
apple-touch-icon-72x72-precomposed.png
apple-touch-icon-precomposed.png
apple-touch-icon.png
favicon.ico  # 32x32 
```

`<head>`而没有在标签中放置任何指向它们的链接。

**编辑：**另一个考虑是 .ico 文件*可以*在其中存储多个分辨率不同的图像。这有用还是受支持？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T11:58:28.177

在[http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)有一些官方建议似乎可以确认您的列表。

理想情况下，favicon.ico 文件应该在一个文件中包含多个分辨率，因为最新的浏览器现在可以利用这一点，并且 16 x 16 图标在视网膜屏幕上看起来永远不会很好。

微软现在显然建议 favicon.ico 文件至少包含 16×16、24×24、32×32 和 64×64。

我刚刚推出了一个免费的在线工具，可以在以下位置创建这样的网站图标：http: [//iconifier.net](http://iconifier.net)

有关最新 favicon 信息的更多链接，请参阅网站上的自述文件页面。

# c++ - Qt 中的动画绑定更改

> ID：14343232
> 
> 赞同：4
> 
> 时间：2013-01-15T17:22:48.493
> 
> 标签：c++, qt, qml

当绑定发生变化时，我正在尝试找到一种方法来对 QML 元素进行转换。假设您有一个`Text`元素，其`text`属性绑定到某物。我想要的是当绑定中的数据发生变化时，元素淡出（仍然显示旧数据），切换并淡入新数据（实际转换发生在元素不可见时。）

我一直在到处寻找一种方法来做到这一点，但我可以弄清楚。我曾尝试在 QML 中使用 Qt Quick 动画，但数据本身会在动画运行之前发生变化，从而使动画变得不必要。我尝试创建一个自定义 QDeclarativeItem 对象，该对象在其中调用动画，`QDeclarativeItem::paint()`但我不知道如何让它实际运行。

我应该在这里注意，我知道我的绑定在显示的数据发生变化时工作正常，我只是无法让这些动画在适当的时间运行。

这是我尝试使用 QML 的方法：

```
Text {
    id: focusText
    text: somedata

    Behavior on text {
         SequentialAnimation {
             NumberAnimation { target: focusText; property: "opacity"; to: 0; duration: 500 }
             NumberAnimation { target: focusText; property: "opacity"; to: 1; duration: 500 }
         }
     }
} 
```

这是我在实现自定义时尝试的`QDeclarativeItem`：

```
// PAINTER
void AnimatedBinding::paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget) {
    // Setup the pen
    QPen pen(m_color, 2);
    painter->setPen(pen);
    painter->setOpacity(this->opacity());

    // Draw the item
    if (m_bindingType == QString("text")) {
        QPropertyAnimation animation(this, "opacity");
        animation.setDuration(1000);
        animation.setStartValue(1);

        if (drawn) {
            animation.setStartValue(1);
            animation.setEndValue(0);
            animation.start();
        } else drawn = true;

        painter->drawText(boundingRect(), m_data.toString());
        animation.setEndValue(0);
        animation.start();
    } else {
        qCritical() << "Error unknown binding type!";
        return;
    }
} 
```

但就像我说的，我在画家内部开始的动画从未真正触发过。

有小费吗？以前有人做过吗？大约一个星期以来，我一直在努力解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:57:36.087

仅以这种方式在 qml 中执行此操作怎么样：

1.  定义您自己类型的自定义元素，它的行为方式符合您的要求。
2.  使用此元素代替传统元素进行动画处理。

例如。我创建了一个自定义的“AnimatedText”类型，以便在与文本元素相关的文本发生更改时对文本元素进行淡入和淡出行为。

文件 1：AnimatedText.qml

```
import QtQuick 1.0

Item
{
    id: topParent
    property string aText: ""
    property string aTextColor: "black"
    property int aTextFontSize: 10
    property int aTextAnimationTime : 1000

    Behavior on opacity { NumberAnimation { duration: aTextAnimationTime } }

    onATextChanged:
    {
         topParent.opacity = 0
         junkTimer.running = true
    }

    Timer
    {
       id: junkTimer
       running: false
       repeat: false
       interval: aTextAnimationTime
       onTriggered:
       {
           junkText.text = aText
           topParent.opacity = 1
       }
    }

    Text
    {
        id: junkText
        anchors.centerIn: parent
        text: ""
        font.pixelSize: aTextFontSize
        color: aTextColor
    }
} 
```

在你的 main.qml

```
import QtQuick 1.0

Rectangle
{
    id: topParent
    width:  360
    height: 360

    AnimatedText
    {
      id: someText

      anchors.centerIn: parent
      aText: "Click Me to change!!!.."
      aTextFontSize: 25
      aTextColor: "green"
      aTextAnimationTime: 500
    }

    MouseArea
    {
        anchors.fill: parent
        onClicked:
        {
            someText.aText = "Some random junk"
        }
    }
} 
```

# javascript - 是什么 ！！javascript中的运算符？

> ID：14343233
> 
> 赞同：0
> 
> 时间：2013-01-15T17:23:00.947
> 
> 标签：javascript, operators

> **可能重复：**
> [什么是!! JavaScript 中的（不是不是）运算符？](https://stackoverflow.com/questions/784929/what-is-the-not-not-operator-in-javascript)
> [有人能解释一下这个“双重否定”的把戏吗？](https://stackoverflow.com/questions/4686583/can-someone-explain-this-double-negative-trick)

因为我在玩 HTML5 视频的可能性，所以我遇到了[getUserMedia.js](https://github.com/addyosmani/getUserMedia.js)，它提供跨浏览器支持。

在研究库是如何工作的（并试图让它在 requirejs 模块中工作）时，我发现了以下奇怪的`if`结构：

```
if ( !! navigator.getUserMedia_) {
   ... 
```

双重否定？**这是什么意思，为什么？**为什么不简单使用以下？

```
if (navigator.getUserMedia_) {
   ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:23:48.090

JavaScript 中的双重否定`!!`只是将值转换为布尔类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T17:23:58.603

`!!`通常用于将变量转换为布尔值（强制布尔上下文）

使用它是因为可以将不同的类型评估为`false`, `undefined`,`null`等`''`。

如果你使用：`!!undefined`，你会得到：

1.  `!!undefined`
2.  `!true`
3.  `false`

这样，如果在布尔上下文中进行评估，您实际上会得到等于参数的布尔值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T17:24:24.613

它不完全是一个运算符，它是两个相同的 ( `!`)，它基本上将任何东西转换为布尔值。换句话说，取一个值的双重否定。

# c++ - 作业队列中到达任务的回调？

> ID：14343234
> 
> 赞同：0
> 
> 时间：2013-01-15T17:23:02.993
> 
> 标签：c++, boost, threadpool

我想知道是否有人对当任务> 0 时通知 processJob() 函数的作业队列有任何好的设计建议。我正在使用 Boost 和 C++，只是想大致了解这种设计。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:45:58.720

我会`processJob()`在一个单独的线程中运行，它使用“条件变量”来判断它是否正在运行；并在向队列中添加某些内容时，通知该 cv

循环逻辑类似于：

```
boost::unique_lock<boost::mutex> lock(mymutex);
while (!terminate)
{
    lock.lock();
    while (!Q.empty())
        jobCV.wait(lock);
    pItem = Q.pop();
    lock.unlock();
    pItem->process();
} 
```

请记住，将项目添加到队列也需要锁定同一个互斥体。此外，在此之前您需要`wait()`对将设置的信号进行测试`terminate`；并且该信号的设置也需要调用`notify()`cv

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:57:17.717

如果你已经使用了 boost 库，那么只使用 boost::asio 会很方便。io_service 对象可用于管理作业队列，因为它保证将按照发布的顺序调用回调。如果您只在一个线程中运行 io_service，则不会有锁的麻烦。一些示例代码：

```
#include <boost/asio.hpp>
#include <boost/bind.hpp>
#include <boost/thread.hpp>
#include <boost/shared_ptr.hpp>
#include <iostream>
#include <cstdlib>

int job_number = 0;

struct Job
{
    virtual void run() { std::cout << "job " << ++job_number << " done" << '\n'; }
    virtual ~Job() {}
};

class Processor
{
private:
    boost::asio::io_service ioserv_;
    boost::asio::io_service::work work_;
    boost::thread thread_;

public:
    Processor() : ioserv_(), work_(ioserv_) {
    }

    void run() {   
        ioserv_.reset();
        thread_ = boost::thread (boost::bind(&boost::asio::io_service::run, &ioserv_));
    }

    void stop() { 
        ioserv_.stop();
    }

    ~Processor() {
        stop();
        if (thread_.get_id() != boost::thread::id())
            thread_.join();
    }

    void processJob(boost::shared_ptr<Job> j)
    {
        j->run();
    }

    void addJob(boost::shared_ptr<Job> j)
    {
        ioserv_.post(boost::bind(&Processor::processJob, this, j));
    }

};

int main()
{
    Processor psr;
    psr.run();

    for (int i=0; i<10; ++i)
        psr.addJob(boost::shared_ptr<Job>(new Job));

    sleep(1);

    return 0;
} 
```

# java - 替代断言以获取失败日志消息并继续？

> ID：14343243
> 
> 赞同：1
> 
> 时间：2013-01-15T17:23:27.163
> 
> 标签：java, junit4

我是 JUnit4 的新手，我习惯于 Google Test for C++。我编写了一段代码，使用`assertEquals()`. 我以为它会输出一些日志信息来告诉用户检查是否成功以及原因，然后继续下一步`assertEquals()`。但它正在那里停止执行。

我已经搜索过这个主题，似乎 JUnit 的设计与 Google Test 不同，所以我应该为每个断言使用 @Test 方法。但是有没有其他方法可以得到我想要的？我阅读了有关验证方法而不是断言的信息，但它与 Selenium 有关，我什至不知道它是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T22:05:50.657

您可以使用[ErrorCollector](http://kentbeck.github.com/junit/javadoc/4.10/org/junit/rules/ErrorCollector.html)规则来执行多个断言。

```
@Rule
public ErrorCollector collector = new ErrorCollector();

@Test
public void testMethod()
{
   collector.checkThat(variable, equalTo(otherVaiable));
   collector.checkThat(variable2, equalTo(otherVaiable2));
} 
```

checkThat 方法使用 hamcrest 匹配器进行断言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T17:35:33.063

你的研究非常正确。纯粹主义者认为您应该在每个测试用例中都只有一个断言。我不遵循该规则，但是一旦第一个断言失败¹就中断测试是个好主意。

考虑以下示例：

```
assertEquals(1, listOfNames.size());
assertEquals(10, listOfNames.get(0).length()); 
```

如果第一个断言失败，则运行第二个断言没有多大意义。级联故障不会帮助您找到根本原因。

¹ - 事实上，断言失败时会抛出特殊异常

# java - 代理加载正常但未发生检测

> ID：14343254
> 
> 赞同：1
> 
> 时间：2013-01-15T17:23:49.140
> 
> 标签：java, bytecode, loader, instrumentation

为了加载我的代理并将其附加到进程，以下语句将`vm.loadAgent("pathToAgent","");`正确执行，因为没有引发异常。但是负责检测的类文件似乎不起作用。

此代理中包含的类文件`jar`只是重建每个类文件并在此过程中打印每个类文件的名称。

通过使用该代理执行程序来使用相同的代理进行检测时，它可以正常工作。

# delphi - 如何禁用 UNSAFE_CAST 选项？

> ID：14343258
> 
> 赞同：1
> 
> 时间：2013-01-15T17:23:55.843
> 
> 标签：delphi, delphi-2010

编译项目时收到警告。

[DCC 警告] ...W1047 不安全代码“^ 运算符”

关于构建信息：

目标核心编译： ....\dcc32.exe -$W+ -$J+ --no-config ... -W+UNSAFE_TYPE -W+UNSAFE_CODE -W+UNSAFE_CAST

我知道我可以将其设置为关闭，但我找不到在 delphi 2010 上执行此操作的位置。在 Project>Options>Delphi Compiler>Hint and Warnings: I have Unsafe code, unsafe type and unsafe typecast to false

有人可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:35:08.133

如果在 IDE 选项对话框中禁用了警告，则发送到命令`dcc32`将不会启用它们。这让我相信在 IDE 选项中启用了警告。

所以，我的猜测是您有多个构建配置，并且在 IDE 中查找错误的构建配置。

我总是对 IDE 呈现构建配置的方式感到困惑。您可能会发现在文本编辑器中搜索 .dproj 文件更容易。寻找和。`DCC_UNSAFE_CODE`_ 然后，您可以删除所有这些条目，您的设置将恢复为默认值，即不会发出警告。`DCC_UNSAFE_CAST``DCC_UNSAFE_TYPE`

# c++ - SDL，GLEW：未定义的引用

> ID：14343262
> 
> 赞同：0
> 
> 时间：2013-01-15T17:24:05.490
> 
> 标签：c++, windows, sdl, glew

> **可能重复：**
> [使用 mingw 在 windows 上构建 glew](https://stackoverflow.com/questions/6005076/building-glew-on-windows-with-mingw)

我正在尝试使用 SDL 和 OpenGL 研究一些 C++。作为 OpenGL 的绑定，我选择了 GLEW，我终于要编译它了……好吧，直到我要使用比 OpenGL 1.1 更新的绑定。在 SDL 之前，包括 glew 标头，我根本不使用 SDL，使用 Code::Blocks 和 mingw 进行编译。glew32.lib 是链接的，还有 opengl32 和 glu32 库。一旦我使用 glGenBuffers（来自 OpenGL 1.5 afaik），我就会从链接器收到以下错误：

> 对 _imp____glewGenBuffers 的未定义引用

我查看了我下载的 glewinfo.exe 工具，它告诉我 OpenGL 1.5 已成功包含，但由于某种原因他找不到它。

我几乎整天都在搜索这个问题，再次编译 glew（为此下载了 MS VC），仍然没有结果。我做错了什么？

# sql - SQL querying XML attributes

> ID：14343263
> 
> 赞同：0
> 
> 时间：2013-01-15T17:24:12.037
> 
> 标签：sql, xml-parsing

I have an XML that I'm trying to query with SQL.

```
 <QueryB>
      <investment name="InvestmentA">
        <Account Type="DIVIDEND">
          <glsum YTD="0.0000" />
          <glsum Inception="111111.0000" />
          <glsum QTD="0.0000" />
        </Account>
      </investment>
      <investment name="InvestmentB">
        <Account Type="DIVIDEND">
          <glsum YTD="0.0000" />
          <glsum Inception="222222.0000" />
          <glsum QTD="0.0000" />
        </Account>
      </investment>
      <investment name="InvestmentC">
        <Account Type="CAP">
          <glsum YTD="90.0000" />
          <glsum Inception="333333.0800" />
          <glsum QTD="90.0000" />
        </Account>
      </investment>
      <investment name="InvestmentD">
        <Account Type="CAP">
          <glsum YTD="0.0000" />
          <glsum Inception="555555.0000" />
          <glsum QTD="0.0000" />
        </Account>
        <Account Type="DIVIDEND">
          <glsum YTD="0.0000" />
          <glsum Inception="444444.0000" />
          <glsum QTD="0.0000" />
        </Account>
      </investment> 
```

Notice that InvestmentD has both a Dividend and Cap account type. So I tried to query this data with the following:

```
select rtrim(ltrim(t.c.value('@name', 'nvarchar(500)'))) as name,
    rtrim(ltrim(t.c.value('(Account/@Type)[1]', 'nvarchar(500)'))) as Type,
    rtrim(ltrim(t.c.value('(Account/glsum/@YTD)[1]', 'nvarchar(500)'))) as YTD,
    rtrim(ltrim(t.c.value('(Account/glsum/@Inception)[1]', 'nvarchar(500)'))) as inception,
    rtrim(ltrim(t.c.value('(Account/glsum/@QTD)[1]', 'nvarchar(500)'))) as QTD
from @x.nodes('/QueryB/investment')t(c) 
```

where @x is the XML. This unsurprising does not pick up both nodes from InvestmentD. I can't figure out how to parse all the nodes. A pointer in the right direction would be appreciated. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:05:22.600

Add a `cross apply t.c.nodes('Account') as a(c)` and fetch the attribute values from `a.c` without specifying `Acount` in the xPath expression.

Name should still use `t.c`.

# visual-studio-2010 - Visual Studio 无法在 IE9 中调试 JavaScript - 显示“未注册正确版本的 pdm.dll”

> ID：14343268
> 
> 赞同：6
> 
> 时间：2013-01-15T17:24:21.227
> 
> 标签：visual-studio-2010, internet-explorer-9, internet-explorer-10

我在安装 IE10 后遇到了这个问题，发现它在我的 Windows 7 系统上无法正常运行，然后将其卸载。现在，回到IE9，VS2010无法附加到进程并报错。我按照说明修复了 VS2010 安装并在 pdm.dll 上执行了 regsvr32。还是不行。卸载IE9，重新安装。仍然没有运气。

**解决方法如下：** 关键是消息说 pdm.dll 的错误版本没有注册。显然 IE10 安装提供了一个新的 pdm.dll 并且重新安装 IE9 并没有替换它。我在另一个系统上找到了一个旧版本，将它复制到 C:\Program Files\Common Files\microsoft shared\VS7Debug 文件夹，注册它，现在 VS2010 调试又可以工作了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:40:20.603

**不幸的是，这里的解决方案**对我没有帮助。

我的解决方案： - 删除 IE 10 - 控制面板 - 程序和功能 - VS 2012 - 更改 - 修复。（我已选择从 Internet 下载组件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:52:43.013

请参阅“这是解决方案”评论。当我发布它时我有答案，但想分享它并避免其他人浪费更多时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-07T13:42:57.767

我们解决了一个类似的问题，再次注册所有的 dll

```
C:\Program Files\Common Files\Microsoft Shared\VS7Debug
C:\Program Files (x86)\Common Files\microsoft shared\VS7Debug 
```

第一个记得使用：

```
%systemroot%\System32\regsvr32.exe 
```

对于第二个（32位）：

```
%systemroot%\SysWoW64\regsvr32.exe 
```

如果这还不够，请转到 VS 调试菜单并转到选项和配置 > 即时，取消选中那里的所有选项（管理、本机、脚本），然后单击确定

转到某个地方并再次检查这些选项，然后再次单击“确定”。

# sql - SQL 子查询引发错误

> ID：14343272
> 
> 赞同：3
> 
> 时间：2013-01-15T17:24:26.467
> 
> 标签：sql, sql-server-ce, subquery, syntax-error

我正在尝试运行此查询

```
 SELECT        Name, Position, Salary
FROM            Employee
WHERE        (Salary =
                             (SELECT        MAX(Salary)
                               FROM            Employee)) 
```

但是，每当我运行它时，我都会收到以下错误

> 错误来源：SQL Server Compact ADO.NET 数据提供程序
> 错误消息：解析查询时出错。[Token line number = 1, Token line offset = 69, Token in error = SELECT]

我想知道这是否是我不理解子查询是如何工作的，尽管我的导师向我保证我试图运行的语句是正确的，任何人都可以对这种情况有所了解，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:27:02.523

这应该适用于 SQL Server：

```
SELECT Name, Position, Salary
FROM Employee E
   JOIN ( SELECT Max(Salary) as Sal FROM Employee ) M  ON E.Salary = M.Sal 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!3/72492/3)。

- 编辑

听起来您正在使用不完全支持嵌套子查询的 SQL Server CE。尝试这样的事情，而不是使用`IN`关键字：

```
SELECT e.Name, e.Position, e.Salary
FROM Employee e
WHERE e.Salary IN (SELECT MAX(Salary) as sal 
                   FROM Employee) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:44:09.973

精简版显然有几个限制。你可以试试这个：

```
SELECT e.Name, e.Position, e.Salary
FROM Employee e
  LEFT JOIN Employee s
    ON s.Salary > e.Salary
WHERE s.Salary IS NULL ; 
```

还有这个：

```
SELECT e.Name, e.Position, e.Salary
FROM Employee e
WHERE NOT EXISTS
      ( SELECT *
        FROM Employee s
        WHERE s.Salary > e.Salary
      ) ; 
```

还有这个：

```
SELECT e.Name, e.Position, e.Salary
FROM Employee e
WHERE e.Salary IN 
      ( SELECT MAX(s.Salary)
        FROM Employee s
      ) ; 
```

和这个（也许CE不允许`GROUP BY`在子查询/派生表中，或者在整个表上分组）：

```
SELECT e.Name, e.Position, e.Salary
FROM Employee e
WHERE e.Salary = 
      ( SELECT TOP (1) s.Salary
        FROM Employee s
        ORDER BY s.Salary DESC
      ) ; 
```

# java - 包含按字母顺序排列的字母的单词的正则表达式 JAVA

> ID：14343273
> 
> 赞同：7
> 
> 时间：2013-01-15T17:24:30.557
> 
> 标签：java, regex

我的学生（高中）问我一个关于正则表达式匹配包含按字母顺序排列的字母的单词的问题。老实说，我不知道如何创建这样的正则表达式。单词匹配示例，字母大小无关紧要：

```
abc, aWZ, gOR, bor 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-15T17:31:52.240

```
^a*b*c*d*e*f*g*h*i*j*k*l*m*n*o*p*q*r*s*t*u*v*w*x*y*z*$ 
```

应该管用

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-15T17:27:48.553

这应该有效：

```
(?i)a*b*c*...z* 
```

在循环中构建很容易。

```
StringBuilder b = new StringBuilder(64);
b.append("(?i)");
for (int i = 'a'; i <= 'z'; i++) b.append((char)i).append('*');
return Pattern.compile(b.toString()).matcher(input).matches(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T17:40:32.000

对于正则表达式来说，这并不是一个真正的好问题，在 for 循环中检查它几乎肯定更容易：

```
import static java.lang.Character.isLetter;
import static java.lang.Character.toLowerCase;

public boolean alphabeticalOrder(String word) {
    for (int i = 0; i < word.length() - 1; i++) {
        if (!isLetter(word.charAt(i)) || 
                toLowerCase(word.charAt(i + 1)) < toLowerCase(word.charAt(i)))
            return false;
    }
    return isLetter(word.charAt(word.length() - 1));
} 
```

或者，以下正则表达式在传入时也将正确匹配（仅适用于 ASCII 字母字符）[`CASE_INSENSITIVE`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#CASE_INSENSITIVE)：

```
^a*b*c*d*e*f*g*h*i*j*k*l*m*n*o*p*q*r*s*t*u*v*w*x*y*z*$ 
```

# php - 在传递 php 函数的输出时动态替换选项的值

> ID：14343275
> 
> 赞同：0
> 
> 时间：2013-01-15T17:24:36.327
> 
> 标签：php, arrays, string, preg-replace, var

我有一个`($options)`存储在 PHP var 中的字符串，其中包含一系列`<option>`元素，如下所示：

```
<option class="level-0" value="898">Text 1</option>
<option class="level-1" value="33">&nbsp;Text 2</option>
<option class="level-2" value="543">&nbsp;&nbsp;Text 3</option>
<option class="level-1" value="547">&nbsp;Text 4</option>
<option class="level-0" value="3328">Text 5</option> 
```

我想用`value`一个函数的结果替换每个的内容，该函数采用前一个值来生成一个 URL。URL 字符串（它是可变的）应该成为每个对应的新值`<option>`。我想保持原样。

我不确定这是否可以实现`preg_replace`，但如果每个选项都是一个带键的数组，我会知道该怎么做，但它是一个可变字符串......你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:31:36.220

```
$lines = explode(PHP_EOL, $options);

$new_options = array();

foreach ($lines as $option_line) {
   //do the preg replace for each line (quick and dirty regexp)
   $replaced_string_value = preg_replace('/>(\w+)<\//i', '>replacement<\\', $option_line);

   //add it to the new array   
   $new_options[] = $replaced_string_value; 
}

$options = implode(PHP_EOL, $new_options); 
```

# css - 在 CSS 中定义 DIV 宽度以允许在 iPad2 中滚动/滑动

> ID：14343277
> 
> 赞同：0
> 
> 时间：2013-01-15T17:24:44.053
> 
> 标签：css, ipad, width, swipe

提前为这个 CSS 问题的基本性质道歉。

我试图弄清楚如何处理 CSS 中的宽度。我有一个绝对定位`<div>`，包含一个相当宽的表。宽度为“ `<div>`1300px”。在桌面浏览器上一切正常。拥有高分辨率显示器的人可以看到整张桌子。那些分辨率低的人，或者从较小的浏览器窗口查看页面的人，能够水平滚动 div 以查看整个内容。一切都很好。

但是在原生分辨率为 1024px 的 iPad2 (Safari) 上发生了一些不同的事情。我希望 iPad 能够显示前 1024 像素的内容，并允许用户水平滚动（滑动？）以查看表格的其余部分。相反，它似乎试图将整个 1300px 塞入 1024px 屏幕，然后缩小字体以使所有内容都适合。

使用 CSS 告诉 iPad 浏览器以原始分辨率（即 1024）显示任何内容，然后允许用户水平滑动/滚动以查看其余内容的标准方法是什么？一小段代码会很有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:39:47.487

我没有 iPad，所以我看不到，但有几点：

您的 xhtml 无效。`<center>`不再存在（从外观上看，设计中实际上并不需要），您还应该以 px 指定任何标题图像的尺寸。

不知道您为什么要`margin:auto`在`mainwrap`. 试试`margin:0;`吧。

尝试添加`* {margin:0; padding:0}`到样式表的顶部，然后添加您以后需要的任何额外的填充和边距——这或多或少会在布局方面将所有浏览器设置为相同的起点。

如果您不想使用边框`{border:none}`（如果您说`border: 0px solid;`某些浏览器仍会尝试绘制一些东西）

这可能无法解决问题，但它将朝着正确的方向迈出一步，因为您的标记越有效，浏览器就越容易找到它来呈现。

尝试`width:100%`从任何父元素中删除，然后尝试修复它。

希望它对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T18:12:13.473

默认情况下，iOS Safari 会缩小任何页面以适应屏幕。如果这不是您想要的行为，您可以`meta viewport`通过`<head>`.

```
<meta name="viewport" content="width=device-width; initial-scale=1.0" /> 
```

编辑：更深入的解释：[http ://www.allenpike.com/2010/choosing-a-viewport-for-ipad-sites/](http://www.allenpike.com/2010/choosing-a-viewport-for-ipad-sites/)

# javascript - JavaScript 根据选定的下拉文本字符串获取二维数组值

> ID：14343278
> 
> 赞同：0
> 
> 时间：2013-01-15T17:24:49.477
> 
> 标签：javascript, jquery, dom, select

到目前为止，我有以下内容：

```
<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html" />
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <title>
      Select Value From Array
    </title>
  </head>
  <body>

    <script type="text/javascript">
        var KeysArray = { 
            "Lake":"imageabc.jpg",
            "House":"imagedef.jpg",
            "PC":"imageghi.jpg",
            "Sky":"imagejkl.jpg" 
        } 
        $(function(){
            $('.product').change( function() {
                var xkey = $.trim( $(".product option:selected").text() );
                // alert(xkey);
            }); 
        });
    </script>

    <div>

      <select class="product" title="">
        <option value="">
          -- Select --
        </option>
        <option value="123">
          Lake
        </option>
        <option value="456">
          House
        </option>
        <option value="789">
          PC
        </option>
        <option value="101">
          Sky
        </option>
      </select>

    </div>

  </body>
</html> 
```

一旦我们从下拉列表中选择了一个值，我需要将它的选项文本值与现有的对应数组值进行比较。

因此，如果用户选择“House”，我应该检查是否有具有该名称的键，如果有，我需要获取它的数组值。所以在“House”示例中它应该返回“imagedef.jpg”。

有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:28:47.657

```
$('.product').change( function() {
  var xkey = $.trim( $(".product option:selected").text() );
  alert(KeysArray[xkey]);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:29:20.830

我设法让它在**[这个](http://jsfiddle.net/JRwjb/)**jsfiddle 上为你工作。

您需要做的是在这一行的 KeysArray 对象中获取正确的键：

```
var xkey = KeysArray[ $.trim( $(".product option:selected").text() ) ]; 
```

或者，您可以分两步执行此操作以提高可读性。

```
var xkey = $.trim( $(".product option:selected").text() );
xkey = KeysArray[xkey]; 
```

* * *

在继续之前检查密钥是否确实存在可能是值得的。我建议在获得 xkey 后进行检查。

```
if (typeof xkey !== 'string') { xkey = 'Not found'; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T17:28:34.700

试试这个作为 onchange 回调函数体

```
var xkey = $.trim( $(".product option:selected").text() );
alert(KeysArray[xkey] || 'Not found'); 
```

我希望这有帮助。

# objective-c - Objective-C 中的 Autobox TypeDefs (LLVM 4+)

> ID：14343280
> 
> 赞同：1
> 
> 时间：2013-01-15T17:24:53.673
> 
> 标签：objective-c, autoboxing

我有这种类型的 Enum 和 TypeDef：

```
typedef enum {
    ControlDisplayOptionNone = 0,
    ControlDisplayOptionOne = 100
} ControlDisplayOption; 
```

我希望能够将它们放在这样的数组中：

```
- (NSArray *)displayOptions {
    return @[@ControlDisplayOptionNone];
} 
```

但这行不通，即使这样也行不通：

```
NSNumber *test = @ControlDisplayOptionNone; 
```

唯一可行的选择是传统的：

```
return @[[NSNumber numberWithInt:ControlDisplayOptionNone]]; 
```

有没有办法为此使用自动装箱？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T17:29:34.307

使用括号：`@(ControlDisplayOptionNone)`

[Objective-C Literals](http://clang.llvm.org/docs/ObjectiveCLiterals.html)的 Clang 文档中解释了语法。“盒装枚举”部分说：

> Cocoa 框架经常使用*枚举*定义常量值。尽管枚举值是整数，但它们不能直接用作盒装文字（这样可以避免与以 future`'@'`为前缀的 Objective-C 关键字发生冲突）。相反，枚举值必须放在一个装箱的表达式内。

# email - 在 FreeBSD 上为 PHP mail() 设置 MTA 的简单方法

> ID：14343281
> 
> 赞同：0
> 
> 时间：2013-01-15T17:25:03.877
> 
> 标签：email, freebsd, mta

我需要设置邮件服务器以仅从 PHP 脚本发送。我不需要接收电子邮件或通过其他方式发送。最好是 Postfix（例如，它比 Sendmail 容易）。Ssmtp 不适合我。

是否有一些手动或准备运行的配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T23:08:56.653

如果无法访问 mailhub 服务器，则 ssmtp 有一个很大的缺点是会丢失邮件。这种情况下至少应该有一些假脱机程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:45:03.057

freebsd 手册是关于您的要求的最佳资源：

[http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/mail-using.html](http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/mail-using.html)

[https://wiki.freebsd.org/SecureSSMTP](https://wiki.freebsd.org/SecureSSMTP)

我更喜欢ssmtp

# rest - 跨平台移动应用程序和 RESTful Web 服务和评分算法 - 架构和技术

> ID：14343282
> 
> 赞同：1
> 
> 时间：2013-01-15T17:25:04.533
> 
> 标签：rest, web-applications, mobile, architecture, cross-platform

我正计划创建一个跨平台的移动应用程序，该应用程序具有适用于大多数移动平台的原生版本，可能是 Windows Phone、Android、iOS。它应该将数据存储在服务器上的数据库中，而移动应用程序主要用于可视化该（数字）数据。

# 基本使用场景

*   用户打开应用
*   应用程序数据通过互联网连接刷新
*   用户输入新数据
*   新数据被发送到服务器，处理并更新数据库
*   用户的应用数据根据数据库数据更新（*动画！*）
*   用户更新其应用程序上的设置，从而改变其行为。

在单独设计和编程移动应用程序 + Web 服务方面，我是一个菜鸟，所以我希望你能帮助我解决以下问题。我最熟悉的技术：Java EE、Python、HTML/CSS/JS、MySQL、Graphics。也许我应该去PhoneGap？非常感谢！

1) 您会推荐哪些跨平台移动技术？

2）什么样的解决方案最适合服务器/应用服务器？（估计代码行 < 5000）

3) 什么是开始学习评分算法的好地方？

如果您对所提出的任何问题有答案，请回复。

![服务的基本结构](../Images/cde86f822b8d2687ffe15d99c4db35c2.png)

编辑：发现了一个类似的问题：[Cross-Platform Mobile Application Solution](https://stackoverflow.com/questions/9756547/cross-platform-mobile-application-solution)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-17T08:56:20.663

@thevangelist：你提出的问题非常好，当我们开始编写应用程序时，所有移动开发人员都面临同样的问题。今天，市场上有多种开源框架，它们试图以不同的方式解决相同的问题。

根据我的研究和经验，我想推荐以下我们在构建移动应用程序时可以考虑的技术。

**视图**：视图是任何移动应用程序的重要组成部分。当我们开始构建 UI/UX 时，我们还考虑了它的平台设计原则。考虑到这些点，我想同样推荐[React Native](http://facebook.github.io/react-native/)。

React Native：它是 Facebook 和 Instagram 开发的用于创建原生移动应用程序的 JavaScript 库。它允许我们使用 JSX（一种已知的 HTML 类似代码）和 JavaScript 编写 iOS 和 Android 应用程序。它基于“一次学习，随处编写”的方法。

*   **优点**

    *   以原生行为和交互呈现原生视图……你最终会得到一个真正的原生应用程序

    *   具有“一次学习，随处编写”的范式，开发人员只需要 React 和 JavaScript 即可为 Andoroid、iOS 创建更好的应用程序。

    *   使用原生架构和概念

    *   它不需要 WebView

    *   CSS Flexbox 用于布局设计

*   **缺点**

    *   代码抽象导致错误和内存泄漏

    *   没有 React Native 提供的 API 就无法工作，从技术上讲，没有像经典混合移动应用程序那样的回退

    *   在创建适当的本机应用程序时，开发人员将在性能调整方面拥有更多权力和控制权

    *   React Native 仍然是一个新框架，所以我们无法预测可能的问题和缺点

这些缺点可以忽略不计，尤其是当我们考虑到 React Native 每天都在为越来越多的本地应用程序提供支持时。

**传输中的数据**：如果您的应用程序从 Web 服务同步数据，那么市场上有多种框架可以让我们的工作更轻松。请在下面找到一些最流行的 JavaScript RESTful 框架：

[ACTIONHERO](http://www.actionherojs.com/) , [StrongLoop](https://strongloop.com/node-js/loopback-framework/)

**静态数据**：您还需要离线存储同步数据。由于我们在 JavaScript 中没有直接支持原生 SQLite，因此我们需要使用一些 React Native SQLite 插件。请在市场上找到以下插件：

[几乎](https://github.com/almost/react-native-sqlite)，[andpor](https://github.com/andpor/react-native-sqlite-storage)，[jbrodriguez](https://github.com//react-native-android-sqlite)，[ramsundark5](https://github.com/ramsundark5/react-native-sqlite3)，[remobile](https://github.com/remobile/react-native-sqlite)

对于**Transit/Data at Rest 的数据**，我想推荐在所有主要平台（Android、iOS、Windows）上都可用的[Siminov 框架。](http://siminov.com)它还支持[React Native](http://www.actionherojs.com/)、[Cordova](http://www.actionherojs.com/)、[Xamarin](https://strongloop.com/node-js/loopback-framework/)等混合技术。

**优点**

*   适用于所有主要平台（Android、iOS 和 Windows）
*   易于配置，它提供标准的基于 xml 的结构，使用我们可以轻松配置我们的应用程序数据库
*   它也允许开发人员将 ORM 与远程 RESTFul Web 服务绑定
*   还支持所有平台上的[SQLCipher](https://github.com/andpor/react-native-sqlite-storage)

**缺点**

*   缺乏社区：最近他们在各大平台上都推出了他们的产品，使用它的人并不多。
*   由于配置是基于 XML 结构的，这对我来说看起来很旧。但根据他们的文档，它支持所有主要平台

**算法**：我找到了这个与算法相关的链接[nurlybayevaAMS9](http://www.m-hikari.com/ams/ams-2013/ams-9-12-2013/nurlybayevaAMS9-12-2013.pdf)，希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:45:11.940

1) 没用过PhoneGap，虽然知道，但别忘了考虑一个简单的HTML5应用。如果可能的话，这将为您节省大量工作并最大限度地提高兼容性。

2) 您可以使用 Java EE（参见 JAX-RS/Spring）和 Python（参见 django）开发出色的 RESTful Web 服务。选择实际上更多的是个人品味的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T01:01:00.783

尽量避免编写跨平台应用程序。使用 HTML5+jQuery 是可行的。但是您永远无法获得与原生应用程序相同的外观和感觉。其次，windows、ios和android都有自己的外观和感觉，会想出自己的元素。您永远无法满足所有三个具有相同代码库的需求。更好的是使用本机 sdks 进行编码。

# ios - UIManagedDocument openWithCompletionHandler 返回 NO

> ID：14343285
> 
> 赞同：2
> 
> 时间：2013-01-15T17:25:13.207
> 
> 标签：ios, core-data-migration, uimanageddocument

所以我正在将我的核心数据迁移到 UIManagedDocument。

在 iPhone 模拟器上调用 openWithCompletionHandler 可以正常工作，但是当我尝试在真实设备上运行我的项目时，它总是返回 NO。我覆盖了handleError，这就是我得到的：

```
 Error Domain=NSCocoaErrorDomain Code=260 
"The operation couldn’t be completed. (Cocoa error 260.)" 
UserInfo=0x1edafa90 {path=file://localhost/var/mobile/Applications/D57D7EAC-6E92-4CAD-97E7-179010CB6738/Project%20APP.app/DataModel.momd/StoreContent.nosync, NSUnderlyingError=0x1ed8e160 
"The operation couldn’t be completed. (Cocoa error 513.)", reason=Unable to restore path to store content} 
```

这就是我所说的：

> ```
> NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
>                           PrivateName, NSPersistentStoreUbiquitousContentNameKey,
>                          //   cloudURL, NSPersistentStoreUbiquitousContentURLKey,
>                          [NSNumber numberWithBool:YES],
>                          NSMigratePersistentStoresAutomaticallyOption,
>                          [NSNumber numberWithBool:YES],
>                          NSInferMappingModelAutomaticallyOption,
>                          nil];
> [self setPersistentStoreOptions:options];
> 
> [self openWithCompletionHandler:^(BOOL success) {
>     if (success)
>     NSLog(@"opened");
>     else {
>         NSLog(@"Not opened");
>     }
> }]; 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:10:11.677

如果您尝试在 iCloud 中打开文档，则需要同时设置`NSPersistentStoreUbiquitousContentNameKey`并`NSPersistentStoreUbiquitousContentURLKey`在 persistentStoreOptions 中设置 - 您目前已注释掉 NSPersistentStoreUbiquitousContentURLKey。

如果您尝试打开设备本地的文档，则您不希望在选项中设置这些键。

在您的情况下，我猜测这适用于模拟器，但不适用于设备，因为模拟器目前无法在 iCloud 中打开文档。另一方面，设备能够在 iCloud 中打开文档，而你没有给它足够的信息来正确地做到这一点，所以它很无聊。

# wordpress - 无法更改 og_type

> ID：14343288
> 
> 赞同：6
> 
> 时间：2013-01-15T17:25:34.780
> 
> 标签：wordpress, facebook-opengraph, tumblr

我刚刚用一个全新的 Wordpress 网站替换了一个客户的 tumblr 网站。[通过Facebook 调试器](https://developers.facebook.com/tools/debug/)运行它时，我收到此错误：

> “ [http://example.com/](http://example.com/) ”上的对象以前具有“tumblr-feed:tumblelog”类型，并且不能更改为“网站”类型的对象，以避免现有操作的数据损坏。

我在 Google 上搜索了“无法更改 og_type”（用引号括起来），[结果](https://www.google.com/search?q=Cannot%20change%20og_type#hl=en&tbo=d&sclient=psy-ab&q=%22Cannot%20change%20og_type%22&oq=%22Cannot%20change%20og_type%22&fp=b2b10486a813a4e7)几乎为零（现在看来，这个问题有结果）。我真的注定 Facebook 数据不匹配吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T18:31:57.537

根据错误消息

`... cannot be changed to an object of type 'website' to avoid data corruption of existing actions.`

如果`og:type`URL 被更改，任何现有用户发布链接或共享它，任何引用它的 Open Graph 操作，以及任何喜欢的 URL 都将被破坏，并且用户的个人资料将丢失他们之前发布的内容.

我不相信有任何办法可以解决这个问题，因为这是一种有意限制，以避免破坏引用 URL 的现有帖子、喜欢、操作等。如果帖子被破坏，内容将从用户的时间线上删除或损坏。

如果您想在该 URL 上拥有一个“新”对象，一种可能的解决方法是使用我在[此答案中关于移动 URL](http://facebook.stackoverflow.com/a/10152342/21062)的说明，以便在您尝试更改的 URL 上放置一个 Like 按钮（我们称之为 A），但指向到一个稍微不同的新 URL（我们称之为 B），然后在我的回答中使用重定向机制将登陆 URL B 的用户反弹回 A，但如果 Facebook 爬虫访问，则在 URL B 上提供描述“A”的元数据它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:13:19.600

客户的网站是否有超过 10,000 个赞？如果是这样，Facebook 不允许`og:type`更改。

> 您可以通过更新页面的标签来更新页面的属性。请注意，og:title 和 og:type 最初只能编辑 - 在您的页面收到 50 个赞后，标题变为固定，在您的页面收到 10,000 个赞后，类型变为固定。这些属性是固定的，以避免让已经喜欢该页面的用户感到惊讶。达到这些限制后更改标题或类型标签没有任何作用，您的页面将保留原始标题和类型。

[这是](https://developers.facebook.com/docs/opengraphprotocol/)**Open Graph**文档的链接。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T04:10:40.457

我建议使用 Open Graph Debugger 检查 facebook 真正看到的内容以及 facebook 最终是否有您网站的缓存版本。（您可以在这里找到 hte 调试器：[https](https://developers.facebook.com/tools/debug) ://developers.facebook.com/tools/debug ）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-01T07:44:25.830

注意它没有说 og:type - 它说 og_type

This is hitting me too since my og:type is set to "shamrockirishbar:shamrockirishbar" BUT the linter is saying og_type (of which there is none in my meta data) is set to "website". [enter link description here](https://developers.facebook.com/tools/debug/og/object?q=www.shamrockirishbar.com)

# php - 在#content 中使用ajax.load 在wordpress 循环外检索查询

> ID：14343294
> 
> 赞同：1
> 
> 时间：2013-01-15T17:26:03.510
> 
> 标签：php, ajax, wordpress

我正在基于自定义分类法对 wordpress 进行高级搜索。我自 48 小时以来就被困住了，所以我希望能得到一些帮助或想法......

**第 1 步**--- 在 js 文件中，查询字符串的创建方式如下：

```
if (jQuery('#s').val() == ''){
URL = "/?genre=" + genre + '...other Stuff' #content';
}else{
URL = "/?s="+searchQueryString+"&genre=" + genre +'...other stuff' #content';
} 
```

它很好地将我的自定义循环加载到我的#content div 中，而无需更改浏览器 url 或重新加载标题，这非常好......到目前为止。:-)

**第 2 步**--- 然后我在 function.php 中编写了 2 个函数，一个用于在主页上加载带有 GET[] 元素的循环，`new WP_Query` 另一个用于搜索查询：

```
add_action('pre_get_posts','SearchFilter'); 
```

这是用 content.php 中的 GET[s] 编译我的 GET[] 过滤器，仍然很好....

**第3步**---（问题^^）---

我想添加一个 css 类来停用位于我的 header.php 中的单选按钮，具体取决于循环中的结果。

**Try-1**我想我可以创建一个 php 数组来编译在循环发生时找到的术语，然后将它与我的按钮值进行比较。就像这样：

```
$args = array('orderby' => 'name', 'order' => 'ASC', 'fields' => 'slugs');
$results = wp_get_post_terms(get_the_ID(),'category',$args);  
foreach ($results as $result){
    array_push($stack, $result);

} 
```

但是没有办法在之后从标题中的该数组中检索数据，或者使用诸如`global $post;`因为我的 url 没有改变的东西从标题中创建它。它只显示主页查询。

**Try-2**我还认为我可以将它编码为 json，然后在我的 js 文件中添加一些操作。但到目前为止它只是返回 json 意外字符，我觉得即使我破解它，它也不会是正确的方法，因为它会使 js 文件更重。

可能是我只是错过了有关 Global wp_query 的一些东西，而我不需要为我的脚本收费？

原谅我的英语和长长的问题，

如果您有任何想法，请提前非常感谢，

达科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:04:47.917

我将使用[wp_localize_script](http://codex.wordpress.org/Function_Reference/wp_localize_script)将数组导出到我的 js 脚本，谢谢排序

# jquery - 遍历 JSON 并提取数组/描述，需要帮助

> ID：14343297
> 
> 赞同：2
> 
> 时间：2013-01-15T17:26:07.740
> 
> 标签：jquery, arrays, json, loops

```
[
{
    "Description": "Accommodation",
    "ChartData": [
        {
            "label": "Acceptable",
            "data": 24
        },
        {
            "label": "Excellent",
            "data": 30
        },
        {
            "label": "Good",
            "data": 96
        },
        {
            "label": "Poor",
            "data": 2
        }
    ]
},    
{
    "Description": "Food and Beverage",
    "ChartData": [
        {
            "label": "Acceptable",
            "data": 44
        },
        {
            "label": "Excellent",
            "data": 24
        },
        {
            "label": "Good",
            "data": 94
        },
        {
            "label": "Poor",
            "data": 13
        }
    ]
},
{
    "Description": "Meeting Space",
    "ChartData": [
        {
            "label": "Acceptable",
            "data": 30
        },
        {
            "label": "Below Expectations",
            "data": 2
        },
        {
            "label": "Exceeds Expectations",
            "data": 3
        },
        {
            "label": "Excellent",
            "data": 54
        },
        {
            "label": "Good",
            "data": 111
        },
        {
            "label": "Meets Expectations",
            "data": 7
        },
        {
            "label": "Poor",
            "data": 6
        }
    ]
},    
{
    "Description": "Service",
    "ChartData": [
        {
            "label": "Acceptable",
            "data": 25
        },
        {
            "label": "Exceeds Expectations",
            "data": 3
        },
        {
            "label": "Excellent",
            "data": 46
        },
        {
            "label": "Good",
            "data": 111
        },
        {
            "label": "Meets Expectations",
            "data": 8
        },
        {
            "label": "Poor",
            "data": 11
        }
    ]
},
{
    "Description": "Standard of Decor",
    "ChartData": [
        {
            "label": "Acceptable",
            "data": 38
        },
        {
            "label": "Excellent",
            "data": 34
        },
        {
            "label": "Good",
            "data": 126
        },
        {
            "label": "Poor",
            "data": 5
        }
    ]
}
] 
```

使用上面的 JSON，我如何循环遍历每个并分配两个包含描述的变量，以及 jquery/javascript 中 ChartData 的数组，即

```
foreach() {
var Description = data[].Description;
var ArrayOfChartData = data[].ChartData;
} 
```

我尝试使用 .each 循环，但无法返回正确的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:27:38.430

JavaScript 数组有一个[`forEach`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)方法：

```
data.forEach(function (v) {
    var Description = v.Description;
    var ArrayOfChartData = v.ChartData;
    // now use that...
}); 
```

这是小提琴：http: [//jsfiddle.net/u7RuZ/](http://jsfiddle.net/u7RuZ/)

* * *

不幸的是，IE < 9 不支持这一点。如果你必须支持 IE8，你可以使用 jQuery 的[`$.each`](http://api.jquery.com/jQuery.each/)：

```
$.each(data, function (i, v) {
    var Description = v.Description;
    var ArrayOfChartData = v.ChartData;
    // now use that...
}); 
```

这是小提琴：http: [//jsfiddle.net/u7RuZ/1/](http://jsfiddle.net/u7RuZ/1/)

# javascript - http.clientResponse - 获取“reasonPhrase”的方法？

> ID：14343302
> 
> 赞同：0
> 
> 时间：2013-01-15T17:26:37.733
> 
> 标签：javascript, node.js

我现在使用 node.js 已经将近 2 年了。但今天是第一次，我想从使用 http.request() 创建的 clientResponse 中获取“reasonPhrase”或“statusMessage”。

没有我可以访问的财产。至少文档中没有定义。有没有办法得到它？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:15:47.503

似乎此信息无法通过 node.js 使用的 http-parser 获得。

我现在已经在 node.js 和 http-parser 上启动了一个功能请求来实现这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T17:30:05.427

以下适用于节点 v0.8.x（但不适用于 v0.10.x）

```
var http = require('http');

var clientRequest = http.get("http://www.stackoverflow.com", function(res) {
    console.log("statusCode=" + res.statusCode);
});

clientRequest.on('socket', function(socket) {
    socket.once('data', function(buffer) {
        console.log("reasonPhrase=" + buffer.toString().
                    match(/^HTTP.+ \d+ (.*)(\n|\r).*/)[1]);
    });
}); 
```

# file - 强制 dlmread 返回 uint8 矩阵 - 可能吗？

> ID：14343303
> 
> 赞同：3
> 
> 时间：2013-01-15T17:26:40.380
> 
> 标签：file, matlab, memory-management, types, matrix

我有一个包含一个非常非常大的矩阵的文件，大小为数百万 x 数百，我想进一步处理这个矩阵，同时节省内存。但不幸的是， dlmread 返回一个双精度型矩阵。

这个文件中的数字只有 0-255，所以 uint8 是最合适的。但是我已经达到了内存限制，当我尝试使用 myMat = single(myMat); 将加载的矩阵转换为 uint8 时，Matlab 开始大喊“内存不足”错误。这是有道理的，因为在删除旧矩阵之前必须创建一个新矩阵。

我可以对此做些什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T17:28:56.493

您可以将数据文件转换为合适的（即无损）8 位图像格式（使用外部程序），然后使用`imread`. 读取这个文件也应该快很多，因为不涉及数据转换。

# c++ - popen - fgets 后立即 EOF

> ID：14343309
> 
> 赞同：0
> 
> 时间：2013-01-15T17:27:15.297
> 
> 标签：c++, c, posix

我遇到了 popen 的问题（我在 CentOS 机器上使用它）。

代码是这样的（_oss 是一个 ostringstream）：

```
 ...

  FILE*  lp_pipe = popen("/opt/scripts/myscript.php", "r");

  if(!lp_pipe) {
    return false;
  } 

  char l_buffer[256];
  while(!feof(lp_pipe))
  {  
    if(fgets(l_buffer, 256, lp_pipe) != NULL) 
      _oss << l_buffer;
  }

  pclose(lp_pipe);

  .... 
```

现在这工作正常，直到有人更改了 php 脚本。当我从命令行运行脚本时，我仍然看到预期的结果，但是代码不再起作用。第一次`fgets`调用它现在返回 NULL 然后`feof(lp_pipe)`返回 1

# javascript - 如何使用 CSS 创建“两层”列表？

> ID：14343310
> 
> 赞同：1
> 
> 时间：2013-01-15T17:27:18.957
> 
> 标签：javascript, css

我将使用 CSS 寻找类似于经典 iPhone“滑动显示”外观的东西![一个例子](../Images/b34fa159197f574ef62ba97e3f818fa0.png)

我的目标代码结构类似于

```
<ul>
    <li>Top Content</li>
    <li>Bottom Content</li>
</ul> 
```

因此，使用 javascript 和 css 转换我可以让顶层滑开并显示底层。我尝试将底层设置为顶部：-（li 的高度）和 z-index -1 哪种工作方式（它们确实重叠）除了由于这个原因，div 之间有很大的空间（margin 0 padding 0 没有不解决）

我还能如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:11:17.113

我真的认为使用相同的列表来完成这是一个糟糕的主意你应该只使用两个不同的 ul 的[http://jsfiddle.net/8JYA2/](http://jsfiddle.net/8JYA2/)

```
<ul class="list-1">
  <li>One</li>
  <li>Two</li>
  <li>Three</li>
  <li>Four</li>
</ul>
<ul class="list-2">
  <li>Back One</li>
  <li>Back Two</li>
  <li>Back Three</li>
  <li>Back Four</li>
</ul> 
```

我可能错了，但您为什么要针对该代码结构？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:13:16.847

经过一些帮助和试验，我现在有了一个可行的解决方案。

解决方案是制作一个列表，但每 li 放置两个 div 并将 div 分层。然后使用javascript，修改div上的左右百分比，让顶部的div滑掉。代码看起来像这样

```
<ul>
  <li><div>Top Content</div></li>
  <li><div>Bottom Content</div></li>
</ul> 
```

结合我之前关于在顶部内容上将 z-index 设置得更高的想法，它效果很好。

# iphone - UITableView 停止滚动时如何获得回调？

> ID：14343324
> 
> 赞同：0
> 
> 时间：2013-01-15T17:28:29.477
> 
> 标签：iphone, objective-c, ipad

在我的 iPhone 应用程序中，我有一堆代码在一个方法中运行。在方法的最后，我有几行需要延迟，所以它们只在之前的内容之后运行，这是因为正在制作动画，我需要在动画完成时运行这段代码。

我知道我可以只使用 NSTimer，但我想尝试一些更优雅或更简洁的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:38:39.660

您可以用于第一个过程：

```
– performSelector:onThread:withObject:waitUntilDone: 
```

这将阻塞你的线程，直到进程完成。

在此之后，您的下一条语句将开始执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:44:27.820

执行此操作的标准（并且非常方便）iOS 方式是回调块。考虑一个简单的 UI 动画：

```
[UIView animateWithDuration:1
                 animations:^{
                   myView.alpha = 1; // fade-in myView
                 }
                 completion:^(BOOL finished){
                     // this code gets called when the animations block above is finished
                 }]; 
```

您可以实现自己的方法，将完成块作为参数，并在执行结束时调用它。这是[Apple的块教程](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)，应该可以帮助您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T18:45:26.833

如果即使在动画结束后您还需要延迟，您可以调用您的第二个过程：

```
[self performSelector:<#(SEL)#> withObject:<#(id)#> afterDelay:<#(NSTimeInterval)#>] 
```

# php - 使用 php 和 javascript 将 wiki 拉到 html

> ID：14343325
> 
> 赞同：0
> 
> 时间：2013-01-15T17:28:31.490
> 
> 标签：php, javascript, dokuwiki

我想使用此处提到的这些技术将 wiki 语法更改为 html。

[http://www.ladyada.net/library/software/wiki.html](http://www.ladyada.net/library/software/wiki.html)

这是我的 php 页面的源代码，它似乎工作正常。你可以这样尝试自己：

[http://temelelektronik.net/wiki/show.php?id=test](http://temelelektronik.net/wiki/show.php?id=test)

```
<?
if(!defined('DOKU_INC')) define('DOKU_INC',realpath(dirname(__FILE__)).'/');
require_once(DOKU_INC.'inc/init.php');
require_once(DOKU_INC.'inc/common.php');
require_once(DOKU_INC.'inc/events.php');
require_once(DOKU_INC.'inc/pageutils.php');
require_once(DOKU_INC.'inc/html.php');
require_once(DOKU_INC.'inc/auth.php');
require_once(DOKU_INC.'inc/actions.php');

//import variables
$QUERY = trim($_REQUEST['id']);
$ID = getID();

$REV = $_REQUEST['rev'];
$HIGH = $_REQUEST['s'];
if(empty($HIGH)) $HIGH = getGoogleQuery();

//sanitize revision
$REV = preg_replace('/[^0-9]/','',$REV);

$html = p_wiki_xhtml($ID,$REV,true);
$html = addslashes($html);
$html = ereg_replace("\n", '\n'."\\\n", $html);
$html = str_replace("</a>", "</a> ", $html);

echo ('var zoomy = "'.$html.'";');
echo ("document.write(zoomy);");

$url = "http://www.temelelektronik.net/wiki/" . str_replace(':', '/', $_REQUEST['id']);
$footer = '<hr /><br /><em>This page was autogenerated from
<a href=\"'.$url.'\" target=\"_blank\">' . $url . '</a> <br />Please edit the wiki to contribute any updates or corrections.</em>';

$footer = '"' . $footer . '"';
echo ('document.write('. $footer . ')');
?> 
```

但是，当我将此 Javascript 代码添加到空白 html 页面时，我什么也看不到。这是 HTML 文件。

```
<html>
<head>
<script language="Javascript" src="/show.php?id=test"></script>
</head>
<body>  
</body>
</html> 
```

如您所见，它什么也没显示。

[http://temelelektronik.net/wiki/test.html](http://temelelektronik.net/wiki/test.html)

我该如何解决这个问题？您可以提供的任何帮助将不胜感激。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:05:03.880

因为您提供了错误的 URL？

```
http://temelelektronik.net/wiki/show.php?id=test 
```

对比

```
<script language="Javascript" src="/show.php?id=test"></script> 
```

显然它应该是 /wiki/show.php?id=test

# java - 客户端服务器模型的 REST 或 SOAP

> ID：14343332
> 
> 赞同：0
> 
> 时间：2013-01-15T17:28:55.237
> 
> 标签：java, android, web-services, rest, soap

我从堆栈溢出的另一个[链接中读到](https://stackoverflow.com/questions/840653/wsdl-vs-rest-pros-and-cons)

1.  SOAP适用于分布式计算，数据格式更丰富，易于开发（因为有很多工具可以帮助开发）但是很重，可读性和复杂性较差。

2.  Rest 机器可读性较差，由于缺乏工具而难以开发，但重量轻，专为点对点通信而设计，是新技术

我想创建一个将从 android 设备调用的 web 服务，并且数据交换仅在 android 设备和谷歌应用引擎部署的 web 服务之间进行。

那么在这种情况下，您会选择 REST 还是 SOAP？

在这两种情况下，我应该选择哪种 APIS 实现？Java 是我选择的编程语言

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:33:09.053

REST 似乎是 Web 开发的通用模型，也是我建议的方法。你是对的，解析响应和理解正确的 URL 结构等可能会有更多的开销。

标准的 http API 适用于 REST 开发，因此不需要额外的包来实现。

我个人不喜欢 SOAP 模型的所有开销——它可能使分发更容易，但需要大量开销才能正常工作。

注意：因为这不是一个编程问题——也许有更好的地方可以问这个问题？

# c# - 实体框架 - 删除 N:N 中单个实例的完整关系

> ID：14343333
> 
> 赞同：0
> 
> 时间：2013-01-15T17:28:55.950
> 
> 标签：c#, entity-framework

我有以下课程

```
public class ObjectA{
   private List<ObjectB> list;    
} 
```

ObjectA 和 ObjectB 是 N:N 关系。
如何删除两者之间的所有关系？
似乎 list.clear() 没有做这项工作。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:35:15.107

如果实体附加到上下文`list.Clear()`将完成工作，例如：

```
using (var ctx = new MyContext())
{
    var objectA = ctx.ObjectAs.Include("list").Single(o => o.Id == someId);

    objectA.list.Clear();

    ctx.SaveChanges();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:05:55.327

list.Clear() 在连接模式下工作得很好，但它需要所有 B 记录属于从数据库中提取的 A。有时如果 B 太多可能会影响性能（在实践中很少发生）。在这种情况下，您还可以使用存储过程或 context.Database.ExecuteSqlCommand("delete from...") 手动删除关系表中的关系。

# c# - 通过动画在 WPF ItemsControl 或 ScrollViewer 中循环项目？

> ID：14343338
> 
> 赞同：3
> 
> 时间：2013-01-15T17:29:11.313
> 
> 标签：c#, wpf, user-controls, wpf-controls, itemscontrol

在`ItemsControl`or中移动项目时`ScrollViewer`，我可以循环内容以使第一个项目“在”最后一个项目“之后”（用户感知）？

我有一个自定义`ScrollViewer`选项，可以在选择之间进行动画处理，目前包含一个`ItemControl`. 用于设置我的控件的 XAML 如下：

```
<local:AnimatedScrollControl x:Name="myScroll" Grid.Column="1" VerticalScrollBarVisibility="Hidden" HorizontalScrollBarVisibility="Hidden">
    <ItemsControl x:Name="myList"
                    ItemsSource="{Binding SlidesList}"
                    ItemTemplate="{StaticResource SlideTemplateOne}"
                    VirtualizingStackPanel.IsVirtualizing="True" VirtualizingStackPanel.VirtualizationMode="Recycling">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl>
</local:AnimatedScrollControl> 
```

中的每个项目都`ItemControl`占据了控件的整个可见区域，因此用户一次只能看到一个项目。下图表示正在运行的控件，红色框表示视口。计时器自动移动到下一个项目。 ![控制实例01](../Images/c653220e6625465c1dc880ac561fcc3c.png) 移动幻灯片的代码（为简洁起见）当前如下所示：

```
private void NextSlide()
{
    _currentSlide++;

    // get the current offset
    double offset = (double)myScroll.GetValue(AnimatedScrollControl.SlideOffsetProperty);

    // get the width of the current slide
    FrameworkElement elementContainer = myList.ItemContainerGenerator.ContainerFromItem(CurrentSlide) as FrameworkElement;

    // set the `to` value for a single slide shift
    double to = offset + elementContainer.ActualWidth;

    if (_currentSlide == _items.Count)
    {
        to = 0;
        _currentSlide = 0;
    }

    DoubleAnimation animation = new DoubleAnimation();
    animation.EasingFunction = new CubicEase { EasingMode = EasingMode.EaseOut };

    animation.From = offset;
    animation.To = to;
    animation.Duration = TimeSpan.FromMilliseconds(300);

    myScroll.BeginAnimation(AnimatedScrollControl.SlideOffsetProperty, animation);
} 
```

当到达最后一张幻灯片并且视口更新到第一张幻灯片时，它会反向扫描所有幻灯片以到达开头。像这样： ![控制实例 02](../Images/9e95af040f417cbb574eb1d271f4d2ae.png) 我想做的是让它看起来好像视口直接从“幻灯片 5”扫描到“幻灯片 1”，例如： ![控制实例 03](../Images/e2f094363d42c21358171338c8a0ff11.png)

有没有办法可以设置我的`ItemsControl`or`ScrollViewer`或调整 my`Animation`以实现此目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:52:15.543

我的解决方案是使用`LoopFrame`WPF 博士编写的旧类。

[http://drwpf.com/blog/2009/08/05/itemscontrol-n-is-for-natural-user-interface/](http://drwpf.com/blog/2009/08/05/itemscontrol-n-is-for-natural-user-interface/)

# codeigniter - 将 Codeigniter 调用中的表单验证扩展到非对象错误上的成员函数

> ID：14343341
> 
> 赞同：0
> 
> 时间：2013-01-15T17:29:21.967
> 
> 标签：codeigniter, codeigniter-2

我知道以前有人问过这个问题，并且我已经查看了发布的每个答案，但无济于事。基本上，我试图在 CI2+ 项目上扩展 Codeigniter 表单验证库，但每次我得到错误：

```
Fatal error: Call to a member function get_errors_array() on a non-object 
```

下面是我的代码：

应用程序/核心/CB_Form_validation.php

```
class CB_Form_validation extends CI_Form_validation{
    function __construct($rules = array()) {
        parent::__construct($rules);
        log_message('debug', "CB_Form_validaiton class initialized");
    }

    public function get_errors_array() {
        return $this->_error_array;
    }
} 
```

然后在我的ajax文件中我有构造等。

```
public function save(){
    if($this->form_validation->run() == FALSE){

    }
} 
```

在 if 语句中，我尝试了以下操作：

```
echo $this->form_validation->get_errors_array();
echo $this->cb_form_validation->get_errors_array();
echo get_errors_array(); 
```

我也尝试过将其`CB_Form_validation.php`放入应用程序/库中。同样，我也在我的 ajax 控制器的构造中尝试过这个

```
$this->load->library('CB_Form_validation');
$this->load->library('core/CB_Form_validation'); 
```

我已经设置`CB_`为我的自定义类前缀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:49:11.693

事实证明，要解决此问题，您应该执行以下操作：

1.  将您的自定义表单验证类移动到`application/libraries`文件夹
2.  您可以保持自定义类的结构不变
3.  用于`$this->form_validation->method()`访问您想要的功能
4.  只要您加载`form_validation`库，您就不需要执行`$this->load->library('custom_class')`，因为 CI 无论如何都会选择您的自定义前缀

希望这可以帮助某人

# jquery - 页面缩放/内容重叠

> ID：14343342
> 
> 赞同：0
> 
> 时间：2013-01-15T17:29:22.647
> 
> 标签：jquery, html, css

我有一个高度为 50px 的顶部 div，宽度必须是整个浏览器窗口的宽度。我正在设置 `width: 100%; 但问题是，当我放大放置在里面的其他内容时，会与其他内容重叠。我知道宽度：100%；将始终仅与当前缩放的屏幕一样多，这就是内容重叠的原因。

这个 div 的位置是固定的。我尝试使用 jQuery 设置宽度并且它可以工作，但是当缩小顶部 div 时不会保持最大可用屏幕宽度。

```
(document).ready(function(){
    var widthT = $(window).width();
    $('#top_status').css("width", widthT);
}); 
```

上面的 jQuery 可以放大，但不能缩小，因为宽度已经设置并且没有改变。

我正在尝试获得一些可以作为 facebook 顶部蓝条工作的东西。无论缩放如何，它都能很好地保持原位。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:59:23.170

如果您发布 jsFiddle，我们可以提供具体示例，但您应该能够使用[Media Queries](http://www.w3.org/TR/css3-mediaqueries/)解决这些问题。它们可以让您在调整窗口大小时控制断点，并确保无论查看站点的分辨率如何，它看起来都很好。

以下是导航中媒体查询的一些资源：

[一种响应式导航设计方法](http://filamentgroup.com/lab/responsive_design_approach_for_navigation/)

[渐进式和响应式导航](http://coding.smashingmagazine.com/2012/02/13/progressive-and-responsive-navigation/)

[将菜单转换为小屏幕的下拉菜单](http://css-tricks.com/convert-menu-to-dropdown/)

[创建一个纯 CSS 响应式菜单](http://www.jasondemeuse.com/blog/blog-article/create-a-pure-css-responsive-menu)

[带有 CSS 媒体查询和 jQuery 的响应式下拉菜单](http://www.justinwhall.com/responsive-drop-down-menu-with-css-media-queries-jquery/)

即使您不想更改结构或将其转换为下拉菜单，您也可以使用相同的媒体查询来调整菜单元素以使其适合任何位置。

# python - Python 2to3 不更改文件

> ID：14343343
> 
> 赞同：14
> 
> 时间：2013-01-15T17:29:24.253
> 
> 标签：python, module, python-2to3

我有一堆用 python 2.x 编写的模块，我需要它们在 3.x 中才能工作。我在整个文件夹上运行了 2to3，它似乎工作正常，但是当我再次查看文件时，它们是相同的。我没有使用 2to3 并且想知道它是否将转换后的文件保存在其他目录中。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-15T17:31:23.403

您需要使用开关`2to3`明确告诉实际编写更改：`-w`

```
2to3 -w example.py 
```

# android - Android Application stop unexpectedly

> ID：14343349
> 
> 赞同：0
> 
> 时间：2013-01-15T17:29:51.110
> 
> 标签：android

im doing an application which retrieve a location of a user using GPS and then redirect it to the new intent,let say if the user is in "Curve", it will redirect user to the Curve.class, but i got this error and it has been stopping me from proceeding.

```
01-15 17:21:09.644: D/HttpRetriever(309): <?xml version="1.0" encoding="UTF-8" standalone="yes"?><ResultSet xmlns:ns1="http://www.yahooapis.com/v1/base.rng" version="2.0" xml:lang="en-US"><Error>0</Error><ErrorMessage>No error</ErrorMessage><Locale>en-US</Locale><Found>1</Found><Quality>99</Quality><Result><quality>72</quality><latitude>3.158695</latitude><longitude>101.611586</longitude><offsetlat>3.158695</offsetlat><offsetlon>101.611586</offsetlon><radius>400</radius><name>3.1580999999999997, 101.61209833333332</name><line1>Jalan Pju 7/3</line1><line2>47800 Bandar Utama</line2><line3></line3><line4>Malaysia</line4><house></house><street>Jalan Pju 7/3</street><xstreet></xstreet><unittype></unittype><unit></unit><postal>47800</postal><neighborhood>Bandar Utama</neighborhood><city>Sungai Buloh</city><county>Petaling</county><state>Selangor</state><country>Malaysia</country><countrycode>MY</countrycode><statecode></statecode><countycode></countycode><uzip>47800</uzip><hash></hash><woeid>28347311</woeid><woetype>11</woetype></Result></ResultSet>
01-15 17:21:09.644: D/HttpRetriever(309): <!-- nws01.maps.bf1.yahoo.com uncompressed/chunked Tue Jan 15 09:21:01 PST 2013 -->
01-15 17:21:09.644: D/HttpRetriever(309): <!-- wws07.geotech.ne1.yahoo.com uncompressed/chunked Tue Jan 15 09:21:00 PST 2013 -->
01-15 17:21:09.733: D/dalvikvm(309): GC_FOR_MALLOC freed 2299 objects / 157648 bytes in 58ms
01-15 17:21:09.754: D/XmlParser(309): Location:-Jalan Pju 7/3-47800 Bandar Utama-Malaysia
01-15 17:21:10.134: D/AndroidRuntime(309): Shutting down VM
01-15 17:21:10.134: W/dalvikvm(309): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
01-15 17:21:10.157: E/AndroidRuntime(309): FATAL EXCEPTION: main
01-15 17:21:10.157: E/AndroidRuntime(309): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.javacodegeeks.android.lbs/com.javacodegeeks.android.lbs.Curve}: java.lang.NullPointerException
01-15 17:21:10.157: E/AndroidRuntime(309):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-15 17:21:10.157: E/AndroidRuntime(309):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-15 17:21:10.157: E/AndroidRuntime(309):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-15 17:21:10.157: E/AndroidRuntime(309):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-15 17:21:10.157: E/AndroidRuntime(309):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-15 17:21:10.157: E/AndroidRuntime(309):  at android.os.Looper.loop(Looper.java:123)
01-15 17:21:10.157: E/AndroidRuntime(309):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-15 17:21:10.157: E/AndroidRuntime(309):  at java.lang.reflect.Method.invokeNative(Native Method)
01-15 17:21:10.157: E/AndroidRuntime(309):  at java.lang.reflect.Method.invoke(Method.java:521)
01-15 17:21:10.157: E/AndroidRuntime(309):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-15 17:21:10.157: E/AndroidRuntime(309):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-15 17:21:10.157: E/AndroidRuntime(309):  at dalvik.system.NativeStart.main(Native Method)
01-15 17:21:10.157: E/AndroidRuntime(309): Caused by: java.lang.NullPointerException
01-15 17:21:10.157: E/AndroidRuntime(309):  at com.javacodegeeks.android.lbs.Curve.onCreate(Curve.java:59)
01-15 17:21:10.157: E/AndroidRuntime(309):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-15 17:21:10.157: E/AndroidRuntime(309):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-15 17:21:10.157: E/AndroidRuntime(309):  ... 11 more
01-15 17:21:11.204: D/All Products:(309): {"success":1,"daftar_promotion":[{"id":"26","PromoImage":"\/images\/ego1.jpg","PromoCate":"Health  ","PromoDesc":"5% discount for items above RM200","PromoDateStart":"1-1-2013","Contact":"","PromoDateEnd":"31-1-2013","PromoName":"Egonutritions 5%  "},{"id":"27","PromoImage":"\/images\/dna.png","PromoCate":"Fashion","PromoDesc":"20% off for all shoes","PromoDateStart":"1-1-2013","Contact":"","PromoDateEnd":"31-1-2013","PromoName":"DNA New Year Sales"}]}
01-15 17:21:11.204: W/System.err(309): org.json.JSONException: No value for PromoID
01-15 17:21:11.404: W/System.err(309):  at org.json.JSONObject.get(JSONObject.java:354)
01-15 17:21:11.484: W/System.err(309):  at org.json.JSONObject.getString(JSONObject.java:510)
01-15 17:21:11.484: W/System.err(309):  at com.javacodegeeks.android.lbs.Curve$Activity.doInBackground(Curve.java:105)
01-15 17:21:11.484: W/System.err(309):  at com.javacodegeeks.android.lbs.Curve$Activity.doInBackground(Curve.java:1)
01-15 17:21:11.484: W/System.err(309):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
01-15 17:21:11.484: W/System.err(309):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-15 17:21:11.484: W/System.err(309):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-15 17:21:11.484: W/System.err(309):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
01-15 17:21:11.484: W/System.err(309):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
01-15 17:21:11.534: W/System.err(309):  at java.lang.Thread.run(Thread.java:1096) 
```

and this is my Curve.java

```
package com.javacodegeeks.android.lbs;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.widget.Toast;
import lbs.promotion.*;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ListView;
import android.widget.AdapterView.OnItemClickListener;

public class Curve extends Activity {

    private ProgressDialog pDialog;
     JSONParser jParser = new JSONParser();
     ArrayList<HashMap<String, String>> DaftarPromotion = new ArrayList<HashMap<String, String>>();

     private static String url_daftar_promotion = "http://10.0.2.2/webserver_maaug/promotion/daftar_promotion.php";

     public static final String TAG_SUCCESS = "success";
     public static final String TAG_DAFTAR_PROMOTION = "daftar_promotion";
     public static final String TAG_ID_PROMO = "PromoID";
     public static final String TAG_NAMA_PROMO = "PromoName";
     public static final String TAG_LINK_IMAGE_PROMO = "PromoImage";
     public static final String TAG_DESC_PROMO= "PromoDesc";
     public static final String TAG_CATE_PROMO = "PromoCate";

     JSONArray daftar_promotion = null;

     ListView list;
     PromotionListAdapter adapter;

     private Curve activity;

     @Override
     public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
     DaftarPromotion = new ArrayList<HashMap<String, String>>();

      new Activity().execute();
      activity = this;
      list = (ListView) findViewById(R.id.list);
      list.setOnItemClickListener(new OnItemClickListener() {
      @Override
      public void onItemClick(AdapterView<?> parent, View view,
      int position, long id) {
      }
      });
      }

      public void SetListViewAdapter(ArrayList<HashMap<String, String>> daftar) {
      adapter = new PromotionListAdapter(activity, daftar);
      list.setAdapter(adapter);
      }

      @Override
      protected void onActivityResult(int requestCode, int resultCode, Intent data) {
      super.onActivityResult(requestCode, resultCode, data);
      if (resultCode == 100) {
      Intent intent = getIntent();
      finish();
      startActivity(intent);
      }
      }

      class Activity extends AsyncTask<String, String, String> {

      @Override
      protected void onPreExecute() {
      super.onPreExecute();
      pDialog = new ProgressDialog(Curve.this);
      pDialog.setMessage("Please Wait...");
      pDialog.setIndeterminate(false);
      pDialog.setCancelable(false);
      pDialog.show();
      }

      protected String doInBackground(String... args) {
      List<NameValuePair> params = new ArrayList<NameValuePair>();
      JSONObject json = jParser.makeHttpRequest(url_daftar_promotion, "GET",params);

      Log.d("All Products: ", json.toString());
      try {
      int success = json.getInt(TAG_SUCCESS);
      if (success == 1) {
           daftar_promotion = json.getJSONArray(TAG_DAFTAR_PROMOTION);
           for (int i = 0; i < daftar_promotion.length();i++){
           JSONObject c = daftar_promotion.getJSONObject(i);
           String PromoID = c.getString(TAG_ID_PROMO);
           String PromoName = c.getString(TAG_NAMA_PROMO);
           String PromoImage = c.getString(TAG_LINK_IMAGE_PROMO);
           String PromoDesc = c.getString(TAG_DESC_PROMO);
           String PromoCate = c.getString(TAG_CATE_PROMO);

           HashMap<String, String> map = new HashMap<String, String>();

           map.put(TAG_ID_PROMO, PromoID);
           map.put(TAG_NAMA_PROMO, PromoName);
           map.put(TAG_LINK_IMAGE_PROMO, PromoImage);
           map.put(TAG_DESC_PROMO, PromoDesc);
           map.put(TAG_CATE_PROMO, PromoCate);

           DaftarPromotion.add(map);
           }

           } else {
           }
           } catch (JSONException e) {
           e.printStackTrace();
           }
           return null;
           }

           protected void onPostExecute(String file_url) {
           pDialog.dismiss();
           runOnUiThread(new Runnable() {
           public void run() {

           SetListViewAdapter(DaftarPromotion);
                }
           });
        }
    }
    } 
```

and this is the main activity which will redirect user to the curve intent

```
package com.javacodegeeks.android.lbs;

import java.text.DecimalFormat;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

import com.javacodegeeks.android.lbs.model.GeoCodeResult;
import com.javacodegeeks.android.lbs.services.GeoCoder;

public class LbsGeocodingActivity extends Activity {

    private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
    private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Milliseconds

    private GeoCoder geoCoder = new GeoCoder();

    double longi = 0.0;
    double lati = 0.0;

    String lon = "";
    String lat = "";

    protected LocationManager locationManager;
    protected Location currentLocation;

    protected Button retrieveLocationButton;
    protected Button reverseGeocodingButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        retrieveLocationButton = (Button) findViewById(R.id.retrieve_location_button);
        reverseGeocodingButton = (Button) findViewById(R.id.reverse_geocoding_button);

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 
                MINIMUM_TIME_BETWEEN_UPDATES, 
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
                new MyLocationListener()
        );

        retrieveLocationButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                getLocation();
            }
        });

        reverseGeocodingButton.setOnClickListener(new OnClickListener() {           
            @Override
            public void onClick(View v) {               
                performReverseGeocodingInBackground();
            }
        });

    }    

    protected void performReverseGeocodingInBackground() {
        getLocation();
        new ReverseGeocodeLookupTask().execute((Void[])null);
    }

    protected void getLocation() {

        currentLocation = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

    //  if (currentLocation != null) {
//          String message = String.format(
//  "ori"               "Current Location \n Longitude: %1$s \n Latitude: %2$s",
//                  currentLocation.getLongitude(), currentLocation.getLatitude()
//          );
//          Toast.makeText(LbsGeocodingActivity.this, message,
//                  Toast.LENGTH_LONG).show();
    //  }

    }   

    private class MyLocationListener implements LocationListener {

        public void onLocationChanged(Location location) {
            String message = String.format(
                    "New Location \n Longitude: %1$s \n Latitude: %2$s",
                    location.getLongitude(), location.getLatitude()
            );
        //  Toast.makeText(LbsGeocodingActivity.this, message, Toast.LENGTH_LONG).show();
        }

        public void onStatusChanged(String s, int i, Bundle b) {
        //  Toast.makeText(LbsGeocodingActivity.this, "Provider status changed",
                    //Toast.LENGTH_LONG).show();
        }

        public void onProviderDisabled(String s) {
        //  Toast.makeText(LbsGeocodingActivity.this,
        //          "Provider disabled by the user. GPS turned off",
            //      Toast.LENGTH_LONG).show();
        }

        public void onProviderEnabled(String s) {
            //Toast.makeText(LbsGeocodingActivity.this,
            //      "Provider enabled by the user. GPS turned on",
            //      Toast.LENGTH_LONG).show();
        }

    }

    public class ReverseGeocodeLookupTask extends AsyncTask <Void, Void, GeoCodeResult> {

        private ProgressDialog progressDialog;

        @Override
        protected void onPreExecute() {
            this.progressDialog = ProgressDialog.show(
                    LbsGeocodingActivity.this,
                    "Please wait", // title
                    "Acquiring Location", // message
                    true // indeterminate
            );
        }

        @Override
        protected GeoCodeResult doInBackground(Void... params) {
            return geoCoder.reverseGeoCode(currentLocation.getLatitude(), currentLocation.getLongitude());
        }

        @Override
        protected void onPostExecute(GeoCodeResult result) {
            this.progressDialog.cancel();
            //Toast.makeText(LbsGeocodingActivity.this, result.toString(), Toast.LENGTH_LONG).show();   

            DecimalFormat format = new DecimalFormat();             
            format.setMaximumFractionDigits(4);

             longi = currentLocation.getLongitude();
             lati = currentLocation.getLatitude();

            String lon = format.format(longi);
            String lat = format.format(lati);

            if((lon.equalsIgnoreCase("101.6121")) && (lat.equalsIgnoreCase("3.1581"))   ){
            //Toast.makeText(LbsGeocodingActivity.this, "The curve", Toast.LENGTH_LONG).show();

                 Intent intent = new Intent(LbsGeocodingActivity.this, Curve.class);
                 intent.putExtra("lon",lon);
                 intent.putExtra("lat",lat);
                 startActivity(intent);

            }
            else if((lon.equalsIgnoreCase("101.5178")) && (lat.equalsIgnoreCase("3.0724"))   ){
                //Toast.makeText(LbsGeocodingActivity.this, "Sacc", Toast.LENGTH_LONG).show();

                 Intent intent = new Intent(LbsGeocodingActivity.this, Sacc.class);
                 intent.putExtra("lon",lon);
                 intent.putExtra("lat",lat);
                 startActivity(intent);

                }
            else if((lon.equalsIgnoreCase("101.6356")) && (lat.equalsIgnoreCase("3.1175"))   ){
                //Toast.makeText(LbsGeocodingActivity.this, "Jaya One", Toast.LENGTH_LONG).show();

                 Intent intent = new Intent(LbsGeocodingActivity.this, Jaya.class);
                 intent.putExtra("lon",lon);
                 intent.putExtra("lat",lat);
                 startActivity(intent);

                }

            }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:33:57.807

如日志：

> org.json.JSONException：PromoID 没有值

表示 jsonObject 不包含任何名称为`PromoID`. 改变你`PromoID`的`id`

```
public static final String TAG_ID_PROMO = "id"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:32:40.040

我的怀疑是

```
list = (ListView) findViewById(R.id.list);
list.setOnItemClickListener(new OnItemClickListener() { 
```

如果无法找到 R.id.list，则会出现问题。它是否存在于您的 layout.xml 中？如果你说那会更容易，哪一行是 Curve.java:59

# c# - C# 字符串拆分 - 索引超出范围

> ID：14343352
> 
> 赞同：6
> 
> 时间：2013-01-15T17:30:00.583
> 
> 标签：c#, string

我的大脑现在很累，无法想出一个简单的解决方案。

```
var res = error.Split('|');
return String.Format("Name: {0} <br /> Email: {1}", res[0] , res[1]); 
```

如果没有 | split 然后它会抛出一个错误，这将是一种快速而优雅的方式来抛出一个默认的“No Name”或传递它。我只关心位置 [0] 和 [1]。

样本数据

```
Tom | huntard@123.com
Tom
Tom | huntard@123.com
Tom | huntard@123.com | texas 
```

我需要一只红牛。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T17:35:43.530

您可以将命名空间中的`ElementAtOrDefault()`扩展方法`System.Linq`与空合并运算符 ( `??`) 结合使用，以获得优雅的解决方案：

```
return String.Format("Name: {0} <br /> Email: {1}", 
    res.ElementAtOrDefault(0) ?? "No name", 
    res.ElementAtOrDefault(1) ?? "No email"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T17:33:14.023

您如何将扩展方法添加到`IList<T>`：

```
public static T IndexOrDefault<T>(this IList<T> list, int index, T defaultValue)
{
    if (index < 0 || index >= list.Count)
    {
        return defaultValue;
    }

    return list[index];
} 
```

然后你可以像这样使用它：

```
var res = error.Split('|');
return String.Format("Name: {0} <br /> Email: {1}", res[0] , res.IndexOrDefault(1, "No E-mail")); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T17:34:08.273

添加对名称是否存在值的检查，以验证第一项，并在数组长度上添加对剩余部分的内联检查。

```
var res = error.Split('|');
return String.Format("Name: {0} <br /> Email: {1}", 
                     !String.IsNullOrEmpty(res[0]) ? res[0] : "No Name", 
                     res.Length > 1 ? res[1] : "No Email"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T17:34:18.123

```
String[] res = error.Split('|');

if (res.Length >= 1)       
    return String.Format("Name: {0} <br /> Email: {1}", res[0] , res[1]);

// Else return a plain message...
return "Error"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T17:33:28.703

检查长度，`res`如果没有则插入默认值`res[1]`

```
return String.Format("Name: {0} <br /> Email: {1}", res[0] , res.Length > 1 ? res[1] : "N/A"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T17:35:43.500

你可以放在顶部：

```
 if(error.Contains("|"))
     {return "No Name";}

var res = error.Split('|');
return String.Format("Name: {0} <br /> Email: {1}", res[0] , res[1]);
If 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-04T09:27:07.690

字符串 d="int afg;";

```
 string[] row = d.Split(';');
        foreach (string c in row)
        {
            string[] col = c.Split(' ');
            dataGridView1.Rows.Add(col[0],col[1]);

       }//this code show string col only one length ** 
```

# dependency-injection - DI 和运行时参数 - 结构图

> ID：14343355
> 
> 赞同：0
> 
> 时间：2013-01-15T17:30:11.283
> 
> 标签：dependency-injection, structuremap

我越来越发现自己混合了运行时参数和隐式构造注入，这对我来说很难闻。

示例 - 我有一个描述过滤器的基类，以及特定过滤器的各种继承类型（标签、类别、日期、作者等）

```
var filter = StructureMap.ObjectFactory
.With("caption").EqualTo("Posts filtered by tag:")
.With("parameters").EqualTo(parameters)
.With("displayInSummary").EqualTo(true)
.GetInstance<TagListFilter>(); 
```

我这样做的原因是因为在构造函数中我有一个接口，我希望 StructureMap 使用它来注入一个具体的类（IArticleConfigurator）：

```
public TagListFilter(string caption, IDictionary<string,string> parameters, bool displayInSummary, IArticleConfigurator configurator)
:base(caption, parameters,displayInSummary, configurator) 
```

但我突然想到，我替换了一个简单的构造函数，尽管用一个具体的类而不是接口，本质上是相同的东西，但使用 DI 注入 1 个具体类型。我这样做是因为目前我们的配置位于 xml 文件中，但将被移动到 CMS，因此使用界面似乎是个好主意。

这似乎是错误的，不符合 DI 的精神。

我应该使用工厂来生成我的各种过滤器吗？如果是这样，我仍然可以利用 DI 来获取我的 IArticleConfigurator 的具体实例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:17:48.217

您不应该将参数从一个依赖项显式传递到另一个依赖项，或者至少应该最小化它们的数量。使用参数解析实例的一大缺点是您将参数名称指定为字符串文字 - 这会使您的代码在构造函数签名的更改中非常脆弱。

我可能想到的一个例子（请注意，我对您的域和实体的职责一无所知）是注入提供者，或者正如您已经说过的，工厂。例如，创建类似的东西`ITagListFilterConfigurationProvider`（您应该根据需要更改名称，我只是想提供动力）。`IFilterConfigurationProvider`如果您有相同的过滤器参数，您可以使用以下三种方法创建非常抽象的提供程序：

```
interface ITagListFilterConfigurationProvider
{
    string Caption { get; }
    IDictionary<string,string> GetParameters();
    bool IsDisplayInSummary { get; }
} 
```

现在您的构造函数将如下所示：

```
public TagListFilter(ITagListFilterConfigurationProvider configurationProvider, IArticleConfigurator configurator) 
```

您所需要的只是像您已经做的那样实现它（因为您正在将具体参数传递给构造函数）并将此行为提取到提供程序。剩下的 - 是使用 StructureMap 注册具体提供程序并解析过滤器而不传递任何具体参数

```
var filter = StructureMap.ObjectFactory.GetInstance<TagListFilter>(); 
```

# linux - Unable to select right click in dotty (Graphviz)

> ID：14343356
> 
> 赞同：2
> 
> 时间：2013-01-15T17:30:19.163
> 
> 标签：linux, graphviz

I am currently running Backtrack 5R3 32-bit version and when I go to right click in dotty or lneato, I get the menu, but I am unable to select anything. When I mouse over them, it doesn't highlight, and when I let go of the mouse, the menu disappears. Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T21:55:22.223

[https://bugs.launchpad.net/ubuntu/+source/graphviz/+bug/160315](https://bugs.launchpad.net/ubuntu/+source/graphviz/+bug/160315)

It looks like there's a bug on Linux involving Numlock. Try turning off Numlock.

# jquery - jQuery custom content scroller: auto scroll on page load

> ID：14343360
> 
> 赞同：0
> 
> 时间：2013-01-15T17:30:41.800
> 
> 标签：jquery, jquery-plugins

I'm using [jQuery custom content scroller](http://manos.malihu.gr/jquery-custom-content-scroller/) plugin and would like the scroll initiated automatically when the page loads.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:55:27.500

我不确定我是否理解，但你可以使用类似的东西：

```
$(document).ready(function() { // or $(window).load(function() {
 $(selector).mCustomScrollbar();
 // And if you meant to change the scroll position:
 $(selector).mCustomScrollbar("scrollTo",Integer);
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:42:26.040

也许你可以用[这个](http://api.jquery.com/scrollTop/#scrollTop2)，不只是这个：

```
$(document).ready(function(){
  $('html, body').scrollTop(25);
}); 
```

?

# python - 使用烧杯将会话数据存储在 Pyramid 的数据库中

> ID：14343362
> 
> 赞同：1
> 
> 时间：2013-01-15T17:30:44.977
> 
> 标签：python, database, sqlalchemy, pyramid, beaker

我正在 Pyramid 中构建一个 Web 应用程序，它需要用户登录。数据库后端是通过 SQLAalchemy 连接的 MySQL 数据库。

Pyramid 有[关于使用烧杯进行会话的介绍](http://docs.pylonsproject.org/projects/pyramid_beaker/en/latest/)，但它只显示如何使用文件配置它。我不知道如何在数据库中存储会话数据（我认为这应该是可能的），因为那时我只有一个地方可以存储我的不同数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T19:02:33.217

我找到了。在你的配置文件（development.ini/production.ini）中加入类似的内容

```
session.type=ext:database
session.secret=someThingReallyReallySecret
session.cookie_expires=true
session.key=WhatEver
session.url=mysql://user:password@host/database
session.timeout=3000
session.lock_dir=%(here)s/var/lock 
```

我不认为是否有可能（或明智）也将锁定锁定到数据库，但会话应该像这样存在于数据库中。您需要注意自己从数据库中删除旧会话（但我认为在使用文件时也是如此）。

# wcf - 有没有办法通过多个服务激活添加 WCF svc-less 激活？

> ID：14343364
> 
> 赞同：0
> 
> 时间：2013-01-15T17:30:48.957
> 
> 标签：wcf, wcf-binding, svc

给定以下配置：

```
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" >
    <serviceActivations>
        <add relativeAddress="./UserService.svc" service="Mercato.KnowledgeKube.WebSvc.Service.KnowledgeuserManagerService" factory="Mercato.KnowledgeKube.WebSvc.WCF.KnowledgeServiceHostFactory" />
        <add relativeAddress="./ProductService.svc" service="Mercato.KnowledgeKube.WebSvc.Service.ProductManagerWebServices" factory="Mercato.KnowledgeKube.WebSvc.WCF.KnowledgeServiceHostFactory" />
   </serviceActivations>
</serviceHostingEnvironment> 
```

两个 ./UserService 中的第一个是可访问的，我可以创建对它的服务引用，但 ProductServce 不可调和。我在这里做错了什么？

**编辑**

这是例外：

```
 There was no endpoint listening at http://localhost/KnowledgeWebService/ProductService.svc that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details.
The remote server returned an error: (404) Not Found.
If the service is defined in the current solution, try building the solution   
and adding the service reference again. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:47:06.823

没有端点监听，因为......我没有用相关属性装饰产品服务。我首先在寻找更复杂的问题。

# android - ImageView setImageURI is causing strictmode error onPause

> ID：14343366
> 
> 赞同：1
> 
> 时间：2013-01-15T17:30:55.757
> 
> 标签：android, imageview, android-strictmode

Every time I finish an application that contains a GridView with an ArrayAdapter in which I return an ImageView from getView() I get an error that says:

> 01-15 17:28:55.715: E/StrictMode(6480): A resource was acquired at attached stack trace but never released. See java.io.Closeable for information on avoiding resource leaks. E/StrictMode(6480): java.lang.Throwable: Explicit termination method 'close' not called

The problem appears to point to several lines with:

`imageView.setImageURI(uri)`

Any ideas?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T17:40:15.413

在某些情况下 setImageURI() 打开 InputStream 但不会关闭它。这是一种解决方法：

```
InputStream is = null;
try { 
  if(uri != null) {
    is = getContentResolver().openInputStream(uri);
    Drawable d = Drawable.createFromStream(is, null);
    imageView.setImageDrawable(d);
  }
} catch(Exception e) {
  Log.e(TAG, "Unable to set ImageView from URI: " + e.toString());
} finally {
  org.apache.commons.io.IOUtils.closeQuietly(is);
} 
```

# ruby-on-rails - Error while saving floats to PostgreSQL from Rails

> ID：14343368
> 
> 赞同：1
> 
> 时间：2013-01-15T17:31:01.857
> 
> 标签：ruby-on-rails, postgresql

I just recently made the switch over to PostgreSQL.. and just wondering about this issue:

```
PG::Error: ERROR:  column "bathrooms" is of type double precision but expression is of type    character varying at character 161
HINT:  You will need to rewrite or cast the expression.
: INSERT INTO "properties" ("address", "bathrooms", "bedrooms", "city", "country", "created_at",     "description", "name", "state", "updated_at", "zip") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id" 
```

Migration looks like this:

```
class CreateProperties < ActiveRecord::Migration
 def change
   create_table :properties do |t|
   t.string :name
   t.string :address
   t.string :city
   t.string :state
   t.string :zip
   t.string :country
   t.float :bedrooms
   t.float :bathrooms
   t.string :country
   t.text :description

   t.timestamps
  end
 end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:21:36.657

我将**浮点数**切换为十进制，现在 PostgreSQL 似乎可以使用隐式转换了？

无论哪种方式错误都消失了，谢谢

# opengl - 使用着色器中的索引确定世界位置的渲染 OpenGL（实例化？）几何体

> ID：14343370
> 
> 赞同：1
> 
> 时间：2013-01-15T17:31:08.570
> 
> 标签：opengl, geometry, instance, shader, vbo

为了让问题和答案更简单，我会将我的问题从 3d 减少到 2d。

我有一个二维网格，在二维空间中有 X*Y 单元格。它由 X、Y、bBoxMin2d 和 bBoxMax2d 简单定义。

在 GPU（目前在 VBO 中）上，我有 X*Y（无符号 8 位）整数，它定义了单元格的亮度。因此，对于 X=Y=3，如果 VBO 包含 {4, 7, 3, 2, 9, 4, 7, 2, 1}，则应使用以下亮度的补丁来渲染网格：

```
4 7 3
2 9 4
7 2 1 
```

我知道我可以创建另一个包含每个单元中心的世界位置的 VBO，并使用几何着色器创建一个要传递给片段着色器的补丁。

但是，我想提高效率并且不需要第二个 VBO。我的想法是，如果几何着色器的每个实例都有自己的线程索引（类似于 CUDA），它可以仅使用该索引创建单元格的补丁，以及来自例如 UBO 的 bBoxMin2d 和 bBoxMax2d。然后片段着色器会从 VBO 读取颜色，我会很高兴。

但似乎没有几何着色器线程索引。那么，我该如何解决我的问题呢？

请不要告诉我在位置上使用另一个 VBO - 这会将内存需求从 sizeof(uint8_t) = 每个单元 1 字节增加到至少 sizeof(float3) + sizeof(uint8_t) = 13 字节。而且我有很多细胞：|

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:54:28.177

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:51:46.067

**几何着色器中的gl_PrimitiveIDIn**或**gl_InvocationID**是否对您有帮助。[*需要 GLSL 4.0 或 ARB_gpu_shader5*]

# windows-8 - 如何在情节提要中设置包含换行符的文本

> ID：14343376
> 
> 赞同：0
> 
> 时间：2013-01-15T17:31:37.473
> 
> 标签：windows-8, winrt-xaml, windows-store-apps

想用换行符替换“\n”

```
<VisualState x:Name="Snapped">
    <Storyboard>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Text" Storyboard.TargetName="textBlock">
            <DiscreteObjectKeyFrame KeyTime="0" Value="Here is my text.\nThis is new line"/>
    </Storyboard>
</VisualState> 
```

输出文本是：没有换行符。**`Here is my text.\nThis is new line`**

**PS：**如果这个值可以用资源文件中的字符串填充就好了..!! 无论哪种方式都会帮助我，但后来一种是好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:33:55.860

确定的事...

```
Value="Here is my text.&#10;This is new line" 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:19:39.697

这有效：

```
<TextBlock FontSize="20">

    <TextBlock.Resources>
        <Storyboard x:Name="MyStory">
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MyLine1"
                    Storyboard.TargetProperty="Text">
                <DiscreteObjectKeyFrame KeyTime="0" Value="New Line 1" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MyLine2" 
                    Storyboard.TargetProperty="Text">
                <DiscreteObjectKeyFrame KeyTime="0" Value="New Line 2" />
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
    </TextBlock.Resources>

    <TextBlock.Inlines>
        <Run x:Name="MyLine1" Text="Original Line 1" />
        <LineBreak />
        <Run x:Name="MyLine2" Text="Original Line 2" />
    </TextBlock.Inlines>

</TextBlock> 
```

您也可以在没有`LineBreak`.

```
<DiscreteObjectKeyFrame KeyTime="0" Value="New Line 1&#x0a;" /> 
```

# functional-programming - 如何在 Ocaml 中编写模式匹配以便于扩展？

> ID：14343379
> 
> 赞同：4
> 
> 时间：2013-01-15T17:31:39.330
> 
> 标签：functional-programming, ocaml

我正在学习[Jason Hickey 的 Objective Caml 简介](http://www.cs.caltech.edu/courses/cs134/cs134b/book.pdf)。

有一个这样的练习：

> 练习 4.3 假设我们有一个基于以下替换密码的密码系统，其中每个明文都根据下表进行加密。
> 
> ```
> Plain     | A B C D
> --------------------
> Encrypted | C A D B 
> ```
> 
> 例如，字符串`BAD`将被加密为`ACB`.
> 
> 编写一个函数`check`，给定一个明文字符串*s* [1]和一个密文字符串*s* [2]，`true`当且仅当*s* [2]是*s* [1]的密文时返回。*如果s* [1]不是纯文本字符串，您的函数应该引发异常。您可能希望参考第 8 页的字符串操作。**随着字母表变大，您的代码如何扩展？**[重点补充]

* * *

基本上，我为这个练习编写了两个带有`might-be-stupid-naive`方法的函数。

**我想先就我的解决方案征求意见。**

**然后我想询问练习中突出显示的缩放解决方案的提示。**

* * *

## 使用 if else

```
let check_cipher_1 s1 s2 = 
    let len1 = String.length s1 in
        let len2 = String.length s2 in              
            if len1 = len2 then
                    let rec check pos =
                        if pos = -1 then
                            true
                        else
                            let sub1 = s1.[pos] in
                                let sub2 = s2.[pos] in
                                    match sub1 with
                                        | 'A' -> (match sub2 with
                                                    |'C' -> check (pos-1)
                                                    | _ -> false)
                                        | 'B' -> (match sub2 with
                                                    |'A' -> check (pos-1)
                                                    | _ -> false)
                                        | 'C' -> (match sub2 with
                                                    |'D' -> check (pos-1)
                                                    | _ -> false)
                                        | 'D' -> (match sub2 with
                                                    |'B' -> check (pos-1)
                                                    | _ -> false)
                                        | _ -> false;
                                            in
                                                check (len1-1)
            else
                false 
```

## 到处使用纯匹配

```
let check_cipher_2 s1 s2 = 
    let len1 = String.length s1 in
        let len2 = String.length s2 in
            match () with
                | () when len1 = len2 -> 
                        let rec check pos =
                            match pos with
                                | -1 -> true
                                | _ -> 
                                    let sub1 = s1.[pos] in
                                        let sub2 = s2.[pos] in
                                            (*http://stackoverflow.com/questions/257605/ocaml-match-expression-inside-another-one*)
                                            match sub1 with
                                                | 'A' -> (match sub2 with
                                                            |'C' -> check (pos-1)
                                                            | _ -> false)
                                                | 'B' -> (match sub2 with
                                                            |'A' -> check (pos-1)
                                                            | _ -> false)
                                                | 'C' -> (match sub2 with
                                                            |'D' -> check (pos-1)
                                                            | _ -> false)
                                                | 'D' -> (match sub2 with
                                                            |'B' -> check (pos-1)
                                                            | _ -> false)
                                                | _ -> false
                                                    in
                                                        check (len1-1)
                | () -> false 
```

行。上述两种解决方案类似。

我制作了这两个，因为在这里[http://www.quora.com/OCaml/What-is-the-syntax-for-nested-IF-statements-in-OCaml](http://www.quora.com/OCaml/What-is-the-syntax-for-nested-IF-statements-in-OCaml)，有人说这`if else`不是首选。

`not-that-simple`这基本上是我一生中第一次编写函数。所以**我真的很想**在这里寻求建议。

例如，

*   我该如何改进这些解决方案？
*   我应该更喜欢`match`吗`if else`？
*   我是在设计`rec`还是`use the rec`正确？
*   如果`in check (len1-1)`正确？

* * *

## 缩放它

练习问`How does your code scale as the alphabet gets larger?`。我现在真的没有头绪。在 Java 中，我会说我会有一个`map`，然后对于 中的每个 char `s1`，我正在寻找`s2`相应的 char 并查看它是否是地图中的值。

**对此有何建议？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T18:02:43.590

这是一个简单的解决方案：

```
让 tr = 函数
  | 'A' -> 'C'
  | 'B' -> 'A'
  | 'C' -> 'D'
  | 'D' -> 'B'
  | _ -> failwith "不是明文"

让检查 ~tr s1 s2 = (String.map tr s1) = s2

检查〜tr“坏”“ACD”

```

您可以通过使用 tr 组合来添加更多字母。IE

```
let comp c1 c2 x = try (c1 x) with _ -> (c2 x)
让 tr2 = comp tr (函数 | 'X' -> 'Y')

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T17:59:43.943

> *   我该如何改进这些解决方案？

您滥用缩进使程序更难阅读。消除不必要的选项卡并移至`check`外部范围以提高可读性：

```
let check_cipher_1 s1 s2 = 
    let rec check pos =
        if pos = -1 then
            true
        else
            let sub1 = s1.[pos] in
            let sub2 = s2.[pos] in
            match sub1 with
            | 'A' -> (match sub2 with
                      |'C' -> check (pos-1)
                      | _ -> false)
            | 'B' -> (match sub2 with
                      |'A' -> check (pos-1)
                      | _ -> false)
            | 'C' -> (match sub2 with
                      |'D' -> check (pos-1)
                      | _ -> false)
            | 'D' -> (match sub2 with
                      |'B' -> check (pos-1)
                      | _ -> false)
            | _ -> false in
    let len1 = String.length s1 in
    let len2 = String.length s2 in              
    if len1 = len2 then
            check (len1-1)
    else false 
```

> *   如果其他，我应该更喜欢匹配吗？

*这取决于情况*。如果您在第二个函数 ( ) 中演示的模式匹配是肤浅的，那么与简单的构造相比，`match () with | () when len1 = len2`它**没有任何价值。**如果您对值进行模式匹配，那么当您使用高级构造时`if/else`，它会比并且可能更短。`if/else`例如，您可以通过匹配元组来缩短函数：

```
let check_cipher_1 s1 s2 =  
    let rec check pos =
        if pos = -1 then
           true
        else
            match s1.[pos], s2.[pos] with
            | 'A', 'C' | 'B', 'A' 
            | 'C', 'D' | 'D', 'B' -> check (pos-1)
            | _ -> false in
    let len1 = String.length s1 in
    let len2 = String.length s2 in 
    len1 = len2 && check (len1 - 1) 
```

在这里，我们还使用 Or 模式对具有相同输出操作的模式进行分组，并将不必要的`if/else`块替换为`&&`。

> *   我是在设计记录还是正确使用记录？
> *   如果检查（len1-1）正确吗？

你的功能看起来不错。没有比在 OCaml 顶层测试一些输入更好的方法了。

> ## 缩放它

模式的数量随着字母的大小线性增长。这是相当不错的国际海事组织。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T18:21:40.070

最简单的解决方案似乎只是加密文本并比较结果：

```
let cipher_char = function
   | 'A' -> 'C'
   | 'B' -> 'A'
   | 'C' -> 'D'
   | 'D' -> 'B'
   | _ -> failwith "cipher_char"
let cipher = String.map cipher_char
let check_cipher s1 s2 = (cipher s1 = s2) 
```

该`cipher_char`函数随字母表的大小线性缩放。为了使它更紧凑和通用，您可以使用某种形式的查找表，例如

```
(* Assume that only letters are needed *)
let cipher_mapping = "CADB"
let cipher_char c =
   try cipher_mapping.[Char.code c - Char.code 'A']
   with Invalid_argument _ -> failwith "cipher_char" 
```

# image-processing - Image addition expression that handles overflow and underflow as well

> ID：14343384
> 
> 赞同：0
> 
> 时间：2013-01-15T17:31:54.117
> 
> 标签：image-processing

Is there a mathematical expression that not only adds the corresponding pixels of an image but also handles the underflow and overflow of such an addition.E.g if we have a 8 bit image then if adding two corresponding pixel values return a sum greater than 255 then that output pixel value is set to 255 and same goes for underflow in which if the sum is less then 0 then the output value is set to 0.I need a single mathematical expression.Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:33:22.787

这个怎么样：

```
min(255, max(0, a+b)) 
```

这是一个单一的数学表达式。

# ruby-on-rails-3 - Rails：将参数传递给渲染 js 函数

> ID：14343387
> 
> 赞同：1
> 
> 时间：2013-01-15T17:31:59.927
> 
> 标签：ruby-on-rails-3

我的控制器中有这个

```
...
..
render :js => "window.location = '/bar/ready'", :locals => { :foo => "foo" } 
..
... 
```

我想要这个`<% foo %>`变量，我想在我的 HTML 页面中访问它。

但我似乎无法访问它，作为`<%= params.inspect %>`回报

```
{"controller"=>"bar", "action"=>"ready"} 
```

那么如何在我的 HTML 页面中传递变量呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T09:59:19.490

我需要类似的东西。晚了，但我终于设法做到了：

```
render :js => "window.location = #{your_path(:foo => 'foo').to_json}" 
```

然后在你的视图中解析 json 数据

# c# - Ninject + MVC3 没有注入控制器

> ID：14343388
> 
> 赞同：14
> 
> 时间：2013-01-15T17:32:00.020
> 
> 标签：c#, asp.net, asp.net-mvc-3, binding, ninject

我使用了 NuGet Ninject MVC3 扩展，但无法根据请求将其注入控制器。它似乎没有绑定，因为 MVC 正在寻找无参数构造函数。这是堆栈跟踪：

```
 [MissingMethodException: No parameterless constructor defined for this object.]
       System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
       System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
       System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
       System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
       System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +67

    [InvalidOperationException: An error occurred when trying to create a controller of type 'MyApp.Presentation.Controllers.SearchController'. Make sure that the controller has a parameterless public constructor.]
       System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +182
       System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType) +80
       System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) +74
       System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) +199
       System.Web.Mvc.<>c__DisplayClass6.<BeginProcessRequest>b__2() +49
       System.Web.Mvc.<>c__DisplayClassb`1.<ProcessInApplicationTrust>b__a() +13
       System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
       System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
       System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Func`1 func) +124
       System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +98
       System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +50
       System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16
       System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8862676
       System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

我试图注入的控制器（目前它需要一个基类）：

```
public class SearchController : MainBaseController
{

    private readonly MyApp.Domain.Tutor.TutorSearch TutorSearch;
    protected static readonly log4net.ILog _log = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

    [Ninject.Inject]
    public SearchController(MyApp.Domain.Tutor.TutorSearch tutorSearch)
    {
        this.TutorSearch = tutorSearch;
    }

    .... (no other constructors)
} 
```

以及我的 NinjectWebCommon.cs 的相关部分：

```
 private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        RegisterServices(kernel);
        return kernel;
    }

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
        INinjectModule[] modules = new INinjectModule[]
        {
            new Domain.DomainModule()
        };

        kernel.Load(Assembly.GetExecutingAssembly());
        kernel.Load(modules);

        kernel.Bind<MyApp.Domain.Tutor.TutorSearch>().ToSelf();

        // ***************
        var t = kernel.Get<MyApp.Presentation.Controllers.SearchController>();
    } 
```

最后，这是 DomainModule：

```
public class DomainModule : NinjectModule
{
    public override void Load()
    {
        Bind<Data.Profile.IProfileProvider>().To<Data.Profile.XmlProfileProvider>();
        Bind<Data.Subject.ISubjectProvider>().To<Data.Subject.XmlSubjectProvider>();
    }
} 
```

正如您在我的 NinjectWebCommon.cs 中标有星号的行中看到的那样，我已尝试将控制器显式构建为测试。使用正确注入的 Xml..Providers 可以正常工作。

有什么我错过的吗？我对 NuGet MVC3 扩展的幕后发生的事情知之甚少，因此不知道控制器绑定在哪一点失败。

非常感谢任何有关查看内容的指示，谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-16T08:49:04.277

所以经过一段时间的拼命修补，我终于找到了我的问题。我引用了 MVC4 (System.Web.Mvc) DLL，并没有将旧 3.0.0.0 版本的绑定重定向到 4.0.0.0：

```
 <dependentAssembly>
    <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0" newVersion="4.0.0.0" />
    <bindingRedirect oldVersion="2.0.0.0" newVersion="4.0.0.0" />
    <!-- The following line was missing -->
    <bindingRedirect oldVersion="3.0.0.0" newVersion="4.0.0.0" /> 
  </dependentAssembly> 
```

至少，我希望这是一个不错的解决方案。

编辑：如下所示，以下行更简洁：

```
 <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" /> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-07T18:22:42.790

使用 Visual Studio 和 Nuget，您需要运行此命令

安装包 Ninject.MVC3

（根据您运行的 MVC 版本替换 3）

这将解决您的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T18:15:49.340

Traw，您使用具体实现而不是接口是否有特殊原因。？就目前而言，您从直接 DI 类中获得零收益（我很惊讶您可以得到任何工作）我会重构并将所有内容放在接口后面，然后将接口绑定到具体实现.

以下是它的外观的快速截图：

```
// 'imagined' ISearchType interface
public interface ISearchType
{
    int Id { get; set; }
    string LastName { get; set; }
}

// 'imagined' TutorSearch concrete class
public class TutorSearch : ISearchType
{
    public int Id { get; set; }
    public string LastName { get; set; }
}

// your revised controller code
private readonly ISearchType _tutorSearch;
public SearchController(ISearchType searchType)
{
    _tutorSearch = searchType;
} 
```

然后，在您注册服务（ninject）时，您将添加：

```
kernel.Bind<ISearchType>().To<TutorSearch>(); 
```

这应该让你更进一步。此外，`var t = kernel.Get<...>`实际上什么都不做——以防万一你想知道“它”发生了什么。

玩得开心...

# php - 使用 JSON XML 还是数据库无法决定哪一个

> ID：14343391
> 
> 赞同：0
> 
> 时间：2013-01-15T17:32:05.500
> 
> 标签：php, javascript, jquery, database, json

我正在开发一个发送 id 的应用程序，作为回报，php 向客户端发送一个 json 节点。我的问题是我应该将数据保存为静态 php 数组，如底部代码所示，还是将数据保存到外部 xml/json 文件中，还是应该使用数据库？数组中可能有多达 10,000 个项目。请建议。

```
<?php
    // Fill up array with names
    $a = array(
                array("id"=>1001, "name"=>"One", "address"=>"", "city"=>"", "state"=>""),
            array("id"=>1002, "name"=>"Two", "address"=>"", "city"=>"", "state"=>""),
            array("id"=>1003, "name"=>"Three", "address"=>"", "city"=>"", "state"=>""),
            array("id"=>1004, "name"=>"Four", "address"=>"", "city"=>"", "state"=>""),
            array("id"=>1005, "name"=>"Five", "address"=>"", "city"=>"", "state"=>""),
            array("id"=>1006, "name"=>"Six", "address"=>"", "city"=>"", "state"=>"")
            );

    //get the q parameter from URL
    $q=$_GET["q"];
    //lookup all hints from array if length of q>0
    if (strlen($q) > 0)
    {
        $hint="";
        $att = "id";
        for($i=0; $i<count($a); $i++)
        {    
           if($q==$a[$i][$att])
           {
              echo json_encode($a[$i]);
           }       
        }
    }
    echo "";
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:51:17.550

如果您要拥有那么多记录，则绝对应该使用数据库。我建议查看 SQLite，它是一个非常简单且紧凑的数据库。不确定您是否指的是智能手机应用程序，但如果您这样做了，那么 SQLite 可以在 iOS 和 Android 上使用。它与从智能手机到网络服务器再到台式机的所有东西兼容 - 这是一个很好的数据库。也有很多很好的文档。它由 Mozilla、Adobe 和 Oracle 赞助。[http://www.sqlite.org/](http://www.sqlite.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:40:27.127

我绝对推荐使用数据库。也许一开始您认为通过文件访问 JSON 元素更容易，但如果您有数百条记录，则可能难以处理，尤其是在搜索数据时。如果您觉得使用 JSON 很舒服，也许您可​​以尝试[使用 MongoDB](http://www.mongodb.org/)来处理类似于 JSON-DB 环境的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T19:30:38.057

数据库可能是性能可接受的最简单的解决方案。

如果您希望每秒处理超过 10000 个请求，传统数据库可能太慢，将数据保存在内存中的过程会更快。PHP 在这方面出了名的糟糕，事实上它对大多数事情都不好，但运行一个普通的网站。无状态特性可以使调试更容易，但如果您的应用程序主要处理本质上是有状态的事物，那么处理起来就很痛苦。问问自己 PHP 是否适合这项工作，例如 Node.js 将使将列表存储在内存中成为一种直观且简单的解决方案。

通常，无论您选择哪种存储解决方案，将数据存储为您打算提供的 JSON 字符串格式似乎是最自然的，除非它所基于的数据经常更改。

您当前的代码有两个主要缺陷：

*   当 PHP 进程启动时，它会为每个请求加载整个列表，因为列表是在代码中的。这在大多数其他语言中都不是什么大问题，因为您通常不会经常启动新进程。（无论如何，您通常都不应该在代码中放入大量数据，但那是因为它往往会变得难以维护。）
*   您遍历整个列表以查找请求的项目，使用`id`作为键，您几乎可以立即获取正确的记录，如下所示：

.

```
$a = array(
    "1001"=>array("id"=>1001, "name"=>"One", "address"=>"", "city"=>"", "state"=>"")
)

//Get the requested record
$a[$q]; 
```

# java - 使用 Java 中的 GroovyClassLoader - 没有 GC 的类

> ID：14343393
> 
> 赞同：2
> 
> 时间：2013-01-15T17:32:13.353
> 
> 标签：java, memory-leaks, groovy, classloader

我在 java 中创建了一个自定义类，用于自定义加载 Groovy 类。

我的 Java 类开始是这样的：

```
public class ClassLoader {
    private GroovyClassLoader groovyClassLoader = new GroovyClassLoader(); 
```

然后我有一个使用`groovyClassLoader`名称加载类的方法：

```
Class c = groovyClassLoader.loadClass(className, true, false, true); 
```

这一切正常，没有问题。但是，我偶尔想动态地重新加载我的所有 Groovy 类，所以目前我的 java 代码基本上只是重新实例化我的`ClassLoader`实例。这不会留下对该`ClassLoader`实例的剩余引用，这就是您所期望的 GC。

但是，如果我在重新加载几次后检查加载的类（使用 VisualVM 和 MAT），我会看到 Java 类`ClassLoader`只加载了一次，只有一个实例，但是有几个实例`GroovyClassLoader$InnerLoader`（在这种情况下，类加载了一次，但有几个实例）和为`GroovyClassLoader`（如`GroovyClassLoader$1`，`GroovyClassLoader$2`等）加载的几个类

任何想法为什么尽管`ClassLoader`收集了 Java，但`GroovyClassLoader`它的 InnerLoader 没有被收集？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:06:20.210

也许仍然有一些可访问的对象是`c`您按名称加载的类之一的实例？每个类都持有对其定义类加载器的引用，因此类加载器不能被 GCd，直到它加载的所有类的所有实例本身都变得不可访问。

如果这还不够，那么问题可能出在 Groovy MetaClass 机制上。`MetaClassRegistry`您可能需要在完成`com.example.ClassLoader`实例后明确删除您的类：

```
public void destroy() {
  for(Class<?> c : groovyClassLoader.getLoadedClasses()) {
    GroovySystem.getMetaClassRegistry().removeMetaClass(c);
  }
} 
```

我原以为 Groovy 会为您执行此操作，但您可能需要比默认情况下更主动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-25T01:56:31.743

根据我最近在 Play 框架中使用 Groovy 模板引擎的经验，当应用程序代码无法访问其编译的类时，Groovy 不会清理元类注册表。

[https://hoangx281283.wordpress.com/2014/07/24/unload-groovy-classes/](https://hoangx281283.wordpress.com/2014/07/24/unload-groovy-classes/)

# android - 无法在android中的sqlite中将数据保存在数据库中

> ID：14343394
> 
> 赞同：0
> 
> 时间：2013-01-15T17:32:25.380
> 
> 标签：android, android-sqlite

嗨，我想知道如何将数据保存在 sqlite 数据库中，以及如何比较该数据库中的数据以达到目的，假设我有一个注册页面，注册后我有一个登录页面，并且我想登录该登录页面转到下一个活动，我在 ListView 中有那个人的数据并登录应该只通过数据库完成，请帮帮我

适配器类

```
public class DBAdapter 
{
public static final String KEY_ROWID = "_id";
public static final String KEY_NAME = "name";
public static final String KEY_EMAIL = "email";
public static final String KEY_PHONE = "phone";
private static final String TAG = "DBAdapter";
private static final String DATABASE_NAME = "MyDB";
private static final String DATABASE_TABLE = "contacts";
private static final int DATABASE_VERSION = 4;

private static final String DATABASE_CREATE =
"create table contacts (_id integer primary key autoincrement, "
+ "name text not null, email text not null, phone int not null);";
private final Context context;
private DatabaseHelper DBHelper;
private SQLiteDatabase db;

public DBAdapter(Context ctx)
{
this.context = ctx;
DBHelper = new DatabaseHelper(context);
}

private static class DatabaseHelper extends SQLiteOpenHelper
{
    DatabaseHelper(Context context)
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);//SQLiteOpenHelper (Context context, String name, SQLiteDatabase.CursorFactory factory, int version)
    } // SQLiteDatabase.CursorFactory is null by default

    @Override
    public void onCreate(SQLiteDatabase db)
    {
        try 
        {
            db.execSQL(DATABASE_CREATE);
        } 
        catch (SQLException e) 
        {
            e.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
    Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
    + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS contacts");
    onCreate(db);
    }
}

//---opens the database---
public DBAdapter open() throws SQLException
{
    db = DBHelper.getWritableDatabase();
    return this;
}

//---closes the database---
public void close()
{
    DBHelper.close();
}

//---insert a contact into the database---
public long insertContact(String name, String email, String phone)
{
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_NAME, name);
    initialValues.put(KEY_EMAIL, email);
    initialValues.put(KEY_PHONE, phone);
    return db.insert(DATABASE_TABLE, null, initialValues); // 2nd parameter -  null indicates all column values. 
}

//---deletes a particular contact---
public boolean deleteContact(long rowId)
{
return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0; // relational operator returns true / false
}

//---retrieves all the contacts---
public Cursor getAllContacts()
{
    return db.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_NAME,KEY_EMAIL,KEY_PHONE}, null, null, null, null, null);
}

//---retrieves a particular contact---
public Cursor getContact(long rowId) throws SQLException
{
Cursor mCursor =
db.query(true, DATABASE_TABLE, new String[] {KEY_ROWID,
KEY_NAME, KEY_EMAIL,KEY_PHONE}, KEY_ROWID + "=" + rowId, null,
null, null, null, null);
if (mCursor != null) {
mCursor.moveToFirst();
}
return mCursor;
}

//---updates a contact---
public boolean updateContact(long rowId, String name, String email, String phone)
{
    ContentValues args = new ContentValues();
    args.put(KEY_NAME, name);
    args.put(KEY_EMAIL, email);
    args.put(KEY_PHONE, phone);
    return db.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
}
} 
```

主要活动课

```
public class MainActivity extends Activity 
{
Button submit;
EditText name,email,number;
private long id;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    submit = (Button)findViewById(R.id.button1);
    name = (EditText)findViewById(R.id.editText1);
    email = (EditText)findViewById(R.id.editText2);
    number = (EditText)findViewById(R.id.editText3);

   // final String name1 = name.getText().toString();
   // final String email1 = email.getText().toString();
   // final String number1 = number.getText().toString();

   final  DBAdapter db = new DBAdapter(this);
    submit.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) 
        {
            // TODO Auto-generated method stub
            String name1 = name.getText().toString();
            String email1 = email.getText().toString();
            String number1 = number.getText().toString();
            db.open();
            id = db.insertContact(name1,email1,number1); 

            //id = db.insertContact("Suven Consultants", "courses.suvenconsultants.com","+919892544177");
            db.close();

            db.open();
            Cursor c = db.getContact(id);
            if (c.moveToFirst())
            DisplayContact(c);
            else
            //Toast.makeText(this, "No contact found", Toast.LENGTH_LONG).show();
            db.close();

        }
    }); 

}

public void DisplayContact(Cursor c)
{
Toast.makeText(this, "id: " + c.getString(0) + "\n" +
        "Name: " + c.getString(1) + "\n" +
        "Email: " + c.getString(2)+ "\n" +
    "Phone: " + c.getString(3),
                Toast.LENGTH_LONG).show();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:55:44.707

问题是您试图将字符串电话号码插入数据库的 int-Field 中，这是**不可能的**。

改变这个：

> private static final String DATABASE_CREATE = "创建表联系人（_id 整数主键自增，" + "姓名文本不为空，电子邮件文本不为空，电话号码不为空）；";

进入这个：

> private static final String DATABASE_CREATE = "创建表联系人（_id 整数主键自增，" + "姓名文本不为空，电子邮件文本不为空，电话文本不为空）；";

那么它应该可以工作 不要将 int 用于数据库中的电话号码 int 仅限于一些可能导致错误的限制（例如，一个高到无法成为 int 值的数字），它更容易转换稍后在应用程序中来自数据库的字符串

此外，完成更改后不要忘记**删除模拟器/设备上的旧数据库**，否则不会执行新的创建语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T05:53:15.740

为什么要使用`int`数据类型来存储电话号码？整数数据类型有最小和最大限制。由于电话号码超过 6 位，可能会引发`Overflow Exception` 您必须使用`string`数据类型将电话号码存储在数据库中。试试看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T18:03:14.583

听起来您应该使用可以检查用户是否已注册然后验证信息的网络服务器来执行此操作。如果您只是让用户创建一个帐户并将该数据存储到手机以进行比较，只需使用`SharedPreferences`. 它比 SQLite 容易得多，您可以存储字符串键值对并轻松读取它以进行比较。

# javascript - 对象文字连接字符串属性

> ID：14343399
> 
> 赞同：1
> 
> 时间：2013-01-15T17:32:50.963
> 
> 标签：javascript

我正在使用 Javascript Object literals ，但我无法连接字符串属性。

```
var cart  = {
baseURL   : "http://www.domain.com/",
addURL    : this.baseURL + "cart/add",
deleteURL : this.baseURL + "cart/delete",
totalURL  : this.baseURL + "cart/total",
// functions
}// cart 
```

我得到一个链接`http://www.domain.com/undefinedcart/add`

请任何帮助，在此先感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T17:35:49.117

您无法以`baseURL`这种方式访问​​。那是因为`this`is 实际上`window`并且它可能没有属性`baseURL`。

您可以改用立即调用函数表达式 ( [IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/) ) 和闭包：

```
var cart = function () {
   var baseURL = "http://www.domain.com/";
   return {
      addURL    : baseURL + "cart/add",
      deleteURL : baseURL + "cart/delete",
      totalURL  : baseURL + "cart/total"
   };
}(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:39:03.030

问题不在于对象上下文中的串联，而是您要查找的**this**尚不存在。一个简单的解决方案可能如下*所示*：

```
var baseURL = "http://www.domain.com/";
var cart  = {
baseURL   : baseURL,
addURL    : baseURL + "cart/add",
deleteURL : baseURL + "cart/delete",
totalURL  : baseURL + "cart/total",
} 
```

或这个：

```
var cart = new function() {
  this.baseURL = "http://www.domain.com/";
  this.addURL = this.baseURL + "cart/add";
  this.deleteURL = this.baseURL + "cart/delete";
  this.totalURL = this.baseURL + "cart/total";
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T17:39:24.747

变量“this”是Window的一个实例，所以不能将“this”用作“cart”

# rubymine - RubyMine - 克隆存储库后工具下没有运行轨道生成器选项

> ID：14343403
> 
> 赞同：1
> 
> 时间：2013-01-15T17:33:03.743
> 
> 标签：rubymine

每当我通过克隆存储库从现有文件创建项目时，选项 run rails script 和 run rails generators 不会出现在工具下。

就像 RubyMine 没有将项目识别为 rails 应用程序。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:19:24.597

意外地，该`.idea`文件夹被推送到 Git，然后被拉取。

`.idea`从项目的根目录中删除并重新启动 RubyMine 解决了该问题。

# rest - 在 Sencha Touch 2 中使用服务器从服务器加载存储数据

> ID：14343414
> 
> 赞同：0
> 
> 时间：2013-01-15T17:33:35.703
> 
> 标签：rest, proxy, load, sencha-touch-2, store

我在论坛上搜索并阅读了其他一些帖子。但是，我不确定该怎么做。我有一个带有代理的商店，我试图从服务器加载数据。我已经尝试了 jsonp 和 rest 的代理类型，但没有运气。在这两种情况下，我都会收到 403 禁止错误。后跟 XMLHTTPRequest 无法加载错误。

这是我在 Chrome 控制台中看到的错误：

![在此处输入图像描述](../Images/7c502704afc4d179b6c1a94df9e12f31.png)

这是我的代码：

```
Ext.define('EventsTest.store.Venues', {
    extend: 'Ext.data.Store',

    requires: [
        'Ext.data.proxy.Rest',
    ],

    config: {
        storeId: 'venuesStore',
        model: 'EventsTest.model.Venue',
        proxy: {
            type: 'rest',
            url: 'http://leo.web/pages/api/',
            headers: {
                'x-api-key': 'senchaleotestkey'
            },
            limitParam: false,
            pageParam: false,
            enablePagingParams: false
            /*
            extraParams: {
                latitude: 45.250157,
                longitude: -75.800257,
                radius: 5000
            }
            */
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:35:57.580

您正在本地域“sencha.test”上运行您的应用程序，但您正在尝试访问“leo.web”上的数据 - 错误是您正在尝试跨域加载数据，这是不允许的通过 AJAX。

你说 JSONP 不起作用……为什么不呢？您的服务器是否返回有效的 JSONP？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:55:28.870

浏览器和桌面的安全策略是不同的，所以即使在浏览器中失败，它也可以在手机中工作。但现在的问题是如何在开发应用程序时进行管理，请看一下这个类似的问题：

[开发过程中如何使用json代理访问远程服务](https://stackoverflow.com/questions/14118053/how-to-use-json-proxy-to-access-remote-services-during-development/14118164#14118164)

关于获得 403 响应的 OPTION 请求，请尝试设置`withCredentials : false`和`useDefaultHeader : false`. 详情在这里

[http://docs.sencha.com/touch/2-1/#!/api/Ext.data.Operation-cfg-withCredentials](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.Operation-cfg-withCredentials) [http://docs.sencha.com/touch/2-1/#!/api /Ext.data.Connection-cfg-useDefaultHeader](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.Connection-cfg-useDefaultHeader)

`CORS`如果您想使用远程服务，我建议您阅读更多信息，您可以选择`CORS`在您的服务器上启用。

# scala - Scala 2.10 中的 Scala Actors 无法被识别

> ID：14343415
> 
> 赞同：2
> 
> 时间：2013-01-15T17:33:36.937
> 
> 标签：scala, scala-2.10, scala-ide

我最近更新到 Eclipse Juno，它也将我的 Scala 更新到了 2.10。我知道 Actor 现在已被弃用，但我仍然想使用它们。scala-actors.jar 和 scala-actors-migration.jar 是我的 Eclipse 构建路径的一部分，但是，对于导入，我得到“对象演员不是包 scala 的成员”。任何将 scala 库重新添加到项目的尝试都失败了，也没有修复它。

带有 Eclipse Juno 和 Scala 2.10 的 Mac OS X Lion。

一些代码（标记错误XXX）：

```
import scala.actors.Actor    XXX actors not found in scala
import scala.actors.Actor._  XXX actors not found in scala

  class Solver() extends Actor {   XXX Actor not found

    def act() {
      // Read file
      val source = io.Source.fromFile("src/labyrinth.txt", "utf-8")
      val lines = source.getLines.toList
      source.close()

      // Fill multidimensional array
      var labyrinth = Array.ofDim[Cell](lines.length, lines.apply(0).length)
      for (i <- 0 until lines.length) { // each line
        for (j <- 0 until lines.apply(0).length) { // each column
          labyrinth(i)(j) = new Cell(lines.apply(i).toList.apply(j)) // Fill array cell with character
        }
      }

      // Search for start
      for (k <- 0 until labyrinth(0).length) {
        if (labyrinth(0)(k).character.toString() == "?") {
          val start = new CheckCell(labyrinth, Array((1, k)), this).start // Kick off search
          while (true) {
            receive { XXX receive not found
              case FoundSolution =>  XXX FoundSolution not found
                Console.println("Pong: stop")
                start ! Stop  XXX Stop not found
                exit()
            }
          }
        }
      }

    }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:52:34.953

您的示例对我来说很好（除了缺少的类型，例如`Cell`和`CheckCell`）。我相信您可能有以下情况之一：

*   `package scala.blah`您的源文件之一中的声明
*   包含`scala`作为子目录的源文件夹。检查项目属性，构建路径并查找源文件夹。如果你使用 maven 约定，`src/main/scala`应该是一个源目录（不仅仅是**or**`src/`）`src/main/`。

以上两点都可以隐藏标准`scala`包并将其替换为您的声明（或目录），这显然没有`Actor`类型。

# python - Python 将对象添加到集合中

> ID：14343418
> 
> 赞同：-3
> 
> 时间：2013-01-15T17:33:42.083
> 
> 标签：python

我是 python 新手，这部分有问题。我有一个名为 Pet 的类和一个名为 Dogs 的类。我需要 Pets 来声明一个集合来保存要添加到列表、元组或字典中的各种狗，或者更容易。例如

```
pitbull=Dog()
shepard=Dog()
guard_dog=Dog()

animal=Pet() 
```

我不知道python是否允许将对象存储在list中。在java中我可以简单地将它们存储在arrayList中。喜欢`pet=arrayList<Dog>()`。我四处搜索，不知道如何将 Dog 对象添加到 python 中的列表、元组或字典中。请帮助任何人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:40:03.070

正如Martijn Pieters所说，你应该看看python教程

例如使用列表

```
pitbull=Dog()
shepard=Dog()
guard_dog=Dog()

animal=Pet()

animals = [pitbull,shepard,guard_dog]
animals.append(animal)

#do what ever you want with the list 
```

# image-processing - 检索从扭曲图像中获取的像素的原始坐标

> ID：14343420
> 
> 赞同：3
> 
> 时间：2013-01-15T17:33:51.953
> 
> 标签：image-processing, opencv, distortion, 3d-reconstruction, perspectivecamera

我从*sourceImage*中提取了四个角：

```
src_vertices[0] = corners[upperLeft];
src_vertices[1] = corners[upperRight];   
src_vertices[2] = corners[downLeft];
src_vertices[3] = corners[downRight]; 
```

这四个角像这样扭曲到*destinationImage*：

```
dst_vertices[0] = Point(0,0);
dst_vertices[1] = Point(width, 0); 
dst_vertices[2] = Point(0, height);
dst_vertices[3] = Point(width, height);

Mat warpPerspectiveMatrix = getPerspectiveTransform(src_vertices, dst_vertices);
cv::Size size_d =  Size(width, height);
cv::Mat DestinationImage(width,height,CV_8UC3);
warpPerspective(sourceImage, destinationImage, warpPerspectiveMatrix, size_d, INTER_LINEAR, BORDER_CONSTANT); 
```

现在我的问题是：

我有一个取自*destinationImage*的点p(x,y)如何在原始sourceImage 中检索该点的坐标

换句话说，我想使用 warpPerspectiveMatrix 来做 getPerspectiveTransform 的相反工作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T20:20:45.143

你想要逆透视变换。如果您的原始变换是 S->S'，则需要变换矩阵 S'->S

```
Mat InversewarpPerspectiveMatrix = getPerspectiveTransform(dst_vertices, src_vertices); 
```

然后你制作一个稀疏矩阵

```
Mat PerspectiveCoordinates containing the vector x,y. 
```

最后你想打电话

```
PerspectiveTransform(PerspectiveCoordinates,OriginalCoordinates,InversewarpPerspectiveMatrix) 
```

# android - Android 上的 Scala：无法解析 MainActivity；接口 540 'Lscala/ScalaObject;'

> ID：14343423
> 
> 赞同：0
> 
> 时间：2013-01-15T17:34:00.690
> 
> 标签：android, eclipse, scala

我使用本教程让 Eclipse、Scala 和 Android 启动并运行： [http ://scala-ide.org/docs/tutorials/androiddevelopment/index.html](http://scala-ide.org/docs/tutorials/androiddevelopment/index.html)

我还拿了这个网页的示例源代码（删除 MainActivity.java - 创建 MainActivity.scala）。

运行应用程序，我收到错误消息：

```
01-15 18:14:06.740: I/dalvikvm(27536): Failed resolving Lcom/test/helloworldscala/MainActivity; interface 540 'Lscala/ScalaObject;'
01-15 18:14:06.740: W/dalvikvm(27536): Link of class 'Lcom/test/helloworldscala/MainActivity;' failed
01-15 18:14:06.740: D/AndroidRuntime(27536): Shutting down VM
01-15 18:14:06.740: W/dalvikvm(27536): threadid=1: thread exiting with uncaught exception (group=0x415fd2a0)
01-15 18:14:06.740: E/AndroidRuntime(27536): FATAL EXCEPTION: main
01-15 18:14:06.740: E/AndroidRuntime(27536): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.test.helloworldscala/com.test.helloworldscala.MainActivity}: java.lang.ClassNotFoundException: com.test.helloworldscala.MainActivity
01-15 18:14:06.740: E/AndroidRuntime(27536):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2024)
01-15 18:14:06.740: E/AndroidRuntime(27536):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
01-15 18:14:06.740: E/AndroidRuntime(27536):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
01-15 18:14:06.740: E/AndroidRuntime(27536):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
01-15 18:14:06.740: E/AndroidRuntime(27536):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-15 18:14:06.740: E/AndroidRuntime(27536):    at android.os.Looper.loop(Looper.java:137)
01-15 18:14:06.740: E/AndroidRuntime(27536):    at android.app.ActivityThread.main(ActivityThread.java:4898)
01-15 18:14:06.740: E/AndroidRuntime(27536):    at java.lang.reflect.Method.invokeNative(Native Method)
01-15 18:14:06.740: E/AndroidRuntime(27536):    at java.lang.reflect.Method.invoke(Method.java:511)
01-15 18:14:06.740: E/AndroidRuntime(27536):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
01-15 18:14:06.740: E/AndroidRuntime(27536):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
01-15 18:14:06.740: E/AndroidRuntime(27536):    at dalvik.system.NativeStart.main(Native Method)
01-15 18:14:06.740: E/AndroidRuntime(27536): Caused by: java.lang.ClassNotFoundException: com.test.helloworldscala.MainActivity
01-15 18:14:06.740: E/AndroidRuntime(27536):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
01-15 18:14:06.740: E/AndroidRuntime(27536):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
01-15 18:14:06.740: E/AndroidRuntime(27536):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-15 18:14:06.740: E/AndroidRuntime(27536):    at android.app.Instrumentation.newActivity(Instrumentation.java:1057)
01-15 18:14:06.740: E/AndroidRuntime(27536):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2015)
01-15 18:14:06.740: E/AndroidRuntime(27536):    ... 11 more 
```

有谁知道这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:36:25.853

我必须在 Scala 2.10 中使用每晚构建的 Scala-IDE，然后它才能完美运行。

# groovy - Vert.x - 事件总线在 IE 中关闭

> ID：14343424
> 
> 赞同：1
> 
> 时间：2013-01-15T17:34:03.113
> 
> 标签：groovy, vert.x

在 Groovy 中运行 Vert.x 服务器（Vert.x 1.3.0）并部署我们的模块和 web 模块，在端口 9099 上运行（我运行的其他任何东西都没有使用）。在 Firefox 和 Chrome 中，事件总线似乎永远保持打开状态，但在 IE 中，事件总线在几秒钟后关闭，我得到了这个：

```
java.io.IOException: An existing connection was forcibly closed by the remote host
at sun.nio.ch.SocketDispatcher.read0(Native Method)
at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:225)
at sun.nio.ch.IOUtil.read(IOUtil.java:193)
at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:359)
at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:59)
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:471)
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:332)
at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

此 vert.x 服务器的其他用户没有遇到此问题。有没有其他人看过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:14:38.900

这是 1.3.1 中修复的错误。

我建议您使用 google 组来提问，因为我不经常扫描 stackoverflow。

# c++ - 作为回调传递一个静态方法的地址，其签名来自元组解包

> ID：14343428
> 
> 赞同：2
> 
> 时间：2013-01-15T17:34:08.837
> 
> 标签：c++, c++11, callback, variadic-templates, stdtuple

我需要将 Lambda 作为回调传递（特别是对于 WinAPI）。思路如下：

1.  将 lambda 存储在一个单例类中（每个 Lambda，也有两个相同的，具有不同的类型），所以它应该是安全的

    `LambdaSingleton<Lambda_Type>::instance = l;`

2.  将调用 lambda 实例的静态方法的地址作为回调传递。

    ```
    template <
        typename Lambda,
        typename Callback_Signature_R,
        typename... Callback_Signature_Args>
    struct LambdaCallbackSupport{

        /**
        *   Callback method
        *
        *   @param  args
        *               The parameters to feed to the lambda
        *   @return 
        *               The return value of the execution of the lambda
        */
        static Callback_Signature_R __stdcall callback(Callback_Signature_Args... args){
            return LambdaSingleton<Lambda>::instance(args);
        }
    }; 
    ```

我已经有一个工作类，用于在编译时提取有关函数的信息：

```
template<
    typename C,
    typename R,
    typename... Args>
struct Traits<R(__stdcall *)(Args...) const>{
      //various typedefs for R, tuple of args, arity etc..
}; 
```

所以我会得到这样的东西：

```
//Example lambda
int toBeCaptured = 8;
auto lambda =
    [&](std::string& str) -> size_t{
        return toBeCaptured + str.length();
    };

typedef decltype(lambda) Lambda;

//Expected callback signature
typedef size_t(__stdcall *CallbackSignature)(std::string&);

//Configure a callback support and pass its method
typedef Traits<CallbackSignature> callbackTraits;

typedef LambdaCallbackSupport<
    Lambda,
    callbackTraits::Result_Type,
    callbackTraits::Args_Tuple_Pack> CallbackSupportType;
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^  //How to unpack the tuple without actually have the arguments??

//Store the lambda instance statically
Singleton<Lambda>::instance = lambda;

//Pass the callback
void* pFunc = &CallbackSupportType::callback;

//Simulate invocation of callback
std::string str("may work?");
size_t ret = (*pFunc)(str); 
```

由于我只需要让编译器生成一个回调类专业化（而不是实际调用它的方法）**，我如何应用本网站其他问题中提出的迭代解包技术？**

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T18:43:43.670

作为对您的问题（如何进行元组解包）的一般回答，参数包只能在*模板参数类型推导*的上下文中*隐式*生成，因此如果您想将类型“解包”为一系列类型，则必须实例化该元组并将该实例作为输入提供给某个函数模板：*`tuple<T1, ..., Tn>``T1, ..., Tn`*

 *```
template<typename... Ts>
void unpack(tuple<Ts...> const&) // Now you have an argument pack... 
```

但是，考虑到您想要实现的目标（从 lambda 获取 WinAPI 回调），我不会依赖元组，而是使用免费的函数模板。这可以在不引入许多级别的间接和包装器的情况下完成。这是一个可能的简单解决方案：

```
#include <type_traits>
#include <memory>

template<typename F>
struct singleton
{
    static void set_instance(F f) { instance.reset(new F(f)); }
    static std::unique_ptr<F> instance;
};

template<typename F>
std::unique_ptr<F> singleton<F>::instance;

template<typename F, typename... Ts>
typename std::result_of<F(Ts...)>::type __stdcall lambda_caller(Ts... args)
{
    if (singleton<F>::instance == nullptr)
    {
        // throw some exception...
    }
    else
    {
        return (*(singleton<F>::instance))(args...);
    }
} 
```

这是框架。这就是你将如何使用它：

```
#include <iostream>

int main()
{
    //Example lambda
    int toBeCaptured = 8;
    auto lambda =
        [&](std::string& str) -> size_t{
            return toBeCaptured + str.length();
        };

    singleton<decltype(lambda)>::set_instance(lambda);
    size_t (__stdcall *pfn)(std::string&) = &lambda_caller<decltype(lambda)>;

    std::string str = "hello";
    int out = pfn(str);
    std::cout << out;

    return 0;
} 
```

如果您不介意宏并且想进一步简化某些使用模式（如上面的模式），您可以添加这样的宏：

```
#define get_api_callback(lambda) \
    &lambda_caller<decltype(lambda)>; singleton<decltype(lambda)>::set_instance(lambda); 
```

这会将您的`main()`功能更改为以下内容：

```
#include <iostream>

int main()
{
    //Example lambda
    int toBeCaptured = 8;
    auto lambda =
        [&](std::string& str) -> size_t{
            return toBeCaptured + str.length();
        };

    // As simple as that...
    size_t (__stdcall *pfn)(std::string&) = get_api_callback(lambda);

    std::string str = "hello";
    int out = pfn(str);
    std::cout << out;

    return 0;
} 
```*

# windows - Qt 中的样式表是如何工作的？

> ID：14343433
> 
> 赞同：0
> 
> 时间：2013-01-15T17:34:24.157
> 
> 标签：windows, qt

这只是好奇。例如，在 Windows 中，Qt 如何解释样式表？这似乎是微不足道的，但是，Qt 如何告诉操作系统改变小部件的外观？Windows API 使用哪个方法库？WPF 是否使用相同的 Windows API 库？

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:49:14.770

Qt 自定义绘制所有小部件。Qt 可能在后台调用操作系统提供的 API 来渲染每个小部件，但 QButton 不是在窗口上使用 BUTTON 窗口类的 HWND。Qt 似乎确实使用操作系统在小部件上呈现文本，但仅使用字形，而不是 QLabel 中可用的复杂呈现。

# templates - How to register another (custom) Twig loader in Symfony2 environment?

> ID：14343435
> 
> 赞同：7
> 
> 时间：2013-01-15T17:34:31.150
> 
> 标签：templates, symfony, twig

I would like to load certain Twig templates from the database in my Symfony2 application, while still keeping the possibility to use the native loader to render templates in the standard filesystem locations. How to achieve this?

As far as I've understood, there is no possibility to register multiple loaders to Twig environment. I have been thinking two ways (for now):

*   [Replace the default loader](https://stackoverflow.com/questions/4682796/how-to-change-twig-loader-via-symfony2-settings) with a custom proxy class. When templates are referred with the standard @Bundle-notation, proxy would pass the request to the default loader. In other case, the request would be passed to my custom (database) loader; OR
*   Build up a completely new Twig environment. This method would require registering custom Twig extensions to both environments and it does not allow cross-referencing templates from different sources (some from @Bundles, some from database)

* * *

**Update 1:**

It seems that Twig supports [Twig_Loader_Chain](http://twig.sensiolabs.org/doc/api.html#twig-loader-chain) class that could be used in my first option. Still, the default loader should be accessible and passed to the chain as the first option.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T16:25:47.977

要使用 Twig_Loader_Chain 你需要 Symfony 2.2 [https://github.com/symfony/symfony/pull/6131](https://github.com/symfony/symfony/pull/6131)
然后你可以简单地配置你的加载器：

```
services:
    twig.loader.filesystem:
        class: %twig.loader.filesystem.class%
        arguments:
            - @templating.locator
            - @templating.name_parser
        tags:
            - { name: twig.loader }
    twig.loader.string:
        class: %twig.loader.string.class%
        tags:
            - { name: twig.loader } 
```

* * *

**更新：**
看起来仍然存在一些问题（文件系统加载器有时找不到模板）但我发现了这个：http:
[//forum.symfony-project.org/viewtopic.php?](http://forum.symfony-project.org/viewtopic.php?t=40382&p=131254)

t=40382&p=131254 似乎工作得很好！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-18T23:07:26.540

这是临时更改标准环境中的加载程序的一种廉价而愉快的方式：

```
 // Keep the current loader
    $oldLoader = $env->getLoader();

    // Temporarily set a string loader   
    $env->setLoader(new \Twig_Loader_String());

    // Resolve the template - but don't render it yet.
    $template = $env->resolveTemplate($template);

    // Restore the old loader
    $env->setLoader($oldLoader);

    // Render the template. This will pass the old loader into any subtemplates and make sure your string based template gets into the cache.
    $result = $template->render($context); 
```

我想这将适用于其他自定义加载程序。

# networking - 为什么字节顺序没有标准化？

> ID：14343437
> 
> 赞同：1
> 
> 时间：2013-01-15T17:34:45.403
> 
> 标签：networking, byte, protocols, processor, bits

> **可能重复：**
> [不同字节序的好处是什么？](https://stackoverflow.com/questions/914394/what-are-the-benefits-of-the-different-endiannesses)

*字节顺序*或*字节顺序*是指存储在内存中或通过网络传输的元素序列（例如，字、字节或位）的排序。

大端系统首先存储最高有效字节，而小端系统首先存储最低有效字节。此外，还存在使用其他排序约定的混合端系统。

我的问题：如何为特定系统/处理器/协议选择给定的字节顺序？影响这些决定的设计考虑因素是什么？在给定的字节顺序下，特定的应用程序或任务是否会更好地执行？从物理或热力学的角度来看，字节顺序是否重要，或者字节顺序很大程度上取决于约定和兼容性问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:35:45.313

> 字节顺序主要由约定和兼容性问题决定吗？

如今，大多是的。大多数选择将基于与现有系统兼容的需要。这与 Windows/Mac/Unix 行尾惨败真的没有什么不同。

但是，在某些情况下，特定的字节序对于特定的应用程序具有一些实际的实施优势。例如，小端系统意味着`*(int16_t *)&my_int32`将为范围内的值提供“正确”的结果。有关更多示例，请参阅[Wikipedia 文章](http://en.wikipedia.org/wiki/Endianness)。

# android - 使用带有 proguard 关闭力的 jsoup 关闭

> ID：14343448
> 
> 赞同：21
> 
> 时间：2013-01-15T17:35:16.997
> 
> 标签：android, jsoup, proguard

**编辑：我的 PROGUARD 版本是 4.7**

今天我尝试`jsoup (version 1.7.1)`在我的android应用程序中包含，但它给我带来了很多麻烦。当我每次我的应用程序面临强制关闭问题时，我导出签名`apk`并`proguard` **打开**`proguard`，然后我禁用并导出它`apk`并且它运行完美。请帮我。我该如何解决这个错误？堆栈跟踪如下：

```
java.lang.RuntimeException: An error occured while executing doInBackground()
at android.os.AsyncTask$3.done(AsyncTask.java:278)
at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:107
6)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:56
9)
at java.lang.Thread.run(Thread.java:856)
Caused by: java.lang.ExceptionInInitializerError
at org.jsoup.nodes.Document$OutputSettings.<init>(Unknown Source)
at org.jsoup.nodes.Document.<init>(Unknown Source)
at org.jsoup.parser.TreeBuilder.void initialiseParse(java.lang.String,java.lang.
String,org.jsoup.parser.ParseErrorList)(Unknown Source)
at org.jsoup.parser.TreeBuilder.org.jsoup.nodes.Document parse(java.lang.String,
java.lang.String,org.jsoup.parser.ParseErrorList)(Unknown Source)
                            boolean process(org.jsoup.parser.Token)
at org.jsoup.parser.HtmlTreeBuilder.org.jsoup.nodes.Document parse(java.lang.Str
ing,java.lang.String,org.jsoup.parser.ParseErrorList)(Unknown Source)
                                boolean process(org.jsoup.parser.Token)
                                boolean process(org.jsoup.parser.Token,org.j
soup.parser.HtmlTreeBuilderState)
                                void transition(org.jsoup.parser.HtmlTreeBui
lderState)
                                org.jsoup.parser.HtmlTreeBuilderState state(
)
                                void framesetOk(boolean)
                                void maybeSetBaseUri(org.jsoup.nodes.Element
)
                                org.jsoup.nodes.Element insert(org.jsoup.par
ser.Token$StartTag)
                                org.jsoup.nodes.Element insert(java.lang.Str
ing)
                                void insert(org.jsoup.parser.Token$Comment)
                                void insert(org.jsoup.parser.Token$Character
)
                                boolean isElementInQueue(org.jsoup.helper.De
scendableLinkedList,org.jsoup.nodes.Element)
                                void popStackToClose(java.lang.String[])
                                void insertOnStackAfter(org.jsoup.nodes.Elem
ent,org.jsoup.nodes.Element)
                                void replaceInQueue(java.util.LinkedList,org
.jsoup.nodes.Element,org.jsoup.nodes.Element)
                                boolean inSpecificScope(java.lang.String,jav
a.lang.String[],java.lang.String[])
                                boolean inSpecificScope(java.lang.String[],j
ava.lang.String[],java.lang.String[])
                                boolean inScope(java.lang.String,java.lang.S
tring[])
                                void insertInFosterParent(org.jsoup.nodes.No
de)
at org.jsoup.parser.Parser.org.jsoup.nodes.Document parse(java.lang.String,java.
lang.String)(Unknown Source)
at org.jsoup.Jsoup.org.jsoup.nodes.Document parse(java.lang.String)(Unknown Sour
ce)
at com.my.package.name.BalCheck.void doLogin(java.lang.String,java.lang
.String)(Unknown Source)
                                     void checkBal()
                                     void echo(java.lang.String)
at com.my.package.name.BalCheck.void doCheckBalance(java.lang.String,ja
va.lang.String)(Unknown Source)
at com.my.package.name.SmsPage$CheckUltooBalance.java.lang.Void doInBac
kground(java.lang.Void[])(Unknown Source)
                                                      void onPostExecute(jav
a.lang.Void)
at com.my.package.name.SmsPage$CheckUltooBalance.java.lang.Object doInB
ackground(java.lang.Object[])(Unknown Source)
at android.os.AsyncTask$2.call(AsyncTask.java:264)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
... 5 more
Caused by: java.lang.ExceptionInInitializerError
at org.jsoup.nodes.Entities$EscapeMode.<clinit>(Unknown Source)
... 18 more
Caused by: java.lang.NullPointerException
at java.util.Properties.load(Properties.java:246)
at org.jsoup.nodes.Entities.java.util.Map loadEntities(java.lang.String)(Unknown
 Source)
at org.jsoup.nodes.Entities.<clinit>(Unknown Source)
... 19 more 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2015-08-23T18:26:15.093

*@Erdem 在上面的评论中发布的解决方案似乎是最好的解决方案。我将其重新发布为可见性的答案。*

将下面的行添加到您的 proguard 文件中

```
-keeppackagenames org.jsoup.nodes 
```

这似乎足够了

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-29T09:31:08.480

您可以使用 proguard 去[jsoup](http://www.jormula.com/dev/2013/01/29/tutorial-how-to-solve-force-close-crash-using-jsoup-with-proguard-in-android/)寻找答案，即添加以下内容`proguard-project.txt`：

```
-keep public class org.jsoup.** {
public *;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-24T14:09:00.950

只需在 proguard-rules.txt 中添加这些行

```
#Jsoup
-keep public class org.jsoup.** {
public *;
}
-keeppackagenames org.jsoup.nodes 
```

# ios - 如何复制实际导航栏的背景视图？

> ID：14343449
> 
> 赞同：0
> 
> 时间：2013-01-15T17:35:19.023
> 
> 标签：ios, objective-c

如何复制实际的 UINativationBar 背景外观？我想在另一个视图上使用确切的背景外观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:52:18.497

我认为没有直接的方法可以访问 UINavigationBar 的渐变背景。但是，您可以在[此处](http://www.teehanlax.com/downloads/ios-5-gui-psd-iphone-4s/)使用背景的模型版本并使用 Photoshop 创建您自己的版本。

# java - Java Swing 和观察者模式

> ID：14343452
> 
> 赞同：3
> 
> 时间：2013-01-15T17:35:26.620
> 
> 标签：java, swing, oop, model-view-controller, observer-pattern

我正在寻找一种在 Swing 中干净地组织我的 UI 代码的方法。

假设我的 UI 代码的结构如下：

```
class MainWindow extends JFrame {
    // SomePanel panel is added here
}
class SomePanel extends JPanel {
    // buttons, checkboxes and so on are added here
} 
```

假设我在我的 main 方法中实例化一个 MainWindow 对象：

```
MainWindow frame = new MainWindow("I am an App"); 
```

从我的主方法中收听按钮的 ActionEvents（在 SomePanel 中声明，在 MainWindow 中声明）的最佳做法是什么？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T17:46:51.700

使用 a `PropertyChangeEvent`, seen [here](https://stackoverflow.com/a/11832979/230513)和[here](https://stackoverflow.com/a/10523401/230513)将结果从一个容器传递到另一个容器。[这里](https://stackoverflow.com/a/3072979/230513)提到了实现[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)的其他方法。

附录：*您建议编写 custom `ActionEvents`？*

[`EventListenerList`](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/EventListenerList.html)是实现观察者模式的另一种方式。这样的列表对每个 都是通用的，并且在必须管理`JComponent`多个事件*类型时是合适的。*[`JFreeChart`](http://www.jfree.org/jfreechart/)是另一个流行的例子，当数据模型发生变化时，它使用不同的事件来更新图表子组件。

# java - Java 在 http get 上设置接受

> ID：14343453
> 
> 赞同：0
> 
> 时间：2013-01-15T17:35:28.557
> 
> 标签：java, http, get, http-headers, http-accept-encoding

我正在尝试使用 GET 向服务器发送请求，该请求将以 XML 响应。我被告知我需要设置“Accept”属性，代码如下：

```
StringBuffer url = new StringBuffer(BASE_URL);
url.append(DRS_SERVICE_RELATIVE_URL);
url.append("?").append(DOC_PARAM_NAME).append("=").append(docId);
url.append("&").append(DOB_PARAM_NAME).append("=").append(dob);

try
{
    this.server = new URL(url.toString());

    URLConnection urlCon = this.server.openConnection();
    HttpURLConnection con = (HttpURLConnection)urlCon;

    con.addRequestProperty("Accept", "text/xml, application/*+xml, application/xml, text/xml, application/*+xml");

    con.connect();

    input = new BufferedReader(new InputStreamReader(con.getInputStream()));
    String line = null;

    while((line = input.readLine()) != null)
        System.out.println(line); 
```

我得到响应代码 500。当我与我尝试访问的 URL 的开发人员交谈时，他们说我没有将“接受”属性设置为 XML？我究竟做错了什么？你应该如何设置该属性？

编辑：好的，这很尴尬。这个问题与我的开发环境有关，特别是我设置 TCP/IP 监控工具的方式。当我停止监视网络消息时，它按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:33:59.850

这个问题与我的开发环境有关，特别是我设置 TCP/IP 监控工具的方式。当我停止监视网络消息时，它按预期工作。

# java - java中的日期和星期日期验证

> ID：14343457
> 
> 赞同：0
> 
> 时间：2013-01-15T17:35:36.387
> 
> 标签：java, date, jodatime

我有一个存储在字符串中的日期，我需要验证它是否代表 ISODateFormat 中的日期或星期日期。

如果它是任何一种格式，字符串都是可以接受的。

我可以构建 2 个格式化程序并传递字符串并检查它们在哪里抛出异常并验证它。

```
String date;
final DateTimeFormatter dateFormatter = ISODateTimeFormat.date();
final DateTimeFormatter weekdateFormatter = ISODateTimeFormat.weekDate();
boolean isDate=true,isWeekDate=true;

try {
      dateFormatter.parseDateTime(date);
}
catch (IllegalArgumentException e) {
      isDate =false;
}

try {
    weekdateFormatter.parseDateTime(date);
}
catch (IllegalArgumentException e) {
    isWeekDate =false;
}

if(!isDate && !isWeekDate)
    throw UserDefinedException(); 
```

有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:54:55.567

附加方法

```
 /**
    * @return null if string is invalid
    */
   public static DateTime checkDate(String dateAsString, DateTimeFormatter formatter)
   {
      DateTime retVal = null;
      try {
         retVal = formatter.parseDateTime(dateAsString);
      } catch (IllegalArgumentException ex){
      }
      return retVal;
   } 
```

用法

```
 String date = "someString";
   if (checkDate(date, ISODateTimeFormat.date()) == null 
      || checkDate(date, ISODateTimeFormat.weekDate()) == null) 
   {
      throw new UserDefinedException();
   } 
```

或多种格式的 utils 方法

```
 /**
    * @return null if string is invalid
    */
   public static DateTime checkDate(String dateAsString,
                                   DateTimeFormatter[] formatters)
   {
      DateTime retVal = null;
      for (final DateTimeFormatter formatter : formatters)
      {
         try
         {
            retVal = formatter.parseDateTime(dateAsString);
         }
         catch (IllegalArgumentException ex)
         {
         }
         if (retVal != null)
         {
            break;
         }
      }
      return retVal;
   } 
```

# bash - 重定向符号后的 Bash 完成

> ID：14343464
> 
> 赞同：2
> 
> 时间：2013-01-15T17:35:45.703
> 
> 标签：bash, bash-completion

当我尝试在重定向符号之后完成路径时，bash 完成的行为就像它仍在尝试在重定向之前完成命令的参数一样。

例如：
`dpkg -l > /med``Tab`

通过点击`Tab`after`/med`我希望它完成路径`/media/`，但它什么也不做。

有没有我可以更改的设置以使其按预期工作？我正在使用 Ubuntu 12.04 提供的 bash shell。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T18:02:11.677

您可以按`Alt``/`调用`complete-filename`而不是“智能”完成。

# sql-server - sql - 根据父母还是孩子计算列

> ID：14343465
> 
> 赞同：2
> 
> 时间：2013-01-15T17:35:48.697
> 
> 标签：sql-server, tsql

我希望在某些条件下获得列的总和，即取决于列是具有子任务的父级还是没有子任务的父级。如果一个任务是子任务的父级，我只想要子任务的“完整”列的总和。如果一个任务只是一个父级，我只想要父级的完整列的总和。- 但仅当任务（父或子）都与同一用户相关时。

例如在以下示例表中：

```
UserID | Parent_TaskID | TaskID  | Complete
------ | ------------- | ------  | --------
435    | 149329        | 161280  |   1
435    | 149330        | 210717  |   2
435    | 149330        | 228100  |   3
435    | 156991        | 149330  |   1
169    | 458764        | 546540  |   2
169    | 456842        | 546541  |   2
169    | 456842        | 458764  |   0 
```

TaskID 149330 是具有子 210717 和 228100 的父级，因此 149330 的该列的计数为 5，即忽略父级的完整列。161280 是父级，因此只会返回 0。546540 是 458764 的子任务，因此 458764 的总和为 2。

所以我认为我的结果应该是这样的：

```
TaskID  |  Sum_complete
------- |  ------------
161280  |  1
149330  |  5
546541  |  2
458764  |  2 
```

任何想法如何做到这一点？

我在 SqlFiddle [http://sqlfiddle.com/#!2/8295f创建了一个表](http://sqlfiddle.com/#!2/8295f)

谢谢，

我可以通过以下方式获得父母：

```
select t.taskID, t.Parent_taskID, t.userID, t.complete 
from task t
where t.Parent_taskID not in (
    select tp.taskID
    from task tp
    where tp.userID = t.userID 
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T18:02:37.417

根据您的描述，我认为您要求以下内容（使用问题中的示例数据）：

**编辑**：替换查询以从结果集中消除子项。

```
declare @Task as Table
  ( UserId varchar(6), Parent_TaskId varchar(13), TaskId varchar(6), Complete integer );

INSERT INTO @Task ( UserId, Parent_TaskId, TaskId, Complete ) VALUES
    ('435', '149329', '161280', 1 ),
    ('435', '149330', '210717', 2 ),
    ('435', '149330', '228100', 3 ),
    ('435', '156991', '149330', 1 ),
    ('169', '458764', '546540', 2 ),
    ('169', '456842', '546541', 2 ),
    ('169', '456842', '458764', 0 );

; with QualifiedTasks as (
  select UserId, TaskId, Parent_TaskId, Complete,
    case when exists ( select 42 from @Task where Parent_TaskId = O.TaskId ) then 1 else 0 end as Parent,
    case when exists ( select 42 from @Task where O.Parent_TaskId = TaskId ) then 1 else 0 end as Child, -- Unused, but here for completeness.
    case when not exists ( select 42 from @Task where Parent_TaskId = O.TaskId or O.Parent_TaskId = TaskId ) then 1 else 0 end as Loner  
    from @Task as O )
  select L.TaskID, Sum( Coalesce( R.Complete, L.Complete ) ) as Sum_Complete
    from QualifiedTasks as L left outer join
      QualifiedTasks as R on R.Parent_TaskId = L.TaskId and R.UserId = L.UserId
    where L.Parent = 1 or L.Loner = 1
    group by L.TaskId; 
```

一些明显的优化浮现在脑海中。、和列是多余的`Parent`，可以消除这三个中的任何一个。 可以在摘要查询中由 确定。一个聪明的把戏，或者现在让我逃脱了。`Child``Loner``Parent``Max( R.Complete ) is not NULL``Child``Loner`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:52:14.277

这应该有效（尽管您在问题上发布的数据与小提琴上的数据不同）：

```
SELECT ISNULL(B.taskId,A.TaskId) TaskId, SUM(A.Complete) Complete
FROM Task A
LEFT JOIN Task B
ON A.Parent_TaskID = B.taskId
GROUP BY ISNULL(B.taskId,A.TaskId) 
```

# svn - .svn 文件夹剖析

> ID：14343466
> 
> 赞同：1
> 
> 时间：2013-01-15T17:35:49.053
> 
> 标签：svn, version-control

尝试使用 svn 进行更改时出现`svn: Illegal repository URL ''`错误。后来发现`URL`并`Repository Root`从`file://`我做的时候开始`svn info`。有人告诉我用正确的路径编辑`.svn/entries`和更新`URL`and 。`Repository Root`

我已经使用 svn 有一段时间了，但除了上述问题之外，我从来不需要进入 .svn 目录来做任何事情。有人可以解释 .svn 中的每个文件/文件夹是什么，什么时候需要破解这些文件/文件夹来修复某些东西？

*   条目
*   支柱基地
*   道具
*   文本库
*   时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:23:55.937

`.svn`除非您确切知道自己在做什么以及为什么，否则您永远不应该直接编辑 的内容。只能通过 Subversion 客户端库来访问它。

直接编辑 的内容`.svn`可能会得到想要的结果。或者它可能会完全破坏您的工作副本。

要更改存储库指向的位置，您应该使用`svn switch`指向同一存储库中的不同路径，并且`svn relocate`（或`svn switch --relocate`在尚未实现别名的版本中）指向不同主机/协议上的相同存储库路径。

据我所知，您不能同时更改主机/协议*和*存储库内的路径。为此，您需要检查一个新的工作副本并手动将任何更改迁移到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:56:55.943

尝试“svn help switch”，用于将工作副本切换到新 URL。请务必阅读 '--ignore-ancestry' 和 '--relocate' 上的位（显然从 file:// 切换到 http://）。

而且，为了安全起见，您可以将工作副本复制到不同的目录，这样就不会丢失任何更改。

这样，在最坏的情况下，您*可以*签出一个新的工作副本，然后将您的更改复制过来。

另外，我在 svn 1.7.5 上。你没有提到你的版本。

# javascript - 将 HTML 链接添加到 Google 图表表

> ID：14343468
> 
> 赞同：12
> 
> 时间：2013-01-15T17:35:49.507
> 
> 标签：javascript

我正在尝试将 HTML 链接添加到 Google Chart Table 列。我对列和表都有 setHTML: true ，但它只是显示 HTML 代码而不是解释它。有人可以指出我正确的方向吗？

谢谢

```
<!--
You are free to copy and use this sample in accordance with the terms of the
Apache license (http://www.apache.org/licenses/LICENSE-2.0.html)
-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>
      Google Visualization API Sample
    </title>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1', {packages: ['table']});
    </script>
    <script type="text/javascript">

     function drawVisualization() {
      // Create and populate the data table.
      var data = google.visualization.arrayToDataTable([
        ['Name', 'Logged In'],

        ['<a href="LINK">Item 1</a>', 'Item 2'],
     ]);

       data.setColumnProperty(0, {allowHTML: true});
   // Create and draw the visualization.
   visualization = new google.visualization.Table(document.getElementById('table'));
       visualization.draw(data, {allowHTML: true});
    }

   google.setOnLoadCallback(drawVisualization);
    </script>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <div id="table"></div>
  </body>
</html>
​ 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-15T17:40:09.043

allowHTML 属性区分大小写。它必须是 {allowHtml: true}。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-31T14:05:51.763

您应该使用[格式化程序](https://developers.google.com/chart/interactive/docs/reference#patternformatter)。

如果您用 HTML 替换值，那么排序将无法正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-03T05:40:21.060

在`visualization = new google.visualization.Table...`和之间`visualization.draw(data, {allowHtml: true})`，添加一个新类[DataView](https://developers.google.com/chart/interactive/docs/reference#DataView)来格式化列：

示例：在这里，我们将包含网站名称的第一列与第三列中给出的 URL 进行超链接，然后在第三列中超链接 URL 字符串本身。列索引不是 data.table 中的实际索引，而是相对于`.format(data, [,])`在声明变量以格式化列^([1](https://groups.google.com/d/msg/google-visualization-api/KhecvCOiLXQ/wHJroZ1q6SEJ))后指定的索引。

```
// hyperlink column containing website title
var format_name = new google.visualization.PatternFormat(
'<a href="{2}">{0}</a>');

// hyperlink URL column
var format_url = new google.visualization.PatternFormat(
'<a href="{0}">{0}</a>');

// apply formatters
// extract first three columns (or 0 and 2) for format_name variable
format_name.format(data, [0,1,2]);

// extract the third column for format_url variable
format_url.format(data, [2]);

// Use DataView to create read-only view for data.table
var view = new google.visualization.DataView(data);

// Use view instead of original data for data.table source
visualization.draw.draw(view, {allowHtml: true}); 
```

# spring - Spring MVC Portlets：带有displaytag的外部分页需要进入action阶段

> ID：14343469
> 
> 赞同：0
> 
> 时间：2013-01-15T17:35:52.797
> 
> 标签：spring, pagination, portlet, displaytag

我正在使用 Spring MVC portlet 我需要实现一个带有外部分页的显示标签。为了做到这一点，我在 JSP 中定义了我的表，如下所示：

```
 <portlet:actionURL var="viewListURL">
        <portlet:param name='action' value='${ServletContextKeys.MY_ACTION_METHOD}'/> 
    </portlet:actionURL>  
                <display:table name="${whateverList}"
                               requestURI="${viewListURL}"
                               class="displayTagTable"
                               export="true"
                               uid="item"
                               pagesize="10"
                               partialList="true"
                               sort="external"
                               defaultsort="1"                                  
                               size="${ServletContextKeys.SC_LIST_SIZE}">
     ... 
```

问题是，当我单击任何按钮进行分页时，显示标签会将我重定向到渲染阶段，而不是我想要的操作阶段。我究竟做错了什么？有任何想法吗..？非常感谢

编辑：我可以在 URL 中看到参数 p_p_url_type=0（渲染阶段）。这对我来说毫无意义，因为我正在调用一个动作 url，但也许只需将此参数更改为 p_p_url_type=1 就足够了。但是，我只是不知道如何......有什么想法吗？

```
http://localhost:8080/wsdes/user/sifo3/home?p_p_id=SifoIIIweb_WAR_sifo3economicoweb_INSTANCE_s8jH&p_p_lifecycle=1&p_p_url_type=0&p_p_state=maximized&p_p_mode=view&_SifoIIIweb_WAR_sifo3economicoweb_INSTANCE_s8jH_action=consultaJustificantes&_SifoIIIweb_WAR_sifo3economicoweb_INSTANCE_s8jH_implicitModel=true&_SifoIIIweb_WAR_sifo3economicoweb_INSTANCE_s8jH_d-49489-p=2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:02:01.237

以前去过那里。我以不同的方式解决了这个问题，但是在查看 DisplayTag 源代码时，我发现了一些有趣的东西。例如，在[PortletHref](http://grepcode.com/file/repo1.maven.org/maven2/displaytag/displaytag-portlet/1.2/org/displaytag/portlet/PortletHref.java#PortletHref.addParameter%28java.lang.String,java.lang.Object%29)中，您可以在`addParameter`方法中找到它：

```
 if (PARAM_TYPE.equals(name))
        {
           if (TYPE_RENDER.equals(value))
           {
               this.setAction(false);
           }
           else if (TYPE_ACTION.equals(value))
           {
              this.setAction(true);
           } 
```

并且：

```
 private static final String PARAM_PREFIX = "portlet:";
 public static final String PARAM_TYPE = PARAM_PREFIX + "type";
 public static final String TYPE_ACTION = "action"; 
```

显然，如果您需要一个以`portlet:type`value命名的参数`action`来使 DisplayTag 生成一个 Action URL。我还没有测试过自己，所以让我知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:00:05.813

我仍然不知道原因，但我解决了这个问题，将 Portlets (displaytag-portlet.jar) 的显示标签更改为标准 displaytag，并从 displaytag.properties 文件中删除 factory.requestHelper 属性： factory.requestHelper =org.displaytag.portlet.PortletRequestHelperFactory

使用普通的 displaytag 库而不是 portlet 库解决了我的问题。

# asp.net - SQLHelper.vb 缺少 ExecuteDataTable

> ID：14343470
> 
> 赞同：1
> 
> 时间：2013-01-15T17:35:55.123
> 
> 标签：asp.net, vb.net

[为什么SQLHelper.vb](https://appsimplicity.googlecode.com/svn-history/r217/MetaDataExtractor/SchemaDiscovery/AppSimplicity.SchemaDiscovery.Providers/SQLServer/DataAccess/SQLHelper.vb)中没有 ExecuteDataTable 的共享函数。有一个：ExecuteReader、ExecuteDataset 和 ExecuteScaler。

这不是问题，因为我会自己写。我只是在徘徊为什么会这样。我通常会使用 DataReader，但我正在编写数据逻辑层，并且 DataTable 需要超过连接（DataReaders 不能超过连接）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:48:11.810

`ExecuteDataset()`已经做了你需要的。从某种意义上说，数据集只是 DataTables 的集合。

> 我通常会使用 DataReader，但我正在编写一个数据逻辑层，并且 DataTable 需要超过连接（DataReaders 不能超过连接）。

在这种情况下，我可以建议您构建一个`ExecuteEnumerable()`在 Iterator 块中使用 DataReader 的方法，而不是构建一个 ExecuteDatatable() 方法。代码看起来像这样：

```
Public Shared Iterator Function ExecuteEnumerable(Of T)( ... ) As IEnumerable(Of T)
   Using cn As New SqlConnection( ... ), _
         cmd As New SqlCommand( ... )

       'As needed
       'cmd.Parameters.Add( ... ).Value = ...

       Using rdr As SqlDataReader = cmd.ExecuteReader()
           While rdr.Read()
               Yield transform(rdr)
           End While
       End Using
    End Using
End Function 
```

你会注意到我跳过了一些事情。我不熟悉现有的 SqlHelper.vb 文件，因为您希望匹配现有样式，所以我在代码中留出了空间供您适应。但是，我想指出两个重要的部分：

1.  注意 cmd.Parameters.Add() 调用。实用程序 sql 帮助类的一个常见故障是它们无法充分提供查询参数。结果通常是非常不安全的代码。如果您现在没有办法为现有方法传递参数数据，则需要制作一个。那是优先级1。
2.  那里的`transform(rdr)`调用将使用`Func(IDataRecord, T)`必须作为参数提供给函数的委托。要使 ExecuteEnumerable() 迭代器概念起作用，您*必须*在每次迭代时获取 SqlDataReader 对象中当前值的副本。您可以在此处设置某种通用数据传输对象，就像在 DataTable 中使用 DataRow 类型一样。但是，与其花费 cpu 和内存时间将副本创建到某种类型的通用数据传输对象中，我更喜欢使用委托让代码将其直接复制到强类型业务对象中。缺点是需要在每次调用方法时发送有关如何为您的特定对象执行此操作的说明。不过，大多数情况下，使用业务对象上的共享工厂方法很容易做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T20:16:33.503

我们可以像 DataSet 一样创建

```
' Execute a SqlCommand (that returns a resultset) against the specified SqlConnection 
' using the provided parameters.
' e.g.:  
' Dim dt As DataTable = ExecuteDataTable(conn, CommandType.StoredProcedure, "GetOrders", new SqlParameter("@prodid", 24))
' Parameters:
' -connection - a valid SqlConnection
' -commandType - the CommandType (stored procedure, text, etc.)
' -commandText - the stored procedure name or T-SQL command
' -commandParameters - an array of SqlParamters used to execute the command
' Returns: A dataset containing the resultset generated by the command
Public Overloads Shared Function ExecuteDataTable(ByVal connection As SqlConnection, _
                                                ByVal commandType As CommandType, _
                                                ByVal commandText As String, _
                                                ByVal ParamArray commandParameters() As SqlParameter) As DataTable
    If (connection Is Nothing) Then Throw New ArgumentNullException("connection")
    ' Create a command and prepare it for execution
    Dim cmd As New SqlCommand
    Dim dt As New DataTable
    Dim dataAdatpter As SqlDataAdapter
    Dim mustCloseConnection As Boolean = False

    PrepareCommand(cmd, connection, CType(Nothing, SqlTransaction), commandType, commandText, commandParameters, mustCloseConnection)

    Try
        ' Create the DataAdapter & DataSet
        dataAdatpter = New SqlDataAdapter(cmd)

        ' Fill the DataSet using default values for DataTable names, etc
        dataAdatpter.Fill(dt)

        ' Detach the SqlParameters from the command object, so they can be used again
        cmd.Parameters.Clear()
    Finally
        If (Not dataAdatpter Is Nothing) Then dataAdatpter.Dispose()
    End Try
    If (mustCloseConnection) Then connection.Close()

    ' Return the dataset
    Return dt
End Function ' ExecuteDataTable 
```

# php - 如何定期更新 MySQL 中的数据？

> ID：14343475
> 
> 赞同：0
> 
> 时间：2013-01-15T17:36:13.937
> 
> 标签：php, mysql, database, wamp

> **可能重复：**
> [在 Windows 中是否有与 cron 等效的内容？](https://stackoverflow.com/questions/1707479/is-there-an-equivalent-to-cron-in-windows)

如何定期更新 MySQL 中的数据？

说我有桌子。一栏是“日期”。另一列是“Expiry_Status”。

如何定期（几个小时）更新表格，以便如果“日期”列中的日期晚于当前日期，“Expiry_Status”将更新为“是”值。

我使用 WAMP 作为框架。

编辑：感谢您的回答，但你们中的很多人都给出了有关更改数据库架构的答案。我上面给出的案例只是一个简单的例子。我对如何定期更新数据库更感兴趣。即：使用的程序、语法、范例……等等等等。再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:43:40.223

拥有它有什么价值`expiry_status`？如果您在该日期/日期时间字段中有索引（无论如何您都需要有效地更新该`expiry_status`字段），您可以轻松地查询...

```
WHERE `date` > NOW() 
```

...为了确定活动记录。无论如何，这实际上就是您将要使用这个提议的更新查询所做的所有事情。如果不需要，为什么要维护一个额外的字段？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:38:16.433

您编写一个程序来执行更新，然后使用调度系统运行它。

在 Windows 上（因为您标记了问题 WAMP），这通常是使用[Task Scheduler](http://windows.microsoft.com/en-GB/windows7/schedule-a-task)完成的。

其他操作系统通常使用[cron](https://help.ubuntu.com/community/CronHowto)。

但是，更改状态列是多余的。您可以搜索到期时间大于 NOW() 的数据，而不是状态为 Yes 的数据。这种计划脚本通常在删除旧数据时使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T17:38:29.677

编写一个 php 脚本来检查时间并适当地更新，然后使用[windows 任务调度程序](https://stackoverflow.com/questions/132971/what-is-the-windows-version-of-cron)以一定的时间间隔运行它们。（假设 Windows 操作系统...）

# codeigniter - 如何在 CodeIgniter 中获取包含有用信息的 URL 结构？

> ID：14343476
> 
> 赞同：1
> 
> 时间：2013-01-15T17:36:16.573
> 
> 标签：codeigniter, codeigniter-2, codeigniter-url

我有一个网站，它的 URL 结构对面包屑完全没有用，有利于 SEO，或者对用户来说很直观。有点像

`asdf.com/directory/listing/{unique_id}/{unique-page-name}/`

我真的很想将其更改为

`asdf.com/{state}/{city}/{unique_id}/{unique-page-name}/`

或非常相似的东西。这样，我可以实现面包屑的形式

`Home > State > City > Company`

有人对将当前结构转换为我上面描述的结构有任何想法吗？无论我怎么看，似乎都需要对网站进行彻底的检修。能够向用户展示类似的东西会很棒`Home > Florida > Miami > Bob's Haircuts`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:08:42.593

你只需要对你的路线有创意： http: [//ellislab.com/codeigniter/user-guide/general/routing.html](http://ellislab.com/codeigniter/user-guide/general/routing.html)

您可以设置一条路线来捕获所有流量并将其指向`directory/listing`，然后在您的`listing`方法中 - 您可以手动访问 url 段。例如：

```
// application/config/routes.php
$route[':any'] = "directory/listing";
    /**
     you might have to play with this a bit, 
     I'm not sure, but you might need to do something like:
       $route[':any'] = "directory/listing";
       $route[':any/:any'] = "directory/listing";
       $route[':any/:any/:any'] = "directory/listing";
       $route[':any/:any/:any/:any'] = "directory/listing";
    */

// application/controllers/directory.php

function listing()
{
    // docs: http://ellislab.com/codeigniter/user-guide/libraries/uri.html
    $state = $this->uri->segment(1);
    $city = $this->uri->segment(2);
    $unique_id = $this->uri->segment(3);
    $unique_page_name = $this->uri->segment(4);

    // then use these as needed

} 
```

或者，可能是这种情况，您需要能够调用其他控制器和方法 -

您可以更改 URL 以指向控制器，然后执行列表操作 -

所以你的网址会变成：

```
asdf.com/directory/{state}/{city}/{unique_id}/{unique-page-name}/ 
```

你的路线会变成：

```
 $route['directory/:any'] = "directory/listing"; 
```

然后，您需要更新`listing`方法中的 uri 段以匹配第 2、3、4 和 5 个段。

这样，您仍然可以调用另一个控制器，并且它不会被您的自定义路由捕获：

```
asdf.com/contact/  --> would still access the contact controller and index method 
```

**更新**

您还可以发挥创意并使用正则表达式在第一个 uri 段中捕获具有状态名称的任何 url - 然后将它们推送到`directory/listing`，然后所有其他控制器仍然可以工作，您不必`directory`在 url 中添加控制器。像这样的东西可能会起作用：

```
// application/config/routes.php
$route['REGEX-OF-STATE-NAMES'] = "directory/listing";
$route['REGEX-OF-STATE-NAMES/:any'] = "directory/listing"; // if needed
$route['REGEX-OF-STATE-NAMES/:any/:any'] = "directory/listing"; // if needed
$route['REGEX-OF-STATE-NAMES/:any/:any/:any'] = "directory/listing"; // if needed

/**
REGEX-OF-STATE-NAMES -- here's one of state abbreviations:
    http://regexlib.com/REDetails.aspx?regexp_id=471
*/ 
```

# xml - 您如何全局设置 Jackson 以忽略 Spring 中的未知属性？

> ID：14343477
> 
> 赞同：62
> 
> 时间：2013-01-15T17:36:19.193
> 
> 标签：xml, spring, jackson

杰克逊使用以下方法忽略类中的未知属性的注释：

```
@JsonIgnoreProperties(ignoreUnknown = true) 
```

它允许您使用此注释忽略特定属性：

```
@JsonIgnore 
```

如果您想全局设置它，您可以修改对象映射器：

```
// jackson 1.9 and before
objectMapper.configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false);
// or jackson 2.0
objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false); 
```

您如何使用 spring 全局设置它，以便它可以`@Autowired`在服务器启动时无需编写额外的类？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-04-05T00:04:41.847

对于 jackson 1.9x 或更低版本，您可以使用对象映射器提供程序忽略未知属性

```
@Provider
@Component
public class JerseyObjectMapperProvider implements ContextResolver<ObjectMapper> {

    @Override
    public ObjectMapper getContext(Class<?> type) {

        ObjectMapper result = new ObjectMapper();
        result.configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false);
        return result;
    }
} 
```

对于 jackson 2.x 及更高版本，您可以使用对象映射器提供程序忽略未知属性

```
@Provider
@Component
public class JerseyObjectMapperProvider implements ContextResolver<ObjectMapper> {

    @Override
    public ObjectMapper getContext(Class<?> type) {

        ObjectMapper result = new ObjectMapper();
        result.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
        return result;
    }
} 
```

Spring 不会自动发现 Jersey 类。必须手动注册它们。

```
public class JerseyConfig extends ResourceConfig {
    public JerseyConfig() {
        register(JerseyObjectMapperProvider.class);
    }
} 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-01-15T17:36:19.193

这可以使用 spring 的 MethodInvokingFactoryBean 来实现：

```
<!-- Jackson Mapper -->
<bean id="jacksonObjectMapper" class="org.codehaus.jackson.map.ObjectMapper" />
<bean class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetObject" ref="jacksonObjectMapper" />
    <property name="targetMethod" value="configure" />
    <property name="arguments">
        <list>
            <value type="org.codehaus.jackson.map.DeserializationConfig.Feature">FAIL_ON_UNKNOWN_PROPERTIES</value>
            <value>false</value>
        </list>
    </property>
</bean> 
```

这可以像这样连接到 RestTemplate：

```
<bean id="restTemplate" class="org.springframework.web.client.RestTemplate">
    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
                <property name="objectMapper" ref="jacksonObjectMapper" />
            </bean>
        </list>
    </property>
</bean> 
```

它也可以直接注入到消息转换器中以与 Spring MVC 一起使用：

```
<mvc:annotation-driven>
    <mvc:message-converters>
        <!-- Jackson converter for HTTP messages -->
        <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
            <property name="objectMapper" ref="jacksonObjectMapper" />
        </bean>
    </mvc:message-converters>
</mvc:annotation-driven> 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-10-24T00:08:08.680

对于较新的 Jackson 版本 (2.x)，有一些更改：

```
<!-- Jackson Mapper -->
<bean id="jacksonObjectMapper" class="com.fasterxml.jackson.databind.ObjectMapper" />
<bean
    class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetObject" ref="jacksonObjectMapper" />
    <property name="targetMethod" value="configure" />
    <property name="arguments">
        <list>
            <value type="com.fasterxml.jackson.databind.DeserializationFeature">FAIL_ON_UNKNOWN_PROPERTIES</value>
            <value>false</value>
        </list>
    </property>
</bean> 
```

# ios - 呈现 ViewController 时 UINavigationController 不执行完成块

> ID：14343480
> 
> 赞同：0
> 
> 时间：2013-01-15T17:36:23.267
> 
> 标签：ios, uinavigationcontroller, uikit, presentmodalviewcontroller

这个很棘手。我有一个 UINavigationController 的子类，它覆盖了 pop/push 和 present/dismiss 方法。如果 UINavigationController 子类包含在弹出框中，我在这里自定义行为以设置正确的大小。没什么太花哨的，但我这样做是为了不编写所有 ViewController 的子类并使用 Autolayout。

但是，and 的完成块`presentViewController:animated:completion:`并`dismissViewControllerAnimated:completion:`没有被执行。这是奇怪的部分：在 iPhone 上完全相同的代码可以正常工作，但在 iPad 上没有执行这些块。这是一个代码示例。

```
@interface SBNavigationController : UINavigationController

@end

@implementation SBNavigationController

- (void) presentViewController:(UIViewController *)viewControllerToPresent animated:(BOOL)flag completion:(void (^)(void))completion
{
    if ([viewControllerToPresent isKindOfClass:[UINavigationController class]])
    {
        UINavigationController *nav = (UINavigationController *) viewControllerToPresent;
        [nav.topViewController setContentSizeForViewInPopover:kFullSizePopover];

    } else
    {
        [viewControllerToPresent setContentSizeForViewInPopover:kFullSizePopover];
    }

    viewControllerToPresent.modalPresentationStyle = UIModalPresentationCurrentContext;
    [super presentViewController:viewControllerToPresent animated:flag completion:completion];
}

- (void)dismissViewControllerAnimated:(BOOL)flag completion:(void (^)(void))completion ;
{
    [super dismissViewControllerAnimated:flag completion:completion];
}
@end 
```

使用它的代码是这样的：

```
@implementation SBInviteFBContactViewController

...

- (void) createInviteByMailViewController
{
    SBInviteMailViewController *mailInvite = [[SBInviteMailViewController alloc] initWithDelegate:self userInfo:_userInfo];

    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:mailInvite];

    [self.navigationController presentViewController:navController
                                            animated:YES
                                          completion:^{

                                              NSLog(@"presentViewController:");

                                          }];

}

#pragma mark SBInviteMailProtocol

- (void) invitedMailContacts:(NSArray *)contacts;
{
    [self.navigationController dismissViewControllerAnimated:YES
                                                  completion:^{
                                                      NSLog(@"animation Ended");
                                                      if (contacts) {
                                                          [self.delegate invitedMailContact:contacts];
                                                          [self popViewControllerAnimated:YES];
                                                      }
                                                  }];
}

...

@end 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:20:54.350

这似乎是一个*巨大*的错误。请向 Apple 报告（我也将这样做）。我在这里找到了自己的方式，因为我自己也发现了同样的错误，并进行了谷歌搜索以查看是否有其他人在谈论它。

我创建了一个非常小的演示项目，其架构是这样的：

*   ViewController - 主视图控制器

    它的视图包含一个按钮 Tap Me。

*   PopoverViewController - 出现在 popover 中

    当您在主 ViewController 中点击 Tap Me 时，它​​会创建一个 UIPopoverController，并使用*此*vc PopoverViewController 作为其内容视图控制器；它的视图也包含一个按钮 Tap Me。

*   PopoverViewController2 - 在同一个弹出窗口中“模态”呈现

    PopoverViewController2 将其`modalPresentationStyle`设置为，`UIModalPresentationCurrentContext`因此它可以出现在弹出框内。当您在弹出窗口中点击 Tap Me 时，PopoverViewController 会调用`presentViewController:...`.

这是代码：

```
- (IBAction)doTapMe:(id)sender {
    NSLog(@"about to present view controller");
    [self presentViewController:[PopoverViewController2 new] animated:YES completion:^{
        NSLog(@"in completion handler"); // never called!
    }];
    NSLog(@"did present view controller");
} 
```

日志显示“即将呈现视图控制器”和“确实呈现视图控制器”，但“完成处理程序中”从未出现，即使“模态”视图控制器的视图出现在弹出窗口中就好了。

（此外，更改为`animated:NO`不仅不能解决问题，还会导致视觉故障。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:05:09.460

`UIModalPrsentationCurrentContext`仅当您针对 iOS 3.2 或更高版本进行编译时，该样式才可用。无法想象这是问题所在。

的文档`UIModalPrsentationCurrentContext`还说：

> 在弹出窗口中呈现视图控制器时，仅当过渡样式为 UIModalTransitionStyleCoverVertical 时才支持此呈现样式。尝试使用不同的转换样式会触发异常。但是，如果父视图控制器不在弹出窗口中，您可以使用其他转换样式（部分卷曲转换除外）。

这是一个奇怪的问题。

你有没有机会在 iPhone 和 iPad 上运行不同版本的 iOS？

# c++ - c++: sizeof(int[3]) 中的 int[3] 是什么

> ID：14343481
> 
> 赞同：1
> 
> 时间：2013-01-15T17:36:29.507
> 
> 标签：c++

这是我的例子：

```
#include "stdafx.h"
#include <iostream>
using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    int ar[][3] = {1, 2, 3, 4, 5, 6, 7};
    //cout << int[3]<<endl; // error C2062: type 'int' unexpected.
    cout << "sizeof(ar) / sizeof(int[3])  "<< sizeof(ar) / sizeof(int[3]) << endl;; 

    system("pause");

    return 0;
} 
```

它来自一本书，但没有给出解释。这里的 int[3] 是什么，为什么在这种情况下它只作为 sizeof 的参数起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T17:37:56.837

`int[3]`是一个类型声明，表示一个由三个整数组成的数组。

您的注释代码给出了错误，因为您不能将类型用作变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T17:37:50.317

`sizeof(int[3])`是由三个整数组成的数组的大小，以字节为单位。`sizeof`不是在程序运行时调用的实际函数 - 它在编译时被解析。`sizeof(ar) / sizeof(int[3])`将为您提供数组中的行数，因为每行的长度为 3 个整数（您将其声明为`int ar[][3]`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T17:52:17.113

宣言

```
int ar[][3] = {1, 2, 3, 4, 5, 6, 7}; 
```

用于整数三元组数组 - 它是一个二维数组。

表达式的大小

```
cout << "sizeof(ar) / sizeof(int[3])  "<< sizeof(ar) / sizeof(int[3]) << endl; 
```

打印您获得的*完整*三元组的数量。最后一个整数 7 不会落入任何三元组。您应该看到 2 打印出来。 `ar[0]`将包含`{1, 2, 3}`并将`ar[1]`包含`{4, 5, 6}`.

# azure - 如何生成同步代理密钥（新门户）

> ID：14343483
> 
> 赞同：0
> 
> 时间：2013-01-15T17:36:33.907
> 
> 标签：azure, azure-data-sync

有人知道新 Azure 门户中的数据同步代理密钥生成器在哪里吗？我找到的旧示例参考旧门户

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:27:10.587

如果在新的 Azure 门户（HTML 版本）中找不到某些功能，您可以随时切换回旧的 Azure 门户（Silverlight 版本）。

要执行切换，请单击右上角菜单中的上*一个门户*

![以前的门户](../Images/94d7515b698d48ef87c05a137953562f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:22:51.920

这应该在新门户中可用。

在门户中添加代理后，您应该会在底部找到一个链接，上面写着“管理密钥”

![在此处输入图像描述](../Images/d436531b7e012b8ba1fb3812dcc4889a.png)

# sql - 使用数据透视动态添加会计月份的 sql 查询

> ID：14343484
> 
> 赞同：2
> 
> 时间：2013-01-15T17:36:34.937
> 
> 标签：sql, sql-server-2008, pivot

```
ALTER PROCEDURE [dbo].[_sp_GetDMActivityTrackerReport]
@CoachId VARCHAR(7),
@Month INT,
@FiscalYear INT
AS 
BEGIN    

INSERT @FiscalMonth (ID,Month,NbHolidays,MonthDate,TotalDays)
EXECUTE dbo._sp_GetFiscalMonths @Month, @FiscalYear

SELECT PreparationID,CoachId,UserID, MemberID,
[Rep Name], isnull(April,0) April, isnull(May,0) May, isnull(June,0)June,
isnull(July,0) July, isnull(August,0) August, isnull(September,0) September, 
isnull(October,0) October, isnull(November,0) November,
isnull(December,0) December, isnull(January,0) January, isnull(February,0) February,
isnull(March,0) March,isnull((isnull(November,0) + isnull(December,0) + 
isnull(January,0) + isnull(February,0) + isnull(March,0) + isnull(April,0) +
isnull(May,0) + isnull(June,0) + isnull(July,0) + isnull(August,0) +
isnull(September,0) + isnull(October,0)),0) as [Total Field TIME] 

FROM
(
SELECT up.PreparationID,tt.UserId [CoachId],up.UserID, utm.MemberID, 
(ui.FirstName + ' ' + ui.LastName) AS [Rep Name],DateName(Month,nft.MonthPeriodStart) [Month], sum(nft.Quantity) [Days]

FROM TransferedTime tt
INNER JOIN UPreparation up ON tt.PreparationID = up.PreparationID 
RIGHT JOIN UTeamMembers utm ON tt.UserId = utm.CoachID AND utm.MemberID = up.UserID
INNER JOIN UserInfo ui ON utm.MemberID = ui.UserID
LEFT JOIN NonFieldTime nft ON nft.UserId = tt.UserId 
AND tt.MonthPeriodFrom = nft.MonthPeriodStart
AND datename(Month,nft.MonthPeriodStart) + '-'+ substring(datename(Year,nft.MonthPeriodStart),3,2) IN 
(SELECT Month +'-' +substring(datename(Year,MonthDate),3,2) [Months] FROM @FiscalMonth)
WHERE utm.MemberID IN (SELECT MemberID FROM UTeamMembers WHERE CoachID = @CoachId)
GROUP BY up.PreparationID,tt.UserId,up.UserID, utm.MemberID,
(ui.FirstName + ' ' + ui.LastName),DateName(Month,nft.MonthPeriodStart)) src 
pivot 
(
sum(Days)
for Month in (April, May, June, July, August, September, October,November, December, January, February, March)
)
piv 

@Fiscalmonth returns:
Id, Month, NbHolidays, MonthDate
1   April     1 4/1/2012
2   May   2 5/1/2012 
3   June      3 6/1/2012
4   July      4 7/1/2012
5   August    5 8/1/2012
6   September 6 9/1/2012
7   October   7 10/1/2012
8   November  8 11/1/2012
9   December  9 12/1/2012
10  January   10    1/1/2013
11  February  11    2/1/2013
12  March     12    3/1/2013 
```

我有一个根据会计年度生成报告的存储过程。这里的财政年度和财政月份来自数据库现在我在动态生成此报告时遇到了问题，正如你所看到的，我已经修复了月份年份，这不是一个好习惯我希望以某种方式改变财政月份数据库然后我的报告相应地反映。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T18:24:06.213

您将需要使用动态 SQL 来执行此操作。*粗略*的代码将与此类似：

```
ALTER PROCEDURE [dbo].[_sp_GetDMActivityTrackerReport]
    @CoachId VARCHAR(7),
    @Month INT,
    @FiscalYear INT
AS 
BEGIN    

INSERT @FiscalMonth (ID,Month,NbHolidays,MonthDate,TotalDays)
EXECUTE dbo._sp_GetFiscalMonths @Month, @FiscalYear

DECLARE @cols AS NVARCHAR(MAX),
    @colsNull AS NVARCHAR(MAX),
    @colsSum AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(DateName(Month,nft.MonthPeriodStart)) 
                    from NonFieldTime nft
                    where datename(Month,nft.MonthPeriodStart) + '-'+ substring(datename(Year,nft.MonthPeriodStart),3,2) 
                        IN (SELECT Month +'-' +substring(datename(Year,MonthDate),3,2) [Months] 
                            FROM +@FiscalMonth)
            FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'),1,1,'')

select @colsNull = STUFF((SELECT distinct ', IsNull(' + QUOTENAME(DateName(Month,nft.MonthPeriodStart))+', 0) as '+DateName(Month,nft.MonthPeriodStart)
                    from NonFieldTime nft
                    where datename(Month,nft.MonthPeriodStart) + '-'+ substring(datename(Year,nft.MonthPeriodStart),3,2) 
                        IN (SELECT Month +'-' +substring(datename(Year,MonthDate),3,2) [Months] 
                            FROM +@FiscalMonth)
            FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)') ,1,1,'')

select @colsSum = STUFF((SELECT distinct '+ IsNull(' + QUOTENAME(DateName(Month,nft.MonthPeriodStart))+', 0)'
                    from NonFieldTime nft
                    where datename(Month,nft.MonthPeriodStart) + '-'+ substring(datename(Year,nft.MonthPeriodStart),3,2) 
                        IN (SELECT Month +'-' +substring(datename(Year,MonthDate),3,2) [Months] 
                            FROM +@FiscalMonth)
            FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)') ,1,1,'')+' as [Total Field TIME] '

set @query = 'SELECT PreparationID,CoachId,UserID, MemberID,
                    [Rep Name], ' + @colsNull + ', '+ @colsSum+' 
             from 
             (
                SELECT up.PreparationID,
                    tt.UserId [CoachId],
                    up.UserID, utm.MemberID, 
                    (ui.FirstName + '' '' + ui.LastName) AS [Rep Name],
                    DateName(Month,nft.MonthPeriodStart) [Month], 
                    sum(nft.Quantity) [Days]
                FROM TransferedTime tt
                INNER JOIN UPreparation up 
                    ON tt.PreparationID = up.PreparationID 
                RIGHT JOIN UTeamMembers utm 
                    ON tt.UserId = utm.CoachID AND utm.MemberID = up.UserID
                INNER JOIN UserInfo ui 
                    ON utm.MemberID = ui.UserID
                LEFT JOIN NonFieldTime nft 
                    ON nft.UserId = tt.UserId 
                    AND tt.MonthPeriodFrom = nft.MonthPeriodStart
                    AND datename(Month,nft.MonthPeriodStart) + ''-''+ substring(datename(Year,nft.MonthPeriodStart),3,2) IN 
                        (SELECT Month +''-'' +substring(datename(Year,MonthDate),3,2) [Months] 
                         FROM +@FiscalMonth)
                WHERE utm.MemberID IN (SELECT MemberID 
                                        FROM UTeamMembers 
                                        WHERE CoachID = '+@CoachId+')
                GROUP BY up.PreparationID,tt.UserId,up.UserID, utm.MemberID,
                (ui.FirstName + '' '' + ui.LastName),DateName(Month,nft.MonthPeriodStart)
            ) x
            pivot 
            (
                sum(Days)
                for Month in (' + @cols + ')
            ) p '

execute(@query) 
```

我的建议不是使用临时表`@FiscalMonth`，而是为此创建一个永久的表。使用动态 sql 时，查询 perm 表而不是 temp 表会简单得多。临时表可能超出动态查询的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:24:14.087

Oracle 中有 PIVOT XML 选项，可让您避免硬编码。我不确定 SQL Server 中是否有这样的选项。你可以写 smth lk 这个 - 也是 Oracle 查询：

```
SELECT count(decode(state,'FL',custid)) "FL"
     , count(decode(state,'NY',custid)) "NY"
     , count(decode(state,'CA',custid)) "CA"
FROM scott.customer
GROUP BY state
/ 
```

用月份等替换状态......输出：

```
FL  NY  CA
--- --- ---
0   2   0
5   0   8 
```

甲骨文示例：

[http://www.oracle-base.com/articles/11g/pivot-and-unpivot-operators-11gr1.php](http://www.oracle-base.com/articles/11g/pivot-and-unpivot-operators-11gr1.php)

```
SELECT * FROM   
(
 SELECT product_code, quantity
   FROM   pivot_test
)
PIVOT XML
(
 SUM(quantity) AS sum_quantity 
  FOR (product_code) IN (SELECT DISTINCT product_code 
                        FROM   pivot_test
                       WHERE  id < 10)
)
/ 
```

# iphone - iOS 上是否有适用于非自动对焦相机的免费条码扫描 SDK？

> ID：14343485
> 
> 赞同：21
> 
> 时间：2013-01-15T17:36:40.037
> 
> 标签：iphone, ios, cocoa-touch, barcode, barcode-scanner

我知道在 StackOverflow 上有很多类似的问题，但是这个问题非常具体，所以我不是在这里寻找典型的“Zbar”答案。

我在带有自动对焦相机的设备上使用 Zbar SDK 进行条码扫描（UPC、EAN）。但我需要一个**便宜或免费的非自动对焦设备**，如 iPad 2 和 iPod touch 4G。我的应用是付费的或使用应用内购买。

我看过`Scandit`, `RedLaser`, `ShopSavvy`,`VSBarcodeReader`并且他们都想要高额的存款费用（比如 1500 美元到 5000 美元或更多），并希望减少约 10%。我还看到`Pic2Shop`它是免费的（它使用 VSBarcodeReader 的扫描仪），但我不喜欢用户必须跳转到另一个应用程序才能使用扫描。

这是我发现的不符合我需求的内容：

*   红色激光（付费）
*   ScandIt（付费）
*   VSBarcodeReader（付费）
*   ShopSavvy（付费）
*   codeREADr（付费）
*   Softek（无自动对焦）
*   zxing（无自动对焦）
*   Zbar（无自动对焦）
*   DDH 软件（无自动对焦）
*   QuickMark（无自动对焦）
*   iCody（将用户从应用程序中弹出；用户必须下载应用程序）
*   Pic2Shop（将用户退出应用程序；用户必须下载应用程序）

这表明对于开源项目或想要以更便宜的价格与大男孩竞争的人来说，有一个很好的市场。

任何人都有任何可以很好地工作和整合的好选择吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T06:24:30.570

当我看到你的问题时，它真的表明了你的努力。所以，大量的研究..我不知道你为什么不检查 Grabba..它是免费的并且支持 iPod touch 4G 但我不知道它是否支持 ipad 2 与否。所以，我正在分享链接，请查看。

[http://grabba.com/supported-devices/apple](http://grabba.com/supported-devices/apple)

Mirasense 的 Scandit SDK 条码扫描器完全支持 iPad 2..

[http://www.mirasense.com](http://www.mirasense.com)

但正如你已经提到它不是免费的..

您还可以检查 PDF417 条码阅读器，它是免费的..

对不起，只有我能帮到你了..如果你的问题还没有解决，请告诉我..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T21:43:37.187

在具有固定焦距摄像头的设备上扫描条码的普遍问题是，对于较小的条码，很难从摄像头为库中获得合适的输入图像：图像要么不够清晰，要么太小。

对于更大的条码，我在 iPad 2 上使用 ZXing 有很好的体验，尽管它官方不支持定焦摄像头。你应该试一试。

# python - 如果给定的两个日期字段与模型django中的起始日期和日期一致，如何过滤它们

> ID：14343488
> 
> 赞同：0
> 
> 时间：2013-01-15T17:36:48.147
> 
> 标签：python, django

我有来自 2 个日期选择器的 2 个日期 date1 = '2013-01-22' date2 = '2013-01-28' 我有一个像这样的模型

```
class SampleModel(models.Model):
    item = models.CharField()
    from_date = models.DateField()
    to_date = models.DateField() 
```

我的任务是知道 date1 和 date2 之间的某些日期**是否**介于 from_date 和 to_date 之间（同一项目）

因此，例如，如果我的 from_date 为 '2013-01-24' 和 to_date '2013-01-27'，则输入 date1 和 date2 中的一些日期（即 24 25 26 27 天）包括在内并提示 true .

这就像一个十字路口。有任何疑问吗？

from_date 上的 gte 和 to_date 上的 lte 不起作用，因为 date1 小于 from date 并且 date2 大于 to date

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:07:19.477

那是一道数学题。这个查询应该可以解决问题：

```
date1 <= to_date and date2 >= from_date 
```

**编辑**

下面的 django 语句应该给你想要的结果：

```
SampleModel.objects.filter(to_date__gte=date1, from_date__lte=date2) 
```

# python - Django DatabaseError - 没有这样的保存点

> ID：14343490
> 
> 赞同：4
> 
> 时间：2013-01-15T17:36:57.867
> 
> 标签：python, django, postgresql, celery

我的 Django 应用程序中有一个 Celery 任务调用的函数，它处理 CSV 文件中的每一行，并尝试使用模型将每一行的信息插入 PostgreSQL 数据库，如下所示：

```
reader = csv.DictReader(csvfile, dialect=csv.get_dialect('excel'))
for row_number, row in enumerate(reader):
    try:
        ...
        customer, created = Customer.objects.get_or_create(
            first_name = row['First Name'],
            last_name = row['Last Name'],
            email = row['Email'],
            account_owner = account_owner
        )
        ...
    except Exception, e:
        message = "%s: %s\n" % (type(e).__name__, e)
        sys.stderr.write("%s\n" % message) 
```

`Customer.objects.get_or_create`在循环的第一次迭代中出现 以下错误：`DatabaseError: no such savepoint`

然后我会得到`DatabaseError: current transaction is aborted, commands ignored until end of transaction block`之后的每次迭代。

我已经成功地将一条记录插入（使用 SQL 手动）到该表中，该记录与脚本将提供的信息相同。我也尝试过使用保存点，但没有运气：

```
sid = transaction.savepoint()
customer, created = Customer.objects.get_or_create(
    first_name = row['First Name'],
    last_name = row['Last Name'],
    email = row['Email'],
    account_owner = account_owner
)
transaction.savepoint_commit(sid) 
```

这发生在我的开发机器上，它从 Homebrew 安装了 PostgreSQL 9.1。显然，主要目标是解决这个问题，但任何有助于调试 Celery 任务或定位我的 Postgres 日志文件的指针也会有所帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T22:16:27.480

[在做了一些更多的研究之后](https://code.djangoproject.com/ticket/15117)，看起来这个的根本原因在于`IntegrityError`它试图强制一个保存点回滚，它不再存在了。我修复了`IntegrityError`并且我假设*没有保存点*的问题已经修复。`IntegrityError`在我调试时立即看到仍然会很棒......

[使用这些说明](https://web.archive.org/web/20140113084024/http://labs.kortina.net/posts/turn-on-postgres-query-logging-in-os-x/)启用了日志记录，我看到由 生成的插入语句`get_or_create`违反了外键约束。

# java - 如何将系统性能值量化为单个性能值

> ID：14343491
> 
> 赞同：1
> 
> 时间：2013-01-15T17:37:00.583
> 
> 标签：java, performance, operating-system, system, metric

我有一个项目，我在一个网格中有多个节点，它们作为存储和计算节点运行。这些节点是异构的，从专用服务器硬件到[alix 板](http://pcengines.ch/alix.htm)，甚至是运行 OpenWRT 的 Mikrotik 路由器板（尽管主要由 alix 板组成）。

我正在通过[sigar java API](http://www.hyperic.com/products/sigar)收集系统性能指标，例如 RAM、SWAP 和 CPU 使用率。这工作得很好。

我的下一个任务是获取这些性能值并将它们组合起来，以便我能够以这样一种方式对我的主机进行排序，以便我可以说出哪个主机最能处理计算请求。这几乎可以被认为是 Windows 使用 Windows 性能指数为您的计算机提供性能分数的相同方式。

我的第一次尝试是添加 RAM、SWAP 和 CPU 使用率的使用百分比（对于 Linux，我将负载值缩放到 0 到 1 之间的值）。然后选择得分最低的主机进行计算操作。

有没有人对如何做到这一点有更好的想法。我的方式感觉非常“hacky”，而不是我想要处理这个项目中的工作的那种方式。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:12:51.517

我会估计任务的要求并放置一台机器来匹配。你可能有很多小工作和一份大工作。如果您先分配小型作业，则最大的服务器可能很忙，而较小的服务器可能太小了。您可能希望将小任务分配给小服务器，而将大机器留给更大的任务。

您还将有需要更多 CPU 或更多内存的任务。

我不会考虑使用 SWAP。Java 不能在 SWAP 空间中运行，因此您需要确保它永远不需要它。

# android - java.lang.NumberFormatException (parse.Int)

> ID：14343492
> 
> 赞同：0
> 
> 时间：2013-01-15T17:37:02.237
> 
> 标签：android

市场上发布的应用程序出现错误：

java.lang.NumberFormatException

堆栈下方。

是这个代码的原因吗？

```
fade = Integer.parseInt(ListPreference); 
```

我看到“其他”设备受到了这次崩溃的影响。任何的想法？

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.app/com.example.app.Notify}: java.lang.NumberFormatException: unable to parse '' as integer
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
at android.app.ActivityThread.access$1500(ActivityThread.java:121)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3768)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NumberFormatException: unable to parse '' as integer
at java.lang.Integer.parseInt(Integer.java:362)
at java.lang.Integer.parseInt(Integer.java:332)
at com.example.app.Notify.onCreate(Notify.java:33)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:38:51.700

`java.lang.NumberFormatException: unable to parse '' as integer at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)`

==> 看来您正在尝试解析一个空字符串。您应该在 try/catch 块中包含解析操作并处理格式错误的输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:38:56.757

如日志：

> NumberFormatException：无法将“”解析为整数

您正在尝试将空间解析为 integer 。在将字符串值解析为整数之前检查 null 或空

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T17:41:50.497

实际上， String 中发生了任何符号或字符`ListPreference`，

最好处理这个异常。

```
try {
     fade = Integer.parseInt(ListPreference);
} catch (NumberFormatException e) {
        Log.e("Exception",e.toString());
} 
```

**更新：**

看看**雅加达公地**：

[NumberUtils.isNumber()](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/math/NumberUtils.html#isNumber%28java.lang.String%29)

这可用于检查给定字符串是否为数字。

同样在使用`String ListPreference`刚刚删除的空格之前，使用`trim()`.

使用`ListPreference.trim()`and也检查length`ListPreference`是否大于1。

像，`ListPreference.length() > 1`

# django - 在 django 中有没有用视图装饰器替换 urlpatterns 的标准方法？

> ID：14343494
> 
> 赞同：6
> 
> 时间：2013-01-15T17:37:04.030
> 
> 标签：django, view, decorator, url-pattern

我已经开发了自己的，但似乎这是一件足够好的事情，其他人可能首先想到它并且做得更好；）

目标是能够在您的 myapp/views.py 中编写

```
router = Router(prefix=r'^myapp/')

@router.route(url=r'my/url/here', name="my-great-view")
def myview(request):
    return render_to_response("mytemplate.html", {}) 
```

然后在 urls.py

```
urlpatterns += myapp.views.router.get_patterns() 
```

我还内置了其他一些很酷的装饰器（@jsonview 用于获取返回的字典并做出 json 响应，@use_template 用于获取返回的字典并将其作为上下文传递给定义的模板......）

似乎这种方式使所有内容都更加本地化并且可读。在查看视图函数时，您不必四处搜索以找到它所属的 url 或它的“名称”。

我看到了这个[djangosnippet](http://djangosnippets.org/snippets/395/ "djangosnippet")，但它比我想要的要神奇得多，而且看起来它并没有被普遍采用。

如果没有人制定标准解决方案，我应该清理我的并提交拉取请求给 contrib 吗？

*   这是我目前已经实现的：[magic.py](https://bitbucket.org/jabapyth/notablemind/src/4ced58308f363eb2ede0f128d0ac42cc864f0566/notablemind/notes/magic.py?at=default)

**编辑：** 如果您想要同一视图的多个网址：

```
@router.route(url="my-first-url", kwargs={'foo':'bar'})
@router.route(url="my-second=url", kwargs={'foo':'baz'})
def my_view(...): ... 
```

**当然**，这不一定是*唯一*的方法——普通的 urlpatterns 方法有一些关于它的好处，但是这两种方法并不相互排斥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-10-08T08:54:35.853

常规配置我们有一个主网站`urls.py`。并且`urls.py`包含名为`urlpatterns`.

所以我可以将一些 url_pattern 推入其中。

### 应用程序/views.py

```
from django.urls import path as djpath

URLS = []
URLS_d = {}

def route(path=''):
    def wrapper(func):
        path_name = path or func.__name__
        URLS.append(
            djpath(path_name, func)
        )

        ### below is not important ####
        path_func = URLS_d.get(path_name, None)
        if path_func:
            print(path_func, '<>', func)
            raise Exception('THE same path')
        URLS_d[path_name] = func
        ### above is not important ####

    return wrapper

@route()
def index(req):
    return HttpResponse('hello') 
```

### 网站/urls.py

```
from app.views import URLS

urlpatterns.extend(URLS) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-29T04:17:48.930

如果你使用类基视图，你可以使用[django-request-mapping](https://github.com/sazima/django-request-mapping)，

一个简单的例子

*   视图.py

```
from django_request_mapping import request_mapping

@request_mapping("/user")
class UserView(View):

    @request_mapping("/login/", method="post")
    def login(self, request, *args, **kwargs):
        return HttpResponse("ok")

    @request_mapping("/signup/", method="post")
    def register(self, request, *args, **kwargs):
        return HttpResponse("ok")

    @request_mapping("/<int:user_id>/role/")
    def get_role(self, request, user_id):
       return HttpResponse("ok") 

    @request_mapping("/<int:pk/", method='delete')
    def delete(self, request, pk):
        User.objects.filter(pk=pk).delete()
        return HttpResponse("ok")

@request_mapping("/role")
class RoleView(View):
    # ... 
```

*   网址.py

```
from django_request_mapping import UrlPattern
urlpatterns = UrlPattern()
urlpatterns.register(UserView)
urlpatterns.register(RoleView) 
```

和请求网址是：

```
post:  http://localhost:8000/user/login/
post:  http://localhost:8000/user/signup/
get:  http://localhost:8000/user/1/role/
delete: http://localhost:8000/user/1/
# ... 
```

# sql - 将 Visual Studio 数据库项目与架构文件进行比较时更新脚本

> ID：14343495
> 
> 赞同：2
> 
> 时间：2013-01-15T17:37:04.373
> 
> 标签：sql, visual-studio-2010, comparison, schema

我创建了一个客户数据库的数据库模式文件。我想将此架构文件与我的数据库项目 i Visual Studio 2010 进行比较，以便能够编写与客户程序升级相关的客户数据库所需的架构更改脚本。

对于文件大小问题，我想使用此架构文件 (23MB) 而不是从客户那里获得完整的数据库副本（压缩时为 1352 MB）。

我将 Visual Studio 项目与架构文件进行比较没有问题（没有错误消息或警告），但我找不到获取生成的更新脚本的方法。按“刷新更新脚本”时出现的错误是：“比较指定类型的模式模型时，您无法将更新写入目标”。所有导出选项都被禁用。

当然，我知道我不能将更新写入数据库架构，但这不是我的意图——我想在我们的客户服务器上的数据库上运行更新脚本。

有什么办法可以取出更新脚本吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:11:24.867

我通过多转几圈解决了这个问题：

1.  我在本地 sql-server 上创建了一个空数据库。
2.  我将客户数据库中的架构与 Visual Studio 中作为目标的空数据库进行了比较，并使用 Visual Studio 创建的更改脚本更新了空数据库。
3.  我将更新后的数据库与 TFS 中的新数据库模式进行了比较。
4.  我从 Visual Studio 获得的新更改脚本已部署到我们的客户数据库中。

希望这对某人有所帮助，至少我从中学到了（并希望在下一个版本之前记住这一点）。

# c# - C# 编译器如何使用泛型？

> ID：14343498
> 
> 赞同：4
> 
> 时间：2013-01-15T17:37:25.650
> 
> 标签：c#, .net, generics, cil, cil-metadata

在 C++ 中，`template`声明需要在头文件中（除非您明确声明模板类型），我明白为什么。

我不明白的是，如果 C# 编译器没有`.cs`要检查的文件，它如何处理泛型。我怀疑它会检查 CIL，因为这将是一个处理器密集型操作。我知道它能够从元数据中提取类型信息，但是如果泛型函数的代码也被编码，那么对于可执行文件来说将是一个巨大的膨胀。

那么，编译器又是如何使用泛型的呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T17:45:41.050

我猜您是在询问 C# 编译器如何使用在引用程序集中定义的泛型类型，而不是询问 C# 编译器如何编译定义泛型类型的 .cs 文件（因为您说“如果它没有.cs 文件”）。

泛型类型和成员在 IL 中被编码为泛型。封闭的泛型类型和成员由 jit 编译器在运行时构造。因此，对您的问题的简单回答是“C# 编译器通过发出导致 jit 编译器在运行时构造它们的 IL 来处理泛型类型。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T17:39:39.863

C# 编译器从程序集中读取有关类型的元数据，无需查看 IL。您可以使用反射编写类似的代码来分析泛型类型。

C# 编译器也没有理由查看方法的实现。

请检查[C# 和 Java 中的泛型...和 ​​C++ 中的模板有什么区别？](https://stackoverflow.com/questions/31693/what-are-the-differences-between-generics-in-c-sharp-and-java-and-templates-i)以及类似的[搜索结果](http://www.bing.com/search?q=generics+c%23+vs+c%2B%2B) ，原因是 C# 不需要知道方法的实现（与 C++ 不同） - C# 中的所有约束都是从类/方法签名中知道的，这与 C++ 模板中的类型只需要匹配主体内使用的方法的名称不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T18:43:19.400

让我试着把事情弄清楚……

泛型存储为 IL，包括元数据中的参数和约束。泛型类型也是类型，它们在运行时转换为运行时类型。这是与不存在模板类型而仅存在派生类型的 C++ 的主要区别；在 C# 中，通用类型存在于 DLL 中，但派生类型不存在（直到它们在运行时创建）。

但是，编译器确实会做一些事情。例如，如果您有一个 List.Add(T)，那么 IL 中的签名就是这样。但是，如果您调用它，它会使用 List.Add(Foo) 作为方法来解析该方法。例如，在您的 IL 中，它会显示如下内容（加载字段时）：

```
ldfld class [mscorlib]System.List`1<Foo> Bar::variable 
```

请注意，这里是“Foo”而不是“T”。

此外，如果您在泛型定义中对 T 施加约束，则会根据元数据在编译时检查它们。

在这一点上，我想指出一些完全不同但相关的东西。C# 通过延迟生成类型（通常）获得性能。这也与 C++ 非常不同。如果您尝试使用静态构造函数以及何时调用它们，您可以看到这一点。

# javascript - 如何使用 Street View api 获取放大窗格的 latlng (gps) 坐标？

> ID：14343500
> 
> 赞同：0
> 
> 时间：2013-01-15T17:37:39.210
> 
> 标签：javascript, google-maps-api-3, google-street-view

我不确定这是否可能；但我想做的是在谷歌的街景中获取放大窗格的gps坐标（我认为这是它的名字？它通常由一个半透明的矩形或椭圆形表示，请参见下图）：

[http://tinypic.com/r/5jy8n6/6](http://tinypic.com/r/5jy8n6/6)

面板在鼠标移动时围绕街景移动，并呈现在建筑物、墙壁或道路旁边。

理想情况下，我想绑定到鼠标移动事件并获取放大窗格的位置，但是在阅读了 API 之后，这似乎是不可能的。

我可以通过在全景图上添加“position_changed”事件的侦听器来从全景图中获取纬度和纬度坐标：

```
 google.maps.event.addListener(panorama, 'position_changed', function(  ) {
     console.log( 'position', panorama.getPosition() );
 }); 
```

我还可以通过收听 pov_changed 来获取航向和俯仰信息：

```
google.maps.event.addListener(panorama, 'pov_changed', function( ) {

    console.log( 'pov', panorama.getPov() );
}); 
```

我正在使用 Google Maps Javascript API V3。

谢谢你的时间。

更新 ====> 如果我查看全景生成的源并打开 SVG 对象，我可以看到两个在鼠标移动时被修改的对象。代表道路面板的 Ellipse 对象：

```
<ellipse fill="white" fill-rule="evenodd" visibility="hidden" fill-opacity="0.5" cx="658" cy="223" rx="30" ry="5"></ellipse> 
```

还有一个路径对象，它代表建筑物或墙上的面板。

```
<path fill="white" fill-rule="evenodd" visibility="hidden" fill-opacity="0.5" d="M400 53 L402 -22 L299 -65 L296 24 Z"></path> 
```

因此，我可能会找到窗格的尺寸，但不确定是否可以使用此信息从用户当前位置找到窗格的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:17:15.750

您无法获得有关此窗格的任何详细信息。

此窗格是 flash-layer 的一部分，只要它不暴露窗格的任何详细信息，您将无法获得该位置。鼠标事件在这里没有帮助，因为您不知道窗格应用到的对象的距离。

# lua - io.read() 不工作

> ID：14343502
> 
> 赞同：2
> 
> 时间：2013-01-15T17:37:41.037
> 
> 标签：lua

我刚开始研究一个非常基本的计算器程序，它运行良好，我无法让它在完成计算后保持程序打开。io.read() 似乎不起作用。我的代码如下：

```
promptmethod = "Would you like to use addition, subtraction, multiplication, or           division?"
promptnumber1 = "Enter a number:"
promptnumber2 = "Enter another number:"
anotherprompt = "Would you like to make another calculation?"

print(promptmethod)
usermethod = io.read("*line")
print(promptnumber1)
number1 = io.read("*number")
print(promptnumber2)
number2 = io.read("*number")

if usermethod == "addition" then
answer = number1 + number2
stringanswer = "Your calculation is " .. number1 .. " + " .. number2 .. " = " .. answer
elseif usermethod == "subtraction" then
answer = number1 - number2
stringanswer = "Your calculation is " .. number1 .. " - " .. number2 .. " = " .. answer
elseif usermethod == "multiplication" then
answer = number1 * number2
stringanswer = "Your calculation is " .. number1 .. " × " .. number2 .. " = " .. answer
elseif usermethod == "division" then
answer = number1 / number2
stringanswer = "Your calculation is " .. number1 .. " ÷ " .. number2 .. " = " .. answer
else
error("Invalid operation or values.")
end

print(stringanswer)

io.read() 
```

有谁知道为什么会发生这种情况？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T18:20:16.550

一个更简单的例子：

```
io.read('*number')
io.read() 
```

问题是`read('*number')`不消耗数字后的换行符。由于它仍然位于输入流上，因此当您调用`io.read`（默认为读取一行）时，它会立即返回。

要解决这个问题，只需再打`io.read`一次。

# c# - 更改按钮背景颜色

> ID：14343508
> 
> 赞同：1
> 
> 时间：2013-01-15T17:38:04.047
> 
> 标签：c#, xaml, button, windows-8, windows-runtime

总 XAML 菜鸟在这里。我在确定为按下状态更改 Button 元素的背景颜色的正确方法时遇到问题。似乎默认按钮背景是白色的。我如何使它成为其他颜色（具有透明度）。代码片段会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:43:01.050

好吧，您可以使用 Microsoft Blend 更轻松地完成工作，并且无需 xaml 麻烦。

但是您仍然应该检查生成的 XAML 以从中学习。

基本上你需要做的是创建一个样式来处理按钮的外观，具体取决于状态。查看此堆栈问题的一些示例代码的答案：[Change Button Image On Hover or Click](https://stackoverflow.com/questions/10524508/change-button-image-on-hover-or-click)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T04:46:12.743

Button 的默认模板使用名为“ButtonPressedBackgroundThemeBrush”的 Pressed 状态背景资源。如果您希望为应用程序中的所有按钮更改此设置，您可以在 App.xaml 资源中通过使用相同的键添加 Brush 来覆盖此设置。这是一个使用纯红色的示例：

```
<Application.Resources>
    <ResourceDictionary>
    <SolidColorBrush x:Key="ButtonPressedBackgroundThemeBrush" Color="Red"/>
    </ResourceDictionary>
</Application.Resources> 
```

如果您只希望单个按钮使用不同的背景，您可以覆盖模板。最简单的方法是使用 Blend 并右键单击按钮，然后选择 Edit Template->Edit a Copy。这将为您生成 XAML 的副本，您可以使用“状态”选项卡或手动编辑“已按下”状态的 XAML。

# c - AC 编译器可以在运行时消除这个条件测试吗？

> ID：14343511
> 
> 赞同：3
> 
> 时间：2013-01-15T17:38:10.297
> 
> 标签：c, optimization, configuration

假设我有这样的伪代码：

```
main() {
    BOOL b = get_bool_from_environment(); //get it from a file, network, registry, whatever
    while(true) {
        do_stuff(b);
    }
}

do_stuff(BOOL b) {
    if(b)
        path_a();
    else
        path_b();
} 
```

现在，既然我们知道外部环境可以影响*可能*`get_bool_from_environment()`产生真假结果，那么我们知道真假分支的代码必须包含在二进制文件中。我们不能简单地省略或从代码中删除。*`if(b)``path_a();``path_b();`*

 *但是——我们只设置`BOOL b`了一次，并且我们总是在程序初始化后重用相同的值。

如果我要制作这个有效的 C 代码，然后使用 编译它`gcc -O0`，`if(b)`那么每次`do_stuff(b)`调用时都会在处理器上重复评估，在我看来，这会将不必要的指令插入管道中，用于基本上是静态的分支初始化后。

如果我假设我实际上有一个像 一样愚蠢的编译器，我会`gcc -O0`重写这段代码以包含一个函数指针和两个单独的函数`do_stuff_a()`和执行两条路径之一。然后，在 中，我将根据 的值分配函数指针，并在循环中调用该函数。这消除了分支，尽管它确实为函数指针取消引用添加了内存访问（由于架构实现，我[认为](https://stackoverflow.com/questions/2438539/does-function-pointer-make-the-program-slow)我真的不需要担心）。`do_stuff_b()``if(b)``main()``b`

即使在原则上，编译器是否有可能采用与原始伪代码示例相同样式的代码，并意识到一旦在 中`b`分配了一次值，就不需要进行测试`main()`？如果是这样，这个编译器优化的理论名称是什么，你能否举一个实际的编译器实现（开源或其他）的例子？

我意识到编译器不能在运行时生成动态代码，原则上唯一可以做到这一点的系统类型是字节码虚拟机或解释器（例如 Java、.NET、Ruby 等）——所以问题仍然存在是否有可能**静态**地执行此操作并生成包含`path_a();`分支和`path_b()`分支的代码，但避免为每次调用评估*条件测试* 。`if(b)``do_stuff(b);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T19:56:11.057

如果您告诉编译器进行优化，则很有可能`if(b)`只评估一次。

稍微修改给定的示例，使用标准`_Bool`而不是`BOOL`，并添加缺少的返回类型和声明，

```
_Bool get_bool_from_environment(void);
void path_a(void);
void path_b(void);

void do_stuff(_Bool b) {
    if(b)
        path_a();
    else
        path_b();
}

int main(void) {
    _Bool b = get_bool_from_environment(); //get it from a file, network, registry, whatever
    while(1) {
        do_stuff(b);
    }
} 
```

`clang -O3`[clang-3.0]生产的程序集的（相关部分）是

```
 callq   get_bool_from_environment
    cmpb    $1, %al
    jne     .LBB1_2
    .align  16, 0x90
.LBB1_1:                                # %do_stuff.exit.backedge.us
                                        # =>This Inner Loop Header: Depth=1
    callq   path_a
    jmp     .LBB1_1
    .align  16, 0x90
.LBB1_2:                                # %do_stuff.exit.backedge
                                        # =>This Inner Loop Header: Depth=1
    callq   path_b
    jmp     .LBB1_2 
```

`b`仅测试一次，然后根据 的值跳入或`main`进入无限循环。如果和足够小，它们将被内联（我强烈期望）。使用and ，由 clang 生成的代码将在循环的每次迭代中进行评估。`path_a``path_b``b``path_a``path_b``-O``-O2``b`

gcc (4.6.2) 的行为与以下类似`-O3`：

```
 call    get_bool_from_environment
    testb   %al, %al
    jne     .L8
    .p2align 4,,10
    .p2align 3
.L9:
    call    path_b
    .p2align 4,,6
    jmp     .L9
.L8:
    .p2align 4,,8
    call    path_a
    .p2align 4,,8
    call    path_a
    .p2align 4,,5
    jmp     .L8 
```

奇怪的是，它展开了 for 的循环`path_a`，但没有展开 for `path_b`。使用`-O2`or `-O`，它会调用`do_stuff`无限循环。

因此

> 即使在原则上，编译器是否有可能采用与原始伪代码示例相同样式的代码，并意识到一旦在 中`b`分配了一次值，就不需要进行测试`main()`？

答案是肯定的 是的，编译器有可能认识到这一点并利用这一事实。好的编译器在被要求进行优化时会这样做。

> 如果是这样，这个编译器优化的理论名称是什么，你能否举一个实际的编译器实现（开源或其他）的例子？

我不知道优化的名称，但这样做的两个实现是 gcc 和 clang（至少，足够新的版本）。*

# java - 集合排序 - 正、0、负序

> ID：14343513
> 
> 赞同：0
> 
> 时间：2013-01-15T17:38:20.377
> 
> 标签：java, collections, integer

我有一个员工集合。每个员工都有一个 ID。此 ID 号的格式为 -x >= 0 >= x 。我必须将员工排序为 0...x -1....-x。我怎样才能做到这一点？？

```
List<Employee> empSort = new ArrayList(em.getEmployees());
Collections.sort(empSort, new Comparator<Employee>() {
                @Override
                public int compare(Employee p1, Employee p2) {
                   // WHAT LOGIC SHOULD I DO THERE TO HAVE THEM
                                      SORTED AS 0...x -1....-x
                }
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:41:55.537

晚餐时考虑一下，我更喜欢这个。

```
int sign1 = (p1 >= 0) ? 1 : -1;
int sign2 = (p2 >= 0) ? 1 : -1;

int result = Integer.compare(sign2, sign1);

if( result == 0){
    // same sign
    result = sign1 * Integer.compare(p1, p2);
}
return result; 
```

输出仍然是：

```
[0, 0, 0, 1, 3, 5, -1, -2] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:44:53.950

你不能做三个测试吗？

非负先于负。 `return`如果恰好一个是负数。

如果两者都是负数，则较大的值在较小的值之前。

如果两者都是非负数，则较小的值在较大的值之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T17:57:29.603

比较返回负整数、零或正整数，因为第一个参数小于、等于或大于第二个。

```
if( p1.id * p2.id < 0 ) {
    // opposite sign
    // if p1 is negative, p2 is positive, p1 is greater than p2
    // otherwise p1 is positive, p2 is negative, p1 is less than p2
    return -p1.id;
}
if( p1.id > 0 && p2.id > 0 || p1.id + p2.id >= 0) {
    // both positive, normal ordering or a zero and a positive number, also normal ordering
    return p1.id - p2.id;
}
if( p1.id <0 && p2.id < 0 ){
    // both negative, inverse ordering
    return p2.id - p1.id;
}
// zero and a negative number, zero comes first
if( p1.id == 0 ) {
    return -1;
}
return 1; 
```

[0, 0, 0, 1, 3, 5, -1, -2]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T21:49:08.223

这很模糊，但你可以做到

```
Integer.compare(x >= 0 ? x + Integer.MIN_VALUE : ~x, y >= 0 ? y + Integer.MIN_VALUE); 
```

甚至更晦涩

```
Integer.compare(x ^ (-1 << ~(x >> -1)), y ^ (-1 << ~(y >> -1))) 
```

注意：相同的公式适用于`long`s ;)

这将 [0, Integer.MAX_VALUE] 映射到 [Integer.MIN_VALUE, -1] 并且 [Integer.MIN_VALUE, -1] 被翻转到 [0, Integer.MAX_VALUE]

# python - 重复的、意外的 Django 查询集评估

> ID：14343515
> 
> 赞同：1
> 
> 时间：2013-01-15T17:38:23.343
> 
> 标签：python, django

我在 Django 集成测试中有以下代码片段：

```
alerts = models.DroppedDom.objects.all()
print 123321, alerts
print 123321, alerts
print 123321, alerts
time.sleep(1)
print 123321, alerts 
```

在一个单独的线程中，我对 DroppedDom 表进行了一次插入。

输出：

```
123321 []
123321 []
123321 []
123321 [<DroppedDom: DroppedDom object>] 
```

手工做类似的事情（没有线程）会得到相同的结果。这意味着每次您 print`alerts`时，它都会重新评估查询。我会期待一个单一的评估。

如果我反复打印`models.DroppedDom.objects.all()`，我会预料到这个结果。但是我被数据库查询的重复应用吓到了，因为我只调用了`all()`一次（我启用并检查了 MySQL 日志，并为每次打印找到了一个单独的查询条目）。

有人可以确切说明这是如何工作的吗？我知道[有关何时评估查询集的 Django 文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/)，但是重复的查询评估仍然让我感到惊讶。

这是 Ubuntu 10.04 上的 Django 1.4 和 Python 2.6。

跟进：

在进一步调查中，打印以下原因导致数据库重复命中：

*   `alerts`
*   `alerts.exists()`.

以下不：

*   `len(alerts)`
*   `bool(alerts)`
*   `[a for a in alerts]`

# ruby-on-rails - 接受嵌套属性：标签？通过关联拆分和存储逗号分隔的标签

> ID：14343518
> 
> 赞同：0
> 
> 时间：2013-01-15T17:38:32.017
> 
> 标签：ruby-on-rails, mongoid, rails-activerecord

我有一个列表模型。列表具有嵌入的标签（使用 Mongoid）。当用户创建列表时，他可以在文本字段中通过逗号分隔列表指定关联的标签。

如何通过 List 关联存储标签？我可以在 List 模型上使用 Accepts_nested_attributes_for :tags 吗，还是必须预处理标签字符串？

这是我到目前为止所拥有的。如何处理标签字符串，将其拆分并将每个标签单独存储在作为列表一部分的嵌入式标签文档中？

列表控制器：

```
class ListsController < ApplicationController
  def new
    @list = List.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @list }
    end
  end

  def create
    list_params = params[:list]
    list_params[:user_id] = current_user.id
    @list = List.new(list_params)
    if @list.save
     redirect_to @list, notice: 'List was successfully created.'
    else
      render action: "new"
    end
  end
end 
```

列表创建表单

```
= form_for @list do |f|
  - if @list.errors.any?
    #error_explanation
      %h2= "#{pluralize(@list.errors.count, "error")} prohibited this list from being saved:"
      %ul
        - @list.errors.full_messages.each do |msg|
          %li= msg

  .field
    = f.label :name
    = f.text_field :name
  .field
    = f.label :description
    = f.text_field :description
  .field
    = f.fields_for :tags do |t|
      = t.label :tags
      = t.text_field :name
  .actions
    = f.submit 'Save' 
```

列表模型

```
class List
  include Mongoid::Document
  include Mongoid::Timestamps
  field :name
  field :description
  embeds_many :items
  embeds_many :comments
  embeds_many :tags
  belongs_to :user

  accepts_nested_attributes_for :tags 
```

标记模型

```
class Tag
  include Mongoid::Document
  field :name
  has_one :list
end 
```

**根据 Geoff 的建议进行编辑**

列表控制器最终看了。

```
 def create
    tags = params[:tags][:name]
    list = params[:list]
    list[:user_id] = current_user.id
    @list = List.new(list)
    tags.gsub("\s","").split(",").each do |tag_name|
      @list.tags.new(:name => tag_name)
    end
    if @list.save
     redirect_to @list, notice: 'List was successfully created.'
    else
      render action: "new"
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:04:21.870

If I understand you correctly, here's what I think you want to do:

Your view as it is will display a tag name field for each tag, but there are no associated tags at create time so I assume it just doesn't show anything.

When using a `:has_many`, there is a nice little function that will be created for you by rails called `List.tag_ids`. Since I am not familiar with it, I am assuming the functionality of `:embeds_many` is a superset of of `:has_many`. The point of this is that if you can provide some sort of form which gathers the ids, then you'd be done. A set of checkboxes could work, or a multi-select. Here is what checkboxes might look like:

```
= hidden_field_tag "list[tag_ids][]"
- Tags.all.each do |t|
  = check_box_tag "list[tag_ids][]", t.id, t.list == @list, id: "list_tag_ids_#{t.id}"
  = label_tag "list_tag_ids_#{t.id}", t.name 
```

I asked something similar here:

[Rails: How do I transactionally add a has_many association to an existing model?](https://stackoverflow.com/questions/13709624/rails-how-do-i-transactionally-add-a-has-many-association-to-an-existing-model)

However, this isn't what you asked for. You could achieve a form which associates tags by name by using javascript. That would probably be nice, but it would be a bit tricky.

Assuming no javascript, if you are inputting the names as a comma separated list in the view, you will need to parse it in the controller. Similar to this:

View:

```
label_tag :tags
text_field_tag :tags 
```

Controller:

```
...
@list = List.new(list_params)
params[:tags].gsub("\s","").split(",").each do |tag_name|
  tag = Tag.find_by_name(tag_name)
  @list.tags << tag if tag
if @list.save
... 
```

None of the solutions I suggested make use of nested attributes. I don't think they are applicable for you here. They are used when you are trying to update the attributes of the nested model, but you're just trying to make the association.

I hope that helps.

# git - 撤消 git merge 但在合并后添加提交

> ID：14343525
> 
> 赞同：3
> 
> 时间：2013-01-15T17:38:53.887
> 
> 标签：git, merge, git-merge

我合并了两个不应该合并的分支：A & B。我想撤消该合并，我可以轻松地做到这一点，返回分支 A 的最后一个未合并状态。但是，我想合并对合并后的分支 A+B。他们不对分支 B 上受影响的文件做任何事情，所以理论上它不会引起冲突。但是，当我尝试合并这些单独的提交时，我最终也合并了分支 B。我怎样才能合并在这个宝贵的提交中所做的更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T17:40:52.927

您可以使用`git cherry-pick`来选择要应用于树的特定提交。

或者，如果合并没有快进，您可以恢复合并提交：

```
git revert -m <mainline> <merge_commit> 
```

# ruby-on-rails - Formtastic :destroy action as a button

> ID：14343526
> 
> 赞同：2
> 
> 时间：2013-01-15T17:38:54.063
> 
> 标签：ruby-on-rails, formtastic

我想在操作中添加删除按钮。但它所做的只是js goback。我试过 <%= f.actions %> 没有显示删除按钮。下面是我手动添加它的努力。

```
<% if can? :update, @parking_branch %>
  <%= semantic_form_for @parking_branch do |f| %>
     <%= f.semantic_errors %>
     <%= f.inputs do %>
      <%= f.input :parking_company_id, :as => :select, :collection => Hash[ParkingCompany.all.map {|c| [c.company_name,c.id]}], :required => true %>
      <%= f.input :branch_name, :required => true %>
      <%= f.input :email, :required => true %>
      <%= f.input :telephone, :required => false %>
      <%= f.input :latitude, :hint =>"Automatically filled based on address" %>
      <%= f.input :longitude, :hint =>"Automatically filled based on address" %>
      <%= f.input :airport, :required => true %>
      <%= f.input :address1 %>
      <%= f.input :address2, :required => false %>
      <%= f.input :address3, :required => false %>
      <%= f.input :city %>
      <%= f.input :county %>
      <%= f.input :postcode %>
      <%= f.input :country, :as => :country, :priority_countries => ["United Kingdom"], :required => true  %>
    <% end %>
    <br /> 
    <%= f.actions do %>
      <%= f.action :submit, :button_html => {:class => 'btn-primary', :disable_with => 'Please Wait...' } %>
      <%= f.action :cancel, :button_html => {:class => 'btn-danger', :disable_with => 'Please Wait...', :method => :delete } %>
    <% end %>
  <% end %>
<% else %>
  <br />
  <h1> You are not authorised to do this! <h1>
<% end %> 
```

我的控制器中也有破坏动作

# r - 将 geom_vline 添加到 ggplot2 时遇到问题

> ID：14343530
> 
> 赞同：8
> 
> 时间：2013-01-15T17:39:05.077
> 
> 标签：r, ggplot2

我有一个大型时间序列数据集，我使用 xts 在 30 秒内进行了总结。不知道如何使这个集合很容易重现，但它看起来像这样

```
> str(taonedf)
'data.frame':   480 obs. of  2 variables:
 $ time : POSIXct, format: "2013-01-06 13:00:29" "2013-01-06 13:00:59" "2013-01-06 13:01:29" ...
 $ count: int  20763 12030 22188 12183 21112 11628 21543 12609 20095 12992 ...
> head(taonedf)
                 time count
1 2013-01-06 13:00:29 20763
2 2013-01-06 13:00:59 12030
3 2013-01-06 13:01:29 22188
4 2013-01-06 13:01:59 12183
5 2013-01-06 13:02:29 21112
6 2013-01-06 13:02:59 11628 
```

我已经绘制了一个正常的线图，它工作正常。

```
ggplot(data=taonedf, aes(x=time, y=count/30)) + #
  geom_line(color="#009E73") + 
  scale_y_continuous(name="requests per second", labels = format_format(scientific=FALSE, big.mark=",")) +
  scale_x_datetime(name="",labels = date_format("%b %d\n%H:%M") ) +
  labs(title=paste("Requests per Second - All Requests",count,sep="\n")) +
  theme(legend.position = "none") 
```

![在此处输入图像描述](../Images/9cdbb64634595f52da3876d39f438db7.png)

我想添加一些 vline 注释。我创建了第二个名为 EV 的数据框，它看起来像这样：

```
> str(ev)
'data.frame':   10 obs. of  2 variables:
 $ dt   : POSIXct, format: "2013-01-06 13:45:00" "2013-01-06 14:18:00" "2013-01-06 14:49:00" ...
 $ event: Factor w/ 9 levels "Event 1",..: 7 8 3 2 5 6 1 4 2 9

> head(ev)
                   dt                                            event
1 2013-01-06 13:45:00                                          Event 1 
```

现在，当我添加 vline 选项时，我得到了奇怪的结果。我在两者之间使用相同的日期时间格式，因此比例应该对齐。

```
ggplot(data=taonedf, aes(x=time, y=count/30)) + 
  geom_line(color="#009E73") + 
  geom_vline(data=ev,aes(xtintercept=dt))+
  scale_y_continuous(name="requests per second", labels = format_format(scientific=FALSE, big.mark=",")) +
  scale_x_datetime(name="",labels = date_format("%b %d\n%H:%M") ) +
  labs(title=paste("Requests per Second - All Requests",count,sep="\n")) +
  theme(legend.position = "none") 
```

![在此处输入图像描述](../Images/1589c27b2966b5408b2f89689727c169.png)

我错过了什么？这似乎并不难。所有文档和示例都显示了简单的数字 X 轴，所以我假设 X 轴中的日期存在一些问题，但我无法确定它。任何帮助，将不胜感激。

```
> dput(taonedf)
structure(list(time = structure(c(1357506029.996, 1357506059.999, 
1357506089.997, 1357506119.998, 1357506149.998, 1357506179.996, 
1357506209.996, 1357506239.993, 1357506269.999, 1357506299.996, 
1357506329.998, 1357506359.998, 1357506389.999, 1357506419.998, 
1357506449.986, 1357506479.996, 1357506509.99, 1357506539.988, 
1357506569.996, 1357506599.999, 1357506629.991, 1357506659.998, 
1357506689.999, 1357506719.995, 1357506749.996, 1357506779.998, 
1357506809.998, 1357506839.997, 1357506869.996, 1357506899.996, 
1357506929.997, 1357506959.994, 1357506989.998, 1357507019.999, 
1357507049.999, 1357507079.998, 1357507109.998, 1357507139.999, 
1357507169.998, 1357507199.99, 1357507229.999, 1357507259.999, 
1357507289.999, 1357507319.998, 1357507349.997, 1357507379.997, 
1357507409.999, 1357507439.998, 1357507469.994, 1357507499.996, 
1357507529.996, 1357507559.996, 1357507589.995, 1357507619.988, 
1357507649.999, 1357507679.994, 1357507709.996, 1357507739.996, 
1357507769.994, 1357507799.991, 1357507829.999, 1357507859.999, 
1357507889.999, 1357507919.999, 1357507949.999, 1357507979.999, 
1357508009.999, 1357508039.999, 1357508069.998, 1357508099.999, 
1357508129.999, 1357508159.999, 1357508189.999, 1357508219.998, 
1357508249.999, 1357508279.999, 1357508309.999, 1357508339.999, 
1357508369.999, 1357508399.999, 1357508429.998, 1357508459.999, 
1357508489.999, 1357508519.999, 1357508549.999, 1357508579.999, 
1357508609.999, 1357508639.999, 1357508669.999, 1357508699.999, 
1357508729.999, 1357508759.998, 1357508789.999, 1357508819.998, 
1357508849.999, 1357508879.998, 1357508909.999, 1357508939.996, 
1357508969.999, 1357508999.999, 1357509029.999, 1357509059.999, 
1357509089.999, 1357509119.999, 1357509149.999, 1357509179.999, 
1357509209.999, 1357509239.999, 1357509269.999, 1357509299.999, 
1357509329.999, 1357509359.999, 1357509389.999, 1357509419.999, 
1357509449.999, 1357509479.999, 1357509509.999, 1357509539.999, 
1357509569.976, 1357509599.999, 1357509629.999, 1357509659.999, 
1357509689.999, 1357509719.999, 1357509749.996, 1357509779.999, 
1357509809.999, 1357509839.999, 1357509869.999, 1357509899.999, 
1357509929.999, 1357509959.996, 1357509989.999, 1357510019.997, 
1357510049.998, 1357510079.997, 1357510109.999, 1357510139.999, 
1357510169.999, 1357510199.999, 1357510229.999, 1357510259.999, 
1357510289.999, 1357510319.999, 1357510349.999, 1357510379.999, 
1357510409.999, 1357510439.999, 1357510469.999, 1357510499.999, 
1357510529.999, 1357510559.999, 1357510589.999, 1357510619.999, 
1357510649.999, 1357510679.999, 1357510709.999, 1357510739.983, 
1357510769.999, 1357510799.999, 1357510829.999, 1357510859.999, 
1357510889.999, 1357510919.999, 1357510949.999, 1357510979.999, 
1357511009.997, 1357511039.999, 1357511069.999, 1357511099.999, 
1357511129.999, 1357511159.999, 1357511189.999, 1357511219.999, 
1357511249.999, 1357511279.999, 1357511309.999, 1357511339.999, 
1357511369.999, 1357511399.999, 1357511429.999, 1357511459.999, 
1357511489.999, 1357511519.999, 1357511549.999, 1357511579.999, 
1357511609.999, 1357511639.999, 1357511669.999, 1357511699.999, 
1357511729.999, 1357511759.999, 1357511789.996, 1357511819.999, 
1357511849.999, 1357511879.999, 1357511909.999, 1357511939.993, 
1357511969.999, 1357511999.998, 1357512029.999, 1357512059.999, 
1357512089.999, 1357512119.999, 1357512149.999, 1357512179.998, 
1357512209.999, 1357512239.999, 1357512269.999, 1357512299.999, 
1357512329.997, 1357512359.993, 1357512389.997, 1357512419.999, 
1357512449.999, 1357512479.998, 1357512509.999, 1357512539.999, 
1357512569.999, 1357512599.999, 1357512629.999, 1357512659.995, 
1357512689.999, 1357512719.999, 1357512749.999, 1357512779.995, 
1357512809.999, 1357512839.999, 1357512869.999, 1357512899.999, 
1357512929.999, 1357512959.999, 1357512989.997, 1357513019.996, 
1357513049.999, 1357513079.999, 1357513109.999, 1357513139.999, 
1357513169.999, 1357513199.993, 1357513229.999, 1357513259.999, 
1357513289.999, 1357513319.999, 1357513349.998, 1357513379.999, 
1357513409.999, 1357513439.999, 1357513469.999, 1357513499.999, 
1357513529.999, 1357513559.999, 1357513589.999, 1357513619.999, 
1357513649.999, 1357513679.999, 1357513709.999, 1357513739.999, 
1357513769.999, 1357513799.998, 1357513829.997, 1357513859.999, 
1357513889.999, 1357513919.999, 1357513949.999, 1357513979.998, 
1357514009.999, 1357514039.996, 1357514069.999, 1357514099.999, 
1357514129.999, 1357514159.999, 1357514189.999, 1357514219.999, 
1357514249.999, 1357514279.999, 1357514309.999, 1357514339.993, 
1357514369.999, 1357514399.999, 1357514429.999, 1357514459.999, 
1357514489.999, 1357514519.999, 1357514549.988, 1357514579.997, 
1357514609.999, 1357514639.998, 1357514669.984, 1357514699.999, 
1357514729.999, 1357514759.999, 1357514789.999, 1357514819.999, 
1357514849.999, 1357514879.999, 1357514909.999, 1357514939.996, 
1357514969.999, 1357514999.999, 1357515029.999, 1357515059.998, 
1357515089.999, 1357515119.97, 1357515149.998, 1357515179.999, 
1357515209.999, 1357515239.999, 1357515269.999, 1357515299.999, 
1357515329.999, 1357515359.999, 1357515389.999, 1357515419.999, 
1357515449.999, 1357515479.999, 1357515509.999, 1357515539.999, 
1357515569.999, 1357515599.999, 1357515629.995, 1357515659.999, 
1357515689.999, 1357515719.999, 1357515749.999, 1357515779.999, 
1357515809.995, 1357515839.999, 1357515869.999, 1357515899.999, 
1357515929.999, 1357515959.999, 1357515989.999, 1357516019.999, 
1357516049.999, 1357516079.999, 1357516109.999, 1357516139.999, 
1357516169.999, 1357516199.999, 1357516229.999, 1357516259.998, 
1357516289.998, 1357516319.999, 1357516349.999, 1357516379.999, 
1357516409.999, 1357516439.999, 1357516469.999, 1357516499.999, 
1357516529.999, 1357516559.999, 1357516589.999, 1357516619.999, 
1357516649.999, 1357516679.999, 1357516709.999, 1357516739.999, 
1357516769.999, 1357516799.999, 1357516829.999, 1357516859.999, 
1357516889.999, 1357516919.999, 1357516949.999, 1357516979.999, 
1357517009.999, 1357517039.999, 1357517069.999, 1357517099.999, 
1357517129.999, 1357517159.998, 1357517189.999, 1357517219.999, 
1357517249.999, 1357517279.999, 1357517309.999, 1357517339.999, 
1357517369.999, 1357517399.998, 1357517429.999, 1357517459.999, 
1357517489.999, 1357517519.999, 1357517549.999, 1357517579.999, 
1357517609.999, 1357517639.999, 1357517669.999, 1357517699.999, 
1357517729.999, 1357517759.999, 1357517789.999, 1357517819.999, 
1357517849.999, 1357517879.999, 1357517909.999, 1357517939.999, 
1357517969.999, 1357517999.999, 1357518029.999, 1357518059.976, 
1357518089.999, 1357518119.998, 1357518149.998, 1357518179.999, 
1357518209.987, 1357518239.999, 1357518269.998, 1357518299.991, 
1357518329.998, 1357518359.999, 1357518389.994, 1357518419.994, 
1357518449.995, 1357518479.999, 1357518509.999, 1357518539.998, 
1357518569.983, 1357518599.999, 1357518629.998, 1357518659.994, 
1357518689.999, 1357518719.988, 1357518749.999, 1357518779.999, 
1357518809.999, 1357518839.999, 1357518869.999, 1357518899.999, 
1357518929.999, 1357518959.999, 1357518989.999, 1357519019.999, 
1357519049.999, 1357519079.998, 1357519109.999, 1357519139.999, 
1357519169.999, 1357519199.999, 1357519229.999, 1357519259.999, 
1357519289.999, 1357519319.999, 1357519349.999, 1357519379.999, 
1357519409.999, 1357519439.999, 1357519469.999, 1357519499.999, 
1357519529.999, 1357519559.999, 1357519589.999, 1357519619.999, 
1357519649.999, 1357519679.999, 1357519709.999, 1357519739.999, 
1357519769.999, 1357519799.999, 1357519829.997, 1357519859.999, 
1357519889.999, 1357519919.999, 1357519949.999, 1357519979.999, 
1357520009.999, 1357520039.999, 1357520069.999, 1357520099.999, 
1357520129.999, 1357520159.999, 1357520189.999, 1357520219.999, 
1357520249.999, 1357520279.999, 1357520309.999, 1357520339.999, 
1357520369.999, 1357520399.999), tzone = "", tclass = c("POSIXct", 
"POSIXt"), class = c("POSIXct", "POSIXt")), count = c(20763L, 
12030L, 22188L, 12183L, 21112L, 11628L, 21543L, 12609L, 20095L, 
12992L, 21552L, 12447L, 21113L, 12236L, 21705L, 12018L, 21140L, 
11820L, 21571L, 12803L, 21146L, 12081L, 21171L, 12440L, 21353L, 
11708L, 21476L, 12210L, 21364L, 12041L, 21907L, 11934L, 22207L, 
12403L, 21629L, 12676L, 21046L, 12196L, 21673L, 12190L, 21830L, 
11652L, 20943L, 12350L, 20848L, 11800L, 21085L, 12367L, 21519L, 
12325L, 22217L, 12195L, 22405L, 11869L, 21380L, 12145L, 21842L, 
12224L, 21793L, 12856L, 34934L, 24073L, 41005L, 33964L, 46240L, 
41287L, 52697L, 62618L, 78594L, 68193L, 76617L, 63747L, 90556L, 
75830L, 104609L, 51063L, 67046L, 66977L, 82513L, 87228L, 107474L, 
141878L, 127290L, 70953L, 98879L, 87814L, 117309L, 113463L, 150979L, 
198271L, 170456L, 108325L, 119583L, 111803L, 117067L, 186768L, 
226191L, 235546L, 228039L, 165570L, 159472L, 161707L, 137614L, 
180049L, 254616L, 302166L, 336723L, 234902L, 202560L, 210679L, 
173053L, 162839L, 262536L, 306859L, 249385L, 300646L, 219594L, 
209819L, 166758L, 173716L, 268453L, 310940L, 264778L, 289798L, 
202234L, 236882L, 217502L, 181157L, 196976L, 201901L, 228233L, 
221241L, 220140L, 122623L, 76699L, 105589L, 381687L, 264571L, 
187083L, 175972L, 202483L, 198547L, 196964L, 206402L, 181260L, 
189319L, 162374L, 160412L, 186897L, 184529L, 160056L, 177326L, 
184240L, 160864L, 156540L, 150392L, 157610L, 138447L, 148423L, 
147318L, 148463L, 114389L, 163761L, 126624L, 167519L, 138240L, 
133005L, 120187L, 155814L, 132751L, 140000L, 120323L, 124415L, 
129450L, 116635L, 125364L, 108176L, 118877L, 143640L, 132457L, 
118641L, 114330L, 135960L, 148066L, 130787L, 130230L, 130436L, 
107109L, 129405L, 116093L, 135293L, 119048L, 147364L, 127028L, 
145576L, 139960L, 139896L, 139433L, 127806L, 124845L, 141319L, 
132821L, 129279L, 111905L, 130898L, 133135L, 138201L, 121460L, 
143846L, 92964L, 100614L, 85637L, 139594L, 124302L, 106071L, 
128247L, 120788L, 176300L, 144378L, 126209L, 117886L, 111001L, 
105855L, 122387L, 152357L, 103217L, 134069L, 106021L, 91796L, 
103335L, 99422L, 115839L, 147787L, 128868L, 123416L, 109312L, 
129782L, 109397L, 130418L, 113709L, 103774L, 133272L, 137311L, 
138079L, 132308L, 119744L, 164226L, 149361L, 135044L, 110185L, 
151246L, 141811L, 160525L, 128407L, 159161L, 142969L, 150370L, 
128705L, 151884L, 171663L, 150428L, 154910L, 165016L, 163729L, 
169727L, 144913L, 163476L, 159984L, 155767L, 142334L, 177964L, 
169230L, 135086L, 139350L, 174013L, 164427L, 154289L, 143392L, 
187156L, 139426L, 159207L, 187435L, 198519L, 132559L, 163582L, 
179069L, 150413L, 161463L, 173357L, 162457L, 136248L, 144086L, 
151073L, 130237L, 144066L, 179840L, 135843L, 147757L, 206373L, 
140734L, 177374L, 176168L, 154999L, 136136L, 187568L, 142357L, 
152180L, 168528L, 131228L, 140622L, 145363L, 93070L, 58613L, 
82024L, 86640L, 77493L, 71205L, 87641L, 89232L, 99214L, 89311L, 
87948L, 90790L, 91326L, 106916L, 97318L, 89452L, 91658L, 82069L, 
92559L, 89194L, 81721L, 83490L, 96388L, 90145L, 79861L, 90301L, 
77676L, 262966L, 227355L, 256477L, 238905L, 241260L, 206168L, 
229477L, 215515L, 245217L, 232026L, 225308L, 223537L, 198524L, 
237840L, 233483L, 193081L, 216570L, 212949L, 203150L, 240861L, 
209596L, 200673L, 180099L, 187726L, 187642L, 188402L, 176871L, 
216090L, 203310L, 184723L, 195702L, 204137L, 276952L, 313717L, 
323208L, 308448L, 321638L, 378236L, 352163L, 413678L, 395997L, 
354317L, 366915L, 339465L, 346781L, 394895L, 355176L, 349618L, 
417590L, 335474L, 405686L, 362581L, 356525L, 354142L, 383487L, 
334305L, 327489L, 336201L, 374153L, 341485L, 321473L, 308773L, 
15709L, 8870L, 15563L, 8944L, 15941L, 9342L, 16303L, 8951L, 14969L, 
9385L, 14537L, 9963L, 15676L, 9011L, 16552L, 9587L, 16802L, 9693L, 
15267L, 8946L, 14189L, 9067L, 14359L, 9776L, 167922L, 337364L, 
350941L, 362928L, 364922L, 319641L, 348687L, 321356L, 400161L, 
334171L, 332829L, 323842L, 397809L, 375694L, 384432L, 356825L, 
350846L, 395942L, 359471L, 296926L, 418481L, 322144L, 335658L, 
347212L, 334421L, 375769L, 364300L, 317370L, 373192L, 346713L, 
356341L, 327225L, 305538L, 347815L, 276914L, 322149L, 303627L, 
292363L, 284724L, 305082L, 373363L, 304386L, 438592L, 403579L, 
430549L, 450536L, 432445L, 389779L, 434888L, 375010L, 456096L, 
577393L, 451122L, 432354L, 425547L, 417729L)), .Names = c("time", 
"count"), row.names = c(NA, -480L), class = "data.frame")

> dput(ev)
structure(list(dt = structure(c(1357508700, 1357510680, 1357512540, 
1357515360, 1357517220, 1357517700, 1357518000, 1357518000, 1357519140, 
1357519140), class = c("POSIXct", "POSIXt"), tzone = ""), event = structure(c(7L, 
8L, 3L, 2L, 5L, 6L, 1L, 4L, 2L, 9L), .Label = c("Event 1", 
"Event 2", "Event 3", 
"Event 4", "Event 5", 
"Event 6", "Event 7", 
"Event 8", "Event 9"
), class = "factor")), .Names = c("dt", "event"), row.names = c(NA, 
-10L), class = "data.frame") 
```

库版本：

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-redhat-linux-gnu (64-bit)

attached base packages:
[1] grid      stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] reshape2_1.2.2   xts_0.9-1        zoo_1.7-9        gdata_2.12.0     data.table_1.8.6 caTools_1.14    
[7] scales_0.2.3     ggplot2_0.9.3 
```

简化的代码 - 这仍然不起作用

```
library(scales)
library(ggplot2)
taonedf<-dget("taonedf") #in this thread
ev<-dget("ev") #in this thread

ggplot(data=taonedf, aes(x=time, y=count/30)) +
  geom_line() +
  geom_vline(data=ev,aes(xtintercept=as.numeric(dt))) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T18:28:10.757

要按`geom_vline()`预期获得显示行，首先`scales`应加载库。然后`as.numeric()`在`geom_vline()`.

```
library(scales)    
+ geom_vline(data=ev,aes(xintercept=as.numeric(dt))) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-15T23:06:13.050

两件事情

*   您需要将 vline 的日期时间包装在`as.numeric`
*   你拼错了`xintercept`

修复那些：

```
library("ggplot2")
library("scales")

ggplot(data=taonedf, aes(x=time, y=count/30)) + 
  geom_line(color="#009E73") + 
  geom_vline(data=ev,aes(xintercept=as.numeric(dt)))+
  scale_y_continuous(name="requests per second", labels = format_format(scientific=FALSE, big.mark=",")) +
  scale_x_datetime(name="",labels = date_format("%b %d\n%H:%M") ) +
  labs(title=paste("Requests per Second - All Requests")) +
  theme(legend.position = "none") 
```

![在此处输入图像描述](../Images/8bf480164601698057fbfaa012cb0b33.png)

# asp.net-mvc - 将 SignalR 与现有授权集成

> ID：14343531
> 
> 赞同：7
> 
> 时间：2013-01-15T17:39:05.777
> 
> 标签：asp.net-mvc, authorization, signalr

我一直在研究将 SignalR 授权属性与自定义授权提供程序（称为 MVCAuthorization）集成的方法。所以我想知道，如何将现有的控制器和操作授权与我的 SignalR 集线器和方法集成？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T17:42:26.717

我发现您可以检索 IAuthorization 提供程序。

如果您将集线器视为控制器，将您的方法视为您的操作，您所要做的就是创建一个实现 IAuthorizeHubConnection 和 IAuthorizeHubMethodInvocation 的 SignalR 属性

```
public class HubAuthorizeAttribute : Attribute, IAuthorizeHubConnection,IAuthorizeHubMethodInvocation
{
    public virtual bool AuthorizeHubConnection(HubDescriptor hubDescriptor, Microsoft.AspNet.SignalR.IRequest request)
    {
        IAuthorizationProvider authorizationProvider = DependencyResolver.Current.GetService<IAuthorizationProvider>();

        return authorizationProvider.IsAuthorizedController(hubDescriptor.Name);
    }

    public virtual bool AuthorizeHubMethodInvocation(IHubIncomingInvokerContext hubIncomingInvokerContext)
    {
        IAuthorizationProvider authorizationProvider = DependencyResolver.Current.GetService<IAuthorizationProvider>();

        return authorizationProvider.IsAuthorizedAction(hubIncomingInvokerContext.MethodDescriptor.Hub.Name, hubIncomingInvokerContext.MethodDescriptor.Name);
    }
} 
```

然后您所要做的就是将属性放在您的集线器或您想要授权的任何方法上

```
[HubAuthorize]
public class Message : Hub
{
    public void Send(string message)
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-30T13:19:19.033

您应该覆盖管道中的现有方法

[检查 SignalR 属性中的授权](https://stackoverflow.com/questions/22650011/check-authorize-in-signalr-attribute)

[http://www.asp.net/signalr/overview/signalr-20/security/hub-authorization](http://www.asp.net/signalr/overview/signalr-20/security/hub-authorization)

覆盖 AuthorizeHubMethodInvocation 将允许您授权请求，同时覆盖 UserAuthorized 允许您进行身份验证（您可以检查用户的角色等。

让您的 HubAuthorizeAttribute 从 AuthorizeAttribute 继承并允许构造函数接受角色列表

这是一个关于如何处理角色的简单示例[http://www.jasonwatmore.com/post/2014/02/18/ASPNET-Web-API-2-Enum-Authorize-Attribute.aspx](http://www.jasonwatmore.com/post/2014/02/18/ASPNET-Web-API-2-Enum-Authorize-Attribute.aspx)

# android - 从 Android proguard 中排除 Java SE 库

> ID：14343533
> 
> 赞同：0
> 
> 时间：2013-01-15T17:39:14.920
> 
> 标签：android, proguard

在 Android 中，我有以下设置的 proguard。

```
-dontpreverify

# Hold onto the mapping.text file, it can be used to unobfuscate stack traces in the developer console using the retrace tool
-printmapping mapping.txt

# Keep line numbers so they appear in the stack trace of the develeper console
-keepattributes SourceFile,LineNumberTable 

# The -optimizations option disables some arithmetic simplifications that Dalvik 1.0 and 1.5 can't handle.
-optimizations !code/simplification/arithmetic 

# Activities, services and broadcast receivers are specified in the manifest file so they won't be automatically included
-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider 

# Custom view components might be accessed from your layout files
-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

# event handlers can be specified in the layout files e.g. android:onClick="nextButton_onClick", I borrowed this method name notation from .NET
-keepclassmembers class * extends android.app.Activity {
    public void *_*(android.view.View);
}

# Parcelable implementations are accessed by introspection
-keepclassmembers class * implements android.os.Parcelable {
    static android.os.Parcelable$Creator CREATOR;
}

# You might want to keep your annotations
-keepattributes *Annotation*

# I use Google Guava in my app
# see http://code.google.com/p/guava-libraries/wiki/UsingProGuardWithGuava
-libraryjars libs/google/jsr305-1.3.9.jar;libs/pinyin4j/pinyin4j-2.5.0.jar
-dontwarn sun.misc.Unsafe

-keepclasseswithmembers class com.google.common.base.internal.Finalizer{
    <methods>;
} 
```

我的一些库，是直接从 Java SE 导入的（例如包含 JApplet）

我如何将它们排除在 proguard 之外？请注意，我`pinyin4j-2.5.0.jar`在`-libraryjars`. 我想这就是告诉 proguard 的方式，“嘿，这是一个图书馆。不要在上面做任何事情，好吗？” 但是，似乎 proguard 仍在尝试处理`pinyin4j-2.5.0.jar`

我收到以下错误。

```
Note: there were 125 duplicate class definitions.
Warning: demo.Pinyin4jAppletDemo: can't find superclass or interface javax.swing.JApplet
Warning: demo.Pinyin4jAppletDemo$1: can't find superclass or interface java.awt.event.WindowAdapter
Warning: demo.Pinyin4jAppletDemo$2: can't find superclass or interface java.awt.event.ActionListener
Warning: demo.Pinyin4jAppletDemo$3: can't find superclass or interface java.awt.event.ActionListener
Warning: org.jasypt.encryption.pbe.PBEBigDecimalCleanablePasswordEncryptor: can't find superclass or interface org.jasypt.encryption.pbe.PBEBigDecimalEncryptor
Warning: org.jasypt.encryption.pbe.PBEBigIntegerCleanablePasswordEncryptor: can't find superclass or interface org.jasypt.encryption.pbe.PBEBigIntegerEncryptor
Warning: au.com.bytecode.opencsv.bean.CsvToBean: can't find referenced class java.beans.PropertyDescriptor
Warning: au.com.bytecode.opencsv.bean.CsvToBean: can't find referenced class java.beans.PropertyDescriptor
Warning: au.com.bytecode.opencsv.bean.CsvToBean: can't find referenced class java.beans.PropertyEditor
Warning: au.com.bytecode.opencsv.bean.CsvToBean: can't find referenced class java.beans.PropertyEditor
Warning: au.com.bytecode.opencsv.bean.CsvToBean: can't find referenced class java.beans.PropertyEditor
Warning: au.com.bytecode.opencsv.bean.CsvToBean: can't find referenced class java.beans.PropertyEditorManager
Warning: au.com.bytecode.opencsv.bean.CsvToBean: can't find referenced class java.beans.PropertyDescriptor
Warning: au.com.bytecode.opencsv.bean.CsvToBean: can't find referenced class java.beans.IntrospectionException
Warning: au.com.bytecode.opencsv.bean.CsvToBean: can't find referenced class java.beans.PropertyEditor
Warning: au.com.bytecode.opencsv.bean.CsvToBean: can't find referenced class java.beans.PropertyDescriptor
...
...
Warning: org.jasypt.normalization.Normalizer: can't find referenced class com.ibm.icu.text.Normalizer$Mode
      You should check if you need to specify additional program jars.
Warning: there were 333 unresolved references to classes or interfaces.
         You may need to specify additional library jars (using '-libraryjars').
Warning: there were 6 unresolved references to program class members.
         Your input classes appear to be inconsistent.
         You may need to recompile them and try again.
         Alternatively, you may have to specify the option 
         '-dontskipnonpubliclibraryclassmembers'.
Error: Please correct the above warnings first. 
```

你们中的一些人可能会评论说，对于包含 Java SE 的库 jar，只有方法（如 Applet、Swing 等）不能在 Android 中使用。**没有。事实上，它们运行得非常好，只要您使用它们的非 Java SE-only 方法。**

完整的错误日志可以从这里下载：[https ://www.dropbox.com/s/dns62f7gp6unusg/error-log.txt](https://www.dropbox.com/s/dns62f7gp6unusg/error-log.txt)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T01:28:11.937

如果您确定未使用这些 Java SE 类，则确实可以忽略警告（正如您在自己的答案中发现的那样）。一种更简单的指定方法：

```
-dontwarn java.beans.**
-dontwarn java.awt.**
-dontwarn javax.swing.** 
```

请参阅[ProGuard 手册 > 故障排除 > 警告：找不到引用的类](http://proguard.sourceforge.net/manual/troubleshooting.html#unresolvedclass)

类似的问题总是有相同的答案：

*   [使用 Proguard 对带有 Dropbox.com 库的 Android 应用程序进行混淆](https://stackoverflow.com/questions/8030532/using-proguard-to-obfuscate-android-app-with-dropbox-com-libraries)
*   [Mobclix 和 Proguard](https://stackoverflow.com/questions/7003785/mobclix-and-proguard)
*   [在 Android 中使用 ProGuard](https://stackoverflow.com/questions/11246842/using-proguard-with-android)
*   [Proguard 告诉我'请先更正上述警告。](https://stackoverflow.com/questions/8074417/proguard-tells-me-please-correct-the-above-warnings-first-how-to-address-ref)
*   [proguard hell - 找不到引用的类](https://stackoverflow.com/questions/6974231/proguard-hell-cant-find-referenced-class)
*   [带有 maven-android-plugin 的 ProGuard](https://stackoverflow.com/questions/8412243/proguard-with-maven-android-plugin)
*   ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:48:38.677

保留 java 运行时的示例 (rt.jar)

```
<libraryjar file="${java.home}/lib/rt.jar" /> 
```

看来你的线

```
-libraryjars libs/google/jsr305-1.3.9.jar;libs/pinyin4j/pinyin4j-2.5.0.jar 
```

不完整。 **更新** 但由于 android 上不存在所需的类，因此您必须忽略这些警告。但是通常不要忽略混淆警告，我们有一个严重的错误（在文件中使用 obfuscation.map），因为我们忽略了所有警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T00:01:33.077

我只是通过以下方式避免错误

```
-dontwarn sun.misc.Unsafe
-dontwarn com.google.common.collect.MinMaxPriorityQueue
-dontwarn javax.swing.**
-dontwarn java.awt.**
-dontwarn org.jasypt.encryption.pbe.**
-dontwarn java.beans.**
-dontwarn org.joda.time.**
-dontwarn com.google.android.gms.**
-dontwarn org.w3c.dom.bootstrap.**
-dontwarn com.ibm.icu.text.**
-dontwarn demo.** 
```

这是完整的proguard配置

```
-optimizationpasses 1
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

#-dontobfuscate

-dontwarn sun.misc.Unsafe
-dontwarn com.google.common.collect.MinMaxPriorityQueue
-dontwarn javax.swing.**
-dontwarn java.awt.**
-dontwarn org.jasypt.encryption.pbe.**
-dontwarn java.beans.**
-dontwarn org.joda.time.**
-dontwarn com.google.android.gms.**
-dontwarn org.w3c.dom.bootstrap.**
-dontwarn com.ibm.icu.text.**
-dontwarn demo.**

# Hold onto the mapping.text file, it can be used to unobfuscate stack traces in the developer console using the retrace tool
-printmapping mapping.txt

# Keep line numbers so they appear in the stack trace of the develeper console 
-keepattributes *Annotation*,SourceFile,LineNumberTable

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService

-keep class android.support.v4.app.** { *; }
-keep interface android.support.v4.app.** { *; }
-keep class com.actionbarsherlock.** { *; }
-keep interface com.actionbarsherlock.** { *; }

# https://sourceforge.net/p/proguard/discussion/182456/thread/e4d73acf
-keep class org.codehaus.** { *; }

-assumenosideeffects class android.util.Log {
  public static int d(...);
  public static int i(...);
  public static int e(...);
  public static int v(...);  
}

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-assumenosideeffects class android.util.Log {
    public static *** d(...);
    public static *** v(...);
    public static *** i(...);
}

# I use Google Guava in my app
# see http://code.google.com/p/guava-libraries/wiki/UsingProGuardWithGuava
-libraryjars libs/google/jsr305-1.3.9.jar

-keepclasseswithmembers class com.google.common.base.internal.Finalizer{
    <methods>;
} 
```

它还不能完全开箱即用，因为我仍然在“proguard 生成后”APK 中遇到崩溃。

我很难找出它崩溃的原因，因为代码很模糊。

如果我具体`dontobfuscate`，我会在生成过程中遇到另一组问题。弹出一条消息“转换为 Dalvik 格式失败，错误 1”，但没有其他信息。但是，这是另一组不同的问题。

# scala - Scala正确使用break返回

> ID：14343550
> 
> 赞同：1
> 
> 时间：2013-01-15T17:40:17.150
> 
> 标签：scala

我有以下代码：

```
private def hasRole(role: String): Boolean = {
  var hasRole = false;
  if(getUserDetails.isDefined){

    // getAuthorities returns java.util.Collection<GrantedAuthority>
    val authorities: util.Collection[_ <:GrantedAuthority] = getUserDetails.get.getAuthorities
    // Wrap the collection is a Scala class 
    val authoritiesWrapper = JCollectionWrapper.apply(authorities);
    for(authority <- authoritiesWrapper.iterator){
      if(authority.getAuthority == role){
        hasRole = true;
        scala.util.control.Breaks.break  
      }
    }
  }
  hasRole
} 
```

问题是，当我找到这个角色时`scala.util.control.Breaks.break`，正确的方法是什么？`return`在我看来不合适。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T18:24:46.243

如果你想使用breakable，你需要这样做：

```
import scala.util.control.Breaks._
breakable {
  for (i <- 0 to 10000) { if (i>3) break }
} 
```

但是，如果您发现自己经常这样做，那么您可能没有充分利用收藏库。试试吧

```
authoritiesWrapper.iterator.exists(_.getAuthority == role) 
```

此外，在您给出的示例中，您还可以

```
if (authority.getAuthority == role) return true 
```

什么时候选哪个？一般来说，如果可以的话，您应该使用集合库中的控制流选项。它们通常是最快和最清晰的。等等，最快——这是为什么呢？两者`break`and `return`（来自`for`需要闭包的或其他上下文 - 基本上除了`if`and之外的任何`while`东西`match`）实际上都会抛出一个被捕获的无堆栈异常；在`break`它被方法捕获`breakable`的情况下，在`return`它被方法捕获的情况下。创建堆栈跟踪确实很慢，但即使是无堆栈异常也有点慢。

所以使用正确的收集方法——`exists`在这种情况下——是最好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:48:27.433

> 问题是，当我找到角色时， scala.util.control.Breaks.break 是正确的返回方式吗？在我看来不合适。

由于您只是在寻找第一个实例，`authority.getAuthority == role`因此您可以使用`find`which 正是这样做的，并且是执行此操作的惯用方式。

```
authoritiesWrapper.iterator.find(authority => authority.getAuthority == role) 
```

或更简洁地说

```
authoritiesWrapper.iterator.find(_.getAuthority == role) 
```

这些返回一个类型，如果它存在`Option`，您可以从中获取值。`authority`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T18:10:08.880

我只能为您提供一般性，但我希望它至少有点帮助......

不幸的是，您的示例代码包含免费标识符，因此我无法在没有猜测和假设的情况下理解它的作用。

你把问题想错了。你在这里做什么？你是`find`一个集合的元素。使用图书馆！它有各种现成的东西。

当涉及到处理时`Option[Something]`，首选的方法是`map`克服它。如果它是一个`None`，你会得到一个`None`出局。如果是，`Some(thing)`那么您传递给的函数`map`将被应用于`thing`并且结果将是`Some(what-your-function-returned-for-thing)`.

或者，对于 Scala 的新手来说，通常觉得更可口的是，您可以在 an 上使用模式匹配`Option`来有效地区分`None`case 和`Some(thing)`case。

在处理 Java 库时，最好将 Java 集合之间的转换推送到代码的最外围，并使用原生 Scala 集合保留大部分代码惯用的 Scala。

`null`来自 Java的 s 也是如此。`Option`尽早将它们变成。为方便起见，工厂`Option(thing)`会将 a变成 a并将 non- 包裹在 a`thing``null``None``null` `thing``Some`

**附录**

结果是你真的不应该在这段代码中使用这些控制流机制。它们都基于异常（除了`return`），并且与 Scala 对使用函数式编程的强调不符。该库支持您尝试的基本逻辑的干净、简洁、高效的实现。不要像这样违背粮食。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T17:47:45.210

为什么不`return true`只是`return false`替换`hasRole`？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T09:27:26.607

谢谢大家，基于@Rex Kerr 的回答，我现在有了这个：

```
private def hasRole(role: String): Boolean = {
  var hasRole: Boolean = false;
  if(getUserDetails.isDefined){
    val authorities: util.Collection[_ <:GrantedAuthority] = getUserDetails.get.getAuthorities
    val authoritiesWrapper = JCollectionWrapper.apply(authorities);
    hasRole = authoritiesWrapper.iterator.exists(_.getAuthority == role)
  }
  hasRole
} 
```

看起来和感觉都不错。我`exists`用来查看集合中存在的角色，然后返回该结果。`false`如果用户未定义（未登录），则默认返回。

如果这仍然不完美，请发表评论。

# java - 将文件中的所有数字解析为 BigDecimal Java

> ID：14343551
> 
> 赞同：2
> 
> 时间：2013-01-15T17:40:18.457
> 
> 标签：java, regex, numbers

我想将输入中的所有数字添加到coollection并对其进行排序。

我有这样的输入文件：

```
12i -+3456i
78,i910 
11
i-12i

13.14r
15.r16r
i17.18

-+19.20
+r21.22
+23.242526r

+-27.28r
-29.30r
-.313233r
r-0.343536rr

r.34r
3536.r
r+37.38

Liczba -0.1234 jest mniejsza niz liczba .2 i wieksza niz liczba -1;

i123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789i 
```

当然还有整数、双精度、大整数等。我想将它们放入 Collection 和排序中。如果我通过此输入进行 3 次传递，这并不难：

```
1\. Create regex for integers and filter the input add those integers into collection
2\.  Create regex for doubles and filter the input add those doubles into collection
3\.  Create regex for bigIntegers and filter the input add those bigIntegers into collection
4.Sort this collection of BigDecimals. 
```

但这似乎很愚蠢。**有没有办法通过输入一次将所有这些数字放入集合中？使用正则表达式。**

编辑：

```
12,12 == 12.12 --> double
12i --> i does not count this is integer 12 
```

EDIT2：正确的输出顺序

```
-29.30
-27.28
-12
-1
-0.343536
-0.313233
-0.1234
0.2
0.34
11
12
13.14
15
16
17.18
19.20
21.22
23.242526
37.38
78
910
3456
3536
123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T17:54:26.080

```
List<String> matchList = new ArrayList<String>();
Pattern regex = Pattern.compile("-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)");
Matcher regexMatcher = regex.matcher(subjectString);
while (regexMatcher.find()) {
    matchList.add(regexMatcher.group());
} 
```

为您提供`ArrayList`所有正则表达式匹配项。如果我了解 Java，我可能会向您展示如何将其更改`ArrayList`为 BigDecimals，但我想您可以自己做。然后就整理好了。

**解释：**

```
-?          # Match an optional minus sign.
(?:         # Either match:
 \d+        # a number,
 (?:\.\d+)? # optionally followed by a decimal part
|           # or
 \.\d+      # just a decimal part
)           # End of alternation 
```

在[regex101](http://regex101.com/r/kJ7bI5)中查看它的实际效果。

（编辑：不会产生大量空匹配的新版本（旧版本也匹配空字符串）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:51:13.057

您可以为所有数字制作一个正则表达式，例如`"[+-]?\\d*[,.]?\\d*"`并将它们解析为 BigDecimals`new BigDecimal(matcher.group().replace(",", ".")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T18:00:25.453

我会做以下事情

```
public static List<Number> parse(Reader reader) throws IOException {
    List<BigDecimal> numbers = new ArrayList<>();
    StringBuilder num = new StringBuilder();
    for (int ch; (ch = reader.read()) >= 0; ) {
        if ((ch >= '0' && ch <= '9') || ch == '.' || ch == '-') {
            num.append((char) ch);
        } else {
            removeLast(num, '.');
            removeLast(num, '-');
            if (num.length() > 0)
                numbers.add(new BigDecimal(num.toString()));
            num.setLength(0);
        }
    }
    Collections.sort(numbers);
    List<Number> ret = new ArrayList<>();
    for (BigDecimal bd : numbers) {
        if (bd.compareTo(BigDecimal.valueOf(bd.intValue())) == 0) {
            ret.add(bd.intValue());
        } else if (bd.setScale(0, RoundingMode.DOWN).compareTo(bd) == 0) {
            ret.add(bd.setScale(0, RoundingMode.DOWN).toBigInteger());
        } else {
            ret.add(bd.doubleValue());
        }
    }
    return ret;
}

private static void removeLast(StringBuilder num, char ch) {
    if (num.length() > 0 && num.charAt(num.length() - 1) == ch)
        num.setLength(num.length() - 1);
}

public static void main(String... args) throws IOException, InterruptedException {
    String text = "12i -+3456i\n" +
            "78,i910 \n" +
            "11\n" +
            "i-12i\n" +
            "\n" +
            "\n" +
            "13.14r\n" +
            "15.r16r\n" +
            "i17.18\n" +
            "\n" +
            "-+19.20\n" +
            "+r21.22\n" +
            "+23.242526r\n" +
            "\n" +
            "+-27.28r\n" +
            "-29.30r\n" +
            "-.313233r\n" +
            "r-0.343536rr\n" +
            "\n" +
            "\n" +
            "r.34r\n" +
            "3536.r\n" +
            "r+37.38\n" +
            "\n" +
            "Liczba -0.1234 jest mniejsza niz liczba .2 i wieksza niz liczba -1;\n" +
            "\n" +
            "i123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789i\n";
    for (Number number : parse(new StringReader(text))) {
        System.out.println(number);
    }
} 
```

印刷

```
-29.3
-27.28
-12
-1
-0.343536
-0.313233
-0.1234
0.2
0.34
11
12
13.14
15
16
17.18
19.2
21.22
23.242526
37.38
78
910
3456
3536
123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789 
```

注意：int、double 或 BigInteger 都不会打印为`-29.30`or`19.20`

# javascript - Express.JS：将 cookie 附加到静态提供的内容

> ID：14343556
> 
> 赞同：4
> 
> 时间：2013-01-15T17:40:37.510
> 
> 标签：javascript, node.js, express

我使用 Express.JS 提供静态内容：

```
express.use(express.static('./../')); 
```

提供服务时`index.html`，我想在响应的旁边发送一个 cookie，指示用户是否登录。通常应该使用`res.cookie()`，但我看不到如何将它用于静态提供的内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T19:30:20.197

不知道为什么需要这样做，但是您可以将自己的中间件放在`static`模块之前。

以下快速破解应该可以工作：

```
function attach_cookie(url, cookie, value) {
  return function(req, res, next) {
    if (req.url == url) {
      res.cookie(cookie, value);
    }
    next();
  }
}

app.configure(function(){
  app.use(attach_cookie('/index.html', 'mycookie', 'value'));
  app.use(express.static(path.join(__dirname, 'public')));
}); 
```

*上面在中间件之前*的中间件 express 使用链中插入了另一个函数`static`。如果 URL 与您要查找的特定 URL 匹配，新层会将 cookie 附加到响应中，并将响应传递到链的更下方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:14:11.797

还要考虑以下方法：

1.  如果您的快递位于网络服务器之后，您可以提供静态文件而无需打扰快递 - 它应该比通过中间件更快。如果您使用 nginx，这会有所帮助：[Nginx Reverse Proxying to Node.js with Rewrite](https://stackoverflow.com/questions/14035440/nginx-reverse-proxying-to-node-js-with-rewrite/14041666#14041666)。

2.  假设您的静态文件中包含 javascript，您还可以直接在客户端设置 cookie，仅从 express 请求此 cookie 所需的数据：

    ```
    document.cookie = "user_id=" + user_id; 
    ```

    Flanagan 的 JS 权威指南（第 6 版！）很好地介绍了如何在客户端 javascript 中使用 cookie（除了是[JavaScript 书籍](https://stackoverflow.com/questions/74884/good-javascript-books)中最好的:)。

这可能是一个微不足道的建议，但我已经看到了以下流程（不止一次）：客户端发送 API 请求（显然附加了一个 cookie），服务器从 cookie 中获取数据并提供完全建立在此 cookie 中包含的数据。所有这一切，而不是只是悄悄地在客户端读取这个 cookie。基本上，客户端会询问服务器它在自己的 cookie 中有什么。

在您的场景中，您只需要请求 user_id/access_key 一次，然后始终检查客户端中的 cookie，仅访问服务器以获取客户端尚未拥有的数据，但存储和检查会话状态，也许还有一些紧凑的大多数页面中使用的数据（例如用户名，例如）在本地 cookie 中（您也可以在本地存储中缓存数据，以进一步减少服务器负载）。在这种情况下，express 甚至不知道用户是否不小心刷新了页面（当然，如果您不更改 URL 以反映应用程序状态，或者只更改#-part）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-13T18:15:58.570

由于 app.configure 自 Express.js v4 以来已被[删除](https://expressjs.com/en/guide/migrating-4.html)，我想进行更新。

对于 Express.js 版本 > 4，通过在方法中`app`传递选项来初始化 my ，在该`express.static(root, [options])`方法中，您可以`Set-Cookie`在名为 的属性中传递标头[`setHeaders`](https://expressjs.com/en/api.html#setHeaders)：

```
app.use(express.static(publicPath, {
  setHeaders: function (res, path, stat) {
    res.set('Set-Cookie', "myCookie=cookieValue;Path=/")
  }
})); 
```

* * *

***设置很重要，`Path=/`否则 express 会在客户端创建大量 cookie 副本。***

# javascript - 根据某些 DIV 内容更改 CSS

> ID：14343557
> 
> 赞同：1
> 
> 时间：2013-01-15T17:40:50.060
> 
> 标签：javascript, jquery, css

希望有人可以通过一些 jquery 或 javascript 帮助我。我有一些 DIV，其中包含复选框的值为“1”或“0”，具体取决于我是否选中该框：

```
<div class="checkbox">1</div>   //This is when the checkbox is checked

<div class="checkbox">0</div>   //This is when the checkbox is NOT checked 
```

无论是 0 还是 1，这个 DIV 的类都保持不变，所以我需要有一个条件语句来说明，

“如果 DIV 的内容为 1，则显示它”

和

“如果 DIV 的内容为 0，则隐藏它”

这会很简单吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:42:34.653

对于这种情况，过滤器会派上用场。

```
$('.checkbox').filter(function () {
   return $(this).text() == 0;
}).hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T17:43:06.450

我会做不同的事情。

```
$("input#checkbox").change(function(){
  $("div.checkbox").toggle(this.checked);
}); 
```

考虑到您的复选框是它正在改变`<div>`无论如何内容的复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T17:43:58.647

每当更改复选框时，请查看带有类的 div，`checkbox`如果它们有 1，则显示，否则隐藏。

```
$('input[type="checkbox"]').on('change', function() {
    $('.checkbox').each(function(){
        if($(this).text() === '1'){
            $(this).show();
        }else{
            $(this).hide();
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T17:55:13.587

如果我必须这样做，那么我很乐意这样做：http: [//jsfiddle.net/P2WmG/](http://jsfiddle.net/P2WmG/)

```
var chktxt = $.trim($('.checkbox').text());
if (chktxt == 0) {
   $('#checkbox').hide();
} else {
   $('#checkbox').show();
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-15T17:44:29.270

您可以使用[:contains() 选择器](http://api.jquery.com/contains-selector/)根据内容选择 div。

```
$('div.checkbox:contains("1")').show();
$('div.checkbox:contains("0")').hide(); 
```

# node.js - 如何在 Node 中从同一 ip 多次尝试登录失败后启用验证码？

> ID：14343562
> 
> 赞同：0
> 
> 时间：2013-01-15T17:41:02.243
> 
> 标签：node.js, express, captcha, recaptcha

我正在使用`express.basicAuth`登录，现在没有任何数据库。这是我的`auth.js`文件：

```
var express = require('express');

var admins = {
  admin@foo.com': { password: 'Passw0rd1' },
  michael@foo.com': { password: 'Passw0rd2' },
};

var handler = express.basicAuth(function(user, pass) {
  var u = admins[user];
  if (!u) return false;
  return u.password === pass;
});

module.exports = function(req, res, next) {
  return handler(req, res, function(err) {
    req.admin = req.remoteUser;
    res.local('admin', req.remoteUser);
    return next(err);
  });
}; 
```

我注意到我的服务受到蛮力攻击，相同的 ip 试图通过枚举可能性登录。

为了阻止未来的攻击，我想添加在 3 次登录尝试失败后将用户重定向到 Recaptcha 服务的功能。

我成功地使用了[node-recaptcha](https://github.com/mirhampt/node-recaptcha)模块，但我不知道如何将它与它集成`basicAuth`并跟踪 ips。

有任何想法吗 ？

# matlab - 如何求解具有时间相关参数的常微分方程组

> ID：14343563
> 
> 赞同：3
> 
> 时间：2013-01-15T17:41:09.670
> 
> 标签：matlab, parameters, ode

如何解决常微分方程系统..初始值问题....参数取决于时间或自变量？说出我的方程式

```
 Dy(1)/dt=a(t)*y(1)+b(t)*y(2);
 Dy(2)/dt=-a(t)*y(3)+b(t)*y(1);
 Dy(3)/dt=a(t)*y(2); 
```

其中a(t)是一个向量，b(t) =c*a(t)；其中 a 和 b 的值随时间变化，而不是以单调方式和每个时间步长变化。我试图用[这篇文章](http://www.mathworks.de/support/solutions/en/data/1-15HR1/?solution=1-15HR1)解决这个问题......但是当我应用相同的原理时......我收到了错误消息

> “使用 griddedInterpolant 出错点坐标未按严格单调顺序排序。”

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T22:58:27.843

请阅读到最后，看看答案的第一部分或第二部分是否与您相关：

**第 1 部分：** 首先创建一个`.m`文件，其中包含一个描述您的计算的函数以及将给出`a`和的函数`b`。例如：创建一个名为的文件，该文件`fun_name.m`将包含以下代码：

```
function Dy = fun_name(t,y)

Dy=[ a(t)*y(1)+b(t)*y(2); ...
    -a(t)*y(3)+b(t)*y(1); ...
     a(t)*y(2)] ;
end

    function fa=a(t);
        fa=cos(t); % or place whatever you want to place for a(t)..
    end

    function fb=b(t);
        fb=sin(t);  % or place whatever you want to place for b(t)..
    end 
```

然后使用带有以下代码的第二个文件：

```
t_values=linspace(0,10,101); % the time vector you want to use, or use tspan type vector, [0 10]
initial_cond=[1 ; 0 ; 0];  
[tv,Yv]=ode45('fun_name',t_values,initial_cond);
plot(tv,Yv(:,1),'+',tv,Yv(:,2),'x',tv,Yv(:,3),'o');
legend('y1','y2','y3'); 
```

当然，对于我写的情况，你不需要为and`fun_name.m`使用子函数，如果可能的话，你可以使用显式函数形式（比如等）。`a(t)``b(t)``Dy``cos(t)`

**第 2 部分：**如果 `a(t)`,`b(t)`只是您碰巧拥有的数字向量，不能表示为`t`（如第 1 部分）的函数，那么您还需要一个时间向量，每个向量都会发生，这可以是当然，您将在同一时间用于 ODE，但不必如此，只要插值有效。当它们具有不同的时间跨度或分辨率时，我将处理一般情况。然后您可以执行以下操作，创建`fun_name.m`文件：

```
function Dy = fun_name(t, y, at, a, bt, b) 

a = interp1(at, a, t); % Interpolate the data set (at, a) at times t
b = interp1(at, b, t); % Interpolate the data set (bt, b) at times t

Dy=[ a*y(1)+b*y(2); ...
    -a*y(3)+b*y(1); ...
     a*y(2)] ; 
```

为了使用它，请参阅以下脚本：

```
%generate bogus `a` ad `b` function vectors with different time vectors `at` and `bt`

at= linspace(-1, 11, 74); % Generate t for a in a generic case where their time span and sampling can be different
bt= linspace(-3, 33, 122); % Generate t for b    
a=rand(numel(at,1));
b=rand(numel(bt,1));
% or use those you have, but you also need to pass their time info...

t_values=linspace(0,10,101); % the time vector you want to use 
initial_cond=[1 ; 0 ; 0];  
[tv,Yv]= ode45(@(t,y) fun_name(t, y, at, a, bt, b), t_values, initial_cond); % 
plot(tv,Yv(:,1),'+',tv,Yv(:,2),'x',tv,Yv(:,3),'o');
legend('y1','y2','y3'); 
```

# java - 如何将mysql数据库添加到项目设置中。？

> ID：14343564
> 
> 赞同：1
> 
> 时间：2013-01-15T17:41:12.040
> 
> 标签：java, mysql

我有一个带有 mysql 数据库的 java 项目我正在使用高级安装程序来创建一个安装文件...我可以嵌入 jre 来运行软件（无需在系统中安装 java）。同样，我想嵌入mysql数据库（系统不包含mysql）......有任何软件可以在我的项目设置中嵌入mysql数据库......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:49:31.180

MySQL 很难正确嵌入，如果没有使用正确的程序将其关闭，可能会出现许多故障状态。对于这类事情，SQLite 是一个更好的引擎，并且被许多应用程序用作持久的后备存储。虽然不如 MySQL 强大，但它更具弹性。它还具有不需要单独过程的优点。

SQLite 的存储方法是将内容持久化到一个文件中，该文件可以毫无问题地复制、移动或备份。MySQL 涉及到许多这样的文件，其中一些处于不一致的状态，除非`FLUSH`调用了正确的。

你可以用 MySQL 做的最好的事情是*捆绑*它，而不是嵌入它，但是你将负责在主机系统上设置它，正确配置它，运行适当的维护程序，并提供某种备份工具对于数据库本身。

# php - 准备好的语句与经典的插入查询

> ID：14343570
> 
> 赞同：0
> 
> 时间：2013-01-15T17:41:38.800
> 
> 标签：php, prepared-statement

> **可能重复：**
> [Php PDO::bindParam 数据类型.. 它是如何工作的？](https://stackoverflow.com/questions/833510/php-pdobindparam-data-types-how-does-it-work)

有人可以解释一下 - 为什么准备好的声明更安全：

```
$stmt = $conn->prepare("INSERT INTO users (user, pass, salt) 
VALUES (:user, :pass, :salt");
    $stmt->bindParam(":user", $user);
    $stmt->bindParam(":pass", $pass);
    $stmt->bindParam(":salt", $salt);
    $stmt->execute(); 
```

插入查询首先使用占位符准备，然后放置值而不是占位符，但是 - 那有名`secure point`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:46:30.530

这些值*不会*放入占位符中（取决于后端，有些会进行仿真，但不要谈论它们，因为那不是准备好的语句）。传统 SQL 的问题在于命令和数据是*混合*的。准备好的陈述通过*故意将它们*始终分开来解决这个问题。准备好的语句不仅仅是一种自动执行`mysqli_real_escape_string`.

# c - 预处理#（字符串化）运算符和空格

> ID：14343571
> 
> 赞同：0
> 
> 时间：2013-01-15T17:41:39.343
> 
> 标签：c, macros, c-preprocessor

我正在考虑分两个阶段实现 C 预处理器，其中第一阶段将源文件转换为预处理标记数组。这将有利于简单性和性能，因为当项目中的多个文件包含头文件时，不需要重做标记化工作。

障碍：

```
#define f(x) #x
main() {
    puts(f(a+b));
    puts(f(a + b));
} 
```

根据标准，输出应该是：

```
a+b
a + b 
```

即有关组成标记是否由空格分隔的信息应该被保留。这将需要废弃两相设计。

到目前为止，我所看到的# 运算符的使用实际上并不需要这个，例如，如果输出总是不管源文件中的组成标记是否被空格分隔，它`assert`仍然可以正常工作。`a + b`

是否有任何现有代码依赖于该操作员标准规定的确切行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:55:46.803

您可能想查看[LCC](https://github.com/drh/lcc)编译器的预处理器，它是作为编译器课程的示例 ANSI C 编译器编写的。另一个预处理器是[MCPP](http://mcpp.sourceforge.net)。

C/C++ 预处理是相当棘手的，如果你坚持它，请确保至少获得相关标准的草案，并在某处窃取测试套件。

# vb.net - 比较两个没有主键的数据表。VB.net

> ID：14343573
> 
> 赞同：0
> 
> 时间：2013-01-15T17:41:55.513
> 
> 标签：vb.net, csv, datatable, compare

我正在寻找三天没有运气。我在访问数据库中有datatable1。我从第三方的 csv 文件填充数据表 2。我需要比较两个数据表并更新任何更改或向 datatable1 添加新行。DT1 可以有一个主键，此时没有。csv 文件没有主键，更新数据表 1 后需要清除数据表 2。由于没有主键，合并 getchanges 方法将不起作用。需要有关如何执行此操作的建议。

让我看看我是否可以使这个尽可能短。我有一个站点的数据，我只能在 csv 文件中获取。有三个 csv 文件采购订单、包裹和装运。随着 PO 完成并付款，该站点会转储数据。我需要能够提取这些数据并为我的目的保留。所以我现在的位置是我有一个包含 6 个表的访问数据库。3 个永久表和 3 个临时表。每次导入 csv 文件都会清理临时表。我需要比较临时表并更新/添加到永久表。包裹和货件有一个唯一的字段，我可以设置为主键。采购订单没有。需要组合三列来生成唯一的主键采购订单、行号、行装运号。我无法让合并 getchanges 处理包裹或装运返回 null，并且缺少主键该方法不适用于 PO。让我知道这是否令人困惑，我会尝试更详细。

# php - 在 PHP 应用程序中支持多语言的最佳和最快方法是什么

> ID：14343577
> 
> 赞同：4
> 
> 时间：2013-01-15T17:42:13.957
> 
> 标签：php, localization, internationalization, multilingual, gettext

虽然这里已经问过很多类似的问题，但我没有找到我想要的答案..

开发多语言应用程序的最佳方法是什么，它应该非常快.. 我不知道我会翻译多少文本。

`Method 1: create and keep all the text in an array for every language i want to support and include that file everywhere.`

`Method 2: Use gettext (.MO, .PO files)`

`Method 3: Store all the translations in a text file and write a function to go through all the text and when matched display its value`

`Method 4: Store all the text and its translations in database, But i don't think it will be faster than storage in Filesystem.`

`Method 5: Same as method 1 but i will create multiple files per language just to keep everything structured.`

虽然所有这些都会起作用，但你们认为哪种方法最快，如果我错过了任何方法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:51:35.967

这是一个复杂的问题，并不总是像您想象的那么明显。在某些情况下，出于从右到左的语言或特定文化原因，您可能需要为特定区域开发单独的布局。

无论您选择哪种方法，您都需要缓存全部或部分页面，并在重新生成页面之前使用缓存版本（如果可用）。

我可能会避免使用 3 和 4。您不想从磁盘读取的内容超出您的需要。如果您可以在 memcached 中缓存翻译数组，您可以在加载翻译表时节省磁盘访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:33:06.073

作为为开发人员管理本地化项目的人，我不得不说双方（翻译人员和开发人员）都对 Gettext（.po 文件）非常满意。在您的代码中实现相对简单（基本上是您想要本地化的任何文本的包装器），它的速度非常快，最重要的是：它可以完美地扩展和更新。

主要优点是存在许多用于创建、更新、管理和翻译 .po/.pot 文件的工具，包括跨平台[PoEdit](http://www.poedit.net/)。当您需要处理数十种语言时，只需提取最新的 .pot 文件并将其发送给翻译团队即可。他们将为每种语言返回单独的文件。我还没有看到很多系统能够如此轻松地扫描和定位新字符串或将它们呈现给翻译人员以供简单使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T18:02:40.767

我建议查看支持多种语言的 PHP 框架。调查最流行的第一，Zend、Symphony 和 Yii。我以前用过 Yii，它支持多语言。

[http://www.yiiframework.com/extension/yii-multilanguage/](http://www.yiiframework.com/extension/yii-multilanguage/)

# xcode - Xcode New Macbook Pro 如何添加我的个人资料

> ID：14343584
> 
> 赞同：1
> 
> 时间：2013-01-15T17:42:44.373
> 
> 标签：xcode, certificate, code-signing, keychain, ios-provisioning

我刚买了一台新的 Macbook Pro 来处理我的代码，我正在尝试在上面设置我的代码签名。我正在尝试遵循 Apple 的指示，但刚刚迷路了。

据我了解，我继续使用我的 iMac、Organizer、Devices，然后点击我的团队。然后我将它导出到我的桌面。但是，当在我的 MBP 上的 Xcode 中进入同一位置时，没有团队出现让我导入此配置文件包。我完全迷路了吗？

更何况我的问题是，如何设置新的 Mac 以使用我现有的开发人员资料？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:52:43.573

好吧，我在罢工中没有先发制人，我很抱歉。对于其他有此问题的人，这是我在新 Mac 上设置 xcode 的工作流程。

1- 购买新 Mac
2- 在 developer.apple.com 登录到配置门户
3- 将开发者和分发证书下载到桌面
4- 分别双击每个并确定将它们添加到您的钥匙串（我选择了系统）
5- 这将使团队出现在管理器/设备中（这是我的问题）
6- 然后单击您的团队，然后导入，输入您的密码。完成，所有设置

# java - 从android调用java webservices

> ID：14343585
> 
> 赞同：1
> 
> 时间：2013-01-15T17:42:48.410
> 
> 标签：java, android, web-services, soap

我正在运行一个简单的项目，点击 android 中的按钮。显示一条从 web 服务返回的消息，该 web 服务的编码是在 java 中完成的。

这是我在 eclipse for Android 中的程序：

```
@Override
public void onClick(View v) {
    final String url = "http://10.0.2.2:8050/WebPractice/PracticeWebServices?wsdl";
    final String namespace = "http://PracticeWebServices/";
    final String methodName = "hello";
    final String action = namespace + methodName;

    if(v.getId() == submit_btn.getId()) {
        SoapObject so = new SoapObject(namespace, methodName);
        so.addProperty("name", "Arjun");
        SoapSerializationEnvelope sse = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        sse.setOutputSoapObject(so);
        HttpTransportSE hse = new HttpTransportSE(url);

        try {
            hse.call(action, sse);
            SoapPrimitive primitive = (SoapPrimitive)sse.getResponse();
            Toast.makeText(getApplicationContext(),primitive.toString() , Toast.LENGTH_SHORT);
        } catch(IOException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        }
    }
} 
```

以下是我的 Java 代码：

```
@WebService(serviceName = "PracticeWebServices")
public class PracticeWebServices {

    @WebMethod(operationName = "hello")
    public String hello(@WebParam(name = "name") String name) {
        return "Hello " + name + " !";
    }
} 
```

我已经在清单文件中包含了互联网权限......

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

现在，当我在 Eclipse 提供的模拟器中运行该文件时。单击按钮时，它会向我显示一条消息`Unfortunately the program has stopped`

当我检查 logCat....似乎我在**android.os.NetworkOnMainThreadException遇到异常**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:55:44.613

您不应该在主线程中调用长时间保持进程，例如互联网资源、磁盘上的数据……您应该使用后台任务。否则，您将遇到 ANR 错误或编译错误，就像您提到的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T17:57:30.913

这里的问题很简单，您需要在单独的线程上进行 Web 服务调用（或你有什么）。因此，很简单，您需要研究如何使用 Android 进行线程处理。不幸的是，这可能有点痛苦，因为您需要在单独的线程上进行服务调用，但您需要在主线程上更新 UI。通常这需要在线程之间传递数据，这涉及处理程序或其他复杂性。幸运的是，Android 平台提供了 Async Task 来处理这个问题，这减轻了一些复杂性，并且可以帮助您避免代码中的一些混乱。

将网络调用迁移到线程（或 Android 的异步任务）的有用文档

无痛线程（来自 Android 开发者文档） 异步任务（来自 Android 开发者文档） Android 线程、处理程序和 AsyncTask – 响应性设计教程（来自 Android 开发者文档）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T15:40:14.853

您应该将长时间的网络获取操作放在 a`Thread`或`AsyncTask`

我建议你使用`AsyncTask`

`class`你可以通过创建一个that来做这样的事情`extends AsyncTask`

```
private class LongNetworkOperation extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {

        SoapObject so = new SoapObject(namespace, methodName);
        so.addProperty("name", "Arjun");
        SoapSerializationEnvelope sse = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        sse.setOutputSoapObject(so);
        HttpTransportSE hse = new HttpTransportSE(url);

        try {
            hse.call(action, sse);
            SoapPrimitive primitive = (SoapPrimitive)sse.getResponse();
            Toast.makeText(getApplicationContext(),primitive.toString() , Toast.LENGTH_SHORT);
        } catch(IOException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        }
    }
} 
```

你可以这样称呼`onClick()`它

```
@Override
public void onClick(View v) {
    if(v.getId()==submit_btn.getId()) {
        new LongNetworkOperation.execute();
    }
} 
```

另外，我建议您显示一个`ProgressDialog`并`onPreExecute()`隐藏它，`onPostExecute()`以便用户了解长时间的后台进程，强烈建议长时间操作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T17:59:39.457

您不应该在主线程上运行网络请求，这会导致`NetworkOnMainThreadException`. 使用自定义查看[此解决方案](https://stackoverflow.com/a/6343299/1140682)`AsyncTask`或使用以下库之一：

*   [带有 Android AsyncTask 包装器的基本 HTTP 客户端](http://code.google.com/p/basic-http-client/)
*   [Android 异步 Http 客户端](http://loopj.com/android-async-http/)
*   或[Android Query](http://code.google.com/p/android-query/)（[异步网络](http://code.google.com/p/android-query/wiki/AsyncAPI)部分）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T18:02:11.513

您遇到的问题是您尝试执行的网络操作不能也不应该在主 UI 线程上执行。这样做会导致**ANR (Android Not Responding)**，这正是您刚刚遇到的错误。您想要做的是将您的代码移动到一个单独的线程，或者移动到一个**`AsyncTask`**将在不同线程的后台执行此操作的**`doInBackground()`**方法，该方法无法访问您在主 UI 线程上的视图。例如，

```
private class ExampleOperation extends AsyncTask<String, Void, String> {

    public ExampleOperation() { //ctor }

    @Override
    protected void onPreExecute() {
        // things that you want to initialize and maybe show dialog to user.
    }

    @Override
    protected String doInBackground(String... params) {
       // this is where you perform that network related operation.  
    }

    @Override
    protected void onPostExecute(String result) {
       // this is where get the results from the network related task.
    }

    @Override
    protected void onProgressUpdate(Void... values) {
       // you can update your progressbar if any; otherwise omit method.
    }

} 
```

然后你所要做的就是在你想使用它的地方调用 AsyncTask：`new ExampleOperation().execute();`

# css - 使用 CSS 将阿拉伯文本显示为单独的字符（而不是草书）

> ID：14343586
> 
> 赞同：0
> 
> 时间：2013-01-15T17:42:50.000
> 
> 标签：css, fonts, arabic, right-to-left

要以阿拉伯语显示车牌，我希望显示每个字母而不连接相邻字符。

是否可以在没有草书的情况下将阿拉伯文本显示为单独的字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:49:50.243

有独特的孤立阿拉伯 UTF-8 字符仅用于此类目的。

这一切都在[这个维基百科页面中进行了解释。](http://en.wikipedia.org/wiki/Arabic_script_in_Unicode)

（抱歉，粘贴的有点乱）

现代标准阿拉伯语中使用的基本字母的演示：

通用 Unicode 上下文形式 名称 隔离结束 中间开头 0623 أ‎ FE83 أ‎ FE84 ـأ‎ ʾalif 0628 ب‎ FE8F ﺏ‎ FE90 ـب‎ FE92 ـبـ‎ FE91 بـ‎ bāʾ 062A ت‎ FE95 ﺕت‎ FE96 ـت‎ FE98 ـت‎ FE98 tāʾ062bثfe99 ﺙFe9a fe9c fe9b fe9b fe9b ثـ ثـ ثـ ثـ ثـ ثـ ثـجfe9d fe9d fe9e fe9e fe9e fe9f fe9f fe9f fe9f جـīm 062d fea1 fea1 fea1 feea1 feea2 fea2 fea2 fea4 fea4 fea4 fea4 fea3 fea3 fea3 fea3 feea3 feea3 feea3 feea3 feea3 feea3 feea3 feea3 feea3 feea3 feea3 feea3 feea3 feea3 feea 3 حـ 0662Eḥ FEA5 feA6 ـخFEA8 feA7 feA7 خـḫḫḫḫ062F feA9 fea9 feaa feaa feaa feaa feaa feab 0630 feab feab feab feac feacـذāl 0631 fead fead fead fead fead fead feae feae feae feae feae feae feae feae feae feae feae feeab fea fea。 Feb0 ـز Zayn/Zāy0633分别0633 feb2 feb2 feb4 feb4 ـFeb3 feb3 feb3feb3sīn0634 feb5 feb5 feb5 feb6 feb6 ـشFeb8 feb7 feb7 feb7 feb7 feb7شـphisten 0635 feb9 feb9 feb9 feb9 feba feba feba feba febc ـص febc ـص febc ـصfebc ـصfebc ـصـ ‎FEBB صـ‎ ṣād 0636 ض‎ FEBD ﺽ‎ FEBE ـض‎ FEC0 ـضـ‎ FEBF ضـ‎ ḍād 0637 ط‎ FEC1 ﻁ‎ FEC2 ـط‎ FEC4 ـطـ‎ FEC3 طـ‎0638ظfec5 fec6 fec6 fec7 fec7 fec7 ظـẓẓẓẓẓ0639عfec9 ﻉ feca feca feca fecc ـ fecc ـ fecc ـ fecb fecb fecb fecbfecb执Fed1 fed2 fed4 fed4 fed4 fed3 fāʾ0642 fed5 fed5 fed6 fed6 fed8 fed7 fed7Qāf0643 fed9 fed9 fed9 fed9 feda feda fedc fedc fedb fedb fedb fedb fedb fedb fedB كـkāf0644。 FEDD ﻝ‎ FEDE ـل‎ FEE0 ـلـ‎ FEDF لـ‎ lām 0645 م‎ FEE1 ﻡ‎ FEE2 ـم‎ FEE4 ـمـ‎ FEE3 مـ‎ mīm 0646 ن‎ FEE5 ن‎ FEE6 ـن‎ FEE8 ــ‎ FEE7 ــ‎ FEE7 ــ‎ FEE9 ūn feea ـ feec ـ feeb feeb hāʾ0648– fee fee feee ـ ـ ـ ـ ـ ـ ـ ـ ـ 064a fef1 fef1 fef2 fef2 fef4 fef4 fef4 fef3 yāʾ yāʾ06222222222222222222222 fe81 fe81 fe82 fe82 fe82 fe82 fe82 fe82 fe82ـآAlif Maddah 0629292929ة ‎ FE93 ﺓ‎ FE94 ـة‎ — — Tāʾ marbūṭah 0649 ى‎ FEEF ﻯ‎ FEF0 ـى‎ — — ʾalif maqṣūrah [编辑]FECC ـfecb英ayn 063a fecd fece fece fed0 fed0 fed0 fecf fecf غـġġġġġġġġġġfed1 fed1 fed2 fed2 fed4 fed4 fed4 fed3 f fed3 fāʾ0642 fesi ‎FED7 قـ‎ qāf 0643 ك‎ FED9 ﻙ‎ FEDA ـك‎ FEDC ـكـ‎ FEDB كـ‎ kāf 0644 ل‎ FEDD ﻝ‎ FEDE ـل‎ FEE0 ـلـ‎ FEDF لـ‎ lām 0645 ـــ‎ FEE1 ﻡ‎ FEE1 ﻡ‎ FEE مـ‎ mīm 0646 ن‎ FEE5 ن‎ FEE6 ـن‎ FEE8 ـنـ‎ FEE7 نـ‎ nūn 0647 ﻫ‎ FEE9 ﻩ‎ FEEA ـه‎ FEEC ـهـ‎ FEEB هـ‎ hāʾ 0648 و‎ FEED ﻭٱ‎ FEEE ـو ﻭ06 FEEE ـو Fef2 ـ fef4 ـ fef3 fef3 yāʾ0622آFe81fe82 fe82 ـآ ـآ ـآ ـآʾʾʾʾʾʾʾʾʾʾ ]FECC ـfecb英ayn 063a fecd fece fece fed0 fed0 fed0 fecf fecf غـġġġġġġġġġfed1 fed1 fed2 fed2 fed4 fed4 fed4 fed3 f fed3 fāʾ0642。 ‎FED7 قـ‎ qāf 0643 ك‎ FED9 ﻙ‎ FEDA ـك‎ FEDC ـكـ‎ FEDB كـ‎ kāf 0644 ل‎ FEDD ﻝ‎ FEDE ـل‎ FEE0 ـلـ‎ FEDF لـ‎ lām 0645 ـــ‎ FEE1 ﻡ‎ FEE1 ﻡ‎ FEE مـ‎ mīm 0646 ن‎ FEE5 ن‎ FEE6 ـن‎ FEE8 ـنـ‎ FEE7 نـ‎ nūn 0647 ﻫ‎ FEE9 ﻩ‎ FEEA ـه‎ FEEC ـهـ‎ FEEB هـ‎ hāʾ 0648 و‎ FEED ﻭٱ‎ FEEE ـو ﻭ06 FEEE ـو Fef2 ـ fef4 ـ fef3 fef3 yāʾ0622آFe81fe82 fe82 ـآ ـآ ـآ ـآʾʾʾʾʾʾʾʾʾʾ ]fed8 ـقـ fed7Qāf0643كfed9 ﻙ fedc fedc fedc fedb fedb fedbkāf0644。 ‎ FEE3 مـ‎ mīm 0646 ن‎ FEE5 ن‎ FEE6 ـن‎ FEE8 ـنـ‎ FEE7 نـ‎ nūn 0647 ﻫ‎ FEE9 ﻩ‎ FEEA ـه‎ FEEC ـيهـ‎ FEEB هـ‎ hāʾ 0648 و‎ FEED wﻭ‎ FEEA Fef1 ﻱFef2 ـ fef4 ـFef3 fef3 yāʾ0622 fe81 fe81 fe82 fe82 ـآʾʾـآ ـآ ـآ ـآ ـآ ـآ ـآ ـآ ـآ fe93ةfe93fe94 fe94 ـة - - tāʾmarbūṭash 0649 feef feef feef feef feef feefﻯfef0 [编辑]fed8 ـقـ fed7Qāf0643كfed9 ﻙ fedc fedc fedc fedb fedb fedbkāf0644。 ‎ FEE3 مـ‎ mīm 0646 ن‎ FEE5 ن‎ FEE6 ـن‎ FEE8 ـنـ‎ FEE7 نـ‎ nūn 0647 ﻫ‎ FEE9 ﻩ‎ FEEA ـه‎ FEEC ـيهـ‎ FEEB هـ‎ hāʾ 0648 و‎ FEED wﻭ‎ FEEA Fef1 ﻱFef2 ـ fef4 ـFef3 fef3 yāʾ0622 fe81 fe81 fe82 fe82 ـآʾʾـآ ـآ ـآ ـآ ـآ ـآ ـآ ـآ ـآ fe93ةfe93fe94 fe94 ـة - - tāʾmarbūṭash 0649 feef feef feef feef feef feefﻯfef0 [编辑]wāw064aيfef1fef2 fef2 fef4 ـ fef3 fef3 yāʾ0622 fe81 fe81 fe82 fe82 ـآAlif maddah 0629 fe93 fe94 fe94 fe94 fe94 ﺓ fe94 ـة -———塔— — ʾalif maqṣūrah [编辑]wāw064aيfef1fef2 fef2 fef4 ـ fef3 fef3 yāʾ0622 fe81 fe81 fe82 fe82 ـآAlif maddah 0629 fe93 fe94 fe94 fe94 fe94 ﺓ fe94 ـة -———塔— — ʾalif maqṣūrah [编辑]

# c# - VS2012 不显示来自 DLL 参考的一些函数

> ID：14343587
> 
> 赞同：0
> 
> 时间：2013-01-15T17:42:50.427
> 
> 标签：c#, dll, visual-studio-2012, intellisense

我今天遇到了一个奇怪的问题，Visual Studio 没有显示 C# 项目中引用的 DLL 中的某些函数。

具体来说，我有一个引用 DLL 的 C# 项目`SASInterop.DLL`，其中包含一个 interface `ILibref`，我知道这个接口应该有一个名为 something 的函数，类似于`ListMembers`. 但是，Intellisense 不知道这样的功能，当将对象浏览器指向引用时，它与 Intellisense 一致；不存在这样的功能。

但经过多次试验和戳，我在 IL DASM 中打开了 DLL，果然，有一个函数`ListDataSets`与 Visual Studio 未显示的一对其他函数一起命名。在代码中使用此函数非常有效，鼠标悬停工具提示甚至显示正确的签名。

查看 IL DASM 中的各种功能，我看不出有什么可以将 Intellisense 识别的功能与那些不识别的功能区分开来。任何人都可以对此有所了解吗？我对 DLL 的主题不是很精通，我的 google-fu 让我失望了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:51:01.887

一种可能的原因[是 EditorBrowsableAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.editorbrowsableattribute.aspx/css)，它将对智能感知隐藏项目。

# c# - 包装和重新抛出异常会影响性能吗？

> ID：14343592
> 
> 赞同：10
> 
> 时间：2013-01-15T17:43:09.430
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, exception-handling

我在我的应用程序中遵循了这种处理异常的方式。但是我的领导说我做错了。我只是包装并重新抛出相同的异常，这会影响性能。

我的方法有什么问题？有人对我如何在这里记录和处理异常有任何建议吗？

```
public class BusinessRepository : IBusinessRepo
{
    public List<Employee> GetEmployees()
    {
        try
        {
            //do some DB operations
        }
        catch (SQLException sqlex)
        {
            Logger.Log("Exception detail with full stack trace");
            throw new DALException(sqlex, "Error in data access layer");
        }

    }
}
public class BusinessLayerClass : IBusinessLayer
{
    private readonly IBusinessRepo Repo;
    public BusinessLayerClass(IBusinessRepo rep)
    {
        Repo = rep;
    }
    public List<Employee> GetEmployees()
    {
        try
        {
           List<Employee> emps= return Repo.GetEmployees();
        }
        catch (DALException dex)
        {
            //do nothin as it got already logged
            throw;
        }
        catch (Exception ex)
        {
            Logger.Log(ex, "Business layer ex");
            throw new BusinessLayerEx(ex);
        }
    }
}

public class HomeController : Controller
{
    public ActionResult Index()
    {
        try
        {
            List < Employee >= BusinessLayerClass.GetEmployees();

        }
        catch (DALException)
        {
            //show error msg to user
        }
        catch (BusinessLayerEx)
        {
            //show error msg to user
        }
        catch (Exception ex)
        {
            Logger.Log();
            //show error msg to user
        }
        return View(emps);
    }
 } 
```

***我是否遵循上面显示的正确的冒泡、处理和记录方式？***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T18:20:05.910

只要满足两个条件，我倾向于同意你这样做的方式：

1.  您的`Logger.Log`语句记录的内容比您在此处指出的更有意义/有用（我猜您的代码在这里只是一条指示错误已记录的示例消息）。如果它提供了可用于追踪异常原因的信息，那很好。
2.  您的`//show error msg to user`评论意味着在该位置，您呈现一个很好的视图来解释发生了错误，并且您不只是显示默认的异常屏幕/轨迹跟踪。

至于您`throw;`何时捕获刚刚抛出的 DALException：没关系。您在这里的目标似乎是捕获来自前一层的任何异常并记录它，然后抛出您自己的异常。因为只有当你已经记录了另一个错误并自己抛出它时才会抛出 DALException，所以让它冒泡超过这个级别是完全可以的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T18:25:51.730

异常的一般经验法则是不要捕获它们，除非你可以“做点什么”，即增加价值。理想情况下，这将是某种优雅的恢复，直到用户永远不知道有打嗝，但至少这将包括记录异常——你正在做的。

不要捕获异常只是为了立即重新抛出它。那没有任何价值。（如果您需要将异常类型更改为更具信息性/更适合上下文的内容，则可能是一个例外）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T18:44:59.103

与任何正常的返回机制相比，抛出和捕获异常都是昂贵的，但这有点不重要——我们不应该将异常用作正常的控制流机制，而是用来处理异常的事情。

异常处理在技术上可能非常具有挑战性。毕竟，大多数时候我们完全没想到它们。但是，当团队或项目根本没有任何类型的错误处理**策略时，几乎不可能“正确”处理异常。**在一个理想的世界里，我们会在一开始就确切地知道我们需要处理什么样的错误条件，并且我们会在设计整个应用程序时考虑到这些情况（以及我们还需要记住的大量其他约束，从代码可读性到性能）。

我会说，如果您的领导说“这是错误的”，那么问“我们的错误处理策略是什么？”是公平的。如果你甚至不知道你的代码应该实现什么目的，你怎么可能交付出色的代码？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T19:34:08.487

您的方法没有任何问题，但我认为您的自定义异常没有增加太多价值。在 DAL 中包装异常如何增加价值的一个示例是，如果您将特定的 SQL 异常（例如唯一键冲突）包装在自定义异常中，以便您的 UI 可以显示有意义的错误消息。

至于性能，无论如何都无关紧要，因为已经发生了非常糟糕的事情。

# php - 如何从某个数字中提取浮点值（php）

> ID：14343594
> 
> 赞同：0
> 
> 时间：2013-01-15T17:43:18.637
> 
> 标签：php

我有一个号码`1.5`，`1.6666`或者`1.777`。

如何从 int 部分中提取这些浮点值？不仅是舍入，而且将它们分开在不同的变量中。

预期输出为`$var1 = 1`和。`$var2 = 0.5``1.5`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:48:55.847

首先获取整数部分，然后从原始部分中减去它。

```
$original = 1.6666;
$intPortion = intval($original);
$floatPortion = $original - $intPortion; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:45:06.397

将它们解释为字符串，并使用[preg_split](http://php.net/manual/en/function.preg-split.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T17:46:02.077

这可能是你最好的选择：

```
$float = 1.666;
$remainder = fmod($float, 1);
$integer = intval($float, 10); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T17:50:53.400

您还可以使用：

```
$var = 1.5;
$arr = explode('.', $var);
$wholeNum = $arr[0];  // 1
$decimalNum = $arr[1];  // 5 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T18:10:36.090

您可以通过多种方式做到这一点。让我们说`$v = 1.56;`：

**示例 #1**

```
$m = explode('.', $v);
$v1 = $m[0];
$v2 = '0.' . $m[1];
print_r("#1: \$v1 = $v1; \$v2 = $v2;\n"); 
```

**示例 #2**

```
preg_match('~^(\d+)\.(\d+)$~', $v, $m);
$v1 = $m[1];
$v2 = '0.' . $m[2];
print_r("#2: \$v1 = $v1; \$v2 = $v2;\n"); 
```

**示例#3**

```
$v1 = substr($v, 0, strpos($v, '.'));
$v2 = '0.' . substr($v, strpos($v, '.') + 1);
print_r("#3: \$v1 = $v1; \$v2 = $v2;\n"); 
```

**示例 #4**

```
$v1 = floor($v1);
$v2 = $v - $v1;
print_r("#4: \$v1 = $v1; \$v2 = $v2;\n"); 
```

* * *

所有示例都将输出 >

```
#1: $v1 = 1; $v2 = 0.56;
#2: $v1 = 1; $v2 = 0.56;
#3: $v1 = 1; $v2 = 0.56;
#4: $v1 = 1; $v2 = 0.56; 
```

* * *

注意大浮点数。有关这些，请参见[BC 数学函数](http://php.net/manual/en/book.bc.php)。

# c - 如何只保留最低 8 位

> ID：14343595
> 
> 赞同：-4
> 
> 时间：2013-01-15T17:43:19.160
> 
> 标签：c

> **可能重复：**
> [如何获得 int 的低 8 位？](https://stackoverflow.com/questions/3270307/how-do-i-get-the-lower-8-bits-of-int)

我将创建校验和计算器。我不明白如何在 c 中执行“现在获取 0x247 的结果并仅保留最低 8 位，在本示例中为 0x47”。你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:54:47.533

简单，使用位掩码！

您可以使用按位 AND 运算符来执行此操作。

这是一些代码：

```
#include <stdio.h>

int main(){
    int number = 0x247, firsteight;

    firsteight = number & 0xFF;

    printf("%x, %x", number, firsteight);

    return 0;
} 
```

它之所以有效，是因为 0xFF 在二进制中等于 11111111。

所以这就是发生的事情：

```
1001000111 = 0x247
0011111111 = 0xFF
-----------   & (bitwise AND)
0001000111 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T18:02:28.390

这是一个明显的重复，但这个评论`but this is hex value. 0x247`让我很困扰。有很多方法可以在系统中表示相同的数字：

```
int val = 01107;   // 583 in octal
int val2 = 0x247;  // 583 in hex
int val3 = 583;    // 583 in dec 
```

但它们都是相同的值，如果我想得到它们中的任何一个的低 8 位，你可以用同样的方法来做，用按位运算符屏蔽数字。

```
val3 & 255  = lower 8 bits
val2 & 0xFF = lower 8 bits
val  & 0377 = lower 8 bits 
```

不要以为我的意思是你必须对十六进制使用十六进制：

```
(val & 255) == (val2 & 255) 
```

是一个真实的陈述。这就是为什么，不管数字是如何表示的，通常都可以用二进制来考虑它：

```
 0010 0100 0111
  & 0000 1111 1111
  ----------------
    0000 0100 0111  <-- only the last 8 bits are kept 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T17:53:02.090

使用位运算符。例如：0101010011010001 & 0000000011111111 等于 11010001。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T17:47:21.367

如果您只想要 int 值的最后 8 位，请`&`使用`0xFF`.

```
int a = 0x247;
int b = 0;
b = a & 0xFF; 
```

# c# - 创建构造函数（？）以从缓存中检索对象，如果为空则重新创建

> ID：14343596
> 
> 赞同：1
> 
> 时间：2013-01-15T17:43:34.590
> 
> 标签：c#, caching, webforms

我正在使用 C# webforms 构建一个 Intranet。我有一个列表对象，其中包含我正在缓存的一堆用户。我正在尝试创建一个构造函数，当我引用 MainADList 时将执行以下操作：

1.  如果它存在于缓存中且不为空，则使用它
2.  否则生成列表并缓存它

我有代码来进行缓存和检索，但它没有以我想要的方式很好地封装。

```
public Users MainADList = new Users();

private void GenerateADList()
{
    MainADList = (Users) Cache["MainADList"];

    if (MainADList == null || MainADList.Count == 0)
    {
       //generate the list....

       Cache["MainADList"] = MainADList;
    }
 } 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T17:46:48.613

您不能创建执行此操作的*构造函数*。构造函数*总是*创建一个新对象。

相反，创建一个静态*工厂*方法：

```
public static Users GetUsers()
{
    // Consult the cache, and create a new instance if necessary.
} 
```

这*可能*是一个[单例](http://csharpindepth.com/Articles/General/Singleton.aspx)- 但它肯定不是必须的。（除非我真的必须这样做，否则我不会人为地强加它的单例。我不是单例模式的忠实粉丝。）

或者，您可以在工厂类中使用*实例方法，而不是静态工厂方法：*

```
public class UsersFactory
{
    // Construct it with a cache, or whatever's required

    public Users GetUsers()
    {
        // Use the cache, or construct a new value.
    }
} 
```

现在这更可测试 - 因为您不依赖任何静态（全局）状态。相反，您可以在每个测试中从新缓存创建新工厂。

在*所有*这些解决方案中，您需要考虑您想要什么样的线程行为。如果要确保只构造一次值，则需要使用`Lazy<T>`静态初始化程序保证或锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:52:23.843

您可以遵循的一种通用模式：

```
public class ClassName {
  public static Object CachedObject {
    get {
      Object o = (Object)Cache['CacheKey'];
      if (o == null)
      {
         o = GetData();
         Cache["CacheKey"] = o;
      }
      return o;
    }
  }
} 
```

并且将**ClassName.CachedObject**视为它始终、永恒且神奇地填充。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-15T17:44:44.577

你想要的是一个单例。

基本上你应该用你已经拥有的代码做的是这样的：

```
public static GetList
{
   get 
      {
          //check if list exists and create it - so basically call your private constructor
          //return cached list
      }
} 
```

# postgresql - pgadmin 删除序列

> ID：14343603
> 
> 赞同：0
> 
> 时间：2013-01-15T17:43:55.417
> 
> 标签：postgresql, pgadmin

在一个 SQL 脚本中，我声明：

```
drop sequence if exists my_sequence_seq cascade; 
```

pgadminIII，版本 1.14.3 显示以下错误：

```
the relation my_sequence_seq already exists 
```

我没有看到我的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:44:42.773

错误消息没有任何意义。这就是您在尝试创建已经存在的序列时得到的结果。

也许旧版本的 pgAdmin 1.14.3 中出现了一些奇怪的错误？尝试升级到[当前版本 pgAdmin 1.16.1](http://pgadmin.org/)。

# ms-access - 保存例程在表中创建两行...除了注释之外的一个空白，另一个很好？

> ID：14343605
> 
> 赞同：1
> 
> 时间：2013-01-15T17:43:59.583
> 
> 标签：ms-access, vba

我有一个用户表单，当用户单击一个按钮时，它会打开一个新的评论日志表单。在这个新表单中，我提取了所有相关的注释并将它们显示在子表单/数据表中。

在第二种形式中，我有一个评论字段，允许输入新评论。当用户点击添加按钮时，他们可以输入文本然后点击保存按钮，评论保存到关联的表格中

（我正在阻止对第二种形式的编辑和删除……只允许添加）

一切似乎都很好，而且效果很好，但是，当我转到要附加的表时，一条评论有两条附加记录。在这两个记录中，注释文本都存在，但在第一条记录中，所有其他数据元素都丢失了。第二个记录是完美的。

有什么想法我哪里出错了吗？

```
Private Sub AddNew_Click()
Me.Item_ID = Forms![F_First_Form]![ID]
Me.Item_Number = Forms![F_First_Form]![Item Number]
Me.Form_Name = "F_First_Form"
Me.User_ID = (Environ$("Username"))
Me.Comment.SetFocus
End Sub

Private Sub Form_Load()

Me.Item_ID = Forms![F_First_Form]![ID]
Me.Item_Number = Forms![F_First_Form]![Item Number]
Me.Form_Name = "F_First_Form"
Me.User_ID = (Environ$("Username"))
Me.AddNew.SetFocus
End Sub
Private Sub SaveComment_Click()
 Dim dbs As DAO.Database
    Dim rst As DAO.Recordset

Set dbs = CurrentDb()
Set rst = dbs.TableDefs("Conversation_Log").OpenRecordset
If Me.Comment = vbNullString Or Me.Dirty = False Then
Exit Sub
Else
With rst
.AddNew
!Form_Name = "F_First_Form"
    !User_ID = (Environ$("Username"))
!Item_Number = Me.Item_Number
!Item_ID = Me.Item_ID
!Comment = Me.Comment
.Update
End With
Me.Requery
Me.Refresh
MsgBox "Your comment has been saved"

End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-22T22:08:16.080

尝试在表单加载例程中注释掉 AddNew：

```
Private Sub Form_Load()
    Me.Item_ID = Forms![F_First_Form]![ID]
    Me.Item_Number = Forms![F_First_Form]![Item Number]
    Me.Form_Name = "F_First_Form"
    Me.User_ID = (Environ$("Username"))
    **'Me.AddNew.SetFocus** 
```

结束子

# iphone - 如何在保持 UI 响应的同时以可接受的性能录制屏幕？

> ID：14343606
> 
> 赞同：9
> 
> 时间：2013-01-15T17:44:04.030
> 
> 标签：iphone, ios, ipad, core-graphics, avfoundation

我正在寻求有关基于 Objective-C 的 iOS 应用程序中的性能问题的帮助。

我有一个使用 CALayer 的 renderInContext 方法捕获屏幕内容的 iOS 应用程序。它尝试捕获足够的屏幕帧以使用 AVFoundation 创建视频。然后将屏幕记录与其他元素结合起来，用于可用性研究。在捕获屏幕时，应用程序还可能正在显示 UIWebView 的内容、通过网络获取数据等... Web 视图的内容不受我的控制 - 它是来自网络。

这个设置是有效的，但正如你想象的那样，它不是黄油般光滑的。由于该层必须在主线程上呈现，因此 UI 争用比我想要的要多。我想做的是设置一个 UI 的响应优先于屏幕截图的设置。例如，如果用户正在滚动 Web 视图，我宁愿在记录上丢帧，也不愿有糟糕的滚动体验。

我已经尝试了几种技术，从 dispatch_source 合并到将帧捕获请求作为块提交到主队列到 CADisplayLink。到目前为止，它们的表现似乎都差不多。当前正在屏幕主视图的 drawRect 中触发帧捕获。

我在这里要问的是：鉴于上述情况，您建议我尝试哪些技术来实现我的目标？我意识到答案可能是没有很好的答案......但我想尝试任何事情，无论听起来多么古怪。

注意：任何技术都需要 App Store 友好。不能使用 Display Recorder 使用/使用的 CoreSurface hack 之类的东西。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T21:03:50.767

“既然图层必须在主线程上渲染”这不是真的，只要你不接触 UIKit。

请参阅[https://stackoverflow.com/a/12844171/136305](https://stackoverflow.com/a/12844171/136305)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:57:21.053

如果符合要求，也许您可​​以以半分辨率录制以加快速度？

# c# - C# Convert.ToDouble() 将字符串转换为双精度时丢失小数点

> ID：14343622
> 
> 赞同：8
> 
> 时间：2013-01-15T17:45:07.213
> 
> 标签：c#, double

假设我们有以下简单的代码

```
 string number = "93389.429999999993";
        double numberAsDouble = Convert.ToDouble(number);
        Console.WriteLine(numberAsDouble); 
```

之后该转换`numberAsDouble`变量的值为 93389.43。我该怎么做才能使这个变量保持完整的数字而不四舍五入？我发现它`Convert.ToDecimal`的行为方式不同，但我需要将值设为双倍。

-------------------小更新---------------------

在上述代码的第 2 行放置断点表明 numberAsDouble 变量在显示在控制台之前具有舍入值 93389.43。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T17:51:21.630

`93389.429999999993`不能完全表示*为*64 位浮点数。A`double`只能容纳 15 或 16 位数字，而您有 17 位数字。如果您需要该级别的精度，请改用 a `decimal`。

（我知道你说你*需要*它作为双重，但如果你能解释为什么，可能有替代解决方案）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-15T17:47:52.323

这是预期的行为。

双精度数不能准确地表示每个数字。这与字符串转换无关。

你可以自己检查一下：

```
Console.WriteLine(93389.429999999993); 
```

这将打印`93389.43`.

以下也显示了这一点：

```
Console.WriteLine(93389.429999999993 == 93389.43); 
```

这打印`True`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-15T17:48:37.797

请记住，这里有两个转换。首先，您将字符串转换为双精度，然后将该双精度转换回字符串以显示它。

您还需要考虑 a`double`没有无限精度；根据字符串的不同，某些数据可能会因为 double 没有能力存储而丢失。

当转换为双精度时，它不会比它必须的更“四舍五入”。考虑到双精度数的能力，它将创建最接近所提供数字的双精度数。当将该双精度转换为字符串时，更有可能不保留某些信息。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-15T17:50:22.230

请参阅以下内容（特别是 Michael Borgwardt 回答的第一部分）：

[十进制与双倍！- 我应该使用哪一个以及何时使用？](https://stackoverflow.com/questions/1165761/decimal-vs-double-which-one-should-i-use-and-when)

根据您尝试转换的数字，双精度并不总是保持精度

如果您需要精确，则需要使用`decimal`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T17:50:24.140

这是对 a`double`可以存储的精度的限制。您可以通过尝试转换`3389.429999999993`来自己看到这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T18:04:02.773

该`double`类型具有 64 位的有限精度，因此当实数存储在 numberAsDouble 变量中时会出现舍入错误。

适用于您的示例的解决方案是`decimal`改用具有 128 位精度的类型。然而，同样的问题出现在较小的差异。

对于任意大数，`System.Numerics.BigInteger`.NET Framework 4.0 中的对象支持整数的任意精度。但是，您将需要一个 3rd 方库来使用任意大实数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-15T18:07:50.347

您可以将小数位截断为您需要的位数，不超过双精度。

例如，这将截断到小数点后 5 位，得到 93389.42999。只需将 100000 替换为所需的值

```
string number = "93389.429999999993";
decimal numberAsDecimal = Convert.ToDecimal(number);
var numberAsDouble = ((double)((long)(numberAsDecimal * 100000.0m))) / 100000.0; 
```

# django - Django 在每个页面上添加一个反馈表

> ID：14343623
> 
> 赞同：3
> 
> 时间：2013-01-15T17:45:08.553
> 
> 标签：django, django-forms, django-views

我有一个用户反馈的表单视图：

**网址.py：**

```
url(
    r'^feedback/$',
    'tool.views.Feedback',
    name='feedback'
),
url(
    r'^thanks/$',
    direct_to_template, {
        'template': 'tool_feedback_thanks.html'
    },
    name='feedback_thanks'
), 
```

**表格.py：**

```
class FeedbackForm(forms.Form):
    yes_no = forms.ChoiceField(
        choices=YES_NO_CHOICE,
        initial=1,
        widget=forms.RadioSelect(attrs={'class': 'can_reveal_input'}),
        label="Are you happy with Our service?"
    )
    comments = forms.CharField(
        widget=forms.Textarea(attrs={
            'class': 'hidden', 'placeholder': 'Leave us your comments...'
        }),
        required=False,
        label=""
    ) 
```

**视图.py：**

```
def Feedback(request,
                 template_name='tool_feedback.html'):
    title = u'Leave us some feedback'
    form = FeedbackForm(request.POST or None)
    if form.is_valid():
        yes_no = form.cleaned_data['yes_no']
        comments = form.cleaned_data['comments']
        sender = "A Unirac website user"
        recipients = ['person@example.com']
        send_mail(yes_no, comments, sender, recipients)
        return HttpResponseRedirect(
            reverse('feedback_thanks')
        )
    return render_to_response(template_name, {
        'title': title,
        'form': form,
    }, RequestContext(request)) 
```

这是一种享受，但现在客户要求将此表单包含在每个页面上。我想可以通过 js 将表单提交到适当的 url，但是在每个页面上包含未绑定表单的最佳方法是什么？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T18:10:20.720

我会创建一个上下文处理器，以在每个视图中包含表单。

**编辑：**

要让用户访问他/她之前浏览的 URL，您可以只使用 URL。

```
# yourapp/context_processors.py
def feedback_form_context_processor(request):
    return {
        'feedback_form': FeedbackForm(),
        'feedback_form_url': reverse("feed_app:form_process", args=(request.path))
    } 
```

这就是 urls.py 的样子：

```
urlpatterns = patterns('feed_app.views',
    url(r'^process-feedback-form/(?P<next_url>\d+)', 'form_process', name='form_process'),
) 
```

以及表单的视图：

```
def form_process(request, next_url):
    # Process form, do your stuff here
    # if its valid redirect to the url
    return redirect(next_url) 
```

并且您应该构建您的模板以具有正确的布局。例如，有一个基本模板：

```
# templates/base.html
<html>
<body>
..
{% block maincontent %}
{% endblock %}
..
{# The form!!! #}
<form action='{{feedback_form_url}}' method='POST'>
@csrftoken
{{ feedback_form.as_p }}
</form>

</body>
</html> 
```

要创建一个简单的视图，只需使用正确的模板。

```
# templates/just_a_random_view.html

{% extends base.html %}

{% block maincontent %}
<h1>Content!</h1>
{% endblock %} 
```

最后，将其包含在您的设置中：

```
# settings.py
TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
    ...
    "yourapp.context_processors.feedback_form_context_processor"
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T17:51:47.220

我相信包含表单的最简单方法是使用[assignment_tag](https://docs.djangoproject.com/en/1.4/howto/custom-template-tags/#assignment-tags)：

在模板库中：

```
@register.assignment_tag
def feedback_form(format_string):
    return FeedbackForm() 
```

在模板中

```
{% feedback_form as form %}
{# display form... %}
{{ form.as_p }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-07T09:50:14.487

添加到@bmihelac，谁的回答对我来说非常有效。由于 django 2.0`assignment_tag`已被[弃用](https://docs.djangoproject.com/en/2.0/releases/1.9/#assignment-tag)，取而代之的是`simple_tag`. 因此，您几乎可以通过替换来完全遵循他的答案`assignment_tag`，`simple_tag`如下所示：

```
from django import template

from .forms import FeedbackForm

register = template.Library()

@register.simple_tag
def feedback_form():
    return FeedbackForm() 
```

然后只需参考[https://docs.djangoproject.com/en/2.1/howto/custom-template-tags/#code-layout](https://docs.djangoproject.com/en/2.1/howto/custom-template-tags/#code-layout)了解有关如何将其导入模板的信息！

# php - 如何使用 laravel artisan 设置 env 以拥有两个不同的数据库连接（本地/远程）？

> ID：14343627
> 
> 赞同：8
> 
> 时间：2013-01-15T17:45:23.057
> 
> 标签：php, laravel, laravel-3

我正在寻找使用 Laravel3 设置多环境项目，但我不明白设置环境的命令。

我在这里看到：http: [//laravel.com/docs/artisan/commands](http://laravel.com/docs/artisan/commands) 命令是：

```
php artisan foo --env=local 
```

我已经成功使用了 artisan 和 bob ，但我无法理解**foo**，我尝试更改为我的项目名称，但输出始终相同：“对不起，我找不到那个任务。”

如果我尝试： php artisan --env=local

这将返回：“您忘记提供任务名称。”

有人可以帮忙吗？谢谢你的时间。

**[编辑]**现在有了答案，我可以更好地理解并改进我的问题：

我有一个创建了这些文件夹的项目：http: [//d.pr/i/5nZS](http://d.pr/i/5nZS) 考虑到这一点，我需要将本地环境设置为开发，将生产设置为生产。那么，我可以使用命令“php artisan --env=local”的任何变体来做到这一点，或者我需要在我的 public/.htaccess 中添加“SetEnv LARAVEL_ENV development”？

再次感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T17:51:06.537

“Foo”是您要运行的任何命令。例如迁移：

```
php artisan migrate --env=local 
```

您可以做的另一件事是将您的计算机主机名添加[到此阵列](https://github.com/laravel/laravel/blob/master/paths.php#L26)

例如，如果我的本地计算机名称是“Effinity.local”，我可以这样做

```
$environments = array(
    'local' => array('http://localhost*', 'Effinity.local'),
); 
```

然后你不需要指定环境，只需：

```
php artisan migrate 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:01:35.290

在这里，我如何解决我的问题：

首先我不需要命令`php artisan migrate --env=local`，我只需要在我的虚拟主机上设置：`SetEnv LARAVEL_ENV development`。

其次，正如 William Cahill-Manley 所说，我需要处理 application/paths.php，即 $environments。我以前用过，但是方法不对。就我而言，我解决了这个问题：

```
$environments = array(
    'development' => array('http://localhost/project*', '*project/*'),
    'production' => array('http://project.com', 'http://*.project.com')
); 
```

我的问题是因为我之前的代码是这样的：

```
$environments = array(
    'development' => array('http://localhost/project*', '*project*'),
    'production' => array('http://project.com', 'http://*.project.com')
); 
```

并且因为开发数组的第二个元素，在生产服务器中总是会在开发中。那是因为开发上的网址是`http://project/`和生产上的网址是`http://project.com/`或`http://user.project.com/`

看，该*项目*将强制在所有环境中由星号/通配符开发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:37:34.697

Foo 是一个任务名称，尝试在任务文件夹中创建此文件，还有一些其他任务是预定义的，例如迁移等。

```
<?php 
    class foo_task {
    public function run(){
            echo 'this is foo';
        }
    } 
?> 
```

然后当您运行命令时，它将运行 run 函数中的代码。

```
php artisan foo --env=local 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T08:37:21.267

我建议首先为您的 Web 应用程序设置一个基于名称的虚拟主机：

```
<VirtualHost *:80>
    ServerAdmin postmaster@localhost
    DocumentRoot "__PATH TO YOUR SERVER ROOT___/project/public/"
    ServerName project.dev
    ErrorLog "logs/project-error.log"
    CustomLog "logs/project-access.log" combined
</VirtualHost> 
```

然后将 project.dev 添加到您的主机文件`/private/etc/hosts`中，如下所示：

```
127.0.0.1 project.dev 
```

之后不要忘记刷新 DNS 缓存：

```
$ dscacheutil -flushcache 
```

`[project root]/path.php`然后将在（您提到的 applications/path.php 文件不存在）中找到的 $environments 数组修改回原来的样子。原始 *.dev 通配符将在您提供的 url 末尾选择 .dev。

```
$environments = array(

    'local' => array('http://localhost*', '*.dev'),

); 
```

然后在里面创建一个目录，在新目录中放置一个文件`applications/config/`叫. 此文件中给出的配置将覆盖由您创建的目录的父目录中给出的相应配置文件和设置/值设置的配置。`local``application.php``local`

# java - 在java中确定文件统计信息？

> ID：14343631
> 
> 赞同：2
> 
> 时间：2013-01-15T17:45:41.343
> 
> 标签：java, compiler-errors, nio

**问题陈述**

编写一个命令行工具，以文件路径为输入，打印文件的行数、字数、字符数、文件所有者的用户标识、文件所有者的组标识和最后修改时间`UNIX`时间戳格式的文件。请注意，单词被标识为由空格或换行符与下一个字符序列分隔的字符序列。换行符也计入文件中的字符数。它必须用java编写。

我的代码：

```
try {
    File f = new File("src/test.txt");
    BufferedReader br = new BufferedReader(new FileReader(f));
    String line = br.readLine();
    int lines = 0, words = 0, chars = 0;
    while (line != null) {
        lines++;
        for(int i = 0; i < line.length(); i++) {
            if(line.charAt(i)==' ') {
                words++;
            }
        }
        chars += line.length();                   
        line = br.readLine();
        words++;
    }
    Path path = Paths.get("src/test.txt");
    long d2 = Files.getLastModifiedTime(path, LinkOption.NOFOLLOW_LINKS).toMillis();
    int uid = (Integer)Files.getAttribute(path, "unix:uid");

    System.out.println(lines);
    System.out.println(words);
    System.out.println(chars);
    System.out.println(uid);
    System.out.println(uid);
    System.out.println(d2);

}
catch(Exception e) {
    e.printStackTrace();
} 
```

我面临的问题是如何找出所有者的用户 ID 和组 ID。使用上述代码时出现运行时错误

```
java.lang.UnsupportedOperationException: View 'unix' not available
at sun.nio.fs.AbstractFileSystemProvider.readAttributes(Unknown Source)
at java.nio.file.Files.readAttributes(Unknown Source)
at java.nio.file.Files.getAttribute(Unknown Source)
at Demo.main(Demo.java:31) 
```

同样在完成我的代码后，我想提交它，但是当我提交我的代码时，我得到一个编译时错误：

```
import java.nio.file cannot be resolved 
```

同样对于属于同一包的其他人也是如此，所以我还想知道是否有任何其他方法可以在我的代码被接受的情况下获取这些属性？

# php - 通过 preg_replace() 将多个 UTF-8 字符替换为一个相同的 acs ii 字符

> ID：14343634
> 
> 赞同：0
> 
> 时间：2013-01-15T17:45:47.270
> 
> 标签：php

我必须将 UTF-8 字符串转换为非 UTF-8 字符串，我想替换：

**Ậ,Ẫ,Ẩ,Ầ,Ấ,Â,Ặ,Ẵ,Ẳ,Ằ,Ắ,Ă,Ạ,Ã,Ả,À,Á**到**A** ,

**Ự,Ữ,Ử,Ừ,Ứ,Ư,Ụ,Ũ,Ủ,Ù,Ú**到**U** ,

**Ợ,Ỡ,Ở,Ờ,Ớ,Ơ,Ộ,Ỗ,Ổ,Ồ,Ố,Ô,Ọ,Õ,Ỏ,Ò,Ó**到**O** ... 以及更多相同的情况

通过 php `preg_replace()`？

我可以使用吗？：

```
$string = preg_replace('/Ậ,Ẫ,Ẩ,Ầ,Ấ,Â,Ặ,Ẵ,Ẳ,Ằ,Ắ,Ă,Ạ,Ã,Ả,À,Á/', 'A', $string);
$string = preg_replace('/Ợ,Ỡ,Ở,Ờ,Ớ,Ơ,Ộ,Ỗ,Ổ,Ồ,Ố,Ô,Ọ,Õ,Ỏ,Ò,Ó/', 'O', $string);
$string = preg_replace('/Ự,Ữ,Ử,Ừ,Ứ,Ư,Ụ,Ũ,Ủ,Ù,Ú/', 'U', $string); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:55:39.017

由于正则表达式不是解决这个问题的最佳方法，我可以提示一下 PHP[`iconv`](http://php.net/manual/en/book.iconv.php)工具：

```
$string = 'ỬỪỨƯỤ';

// temporarily switch locale
$locale = setlocale(LC_CTYPE, 'en_US.UTF-8');
// use iconv to transliterate
$string = iconv('utf-8', 'us-ascii//TRANSLIT', $string);
// restore locale
setlocale(LC_CTYPE, $locale);

// $string is now "UUUUU" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:49:31.727

如果删除 ，您可以`,`将所有内容放在字符类中，`/u`如果输入字符串是 UTF-8，则添加修饰符。例子：

```
preg_replace('/[ỰỮỬỪỨƯỤŨỦÙÚ]/u', 'U', $string); 
```

您还可以使用[`str_replace()`](http://php.net/str_replace)：

```
str_replace(array('Ự', 'Ữ', ...), 'U', $string); 
```

或[`strtr()`](http://php.net/strtr)：

```
strtr($string, 'ỰỮỬ', 'UUU'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T18:11:56.357

我只在 Java 中做过一次，但在 php 中的技巧是相似的。

在 unicode 中，如果您进行规范化，则使用[组合变音符号](http://en.wikipedia.org/wiki/Combining_Diacritical_Marks)（即一个字母和一个符号）对变音符号进行编码。只需放下符号，您就完成了。

```
private static final Pattern DIACRITIC =
        Pattern.compile("[\\p{InCombiningDiacriticalMarks}\\p{IsLm}\\p{IsSk}]+");

public static String replaceCombiningDiacriticalMarks(String text) {
    return DIACRITIC.matcher(Normalizer.normalize(text, Normalizer.Form.NFKD)).replaceAll("");
} 
```

如果您还有其他字母或数学符号中的字符，事情就会变得更加棘手。仍然可以用纯 ascii 替换它们（例如带有 av 的 √），但是选择哪个字符是任意的。

# r - 用 rbind 附加数据帧的神秘问题

> ID：14343639
> 
> 赞同：5
> 
> 时间：2013-01-15T17:46:03.417
> 
> 标签：r, memory-management, append, rbind

我正在尝试将几个文件合并到一个主文件中。有 5 个结构相同的文件，我可以将每个文件单独读入一个数据框中，没有问题。我什至为 200 多个变量手动设置列类，而不是让 R 决定，因为我认为这是导致问题的原因。但是，将任何两个文件附加在一起会导致我的内存不足。

> 警告消息：1：在 rbind(deparse.level, ...) 中：达到 4043Mb 的总分配：请参阅帮助（memory.size）

所以我做了一些实验：我将文件 1 的两个不同块连接在一起。这样可行。我将文件 2 的一部分加入到文件 1 的一部分中。这行得通。我将文件 2 的一部分加入到原始文件 1 中。这行得通。

这些文件中的每一个都小于 200MB，所以我不确定我是否应该耗尽内存。如果有人感兴趣，数据来自[hearstchallenge.com](http://www.hearstchallenge.com)。竞争早已结束，我们只是将数据用于分析实验（而不是编程！）。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:29:12.170

I have run into similar problems. The solution is not to use rbind() or cbind() on large data. They tend to leak memory.

To solve your problem using only R, first create a dataframe of the dimensions that the dataframe would have after you put the pieces together. Then use assignments to fill in the large dataframe.

# wordpress - 如何在不使用 Wordpress 中的 query_posts 的情况下对 category.php 中的帖子进行排序

> ID：14343640
> 
> 赞同：1
> 
> 时间：2013-01-15T17:46:17.177
> 
> 标签：wordpress

看来，当我需要对帖子进行分类时，标准的 WP 循环可以正常工作。当在 category.php 中使用时，它只显示添加到某个类别的帖子，例如：我有两个类别，电影和音乐，我有帖子分配给每个类别，我也有帖子分配给这两个类别. 如果是这样，分配给两个类别的帖子完美地显示在两个类别中，而分配给一个类别的帖子仅显示在一个类别页面上。我尝试按日期或 ID 对它们进行排序，但使用 query_posts 不起作用。它导致在所有类别页面上显示所有帖子，除了它们按特定类别分组的形式。有没有办法以不同的方式对它们进行排序？

**编辑：**

这是标准循环，一切正常。正如我上面写的，虽然有“电影”类别页面，但仅分配给“电影”类别的帖子会显示在该页面上，每个类别页面都是如此。但我认为它是按日期和降序排序的。

```
<div class="category_info"><?php echo category_description(); ?></div>
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>
<div class="categorymain">
<h4 class="posttitle"><?php the_title(); ?></h4>
<?php echo intro_text(250); ?>
<a href="<?php the_permalink() ?>" class="readmore">read more »</a>
</div><!--end categorymain-->
<?php endwhile; endif; ?> 
```

但是，当我用

```
<?php query_posts('order=ASC'); ?>
//...above code here
<?php wp_reset_query();?> 
```

一切都毁了。在“电影”类别页面上，会显示“电影”类别的帖子，但也会显示与“电影”无关的所有其他类别的帖子，这在每个类别页面上都会发生。我希望我说清楚了 :) 哦，顺便说一句，所有内容都在 category.php 中编码。向大家问好：）

* * *

编辑

我找到了一个无缝的解决方案，这里是：

```
<?php global $wp_query;
$args = array_merge( $wp_query->query, array( 'category__in' => array(get_query_var('cat')), 'order' => 'DESC', 'orderby' => 'title' ));
query_posts( $args );
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:55:02.123

```
$categories = get_the_category();
query_posts('order=ASC&cat='.$categories[0]); ?>
//...above code here
<?php wp_reset_query();?> 
```

我建议您阅读以下内容： [http ://codex.wordpress.org/Class_Reference/WP_Query#Category_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Category_Parameters)

并查看获取类别功能：[http ://codex.wordpress.org/Function_Reference/get_the_category](http://codex.wordpress.org/Function_Reference/get_the_category)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-15T17:52:36.690

```
<?php if (have_posts()) : ?>
<?php query_posts('cat=1&posts_per_page='.get_option('posts_per_page')); ?> 
```

# cmake - 我可以在 CMake GUI 向导中添加“环境变量”吗？

> ID：14343643
> 
> 赞同：2
> 
> 时间：2013-01-15T17:46:22.833
> 
> 标签：cmake

我正在使用的 CMake 脚本需要设置环境变量 XXX_HOME，但我没有，也不想添加它。

有没有办法让 CMake 认为这个变量存在，我设置了一个值，在 CMake 缓存中 - 理想情况下使用 CMake GUI - 所以我不必编辑 CMake 脚本？我尝试在 GUI 中添加一个设置，`XXX_HOME = ...`但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:57:45.907

您不能从设置了环境变量的环境中运行 cmake-gui 吗？我一直在 Windows 上使用批处理文件和 Visual Studio 命令提示符的快捷方式来执行此操作，以便我可以在具有相同源的完全不同的构建树中为不同的编译器/不同的位深度进行构建。

在 linux 中，您还应该能够将变量设置在与 cmake-gui 相同的行上。像这样 XXX_HOME="/usr/src/xxx" cmake-gui

# powershell - Powershell在后台打开hta

> ID：14343651
> 
> 赞同：0
> 
> 时间：2013-01-15T17:46:57.143
> 
> 标签：powershell, cmd, hta

我正在做一个没有足够时间重写用 HTA 编写的项目的项目。我需要使用 cmd.exe /C 调用 HTA（因此它在制定后关闭窗口，生成一个闪烁的 hta 框）。我能够以调用表达式的方式执行此操作，但我试图将其作为混合变量的开始工作。

```
$RunHTA = { 
param(
[string]$FP,  ### filepath to hta
[string]$output)  ### output
Invoke-Expression -command 'cmd.exe /C $FP /H:`"$output`"'  ### this line works alone. the /H is the save report feature and the double quotes are needed by the hta
}

$fp="C:\Path\To\HTA\file.hta"
$output = "C:\Output\path"
$j = Start-job $RunHTA -ArgumentList $FP,$output
$j | Receive-job

The filename, directory name, or volume label syntax is incorrect.
+ CategoryInfo          : NotSpecified: (The filename, d...x is incorrect.:String) [], RemoteException
+ FullyQualifiedErrorId : NativeCommandError 
```

我已经进行了一些测试，并且变量正在正确传递。使用返回查看完整的变量。

看起来很简单，可能应该可以轻松工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:02:00.383

尝试将命令用双引号括起来

```
Invoke-Expression -command "cmd /c $FP /H:`"$output`"" 
```

# jquery - 如何向下滑动菜单

> ID：14343654
> 
> 赞同：1
> 
> 时间：2013-01-15T17:47:09.297
> 
> 标签：jquery

我是 jquery 的新手，我在解决我需要做的所有事情时遇到了一些麻烦。我创建了一个带有子菜单的固定菜单，该菜单在单击时向下滑动，但我也希望它在滚动到某个 div 时向下滑动，我首先做了这样的事情

```
$(window).scroll(function() {
if ($(this).scrollTop()>590)
 {
      $('#menu').slideDown(800);
 }
 else
 {
     $('#menu').slideUp(800);
 }
}); 
```

但我更愿意根据传递到某个 div 而不是高度来触发它。有人能帮助我吗？多谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:49:28.343

您可以使用所述某些 div 的偏移量：

```
if ($(this).scrollTop() > $("#certain-div").offset().top) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:49:34.823

您可以检查每个已定义标签的当前位置。在这里检查“ [jQuery Offset](http://api.jquery.com/offset/) ”

# arrays - 如何按名称获取数组对象as3

> ID：14343660
> 
> 赞同：1
> 
> 时间：2013-01-15T17:47:38.487
> 
> 标签：arrays, actionscript-3, for-loop

```
var index:Array = new Array;
var s:String = new String;
s = "index";
index.push("Hello");
for(var k:int=0; k<index.length; k++)
{
    trace(k);
} 
```

> 我如何必须在第 5 行修改 index.length 那个 s 字符串而不是使用它的 index.length 例如 getArray(s).length 而不是 index.length 谢谢...

# assembly - 大于9如何输入数字

> ID：14343663
> 
> 赞同：-2
> 
> 时间：2013-01-15T17:47:46.057
> 
> 标签：assembly, x86, dos, tasm

我使用 TASM，我试图输入 2 个大于 9 的数字并计算这些数字的总和，然后简单地打印数字和总和；

像那样 ：

> Number1=109 Number2=90 sum=199

我想如何转换这个数字以及如何计算总和。如果大于 9，我使用该代码输入一个数字。谢谢

```
MOV Numbre1,0
lecture: int 21h ; 
Cmp AL, "0"
JB fin
Cmp AL,"9"
JA fin
Sub AL,"0" 
SHL Numbre1,1 
Mov BL,Numbre1
SHL BL,1
Add Numbre1,BL
Add Numbre1,AL
jmp lecture 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:30:28.543

这一定是有史以来最常被问到的问题。如果您找不到示例，请升级您的搜索技能。

从你所拥有的......你将需要一个子函数`al`（编辑：`ah`！）`int 21h`。您正确检查了有效的十进制数字。`shl`不会帮助您处理十进制数（但可能对十六进制有用）。

要将文本转换为数字，这就是您的代码似乎正在做的事情，请将“迄今为止的结果”的寄存器清零。每次找到一个有效的十进制数字（从左到右），减去“0”（30h 或 48 十进制，但“0”更容易阅读），将“到目前为止的结果”乘以 10，然后添加新数字。直到完成...

要将数字转换为文本以便打印它，您的问题实际上是问的，重复除以十 - 注意什么`div`除以什么！余数（在`ah`,`dx`或`edx`, 中）是十进制数字。为每个添加“0”。你会得到从右到左的数字，并且你想从左到右打印它们——有几种方法可以处理这个......

找一个例子，或者启动一个调试器并解决它。你的程序崩溃的最可能的原因是你没有注意什么`div`除以什么！请问您有没有具体问题...

编辑：叹息...

 `````
mov ax, the_number
xor cx, cx ; digit counter
mov bx, 10
pushem:
xor dx, dx ; important!
div bx ; quotient in ax, remainder in dx
add dl, '0' ; convert to character
push dx  ; save 'em to get back in right order
inc cx ; count 'em
test ax, ax  ; done?
jnz pushem ; no, do more
popem:
pop ax ; we're only interested in al
int 29h ; print al
loop popem  ; until done 
```` 

`这是我所知道的最简单的方法（也许不是“最好的”）。您当前的一组数字将适合一个字节，但做一个完整的单词同样容易。``

# mysql - 如何在 MySQL 中匹配精确的数字字符串

> ID：14343670
> 
> 赞同：0
> 
> 时间：2013-01-15T17:48:36.223
> 
> 标签：mysql

我在这样的单个字段中有多个 ID

```
field_name
+----------+
12345|34456|43564 
```

现在我想要的是获得该行，如果它完全匹配一个数字，所以我搜索了一下，我找到了这个并在我的查询中使用它，但它失败了

```
SELECT field_name FROM tbl_name WHERE field_name REGEXP '[[:<:]]34456[[:>:]]'; 
```

所以我用了这个反斜杠，它起作用了，

```
SELECT field_name FROM tbl_name WHERE field_name REGEXP '[[:<:]]34456\[[:>:]]'; 
```

那么它是完美的还是我在某个地方出错了？我需要一个精确匹配，我不希望它正在寻找 34456，如果 34457 存在并且需要它，我想要`EXACT`匹配，但我不能`WHERE`在这里使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:55:17.597

好吧，如果你像这样存储 id，没有解决方案会是“完美的”:)

MySQL 有一个名为的函数，该函数[`FIND_IN_SET`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)对此类任务很有用，但它假定您的列表是逗号分隔的。因此，您需要用逗号替换管道才能使用该功能。

像这样的东西应该工作：

```
SELECT field_name 
FROM tbl_name 
WHERE find_in_set('34456',replace(field_name,'|',',')) > 0; 
```

# javascript - 如何更新 ember-data 中的关系

> ID：14343672
> 
> 赞同：0
> 
> 时间：2013-01-15T17:48:37.720
> 
> 标签：javascript, ember.js, ember-data

我有以下两个模型：

```
App.Domain = DS.Model.extend({
    name: attr('string'),
    users: DS.hasMany('App.User')
});
App.User = DS.Model.extend({
    user: attr('string'),
    domain: DS.belongsTo('App.Domain')
}); 
```

`Domain`加载到`User`嵌入的记录中：

```
DS.RESTAdapter.map('App.User', {
    domain: { embedded: 'load' }
}); 
```

如果我得到 JSON 数据，ember-data 将正确解释。

```
GET /users

{
    "users": [
        {
            "id": 1,
            "domain_id": 1,
            "user": "test",
            "domain": {
                "id": 1,
                "name": "example.com"
            }
        }
    ]
} 
```

我的域如下所示：

```
GET /domains

{
    "domains": [
        {
            "id": 1,
            "name": "example.com"
        },
        {
            "id": 2,
            "name": "example.org"
        }
    ]
} 
```

现在我的问题：

如果我更新记录，`domain`则不会更新foreignKey。如果我尝试提交这条脏记录，ember 会将旧记录发送到服务器。我的代码有什么问题？我不能以这种方式更新用于更新的字段吗？`user``domain_id``domain_id``belongsTo``foreignKey`

```
>>var user = App.User.find(1);
>>user.get('domain.id')
1
>>var newDomain = App.Domain.find(2);
>>newDomain.get('id')
2
>>user.set('domain', newDomain)
>>user.get('isDirty')
true
>>user.get('domain.id')
2
>>user.get('domain_id')
1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T00:33:19.797

我认为您需要先提交以更新 domain_id。

# javascript - ASP.NET MVC4 ViewModel Changetracking 使用 knockout.js

> ID：14343674
> 
> 赞同：0
> 
> 时间：2013-01-15T17:48:39.480
> 
> 标签：javascript, asp.net-mvc, knockout.js, change-tracking

我有一个页面，我想知道何时对任何字段进行了任何更改，然后我将禁用并启用保存按钮。

我正在使用下面的代码，它不起作用有人知道我缺少什么吗？

```
@using CirrusAdmin.Models
@model MedicineModel
@{
    ViewBag.Title = "Update Medicine";
}

<script src="@Url.Content("~/Scripts/knockout-2.1.0.js")" type="text/javascript"></script>

<script type="text/javascript">
    var initialData = @Html.Raw(Json.Encode(Model));

    var viewModel = {
                 item : ko.observable(initialData),
                 isDirty : ko.DirtyFlag(item)
    };

    ko.applyBindings(viewModel);
</script>

<hgroup class="title">
    <h1>@ViewBag.Title.</h1>    
</hgroup>
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary()

    <fieldset>        
        <ol>
            <li>
                @Html.LabelFor(m => m.Code)
                @Html.TextBoxFor(m => m.Code, new { data_bind= "value: Code", @readonly = "readonly" })
            </li>
            <li>
                @Html.LabelFor(m => m.Name)
                @Html.TextBoxFor(m => m.Name, new { data_bind = "value: Name" })
            </li>
            <li>
                @Html.LabelFor(m => m.GenericName)
                @Html.TextBoxFor(m => m.GenericName, new { data_bind = "value: GenericName" })
            </li>
        </ol>
    </fieldset>

    <input type="submit" data-bind="enable: isDirty" value="Save" />
}

    @section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:20:11.657

我认为您在此过程中太早应用绑定。尝试移动

```
 ko.applyBindings(viewModel); 
```

在您的表格下方（即）

```
@using (Html.BeginForm()) 
{
  //your form code stuff here
}
<script type="text/javascript">
 ko.applyBindings(viewModel);
</script> 
```

# ssrs-2008 - 有没有一种有效的方法来编辑 SSRS 中的大量文本框（因为我使用的是慢速远程连接）？

> ID：14343682
> 
> 赞同：0
> 
> 时间：2013-01-15T17:49:08.933
> 
> 标签：ssrs-2008, reporting-services

我需要简单地格式化一堆文本框，添加边界、颜色等。我的网络连接（使用远程桌面）真的很慢，拖动框也非常慢。

![在此处输入图像描述](../Images/0e35218d00bf1e8c6303aec5050e3f14.png)

我在想我可以跳入 RDL 代码并更快地编辑它吗？

或者更好的是，我也许可以获取 RDL，在我的机器上本地编辑它（我有 Vis. Studio 2008 但还没有让 SSRS 在本地工作），然后我可以把它放回网上（我在哪里工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:01:58.960

单击一个控件，然后按住`Control`并单击另一个控件 - 两个控件都将突出显示。对想要更改的控件执行此操作。您现在可以在一个操作中编辑它们的通用属性。

我想您可以直接在 XML 编辑器中编辑 XML，但我从来没有这样做过（除了 Visual Studio 来修复小问题）。Visual Studio 设计器是最好的体验。

最好在本地设计报告并在完成后上传。

# html - websql插入慢

> ID：14343685
> 
> 赞同：3
> 
> 时间：2013-01-15T17:49:20.850
> 
> 标签：html, cordova, web-sql

我有大约 300 条记录需要插入到 websql 中。我开始编写 300 个不带参数的单独 tx.executeSql 插入语句。

```
tx.executeSql("INSERT INTO `beerlist` VALUES ('1', '21st Amendment', 'Back in Black IPA', '83', 'IPA', 'A');"); 
```

在 Chrome 上，这需要 2 毫秒。在 Android 上通过 phonegap 运行，这大约需要 43,438 毫秒。所以我切换到迭代一些 JSON 并使用 prepare 语句。像这样：

```
var beerList = {"beers":[{"beerid":"1","brewery":"21st Amendment","beername":"Back in Black IPA","bascore":"83","beertype":"IPA","beertable":"A"}}

$.each(beerList.beers, function(i, object) {
                    var insert = 'INSERT INTO beerlist VALUES (?, ?, ?, ?, ?, ?)';
                    tx.executeSql(insert, [object.beerid, object.brewery, object.beername, object.bascore, object.beertype, object.beertable], Beer.successInsert, Beer.failureInsert);
                }); 
```

我读到准备应该更快的地方，但我在 Chrome 上看到了相同的性能，实际上通过 Android 上的 Phonegap 的性能稍差，为 53,559 毫秒。我不敢相信插入 300 条记录需要大约 50 秒。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:35:57.633

您是否使用多个交易？可能不是您的插入速度很慢，而是事务。包含在单个事务中的多个执行要快得多

```
db.transaction( function(tx){
    for (var i = 0; i < args; i++)
    {
        tx.executeSql(sqlStmnt, args[i]); //args is nested [[1,2],[1,3]]
    }
},
dfd.reject,
dfd.resolve); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T04:46:56.117

如您所见，executeSql 的[成功处理程序](http://www.w3.org/TR/webdatabase/#sqlstatementcallback)是使用事务对象调用的。诀窍是重用该事务并发送并行请求。基本上，您使用单个事务，但控制执行多个但很少的异步请求。您应该能够将其存储在几毫秒内。

在您的示例中，它是不受控制的。您的所有 300 个请求在执行之前都已排队。这甚至可能使浏览器崩溃。

示例实现可以在[https://bitbucket.org/ytkyaw/ydn-db/raw/master/js/ydn/db/core/req/websql.js中的 putObjects 方法中找到](https://bitbucket.org/ytkyaw/ydn-db/raw/master/js/ydn/db/core/req/websql.js)

# html5-video - 新的 Blackberry 10 操作系统支持哪些视频 HTML5 视频格式？

> ID：14343695
> 
> 赞同：-1
> 
> 时间：2013-01-15T17:49:46.937
> 
> 标签：html5-video, h.264, video-encoding, blackberry-10

黑莓将于 1 月 30 日发布新的操作系统 (BB10) 和智能手机 Z10，据说它有一个兼容 HTML5 的浏览器，有谁知道它支持哪些 HTML5 视频格式。（例如 H.264、WEBM、OGG 等？）我会假设 H.264 但正在寻找确认。在任何黑莓开发论坛中都找不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T07:04:49.400

黑莓对最佳本地播放的建议是：

**MP4、H.264 High Profile @ 720p (1280x720)**

您可以在此处找到 BB10 媒体支持的文件：

[https://developer.blackberry.com/devzone/develop/supported_media/bb10_media_support.html](https://developer.blackberry.com/devzone/develop/supported_media/bb10_media_support.html)

以下链接也可能有助于检查：

- 支持的流媒体协议 [https://developer.blackberry.com/devzone/develop/supported_media/bb10_pbos_streaming_support.html](https://developer.blackberry.com/devzone/develop/supported_media/bb10_pbos_streaming_support.html)

# background - XNA Additive 粒子在背景上混合

> ID：14343700
> 
> 赞同：1
> 
> 时间：2013-01-15T17:50:03.630
> 
> 标签：background, xna, blending

我的粒子引擎有问题，我试图在我目前正在编码的游戏中实现它。它在黑色背景上看起来不错，但我忘记了如果我添加一个粒子会与背景混合。有什么办法可以防止我的粒子与背景混合，只让它们相互混合？

```
spriteBatch.Begin(SpriteSortMode.Deferred, BlendState.AlphaBlend, SamplerState.PointClamp, DepthStencilState.Default, RasterizerState.CullNone, null);
Main.TileMap.Draw(spriteBatch);
spriteBatch.End();

spriteBatch.Begin(SpriteSortMode.Deferred, BlendState.Additive, SamplerState.PointClamp, DepthStencilState.Default, RasterizerState.CullNone, null);
Main.ParticleManager.Draw(spriteBatch);
spriteBatch.End(); 
```

这里有一些图像向您展示我的意思：

[http://puu.sh/1O6Zf](http://puu.sh/1O6Zf)

[http://puu.sh/1O6Yl](http://puu.sh/1O6Yl)

编辑：我通过将其渲染到纹理并将其绘制到屏幕来解决它。这是固定代码：

```
 RenderTarget2D renderTarget;
    Texture2D particleMap;
public void LoadContent(ContentManager content)
{
    renderTarget = new RenderTarget2D(Main.graphicsDevice, pp.BackBufferWidth, pp.BackBufferHeight, true, Main.graphicsDevice.DisplayMode.Format, DepthFormat.Depth24);
}
public void Draw(SpriteBatch spriteBatch)
    {
        Main.graphicsDevice.SetRenderTarget(renderTarget);
        Main.graphicsDevice.Clear(Color.Transparent);

        spriteBatch.Begin(SpriteSortMode.Deferred, BlendState.Additive, SamplerState.PointClamp, DepthStencilState.Default, RasterizerState.CullNone, null);
        Main.ParticleManager.Draw(spriteBatch);
        spriteBatch.End();

        Main.graphicsDevice.SetRenderTarget(null);
        particleMap = (Texture2D)renderTarget;

        Main.graphicsDevice.Clear(Color.Black);

        spriteBatch.Begin();

        Main.TileMap.Draw(spriteBatch);
        spriteBatch.Draw(particleMap, new Vector2(0, 0), null, Color.White, 0, new Vector2(0, 0), 1f, SpriteEffects.None, 1);

        spriteBatch.End();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T12:24:40.787

也许这可以帮助你。使纹理半透明：

```
spriteBatch.Draw(texture, location, Color.White * 0.5f); 
```

因此将值从`0.0f`to更改`1.0f`将为您提供透明度强度。

还要确保你发送混合状态

```
spriteBatch.Begin(SpriteSortMode.Immediate, BlendState.AlphaBlend) 
```

# php - 检查mysql中是否存在值

> ID：14343702
> 
> 赞同：0
> 
> 时间：2013-01-15T17:50:08.043
> 
> 标签：php, mysql

我有一个小脚本可以将数据从 csv 文件上传到 mysql 数据库，我想检查 csv 文件中的值列表。

CSV 文件：

```
code,alert_quantity
12345,10 
```

PHP 文件：

```
 <?php
    $link_id = mysql_connect("localhost", "root", "")
               or die("Could not connect.");

    if(!mysql_select_db("database",$link_id))
    die("database was not selected.");

    function _checkIfCodeExists($code){

    $sql        = "SELECT COUNT(*) AS count_no FROM products WHERE code = ?";
    $count      = $sql;
    if($count > 0){
        return true;
    }else{
        return false;
    }
    }

    function _updateData($line_of_data){
    $code            = $line_of_data[0];
    $newAlert       = $line_of_data[1];

    $sql = "UPDATE ";
}

    $file_handle = fopen("file.csv", "r");

    while (($line_of_data = fgetcsv($file_handle, 1000, ",")) !== FALSE) {

    $query = mysql_query("SELECT * FROM products WHERE code ='$line_of_data[0]'") or die(mysql_error());
    $message = '';
    $count   = 1;

    if(_checkIfCodeExists($line_of_data[0])){
        try{
            _updateData($_data);
            $message .= $count . '> Success:: Product with code  (' . $line_of_data[1] . ') Exist (' . $line_of_data[0] . '). <br />';

        }catch(Exception $e){
            $message .=  $count .'> Error:: While updating alert (' . $line_of_data[1] . ') of code (' . $line_of_data[0] . ') => '.$e->getMessage().'<br />';
        }
    }else{
        $message .=  $count .'> Error:: Product code   (' . $line_of_data[0] . ')   Doesnt exist<br />';
    }
    $count++;
}
echo $message;

?> 
```

我不想导入这些值，只想检查是否存在并得到结果。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:55:39.703

正如其他人所说，您应该真正使用 PDO。但是，要回答您的问题，mysql_num_rows 是您的解决方案。

```
$query = mysql_query("SELECT * FROM products WHERE code='$line_of_data[0]' AND alert_quantity = '$line_of_data[1]'") or die(mysql_error());

if (mysql_num_rows($query))
// Data is already in database
else
// Data not in database 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:32:24.697

请检查mysql是否存在子查询。

[存在和不存在子查询](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)

# php - 当用户将 OpenID 链接到他们的帐户时自动提升用户？

> ID：14343703
> 
> 赞同：1
> 
> 时间：2013-01-15T17:50:07.967
> 
> 标签：php, openid, mediawiki

我正在使用带有[OpenID](http://www.mediawiki.org/wiki/OpenID)扩展的 MediaWiki，并希望 wiki 自动提升将其 OpenID 链接到其编辑帐户的用户，并在没有链接的 OpenID 时自动撤销它们。我知道用于自动促销的 MediaWiki 语法，但不知道链接/取消链接 OpenID 时触发的事件 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:49:52.480

为了实现这个特性，OpenID 扩展需要有钩子。

**什么是钩子？**

MediaWiki 中的钩子是事件订阅工具：它们是在特定事件发生时调用的函数数组。

例如，UserSetEmail 挂钩将允许在用户设置电子邮件时调用任何函数。 [有关钩子的更多信息](http://www.mediawiki.org/wiki/Manual%3aHooks "MediaWiki 站点文档中的挂钩")。

**我们需要 OpenID 扩展挂钩。**

一旦*UserSetOpenID*和*UserUnsetOpenID*钩子可用，您就可以将自动促销代码添加到由这些钩子调用的函数中：

```
$wgHooks['UserSetOpenID'][] = 'PromoteUserOnOpenID';

function PromoteUserOnOpenID ( $user, &$OpenID ) {
    //The promotion code
} 
```

请在我们的错误跟踪器上[填写功能请求](https://bugzilla.wikimedia.org/enter_bug.cgi?product=MediaWiki%20extensions&component=OpenID&cc=dereckson%40espace-win.org&bug_file_loc=http%3A%2F%2Fstackoverflow.com%2Fq%2F14343703%2F1930997&bug_severity=enhancement "MediaWiki 扩展产品、OpenID 组件的新错误，带有严重性、CC 和 URL 预填充")（我预先填写了一些错误表格）。我将遵循您的功能要求，以确保这是现成的。

感谢您提出这个问题，这是改进 OpenID 扩展的宝贵反馈。

# ios - 弹出标签栏应用程序上的所有视图控制器

> ID：14343706
> 
> 赞同：3
> 
> 时间：2013-01-15T17:50:25.910
> 
> 标签：ios, xcode, uistoryboard

我有一个标签栏应用程序，在应用程序的 5 个标签中的 4 个上有导航控制器。我的应用程序中有一个“重置应用程序”功能，可以清除所有数据等……我还希望将所有视图控制器弹出回其顶视图。我知道如何使用 popToRootViewControllerAnimated 为单个导航控制器弹出到根目录，但是是否可以弹出每个选项卡上的所有视图控制器？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T17:54:57.687

如果数组中的控制器是 UINavigationController 之类的，则需要通过 tabBarController 的 viewControllers 数组枚举并弹出到根视图控制器 -

```
for(UIViewController *viewController in tabBarController.viewControllers)
{
    if([viewController isKindOfClass:[UINavigationController class]])
       [(UINavigationController *)viewController popToRootViewControllerAnimated:NO];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-25T22:16:19.120

拉胡尔的答案是完美的解决方案。但是，如果您的标签栏中有超过 5 个标签，那么您将看到“更多”标签。您将需要明确地重置此选项卡（只需将 tabBarController.moreNavigationController 弹出到 rootViewController）。

这是代码示例：

```
for(UIViewController *viewController in tabBarController.viewControllers)
{
    if([viewController isKindOfClass:[UINavigationController class]])
       [(UINavigationController *)viewController popToRootViewControllerAnimated:NO];
}
[tabBarController.moreNavigationController popToRootViewControllerAnimated:NO]; 
```

![..](../Images/8d70cd4eb6b3da80e55964ac61f2d009.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-26T02:23:33.613

对于任何需要它的人来说，这里是 Swift 5：

```
if let tabVcs = navigationController?.tabBarController?.viewControllers {
        for vc in tabVcs {
            if let navVc = vc as? UINavigationController {
                navVc.popToRootViewController(animated: false)
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-05T04:00:40.557

另一个选择是使用 NSNotifications。关闭模式视图（计时器上的幻灯片放映）时，我需要在所有选项卡上触发 popToRootViewController，这是我弄清楚如何做到这一点的唯一方法。我在模态视图的 viewWillDissapear 方法中触发了 NSNotification，然后在我希望关闭的每个视图中对其进行响应。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-13T12:57:13.967

```
func popAll(){

    let tabBarController = window!.rootViewController as! UITabBarController
    tabBarController.delegate = self

    if let tabBarViewControllers = tabBarController.viewControllers {

    let campusController = tabBarViewControllers[0] as! UINavigationController

    let campusTVC = campusController.viewControllers[0] as! CampusTVC

    _ = campusTVC.navigationController?.popToRootViewController(animated: false)

    let adController = tabBarViewControllers[1] as! UINavigationController

    let adminTVC = adminController.viewControllers[0] as! AdTVC

    _ = adminTVC.navigationController?.popToRootViewController(animated: false)

    let searchController = tabBarViewControllers[2] as! UINavigationController

    let searchTVC = searchController.viewControllers[0] as! SearchTVC
    _ = searchTVC.navigationController?.popToRootViewController(animated: false)

    } 

} 
```

我的代码在 Swift 中弹出所有选项卡的示例。这是在我的 App Delegate 中。这就是我在 VC 中的称呼

```
let appDelegate = UIApplication.shared.delegate as! AppDelegate
appDelegate.popAll() 
```

# .net - TextFieldParser 包含的字段不是“

> ID：14343708
> 
> 赞同：3
> 
> 时间：2013-01-15T17:50:33.250
> 
> 标签：.net, parsing

。网

用 TextFieldParser 可以分配分隔符。

但封闭是布尔值

[TextFieldParser.HasFieldsEnclosedInQuotes](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.hasfieldsenclosedinquotes.aspx)

我如何为随附的内容指定 like ®。

如果答案是读取每一行然后拆分，则不要提供该代码。
我已经有一个“手动”解析器。
我的问题是我是否可以使用 TextFieldParser。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:59:01.690

CodePlex 上的这个[Fast CSV Reader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)库支持自定义的“引用字符”，可以设置为 ®。您可以使用它来代替`TextFieldParser`，它只支持双引号来包含记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:52:17.307

该类`TextFieldParser`仅支持用双引号 ( `"`) 括起来。没有办法改变这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T18:01:09.687

您可以`®`在`"`调用`TextFieldParser`. 通过预处理磁盘上的文件，或使用某种包装`TextReader`. 这是我写的一个例子：

```
/// <summary>
/// Wrapping text reader that transforms each line of text with 
/// the supplied deleagte before it is read.
/// </summary>
public class TransformingTextReader : TextReader
{
    private readonly TextReader _innerReader;
    private readonly Func<string, string> _lineTransform;
    private StringReader _lineReader;

    public TransformingTextReader(TextReader innerReader, 
        Func<string, string> lineTransform)
    {
        _innerReader = innerReader;
        _lineTransform = lineTransform;
        _lineReader = new StringReader(string.Empty);
    }

    public override int Read()
    {
        // Read next character in line
        var result = _lineReader.Read();

        // If end of line (or beginning of stream)
        if (result == -1)
        {
            // Read line from underlying reader
            var line = _innerReader.ReadLine();
            if (line != null)
            {
                // Transform the line, and begin reading its characters
                line = _lineTransform(line) + "\r\n";
                _lineReader = new StringReader(line);
                result = _lineReader.Read();
            }
        }
        return result;
    }

    protected override void Dispose(bool disposing)
    {
         base.Dispose(disposing);
         if (disposing)
         {
             // Make sure we dispose the underlying reader as well
             _innerReader.Dispose();
         }
     }
} 
```

这将允许您执行以下操作：

```
var fileReader = new StreamReader(path);
var transformingReader = new TransformingTextReader(fileReader, 
    s => s.Replace('®', '\"'));
using (var parser = new TextFieldParser(transformingReader)
{
    // Your code
} 
```

**更新**：这是一个如何使用 TransformingTextReader 转义内部引号的示例（参考我的评论）：

```
 // Use regex to escape quotes not adjacent to a delimiter
    var pattern = "(?<=[^,])\"{1,2}(?=[^,])";
    var replacement = "\"\"";
    var regex = new Regex(pattern, RegexOptions.Compiled);
    var transformingReader = new TransformingTextReader(fileReader, 
        s => regex.Replace(s, replacement)); 
```

当然，您可以将多个`TransformingTextReader`实例链接在一起以执行多个转换。;-)

# git - Git 在合并时忽略已删除的文件

> ID：14343711
> 
> 赞同：9
> 
> 时间：2013-01-15T17:50:36.787
> 
> 标签：git

我有两个存储库。有时，我想将的内容合并`other`到`main`. 但是，合并会忽略已删除的文件。让我通过一个例子来解释它：

```
mkdir -p test/main test/other

cd test/other/
git init
touch one two three
git add .
git commit -m "Add one, two and three."

cd ../main/
git init
touch four
git add .
git commit -m "Add four." 
```

添加`other`到`main`远程。

```
git remote add other ../other/
git fetch other 
```

合并其内容。

```
git merge --squash other/master
git commit -m "Merge other." 
```

它正确地添加了文件。现在，删除`other`.

```
cd ../other/
git rm two
git commit -m "Remove two." 
```

合并更改为`main`.

```
cd ../main/
git fetch other
git merge --squash other/master 
```

合并后`git status`说：

```
# On branch master
nothing to commit (working directory clean) 
```

我希望合并删除`two`，因为它在`other`. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T17:54:14.473

这里的问题是您使用壁球提交。

当你做 a`merge --squash`时，你放弃了一个分支的所有历史。你还没有真正“合并分支”——你只是应用了它的历史的浓缩表示。因此，如果您稍后执行`merge --squash`，git 将重新应用分支历史记录中的*所有*提交（因为两个分支没有共同的祖先）。

当您执行第*一个* 时，您将创建一个包含“创建一、二和三”`merge --squash`的提交。`main`所以历史`main`是先“创四”，后“创一、二、三”。

当您执行第二个`merge --squash`时，您添加了一个提交，该提交由（实际上）“创建一个、两个和三个”加上“删除两个”组成。这两个提交的网络**（**压扁！）是“创建一个和三个”。因此 git 会自动将“创建一和三”提交与您当前的回购状态合并 - 为您留下四个文件。内容合并自动成功，因为文件“一”和“三”两边相同。

如果您想使用遥控器使存储库保持最新，则应该使用“真正的”合并或挑选而不是挤压。A`merge --squash`与“播放远程存储库中的所有新提交并将它们集成到这里”不同。

# ios - 如何检测哪个视图正在处理我的点击？

> ID：14343712
> 
> 赞同：0
> 
> 时间：2013-01-15T17:50:37.177
> 
> 标签：ios, uiview, touch-event, uiview-hierarchy

在我的视图层次结构底部的某个地方，我正在实现一个 touchesBegan 方法。它会触发除单指点击之外的所有触摸。这使我相信在层次结构中更高的某个地方，一个视图正在拦截/处理单指点击，但我一生都找不到该视图。有没有调试这个的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:55:27.800

试试这个方法，如果成功的话：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
{
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self.contentView];

    for (UIView *view in self.contentView.subviews)
    {
        if ([view isKindOfClass:[MyCustomView class]] &&
            CGRectContainsPoint(view.frame, touchLocation))
        {

        }
    }
} 
```

# ruby - 重启 Sidekiq

> ID：14343715
> 
> 赞同：17
> 
> 时间：2013-01-15T17:50:51.603
> 
> 标签：ruby, sinatra, restart, sidekiq

重启sidekiq的正确方法是什么。当我启动它时，它似乎缓存了我的工人代码，所以每次我对我的工人进行更改时，我都需要重新启动它。我正在使用 Ctrl/C 执行此操作，但该过程需要很长时间才能结束并将我返回到提示符。

有没有办法立即强制重启？

我正在使用通过 POW 运行的 Sinatra 的最新版本。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-15T23:23:35.650

Sidekiq 带有命令 sidekiqctl，它可以停止与您的 Sidekiq 进程关联的 PID。您传入 PID 文件和等待所有线程完成的秒数。

样品用法：

```
sidekiqctl stop #{rails_root}/tmp/pids/sidekiq_website_crawler.pid 60 
```

这里，60 表示等待所有 Sidekiq 线程完成处理的秒数。如果 60 秒过去了，但都没有完成，它们会被自动杀死。

我还推荐使用 God gem 来监控、停止、启动和重启 Sidekiq。

一旦你这样做了，你可以使用 bundle exec god stop 来停止所有 sidekiq 线程。

这是我的上帝文件，例如：

```
rails_env = ENV['RAILS_ENV'] || "development"
rails_root = ENV['RAILS_ROOT'] || "/home/hwc218/BuzzSumo"
 God.watch do |w|
     w.dir      = "#{rails_root}"
     w.name     = "website_crawler"
     w.interval = 30.seconds
     w.env      = {"RAILS_ENV" => rails_env}
     w.interval = 30.seconds
     w.start = "bundle exec sidekiq -C #{rails_root}/config/sidekiq_website_crawler.yml"
     w.stop = "sidekiqctl stop #{rails_root}/tmp/pids/sidekiq_website_crawler.pid 60"
     w.keepalive

    # determine the state on startup
     w.transition(:init, { true => :up, false => :start }) do |on|
    on.condition(:process_running) do |c|
      c.running = true
    end
    end

     # determine when process has finished starting
      w.transition([:start, :restart], :up) do |on|
      on.condition(:process_running) do |c|
      c.running = true
      c.interval = 5.seconds
    end

      # failsafe
       on.condition(:tries) do |c|
      c.times = 5
      c.transition = :start
      c.interval = 5.seconds
     end
    end

    # start if process is not running
     w.transition(:up, :start) do |on|
    on.condition(:process_running) do |c|
      c.running = false
    end
    end

    w.restart_if do |restart|
        restart.condition(:restart_file_touched) do |c|
          c.interval = 5.seconds
          c.restart_file = File.join(rails_root, 'tmp', 'restart.txt')
        end
    end
 end 
```

# html - HTML5 视频不循环

> ID：14343727
> 
> 赞同：6
> 
> 时间：2013-01-15T17:51:18.733
> 
> 标签：html, google-chrome, video, webkit, mamp

我有一个奇怪的问题。我的两个版本的 chrome（普通版和金丝雀版）拒绝循环播放我正在播放的视频。或者好吧，有时他们会循环两次，然后停止。奇怪的是，它在 safari 中工作，所以我知道这不是一些 webkit shizzle 下降。

```
<video autoplay="autoplay" data-type="bg" id="video" loop="loop">
    <source src="/assets/video/_L88P.mp4" content-type="video/mp4">
</video> 
```

我的设置是一个带有山狮和 mamp 的 mac，chrome 版本是最新的（canary：26.0.1384.0 和常规：24.0.1312.52）。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-06T20:44:39.473

我还发现如果 MP4 关键帧设置不正确，Chrome 会阻塞。例如，在 After Effects 中的输出中，如果关键帧距离保留为“自动”，则视频无法正确循环播放。

我的怀疑是 Chrome 需要在视频长度内均匀分割的关键帧，而不是在关键帧之间结束。即，如果您的视频是 24 帧，则使您的关键帧距离可整除，例如 4。

![After Effects 渲染输出设置](../Images/2a804ea8b8e00c119bb0b0f5abcd5e79.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T10:25:49.713

这个解决了，这是我的解决方案：

视频的分辨率太大。即使比特率很低，chrome 也不想这样做。将其调整为 720p 并且效果很好。

如果您遇到问题，其他建议的解决方案：

*   设置正确的内容类型，包括编解码器。
*   确保您使用的浏览器支持您的文件类型。对于活的东西，始终至少使用 .mp4 和 .ogg，并包括 .webm 以确保安全。
*   将其设置为通过 javascript 循环。这也是一个很好的后备方案，因为浏览器不能使用视频标签上的循环属性（主要示例是 ipad）。下面是我昨天复制的一个网站的一些示例代码（对不起，不记得出处了）

    ```
    var myVideo = document.getElementById('video');
    if (typeof myVideo.loop == 'boolean') { // loop supported
        myVideo.loop = true;
    } else { // loop property not supported
        myVideo.on('ended', function () {
        this.currentTime = 0;
        this.play();
        }, false);
    }
    myVideo.play(); 
    ```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-23T16:17:22.237

仅当您在本地运行您的网站时才会发生这种情况......
我在 Chrome 上遇到了同样的问题，但我在 XAMP 本地服务器中找到了解决方案......

您可以使用任何您想要的本地服务器（如 wamp 等）...但是该站点必须位于服务器根目录中...这样 chrome 就可以理解视频来自服务器而不是来自本地混搭

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-20T09:49:36.777

我最近自己也遇到了一些问题。事实证明，这与我的网站位于本地主机上有关。当我将站点移动到我的生产服务器并进行远程测试时，一切都按预期工作。

为了强制它在 localhost 上工作，我使用了 Joakim Bananskal 的解决方案，但是播放视频会导致错误，因为它已经在尝试播放它，所以我只需要先使用`load()`.

将其设置为循环似乎也引起了问题，因为视频从未触发过该`ended`事件。

我对 localhost 的最终解决方案如下：

```
$("video").each(function () {
    this.loop = false;
    this.onended = function () {
        this.load();
    };
    this.play();
}); 
```

使用此 HTML：

```
<video preload="auto" autoplay>
    <source src="/video.mp4" type="video/mp4">
    <source src="video.webm" type="video/webm">
    <source src="/video.ogg" type="video/ogg">
    <img src="/backupImage.png" />
</video> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-09T08:27:48.007

出于某种原因，我遇到了“结束”事件绑定的问题。

这是我修复它的方法：

1.  从视频中删除了“循环”属性。
2.  添加 onended 以调用 replay()

    ```
    <video autoplay='true' onended="replay()"></video>
    ```

3.  定义 replay() 如下：

    ```
    功能重播（）{
        console.log('视频结束');
        document.getElementsByTagName('video').currentTime = 0;
        document.getElementsByTagName('video')[0].play();
    }
    ```

# c - 头文件被包含两次

> ID：14343729
> 
> 赞同：3
> 
> 时间：2013-01-15T17:51:29.740
> 
> 标签：c, visual-studio, compiler-errors, header-files

我对 C 比较陌生（因为我不想使用 C++，或者至少现在还不想），而且我不确定如何解决我遇到的包含错误。

我有一个包含常量值 1000 的头文件，名为 Test。

```
const int Test = 1000; 
```

我将此文件包含在 2 个文件中 - Myfile.c 和 Myfile2.c 每个都包含以下文件：

```
#include "MyHeader.h" 
```

我的项目将不会构建/编译，并且我发现它包含两次标题，这是不允许的，因为我两次声明我的变量“测试”。经过研究，我在维基百科上发现了这个：http: [//bit.ly/10wPraP](http://bit.ly/10wPraP)

我用了这个“包括守卫”

例子：

```
#ifndef MY_HEADER
#define MY_HEADER
 const int Test = 1000;
#endif 
```

而且我还尝试过一次预处理器（？）命令编译指示。

```
#pragma once 
```

但是，我的程序仍然无法构建。我现在收到错误消息，说变量“Test”已在 MyFile.obj 中定义。

我认为这可能是我正在使用的 Visual Studio 主义，但我的 2010 Express C++ 和 VS2003 Professional 都不会构建它。我已经尝试在 Visual Studio 中清理项目，但我不确定还能做什么。

我是不是很傻，在这里遗漏了一些明显的东西，这就是为什么它不起作用？

我习惯于 C# 和“使用”命名空间而不是包含。我在 VS 上设置只编译 C 代码会影响这个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T17:57:21.403

包括警卫与它无关。您需要将声明与定义分开，并且只有*一个*定义（这称为“一个定义规则”，ODR）：

**标头.h：**

```
extern const int n; 
```

**一个源文件：**

```
#include "header.h"

const int n = 1000; 
```

**所有其他源文件：**

```
#include "header.h" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T17:55:53.637

**有用的参考：**

*   维基百科上的`extern`关键字：[https ://en.wikipedia.org/wiki/External_variable](https://en.wikipedia.org/wiki/External_variable)
*   关于单一定义规则的维基百科：[https ://en.wikipedia.org/wiki/One_Definition_Rule](https://en.wikipedia.org/wiki/One_Definition_Rule)

问题在于#include 时处理头文件的方式：头文件实际上是复制并粘贴到 C 文件的正文中。这意味着 Myfile.c 和 Myfile2.c 都有自己的名为 Test 的 int 声明——本质上是创建一个变量的两个不同版本。然后链接器抱怨有两个不同的变量同名。

解决方案是将其放入`const int Test = 1000;`您的 C 文件之一，并添加`extern const int Test;`到 MyHeader.h。这样，变量只声明一次，并且所有文件都知道一个变量，因为`extern`指令告诉他们另一个文件具有`Test`他们正在寻找的变量。

**我的头文件.h**

```
extern const int Test; 
```

**Myfile.c**（例如）

```
#include "MyHeader.h"
...
const int Test = 1000; 
```

**我的文件2.c**

```
#include "MyHeader.h"
...
<use Test> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T17:58:06.750

这是对的。您有两个*定义* `Test`. 您应该只定义一次。由于头文件被包含在所有地方，它们通常应该只*声明*变量，而不是*定义*它们。例如

标题：

`const int Test;`

正好一个c文件：

`const int Test = 1000;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T17:58:54.370

在任何一个文件中定义该变量，`.c`并在头文件中将其声明为 extern。

```
#ifndef MY_HEADER
#define MY_HEADER
 extern const int Test;
#endif 
```

在`Myfile.c`定义变量

```
const int Test = 1000; 
```

# javascript - 修改 document.location 以便打开一个新选项卡/窗口，而不是在当前选项卡中导航

> ID：14343731
> 
> 赞同：14
> 
> 时间：2013-01-15T17:51:31.653
> 
> 标签：javascript, bookmarklet

我想编写一个可以修改任何网页的书签，以便当该页面上的 JavaScript 代码执行类似操作`document.location = 'http://site.tld'`或`document.location.href = 'http://site.tld'`页面将打开一个新选项卡或窗口而不是更改位置时；就像代码一样`window.open('http://site.tld')`；

我可以以某种方式修改原型来实现这个目标吗？（我用这个词很粗心，因为虽然我读过几次关于修改原型的文章，但我从来没有真正做过。）或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T02:24:36.447

你没有说你使用的是哪个浏览器，但我能想到的*唯一*方法是使用 Firefox 的[`Object.watch`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/watch).

```
document.watch('location', function(prop, oldval, newval) {
    window.open(newval);
    return '#';
}); 
```

这将干预任何设置的尝试`document.location`，打开一个具有相同参数的窗口，然后将分配更改为`'#'`（通常什么都不做）。

以小书签形式，并扩展为涵盖`document.location`和`window.location`：

```
javascript:(function(){var handle=function(prop, oldval, newval){window.open(newval); return '#';};document.watch('location',handle);window.watch('location',handle);})(); 
```

但即使这样也不会反对分配给`document.location.href`; 位置对象是一些`Object.watch`拒绝工作的特殊事物。

如果这还不够，您可以`onbeforeunload`在尝试离开并取消它时提示您（如果这是您的目标）。

我有最好的，对不起！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T04:28:33.643

我本来建议使用 ES5 [Object.defineProperty](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty)，但应该如此， document.location 是一个“configurable: false”对象，这意味着它无法更改。出于好奇，如果您能够更改它，代码将如下所示：

```
Object.defineProperty(document.location, 'href', {
     get: function() { return this.href },
     set: function(value) { this.href = value; window.open(value); return false} //Not sure about this part, but anyways...
}); 
```

编辑：回答你的问题，我不认为这是可以通过 bookmarlet 实现的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T11:37:51.560

我尝试了不同的方法，但几乎不可能跟踪目标窗口的href。

使用

```
window.onbeforeunload = function(e) {
    window.open(document.location.href);
}; 
```

将在另一个选项卡中打开您当前的窗口，并在当前窗口中打开目标。问题是 onbeforeunload 不仅会在更改窗口位置时触发，甚至在关闭窗口或刷新窗口时也会触发。取决于你想在哪里使用它。

PS：

```
window.onunload = function() {
    document.location = document.location;
} 
```

如果您对此进行测试，当您更改页面位置时，您将能够在地址栏中看到新的 url，然后您将被重定向到当前页面。我没能找到新的目标。祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T12:16:10.990

如果原型是函数调用而不是赋值，您只能对原型做一些事情。例如在 document.write 的情况下

```
document.write = function(txt) {
   alert("txt");
};

document.write("test"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-01-06T18:57:36.597

FWIW：这适用于最新的 Firefox，以在新选项卡中搜索选定的文本：

javascript:Qr=document.getSelection();if(!Qr){void(Qr=prompt('Keywords...',''))};if(Qr)window.open(" [http://google. com/search?query=](http://google.com/search?query=) "+escape(Qr));void(0)

# laravel - 嵌套捆绑控制器路由

> ID：14343735
> 
> 赞同：0
> 
> 时间：2013-01-15T17:51:36.863
> 
> 标签：laravel, laravel-routing

[在](http://forums.laravel.io/viewtopic.php?id=2030)这个论坛上使用这种方法，我已经能够将子域路由到捆绑包。但是我开始开发我的 api 包，我想对 api 进行版本控制。我已经像这样设置了我的 api 包

*   捆绑
*   捆绑包/api
*   捆绑包/控制器
*   捆绑包/控制器/v1

我`route_file.php`在捆绑文件夹的根目录中有一个，就像上面的教程一样。这是`route_file.php`

```
/// bundles/api/route_file.php 
// This is included into application/routes.php when default domain used

Route::get('/', 'api::home@index');
Route::controller('api::v1.tasks');

/*
|--------------------------------------------------------------------------
| Route Filters
|--------------------------------------------------------------------------
*/ 
```

导航到`api.xyz.com/v1/tasks`我不断获取`404`页面。路由正确，请指出正确的方向

# python - Python - 平方和

> ID：14343736
> 
> 赞同：2
> 
> 时间：2013-01-15T17:51:41.263
> 
> 标签：python, python-2.7

试图构建一段代码，返回 range(1, limit) 中的数字是否是两个平方数的总和（平方数，例如`1**2 = 1`, `2**2 = 4`- 所以我试图将它们分配给一个数字列表，无论它们是总和任何这些平方数的组合 - 例如 1+1、1+4、4+16 等）。下面是我写的内容，但它对所有值都返回“未平方”，这是错误的。我认为代码可能存在一个小问题，但我对此很陌生，并且正在努力了解它是什么。我将非常感谢任何指导。

代码：

```
for n in range(1,21):
    lst = range(1,21)
    squares = [x**2 for x in lst]
    for i in range(1, 21):
        for x in range(1, 21):
            if i in squares:
                if x in squares:
                    n2 = i+x
    if n2 == n:
        print n, " - Sum of Squares"

    else:
        print n, " - Not a Sum of Squares" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:02:19.663

这不是原来的::: 但它可能会给你更多的洞察力。

```
In [20]: from itertools import combinations_with_replacement

In [21]: nk=map(sum,(combinations_with_replacement([x**2 for x in range(1,21)],2)))

In [22]: for n in range(1,21):
    ...:     if n in nk:
    ...:         print n, " -Sum of Squares"
    ...:     else:
    ...:         print n, " -Not a sum of Squares"
    ...:         
1  -Not a sum of Squares
2  -Sum of Squares
3  -Not a sum of Squares
4  -Not a sum of Squares
5  -Sum of Squares
6  -Not a sum of Squares
7  -Not a sum of Squares
8  -Sum of Squares
9  -Not a sum of Squares
10  -Sum of Squares
11  -Not a sum of Squares
12  -Not a sum of Squares
13  -Sum of Squares
14  -Not a sum of Squares
15  -Not a sum of Squares
16  -Not a sum of Squares
17  -Sum of Squares
18  -Sum of Squares
19  -Not a sum of Squares
20  -Sum of Squares

In [23]: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:55:22.650

你是这个意思吗？

```
for n in range(1,21):
    lst = range(1,21)
    squares = [x**2 for x in lst]
    for i in range(1, 21):
        for x in range(1, 21):
            if i in squares:
                if x in squares:
                    n2 = i+x
                    if n2 == n:
                        print n, " - Sum of Squares"

                    else:
                        print n, " - Not a Sum of Squares" 
```

输出：

```
>>> 
1  - Not a Sum of Squares
1  - Not a Sum of Squares
1  - Not a Sum of Squares
1  - Not a Sum of Squares
1  - Not a Sum of Squares
1  - Not a Sum of Squares
1  - Not a Sum of Squares
1  - Not a Sum of Squares
1  - Not a Sum of Squares
1  - Not a Sum of Squares
1  - Not a Sum of Squares
1  - Not a Sum of Squares
1  - Not a Sum of Squares
1  - Not a Sum of Squares
1  - Not a Sum of Squares
1  - Not a Sum of Squares
2  - Sum of Squares
2  - Not a Sum of Squares
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T17:58:59.427

当您将 n 与 n2 计算的最后一个值进行比较时，您应该这样做

```
for n in range(1,21):
    lst = range(1,21)
    squares = [x**2 for x in lst]
    sum_of_squares = False
    for i in range(1, 21):
        for x in range(1, 21):
            if i in squares:
                if x in squares:
                    n2 = i+x
                    if n2 == n:
                        sum_of_square = True
    if sum_of_square:
        print n, " - Sum of Squares"
    else:
        print n, " - Not a Sum of Squares" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T18:10:56.160

我认为生成所有平方和的数字会更容易。

```
# oversized output array so we can use the numbers in 1..21 as indices
is_ssq = [False for n in range(22)]
squares = [x * x for x in range(1, 21)]
for i in squares:
    for x in squares:
        if i + x < 21:
            is_ssq[i + x] = True 
```

所以`is_ssq[n]`表示是否`n`是两个平方的和。

* * *

如果你想获得所有 Pythonic，你可以使用`itertools`并保存一个缩进级别：

```
import itertools

is_ssq = [False for n in range(22)]
squares = [x * x for x in range(1, 21)]
for i, x in itertools.product(squares, squares):
    if i + x < 21:
        is_ssq[i + x] = True 
```

# python - 烧瓶-sqlalchemy 或 sqlalchemy

> ID：14343740
> 
> 赞同：127
> 
> 时间：2013-01-15T17:51:56.637
> 
> 标签：python, flask, orm, sqlalchemy, flask-sqlalchemy

我是烧瓶和 sqlalchemy 的新手，我刚开始开发烧瓶应用程序，我现在正在使用 sqlalchemy。我想知道使用 flask-sqlalchemy 与 sqlalchemy 是否有任何显着的好处。[我在http://packages.python.org/Flask-SQLAlchemy/index.html](http://packages.python.org/Flask-SQLAlchemy/index.html)中找不到足够的动机，或者我不明白它的价值！我会很感激你的澄清。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2016-11-13T20:27:50.980

它的主要特点`Flask-SQLAlchemy`是与 Flask 应用程序的适当集成——它创建和配置引擎、连接和会话，并将其配置为与 Flask 应用程序一起使用。

此设置非常复杂，因为我们需要创建[作用域会话](http://docs.sqlalchemy.org/en/latest/orm/contextual.html)并根据 Flask 应用程序请求/响应生命周期正确处理它。

在理想世界中，这将是 的唯一特征`Flask-SQLAlchemy`，但实际上，它增加了一些东西。查看[文档](https://flask-sqlalchemy.palletsprojects.com/en/2.x/quickstart/#road-to-enlightenment)以获取更多信息。或者查看这篇博客文章以及它们的概述：[Demystifying Flask-SQLAlchemy](http://derrickgilland.com/posts/demystifying-flask-sqlalchemy/)（更新：原始文章目前不可用，[webarchive 上有一个快照](https://web.archive.org/web/20190901011222/http://derrickgilland.com/posts/demystifying-flask-sqlalchemy/)）。

当我第一次使用 Flask 和 SQLAlchemy 时，我不喜欢这种开销。我过去并从扩展中提取了会话管理代码。这种方法很有效，尽管我发现正确地进行这种集成非常困难。

因此，更简单的方法（在我正在处理的另一个项目中使用）是直接加入`Flask-SQLAlchemy`，不使用它提供的任何附加功能。您将拥有并且可以像使用纯设置`db.session`一样使用它。`SQLAlchemy`

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-11-13T21:37:17.133

Flask-SQLAlchemy 为您提供了许多不错的额外功能，否则您最终会使用 SQLAlchemy 实现自己。

## 使用 Flask-SQLAlchemy 的积极方面

* * *

1.  Flask_SQLAlchemy 为您处理会话配置、设置和拆卸。
2.  为您提供使查询和分页更容易的声明性基本模型
3.  后端特定设置。Flask-SQLAlchemy 扫描已安装的库以获取 Unicode 支持，如果失败则自动使用 SQLAlchemy Unicode。
4.  有一个名为的方法`apply_driver_hacks`，可以自动将健全的默认值设置为诸如 MySQL 池大小之类的东西
5.  有很好的内置方法 create_all() 和 drop_all() 用于创建和删除所有表。如果你做了一些愚蠢的事情，对测试和 python 命令行很有用
6.  它为您提供 get_or_404() 而不是 get() 和 find_or_404() 而不是 find() > [http://flask-sqlalchemy.pocoo.org/2.1/queries/的代码示例](http://flask-sqlalchemy.pocoo.org/2.1/queries/)

自动设置表名。Flask-SQLAlchemy 自动设置你的表名转换你的`ClassName`>`class_name`这可以通过设置`__tablename__`类列表项来覆盖

## 使用 Flask-SQLAlchemy 的负面影响

* * *

1.  如果你需要的话，使用 Flask-SQLAlchemy 会给从 Flask 迁移到 Pyramid 增加额外的困难。这主要是由于 Flask_SQLAchemy 上的自定义声明性基础模型。
2.  使用 Flask-SQLAlchemy，你可能会使用一个社区比 SQLAlchemy 本身小得多的包，我不能轻易地在短期内放弃积极的开发。
3.  如果您不知道 Flask-SQLAlchemy 的一些不错的附加功能，它们可能会让您感到困惑。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-03-04T03:18:24.280

老实说，我没有看到任何好处。恕我直言，Flask-SQLAlchemy 创建了一个您并不真正需要的附加层。在我们的例子中，我们有一个相当复杂的 Flask 应用程序，它具有多个数据库/连接（主从），同时使用 ORM 和 Core，其中除其他外，我们需要控制我们的会话/数据库事务（例如，dryrun 与提交模式）。Flask-SQLAlchemy 添加了一些额外的功能，例如自动销毁会话，为您假设一些通常不是您需要的东西。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-01-16T07:48:39.183

SQLAlchemy 文档明确指出您应该使用 Flask-SQLAlchemy（尤其是如果您不了解它的好处！）：

> [...] Flask-SQLAlchemy 等产品 [...] SQLAlchemy 强烈建议在可用时使用这些产品。

您可以在[会话常见问题解答](http://docs.sqlalchemy.org/en/latest/orm/session_basics.html#when-do-i-construct-a-session-when-do-i-commit-it-and-when-do-i-close-it)的第二个问题中找到此引用和详细动机。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-01-06T20:46:09.793

正如@schlamar 建议的那样，Flask-SqlAlchemy 是一件好事。我只是想为那里提出的观点添加一些额外的上下文。

不要觉得你在选择一个而不是另一个。例如，假设我们想使用使用 Flask-Sqlalchemy 的模型从表中获取所有记录。它很简单

```
Model.query.all() 
```

对于很多简单的情况，Flask-Sqlalchemy 完全没问题。我想说的额外一点是，如果 Flask-Sqlalchemy 不能做你想做的事，那么你没有理由不能直接使用 SqlAlchemy。

```
from myapp.database import db

num_foo = db.session.query(func.count(OtherModel.id)).filter(is_deleted=False).as_scalar()

db.session.query(Model.id, num_foo.label('num_foo')).order_by('num_foo').all() 
```

如您所见，我们可以轻松地从一个跳转到另一个，而在第二个示例中，我们实际上使用的是 Flask-Sqlalchemy 定义的模型。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-07-08T16:48:31.590

下面是一个例子，说明 flask-sqlalchemy 比普通的 sqlalchemy 更有优势。

假设您使用的是 flask_user。

flask_user 自动创建和验证用户对象，因此它需要访问您的数据库。UserManager 类通过调用一个称为“适配器”的东西来实现这一点，该适配器抽象了数据库调用。您在 UserManager 构造函数中提供了一个适配器，并且该适配器必须实现以下功能：

```
class MyAdapter(DBAdapter):
    def get_object(self, ObjectClass, id):
        """ Retrieve one object specified by the primary key 'pk' """
        pass

    def find_all_objects(self, ObjectClass, **kwargs):
         """ Retrieve all objects matching the case sensitive filters in 'kwargs'. """
        pass

    def find_first_object(self, ObjectClass, **kwargs):
        """ Retrieve the first object matching the case sensitive filters in 'kwargs'. """
        pass

    def ifind_first_object(self, ObjectClass, **kwargs):
        """ Retrieve the first object matching the case insensitive filters in 'kwargs'. """
        pass

    def add_object(self, ObjectClass, **kwargs):
        """ Add an object of class 'ObjectClass' with fields and values specified in '**kwargs'. """
        pass

    def update_object(self, object, **kwargs):
        """ Update object 'object' with the fields and values specified in '**kwargs'. """
        pass

    def delete_object(self, object):
        """ Delete object 'object'. """
        pass

    def commit(self):
        pass 
```

如果您使用的是 flask-sqlalchemy，则可以使用内置的 SQLAlchemyAdapter。如果您使用的是 sqlalchemy (not-flask-sqlalchemy)，您可能会对对象保存到数据库的方式（如表的名称）做出不同的假设，因此您必须编写自己的适配器类。

# jquery - 如何使它成为我的第一个 JQuery 插件工作

> ID：14343744
> 
> 赞同：0
> 
> 时间：2013-01-15T17:52:05.187
> 
> 标签：jquery, function, plugins, queue, fade

感谢下面的评论。这是一个更新的问题和代码：

我已经编写了两段代码，一个加载器和顺序淡入。加载器通过添加加载类来工作，该加载类与 css 一起显示加载 spinner.gif。然后删除类并插入图像。

第二个淡入淡出按顺序排列在一系列 div 中。

```
$.fn.myLoader = function() {
    $(this).addClass("loading").queue(function(next) {
        $(this).removeClass("loading");
        $(this).prepend('URL');
        next();
    });
};

$('#logo').myLoader(); 
```

和

```
$('.load').delay(5000).each(function(i) {
    $(this).delay(i * 250).css({
        opacity: 0.0,
        visibility: 'visible'
    }).animate({
        opacity: 1.0
    });
}); 
```

和以下标记：

```
<div id="logo"></div>
    <div class="load" style="visibility: hidden;"></div>
    <div class="load" style="visibility: hidden;"></div>
    <div class="load" style="visibility: hidden;"></div>
    <div class="load" style="visibility: hidden;"></div>
    <div class="load" style="visibility: hidden;"></div>
    <div class="load" style="visibility: hidden;"></div> 
```

这些单独工作，但我想将两者合并，以便加载程序发生，一旦完成，加载顺序图像。

请指出我的方式的错误。

谢谢

# matlab - 不裁剪的图像重映射

> ID：14343745
> 
> 赞同：0
> 
> 时间：2013-01-15T17:52:07.190
> 
> 标签：matlab, image-processing, opencv, computer-vision, scipy

这是这个问题的延续：**[Finding Squares in Image](https://dsp.stackexchange.com/questions/3595/finding-squares-in-image)**

我在那里按照我的答案中的步骤操作：[https](https://dsp.stackexchange.com/a/7526/818) ://dsp.stackexchange.com/a/7526/818 ，我得到了如下给出的答案：

![在此处输入图像描述](../Images/2aaca0ac53bc4182be407905b14b803c.png)

但是在那个答案的最后，我已经解释了一个问题，这就是我的问题。

**解释 ：**

我已经有了上一个链接中步骤 1 中检测到的正方形的质心（这些检测到的正方形在下面的 mask_image 中标记）：

![在此处输入图像描述](../Images/206b14a8dd828beec07314523cf631fc.png)

我创建了如下网格图像（我也知道它们的质心值）：

![在此处输入图像描述](../Images/804a74e7a2565a73e8e291324ec80b59.png)

我还发现网格图像中的哪个点映射到 mask_image 中的对应点。

有了这些信息，我应用**了 scipy.interpolate.griddata()**，然后是 OpenCV 的 cv2.remap() 函数。

其结果如下：

![在此处输入图像描述](../Images/5bff510035b66fcb34d2ed61dbdd1a12.png)

如您所见，除了中心的两个正方形外，所有正方形都被剪裁了。就像，输出仅包含连接 mask_image 的所有质心的边界内的区域。

**下面的场景变得更糟：**

当第一步没有检测到最后一个正方形（黄色）或四个角的任何其他正方形时，情况会更糟。考虑未检测到最后一个。然后下面是我得到的结果，你可以在底部看到一个斜切（用黄色标记）：

![在此处输入图像描述](../Images/a357144ce6b8821826db1f3d4fc25d22.png)

**问题 ：**

为什么重新映射功能不能超出我给出的点？我应该怎么做才能在不剪裁的情况下重新映射它？

我认为即使我给出一些不在边缘的点，它也适用于完整图像。

预期输出：

以下是我在操作结束时预期的输出。（红色边界内的区域是我现在实际得到的）

![在此处输入图像描述](../Images/65f2d77da7a6746a8aa844788e214eb3.png)

寻找一些好的建议...

**更新 ：**

我也在这里添加代码。仅添加重新映射零件代码。完整代码太大，无法在此处添加：

```
# ideal - the grid image - http://i.stack.imgur.com/3QudG.png
# centroids - list of centroids of the squares in mask_image - http://i.stack.imgur.com/jh6bQ.png
# match_pts - list of centroids of the squares in grid image corresponding to squares in mask_image
# warped - the final image obtained after remap - http://i.stack.imgur.com/O26ZA.png

grid_x,grid_y = np.meshgrid(np.arange(ideal.shape[1]),np.arange(ideal.shape[0]))
dst = np.array(centroids) 
src = np.array(match_pts) 
grid_z = griddata(dst,src,(grid_x,grid_y),method='cubic')
map_x_32 = grid_z[:,:,0].astype('float32')
map_y_32 = grid_z[:,:,1].astype('float32')
warped = cv2.remap(ideal, map_x_32, map_y_32, cv2.INTER_CUBIC) 
```

还添加了centroids，match_pts等数据，如果有人想尝试，他们可以直接使用数据而不是从图像中找到它：**[gist.github.com/4540887](http://gist.github.com/4540887)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:46:03.847

第 1 步：无论您从 B、G、R、H、S、V 平面中分析得到的最终二进制图像是什么，都在该图像中执行 blob 计数算法。

第 2 步：根据面积或轮廓长度找到最大的斑点。由于您的斑点将主要是平行四边形类型，因此面积或轮廓，任何一个都可以。

第 3 步：使用最大的 blob（因为最大的 blob 是类似于现实世界正方形的最佳 blob）尝试找到 blob 的方向......这可以通过拟合最佳拟合矩形来获得，或者您可以获得角点...获取连接它们的线的斜率（在水平方向和垂直方向上）。

第4步：一旦你得到两个斜坡，画两条穿过斑点轴的线。对于轴，您可以平均角点，也可以使用质心（质心）...我会使用角点的平均值...

第5步：由于在每个水平和垂直方向上，间距都是相等的（理想的水平和垂直间距也相等，因为它来自您理想的方形图片，但我们不会假设它..）只需要找到另一个可能的质心平行四边形

**底线：**如果任何一个正方形被完美地检测到，您就可以制作整个网格。只需沿最大斑点的水平轴以 2H 的间隔（H = 最大斑点的水平宽度）保持标记中心，并沿斑点的垂直轴垂直保持 2V 的间隔（V = 最大斑点的垂直高度）。

一些图片支持

![在此处输入图像描述](../Images/717579af3a454287a8a9a12a1f631627.png)

![在此处输入图像描述](../Images/f4bb4517d75a0b79a4fdd25ac85238bf.png)

# javascript - SDL 2012 UI，初始化错误，

> ID：14343754
> 
> 赞同：1
> 
> 时间：2013-01-15T17:52:23.907
> 
> 标签：javascript, user-interface, tridion

我已经完成了 的设置`SDL 2012 UI`，但是当我尝试访问网站时 UI 功能区栏没有出现在页面上。它似乎无法初始化 UI 并引发以下 Javascript 错误。

> 无法获取元素的唯一 ID。

`Bootstrap.aspx?mode=js`，第 4 行字符 3749

任何指针都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:57:52.953

您可能对 bootstrap.js 有访问问题。使用萤火虫查看您是否在此资产上获得 403。如果是这样，请进入 CM 的 IIS 控制台并确保此 SiteEdit 站点可访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:08:37.657

SDL 2012 UI 与以前版本的不同之处在于您不会看到网站 UI 功能区，而是 SDL UI 按钮。通过单击此按钮，您将被重定向到带有 SDL UI 界面控件和内容页面的新页面。

看起来 Bootstrap.js 脚本已加载到内容页面上，但在脚本生成 SDL UI 按钮时或单击它后会发生错误（从您的问题中不完全清楚）。

这可能是因为网站脚本对页面内容进行了操作。需要的浏览器调试工具将提供更多详细信息。

# php - 使用谷歌浏览器的 php 包含奇怪的 javascript 行为

> ID：14343756
> 
> 赞同：1
> 
> 时间：2013-01-15T17:52:32.353
> 
> 标签：php, javascript, google-chrome

在我的应用程序（使用 Zend 框架）中，我有一个布局文件 ( `layout.phtml`)，`<head>`其中包含一些 javascript 的部分以这种方式：

```
<head>
  // Some code
  <?php include('template/javascript.php') ?>
</head> 
```

在`javascript.php`我有：

```
<?php
  print '<script type="text/javascript; 
    src="'.PASTA_JAVASCRIPT.DS_URL.'jquery'.DS_URL.'jquery.js" ></script>';
  print '<script type="text/javascript; 
    src="'.PASTA_JAVASCRIPT.DS_URL.'application.js" ></script>';
  // More code 
```

问题是，当我使用 Firefox 时，所有这些脚本都可以正确加载并且可以使用。但是当使用谷歌浏览器时，除了它们在 html 标头上呈现之外，我不能使用 jquery 或我在我的`application.js`.

我需要提到的另一点是，如果我删除 php`include`代码并手动设置`<head>`标签内的脚本，如下面的代码，它就像一个魅力：

```
<head>
  <script type="text/javascript" 
    src="/path/to/my/scripts/jquery.js"></script>
</head> 
```

我能想到的只是 PHP`print/echo`或谷歌浏览器解释事物方式的一些疯狂行为......说真的，我不知道。
任何人都知道可能导致这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:20:43.860

似乎是分号问题..

javascript.php - 试试这个

```
<?php
      print '<script type="text/javascript" src="'.PASTA_JAVASCRIPT.DS_URL.'jquery'.DS_URL.'jquery.js" ></script>';
      print '<script type="text/javascript" 
        src="'.PASTA_JAVASCRIPT.DS_URL.'application.js" ></script>'; 
```

或者使用回声

```
<?php
    echo '<script type="text/javascript" src="'.PASTA_JAVASCRIPT.DS_URL.'jquery'.DS_URL.'jquery.js" ></script>';
    echo '<script type="text/javascript" 
            src="'.PASTA_JAVASCRIPT.DS_URL.'application.js" ></script>'; 
```

# c# - 优化 CIL 输出

> ID：14343761
> 
> 赞同：1
> 
> 时间：2013-01-15T17:52:47.827
> 
> 标签：c#, .net, cil

我正在通过 Reflection.Emit 输出相当长的 CIL 列表。我不需要生成程序集的过程很快，但我确实需要生成的程序集尽快运行，因为我正在生成游戏的内部循环。

我已经找到了微小的局部优化来删除冗余指令，例如 Dup 后跟 Pop，但我想知道是否存在一些能够对此类生成的函数执行常见优化的自动化库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:54:53.883

> 但我想知道是否存在一些能够对此类生成的函数执行常见优化的自动化库。

在大多数情况下，这是由 JIT 在运行时处理的。您能做的最好的事情就是使您生成的代码高效，并以 JIT 可以在运行时根据需要对其进行优化的方式对其进行设计。

# python - 在 Python 2.7 中使用 Ajax 和 Flask 将 POST 值转换为列表

> ID：14343765
> 
> 赞同：0
> 
> 时间：2013-01-15T17:53:00.563
> 
> 标签：python, python-2.7, flask

我正在使用 JavaScript 构建一个列表，结果如下所示：

```
[['14', '15'], ['10']] 
```

我的 Ajax 调用正在对 Flask 服务进行 POST，该服务位于：

```
@app.route('/search/results', methods = ['POST'])
def results():

    key = request.form['key']
    filters = request.form.get('filters', None) 
```

我能够在帖子中获取过滤器，并且当我进行打印时，我会得到正确的“字符串”结果，它看起来与“应该”完全一样。但是，我需要将它们转换为 list()。我对python比较陌生，所以也许我走错了路。

如果我执行以下操作：

```
if filters is not None:
    for f in filters:
        print f 
```

我明白了（简化结果）：

```
[
[
"
1
4
"
]
] 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:57:10.920

通常，通过 HTTP 发送的所有数据都只是字节或字符串。

您需要使用可以处理列表的格式。JSON 就是这样一种格式，flask[直接支持](http://flask.pocoo.org/docs/api/#flask.Request.json)这种格式，前提是您实际上是从 AJAX 调用中发布 JSON 数据：

```
key = request.json['key']
filters = requests.json.get('filters', []) 
```

假设您发布了 JavaScript 结构：

```
{'key': 'somekey', 'filters': [['14', '15'], ['10']]} 
```

# mysql - Mysql REGEXP 与 . 和数字

> ID：14343767
> 
> 赞同：2
> 
> 时间：2013-01-15T17:53:04.317
> 
> 标签：mysql, regex

考虑数据库中的表类别，其列 typeis。数据类型是带值的 varchar

```
 typeis
         ------
         2.5.1
         12
         1.1.1
         11
         letters12
         ......... 
```

我想编写一个只返回带有“。”的记录的查询。和从 0-9 的数字

例如

```
 2.5.1
         1.1.1 
```

到目前为止，我有

```
 select typeis from category where typeis
       not in 
       (select typeis from category where typeis REGEXP  '[^0-9 \.]+')
       and typeis in
       (select typeis from category where typeis REGEXP  '^[0-9]+[\.]') 
```

这似乎有效。问题是仅 1500 条记录就需要 3 秒以上的时间。我想用一个 REGEXP 让它更简单更快，而不是嵌套选择

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T17:56:09.903

尝试：`^[0-9]+\.[0-9]+(\.[0-9]+)*`

这应该匹配以数字开头的事物，包括中间某处的点，以数字结尾，以及尽可能多的这些模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T18:09:59.157

这非常简单且功能强大：

```
^([0-9]+\.*)+ 
```

查询时间问题可能是由没有索引引起的。尝试索引`typeis`列 - 如果可能的话，创建一个完整长度的索引。例如，如果您使用 varchar(255) 创建长度为 255 的索引，例如：

```
create index index_name on table_name (column_name(length)) 
```

# axis2 - 在 Axis2 服务中使用 cayenne：找不到 cayenne.xml

> ID：14343768
> 
> 赞同：1
> 
> 时间：2013-01-15T17:53:05.463
> 
> 标签：axis2, apache-cayenne

我正在尝试`cayenne`在`Axis2`服务中使用（编译为 .aar 文件）。

我能够让服务找到我的`cayenne`jar，但是当我尝试对数据库进行查询时，它会引发以下异常：

> 2013-01-15 17:52:38,891 [http-8080-Processor25] 调试 org.apache.axis2.transport.http.AxisServlet - org.apache.axis2.AxisFault：[v.3.0.2 2011 年 6 月 11 日 09:52 :20] 配置初始化期间出错。[v.3.0.2 Jun 11 2011 09:52:20] [org.apache.cayenne.conf.DefaultConfiguration]：找不到域配置文件“cayenne.xml”。

我一直在尝试将`cayenne.xml`文件放在任何地方（`/lib /WEB-INF/lib /WEB-INF/classes`尽管我只对第一个文件抱有希望）。

有人可以告诉我如何进行吗？

是否可以强制 cayenne 在 my 中查找 cayenne.xml`/lib directory`文件`.aar`？

是否可以打印服务的类加载器使用的类路径（我知道每个服务都应该有自己的类加载器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:56:20.277

虽然我不是 Axis2 专家，但从我对其类加载机制的理论理解来看，我看到了两种选择：

1.  确保 cayenne-server.jar 和 cayenne.xml 由同一个 ClassLoader 加载（cayenne-server.jar 应该在 /WEB-INF/lib 中，而 cayenne.xml - 在 /WEB-INF/classes/ 中），

2.  在您引导 Cayenne 的位置的 Axis 代码中设置当前线程类加载器，以便 DefaultConfiguration 可以找到 XML 文件：

    Thread.currentThread().setContextClassLoader(getClass().getClassLoader());

# c# - 如何更改steema tchart中打印预览对话框的图标？

> ID：14343769
> 
> 赞同：0
> 
> 时间：2013-01-15T17:53:14.650
> 
> 标签：c#, print-preview, teechart

我的 Windows 窗体中有 Steema tchart。每当我尝试打印它并获得预览时，它都会给我左上角的旧图标。

有什么办法可以改变图标吗？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:17:23.310

目前唯一的选择是成为 TeeChart 源代码客户并自定义编辑器以满足您的需求，或者创建您的自定义编辑器以继承现有的类，正如我[在此处](http://www.teechart.net/support/viewtopic.php?f=4&t=9763&p=40277&hilit=Change%20icon#p40296)解释的那样。

# java - 调用远程服务的线程等待方法完成？

> ID：14343770
> 
> 赞同：0
> 
> 时间：2013-01-15T17:53:14.773
> 
> 标签：java, android, service, remote-access, remoteobject

我做了一个调用远程服务的简单测试（在不同的进程上），我发现了一些非常令人惊讶的事情。

假设我们有两个进程： **Process-A 与 Thread-A** 和 **Process-B**。

如果进程 A 正在运行 Thread-A 并且 Thread-A 使用 IPC - AIDL 调用远程 void 方法。将会发生的情况是：Process-B 将让其 Binder 线程之一运行调用的方法。在此期间，进程-A 中的线程-A 将等待。只有在 Process-B 中的 Binder 线程完成方法调用后，才会通知线程 A 并恢复其工作。

**我的问题：** 这是标准行为吗？如果是这样，为什么会这样？如果线程 A 是 void 方法，则不应等待。（“oneway”与它有关吗？）

**我的代码：**

**在过程 A 中：**

```
Log.d("Text", "Lior: Client: Thread: " + Thread.currentThread().getName() + " Passing parcelableClass:     parcelableClass.hashCode: " + parcelableClass.hashCode());
for(int i = 0; i < 1; i++) {

_iRemoteServiceBinder.passObject(parcelableClass);

}
Log.d("Text", "Lior: Client: Thread: " + Thread.currentThread().getName() + " Passed parcelableClass:     parcelableClass.hashCode: " + parcelableClass.hashCode()); 
```

**在过程 B 中：**

```
private final IRemoteServicePassObject.Stub _binder = new IRemoteServicePassObject.Stub() {

    @Override
    public void passObject(ParcelableClass parcelableClass)
            throws RemoteException {

        Log.d("Text", "Lior: Service: got pacelableClass: a: " + parcelableClass.getA() + 
                " b: " + parcelableClass.getB() + 
                " s: " + parcelableClass.getS() + " hashCode: " + parcelableClass.hashCode()
                + " Running thread: " + Thread.currentThread().getName());

        try {

            Thread.currentThread().sleep(5000);

        } catch (InterruptedException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        Log.d("Text", "Lior: Service: Finished: "
                + " Running thread: " + Thread.currentThread().getName()); 
```

我得到的结果：

> 01-15 19:52:03.292: D/Text(22792): Lior: Client: 线程: main Passing parcelableClass: parcelableClass.hashCode: 1096225792 01-15 19:52:03.297: D/Text(23014): Lior: Service ：得到了paclableClass：a：1 b：2 s：String hashCode：1096136272运行线程：Binder线程＃2 01-15 19：52：08.302：D / Text（23014）：Lior：服务：完成：运行线程：Binder线程#2 01-15 19:52:08.312: D/Text(23014): Lior: 服务: 运行新线程: LiorThread 01-15 19:52:10.342: D/Text(22792): Lior: Client: 线程: main通过parcelableClass：parcelableClass.hashCode：1096225792

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:09:54.817

找到了答案。

任何调用 Remote 方法的线程都在等待，直到远程进程中的方法完成。为了使调用异步 - 我们需要将 AIDL 定义为 oneway。例如：单向接口 IRemoteServiceOnewayAIDL {

# javascript - 使用 javascript 启用/禁用 ASP.NET 控件

> ID：14343771
> 
> 赞同：3
> 
> 时间：2013-01-15T17:53:15.913
> 
> 标签：javascript, asp.net

我正在构建一个页面以在服务器上上传 Excel 文件以进行导入操作。所以找到了一个javascript来检查文件选择的文件扩展名无效其他文件类型。现在我正在尝试启用上传 ASP.NET 按钮，但 javascript 返回错误`document.getElementById(...)`为空。

这里的代码：

```
<script type="text/javascript" language="javascript" defer="defer">
    function enableControl() {
        document.getElementById('button').disable = false;
    }

    function disableControl() {
        document.getElementById('button').disable = true;
    }

    function checkExcelFileUpload(elem) {
        var filePath = elem.value;
        if (filePath.indexOf('.') == -1)
            return false;
        var validExtensions = new Array();
        var ext = filePath.substring(filePath.lastIndexOf('.') + 1).toLowerCase();
        //Add valid extentions in this array
        validExtensions[0] = 'xls';
        //validExtensions[1] = 'pdf';
        for (var i = 0; i < validExtensions.length; i++) {
            if (ext == validExtensions[i])
                return true;
        }
        elem.value = '';
        alert('Sono ammessi solo file di Excel 97-2003');
        return false;
    }
</script>
<asp:FileUpload ID="fileupload" runat="server" size="50" onchange="javascript:try{if(checkExcelFileUpload(this) == true){enableControl();}else{disableControl();}}catch(err){alert(err);};" />
<asp:Button ID="button" runat="server" Text="Upload" Enabled="False" /> 
```

我在互联网上搜索并找到了其他语法，`getElementById`但我仍然有这个问题。你能帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T17:59:32.107

**选项 1** 由于您的按钮是服务器端控件，因此呈现的 ID 将与您指定的不同。使用下面的代码来生成`ctl$body$button`（根据你的控件的嵌套这些行的东西）。

```
document.getElementById('<%= button.ClientID %>') 
```

**选项 2** 如果您使用的是 ASP.NET 4，则可以使用`Static`客户端 ID 模式。

`<asp:Button ID="button" runat="server" ClientIDMode="Static" Text="Upload" Enabled="False" />`

请参阅[http://weblogs.asp.net/scottgu/archive/2010/03/30/cleaner-html-markup-with-asp-net-4-web-forms-client-ids-vs-2010-and-net -4-0-series.aspx](http://weblogs.asp.net/scottgu/archive/2010/03/30/cleaner-html-markup-with-asp-net-4-web-forms-client-ids-vs-2010-and-net-4-0-series.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T17:58:48.630

代替：

```
document.getElementById('button').disable = false; 
```

你可能想要：

```
document.getElementById('<%= this.button.ClientID %>').disabled = false; 
```

# java - 将带有数据的行从 Mysql 表添加到 jtable

> ID：14343776
> 
> 赞同：0
> 
> 时间：2013-01-15T17:53:37.423
> 
> 标签：java, swing, netbeans, jtable

添加列有效，但是当我想将存储在 mysql 数据库中的列的数据添加到`jtable`. 它要一个对象`vector[][]`，但我不知道该给什么

```
Connection con;
DefaultTableModel model = new DefaultTableModel();

public Hoofdscherm() {
    initComponents();
    uitvoerSpelers.setModel(model);

    try {
        con = DriverManager.getConnection("jdbc:mysql://localhost/fullhouse", "root", "hamchi50985");

        // selecteer gegevens uit fullhouse.speler tabel
        PreparedStatement stat = con.prepareStatement("SELECT * FROM fullhouse.speler");

        // sla deze GEGEVENS op in een resultset
        ResultSet resultaat = stat.executeQuery();

        // haal alle kolomnamen op PUUR VOOR DE MODEL VAN JTABLE 
        ResultSetMetaData data = resultaat.getMetaData();

        String[] colum = new String[15];
        for (int i = 1; i < data.getColumnCount(); i++) {
            colum[i] = data.getColumnName(i);
            model.addColumn(colum[i]);
            while (resultaat.next()) {
                Object[] gegevens  = new String[] {resultaat.getString(1)};
                model.addRow(gegevens[0]);
            }
        }    
    } catch (SQLException ex) {
        JOptionPane.showMessageDialog(null, ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:43:50.110

我想你需要这样的东西。

**注意** 1\. 还将您的列添加到结果集数据中。就像我在下面的代码中显示的那样。

```
Vector<String> rowOne = new Vector<String>();
rowOne.addElement("R1C1");
rowOne.addElement("R1C2");

Vector<String> rowTwo = new Vector<String>();
rowTwo.addElement("R2C1");
rowTwo.addElement("R2C2");

Vector<String> cols = new Vector<String>();

Vector<Vector> vecRow = new Vector<Vector>();
vecRow.addElement(rowOne);
vecRow.addElement(rowTwo);
cols.addElement("Col1");
cols.addElement("Col2");
JTable table = new JTable(vecRow, cols); 
```

**编辑**

为了您的方便和要求，您可以按照下面的代码结构。

```
 Vector<String> rows = new Vector<String>();
 Vector<Vector> dBdata = new Vector<Vector>();

// Add Columns to table
for (int i = 1; i < data.getColumnCount(); i++) {
    colum[i] = data.getColumnName(i);
    model.addColumn(colum[i]);
}

while (resultaat.next()) {
    // add column data to rows vector
            // Make sure that all data type is in string because of generics
    rows.add(resultaat.getString("columnName1"));
    rows.add(resultaat.getString("columnName2"));
    rows.add(resultaat.getString("columnName3"));

    // add whole row vector to dBdata vector
    dBdata.addElement(rows);
}
model.addRow(dBdata); 
```

Vector 实现了一个动态数组。它类似于 ArrayList，但有两点不同：

1.  矢量是同步的。

2.  Vector 包含许多不属于集合框架的遗留方法。

[类向量 Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html)

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T19:47:47.873

线路`model.addRow(gegevens[0]);`不正确。你应该这样做：

```
 String[] colum = new String[15];
    for (int i = 1; i < data.getColumnCount(); i++) {
        colum[i] = data.getColumnName(i);
        model.addColumn(colum[i]);
        while (resultaat.next()) {
            Object[] gegevens  = new String[] {resultaat.getString(1)};
            model.addRow(gegevens);
        }
    } 
```

您还需要检查[DefaultTableModel](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/DefaultTableModel.html)

根据 DefaultTableModel 的文档：

> 这是 TableModel 的一个实现，它使用 Vector 的 Vector 来存储单元格值对象。

# attributes - WooCommerce - 变量属性

> ID：14343777
> 
> 赞同：0
> 
> 时间：2013-01-15T17:53:39.693
> 
> 标签：attributes, woocommerce

我正在研究制造一种具有我所描述的可变属性的产品。

例如，如果我卖一件 T 恤——大号是蓝色的，而中号是红色的。

任何提示/面包屑将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T08:35:21.800

尝试进入实际产品本身（从右键单击产品的菜单中），然后单击您要编辑的产品（例如 T 恤）

在其下方，您应该会看到产品数据下的选项卡列表

变化应该是其中之一。您可以随心所欲地定义它们。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:53:49.957

为什么不在产品变体中指定衬衫的颜色？换句话说，您的变体可能会在产品详细信息页面上列出为：

*   大号衬衫（蓝色）
*   中号衬衫（红色）

# php - 检查 URL 是否有协议，如果没有，则添加

> ID：14343779
> 
> 赞同：1
> 
> 时间：2013-01-15T17:53:53.883
> 
> 标签：php

我有一个表格可以从用户那里获取一些网址。

**例如：**网址、facebook 地址、twitter 地址等。然后我需要检查用户可能会或可能不会输入协议作为地址的一部分。如果协议不是提交的 url，我需要向它添加协议。

在这种情况下，它是`http://`。有时用户可能会错误地键入协议。

**例如。** `htttp:/, http//, htp://`ETC..

对于这个问题，我需要知道是否有任何方法可以完全删除用户输入的协议，并使用该 URL 添加新协议以插入数据库。

我写了一些代码来检测提交的 URL 有一个协议。我期望它的工作很少但不是 100%。

```
$url = 'www.example.com';
$checkProtocol = strpos($url, '://');

if (false === $checkProtocol ) {
    $url = 'http://' . $url;    
    echo 'This is new URL : ' . $url;
} else {
    echo 'Invalid';
} 
```

假设 $url 已`htp://www.example.com`成为无效的 url .. 没有分配协议。

希望有人帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:11:25.007

如果您想处理所有情况，您可能只想假设 URL 丢失`http://`或格式错误，并在清除字符串后在所有情况下添加它：

```
$url = 'htp://www.example.com';
$fixed_url = 'http://' . preg_replace('#^.*://#', '', $url); 
```

# php - 错误：试图获取非对象的属性

> ID：14343783
> 
> 赞同：0
> 
> 时间：2013-01-15T17:54:08.953
> 
> 标签：php, arrays, object

我收到一个错误：

> 试图在第 30 行获取非对象的属性

在下面的评论行...

```
function admin_trim_category_description( $terms, $taxonomies ){
    if( 'category' != $taxonomies[0] ) return $terms;
    $my_categories = array('item1','item2','item3');
    foreach( $terms as $key => $term)
        if(in_array(
            $terms[$key]->name, //ERROR LINE HERE
            $my_categories)) 
            {
                unset($terms[$key]);   
            }
    } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:10:00.200

`$terms[$key]`似乎不是一个对象。我建议你检查它是否是一个对象：

```
if (is_object($terms[$key])) { /* OK */ } 
```

和/或检查对象是否是特定类的实例：

```
if ($terms[$key] instanceof MyClass) { /* OK */ } 
```

# ruby - 尝试在 nanoc 中显示元数据时，nil:NilClass 的未定义方法“[]”

> ID：14343785
> 
> 赞同：3
> 
> 时间：2013-01-15T17:54:16.033
> 
> 标签：ruby, erb, nanoc

（Ruby noob）我正在使用 nanoc 生成一个站点。这是我的带有元数据的示例页面：

```
--- 
title: abc
parameters:
    abc: def
    ghi: ijk
---

test 
```

我知道我可以将参数提高一级，但我想在布局文件中访问它们：

```
<%= @item[:parameters][:abc] %> 
```

但我收到以下错误：

```
undefined method `[]' for nil:NilClass 
```

参数被传递给布局，因为当我这样做时：

```
<%= YAML::dump(@item[:parameters]) %> 
```

我可以看到他们。作为一个 Ruby 菜鸟，我认为我的问题有一个简单的解决方案。另外，如果您可以发布一个通过 :parameters hash 迭代的片段，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T18:41:29.327

您的网站上可能有多个页面。因此`parameters`在布局中不存在每个页面的 nanoc 工艺。对于某些页面，元素将是`nil`，因此您会得到错误。

也许您需要重新考虑如何使用这些参数，或者您需要在布局中使用条件来查找`parameters`并仅在它们存在时使用它们：

```
<% if @item[:parameters] %>
 <%= @item[:parameters][:abc] %>
<% end %> 
```

# jsf - 在 h:dataTable 中使用 java.util.Map

> ID：14343788
> 
> 赞同：17
> 
> 时间：2013-01-15T17:54:26.753
> 
> 标签：jsf, datatable, hashmap, treemap

我需要`Map`使用`<h:dataTable>`. 我的支持 bean 具有`Map`如下属性：

```
public class Bean {

    private Map<Integer,String> map; // +getter

    @PostConstruct
    public void init() {
        map = new TreeMap<Integer,String>();
        map.put(1,"Sasi");
        map.put(2,"Pushparaju");
        map.put(3,"Venkat Raman");
        map.put(3,"Prabhakaran");
    }

} 
```

然后在 JSF 页面中，我试图将此`Map`属性绑定`value`到`<h:dataTable>`.

```
 <h:dataTable border="1" value="#{bean.map}" var="map">
    <h:column id="column1">
        <f:facet name="header">
            <h:outputText value="UserId"></h:outputText>
        </f:facet>
        <h:outputText value="#{map.getKey}"></h:outputText>
    </h:column>
    <h:column id="column2">
        <f:facet name="header">
            <h:outputText value="Email Id"></h:outputText>
        </f:facet>
        <h:outputText value="#{map.getValue}"></h:outputText>
    </h:column>
</h:dataTable> 
```

它给出了错误`getKey`并且`getValue`不存在。我可以理解这不是正确的方法。我怎样才能提出`Map`使用`<h:dataTable>`？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-15T18:03:06.100

在即将到来的 JSF 2.3 之前，`UIData`诸如`<h:dataTable>`、`<p:dataTable>`等组件`<ui:repeat>`不支持**对**`Map`. 这仅在`<c:forEach>`.

一种方法是将映射条目转换为数组（单独`entrySet()`无法工作，因为在即将到来的 JSF 2.3 之前`UIData`也不支持）。`Set`

```
<h:dataTable value="#{bean.map.entrySet().toArray()}" var="entry">
    <h:column>#{entry.key}</h:column>
    <h:column>#{entry.value}</h:column>
</h:dataTable> 
```

另一种方法是将映射的条目集包装在`<h:dataTable>`可以迭代的集合中，例如`ArrayList`.

```
public class Bean {

    private Map<Integer, String> map;
    private List<Entry<Integer, String>> entries; // +getter (no setter necessary)

    @PostConstruct
    public void init() {
        map = new TreeMap<>();
        map.put(1, "Sasi");
        map.put(2, "Pushparaju");
        map.put(3, "Venkat Raman");
        map.put(4, "Prabhakaran");
        entries = new ArrayList<>(map.entrySet());
    }

    // ...
} 
```

```
<h:dataTable value="#{bean.entries}" var="entry">
    <h:column>#{entry.key}</h:column>
    <h:column>#{entry.value}</h:column>
</h:dataTable> 
```

然而，更干净、自我记录和可重用的是使用 a`List<User>`代替，其中`User`类具有必要的属性`id`和`name`.

```
public class Bean {

    private List<User> users; // +getter (no setter necessary)

    @PostConstruct
    public void init() {
        users = new ArrayList<>();
        users.add(new User(1, "Sasi"));
        users.add(new User(2, "Pushparaju"));
        users.add(new User(3, "Venkat Raman"));
        users.add(new User(4, "Prabhakaran"));
    }

    // ...
} 
```

```
<h:dataTable value="#{bean.users}" var="user">
    <h:column>#{user.id}</h:column>
    <h:column>#{user.name}</h:column>
</h:dataTable> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T11:56:04.400

你也可以试试这个替代方案。

```
<h:dataTable border="1" value="#{myBean.map.keySet().toArray()}" var="myVar">
    <h:column id="column1">
        <f:facet name="header">
            <h:outputText value="UserId"></h:outputText>
        </f:facet>
            <h:outputText value="#{myVar}"></h:outputText>
    </h:column>
    <h:column id="column2">
        <f:facet name="header">
            <h:outputText value="Email Id"></h:outputText>
        </f:facet>
            <h:outputText value="#{myBean.map.get(myVar)}"></h:outputText>
    </h:column>
</h:dataTable> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-17T16:13:53.380

关于 prageeth 的最后一个答案，您可以使用 entrySet 而不是 keySet；那么你就可以摆脱 myBean.map.get 了。看这个例子：

```
<h:dataTable border="1" value="#{myBean.map.entrySet().toArray()}" var="map">
<h:column id="column1">
    <f:facet name="header">
        <h:outputText value="UserId"></h:outputText>
    </f:facet>
        <h:outputText value="#{map.key}"></h:outputText>
</h:column>
<h:column id="column2">
    <f:facet name="header">
        <h:outputText value="Email Id"></h:outputText>
    </f:facet>
        <h:outputText value="#{map.value}"></h:outputText>
</h:column>
</h:dataTable> 
```

这适用于 myfaces 2.2.3，因为我自己刚刚使用过它。

注释：我最好评论最后一个帖子，但我的声誉不够高，所以这是一个额外的答案。

# java - 让 JComboBox 在项目选择时更改显示的项目

> ID：14343801
> 
> 赞同：0
> 
> 时间：2013-01-15T17:55:25.350
> 
> 标签：java, swing, jcombobox, listeners, changelistener

当我展开组合框列表时，我应该看到诸如“一”“二”“三”之类的项目，但是当我选择“一”并折叠组合框时，我希望看到“1”而不是“一”。

我尝试将 a 添加`ListDataListener`到组合框中，并在`contentsChanged()`其中 `box.getEditor().setItem(my_map.get("one"))`my_map 存储从“one”到“1”等的映射。

但是，它不起作用，我不知道为什么..`contentsChanged()`调用后是否发生了覆盖我的更改的事情？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:32:49.333

一种方法是不更改内容，而是提供适当的渲染器，该渲染器在绘制期间检查它是否在弹出窗口内。

![在此处输入图像描述](../Images/9c33be3e24c83631c33f75f5c14aed60.png)

概念验证代码片段如下所示：

```
JComboBox box = new JComboBox(new String[] { "One|1", "Two|2", "Three|3" });

box.setRenderer(new ListCellRenderer<String>() {

    private JList<? extends String> list;
    private final JLabel label = new JLabel() {
        @Override
        public void paintComponent(Graphics g) {
            // Check if parent's parent is the combobox or the dropdown
            int part = getParent().getParent() == list ? 0 : 1;
            label.setText(label.getText().split("\\|")[part]);
            super.paintComponent(g);
        }
    };

    @Override
    public Component getListCellRendererComponent(JList<? extends String> list, String value, int index, boolean isSelected, boolean cellHasFocus) {
        this.list = list;
        label.setText(value);
        label.setOpaque(true);
        if (isSelected) {
            label.setForeground(list.getSelectionForeground());
            label.setBackground(list.getSelectionBackground());
        } else {
            label.setForeground(list.getForeground());
            label.setBackground(list.getBackground());
        }
        return label;
    }
}); 
```

注意：上面的例子没有正确处理所有方面（例如焦点边框......），但只是提示您如何进一步进行。

# php - 不同的复选框在选中时会将用户发送到不同的页面

> ID：14343804
> 
> 赞同：0
> 
> 时间：2013-01-15T17:55:31.230
> 
> 标签：php, javascript, forms, checkbox

我需要一个表单，其中复选框将在提交表单时根据它们的选择打开不同的页面。

所以，假设我有这个简单的形式：

```
<form action="" method="post">
<input value="1" type="checkbox" name="sign" />     
<input value="2" type="checkbox" name="sign" />     
<input value="3" type="checkbox" name="sign" />     
<input value="4" type="checkbox" name="sign" />     
<input value="5" type="checkbox" name="sign" />     
<input type="submit" /> 
</form> 
```

当用户检查值 1 并提交时，他将被重定向到页面 A。如果用户检查 1 和 4，他将被重定向到不同的页面（例如页面 F）。如果用户检查 2、3 和 4，他将被重定向到页面 R，依此类推......将有 25 种不同的组合，因此，当用户提交表单时，此表单会产生 25 种不同的页面结果。

换句话说，当表单以某种方式提交时，系统会读取哪些复选框被选中，并将每个可能的组合与不同的 URL 相关联。

可以做到吗？如果是这样，怎么做？有人做过类似的东西吗？我已经搜索了很长时间的解决方案，但只找到了稍微相似的解决方案，而不是我需要的，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:00:26.490

HTML：

```
<form action="" method="post">
<input value="1" type="checkbox" name="sign[1]" />     
<input value="2" type="checkbox" name="sign[2]" />     
<input value="3" type="checkbox" name="sign[3]" />     
<input value="4" type="checkbox" name="sign[4]" />     
<input value="5" type="checkbox" name="sign[5]" />     
<input type="submit" /> 
</form> 
```

PHP：

```
if (isset($_POST['sign'][1]))
    header("Location: a.php");
elseif(isset($_POST['sign'][2]) AND isset($_POST['sign'][3]))
    header("Location: b.php"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:00:38.507

这可以通过几种方式完成。一种是可以使用javascript拦截表单提交，改变表单“action”的值，然后执行提交。

第二种方法可能是将所有这些数据发送到单个脚本，并根据所选值执行重定向到预期页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T18:01:04.193

从应该看起来像：

```
<form action="" method="post">
<input value="1" type="checkbox" name="sign[]" />     
<input value="2" type="checkbox" name="sign[]" />     
<input value="3" type="checkbox" name="sign[]" />     
<input value="4" type="checkbox" name="sign[]" />     
<input value="5" type="checkbox" name="sign[]" />     
<input type="submit" /> 
</form> 
```

像这样的帖子：

```
if(!empty($_POST['sign'])) {
    if(in_array(1, $_POST['sign'])) {
        // if just 1, go to page
    } elseif(in_array(1, $_POST['sign']) && in_array(4, $_POST['sign'])) {
        // if 1 and 4, go to page
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T18:01:45.047

您可以将每个输入视为一点。因此，您将始终需要考虑 5 位。

然后定义对应于每个可能值的 25 个条目的关联数组：

```
00001
00010
...

var links = {
    "00001" : "www.google.com",

]; 
```

然后，当您提交表单时，只需根据值设置`target`属性。`form`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T18:07:17.463

如果我是你并且除了遵循这个想法我别无选择，我会在 jQuery 中使用类似的东西（假设你的帖子变量在你想要到达的页面中被处理）：

```
<form action="" method="post" id="myForm">
    <input value="1" type="checkbox" name="sign[]" />     
    <input value="2" type="checkbox" name="sign[]" />     
    <input value="3" type="checkbox" name="sign[]" />     
    <input value="4" type="checkbox" name="sign[]" />     
    <input value="5" type="checkbox" name="sign[]" />     
    <input type="submit" /> 
</form>

$("#myForm").submit(function() {
    var checked_array = new Array();
    $("#myForm input").each(function() {
        if ($(this).is(":checked")
            checked_array.push($(this).attr("value"));
    });

    if ( checked_array.indexOf(2) !== -1 && checked_array.indexOf(5) !== -1)
       ("#myForm").attr("action", "/url1.php") ;
    else if etc...
}); 
```

# html - 将 HTML 放入 DataTable 中？

> ID：14343806
> 
> 赞同：1
> 
> 时间：2013-01-15T17:55:36.847
> 
> 标签：html, vb.net, datatable

在 vb.net 中，我有一个要添加内容的 DataTable。一列包含一个自由文本字段，因此我想在页面上将新行显示为新行。我这样做了：

```
For Each row As DataRow In dtEmails.Rows
    Dim newBody As String = row.Item("body").ToString.Replace(vbCrLf, "<br>")
    row.Item("body") = newBody
Next 
```

但现在单元格只显示文字 HTML，如`Line<br>Line`. 我发现一个论坛帖子建议调用`Server.HtmlDecode`字符串，但这不起作用。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:19:48.027

我找到了答案 -`Server.HtmlDecode`在每一行都绑定时调用。

```
Protected Sub myGridView_RowDataBound(ByVal o As Object, ByVal e As GridViewRowEventArgs) Handles gvEmails.RowDataBound
    Dim cell As String = e.Row.Cells(8).Text.Replace(vbCrLf, "<br>")
    e.Row.Cells(8).Text = Server.HtmlDecode(cell)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:59:17.227

我不是 VB.net 人，但我听说[HTMLAgilityPack](http://htmlagilitypack.codeplex.com/)有助于解决此类问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T18:59:13.557

...您的论点是错误的方法-试试这个：

```
Dim newBody As String = row.Item("body").ToString.Replace("<br>", vbCrLf) 
```

希望能解决问题

# python - 重定向到 Flask 中的 URL

> ID：14343812
> 
> 赞同：306
> 
> 时间：2013-01-15T17:55:45.957
> 
> 标签：python, redirect, flask

我是 Python 和 Flask 的新手，我正在尝试做与`Response.redirect`C# 中相同的操作 - 即：重定向到特定的 URL - 我该怎么做？

这是我的代码：

```
import os
from flask import Flask

app = Flask(__name__)

@app.route('/')
def hello():
    return 'Hello World!'

if __name__ == '__main__':
    # Bind to PORT if defined, otherwise default to 5000.
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port) 
```

* * *

## 回答 #1

> 赞同：473
> 
> 时间：2013-01-15T18:03:43.240

您必须返回重定向：

```
import os
from flask import Flask,redirect

app = Flask(__name__)

@app.route('/')
def hello():
    return redirect("http://www.example.com", code=302)

if __name__ == '__main__':
    # Bind to PORT if defined, otherwise default to 5000.
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port) 
```

请参阅[烧瓶文档的文档。](https://flask.palletsprojects.com/api/#flask.redirect)代码的默认值为 302，因此`code=302`可以省略或替换为其他重定向代码（301、302、303、305 和 307 中的一个）。

* * *

## 回答 #2

> 赞同：121
> 
> 时间：2013-01-15T18:05:21.523

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import os
from flask import Flask, redirect, url_for

app = Flask(__name__)

@app.route('/')
def hello():
    return redirect(url_for('foo'))

@app.route('/foo')
def foo():
    return 'Hello Foo!'

if __name__ == '__main__':
    # Bind to PORT if defined, otherwise default to 5000.
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port) 
```

查看[文档中的示例](http://flask.pocoo.org/docs/quickstart/#redirects-and-errors)。

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2013-01-15T18:02:58.563

来自[Flask API 文档](https://flask.palletsprojects.com/en/2.0.x/api/?highlight=redirect#flask.redirect)(v. 2.0.x)：

> 烧瓶。**重定向**( `location`, `code=302`, `Response=None`)
> 
> 返回一个响应对象（WSGI 应用程序），如果调用该对象，则将客户端重定向到目标位置。支持的代码是 301、302、303、305 和 307。不支持 300 是因为它不是真正的重定向，而 304 是因为它是带有定义的 If-Modified-Since 标头的请求的答案。
> 
> *0.6 版新功能*：位置现在可以是使用 iri_to_uri() 函数编码的 unicode 字符串。
> 
> 参数：
> 
> *   `location`– 响应应该重定向到的位置。
> *   `code`– 重定向状态码。默认为 302。
> *   `Response`(class) -- 实例化响应时使用的响应类。如果未指定，默认值为 werkzeug.wrappers.Response。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-07-21T22:08:48.707

我相信这个问题值得更新。只需与其他方法进行比较。

以下是在 Flask (0.12.2) 中从一个 url 重定向到另一个 url 的方法 (3xx)：

```
#!/usr/bin/env python

from flask import Flask, redirect

app = Flask(__name__)

@app.route("/")
def index():
    return redirect('/you_were_redirected')

@app.route("/you_were_redirected")
def redirected():
    return "You were redirected. Congrats :)!"

if __name__ == "__main__":
    app.run(host="0.0.0.0",port=8000,debug=True) 
```

有关其他官方参考资料，请[点击此处](http://flask.pocoo.org/docs/0.12/quickstart/#redirects-and-errors)。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-05-22T06:24:34.383

Flask 包含`redirect`重定向到任何 url 的功能。此外，您可以使用以下错误代码提前中止请求`abort`：

```
from flask import abort, Flask, redirect, url_for

app = Flask(__name__)

@app.route('/')
def hello():
    return redirect(url_for('hello'))

@app.route('/hello'):
def world:
    abort(401) 
```

默认情况下，每个错误代码都会显示一个黑白错误页面。

该`redirect`方法默认采用代码 302。http 状态代码列表[here](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#3xx_Redirection)。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-01-15T18:03:11.043

```
flask.redirect(location, code=302) 
```

文档可以在[这里](http://flask.pocoo.org/docs/api/)找到。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2020-07-13T16:08:42.640

如果您只想重定向到没有任何状态代码或类似内容的网址，这很容易，您可以简单地说

```
from flask import Flask, redirect

app = Flask(__name__)

@app.route('/')
def redirect_to_link():
    # return redirect method, NOTE: replace google.com with the link u want
    return redirect('https://google.com') 
```

[这是 Flask Docs 的链接以获得更多解释](https://flask.palletsprojects.com/api/#flask.redirect)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-01-10T08:47:59.817

为此，您可以简单地使用`redirect`包含在`flask`

```
from flask import Flask, redirect

app = Flask(__name__)

@app.route('/')
def hello():
    return redirect("https://www.exampleURL.com", code = 302)

if __name__ == "__main__":
    app.run() 
```

另一个有用的提示（因为您是烧瓶新手）是`app.debug = True`在初始化烧瓶对象后添加，因为调试器输出有助于找出问题所在。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-03-02T12:57:04.590

你可以这样使用：

```
import os
from flask import Flask

app = Flask(__name__)

@app.route('/')
def hello():
     # Redirect from here, replace your custom site url "www.google.com"
    return redirect("https://www.google.com", code=200)

if __name__ == '__main__':
    # Bind to PORT if defined, otherwise default to 5000.
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port) 
```

[这是此代码的引用链接。](https://www.fullstackpython.com/flask-redirect-examples.html)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-11T12:15:58.387

## 如何在 Flask 中重定向用户/请求

在 API 处理程序函数中抛出错误会将您的用户重定向到可以处理重定向的错误处理程序。或者，您可以`redirect`像其他人所说的那样打电话，但这是重定向未授权用户的另一种方式。为了说明我的意思，我在下面提供了一个示例。

### 在用户应该被授权的情况下

首先让我们假设您有一条受保护的路线，您像这样保护它。

```
def handle_api_auth(func):
    """
    **handle_api_auth**
        wrapper to handle public api calls authentications

    :param func: a function to be wrapped
    :return: wrapped function
    """

    @functools.wraps(func)
    def auth_wrapper(*args, **kwargs):
        api_key: Optional[str] = request.headers.get('x-api-key')
        secret_token: Optional[str] = request.headers.get('x-secret-token')
        domain: Optional[str] = request.base_url
        if is_request_valid(api_key=api_key, secret=secret_token, domain=domain):
            return func(*args, **kwargs)
        # NOTE: throwing an Error Here will redirect your user to an error handler or alteratively you can just call redirect like everyone else is saying, but this is another way of redirecting unathorized users
        message: str = "request not authorized"
        raise UnAuthenticatedError(status=error_codes.un_auth_error_code, description=message)

    return auth_wrapper 
```

## *is_request_valid*的定义如下

```
@app_cache.cache.memoize(timeout=15 * 60, cache_none=False)  # timeout equals fifteen minutes // 900 seconds
def is_request_valid(api_key: str, secret: str, domain: str) -> bool:
    """
    **is_api_key_valid**
        validates api keys on behalf of client api calls

    :param api_key: str -> api_key to check
    :param secret: str -> secret token
    :param domain: str -> domain registered for the api_key and secret_token
    :return: bool -> True if api_key is valid
    """

    organization_id: str = config_instance.ORGANIZATION_ID
    # NOTE: lets assumy api_keys_view.get_api_key will return the api keys from some database somewhere
    response = api_keys_view.get_api_key(api_key=api_key, organization_id=organization_id)

    response_data, status_code = response
    response_dict = response_data.get_json()

    if not response_dict.get('status'):
        return False

    api_instance: dict = response_dict.get('payload')
    if not isinstance(api_instance, dict):
        return False

    domain: str = domain.lower().strip()
    # NOTE accessing the keys this way will throw ValueError if keys are not available which is what we want
    # Any Error which gets thrown Ridirects the Users from the path the user is on to an error handler.
    is_secret_valid: bool = hmac.compare_digest(api_instance['secret_token'], secret)
    is_domain_valid: bool = hmac.compare_digest(api_instance['domain'], domain)
    _request_valid: bool = is_secret_valid and is_domain_valid

    return not not api_instance.get('is_active') if _request_valid else False 
```

### 像这样定义您的错误处理程序

```
from flask import Blueprint, jsonify, request, redirect
from werkzeug.exceptions Unauthorized

error_handler = BluePrint('error_handlers', __name__)

@error_handler.app_errorhandler(Unauthorized)
def handle_error(e : Unauthorized) -> tuple:
    """default unath handler"""
    return jsonify(dict(message=e.description)), e.code if request.headers.get('content-type') == 'application/json' else redirect('/login') 
```

# 以同样的方式处理其他错误，并注意如果请求是

不是 json 用户将被重定向到登录页面如果 json 用户收到未处理的响应然后它到前端来处理 Unath 错误..

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-25T06:37:06.877

有两种方法可以重定向到 Flask 中的 URL。

1.  例如，您想在用户登录后将用户重定向到另一条路线等。
2.  您可能还希望将用户重定向到需要一些变量示例的路由： `@app.route('/post/<string:post_id>')`

好吧，要为案例 1 实现烧瓶重定向，很简单，只需执行以下操作：

```
from flask import Flask,redirect,render_template,url_for
app = Flask(__name__)

@app.route('/login')
def login():
    # if user credentials are valid, redirect to user dashboard
    if login == True:
       return redirect(url_for(app.dashboard))
    else:
       print("Login failed !, invalid credentials")
    return render_template('login.html',title="Home Page")

@app.route('/dashboard')
def dashboard():
    return render_template('dashboard.html',title="Dashboard") 
```

要为案例 #2 实施烧瓶重定向，请执行以下操作

```
from flask import Flask,redirect,render_template,url_for
app = Flask(__name__)

@app.route('/home')
def home():
    # do some logic, example get post id
    if my_post_id:
       # **Note:** post_id is the variable name in the open_post route
       # We need to pass it as **post_id=my_post_id**
       return redirect(url_for(app.open_post,post_id=my_post_id))
    else:
       print("Post you are looking for does not exist")
    return render_template('index.html',title="Home Page")

@app.route('/post/<string:post_id>')
def open_post():
    return render_template('readPost.html',title="Read Post") 
```

在视图中可以做同样的事情

```
<a href="{{url_for(app.open_post,post_id=my_post_id)}}"></a> 
```

请注意：重定向时始终使用`app.home`or `app.something..`（路由或视图函数名称）而不是使用`redirect("/home")`. 原因是，如果您出于某种原因将路由示例从`"/home"`to修改，那么您的代码将中断`"/index/page"`

# r - CRAN 包取决于 Bioconductor 包安装错误

> ID：14343817
> 
> 赞同：13
> 
> 时间：2013-01-15T17:56:09.063
> 
> 标签：r, cran, bioconductor

我管理描述文件的依赖、建议和导入。最后我将我的包裹提交给`CRAN`. 但是在安装包的过程中，它只安装存放在`CRAN`not for `bioconductor`packages下的包。此外，它对 Mac OS 有一个包依赖项错误： [检查 Mac OS 的日志](http://www.r-project.org/nosvn/R.check/r-release-macosx-ix86/BcDiag-00check.html)

可能是什么问题呢？我怎么能修好它？

亲切的问候，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-09T19:42:19.967

在 R 3.0.2 中，以下工作：

```
setRepositories(ind=1:2) 
```

在撰写本文时，该值`ind`可以采用值介于 1 和 8 之间的向量，其含义如下：

```
1:   CRAN
2:   BioC software
3:   BioC annotation
4:   BioC experiment
5:   BioC extra
6:   Omegahat
7:   R-Forge
8:   rforge.net 
```

该列表是通过调用 获得的`setRepositories(graphics=F)`，它还允许交互式地选择要安装的存储库。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-07-25T21:10:58.900

这在任何地方都没有记录，但诀窍是您在文件中添加一行`biocViews:`（`DESCRIPTION`是的，它以冒号结尾，然后不需要列出任何内容，您可以将其保留为空白）。然后 R 将知道检查 bioconductor 存储库的包要求。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-15T19:25:35.963

`install.packages()`在 R 中默认情况下没有可以从 Bioconductor 安装的机制（~~至少不是默认情况下，我没有检查 BioC 是否具有 repo 基础结构以允许正确调用它~~）。[请参阅 Martin Morgan 的评论（如下），其中可以找到有关如何配置 R 以便`install.packages()`可以从 Bioconductor 存储库安装的说明。]

要安装 Bioconductor 软件包，通常会：

```
source("http://bioconductor.org/biocLite.R")
biocLite("limma") 
```

这需要独立于`install.packages()`.

Mac OS X 检查的错误可能是该特定服务器上的配置错误。正如@DWin 所说，您应该与 CRAN 一起解决这个问题，以找到该特定问题的根源。据我所知，CRAN 应该安装了所有的 Bioconductor 软件包。

# c# - 使用实体框架时对将业务逻辑放在哪里感到困惑

> ID：14343821
> 
> 赞同：56
> 
> 时间：2013-01-15T17:56:30.967
> 
> 标签：c#, entity-framework

我刚刚开始使用实体框架，我对业务层中的类通常如何与实体框架创建的实体相适应感到困惑。

在使用经典的 ADO.NET 时，我将有一个名为 Customer 的类，然后是另一个名为 DALCustomer 的类来处理数据库交互，在这种结构中，我将代码用于计算、过滤和删除 DAL withing 的实例Customer 用于在 Customer 类中保存、更新和删除。

使用实体框架，如果您有一个名为 Customer 的表，实体框架会创建一个名为 Customer 的实体，这就是我开始困惑的地方，这个实体是否消除了业务层中对 Customer 的需求？那么本质上，通常在业务层中的所有字段和方法都在实体框架生成的实体中？还是应该在业务层中仍然存在一个名为 CustomerBL 的类，例如，它仍然包含完成计算、过滤所需的业务逻辑所需的字段和方法，并且仍然需要声明的 EF DAL 实例来处理数据访问？

如果应该有一个业务类，在这种情况下是 CustomerBL，另一个问题会跳到脑海中，是否应该在 CustomerBL 中重新创建在客户实体中创建的字段，或者是否应该在 CustomerBL 中声明客户实体的实例，这样就会有不需要在 2 个位置声明字段？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-15T20:05:28.597

实体框架的设计考虑了数据模型和概念模型之间的分离。它支持[继承](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)、[实体拆分](http://blogs.microsoft.co.il/blogs/gilf/archive/2009/03/06/entity-splitting-in-entity-framework.aspx)（不是 EF 核心）、[表拆分](http://weblogs.asp.net/manavi/associations-in-ef-4-1-code-first-part-4-table-splitting)、[复杂类型](http://weblogs.asp.net/manavi/associations-in-ef-4-1-code-first-part-2-complex-types)或[拥有类型](https://docs.microsoft.com/en-us/ef/core/modeling/owned-entities)以及[透明的多对多关联](https://msdn.microsoft.com/en-us/data/jj591620#ManyToMany)（不是 EF 核心），所有这些都允许根据自己的需要塑造领域模型而不受约束很大程度上取决于数据存储模型。[EF 核心支持影子属性，可用于隐藏暴露的类模型](https://stackoverflow.com/a/52021425/861716)的横切关注点。

代码优先方法允许使用 POCO，其中只有少数属性映射到数据存储列，而其他属性则服务于域目标。模型优先和数据库优先生成部分类，允许扩展生成的代码。

当然，这种概念模型和商店模型的分离只能在一定程度上取得成功。有些事情与*坚持无知*的目标背道而驰。例如 -

*   如果需要延迟加载，则需要将导航属性声明为`virtual`，以便 EF 可以在代理类型中覆盖它们。领域驱动设计 (DDD) 将鼓励`virtual`仅在需要多态性时使用。

*   伴随“真实”关联（参考）*的原始外键属性（例如 ）非常*方便。纯粹主义者认为这违反了 DDD 原则。`ParentId``Parent`

*   EF 类模型将是数据访问层的一部分，并且应该主要服务于该目标。因此，它将包含许多互惠关系，以便在编写 LINQ 查询时尽可能地受益于导航属性。这些相互关系是对 DDD 原则的又一次违反。

*   LINQ-to-objects 和 LINQ-to-entities 之间存在大量[差异](https://stackoverflow.com/a/13352779/861716)。您不能忽略这样一个事实，即您正在针对与内存中的对象完全不同的宇宙进行 LINQ-ing。这被称为[紧密耦合或泄漏抽象](http://blog.ploeh.dk/2012/03/26/IQueryableTisTightCoupling/)。

*   EF 只能映射具体类，不能映射接口。

但是……通常我很乐意将代码优先模型中生成的 EF 类或 POCO 用作域类。到目前为止，我从未见过从一个数据存储或 ORM 到另一个的无摩擦过渡，如果它发生的话。执着无知是虚构的。DAL 的特质很容易在领域中留下足迹。只有当您必须为不同的数据存储/模型编写代码时，或者当存储/模型预计会相对频繁地更改时，才需要尽可能减少这种占用空间或将其完全抽象出来。

另一个可能将 EF 类提升为域类的因素是当今许多应用程序具有多个层，其中（序列化）不同的视图模型或 DTO 被发送到客户端。在 UI 中使用域类几乎不符合要求。您也可以将 EF 类模型用作域，并让服务根据 UI 或服务使用者的要求返回专用模型和 DTO。如果只是在性能方面，另一个抽象层可能更像是一种负担而不是一种祝福。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-15T20:16:46.073

在我看来，使用 POCO 作为可以持久化的实体的全部意义在于消除“数据库实体”和“业务实体”之间的区别。“实体”应该是“业务实体”，可以直接保存到数据存储并从数据存储中加载，因此同时充当“数据库实体”。通过使用 POCO，业务实体与特定机制分离以与数据库交互。

您可以将实体移动到一个单独的项目中 - 例如 - 该项目没有对任何 EF 程序集的引用，但在数据库层项目中使用它们来管理持久性。

这并不意味着您可以在不考虑 EF 要求的情况下完全设计您的业务实体。当您使用 EF 将业务实体映射到数据库模式时，您需要了解一些限制以避免麻烦，例如：

*   您必须创建导航属性（对其他实体的引用或引用集合）`virtual`以支持使用 EF 进行延迟加载
*   您不能`IEnumerable<T>`用于必须持久化的集合。它必须是`ICollection<T>`或更派生的类型。
*   `private`持久化属性并不容易
*   EF 不支持该类型`char`，如果要保留其值，则不能使用它
*   和更多...

但是，在我看来，另外一组实体是额外的复杂层，如果上述限制对您的项目来说太严格，则应该有理由真正需要它。

YA2C（又是 2 美分 :)）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-15T18:06:35.127

我不知道其他人是否认为这是一种好的做法，但就个人而言，这就是我过去处理这个问题的方式：

EF 生成的类是您的 DAL，然后为 BL 创建一组互补的类，您将在其中拥有所需的结构（例如可能以一对一的关系合并来自相关实体的数据）并处理其他业务逻辑问题（自定义验证，例如实现 IDataErrorInfo 以使其与 WPF 中的 UI 配合使用）并且还创建包含与实体类型相关的所有业务层方法的类，这些方法使用 BL 实例并与 EF 实体相互转换到 BL 对象。

因此，例如，您的数据库中有客户。EF会生成一个类Customer，在BL中会有一个Customer（前缀、后缀等）类和一个CustomerLogic类。在 BL Customer 类中，您可以做任何需要满足需求的事情，而不必篡改 EF 实体，在 CustomerLogic 类中，您将拥有 BL 方法（加载最有价值的客户、为客户保存额外的数据等）。

现在，这使您能够松散地耦合到数据源实现。过去（在 WPF 项目中）这使我受益的另一个示例是，您可以执行 IDataErrorInfo 之类的操作并在 CustomerBL 类中实现验证逻辑，这样当您将实体绑定到 UI 上的创建/编辑表单时您将受益于 WPF 提供的内置功能。

...我的 2 美分，我也很想知道什么是最佳实践或其他解决方案/观点是什么。

* * *

也可能与这个主题有关 -[代码优先与模型/数据库优先](https://stackoverflow.com/questions/5446316/ef-4-1-code-first-vs-model-database-first)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-28T13:11:05.017

这个话题可能有点老了，但这可能会有所帮助。Andras Nemes 在他的博客中指出了使用 DDD（领域驱动设计）而不是 EF、MVC 等技术驱动设计的担忧。

[http://dotnetcodr.com/2013/09/12/a-model-net-web-service-based-on-domain-driven-design-part-1-introduction/](http://dotnetcodr.com/2013/09/12/a-model-net-web-service-based-on-domain-driven-design-part-1-introduction/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-22T21:19:19.027

我使用业务逻辑来编写我的方法并在其创建的视图中返回结果，例如：

```
namespace Template.BusinessLogic
{
    public interface IApplicantBusiness
    {
        List<Template.Model.ApplicantView> GetAllApplicants();

        void InsertApplicant(Template.Model.ApplicantView applicant);
    }
} 
```

# c# - 如何按位置对项目进行分组并求和它们的数量？

> ID：14343824
> 
> 赞同：0
> 
> 时间：2013-01-15T17:56:44.413
> 
> 标签：c#

下面显示的所有内容都是纯伪代码来说明我的问题。

我的代码具有以下数据结构：

```
// Used to define the ORDERS a customer has placed
List<Orders> myOrders;
Orders
{
  String name
  double quantity
  String location   // there are only 2 possible locations
}

// Used to define the ITEMS we have available
Item
{
  String name
  List<Parts> parts
}

// Used to define the PARTS to make an ITEM
Parts
{
  String name
  double quantity
} 
```

一般故障似乎很好而且很清楚，但是客户要求是我遇到问题的地方，我不确定如何最好地解决问题......（注意 - 我知道使用 NAME 而不是 ID 是不好关联的 - 但这是一个遗留系统）。

我需要生成以下内容： - 每个位置所需的所有零件列表（只有两个可能）和订单定义的实际数量 - 将其显示在要打印的屏幕上！显然，您可以在同一位置为相同的零件订购多个订单，并且应该将它们加在一起以获得总数。

所以我需要做的是： - 接受每个订单并找到项目 - 接受每个项目并找到零件 - 每个零件定义其位置（来自订单）并乘以数量（来自订单），这就是零件的数量这个位置

最终结果应该是这样的（表格网格表格标题）

```
 Item    Part    QuantityLocation1   QuantityLocation2
    itm1      A         1                    0
              B         4                    2
    itm2      C         0                    5 
```

问题是很明显 PART 类没有 LOCATION 这样的概念......

有人有什么建议吗？我现在能看到的唯一解决方案似乎很糟糕......创建一个新类（如 PartswithLocation），将位置添加到它，然后使用此 PartsWithLocation 重新创建所有 ITEM 对象（已经存在），然后我可以做一些魔术ORDER by ORDER 查找零件并根据位置和数量相乘。最终结果是一个新列表，然后我可以在网格或其他东西（WPF）中显示它......但是这听起来很难看......

这纯粹是一个与设计相关的问题，我不是在寻找源代码，只是关于如何更好地解决我的问题的一些想法。感谢您的时间和帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:33:56.063

如果您正确地动态操作数据，您应该不需要比现在拥有的更多的东西。

在伪代码中，您需要执行以下操作：

```
foreach(order in orders)
{
   order.partlist = GetItem(order.name).parts; // partlist is a list of Part objects, not stored anywhere.
}
foreach(location in locations)
{
   foreach(order in GetOrdersAtLocation(location))
   {
      foreach(part in order.parts)
      {
         location.partlist += { part.name, part.quantity * order.quantity }; // partlist is a list of parts and quantities, to be displayed.
      }
   }
 } 
```

我会在 LINQ 中执行此操作，但是由于您要求的是设计答案而不是代码，所以这或多或少是它会解开的内容。

# java - 使用 Swing 在 Java 中绘制多个矩形

> ID：14343825
> 
> 赞同：2
> 
> 时间：2013-01-15T17:56:47.920
> 
> 标签：java, swing, user-interface, jpanel, paintcomponent

我有代码

```
import java.awt.*;
import javax.swing.*;

public class MondrianPanel extends JPanel
{
    public MondrianPanel()
    {
        setPreferredSize(new Dimension(200, 600));
    }

    public void paintComponent(Graphics g) {
        for(int i = 0; i < 20; i++) {
            paint(g);
        }
    }

    public void paint(Graphics g)
    {
        Color c = new Color((int)Math.random()*255, (int)Math.random()*255, (int)Math.random()*255);
        g.setColor(c);
        g.fillRect((int)Math.random()*200, (int)Math.random()*600, (int)Math.random()*40, (int)Math.random()*40);
    }

} 
```

我试图让它做的是在屏幕上的随机位置绘制一堆随机颜色的矩形。但是，当我运行它时，我只得到一个灰色框。我正在阅读这个问题[使用 Java Swing 绘制多行，](https://stackoverflow.com/questions/2531352/drawing-multiple-lines-with-java-swing)我看到你应该有一个单一的paintComponent，它调用了很多次，我尝试让我的代码适应这个，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T18:06:49.990

这里最大的问题`(int) Math.random() * something`是总是`0`。那是因为演员先执行并且是`0`然后乘以某物仍然是`0`。

它应该是这样的：`(int) (Math.random() * something)`。

然后，您应该重命名`paint(Graphics g)`为`draw(Graphics g)`，否则您会`paint`以错误的方式覆盖。

下面的代码可以根据您的需要工作：

```
public class TestPanel extends JPanel {
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        for (int i = 0; i < 20; i++) {
            draw(g);
        }
    }

    public void draw(Graphics g) {
        Color c = new Color((int) (Math.random() * 255), (int) (Math.random() * 255), (int) (Math.random() * 255));
        g.setColor(c);
        g.fillRect((int) (Math.random() * 400), (int) (Math.random() * 300), (int) (Math.random() * 40), (int) (Math.random() * 40));
    }

    public static void main(String[] args) {
        JFrame f = new JFrame();
        f.getContentPane().add(new TestPanel(), BorderLayout.CENTER);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setSize(400, 300);
        f.setVisible(true);
    }
} 
```

# java - Jersey 反序列化带有附加 ID 的 Post 参数

> ID：14343827
> 
> 赞同：3
> 
> 时间：2013-01-15T17:56:56.423
> 
> 标签：java, web-services, jakarta-ee, jersey

我只是想知道如何修改以下内容

```
@POST
@Consumes(MediaType.APPLICATION_JSON)
public Response createObject(Object object) {
    ...
} 
```

还允许路径参数？我在想类似的东西

```
@POST
@Path("{server}")
@Consumes(MediaType.APPLICATION_JSON)
public Response createObjectOnServer(@PathParam("server") String url, Object object) {
    ...
} 
```

但这要么是错误的，要么我不知道应该如何构造 json。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T05:33:44.037

在我的项目中，第二个代码块应该可以工作：

```
@POST
@Path("/{mode}")
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.TEXT_PLAIN)
public String renderWidget(@PathParam("mode") String mode,RenderingRequest renderingRequest){
    ...
} 
```

其中'mode'是一个路径参数，'RenderingRequest'是一个映射请求主体（一个json）的pojo。

# c# - Windows Server 2008 中没有气球工具提示关闭按钮

> ID：14343828
> 
> 赞同：5
> 
> 时间：2013-01-15T17:57:01.740
> 
> 标签：c#, winforms, .net-4.0, notifications, common-controls

我的程序在应用程序中使用气球通知气泡来引导用户，在 Windows XP 中，气球窗口的右上角有一个小“X”，以便在单击时关闭窗口，如果您单击其中的任何位置，窗口也会关闭，即使你不点击'X'。

但是，当程序在 Windows Server 2008 上运行时，气球会出现，但没有“X”按钮，并且当我单击它们时也不会关闭。

偶然我设法通过删除包含以下内容的 .MANIFEST 文件来复制 Windows XP 中的行为：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
    <assemblyIdentity version="2.0.0.0" processorArchitecture="x86" name="SofrwareName" type="win32" />
    <dependency>
        <dependentAssembly>
            <assemblyIdentity type="win32" name="Microsoft.Windows.Common-Controls" version="6.0.0.0" publicKeyToken="<Removed>" language="*" processorArchitecture="x86" />
        </dependentAssembly>
    </dependency>
</assembly> 
```

当我删除此清单并在 Windows XP 中运行我的程序时，气球的行为就像在 Windows Server 2008 中一样。我假设这可能意味着与 Windows Server 2008 中的 Common Controls v6 存在某种不兼容。

有谁知道是什么导致气球在点击时没有关闭并且没有“X”关闭按钮？

更新：这是气球创建代码：

```
m_tool = new MessageTool(); //internal class MessageTool : NativeWindow {...}

CreateParams cp = new CreateParams();
cp.ClassName = TOOLTIPS_CLASS; //TOOLTIPS_CLASS = "tooltips_class32";
cp.Style =
    WS_POPUP |
    TTS_BALLOON |
    TTS_NOPREFIX |
    TTS_ALWAYSTIP |
    TTS_CLOSE;

m_ti = new TOOLINFO();
/*
[StructLayout(LayoutKind.Sequential)]
private struct TOOLINFO
{
    public int cbSize;
    public int uFlags;
    public IntPtr hwnd;
    public IntPtr uId;
    public RECT rect;
    public IntPtr hinst;
    [MarshalAs(UnmanagedType.LPTStr)]
    public string lpszText;
    public uint lParam;
}
*/

m_ti.cbSize = Marshal.SizeOf(m_ti);

m_tool.CreateHandle(cp);

m_ti.uFlags = TTF_TRACK |
    TTF_CLOSEONMOUSECLICK |
    TTF_TRANSPARENT |
    TTF_SUBCLASS |
    TTF_PARSELINKS;

m_ti.uId = m_tool.Handle;
m_ti.lpszText = m_text;
m_ti.hwnd = m_parent.Handle;

WindowsAPI.GetClientRect(m_parent.Handle, ref m_ti.rect);
ClientToScreen(m_parent.Handle, ref m_ti.rect);

WindowsAPI.SetWindowPos(
    m_tool.Handle,
    HWND_TOP,
    0, 0, 0, 0,
    (int)SetWindowPosFlags.SWP_NOACTIVATE |
    (int)SetWindowPosFlags.SWP_NOMOVE |
    (int)SetWindowPosFlags.SWP_NOSIZE);

IntPtr ptrStruct = Marshal.AllocHGlobal(Marshal.SizeOf(m_ti));
Marshal.StructureToPtr(m_ti, ptrStruct, true);

WindowsAPI.SendMessage(
    m_tool.Handle, TTM_ADDTOOL, 0, ptrStruct);

m_ti = (TOOLINFO)Marshal.PtrToStructure(ptrStruct,
    typeof(TOOLINFO));

WindowsAPI.SendMessage(
    m_tool.Handle, TTM_SETMAXTIPWIDTH,
    0, new IntPtr(m_maxWidth));

WindowsAPI.SendMessage(
    m_tool.Handle, TTM_SETTITLE,
    (int)m_titleIcon, ptrTitle);

SetBalloonPosition(m_ti.rect);

Marshal.FreeHGlobal(ptrStruct);
Marshal.FreeHGlobal(ptrTitle); 
```

和 Windows 构建信息：Windows Server Standard、SP2、32 位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:11:35.963

这可能无济于事，我不想轻视它，但我遇到了一些问题，即应用程序由于文件/文件夹权限而无法访问 DLL，并且还看到了在计算机之间传输文件时文件被锁定的位置（甚至同一域内的计算机）。要取消阻止它，您必须通过 Windows 资源管理器进入文件的属性，在“高级”下并取消阻止该文件。

# asp.net - 需要 GridView 记录更新帮助

> ID：14343833
> 
> 赞同：0
> 
> 时间：2013-01-15T17:57:17.033
> 
> 标签：asp.net, sql-update, html-select

我在数据库中有一个表。

该表有 10 行和 4 列，其中包含 ID（来自 UI 的整数值）。

在 asp.net 应用程序的前端，我将所有 10 行绑定到 Grid-view.Grid-view 有 4 列，每列包含一个下拉列表。屏幕上有一个名为“更新”的按钮。

我想在单击更新按钮时更新数据库表，即在网格视图中选择的任何选项都应该在数据库表中更新。

最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T17:03:15.760

使用代码隐藏处理程序来处理按钮单击，然后根据 Gridview 中的值进行数据库更新。

# android - 我的 Android 应用程序在按下主页按钮后崩溃

> ID：14343834
> 
> 赞同：2
> 
> 时间：2013-01-15T17:57:19.353
> 
> 标签：android

我有一个具有滚动视图和 MediaPlayer 的活动，在播放音乐时我按下主页，它正常关闭，但是当我按下主页按钮而没有音乐或其他任何应用程序停止运行时，请帮助，有代码或避免这个问题的方法？我是安卓新手

**这是我的日志猫**

```
 01-15 18:05:39.713: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:39.992: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:39.992: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:40.462: D/dalvikvm(795): GC_FOR_ALLOC freed 39K, 7% free 2425K/2584K, paused 65ms, total 76ms
01-15 18:05:40.502: I/dalvikvm-heap(795): Grow heap (frag case) to 3.945MB for 1536016-byte allocation
01-15 18:05:40.571: D/dalvikvm(795): GC_FOR_ALLOC freed <1K, 4% free 3924K/4088K, paused 68ms, total 68ms
01-15 18:05:40.682: D/dalvikvm(795): GC_CONCURRENT freed <1K, 4% free 3924K/4088K, paused 18ms+19ms, total 116ms
01-15 18:05:41.272: D/dalvikvm(795): GC_FOR_ALLOC freed <1K, 5% free 3924K/4088K, paused 46ms, total 46ms
01-15 18:05:41.332: I/dalvikvm-heap(795): Grow heap (frag case) to 7.239MB for 3456016-byte allocation
01-15 18:05:41.443: D/dalvikvm(795): GC_CONCURRENT freed 0K, 3% free 7299K/7464K, paused 24ms+17ms, total 110ms
01-15 18:05:41.711: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:41.711: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:41.741: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:41.782: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:41.932: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:41.942: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:41.961: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:42.021: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:42.021: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:42.071: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:42.071: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:42.071: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:42.091: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:42.131: D/gralloc_goldfish(795): Emulator without GPU emulation detected.
01-15 18:05:42.302: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:42.411: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:45.321: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:45.331: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:45.352: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:45.352: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:45.422: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:45.431: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:45.461: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:45.492: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:45.601: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:45.711: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:45.711: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:45.711: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:45.981: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:45.981: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:45.991: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:46.681: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:46.721: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:46.751: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:46.812: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:47.031: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:47.041: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:47.061: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:47.061: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:47.081: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:47.221: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:47.221: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:47.273: I/Choreographer(795): Skipped 70 frames!  The application may be doing too much work on its main thread.
01-15 18:05:47.281: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:47.301: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:47.321: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:47.321: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:47.332: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:47.332: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:47.631: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:47.781: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:47.843: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:48.081: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:48.081: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:48.091: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:48.121: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:48.471: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:48.481: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:48.481: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:48.492: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:48.543: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:48.871: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:48.871: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:48.911: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:48.911: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:48.991: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:48.991: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:49.221: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:49.251: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:49.431: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:49.441: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:49.461: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:49.471: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:49.471: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:49.471: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:49.551: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:49.551: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:49.662: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:49.751: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:49.751: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:49.761: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:49.852: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:49.852: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:49.852: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:50.751: D/dalvikvm(795): GC_FOR_ALLOC freed 1578K, 21% free 6643K/8340K, paused 265ms, total 293ms
01-15 18:05:50.761: I/dalvikvm-heap(795): Grow heap (frag case) to 8.063MB for 1536016-byte allocation
01-15 18:05:51.052: D/dalvikvm(795): GC_CONCURRENT freed 5K, 3% free 8138K/8340K, paused 8ms+66ms, total 270ms
01-15 18:05:51.582: D/dalvikvm(795): GC_FOR_ALLOC freed <1K, 3% free 8138K/8340K, paused 229ms, total 229ms
01-15 18:05:51.812: I/dalvikvm-heap(795): Grow heap (frag case) to 11.354MB for 3456016-byte allocation
01-15 18:05:52.143: D/dalvikvm(795): GC_CONCURRENT freed 0K, 2% free 11513K/11716K, paused 88ms+58ms, total 330ms
01-15 18:05:52.773: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:52.802: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:52.872: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:52.962: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:53.182: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:53.202: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:53.212: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:53.222: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:53.222: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:53.343: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:53.343: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:53.362: I/Choreographer(795): Skipped 148 frames!  The application may be doing too much work on its main thread.
01-15 18:05:53.362: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:53.393: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:53.922: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:54.022: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:54.102: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:54.102: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:54.182: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:54.182: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:54.212: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:54.212: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:54.593: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:54.852: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:54.852: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:55.042: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:55.132: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:55.132: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:55.252: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:55.281: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:55.281: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:55.322: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:55.392: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:55.392: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:55.392: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:55.392: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:55.422: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:55.422: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:55.472: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:55.483: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:55.492: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:05:55.492: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:06:06.813: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
01-15 18:06:06.842: D/AndroidRuntime(795): Shutting down VM
01-15 18:06:06.842: W/dalvikvm(795): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
01-15 18:06:06.991: E/AndroidRuntime(795): FATAL EXCEPTION: main
01-15 18:06:06.991: E/AndroidRuntime(795): java.lang.RuntimeException: Unable to pause activity {com.example.storyteller/com.example.storyteller.Ricitos}: java.lang.NullPointerException
01-15 18:06:06.991: E/AndroidRuntime(795):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3016)
01-15 18:06:06.991: E/AndroidRuntime(795):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2971)
01-15 18:06:06.991: E/AndroidRuntime(795):  at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2949)
01-15 18:06:06.991: E/AndroidRuntime(795):  at android.app.ActivityThread.access$800(ActivityThread.java:141)
01-15 18:06:06.991: E/AndroidRuntime(795):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1245)
01-15 18:06:06.991: E/AndroidRuntime(795):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-15 18:06:06.991: E/AndroidRuntime(795):  at android.os.Looper.loop(Looper.java:137)
01-15 18:06:06.991: E/AndroidRuntime(795):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-15 18:06:06.991: E/AndroidRuntime(795):  at java.lang.reflect.Method.invokeNative(Native Method)
01-15 18:06:06.991: E/AndroidRuntime(795):  at java.lang.reflect.Method.invoke(Method.java:511)
01-15 18:06:06.991: E/AndroidRuntime(795):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-15 18:06:06.991: E/AndroidRuntime(795):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-15 18:06:06.991: E/AndroidRuntime(795):  at dalvik.system.NativeStart.main(Native Method)
01-15 18:06:06.991: E/AndroidRuntime(795): Caused by: java.lang.NullPointerException
01-15 18:06:06.991: E/AndroidRuntime(795):  at com.example.storyteller.Ricitos.onPause(Ricitos.java:63)
01-15 18:06:06.991: E/AndroidRuntime(795):  at android.app.Activity.performPause(Activity.java:5206)
01-15 18:06:06.991: E/AndroidRuntime(795):  at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1226)
01-15 18:06:06.991: E/AndroidRuntime(795):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3002)
01-15 18:06:06.991: E/AndroidRuntime(795):  ... 12 more
01-15 18:06:11.002: I/Process(795): Sending signal. PID: 795 SIG: 9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:59:51.380

我想，“主页按钮”是您的手机主页按钮。您的 onPause 或 onDestroy 方法可能有错误。将您的错误日志发送给我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:14:20.693

检查你的`onDestroy()`和`onPause()`方法。可能您没有关闭 MediaPlayer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T18:20:23.823

```
public void onPause() { 
    super.onPause(); 
    mp.pause(); 
} 
```

这里唯一可能的原因`NullPointerException`是。检查您是否在代码中的任何位置分配给它，或者是否对其进行了初始化。`mp``null``null`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-22T07:46:05.337

我也遇到了同样的问题..简单的解决方案就是实现 onPause() 方法并将停止代码放在那里....

# java - 举一个在正则表达式 java 中使用西里尔字母的例子

> ID：14343836
> 
> 赞同：5
> 
> 时间：2013-01-15T17:57:22.840
> 
> 标签：java, regex, string

如何制作`cyrillic`字符串的正则表达式，我想以某种方式使用它：

`String.replaceAll("Кириллица","")`

当然是行不通的。我该怎么做，让它发挥作用？

好的，我看到该方法有效，但对我不起作用。我该如何检查，为什么方法不执行？

...

嗯，我尝试使用`s1 = s1.replaceAll("[\\p{InCyrillic}]", "");`我通过套接字获得的字符串。它工作得很好，所有西里尔字符都消失了，包括这个词`"Экзамен"`，但如果我尝试 `s1=s1.replaceAll("Экзамен","")`没有任何反应。

但是`s1=s1.replaceAll("Экзамен","")`对于该程序中定义的静态字符串，该方法在同一程序中起作用。我想这个问题可能是因为错误的字符集，但我仍然不明白我做错了什么。字符串的字符集是`windows-1251`. 我尝试在程序中尝试字符集（现在是jsp），使用方法

```
System.setProperty("file.encoding", "windows-1251");
response.setCharacterEncoding("windows-1251"); 
```

尝试将字符串从一个字符集转换为另一个字符集。没有任何改变

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T07:47:31.357

如果您在@Henry 的回答中显示您的结果，可能会更清楚。我想是字符或编码的问题。要识别是西里尔文中的字符串，您可以使用以下代码：

```
String s1 = "Экзaмен";
s1 = s1.replaceAll("[\\p{InCyrillic}]", "");
System.out.println(s1); 
```

该代码将删除所有西里尔字符，您可以识别无效的编码字符。

如果您的结果类似于“a”或“e”或“ae”，则表示您的字符串中存在类似于西里尔字母的拉丁字符，因此您应该使用此正则表达式替换

```
 s1 = s1.replaceAll("Экз[aa]м[ee]н", ""); 
```

其中 [a-是西里尔字符，a-是拉丁字符] 等等。

如果您的结果为“Экзaмен”，则表示编码问题，希望此链接对您有所帮助

[如何确定字符串是否包含无效的编码字符](https://stackoverflow.com/questions/887148/how-to-determine-if-a-string-contains-invalid-encoded-characters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T19:12:33.647

刚试过这个：

```
String s1 = "Введение в специальность (Б.3.2.1-ПиКО)60,3Экзамен";
String s2 = s1.replaceAll("Экзамен", "");
System.out.println(s2); 
```

输出是：

```
Введение в специальность (Б.3.2.1-ПиКО)60,3 
```

# html - 是否可以在单击后保持 :active 伪类处于活动状态？

> ID：14343839
> 
> 赞同：0
> 
> 时间：2013-01-15T17:57:29.993
> 
> 标签：html, css, pseudo-class

您单击一些文本，该文本会触发一个 div 显示，一个带有其他单词的表单，希望如此。当然，当您松开鼠标右键时它会消失，我想让它保留。

怎么样，如果你知道？

# security - 尝试访问 iframe 内容（不同的子域）；尝试设置 CORS

> ID：14343841
> 
> 赞同：5
> 
> 时间：2013-01-15T17:57:37.700
> 
> 标签：security, iframe, amazon-s3, cross-domain, cors

我在 托管一个文件`domain.com`，其中包含一个 iframe，其文档托管在`s3.domain.com`. 我正在尝试访问 iframe 的内容，但是收到以下内容：

> 不安全的 JavaScript 尝试从 URL [http://domain.com/的框架访问具有 URL](http://domain.com/) [http://s3.domain.com.s3.amazonaws.com/file.html](http://s3.domain.com.s3.amazonaws.com/file.html)的框架。域、协议和端口必须匹配。

我明白这其中的原因。我找到了两个解决方法。

1.  由于我拥有这两个文档，因此我可以将域属性设置为允许访问，如下所示：`document.domain = 'domain.com';`
2.  使用 CORS 允许访问托管在 S3 存储桶中的文档

我更愿意这样做，但是这样做有困难。我的存储桶的 CORS 配置文件当前如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
    </CORSRule>
</CORSConfiguration> 
```

但是，这仍然会导致错误。我确定我错过了一些东西，但不确定是什么。

任何意见，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:13:09.193

使用 CORS 的浏览器通常会做一个预检请求（`OPTIONS`方法）。可能您还必须允许所有标头以确保正确的预检请求处理：

```
<AllowedHeader>*</AllowedHeader> 
```

另请参见[此处](http://docs.aws.amazon.com/AmazonS3/latest/dev/cors.html#how-do-i-enable-cors)。

# javascript - deleteRow 有时会删除正确的行，有时不会在 Javascript 中

> ID：14343843
> 
> 赞同：2
> 
> 时间：2013-01-15T17:57:40.433
> 
> 标签：javascript

我有一张桌子。在每一行的末尾都有一个href“X”，它删除了这一行。这很简单。现在，当您为任何第 2 行单击“X”时，它会删除第 2 行，但是当您单击第 3 行时，它会删除第 4 行。

这是我的代码：

HTML

```
<table id="my_table" align="center" cellspacing="0" cellpadding="0" border="0">
  <tr>
    <td>Custom0</td>
    <td><a title="my title text" id="1" href="#" class="someclass" onclick="deleteRows(0)">X</a>

    </td>
  </tr>
  <tr>
    <td>Custom1</td>
    <td> <a title="my title text" id="2" href="#" class="someclass" onclick="deleteRows(1)">X</a>

    </td>
  </tr>
  <tr>
    <td>Custom2</td>
    <td> <a title="my title text" id="3" href="#" class="someclass" onclick="deleteRows(2)">X</a>

    </td>
  </tr>
  <tr>
    <td>Custom3</td>
    <td> <a title="my title text" id="4" href="#" class="someclass" onclick="deleteRows(3)">X</a>

    </td>
  </tr>
  <tr>
    <td>Custom4</td>
    <td> <a title="my title text" id="5" href="#" class="someclass" onclick="deleteRows(4)">X</a>

    </td>
  </tr>
  <tr>
    <td>Custom5</td>
    <td> <a title="my title text" id="6" href="#" class="someclass" onclick="deleteRows(5)">X</a>

    </td>
  </tr>
</table> 
```

和 Javascript

```
function deleteRows(row) {
  var tbl = document.getElementById('my_table'); // table reference
  tbl.deleteRow(row);
} 
```

你可以在这里玩机智：http: [//jsfiddle.net/nTJtv/13/](http://jsfiddle.net/nTJtv/13/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T18:01:00.780

您已经对行号进行了硬编码，因此在第一次删除后它们不同步。该`<table>`元素的`.rows`属性是“live”，因此删除一个意味着数字不再与您的 HTML 对齐。

相反，考虑传递`this.parentNode.parentNode`给函数并使用它来确定要删除的行：

```
<a title="my title text" id="6" href="#" class="someclass" onclick="deleteRows(this.parentNode.parentNode)">X</a> 
```

然后`removeChild()`在函数中使用：

```
function deleteRows(row) {
  var tbl = document.getElementById('my_table'); // table reference
  tbl.getElementsByTagName("tbody")[0].removeChild(row);
} 
```

编辑：`<tr>`是元素的子`<tbody>`元素，因此它必须是从中删除它的父元素。

[http://jsfiddle.net/nTJtv/19/](http://jsfiddle.net/nTJtv/19/)

如果您真的更愿意使用`deleteRow()`，则遍历行以找到传递给函数的行并将其删除：

```
function deleteRows(row) {
  var tbl = document.getElementById('my_table'); // table reference
  // Loop over the table .rows collection to find the one passed into the function
  for (var i=0; i<tbl.rows.length; i++) {
    if (row == tbl.rows[i]) {
      // And delete it
      tbl.deleteRow(i); 
      return;
    }
  } 
} 
```

[http://jsfiddle.net/nTJtv/21/](http://jsfiddle.net/nTJtv/21/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:13:27.903

为什么不做这样的事情？使用 jQuery 添加到现有文件/站点中并不难。

HTML：

```
<table id="my_table" cellspacing="0" cellpadding="0">
  <tr>
    <td>Custom0</td>
    <td><span title="my title text" id="1" class="someclass">X</span></td>
  </tr>
  <tr>
    <td>Custom1</td>
    <td><span title="my title text" id="2" class="someclass">X</span></td>
  </tr>
</table> 
```

JavaScript：

```
$('.someclass').on('click', function() {
  $(this).parent().parent().remove();
}); 
```

# javascript - 创建一个可变长度的字符串，填充一个重复的字符

> ID：14343844
> 
> 赞同：200
> 
> 时间：2013-01-15T17:57:43.037
> 
> 标签：javascript, html, string

所以，我的问题已被其他人以 Java 形式提出：[Java - 创建一个具有指定长度并填充特定字符的新字符串实例。最佳解决方案？](https://stackoverflow.com/questions/1802915/java-create-a-new-string-instance-with-specified-length-and-filled-with-specif)

. . . 但我正在寻找它的 JavaScript 等价物。

基本上，我想根据每个字段的“maxlength”属性用“#”字符动态填充文本字段。因此，如果输入 has `maxlength="3"`，则该字段将填充“###”。

理想情况下会有类似 Java 的东西`StringUtils.repeat("#", 10);`，但是到目前为止，我能想到的最好的选择是循环并附加“#”字符，一次一个，直到达到最大长度。我无法摆脱比这更有效的方法的感觉。

有任何想法吗？

仅供参考 - 我不能简单地在输入中设置默认值，因为“#”字符需要清除焦点，并且如果用户没有输入值，则需要在模糊时“重新填充”。这是我关心的“补充”步骤

* * *

## 回答 #1

> 赞同：352
> 
> 时间：2013-01-15T17:59:54.493

最好的方法（我见过）是

```
var str = new Array(len + 1).join( character ); 
```

这将创建一个具有给定长度的数组，然后将其与给定的字符串连接以重复。`.join()`无论元素是否分配了值，该函数都会尊重数组长度，并且未定义的值将呈现为空字符串。

您必须将 1 添加到所需的长度，因为分隔符字符串位于数组元素*之间。*

* * *

## 回答 #2

> 赞同：229
> 
> 时间：2016-01-15T12:44:37.267

试试这个：P

```
s = '#'.repeat(10)

document.body.innerHTML = s
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2018-10-05T17:13:57.520

ES2015 最简单的方法是做类似的事情

`'X'.repeat(data.length)`

`X`是任何字符串，`data.length`是所需的长度。

见：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat)

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2014-01-27T01:33:33.420

不幸的是，虽然这里提到的 Array.join 方法很简洁，但它比基于字符串连接的实现慢了大约 10 倍。它在大字符串上表现特别差。有关完整的性能详细信息，请参见下文。

在 Firefox、Chrome、Node.js MacOS、Node.js Ubuntu 和 Safari 上，我测试的最快实现是：

```
function repeatChar(count, ch) {
    if (count == 0) {
        return "";
    }
    var count2 = count / 2;
    var result = ch;

    // double the input until it is long enough.
    while (result.length <= count2) {
        result += result;
    }
    // use substring to hit the precise length target without
    // using extra memory
    return result + result.substring(0, count - result.length);
}; 
```

这是冗长的，所以如果你想要一个简洁的实现，你可以使用幼稚的方法；它的性能仍然比 Array.join 方法好 2 到 10 倍，并且也比小输入的加倍实现更快。代码：

```
// naive approach: simply add the letters one by one
function repeatChar(count, ch) {
    var txt = "";
    for (var i = 0; i < count; i++) {
        txt += ch;
    }
    return txt;
} 
```

更多信息：

*   [在您自己的浏览器中运行速度测试](http://www.zerotrickpony.com/buildstring)
*   [速度测试完整源代码](http://www.zerotrickpony.com/buildstring/buildstring_speed.js)
*   [速度测试结果](http://www.zerotrickpony.com/buildstring/results.txt)

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2013-03-09T05:23:26.690

我会创建一个常量字符串，然后在其上调用子字符串。

就像是

```
var hashStore = '########################################';

var Fiveup = hashStore.substring(0,5);

var Tenup = hashStore.substring(0,10); 
```

也快一点。

[http://jsperf.com/const-vs-join](http://jsperf.com/const-vs-join)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2018-06-07T15:48:17.743

一个很好的 ES6 选项是`padStart`空字符串。像这样：

```
var str = ''.padStart(10, "#"); 
```

注意：这在 IE 中不起作用（没有 polyfill）。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-02-25T18:42:52.280

### 适用于所有浏览器的版本

此功能可以满足您的需求，并且执行速度比已接受答案中建议的选项快得多：

```
var repeat = function(str, count) {
    var array = [];
    for(var i = 0; i <= count;)
        array[i++] = str;
    return array.join('');
} 
```

你像这样使用它：

```
var repeatedCharacter = repeat("a", 10); 
```

要将此功能的性能与已接受答案中提出的选项的性能进行比较，请参阅[**此 Fiddle**](https://jsfiddle.net/mf2jwjym/5/)和[**此 Fiddle**](https://jsfiddle.net/mf2jwjym/4/)以获取基准。

### 仅适用于现代浏览器的版本

在现代浏览器中，您现在也可以这样做：

```
var repeatedCharacter = "a".repeat(10) }; 
```

这个选项甚至更快。但是，不幸的是，它在任何版本的 Internet Explorer 中都不起作用。

表中的数字指定了完全支持该方法的第一个浏览器版本：

[![在此处输入图像描述](../Images/5799edfa5e18a05a0d829aed838903fa.png)](https://i.stack.imgur.com/B3PVU.png)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-11-02T22:06:47.733

```
For Evergreen browsers, this will build a staircase based on an incoming character and the number of stairs to build.
function StairCase(character, input) {
    let i = 0;
    while (i < input) {
        const spaces = " ".repeat(input - (i+1));
        const hashes = character.repeat(i + 1);
        console.log(spaces + hashes);
        i++;
    }
}

//Implement
//Refresh the console
console.clear();
StairCase("#",6); 
```

[您还可以为旧浏览器的重复添加 polyfill](//developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/repeat)

```
 if (!String.prototype.repeat) {
      String.prototype.repeat = function(count) {
        'use strict';
        if (this == null) {
          throw new TypeError('can\'t convert ' + this + ' to object');
        }
        var str = '' + this;
        count = +count;
        if (count != count) {
          count = 0;
        }
        if (count < 0) {
          throw new RangeError('repeat count must be non-negative');
        }
        if (count == Infinity) {
          throw new RangeError('repeat count must be less than infinity');
        }
        count = Math.floor(count);
        if (str.length == 0 || count == 0) {
          return '';
        }
        // Ensuring count is a 31-bit integer allows us to heavily optimize the
        // main part. But anyway, most current (August 2014) browsers can't handle
        // strings 1 << 28 chars or longer, so:
        if (str.length * count >= 1 << 28) {
          throw new RangeError('repeat count must not overflow maximum string size');
        }
        var rpt = '';
        for (;;) {
          if ((count & 1) == 1) {
            rpt += str;
          }
          count >>>= 1;
          if (count == 0) {
            break;
          }
          str += str;
        }
        // Could we try:
        // return Array(count + 1).join(this);
        return rpt;
      }
    } 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-04-25T15:06:28.110

基于 Hogan 和 Zero Trick Pony 的回答。我认为这应该既快速又灵活，可以很好地处理大多数用例：

```
var hash = '####################################################################'

function build_string(length) {  
    if (length == 0) {  
        return ''  
    } else if (hash.length <= length) {  
        return hash.substring(0, length)  
    } else {  
        var result = hash  
        const half_length = length / 2  
        while (result.length <= half_length) {  
            result += result  
        }  
        return result + result.substring(0, length - result.length)  
    }  
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-05-14T16:24:56.787

如果您愿意，可以将函数的第一行用作单行：

```
function repeat(str, len) {
    while (str.length < len) str += str.substr(0, len-str.length);
    return str;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-07-27T09:35:27.163

如果它是您需要的性能（在 ES6 之前），那么 substr 和模板字符串的组合可能是最好的。这个函数是我用来创建空格填充字符串的，但你可以将模板更改为你需要的任何内容：

```
function strRepeat(intLen, strTemplate) {
  strTemplate = strTemplate || "          ";
  var strTxt = '';
  while(intLen > strTemplate.length) {
    strTxt += strTemplate;
    intLen -= strTemplate.length;
  }
  return ((intLen > 0) ? strTxt + strTemplate.substr(0, intLen) : strTxt);
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-04-15T13:56:49.500

我会做

```
Buffer.alloc(length, character).toString() 
```

# java - 最大化框架时，滚动窗格消失

> ID：14343845
> 
> 赞同：0
> 
> 时间：2013-01-15T17:57:43.010
> 
> 标签：java, swing, jscrollpane, jbutton, actionlistener

我的问题是这个......

```
JFrame ActualFrame = new JFrame("Actual frame");
JScrollPane pane = new JScrollPane(new JTable(data, columns));
ActualFrame.add(pane);
ActualFrame.add(PrintPreviewBtn);

PrintPreviewBtn.addActionListener(new ActionListener() {            
 public void actionPerformed(ActionEvent e) {
   JFrame PreviewFrame = new JFrame("Preview");
   PreviewFrame.add(pane, BorderLayout.CENTER);
} 
```

当我运行程序时，一切似乎都很好，但是当我按下打印预览按钮时，预览框会显示出来，当我最大化或调整 ActualFrame 的大小时，表格会消失......

注意：我将窗格添加到预览框架中，以显示它好像是所显示表格的预览......是打印预览的任何其他方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:43:29.817

对于打印，有 java.awt.PrinterJob 类。要显示标准打印预览，您应该调用：

```
PrinterJob job = PrinterJob.getPrinterJob();
job.printDialog(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:08:57.793

一个组件只能属于一个父级。当您将其添加到 时`PreviewFrame`，它会自动从 中删除`ActualFrame`。

不要使用前一个面板，而是使用前一个面板中的模型创建一个新`JTable`的 。

**更新**

打印表格稍微复杂一些，包括标题，并且需要调整列的大小以满足可用空间的要求。

查看[打印表教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#printing)以获取一些示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T20:49:32.480

JScrollPane 从 中消失的原因`ActualFrame`是：您正在添加`pane`in的相同实例`PreviewFrame`。所以实际的容器`pane`现在是`PreviewFrame`而不是`ActualFrame`. 当您最大化或调整大小时`ActualFrame`，它会重新绘制其子组件。由于`pane`现在不再属于它，`ActualFrame`所以它不显示`pane`现在。

避免这种情况的最好方法是先创建一个单独的实例，而不是在创建对象时在构造函数`JTabel`中传递匿名`JTable`类对象。获取该实例的and 。添加一个新实例将包含具有相同和对象的新实例。代码看起来像这样：`JScrollPane``pane``TableModel``TableColumnModel``JTable``previewFrame``JScrollPane``JTable``TableModel``TableColumnModel`

```
final JTable table = new JTable(data,columns);
JScrollPane pane = new JScrollPane(table);
ActualFrame.add(pane);
ActualFrame.add(PrintPreviewBtn);

PrintPreviewBtn.addActionListener(new ActionListener() {            
 public void actionPerformed(ActionEvent e) {
   JFrame previewFrame = new JFrame("Preview");
   javax.swing.table.TableModel tabModel = table.getModel();
   javax.swing.table.TableColumnModel colModel = table.getColumnModel();
   JScrollPane previewPane = new JScrollPane(new JTable(tabModel,colModel));
   previewFrame.getContentPane().add(previewPane, BorderLayout.CENTER);
   previewFrame.pack();previewFrame.setVisible(true);
} 
```

# c# - 如何获取控制器的 POST 操作方法？

> ID：14343850
> 
> 赞同：2
> 
> 时间：2013-01-15T17:58:32.240
> 
> 标签：c#, .net, asp.net-mvc, unit-testing, reflection

我需要对我的 POST 操作方法进行单元测试，所以我需要它们的列表。我正在使用反射来查找这些方法`[AcceptVerbs(HttpVerbs.Post)]`。

```
// get controller's methods
typeof(FooController).GetMethods()

// get controller's action methods
.Where(q => q.IsPublic && q.IsVirtual && q.ReturnType == typeof(ActionResult))

// get actions decorated with AcceptVerbsAttribute
.Where(q => q.CustomAttributes
  .Any(w => (w.AttributeType == _typeof(AcceptVerbsAttribute)))
  )

// ...everything is ok till here...

// filter for those with the HttpVerbs.Post ctor arg
.Where(q => q.CustomAttributes
  .Any(w => w.ConstructorArguments.Any(e => e.Value.Equals(HttpVerbs.Post))))
; 
```

然而，这给了我一个空列表。问题在于最后一次检查属性的 ctor。我如何解决它？

值得注意的是，有两种方法可以将动作的方法声明为 POST：使用`AcceptVerbsAttribute`如上，和`HttpPostAttribute`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:36:37.320

更改以下内容：

```
w => w.ConstructorArguments.Any(e => e.Value.Equals(HttpVerbs.Post)) 
```

至

```
w => w.ConstructorArguments.Any(e => ((HttpVerbs) e.Value) == HttpVerbs.Post) 
```

这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T06:12:50.810

您还可以使用 [HttpPost] 属性而不是 [AcceptVerbs(HttpVerbs.Post)] 并简化您的表达式。

[http://msdn.microsoft.com/en-us/library/system.web.mvc.httppostattribute(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.httppostattribute(v=vs.108).aspx)

# c - 如何检查文件是否关闭

> ID：14343851
> 
> 赞同：5
> 
> 时间：2013-01-15T17:58:33.130
> 
> 标签：c, linux

我有文件描述符，在我的信号处理程序中，我关闭了文件。但由于其他条件，该文件可能已提前关闭。有没有办法检查文件描述符是否指向 c 和 linux 中的打开文件？

更新：是否可以确定与文件描述符关联的文件名？这样，如果 fd 被回收，应用程序可以检测到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T18:07:21.563

尝试对文件描述符进行任何文件操作`lseek`。如果它返回`-1`. 然后检查`errno`，如果是，`EBADF`则文件描述符已经关闭。

尝试以`lseek`不受影响的方式进行，如下所示。

```
lseek(fd, 0, SEEK_CUR); 
```

通常在程序中打开第一个文件时，我们总是将文件描述符作为`3`. 关闭此文件后，如果我们尝试打开其他文件，我们将获得与`3`. 因为我们总是会得到最低的可用数字。如果我们在一个程序中关闭和重新打开许多文件，那么我们需要改进我们的代码来跟踪文件描述符列表以检查它是否关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T19:51:58.400

`fd`在您关闭分配给它的文件描述符之后`-1`，您可以稍后进行测试`fd`以`-1`查看您是否已经关闭它。

* * *

`readlink()`您可以通过调用来查找（有效）文件描述符引用的文件名`/proc/<pid>/fd/<file descriptor>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T18:20:42.853

当您打开一个文件时，它总是得到分配的最小可用 fd。因此，如果您关闭 fd，然后在代码中的某个位置打开另一个文件，您可以轻松地将相同的 fd 重新分配给这个新文件。所以没有可靠的方法来判断文件描述符是否已关闭，因为它现在可以指向另一个打开的文件。

# javascript - 我怎么知道我将 onChange 正确插入到我的表单中？

> ID：14343852
> 
> 赞同：0
> 
> 时间：2013-01-15T17:58:38.653
> 
> 标签：javascript, select, onchange

我在 php 生成的选择中插入了一个 onChange 触发器。但是我的最终结果没有响应以纯 html 和 javascript 格式完美运行的 onChange 函数。如何调试它以便我知道 onChange 函数已正确插入到我的选择标签中？

谢谢你

**更多信息**

这就是实际的样子

```
<p class="<?php if (get_option('jr_submit_cat_required')!=='yes') : echo 'optional'; endif; ?>"><label for="job_cat"><?php _e('Job Category', 'appthemes'); ?> <?php if (get_option('jr_submit_cat_required')=='yes') : ?><span title="required">*</span><?php endif; ?></label> <?php
        $sel = 0;
        if (isset($posted['job_term_cat']) && $posted['job_term_cat']>0) $sel = $posted['job_term_cat']; 
        global $featured_job_cat_id;
        $args = array(
            'orderby'            => 'name', 
            'exclude'            => $featured_job_cat_id,
            'order'              => 'ASC',
            'name'               => 'job_term_cat',
            'hierarchical'       => 1, 
            'echo'               => 0,
            'class'              => 'job_cat',
            'selected'           => $sel,
            'taxonomy'           => 'job_cat',
            'hide_empty'         => false
        );
        $dropdown = wp_dropdown_categories( $args );
       $dropdown = str_replace('class=\'job_cat\'id=\'job_term_cat\' >','class=\'job_cat\' onchange="changeValue(this)"><option value="">'.__('Select a category&hellip;', 'appthemes').'</option>',$dropdown);
    ?></p>
echo $dropdown; 
```

这是瓷砖

```
<p><label for="job_title"><?php _e('Job title', 'appthemes'); ?> <span title="required">*</span></label> <input type="text" class="text"  id="job_title" name="job_title" ></p> 
```

这是脚本

```
function changeValue(obj){ document.getElementById('job_title').value= obj[obj.selectedIndex].innerHTML;
} 
```

脚本在页脚中的位置

```
<p class=""><label for="cat">Category <span title="required">*</span></label> <select name="a_cat" id="a_cat" class="cat">
<option class="level-0" value="86" selected="selected">1 a</option>
<option class="level-0" value="93">2 b</option>
<option class="level-0" value="125">3 c</option>
</select>
</p>

<div id="footer">
<script type="text/javascript">
function changeValue(obj){ document.getElementById('title').value= obj[obj.selectedIndex].innerHTML;
}
</script>
</div> 
```

上面是生成的东西和页脚，你看有什么不对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:09:11.640

在 firefox 或 chrome 中，您可以使用`console.log('rock on!')`来查看是否`onChange`调用了您的事件。

您需要firefox 中的[Firebug](https://getfirebug.com/)或 Chrome 中的控制台资源管理器才能看到结果

或者，您可以仅用于`alert('here');`查看您的代码是否运行。

# eclipse - google-api-client-java eclipse 构建路径和谷歌应用引擎

> ID：14343856
> 
> 赞同：1
> 
> 时间：2013-01-15T17:58:54.433
> 
> 标签：eclipse, google-app-engine, oauth-2.0

我正在尝试按照此处的说明进行操作：

[http://android-developers.blogspot.ca/2013/01/verifying-back-end-calls-from-android.html](http://android-developers.blogspot.ca/2013/01/verifying-back-end-calls-from-android.html)

我决定下载 google-api-java-client 库，看看是否可以在上面引用的页面下半部分实例化代码。我在我的应用程序引擎项目中的 eclipse 中导入了库，这样当我尝试这个时，eclipse 不会抱怨任何事情：

```
 GoogleIdToken token = GoogleIdToken.parse(mJFactory, tokenString); 
```

eclipse 在“GoogleIdToken.parse()”和这个文本上用红色下划线抱怨

> 该项目未构建，因为其构建路径不完整。找不到 com.google.api.client.auth.jsontoken.JsonWebSignature 的类文件。修复构建路径，然后尝试构建此项目

和

> com.google.api.client.auth.jsontoken.JsonWebSignature 类型无法解析。它是从所需的 .class 文件中间接引用的

我已访问此站点并尽可能严格地按照说明进行操作，但错误仍然存​​在。

[http://code.google.com/p/google-api-java-client/wiki/Setup#Download_Library_with_Dependencies](http://code.google.com/p/google-api-java-client/wiki/Setup#Download_Library_with_Dependencies)

谁能告诉我如何摆脱这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:00:21.577

看到这个链接：

[http://code.google.com/p/google-api-java-client/](http://code.google.com/p/google-api-java-client/)

版本为 1.12.0-beta 的 jar 对我不起作用，（如上所述）但 1.13.2-beta 已发布并且似乎工作正常。

顺便说一句，我愿意尝试任何东西，包括不同版本的 eclipse 和擦除我的 eclipse 工作区元数据。我什至尝试了旧版本的 google api 库，它确实有效。我打算使用 1.9，但我发现最后一个（1.13）有一些我想利用的有用选项。1.13.2-beta 为我摆脱了日食错误。

# compilation - Cygwin 无法识别命令

> ID：14343857
> 
> 赞同：2
> 
> 时间：2013-01-15T17:58:55.310
> 
> 标签：compilation, makefile, cygwin

我下载了一个“目录”.tar.gz，解压并解压该文件以获得“目录”。

该目录的安装文件，是在cygwin中运行make命令，编译并拉取该目录下的文件，这些文件是用C语言编写的。

我尝试在 cygwin 中运行一个命令 pfunc，这是一个在编译和执行 make 后应该可用的命令，但 cygwin 说找不到命令。

我对 unix 和 cygwin 完全陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:39:43.087

问题是 pfunc（如果存在）不在您的路径上。

第一步是查看 pfunc 是否真的存在，如果存在，找出在哪里。 `find / -xdev -name pfunc`将为您提供所有名为 pfunc 的文件的位置。显然，如果 pfunc 不存在，那么您手上还有另一个问题。

接下来，您需要将此路径添加到您的 bashrc。你可以这样做：

`echo "export PATH=$PATH:<the/path/find/gave/you> >> ~/.bashrc`

最后，您需要使用以下命令更新当前 shell 中的路径`source ~/.bashrc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:23:47.517

K，我想通了，在cygwin上执行程序有问题，由于某种原因find -name ....etc找不到文件。但是，我找到了位置并重置了路径以找到 .exe 文件。现在一切看起来都很好！再次感谢！

# java - 命令行 Java 执行和查杀

> ID：14343861
> 
> 赞同：0
> 
> 时间：2013-01-15T17:59:09.490
> 
> 标签：java, command-line, scheduled-tasks

Java：1.6 操作系统：Win XP

我在启动我创建的 java 程序的计划任务时遇到了问题。问题是程序使用了大量数据，导致程序在中途卡住。

我继续将程序分成不同的部分，这样它们就不必一次运行，但我不确定如何为计划任务构建我的 .cmd 文件。我需要它来运行每一块，在每一块之后，杀死 java / 运行垃圾收集，然后运行下一个任务。

原片：

```
java -jar CommandLine.jar -f p d pr d dr d e d qp d ea d pa d pb d as d ndp d g d sc d 2> ErrorLog\cmdErrorLog.txt 
```

每个部分由 pd 或 pr d 表示。

那么这样的事情真的会阻止java吗？（测试很难，因为我在运行时生效的实时数据集上运行）：

```
java -jar CommandLine.jar -f pr d 2> ErrorLog\cmdErrorLog.txt
java -jar CommandLine.jar -f dr d 2> ErrorLog\cmdErrorLog.txt
java -jar CommandLine.jar -f e d 2> ErrorLog\cmdErrorLog.txt
java -jar CommandLine.jar -f qp d 2> ErrorLog\cmdErrorLog.txt
java -jar CommandLine.jar -f ea d 2> ErrorLog\cmdErrorLog.txt
java -jar CommandLine.jar -f pa d 2> ErrorLog\cmdErrorLog.txt
java -jar CommandLine.jar -f pb d 2> ErrorLog\cmdErrorLog.txt
java -jar CommandLine.jar -f as d 2> ErrorLog\cmdErrorLog.txt
java -jar CommandLine.jar -f ndp d 2> ErrorLog\cmdErrorLog.txt
java -jar CommandLine.jar -f g d 2> ErrorLog\cmdErrorLog.txt
java -jar CommandLine.jar -f sc d 2> ErrorLog\cmdErrorLog.txt 
```

或者有没有更好的方法来杀死每一块之间的java？我真的只需要清除内存并重新启动java。

另请注意，我已经在 J​​ava 运行的盒子上提供了尽可能多的内存。

任何帮助都将是洞察力或帮助将是巨大的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:05:51.380

Java 的每次执行都代表一个新的、自包含的 JVM。因此，执行多次显然可以在下一个实例启动之前完全放弃所有内存。

如果您可以轻松修改 CommandLine 程序，那么更有效的方法是使用 Main 方法在同一进程中拆分工作。它基本上可以完全完成您对多个 JVM 执行所做的事情，但不必每次都停止/启动新的 JVM。这确实意味着需要正确编写程序以在每次迭代中放弃所有资源，以便垃圾收集器可以完成其工作。

# html - 强制 SWF（Flash 文件）在网页的其余部分之后加载 LAST

> ID：14343863
> 
> 赞同：0
> 
> 时间：2013-01-15T17:59:19.747
> 
> 标签：html, css, flash, web, dreamweaver

我有一个相当复杂的 Flash 剪辑，最终导致网页其余部分的加载陷入困境。

我可以强制闪存等待加载，直到网站的其余部分加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:15:21.253

如果您不介意使用 javascript，您可以使用 SFWObject 2 库之类的东西，这里是文档页面[http://code.google.com/p/swfobject/wiki/documentation](http://code.google.com/p/swfobject/wiki/documentation)有不同的使用方法，所以您只需要选择更适合您的情况。主要思想您可以使用 javascript 触发 swf 播放器初始化，因此您可以控制发生这种情况的时间，因此只需在`onload`事件触发后使用它即可。但是假设问题比仅仅延迟你的剪辑更复杂，所以尝试在不同的计算机和浏览器上测试它。

# ajax - Struts2 AJAX 验证不会停留在页面上

> ID：14343867
> 
> 赞同：1
> 
> 时间：2013-01-15T17:59:30.203
> 
> 标签：ajax, json, validation, struts2

几天来，我一直在尝试使 Struts2 AJAX 验证工作，但我无法解决最后一个问题。我正在使用 struts2jquery 插件异步提交我的表单：

```
 <div id="result"></div>
    <s:form action="RegisterUser" theme="xhtml" method="post">
        <s:textfield key="firstname" label="First name" size="35"
            required="true" />
        <s:textfield key="lastname" label="Last name" size="35"
            required="true" />
        <s:textfield key="address" label="Address" size="35"
            required="true" />
        <s:textfield key="phone" label="Phone number" size="35" />
        <s:textfield key="username" label="Username" size="35"
            required="true" />
        <s:password key="password" label="Password" size="35"
            required="true" />
        <s:textfield key="email" label="E-mail address" size="35"
            required="true" />
        <sj:submit key="Inregistrare" targets="result" align="right"
            button="true" validate="true" onSuccessTopics="notifyRegistration" />
    </s:form> 
```

我已经包含了所需的脚本：

```
 <script type="text/javascript" src="./js/registerScript.js"></script>
 <!-- This files are needed for AJAX Validation of XHTML Forms -->
 <script src="${pageContext.request.contextPath}/struts/utils.js" type="text/javascript"></script>
 <script src="${pageContext.request.contextPath}/struts/xhtml/validation.js"
type="text/javascript"></script> 
```

和标签：

```
<sj:head jqueryui="true" /> 
```

onSuccess 处理程序：

```
$(document).ready(function(){
$.subscribe('notifyRegistration', function(event,data) {
    var registrationStatus = event.originalEvent.data.registrationStatus;
    if(registrationStatus == 'SUCCESS'){
        alert('Contul dumneavoastra a fost creat cu success!');
        window.location.href = "./index.html";      
    } else {
        alert('Contul dumneavoastra nu a putut fi creat. Va rugam incercati din nou.');
    }
});
}); 
```

我的配置如下所示：

```
 <action name="RegisterUser" class="actions.Register" method="execute">
        <interceptor-ref name="jsonValidationWorkflowStack"/>
        <result name="input">/pages/Register.jsp</result>
        <result type="json"/>
 </action> 
```

还有我的动作类的执行方法：

```
public String execute() throws Exception {

    if (isInvalid(getUsername()) || isInvalid(getPassword())
            || isInvalid(getEmail())) {
        registrationStatus = REGISTRATION_ERROR;
    }

    if (registerUser()) {
        registrationStatus = REGISTRATION_SUCCESS;
        return SUCCESS;
    }else {     
        registrationStatus = REGISTRATION_ERROR;
    }
    return SUCCESS;
} 
```

该`registerUser()`方法将实际插入到数据库中。验证 XML 称为`Register-Validation.xml`. 验证工作正常 - 如果某些字段未填写，它会显示错误标签而不刷新页面。我的问题是，即使操作返回`SUCCESS`或`ERROR`，浏览器也会显示它在另一个页面上发回的 JSON，../Register.action。我不知道为什么它不进入我的`onSuccess`处理程序。我已经在其他表单上成功使用了 AJAX，这里唯一的区别是我使用了验证 xml 和`jsonValidationWorkflowStack`拦截器。为什么会发生这种情况，如何避免被重定向？为什么请求没有到达`onSuccess`处理程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:42:35.317

您的 Action 中是否有用于 registrationStatus 的吸气剂？

我会`alert(event.originalEvent.data.registrationStatus);`在你的`notifyRegistration`回调函数中放一个，看看它的价值是什么。

顺便说一句，你似乎混合了

[**Struts2-jQuery 插件 AJAX 表单验证与 Struts2 XHTML 主题**](http://code.google.com/p/struts2-jquery/wiki/Validation#Use_Validation_with_Struts2_XHTML_Theme)

和

[**Struts2-jQuery 插件：使用 onSuccessTopic 处理 JSON 结果的远程链接**](http://code.google.com/p/struts2-jquery/wiki/JsonResult#Remote_Link_that_handle_an_JSON_Result_with_an_onSuccessTopic)

AFAIK（但我从未使用过这种特定类型的验证），验证不应在 execute() 中处理，而应在 validate() 或通过 XML 或使用注释中处理。Struts2-jQuery Plugin 展示中的示例使用注释，但您可以轻松地将其转换为 XML 并尝试展示。

按照示例，您根本不需要使用 javascript 函数或 onSuccessTopic。

您也可以在**[展示柜](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)**中运行它`Forms -> Forms with Validation`（但请遵守代码的文档，因为展示柜中的代码似乎遗漏了一些部分......例如针对“测试”密码的验证）。

# asp.net - .NET 母版页会话状态变量未保存

> ID：14343869
> 
> 赞同：2
> 
> 时间：2013-01-15T17:59:31.960
> 
> 标签：asp.net, session, master-pages, session-variables, session-state

我正在尝试将会话状态存储在母版页中以跟踪以前的 URL。这就是我正在做的

```
Public Property PreviousPage() As String
    Get
        Return Session("theprevpage")
    End Get
    Set(value As String)
        Session("theprevpage") = value
    End Set
End Property

Private Function HandleSiteNode(ByVal sender As Object, ByVal e As SiteMapResolveEventArgs) As SiteMapNode

    Dim currNode As SiteMapNode = SiteMap.CurrentNode.Clone(True)
    Dim tempNode As SiteMapNode = currNode
    Dim strPrev As String = PreviousPage

    ' Append parent pages query string back onto the parent's node URL
    If Not tempNode.ParentNode Is Nothing Then
        If strPrev.Contains("?") Then
            tempNode.ParentNode.Url = tempNode.ParentNode.Url + "?" + strPrev.Split("?")(1)
        End If
    End If

    Return currNode

End Function 
```

并在母版页加载功能

```
 If Not IsPostBack Then

        AddHandler SiteMap.SiteMapResolve, AddressOf HandleSiteNode

        PreviousPage = Request.UrlReferrer.ToString()

    End If 
```

现在，这就是奇怪的地方。

第一个页面是一个登录页面，没有调用主加载。登录后进入main.aspx页面，成功将“login.aspx”页面保存为会话状态。

现在，当我登录后第二次导航时，会话状态设置成功，但是当它进入会话设置成功后调用的 HandleSiteNode 时，会话仍然显示 url 是“login. aspx”而不是“main.aspx”

我没有在代码中的其他位置设置此会话状态，它似乎只是自行恢复到以前的值。

无论我单击多少链接以及设置了多少次会话，会话变量都不会更改为“login.aspx”之外的任何其他内容

帮助！

编辑：另一个奇怪的细节，当我将 AddHandler 行从母版页移动到非母版页时，会话状态被正确保存。但是，如果我尝试将 Addhandler 代码移动到母版页 MainContent.Load 函数中，它仍然不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:50:58.393

SiteMapResolve 是一个静态事件。

这意味着它无权访问会话对象。如果您在`HandleSiteNode`代码中放置断点并检查 Session.SessionId 属性，您会注意到这一点。

[MSDN 上](http://msdn.microsoft.com/en-us/library/system.web.sitemap.sitemapresolve.aspx)有关该事件的示例都针对 global.asax 文件，这意味着该处理程序实际上是针对站点的单一用途。请注意，我链接到的 MSDN 示例有点笨拙，因为它在每次页面加载时附加一个新事件，这会占用内存。该事件应该只附加一次。

[单击此处](http://netpl.blogspot.com/2008/04/sitemapresolve-and-dynamic-site-map.html)以获取有关解决这些问题的潜在方法的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:40:46.540

显然，我的网络项目至少有 2 个不同的会话状态。

我可以通过使用访问包含我想要的值的会话状态

```
e.Context.Session("theprevpage") 
```

这似乎有点像黑客，但它对我有用。

# python - 存储预先计算的日出/日落数据的最佳策略？

> ID：14343871
> 
> 赞同：1
> 
> 时间：2013-01-15T17:59:42.073
> 
> 标签：python, google-app-engine, python-2.7

我正在开发一个基于 NDB 的 Google App Engine 应用程序，该应用程序需要跟踪大量（约 2000 个）固定位置的日/夜循环。因为纬度和经度永远不会改变，所以我可以使用 PyEphem 之类的东西提前预先计算它们。我正在使用 NDB。在我看来，可能的策略是：

1.  要将一年的日出时间预先计算为日期时间对象，请将它们放入列表中，腌制列表并将其放入 PickleProperty

2.  ，但将列表放入 JsonProperty

3.  使用 DateTimeProperty 并设置重复 = True

现在，我想索引下一个日出/日落属性，但可以从列表中弹出并放入它自己的 DateTimeProperty，以便我可以定期使用查询来确定哪些位置已更改为不同的部分的周期。整个列表不需要索引。

有谁知道这三种方法在索引和 CPU 负载方面的相对工作量？重复=真对索引有影响吗？

谢谢，戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:22:21.597

对于 2000 个不可变数据点 - 只需在实例启动或首次使用时计算它们，然后将其保存在内存中。这将是最便宜和最快的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T10:55:00.133

建议“仅在实例启动时计算它们”或“预先计算这些结构并将它们输出到硬编码的 Python 结构”的答案似乎忽略了存储一年的日出所需要的 365 倍乘数，或者如果计算在实例启动时完成。使用 pyEphem，2000 次日出和日落需要两秒多的时间来计算。在源代码中存储 2000 个位置的一年的日出和日落可能会使用超过 20 兆字节。如果数字被有效地腌制，则需要 2*365*2000*8 = 11,680,000 字节。

一种更快更好的方法是建立一个最小二乘模型，用于一个位置的时间与其他位置的时间。这使得使用的总空间减少了大约 70 倍，如下所述。

首先，如果 A 点和 B 点在同一纬度，并且具有相似的高度和地平线参数，那么 A 点的日出相对于 B 点的日出发生在恒定的时间偏移*。*例如，如果 A 点位于 B 点以西 15 度，则日出发生在A 点比 B 点晚一个小时。其次，如果点 A、B、C 处于同一经度且处于低纬度，则可以相当准确地计算出一个点的日出时间，作为其他两个点的线性组合。在高纬度地区或为了获得更好的精度，可以使用几条时间曲线的线性组合。第三，3月20日[春分](http://en.wikipedia.org/wiki/Equinox)当天A点的日出时间可以作为归一化点，所以所有的计算都可以归一化到同一个纬度。

下表显示了使用四条时间曲线的线性组合得到什么样的精度结果。对于距赤道最多 46° 的经度，结果保持在大约半秒内。对于 48° 到 60°，结果保持在 5 秒内。在 64° 时，结果可能最多有两分钟的误差，而在 65° 时，最多可能有 6 分钟的误差。但是这些时间对于大多数实际目的来说可能已经足够了。请注意，在 66° 时，下面显示的程序会崩溃，因为它不处理 pyEphem 抛出的异常；“AlwaysUpError: 'Sun' is still above the horizo​​n at 2013/6/14 07:20:15” 即使 66° 位于[北极圈](http://en.wikipedia.org/wiki/Arctic_circle)下方66.5622° N。

很容易修改程序，以便它使用尽可能多的时间曲线（参见`lata = ...`程序中的各种语句），提供所需的任何精度，但以存储更多曲线和更多系数为代价。当然，可以改变模型以使用时间曲线的子集；例如，可以存储 10 条曲线，并根据纬度上最接近任何给定目标纬度的 4 条曲线进行计算。然而，对于这个演示程序，这种改进还没有到位。

```
Lat.  0.0:  Error range: -0.000000 to 0.000000 seconds
Lat.  5.0:  Error range: -0.370571 to 0.424092 seconds
Lat. 10.0:  Error range: -0.486193 to 0.557997 seconds
Lat. 15.0:  Error range: -0.414288 to 0.477041 seconds
Lat. 20.0:  Error range: -0.213614 to 0.247057 seconds
Lat. 25.0:  Error range: -0.065826 to 0.056358 seconds
Lat. 30.0:  Error range: -0.382425 to 0.323623 seconds
Lat. 35.0:  Error range: -0.585914 to 0.488351 seconds
Lat. 40.0:  Error range: -0.490303 to 0.400563 seconds
Lat. 45.0:  Error range: -0.164706 to 0.207415 seconds
Lat. 47.0:  Error range: -0.590103 to 0.756647 seconds
Lat. 48.0:  Error range: -0.852844 to 1.102608 seconds
Lat. 50.0:  Error range: -1.478688 to 1.940351 seconds
Lat. 55.0:  Error range: -3.342506 to 4.696076 seconds
Lat. 60.0:  Error range: -0.000002 to 0.000003 seconds
Lat. 61.0:  Error range: -7.012057 to 4.273954 seconds
Lat. 62.0:  Error range: -21.374033 to 12.347188 seconds
Lat. 63.0:  Error range: -51.872753 to 27.853411 seconds
Lat. 64.0:  Error range: -124.000365 to 59.661029 seconds
Lat. 65.0:  Error range: -351.425224 to 139.656187 seconds 
```

使用上述方法，对于 2000 个位置中的每一个，您需要存储五个浮点数：3 月 20 日的日出时间和四个时间曲线的四个乘数系数。（前面提到的 70 倍减少是由于每个位置存储 5 个数字，而不是 365 个数字。）对于每个时间曲线，存储 365 个数字，条目*i*是日出时间*与*3 月 20 日的时间差。存储 4 条时间曲线占用的空间是存储 2000 条曲线的 1/500，因此曲线存储空间以乘数系数为主。

在我给出使用 scipy.optimize.leastsq 求解系数的程序之前，这里有两个代码片段，可用于在 ipython 解释器中制作准确度表并绘制图表以可视化错误。

```
import sunrise as sr
for lat in range(0, 65, 5):
    sr.lsr(lat, -110, 2013, 4) 
```

以上产生了前面显示的大部分错误表。`lsr`调用第三个参数，`daySkip`值 4 使`lsr`每隔四天（即一年中只有大约 90 天）工作，以加快测试速度。使用`sr.lsr(lat, -110, 2013, 1)`会产生类似的结果，但需要四倍的时间。

```
sr.plotData(15,1./(24*3600)) 
```

上面告诉sunrise.plotData 绘制所有内容（要近似的日出数据；模型得到的近似值；残差，以秒为单位；以及基数曲线。）

该程序如下所示。请注意，它主要针对北半球经度进行了测试。如果时间曲线足够对称，程序将按原样处理南半球经度；如果误差太大，可以将南半球经度添加到基数曲线中，或者可以更改模型以使用赤道以南的一组单独曲线。请注意，此程序不计算日落。对于日落，添加`next_setting(ephem.Sun())`与调用类似的`previous_rising(ephem.Sun())`调用，并存储额外的四个时间曲线。

```
#!/usr/bin/python
import ephem, numpy, scipy, scipy.optimize

# Make a set of observers (observation points)
def observers(lata, lona):
    def makeIter(x):
        if hasattr(x, '__iter__'):
            return x
        return [x]
    lata, lona = makeIter(lata), makeIter(lona)
    arr = []
    for lat in lata:
        for lon in lona:
            o = ephem.Observer()
            o.lat, o.lon, o.elevation, o.temp = str(lat), str(lon), 1400, 0
            arr.append(o)
    return tuple(arr)

# Make a year of data for an observer, equinox-relative
def riseData(observr, year, skip):
    yy = ephem.Date('{} 00:00'.format(year))
    rr = numpy.arange(0.0, 366.0, skip)
    springEquinox = 78
    observr.date = ephem.Date(yy + springEquinox)
    seDelta = observr.previous_rising(ephem.Sun()) - yy - springEquinox + 1
    for i, day in enumerate(range(0, 366, skip)):
        observr.date = ephem.Date(yy + day)
        t = observr.previous_rising(ephem.Sun()) - yy - day + 1 - seDelta
        rr[i] = t
    return numpy.array(rr)

# Make a set of time curves
def makeRarSet(lata, lona, year, daySkip):
    rar=[]
    for o in observers(lata, lona):
        r = riseData(o, year, daySkip)
        rar.append(r)
    x = numpy.arange(0., 366., daySkip)
    return (x, rar)

# data() is an object that stores curves + results
def data(s):
    return data.ss[s]

# Initialize data.ss
def setData(lata, lona, year, daySkip):
    x, rar = makeRarSet(lata, lona, year, daySkip)
    data.ss = rar

# Compute y values from model, given vector x and given params in p
def yModel(x, p):
    t = numpy.zeros(len(x))
    for i in range(len(p)):
        t += p[i] * data(i)
    return t

# Compute residuals, given params in p and data in x, y vectors.
# x = independent var,  y = dependent = observations
def residuals(p, y, x):
    err = y - yModel(x, p)
    return err

# Compute least squares result
def lsr(lat, lon, year, daySkip):
    latStep = 13.
    lata = numpy.arange(0., 66.4, latStep)
    lata = [ 88 * (1 - 1.2**-i) for i in range(8)]
    l, lata, lstep, ldown = 0, [], 20, 3
    l, lata, lstep, ldown = 0, [], 24, 4
    while l < 65:
        lata.append(l); l += lstep; lstep -= ldown
    #print 'lata =', lata
    setData(lata, lon, year, daySkip)
    x, ya = makeRarSet(lat, lon, year, daySkip)
    x, za = makeRarSet(lat, 10+lon, year, daySkip)
    data.ss.append(za[0])
    y = ya[0]
    pini = [(0 if abs(lat-l)>latStep else 0.5) for l in lata]
    pars = scipy.optimize.leastsq(residuals, pini, args=(y, x))
    data.x, data.y, data.pv = x, y, yModel(x, pars[0])
    data.par, data.err = pars, residuals(pars[0], y, x)
    #print 'pars[0] = ', pars[0]
    variance = numpy.inner(data.err, data.err)/len(y)
    #print 'variance:', variance
    sec = 1.0/(24*60*60)
    emin, emax = min(data.err), max(data.err)
    print ('Lat. {:4.1f}:  Error range: {:.6f} to {:.6f} seconds'.format(lat, emin/sec, emax/sec))

def plotData(iopt, emul):
    import matplotlib.pyplot as plt
    plt.clf()
    x = data.x
    if iopt == 0:
        iopt = 15
        emul = 1
    if iopt & 1:
        plt.plot(x, data.y)
        plt.plot(x, data.y + 0.001)
        plt.plot(x, data.y - 0.001)
    if iopt & 2:
        plt.plot(x, data.pv)
    if iopt & 4:
        plt.plot(x, emul*data.err)
    if iopt & 8:
        for ya in data.ss:
            plt.plot(x, ya)
    plt.show() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:14:18.420

我会说预先计算这些结构并将它们输出到您保存在生成​​的 python 文件中的硬编码 python 结构中。

作为实例启动的一部分，只需将这些结构读入内存即可。

根据您的描述，没有理由在运行时计算这些值，也没有理由将其存储在数据存储中，因为这有与之相关的成本，以及 RPC 的一些延迟。

# delphi - OpenGL 与 Delphi：离屏渲染图像到文件

> ID：14343873
> 
> 赞同：3
> 
> 时间：2013-01-15T17:59:45.960
> 
> 标签：delphi, opengl, bitmap, framebuffer

我需要一些关于将 OpenGL 的 ViewPort 的渲染内容保存到 Delphi XE2 中的位图文件的帮助。

基本上我想做的事情是在完成一些渲染之后，将 FrameBuffer 的内容转储到位图（全彩色格式）文件中。这是应该完成此操作的代码摘录。

```
 procedure TForm1.saveBtnClick(Sender: TObject);
      var
      //TBitmap object holding the newly created Bitmap.  
        srcBitmap: TBitmap;
      // the array to hold pixels value while reading from the FrameBuffer
        pixels: Array of GLUbyte;
        dimensions: Array [0 .. 3] of Integer;
      //Stream between the memory location of pixels and my bitmap.
        MS: TMemoryStream;
        I: Integer;
      begin
         if SaveDialog1.Execute then
         begin
      //create the bitmap and set it to Full Color Format; Open the Memory Stream
        srcBitmap := TBitmap.Create;
        srcBitmap.PixelFormat:=pf24bit;
        MS:= TMemoryStream.Create;
      //get the dimensions info for the current ViewPort
        glGetIntegerv(GL_VIEWPORT, @dimensions);
        srcBitmap.Width := dimensions[2];
        srcBitmap.Height :=dimensions[3];
      //allocate enough memory for pixels;
        SetLength(pixels, dimensions[2] * dimensions[3] * 3);

      //this is the function that is supposed to read the contents from the Frame 
      // Buffer and write them to pixels
        glReadPixels(0, 0, dimensions[2], dimensions[3], GL_RGB,
          GL_UNSIGNED_BYTE, @pixels);

      //Do something if an error occured
        ErrorHandler;

      // Below I attempt to create a bitmap file from the read in pixels
        MS.Read(pixels,dimensions[2] * dimensions[3] * 3) ;
        srcBitmap.LoadFromStream(MS);
        Edit2.Text := SaveDialog1.FileName;
        srcBitmap.SaveToFile(Edit2.Text);
        MS.Free;
        srcBitmap.Free;
        end;
 end; 
```

我遇到的主要问题是：

1）如果 ViewPort 尺寸太大，堆栈溢出错误（我在尝试保存尺寸为 256*256 的图像时遇到 SO 错误）。我认为这可能是因为“glReadPixels”函数将 FrameBuffer 读取到 PROCESSOR MEMORY（我假设这个是L2 Cache），而不是主存，这个不能容纳整个图像。是这样吗？如果是这样，您对如何将 FrameBuffer 读入主存储器有任何想法吗？

2) 在较小的视口 (25x25) 上进行测试，以避免 1) 中的错误，当我尝试访问存储在“像素”数组中的任何值时，会出现访问冲突错误。这意味着 glReadPixels 没有正确地从缓冲区中读取，我认为原因是与我传递给函数的参数之间存在一些不一致`glReadPixels(0, 0, dimensions[2], dimensions[3], GL_RGB,GL_UNSIGNED_BYTE, @pixels)`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:56:29.733

```
Procedure GetOGL_BMP(var BMP: TBitmap);
var
  Dimensions: array [0 .. 3] of Integer;
  RGBBits: PRGBQuad;
  Pixel: PRGBQuad;
  Header: PBitmapInfo;
  x, y: Integer;
  Temp: Byte;
begin
  glGetIntegerv(GL_VIEWPORT, @Dimensions);
  GetMem(RGBBits, Dimensions[2] * Dimensions[3] * 4);
  glFinish;
  glPixelStorei(GL_PACK_ALIGNMENT, 4);
  glPixelStorei(GL_PACK_ROW_LENGTH, 0);
  glPixelStorei(GL_PACK_SKIP_ROWS, 0);
  glPixelStorei(GL_PACK_SKIP_PIXELS, 0);
  glReadPixels(0, 0, Dimensions[2], Dimensions[3], GL_RGBA, GL_UNSIGNED_BYTE,
    RGBBits);
  if not Assigned(BMP) then
      BMP := TBitmap.Create;
  BMP.PixelFormat := pf32Bit;
  BMP.Width := Dimensions[2];
  BMP.Height := Dimensions[3];
  GetMem(Header, SizeOf(TBitmapInfoHeader));
  with Header^.bmiHeader do
  begin
    biSize := SizeOf(TBitmapInfoHeader);
    biWidth := Dimensions[2];
    biHeight := Dimensions[3];
    biPlanes := 1;
    biBitCount := 32;
    biCompression := BI_RGB;
    biSizeImage := Dimensions[2] * Dimensions[3] * 4;
  end;
  // Rot und Blau vertauschen
  Pixel := RGBBits;
  for x := 0 to Dimensions[2] - 1 do
    for y := 0 to Dimensions[3] - 1 do
    begin
      Temp := Pixel.rgbRed;
      Pixel.rgbRed := Pixel.rgbBlue;
      Pixel.rgbBlue := Temp;
      inc(Pixel);
    end;
  SetDIBits(BMP.Canvas.Handle, BMP.Handle, 0, Dimensions[3], RGBBits,
    TBitmapInfo(Header^), DIB_RGB_COLORS);

  FreeMem(Header);
  FreeMem(RGBBits);
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:04:08.003

**首先**：你从流中读取而不是写入它：MS。**读取**（像素，尺寸[2] * 尺寸[3] * 3）；

**第二**：像素是一个动态数组，本质上是一个指向该数组的指针。要获取指向第一个字节的指针，请使用 glReadPixels 中的 @pixels[0] 并写入内存流。

# webview - Titanium：使用导航栏的 WebView

> ID：14343874
> 
> 赞同：-1
> 
> 时间：2013-01-15T17:59:47.297
> 
> 标签：webview, navigation, titanium, back, nav

我用的是钛。我正在尝试显示带有导航栏的网页。

我想将后退按钮放在导航栏内的左上角，作为浏览器的后部。

以下是我当前的代码。

有人可以帮我吗？

提前致谢。

```
 var w = Titanium.UI.createWindow({  
    backgroundColor:'#fff',
    leftNavButtonLabel:'back',});
var navGroup = Ti.UI.iPhone.createNavigationGroup({
  window:w
});

var backBtn = Titanium.UI.createButton({
      title:'Back',
   style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED
});

var webView = Titanium.UI.createWebView({
    url : 'http://gooogle.com',
    canGoBack : true,
});

backBtn.addEventListener( 'click', function() {
    webview.goBack();
});

w.add.setLeftNavButton(backBtn);

w.add(webView);

w.add(navGroup);

w.open();

w.navGroup.open(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:42:04.883

试试，这个……或者

```
var main_win = Ti.UI.createWindow({
});

var w = Titanium.UI.createWindow({  
    backgroundColor:'#fff',
    leftNavButtonLabel:'back',

});
var navGroup = Ti.UI.iPhone.createNavigationGroup({
  window:w
});

var backBtn = Titanium.UI.createButton({
      title:'Back',
   style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED
});

var webView = Titanium.UI.createWebView({
    url : 'http://gooogle.com',
    canGoBack : true,
});

backBtn.addEventListener( 'click', function() {
    webview.goBack();// Goes back one entry in the web view's history list. to the previous page.

});

w.add.setLeftNavButton(backBtn);

w.add(webView);

main_win.add(navGroup);

main_win.open();

for Navigation new window

         navGroup.open(Window name);

for Closing last open window;

         navGroup.close(Window name); 
```

# asp.net - 防止用户跳过 ASP.NET 表单中的页面

> ID：14343883
> 
> 赞同：1
> 
> 时间：2013-01-15T18:00:20.070
> 
> 标签：asp.net, navigation

我有一个数据输入表单，我已将其分成 5 页，我想确保用户每次都以正确的顺序浏览这些页面。导航设置为正确浏览，包括返回和更改前一页的面包屑。但是，我想确保他们不会在不先浏览较早页面的情况下进入后续页面（即，浏览页面 A 和 B，然后通过直接输入 URL 跳到 D，或者从 D 开始使用书签）。

我已经做了一些尝试来防止这种情况发生，我最近的一次是这个，它检查每个页面所需的会话变量：

```
public static string CheckForPageSkipping()
{
    var redirectTo = "";
    if (HttpContext.Current.Session["TestDate"] == null) redirectTo = "~/Auth/SignOff.aspx";
    if (HttpContext.Current.Session["Repairs"] == null) redirectTo = "~/Auth/RepairNotes.aspx";
    if (HttpContext.Current.Session["MeterNum"] == null)   redirectTo = "~/Auth/TestResults.aspx";
    if (HttpContext.Current.Session["PremiseOwner"] == null) redirectTo = "~/Auth/PremiseInfo.aspx";
    return redirectTo;
} 
```

我在每个`Page_Load`事件期间都调用了它，如果它不是他们所在的页面，我会重定向到它返回的页面。这几乎奏效了，直到我意识到它会阻止您向后导航（它总是将您发送回您尚未完成的最新页面）。我确信我可以拼凑一些东西来完成这项工作，但我想看看是否有更好的方法来做到这一点。一些内置于 ASP.NET 中的东西，或者某些人过去构建的更优雅的东西。

我在 Google 和 StackOverflow 上的搜索尝试都没有产生有用的结果。也许我使用了错误的术语，但主要是我在这里写的东西（现在顶部提出的建议也没有帮助）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:13:54.220

看起来您可以控制页面，所以为什么不摆脱它们并将代码放入用户控件中，在面板或占位符的一个页面中注册这些控件，并控制这些面板在代码中的可见性，以便您可以正确执行访问这些的顺序？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T18:31:56.187

你看过`<asp:wizard>`内置控件吗？我认为它会满足您的需求，您可以针对许多不同的场景进行配置。这是描述其使用的链接：http: [//msdn.microsoft.com/en-us/magazine/cc163894.aspx](http://msdn.microsoft.com/en-us/magazine/cc163894.aspx)

另见当前官方文档：[MSDN Library](http://msdn.microsoft.com/en-us/library/fs0za4w6%28v=vs.100%29.aspx "向导 Web 服务器控制概述")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T22:10:28.163

如果您不想使用该`Wizard`控件并且您不想使用`Panel`s，那么 Server.Transfer 或 Cross Page Posting 应该可以工作。无论使用哪种方法，检查[PreviousPage](http://msdn.microsoft.com/en-us/library/system.web.ui.page.previouspage%28v=vs.100%29.aspx)都应该涵盖您的页面跳过问题。

Server.Transfer 具有您提到的 URL 奇怪，但在其他方面非常简单。

[跨页面发布](http://msdn.microsoft.com/en-us/library/ms178139%28v=vs.100%29.aspx "ASP.NET 网页中的跨页发布")也非常适合您的需求。

1.  将每个表单发布到下一个表单页面。
2.  在那里接收和处理数据（如果设置正确，则使用强类型）。
3.  仅在所有内容都签出后才加载新页面（PreviousPage 正确，数据有效）。

我承认，我自己没有使用这两种方法的直接经验，但我可以看到如何实施它们来处理您的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T18:28:34.113

这里有一个很好的模式解释了使用面板使用多部分表单。

[使用面板的多部分表单](http://gregorybeamer.wordpress.com/2009/12/04/asp-net-patterns-the-multi-part-form-using-panels/)

# c++ - 点集上的 2d 旋转会导致倾斜失真

> ID：14343884
> 
> 赞同：0
> 
> 时间：2013-01-15T18:00:23.903
> 
> 标签：c++, opengl, rotation, 2d

我正在用 OpenGL 编写一个应用程序（尽管我认为这个问题与此无关）。我有一些需要旋转的二维点集数据。它后来被投影到 3d 中。

我使用这个公式应用我的旋转：

```
x' = x cos f - y sin f
y' = y cos f + x sin f 
```

其中'f'是角度。当我旋转点集时，结果是倾斜的。影响的严重程度因角度而异。

很难描述，所以我有图片；红色的东西是一些简单的几何图形。2d 点集是您在它们周围看到的白色折线的顶点。第一张图显示了未失真的点集，第二张图显示了旋转后的点集。旋转发生的不仅仅是倾斜；有时似乎也会发生位移。

![在此处输入图像描述](../Images/136e05164efec7caba5584e9df131939.png)

![在此处输入图像描述](../Images/2771ef0057723f51653822fa83a5d1b4.png)

代码本身很简单：

```
double cosTheta = cos(2.4);
double sinTheta = sin(2.4);
CalcSimplePolyCentroid(listHullVx,xlate);
for(size_t j=0; j < listHullVx.size(); j++)   {

    // translate
    listHullVx[j] = listHullVx[j] - xlate;

    // rotate
    double xPrev = listHullVx[j].x;
    double yPrev = listHullVx[j].y;
    listHullVx[j].x = ((xPrev*cosTheta) - (yPrev*sinTheta));
    listHullVx[j].y = ((yPrev*cosTheta) + (xPrev*sinTheta));

    // translate
    listHullVx[j] = listHullVx[j] + xlate;
} 
```

如果我注释掉上面'//rotate'下的代码，应用程序的输出就是第一张图片。并将其添加回第二张图像。实际上没有其他事情发生（afaik）。

使用的数据类型都是双精度的，所以我认为这不是精度问题。有谁知道为什么旋转会导致如上图所示的倾斜？

编辑 filipe 下面的评论是正确的。这可能与轮换无关，而且我没有为该问题提供足够的信息；

我在图片中显示的几何图形代表建筑物。它们是从 lon/lat 地图坐标生成的。在我用来进行转换的点数据中，我忘记使用实际投影到笛卡尔坐标空间，只是映射了 x->lon、y->lat，我认为这就是我看到失真的原因。我将要求删除这个问题，因为我认为它对其他人没有用处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:09:05.157

**更新：** 由于您的评论，该错误不太可能出现在所提供的代码中。

最后一个提示：std 变换公式仅在坐标系统是笛卡尔坐标系时才有效，在 ios 上，您有时会反转 y Achsis。

# asp.net-mvc - 绑定模型属性集合

> ID：14343891
> 
> 赞同：1
> 
> 时间：2013-01-15T18:00:45.067
> 
> 标签：asp.net-mvc, dynamic, collections, model-binding

我的场景非常复杂，所以我用下面的例子对其进行了简化。主要问题是绑定模型的集合属性，指定属性的路径，例如`Html.TextBox("List[0].Name")`而不是`Html.TextBoxFor(t => t.List[0].Name)`. 所以，对于当前视图，我只会知道模型的一些元数据，所以我必须以这种方式构建它。这是场景：

模型

```
public class ModelTest
{
    public int Id {get;set;}
    public List<Foo> Collection {get;set;}
}

public class Foo
{
    public string Value1 {get;set;}
    public string Value2 {get;set;}
} 
```

控制器

```
public class TestController: Controller
{
    [HttpGet]
    public ActionResult Test()
    {
        var model = new ModelTest()
        {
            Id = 455,
            Collection = new List<Foo>()
            {
                new Foo(){ Value1 = "sagasga", Value2 = "Beul"},
                new Foo(){ Value1 = "dgdsgds", Value2 = "fhfhd" }
            }
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Test( ModelTest model)
    {
        //....
        return View();
    } 
```

看法：

```
@using (Html.BeginForm())
{
    @Html.TextBox("Id")
    @Html.TextBox("Collection[0].Value1")
    @Html.TextBox("Collection[0].Value2")
    <input type="submit" value="Add" />
} 
```

对于上面的代码，我得到集合值的空文本框。但是，当提交页面时，我在 Post 方法中得到了正确构建的模型。

非常感谢，亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T18:29:19.357

当您想将集合发布到控制器时，这是为输入字段命名的方法。但是，您必须自己指定初始值。您的代码当前只是创建将 name 属性设置为的文本框`Collection[0].Value1`。您仍然需要以这种方式指定输入，

```
@Html.TextBox("Collection[0].Value1", Model.Collection.FirstOrDefault().Value1)
@Html.TextBox("Collection[0].Value2", Model.Collection.FirstOrDefault().Value2) 
```

# spring - 如何在每次单元测试后重置我的数据库状态而不使整个测试成为事务？

> ID：14343893
> 
> 赞同：38
> 
> 时间：2013-01-15T18:00:51.290
> 
> 标签：spring, junit, transactions, hsqldb

我正在使用 Spring 3.1.1.RELEASE、Hibernate 4.1.0.Final、JPA 2、JUnit 4.8.1 和 HSQL 2.2.7。我想在我的服务方法上运行一些 JUnit 测试，并且在每次测试之后，我希望回滚写入内存数据库的任何数据。但是，我不希望将整个测试视为事务。例如在这个测试中

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({ "classpath:test-context.xml" })
public class ContractServiceTest 
{
    …

    @Autowired
    private ContractService m_contractService;

    @Test
    public void testUpdateContract()
    {
        // Add the contract
        m_contractService.save(m_contract);
        Assert.assertNotNull(m_contract.getId());
        // Update the activation date by 6 months.
        final Calendar activationDate = Calendar.getInstance();
        activationDate.setTime(activationDate.getTime());
        activationDate.add(Calendar.MONTH, 6);
        m_contract.setActivationDate(activationDate.getTime());
        m_contractService.save(m_contract);
        final List<Contract> foundContracts = m_contractService.findContractByOppId(m_contract.getOpportunityId());
        Assert.assertEquals(foundContracts.get(0), m_contract);
    }   // testUpdateContract 
```

该服务有三个调用（“m_contractService.save”、“m_contractService.save”和“m_contractService.findContractByOppId”），每个都被视为我想要的事务。但我不知道如何在每次单元测试后将我的内存数据库重置为其原始状态。

如果我需要提供其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-16T00:38:41.623

由于您使用的是 Hibernate，因此您可以使用该属性`hibernate.hbm2ddl.auto`在每次启动时创建数据库。您还需要在每次测试后强制重新加载弹簧上下文。您可以使用`@DirtiesContext`注释来执行此操作。

这可能会为您的测试增加一些额外的开销，因此另一种解决方案是手动删除每个表中的数据。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-07-27T13:22:28.730

`@DirtiesContext`对我来说没有解决方案，因为整个应用程序上下文都被破坏了，必须在每次测试后创建 -> 花了很长时间。

`@Before`对我来说也不是一个好的解决方案，因为我必须`@Before`在每个集成测试中创建。

所以我决定创建一个`TestExecutionListener`在每次测试后重新创建数据库的数据库。（使用 Liquibase，但它也适用于 Flyway 和普通 SQL）

```
public class CleanupDatabaseTestExecutionListener
extends AbstractTestExecutionListener {

public final int getOrder() {
    return 2001;
}

private boolean alreadyCleared = false;

@Override
public void prepareTestInstance(TestContext testContext) throws Exception {
    if (!alreadyCleared) {
        cleanupDatabase(testContext);
        alreadyCleared = true;
    } else {
        alreadyCleared = true;
    }
}

@Override
public void afterTestClass(TestContext testContext) throws Exception {
    cleanupDatabase(testContext);
}

private void cleanupDatabase(TestContext testContext) throws LiquibaseException {
    ApplicationContext app = testContext.getApplicationContext();
    SpringLiquibase springLiquibase = app.getBean(SpringLiquibase.class);
    springLiquibase.setDropFirst(true);
    springLiquibase.afterPropertiesSet(); //The database get recreated here
}
} 
```

要使用 TestExecutionListenere，我创建了一个自定义测试注释

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
@RunWith(SpringRunner.class)
@SpringBootTest(classes = OurderApp.class)
@TestExecutionListeners(mergeMode = 
TestExecutionListeners.MergeMode.MERGE_WITH_DEFAULTS,
    listeners = {CleanupDatabaseTestExecutionListener.class}
)
public @interface OurderTest {
} 
```

最后但同样重要的是，我现在可以创建测试，并且可以确定数据库处于干净模式。

```
@RunWith(SpringRunner.class)
@OurderTest
public class ProductSaveServiceIntTest {
 } 
```

编辑：我改进了我的解决方案。我有一个问题，有时一种测试方法破坏了我的数据库，用于测试类中所有即将进行的测试。所以我创建了注释

包 com.ourder.e2e.utils；

```
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface ClearContext {
} 
```

并将其添加到 CleanupDatabaseTestExectionListener。

```
@Override
public void afterTestMethod(TestContext testContext) throws Exception {
    if(testContext.getTestMethod().getAnnotation(ClearContext.class)!=null){
        cleanupDatabase(testContext);
    }
    super.afterTestMethod(testContext);
} 
```

在这两个片段的帮助下，我现在可以创建这样的测试：

```
@Test
@ClearContext
public void testWhichDirtiesDatabase() {} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-02T02:30:21.673

您可以`@Transactional`在 Junit 类级别从`org.springframework.transaction.annotation.Transactional`.

例如：

```
package org.test
import org.springframework.transaction.annotation.Transactional;

@Transactional
public class ArmyTest{

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T09:21:46.303

制作一种`@Before`方法，从数据库中删除所有数据。您正在使用 Hibernate，因此您可以使用 HQL: `delete from Contract`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-21T15:46:47.990

我为每个测试使用随机内存数据库解决了同样的问题：

```
@DirtiesContext(classMode = DirtiesContext.ClassMode.BEFORE_EACH_TEST_METHOD)
@TestPropertySource(properties = {
    "spring.datasource.url=jdbc:hsqldb:mem:${random.uuid}"
}) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-03T09:47:03.673

从 JUnit 5 开始，您还可以创建自定义扩展并从 Spring 上下文访问数据源，如下所示（使用 Kotlin）：

```
class DatabaseCleanerExtension : AfterEachCallback {
  override fun afterEach(context: ExtensionContext) {
    val ds = SpringExtension.getApplicationContext(context).getBean(DataSource::class.java)

    ds.connection.use { connection ->
      connection.prepareStatement("DELETE FROM my_table").execute()
    }
  }
} 
```

然后，您可以按如下方式注册扩展：

```
@SpringBootTest
@ExtendWith(DatabaseCleanerExtension::class)
class SpringJunitExtensionApplicationTests { .. } 
```

现在在每次测试后执行回调，您可以轻松地注释任何适用的测试类。

[这里还有一个关于设置的视频。](https://www.youtube.com/watch?v=lfHG9qnSvpQ)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-25T20:18:55.703

如果您使用 flyway 进行迁移，我使用以下模式：

```
@TestInstance(TestInstance.Lifecycle.PER_CLASS)
class JUnit5Class {
    @Autowired
    Flyway flyway;

    @BeforeAll
    public void cleanUp(){
        flyway.clean();
        flyway.migrate();
    }
} 
```

`@TestInstance`允许您制作`@BeforeAll`非静态的，因此每个测试类只能迁移一次。如果您想为每个测试重置它，请删除类注释并更改`@BeforeAll`为`@BeforeEach`.

# gwt - 在多个子类的情况下包装 JavaScriptObjects？

> ID：14343895
> 
> 赞同：0
> 
> 时间：2013-01-15T18:00:59.947
> 
> 标签：gwt

我有一堆都实现的数据实体`Entity`。现在我想将其中一些实体暴露给 JavaScript 代码，但由于单一实现规则，我不能只创建一堆 JavaScriptObject 子类。

所以，我正在使用这种东西：

```
public class JsStandardScale3 implements StandardScale3 {

    private JavaScriptObject wrapped;

    public JsStandardScale3(JavaScriptObject wrapped) {
        this.wrapped = wrapped;
    }

    @Override
    public native Long getLicenseId() /*-{
        this.@com.activegrade.client.exported.JsStandardScale3::wrapped.getLicenseId();
    }-*/; 
```

这行得通，只是工作量很大。覆盖类型结构要好得多。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:29:18.750

事实证明，只要您的所有扩展都来自 JSO 的单个“根”扩展，您就可以使用接口的多个子类扩展 JavaScriptObject。

例如，我有结构标准扩展实体和课程扩展实体。我不能这样做：

```
JsStandard extends JavaScriptObject...
JsCourse extends JavaScriptObject... 
```

但我*可以*这样做：

```
JsEntity extends JavaScriptObject...
JsStandard extends JsEntity...
JsCourse extends JsEntity... 
```

极好的！

唯一的限制是每个方法都必须标记为 final，这对于简单的覆盖场景来说很好用。

# cordova - 如何在没有设备的情况下开发 Apache Cordova/PhoneGap 应用程序

> ID：14343898
> 
> 赞同：3
> 
> 时间：2013-01-15T18:01:04.380
> 
> 标签：cordova

在开发 Cordova/PhoneGap 应用程序时，我希望能够在没有设备的情况下在我的笔记本电脑上使用 Chrome 进行开发。有没有办法做到这一点？

例如，使用某种模拟 API 原生部分的“cordova.stubs.js”。当然，这仅适用于我的开发周期，在我的笔记本电脑上迭代一段时间后，我将在真实设备或设备模拟器上进行部署和测试。

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T18:42:39.153

您是否尝试过 Ripple 模拟器？

[http://emulate.phonegap.com/](http://emulate.phonegap.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T18:56:27.973

在 android 中模拟的一种快速替代方法是：www.genymotion.com

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T05:32:17.860

如果您有机会在 MacBook 上工作，您可以使用 iPhone 模拟器运行您的 PhoneGap 应用程序，然后远程连接到它。

1.  在 iPhone 模拟器主屏幕中，点击设置 > Safari > 高级。启用 Web 检查器选项。
2.  在 Mac 的 Safari 中，点击开发 -> iPhone 模拟器 -> index.html

    *   据我所知，这只适用于 iOS 6 及更高版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-29T04:23:07.937

转到[此处](http://phonegap.com/products/#desktop-app-section)，您可以在 chrome 浏览器中打开它， 如果您有手机也可以使用[它并且可以使用调试](http://phonegap.com/products/#mobile-app-section)`weinre`

# android - Java 代码中“android:fontFamily="sans-serif-light" 的等价物是什么？

> ID：14343903
> 
> 赞同：115
> 
> 时间：2013-01-15T18:01:24.150
> 
> 标签：android, typeface

我的问题很简单：

在我的每个文本视图中，我目前都在使用该属性

```
android:fontFamily="sans-serif-light" 
```

在后 HC 设备上提供华丽的外观。

不幸的是，这不适用于每个小部件，对于我的 Spinner，我需要覆盖适配器。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    //You can use the new tf here.

    if(convertView == null || convertView.getTag() == null) {
        // new view - populate 
        convertView = inflater.inflate(android.R.layout.simple_spinner_dropdown_item, parent, false);
        convertView.setTag(new Object());
    }

    CheckedTextView spinner_text=(CheckedTextView) convertView.findViewById(android.R.id.text1);
    //Typeface should be set here...
    return spinner_text;
    }
} 
```

那么，有没有办法通过代码获得完全相同的结果？

PS：不，我不想在资产文件夹中放字体，我只想使用系统一。

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2013-01-15T18:13:20.370

应该可以使用`setTypeface()`and `Typeface.create()`：

```
convertView.setTypeface(Typeface.create("sans-serif-light", Typeface.NORMAL)); 
```

请参阅[文档](http://developer.android.com/reference/android/graphics/Typeface.html#create%28java.lang.String,%20int%29)：

> 创建一个给定系列名称和选项样式信息的字体对象。如果为名称传递 null，则将选择“默认”字体。可以查询生成的字体对象 ( `getStyle()`) 以发现它的“真实”风格特征是什么。

请注意，如[本评论](https://stackoverflow.com/questions/2376250/custom-fonts-and-xml-layouts-android#comment11263047_7197867)`Typeface.create()`所述，过度使用对您的记忆力不利。建议的[Hashtable](http://code.google.com/p/android/issues/detail?id=9904#c7)是一个很好的解决方案，但您必须对其进行一些修改，因为您不是从资产创建字体。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2018-08-08T08:26:47.453

> Android 4.1（API 级别 16）和支持库 26 及更高版本

如果你使用 res -> font 文件夹，你可以像这样使用

```
 val typeface = ResourcesCompat.getFont(Context, R.font.YOUR_FONT)
  TextView.setTypeface(typeface) 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-03-30T06:43:36.863

在我看来，仍然有一种方法可以在 TextView 上以编程方式应用系统字体**而不会出现任何内存问题**，那就是使用**`textview.setTextAppearance`**方法：

```
<style name="styleA">
    <item name="android:fontFamily">sans-serif</item>
    <item name="android:textStyle">bold</item>
    <item name="android:textColor">?android:attr/textColorPrimary</item>
</style>
<style name="styleB">
    <item name="android:fontFamily">sans-serif-light</item>
    <item name="android:textStyle">normal</item>
    <item name="android:textColor">?android:attr/textColorTertiary</item>
</style>

if(condition){
    textView.setTextAppearance(context,R.style.styleA);
}else{
    textView.setTextAppearance(context,R.style.styleB);
} 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-07-26T12:43:12.223

动态地，您可以使用这个在 xml 中设置类似于 android:fontFamily 的 fontfamily，

```
For Custom font:

 TextView tv = ((TextView) v.findViewById(R.id.select_item_title));
 Typeface face=Typeface.createFromAsset(getAssets(),"fonts/mycustomfont.ttf"); 
 tv.setTypeface(face);

For Default font:

 tv.setTypeface(Typeface.create("sans-serif-medium",Typeface.NORMAL)); 
```

这些是使用的***默认字体***系列列表，通过替换双引号字符串**“sans-serif-medium”来使用其中的任何一个**

```
FONT FAMILY                    TTF FILE                    

1  casual                      ComingSoon.ttf              
2  cursive                     DancingScript-Regular.ttf   
3  monospace                   DroidSansMono.ttf           
4  sans-serif                  Roboto-Regular.ttf          
5  sans-serif-black            Roboto-Black.ttf            
6  sans-serif-condensed        RobotoCondensed-Regular.ttf 
7  sans-serif-condensed-light  RobotoCondensed-Light.ttf   
8  sans-serif-light            Roboto-Light.ttf            
9  sans-serif-medium           Roboto-Medium.ttf           
10  sans-serif-smallcaps       CarroisGothicSC-Regular.ttf 
11  sans-serif-thin            Roboto-Thin.ttf             
12  serif                      NotoSerif-Regular.ttf       
13  serif-monospace            CutiveMono.ttf 
```

“mycustomfont.ttf”是 ttf 文件。***路径***将在*src/assets/fonts/mycustomfont.ttf中，您可以在此*[默认字体系列](https://stackoverflow.com/questions/39535475/what-is-the-default-font-family-in-android#39536066)中参考有关默认字体的更多信息

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2019-01-09T23:59:34.740

**选项 1** - API 26 及更高版本

```
// Jave
Typeface typeface = getResources().getFont(R.font.myfont);
textView.setTypeface(typeface);

// Kotlin
val typeface = resources.getFont(R.font.myfont)
textView.typeface = typeface 
```

**选项 2** - API 16 及更高版本

```
// Java
Typeface typeface = ResourcesCompat.getFont(context, R.font.myfont);

// Kotlin
val typeface = ResourcesCompat.getFont(context, R.font.myfont) 
```

[在Android Developers Guide](https://developer.android.com/guide/topics/ui/look-and-feel/fonts-in-xml#kotlin)中查看完整的补偿。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-06-01T10:55:49.347

可以通过使用

`setTypeface(Typeface tf, int style)`类的方法`TextView`。

`spinner_text.setTypeface(Typeface.SANS_SERIF,Typeface.NORMAL);`

# javascript - 如何访问 jquery 功能？

> ID：14343905
> 
> 赞同：-1
> 
> 时间：2013-01-15T18:01:35.110
> 
> 标签：javascript, jquery, swipe

* * *

我有以下 jquery 文件...如何直接在我的内联脚本中或在我想要的任何事件中直接访问**$navPrev**和**$navNext函数。**例如：

```
 $("a").swipe( {
    //Generic swipe handler for all directions
        swipe:function(event, direction, distance, duration, fingerCount) {
             // My code here to move next or previous based on swipe action.
         ); 
             },
}); 
```

我基本上是想添加 jquery 滑动功能来滚动滑块。为此，我需要能够直接访问下一个和上一个功能。

```
(function( $, undefined ) {

 // Gallery object.

$.Gallery               = function( options, element ) {

    this.$el    = $( element );
    this._init( options );

};

$.Gallery.defaults      = {
    current     : 0,    // index of current item
    autoplay    : false,// slideshow on / off
    interval    : 2000  // time between transitions
};

$.Gallery.prototype     = {
    _init               : function( options ) {

        this.options        = $.extend( true, {}, $.Gallery.defaults, options );

        // support for 3d / 2d transforms and transitions
        this.support3d      = Modernizr.csstransforms3d;
        this.support2d      = Modernizr.csstransforms;
        this.supportTrans   = Modernizr.csstransitions;

        this.$wrapper       = this.$el.find('.dg-wrapper');

        this.$items         = this.$wrapper.children();
        this.itemsCount     = this.$items.length;

        this.$nav           = this.$el.find('nav');
        this.$navPrev       = this.$nav.find('.dg-prev');
        this.$navNext       = this.$nav.find('.dg-next');

        // minimum of 3 items
        if( this.itemsCount < 3 ) {

            this.$nav.remove();
            return false;

        }   

        this.current        = this.options.current;

        this.isAnim         = false;

        this.$items.css({
            'opacity'   : 0,
            'visibility': 'hidden'
        });

        this._validate();

        this._layout();

        // load the events
        this._loadEvents();

        // slideshow
        if( this.options.autoplay ) {

            this._startSlideshow();

        }

    },
    _validate           : function() {

        if( this.options.current < 0 || this.options.current > this.itemsCount - 1 ) {

            this.current = 0;

        }   

    },
    _layout             : function() {

        // current, left and right items
        this._setItems();

        // current item is not changed
        // left and right one are rotated and translated
        var leftCSS, rightCSS, currentCSS;

        if( this.support3d && this.supportTrans ) {

            leftCSS     = {
                '-webkit-transform' : 'translateX(-350px) translateZ(-200px) rotateY(45deg)',
                '-moz-transform'    : 'translateX(-350px) translateZ(-200px) rotateY(45deg)',
                '-o-transform'      : 'translateX(-350px) translateZ(-200px) rotateY(45deg)',
                '-ms-transform'     : 'translateX(-350px) translateZ(-200px) rotateY(45deg)',
                'transform'         : 'translateX(-350px) translateZ(-200px) rotateY(45deg)'
            };

            rightCSS    = {
                '-webkit-transform' : 'translateX(350px) translateZ(-200px) rotateY(-45deg)',
                '-moz-transform'    : 'translateX(350px) translateZ(-200px) rotateY(-45deg)',
                '-o-transform'      : 'translateX(350px) translateZ(-200px) rotateY(-45deg)',
                '-ms-transform'     : 'translateX(350px) translateZ(-200px) rotateY(-45deg)',
                'transform'         : 'translateX(350px) translateZ(-200px) rotateY(-45deg)'
            };

            leftCSS.opacity     = 1;
            leftCSS.visibility  = 'visible';
            rightCSS.opacity    = 1;
            rightCSS.visibility = 'visible';

        }
        else if( this.support2d && this.supportTrans ) {

            leftCSS     = {
                '-webkit-transform' : 'translate(-350px) scale(0.8)',
                '-moz-transform'    : 'translate(-350px) scale(0.8)',
                '-o-transform'      : 'translate(-350px) scale(0.8)',
                '-ms-transform'     : 'translate(-350px) scale(0.8)',
                'transform'         : 'translate(-350px) scale(0.8)'
            };

            rightCSS    = {
                '-webkit-transform' : 'translate(350px) scale(0.8)',
                '-moz-transform'    : 'translate(350px) scale(0.8)',
                '-o-transform'      : 'translate(350px) scale(0.8)',
                '-ms-transform'     : 'translate(350px) scale(0.8)',
                'transform'         : 'translate(350px) scale(0.8)'
            };

            currentCSS  = {
                'z-index'           : 999
            };

            leftCSS.opacity     = 1;
            leftCSS.visibility  = 'visible';
            rightCSS.opacity    = 1;
            rightCSS.visibility = 'visible';

        }

        this.$leftItm.css( leftCSS || {} );
        this.$rightItm.css( rightCSS || {} );

        this.$currentItm.css( currentCSS || {} ).css({
            'opacity'   : 1,
            'visibility': 'visible'
        }).addClass('dg-center');

    },
    _setItems           : function() {

        this.$items.removeClass('dg-center');

        this.$currentItm    = this.$items.eq( this.current );
        this.$leftItm       = ( this.current === 0 ) ? this.$items.eq( this.itemsCount - 1 ) : this.$items.eq( this.current - 1 );
        this.$rightItm      = ( this.current === this.itemsCount - 1 ) ? this.$items.eq( 0 ) : this.$items.eq( this.current + 1 );

        if( !this.support3d && this.support2d && this.supportTrans ) {

            this.$items.css( 'z-index', 1 );
            this.$currentItm.css( 'z-index', 999 );

        }

        // next & previous items
        if( this.itemsCount > 3 ) {

            // next item
            this.$nextItm       = ( this.$rightItm.index() === this.itemsCount - 1 ) ? this.$items.eq( 0 ) : this.$rightItm.next();
            this.$nextItm.css( this._getCoordinates('outright') );

            // previous item
            this.$prevItm       = ( this.$leftItm.index() === 0 ) ? this.$items.eq( this.itemsCount - 1 ) : this.$leftItm.prev();
            this.$prevItm.css( this._getCoordinates('outleft') );

        }

    },
    _loadEvents         : function() {

        var _self   = this;

        this.$navPrev.on( 'click.gallery', function( event ) {

            if( _self.options.autoplay ) {

                clearTimeout( _self.slideshow );
                _self.options.autoplay  = false;

            }

            _self._navigate('prev');

            return false;

        });

        this.$navNext.on( 'click.gallery', function( event ) {

            if( _self.options.autoplay ) {

                clearTimeout( _self.slideshow );
                _self.options.autoplay  = false;

            }

            _self._navigate('next');
            return false;

        });

        this.$wrapper.on( 'webkitTransitionEnd.gallery transitionend.gallery OTransitionEnd.gallery', function( event ) {

            _self.$currentItm.addClass('dg-center');
            _self.$items.removeClass('dg-transition');
            _self.isAnim    = false;

        });

    },
    _getCoordinates     : function( position ) {

        if( this.support3d && this.supportTrans ) {

            switch( position ) {
                case 'outleft':
                    return {
                        '-webkit-transform' : 'translateX(-450px) translateZ(-300px) rotateY(45deg)',
                        '-moz-transform'    : 'translateX(-450px) translateZ(-300px) rotateY(45deg)',
                        '-o-transform'      : 'translateX(-450px) translateZ(-300px) rotateY(45deg)',
                        '-ms-transform'     : 'translateX(-450px) translateZ(-300px) rotateY(45deg)',
                        'transform'         : 'translateX(-450px) translateZ(-300px) rotateY(45deg)',
                        'opacity'           : 0,
                        'visibility'        : 'hidden'
                    };
                    break;
                case 'outright':
                    return {
                        '-webkit-transform' : 'translateX(450px) translateZ(-300px) rotateY(-45deg)',
                        '-moz-transform'    : 'translateX(450px) translateZ(-300px) rotateY(-45deg)',
                        '-o-transform'      : 'translateX(450px) translateZ(-300px) rotateY(-45deg)',
                        '-ms-transform'     : 'translateX(450px) translateZ(-300px) rotateY(-45deg)',
                        'transform'         : 'translateX(450px) translateZ(-300px) rotateY(-45deg)',
                        'opacity'           : 0,
                        'visibility'        : 'hidden'
                    };
                    break;
                case 'left':
                    return {
                        '-webkit-transform' : 'translateX(-350px) translateZ(-200px) rotateY(45deg)',
                        '-moz-transform'    : 'translateX(-350px) translateZ(-200px) rotateY(45deg)',
                        '-o-transform'      : 'translateX(-350px) translateZ(-200px) rotateY(45deg)',
                        '-ms-transform'     : 'translateX(-350px) translateZ(-200px) rotateY(45deg)',
                        'transform'         : 'translateX(-350px) translateZ(-200px) rotateY(45deg)',
                        'opacity'           : 1,
                        'visibility'        : 'visible'
                    };
                    break;
                case 'right':
                    return {
                        '-webkit-transform' : 'translateX(350px) translateZ(-200px) rotateY(-45deg)',
                        '-moz-transform'    : 'translateX(350px) translateZ(-200px) rotateY(-45deg)',
                        '-o-transform'      : 'translateX(350px) translateZ(-200px) rotateY(-45deg)',
                        '-ms-transform'     : 'translateX(350px) translateZ(-200px) rotateY(-45deg)',
                        'transform'         : 'translateX(350px) translateZ(-200px) rotateY(-45deg)',
                        'opacity'           : 1,
                        'visibility'        : 'visible'
                    };
                    break;
                case 'center':
                    return {
                        '-webkit-transform' : 'translateX(0px) translateZ(0px) rotateY(0deg)',
                        '-moz-transform'    : 'translateX(0px) translateZ(0px) rotateY(0deg)',
                        '-o-transform'      : 'translateX(0px) translateZ(0px) rotateY(0deg)',
                        '-ms-transform'     : 'translateX(0px) translateZ(0px) rotateY(0deg)',
                        'transform'         : 'translateX(0px) translateZ(0px) rotateY(0deg)',
                        'opacity'           : 1,
                        'visibility'        : 'visible'
                    };
                    break;
            };

        }
        else if( this.support2d && this.supportTrans ) {

            switch( position ) {
                case 'outleft':
                    return {
                        '-webkit-transform' : 'translate(-450px) scale(0.7)',
                        '-moz-transform'    : 'translate(-450px) scale(0.7)',
                        '-o-transform'      : 'translate(-450px) scale(0.7)',
                        '-ms-transform'     : 'translate(-450px) scale(0.7)',
                        'transform'         : 'translate(-450px) scale(0.7)',
                        'opacity'           : 0,
                        'visibility'        : 'hidden'
                    };
                    break;
                case 'outright':
                    return {
                        '-webkit-transform' : 'translate(450px) scale(0.7)',
                        '-moz-transform'    : 'translate(450px) scale(0.7)',
                        '-o-transform'      : 'translate(450px) scale(0.7)',
                        '-ms-transform'     : 'translate(450px) scale(0.7)',
                        'transform'         : 'translate(450px) scale(0.7)',
                        'opacity'           : 0,
                        'visibility'        : 'hidden'
                    };
                    break;
                case 'left':
                    return {
                        '-webkit-transform' : 'translate(-350px) scale(0.8)',
                        '-moz-transform'    : 'translate(-350px) scale(0.8)',
                        '-o-transform'      : 'translate(-350px) scale(0.8)',
                        '-ms-transform'     : 'translate(-350px) scale(0.8)',
                        'transform'         : 'translate(-350px) scale(0.8)',
                        'opacity'           : 1,
                        'visibility'        : 'visible'
                    };
                    break;
                case 'right':
                    return {
                        '-webkit-transform' : 'translate(350px) scale(0.8)',
                        '-moz-transform'    : 'translate(350px) scale(0.8)',
                        '-o-transform'      : 'translate(350px) scale(0.8)',
                        '-ms-transform'     : 'translate(350px) scale(0.8)',
                        'transform'         : 'translate(350px) scale(0.8)',
                        'opacity'           : 1,
                        'visibility'        : 'visible'
                    };
                    break;
                case 'center':
                    return {
                        '-webkit-transform' : 'translate(0px) scale(1)',
                        '-moz-transform'    : 'translate(0px) scale(1)',
                        '-o-transform'      : 'translate(0px) scale(1)',
                        '-ms-transform'     : 'translate(0px) scale(1)',
                        'transform'         : 'translate(0px) scale(1)',
                        'opacity'           : 1,
                        'visibility'        : 'visible'
                    };
                    break;
            };

        }
        else {

            switch( position ) {
                case 'outleft'  : 
                case 'outright' : 
                case 'left'     : 
                case 'right'    :
                    return {
                        'opacity'           : 0,
                        'visibility'        : 'hidden'
                    };
                    break;
                case 'center'   :
                    return {
                        'opacity'           : 1,
                        'visibility'        : 'visible'
                    };
                    break;
            };

        }

    },
    _navigate           : function( dir ) {

        if( this.supportTrans && this.isAnim )
            return false;

        this.isAnim = true;

        switch( dir ) {

            case 'next' :

                this.current    = this.$rightItm.index();

                // current item moves left
                this.$currentItm.addClass('dg-transition').css( this._getCoordinates('left') );

                // right item moves to the center
                this.$rightItm.addClass('dg-transition').css( this._getCoordinates('center') ); 

                // next item moves to the right
                if( this.$nextItm ) {

                    // left item moves out
                    this.$leftItm.addClass('dg-transition').css( this._getCoordinates('outleft') );

                    this.$nextItm.addClass('dg-transition').css( this._getCoordinates('right') );

                }
                else {

                    // left item moves right
                    this.$leftItm.addClass('dg-transition').css( this._getCoordinates('right') );

                }
                break;

            case 'prev' :

                this.current    = this.$leftItm.index();

                // current item moves right
                this.$currentItm.addClass('dg-transition').css( this._getCoordinates('right') );

                // left item moves to the center
                this.$leftItm.addClass('dg-transition').css( this._getCoordinates('center') );

                // prev item moves to the left
                if( this.$prevItm ) {

                    // right item moves out
                    this.$rightItm.addClass('dg-transition').css( this._getCoordinates('outright') );

                    this.$prevItm.addClass('dg-transition').css( this._getCoordinates('left') );

                }
                else {

                    // right item moves left
                    this.$rightItm.addClass('dg-transition').css( this._getCoordinates('left') );

                }
                break;  

        };

        this._setItems();

        if( !this.supportTrans )
            this.$currentItm.addClass('dg-center');

    },
    _startSlideshow     : function() {

        var _self   = this;

        this.slideshow  = setTimeout( function() {

            _self._navigate( 'next' );

            if( _self.options.autoplay ) {

                _self._startSlideshow();

            }

        }, this.options.interval );

    },
    destroy             : function() {

        this.$navPrev.off('.gallery');
        this.$navNext.off('.gallery');
        this.$wrapper.off('.gallery');

    }
};

var logError            = function( message ) {
    if ( this.console ) {
        console.error( message );
    }
};

$.fn.gallery            = function( options ) {

    if ( typeof options === 'string' ) {

        var args = Array.prototype.slice.call( arguments, 1 );

        this.each(function() {

            var instance = $.data( this, 'gallery' );

            if ( !instance ) {
                logError( "cannot call methods on gallery prior to initialization; " +
                "attempted to call method '" + options + "'" );
                return;
            }

            if ( !$.isFunction( instance[options] ) || options.charAt(0) === "_" ) {
                logError( "no such method '" + options + "' for gallery instance" );
                return;
            }

            instance[ options ].apply( instance, args );

        });

    } 
    else {

        this.each(function() {

            var instance = $.data( this, 'gallery' );
            if ( !instance ) {
                $.data( this, 'gallery', new $.Gallery( options, this ) );
            }
        });

    }

    return this;

};

})( jQuery ); 
```

这是我的 HTML 代码：

```
<div class="container">
        <!-- Codrops top bar -->
            <!--/ Codrops top bar -->
  <section id="dg-container" class="dg-container">
    <div class="dg-wrapper">

      <a href="#"><img src="album1.jpg" alt="image05"></a>
      <a href="#"><img src="album2.jpg" alt="image06"></a>
      <a href="#"><img src="album3.jpg" alt="image07"></a>

    </div>
                <nav>   
                    <span class="dg-prev">&lt;</span>
                    <span class="dg-next">&gt;</span>
    </nav>
  </section>
</div> 
```

编辑：这是从 html 页面调用滑块的方式

```
<script type="text/javascript">
            $(function() {
                $me=$('#dg-container').gallery({
                    autoplay    :   true
                });
//              console.log($me);

            });
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:14:01.750

首先，`$navNext`它们`$navPrev`不是函数，它们只是`span`元素。

```
<span class="dg-prev">&lt;</span>
<span class="dg-next">&gt;</span> 
```

你可以用这个

```
$(".dg-prev")
$(".dg-next") 
```

直接访问这些元素。

所以，在你的`swipe`代码中，这样调用：

```
$(".dg-prev").click(); 
```

# ruby-on-rails - 一个人如何使用 curl 抓取一个网站，但每次都使用不同的会话？

> ID：14343906
> 
> 赞同：1
> 
> 时间：2013-01-15T18:01:38.363
> 
> 标签：ruby-on-rails, ruby-on-rails-3, curl, libcurl

一个人如何使用 curl 抓取一个网站，但每次都使用不同的会话？基本上，我想使用 curl 访问一个页面，但每次都有一个新会话。

基本上，网络应用程序应该认为每次 curl 访问都是不同的用户。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T18:07:44.963

首先，http 是无状态的，并且没有会话（在 http 协议本身中）这样的东西。

有一个 Rails 会话，我相信它是用 cookie 管理的。（至少我在 Rails 2.x 中。）只要你不发送 cookie，它应该认为这是一个新的 Rails 会话。

Web 服务器可能正在跟踪会话，或者一些用于跟踪访问和点击的实用程序。当请求在给定的时间窗口内来自相同的 IP 地址时，会执行此操作。对于这些会话，您将无法使用 curl 进行与以前不同的访问。

# java - JApplet - 从 FTP 获取图像

> ID：14343907
> 
> 赞同：0
> 
> 时间：2013-01-15T18:01:38.450
> 
> 标签：java, ftp, carousel, japplet

我有以下 JApplet（基本上是滚动产品图像的轮播）。

```
private void populateMethod() {
    for (int i = 0; i < 3; i++) {
        try {
            images.add(ImageIO.read(new URL(getCodeBase()+"/images/"+(i+1)+".jpg")));
        } catch (IOException ex) {
            Logger.getLogger(JAppletExample.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

在上述方法中，我将图像（当前位于我的解决方案内的一个包中）添加到要在轮播中显示的图像的 ArrayList。

现在如何使图像在 FTP 上可用，以便可以通过 FTP 更改图像？

（注：我包内的图片保存为1.jpg,2.jpg,3.jpg）

# vba - 建议 Excel 2003 VBA 视频？

> ID：14343912
> 
> 赞同：-1
> 
> 时间：2013-01-15T18:02:00.803
> 
> 标签：vba, excel, excel-2003

我想学习如何将单元格从已经打开的 Excel 工作簿复制到另一个文件。我不只是想要一个代码，我想要一个教程。我的问题是谷歌只给我论坛。有人可以推荐一个带视频的好教程吗？超链接会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T19:00:06.153

```
Option Explicit

Sub CopyFromOpenWorkbookToAnother()

'declare variables
Dim wkbCopy as Workbook, wkbPaste as Workbook
Dim wksCopy as Worksheet, wksPaste as Worksheet
Dim rngCopy as Range

'set variables -> change the names to suit your data needs
Set wkbCopy = Workbooks("WorkbookToCopyFrom.xls")
Set wkbPaste = Workbooks("WorkbookToCopyTo.xls")
Set wksCopy = wkbCopy.Sheets("SheetToCopy")
Set wksPaste = wkbPaste.Sheets("SheetToPaste")

Set rngCopy = wksCopy.Range("A1:A10") 'adjust to whatever range you need
rngCopy.Copy wksPaste.Range("A1") 'adjust to wherever you want to paste

End Sub 
```

# iframe - 谷歌分析可以托管在嵌入在 iframe 中的不同 URL 上吗

> ID：14343913
> 
> 赞同：0
> 
> 时间：2013-01-15T18:02:00.937
> 
> 标签：iframe, google-analytics

我有一个网站`www.site.com`，其中包含一个 iframe，其中嵌入了另一个`www.another.com`包含谷歌分析代码的网站。现在，如果用户随意导航到我的网站，`www.site.com`iframe 中的谷歌分析代码会`www.another.com`跟踪该用户吗？如果没有，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:09:01.877

是的。这里有大量关于此[的](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)文档。

# perl - 如何在 Perl 中查看文件的下一行

> ID：14343914
> 
> 赞同：4
> 
> 时间：2013-01-15T18:02:01.973
> 
> 标签：perl, parsing, search, peek

我有一段代码可以打开一个文件并解析它。该文本文档具有冗余结构并具有多个条目。我需要在循环中提前查看是否有新条目，如果有，我将能够解析我的程序提取的所有数据。让我首先展示我到目前为止的实现

```
use strict;
my $doc = open(my $fileHandler, "<", "test.txt");

while(my $line = <$fileHandler>) {
    ## right here I want to look at the next line to see if 
    ## $line =~ m/>/ where > denotes a new entry
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T18:35:31.840

尝试自己处理迭代：

```
my $line = <$fileHandler>;
while(1) { # keep looping until I say so
    my $nextLine = <$fileHandler>;

    if ($line =~ m/>/ || !defined $nextLine) {
        ### Do the stuff
    }
    ### Do any other stuff;

    last unless defined $nextLine;
    $line = $nextLine;
} 
```

我在 if 语句中添加了额外的检查，假设您还希望在到达文件末尾时处理您拥有的内容。

或者，正如frido所建议的那样，如果文件可以放入内存，您可以一次将整个内容加载到数组中：

```
my @lines = <$fileHandler>;
for (my $i = 0; $i <= $#lines; $i++) {
    if ($i == $#lines || $lines[$i+1] =~ />/) {
        ### Do the stuff
    }
} 
```

这更灵活，因为您可以按任何顺序访问文件的任意行，但如前所述，文件必须足够小才能放入内存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T19:10:17.163

处理这些问题的一个好方法是使用[`Tie::File`](http://search.cpan.org/perldoc?Tie::File)，它允许您将文件视为数组，而不会因实际将文件加载到内存中而造成性能损失。它也是 perl v5.7.3 以来的核心模块。

```
use Tie::File;
tie my @file, 'Tie::File', "test.txt" or die $!;

for my $linenr (0 .. $#file) {             # loop over line numbers
    if ($file[$linenr] =~ /foo/) {         # this is the current line
        if ($file[$linenr + 1] =~ /^>/ &&  # this is the next line
            $linenr <= $#file) {           # don't go past end of file
             # do stuff
        }
    }
}
untie @file;   # all done 
```

# c# - 将矩形绘制为精灵时如何更改其旋转中心？

> ID：14343917
> 
> 赞同：0
> 
> 时间：2013-01-15T18:02:04.510
> 
> 标签：c#, xna, rotation, spritebatch, drawrectangle

我通过使用一个像素的绘画图片在 XNA 中绘制一条线，然后将该像素拟合到一个高度为 100 的矩形中，长度为 2，因此它显示为一条线。这样我以后可以画一个矩形。

我也想旋转矩形，但旋转中心总是它的左上角。我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:07:01.333

使用此方法的[重载](http://msdn.microsoft.com/en-us/library/ff433989.aspx)`Draw`。您可能希望将`origin`参数设置为非零向量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:17:35.983

在 Draw() 方法中设置 Origin 参数。

```
public void Draw (
     Texture2D texture,
     Vector2 position,
     Nullable<Rectangle> sourceRectangle,
     Color color,
     float rotation,
     Vector2 origin,
     Vector2 scale,
     SpriteEffects effects,
     float layerDepth 
```

)

在哪里：

*起源*

***精灵起源；默认值为 (0,0)，表示左上角。***

# android - 尝试在 fts3 中检索 rowid 时获取 null

> ID：14343918
> 
> 赞同：0
> 
> 时间：2013-01-15T18:02:07.277
> 
> 标签：android

在过去的 5-6 个小时里，我一直坚持这一点。没有任何工作。我想获取与用户输入的查询相对应的密钥，以便用户可以修改与该特定 ID 对应的数据。

这段代码有问题吗..？？

```
db.execSQL("CREATE VIRTUAL TABLE " + DATABASE_TABLE
                + " USING fts3 (" + KEY_ID
                + " INTEGER PRIMARY KEY ASC, " + KEY_NAME
                + " TEXT NOT NULL, " + KEY_ADDRESS
                + " TEXT NOT NULL, " + KEY_CONTACT + " TEXT NOT NULL, "
                + KEY_BALANCE + " DOUBLE);"); 
```

我将这个 KEY_ID 列清空。我想获取这个 id（使用 cursor 元素，就像我们使用 cursor.getString(int) 一样）让用户修改与所选 id 对应的值，所以我需要从某个地方获取 id。有没有办法调用 fts3 表的默认 ID 而不是使用别名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:08:04.307

> 有没有办法调用 fts3 表的默认 ID 而不是使用别名？

问题是适配器中使用的游标*必须*有一个带有 name 的整数主键列`_id`，但`_id`不是 SQLite 识别的别名。所以不，您需要使用自己的别名。您可以使用`docid as _id`,`rowid as _id`等。

* * *

**添加**
由于我不相信您可以在语句中以任何方式更改`docid INTEGER PRIMARY KEY`列，因此`CREATE VIRTUAL TABLE`您需要在`SELECT`语句中应用别名，例如：

```
SELECT docid as _id, bar FROM Foo WHERE bar MATCH 'John'; 
```

# oop - 框架如何影响应用程序的架构？

> ID：14343920
> 
> 赞同：3
> 
> 时间：2013-01-15T18:02:08.730
> 
> 标签：oop, design-patterns, frameworks

我在“设计模式”一书中为四人组读过，该框架会影响应用程序的整体架构。现在我知道，例如，当使用 .NET 时，您需要从中继承`System.Windows.Form`来制作表单（*尽管我认为我在这里有一个很大的误解*）。但是任何人都可以使用任何框架在代码中描述该框架如何影响应用程序架构吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:43:23.060

我必须说，一个干净的架构（也是设计模式）不依赖于正在使用的框架、工具包或库。架构描述了软件系统的高级结构（层和层），而不是详细说明它是如何实现的。它是一套原则，可以帮助我们实现一些特定的目标，例如安全性、可用性、可扩展性、可靠性、可维护性、可用性……让我们看一个简单的例子：

模型-视图-控制器 (MVC) 是一种软件架构（或设计模式），它将域的建模、表示和基于用户输入的操作分为三个单独的类。MVC 背后的中心思想是代码可重用性和关注点分离。您可以使用多种编程语言或框架应用 MVC，例如 ASP.Net MVC、Java Strut、PHP DRY、CAKEPHP...。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T19:06:56.700

[Wikipedia](http://en.wikipedia.org/wiki/Software_framework#cite_note-9)中有一些关于该主题的有趣注释：

> 软件框架由冻结点和热点组成。冻结点定义了软件系统的整体架构（...）。这些在应用程序框架的任何实例中都保持不变（冻结）。热点代表使用框架的程序员添加自己的代码的那些部分（...）。

据此，您的应用程序可以由您正在使用的框架定义。例如，在 Java 世界中，使用 Struts 框架意味着您正在使用[MVC 架构](http://en.wikipedia.org/wiki/Model%E2%80%93View%E2%80%93Controller)，或者使用 Spring 框架会强制您应用[依赖注入模式](http://en.wikipedia.org/wiki/Dependency_injection)。如果软件架构是由软件模式定义的，那么一些框架是供您使用的预构建模式。

另一方面，没有软件应用程序仅由模式/框架制作，有一些热点很有用：它们是软件框架提供的扩展/使用框架功能并根据您的要求和领域构建应用程序的方式.

例如，假设您正在使用[Spring MVC Framework](http://static.springsource.org/spring/docs/2.0.x/reference/mvc.html)构建一个 Web 应用程序。在项目中配置框架后，对应用程序的每个请求都将委托给一个名为`DispatcherServlet`. 这个类是内置在框架中的，你不应该修改它，所以它是**Frozen Spot**的完美示例。将`DispatcherServlet`查找您的项目配置并将请求处理委托给`Controller`. 这`Controller`通常是程序员制作的一个类，负责处理请求。所以你的手工控制器是你扩展框架的**热点**。

DispatcherServlet 是[Front-Controller Pattern](http://en.wikipedia.org/wiki/Front_Controller_pattern)的实现，Controller 的使用是 MVC 应用程序的典型；因此，您的应用程序由您使用的框架高度定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T18:41:41.487

在不同的框架中传递、存储或评估数据的方式有不同的方法。如果您正在使用 Windows 窗体应用程序，您可以从项目的任何地方访问您的视图元素，因为它们都在计算机的本地内存中，而没有其他地方。

但是，如果您使用的是 ASP.NET 应用程序，则项目、客户端和服务器有不同的方在使用，并且事情会变得更加复杂。您所做的设计与 Forms 几乎没有任何共同之处。

如果您正在使用 ASP.NET MVC 应用程序，则有三层：ModelViewController，操作分为这些层，从现在开始，您需要以适合这些层的方式进行设计。您拥有 MVC 提供的数据库表对象关系，可以完全改变设计。

位于程序下方的编程语言也改变了设计，因为它可以是功能性的、面向对象的等。

简而言之，这不是一个建设性的问题。在使用不同的编程语言和技术后，您将找出这个问题的答案。

# fireworks - 在 Adob e Fireworks 中显示当前图层并隐藏所有其他图层

> ID：14343923
> 
> 赞同：0
> 
> 时间：2013-01-15T18:02:09.953
> 
> 标签：fireworks

我一直在学习如何使用 Adob​​e Fireworks，因为我想使用一些有益的功能，例如与 Photoshop 相比更好的 png 压缩。在图层面板上的 Photoshop 中，只需单击图层上的眼睛图标，即可直接关闭打开文档中的所有其他图层。但是，这在 Fireworks 中不起作用。除了用户正在处理的层之外，是否有一种快速关闭所有层的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:16:26.857

这不是一个很好的解决方案，但除了单击眼睛然后再次单击以重新打开所选图层之外，我似乎也找不到任何合适的方法来执行此操作。

如果您使用此脚本创建一个文本文件并将其另存为“Hide Other Layers.jsf”，则可以将其放入 Fireworks*配置/命令*文件夹中。如果它在正确的文件夹中，它应该会显示在“*命令*”菜单中，然后您可以添加键盘快捷键来运行它：

```
fw.getDocumentDOM().setLayerVisible(-1, -1, false, true);
fw.getDocumentDOM().setLayerVisible(-1, -1, true, false); 
```

这将隐藏每一层，然后显示您当前选择的任何层。

# wordpress - Woocommerce 新客户管理员通知电子邮件

> ID：14343928
> 
> 赞同：6
> 
> 时间：2013-01-15T18:02:21.933
> 
> 标签：wordpress, woocommerce

我正在使用 Wordpress 和 Woocommerce 构建一个电子商务网站。我需要网站在注册新客户帐户时向网站管理员发送通知电子邮件。我认为此功能将内置到 Woocommerce 中，因为它使用 Wordpress 用户帐户结构，并且 Wordpress 会发送新用户通知，但似乎并非如此。有谁知道我可以用来添加此功能的插件或功能？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-28T10:59:23.760

我假设您在电子邮件中使用 html。如果您使用纯文本，则过程类似。

您需要覆盖 woocommerce 模板结构。在这里您可以找到方法：[http](http://docs.woothemes.com/document/template-structure/) ://docs.woothemes.com/document/template-structure/ 。

实际上，您需要覆盖的唯一文件是 your_template_directory/woocommerce/emails/customer-new-account.php。

在这个文件的最后添加这行代码：

```
<?php do_action( 'new_customer_registered', $user_login ); ?> 
```

在functions.php中添加：

```
function new_customer_registered_send_email_admin($user_login) {
  ob_start();
  do_action('woocommerce_email_header', 'New customer registered');
  $email_header = ob_get_clean();
  ob_start();
  do_action('woocommerce_email_footer');
  $email_footer = ob_get_clean();

  woocommerce_mail(
    get_bloginfo('admin_email'),
    get_bloginfo('name').' - New customer registered',
    $email_header.'<p>The user '.esc_html( $user_login ).' is registered to the website</p>'.$email_footer
  );
}
add_action('new_customer_registered', 'new_customer_registered_send_email_admin'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-06T21:33:03.720

```
add_action('woocommerce_created_customer', 'admin_email_on_registration', 10 , 1);
function admin_email_on_registration( $customer_id) {
    wp_new_user_notification( $customer_id );
} 
```

`woocommerce_created_customer`是 woocommerce 创建用户时调用的钩子。它只向客户发送通知。我们将使用 wp_new_user_notification() 函数向管理员发送通知。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T05:33:45.757

the answers is in the emails sections of "`woocommerce / settings`"

simply change the from email to **wordpress@yourdomain.com**

worked for me as i also had the same issues

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T06:57:53.737

我一直在努力解决同样的问题，在与开发人员反复讨论后，默认设置是**不**向管理员发送新的客户注册通知电子邮件。

在尝试了各种电子邮件插件，甚至求助于使用 WP SMTP 电子邮件后，我最终决定不理会它。

也就是说，WooCommerce 2.0 已于今天发布，因此它可能会在新版本中构建。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-22T06:48:32.413

新用户注册后通知管理员：

```
add_action( 'woocommerce_created_customer', 'woocommerce_created_customer_admin_notification' );
function woocommerce_created_customer_admin_notification( $customer_id ) 
{
    wp_send_new_user_notifications( $customer_id, 'admin' );
} 
```

请参阅[https://woocommerce.com/document/notify-admin-new-account-created/上的文档](https://woocommerce.com/document/notify-admin-new-account-created/)

# c# - 为什么不能在泛型中要求运算符重载

> ID：14343932
> 
> 赞同：5
> 
> 时间：2013-01-15T18:02:35.733
> 
> 标签：c#, .net, generics, cil, cil-metadata

在 C++ 中，您可以编写如下代码：

```
template<class T>
T Add(T lhs, T rhs)
{
    return lhs + rhs;
} 
```

但是，你不能在 C# 中做这样的事情：

```
public static T Add<T>(T x, T y) where T : operator+
{
    return x + y;
} 
```

有什么理由吗？我知道它可以通过反射来完成（`Add`对对象进行泛型，然后对它进行类型检查），但这效率低且不能很好地扩展。那么，再次，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T18:21:53.590

没有内在的原因这不可能存在。实现泛型类型约束的方式是通过接口调用。如果有一个提供了`operator+`this 的接口就可以了。

*但是，所有*相关类型都需要此接口，以便与基于 C++ 模板的类比一样通用。

另一个问题是 .NET 没有多重分派。接口调用将是不对称的：`a.Plus(b)`可能意味着不同于`b.Plus(a)`. `Equals`有同样的问题，顺便说一句。

所以这个问题可能不符合“有用”栏或“成本/效用”栏。这不是一个不可能的问题，而是一个实际问题。

证明是可能的：`((dynamic)a) + ((dynamic)b)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T18:19:16.130

CLR 本身并不支持此类约束，C# 设计团队显然决定支持与 CLR 相同的一组约束。大概 CLR 团队和 C# 团队都认为实现这样一个特性的好处并没有超过规范、实现和测试它的成本。

如果您想使用支持此类约束的 .NET 语言，请考虑查看 F#。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T20:52:06.960

有几种可能的方法来实现运算符约束，所有这些方法要么不重要（并且可能需要更改 CLR），要么具有明显的缺点（例如它们会很慢，比添加两个整数慢得多）。

这是相对容易解决的问题（无论是缓慢、通用`dynamic`且不安全的使用 . 正因为如此，这样的功能可能被认为是“很高兴拥有”，但远不足以保证进行此类更改。

# hadoop - 如何与多个用户一起使用 hive

> ID：14343948
> 
> 赞同：4
> 
> 时间：2013-01-15T18:03:23.177
> 
> 标签：hadoop, hive

我有几个用户使用同一个配置单元。

现在我希望每个用户在配置单元中都有一个私有元数据。

例子：

用户呼叫显示表：a1，a2，a3 ...

用户 b 调用 show table : b1 , b2 ,b3 ...

当然，当用户运行查询时，他们无法访问其他用户的表。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T18:37:18.993

> 为了使新用户的设置变得容易，Hive 的 Metastore 被配置为将元数据本地存储在嵌入式 Apache Derby 数据库中。不幸的是，这种配置一次只允许一个用户访问 Metastore。Cloudera 强烈鼓励用户改用 MySQL 数据库。本节介绍如何配置 Hive 以使用远程 MySQL 数据库，这允许 Hive 支持多个用户。有关其他信息，请参阅[Hive Metastore](http://wiki.apache.org/hadoop/Hive/AdminManual/MetastoreAdmin)文档。

有关更多详细信息，请参阅[此处标题](https://ccp.cloudera.com/display/CDHDOC/Hive+Installation)**为“配置 Hive 元存储”** 的部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T00:19:01.037

[创建](https://cwiki.apache.org/Hive/adminmanual-metastoreadmin.html)外部元存储后，可以使用[Hive 授权来授予/限制权限。](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Authorization)

这是Hive的[免责声明](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Authorization)

> Hive 授权并不完全安全。在目前的形式中，授权方案主要是为了防止好用户不小心做坏事，但没有承诺防止恶意用户做坏事。

# python - 对如何在实例之间共享和修改类级别数据感到困惑。

> ID：14343949
> 
> 赞同：1
> 
> 时间：2013-01-15T18:03:26.350
> 
> 标签：python

我不明白 Python 中的“静态”类数据是如何工作的。我正在尝试复制我在 Java 中经常使用的模式，在该模式中我创建了一个中央仿数据库类，并将它的实例提供给任何需要它的类。

但是，这就是我迷失 Python 的地方，似乎每当我尝试访问“静态”变量时，我都会创建一个实例级别的实例。这很令人困惑。

这是代码：

```
import csv 

class Database(object):
    data = list()
    def __init__(self):
        pass

    def connect(self, location=None):
        path = '.\\resources\\database\\'
        with open(path + 'info.csv', 'rU') as f:
            csv_data = csv.reader(f, delimiter=',')
            for row in csv_data:
                self.data.append(Entry(*row)) 
```

如您所见，非常简单。我`data`在 之外声明`init`，我相信这使它成为类级别。然后我遍历一个 csv 文件并将每一行的单元格字段附加到`data`列表中。

这就是我感到困惑的地方。我想做的第一件事是对`data`列表中的第一个条目进行切片（这只是从 excel 表中命名的列）。但在这样做时，它似乎创建了一个实例级别版本，`data`而不是修改`data`我想要的类级别。

所以，我修改了代码如下

```
import csv 

class Database(object):
    data = list()
    def __init__(self):
        pass

    def connect(self, location=None):
        path = '.\\resources\\database\\'
        with open(path + 'info.csv', 'rU') as f:
            csv_data = csv.reader(f, delimiter=',')
            for row in csv_data:
                self.data.append(Entry(*row))
            self.data = self.data[1:]  ## <--- NEW LINE HERE 
```

如您所见，我尝试像对任何其他列表一样对其进行切片，但这样做时，它（似乎）成为了本地版本`data`

在我的`main()`中，我有以下代码来测试一些属性：

```
def main():
    settings = Settings()

    db = csv_loader.Database()
    db.connect(settings.database)
    print 'gui.py:', db.data[0].num
    print 'gui.py:', db.data[0].name
    print 'gui.py:', len(db.data) 
```

这与预期的一样。由于之前的切片操作，它有 143 个条目。

现在，我有另一个类，它有一个实例，`Database()` *但*切片没有效果。

```
self.db = Database()
self.settings = Settings()
print 'tabOne.py:', self.db.data[0].conf_num
print 'tabOne.py:', self.db.data[0].conf_name
print len(self.db.data) 
```

该类的打印输出显示列表中有 144 个元素——因此切片操作实际上并未修改类级别`data`。

我错过了什么？我是在尝试错误地修改类级别变量还是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T18:06:30.193

您基本上是正确的，但是，列表切片会创建一个副本，因此该行：

```
self.data = self.data[1:] 
```

创建数据的**副本**，然后将其分配给新的**实例属性**。

以下是所有这些的工作原理：当为实例查找属性时，python 首先在实例中`__dict__`查找该属性。如果它不在实例的 s`__dict__`中，python 接下来会在类中​​查找，`__dict__`然后在父类的`__dict__`s 中查找（按照方法解析顺序）。因此，当您第一次开始访问`self.data`（附加到它）时，您不会在`data`实例`__dict__`的. 但是，当您明确分配给 时，您会突然在实例中添加一个条目，该条目将从那时起使用。`data``__dict__``self.dict``__dict__`

有几个解决方法：

```
Database.data = self.data[1:] 
```

可以正常工作，或者您可以使用切片分配来修改`self.data`列表：

```
self.data[:] = self.data[1:] 
```

或任何其他修改列表的方法：

```
self.data.pop(0) 
```

* * *

最后一个选项，可能是最*明确*的选项是更改`connect`为`classmethod`：

```
@classmethod
def connect(cls, location=None):
    path = '.\\resources\\database\\'
    with open(path + 'info.csv', 'rU') as f:
        csv_data = csv.reader(f, delimiter=',')
        for row in csv_data:
            cls.data.append(Entry(*row))
        cls.data = cls.data[1:] 
```

现在该方法的第一个参数是*类*，而不是*实例*，因此我们将习惯更改`self`为同样习惯`cls`（尽管我也见过`klass`）。可以从实例或类本身调用此方法：

```
database_instance = Database()
database_instance.connect()

Database.connect() 
```

* * *

* * *

在评论中，提到了使用模块来处理这类事情。A`module`也可以非常简单地在整个程序中传输状态，并且它们最终表现得非常像单例——事实上，它们通常被推荐用于 python 而不是单例：

```
"""
Module `Database` (found in Database.py)
"""
data = []

def connect(self, location=None):
    global data
    path = '.\\resources\\database\\'
    with open(path + 'info.csv', 'rU') as f:
        csv_data = csv.reader(f, delimiter=',')
        for row in csv_data:
            data.append(Entry(*row))
        data = data[1:] 
```

现在在另一个模块中，您只需：

```
import Database
Database.connect()
print Database.data 
```

等等等等

# magento - 如何在 Magento 中获取包裹长度、宽度和高度以进行运费估算？

> ID：14343951
> 
> 赞同：0
> 
> 时间：2013-01-15T18:03:27.287
> 
> 标签：magento, magento-1.7

我正在寻找一个片段，它将为我提供包装的长度、宽度和高度，以运送当前在购物车中的物品。

我正在创建一个运费模块，这是拼图的最后一块。

非常感谢任何信息！

杰夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T18:52:47.010

看看[@Create Shipping Method Module](http://www.magentocommerce.com/wiki/5_-_modules_and_development/shipping/create-shipping-method-module)

在`collectRates(Mage_Shipping_Model_Rate_Request $request)`您可以使用

```
 $request->getAllItems() 
```

见/app/code/core/Mage/Shipping/Model/Rate/Request.php

所以你可以循环遍历每个项目以获取它们的尺寸

```
foreach($request->getAllItems() as $item){
    //do you logic per item
     $item->getLength();
     $item->getWidth();
     $item->getHeight();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-28T20:34:22.350

上面的答案对我不起作用，也许是因为它是 5 年前写的，从那时起事情可能发生了很大变化......

它不起作用的原因是 $item 对象没有返回（长度，宽度或高度）。

我通过使用 $Item 对象中的相同 $Product 对象重新加载产品来解决它，如下所示：

```
foreach ($request->getAllItems() as $Item)
{

   $ProductID = $Item->getProductId();
   $Product = $Item->getProduct();             // Product Object

   if ($Product)
   {
       $ProductFull = $Product->load($ProductID); // This is the important part, mainly because the original $Product doesn't have the extended attributes loaded, this way we get them all and then you could read any attribute you like without having additional classes on the constructor...

       $W = $ProductFull->getWidth();
       $H = $ProductFull->getHeight();
       $D = $ProductFull->getDepth();

       $WHATEVER = $ProductFull->getWhateverCustomAttributeYouNeed();
   }
} 
```

H

# java - 如何使用休眠查询方法从多个类似记录中获取最新/顶级记录

> ID：14343961
> 
> 赞同：1
> 
> 时间：2013-01-15T18:04:14.430
> 
> 标签：java, hibernate

我的 MS SQL 2008 中有下表

**我的表**

```
----------------------
ID int (identity), 
action varchar(20),
uri int,
pid int,
url varchar(20),
lastpubdate date,
flag varchar(20) 
```

以下是表中的一些示例记录：

```
ID      action      uri     pid     url                 lastpubdate         flag
---------------------------------------------------------------------------------
1       ADD         123     233     /en/index.aspx      15 JAN 2013:09:44   NULL
2       UPD         123     233     /en/index.aspx      15 JAN 2013:10:00   NULL
3       UPD         123     233     /en/index.aspx      15 JAN 2013:10:15   NULL
4       DEL         123     233     /en/index.aspx      15 JAN 2013:10:17   NULL 
```

现在我想编写一个方法，该方法将在上表的基础上使用休眠查询返回一条记录`uri`并`pid`赋予方法，如下所示：

```
public MyTable findByLastPubDate(String uri,int pid)
{
    log.info("Entering Method: MyTable.findByLastPubDate");
    StringBuilder queryBuilder = new StringBuilder();
    queryBuilder.append("select top 1 from MyTable pa where pa.publication_id = :pid and  pa.uri = :uri and pa.flag IS NULL order by pa.last_published_date DESC");

    Map<String, Object> queryParams = new HashMap<String, Object>();
    queryParams.put("publication_id", pid);
    queryParams.put("tcmUri", uri);

    log.debug("findByLastPubDate -> queryBuilder- "+ queryBuilder.toString());        
    return executeQuerySingleResult(queryBuilder.toString(), queryParams);
} 
```

请建议上述方法是否正确或需要一些修改

**编辑：** 我想在 Hibernate 中实现以下查询

```
SELECT 
 pa.[ID]
      ,pa.[ACTION]
      ,pa.[PUBLICATION_ID]
      ,pa.[ITEM_REFERENCE_ID]
      ,pa.[ITEM_TYPE]
      ,pa.[LAST_PUBLISHED_DATE]
      ,pa.[URL]
      ,pa.[SCHEMA_ID]
      ,pa.[flag]
FROM [mytable] a
WHERE pa.ID IN
(SELECT TOP 1 b.id FROM [mytable] b WHERE b.[ITEM_REFERENCE_ID] = 342349 and
b.[PUBLICATION_ID] = 233
ORDER BY b.[LAST_PUBLISHED_DATE] DESC) 
```

**修改方法：**

```
public PublishAction findbyLatestPublishedDate(int tcmURI,int pubID) throws StorageException
    {
        log.info("Entering Method: JPAPublishActionDAO.PublishAction.findbyLatestPublishedDate");
        StringBuilder queryBuilder = new StringBuilder();
        queryBuilder.append("select pa from PublishAction pa where pa.id in(select pb.id from PublishAction pb where pb.tcmUri = :tcmURI and pb.publication_id = :pubID and rownum <= 1 order by pb.last_published_date desc)");

        Map<String, Object> queryParams = new HashMap<String, Object>();
        queryParams.put("publication_id", pubID);
        queryParams.put("tcmUri", tcmURI);

        log.debug("JPAPublishActionDAO findbyLatestPublishedDate -> queryBuilder- "+ queryBuilder.toString());        
        return executeQuerySingleResult(queryBuilder.toString(), queryParams);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T04:31:08.720

您可以尝试使用`rownum`hibernate 子句，一旦应用`order by`

```
select <entity.columns_list> 
from Entity entity 
where < where_condition > AND rownum <= 1 
```

或者在你的情况下

```
select pa from MyTable pa 
where pa.publication_id = :pid and  pa.uri = :uri 
and pa.flag IS NULL and rownum <=1
order by pa.last_published_date DESC 
```

## 编辑：

```
select pa from [mytable] pa
where pa.id in
(
    select b.id 
    from [mytable] b 
    where b.itemReferenceId = :itemReferenceId 
    and b.publicationId = :publicationId
    and rownum <= 1
    order by b.lastPublishedDate desc
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:42:59.873

我不确定您的表结构，但是您需要对数据库进行两次调用。

```
public PublishAction getLatestRecordonBasedID(int tcmURI,int pubID) throws StorageException
{
    StringBuilder queryBuilder = new StringBuilder();
    queryBuilder.append("from PublishAction pb where pb.ITEM_REFERENCE_ID = :tcmURI and pb.PUBLICATION_ID = :pubID order by pb.LAST_PUBLISHED_DATE desc");

    Map<String, Object> queryParams = new HashMap<String, Object>();   
    queryParams.put("tcmURI", tcmURI);
    queryParams.put("pubID", pubID);

    final List<PublishAction> myActions = executeQueryListResult(queryBuilder.toString(), queryParams, 1);

    if (myActions != null && !myActions.isEmpty()) 
    {
        StringBuilder queryBuilderFinal = new StringBuilder();
        queryBuilderFinal.append("select pa from PublishAction pa where pa.id=:myId");

        Map<String, Object> queryParamsFinal = new HashMap<String, Object>();   
        queryParamsFinal.put("myId", myActions.get(0).getId()); 
        return executeQuerySingleResult(queryBuilderFinal.toString(), queryParamsFinal);
    }
    else 
    {
        return null;
    }
} 
```

您可以在谷歌搜索后尝试类似上面的解决方案。

# javascript - 基于免费云数据存储的 JavaScript 错误跟踪服务

> ID：14343962
> 
> 赞同：-1
> 
> 时间：2013-01-15T18:04:16.140
> 
> 标签：javascript, web-services, parse-platform

我正在考虑构建一个 javascript 错误跟踪服务，例如[errorception.com](http://errorception.com)来跟踪客户端错误。我想使用[parse.com](http://parse.com)每月 1,000,000 个 API 请求的免费计划，因此能够以自包含可部署 js 文件的形式提供此服务。

这样的事情已经存在了吗？我见过一些 js 错误跟踪服务，但没有一个是免费的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:11:01.843

[您可以使用errbit](https://github.com/errbit/errbit)托管自己的主机。它是开源的，并且与 Airbrake（以前的[Hoptoad](http://airbrakeapp.com)）API 兼容。

显然这不是完全免费的，因为您必须支付托管费用。

# google-maps - 没有地图的谷歌地方图书馆

> ID：14343965
> 
> 赞同：90
> 
> 时间：2013-01-15T18:04:33.443
> 
> 标签：google-maps, google-places

我正在尝试将 google 地方库用于附近的搜索请求： [https ://developers.google.com/maps/documentation/javascript/places#place_search_requests](https://developers.google.com/maps/documentation/javascript/places#place_search_requests)

我只想提取 json 响应并将其放入 html 列表中，我现在想在地图或其他东西上显示结果。我根本不想使用地图。但是在文档中它指出必须有一张地图

```
service = new google.maps.places.PlacesService(**map**); 
```

为了将其作为 PlacesService 函数中的参数传递。我现在要做的是添加一个高度为 0 的地图，但它仍然会消耗大量内存（我开发了一个 sencha touch 2 应用程序，内存很重要）。有没有在没有地图的情况下使用附近搜索请求的解决方法？我不想使用 Google Places API，因为它不支持 JSONP 请求。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-01-15T19:40:59.697

正如所记录的， PlacesService 接受一个地图或一个**节点作为参数，在其中呈现结果的属性**。

所以你只需要使用节点（一个节点是一个 html 元素）而不是地图。

请注意：隐藏属性违反了场所政策（在用作参数时也会隐藏地图，因为地图会显示属性）

这也可能让您感兴趣：[Google Places API 这是否违反 TOC？](https://stackoverflow.com/questions/14313215/google-places-api-does-this-violate-the-toc/14322983#14322983)

* * *

### 示例：简而言之

如果您使用 jQuery：

```
var service = new google.maps.places.PlacesService($('#tag-id').get(0)); 
```

如果是纯 Javascript：

```
var service = new google.maps.places.PlacesService(document.createElement('div')); 
```

然后像往常一样继续[使用其余的示例代码](https://developers.google.com/maps/documentation/javascript/places#place_search_requests)：

```
 service.nearbySearch(request, callback); 
```

* * *

### 示例：使用返回的详细信息

[此示例在 jsFiddle 上的现场演示](https://jsfiddle.net/AdrienBe/Lz6sspzd/)。

注意：此示例使用`jQuery`.

```
<ul class="reviews__content" id="reviews__content">
</ul>
<div id="service-helper"></div>

<script async defer
src="https://maps.googleapis.com/maps/api/js?key=GOOGLE_API_KEY_HERE&libraries=places&callback=getRelevantGoogleReviews">
</script>
<script type="text/javascript">
   window.getRelevantGoogleReviews = function(){
     var service = new google.maps.places.PlacesService($('#service-helper').get(0)); // note that it removes the content inside div with tag '#service-helper'

     service.getDetails({
         placeId: 'ChIJAwEf5VFQqEcRollj8j_kqnE'  // get a placeId using https://developers.google.com/places/web-service/place-id
        }, function(place, status) {
            if (status === google.maps.places.PlacesServiceStatus.OK) {
              var resultcontent = '';
              for (i=0; i<place.reviews.length; ++i) {
                //window.alert('Name:' + place.name + '. ID: ' + place.place_id + '. address: ' + place.formatted_address);
                resultcontent += '<li class="reviews__item">'
                resultcontent += '<div class="reviews__review-er">' + place.reviews[i].author_name + '</div>';
                var reviewDate = new Date(place.reviews[i].time * 1000);
                var reviewDateMM = reviewDate.getMonth() + 1;
                var reviewDateFormatted = reviewDate.getDate() + '/' + reviewDateMM + '/' + reviewDate.getFullYear(); 
                resultcontent += '<div class="reviews__review-date">' + reviewDateFormatted + '</div>';
                resultcontent += '<div class="reviews__review-rating reviews__review-rating--' + place.reviews[i].rating +'"></div>';
                if (!!place.reviews[i].text){
                  resultcontent += '<div class="reviews__review-comment">' + place.reviews[i].text + '</div>';
                }
                resultcontent += '</li>'
              }
              $('#reviews__content').append(resultcontent);
            }
        });
    }
</script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-01-31T14:21:10.143

如果您想从 place_id 获取位置数据，您可以使用 Geocoder 类：[这里是文档](https://developers.google.com/maps/documentation/javascript/examples/geocoding-place-id)。使用此类，您可以将 place_id 传递给方法 geocode() 并获取坐标和其他位置数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-11T00:58:28.310

刚刚看到人在上面的评论中询问**如何在不初始化地图的情况下初始化地点服务？**所以我想我会在这里添加它。

```
placesService = new google.maps.places.PlacesService($('#predicted-places').get(0)); 
```

不过，您需要先创建一个具有该 id 的 html 元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-25T17:28:40.033

正在为注册表单制作自定义地址自动填充功能。

```
import {useState, useRef, useEffect } from 'React'

function AutoCompleteInput(){

const [predictions, setPredictions] = useState([]);
const [input, setInput] = useState('');
const [selectedPlaceDetail, addSelectedPlaceDetail] = useState({})
const predictionsRef = useRef();

useEffect(
()=>{
      try {
        autocompleteService.current.getPlacePredictions({ input }, predictions => {
          setPredictions(predictions);
        });
      } catch (err) {
       // do something
      }
    }
}, [input])

const handleAutoCompletePlaceSelected = placeId=>{
 if (window.google) {
      const PlacesService = new window.google.maps.places.PlacesService(predictionsRef.current);
      try {
        PlacesService.getDetails(
          {
            placeId,
            fields: ['address_components'],
          },
         place => addSelectedPlaceDetail(place)
        );
      } catch (e) {
        console.error(e);
      }
    }
}

return (
  <>
   <input onChange={(e)=>setInput(e.currentTarget.value)}
    <div ref={predictionsRef}
     { predictions.map(prediction => <div onClick={ ()=>handleAutoCompletePlaceSelected(suggestion.place_id)}> prediction.description </div> )
   }
   </div>
  <>
 )
} 
```

所以基本上，你设置了自动完成调用，并在你的本地状态下取回预测结果。

从那里，使用单击处理程序映射并显示结果，该处理程序将对场所服务执行后续请求，并可以访问完整地址对象或您想要的任何字段的 getDetails 方法。

然后，您将该响应保存到您当地的州，然后离开。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-08-12T14:22:05.970

我遇到了同样的问题。

> 为什么在 Places Api 已启用时使用 Maps javascript Api。是否需要为这个简单的任务支付额外费用？

此代码中未使用 Maps Javascript API。所有 google.maps.Map API 方法均已取出。它在[jsfiddle](https://jsfiddle.net)上运行良好。

只需检查它是否适用于本地 PC。大多数情况下，当我尝试在本地 PC 存储上运行它并使用谷歌 API 控制台提供的有限请求时，它会给出 403 错误。

*从 google 开发者控制台获取 API 密钥并将其插入代码脚本标签处的 YOUR_API_KEY 插槽中* *不要尝试在此处运行代码。显然。API 密钥需要更换。*

```
// This example requires the Places library. Include the libraries=places
// parameter when you first load the API. For example:
// <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places">

function initMap() {

  var input = document.getElementById('pac-input');

  var options = {
    types: ['establishment']
  };

  var autocomplete = new google.maps.places.Autocomplete(input, options);

  autocomplete.setFields(['place_id', 'geometry', 'name', 'formatted_address', 'formatted_phone_number', 'opening_hours', 'website', 'photos']);

  autocomplete.addListener('place_changed', placechange);

  function placechange() {

    var place = autocomplete.getPlace();
    var photos = place.photos;

    document.getElementById('place_name').textContent = place.name;
    document.getElementById('place_id').textContent = place.place_id;
    document.getElementById('place_address').textContent = place.formatted_address;
    document.getElementById('phone_no').textContent = place.formatted_phone_number;
    document.getElementById('open_time').textContent = place.opening_hours.weekday_text[0];
    document.getElementById('open_now').textContent = place.opening_hours.open_now;
    document.getElementById('photo').src = photos[0].getUrl();
    document.getElementById('photo').style = "width:50%;";
    document.getElementById('website').textContent = place.website;

  }
} 
```

```
/* Always set the map height explicitly to define the size of the div
 * element that contains the map. */

#map {
  height: 100%;
}

/* Optional: Makes the sample page fill the window. */

html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
}

.controls {
  background-color: #fff;
  border-radius: 2px;
  border: 1px solid transparent;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
  box-sizing: border-box;
  font-family: Roboto;
  font-size: 15px;
  font-weight: 300;
  height: 29px;
  margin-left: 5px;
  margin-top: 10px;
  margin-bottom: 10px;
  outline: none;
  padding: 0 11px 0 13px;
  text-overflow: ellipsis;
  width: 400px;
}

.controls:focus {
  border-color: #4d90fe;
}

.title {
  font-weight: bold;
}

#infowindow-content {
  display: none;
}

#map #infowindow-content {
  display: inline;
} 
```

```
<div>
  <input id="pac-input" class="controls" type="text" placeholder="Enter a business">
</div>

<div id="info-table">
  Name: <span id="place_name"></span><br> Place id: <span id="place_id"></span><br> Address :<span id="place_address"></span><br> Phone : <span id="phone_no"></span><br> Openhours: <span id="open_time"></span><br> Open Now : <span id="open_now"></span><br>  website : <span id="website"></span><br> photo :<br> <img id="photo" src="" style="display:none;" />
</div>

<div id="map"></div>
<div id="infowindow-content">
  <span id="place-name" class="title"></span><br>
  <strong>Place ID:</strong> <span id="place-id"></span><br>
  <span id="place-address"></span>
</div>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places&callback=initMap">
</script> 
```

# gwt - gwt 中同步方法的返回类型

> ID：14343970
> 
> 赞同：0
> 
> 时间：2013-01-15T18:04:49.960
> 
> 标签：gwt

我创建了一个示例 GWT 应用程序，其中同步方法返回一个列表。代码编译，我能够成功运行它。但它会在服务器端代码的客户端实现上打印“onFailure”方法中的消息。List 可以作为 GWT 中同步方法的返回类型给出吗？

# c - 低级读取文件

> ID：14343971
> 
> 赞同：-4
> 
> 时间：2013-01-15T18:04:54.843
> 
> 标签：c, linux, file

```
#include <fcntl.h> 
#include <stdio.h> 
#include <string.h> 
#include <sys/stat.h> 
#include <sys/types.h> 
#include <unistd.h> 

int main (int argc, char* argv[]) 

{

  char* filename = argv[1]; 

  /* Open the file for writing. If it exists, append to it; 

     otherwise, create a new file.  */ 

  int fd = open (filename, O_RDONLY | O_CREAT | O_APPEND, 0666); 

// Reading file probleme

  close (fd); 

  return 0; 

} 
```

我的问题是我真的找不到如何读取缓冲区。我在文件中只有整数，但我怎样才能从它读取到该缓冲区？我找不到实现这一目标的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:12:35.560

您正在寻找的功能称为“读取”。但是，您必须将之前已经分配的缓冲区传递给它。像这样的东西应该起作用：

```
if (fd) {
  char buffer[1024];
  int n = read(fd, buffer, 1024);

  /* ... */
} 
```

在该调用之后，n 将包含从 fd 读取的字节数（如果发生错误，则为 0 或小于 0）。

如果该文件中有原始整数，则可以像这样访问它们：

```
int *ibuffer = (int*)buffer; 
```

ibuffer is then an array of ints of length 1024/sizeof(int) containing the first n/sizeof(int) consecutive ints in fd. Strictly speaking this isn't quite legal C, but then I haven't seen an architecture lately where this wouldn't have worked.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:06:27.943

您是否将整数表示为字符串或字节？如果字符串只是`sscanf`在您的缓冲区上使用来读取它。对于字节表示，您可以从缓冲区中读取原始字节。

# html - 左右对齐元素

> ID：14343974
> 
> 赞同：0
> 
> 时间：2013-01-15T18:05:02.367
> 
> 标签：html, css, responsive-design

我有一个有两列的网页，一列我必须向左浮动，另一列向右浮动，这在常规网页上可以正常工作。但是，例如，当我在手机上查看它时（我有移动 jquery 和 css）所以它都适合屏幕的尺寸。而且由于两列页面不适合，它将其放在下一行，然后看起来错误，因为右侧的列然后在下一行右对齐。在不使用 float css 属性的情况下左右对齐的最佳方法是什么。我想我应该可以通过使用百分比设置边距或填充来做到这一点。关于最好的方法的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:07:16.403

为 body 设置最小宽度，以便两个 div 位于同一行。

```
body{
 min-width: 800px; //or whatever the size of the two divs is
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:07:58.977

您可能做得对，但您想删除移动设备上的浮动属性，如果您之前设置过宽度，则删除宽度以使其适合全屏，并应用边距（如有必要）。

```
@media screen and (max-width: 480px) {
    .floated-div {
        float: none;
        width: auto;
        margin: 0 1em;
    }
} 
```

你可以在这里阅读更多：http: [//css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-08T05:58:20.893

这是一个 jsbin ( [http://jsbin.com/funevi/2/edit?html,css,output](http://jsbin.com/funevi/2/edit?html,css,output) ) 展示了如何在不使用浮动或弹性框的情况下对齐同一行上的两个项目。为了使事情变得更好，使用 inline-block 而不是浮动允许左右内容相对于彼此垂直对齐。

默认设置是相对于彼此顶部对齐。但是将类 vmiddle 或 vbottom 添加到包含的 div.left-right 元素将导致左内容框和右内容框相互对齐。

box-sizing：border-box 允许我们在浏览器中安全地使用逻辑数字，并有助于防止在向左侧或右侧内容 div 添加边框或边距时内容环绕。

使用 inline-block 元素时，为了防止左右内容元素周围出现空白，容器将字体大小指定为 0。然后将内容 div 的字体大小设置为初始值。

最后，在左右内容 div 上设置颜色只是为了使左右垂直相对于彼此对齐的方式在视觉上很明显，显然不是必需的。

```
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
    div.left-right {
      box-sizing: border-box;
      display: inline-block;
      font-size: 0;
      position: relative;
      white-space: nowrap;
      width: 100%;
    }

    div.left-right div.left,
    div.left-right div.right {
      box-sizing: border-box;      
      display: inline-block;
      font-size: initial;
      position: relative;
      white-space: normal;
      width: 50%;
      vertical-align: top;
    }

    div.left-right.vmiddle div.left,
    div.left-right.vmiddle div.right {
      vertical-align: middle;
    }

    div.left-right.vbottom div.left,
    div.left-right.vbottom div.right {
      vertical-align: bottom;
    }

    div.left-right div.left {
      background: firebrick;
      text-align: left;
    }

    div.left-right div.right {
      background: forestgreen;
      text-align: right;
    }
    </style>
  </head>

  <body>
    <div class="left-right">
      <div class="left">
        <p>Paragraph 1</p>
      </div>
      <div class="right">
        <p>Paragraph 1</p>
        <p>Paragraph 2</p>        
      </div>
    </div>
  </body>
</html> 
```

# sql - 根据另一个表的查询在一个表中创建一个新列

> ID：14343979
> 
> 赞同：0
> 
> 时间：2013-01-15T18:05:29.207
> 
> 标签：sql

我有一个包含材料表的数据库。我需要创建一个新表，其中 Materials.Refines_To Rows 现在是原始的列。

例子：

```
MATERIALS TABLE
ID    NAME    REFINES_TO
1     Ore1      Nuggets
2     Ore2      Simple Paste

NEW TABLE
ID   "in this case Nuggets"   "Simple Paste"
1              5                    2 
```

这样我可以稍后在另一个表中参考制作项目所需的材料。只需要创建一次新表。我可以在以后添加任何新材料，因为它们被创建。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:18:29.933

你从哪里得到数值 5 和 2？假设材料中有一个列，名为数量，具有此值...

```
create table refines_to
(
  id integer,
  name string,
  nuggets integer,
  simple_paste integer
}

insert into refines_to (name, nuggets, simple_paste)
(select MX.name,
        (select MN.quantity from materials MN where MX.name = MN.name and MN.REFINES_TO = 'Nuggets'),
        (select MP.quantity from materials MP where MX.name = MP.name and MN.REFINES_TO = 'Simple Paste'),
 from materials MX group by name) 
```

它既不漂亮也不高效，但足以丢弃代码。

# clojure - Clojure 重新查找 reg-ex 或

> ID：14343980
> 
> 赞同：2
> 
> 时间：2013-01-15T18:05:31.647
> 
> 标签：clojure

我一直在尝试让一个简单的 reg-ex 在 Clojure 中工作，以测试一些 SQL 保留字（select、from、where 等）的字符串，但无法让它工作：

```
(defn areserved? [c]
  (re-find #"select|from|where|order by|group by" c)) 
```

（我用空格分割一个字符串，然后遍历所有单词）

帮助将不胜感激，

谢谢！

* * *

**编辑**：我的第一个目标（在只阅读了一些示例和基本 Clojure 材料之后）是解析一个字符串并为它的每个部分（即单词）返回它们在语句中的“工作”（保留字、字符串等）。 ）。

到目前为止我所拥有的：

```
(use '[clojure.string :only (join split)])

(defn isdigit? [c]
  (re-find #"[0-9]" c))

(defn isletter? [c]
  (re-find #"[a-zA-Z]" c))

(defn issymbol? [c]
  (re-find #"[\(\)\[\]!\.+-><=\?*]" c))

(defn isstring? [c]
  (re-find #"[\"']" c))

(defn areserved? [c]
  (if (re-find #"select|from|where|order by|group by" c)
      true
      false))

(defn what-is [token]
  (let [c (subs token 0 1)]
    (cond
      (isletter? c)  :word
      (areserved? c) :reserved
      (isdigit? c)   :number
      (issymbol? c) :symbol
      (isstring? c) :string)))

(defn checkr [token]
  {:token token
   :type (what-is token)})

(defn goparse [sql-str]
  (map checkr (.split sql-str " "))) 
```

感谢所有的帮助家伙！很高兴看到对这种相对较新的语言有如此多的支持（至少对我来说：））

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T18:32:16.657

我不完全确定您到底想要什么，但这里有一些变体可以将您的第一个正则表达式匹配强制为布尔值：

```
(defn areserved? [c]
  (string?
    (re-find #"select|from|where|order by|group by"c)))

(defn areserved? [c]
  (if (re-find #"select|from|where|order by|group by"c)
      true
      false)) 
```

### 更新以回应问题编辑：

感谢您发布更多代码。不幸的是，这里有许多问题，我们可以尝试通过以简单和幼稚的方式修补现有代码来解决，但它只会让您到目前为止，在您使用这种单次迭代方法遇到下一个问题之前。

@alex 是正确的，如果您已经用空格分割字符串，您的`areserved?`方法将无法匹配。`order by`也就是说，一个简单的解决方法是将`order`和`by`视为单独的关键字（它们是，即使它们总是一起出现）。

下一个问题是该`areserved?`函数将匹配字符串中的关键字，但您将它调度到`what-is`函数中的一个字符。您几乎总是在`cond`for中找到匹配项`isletter?`，因此您会将所有内容标记为“单词”。

总而言之，您似乎试图在`map`.

我不确定你这样做是否只是为了玩 Clojure 的乐趣（这令人钦佩 - 继续前进！），在这种情况下，如果你继续使用这种简单的解析方法可能并不重要......你一定会学到一些东西；但是，如果您想更进一步并更成功地解析 SQL，那么我建议您阅读一些关于**[Lexing](https://en.wikipedia.org/wiki/Lexical_analysis)**、**[解析](https://en.wikipedia.org/wiki/Parsing)**和构建**[抽象语法树](https://en.wikipedia.org/wiki/Abstract_syntax_tree)**(AST) 的内容可能会有所帮助。

Brian Carper 写过关于使用**[Clojure 的 Java 解析器生成器“ANTLR”的](http://briancarper.net/blog/554/antlr-via-clojure)**文章——它已经有几年历史了，但可能值得一看。

您还可以[从关于 lexing and parsing SQL 的 F# 编程书籍的本章](http://en.wikibooks.org/wiki/F_Sharp_Programming/Lexing_and_Parsing#Extended_Example%3a_Parsing_SQL)中获得一些可转移的想法。

# visio - 在 Visio 2010 中使用“重新布局页面”时的节点控制顺序

> ID：14343981
> 
> 赞同：2
> 
> 时间：2013-01-15T18:05:33.230
> 
> 标签：visio

抱歉，这可能不是提出这个问题的最理想场所，但我找不到更好的 SE 网站。

当我使用“重新布局页面”时，同一级别（分层）的节点被打乱，我无法控制它们。

通过重命名节点修复它们一次不起作用。它们的创建顺序和对象的 z-index 似乎也不重要。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T07:59:54.580

这很乏味，但您必须一次选择一个连接器（注意：不是每个形状），按照您想要的顺序并“将其放在前面”。我的画是一棵自上而下的树，我从（我想成为的）最左边的叶子开始，向上到根（顶部），然后从另一侧向下，一直保持连接。以这种方式设置顺序后，取消选择所有内容并重新布局。

一般来说，任何你想向右移动的形状，选择它的连接器并“带到前面”。但是，除非您系统地进行所有操作，否则很难以这种方式设置整体顺序。

我还尝试通过按所需顺序多选连接器来加快该过程，然后只进行一次“放在前面”。但是，我无法弄清楚这会产生什么订单。并且在控制单击连接器时您会错过危险，并且您认为应该重新开始，因为不再设置“顺序”。

希望能帮助到你。

# python - 以可变深度将元素插入列表的方法？

> ID：14343983
> 
> 赞同：0
> 
> 时间：2013-01-15T18:05:44.653
> 
> 标签：python, list, recursion

如何将元素插入到程序指定级别的列表中？我的解决方案不是 Pythonic：

```
def listInsertDepth(l,e,i,lvl): # Insert element e into list l at depth lvl using list of indices i
    if lvl < 0: # That is, if your depth level is invalid
        return l
    else:
        assert len(i) == lvl+1 # One index for every level, plus for the actual insertion
        s = l # A copy for tampering with
        for index in range(lvl):
            s = s[i[index]]
        s.insert(i[-1],e)
        return listInsertDepth(l,s,i[:-1],lvl-1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:08:09.847

给定一系列索引，您可以简单地遍历它们，除了最后一个以遍历嵌套结构到要插入的父列表：

```
listInsertAtDepth(lst, value, indices):
    parent = lst
    for index in indices[:-1]:
        parent = parent[index]
    parent.insert(indices[-1], value) 
```

您可以添加一个`try`,`except`组合来检测您的索引是否错误：

```
listInsertAtDepth(lst, value, indices):
    parent = lst
    try:
        for index in indices[:-1]:
            parent = parent[index]
        parent.insert(indices[-1], value)
     except IndexError:
        return None 
```

但就个人而言，我宁愿得到一个例外，也不愿像那样吞下和丢弃它。

请注意，您不应`lst`从函数返回，因为它已就地更改。就地修改列表的Python stdlib 方法（如`.append()`and `.extend()`）也不返回任何内容。

# ipod-touch - 是否可以关闭 iPod touch 上的所有声音？

> ID：14343984
> 
> 赞同：1
> 
> 时间：2013-01-15T18:05:44.733
> 
> 标签：ipod-touch, audio

我还没有 iPod touch 来测试它。我也找不到模拟器的答案。

我的应用程序向用户发送带有声音的本地通知。在 iPhone 上，您可以使用响铃/静音开关禁用所有声音。但是 iPod touch 呢？用户是否可以禁用所有声音，包括本地通知？**我知道您可以在设置 › 通知**中关闭特定应用程序的通知声音。我问的是关闭所有声音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:31:27.803

iPod Touch 上没有静音开关，所以用户只能降低音量，直到设备静音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T21:17:08.063

设置 .... 声音 ..... 铃声和警报，然后将其调低到最大，它就可以工作了 :)

# math - 如何计算相机视角（片段着色器中的每个片段）（WebGL / OpenGL）

> ID：14343991
> 
> 赞同：2
> 
> 时间：2013-01-15T18:06:00.337
> 
> 标签：math, opengl-es, webgl, raytracing, raycasting

我已经在片段着色器中给出了所有三个矩阵（模型、视图、投影）。现在我喜欢计算每个片段的视角。相机具有例如45°的视角。我该怎么做？有了这个，我喜欢模拟来自相机的观察光线原点。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:12:28.327

您需要计算的倒数`Projection · View · Model`并将其作为着色器的进一步统一提供（固定函数兼容性确实提供了 a `gl_ModelViewProjectionMatrixInverse`）。使用它来取消投影点 (0,0,0,1) 和 (0,0,-1,1)。结果是模型空间中的两个点形成一条射线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-20T23:02:08.563

你需要投影矩阵（这里我称之为“proj”）：

```
tangent_x = 1/proj[0][0];
tangent_y = 1/proj[1][1];

angle_x = arctan(tangent_x);
angle_y = arctan(tangent_y); 
```

# c# - 使用 .With 方法的 Amazon Web Services .Net SDK

> ID：14343998
> 
> 赞同：0
> 
> 时间：2013-01-15T18:06:22.923
> 
> 标签：c#, .net, amazon-web-services, amazon-s3

我注意到可以使用适用于 .Net 的 AWS 开发工具包创建的许多请求对象都具有 .With() 方法以及可以直接设置的公共属性。

我的问题是有理由使用 .With 方法而不是仅仅设置属性，即：

```
var listQueuesRequest = new ListQueuesRequest().WithQueueNamePrefix(queueNamePrefix); 
```

或者

```
var listQueuesRequest = new ListQueuesRequest() {
    QueueNamePrefix = queueNamePrefix
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T19:06:16.993

这是一种称为[方法链接](http://en.wikipedia.org/wiki/Method_chaining)的编程风格，主要源于 Java 编程，以创建[Fluent 接口](http://en.wikipedia.org/wiki/Fluent_interface)。

该`WithQueueNamePrefix()`方法将返回相同的`ListQueuesRequest`对象，以便您可以立即继续在同一对象上“链接”更多语句。这个想法是，这提高了可读性和源代码的数量，尽管不是每个人都同意。