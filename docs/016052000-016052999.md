# StackOverflow 问答 16052000-16052999

# asp.net - 谷歌地图距离矩阵

> ID：16052000
> 
> 赞同：1
> 
> 时间：2013-04-17T05:11:43.160
> 
> 标签：asp.net, vb.net, google-maps

我正在使用谷歌距离矩阵来确定用户和我们中心之间的距离。

这工作正常，但是文档指出：

“距离矩阵 API 的使用必须与谷歌地图上的信息显示相关；例如，在请求并在地图上显示这些目的地之前，确定彼此在特定驾驶时间内的起点-目的地对。使用禁止在不显示 Google 地图的应用程序中使用该服务。”

但我不确定如何“请求并在地图上显示目的地”

是否可以在我的应用程序中显示带有方向的地图？如果是这样，我从哪里开始？我一直在寻找但没有成功，所以一定是在寻找错误的东西。

微软视觉工作室 2012

ASPX.NET 应用程序 (VB)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:15:32.503

尝试使用谷歌地图图像 API

[https://developers.google.com/maps/documentation/imageapis/](https://developers.google.com/maps/documentation/imageapis/)

# android - 如何在 Android 的选项卡上更新徽章值？

> ID：16052001
> 
> 赞同：3
> 
> 时间：2013-04-17T05:11:43.580
> 
> 标签：android, tabs, tabwidget

我有`tabbar`5 个标签，我在第 4 个标签上添加了徽章。我想在对服务器执行一些操作后更新我的徽章值。但不知道如何做到这一点。我也想从不同的更新徽章值`activities`。添加徽章的代码片段`Tabbar`

```
TabWidget tabs = (TabWidget) findViewById(android.R.id.tabs);
badge = new BadgeView(context, tabs, 3);
badge.setTextSize(12);
badge.setBadgePosition(BadgeView.POSITION_TOP_RIGHT);
badge.setText(pref.getString("balance", "0"));
badge.toggle(); 
```

先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T05:44:41.293

像这样创建静态`TabWidget`对象选项卡，`TabActivity`

```
public static TabWidget tabs; 
```

在您的操作执行后从任何活动访问`tabs`对象，更新您`balance`的`SharedPreferences`. 并使用以下代码片段。

在你的另一个`Activity`.

```
TabWidget tabs = TabActivity.tabs;
badge = new BadgeView(context, tabs, 3);
badge.setTextSize(12);
badge.setBadgePosition(BadgeView.POSITION_TOP_RIGHT);
badge.setText(pref.getString("balance", "0"));
badge.toggle(); 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:22:22.270

要保存共享首选项，您必须这样做。有点像你加载它的方式。您需要使用相同的首选项。

```
 SharedPreferences prefs = mContext.getSharedPreferences("PREF_KEY", 0);
        SharedPreferences.Editor editor = prefs.edit();
        editor.putString("balance", balance_value);
        editor.commit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T08:45:45.440

分享我的一些尝试

如果您的视图是这样的布局

```
android:layout_width="0dp"<br>
android:layout_height="wrap_content"<br>
android:layout_weight="1"<br> 
```

`BadgeView`会让你的视野空白。

如何去爱？修补

```
android.view.ViewTreeObserver.OnGlobalLayoutListener 
```

像这样 ：-

```
ViewTreeObserver vto = container.getViewTreeObserver();
vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() { 
    @Override 
    public void onGlobalLayout() { 
        container.getViewTreeObserver().removeGlobalOnLayoutListener(this); 
        int width  = container.getMeasuredWidth();
        int height = container.getMeasuredHeight(); 

        LayoutParams params = target.getLayoutParams();
        params.width = width;
        params.height = height - BadgeView.this.getHeight();
        target.setLayoutParams(params);             
    } 
}); 
```

# function - VBA函数不应该返回相同的结果？

> ID：16052003
> 
> 赞同：1
> 
> 时间：2013-04-17T05:11:51.440
> 
> 标签：function, vba, row

我编写了一个函数`interpolate_part_size`，除非我单击 Excel 单元格并按 Enter，否则它不会重新计算 - 然后会给出正确的结果。该函数的目的是插入一个值，将活动单元格的当前行与参考行进行比较。

我已经尝试过`Application.Volatile`，但是对于相同的参数，它在每一行都返回相同的结果，这是不正确的。使用 F9 重新计算也不起作用。

有什么建议么？

```
Function interpolate_part_size(pp) As Double
'--- Subroutine to interpolate size

Dim part_size_high As Double
Dim part_size_low As Double
Dim pp_high As Double
Dim pp_low As Double
Dim low_index As Integer
Dim high_index As Integer
Dim current_row As Integer

With Application.WorksheetFunction

current_row = ActiveCell.Row
' match on the range of cells in the current row

high_index = .Match(pp, Worksheets("DATA").Range(Cells(current_row, 4), Cells(current_row, 29)), -1)
low_index = high_index + 1

pp_high = .Index(Worksheets("DATA").Range(Cells(current_row, 4), Cells(current_row, 29)), 1, high_index)
pp_low = .Index(Worksheets("DATA").Range(Cells(current_row, 4), Cells(current_row, 29)), 1, low_index)
part_size_high = .Index(Worksheets("DATA").Range("PSD"), 1, high_index)
part_size_low = .Index(Worksheets("DATA").Range("PSD"), 1, low_index)

End With

If pp_high = pp_low Then
    interpolate_part_size = part_size_low
    Else:
    interpolate_part_size = (pp - pp_low) / (pp_high - pp_low) * (part_size_high - part_size_low) + part_size_low
End If

End Function 
```

# backbone.js - 用主干触发动作

> ID：16052005
> 
> 赞同：0
> 
> 时间：2013-04-17T05:12:06.150
> 
> 标签：backbone.js

我用路由器设置了我的第一个小主干应用程序，看看我是否可以触发一些动作。我不能。我没有收到错误消息，但没有显示 console.log 消息。我还需要设置什么才能启动应用程序吗？

```
window.BreakfastApp = new (Backbone.Router.extend({
  routes: { "": "interest",  "products/:type": "products"},
  initialize: function(){    
    console.log("hello world");
  }, 
  start: function(){
    Backbone.history.start({pushState: true});     
  },
  interest: function(){
    console.log('interest')
  },
  products: function(type){
    console.log('product' + type )
  },
  toppings: function(){
    console.log('toppings')
  },
  results: function(){
    console.log('results')
  }
}));

$(function(){ 
 BreakfastApp.start(); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:28:04.593

[文档](http://backbonejs.org/#Router)说：

> 在页面加载期间，在您的应用程序完成所有路由器的创建后，请务必调用 Backbone.history.start() 或 Backbone.history.start({pushState: true}) 来路由初始 URL。

在您的情况下，例如：

```
var BreakfastAppRouter = Backbone.Router.extend({
    ...
});
var router = new BreakfastAppRouter();
Backbone.history.start(); 
```

应该做的工作。

# playframework - 使用 Akka 和 Websockets 玩框架

> ID：16052006
> 
> 赞同：1
> 
> 时间：2013-04-17T05:12:15.647
> 
> 标签：playframework, websocket, akka, playframework-2.1

我有一个通过 Play 2.1 连接到 javascript 前端的简单 websocket 连接设置。

我在服务器上有一个随机数生成循环，它生成一个随机数并通过 websocket 发送出去。随机数生成是在无休止的 while 循环中执行的。我创建了一个 Akka Actor，它只是通过创建的 websocket 发送它接收到的消息。

**问题**

在每次迭代中生成要通过 websocket 发送的随机数的 while 循环中，它永远不会通过 websocket 发送任何内容。当我实际限制循环以使其真正结束时，所有生成的数字都在 while 循环结束时发送，并且在每次迭代中实际上并不实时发送。我不知道如何让它工作，以便它在每次迭代中发送。

请参阅下面的代码。

**具有随机数生成器功能的应用程序框架**

```
 public class Application extends Controller {

// Default MqTT Messages Actor
static ActorRef defaultMqttActor = Akka.system().actorOf(new Props(WebsocketHandle.class));

public static WebSocket<String> realTimeChartConnection() {
    return new WebSocket<String>() {
        // called when the websocket is established
        public void onReady(WebSocket.In<String> in,
                WebSocket.Out<String> out) {
            // register a callback for processing instream events
            in.onMessage(new Callback<String>() {
                public void invoke(String event) {
                    System.out.println(event);
                }
            });

            System.out.println("Websocket Connection ready ...");

            WebsocketHandle.setWebsocketOut(out);
            sendRandomNumbers();

        }
    };
}

public static void sendRandomNumbers() {

    int prev = 50;
    while (true) {
        int y = (int) (prev + Math.random() * 10 - 5);
        if (y < 0)
            y = 0;
        if (y > 100)
            y = 100;

        defaultMqttActor.tell(""+y);
        System.out.println(""+y);
        try {
            Thread.currentThread();
            Thread.sleep(30);
        } catch (Exception e) {
            System.out.println(e.getStackTrace());
        }
    }
} 
```

}

**WebsocketHandle Actor 代码**

```
static ActorRef defaultMqttActor = Akka.system().actorOf(new Props(WebsocketHandle.class)); 
```

**WebsocketHandle**

```
public class WebsocketHandle extends UntypedActor {

public static WebSocket.Out<String> outStream;

    public static void setWebsocketOut(WebSocket.Out<String> out){
       outStream = out;
    }

    public void onReceive(Object message) throws Exception {

       outStream.write((String)message);

    } 
```

}

如您所见，actor 只是发送它在“onReceive”中接收到的消息。随机数生成循环只是“告诉”生成的数字。我不明白为什么它不通过 websocket 异步发送消息。

似乎 Websocket 正在缓冲结果......我怎样才能让 websocket 立即发送数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T17:04:38.893

我怀疑，由于您从`onReady`WebSocket 响应的方法中启动了一个无限循环，因此它的线程永远不会被释放，并且消息会排队并且永远不会发送，直到循环结束。

您正在寻找的可能是调度程序。它允许以固定的时间间隔或延迟后向参与者发送消息。改编自 Akka 官方文档：[http ://doc.akka.io/docs/akka/snapshot/java/scheduler.html](http://doc.akka.io/docs/akka/snapshot/java/scheduler.html)

```
Akka.system().scheduler().schedule(Duration.create(50, TimeUnit.MILLISECONDS),
  new Runnable() {
    @Override
    public void run() {
      defaultMqttActor.tell("" + Math.random() * 10 + 5, null);
    }
}, system.dispatcher()); 
```

# python - 在 AppEngine Blobstore 中处理 .txt 文件

> ID：16052008
> 
> 赞同：0
> 
> 时间：2013-04-17T05:12:19.593
> 
> 标签：python, google-app-engine, blobstore

参考链接中的示例： [https ://developers.google.com/appengine/docs/python/blobstore/overview](https://developers.google.com/appengine/docs/python/blobstore/overview)

在上面的示例中，创建了一个`Model`命名`_BlobInfo_`来存储 blob。

有没有办法使用用户定义的模型来存储和检索 blob：例如：

```
class DummyText(db.Model):
  ptxt = db.BlobProperty() 
```

注意：我需要处理上述模型中的“.txt”文件。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:31:14.167

对于`.txt`文件，您实际上可以使用[`TextProperty()`](https://developers.google.com/appengine/docs/python/ndb/properties)最多可以容纳 1MB的文件`db`，而`ndb`. 在后台，它们实际上存储为 blob，但由于 blob 是不可变的且无法更改，因此要容易得多。

我建议你也升级到[`ndb`](https://developers.google.com/appengine/docs/python/ndb/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T09:13:46.743

您应该[`blobstore.BlobReferenceProperty`](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses#BlobReferenceProperty)在模型中使用来存储对 blobstore 键的引用。

# php - 使用同一页面的多个版本通过 htaccess 重写 URL

> ID：16052010
> 
> 赞同：0
> 
> 时间：2013-04-17T05:12:29.023
> 
> 标签：php, apache, .htaccess, joomla

所以我做了很多研究，但由于我对操作 .htaccess 非常陌生，所以我真的找不到一个好的答案。

这是我的网站结构：

**www.kanadax.ca/index.php**是登陆页面。这是访客用户（用 Joomla 说话）在注册之前登陆页面时看到的内容。

**www.kanadax.ca/index.php/anasayfa-2**是第 1 组用户（即非付费注册人）的主页。

**www.kanadax.ca/index.php/anasayfa-3**是第 2 组用户（即付费注册人）的主页。

现在理想情况下，我想让所有这些都成为URL 栏中的**www.kanadax.ca/**。服务器应该知道将用户发送到哪一个，但最终用户应该只看到 www.kanadax.ca/。我不太确定这是否可能，所以这是我的第一个问题。如果是这样，.htaccess 应该是什么样子？

如果这是不可能的，我至少可以从每个中取出 index.php 吗？所以他们会

```
www.kanadax.ca/

www.kanadax.ca/anasayfa-2

www.kanadax.ca/anasayfa-3 
```

当然，现在 anasayfa-2 和 -3 不是很好的做法（anasayfa=home），所以如果不能简单地将所有这些都显示为 www.kanadax，如果有人能指导我删除它们，我将非常感激。钙/

我希望我能够清楚地解释事情，但请不要犹豫，提出问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:17:27.817

这通常通过启用`Use URL Rewriting`并`Search Engine Friendly URLs`在 Joomla 的全局配置设置中解决。确保你也有一个 Joomla .htaccess 文件。应该有一个提供的 htaccess.txt 文件，如果没有，您可以将其复制到 .htaccess。此外，在尝试检查更改之前，请确认您的 Joomla 缓存已被清除并且您的浏览器缓存已被清除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:17:09.767

您可以将您的`index.php`页面重定向到您的**域**

```
RewriteEngine On
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /.*index\.php\ HTTP/ 
RewriteRule ^(.*)index\.php$ http://www.kanadax.ca/$1 [R=301,L] 
```

尽管您无法将用户重定向到特定页面，因为信息存储在 joomla 会话中，您无法在`htmlaccess`此基础上制定任何规则或条件。

# ios - iOS无损图片编辑

> ID：16052015
> 
> 赞同：2
> 
> 时间：2013-04-17T05:13:02.927
> 
> 标签：ios, objective-c, image-processing

我正在为 iPhone/iPod 开发照片应用程序。

我想从 iPhone 应用程序中的大图像中获取原始数据并对其执行一些像素操作并将其写回磁盘/图库。

到目前为止，我一直在使用以下技术将从图像选择器获得的 UIImage 转换为无符号字符指针：

```
CGImageRef imageBuff = [imageBuffer CGImage];//imageBuffer is an UIImage *
CFDataRef pixelData = CGDataProviderCopyData(CGImageGetDataProvider(imageBuff));
unsigned char *input_image = (unsigned char *)CFDataGetBytePtr(pixelData);

//height & width represents the dimensions of the input image

unsigned char *resultant = (unsigned char *)malloc(height*4*width);

for (int i=0; i<height;i++)
{
    for (int j=0; j<4*width; j+=4)
    {
        resultant[i*4*width+4*(j/4)+0] = input_image[i*4*width+4*(j/4)];
        resultant[i*4*width+4*(j/4)+1] = input_image[i*4*width+4*(j/4)+1];
        resultant[i*4*width+4*(j/4)+2] = input_image[i*4*width+4*(j/4)+2];
        resultant[i*4*width+4*(j/4)+3] = 255;
    }
}
CFRelease(pixelData); 
```

我正在对*结果*进行所有操作，并使用以下方法以原始分辨率将其写回磁盘：

```
 NSData* data = UIImagePNGRepresentation(image);
    [data writeToFile:path atomically:YES]; 
```

**我想知道：**

1.  转换实际上是无损的吗？
2.  如果手头有 20-22 MP 图像...在后台线程中执行此操作是否明智？（崩溃的可能性等......我想知道这样做的最佳实践）。
3.  有没有更好的方法来实现这个*（这里需要获取像素数据）*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:35:59.270

是的，该方法是无损的，但我不确定 20-22 MP 图像。如果我想编辑大图像，我认为 Iphone 根本不是一个合适的选择！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:09:22.940

我已经成功地使用这种技术捕获和编辑高达 22 MP 的图像。

在 iPhone 4s 上进行了测试，效果很好。但是，我使用的一些效果需要 Core Image 滤镜。似乎 CIFilters 不支持超过 16 个 MP 图像。如果在大于 16MP 的图像上使用，过滤器将返回空白图像。

我仍然希望人们对 iOS 中的无损大图编辑策略发表评论。

# perl - 在perl中比较并将列中元素的计数插入到表中

> ID：16052016
> 
> 赞同：0
> 
> 时间：2013-04-17T05:13:06.863
> 
> 标签：perl, unix

我正在处理两个大型数据集（300 x 500,000），我有一个矩阵，两个数据中都有 0,1,2 和 NA 值，我想比较这些文件并计算匹配的数字这两个文件的每一行并将结果插入到输出表结果中。

```
File 1

2    1    0
0    1    1
1    0    NA

File 2

2    1    0
Na   1    1
1    NA   0 
```

如何比较每行中匹配值的计数和总和？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:21:02.227

我已经解释了您所说的“总计”的含义，并且匹配行的数量只是被转储了，但这可以满足您的要求，并且您应该能够将其应用于您的确切规格

```
#!/usr/bin/perl
#
use Data::Dumper;
use strict;
use warnings;
# open files with error checking
open(my $f1,"file1") || die "$! file1";
open(my $f2,"file2") || die "$! file2";

#hash to store count of similar rows in
my %match_count=();
#total sum
my $total=0;

#read line from each file, lower case it to ignore Na NA difference and
#chomp to remove \n so this isn't stored 
while(my $l1=lc(<$f1>)) {
    my $l2 = lc(<$f2>);
    chomp($l1);
    chomp($l2);
    #see if lines are the same
    if ($l1 eq $l2) {
        #increment counter for this line
        $match_count{$l1}++;
        #find sum of row and add to total
        my ($first,$second,$third) = split(/\s/,$l1);
        $total += $first+$second+$third;
    }
}

print "sum total of matches = $total\n";
print Dumper(\%match_count); 
```

# c++ - C++ - 对`WinMain@16 的未定义引用

> ID：16052021
> 
> 赞同：0
> 
> 时间：2013-04-17T05:13:22.653
> 
> 标签：c++, sha1

我在网站上有一个 .h 和 .cpp 代码，我正在尝试编译它们。这是包含代码的网站：[http ://raphaelcruzeiro.com/blog/implementing-a-sha1-algorithm-in-c/](http://raphaelcruzeiro.com/blog/implementing-a-sha1-algorithm-in-c/)

我正在创建一个新项目，选择“控制台应用程序”并将 .h 和 .cpp 文件添加到项目中，但是当我尝试编译时，我总是收到此错误“未定义对 `WinMain@16 的引用”。

我尝试了 DevC++ 和 Codeblocks，他们都遇到了同样的错误。

请问我想要关于如何编译这些文件的所有详细信息，是否有#include 可以使用？如果你们请一步一步做一个简单的我会很高兴。

在此网站[http://raphaelcruzeiro.com/blog/implementing-a-sha1-algorithm-in-c/](http://raphaelcruzeiro.com/blog/implementing-a-sha1-algorithm-in-c/)上，您将找到 .h 和 .cpp 代码。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T05:18:33.143

所有 C++ 程序都需要某种`main()`函数，这是它们开始执行的地方。网站上的代码没有`main()`，导致编译器抱怨（这是正确的 - 程序不知道从哪里开始）。

您需要在 .cpp 文件中添加如下内容：

```
int main(int argc, char **argv) {
  /* code to do SHA1 stuff */
  return 0;
} 
```

# c - .o 文件中的内存共享

> ID：16052022
> 
> 赞同：1
> 
> 时间：2013-04-17T05:13:25.280
> 
> 标签：c, memory, compiler-construction, linker

可以说我有一个`A.c`文件并将其编译为一个 `A.o`文件。该`A.c`文件如下：

```
int a;
void add(void)
{
} 
```

该`A.o`文件与一个`B.o`表格一起成为一个`1.exe`文件。该`A.o`文件与一个`C.o`表格一起成为一个`2.exe`文件。

我的问题是，如果我同时运行`1.exe`，这两个文件`2.exe`的地址`a`和地址是否相同？换句话说，内存中有两个还是只有一个？`add()``.exe``A.o`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:18:44.800

`a`和的地址`add`不会相同。您有两个进程，因此在此实例中内存中有两个副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T05:16:49.640

您在内存中没有任何重定位的目标文件。

^(我猜你有一个Linux系统。如果在 Windows 上，原则保持不变，但细节不同。)

链接器（调用来构建`1.exe`和`2.exe`）构建一个可执行的[ELF](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)文件（由几个段组成，特别是机器代码和只读常量数据的所谓[“文本”段，以及可变数据的](http://en.wikipedia.org/wiki/Text_segment)[“数据”段](http://en.wikipedia.org/wiki/Data_segment)）。启动该程序的[execve(2)](http://man7.org/linux/man-pages/man2/execve.2.html)系统调用是内存映射 ELF 文件的几个段（几乎就像某些`mmap(2)`系统调用一样）。

^(请注意，`.exe`对 Linux 可执行文件使用文件后缀是令人困惑且不常见的。按照惯例，Linux 可执行文件根本没有后缀，并且以小写字母开头。)

链接器已将两个文件复制并重定位`A.o`到不同的东西（因为[relocation](http://en.wikipedia.org/wiki/Relocation_%28computer_science%29)）。所以通常会发生`a`or的地址在和 in`add`中不同的情况，处理它们的机器指令也是如此。`1.exe``2.exe`

每个[进程](http://en.wikipedia.org/wiki/Process_%28computing%29)都有自己的[地址空间](http://en.wikipedia.org/wiki/Address_space)（可以通过例如[mmap(2)](http://man7.org/linux/man-pages/man2/mmap.2.html)系统调用进行更改）。键入`cat /proc/1234/maps`以了解 pid 1234 的进程的地址空间。还尝试`cat /proc/self/maps`获取运行该`cat`.

如果`A.o`你有一个*共享对象*（或动态库）而不是对象，则`libA.so`它的一些（`mmap`-ed）段将被共享（而另一些将使用[写入时复制](http://en.wikipedia.org/wiki/Copy_on_write)技术），并且一些重定位发生在动态链接时（例如，`dlopen`如果它是一个插件）。

另请阅读[Levine 关于*链接器和加载器*](http://www.iecc.com/linker/)的书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T05:20:55.993

它取决于链接...。默认情况下，链接始终是动态的，因此当您将两个 exe 文件加载到内存中时，文件 Ao 将表现为可重入函数，并且它的唯一一个实例将在内存中，由这两个 exe 文件共享。 .

它就像 printf 函数......有这么多 printf 任何差异差异文件，但一次只有一个实例在内存中运行......

可重入函数不应提供您必须处理的任何数据损坏

# javascript - 如何在画布内绘制文本框

> ID：16052024
> 
> 赞同：7
> 
> 时间：2013-04-17T05:13:44.307
> 
> 标签：javascript, jquery, html, canvas

我需要画布内的文本框。是否可以在画布内绘制文本框？

喜欢：

```
<canvas>
<input type="text">
</canvas> 
```

我不想这样回答：

```
<canvas style="background-color:blue;height:100px;width:100px">
</canvas>
<input type="text" style="z-index:101; position:absolute; top:10px; left:10px;"/> 
```

可以使用 javascript 在画布标签内绘制文本框吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T05:21:17.363

不，这是不可能的。

如果你想要这样的文本框，那么你的答案是：

1.  完全按照您展示的方式使用 CSS

2.  *   创建一个文本框类，它绘制一个矩形和一个闪烁的光标
    *   使用手写的碰撞检测来跟踪它的点击时间
    *   检测到冲突时注册和取消注册键盘事件
    *   根据输入绘制和清除文本
    *   创建一个速率限制器，这样键就不会触发太快
    *   监听“enter”或“backspace”键，`keyup`添加另一行，或删除当前文本
    *   在框内添加一个额外的点击侦听器，当它已经具有“焦点”时，尝试根据点击在画布，与矩形在画布中的位置相比，加上矩形起点和文本起点之间的“填充”，加上字符串的计算宽度
    *   如果点击的X和Y高于矩形的X，加上文本开始前的填充，但低于矩形的X，加上填充，加上文本宽度，那么你需要循环并测量文本，字符字符，直到您找到“最适合”的位置来考虑“光标”的位置，进行下一轮编辑......它必须使用鼠标和键盘作为输入，您必须创建和注册自己的事件...

与 CSS 相比，这是很多工作。

所以从技术上讲，是的，如果你愿意编写可能是数百行未压缩代码的东西，你可以做一个输入框之*类*的东西，做你画鼠标时会做的同样的事情/只使用 C++ 的空屏幕上的支持键盘的文本框...

但是您不能添加 DOM 元素并使它们成为画布的一部分，包括它们的所有事件和自然行为。

那里有一些图书馆可能会有所帮助，但我不明白为什么您要在没有充分理由的情况下完成所有这些工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-04T10:16:42.910

试试这个网站在画布上绘制文本框组件。它不是 CSS 或 HTML，小 javascript。它解释了所有关于画布中的文本。 [CanvasInput - HTML5 画布文本输入](http://goldfirestudios.com/blog/108/CanvasInput-HTML5-Canvas-Text-Input)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-22T03:13:56.780

您可以使用此库在画布中创建输入文本字段。它不像 html/css 文本框那样清晰，但它是一个好的开始。

[https://goldfirestudios.com/canvasinput-html5-canvas-text-input](https://goldfirestudios.com/canvasinput-html5-canvas-text-input)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-12-05T23:29:35.107

一种解决方法是...我认为以下解决方案效果很好，尽管您无法在 Canvas 内的文本框中键入内容，但您可以使用单独的文本框并将该文本应用于画布[http://内的文本区域www.html5canvastutorials.com/tutorials/html5-canvas-wrap-text-tutorial/](http://www.html5canvastutorials.com/tutorials/html5-canvas-wrap-text-tutorial/)。

# xcode - 组织编程代码有什么好处？

> ID：16052031
> 
> 赞同：-2
> 
> 时间：2013-04-17T05:14:22.173
> 
> 标签：xcode

为什么我们需要组织代码？组织代码的目标是什么。在成为习惯之前，组织代码是一个耗时的过程。我正在尝试估计组织任何编程代码的成本和收益

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:35:24.610

想象你在图书馆；图书馆里的书都没有整理好。如果您的工作依赖于在书籍中查找参考资料，那么您将浪费大量时间来搜索书籍。如果您只有几百本书，这可能是一个快速的过程，但是当您有数千或数万本书时，您需要确保书籍保持井井有条，以便有效地找到它们。您也可以说“整理书籍是一个耗时的过程”，但最终结果是，当/如果它们保持有序时，它可以节省您的时间。

随着软件变得越来越复杂，同样的事情也会发生。人们不想将组织不善的程序添加到组织良好的程序/代码库中。很难使用/维护复杂且组织不良（或根本没有）的程序。

如果您面临组织代码库的最大问题之一是它非常单调且耗时 - 很容易（在不知不觉中）引入导致错误的更改；这些更改应该接受大量测试（但杂乱无章的代码库不太可能具有高测试覆盖率）。被重用和/或生命周期长的杂乱无章的程序通常需要在程序生命周期内显着更多的维护时间。

如果您只是敲出一个 100 行的概念证明并且将保持独立于所有其他程序，那么您不必着迷于该程序的组织。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:19:10.303

随着时间的推移，有组织的代码比随意放置的代码更容易维护和扩展。这就是为什么程序员非常注意命名变量/方法/等的原因。好吧，保持方法简短而具体，等等。我建议阅读[Robert Martin 的 Clean Code](https://rads.stackoverflow.com/amzn/click/com/0132350882)。

# uml - 用例图？

> ID：16052035
> 
> 赞同：0
> 
> 时间：2013-04-17T05:14:32.683
> 
> 标签：uml, use-case

经过很长一段时间我正在学习UML，所以很难得到它。我徘徊在我应该画一个概括的图表或具体的图表之间，如果需要对演员进行概括怎么办。如果您为以下场景提供完美的图表，我将不胜感激。

假设您要开发一个图书馆信息系统。创建用例图以显示以下要求。

(a) 所有注册用户，包括借阅人和图书馆员，都可以登录系统，浏览标题和搜索所需的标题。

(b) 借款人可以签出和归还物品。她还可以预订图书馆当前不可用的书名。当借用人签出该标题的副本（项目）时，或通过明确的取消程序，预订会自动删除。

(c) 图书馆员具有添加借阅者、标题和项目的管理能力。有时，图书馆员自己也可以成为借款人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T05:38:58.610

用例图显示了功能与其执行者之间的关系，即参与者和用例（功能）。

演员以椭圆形显示像人类和用例的功能标题。

根据你的描述

(a) 您的注册用户是演员，登录是功能。用户将有不同的类型，在这种情况下，您可以使用继承（泛化）关系。(b) 借款人是演员。签出项目、返回项目和保留项目和取消预订是功能（用例）借用功能 <> 预订列表也受预订和取消功能的影响。因此，您有**更改预订列表**，将用于借用项目、预订和取消。(c) 这些图书馆员是用户（在 (a) 中定义的参与者）。用户可以借用标题。现在附加以下功能（用例）添加借阅者，添加标题并将项目添加到图书馆员。

在这里你会得到更多的想法

[图书馆管理系统UML](http://www.tldp.org/LDP/LG/issue67/gilliam.html)

# haskell - 是否可以重新组织嵌套元组？

> ID：16052040
> 
> 赞同：4
> 
> 时间：2013-04-17T05:14:49.030
> 
> 标签：haskell

我想做的是这样的：

取任意多态元组：

```
x = (((1, ""), Nothing), ('', 6)) 
```

并用这种类型的东西进行重组（不一定是相同的顺序，而是相同的结构。：

```
(Int, (Char, (Maybe Int, (String, (Int, ())))) 
```

我真的不知道这种模式的名称，所以我无法尽我所能使用谷歌。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T08:37:43.073

如果您只需要处理这种特定情况，即从

```
(((Int, String), Maybe Int), (Char, Int)) 
```

至

```
(Int, (Char, (Maybe Int, (String, (Int, ())))) 
```

然后，根据您是要保留`Int`-components 的顺序还是交换它们，您可以简单地使用以下两个函数之一：

```
from1 (((m, s), mb), (c, n)) = (m, (c, mb, (s, (n, ()))))
from2 (((m, s), mb), (c, n)) = (n, (c, mb, (s, (m, ())))) 
```

* * *

但我们当然可以更加雄心勃勃，瞄准更通用的解决方案；例如，[参见 Jeuring 和 Atanassow (MPC 2004)](http://dx.doi.org/10.1007/978-3-540-27764-4_4)。为此，让我们启用一些语言扩展

```
{-# LANGUAGE GADTs                #-}
{-# LANGUAGE TypeFamilies         #-}
{-# LANGUAGE TypeOperators        #-}
{-# LANGUAGE UndecidableInstances #-} 
```

并为我们可以用来表示元组类型的代码引入 GADT

```
infixr 5 :*:

data U a where
  Unit  :: U ()
  Int   :: U Int
  Char  :: U Char
  List  :: U a -> U [a]
  Maybe :: U a -> U (Maybe a)
  (:*:) :: U a -> U b -> U (a, b) 
```

例如，您示例中的目标类型现在可以由表达式编码

```
Int :*: Char :*: Maybe Int :*: string :*: Int :*: Unit 
```

类型

```
U (Int, (Char, (Maybe Int, (String, (Int, ())))) 
```

为方便起见，我们介绍

```
string :: U String
string = List Char 
```

我们进一步介绍了一种显式类型的元组值

```
data Typed where
  Typed :: U a -> a -> Typed 
```

和类型级别相等的概念：

```
infix 4 :==:

data a :==: b where
  Refl :: a :==: a 
```

有了它，我们可以对元组类型的编码定义一个异构相等检查：

```
eq :: U a -> U b -> Maybe (a :==: b)
eq Unit Unit                   = Just Refl
eq Int Int                     = Just Refl
eq Char Char                   = Just Refl
eq (List u1) (List u2)         = case eq u1 u2 of
                                   Just Refl -> Just Refl
                                   _         -> Nothing
eq (Maybe u1) (Maybe u2)       = case eq u1 u2 of
                                   Just Refl -> Just Refl
                                   _         -> Nothing
eq (u11 :*: u12) (u21 :*: u22) = case (eq u11 u21, eq u12 u22) of
                                   (Just Refl, Just Refl) -> Just Refl
                                   _                      -> Nothing
eq _ _                         = Nothing 
```

也就是说，如果和编码相同的元组类型，则`eq u1 u2`返回，否则返回。在这种情况下，构造函数充当类型检查器的证明，证明元组类型确实相同。`Just Refl``u1``u2``Nothing``Just``Refl`

现在我们希望能够将元组类型转换为“扁平化”，即右嵌套表示。为此，我们引入了一个类型族`Flatten`：

```
type family Flatten a

type instance Flatten ()           = ()
type instance Flatten Int          = Flatten (Int, ())
type instance Flatten Char         = Flatten (Char, ())
type instance Flatten [a]          = Flatten ([a], ())
type instance Flatten (Maybe a)    = Flatten (Maybe a, ())
type instance Flatten ((), a)      = Flatten a
type instance Flatten (Int, a)     = (Int, Flatten a)
type instance Flatten (Char, a)    = (Char, Flatten a)
type instance Flatten ([a], b)     = ([a], Flatten b)
type instance Flatten (Maybe a, b) = (Maybe a, Flatten b)
type instance Flatten ((a, b), c)  = Flatten (a, (b, c)) 
```

和两个函数`flattenV`和`flattenU`分别用于展平元组值及其类型的编码：

```
flattenV :: U a -> a -> Flatten a
flattenV Unit _                  = ()
flattenV Int n                   = flattenV (Int :*: Unit) (n, ())
flattenV Char c                  = flattenV (Char :*: Unit) (c, ())
flattenV (List u) xs             = flattenV (List u :*: Unit) (xs, ())
flattenV (Maybe u) mb            = flattenV (Maybe u :*: Unit) (mb, ())
flattenV (Unit :*: u) (_, x)     = flattenV u x
flattenV (Int :*: u) (n, x)      = (n, flattenV u x)
flattenV (Char :*: u) (c, x)     = (c, flattenV u x)
flattenV (List _ :*: u) (xs, x)  = (xs, flattenV u x)
flattenV (Maybe _ :*: u) (mb, x) = (mb, flattenV u x)
flattenV ((u1 :*: u2) :*: u3) ((x1, x2), x3)
                                 = flattenV (u1 :*: u2 :*: u3) (x1, (x2, x3))

flattenU :: U a -> U (Flatten a)
flattenU Unit                 = Unit
flattenU Int                  = Int :*: Unit
flattenU Char                 = Char :*: Unit
flattenU (List u)             = List u :*: Unit
flattenU (Maybe u)            = Maybe u :*: Unit
flattenU (Unit :*: u)         = flattenU u
flattenU (Int :*: u)          = Int :*: flattenU u
flattenU (Char :*: u)         = Char :*: flattenU u
flattenU (List u1 :*: u2)     = List u1 :*: flattenU u2
flattenU (Maybe u1 :*: u2)    = Maybe u1 :*: flattenU u2
flattenU ((u1 :*: u2) :*: u3) = flattenU (u1 :*: u2 :*: u3) 
```

然后将两者组合成一个函数`flatten`：

```
flatten :: U a -> a -> Typed
flatten u x = Typed (flattenU u) (flattenV u x) 
```

我们还需要一种方法来从扁平表示中恢复元组组件的原始嵌套：

```
reify :: U a -> Flatten a -> a
reify Unit _                  = ()
reify Int (n, _)              = n
reify Char (c, _)             = c
reify (List u) (xs, _)        = xs
reify (Maybe u) (mb, _)       = mb
reify (Unit :*: u) y          = ((), reify u y)
reify (Int :*: u) (n, y)      = (n, reify u y)
reify (Char :*: u) (c, y)     = (c, reify u y)
reify (List _ :*: u) (xs, y)  = (xs, reify u y)
reify (Maybe _ :*: u) (mb, y) = (mb, reify u y)
reify ((u1 :*: u2) :*: u3) y  = let (x1, (x2, x3)) = reify (u1 :*: u2 :*: u3) y
                                in  ((x1, x2), x3) 
```

现在，给定一个`u`元组组件的类型代码和一个扁平元组及其类型的编码，我们定义一个函数`select`，该函数返回所有可能的方法来从元组中选择一个类型匹配的组件`u`和剩余组件的扁平表示：

```
select :: U b -> Typed -> [(b, Typed)]
select _ (Typed Unit _)                  = []
select u2 (Typed (u11 :*: u12) (x1, x2)) =
  case u11 `eq` u2 of
    Just Refl -> (x1, Typed u12 x2) : zs
    _         -> zs
  where
    zs = [(y, Typed (u11 :*: u') (x1, x')) |
            (y, Typed u' x') <- select u2 (Typed u12 x2)] 
```

最后，我们可以定义一个函数，该函数`conv`接受两个元组类型代码和一个与第一个代码匹配的类型的元组，并将所有可能的转换返回为与第二个代码匹配的类型的元组：

```
conv :: U a -> U b -> a -> [b]
conv u1 u2 x = [reify u2 y | y <- go (flattenU u2) (flatten u1 x)]
  where
    go :: U b -> Typed -> [b]
    go Unit (Typed Unit _ ) = [()]
    go (u1 :*: u2) t        =
      [(y1, y2) | (y1, t') <- select u1 t, y2 <- go u2 t'] 
```

例如，我们有

```
conv (Int :*: Char) (Char :*: Int) (2, 'x') 
```

产量

```
[('x', 2)] 
```

回到你原来的例子，如果我们定义

```
from = conv u1 u2
  where
    u1 = ((Int :*: string) :*: Maybe Int) :*: Char :*: Int
    u2 = Int :*: Char :*: Maybe Int :*: string :*: Int :*: Unit 
```

然后

```
from (((1, ""), Nothing), (' ', 6)) 
```

产量

```
[ (1, (' ', (Nothing, ("", (6, ())))))
, (6, (' ', (Nothing, ("", (1, ())))))
] 
```

通过为可表示的元组类型引入类型类，我们可以让事情变得更好：

```
class Rep a where
  rep :: U a

instance Rep () where rep = Unit
instance Rep Int where rep = Int
instance Rep Char where rep = Char
instance Rep a => Rep [a] where rep = List rep
instance Rep a => Rep (Maybe a) where rep = Maybe rep
instance (Rep a, Rep b) => Rep (a, b) where rep = rep :*: rep 
```

这样，我们可以定义一个不需要元组类型代码的转换函数：

```
conv' :: (Rep a, Rep b) => a -> [b]
conv' = conv rep rep 
```

然后，例如

```
conv' ("foo", 'x') :: [((Char, ()), String)] 
```

产量

```
[(('x', ()), "foo")] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T05:59:56.410

我仍然是 Haskell 的新成员，但我会使用模式匹配功能来做到这一点。

```
converter :: (((Int, String), Maybe a), (Char, Int)) -> (Int, (Char, Maybe Int, (String, (Int, ()))))
converter (((i1, s), m), (c, i2)) = (i1, (c, (m, (s, (i2, ()))))) 
```

您当然可以用类型变量替换所有具体类型，它也可以工作。

```
converter :: (((a, b), c), (d, e)) -> (a, (d, c, (b, (e, ()))))
converter (((i1, s), m), (c, i2)) = (i1, (c, (m, (s, (i2, ()))))) 
```

（显然，您希望以正确的顺序获取类型并确保所有这些都可以编译。）

# javascript - 如何将 div 精确设置在大小动态变化的屏幕中心

> ID：16052044
> 
> 赞同：2
> 
> 时间：2013-04-17T05:15:02.183
> 
> 标签：javascript, jquery, css, html

我想将 div 准确地放在大小动态变化的中心。

```
<div id="containall">
  <div style="display:none" align="center" id="mainDiv">
    <div class="mainDiv" id="paste"></div>
    <div class="midDiv" id="popup"><a href="#" onClick="hideDiv();" style="font-size:20px;float:right;margin:5px 5px 0 0px;padding:5px 0px 5px 9px;background:#000;-webkit-border-radius: 16px;-moz-border-radius:16px;border-radius:16px;padding-right:10px;text-decoration:none">X</a>
        <img id="bearimage2" style="visibility:hidden;">
        <canvas id="tools_sketch" width="200" height="200"></canvas>
    </div>
 </div>
</div> 
```

我正在根据画布保存的图像动态更改画布的大小。POPUP div 的 CSS 就像

```
#popup {
    width:600px;
    height:400px;
    background:url(/BugClipper/bccss/bgtrans_bc.png);
    position:absolute;
    left:400px;
    -webkit-border-radius: 9px;
    -moz-border-radius: 9px;
    border-radius: 9px;
    margin:-600px 0 0 0;
    border:2px solid #333;
} 
```

现在，当弹出窗口大小更改为容纳画布时，它会转到屏幕的右侧，我必须滚动才能在画布上查看完整图像。

请指导我如何设置 css 使其始终显示在屏幕中间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:17:15.107

您可以将此 CSS 应用于弹出 div：

```
#popup {
    width: 50%;
    margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:26:03.523

试试这个 CSS

```
#popup {
width:50%;
height:400px;
background:url(/BugClipper/bccss/bgtrans_bc.png);

left:400px;
-webkit-border-radius: 9px;
-moz-border-radius: 9px;
border-radius: 9px;
margin:0 auto;
padding:0;
border:2px solid red;
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T06:52:58.580

尝试这个：

```
#popup {
 top: 50%;
 left: 50%;
 width: 600px;
 height: 400px;
 margin: -200px 0 0 -300px;
 position: fixed;
} 
```

**[小提琴](http://jsfiddle.net/8T2Gv/)**

# android - 如何在android中使用微调器作为时间选择器？

> ID：16052046
> 
> 赞同：0
> 
> 时间：2013-04-17T05:15:18.083
> 
> 标签：android, spinner

有没有办法在android中使用微调器作为时间选择器？如果有怎么办？如果不是为什么？

请提出建议

感谢您宝贵的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:27:45.577

`Spinner`表示值列表，用户可以从中选择一个。`Spinner`如果您让用户从一组预定义的时间值中进行选择，您可以将其用作时间选择器。但是，如果应用程序的逻辑声明用户可以选择任何时间 - 那么`Spinner`这不是一个好方法，它将包含太多的值并且不会对用户友好。

# java - 在 iText 中将图像添加到 acrofield？

> ID：16052047
> 
> 赞同：11
> 
> 时间：2013-04-17T05:15:22.830
> 
> 标签：java, pdf, itext, acrofields

我正在尝试使用 acrofields 填充 PDF，我能够完美地添加字符串数据，但在将图像添加到 acrofields 时遇到问题。这是我添加字符串数据的代码..

```
 File f = new File("F:/Test/Agreement.pdf");
    InputStream sourceTemplatePDFUrlStream = new BufferedInputStream(new FileInputStream(f));
    File destinationFile = new File("F:/Test/ag1.pdf");

    PdfReader reader = new PdfReader(sourceTemplatePDFUrlStream);
    PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(
            destinationFile));

    AcroFields form = stamper.getAcroFields();
    Image img = Image.getInstance("E:/signature/signature.png");
    Set fields = form.getFields().keySet();

    Hashtable val = new Hashtable();
    val.put("name", "xxx" );
    val.put("city_street_zip", "xxx"+"                    "+"xxx"+"                "+"xxx");
    val.put("chck_1", "Yes" );
    val.put("chck_2", "No");
    val.put("chck_3", "Yes" );
    val.put("street_address", "xxx" );
    val.put("account_num", "1234");

    Enumeration enumeration = val.keys();

    // iterate through Hashtable val keys Enumeration
    while (enumeration.hasMoreElements()) {
        String nextElement = (String) enumeration.nextElement();
        String nextElementValue = (String) val.get(nextElement);
        //System.out.println(nextElement + ":=================fillData===================:" + nextElementValue);
        form.setField(nextElement, nextElementValue);
    }

    //Form flattening makes the form non-editable and saveable with the 
    //form val filled in
    stamper.setFormFlattening(true);

    stamper.close(); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-17T09:48:53.397

执行此操作的“官方”方法是使用 Button 字段作为图像的占位符，并按照[我的书中](http://itextpdf.com/book)所述替换按钮的“图标” ：

```
PushbuttonField ad = form.getNewPushbuttonFromField(imageFieldName);
ad.setLayout(PushbuttonField.LAYOUT_ICON_ONLY);
ad.setProportionalIcon(true);
ad.setImage(Image.getInstance("E:/signature/signature.png"));
form.replacePushbuttonField("advertisement", ad.getField()); 
```

有关完整代码示例，请参阅[ReplaceIcon.java](http://itextpdf.com/examples/iia.php?id=156)。

免责声明：我是 iText 的原始开发者，也是“iText in Action”书籍的作者。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T07:43:26.400

以下解决方案有效：

```
public static void addImage(PdfStamper stamper,AcroFields form,String field,String fieldValue){
    try{
        System.out.println("Field "+field);
    java.util.List<AcroFields.FieldPosition> photograph = form.getFieldPositions(field);
    if(photograph!=null && photograph.size()>0){
    Rectangle rect= photograph.get(0).position;
    //if(StringUtils.isNotBlank(fieldValue)){
    Image img = Image.getInstance(fieldValue);
    img.scaleToFit(rect.getWidth(), rect.getHeight());
    img.setBorder(2);
    img.setAbsolutePosition(
    photograph.get(0).position.getLeft() + (rect.getWidth() - img.getScaledWidth() )
    , photograph.get(0).position.getTop() - (rect.getHeight()));
    PdfContentByte cb = stamper.getOverContent((int)photograph.get(0).page);
    cb.addImage(img);
    //}
    }
    }catch(Exception e){
        e.printStackTrace();
    }
    } 
```

调用上述方法：

```
addImage(stamper, form, "CustomerSign", "E:/signature/signature.png"); 
```

CustomerSign 是 AcroField

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:28:22.963

您可以尝试将其添加到您的代码中以添加图像

```
PdfContentByte content = stamper.getOverContent(reader.getNumberOfPages());
Image image = Image.getInstance(new URL("E:/signature/signature.png"));
image.setAbsolutePosition(450,650);
image.scaleAbsolute(200,200);
content.addImage(image);
reader.close();
return output.toByteArray(); 
```

# mysql - 如何将存储过程结果插入表中

> ID：16052056
> 
> 赞同：-2
> 
> 时间：2013-04-17T05:15:56.600
> 
> 标签：mysql, stored-procedures

我想将存储过程结果集插入表中。我的存储过程动态获取参数。请就此提出建议。

这是我的存储过程：

```
DELIMITER $$

CREATE DEFINER=`admin`@`%` PROCEDURE `usp_StuCurResDep`( IN deptkey BIGINT)
BEGIN
SELECT A.depart_key, 
       A.depart_id, 
       A.depart_name, 
       A.yr_no, 
       Sum(A.totalstudents)                                                 AS 
       TotalStudents, 
       Sum(A.passed)                                                        AS 
       Passed, 
       Ifnull(Round(( Sum(A.passed) / Sum(A.totalstudents) ) * 100, 2), '') AS 
       percent 
FROM   (SELECT c.depart_key, 
               d.depart_id, 
               d.depart_name, 
               0 AS TotalStudents, 
               0 AS Passed, 
               bs.yr_no 
        FROM   batch bat 
               INNER JOIN course c 
                       ON bat.cour_key = c.cour_key 
               INNER JOIN batch_schedule bs 
                       ON bat.bat_key = bs.bat_key 
               INNER JOIN aicte_department d 
                       ON d.depart_key = c.depart_key 
        WHERE  c.depart_key = deptkey 
               AND bat.bat_key IN (SELECT bs.bat_key 
                                   FROM   batch_schedule bs 
                                   WHERE  ( bs.start_date <= CURRENT_DATE() 
                                            AND bs.end_date >= CURRENT_DATE() )) 
        GROUP  BY c.depart_key, 
                  bs.yr_no 
        UNION ALL 
        SELECT dpt.depart_key, 
               dpt.depart_id, 
               dpt.depart_name, 
               Count(*) AS TotalStudents, 
               0        AS Passed, 
               bs.yr_no 
        FROM   exam_schedule_hdr hdr 
               INNER JOIN exam_schedule_dtl dtl 
                       ON hdr.iexamschkey = dtl.iexamschkey 
               INNER JOIN tb_examresult er 
                       ON dtl.iexamdtlkey = er.er_examschdtlkey 
               INNER JOIN tb_catalogue cat 
                       ON hdr.iexam_id = cat.catlg_key 
                          AND catlg_other = 1 
               INNER JOIN batch bat 
                       ON hdr.ibat_id = bat.bat_key 
               INNER JOIN course c 
                       ON bat.cour_key = c.cour_key 
               INNER JOIN aicte_department dpt 
                       ON c.depart_key = dpt.depart_key 
               INNER JOIN batch_schedule bs 
                       ON bat.bat_key = bs.bat_key 
                          AND hdr.ssemester = bs.sem_no 
        WHERE  c.depart_key = deptkey 
               AND er_status = 'P' 
               AND hdr.ssemester IN (SELECT DISTINCT Max(hdr.ssemester) AS 
                                                     Sem_No 
                                     FROM   exam_schedule_hdr hdr 
                                            INNER JOIN exam_schedule_dtl dtl 
                                                    ON hdr.iexamschkey = 
                                                       dtl.iexamschkey 
                                            INNER JOIN tb_examresult er 
                                                    ON dtl.iexamdtlkey = 
                                                       er.er_examschdtlkey 
                                            INNER JOIN tb_catalogue cat 
                                                    ON hdr.iexam_id = 
                                                       cat.catlg_key 
                                                       AND catlg_other = 1 
                                     WHERE  c.depart_key = deptkey 
                                            AND er_status = 'P' 
                                            AND hdr.ibat_id = bat.bat_key 
                                     GROUP  BY hdr.ibat_id) 
        GROUP  BY dpt.depart_key, 
                  bs.yr_no 
        UNION ALL 
        SELECT dpt.depart_key, 
               dpt.depart_id, 
               dpt.depart_name, 
               0        AS TotalStudents, 
               Count(*) AS Passed, 
               bs.yr_no 
        FROM   exam_schedule_hdr hdr 
               INNER JOIN exam_schedule_dtl dtl 
                       ON hdr.iexamschkey = dtl.iexamschkey 
               INNER JOIN tb_examresult er 
                       ON dtl.iexamdtlkey = er.er_examschdtlkey 
               INNER JOIN tb_catalogue cat 
                       ON hdr.iexam_id = cat.catlg_key 
                          AND catlg_other = 1 
               INNER JOIN batch bat 
                       ON hdr.ibat_id = bat.bat_key 
               INNER JOIN course c 
                       ON bat.cour_key = c.cour_key 
               INNER JOIN aicte_department dpt 
                       ON c.depart_key = dpt.depart_key 
               INNER JOIN batch_schedule bs 
                       ON bat.bat_key = bs.bat_key 
                          AND hdr.ssemester = bs.sem_no 
        WHERE  c.depart_key = deptkey 
               AND er_status = 'P' 
               AND er_passfail = 'P' 
               AND hdr.ssemester IN (SELECT DISTINCT Max(hdr.ssemester) AS 
                                                     Sem_No 
                                     FROM   exam_schedule_hdr hdr 
                                            INNER JOIN exam_schedule_dtl dtl 
                                                    ON hdr.iexamschkey = 
                                                       dtl.iexamschkey 
                                            INNER JOIN tb_examresult er 
                                                    ON dtl.iexamdtlkey = 
                                                       er.er_examschdtlkey 
                                            INNER JOIN tb_catalogue cat 
                                                    ON hdr.iexam_id = 
                                                       cat.catlg_key 
                                                       AND catlg_other = 1 
                                     WHERE  er_status = 'P' 
                                            AND hdr.ibat_id = bat.bat_key 
                                     GROUP  BY hdr.ibat_id) 
        GROUP  BY dpt.depart_key, 
                  bs.yr_no) A 
WHERE  A.yr_no IS NOT NULL 
       AND A.yr_no <> 0 
GROUP  BY A.depart_key, 
          A.yr_no 
ORDER  BY a.depart_key, 
          a.yr_no; 
END$$

DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:33:05.400

1) 创建一个包含列的表来存储 A.depart_key、A.depart_id、A.depart_name、A.yr_no 等

2）在您的 SELECT 语句上方使用 INSERT 查询，例如

```
INSERT INTO table_name 
     SELECT ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:41:03.487

添加到 Bhavik Shah 。一行一行地使用游标

# java - Selenium 脚本在 jenkins 中失败，但在本地运行良好

> ID：16052058
> 
> 赞同：2
> 
> 时间：2013-04-17T05:16:10.837
> 
> 标签：java, selenium, jenkins

我的 selenium java 脚本在本地运行良好，但在 jenkins 中运行失败。例如：

```
driver.findElement(By.xpath("//div[@id='IDName']")).click();//loads a new page
driver.findElement(By.xpath("//div[@id='TextBox']"))).sendKeys("xyz"); 
```

在 jenkins 中运行这样的脚本后，出现`Unable to locate element: "//div[@id='TextBox']"`. 但是当我在 jenkins 中再次运行相同的脚本时，它就通过了。我可以理解这是由于页面未正确加载。我在基类中使用以下命令。

```
driver.manage().timeouts().implicitlyWait(_TIMEOUT, TimeUnit.SECONDS);//_TIMEOUT = 50; 
```

我可以在 click 和 sendkeys 行之间添加`Thread.sleep()`or `driver.wait()`，但我认为这不是一个好主意，因为我有 600 多个脚本要执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:25:51.270

添加隐式等待，以确保元素已经可用，或使用睡眠

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T22:26:50.793

WebdriverWait 可能是您需要的。

这是一个很好的答案：[https ://stackoverflow.com/a/9904784/629116](https://stackoverflow.com/a/9904784/629116)

在尝试向它发送密钥之前，您需要等待“//div[@id='TextBox']”被渲染。如果可能，您可能还想考虑使用 css 选择器而不是 xpath。我发现 css 选择器的发现速度更快，并且由于它们的灵活性，通常可以承受对 DOM 的更改。

# c - c程序打开socket 25端口

> ID：16052062
> 
> 赞同：-1
> 
> 时间：2013-04-17T05:16:41.847
> 
> 标签：c, sockets, smtp, spam

我一直在开发一个我称之为 NSA（不接受垃圾邮件）的反垃圾邮件系统，用 C 语言编写（持续了 10 年）。

我的系统在网络上工作而不是内容过滤，我一直想添加一个功能，它试图打开一个到入站 SMTP 服务器（端口 25）的套接字，同时它试图将邮件传递到我们的服务器（因此是实时的）。

我试过谷歌搜索：

```
c program open socket port 25 -command -linux -c# -c++ -perl -excel -php -java -ce -script -vb -autostart.bat 
```

加上许多其他的变化，但没有快乐。有没有人有可以让我开始的代码片段？

我不想与 SMTP 服务器“通信”。我只是想确认套接字是活动的。多年来，我发现是程序发送垃圾邮件，而不是 SMTP 服务器。因此，您不能远程登录到入站服务器并进行 SMTP 对话 - HELO ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:55:56.833

您可以创建一个使用端口 25 的 TCP*服务器*。然后，您可以[`recv`](http://pubs.opengroup.org/onlinepubs/009695399/functions/recv.html)在该套接字上执行 a。如果`recv`返回 -1 并设置`errno`为`ENOTCONN`，则套接字未连接。

[这](http://www.beej.us/guide/bgnet/output/html/singlepage/bgnet.html#simpleserver)是一个示例 TCP 服务器，可帮助您入门。

# php - 服务器和本地之间的php毫秒isuse

> ID：16052066
> 
> 赞同：1
> 
> 时间：2013-04-17T05:16:54.250
> 
> 标签：php, datetime

当我在服务器上执行下面的代码时，它给了我下面的答案：

```
$date1='1367276400000';

$date2=date('Y-m-d',($date1/1000));

echo "Date -> ".$date2."-->"."\n"; 
```

**回答：** `Date -> 2013-04-29-->`

当我在本地执行相同的代码时，它给了我不同的答案：

**回答：** `Date -> 2013-04-30-->`

本地服务器 php 时区为：*Asia/Calcutta*

生产服务器时区为：*UTC*

如何在两台服务器上获得相同的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T05:19:32.630

**回答**

放在`date_default_timezone_set('UTC');`脚本的开头。

**解释**

这将导致 date 函数以 UTC 时区显示日期，而不管系统时区设置为什么。

您可以以相同的方式强制时区为亚洲/加尔各答，但既然您提到 UTC 是生产环境中的时区，我认为您应该坚持使用 UTC。与生产服务器环境相比，您通常可以更好地控制本地环境。如果您的 PHP 脚本在某些时候必须与使用系统时区的生产服务器上运行的其他一些服务进行交互，这可能很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T05:19:24.570

首先使用`date_default_timezone_set` [http://php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)之类的代码

```
 date_default_timezone_set('Asia/Calcutta');
 $date1='1367276400000';
 $date2=date('Y-m-d',($date1/1000));
 echo "Date -> ".$date2."-->"."\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T05:19:29.360

所以这

```
date_default_timezone_set('Asia/Calcutta');
$date = date("d-m-Y");  
print 'The date is: ' . $date; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T05:29:09.743

你可以使用一个`timezones`

```
$today = new DateTime(null, new DateTimeZone('America/Toronto'));
$today->setTimezone(new DateTimeZone('Asia/Calcutta'));
echo today->format('Y-m-d H:i:s); 
```

# perl - Perl URL 编码 .. URL 中的 # 问题

> ID：16052076
> 
> 赞同：0
> 
> 时间：2013-04-17T05:17:37.657
> 
> 标签：perl, url-encoding

我有一个带有空格的 URL，其中`#`我使用它来转义`URI::Escape`以获取以下内容。

[https://copy.com/1rsdM7TvVcLfGebc/name%20with%20space%20and%20%23%20in%20it.jpg](https://copy.com/1rsdM7TvVcLfGebc/name%20with%20space%20and%20%23%20in%20it.jpg) ?

注意：在我复制上述内容的原始页面中，单击链接不起作用。该页面的 HTML 显示在此处。

```
<a href=3D"https://copy.com/1rsdM7TvVcLfGebc/name%20with%20space%20and%20%23=
%20in%20it.jpg?source=3Dbsf" style=3D"color: white; font-weight: =
bold;">name with space and # in it.jpg</a> 
```

如您所见`#`，正确编码为*%23*。问题是当我单击链接时，浏览器不会将其保留为*%23*而是将其编码`#`并阻止我到达目的地。这就是链接在浏览器中的外观。您可以看到，在`#`空格也没有呈现为*%20*之后。其他浏览器的行为不同，它们都不起作用。

[https://www.copy.com/s/1rsdM7TvVcLfGebc/name%20with%20space%20and%20#](https://www.copy.com/s/1rsdM7TvVcLfGebc/name%20with%20space%20and%20#) in it.jpg

当我在浏览器中手动替换`#`为*%23*并正确按下输入时，它会将我带到页面。

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:26:53.613

不是 Perl 问题。Web 主机上的重定向已损坏！相比：

*   [https://copy.com/1rsdM7TvVcLfGebc/name%20with%20space%20and%20%23%20in%20it.jpg?source=bsf](https://copy.com/1rsdM7TvVcLfGebc/name%20with%20space%20and%20%23%20in%20it.jpg?source=bsf)
*   [https://copy.com/1rsdM7TvVcLfGebc/name%20with%20space%20and%20%23%20in%20it.jpg](https://copy.com/1rsdM7TvVcLfGebc/name%20with%20space%20and%20%23%20in%20it.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:32:12.567

不要依赖它的自动 URL 编码。您可以在每次需要使用 URL 时强制它们进行编码/解码。

为此，您可以使用 uri_escape() 和 uri_unescape() 函数。

# android - 将文本设置为片段内的文本视图

> ID：16052077
> 
> 赞同：2
> 
> 时间：2013-04-17T05:17:42.173
> 
> 标签：android, android-fragments

我在一个片段中有一个列表视图，在另一个片段中有一个文本视图。我必须在文本视图的列表视图中显示数字的平方。但是，无论如何我都会得到零，即使单击列表中的项目，文本也不会改变。

这是代码...

MainActivity.Java

```
package com.example.fragmentdemo;

public class MainActivity extends Activity implements Prime.onItemListSelectedListener{

    boolean mDualPane;
    int n;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Check that the activity is using the layout version with
        // the fragment_container FrameLayout
        if (findViewById(R.id.fragment_container) != null) {

            // However, if we're being restored from a previous state,
            // then we don't need to do anything and should return or else
            // we could end up with overlapping fragments.
            if (savedInstanceState != null) {
                return;
            }

            Prime fragmentPrime = new Prime();
            fragmentPrime.setArguments(getIntent().getExtras());
            getFragmentManager().beginTransaction()
            .add(R.id.fragment_container, fragmentPrime).commit();
        }

        Square square = (Square) getFragmentManager().findFragmentById(R.id.fragment_content_2);

        if(square != null)
        {
            // In Dual Pane Mode

            square.setSquare(n);
        }

        else
        {
            Square newFragment = (Square) getFragmentManager().findFragmentById(R.id.fragment_content_2);

            Bundle args = new Bundle();
            args.putInt("number", n);
            newFragment.setArguments(args);

            FragmentTransaction transaction = getFragmentManager().beginTransaction();

            // Replace whatever is in the fragment_container view with this fragment,
            // and add the transaction to the back stack so the user can navigate back
            transaction.replace(R.id.fragment_container, newFragment);
            transaction.addToBackStack(null);

            // Commit the transaction
            transaction.commit();

        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onItemSelected(int number) {
        // TODO Auto-generated method stub

        n = number;
    }

} 
```

Prime.Java - 第一个片段

```
package com.example.fragmentdemo;

public class Prime extends Fragment{

    ArrayList<String> alPrime = new ArrayList<String>();
    ArrayAdapter<String> ad;

    onItemListSelectedListener mCallback;

    public interface onItemListSelectedListener{
        public void onItemSelected(int number);
    }

    @Override
    public void onAttach(Activity activity) {
        // TODO Auto-generated method stub
        super.onAttach(activity);

        // This makes sure that the container activity has implemented
        // the callback interface. If not, it throws an exception
        try {
            mCallback = (onItemListSelectedListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString()
                    + " must implement onItemListSelectedListener");
        }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub

        View view = inflater.inflate(R.layout.fragment_prime_list, container, false);   

        setNumbers();

        final ListView lv = (ListView) view.findViewById(R.id.lvPrime);
        ad = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, alPrime);
        lv.setAdapter(ad);

        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                // TODO Auto-generated method stub

                mCallback.onItemSelected(Integer.parseInt(lv.getItemAtPosition(arg2).toString()));
            }
        });

        return view;
    }

    private void setNumbers() {
        // TODO Auto-generated method stub
        // Will replace this code with the logic of Prime Numbers later
        for(int i = 2; i <= 10; i++)
        {
            alPrime.add(String.valueOf(i));
        }
    }

} 
```

Square.Java - 第二个片段

```
package com.example.fragmentdemo;

public class Square extends Fragment{

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub

        View view = inflater.inflate(R.layout.fragment_prime_list, container, false);
        return view;
    }

    public void setSquare(int number)
    {
           // The toast displays zero
        Toast.makeText(getActivity(), String.valueOf(number), Toast.LENGTH_LONG).show();
        TextView txtSquare = (TextView) getView().findViewById(R.id.txtViewSquare);
        int square = number * number;

    txtSquare.setText(String.valueOf(square));      
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T05:36:11.327

当您的活动收到 onItemSelected 事件时，它不仅应该存储数字，而且如果片段已创建，还应该将其传递给第二个片段，否则，它应该创建片段并通过其参数包将数字 n 传递给它。

```
@Override
public void onItemSelected(int number) {
    // TODO Auto-generated method stub

    n = number;

    //remove this code from onCreate and put it here
    Square square = (Square) getFragmentManager().findFragmentById(R.id.fragment_content_2);

    if(square != null)
    {
        // In Dual Pane Mode
        square.setSquare(n);
    }
    else
    {
        Square newFragment = Square.newInstance(n); 

        FragmentTransaction transaction = getFragmentManager().beginTransaction();

        // Replace whatever is in the fragment_container view with this fragment,
        // and add the transaction to the back stack so the user can navigate back
        transaction.replace(R.id.fragment_container, newFragment);
        transaction.addToBackStack(null);

        // Commit the transaction
        transaction.commit();
    }
  } 
```

方形片段：

```
public Square newInstance( int n ) {
        Square newFragment = new Square();
        Bundle args = new Bundle();
        //create a constant instead of the string 'number'
        args.putInt("number", n);
        newFragment.setArguments(args);
        return newFragment;
} 
```

# ios - Facebook 注册：操作无法完成（com.facebook.sdk 错误 2）

> ID：16052078
> 
> 赞同：4
> 
> 时间：2013-04-17T05:17:45.577
> 
> 标签：ios, facebook, cordova, xcode4.6

我正在开发一个 ios phonegap 应用程序。对于注册，我使用[phonegap facebook 插件](https://github.com/phonegap/phonegap-facebook-plugin)。它第一次运行良好。但是现在当我尝试注册时它不起作用。我没有改变任何东西。我使用 Xcode 4.6.1 版和 cordova 2.4.0 版。

![在此处输入图像描述](https://i.stack.imgur.com/RghCS.png)

图显示了我的 Facebook 开发者页面。

我究竟做错了什么？

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T05:21:51.897

我认为这将解决您的问题：

1.  在您的 Facebook 帐户中访问您的 Facebook 应用程序。
2.  单击编辑您的应用程序。
3.  转到基本信息选项卡。
4.  沙盒模式：选中此项为禁用
5.  保存设置。

这对你有用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T05:23:31.910

首先确保您的 Bundle Id 应该是正确的。

并像这样更改您的设置

![在此处输入图像描述](https://i.stack.imgur.com/EPXZw.png)

更改沙盒设置已禁用。

还可以更改您的 P-list 设置

![在此处输入图像描述](https://i.stack.imgur.com/m8v89.png)

它会正常工作。如果您将再次遇到此问题，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T07:15:55.250

如果您收到警告“访问令牌已贬值”。请在您将权限传递给您的应用程序的这两行中添加或替换您的代码行

```
[FBSession.activeSession closeAndClearTokenInformation]; 

NSArray *permissions = [NSArray arrayWithObjects:@"email", nil]; 
```

如果您做的所有事情都正确，请检查“状态”值。如果是 257，那么请在您的 iPhone facebook 设置中启用您的应用程序。

这是可以帮助您更好地理解的代码

```
 [FBSession openActiveSessionWithReadPermissions:permissions allowLoginUI:YES completionHandler:^(FBSession *session,
                                                                                                     FBSessionState status, NSError *error)
     {
      if (error)
      {
              NSLog(@"error===%@   status====%u",error,status);
              // Handle errors
                 [self handleAuthError:error];
         }
         else if (FB_ISSESSIONOPENWITHSTATE(status))
         {
             [self getData];
         }
     }];

-(void)handleAuthError:(NSError *)error{
    NSString *alertMessage, *alertTitle;

    if (error.fberrorShouldNotifyUser) {
        // If the SDK has a message for the user, surface it.
        alertTitle = @"Something Went Wrong";
        alertMessage = error.fberrorUserMessage;
    } else if (error.fberrorCategory == FBErrorCategoryUserCancelled) {
        // The user has cancelled a login. You can inspect the error
        // for more context. For this sample, we will simply ignore it.
        NSLog(@"user cancelled login");
    } else {
        // For simplicity, this sample treats other errors blindly.
        alertTitle  = @"Unknown Error";
        alertMessage = @"Error. Please try again later.";
        NSLog(@"Unexpected error:%@", error);
    }

    if (alertMessage) {
        [[[UIAlertView alloc] initWithTitle:alertTitle
                                    message:alertMessage
                                   delegate:nil
                          cancelButtonTitle:@"OK"
                          otherButtonTitles:nil] show];
    }
} 
```

我希望它会奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-18T09:45:52.493

下载 Facebook 新版本，它应该可以工作。我对 sdk 版本 3.13.1 有同样的错误。然后，我用 sdk 版本 3.14.1 替换它。然后，它对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-21T13:54:28.253

还有一种情况是您的 info.plist 中的 URL 类型数组中有 2 个或更多项。Facebook 相关项目应该是第一个，否则会出现错误 2。这可能是 Facebook SDK 错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-20T07:34:25.930

这对我有用：

转到 iPhone 的设置应用程序。打开您的 Facebook 设置 向下滚动到您的应用，并确保您的应用允许 Facebook 交互。

# ruby-on-rails - 资产管道在 Rails 生产环境中不起作用

> ID：16052084
> 
> 赞同：1
> 
> 时间：2013-04-17T05:18:22.653
> 
> 标签：ruby-on-rails, capistrano, asset-pipeline, bundler, unicorn

我在使用 Rails 部署到 VPS 时遇到问题。我的应用程序在开发环境中运行良好，但是当我使用 Capistrano 推送到生产环境时，我遇到了问题。

我正在使用独角兽、rails 3.2.13 和 ruby​​ 1.9.3

我遇到的问题是，当我访问生产站点时，出现“模板丢失”错误：

```
Template is missing

Missing template site/index with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :haml]}. Searched in: * "/home/deployer/apps/my-app/releases/20130417030832/app/views" * "/home/deployer/apps/my-app/shared/bundle/ruby/1.9.1/gems/devise-2.2.3/app/views" * "/home/deployer/apps/my-app/shared/bundle/ruby/1.9.1/bundler/gems/piggybak_paypal-b892954868c7/app/views" * "/home/deployer/apps/my-app/shared/bundle/ruby/1.9.1/gems/piggybak_variants-0.0.15/app/views" * "/home/deployer/apps/my-app/shared/bundle/ruby/1.9.1/gems/piggybak-0.6.28/app/views" * "/home/deployer/apps/my-app/shared/bundle/ruby/1.9.1/bundler/gems/rails_admin-b8465f738261/app/views" * "/home/deployer/apps/my-app/shared/bundle/ruby/1.9.1/gems/kaminari-0.14.1/app/views" 
```

所以，我认为这可能是一个资产预编译问题。当我在本地开发环境中运行 rake assets:precompile 时，我遇到了问题：

```
/Users/ac/.rvm/rubies/ruby-1.9.3-p392/bin/ruby /Users/ac/.rvm/gems/ruby-1.9.3-p392/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
[RailsAdmin] RailsAdmin initialization disabled by default. Pass SKIP_RAILS_ADMIN_INITIALIZER=false if you need it.
rake aborted!
FATAL:  password authentication failed for user "deployer"
/Users/ac/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.13/lib/active_record/connection_adapters/postgresql_adapter.rb:1216:in `initialize'
/Users/ac/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.13/lib/active_record/connection_adapters/postgresql_adapter.rb:1216:in `new'
/Users/ac/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.13/lib/active_record/connection_adapters/postgresql_adapter.rb:1216:in `connect'
... 
```

deployer 是我的生产数据库用户的名称，位于生产命名空间下的 database.yml 中。我不确定它为什么要加载它。我肯定在开发模式下运行服务器。

我还在生产服务器上的 unicorn.log 文件中注意到这一点：

```
I, [2013-04-17T04:44:46.626587 #16199]  INFO -- : executing ["/home/deployer/apps/my-app/shared/bundle/ruby/1.9.1/bin/unicorn", "-D", "-c", "/home/deployer/apps/my-app/current/config/unicorn.rb", "-E", "production", {12=>#<Kgio::UNIXServer:fd 12>}] (in /home/deployer/apps/my-app/releases/20130417044320)
I, [2013-04-17T04:44:46.627160 #16199]  INFO -- : forked child re-executing...
/home/deployer/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.5/lib/bundler/definition.rb:16:in `build': /home/deployer/apps/my-app/releases/20130417020329/Gemfile not found (Bundler::GemfileNotFound)
  from /home/deployer/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.5/lib/bundler.rb:148:in `definition'
  from /home/deployer/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.5/lib/bundler.rb:116:in `setup'
  from /home/deployer/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.5/lib/bundler/setup.rb:17:in `<top (required)>'
  from /home/deployer/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
  from /home/deployer/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
E, [2013-04-17T04:44:46.777335 #18166] ERROR -- : reaped #<Process::Status: pid 16199 exit 1> exec()-ed 
```

这是我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.13'

gem 'pg'

gem 'rails_admin', :git => 'git://github.com/sferik/rails_admin.git'

gem 'piggybak', '0.6.28'
gem "piggybak_variants", '0.0.15'
gem 'piggybak_paypal', :git => 'git://github.com/timmyc/piggybak_paypal.git'

gem 'devise'
gem "cancan"

gem 'countries', :require => 'iso3166'

gem "figaro"

gem 'redactor-rails'
gem "carrierwave"
gem 'rmagick', '2.13.2'
gem "mini_magick"
gem "fog", "~> 1.3.1"

gem 'turbolinks'

gem 'tire', '0.5.7' # elastic search

gem 'kaminari'

gem "friendly_id", "~> 4.0.9"
gem 'acts-as-taggable-on', '>= 2.3.1'
gem 'acts_as_list'
gem 'meta-tags', :require => 'meta_tags'

#group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'haml-rails'
  gem 'uglifier', '>= 1.0.3'
#end

group :development do
  gem 'bullet'
  gem 'meta_request'
end

gem 'jquery-rails'

gem "unicorn-rails"

gem 'capistrano'
gem 'rvm-capistrano' 
```

想法将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:46:38.253

您好，您可以将 gem 放在资产路径之外：

```
gem "haml"

gem 'haml-rails' 
```

并取消注释asset_path

并捆绑安装

或者你可以参考：

[如何让 Haml 与 Rails 一起工作？](https://stackoverflow.com/questions/99211/how-do-i-get-haml-to-work-with-rails)

# javascript - 如果 ajax 数据为真，则重新加载页面

> ID：16052089
> 
> 赞同：0
> 
> 时间：2013-04-17T05:18:46.937
> 
> 标签：javascript, ajax, json, jquery

我在页面上有一些按钮，当用户点击它时，后台会发生一些事情并发送回确认，`True`如下表所示`{ 'foo': true }`。它现在可以工作，但现在如果 foo 为真，我需要重新加载页面。下面的代码发送请求和后台作业被执行，确认被接收并存储在`bar`但页面重新加载不起作用。我也需要这个在所有浏览器中工作。

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#myButton').bind('click', function () {
        $.get("/foo/func/", function(data) {
            bar=data.foo;
            window.location.reload();
        });
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:36:48.663

尝试以下

```
 var bar=data.foo;
 if(bar==true) 
 // if above does not work then
 // if(bar=="true") 
 {
   window.location.reload(true);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:22:34.377

使用 on method() 并使用 if 条件检查条件

```
 $(document).ready(function() {
        $('#myButton').on('click', function () {
        $.get("/foo/func/", function(data) {
            var bar=data.foo;
            if(bar)
           {
              window.location.reload(true);
           }
        });
    });
  }); 
```

# haskell - Haskell - 模棱两可的类型变量，为什么？

> ID：16052092
> 
> 赞同：12
> 
> 时间：2013-04-17T05:18:59.027
> 
> 标签：haskell, types

为什么以下编译：

```
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE OverlappingInstances #-}

class IsList a where
  isList :: a -> Bool

instance IsList a where
  isList x = False

instance IsList [a] where
  isList x = True

main = print (isList 'a') >> print (isList ['a']) 
```

但`main`改成[这样](http://ideone.com/ldZYbV)：

```
main = print (isList 42) >> print (isList [42]) 
```

给出以下错误：

```
Ambiguous type variable `a0' in the constraints:
  (Num a0) arising from the literal `42' at prog.hs:13:22-23
  (IsList a0) arising from a use of `isList' at prog.hs:13:15-20
Probable fix: add a type signature that fixes these type variable(s)
In the first argument of `isList', namely `42'
In the first argument of `print', namely `(isList 42)'
In the first argument of `(>>)', namely `print (isList 42)' 
```

`isList`肯定不在`Num`课堂上吧？如果不是，为什么会模棱两可？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T05:25:35.807

问题不在于 isList，而在于常量 42。常量 'a' 有一个具体的 Char 类型。常数 42 没有具体类型。

```
ghci> :t 42
42 :: Num a => a 
```

编译器需要一个具体的类型。如果您将 main 更改为以下内容，它将起作用：

```
main = print (isList (42 :: Int)) >> print (isList [42 :: Int]) 
```

# java - 使用 Java/Android 获取 mp3/mp4 音频/视频文件详细信息

> ID：16052093
> 
> 赞同：1
> 
> 时间：2013-04-17T05:19:00.423
> 
> 标签：java, android

我想从我的 Android 手机的另一部 Android 手机中可用的 mp3 音频文件或 mp4 视频文件中知道专辑名称、艺术家姓名、持续时间、流派等。两部手机都在同一个 LAN/WiFi 中。我使用 API`MediaMetadataRetriever`来获取这些详细信息。但是这个 API 对于从本地文件中获取歌曲细节很有用。

如果文件在网络中，如何获取歌曲详细信息。

对此有何建议？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T12:23:26.013

在本地获取详细信息并将其转换为字节并传递给客户端

# android - Android - 进程已死亡问题

> ID：16052097
> 
> 赞同：12
> 
> 时间：2013-04-17T05:19:11.700
> 
> 标签：android, logging, crash, gps, android-mediaplayer

应用程序只是崩溃并在没有太多信息的情况下完成活动。

```
04-01 13:30:43.739: W/AudioService(180): setMode() client died
04-01 13:30:43.739: W/GpsLocationProvider(180): Unneeded remove listener for uid 1000
04-01 13:30:43.739: D/libloc(180): loc_eng_stop called
04-01 13:30:43.739: I/ActivityManager(180): Process com.company.android (pid 2590)has died.
04-01 13:30:43.739: W/ActivityManager(180): Scheduling restart of crashed service com.company.android/.utilities.OurGPSService in 80000ms 
```

检索到的日志要少得多，它只是表明该进程刚刚结束并导致我们的 GPS 服务重新启动。是 ndk 崩溃还是与 MediaPlayer 相关的东西？请帮助确定问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-30T19:41:25.493

对于类似问题，我发现了 2 个不同的答案：

*   [ActivityManager 进程已死问题](https://stackoverflow.com/a/7266250/383414)
    *   引用了一个 Android 错误报告，其中重用了来自不同线程的位图
*   [Android 进程经常产生 logcat “已死亡” 消息。](https://stackoverflow.com/a/14748123/383414)
    *   声称在某些情况下这可能只是正常行为

* * *

除此之外，我正在追逐从 Android 框架中`ApplicationManager`抛出 a的崩溃。`ClassCastException`只是因为我知道我做了某种黑客攻击，我才能够确定跟踪的那部分是针对我的应用程序的。

我学到的教训是，有时崩溃日志没有您应用程序名称的证据。（另一个教训是黑客总是回来咬黑客......）

# java - Java - 使用 apache.http.client.methods.HttpPost 发送 HTTP 参数

> ID：16052102
> 
> 赞同：0
> 
> 时间：2013-04-17T05:19:23.027
> 
> 标签：java, json, apache-httpclient-4.x, arrays

我正在尝试`application/json`使用 httpclient 发送数据，我也想使用 http post 发送一些参数。

使用时如何做到这一点`apache.http.client.methods.HttpPost`。

请有人可以帮我解决这个问题。

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T05:29:55.633

我不确定您是否可以同时发送 post 参数*和*JSON，因为 JSON 字符串已经是请求正文的内容。您可以尝试将查询参数作为 URL 的一部分发送，并`StringEntity`为您的 JSON 创建一个常规：

```
String jsonString = createMyJsonString();
HttpPost post = new HttpPost(urlWithQueryParams);
post.setHeader("Content-Type", "application/json");
post.setEntity(new StringEntity(jsonString,"UTF-8")); 
```

如果您要发布到 REST 服务，通常会在 URL 路径中包含标识资源的参数。因此，如果您可以控制端点，则可以考虑使 POST url 独立于查询/发布参数。

# blackberry - 如何在黑莓中获取存储在 SD 卡中的图像数量

> ID：16052107
> 
> 赞同：0
> 
> 时间：2013-04-17T05:19:33.237
> 
> 标签：blackberry, sd-card

我正在使用`camera demo`. `Blackberry sample project`使用我`saving images in SD Card`，作为 Image0、Image1、Image2 等等.. 我想要做的，在我的应用程序的画廊类型模块中显示所有图像。有两个按钮，上一个和下一个。为此，我需要获取存储在 SD 卡中的图像数量。请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:17:10.193

当我停止在 BB 上工作时，很抱歉没有提供代码。但我猜

带有[列表枚举的](http://www.blackberry.com/developers/docs/4.2api/javax/microedition/io/file/FileConnection.html#list%28%29)[FileConnectionApi](http://www.blackberry.com/developers/docs/4.2api/javax/microedition/io/file/FileConnection.html)将解决您的问题。

甚至[使用过滤器参数进行列表枚举](http://www.blackberry.com/developers/docs/4.2api/javax/microedition/io/file/FileConnection.html#list%28java.lang.String,%20boolean%29)。

过滤器参数的描述是

> filter - 匹配所有文件和目录以进行检索的字符串。星号 ("*") 可用作通配符来表示任何字符出现 0 次或多次。

# css - Firefox 中不连贯的 .ttf 字体

> ID：16052108
> 
> 赞同：0
> 
> 时间：2013-04-17T05:19:44.847
> 
> 标签：css, fonts, font-face

我最近开始`@font-face`在我的项目中使用该属性，并且它在大多数情况下都非常有效。但是，我注意到一些 .ttf 字体文件（从 Fontsquirrel.com 下载）在 Firefox 中看起来非常不稳定，但在 Chrome 中看起来很棒。我知道 .ttf 文件应该可以在 Firefox 和 Chrome 上运行，这似乎是这种情况，但断断续续很烦人。任何人都可以为这种行为提供解决方案，并且一般来说，建议一种实现跨浏览器字体的可靠方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:03:31.223

我通过使用[fontsquirrel webfont generator](http://www.fontsquirrel.com/tools/webfont-generator)解决了我的问题。这是一个了不起的工具，我推荐给任何面临跨浏览器字体问题的人。此外，这样的格式在大多数情况下都有效：

```
@font-face {
    font-family: Roboto;
    font-style: normal;
    font-weight: normal;
    src: url('../content/Fonts/roboto-regular-webfont.eot');
    src: url('../content/Fonts/roboto-regular-webfont.eot?#iefix') format('embedded-opentype'),
        url('../content/Fonts/roboto-regular-webfont.woff') format('woff'),
         url('../content/Fonts/roboto-regular-webfont.ttf') format('truetype'),
         url('../content/Fonts/roboto-regular-webfont.svg#roboto-regular-webfont') format('svg');
} 
```

# python - Python单元测试用例中的类方法

> ID：16052109
> 
> 赞同：3
> 
> 时间：2013-04-17T05:19:47.770
> 
> 标签：python

我正在尝试在方法中模拟一个函数`setUpClass()`，然后在方法中恢复该函数`tearDownClass()`。

```
class MyClass(unittest.TestCase):

    @classmethod
    def setUpClass(cls):

        cls.save_func = module.func
        module.func = lambda: True

    @classmethod
    def tearDownClass(cls):

        module.func = cls.save_func 
```

在该`tearDownClass()`方法之后，我预计调用`module.func()`将调用实际函数。但事实并非如此。

我通过打印函数进行了一些调试。我从该`tearDownClass()`方法中得到了以下输出。

```
cls.save_func: <unbound method MyClass.save_func>
module.func:  <unbound method MyClass.save_func> 
```

我正在尝试不同的事情，我将方法从类方法更改为设置方法：

```
 def setUp(cls):

        cls.save_func = module.func
        module.func = lambda: True

    def tearDown(cls):

        module.func = cls.save_func 
```

令我惊讶的是，一切似乎都在工作。`module.func`恢复回来，当我打印它时，它给了我函数地址。

```
module.func <function func at 0x89f9a74> 
```

你能解释一下这种行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:47:39.667

因为`setUp`不是“静态” `classmethod`，所以它需要类的实例。

参考：[unittest基本例子](http://docs.python.org/2/library/unittest.html#basic-example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-10T21:18:35.637

如果没有 @classmethod 装饰器，它的工作方式会有所不同，因为在修改后的代码中，“cls”不再是类：它是实例。我们通常将实例指定为“self”，但“self”和“cls”不是 Python 中的保留字——它们只是约定。您可以将任何您想要的东西放在它们的位置，尽管这样做会导致混乱（如原始代码中所示）。

至于我认为两个版本代码输出的不一致，我无法用普通自定义类的方法重现该行为，所以它必须与unittest包有关。但是，我敢打赌这是由于类方法和实例方法之间的差异。

# java - 垃圾收集了多少内存？

> ID：16052112
> 
> 赞同：1
> 
> 时间：2013-04-17T05:20:15.170
> 
> 标签：java, performance, garbage-collection, jvm, weblogic

我想知道如何打印 JVM 详细日志文件以查看垃圾收集了多少内存。

**Q1**：如何将垃圾收集参数添加到 WebLogic 服务器

**Q2** : 如何在 Java 代码级别添加手动垃圾回收？

**Q3**：如何查找 Weblogic 服务器中配置的最大/最小 http 连接数...

请回答我的一组问题。我的申请解决起来很慢，我正在寻找这些问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:36:17.610

您可以使用以下选项：

```
-XX:PrintGCDetails 
-Xloggc:<filename>
-XX:+PrintGCDateStamps
-XX:+PrintTenuringDistribution
-XX:+PrintClassHistogramBeforeFullGC 
-XX:+PrintClassHistogramAfterFullGC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:41:23.347

*如何打印 JVM 冗长的日志文件以查看垃圾收集的内存量？* -@Nikolay Kuznetsov 在这里回答了这个问题。为了完整起见，我正在复制相同的内容。

```
-XX:PrintGCDetails 
-Xloggc:<filename>
-XX:+PrintGCDateStamps
-XX:+PrintTenuringDistribution
-XX:+PrintClassHistogramBeforeFullGC 
-XX:+PrintClassHistogramAfterFullGC 
```

*如何将垃圾收集参数添加到 Web 逻辑服务器以及如何在 Java 中的代码级别添加手动垃圾收集*

对于大多数应用服务器来说，这通常是在启动批处理文件中完成的。通常有一个`JAVA_OPTS`使用 JVM 参数设置的环境变量。windows上的一个例子是：

```
set JAVA_OPTS= %JAVA_OPTS% -XX:PrintGCDetails -Xloggc:<filename> 
```

请检查 Weblogic 启动批处理文件并将其添加到适当的位置。

*如何查找在 weblogic 服务器中配置的最大/最小 http 连接数* 我建议查阅相关的应用程序服务器特定文档。我可以找到[这个链接](http://docs.oracle.com/cd/E13222_01/wls/docs81/perform/WLSTuning.html#1136287)。请检查。

# objective-c - “格式字符串不是字符串文字（可能不安全）”

> ID：16052117
> 
> 赞同：1
> 
> 时间：2013-04-17T05:20:45.517
> 
> 标签：objective-c, cocoa, nsstring, compiler-warnings, stringwithformat

我正在使用 Xcode 4.6。我的应用程序正在设备和模拟器上运行，但在构建时收到警告：

> “格式字符串不是字符串文字（可能不安全）”

从这段代码

```
[sArray addObject:[NSString stringWithFormat:subCatName]];

l.text= [spacing stringByAppendingFormat:[mArray objectAtIndex:section]]; 
```

为什么，我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T05:24:50.010

由于您实际上并未格式化字符串，因此请执行以下操作：

```
[sArray addObject:subCatName];

l.text= [spacing stringByAppendingString:[mArray objectAtIndex:section]]; 
```

出于某种原因，`NSString stringWithFormat:`这是我在 SO 上看到的最过度使用的方法之一。仅当您实际格式化一个字符串并将一个或多个变量放入最终字符串时才应使用它。

# vim - 为什么我的跳转列表不起作用？

> ID：16052120
> 
> 赞同：4
> 
> 时间：2013-04-17T05:20:55.803
> 
> 标签：vim

当我继续打字`<C-O>`时，它只能跳回3-4个位置，然后又回到第一个位置。

以下是`:jumps`我`<C-O>`多次按下时的输出：

1\. 打开文件时：

```
:jumps
 jump line  col file/text
  96     1    0 ~/works/WebContext.h
  95     1    0 ~/works/WebProcessProxy.messages.in
...
   3     1    0 ~/works/view_messages.h
   2  1896    4 ~/works/view_messages.h
   1     1    0 set viminfo='20,\"50    " read/write a .viminfo file, don't store more
> 
```

2\. 按下`<C-O>`：

```
:jumps
 jump line  col file/text
  96     1    0 ~/works/WebContext.h
  95     1    0 ~/works/WebProcessProxy.messages.in
...
   3    59    4 ~/works/DOMWindowFileSystem.cpp
   2     1    0 ~/.vimrc
   1   115   44 ~/.vimrc
>  0     1    0 // Copyright (c) 2012 The Chromium Authors. All rights reserved.
   1  1896    4 ViewHostMsg_DidCreateInstance, 
```

3\. 再次`<C-O>`按下时，输出与`:jumps`第一步相同。

的输出`viminfo`是：

```
viminfo='100,<50,s10,h 
```

为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-19T10:19:43.470

就我而言，问题是由以下几行引起的`/usr/share/vim/vim74/ftplugin/ocaml.vim`：

```
" Get the modeline because folding depends on indentation
let s:s = line2byte(line('.'))+col('.')-1
if search('^\s*(\*:o\?caml:')
  let s:modeline = getline(".")
else
  let s:modeline = ""
endif
if s:s > 0
  exe 'goto' s:s
endif 
```

当切换到不同的文件时，这将跳转到开始读取模式行，添加到跳转列表。

# apache - 如何使用 http 请求指定 ip 和域？

> ID：16052124
> 
> 赞同：0
> 
> 时间：2013-04-17T05:20:58.857
> 
> 标签：apache, node.js, http, request

我有一个 apache 服务器并配置了一些虚拟主机。

ip 为 172.20.20.20 的 Apache 服务器。

一个域 url 是“ [http://www.atest.com/](http://www.atest.com/) ”，另一个域 url 是“ [http://www.btest.com/](http://www.btest.com/) ”

在测试环境中，我使用带有'Switchhost'插件的firefox来访问域A和域B。

它运作良好。

问题是如何通过 node.js 发出 http 请求？

我的代码在这里：

```
var options = {
    host: 'http://www.atest.com/',
    port: 80,
    path: '/msg/putMsg',
    method: 'POST'
  };

  var req = http.request(options, function(res){
    var data = '';
    res.setEncoding('utf8');

    res.on('data', function(chunk){
      data += chunk;
    });

    res.on('end', function(){

    });
  });

  req.on('error', function(err){
    console.log('problem with request: ' + e.message);
  });

  req.write(msg);
  req.end();
} 
```

此代码片段用于向域 A 发布一些消息，但 dns 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:24:13.190

尝试添加

```
172.20.20.20 www.atest.com atest.com www.btest.com btest.com 
```

到您的主机文件（Linux 上的 /etc/hosts /OSX 上的私有 /etc/hosts）

[http://en.wikipedia.org/wiki/Hosts_(file)#Location_in_the_file_system](http://en.wikipedia.org/wiki/Hosts_(file)#Location_in_the_file_system) 具有其他平台的主机文件的位置。

# vim - Put (paste) character-wise yanked text over block-wise visual selection

> ID：16052128
> 
> 赞同：2
> 
> 时间：2013-04-17T05:21:27.197
> 
> 标签：vim, vi, paste

Is there a way to easily achieve the above?

For e.g., given

```
red apple
red banana
red cucumber

The fruits are blue. 
```

Is there a way for me to yank the word "blue", then visually-select the column of "red" words and paste so that we get:

```
blue apple
blue banana
blue cucumber.

The words are blue. 
```

Right now, the first "red" gets replaced and the remaining get cleared.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T05:42:55.473

When the `red` column is selected, do the following:

```
c         " change
<C-r>0    " Ctrl+r followed by 0 inserts the last yanked text (from register 0)
<Esc>     " exit insert mode and apply change to the whole column 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:08:13.157

My [UnconditionalPaste plugin](http://www.vim.org/scripts/script.php?script_id=3355) will allow that. Select the block of `red`, then press `gr`. All words will be replaced by the previously yanked `blue`, plus the unnamed register continues to hold `blue`.

# c# - 我如何从给定时间计算不同的时区（夏令时之后）

> ID：16052137
> 
> 赞同：1
> 
> 时间：2013-04-17T05:22:37.197
> 
> 标签：c#, asp.net, datetime, dst

我有一个在线图书销售网站，管理员和实体书店位于印度，但服务器托管在美国服务器上。管理员要求创建成功订单报告，并在每天上午 11:00 和下午 4:00 给他发送两次邮件。

在上午 11:00，他应该得到下午 4:00（前一天）和上午 11:0（同一天）之间的订单列表

在下午 4:00，他应该在上午 11:00（同一天）和下午 4:00（同一天）之间获得订单列表

为了实现它，我创建了一个表，该表包含此映射的记录，例如如果在 n 时间调用页面，则应在 x 和 z 时间之间生成报告。

在页面加载中，我正在获取当前时间并获取从时间到到时间。正在使用的代码如下

```
 DateTime dt = DateTime.Now;//getting server time
    DateTime gmttime = DateTime.Now.ToUniversalTime();//getting gmt time
    DateTime indiantime = gmttime.AddHours(5).AddMinutes(30);//get india time(is always constant dont follows daylight saving)
    TimeSpan diff = dt-indiantime; // calculating the difference

    string runH = indiantime.ToString("%h"); // geting the hour component of india time
    string runTT = indiantime.ToString("tt"); //getting ap/pm component of india time
    string indiantimeformat = "dd/MM/yyyy h:m tt";
    CultureInfo c = System.Globalization.CultureInfo.InvariantCulture;
    string q = "SELECT frmH,frmTT,infrmprevious,toH,toTT,intoprevious FROM successfullordermailtiming WHERE runH = '"+runH+"' AND runTT = '"+runTT+"'";  //quering the database for getting from and when
    DataTable ddt = dtu.Table(q);
    if (ddt.Rows.Count>0)
    {
         object[] ob = ddt.Rows[0].ItemArray;
         string frmH= ob[0].ToString();
         string frmTT=ob[1].ToString();
         string infrmprevious=ob[2].ToString();

         string toH =ob[3].ToString();
         string toTT =ob[4].ToString();
         string intoprevious = ob[5].ToString();
         DateTime indianfrom = indiantime;
         if (infrmprevious == "1")
         {
              indianfrom = indiantime.AddDays(-1); // if previous the substract 1 day
         }
         DateTime indianto = indiantime;
         if (intoprevious == "1")
         {
              indianto = indianto.AddDays(-1);
         }
         //make indian frm
         string indianfrm = indianfrom.ToString("dd/MM/yyyy") + " " + frmH + ":0 " + frmTT; //making from india time
         string indiantoo = indianto.ToString("dd/MM/yyyy") + " " + toH + ":0 " + toTT; //making to india time
         indianfrom = DateTime.ParseExact(indianfrm, indiantimeformat, System.Globalization.CultureInfo.InvariantCulture);
         indianto = DateTime.ParseExact(indiantoo, indiantimeformat, System.Globalization.CultureInfo.InvariantCulture);

         DateTime serverfrm = indianfrom + diff; //calculating frm servertime
         DateTime serverto = indianto + diff;  //calculating to server time 
```

This code was working correctly till the server place adjusted there for daylight saving (Denver (MDT) ) on around 12 april.

Please tell me what i am getting wrong ? I have assumed since GMT time is always constant i calculate gmt time and then india time then from server time I substract india time(difference). I make the india time frm and to component from data base then add the calculate difference again to get the equivalent server time.. Is my logic wrong. I read about day light saving but since my country dont follow it i find it hard what it means in real terms (It says a day can be of 23 hours or 25 hours also). Please correct me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:27:25.933

**You can refer following code:**

```
 var varLondon = TimeZoneInfo.FindSystemTimeZoneById("GMT Standard Time");//Returns Timezone based on particular ID, ID can be related to pasific timezone, Indian TimeZone,etc.
        var varGoogleplex = TimeZoneInfo.FindSystemTimeZoneById("Pacific Standard Time");
        var now = DateTimeOffset.UtcNow; //Gives you local clock time for your currrent time zone
        TimeSpan TSLondonOffset = varLondon.GetUtcOffset(now); //will return you timespan of current time zone and specified one.
        TimeSpan TSGoogleplexOffset = varGoogleplex.GetUtcOffset(now); 
```

Hope its helpful.

# django - Django 字段错误无法将关键字“用户名”解析为字段。选项有：companytype、contactno、contactperson、id、jobs、user

> ID：16052139
> 
> 赞同：1
> 
> 时间：2013-04-17T05:22:48.800
> 
> 标签：django

我在执行项目时收到此错误

> /accounts/EmpReg/的 FieldError
> 无法将关键字“用户名”解析为字段。选项有：companytype、contactno、contactperson、id、jobs、user

*视图.py*

```
class User(models.Model):
    username = models.CharField(_('username'), max_length=30, unique=True)
    first_name = models.CharField(_('first name'), max_length=30, blank=True)
    last_name = models.CharField(_('last name'), max_length=30, blank=True)
    email = models.EmailField(_('e-mail address'), blank=True)
    password = models.CharField(_('password'), max_length=128)
    companyname = models.CharField(_('companyname'), max_length=50)
    usertype = models.CharField(_('usertype'), max_length=30)
    is_staff = models.BooleanField(_('staff status'), default=False)
    is_active = models.BooleanField(_('active'), default=True)
    is_superuser = models.BooleanField(_('superuser status'), default=False)
    last_login = models.DateTimeField(_('last login'), default=timezone.now)
    date_joined = models.DateTimeField(_('date joined'), default=timezone.now)
    groups = models.ManyToManyField(Group, verbose_name=_('groups'),blank=True)
    user_permissions = models.ManyToManyField(Permission,verbose_name=_('user permissions'), blank=True)

class RegistrationProfile(models.Model):
    user = models.ForeignKey(User, unique=True)
    activation_key = models.CharField(max_length=40)
    key_generated = models.DateTimeField()
    objects = RegistrationManager() 
```

*表格.py*

```
class EmpRegistrationForm(forms.Form):
    username = forms.CharField(max_length=30,widget=forms.TextInput)
    email = forms.EmailField(widget=forms.TextInput))
    password1 = forms.CharField(widget=forms.PasswordInput)
    password2 = forms.CharField(widget=forms.PasswordInput)
    usertype = forms.CharField(widget=forms.HiddenInput)
    companyname = forms.CharField(widget=forms.TextInput)
    companytype = forms.ChoiceField(choices=PREFERRED_COMPANYTYPE, widget=forms.RadioSelect())
    contactno = forms.CharField(widget=forms.TextInput)
    contactperson = forms.CharField(widget=forms.TextInput)
    tos = forms.BooleanField() 
```

*视图.py*

```
def empreg(request):
    if request.method == 'POST':
        form = EmpRegistrationForm(request.POST)
        if form.is_valid():
            user = RegistrationProfile.objects.create_inactive_user(user__username=form.cleaned_data['username'],password=form.cleaned_data['password1'],email=form.cleaned_data['email'],)
            user.companyname = form.cleaned_data['companyname']
            user.usertype = form.cleaned_data['usertype']
            user.save()
            e=EmployerReg_Form(user=user, companytype=form.cleaned_data['companytype'],contactno=form.cleaned_data['contactno'],contactperson=form.cleaned_data['contactperson'])
            e.save()
            return HttpResponseRedirect('/accounts/EmpReg_Complete/')
else:
    form = EmpRegistrationForm()
    return render_to_response('registration/empregform.html', { 'form': form }, context_instance=RequestContext(request)) 
```

*模型.py*

```
class EmployerReg_Form(models.Model):

    user = models.ForeignKey(User, unique=True)
    companytype = models.CharField(max_length=20)
    contactno = models.CharField(max_length=30)
    contactperson = models.CharField(max_length=30)

PREFERRED_COMPANYTYPE = (
('Company', 'Company'),
('Consultancy', 'Consultancy'),
) 
```

请检查上面的代码并在我出错的地方提供帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:08:34.833

在这一部分中，您将调用 EmployerReg_Form：

```
e=EmployerReg_Form(
         user=user,
         companytype=form.cleaned_data['companytype'],
         contactno=form.cleaned_data['contactno'],
         contactperson=form.cleaned_data['contactperson']
  ) 
```

当您查看模型时，您会看到用户字段是用于建模用户的外键。如果您知道 ID EmployerReg_Form 应该映射到 User 您的行将是：

```
e=EmployerReg_Form(
         user__ID=user, 
         companytype=form.cleaned_data['companytype'],
         contactno=form.cleaned_data['contactno'],
         contactperson=form.cleaned_data['contactperson']
  ) 
```

映射到名称将是这样的：

```
e=EmployerReg_Form(
         user__username=user, 
         companytype=form.cleaned_data['companytype'],
         contactno=form.cleaned_data['contactno'],
         contactperson=form.cleaned_data['contactperson']
  ) 
```

注意用户后面的双下划线。

哦，用户模型不应该在你的models.py而不是views.py中吗？

# eclipse - 对 lindo.h 中声明的函数的未定义引用

> ID：16052148
> 
> 赞同：0
> 
> 时间：2013-04-17T05:23:36.570
> 
> 标签：eclipse, undefined-function

我在这篇文章中描述了同样的问题：

[对 *.h 文件中声明的函数的未定义引用](https://stackoverflow.com/questions/7433984/undefined-reference-to-function-declared-in-h-file-c-language)

我正在使用 Eclipse 编写一个 C/C++ 项目。

我怎样才能解决同样的问题？

我尝试过：项目->属性-> c c++构建->设置->工具设置->Gcc c++库->库->库（-l）

并在 /lindoappi/bin/linux34 中添加库。

但它不起作用。我将目录添加到：

项目->属性->c c++构建->设置->工具设置->Gcc c++库->库->库搜索路径

控制台输出为：

> **** 为项目 LINDO_test 构建配置调试 ****
> 
> make all 构建目标：LINDO_test 调用：GCC C++ Linker g++ -L/home/mario/lindoapi/bin/linux32 -o"LINDO_test" ./src/LINDO_test.o ./src/test_001.o -lliblindo /usr/bin/ ld: 找不到 -lliblindo collect2: ld 返回 1 退出状态 make: *** [LINDO_test] 错误 1

以下也是一个相关的帖子： [加载共享库时出错](https://stackoverflow.com/questions/7455601/error-while-loading-shared-libraries)

还有其他建议吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:42:12.313

去：

项目-> 属性-> c c++ 构建-> 设置-> 工具设置-> Gcc c++ 链接器-> 库-> 库(-l)

将库添加为：lindo64 mosek64 以及您需要的任何内容。

然后添加：项目->属性->c c++构建->设置->工具设置->Gcc c++链接器

确保 .../lindoapi/bin/linux64 在项目 -> 属性 -> c c++ 构建 -> 设置 -> 工具设置-> Gcc c++ 链接器 -> 库 -> 库搜索路径 (-L)

将命令行模式编辑为： ${COMMAND} ${OUTPUT} ... -Wl,-rpath=/opt/lindoapi/bin/linux64 ${INPUTS}

出于某种原因，Eclipse 只允许 Wl 使用 -soname、--out-imlib 和 --output-def，因此您必须以这种方式手动执行。不干净，但它有效。

我希望这对其他用户也有用。

快乐编码。

# flot - 浮点值标签修改 [showFirstValue]

> ID：16052151
> 
> 赞同：0
> 
> 时间：2013-04-17T05:23:56.537
> 
> 标签：flot

我正在使用[flot-valuelabels 插件](https://github.com/leonardoeloy/flot-valuelabels/)并尝试向其添加小模块。如您所知，您可以获得 y 轴的最后一个值，但我首先需要。类似 showLastValue: true 的选项和类似的函数。有谁知道这样的插件/模组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:16:52.137

因为我有奉献的心情。这是3行代码。我用 标记了它们`// ADDED THIS`。[在这里](http://jsfiddle.net/Bc9nb/)拉小提琴。

```
/**
 * Value Labels Plugin for flot.
 * http://leonardoeloy.github.com/flot-valuelabels
 * http://wiki.github.com/leonardoeloy/flot-valuelabels/
 *
 * Using canvas.fillText instead of divs, which is better for printing - by Leonardo Eloy, March 2010.
 * Tested with Flot 0.6 and JQuery 1.3.2.
 *
 * Original homepage: http://sites.google.com/site/petrsstuff/projects/flotvallab
 * Released under the MIT license by Petr Blahos, December 2009.
 */
(function ($) {
    var options = {
        valueLabels: {
        show: false,
            showAsHtml: false, // Set to true if you wanna switch back to DIV usage (you need plot.css for this)
            showLastValue: false, // Use this to show the label only for the last value in the series,
            showFirstValue: false // ADDED THIS
        }
    };

    function init(plot) {
        plot.hooks.draw.push(function (plot, ctx) {
        if (!plot.getOptions().valueLabels.show) return;

            var showLastValue = plot.getOptions().valueLabels.showLastValue;
            var showFirstValue = plot.getOptions().valueLabels.showFirstValue; // ADDED THIS
            var showAsHtml = plot.getOptions().valueLabels.showAsHtml;
            var ctx = plot.getCanvas().getContext("2d");
        $.each(plot.getData(), function(ii, series) {
                    // Workaround, since Flot doesn't set this value anymore
                    series.seriesIndex = ii;
            if (showAsHtml) plot.getPlaceholder().find("#valueLabels"+ii).remove();
            var html = '<div id="valueLabels' + series.seriesIndex + '" class="valueLabels">';

            var last_val = null;
            var last_x = -1000;
            var last_y = -1000;
            for (var i = 0; i < series.data.length; ++i) {
            if (series.data[i] == null || 
                (showLastValue && i != series.data.length-1) ||
                (showFirstValue && i != 0)) // ADDED THIS           
                continue;

            var x = series.data[i][0], y = series.data[i][1];
            if (x < series.xaxis.min || x > series.xaxis.max || y < series.yaxis.min || y > series.yaxis.max)  continue;
            var val = y;

            if (series.valueLabelFunc) val = series.valueLabelFunc({ series: series, seriesIndex: ii, index: i });
            val = ""+val;

            if (val!=last_val || i==series.data.length-1) {
                var xx = series.xaxis.p2c(x)+plot.getPlotOffset().left;
                var yy = series.yaxis.p2c(y)-12+plot.getPlotOffset().top;
                if (Math.abs(yy-last_y)>20 || last_x<xx) {
                    last_val = val;
                    last_x = xx + val.length*8;
                    last_y = yy;

                                        if (!showAsHtml) {
                                            // Little 5 px padding here helps the number to get
                                            // closer to points
                                            x_pos = xx;
                                            y_pos = yy+6;

                                            // If the value is on the top of the canvas, we need
                                            // to push it down a little
                                            if (yy <= 0) y_pos = 18;
                                            // The same happens with the x axis
                                            if (xx >= plot.width()) x_pos = plot.width();

                                            ctx.fillText(val, x_pos, y_pos);                
                                        } else {
                                            var head = '<div style="left:' + xx + 'px;top:' + yy + 'px;" class="valueLabel';
                                            var tail = '">' + val + '</div>';
                                            html+= head + "Light" + tail + head + tail;
                                        }
                }
            }
            }

                    if (showAsHtml) {
                        html+= "</div>";
                        plot.getPlaceholder().append(html);
                    }
        });
        });
    }

    $.plot.plugins.push({
        init: init,
        options: options,
        name: 'valueLabels',
        version: '1.1'
    });
})(jQuery); 
```

# c++ - 在静态库中全局初始化类实例

> ID：16052153
> 
> 赞同：1
> 
> 时间：2013-04-17T05:24:06.867
> 
> 标签：c++, visual-c++, static-libraries

我正在`QTextCodec`一个静态库中实现 Qt 框架。为了让我的编解码器实现注册到`QTextCodec::codecForMib(int)`and `QTextCodec::codecForName(const char *)`，必须发生一些事情：

*   必须初始化编解码器的实例（但不一定要使用）。
*   不得删除实例或超出范围。

`QTextCodec::QTextCodec()`这似乎是由于使用已知编解码器的字典注册实例的事实。好的。因此，如果我向我的应用程序（与静态库链接）添加一个全局变量，单元测试就会成功。

但是，我宁愿在静态库中拥有全局实例，因此链接到它的应用程序不需要自己做跑腿工作。**但是我不知道如何在没有应用程序引用的情况下在静态库中初始化一个类实例**。

*除非*我在我的应用程序中引用，否则既不`QMyTextCodec x`也不`QMyTextCodec *x = new QMyTextCodec`实际初始化类的实例。*`x`*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:47:12.960

您可以通过[`#pragma`](http://msdn.microsoft.com/en-us/library/7f0aews7%28v=vs.71%29.aspx)语句将选项传递给 MSVC 链接器，并使用[`/include'](http://msdn.microsoft.com/en-us/library/2s3hwbhs%28v=vs.71%29.aspx)选项强制它链接变量。

```
#pragma comment(linker, "/INCLUDE:variable_name") 
```

`/OPT:REF`如果使用优化标志，这将覆盖该变量的删除。为了使`#pragma`语句起作用，它需要出现在链接到静态库的项目的至少一个翻译单元（源文件）中。这可以通过将其放置在保证包含在项目中的头文件中来完成。您还需要考虑名称装饰，因为`#pragma`它不会自动处理它。

`Init.cpp`

```
QMyTextCodec initvariable; 
```

`MainHeader.h`

```
#pragma comment(linker, "/INCLUDE:?initvariable@@3VQMyTextCodec@@A") 
```

然后在任何依赖静态库的项目中，只需包含`MainHeader.h`

`ExternalProjectMain.cpp`

```
#include "staticlib/MainHeader.h"
#include "something.h"
...
... 
```

注意：如果符号名称不正确，您将收到未解决的链接器错误。

## -

根据 GCC 文档，您可以使用`__attribute__`关键字完成类似的效果。*但是，我没有方便的 GCC 安装来测试它。*

```
QMyTextCodec initvariable __attribute__(externally_visible); 
```*

# facebook - 我要如何处理这个 Facebook 提醒？关于权限

> ID：16052157
> 
> 赞同：5
> 
> 时间：2013-04-17T05:24:17.820
> 
> 标签：facebook, permissions

**OAuth 对话框读取和写入权限** 您的应用似乎同时请求读取和写入权限。相反，最初请求少量权限，并在用户决定共享时请求写入权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T07:19:00.483

这似乎是 Facebook 开发人员的错误。

有人在[这里问过同样的问题](https://www.facebook.com/groups/fbdevelopers)，脸书工程师回答：

> 警报错误地发出了，我们正在努力清理它。你可以忽略它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:50:04.847

`publish_stream`当用户注册到 App 时，您不应该询问`publish_actions`或任何其他写入权限。需要时应单独询问这些许可。

根据 Facebook 工程师的说法，“您现在可以忽略它。但是当有人开始使用您的应用程序时请求读取权限是很好的。然后仅在实际需要时才请求写入权限”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T05:30:02.133

您需要设置 read_stream、publish_stream 等权限。

看看： http: [//www.masteringapi.com/tutorials/how-to-ask-for-extended-permission-in-your-facebook-application/32/](http://www.masteringapi.com/tutorials/how-to-ask-for-extended-permission-in-your-facebook-application/32/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T11:59:39.873

是的，我认为开发人员警报系统存在问题，因此您可以同时看到“立即修复”和“已解决”按钮。但我认为警报消息是真实的，它不是被错误推送的。Facebook 希望鼓励您减少最初请求的权限数量；尤其是当用户第一次登录您的应用程序时。然后，您可以在需要时请求其他权限。

这只是遵循[最低权限](http://en.wikipedia.org/wiki/Principle_of_least_privilege)安全准则的良好做法- 仅请求/允许用户完成他们需要执行的任务所需的最低权限。这样做可以最大限度地减少应用程序的漏洞。

所以我认为，如果您在第一次登录时只要求最必要的权限并且不要在同一个请求中混合权限类型（读取和写入），这将解决您的问题。

# php - 从 html dom 元素获取图片源

> ID：16052158
> 
> 赞同：1
> 
> 时间：2013-04-17T05:24:19.670
> 
> 标签：php, image, parsing, printing

我正在使用查询图像`getElementsByTagName("img")`并使用它打印它`image->src`，它不起作用。我也试过用`image->nodeValue`这个不起作用。

```
require('simple_html_dom.php');

$dom=new DOMDocument();
$dom->loadHTML( $str);       /*$str contains html output */

$xpath=new DOMXPath($dom); 
$imgfind=$dom->getElementsByTagName('img');  /*finding elements by tag name img*/

foreach($imgfind as $im)
{
    echo $im->src;        /*this doesnt work  */   
    /*echo $im->nodeValue;  and also this doesnt work (i tried both of them             separately ,Neither of them worked)*/

    // echo "<img src=".$im->nodeValue."</img><br>"; //This also did not work
}

/*the image is encolsed within div tags.so i tried to query value of div and print but still image was not printed*/

$printimage=$xpath->query('//div[@class="abc"]'); 
foreach($printimage as $image)
{
    echo $image->src;   //still i could not accomplish my task
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T08:50:57.503

好的，使用它来显示您的图像：

```
foreach($imgfind as $im)
{
  echo "<img src=".$im->getAttribute('src')."/>"; //use this instead of echo $im->src;
} 
```

它肯定会显示您的图像。**确保图像的路径正确**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-17T05:11:48.520

埃斯佩罗特西瓦

```
 $dom = new DOMDocument();
  $filename = "https://www.amazon.com/dp/B0896WB9XD/";
  $html = file_get_contents($filename);

  @$dom->loadHTML($html);

$imgfind=$dom->getElementsByTagName('img');
foreach($imgfind as $im)
{
    $ids= $im->getAttribute('id'); 

    if ($ids == 'landingImage') {
        $im2 = $im->getAttribute('src'); 
       echo '<img src="'.$im2.'">';
    }
    else{

    }
} 
```

对亚马逊。

# c++ - 使用 typeid 时获取不正确的类名 -

> ID：16052163
> 
> 赞同：-1
> 
> 时间：2013-04-17T05:24:31.770
> 
> 标签：c++, typeid

为了我自己的理解，我已经实现了以下程序。但是我看到 typeid 返回的类名略有修改。我知道这可能是因为名称修改，但包括 extern C 也无济于事。

有人可以帮我理解为什么会出现这种行为以及如何解决吗？

g++ 版本 - 4.7.0

```
#include <iostream>
#include <typeinfo>

using namespace std;

class Base
{
    public:
        virtual ~Base(){}
};

class Derive : public Base
{
    public:
        ~Derive(){}
};

class newBase
{
    public:
        ~newBase(){}
};

class newDerive : public newBase
{
    public:
        ~newDerive(){}
};

int main()
{
    Base base;
    Derive derive;
    Base *pBase;
    Base & rBase1 = base;
    Base & rBase2 = derive;

    newBase newbase;
    newDerive newderive;
    newBase *pNewBase;

    //Results with polymorphic class.
    pBase = &base;
    cout<<"Base class pointer pBase contains object of type "<<typeid(*pBase).name()            <<".\n";

    pBase = &derive;
    cout<<"Base class pointer pBase contains object of type "<<typeid(*pBase).name()<<".\n";

    cout<<"\nReference variable rBase1 referring to "<<typeid(rBase1).name()<<".\n";
    cout<<"Reference variable rBase2 referring to "<<typeid(rBase2).name()<<".\n";

    //Results with non-polymorphic class.
    pNewBase = &newbase;
    cout<<"\nBase class pointer pNewBase contains object of type "<<typeid(*pNewBase).name()<<".\n";

    pNewBase = &newderive;
    cout<<"Base class pointer pNewBase contains object of type "<<typeid(*pNewBase).name()<<".\n";

    return 0;
}

Output -
Base class pointer pBase contains object of type 4Base.
Base class pointer pBase contains object of type 6Derive.

Reference variable rBase1 referring to 4Base.
Reference variable rBase2 referring to 6Derive.

Base class pointer pNewBase contains object of type 7newBase.
Base class pointer pNewBase contains object of type 7newBase. 
```

我期待程序中指定的类名。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T05:47:28.347

对`type_info::name()`外观没有要求。

> `typeid`表达式的结果是静态类型`const std::type_info`(18.7.1) 和动态类型 的左值，`const std::type_info`或者`const name`其中 name 是公开派生自的实现定义的类 `std::type_info`

然后，关于`std::type_info::name()`：

> `const char* name() const;`
> 
> *返回：*实现定义的 NTBS。
> 
> [...]

*NTBS*只是*空终止字节字符串*的简写。

换句话说：你不应该依赖`type_info::name()`.

### 您使用 g++ 实际看到的内容：

这些名称是[重整名称](http://en.wikipedia.org/wiki/Name_mangling)，而 g++ 对此类重整名称的实现是基于[长度前缀的字符串](https://en.wikipedia.org/wiki/String_%28computer_science%29#Length-prefixed)，其中每个子字符串都是命名空间名称，加上一些其他信息；但基本上就是这样。

例如：

```
unmangled: foo::bar::Frob
mangled:   3foo3bar4Frob 
```

放入编译器的示例：

```
#include <iostream>
#include <typeinfo>

namespace foo { namespace bar { 
    enum Frob {};
    class Frobnicate {};
    Frob frob;

    template <typename T> void Meh() { throw T(); }
} }

int main () {
    std::cout << typeid(foo::bar::Frob).name() << '\n'
              << typeid(foo::bar::Frobnicate).name()  << '\n'  
              << typeid(foo::bar::frob).name() << '\n'
              << typeid(foo::bar::Meh<int>).name() << '\n'
              << typeid(foo::bar::Meh<float>).name() << '\n'
    ;
} 
```

为我输出：

```
N3foo3bar4FrobE
N3foo3bar10FrobnicateE
N3foo3bar4FrobE
FvvE
FvvE 
```

后两者向您表明，甚至不能依赖名称不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T06:28:31.297

如果您对“解构”名称感兴趣，g++ 有一个特定于编译器的函数来执行此操作。

[您可以在http://gcc.gnu.org/onlinedocs/libstdc++/manual/ext_demangling.html](http://gcc.gnu.org/onlinedocs/libstdc++/manual/ext_demangling.html)中找到一个示例

# linux - 什么工具可以调试linux内核？

> ID：16052165
> 
> 赞同：2
> 
> 时间：2013-04-17T05:24:51.333
> 
> 标签：linux, linux-kernel, linux-device-driver, boot, bootloader

我是linux内核的新手。想知道如何浏览完整的流程，直接从 CPU 上电开始。BIOS/ROM 代码的基本概念。

我可以有一些工具来调试完整的内核吗？还是原始代码浏览更可取？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-02T11:39:51.240

以下工具可以帮助您调试 Linux 内核

[**Dynamic Probes**](http://dprobes.sourceforge.net/)是 IBM 开发的一种流行的 Linux 调试工具。该工具允许在系统中的几乎任何位置放置“探针”，包括用户空间和内核空间。探针由一些代码（用专门的、面向堆栈的语言编写）组成，这些代码在控制到达给定点时执行。下面列出了有关 dprobes / **kprobes的资源**

*   [http://www-01.ibm.com/support/knowledgecenter/linuxonibm/liaax/dprobesltt.pdf](http://www-01.ibm.com/support/knowledgecenter/linuxonibm/liaax/dprobesltt.pdf)
*   [http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.107.6212&rep=rep1&type=pdf](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.107.6212&rep=rep1&type=pdf)
*   [https://www.redhat.com/magazine/005mar05/features/kprobes/](https://www.redhat.com/magazine/005mar05/features/kprobes/)
*   [https://sourceware.org/systemtap/kprobes/](https://sourceware.org/systemtap/kprobes/)
*   [http://www.ibm.com/developerworks/library/l-kprobes/index.html](http://www.ibm.com/developerworks/library/l-kprobes/index.html)
*   [https://doc.opensuse.org/documentation/html/openSUSE_121/opensuse-tuning/cha.tuning.kprobes.html](https://doc.opensuse.org/documentation/html/openSUSE_121/opensuse-tuning/cha.tuning.kprobes.html)

[**Linux Trace Toolkit**](http://www.opersys.com/LTT)是一个内核补丁和一组相关的实用程序，允许跟踪内核中的事件。跟踪包括时间信息，并且可以创建在给定时间段内发生的事情的合理完整图片。LTT、LTT Viewer 和 LTT Next Generation 的资源

*   [http://elinux.org/Linux_Trace_Toolkit](http://elinux.org/Linux_Trace_Toolkit)
*   [http://www.linuxjournal.com/article/3829](http://www.linuxjournal.com/article/3829)
*   [http://multivax.blogspot.com/2010/11/introduction-to-linux-tracing-toolkit.html](http://multivax.blogspot.com/2010/11/introduction-to-linux-tracing-toolkit.html)

[**MEMWATCH**](http://sourceforge.net/projects/memwatch/)是一个开源的内存错误检测工具。它通过在 gcc 语句中定义 MEMWATCH 并将头文件添加到我们的代码中来工作。通过这个我们可以跟踪内存泄漏和内存损坏。关于 MEMWATCH 的资源

*   [http://www.linuxjournal.com/article/6059](http://www.linuxjournal.com/article/6059)

[**ftrace**](http://linux.die.net/man/1/ftrace)是一个很好的 Linux 内核跟踪框架。ftrace 跟踪内核的内部操作。该工具包含在 2.6.27 的 Linux 内核中。借助其各种跟踪器插件，ftrace 可以针对不同的静态跟踪点，例如调度事件、中断、内存映射 I/O、CPU 电源状态转换以及与文件系统和虚拟化相关的操作。此外，内核函数调用的动态跟踪是可用的，可选地通过使用 glob 限制到函数的子集，并且可以生成调用图并提供堆栈使用。[你可以在https://events.linuxfoundation.org/slides/2010/linuxcon_japan/linuxcon_jp2010_rostedt.pdf](https://events.linuxfoundation.org/slides/2010/linuxcon_japan/linuxcon_jp2010_rostedt.pdf)找到一个很好的 ftrace 教程

[**ltrace**](http://man7.org/linux/man-pages/man1/ltrace.1.html)是 Linux 中的一个调试工具，用于显示用户空间应用程序对共享库的调用。该工具可用于跟踪任何动态库函数调用。它截获并记录被执行进程调用的动态库调用以及该进程接收到的信号。它还可以拦截和打印程序执行的系统调用。

*   [http://www.ellexus.com/getting-started-with-ltrace-how-does-it-do-that/?doing_wp_cron=1425295977.1327838897705078125000](http://www.ellexus.com/getting-started-with-ltrace-how-does-it-do-that/?doing_wp_cron=1425295977.1327838897705078125000)
*   [http://developerblog.redhat.com/2014/07/10/ltrace-for-rhel-6-and-7/](http://developerblog.redhat.com/2014/07/10/ltrace-for-rhel-6-and-7/)

**KDB**是 Linux 内核的内核调试器。KDB 遵循简单的 shell 风格的界面。我们可以使用它来检查内存、寄存器、进程列表、dmesg，甚至可以设置断点以在某个位置停止。通过 KDB，我们可以设置断点并执行一些基本的内核运行控制（*虽然 KDB 不是源级调试器*）。关于 KDB 的几个方便的资源

*   [http://www.drdobbs.com/open-source/linux-kernel-debugging/184406318](http://www.drdobbs.com/open-source/linux-kernel-debugging/184406318)
*   [http://elinux.org/KDB](http://elinux.org/KDB)
*   [http://dev.man-online.org/man1/kdb/](http://dev.man-online.org/man1/kdb/)
*   [https://www.kernel.org/pub/linux/kernel/people/jwessel/kdb/usingKDB.html](https://www.kernel.org/pub/linux/kernel/people/jwessel/kdb/usingKDB.html)

**KGDB**旨在用作 Linux 内核的源代码级调试器。它与 gdb 一起用于调试 Linux 内核。使用 kgdb 需要两台机器。其中一台机器是开发机器，另一台是目标机器。要调试的内核在目标机器上运行。期望 gdb 可用于“闯入”内核以检查内存、变量并查看调用堆栈信息，类似于应用程序开发人员使用 gdb 调试应用程序的方式。可以在内核代码中放置断点并执行一些有限的执行单步执行。关于 KGDB 的几个方便的资源

*   [http://landley.net/kdocs/Documentation/DocBook/xhtml-nochunks/kgdb.html](http://landley.net/kdocs/Documentation/DocBook/xhtml-nochunks/kgdb.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T05:29:05.903

一、看相关问题[Linux内核实时调试，它是怎么做的，用什么工具？](https://stackoverflow.com/questions/4943857/linux-kernel-live-debugging-how-its-done-and-what-tools-are-used). 尝试使用[KDB](http://elinux.org/KDB)或[Ftrace](http://elinux.org/Ftrace)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T13:15:19.963

[如果您的目的是了解 Linux 内核的整个流程，那么在QEMU](http://wiki.qemu.org/Main_Page)上运行 Linux 内核可能是了解 Linux 工作原理的简单方法。特别是。您可以在没有真正硬件的情况下模拟许多 CPU 类型。或者[用户模式Linux](http://en.wikipedia.org/wiki/User-mode_Linux)怎么样？

[本文档](http://files.meetup.com/1590495/debugging-with-qemu.pdf)有助于在 QEMU 上调试内核。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T15:12:46.897

顺便补充一句，Linux内核不是很适合调试。Linus Torvalds 曾表示他反对在 Linux 中支持内核调试，因为这会导致编写糟糕的代码。我使用了 kdbg，但是我发现它不是很有用，我建议使用 printk 以老式的方式调试内核。

# javascript - 提交时停止在 textarea 中编码特殊字符

> ID：16052166
> 
> 赞同：0
> 
> 时间：2013-04-17T05:25:00.237
> 
> 标签：javascript, html, encoding, urlencode

我想阻止文本区域对特殊字符进行编码。

如果我`1:2#aa^bb`在文本区域输入，然后在提交时将其转换为`1%3A2%23aa%5Ebb`.

我希望按原样提交文本，而不进行任何转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:38:36.367

将表单上的 enctype 设置为`multipart/form-data`和发布方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:12:52.817

如果您有 like `<textarea name="data">`，那么当您提交它时，您会看到`...?data=1%3A2%23aa%5Ebb`这是正确的，尽管现代浏览器会从表面上显示解码的版本，而您不会遇到这个问题。

当您`request.getParameter("data")`在服务器端执行此操作时，您会看到它是`"1:2#aa^bb"`. 我假设您的个人资料中的 JSP/Servlets。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T05:33:29.443

`escape(string)`在提交 textarea 值时尝试

# javascript - 在浮动中添加另一个数据系列

> ID：16052168
> 
> 赞同：0
> 
> 时间：2013-04-17T05:25:08.717
> 
> 标签：javascript, json, flot

我当前有一个 php 文件，它返回：

[[38,38],[38,113],[38,188],[38,263],[38,338],[38,413],[38,488],[113,38],[113,113],[113,188],[113,263],[ 113,338],[113,413],[113,488],[188,38],[188,113],[188,188],[188,263],[188,338],[188,413],[188,488],[263,38],[263,113] ,[263,188],[263,263],[263,338],[263,413],[263,488],[338,38],[338,113],[338,188],[338,263],[338,338],[338,413],[338,488] ,[413,38],[413,113],[413,188],[413,263],[413,338],[413,413],[413,488],[488,38],[488,113],[488,188],[488,263],[ 488,338],[488,413],[488,488],[75,75],[75,150],[75,225],[75,300],[75,375],[75,450],[150,75],[150,150],[150,225] ,[150,300],[150,375],[150,450],[225,75],[225,150],[225,225],[225,300],[225,375],[225,450],[300,75],[300,150],[ 300,225],[300,300],[300,375],[300,450],[375,75],[375,150],[375,225],[375,300],[375,375],[375,450],[450,75],[450,150] ,[450,225],[450,300],[450,375],[450,450]]

我在 ajax 调用中使用它

```
$.ajax({
    url:'fetcher/allseedpositions.php',
    async: false,
    success:function(datasets){
        seedPos = jQuery.parseJSON(datasets);
        allNodePos = $.plot($("#allnodepositions"),[ seedPos ],optionsSeed);        
    }
}) 
```

绘制，但现在我希望另一个系列也与此一起绘制，具有不同的符号。我对使用 json 感到困惑，我无法添加更多属性。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:53:13.877

您应该能够创建一个新数组并推送下一个数据集以供显示。[http://jsfiddle.net/fZbVL/](http://jsfiddle.net/fZbVL/)

```
var dataSet1 = [ 
          [1,5],[4,7]
];

var dataSet2 = [
[1,2],[3,4]
];

var dataSet3 = [
[1,4],[4,6]
]

var data = []
data.push(dataSet1);
data.push(dataSet2);
data.push(dataSet3);

$.plot($("#placeholder"),
      data); 
```

# mysql - Windows 7 上的 emacs 和 mysql

> ID：16052170
> 
> 赞同：0
> 
> 时间：2013-04-17T05:25:15.373
> 
> 标签：mysql, emacs24

我一直在使用 emacs 编写程序，最近我想通过它执行 SQL 查询，我运行以下命令并得到以下错误：

```
M-x sql-Mysql 
```

然后我就按`return`然后

```
user:
password:
database:
server: 
```

我得到了错误

```
" unable to locate sql program mysql " 
```

我已经连续搜索了两天，得到了编辑 .emacs 文件的建议，但没有用。我正在使用 Windows 7。

我的初始化文件如下所示：

```
(setq sql-connection-alist
'((pool-a
(sql-product 'mysql)
(sql-server "1.2.3.4")
(sql-user "me")
(sql-password "mypassword")
(sql-database "thedb")
(sql-port 3306))
(pool-b
(sql-product 'mysql)
(sql-server "1.2.3.4")
(sql-user "me")
(sql-password "mypassword")
(sql-database "thedb")
(sql-port 3307))))

(defun sql-connect-preset (name)
  "Connect to a predefined SQL connection listed in `sql-connection-alist'"
  (eval `(let ,(cdr (assoc name sql-connection-alist))
    (flet ((sql-get-login (&rest what)))
      (sql-product-interactive sql-product)))))

(defun sql-pool-a ()
  (interactive)
  (sql-connect-preset 'pool-a)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T05:14:34.530

好吧，我认为，它不需要将该代码放在我的初始化文件中，所以我删除了所有这些。事实上，我不需要在初始化文件中放入任何东西来运行 mysql。我只是在下面填写了适当的详细信息领域：

> **用户**：根
> 
> **密码**：我在安装 mysql 时创建的
> 
> **数据库**：我将此字段留空
> 
> **服务器**：本地主机

然后没有问题发生，我可以像在普通的mysql命令窗口中一样像往常一样运行sql命令。我从中得出服务器作为'localhost'和用户作为'root'是主要参数，应该可以工作所有情况（如果您通过emacs在您的系统上运行mysql服务器。要填写的密码是安装时输入的密码。

# process - C ++管道进程未终止

> ID：16052177
> 
> 赞同：1
> 
> 时间：2013-04-17T05:25:47.983
> 
> 标签：process, pipe

我制作了一个程序，它接受用户输入的两个命令，并将第一个命令通过管道传输到第二个。如果输入了真正的命令，它工作正常，但是当我只输入随机单词时，我无法让我的错误检查工作。在我使用 exit() 的代码的大多数地方，进程都可以正常终止，但在两个子进程 rs1 和 rs2 中，我无法退出。我是流程新手，所以我不确定如何正确执行此操作。有人可以帮忙吗？

```
int main()
{
while(true)
{
    int argc1=0,argc2=0,rs1,rs2,pipefd[2];
    char input1[80],input2[80],*argv1[6],*argv2[6],*p1,*p2;
//*Big block of code that receives input goes here*
    pipe(pipefd);
    rs1=fork();
    rs2=fork();
    if(rs1==0)
    {
        close(pipefd[0]);
        close(1);
        dup(pipefd[1]);
        close(pipefd[1]);
        rs1=execvp(argv1[0],argv1);
        if(rs1==-1)
        {
            perror(argv1[0]);
            exit(rs1); //Here is where I'm having the problem
        }
    }
    if(rs2==0)
    {
        close(pipefd[1]);
        close(0);
        dup(pipefd[0]);
        close(pipefd[0]);
        rs2=execvp(argv2[0],argv2);
        if(rs2==-1)
        {
            perror(argv2[0]);
            exit(rs2); //Here also does not work correctly
        }
    }
    close(pipefd[0]);
    close(pipefd[1]);
    wait(&rs1);
    wait(&rs2);
}
return 0;
} 
```

# codeigniter - 重定向在 codeigniter _construct 函数中不起作用

> ID：16052179
> 
> 赞同：1
> 
> 时间：2013-04-17T05:25:59.187
> 
> 标签：codeigniter, url, redirect, construct

我在 _construct 函数中使用重定向时遇到问题，在时间表控制器中，我编写了以下代码，但在浏览器中出现错误“

> 此问题有时可能是由禁用或拒绝接受 cookie 引起的。

这是我的代码

```
class Timesheet extends MY_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->load->model('timesheet_model');
        //$this->load->library('auth');
        $username=$this->session->userdata('logged_in');

        //$this->load->model('login_model');
        if($username['fullname']!=""){
        redirect('timesheet');

        }
        else{
        redirect('login');
        }

    } 
```

请帮助我找到解决此问题的方法。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T05:35:13.110

在我看来，您就像在循环中一样。

您检查 $username 数组中的 fullname 元素是否为空，如果是，则重定向回同一控制器。我敢打赌，在网络服务器抛出您提到的错误之前，它会像那样绕圈子一段时间。

如果我正在阅读您正在尝试正确执行的操作，如果存在 fullname 元素以显示您要显示的任何信息，您不会在 Timesheet 构造函数中调用另一个函数吗？

我建议更改您的逻辑以执行以下操作：

```
if($username['fullname'] == ""){
    redirect('login');
    }
    else{
    //go to another controller method here
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:36:26.763

好的。我知道了。该错误只是因为我正在重定向到我编写代码的同一个控制器。每次重定向到时间表时，它都会进入构造函数并再次重定向到时间表。同样的事情就像一个无限循环一样工作。

所以故障是重定向到同一个控制器。

我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-04T13:17:01.537

像这样使用重定向：`redirect('timesheet', 'refresh');`

# perl - NET::SFTP:Foreign 无法连接到远程服务器

> ID：16052181
> 
> 赞同：1
> 
> 时间：2013-04-17T05:26:08.303
> 
> 标签：perl

当 perl 脚本通过`NET::SFTP:Foreign`模块启动到远程服务器的 sftp 连接时，它会失败并显示以下错误日志消息。我尝试`sftp`从命令提示符到它成功登录的同一个远程服务器的 unix 命令。不知道为什么 perl 代码会失败。操作系统 Solaris5.10 i86 架构。

```
Permission denied (gssapi-keyex,gssapi-with-mic,publickey,keyboard-interactive).
unable to connect to remote host iblpdb.it.com.au: SSH slave exited unexpectedly with error code 255 
```

如果在下面的代码行失败

```
my  $sftp = Net::SFTP::Foreign->new("$sftpServer",
                                     user=>$sftpUsername,
                                     password=>$sftpPassword,
                                     asks_for_username_at_login=>1,
                                     port=>'22');
 $sftp->die_on_error("unable to connect to remote host $sftpServer"); 
```

如果 SFTP unix 手动命令使用相同的登录名和 paasword，那么 perl 脚本也应该可以工作。不确定此错误表示什么。

# linux - 无法启动 Hadoop 虚拟机

> ID：16052182
> 
> 赞同：0
> 
> 时间：2013-04-17T05:26:20.163
> 
> 标签：linux, hadoop, vmware, virtual-machine, rhel

[我最近从http://developer.yahoo.com/hadoop/tutorial/module3.html#vm](http://developer.yahoo.com/hadoop/tutorial/module3.html#vm)下载了 hadoop 虚拟映像的副本

我在 RHEL5 上运行我的 VMware Player，并且按照说明，每当我尝试双击解压缩的 VM 文件夹中的 .vmx 文件时，VMware Player 会加载但给我一个错误，提示“虚拟机正忙”。单击“确定”后，虚拟机就坐在那里什么也不做。我在这里哪里出错了？我错过了什么吗？我检查了我的虚拟机设置，一切看起来都很好（我给了它 512Mb 的 RAM，25GB 的硬盘，我知道这一切都绰绰有余了）

我需要尽快为我的项目运行这个东西，所以我需要帮助。提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:10:42.030

好的，由于一个写得很好的博客的页面，我想出了这个。

方法一：vmware-modconfig --console --install-all

方法 2：a.) /etc/init.d/vmware stop 然后 b.) rm -rf /var/run/vmware/*

方法3：（这对我有用。显然有时会创建一个名为not-configured的空无用文件。删除它。没有伤害:)）rm -rf /etc/vmware/not_configured

# android - 缺少 Android NumberPicker、DatePicker、TimePicker 箭头

> ID：16052183
> 
> 赞同：8
> 
> 时间：2013-04-17T05:26:20.423
> 
> 标签：android, datepicker, timepicker, numberpicker

我在 Android 应用程序的 NumberPicker、DatePicker 和 TimePicker 上看到了很多带有上下箭头的例子。但是当我使用它时，应用程序没有显示箭头。

有什么技巧可以让箭头显示出来吗？

SDK 是 API 版本 17 和修订版 2。

代码非常简单。

```
<DatePicker
android:id="@+id/datePicker123"
android:layout_width="280dp"
android:layout_height="wrap_content"
android:calendarViewShown="false" />

<TimePicker
android:id="@+id/timePicker123"
android:layout_width="280dp"
android:layout_height="wrap_content" />

<NumberPicker
android:id="@+id/numberPicker123"
android:layout_width="wrap_content"
android:layout_height="wrap_content" /> 
```

创建活动

```
String[] options = new String[] { "A", "B", "C" }
NumberPicker numberPicker123 = (NumberPicker) findViewById(R.id.numberPicker123);
numberPicker123.setMinValue(0);
numberPicker123.setMaxValue(options.length - 1);
numberPicker123.setDisplayedValues(options); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:46:06.613

如果您希望将 NumberPicker 中的 + 和 - 更改为向上和向下箭头，那么从我在文档中看到的内容和我看到的其他问题来看，默认 NumberPicker 类看起来并不可行关于堆栈溢出。

[是否可以制作水平 NumberPicker？](https://stackoverflow.com/questions/6796243/it-is-possible-to-make-a-horizontal-numberpicker)

[Android 有 NumericUpDown 按钮？](https://stackoverflow.com/questions/3307213/android-having-numericupdown-button)

看起来您对类没有太多控制权，但在第二个问题中，Dave Webb 提供了很多关于如何从 android 获取 NumberPicker 类的信息。有了源代码，我相信您可以更改图像。

否则，您可以使用带有数字字段和 2 个按钮的线性布局来制作自己的布局。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:42:21.770

尝试这个..

```
btn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                TimePickerDialog tp = new TimePickerDialog(MainActivity.this,
                        maxtime, 0,0, true);
                tp.show();
            }
}); 
```

听众是..

```
TimePickerDialog.OnTimeSetListener maxtime = new OnTimeSetListener() {

        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            // TODO Auto-generated method stub
            textview.setText("" + hourOfDay + "/" + minute);
        }
    }; 
```

希望它有效..

# c# - 在列表中查找数字开始上升的索引

> ID：16052186
> 
> 赞同：-2
> 
> 时间：2013-04-17T05:26:41.483
> 
> 标签：c#, linq

假设我有一个数字列表，我想知道数字在列表中的哪个位置开始减少，没有特定的顺序，一个例子是理想的！

```
1,
2,
2,
3,
3,
4,
4,
5,
5,
4, <= this should be my output
4,
3,
3,
2,
2,
1, 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T05:42:08.537

您可以创建自己的扩展方法`IEnumerable<TSource>`

```
public static class MyEnumerable
{
    public static IEnumerable<TSource> Descending<TSource>(this IEnumerable<TSource> source)
        where TSource : IComparable<TSource>
    {
        using (var e = source.GetEnumerator())
        {
            TSource previous;
            if (e.MoveNext())
            {
                previous = e.Current;
                while (e.MoveNext())
                {
                    if (previous.CompareTo(e.Current) > 0)
                        yield return e.Current;
                    previous = e.Current;
                }
            }
        }
    }
} 
```

**用法**

```
var input = new List<int>() { 1, 2, 3, 2, 4, 5, 6, 7, 8, 9 };

var firstDescending = input.Descending().First(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T05:37:30.017

不是 Linq，而是 C# 方式：

```
 public int FirstDecreasingIndex(IList<int> myList)
    {
        for (int i = 0; i < myList.Count - 1; i++)
        {
            if (myList[i] > myList[i + 1])
                return i+1;
        }
        return -1; //Or some other value
    } 
```

对于此输入： `{ 1,2,3,2,4,5,6,7,8,9 }`该函数将返回`3`，因为它是列表第一次开始减少的第一个索引。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T06:09:53.393

对于真正实用的方法：

```
List<int> numbers = ...;
var firstDecreasingValue =
    numbers.Skip(1).Zip(numbers, (number, previous) => new { number, previous })
           .Where(x => x.number.CompareTo(x.previous) < 0)
           .Select(x => x.number)
           .First(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T05:45:34.923

不完全是linq，但我认为足够接近

```
var list = new List<int> { 1, 2, 3, 4, 5, 4, 3, 2, 1 };
var index = Enumerable.Range(0, list.Count).First(i => i > 0 && list[i] < list[i - 1]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T05:49:25.893

这是一个使用`Enumerable.Aggregate`and `Tuple`:s 的“oneliner”：

```
var numbers = new[] { 1, 2, 2, 3, 3, 4, 4, 5, 5, 4, 4, 3, 3, 2, 2, 1 };
var idx = numbers.Aggregate(Tuple.Create(true, 0, 0),  (tuple, x) => 
          tuple.Item1
          ? tuple.Item3 <= x 
            ? Tuple.Create(true, tuple.Item2 + 1, x) 
            : Tuple.Create(false, tuple.Item2, x)
          : tuple)
          .Item2; 
```

聚合元组存储三个值：

1.  是否继续寻找增加，
2.  数组索引，递增直到检测到第一次减少，
3.  用于与数组中的后续值进行比较的项目值，更新直到检测到第一次减少。

聚合完成后，`Item2`从元组中选择值，其中存储了第一个减少的索引。

上述代码的输出将是`9`第一个减小值的基零索引。如果您改为`Item3`从聚合元组返回，您将获得第一个减少的值（如果序列完全不减少，则获得最后一个值）。

# ruby-on-rails - Rails has_many：通过“子对象”上的 sum 属性-> SQL Toughy

> ID：16052191
> 
> 赞同：6
> 
> 时间：2013-04-17T05:27:10.283
> 
> 标签：ruby-on-rails, activerecord

我有三个，`one-to-many`关系，一个`has_many :through`关联和一个我想总结的属性的对象。

这可能听起来很傻，但假设一个以棒球为主题的应用程序：

```
:league has_many :teams 
:team has_many :users   
:league has_many :homeruns, :through => :users
:user has_many :homeruns 
```

我想要做的是，在联赛`show`页面上列出`team`各自的，并累计每支球队有`league`多少**英尺**的**本垒打。**(`Feet`是 上的一个属性`homerun`。)

我现在能得到的最接近的是`@league.homeruns.sum(:feet)`（显示每个联赛的本垒打总距离），但我想在球队层面上做到这一点，按联赛过滤。

有道理？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T06:24:18.550

如果添加`:team has_many :homeruns, through: :users`，则可以使用`team.homeruns.sum(:feet)`来获取每个团队的目标，对吗？最好将其移动到`team`模型中的方法中：

```
# team.rb
has_many: homeruns, through: :users

def total_homerun_distance
  self.homeruns.sum(:feet)
end 
```

然后列出特定的所有团队`league`，只需遍历视图中`team`属于该团队的每个团队`league`，并用您想要的任何 HTML 包装。例如，要将其显示为表格：

```
# views/leagues/show.html.erb
<table>
<% @league.teams.each do |team| %>
  <tr>
    <td><%= team.name %></td>
    <td><%= team.total_homerun_distance %></td>
  </tr>
<% end %>
</table> 
```

# hibernate - 从 hbm 文件动态加载所有类

> ID：16052198
> 
> 赞同：0
> 
> 时间：2013-04-17T05:27:29.387
> 
> 标签：hibernate

如何使用自定义的类加载器加载 *.hbm.xml 文件中出现的所有类？

如何定位所有上课地点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:56:38.507

对于 Hibernate 3.6（我不知道它是否为 Hibernate 4.x 改变了）：

你可以做什么：你`org.hibernate.cfg.Configuration`用你自己的子类扩展这个类。在此类中，您覆盖方法`doConfigure()`并`buildSessionFactory()`注入您自己的自定义类加载器：

```
@Override
protected Configuration doConfigure(org.dom4j.Document doc) throws HibernateException {
    Thread me = Thread.currentThread();
    ClassLoader stdLoader = me.getContextClassLoader();
    me.setContextClassLoader(new MyOwnClassloader(...));
    super.doConfigure(doc);
    me.setContextClassLoader(stdLoader);

    return this;
} 
```

你也必须这样做`buildSessionFactory()`。

如果你喜欢你也可以覆盖`addResource()`. 这允许您为您的类加载器接受一个特殊的语法，在哪里可以找到映射文件或带注释的类。（我在进行 OSGi 集成时这样做了。在映射文件名中，我允许指定 OSGi 捆绑包在哪里可以找到映射文件。）

在您的代码中，您必须用对您的类的调用替换对休眠`Configuration`类的调用。

坏事是 Hibernate`Configuration`类的糟糕的面向对象设计。许多方法返回`this`，即调用它们的实例，但是在创建子类之后，这些方法返回`this`错误的 Java 类型。您必须覆盖所有这些方法，只需调用`super.xxx()`并返回`this`子类的类型。

# objective-c - 为什么 isEqualToString 不适用于 NSString？

> ID：16052199
> 
> 赞同：1
> 
> 时间：2013-04-17T05:27:34.837
> 
> 标签：objective-c, xcode, nsstring, compare

我正在尝试在 XCode 中编写 iPhone 应用程序的登录过程。问题出在下面的 NSString serverOutput 上。当我使用 printf(serverOutput.UTF8String); 打印它时 它在控制台上打印“是”。但是，当我将 serverOutput 与“是”进行比较时，它不起作用。任何帮助，将不胜感激。这是我的代码：

```
- (IBAction) loginButton: (id) sender
{
    // TODO: spawn a login thread

    indicator.hidden = FALSE;
    [indicator startAnimating];
    NSString *post =[NSString stringWithFormat:@"username=%@&password=%@",userName.text, password.text];

    NSString *hostStr = @"http://10.243.1.184/connectDB.php?";
    hostStr = [hostStr stringByAppendingString:post];
    NSData *dataURL =  [NSData dataWithContentsOfURL: [ NSURL URLWithString: hostStr ]];
    NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];
    printf(serverOutput.UTF8String);

    if([serverOutput isEqualToString:@"Yes"]){

        UIAlertView *alertsuccess = [[UIAlertView alloc] initWithTitle:@"Congrats" message:@"You are authorized"
        delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];

        [alertsuccess show];
        [alertsuccess release];

    }
    else {
        UIAlertView *alertsuccess = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Username or Password Incorrect"
        delegate:self cancelButtonTitle:@"OK"otherButtonTitles:nil, nil];
        [alertsuccess show];
        [alertsuccess release];
        //[self.navigationController pushViewController:DashboardViewController animated:YES];
        loginbutton.enabled = TRUE;

    }

    loginbutton.enabled = FALSE;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T05:32:25.403

基于帮助其他有类似情况的人，我会说问题在于来自服务器的响应不仅仅是 string `"Yes"`。很可能在文本之前和/或之后有一些空格。也许是一两个流浪的换行符。

尝试这个：

```
NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];
NSLog(@"Result = '%@'", serverOutput); // look for space between quotes
serverOutput = [serverOutput stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

# jquery - jquery-ui 对话框未在 IE 中发布

> ID：16052201
> 
> 赞同：2
> 
> 时间：2013-04-17T05:27:44.883
> 
> 标签：jquery, asp.net, jquery-ui

我有一个 jquery ui 对话框，其中包含一堆 asp.net 控件。对话框中还有一个 runat="server" 按钮，用于将表单发送到服务器。不幸的是，这在 IE 中不起作用。在 Chrome 中，它按预期工作。以下是相关的代码片段...

```
$("#applicationFormDialog").dialog({
                autoOpen: false,
                width: 780,
                height: 550,
                title: 'Please enter your career details',
                open: function (type, data) {
                    $(".uploadYourResume").css('display', 'none');
                    clearAllControls();
                    var indexToSelect = $('#applicationFormDialog').data('indexVal');
                    $("#" + "<%=ddlPosition.ClientID %>" + " option")[indexToSelect].selected = true;
                    debugger;
                    $(this).parent().appendTo($("form:first"));
                },
                beforeClose: function (event, ui) {
                    clearAllControls();
                },
                resizable: false
        }); 
```

jQuery UI 版本 = 1.10.1 jQuery 版本 = 1.9.1

让我知道您是否还有其他需要。

**更新**：如果我只是简单地使用 runat='server' 放置一个普通的提交按钮，这可以工作，但是我在提交之前在客户端验证表单，这就是我认为问题所在。这是客户端验证方法。

```
function validateForm() {
            // Clear all error divs...
            $(".errorSpan").css('display', 'none');

            // Build the array.            
            var arrayOfCtrls = new Array();

            arrayOfCtrls.push(new control("<%= txtName.ClientID %>", "", "textbox", 0));                        // Name
            arrayOfCtrls.push(new control("<%= txtEmail.ClientID %>", "", "textbox", 0));                       // Email
            arrayOfCtrls.push(new control("<%= txtCity.ClientID %>", "", "textbox", 0));                        // City
            arrayOfCtrls.push(new control("<%= ddlState.ClientID %>", "", "dropdown", 0));                      // State
            arrayOfCtrls.push(new control("<%= uploadResume.ClientID %>", "fileUploadErrorSpan", "file", 0));   // Resume
            arrayOfCtrls.push(new control("<%= ddlPosition.ClientID %>", "", "dropdown", 0));                   // Position
            arrayOfCtrls.push(new control("<%= ddlQualification.ClientID %>", "", "dropdown", 0));              // Qualification
            arrayOfCtrls.push(new control("<%= ddlExperience.ClientID %>", "", "dropdown", 0));                 // Experience

            if ($("#" + "<%=ddlExperience.ClientID %>").val() != "Fresher") {
                arrayOfCtrls.push(new control("<%= txtCurrCompany.ClientID %>", "", "textbox", 0));     // Current Company
                arrayOfCtrls.push(new control("<%= txtWorkingSince.ClientID %>", "", "textbox", 0));    // Working since                        
                arrayOfCtrls.push(new control("<%= txtCurrLocation.ClientID %>", "", "textbox", 0));    // Current Location            
            }

            if (!controlsToValidate(arrayOfCtrls)) {
                return false;
            }
            // Check email address
            if (!validEmail((document.getElementById("<%= txtEmail.ClientID %>")).value)) {
                document.getElementById("<%= txtEmail.ClientID %>").focus();
                document.getElementById("<%= txtEmail.ClientID %>").title = "Please enter a proper email address.";
                return false;
            }
            return true;
        } 
```

这些是对话框上的按钮

```
 <asp:Button ID="btnSubmitForm" runat="server" Text="Submit" OnClientClick="return validateForm()" OnClick="submitForm_Click" />
            <input type="button" id="btnClearFields" value="Clear" />
            <asp:Button ID="btnClear" runat="server"/> 
```

我添加的最后一个按钮用于检查回发是否适用于普通按钮，并且工作正常。

更新#2：有一个问题，在我从脚本返回 true 后，一些 jquery 方法不断被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T04:27:37.313

好的，我将自己回答这个问题，因为这里没有发布任何内容，部分原因是我提供的信息**不足**。

在我制作的表单中，我隐藏了一个文件上传控件，因为我想设置它的样式。然后我放置了两个按钮，**Select...**和**Clear**。

无论如何[，](https://stackoverflow.com/q/12058731/903324)如果文件上传控件被隐藏，IE 将不会发布到服务器。这就是正在发生的事情。

我无法知道，这就是问题所在，所以对于原始帖子中缺乏信息，我深表歉意。

# ruby-on-rails - 使用工具提示、rails 进行客户端验证

> ID：16052203
> 
> 赞同：1
> 
> 时间：2013-04-17T05:27:47.250
> 
> 标签：ruby-on-rails, twitter-bootstrap, tooltip, client-side-validation

在我的 Rails 应用程序中，我使用客户端验证来显示错误消息。我想使用引导程序在工具提示上显示此消息。如何更改我的代码以便它显示在工具提示中。现在错误消息来自 config/initializers/client_side_validation.rb

```
 ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
   unless html_tag =~ /^<label/
     %{<div class="field_with_errors">#{html_tag}<label for="#{instance.send(:tag_id)}"    class="message">#{instance.error_message.first}</label></div>}.html_safe
   else
     %{<div class="field_with_errors">#{html_tag}</div>}.html_safe
   end
end 
```

请给任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T06:09:35.320

这对我有用：

```
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
  unless html_tag =~ /^<label/
    %{<div class="field_with_errors">#{html_tag}<div class="tooltip-validate fade right in" style="display: block;"><div class="tooltip-validate-arrow"></div><div class="tooltip-validate-inner"><label for="#{instance.send(:tag_id)}" class="message">#{instance.error_message.first}</label></div></div></div>}.html_safe
  else
    %{<div class="field_with_errors">#{html_tag}</div>}.html_safe
  end

end

# css
.tooltip-validate {
  position: absolute;
  z-index: 1030;
  display: inline;
  padding: 5px;
  font-size: 11px;
  opacity: 0;
  filter: alpha(opacity=0);
  visibility: visible;
}

.tooltip-validate.in {
  opacity: 0.8;
  filter: alpha(opacity=80);
}

.tooltip-validate.right {
  margin-left: 227px;
  margin-top: -43px;
}

.tooltip-validate-inner {
  max-width: 350px;
  padding: 3px 8px;
  color: #ffffff;
  text-align: center;
  text-decoration: none;
  background-color: #000000;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
}

.tooltip-validate-arrow {
  position: absolute;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
}

.tooltip-validate.right .tooltip-validate-arrow {
  top: 50%;
  left: 0;
  margin-top: -5px;
  border-right-color: #000000;
  border-width: 5px 5px 5px 0;
} 
```

# asp.net - 如何通过asp.net代码将数据表作为参数发送到mysql存储过程

> ID：16052206
> 
> 赞同：0
> 
> 时间：2013-04-17T05:28:50.507
> 
> 标签：asp.net, mysql

如何通过 asp.net 代码将数据表作为参数发送到 mysql 存储过程。如果有任何解决方案，谁能告诉我。这很紧急

谢谢你，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:35:05.487

您可以将其写入 .csv 并使用`LOAD DATA INFILE`
- [LOAD DATA INFILE 语法](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)

否则，您必须遍历`datatable`并逐行插入。

参考

1.  [从 C# DataTable 批量插入的最佳方法](https://stackoverflow.com/questions/5022531/best-way-to-bulk-insert-from-a-c-sharp-datatable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:35:05.777

我会解析数据集，并为每个数据行调用一个存储过程，为一个数据行传递参数。如果您不希望这样，那么还有其他导入工具（批量导入），例如[http://brockangelo.com/2009/04/27/how-to-bulk-import-into-a-mysql-database](http://brockangelo.com/2009/04/27/how-to-bulk-import-into-a-mysql-database)或[MySQL从 CSV 数据文件批量插入](https://stackoverflow.com/questions/2811096/mysql-bulk-insert-from-csv-data-files)。

# ios - facebook图片类型正方形

> ID：16052215
> 
> 赞同：0
> 
> 时间：2013-04-17T05:29:24.367
> 
> 标签：ios, facebook, image

我有一些代码使用 SLRequest 来获取我的信息以及 Facebook 用户的图片。我的信息没有问题，然后我可以通过这个网址成功抓取图片：

```
NSURL *picture = [NSURL URLWithString:@"https://graph.facebook.com/{user id}/picture"]; 
```

但不是这个网址：

```
NSURL *picture = [NSURL URLWithString:@"https://graph.facebook.com/{user id}/picture?type=square"]; 
```

为什么方形版本不起作用？这是根据此页面的有效类型： [https ://developers.facebook.com/docs/reference/api/using-pictures/](https://developers.facebook.com/docs/reference/api/using-pictures/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:42:19.033

是的，这应该有效。

您可能想尝试一下`https://graph.facebook.com/{user_id}?fields=picture.width(100).height(100)`，它返回 URL 而不是实际的 JPEG 数据。

# c# - SQL 查询以插入并获取长度范围内的价格

> ID：16052216
> 
> 赞同：2
> 
> 时间：2013-04-17T05:29:24.540
> 
> 标签：c#, sql, database, ado.net

可以说我有一个不同价格的长度范围

```
Length      Price
0 - 10        18
11 - 15       20
16 - 20       30
21 - 40       45
41 - infinity 60 
```

我应该如何将这些信息存储在数据库中，当我输入长度时如何检索信息`10.625`？如何获得长度为 的商品的价格`10.625`？

* * *

我不确定我是否已经解决了这个问题

```
priceData.Length_End = Math.Ceiling(priceData.Length);

        string selectStatement = 
            "SELECT Price PriceList2 " +
            "WHERE @Length_End >= Length_Start AND @Length <= Length_End"; 
```

然后我得到第一个读者的价值

```
SqlDataReader reader = selectCommand.ExecuteReader();
while (reader.Read())
{
   price = decimal.Parse(reader["Price_Per_Ton"].ToString());
   break;
}
reader.Close(); 
```

如果我错了，请纠正我。感谢所有的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T05:34:16.727

*好吧*，我相信你只需要存储，当你想在查询中获取列时`Length`就可以使用。像;[`BETWEEN`](http://msdn.microsoft.com/en-us/library/ms187922.aspx)`Price`

```
Select Price
From YourTable
Where Length BETWEEN 11 AND 15 
```

这里是[`SQL Fiddle Demo`](http://www.sqlfiddle.com/#!3/ddd9d/1)。

`Length`但是只有当你知道每个范围的最大值和最小值时，这种结构才可以。如果您还想将它们存储在数据库中，您应该将两个不同的列分开`Length`。像;

```
Max_Length | Min_Length | Price
0          | 10         | 18
11         | 15         | 20 
16         | 20         | 30
21         | 40         | 45
41         |            | 60 
```

* * *

```
Select Price
From YourTable
Where Min_Length < 10.625 AND Max_Length > 10.625 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T05:36:33.997

您可以将结构更改为：

```
len_start    len_end      price
0            10           18
11           15           20
16           20           30
21           40           45
41           infinity     60 
```

并运行如下查询：

```
declare @len decimal
set @len= 10.615

select price from table
Where len_start <= @len and @len < len_end 
```

如果您打算使用 NULL 作为无穷大，请运行以下查询：

```
select price from table
Where (len_end is not null AND len_start <= @len and @len < len_end) OR 
      (len_end is null AND len_start <= @len) 
```

# php - 将表单数据发送到脚本时更改 PHP 获取请求的 URL

> ID：16052218
> 
> 赞同：1
> 
> 时间：2013-04-17T05:29:26.890
> 
> 标签：php, .htaccess

现在，提交表单后，URL 如下所示：

（其中“查询”是提交的数据）

```
http://mySite.com/index.php?search=query 
```

或者

```
http://mySite.com/?search=query 
```

我怎样才能做到

```
http://mySite.com/search?q=query 
```

如果可以在不编辑 .htaccess 文件的情况下执行此操作，请告诉我如何操作。

或者如果需要编辑 .htaccess，请教我添加什么规则，以便所有查询在提交时都具有该表单中的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:09:13.813

在这种情况下，我建议从*index.php*重定向而不是使用重写规则。重写规则也有成本，每次页面加载时都会检查它们

在*index.php*的开头：

```
<?php
if(!empty($_GET["search"]))
{
    header("Location: search?q=".rawurlencode($_GET["search"]));
    exit;
}
?> 
```

正如**Olaf Dietsche**在评论中正确指出的那样，mod_rewrite 优于 PHP，所以问题实际上是 index.php 与其他文件的*命中率*。如果它很低，php 方法肯定更好，但是，如果 index.php 达到 50% 左右的时间，那么重写可能会更好。

因此，还要添加 mod_rewrite 解决方案：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} (?:^|&)search=([^&]+)
RewriteRule ^index.php$ /search?q=%1 [R,L] 
```

`RewriteCond`实际上查找`search=`查询字符串参数并确保它不为空并且该规则只是将 index.php 中的任何内容重写为`/search?q=<query>` 注意`%1`用于匹配从条件匹配的第一个捕获的子模式（而不是从规则本身的匹配部分 - 在在这种情况下我们需要使用`$1`)。

* * *

然而，真正的问题是为什么我们首先要处理这个问题。如果搜索是通过在页面中提交一个值来完成的，那么它就是表单提交，因此它可以直接指向处理程序，之后不会重定向到那里。这效率更高。

```
<form action="/search" method="get">
<input type="text" name="q">
... 
```

这样，从搜索表单提交的任何内容都将直接转到`/search`并且不需要重定向来处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:55:32.593

添加一个 mod_rewrite 解决方案。您必须检查`index.php`和`search=`查询字符串

```
RewriteCond %{QUERY_STRING} search=(.*)
RewriteRule ^index\.php$ /search?q=%1 [R,L] 
```

# android - 我想从 GSM 网络获取时间

> ID：16052222
> 
> 赞同：4
> 
> 时间：2013-04-17T05:30:01.190
> 
> 标签：android, time, timezone, android-wifi

我正在使用此代码，但它通过 wifi 提供时间……当我关闭 wifi 时，它没有给我时间……我想从我的 GSM 服务提供商那里获得时间……我正在使用的代码。 .

```
LocationManager locMan = (LocationManager) arg0.getSystemService(Context.LOCATION_SERVICE);
        long networkTS = locMan.getLastKnownLocation(LocationManager.NETWORK_PROVIDER).getTime();
        Toast.makeText(arg0,""+networkTS,Toast.LENGTH_LONG ).show();
        Date date = new Date(networkTS);
        SimpleDateFormat format = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
        format.setTimeZone(TimeZone.getTimeZone("GMT+5:30"));
        String formatted = format.format(date);
        Toast.makeText(arg0,""+formatted,Toast.LENGTH_LONG ).show(); 
```

Mainifest 是，

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.block_time"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.block_time.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name=".Tim">
            <intent-filter>
                <action android:name="android.intent.action.TIME_SET" />
            </intent-filter>
        </receiver>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T05:39:44.260

```
 long networkTS = locMan.getLastKnownLocation(LocationManager.NETWORK_PROVIDER).getTime(); 
```

如果您想使用当前时间，getLastKnowLocation 返回的时间可能很旧

`locMan.requestSingleUpdate()`并通过网络提供商

# fluent-nhibernate - 集合映射中的重复列

> ID：16052224
> 
> 赞同：2
> 
> 时间：2013-04-17T05:30:04.770
> 
> 标签：fluent-nhibernate

```
我有一个表 XX 的映射文件，其中包含复合键 XX_ID 和 A_ID

     XX 级
    {
     复合标识符（）
                  .KeyProperty(x => x.Id, "XX_ID")
                  .KeyReference(x => xA, "A_ID");
    }

拥有另一个表 YY，其中包含复合键 YY_ID 和 A_ID。

  YY班
    {
     复合标识符（）
                  .KeyProperty(x => x.Id, "YY_ID")
                  .KeyReference(x => xA, "A_ID");
    }

现在我正在用表 XX 中的公用表 XX_YY 在 XX 和 YY 之间创建多对多关系，所以 XX 类是这样写的。

   XX 级
    {
     复合标识符（）
                  .KeyProperty(x => x.Id, "XX_ID")
                  .KeyReference(x => xA, "A_ID");

      HasManyToMany(x => x.XXList)
                 .Table("XX_YY")
                 .ParentKeyColumns.Add("XX_ID", "A_ID")
                 .ChildKeyColumns.Add("YY_ID", "A_ID")
                 .Cascade.All()
                 .LazyLoad();   
    }

它给了我错误：-
集合映射中的重复列：XX 列：A_ID

```

# javascript - javascript 创建的表具有可以拉伸到表宽度的行

> ID：16052227
> 
> 赞同：0
> 
> 时间：2013-04-17T05:30:17.720
> 
> 标签：javascript, html, css, dom

我在javascript中动态创建一个表并将其附加到一个div。生成的表格似乎与我在概念验证中使用的直接 html 表格具有所有相同的标签和样式，但表格单元格不会拉伸。

当我在表格上放置边框时，我看到表格本身的宽度为 100%，但轮廓单元格根本不会拉伸以填充它（它看起来像 Chrome 中另一个单元格表格中的表格）。

IE 和 Chrome 都给了我相同的行为。

这是我的代码：

```
 var tbl = document.createElement("table");  
    tbl.cellPadding = 0; tbl.cellSpacing = 0; 
    var tblBody = document.createElement("tblBody"); 
    var tr = document.createElement("tr"); 
    var td;

    td = document.createElement("td"); 
    td.style.width="70px"; 
    td.appendChild(this.getFirstDiv());
    tr.appendChild(td);

    td = document.createElement("td"); 
    td.style.width="300px"; 
    td.appendChild(this.getSecondDiv());
    tr.appendChild(td);

    td = document.createElement("td");
    td.appendChild(this.getThirdDiv());
    tr.appendChild(td);

    tblBody.appendChild(tr); 
    tbl.appendChild(tblBody); 
```

我觉得我在这里遗漏了一些明显的东西。我已经尝试过表格和表格行的显示属性。我试过宽度：自动。

我错过了什么？

# python - python按关键字拆分列表

> ID：16052228
> 
> 赞同：2
> 
> 时间：2013-04-17T05:30:21.567
> 
> 标签：python, split

我有一个清单如下：

```
['MARK_A', 8, 7702.5, 13, 7703, 983472],
['MARK_B', 10, 7702.5, 983472],
['MARK_B', 3, 7703.5, 983472],
['MARK_B', 6, 7701.2, 983472],
['MARK_B', 5, 7704.4, 983472],
['MARK_A', 9, 7701.5, 11, 7704, 983475],
['MARK_B', 10, 7702.5, 983475],
['MARK_B', 3, 7703.5, 983475],
['MARK_B', 6, 7701.2, 983475],
['MARK_B', 5, 7704.4, 983475]] 
```

如何将此列表拆分为 2 个列表，如下所示：

```
[['MARK_A', 8, 7702.5, 13, 7703, 983472],
['MARK_B', 10, 7702.5, 983472],
['MARK_B', 3, 7703.5, 983472],
['MARK_B', 6, 7701.2, 983472],
['MARK_B', 5, 7704.4, 983472]],
[ ['MARK_A', 9, 7701.5, 11, 7704, 983475],
['MARK_B', 10, 7702.5, 983475],
['MARK_B', 3, 7703.5, 983475],
['MARK_B', 6, 7701.2, 983475],
['MARK_B', 5, 7704.4, 983475]] 
```

列表中可以有任意数量的“MARK_A”，后跟一个或多个“MARK_B”。我将列表除以 [-1] 元素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T05:41:09.323

我`itertools.groupby`用于这类问题（得到一个集合集合，用内部集合中的标记拆分它）

```
from itertools import groupby

class GroupbyHelper:
    def __init__(self, token):
        self.token = token
        self.count = 0

    def __call__(self, item):
        self.count += (item[0] == self.token)
        return self.count

grouped_collections = \
[list(grouped) for _, grouped in groupby(collections, GroupbyHelper("MARK_A"))] 
```

上面代码的一些通用版本：

```
from itertools import groupby

class GroupbyHelper:
    def __init__(self, check_token):
        self.check_token = check_token
        self.count = 0

    def __call__(self, item):
        self.count += self.check_token(item)
        return self.count

grouped_collections = \
[list(grouped) for _, grouped in 
 groupby(collections, GroupbyHelper(lambda x: x[0] == "MARK_A"))] 
```

使用两个迭代器：

```
from itertools import tee, zip_longest

iter1, iter2 = tee(i for i, item in enumerate(collections) if item[0] == 'MARK_A')
next(iter2) #advance the second iterator so we can move by range

grouped_collections = \
[collections[s:e] for s, e in zip_longest(iter1, iter2, fillvalue=len(collections))] 
```

有时一个简单的 for 循环并不是那么糟糕：

```
grouped_collections = []
for lst in collections:
    if lst[0]=="MARK_A":
        grouped_collections.append([lst])
    else:
        grouped_collections[-1].append(lst) 
```

# javascript - 从 http://jsonip.appspot.com/?callback=? 获取 IP 地址时出现超过配额错误 在javascript中

> ID：16052232
> 
> 赞同：0
> 
> 时间：2013-04-17T05:30:40.627
> 
> 标签：javascript, jquery

我正在尝试获取用户的 IP 地址。为此，我使用以下代码：

```
 var jqxhr = $.getJSON("http://jsonip.appspot.com?callback=?",
                    function (data) { 
                        alert(data.ip);        
                    })
        .error(function () { alert("error"); }) 
```

一开始我能得到IP，但现在不行。它的给予

> 超过配额。此应用程序暂时超出其服务配额。请稍后再试

请帮助我如何摆脱这种情况，或者请向我建议一些其他有助于使用 jquery 或 javascript 获取 IP 的选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T06:06:31.383

您在这里使用的解决方案是通过 JSONP 使用其他人的免费查找服务。但是，通过免费服务，您无法保证正常运行时间或性能。这是有人编造出来的，目前没有积极维护。

该代码可能在谷歌的免费应用程序上运行，该应用程序具有配额系统。尽管配额相当慷慨（每月 500 万次浏览量），但似乎超出了配额。有关更详细的说明，请参阅[https://developers.google.com/appengine/kb/general#quota 。](https://developers.google.com/appengine/kb/general#quota)

您的永久解决方案不应依赖免费服务。

话虽如此，这应该对您有用： `http://jsonip.com?callback=?`

该服务仅限于IPV4，但我想乞丐不能成为选择者。撰写：[https ://news.ycombinator.com/item?id=2278874](https://news.ycombinator.com/item?id=2278874)

# fine-uploader - 在提交中设置参数

> ID：16052233
> 
> 赞同：0
> 
> 时间：2013-04-17T05:30:42.117
> 
> 标签：fine-uploader

查看文档，我试图将一些价值与图像一起发送。不确定我是否有参​​数：在正确的位置。遇到麻烦，不确定是客户端还是服务器端。

```
<script>
        $(document).ready(function(){
            var thumbnailuploader = new qq.FineUploader({
                element: $('#thumbnail-fine-uploader')[0],
                request: {
                    endpoint: 'image-uploader.cfc?method=Upload'
                },
                params: {
                   foo: {
                      one: 'bar',
                      two: 'bar2'
                   }
                },
                multiple: true,
                validation: {
                    allowedExtensions: ['jpeg', 'jpg', 'gif', 'png'],
                    sizeLimit: 102400 // 100 kB = 100 * 1024 bytes
                },
                text: {
                uploadButton: "\+ Click or Drop"
                 },
                callbacks: {
                    onComplete: function(id, fileName, responseJSON)
                            {
                                 if (responseJSON.success) {
                                     $('#thumbnail-fine-uploader').append('<img src="/Test/file2/files/' + responseJSON.filename +'" alt="' + fileName + '" style="width:150px;height:150px;">');
                                     $('#thumbnail-fine-uploader').append('<b style="color:red;">' + responseJSON.foone +'</b>');
                                                           }
                            }
                            }
            })
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:55:34.727

我在从文档中收集信息时遇到了类似的困难。Params BLOG 帖子中的示例代码没有足够的上下文。事实证明，您需要将 Params 块放在 Request 块中。这应该让你继续前进。

此页面提到了请求部分中的参数：http: [//docs.fineuploader.com/integrating/options/fineuploaderbasic.html](http://docs.fineuploader.com/integrating/options/fineuploaderbasic.html)

希望这可以帮助！

# iphone - 下载大视频会发出内存警告

> ID：16052234
> 
> 赞同：2
> 
> 时间：2013-04-17T05:30:46.807
> 
> 标签：iphone, objective-c, memory-management, download, filesystems

```
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    if(data != nil){
       //open output stream
        NSOutputStream *stream=[[NSOutputStream alloc] initToFileAtPath:_filePath append:YES];
        [stream open];
        NSString *str=(NSString *)data;

        //write to file
        NSUInteger left = [str length];
        NSUInteger bytesWritten = 0;
        do {
            bytesWritten = [stream write:[data bytes] maxLength:left];
            downloadedData = downloadedData + bytesWritten;
            if (-1 == bytesWritten) break;
            left -= bytesWritten;

        } while (left > 0);

        if (left) {
            NSLog(@"stream error: %@", [stream streamError]);
            [self handleForCurreptedDownloading];
        }
        [stream close];
    }
    else{
        NSLog(@"data nil");
    }
} 
```

也尝试使用此代码但无法正常工作，因为它给出了相同的内存警告

```
downloadedData += [data length];

        NSFileHandle *fileHandle = [NSFileHandle fileHandleForUpdatingAtPath:_filePath];
        [fileHandle seekToEndOfFile];
        [fileHandle writeData:data];
        [fileHandle closeFile]; 
```

这是我与 fileSystem 一起使用的代码，我直接编写并附加到文件中。我也用过ARC。当我尝试下载大型视频文件时，它仍然会发出内存警告并崩溃。

在下载磁盘空间之前我也检查过

```
+ (NSNumber *)getFreeSpace
{
//    float freeSpace = 0.0f;
    NSError *error = nil;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSDictionary *dictionary = [[NSFileManager defaultManager] attributesOfFileSystemForPath:[paths lastObject] error: &error];
    NSNumber *fileSystemFreeSizeInBytes = 0;
    if (dictionary) {
        fileSystemFreeSizeInBytes = [dictionary objectForKey: NSFileSystemFreeSize];
//        freeSpace = [fileSystemFreeSizeInBytes floatValue];
    } else {
        //Handle error
    }  
    return fileSystemFreeSizeInBytes;
} 
```

我检查了分配，它给了我稳定的图表。有没有其他方法可以下载和管理大型视频文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:58:48.293

You are getting the complete downloaded file data in the didReceiveData function - which probably is HUGE.

I would use a framework like [AFNetworking](https://github.com/AFNetworking) for your download needs, it makes things a lot simpler.

For example, for downloading large files without getting the whole data at once and then write it to a file, use a NSOutputStream to write parts of the file while they are downloaded.

This is from the [AFNetworking](https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ) documentation:

```
operation.outputStream = [NSOutputStream outputStreamToFileAtPath:@"download.zip" append:NO]; 
```

# javascript - Internet Explorer 和 Firefox 中的 jQuery 自动调整大小问题

> ID：16052236
> 
> 赞同：0
> 
> 时间：2013-04-17T05:30:59.363
> 
> 标签：javascript, jquery, wicket

我对 jQuery 和 JS 很陌生。最近我被分配到一个错误，其中 textarea 应根据该 textarea 中存在的文本调整焦点大小。
我们`$('textarea').autosize();`在 JS 文件中使用了函数。
这适用于最近的 FF 版本和最新的 IE (9+)，但不适用于 IE 7 和 FF 3.5.3

我找到[了这个](http://www.jacklmoore.com/autosize/)，但没有锻炼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:36:09.790

最简单的可能是在 上`focus event of the textarea`，您可以将 textarea 的当前文本填充到另一个`span`隐藏在视图中并具有与 textarea 相同的文本样式的文本。

一旦这个新的 span 有了文本，你就可以得到它`width and height`，然后将它们分配给 textarea。由于这些是非常原始的操作，它们必须在 IE7 和 FF3 中工作

# r - 按列拆分 data.frame 并将每列存储为一个对象，列名作为对象的名称

> ID：16052239
> 
> 赞同：1
> 
> 时间：2013-04-17T05:31:25.217
> 
> 标签：r, dataframe, col

嗨，这是我对 R 提出的一个基本问题。我知道可能有解决方案可以完成我的任务，但我想问一下为什么我的功能无法工作。

我有一个看起来像这样的 data.frame

```
A B C
1 2 3
2 3 4 
```

我想将每个值存储在 中`A`，`B`或存储`C`到具有名称的单个对象中`A`，`B`和`C`。

所以这里是我的功能

```
splitcolnames<-function(x)
  {for (i in colnames(x)){
    subset(x, select=c(i))->i}}
} 
```

但它不起作用。有人可以善良并指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T05:42:42.563

`data.frame`假设您的名称为“mydf” ，则以下其中一项应该为您完成。

```
lapply(names(mydf), function(x) assign(x, mydf[x], envir = .GlobalEnv))
lapply(names(mydf), function(x) assign(x, mydf[, x], envir = .GlobalEnv)) 
```

第一个将创建单列`data.frame`s，第二个将创建`vector`s。

干净会话中的示例：

```
> rm(list = ls())
> ls()
character(0)
> mydf <- data.frame(A = c(1, 2), B = c(3, 4))
> mydf
  A B
1 1 3
2 2 4
> invisible(lapply(names(mydf), function(x) assign(x, mydf[x], envir = .GlobalEnv)))
> ls()
[1] "A"    "B"    "mydf"
> A
  A
1 1
2 2
> rm(list = ls())
> mydf <- data.frame(A = c(1, 2), B = c(3, 4))
> invisible(lapply(names(mydf), function(x) assign(x, mydf[, x], envir = .GlobalEnv)))
> ls()
[1] "A"    "B"    "mydf"
> B
[1] 3 4 
```

在上面的例子中`invisible`抑制输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:13:09.757

虽然我同意@RomanLustrik 的评论，即这可能不是一个好主意，但您正在寻找的功能是`assign`

```
for (i in colnames(x)) 
  assign(i, subset(x, select=i))

> A
#   A
# 1 1
# 2 2

> B
#   B
# 1 2
# 2 3 
```

* * *

话虽这么说，你知道这个`attach`功能吗？

```
 ?attach 
```

# android - HTC、三星、谷歌和 Micromax 设备中相机动作的包名称

> ID：16052247
> 
> 赞同：0
> 
> 时间：2013-04-17T05:31:43.990
> 
> 标签：android, android-intent

我正在开发一个应用程序来根据用户的选择阻止/取消阻止摄像头。我正在使用 Intent 启动摄像头。

我没有真正的设备，据我所知，每个制造商的包装名称都不同。

如何获取每个制造商的相机动作的包和类名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-04T08:48:45.583

您可以从 Play 商店免费下载“包名称查看器”，*强调文本*将向您显示智能手机中的所有包名称， [您可以在此处下载应用程序](https://www.google.com.pk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0CB0QFjAA&url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.gijoon.pkgnameviewer%26hl%3Den&ei=xf2oVK_LLM30aMjkgKgK&usg=AFQjCNEXOQ2yDvNqcIIOehzGNJCuMRfwFg&sig2=AuTNb_KnzVIBI2CWSfJbrw&bvm=bv.82001339,d.d2s)

# php - 在一张表中计算两三天之间的天数

> ID：16052248
> 
> 赞同：1
> 
> 时间：2013-04-17T05:31:47.473
> 
> 标签：php, mysql, sql

我有一个名为 transaction_detail 的表，其中包含 id_transd、id_trans、id_cust 和 inputtime。

```
 id_transd | id_trans | id_cust | inputtime           |
  1         | 1        | 1       | 2013-04-15 16:55:58 | 
  2         | 1        | 1       | 2013-05-15 16:55:58 | 
  3         | 1        | 1       | 2013-06-15 16:55:58 |
  4         | 2        | 2       | 2013-06-15 16:55:58 | 
  ... 
```

我想获得具有相同 id_cust 和 id_trans 的输入时间量。
例如：当管理员想计算一个客户的工作完成了多长时间，那么管理员需要点击客户的名字，系统会计算日期。

```
 |No.| Name     | Process     | Time                |
 |1\. | D-net    | by sales    | 2013-04-15 16:55:58 |
 |   |          | by sadmin   | 2013-05-15 16:55:58 |
 |   |          | by technic  | 2013-06-15 16:55:58 | 
```

我试过这段代码

```
SELECT t.* datediff(DAY, t.inputtime, nextdate) AS Days_Between
FROM
  (SELECT t.*,
    (SELECT min(inputtime)
      FROM transaksi_detail t2
      WHERE t.id_cust = t2.id_cust
        AND t.id_trans = t2.id_trans
        AND t.inputtime < t2.inputtime) AS nextdate
   FROM transaction_detail t)t 
```

但不起作用，它说：

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in F:\htdocs\indosat2\hitung_tanggal2.php on line 20 
```

# linux - libxml2.so.2：无法打开共享对象文件：没有这样的文件或目录

> ID：16052250
> 
> 赞同：1
> 
> 时间：2013-04-17T05:32:05.937
> 
> 标签：linux, centos, libxml2, yum

我正在使用 Centos，其中我意外删除了 libxml2，现在它显示以下错误

导入运行 yum 所需的 Python 模块之一时出现问题。导致此问题的错误是：

libxml2.so.2：无法打开共享对象文件：没有这样的文件或目录

请安装提供此模块的软件包，或验证模块是否安装正确。

上述模块可能与当前版本的 Python 不匹配，即：2.4.3 (#1, Jun 18 2012, 08:55:31) [GCC 4.1.2 20080704 (Red Hat 4.1.2-52 )]

如果您无法自行解决此问题，请访问 yum 常见问题解答： [http ://wiki.linux.duke.edu/YumFaq](http://wiki.linux.duke.edu/YumFaq)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:41:48.927

您需要重新安装 libxml2 包。由于 yum 目前在您的系统上已损坏，您将需要通过其他方式获取 libxml2 软件包，例如`yumdownloader`在另一个（工作）系统上使用或访问您的存储库网站或从 CentOS 镜像之一。例如，这里是[i386 的 CentOS5.9 libxml2 rpm](http://mirrors.usc.edu/pub/linux/distributions/centos/5.9/updates/i386/RPMS/libxml2-2.6.26-2.1.21.el5_9.2.i386.rpm)的链接。

# asp.net-mvc - Mvc 路由未采用默认值

> ID：16052251
> 
> 赞同：0
> 
> 时间：2013-04-17T05:32:06.123
> 
> 标签：asp.net-mvc, asp.net-mvc-3, routes, asp.net-mvc-routing

我有两条路线

```
 routes.MapRoute(
          name: "Default",
          url: "{controller}/{action}/{id}",
          defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );

routes.MapRoute(
            name: "CustomRoute",
            url: "{country}/{lang}/{controller}/{action}",
            defaults: new { controller = "Test", action = "Index" }
        ); 
```

但是如果我尝试使用 /ES/es/ 之类的东西，我只能使用 /ES/es/Test/Action 之类的东西访问我的 CustomRoute 我有 404 错误，它找不到页面，我真的需要 /ES /es/方式。一些想法为什么不在 CustomRoute 中采用默认值？... 提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:40:23.587

请参考这个链接，希望这可以帮助你..

[https://codereview.stackexchange.com/questions/6543/custom-route-for-writing-friendly-urls-in-asp-net-mvc-3](https://codereview.stackexchange.com/questions/6543/custom-route-for-writing-friendly-urls-in-asp-net-mvc-3)

[http://www.deliveron.com/blog/post/SEO-Friendly-Routes-with-ASPnet-MVC.aspx](http://www.deliveron.com/blog/post/SEO-Friendly-Routes-with-ASPnet-MVC.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:20:01.053

您可以查看示例代码：

```
 //routes.MapRoute(
 //    "Default", // Route name
 //    "{controller}/{action}/{id}", // URL with parameters
 //    new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
 //);

   routes.MapRoute(
        "CustomRoute", // Route name
        "{country}/{lang}/{controller}/{action}", // URL with parameters
        new { country = "MyContry", lang = "Mylanguage", controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
   ); 
```

# php - 注册时检查错误

> ID：16052255
> 
> 赞同：-2
> 
> 时间：2013-04-17T05:32:13.787
> 
> 标签：php, html

我在我的 html 中添加了一个动态选择器，用于在注册时选择性别和国家，现在的问题是我如何使用 IF 和 Else 简写来检查用户是否同时选择了两者，以便注册完成，

这是我添加的选择器

```
<div>Gender:</div>
    <select id="gender" onfocus="emptyElement('status')">
      <option value=""></option>
      <option value="m">Male</option>
      <option value="f">Female</option>
    </select>
    <div>Country:</div>
    <select id="country" onfocus="emptyElement('status')">
      <?php include_once("country_list.php"); ?>
    </select>
    <div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:07:06.390

`name`您必须在表单输入中添加一个属性。

```
<select id="gender" name="gender" onfocus="emptyElement('status')">
<select id="country" name="country" onfocus="emptyElement('status')"> 
```

然后您可以检查它是否已设置。

```
if(!isset($_POST['gender'])) 
{
  //Do what you need to if it is not set (such as a redirect)
}
if(!isset($_POST['country'])) 
{
  //Do what you need to if it is not set (such as a redirect)
} 
```

希望有帮助。

# java - 标记器不分隔字符串？(JAVA)

> ID：16052257
> 
> 赞同：0
> 
> 时间：2013-04-17T05:32:15.483
> 
> 标签：java, string

我有一个名为 File Location 的类，它存储文件的大小、名称、驱动器和目录。

该类应该将扩展名与文件名（“java”与“test.java”）分开，然后使用equals方法将其与另一个文件进行比较。尽管由于某种原因，它每次都返回错误。知道有什么问题吗？

类文件

```
import java.util.*;

public class FileLocation
{
    private String name;
    private char drive;
    private String directory;
    private int size;

    public FileLocation()
    {
        drive = 'X';
        directory = "OOProgramming\\Practicals\\";
        name = "test";
        size = 2;
    }

    public FileLocation(char driveIn, String dirIn, String nameIn, int sizeIn)
    {
        drive = driveIn;
        directory = dirIn;
        name = nameIn;
        size = sizeIn;
    }

    public String getFullPath()
    {
        return drive + ":\\" + directory + name;
    }

    public String getFileType()
    {
        StringTokenizer st1 = new StringTokenizer(name, ".");

        return "File type is " + st1.nextToken();

    }

    public String getSizeAsString()
    {
        StringBuilder data = new StringBuilder();

        if(size > 1048575)
        {
            data.append("gb");
        }
            else if(size > 1024)
            {
                data.append("mb");
            }
                else
                {
                    data.append("kb");
                }

        return size + " " + data;
    }

    public boolean isTextFile()
    {
        StringTokenizer st2 = new StringTokenizer(name, ".");

        if(st2.nextToken() == ".txt" || st2.nextToken() == ".doc")
        {
            return true;
        }
            else
            {
                return false;
            }
    }

    public void appendDrive()
    {
        StringBuilder st1 = new StringBuilder(drive);
        StringBuilder st2 = new StringBuilder(directory);

        StringBuilder combineSb = st1.append(st2);
    }

    public int countDirectories()
    {
        StringTokenizer stDir =new StringTokenizer(directory, "//");
        return stDir.countTokens();
    }

    public String toString()
    {
        return "Drive: " + drive + " Directory: " + directory + " Name: " + name + " Size: " + size;
    }

    public boolean equals(FileLocation f)
    {
        return drive == f.drive && directory == f.directory && name == f.name && size == f.size;
    }

} 
```

测试程序

```
import java.util.*;

public class FileLocationTest
{
    public static void main(String [] args)
    {
        Scanner keyboardIn = new Scanner(System.in);

        FileLocation javaAssign = new FileLocation('X', "Programming\\Assignment\\", "Loan.txt", 1);

        int selector = 0;

        System.out.print(javaAssign.isTextFile());

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:38:51.177

看看我前一段时间发布的[我自己的问题](https://stackoverflow.com/questions/10052882/string-tokenization-in-java-large-text)。我最终使用了 Apache Lucene 的分词器。

这是你如何使用它（从[这里](https://stackoverflow.com/a/2638252/1262063)复制）：

```
 TokenStream tokenStream = analyzer.tokenStream(fieldName, reader);
    OffsetAttribute offsetAttribute = tokenStream.addAttribute(OffsetAttribute.class);
    CharTermAttribute charTermAttribute = tokenStream.addAttribute(CharTermAttribute.class);

    while (tokenStream.incrementToken()) {
        int startOffset = offsetAttribute.startOffset();
        int endOffset = offsetAttribute.endOffset();
        String term = charTermAttribute.toString();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:40:39.807

仅当文件为 doc 时，此代码才会返回 true。

```
 StringTokenizer st2 = new StringTokenizer(name, ".");

    if(st2.nextToken() == ".txt" || st2.nextToken() == ".doc") 
```

如果文件名 file.txt 那么发生了什么

```
 (st2.nextToken() == ".txt") means ("file" == "txt") false
      (st2.nextToken() == ".doc") means ("txt" == "txt") false 
```

第一个令牌将给出文件名第二个令牌将给出分机。

正确的代码是

```
 StringTokenizer st2 = new StringTokenizer(name, ".");
     String filename = st2.nextToken();
     String ext = st2.nextToken();
     if(ext.equalsIgnoreCase(".txt") || ext.equalsIgnoreCase(".txt")) 
```

使用 always equals 比较字符串 not ==

# iphone - sqlite 数据库 (coredata) 中的数据迁移问题

> ID：16052258
> 
> 赞同：3
> 
> 时间：2013-04-17T05:32:15.843
> 
> 标签：iphone, sqlite, core-data-migration

首先，我在我的中有两个实体`.xcdatamodeld`，`GameInfo`并且`Score`值存储在 sqlite db 中。

现在，我必须对我的 GameInfo 实体进行更改，添加一个新字段。所以在我的新 .xcdatamodeld Gameinfo 实体中，比旧的多了一个字段。

有什么方法可以从我的旧 sqlite 获取值到新的 sqlite 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T23:06:53.460

您需要实现数据库迁移。

我会研究自动轻量级迁移 - 看看[这个问题](https://stackoverflow.com/a/2312137/1103584)。

# c# - 无法将代码放入接口的解决方法

> ID：16052259
> 
> 赞同：5
> 
> 时间：2013-04-17T05:32:17.190
> 
> 标签：c#, interface

假设我有一个许多不同类实现的接口：

```
public interface IHaveObjects
{
    object firstObject();
} 
```

（注意：我不能让它成为抽象基类，因为 IHaveObjects 的实现者可能已经有一个基类。）

现在我想向接口添加一个新方法，以便接口的一个实现者可以对它有特殊的行为。理想情况下，我会做这样的事情：

```
public interface IHaveObjects
{
    object firstObject();
    object firstObjectOrFallback()
    {
        return firstObject();
    }
} 
```

然后转到接口的那个实现者并给它覆盖：

```
public class ObjectHaverPlus : IHaveObjects
{
    public override object IHaveObjects.firstObjectOrFallback()
    {
        return firstObject() ?? getDefault();
    }
} 
```

但是，在 C# 中禁止在接口中提供方法体，我想避免让每个实现者`IHaveObjects`都放弃`firstObjectOrFallback()`. （想象一下，如果有数百或数千个）

有没有办法在没有大量复制粘贴的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T05:43:56.457

如何引入从 IHaveObjects 继承的第二个接口。

比你只需要改变这些需要新接口和新方法的类。

这看起来像：

```
 interface I1
    {
        void Method1();
    }

    interface I2 : I1
    {
        void Method2();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T05:47:06.663

这就是接口的问题——它们没有任何默认实现，因此对它们的任何更改都是破坏性更改——即需要修改代码以使用新版本的接口。

由于您的实现已经有自己的基类 - 您不能将其转换为抽象类，也没有`C#`多类继承。

你能做的就是思考——它真的是一种接口方法吗？还是可以将其实现为`extension method`on 接口（没有尝试过，但我想它会正常工作）？

如果它是接口上的方法并且它应该保留在那里 - 您可能会考虑将此接口分为两部分，第二部分继承自第一个 ( `IHaveObjectsAndSupportDefault : IHaveObjects`) 并在真正需要默认值的情况下使用此接口（如其他一些答案所示）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T05:44:58.540

我可能误解了您的问题，但为什么不使用第二个界面，例如：

```
public interface IHaveObjectsEnhanced
{

    object FirstObjectOrFallback();
} 
```

然后你可以实现第一个和第二个接口：

```
public class ObjectHaverPlus : IHaveObjects, IHaveObjectsEnhanced
{

    public object FirstObject()
    {

    }

    public object FirstObjectOrFallback()
    {
         return FirstObject() ?? GetDefault();
    }

} 
```

# database - 如何提高使用delphi从表中加载树视图节点的速度

> ID：16052267
> 
> 赞同：-1
> 
> 时间：2013-04-17T05:32:53.573
> 
> 标签：database, performance, delphi, treeview, ado

使用递归函数从表中加载树视图节点很简单，但是对于大量数据需要很长时间。
我有一个包含这些字段的表：***id、title、parentid*** ：它将树视图节点保持在 N 级。

该表有超过 70000 行。当我从这个表中填充树视图时，需要很长时间（大约 9 分钟）才能完成。

有没有更好的解决方案来提高加载速度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T05:45:00.557

您可以尝试 TreeView.Items.BeginUpdate/EndUpdate。

但是在可视化控制中存储 70000 行是一个值得商榷的想法。您是否考虑过 Virtual TreeView 或仅显示数据表的一小部分的其他方式？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T06:23:59.570

随着大小的增加，标准的 TTreeView 会很快变慢。VirtualTreeview 是一个完美的解决方案，可以处理数百万个节点而不会降级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T07:13:35.893

我对 TreeView 控件做了一个简单的扩展。它非常快。它将内部存储移动到字典中，这会产生巨大的影响。在我的真实示例中，我需要加载 100000 条记录。之前是37分钟，现在是2.2秒！！

您可以在 CodeProject 上找到示例和代码：http: [//www.codeproject.com/Articles/679563/Fast-TreeView](http://www.codeproject.com/Articles/679563/Fast-TreeView)

啊，抱歉，我错过了 Deplhi 部分。我的例子是 C# WindowsForms ....

# c++ - 为什么不能在 C++ 中重新初始化引用？

> ID：16052269
> 
> 赞同：1
> 
> 时间：2013-04-17T05:33:05.363
> 
> 标签：c++, pointers, reference

为什么引用不能在 C++ 中重新初始化，而指针可以重新初始化？

```
int x=5;
int y=6;
int *p1;
p1 = &x;
p1 = &y; //re-initializing the pointer but same can not be done with references
int &r1 =x;//can be initialized only once 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:36:05.843

没有明显的语法。你不能使用正常的`=`语法；它将值设置为引用的基础指针。也许你可以想出这样的语法：

```
&my_reference = new_value; 
```

但这有点奇怪和尴尬。

# java - Spring 共享全局状态的方式？

> ID：16052270
> 
> 赞同：3
> 
> 时间：2013-04-17T05:33:05.870
> 
> 标签：java, spring, dependency-injection, global-variables

在应用程序中维护全局状态时，有两个主要问题 -

1.  共享全局常量
2.  共享全局动态

因为`(1)`我`PropertyPlaceholderConfigurer`用来将全局常量注入到 bean 中。

为了共享全局动态状态，我创建了一个带有公共静态成员的中心类。例如

```
public class GlobalState {
    public static MyObject myObj;
} 
```

我无法注入`myObj`，因为它的状态需要在运行时计算，然后在应用程序的所有模块之间共享。

我对上述方法中的紧密耦合感到不舒服。静态使重构代码变得困难。稍后，如果我想`Aspect`对所有读取调用应用一个，`GlobalState`那是不可能的。

使用 Spring 管理全局动态状态的最佳方法是什么？

这是我脑海中的两个**假设**（不知道Spring是否促进这些）解决方案-

1.  在运行时动态放置`myObj`到 spring 上下文中。然后要求 Spring 将新实例重新注入到所有声明依赖项的 bean 中（在初始化上下文时最初可以注入 null）。
2.  有一个像`ValueStack`Spring 一样的 Struts，我可以在上面放置我的原始值，其他类可以使用上下文引用从那里加载它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:08:32.793

为什么不`GlobalState`通过实例方法注入并提供计算数据？

另外，我不明白为什么您不能注入运行时计算的结果（`myObj`）？例如，您可以实现`InitializingBean`在应用程序的所有相关部分启动后触发计算（只需注入您计算所需的内容，Spring 负责实例化顺序）。

### 更新

其他可能性是[将 bean 定义为静态工厂方法的结果](http://static.springsource.org/spring/docs/3.0.x/reference/beans.html#beans-factory-class-instance-factory-method)，或者创建一个[BeanDefinitionRegistryPostProcessor](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/support/BeanDefinitionRegistryPostProcessor.html)来执行您的计算并将计算结果添加到应用程序上下文中。

# android - 如何在活动之间传递和获取 Intent

> ID：16052291
> 
> 赞同：-2
> 
> 时间：2013-04-17T05:34:56.157
> 
> 标签：android

我正在制作一个程序，其中我需要使用*活动之间的 Intent***将值从一个活动传递到另一个**活动。

 *所以这是我的问题*How to Pass and Get an Intent into another activity*。

请参阅下面的代码，**使用按钮单击**我想将意图传递给另一个活动..

*FirstActivity.java：*

```
 public class FirstActivity extends Activity {
// Initializing variables
EditText inputName;
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.screen1);

    inputName = (EditText) findViewById(R.id.name);
    Button btnNextScreen = (Button) findViewById(R.id.btnNextScreen);

    //Listening to button event
    btnNextScreen.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            //Code to start a new Intent and to pass value

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T05:38:29.083

这里没什么难的，您只需使用以下代码将名称的值从 FirstActivity 传递给 SecondActivity：

```
 btnNextScreen.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            //Starting a new Intent
            Intent nextScreen = new Intent(getApplicationContext(), SecondActivity.class);

            //Sending data to another Activity
            nextScreen.putExtra("name", inputName.getText().toString());
            startActivity(nextScreen);

        }
    });
} 
```

并在第二个活动中使用 onCreate() 方法中的以下代码：

```
 TextView txtName = (TextView) findViewById(R.id.txtName);     
 Intent i = getIntent();
    // Receiving the Data

    String name = i.getStringExtra("name");
    txtName.setText(name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:16:51.583

是的， **Ketlyen**，我同意*@klamitsuri*

您只**需要**像他在代码中显示的那样传递值：

```
 Intent nextScreen = new Intent(getApplicationContext(), SecondActivity.class);

        //Sending data to another Activity
        nextScreen.putExtra("name", inputName.getText().toString());
        startActivity(nextScreen); 
```

并简单地使用：

```
 Intent i = getIntent();
// Receiving the Data

String name = i.getStringExtra("name"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T05:36:34.703

在你的第一个活动中

```
 btnNextScreen.setOnClickListener(new View.OnClickListener() {

    public void onClick(View arg0) {
       Intent i= new Intent(firstActivity.this,secondActivity.class);
       i.putExtra("key","mystring");// key and the value
       startActivity(i);

    }
  });
} 
```

在你的第二个活动 onCreate()

```
setContentView(R.layout.second); 
Bundle extras= getIntent().getExtras();
if(extras!=null)
{
 TextView tv= (TextView)findviewById(R.id.textView1);
 String value = extras.getString("key"); // get the value based on the key
 tv.setText(value); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T05:37:35.577

在您当前的 Activity 中，创建一个新的 Intent：

```
Intent i = new Intent(FirstActivity.this, NewActivity.class);
i.putExtra("new_variable_name","value");
startActivity(i); 
```

然后在新的 Activity 中，检索这些值：

```
Bundle extras = getIntent().getExtras();
if (extras != null) {
    String value = extras.getString("new_variable_name");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T05:43:11.677

您可以使用 startActivityForResult(intent,result); 传递值或数据。

并获取前一个活动发送的值覆盖函数 onActivityResult(int requestCode, int resultCode,Intent data);

例如：

```
 public class MyActivity extends Activity {
 ...

 static final int PICK_CONTACT_REQUEST = 0;

 protected boolean onKeyDown(int keyCode, KeyEvent event) {
     if (keyCode == KeyEvent.KEYCODE_DPAD_CENTER) {
         // When the user center presses, let them pick a contact.
         startActivityForResult(
             new Intent(Intent.ACTION_PICK,
             new Uri("content://contacts")),
             PICK_CONTACT_REQUEST);
        return true;
     }
     return false;
 }

 protected void onActivityResult(int requestCode, int resultCode,
         Intent data) {
     if (requestCode == PICK_CONTACT_REQUEST) {
         if (resultCode == RESULT_OK) {
             // A contact was picked.  Here we will just display it
             // to the user.
             startActivity(new Intent(Intent.ACTION_VIEW, data));
         }
     }
 }} 
```*

# jquery - MediaElement.js Flash Fallback IE7 和 IE8 寻求导致内存不足错误

> ID：16052293
> 
> 赞同：1
> 
> 时间：2013-04-17T05:35:03.897
> 
> 标签：jquery, mediaelement.js

我发现，当您在视频中向前搜索或简单地将鼠标悬停在进度条上时，使用带有 flash 回退的 mp4 会导致 JQuery 中的内存不足错误。

我已经关闭了进度功能，这似乎解决了这个问题。关于为什么会发生这种情况的任何想法？它与 Flash 中的 mp4 流有关吗？

```
$('audio,video.default').mediaelementplayer({
    // enable debugger
    enablePluginDebug:false,
    // turned off progress
    features: ['playpause','current','duration','volume','fullscreen'],
    alwaysShowControls: true,
    // force iPad's native controls
    iPadUseNativeControls: true,
    // force iPhone's native controls
    iPhoneUseNativeControls: true,
    // force Android's native controls
    AndroidUseNativeControls: true,
    // turns keyboard support on and off for this instance
    enableKeyboard: false,
    // when this player starts, it will pause other players
    pauseOtherPlayers: true,
    // initial volume when the player starts
    startVolume: 0.8,
    // log error(s)
    error : function(mediaElement)
    {
        console.log('mediaelement problem is detected: '.mediaElement);
    }
}); 
```

# android - 如何在android中找到默认应用程序？

> ID：16052297
> 
> 赞同：0
> 
> 时间：2013-04-17T05:35:17.317
> 
> 标签：android, default

我有一个 android 应用程序，它列出了设备的系统和已安装的应用程序。还可以在单​​击时启动选定的应用程序。它工作正常。现在我想禁用以下应用程序的列表。

1.  `Task Manager`（在长按主页按钮时显示）

2.  `Settings`

这些是三星 Galaxy 设备中使用的名称。我想在 、 和 设备中获取用于这些目的的应用程序的包名称和启动`Sony Ericson`器`Google phones`活动名称`HTC`。`Samsung`

我还想要应用程序的包名称`Camera`，`Email`并`Gmail`在这些设备中使用。

简而言之：我想在指定设备中获取这些应用程序的包名，因为有很多应用程序可以用于一个目的。例如：，有很多应用程序可以用作任务管理器，我们也可以更改默认任务管理器并为此使用自定义应用程序。所以我不知道用户设备中使用的是哪个。我们可以使用 Intent 和 ResolverActivity 找到家庭启动器应用程序。这样有什么方法可以获取所有列表可以用作任务管理器、相机处理应用程序等的应用程序...？

任何帮助都非常重要。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:04:15.680

查看任务管理器和设置没有包名称您可以使用此代码禁用任务管理器

```
 public void onWindowFocusChanged(boolean hasFocus) {
super.onWindowFocusChanged(hasFocus);

    Log.d("Focus debug", "Focus changed !");

if(!hasFocus) {
    Log.d("Focus debug", "Lost focus !");

    Intent closeDialog = new Intent(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
    sendBroadcast(closeDialog);
}
} 
```

和设置转到使用

```
 startActivityForResult(new Intent(android.provider.Settings.ACTION_SETTINGS), 0); 
```

通过使用，您可以禁用和启用。通过最后 gmail、电子邮件、相机，您可以通过网络搜索并在您的代码中使用。

一切顺利：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:57:57.933

转到 google play 商店并安装包名称查看器（[https://play.google.com/store/apps/details?id=com.gijoon.pkgnameviewer&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5naWpvb24ucGtnbmFtZXZpZXdlciJd](https://play.google.com/store/apps/details?id=com.gijoon.pkgnameviewer&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5naWpvb24ucGtnbmFtZXZpZXdlciJd)）你可以看到每个包的名称和每个应用程序。

# symfony - 向 Symfony2 实体添加功能

> ID：16052306
> 
> 赞同：0
> 
> 时间：2013-04-17T05:35:49.750
> 
> 标签：symfony

我对如何为我的实体添加功能感到困惑。

假设我有一张费用增加表。我的数据库表有这些字段

*   company_id
*   日期
*   数量

我已经`FeeIncrease`在我的 Symfony2 项目中创建了相应的实体。

现在，对于我的应用程序的一部分，我需要显示`HTML`一个特定月份发生的所有费用增加的表格。该表将包含数据库表中的所有字段，但还将包含一个附加字段：先前的费用金额。像这样的东西：

```
company_id | date       | amount | previous_amount
-----------+------------+--------+----------------
1          | 2013-02-03 | 500    | 400
3          | 2013-02-15 | 1000   | 800
8          | 2013-02-20 | 1100   | 500 
```

从数据库的角度考虑，每一行都需要一个从表中选择最新费用增加的子查询（即，它查询当前增加日期之前的最新日期的费用增加）。

目前我正在使用[Native SQL](http://docs.doctrine-project.org/en/latest/reference/native-sql.html)编写子查询，但业务逻辑的复杂性已经表明这不是一个长期的解决方案。不同的页面需要不同的“where”子句，所以我将为每个页面编写一个新查询。此外，还有更多逻辑需要应用于字段本身，我更愿意将此逻辑封装在其他对象中，而不是像现在这样让它漂浮在我的控制器和视图周围。

**我的问题本质上是，如何向我的实体添加依赖于实体数据的额外属性？**

理想情况下，我会向我的实体添加一个`$previousAmount`属性。将是一种为我进行复杂查询的方法。但是我怎样才能添加这个方法并让它利用 Doctrine 的功能呢？例如，假设我用来获得一系列费用增加。然后，在我的模板中，我遍历数组，但是对于每次费用增加，我都会显示之前的金额：`FeeIncrease``getPreviousAmount``->findAll()`

```
{% for feeIncrease in feeIncreases %}
  {{ feeInrease.previousAmount }}
{% endfor %} 
```

对于每次增加，这将导致另一个数据库调用。考虑到我想显示的费用增加次数，这在我的情况下是不可用的。

任何指针将不胜感激。

更新：

这是我正在谈论的一个例子。

我上面描述的费用增加与合同有关。每份合同都有很多费用增加。每个月，每份合约都有一个“当前”费用，由以下规则确定：

*   如果合同从该月开始有新的费用增加，请使用该金额。
*   如果一份合同在该月结束时增加了费用，而不是后续的另一份，则使用该金额。

还有其他规则。所以我的问题是，我可以把这些规则放在哪里，这样当我实际使用我的`contract`和`feeIncrease`对象时，我可以使用类似的方法，`contract.currentFee`而不必在任何地方添加所有这些逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:26:53.327

您可以使用与您的实体耦合的[存储库](http://symfony.com/doc/current/book/doctrine.html#custom-repository-classes)：这样您就可以将所有 sql（或 DQL 或查询构建器）保存在同一个地方，甚至可以对其进行参数化。
这种方法的一个优点是您甚至可以使用相同的查询获取*所有数据*，并将返回的值使用到 twig 模板中，而无需对教义的延迟加载工具进行检索操作。

所以你会有一个像`FeeIncrease`

```
/**
* @ORM\Table(name="FeeIncrease")
* @ORM\Entity(repositoryClass="Company\BundleNameBundle\Repository\FeeIncreaseRepository")
*/

class FeeIncrease
{
  [...]
} 
```

在其中指定存储库位置，然后以这种方式创建存储库

```
//Company\BundleNameBundle\Repository\FeeeIncreaseRepository
<?php

namespace Company\BundleNameBundle\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * FeeIncreaseRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */

class FeeIncreaseRepository extends EntityRepository
{
  public function myCostumQuery($paramers)
  {
    //your own logic here
  }
} 
```

# mysql - MySQL 连接的一部分的限制

> ID：16052309
> 
> 赞同：-1
> 
> 时间：2013-04-17T05:35:58.487
> 
> 标签：mysql, sql

目前，我正在使用以下 SQL 查询来找出用户所在的房间以及这些房间中的其他用户：

```
SELECT r1.room, r2.user 
FROM 
   rooms r1 JOIN rooms r2 ON r2.room = r1.room 
WHERE r1.user='foobar' 
```

样板间表：

```
room  |  user
a     |  user1
b     |  user1
c     |  user1
a     |  user2
a     |  user3
a     |  user4 
```

我想将**同一房间中的其他用户**限制为每个房间返回 50 个用户，但不限制房间数量。这可能在单个查询中吗？

**user1**的示例响应（假设我想将其限制为每个房间返回 3 个用户）：

```
a, user1
a, user2
a, user3
b, user1
c, user1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:31:18.883

这是可能的，通过一些有趣的参数使用和派生表的嵌套：

```
SET @user = 'user1';
SELECT
  calclist.room,
  calclist.user
FROM
  (
    SELECT
      joinedlist.room 'room'
      , joinedlist.user 'user'
      , IF(joinedlist.room=@room, @rownum:=@rownum+1, @rownum:=1) 'count'
      , (@room:=joinedlist.room) dummy
    FROM
        (
          SELECT
            roommate_rooms.room,
            roommate_rooms.user
          FROM
            rooms user_rooms
            INNER JOIN rooms roommate_rooms
              ON user_rooms.room = roommate_rooms.room
          WHERE user_rooms.user = @user
          ORDER BY 
            roommate_rooms.room,
            roommate_rooms.user
          ) joinedlist
      JOIN (SELECT @rownum:=1) rn
  ) calclist
WHERE calclist.count <= 3
; 
```

它可以应对用户在任意数量的房间，有或没有任何室友；不共享任何房间的任意数量的其他用户；它可以处理“乱序”输入的数据。[SQL Fiddler](http://www.sqlfiddle.com/#!2/6a338/3/0)上的工作示例；并感谢[Jimmy's Blog](http://jimmod.com/blog/2008/09/displaying-row-number-rownum-in-mysql/)如何使用动态参数进行计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:03:12.750

```
SELECT  a.*
FROM    rooms a
WHERE   
        (
            SELECT  COUNT(*)
            FROM    rooms b
            WHERE   a.room = b.room AND
                    a.user >= b.user
        ) <= 3
ORDER   BY a.Room, a.User 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/760a8/6)

# java - 单个 Imagebutton 用作启动-停止-启动

> ID：16052311
> 
> 赞同：1
> 
> 时间：2013-04-17T05:36:02.197
> 
> 标签：java, android, imagebutton

在我的 android 项目中，我采用了 2 个图像按钮（开始和停止）。当我按下 START IMAGE BUTTON 然后它又转换为 STOP IMAGE BUTTON 但是当我按下 STOP IMAGE BUTTON 时它没有转换成 START BUTTON.so 让我知道问题出在哪里。

```
 mImageButton.setOnFocusChangeListener(
  new OnFocusChangeListener()
  {
  @Override
  public void onFocusChange(View v, boolean hasFocus) {
  // TODO Auto-generated method stub
  if (hasFocus==true)
  {
      mImageButton.setImageResource(R.drawable.stop);
  }
 else
 {
  mImageButton.setImageResource(R.drawable.play);
 }
  }
 });

 mImageButton.setOnClickListener(
 new OnClickListener() {
 @Override
 public void onClick(View v) {
 // TODO Auto-generated method stub
 mImageButton.setImageResource(R.drawable.stop);
   }
   });     
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:40:42.690

在 Android`onFocusChange`之前被调用`onCLick`。无论您在`onFocusChange`方法中设置什么都将被忽略，因为`onClick`接下来会调用 ，并将图像 bak 更改为`R.drawable.stop`.

您根本不应该使用`onFocusChange`您正在尝试做的事情。仅使用 onClick 代替。

```
private boolean pCurrentlyPlaying = false;

...

mImageButton.setOnClickListener(
    new OnClickListener() {
       @Override
       public void onClick(View v) 
       {
           int image = pCurrentlyPlaying ? R.drawable.stop : R.drawable.play;
           mImageButton.setImageResource(image);
           pCurrentlyPlaying = !pCurrentlyPlaying ;
       }
    }); 
```

您也可以使用 ToggleButton，[这里是一个](https://stackoverflow.com/a/2751320/1821029)如何在 XML 中定义它的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:44:58.170

试试这个代码..可能会帮助你。

```
 boolean isStart = true ;
 boolean isStop = false;
 mImageButton.setOnClickListener(
 new OnClickListener() {
 @Override
 public void onClick(View v) {
// TODO Auto-generated method stub
 if(isStart){
 isStart =false ;
 isStop = true ;
 mImageButton.setImageResource(R.drawable.play);
 }else{
 isStart = true ;
isStop = false;
mImageButton.setImageResource(R.drawable.stop);
 }
}
});     
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T05:40:54.920

您正在切换按钮图像`onFocusChangeListener`而不是`onClickListener`. `ToggleButton`似乎适合您所描述的场景。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T05:44:12.270

正确的方法是使用选择器

在 drawable 中创建以下 ImgBtnSelector.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item
     android:state_pressed="true"
     android:drawable="@drawable/custom_info_bubble1" />
    <item 
     android:state_pressed="false"
     android:drawable="@drawable/custom_info_bubble" />
</selector> 
```

在我们的布局 xml 中，将图像按钮背景设置为此选择器。

这是选择器上的[链接](https://stackoverflow.com/questions/4755871/how-to-set-image-button-backgroundimage-for-different-state)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T05:47:52.980

```
Boolean isStart=true;//This is global

mImageButton.setOnClickListener(
 new OnClickListener() {
 @Override
 public void onClick(View v) {
 // TODO Auto-generated method stub
if(isStart)
 mImageButton.setImageResource(R.drawable.stop);
else
 mImageButton.setImageResource(R.drawable.start);

isStart=!isStart;
   }
   });     
 }
} 
```

这就是你需要松开 onfocusChanged 部分

# java - 序列化对象时如何强制杰克逊将数字写为字符串

> ID：16052314
> 
> 赞同：19
> 
> 时间：2013-04-17T05:36:03.770
> 
> 标签：java, javascript, json, jackson

我的一个 java 对象上有一个非常大的 id。当杰克逊将其转换为 JSON 时，它会将其作为数字发送（例如 {"id":1000110040000000001}），但一旦它成为 javascript 对象，id 就会更改为 1000110040000000000。我[在这里读到了这个问题](https://stackoverflow.com/questions/15869275/json-not-converting-long-numbers-appropriately)

当 id 较小时，它工作正常。我的第一个想法是强迫杰克逊将所有数字转换为字符串，但我也愿意接受其他选择。如果可能的话，我不希望将 Jackson 注释添加到我的 java 对象中。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-09-23T19:51:07.550

Jackson-databind（至少 2.1.3）提供了特殊的 ToStringSerializer。那是为我做的。

```
@Id @JsonSerialize(using = ToStringSerializer.class)
private Long id; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-03-09T20:58:58.160

`com.fasterxml.jackson.core:jackson-core:2.5.4`提供 JsonGenerator.Feature.WRITE_NUMBERS_AS_STRINGS 进行`ObjectMapper`配置。

```
final ObjectMapper objectMapper = new ObjectMapper();
objectMapper.configure(JsonGenerator.Feature.WRITE_NUMBERS_AS_STRINGS, true);

Foo foo = new Foo(10);
System.out.println("Output: " + objectMapper.writeValueAsString(foo)); 
```

> 输出：{"a":"1"}

```
class Foo {
    @XmlElement(name = "a")
    Integer a
} 
```

要包含依赖项：

```
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-core</artifactId>
    <version>2.7.2</version>
</dependency> 
```

# php - 将变量从一个 PHP 表单获取到另一个

> ID：16052317
> 
> 赞同：0
> 
> 时间：2013-04-17T05:36:10.737
> 
> 标签：php

php新手，没有这方面的代码，只是一个问题。我有一个接受用户输入的表单，然后验证输入。input.php 如果无效，则重复输入页面。如果有效，则继续执行另一个 process.php

我不明白的是如何将用户数据从 input.php 获取到 process.php 我更喜欢这样做而不将数据存储在数据库或文件中。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:39:56.647

您可以使用 SESSION 在服务器上存储值或使用 GET 通过 URL 传递值。

请参阅 php 手册以了解如何使用[$_SESSION](http://php.net/manual/en/reserved.variables.session.php)和[$_GET](http://www.php.net/manual/en/reserved.variables.get.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T05:38:43.413

在 process.php 上只需打印数据，`$_POST ,$_GET or $_REQUEST`您将获得通过表单处理的数组中的所有数据。例如。索引.php

```
<html>
<body>

<form action="process.php" method="post">
Name: <input type="text" name="fname">
Age: <input type="text" name="age">
<input type="submit">
</form>

</body>
</html> 
```

进程.php

```
<html>
<body>

Welcome <?php echo $_POST["fname"]; ?>!<br>
You are <?php echo $_POST["age"]; ?> years old.

</body>
</html> 
```

# entity-framework - 具有 OData（Web API）的实体框架默认发送 Order By 子句到 Sql Query

> ID：16052326
> 
> 赞同：6
> 
> 时间：2013-04-17T05:36:38.623
> 
> 标签：entity-framework, asp.net-web-api, odata

我正在将 Web Api 与 OData 一起使用。我在 EF 5.0 中定义了一个实体。
我正在向 Controller:: 发送非常简单的请求

```
 $.ajax({url: "/odata/Details?$top=10",
            type: "GET",
            dataType: 'json',
            success: function (data) {
               viewModel.list(data.value);
            } 
```

现在在我的控制器上编码::

```
 [Queryable]
    public override IQueryable<Area> Get()
    {  
    return db.Area.AsQueryable();
    } 
```

我使用 SQL Profiler 看到的查询::

```
 SELECT TOP (@p__linq__1) 
[Project1].[id] AS [id1], 
[Project1].[name] AS [name1], 
[Project1].[pucrhase] AS [pucrhase1], 
[Project1].[sale] AS [sale1]
FROM Area
ORDER BY [Project1].[id] DESC, [Project1].[name] ASC, [Project1].[pucrhase] ASC,      
[Project1].[sale] ASC,N',@p__linq__1 int,@p__linq__1=10 
```

我没有要求任何订购，按条款订购。EF 自己将 ORDER BY 子句添加到 Query 中。添加的 Order By 子句包含表的所有列。该表有 300 万条记录，查询超时，因为它是按所有列排序。

我通过删除 Order By 进行了测试，它花了不到一秒钟的时间完成

所以问题是

如何阻止实体框架（支持 Web Api Odata）将 Order By 子句发送到 Sql Query。

如何从服务器上运行的 SQL 查询实体框架（Web Api Odata）中删除 Order By 子句？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T05:54:49.810

我不确定这是否是正确的答案，但我假设 odata 服务正试图通过对模型中的所有属性进行排序来保持稳定的排序顺序。

因此尝试

```
[Queryable(EnsureStableOrdering=false)] 
```

# c++ - 带有 LAPACK/BLAS 的可变大小数组

> ID：16052328
> 
> 赞同：1
> 
> 时间：2013-04-17T05:36:46.533
> 
> 标签：c++, lapack, blas

我的最后一个问题不是很清楚。所以再发一次。我正在尝试使用 BLAS 例程 dgemm 进行矩阵乘法。由于我希望输入到 dgemm 的数组大小不固定，因此我正在创建一个可变大小的数组。但这似乎不起作用，因为我不断收到异常错误。我的代码如下：

```
#include "stdafx.h"
#include<iostream>

using namespace std;

extern "C" void dgemm_(const char *TRANSA, const char *TRANSB, const int *M, const int *N, const int *K, double *ALPHA, double **A, const int *LDA, double **B, const int *LDB, double *BETA, double **C, const int *LDC);

int main(void)
{
    int MatSize = 2;
    double **A= new double *[MatSize];
    double **B= new double *[MatSize]; 
    double **C= new double *[MatSize];
    for (int i=0; i<MatSize; i++)
    {
        A[i] = new double[MatSize];
        B[i] = new double[MatSize];
        C[i] = new double[MatSize];
    }
    A[0][0] =  1;
    A[0][1]= 2;
    A[1][0] = 1;
    A[1][1]=2;
    B[0][0] = -2;
    B[0][1]= 3;
    B[1][0]= 2;
    B[1][1]= 2;
    char TRANS = 'N';
    char TRANS2 = 'N';
    double ALPHA = 1;
    double BETA = 0;
    dgemm_(&TRANS, &TRANS, &MatSize, &MatSize, &MatSize, &ALPHA, A, &MatSize, B, &MatSize, &BETA, C, &MatSize);
    cout << C[0][0] << C[0][1] << endl;
    cout << C[1][0] << C[1][1] << endl;
    getchar();
    return 0;
} 
```

任何输入都会有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T05:48:23.810

您尝试将数组数组传递给 dgemm，即指针数组（指向数组）。当然这是不可能的，你必须传递一个双精度数组。

请参阅[此处](http://www.netlib.org/clapack/cblas/dgemm.c)了解 dgemm 标头，它需要 double*，而不是 double**。

# java - 除了第一个索引上的计数之外，输出的值都是正确的

> ID：16052330
> 
> 赞同：3
> 
> 时间：2013-04-17T05:36:51.293
> 
> 标签：java, arrays

```
import java.util.*;

public class Test {

    public static void main(String[] args)
    {

        int[] number = new int[50];
        int index = 0;
        boolean swap = true;
        int temp;

        Scanner keyboard = new Scanner(System.in);
        System.out.print("Enter Number: ");
        System.out.println(" ");
        do
        {
            int input = keyboard.nextInt();
            if (input != -999)
                number[index++] = input;
            else
                break;
        } while (index != 0);

        int[] newNumbers = new int[index];
        for (int i = 0; i < index; i++)
            newNumbers[i] = number[i];

        System.out.println("\nNumbers\t" + "Occurances");
        goBack: for (int i = index - 1; i >= 0; i--)
        {
            for (int n = index - 1; n > i; n--)
                if (newNumbers[n] == newNumbers[i])
                    continue goBack;

            int count = 0;
            for (int n = 0; n < index; n++)
                if (newNumbers[n] == newNumbers[i])
                    count++;

            for(int s=0; s < newNumbers.length-1; s++){
                for(int j=1; j < newNumbers.length-s; j++){
                   if(newNumbers[j-1] > newNumbers[j]){
                       temp=newNumbers[j-1];
                       newNumbers[j-1] = newNumbers[j];
                       newNumbers[j] = temp;
                   }
               }
           }
            System.out.println( newNumbers[i] + "  " + count);
        }
    }
} 
```

该代码旨在通过键盘扫描仪获取输入。输入的整数被比较，数组 number[] 的不同元素列表将被排序和打印。但是，输入列表包含某些元素的倍数。重复的元素被标记为计数。最终输出应该是不同数组元素（无重复）的列表，按从最大到最小的顺序及其各自的计数。

输入如下：-12, 3, -12, 4, 1, 1, -12, 1, -1, 1, 2, 3, 4, 2, 3, -12 当排序完成并且打印出来时，索引 4 的计数应为 2，而它的计数应为 2。我尝试了选择、冒泡和交换排序算法，结果都相似。任何建议将不胜感激 ：） 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:41:19.793

希望这会有所帮助，尽管可能是比这更好的解决方案：

```
public static void main(String[] args) {

    int[] numbers  = new int[50] ;
    int index = 0;
    int temp;
    Scanner keyboard = new Scanner(System.in);
    // get the user input
    System.out.print("Enter Number: ");
    System.out.println(" ");
    do {
        int input = keyboard.nextInt();
        if (input != -999)
            numbers[index++] = input;
        else
            break;
    } while (index != 0);
    keyboard.close();
    System.out.println("\nNumbers\t" + "Occurances");
    // create a new array and store the user input
    int[]  newNumbers = new int[index];
    for (int i = 0; i < index; i++)
        newNumbers[i] = numbers[i];
    // sort the array
    for (int s = 0; s < newNumbers.length - 1; s++) {
        for (int j = 1; j < newNumbers.length - s; j++) {
            if (newNumbers[j - 1] < newNumbers[j]) {
                temp = newNumbers[j - 1];
                newNumbers[j - 1] = newNumbers[j];
                newNumbers[j] = temp;
            }
        }
    }
    System.out.println(Arrays.toString(newNumbers));
    int count = 1;
    int prevElement = 0;
    if (newNumbers.length > 0) {
        prevElement = newNumbers[0];
    }
     // print the results
    for (int x = 1; x < newNumbers.length; x++) {
        if (newNumbers[x] == prevElement) {
            count++;
        } else {
            System.out.println(prevElement + " occurs " + count + "times");
            prevElement = newNumbers[x];
            count = 1;
        }
    }
    System.out.println(prevElement + " occurs " + count + "times");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:32:48.467

嗨，如果你真的想要更短的：:

```
import java.util.*;

public class Test {

    public static void main(String[] args)
    {
        Integer number[] = new Integer[50];
        int index = 0;

        Scanner keyboard = new Scanner(System.in);
        System.out.print("Enter Number: ");
        System.out.println(" ");
        do
        {
            int input = keyboard.nextInt();
            if (input != -999)
                number[index++] = input;
            else
                break;
        } while (index != 0);

        List<Integer> asList = Arrays.asList(number);
        for(Integer n: asList){
            if(n != null)
            System.out.println(n + " occurance " + Collections.frequency(asList,n));
        }
    }
} 
```

# javascript - WebView：从远程 HTML 调用本地 JavaScript

> ID：16052335
> 
> 赞同：0
> 
> 时间：2013-04-17T05:37:17.730
> 
> 标签：javascript, android, android-webview

我有一个包含两个 WebView 的应用程序。一个显示本地 HTML 内容，另一个显示远程 HTML 内容。

远程 HTML 是否可以访问本地 JavaScript？欢迎任何想法。谢谢。

![在此处输入图像描述](https://i.stack.imgur.com/CTYoI.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:48:48.950

首先设置 webview.getSettings().setJavaScriptEnabled(true);

然后您可以像这样访问您的功能：

webview.loadUrl("javascript:nameOfFunction()");

# node.js - heroku 上的 node.js：错误：找不到模块“csv”

> ID：16052343
> 
> 赞同：3
> 
> 时间：2013-04-17T05:37:47.387
> 
> 标签：node.js, csv, heroku

我正在使用通用节点包“csv”进行 CSV 解析。它在我的本地 Mac 上运行良好，但在 heroku 上却不行。在“heroku 日志”中，我得到了***Cannot find module 'csv'***。

是的，我的包 json 文件中有它：

```
{
    "name":"rimes",
    "version":"0.0.1",
    "dependencies":{
    "sys":"",
    "url":"",
    "http":"",
    "querystring":"",
    "oauth":"0.9.10",
    "fs":"",
    "csv":"0.3.0",
    "request":"",
    "node-cache":"",
    "underscore":""
    }
} 
```

我在我的 app.js 中需要它

```
var sys = require('sys'),
http = require('http'),
url = require('url'),
qs = require('querystring'),
OAuth= require('oauth').OAuth,
fs = require('fs'),
csv = require('csv'),
myreq = require('request'),
NodeCache = require('node-cache'),
us = require('underscore'); 
```

我该怎么做才能在heroku上解决这个问题？

谢谢你~托德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-20T03:51:09.843

因此，当您在 node 上需要软件包时，您还需要将它们安装在 node_modules 文件夹中。它们必须在 node_modules 文件夹中，并且在您的代码中是“必需的”。它们只能在您的“package.json”中声明。

如果你进入你的项目目录（package.json 所在的文件）并运行：

`npm install`

它应该将您缺少的依赖项安装到您的“node_modules”文件夹中。

然后，如果您将应用程序重新部署到 heroku，它应该可以工作。

# apache - Apache 通配符 Include 指令是递归的吗？

> ID：16052345
> 
> 赞同：2
> 
> 时间：2013-04-17T05:38:08.573
> 
> 标签：apache, directive

根据 Apache 手册，包含指令在使用目录路径时是递归的。但是使用通配符路径时它是递归的吗？

```
 Include "/usr/local/apache/conf/userdata/std/2/username/domain.com/*.conf" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-16T08:26:05.300

我检查了它，它不是递归的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-16T12:12:38.067

正如乔伊斯已经说过的，我可以通过自己测试来确认它不是递归的。 `Include`用作`fnmatch`通配符引擎，默认情况下不匹配斜杠，除非`FNM_PATHNAME`设置了标志，因此 a`*`不匹配`/`因此`domain.com/*.conf`不会在子目录中查找。

但是，从[httpd 2.3.6](https://httpd.apache.org/docs/2.4/mod/core.html#include)开始，也可以将通配符用于子目录。

### 例子

```
Include /usr/local/apache2/conf.d/ssl.conf 
```

这仅匹配特定文件。

```
Include /usr/local/apache2/conf.d 
```

如果`conf.d`是一个文件，它只匹配这个文件。如果`conf.d`是目录，则递归匹配所有文件，包括子目录中的文件和非conf文件（会导致错误）。

```
Include /usr/local/apache2/conf.d/*.conf 
```

这只会匹配`.conf`直接位于`conf.d`目录中的带有后缀的文件。子目录中的文件不匹配。

```
Include /usr/local/apache2/conf.d/*/*.conf 
```

这只会匹配带有`.conf`后缀的文件，直接位于目录的`conf.d`子目录中，但不会匹配直接位于`conf.d`目录中的文件。

因此，例如，如果您需要匹配`.conf`直接位于 `conf.d`第一级子目录和第二级子目录中的所有文件，您可以使用：

```
Include /usr/local/apache2/conf.d/*.conf
Include /usr/local/apache2/conf.d/*/*.conf
Include /usr/local/apache2/conf.d/*/*/*.conf 
```

如果您只有有效的配置文件`conf.d`并且想要匹配每个级别的子目录，那么您可以使用：

```
Include /usr/local/apache2/conf.d 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-04T02:37:57.493

您应该使用目录，而不是使用通配符。

早在 1.3 [https://httpd.apache.org/docs/1.3/mod/core.html#include就已经支持](https://httpd.apache.org/docs/1.3/mod/core.html#include)

> Apache 1.3.13 中的新功能是，如果 Include 指向目录而不是文件，Apache 将读取该目录和任何子目录中的所有文件，并将它们解析为配置文件。

# java - 要使用的 Hibernate 或 JPA 注释

> ID：16052347
> 
> 赞同：5
> 
> 时间：2013-04-17T05:38:16.090
> 
> 标签：java, hibernate, jpa

我在我们的项目中使用 Hibernate，并为 Hibernate Domain Pojo 对象使用基于注释的配置。对于基于注释的配置，我们有两个选项

1.  基于 JPA 的注释使用`javax.persistence.*`
2.  使用 Hibernate 原生注解`org.hibernate.annotations.*`

目前我们对 POJO 文件使用基于 JPA 的注解配置，并使用 SessionFactory、Session 等 Hibernate 原生 API 来打开会话并执行 DB 操作。

我有这些问题：

1.  混合 JPA 注释和使用 Hibernate 本机 API 是否有任何问题？
2.  这个[链接](http://www.mkyong.com/hibernate/cascade-jpa-hibernate-annotation-common-mistake/)解释了一个这样的问题（cascade-jpa-hibernate-annotation-common-mistake）
3.  请提供您的专业知识，使用哪种类型的注释
    1.  JPA
    2.  休眠原生
    3.  两者混合？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T05:53:10.317

Hibernate 提供了一种 JPA 实现。如果您在代码中使用纯 JPA，则在出现需求时可以自由更改为不同的实现。例如，[EclipseLink/TopLink](http://www.oracle.com/technetwork/middleware/toplink/overview/index.html)和[OpenJPA](http://openjpa.apache.org/)是不同客户可能需要的实现。一个完整的实现列表在[这里](http://en.wikipedia.org/wiki/Java_Persistence_API#JPA_2.0)。

如果您被迫使用 hibernate 提供的任何不属于 JPA 规范的奇异特性，那么您应该在代码库中使用 hibernate 特定的 API。[这里](https://forum.hibernate.org/viewtopic.php?t=979018)有来自休眠论坛的相关讨论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:10:15.537

我们混合了其中的一些注释，因为当时我们使用的是 hibernate 版本，当时 JPA 规范中没有一些功能。例如，要将布尔值存储为“Y”或“N”在数据库上，您可以使用休眠类型。但是当时 JPA 规范中没有这样的功能。我不知道现在的状态。同样对于孤儿删除，那些日子 JPA 没有该功能，但现在我相信他们在您的级联选项上提供了一个名为 orphanRemoval 的属性。此外，您还具有某些功能，例如 @BatchSize 来提高袋子的抓取性能。我不知道这些功能是否在 JPA 规范中可用。

以我的经验，混合和匹配两者的加分将是有益的，因为您不需要从一个 ORM 切换到另一个。

# model - 多对多-非识别关系数据模型

> ID：16052349
> 
> 赞同：0
> 
> 时间：2013-04-17T05:38:17.297
> 
> 标签：model, many-to-many

我们有一个小型**SQL SERVER 2000**数据库，用于进口 - 交易商品并为其扩展新功能。我对实施正确的 PK - FK 关系感到困惑。

我们有三个表：

```
Contract (ContractID (PK), SupplierID (FK), ProductID(FK), Date, Quantity, Price )

SupplierInvoice ( SupplierInvoiceID (PK), ContractID (FK) , ImportID (FK) , InvoiceNo, Date,Quantity )

Import ( ImportID (PK) , Date )

Truck ( TruckID (PK), ImportID (FK), CustomerID (FK), Date, Quantity) 
```

解释 ：

这些是散装产品，没有包装，只有数量。

*   所有 PK 都是代理（自动增量）
*   一份合同可以有 0 到多张发票，一张发票可以只属于一份合同。（几天后 0 张发票将变为 1 张）
*   使用一对多发票，您可以进行 0 对 1 导入。（0 次进口将是 1 次，几天内只有一次）（许多发票意味着可能有部分合同结束和开始。）
*   数量：一份合同的总发票数量不能超过合同数量。我们构建触发器来控制它。进口数量与发票数量完全相同。

问题 ：

1.  这个模型（PK 和 FK 的）是否正确）？你怎么看？
2.  进口后，我们将进口的货物装载到卡车上，因此我们应该输入要从哪个供应商装载的产品。如果我们开始`JOIN`从 Truck Table 到 Contract Table 进行查询，直到我们得到`ProductID`，`SupplierID`那么它是一个很长的查询。你怎么看？
3.  您如何看待数量控制？库存是使用报告上的计算字段计算的。

问题 1 和 2 对我们进一步推进非常重要。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:14:52.473

根据您的描述，听起来您需要更改发票和导入表之间的关系（“使用一对多发票进行 0 到 1 导入”）。您在发票表中将导入 ID 作为 FK，但我很确定您真正想要的是与发票和导入之间的连接表的多对多关系，以便您可以在每次导入时关联许多发票.

此外，如果每个合同可以有多个产品，则需要在合同和产品表之间建立一个连接表，以允许您在产品和合同之间创建多对多关系。换句话说，我假设您在多个合同中使用相同的产品，并且至少其中一些合同可能涉及不止一种产品？

我不会太担心几个连接。如果您到达要连接十几个表或其他东西的地方，那么在我研究非规范化模式之前，我会考虑创建一个或两个战略视图以简化查询。

如果您担心连接*性能*（不要，这几个表），您可以使用 SQL Server 进行大量索引调整。您可以在数据库视图上放置索引。SQL Server 2000 还支持物化视图，它基本上指示 SQL Server 构建（并动态维护）视图形状的表，这样视图定义中的连接就不必为您执行的每个查询实时执行. 您还可以创建可更新的视图，并且可以将数据库触发器的子集放在视图上。因此，为了数据完整性，我会坚持使用规范化的模式。我认为有很多解决方案可以解决查询复杂性和连接性能问题。

**编辑：**这是一个更新的示例 ER 图，显示了合同和产品之间以及发票和进口之间的多对多关系。

![显示合同和产品之间以及发票和进口之间的多对多关系的模式](https://i.stack.imgur.com/mMygf.jpg)

# ruby-on-rails - 如何只允许管理员（或某些用户）编辑 Rails 中的页面？

> ID：16052352
> 
> 赞同：3
> 
> 时间：2013-04-17T05:38:34.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan, rolify

我有一个脚手架财务，我刚刚意识到任何登录用户都可以通过转到 /finances/1/edit 来编辑它

我已经安装了 activ_admin gem，但我认为这不是我需要的。如何确保除了管理员（或可能是某些用户）之外没有人可以编辑财务资源类型 - I

编辑 - 我找到了[https://github.com/EppO/rolify](https://github.com/EppO/rolify)，这是最好的选择，还是我仍然可以做得更好，因为它可能有点矫枉过正？

编辑 1 - 我浏览了这个[https://github.com/EppO/rolify/wiki/Tutorial](https://github.com/EppO/rolify/wiki/Tutorial)并将角色“admin”分配给 user = User.find(1)，一切顺利到“ability.can?:manage , :all" 在控制台中，对用户 1 显示 TRUE，对其他用户显示 false。现在我不知道该怎么办？即使我在 Finance.rb 模型中添加了“资源化”，我仍然可以看到所有用户都能够编辑页面。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T05:46:55.397

我不确定您的模型是如何设置的，但假设您的`User`模型有一个管理列，您可以执行以下操作：

```
FinancesController < ApplicationController
  before_filter :must_be_admin, only: :edit

  def edit
    ...
  end

  private

  def must_be_admin
    unless current_user && current_user.admin?
      redirect_to root_path, notice: "Some message"
    end
  end
end 
```

您可以将所需的任何操作添加到之前的过滤器，例如`before_filter :must_be_admin, only: [:edit, :destroy]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T05:47:12.583

好吧，我个人在我的项目中使用 rolify 并且喜欢它。但老实说，这非常容易实现，只需在您的用户模型中添加一个列“admin”并将其默认为 false。当您希望用户成为管理员时，将属性更新为 true，然后要求 User.admin==true 访问财务编辑操作...您可以通过从控制器重定向非管理员用户（在财务编辑操作）

顺便说一句，如果您使用 devise 进行身份验证，请查看[Devise before_filter authenticate_admin?](https://stackoverflow.com/questions/7411577/devise-before-filter-authenticate-admin)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T05:44:44.917

如果您希望在不推出自己的解决方案的情况下添加合理的用户授权，请务必查看[CanCan](https://github.com/ryanb/cancan)。其作者 Ryan Bates 的[截屏视频](http://railscasts.com/episodes/192-authorization-with-cancan)也很有帮助。

# linux - 如何在 gnome-terminal 中使用 Vim 启用括号粘贴模式？

> ID：16052357
> 
> 赞同：3
> 
> 时间：2013-04-17T05:38:54.760
> 
> 标签：linux, vim, gnu, gnome-terminal

阅读[此答案](https://stackoverflow.com/questions/5585129/pasting-code-into-terminal-window-into-vim-on-mac-os-x/7053522#7053522)后，我真的很想在我的 Ubuntu 桌面上尝试括号粘贴模式。任何人都知道这是否可能，如果可以，如何使其工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-12T20:33:40.607

它在 Ubuntu Lucid 及更高版本上开箱即用。

只要您有 libvte 0.23.3 或更高版本，任何基于 libvte 的终端，包括 Gnome Terminal、Terminator 和 ROXterm，都应该可以正常工作。

参考：

*   [VTE 错误 605299 - 请支持 xterm 括号粘贴模式](https://bugzilla.gnome.org/show_bug.cgi?id=605299)
*   [Ubuntu libvte 软件包版本](http://packages.ubuntu.com/search?keywords=libvte9&searchon=names&suite=all&section=all)
*   [git 提交](https://git.gnome.org/browse/vte/commit/?id=4db015d59e80a992c86827e612e06c7df1c901f0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T01:45:41.263

括号粘贴模式无需任何修改即可在 gnome-terminal 中使用。

# java - 未找到 Servlet 类异常

> ID：16052360
> 
> 赞同：0
> 
> 时间：2013-04-17T05:39:02.907
> 
> 标签：java, html, eclipse, servlets

我正在尝试编写一个非常简单的 servlet，而 HTML 表单的操作使用该 servlet。

这是我的 HTML 表单：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Upload Video</title>
</head>
<body>

<%
    Object userSession = session.getAttribute("email");

if(userSession == null)
{
    out.println("Welcome to the MyTube, you are not logged in. <br /><br >");
    out.println("Please click the following to login: <a href=\"login.jsp\">here</a>");
    out.println("Or Click this to register: <a href=\"register.jsp\">here</a>");
}
else
{
    out.println("<form action=\"servletClass\" method=\"post\" enctype=\"multipart/form-data\">");
    out.println("<input type=\"file\" name=\"file\" />");
    out.println("<input type=\"submit\" />");
    out.println("</form>");
}

%>

</body>
</html> 
```

这是我的 servlet 类：

```
public class uploadServlet extends HttpServlet
{
    String awsAccessKey = "WHOOOPS";
    String awsSecretKey = "WHOOOPS/YWPkmKfe";
    AWSCredentials awsCredentials = new AWSCredentials(awsAccessKey, awsSecretKey);

    protected void doPost(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException 
    {
        boolean isMulti = ServletFileUpload.isMultipartContent(request);
        if (isMulti) 
        {
            ServletFileUpload upload = new ServletFileUpload();

            try 
            {
                FileItemIterator iter = upload.getItemIterator(request);
                while (iter.hasNext()) 
                {
                    FileItemStream item = iter.next();
                    InputStream inputStream = item.openStream();
                    if (item.isFormField()) 
                    {

                    } 
                    else
                    {
                        String fileName = item.getName();
                        if (fileName != null && fileName.length() > 0) 
                        {
                            S3Service s3Service = new RestS3Service(awsCredentials);

                            S3Object fileObject = new S3Object();
                            fileObject.setDataInputStream(inputStream);
                            fileObject.setContentLength(Integer.parseInt(request.getHeader("Content-Length")));
                            s3Service.putObject("vidvidbucket", fileObject);

                            //read stream of file uploaded

                            //store as a temporary file

                            //upload the file to s3
                        }
                    }
                }
            } 
            catch (Exception e) 
            {

            }
        }

        response.sendRedirect("location of the result page");
    }
} 
```

这是我的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>MyTubeServer</display-name>

  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>

  <servlet>
    <servlet-name>servletClass</servlet-name>
    <servlet-class>uploadServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>servletClass</servlet-name>
    <url-pattern>/servletClass</url-pattern>
  </servlet-mapping>

</web-app> 
```

这是日食设置：

![在此处输入图像描述](https://i.stack.imgur.com/dXLIF.png)

我查看了其他帖子，您还应该在 WEB-INF 文件夹中包含 java 文件。但我不断收到classNotFoundException。

编辑：堆栈跟踪表明找不到uploadServlet，所以我很困惑。

编辑 2：将 servlet 类的 XML 文件设置为 servletClass.uploadServlet 而不是 servlet 类后，但现在我得到了请求的源 (X/Location%Of%The%File%Is%Not%Found) 没有任何异常

![在此处输入图像描述](https://i.stack.imgur.com/mHrV2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T06:24:19.087

你`web.xml`的不正确。图像显示包层次结构

![在此处输入图像描述](https://i.stack.imgur.com/nltuU.png)

所以，应该是这样的

```
<servlet>
<servlet-name>servletClass</servlet-name>
<servlet-class>servletClass.uploadServlet</servlet-class>
</servlet> 
```

重启Tomcat

其次，尝试在表单操作中给出上下文路径。

```
<%
String contextPath = request.getContextPath();
%>

out.println("<form action=\""+contextPath+"/servletClass\" method=\"post\" enctype=\"multipart/form-data\">"); 
```

编辑：我认为现在调用 servlet 但这是错误的

```
response.sendRedirect("location of the result page"); 
```

将其更改为某个有效`JSP`页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T05:41:45.560

1）在你的 web.xml 中试试这个：

```
<servlet>
<servlet-name>servletClass</servlet-name>
<servlet-class>servletClass.uploadServlet</servlet-class>
</servlet> 
```

重新启动服务器并检查 .

2）第二个错误的原因是这一行：

```
 response.sendRedirect("location of the result page"); 
```

在您的 Servlet 代码中。请重定向到适当的可用资源。有关更多信息，请参阅[API](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#sendRedirect(java.lang.String))。

# zbar - 将条码捕获为图像并使用 ZBAR 对其进行解码

> ID：16052366
> 
> 赞同：1
> 
> 时间：2013-04-17T05:39:40.363
> 
> 标签：zbar

目前我正在使用 ZBAR 阅读器来解码二维码。它工作正常。当 QR 码被大量填充时，就会出现此问题。ZBAR 需要一些时间来读取内容，并且由于这种延迟，相机会一直保持打开状态，这会惹恼一些用户。**那么有什么方法可以将 QR 码捕获为图像并存储在本地并从本地解码 QR 码的图像**。这将立即停止摄像头，用户将长时间看不到摄像头打开。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T18:23:23.783

你没有说任何关于平台或语言的事情，但答案是“是的”。请参阅[这些示例](http://sourceforge.net/apps/mediawiki/zbar/index.php?title=HOWTO%3a_Scan_images_using_the_API "这些例子")。

# python - Python 版本不是 Enthought Canopy 的前期版本

> ID：16052367
> 
> 赞同：1
> 
> 时间：2013-04-17T05:39:41.803
> 
> 标签：python, enthought

我不再在 Python 窗口顶部看到正在使用的 Python 版本。现在找到这个最简单的方法是什么？

*   谢谢。

PS我现在看到提交支持电子邮件将此信息放在系统信息部分，但来自它总是被打印在前面说闲置，它是不可访问的。我想我在质疑设计决定。

* * *

我想我是在说我更喜欢将 Python 版本信息作为 Canopy 欢迎信息的一部分 :-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T05:56:07.583

在天篷安装中。.ipython qt 控制台在编辑器中可用

```
Welcome to Canopy's interactive data-analysis environment!
 with pylab-backend set to: qt
Type '?' for more information.

In [1]: sys.version
Out[1]: '2.7.3 | 32-bit | (default, Mar 25 2013, 15:38:39) [MSC v.1500 32 bit (Intel)]' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T05:47:04.163

模块中有一些选项`sys`，具体取决于您更喜欢人类可读还是机器可读：

```
>>> sys.version
'2.6.6 (r266:84292, Dec 26 2010, 22:31:48) \n[GCC 4.4.5]'
>>> sys.version_info
(2, 6, 6, 'final', 0) 
```

# php - 根据域名加载不同的配置文件

> ID：16052368
> 
> 赞同：0
> 
> 时间：2013-04-17T05:39:43.840
> 
> 标签：php

我希望能够使用纯 PHP 加载基于域名的不同配置文件。

目前我的配置文件使用以下加载

```
# Look for a config.php in the /themes/themeName/ folder
if ( ! defined('MULTI') && file_exists($tmp = WWW_ROOT . '/themes/' . $CONFIG['theme'] . '/config.php') ) { 
```

但是我需要能够添加如果域是从 /theme/domain1 加载配置的 domain1.com 或者如果它是从 /theme/domain2 加载的 domain2.com 并且如果不是从 /theme/default 加载的这些域中的任何一个。

当一个域名停放在另一个域的顶部时使用此选项，因此除了配置文件外，内容都相同。

我在想一些事情

```
if ($_SERVER['HTTP_HOST']="domain1.com")
else if ($_SERVER['HTTP_HOST']="domain2.com")
else 
```

只是不确定如何正确格式化它，或者它是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:32:09.337

```
$themes_path=array( 
'domain1.com'=>'foldername1',
'domain2.com'=>'foldername2'
);

if (isset($_SERVER['HTTP_HOST']) && file_exists(WWW_ROOT . '/themes/' . $themes_path[$_SERVER['HTTP_HOST']] . '/config.php'){
include(WWW_ROOT . '/themes/' . $themes_path[$_SERVER['HTTP_HOST']] . '/config.php');
} 
```

我认为直接包含 $_SERVER['HTTP_HOST'] 不是很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:44:25.060

```
if (isset($_SERVER['HTTP_HOST']) && file_exists(WWW_ROOT . '/themes/' . $_SERVER['HTTP_HOST'] . '/config.php')
    include(WWW_ROOT . '/themes/' . $_SERVER['HTTP_HOST'] . '/config.php');
else
    include(WWW_ROOT . '/themes/default/config.php'); 
```

# magento - Magento - 将域自动重定向到正确的网址

> ID：16052376
> 
> 赞同：1
> 
> 时间：2013-04-17T05:40:18.677
> 
> 标签：magento, redirect

我有magento 1.6.2。我的 linus Ubuntu 10.04 lts 网络服务器上的 Plesk 11（具有 root 访问权限）

我的网站现在可以在域 aaa.nl 上运行，我们将重命名网上商店并为此创建一个新域。像 bbb.nl

很多网站都有指向我们网站的外部链接......比如 aaa.nl/shopby/boys.html

但是当我设置将流量从旧网站重定向到新网站（通过 plesk 11）时，它们都被重定向到 bbb.nl（没有特定的产品或类别）

我如何设置 magento，所以当人们现在去链接 aaa.nl/shopby/boys.html 时，他们会自动重定向到 bbb.nl/shopby/boys.html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:58:26.680

而不是`Plesk 11`通过.htaccess 来做。在 Magento 的 .htaccess 中，在 RewriteBase 行下方添加以下代码：

```
RewriteCond %{HTTP_HOST} ^(www\.)?aaa\.nl$ [NC]
RewriteRule ^ http://bbb.nl%{REQUEST_URI} [R=301,L] 
```

# java - Java 处理国际文件。编码东西

> ID：16052381
> 
> 赞同：1
> 
> 时间：2013-04-17T05:40:50.120
> 
> 标签：java, swing, encoding, localization

我正在编写一个示例测试应用程序，其主要功能是修改一些文本文件（不管什么样的修改）。这些测试文件通常为 txt 格式。问题是，这些文件可能包含英语、德语、波兰语、中文、阿拉伯语等文本。

我的问题是，在编码方面我应该注意什么。我想确保该应用程序适用于它遇到的任何角色。

您能否给我一些链接，我会觉得这些链接对这些编码内容有用（在读取/写入文件时）？

我正在用 Java 编写这个应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T05:46:48.273

> 我想确保该应用程序适用于它遇到的任何角色。

没关系，只要您知道文件的编码即可。需要注意的是，文件的*编码与文件中文本的**语言*非常不同。例如，完全相同的字符可以用 UTF-8 和 UTF-16 表示。

可以启发式地*猜测*文件的编码，但最好（IMO）要求所有输入文件使用相同的编码，如果你可以控制的话......或者允许用户指定编码。如果您*可以*控制编码，我通常会推荐 UTF-8。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T06:03:58.757

如果你可以控制它，你想要 UTF-8。但这不仅仅是您翻转的开关 - Java 几乎在任何地方都喜欢平台默认编码和古老的 8 位编码而不是 UTF-8。

什么时候需要使用编码？

它归结为需要编码的任何从内存中出来的字符串（例如，当打印到控制台、写入文件或发送数据库查询时）以及需要解码的任何进入内存的内容（当读取控制台、文件、http 请求时） ，例如接收数据库结果等）。

如果在这些情况下未指定编码，则会隐式使用编码。总是。隐式选择的编码通常不是您想要的，甚至会根据程序运行的位置而改变。

Java 对几乎任何东西都有隐式编码重载并没有帮助，而且它似乎总是更容易使用的重载。

# meteor - 如何创建多个 Meteor 项目？

> ID：16052383
> 
> 赞同：0
> 
> 时间：2013-04-17T05:40:50.883
> 
> 标签：meteor

如何创建更多流星项目？我试过“meteor create ...”但它说我不能在另一个项目中创建一个。

另外，如何删除项目？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:52:34.360

没关系。我意识到我可以删除项目文件夹，导航到另一个文件夹，然后在任何我想要运行流星命令的地方创建一个新项目以在那里启动我的服务器。谢谢阅读。

# objective-c - 表视图中的 NSInternalInconsistencyException

> ID：16052386
> 
> 赞同：0
> 
> 时间：2013-04-17T05:40:59.153
> 
> 标签：objective-c, uitableview

![聊天图像视图](https://i.stack.imgur.com/LWwzF.png)

```
- (UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath
{
    static NSString* CellIdentifier = @"MessageCellIdentifier";

    MessageTableViewCell* cell = (MessageTableViewCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
        cell = [[MessageTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    Message* message = [self.dataModel.messages objectAtIndex:indexPath.row];

    if ([message.imgDisplay isEqualToString:@"image"]) {
        [cell setMessage:message];
    }
    else
    {
        [cell setMessage:message];
    }

    return cell;

}

- (void)setMessage:(Message*)message {
CGPoint point = CGPointZero;

NSString* senderName;
BubbleType bubbleType;
if ([message isSentByUser])
{
    bubbleType = BubbleTypeRighthand;
    senderName = NSLocalizedString(@"You", nil);
    point.x = self.bounds.size.width - message.bubbleSize.width;
    label.textAlignment = UITextAlignmentRight;
}
else
{
    bubbleType = BubbleTypeLefthand;
    senderName = message.senderName;

    label.textAlignment = UITextAlignmentLeft;
}

// Resize the bubble view and tell it to display the message text
CGRect rect;
rect.origin = point;
rect.size = message.bubbleSize;
bubbleView.frame = rect;

if ([message.imgDisplay isEqualToString:@"image"]) {

   [bubbleView setImage:[NSString stringWithFormat:@"%@.jpg",message.chatimageName] bubbleType:bubbleType];
}
else
{

    [bubbleView setText:message.text bubbleType:bubbleType];
}

// Format the message date
NSDateFormatter* formatter = [[NSDateFormatter alloc] init];
[formatter setDateStyle:NSDateFormatterShortStyle];
[formatter setTimeStyle:NSDateFormatterShortStyle];
[formatter setDoesRelativeDateFormatting:YES];

NSString* dateString = message.date;

// Set the sender's name and date on the label
label.text = [NSString stringWithFormat:@"%@ @ %@", senderName, dateString];
[label sizeToFit];
label.frame = CGRectMake(8, message.bubbleSize.height, self.contentView.bounds.size.width - 16, 16);
}

- (int)tableView:(UITableView*)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.dataModel.messages count];
} 
```

我正在开发一个聊天应用程序，下图显示了 chatViewController 的视图。它工作正常。有时我收到异常为 NSInternalInconsistencyException'，原因：'无效更新：第 0 节中的行数无效。更新后的现有节 (1) 必须等于更新前该节中包含的行数 (1)，加上或减去从该节插入或删除的行数（1 插入，0 删除），加上或减去移入或移出该部分的行数（0移入，0移出）。'。我不知道是什么导致了问题。请有人帮忙解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:46:59.007

`tableView`当数据源更改而不更新以反映更改时，将发生此错误。即数据源与`tableView`的内部表示不一致。确保一致性的最简单方法是`[tableView reloadData]`在数据源更改时调用。您还可以使用其他`tableView`重新加载方法进行更精细的更改。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T06:18:38.260

没问题，你只需要 **[tableview reloadData];** 在 **- (void)setMessage:(Message*)message { }末尾**

问题出现只是因为您的表格视图显示的单元格/数据与您当前的数据不一致。

阅读苹果开发者文档以获取有关**委托/数据源**的更多信息，以避免在您的开发中出现更多问题。

现在一切**顺利**！

# android - Android 4.0 没有提供选择打开文件的应用程序的选项？

> ID：16052390
> 
> 赞同：1
> 
> 时间：2013-04-17T05:41:13.900
> 
> 标签：android, file, sd-card

我正在一个项目中工作，我需要在列表视图中显示 SD 卡中存在的所有文件的列表，并在单击列表视图项时为用户提供选择用于打开该文件的应用程序的选项。下面是我正在使用的代码。它在 Android 2.3.3 中运行良好。但 Android 4.0 及更高版本会在图库照片查看器中打开所有文件。请指教。

```
@Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub
        Uri path = Uri.parse("file://" + arrayListAllFilespath.get(arg2));
        //arrayListAllFilespath.add(listFile[i].getAbsolutePath());
        Intent intent = new Intent();
        intent.setAction(Intent.ACTION_VIEW);
        intent.setDataAndType(path, "*/*");
        startActivity(intent);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T05:50:38.740

用于`startActivity(Intent.createChooser(intent,"dialog title"))`启动选择器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T05:48:40.387

这可能是您没有安装多个应用程序来打开图像。假设如果有多个应用程序可以打开图像，那么它会要求选择一个应用程序，但如果只有一个应用程序安装用于打开图像，那么它将其用作默认设置并且从不询问您，或者如果您安装了多个应用程序，那么您可以将图库设置为默认打开

# c# - 获取用户所属的本地和域帐户组

> ID：16052391
> 
> 赞同：3
> 
> 时间：2013-04-17T05:41:16.147
> 
> 标签：c#, account-management

我正在尝试列出给定用户所属的所有组，并且我想同时支持本地计算机帐户和域帐户。我可以使用以下代码获取域帐户的组：

```
public void ListAllGroupsDomain()
{
    ListAllGroups(ContextType.Domain,
                  "myDomain",
                  "myDomainUser",
                  "myDomainPassword");
}

public void ListAllGroups(ContextType contextType
                          string name,
                          string username,
                          string password)
{
    using (var context = new PrincipalContext(contextType,
                                              name,
                                              username,
                                              password))
    {
        using (var findByIdentity = UserPrincipal.FindByIdentity(context, "testedit"))
        {
            if (findByIdentity != null)
            {
                var groups = findByIdentity.GetGroups(context);
                var results = groups.Select(g => g.Name).ToArray();
                Console.WriteLine("Listing {0} groups", results.Count());
                foreach (var name in results)
                {
                    Console.WriteLine("{0}", name);
                }
            }
        }
    }
} 
```

但是，如果我尝试调用机器本地的帐户，我会收到一个 COM 异常，指出我的用户名或密码不正确（它们不正确）：

```
public void ListAllGroupsMachine()
{
    ListAllGroups(ContextType.Machine,
                  "myMachine",
                  "myMachineUser",
                  "myMachinePassword");
} 
```

我猜我错误地将 FindByIdentity 用于机器帐户。所以我尝试了一种稍微不同的方法，它不使用 FindByIdentity：

```
public void ListAllGroups2(ContextType contextType
                          string name,
                          string username,
                          string password)
{
    using (var context = new PrincipalContext(contextType,
                                              name,
                                              username,
                                              password))
    {
        using (var userContext = new UserPrincipal(context))
        {
            var results = userContext.GetGroups();
            Console.WriteLine("Listing {0} groups:", results.Count());
            foreach (var principal in results)
            {
                Console.WriteLine("{0}", principal.Name);
            }
        }
    }
} 
```

这个版本没有抛出任何异常，但是调用`GetGroups()`也没有返回任何结果。如何获取特定用户所属的组对于机器和域帐户都是可靠的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-26T21:07:47.773

感谢我从[https://stackoverflow.com/a/3681442/1222122](https://stackoverflow.com/a/3681442/1222122)收集到的一些帮助，我弄清楚了我做错了什么。我错误地设置了 PrincipalContext。我不需要给它域、用户名或密码，只需要 ContextType。以下代码适用于本地计算机帐户和域帐户：

```
public void ListAllGroupsDomain()
{
    ListAllGroups(ContextType.Domain, "myDomainUsername");
}

public void ListAllGroupsMachine()
{
    ListAllGroups(ContextType.Machine, "myMachineUsername");
}

public void ListAllGroups(ContextType contextType, string userName)
{
    using (var context = new PrincipalContext(contextType))
    {
        using (var findByIdentity = UserPrincipal.FindByIdentity(context, userName))
        {
            if (findByIdentity != null)
            {
                var groups = findByIdentity.GetGroups(context);
                var results = groups.Select(g => g.Name).ToArray();
                Console.WriteLine("Listing {0} groups", results.Count());
                foreach (var name in results)
                {
                    Console.WriteLine("{0}", name);
                }
            }
        }
    }
} 
```

我唯一需要确保做的就是在将域从用户名传递给之前将其从用户名中删除，`ListAllGroups`因为在某些情况下，提供给我的函数会将其添加到用户名之前。

# android - Android 使用 OnClick 从 SD 卡中删除图像

> ID：16052393
> 
> 赞同：4
> 
> 时间：2013-04-17T05:41:30.573
> 
> 标签：android, image, gridview, sd-card

我试图从一个简单的应用程序中简单地删除一个图像。我有它，所以当您单击图像时，它会弹出一个对话框，其中包含删除它的选项。我认为这只是一件简单的事情，但我一直在尝试的一切似乎都没有做任何事情。下面是我的代码。任何想法将不胜感激。

```
 delete.setOnClickListener(new View.OnClickListener() {

@Override
public void onClick(View v) {
// TODO Auto-generated method stub
    int id = viewIt.getId();

    File file = new File("file://" + arrPath[id]+".jpg");
    file.delete();

    }
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T05:49:57.457

**您是否在清单文件中添加了权限？**

任何声明`WRITE_EXTERNAL_STORAGE` **权限**的应用都会被隐式授予`READ_EXTERNAL_STORAGE` **权限**。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

获取所需文件的路径并删除文件

```
File file= new File(android.os.Environment.getExternalStorageDirectory()+ "/myfolder/myimage.jpg");
    if(file.exists())
    {
         file.delete();
    } 
```

# android - 如何等待完成下载文件然后阅读它

> ID：16052394
> 
> 赞同：0
> 
> 时间：2013-04-17T05:41:43.803
> 
> 标签：android, android-asynctask, download

我想为我的应用程序添加从互联网下载文件然后阅读其中一些文件或提取它们的功能..这是我的整个代码

```
package co.tosca.persianpoem;
import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.UnsupportedEncodingException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.zip.ZipEntry;
import java.util.zip.ZipInputStream;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.app.Dialog;
import android.app.DownloadManager;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.content.res.AssetManager;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Spinner;
import android.widget.TabHost;
import android.widget.Toast;

public class Download_database extends Activity {

    Download_db_list_Adapter dataAdapter = null;
    Download_db_list_Adapter Database_list_adapter = null;
    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();
    ArrayList<HashMap<String, String>> selected_items_for_download = new ArrayList<HashMap<String, String>>();
    private ProgressDialog mProgressDialog;
    public static int DIALOG_DOWNLOAD_PROGRESS = 0;
    List<List<Map<String, String>>> childData = new ArrayList<List<Map<String, String>>>();
    List<Map<String, String>> children = new ArrayList<Map<String, String>>();
    persian_poem_class main=new persian_poem_class(this);
    public List<HashMap<String, String>> selected_databases = new ArrayList<HashMap<String, String>>();
    public ArrayList<String> downloaded_db_ids = new ArrayList<String>();
    public ArrayList<String> main_db_ids = new ArrayList<String>();
    ArrayList<String> Items_for_download = new ArrayList<String>();
    public ProgressDialog pd;
    XMLParser parser = new XMLParser();
    String xml = null;
    ListView list;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_download_database);

        //T A B     H O S T
        TabHost tabs=(TabHost)findViewById(R.id.download_cat_tabhost);
        tabs.setup();
        TabHost.TabSpec spec=tabs.newTabSpec("down_tag1");
        spec.setContent(R.id.download_cat_01);
        spec.setIndicator(getString(R.string.txt_download_tab_download_sections));
        tabs.addTab(spec);
        spec=tabs.newTabSpec("down_tag2");
        spec.setContent(R.id.download_cat_02);
        spec.setIndicator(getString(R.string.txt_download_tab_downloaded_db_list));
        tabs.addTab(spec);

        File path=new File(ClubCP.SDcardPath+"/temp/database/");
        List<String>file_lists =    main.directoryPath(path,false);

        downloaded_db_ids = main.directoryPath(path,true);
        main_db_ids=main.getDBPoet_id();

        //S P I N E R
        Spinner spin = (Spinner) findViewById(R.id.spinner_cat_selector);
        String[] spineritems = { getString(R.string.radio_newgdb), getString(R.string.radio_programgdb), getString(R.string.radio_sitegdb)};
        ArrayAdapter<String> aa = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,spineritems);
        aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spin.setAdapter(aa);
        spin.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> container, View row,
            int position, long id) {

            if(position==0){
                xmlp("newgdbs.xml");

            }
            else if(position==1){
                xmlp("programgdbs.xml");

            }
            else{
                xmlp("sitegdbs.xml");

            }
            }

            @Override
            public void onNothingSelected(AdapterView<?> container) {
                Toast.makeText(Download_database.this, "At least select one database", Toast.LENGTH_SHORT).show();
            }
            });

        list=  (ListView)findViewById(R.id.ExpList);        

        //D A T A B A S E    L I S T    A D A P T E R

        Database_list_adapter=new Download_db_list_Adapter(this,R.layout.database_list_item, main.getDBonSDcard());
        ListView Database_list=(ListView)findViewById(R.id.list_db_list);
        Database_list.setAdapter(Database_list_adapter);

        // B U I L D    B U T T U N
        Button build =(Button)findViewById(R.id.btn_creat_db);
        build.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {   
                selected_databases=Database_list_adapter.getSelectedItems();
                if(selected_databases.isEmpty()!=true){
                    new bulid_database().execute();

                }
                else{
                    Toast.makeText(Download_database.this, "At least select one database", Toast.LENGTH_SHORT).show();
                }
            }

        });

        //  D O W N L O A D    B U T T U N
        Button download=(Button)findViewById(R.id.btn_download_db_start);
        download.setOnClickListener(new Button.OnClickListener() {

            @Override
            public void onClick(View v) {

                selected_items_for_download=dataAdapter.getSelectedItems();
                if(selected_items_for_download.size()!=0){
                    if(!isOnline()){

                        Toast.makeText(Download_database.this, "you are not connected to internet..Please check your connections", Toast.LENGTH_SHORT).show();
                    }
                    else{
Log.i("execute download", "execute download");
                        new download_db().execute();
                    }
                }
                else{
                    Toast.makeText(Download_database.this, "At least select one database", 1).show();
                }

            }
        });

        // H E L P    B U T T U N
        Button help=(Button)findViewById(R.id.btn_help);
        help.setOnClickListener(new Button.OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    String msg="<h1>"+getString(R.string.radio_newgdb)+"</h1>"+getString(R.string.txt_download_hint_newgdb)
                        +"<h1>"+getString(R.string.radio_programgdb)+"</h1>"+   getString(R.string.txt_download_hint_programgdb)
                        +"<h1>"+getString(R.string.radio_sitegdb)+"</h1>"+  getString(R.string.txt_download_hint_sitedb);
                    main.createDialogBox(Download_database.this,msg,getString(R.string.txt_information ),R.drawable.bullet_info ).show();

                }

            });

    }

    /**

    P U B L I C readfromAssets

    */
    public String readfromAssets(String name){
         xml=null;
        AssetManager assetManager = getAssets();
      InputStream input;
      try {
     input = assetManager.open(name);

           int size = input.available();
             byte[] buffer = new byte[size];
           input.read(buffer);
            input.close();

            // byte buffer into a string
              String text = new String(buffer);
     return text;
          } catch (IOException e) {

       e.printStackTrace();
          }
    return null;
  }
    /**

    P U B L I C     V O I D  XMLP

    */
    private void xmlp(String xmlname){
        String xml = null ;
        if(isOnline()){
            new getxml().execute("http://ganjoor.sourceforge.net/"+xmlname);// getting XML new way

        }
        else{
            xml=readfromAssets(xmlname);
            Log.i("read from assets",xml);
            Toast.makeText(this, "Cant find any network connection,Persian poem is loading from offline files", Toast.LENGTH_SHORT).show();
        }

        menuItems.clear();
        Document doc = parser.getDomElement(xml); // getting DOM element
        NodeList nl = doc.getElementsByTagName(parser.KEY_gdb);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);

            // adding each child node to HashMap key => value
            map.put(parser.KEY_CatName, parser.getValue(e, parser.KEY_CatName));
            map.put(parser.KEY_PoetID, parser.getValue(e, parser.KEY_PoetID));
            map.put(parser.KEY_DownloadUrl, parser.getValue(e, parser.KEY_DownloadUrl));
            map.put(parser.KEY_PubDate, parser.getValue(e, parser.KEY_PubDate));
            String size = " ";
             try{
            long s= Long.parseLong(parser.getValue(e,parser.KEY_FileSizeInByte));
                 size=getText(R.string.txt_download_db_size)+" "+humanReadableByteCount( s,true);

             }
              catch (Exception e1) 
            {

                 Log.i("error", e1.getMessage());
            }

             map.put(parser.KEY_FileSizeInByte,size);
             String Status="0";
             String Poet_id=parser.getValue(e, parser.KEY_PoetID);
             if(main.IsInlist(main_db_ids, Poet_id)){
                Status="1";
             }
             else if(downloaded_db_ids!=null&& main.IsInlist(downloaded_db_ids, Poet_id)){
                Status="2";
             }

             map.put("Status",Status);
             menuItems.add(map);

        }

        dataAdapter = new Download_db_list_Adapter(this,R.layout.database_list_item, menuItems);
        list.setAdapter(dataAdapter);

    }

    public class getxml extends AsyncTask<String, Void,String>{

        @Override
        protected String doInBackground(String... url) {
             xml=null;
            try {
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url[0]);

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                xml = EntityUtils.toString(httpEntity);

            } catch (UnsupportedEncodingException e) {
               // e.printStackTrace();
            } catch (ClientProtocolException e) {
               // e.printStackTrace();
            } catch (IOException e) {
               // e.printStackTrace();
            }

            Log.i("getxml", xml);
            return xml;
        }

    }
    public class download_db extends AsyncTask<String, Void,String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            DIALOG_DOWNLOAD_PROGRESS=100/selected_items_for_download.size();
            mProgressDialog = new ProgressDialog(Download_database.this);
            mProgressDialog.setMessage("Downloading file..");
            mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            mProgressDialog.setCancelable(false);
            mProgressDialog.show();

        }

        @Override
        protected String doInBackground(String...items) {
            if(isDownloadManagerAvailable(Download_database.this)){
             for(int i=0;i<selected_items_for_download.size();i++){
                    HashMap<String, String> item =selected_items_for_download.get(i);
                    String[] progress={String.valueOf(i+1),item.get(parser.KEY_PoetID)};
                    Log.i("download_manager", "download file"+progress);
                    download_file(item.get(parser.KEY_DownloadUrl),item.get(parser.KEY_CatName),"Downloading file,Please wait...",item.get(parser.KEY_PoetID));
                    Log.i("download_manager", "startextracting file");
                  //  publishProgress(progress);
                    unpackZip(ClubCP.SDcardPath+"/temp/database/",item.get(parser.KEY_PoetID)+ ".zip");
                    }
            }
            else{
                return null;
            }
            return null;
        }
        protected void onProgressUpdate(String...progress) {
             Log.d("ANDRO_ASYNC","progress update");
             mProgressDialog.setMessage("Extracting "+progress[1]+"...");
             mProgressDialog.setProgress(Integer.valueOf(DIALOG_DOWNLOAD_PROGRESS)*Integer.valueOf(progress[0]));
        }

        @Override
        protected void onPostExecute(String unused) {

            if (mProgressDialog.isShowing()) {
                mProgressDialog.dismiss();
                }
        }
    }

     /**
      * @param context used to check the device version and DownloadManager information
      * @return true if the download manager is available
      */
     public static boolean isDownloadManagerAvailable(Context context) {
         try {
             if (Build.VERSION.SDK_INT < Build.VERSION_CODES.GINGERBREAD) {
                 return false;
             }
             Intent intent = new Intent(Intent.ACTION_MAIN);
             intent.addCategory(Intent.CATEGORY_LAUNCHER);
             intent.setClassName("com.android.providers.downloads.ui", "com.android.providers.downloads.ui.DownloadList");
             List<ResolveInfo> list = context.getPackageManager().queryIntentActivities(intent,
                     PackageManager.MATCH_DEFAULT_ONLY);
             return list.size() > 0;
         } catch (Exception e) {
             return false;
         }
     }
     public void download_file(String download_link,String filename,String discribtion,String poet_id){
         String url = download_link;
         DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));
         request.setDescription(discribtion);
         request.setTitle(filename);
         // in order for this if to run, you must use the android 3.2 to compile your app
         if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
             request.allowScanningByMediaScanner();
             request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
         }
         request.setDestinationInExternalPublicDir(ClubCP.SDcardPath+"/temp/database/", poet_id+".zip");

         // get download service and enqueue file
         DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
         manager.enqueue(request);

     }

     private boolean unpackZip(String path, String zipname)
     {       
          InputStream is;
          ZipInputStream zis;
          try 
          {
              String filename;
              is = new FileInputStream(path + zipname);
              zis = new ZipInputStream(new BufferedInputStream(is));          
              ZipEntry ze;
              byte[] buffer = new byte[1024];
              int count;

              while ((ze = zis.getNextEntry()) != null) 
              {
                  // zapis do souboru
                  filename = ze.getName();

                  // Need to create directories if not exists, or
                  // it will generate an Exception...
                  if (ze.isDirectory()) {
                     File fmd = new File(path + filename);
                     fmd.mkdirs();
                     continue;
                  }

                  FileOutputStream fout = new FileOutputStream(path + filename);

                  // cteni zipu a zapis
                  while ((count = zis.read(buffer)) != -1) 
                  {
                      fout.write(buffer, 0, count);             
                  }

                  fout.close();               
                  zis.closeEntry();
              }

              zis.close();
          } 
          catch(IOException e)
          {
              e.printStackTrace();
              return false;
          }

         return true;
     }

        private class bulid_database extends AsyncTask<String, Long, Void> {

            // Begin - can use UI thread here
            protected void onPreExecute() {
                  pd = ProgressDialog.show(Download_database.this,"","Please wait...", true,false);
            }
            // this is the SLOW background thread taking care of heavy tasks
            // cannot directly change UI
            protected Void doInBackground(final String... args) {
                // simulate here the slow activity
                main.emptyDB();
                main.creatDB(8);
                for (int i =0; i < selected_databases.size(); i++) {

                    HashMap<String, String> Database=selected_databases.get(i);

                    main.attachDatabase(Database.get("CatName"));
                    //publishProgress((long)i);
                }
                    return null;
                    }
            // periodic updates - it is OK to change UI
            @Override
            protected void onProgressUpdate(Long... value) {
                pd.setMessage("still working");
            }
            // End - can use UI thread here
            protected void onPostExecute(final Void unused) {
                if (pd!=null) {
                    pd.dismiss();
                    }
            }
            }

    public boolean isOnline() {
        ConnectivityManager cm =
            (ConnectivityManager) getSystemService(this.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {
            return true;
        }
        return false;
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.download_database, menu);
        return true;
    }
    public static String humanReadableByteCount(long bytes, boolean si) {
        int unit = si ? 1000 : 1024;
        if (bytes < unit) return bytes + " B";
        int exp = (int) (Math.log(bytes) / Math.log(unit));
        String pre = (si ? "kMGTPE" : "KMGTPE").charAt(exp-1) + (si ? "" : "i");
        return String.format("%.1f %sB", bytes / Math.pow(unit, exp), pre);
    }
} 
```

如您所见，活动开始时，我检查了 Internet 连接，然后尝试从 Internet 下载文件，然后读取该文件..如何确保已下载该文件，然后尝试读取它？这里有一段代码我曾经下载和阅读文件

```
 private void xmlp(String xmlname){
    String xml = null ;
    if(isOnline()){
        new getxml().execute("http://ganjoor.sourceforge.net/"+xmlname);// getting XML new way

    }
    else{
        xml=readfromAssets(xmlname);
        Log.i("read from assets",xml);
        Toast.makeText(this, "Cant find any network connection,Persian poem is loading from offline files", Toast.LENGTH_SHORT).show();
    }

and here is getxml() function
    public class getxml extends AsyncTask<String, Void,String>{

        @Override
        protected String doInBackground(String... url) {
             xml=null;
            try {
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url[0]);

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                xml = EntityUtils.toString(httpEntity);

            } catch (UnsupportedEncodingException e) {
               // e.printStackTrace();
            } catch (ClientProtocolException e) {
               // e.printStackTrace();
            } catch (IOException e) {
               // e.printStackTrace();
            }

            Log.i("getxml", xml);
            return xml;
        }

    } 
```

我的问题是上述方法保证在下载文件后调用吗？或者它会在下载带有空 xml 的文件时继续？因为当我运行应用程序时出现空异常错误

```
04-17 09:44:50.882: E/AndroidRuntime(14083): FATAL EXCEPTION: main
04-17 09:44:50.882: E/AndroidRuntime(14083): java.lang.NullPointerException
04-17 09:44:50.882: E/AndroidRuntime(14083):    at java.io.StringReader.<init>(StringReader.java:47)
04-17 09:44:50.882: E/AndroidRuntime(14083):    at co.tosca.persianpoem.XMLParser.getDomElement(XMLParser.java:113)
04-17 09:44:50.882: E/AndroidRuntime(14083):    at co.tosca.persianpoem.Download_database.xmlp(Download_database.java:264)
04-17 09:44:50.882: E/AndroidRuntime(14083):    at co.tosca.persianpoem.Download_database.access$3(Download_database.java:251)
04-17 09:44:50.882: E/AndroidRuntime(14083):    at co.tosca.persianpoem.Download_database$1.onItemSelected(Download_database.java:118)
04-17 09:44:50.882: E/AndroidRuntime(14083):    at android.widget.AdapterView.fireOnSelected(AdapterView.java:882)
04-17 09:44:50.882: E/AndroidRuntime(14083):    at android.widget.AdapterView.access$200(AdapterView.java:48)
04-17 09:44:50.882: E/AndroidRuntime(14083):    at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:848)
04-17 09:44:50.882: E/AndroidRuntime(14083):    at android.os.Handler.handleCallback(Handler.java:605)
04-17 09:44:50.882: E/AndroidRuntime(14083):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-17 09:44:50.882: E/AndroidRuntime(14083):    at android.os.Looper.loop(Looper.java:137)
04-17 09:44:50.882: E/AndroidRuntime(14083):    at android.app.ActivityThread.main(ActivityThread.java:4441)
04-17 09:44:50.882: E/AndroidRuntime(14083):    at java.lang.reflect.Method.invokeNative(Native Method)
04-17 09:44:50.882: E/AndroidRuntime(14083):    at java.lang.reflect.Method.invoke(Method.java:511)
04-17 09:44:50.882: E/AndroidRuntime(14083):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-17 09:44:50.882: E/AndroidRuntime(14083):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-17 09:44:50.882: E/AndroidRuntime(14083):    at dalvik.system.NativeStart.main(Native Method)
04-17 09:45:31.374: W/dalvikvm(14083): threadid=12: thread exiting with uncaught exception (group=0x2b542210) 
```

在第 264 行我有这个`Document doc = parser.getDomElement(xml); // getting DOM element`，我认为它是因为一个空的 xml 文件（或文件仍在下载）..我在另一个地方有这种问题..我想下载一个 zip 文件，然后我 exteact 它..我在这里尝试了一个 AsyncTask

```
public class download_db extends AsyncTask<String, Void,String> {
@Override
protected void onPreExecute() {
    super.onPreExecute();
    DIALOG_DOWNLOAD_PROGRESS=100/selected_items_for_download.size();
    mProgressDialog = new ProgressDialog(Download_database.this);
    mProgressDialog.setMessage("Downloading file..");
    mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    mProgressDialog.setCancelable(false);
    mProgressDialog.show();

}

@Override
protected String doInBackground(String...items) {
    if(isDownloadManagerAvailable(Download_database.this)){
     for(int i=0;i<selected_items_for_download.size();i++){
            HashMap<String, String> item =selected_items_for_download.get(i);
            String[] progress={String.valueOf(i+1),item.get(parser.KEY_PoetID)};
            Log.i("download_manager", "download file"+progress);
            download_file(item.get(parser.KEY_DownloadUrl),item.get(parser.KEY_CatName),"Downloading file,Please wait...",item.get(parser.KEY_PoetID));
            Log.i("download_manager", "startextracting file");
          //  publishProgress(progress);
            unpackZip(ClubCP.SDcardPath+"/temp/database/",item.get(parser.KEY_PoetID)+ ".zip");
            }
    }
    else{
        return null;
    }
    return null;
}
protected void onProgressUpdate(String...progress) {
     Log.d("ANDRO_ASYNC","progress update");
     mProgressDialog.setMessage("Extracting "+progress[1]+"...");
     mProgressDialog.setProgress(Integer.valueOf(DIALOG_DOWNLOAD_PROGRESS)*Integer.valueOf(progress[0]));
}

@Override
protected void onPostExecute(String unused) {

    if (mProgressDialog.isShowing()) {
        mProgressDialog.dismiss();
        }
} 
```

}

再次在这里，我想确保`unpackZip`在完成下载文件后运行..如何做到这一点？非常感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:48:28.793

但是有太多的代码要走。我假设您正在以您的`doInBackground()`方法下载文件。然后，您可以确保`unpackZip`通过从方法调用它来调用它 `onPostExecute()`。

```
@Override
protected String doInBackground(String...items) {
   // download your file here
}

@Override
protected void onPostExecute(String unused) {

    //do your unpackZip here
} 
```

# php - 如何在drupal中添加视频上传字段？

> ID：16052396
> 
> 赞同：-2
> 
> 时间：2013-04-17T05:41:57.927
> 
> 标签：php, drupal, drupal-7, cck

我是 Drupal 的新手并使用 drupal 7，我有一个内容类型。我在其中添加了几个字段，现在我想添加另一个用于视频上传的文件。如何添加此字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:13:10.960

最简单的解决方案是将视频上传到 YouTube，然后通过[Youtube Field](http://drupal.org/project/youtube)添加到您的网站。这为您节省了大量的流量、存储空间、CPU 和 RAM。

如果您坚持将视频上传到您的网站，请考虑使用[Video](http://drupal.org/project/video)。

# java - 为什么我的字符串不会激活？

> ID：16052398
> 
> 赞同：2
> 
> 时间：2013-04-17T05:42:10.237
> 
> 标签：java, string, jcreator

我的问题是我试图根据它是真还是假来使声明为字符串的消息显示。未返回正确值的字符串是：snakeYearMsg

我一直试图让这个字符串整天返回所需的值，但无济于事。最后，我尝试了一种蛮力方法，列出了 SNAKE_YEAR 的所有可能可用性。

该程序允许用户输入数据，然后根据该输入为他们计算“Essscore”。我的问题是，最后向用户输出的数据始终显示用户出生在“蛇年”（蛇年，在中国十二生肖中），即使他们不是。

该计划是针对我忘记的作业，并且非常接近截止日期，因此将不胜感激

代码在这里：

```
/*Program designed by Some guy
*for KXT101 Assignment Number One*/

 import java.util.Scanner;
 public class AssigOne113

{
public static void main (String[] args)   
{
        final int CURRENT_YEAR = 2013;
        final int CALENDER_ROTATION = 12;
        final int SNAKE_YEAR = CURRENT_YEAR | 2001 | 1989 | 1977 | 1965 | 1953 | 1941 | 1929 | 1917 | 1905 | 1893 | 1881 | 1869 |
                                1857 | 1845 | 1833 | 1821 | 1809 | 1797 | 1785 | 1773 | 1761 | 1749 | 1737 | 1725 | 1713 | 1701 |
                                1689 | 1677 | 1665 | 1653 | 1641 | 1629 | 1617 | 1605 | 1593 | 1581 | 1569 | 1557 | 1545 | 1533 |
                                1521 | 1509 | 1497 | 1485 | 1473 | 1461 | 1449 | 1437 | 1425 | 1413 | 1401 | 1389 | 1377 | 1365 |
                                1353 | 1341 | 1329 | 1317 | 1305 | 1293 | 1281 | 1269 | 1257 | 1245 | 1233 | 1221 | 1209 | 1197 |
                                1185 | 1173 | 1161 | 1149 | 1137 | 1125 | 1113 | 1101 | 1089 | 1077 | 1065 | 1053 | 1041 | 1029 |
                                1017 | 1005 | 993  | 981  | 969  | 957  | 945  | 933  | 921  | 909  | 897  | 885  | 873  | 861  |
                                849  | 837  | 825  | 813  | 801  | 789  | 777  | 765  | 753  | 741  | 729  | 717  | 705  | 693  |
                                681  | 669  | 657  | 645  | 633  | 621  | 609  | 597  | 585  | 573  | 561  | 549  | 537  | 525  |
                                513  | 501  | 489  | 477  | 465  | 453  | 441  | 429  | 417  | 405  | 393  | 381  | 369  | 357  |
                                345  | 333  | 321  | 309  | 297  | 285  | 273  | 261  | 249  | 237  | 225  | 213  | 201  | 189  |
                                177  | 165  | 153  | 141  | 129  | 117  | 105  | 93   | 81   | 69   | 57   | 45   | 33   | 21   |
                                9;
        final int SUMMER_MONTH_JAN = 1;
        final int SUMMER_MONTH_FEB = 2;
        final int SUMMER_MONTH_DEC = 12;
        final int AUTUMN_MONTH_MAR = 3;
        final int AUTUMN_MONTH_APR = 4;
        final int AUTUMN_MONTH_MAY = 5;                         
        final int WINTER_MONTH_JUN = 6;
        final int WINTER_MONTH_JUL = 7;
        final int WINTER_MONTH_AUG = 8;                     
        final int SPRING_MONTH_SEP = 9;
        final int SPRING_MONTH_OCT = 10;
        final int SPRING_MONTH_NOV = 11;
        final int SIXTH_DAY = 06;
        final int SEVENTH_DAY = 07;
        final int JANUARY = 1;
        final int FEBUARY = 2;
        final int MARCH = 3;
        final int APRIL = 4;
        final int MAY = 5;
        final int JUNE = 6;
        final int JULY = 7;
        final int AUGUST = 8;
        final int SEPTEMBER = 9;
        final int OCTOBER = 10;
        final int NOVEMBER = 11;
        final int DECEMBER = 12;
        final int CALENDER_MAX = 12;

        Scanner sc;

        String essscorecalculate;
        String essscorerepeat;
        String userName;
        int birthYear;
        String junk;

        int yob;
        int day;
        int month = 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12;
        int essscore = 0;
        String summer = "Summer";
        String autumn = "Autumn";
        String winter = "Winter";
        String spring = "Spring";
        String seasonBorn = "any season";
        String monthBorn = "any month";
        String snakeYearMsg = "the year";

        boolean snakeYearBool;
        boolean haveS;

        double birthDay;

        char initial;

        //program begins

        System.out.println(" ");
        System.out.println("<------------------------------------------->");
        System.out.println("Sammy Snakes Sixth/Seventh Spring Of Success");
        System.out.println("<------------------------------------------->");
        System.out.println(" ");

        System.out.println("<------------------------------------------->");
        System.out.println("    I can calculate an Ess-Score for you     ");    
        System.out.println("   Would you like to calculate an Ess-Score? ");
        System.out.println("<------------------------------------------->");
        sc = new Scanner(System.in);
        essscorecalculate = sc.nextLine();
        {
            /*essscore.Reset;*/
            {

            }
        }
        System.out.println("<------------------------------------------->");
        System.out.println("         To begin, what is your name?        ");
        System.out.println("<------------------------------------------->");
        userName = sc.nextLine();
        initial =(userName.charAt(0));
        {
            if (initial == 'S')
                essscore =+ 4;
            if (initial == 's')
                essscore =+ 4;                  

        }
        System.out.println("<----------------------------------------------------------------->");
        System.out.println("  What year were you born? (Please enter in following format XXXX) ");
        System.out.println("<----------------------------------------------------------------->");
        birthYear = sc.nextInt();
        junk = sc.nextLine();
        {
            {
                if (birthYear == SNAKE_YEAR)
                    snakeYearBool = true;
                /*  essscore =+ 16; */      
                else if (birthYear != SNAKE_YEAR)
                    snakeYearBool = false;
            }
                {
                    if (snakeYearBool = false)
                        snakeYearMsg = "A non Snake year";
                    if (snakeYearBool = true)
                        snakeYearMsg = "Snake year";

                if (birthYear != SNAKE_YEAR)
                    essscore ++;            
                }
            }
        System.out.println("<--------------------------------------------------------------------->");
        System.out.println("Please enter your birthday (please enter in the following format DD.MM)");
        System.out.println("<--------------------------------------------------------------------->");
        birthDay = sc.nextDouble();
        junk = sc.nextLine();

            {
                {
                    day = (int)birthDay;
                        if (day == SIXTH_DAY)
                            essscore =+ 8;
                        if (day == SEVENTH_DAY)
                            essscore =+ 8;
                }
                {
                    month = ((int)Math.round(100*birthDay))%100;
                        /*System.out.print(month);*/
                }

                    {
                        if (month == 1)
                            monthBorn = "January";
                        if (month == 2)
                            monthBorn = "Febuary";
                        if (month == 3)
                            monthBorn = "March";
                        if (month == 4)
                            monthBorn = "April";
                        if (month == 5)
                            monthBorn = "May";                      
                        if (month == 6)
                            monthBorn = "June";                     
                        if (month == 7)
                            monthBorn = "July";                     
                        if (month == 8)
                            monthBorn = "August";                       
                        if (month == 9)
                            monthBorn = "September";                        
                        if (month == 10)
                            monthBorn = "October";                      
                        if (month == 11)
                            monthBorn = "November";                     
                        if (month == 12)
                            monthBorn = "December";                     
                    }

                {
                    if (month == SPRING_MONTH_SEP)
                        essscore =+2;
                    if (month == SPRING_MONTH_OCT)
                        essscore =+2;
                    if (month == SPRING_MONTH_NOV)
                        essscore =+2;                                                                       
                    {

                    if (month == SPRING_MONTH_SEP)                                                                                                                  
                        seasonBorn = "Spring";
                    else if (month == SPRING_MONTH_OCT)                                                                                                                 
                        seasonBorn = "Spring";
                    else if (month == SPRING_MONTH_NOV)                                                                                                                 
                        seasonBorn = "Spring";                      
                    else if (month ==AUTUMN_MONTH_MAR)
                        seasonBorn = "Autumn";
                    else if (month ==AUTUMN_MONTH_APR)
                        seasonBorn = "Autumn";
                    else if (month ==AUTUMN_MONTH_MAY)
                        seasonBorn = "Autumn";                          
                    else if (month == WINTER_MONTH_JUN)
                        seasonBorn = "Winter";
                    else if (month == WINTER_MONTH_JUL)
                        seasonBorn = "Winter";
                    else if (month == WINTER_MONTH_AUG)
                        seasonBorn = "Winter";                                                      
                    else if (month == SUMMER_MONTH_JAN)
                        seasonBorn = "Summer";
                    else if (month == SUMMER_MONTH_FEB)
                        seasonBorn = "Summer";
                    else if (month == SUMMER_MONTH_DEC)
                        seasonBorn = "Summer";                          
                    }
                }       
            }
        System.out.println("<------------------------------------------------>");   
        System.out.println(""+userName+" was born in "+seasonBorn+" on "+monthBorn+" "+day+" in "+snakeYearMsg+" "+birthYear+" ");
        System.out.println(""+essscore+""); 
        System.out.println("<------------------------------------------------>");

        System.out.println("<------------------------------------------------>");
        System.out.println("  Would you like to calculate another Ess-Score?  ");
        System.out.println("<------------------------------------------------>");
        essscorerepeat = sc.next();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:54:29.667

虽然我不会说这是*唯一*的问题，但一个关键问题是**使用[按位或](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)尝试对年（和月）进行编码是错误的**。

这是因为`int SNAKE_YEAR = x | y | z ..`会产生一个*整*数值，称为`SNAKE_YEAR`. 因为组件（所有年份）具有重叠的位序列，这会导致信息丢失。然而，即使没有丢失信息，这在使用简单时也会导致不正确的结果`==`（例如`SNAKE_YEAR == 2001`，当它应该为真时结果为假）。

相反，使用列表（或集合），`contains` *或者，更好地*创建使用离散公式（即`bool isYearOfSnake(int year)`）的方法。我猜想“循环 12 年结构”可以使用一个简单的模数来处理，从一个已知的蛇年的差异......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:59:54.663

您的代码中有两个主要问题。

一种是您尝试按位或一大堆整数，然后将其视为会为您检查所有整数。不幸的是，java 不会为您执行此操作，因此当您想查看出生年份是否为蛇年时，您需要使用模运算符。这可以通过使用这条线来实现：

```
if (((birthYear - 9) %12) == 0) 
```

代替

```
 if (birthYear == SNAKE_YEAR) 
```

您的另一个主要问题是，当您检查snakeYearBool 是false 还是true 时，您使用了单个= 而不是2 =，所以无论它总是返回true，因为您在第二个if 语句中将snakeYearBool 初始化为true。因此，将这些行更改为：

```
if (snakeYearBool == false)
                    snakeYearMsg = "A non Snake year";
if (snakeYearBool == true)
                    snakeYearMsg = "Snake year"; 
```

这应该可以解决您的问题。祝你好运！

# css - CSS 选择器查找表中的最后一行，其中（行）没有指定类（仅限 CSS，无 javascript）

> ID：16052404
> 
> 赞同：2
> 
> 时间：2013-04-17T05:42:34.823
> 
> 标签：css, css-selectors

请帮助我使用 CSS 选择器。

我需要将特殊属性应用于表中的最后一行，其中（行）**没有**指定的类，例如类“zzz”。

```
<table>
    <tbody>
        <tr class="odd">...</tr>
        <tr class="even zzz">...</tr>
        <tr class="odd">...</tr>
        <tr class="even">This one should be selected</tr>
        <tr class="odd zzz">...</tr>
        <tr class="even zzz">...</tr>
    </tbody>
</table> 
```

我只寻找纯 CSS 解决方案，而不是 javascript 解决方案。请不要建议 :not() 伪类，因为某些浏览器不支持它。

谢谢您的帮助，

——瓦迪姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T05:53:14.477

抱歉，这对于纯 CSS 是不可行的，即使是只有现代浏览器支持的选择器也不行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T05:49:01.000

我不是 100% 确定我完全理解，但你可以使用类似的东西

```
tr:last-child 
```

在你的 CSS

# xslt - 使用 XSLT 删除不需要的空格和返回

> ID：16052410
> 
> 赞同：3
> 
> 时间：2013-04-17T05:42:57.820
> 
> 标签：xslt

我想删除空格并返回元素之间仅针对特定子元素（即）的“数学”，如下面的 XML 所述。我试过了`<xsl:strip-space elements="m:math"/>`。但它删除了所有元素的空间。我需要保留`<style>`元素之后的空间和元素之前的空间`<b>`。

输入 XML：

```
<?xml version="1.0"?>
<chapter xmlns="http://www.w3.org/1998/Math/MathML">
    <style>This is style</style> 
    <math display="block"> 
        <munder> 
            <mi mathvariant="normal">BASE</mi>
            <mi mathvariant="normal">under</mi> 
        </munder> 
        <mo>=</mo> 
        <munder> 
            <mrow> 
                <munder> 
                    <mi mathvariant="normal">BASE</mi> 
                    <mi mathvariant="normal">under</mi> 
                </munder> 
            </mrow> 
            <mphantom>
                <mi mathvariant="normal">under</mi>
            </mphantom> 
        </munder> 
    </math>
    <b>This is bold</b>
</chapter> 
```

XSLT 试过：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xmlns="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:mml="http://www.w3.org/1998/Math/MathML">
    <xsl:output method="xml" encoding="UTF-8" indent="no"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

所需输出：

```
<?xml version='1.0' encoding='UTF-8'?>
<chapter xmlns="http://www.w3.org/1998/Math/MathML"><style>This is style</style> <math display="block"><munder><mi mathvariant="normal">BASE</mi><mi mathvariant="normal">under</mi></munder><mo>=</mo><munder><mrow><munder><mi mathvariant="normal">BASE</mi><mi mathvariant="normal">under</mi></munder></mrow><mphantom><mi mathvariant="normal">under</mi></mphantom></munder></math> <b>This is bold</b></chapter> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:24:47.753

编辑：虽然这个答案对这个问题无效，但我保留它以供参考，因为我已经解释了`linearize XML`代码中每个模板的重要性..并将相关答案作为新答案发布..

* * *

你不需要剥离空间，这应该做..

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="no" omit-xml-declaration="yes"/>
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="text()">
        <xsl:value-of select="normalize-space()" />
    </xsl:template>
</xsl:stylesheet> 
```

解释：

```
<xsl:output indent="no" omit-xml-declaration="yes"/> 
```

indent = 'no' 负责删除两个节点之间的附加空间 .. `omit-xml-declaration`从输出 XML 中删除 xml 声明。在您的情况下这是可选的..

```
 <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template> 
```

按原样复制节点.. 除了没有缩进..

```
<xsl:template match="text()">
    <xsl:value-of select="normalize-space()" />
</xsl:template> 
```

将不需要的空白字符转换为单空格字符 .. 示例：

```
<node>

    there is lots of     space
</node> 
```

输出将是这样的：

```
<node>there is lots of space</node> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:05:42.073

诀窍是插入 `<xsl:text>&#xA0;</xsl:text>`任何你想要的地方..

在这里，我`&#xA0;`在复制节点下的每个元素之前插入此文本（引入空间）`chapter`。

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="no" omit-xml-declaration="no"/>
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="//*[parent::node()[name() = 'chapter']]">
    <xsl:text>&#xA0;</xsl:text>
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>
    <xsl:template match="text()">
        <xsl:value-of select="normalize-space()" />
    </xsl:template>
</xsl:stylesheet> 
```

输出：

```
<?xml version="1.0" encoding="utf-8"?><chapter xmlns="http://www.w3.org/1998/Math/MathML"> <style>This is style</style> <math display="block"><munder><mi mathvariant="normal">BASE</mi><mi mathvariant="normal">under</mi></munder><mo>=</mo><munder><mrow><munder><mi mathvariant="normal">BASE</mi><mi mathvariant="normal">under</mi></munder></mrow><mphantom><mi mathvariant="normal">under</mi></mphantom></munder></math> <b>This is bold</b></chapter> 
```

您可以根据需要修改条件以容纳额外的空间。

# android - XMLPullParser 不读取空标签，例如

> ID：16052413
> 
> 赞同：1
> 
> 时间：2013-04-17T05:43:19.480
> 
> 标签：android, xml, xmlpullparser

下面是我的 XML，我将使用 XMLPullParser 解析它。解析器正确地从标签中读取值，例如

```
<hours>Monday: 1:00 PM - 3:00 PM Thursday: 8:30 AM - 12:30 PM</hours> 
```

但如果 webservice 没有给出计时数据，则 hours 标签为空：

```
<hours/> 
```

并且 XMLPullParser 会跳过这些标签。我想从这些标签中读取空值或空字符串。

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
  <city_data>
    <city_details>
      <id>1</id>
      <city>City1</city>
      <location>5390 Park</location>
      <phoneno>239-963</phoneno>
      <fax>239-963</fax>
      <hours>Monday: 1:00 PM - 3:00 PM Thursday: 8:30 AM - 12:30 PM</hours>
      <latitude>26.2134964</latitude>
      <longitude>-81.7672781</longitude>
      <action>2</action>
    </city_details>
  </city_data>
  <city_data>
    <city_details>
      <id>2</id>
      <city>City2</city>
      <location>13100 Westlinks</location>
      <phoneno>239</phoneno>
      <fax>239-332</fax>
      <hours/>
      <latitude>26.553446</latitude>
      <longitude>-81.7560699</longitude>
      <action>2</action>
    </city_details>
  </city_data>
</root> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T11:43:26.690

您需要使用`XmlPullParser.isEmptyElementTag()`来检测空标签，例如 <hours/>。这将允许您处理

> <hours>周一：下午 1:00 - 下午 3:00 周四：上午 8:30 - 中午 12:30</hours>

不同于

> <小时/>。

文档在这里：[XmlPullParser.isEmptyElementTag](https://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html#isEmptyElementTag())

# c# - ExportToHttpResponse 给出：“无法评估表达式，因为代码已优化或本机框架位于调用堆栈的顶部。”

> ID：16052417
> 
> 赞同：1
> 
> 时间：2013-04-17T05:43:40.837
> 
> 标签：c#, asp.net, crystal-reports, httpresponse

在加载 ASP.Net 页面时，会调用一个报告函数。

```
protected void Page_Load(object sender, EventArgs e)
{
    GlobalFunctions obj = new GlobalFunctions();
    obj.GetReport(Page PageName, string ReportName);
} 
```

GetReport 定义为：

```
public void GetReport(Page PageName, string ReportName)
{
    ReportClass rpt = new ReportClass();
    rpt = GetReportFromDLL(ReportName);   //No error here
    rpt.ExportToHttpResponse(ExportFormatType.PortableDocFormat, Response, true, ReportName); 
} 
```

错误 ：

> “响应”不能通过类访问。

我尝试使用“HttpContext.Current.Response”代替“Response”

```
rpt.ExportToHttpResponse(ExportFormatType.PortableDocFormat,HttpContext.Current.Response, true, ReportName); 
```

但我得到这个错误：

> “无法评估表达式，因为代码已优化或本机框架位于调用堆栈顶部。”

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T05:41:16.207

经过一番努力，我发现**ExportToHttpReponse 总是抛出错误**“无法评估表达式，因为代码已优化或本机框架位于调用堆栈顶部。” **如果整个代码块不在 Try-Catch 块中。**

这是避免此错误的解决方案：

```
public void GetReport(Page PageName, string ReportName)
{
    try
    {
        ReportClass rpt = new ReportClass();
        rpt = GetReportFromDLL(ReportName);   //No error here
        rpt.ExportToHttpResponse(ExportFormatType.PortableDocFormat, Response, true, ReportName);
    }
    catch (Exception ex)
    {
        //do nothing
    } 
} 
```

这只是消除了错误，并且报告打印在 HttpResponse 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:21:02.883

我不确定为什么您不能将响应传递给函数...尝试以下操作

```
 public void GetReport(HttpResponse response, string ReportName)... 
```

并调用为：

```
 obj.GetReport(Response, "some report name"); 
```

# django - 完全剥离 Django 表单中的某些 HTML 标签

> ID：16052418
> 
> 赞同：0
> 
> 时间：2013-04-17T05:43:45.510
> 
> 标签：django, validation, django-models, django-forms, data-cleaning

我有一个将新闻项目发布到数据库的 ModelForm，它使用 javascript textarea 来允许授权的发布者插入某些 HTML 来设置文本样式，例如粗体和斜体。但是，由于我使用“安全”过滤器进行模板输出，因此它会输出表单小部件尝试传递的所有 HTML。这包括一个永远不会消失的麻烦`<br>`标签，使您可以在没有表单验证的情况下提交，将字段读取为空并阻止您。我怎样才能使我不仅可以过滤`<br>`标签，而且可以将其从数据中完全删除？以下是相关代码：

模型.py：

```
from django.db import models
from django.forms import ModelForm, forms
from django.contrib.auth.models import User
# Create your models here.

class NewsItem(models.Model):
    user = models.ForeignKey(User)
    date = models.DateField(auto_now=True)
    news = models.TextField(max_length=100000, blank=False, help_text='HELP TEXT')

    def __unicode__(self):
        return u'%s %s %s' % (self.user, self.date, self.news)

class NewsForm(ModelForm):
    class Meta:
        model = NewsItem
        exclude=('user','date',) 
```

视图.py：

```
from news.models import NewsForm, NewsItem
from django.shortcuts import render
from django.http import HttpResponseRedirect, HttpResponse

def news(request):
    if request.method == 'POST':
        item = NewsItem(user=request.user)
        form = NewsForm(request.POST, instance=item)
        if form.is_valid():
            form.save()
        return HttpResponseRedirect('/news/')
    else:
        form = NewsForm()
        news_list = NewsItem.objects.all()
        return render(request, 'news_list.html', {'news_list': news_list, 'form': form}) 
```

新闻列表.html：

```
{% extends "base.html" %}
{% block title %}News in the Corps{% endblock %}

{% block content %}
    <h2 id="page_h">News in the Corps</h2>
    {% if user.is_authenticated %}
    <h3>Post News</h3>
        <script src="{{ STATIC_URL }}nicEdit.js" type="text/javascript"></script>
        <script type="text/javascript">bkLib.onDomLoaded(nicEditors.allTextAreas);</script>

        <div id="news_poster">
            <form id="news_poster" action="/news/" method="POST">{% csrf_token %}
            {{ form }} 
            <input type="submit" value="Submit" />
            </form>
        </div>
    {% endif %}
<ul id="events_list">
{% if news_list %}
<div id="news_list">
{% for news in news_list %}
    {% if news.id == 1 %}
    <hr />
    {% endif %}
    <div id="{{ news.id }}" class="news_item">
        <p class="poster">Posted By: {{ news.user }} | Posted On: {{  news.date }} | <a href="{% url 'news' %}#{{ news.id }}">Link</a></p>
        <div id="news_item">
        {{ news.news|safe }}
        </div> 
    </div>
    <hr />
{% endfor %}
</div>
{% endif %}
</ul>
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:21:33.873

您可以尝试[`removetags`](https://docs.djangoproject.com/en/1.1/ref/templates/builtins/#striptags)模板过滤器：

```
{{ news.news|removetags:"br"|safe }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:08:13.903

我不禁想到，Timmy O'Mahony 建议的“removetags”如果结构如下，可能会起作用：

```
{{ news.news|safe|removetags:"br"}} 
```

试一试，看看它是否有效。我会回复，但我的业力不够高，无法直接回复带有建议的答案。

# javascript - jquery 在动态创建时在 iframe 中运行

> ID：16052421
> 
> 赞同：0
> 
> 时间：2013-04-17T05:44:00.410
> 
> 标签：javascript, jquery

我正在尝试首先创建一个`iframe`然后将其注入 jQuery 库，然后提醒说 jQuery 已加载。

jQuery 库按预期插入到`iframe`头部，jQuery 上的警报加载到正文中。

问题是，它没有显示警报，而是说`jQuery is not defined`.

任何人都可以提出任何建议吗？

这是代码

```
<!doctype html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <title>iFrame Test</title>
    </head>
    <body>
        <script>
            var insertScript = function(src){
                var script = document.createElement('script');
                script.type = 'text/javascript';
                script.async = false;
                script.src = src;
                $('iframe').contents().find('head')[0].appendChild(script);
            }

            var insertScriptContent = function(code){
                var script = document.createElement('script');
                script.type = 'text/javascript';
                script.async = false;
                script.innerHTML  = code;
                $('iframe').contents().find('body')[0].appendChild(script);
            }

            $(function(){
                $('iframe').load(function(){
                    var contents = $('iframe').contents();
                    insertScript('https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js');
                    insertScriptContent('jQuery(function(){ alert("loaded"); });');
                });
            });
        </script>

        <div class="output">
            <iframe></iframe>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:18:09.827

您正在异步加载 jQuery（尽管有`script.async=false`），然后在此之后立即加载警报脚本。该脚本运行时尚未加载 jQuery，因此您将获得未定义的`jQuery`引用。

作为一个快速修复，我添加了一个`setInterval()`等待直到`jQuery`被定义。我还进行了以下其他更改：

*   删除了`script.async = false;`这两个地方，因为它没有任何好处。
*   去掉了`$('iframe').load()`包装。当我测试您的代码时，该包装器中的回调函数根本不会被调用。这并不奇怪，因为此时没有任何内容被加载到 iframe 中。
*   `document.createElement()`更改了您用来使用 iframe 文档（`iframedoc`在我的版本中调用）的两个地方。使用它可以正常工作`document`，但我更愿意在它们将被加载到的文档下创建这些脚本。
*   将 的两个实例更改`...find(something)[0].appendChild();`为更简单的`...find(something).append();`.

这是工作代码：

```
<!doctype html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript">
</script>

    <title>iFrame Test</title>
</head>

<body>
    <script type="text/javascript">

        $(function() {
            var $contents = $('iframe').contents();
            var iframedoc = $contents[0];

            var insertScript = function(src) {
                var script = iframedoc.createElement('script');
                script.type = 'text/javascript';
                script.src = src;
                $('iframe').contents().find('head').append(script);
            }

            var insertScriptContent = function(code) {
                var script = iframedoc.createElement('script');
                script.type = 'text/javascript';
                script.innerHTML = code;
                $('iframe').contents().find('body').append(script);
            }

            insertScript('https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js');

            insertScriptContent(
                'var timer = setInterval( function() {' +
                    'if( typeof jQuery == "undefined" ) return;' +
                    'clearInterval( timer );' +
                    'jQuery(function(){ alert("loaded"); });' +
                '}, 50 )'
            );

        });
    </script>

    <div class="output">
        <iframe></iframe>
    </div>
</body>
</html> 
```

这对于第一次通过来说很好，但是有一种更简单的方法可以做到这一点。我尝试用 jQuery 代码替换这两个脚本函数，所以这是另一个工作版本：

```
<!doctype html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript">
</script>

    <title>iFrame Test</title>
</head>

<body>
    <script type="text/javascript">

        $(function() {
            var $contents = $('iframe').contents();

            $contents.find('head').append(
                '<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"><\/script>'
            );

            $contents.find('body').append(
                '<script>' +
                    'jQuery(function(){ alert("loaded"); });' +
                '<\/script>'
            );

        });
    </script>

    <div class="output">
        <iframe></iframe>
    </div>
</body>
</html> 
```

奇怪的是，这个*没有*`setInterval()`计时器就可以正常工作，所以我把那个代码拿出来了。我不确定为什么会这样——这不是一种令人欣慰的感觉——但它在我测试过的浏览器中似乎是一致的。

最后，这是一个无效的实验。过去，我使用过`document.write()`针对 iframe 的效果。所以我想我会尝试：

```
<!doctype html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript">
</script>

    <title>iFrame Test</title>
</head>

<body>
    <script type="text/javascript">

        $(function() {
            var $contents = $('iframe').contents();
            var iframedoc = $contents[0];

            iframedoc.write(
                '<!doctype html>',
                '<html>',
                '<head>',
                    '<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js"><\/script>',
                '</head>',
                '<body>',
                    '<script>',
                        'debugger;',
                        'jQuery( function(){ alert("loaded"); } );',
                    '<\/script>',
                '</body>',
                '</html>'
            );
        });
    </script>

    <div class="output">
        <iframe></iframe>
    </div>
</body>
</html> 
```

这个版本确实将 jQuery 和内联脚本加载到 iframe 中，并在内`jQuery()`联脚本中执行调用。但它从不调用带有`alert()`in 的回调函数。这实际上与我正在做的事情有关，所以我明天可能会再看一遍，但同时我留下了实验代码，以防你好奇。我将其更改为在 iframe 中使用未压缩的 jQuery 以便于调试，并`debugger;`在其中留下了一条语句。

# android - 带有 HttpClient 和 AsyncHttpClient 的 Android HTTP 请求

> ID：16052423
> 
> 赞同：0
> 
> 时间：2013-04-17T05:44:13.137
> 
> 标签：android, apache, http, androidhttpclient

我正在开发一个 android 应用程序，它向 php 文件发出 HTTP 请求，然后给我一个字符串。该代码在 android 2.x 及更低版本中运行良好，但是当我在更高版本的 android 操作系统中运行它时，它会崩溃。我在清单文件中拥有所有必要的权限。

这是我的代码：

```
 getData data;
 String result;

 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    data = new getData("http://alexanderpadin.uphero.com/copyDataBase.php");
    result = data.getResult();

    Log.i("Data", result);
  } 
```

还有我的 getData 类：

```
 package com.application.uprm_map;

 import java.io.InputStream;
 import java.io.BufferedReader;
 import java.io.InputStreamReader;
 import java.util.ArrayList;
 import org.apache.http.HttpEntity;
 import org.apache.http.HttpResponse;
 import org.apache.http.NameValuePair;
 import org.apache.http.client.HttpClient;
 import org.apache.http.client.entity.UrlEncodedFormEntity;
 import org.apache.http.client.methods.HttpPost;
 import org.apache.http.impl.client.DefaultHttpClient;
 import android.util.Log;

 public class getData {

     private String result;
     private InputStream is;
     private StringBuilder sb;

     ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

     public getData(String url){
         try{
             HttpClient httpclient = new DefaultHttpClient();
              HttpPost httppost = new HttpPost(url);
              httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
              HttpResponse response = httpclient.execute(httppost);
              HttpEntity entity = response.getEntity();
              is = entity.getContent();
              }catch(Exception e){
                  Log.e("log_tag", "Error in http connection "+e.toString());
                  }
         try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
             sb = new StringBuilder();
             sb.append(reader.readLine() + "\n");

             String line="0";
             while ((line = reader.readLine()) != null) {
                 sb.append(line + "\n");
             }
             is.close();
             result = sb.toString();
             }catch(Exception e){
                 Log.e("log_tag", "Error converting result "+e.toString());
             }
     }
     public String getResult(){
         return result;
     }
 } 
```

日志猫：

```
04-17 01:29:43.593: E/Trace(13235): error opening trace file: No such file or directory (2)
04-17 01:29:44.118: E/log_tag(13235): Error in http connection android.os.NetworkOnMainThreadException
04-17 01:29:44.118: E/log_tag(13235): Error converting result java.lang.NullPointerException: lock == null
04-17 01:29:44.133: E/AndroidRuntime(13235): FATAL EXCEPTION: main
04-17 01:29:44.133: E/AndroidRuntime(13235): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.application.uprm_map/com.application.uprm_map.MainActivity}: java.lang.NullPointerException: println needs a message
04-17 01:29:44.133: E/AndroidRuntime(13235):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2307)
04-17 01:29:44.133: E/AndroidRuntime(13235):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2357)
04-17 01:29:44.133: E/AndroidRuntime(13235):    at android.app.ActivityThread.access$600(ActivityThread.java:153)
04-17 01:29:44.133: E/AndroidRuntime(13235):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1247)
04-17 01:29:44.133: E/AndroidRuntime(13235):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-17 01:29:44.133: E/AndroidRuntime(13235):    at android.os.Looper.loop(Looper.java:137)
04-17 01:29:44.133: E/AndroidRuntime(13235):    at android.app.ActivityThread.main(ActivityThread.java:5226)
04-17 01:29:44.133: E/AndroidRuntime(13235):    at java.lang.reflect.Method.invokeNative(Native Method)
04-17 01:29:44.133: E/AndroidRuntime(13235):    at java.lang.reflect.Method.invoke(Method.java:511)
04-17 01:29:44.133: E/AndroidRuntime(13235):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
04-17 01:29:44.133: E/AndroidRuntime(13235):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
04-17 01:29:44.133: E/AndroidRuntime(13235):    at dalvik.system.NativeStart.main(Native Method)
04-17 01:29:44.133: E/AndroidRuntime(13235): Caused by: java.lang.NullPointerException: println needs a message
04-17 01:29:44.133: E/AndroidRuntime(13235):    at android.util.Log.println_native(Native Method)
04-17 01:29:44.133: E/AndroidRuntime(13235):    at android.util.Log.i(Log.java:159)
04-17 01:29:44.133: E/AndroidRuntime(13235):    at com.application.uprm_map.MainActivity.onCreate(MainActivity.java:64)
04-17 01:29:44.133: E/AndroidRuntime(13235):    at android.app.Activity.performCreate(Activity.java:5104)
04-17 01:29:44.133: E/AndroidRuntime(13235):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-17 01:29:44.133: E/AndroidRuntime(13235):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2261)
04-17 01:29:44.133: E/AndroidRuntime(13235):    ... 11 more 
```

我也尝试使用这个包： http: [//loopj.com/android-async-http/](http://loopj.com/android-async-http/)：

这是代码：

```
 String result; 

       protected void onCreate(Bundle savedInstanceState) {
               super.onCreate(savedInstanceState);
               setContentView(R.layout.activity_main);

               AsyncHttpClient client = new AsyncHttpClient();
               client.get("http://alexanderpadin.uphero.com/copyDataBase", new AsyncHttpResponseHandler() {
                   @Override
                   public void onSuccess(String response) {
                       result = response;
                   }
               });

               log.i("Data", result);
       } 
```

当我尝试在函数 onSuccess 中打印响应变量时，它可以工作，但是当我尝试让该变量做其他事情时，它就不起作用了。

日志猫：

```
04-17 01:22:11.358: E/Trace(12475): error opening trace file: No such file or directory (2)
04-17 01:22:26.103: E/Trace(12710): error opening trace file: No such file or directory (2)
04-17 01:22:26.618: E/AndroidRuntime(12710): FATAL EXCEPTION: main
04-17 01:22:26.618: E/AndroidRuntime(12710): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.application.uprm_map/com.application.uprm_map.MainActivity}: java.lang.NullPointerException: println needs a message
04-17 01:22:26.618: E/AndroidRuntime(12710):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2307)
04-17 01:22:26.618: E/AndroidRuntime(12710):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2357)
04-17 01:22:26.618: E/AndroidRuntime(12710):    at android.app.ActivityThread.access$600(ActivityThread.java:153)
04-17 01:22:26.618: E/AndroidRuntime(12710):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1247)
04-17 01:22:26.618: E/AndroidRuntime(12710):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-17 01:22:26.618: E/AndroidRuntime(12710):    at android.os.Looper.loop(Looper.java:137)
04-17 01:22:26.618: E/AndroidRuntime(12710):    at android.app.ActivityThread.main(ActivityThread.java:5226)
04-17 01:22:26.618: E/AndroidRuntime(12710):    at java.lang.reflect.Method.invokeNative(Native Method)
04-17 01:22:26.618: E/AndroidRuntime(12710):    at java.lang.reflect.Method.invoke(Method.java:511)
04-17 01:22:26.618: E/AndroidRuntime(12710):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
04-17 01:22:26.618: E/AndroidRuntime(12710):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
04-17 01:22:26.618: E/AndroidRuntime(12710):    at dalvik.system.NativeStart.main(Native Method)
04-17 01:22:26.618: E/AndroidRuntime(12710): Caused by: java.lang.NullPointerException: println needs a message
04-17 01:22:26.618: E/AndroidRuntime(12710):    at android.util.Log.println_native(Native Method)
04-17 01:22:26.618: E/AndroidRuntime(12710):    at android.util.Log.i(Log.java:159)
04-17 01:22:26.618: E/AndroidRuntime(12710):    at com.application.uprm_map.MainActivity.onCreate(MainActivity.java:69)
04-17 01:22:26.618: E/AndroidRuntime(12710):    at android.app.Activity.performCreate(Activity.java:5104)
04-17 01:22:26.618: E/AndroidRuntime(12710):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-17 01:22:26.618: E/AndroidRuntime(12710):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2261)
04-17 01:22:26.618: E/AndroidRuntime(12710):    ... 11 more 
```

我的代码中是否缺少某些内容？有人可以帮我实现这一目标吗？我将不胜感激任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:47:54.723

你崩溃是因为

```
 Log.i("Data", result); 
```

正确：

```
Log.i("Data", ""+result); 
```

不仅仅是检查为什么结果为空。某些操作系统版本无法读取 401 响应消息，需要 hack 才能做到这一点

# c# - 从视图 (.cshtml) 访问 viewbag 值

> ID：16052425
> 
> 赞同：2
> 
> 时间：2013-04-17T05:44:23.383
> 
> 标签：c#, asp.net, multidimensional-array, viewbag, kendo-asp.net-mvc

嗨，有人可以帮我如何从我的视图（.cshtml）访问 viewbag 值这是我的示例

```
var appointments = new[,] { { "4/1/2013", "B'day" }, { "4/2/2013", "Appointment with abc" } };
ViewBag.Appointments = appointments; 
```

现在我想从我的 .cshtml 文件中访问 ViewBag.Appointments 值。

任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-02-22T06:12:25.917

这就是您访问 ViewBag 中数据的方式。请记住 ViewBag 数据通常是动态的，只能在运行时访问。

```
ViewBag.Appointments = appointments; 
```

在控制器中设置 ViewBag 数据后，在视图中检索它，如下所示。

```
@{
    var appointments = ViewBag.Appointments;
} 
```

然后，您可以遍历结果以使用 foreach 循环获取各个项目。

```
@foreach(var appointment in appointments)
{
    <p>@appointment.value</p>
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:12:52.020

要遍历此数组并在 cshtml 中“打印”，请使用以下代码：

```
@foreach(var appointement in ViewBag.Appointments)
{
   <span>@appointement[0]</span>
   <span>@appointement[1]</span>
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:29:16.677

要在单个列中的视图中打印 viewbag 的所有值，请使用以下命令

```
@{
    for (int i = 0; i < ViewBag.Appointments.GetLength(0); i++)
    {
        for (int j = 0; j < ViewBag.Appointments.GetLength(1); j++)
        { 
           <B>  @ViewBag.Appointments[i, j] </B> <br />
        }
    }    
} 
```

要将视图中 viewbag 的所有值打印为键值对，请使用以下命令

```
@{
    for (int i = 0; i < ViewBag.Appointments.GetLength(0); i++)
    {
           <B>  Key= @ViewBag.Appointments[i, 0], Value= @ViewBag.Appointments[i, 1] </B> <br />
    }    
} 
```

**编辑**- 按照下面评论中的要求

您可以在 GIT Hub 上查看这个[NGON](https://github.com/brooklynDev/NGon)项目。**注意**：在同一页面上，您会找到详细的教程。

帮助页面中的一小部分内容可帮助您入门。

在您的控制器中，您可以向 ViewBag 的动态 NGon 属性添加任何值：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        ViewBag.NGon.Appointments= new[,] { { "4/1/2013", "B'day" }, { "4/2/2013", "Appointment with abc" } };
        return View();
    }
} 
```

然后在你的脚本函数中，你可以使用它，如下所示

```
<script type="text/javascript">
    $(function () {

          var appointments= ngon.Appointments;
          // You logic will come here  
    }); </script> 
```

试试看，它应该工作。

# javascript - 如何创建两个相同的 div。彼此相邻且处于同一水平

> ID：16052426
> 
> 赞同：0
> 
> 时间：2013-04-17T05:44:23.853
> 
> 标签：javascript, css

我想创建两个相同的 div 和下两个彼此！

但在我的代码中，第二个 div (col2) 位于 dov col1 旁边，但在它之下（不在同一级别）。我怎样才能改变它

```
var wrap=document.createElement("div");
        wrap.style.width= '900px';
        wrap.style.margin= '0 auto';
       wrap.style.height= '280px';

        var col1=document.createElement("div");
        col1.style.float= 'left';
        col1.style.width= '450px';
        col1.style.height= '280px';
        col1.style.border= '1px solid';

        var col2=document.createElement("div");
        col2.style.marginLeft ='450px';
        col2.style.width= '450px';
        col2.style.border = '1px solid green';

        var txtNode=document.createTextNode("Item 1 -Hor");

        col2.appendChild(txtNode);

        wrap.appendChild(col1);
                wrap.appendChild(col2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:57:01.540

[http://jsfiddle.net/cdbVj/1/](http://jsfiddle.net/cdbVj/1/)

我创造了一个小提琴。

CSS：

```
.first{
    height:100px;
    width:200px;
    border:1px red solid;
    float:left;
}

.second{
    position:absolute;
    width:200px;
    height:100px;

    margin-left:210px;
    border: 1px black solid;
} 
```

HTML：

```
 <div class ="parent">
        <div class="first">FIRST</div>
        <div class="second">SECOND</div>
    </div> 
```

您可以相应地发布css。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T05:58:15.797

将宽度 450px 减小到 448px。它会起作用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T05:52:30.480

使用两个 div 都是浮动的

```
col2.style.float ='left'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T06:02:49.703

它实际上很简单：只需创建一个边框为：0px 的表格。将两个 div 放在一个 tr 中，第一个 div 左对齐，另一个 div 右对齐。

```
<table style="border: 0px" data-role="content">
  <tr style="border: 0px">
     <td style="border: 0px">
        <div align="left"  data-role="content" style="text-align: center;">
            <div align="left" style="font-weight: bold; color: black;">
                 <p id="id" style="font-size: 22px;"></p>
        </div>
         </div>
     </td>
     <td style="border: 0px">
        <div align="right" data-role="content" style="text-align: center;">
    <button>my button</button>
        </div>
    </td>
   </tr>
 </table> 
```

# jquery - jquery如何访问原型函数

> ID：16052435
> 
> 赞同：0
> 
> 时间：2013-04-17T05:44:50.217
> 
> 标签：jquery, prototype

请参考下面的原型。

```
var sfSvgRender = function (element) {
    this.svgLink = "http://www.w3.org/2000/svg";

};
sfSvgRender.prototype = (function () {
    this.drawPath = function (options, element) {

        var path = document.createElementNS(this.svgLink, "path");
        $(path).attr(options);
        $(path).appendTo(element);

    }
})(); 
```

当我创建这样的对象时

```
var svgRenderObj= new sfSvgRender(); 
```

svgRenderObj 仅包含“svgLink”属性。我无法访问“drawpath”功能。我如何访问 jquery 中的原型函数？

谢谢，

湿婆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:48:13.060

您想将原型设置为一个对象，因此您必须创建一个。利用`new`

```
sfSvgRender.prototype = new (function () {
    this.drawPath = function (options, element) {    
        var path = document.createElementNS(this.svgLink, "path");
        $(path).attr(options);
        $(path).appendTo(element);    
    }
})(); 
```

您还可以使用对象文字

```
sfSvgRender.prototype ={
    drawPath: function (options, element) {

        var path = document.createElementNS(this.svgLink, "path");
        $(path).attr(options);
        $(path).appendTo(element);

    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:58:56.753

我找到了另一种解决方案。请参阅下面的代码片段。

```
sfSvgRender.prototype ={
    drawPath: function (options, element) {

        var path = document.createElementNS(this.svgLink, "path");
        $(path).attr(options);
        $(path).appendTo(element);

    }
}; 
```

谢谢，

湿婆

# php - 如何检查单个输入文本框的多个值？

> ID：16052436
> 
> 赞同：1
> 
> 时间：2013-04-17T05:44:53.653
> 
> 标签：php, html, forms, csv, range

我想创建一个网站，用户可以在其中查看奖金债券号码，并且我对 php 也有所了解，所以我在 html 中创建了一个表单：

```
<form>
    Enter your price bond number <input type="text" name="number"><br>
    <input type="submit" value="try your luck">
</form> 
```

现在在 php 中，我想检查它是单个数字、范围数字还是逗号分隔的数字，例如：

```
1023342
1023342-10233100
1023342,1023343,1023344,1023345 
```

我想根据用户输入的内容采取不同的行动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:55:18.047

```
$mynumber = $_POST["number"];
$pieces = explode(",", $mynumber);
if(count($pieces)>0)
echo "Comma separated";
$pieces = explode("-", $mynumber);
if(count($pieces)>0)
echo "Range Value";
else
echo "Single Value"; 
```

上面的代码在某种程度上很有用，最后你将有一个数字数组来处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:48:21.717

您可以使用

```
strpos 
```

像这样

```
if (strpos($str,',') == true) {
     echo "it has comma";
} else if (strpos($str,'-') == true) {
    echo "it has hyphen";
} else {
     echo "single number";
 } 
```

通过替换 echo 将您各自的功能置于 if 条件下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T05:48:59.163

做这样的事情：

```
<?php
 $value=1023342;
 if (preg_match("-", $value)) {
     echo " - was found.";
  } else if(preg_match(",", $value)){
     echo " , was found";
  }
  else
  {
    echo "it is a simple number";
  }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T06:15:32.110

```
function check_input($number){
  if(ctype_digit($number)){
   //case1: simple number
   return 1;
  }
  if(preg_match('/(\d)-(\d)/', $number, $out)){
   //Case2: range
   //we need to check if the range is valid or not
   if($out[1] >= $out[2]){
    //echo 'error: the first number in range should be lessthan second number';
    return false;
   }
   return 2;
  }
  if(preg_match('/\d+(,\d+)+/', $number, $out)){
   //Case3: comma seperated
   return 3;
  }
  return false;
}

//usage
if(check_input($number) == 1){
  //do something
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-28T02:05:59.220

*考虑到用户可能*提交的输入内容，我觉得所有其他答案都有点未成熟。我决定编写一个全面的解决方案，该解决方案将删除无效值并生成一组有效值以供您继续处理。

代码：（[PHP Demo](http://sandbox.onlinephpfunctions.com/code/45ee266dac8776f01032b074c19c504296a567b1) & [Regex Pattern Demo/Explanation](https://regex101.com/r/MzNb97/1)）

```
// declare limit that value ranges cannot exceed (for project-specific reasons
//   and/or to avoid memory limitation failures)
$limit=100;

$result=[];  // declare an empty array
// split on commas, and filter out any invalid values
foreach(preg_grep("/^( ?(\d+-\d++|\d+),?)+$/",explode(',',$input)) as $chunk){
    if(strpos($chunk,'-')===false){
        $result[]=(int)$chunk;  // cast value as an integer for uniformity
    }else{
        $range=explode('-',$chunk);
        if(($size=abs($range[0]-$range[1]))<=$limit){
            $result=array_merge($result,range($range[0],$range[1]));
        }else{
            echo "Value range ($range[0] to $range[1]) size ($size)
                  exceeds allowed limit ($limit)";
        }
    }
} 
```

运行此代码块后，您可以`$result`根据项目需要使用数组中的值。

我的代码将允许用户：

*   在逗号之前和/或之后添加一个空格
*   输入单个值
*   输入多个逗号分隔值
*   输入范围值
*   以逗号分隔值的形式输入单个值和范围值的组合

我的代码将过滤掉：

*   非数值
*   范围表达式中超过 1 个破折号的范围值
*   不以数字开头和结尾的范围值
*   空值

# r - 我可以在 Windows 机器上托管一个闪亮的应用程序吗？

> ID：16052441
> 
> 赞同：10
> 
> 时间：2013-04-17T05:45:08.437
> 
> 标签：r, shiny

我已经注册了测试版主机。我尝试按照说明在我的 widnows 机器上创建 shinyapps/myapp 文件夹。我可以在本地运行闪亮的应用程序。我已经安装了闪亮需要的 node.js 程序，但我可以获得配置文件吗？我认为我的错误信息需要 python？有没有更简单的方法在 Windows 机器上托管闪亮的应用程序？谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2017-06-16T08:56:14.943

答案有点晚了：**可以在 Windows 上托管一个闪亮的应用程序**。

使用下面的 run.R 脚本，将其作为 Windows 机器上的作业启动。请确保端口（低于 1234）在本地防火墙中打开。

享受！

```
require(shiny)
folder_address = 'H:/path to app'

x <- system("ipconfig", intern=TRUE)
z <- x[grep("IPv4", x)]
ip <- gsub(".*? ([[:digit:]])", "\\1", z)
print(paste0("the Shiny Web application runs on: http://", ip, ":1234/"))

runApp(folder_address, launch.browser=FALSE, port = 1234, host = ip) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T05:50:22.490

来自[闪亮的网站](https://github.com/rstudio/shiny-server)：

> 您需要一台 Linux 服务器，并安装以下先决条件：
> 
> Node.js 0.8.16 或更高版本 对于 Ubuntu，我们发现这些说明运行良好。对于 Red Hat/CentOS，我们建议从源代码安装。R 2.15 或更高版本的 Shiny R 包，安装到机器范围的站点库中。这是一种简单的方法： sudo su - -c "R -e \"install.packages('shiny', repos=' [http://cran.rstudio.com/](http://cran.rstudio.com/) ')\""

您现在无法在 Windows 机器上本地托管 Shiny 应用程序。使用 Linux 运行虚拟机可能是一个不错的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T06:11:59.553

使用

[https://github.com/leondutoit/shiny-server-on-ubuntu](https://github.com/leondutoit/shiny-server-on-ubuntu)

部署相当容易。太糟糕了，作者不是很敏感。

# php - 使用 bitbucket 在登台和生产服务器上进行 mercurial 自动化部署

> ID：16052442
> 
> 赞同：0
> 
> 时间：2013-04-17T05:45:08.947
> 
> 标签：php, mercurial, tortoisehg, bitbucket

目前我们正在使用 mercurial 和 tortoise HG 的 GUI 来管理存储库，我们的存储库是在 bitbucket 上创建的。

现在我想将我的源代码部署到我的（暂存/测试）和生产服务器。我也用谷歌搜索过，但没有找到任何好的答案。

我也喜欢用 mercurial 管理我的 sql 数据库。是否可以制作我们的数据库版本？

请帮我！！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:23:39.943

您不能将数据库存储在存储库中，但可以导出数据库。
您可以使用命令行 ( `mysqldump`) 或 MySQL 数据库管理器导出数据库。但我建议编写一个命令行脚本，它会自动为您执行此操作（因为多次编写该命令很烦人）。

[这](http://ben.kulbertis.org/2011/10/synchronizing-a-mysql-database-with-git-and-git-hooks/)是一篇关于将 mysql 数据库与 git（包含自动脚本）同步的文章，它应该可以帮助您。为 HG 重写这些脚本应该不难。

当你推送代码时，它只会被推送到 bitbucket 服务器。如果您希望您的服务器（或开发人员、测试或其他）获取代码，您将需要从服务器中提取代码（使用命令行命令`hg pull`或在您的 GUI 中使用“拉”按钮执行此操作 - 谷歌应该帮助您找到它）。您的服务器无法自动执行此操作，因为它会提供安全问题。（如果有人可以访问开发人员帐户并且如果他推送一些代码会发生什么情况，这会做坏事，例如将客户的数据推送到另一台服务器？以及“数据库”部分。您应该只将结构保存在您的存储库中，不是用户数据等）。

好吧，您应该仅使用命令行（或 FTP 客户端或其他）在您的（测试）服务器上应用您的代码，因为：运行的脚本需要重新启动属性，或者如果您使用 PHP 服务器，您的数据库可能添加新表时需要更新）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:29:12.070

如果您考虑**数据库演变**的版本控制，而不是数据库中的数据，您必须阅读有关[Liquibase](http://www.liquibase.org/quickstart)和使用[数据库更改日志文件](http://www.liquibase.org/manual/databasechangelog)发布数据库更改的信息。

简短介绍：

*   架构中的每次更改（创建数据库也是强制性的零级更改）由 Liqubase 存储为更改日志
*   与变更集一起存储的变更日志，它引入了此变更（添加到以前的变更日志集中）
*   将项目从状态 A 更新到状态 B 假定将 A::B 范围内的所有变更集应用于代码以及这些变更集中的所有数据库变更日志

# cmake - CMAKE add_custom_command：如何使用我的原始命令

> ID：16052444
> 
> 赞同：5
> 
> 时间：2013-04-17T05:45:47.933
> 
> 标签：cmake

我正在尝试使用 ADD_CUSTOM_COMMAND 将一些自定义构建命令添加到我的**vc2010****项目**中。但：

 ****[1]**我只是发现 CMAKE 会自动插入比我预期更多的代码。

例如，我希望命令完全是：

```
"c:\Some Folder\MyTool.exe" -arg0 -arg1 
```

CMakeLists.txt 中对应的代码如下：

```
add_custom_command( OUTPUT ${outfile}
                  COMMAND "c:\Some Folder\MyTool.exe" ARGS "-arg0 -arg1"
                  # COMMAND "\"c:\Some Folder\MyTool.exe\"" will FAIL to be parsed!
                  MAIN_DEPENDENCY ${infile}
                  VERBATIM) 
```

但实际上我得到了：

```
setlocal
c:\Some Folder\MyTool.exe "-arg0 -arg1"
if %errorlevel% neq 0 goto :cmEnd
:cmEnd
endlocal & call :cmErrorLevel %errorlevel% & goto :cmDone
:cmErrorLevel
exit /b %1
:cmDone
if %errorlevel% neq 0 goto :VCEnd 
```

这不是我想要的。我也尝试过 string: `COMMAND "\"${MYTOOL_PATH}\" -arg0 -arg1"`，但 CMake 只是未能解析它，因为字符串前面有一个引号。所以很糟糕，我不能引用命令字符串，因为路径*`c:\Some Folder\MyTool.exe`*包含空格。

**[2]**我还注意到 CMake 会自动扩展我的依赖路径。

如果我添加到命令`DEPENS "$(PATH_MACRO)"`中，我最终会得到 CMake 自动扩展的依赖路径：`C:\MySolutionDir\$(PATH_MACRO)`; 但我只想要`$(PATH_MACRO)`，因为我会确保 Visual Studio 理解`$(PATH_MACRO)` 所指的内容。

***所以这是我的问题***：

CMake 如何只接受我的原始输入，而不自动扩展路径或插入我不期望的代码？我将确保我的输入对 Visual Studio 有效。谢谢！

PS。我的 CMake 版本：2.8.10.2。VS版本：visual studio 2010 Ultimate

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-24T14:14:01.867

万一这对某人有帮助。我试图让二进制签名作为构建后的步骤使用`signtool.exe`，但仅用于`Release`构建。只有未注释的语法有效，其他语法无效。我有点不知道为什么其他一些不起作用，但至少我找到了一个。关于何时生成文字引号以及何时不生成文字引号，似乎有一些奇怪的规则，具体取决于引用表达式中的内容。也许有人可以解释。

```
function(my_sign_binary TARGET)
#SET(COMMAND_LINE signtool sign $<TARGET_FILE:${TARGET}>)
add_custom_command(
    TARGET ${TARGET} 
    POST_BUILD 
    COMMENT "Signing: ${TARGET}"
    COMMAND "$<$<CONFIG:Release>:signtool>" "$<$<CONFIG:Release>:sign>"  "$<$<CONFIG:Release>:$<TARGET_FILE:${TARGET}>>"

    #COMMAND $<$<CONFIG:Release>:signtool.exe sign $<TARGET_FILE:${TARGET}>>
    #COMMAND echo 1\. signtool sign $<TARGET_FILE:${TARGET}>
    #COMMAND echo 2\. "$<$<CONFIG:Release>:signtool sign $<TARGET_FILE:${TARGET}>>"
    #COMMAND "$<$<CONFIG:Release>:signtool sign $<TARGET_FILE:${TARGET}>>"
    #COMMAND "$<$<CONFIG:Release>:signtool>" "$<$<CONFIG:Release>:\ sign\ $<TARGET_FILE:${TARGET}>>"
    #COMMAND echo 3\. $<$<CONFIG:Release>:"signtool sign $<TARGET_FILE:${TARGET}>">
    #COMMAND "echo 4\. $<$<CONFIG:Release>:signtool sign $<TARGET_FILE:${TARGET}>>"
    #COMMAND echo 5\. [$<$<CONFIG:Release>:signtool sign $<TARGET_FILE:${TARGET}>>]
    #COMMAND $<$<CONFIG:Release>:signtool sign $<TARGET_FILE:${TARGET}>>
    #COMMAND $<$<CONFIG:Release>:${COMMAND_LINE}>
    #COMMAND $<$<CONFIG:Release>:COMMAND_LINE>
    #COMMAND $<$<CONFIG:Release>:"${COMMAND_LINE}">
    #COMMAND $<CONFIG:Release>:signtool sign $<TARGET_FILE:${TARGET}>
    #COMMAND echo 8\. "${$<$<CONFIG:Release>:COMMAND_LINE>}"
    #COMMAND ${"$<$<CONFIG:Release>:COMMAND_LINE>"}
)
endfunction() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:18:38.593

对于问题 1，请尝试`"c:\\Some Folder\\MyTool.exe" -arg0 -arg1`. 该`ARGS`参数不是必需的，但重点是省略`-arg0 -arg1`.

对于问题 2，由于`$(PATH_MACRO)`不是绝对路径，CMake 将其视为相对于源目录的路径。解决此问题的最佳方法可能是使用“生成器表达式”，但如果没有关于您的具体情况的更多信息，我无法提供更好的答案。

有关生成器表达式的信息，请参阅[`add_custom_command`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_custom_command "CMake v2.8.10 文档").**

# javascript - AngularJs 中的 $timeout 不能正常工作

> ID：16052449
> 
> 赞同：1
> 
> 时间：2013-04-17T05:46:15.310
> 
> 标签：javascript, angularjs, timeout

我使用 $timeout 函数在单击 4 秒后隐藏 div。

它运作良好，但在我的网站上执行一些其他操作后，它会变慢，并在 8 - 10 秒而不是 4 秒后发生。

这是我的代码：

```
$scope.layout.rightPanel.InputDataTimeout = $timeout(function () {
   $scope.layout.rightPanel.InputDataMode = !$scope.layout.rightPanel.InputDataMode;
}, 4000); 
```

# c# - IIS 托管网站的网络路径

> ID：16052451
> 
> 赞同：1
> 
> 时间：2013-04-17T05:46:19.803
> 
> 标签：c#, asp.net, iis-7

如何在 C# 中获取 IIS 托管网站的网络路径？我试过了`Server.MapPath("~/")`，它返回像（）这样的物理路径`C:\inetpub\....`；但我希望它采用 ( `http://IP_Add_of_hosted_machine/Website_Name/`) 形式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:08:36.320

如果您在请求中需要这个，您可以使用以下代码：

```
string url = HttpContext.Current.Request.Url.AbsoluteUri;
// will have something like this: http://IP_Add_of_hosted_machine/Website_Name/Default_1.aspx 
```

如果您不在请求上下文中，则托管它的网站是未知的。此外，同一目录可以在 IIS 中托管两次，因此很难说您想要哪个。

# java - 如何在android中将@符号添加到字符串？

> ID：16052452
> 
> 赞同：5
> 
> 时间：2013-04-17T05:46:34.053
> 
> 标签：java, android

我正在研究安卓。在我的项目中，我添加了“|” 符号和'@'符号到字符串，但它没有添加@符号。我没有找到我出错的地方。请帮我解决一下这个。

```
String str="";
str = str + "|" + id + "@" + id2 + "@" + id3; 
```

当我打印字符串“str”时，它只显示 id 值，但不打印 id1 和 id2。输出：|13

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:09:54.797

我试过这个，

 `````
TextView tvAt = (TextView)findViewById(R.id.tvAtExample);
String id1 = "A";
String id2 = "B"; 
String id3 = "C";
tvAt.setText(id1 + "|"+ id2 + "@" + id3); 
````  `它的工作，它产生输出

 ``A|B@C`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:51:06.147

用这个：

```
<string name="strings">\@Strings</string> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T05:56:32.440

我已经检查过了

```
String id = "A";
String id2 = "B";
String id3 = "C";

        String str="";
        str = str + "|" + id + "@" + id2 + "@" + id3; 
```

和输出一样

```
|A@B@C 
``````

# html - 提交按钮不起作用

> ID：16052454
> 
> 赞同：21
> 
> 时间：2013-04-17T05:46:45.523
> 
> 标签：html, internet-explorer, http, google-chrome, firefox

我有一个表格`<input type="submit"`。在 chrome 中提交不做任何事情。在开发人员工具选项卡中的“网络”上，我什么也看不到。开发者工具也没有错误。同时，如果我确实保存了一个页面并打开了一个保存的页面，那么在我按下提交按钮后，我看到“网络”选项卡中出现了一些东西。这发生在 chrome 和 firefox 中。这在 IE 中按预期工作。

有没有人有后见之明，我应该看什么？

编辑：我不需要直接的答案，我只需要知道，我应该在哪里看。如果有人发布了一个方向并且这将帮助我解决我的问题，我会接受它作为一个正确的答案。

EDIT2：页面结构如下所示：

```
html
    head
    body
        div
        div
            form
            form
            form
            form
            form
                input
                input
                table
                table
                    tbody
                        tr..td..input type=submit 
```

EDIT3：我们发现了实际的问题，这是一个页面中有一个链接，包含`href="#"`并单击该链接后提交停止工作，因为`#`被添加到 URL 的末尾并且由于`action`表单是空的，所以它选择了 URI来自当前 URI，它包含`#`在，所以浏览器没有提交，而是跳转到了当前页面。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-17T06:22:20.233

如果您没有使用任何 JavaScript 进行表单验证，那么您的表单的简单布局将如下所示：

```
<form action="formHandler.php" method="post">    
 <input name="fname" id="fname" type="text" value="example" />    
 <input type="submit" value="submit" />
</form> 
```

您需要确保`submit`表单元素中有按钮，并且元素上存在适当的`action`属性`form`。

要获得更直接的答案，请提供您正在使用的代码。

您可能会发现以下用途：[http ://www.w3.org/TR/html401/interact/forms.html](http://www.w3.org/TR/html401/interact/forms.html)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-17T06:14:02.027

你在使用 HTML5 吗？如果是这样，请检查`<input type="hidden">`您的表单中是否包含该属性`required`。删除该`required`属性。Internet Explorer 不会采用此属性，因此它可以工作，但 Chrome 会。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-09-30T13:14:08.713

我今天遇到了这个问题，问题是我阻止了文档 onclick 中的事件默认操作：

```
document.onclick = function(e) {
    e.preventDefault();
} 
```

文档 onclick 通常用于事件委托，但阻止每个事件的默认值是错误的，您必须仅对必需的元素执行此操作：

```
document.onclick = function(e) {
    if (e.target instanceof HTMLAnchorElement) e.preventDefault();
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-04-30T15:47:41.097

检查您是否在页面上使用任何类型的 jquery/javascript 验证，并尝试禁用它，看看会发生什么。您可以使用浏览器的开发人员工具查看是否正在加载任何带有验证或验证的 javascript 文件。您还可以查找隐藏的表单元素（即样式设置为 display:none; 或类似的东西），并确保那些未呈现的元素没有隐藏的验证错误。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-03-26T07:28:30.750

来自未来的你好。

为了清楚起见，我只想添加（因为这在谷歌中非常高） - 我们现在可以使用

`<button type="submit">Upload Stuff</button>`

并重置表格

`<button type="reset" value="Reset">Reset</button>`

查看按钮[类型](https://www.w3schools.com/tags/att_button_type.asp)

我们还可以附加按钮来提交这样的[表单](https://www.w3schools.com/tags/att_button_type.asp)：

`<button type="submit" form="myform" value="Submit">Submit</button>`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-18T00:24:11.077

我在一个朋友的 HTML 代码上遇到了这个问题，在他的例子中，他缺少引号。

例如：

```
<form action="formHandler.php" name="yourForm" id="theForm" method="post">    
<input type="text" name="fname" id="fname" style="width:90;font-size:10>     
<input type="submit" value="submit"/>
</form> 
```

在此示例中，输入文本 fname 上缺少引号只会使提交按钮无法使用，并且表单将不会提交。

当然，这是一个不好的例子，因为我应该首先使用 CSS ;) 但无论如何，请检查所有单引号和双引号以查看它们是否正确关闭。

此外，如果您有任何像中心这样的标签，请将它们移出表单。

```
<form action="formHandler.php" name="yourForm" id="theForm" method="post">  
<center> <-- bad 
```

尽管看起来很奇怪，但它可能会产生影响。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-16T10:46:25.563

您不能将一个`form`元素作为另一个`form`元素的子元素（直接或间接）。

如果以下内容未返回`null`，则您需要删除多余的`form`元素：

```
document.querySelectorAll('form form');//Must return null to be valid. 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-09T11:26:49.907

检查您的表格是否在表格之外

# algorithm - 什么是算法操作的后验和先验分析？

> ID：16052457
> 
> 赞同：10
> 
> 时间：2013-04-17T05:46:49.603
> 
> 标签：algorithm, analysis, methodology

我是一名新开发人员。请帮助我理解什么*是算法操作的后验*和*先验*分析。我用谷歌搜索了它，但我没有得到任何正确的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-10T01:44:33.230

算法的先验分析：这意味着我们在特定系统上运行算法之前对其进行分析（空间和时间） - 也就是说，我们仅通过查看算法而不是在特定系统上运行来确定算法的时间和空间复杂度（使用不同的处理器和编译器）。

算法的Apostiari分析：这意味着我们只有在系统上运行后才对算法进行分析。它直接依赖于系统并随系统而变化。

在行业中，我们无法进行 Apostiari 分析，因为软件通常是为匿名用户制作的，该用户在与业内现有系统不同的系统（在 Pentium 3 或 Pentium 4 等处理器中）上运行它。

在 Apriory 中，这就是我们使用渐近符号来确定时间和空间复杂度的原因，因为它们在计算机之间发生变化，但渐近地它们是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T06:36:19.500

简而言之

> 在先验分析中，我们获得了一个限制算法计算时间的函数。
> 
> 在后验分析中，我们在算法执行时收集有关算法时间和空间消耗的实际统计数据。

[这里是书。](http://books.google.com.ua/books?id=P1_2EwAaoikC&lpg=SA3-PA21&dq=posteriori%20analysis%20of%20algorithm&pg=SA3-PA21#v=onepage&q=posteriori%20analysis%20of%20algorithm&f=false)

有点长：

[维基百科定义](http://en.wikipedia.org/wiki/A_priori_and_a_posteriori)

Ans另一篇文章引用

> 到目前为止，分析算法的最重要原因是确保它能够正确解决您的问题。如果我们的算法不起作用，那么其他一切都不重要。所以我们必须对其进行分析，以证明它总是会按预期工作。
> 
> 我们还必须看看我们算法的效率。如果它解决了我们的问题，但在 O(nn) 时间（或空间！）内解决了问题，那么我们可能应该考虑重新设计。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-07T15:29:42.050

A Priori Analysis - 这都是关于算法的理论分析。通过假设所有其他因素（例如处理器速度）是恒定的并且对实现没有影响来衡量算法的效率。

后验分析 - 这更多是对算法的经验分析。所选算法使用编程语言实现，然后在目标计算机机器上执行。在此分析中，将收集实际统计信息，例如所需的运行时间和空间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-24T13:50:01.033

在后验分析中，我们在系统上运行算法以检查其原始静态，以便我们可以计算其时间和空间复杂度。但由于它因系统而异，所以它不是那么有效。我们根据特定的系统要求计算其时间复杂度。

在先前的分析中，我们只看到算法并根据渐近符号对其进行分析。就渐近符号而言，它不会将系统更改为系统。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T06:37:41.510

从[管理软件测试（Peter Farrell-Vinay）的第 12.7 节开始](http://books.google.co.in/books?id=ijQElKfBaHEC&pg=PA213&lpg=PA213&dq=posteriori+priori+analysis+algorithm&source=bl&ots=cXwUPGrtMI&sig=kE8Hv7RLAtnjKy2YVeAWtSezQkw&hl=en&sa=X&ei=KzpuUcC2BMiJrAfB4IDYCw&ved=0CE4Q6AEwAg#v=onepage&q=posteriori%20priori%20analysis%20algorithm&f=false)，*先验*分析是使用一些理论模型（如有限状态机）定义函数的阶段。然后使用该模型来确定该功能的各种特征（如时间和空间使用）。

在*后验*阶段，收集函数特征（如时间和空间使用）的**证据**，并与先验分析期间计算的证据进行比较。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-03-06T13:49:18.910

后验分析依赖于硬件算法和编程语言算法，它给出了准确的答案

先验分析与硬件无关，它取决于执行语句的次数

# java - 在树中设置父母

> ID：16052458
> 
> 赞同：0
> 
> 时间：2013-04-17T05:46:54.007
> 
> 标签：java, tree, binary-tree, huffman-code

我有一个以空节点 a 开头的霍夫曼二叉树。

A 指向一个左节点和一个右节点，右节点也指向左节点和右节点。在拥有这棵树之后，是否可以递归地为每个节点设置父节点？

这是我在想的代码：

```
public Node setParents(Node n)
{
    if(n.getZero() == null && n.getOne() == null)
    {
        return n;
    }
    Node a = setParents(n.getZero()); // Zero being left
    a.setParent(n);
    Node b = setParents(n.getOne()); // One being right.
    b.setParent(n);
} 
```

这是我当前如何通过使用优先级队列来创建树，该队列的值从最小到最大排序。

```
public Node createTree(PriorityQueue<Node> pq)
{

    while(pq.size() > 1)
    {
        Node n = new Node();

        Node a = pq.poll();
        if(pq.size() > 0)
        {
            Node b = pq.poll();
            n = new Node(a.getFrequency() + b.getFrequency());
            n.setZero(a);
            a.setWhich(0);
            a.setParent(n);
            n.setOne(b);
            b.setWhich(1);
            b.setParent(n);
        }
        else
        {
            n = new Node(a.getFrequency());
            n.setZero(a);
            a.setWhich(0);
            n.setParent(n);
            n.setOne(null);
        }
        pq.add(n);
    }
    Node n = pq.poll();
    n.setParent(null);
    setParents(n.getZero());
    setParents(n.getOne());
    return n;
} 
```

我只需要确保每个节点都有一个父节点，我不知道从哪里开始。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:48:04.107

对您的代码的一些注释可能会有所帮助

1\. 不要在你的学习样本中使用 getter 和 setter 来进行简单的分配和读取，它们很难理解。

2\. 如果您准备了一些物品，请不要将此物品与其他物品混合

```
 n.setZero(a);
        a.setWhich(0);
        a.setParent(n);
        n.setOne(b); 
```

3\. 据我了解有机会获得NPE

```
 if(pq.size() > 0) {
              Node b = pq.poll();
          }
     }
     Node n = pq.poll();
     n.setParent(null);      <-  n can be null 
```

4\. Java 有一个很好的特性，叫做 Enums

```
 a.setWhich(0);
     b.setWhich(1); 
```

* * *

这是从根开始设置父母的方法

```
public void fixParents(Node parentNode)
{
    if (parentNode.zero != null) {
        parentNode.zero.parent = parentNode;
        fixParents(parentNode.zero);
    }
    if (parentNode.one != null) {
        parentNode.one.parent = parentNode;
        fixParents(parentNode.one);
    }
} 
```

**UPD**

又一想。您在树构建功能中设置了父母。所以你应该只检查父母是否正确，而不是重新设置他们。

```
public void checkParents(Node parentNode) throws Exception
{
    if (parentNode.zero != null) {
        if (parentNode.zero.parent != parentNode) {
            throw new Exception( here include info about the parentNode.zero );
        }
        checkParents(parentNode.zero);
    }
    if (parentNode.one != null) {
        if (parentNode.one.parent != parentNode) {
            throw new Exception( here include info about the parentNode.one );
        }
        checkParents(parentNode.one);
    }
} 
```

# php - 添加第三个 Mod 重写 - mod_rewrite

> ID：16052460
> 
> 赞同：0
> 
> 时间：2013-04-17T05:46:55.533
> 
> 标签：php, regex, apache, mod-rewrite

伙计们。我正在尝试在我的 .htaccess 中添加第三个重写条件。问题是，我不知道如何添加另一个。因此，如果有人对此有很好的深入教程，我将非常感激。

无论如何，回到正题。这是我当前的代码：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^(.*?)/?$ $1.php [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ users.php?name=$1 [QSA,L] 
```

如您所见，上述内容删除了 .php 扩展名，并使所有不存在的文件转到用户（IE：website.com/user 转到用户的个人资料页面）。

所以现在我需要为论坛添加一个。我希望它像*"website.com/Group/Category/Thread"*一样重写。

这甚至可能吗，还是我需要降低对此的期望？任何帮助将不胜感激。感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:52:27.857

嗯，我记得发布了这个答案:)

无论如何，您可以像这样在以前的规则之上创建一个新规则（并`/Group/Category/Thread`用您拥有的任何东西替换）：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /

RewriteRule ^forum/?$ /Group/Category/Thread [L,NC]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^(.*?)/?$ $1.php [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ users.php?name=$1 [QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:02:43.983

您可以插入更多规则。鉴于您希望这些规则在最终全能到 user.php 之前匹配，您应该将它们放在最终规则之前。

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^(.*?)/?$ $1.php [L]

# match forum, forum/group, forum/group/category and forum/group/category/thread urls
RewriteRule ^forum/?$ forum.php?group=$1&category=$2&thread=$3 [L]
RewriteRule ^forum/([^/]+)/?$ forum.php?group=$1 [L]
RewriteRule ^forum/([^/]+)/([^/]+)/?$ forum.php?group=$1&category=$2 [L]
RewriteRule ^forum/([^/]+)/([^/]+)/([^/]+)/?$ forum.php?group=$1&category=$2&thread=$3 [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ users.php?name=$1 [QSA,L] 
```

# sharepoint - 显示带有图片的组成员和添加新用户的工具（如果是管理员/所有者），并且任何其他组或用户都可以查看

> ID：16052461
> 
> 赞同：1
> 
> 时间：2013-04-17T05:46:55.620
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer

![显示带有照片的组成员个人资料](https://i.stack.imgur.com/Tkh7o.png)

大家好，

我需要显示组成员，如图所示。是否有任何开箱即用的方法来实现这一点。我正在使用 sharepoint 2010。如果是管理员/所有者，他们应该可以选择向组中添加新成员，而所有其他 sharepoint 组和用户只需要具有查看权限。如果我们使用 Visual Studio 2010 可视化 Web 部件，如何实现这一点。欢迎任何帮助。

感谢和问候吉杰什

# php - 如何从一个查询中获取值并将其分配给另一个查询

> ID：16052474
> 
> 赞同：0
> 
> 时间：2013-04-17T05:47:14.127
> 
> 标签：php, mysql

我在**mysql**数据库中有两个表，它们是：

1.  汽车信息
2.  汽车的图像

这两个表值都由一个表格填写。在 Car 表中，我有一个字段，其名称`'CarImageID'`是具有自动增量的主键，并且在 images 表中，我有相同的字段`'CarImageID'`，但 FK 具有 NOT UNIQE INDEX。我想要的是每当我按下提交按钮时，第二个查询从第一个查询中获取它的值。我也创造了他们之间的关系。如何从 Imagequery 中获取 CarImageID 并在我的第二个查询中使用它，即 CarInfoQuery？。

```
<?php

require_once('db.php');
    @$CarID=$_POST['CarID'];
    @$CarName=$_POST['pname'];
    @$CarModel=$_POST['pstatus'];
if(isset($_FILES['file_upload']))
{

$shuff=str_shuffle("ABD6565LSLFKDSAJFD");
mkdir("upload/$shuff");
$files=$_FILES['file_upload'];

for($x = 0; $x < count($files['name']); $x++)
{
  $name=$files['name'][$x];
  $tmp_name=$files['tmp_name'][$x];
     if(move_uploaded_file($tmp_name, "upload/$shuff/".$name))
     {
      $imagequery="INSERT INTO CarImages(CarImageID, ImageName, ImagePath) 

      VALUES(‘ ’, '$name', 'upload/$name')";

      mysql_query($imagequery);

            echo 'Image '. $name .' Uploaded Successfully <br>';

     }
     else
     {
         echo 'uploading failed';
     }

}
$carinfoquery="INSERT INTO Car(CarID, CarName, CarModel, CarImageID)

         VALUES('// this value should take its value from first query', '$CarName', '$CarModel', 'CarImageID')";

          mysql_query($carinfoquery)  or die(mysql_error());

          if($carinfoquery)
          {
              echo '<br><br> The Car Information Insertion was 
                              Successfully <br><br>';
          }
          else
          {
              echo '<br><br> Car Insertion Failed';
          } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:53:01.543

做

```
 mysql_query($imagequery);
  $carimageid = mysql_insert_id(); 
```

或者为了安全起见，请使用 mysql_query 资源：

```
$res = mysql_query($imagequery);
$carimageid = mysql_insert_id($res); 
```

如果您有多个查询并且不想遇到将它们混淆的机会，则第二种方法很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:52:47.480

您不需要插入 at `CarImageID`，因为它是 Auto-increment 列。如果你得到`Warning: mysql_insert_id() expects parameter 1 to be resource, boolean...` 它意味着你的`INSERT`语句失败，所以用它`die(mysql_error()`来查找问题。

```
$imagequery="INSERT INTO CarImages(ImageName, ImagePath) VALUES('$name', 'upload/$name')";
mysql_query($imagequery) or die(mysql_error());
$id = mysql_insert_id($res); 
```

编辑1：

我认为你的表结构有问题。一辆车可能有多个图像。所以表结构应该是这样的： `Car(CarID, CarName, CarModel)`即`CarID`PK和自增。`CarImages(CarID, CarImageID, ImageName, ImagePath)`这`CarID`是 FK 并且`CarImageID`是自动增量的。您应该首先 INSERT into `CAR`table，然后获取`CarID`并`mysql_insert_id()`使用此 id 将 INSERT into `CarImages`table。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T05:53:50.710

不要使用 mysql 函数使用 mysqli

如果你使用 mysqli 使用

```
$id = $mysqli->insert_id; 
```

在当前功能中您可以使用

```
$res = mysql_query($imagequery);
$id = mysql_insert_id($res); 
```

使用此 id 插入下一个查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T05:54:40.233

`second insert query`您必须在检索**最后一个条目 ID**之前添加一个查询，因为您没有在第一个查询中指出它，只是让数据库根据最后一个条目处理它（这是因为它是一个自动增量字段）

**所以改变**

```
 mysql_query($imagequery); 
```

**在**

```
 $lastid = mysql_query($imagequery);
 $last_entry_id = mysql_insert_id($lastid); 
```

现在你已经存储了你的变量`last_entry_id`，你可以在第二个查询中使用

我还想提醒您，`mysql_`功能已被弃用，因此我建议您切换到新项目[`mysqli`](http://php.net/manual/en/book.mysqli.php)或[`PDO`](http://php.net/manual/en/book.pdo.php)进行新项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T06:02:12.533

获取插入ID

```
$res = mysql_query($imagequery);
$carimageid = mysql_insert_id(); 
```

如果 db col CarImageID 值为 $carimageid 然后

```
$carinfoquery="INSERT INTO Car(CarID, CarName, CarModel, CarImageID)

         VALUES('// this is CarID if col is auto_increment ,blank this', '$CarName', '$CarModel', '$carimageid')"; 
```

然后使用 if($run_query) 而不是 if($carinfoquery)

```
 $run_query =  mysql_query($carinfoquery)  or die(mysql_error());

          if($run_query)
          {
              echo '<br><br> The Car Information Insertion was 
                              Successfully <br><br>';
          }
          else
          {
              echo '<br><br> Car Insertion Failed';
          } 
```

更新表结构可能是

```
Car(CarID, CarName, CarModel)
CarImages(CarImageID, ImageName, ImagePath,CarID) 
```

# github - 删除 GitHub 存储库的 fork 依赖项

> ID：16052477
> 
> 赞同：261
> 
> 时间：2013-04-17T05:47:31.777
> 
> 标签：github

如何让 GitHub 忘记或解除我的 repo 最初是另一个项目的分支的关联？

我在 GitHub 上创建了一个项目。我现在可以看到“从任何/任何东西分叉”。不再维护父存储库“whatever/whatever”。我被允许继续使用原始存储库的代码库来创建一个独立的存储库。

有没有办法将我的项目与原始存储库分离？

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2013-04-17T06:13:13.833

您可以[联系 github 支持](https://github.com/contact)并要求他们将您的存储库切换到“正常模式”。

在[此页面上](https://help.github.com/articles/why-are-my-contributions-not-showing-up-on-my-profile/#commit-was-made-in-a-fork)，“Commit was made in a fork”段落中，解释了必须通过支持才能切换。因此，您自己可能无法做到这一点（除非您销毁并重新创建之前解释过的存储库......如果您这样做，如果您的项目附有票证或维基，请***小心***被删除！）。

2022 年 1 月更新：

[使用https://support.github.com/request/fork](https://support.github.com/request/fork)上的 GitHub 聊天机器人虚拟助手。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2017-12-26T05:32:01.070

您可以从 GitHub UI 将分叉的存储库复制到一个新的存储库（没有分叉依赖项），然后删除原始的分叉存储库：

*   登录 GitHub
*   选择右上角的**+号，然后选择****Import repository**。
*   导入您的分叉存储库。新的存储库将没有 fork 依赖项。
*   在存储库设置中删除原始的分叉存储库。

**注意：这种方法不会保留问题和拉取请求。**

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2013-04-17T06:07:04.473

确保您在本地存储库中拥有所有重要的分支和标签，删除 github 存储库，通过常规方式（不分叉）重新创建存储库，并使用`git push --all`. 请注意，如果您有不想发布的本地分支，则可能值得为该操作创建一个临时的干净本地克隆。

但是，这也将摆脱 wiki 和问题。由于 wiki 实际上是它自己的存储库，因此可以通过克隆它然后重新创建和推送来类似地处理它。仓库地址位于 wiki 的 Git 访问页面 ( `git@github.com:user/repo.wiki.git`)。

这留下了问题。它们可以通过[API](http://developer.github.com/v3/issues/)导出，但据我所知，您只能与您的人创建问题和评论，因此无法完美地导入它们。

因此，如果您需要保留问题，您应该按照 Thomas Moulard 的建议通过 github 支持。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2015-01-26T09:03:55.057

我遇到了类似的问题，最后使用这个[github 帮助页面](https://help.github.com/articles/duplicating-a-repository/ "github帮助")来解决它。我不介意 wiki 和问题跟踪器，因为它是为我的博客使用由另一个用户友好开发的主题。

要在多次提交后分离一个分叉的 repo 并将其用作您自己的 repo，而不会丢失整个历史记录：

`git clone --bare git@github.com:user/forked_repo.git`

`new-repository`在 github 网站上创建一个新的空存储库。并推送一个镜像版本：

`cd user.github.com.git/`

`git push --mirror git@github.com:user/new-repository.git`

可以在 github 上重命名，`forked_repository`用另一个名称保留它作为备份并在需要时检查更新。或者干脆删除它。

将 重命名`new-repository`为原始名称就可以了。作为副作用，您的提交现在出现在您的历史记录中。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2017-10-23T22:10:53.060

**这仅适用于 GitHub Enterprise，不适用于 github.com**

登录到具有管理员权限的帐户：

1.  转到您需要分离的存储库：`https://<ghe url>/<org>/<repo>`
2.  点击右上角的“站点管理员”火箭
3.  点击顶部菜单栏上的“协作”
4.  单击左侧窗格中的“网络”
5.  在 Network Structure 窗格中单击“Make Root”
6.  接受

这是在 GitHub Enterprise 2.9 上测试的

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-08-05T08:55:51.533

使用来自[aurelien](https://stackoverflow.com/users/1395352/aurelien)和[Clayton](https://stackoverflow.com/users/30753/clayton)的信息，我可以通过以下方式做到这一点：

```
$ git clone --bare https://github.com/my/forked_repo.git
<delete forked_repo on GitHub>
<recreate repo on GitHub using same name>
$ cd forked_repo.git
$ git push --mirror 
```

这是[文档`git clone --bare`](https://git-scm.com/docs/git-clone)：

> 创建一个裸 Git 存储库。也就是说，不是在 中创建`<directory>`和放置管理文件，而是将`<directory>/.git`其`<directory>`本身设为`$GIT_DIR`. 这显然意味着 -n 因为没有地方可以检查工作树。远程的分支头也直接复制到相应的本地分支头，而不将它们映射到`refs/remotes/origin/`. 使用此选项时，既不会创建远程跟踪分支，也不会创建相关的配置变量。

这是[文档`git push --mirror`](https://git-scm.com/docs/git-push)：

> 不是命名要推送的每个 ref，而是指定`refs/`（包括但不限于`refs/heads/`、`refs/remotes/`和`refs/tags/`）下的所有 ref 都镜像到远程存储库。新创建的本地 refs 会被推送到远端，本地更新的 refs 会在远端强制更新，删除的 refs 会从远端移除。如果设置了配置选项，这是默认`remote.<remote>.mirror`设置。

注意：与其他`git`基于答案一样，这不会复制不属于`git`repo 的问题，例如 wiki 和问题。每塔皮奥：

*   wiki 是一个单独的 git 存储库，可以按 Tapio 以类似的方式处理。地址是：`git@github.com:user/repo.wiki.git`。
*   问题可以通过 GitHub API 导出，但重新创建它们会出现问题，因为它们只能由您的用户创建，因此导入会丢失信息。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2021-11-05T05:29:04.963

使用您的凭据登录 GitHub。

转到[https://support.github.com/contact?tags=rr-forks&subject=Detach%20Fork&flow=detach_fork](https://support.github.com/contact?tags=rr-forks&subject=Detach%20Fork&flow=detach_fork)。

输入 fork 的 URL 或 repo 名称为`your-user-name/repository-name`，并回答虚拟助手的其他问题。

您将收到一封带有票号的电子邮件，您可以在其中查看您的请求状态。一旦你的回购被分叉，你也会通过电子邮件收到通知。

* * *

*注意：我可以在 Chrome 和 Edge 中使用虚拟助手，但不能在 Firefox 中使用。此外，在分离回购后，我的票的状态仍处于待处理状态。我猜 GitHub 最终会在他们的过程中修复这些故障。*

# c - gdb 字符串打印输出中的“\b”是什么意思？

> ID：16052481
> 
> 赞同：5
> 
> 时间：2013-04-17T05:47:38.370
> 
> 标签：c, gdb

当我在包含不可打印字符`p buf`的缓冲区上发出命令`buf`时，当 gdb 尝试打印不可打印字符时，我通常会得到八进制输出。

但是，这次我得到了这样的字符串。

```
foobar\341\204\004\b\357\373\377\277 
```

这里是什么`\b`意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T05:50:37.563

`\b`是退格字符（`\010`如果您使用的是 ASCII）。

以下是 C 标准定义的其余转义序列（5.2.2 字符显示语义）：

> 2 表示执行字符集中非图形字符的字母转义序列旨在在显示设备上产生如下操作：
> 
> `\a`（警报）在不改变活动位置的情况下产生声音或可见警报。
> 
> `\b`（退格）将活动位置移动到当前行的前一个位置。如果活动位置在一行的初始位置，则显示设备的行为是未指定的。
> 
> `\f`（换页）将活动位置移动到下一个逻辑页面开始处的初始位置。
> 
> `\n`（新行）将活动位置移动到下一行的初始位置。
> 
> `\r`（回车） 将活动位置移动到当前行的初始位置。
> 
> `\t`（水平制表符）将活动位置移动到当前行的下一个水平制表位置。如果活动位置位于或超过最后定义的水平制表位置，则显示设备的行为未指定。
> 
> `\v`（垂直制表符）将活动位置移动到下一个垂直制表位置的初始位置。如果活动位置处于或超过最后定义的垂直制表位置，则显示设备的行为未指定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T05:49:43.680

表示退格`\b`ASCII 字符（其代码为 8 或`\010`八进制）

# oracle-apex - 提供了哪些 oracle apex url javascript 实用程序？

> ID：16052494
> 
> 赞同：1
> 
> 时间：2013-04-17T05:48:43.170
> 
> 标签：oracle-apex

我需要将一些查询参数从一个 apex 应用程序传递到另一个，所以我将这些作为查询参数传递。

Oracle APEX URL 的格式类似于：

> [http://apex.oracle.com/pls/apex/f?p=AppId:PageId:Session:Request:Debug:ClearCache:Params:ParamValues:PrinterFriendly](http://apex.oracle.com/pls/apex/f?p=AppId:PageId:Session:Request:Debug:ClearCache:Params:ParamValues:PrinterFriendly)

我传递的 URL 类似于：

> [http://apex.oracle.com/pls/apex/f?p=AppId:PageId:Session:MY_PARAM_NAME:MY_PARAM_VALUE](http://apex.oracle.com/pls/apex/f?p=AppId:PageId:Session:MY_PARAM_NAME:MY_PARAM_VALUE)

我正在用 javascript 构建 url。

我的问题是：

*   apex 是否提供任何 Javascript 实用程序来构建这些 URL，还是我一个人？
*   另外，在接收页面端，我如何访问这些查询参数？是否有 Apex javascript 实用程序可以让我获取所有查询参数？
*   如果不是 javascript，还有其他方法可以访问这些查询参数吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:42:07.517

您是否有理由使用 javascript 来“构建”链接？您不能使用按钮/分支重定向到其他应用程序吗？
没有用于构造 url 的 javascript api。[您可以在此处找到可用 javascript API 的文档。](http://docs.oracle.com/database/121/AEAPI/javascript_api.htm#AEAPI266)

构建链接实际上并不难，只要您了解它是如何构建的，而且您似乎做到了。无论如何，[这里是 oracle 文档](http://docs.oracle.com/database/121/HTMDB/concept_url.htm#HTMDB03017)。

要使用您传递的参数，您必须知道您实际上是在设置页面项目值。如果您传递`P33_X,P33_Y:111,2222`到目标应用程序（！，而不是页面），但它没有这些项目，那么您将收到一个错误：

```
ERR-1002 Unable to find item ID for item "X" in application "54687". 
```

这意味着您也可以通过 javascript 获取这些项目的值，只要它们位于页面本身上。除非您使用按需流程，否则无法检索其他页面中的项目或应用程序项目。您可以通过创建一些隐藏项目并将其源设置为适当的项目来轻松解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-12T20:49:52.107

以防万一您需要访问`http://www.example.com/`URL 的 HOST 部分 ()，您可以查看[此答案](https://stackoverflow.com/a/30118927/4178262)。

# java - 有没有办法过滤特定类别的 log4j 日志

> ID：16052501
> 
> 赞同：0
> 
> 时间：2013-04-17T05:49:11.267
> 
> 标签：java, logging, file-io, log4j

我需要整理属于几个类别的所有**log4j**日志，并在每天结束时发送一封邮件。当我使用*org.apache.log4j.DailyRollingFileAppender*将所有类别记录到同一个（过时的）文件中时，我无法找到一种方法来过滤生成的日志而不阅读日志文件。如果有人可以建议我使用**java**来做到这一点，那就太好了。以下代码是我需要过滤的一些日志类别的示例。

```
log.fatal("Fatal error message");
log.error("Error message"); 
```

如果最终无法进行过滤，那么至少我可以找到一种方法来覆盖这些类别的功能就足够了。我的 log4j.properties 看起来像这样。

```
log =/usr/end_of_day_logs
log4j.rootLogger = DEBUG, FILE

log4j.appender.FILE=org.apache.log4j.DailyRollingFileAppender
log4j.appender.FILE.File=${log}/log.out
log4j.appender.FILE.Append=true
log4j.appender.FILE.DatePattern='.'yyyy-MM-dd
log4j.appender.FILE.layout=org.apache.log4j.PatternLayout
log4j.appender.FILE.layout.conversionPattern=%d{yyyy-MM-dd HH:mm} [%C %x~ %M:%L] %-5p - %m%n 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:49:24.883

您可以为每个日志级别[甚至为不同的日志包]创建多个附加程序。

```
log =/usr/end_of_day_logs
log4j.rootLogger = FATAL, FFILE

log4j.appender.FFILE=org.apache.log4j.DailyRollingFileAppender
log4j.appender.FFILE.File=${log}/flog.out
log4j.appender.FFILE.Append=true
log4j.appender.FFILE.DatePattern='.'yyyy-MM-dd
log4j.appender.FFILE.layout=org.apache.log4j.PatternLayout
log4j.appender.FFILE.layout.conversionPattern=%d{yyyy-MM-dd HH:mm} [%C %x~ %M:%L] %-5p - %m%n 
```

* * *

```
log =/usr/end_of_day_logs
log4j.rootLogger = ERROR, EFILE

log4j.appender.EFILE=org.apache.log4j.DailyRollingFileAppender
log4j.appender.EFILE.File=${log}/elog.out
log4j.appender.EFILE.Append=true
log4j.appender.EFILE.DatePattern='.'yyyy-MM-dd
log4j.appender.EFILE.layout=org.apache.log4j.PatternLayout
log4j.appender.EFILE.layout.conversionPattern=%d{yyyy-MM-dd HH:mm} [%C %x~ %M:%L] %-5p - %m%n 
```

然后使用具有所需模式的另一个附加器和 SMTP 附加器。

```
log4j.appender.MAIL=org.apache.log4j.net.SMTPAppender
log4j.appender.MAIL.BufferSize=1
log4j.appender.MAIL.SMTPHost=smtp.example.com
log4j.appender.MAIL.From=application@example.com
log4j.appender.MAIL.To=developer@example.com
log4j.appender.MAIL.Subject=Exception in Application
log4j.appender.MAIL.layout=org.apache.log4j.PatternLayout
log4j.appender.MAIL.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss,SSS} %5r %-5p [%t] %c{2} - %m%n 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:55:04.670

一种选择是为单独的类别创建单独的文件，然后实现`Appender`发送邮件的方法。您可以查看`DailyRollingFileAppender`它的作用，并可能将其扩展为通过邮件发送文件。

# ios - iOS 上的 CorePlot - 在多个视图控制器中显示相同的图形

> ID：16052502
> 
> 赞同：1
> 
> 时间：2013-04-17T05:49:17.157
> 
> 标签：ios, uiviewcontroller, core-plot

我在 iOS 应用程序中使用 CorePlot 来绘制散点图。首先，我在带有其他一些组件的视图中显示图形，但我还想让用户进入全屏模式以查看更多图形和平移/缩放。

当他们在全屏和非全屏模式之间切换时，我不想重绘图表，因为如果我可以重用视图，这似乎是浪费时间。

在以非全屏显示图形，然后以全屏显示图形方面，我的工作正常，但是当我退出全屏模式时，我仍然希望用户在正常视图中看到图形，但是图表视图已经消失了。

这是我最初在第一个视图（非全屏）中设置图形视图的地方

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"non full screen graph view did load");

    _graph = [[CPTXYGraph alloc] initWithFrame:CGRectZero];
    CPTTheme *theme = [CPTTheme themeNamed:kCPTSlateTheme];
    [_graph applyTheme:theme];
    CPTGraphHostingView *hostingView = (CPTGraphHostingView *)self.view;
    hostingView.collapsesLayers = NO; 
    hostingView.hostedGraph     = _graph;
    //add plots etc. to graph - not shown 
} 
```

这工作得很好并绘制了我的图表。当我进入全屏模式时，这会显示全屏视图控制器：

```
-(void) goToFullScreen{
    NSLog(@"full screen");
    [[UIApplication sharedApplication] setStatusBarHidden:YES];
    [_rootNavController presentViewController:fullScreenVc animated:NO completion:nil];

    CPTGraphHostingView *hostingView = (CPTGraphHostingView *)fullScreenVc.graphView;
    hostingView.collapsesLayers = NO;
    hostingView.hostedGraph     = _graph;
    _graph.defaultPlotSpace.allowsUserInteraction = YES;
} 
```

这也可以正常工作，用户可以在图形周围平移。

这就是问题所在 - 我正在关闭全屏视图控制器，并且不知何故也丢失了图形视图 - 当我回到原始视图控制器时，所有其他组件都在显示，但图形所在的视图应该是空的。

```
-(void) exitFullScreen{
    NSLog(@"leaving full screen");
    _graph.defaultPlotSpace.allowsUserInteraction = NO;
    [_rootNavController dismissViewControllerAnimated:NO completion:nil];
} 
```

任何想法我做错了什么，以至于我失去了图表视图？我已经检查过，在`exitFullScreen:`_graph 的末尾不为空，它仍然包含我所有的情节。

谢谢，莎拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:29:31.257

`hostingView.hostedGraph = _graph;`在关闭全屏控制器之前，将图表移回原始托管视图 ( )。作为核心动画层，图一次只能存在于一个层层次结构中。

# c# - 减去表格的一半是什么意思？

> ID：16052516
> 
> 赞同：-1
> 
> 时间：2013-04-17T05:50:00.990
> 
> 标签：c#

我的新表单中有这个构造函数：

```
public MagnifierForm(Point MousePosition)
        {
            _doMove = true;
            FormBorderStyle = FormBorderStyle.None;
            ShowInTaskbar = false;
            TopMost = true;
            Width = 150;
            Height = 150;
            GraphicsPath gp = new GraphicsPath();
            gp.AddEllipse(ClientRectangle);
            Region = new Region(gp);
            mTimer = new Timer();
            mTimer.Enabled = true;
            mTimer.Interval = 20;
            mTimer.Tick += new EventHandler(HandleTimer);
            mScreenImage = new Bitmap(Screen.PrimaryScreen.Bounds.Width,
                                     Screen.PrimaryScreen.Bounds.Height);

            //maybe subtract half of the forms width/height from the points (offset them)
            mStartPoint = MousePosition;
            mTargetPoint = MousePosition;
            speed = 0.35F;
        } 
```

在构造函数的底部，我添加了以下代码：

```
mStartPoint = MousePosition;
mTargetPoint = MousePosition; 
```

在 Form1 我有这个代码：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
        {
            if (keyData == (Keys.Control | Keys.M))
            {
                if (mf == null)
                {
                    mf = new Magnifier20070401.MagnifierForm(System.Windows.Forms.Cursor.Position);
                    mf.StartPosition = FormStartPosition.Manual;
                    mf.Location = Control.MousePosition;
                    mf.Show();

                    this.Select();
                }
                else if (mf.IsDisposed)
                {
                    mf = new Magnifier20070401.MagnifierForm(System.Windows.Forms.Cursor.Position);
                    mf.StartPosition = FormStartPosition.Manual;
                    mf.Location = Control.MousePosition;
                    mf.Show();
                }
                else
                {
                    mf.Close();
                    mf = null;
                }
            }
            return base.ProcessCmdKey(ref msg, keyData);
        } 
```

一切正常。这个 mStartPoint 设置表单的位置/位置也很好用。

但是这句话是什么意思？//也许从点中减去一半的表格宽度/高度（偏移它们）

句子与以下内容有关：mStartPoint 和 mTargetPoint

如果我想使用这句话，有人可以给我看一个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:35:21.703

我假设这个线程最初是[在这里](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/3642e79b-066b-4e2f-bd28-4e8c1cb021ed)。

继上一行之后：

```
mScreenImage = new Bitmap(Screen.PrimaryScreen.Bounds.Width,
                                     Screen.PrimaryScreen.Bounds.Height); 
```

我认为作者是说您应该通过将表单的宽度和高度除以其他来计算要显示的部分，从而计算要在开始时显示的捕获表单的部分。如果您的代码是正确的，我假设您正在某个地方计算需要显示的表格部分以及不同放大倍数的不同尺寸。

# php - 用于图形显示的数据收集 (SQL)

> ID：16052517
> 
> 赞同：0
> 
> 时间：2013-04-17T05:50:03.287
> 
> 标签：php, sql

从数据库加载数据以生成报告的后高效方法是什么。

例如，如果我想要一张关于每天有多少人注册的图表。

我需要的信息是

```
Day 1 - > Amount users
Day 2 - > Amount users
Day 3 - > Amount users
Day 4 - > Amount users
Day 5 - > Amount users
Day 6 - > Amount users 
```

但如果它是 30 天，在我眼中将是 30 个 SQL 查询，我认为这不是很有效。

进行 MySQL 查询，然后继续获取结果。

有没有办法可以更好、更有效地解决这个问题？感谢您的任何建议。

表结构很简单：

```
id
username
password
salt
create_date
edit_date 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:05:59.387

这应该工作：

```
select count(distinct id) as amount
from users
group by year(create_date),month(create_date),day(create_date) 
```

# php - 在 PHP 5.3 中使用 PDO（输入和输出数据）的最安全方法是什么

> ID：16052518
> 
> 赞同：0
> 
> 时间：2013-04-17T05:50:10.607
> 
> 标签：php, sql, database, pdo

所以最近我听说 PDO 实际上并不安全，除非你确切地知道你在做什么，或者在我的情况下，复制/粘贴。不仅如此，我不知道你也不能相信自己的数据库受到攻击。好吧，问我在问什么感觉不太对，但我需要确保我是在为时已晚之前安全。不仅如此，我正在制作一个游戏网站，用户可以在其中保存他们的游戏，当你丢失保存的游戏数据时，我们很多人都知道这真的很糟糕。这是我的 PDO 连接当前的样子：

```
$DataB = new PDO( 'mysql:dbname = dbname; host = host.host.host; charset = utf8', 'username', 'password' );
$DataB -> setAttribute( PDO::ATTR_EMULATE_PREPARES, false );
$DataB -> setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

老实说，我所知道的是它是 PDO，并且有效。如果我不更改它，使用它是否非常安全？另外，当我插入数据时呢？嗯，像这样：

```
$a = $DataB -> prepare( "INSERT INTO `names` (`first`,`last`) VALUES (?,?)" );
$a -> execute( array( $FirstName, $LastName ) ); 
```

现在说实话，我不太确定我是否正确地写了那个，但这只是因为我在我制作的个人功能中拥有它，而且我需要一段时间才能解码它（下面也一样）。现在更新，我一直在使用这个：

```
$DataB -> prepare( "UPDATE `names` SET :fn WHERE id = :a" ) -> execute( array( ':a' => $IDnumber, ':fn' => $NewFname ) ); 
```

这是一样的，但它在一条线上工作。我不确定这是否重要，但我不是天才。但如果可能，我总是更喜欢较短的代码。现在我选择一个：

```
$a = $DataB -> prepare( "SELECT * FROM `names` WHERE `password` = :pw AND `email` = :e " );
$a -> execute( array( ':pw' => $_COOKIE['password'], ':e' => $_COOKIE['email'] ) );
while ( $b = $a -> fetch( PDO::FETCH_ASSOC ) ) { $Fname = $b['first'] }
echo $Fname;//<-filtered html in real life 
```

这让我想知道我拥有的 PDO 是否缺少任何过滤器，因为我听说我也不能信任自己的数据库。现在，这几乎是我的数据库用户的东西，没有任何额外的缺失（嗯，没有什么重要的缺失）。[是的，我在这个网站上](https://stackoverflow.com/questions/134099/are-pdo-prepared-statements-sufficient-to-prevent-sql-injection/12202218#12202218)读过这篇文章，有点说在 PHP 5.3.6 之前你无法阻止某种攻击，但我的网站只有 PHP 5.3.0。或者，这就是我刚才问的一个活生生的人所说的。但是，我仍然不确定我如何使用我的数据库是否是正确的使用方法。因为当我插入、更新和选择/其他用户制作的数据时，谁知道它是什么样子的。

长话短说，我需要确保它在 PHP 5.3.0 中有效。并且不会用随机用户制作的数据搞砸任何重要的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:53:50.223

> 除非您确切知道自己在做什么，否则 PDO 实际上并不安全，

这是正确的。[但是，不仅适用于 PDO](http://catb.org/jargon/html/koans.html#id3141171)。

> 当您丢失保存游戏数据时，我们很多人都知道这真的很糟糕。

备份它。

> 这是我的 PDO 连接当前的样子：

[这是它的样子](https://stackoverflow.com/tags/pdo/info)

> 如果我不更改它，使用它是否非常安全？

是的。在安全方面 - 是的。不过，您可以保留 ATTR_EMULATE 的东西。无论哪种方式都没有太大关系。

> 另外，当我插入数据时呢？

**只要您可以通过占位符将数据添加到查询中，就绝对安全。**
麻烦从不能使用占位符的地方开始。以字段名称为例。在上面的链接中，您可以找到解决方案。

> $DataB -> 准备（“更新`names`集：fn WHERE id = :a”）

此查询包含 SQL 语法错误。

> 如果可能，我总是更喜欢较短的代码。

你有它其实*很长*。“短”并不意味着“可读”。可读并不意味着“在一行中包含尽可能多的运算符”。
你让你的代码难以阅读。

为了使其可读，垂直书写，而不是水平书写。

为了使其*真正*简短，请创建一个要像这样使用的*辅助函数：*

```
$sql   = "SELECT * FROM `names` WHERE `password` = ? AND `email` = ?";
$Fname = $DB->getOne($sql, $_COOKIE['password'], $_COOKIE['email']); 
```

看 -*它既*短又易读。不是吗？

> 而 ( $b = $a -> fetch( PDO::FETCH_ASSOC ) ) { $Fname = $b['first'] }

手册是你的朋友

```
$Fname = $a->fetchColumn(); 
```

它必须是。或者至少很快就能做到。

> 因为我听说我也不能相信我自己的数据库。

**只要您可以通过占位符将数据添加到查询中，无论其来源如何，它都是绝对安全的。**意味着您根本不必信任或不信任或考虑数据源或安全性。只要遵守规则。

> 是的，我在这个网站上读过这篇文章，有点说在 PHP 5.3.6 之前你无法阻止某种攻击

实际上，上面提到的这个 ATTR_EMULATE 东西完美地防止了这个边缘漏洞。

> 因为当我插入、更新和选择/其他用户制作的数据时，谁知道它是什么样子的。

尽可能使用占位符。你不能 - 最好先在这里问。

还有其他漏洞需要考虑——比如 XSS、CSRF、文件注入等等。

# iphone - 如何将 UISplitViewController 添加为子视图？

> ID：16052520
> 
> 赞同：1
> 
> 时间：2013-04-17T05:50:13.473
> 
> 标签：iphone, ios, ipad

当我单击其中的按钮时，我试图将 UISplitViewController 作为子视图添加到我的 ViewController 中。它不能正常工作。

这是正确的做法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:09:47.650

根据评论讨论回答...

您可以将根视图设置为您的另一个视图控制器，然后在完成后将根视图设置为拆分视图控制器。否则你可以玩多个 UIWindows。两者都可能很麻烦，但这是我找到的最好的方法。

一些伪代码。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[CWDLoginViewController alloc] initWithNibName:@"CWDLoginViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

现在我可能会为登录视图控制器创建一个委托或使用通知，告诉您的应用委托它需要更改`self.window.rootViewController`为您的`UISplitViewController`

```
- (void)loginDidFinish {
    CWDSplitViewController *splitViewController = [[CWDSplitViewController alloc] initWithNibName:@"CWDSplitViewController" bundle:nil];
    self.window.rootViewController = splitViewController;
} 
```

如果您使用的是故事板，则可以使用

`[[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil] instantiateViewControllerWithIdentifier:@"MyIdentifier"];`

替代

`[[CWDLoginViewController alloc] initWithNibName:@"CWDLoginViewController" bundle:nil];`

# cocos2d-x - Cocos2d-X 为什么在 addChild() 之前调用 retain()

> ID：16052521
> 
> 赞同：1
> 
> 时间：2013-04-17T05:50:17.980
> 
> 标签：cocos2d-x, retain, addchild

谁能帮我找出为什么我们需要在addChild（）之前调用retain（），我只是想如果我们调用addChild，池将管理我们添加的CCNode，那么为什么我们需要保留它并释放它我们自己？

```
bool GameOverScene::init()
{

    if( CCScene::init() )
    {
        this->_layer = GameOverLayer::create();
        this->_layer->retain();
        this->addChild(_layer);

        return true;
    }
    else
    {
        return false;
    }
}

GameOverScene::~GameOverScene()
{

    if (_layer)
    {
        _layer->release();
        _layer = NULL;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:57:06.157

我不熟悉Cocos2D-X中的内存管理，它是用C++编写的。但是，如果它类似于 Cocoa 中的引用计数内存管理，那么每次设置实例变量时，都应该释放之前的值并保留新的值。

当然，在这种情况下，我们碰巧知道，通过将它作为一个孩子添加到我们自己，它也将保留在那里。但是，它会依赖其他东西来保留它，从而使您的代码变得脆弱。所以每次创建实例变量时，都必须考虑它是否可能被其他东西保留，并且在使用该变量的任何地方都必须记住这个决定。最好始终始终保留实例变量。多次保留它永远不会受到伤害。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:05:16.167

感谢您的回复，但我遇到了另一个问题：

```
void TextureCacheTestScene::runThisTest()
{

    CCLayer* pLayer = new TextureCacheTest(); // not add the reference for pLayer
    addChild(pLayer); // add 1

    CCDirector::sharedDirector()->replaceScene(this);
    pLayer->release(); // delete 1
} 
```

为什么我们需要在 replaceScene() 之后调用 release()？我只是发现 replaceScene 添加了场景而不是图层的引用，所以我对发生的事情感到困惑：

1.  addChild(pLayer) // 添加 pLayer 的引用；
2.  relplaceScene() // 为场景添加引用；（不要为 pLayer 添加引用）
3.  pLayer->release() // 删除 pLayer 的引用；那么为什么player没有被回收呢？我不认为如果场景是活着的，那么pLayer就不能被回收，我相信参考账户不会在意。

# excel - 如何从今天的日期中减去 90、180 天，其中包括 excel 之间的所有条目？

> ID：16052525
> 
> 赞同：0
> 
> 时间：2013-04-17T05:50:24.927
> 
> 标签：excel

我正在尝试为日志创建自己的电子表格。我需要显示 90 天、182 天和 365 天的新近度。我希望它报告我在某台机器上累积了多少小时，在这种情况下是一架直升机。我已经有一个用于输入数据的选项卡和一个第二个选项卡，其中包含按飞机类型、着陆次数和类型、飞行条件（白天、夜间、夜视、云中、模拟器等）细分的所有条目.) 大约有 20 列。我正在寻找一个公式或公式的一部分，它将仅报告该期间内的项目。提前感谢您提供的任何信息。

我过去曾多次研究过这个问题，但仍然没有找到我需要的帮助。如果我重复了这个问题，我深表歉意。肖恩

这个问题可能适用于任何试图确定趋势或需要显示设备使用的新近度以预测何时进行大修的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:53:33.450

不是 100% 清楚你的要求，所以给你几个步骤可能会让你到达那里，如果不是，我需要更清楚你需要什么。

假设您的数据表有一个日期列，您可以执行以下操作：

```
=SUMIFS('Data'!$B:$B,'Data'!$A:$A,">"&now()-90,'Data'!$A:$A,"<"&now()) 
```

您的数据在名为“数据”的工作表中，日期在 A 列中，您要在 B 列中求和的数据。正如您可能知道的 -90 是今天日期的天数偏移量，因此上面将显示总计过去 90 天，按以下方式更改将分别为您提供过去 180 天、365 天和 30 到 90 天前（显示范围......）。

```
=SUMIFS('Data'!$B:$B,'Data'!$A:$A,">"&now()-180,'Data'!$A:$A,"<"&now())
=SUMIFS('Data'!$B:$B,'Data'!$A:$A,">"&now()-365,'Data'!$A:$A,"<"&now())
=SUMIFS('Data'!$B:$B,'Data'!$A:$A,">"&now()-60,'Data'!$A:$A,"<"&now()-30) 
```

如果您希望它与某个日期相关而不是使用 now() 您可以将您想要的日期放在您的摘要所在的工作表的单元格 A1 中并使用：

```
=SUMIFS('Data'!$B:$B,'Data'!$A:$A,">"&$A$1-90,'Data'!$A:$A,"<"&$A$1) 
```

再次阅读你的问题，你是说你想用飞机类型等来分解它吗？在这种情况下，您需要汇总表中的表格，假设在 A 列中您有飞机类型，在您的数据选项卡中，您在 A 列中有日期，在 B 列中有小时（或您要求和的任何内容）和类型C 列中的飞机数量。在摘要的单元格 B1 中：

```
=SUMIFS('Data'!$B:$B,'Data'!$A:$A,">"&now()-90,'Data'!$A:$A,"<"&now(),'Data'!$C:$C,$A2) 
```

然后，您可以将此公式复制下来，它将汇总相关行。如果在此期间没有发生某架飞机，您将得到 0，如果您想要一个仅列出您记录的小时数的列表，您可能需要使用数据透视表，这是一个全新的讨论（而不是不幸的是，我的强者之一）。

希望这可以解决它，如果不是，我需要查看电子表格。

# ios - 从 iOS 中的服务获取数据时，如何为指示器设置动画？

> ID：16052527
> 
> 赞同：0
> 
> 时间：2013-04-17T05:50:38.350
> 
> 标签：ios, json, uiactivityindicatorview

我的要求是当从 JSON 中检索数据时，我需要显示活动指示器，但数据检索仅以一种方法执行。这意味着例如，当我单击按钮时，它会从 JSON 中检索数据并在表视图中显示该表视图存在于另一个视图控制器中。这里我的情况是当用户单击按钮时我需要检索数据并导航到下一个视图。当数据检索时我需要显示活动指示器。

```
-(void)searchBtnActn {

    [self.webViewActivityIndicator setHidden:NO];

    [self.view addSubview:webViewActivityIndicator];

    [self.view bringSubviewToFront:webViewActivityIndicator];

    [webViewActivityIndicator startAnimating];

    if ([textField.text intValue] > 0)
    {
        AppDelegate *sharedDelegate = [[UIApplication sharedApplication]delegate];
        sharedDelegate.textFldData = textField.text;

        DealerLocationMapViewController *dealerLocationObj = [[DealerLocationMapViewController alloc]initWithNibName:@"DealerLocationMapViewController" bundle:nil];

        dispatch_queue_t queue = dispatch_get_global_queue(
                                                       DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
        dispatch_async(queue, ^{
             [dealerLocationObj searchBtnmethod:textField.text];

              [webViewActivityIndicator performSelectorOnMainThread:@selector(stopAnimating) withObject:nil waitUntilDone:YES];
    });

        [self.navigationController pushViewController:dealerLocationObj animated:YES];
    [dealerLocationObj release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:53:52.060

基本上，您想`ActivityIndicator`在两个班级之间共享您的电话。

这个特性已经有很好的项目了。您应该尝试它们而不是重新发明它。它们很好，可以在许多应用程序中使用（AppStore 批准的应用程序）。

`MBProgressHUD`&`SVProgressHUD`是个好人。

示例[`SVProgressHUD`](https://github.com/samvermette/SVProgressHUD)：

1.  在您的项目中添加`SVProgressHUD.h`& 。`SVProgressHUD.m`
2.  然后当你想显示它时，打电话`[SVProgressHUD showWithStatus:@"Updating..." maskType:2];`（在你的情况下，你在正确的地方显示它）
3.  要关闭它，请使用`[SVProgressHUD dismiss];` （在您的情况下，可能是下一个视图控制器的`viewDidAppear`）

你完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:14:36.573

我将在这里做一些假设，因为您的方法名称对我来说不是很清楚。

看着：

```
dispatch_async(queue, ^{
    [dealerLocationObj searchBtnmethod:textField.text];

    [webViewActivityIndicator performSelectorOnMainThread:@selector(stopAnimating) withObject:nil waitUntilDone:YES];
}); 
```

似乎这`searchBtnmethod:`很可能是进行 Web 服务调用的方法，并且您希望它异步运行，这就是您将它放在一个`dispatch_async`块中的原因。

如果是这种情况，你有一些事情不正常。

如果它是对 Web 服务的同步调用，因为您不想阻塞主线程，那么您对这个方法使用异步块是正确的。但问题是你马上打电话

```
[self.navigationController pushViewController:dealerLocationObj animated:YES]; 
```

在分派块之后，这意味着您的视图在您的 Web 服务调用完成之前被推送，因此您在 Web 服务调用期间没有看到活动指示器动画的原因。

重组你的代码看起来像这样，如果我的假设是正确的......

```
dispatch_async(queue, ^{
    [dealerLocationObj searchBtnmethod:textField.text];

    dispatch_async(dispatch_get_main_queue(), ^{
        [webViewActivityIndicator stopAnimating];
        [self.navigationController pushViewController:dealerLocationObj animated:YES];
    });
}); 
```

这将导致在主队列上调度一个块，该队列停止活动指示器并`dealerLocationObj`在完成后推送视图控制器`searchBtnmethod:`。

# c# - 变量的内存问题

> ID：16052529
> 
> 赞同：0
> 
> 时间：2013-04-17T05:50:39.663
> 
> 标签：c#, memory-management

我已经阅读了很多关于内存管理的内容，但目前仍有一些内容我无法掌握。这可能看起来很尴尬，但下面的代码是否有

1.  性能问题
2.  内存浪费

此函数“Bitmap b=Iprocessing.Colour_style(Bitmap a)”获取灰度图像 a 并为其赋予颜色并返回彩色图像 b

我一直的想法是，由于`new`没有使用关键字，因此`images[1]`处理后的变量将替换旧内容，并且不会创建新内存。

请赐教

```
 for(int i=0; i<images.Count;i++)   {   
    images[i] = Iprocessing.Colour_style((Bitmap)images[i]);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:34:30.840

这里的*变量*是`i`and `images`（即使`images`没有看到声明我也无法确定——它可能是一个字段）。`images`这里只是对（看起来像）a 的引用`List<Image>`- 所以整个 of`images`是 4 或 8 个字节。列表本身会占用更多空间；有对象本身，加上支持数组，加上一些计数器。交换列表中的项目，就像交换数组中的元素一样，不涉及在列表/数组中分配任何额外的空间。

*可能*（并且几乎肯定*会*）导致此处分配的一件事是`IProcessing.Color_style`. *听起来*这将基于旧图像创建新图像（而不是就地更改旧图像）。此外，*看起来*很像您没有处理旧图像 - 因此，如果这是您使用该图像的*唯一*地方，您可能会给自己带来一些问题：图像`IDisposable`已链接到 GDI+ 句柄；如果您不处理它们，您可能会遇到与*内存*`OutOfMemoryException`无关的问题*，但实际上是 GDI+ 句柄。特别是如果你有很多空闲内存，那么垃圾收集就不会经常发生。当然，这也有点复杂，因为如果您*在*其他地方（在控件等上）使用该图像，那么您***现在不想***处理它！*

 *一行不需要`new`涉及分配（分配可以隐藏在方法调用、运算符、属性后面）；同样，并非涉及的每一行都`new`需要分配（值类型在现有位置的顶部初始化）。*

# javascript - 如何根据 jquery-ui-datepicker 中的用户选择禁用或启用日期？

> ID：16052530
> 
> 赞同：0
> 
> 时间：2013-04-17T05:50:43.117
> 
> 标签：javascript, jquery-ui, jquery, jquery-plugins

我有一些用户个人资料页面，其中 url 中有用户名（唯一键）。例如-> www.example.com/abhiram_giri

我有一个日期选择器输入字段。我希望根据用户选择启用日期。例如，如果一个用户希望每个星期五都启用，而星期五发生的特定日期将禁用。我希望启用日期的总数将根据用户当天的选择。意味着用户可能只希望从当天开始看到 10 个星期五。每个用户都有数据库，因此他们可以选择存储在数据库中的日期。我知道如何禁用或启用日期，但我不能为不同的用户有不同的选择。请帮助我。

用户应该提出他们的要求，即当用户名出现在 url 上时，只有

一位用户只希望启用从当前日期到未来的 10 天，即星期五，而不是日期 26-04-2013 和 10-05-2013。另一个用户可能希望从当前日期开始启用 15 天，即每月的第 2 个星期一或每月的第 6 天

我在这里使用了 jquery 文件

code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css

code.jquery.com/ui/1.10.2/jquery-ui.js

code.jquery.com/jquery-1.9.1.js

为了启用和禁用目的，我关注了这个网站[点击这里](http://articles.tutorboy.com/2010/09/03/jquery-ui-datepicker-disable-specified-dates/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:40:22.527

我会尝试这些步骤：

1.  从数据库中读取应该启用/禁用的日期
2.  将其写入 JS 对象（在 js-script 块内）：

    echo 'var disabledDays = ["9-21-2010", "9-24-2010"];';

或者，如果您在数组中有日期：

```
echo 'var disabledDays = '.json_encode($disabledDays).';'; 
```

之后你可以调用 JS 函数

```
disableAllTheseDays(date); 
```

# meteor - 创建一个集合并在浏览器控制台中获取它

> ID：16052532
> 
> 赞同：3
> 
> 时间：2013-04-17T05:50:47.633
> 
> 标签：meteor

我创建了简单的应用程序：

> $meteor 创建 LendLib

并在 LendLib.js 的顶部添加了一个集合：

```
var lists = new Meteor.Collection("Lists");

if (Meteor.isClient) { 
```

现在我启动 Chrome 浏览器并打开控制台：

```
> lists 
ReferenceError: lists is not defined
> some = new Meteor.Collection("some"); 
Meteor.Collection {_makeNewID: function, _transform: null, _manager: Meteor._LivedataConnection, _collection: LocalCollection, _name: "some"…} 
```

为什么我无法获取我的收藏列表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T06:19:47.020

我发现他们在 0.6.0 中对其进行了更新，以允许其作用于窗口对象，因此只需删除“var”部分，因此它只是“列表”而不是“变量列表”。为我工作。

# reporting-services - 无法在 GAC 中获取 ReportViewer dll

> ID：16052533
> 
> 赞同：1
> 
> 时间：2013-04-17T05:50:54.320
> 
> 标签：reporting-services, reportviewer, report-viewer2010

我正在尝试将 ReportViewer dll 加载到 GAC 中。我从 Microsoft 的下载网站下载了 ReportViewer.exe，将其解锁并以管理员身份运行。根据安装设置程序安装包成功。但是，这些 dll 在 GAC 以及我的计算机硬盘中的任何位置都不可用。

这是 ReportViewer 信息站点的链接（[在此处输入链接描述](http://msdn.microsoft.com/en-us/library/ms251723%28v=vs.100%29.aspx)）
这是到 ReportViewer.exe 下载站点的链接（[在此处输入链接描述](http://www.microsoft.com/en-us/download/details.aspx?id=6442)）。

如何使用 Visual Studio 2010 在运行 Windows 7 的电脑上安装这些 dll。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:24:49.837

我的 dll 默认安装到：c:\Program Files (x86)\Microsoft Visual Studio 10.0\ReportViewer On 64bit Windows 7

你可以试试看那里。如果它们在那里，您可以手动将它们添加到 GAC。试试看[这里](http://msdn.microsoft.com/en-us/library/dkkx7f79.aspx)

# user-interface - 将 GUI 添加到 VBScript

> ID：16052534
> 
> 赞同：6
> 
> 时间：2013-04-17T05:50:54.523
> 
> 标签：user-interface, vbscript

我目前正在处理 VBS 脚本，但我需要用户与脚本进行交互。基本上我需要两个按钮和 4 个复选框（复选框并不重要）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T07:23:12.357

VBScript 有对话框，只有不多且没有复选框，您需要一个 COM 对象来执行此操作（并且有）。我确定你知道 Messagebox，这里有一个鲜为人知的 Popup 示例

```
Dim WshShell, BtnCode
Set WshShell = WScript.CreateObject("WScript.Shell")

BtnCode = WshShell.Popup("Do you feel alright?", 7, "Answer This Question:", 4 + 32)

Select Case BtnCode
   case 6      WScript.Echo "Glad to hear you feel alright."
   case 7      WScript.Echo "Hope you're feeling better soon."
   case -1     WScript.Echo "Is there anybody out there?"
End Select 
```

但是，在 vbscript 中拥有更多对话框的最佳方法是使用 HTA。这里有一个例子

```
<HTML><HEAD>
   <HTA:APPLICATION
   ID = "oApp"
   APPLICATIONNAME = "Example"
   BORDER = "thick"
   CAPTION = "yes"
   ICON = "app.ico"
   SHOWINTASKBAR = "yes"
   SINGLEINSTANCE = "yes"
   SYSMENU = "yes"
   WINDOWSTATE = "normal"
   SCROLL = "yes"
   SCROLLFLAT = "yes"
   VERSION = "1.0"
   INNERBORDER = "yes"
   SELECTION = "no"
   MAXIMIZEBUTTON = "yes"
   MINIMIZEBUTTON = "yes"
   NAVIGABLE = "yes"
   CONTEXTMENU = "yes"
   BORDERSTYLE = "normal"
   >

   <SCRIPT language="vbscript">
   sub SimpleExeample()
     document.body.innerHTML = "<form name=myform><input type=checkbox name=chk1>Check me<br><br><button onclick='alert(myform.chk1.checked)'>Show if checked</button></form>"
   end sub
   </SCRIPT>

</HEAD>
<BODY onLoad="SimpleExeample()">
</BODY>
</HTML> 
```

有一点我同意 Cody 的观点，如果您开始编程，请选择另一种语言，vbscript 几乎已死。看看 Ruby，开始很容易学习，而且很有趣。这是一个使用鞋子作为 GUI 的 ruby​​ 脚本示例

```
require 'green_shoes'
Shoes.app{
  button("Click me!"){alert("You clicked me.")}
} 
```

编辑：由于我的 Ruby 替代方案提出了一些问题，因此这里采用更传统的方式更接近 Vbscript 对相同样本的使用。上面的示例更多地用于功能链式编程方式。

```
require 'green_shoes'
Shoes.app do
  button("Click me!") do
    alert("You clicked me.")
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-13T05:33:43.997

我发现的最佳方法是使用“WScript.Shell Run”从 VBS 打开 HTA 文件，并使用 XML 文件与 VBS 进行通信。

示例（dialog.vbs）

```
Set fso = CreateObject("Scripting.FileSystemObject") 
Set oFile = fso.GetFile(Wscript.ScriptFullName) 
sFolder = oFile.ParentFolder 
sHtaFilePath = sFolder & "\dialog.hta"
Dim oShell: Set oShell = CreateObject("WScript.Shell")
oShell.Run sHtaFilePath, 1, True

'Load return data from XML File
If fso.FileExists(sHtaFilePath & ".xml") Then
    Set oXml = CreateObject("Microsoft.XMLDOM")
    oXML.async = False
    oXML.load sHtaFilePath & ".xml"

    MsgBox "Value 1: " & oXML.SelectSingleNode("/root/txt1").text
    MsgBox "Value 2: " & oXML.SelectSingleNode("/root/txt2").text

    fso.DeleteFile sHtaFilePath & ".xml"
End If 
```

示例 HTA (dialog.hta)

```
<html>
  <title>Test</title>
  <head>
  <HTA:APPLICATION 
  ID=oHTA 
  SINGLEINSTANCE="yes"
  SCROLL="no"
  />
</head>

<script language="vbscript">
  Window.ResizeTo 300, 200
  Set fso = CreateObject("Scripting.FileSystemObject") 

  Sub Send()
    Dim sFilePath: sFilePath = Replace(location.href,"file:///","")
    sFilePath = Replace(sFilePath,"/","\")
    sFilePath = Replace(sFilePath," %20"," ")

    'Save return date to XML File
    Set oXml = CreateObject("Microsoft.XMLDOM")
    Set oRoot = oXml.createElement("root")
    oXml.appendChild oRoot
    AddXmlVal oXml, oRoot, "txt1", txt1.value
    AddXmlVal oXml, oRoot, "txt2", txt2.value
    oXml.Save sFilePath & ".xml"

    self.Close()
  End Sub

  Sub AddXmlVal(oXml, oRoot, sName, sVal)
    Set oNode = oXml.createElement(sName)
    oNode.Text = sVal
    oRoot.appendChild oNode
  End Sub

</script>

<body>
  <div>
    Value 1 
    <input id="txt1" style="width: 100px;">
  </div>

  <div>
    Value 2 
    <select id=txt2 style="width: 100px;">
      <option value="A">A</option>
      <option value="B">B</option>
      <option value="C">D</option>
    </select>
  </div>

<p align=center>
  <input type="button" value="Send" onclick="Send()">
  <input type="button" value="close" onclick="self.Close()">
</p>

</body>
</html> 
```

更好的方法是由 VBS 文件创建 HTA 文件，然后将其删除。这样，HTA 就不必与 VBS 一起分发。

```
Set fso = CreateObject("Scripting.FileSystemObject") 

sHtml = "<div>Value 1 " & _
    "<input id='txt1' style='width: 100px'>" & _
  "</div>" & _
  "<div>Value 2 " & _
    "<select id='txt2' style='width: 100px'>" & _
      "<option value='A'>A</option>" & _
      "<option value='B'>B</option>" & _
      "<option value='C'>D</option>" & _
    "</select>" & _
  "</div>" & _
  "<p align=center>" & _
    "<input type='button' value='Send' onclick='Send()'> " & _
    "<input type='button' value='Close' onclick='self.Close()'>" & _
  "</p>"

  Set oRet = OpenDialog(sHtml, "txt1,txt2", 300, 200, "Dialog 1")
  MsgBox "Value 1: " & oRet("txt1") & ", Value 2: " & oRet("txt2")

'==================================
Function OpenDialog(sHtml, sFields,iWidth,iHeight, sTitle)
  sHtaFilePath = Wscript.ScriptFullName & ".hta"

  CreateHtaFile sHtaFilePath, sHtml, sFields,iWidth,iHeight,sTitle

  Set f = fso.GetFile(sHtaFilePath)
  f.attributes = f.attributes + 2 'Hidden

  Dim oShell: Set oShell = CreateObject("WScript.Shell")

  oShell.Run """" & sHtaFilePath & """", 1, True

  If fso.FileExists(sHtaFilePath) Then
    fso.DeleteFile sHtaFilePath
  End If

  Set oRet = CreateObject("Scripting.Dictionary")

  'Load return data from XML File
  If fso.FileExists(sHtaFilePath & ".xml") Then
      Set oXml = CreateObject("Microsoft.XMLDOM")
      oXML.async = False
      oXML.load sHtaFilePath & ".xml"

      For each sField In Split(sFields,",")
        oRet.Add trim(sField), oXML.SelectSingleNode("/root/" & trim(sField)).text
      Next

      fso.DeleteFile sHtaFilePath & ".xml"
  End If

  Set OpenDialog = oRet
End Function

Sub CreateHtaFile(sHtaFilePath, sHtml, sFields, iWidth, iHeight, sTitle)
  Set f = fso.CreateTextFile(sHtaFilePath, True)
  f.WriteLine "<html><title>FL Reporting</title><head><HTA:APPLICATION ID=oHTA SINGLEINSTANCE=""yes"" SCROLL=""no""/></head>"
  f.WriteLine "<script language=""vbscript"">"
  f.WriteLine "Window.ResizeTo " & iWidth & ", " & iHeight
  f.WriteLine "Set fso = CreateObject(""Scripting.FileSystemObject"")"
  f.WriteLine ""
  f.WriteLine "Sub Send()"
  f.WriteLine " Dim sFilePath: sFilePath = Replace(location.href,""file:///"","""")"
  f.WriteLine " sFilePath = Replace(sFilePath,""/"",""\"")"
  f.WriteLine " sFilePath = Replace(sFilePath,""%20"","" "")"
  f.WriteLine " Set oXml = CreateObject(""Microsoft.XMLDOM"")"
  f.WriteLine " Set oRoot = oXml.createElement(""root"")"
  f.WriteLine " oXml.appendChild oRoot"

  For each sField In Split(sFields,",")
    f.WriteLine " AddXmlVal oXml, oRoot, """ & sField & """, GetVal(" & sField & ")"
  Next

  f.WriteLine " oXml.Save sFilePath & "".xml"""
  f.WriteLine " self.Close()"
  f.WriteLine "End Sub"
  f.WriteLine ""
  f.WriteLine "Sub AddXmlVal(oXml, oRoot, sName, sVal)"
  f.WriteLine " Set oNode = oXml.createElement(sName)"
  f.WriteLine " oNode.Text = sVal"
  f.WriteLine " oRoot.appendChild oNode"
  f.WriteLine "End Sub"
  f.WriteLine ""
  f.WriteLine "Function GetVal(o)"
  f.WriteLine " GetVal = o.value"
  f.WriteLine " If o.Type = ""checkbox"" Then"
  f.WriteLine "   If o.checked = False Then"
  f.WriteLine "     GetVal = """""
  f.WriteLine "   End If"
  f.WriteLine " End If"
  f.WriteLine "End Function"  
  f.WriteLine "</script>"
  f.WriteLine "<body>"
  f.WriteLine sHtml
  f.WriteLine "</body></html>"
  f.Close
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-20T09:08:43.177

今天，我想介绍两个你会感兴趣的项目。

*   [wsh-js-gtk - 使用](https://github.com/gnh1201/wsh-js-gtk)[GTK-server](https://www.gtk-server.org/)从 JScript/VBScript 制作您自己的 GUI
*   [welsonjs - 使用 ES6/HTML5 兼容 polyfills、](https://github.com/gnh1201/welsonjs) [module.exports](https://nodejs.org/en/knowledge/getting-started/what-is-require/) (NodeJS) 样式的模块实现构建基于 WSH/HTA 的 Windows 桌面应用程序。

# mysql - Mysql 与 Case 的问题，然后和何时

> ID：16052538
> 
> 赞同：1
> 
> 时间：2013-04-17T05:51:05.603
> 
> 标签：mysql

我正在维护一个至少有 100 行的数据库。每 10 秒进行一次 ajax 调用以更新行。我觉得每 10 秒调用 100 次更新查询是不可取的。所以我遇到了mysql案例，然后和何时将100个查询组合到一个查询并进行更新。但我遇到了代码问题。这是我的两行代码

```
update customer_details set (date,customer_name,school_name,mobile_number,customer_email,age,area,customer_requirement,extra_comments,draft_message) = 
 case `id`
when '275' then ('09-04-201','person1','','1234567890','','','','basketball','','message')
when '274' then  ( '','','','','','','area','xyz','','message')
end 
```

错误是

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(date,customer_name,school_name,mobile_number,customer_email,age,area,customer_r' at line 1 
```

我无法纠正错误。还有其他方法可以对 100 行进行单个查询调用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:52:39.620

您需要在 set 语句中设置每一列，语法为：

```
UPDATE tablename SET column1 = "value1", column2 = "value2" ....
WHERE IdDColumn = MyID 
```

在您的情况下，您将有两种选择：

```
UPDATE tablename SET Column1 =  
CASE
  WHEN id = 275 THEN Value1
  WHEN id = 274 THEN Value2
  ELSE DefaultValue 
END, Column2 =  
CASE
  WHEN id = 275 THEN Value1
  WHEN id = 274 THEN Value2
  ELSE DefaultValue  
END,
etc... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T05:54:17.177

你试过：

```
INSERT INTO customer_details (id, date,customer_name,school_name,mobile_number,customer_email,age,area,customer_requirement,extra_comments,draft_message) VALUES
(275, '09-04-201','person1','','1234567890','','','','basketball','','message'),
(274, '','','','','','','area','xyz','','message')
ON DUPLICATE KEY UPDATE 
date=VALUES(date),
customer_name=VALUES(customer_name),
school_name=VALUES(school_name),
mobile_number=VALUES(mobile_number),
customer_email=VALUES(customer_email),
age=VALUES(age),
area=VALUES(area),
customer_requirement=VALUES(customer_requirement),
extra_comments=VALUES(extra_comments),
draft_message=VALUES(draft_message); 
```

# matlab - matlab中矩阵乘法的并行代码

> ID：16052543
> 
> 赞同：1
> 
> 时间：2013-04-17T05:51:43.957
> 
> 标签：matlab, parallel-processing

我想在 Matlab 中并行运行矩阵乘法的代码。我已经为它编写了顺序代码。我已经使用“spmd”方法并行运行它。但是，并行代码的执行时间比顺序代码多。我的座右铭是减少并行运行代码的执行时间。我不想使用内置函数进行乘法运算，因为我想删除 for 循环中的依赖项并运行它。我该怎么做？？我已经尝试过闲置代码..请帮帮我..

```
a=[1,2,3,4;5,6,7,0;8,9,10,11;12,13,14,15];
b=[1,2,3,4;5,6,7,0;8,9,10,11;12,13,14,15];
warning off all;      
%Sequential code
tic
  for i=1:4
  for j=1:4
       sum=0;
       for k=1:4
           sum=sum+(a(i,k)*b(k,j));
       c(i,j)=sum;
       end;
  end;
  end;
  time1 =toc

  %parallel code
  matlabpool('open');
tic
spmd
for i=1:4
  for j=1:4
       sum=0;
       for k=1:4
           sum=sum+(a(i,k)*b(k,j));
       c(i,j)=sum;
       end;
  end;
  end;
 end;
time2 =toc 
```

我得到的输出是.. time1 用于顺序，time2 用于并行

> > 矩阵

```
time1 =

0.0041

Starting matlabpool using the 'local' profile ... connected to 2 labs.

time2 =

0.6950

>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:31:34.717

扩展评论而不是答案：

*   您的测试矩阵非常小；任何可能的执行加速都将被启动并行执行池的开销所淹没；
*   您似乎没有初始化输出矩阵`c`；众所周知，按照您的代码建议动态创建矩阵比更新先前创建的矩阵要慢得多。尝试`c = zeros(grows,ncols)`开始。
*   我相信最近版本的 Matlab 将自动多线程直接矩阵乘法，你面临着一个真正的挑战，试图编写一个你自己的函数来匹配本机方法的速度。

# javascript - 删除元素后的jQuery焦点

> ID：16052552
> 
> 赞同：0
> 
> 时间：2013-04-17T05:52:06.500
> 
> 标签：javascript, jquery, html

如果按下删除或退格键，我想删除一些内容可编辑的段落。我为此编写了以下脚本：

```
$(document).on('keyup', 'p[contenteditable="true"]', function(e) {
    if(e.which == 13) {
        e.preventDefault();
        $(this).after('<p contenteditable = "true">New Paragraph</p>');
        $(this).next('p').focus();
    } else if((e.which == 8 || e.which == 46) && $(this).text() == "") {
        e.preventDefault();
        $(this).remove();
        $(this).previous('p').focus();
    };
}); 
```

我想在删除后专注于上一段，但我不相信我能做到这一点，因为`this`不再存在。我也试过把`focus`之前的，`remove`但它似乎改变了`this`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T05:54:54.637

尝试这样的事情：

```
$(document).on('keyup', 'p[contenteditable="true"]', function(e) {
    if(e.which == 13) {
        e.preventDefault();
        $(this).after('<p contenteditable = "true">New Paragraph</p>');
        $(this).next('p').focus();
    } else if((e.which == 8 || e.which == 46) && $(this).text() == "") {
        e.preventDefault();
        var prev = $(this).prev('p');
        $(this).remove();
        prev.focus();
    };
}); 
```

另外值得注意的`.previous()`是不是jQuery方法，我相信您正在寻找的方法是[.prev()](http://api.jquery.com/prev/)

# c# - 测试 url 参数的值，然后从 c# 后面的代码中更改 SqlDataSource.SelectCommand

> ID：16052553
> 
> 赞同：3
> 
> 时间：2013-04-17T05:52:20.483
> 
> 标签：c#, asp.net, if-statement, sqldatasource, url-parameters

嗨，我有一个使用 SQLDataSource 生成的 listView，Sql 从 URL 获取 2 个参数，然后执行 Select Query。

但我想测试参数 1st 的值，然后使用 If 更改 sql SelectCommand，否则如果

问题是我的 IF 语句总是失败，即使我删除它们并在页面加载时更改查询，即使删除了 selectCommand，我也总是返回使用 SQLDataSource 生成的原始数据！

这是我的 ASPX 文件的一部分

```
 <asp:SqlDataSource ID="jobSearch" runat="server" ConnectionString="<%$ ConnectionStrings:DefaultConnection %>" SelectCommand="">
        <SelectParameters>
            <asp:QueryStringParameter Name="jobTitle" QueryStringField="jobTitle" Type="String" />
            <asp:QueryStringParameter Name="joblocation" QueryStringField="jobLocation" Type="String" />
        </SelectParameters>
    </asp:SqlDataSource> 
```

这是我的 .CS 文件

```
protected void Page_Load(object sender, EventArgs e)
    {
       // Request.QueryString["jobTitle"]

        string jobTitle = Request.QueryString["jobTitle"];
        string jobLocation = Request.QueryString["jobLocation"];

        if (!string.IsNullOrEmpty(jobTitle) && !string.IsNullOrEmpty(jobLocation))
        {
            jobSearch.SelectCommand = "SELECT [jobId], [userId], [jobTitle], [jobBody], [jobPosition], [JobType], [salaryFrom], [salaryTo], [salaryType], [location], [jobCreated], [jobEnd], [jobViews], [applications] FROM [recruiter_Jobs] WHERE FREETEXT (([jobTitle]), @jobTitle) AND FREETEXT (([location]), @location) ORDER BY [jobCreated]";
            test.Text = "1st if " + jobTitle;
        }
        else if (jobTitle == string.Empty && !string.IsNullOrEmpty(jobLocation) || string.IsNullOrWhiteSpace(jobTitle) && !string.IsNullOrEmpty(jobLocation) || string.IsNullOrEmpty(jobTitle) && !string.IsNullOrEmpty(jobLocation) || jobTitle == null && !string.IsNullOrEmpty(jobLocation))
        {

             jobSearch.SelectCommand = "SELECT [jobId], [userId], [jobTitle], [jobBody], [jobPosition], [JobType], [salaryFrom], [salaryTo], [salaryType], [location], [jobCreated], [jobEnd], [jobViews], [applications] FROM [recruiter_Jobs] WHERE FREETEXT (([location]), @location) ORDER BY [jobCreated]";

             test.Text = "1st else if " + jobTitle;
        }

        else if (string.IsNullOrEmpty(jobTitle) && string.IsNullOrEmpty(jobLocation))
        {
            jobSearch.SelectCommand = "SELECT [jobId], [userId], [jobTitle], [jobBody], [jobPosition], [JobType], [salaryFrom], [salaryTo], [salaryType], [location], [jobCreated], [jobEnd], [jobViews], [applications] FROM [recruiter_Jobs] ORDER BY [jobCreated]";

            test.Text = "last else if " + jobTitle;
        }

    } 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:00:53.833

如果 SqlDataSource 的任何参数为空，则不会触发 SqlDataSource，除非您另外指定：

```
<asp:SqlDataSource CancelSelectOnNullParameter="False" /> 
```

可能还需要为您的查询字符串参数添加一个空默认值：

```
<asp:QueryStringParameter Name="client" QueryStringField="client" 
     DefaultValue="" ConvertEmptyStringToNull="True" /> 
```

# objective-c - 比较 NSString 和 NSString 返回匹配百分比

> ID：16052562
> 
> 赞同：1
> 
> 时间：2013-04-17T05:53:13.927
> 
> 标签：objective-c, cocoa-touch, nsstring

我想要一个方法来传递两个字符串，并让它返回它们之间的百分比差异。

例子：

String1 ---------- String2 --------- 百分比

“测试” ------------ “Texf” ------------ 50%

“测试1” ---------- “测试3” ----------- 80%

“测试3” ------------ “3” --------------- 20%

“测试” ------------ “特兹” ------------ 75%

"Te3" -------------- "T" -------------- 33%

# android - 如何上传两个具有单个android应用程序的不同API级别的apk文件

> ID：16052565
> 
> 赞同：9
> 
> 时间：2013-04-17T05:53:29.383
> 
> 标签：android, google-play

我的应用程序有两个 apk 文件，一个 API 级别为 7-9，另一个为 10-17。以前我曾经切换回开发者控制台的旧设计来上传单个应用程序的两个 apk，但旧开发者控制台已于 2013 年 4 月 15 日被弃用:( 请指导我如何上传单个应用程序的多个 apk 文件.

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:32:47.110

![在此处输入图像描述](https://i.stack.imgur.com/RUwsV.png)

这是我尝试上传第二个 apk 时出现的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-22T06:59:35.100

我花了几个小时试图弄清楚这一点，你必须在**高级模式下**进行，否则它将无法工作。

# xml - Java DOM 无法识别 CDATA

> ID：16052566
> 
> 赞同：0
> 
> 时间：2013-04-17T05:53:33.073
> 
> 标签：xml, parsing, dom

我有一个带有 CDATA 的 XML。这是我试图加载到 Java DOM 中的 XML。

```
<?xml version="1.0" encoding="utf-8"?><search:Search xmlns:search="Search"><search:Response xmlns="Search"><search:Store xmlns="Search">";
<search:Result xmlns="Search">";
<search:Properties xmlns="Search">";
<email2:ConversationId xmlns:email2="Email2"><![CDATA["B3:5F:18:81:37:4B:E4:4C:97:CE:9A:5A:18:6E:DE:8D:"]]></email2:ConversationId>";
<email:Categories xmlns:email="Email"></email:Categories>
</search:Properties>
</search:Result>
</search:Store>
</search:Response>
 </search:Search> 
```

这是加载它的代码：

```
import org.w3c.dom.Attr;
import org.w3c.dom.CDATASection;
import org.w3c.dom.Document;
import org.w3c.dom.NamedNodeMap;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.w3c.dom.bootstrap.DOMImplementationRegistry;
import org.w3c.dom.ls.DOMImplementationLS;
import org.w3c.dom.ls.LSParser;
...
...
    try {
        DOMImplementationRegistry registry = DOMImplementationRegistry.newInstance();
        DOMImplementationLS impl = (DOMImplementationLS)registry.getDOMImplementation("LS");
        LSParser builder = impl.createLSParser(DOMImplementationLS.MODE_SYNCHRONOUS, null);
        DOMInputImpl input = new DOMInputImpl();
        input.setByteStream(new ByteArrayInputStream(xmlString.getBytes("utf-8")));
        xmlDoc = builder.parse(input);
        return xmlDoc;
    } catch (ClassNotFoundException | InstantiationException
            | IllegalAccessException | ClassCastException | UnsupportedEncodingException e) {
        throw new MyException(e);
    } 
```

但是，我发现解析后的文档没有 CDATA NodeType org.w3c.dom.CDATASection。相反，nodetype 以#text 的形式出现。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:33:34.513

Interesting! LSParser "converts" CDATA section nodes to text nodes (probably stated somewhere in the spec). However if you use the JAXP API (which is a lot less noisy) you'll get #cdata-section

```
 DocumentBuilderFactory f = DocumentBuilderFactory.newInstance();
    f.setNamespaceAware(true);
    DocumentBuilder builder = f.newDocumentBuilder();
    Document doc = builder.parse(...); 
```

# kinect - 使用 Kinect Speech SDK 识别专有名词

> ID：16052568
> 
> 赞同：0
> 
> 时间：2013-04-17T05:53:45.563
> 
> 标签：kinect, speech-recognition, speech-to-text, kinect-sdk

我正在开发一个使用 kinect 语音识别的应用程序。我想使用 Kinect Speech sdk 识别用户的姓名。

是否可以在运行时使用 kinect Sdk 识别所有名称（专有名词）？或者有没有可用的开源软件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:51:31.070

Kinect 不“识别语音”。它是一个麦克风阵列，除了听之外几乎没有什么作用。您需要查看[Microsoft Speech Platform](http://www.microsoft.com/en-us/download/details.aspx?id=27225)或其他语音处理器才能处理语音。阅读 Microsoft 语音平台[功能](http://msdn.microsoft.com/en-us/library/hh361572%28v=office.14%29.aspx)将帮助您了解您想要做的事情的范围。

[Kinect for Windows Developer Toolkit](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)中有多个关于如何使用语音和 Kinect 的示例，以及[Kinect For Windows Samples CodePlex](http://kinectforwindows.codeplex.com/)项目中提供的代码示例。“语音基础”示例立即出现在您应该开始的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T09:28:55.073

您可以通过 addgrammer() 方法识别添加为文本的单词或句子。那么只有 Kinect 可以识别它们。但是如果不将它们添加到 addgrammer 方法，您将无法识别非常新的单词。

# wso2 - 由于 In-Sequence 中的两个发送中介导致 try-it 代理错误

> ID：16052572
> 
> 赞同：0
> 
> 时间：2013-04-17T05:53:56.457
> 
> 标签：wso2, wso2esb

我的代码：

```
<filter xpath="get-property('statusFromClassMed')='Valid'">
                              <then>
                                 <log level="custom">
                                    <property name="InsideValidFilter" value="--------State is Valid-------"/>
                                 </log>
                                 <log level="custom">
                                    <property name="STATE" value="message is sent to queue"/>
                                 </log>
                                 <property name="OUT_ONLY" value="true"/>
                                 <property name="FORCE_SC_ACCEPTED" value="true" scope="axis2"/>
                                 ***<send>
                                    <endpoint key="jmsMBendpoint"/>
                                 </send>***
                                 <header name="To" action="remove"/>
                                 <property name="RESPONSE" value="true" scope="default" type="STRING"/>
                                 <property name="NO_ENTITY_BODY" scope="axis2" action="remove"/>
                                 <payloadFactory>
                                    <format>
                                       <ns1:PostPublicationResponse xmlns:ns1="http://www.openoandm.org/xml/ISBM/">
                                          <ns1:MessageID>$1</ns1:MessageID>
                                          <ns1:MessageContent>$2</ns1:MessageContent>
                                       </ns1:PostPublicationResponse>
                                    </format>
                                    <args>
                                       <arg expression="get-property('getMessageIDFromClassMed')"/>
                                       <arg expression="get-property('MessageContent')"/>
                                    </args>
                                 </payloadFactory>
                                 ***<send/>***
                              </then>
                              <else>
                                 <log level="custom">
                                    <property name="InsideNonValidFilter" value="--------State is InValid-------"/>
                                 </log>
                                 <header name="To" action="remove"/>
                                 <property name="RESPONSE" value="true" scope="default" type="STRING"/>
                                 <property name="NO_ENTITY_BODY" scope="axis2" action="remove"/>
                                 <payloadFactory>
                                    <format>
                                       <soapenv:Fault xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope">
                                          <soapenv:Code>
                                             <soapenv:Value>soapenv:Receiver</soapenv:Value>
                                          </soapenv:Code>
                                          <soapenv:Reason>
                                             <soapenv:Text xml:lang="en-US">Invalid Parameter</soapenv:Text>
                                          </soapenv:Reason>
                                          <soapenv:Detail/>
                                       </soapenv:Fault>
                                    </format>
                                 </payloadFactory>
                                 <send/>
                              </else>
                           </filter> 
```

我在我的 In-Sequence 中使用了一个过滤器。如果过滤器为真，那么我必须将有效负载发送到在我的端点中定义的消息代理队列，因此我使用发送调解器，之后我必须发送有效负载作为响应。但由于使用了两个发送调解器，有时我会得到试用代理。如何解决这种情况？还有一个问题？我在我的主题属性中传递了多个主题参数。但它只获得单一价值提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:19:33.263

如果要将响应发送回客户端，请在第一个发送调解器中使用“receiveSequence”选项，您将在其中收到响应。在该序列中，定义您的其他中介逻辑..

```
 <send receive="recevingSeq">
      <endpoint>
         <address uri="https://localhost:9445/services/AppService" format="soap11"/>
      </endpoint>
   </send> 
```

# wpf - 在 Windows 7 和 8 触摸设备上部署 microsoft surface 2.0 应用程序

> ID：16052574
> 
> 赞同：2
> 
> 时间：2013-04-17T05:54:04.103
> 
> 标签：wpf, pixelsense

我已经制作了一个应用程序并创建了它的安装程序，它部署在三星 Pixelsense 4.0 设备上并且运行良好。现在我想在window 7/8 触摸设备上部署相同的应用程序，如果可以，请建议我需要在我的应用程序中进行哪些修改以便安装。

问候

花粉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T16:43:45.190

如果您在 Windows 上部署使用 Surface 2.0 运行时的软件，则需要安装该中间件。 [https://www.microsoft.com/en-us/download/details.aspx?id=26716](https://www.microsoft.com/en-us/download/details.aspx?id=26716)

根据您使用的多点触控设备，您需要对软件进行更改。例如，如果您使用的是通用 Windows 7 触摸驱动程序，SurfaceWindow 类将不起作用。您需要使用常规的 Window 类。

# python - OpenERP 7 _约束

> ID：16052575
> 
> 赞同：0
> 
> 时间：2013-04-17T05:54:05.523
> 
> 标签：python, xml, openerp

```
class deduction_registration(osv.osv):
    _name = "bpl.deduction.registration"
    _description = "Deduction Registration"
    _columns = {
        'name': fields.char('Deduction Name', size=256, required=True),
    }
    _sql_constraints = [('deduction_registration_name_unique', 'unique(name)', 'Deduction name already exists')]

deduction_registration() 
```

我为我的模型创建了上面的 sql 约束。但它仍然允许不区分大小写的重复记录。

像**EPF**和**epf**允许如何为此添加约束。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:00:28.397

```
class deduction_registration(osv.osv):

    def _check_unique_insesitive(self, cr, uid, ids, context=None):
        sr_ids = self.search(cr, 1 , [], context=context)
        lst = [x.name.lower() for x in self.browse(cr, uid, sr_ids, context=context) if x.name and x.id not in ids]
        for self_obj in self.browse(cr, uid, ids, context=context):
            if self_obj.name and self_obj.name.lower() in  lst:
                return False
            return True

    _name = "bpl.deduction.registration"
    _description = "Deduction Registration"
    _columns = {
        'name': fields.char('Deduction Name', size=256, required=True),
    }
    _sql_constraints = [('deduction_registration_name_unique', 'unique(name)', 'Deduction name already exists')]
    _constraints = [(_check_unique_insesitive, 'Deduction name already exists', ['name'])]

deduction_registration() 
```

有了这段代码，我已经完成了我的工作:-)

# python - Pygame文本表面不绘制

> ID：16052580
> 
> 赞同：1
> 
> 时间：2013-04-17T05:54:26.993
> 
> 标签：python, pygame, blit

我正在尝试在玩家丢失但没有显示任何内容并且游戏立即重新启动时显示一些文本。它可以进入 else 语句，因为它能够打印东西，但它似乎并没有“blit”表面，或者它可以快速查看。

有问题的代码盯着底部，但我想我也会包含 main 函数。我不知道我是否正确，但它是否在绘制文本框后立即在文本框上绘制背景？如果是这样，我该如何补救？

```
def main():
    global FPSCLOCK, DISPLAYSURF, BASICFONT, \
           TILESIZE, floorx, floory, \
           floorCovered, tilesNeeded, OUTSIDEDECOMAPPING, \
           L_Monster, R_Monster, BGIMAGE, \
           bounceHeight, playerObj, R_Bird, \
           L_Bird, direction, birdx, \
           birdDir

    pygame.init()
    DISPLAYSURF = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT))
    FPSCLOCK = pygame.time.Clock()
    BASICFONT = pygame.font.Font('freesansbold.ttf', 32)

    pygame.display.set_caption('Alpha One')
    # Set up the background image.
    boardImage = pygame.image.load('bg.png')
    # Use smoothscale() to stretch the board image to fit the entire board:
    boardImageRect = boardImage.get_rect()
    boardImageRect.topleft = (0, 0)
    BGIMAGE = pygame.image.load('bg.png')
    # Use smoothscale() to stretch the background image to fit the entire window:
    BGIMAGE = pygame.transform.smoothscale(BGIMAGE, (WINDOWWIDTH, WINDOWHEIGHT))
#     BGIMAGE.blit(boardImage, boardImageRect)
#     #Draw the background    
#     DISPLAYSURF.blit(BGIMAGE, BGIMAGE.get_rect())
#     #Draw the Floor
#     drawFloor()

    L_Monster = pygame.image.load('ghost.png')
    R_Monster = pygame.transform.flip(L_Monster, True, False)
    R_Bird = pygame.image.load('bird.png')
    L_Bird = pygame.transform.flip(R_Bird, True, False)

#     pygame.display.flip()

    #Main Game Loop
    while True:

        runGame()

def runGame():
    invulnerableMode = False
    invulnerableStartTime = 0
    gameOverMode = False
    gameOverStartTime = 0
    winMode = False
    bounceHeight = 30
    BOUNCEHEIGHT = 30
    camerax = 0
    cameray = 0
    birdx = WINDOWWIDTH - 50
    birdDir = 'right'

    gameOverSurf = BASICFONT.render('Game Over', True, WHITE)
    gameOverRect = gameOverSurf.get_rect()
    gameOverRect.center = (WINDOWWIDTH, WINDOWHEIGHT)

    #declares the player object
    playerObj = {'surface': pygame.transform.scale(L_Monster,(STARTSIZE, STARTSIZE)),
                 'facing': LEFT,
                 'size': STARTSIZE,
                 'x': WINDOWWIDTH,
                 'y': WINDOWHEIGHT,
                 'bounce':0,
                 'health': MAXHEALTH}
    #declares the bird object
    birdsObj = {'surface': pygame.transform.scale(R_Bird,(STARTSIZE, STARTSIZE)),
                'facing': RIGHT,
                'size': STARTSIZE,
                'x': (0 - STARTSIZE*2),
                'y': STARTSIZE * 2}

    #declare the current position of keys
    moveLeft = False
    moveRight = False
    moveUp = False
    moveDown = False
    spaceDown = False
    shiftDown = False

    while True:
        #redraw the background
        DISPLAYSURF.blit(BGIMAGE, BGIMAGE.get_rect())
        #redraw the floor
        drawFloor()        

        if invulnerableMode and time.time() - invulnerableStartTime > INVULNTIME:
            invulnerableMode = False

        playerCenterx = playerObj['x'] + int(playerObj['size'] / 2)
        playerCentery = playerObj['y'] + int(playerObj['size'] / 2)
        if (camerax + HALF_WINDOWWIDTH) - playerCenterx > CAMERASLACK:
            camerax = playerCenterx + CAMERASLACK - HALF_WINDOWWIDTH
        elif playerCenterx - (camerax +HALF_WINDOWWIDTH) > CAMERASLACK:
            camerax = playerCenterx - CAMERASLACK - HALF_WINDOWWIDTH
        if (cameray + HALF_WINDOWHEIGHT) - playerCentery > CAMERASLACK:
            cameray = playerCentery + CAMERASLACK - HALF_WINDOWHEIGHT
        elif playerCentery - (cameray +HALF_WINDOWHEIGHT) > CAMERASLACK:
            cameray = playerCentery - CAMERASLACK - HALF_WINDOWHEIGHT

        #Initial player positions and facing and making rect
        flashIsOn = round(time.time(), 1) * 10 % 2 == 1
        if not gameOverMode and not (invulnerableMode and flashIsOn):
            playerObj['rect'] = pygame.Rect((playerObj['x'] - (WINDOWWIDTH),
                                             playerObj['y'] - (STARTSIZE + FLOORSIZE - 5 ) - getBounceAmount(playerObj['bounce'] , BOUNCERATE, BOUNCEHEIGHT),
                                             playerObj['size'],
                                             playerObj['size']))
            DISPLAYSURF.blit(playerObj['surface'], playerObj['rect'])

        #detect when the keys are press and set their vars to True   
        for event in pygame.event.get():
            if event.type == QUIT:
                terminate()

            elif event.type == KEYDOWN:
                if event.key in (K_UP, K_w):
                    moveDown = False
                    moveUp = True
                elif event.key in (K_DOWN, K_s):
                    moveUp = False
                    moveDown = True
                elif event.key in (K_LEFT, K_a):
                    moveRight = False
                    moveLeft = True
                    if playerObj['facing'] == RIGHT:
                        playerObj['surface'] = pygame.transform.scale(L_Monster, (playerObj['size'], playerObj['size']))
                    playerObj['facing'] = LEFT
                elif event.key in (K_RIGHT, K_d):
                    moveLeft = False
                    moveRight = True
                    if playerObj['facing'] == LEFT:
                        playerObj['surface'] = pygame.transform.scale(R_Monster, (playerObj['size'], playerObj['size']))
                    playerObj['facing'] = RIGHT
                elif event.key in (K_SPACE, K_BACKSPACE):
                    spaceDown = True
                elif event.key in (K_LSHIFT, K_RSHIFT):
                    shiftDown = True
                elif winMode and event.key == K_r:
                    return

            #Detect when the key comes up and set the var to false   
            elif event.type == KEYUP:
                if event.key in (K_LEFT, K_a):
                    moveLeft = False
                elif event.key in (K_RIGHT, K_d):
                    moveRight = False
                elif event.key in (K_UP, K_w):
                    moveUp = False
                elif event.key in (K_DOWN, K_s):
                    moveDown = False 
                elif event.key in (K_SPACE, K_BACKSPACE):
                    spaceDown = False
                elif event.key in (K_LSHIFT, K_RSHIFT):
                    shiftDown = False     
                elif event.key == K_ESCAPE:
                    terminate()

    #declares the bird rect from the bird object
        birdsObj['rect'] = pygame.Rect((birdsObj['x'],
                                        birdsObj['y'],
                                        birdsObj['size'],
                                        birdsObj['size']))                   

        #Decide what way the bird has to go
        if birdsObj['x'] >= (WINDOWWIDTH +(STARTSIZE*2)):
            birdDir = 'left'
        elif birdsObj['x'] <= (0 - (STARTSIZE*2)):
            birdDir = 'right'
        #go that way    
        if birdDir == 'left':
            birdsObj['x'] -= 5
            if birdsObj['facing'] == RIGHT:
                birdsObj['surface'] = pygame.transform.scale(L_Bird, (playerObj['size'], playerObj['size']))
                birdsObj['facing'] = LEFT
        elif birdDir == 'right':
            birdsObj['x'] += 5
            if birdsObj['facing'] == LEFT:
                birdsObj['surface'] = pygame.transform.scale(R_Bird, (playerObj['size'], playerObj['size']))
                birdsObj['facing'] = RIGHT
        #draw the bird    
        DISPLAYSURF.blit(birdsObj['surface'], birdsObj['rect'])

        if playerObj['rect'].colliderect(birdsObj['rect']):
            gameOverMode = True

        #actually move the player            
        if not gameOverMode:
            if moveLeft and playerObj['x'] > (WINDOWWIDTH):
                playerObj['x'] -= MOVERATE
            if moveRight and playerObj['x'] <= ((WINDOWWIDTH*2) - STARTSIZE):
                playerObj['x'] += MOVERATE
#            if moveUp and playerObj['y'] > (0 + STARTSIZE * 2):
#                playerObj['y'] -= MOVERATE
            if moveDown and playerObj['y'] < WINDOWHEIGHT:
                playerObj['y'] += MOVERATE 
            if (moveLeft or moveRight or moveUp or moveDown) or playerObj['bounce'] != 0:
                playerObj['bounce'] += 1
            if moveLeft and spaceDown:
                BOUNCEHEIGHT = 400
            elif moveRight and spaceDown:
                 BOUNCEHEIGHT = 400
            else:
                BOUNCEHEIGHT = 30
            if moveLeft and shiftDown:
                MOVERATE = 18
            elif moveRight and shiftDown:
                MOVERATE = 18
            else:
                MOVERATE = 9

            if playerObj['bounce'] > BOUNCERATE:
                playerObj['bounce'] = 0 

        *else:
            # game is over, show "game over" text
            DISPLAYSURF.blit(gameOverSurf, gameOverRect)
            print (gameOverMode)          
            if time.time() - gameOverStartTime > GAMEOVERTIME:
                return*

        if winMode:
            DISPLAYSURF.blit(winSurf, winRect)
            DISPLAYSURF.blit(winSurf2, winRect2)

        pygame.display.update()
        FPSCLOCK.tick(FPS) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:09:31.860

您正在绘制游戏结束文本，但直到循环再次开始之前才更新显示（因此游戏结束文本可能仅渲染 1 帧）。尝试这样的事情：

```
else:
    # game is over, show "game over" text
    gameOverStartTime = time.time()
    DISPLAYSURF.blit(gameOverSurf, gameOverRect)
    pygame.display.update()
    print (gameOverMode)          
    while time.time() - gameOverStartTime < GAMEOVERTIME:
        pass 
```

这将绘制游戏结束文本，更新屏幕，然后循环直到您超过定义的时间量`GAMEOVERTIME`（我认为您实际上并没有在任何地方这样做，至少在您发布的代码中没有）。请注意，在分配的时间到期之前，我给你的这个循环不允许你处理任何输入事件或任何东西，但它会保证游戏结束文本将在你的时间内呈现到屏幕上想。

# codeigniter - codeigniter post 值不可用于形成。在控制器逻辑中使用后置值

> ID：16052588
> 
> 赞同：0
> 
> 时间：2013-04-17T05:54:54.900
> 
> 标签：codeigniter, post, controller

我的控制器中有一些语法：

```
 $data = array(
   'submit' =>$this->input->post('submit'),
   'period' =>$this->input->post('period'),
   'buom' =>$this->input->post('buom'),
   'creditlimit' => $this->sales_model->get_creditlimit($this->input->post('customer'))
  ); 
```

当我将它传递给我的视图时，这非常有效，所有数组元素都按预期变为变量。

我想做的是`$this->input->post('submit')`在 if 语句中使用，但`$this->input->post('submit')`不输出到控制器本身，只输出到视图。

如果我只是执行以下操作：

```
echo $this->input->post('submit'); 
```

即使视图正常显示帖子，PHP也不返回任何值？

如何使我的控制器可以使用此帖子值并对其执行逻辑。

我的总体目标是我的提交表单具有三个不同的提交按钮。根据他们单击的提交按钮，我想为每个提交加载不同的视图。

所以像：

```
if($this->input->post('submit')==="option1")
{$this->load->view('view1');}
else
{$this->load->view('view2');} 
```

我做了什么蠢事吗？

一如既往地提前感谢，问候...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:02:46.283

不要使用提交，如果您有 3 个不同的提交值，则说明您在页面上运行了 javascript。最好使用隐藏变量。CodeIgniter 有它的局限性，这是你将不得不操纵表单助手的地方（至少据我所知）。如果有我不知道的解决方法，我深表歉意；但是，根据我的经验，这不是可以/应该与 PHP POST 数组一起使用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:07:04.547

```
<SCRIPT>
function submitFunction(i) {
   if (i==1) document.theForm.action=
      "http://www.company.com/cgi-bin/cgi1.cgi";
   if (i==2) document.theForm.action=
      "http://www.company.com/cgi-bin/cgi2.cgi";
   if (i==3) document.theForm.action=
      "http://www.company.com/cgi-bin/cgi3.cgi";
   document.theForm.submit()
   }
</SCRIPT>

<FORM NAME="theForm">
<INPUT TYPE="button" VALUE="Submit 1" onClick="submitFunction(1)">
<INPUT TYPE="button" VALUE="Submit 2" onClick="submitFunction(2)">
<INPUT TYPE="button" VALUE="Submit 3" onClick="submitFunction(3)">
</FORM> 
```

# c - 测试嵌入式 C

> ID：16052590
> 
> 赞同：1
> 
> 时间：2013-04-17T05:55:12.170
> 
> 标签：c, unit-testing, embedded, hex, executable

我正在使用 CCS, Inc. PCWHD 版本 4

我被要求**在 CCSC 编译器上编译和运行 C 文件**，但问题与 GCC 和 turbo 不同，它在编译时没有给出“.exe”（应用程序文件）。我正在获取文件`.cod, .err., .hex, .ESYM,`等。因此必须执行其中的 .hex（烧录到 IC）；但我想在燃烧之前对其进行测试。

如何使用**CCSC 编译器**运行十六进制或其他测试代码的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:35:55.950

**我不知道您的自定义计算机服务编译器，但我对 TI CCS 很有经验**。 `.hex`- 基本上是英特尔十六进制格式，它以机器语言和格式存储您的代码[`Hex`](http://en.wikipedia.org/wiki/Intel_HEX) 。这是由您的编译器为您正在处理的特定硬件（uC）生成的。

[`.exe`](http://en.wikipedia.org/wiki/EXE)- 包含为您的机器（主机）生成的机器代码（通常）（和资源）。

“**我想在烧录之前测试它**” -
1) 通常你的 IDE 会有一个模拟器选项，你可以通过它“模拟”uC。这通常在您的编译器选项中。这就是你要找的。如果您的 IDE 没有模拟器 [，请检查一下](http://www.ccsinfo.com/content.php?page=newtopiccwhat)

2）您可以进行实时调试（您的 CCSC^(**公司**)支持此功能，如[Link](http://www.ccsinfo.com/content.php?page=ideoverview)所示）。这更灵活，因为您可以知道实际发生了什么。有时中断很难“模拟”，但如果您进行硬件调试，则更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T19:45:33.207

PIC 指令集和架构与开发主机完全不同，CCS 编译器无法针对 x86，因此无法生成可以在 PC 上运行的可执行文件——它是一个[交叉编译器](http://en.wikipedia.org/wiki/Cross_compiler)。但是，与硬件无关的应用程序部分可能是可移植的，并且可以通过在主机编译器中编译在 PC 上进行测试，但是您需要注意，由于它是 32 位架构，数据类型大小和数值范围会有所不同. 如果您仔细抽象您的硬件，这可能是一种非常有效的技术，因为您可以使用测试工具或模拟代码来存根硬件抽象层。

在 PIC 微控制器上，代码从片上 ROM 运行 - PIC 架构无法从 RAM 执行代码，因此您别无选择，只能将代码刻录到片上 ROM 以便在硬件上执行。大多数部件使用可擦除和可重写的闪存，因此测试您的代码应该不是问题。有一次性可编程部件，但出于显而易见的原因，您通常不会将它们用于开发！

理想情况下，对于测试和调试，您应该有一个[在线调试器](http://www.ccsinfo.com/content.php?page=programmers-debugger)，允许您从连接到硬件的开发主机对代码进行[编程、运行、步进和断点。](http://www.ccsinfo.com/content.php?page=c-aware_debug)

另一种方法（尽管通常不完全令人满意）是在模拟器中测试和执行您的代码。CCS 似乎没有集成仿真器，因此您必须改用[Microchip 的 MPLAB SIM](http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=2123&param=en022520)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T06:54:21.073

CCS C 编译器不构建 .exe 文件。它为 PIC、DSC 等构建程序。Windows 运行 .exe 文件，Microchip 处理器不运行。你的编译器生成正确的输出文件，前提是构建的东西没有错误。您必须将其加载到正确的处理器或模拟器上才能运行。它们不会在 Windows 中运行。

# javascript - JavaScript slice() 在空间(" ") 的基础上爆炸

> ID：16052591
> 
> 赞同：0
> 
> 时间：2013-04-17T05:55:12.873
> 
> 标签：javascript, input, slice

我想从输入字段中得到最后一句话。如果有人写它在**哪里****，**如果有人把它放在**哪里，**那么它就在**哪里** ，如果有人把**你要去哪里，****那么**它就放弃了。
我正在使用此代码，但这不起作用。请指导我。这是一个代码。

```
<body>
<input type="text" id="test" onkeyup="checkit()" />
<div id="content">

</div>
</body> 
```

这是javascript代码。

```
<script type="text/javascript">
function checkit(){
    var content = document.getElementById("content");
    var data = document.getElementById("test").value;
    var cdata = data.slice(" ");

        content.innerHTML = cdata;

}
</script> 
```

谢谢........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:10:04.677

用这个....

```
function checkit(){

    var content = document.getElementById("content");

    var data = document.getElementById("test").value;

    var cdata = data.split(" ");

    content.innerHTML = cdata[cdata.length-1];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:10:06.003

尝试这个：

```
<script type="text/javascript">
function checkit(){
    var content = document.getElementById("content");
    var data = document.getElementById("test").value;
    var cdata = data.split(" ");

        content.innerHTML = cdata[cdata.length-1];

}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:12:29.503

尝试这个....

```
function checkit(){

var content = document.getElementById("content");
var data = document.getElementById("test").value;
var cdata = data.split(" ");
//alert(cdata.length);

    content.innerHTML = cdata[cdata.length-1];

} 
```

[这是演示](http://jsfiddle.net/gMaxF/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T06:12:48.520

您需要拆分后数组中的最后一个元素。

`content.innerHTML = cdata[cdata.length-1];`应该足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T06:16:31.537

要使用空格分割并修剪并避免多个空格在结果中给出空字符串，您可以使用 RegExp 进行分割：`data.match(/[^\s]+/g)`

# javascript - javascript阻止keyup的默认设置

> ID：16052592
> 
> 赞同：16
> 
> 时间：2013-04-17T05:55:15.813
> 
> 标签：javascript, jquery

我有以下代码：

```
$(document).on('keyup', 'p[contenteditable="true"]', function(e) {
    if(e.which == 13) {
        e.preventDefault();
        $(this).after('<p contenteditable = "true"></p>');
        $(this).next('p').focus();
    } else if((e.which == 8 || e.which == 46) && $(this).text() == "") {
        e.preventDefault();
        alert("Should remove element.");
        $(this).remove();
        $(this).previous('p').focus();
    };
}); 
```

我想阻止按下键时的默认操作。`preventDefault`适用于`keypress`但不适用`keyup`。有没有办法防止defualt for `$(document).on('keyup')`？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-17T05:58:03.763

No.`keyup`在默认操作后触发。

`keydown`并且`keypress`是您可以防止默认值的地方。
如果这些没有停止，则默认发生并被`keyup`触发。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-17T06:22:27.840

我们可以使用以下代码片段来阻止该操作。

```
e.stopPropagation();
      e.preventDefault();  
      e.returnValue = false;
      e.cancelBubble = true;
      return false; 
```

keyup 在 keydown/keypress 之后触发。我们可以防止任何这些事件中的默认操作。

谢谢，

湿婆

# objective-c - 使用 Objective-C 在视图之间传递数据

> ID：16052594
> 
> 赞同：0
> 
> 时间：2013-04-17T05:55:24.657
> 
> 标签：objective-c

我正在制作一个应用程序，其中我**需要**使用**Objective-C中的***按钮单击*在视图之间传递数据。

 **我已经创建了**ViewController.m**来*传递*和**DetailController.m**来*获取*......

**视图控制器.m：**

```
 - (IBAction)btnSubmit:(id)sender {

     NSString *name = [txtName text];

     DetailController *view2 = [[[DetailController alloc] 
     initWithNibName:nil  bundle:nil] autorelease];
     [self presentViewController:view2 animated:NO completion:NULL];

      } 
```

**细节控制器.m**

```
 - (void)viewDidLoad
     {
        [super viewDidLoad];
        // Do any additional setup after loading the view from its nib.

        lblResult.text = [self.detailItem description];
      } 
```

我不明白为什么我无法*将名称值传递给另一个视图*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T05:57:06.523

你**忘了添加**这一行：

*view2.detailItem = 名称；*

```
 (IBAction)btnSubmit:(id)sender {

         NSString *name = [txtName text];

            DetailController *view2 = [[[DetailController alloc] 
            initWithNibName:nil bundle:nil] autorelease];
            view2.detailItem = name;
            [self presentViewController:view2 animated:NO completion:NULL];

  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T05:58:24.670

```
DetailController *view2 = [[[DetailController alloc] 
     initWithNibName:nil  bundle:nil] autorelease];
view2.detailItem = self.yourValue;    
[self presentViewController:view2 animated:NO completion:NULL]; 
```**

# sql - 在变量中恢复动态查询结果

> ID：16052596
> 
> 赞同：0
> 
> 时间：2013-04-17T05:55:31.453
> 
> 标签：sql, tsql, sql-server-2008-r2

我有一个 SP 会返回下一个代码。我将传递 TableName、IdentityColumnName、CodeColumn 和 ConditionColumn。很简单，我想将动态查询结果保存在一个变量中，这个查询将返回一个值给我。该 SP 将适用于 3 张桌子。问题是我的动态查询没有设置为`@query`变量，任何帮助。

```
 ALTER PROC [dbo].[usp_GetNextCode]
    (
        @IdColumnName nvarchar(20)= 'HeadId',                
        @CodeColumnName nvarchar(100)= 'HeadCode',           
        @TableName nvarchar(50)= 'Head',                     
        @MaxColumnName varchar(50) = 'FamilyId',             
        @MaxColumnValue varchar(3) = 1                       
    )
    AS
    BEGIN
        DECLARE @query varchar(max) , @NewId VARCHAR(30),@LastCode varchar(30)
        ---First Get the Last Inserted Code and save it in a Variable..
        SET @query =    'Select      '+ @LastCode +'='+ @CodeColumnName +'
                        FROM         Account.' + @TableName 
                     + ' Where '    + @IdColumnName + ' = (
                                    SELECT      MAX(' + @IdColumnName + '  ) 
                                    FROM        Account.' + @TableName +'  
                                    where       '+ @MaxColumnName  + ' = ' + @MaxColumnValue  +' )'
        Select @query
        EXEC(@query)
        Select @LastCode
    END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:17:33.493

您需要使用[`sp_executesql`](http://msdn.microsoft.com/en-gb/library/ms188001.aspx)，因为您希望/需要为动态查询使用输出参数：

```
ALTER PROC [dbo].[usp_GetNextCode]
(
    @IdColumnName nvarchar(20)= 'HeadId',                
    @CodeColumnName nvarchar(100)= 'HeadCode',           
    @TableName nvarchar(50)= 'Head',                     
    @MaxColumnName varchar(50) = 'FamilyId',             
    @MaxColumnValue varchar(3) = 1
)
AS
BEGIN

        DECLARE @query nvarchar(max) , @NewId VARCHAR(30),@LastCode varchar(30)
        DECLARE @parms nvarchar(max)
        ---First Get the Last Inserted Code and save it in a Variable..
        SET @query =    'Select      @LastCode='+ @CodeColumnName +'
                        FROM         Account.' + @TableName 
                     + ' Where '    + @IdColumnName + ' = (
                                    SELECT      MAX(' + @IdColumnName + '  ) 
                                    FROM        Account.' + @TableName +'  
                                    where       '+ @MaxColumnName  + ' = ' + @MaxColumnValue  +' )'
        SET @parms = '@LastCode varchar(30) output'
        Select @query
        EXEC sp_executesql @query,@parms,@LastCode output
        Select @LastCode
END 
```

目前，您正在将 的*值*连接到`@LastCode`您的`@query`字符串中 - 因为它是`NULL`，所以您的整个`@query`字符串变为`NULL`.

# javascript - 将 ext 文本框值传递给 javascript，然后传递给控制器 操作

> ID：16052597
> 
> 赞同：0
> 
> 时间：2013-04-17T05:55:34.843
> 
> 标签：javascript, model-view-controller, controller

我有一个场景，我必须将用户名和密码值从 ext 文本字段传递到控制器操作以对数据库进行验证。我写了以下代码

```
 <ext:TextField Name="Username" runat="server" ID="UserName"></ext:TextField>
   <ext:TextField Name="Password" runat="server" ID="Password"></ext:TextField>
   <ext:Button runat="server" ID="submit1" Type="Submit"  Text="LOGIN" >
    <Listeners>
        <Click Fn="CallLogin">

        </Click>
    </Listeners>

    </ext:Button> 
```

函数调用登录（）{

```
 var username = document.getElementById('UserName').value;
        var password = document.getElementById('Password').value;

        //var url = '@Url.Action("Login", "Index")';
        //window.location.href = url;

        window.location.href = '/Login/Index/';          

                   } 
```

如何将这些值传递给控制器​​操作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:06:35.300

您将不得不使用 ajax 和 jquery 来实现这一点。

1.在页面标题中包含 jquery 库

```
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"> 
</head> 
```

2.在CallLogin()函数中执行ajax调用

```
function CallLogin() {
        var username = document.getElementById('UserName').value;
        var password = document.getElementById('Password').value;

  $.ajax({
                    type: "POST",
                    url: '/Login/Index/',
                    data: { userText: username , passwordText: password },
                    success: function (response) {
                        if (response > 0) {
                           alert("Success");
                          }
                        else
                         {
                        alert("Login failed");
                           }

    });

} 
```

假设您的操作方法看起来像这样：

```
 [AcceptVerbs(HttpVerbs.Post)]
        public int Index(string userText, string passwordText)
        {

           return (checkValidUser(userText,passwordText));
        } 
```

# android - 视频在android中播放全屏模式

> ID：16052598
> 
> 赞同：0
> 
> 时间：2013-04-17T05:55:35.907
> 
> 标签：android, android-webview, mediacontroller

我希望以全屏模式播放 webview 视频...

如果我的视频开始播放意味着它的显示和全屏模式播放..我该如何开发这些？？？给我任何想法？？？

如果我必须单击播放按钮，则表示视频正在全屏模式播放。

我使用了以下代码：

```
content.setWebChromeClient(new WebChromeClient());
final Activity activity = this;
content.setWebChromeClient(new WebChromeClient(){
public void onProgressChanged ( WebView view , int progress ){
    activity.setProgress(progress * 1000);
}       
 });

content.setWebViewClient(new WebViewClient(){
public void onReceivedError ( WebView view , int errorCode , String description , String failingUrl ){
    Toast.makeText(activity, "Oh no! " + description, Toast.LENGTH_SHORT).show();
}

 });

content.setWebChromeClient(new WebChromeClient());

 content.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
content.getSettings().setJavaScriptEnabled(true);
content.getSettings().setDomStorageEnabled(true);
content.getSettings().setPluginState(PluginState.ON);
content.loadDataWithBaseURL(null, full_content, "text/html", "utf-8", null);

    content.setWebChromeClient(new WebChromeClient()
     {
        public void onProgressChanged ( WebView view , int progress )
        {

            activity.setProgress(progress * 1000);
        }

            public void onShowCustomView(View view, int requestedOrientation,   WebChromeClient.CustomViewCallback callback){
            super.onShowCustomView(view, callback);   
            if(Build.VERSION.SDK_INT >=14) {
                if (view instanceof FrameLayout) {                  
                    content.addView(view, new FrameLayout.LayoutParams(
                    ViewGroup.LayoutParams.MATCH_PARENT,
                    ViewGroup.LayoutParams.MATCH_PARENT,
                    Gravity.CENTER));                   
                    content.setVisibility(View.VISIBLE);

                }
            }
        } 

            }); 
```

请给我任何关于全屏播放视频的建议？？？

在这些代码中，视频显示特定的宽度和高度...我怎样才能播放全屏模式？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:01:02.293

我是通过 youtube 播放器 API 完成的……这对于 android 开发者来说很简单。它在全屏模式下播放效果很好。

# memory - 使用非活动内存对我有利。这段代码存储在 RAM 或非活动内存中的是什么？

> ID：16052599
> 
> 赞同：0
> 
> 时间：2013-04-17T04:23:18.127
> 
> 标签：memory, memory-management, file-io

我正在 OS X 10.8.3 上开发。下面的代码很简单。它可以执行两个操作。如果未注释读取功能，则程序将在“地址”处打开文件并将其所有内容传输到数据中。相反，如果取消注释 memcpy 函数，程序会将映射的内容复制到数据中。我正在开发一个 Mac，它将常用文件缓存在 RAM 的非活动内存中，以便将来更快地访问。我在文件控制和 mmap 中都关闭了缓存，因为我正在处理 1 GB 或更大的大文件。如果我没有设置 NOCACHE 选项，则整个 1 GB 将存储在非活动内存中。

如果 read 函数未注释，则程序按预期运行。没有缓存任何内容，每次运行程序时，读取整个 1 GB 大约需要 20 秒。

但是，如果 memcpy 函数未注释，则会发生一些变化。我仍然看到内存没有增加，第一次运行时复制仍然需要 20 秒。但是前一次执行之后的每一次执行，都会在一秒钟内复制。这非常类似于将整个文件缓存在非活动内存中的行为，但我从未看到内存增加。即使我随后不映射文件而只执行读取，它也会在一秒钟内同时执行。

某些东西必须存储在非活动内存中，但是我该如何跟踪它以及如何跟踪它？我想找到正在存储的内容并将其用于我的优势。

我正在使用活动监视器查看一般内存大小。我正在使用 Xcode Instruments 将初始 memcpy 执行与 read 和 memcpy 都被注释的执行进行比较。我发现分配、文件活动、读取/写入、VM 跟踪器或共享内存工具没有区别。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <fcntl.h>
#include <unistd.h>
#include <sys/stat.h>
#include <sys/mman.h>

int main(int argc, const char * argv[])
{
    unsigned char     *data;
    unsigned char     *mmapdata;
    size_t            length;

    int file = open("address", O_RDONLY);
    fcntl(file, F_NOCACHE, 1);

    struct stat st;
    stat("address", &st);
    length = st.st_size;

    data = malloc(length);
    memset(data,0,length);

    mmapdata = mmap(NULL, length, PROT_READ,MAP_SHARED|MAP_NOCACHE, file, 0);
    if (mmapdata == MAP_FAILED)
        fprintf(stderr, "failure");

//    read(file,data,length);
    close(file);

//    memcpy(data,mmapdata,length);
    munmap(mmapdata,length);

    free(data);

    return 0;
} 
```

更新：

对不起，如果我不清楚。在程序执行期间，我的 RAM 的活动内存部分根据我 malloc 的数据和映射文件的大小而增加。这肯定是页面所在的位置。清理后，可用内存量恢复到原来的水平。非活动内存永远不会增加。操作系统不会真正丢弃那些活动内存是有道理的，因为空闲内存是无用的，但由于以下原因，此过程与缓存不同。我测试了两种情况。在这两个文件中，我加载了一些总大小超过我可用内存的文件。一种情况是我缓存文件，另一种情况我不缓存。通过缓存，我的非活动内存增加了，一旦我填满了我的内存，一切都会大大减慢。加载新文件将替换另一个文件' s 分配了非活动内存，但此过程将花费比下一个场景更长的时间。下一个场景是关闭缓存。我再次运行程序几次加载足够的文件来填充我的内存，但非活动内存永远不会增加，活动内存总是恢复正常，所以看起来我什么也没做。我映射的文件仍然像以前一样快速加载，但是映射新文件会在正常时间内加载，替换其他文件。使用这种方法，我的系统永远不会变慢。为什么第二种情况更快？我映射的文件仍然像以前一样快速加载，但是映射新文件会在正常时间内加载，替换其他文件。使用这种方法，我的系统永远不会变慢。为什么第二种情况更快？我映射的文件仍然像以前一样快速加载，但是映射新文件会在正常时间内加载，替换其他文件。使用这种方法，我的系统永远不会变慢。为什么第二种情况更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T04:35:39.520

如果文件的页面不驻留在内存中，操作系统怎么可能使`memcpy`' d 文件工作？`mmap`操作系统会提示您不希望缓存数据，但如果它别无选择或者与内存没有更好的关系，它仍然会这样做。

您的页面的优先级最低，因为操作系统认为您不会再次访问它们。但是它们必须常驻`memcpy`才能工作，并且操作系统不会仅仅为了拥有可用内存而将它们丢弃（这是 100% 无用的）。非活动内存比空闲内存好，因为它至少有一些机会可以节省 I/O 操作。

# c - c程序计算阶乘不起作用

> ID：16052601
> 
> 赞同：0
> 
> 时间：2013-04-17T05:55:45.737
> 
> 标签：c, function, parameter-passing

嗨，我必须编写这个程序来计算给定数字的阶乘。第一个函数必须读入一个数字，然后将其传递给主函数，该函数将该值传递给第二个函数，该函数计算该数字的阶乘，然后将该阶乘传递给主函数。然后应该从显示阶乘的 main 这是我写的，但我无法让它工作：

```
 #include <stdio.h>

    int getValue()
    {

        int n;

        printf("Enter number: ");
        scanf("%d%*c", &n);
        return(n);
    }

    int factorial(int n)
   {

        int i, f;

        f = 1;
        for(i=1; i<=n; i++)
        f = f * i;

        return(f);
    }

    void printFactorial(int f)
    {

        printf("The factorial is: %d", f);

        return;
    }

    int main()
    {

        int f = getValue();
        factorial(f);
        printFactorial();

        return(0);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T05:57:35.227

您没有将计算出的阶乘值传递给`printFactorial()`. 将值传递给打印函数：

```
int main()
{

    int f = getValue();
    int fact = factorial(f);
    printFactorial(fact);
    return(0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:59:14.913

您没有将值传递给 printFactorial()。将值传递给打印函数：您可以将 factorial(f) 结果存储到某个变量然后 paas，或者您可以将 factorial(f) 传递给打印函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T05:59:47.083

我认为您缺少 printFactorial() 的参数。

尝试这个：

```
printFactorial(factorial(f)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T05:58:10.837

您忽略了 的返回值`factorial()`并且没有将参数传递给`printFactorial()`. 这些是最明显的问题。

另一个最微妙的问题是，`factorial()`它只适用于`n`. 阶乘函数增长得如此之快，以至于您很快就会遇到整数溢出。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-12-11T05:18:31.817

```
int main()
{

    int f = getValue();
    factorial(f);
    printFactorial(f);
    getch();
    return(0);
} 
```

# git - 如何在 git config 中禁用 osxkeychain 作为凭证 助手？

> ID：16052602
> 
> 赞同：82
> 
> 时间：2013-04-17T05:55:48.627
> 
> 标签：git, github

我需要禁用 OS X 的凭证助手：`git credential-osxkeychain`

它在全局配置文件和本地配置文件中都被禁用，实际上它**从未被**启用。尽管如此，它仍然会记住我的 github 登录详细信息。
我在笔记本电脑上，所以我不希望自动无密码访问我的存储库。
我**将**使用 ssh 密钥。这是一台新计算机，整个系统设置仍在进行中。
现在我使用了`https`repo refs，并且凭证助手不断发挥作用。

这些是我的 conf 文件：

* * *

`git config --edit`=>

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
    ignorecase = true
    precomposeunicode = false
[remote "origin"]
    url = https://github.com/user/repo.git
    fetch = +refs/heads/*:refs/remotes/origin/*
[branch "master"]
    remote = origin
    merge = refs/heads/master
[branch "develop"]
    remote = origin
    merge = refs/heads/develop
[branch "deploy"]
    remote = origin
    merge = refs/heads/deploy 
```

* * *

`git config --global --edit`=>

```
[user]
    email = ****************
    name = tom
[color]
    ui = true
[core]
    editor = subl -w
[github]
    user = tompave
[merge]
    conflictstyle = diff3
[push]
    default = simple 
```

* * *

此外，运行`git config --global credential.helper`不会返回任何内容（没错）。

但是，运行`git config credential.helper`返回`osxkeychain`！

这怎么可能？我在本地配置文件中看不到它，它在哪里设置？

我尝试在本地设置它以查看会发生什么，它**确实**出现在`repodir/.git/config`. 然后我删除了该条目......但助手仍然在这里并且处于活动状态。

我可以清楚地看到它在 OS X 钥匙串中的条目。
我可以删除它，然后**git**会再次要求输入密码......但是只要我输入它（比如说，对于 a `git fetch`），钥匙串中的条目就会恢复。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-04-17T07:47:53.157

为了帮助追踪设置，我会尝试使用：

```
git config --local credential.helper
git config --global credential.helper
git config --system credential.helper 
```

第一个检查本地 repo 配置，第二个是 your `~/.gitconfig`，第三个是基于 git 的安装位置。根据哪个返回显示凭证助手，您可以尝试使用等效`--unset`选项：

```
git config --local --unset credential.helper
git config --global --unset credential.helper
git config --system --unset credential.helper 
```

如果您没有适当的权限，最后一个可能不起作用。因此，您可能需要运行最后一个`sudo`才能使其正常工作。FWIW，您可能已经为 Mac OS X 的预构建 git 映像安装了。如果您使用 cat `/usr/local/git/etc/gitconfig`（或者`/usr/local/etc/gitconfig`如果您通过 Homebrew 或本地建筑物安装 git），您会看到它确实为您设置了凭证助手。所以上面的最后一个命令将有助于解决这个问题。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2016-12-17T04:57:33.813

其他答案非常有帮助。credential.helper 没有在任何列表中显示（指定--local、--global 等），它总是显示在“git config -l”上。使用 --show-origin 命令表明它来自特定于 OS X 的文件。

```
$ git config --show-origin --get credential.helper
file:/Applications/Xcode.app/Contents/Developer/usr/share/git-core/gitconfig    osxkeychain 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2020-08-18T21:31:03.370

在我的情况下，它更容易运行：

```
git config --get-all --show-origin credential.helper 
```

输出完整列表，包括配置文件路径：

```
file:/Library/Developer/CommandLineTools/usr/share/git-core/gitconfig   osxkeychain
file:/Users/yourname/.gitconfig !aws codecommit credential-helper $@ 
```

然后打开配置文件：

```
sudo vim /Library/Developer/CommandLineTools/usr/share/git-core/gitconfig 
```

并注释掉该行`credential.helper=osxkeychain`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2021-08-19T08:30:42.413

注意：在**GitHub**中，密码被弃用以支持令牌，这个问题可能会再次出现在许多用户身上。
在我的情况下（***macos 11.5 BigSur***），命令行配置`git config --unset credential.helper`没有帮助，本地、全局或系统级别的任何变化也没有帮助。[来自 GitHub](https://docs.github.com/en/get-started/getting-started-with-git/updating-credentials-from-the-macos-keychain)的帮助也没有解决问题。

解决方案是：

1.  `git config --get-all --show-origin credential.helper`如上面[Kim T](https://stackoverflow.com/users/2068766/kim-t)所述，使用 查找配置文件。您可能会得到并输出如下：
    `file:/usr/local/git/etc/gitconfig osxkeychain`
    `file:/Users/XYZ/.gitconfig osxkeychain`

2.  如果您像我一样是 macos 新手，您可能需要导航到文件位置。只需从上面的命令复制每个输出`show-origin`，转到 Finder，然后在转到菜单中选择“转到文件夹”，然后粘贴文件位置。

3.  在每个配置文件中，注释掉***osxkeychain***，如下所示：
    `[credential]`
    `helper = osxkeychain`
    应该变为
    `#[credential]`
    `# helper = osxkeychain`
    您可能需要获得编辑文件的权限。在命令行中编辑时使用`sudo`，或者在 Finder 中右键单击文件时转到菜单上的“获取信息”。

4.  然后从回购中推或拉。系统会再次要求您输入密码，但现在应该提供您的[个人访问令牌](https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token)。

瞧，魔术应该发生。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-17T06:16:03.613

配置本身 ( `git config --unset credential.helper`) 是不够的。
确保也终止任何`git-credential-osxkeychain`进程（如此[处所述](https://stackoverflow.com/q/15753429/6309)），或查看重启后问题是否仍然存在。

此外，在使用 GitHub for Mac 时，请检查此工具内部是否使用了配置。
请记住，`git config`仅此一项就会检查系统、全局和本地配置文件。

注意：使用 git 2.9，您可以简单地将其设置`credential.helper`为“空字符串”以禁用它：请参阅“[如何为单个存储库禁用 git 的凭据帮助程序？](https://stackoverflow.com/a/36435803/6309) ”。

# facebook - BB 10 中的 Twitter 和 Facebook 集成

> ID：16052603
> 
> 赞同：0
> 
> 时间：2013-04-17T05:56:00.347
> 
> 标签：facebook, twitter, integration, blackberry-10

我读到有类似 Twitter api (Twitter API ME)，它有助于直接从我们的应用程序访问 Twitter 的主要功能。这可能吗？twitter 有提供这样的 API 吗？Facebook整合的案例是什么？任何人都可以通过在 BB 10 Iam 中使用 cascades SDK 提供相关链接或示例应用程序来帮助我，QNX MOMENTICS 是 IDE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T06:45:14.953

有一个可用于 Blackberry 10 的 twitter API。我已经使用它并且它工作成功。您可以从 Github 下载它，我正在为您提供链接。[BB10 的 Twitter API](https://github.com/kylefowler/twitter-bb10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T04:47:46.520

Twitter 不提供 Qt API 来访问其主要功能。但是有一个支持大多数 Twitter API 的 Qt API，可以在这里找到[https://github.com/minimoog/QTweetLib](https://github.com/minimoog/QTweetLib)。还有 Facebook 图形 api 端口到 Qt - [http://gitorious.net/qfacebook](http://gitorious.net/qfacebook)。这两个 API 都依赖于 QtCore 和 QtNetwork，因此它们应该可以移植到 BB 10。

# php - 带有 CONTAINS 参数的 MySQL PDO 查询？

> ID：16052604
> 
> 赞同：0
> 
> 时间：2013-04-17T05:56:06.440
> 
> 标签：php, mysql

我目前有

```
$query = "SELECT * 
    FROM table 
    WHERE position = ?
    AND (CONTAINS(first_name, ?)
    OR CONTAINS(last_name, ?))";

$stmt = $db->prepare($query);

$stmt->bindValue(1, $position, PDO::PARAM_STR);
$stmt->bindValue(2, "%{".$q."}%", PDO::PARAM_STR);
$stmt->bindValue(3, "%{".$q."}%", PDO::PARAM_STR);

$stmt->execute()or die("error"); 
```

剧本一直在死去。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:08:29.163

`CONTAINS`是 SQL 服务器语法，而不是 MySQL。利用`LIKE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:06:49.757

使用喜欢：

```
SELECT * 
FROM table 
WHERE position = ?
AND first_name LIKE ?
OR last_name LIKE ? 
```

# eclipse - 如何在 Eclipse 或 aptana 主题中更改等号“=”的颜色

> ID：16052606
> 
> 赞同：1
> 
> 时间：2013-04-17T05:56:13.143
> 
> 标签：eclipse, eclipse-plugin, aptana3

我正在使用带有 aptana 插件的 Eclipse 作为我的 IDE。我知道在 Aptana 主题中，我可以更改函数、变量等的颜色。

但是怎么能改变颜色`"="`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T03:01:25.327

Aptana Studio 2 - 转到常规 > 编辑器 > 文本编辑器

有一个框说 - 外观颜色选项

点击 - 前景色

取消选中“使用系统默认值”框（如果选中）

选择一种新颜色。这将改变 = 符号的颜色。

# php - 从字符串中获取计算的正则表达式

> ID：16052609
> 
> 赞同：0
> 
> 时间：2013-04-17T05:56:53.667
> 
> 标签：php, regex

我需要帮助编写一个 reg ex 或者更多来搜索字符串的东西。

首先，它搜索包含小数点或逗号的数字字符串（0 到 9），但小数点和逗号只能位于两个数字之间。没有两个小数点彼此相邻，或两个逗号，或一个逗号旁边的小数点，或一个小数点旁边的逗号。

然后，如果找到了，它会在同一字符串中搜索数字 0 到 9、开括号、开方括号或开括号，只要找到任何数字、任何括号、任何方括号、任何大括号、两个数字之间的任何逗号、两个数字之间的任何小数点、任何加号 (+)、减号 (-)、星号 (*) 或正斜杠 (/) 以及它们之间的空格。它在最后一个空格、右括号、右方括号或右大括号处停止。

我正在尝试解析看起来像计算的数据，然后解决它。

例如，在字符串中：

```
'The quick brown 1234*(5+2) jumps over" 
```

取出

```
the 1234*(5+2) 
```

在字符串中

```
'[5/{4+(5*2)-1}] on a sunny (2 day.' 
```

只取出

```
[5/{4+(5*2)-1}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:03:14.693

使用正则表达式无法 100% 解决此任务。你最好的办法是使用正则表达式来分离看起来像表达式的东西，然后使用其他引擎来尝试计算它。

这应该是一个好的开始：取出任何连续的数字、括号、大括号和算术符号序列：

```
([-\+\*/\[\]\(\)\d\s]+) 
```

如果通过计算引擎运行该匹配的结果产生错误，只需跳过它并尝试下一个匹配。

# java - 用于 Java 套接字服务器的 Flex 客户端

> ID：16052613
> 
> 赞同：0
> 
> 时间：2013-04-17T05:57:02.197
> 
> 标签：java, actionscript-3, flash, apache-flex, sockets

我创建了自己的 java 套接字服务器，它不做 websocket 只是普通的旧套接字。我将每条消息都包裹在 0x00 和 0xFF 中。所以每条消息都以 0x00 开始，以 0xFF 结束。出于某种原因，当我偶尔从闪存读取它时，当消息大小超过 3000 字节时，我会收到乱码消息或消息丢失字符或消息不完整。这就是我在闪存中所拥有的。对此的任何指针将不胜感激。

```
private function onData(event:ProgressEvent):void
        {
            var obj:String;

            while(_serviceSocket.bytesAvailable > 0)
            {
                if(_serviceSocket.readByte() == START_FRAME || _currentBuffer == null)
                {
                    _currentBuffer = new ByteArray();
                }
                var byte:int;
                while(true)
                {           
                    try
                    {
                        byte = _serviceSocket.readByte();
                        if(byte == END_FRAME){
                            obj = _currentBuffer.toString();
                            processMessage(obj);
                            _currentBuffer = null;
                            break;
                        }else{
                            _currentBuffer.writeByte(byte);                             
                        }
                    }catch(e:Error){
                        obj = _currentBuffer.toString();
                        processMessage(obj);
                        _currentBuffer = null;
                        break;
                    }                       
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:45:14.357

Please try below code and check for the output

```
function onData(event:ProgressEvent):void{

    var data:String = "";

    var stream:ByteArray = new ByteArray();
    socket.writeBytes(stream, 0, 0);

    while(socket.bytesAvailable){
        data += socket.readUTFBytes(1);
    }

    trace("data "+ data);   

} 
```

# ruby-on-rails - 更新通过 OmniAuth 认证的用户数据

> ID：16052614
> 
> 赞同：0
> 
> 时间：2013-04-17T05:57:03.820
> 
> 标签：ruby-on-rails, oauth, oauth-2.0, omniauth

我有一个使用 Omni-Auth GitHub gem 的 Rails 应用程序。通过 GitHub 创建和登录用户帐户完美无缺！

这是我的用户模型：

```
 def self.from_omniauth(auth)
    find_by_github_uid(auth["uid"]) || create_from_omniauth(auth)
  end

  def self.create_from_omniauth(auth)
    create! do |user|
      user.github_uid = auth["uid"]
      user.github_token = auth["credentials"]["token"]
      user.username = auth["info"]["nickname"]
      user.email = auth["info"]["email"]
      user.full_name = auth["info"]["name"]
      user.gravatar_id = auth["extra"]["raw_info"]["gravatar_id"]
      user.blog_url = auth["extra"]["raw_info"]["blog"]
      user.company = auth["extra"]["raw_info"]["company"]
      user.location = auth["extra"]["raw_info"]["location"]
      user.hireable = auth["extra"]["raw_info"]["hireable"]
      user.bio = auth["extra"]["raw_info"]["bio"]
    end
  end 
```

但有时用户会更改他们的简历或公司，或者他们是否想被雇用，所以我不必删除旧帐户，我认为如果在他们更新帐户后及时更新它会很好。

**执行此操作的最佳做​​法是什么？如何使用现有的 OmniAuth 代码更新用户信息？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T06:44:17.290

```
 def self.from_omniauth(auth)
    user = find_by_github_uid(auth["uid"]) || User.new
    user.assign_from_omniauth(auth).save!
  end

  def assign_from_omniauth(auth)
      self.github_uid ||= auth["uid"]
      self.github_token ||= auth["credentials"]["token"]
      self.username ||= auth["info"]["nickname"]
      self.email ||= auth["info"]["email"]
      self.full_name = auth["info"]["name"]
      self.gravatar_id = auth["extra"]["raw_info"]["gravatar_id"]
      self.blog_url = auth["extra"]["raw_info"]["blog"]
      self.company = auth["extra"]["raw_info"]["company"]
      self.location = auth["extra"]["raw_info"]["location"]
      self.hireable = auth["extra"]["raw_info"]["hireable"]
      self.bio = auth["extra"]["raw_info"]["bio"]
  end 
```

# ios - 带有 AppleMach-Olinker 错误 iOS 的构建错误

> ID：16052616
> 
> 赞同：0
> 
> 时间：2013-04-17T05:57:11.123
> 
> 标签：ios, xcode4.6

谁能帮我这个？

ld "/Users/orkideh/Library/Developer/Xcode/DerivedData/New_GUI-ffkeokshboqifhchxwfwfwbauahh/Build/Products/Debug-iphonesimulator/New GUI.app/New GUI" normal i386 cd "/Users/orkideh/Downloads/New GUI" setenv IPHONEOS_DEPLOYMENT_TARGET 6.1 setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin :/usr/sbin:/sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator .platform/Developer/SDKs/iPhoneSimulator6.1。sdk -L/Users/orkideh/Library/Developer/Xcode/DerivedData/New_GUI-ffkeokshboqifhchxwfwfwbauahh/Build/Products/Debug-iphonesimulator -F/Users/orkideh/Library/Developer/Xcode/DerivedData/New_GUI-ffkeokshboqifhchxwfwfwbauahh/Build/Products/ Debug-iphonesimulator -filelist "/Users/orkideh/Library/Developer/Xcode/DerivedData/New_GUI-ffkeokshboqifhchxwfwfwbauahh/Build/Intermediates/New GUI.build/Debug-iphonesimulator/New GUI.build/Objects-normal/i386/New GUI。 LinkFileList" -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.1 -framework CoreMedia -framework Accounts -framework Social -framework UIKit -framework Foundation -framework CoreGraphics -framework iAd -o "/Users/orkideh/Library/Developer/Xcode/DerivedData/New_GUI-ffkeokshboqifhchxwfwfwbauahh/Build/Products/Debug-iphonesimulator/New GUI.app/New GUI"

体系结构 i386 的未定义符号：“_main”，引用自：从 crt1.o 开始 ld：未找到体系结构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我不知道错误是什么以及我应该如何解决这个问题。感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:04:28.570

我认为您缺少一些框架，因此请导入这些框架...

```
1\. CoreGraphics
2\. Social
3\. Accounts etc. 
```

并告诉我你导入了哪个框架。?

# javascript - 显示多行内联元素

> ID：16052617
> 
> 赞同：0
> 
> 时间：2013-04-17T05:57:24.207
> 
> 标签：javascript, html, css, underscore.js

我正在使用下划线模板和主干。对整个网络来说相​​当新。我正在这样显示我的数据：

```
<% _.each(sources, function (source) { %>
                <div class="inline">
                    <%= source.name %>

                    <label class="dropdown inline">Library:
                        <select id="libraryPrepName" class="inline">
                            <% _.each(libraries, function (library) { %>
                            <option value="<%=library.id%>"><%= library.name %></option>
                            <% }); %>
                        </select>
                    </label>               
                <% }); %>
                // clearfix? <p> tags?
                </div> 
```

我不知道如何让每一行都在自己的行上。我尝试使用引导程序的 clearfix 类或`<p>`标签来尝试换行，但不知道最好的方法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:24:20.883

这可能对您有用：

```
<% _.each(sources, function (source) { %>
    <div>
        <span>
            <%= source.name %>

            <label class="dropdown">Library:</label> 
            <select id="libraryPrepName">
                <% _.each(libraries, function (library) { %>
                    <option value="<%=library.id%>"><%= library.name %></option>
                <% }); %>
            </select>    
        </span>                 
    </div>                  
<% }); %> 
```

虽然我不确定你想准确定位在哪里`<%= source.name %>`......

# objective-c - 禁止 NSOpenPanel 中的特定文件类型

> ID：16052618
> 
> 赞同：2
> 
> 时间：2013-04-17T05:57:32.227
> 
> 标签：objective-c, macos, cocoa, nsopenpanel

我有一个`NSOpenPanel`. 我想让它使 PDF 文件不应该是可选的。

就像我们可以设置“允许的文件类型”一样：

```
NSOpenPanel *panel;
NSArray* fileTypes = [[NSArray alloc] initWithObjects:@"pdf", @"PDF", nil];
panel = [NSOpenPanel openPanel];
[panel setFloatingPanel:YES];
[panel setCanChooseDirectories:NO];
[panel setCanChooseFiles:YES];
[panel setAllowsMultipleSelection:YES];
[panel setAllowedFileTypes:fileTypes];
int i = [panel runModal];
if(i == NSOKButton){
    return [panel URLs];
} 
```

我的要求是禁止特定的文件类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:07:46.883

您可以使用该`NSOpenSavePanelDelegate`方法[`panel:shouldEnableURL:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOpenSavePanelDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40008249-CH1-SW4)。

面板将询问其代表有关其显示的每个 URL 的信息；检查文件的扩展名或 UTI，并`NO`从该方法返回 PDF。

*或者，只需提供您*支持的文件类型的详尽列表并将其用于`allowedFileTypes`阵列。

# android - 为什么这次更新失败？

> ID：16052622
> 
> 赞同：0
> 
> 时间：2013-04-17T05:57:39.963
> 
> 标签：android, textview

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<TextView
android:id="@+id/textView1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/hello_world" />

<Button
android:id="@+id/button1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_below="@+id/textView1"
android:layout_marginTop="153dp"
android:layout_toRightOf="@+id/textView1"
android:onClick="adelante"
android:text="Button" />
</RelativeLayout> 
```

MainActivity.java

```
package com.example.pruebamusica;

import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.TextView;

public class MainActivity extends Activity {

  MediaPlayer mp[]=new MediaPlayer[6];
  public TextView tv;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    tv = (TextView) findViewById(R.id.textView1);
    for (int i=0; i<6; i++){
      String sonido = "raw/g" + (i+1);
      int resID = getResources().getIdentifier(sonido, null, this.getPackageName());
      mp[i]= MediaPlayer.create(this, resID);
    }
  }

  public void adelante (View v){
    for (int i=0; i<6; i++){
      tv.setText("Sonido " + i);
      mp[i].start();
      do { // ESPERAMOS A QUE EL SONIDO ACABE.
      } while (mp[i].isPlaying());
    }
  }

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
  }
} 
```

我正在尝试播放 3 到 5 秒的 6 种声音，我想`textView1`在 for{} 的每个循环中进行更新，但`textView1`只更新为“Sonido 5”。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:22:11.933

首先，使用 do{}while() 循环等待音乐结束是非常危险的，因为它什么都不做就收获资源，所以，你必须以异步的方式考虑它。

我建议您将播放器作为 AsyncTask（必须！在 Android 编程中）进行管理，其中，在“onPreExecute()”处，您可以刷新电视 TextView，并在完成后退出异步任务，触发新的播放。

另一种选择是使用“监听器”来等待播放结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:15:40.907

adelante 将阻塞 UI 线程。在完成所有任务之前，UI 不会更新。所以你只能看到最终的结果。请使用 Handler 和线程来更新 UI。

你应该用 AsyncTask 来做：

```
MySyncTask extends AsyncTask<Void, Integer, Void> {
      protected Long doInBackground(URL... urls) {
          for (int i=0; i<6; i++){
             publishProgress(i);
             mp[i].start();

             do { // ESPERAMOS A QUE EL SONIDO ACABE.
             } while (mp[i].isPlaying());
         }
    }

    protected void onProgressUpdate(Integer... progress) {
         tv.setText("xxx play:" + i);
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T11:34:30.103

您可以使用任何循环 ,,,... 但如果它与时间有关。即你想播放声音几秒钟你的 for 循环将获得最后一个即最近更新的 i 值...所以我想获得每一秒的更新值你必须使用 Handler() 来更新每个每秒值一次......这就是为什么你在 for 循环中获得 i 的最新值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T05:59:24.610

```
for (int i=0; i<6; i++) 
```

你从 0 到 5。如果你想去 1-6，你需要做`tv.setText("Sonido " + (i+1));`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T06:13:57.947

不要在`onCreate()`. 您应该只使用`onCreate()`最少的必要条件来设置活动。

`onCreate()`在这种情况下，UI 甚至还没有构建，因此当您最终允许返回和构建 UI 的活动时，任何更新都只会显示最后一个。

使用`onResume()`或以后。

# cucumber - Cucumber/Capybara - 如何根据布尔变量标记测试用例通过或失败

> ID：16052623
> 
> 赞同：0
> 
> 时间：2013-04-17T05:57:42.393
> 
> 标签：cucumber, range, capybara

在一个黄瓜测试用例中，我在一个数组中有一组可接受的预期值，表示可以接受。而得到的实际结果在 actualResult 变量中。如果任何可接受的值在实际结果-2 到实际结果+2 的范围内，我希望测试用例通过。

简而言之，我想在下面的执行中得到正确的结果，因为可接受的有 6，它在 2 到 7 的范围内

```
irb(main):087:0> acceptable= [1,6,9]
=> [1, 6, 9]
irb(main):088:0> result = 2..7
=> 2..7
irb(main):089:0> acceptable.include?(result)
=> false 
```

我想到了一个间接解决方案，我将在其中执行以下操作-

```
acceptable.each do |value|
begin
  if (value.should be_within(delta).of(result))
    matches? = true
  end
rescue
  matches? = false
end 
```

但是在这里我想知道如何告诉 cucumber 如果`matches? == true`通过了这个测试用例而不进一步执行循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:28:02.437

您可以使用`break`来终止循环或块。这是[rdoc](http://ruby-doc.org/docs/keywords/1.9/Object.html#method-i-break)的链接。

# ruby-on-rails - 将 Amazon Simple Notification 服务 SNS 与 ruby 结合使用

> ID：16052626
> 
> 赞同：6
> 
> 时间：2013-04-17T05:58:01.400
> 
> 标签：ruby-on-rails, ruby, amazon-sns

我需要从基于 ruby​​ 的应用程序中使用 Amazon Simple Notification Service，但不知道从哪里开始。

你对从哪里开始有什么建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T06:38:10.740

要开始使用亚马逊服务，请按照以下步骤操作：

*   [在Amazon AWS](https://aws.amazon.com/)中创建帐户。
*   导航到 SNS 服务并创建主题
*   安装亚马逊 aws sdk gem [aws-sdk-ruby](https://github.com/aws/aws-sdk-ruby)。并打开irb
*   这是调用 SNS 服务的示例代码

    ```
    required "aws-sdk"

    Aws.config.update({region: 'your aws region',credentials:
    Aws::Credentials.new('aws access key', 'aws secret key')})

    c = Aws::SNS::Client.new(region: 'your aws region')

    c.operation_names #shows you list of operation you can do.

    c.publish({topic_arn: 'arn', message: "my message"}) 
    ```

希望这会对你有所帮助。这里有一些更有用的链接：

*   [http://docs.aws.amazon.com/sdkforruby/api/Aws/SNS.html](http://docs.aws.amazon.com/sdkforruby/api/Aws/SNS.html)
*   [http://aws.amazon.com/sns/details/](http://aws.amazon.com/sns/details/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:38:00.020

查看[适用于 Ruby 的 Amazon 开发工具包](http://aws.amazon.com/sdkforruby/)。SNS 是支持的服务之一。

# javascript - 想要将 6 个圆放置在数学上精确的几何形状中，但它们没有正确对齐

> ID：16052630
> 
> 赞同：1
> 
> 时间：2013-04-17T05:58:12.557
> 
> 标签：javascript, math, canvas, geometry, kineticjs

相关live-javascript/jsbin：http: [//jsbin.com/ekuyam/2/edit](http://jsbin.com/ekuyam/2/edit)

我基本上只是在相对于画布中心的六边形中生成点，然后在六边形的每个点上绘制圆圈，但仔细观察这些圆圈并没有正确对齐，除非你使用大圆圈，否则它实际上并不可见。

当我使用小圆圈时，它们似乎非常准确地放置在画布上，如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/5z81A.png)

但是通过使用更大的圆圈（有点像放大）进行仔细检查，发现数学中存在一些不准确之处，这可以从这里不需要的空间/区域看出： ![在此处输入图像描述](https://i.stack.imgur.com/2IkjV.png)

线条应该完美对齐，但我得到了一些不需要的空间。为什么会这样，我该如何修改？

代码：

```
function hexagon(w, h, p) {
  var points = 6;
  var width = w;
  var height = h;
  var angle = ((2 * Math.PI) / points);
  var hexagon = [];

  for (i = 0; i < points; i++) {
    hexagon.push({
      x: width * Math.sin(angle * i) + p.x, 
      y: height * Math.cos(angle * i) + p.y
    })
  }

  return hexagon
}

var stage = new Kinetic.Stage({
  container: "container",
  width: 600,
  height: 600
});

var layer = new Kinetic.Layer();
var group = new Kinetic.Group({x: 600/2, y: 600/2, draggable: false});

var radius = 1000;
var s = new Kinetic.Circle({
  radius: radius,
  stroke: 'black',
  strokeWidth: 1,
  draggable: true
});
group.add(s);

var hex_points = hexagon(radius, radius, {x: 600/2, y: 600/2});
for (p in hex_points) {
  var s = new Kinetic.Circle({
    radius: radius,
    stroke: 'black',
    strokeWidth: 1,
    draggable: true
  });
  s.setPosition({x: hex_points[p].x - 600/2, y: hex_points[p].y - 600/2})
  group.add(s);
}

layer.add(group);
stage.add(layer); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:11:34.060

这是因为 sin(2 * Math.PI) / 6 = sqrt(3)/2 这是一个无理数。然而，浮点数只能表示有理数（实际上只有分母是 2 的幂）。因此，您总是会有一些舍入误差。如果你把圆圈放大到足够大，那么这个舍入误差就会变得可见。为了防止这种情况，您需要限制放大倍数。

如果您绝对必须绕过它，最简单的方法是提高算术精度。

另一种方法是使用公式 (x-x_0)^2 + (y-y_0)^2 = R^2 并在不使用三角函数的情况下围绕已知交点进行局部求解。更具体地说，函数 f(x,y):= (x-x_0)^2+(y-y_0)^2除 x=x_0 和 y=y_0 外，处处满足[反函数定理的条件。](http://en.wikipedia.org/wiki/Inverse_function_theorem)请注意，圆圈示例包含在有关[隐函数定理](http://en.wikipedia.org/wiki/Implicit_function_theorem)的另一篇维基百科文章中。手头的例子是一个全纯函数，因此局部逆也将是全纯的。[特别是它通过泰勒级数展开](http://en.wikipedia.org/wiki/Taylor_series)具有良好的局部近似。. 这种方法的要点是您不要围绕中心绘制圆圈，而是“通过所需的交点”绘制它。因此，您可以强制它“相交”这一点。但请记住，他的“交点”只是一个近似值，因为浮点数永远不会正确表示 sqrt(3) 或其有理倍数。

现在该怎么办？我会做什么：一旦放大到屏幕上只有一个交点，我会通过替换 R 来作弊，使得 R^2 = (x_i-x_0)^2+(y_i-y_0)^2 where (x_i , y_i) 是所需的交点，“(x_0,y_0)”是圆的中心。然后我会继续使用标准的圆形公式。

一个非常简单的方法是确保圆线也被缩放。因此，对于高放大倍率，不精确将隐藏在圆圈的“厚”周长下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-17T08:22:02.953

浮点数存储和三角函数都不是造成如此大误差的原因。

更有可能的是，您使用的圆绘图程序实际上是用 4 个贝塞尔样条曲线逼近一个圆。这是绘图库中非常非常常见的速度优化。您几乎完美地计算了中心，但圆圈根本没有完美绘制。

参见例如：[http ://spencermortensen.com/articles/bezier-circle/](http://spencermortensen.com/articles/bezier-circle/)

# drupal-6 - 如何在其他机器上配置在 drupal 中创建的站点以在另一台机器的 localhost 上运行

> ID：16052632
> 
> 赞同：-1
> 
> 时间：2013-04-17T05:58:18.043
> 
> 标签：drupal-6

我将在某人在 drupal 中创建的站点上工作，并且我想通过 localhost 在我的机器上运行该站点。

请帮助我

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:02:17.097

要在本地机器上运行 Drupal 站点，您需要以下内容：

1.  Drupal 数据库的导出文件，您可以将其导入 phpymyadmin。
2.  根据您的操作系统，您将放置在 Xampp 或 wamp 或 Lamp 中的所有 Drupal 文件转储。
3.  然后更新 sitename/sites/default 文件夹中的 settings.php 文件，并更改 mysql 的数据库名称和用户名和密码。
4.  如果有 .htaccess 文件，还要检查根文件夹。如果它已经在那里，那么它很好，否则你可以从新的 drupal 下载中复制它并放入你的根文件夹中。

最后在浏览器中输入 localhost/site_name 就可以开始了。

# java - 休眠和外键约束

> ID：16052641
> 
> 赞同：0
> 
> 时间：2013-04-17T05:58:59.547
> 
> 标签：java, hibernate, foreign-keys, derby

我有几个 Hibernate 映射文件，其中包含引用其他对象的多对多和多对一集。我正在尝试实现一个可以删除对象的后台方案，但我经常遇到 java.sql.SQLIntegrityConstraintViolationException ...违反外键 ...该语句已回滚。

我想知道我需要做什么才能删除这些条目。这是我的一个 XML 映射文件的示例

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
    <hibernate-mapping package="com.floreantpos.model">
      <class lazy="false" name="com.floreantpos.model.MenuItem" optimistic-lock="version" table="MENU_ITEM">
        <id column="ID" name="id" type="java.lang.Integer">
          <generator class="assigned"/>
        </id>
        <version column="MODIFIED_TIME" name="modifiedTime" type="timestamp"/>
        <property column="NAME" length="30" name="name" not-null="true" type="java.lang.String"/>
        <property column="PRICE" length="52" name="price" not-null="true" type="java.lang.Double"/>    
        <property column="PLU" length="6" name="plu" not-null="false" type="java.lang.Integer"/>
        <property column="VIEW_ORDER_VALUE" name="viewOrderValue" type="java.lang.Integer"/>
        <property column="BUTTON_COLOR" name="buttonColor" type="java.lang.Integer"/>
        <property column="NEXT_SCREEN" length="30" name="nextScreen" type="java.lang.String"/>
        <property column="VISIBLE" name="visible" type="java.lang.Boolean">
          <meta attribute="defaultValue">true</meta>
        </property>
        <!-- uni-directional many-to-one association to FoodGroup -->
        <many-to-one class="com.floreantpos.model.MenuGroup" name="parent">
          <column name="GROUP_ID"/>
        </many-to-one>
        <list cascade="all" inverse="false" lazy="true" name="shifts" table="MENUITEM_SHIFT">
          <key column="MENUITEM_ID"/>
          <list-index column="SHIFT_ORDER"/>
          <one-to-many class="MenuItemShift"/>
        </list>
        <list cascade="all" inverse="false" lazy="true" name="menuItemModiferGroups">
          <key column="MENUITEM_MODIFIERGROUP_ID"/>
          <list-index column="GR_ORDER"/>
          <one-to-many class="MenuItemModifierGroup"/>
        </list>
        <!-- uni-directional many-to-one association to Tax -->
        <many-to-one class="com.floreantpos.model.Tax" lazy="false" name="tax">
          <column name="TAX_ID"/>
        </many-to-one>
        <set cascade="all" lazy="false" name="menuItemModifiers" table="MENUITEM_MENUMODIFIERS">
          <key column="MENU_ITEM_ID"/>
          <many-to-many class="com.floreantpos.model.MenuModifier" column="MENU_MODIFIER_ID"/>
        </set>
      </class>
    </hibernate-mapping> 
```

我看过有关 @OnDelete(...) 注释的帖子，但这似乎不适合 xml 映射方案。在删除方法中，我目前正在遍历包含外键约束的任何集合并删除每个单独的对象，但我仍然没有删除的运气。

# java - 未检测到 int 数组中的所有重复项

> ID：16052643
> 
> 赞同：0
> 
> 时间：2013-04-17T05:59:03.190
> 
> 标签：java

在对整数数组进行排序后，`"arr"`我尝试识别数组中的重复项。它对数组的一部分执行此操作，但不会识别整个数组中的重复项。我很感激帮助。这是我的代码：

```
import java.util.*;

public class Ex24 {
public static void main(String[] args) {
    int i, n = 100;
    Integer[] arr = Collections.nCopies(n, 0).toArray(new Integer[0]);
  //  int[] array = {0};
    for (int j = 0; j < n ; j++){
        arr[j] = (int) (Math.random() * 365 + 1);
    //    System.out.print(j + "   " + arr[j] + "\n");
    }
        Arrays.sort(arr);  //sort the arr
      //  String arrq = (Arrays.toString(arr));
        System.out.println("\n");

        Duplicate(arr, n);
        } 
        static void Duplicate(Integer[] arr, int n) {
           int j = 0;
           for (int i = 0; i < n-1 ; i++) {

           if (arr[i] != arr[i+1]) {
                System.out.println(" at i   (" + i + ")    print arr[i] " + arr[i]); 
           }
                    else {
                    j = j +1;
                 System.out.println("  j =  " + j + "  at i (" + i + ")  arr[i] is double at date  " + arr[i]); 
           }                   
           }
        }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:02:03.277

由于您正在比较整数对象，因此而不是：

```
if (arr[i] != arr[i+1]) 
```

做这个：

```
if (!arr[i].equals(arr[i+1])) 
```

请理解`!=`or`==`运算符用于比较原语或用于比较对象引用，而不是比较实际的对象值。

顺便说一句，您的代码需要一些重构。如果您真的想查找重复项，有一些更好的方法可以做到这一点，例如使用`java.util.Set`而不是对数组进行排序来查找重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:04:09.320

问题是您正在`Integer`使用`==`. （或者更确切地说，`!=`。）

当操作数是引用类型表达式时， `==`and`!=`运算符将始终比较*引用*- 它们比较两个操作数是否是对完全相同对象的引用，而不是它们是否引用相等的对象。

Java 中的装箱保证为`Integer`-127 到 127 范围内的值使用对象缓存，这就是为什么您看到它适用于*某些*值的原因。除此之外（或某些点¹），您将看到不同的`Integer`对象，当简单地通过引用进行比较时，这些对象不会相等。您想使用以下方法比较*值*相等性`equals`：

```
if (!arr[i].equals(arr[i+1])) 
```

* * *

¹确切的边界是特定于实现的：某些实现可能有更大的缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:17:06.663

您将对象与`==`错误进行比较。

```
if (arr[i] != arr[i+1]) { 
```

使用 Integer 解决此特定问题的两种方法：

1.

```
if (!arr[i].equals(arr[i+1])) { 
```

2.

```
if (arr[i].intValue() != arr[i+1].intValue()) { 
```

# jclouds - JClouds：是否有一种可移植的方式来创建一组节点，从而智能地将节点分布在所有位置？

> ID：16052644
> 
> 赞同：0
> 
> 时间：2013-04-17T05:59:09.330
> 
> 标签：jclouds

我试图找出是否有办法创建一组节点，以便它们分布在所有位置：

```
//It would be helpful if there was a parameter to the function call that would give
//a hint to allocate nodes across all AZs or an option through the template 
groupNodes = computeService.createNodesInGroup("mygroup", 2, template); 
```

对于云开发人员来说，这将是一个很好的功能，可以确保他在每个 AZ 中都有一些节点，以使他的应用程序即使在单个 AZ 出现故障的情况下也能继续运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:12:13.150

简短的回答：没有。

虽然我明白你在说什么。实际上，您通常需要知道您的实例从哪里开始，以便您可以获取位置和 ID 以便稍后引用它们。如果您想进一步讨论，我邀请您加入[jclouds-dev](https://groups.google.com/forum/?fromgroups#!forum/jclouds-dev)小组。

# php - 选择命令并加入问题

> ID：16052654
> 
> 赞同：2
> 
> 时间：2013-04-17T06:00:05.150
> 
> 标签：php, select, join, login

我有两张桌子

`1: USERS`

`user_id | user_state | user_email`

`2: CONTACTS`

`contact_id | contact_name | contact_state | contact_email | contact_info`

我想要做的是让选择回显“user_state”（即登录用户状态）等于contact_state的所有“CONTACTS”数据。

```
"SELECT * FROM contacts
INNER JOIN users
ON contact_state = ".$row_userinfo['user_state']."
WHERE contact_state = ".$row_userinfo["user_state"]." 
ORDER BY contact_name $limit");
?> 
```

我遇到的问题是它不仅显示与登录用户状态（user_state）匹配的数据

并且使用上面的代码（我不确定以我想要的方式工作是否正确）提出“'where子句'中的“未知列'......'”

希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:04:31.607

试试这个查询..

```
("SELECT contacts.*
FROM users, contacts
WHERE users.user_state = contacts.contact_state AND user_id = '".$_SESSION['id']."'"); 
```

这`$_SESSION['id']`是您当前用户的登录 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:02:12.637

检查`JOIN`条款中的条件

```
("SELECT * FROM contacts
INNER JOIN users ON contact_state = user_state
WHERE contact_state = ".$row_userinfo["user_state"]." 
ORDER BY contact_name $limit"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:02:40.873

只需将您的 ON 子句更改为

```
SELECT * FROM `users` a
JOIN `contacts` b
ON a.`user_state` = b.`contact_state`
WHERE a.`user_state` = '".$row_userinfo["user_state"]."' 
ORDER BY b.`contact_name` $limit" 
```

这是因为您正在比较两个表，并且需要声明选择两个表的哪些字段进行比较

**请注意**，您并没有指明要订购的任何东西，`ASC`所以`DESC`我假设您已经将其存储在`$limit`变量中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T06:04:30.847

尝试这个

```
"SELECT c.* FROM contacts c
 JOIN users u
ON c.contact_state = u.user_state
WHERE c.contact_state = ".$row_userinfo["user_state"]." 
ORDER BY c.contact_name $limit" 
```

# java - NetBeans 默认 Jlist 将其更改为 arraylist

> ID：16052656
> 
> 赞同：0
> 
> 时间：2013-04-17T06:00:08.677
> 
> 标签：java, swing, netbeans, arraylist, jlist

基本上，我有来自 NetBeans 的 GUI Builder 的默认创建者生成以下代码：

```
IPAddressList = new javax.swing.JList();

IPAddressList.setModel(new javax.swing.AbstractListModel() {
    String[] strings = { "Item 1", "Item 2", "Item 3", "Item 4", "Item 5" };
    public int getSize() { return strings.length; }
    public Object getElementAt(int i) { return strings[i]; }
});

AddressList.setViewportView(IPAddressList); 
```

我想要将其更改为有一个 ArrayList 而不是一个向量，我可以在其中通过按钮使用该 ArrayList 的添加和删除功能。我是 GUI 世界的新手，我一直在尝试几种不同的方法（我不知道在哪里放置 DefaultListModel 以使其正常工作）。请尽可能具体地回答这个问题。

我真正需要的是一个 Jlist 代码，我可以将此代码更改为具有 ArrayList 的 ArrayList，如果我说 IPAddressList.arraylist.add() 它将向该 Jlist 内的 ArrayList 添加一些内容并相应地更新 Jlist。删除也是一样。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:23:35.293

你可以这样做：

*方法1（可变）：*

```
List<String> myList = 
      new ArrayList<>(Arrays.asList("Item 1", 
                                    "Item 2", 
                                    "Item 3", 
                                    "Item 4", 
                                    "Item 5"));

DefaultListModel model = new DefaultListModel();
JList myJList = new JList(model); 
```

更新：

```
model.clear();
for (String item : myList) {
   model.addElement(item);
} 
```

*方法2（不可变）：*

```
List<String> myList = ...    
JList myJList = new JList(myList.toArray(new String[myList.size()])); 
```

诚然，第二种方法没有使用`DefaultListModel`，但这就是它被包含在内的原因：

对于拥有大约 200 个或更多项目的模型，使用 DefaultListModel 的[addElement](http://docs.oracle.com/javase/7/docs/api/javax/swing/DefaultListModel.html#addElement%28java.lang.Object%29)相对较慢。将数组传递`Object`给[JList(E[] listData)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#JList%28java.lang.Object%5B%5D%29)比使用 a 单独添加元素更快，`DefaultListModel`因为新元素`AbstractListModel`是基于`List`元素创建的。此[错误报告](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=20aad6f1c0ca847e78f661c8e7969?bug_id=4121430)中对此进行了讨论并提供了替代方案。

# android - 如何自动获取gps位置android？

> ID：16052658
> 
> 赞同：0
> 
> 时间：2013-04-17T06:00:21.470
> 
> 标签：android, gps, background-service

我正在使用塔ID和gps获取gps位置，我可以获取当前位置并在toast中显示它我必须每五分钟自动dislpay它并在android设备上的地图中显示它有人可以帮助我吗？我的代码是

```
public void onClick(View arg0) {        
                // create class object
                gps = new GPSTracker(AndroidGPSTrackingActivity.this);

                // check if GPS enabled     
                if(gps.canGetLocation()){

                    double latitude = gps.getLatitude();
                    double longitude = gps.getLongitude();

                    // \n is for new line
                    Toast.makeText(getApplicationContext(), "Your Location is - \nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_LONG).show();    
                }else{
                    Toast.makeText(getApplicationContext(),"cant get location", 1000 ).show(); 
                    // GPS or Network is not enabled
                    // Ask user to enable GPS/network in settings
                    gps.showSettingsAlert();
                }

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:13:29.443

```
 thread1=new Thread(new Runnable() {

            public void run() {
                // TODO Auto-generated method stub
                while (true) {
                    try {
                        Thread.sleep(1000*60*5);
                        mHandler.post(new Runnable() {

                            public void run() {
                                // TODO Auto-generated method stub
                                // Write your code here to update the UI.
                       });
                    } catch (Exception e) {
                        // TODO: handle exception
                    }
                }
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:01:37.837

查看 LocationManager.requestLocationUpdates。当位置提供程序更新时，它将自动更新您。您可以在该 API 中将其最大频率设置为 5 分钟。

# android - Android：摆脱灰条

> ID：16052661
> 
> 赞同：0
> 
> 时间：2013-04-17T06:00:33.597
> 
> 标签：android, android-layout, background-image

如何摆脱下图中的灰色背景？我指的是出现在标题“MergeLayout”后面的背景。基本上我想在那里设置我自己的背景，比如标题背景。还有没有办法设置页脚背景？如果不能，我至少可以拉伸桥图像以填满整个屏幕吗？

![在此处输入图像描述](https://i.stack.imgur.com/la7yd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:06:56.540

在 androidmanifest.xml 中，您可能选择了一种样式。

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" > 
```

在 res/values/ 中找到样式

样式.xml

```
<resources>

    <style name="AppTheme" parent="android:Theme.Black.NoTitleBar" />

</resources> 
```

这将在整个应用程序中摆脱它。无需一遍又一遍地重写代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:04:49.290

该栏是标题栏。添加

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

在 setContentView 之前的 onCreate 中摆脱它。

您可以通过在 xml 底部放置一些内容来设置页脚。使您的主布局成为RelativeLayout，使您的背景图像高度为fill_parent，并使其layout_above您的页脚，并使您的页脚layout_alignParentBottom = true

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:07:43.770

可能的解决方案

1.  要放置您自己的设计而不是灰色条，您可以创建自定义标题栏。看[这里的例子](http://www.londatiga.net/it/how-to-create-custom-window-title-in-android/)

2.  或者您可以使用清单中的以下内容删除标题栏

    ```
     android:theme="@android:style/Theme.NoTitleBar" 
    ```

3.  如果你想在图像上显示标题，你可以简单地使用 FrameLayout 在图像上放置一个文本视图。

# javascript - 创建可注入类（构造函数）

> ID：16052664
> 
> 赞同：18
> 
> 时间：2013-04-17T06:01:01.090
> 
> 标签：javascript, angularjs

我是 AngularJS 新手，我刚刚开始了解`factory`,`service`和`controller`. 据我了解， a`factory`用于返回可以注入的“值对象”。我见过的大多数例子都是这样的：

```
angular.module('module.factories', function() {
    factory('FactoryObject', function() {
        return {
            someFunction: function(someParam) {};
            someOtherFunction: function(someOtherParam) {});
        };
    });
}); 
```

在我的`controller`中，我希望能够使用这个对象，但我想在控制器中初始化/实例化它，因为它可以根据控制器中的事件/动作重新初始化。因此，我想知道是否可以在工厂中返回构造函数？

```
angular.module('module.factories', function() {
    factory('FactoryObject', function() {

        function FactoryObject(initParam) {
        }

        FactoryObject.prototype.someFunction = function() {};

        return FactoryObject;

    });
}); 
```

这是一个适合角度工厂的模式吗？还是将工厂用于这样的自定义对象只是“矫枉过正”？我应该将它包含在库 js 文件中并从那里引用它吗？将它放在工厂的一个好处是它很容易在测试中模拟它，因为它会被注入到使用它的地方。Angular 中是否有其他机制可以替代使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-14T00:07:41.093

我有同样的问题。这是我实现的：

```
angular.module('foo', [])
.factory('Foo', ['$http', function($http) {
  return function(a, b) {
    this.arr = [];
    this.a = a;
    this.b = b;
    this.random = Math.floor(Math.random()*11);

    this.someFunc = function(c) {
      this.arr.push(c);
    };
  };
}]); 
```

现在，我可以这样做：

```
var f1 = new Foo('A', 'B');
f1.random;  // i.e. 0
f1.someFunc('z');  // only affects f1.arr
var f2 = new Foo('C', 'D');
f2.random;  // i.e. 8
f2.someFunc('y');  // only affects f2.arr 
```

使事情更加模块化。希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-18T06:19:39.603

你说得对，这是创建可注入“类”（构造函数）的方法。但是，`factory`只有当您需要注入其他内容以供您的班级使用时，才需要使用：

```
.factory('Class', ['$q', function ($q) {
    function Class () {}
    Class.prototype = {
        constructor: Class,
        doSomeAsyncAction: function () {
            return $q(function (resolve, reject) {
                // ...
            });
        },
        // ...
    };
    return Class;
}) 
```

如果您正在创建一个完全独立的类（例如某些数据结构），您可以使用`constant`，以便您的类即使在服务提供者中也可用：

```
(function (undefined) {
    function Class () {}
    Class.prototype = { ... };
    angular.module(...)
        .constant('Class', Class);
})(); 
```

* * *

*作为旁注，使用`provider`不会帮助你。提供者服务于完全不同的目的，并且（除其他外）返回一个工厂函数，然后在第一次请求注入时_once_使用该函数来创建服务的单个实例。提供程序用于让您在应用程序构建的 _config 阶段_ 配置单个服务实例（[请参阅文档](https://code.angularjs.org/1.3.6/docs/guide/providers)）。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-18T06:05:54.753

I had the same question. I found a terrific article on how to setup Object-oriented AngularJS Services. [Here's the article](http://blog.revolunet.com/blog/2014/02/14/angularjs-services-inheritance/). Pay attention to the note about using Factories and not Services. It also covers extending your objects. I found it super easy to setup and it fit perfectly with Angular while keeping the Javascript simple and straight forward.

For Factory services which are singletons and do not need to be instantiated I use the object literal approach which has some performance advantages.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-22T18:33:55.723

这是我解决问题的方法：

```
(function (myModule) {
    'use strict';

    myModule.service('myService', [
        function() {
            var serivce = this;
            var obj = null;

            service.func1 = function(a, b) {

            }

            service.func2 = function(c, d) {
                . . .
                return something;
            }

            var constructor = function(myObj) {
                obj = myObj;

                return service;
            }

            return constructor;
        }
    ]);
}(angular.module("myModule")))

(function(myModule) {
    'use strict';

    myModule.controller('myController', [
        '$scope', 'myService', function($scope, myService) {

            var service = myService($scope.someObj);

            $scope.someOtherObj = service.func2($scope.a, $scope.b);

        }
    ]);
}(angular.module("myModule"))) 
```

服务返回的唯一内容是构造函数，然后服务返回服务的其余部分。

# node.js - 处理 HTTP POST 中的错误

> ID：16052674
> 
> 赞同：0
> 
> 时间：2013-04-17T06:01:50.853
> 
> 标签：node.js, http, post

我有点击`POST`URL 并接收数据的代码。下面是代码：

```
var postdata="{u:1}";
var options = {
                 host: 10.0.0.1,
                 port: 80,
                 path: /ddd,
                 method: post
            };
var reqClient = http.request(options, function(res)   
            {

                  var data = '';
                  res.setEncoding('utf8'); 
            });
 //setting the request contenet type to application/json
            reqClient.setHeader('Content-Type','application/json');
            //Posts the data to the Server
            reqClient.write(postData);
            reqClient.end();
reqClient.on('response', function (res) 
                {   
                      var data = '';
                      res.on('data', function (chunk) 
                      {   
                            data+=chunk;                            
                      });
res.on('end',function(){
//Perform some functions
});
}).on('error', function(){
                        //error handler
                    }); ; 
```

我必须处理一个错误，比如当服务器无法访问客户端 URL 时。我可以按照上述方法吗？我被困在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:06:37.193

您可能希望为错误事件添加另一个事件侦听器，该事件在[Node.js HTTP 文档](http://nodejs.org/api/http.html#http_http_request_options_callback)中有详细说明。

```
req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
}); 
```

# .htaccess - 无法取消 htaccess 更改

> ID：16052675
> 
> 赞同：1
> 
> 时间：2013-04-17T06:01:55.687
> 
> 标签：.htaccess, redirect, dns

我尝试将 301 重定向添加到我的网站，因此我在 /www/ 文件夹中的 htaccess 文件中添加了几行。现在 domain.com 总是被重定向到 domain.com/www/ （这不起作用），即使我从 htaccess 文件中删除了这些行。

这是我使用并放弃的代码：

```
Options -Indexes
Options -Multiviews
Options +FollowSymLinks
SetEnv REGISTER_GLOBALS 0
SetEnv PHP_VER 5_3
RewriteEngine On
RewriteCond %{HTTP_HOST} ^domain.com [NC]
RewriteRule ^(.*) http://www.domain.com/$1 [L,R=301,QSA] 
```

如何取消这些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:42:09.353

您的浏览器可能仍然缓存了这些重定向，因为它是 301（永久）重定向。尝试重新启动浏览器。

# java - Android在使用SharedPreferences时抛出奇怪的异常

> ID：16052685
> 
> 赞同：0
> 
> 时间：2013-04-17T06:02:35.687
> 
> 标签：java, android

有人可以帮忙吗，我一直在努力处理这段 android 代码。它不断抛出异常。

```
 try
    {
        SharedPreferences sharedPref = PreferenceManager.getDefaultSharedPreferences(getBaseContext());//getPreferences(Context.MODE_PRIVATE);
        String str = sharedPref.getString(MainActivity.APP_DATA_KEY, "");
        _appData = FemChoiceAppData.deserialize(str);

        if (_appData == null)
            throw new Exception();
    } catch (Exception e)
    {
        Calendar cl = Calendar.getInstance(TimeZone.getDefault());
        int year = cl.get(Calendar.YEAR);
        int month = cl.get(Calendar.MONTH);
        int day = cl.get(Calendar.DAY_OF_MONTH);
        cl.set(year, month, day, 0, 0, 0);

        _appData = new FemChoiceAppData();
        _appData.CurrentMonth = Calendar.getInstance(TimeZone.getDefault());
        _appData.CurrentMonth.set(year, month, 1, 0, 0, 0);

        _appData.CurrentSettings = new FemChoiceSettings(cl.getTime(), 26, 6);
    }

    yearTV.setText(_appData.CurrentSettings.getStartDate().getYear());
    monthTV.setText(_appData.CurrentSettings.getStartDate().getMonth());
    dayTV.setText(_appData.CurrentSettings.getStartDate().getDay()); 
```

这是它抛出的异常

```
 04-16 22:54:19.251: E/AndroidRuntime(2063): FATAL EXCEPTION: main
    04-16 22:54:19.251: E/AndroidRuntime(2063): java.lang.RuntimeException: Unable to start activity ComponentInfo{com../com...Settings}: android.content.res.Resources$NotFoundException: String resource ID #0x71
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at android.os.Handler.dispatchMessage(Handler.java:99)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at android.os.Looper.loop(Looper.java:130)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at android.app.ActivityThread.main(ActivityThread.java:3687)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at java.lang.reflect.Method.invokeNative(Native Method)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at java.lang.reflect.Method.invoke(Method.java:507)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at dalvik.system.NativeStart.main(Native Method)
    04-16 22:54:19.251: E/AndroidRuntime(2063): Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x71
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at android.content.res.Resources.getText(Resources.java:201)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at android.widget.TextView.setText(TextView.java:2923)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at com...Settings.loadAppData(Settings.java:92)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at com...Settings.setup(Settings.java:64)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at com...Settings.onStart(Settings.java:49)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at android.app.Activity.performStart(Activity.java:3791)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1624)
    04-16 22:54:19.251: E/AndroidRuntime(2063):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:06:49.437

您将文本设置为整数。这使它认为你在你的 strings.xml 文件中传递了资源 ID。您想调用`yearTV.setText(String.valueOf(_appData.CurrentSettings.getStartDate().getYear()));`，因此您将函数传递给字符串并将其解释为文字。对所有 setText 调用执行此操作。e

# python - 验证功能打印以前的输入而不是当前输入

> ID：16052688
> 
> 赞同：3
> 
> 时间：2013-04-17T06:02:41.933
> 
> 标签：python, python-3.x, validation, tkinter, tkinter-entry

这是我的代码：

```
root = Tk()

def mytest():
    var = entry.get()
    print(var)
    return True

entry = Entry(root, validate="key", validatecommand=mytest)
entry.pack()

root.mainloop() 
```

我试图验证用户输入的每个字母。

问题是当我使用该`get()`方法获取当前字母时，我得到的字母是前一个输入的。

例如，假设我正在输入单词`"abc"`

*   当我第一次输入`"a"`时，它不会打印任何内容。
*   当我添加`"b"`时，它会打印`"a"`
*   当我继续输入`"c"`时，它会打印`"ab"`

为什么会出现这种奇怪的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T11:02:10.937

它并没有得到所有东西，因为这正是 validatecommand 的工作方式——它在插入文本*之前*调用一个函数，如果字符无效，则让您有机会否决插入。

您可以让 Tkinter 传入更改前的值、接受更改时的值、插入的文本以及其他一些帮助您进行验证的东西。例如，请参阅此答案：[https ://stackoverflow.com/a/4140988/7432](https://stackoverflow.com/a/4140988/7432)

# math - 如何找到两条三次贝塞尔曲线之间的交点

> ID：16052689
> 
> 赞同：2
> 
> 时间：2013-04-17T06:02:43.140
> 
> 标签：math, svg, bezier, line-intersection

我有两条三次贝塞尔曲线，

**曲线1：-** 第一个锚点（a1x，a1y），第一个控制点（c1x，c1y），第二个控制点（c2x，c2y），第二个锚点（a2x，a2y）

**曲线2：-** 第一个锚点（a3x，a3y），第一个控制点（c2x，c3y），第二个控制点（c4x，c4y），第二个锚点（a4x，a4y）

现在我想找到这两条贝塞尔曲线之间的交点；

怎么做？任何带有算法的参考文档都会对我有所帮助；

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T11:01:20.843

找到贝塞尔曲线交点有两种主要方法：

1.  递归细分利用贝塞尔曲线的凸包特性，通常检查其曲线段边界框的交点。

[来自《Graphics Gems IV》一书中的代码，带有一些文字描述](http://web.archive.org/web/20130613230901/http://users.soe.ucsc.edu/~pang/160/f98/Gems/GemsIV/curve_isect/Bezier.cc)

2.  两个三次方程组的数值解。它导致一个 9 阶多项式方程，并且可能有 9 个实根（两条 S 形曲线的情况）。请注意，该解在数值上是不稳定的。

[JS 代码](http://www.kevlindev.com/gui/math/intersection/Intersection.js)和[交互式演示](http://www.kevlindev.com/geometry/2D/intersections/intersect_bezier3_bezier3.svg) 我认为 C++ 代码可能在[Geometric Tools](http://www.geometrictools.com/index.html) WildMagic 库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T06:53:54.120

三次贝塞尔曲线只是一个三次多项式方程。如果你想找到两个三次相交的时间，那么你想找到两个三次相等的时间，即

```
a 1 x 3 + b 1 x 2 + c 1 x + d 1 = a 2 x 3 + b 2 x 2 + c 2 x + d 2

```

那么这和求三次方程的根是一样的

```
(a 1 - a 2 )x 3 + (b 1 - b 2 )x 2 + (c 1 - c 2 )x + (d 1 - d 2 ) = 0

```

像这样的三次方程可以解析求解，参见例如[Cardano 的方法](http://en.wikipedia.org/wiki/Cubic_function#Cardano.27s_method)。或者，可以使用[Newton-Raphson等方法迭代解决方案。](https://en.wikipedia.org/wiki/Newton%27s_method)但请注意，三次方最多可以有 3 个点等于 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:43:39.183

我的建议可能不是很有效，但它可以工作。您可以尝试比较两条曲线的点之间的距离，最近的两个点将是您的交叉“点”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-01-31T14:33:02.040

如果允许某种近似，您可以将贝塞尔曲线转换为许多小直线，然后计算从两条曲线生成的它们对之间的交点。这是一个更容易解决的问题，因为您只需求解线性方程，并且可以为您的用例提供足够的性能和准确性。

# ios - 获取与线IOS相交的所有视图

> ID：16052696
> 
> 赞同：2
> 
> 时间：2013-04-17T06:03:21.570
> 
> 标签：ios, objective-c, line, intersection

我有一个小（30X30 大小）UIView 的网格，我通过使用以下代码在屏幕上点击两个点作为起点和终点在它们上面画一条线：

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
CGFloat components[] = {244.0f/255.0f, 226.0f/255.0f, 119.0f/255.0f, 0.8};
CGColorRef color = CGColorCreate(colorspace, components);
CGContextSetStrokeColorWithColor(context, color);
CGContextSetLineWidth(context, 20.0);
CGContextMoveToPoint(context, startPoint.x, startPoint.y);
CGContextAddLineToPoint(context, endPoint.x, endPoint.y);
CGContextStrokePath(context);
CGColorSpaceRelease(colorspace);
CGColorRelease(color); 
```

点击屏幕上的两个点并画一条线可以正常工作，但是如何让所有视图与线相交？我想在 touches end 方法中获得这些视图。

```
- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
  CGPoint pt = [[touches anyObject] locationInView:alphabetView];
  UIView *touched = [alphabetView hitTest:pt withEvent:event];
  CGPoint p = touched.center;
  // code here to get view list.
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:38:36.307

如果满足以下条件，则线段（从 A 点到 B 点）与矩形（视图框架）相交：

1.  线段与 4 个矩形边中的任何一个相交，***或***
2.  点 A 和 B 都在矩形内。

如果 (1) 和 (2) 的答案均为“否”，则线段不与矩形相交。

[此答案](https://stackoverflow.com/a/14301701/1187415)`checkLineIntersection`中的函数可能有助于检查条件 (1)。

`CGRectContainsPoint()`可用于检查条件 (2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:19:44.560

你可以`CGContextPathContainsPoint()`用来检查你`CGPoint`是否在你的行的路径中，它返回一个布尔值。它的参考可以在[这里找到](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGContext/Reference/reference.html)

# ios - 如何为 IOS 设备安装 berkeley 数据库

> ID：16052699
> 
> 赞同：0
> 
> 时间：2013-04-17T06:03:33.453
> 
> 标签：ios, berkeley-db

嗨，我想在我的 MAC 中安装 berkeley db。我的 Xcode 版本是 4.5.2。我从 oracle 站点下载了 db-5.3.21(Berkeley)。我为 xcode 安装了命令行工具。我在我的 MAC 中为 iPhoneSimulator 安装了 berkeley db。至于 iPhone 设备，我无法安装。我正在按照以下链接安装 berkeley db。 [http://docs.oracle.com/cd/E17076_02/html/installation/build_unix_iphone.html](http://docs.oracle.com/cd/E17076_02/html/installation/build_unix_iphone.html)

当我为 IOS 设备安装 berkeley db 时，它显示以下错误。

`checking for arm-apple-darwin11.4.2-sh... no checking for sh... /bin/sh checking for a BSD-compatible install... /usr/bin/install -c checking for arm-apple-darwin11.4.2-cc... /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc checking whether the C compiler works... no configure: error: in` `/Users/celstra/rajaramesh/db-5.3.21/build_unix': configure: error: C compiler cannot create executables` 看`config.log' for more details`

.............................错误告诉C编译器无法创建可执行文件......但对于iPhonesimulator它不是显示错误...

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:07:10.497

你检查过 config.log 吗？在 C 编译器检查期间可能出现问题，例如找不到头文件，...

# magento - Magento 产品的多种选择

> ID：16052702
> 
> 赞同：0
> 
> 时间：2013-04-17T06:03:41.363
> 
> 标签：magento

我有一件产品 T 恤，在其页面上会列出不同款式的 T 恤，例如女士、男士、儿童。选择任何一种款式，将当前产品更改为所选款式，并更新页面中的价格和所有内容。

因此，当用户购买产品时，我们应该能够识别出他购买了特定类别的 T 恤。

[参考网站](http://www.zazzle.com/santa_dont_stop_believin_tee_shirts-235750122194134952)

单击右侧栏上的查看所有样式会弹出一个弹出窗口，显示可用于 pdt 的所有选项。选择任何一个选项都会更新页面。

是否`magento`有任何内置选项，或者是否有任何可用的模块？有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-06T19:07:56.020

听起来您想要一个具有多个选项的可配置产品。

有关如何执行此操作的教程在这里 [https://www.youtube.com/watch?v=cTmjwbVXDM0](https://www.youtube.com/watch?v=cTmjwbVXDM0)

# jquery - 如何在@Url.Action 中传递动态值？

> ID：16052704
> 
> 赞同：22
> 
> 时间：2013-04-17T06:03:49.253
> 
> 标签：jquery, asp.net-mvc-4, url.action

我在部分视图中编写了以下 jquery：

```
 $.ajax({
        type: "POST",
        url: '@Url.Action("PostActionName", "ControllerName")',
        data: { Id: "01" },
        success: function(data)
            {
            if (data.success="true")
                {
                    window.location = '@Url.Action("GetActionName", "ControllerName")'
                }
            }
    }); 
```

动作名称和控制器名称不是固定的，它们必然会根据放置此局部视图的视图而改变。我有获取调用动作和控制器名称的函数，但不确定如何在@Url.Action 中传递它们。

以下是获取动作和控制器名称的 Javascript 函数：

```
function ControllerName() {
            var pathComponents = window.location.pathname.split('/');
            var controllerName;
            if (pathComponents.length >= 2) {
                if (pathComponents[0] != '') {
                    controllerName = pathComponents[0];
                }
                else {
                    controllerName = pathComponents[1];
                }
            }
            return controllerName;
        }

        function ActionName() {
            var pathComponents = window.location.pathname.split('/');
            var actionName;
            if (pathComponents.length >= 2) {
                if (pathComponents[0] != '') {
                    actionName = pathComponents[1];
                }
                else {
                    actionName = pathComponents[2];
                }
            }
            return actionName;            
        } 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-17T06:08:13.997

> 我有获取调用动作和控制器名称的功能，但不确定如何在@Url.Action 中传递它们

好吧，你可以调用这些函数。例如，如果它们是 UrlHelper 类的扩展方法：

```
window.location = '@Url.Action(Url.MyFunction1(), Url.MyFunction2())' 
```

或者如果它们只是静态函数：

```
window.location = '@Url.Action(SomeClass.MyFunction1(), SomeClass.MyFunction2())' 
```

另一方面，如果需要传递的值仅在客户端上已知，则可以执行以下操作：

```
var param = 'some dynamic value known on the client';
var url = '@Url.Action("SomeAction", "SomeController", new { someParam = "__param__" })';
window.location.href = url.replace('__param__', encodeURIComponent(param)); 
```

* * *

更新：

看来您只是想获取可以像这样实现的当前控制器和操作：

```
@{
    string currentAction = Html.ViewContext.RouteData.GetRequiredString("action");
    string currentController = Html.ViewContext.RouteData.GetRequiredString("controller");
} 
```

接着：

```
window.location.href = '@Url.Action(currentAction, currentController)'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T06:19:29.990

你有没有尝试过这样的事情？我自己没有尝试过，但它应该可以工作。

```
var dataToSend = "01";
var url = '/controllerName/actionName/' + dataToSend;
var actionName = ActionName();
var controllerName = ControllerName();
url.replace("actionName",actionName);
url.replace("controllerName",controllerName);
window.location = url; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-24T13:36:03.130

```
 function functionName(var1, var2) {var link = '@Url.Action("MethodName", "Controller", new { id = "-1", name = "-2" })';
    link = link.replace("-1", var1);
    link = link.replace("-2", var2);} 
```

之前，替换：

```
 html += "<a class='k-button k-button-icontext k-primary' href='" + link + "'><i class='fa fa-download'></i> Name Button</a>" 
```

# php - 没有路由的 Codeigniter 路由

> ID：16052709
> 
> 赞同：0
> 
> 时间：2013-04-17T06:04:15.253
> 
> 标签：php, codeigniter, routes

目前我设置了一堆路由，我想做的是如果有人登陆我的域，如果它不是有效的路由，我希望他们通过特定的控制器。一直保留欢迎控制器。对于域本身。这是可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:12:11.813

在`$route['404_override']`您的`application/config/routes.php`（[文档页面底部](http://ellislab.com/codeigniter/user-guide/general/routing.html)）中使用。它就像任何其他规则一样工作（`controller/method`分配给它。在该控制器中，您可以使用`$this->uri->segment()`or`uri_string()`或其他输入源来决定要做什么。

`show_404()`如果请求实际上是在寻找不存在的东西，请记住发送 404 响应标头或以其他方式发送。

### 更新

事实证明，当前（2.1 稳定版）分支似乎没有处理 404_override 的子目录，在此处的路由器类[中](https://github.com/EllisLab/CodeIgniter/blob/2.1-stable/system/core/Router.php#L293)，[此处](https://github.com/EllisLab/CodeIgniter/blob/2.1-stable/system/core/Router.php#L338)应尝试检查是否有带有子目录的第三段。此外，还有一个旨在解决此问题的[拉取请求](https://github.com/EllisLab/CodeIgniter/pull/939)，尚未合并。

# python - Python文本战斗：一行打印

> ID：16052711
> 
> 赞同：3
> 
> 时间：2013-04-17T06:04:18.900
> 
> 标签：python

我在第 37 行遇到问题，我尝试在一行上键入一堆打印语句。一个告诉你一些事情，一个带有选择语句，另一个带有变量`enemy11`。我怎么能在一行上打印所有这些？

另外，对于随机选择，比如说它选择打孔，我怎么能检测到它，这样我就可以把它从你的健康中带走？所以它选择了punch。它识别出它被打了，并从你的 HP 中拿走了拳。

```
hp=100
enemy1=100
enemy2=200
boss=500
punch=10
kick=20
fatality=99999999

attacks = ['kick', 'punch', 'fatality']
from random import choice

from time import sleep

print("Welcome to Ultimate Fight Club Plus")
sleep(1)
print("What is your name?")
name=raw_input("> ")
print("Good luck"), name
sleep(1)
print("Choose your opponent")
enemy11=raw_input("> ")
print("You chose"), enemy11
sleep(1)
print("his health is"), enemy1
sleep(1)
print("Fight!")
while enemy1>1:
        print("You can kick or punch")
        fight1=raw_input("> ")
        if fight1=="punch":
                enemy1 -= punch
                print("You punch him in the face")
                sleep(1)
                print("His health is now"), enemy1
                sleep(1)
                print(enemy11) print choice(attacks) print("You")
        if fight1=="kick":
                enemy1 -= kick
                print("You kick him.")
                sleep(1)
                print("His health is now"), enemy1
print("You win!") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:09:45.150

我也是 Python 新手。尝试这个：

```
print(enemy11, choice(attacks), "You") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:24:30.650

有几个选项，我通常使用字符串格式，因为您可以为参数指定有意义的名称：

```
print "{who} {action} you".format(who=enemy11, action=choice(attacks)) 
```

您应该查看[有关 python2.7](http://docs.python.org/2.7/tutorial/inputoutput.html) 或[python3](http://docs.python.org/3.3/tutorial/inputoutput.html)的教程以获取高级格式化选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T06:13:44.443

所以这是你的线 -

```
print(enemy11) print choice(attacks) print("You") 
```

您可以在某个临时变量中获取“选择（攻击）”变量，然后打印..

```
temp = choice(attack)
print ("%s %s You" % (enemy11, temp)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T06:40:03.827

```
import sys

sys.stdout.write(enemy11)
sys.stdout.write(attacks)
sys.stdout.write("you")

stdout.write prints the matter in same line so for adding spaces in between 
you have to add it seperately...

sys.stdout.write(enemy11)
sys.stdout.write(" ")
sys.stdout.write(choice(attacks))
sys.stdout.write(" ")
sys.stdout.write("you") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T06:32:32.563

将攻击列表更改为将它们与其损害相关联的字典：

```
attacks = {'punch':10, 'kick':20, 'fatality':99999999} 
```

然后使用结果`choice()`来查找要造成的伤害量。

```
thisAttack = choice(attacks.keys())
hp -= attacks[thisAttack]
print("%s's %s leaves you with %s hp."% (enemy11, thisAttack, hp)) 
```

您也可以使用用户的输入`fight1`来查找他们的损坏，但是当他们没有选择有效选项时需要处理：

```
try:
    thisAttack = attacks[fight1]
except KeyError as e:
    print "You're not that flexible."
    continue #restart the While loop 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T06:09:44.567

用逗号分隔项目以将它们组合在一行中。

```
print(enemy11,choice(attacks),"You") 
```

另请参阅 和 的`print`文档`format`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-17T06:10:53.820

你可以像这样使用格式化的字符串

```
 print('%s %s You' % (enemy11, choice(attacks))) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-04-17T06:09:56.640

这将起作用：

```
print ("%s %s %s" % (enemy11, choice(attacks), "You")) 
```

# jmeter - JMeter：从 JDBC 采样器结果数组到字符串

> ID：16052722
> 
> 赞同：0
> 
> 时间：2013-04-17T06:05:30.183
> 
> 标签：jmeter

在我的 JMeter 测试计划中，JDBC 采样器之一返回多个名为`clusterCode`. 现在我想在下一个 JDBC 请求中使用这个值，比如`select userID from users where clusterCode in ('foo1','foo2','foo3');`.

目前我正在使用`JSR223 sampler`JMeter 的 ForEach 控制器内部将所有内容附加`clusterCodes`到一个字符串中。它工作正常。但是使用这种方法，JSR223 采样器的请求计数非常高，并且在用户数量较多的情况下也需要很多时间。有没有更好的方法来实现这个目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:38:26.343

找到了解决方案。我曾尝试使用`JSR223 post-processor`，但我的实现是错误的。我现在已经开始工作了。以下是代码：

```
var strClusterCodes1= "'" + vars.get("clusterCodes_1") + "',";
var msglength = vars.get("clusterCodes_#");

for (var position = 0; position < msglength; position++) {
    strClusterCodes1 +=  "'" + vars.get("clusterCodes_" + msglength) + "',";
}

strClusterCodes1 =strClusterCodes1.substring(0,strClusterCodes1.lastIndexOf(","))
vars.put("strClusterCodes",strClusterCodes1); 
```

因此，我`clusterCodes_#`使用 for 循环找到数组结果中的元素数，并将数组的所有元素附加到字符串中。而我的工作是由一个人完成的`JSR223 post-processor`。

# ruby-on-rails-3 - 从rails 3中form_for的文本字段读取值，params [：x]不起作用

> ID：16052725
> 
> 赞同：1
> 
> 时间：2013-04-17T06:05:42.987
> 
> 标签：ruby-on-rails-3, textfield, params, form-for

我在 Rails 3.2.9 中有注册表单。它在表单中包含一个名为“login”的登录名文本字段，我想使用该字段中的值在数据库中检查重复项以检查登录名可用性功能。但是 params[:login] 没有从表单中正确读取值！！form_for 有什么问题吗？或者我们如何让控制器读取这些值？

## 注册.html.erb

```
<%= form_for :user do |f| -%>
<span class='error'><%= flash[:msg] %></span>

<p><label for="login"><span class='redcolor'>*</span>Login</label><br/>
<%= f.text_field :login  %></p>

<p><%= submit_tag 'Check Login Availability', :name => 'check' %></p>

<p><label for="email"><span class='redcolor'>*</span>Email</label><br/>
<%= f.text_field :email %></p>

<p><label for="password"><span class='redcolor'>*</span>Password</label><br/>
<%= f.password_field :password %></p>

<p><label for="password_confirmation"><span class='redcolor'>*</span>Confirm Password</label><br/>
<%= f.password_field :password_confirmation %></p>

<p><label for="company"><span class='redcolor'>*</span>Company</label><br/>
<%= f.text_field :company %></p>

<p><%= submit_tag 'Sign up', :name=> 'sign_up' %></p> 
```

我读取值的代码是这样的

## account_controller.rb

```
if params[:check]
  puts "in check"
  username = params[:login]
  puts username//is giving blank
  user = User.find_by_login(username)

  if user
    flash[:msg] = "Sorry Not Available!"
  else
    flash[:msg] = "Available"
  end 
```

这里`puts username`给出空白，因此总是显示“可用”。当我在 html 页面中添加名称参数以登录时`<%= f.text_field :login,:name => 'login'%>`，代码可以正常用于检查可用性功能，但由于某些 DB 错误提示“登录不能为空”，注册功能失败。

谁能告诉我如何确保 tat params[:login] 正确读取值？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:28:51.353

你为什么在 form_for 中使用 submit_tag ！！！

改变

`<%= submit_tag 'Sign up', :name=> 'sign_up' %>`

至

```
<%= f.submit 'Sign up' %> 
```

您正在使用 form_for。因此，您必须采用诸如`params[:model_name][:field_name]`获取价值之类的参数。

在你的情况下`params[:user][:login]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:53:05.923

如果您试图从中获取价值`<%= f.text_field :login %></p>`，那将不在 `params[:login]`. 如果您查看该帮助程序生成的 html，您会发现标签的 name 属性不是`login`，但很可能是`user[login]`.

尝试使用`params[:user][:login]`

# silverlight - 如何根据 xaml 中的 windows phone 主题选择背景颜色

> ID：16052726
> 
> 赞同：1
> 
> 时间：2013-04-17T06:05:46.047
> 
> 标签：silverlight, xaml, colors, windows-phone-8, themes

我的列表框项目上有网格，我想根据浅色或深色主题选择它们的背景颜色。

例如，如果我在浅色主题中，我的网格的背景颜色将为红色，如果我在黑暗中，颜色将为蓝色。我怎样才能在 Xaml 中做到这一点？

```
..................
   <Grid Background="#3F0E0D0D"> //in this case is fix for both themes...
.................
    </grid>
............... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:49:30.103

您可以通过非常简单的方式在手机上获取主题。

例如，您可以执行以下操作：

```
 void MainPage_Loaded(object sender, RoutedEventArgs e)
        {
            Visibility darkBackgroundVisibility = (Visibility)Application.Current.Resources["PhoneDarkThemeVisibility"];
            if (darkBackgroundVisibility == Visibility.Visible)
            {
                //theme is dark
                //change grind background
            }
            else 
            {
                //theme is light
            }                
        } 
```

`OnNavigatedTo`如果你使用event 或`Application_Launching`and 会更好`Application_Activated`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:52:15.510

您不能直接在 XAML 中执行此操作，因为这是硬编码的。而是给你的 Grid 一个名字：

```
<Grid x:Name="MainGrid" Background="#3F0E0D0D"/>
... 
```

然后在您的代码中检查主题（如@radoslaf 所示）并调用：

```
if(isDark)
   MainGrid.Background=.... ; // whatever color is needed
else
   MainGrid.Background=.... ; // whatever color is needed 
```

# node.js - 你如何在 node express 应用程序中传递对象？

> ID：16052736
> 
> 赞同：4
> 
> 时间：2013-04-17T06:06:33.467
> 
> 标签：node.js, postgresql, module, express

我正在使用 express 和 node-postgres ( [https://github.com/brianc/node-postgres](https://github.com/brianc/node-postgres) ) 构建一个节点应用程序。我只想建立一次数据库客户端连接，我希望能够从不同的模块访问这个数据库连接。做这个的最好方式是什么？我试图只导出数据库连接，而不是整个快速应用程序。本质上，跨节点应用程序导出和访问对象的最佳方式是什么？

我已经检查了这个类似的问题，但它似乎特定于猫鼬。

[与 mongoose/node.js 共享数据库连接参数的最佳方式](https://stackoverflow.com/questions/9690186/best-way-to-share-database-connection-param-with-mongoose-node-js)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T06:37:33.637

没有所谓的“最好的方法”。如果您需要在不同模块之间使用相同的对象，则必须将其包装在一个模块中。像这样的东西：

```
//db.js
var postgres = require (...)
var connection;

module.exports = {
  getConnection: function (){
    return connection;
  },
  createConnection: function (){
    connection = createConnection (postgress);
  }
};

//app.js - main file
require ("./db").createConnection ();

//a.js
var db = require("./db")
db.getConnection()

//b.js
var db = require("./db")
db.getConnection() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-17T11:59:12.097

嗨，我正在研究解决方案，从[RefLink 获得](https://hackernoon.com/managing-complex-data-structures-in-nodejs-17b571c0ba04)

您可以创建这样的方案来映射您的数据

```
 const User = mongoose.model('Story', userSchema);
    module.exports = User;
    const mongoose = require('mongoose');
    let Schema = mongoose.Schema;
    const userSchema = new Schema({
    UserID: {
        type: mongoose.Schema.Types.Mixed,
    },
    User_Info: {
        First_Name: {
        type: String,
        },
        Last_Name: {
        type: String,
        },
        Current_Address: {
        type: String,
        },
        Email_Address: {
        type: String,
        },
    },
        Phone_Numbers: [{
            Home_Phone: {
            type: Number,
            },
            Work_Phone: {
            type: Number,
            },
            Cell_Phone: {
            type: Number,
            },
                Phone_verified: [{
                Home: Boolean,
                Work: Boolean,
                Cell: Boolean,
                }],
        }],
    })
    const User = mongoose.model('User', userSchema);
    module.exports = User; 
```

并且 API 路由可能看起来像这样

```
 app.post('/api/user', function(req, res) {
    User.create({
        UserID: req.body.userid,
        User_Info: req.body.userinfo,
        First_Name: req.body.firstname,
        Last_Name: req.body.lastname,
        Current_Address: req.body.currentaddress,
        Email_Address: req.body.emailaddress,
        Phone_Numbers: req.body.phonenumbers,
        Home_Phone: req.body.homephone,
        Work_Phone: req.body.workphone,
        Cell_Phone: req.body.cellphone,
        Phone_Verified:
        req.body.phoneverified,
        Home: req.body.home,
        Work: req.body.work,
        Cell: req.body.cell,
    }).then(user => {
        res.json(user)
    });
    }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T11:19:31.350

你可以做这样的事情..

```
//db.js
var pg = require('pg'); 

var conString = "tcp://postgres:1234@localhost/postgres";

module.exports.connectDatabase = function(callback){
var client = new pg.Client(conString);
client.connect(function(err) {
  if(err){
     console.log(err);
     process.exit(1);
  }

  module.exports.client = client;
  callback();
})

//app.js
// We are trying to connect to database at the start of our app and if it fails we exit       the process
var db = require('./db');
db.connectDatabase(function(){
  // your other code
})

//a.js
var db = require('./db');
//you can access your client here to perform database operations like that
db.client 
```

# model - Breezejs，无法找到属性 xxxxx

> ID：16052737
> 
> 赞同：1
> 
> 时间：2013-04-17T06:06:34.643
> 
> 标签：model, asp.net-web-api, breeze

由于某种原因，我在使用 $select=Gallery/Categories 查询（投影）时不断收到错误。我得到的错误是：

> “无法在类型 'System.Collections.Generic.ICollection`1[Web.Core.Models.GalleryModel]' 上找到属性 'Categories'。”

这是我目前的模型：

```
public class GalleryModel : BaseModel
{
    public ICollection<CategoryModel> Categories { get; set; }
} 
```

BaseModel 仅具有一些其他属性的地方..例如

```
public int Id { get; set; }
    public string Name { get; set; }
    public DateTime Updated { get; set; } 
```

任何想法为什么它可能会抛出这个错误？奇怪的是，如果我不添加我的投影，那么它似乎找到了属性并用成熟的 json 响应。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:04:14.637

我认为这个问题可能由于某些原因而产生。根据我在 Web API 和实体框架中使用微风的经验，我发现您必须以非常具体的方式定义您的类才能正常工作。而且我认为您的问题的主要原因可能是：

```
public class GalleryModel : BaseModel
{
    public **virtual** ICollection<CategoryModel> Categories { get; set; }
} 
```

您应该在关系的定义中使用 virtual 。

我还建议你这样做：

```
public class CategoryModel : BaseModel
{
    public int CategoryId {get; set;}
    public virtual CategoryModel Category{ get; set; }
} 
```

在这种情况下，继承不是问题，我已经实现了一些非常相似的东西，它对我有用。微风不支持的intherance是当您想根据鉴别器转换不同对象中的表格时。

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:20:26.167

## 编辑：从 v 1.3.1 起，Breeze 现在支持继承。

Breeze 还不支持继承，但它在我们的路线图上。[请在Breeze User Voice](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/suggestions/3083057-support-inheritence-in-the-object-model)上投票支持此功能，以表明您认为它很重要。我们非常重视这个场地，优先考虑我们接下来要添加的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T10:26:48.430

我有一个类似的问题，“微风找不到 entityType xxx 的属性 xyz”。我找到了两种解决方案：

1.）在您的数据上下文（或 entityManagerFactory .. 不管）中，删除该行

```
breeze.NamingConvention.camelCase.setAsDefault(); 
```

或更好，

2.) 确保您的所有 js 都使用驼峰式约定。

# wcf - 更改系统日期时间会使 WCF 通道出现故障

> ID：16052740
> 
> 赞同：0
> 
> 时间：2013-04-17T06:06:38.613
> 
> 标签：wcf, security, netnamedpipebinding

我有一个使用自定义绑定（netnamedpipe 传输）与服务通信的应用程序。当我更改系统时间时，它会使 WCF 通道出现故障。当我们更改系统时间导致通道出现故障时，它会在内部引发 ReceiveTimeout 异常。

我试图设置绑定的时钟偏差参数，但它抛出了无效的操作异常。

```
 <security>
        <localClientSettings maxClockSkew="10.00:07:00" />
        <localServiceSettings maxClockSkew="10.00:07:00" />
        <secureConversationBootstrap>
          <localClientSettings maxClockSkew="10.00:30:00" />
          <localServiceSettings maxClockSkew="10.00:30:00" />
        </secureConversationBootstrap>
      </security>
      <namedPipeTransport maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647" /> 
```

WCF 是否有任何其他参数来避免网络命名管道传输的这个问题？

# sql - 用 WHERE 替换 HAVING

> ID：16052747
> 
> 赞同：1
> 
> 时间：2013-04-17T06:06:59.010
> 
> 标签：sql, oracle, where, having

```
SELECT team, sum(maths)
FROM marks
GROUP BY team
HAVING sum(maths) = (
    SELECT max(sum(maths))
    FROM marks
    GROUP BY team
) 
```

有 A、B、C 三个团队，其中一些没有成员。

首先使用`SELECT max(sum(maths)) FROM marks GROUP BY team`我获得数学的最大总和。

现在使用整个查询，我试图显示数学总和最高的团队。

如何重写查询以`HAVING`替换`WHERE`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:30:42.220

请试试：

```
select * from (
  select team, v maxmarks, row_number() over (order by v desc) RNum from(
    SELECT team, sum(maths) v
    FROM marks 
    group by team 
  )x
)xx where RNum=1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:26:06.150

另一种方法，使用公用表表达式：

```
with team_sum as (
  select   team,
           sum(maths) sum_maths
  from     marks
  group by team)
select *
from   team_sum
where  sum_maths = (
         select max(sum_maths)
         from   team_sum) 
```

对于非常多的团队，它会表现良好，因为优化器可以实现 team_sum 公用表表达式的结果集并对其执行 max()。

它还列出了他们共享相同总分的多个团队。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:51:19.117

它并不比其他人更有效率，但如果你只是想要多种方式，你可以试试这个。

```
SELECT DISTINCT FIRST_VALUE(TEAM) OVER(ORDER BY SUM(MATHS) DESC),
          FIRST_VALUE(SUM(MATHS)) OVER(ORDER BY SUM(MATHS) DESC)
FROM MARKS
GROUP BY TEAM 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T06:20:17.030

可以将 HAVING 替换为 WHERE，但这样做没有任何好处。

```
select team, sum(maths) from
(
   SELECT team, sum(maths) as total
   FROM marks
   GROUP BY team
) t1
where t1.total = ( select max(t1.total) from t1 ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T06:36:43.950

如果您对结果进行排序，则可以使用[伪](http://docs.oracle.com/cd/E11882_01/server.112/e26088/pseudocolumns009.htm)`SELECT`列将它们包装在将其限制在第一行的外部：[`ROWNUM`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/pseudocolumns009.htm)

```
SELECT *
FROM (
    SELECT team, sum(maths)
    FROM marks
    GROUP BY team
    ORDER BY sum(maths) DESC
)
WHERE ROWNUM = 1; 
```

或者您可以使用[`ROW_NUMBER`分析函数](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions156.htm)，再次包装在外部选择中：

```
SELECT *
FROM (
    SELECT team, sum(maths),
        ROW_NUMBER() OVER (PARTITION BY team ORDER BY sum(maths) DESC) AS rn
    FROM marks
    GROUP BY team
)
WHERE rn = 1; 
```

# php - 在 Linux 中写入命名管道的最佳、最安全的方法是什么？

> ID：16052750
> 
> 赞同：2
> 
> 时间：2013-04-17T06:07:40.913
> 
> 标签：php, c, linux, ipc, named-pipes

在 Linux 中写入命名管道的最佳、安全方法是什么？或者，如何使命名管道安全？

这是我使用 PHP 在 linux 上写入管道的方法：

```
$con = fopen("/tmp/myFIFO", "w");
fwrite($con, "UP\n");
fclose($con); 
```

我希望使它更安全。

这就是我在 C 中创建管道的方式：

```
int pc;
char mode[] = "0777";
int i = strtol(mode, 0, 8);
pc = mkfifo(FIFO, 0);

if(pc < 0) {
    printf("Failed in creating a pipe\n");
    printf("Exiting...\n");
    exit(1);
}
else {
    printf("Success in Creating Pipe\n");
    chmod("/tmp/myFIFO", i);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:26:54.507

您可以使用[`umask`](http://php.net/umask)来控制您创建的文件的权限。你也有[`chmod`](http://php.net/chmod)php。

但是，您也有[`posix_mkfifo`](http://php.net/posix_mkfifo)可用的，这完全符合您的目的：

bool **posix_mkfifo** ( 字符串*$pathname* , int *$mode* )

# php - 致命错误：未找到接口“Metadata\AdvancedMetadataFactoryInterface”

> ID：16052753
> 
> 赞同：0
> 
> 时间：2013-04-17T06:08:01.757
> 
> 标签：php, symfony, composer-php

尝试使用 composer.phar 更新我的供应商时出现以下致命错误：

```
$ php bin/composer.phar update
Loading composer repositories with package information
Updating dependencies (including require-dev)
Generating autoload files

Fatal error: Interface 'Metadata\AdvancedMetadataFactoryInterface' not found in /sf2path/vendor/jms/metadata/src/Metadata/MetadataFactory.php on line 26
PHP Fatal error:  Interface 'Metadata\AdvancedMetadataFactoryInterface' not found in /sf2path/vendor/jms/metadata/src/Metadata/MetadataFactory.php on line 26

Script Sensio\Bundle\DistributionBundle\Composer\ScriptHandler::clearCache handling the post-update-cmd event terminated with an exception

[RuntimeException]
An error occurred when executing the "'cache:clear --no-warmup'" command. 
```

昨天我创建了一个全新安装，它可以在我的家用机器上运行。我还为典型的 symfony 目录（app/cache、web、vendor...）添加了一个 .gitignore 文件：

```
/web/bundles/
/app/bootstrap*
/app/cache/*
/app/logs/*
/vendor/
/app/config/parameters.yml 
```

现在，当从存储库中提取时，我显然错过了供应商，所以我想我只需更新它们，但现在我得到了上述错误。

这是我的composer.json：

```
"require": {
    ...
    "jms/metadata": "*",
    "fpn/doctrine-extensions-taggable": "dev-master",
    "fpn/tag-bundle": "dev-master",
    "jms/serializer-bundle": "dev-master",
    "friendsofsymfony/rest-bundle": "dev-master",
    "friendsofsymfony/user-bundle": "*",
    "friendsofsymfony/comment-bundle": "*"
}, 
```

谷歌并没有真正提供帮助，所以也许这里的任何人都有同样的问题并找到了解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:35:38.723

我不知道我是如何搞砸我的供应商的。我认为一旦安装，它们现在可以在每台机器上运行，但无论如何似乎有些东西坏了。从 Git 存储库中包含缺失的类后，我又遇到了一个缺失 Twig 类的问题，所以我搞砸了所有东西并重新安装了所有供应商。也许我应该删除这么简单的问题，但可能有另一个人在寻找它 - 所以这是简单的答案：

删除所有供应商（如果有）并重新安装它们：

```
$php composer.phar install 
```

这将启动所有供应商的全新安装。（就我而言，我只做了更新）

# javascript - KendoUI Uploader 移除

> ID：16052758
> 
> 赞同：0
> 
> 时间：2013-04-17T06:08:13.603
> 
> 标签：javascript, kendo-ui

使用以下 js 上传文件时，我的 kendo ui 上传器工作没有问题：

```
$(function () {
    //uploading
    $("#filename_trigger").kendoUpload({
        async: {
            autoUpload: true,
            saveUrl: $("#upload_url").val(),
            removeUrl: $("#delete_upload_url").val(),
            removeField: "filename",
            saveField: "filename"
        },
        select: function (e) {
            $.each(e.files, function (index, value) {
                ext = value.extension.toLowerCase();
                if (ext != '.jpg' && ext != '.png') {
                    alert('Only images are allowed!');
                    e.preventDefault();
                }
            });
        },
        success: function (e) {
            alert(e.operation);
            if (e.operation == "upload") {
                // Array with information about the uploaded files
                var files = e.files;
                $("#filename").val(e.response.filename);
                pushNotification("File uploaded");
            }

            if (e.operation == "remove") {
                pushNotification("File removed");
            }
        }});
}); 
```

但是，在删除文件时，它不会从 div 中删除文件。如果我使用函数输出 responseStatus，则表示它很好，并且该文件实际上已从服务器返回，并带有 200 标头。任何想法为什么会引发错误，我是否必须返回一个特定的字符串，因为它知道删除成功？

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:58:37.070

更新并使用最新的内部版本，它应该是固定的。

我认为问题是由于 jQuery 的重大更改造成的 - 空响应不再是有效的 JSON。或者您可以尝试返回一些虚拟 json 来避免解析问题。

# wix - 有条件的文件夹共享

> ID：16052764
> 
> 赞同：1
> 
> 时间：2013-04-17T06:08:34.933
> 
> 标签：wix, wix3.5

我还有一个我打算共享的文件夹的 PathEdit 控件。我想允许用户在同一个 PathEdit 控件（受支持）中输入 UNC 路径。

问题是，当输入 UNC 路径时，在安装过程中它会尝试共享它。

如果它的 UNC 路径，我怎样才能让它不共享？

这是代码片段：

PathEdit 控件定义：

```
<!-- Target audio files directory -->
        <Control Id="lblAudioFilesDirectory" Type="Text" X="20" Width="100" Y="135" Height="18" NoPrefix="yes" Text="!(loc.AudioFilesDirectoryLabel)" />
        <Control Id="peAudioFilesDirectory" Type="PathEdit" X="120" Width="180" Y="135" Height="18" Property="PROP_AUDIODIR" Indirect="yes" />
        <Control Id="btnAudioFilesDirectory" Type="PushButton" X="305" Width="20" Y="135" Height="18" Text="!(loc.Browse)">
          <Publish Property="_BrowseProperty" Value="[PROP_AUDIODIR]" Order="1">1</Publish>
          <Publish Event="SpawnDialog" Value="Custom_BrowseDlg" Order="2">1</Publish>
        </Control> 
```

目录片段：

```
<Directory Id="AUDIOFOLDER" Name="AudioFiles">
    <Component Id="cmpAUDIOFOLDER" Guid="{8BCFBEA2-9E7B-4E45-8838-6A71216C9B20}">
    <CreateFolder />
    <util:User Id="Everyone" Name="Everyone"></util:User>
    <util:FileShare Id="fsAudioFiles" Description="Audio files" Name="AudioFiles">
    <util:FileSharePermission User="Everyone" GenericAll="yes" />
    </util:FileShare>
    </Component>
</Directory> 
```

我可以做一些有条件的工作吗

```
<util:User Id="Everyone" Name="Everyone"></util:User>
        <util:FileShare Id="fsAudioFiles" Description="Audio files" Name="AudioFiles">
        <util:FileSharePermission User="Everyone" GenericAll="yes" />
        </util:FileShare> 
```

只有在路径不是 UNC 时才能使其工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:12:39.763

A`Component`是 Windows 安装程序中安装的原子单元，所以这就是您想要的`Condition`。假设有`Directory/@Id`问题的文件夹是`AudioFiles`您可以执行以下操作：

```
<Component Id="cmpAUDIOFOLDER" Guid="PUT-GUID-HERE"
           Directory="AudioFiles">
   <!-- If the AudioFiles directory starts with a double backslash, it's a network
        share, so share it with everyone. -->
   <Condition>AudioFiles &lt;&lt "\\"</Condition>

   <CreateFolder />
   <util:FileShare Id="fsAudioFiles" Description="Audio files" Name="AudioFiles">
     <util:FileSharePermission User="Everyone" GenericAll="yes" />
   </util:FileShare>
</Component> 
```

# html - 为什么 css 在不同的浏览器中显示的样式不同？

> ID：16052769
> 
> 赞同：0
> 
> 时间：2013-04-17T06:08:54.107
> 
> 标签：html, css

我在 page 有一个菜单。

```
 <ul class="editorial-tabs-menu  menu">
   <li class="first"><a href="#" class="selected">Home
     <span></span>
    </a></li>
   <li><a href="#">Links</a>
     <ul>
      <li><a href="#analyzes">Link1</a></li>
      <li><a href="#ux">Link2</a></li>
     </ul>
   </li>
   <li><a href="#">About us</a></li>
 </ul> 
```

我使用这个CSS：

```
.editorial-tabs-menu li a
{
display: block;
font-size: 13px;
font-weight: bold;
border: 1px solid #cfcfcf;
-moz-border-radius-topleft: 3px;
-moz-border-radius-topright: 3px;
-webkit-border-top-left-radius: 3px;
-webkit-border-top-right-radius: 3px;
background: -moz-linear-gradient(90deg,#F0F8FF,#fff);
background: -webkit-gradient(linear,0% 0,0% 100%,from(#F0F8FF),to(#fff));
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#F0F8FF',endColorstr='#fff');
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#F0F8FF, endColorstr=#FFFFFFFF, GradientType=0)";
padding: 3px 0;
width: 83px;
text-align: center;
color: #666;
text-decoration: none;
font-family: 'B Nazanin',Tahoma,Arial;
position: relative;
/*border-bottom: none;*/
}

.editorial-tabs-menu li a:hover, .editorial-tabs-menu li .selected
{
    color: #FFF;
    color: rgb(255, 255, 255);
    background: -moz-linear-gradient(90deg, #095283, rgb(31, 108, 162)) repeat scroll 0px 0px transparent !important;
    background: -webkit-gradient(linear,0% 0,0% 100%,from(#095283),to( rgb(31, 108, 162)));
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#095283',endColorstr=' rgb(31, 108, 162)');
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#095283, endColorstr='rgb(31, 108, 162)', GradientType=0)";
    border-color: #095283;
}

.menu ul li
{
    height: 0;
    overflow: hidden;
    padding: 0;
    -webkit-transition: height .25s ease .1s;
    -moz-transition: height .25s ease .1s;
    -o-transition: height .25s ease .1s;
    -ms-transition: height .25s ease .1s;
    transition: height .25s ease .1s;
}

.menu li:hover > ul li
{
    height: 36px;
    overflow: visible;
    padding: 0;
}

.menu ul li a
{
    width: 100px;
    padding: 4px 0 4px 40px;
    margin: 0;
    background: none;
    border: none;
    float: right;
    text-align: right;
    /*border-bottom: 1px solid #353539;*/
} 
```

我想 `background: none;`在`hover`.

我设置了这个 CSS

```
.menu ul li a:hover
    {
        background: none;
        color: #095283;
    } 
```

但是`.editorial-tabs-menu li a:hover`当子菜单悬停时它会得到css。

当我将此 css 更改为 时`background: red;`，它在 chrom 中是红色的，但它`.editorial-tabs-menu li a:hover`在 ie 和 mozila 中得到 css。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:27:31.143

您可以对样式定义进行后缀，`!important`以确保它覆盖任何其他定义。例如，您可以在 CSS 中编写：

```
a:hover{background-color: #f00 !important;} 
```

这将匹配文档的所有标签...

这个 jsFiddle 说明了这一点，[http://jsfiddle.net/GG2Da/1](http://jsfiddle.net/GG2Da/1) - 尝试`!important`从 css 中删除，看看会发生什么。

希望这可以帮助

# javascript - 当用户滚动特定距离时隐藏元素

> ID：16052773
> 
> 赞同：-2
> 
> 时间：2013-04-17T06:09:14.563
> 
> 标签：javascript, jquery

我搜索了问题，但没有找到特定问题的答案：当用户滚动特定距离时如何隐藏元素。我似乎无法理解这个逻辑。

我想做的事：

```
$(window).scroll(function(){
    if (document has been scrolled 250px or -250px) {
        $("#box").hide();
    } 
}); 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:22:32.603

```
$(window).bind('scroll', function(){
    if($(this).scrollTop() > 200) {
         $("#box").hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:19:25.177

[这是演示](http://jsfiddle.net/maniator/yDVXY/)

```
 $(window).scroll(function() {
if ($(this).scrollTop() > 250) { 
    $("#box").css({
        'display': 'none'
    });
}
}); 
```

# android - 如何阻止磁传感器检测金属？

> ID：16052775
> 
> 赞同：2
> 
> 时间：2013-04-17T06:09:20.330
> 
> 标签：android, android-sensors

我正在开发一个基于传感器的应用程序，其主要目的是检测电缆的磁场。如果电缆中有电流流动，那么它应该显示一些消息，当没有电流时，它也应该通知。使用下面的代码，它检测到电流，但问题是它也检测到金属场。如果有人知道解决方案，请告诉我。

```
public class MainActivity extends Activity implements SensorEventListener {
      SensorManager sensorManager;
     // static final int sensor = SensorManager.SENSOR_ORIENTATION;

      private Sensor myCompassSensor;
      private TextView outView,tesla1,voltage;
      ImageView light1;
      Vibrator v;
      /** Called when the activity is first created. */
      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
        outView = (TextView) findViewById(R.id.output);
        tesla1=(TextView)findViewById(R.id.tesla);
        light1=(ImageView)findViewById(R.id.light);
        voltage=(TextView)findViewById(R.id.voltage);
        v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
        // get sensor manager
        sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
        // get compass sensor (ie magnetic field)
        myCompassSensor = sensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);
      }

      // register to listen to sensors
      @Override
      public void onResume() {
        super.onResume();
        sensorManager.registerListener(this, myCompassSensor, SensorManager.SENSOR_DELAY_NORMAL);
      }

      // unregister
      @Override
      public void onPause() {
        super.onPause();
        sensorManager.unregisterListener(this,myCompassSensor);
      }

      // Ignore for now
      public void onAccuracyChanged(Sensor sensor, int accuracy) {
          // TODO Auto-generated method stub
      }

    @Override
    public void onSensorChanged(SensorEvent event) {
        // TODO Auto-generated method stub
         // this check is unnecessary with only one registered sensor
          // but it's useful to know in case you need to add more sensors
         synchronized (this)
         {
          if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD) {
             // int orientation = (int) event.values[0];
              float azimuth = Math.round(event.values[0]);
                float pitch = Math.round(event.values[1]);
                float roll = Math.round(event.values[2]);
                double tesla= Math.sqrt((azimuth*azimuth)+(pitch*pitch)+(roll*roll));

                String out = String.format("X: %.2f\nY: %.2f\nZ: %.2f",
                    azimuth, pitch, roll);
                String a=String.format("%2f", tesla);
                Log.d("MAGENTIC---", out);
               // outView.setText(out);
                tesla1.setText(a);
                if(tesla>=80)
                {
                    v.vibrate(200);
                    light1.setBackgroundResource(R.drawable.voltage_on);
                    voltage.setText("Voltage Detected !");
                }
                else
                {
                light1.setBackgroundResource(R.drawable.voltage_off);
                voltage.setText("No Voltage Found");
                }
    }
          else
              return;
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T06:23:23.920

如果您正在检测（AC）交流电/信号，那么即使在很短的时间内，您也应该看到幅度和极性不同的信号。您可以采样和存储许多读数并检测到这种情况正在发生。在磁场稳定的情况下，读数也应该是稳定的。您应该能够开发一种算法来区分这些不同的情况。

如果您正在检测稳态直流电流，这可能无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T01:21:37.347

根据硬件的不同，手机的更新速率可能低至 50 毫秒或 20 赫兹。如果我们假设测量值是“采样并保持”平均值，并且交流频率为 60Hz（取决于您居住的地方），那么每个采样将恰好有三个周期，抵消到没有信号。如果您的采样时间是 58 毫秒，那么您将有 3.5 个周期会产生一个信号。因此 - 您很有可能通过查看采样数据来推断磁场是否在交替。

一种方法是简单地计算数据的方差。否则，您可以应用数字高通滤波器来忽略变化较慢的字段。

# amazon-web-services - Amazon RDS 交换接近 2GB - 它最终会崩溃吗？

> ID：16052776
> 
> 赞同：2
> 
> 时间：2013-04-17T06:09:25.813
> 
> 标签：amazon-web-services, amazon-rds

我的 Amazon RDS 实例有大约 1.8GB 的​​交换空间。在数据库重新启动后，交换从很小的水平上升，然后在这个非常高的水平附近变平。

但是，应用程序的性能似乎没有受到影响 - Pingdom 报告显示网站没有更大的延迟。

考虑到这种更高级别的交换，RDS 实例最终会崩溃吗？我们应该查看哪些参数来调整数据库？

# c - 结构数组的strcmp分段错误

> ID：16052777
> 
> 赞同：1
> 
> 时间：2013-04-17T06:09:34.743
> 
> 标签：c, arrays, struct, fault

所以我有这段代码

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "hw09-header.h"

struct student
{
    char* name;
    char* course;
};

int main(int argc, char* argv[])
{
    int i = 0, init_size=10,x,z;
    char *value = "go";
    int key, count=0;
    char* del = ","; /*Uses comma sign as delimiter*/
    char *token=NULL;
    char *temp_stor;
    struct student *array;
    struct student *temp;

    if(argc != 2)
    {
        printf("  usage:  program_name positive_integern");
        printf("example:  ./example-hw09  123n");
        exit(1);
    }

    /**************  begin REQUIRED  **************/
    /*  put before logic.  DO NOT PUT IN A LOOP */
    key = atoi(argv[1]);
    initialize(key);
    /**************   end REQUIRED   **************/

    /*  example loop  */

    array=malloc((init_size)*sizeof(int));

    while(strcmp(value, "stop") != 0)
    {
        value = getString();
        token = strtok(value, del);
        while (token !=NULL)
        {
            if(i%4==0)
            {
                init_size=init_size*2;
                temp = realloc(array,init_size*sizeof(int)) ;
                if(temp != NULL)
                {
                    array = temp;
                }
                else
                {
                    printf("unable to reallocaten");
                    exit(1);
                }
            }

            array[i].name=malloc(sizeof(struct student)*10);
            strcpy(array[i].name,token);
            printf("%s %dn",array[i].name,i);
            token = strtok( NULL, del );
            array[i].course=malloc(sizeof(struct student)*11);
            strcpy(array[i].course,token);
            printf("%s n",array[i].course);
            i=i+1;
            token = strtok( NULL, del );
            x=i;
            for(x=0; x<i; x++)
            {
                if(strcmp(array[x].name,token)==0)
                    printf("Duplicate found n");
            }
        }
    }
} 
```

现在，当我尝试执行 strcmp 时，它总是给我一个分段错误，我不知道为什么。

我不应该在这里使用链表，而且我想我已经完成了所有的工作，接下来的几部分我只需要比较和排序，我不断收到分段错误。

而且我的数组中确实有元素，我可以将它们全部打印出来，只是出于某种原因不比较它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:23:27.240

部分回答，指出没有意义的事情。您应该尝试了解原因，以便修复它们。但 SO 不是解释类似`malloc`工作原理的正确网站。

* * *

```
 array[i].name=malloc(sizeof(struct student)*10);
    strcpy(array[i].name,token); 
```

您为 10 个结构分配空间`student`，然后将字符串复制到其中。这是没有意义的。既然`name`是`char*`你应该有`malloc(<maximum size of string with terminating 0 included>)`。

* * *

```
 array=malloc((init_size)*sizeof(int)); 
```

然后稍后

```
 array[i].name= ..... 
```

您分配`array`为整数数组（由 表示`sizeof(int)`），但随后您将其用作结构，就像它们是结构一样。

* * *

然后建议：每次你有`strcpy(dst, src)`，用这个替换它：

```
snprintf(dst, <how much space is allocated at dst>, "%s", src); 
```

这将避免缓冲区溢出，并且还会迫使您考虑分配了多少空间`dst`（如果您不知道，那么您的第一个问题需要解决和理解）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:31:09.823

因为，很明显（你也说过）令牌为空。

```
if(strcmp(array[x].name,token)==0) 
```

传递`NULL`参数是非法的`strcmp`。
如果使用 NULL 作为参数调用字符串比较函数，则该进程将获得 SIGSEGV，
因为这些函数正在取消引用 NULL 指针。

# javascript - 确定 ECMAScript 赋值表达式的左侧或右侧

> ID：16052793
> 
> 赞同：1
> 
> 时间：2013-04-17T06:10:04.890
> 
> 标签：javascript, parsing, antlr4

我正在开发一个为 ECMAScript 文件的文本构建符号表的解析应用程序。我遇到的问题是在处理带有`ParseTreeListener`.

这是使用[Chris Lambrou 的 ANTLR 语法](http://www.antlr3.org/grammar/1206736738015/JavaScript.g "克里斯兰布罗的语法")，它似乎与[ECMAScript 规范](http://www.ecma-international.org/ecma-262/5.1/#sec-11.3 "ECMAScript 5.1 规范")中的官方语法非常接近。有一个名为 的解析器规则`leftHandSideExpression`，但这是具有欺骗性的，因为当在 TestRig GUI 中显示时，它也始终显示在表达式的右侧。

这是一项需要访问者模式的任务吗？

欣赏建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:41:39.963

`leftHandSideExpression`只能出现在以下位置：

*   在 的左侧`assignmentOperator`。请注意，这*也*可以是右手边，例如 中的表达式`y`。`x = y = 3`
*   `x`后缀递增/递减运算符（ in`x++`或`x--`）的表达式部分。
*   `for (... in`语句的初始化部分。

要确定您当前是否正在查看赋值表达式的左侧，请检查当前解析树节点及其父节点，以查找`LeftHandSideExpressionContext`其父节点为`AssignmentExpressionContext`or的 a `AssignmentExpressionNoInContext`。

# debugging - 如何摆脱 Firebug 中的这些持续警告/错误？

> ID：16052796
> 
> 赞同：0
> 
> 时间：2013-04-17T06:10:27.777
> 
> 标签：debugging, console, firebug, warnings

以下是始终出现在 Firebug 控制台中的警告/错误示例，无论我尝试调试什么页面或内容：

```
Use of Mutation Events is deprecated. Use MutationObserver instead.
[Break On This Error]   

...ch(c){return _.t}},stringify:function(f){function g(c){return h.call(this,c,a)}v...

cb=gapi.loaded_0 (line 27)

The Components object is deprecated. It will soon be removed.
[Break On This Error]   

...js -> resource://jid0-agjxxzys0rt1uudxcyinrjbgttc-at-jetpack/api-utils/lib/sandb...

content-proxy.js (line 7)
<System>

Exposing chrome JS objects to content without __exposedProps__ is insecure and deprecated. See https://developer.mozilla.org/en/XPConnect_wrappers for more information.
[Break On This Error]   

...sh.js -> resource://jid0-agjxxzys0rt1uudxcyinrjbgttc-at-jetpack/api-utils/lib/sa...

worker.js (line 130)
<System> 
```

这是截图： [http ://snaps.vertigofx.com/009/snap000025_2013-04-16_23.01.06.png](http://snaps.vertigofx.com/009/snap000025_2013-04-16_23.01.06.png)

几周前，我做了一些研究，希望找到一种方法来摆脱这些持久性消息，但无济于事。我真的很想摆脱这些，因为我经常使用 Firebug，它们变得非常分散注意力。我看到红色并且自动认为我的代码有问题，无论我认为我可能多么“习惯”。

想想看，我之前可能已经在 SO（或其他网站）上发布过这个问题，但没有得到任何有用的答案。我希望这一次我能找到解决办法。

（仅供参考，我认为如果 Firebug 能够忽略特定事物并抑制有关这些特定事物的任何错误/警告/消息，那就太好了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:19:41.650

只是为了复制我从[Firebug 讨论组帖子](https://groups.google.com/d/msg/firebug/hZT9ONZxYwQ/fW9tPSZZKh0J)中的答案：

取消选中[*控制台*面板选项](https://getfirebug.com/wiki/index.php/Console_Panel#Options_Menu) *Show Chrome Errors*和*Show Chrome Messages*。这样做 Firebug 不再将这些类型的消息记录到其控制台。

您还可以通过选项菜单设置许多其他过滤器。

塞巴斯蒂安

# gearman - gearman 队列中的任务数量

> ID：16052799
> 
> 赞同：0
> 
> 时间：2013-04-17T06:10:36.523
> 
> 标签：gearman

如何接收 gearman 队列中的当前任务数量或 php 中的活动任务数量？我正在使用库[http://www.php.net/manual/ru/class.gearmanclient.php](http://www.php.net/manual/ru/class.gearmanclient.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T09:46:18.607

gearman 没有这个功能

# java - 如何在 Libgdx 中的屏幕外观中实现 ZoomIn ZoomOut 的效果

> ID：16052804
> 
> 赞同：0
> 
> 时间：2013-04-17T06:10:47.753
> 
> 标签：java, android, libgdx, zooming

我可以在scene2D的帮助下旋转屏幕，但我也希望当屏幕旋转特定持续时间时，我的屏幕在libgdx中出现缩小效果。我这样做如下：

```
private Stage stage; 
```

在更新方法中

```
Gdx.gl.glClearColor(1, 1, 1, 1);
Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
batch.setProjectionMatrix(camera.combined);

    stage.act(delta);
    stage.draw();

@Override
public void show() {

    stage = new Stage();
    Gdx.input.setInputProcessor(stage);

    Image splashImage = new Image(region);

     splashImage.addAction(Actions.sequence(Actions.moveTo(0,10, 0.5f),
     //move actor to 200,200
     Actions.rotateTo(360, 1f), //rotate actor to 90°
     Actions.fadeOut(0.5f), //fade out actor (change alpha to 0)
     Actions.removeActor()));
             stage.addActor(splashImage);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:53:38.987

您可以使用 Actions.scaleBy(amountX, amountY) 或 Actions.scaleTo(x, y) 或 Actions.sizeTo(x, y) .​​.

# c# - 当我再次选择同一个文件时不起作用：索引超出了数组错误的范围任何想法

> ID：16052806
> 
> 赞同：0
> 
> 时间：2013-04-17T06:11:05.330
> 
> 标签：c#, winforms, excel

这是我第一次选择它工作正常的文件。当我再次选择具有更新值的相同文件时，它给出：索引超出了数组错误的范围，知道出了什么问题，我该如何实现？我正在使用具有更新数据的相同 excel 文件。这是下面的代码：

```
 lblDisplay.Text = string.Empty;
   if (radSite.Checked==true)
            {
                if (openFileDialog.ShowDialog(this) == DialogResult.OK)
                {
                    path = openFileDialog.InitialDirectory + openFileDialog.FileName;
                }
                string constring = "Provider=Microsoft.ACE.OLEDB.12.0; Data Source=" + path + "; Extended Properties=Excel 12.0 Xml";
                OleDbConnection con = new OleDbConnection(constring);
                try
                {
                    con.Open();
                    dt = con.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
                    String[] excelSheets = new String[dt.Rows.Count];
                    foreach (DataRow row in dt.Rows)
                    {
                        excelSheets[i] = row["TABLE_NAME"].ToString(); //am getting error at this point
                        i++;
                    }

                    for (int j = 0; j < excelSheets.Length; j++)
                    {
                        string query = "SELECT * FROM [" + excelSheets[j] + "]; ";
                        OleDbDataAdapter adp = new OleDbDataAdapter(query, constring);

                        DataSet ds = new DataSet();
                        string sCode = string.Empty;
                        string sdescription = string.Empty;
                        adp.Fill(ds);

                        foreach (DataRow dr in ds.Tables[0].Rows)
                        {
                            sCode = Convert.ToString(dr[1]);
                            sdescription = Convert.ToString(dr[2]);
                            // if (!(string.IsNullOrEmpty(hCode) && string.IsNullOrEmpty(description)))
                            {

                                dboject.InsertSiteNameIntoDatabase(sCode, sdescription);

                            }
                        }

                    }
                    lblDisplay.Text = "Inserted successfully";
                }
                catch (Exception ex)
                {
                    dboject.VMSLog(ex.Message);

                }
                finally
                {
                    con.Close();

                }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:16:26.630

`excelSheets`您正在访问counter 上的数组`i`，您可能`i` 在程序开始时进行了一次初始化，然后您没有将其重置回`0`代码中。这就是为什么你得到例外。在您定义数组的代码中`excelSheets`，之后设置`i`为`0`：

```
String[] excelSheets = new String[dt.Rows.Count];
i = 0; //here
//then rest of your code
foreach (DataRow row in dt.Rows)
{
    excelSheets[i] = row["TABLE_NAME"].ToString(); 
    i++;
} 
```

# java - 如何修改 Javadoc 以隐藏特定类

> ID：16052810
> 
> 赞同：1
> 
> 时间：2013-04-17T06:11:14.577
> 
> 标签：java, javadoc

我想获得一个 javadoc，其中包括一个类中所有类的文档。我不希望这个类是私有的 - 然后只在公共类上制作 javadoc - 但想知道是否有一种方法可以在某处设置一个我不想显示的类的名称在 javadoc 中 - 或者我可以在类上放置一个标签，然后 Javadoc 不包含它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:19:56.723

您可以从 javadoc 中排除一个类。但是，如果该类在某处被引用，则该名称将出现在该 javadoc 中。

您甚至在谈论隐藏，那么如果用户看不到正确的签名，那么制作 javadoc 的意义何在？

[http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javadoc.html#exclude](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javadoc.html#exclude)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-13T10:29:55.577

这是我发现的符合我的具体情况的答案，在这种情况下，我不需要我想在文档之外保留的类，可以在它们所在的包之外访问。

因此，在这种情况下，您不要将这些类声明为公共类并将它们与使用它们的类放在同一个包中。

例如，如果您有一个需要为其生成 JavaDocs 的类，并且该类称为 CustomUtility 并且声明如下：

```
public class CustomUtility {

} 
```

但是 CustomUtility 使用了另外两个名为 Calculate 和 Process 的类，它们不应该被项目范围内的任何其他类访问，也不应该包含在您的 JavaDocs 中。您只需确保这两个类与 CustomUtility 在同一个包中，然后像这样声明它们：

```
class Calculate {

} 
```

和

```
class Process {

} 
```

然后，当您生成 JavaDocs 时，请确保您的范围设置为 Project production files，并且这两个类不会包含在 JavaDocs 中。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-04-17T06:18:58.573

从您的代码中临时删除它，并生成代码然后返回它

# php - 从 PHP Markdown 中删除对内部单词强调的支持

> ID：16052811
> 
> 赞同：1
> 
> 时间：2013-04-17T06:11:14.643
> 
> 标签：php, regex, markdown

我正在尝试修改 PHP Markdown 以实现[Jeff Attwood 建议的 3 项更改](http://www.codinghorror.com/blog/2009/12/responsible-open-source-code-parenting.html)中的 2 项，即启用基于返回的换行符并删除对内部单词强调的支持。

我能够很容易地从[如何将单个换行符视为 PHP Markdown 中的真正换行符进行第一次学习？](https://stackoverflow.com/questions/2092966/how-to-treat-single-newline-as-real-line-break-in-php-markdown)，但我发现第二个很难实现。SO上有一个处理它的[问题](https://stackoverflow.com/questions/3380310/i-need-help-modifying-a-regular-expression-for-php-markdown)，但是由于我还不太了解正则表达式，所以我不知道如何实现给定的解决方案。

我需要对[Michel Fortin 的 PHP Markdown](http://michelf.ca/projects/php-markdown/)进行哪些修改才能关闭内部单词强调？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:21:53.217

后来我通过挖掘 PHP Markdown Extra 找到了答案。

```
protected $em_relist = array(
    ''  => '(?:(?<!\*)\*(?!\*)|(?<!_)_(?!_))(?=\S|$)(?![\.,:;]\s)',
    '*' => '(?<=\S|^)(?<!\*)\*(?!\*)',
    '_' => '(?<=\S|^)(?<!_)_(?!_)',
    );
protected $strong_relist = array(
    ''   => '(?:(?<!\*)\*\*(?!\*)|(?<!_)__(?!_))(?=\S|$)(?![\.,:;]\s)',
    '**' => '(?<=\S|^)(?<!\*)\*\*(?!\*)',
    '__' => '(?<=\S|^)(?<!_)__(?!_)',
    );
protected $em_strong_relist = array(
    ''    => '(?:(?<!\*)\*\*\*(?!\*)|(?<!_)___(?!_))(?=\S|$)(?![\.,:;]\s)',
    '***' => '(?<=\S|^)(?<!\*)\*\*\*(?!\*)',
    '___' => '(?<=\S|^)(?<!_)___(?!_)',
    ); 
```

对此：

```
protected $em_relist = array(
    ''  => '(?:(?<!\*)\*(?!\*)|(?<![a-zA-Z0-9_])_(?!_))(?=\S|$)(?![\.,:;]\s)',
    '*' => '(?<=\S|^)(?<!\*)\*(?!\*)',
    '_' => '(?<=\S|^)(?<!_)_(?![a-zA-Z0-9_])',
    );
protected $strong_relist = array(
    ''   => '(?:(?<!\*)\*\*(?!\*)|(?<![a-zA-Z0-9_])__(?!_))(?=\S|$)(?![\.,:;]\s)',
    '**' => '(?<=\S|^)(?<!\*)\*\*(?!\*)',
    '__' => '(?<=\S|^)(?<!_)__(?![a-zA-Z0-9_])',
    );
protected $em_strong_relist = array(
    ''    => '(?:(?<!\*)\*\*\*(?!\*)|(?<![a-zA-Z0-9_])___(?!_))(?=\S|$)(?![\.,:;]\s)',
    '***' => '(?<=\S|^)(?<!\*)\*\*\*(?!\*)',
    '___' => '(?<=\S|^)(?<!_)___(?![a-zA-Z0-9_])',
    ); 
```

完美地完成了这项工作。

# asp.net - 仅带有字符串 ID 的 URL：asp.net 4.0 Webforms 中的 URL 路由

> ID：16052812
> 
> 赞同：0
> 
> 时间：2013-04-17T06:11:15.720
> 
> 标签：asp.net, webforms, url-routing, asp.net-4.0

我之前创建了一个这样的网址

```
www.mydomain.com/brand/nikkon  using URL routing asp.net 4(webforms)

RouteTable.Routes.MapPageRoute("brandRoute","brand/{Name}","~/Viewbrand.aspx"); 
```

现在我想创建一个这样的网址

```
www.mydomain.com/nikkon    by using URL routing asp.net 4(webforms) 
```

请帮忙。

可选：是否可以使用 urlrewriter.net

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T08:18:26.713

利用：

```
RouteTable.Routes.MapPageRoute("brandRoute","/{Name}","~/Viewbrand.aspx"); 
```

# c# - 获取列出 winRt 应用程序中的 blob

> ID：16052813
> 
> 赞同：2
> 
> 时间：2013-04-17T06:11:17.967
> 
> 标签：c#, azure, windows-8

我想列出容器中的 blob。对于桌面应用，Azure 存储 SDK 提供以下方法：

```
CloudBlobContainer container = blobClient.GetContainerReference("myBlob"); 
container.ListBlobs(); 
```

但是，使用[WinRT 库](https://github.com/WindowsAzure/azure-sdk-for-net/tree/master/microsoft-azure-api/Services/Storage/Lib/RT)时，该方法不存在（可能是由于其阻塞性质）。我应该改用什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T06:36:38.943

您需要使用`ListBlobsSegmentedAsync`blob 容器上的函数来获取 blob 列表。例如，请参见下面的代码：

```
 CloudStorageAccount account = new CloudStorageAccount(new StorageCredentials("accountname", "accountkey"), true);
    var client = account.CreateCloudBlobClient();
    var container = client.GetContainerReference("containername");
    BlobContinuationToken continuationToken = null;
    string prefix = null;
    bool useFlatBlobListing = true;
    BlobListingDetails blobListingDetails = BlobListingDetails.All;
    int maxBlobsPerRequest = 10;
    List<IListBlobItem> blobs = new List<IListBlobItem>();
    do
    {
        var listingResult = await container.ListBlobsSegmentedAsync(prefix, useFlatBlobListing, blobListingDetails, maxBlobsPerRequest, continuationToken, null, null);
        continuationToken = listingResult.ContinuationToken;
        blobs.AddRange(listingResult.Results);
    }
    while (continuationToken != null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T03:06:23.627

修改代码以支持 Azure 2.2

```
CloudStorageAccount account = new CloudStorageAccount(new StorageCredentials("accountname", "accountkey"), true);
var client = account.CreateCloudBlobClient();
var container = client.GetContainerReference("containername");
BlobContinuationToken continuationToken = null;
string prefix = null;
bool useFlatBlobListing = true;
BlobListingDetails blobListingDetails = BlobListingDetails.All;
int maxBlobsPerRequest = 10;
List<IListBlobItem> blobs = new List<IListBlobItem>();
do
{
    var listingResult = await container.ListBlobsSegmentedAsync(prefix, useFlatBlobListing, blobListingDetails, maxBlobsPerRequest, continuationToken, null, null);
    continuationToken = **listingResult.Result.ContinuationToken;**
    blobs.AddRange(**listingResult.Result.Results**);
}
while (continuationToken != null); 
```

# iphone - 在 Apple 的 iOS Provision 门户中添加的导出设备

> ID：16052814
> 
> 赞同：21
> 
> 时间：2013-04-17T06:11:19.897
> 
> 标签：iphone, iphone-developer-program

我的苹果开发者将在 5 天后到期。续订后，我想将我的设备数量恢复到 100，但同时我想导出所有当前添加的设备作为备份以备将来使用，这些是 87 台设备。

在新的苹果开发者部分，我没有看到任何导出所有设备的选项，我不想复制粘贴所有 87 台设备:(

注意：我想以 Apple 要求的多设备插入格式导出设备。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-04-03T05:32:17.673

如果您正在寻找一个不需要额外软件、录音或摆弄正则表达式的选项，这里有一个 JavaScript 片段，您可以在 Chrome（或者我假设，任何其他浏览器的）JavaScript 控制台中运行以获得正确的-格式化的设备列表：

```
var ids = ["Device ID"];
var names = ["Device Name"];
$("td[aria-describedby=grid-table_name]").each(function(){
    names.push($(this).html());
});
$("td[aria-describedby=grid-table_deviceNumber]").each(function(){
    ids.push($(this).html());
});

var output = "";
for (var index = 0; index < ids.length; index++) {
    //output += names[index] + "\t" + ids[index] + "\n";    //original
    output += ids[index] + "\t" + names[index] + "\n";      //post September 2016
}
console.log(output); 
```

完整的导出将记录到控制台，此时您可以简单地将其复制/粘贴到一个空的文本文档中，然后可以随时将其重新导入回 Apple。

截至 2015 年 4 月，这适用于 Apple 当前的开发人员站点布局。显然，如果他们更改内容，它可能会中断。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-09-24T02:41:02.947

截至 2021 年 3 月，我创建的这个片段（上面[T.Nhan](https://stackoverflow.com/users/9211664/t-nhan)的答案和 Apple 上传格式指南的混合）只需将输出保存在 .txt 文件中并上传即可开箱即用：

```
var data = document.querySelectorAll(".infinite-scroll-component .row");

var deviceListString = "Device ID\tDevice Name\tDevice Platform\n"
for (var i = 1; i < data.length; i++) {
  deviceListString += (data[i].childNodes[1].innerText + "\t" + data[i].childNodes[0].innerText + "\t" + (data[i].childNodes[2].innerText == "iPhone" || data[i].childNodes[2].innerText == "iPad" || data[i].childNodes[2].innerText == "Apple Watch" ? "ios" : "mac") + "\n");
}

console.log(deviceListString);
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-17T06:44:16.553

打开[设备列表](https://developer.apple.com/account/ios/device/deviceList.action)safari、chrome 或 firefox&firebug。打开网络检查器（在 safari 中选择-cmd-i），转到仪器选项卡（ctrl+3）。按“开始录制”按钮并刷新页面。

在出现的列表的最底部找到“listDevices.action”并选择它。在网络检查器的右栏中，复制并粘贴完整的 URL 并下载带有设备列表的 JSON 文件。然后，用一个简单的正则表达式（即 /\"name\": \"([^\"]+)\",\n\s*\"deviceNumber\": \"([^\"]+)\ "/ ) 您可以获得设备的名称和编号。

Apple 接受的上传格式为

```
Device ID   Device Name
A123456789012345678901234567890123456789    NAME1
B123456789012345678901234567890123456789    NAME2 
```

更新：
啊！Apple 现在在“iOS 设备”页面上提供了完整的 deviceNumber，因此它使整个过程更容易。例如，将列表复制粘贴到 Sublime 文本中，并按正确顺序放置设备的名称和编号：

查找：/^(.*) +([^\n]+)\n/
替换：\2\t\1\n

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-08-30T16:04:38.497

您可以使用名为 Spaceship 的命令工具，它公开了 Apple Developer Center 和 iTunes Connect API

以下是我将所有设备从我的 Apple Developer 帐户迁移到第二个帐户的方法。

```
spaceship1 = Spaceship::Launcher.new("account1@email.com", "password")
spaceship2 = Spaceship::Launcher.new("account2@email.com", "password")

#Get all devices from the Apple Developer account 1.
devices = spaceship1.device.all

#Loop through all devices from account 1 and then add/create them in account2.
devices.each do |device| spaceship2.device.create!(name: device.name, udid: device.udid) end 
```

注意：要在终端中快速使用 spaceship launch irb 并执行 require “spaceship”。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-09-26T14:57:18.903

以上都不适合我，很可能是因为苹果改变了格式。但完美的工作如下：

*   从 Apple 设备页面复制/粘贴所有项目
*   粘贴到数字中，设备 ID 和名称被识别为 2 个不同的列
*   拖动列顺序，使设备优先而不是名称
*   将所有行复制/粘贴到文本文件中
*   上传到 Apple 就完成了

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-06-11T07:18:47.587

现在，Apple 不再拥有 JQuery。我们可以使用这个查询来获取

```
var data = document.querySelectorAll(".infinite-scroll-component .row");
for(var i = 0 ; i < dencho.length; i++){
  var name =  data[i].childNodes[0];
  var id =  data[i].childNodes[1]
  console.log(name.innerText + "\t" +  id.innerText  + "\n");
}
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-01-02T11:23:39.053

自最新回复以来，网页结构似乎已进行了一些编辑。我的新片段还将输出格式化为 CSV，因此您可以保存输出并使用 Numbers/Excel 打开并共享它。

```
var data = document.querySelectorAll(".infinite-scroll-component .row");
var csvOutput = "Name, Identifier, Type\n"

for (var i = 1; i < data.length; i++) {
    let name = data[i].childNodes[0].childNodes[0].textContent;
    let identifier = data[i].childNodes[1].childNodes[0].textContent;
    let type = data[i].childNodes[2].childNodes[0].textContent;
    let device = [name, identifier, type].join(", ") + "\n";
    csvOutput += device;
}

console.log(csvOutput);
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-17T06:38:55.803

查看[Mattt 的](https://github.com/mattt)命令行界面工具[Cupertino](https://github.com/mattt/cupertino)

您可以运行`ios devices:list`以获取您帐户中的设备列表。

它可能不是 Apple 导入器的确切格式，但它应该让你明白，还有`ios devices:add`可以让你从命令行重新添加你的设备。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-22T08:29:28.350

就我而言，我还想获取设备型号（例如，iPhone X、iPhone 8 ....）您可以使用对象获取基于 UDID 的任何设备信息`var object = JSON.parse(this.responseText);`

```
var data = document.querySelectorAll(".infinite-scroll-component .row");
var deviceListString = ""
var databody = JSON.stringify({
  teamId: 'XXXXXXXX' // your team id here
})

for (var i = 1; i < data.length; i++) {
    var xhr = new XMLHttpRequest()
    xhr.withCredentials = true
    xhr.addEventListener('readystatechange', function() {
        if (this.readyState === this.DONE) {
            var object = JSON.parse(this.responseText);
            deviceListString += object.data.attributes.name + "\t" + object.data.attributes.model + "\t" +object.data.attributes.udid + "\n";
        }
    })

    var rowID = data[i].getAttribute('data-id');
    var url = `https://developer.apple.com/services-account/v1/devices/${rowID}?fields[devices]=name,udid,platform,model,status,devicePlatformLabel`
    xhr.open('POST', url);
    xhr.setRequestHeader('content-type', 'application/vnd.api+json');
    xhr.setRequestHeader('x-http-method-override', 'GET');
    xhr.send(databody);
} 
```

当您输入回车时，结果存储在 deviceListString 所以只需获取该值

```
deviceListString 
```

这是截图： [![在此处输入图像描述](https://i.stack.imgur.com/zexso.png)](https://i.stack.imgur.com/zexso.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-31T20:32:38.887

[我对此的解决方案是在此处](https://developer.apple.com/account/ios/profile/)创建新的配置文件 并将所有设备添加到其中。然后下载它并用 vim（或任何其他编辑器）打开。该文件将包含所有设备的一些二进制样式和 plist (xml)，我猜可以解析，但我只是 c&p 设备列表。喜欢：

```
<key>ProvisionedDevices</key>
   <array>
       <string>device1 udid</string>
       ....
       <string>deviceN udid</string>
   </array> 
```

如果您之后不需要它，请删除您的配置文件。

# ssis - 在 ssis 2012 中为自定义控制流组件加载编辑器时出错

> ID：16052815
> 
> 赞同：0
> 
> 时间：2013-04-17T06:11:20.653
> 
> 标签：ssis

我在尝试打开自定义控制流组件的编辑器时遇到问题。我试图复制包所在的dll，但没有帮助。如果我做错了什么或如何解决此问题，请告诉我。

```
Here is the code:
Main class inherits TASK                         

namespace SSIS.Custom.ControlFlowUI
{
        [DtsTask  (
       DisplayName = "CopyTable",
       Description = "A custom Unzip task for demonstration purposes.",
       TaskType = "CustomComponent",
       UITypeName = "CopyTableTaskUI, CopyTable, Version=1.0.0.0,Culture=Neutral, PublicKeyToken=9097a336d1055e0b")]

    public class CopyTable : Task
    {
         #region Override methods

            public override DTSExecResult Validate(Connections connections,
            VariableDispenser variableDispenser, IDTSComponentEvents componentEvents,
            IDTSLogging log)
            {
                return base.Validate(connections, variableDispenser, componentEvents, log);
            }

            public override DTSExecResult Execute(Connections connections, VariableDispenser variableDispenser, IDTSComponentEvents componentEvents, IDTSLogging log, object transaction)
            {
                try
                {
                    ValidateSchema(@"GGN19\MSSQL12");

                    //   Return success.
                    return DTSExecResult.Success;
                }
                catch (System.Exception exception)
                {
                    //   Capture exceptions, post an error, and fail validation.

                    return DTSExecResult.Failure;
                }
            }
        #endregion

        #region Public methods

            public string ValidateSchema(string tableName)
            {
                GetTableList(tableName);
                return "";
            }

            private List<string> GetTableList(string ServerName)
            {
                List<string> lTables = new List<string>();
                try
                {

                    SqlConnection dbConn = new SqlConnection("Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=TestingTmp;Data Source=" + ServerName);
                    SqlCommand dbCmd = new SqlCommand("Select NAME from sysobjects where type ='U';", dbConn);
                    dbConn.Open();
                    SqlDataReader SqlDR = dbCmd.ExecuteReader();

                    while (SqlDR.Read())
                    {
                        lTables.Add(SqlDR.GetString(0));
                    }
                    dbConn.Close();

                }
                catch (Exception ex) { }
                return lTables;
            }

            private bool ValidateTableSchema(string ServerName, string table1, string table2)
            {
                SqlConnection dbConn = new SqlConnection("Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=msdb;Data Source=" + ServerName);
                SqlCommand dbCmd = new SqlCommand("Select * from '" + table1 + "';", dbConn);
                dbConn.Open();
                SqlDataReader SqlDR = dbCmd.ExecuteReader();
                DataTable schema = SqlDR.GetSchemaTable();

                dbCmd = new SqlCommand("Select * from '" + table2+  "';", dbConn);
                dbConn.Open();
                SqlDR = dbCmd.ExecuteReader();
                DataTable schema2 = SqlDR.GetSchemaTable();

                return schema.Equals(schema2);

             }

        #endregion

       }

UI Class
namespace ControlFlowUI
{
    public class CopyTableTaskUI : IDtsTaskUI
    {

        #region // Fields
         private TaskHost _taskHost;
        #endregion

        #region Properties

        #endregion

        #region Methods

         public void Initialize(TaskHost taskHost, IServiceProvider serviceProvider)
         {

             _taskHost = taskHost;
         }

         public ContainerControl GetView()
        {

            return new CopyTableFrm(_taskHost);
        }

        #endregion

             #region IDtsTaskUI Members

             public void Delete(IWin32Window parentWindow)
             {
                 throw new NotImplementedException();
             }

             public void New(IWin32Window parentWindow)
             {
                 throw new NotImplementedException();
             }

             #endregion
    }
} 
```

错误与附加到自定义控制流的用户界面有关，基本上你可以创建两种类型的控制流组件一种是简单的转换，另一种你也可以有一些 UI 来获取用户输入，ssis 将允许你双击在组件上并提供值...所以当我双击 com 以获取 UI 时，它会抛出错误.. 标题：Microsoft Visual 无法显示此任务的编辑器。无法加载类型名称“CopyTableTaskUI, CopyTable, Version=1.0.0.0,Culture=Neutral, PublicKeyToken=9097a336d1055e0b”指定的任务用户界面。无法加载文件或程序集“CopyTable，Version=1.0.0.0，Culture=neutral，PublicKeyToken=9097a336d1055e0b”或其依赖项之一。这

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-26T21:28:00.013

我遇到了类似的错误“无法加载类型：”，然后是“验证组件编辑器是否已正确安装。”。当我在客户端机器上部署我的 dll 时出现了这个问题，它在创建后的第二个会话中重新编辑 DTSX 包后出现。自定义 UI 不会出现。

我通过将自定义 dll 复制到 Visual Studio 所在的文件夹 (devenv.exe) 来解决这个问题。这个 VS 是一个 shell 版本，适合创建 DTSX 包和其他东西。

在 GAC 中安装我的 DLL 没有帮助。我必须提到我的包没有强签名，但我使用“reg file / Merge”运行异常但无济于事。

# android - 应用程序在获取已安装软件包的名称时意外停止

> ID：16052819
> 
> 赞同：3
> 
> 时间：2013-04-17T06:11:39.237
> 
> 标签：android

我正在使用以下代码，但是当我运行它时，它“意外停止”

我已授予以下权限

```
<uses-permission android:name="android.permission.RESTART_PACKAGES" />
<uses-permission android:name="android.permission.GET_TASKS" />
<uses-permission android:name="android.permission.GET_PACKAGE_SIZE" /> 
```

这段代码有什么问题：

```
import java.util.List;        
import android.app.Activity;
import android.content.Context;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.os.Bundle;
import android.util.Log;

public class MainActivity extends Activity
{
    public static  String Tag = "Task";
    Context ctx;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        //Intent service = new Intent(this,MyService.class);
        PackageManager pm = getApplicationContext().getPackageManager();
           List<ApplicationInfo> pis = pm.getInstalledApplications(PackageManager.GET_UNINSTALLED_PACKAGES);        

        for (ApplicationInfo appinfo : pis) 
        {
            String S1=appinfo.className.toString();
            Log.i(Tag,S1);

        }
    }
} 
```

我正在尝试一一检索已安装的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:49:09.727

的值`appinfo.className`可以是`null`。尝试这个：

```
for (ApplicationInfo appinfo : pis) 
{
    Log.i(Tag, "" + appinfo.className);
} 
```

你会在你的日志中看到很多空值。

# android - 如何多次刷新Android listview？

> ID：16052820
> 
> 赞同：3
> 
> 时间：2013-04-17T06:11:43.997
> 
> 标签：android, android-intent, android-listview

1.  我已经在arraylist上实现了删除操作

    ```
    voiceUrl_list.remove(position); 
    ```

2.  我用过 listvoice.invalidateViews(); // 导致所有视图被重建和重绘！

它刷新视图，并显示一次，但在进一步单击时，应用程序会崩溃。

这是代码！

```
convertView.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {

                    voiceURL=voiceUrl_list.get(position);

                    Log.i("_voice_url_clicked_"," "+voiceURL);  
                    toast = null;
                    try 
                    {
                        player.setDataSource(voiceURL); // setup song from http://www.hrupin.com/wp-content/uploads/mp3/testsong_20_sec.mp3 URL to mediaplayer data source

                        player.prepare(); // you must call this method after setup the datasource in setDataSource method. After calling prepare() the instance of MediaPlayer starts load data from URL to internal buffer.
                    } 
                    catch (Exception e) 
                    {
                        e.printStackTrace();
                    }
                    if(!player.isPlaying())
                    {
                        player.start();
                        Toast.makeText(Call_In_Out.this,"Playing Audio ...",5000).show();

                       Log.i("response is"," uu"+a);

                    }
                    else 
                    {
                        player.pause();

                        Log.e("Pause ***","Inside Else Block***********PAUSE");
                    }   

                    player.setOnCompletionListener(new
                            OnCompletionListener() {

           @Override

 public void onCompletion(MediaPlayer arg0) {

                                              Toast.makeText(getApplicationContext(),"Finished Playing",2000).show();

                                              voiceURL=voiceUrl_list.get(position);

//removing the arraylist entries                                    

                                                voiceUrl_list.remove(position);

                                                listvoice.invalidateViews(); // causes all the views to be rebuilt and redrawn !

                                         }
                                      }); 
```

Logcat中显示的错误：

```
04-17 07:42:42.898: E/AndroidRuntime(5676): FATAL EXCEPTION: main
04-17 07:42:42.898: E/AndroidRuntime(5676): java.lang.NullPointerException
04-17 07:42:42.898: E/AndroidRuntime(5676):     at com.zoemultiline.call.Call_In_Out$ListVoiceAdapter$1.onClick(Call_In_Out.java:427)
04-17 07:42:42.898: E/AndroidRuntime(5676):     at android.view.View.performClick(View.java:4204)
04-17 07:42:42.898: E/AndroidRuntime(5676):     at android.view.View$PerformClick.run(View.java:17355)
04-17 07:42:42.898: E/AndroidRuntime(5676):     at android.os.Handler.handleCallback(Handler.java:725)
04-17 07:42:42.898: E/AndroidRuntime(5676):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-17 07:42:42.898: E/AndroidRuntime(5676):     at android.os.Looper.loop(Looper.java:137)
04-17 07:42:42.898: E/AndroidRuntime(5676):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-17 07:42:42.898: E/AndroidRuntime(5676):     at java.lang.reflect.Method.invokeNative(Native Method)
04-17 07:42:42.898: E/AndroidRuntime(5676):     at java.lang.reflect.Method.invoke(Method.java:511)
04-17 07:42:42.898: E/AndroidRuntime(5676):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-17 07:42:42.898: E/AndroidRuntime(5676):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-17 07:42:42.898: E/AndroidRuntime(5676):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:23:13.127

只需更新填充列表视图的数组或数据，然后调用下面的方法。

```
YOUR_ADAPTER.notifyDataSetChanged(); 
```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:13:38.540

要刷新列表视图，请更新其基础的数组（或其他数据结构）。然后在列表的适配器上调用 notifyDataSetChanged。

# java - 如文本文件中所示格式化 JTable？

> ID：16052821
> 
> 赞同：1
> 
> 时间：2013-04-17T06:11:46.487
> 
> 标签：java, swing, text, jtable

嗨，我正在将一个文本文件读入`JTable`，但这是我的 JTable 现在的样子： ![在此处输入图像描述](https://i.stack.imgur.com/YwOyS.jpg)

如何正确格式化并允许`JTable`用户编辑？

我的文本文件：文件名（people.txt）

```
COLUMN_NAME COLUMN_TYPE IS_NULLABLE COLUMN_KEY  COLUMN_DEFAULT  EXTRA   
Names   VARCHAR(500)    NO  
Address VARCHAR(500)    NO 
```

到目前为止的编码：

```
 import java.io.*;
 import java.awt.*;
 import java.util.*;
 import javax.swing.*;
 import java.awt.event.*;
 import javax.swing.table.*;

   public class stackq extends AbstractTableModel {
    Vector data;
    Vector columns;

    public stackq() {
            String line;
            data = new Vector();
            columns = new Vector();
            try {
                    FileInputStream fis = new FileInputStream("D:/joy/text/people.txt");
                    BufferedReader br = new BufferedReader(new InputStreamReader(fis));
                    StringTokenizer st1 = new StringTokenizer(br.readLine(), " ");
                    while (st1.hasMoreTokens())
                            columns.addElement(st1.nextToken());
                    while ((line = br.readLine()) != null) {
                            StringTokenizer st2 = new StringTokenizer(line, " ");
                            while (st2.hasMoreTokens())
                                    data.addElement(st2.nextToken());
                    }
                    br.close();
            } catch (Exception e) {
                    e.printStackTrace();
            }
    }

    public int getRowCount() {
            return data.size() / getColumnCount();
    }

    public int getColumnCount() {
            return columns.size();
    }

    public Object getValueAt(int rowIndex, int columnIndex) {
            return (String) data.elementAt((rowIndex * getColumnCount())
                            + columnIndex);
    }

     public String getColumnName(int i){
         return (String)columns.get(i);
              }

      public static void main(String s[]) {
            stackq model = new stackq();
            JTable table = new JTable();
            table.setModel(model);
           JScrollPane scrollpane = new JScrollPane(table);
            JPanel panel = new JPanel();
            panel.add(scrollpane);
            JFrame frame = new JFrame();
            frame.add(panel, "Center");
            frame.pack();
            frame.setVisible(true);
         }
      } 
```

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:25:04.477

```
public Stackq() {
String line;
data = new Vector();
columns = new Vector();
int count = 0;
try {
    FileInputStream fis = new FileInputStream("D:\\1.txt");
    BufferedReader br = new BufferedReader(new InputStreamReader(fis));
    StringTokenizer st1 = new StringTokenizer(br.readLine(), " ");
    while (st1.hasMoreTokens()) {
    columns.addElement(st1.nextToken());
    count++;
    }
    while ((line = br.readLine()) != null) {
    StringTokenizer st2 = new StringTokenizer(line, " ");
    for (int i = 0; i < count; i++) {
        if (st2.hasMoreTokens())
        data.addElement(st2.nextToken());
        else
        data.addElement("");
    }
    }
    br.close();
} catch (Exception e) {
    e.printStackTrace();
}
} 
```

只需为标头计数添加一个计数变量，并将空字符串添加到标记器返回 null 的数据向量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:28:19.700

试试这个如果您使用的是 NetBean，您可以在其中将对象列表绑定到表，并使用相应的值**empMList**绑定列是员工列表。

```
org.jdesktop.swingbinding.JTableBinding jTableBinding = org.jdesktop.swingbinding.SwingBindings.createJTableBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, empMList, jTable1);
        org.jdesktop.swingbinding.JTableBinding.ColumnBinding columnBinding = jTableBinding.addColumnBinding(org.jdesktop.beansbinding.ELProperty.create("${address}"));
        columnBinding.setColumnName("Address");
        columnBinding.setColumnClass(String.class);
        columnBinding = jTableBinding.addColumnBinding(org.jdesktop.beansbinding.ELProperty.create("${name}"));
        columnBinding.setColumnName("Employee Name");
        columnBinding.setColumnClass(String.class);
        columnBinding.setEditable(false);
        bindingGroup.addBinding(jTableBinding); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:19:29.957

为什么不使用[`DefaultTableModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html)来表示表中的数据？它将为您处理所有与 Swing 相关的内容，您可以分别使用`addColumn(Object)`和轻松地向其添加列或行。`addRow(Object[])`

首先，您将创建一个`DefaultTableModel`对象。

然后，而不是创建一个`Vector columns`，你只需`model`通过做来填充

```
model.addColumn(st1.nextToken()); // (for adding a column) 
```

或者

```
Vector row = new Vector();
StringTokenizer st2 = new StringTokenizer(line, " ");
while (st2.hasMoreTokens()) {
    row.add(st2.nextToken());
}
result.addRow(row); // for adding a row 
```

# javascript - jQuery focus() 在段落末尾而不是开头

> ID：16052822
> 
> 赞同：2
> 
> 时间：2013-04-17T06:11:48.220
> 
> 标签：javascript, jquery

删除当前段落后，我有以下代码专注于上一段。

```
$(document).on('keyup', 'p[contenteditable="true"]', function(e) {
    if(e.which == 13) {
        e.preventDefault();
        $(this).after('<p contenteditable = "true">New Paragraph</p>');
        $(this).next('p').focus();
    } else if((e.which == 8 || e.which == 46) && $(this).text() == "") {
        e.preventDefault();
        var prev = $(this).prev('p');
        $(this).remove();
        prev.focus();
    };
}); 
```

但是，它总是将光标移动到段落的开头。是否可以将光标移动到末尾？

[http://jsfiddle.net/UU4Cg/6/](http://jsfiddle.net/UU4Cg/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:24:02.693

从这个很好的堆栈答案中获取函数，这似乎对我有用：[如何将光标移动到 contenteditable 实体的末尾](https://stackoverflow.com/questions/1125292/how-to-move-cursor-to-end-of-contenteditable-entity)

```
function setEndOfContenteditable(contentEditableElement)
{
    var range,selection;
    if(document.createRange)//Firefox, Chrome, Opera, Safari, IE 9+
    {
        range = document.createRange();//Create a range (a range is a like the selection but invisible)
        range.selectNodeContents(contentEditableElement);//Select the entire contents of the element with the range
        range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start
        selection = window.getSelection();//get the selection object (allows you to change selection)
        selection.removeAllRanges();//remove any selections already made
        selection.addRange(range);//make the range you have just created the visible selection
    }
    else if(document.selection)//IE 8 and lower
    { 
        range = document.body.createTextRange();//Create a range (a range is a like the selection but invisible)
        range.moveToElementText(contentEditableElement);//Select the entire contents of the element with the range
        range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start
        range.select();//Select the range (make it the visible selection
    }
}

$(document).on('keyup', 'p[contenteditable="true"]', function(e) {
    if(e.which == 13) {
        e.preventDefault();
        $(this).after('<p contenteditable = "true">New Paragraph</p>');
        $(this).next('p').focus();
    } else if((e.which == 8 || e.which == 46) && $(this).text() == "") {
        e.preventDefault();
        var prev = $(this).prev('p');
        $(this).remove();
        prev.focus();
        setEndOfContenteditable(prev.get(0));
    };
}); 
```

# database - 在数据库查询中使用变量作为列名

> ID：16052823
> 
> 赞同：0
> 
> 时间：2013-04-17T06:11:48.450
> 
> 标签：database, matlab

如何使用列名（where 子句）检索 matlab 数据库中的数据？我已经尝试过了，但它不起作用：

```
catgQuery = strcat('select ID from MyTable where ColumnName= ', Category);
catgCurs = exec(conn,catgQuery);
catgResult = fetch(catgCurs);
r1 = catgResult.data 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:49:14.150

你需要在周围加上引号`category`

```
catgQuery = strcat('select ID from MyTable where ColumnName= ''', Category, ''''); 
```

# ruby-on-rails-3 - Rails 3中的取消订阅功能

> ID：16052824
> 
> 赞同：0
> 
> 时间：2013-04-17T06:11:53.283
> 
> 标签：ruby-on-rails-3

我想向我的应用程序添加取消订阅功能。实现它的最佳方法是什么？我正在考虑添加一个布尔列，并根据它的真/假值发送邮件，但在这种情况下，我必须为每种类型的通知创建一个布尔列。有没有办法创建一个包含哈希的单列，例如：

```
{:daily_notification=>true, :weekly_notification=>false, :yearly_notification=>true} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:14:27.627

我在我的应用程序中按照以下方式进行操作，因为我有很多需要取消订阅的电子邮件，所以我将权限哈希保存`YAML format`在我的用户表中，如下所示

```
add_column :users, :permission, :string, :limit=> 500 
```

保存默认权限

```
user = User.first
default_permission_hash = {"send_daily_email"=>"true", "send_weekly_email"=>"true", "send_monthly_email"=>"true"}
user.permission = default_permission_hash.to_yaml
user.save 
```

更新权限

```
user = User.first
permission_hash = YAML::load(user.permission)
permission_hash["send_daily_email"] = false
user.permission = permission_hash.to_yaml
user.save 
```

在模型中

```
def is_permission_for?(email)
  permission_hash = YAML::load(self.permission) 
  permission_hash[email] == "true"
end 
```

在控制器中

```
user = User.first

if user.is_permission_for?("send_daily_email")
  //send daily email
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:19:05.390

Salil 建议的替代方法是使用单个[位掩码](http://en.wikipedia.org/wiki/Mask_%28computing%29)列，我们称之为`subscription_mask`.

首先，在适当的模型中设置一个数组常量（假设`User`）：

```
# user.rb
SUBSCRIPTION_TYPES = ["Daily", "Weekly", "Monthly"] 
```

稍后可以添加其他订阅类型，只要它位于此数组的末尾即可。这一列可以非常有效地存储大量标志。

然后，您可以使用 virtual 属性创建一组与位掩码交互的方法`subscriptions`：

```
# Make subscriptions attr_accessible so we can mass assign to it (useful for forms)
attr_accessible :subscriptions

# Basic setter, overwrites all subscriptions with an array of subscriptions
def subscriptions=(subs)
  self.subscription_mask = (SUBSCRIPTION_TYPES & subs).map{ |s| 2**SUBSCRIPTION_TYPES.index(r) }.inject(0, :+)
end

# Basic getter, returns an array of the set subscriptions
def subscriptions
  SUBSCRIPTION_TYPES.reject do |s|
    ((subscription_mask || 0) & 2**SUBSCRIPTION_TYPE.index(s).zero?
  end
end

# Check if a subscription is set
def has_subscription? (sub)
  self.subscriptions.includes? sub
end

# Add subscriptions to the current mask without affecting any others
def set_subscriptions (*subs)
  self.subscriptions = self.subscriptions | subs
end

# Remove subscriptions from the current mask without affecting any others
def unset_subscriptions (*subs)
  self.subscriptions = self.subscriptions - subs
end 
```

那里有一些方法，但我发现它们在不同的情况下很有帮助。

使用这些方法，您可以像这样设置用户的订阅：

```
@user.subscriptions = ["Weekly", "Monthly"] 
```

并检查他们是否订阅了：

```
@user.has_subscription? "Daily" # => false, in this case 
```

如果同一用户订阅了每日消息但取消订阅每周消息：

```
@user.set_subscriptions "Daily"
@user.unset_subscriptions "Weekly" # => ["Weekly", "Monthly"]
# Or, to do both changes at once (you need to re-set Weekly though)
@user.subscriptions = ["Weekly", "Monthly"] 
```

这种方法的另一个优点是可以在查询中使用它。例如，要让所有用户每周订阅：

```
User.where("subscription_mask & ? > 0", 2**SUBSCRIPTION_TYPES.index("Weekly")) 
```

它有点混乱，但可以使用方法或范围轻松清理。

# entity-framework - OFBiz视图实体的条件连接

> ID：16052830
> 
> 赞同：0
> 
> 时间：2013-04-17T06:12:12.473
> 
> 标签：entity-framework, join, left-join, conditional-statements, ofbiz

我有两个表 emp 和 emp_attributes 我想在其中进行条件连接

# 雇员

```
empno | ename  | location | salary
  1   | Josh   |    LA    |  1200
  2   | Joe    |    NY    |  1000
  3   | George |    LA    |  1500 
```

# emp_attributes

```
empno | attr_name  | attr_value
  1   | appraised  |    10%
  1   | basicSalary|    700
  2   | basicSalary|    600
  2   | appraised  |    12%
  2   | spouseName |   Amelia
  3   | appraised  |    25%
  3   | basicSalary|    700
  3   | spouseName |    Lucy 
```

我想查看查询，例如

```
SELECT E.*, EA1.ATTR_VALUE AS APPRAISAL_RATE, EA2.ATTR_VALUE AS SPOUSE_NAME FROM EMP E
LEFT JOIN EMP_ATTRIBUTES EA1 ON E.EMPNO=EA1.EMPNO AND EA1.ATTR_NAME='appraised'
LEFT JOIN EMP_ATTRIBUTES EA2 ON E.EMPNO=EA2.EMPNO AND EA2.ATTR_NAME='spouseName';

Expected Output
empno | ename  | location | salary | APPRAISAL_RATE | SPOUSE_NAME
  1   | Josh   |    LA    |  1200  |      10%       |    NULL
  2   | Joe    |    NY    |  1000  |      12%       |   Amelia
  3   | George |    LA    |  1500  |      25%       |    Lucy 
```

我试过了

```
<view-entity entity-name="EmpAndEmpAttributesAndEmpAttributes"
             package-name="com.proj.employee"
             title="Employee and Employee Attribute and Employee Attribute">
     <member-entity entity-alias="E" entity-name="Emp"/>
     <member-entity entity-alias="EA1" entity-name="EmpAttributes"/>
     <member-entity entity-alias="EA2" entity-name="EmpAttributes"/>

     <alias-all entity-alias="E"/>
     <alias-all entity-alias="EA1"/>
     <alias-all entity-alias="EA2"/>

    <view-link entity-alias="E" rel-entity-alias="EA1" rel-optional="true">
        <key-map field-name="empno"/>
    </view-link>
    <entity-condition>
        <condition-expr entity-alias="EA1" field-name="attrName" operator="equals" value="appraised" />
    </entity-condition>

    <view-link entity-alias="E" rel-entity-alias="EA2" rel-optional="true">
        <key-map field-name="empno"/>
    </view-link>
    <entity-condition>
        <condition-expr entity-alias="EA1" field-name="attrName" operator="equals" value="spouseName" />
    </entity-condition>
</view-entity> 
```

有人让我知道我做错了什么？或任何其他解决此问题的方法...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:55:44.083

条件应该放在“view-link”节点中，因为它不是“where”条件，而是“join”条件。

```
<view-link entity-alias="E" rel-entity-alias="EA1" rel-optional="true">
    <key-map field-name="empno"/>
    <entity-condition>
        <condition-expr entity-alias="EA1" field-name="attrName" operator="equals" value="appraised" />
    </entity-condition>
</view-link> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T21:26:59.803

看起来这是一个已知问题，在某些版本的 OFBiz 中，实体条件在视图链接中不起作用，请参阅：[https ://issues.apache.org/jira/browse/OFBIZ-4781](https://issues.apache.org/jira/browse/OFBIZ-4781)

您可以通过检查 GeneralDao.java 生成的实际 SQL 来确认这一点，我在尝试对动态视图实体执行相同操作时遇到了类似的问题。

# java - Java 异步套接字 IO

> ID：16052832
> 
> 赞同：0
> 
> 时间：2013-04-17T06:12:26.050
> 
> 标签：java, asynchronous, io, nio

我已经看遍了，但找不到一个很好的例子来解释 NIO2 或如何使用 Java 套接字进行异步 IO。例如，如果我想通过允许线程使用异步 IO 从套接字读取而不是常规同步 IO 来加速网络爬虫，我将如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:16:21.263

NIO2 并不比同步 I/O 快。它允许用几个线程运行许多连接（数万个）。如果您有能力为每个连接花费一个线程，请使用同步 I/O - 编程更简单。

# vb6 - 0 是什么意思！在vb6.0中是什么意思？

> ID：16052835
> 
> 赞同：1
> 
> 时间：2013-04-17T06:12:34.597
> 
> 标签：vb6

我在 IF 条件 0 中找到了一个代码！与用户输入的值相比。我尝试使用“0！” 立即窗口中的值，它只返回 0。

所以，我想知道什么是'！到底是为了什么？？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T06:15:57.187

[http://msdn.microsoft.com/en-us/library/s9cz43ek(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/s9cz43ek(v=vs.80).aspx)

它强制文字 0 的类型为 Single。

另请参阅：http: [//msdn.microsoft.com/en-us/library/dzy06xhf.aspx](http://msdn.microsoft.com/en-us/library/dzy06xhf.aspx)关于附加类型字符。

0！表示它是浮点数（Single）而不是整数。

```
typeOf 0! is Single
typeOf 0 is Integer 
```

# python - Python Itertools：复杂的“产品”

> ID：16052843
> 
> 赞同：1
> 
> 时间：2013-04-17T06:12:53.823
> 
> 标签：python, product, itertools

```
1+3+9 = 13 = 1+3 = 4.
6+1+1+5 = 13 = 1+3 = 4.
9+9+4 = 22 = 2+2 = 4.
etc 
```

考虑到前面的例子，可以说减少到数字 4 的可能性上升到无穷大。然而，控制在初始总和游戏中输入的位数是可能的。

```
def reduct(length):
    ...
    ...
    return reduction 
```

你们对我如何编写这样的函数有任何想法吗？我想输入一个“长度”，例如，假设它是 7，并且假设结束减少是 5，我希望它这样做：

x+x+x+x+x+x+x = 5。

它为我提供了 x 数字的所有可能性。

我花了太多时间试图解决这个问题，但我不知道该怎么做。顺便说一句，这是一个非常好的编程练习（一个很好的挑战）；我非常感谢大家的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T06:32:57.243

我设法想出了一个解决方案（假设`itertools`已经导入）：

```
def reduct(length, n=5):
    return [i for i in \
            itertools.combinations_with_replacement(range(1, 10), length) \
            if ((sum(i) - 1) % 9 + 1) == n] 
```

这将返回“减少”到的所有唯一组合`n`，这是`5`默认情况下的。

* * *

解释：

*   `itertools.combinations_with_replacement(range(1, 10), length)`产生`length`一位数字的所有唯一组合（不包括`0`）。请参阅[文档](http://docs.python.org/2/library/itertools.html#itertools.combinations_with_replacement)。
*   `((sum(i) - 1) % 9 + 1)`产生每个组合的“减少”。它使用[数字根](http://en.wikipedia.org/wiki/Digital_root)公式`((n - 1) % 9 + 1`，`n`作为组合中数字的总和。
*   其余的都是不言自明的（我希望）。

* * *

一些测试运行：

```
>>> reduct(2)
[(1, 4), (2, 3), (5, 9), (6, 8), (7, 7)]
>>> reduct(3)
[(1, 1, 3), (1, 2, 2), (1, 4, 9), (1, 5, 8), (1, 6, 7), (2, 3, 9),
 (2, 4, 8), (2, 5, 7), (2, 6, 6), (3, 3, 8), (3, 4, 7), (3, 5, 6),
 (4, 4, 6), (4, 5, 5), (5, 9, 9), (6, 8, 9), (7, 7, 9), (7, 8, 8)]
>>> len(reduct(7))
715 
```

指定自定义`n`：

```
>>> reduct(2, 8)
[(1, 7), (2, 6), (3, 5), (4, 4), (8, 9)]
>>> reduct(3, 8)
[(1, 1, 6), (1, 2, 5), (1, 3, 4), (1, 7, 9), (1, 8, 8), (2, 2, 4),
 (2, 3, 3), (2, 6, 9), (2, 7, 8), (3, 5, 9), (3, 6, 8), (3, 7, 7),
 (4, 4, 9), (4, 5, 8), (4, 6, 7), (5, 5, 7), (5, 6, 6), (8, 9, 9)]
>>> len(reduct(7, 8))
715 
```

# javascript - 数据绑定不返回所需的值

> ID：16052847
> 
> 赞同：0
> 
> 时间：2013-04-17T06:13:28.950
> 
> 标签：javascript, knockout.js, durandal

嗨，我只是在学习knockout.js 和基本上在客户端编程。我在服务器上使用web api 向客户端发送一些数据。这是来自服务器的模型：

```
 public IEnumerable<POC_GetUpcomingLessons_Result> UpcomingLessons { get; set; }

 public IEnumerable<POC_GetUpcomingExams_Result> UpcomingExams { get; set; }

 public IEnumerable<POC_StudentTasks> ToDoList { get; set; } 
```

现在我确信数据已经到达客户端，因为我尝试调试代码并返回一个包含所需数据的对象。这是我在客户端制作的代码：

```
var dashboardObservableCollection = ko.observableArray();
    var isInitialized = false;

    var vm = {
        dashboard: dashboardObservableCollection,

        //operations
        refreshData: refreshData,      
        activate: activate
    };
    console.log("I got here");
    return vm;

    function activate() {
        logger.log("Dashboard View Activated", null, 'dashboard', true);
        if (!isInitialized) {
            isInitialized = true;
            ...
            return fetchModulesData();
        }
    }

    function fetchModulesData() {
        return dataService.getDashboard(1200528)
            .then(fetchModulesCompleted)
            .fail(fetchDataFailed);

        function fetchModulesCompleted(data) {
            dashboardObservableCollection(data.ToDoList);
            debugger;
            vm.dataLoading(false);
        } 
```

这里的数据取回了我选择暂时只获取 ToDoList 的所有三个 IEnumerables。

这是视图：

```
<ul class='to-do' data-bind="foreach: dashboard">
            <!--ko compose: {view: 'dashboard/toDoList'} -->
            <!--/ko-->
</ul>

<li>Fill in initial evaluation
     <ul>
         <li class="course icon" data-bind="text : ModuleName"></li>
         <li class="courses icon">
               <a href="#" data-bind="text : CourseName"></a>
          </li>
          <li class="teacher icon" data-bind="text: TeacherName"></li>
     </ul> 
```

我不确定我在哪里犯了错误，但是数据到达了客户端，我似乎无法让它显示在视图上。它甚至没有进入 foreach。我做错了什么？

# sql - Oracle SQL 中不考虑年份的两个日期之间的差异

> ID：16052850
> 
> 赞同：-1
> 
> 时间：2013-04-17T06:13:40.070
> 
> 标签：sql, oracle

我想问一下两个日期之间的区别，它不考虑检查生日的年份。我找到查询来检查两个日期并考虑年份。

例如，

```
 SELECT to_date(SYSDATE,'DD-MM-YYYY') - to_date(dateofbirth,'DD-MM-YYYY')
   FROM employees; 
```

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:35:27.363

一种简单的方法是使用[`DDD`格式模型](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#i34924)查看一年中日期的序数：

```
to_number(to_char(sysdate, 'DDD')) - to_number(to_char(dateofbirth,  'DDD')) 
```

使用 CTE 中的一些示例数据：

```
with t as (
    select 1 as id, date '1980-04-21' as dateofbirth from dual
    union all select 2 as id, date '1980-04-13' as dateofbirth from dual
    union all select 3 as id, dat
)
select id, dateofbirth, to_char(sysdate, 'DDD'), to_char(dateofbirth, 'DDD'),
    to_number(to_char(sysdate, 'DDD'))
        - to_number(to_char(dateofbirth,  'DDD')) as days
from t
order by id;

        ID DATEOFBIR TO_ TO_       DAYS
---------- --------- --- --- ----------
         1 21-APR-80 107 112         -5
         2 13-APR-80 107 104          3
         3 29-MAR-80 107 089         18 
```

但正如 Damien_The_Unbeliever 在评论中指出的那样，您需要定义或至少理解并接受闰年会发生什么。这种方法没有做任何聪明的事情，但对于您正在做的任何事情都可能足够好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:18:31.527

你应该试试这个

```
SQL> SELECT (TO_DATE('20120525', 'YYYYMMDD') - TO_DATE('20100101', 'YYYYMMDD')) diff_in_days
  2         ,TRUNC(MONTHS_BETWEEN(TO_DATE('20120525', 'YYYYMMDD'), TO_DATE('20100101', 'YYYYMMDD')))
  3         ,TRUNC(TRUNC(MONTHS_BETWEEN(TO_DATE('20120525', 'YYYYMMDD'), TO_DATE('20100101', 'YYYYMMDD'))) / 12) num_years
  4         ,MOD(TRUNC(MONTHS_BETWEEN(TO_DATE('20120525', 'YYYYMMDD'), TO_DATE('20100101', 'YYYYMMDD'))), 12) num_months
  5  FROM   dual
  6  / 
```

这将产生这个

```
DIFF_IN_DAYS TRUNC(MONTHS_BETWEEN(TO_DATE('  NUM_YEARS NUM_MONTHS
------------ ------------------------------ ---------- ----------
         875                             28          2          4 
```

[资源](http://oracletuts.net/tutorials/how-to-calculate-difference-between-dates-in-oracle-sql/)

# android - 在 Android 中设置 Media Player 媒体的持续时间

> ID：16052851
> 
> 赞同：1
> 
> 时间：2013-04-17T06:13:41.100
> 
> 标签：android, android-intent, android-mediaplayer

我想设置持续时间`MediaPlayer`。这是我的代码：

```
MediaPlayer play = MediaPlayer.create(getApplicationContext(),R.raw.beepsound);
play.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-12T04:59:49.763

您可以使用`Timer`每 1000 毫秒更新一次。然后将时间设置为一个`TextView`或任何你想要的。

```
if (player != null) {
    player.start();
    timer = new Timer();
    timer.scheduleAtFixedRate(new TimerTask() {
        @Override
        public void run() {
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    if (player != null && player.isPlaying()) {
                        tv.post(new Runnable() {
                            @Override
                            public void run() {
                                tv.setText(player.getCurrentPosition());
                            }
                        });
                    } else {
                        timer.cancel();
                        timer.purge();
                    }
                }
            });
        }
    }, 0, 1000);
} 
```

# bash - 在 bash 中创建一个目录，其名称以 - 开头（例如：-ROOT）

> ID：16052853
> 
> 赞同：2
> 
> 时间：2013-04-17T06:13:49.337
> 
> 标签：bash

如何在 bash 中创建一个名称以 - 开头的目录（例如 -ROOT）？如果我们正在尝试，那么 bash 会将名称视为命令行参数，我们将收到错误

```
mkdir: invalid option -- 'R'
Try `mkdir --help' for more information. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T06:15:58.160

用 a 前缀目录名称`./`以避免将其解释为选项：

```
mkdir ./-ROOT 
```

或者，插入参数`--`（两个破折号），这会导致它后面的所有参数都被解释为文件名而不是选项：

```
mkdir -- -ROOT 
```

# c# - c#中进度条不刷新

> ID：16052859
> 
> 赞同：1
> 
> 时间：2013-04-17T06:14:16.823
> 
> 标签：c#, winforms, progress-bar

我有一个问题，我正在使用`backgroundWorker1.RunWorkerAsync()`on button_click 方法，并且还使用`backgroundWorker1_DoWork()`,`backgroundWorker1_ProgressChanged()`事件，所有事件都在触发，但进度条没有刷新。这是我的代码：

```
private void btnMove_Click(object sender, EventArgs e)
        {

            try
           {

               backgroundWorker1.RunWorkerAsync();

                for (int i = 0; i < gdFiles.Rows.Count - 1; i++)
                {
                    // my process
                 }

              catch (Exception ex)
            {

            }

        }
     } 
```

事件是

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            for (int i = 1; i <= 100; i++)
            {

                backgroundWorker1.ReportProgress(i);
                Thread.Sleep(100);
            }
        }

        private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            progressBar1.Value = e.ProgressPercentage;
            progressBar1.Refresh();
        } 
```

任何人都可以请帮助解决这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:20:43.633

检查它的值`backgroundWorker1.WorkerReportsProgress`应该设置为true。波纹管工作和测试的例子：

```
public partial class Form1 : Form
{
    private BackgroundWorker bw = new BackgroundWorker();

    public Form1()
    {
        InitializeComponent();

        bw.WorkerReportsProgress = true;
        bw.WorkerSupportsCancellation = true;
        bw.DoWork += new DoWorkEventHandler(bw_DoWork);
        bw.ProgressChanged += new ProgressChangedEventHandler(bw_ProgressChanged);
        bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);
    }

    void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {

    }

    void bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        progressBar1.Value = e.ProgressPercentage;
    }

    void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        for (int i = 1; i <= 100; i++)
        {

            bw.ReportProgress(i);
            Thread.Sleep(100);
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        bw.RunWorkerAsync();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:30:59.213

我试图复制你的问题，它在我的最终工作正常。确保 backgroundWorker1.ReposrtsProgress 设置为**True**。请参见下面的代码：

```
 'private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        for (int i = 1; i <= 100; i++)
        {

            backgroundWorker1.ReportProgress(i);
            Thread.Sleep(100);
        }
    }

    private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        progressBar1.Value = e.ProgressPercentage;
        progressBar1.Refresh();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        backgroundWorker1.RunWorkerAsync();
    }` 
```

另外，我认为您的“流程”应该在 DoWork 内部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:54:57.537

您不应该将文件移动逻辑移至 DoWork 部分吗？BackgroundWorker 的想法是从 UI 线程中移除繁重的东西。

# php - PHP - 从属性中提取内容

> ID：16052860
> 
> 赞同：0
> 
> 时间：2013-04-17T06:14:17.500
> 
> 标签：php, html, dom, extract

我有问题。我需要从属性内容中提取内容：

```
<html>
<head>
<meta name="keywords" content="KEYWORDS">
<meta name="description" content="THIS TEXT"> 
</head> 
```

我使用这个 PHP 代码：

```
$doc = new DOMDocument();
@$doc->loadHTML($html);
$tags = $doc->getElementsByTagName('meta');

foreach ($tags as $tag) {
       echo $tag->getAttribute('content');

        } 
```

但代码只找到属性内容的第一次出现，但我需要第二次出现的属性内容....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:26:36.510

做这样的事情：

```
<?php
$nodes = $xml->getElementsByTagName ("meta");

$nodeListLength = $nodes->length; 
for ($i = 0; $i < $nodeListLength; $i ++)
{
   $node = $nodes->item($i)->getAttribute('content');
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:20:28.767

请试试这个

```
$dom = new DOMDocument();
$dom->loadHTML($html);

$elements = $dom->getElementsByTagName('meta');
foreach ($elements as $child) {
    echo $child->nodeValue;
} 
```

# ms-word - 如何在使用 java 和 docx4j 生成 docx 文件时在单元格上使用和应用 Hmerge？

> ID：16052861
> 
> 赞同：2
> 
> 时间：2013-04-17T06:14:24.707
> 
> 标签：ms-word, openxml, docx, docx4j, wordprocessingml

我找到了有关如何在使用 docx4j 生成 docx 文件时制作简单表格的教程。并看过一个关于如何垂直合并单元格的示例。有效。但我已经尝试过使用水平合并。但什么也没发生。我该如何使用`HMerge`？我发现这个类的值可以是`"restart"`或`"continue"`。这些价值观能做什么？这是一个示例代码。

```
Tbl tblGI = factory.createTbl();
Tr trGI = factory.createTr();

Tc tcGI1 = factory.createTc();
TcPr tcpr = new TcPr();
HMerge hmerge = new HMerge();
hmerge.setVal("restart");
tcpr.setHMerge(hmerge);
tcGI1.setTcPr(tcpr);
tcGI1.getContent().add(wordMLPackage.getMainDocumentPart().createParagraphOfText("sample merged cell"));
trGI.getContent().add(tcGI1);

Tr trGI2 = factory.createTr();
Tc tcGI21 = factory.createTc();
tcGI21.getContent().add(wordMLPackage.getMainDocumentPart().createParagraphOfText("row2 column1"));
trGI2.getContent().add(tcGI21);

Tc tcGI22 = factory.createTc();
tcGI22.getContent().add(wordMLPackage.getMainDocumentPart().createParagraphOfText("row2 column2"));
trGI2.getContent().add(tcGI22);

tblGI.getContent().add(trGI1);
tblGI.getContent().add(trGI2); 
```

此代码显示一个有两行的表格。第一行只有一列和一个单元格（应该合并）。第二行有两个单元格。如何合并第一行并将成为列跨度为 2 的单个单元格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:22:40.927

您可以使用 w:gridSpan，如下所示：

```
<w:tbl>
  <w:tblPr>
    <w:tblStyle w:val="TableGrid"/>
    <w:tblW w:w="0" w:type="auto"/>
    <w:tblLook w:val="04A0" w:firstRow="1" w:lastRow="0" w:firstColumn="1" w:lastColumn="0" w:noHBand="0" w:noVBand="1"/>
  </w:tblPr>
  <w:tblGrid>
    <w:gridCol w:w="4788"/>
    <w:gridCol w:w="4788"/>
  </w:tblGrid>
  <w:tr >
    <w:tc>
      <w:tcPr>
        <w:tcW w:w="9576" w:type="dxa"/>
        <w:gridSpan w:val="2"/>
      </w:tcPr>
      <w:p >
      </w:p>
    </w:tc>
  </w:tr>
  <w:tr >
    <w:tc>
      <w:tcPr>
        <w:tcW w:w="4788" w:type="dxa"/>
      </w:tcPr>
      <w:p />
    </w:tc>
    <w:tc>
      <w:tcPr>
        <w:tcW w:w="4788" w:type="dxa"/>
      </w:tcPr>
      <w:p />
    </w:tc>
  </w:tr>
</w:tbl> 
```

在 TcPr 中，有 get/setGridSpan。

ps 上面的XML是Word 2010生成的，你可以解压一个docx看一下。

# python - 如何用字符串中的空格替换自定义选项卡，具体取决于选项卡的大小？

> ID：16052862
> 
> 赞同：11
> 
> 时间：2013-04-17T06:14:24.960
> 
> 标签：python, whitespace, spaces, tabstop

我正在尝试编写一个不使用任何模块的python函数，该模块将采用具有制表符的字符串并将制表符替换为适合输入制表位大小的空格。但是，它不能只用 n 个空格替换所有大小为 n 的制表符，因为制表符可以是 1 到 n 个空格。我真的很困惑，所以如果有人能指出我正确的方向，我将不胜感激。

例如，如果 tabstop 最初的大小为 4：

```
123\t123 = 123 123 #one space in between 
```

但改为制表位 5：

```
123\t123 = 123  123 #two spaces in between 
```

我想我需要用空格填充字符串的末尾，直到 string%n==0 然后分块它，但我现在很迷茫..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T07:24:00.480

对于 5 的制表符长度：

```
>>> s = "123\t123"
>>> print ''.join('%-5s' % item for item in s.split('\t'))
123  123  
>>> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T06:38:55.827

既然你不想要一个不使用任何外部模块的python函数，我认为你应该首先设计你的函数的算法......

我建议迭代字符串的每个字符；如果 char i 是一个制表符，您需要计算要插入多少个空格：下一个“对齐”索引是 ((i / tabstop) + 1) * tabstop. 所以你需要插入 ((i / tabstop) + 1) * tabstop - (i % tabstop)。但更简单的方法是插入制表符直到对齐（即 i % tabstop == 0）

```
def replace_tab(s, tabstop = 4):
  result = str()
  for c in s:
    if c == '\t':
      while (len(result) % tabstop != 0):
        result += ' ';
    else:
      result += c    
  return result 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-17T09:54:13.740

我使用非常简单的 .replace 函数：

```
line = line.replace('\t', ' ') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T06:16:01.320

对不起，我第一次看错了这个问题。

这是一个递归版本，应该适用于输入中的任意数量的选项卡：

```
def tabstop ( s , tabnum = 4):
    if not '\t' in s:
        return s
    l = s.find('\t')
    return s[0:l]+' '*(tabnum-l)+tabstop(s[l+1:],tabnum) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-12T00:04:47.543

我认为 Remi 的答案是最简单的，但它有一个错误，当您已经在“制表位”列时，它没有考虑到这种情况。Tom Swirly 在评论中指出了这一点。这是他建议的经过测试的修复：

```
def replace_tab(s, tabstop = 4):
    result = str()

    for c in s:
        if c == '\t':
            result += ' '
            while ((len(result) % tabstop) != 0):
                result += ' '
        else:
            result += c    

    return result 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-29T06:42:59.250

该程序替换文件中空格的所有制表符：

```
def tab_to_space (line, tab_lenght = 8):
    """this function change all the tabs ('\\t') for spaces in a string, 
        the lenght of the tabs is 8 by default"""

    while '\t' in line:
        first_tab_init_pos = line.find('\t')
        first_tab_end_pos = (((first_tab_init_pos // tab_lenght)+1) * tab_lenght)
        diff = first_tab_end_pos - first_tab_init_pos
        if diff == 0:
            spaces_string = ' ' * tab_lenght
        else:
            spaces_string = ' ' * diff
        line = line.replace('\t', spaces_string, 1)
    return line

inputfile = open('inputfile.txt', 'r')
outputfile = open('outputfile.txt', 'w')
for line in inputfile:
    line = tab_to_space(line)
    outputfile.write(line)
inputfile.close()
outputfile.close() 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-17T07:12:24.370

此代码可以帮助您：

```
initial_string = "My \tstring \ttest\t"
block_size = "5"
"".join([("{block_value:"+str(block_size)+"s}").format(block_value=block) 
    for block in initial_string.split("\t")]) 
```

您将需要学习：格式、拆分和连接功能以及列表理解概念。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-04-11T20:35:06.067

if you have the requirement where you want to add n spaces instead of custom tab you can simply write below code. I have shown the implementation using two functions, each having different way to solve it.You can use any of the function!

for eg. let the string be in the variable 'code' and 'x' be the size of tab

```
code = "def add(x, y)\f\treturn x + y"
x=4

def convertTabs(code, x):
    temp=""
    for i in range(0,x):
        temp+=" "
    return code.replace("\t",temp) 

def converTabs1(code,x):
    return code.replace("\t",x*" ") 
```

both the functions above will give the same value, but the second one is super awesome !

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-09-05T17:41:25.223

这是最简单的方法

```
def replaceTab(text,tabs)
    return text.replace('\t', ' ' * tabs) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-20T16:39:26.603

我需要类似的东西，这就是我想出的：

```
import re

def translate_tabs(tabstop = 8):
  offset = [0]
  def replace(match, offset=offset):
    offset[0] += match.start(0)
    return " " * (tabstop - offset[0] % tabstop)
  return replace

re.sub(r'\t', translate_tabs(4), "123\t123") 
# => '123 123'

re.sub(r'\t', translate_tabs(5), "123\t123")
# => '123  123' 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-07T07:15:36.530

修复@rémi 答案此实现尊重前导选项卡和任何连续选项卡

```
def replace_tab(s, tabstop=4):
    result = str()
    for c in s:
        if c == '\t':
            if (len(result) % tabstop == 0):
                result += ' ' * tabstop
            else:
                while (len(result) % tabstop != 0):
                    result += ' '
        else:
            result += c
    return result 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-09-07T09:20:52.683

使用 re.sub 就足够了。

```
def untabify(s, tabstop = 4):
    return re.sub(re.compile(r'\t'), ' '*tabstop, s) 
```

# ios - 在 CATextLayer 中显示属性字符串

> ID：16052863
> 
> 赞同：9
> 
> 时间：2013-04-17T06:14:27.237
> 
> 标签：ios, objective-c

我有一个简单的示例应用程序，我在其中创建 a`CATextLayer`并将其`string`属性设置为`NSAttributedString`. 然后我将该 CATextLayer 添加到视图中。

```
#import <CoreText/CoreText.h>
#import <QuartzCore/QuartzCore.h>

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    CTFontRef fontFace = CTFontCreateWithName((__bridge CFStringRef)(@"HelfaSemiBold"), 24.0, NULL);
    NSMutableDictionary *attributes = [[NSMutableDictionary alloc] init];
    [attributes setObject:(__bridge id)fontFace forKey:(NSString*)kCTFontAttributeName];
    [attributes setObject:[UIColor blueColor] forKey:(NSString*)kCTForegroundColorAttributeName];
    NSAttributedString *attrStr = [[NSAttributedString alloc] initWithString:@"Lorem Ipsum" attributes:attributes];

    CATextLayer *textLayer = [CATextLayer layer];
    textLayer.backgroundColor = [UIColor whiteColor].CGColor;
    textLayer.frame = CGRectMake(20, 20, 200, 100);
    textLayer.contentsScale = [[UIScreen mainScreen] scale];
    textLayer.string = attrStr;

    [self.view.layer addSublayer:textLayer];
} 
```

这在模拟器中效果很好，除了文本是黑色而不是蓝色。在设备上运行时，一切都像在模拟器上一样显示，但它会在控制台中生成以下两个错误。

```
<Error>: CGContextSetFillColorWithColor: invalid context 0x0
<Error>: CGContextSetStrokeColorWithColor: invalid context 0x0 
```

我应该在某处设置 CGContext 吗？我是否设置了错误的属性？我是不是完全走错了路。`CATextLayer`请注意，这适用于 iOS 5.x 应用程序，出于性能原因，我想使用 a 。真正的应用程序会有**很多** `CATextLayer`s。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T06:38:51.593

您必须使用`CGColor`而不是`UIColor`for `kCTForegroundColorAttributeName`：

```
[attributes setObject:(__bridge id)[UIColor blueColor].CGColor
               forKey:(NSString *)kCTForegroundColorAttributeName]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-08T16:00:09.693

我将其转换为 Swift 3 并将其也放入 SpriteKit 中：

```
import QuartzCore
import SpriteKit

class GameScene: SKScene {

  var textLayer = CATextLayer()

  func helloWord() {
    let fontFace = CTFontCreateWithName((("HelfaSemiBold") as CFString),
                                        24.0,
                                        nil)
    var attributes: [AnyHashable: Any]? = [:]
    attributes?[(kCTFontAttributeName as String)] = fontFace
    attributes?[(kCTForegroundColorAttributeName as String)] = UIColor.blue.cgColor

    let attrStr = NSAttributedString(string: "Hello Attributed Word!",
                                     attributes: attributes as! [String : Any]?)

    textLayer.backgroundColor = UIColor.white.cgColor
    textLayer.frame = CGRect(x: CGFloat(50), y: CGFloat(200),
                             width: CGFloat(300), height: CGFloat(100))
    textLayer.contentsScale = UIScreen.main.scale
    textLayer.string = attrStr
    self.view?.layer.addSublayer(textLayer)
  }

  override func didMove(to view: SKView) {
    helloWord()
  }
} 
```

# quickbooks - QuickBooks SDK QBFC Com 组件在 C# 中获取已删除的记录

> ID：16052865
> 
> 赞同：0
> 
> 时间：2013-04-17T06:14:30.370
> 
> 标签：quickbooks, qbfc

如何在 c# 中使用 QBFC COM 组件从 Quickbook 中仅获取修改和删除的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:05:15.117

每个单独的实体类型都有自己的修改日期过滤器。例如，`CustomerQuery`有`ORCustomerListQuery.CustomerListFilter.FromModifiedDate`和`ORCustomerListQuery.CustomerListFilter.ToModifiedDate`。您将在每个实体类型和每个事务类型的查询消息中找到此模式。

对于已删除的记录，请使用`ListDeletedQuery`实体和`TxnDeletedQuery`事务。

# linux - 使用脚本中的脚本运行脚本

> ID：16052875
> 
> 赞同：0
> 
> 时间：2013-04-17T06:15:36.523
> 
> 标签：linux, shell

我需要编写一个脚本（比如 A），它将在多个目录中运行一个脚本（比如 B）。脚本 B 在一组子目录中运行一个脚本（比如 C）。虽然我编写并成功执行了脚本 B 和 C，但将它们组合起来并编写脚本 A 对我来说似乎有点太难了。

B 的一个例子是

```
MainDir="/home/kkk/mmm/dir" 
create_stack="${MainDir}/run/create_stack_and_find_seam.rb"
# cd into the working main directory where all the subdirs are present  
for fil_no in $@  
do
  cd ${MainDir}/${fil_no}
  pwd
  # the working script              
  echo ${fil_no}
  ${create_stack} ${fil_no}
done
# Go back to the original starting directory
cd $OLDPWD 
```

上面的脚本（脚本 B）在一组登记 fil_no 的目录中运行 Ruby 脚本“create_stack_and_find_seam.rb”。现在我有几个目录，不同的子目录在各个级别列出了“fil_no”。所以我现在需要在所有目录中执行脚本 B，然后在所有不同的子目录中运行“create_stack_and_find_seam.rb”（即脚本 C）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:09:40.720

根据我的评论，如果我们将脚本 B 中的“MainDir”更改为如下所示的参数

```
MainDir=$1 
```

然后我们可以将脚本 A 编写为：

```
#!/bin/bash
ScriptB.sh /home/first/directory
ScriptB.sh /home/second/directory 
```

当然，这意味着更改`${MainDir}/run/create_stack_and_find_seam.rb`and`cd ${MainDir}/${fil_no}`部分。如果这些只在一个地方，那么删除 MainDir 并添加一个新变量会有所帮助

# c# - 如何在不使用任何 OpenSource Dll 的情况下使用 C# 4.0 从文件夹中解压缩所有 .Zip 文件？

> ID：16052877
> 
> 赞同：24
> 
> 时间：2013-04-17T06:15:53.897
> 
> 标签：c#, unzip, zipfile

我有一个包含**.ZIP 文件**的文件夹。现在，我想使用 C# 将 ZIP 文件提取到特定文件夹，但不使用任何外部程序集或 .Net Framework 4.5。

我已经搜索过，但没有找到使用 Framework 4.0 或更低版本解压缩 *.zip 文件的任何解决方案。

我试过 GZipStream，但它只支持 .gz 而不是 .zip 文件。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-17T06:19:03.870

这是来自[msdn](http://msdn.microsoft.com/en-us/library/system.io.compression.zipfile.aspx)的示例。`System.IO.Compression.ZipFile`就是为此而生的：

```
using System;
using System.IO;
using System.IO.Compression;

namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            string startPath = @"c:\example\start";
            string zipPath = @"c:\example\result.zip";
            string extractPath = @"c:\example\extract";

            ZipFile.CreateFromDirectory(startPath, zipPath);

            ZipFile.ExtractToDirectory(zipPath, extractPath);
        }
    }
} 
```

**编辑：**抱歉，我错过了您对 .NET 4.0 及以下版本的兴趣。需要 .NET 框架 4.5 及更高版本。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-11-03T14:07:25.233

我有同样的问题，并找到了一篇很棒且非常简单的文章来解决这个问题。 [http://www.fluxbytes.com/csharp/unzipping-files-using-shell32-in-c/](http://www.fluxbytes.com/csharp/unzipping-files-using-shell32-in-c/)

您需要参考名为 Microsoft Shell Controls And Automation (Interop.Shell32.dll) 的 COM 库

代码（未从文章中获取，只是为了让您了解它是多么简单）：

```
public static void UnZip(string zipFile, string folderPath)
{
    if (!File.Exists(zipFile))
        throw new FileNotFoundException();

    if (!Directory.Exists(folderPath))
        Directory.CreateDirectory(folderPath);

    Shell32.Shell objShell = new Shell32.Shell();
    Shell32.Folder destinationFolder = objShell.NameSpace(folderPath);
    Shell32.Folder sourceFile = objShell.NameSpace(zipFile);

    foreach (var file in sourceFile.Items())
    {
        destinationFolder.CopyHere(file, 4 | 16);
    }
} 
```

强烈推荐阅读这篇文章——他对标志 4|16 进行了解释

**编辑：**在我使用它的应用程序运行几年后，我收到了两个用户的投诉，称该应用程序突然停止工作。CopyHere 函数似乎创建了临时文件/文件夹，并且这些文件/文件夹从未被删除，这导致了问题。这些文件的位置可以在 System.IO.Path.GetTempPath() 中找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T12:45:07.123

在 .net 4.0 Deflate 和 GZip 无法处理 Zip 文件，但您可以使用 shell 功能解压缩文件。

```
public FolderItems Extract()
{
 var shell = new Shell();
 var sf = shell.NameSpace(_zipFile.Path);
 return sf.Items();
} 
```

调用提取函数时，您可以通过以下方式保存返回的文件夹项

```
 FolderItems Fits = Extract();
    foreach( var s in Fits)
    {
       shell.Namespace("TargetFolder").copyhere(s); 

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-06T17:46:51.327

我有同样的问题，并通过 C# 代码中的 cmd shell 调用 7-zip 可执行文件来解决它，如下所示，

```
string zipped_path = "xxx.7z";
string unzipped_path = "yyy";
string arguments = "e " + zipped_path + " -o" + unzipped_path;

System.Diagnostics.Process process
         = Launch_in_Shell("C:\\Program Files (x86)\\7-Zip\\","7z.exe", arguments);

if (!(process.ExitCode == 0))
     throw new Exception("Unable to decompress file: " + zipped_path); 
```

其中`Launch_in_Shell(...)`定义为，

```
public static System.Diagnostics.Process Launch_in_Shell(string WorkingDirectory,
                                                         string FileName, 
                                                         string Arguments)
{
       System.Diagnostics.ProcessStartInfo processInfo 
                                         = new System.Diagnostics.ProcessStartInfo();

        processInfo.WorkingDirectory = WorkingDirectory;
        processInfo.FileName = FileName;
        processInfo.Arguments = Arguments;
        processInfo.UseShellExecute = true;
        System.Diagnostics.Process process 
                                      = System.Diagnostics.Process.Start(processInfo);

        return process;
} 
```

缺点：您需要在您的机器上安装 7zip，而我只尝试使用“.7z”文件。希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-06T18:13:09.560

.NET 3.5 为此提供了 DeflateStream。您必须为目录等信息创建结构，但 PKWare 已发布此信息。我编写了一个解压缩实用程序，一旦为它创建结构，它就不会特别繁重。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T06:21:34.613

[ZipPackage](http://msdn.microsoft.com/en-us/library/system.io.packaging.zippackage%28v=vs.100%29.aspx)可能是一个开始的地方。它在[System.IO.Packaging](http://msdn.microsoft.com/en-us/library/system.io.packaging%28v=vs.100%29.aspx)中，在 .NET 4.0 中可用

远不及上面提到的 .NET 4.5 方法的简单性，但它看起来可以做你想做的事。

# raspberry-pi - 树莓派蓝牙 4.0 连接

> ID：16052882
> 
> 赞同：8
> 
> 时间：2013-04-17T06:16:00.193
> 
> 标签：raspberry-pi, core-bluetooth, bluetooth-lowenergy, bluez

我正在尝试使用 CoreBluetooth（蓝牙 4.0）通过 iPhone 连接到 Raspberry Pi。我发现了该设备并使用以下代码发送了连接请求：

```
if (peripheral != self.foundPeripheral) {
    NSLog(@"Try to connect to %@", peripheral.name);
    self.foundPeripheral = peripheral;
    [self.centralManager stopScan];
    [self.centralManager connectPeripheral:peripheral options:nil];

} 
```

didConnectPeripheral 或 didFailedToConnectPeripheral 都没有被调用。我还确保将 RPi 设置为使用蓝牙低功耗广告

```
sudo hciconfig hci0 leadv 
```

但是当我检查活动连接时

```
hcitool con 
```

没有活动连接。我错过了 RPi 的一些设置吗？外设上的名称变量也是空白的，是因为我还没有连接吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-15T19:04:32.700

试试[bleno](https://github.com/sandeepmistry/bleno)，它是一个 node.js 库，可用于在 OS X 和 Linux 上创建 BLE 外围设备。它在我运行 Raspbian 的 Raspberry Pi 上运行良好。

# android - 相机错误无法连接到相机

> ID：16052885
> 
> 赞同：0
> 
> 时间：2013-04-17T06:16:17.360
> 
> 标签：android, android-camera

我正在努力`camera` `activity`捕捉`image`，在调用相机活动时它显示`Camera`错误无法连接`camera`请任何人都可以解释这个错误

我叫这个

```
Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
startActivityForResult(intent, TAKE_IMAGE); 
```

错误信息：

```
camera error
cannot connect to the camera 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:24:00.710

你也检查喜欢

```
 PackageManager pm = getPackageManager();
    if (pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
      // your Intent Goes Here Like
        Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        i.putExtra(MediaStore.EXTRA_OUTPUT,MyFileContentProvider.CONTENT_URI);
        startActivityForResult(i, CAMERA_RESULT);
    } else {   
        UtilityCommon.showDialogwithTitle(context,context.getResources().getString(R.string.strvalidcamera));               

    } 
```

还要在您的`AndroidMAnifest.xml`文件中添加要求权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:18:53.687

```
add permission in your manifest file

<uses-feature
    android:name="android.hardware.camera" />
<uses-feature
    android:name="android.hardware.camera.autofocus" />

<uses-permission
    android:name="android.permission.CAMERA"></uses-permission> 
```

**如果仍然无法正常工作，则编辑 AVD 并转到选定的后置摄像头模拟**

# php - 我的 pdo 准备好的声明有什么问题？

> ID：16052886
> 
> 赞同：-1
> 
> 时间：2013-04-17T06:16:21.263
> 
> 标签：php, mysql

我究竟做错了什么？我知道事实与准备好的陈述有关。谢谢！

编辑：这是脚本的所有代码，所以每个人都可以看到发生了什么。我现在必须添加更多单词，因为表单不喜欢我添加的代码量。

```
<?  if($_SERVER['REQUEST_METHOD'] == "POST"){
    include_once("includes/connect.php");       

    session_start();

    $error = array();
    $success = "The artist has been added!";

    if(!empty($_POST['artist-name'])){
        $artistName = $_POST['artist-name'];
    } else{
        $error[] = "Please enter a valid artist name!";
    }

    if(empty($error)){          

        //prepared statement goes here "INSERT INTO artist VALUES(?)"
        try{
            $pdo = new PDO("mysql:host=$hostname;dbname=$dbname", $username, $password);
            $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
            $stmt = $pdo->prepare("INSERT INTO artist(name) VALUES(:artist)");
            $stmt->execute(array("artist" => $artistName));
            while($row = $stmt->fetch()) {
                print_r($row);
            }
        } catch(PDOException $e){
            echo $e->getMessage();
        }

        //$_SESSION["success"] = $success;

    } else {
        $_SESSION["error"] = $error;
    }

    header("Location: ../add-artist.php");
    exit();                             

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:19:38.403

```
$stmt = $pdo->prepare("INSERT INTO artist VALUES(:artist)"); 
```

该参数称为`:artist`。

```
$stmt->execute(array('artist' => $artistName)); 
```

你用`artist`. 冒号也应该在那里，即使它是在内部添加的。

关于错误，在这种情况下唯一不会被异常捕获的是致命错误。在 php.ini 中有`error_reporting = -1`and`display_errors = On`应该使错误可见。否则，请使用`error_log`.ini 设置。

# python - 从消息中删除 openerp 标题

> ID：16052887
> 
> 赞同：0
> 
> 时间：2013-04-17T06:16:23.143
> 
> 标签：python, xml, openerp

如何从弹出错误消息/对话框中删除 openerp 标题？我到处搜索，但找不到需要更改的确切相位。

![错误信息](https://i.stack.imgur.com/jm7uq.png)

请给我建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:35:30.703

更改 chrome.js

第 273 和 288 行

```
title: "Softplanter " + _.str.capitalize(error.type),
            buttons: [
                {text: _t("Ok"), click: function() { $(this).dialog("close"); }}
            ]
        });
    },
    show_error: function(error) {
        if (!this.active) {
            return;
        }
        var buttons = {};
        buttons[_t("Ok")] = function() {
            $(this).dialog("close");
        };
        var dialog = new instance.web.Dialog(this, {
            title: "YourName " + _.str.capitalize(error.type), 
```

# c++ - 使用 stl list 时出现神秘的段错误

> ID：16052891
> 
> 赞同：-1
> 
> 时间：2013-04-17T06:16:42.287
> 
> 标签：c++, list, segmentation-fault

我在以下行出现段错误：

```
 employees.push_back(Salesperson(id, fname, lname)); 
```

我一点也不知道是什么原因造成的。我要做的就是读取一个文本文件，将其中的信息放入一个简单的类中，其中只有每个值的 getter 和 setter 以及一些比较运算符，然后将该类的对象放入列表中。出于某种原因，每当我尝试插入列表时，它都会出现段错误。我不是要取消对结束迭代器的引用，我使用哪种列表插入方法没有区别。所有这些都会导致同样的事情。

```
int main(int argc, char** argv)
{
    ifstream input;
    input.open("sales.txt");
    string s;
    istringstream ss;

    list<Salesperson> employees;

    while (getline(input, s))
    {
        ss.str(s);

        int year, id, sales;
        string fname, lname;

        ss >> year;
        ss >> id;
        ss >> fname;
        ss >> lname;
        ss >> sales;

        getline(input, s);
        ss.str(s);
        float sale;
        OrderedList<float> ol;

        for (int i = 0; i < sales; i++)
        {
            ss >> sale;
            ol.insert(sale);
        }

        list<Salesperson>::iterator it = find(employees.begin(), employees.end(), Salesperson(id, fname, lname));
        if (it == employees.end()) {
            employees.push_back(Salesperson(id, fname, lname));
            employees.back().setSales(employees.back().getSales() + ol);
        } else {
            it->setSales(it->getSales() + ol);
        }

        cout << it->getSales() << endl;

    }
    input.close();

    return 0;
} 
```

销售员班

```
#ifndef SALESPERSON_H
#define SALESPERSON_H

#include <string>
class Salesperson
{
public:
    //Constructor
    Salesperson(int id, std::string fn, std::string ln)
    {
        employeeID = id;
        fname = fn;
        lname = ln;
    }

    //Gang of Three
    Salesperson(const Salesperson& orig) {*this = orig;}
    ~Salesperson() {}
    void operator=(const Salesperson& orig) 
    {
        employeeID = orig.employeeID;
        fname = orig.fname;
        lname = orig.lname;
        sales = orig.sales;
    }

    //Getters
    int getEmployeeID() {return employeeID;}
    std::string getFname() {return fname;}
    std::string getLname() {return lname;}
    OrderedList<float> getSales() {return sales;}

    //Setters
    void setEmployeeID(int a) {employeeID = a;}
    void setFname(std::string a) {fname = a;}
    void setLname(std::string a) {lname = a;}
    void setSales(OrderedList<float>& a) {sales = a;}

    //Operators
    bool operator<(Salesperson s) {return employeeID < s.employeeID;}
    bool operator==(Salesperson s) {return employeeID == s.employeeID;}
private:
    //Fields
    int employeeID;
    std::string fname, lname;
    OrderedList<float> sales;
}; 
```

有序列表 cpp

```
#include "Node.h"

template<class type>
OrderedList<type>::OrderedList(const OrderedList<type>& list)
{
    *this = list;
}

template<class type>
void OrderedList<type>::clear()
{
    for (Node<type>* i = head; i != NULL; head = i)
    {
        i = i->getLink();
        delete head;
    }
    size = 0;
}

template<class type>
void OrderedList<type>::remove(type item)
{
    Node<type>* temp = head, *prev = head;
    for (; temp != NULL; prev = temp, temp = temp->getLink())
        if (item == temp->getData()) break;

    if (temp != NULL)
    {
        if (prev == temp) head = head->getLink();
        else prev->setLink(temp->getLink());
        delete temp;
        size--;
    }
}

template<class type>
void OrderedList<type>::operator=(const OrderedList<type>& list)
{
    clear();
    Node<type>* tail = NULL;
    for (Node<type>* i = list.head; i != NULL; i = i->getLink())
    {
        if (head == NULL)
        {
            head = new Node<type > (i->getData(), NULL);
            tail = head;
        } else
        {
            tail->setLink(new Node<type > (i->getData(), NULL));
            tail = tail->getLink();
        }
    }
    size = list.size;
}

template<class type>
std::ostream& operator<<(std::ostream& out, const OrderedList<type>& list)
{
    out << "[";
    for (Node<type>* i = list.head; i != NULL; i = i->getLink())
    {
        out << i->getData();
        if (i->getLink() != NULL) out << ", ";
    }
    out << "]";

    return out;
}

template<class type>
void OrderedList<type>::insert(type d)
{
    size++;
    Node<type>* item = new Node<type>(d, NULL);

    Node<type> *i = head, *prev = NULL;
    while (i != NULL)
    {
        if (i->getData() >= d) break;
        prev = i;
        i = i->getLink();
    }

    if (prev == NULL)
    {
        item->setLink(head);
        head = item;
    } else {
        prev->setLink(item);
        item->setLink(i);
    }
}

template<class type>
type OrderedList<type>::get(int k) const
{
    if (k <= 0 || k > size) return NULL;

    Node<type>* i = head;
    type data;
    for (int j = 0; j < k; j++)
    {
        data = i->getData();
        i = i->getLink();
    }
    return data;
}

template<class type>
OrderedList<type> OrderedList<type>::kLargest(int k) const
{
    OrderedList list;
    Node<type>* i = head;

    if (k <= 0 || k > size) return list;

    for (int j = 0; j < size-k; j++)
    {
        i = i->getLink();
    }
    for (int j = 0; j < k; j++)
    {
        list.insert(i->getData());
        i = i->getLink();
    }
    return list;
}

template<class type>
OrderedList<type> OrderedList<type>::operator+(const OrderedList& list) const
{
    Node<type>* i = head;
    Node<type>* j = list.head;

    OrderedList newList;
    Node<type>* end;

    for(int k = 0; k < size + list.size; k++)
    {
        if(newList.size == 0 && i->getData() <= j->getData()) {
            newList.head = new Node<type>(i->getData(), NULL);
            end = newList.head;
            i = i->getLink();
            newList.size++;
            continue;
        } else if(newList.size == 0 && i->getData() <= j->getData()) {
            newList.head = new Node<type>(j->getData(), NULL);
            end = newList.head;
            j = j->getLink();
            newList.size++;
            continue;
        }

        if(i == NULL) {
            end->setLink(new Node<type>(j->getData(), NULL));
            end = end->getLink();
            j = j->getLink();
        } else if(j == NULL) {
            end->setLink(new Node<type>(i->getData(), NULL));
            end = end->getLink();
            i = i->getLink();
        } else if(i->getData() <= j->getData()) {
            end->setLink(new Node<type>(i->getData(), NULL));
            end = end->getLink();
            i = i->getLink();
        } else if(i->getData() > j->getData()) {
            end->setLink(new Node<type>(j->getData(), NULL));
            end = end->getLink();
            j = j->getLink();
        }

        newList.size++;
    }

    return newList;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:18:20.443

类可能有问题`Salesperson`。它可能违反了[三原则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)或有另一个类似的问题。如果没有看到它的代码，很难更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:19:04.077

奇怪的是，您的`OrderedList<>`模板类主要在 .cpp 文件中定义 - 我不知道这是否与您的问题有关。

但是，复制ctor：

```
template<class type>
OrderedList<type>::OrderedList(const OrderedList<type>& list)
{
    *this = list;
} 
```

看起来至少有一个问题。

由于复制构造函数负责构造对象，因此未在初始化器列表中初始化的成员的状态可能没有很好地定义——尤其是指针等基本类型。您正在尝试将副本的工作委托给赋值运算符：

```
template<class type>
void OrderedList<type>::operator=(const OrderedList<type>& list)
{
    clear();
    Node<type>* tail = NULL;
    for (Node<type>* i = list.head; i != NULL; i = i->getLink())
    {
        if (head == NULL)
        {
            head = new Node<type > (i->getData(), NULL);
            tail = head;
        } else
        {
            tail->setLink(new Node<type > (i->getData(), NULL));
            tail = tail->getLink();
        }
    }
    size = list.size;
} 
```

该`operator=()`函数所做的第一件事是调用`clear()`- 但`clear()`依赖于将成员`head`初始化为合理的东西，这对于正在构建的对象还没有发生（因为`head`显然是一个原始指针）。您至少应该有一个初始化列表项`head`（可能还有其他成员`OrderedList<>`：

```
template<class type>
OrderedList<type>::OrderedList(const OrderedList<type>& list)
    : head(0)
{
    *this = list;
} 
```

# pyrocms - 如何将多个子域指向 PyroCMS Pro 中的单个域实例？

> ID：16052898
> 
> 赞同：0
> 
> 时间：2013-04-17T06:17:08.623
> 
> 标签：pyrocms

我在 2.0 多站点文档中看到此功能即将推出，能够创建域别名以允许多个域或多个子域指向多站点中的单个域实例。这是否已在 PyroCMS Pro 2.2 中实现？如果是这样，你如何配置它？

用例：我为我使用的大多数域使用 dev、qa 和 preview 子域。当我将它们加载到它们各自的环境中时，我需要让它们指向它们的特定域。最好不要在每次加载数据库时运行脚本来更改数据库。

例如：dev.example.com；qa.example.com；preview.example.com 和 example.com 应该在 PyroCMS Pro 多站点中共享相同的“域”实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T20:07:02.170

如果您使用的是专业版，控制面板中有一个“域”模块，可以让您添加别名。它是在 2.1.0 中引入的，因此如果您使用的是 2.0.0，则需要升级。

# mvvm - Kendo UI：无法将 ViewModel 绑定到主体或主容器 div

> ID：16052904
> 
> 赞同：0
> 
> 时间：2013-04-17T06:17:34.723
> 
> 标签：mvvm, kendo-ui, kendo-grid

我有一个页面，它包括一个拆分器、一个网格、一个表单和一个自动完成功能。

现在我已经创建了一个视图模型并将其绑定到一个网格......数据成功绑定：-

```
kendo.bind($("#grid"), viewModel); //**Runs well** 
```

然而，

```
kendo.bind(document.body, viewModel); // **This doesn't** 
```

当我尝试将视图模型绑定到主体或主容器 div（包装器）时，网格从页面中消失，其他一些字段也是如此。

基本上我想要实现的是我想将一个对象（网格行详细信息）从一个视图模型传递到另一个视图模型（即表单）。所以我没有这样做，而是想将完整的视图模型绑定到 Body ...

你能告诉我我哪里错了吗？

谢谢！！

哈迪克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-03T08:25:45.447

使用此语法绑定网格的视图模型

**kendo.bind(document.body.children, viewModel);**

# svn - 使用批处理文件的 Subversion (SVN) 签出

> ID：16052909
> 
> 赞同：1
> 
> 时间：2013-04-17T06:18:17.247
> 
> 标签：svn, batch-file

我`svn checkout`在批处理文件中使用命令从 SVN 签出我的源代码文件夹，然后构建代码。

但有时检出失败，因此代码构建失败，因为所有文件夹都没有检出。那么如何知道结帐是否失败，以便我可以重新开始结帐过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:05:33.477

`svn`如果发生故障，应该以非零退出代码退出，所以

```
svn checkout ...
if errorlevel 1 (
  echo something failed
) 
```

要构建更健壮的东西，只需尝试结帐直到成功，您可以使用以下内容：

```
:l
rem reset errorlevel to 0
ver > nul
if exist foo rd /s /q foo > nul
svn checkout http://... foo || goto l 
```

应该尝试直到成功。

# xpages - XPage 上存在多个 IFrame 时无法设置 sessionScope 变量

> ID：16052911
> 
> 赞同：3
> 
> 时间：2013-04-17T06:18:21.403
> 
> 标签：xpages

我有一个包含多个 IFrame 的 XPage（“xBase”），每个 IFrame 在我的数据库中显示一个 XPage（“xIFrame”）。单击 xBase 中的按钮时，会设置 sessionScope 变量，并部分刷新显示该变量的标签（参见示例代码）。只要没有太多 IFrame，以这种方式显示变量就可以正常工作。在下面的简短演示示例中，最多只能显示 3 个 IFrame，但一旦存在 4 个或更多，就不再设置 sessionScope 变量。

我在 Notes Client 8.5.3、Firefox 13.0.1 和 Safari 5.1.7 中测试了给定的示例，结果相同。部分刷新本身似乎没有问题，因为刷新显示当前时间的标签可以正常工作。谁能告诉我问题是什么？

XPage“ **xBase** ”：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xc="http://www.ibm.com/xsp/custom">

<xp:this.beforePageLoad><![CDATA[#{javascript:sessionScope.remove("testvar");}]]></xp:this.beforePageLoad>

<xp:div id="divIFrames">
<iframe src="xIFrame.xsp?para0=abc" id="iframe0" name="iframe0"></iframe>
<iframe src="xIFrame.xsp?para0=def" id="iframe1" name="iframe1"></iframe>
<iframe src="xIFrame.xsp?para0=ghi" id="iframe2" name="iframe2"></iframe>
<iframe src="xIFrame.xsp?para0=jkl" id="iframe3" name="iframe3"></iframe>
<iframe src="xIFrame.xsp?para0=mno" id="iframe4" name="iframe4"></iframe>
</xp:div>
<xp:br/>

<xp:button value="refresh iframes" id="button0">
    <xp:eventHandler event="onclick" submit="true" refreshMode="partial" refreshId="divIFrames"></xp:eventHandler>
</xp:button>
<xp:br/><xp:br/>

<xp:label id="label"><xp:this.value><![CDATA[#{javascript:new Date().toUTCString()+": "+sessionScope.containsKey("testvar")}]]></xp:this.value></xp:label>
<xp:br></xp:br>

<xp:button value="set sessionScope / refresh label" id="button1">
    <xp:eventHandler event="onclick" submit="true"
        refreshMode="partial" refreshId="label">
        <xp:this.action><![CDATA[#{javascript:sessionScope.put("testvar","STRING");}]]></xp:this.action>
    </xp:eventHandler>
</xp:button>

</xp:view> 
```

XPage“ **xIFrame** ”（只是一个显示时间和 url 的标签>简单以确保它不会导致问题）：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
<xp:label value="#{javascript:new Date().toUTCString()+':'+context.getUrl().toString()}"></xp:label>
</xp:view> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T10:09:49.630

问题可以通过添加来解决

> xsp.persistence.tree.maxviews=16

到数据库的**xsp.properties**文件，然后清理项目。16 的值是任意的，只要确保它高于您计划使用的 IFrame 数量即可。

*所有功劳都归功于提供此解决方案的 Sven Hasselbach 和 Per Henrik Lausten。*

# cakephp - 关于属于的模型关联

> ID：16052912
> 
> 赞同：0
> 
> 时间：2013-04-17T06:18:24.883
> 
> 标签：cakephp

以前我使用 cakephp 版本 1.3.1 和模型关联工作正常，但在版本 2.3.2 关联不工作。

我创建了一个名为 Listings 的控制器：

```
class ListingsController extends AppController {
    var $uses = 'Listing';
    var $name = 'Listings';
    var $components = array();

    function getFeatured(){
        $listing = $this->Listing->read();
        $this->Listing->recursive = 1;
        $today = date('Y-m-d');
        $listings = $this->Listing->find('all', array('conditions'=>'Listing.featured_expiration >='.$today,'order'=>'Rand()'));
        return $listings;
    }

//**** Function For Retreve All Properties Counts **** //
} 
```

在我创建的模型中

```
class Listing extends AppModel {
    var $name = 'Listing';
    var $displayField = 'full_address';
    var $belongsTo = array(
        'User' => array(
            'className' => 'User',
            'foreignKey' => 'user_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        ),      
    );    
} 
```

但我没有得到用户表记录。

它在本地运行良好。我也尝试使用可包含的行为，但遇到了同样的问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:27:38.437

不是答案，而是一些改进代码的评论。我将此作为答案发布，因为评论允许空间有限；

## 不要`var`用于属性

Var 在旧版本的 CakePHP 中用于与 PHP 4 兼容。对于 PHP5，使用`public`或`protected`来`private`显式设置它们的[可见性](http://php.net/manual/en/language.oop5.visibility.php)。

您发布的代码中的所有属性都应该是`public`，因此可以更改为；

```
 public $name = 'Listing';
 public $displayField = 'full_address';
 //etc 
```

## 删除关系中不必要的选项

在您的示例中，空选项只会添加“混乱”（有时甚至可能会导致不需要的副作用）。删除`fields`,`conditions`和`order`选项。

更进一步，因为你的模型显然遵循 CakePHP 约定，你根本不需要设置任何选项；这两个都可以正常工作：

```
public $belongsTo = array(
    'User' => array(),
); 
```

甚至：

```
public $belongsTo = array('User'); 
```

## 删除未使用的查询

你为什么在里面执行*两个*查询`getFeatured()`？第一个查询的结果（`$listing = $this->Listing->read();`）甚至没有使用，可以删除

## 应在您的模型中执行与数据相关的代码。

该方法`getFeatured()`确实不属于Controller。更糟糕的是，因为它是一个*公共*方法，它可以通过浏览器访问！(via `http://yourdomain.com/listings/getFeatured/`) 如果没有找到视图文件，它可能会显示错误，但方法内的查询**将被执行**

将该方法移至列表模型。您将不得不进行一些小的修改；

```
class Listing extends AppModel {
    // rest of the code here 

    public function getFeatured(){
        //Moved this to within the 'find' parameters
        //to only change recursive for *this* find
        //and not influence other queries after running
        //this one
        //$this->recursive = 1;

        return $this->find('all', array(
            'conditions' => array(
                // NOTE: use an associative array here
                'Listing.featured_expiration >=' => date('Y-m-d'),
            ),
            'recursive' => 1,

            // NOTE: check if this really works
            //      Cake *may* treat this as a literal
            //      value (string "Rand()")
            'order' => 'Rand()'
        ));
    }
} 
```

现在，如果您想在控制器中使用它，请使用：

```
$this->Listing->getFeatured(); 
```

# c - 将c中execl命令的输出保存到同一个文件中

> ID：16052917
> 
> 赞同：0
> 
> 时间：2013-04-17T06:18:47.000
> 
> 标签：c, unix, command-line, exec, multiple-processes

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

#define MAXLINE 512
main(int argc,char* argv[]){
    int k;

    for (k=1; k<=argc; k++) {
        if ((k%2)==0) {
            if (fork()==0){
                printf("asdsa");
                int fd; /*file descriptor to the file we will redirect ls's output*/

                if((fd = open("file1.txt", O_RDWR | O_CREAT))==-1){ /*open the file */
                    perror("open");
                    return 1;
                }

                dup2(fd,STDOUT_FILENO); /*copy the file descriptor fd into standard output*/
                dup2(fd,STDERR_FILENO); /* same, for the standard error */
                close(fd); /* close the file descriptor as we don't need it more  */

                /*execl ls */
                execl("/usr/bin/rev","rev",argv[k],NULL);
                exit(1);
            }
            else
            {
                wait(0);
            }

            char temp[512];
            sprintf(temp, "mv file1.txt %s",argv[k]);
            system((char *)temp);
        }
        else
        {
            if (fork()==0) {
                int fd; /*file descriptor to the file we will redirect ls's output*/

                if((fd = open("file2.txt", O_RDWR | O_CREAT))==-1){ /*open the file */
                    perror("open");
                    return 1;
                }

                dup2(fd,STDOUT_FILENO); /*copy the file descriptor fd into standard output*/
                dup2(fd,STDERR_FILENO); /* same, for the standard error */
                close(fd); /* close the file descriptor as we don't need it more  */

                execl("/usr/bin/awk","awk","-f","awk2.sh",argv[k],NULL);

                exit(1);
            }
            else
            {
                wait(0);                 
            }
            char temp[512];
            sprintf(temp, "mv file2.txt %s",argv[k]);
            system((char *)temp);
        }
    }
} 
```

我尝试做的是将文件 file2.txt 重命名为`argv[k]`，但它不起作用。基本上整个想法是将`excel`命令的结果保存在相同的文件 argv[k] 中。谁能帮我这个？

编辑：`argv[]`是在命令行中作为参数给出的文件列表，例如“file1.txt”“file5.txt”等。

Edit2：让我们假装我像这样运行

```
$gcc program.c
$./a.out myfile.txt

myfile.txt
abc
efg 
```

ouk2.awk 所做的是保存在

```
file2.txt
cba
gfe 
```

现在我接下来想要的是用 file2.txt 的内容重写 myfile.txt 所以

```
myfile.txt
cba
gfe 
```

但是这最后一步不起作用，它应该由系统命令完成，但由于某种原因，文件“myfile.txt”没有任何变化，在我启动程序后，我得到的只是

```
myfile.txt
abc
efg

file2.txt
cba
gfe 
```

在我想要得到之前我是怎么说的

```
myfile.txt
cba
gfe 
```

# wordpress - 在 wordpress 中，需要了解 RSS Feed

> ID：16052922
> 
> 赞同：-1
> 
> 时间：2013-04-17T06:19:06.190
> 
> 标签：wordpress, rss

我是 WordPress 新手。我需要`RSS Feed`为我的网站创建。

需要哪些步骤？需要从凝视点的帮助。

我对 RSS 提要一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:31:32.643

简而言之，RSS 是一种网络用户用来跟踪他们喜爱的网站的技术。

WordPress 已经内置了对 RSS Feed 的支持。

在**外观 > 小部件**中，您应该找到默认的 RSS 小部件，它提供了几个基本选项，为了获得更多控制，您可以安装各种插件。

有关 RSS 提要的介绍，请查看[此](http://codex.wordpress.org/WordPress_Feeds)WordPress Codex 页面。

上面的文章还有一个部分向您展示了如何查找您的提要 URL。但如果您使用永久链接，您的 URL 可能是[http://www.yourdomain.com/feed/](http://www.yourdomain.com/feed/)

这是[一篇](http://www.problogger.net/archives/2010/12/03/everything-you-need-to-import-and-display-rss-feeds-with-wordpress/)关于如何使用 WordPress 导入和显示 RSS 提要的文章。

# query-string - 如何使用javascript将一个变量值从父窗口传递到html中的新子窗口

> ID：16052926
> 
> 赞同：0
> 
> 时间：2013-04-17T06:19:28.297
> 
> 标签：query-string, session-variables

我认为一种方法是查询字符串。但我不知道它是在本地机器上工作还是我们需要服务器端或本地服务器。以及我们如何在 page1（父窗口）和 page2（弹出窗口）中实现。

这里的任何人都可以帮助我做到这一点。请写下执行此操作的步骤。正确答案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:24:14.783

通过查询字符串传递值将在没有服务器端支持的情况下工作。

在第 1 页中：`window.open('url?param1=value1');`

在 page2 中：（页面加载后）：

（取自[https://stackoverflow.com/a/901144/384155](https://stackoverflow.com/a/901144/384155)）

```
function getParameterByName(name) 
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
}
console.log(getParameterByName(param1)); 
```

# philips-hue - 将 Philips Hue XY 值转换为 HEX

> ID：16052933
> 
> 赞同：3
> 
> 时间：2013-04-17T06:19:39.033
> 
> 标签：philips-hue

在某些情况下，飞利浦 Hue API 会为 blub 的颜色值返回一个 xy 值。如何将其转换为 HEX 字符串？我尝试了在网上找到的各种公式，但没有一个适用于灯泡的所有颜色。

我查看了下面建议的指南，并尝试在 PHP 中实现如下：

```
list($x, $y) = $light['state']['xy'];
$z = 1.0 - $x - $y;
$Y = $light['state']['bri'] / 255.0; // The given brightness value
$X = ($Y / $y) * $x;
$Z = ($Y / $y) * $z;

$r = $X * 1.612 - $Y * 0.203 - $Z * 0.302;
$g = -$X * 0.509 + $Y * 1.412 + $Z * 0.066;
$b = $X * 0.026 - $Y * 0.072 + $Z * 0.962;

$r = $r <= 0.0031308 ? 12.92 * $r : (1.0 + 0.055) * pow($r, (1.0 / 2.4)) - 0.055;
$g = $g <= 0.0031308 ? 12.92 * $g : (1.0 + 0.055) * pow($g, (1.0 / 2.4)) - 0.055;
$b = $b <= 0.0031308 ? 12.92 * $b : (1.0 + 0.055) * pow($b, (1.0 / 2.4)) - 0.055; 
```

我在 Hue 应用程序的颜色选择器左下方将我的一盏灯设置为红色，并将亮度设置为最大。以下是结果值：

```
// Read from bulb
x = 0.6472
y = 0.3302
bri = 254

// XYZ calculations
X = 1.952
Y = 0.996
Z = 0.068

// RGB calculations
r = 1.594 // Out-of-range > 1
g = 0.677
b = 0.233 
```

如您所见，生成的 r 值超出范围，因为它高于 1。我的方程式中缺少什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T09:07:21.907

> 如您所见，生成的 r 值超出范围，因为它高于 1。我的方程式中缺少什么？

Philips hue API 返回的 xy 值在[CIE 1931 颜色空间](http://en.wikipedia.org/wiki/CIE_1931_color_space)中。该颜色空间索引人眼可见的所有颜色。由于此颜色空间大于设备可以显示的颜色，因此并非所有颜色都可以映射到设备颜色空间内的颜色。

例如，如果您假设设备的颜色功能为[sRGB](http://en.wikipedia.org/wiki/SRGB)，则色域外的所有颜色将导致 R、G 和/或 B 为负值。要解决此问题，您必须将这些颜色映射到色域内的可显示颜色。最简单的选择是将所有值设置为 0，如果它们是负数。

也可以出现大于 1 的值。这个问题最简单的解决方案是用相同的因子重新调整所有颜色值，使所有值都小于 1。一个简单的方法是这样的

```
$maxValue = max($r,$g,$b);
$r /= $maxValue;
$g /= $maxValue;
$b /= $maxValue; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T09:34:26.033

用于 RGB 到 xy 和反之亦然的 Philips Hue iOS SDK 应用程序设计说明将帮助您解决这个问题：[https](https://github.com/PhilipsHue/PhilipsHueSDKiOS/tree/master/ApplicationDesignNotes) ://github.com/PhilipsHue/PhilipsHueSDKiOS/tree/master/ApplicationDesignNotes 。另请注意，我将很快更新该注释以包含函数的 Objective-C 代码。将 xy 转换为 RGB 后，您可以将值转换为 HEX。

# jquery-ui - 带有标签的 Jquery 表过滤器

> ID：16052934
> 
> 赞同：1
> 
> 时间：2013-04-17T06:19:40.043
> 
> 标签：jquery-ui, jquery, jquery-plugins

需要一个 jquery 来从过滤的数据中获取标签，这是我的“使用 Jquery 从表中过滤数据”的代码 JS Fiddle For This is at [http://jsfiddle.net/7BUmG/2/](http://jsfiddle.net/7BUmG/2/)

**HTML**

```
<input type="text" id="search" placeholder="Type to search">
<table id="table">
   <tr>
      <td>Apple</td>
      <td>Green</td>
   </tr>
   <tr>
      <td>Grapes</td>
      <td>Green</td>
   </tr>
   <tr>
      <td>Orange</td>
      <td>Orange</td>
   </tr>
</table> 
```

**CSS**

```
td {padding: 4px; border: 1px #CCC solid; width: 24.5%;} 
```

**jQuery代码**

```
var $rows = $('#table tr');
$('#search').keyup(function() {
var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();

$rows.show().filter(function() {
    var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
    return !~text.indexOf(val);
}).hide();
}); 
```

现在我想在这个搜索过滤器中添加标签方案，即当用户使用“Apple”过滤数据并且点击“Apple”时，应该标记“Apple”。

# php - 如何重命名joomla管理员文件夹

> ID：16052940
> 
> 赞同：0
> 
> 时间：2013-04-17T06:20:08.693
> 
> 标签：php, joomla, xss

我想将`joomla`管理员文件夹重命名为其他名称，以防止黑客识别网站是由`joomla`. 但我已经尝试过[这种](http://www.joomlahackers.net/joomla-tutorials/change-joomla-admin-name-or-path.html)方式。

在其中，他们正在使用 cookie。会影响网站吗？

有没有更好的方法来重命名管理员文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:26:39.373

您无法真正更改它，因为它会阻止扩展程序正确安装。但是，您可以使用 Admin Exile，它允许您向管理员 URL 添加值、键或两者。除此之外，如果输入标准管理员 URL，它会将用户重定向到您选择的站点。

[http://extensions.joomla.org/extensions/access-a-security/site-security/login-protection/15711](http://extensions.joomla.org/extensions/access-a-security/site-security/login-protection/15711)

希望这可以帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T06:40:28.397

我之前也遇到过同样的问题。请不要重命名它，你会面临很多问题。我已经通过重定向路径解决了这个问题。使用 {header} 在索引文件中重定向你的管理路径。

# android - 获取 CPU 当前速度

> ID：16052943
> 
> 赞同：0
> 
> 时间：2013-04-17T06:20:17.827
> 
> 标签：android

我应该计算每个应用程序的电池消耗。为此，我正在考虑将获取 CPU 详细信息作为第一步。我有每个应用程序的 CPU 使用率。现在我想我可能需要每个应用程序当前的 CPU 频率。我尝试使用以下代码：

“/sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq”

它随时给我CPU的最大频率。有没有可能以编程方式获取这些信息？请帮助一些人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:36:18.543

只需检查一下：我观察到有时列出频率的顺序可能会有所不同，因此您需要遍历整个列表并找到最快的（而不是在第一个非零处停止）。

[https://android.stackexchange.com/questions/19810/how-can-i-determine-max-cpu-speed-at-runtime](https://android.stackexchange.com/questions/19810/how-can-i-determine-max-cpu-speed-at-runtime)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:23:52.990

CPU不是手机上使用的大电池。显示器和收音机都是。GPS 使用情况、数据使用情况以及用户在前台使用该应用程序打开手机的时间比 CPU 使用情况要好得多，CPU 几乎是免费的。为了证明这一点——将手机置于飞行模式，保持屏幕关闭，看看它运行了多长时间。它会持续几天。

# c# - WinForms 应用程序的 Windows 窗体身份验证

> ID：16052944
> 
> 赞同：4
> 
> 时间：2013-04-17T06:20:18.490
> 
> 标签：c#, winforms, authentication, .net-4.5, roles

我正在我的 Visual Studio 2012 上使用 C# 和 .NET Framework 4.5 创建一个 Windows 窗体应用程序。

我现在想创建一个登录表单，用户可以在其中输入一些用户名和密码（之前在数据库中创建），然后应用程序验证并登录用户。如果可能的话，使用“角色控制”。

我尝试在 Google 上搜索，但我没有找到与 Windows 窗体相关的内容，只是在 ASP.NET 上。

.NET Framework 是否有任何好的（和官方的）解决方案来解决 WinForms 中的身份验证问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T06:34:37.910

不。会员系统是 Asp.net 的一部分，虽然您可以在 winforms 应用程序中使用它，但它不是很干净。

如果您已经在数据库中拥有用户名和密码，那么您最好的选择是直接实施身份验证系统，除非您担心人们对代码进行逆向工程......在这种情况下，这是一个更高级的事情使其免受逆向工程的影响。

编辑：

Microsoft 确实有[Windows Identity Foundation](http://msdn.microsoft.com/en-us/security/aa570351.aspx)，但它确实是一个比您可能想要的更复杂的系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:25:25.293

我通常会创建一个类似这样的新表单。

```
public partial class LoginForm : Form
{
    public bool letsGO = false;

    public LoginForm()
    {
        InitializeComponent();
        textUser.CharacterCasing = CharacterCasing.Upper;
    }

    public string UserName
    {
        get
        {
            return textUser.Text;
        }
    }

    private static DataTable LookupUser(string Username)
    {
        const string connStr = "Server=(local);" +
                            "Database=LabelPrinter;" +
                            "trusted_connection= true;" +
                            "integrated security= true;" +
                            "Connect Timeout=1000;";

        //"Data Source=apex2006sql;Initial Catalog=Leather;Integrated Security=True;";

        const string query = "Select password From dbo.UserTable (NOLOCK) Where UserName = @UserName";
        DataTable result = new DataTable();
        using (SqlConnection conn = new SqlConnection(connStr))
        {
            conn.Open();
            using (SqlCommand cmd = new SqlCommand(query, conn))
            {
                cmd.Parameters.Add("@UserName", SqlDbType.VarChar).Value = Username;
                using (SqlDataReader dr = cmd.ExecuteReader())
                {
                    result.Load(dr);
                }
            }
        }
        return result;
    }

    private void HoldButton()
    {
        if (string.IsNullOrEmpty(textUser.Text))
        {
            //Focus box before showing a message
            textUser.Focus();
            MessageBox.Show("Enter your username", this.Text, MessageBoxButtons.OK, MessageBoxIcon.Information);
            //Focus again afterwards, sometimes people double click message boxes and select another control accidentally
            textUser.Focus();
            textPass.Clear();
            return;
        }
        else if (string.IsNullOrEmpty(textPass.Text))
        {
            textPass.Focus();
            MessageBox.Show("Enter your password", this.Text, MessageBoxButtons.OK, MessageBoxIcon.Information);
            textPass.Focus();
            return;

        }
        //OK they enter a user and pass, lets see if they can authenticate
        using (DataTable dt = LookupUser(textUser.Text))
        {
            if (dt.Rows.Count == 0)
            {
                textUser.Focus();
                MessageBox.Show("Invalid username.", this.Text, MessageBoxButtons.OK, MessageBoxIcon.Error);
                textUser.Focus();
                textUser.Clear();
                textPass.Clear();
                return;
            }
            else
            {
                string dbPassword = Convert.ToString(dt.Rows[0]["Password"]);
                string appPassword = Convert.ToString(textPass.Text); //we store the password as encrypted in the DB

                Console.WriteLine(string.Compare(dbPassword, appPassword));

                if (string.Compare(dbPassword, appPassword) == 0)
                {
                    DialogResult = DialogResult.OK;
                    this.Close();
                }
                else
                {
                    //You may want to use the same error message so they can't tell which field they got wrong
                    textPass.Focus();
                    MessageBox.Show("Invalid Password", this.Text, MessageBoxButtons.OK, MessageBoxIcon.Information);
                    textPass.Focus();
                    textPass.Clear();
                    return;
                }
            }
        }
    }

    private void textPass_KeyDown_1(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Return)
        {
            HoldButton();
        }
    }

    private void buttonLogin_Click(object sender, EventArgs e)
    {
        HoldButton();
    }

    private void textPass_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Return)
        {
            HoldButton();
        }
    }
} 
```

然后在您的主窗体中执行以下操作：

```
public Form1(string userName)
{
    //this is incase a user has a particular setting in your form
    //so pass name into contructer
} 
```

最后：

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        LoginForm fLogin = new LoginForm();

        if (fLogin.ShowDialog() == DialogResult.OK)
        {
            Application.Run(new Form1(fLogin.UserName));

        }
        else
        {
            Application.Exit();
        }

        //Application.Run(new Form1());
    } 
```

希望这可以大致了解该做什么，尽管我确信他们有更好的方法来做到这一点，但请注意这并不是真正安全的前端。

希望这可以帮助：

编辑：哦，在我忘记之前不要使用

```
Select password From dbo.UserTable (NOLOCK) Where UserName = @UserName 
```

我只是把它扔到一个存储过程中。但无论如何，这不是最好的身份验证方式，但它至少是一个可行的解决方案，我希望你能继续前进

# javascript - 如何添加一个功能，这样一个按钮将使一个 div 消失/出现？

> ID：16052946
> 
> 赞同：0
> 
> 时间：2013-04-17T06:20:24.613
> 
> 标签：javascript, html

我在 javascript 中创建了一个函数，通过单击按钮使 div 出现，但我希望相同的按钮在第二次单击后使其消失，依此类推。

**JAVASCRIPT**

```
<script>
function show( elem )
{
    $('.dynamic_link').hide();
    $('#'+elem).show();
}
</script> 
```

**HTML**

```
<a href="#" onclick="show('link1')" id="buton"><p> BUTTON</p></a>
    <div id="link1" class="dynamic_link" style="display:none;">
        <h1>SHOWING SOMETHING</h1>
    </div> 
```

我应该在主功能中更改什么或添加另一个功能，所以按钮会发挥作用吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:22:13.780

使用 jQuery 函数`toggle()`或`slideToggle()`.

像这样：

```
$('#button').click(function(){
    $('#link1').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:26:01.193

在调用您的 javascript 函数时像这样使用

```
document.getElementById("link1").style.display='';
document.getElementById("link1").style.display='none'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:26:03.517

按照这个例子：

**HTML：**

```
<div id='content'>Hello World</div>
<input type='button' id='hideshow' value='hide/show'> 
```

**jQuery：**

```
jQuery(document).ready(function(){
    jQuery('#hideshow').live('click', function(event) {        
        jQuery('#content').toggle('show');
    });
}); 
```

欲了解更多信息：[jQuery 切换](http://api.jquery.com/toggle/)

# javascript - 选择更改值时如何替换脚本标记的源

> ID：16052948
> 
> 赞同：1
> 
> 时间：2013-04-17T06:20:29.667
> 
> 标签：javascript, html

我是 javascript 新手，我需要一些帮助。

我有两个在页面加载时运行的 javascript 文件：

```
 <script id="gvkbjs01" src="GVKB03_files/en_a.js" type="text/javascript" ></script>
    <script id="gvkbjs02" src="GVKB03_files/en_b.js" type="text/javascript" ></script> 
```

我有一个选择下拉菜单：

```
 <select lang="en" onchange="loadGVKBJS(this.value)" >
                <option value="" label=" Select a language" selected="selected" />
                <option value="af" label="Afrikaans / Afrikaans" />
                <option value="sq" label="Albanian / shqipe" />
                <option value="am" label="Amharic / አማርኛ" />
                <option value="ar" label="Arabic / العربية" />
                .......... 
```

如何从选择下拉列表中更改我的两个 javascript 文件的 javascript 源，然后调用不同的 js 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:24:37.247

给下拉列表一个 id，例如 'lang'，创建一个函数，在下拉列表更改时读取它的值，然后连接该值以生成文件的源，最后找到并替换旧的源脚本。（我想你的脚本标签在头）。

```
function generateSrc(){

 var lang = document.getElementById('lang').value;
 var src1 = 'GVKB03_files/'+lang+'_a.js';
 var src2 = 'GVKB03_files/'+lang+'_b.js';

 //Replace src from old scripts in head
 var headElms = document.getElementsByTagName("head")[0].children;
 var found = 0
 for(var i = 0; i < headElms.length; i++) {
    if(headElms[i].tagName == 'SCRIPT') {
           src_name = headElms[i].src;
           if(src_name.search("GVKB03_files") > 0 && found == 0){
             found++;
             headElms[i].src = src;
           }else if(src_name.search("GVKB03_files") > 0 && found == 1){
             headElms[i].src = src2; 
           }
     }
  }

} 
```

在 HTML 上：

```
<select id="lang" lang="en" onchange="generateSrc()" > 
```

# c - 如果在后台执行，则进程停止

> ID：16052949
> 
> 赞同：0
> 
> 时间：2013-04-17T06:20:43.367
> 
> 标签：c, linux, ptrace

下面给出的代码（process1）类似于actaul scanrio。我`global_data`使用 process1 的进程 ID 从另一个应用程序更新。

因为`getchar()`在process1中，当我运行这个进程时，

`$ ./process1 &`

显示以下信息。

`[1]+ Stopped (tty input) ./process1`

我无法删除`getchar()`。那么如何运行这两个应用程序。

注意：尝试了 telnet/ssh 选项。如果我通过 telnet 连接，那么只有那个 telnet 窗口处于活动状态。最多我只能通过一个终端工作。

```
#include <stdio.h>    
volatile int global_data = 0;

int main()
{

FILE *fp = NULL;
int data = 0;    
printf("\n Address of global_data:%x \n", &global_data);

        while(1)
        {
              if(global_data == 0)
                {
                getchar();
                continue;
                }
                else if(global_data == 2)
                {
                        fp = fopen("JeyTest.txt", "w+");
                        if(fp == NULL)
                        {
                           printf("\n Error in file creation..... \n");
                                break;
                        }

                        for(data = 0; data < 1000; data++)
                        {
                            fprintf(fp, "%d\n", data);
                        }

                        fclose(fp);
                        break;
                }
        }    

return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:30:36.447

试图从标准输入读取的后台进程被挂起（显然）。所以首先，弄清楚为什么你想从标准输入中读取 - 这可以避免 - 通过说命令行参数 - 如果是这样，那么你应该这样做。在这种情况下，从您的代码来看，您似乎想等到 volatile 变量更新 - 您不想连续检查。如果是这种情况，请使用`sleep`.

否则，您必须通过以下方式解决此问题

*   从文件重定向标准输入。

或者

*   以此处描述的方式写入 /proc/pid - [https://serverfault.com/questions/188936/writing-to-stdin-of-background-process](https://serverfault.com/questions/188936/writing-to-stdin-of-background-process) - 这是针对 Ubuntu linux - 不知道您的操作系统是什么.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:36:55.510

使用要引入流程的数据创建一个文本文件，并重定向输入：

```
$ ./process1 < file_with_data & 
```

此模式避免停止进程，因为标准输入将从文件中获取。输入文件必须有足够的数据来处理请求。

# api - 如何使用 VBA 中的 API 调用从第 3 方应用程序中的 Afxwnd40 控件获取文本？

> ID：16052955
> 
> 赞同：1
> 
> 时间：2013-04-17T06:21:07.967
> 
> 标签：api, vba, hook, sendmessage, afx

我正在尝试编写一个脚本来与第 3 方应用程序中的查找表单进行交互。

该表单有许多文本框，对应于“电话号码”和“客户 ID”等字段，还有一个命令按钮，标题为“查找”。

单击命令按钮时，表单上的多列列表框将填充数据库中与给定条件匹配的任何记录。然后，用户必须双击特定记录，这会打开一个新对话框，其中包含“调整”相关记录的选项。

我没有制作这个表格，也没有直接访问它从中提取的数据库的权限；该表格只允许用户一次调整一条记录。

我希望我的脚本一次复制一个 Excel 工作表中的电话号码列表，将它们粘贴到表单上的正确字段中，单击“查找”按钮，如果列表框中的记录字段之一匹配预定值，打开调整对话框并更改记录。

我已经使用 FindWindow 和 FindWindowEx 来获取我想要将文本粘贴到的字段的句柄，并使用 SendMesage 函数与表单进行交互。

我被困在如何从出现的列表框中读取数据。它不支持复制或粘贴，所以我不能使用 SendMessage 或 SendKeys。使用 WinSpy++，列表框的类是“Afxwnd40”，通过对在线帮助论坛的粗略搜索，它是一个传统控件，它直接“绘制”文本而不能复制它。我听说过一些关于使用“钩子”在数据发送到相关窗口时捕获数据的事情，但我不知道如何设置它。我可以使用的唯一工具是 WinSpy++ 和 VBA 中的任何 Windows API 调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-19T00:32:13.730

我知道这是一个非常古老的问题，但我一直在寻找自动化 Afx 控件的解决方案。根本没有办法在 VBA 中可靠地做到这一点。所以需要一个合适的自动化工具。

QTP/UFT 无法获取这些控件的文本，而 OCR 很糟糕。但我发现 Ranorex 能够从 GDI 层的对象中获取原始文本。

在元素浏览器的 Ranorex 中，右键单击 Afx 控件并选择“添加到 GDI 捕获”。你会发现 Ranorex 现在对那个物体的表现会好很多。

# asp.net-mvc - razor 视图没有给出编译时错误

> ID：16052956
> 
> 赞同：53
> 
> 时间：2013-04-17T06:21:08.540
> 
> 标签：asp.net-mvc, asp.net-mvc-4, razor, visual-studio-2012

我最近安装了 VS 2012 Professional。

当我尝试构建我的 MVC4 Web 项目时。当我执行“构建”或“重新构建”时，它无法识别剃刀视图中的错误。

**示例**：
我从项目中删除了一个命名空间/或者说重命名了它。我构建了解决方案，它给了我所有 cs 文件中的错误，我通过更改命名空间来修复。整个解决方案构建成功。当我运行该项目时，它给了我**编译错误**，说找不到命名空间，因为在某些视图（* .cshtml 文件）中仍然引用了旧的命名空间。

**预期的解决方案**：
我希望当我执行“构建”或“重新构建”时，它应该能够识别此类错误并向我显示任何其他错误。

这在 VS 2010 上运行良好，我是否缺少任何配置？

提前致谢 ！！阿米特

**编辑** 我自己找到了答案，我认为现在发布问题还为时过早：

[带有错误的剃刀语法在不应该编译时编译](https://stackoverflow.com/questions/5014317/razor-syntax-with-errors-compiles-when-it-should-not-compile)

> **另一个问题**
> 
> 在 .csproject 文件中将值更改为 True 后，当我开始构建项目时，它显示错误，但一次只显示一个错误。比方说，我总共有 3 个视图有 5 个错误。它只会显示一个错误。是否有任何解决方案可以显示所有 5 个错误？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-04-17T06:23:58.460

> 当我尝试构建我的 MVC4 Web 项目时。当我执行“构建”或“重新构建”时，它无法识别剃刀视图中的错误。

看起来很正常。Razor 视图由 ASP.NET 运行时动态编译。如果您希望在编译时构建视图，可以将以下选项添加到`.csproj`文件中：

```
<PropertyGroup>
    <MvcBuildViews>true</MvcBuildViews>
</PropertyGroup> 
```

您可以查看[这篇文章](http://stacktoheap.com/blog/2013/01/19/precompiling-razor-views-in-asp-dot-net-mvc-3/)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-07-10T00:06:07.293

我建议您将 MmvcBuildViews 标记添加为 Release PropertyGroup 标记的子标记，以便仅在您在发布模式下编译（或在发布模式下发布时）编译视图。这样，您的应用程序在调试时会更快。而且，在部署之前（在发布模式下构建时），您会获得编译时检查。总之，你得到了两全其美。

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <MvcBuildViews>true</MvcBuildViews>
  </PropertyGroup> 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-04-16T01:24:21.613

根据我的经验，除了上面提到的真实设置之外，您还需要确保您的 csproj 文件中存在以下设置：

```
<Target Name="MvcBuildViews" AfterTargets="AfterBuild" Condition="'$(MvcBuildViews)'=='true'">
<AspNetCompiler VirtualPath="temp" PhysicalPath="$(WebProjectOutputDir)" />
</Target> 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-04-17T06:26:37.410

默认情况下它不编译视图。您可以启用此功能，但请记住，它会增加构建时间。

您可以按照以下步骤启用编译视图：

*   卸载项目
*   打开项目文件
*   找到 `<MvcBuildViews>false</MvcBuildViews>`并将其更改为`true`
*   关闭项目文件并重新加载项目

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-13T11:40:44.907

它真的非常简单的答案通过以下步骤：

卸载项目

编辑项目

比搜索：

```
<Target Name="MvcBuildViews" AfterTargets="AfterBuild" Condition="'$(MvcBuildViews)'=='true'">
  <AspNetCompiler VirtualPath="temp" PhysicalPath="$(WebProjectOutputDir)" />
</Target> 
```

下面添加

```
<Target Name="AfterBuild" Condition="'$(Configuration)'!='Debug'">
  <RemoveDir Directories="$(BaseIntermediateOutputPath)" />
</Target> 
```

就是这样，比卸载项目。建造

并检查 Ur 语法是否正常工作。

我确定。

# operational-transform - 使用什么样的运营转型实施？

> ID：16052964
> 
> 赞同：2
> 
> 时间：2013-04-17T06:21:39.013
> 
> 标签：operational-transform

我需要实现基于 JSON 文档的数据模型的协同编辑。目前我发现了 2 个开源框架：[ShareJS](http://sharejs.org/) (NodeJS) 和[OpenCoWeb](http://opencoweb.org/)。

第一个似乎太年轻，文档不完整，发展迅速。我觉得他太生了。

第二个看起来很棒。它最大的缺点是最后一次提交的日期 - 它是一月。所以现在好像不支持了。

您使用什么框架进行运营转型？哪些可以用于非宠物项目？开源和商业产品对我来说都可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-06T16:05:05.927

我个人会推荐sharejs：

原因：

1.  有帮助的活跃社区（我估计比 opencoweb 大）

2.  作者（sharejs）现在受雇于一家在生产应用程序中使用 sharejs 的公司（Lever）。因此，sharejs 变成废弃软件的可能性较低。

3.  我将在生产中使用（我即将部署，仍处于预测试阶段），到目前为止我的经验非常好

为什么不开放coweb？

1.  项目似乎停滞不前，一段时间内没有新的提交。

2.  （我的经验）它还不是很成熟，作者似乎也不是很想维护它，请看这个例子[https://github.com/opencoweb/coweb/pull/237](https://github.com/opencoweb/coweb/pull/237)已经坐了几个月了琐碎但破坏交易的python3问题。

3.  我不知道该项目的任何生产应用程序。

4.  与 dojo 框架的集成存在一些不健康的水平，（至少在我尝试过时），这对我来说是个问题，如果您已经使用 dojo，那么它不是问题。

5.  我的开发经验在我的嘴里留下了不好的味道（即使是所有的文档），尝试了至少几个月的时间来让一些东西正常工作，但我不喜欢结果，改为 sharejs 并在几周内我有一些非常合理的东西。

# sql - 如何编写嵌套查询以显示客户名称和信用额度，其信用额度低于同一张表中 cit 中的客户？

> ID：16052967
> 
> 赞同：1
> 
> 时间：2013-04-17T06:22:08.440
> 
> 标签：sql, sql-server-2008, subquery

以下是我的 CUSTOMERS 表：

```
create table CUSTOMERS
    (CustID      char(6)       unique Not null,
     Name        varchar(45),
     Address     varchar(40),
     City        varchar(30),
     State       varchar(2),
     Zip         varchar(9),
     AreaCode    char(3),
     Phone       varchar (9),
     RepID       char(4)       not null,
     CreditLimit decimal(9,2),
     Primary key(CustID),
         Foreign key(RepID) References EMPLOYEES(EmpID));

insert into CUSTOMERS values (100,'Jocksports','345 Viewridge','Belmont','CA','96711',415,'598-6609',7844,5000);
insert into CUSTOMERS values (101,'TKB Sport Shop','490 Boli Rd.','Redwood City','CA','94061',415,'368-1223',7521,10000);
insert into CUSTOMERS values (102,'Vollyrite','9722 Hamilton','Burlingame','CA','95133',415,'644-3341',7654,7000);
insert into CUSTOMERS values (103,'Just Tennis','Hillview Mall','Burlingame','CA','97544',415,'677-9312',7521,3000);
insert into CUSTOMERS values (104,'Every Mountain','574 Surry Rd.','Cupertino','CA','93301',408,'996-2323',7499,10000);
insert into CUSTOMERS values (105,'K + T Sports','3476 El Paseo','Santa Clara','CA','91003',408,'376-9966',7844,5000);
insert into CUSTOMERS values (106,'Shape Up','908 Sequoia','Palo Alto','CA','94301',415,'364-9777',7521,6000);
insert into CUSTOMERS values (107,'Womens Sports','Valco Village','Sunnyvale','CA','93301',408,'967-4398',7499,10000);
insert into CUSTOMERS values (108,'North Woods Fitness Supply Center','98 Lone Pine Way','Hibbing','MN','55649',612,'566-9123',7844,8000); 
```

以下是我需要修改的查询：

```
select name, creditlimit
from CUSTOMERS
where name in
(select name
from CUSTOMERS
where City = 'sunnyvale'); 
```

我在任何地方都找不到示例来回答以下提示：

编写嵌套查询以显示信用额度低于 Sunnyvale 客户的客户名称和信用额度。首先列出最低信用额度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T06:31:32.277

试试这个

```
SELECT Name,CREDITLIMIT FROM  CUSTOMERS 
WHERE CREDITLIMIT < (SELECT CREDITLIMIT FROM CUSTOMERS 
                     WHERE CITY = 'Sunnyvale')
ORDER BY CREDITLIMIT 
```

如果 Sunnyvale 有多个客户，您可以使用 MIN 或 MAX

```
SELECT Name,CREDITLIMIT FROM  CUSTOMERS 
WHERE CREDITLIMIT < (SELECT MAX(CREDITLIMIT) FROM CUSTOMERS 
                     WHERE CITY = 'Sunnyvale')
ORDER BY CREDITLIMIT 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T06:38:08.060

此查询将导致 Order what you want。

```
 SELECT CreditLimit, Name
    FROM CUSTOMERS
    WHERE CreditLimit < ( 
    SELECT CreditLImit
    FROM CUSTOMERS
    WHERE City =  'sunnyvale' ) 
    ORDER BY CreditLimit 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T06:34:21.600

```
select name, creditlimit
from CUSTOMERS
where creditlimit <
(select CreditLimit
from CUSTOMERS
where City = 'sunnyvale') order by CreditLimit 
```

试试上面的查询。

**这是演示：**

[SQLFIDDLE 演示](http://sqlfiddle.com/#!3/81187/2)

# python - 在python中创建一个类似表的结构

> ID：16052969
> 
> 赞同：0
> 
> 时间：2013-04-17T06:22:12.293
> 
> 标签：python, user-interface, tkinter, download, tabular

我正在用 python 制作一个下载管理器。我想创建一个类似结构的表，其中包含多列和多行来显示：

下载名称、下载状态（暂停/下载中）、下载大小等信息交互。

谁能给我关于如何创建一个类似表格的结构的想法，我可以轻松地添加上面提到的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T11:10:48.837

ttk treeview 小部件允许您拥有多个列。例如：

```
import Tkinter as tk # python 2.7
import ttk
...
root = tk.Tk()
...
tree = ttk.Treeview(root, ...)  
tree.configure(columns=('size', 'modified', 'owner'))
...
tree.insert('', 'end', text='item 1', values=('20k','yesterday', 'kilgore trout')) 
```

有关更多信息，请参阅[http://www.tkdocs.com/tutorial/tree.html](http://www.tkdocs.com/tutorial/tree.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:55:55.160

您的问题有点令人困惑-您谈论的是数据结构和持久性，然后是列表框（GUI 的东西......）

wrt /数据结构和持久性部分具有“行和列”的“表状”结构很容易建模为管道列表或元组列表。对于持久性部分，您可以将列表序列化为 json 并将其写入文件或将其写入为 CSV（使用 stdlib CVS 包）或使用 SQL 数据库。

# c# - 如何使 Mysql 和 windows IIS 服务器时间格式相同

> ID：16052970
> 
> 赞同：0
> 
> 时间：2013-04-17T06:22:13.453
> 
> 标签：c#, asp.net, mysql, datetime

我在使用时间查询 mysql 时遇到问题。

```
DateTime dt = DateTime.Now;
string datet = dt.ToString("yyyy-MM-dd hh:mm:ss"); //gives 2013-04-17 12:59:31 
```

但同时当我使用-->查询sql时

```
SELECT NOW() 
```

它给了 2013-04-17 00:59:24

当小时部分为上午 12 点（24 小时）时，我的以下查询失败

我正在使用的查询是

```
 string q = "SELECT orderid,fname,subtotal FROM userinfo WHERE dtbook > '" + from + "' AND dtbook < '" + to + "' 
```

当我在 sql 中运行以下查询时，将 12 更改为 00

```
SELECT * FROM userinfo WHERE dtbook > CAST('2013-04-17 00:00:00' AS DATETIME) 
```

我得到了正确的结果，但是由于我必须计算从服务器查询到数据库的时间，所以我的查询变成了

```
SELECT * FROM userinfo WHERE dtbook > CAST('2013-04-17 12:00:00' AS DATETIME) 
```

我在服务器上都尝试过转换时间 ToString("yyyy-MM-dd h:mm:ss") 和 ToString("yyyy-MM-dd hh:mm:ss") 但结果是一样的我怎样才能得到小时分量在 00 时是 24 小时？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T06:25:33.870

好吧，*直接*的问题是您使用`hh`的是`HH`. `hh`是 12 小时值的说明符；`HH`是 24 小时值的说明符。

但是，您*不*应该首先将日期转换为字符串。与其将值转换为字符串并将其包含在 SQL 语句中，不如使用参数化查询，并将参数设置*为`DateTime`*.

那样：

*   您避免在 SQL 中使用 CAST
*   您避免了有问题的字符串转换
*   代码将更清晰（您将能够看到不涉及字符串连接的 SQL，并且您将代码与数据分开）
*   您将养成编写参数化查询的习惯

您应该*始终*参数化您的 SQL - 主要是为了避免[SQL 注入攻击](http://bobby-tables.com)，但也为了上述所有好处。更一般地说，避免不必要的转换——每次转换都有可能出错。

# php - 获取 $_POST[] 值后 AJAX 调用返回

> ID：16052972
> 
> 赞同：0
> 
> 时间：2013-04-17T06:22:16.743
> 
> 标签：php, ajax, post, call

我的问题是这个。我有这个 ajax 调用：

```
 $.ajax({
                url: "./changepassword_ajax.php",
                type: "POST",
                data: formData,
                processData: false,
                contentType: false,
                success: function (res) {

                }
        }); 
```

var formData 有信息（这不是问题）。在“changepassword_ajax.php”我有这个代码：

```
$obj = new All();
$clave  = $obj->CNF_get('admin_clave');

if($_POST('oldpassword') == $clave){
    $obj->CNF_set('admin_clave', $_POST('newpassword'));
    echo "OK";
}else{

    echo "ERROR";
} 
```

这样做之后：

```
if($_POST('oldpassword') == $clave){ 
```

ajax 调用返回。所以它没有到达代码的其余部分。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:25:35.917

一旦您 ECHO 开始响应标头...但是如果没有设置 exit() 或 die()，您的 PHP 脚本不会停止并且它会结束..

我可以给你的一些建议是..

在您的 JQUERY 添加 1 个参数

> 数据类型：'json'，

在您的 PHP 中，您必须回显 Json 编码的响应（最好是数组）..

```
echo json_encode(array('state'=>"OK"));
exit(); 
```

这种方式在你 jquery 的响应中你可以..

```
success: function (res) {
    alert(res.state);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:25:51.023

请使用下面的代码

```
$obj = new All();
$clave  = $obj->CNF_get('admin_clave');

if($_POST['oldpassword'] == $clave){
    $obj->CNF_set('admin_clave', $_POST('newpassword'));
    echo "OK";
    exit;

}else{

    echo "ERROR";
    exit;
} 
```

提醒`res` in ajax 成功代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:32:24.803

`if($_POST('oldpassword') == $clave){` 我认为您在编写代码替换行时犯了 一个小错误 `if($_POST['oldpassword'] == $clave){`

并重新运行代码

# python - 什么是优化列表对象的好方法，而对象比python中的数据本身占用更多的内存空间

> ID：16052973
> 
> 赞同：0
> 
> 时间：2013-04-17T06:22:18.377
> 
> 标签：python, string, list

什么是优化列表对象的好方法，而对象比python中的数据本身占用更多的内存空间？

假设我们有 100M 个字符串列表对象（可能来自 long_string.split('\t')），每个字符串对象只保存几个字节的字符串数据，但它自己的对象占用了几十个内存。python中有什么好的替代解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T06:28:47.300

一个好的方法可能是不要一次将它们存储在内存中，例如通过使用[生成器](http://wiki.python.org/moin/Generators)来按需生成对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:25:17.567

一次处理多行大文件中的一行：

```
def main():
    with open('input_file.txt') as file:
        for line in file:
            process_line(line) 
```

如果文件包含数字（例如，每行一个短整数）并且您需要所有数字，那么您可以使用[numpy 数组](http://docs.scipy.org/doc/numpy/user/whatisnumpy.html)：

```
from functools import partial
from itertools import imap
import numpy as np

def count_lines(file):
    """Return number of lines in the file."""
    return sum(chunk.count('\n') for chunk in iter(partial(file.read, 1<<15),''))

with open('input_file.txt', 'rb') as file:
    nlines = count_lines(file) # count lines to avoid overallocation in fromiter
    file.seek(0) # rewind
    a = np.fromiter(imap(int, file), dtype=np.int16, count=nlines) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:53:32.460

我认为主要问题是您读取内存中的整个文件，如果可能的话，您应该分块读取文件并处理它们

```
file_object = open('filename', 'r')

while True:
    line = file_object.readline()
    if not line: break
    process_line(line) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T08:01:13.097

```
def split_lines(text):
    temp = ''
    for char in text:
        if (char != '\n'):
            temp += char
        else:
            yield temp
            temp = ''
for each in split_lines(text):
     #process each line 
```

我检查了一下，这行得通，错误似乎比仅使用要花费更长的时间

```
for each in text.split('\n'):
    #process each line 
```

但它节省了大量的内存空间，因为文本数据中有数十亿行！

# c# - 创建 OpenExcel 并下载

> ID：16052979
> 
> 赞同：2
> 
> 时间：2013-04-17T06:22:35.830
> 
> 标签：c#, asp.net

我有此代码用于创建 Excel 文件，然后将其发送以供下载：

```
Stream stream = Stream.Null;
using (ExcelDocument doc = ExcelDocument.CreateWorkbook(stream)) 
{
     ExcelWorksheet wsheet = doc.Workbook.Worksheets.Add("Assessment");
     doc.EnsureStylesDefined();
     // add some cells              
}

Response.ContentType = "application/vnd.ms-excel";
Response.AddHeader("Content-Disposition", "inline;filename=Assessment.xlsx;charset=utf-8;");
Response.BinaryWrite(Utilities.Utilities.ConvertFileToByteArray(stream));
Response.End(); 
```

当**使用**结束时，我收到此错误：

> 文件包含损坏的数据。

如果我将文件保存到我的磁盘它工作正常。

我哪里出错了？

我正在使用这个[组件](http://openexcel.codeplex.com/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:10:28.920

将第一行更改为：

```
MemoryStream stream = new MemoryStream(); 
```

也改变

```
Response.BinaryWrite(Utilities.Utilities.ConvertFileToByteArray(stream)); 
```

至

```
Response.BinaryWrite(stream.ToArray()); 
```

# java - CellRenderer 项目重绘

> ID：16052980
> 
> 赞同：6
> 
> 时间：2013-04-17T06:22:45.073
> 
> 标签：java, swing, jlist, jprogressbar, listcellrenderer

我创建了自己的 CellRenderer，其中包括一些字符串和 JList 项目中的 JProgressBar ...但是 JProgressBar 和整个 JList 项目将绘制一次，我正在寻找一种重新绘制项目的方法......我试过了启动一个线程，这将永久重新绘制......但我不知道我必须重新绘制什么才能得到结果......

JList repaint ...没有结果 CellRenderer repaint ...没有结果 JFrame repaint ...没有结果

有人了解我的问题并知道出路吗？

非常感谢！

更新：[更新已删除]

下一个更新：

```
import java.awt.Component;
import java.awt.Dimension;
import javax.swing.DefaultListModel;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.ListCellRenderer;

public class Main extends JFrame{

public DefaultListModel contentListModel = new DefaultListModel();
public MyCellRenderer MCR = new MyCellRenderer();
public JList contentList = new JList(contentListModel);

public Main(){
    super("Example");
    setMinimumSize(new Dimension(300,300));
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    contentList.setCellRenderer(MCR);
    contentListModel.addElement("");
    contentListModel.addElement("");
    add(contentList);
}

public static void main(String[] args){
    new Main().setVisible(true);
}

class MyCellRenderer extends JPanel implements ListCellRenderer{

    public MyCellRenderer(){
        JProgressBar jpb = new JProgressBar();
        jpb.setIndeterminate(true);
        add(jpb);
    }

    @Override
    public Component getListCellRendererComponent(JList arg0, Object arg1,
            int arg2, boolean arg3, boolean arg4) {
        // TODO Auto-generated method stub
        return this;
    }

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T11:42:02.247

如前所述，渲染器不是实时组件，它不是组件层次结构的一部分。因此，“自然”动画效果（如不确定进度条的移动）会丢失。一个可能有效的技巧 - 但请注意：这高度依赖 LAF！- 是对系统撒谎，并且总是将酒吧报告为可支付的。结合每 x ms 伪造一个新值的计时器可能会再次显示动画：

```
public static class ProgressBarRenderer implements TableCellRenderer {

    /** The bar. */
    private JProgressBar indeterminate = new JProgressBar() {
        // fake displayable to trigger ui animation
        @Override
        public boolean isDisplayable() {
            return true;
        };
    };

    /** The bar. */
    private JProgressBar determinate = new JProgressBar() ;

    public ProgressBarRenderer() {
        indeterminate.setStringPainted(true);
        indeterminate.setIndeterminate(true);
        indeterminate.setString(null);
    }    

    @Override
    public Component getTableCellRendererComponent(JTable table,
            Object value, boolean isSelected, boolean hasFocus, int row,
            int column) {
        int pbi = (Integer) value;
        if (pbi < 0) {
            return indeterminate;
        }
        determinate.setValue(pbi);
        return determinate;
    }
}

// a timer driving the animation
Action update = new AbstractAction() {

    int count;
    @Override
    public void actionPerformed(ActionEvent e) {
        table.setValueAt(-1, 0, AncientSwingTeam.INTEGER_COLUMN);
    }

};
new Timer(100, update).start(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T07:28:21.867

*   +1 有趣的问题，

*   但`Renderer`在 Swing 中并没有指定显示动画，这只是静态绘画、幻觉、快照，

*   你必须在你的代码中为这个对象设置动画，但`JProgressBar.setIndeterminate(true);`如果没有肮脏的黑客，这不是一件容易的事，

    1.  需要自己的`JProgressBar`

    2.  需要自己的动画`ListCellRenderer`，并且结果可能与`JProgressBar`放置在`JPanel`例如

* * *

*   我认为`JList`不合适`JComponents`，使用`JTable`一列和/或不使用`JTableHeader`

*   与for一起使用`JPanel`（由 放置`GridLayout`）的简单解决方法，然后输出到 Swing GUI 将与（不带or ）非常相似`JProgressBars``JProgressBar.setIndeterminate(true);``JTable``JTableHeader``JList`

    1.  把这个`JPanel`放到`JScrollPane`

    2.  覆盖`getPreferredSize`for `JScrollPane`，然后您将正确模拟[JList.setVisibleRowCount](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#setVisibleRowCount%28int%29)

    3.  使用 JComponents 和 , 更改JScrollBar.setUnitIncrement[以](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollBar.html#unitIncrement)实现自然滚动`JPanel``JList``JTable``JTextArea``JScrollPane`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T07:13:58.017

单元格渲染器是组件的静态/橡皮图章，它们不是“真实的”活动组件。它们只是简单地“绘制”到使用它们的视图的表面上。

这意味着（真的）不可能重新绘制它们。您可以通过更改要更改的行的值来鼓励列表更新。这将导致模型触发更新，从而导致列表重新绘制。

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.DefaultListModel;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JProgressBar;
import javax.swing.JScrollPane;
import javax.swing.ListCellRenderer;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestProgressListCellRenderer {

    public static void main(String[] args) {
        new TestProgressListCellRenderer();
    }

    public TestProgressListCellRenderer() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                final DefaultListModel<Float> model = new DefaultListModel<>();
                model.addElement(0f);

                JList<Float> list = new JList<>(model);
                list.setCellRenderer(new ProgressListCellRenderer());

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JScrollPane(list));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                Timer timer = new Timer(125, new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        float value = model.getElementAt(0);
                        value += 0.01;
                        if (value >= 1f) {
                            value = 1f;
                            ((Timer)e.getSource()).stop();
                        }
                        model.setElementAt(value, 0);
                    }
                });
                timer.setRepeats(true);
                timer.setCoalesce(true);
                timer.start();

            }
        });
    }

    public class ProgressListCellRenderer extends JProgressBar implements ListCellRenderer<Float> {

        @Override
        public Component getListCellRendererComponent(JList<? extends Float> list, Float value, int index, boolean isSelected, boolean cellHasFocus) {
            setValue(Math.round(value * 100));
            return this;
        }            
    }        
} 
```

这是一个简单的例子，我尝试使用`setIndeterminate`，但我无法更新它（非常烦人），但这可能会引发一些想法

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-17T11:28:19.820

您可以`javax.swing.Timer`自定义驱动动画`ProgressBarUI`，见[这里](https://stackoverflow.com/a/8886795/230513)；`incrementAnimationIndex()`看起来很有希望，但我还没有尝试过。

![图片](https://i.stack.imgur.com/i4k7A.png)

如果没有更好的解决方案，您可以在 a 中使用`ProgressIcon`a `DefaultListCellRenderer`；该方法[在此处](https://stackoverflow.com/a/3484251/230513)的 a 中进行了说明`JTabbedPane`。

![图片](https://i.stack.imgur.com/fEzdc.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T07:12:18.183

这很简单。

```
public void updateListData(final JList myList) {
  SwingUtilities.invokeLater(new Runnable() {
    public void run() {
      ListModel lm = myList.getModel();
      DefaultListModel dlm = new DefaultListModel();
      for (int i = 0; i < lm.getSize(); i++) {
        dlm.addElement(lm.getElementAt(i));
      }
      myList.setModel(dlm);
    }
  });
} 
```

上面的代码可以从 EDT 和另一个线程调用。但是您还应该阅读如何处理 Swing 组件并了解模型（ListModel、TableModel 等）。要让 JList 中的元素重新绘制，您应该在模型中修改它的对象。

# xml - JRebel 部署战争的相对路径

> ID：16052987
> 
> 赞同：0
> 
> 时间：2013-04-17T06:23:23.630
> 
> 标签：xml, jboss, relative-path, jrebel

我最近开始将 JRebel 与 Eclipse 和 Jboss 一起使用，它对我来说工作得非常好。它将更改的文件部署到

> D：/工作区/项目/构建/类

正如我在`rebel.xml`. 但是，我想更改相对于`tmp`Jboss 服务器内文件夹中最近部署的战争的路径。有没有办法我可以这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:20:32.297

在你的情况下，

```
D:/Workspace/Project/build/classes 
```

是 IDE 将类编译到的目录。**rebel.xml**只是为 JRebel 指定从哪里加载这些类。

要使用相对路径，您可以定义一个占位符：

```
${workspace.path}/Project/build/classes 
```

然后您可以通过 VM 参数定义占位符值来扩展占位符：

```
-Dworkspace.path=D:/Workspace 
```

不幸的是，没有办法指定真正的相对路径，a-la **../build/classes**

我的问题是为什么要指定 JBoss 的 tmp 文件夹的路径？

# web-applications - Response.getoutputstream 在将输出写入碧玉报告时已为此响应调用异常

> ID：16052997
> 
> 赞同：2
> 
> 时间：2013-04-17T06:24:12.150
> 
> 标签：web-applications, spring-mvc, jasper-reports

我正在开发 Spring Web 应用程序，在我的一个控制器中，我编写了代码来处理一些东西并写出 jasper 报告。此代码工作正常，但有时它会抛出上述异常。我正在正确关闭所有输出流，但我仍然收到此错误，知道我哪里出错了。？

这是我的控制器中的代码

```
@RequestMapping(method = { RequestMethod.GET, RequestMethod.POST }, value = "/export.do")
public String display(ModelMap model, HttpServletRequest request,   HttpServletResponse response,@RequestParam(required = false, value = "type") String type,
@RequestParam(required = false, value = "jrxml") String jrxml) throws IOException {
  Map imagesMap = new HashMap();
  String sum=request.getParameter("typ");   
  request.getSession().setAttribute("IMAGES_MAP", imagesMap);
  SearchCriteria criteria = (SearchCriteria) request.getSession() .getAttribute("searchCriteria");
  criteria.setPageSize(500000);
  criteria.setPage(0);
  BillingHistoryInputinput=BillingHistoryInput)request.getSession().getAttribute("input");
  ByteArrayOutputStream out = new ByteArrayOutputStream();
  try {
   Map<String,Object> datas = generateData(criteria, request, input);
   if (StringUtils.isEmpty(type))
    type = "xlsx";
   if (!type.equals("html") && !(type.equals("print"))) {
    response.setHeader("Content-Disposition","attachment;filename= billinghistory." + type);
   }
   response.setContentType(MimeUtil.getContentType(type));          
   Map<String, Object> params = (Map<String,Object>)datas.get("params");
   if (!type.equals("print")&&!type.equals("pdf")) {
    out = dynamicReportService.generateStaticReport("billinghistory",
    (List)datas.get("data"), params, type, request);
   }
   else if (type.equals("pdf")) {
    out = dynamicReportService.generateStaticReport("billinghistorypdf",
    (List)datas.get("data"), params, type, request);
   }
   else {
    out = dynamicReportService.generateStaticReport("billinghistory"+"print",      (List)datas.get("data"), params, type, request);
   }
   out.writeTo(response.getOutputStream());
   criteria.setPageSize(500);
   out.flush();
   out.close();
   return null;
} 
catch (Exception e) {
  e.printStackTrace();
  log.warn("Unable to create file :" + e);
  request.getSession().setAttribute("errors", e.getMessage());
  return "error";
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:32:17.657

我认为例外是因为您编写了代码以仅在`try`块内关闭输出流。但是如果在过程中间抛出任何异常会发生什么？所以你也需要添加 `out.close();`你的 catch 块。