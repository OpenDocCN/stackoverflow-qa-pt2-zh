# StackOverflow 问答 15699000-15699999

# node.js - express/node windows 7没有命令行实用程序

> ID：15699005
> 
> 赞同：4
> 
> 时间：2013-03-29T07:13:09.003
> 
> 标签：node.js, express, command-prompt

我无法`express`从 Windows 7 命令行运行该命令。我正在遵循的教程（[此处](http://dailyjs.com/2010/11/08/node-tutorial-2/)）建议我使用命令行并调用 express 来构建骨架应用程序。

我进入 node_modules 区域中 express 模块的目录，并尝试找到能够从命令行运行的批处理文件或可执行文件。

我什么也没找到，模块中没有可以从命令行运行的文件。

我现在很困惑。

有谁知道这个难以捉摸的快速命令行实用程序存在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:23:22.643

我找到了批处理文件。

旨在通过命令提示符调用的模块的所有命令文件都位于`node_modules\.bin`

因此，请确保它在您的路径环境变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T04:40:40.933

看起来 Jonathan Lonowski 是对的 - 该指南有点过时了。使用 express 生成器的最新命令是：

```
npm install -g express-generator 
```

这仍然会给出教程中建议的相同目录结构。更多关于[Express 的 Github 页面的信息](https://github.com/strongloop/express#quick-start)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-30T13:24:31.030

您需要安装**Express 应用程序生成器**，如 Express[入门](http://expressjs.com/starter/generator.html)文档中所述。使用以下命令安装它：

```
 $ npm install express-generator –g 
```

之后，您可以`express`从任何 Windows 7 命令行运行该命令。

# json - play2 框架读取中的递归 JSON 路径

> ID：15699009
> 
> 赞同：2
> 
> 时间：2013-03-29T07:13:57.993
> 
> 标签：json, scala, playframework-2.0

我正在尝试解析具有未公开数量的服务类型对象的 JSon 对象，我希望将它们的名称作为对象作为列表的递归路径。

```
implicit val collabReads: Reads[Collaborator] = (
  (__ \ "firstname").read[String] and
  (__ \ "lastname").read[String] and
  (__ \ "services").read( 
    (__ \\ "name").lazyRead[list[String])
)(Collaborator) 
```

我尝试了这种方法和其他方法，但似乎没有任何效果，因为我在递归路径上总是出错，而且我在任何地方都找不到任何带有递归路径的 Json 读取示例。这甚至被支持吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-20T01:37:15.990

```
implicit val collabReads: Reads[Collaborator] = (
  (__ \ "firstname").read[String] and
  (__ \ "lastname").read[String] and
  (__ \ "services" \\ "name").lazyRead[list[String]]
)(Collaborator) 
```

你试过这个吗？

# c# - 我如何对我的实体上下文进行单元测试

> ID：15699036
> 
> 赞同：0
> 
> 时间：2013-03-29T07:17:31.997
> 
> 标签：c#, entity-framework, unit-testing, moq, entity-framework-5

我正在研究实体框架并希望对我的应用程序进行单元测试。问题是EntityContext。我正在使用 Moq 库。Moq 可用于接口和抽象类。但是这里的问题是 EntityContext 是从 DbContext 派生的，它既不是抽象类也不是接口。我如何为上下文提供最小起订量对象。我试图找到最佳实践，但大多数帖子都很旧（2、3 岁）。我正在使用 EF 5.0，我认为 Microsoft 或其他人应该做一些事情来测试 EntityContext。

```
public class Repository
{
private EntityContext _context;
public EntityContext Context;

    public Repository()
    {
        _context = new EntityContext();
    }

    internal Repository(MockContext mockContext)  // Mock Context. Is it possible?
    {
        _context = mockContext;
    }
} 
```

注意：抱歉重复问题，但我无法找到有关此主题的最新问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:06:38.433

我要做的是让 EntityContext 实现一个接口。假设 EntityContext 公开了一个员工列表和一个部门列表。你会做这样的事情：

```
public interface IEntityContext
{
    IQueryable Departments { get; set;}
    IQueryable Employees { get; set;}
} 
```

在您的存储库中需要一个 IEntityContext 实现。在生产代码中发送真正的实现，EntityContext。在单元测试中，在指定您的期望后发送 Mock<IEntityContext>().Object 。另一种选择是实现一个实现 IEntityContext 并在单元测试中用作内存数据库的 FakeEntityContext。

# django - 未找到关键“类别”

> ID：15699038
> 
> 赞同：0
> 
> 时间：2013-03-29T07:17:51.090
> 
> 标签：django

我一直在尝试修复一个存在重置特定值问题的表单，每次将一个值输入到表单中。

我正在关注本教程，了解如何在提交表单后突然保留特定值，

我收到这个错误

```
Key 'Category' not found in <QueryDict: {}>

 File "C:\o\mysite\pet\views.py" in WhiteBoardFinder
   234\.     if request.GET['Category']:
 File "C:\Python26\Lib\site-packages\django\utils\datastructures.py" in __getitem__
   258\.             raise MultiValueDictKeyError("Key %r not found in %r" % (key, self)) 
```

我似乎无法理解这个问题，因为我的表单字段被称为 Category 并且我使用的是 django 生成的表单。

我的观点.py

```
def WhiteBoardFinder(request):
    if request.GET['Category']:
        request.session['Category'] = request.GET['Category']
        category = request.GET['Category']
        posts = WhiteBoard.objects.filter(Category=category)
        form = WhiteBoardFinderForm(initial={'Category': request.session.get('Category')})
        paginator = Paginator(posts, 1)

        try: page = int(request.GET.get("page", '1'))
        except ValueError: page = 1

        try:
            posts = paginator.page(page)
        except (InvalidPage, EmptyPage):
            posts = paginator.page(paginator.num_pages)
        return render(request,"whiteboardfinder.html",{"posts":posts,'form':form},)
    return render(request,"whiteboardfinder.html",{'form':WhiteBoardFinderForm()}) 
```

我的表格.py

```
class WhiteBoardFinderForm(forms.ModelForm):
        class Meta:
                model = WhiteBoard
                fields = ('Category',) 
```

我的 whiteboardfinder.html

```
<form method="GET">
    {{ form.as_p }}
    <input type="submit" value="Search">
</form>

        {% for post in posts.object_list %}
            <div class="title">{{ post.name }}</div>
            {% endfor %}

    <!-- Next/Prev page links  -->
    {% if posts.object_list and posts.paginator.num_pages > 1 %}
    <div class="pagination" style="margin-top: 20px; margin-left: -20px; ">
        <span class="step-links">
            {% if posts.has_previous %}
                <a href= "?page={{ posts.previous_page_number }}">newer entries &lt;&lt; </a>
            {% endif %}

            <span class="current">
                &nbsp;Page {{ posts.number }} of {{ posts.paginator.num_pages }}
            </span>

            {% if posts.has_next %}
                <a href="?page={{ posts.next_page_number }}"> &gt;&gt; older entries</a>
            {% endif %}
        </span>
    </div>
    {% endif %}

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:25:34.713

```
if request.GET.get('Category'):
    request.session['Category'] = request.GET['Category']
    category = request.GET['Category'] 
```

# android - 自定义权限如何发送OrderedBroadcast到其他APP？

> ID：15699039
> 
> 赞同：1
> 
> 时间：2013-03-29T07:17:57.013
> 
> 标签：android, permissions, broadcastreceiver, broadcast

我的要求是，从一个应用程序我想通过广播通知另一个应用程序一些事件，但我不希望其他应用程序也收到广播。所以我认为有权限的 sendOrderedBroadcast 是一个很好的解决方案。

然后我的测试看起来像这样：

**BCSender APP：**
将定义一个自定义权限，并使用此权限发送广播：

```
<permission 
    android:protectionLevel="normal"
    android:name="com.czou.permission.BC" /> 
```

BCSender 中唯一的活动：

```
package com.example.bcsender;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;

public class MainActivity extends Activity {

    private static String BC_PERMISSION = "com.czou.permission.BC";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        sendBroadcast();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private void sendBroadcast()
    {
        Intent intent = new Intent("android.intent.action.czou_broadcast");
        intent.putExtra("msg", "hello from czou");
        sendOrderedBroadcast(intent, BC_PERMISSION);
        //sendBroadcast(intent, BC_PERMISSION);
    }    
} 
```

**BCReceiverA APP：**
会声明BCSender APP中定义的权限并注册广播接收器：

```
<user-permission android:name="com.czou.permission.BC" /> 
```

BCReceiverA 中的唯一活动：

```
package com.example.bcreceivera;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.view.Menu;

public class MainActivity extends Activity {        
    private static String TAG = "BCReceiverA";

    private BroadcastReceiver mReceiver = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        registerReceiver();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onDestroy()
    {
        super.onDestroy();

        unregisterReceiver();
    }

    private void registerReceiver()
    {
        android.util.Log.d(TAG, "register receiver.");
        mReceiver = new BroadcastReceiver() 
        {
            @Override
            public void onReceive(Context context, Intent intent)
            {
                String msg = intent.getStringExtra("msg");
                android.util.Log.d(TAG, "Receive broadcast. " + msg);

                Bundle bundle = new Bundle();
                bundle.putString("msg", msg + "pass through ReceverA");
                setResultExtras(bundle);
                abortBroadcast();
            }
        };

        IntentFilter intentFilter = new IntentFilter("android.intent.action.czou_broadcast");
        intentFilter.setPriority(1000);
        this.registerReceiver(mReceiver, intentFilter);

    }

    private void unregisterReceiver()
    {
        android.util.Log.d(TAG, "unregister receiver.");
        this.unregisterReceiver(mReceiver);     
    }    
} 
```

你可以发现，在我使用`sendOrderedBroadcast(intent, BC_PERMISSION)`的BCSender中，结果是BCReceiverA收不到广播，也收不到`sendBroadcast(intent, BC_PERMISSION)`。但是如果我使用`sendBroadcast(intent)`，接收者可以得到它。

那么`sendBroadcast()/sendOrderedBroadcast()`这里有什么问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:30:01.447

你有`<user-permission>`. 元素名称应该是`<uses-permission>`.

此外，您可能希望`<permission>`在两个应用程序中声明该元素，因此它们的安装顺序无关紧要。否则，必须在应用`<permission>`程序*之前**安装*应用`<uses-permission>`程序。

# matlab - 使用“来自工作区”模块的数据时，Simulink 模型中的结果不正确

> ID：15699042
> 
> 赞同：0
> 
> 时间：2013-03-29T07:18:01.193
> 
> 标签：matlab, input, simulink, workspace

我在为我的 Simulink 模块使用导入工作区的数据时遇到问题。

我的情况：

在将此方法应用于实际的 Simulink 模块之前，我做了一个简单的框图来模拟结果。我利用“从工作区”块读取数据和观察输出的范围。这些是设置：

```
t=0:22/565:22
a.time=t
a.signals.values=ddata   %ddata contains [565x1] datas
a.signals.dimensions=1; 
```

我意识到范围内的结果与数据不匹配。

我发现在这个网站上（[http://blogs.mathworks.com/seth/2012/02/09/using-discrete-data-as-an-input-to-your-simulink-model/](http://blogs.mathworks.com/seth/2012/02/09/using-discrete-data-as-an-input-to-your-simulink-model/)）采取的步骤Simulink 求解器与输入时间向量中指定的不同。

尝试解决：

我将时间向量设置为零，但出现错误。

```
a.time=[]; 
```

错误：“为'test/From Workspace'指定的连续采样时间无效。当来自工作空间的输入是没有时间数据的结构时，不允许连续采样时间。要消除此错误，请选择离散采样时间或更改输入数据包括时间数据。”

问题：

1.  如何在不使用时间向量的情况下解决此错误？

2.  将每个时间步的一行读入 Simulink 模块而不是整个数据列表的最佳方法是什么？

如果有人可以为我的案例提供见解/解决方案/替代方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:23:00.323

数据中的时间向量与 Simulink 在模拟模型时将使用的时间步长几乎没有关系。将您的输入时间/数据视为一个查找表，Simulink 将使用它来获取每个时间步长（它决定采用）的输入值（使用插值）。

要强制 Simulink 在给定时间点采取步骤，您需要在“配置参数”对话框的“求解器”页面上更改参数。听起来您想使用步长为 22/565 的固定步长求解器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-05T09:40:04.897

也许您可以使用一[维查找表块](https://www.mathworks.com/help/simulink/slref/1dlookuptable.html)？您将时间向量用作断点，将 ddata 用作表数据。如果 Simulink 在时间向量中的点之间有一个时间点，您可以使用线性/三次插值或使用最近的点。通过这种方式，您可以避免将 Simulink 强制到某些时间点。

[![在此处输入图像描述](../Images/f2de044821e8924bff15619f80354d73.png)](https://i.stack.imgur.com/KJBxW.png)

# mysql - 同一张表中有多个外键

> ID：15699045
> 
> 赞同：5
> 
> 时间：2013-03-29T07:18:18.667
> 
> 标签：mysql

我可以在 MYSQL 中引用 3 个外键吗？因为在 INNODB 中，关系视图中只出现了一个外键约束。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T07:20:56.447

是的，你可以做到，

**例子：**

```
CREATE TABLE table
(
user_id int,
track_id int,
primary key (user_id, track_id),
foreign key (user_id) references table1(table1Column),
foreign key(track_id) references table2(table2Column)
) 
```

复合主键；

```
FOREIGN KEY ('column1','column2','column3') 
REFERENCES table1('column1','column2','column3') ; 
```

# reporting-services - 如何在 ssrs 的矩阵报告中实现这一点

> ID：15699048
> 
> 赞同：1
> 
> 时间：2013-03-29T07:18:38.147
> 
> 标签：reporting-services

我正在使用 SSRS 矩阵控制开发报告。

这是我正在使用的示例表

![混音](../Images/560ad181609692b2aa1aadc60c110337.png)

这就是我在 SSRS 中使用矩阵工具尝试实现的目标

![结果](../Images/8c88641d57345b7faf92d5b6df369f8c.png)

好的现在描述

报告需要按位置代码对类型 A、B、C 及其案例数量进行分组。第 6 行将包含从第 4 行和第 5 行（类型 A 和类型 B）派生的计算值。

如屏幕截图所示，用于得出结果的公式（44 美元）是通过使用公式

```
(Case Value of Type B * average of Type B) + (Case Value of Type C * average of Type C)
-------------------------------------------------------------------------------------
                           (Case Value of Type B + Case Value of Type C) 
```

所以 44 美元的价值可以实现为

```
(57 * 18) + (44 * 78) / (57 + 44) 
```

有人可以指导我如何在 ssrs 中实现这一点。我已经制作了结构，但无法计算总值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:00:12.823

这取决于您如何获得平均值。这是在幕后发生的，是您预先确定的，还是根据您可以加入的其他表进行的？

如果它全部在您可以获得的数据集中，我会这样做：

1.  确定一个既是您的数据又是您的平均值的数据集。我不确定您是来自 SQL 还是只是在 Excel 中完成这一切。我将暂时在 SQL 中进行模拟：

    ```
    declare @Avgs Table ( location int, type varchar(1), cs int, average int);

    insert into @Avgs values (1, 'A', 21, 10),(1, 'B', 57, 18),(1, 'C', 44, 78);

    Select top 10 *
    from @Avgs 
    ```

2.  您可能想添加一个“计算列”或直接在 SQL 中进行数学运算，因为 SSRS 中的表达式编辑器对于一两个函数通常是可以的，但是当您非常参与数学运算时，我发现 SQL 引擎更适合处理它. 这也使得以后改变事情变得更好。

3.  所以我会这样修改SQL：

    ```
    declare @Avgs Table ( location int, type varchar(1), cs int, average int);

    insert into @Avgs values (1, 'A', 21, 10),(1, 'B', 57, 18),(1, 'C', 44, 78);

    With a as 
         (
         select *, cs * average as compound
         from @Avgs
         )
     , b as 
         (
         Select 
             (max( case when type = 'B' then compound end) +    max( case when type = 'C' then compound end)) /
             (max( case when type = 'B' then cs end) + max( case when type = 'C' then cs end))  as CompoundMath
         from a
        )
    select *
    from a, b 
    ```

4.  这将是您在 SSRS 中的数据集，复合函数可以在（case when ... end）内部更改，在“when”是逻辑之后，在“then”之后是什么结果。

5.  只需添加一个新行，您就可以将自定义表达式设置为名为“复合数学”的列。

# apache-poi - 如何删除 poi 3.8 中的超链接？

> ID：15699049
> 
> 赞同：4
> 
> 时间：2013-03-29T07:18:44.390
> 
> 标签：apache-poi

我在阅读包含 poi 中超链接文本的 excel 文件时遇到了一些问题。

数据是这样的（excel文件）：
|1| **类型**| **类别**| **工作类型**| **职位**| **姓名**| **电子邮件**
|2| 测试 | 开发商 | 兼职 | 经理 | 洪 | asdf##@dsaf.com（*超链接*）
|3| 测试 | 开发商 | 兼职 | 经理 | 阿斯德| test@mail.com(*超链接*)
|4| 测试 | 开发商 | 兼职 | 经理 | 阿斯德| aaaaaaa（*非超链接*）

要创建工作簿对象，我使用`WorkbookFactory.create(InputStream inp)`方法。
代码在这里：

```
public POIExcelImport(String name, InputStream inputStream) throws ExcelImportException {
    super(name, null);
    try {

        logger.debug("before work : {}", this.workbook);

        this.workbook = WorkbookFactory.create(inputStream);// exception 

    } catch (InvalidFormatException e) {
        throw new ExcelImportException(e);
    } catch (IOException e) {
        throw new ExcelImportException(e);
    } 

    if(XSSFWorkbook.class.isAssignableFrom(workbook.getClass()))
        this.type = ExcelFileType.XLSX;
    else
        this.type = ExcelFileType.XLS;
} 
```

当我调用`create`方法时，抛出了异常。

```
java.lang.IllegalStateException: The hyperlink for cell F2 references relation rId1, but that didn't exist!
at org.apache.poi.xssf.usermodel.XSSFHyperlink.<init>(XSSFHyperlink.java:71) ~[poi-ooxml-3.8.jar:3.8]
at org.apache.poi.xssf.usermodel.XSSFSheet.initHyperlinks(XSSFSheet.java:204) ~[poi-ooxml-3.8.jar:3.8]
at org.apache.poi.xssf.usermodel.XSSFSheet.read(XSSFSheet.java:157) ~[poi-ooxml-3.8.jar:3.8]
at org.apache.poi.xssf.usermodel.XSSFSheet.onDocumentRead(XSSFSheet.java:129) ~[poi-ooxml-3.8.jar:3.8]
at org.apache.poi.xssf.usermodel.XSSFWorkbook.onDocumentRead(XSSFWorkbook.java:269) ~[poi-ooxml-3.8.jar:3.8]
at org.apache.poi.POIXMLDocument.load(POIXMLDocument.java:159) ~[poi-ooxml-3.8.jar:3.8]
at org.apache.poi.xssf.usermodel.XSSFWorkbook.<init>(XSSFWorkbook.java:183) ~[poi-ooxml-3.8.jar:3.8]
at org.apache.poi.ss.usermodel.WorkbookFactory.create(WorkbookFactory.java:73) ~[poi-ooxml-3.8.jar:3.8]
at dreaminfra.ipams.common.excel.poi.POIExcelImport.<init>(POIExcelImport.java:49) ~[ipams-core-1.0.0.jar:na] 
```

我想删除超链接，但只有创建超链接的问题。
我不知道，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T19:05:06.637

我发现这适用于我的系统：

```
ICell oCell = workbook.GetSheetAt(0).GetRow(0).GetCell(0);
IHyperlink oLink = oCell.Hyperlink;
oLink.setFirstRow(0);
oLink.setLastRow(0);
oLink.setFirstColumn(0);
oLink.setLastColumn(0);
oLink.setLabel(null);
oLink.setAddress(""); 
```

注意：我主要使用 NPOI（C# 版本）而不是 POI（Java 版本），但它似乎工作相同。另外，一定要保留`.setAddress()`最后一个。

**编辑：**不幸的是，由于某种原因，这似乎导致 Excel 无法保存文档。（excel在保存时检测到损坏）所以它实际上并没有在实践中工作，看起来有人必须为此修补NPOI存储库。

# datagridview - 使用 DataSource 将行添加到 datagridview

> ID：15699058
> 
> 赞同：0
> 
> 时间：2013-03-29T07:19:17.157
> 
> 标签：datagridview

我有一个用 C# 编写的窗口应用程序。我里面有一个datagridview。这是代码：

```
private List<Tablet> tabletList = new List<Tablet>();
...

private void tabControl1_Selected(object sender, TabControlEventArgs e)
{
    GetTabletList();
}

void GetTabletList()
{
    Tablet newTablet = new Tablet();
    newTablet.xxx = yyy;
    newTablet.xxx2 = yyy2;
    tabletList.Add(newTablet);

    dataGridView.DataSource = tabletList;
    Console.WriteLine(tabletList.Count);
}

public class Tablet
{
    public string xxx { get; set; }
    public string xxx2 { get; set; }
} 
```

每次我调用`GetTabletList()`时，值`tabletList.Count`都会不断增加，但我只能在 datagridview 中看到 1 行。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:34:43.260

尝试`ObservableCollection<Tablet>`代替`List<Tablet>`

# java - SWT 4.2 中缺少 Platform.getBundle 方法

> ID：15699063
> 
> 赞同：0
> 
> 时间：2013-03-29T07:19:45.333
> 
> 标签：java, swt, eclipse-rcp

我正在尝试使用[此处](http://www.eclipse.org/swt/faq.php#specifyxulrunner)显示的代码段，但在 SWT 4.2 中似乎没有违反`getBundle()`类的方法。`org.eclipse.core.runtime.Platform`他们是否移动/移除了它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:52:40.080

该类`Platform`不是 SWT 的一部分，它是 Eclipse Core Runtime 的一部分。您可能必须添加`org.eclipse.core.runtime`到插件/片段的依赖项。

希望这可以帮助

# ios - 使用继承属性获取核心数据

> ID：15699064
> 
> 赞同：0
> 
> 时间：2013-03-29T07:19:46.267
> 
> 标签：ios, core-data

我有一个数据模型如下。

```
Chat -> abstract entity
ChatUser -> inhertied from Chat. 
         -> has a relationship to user model that has a name attribute
ChatGroup -> inherited from Chat
          -> has a relationship to group that also has a name attribute. 
```

我需要使用 fetchedresultscontroller 从用户名或组名中获取名称为“ABC”的所有聊天。我似乎无法使用单个谓词来获取它们。有没有办法可以单独获取它们并组合结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:00:12.280

抽象实体无法实例化，因此您将无法在获取请求中取回它们。保留`Chat`作为其他两个的父实体，但不要使其抽象。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdMOM.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdMOM.html)

# objective-c - 如何让 UITableView 重新识别你做的类别？

> ID：15699068
> 
> 赞同：0
> 
> 时间：2013-03-29T07:20:04.893
> 
> 标签：objective-c, uitableview, uiview, categories

我做了这个简单的程序：

```
-(void) vPrintAllSubviews
{
    [self printAllSubviewsWithDepth:0];
    while (false);
}

-(void) printAllSubviewsWithDepth:(NSUInteger) depth
{
    UIView * theView= self;
    [@"" stringByPaddingToLength:depth withString: @"abc" startingAtIndex:0];
    NSString * result =[NSString stringWithFormat:@"%@%@",[@"" stringByPaddingToLength:depth withString: @" " startingAtIndex:0], theView];
    PO(result);
    NSArray * subViews = self.subviews;

    for (UIView * subView in subViews) {
        [subView printAllSubviewsWithDepth:depth +1];
    }
} 
```

当我打电话给我时：

```
-[UITableView vPrintAllSubviews]: unrecognized selector sent to instance 0x1faa8c00 
```

但 UITableView 是 UIView 的子类，该类别适用于所有 UIView。事实上，该类别曾经在以前更复杂的项目中运行良好。

那么，为什么 UITableView 不知道它可以访问 vPrintAllSubviews 呢？

它甚至不包含任何编译错误。

如果我查看构建阶段，我看到这张图片表明只有 3 个文件正在编译。嗯...在我的上一个项目中，我不记得曾经需要添加 .m 文件来编译列表。

![在此处输入图像描述](../Images/0f112aae48d6cf46dee2c1134f137038.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:38:41.947

您必须将您的实现文件包含到构建目标中。

可能您从另一个项目复制了资源，而您忘记检查`Add to Target`导入对话框中的复选标记。

# android - 像 360 全景一样自动捕捉图像

> ID：15699069
> 
> 赞同：4
> 
> 时间：2013-03-29T07:20:11.457
> 
> 标签：android, android-camera, android-sensors, panoramas

我正在开发类似于全景应用程序的应用程序。我想像 360 全景应用程序一样在设备从左到右移动时自动捕获图像。经过一些研究，我知道[传感器](http://developer.android.com/guide/topics/sensors/sensors_overview.html)和线程对此很有用我在[这里](http://www.vogella.com/articles/AndroidSensor/article.html)看到了一些传感器的例子。但我不明白如何使用传感器来达到我的目的。我也找不到任何与带相机的传感器相关的教程来自动捕捉图像。如果有人有任何想法或例子然后请建议我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T07:23:24.123

我认为您正在谈论使用 android 的加速度计进行事件处理，您可以像这里一样捕获事件[如何使用 android 检测抖动事件？](https://stackoverflow.com/questions/5271448/how-to-detect-shake-event-with-android)，然后可能会打开您的相机并执行您的事件。

也试试这个[http://www.techrepublic.com/blog/app-builder/a-quick-tutorial-on-coding-androids-accelerometer/472](http://www.techrepublic.com/blog/app-builder/a-quick-tutorial-on-coding-androids-accelerometer/472)

更新 ：

您需要捕获多张图像，然后使用特定算法将它们组合起来，以在其上获得全景 360 视图。

更新 2：

像这样的图像拼接算法：[http ://en.wikipedia.org/wiki/Image_stitching](http://en.wikipedia.org/wiki/Image_stitching)

最重要的事情：没有人会在任何开源论坛上透露他们的算法（据我所知）

***也看看这个：*** [http ://www.cs.cornell.edu/courses/cs4670/2010fa/projects/final/results/group_of_acc269_ty244_yc563/cs4670_final.html](http://www.cs.cornell.edu/courses/cs4670/2010fa/projects/final/results/group_of_acc269_ty244_yc563/cs4670_final.html)

# ruby-on-rails - 哈特尔 Ch. 8 Rails 教程 Remember_Token 测试失败

> ID：15699070
> 
> 赞同：0
> 
> 时间：2013-03-29T07:20:43.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, facebook-c#-sdk

这不是一个重复的问题——我*已经*运行了`rake db:test:prepare`.

Hartl 关于添加`remember_token`.

运行 authentication_pages_spec.rb 时出错：

```
1) User 
     Failure/Error: it { should respond_to(:remember_token) }
       expected #<User id: nil, name: "Example User", email: "user@example.com", created_at: nil, updated_at: nil, password_digest: "$2a$04$eszlV1FYN2HahpYn1X/NyOTWYbzKjfLZCv7Vc2I0Wb3p..."> to respond to :remember_token
     # ./spec/models/user_spec.rb:18:in `block (2 levels) in <top (required)>' 
```

我的错：

我生成了 TIMESTAMP_add_remember_token_to_users.rb 并添加了以下代码：

```
class AddRememberTokenToUsers < ActiveRecord::Migration
    def change
        add_column :user, :remember_token, :string  
        add_index :user, :remember_token
    end
end 
```

我跑了`rake db:migrate`，然后`rake db:test:prepare`。我确定`:user`在上面的代码中应该`:users`在这两行中，我已经完成了。代码现在看起来像这样：

```
class AddRememberTokenToUsers < ActiveRecord::Migration
    def change
        add_column :users, :remember_token, :string 
        add_index :users, :remember_token
    end
end 
```

测试仍然失败。进行这些编辑后，我已经运行`rake db:migrate`但`rake db:test:prepare`无济于事。

我曾尝试使用 回滚数据库`rake db:rollback`，但出现此错误：

```
Index name 'index_users_on_remember_token' on table 'users' does not exist 
```

我认为这突出了我发现的问题。

我认为我需要做的是回滚或删除此数据库文件并重做并将其`remember_token`放入`users`表中。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:16:15.157

有时迁移会“不同步”，尝试做`rake:db:reset`

如果这不能解决问题，请查看控制台`rails c`

try User.create(name: "dave" blah blah)

看看它是否创建了一个记住令牌

# java - 通过按钮安装 Wifi 配置文件

> ID：15699071
> 
> 赞同：0
> 
> 时间：2013-03-29T07:20:44.360
> 
> 标签：java, android, sdk, android-wifi

我不确定在 Eclipse 中从哪里开始。

我想创建一个带有一些文本框（用户名/密码）和一个按钮“发送”的布局

当用户填写他们的用户名和密码时，必须使用他们的用户名/密码安装无线配置文件 (TTLS/MSCHAPV2)。

到目前为止，我得到了带有 onclick 功能的按钮。

主要活动.java。 `(public void installprofile(View view) { // Do something in response to button`

现在我必须放置 wifi 配置代码。我如何让代码知道他安装配置文件需要哪个用户名/密码？

它必须从文本框中获取用户名/密码。

亲切的问候凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:30:17.097

看看这个[SO 'question'](https://stackoverflow.com/questions/4374862/how-to-programatically-create-and-read-wep-eap-wifi-configurations-in-android?rq=1)，它概述了你想要做什么的总体思路。我会评论原始帖子，但我没有足够的代表。

# iphone - 视图控制器的 xib 的自动布局？

> ID：15699074
> 
> 赞同：1
> 
> 时间：2013-03-29T07:20:57.980
> 
> 标签：iphone, ipad, xcode4.5, autolayout

我对 .I 的用法感到困惑`AutoLayout`。我不明白什么时候使用它，什么时候不使用它。我正在 Xcode 4.5 中开发一个应用程序，当我在以前版本的模拟器（4.3,5.0）等上测试它时，应用程序崩溃了这个例外“

```
Terminating app due to uncaught exception 'NSInvalidUnarchiveOperationException', reason: 'Could not instantiate class named NSLayoutConstraint " 
```

我浏览了谷歌，发现`Use AutoLayout`在 xib 中检查时会发生这种情况。

但是当我取消选中这个时，`Use Autolayout`我没有得到任何异常。

但是当我在retina4英寸中测试应用程序时，我没有从顶部开始获得视图的内容。它从中间开始。我的意思是说在测试非视网膜和视网膜时设计是不一样的。所以为此我一直保持`'Use AutoLayout'`处于`checked`状态。

我该怎么做才能满足我的两个条件？我需要让它与所有版本的模拟器兼容......

任何帮助都将不胜感激/感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:36:02.343

对于 iPhone 5 的 4 英寸显示屏，您需要第三张默认图像 Def​​ault-568h@2x.png。否则，视图将被加装。要支持 iOS6 之前的 iOS 版本，您需要禁用自动布局选项，但这意味着，您必须正确设置自动调整掩码或/除此之外根据屏幕大小在代码中手动更新视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:38:34.143

**使用 Autolayout**是 Apple 提供的一个选项，用于从 iOS 6.0 开始自动设置 nib 文件的布局。因此，如果您要支持低于该版本的 iOS 版本，操作系统将无法找到它，因此会导致崩溃。

**因此，如果您仅支持 iOS 6.0 及更高版本，**则可以使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T07:40:31.427

您可以为您的***viewController***加载不同**的 XIB**。对于**3.5 英寸**，请按照以下步骤操作

 ***```
1\. Select your xib, first unchecked auto-layout.
2\. Select View object and in its property window, change size property and set it to Retuina 3.5 full screen.
3\. Make changes in your code to load your XIB's for different devices. 
```***

# c# - 长后台进程刷新ui wpf

> ID：15699079
> 
> 赞同：3
> 
> 时间：2013-03-29T07:21:10.927
> 
> 标签：c#, wpf, multithreading, async-await

我有很长的搜索操作，它会定期更新 UI（发现出现 -> 更新 UI）

我试图以多种方式实现它：

1.  异步/等待

    ```
    public void PushButton()
    {
        await AsyncSearchAll();
    }

    public async Task AsyncSearchAll(SearchPanelViewModel searchPanelViewModel, SearchSettings searchSettings, CancellationToken cancellationToken)
    {
        await Task.Factory.StartNew(() =>
                                          {
                                              //searching for occurence
                                              //write it into panel
                                          }, CancellationToken.None, TaskCreationOptions.None, TaskScheduler.FromCurrentSynchronizationContext());
    } 
    ```

2.  后台工作者

    我想使用它，但我不想只使用 .ReportProgress() 访问 UI

3.  带调用的简单后台线程`Dispatcher.BeginInvoke(()=>{//updating UI})`

    ```
    /// <summary>
    ///     Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void ButtonBase_OnClick(object sender, RoutedEventArgs e)
        {
            var backgroundThread = new Thread(CountToTen)
                {
                    IsBackground = true
                };
            backgroundThread.Start();
        }

        private void CountToTen()
        {
            for (int i = 1; i <= 10000; i++)
            {
                var j = i;
                Dispatcher.BeginInvoke(new Action(() => Seconds.Text = j.ToString(CultureInfo.InvariantCulture)));
            }
        } 
    ```

完成线程后写入所有数据的所有方法。有没有什么方法可以运行后台任务，定期更新 UI 而不会通过阻止 ui 来减慢程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:22:06.353

最好能将“工作者”逻辑与“UI 更新”逻辑分开。

像这样的东西：

```
public async Task AsyncSearchAll(SearchPanelViewModel searchPanelViewModel, SearchSettings searchSettings, CancellationToken cancellationToken)
{
  while (..)
  {
    var results = await Task.Run(() => /* search more */);
    /* update panel with results */
  }
} 
```

但是，如果您想要实际的进度更新，也有办法做到这一点：

```
public async void PushButton()
{
  Progress<MyUpdateType> progress = new Progress<MyUpdateType>(update =>
  {
    /* update panel */
  });
  await Task.Run(() => SearchAll(..., progress));
}

public void SearchAll(SearchPanelViewModel searchPanelViewModel,
    SearchSettings searchSettings, CancellationToken cancellationToken,
    IProgress<MyUpdateType> progress)
{
  while (..)
  {
    /* search more */
    if (progress != null)
      progress.Report(new MyUpdateType(...));
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:00:01.063

我认为在这种情况下，最好使用绑定。使用[新的集合同步](http://10rem.net/blog/2012/01/20/wpf-45-cross-thread-collection-synchronization-redux)，您可以执行诸如`ObservableCollection<T>`从另一个线程添加到绑定之类的操作。

如果这还不足以满足您的目的，您可以`Progress<T>`在另一个线程上产生一些结果时在 UI 线程上执行一个操作（不过，顾名思义，`Progress`主要用于进度报告）。

如果这也不适合，您可以使用 TPL 数据流。您将有一个单独`ActionBlock<T>`的`TaskScheduler`设置为 UI 调度程序。您的工作线程会将生成的项目发送到块，并且块将在 UI 线程上处理它们。

# java - Java中的电子数据交换处理

> ID：15699085
> 
> 赞同：0
> 
> 时间：2013-03-29T07:22:08.307
> 
> 标签：java, api, e-commerce, erp, edi

我的要求是处理 EDI（电子数据交换）文件并在我的应用程序中创建适当的记录，然后以 EDI 格式发回确认。

我想知道任何可用于在 Java 中创建和处理 EDI 文档的标准 API。

还给我一些参考资料（书籍）以了解电子商务和 ERP 的 EDI 标准格式。

谢谢，维尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:34:05.783

为了理解 EDI 并为 EDI 开发解析和持久化，您必须首先了解它们的语法（循环、段和字段）。以下是 EDI 循环，供您理解。

LOOP 1000A 付款人识别

LOOP 1000B 收款人识别

LOOP 2100 索赔付款信息

至于我知道没有Java API，你必须自己实现。为了了解他们的语法和开发指南，您必须购买他们的指南（非开源）。

ePayment 835 的“医疗保健索赔付款/通知”

eClaim 837 的“医疗保健索赔：专业”

# wysiwyg - 实现所见即所得编辑器的基本思想

> ID：15699090
> 
> 赞同：3
> 
> 时间：2013-03-29T07:22:41.357
> 
> 标签：wysiwyg

我正在尝试为网页构建一个非常简单的所见即所得编辑器，唯一需要的功能是将情感图标添加到文本区域中，以便显示图像本身。

但是，我无法弄清楚如何在所见即所得编辑器的文本区域中显示图片，我真的很好奇这实际上是如何工作的。有人可以解释一下有关所需技术的高级想法吗？谢谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:16:54.570

关键字是**contenteditable**。所有 WYSIWYG 编辑器都基于此属性设置为**true**的元素。

使用：创建一个页面`<div contenteditable="true">foo! foo!</div>`并在任何浏览器上打开它。这个 div 将是可编辑的 - 你可以输入它，按 enter，按 ctrl+b 等。

看起来您已经接近最终解决方案，但是......不是。您很快就会注意到每个浏览器创建标记的方式不同，在一个浏览器上创建并加载到另一个浏览器的标记不起作用，回车键有时起作用有时不起作用，粘贴会导致混乱，基于 Webkit 的浏览器会创建数百个跨度等等等等。

甚至实现插入表情也不会那么容易。

您需要阅读有关[命令和 document.execCommand() 方法](https://developer.mozilla.org/en-US/docs/Rich-Text_Editing_in_Mozilla#Executing_Commands)的信息。您可能应该专注于**insertHTML**命令，这在插入图像时会很有帮助。

但是，如果您关心输出 HTML 和 UX，我建议您使用现有的所见即所得编辑器之一（例如，我是核心开发人员的[CKEditor ；）。](http://ckeditor.com/)您在这里也没有太大的选择，因为大多数所见即所得编辑器，除了少数 (2-3) 个主要编辑器，大量使用本机 contenteditable 实现，因此它们是如此破碎。但是最好的编辑器修复了数百个这样的问题，使 contenteditable 真正可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T17:20:50.773

假设您将使用 jQUery 插入图像，您可以查看 jquery wysiwyg editor [https://github.com/akzhan/jwysiwyg](https://github.com/akzhan/jwysiwyg)以更好地理解它，也可以使用相同的代码（而不是 H1、H2 和类似的控件，您可以使用您的表情图像。考虑到只有一个，这非常简单。

检查[https://github.com/akzhan/jwysiwyg#quick-start](https://github.com/akzhan/jwysiwyg#quick-start)以更好地了解它是如何工作的

# python - 如何生成html文章的摘要？

> ID：15699091
> 
> 赞同：0
> 
> 时间：2013-03-29T07:23:00.997
> 
> 标签：python

```
a= <div><xxxx.......<a>....</a></div> 
```

我想通过 web2py 制作一个博客应用程序，我想生成一个内容简介，可能是内容的前 50 个单词。但如果我使用 a[:50] html 标签将是错误的。有一些简单的功能可以做到这一点吗？

# python - 使用for arange循环时的python数组索引

> ID：15699092
> 
> 赞同：2
> 
> 时间：2013-03-29T07:23:04.860
> 
> 标签：python, arrays, indexing, range

我有个问题。我目前正在从 matlab 迁移到 python，虽然我发现它很容易适应 numpy 和 scipy，但有些部分仍然有点神秘；）

我想要做的是计算两个嵌套循环中的数据并将其放入（重塑）到（m，n）数组中以制作等高线图。

所以我想到了以下几点：

```
for i in arange(1, 10, 1):
    for k in arange(5, 50, 5):
        res = do_something(i, k) 
```

但现在我不完全确定我应该如何把它变成正确的形状（在Matlab中，我只会用 i=1:1:10 索引循环，依此类推，然后将 i 的实际值从向量中拉出来...... ）。

我可以附加结果 res.append(res) 并使用 res.reshape((m,n)) 对其进行整形。但是可能有一种更优雅的方式来做到这一点？

非常欢迎每一个帮助！

最好的祝愿，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:38:45.310

这是一种可能的解决方案，不需要显式索引来存储值

```
result = [[my_function(x, y)
           for x in arange(0.3, 10.7, 2.2)]
          for y in arange(-3.2, 5.4, 0.7)] 
```

对于需要显式索引的情况，使用`enumerate(arange(...))`既紧凑又可读。

但是，我不确定这是使用 numpy 构建大型矩阵的最有效方法（如果您需要一些速度，那么您应该在多个简单操作中分解函数，每个操作都使用 numpy 显式执行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:39:05.467

我建议您执行循环以匹配结果数组中结果的索引，而不是计算函数中的参数。

```
result = numpy.zeros((n,m), dtype=float) # I'm assuming your results are float.
for i in range(10):
    for k in range(10):
        res[i,j] = do_something(i+1, 5k+5) #don't forget range(M) starts at 0 and ends at M-1 (giving you M values) 
```

# javascript - 如何使用正则表达式验证 Javascript 中的数字字段？

> ID：15699094
> 
> 赞同：7
> 
> 时间：2013-03-29T07:23:11.950
> 
> 标签：javascript

以下是正确的吗？

```
var z1=^[0-9]*\d$;
{
    if(!z1.test(enrol))
    {
        alert('Please provide a valid Enrollment Number');
        return false;
    }
} 
```

它目前无法在我的系统上运行。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-29T07:24:50.597

您可以将其测试为：

```
/^\d*$/.test(value) 
```

在哪里：

1.  `/`两端标记正则表达式的开始和结束
2.  末尾的`^`and是检查完整字符串而不是部分匹配`$`
3.  `\d*`查找多次出现的数字字符

您不需要检查两者`\d`，`[0-9]`因为它们都做同样的事情 - 即匹配号码。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-08-03T21:00:02.950

```
var numberRegex = /^\s*[+-]?(\d+|\d*\.\d+|\d+\.\d*)([Ee][+-]?\d+)?\s*$/
var isNumber = function(s) {
    return numberRegex.test(s);
};

"0"           => true
"3."          => true
".1"          => true
" 0.1 "       => true
" -90e3   "   => true
"2e10"        => true
" 6e-1"       => true
"53.5e93"     => true

"abc"         => false
"1 a"         => false
" 1e"         => false
"e3"          => false
" 99e2.5 "    => false
" --6 "       => false
"-+3"         => false
"95a54e53"    => false 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T07:25:12.573

尝试：

```
var z1 = /^[0-9]*$/;
if (!z1.test(enrol)) { } 
```

请记住，`*`是“0 或更多”，因此它也允许空白值。如果您需要一个数字，请将其更改`*`为`+`“1 或更多”

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-29T07:27:01.080

你这个，它允许一个点和数字可以有“正”和“负”符号

`/^[+-]?(?=.)(?:\d+,)*\d*(?:\.\d+)?$/.test(value)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-08T09:50:34.293

如果您正在寻找一些简单的东西来测试字符串是否为数字，只需有效的数字，没有 +、- 或点。

这有效：

> /^\d*$/.test("2412341")

*真的*

> /^\d*$/.test("2412341")

*错误的*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-28T16:36:18.127

您还可以使用此正则表达式进行数字验证
**/^\/(\d+)$/**

# android - 获取sqlite中两条记录之间的值差异

> ID：15699095
> 
> 赞同：0
> 
> 时间：2013-03-29T07:23:13.717
> 
> 标签：android, sqlite, records

我有一个包含以下数据的 sqlite 表，

```
 _Id       Mode         Reading
  1       Water           100
  2       Water           300
  5       Water           496
  6       Water           600 
```

现在我想要记录之间值的差异。例如，b/w（列读数）100 和 300 的差异是“200”，300 和 496 是“196”，496 和 600 是“104”。

我希望查询结果为，

```
 Reading
  200
  196
  104 
```

如何在 sqlite 中完成这项工作？任何人都可以帮忙。我的sqlite很差。

任何帮助将不胜感激！！提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:35:48.817

使用游标从数据库中检索值并执行以下操作：

```
 cursor.moveToNext();
   int prevVal = cursor.getInt(2);
   while(cursor.moveToNext())
   {
      int curVal= cursor.getInt(2);
      int reading = curVal-prevVal;
      prevVal=curVal;
   } 
```

您可以声明`reading`为数组并在之后显示它。

# java - 我不断收到此错误：java.lang.ArrayIndexOutOfBoundsException：12

> ID：15699097
> 
> 赞同：-3
> 
> 时间：2013-03-29T07:23:18.750
> 
> 标签：java, arrays, eclipse, int, indexoutofboundsexception

我的程序基本上采用 ISBN 编号列表并确定它们是否有效。所以错误在： s1[l]=digits[i][l-1]+digits[i][l]; 这行代码使用 for 循环获取 ISBN 编号的部分总和。它下面的另一个循环取数组 s1 中所有整数的部分和。请帮忙？错误是：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 12
at ISBN.main(ISBN.java:67)

  import java.util.*;
  import java.io.*;

  public class ISBN {
  public static void main(String [] args) throws IOException{
//Reads file line by line
  File ISBNFile = new File ( "isbn_input.txt" );
  Scanner input = new Scanner(ISBNFile);
  String [] preISBN = new String [9999];
  int i = 0;
  int j =0;
  int l =0;
  int m = 0;
  int count =0;
  while (input.hasNextLine()){
    String line = input.nextLine();
    preISBN [i] = line;
    i++;
    count++;
                             }
    input.close();

    //Makes new array with specified count
    String [] ISBN = new String [count];
    String [] ISBNresult = new String [count];
 for(i=0;i<ISBN.length;i++){
   ISBN [i] = preISBN [i];
                           }
// int [] s1 = new int =
 int [] [] digits = new int [ISBN.length] [12];
 int [] s1 = new int [12];
 int [] s2 = new int [12];
 //Loads digits [] [] with values that will later be summed
 for(i=0;i<ISBN.length;i++){
   if(ISBN[i].length()!=12){
     ISBNresult [i] = "Invalid";
     continue;       
   }

   for(j=0;j<12;j++){

      if(ISBN[i].charAt(j)=='X'||ISBN[i].charAt(j)=='x'){
        digits [i] [j] = 10;
      }
      else if(ISBN[i].charAt(j)=='-'){
        digits [i] [j] = 0;
      } 
      else   
      if(ISBN[i].charAt(j)==1||ISBN[i].charAt(j)==2||ISBN[i].charAt(j)==3||ISBN[i].charAt(j)==4||ISBN[i].charAt(j)==5||ISBN[i].charAt(j)==6||ISBN[i].charAt(j)==7||ISBN[i].charAt(j)==8||ISBN[i].charAt(j)==9){                                                     
      digits [i][j] = Character.getNumericValue(ISBN[i].charAt(j)); 
      }
      else{
      ISBNresult[i] = "Invalid";
      break;
      }
                    }

 }
 for(i=0;i<ISBN.length;i++){
   for(j=0;j<ISBN[i].length();j++){
     if(ISBN[i].length()!=12){
       ISBNresult [i] = "Invalid";
       continue;         
     }
     s1[0]=digits[i][0];
     for(l=1;l<=12;l++){
     s1[l]=digits[i][l-1]+digits[i][l];
     }

     s2[0]=s1[0];
     for(m=1;m<=12;m++){
     s2[m]=s2[m-1]+s1[m];    
     }
   }
   if(s2[12]%11==0){
     ISBNresult[i]="Valid";   
   }
   else{
     ISBNresult[i]="Invalid";
   }
 }

      File outFile = new File("isbn_output.txt");
      FileWriter fWriter = new FileWriter (outFile, true);
      PrintWriter pWriter = new PrintWriter (fWriter);
      for(i = 0;i<ISBN.length;i++){
  pWriter.println (ISBN[i]+ " "+ ISBNresult[i] );

  }
  pWriter.close();
       }
      } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T07:27:48.483

您已将 s1 声明为

```
 int [] s1 = new int [12]; 
```

它将有 12 个元素，但索引是从 0 到 11。

在下面的代码中

```
 for(l=1;l<=12;l++){
     s1[l]=digits[i][l-1]+digits[i][l];
     } 
```

当 l = 12 时，您将结果等同于 s[12]。

但没有 s[12], (max is s[11]) 因此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:28:57.420

```
for(l=1;l<=12;l++){
    s1[l]=digits[i][l-1]+digits[i][l];
} 
```

`l`在最后一次迭代中变为`12`，有效地使加法语句的第二部分像这样。

```
digits[i][12] 
```

同样的情况也是`s1[l]`如此，它变成了`s1[12]`，因为两者都是这样声明的

```
int [] [] digits = new int [ISBN.length] [12];
int [] s1 = new int [12]; 
```

永远记住，数组的最大可访问索引是`array.length-1`. 因此，对于长度为 的数组`12`，最后一个索引将是`11`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T07:31:28.937

数组定义为 12。

```
int [] [] digits = new int [ISBN.length] [12];

s1[0]=digits[i][0];
for(l=1;l<=12;l++){
    s1[l]=digits[i][l-1]+digits[i][l];
} 
```

您在 [l] 处超过了 l == 12。

[l] 从 0 到 11 开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T07:33:06.237

`12th`这一切都在发生，因为您正在为数组`s1`和的索引分配值`s2`。此外，当`ISBN[i].length >= 12`. 你的 for 循环应该是这样的：

```
 for(i=0;i<ISBN.length;i++){
   for(j=0;j<ISBN[i].length();j++){
     if(ISBN[i].length()<=12){
       ISBNresult [i] = "Invalid";
       continue;         
     }
     else if (ISBN[i].length() > 12)
     {
         break;
     }

     s1[0]=digits[i][0];
     for(l=1;l<=12;l++){
     s1[l]=digits[i][l-1]+digits[i][l];
     }

     s2[0]=s1[0];
     for(m=1;m<12;m++){
     s2[m]=s2[m-1]+s1[m];    
     }
   }
   if(s2[11]%11==0){
     ISBNresult[i]="Valid";   
   }
   else{
     ISBNresult[i]="Invalid";
   }
 } 
```

# php - 使用 PHP 获取客户端 IP 地址

> ID：15699101
> 
> 赞同：226
> 
> 时间：2013-03-29T07:24:07.740
> 
> 标签：php, ip-address

我想获取使用我网站的客户端 IP 地址。我正在使用 PHP`$_SERVER`超全局：

```
$_SERVER['REMOTE_ADDR']; 
```

但我看到它不能使用这个给出正确的 IP 地址。我得到了我的 IP 地址，发现它与我的 IP 地址不同，我还可以在某些网站上看到我的 IP 地址，例如：

```
http://whatismyipaddress.com/ 
```

我粘贴了提供我的 PHP 功能的 IP 地址，但这个网站没有显示任何结果。这个问题是怎么来的，我怎样才能得到客户端的IP地址？

* * *

## 回答 #1

> 赞同：409
> 
> 时间：2013-03-29T07:35:36.923

获取访问者/客户[IP 地址](http://en.wikipedia.org/wiki/IP_address)的最简单方法是使用`$_SERVER['REMOTE_ADDR']`or`$_SERVER['REMOTE_HOST']`变量。

但是，有时这不会返回访问者的正确 IP 地址，因此我们可以使用其他一些服务器变量来获取 IP 地址。

下面的两个函数是等效的，不同之处仅在于检索值的方式和位置。

getenv() 用于获取 PHP 中环境变量的值。

```
// Function to get the client IP address
function get_client_ip() {
    $ipaddress = '';
    if (getenv('HTTP_CLIENT_IP'))
        $ipaddress = getenv('HTTP_CLIENT_IP');
    else if(getenv('HTTP_X_FORWARDED_FOR'))
        $ipaddress = getenv('HTTP_X_FORWARDED_FOR');
    else if(getenv('HTTP_X_FORWARDED'))
        $ipaddress = getenv('HTTP_X_FORWARDED');
    else if(getenv('HTTP_FORWARDED_FOR'))
        $ipaddress = getenv('HTTP_FORWARDED_FOR');
    else if(getenv('HTTP_FORWARDED'))
       $ipaddress = getenv('HTTP_FORWARDED');
    else if(getenv('REMOTE_ADDR'))
        $ipaddress = getenv('REMOTE_ADDR');
    else
        $ipaddress = 'UNKNOWN';
    return $ipaddress;
} 
```

$_SERVER 是一个数组，其中包含由 Web 服务器创建的服务器变量。

```
// Function to get the client IP address
function get_client_ip() {
    $ipaddress = '';
    if (isset($_SERVER['HTTP_CLIENT_IP']))
        $ipaddress = $_SERVER['HTTP_CLIENT_IP'];
    else if(isset($_SERVER['HTTP_X_FORWARDED_FOR']))
        $ipaddress = $_SERVER['HTTP_X_FORWARDED_FOR'];
    else if(isset($_SERVER['HTTP_X_FORWARDED']))
        $ipaddress = $_SERVER['HTTP_X_FORWARDED'];
    else if(isset($_SERVER['HTTP_FORWARDED_FOR']))
        $ipaddress = $_SERVER['HTTP_FORWARDED_FOR'];
    else if(isset($_SERVER['HTTP_FORWARDED']))
        $ipaddress = $_SERVER['HTTP_FORWARDED'];
    else if(isset($_SERVER['REMOTE_ADDR']))
        $ipaddress = $_SERVER['REMOTE_ADDR'];
    else
        $ipaddress = 'UNKNOWN';
    return $ipaddress;
} 
```

* * *

## 回答 #2

> 赞同：140
> 
> 时间：2013-10-04T20:11:22.900

在 PHP 5.3 或更高版本中，您可以像这样获得它：

```
$ip = getenv('HTTP_CLIENT_IP')?:
getenv('HTTP_X_FORWARDED_FOR')?:
getenv('HTTP_X_FORWARDED')?:
getenv('HTTP_FORWARDED_FOR')?:
getenv('HTTP_FORWARDED')?:
getenv('REMOTE_ADDR'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-19T19:28:54.510

```
 $ipaddress = '';
    if ($_SERVER['HTTP_CLIENT_IP'] != '127.0.0.1')
        $ipaddress = $_SERVER['HTTP_CLIENT_IP'];
    else if ($_SERVER['HTTP_X_FORWARDED_FOR'] != '127.0.0.1')
        $ipaddress = $_SERVER['HTTP_X_FORWARDED_FOR'];
    else if ($_SERVER['HTTP_X_FORWARDED'] != '127.0.0.1')
        $ipaddress = $_SERVER['HTTP_X_FORWARDED'];
    else if ($_SERVER['HTTP_FORWARDED_FOR'] != '127.0.0.1')
        $ipaddress = $_SERVER['HTTP_FORWARDED_FOR'];
    else if ($_SERVER['HTTP_FORWARDED'] != '127.0.0.1')
        $ipaddress = $_SERVER['HTTP_FORWARDED'];
    else if ($_SERVER['REMOTE_ADDR'] != '127.0.0.1')
        $ipaddress = $_SERVER['REMOTE_ADDR'];
    else
        $ipaddress = 'UNKNOWN'; 
```

* * *

## 回答 #4

> 赞同：-19
> 
> 时间：2013-03-29T07:42:02.653

这是一个使用本地和 LAN IP 地址过滤器获取 IP 地址的函数：

```
function get_IP_address()
{
    foreach (array('HTTP_CLIENT_IP',
                   'HTTP_X_FORWARDED_FOR',
                   'HTTP_X_FORWARDED',
                   'HTTP_X_CLUSTER_CLIENT_IP',
                   'HTTP_FORWARDED_FOR',
                   'HTTP_FORWARDED',
                   'REMOTE_ADDR') as $key){
        if (array_key_exists($key, $_SERVER) === true){
            foreach (explode(',', $_SERVER[$key]) as $IPaddress){
                $IPaddress = trim($IPaddress); // Just to be safe

                if (filter_var($IPaddress,
                               FILTER_VALIDATE_IP,
                               FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE)
                    !== false) {

                    return $IPaddress;
                }
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-25
> 
> 时间：2013-11-20T08:37:53.813

它也适用于内部 IP 地址：

```
 function get_client_ip()
 {
      $ipaddress = '';
      if (getenv('HTTP_CLIENT_IP'))
          $ipaddress = getenv('HTTP_CLIENT_IP');
      else if(getenv('HTTP_X_FORWARDED_FOR'))
          $ipaddress = getenv('HTTP_X_FORWARDED_FOR');
      else if(getenv('HTTP_X_FORWARDED'))
          $ipaddress = getenv('HTTP_X_FORWARDED');
      else if(getenv('HTTP_FORWARDED_FOR'))
          $ipaddress = getenv('HTTP_FORWARDED_FOR');
      else if(getenv('HTTP_FORWARDED'))
          $ipaddress = getenv('HTTP_FORWARDED');
      else if(getenv('REMOTE_ADDR'))
          $ipaddress = getenv('REMOTE_ADDR');
      else
          $ipaddress = 'UNKNOWN';

      return $ipaddress;
 } 
```

# c# - 如何让 IE8 理解文件下载名称？

> ID：15699102
> 
> 赞同：2
> 
> 时间：2013-03-29T07:24:08.867
> 
> 标签：c#, asp.net, asp.net-mvc-3, internet-explorer, browser

我使用[`Controller.File(Stream fileStream, String contentType, String fileDownloadName)`方法](http://msdn.microsoft.com/en-us/library/dd505200%28v=vs.98%29.aspx)从服务器下载文件。在我的情况下`contentType`是`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`. 我确实为参数中的文件指定了一些特殊名称`fileDownloadName`。它在 Firefox、Opera、IE9 中运行良好。

但是，IE8 会返回操作的名称，而不是我指定的名称。看起来`Download.xlsx`，如果 url 是`../Report/Download`.

为什么会这样，我能做些什么呢？

* * *

根据[.NET 中的 Content-Disposition 标头，](http://www.softwire.com/blog/2011/08/23/content-disposition-headers-in-net/)我使用的重载应该可以解决问题。但是 IE8 希望对文件下载名称进行编码。而`HttpUtility.UrlPathEncode`例如，当使用编码时，Firefox 开始显示编码的文件名。

到底有没有万能的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:09:32.473

一旦我未能找到一种通用方法来为至少 IE8+ 和 Mozilla 提供文件下载名称，作为临时解决方法，我使用以下方法：

```
Stream report = GetReport();
string filename = GetFileName();
if (Request.Browser.Browser.Equals("IE", StringComparison.CurrentCultureIgnoreCase))
    filename = HttpUtility.UrlPathEncode(filename);

return File(
    report, 
    "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", 
    filename); 
```

Firefox 显示编码的文件名错误；非编码 - 由 IE8。由于当前的文化是`Ru`，文件名包含西里尔符号，这似乎是 IE8 的问题（可能还有空格）。

* * *

我愿意接受任何建议，这可能会导致我在 ASP.Net MVC 3 中提供文件下载名称的正确和/或反转（如果有）方法。在此之前，我接受这个糟糕的解决方法作为答案，因为它至少做这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:36:07.897

```
 Response.AppendHeader("content-disposition", "attach;filename=" + fileName);

 return File(fileStream, contentType); 
```

改变“附加；” 到“内联”；将导致文件在浏览器中打开，而不是浏览器提示保存文件。

注意：我也遇到了浏览器和文件名值的问题。非 ASCII 字符、空格和标点符号可能会导致此标头被浏览器忽略（[下载文件名中带有“;”或“#”的文件会破坏文件名](https://stackoverflow.com/questions/695356/downloading-file-with-or-in-file-name-ruins-filename/695719#695719)）。

# mongodb - mongodb2.4 弹性搜索和自由文本搜索

> ID：15699107
> 
> 赞同：0
> 
> 时间：2013-03-29T07:24:23.533
> 
> 标签：mongodb, elasticsearch, freetext

我有 mongodb 的集合，其中包含数百万条自由文本记录。我想对此文本启用在线查询。我正在考虑使用：

1.  关键字搜索的模型数据[http://docs.mongodb.org/manual/tutorial/model-data-for-keyword-search/](http://docs.mongodb.org/manual/tutorial/model-data-for-keyword-search/)
2.  mongodb 2.4 新的自由文本搜索引擎
3.  弹性搜索

第一个问题：如果我使用弹性搜索，实际上我不再需要 mongodb，因为弹性搜索保留了所有文档。我对吗？

第二个问题/问题：文档中的文本可能有不同的语言。似乎这是 mongo2.4 的一个限制，您必须为所有集合指定语言。我对吗？所以我应该使用解决方案 1（模型数据），或者首先我必须根据语言分隔文本。正确的？

感谢您的意见，建议科林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:47:48.367

好的，我可能找到了多语言问题的解决方案：http: [//docs.mongodb.org/manual/tutorial/create-text-index-on-multi-language-collection/](http://docs.mongodb.org/manual/tutorial/create-text-index-on-multi-language-collection/) 所以我只需要在指定字段中的文档。

蒙哥岩石！！任何意见/评论？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:41:58.397

你的应用是用什么写的？

因为在我们设置[ElasticSearch](http://www.elasticsearch.com/)集群时， [ElasticSearch C# NEST 客户端驱动程序](https://github.com/Mpdreamz/NEST)既不好玩也不易于使用，而且 ElasticSearch 文档也不是很好。

如果您需要，我有记录在 EC2 上设置 ElasticSearch 的过程吗？

我们使用[MongoDB](http://www.mongodb.org/)进行聚合查询和作为缓存，因为它速度快、扩展性好并且易于设置。

新的[MongoDB 自由文本搜索](http://docs.mongodb.org/manual/core/text-search/)功能很有趣，值得一看，但这完全取决于您的用例。

您可以在我的博文中阅读更多内容并查看有关[MongoDB 自由文本搜索](http://www.robertsindall.co.uk/blog/how-to-use-mongodb-free-text-search/)的代码示例

此外，根据您托管的位置，如果您使用的是[Amazon Web Services](http://aws.amazon.com/)，您可以查看[CloudSearch](http://aws.amazon.com/cloudsearch/)

# php - 如何在php中删除元素形式的二维数组

> ID：15699115
> 
> 赞同：0
> 
> 时间：2013-03-29T07:24:50.163
> 
> 标签：php, arrays

我的数组看起来像下面

```
Array
(
    [0] => Array
        (
            [REDUNDANT] => NO
            [FILE_NAME] => 51894a (2).pdf
        )
    [1] => Array
        (
            [REDUNDANT] => YES
            [FILE_NAME] => book (2).pdf
        )
    [2] => Array
        (
            [REDUNDANT] => YES
            [FILE_NAME] => samae (1).pdf
        )
    [3] => Array
        (
            [REDUNDANT] => NO
            [FILE_NAME] => aswss (1).pdf
        )        
) 
```

我想删除所有元素`array[INDEX][REDUNDANT] == 'YES'`

删除数组后，新数组如下所示

```
Array
(
    [0] => Array
        (
            [REDUNDANT] => NO
            [FILE_NAME] => 51894a (2).pdf
        )
    [1] => Array
        (
            [REDUNDANT] => NO
            [FILE_NAME] => aswss (1).pdf
        )        
) 
```

请帮我找到解决方案谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:28:12.737

试试这个，

```
foreach($files as $key => $file){
   if($file['REDUNDANT'] == "Yes"){
       unset($files[$key]);
   }
}
$files = array_values($files); // Reset key of updated array. 
```

[键盘演示。](http://codepad.org/BB91sFRq)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T07:31:34.830

试试这个

```
 $abc= Array
   (
        [0] => Array
        (
              [REDUNDANT] => NO
            [FILE_NAME] => 51894a (2).pdf
            )
      [1] => Array
    (
        [REDUNDANT] => YES
        [FILE_NAME] => book (2).pdf
    )
[2] => Array
    (
        [REDUNDANT] => YES
        [FILE_NAME] => samae (1).pdf
    )
[3] => Array
    (
        [REDUNDANT] => NO
        [FILE_NAME] => aswss (1).pdf
    )        
)

      foreach($abc as $subKey => $subArray){
      if($subArray['REDUNDANT'] =='yes'){
           unset($abc[$subKey]);
        }
     }

   print_r($abc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T07:29:17.153

```
foreach($yourary as $key=>$value)
{
  if($value[REDUNDANT]=="YES")
  {
   unset($yourary[$key]);
  }
} 
```

# php - 解析错误：语法错误，出现意外的 T_ECHO

> ID：15699117
> 
> 赞同：1
> 
> 时间：2013-03-29T07:25:01.183
> 
> 标签：php, javascript

所有代码是：

```
$(document).ready(function(){
    $('#sub').click(function() {
        var r = confirm("سلام")
        if (r==true){
        var in_code=document.getElementsByName("code")[0].value;
        var echo="<?php
        include ('conect.php');
        $res2=mysql_query("select * from products where code=".echo('document.write(in_code);');." ");
        $row2=mysql_fetch_array($res2);
        echo $row2['name'];
          ?>" 
        alert(echo);            }
        else {
            document.getElementById("frm1").reset();
            } 
```

在这一行错误中：

```
$res2=mysql_query("select * from products where code=".echo('document.write(in_code);');." "); 
```

echo('document.write(in_code);'); 不工作

如何修复他的或它做得更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:28:17.707

转义引号

```
var echo="<?php
    include (\'conect.php\');
    $res2=mysql_query(\"select * from products where code=\".echo('document.write(in_code);');.\" \");
    $row2=mysql_fetch_array($res2);
    echo $row2['name'];
      ?>"; 
```

并`;`在最后添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T07:39:34.133

这可能是您正在寻找的内容，但是您将客户端与服务器端混淆了。该脚本不起作用，因为 javascript 是客户端而 php 是服务器端，它只会打印/警报作为文本而不解析为 php 脚本。

```
var echo="<?php
include 'conect.php';
$res2 = mysql_query(\"select * from products where code='" + in_code + "'\");
$row2 = mysql_fetch_array($res2);
echo $row2['name'];
?>"; 
```

要使这样的事情起作用，您需要使用 Ajax。将这样的内容添加到您的 js 中。

```
$(document).ready(function(){
    $('#sub').click(function() {
        var r = confirm("سلام")
        if (r==true){
            var in_code=document.getElementsByName("code")[0].value;
            var request = $.ajax({
                url: "queryscript.php",
                type: "post",
                dataType: "html" ,
                data: {inCode: in_code}
                success: function(response){
                    alert(response);
                }
            });
        }else{
            document.getElementById("frm1").reset();
        }
    });
}); 
```

然后使用文件 queryscript.php 检索数据：

```
<?php
    include 'conect.php';
    $foo = $_POST['inCode'];
    $res2 = mysql_query("select * from products where code='$foo'");
    $row2 = mysql_fetch_array($res2);
    echo $row2['name'];
?> 
```

我没有测试上面的代码，但它应该给你一个开始。

# java - 检测图像中的对象并更改图像的背景

> ID：15699119
> 
> 赞同：3
> 
> 时间：2013-03-29T07:25:12.320
> 
> 标签：java, android, image-processing

实现一个相机拍照的android项目。

我想改变图像的背景。

需要执行哪些步骤来检测图像中的对象并裁剪对象以应用不同的背景

或者

只需更改背景。

是否需要图像处理。是否有任何可用的图像处理库。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:37:02.047

使用 android 进行图像处理的最佳库（仅支持 arm）是[JavaCV ，它是](https://code.google.com/p/javacv/)[OpenCV](http://opencv.org/)的 Java 接口，它是 C++ 中图像处理的标准库。

[这是 Android 中的人脸检测示例](https://code.google.com/p/javacv/source/browse/samples/FacePreview.java)，其中包含 AndroidManifest.xml 的所有配置提示。

编辑：[这是一个](https://code.google.com/p/javacv/source/browse/samples/MotionDetector.java)使用轮廓检测​​的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-27T13:47:32.690

您需要找到一种方法来确定哪些像素是背景，哪些不是。

复杂性将取决于背景的视觉特征。如果是固定颜色（如电视色度键），则非常简单。只需替换这种颜色的像素。如果是风景，那就更复杂了。

我建议从最简单的方法开始，它们会改进您的解决方案。

您还可以使用固定相机和两张照片。拍摄第一张照片（仅背景）和另一张带有场景中物体的照片。找出两个图像之间的区别，您知道什么是背景，什么是对象。

[此处](http://www.youtube.com/watch?v=D5mBt0kRYvk)（在 00:50）显示了实时执行的色度键应用示例。在处理之前收集背景（场景中没有物体的照片）。

# ios - IOS在关闭应用时丢失FBSession

> ID：15699131
> 
> 赞同：4
> 
> 时间：2013-03-29T07:26:09.403
> 
> 标签：ios, objective-c, facebook-ios-sdk

我很难让这个工作。我有一个 IOS 应用程序，我正在尝试集成到`Facebook SDK 3.1`. 用户可以选择登录 Facebook，如果他们这样做我正在缓存令牌。返回的令牌到期日期提前几周，我一切正常，登录/注销，返回前台。但是，每次我关闭应用程序时`FBSession`都不会保留。我知道这一点，因为当应用程序重新启动时，应用程序委托会执行`[self openSessionWithAllowLoginUI:NO]`并尝试刷新会话，但这总是返回 null。我已经关注了其他教程和其他帖子，但似乎看不到我在我的应用程序委托中做错了什么。

为什么我在应用程序关闭时会输掉这个会话，所以我很头疼。我已经附上了我的 appDelegate。

AppDelegate.m

```
#import "AppDelegate.h"
@implementation AppDelegate

NSString *const FBSessionStateChangedNotification=@"ro.Tag:FBSessionStateChangedNotification";

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    [self openSessionWithAllowLoginUI:NO];
    NSLog(@"%@",[[FBSession activeSession] accessToken]);

    return YES;
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.

    // We need to properly handle activation of the application with regards to SSO
    // (e.g., returning from iOS 6.0 authorization dialog or from fast app switching).
    [FBSession.activeSession handleDidBecomeActive];
}

/*
 * Callback for session changes.
 */
- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen:
            if (!error) {
                // We have a valid session
                NSLog(@"User session found");
                NSLog(@"session %@",session);
            }
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            [FBSession.activeSession closeAndClearTokenInformation];
            break;
        default:
            break;
     }

    [[NSNotificationCenter defaultCenter]
     postNotificationName:FBSessionStateChangedNotification
     object:session];

    if (error) {
        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"Error"
                                  message:error.localizedDescription
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [alertView show];
    }
}

/*
 * Opens a Facebook session and optionally shows the login UX.
 */
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"email",
                            @"user_games_activity",
                            @"user_location",
                            @"user_likes",
                            @"user_birthday",
                            nil];

    //NSLog(@"permissions: %@",permissions);

    return [FBSession openActiveSessionWithReadPermissions:permissions
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session,
                                                             FBSessionState state,
                                                             NSError *error) {
                                             [self sessionStateChanged:session
                                                                 state:state
                                                                 error:error];
                                         }];
}

/*
 * If we have a valid session at the time of openURL call, we handle
 * Facebook transitions by passing the url argument to handleOpenURL
*/
- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {
     // attempt to extract a token from the url
     return [FBSession.activeSession handleOpenURL:url];
}
/*
  *Logout
  *
 */
 - (void) closeSession {
    [FBSession.activeSession closeAndClearTokenInformation];
 }
 @end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T04:11:02.323

谢谢你们的意见。幸运的是，我终于能够找到问题所在。发生的事情是我已经从根视图控制器中移动了我的逻辑，但仍然需要调用

`[self openSessionWithAllowLoginUI:NO]`

所以这意味着我连续两次调用它。一次在 appDelegate 中，再一次在根视图控制器中。第二个电话似乎清除了我的令牌，自动将我注销。一旦我能够识别这一点并从我的根视图控制器中删除该功能，一切都会按预期工作。

谢谢你的帮助。

# android - 如何将按钮单击功能转换为 AsyncTask android

> ID：15699133
> 
> 赞同：-1
> 
> 时间：2013-03-29T07:26:20.900
> 
> 标签：android

我有一个按钮单击功能，由于网络异常，我想将其转换为 AsyncTask。

我已经尝试了以下代码。有人可以指出我哪里出错了。

```
 package com.icube.homeautomation;
import java.io.DataInputStream;  
import java.io.DataOutputStream;  
import java.io.IOException;  
import java.net.Socket;  
import java.net.UnknownHostException;  

import android.R.string;
import android.app.Activity;  
import android.os.AsyncTask;
import android.os.Bundle;  
import android.os.StrictMode;
import android.view.View;  
import android.widget.Button;  
import android.widget.EditText;  
import android.widget.TextView;  

public class temp extends Activity {

    private EditText textOut; //write msg  
    private TextView textIn; //show received msg  
    private EditText ipaddressEdt; //enter ip address of server  
    private EditText portno; //port no  

    /** Called when the activity is first created. */  

    @Override  
    public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.temp_layout);  
        ipaddressEdt = (EditText)findViewById(R.id.EditText01);  
        portno=(EditText)findViewById(R.id.EditText02);  
        textOut = (EditText)findViewById(R.id.messageedt);  
        Button buttonSend = (Button)findViewById(R.id.connecttoserver);  
        textIn = (TextView)findViewById(R.id.TextView01);  
        buttonSend.setOnClickListener(buttonSendOnClickListener);  
    }  

    Button.OnClickListener buttonSendOnClickListener  
    = new Button.OnClickListener(){  

        @Override  
        public void onClick(View arg0) {  
             new DownloadImageTask().execute(ipaddressEdt.getText().toString().trim(), Integer.parseInt(portno.getText().toString().trim()));

        }};  

        private  class DownloadImageTask extends AsyncTask <Socket ,Integer, String>{

            protected Socket doInBackground(String... data) {
                  Socket socket = null;  
                  DataOutputStream dataOutputStream = null;  
                  DataInputStream dataInputStream = null;  

                  try {  
                      socket = new Socket(data[0]);  

                      dataOutputStream = new DataOutputStream(socket.getOutputStream());  
                      dataInputStream = new DataInputStream(socket.getInputStream());  
                      dataOutputStream.writeUTF(textOut.getText().toString());  
                      textIn.setText(dataInputStream.readUTF());  
                  } catch (UnknownHostException e) {  
                      //if specified ip address is not found in the network  
                      e.printStackTrace();  
                  } catch (IOException e) {  
                      // TODO Auto-generated catch block  
                      e.printStackTrace();  
                  }  
                  finally{  
                      if (socket != null){  
                          try {  

                              socket.close();  
                          } catch (IOException e) {  
                              e.printStackTrace();  
                          }  
                      }  

                      if (dataOutputStream != null){  
                          try {  
                              //close outputstream  
                              dataOutputStream.close();  
                          } catch (IOException e) {  
                              // TODO Auto-generated catch block  
                              e.printStackTrace();  
                          }  
                      }  

                      if (dataInputStream != null){  
                          try {  
                              //close inputsteam  
                              dataInputStream.close();  
                          } catch (IOException e) {  
                              // TODO Auto-generated catch block  
                              e.printStackTrace();  
                          }  
                      }  
                  }  
                  return socket;
            }
            protected void onProgressUpdate(Integer... progress) {

            }

            protected void onPostExecute(String result) {
                 textIn.setText(result); 
            }
        }
   } 
```

我收到以下错误

temp.DownloadImageTask 类型必须实现继承的抽象方法 AsyncTask.doInBackground(Socket...)

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:30:35.067

问题在这里：

```
protected Socket doInBackground(String... data) { //<<<
           ^^^^
     //......
} 
```

因为您没有使用正确的返回类型覆盖 doInBackground ，您已将其作为泛型类型参数传递给 AsyncTask 。将 doInBackground 返回类型充电到 String 而不是 Socket ：

```
@Override 
protected String doInBackground(String... data) { //<<<

   return "any string";
} 
```

# lucene - 这个 ElasticSearch 查询排名背后的原因是什么？

> ID：15699134
> 
> 赞同：1
> 
> 时间：2013-03-29T07:26:24.370
> 
> 标签：lucene, indexing, elasticsearch

我有两个文件：

```
{
    id: 7,
    title: 'Wet',
    description: 'asdfasdfasdf'
}

{
    id: 6
    title: 'Wet wet',
    description: 'asdfasdfasdf'
} 
```

除了第二个文档中的多余单词外，它们几乎相同。

我的查询是这样的：

```
var qobject = {
        query:{
            custom_score:{
                query:{
                   multi_match:{
                     query: q, //I searched for "wet"
                     fields: ['title','description'],
                   }
                },
                script: '_score '
            }
        }
    } 
```

好的，所以当我运行这个查询时，我得到了这些结果：

```
{ total: 2,
  max_score: 1.8472979,
  hits: 
   [ { _index: 'products',
       _type: 'products',
       _id: '7',
       _score: 1.9808292,
       _source: [Object] },
     { _index: 'products',
       _type: 'products',
       _id: '6',
       _score:  1.7508222,
       _source: [Object] } ] } 
```

为什么 id 7 的排名高于 id 6？得分背后的原因是什么？6不应该因为它有2个词而排名更高吗？

**如果我想要更多的单词 = 更多的权重怎么办？我该怎么做才能修改我的查询？**

解释如下：

```
"_explanation": {
            "value": 1.9808292,
            "description": "custom score, product of:",
            "details": [
                {
                    "value": 1.9808292,
                    "description": "script score function: composed of:",
                    "details": [
                        {
                            "value": 1.9808292,
                            "description": "fieldWeight(title:wet in 0), product of:",
                            "details": [
                                {
                                    "value": 1,
                                    "description": "tf(termFreq(title:wet)=1)"
                                },
                                {
                                    "value": 1.9808292,
                                    "description": "idf(docFreq=2, maxDocs=8)"
                                },
                                {
                                    "value": 1,
                                    "description": "fieldNorm(field=title, doc=0)"
                                }
                            ]
                        }
                    ]
                },
                {
                    "value": 1,
                    "description": "queryBoost"
                }
            ]
        }

"_explanation": {
            "value": 1.7508222,
            "description": "custom score, product of:",
            "details": [
                {
                    "value": 1.7508222,
                    "description": "script score function: composed of:",
                    "details": [
                        {
                            "value": 1.7508222,
                            "description": "fieldWeight(title:wet in 0), product of:",
                            "details": [
                                {
                                    "value": 1.4142135,
                                    "description": "tf(termFreq(title:wet)=2)"
                                },
                                {
                                    "value": 1.9808292,
                                    "description": "idf(docFreq=2, maxDocs=8)"
                                },
                                {
                                    "value": 0.625,
                                    "description": "fieldNorm(field=title, doc=0)"
                                }
                            ]
                        }
                    ]
                },
                {
                    "value": 1,
                    "description": "queryBoost"
                }
            ]
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T08:06:52.853

查看查询的解释输出以了解原因。您可以使用[说明 api](http://www.elasticsearch.org/guide/reference/api/explain/)或添加[`"explain": true`](http://www.elasticsearch.org/guide/reference/api/search/explain)到您当前的搜索请求中。

默认情况下，lucene 使用 tf/idf（词频，倒置文档频率）相似度对文档进行评分。对于与查询匹配的每个术语，都会考虑不同的因素。以下是最重要的：

*   词频：词在文档中出现的频率。越多越好。如果一个术语出现多次，则该文档是一个更好的匹配。
*   倒置文档频率：该术语在索引中的频率。越少越好。稀有术语胜过通用术语。
*   规范：索引时间提升（默认为 1，无提升）+ 字段规范，它定义了较短的字段优于长字段。

根据您正在执行的查询，由于规范，文档的评分不同。您可以在映射（和重新索引）中禁用规范，但这样您也会失去索引时间提升（我认为您无论如何都不会使用它）。实际上，在您的示例中，第二个文档的得分较低，因为字段规范较低，尽管词频较高（2 而不是 1）。

另一个解决方案是插入不同的 lucene 相似性：lucene 4 提供了更多的相似性，并且还允许定义每个字段的相似性。这些功能已在 elasticsearch 0.90 中公开。

# c# - 如何合并两个具有相同类的相邻 XML 元素？

> ID：15699135
> 
> 赞同：0
> 
> 时间：2013-03-29T07:26:32.103
> 
> 标签：c#, xml

我有一个 XML 节点，如下所示：

```
<p>
Lorem <span class="red">ipsu</span><span class="red">m</span> dolor sit amet,
<span class="green">consectetur</span><span class="bold">adipiscingelit</span>.
</p> 
```

观察“ipsum”这个词被分成两个相似的跨度标签。我想将这些元素合并到类似`<span class="red">ipsum</span>`. 如果两个相邻的跨度具有不同的类，则它们必须保持原样。

我怎么能用 C# 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:07:01.197

使用 Linq to XML（有点笨拙）：

```
//elem is an XElement containing the XML
var duplicateRanges = (
    from head in elem.Elements()
    let currentClass = (string)head.Attribute("class")
    let others = head.ElementsAfterSelf().TakeWhile(next => {
        if (next.NodesBeforeSelf().LastOrDefault().NodeType == XmlNodeType.Text) { return false; }
        return (string)next.Attribute("class") == currentClass;
    })
    where others.Any()
    select new {
        head,
        others
    }).ToList();
foreach (var range in duplicateRanges) {
    range.head.Value=(string)range.head + String.Join("", from o in range.others select (string)o);
    foreach (var other in range.others) {
        other.Remove();
    }
} 
```

这可能足以满足您的目的，但它有一个主要限制：它将破坏要删除的跨度中的任何子节点。只有文本将被保留并与第一个跨度合并。

# c - 断言失败

> ID：15699136
> 
> 赞同：0
> 
> 时间：2013-03-29T07:26:34.453
> 
> 标签：c, opencv, assertion, integral

为什么我使用时总是收到此错误`cvIntegral()`

```
if ((image = cvLoadImage(filename,1))==0){ 
return -1;//if there is something wrong exit with -1
   }

image2 = cvCreateImage(cvSize(image->width++,image->height++),IPL_DEPTH_8U,1);

cvIntegral(image, image2, NULL,NULL);
cvReleaseImage(&image);//release image and exit
cvReleaseImage(&image2);//release image and exit

return 0; 
```

这是错误

> OpenCV 错误：在 cvIntegral 文件 /build/buildd/opencv-2.3.1/modules/ 中断言失败（sum.data == sum0.data && sqsum.data == sqsum0.data && tilted.data ==tilted0.data） imgproc/src/sumpixels.cpp，第 306 行在抛出 'cv::Exception'
> what() 实例后终止调用：/build/buildd/opencv-2.3.1/modules/imgproc/src/sumpixels.cpp:306：错误：(-215) sum.data == sum0.data && sqsum.data == sqsum0.data && 倾斜.data == 函数 cvIntegral 中的倾斜0.data

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:33:17.387

[`cvIntegral`](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=cvintegral#void%20cvIntegral%28const%20CvArr%2a%20image,%20CvArr%2a%20sum,%20CvArr%2a%20sqsum,%20CvArr%2a%20tilted_sum%29)期望输出图像的类型为`CV_32F`or `CV_64F`。此外，源图像和目标图像的通道数应该相同。你应该这样做：

```
image2 = cvCreateImage(cvSize(image->width+1,image->height+1),IPL_DEPTH_32F,image->nChannels); 
```

# python - 以西班牙语 Python 获取当前月份

> ID：15699142
> 
> 赞同：0
> 
> 时间：2013-03-29T07:27:16.673
> 
> 标签：python, django, date, format

嗨，我在我的模板文件中使用了一个变量，它给了我当前月份的英文值

> {{这个月}}

我怎样才能把它转换成西班牙语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:22:43.013

您将需要`date`从视图传递给您的模板。然后要获得当前月份，您需要做

```
{{ mydate|date:"F" }} 
```

这将为您提供月份名称，即使用[模板标签和过滤器的一月](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#date)

要获得西班牙语版本，请通过[启用国际化](https://docs.djangoproject.com/en/dev/topics/i18n/)并为西班牙语创建本地化字符串来启用西班牙语。您甚至可以使用在 Spanin`humanize`中具有[本地化功能的模板标签](https://github.com/django/django/blob/master/django/contrib/humanize/locale/es/LC_MESSAGES/django.po)

# python - 使用 celery 和已经存在的 MySQL 表而不是代理，这可能吗？

> ID：15699143
> 
> 赞同：8
> 
> 时间：2013-03-29T07:27:17.877
> 
> 标签：python, celery

手头的任务：

有一个 MySQL 表，其中用户活动被推送为一行。该活动需要稍后处理。

```
id    |  activity_type  |  activity_data | creation_time | status
23          EMAIL          {....... }       2013-02-01     UNPROCESSED 
```

没有芹菜的加工：

*   使用一个脚本来处理 N 条记录，处理它们，然后将已处理记录的状态更新为 PROCESSED。

如何使用 Celery 实现相同的功能，我想使用相同的功能来标记任务而不是使用代理？即任务添加 -> 将 10 个最旧的行添加到状态为 UNPROCESSED 的 mysql 表中，该表也包含与任务相关的数据。

在任务完成时-> 将行标记为已处理。

如何告诉 celery 不是将任务推送到代理上，而是必须从 MySQL 表中检索任务？

我是 Celery 的初学者，因此不了解它的所有功能。不建议使用 MySQL 作为代理，但我想知道可行性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:55:28.003

我认为你误解了芹菜的工作方式。您不能只用您自己设计的 MySQL 表替换它的代理 - 好吧，不能不对其源代码进行实质性更改。

代理是 celery 的一个内部部分，它使用它自己的内部格式来跟踪其任务，因此仅使用 MySQL 代理没有固有的优势，因为这是您当前存储执行所需信息的方式任务。

如果您愿意，您仍然可以使用 celery，但您必须编写将用户活动表转换为 celery 任务所需的代码。

但是，我建议先尝试芹菜...

1.  基本了解如何使用它
2.  确定它是否是您要实现的目标的良好解决方案

从[celery 教程](http://docs.celeryproject.org/en/latest/getting-started/first-steps-with-celery.html)开始，看看它是如何开始的。

# java - 在 HttpURLConnection 中 getErrorStream 返回的 InputStream 中获取服务器发送的有用数据

> ID：15699145
> 
> 赞同：0
> 
> 时间：2013-03-29T07:27:21.080
> 
> 标签：java, inputstream, httpurlconnection

当我在 HttpURLConnection 中调用 getInputStream() 方法时，它返回一个 HTTP 异常，我使用此策略来捕获该异常。

```
try {
   con.getInputStream();
} catch (IOException e) {
   resStream = con.getErrorStream();
} 
```

但是，我需要获取服务器发送到 resStream 的有用数据，JavaDoc 声明如下。“如果连接失败但服务器仍然发送了有用的数据，则返回错误流。”

有什么方法可以从getErrorStream()返回的InputStream中获取响应消息（如果返回值不为null且返回有效响应）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:10:25.727

您可以将此字节流包装为字符流并读取错误信息。

```
InputStreamReader isr = new InputStreamReader(resStream);
BufferedReader br = new BufferedReader(isr);
StringBuffer buf = new StringBuffer();
String line = null;
while((line = buf.readLine()) != null) {
    buf.append(line);
}
//assume you have a log object, you'd better not use System.out.println()
log.error(buf.toString());
//do not forget to close all the stream 
```

然后，您可以从服务器端获取堆栈跟踪。我希望这将有所帮助。

# iphone - 从 eventStore 获取特定数量的事件

> ID：15699146
> 
> 赞同：0
> 
> 时间：2013-03-29T07:27:22.217
> 
> 标签：iphone, ios, calendar, ekeventstore

我们知道我们可以使用谓词从 EventStore 中获取事件。它包含开始日期和结束日期。使用它来获取属于该时间段的所有事件。

但是，我正在寻找可以让我从事件存储中仅获取特定数量的事件的东西 - 例如：从事件存储中获取前 100 个事件。有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:39:42.057

使用 enumerateEventsMatchingPredicate:withBlock: 方法。每次执行块时增加一个计数器，当达到限制时，将 stop 指向的值更改为 YES。每次执行块时，也会将事件添加到可变集合中。

# c - 将动态分配的 int 指针转换为结构指针

> ID：15699150
> 
> 赞同：1
> 
> 时间：2013-03-29T07:27:46.283
> 
> 标签：c, casting, struct, initialization

我看到了下面写的代码。

```
typedef struct abc {
    int a;
    char b;
    float c;
} abc;

int main()
{
  abc *ab;
  int *i;
  i = (int*)malloc(sizeof(int));
  *i = 0;
  ab = (abc*) i;

  return 0;
} 
```

在倒数第二行`ab = (abc*) i;`，代码试图做什么？

如果我们要设置 的值`ab->a`，那为什么要这样做，而不是：

```
ab->a = (int)i; 
```

如果`ab = (abc*) i;`更新 的值`ab->a`，那么其他两个结构成员将如何在不单独初始化它们的情况下进行初始化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T07:36:31.557

> 那么其他两个结构成员将如何在不专门初始化它们的情况下被初始化呢？

他们不会。

你会得到垃圾值`ab->b`，`ab->c`因为`i`它不代表一块足够大的内存来代表`abc`.

`ab->a`等于 0，因为当您执行: 时`*i = 0`，您将值存储在指向`0`的内存位置中。`i`当您`abc`指向与 相同的内存位置时`i`，没有对内存进行任何写入，您只是更改了数据的位置。

由于`0`之前在`i`指向的位置存储了 4 个字节，并且由于`int ab::a`恰好占用了 4 个字节并且也恰好是结构的第一个成员，因此`ab->a`将等于 0。

在内存中，相对于实例的位置，您的结构的顺序如下：

```
 ____ ____ ____ ____    ____    ____ ____ ____ ____
| 00 | 01 | 02 | 03 |  | 04 |  | 05 | 06 | 07 | 08 |
|____|____|____|____|  |____|  |____|____|____|____|
        int a          char b         float c 
```

我希望这能解决问题。

**注意**
你并不能真正保证结构完全打包，就像我在上面的表示中所做的那样。虽然将保留顺序，但连续成员之间的空间并不总是 0 内存地址单元。阅读[对齐](http://en.wikipedia.org/wiki/Data_structure_alignment)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T07:38:01.820

该行将type`ab = (abc*) i;`的指针变量强制转换为 type ，并将该赋值给指针变量。但是，这当然不是您想要初始化结构中数据成员的方式，特别是因为只为 an分配了足够的空间，而且我们使用的结构占用的空间比.`i``int*``abc*``ab``int``int`

归根结底，这是法律法规，但非常可怕。我什至不确定您是否可以保证将数据成员`int a`存储在`ab`. 我想说它依赖于实现，但也许其他人可以为我解决这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T07:43:54.807

倒数第二行导致从`(int *)`to的转换`(abc *)`，并将结果分配给 ab。这不是一个很好的代码行，因为旧的指向类型比新的指向类型小；使用此转换结果的一些尝试将是未定义的行为。将其保留为`(int *)`，或声明要转换为的前缀结构将是一个更好的主意。

The `*` in `abc *` indicates that the type is a "pointer to abc". `ab` doesn't point to an `abc` object until you tell it to point to one. `ab = /* something */` assigns `ab` to point to *something*. `ab = malloc(sizeof *ab);` would make sense, in this example.

This is silly: `i = (int*)malloc(sizeof(int));`. You don't need to cast the return value of malloc. The only justifiable reason for this is that the author of this code has neglected to `#include <stdlib.h>`. I suggest including that library, rather than casting the return value. You can feel free to ignore my advice, but don't ask any questions about *strange errors* until you've read [this page](http://c-faq.com/malloc/mallocnocast.html).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T07:39:04.343

`abc *ab;`ab 是 struct abc 类型的指针； `int *i;`是一个指向 int 返回的指针`malloc`

它的值是使用设置的`*i = 0;`

```
ab = (abc*) i; 
```

此行将 malloc 分配的位置地址分配给 ab。通过对它进行类型转换`i`，`(abc*)`表明 ab 将用于读取大小为`struct abc` `ab = (abc*) i;` **不**为 a 赋值的内存块。给 au 赋值就可以了`ab->a = 5;`

已经存在的值是垃圾值（默认随机值）

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-29T07:40:39.350

```
ab = (abc*) i; updates the value of ab->a 
```

如果我们看结构布局，int 是 int 是第一个成员，所以它将被初始化为 0，所以 ans 是的！我尝试使用 VC 并将其初始化为 0，但这很棘手，如果是 struct if member change order 那么你就抢到了！

还有内存泄漏，使用 malloc 分配的内存从未释放！

# sbt - 使用 scala 2.10 时，escalante-run 出错

> ID：15699155
> 
> 赞同：0
> 
> 时间：2013-03-29T07:28:04.460
> 
> 标签：sbt, escalante

我运行`escalante-run`并收到以下错误：

请注意，它尝试读取的 xml 文件不完整：

```
cat  /var/folders/8n/ws0wh0wd4vg5tf80b_kpq5_r0000gq/T/escalante-0.2.0/modules/org/scala-lang/scala-library/2.10.0/module.xml

<?xml version='1.0' encoding='UTF-8'?> 
```

文件结束，这是错误：

```
WARN: Artifact not found (exception: Could not find artifact net.liftweb:lift-json-ext_2.10.0:jar:2.5-RC2 in central (http://repo1.maven.org/maven2)), but Scala version old (UnknownScalaVersion(2.10.0)), so with a more recent one: SCALA_292
Mar 29, 2013 3:22:32 AM org.jboss.msc.service.ServiceLogger_$logger startFailed
  ERROR: MSC00001: Failed to start service jboss.module.service."deployment.ROOT.war".main
org.jboss.msc.service.StartException in service jboss.module.service."deployment.ROOT.war".main: JBAS018759: Failed to load module: deployment.ROOT.war:main
at org.jboss.as.server.moduleservice.ModuleLoadService.start(ModuleLoadService.java:92)
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
Caused by: org.jboss.modules.ModuleLoadException: Error loading module from /var/folders/8n/ws0wh0wd4vg5tf80b_kpq5_r0000gq/T/escalante-0.2.0/modules/org/scala-lang/scala-library/2.10.0/module.xml
at org.jboss.modules.ModuleXmlParser.parseModuleXml(ModuleXmlParser.java:293)
at org.jboss.modules.ModuleXmlParser.parseModuleXml(ModuleXmlParser.java:243)
at org.jboss.modules.LocalModuleLoader.parseModuleInfoFile(LocalModuleLoader.java:138)
at org.jboss.modules.LocalModuleLoader.findModule(LocalModuleLoader.java:122)
at org.jboss.modules.ModuleLoader.loadModuleLocal(ModuleLoader.java:275)
at org.jboss.modules.ModuleLoader.preloadModule(ModuleLoader.java:222)
at org.jboss.modules.LocalModuleLoader.preloadModule(LocalModuleLoader.java:94)
at org.jboss.modules.Module.addPaths(Module.java:851)
at org.jboss.modules.Module.link(Module.java:1206)
at org.jboss.modules.Module.relinkIfNecessary(Module.java:1235)
at org.jboss.modules.ModuleLoader.loadModule(ModuleLoader.java:208)
at org.jboss.as.server.moduleservice.ModuleLoadService.start(ModuleLoadService.java:71)
... 5 more
  Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[2,1]
Message: Premature end of file.
at com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.next(XMLStreamReaderImpl.java:594)
at com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.nextTag(XMLStreamReaderImpl.java:1235)
at org.jboss.modules.ModuleXmlParser.parseDocument(ModuleXmlParser.java:540)
at org.jboss.modules.ModuleXmlParser.parseModuleXml(ModuleXmlParser.java:288)
... 16 more
  Mar 29, 2013 3:22:32 AM org.jboss.as.server.deployment.DeploymentHandlerUtil$1$2 handleResult
  ERROR: JBAS015870: Deploy of deployment "ROOT.war" was rolled back with the following failure message:
  {"JBAS014671: Failed services" => {"jboss.module.service.\"deployment.ROOT.war\".main" => "org.jboss.msc.service.StartException in service jboss.module.service.\"deployment.ROOT.war\".main: JBAS018759: Failed to load module: deployment.ROOT.war:main
    Caused by: org.jboss.modules.ModuleLoadException: Error loading module from /var/folders/8n/ws0wh0wd4vg5tf80b_kpq5_r0000gq/T/escalante-0.2.0/modules/org/scala-lang/scala-library/2.10.0/module.xml
    Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[2,1]
    Message: Premature end of file."}}
    Mar 29, 2013 3:22:32 AM org.jboss.as.server.deployment.AbstractDeploymentUnitService stop
    INFO: JBAS015877: Stopped deployment ROOT.war in 32ms
    [trace] Stack trace suppressed: run last *:escalante-run for the full output.
    [error] (*:escalante-run) org.jboss.as.controller.client.helpers.standalone.ServerDeploymentHelper$ServerDeploymentException: java.lang.Exception: {"JBAS014671: Failed services" => {"jboss.module.service.\"deployment.ROOT.war\".main" => "org.jboss.msc.service.StartException in service jboss.module.service.\"deployment.ROOT.war\".main: JBAS018759: Failed to load module: deployment.ROOT.war:main
    [error]     Caused by: org.jboss.modules.ModuleLoadException: Error loading module from /var/folders/8n/ws0wh0wd4vg5tf80b_kpq5_r0000gq/T/escalante-0.2.0/modules/org/scala-lang/scala-library/2.10.0/module.xml
    [error]     Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[2,1]
    [error] Message: Premature end of file."}}
    [error] Total time: 8 s, completed Mar 29, 2013 3:22:32 AM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T10:50:47.650

Diego，[Escalante 0.3.0 现已推出](http://goo.gl/fG0B6)，支持 Scala 2.10。此版本解决了您遇到的 Scala 2.10 问题。让我知道这是怎么回事:)。

# asp.net-mvc-4 - 检测 ApiController 上的请求结束

> ID：15699157
> 
> 赞同：1
> 
> 时间：2013-03-29T07:28:08.257
> 
> 标签：asp.net-mvc-4, controller, httpwebrequest, asp.net-web-api, detection

我正在使用 MVC4 开发一个 Web 应用程序，发现这种方法非常有用：

```
class Controller
{
    protected virtual void OnActionExecuted(ActionExecutedContext filterContext);
} 
```

这允许我调用`UnitOfWork.SubmitChanges();`或`Transaction.Rollback();`其他仅在处理请求并且对数据库的更改待处理后才需要调用的好东西。

当我开始工作时，`ApiController`我没有找到那个有用的方法。

如何在我的 web-api 控制器上检测到 http 请求的结束？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T07:30:10.427

您可以[`ActionFilterAttribute`](http://msdn.microsoft.com/en-us/library/system.web.http.filters.actionfilterattribute%28v=vs.108%29.aspx)为 ApiController 制作一个。

```
 public class JsonpAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
        {
            //Logic
        }
    } 
```

在你的控制器中：

```
[Jsonp]
public class testcontroller : ApiController 
```

请注意，Web Api 使用`System.Web.Http.Filters`，而 MVC4 使用`System.Web.Mvc`

# c# - Direct3D 自定义着色器滞后几帧

> ID：15699162
> 
> 赞同：0
> 
> 时间：2013-03-29T07:28:45.773
> 
> 标签：c#, directx, direct3d, vertex-shader

在 C# Managed DirectX 中，我无法在梯形上正确显示纹理（四边形的一侧更小，就像从一个角度看一样）。我最终用一个自定义着色器解决了它（不是我正在寻找的解决方案，而是迄今为止唯一有效的解决方案）。但是现在的问题是，使用自定义着色器渲染的所有图元都落后于其他图元一帧或几帧。代码的关键部分概述如下：

顶点着色器：

```
float4x4 WorldViewProj;

struct VSData
{
    float4 Position : POSITION0;
    float2 TexCoord : TEXCOORD0;
};    

void Raw_VertexShader(in VSData IN, out VSData OUT)
{
    OUT.Position = mul(IN.Position, WorldViewProj);
    OUT.TexCoord = float2(IN.Position.x, IN.Position.z);
}

technique StretchTexture
{
    pass
    {
        VertexShader = compile vs_3_0 Raw_VertexShader();
    }
} 
```

使成为（）：

```
//apply shader
manager.CPolyVertexShader.Technique = "StretchTexture";
manager.CPolyVertexShader.Begin(0);
manager.CPolyVertexShader.BeginPass();
//set shader's transformation matrix
manager.CPolyVertexShader.SetValue(manager.hWorldViewProj, device.Transform.World * device.Transform.View * device.Transform.Projection);
//draw the triangles
device.DrawIndexedUserPrimitives(PrimitiveType.TriangleList, 0, CPolyIndices.Length, CPolyTriangles, CPolyIndices, true, CPolyVerts);
//deapply the shader
manager.CPolyVertexShader.EndPass();
manager.CPolyVertexShader.End(); 
```

manager 是一个处理 Direct3D 设备的类。CPolyIndi​​ces 是索引数组。CPolyVerts 是顶点数组。CPolyTriangles 是要渲染的三角形的数量。

如您所见，在渲染之前，它将 WorldViewProj 设置为已分配给设备的矩阵，因此默认着色器和自定义着色器必须使用相同的转换矩阵。事实上，它并没有在错误的位置渲染，它只是渲染了它应该在几帧前的位置（很难准确说出它后面有多少帧，但看起来大约是 3）。

如果我简单地注释掉在绘制之间打开和关闭自定义着色器的行，问题就会消失。这是我第一次尝试在同一个渲染周期中使用自定义着色器和默认着色器，所以我可能错过了一些我什至没有意识到的东西。有人听说过这个吗？

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T13:52:38.630

我认为您的问题是您在 Begin 和 BeginPass 范围**内设置了值。**Begin 表示 cpu 应用管道的当前状态。包括着色器变量。

您应该在开始效果之前移动您的设置值，或者调用类似 yourshader.Apply()

# c# - 如何获取 Request 变量中的所有属性和值

> ID：15699164
> 
> 赞同：0
> 
> 时间：2013-03-29T07:28:52.987
> 
> 标签：c#, asp.net, reflection

我知道我可以遍历请求标头变量中的每个键值对，如下所示

```
 foreach (var key in Request.Headers.AllKeys)
 {
    // headers += key + "=" + Request.Headers[key] + "<br/>";
 } 
```

同样，我可以在 Request.Browser 中获取所有键值对，如下所示

```
HttpBrowserCapabilities bc = Request.Browser;
foreach (DictionaryEntry p in bc.Capabilities)
{
   // p.Key 
   //p.Value
} 
```

现在我想知道是否可以遍历 Request 变量中的每个可能值，如果其中还有另一个键值，则获取所有信息。

## 编辑

我可以使用反射来获取所有属性和子属性的列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:08:39.863

[HttpRequest.Params](http://msdn.microsoft.com/en-us/library/system.web.httprequest.params.aspx)为您提供所有查询字符串参数、表单字段、Cookie 和服务器变量的原始数据。客户端的用户代理发送的几乎所有内容！

# qt - Qt：用于复合应用程序的 QGraphicsProxyWidgets 与混合 QWidgets 和 QGraphicsView

> ID：15699166
> 
> 赞同：2
> 
> 时间：2013-03-29T07:29:04.743
> 
> 标签：qt, pyqt

我打算使用 PyQt 编写一个小应用程序（主要与 Windows 兼容），并且需要一些帮助来找到正确的方法。该应用程序应包含一个显示图像的*QLabel 、一个带有一些**QPushButtons*和一个*QListView*的无框窗口。现在的问题是，*QLabel*和*QListView*应围绕 Z 轴旋转固定角度。这个想法是让整个应用看起来像一张照片和一个放在某种技术设备（中心的主要小部件）下面的记事本。所有三个小部件应形成一个组合，具有固定大小并且可以作为一个窗口移动，但是我想保留“杂乱”的外观并使其无框，主小部件应具有最小化/关闭按钮。

我设法使记事本看起来像是有人刚刚将它扔到桌面上，方法是在无框架、透明的*QGraphicsView中使用转换后的**QGraphicsProxyWidget*，这非常令人满意，因为我不必费心旋转接收鼠标事件的区域。现在我想知道，如何将这部分与其他部分联系起来。我能想到的可能性是：

*   将所有三个小部件放在*QGraphicsProxyWidgets*中并使用隐藏的*QGraphicsView*将所有内容放在一起

*   将我当前的记事本设置与用于中心部分的单个无框*QWidget*和显示带有 alpha 通道的旋转图像的*QLabel相结合（无论如何，图像都将使用 PIL* 进行更改）*

*   在 QLabel 和 QListView 上独立使用我的*QGraphicsProxyWidget*方法，并将它们与主小部件结合起来。

*   完全不同的东西？

我想要的两个“功能”是整个应用程序的阴影（我记得在过去让*QGraphicsEffect*在不同的小部件上同时工作时遇到问题）和整个应用程序的蒙版，所以部分在小部件范围内但不可见的不接收鼠标事件。我也希望该应用程序可以毫不拖延地打开，但我不知道在*QLabel中显示旋转的图像是否会比在**QGraphicsView*中旋转整个 QLabel 更快或更慢（图像将被交换一些运行时的时间）。

我希望有人可以澄清采取哪种方式或指出不同方法的优缺点。提前致谢。

*Python 图像库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:36:26.990

我在 QtCentre 论坛上获得了更多的运气，对于任何感兴趣的人，这里是链接，还讨论了我遇到的其他一些问题：

[http://www.qtcentre.org/threads/53945-Putting-all-widgets-in-QGraphicsView-using-QGraphicsProxyWidgets-Good-idea](http://www.qtcentre.org/threads/53945-Putting-all-widgets-in-QGraphicsView-using-QGraphicsProxyWidgets-Good-idea)

我决定将所有内容都放在 QGraphicsProxyWidgets 中，并将它们包裹在一个无框架、透明的 QGraphicsView 中，这给了我想要的一切。

# jquery - 成功使用不同变量的多个 ajax 调用

> ID：15699171
> 
> 赞同：0
> 
> 时间：2013-03-29T07:29:28.853
> 
> 标签：jquery, ajax, variables

> **更新：**问题出在其他地方。我用相同的属性打了 3 个电话。因此，如果您**在 $.ajax 之前有相同的问题检查属性值**

我有**jQuery ajax 调用**：

```
function foo(someVar){
    $.ajax({
        dataType: "json",
        url: 'http://some.json?callback=?',
        success: function(data){
            alert(someVar);
        }
    });
} 
```

如果打**多个电话**：

```
getPriceByRoute('a');
getPriceByRoute('b');
getPriceByRoute('c'); 
```

将收到 3 个警报`c`。

**如何发送我`someVar`的成功功能？**

试图做：

```
function foo(someVar){
    $.ajax({
        dataType: "json",
        //
        myVars:{someVar:someVar},
        //
        url: 'http://some.json?callback=?',
        success: function(data){
            alert(this.myVars.someVar);
        }
    });
} 
```

但同样的结果。

在最后一种情况下，我可以在上一次加载后发送下一个请求，但希望有其他好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:30:52.153

通过使用`context`选项`$.ajax`

```
$.ajax({
    ...
    context: {someVar:someVar}, // sets the value of "this" inside the success function
    ...
    success: function(data){

        // "this" is {someVar:someVar}, as set via the context option
        alert(this.someVar);
    }
}); 
```

# php - ZendFramework 自动路由不起作用

> ID：15699172
> 
> 赞同：0
> 
> 时间：2013-03-29T07:29:35.023
> 
> 标签：php, zend-framework

```
// The following is a route to simplify getting started creating
            // new controllers and actions without needing to create a new
            // module. Simply drop new controllers in, and you can access them
            // using the path /application/:controller/:action
            'application' => array(
                'type'    => 'Literal',
                'options' => array(
                    'route'    => '/application',
                    'defaults' => array(
                        '__NAMESPACE__' => 'Application\Controller',
                        'controller'    => 'Index',
                        'action'        => 'index',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'default' => array(
                        'type'    => 'Segment',
                        'options' => array(
                            'route'    => '/[:controller[/:action]]',
                            'constraints' => array(
                                'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                            ),
                            'defaults' => array(
                            ),
                        ),
                    ),
                ),
            ), 
```

我已经创建了一个 TestController.php 类 TestController 有一个方法 indexAction，但我不能使用这条路线执行它，如果我写 /application/index/test 或 /application/index/index - 一切都好，但是如果我将控制器更改为测试它不起作用，我的意思是 /application/test/test 或 /application/test/index

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:40:49.100

不要忘记将新控制器添加到应用程序的 module.config.php 中的 controllers['invokables'] 配置部分：

```
'controllers' => array(
        'invokables' => array(
            'Application\Controller\Index' => 'Application\Controller\IndexController',
            'Application\Controller\Test' => 'Application\Controller\TestController',
        ),
    ), 
```

# android - 使用 screencap 实用程序截屏时出现黑屏

> ID：15699182
> 
> 赞同：0
> 
> 时间：2013-03-29T07:30:59.000
> 
> 标签：android

我正在从我的应用程序中截取android设备的屏幕截图，在我的华为设备中没有截屏实用程序，但现在我已经通过从其他设备获取它来添加它，现在我可以使用截屏截屏但只有通知栏可见，休息图像为空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:51:14.507

```
adb shell /system/bin/screencap -p /sdcard/img.png this is a shell command take screenshot simple and fast

Try this

Process sh = Runtime.getRuntime().exec("su", null,null);
OutputStream  os = sh.getOutputStream();
os.write(("/system/bin/screencap -p " + "/sdcard/img.png").getBytes("ASCII"));
            os.flush();
            os.close();
            sh.waitFor(); 
```

# php - Codeigniter 如何按此查询排序

> ID：15699183
> 
> 赞同：0
> 
> 时间：2013-03-29T07:31:04.257
> 
> 标签：php, mysql, codeigniter

这是我的查询，我只显示 9 行，但是按日期排序我应该如何以及在哪里添加我的（在当前查询中排序）

```
$q = $this->db->get('exchange_rate, country', 9,'exchange_rate.CountryId = country.CountryId'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:33:45.777

试试这种格式，作为一个例子

```
 $this->db->select('a.exchange_rate, b.country');
         $this->db->from('exchange_rate a');
         $this->db->join('country b','b.CountryId = a.CountryId');
         $this->db->order_by("yourOrderByColumn",'DESC');
         $this->db->limit(9);
         $query = $this->db->get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:34:32.820

[http://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

您将对 codeignitor 数据库概念有很好的了解

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T07:36:53.920

```
$this->db->from('exchange_rate');
$this->db->join('country', 'exchange_rate.CountryId = country.CountryId');
$this->db->limit(9);
$this->db->order_by("date", "asc");
$query = $this->db->get(); 
```

有关更多信息，请转到 codeigniter[文档](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T07:38:30.507

首先，您使用的[`get()`方法](http://ellislab.com/codeigniter/user-guide/database/active_record.html)非常错误。你从哪里得到这种语法，我不知道。

由于`get()`是触发查询的方法，所有添加查询详细信息的参数方法（如`where()`、`order_by()`等）都应该*在*它之前。

```
$this->db->order_by('column', 'ASC');
$this->db->get('table_name'); 
```

我还建议使用 JOIN 而不是选择具有奇怪`WHERE`序列的两个表。

```
$this->db->select('column, another_column, etc');
$this->db->from('table');
$this->db->join('another_table', 'another_table.column = table.column');
$this->db->order_by('sort', 'DESC');
$query = $this->db->get(); 
```

# android - ...您是否在 AndroidManifest.xml 中声明了此活动

> ID：15699192
> 
> 赞同：13
> 
> 时间：2013-03-29T07:31:35.797
> 
> 标签：android

我使用意图指向下一个活动，但是当我单击按钮时，出现以下错误。

```
03-29 11:25:55.414: E/AndroidRuntime(3921): FATAL EXCEPTION: main
\
**03-29 11:25:55.414: E/AndroidRuntime(3921): android.content.ActivityNotFoundException: 
Unable to find explicit activity class {mycube.test/mycube.test.Compte}; have you declared 
this activity in your AndroidManifest.xml?**

03-29 11:25:55.414: E/AndroidRuntime(3921):     at

 android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)

03-29 11:25:55.414: E/AndroidRuntime(3921):     at 

android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)

03-29 11:25:55.414: E/AndroidRuntime(3921):     at 

android.app.Activity.startActivityForResult(Activity.java:2827)

03-29 11:25:55.414: E/AndroidRuntime(3921):     at 

android.app.Activity.startActivity(Activity.java:2933)

03-29 11:25:55.414: E/AndroidRuntime(3921):     at mycube.test.Menu.onClick(Menu.java:143)

03-29 11:25:55.414: E/AndroidRuntime(3921):     at 

android.view.View.performClick(View.java:2538)

03-29 11:25:55.414: E/AndroidRuntime(3921):     at 

android.view.View$PerformClick.run(View.java:9152)

03-29 11:25:55.414: E/AndroidRuntime(3921):     at 

android.os.Handler.handleCallback(Handler.java:587)

03-29 11:25:55.414: E/AndroidRuntime(3921):     at 

android.os.Handler.dispatchMessage(Handler.java:92)

03-29 11:25:55.414: E/AndroidRuntime(3921):     at android.os.Looper.loop(Looper.java:130)

03-29 11:25:55.414: E/AndroidRuntime(3921):     at 

android.app.ActivityThread.main(ActivityThread.java:3687)

03-29 11:25:55.414: E/AndroidRuntime(3921):     at 

java.lang.reflect.Method.invokeNative(Native Method)

03-29 11:25:55.414: E/AndroidRuntime(3921):     at 

java.lang.reflect.Method.invoke(Method.java:507)

03-29 11:25:55.414: E/AndroidRuntime(3921):     at 

com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)

03-29 11:25:55.414: E/AndroidRuntime(3921):     at 

com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)

03-29 11:25:55.414: E/AndroidRuntime(3921):     at dalvik.system.NativeStart.main(Native Method) 
```

但是该文件存在于我的清单中。我是否在清单中省略了一行？

这是我的清单文件。

```
<?xml version="1.0" encoding="utf-8"?>

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="mycube.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.NoTitleBar" >

        <activity
            android:name=".Menu" 
            android:screenOrientation="portrait"
            android:label="@string/app_name" >
            <intent-filter>

                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />

            </intent-filter>
        </activity>
    </application>

    <uses-permission android:name="android.permission.INTERNET"></uses-permission>

    <activity  android:name=".Compte"  android:screenOrientation="portrait" />
</manifest> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-29T07:36:40.297

您已在应用程序标记之外声明此活动。

```
<activity  android:name=".Compte"  android:screenOrientation="portrait" /> 
```

让它像这样：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Light.NoTitleBar" >

    <activity
        android:name=".Menu" 
        android:screenOrientation="portrait"
        android:label="@string/app_name">
        <intent-filter>
             <action android:name="android.intent.action.MAIN" />
             <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>

    <activity  
         android:name=".Compte"  
         android:screenOrientation="portrait" />

</application>

<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T07:33:45.747

您将它放置在错误的位置，它应该在应用程序标签内。你所有的`<activity... />`标签都应该放在`<application.. />`标签下面。

它应该是这样的：

```
<uses-sdk
android:minSdkVersion="8"
android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.INTERNET"></uses-permission>

<application
android:icon="@drawable/ic_launcher"
android:label="@string/app_name"
android:theme="@android:style/Theme.Light.NoTitleBar" >

<activity  
    android:name=".Compte"  
    android:screenOrientation="portrait" />

<activity
    android:name=".Menu" 
    android:screenOrientation="portrait"
    android:label="@string/app_name" >

    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>

</activity>

</application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-15T18:47:50.877

唯一要查找的异常如下所示。

> android.content.ActivityNotFoundException：找不到明确的活动类 {com.firstp.ta.myapplication/com.firstp.ta.myapplication.Activity1}；您是否在 AndroidManifest.xml 中声明了此活动？

很明显，您没有在 AndroidManifest.xml 文件中列出您的活动，或者如果列出，则它不在所需的标签内。它还提到完整的活动路径为 {com.firstp.ta.myapplication/com.firstp.ta.myapplication.Activity1} 其中 Activity1 是您的活动，需要在 AndroidManifest.xml 文件中提及。

# javascript - 作为对象和函数调用的函数

> ID：15699193
> 
> 赞同：2
> 
> 时间：2013-03-29T07:31:42.963
> 
> 标签：javascript, function

我正在读这个 - [http://learn.jquery.com/javascript-101/this-keyword/](http://learn.jquery.com/javascript-101/this-keyword/)但有一个我不太明白的例子。

```
// A function being attached to an object at runtime.
var myName = "the global object";
var sayHello = function() {
    console.log( "Hi! My name is " + this.myName );
};
var myObject = {
    myName: "Rebecca"
};
var secondObject = {
    myName: "Colin"
};

myObject.sayHello = sayHello;
secondObject.sayHello = sayHello;

sayHello();              // "Hi! My name is the global object"
myObject.sayHello();     // "Hi! My name is Rebecca"
secondObject.sayHello(); // "Hi! My name is Colin" 
```

我都明白了，除了这两行：

```
myObject.sayHello = sayHello;
secondObject.sayHello = sayHello; 
```

我们到底用它们做什么？我们为对象创建新键，并声明它们的值将是函数 sayHello，但我们省略括号是为了不显式调用函数？为什么我们需要它们？如果我们省略它们，我们会不会得到相同的结果，并且不会再次成为“在运行时附加到对象的函数”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T07:33:36.873

> 我们为对象创建新的键，并声明它们的值将是函数 sayHello，

是的

> 但是我们省略括号是为了不显式调用函数？

是的。如果您调用了该函数，那么您将分配函数调用的返回值而不是函数本身。

> 如果我们省略它们，我们会不会得到相同的结果

如果你省略这两行，那么`myObject.sayHello`将会是`undefined`，当你尝试调用时你会得到一个错误`undefined()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T07:42:05.227

```
var sayHello = function() {
    ...
};
myObject.sayHello = sayHello; 
```

是相同的：

```
var myObject = {
    myName: "Rebecca",
    sayHello: function() {
        ...
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T07:46:06.640

发生的事情是您指向`myObject.sayHello`该`sayHello`函数（并且省略括号，否则您将分配被调用函数的*结果*）。每当您调用该`sayHello`函数时，`this`将是您调用的对象`sayHello`。

所以对于`myObject.sayHello`，`this`会的`myObject`。

对于简单的调用`sayHello`，你实际做的是调用`window.sayHello`，所以`this`设置为`window`。

# debian - 如何在控制脚本中获取当前安装的 debian 文件的完整路径？

> ID：15699194
> 
> 赞同：2
> 
> 时间：2013-03-29T07:32:07.430
> 
> 标签：debian, deb

我想在debian的控制文件中添加一个显示当前安装debian文件的md5sum的功能：preinst，有没有办法获得debian文件的完整路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:55:23.420

这将是困难的。

Dpkg 不会通过环境变量或其他方式以任何方式将当前安装文件的名称导出到维护者脚本，并且在维护者脚本运行时，它甚至不再具有原始 .deb 文件的句柄，所以即使`/proc/$pid`检查也行不通。您可以通过在 apt 的缓存目录（配置项`Dir::Cache`，通常是`/var/cache/apt/`）中查找名称类似于

```
${DPKG_MAINTSCRIPT_PACKAGE}_packageversion_${DPKG_MAINTSCRIPT_ARCH}.deb 
```

..您在构建时对当前包版本进行硬编码，省略任何纪元字段，因为 dpkg 也不会在 preinst 中为您提供。如果您使用 APT 安装，这将在很多时候起作用；如果你使用`dpkg -i`或其他东西，你就不走运了。

一个更好的答案可能是，你为什么要这样做？可能有更好的方法来解决您的问题。

# javascript - SyntaxError: JSON.parse: 使用 highcharts 时的预期属性名称或“}”

> ID：15699196
> 
> 赞同：12
> 
> 时间：2013-03-29T07:32:18.873
> 
> 标签：javascript, json, highcharts

我正在尝试使用 highcharts 实现折线图，**我想在其中为特定点着色。**

所以我使用以下语句。

```
JSON.parse("[{x: 1,y: 0},{x:2,y:5,marker:{fillColor:'red'}},{x:3,y:8}]"); 
```

将点 (2,5) 着色为红色。

但是，它显示错误为`SyntaxError: JSON.parse: expected property name or '}'`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-29T07:34:10.900

有效的 JSON 字符串***需要***引用属性名称。

这可以通过引用如下属性名称来纠正：

```
JSON.parse('[{"x": 1, "y": 0}, {"x":2, "y":5, "marker": {"fillColor":"red"}}, {"x":3, "y":8}]'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T07:50:35.653

如前所述，必须引用 JSON 对象名称。所以 JSON.parse 将只解析那个字符串，有效的 JSON。

但是，如果您出于任何原因无法更改字符串的格式，您也可以使用`eval`可以接受您的语法的函数对其进行解析。但**要小心**！这是一个很好的利用方式。

# java - 仅运行特定功能，首先开始一些测试

> ID：15699198
> 
> 赞同：0
> 
> 时间：2013-03-29T07:32:29.723
> 
> 标签：java, automated-tests, selenium-webdriver, thucydides

我有一些问题：

1.  我的测试中有一些功能，还有一些类，如 NavigationTest、AuthorizationTest 等。在我的需求类中，我有以下内容：

    @特征

    公共类导航{}

    @特征

    公共类授权{}

    我只想运行特定功能，例如导航。怎么做？我知道我可以在每次测试之前将@Ignore 放在 AuthorizationTest 中，但是我有很多测试，这不是一个好的解决方案。还有其他方法可以仅运行特定功能吗？

2.  如何设置我的一些测试首先开始（在其他测试之前）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T00:42:43.390

这已在修昔底德 0.9.116 中实现。

添加 -Dtags=feature:someFeature 或 -Dtags=myTag:value,otherTag:value 以仅运行带有一个或多个标签的那些测试。

这是具体的提交： [https ://github.com/thucydides-webtests/thucydides/commit/79634f5d30e8ae6affcdadc329d2bb67f061daff](https://github.com/thucydides-webtests/thucydides/commit/79634f5d30e8ae6affcdadc329d2bb67f061daff)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:59:58.213

[护目镜组](https://groups.google.com/forum/?fromgroups=#!topic/thucydides-users/TsaIr-wxgpQ)对此主题进行了讨论

功能请求已创建。

# c# - 从 app.config 获取 ConnectionString

> ID：15699202
> 
> 赞同：0
> 
> 时间：2013-03-29T07:33:00.460
> 
> 标签：c#, connection-string, app-config

我有一个 Web 项目，它调用一个库项目 (DataAccess) 从数据库中检索一些数据。我在 DataAccess 项目中添加了一个 App.config 文件（添加 -> 新项目 -> 应用程序配置文件），并添加了一个如下所示的 connectionString 部分：

```
<configuration>
  <connectionStrings>
    <add name="local"
        connectionString="Data Source=.\sql2008;Initial Catalog=myDB;Integrated Security=True"
        providerName="System.Data.SqlClient" />
  </connectionStrings>
</configuration> 
```

在 DataAccess 项目中，我有 BuildConnection 方法：

```
internal static SqlConnection BuildConnection()
{
    string connectionString = ConfigurationManager.ConnectionStrings["local"].ToString();
    return new SqlConnection(connectionString);
} 
```

当我从 Web 项目调用该方法时，它会抛出一个空异常，抱怨“本地”连接字符串不存在。在调试了一段时间后，我在 Web 项目的 Web.config 中添加了相同的连接字符串，现在它可以正常工作了。但问题是我想将 DataAccess 项目与 Web 项目隔离开来，换句话说，我希望 DataAccess 项目**使用它自己的 app.config 文件**，无论谁调用它。这甚至可能吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:45:57.233

在运行时，只有一个配置文件。所以只考虑活动项目的配置文件。此外，您不能将类库项目作为活动/启动项目，即

假设您的解决方案中有 4 个项目，每个项目都有一个配置文件，那么当您运行应用程序时，只会识别活动项目（即您的启动项目）的配置文件。

现在你能做什么？

1.  如果您只想隔离配置文件的各个部分，那么您可以在每个项目中都有配置文件，而这些配置文件又在主项目配置中被引用，即

    **网络配置：**

    ```
    <?xml version="1.0" encoding="utf-8" ?>
    <configuration>
       <appSettings file="YourSettings.config">
          <add key="KeyToOverride" value="Original" />
          <add key="KeyToNotOverride" value="Standard" />
       </appSettings>
       <system.web>
            <!-- standard web settings go here -->
       </system.web> 
    ```

    **你的设置.config：**

    ```
    <appSettings>
       <add key="KeyToOverride" value="Overridden" />
      <add key="KeyToBeAdded" value="EntirelyNew" />
    </appSettings> 
    ```

    [在此处](http://weblogs.asp.net/pwilson/archive/2003/04/09/5261.aspx)阅读更多信息

2.  如果您想为您的活动项目本身提供单独的配置文件，那么这完全是另外一回事。这是一种丑陋的调整，但[在这里阅读](http://www.hanselman.com/blog/ManagingMultipleConfigurationFileEnvironmentsWithPreBuildEvents.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:47:22.563

在应用程序中使用时会使用 app.config。对于使用应用程序配置文件的库项目没有帮助。即使你把它放在参考库中，代码也将在 Web 服务器中。所以这种类型的隔离对任何安全问题都没有意义。

但是将东西放在正确的位置的方法是正确的，问题是当您引用 dll 时，它不包含 dll 项目的配置。

如果你想要更多:) 只需在你的 lib 项目中阅读 app.config 并使用代码生成器创建一个连接字符串对象，例如 public static string ConnectionString = $GeneratedCode$;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T08:31:53.367

是的，这是可能的。

你的 app.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="foo" value="bar"/>
  </appSettings>
</configuration> 
```

您的数据访问层：

```
namespace MyApp.DataAccess
{
    public class DB
    {
        public string cfg;
        public DB()
        {
            var asmName = System.Reflection.Assembly.GetAssembly(this.GetType()).GetName().Name;
            var asmPath = System.Web.HttpContext.Current.Server.MapPath(@"bin\" + asmName + ".dll");
            var cm = ConfigurationManager.OpenExeConfiguration(asmPath);
            this.cfg = cm.AppSettings.Settings["foo"].Value;
        }
    }
} 
```

以下是如何使用它：

```
namespace MyApp.WebApp
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            var db = new MyApp.DataAccess.DB();
            Response.Write(db.cfg);
        }
    }
} 
```

当您编译数据访问项目时，它会`MyApp.DataAccess.dll.config`从您的`app.config`内容中生成一个。`MyApp.DataAccess.dll.config`将and添加`MyApp.DataAccess.dll`到您的 Web 应用项目并确保标记`Copy To Output Directory`为`Copy if newer`for `MyApp.DataAccess.dll.config`。

# xml - 如何从 xml 中检索特定的元素值？

> ID：15699220
> 
> 赞同：0
> 
> 时间：2013-03-29T07:34:39.413
> 
> 标签：xml, xmlnode

```
<ROOT>
 <ECERT O_CRP="10" O_ORD="234567" O_CUS="34567" C_ORD_TYP="cg" O_GFCT="864695"  O_GFCT_CARD="1234567891234567890" *A_GFCT_RFD*="0.0000" D_ORD_PLC="2013-03-27 01:23:05:000" C_ORD_CAT="G" O_FNR_TEAM_MBR_VDR_ID="10000" O_FNR_CMPN_VDR_ID="20000" /> 
 <ECERT O_CRP="10" O_ORD="234568" O_CUS="34568" C_ORD_TYP="CG" O_GFCT="864696" O_GFCT_CARD="1234567891234567891" *A_GFCT_RFD*="0.0000" D_ORD_PLC="2013-03-27 01:31:31:000" C_ORD_CAT="G" O_FNR_TEAM_MBR_VDR_ID="10001" O_FNR_CMPN_VDR_ID="20001" /> 
</ROOT> 
```

我的 xml 将是这样的，我从数据表中获得，现在我需要从这个 xml 读取“A_GFCT_RFD”到十进制变量。我尝试使用 Xelement，但它返回 null。
谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:03:51.833

`*`属性名称 ( ) 中的星号 ( `*A_GFCT_RFD*`) 可能是问题的一部分。Asterisk 在 XPath 表达式中用作通配符。[Xpath 规范](http://www.w3.org/TR/xpath-full-text-10/)建议您可以使用反斜杠 ( )`\`来转义星号。

**更新**

换句话说，尝试一个看起来像`/ROOT/ECERT@\*A_GFCT_RFD\*`.

# python - 在 Django 开发中提供静态文件时是否可以打开目录索引？

> ID：15699225
> 
> 赞同：0
> 
> 时间：2013-03-29T07:34:51.737
> 
> 标签：python, django

按照建议，我目前正在使用`staticfiles_urlpatterns`为开发中的静态文件提供服务，但是对于我正在使用的特定应用程序，我在静态文件上得到 404，但不知道为什么...打开所有静态文件的目录索引如果可能的话会很酷。我注意到为某些类型的静态文件提供服务的[“show_indexes”选项](https://docs.djangoproject.com/en/1.5/howto/static-files/#django.views.static.serve)。是否可以编写我的仅调试 url conf 以使我在开发中的静态文件全面启用此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:34:10.093

像这样的东西应该可以工作（更新为使用 STATIC_ROOT）：

```
if settings.DEBUG:
    urlpatterns += patterns('',
        url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
            'document_root': settings.MEDIA_ROOT,
            'show_indexes': True,
        }),
   ) 
```

# filemaker - 如何在 FileMaker 中查找字符串中存在的特殊字符

> ID：15699226
> 
> 赞同：0
> 
> 时间：2013-03-29T07:34:52.353
> 
> 标签：filemaker

当字符串包含特殊字符时，如何在 FileMaker 脚本中查找。

例如我们有 ABC$XYZ 然后在脚本中我们只需要找到像 A 到 Z 或 a 到 z 或 0 到 1 这样的字符存在或任何其他字符也存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:37:36.727

与 Length 函数结合使用的 Filter 函数应该可以用来确定是否存在其他字符，例如：

```
Let ( [
    originalString = "ABC$XYZ";
    originalStringLength = Length ( originalString );

    // all characters would need to be listed below
    filterSet = "abcd...zABCD...Z012...9";

    filteredString = Filter ( originalString ; filterSet );
    filteredStringLength = Length ( filteredString )
] ;
    If ( filteredStringLength = originalStringLength ;
        "No special characters." ;
        "Special characters." )
) 
```

但是，要找出这些字符是什么，您可能需要使用 Substitute 函数。

补充阅读：

*   过滤功能：[http ://www.filemaker.com/12help/html/func_ref3.33.52.html](http://www.filemaker.com/12help/html/func_ref3.33.52.html)
*   替代功能：[http ://www.filemaker.com/12help/html/func_ref3.33.88.html#1031764](http://www.filemaker.com/12help/html/func_ref3.33.88.html#1031764)

# perl - 为什么 Perl 的 chomp 没有做我想做的事？

> ID：15699227
> 
> 赞同：-2
> 
> 时间：2013-03-29T07:34:53.323
> 
> 标签：perl

我正在接收某个进程的输出（如下`@result_listosp`所示）。当我尝试 chomp 输出时很奇怪。我想要以下输出：

```
origin-server-pool-1    http_TestABC    https_TestABC 
```

代码：

```
use strict;
use warnings;

my @result_listosp = (  # From backticks
   "origin-server-pool-1\n",
   "http_TestABC   \n",
   "https_TestABC\n",
);
chomp @result_listosp; 
```

输出：

```
origin-server-pool-1http_TestABC   https_TestABC 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T07:47:23.610

我不确定您认为[`chomp`](http://perldoc.perl.org/functions/chomp.html)应该做什么，但不是要添加空格？！

它也不会删除尾随空格。如果要删除尾随空格（包括换行符），请使用以下内容而不是`chomp(@result_listosp)`：

```
s/\s+\z// for @result_listosp; 
```

至于在元素之间添加空格，您可以使用

```
print(join(' ', @result_listosp), "\n"); 
```

甚至只是

```
print("@result_listosp\n"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T09:49:39.630

该函数`chomp`仅删除行`\n`尾的换行符（在本例中）。

如果你想*修剪*（从末端删除空格），你可以这样做：

```
#!/usr/bin/perl
use strict;
use warnings;

sub trim_elements {
    for my $i (@_) {
        $i =~ s/^\s+|\s+$//g;
    }
}

my @result_listosp = (  # From backticks
   "origin-server-pool-1\n",
   "http_TestABC   \n",
   "https_TestABC\n",
);

trim_elements @result_listosp;

for my $i (@result_listosp) {
    print $i;
} 
```

如您所见，我没有使用括号。这只有效，因为 sub 在调用之前声明。如果在代码之后声明 sub，则需要使用括号。

弗朗西斯科

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T07:47:31.623

如果每行都有换行符并且想要删除它们，请使用 chomp。如果你想用一个空格连接字符串，那么使用join：

```
my @result_listosp = (  # From backticks
   "origin-server-pool-1\n",
   "http_TestABC   \n",
   "https_TestABC\n",
);
print join (" ", map { /^\s*(.*?)\s*$/ } @result_listosp), "\n"; 
```

**输出**

```
origin-server-pool-1 http_TestABC https_TestABC 
```

# iphone - 无法在 iOS 中更改原型单元格的标签

> ID：15699228
> 
> 赞同：0
> 
> 时间：2013-03-29T07:34:53.693
> 
> 标签：iphone, ios, objective-c, xcode, cell

我有一个带标签的原型单元

```
@property (nonatomic, strong) IBOutlet UILabel *itemName; 
```

在 ECOMAdmPanelViewCell 类中声明，并且在身份检查器中为单元格设置了该类。出口 itemName - Label 已创建。

在这个函数中

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"admPanelCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    if (cell == nil)
        cell = [[ECOMAdmPanelViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    cell.itemName.text = [items objectAtIndex:indexPath.row];

    // Configure the cell...

    return cell;
} 
```

我在“UITableViewCell”类型的对象上找不到错误消息属性“itemName”。谁能告诉我怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:37:05.693

试试这个

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"admPanelCell";
    ECOMAdmPanelViewCell *cell = (ECOMAdmPanelViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    if (cell == nil)
        cell = [[ECOMAdmPanelViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    cell.itemName.text = [items objectAtIndex:indexPath.row];

    // Configure the cell...

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T07:40:58.530

或使用这个：

```
(ECOMAdmPanelViewCell *)cell.itemName 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T07:42:30.967

改变你的这一行

```
 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; 
```

有了这个

```
 ECOMAdmPanelViewCell *cell = (ECOMAdmPanelViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; 
```

# hibernate - Hibernate：实体版本号

> ID：15699229
> 
> 赞同：1
> 
> 时间：2013-03-29T07:34:57.120
> 
> 标签：hibernate, version

我有一个实体*e1*并创建一个新实体*e2*。我愿意：

```
E2 e2 = new E2();
e2.setE1(e1);
save(e2); 
```

*e2*在数据库中正确创建，但即使*e1*本身没有更改， *e1的版本号也会增加。*这是正确的行为还是在我的 equals 方法之类的地方有问题？

# objective-c - 声明实例变量的最佳方法

> ID：15699231
> 
> 赞同：-1
> 
> 时间：2013-03-29T07:34:57.993
> 
> 标签：objective-c, variables, properties, nsstring, synthesize

我只将一个变量（即 NSString）声明为@property 和@synthesize，我从未在接口类中声明它，示例如下：

.h 文件：

```
@interface myViewController : UIViewController {
}

@property (nonatomic,retain) NSString *text; 
```

它对我来说很好，所以我应该在 myViewController 类中声明它吗？为什么？

PS ARC 已启用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:44:56.820

声明变量而不是属性没有具体原因（声明两者都是无用的）。

我倾向于像你一样只声明属性，因为我认为直接在实现中操作实例变量的坏习惯（像`init`方法这样的罕见例外）并且我喜欢使用 getter 和 setter。

此外，属性具有在行为方面易于定制的巨大优势：处理线程安全、可见性和内存管理只是几个关键字的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:48:40.190

你的意思是在 .m 文件的接口部分？

UIViewController .m 文件的 interface 部分声明的属性仅供私人使用，您不能从其他类访问它，而 .h 文件的 interface 部分中声明的属性是类属性，可以从类中访问.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T08:36:10.943

很久以前，你应该这样做：

```
@interface myViewController : UIViewController {
    NSString *_text;
}

@property (nonatomic,retain) NSString *text;

@synthesize text = _text; 
```

但现在，你可以代替它：

```
@interface myViewController : UIViewController {
}

@property (nonatomic,retain) NSString *text; 
```

同样的，IDE 为你做这件事，而 Xcode4.5 的 @synthesize 属性也为你做。没有人可以告诉您应该采用哪种方式，但可以清楚地知道您想对您的代码做什么，然后用它做任何事情。

# itext - 段落开头定位itext

> ID：15699235
> 
> 赞同：0
> 
> 时间：2013-03-29T07:35:15.343
> 
> 标签：itext

我正在使用**IText**库。我在其中使用**段落**，因为文本正在运行并且可能大于一页。我的问题是我必须给段落起始定位，我看不到任何关于定位它的方法。有什么帮助吗？类似的东西 ![在此处输入图像描述](../Images/6ae50ca2dffce386d95d2ede0c684d5c.png)

第 2 页是新页面....这是整段。我有段落的起始坐标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T09:52:49.207

如评论部分所述，您需要`ColumnText`实现您想要的。参见例如[MovieColumns1](http://itextpdf.com/examples/iia.php?id=64)示例。您可以使用该方法将文本添加到`ColumnText`实例`addText()`。然后设置一些参数，例如定义绝对位置的矩形的坐标。这是通过`setSimpleColumn()`方法完成的。要绘制文本，请调用该`go()`方法。如果文本不适合矩形，`ColumnText.hasMoreText(status)`将返回 true，在这种情况下，您触发`newPage()`，定义一个新矩形，更改 Y 位置，`go()`只要列包含内容。

所有这些都在我作为作者的文档中进行了解释。阅读文档可以节省时间：您的时间以及 StackOverflow 上人员的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:58:54.010

您可以尝试搜索第一次出现的换行符或回车符，即：Chr(13) 和 Chr(20)。

# php - if elseif 条件

> ID：15699239
> 
> 赞同：0
> 
> 时间：2013-03-29T07:35:30.073
> 
> 标签：php

我想通过使用 while 循环和 if 条件来显示一系列输出，但这里 if 条件仅适用，而 elseif 和 else 等其他条件不起作用。请帮我。

这是我的代码

```
 if($expid=='3606' OR '3660' OR '3661' OR '3662' OR '3684' OR '3685')
    { 
        $exp='1';
    }
    elseif($expid=='3607' OR '3608' OR '3612' OR '3620' OR '3621' OR '3622' OR '3623' OR '3624' OR '3625' OR '3626' OR '3636' OR '3646' OR '3647' OR '3648' OR '3649' OR '3650' OR '3651' OR '3652' OR '3653' OR '3654' OR '3655' OR '3656' OR '3657' OR '3658' OR '3659' OR '3605')
    {
        $exp='2';
    }
    elseif($expid=='3609' OR '3610' OR '3611' OR '3613' OR '3614' OR '3615' OR '3616' OR '3617' OR '3618'  OR '3619' OR '3627' OR '3628' OR '3629' OR '3630' OR '3631' OR '3632' OR '3633' OR '3634' OR '3635' OR '3637' OR '3638' OR '3639' OR '3640' OR '3641' OR '3642' OR '3643' OR '3645')
    {
        $exp='3';
    }
    elseif($expid=='3666' OR '3667' OR '3668' OR '3669' OR '3670' OR '3671' OR '3672' OR '3673' OR '3674' OR '3675' OR '3676' OR '3677' OR '3678' OR '3679' OR '3680' OR '3681' OR '3682' OR '3683')
    {
        $exp='4';
    }
    else{
        $exp='5';
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:39:26.983

因为你做错了。只需使用[in_array](http://php.net/manual/en/function.in-array.php)代替，以避免混淆。

```
if(in_array($expid,array('3606','3660','3661','3662','3684','3685')))
{ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:38:19.940

`$expid=='3606' OR '3660' OR '3661' OR '3662' OR '3684' OR '3685'`将始终是`true`因为`'3660'`被评估为真。

但是您可能需要重新考虑您的逻辑，而不是对这些数字进行硬编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T07:38:42.543

```
if($expid=='3606' || $expid=='3660' || $expid=='3661' || $expid=='3662' || $expid=='3684' || $expid=='3685')
    { 
        $exp='1';
    } 
```

像这样你已经评估每个表达式以返回 true 或 false

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T07:40:13.360

你需要做这样的事情。您的 OR 语句只是一个字符串。“3660”永远是真的。您必须执行 $expid==3660，所有其他 OR 子句也是如此。

`if($expid=='3606' OR '$expid==3660' OR $expid=='3661' OR $expid=='3662' OR '$expid==3684' OR $expid=='3685')`

# ruby-on-rails - 解析大型 XML 文件时出现“分配内存失败”

> ID：15699243
> 
> 赞同：2
> 
> 时间：2013-03-29T07:36:07.743
> 
> 标签：ruby-on-rails, ruby, nokogiri

在使用 Nokogiri 解析它时，我一直面临“无法分配内存”的问题。为此，我编写了以下代码。

```
require 'open-uri'
require 'nokogiri'
f = File.open("/my_pplications/XML/one.xml")
doc = Nokogiri::XML(f)    
stack = Hash.new
doc.children.each do |x|  
  x.children.each do |sx|
   sx.children.each do |v|      
     stack[v.name] = v.text      
   end 
  end 
end 
```

在这里，如果`one.xml`文件`smaller`大小，我可以解析并获取所有内容。但如果该文件是`too large(more than 700MB)`，我会收到类似的错误`"[FATAL] failed to allocate memory"`。那么如何解析完整的大型 XML 文件。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T09:03:15.777

Nokogiri::XML 构建整个文档的内存表示，因此比文档的磁盘大小占用更多的内存。然后很容易遍历它并使用 xpath 或 css 查询。

另一种方法是使用 nokogiri 的 SAX 解析器。sax 解析器几乎没有任何内存开销，因为它没有将整个文档存储在内存中：它只是遍历文档，告诉您提供的对象有趣的事件，例如标签 foo 已经开始，我找到了一些文本，foo 标签有关闭等

一般来说，使用它而不是使用更高级别的接口需要做更多的工作，但是您可以通过这种方式吞噬巨大的 XML 文件

# android - 无法在我的 Android 应用中访问默认联系人图片

> ID：15699245
> 
> 赞同：1
> 
> 时间：2013-03-29T07:36:14.077
> 
> 标签：android, image, android-contacts

我正在为 android 创建一个联系人应用程序，我已经成功创建了联系人的列表视图，并且还检索了联系人图像（对于那些有图像的联系人），并且没有任何图像的联系人显示没有任何图像任何图像。我需要使用默认联系人剪影图像显示没有任何图像的联系人。这是代码

```
private void populateContactList() {
        // TODO Auto-generated method stub
        // Build adapter with contact entries
        Cursor cursor = getContacts();
        String[] fields = new String[] { ContactsContract.Data.DISPLAY_NAME,
                ContactsContract.Data.PHOTO_THUMBNAIL_URI };
        adapter = new SimpleCursorAdapter(this, R.layout.contactentrylayout,
                cursor, fields, new int[] { R.id.contactEntryText,
                        R.id.contactimageentry });
        mContactList.setAdapter(adapter);
    }

    @SuppressWarnings("deprecation")
    private Cursor getContacts() {
        // TODO Auto-generated method stub
        // Run query
        Uri uri = ContactsContract.Contacts.CONTENT_URI;
        String[] projection = new String[] { ContactsContract.Contacts._ID,
                ContactsContract.Contacts.DISPLAY_NAME,
                ContactsContract.Data.PHOTO_THUMBNAIL_URI };
        // String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP +
        // " = '"
        // + (mShowInvisible ? "0" : "1") + "'";
        String selection = ContactsContract.Contacts.DISPLAY_NAME
                + " LIKE ? OR "
                + ContactsContract.Contacts.DISPLAY_NAME_ALTERNATIVE
                + " LIKE ?";
        String[] selectionArgs = { etquery.getText().toString() + "%",
                etquery.getText().toString() + "%" };
        String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
                + " COLLATE LOCALIZED ASC";

        return managedQuery(uri, projection, selection, selectionArgs,
                sortOrder);
    } 
```

# c# - Url.Action 和两个变量

> ID：15699246
> 
> 赞同：2
> 
> 时间：2013-03-29T07:36:15.303
> 
> 标签：c#, asp.net-mvc-3

我有 `@Html.PagedListPager(Model, page => Url.Action("GetTabData", new { page })`

在我的 js 文件中，我已经准备好使用`myTab`我需要与上面示例中的页面一起发送的变量。

我怎样才能做到这一点？

更新：我正在使用 js 变量来确定用户单击哪个选项卡，并根据该值查询数据。现在我已经实现了使用上面生成的链接的分页。有了这个，我发送 activeTab 的 ajax 调用被破坏了，我需要将此值与 Url.Action 上方的页面一起发送。

这是我用来通过 ajax 发送以确定用户单击哪个选项卡的 js 变量

```
$(function () {
    var activeTab = null;
    $('#tabs .tabLink').click(function (event) {
        var activeTab = $(this).attr('href').split('-')[1];
        GetTabData(activeTab);        
    });
    GetTabData(ommitted on purpse)

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:20:20.983

I don't get the question clearly, but I am taking a guess here. Don't know if this is what you are looking for.

Note - You have `GetTabData` in both your javascript as well as cshtml code, I am hoping this is just coincidence, because the js function cannot be invoked via `@Url.Action` in this manner.

If you need to send two values as part of your URL, you could do it either in a RESTful way or have querystrings.

Option 1 -

```
Url.Action("GetTabData", new { page=2, tab="blah" }) 
```

Your corresponding controller action would look like

```
public ActionResult GetTabData(int page, string tab)
{
...
} 
```

Option 2 - create a querystring and append it to the URL

```
/GetTabData?page=2&tab=blah 
```

In this case the controller action would look like this

```
public ActionResult GetTabData()
{
    var params = Request.QueryString;
...
} 
```

# c# - 以正确的方式实现 wcf 服务

> ID：15699247
> 
> 赞同：2
> 
> 时间：2013-03-29T07:36:24.730
> 
> 标签：c#, wcf

嗨，我刚刚学习 WCF，我正在尝试在我正在从事的虚拟项目上实现 WCF 服务，我希望这样做是正确的。

我的项目包含一个 DataAccess 项目，该项目具有一个实体框架存储库，可用于访问数据库中的数据。模型和接口如下所示：

```
public partial class BookModel
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Author { get; set; }
    public string Description { get; set; }
    public DateTime PublicationDate { get; set; }
    public int CategoryId { get; set; }
    public decimal Price { get; set; }
    public string BookUrl { get; set; }
}

public interface IBookRepository
{
    IEnumerable<BookModel> GetBooks(int pageNumber, int numberOfBooksOnPage);
    IEnumerable<BookModel> GetBookByCategory(int categoryId, int pageNumber, int numberOfBooksOnPage);
    BookModel GetBookById(int bookId);
    int CountBooks();
    int CountBooksByCategory(int categoryId);
    void AddBook(BookModel book);
    void UpdateBook(BookModel book);
    void DeleteBook(int bookId);
} 
```

现在，当我实现 wcf 服务时，我必须定义服务合同和数据合同。问题是这两个是我当前模型和存储库的完全相同的副本，所以我不确定该怎么做。

这是我到目前为止所拥有的，但我不确定这是正确的方法：

```
[DataContract]
public class Book
{
    [DataMember]
    public int Id { get; set; }

    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public string Author { get; set; }

    [DataMember]
    public string Description { get; set; }

    [DataMember]
    public DateTime PublicationDate { get; set; }

    [DataMember]
    public int CategoryId { get; set; }

    [DataMember]
    public decimal Price { get; set; }

    [DataMember]
    public string BookUrl { get; set; }
}

[ServiceContract]
interface IBookService
{
    [OperationContract]
    IEnumerable<Book> GetBooks(int pageNumber, int numberOfBooksOnPage);

    [OperationContract]
    IEnumerable<Book> GetBookByCategory(int categoryId, int pageNumber, int numberOfBooksOnPage);

    [OperationContract]
    Book GetBookById(int bookId);

    [OperationContract]
    int CountBooks();

    [OperationContract]
    int CountBooksByCategory(int categoryId);

    [OperationContract]
    void AddBook(Book book);

    [OperationContract]
    void UpdateBook(Book book);

    [OperationContract]
    void DeleteBook(int bookId);
} 
```

将模型和存储库移动到 wcf 服务中是一个好主意吗？

或者我应该在我的 wcf 项目中为这两个类创建重复项，只从存储库中调用方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:19:11.440

好吧，您应该了解一件事，实现您的 WCF 服务 - 它仅在您的客户端和服务之间以消息的形式发送**数据，而****不是您的类和接口的实现**，您应该在开始使用服务之前对其进行描述。要正确设置它，您必须**a**）在服务器端创建 ServiceContract **b**）在客户端合并它。完成此操作后，您的服务将知道如何将合同实例的数据放入服务器端的消息中，并从消息中获取此数据并在客户端创建合同实例。

如果您发送的数据是标准的 .NET 对象（可以序列化），服务器和客户端都将知道它的结构，并且能够使用它。但如果它是您自己的类 - 您必须将其设为 DataContract，以便客户端了解如何从消息中创建此类的实例。

所以，是的，如果您在 ServiceContract 方法中使用 Book 类，它应该被标记为 DataContract。但是你不必创建它的副本。您的服务只需看到它，并且必须使用 [DataContract] 属性对其进行标记。通过这样做，当您创建从客户端到您的服务的引用时，例如通过 svcutil，它将在您的客户端创建相同的 Book 类。此类的结构将遵循您的数据合同及其数据成员。

# java - 在Java中的内存数据库算法/设计/逻辑中

> ID：15699255
> 
> 赞同：0
> 
> 时间：2013-03-29T07:36:47.503
> 
> 标签：java, database-design, indexing

问题陈述如下，假设是用java做的，

我有集合，`Person`类的arrayList，即

```
List<Person> lisOfPersons = new ArrayList<Person>(); 
```

人在哪里，

```
public class Person{
    int age;
    String name;
    //constuctor and setters and getters
} 
```

现在，我想将其用作我的缓存并围绕此集合创建一个库或包装实用程序。该实用程序应该具有/提供/公开三个方法/ API `findByName`、、、`findByAge`。`findByAgeAndName`

每次迭代集合都不是什么事情。我期待类似/围绕索引和重新排列数据`HashMap`或堆或树中的数据。但是在这里我需要至少为每种方法创建三个索引。其他选择，这就是你在这里的原因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:39:25.323

您可以使用`Map<Integer, List<Person>>`和`Map<String, List<Person>>`进行快速搜索。

请记住，对象不会被复制到映射中，您只是使用引用，因此没有*太多*的内存开销。

至于 AgeAndName 搜索，`Collection.retainAll()`一旦从这两个地图中获得结果，您就可以使用函数。请记住克隆集合，因为保留原地工作。

```
 Set<Person> unique = new Set<Person> ( mapName.get("name") );
  unique.retainAll( mapAge.get(11) );
  return unique; 
```

# javascript - 在浏览器上解码 AES256 加密和 base64 编码字符串时出现“未捕获的错误：InvalidCharacterError：DOM 异常 5”

> ID：15699259
> 
> 赞同：0
> 
> 时间：2013-03-29T07:37:18.020
> 
> 标签：javascript, ruby-on-rails, ruby, base64, aes

起初，通过 ruby​​（我使用的是 Rails），我在服务器端制作了**AES256**加密和**base64编码的字符串。**

```
require 'aes'

# encrypt with AES256 and encode with base64
base64 = AES.encrypt("secret word", "pass") 
```

然后，我想在浏览器上使用以下库**对此进行解码。**

*   Base64：[https ://github.com/dankogai/js-base64](https://github.com/dankogai/js-base64)
*   CryptoJS：[https ://code.google.com/p/crypto-js/](https://code.google.com/p/crypto-js/)

我的 JavaScript 代码如下。

```
base64encoded = $('span.base64:first').text();
encrypted = Base64.decode(base64encoded); // <- bring Error!
secretWord = CryptoJS.AES.decrypt(encrypted, "todo").toString(CryptoJS.enc.Utf8); 
```

错误是：`Uncaught Error: InvalidCharacterError: DOM Exception 5`

我想在服务器端加密时会生成一些浏览器的无效字符。请告诉我如何避免这个错误。

# ruby-on-rails - 如何在 cancan 的能力模型中定义以允许用户编辑具有关系的值？

> ID：15699265
> 
> 赞同：0
> 
> 时间：2013-03-29T07:37:53.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan

以下是条件

我`users`有谁属于一个`work`，同样`category`属于一个`work`。

现在我希望该特定作品的用户`edit`属于该作品的类别。

如何在`ability`模型中指定它？

**编辑 ：**

```
include CanCan::Ability

def initialize(user)

user ||= User.new # guest user

user.roles.each do |role|

role.name

if role.name == "admin"

    can :read, User

    can :create, User

    can :edit, User

    can :destroy, User

end

if role.name == "staff"

         can :read, :all

         can :create, :all

        cannot :edit, Category

        can :update, :all

        can :destroy, :all

       end

    if role.name == "others"

          can :read, :all

   end   

end 

end 

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:48:34.947

在能力类中，您只传递用户。您还需要通过类别才能做到，

```
can :manage, Category if user.work_id == category.work_id 
```

或者你将不得不像这样迭代（我不推荐它），

```
can :manage, Category if user.work_id == user.work.categories.first.work_id 
```

此链接显示如何将多个参数发送到您的能力类。

[https://github.com/ryanb/cancan/wiki/Accessing-Request-Data](https://github.com/ryanb/cancan/wiki/Accessing-Request-Data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:09:06.767

未经测试，但应该这样做：

```
can :manage, Category, :work_id => user.work_id 
```

参考：[https ://github.com/ryanb/cancan/wiki/defining-abilities](https://github.com/ryanb/cancan/wiki/defining-abilities)

# javascript - 在 mootools 中使用超时

> ID：15699266
> 
> 赞同：0
> 
> 时间：2013-03-29T07:37:58.980
> 
> 标签：javascript, timeout, mootools

我尝试执行一些超时功能，这是来自类的代码：

```
while($$('.visos_prekes ul li.simple').length > 0){
    setTimeout(this.destroyByOne(), 5000);
}

destroyByOne: function(){
    $$('.visos_prekes ul li.simple').each(function(e, key){
        e.destroy();
        if(key > 16){
            return true;
        }
    });
}, 
```

但是这个函数执行没有超时。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:06:22.387

这一行`setTimeout(this.destroyByOne(), 5000);`应该是：

```
setTimeout(this.destroyByOne, 5000); 
```

因为您需要将*函数处理程序*也称为变量......而**不是**函数调用的结果（`this.destroyByOne()`）传递给它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:14:21.953

这是`setTimeout`函数的正确语法：

```
var timeoutID = window.setTimeout(func, delay, [param1, param2, ...]);
var timeoutID = window.setTimeout(code, delay); 
```

其中`func`是要在延迟毫秒后执行的函数（函数的名称），而 `code`在替代语法中，是要在延迟毫秒后执行的代码字符串！

您可以在以下任一情况下使用 setTimeout：

```
setTimeout(this.destroyByOne, 5000);
setTimeout("this.destroyByOne()", 5000); 
```

# c# - 泛型类中的多个约束在 C# 中产生了强制转换错误

> ID：15699277
> 
> 赞同：1
> 
> 时间：2013-03-29T07:38:42.233
> 
> 标签：c#, generics

我想解释一下这个问题的标题。

我有基类

```
 public class BaseClass { /* stuff */ } 
```

和其他两个继承的类`BaseClass`

```
 public class Test1: BaseClass {  ... }

  public class Test2: BaseClass { ... } 
```

好的，然后假设使用泛型类（在我的项目中它非常复杂）

```
 public GenericClass<T> : IBase<T> where T: BaseClass, Test1, Test2 
```

有时我只需要以`BaseClass`其他方式使用`Test1`或`Test2`.

我有一个功能：

```
 public int Create ( T obj){
    if( obj is Test1) { return aManager.Create((Test1)obj); } // the cast is OK
    else if(obj is Test2) { return bManager.Create((Test2)obj);}  // error cast
  } 
```

我也`aManager.Create (Test1 obj)`有`bManager.Create(Test2 obj)`

为什么`else`在行中我的演员阵容有误？

我的错误在哪里？

**PS**：如果我在和之间更改顺序`Test1`，`Test2`那么首先`if`会出现转换错误，然后`else`就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:01:13.360

就 the`Test1`和`Test2`are 类而言，这条线是不正确的。

```
public GenericClass<T> : IBase<T> where T: BaseClass, Test1, Test2 
```

因为在泛型类型约束中只允许一个基类并且它必须作为第一个约束，但是您可以将多个接口类型作为约束。[看到这个](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

要了解我的意思，`Create`像这样更改方法，您将看到错误：

```
public int Create ( T obj)
{
//if( obj is Test1) { return aManager.Create((Test1)obj); } // the cast is OK
//else if(obj is Test2) { return bManager.Create((Test2)obj);}  // error cast
    return 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:32:07.527

我认为您误解了泛型类型约束的工作原理。让我首先回答你的问题。

你实际上只需要这样的签名。

```
public GenericClass<T> : IBase<T> where T: BaseClass 
```

> 这意味着，类型 T 是派生自类型 BaseClass 或 BaseClass 本身的任何类型。

它将很好地接受 BaseClass、Test1 和 Test2 类型的任何实例。

此外，我想建议对您的代码进行改进..

```
public int Create ( T obj){
    if( obj is Test1) { return aManager.Create(obj as Test1); } // the cast is OK
    else if(obj is Test2) { return bManager.Create(obj as Test2);}  // error cast
  } 
```

However, I believe that the design of your code has some loop holes. If you could explain your context in more detail, you might get better design solutions for your problem. Since I believe this is more to do with the design than the generics as it seems you're using the wrong tool for the job.

# javascript - 将 JSON 字符串传递给 MVC 控制器在 Firefox 上不起作用

> ID：15699286
> 
> 赞同：0
> 
> 时间：2013-03-29T07:39:11.427
> 
> 标签：javascript, asp.net-mvc, json

在一个 asp.net mvc 4 web 应用程序中，我有一个剑道网格（名为 ExternalUserList），我在其中添加了一个带有复选框的自定义列，以便向选定的用户发送电子邮件。我所做的是以 json 格式将用户的数据库 ID 发送到我的 mvc 控制器。

这是我的 JavaScript 代码：

```
<script type="text/javascript">
    function sendMailToExternalUsers() {
        var ids = [];
        var proId;
        var checkBox = $('#ExternalUsersList > table > tbody > tr td:nth-child(2) > input');

        checkBox.each(function (index) {
            var $input = $(this);

            if ($input.is(':checked')) {
                var count = index + 1;
                proId = $('#ExternalUsersList > table > tbody > tr:nth-child(' + count + ') td:first-child');
                ids.push(proId[0].innerText);
            }
        })

        var postData = JSON.stringify(ids);

        $.ajax({
            type: "POST",
            url: "/ExternalUser/SendEmailToExternalUsers/",
            data: postData,
            dataType: "json",
            contentType: "application/json",
            traditional: true
        });
    }
</script> 
```

这是我的控制器：

```
[HttpPost]
public EmptyResult SendEmailToExternalUsers(List<string> ids)
{
   //Here i do some processing
} 
```

以上所有代码在 Internet Explorer 和 Chrome 中都可以正常工作，但在 Firefox 上却不行。事实上，如果我从 kendo 网格中选择了 3 个用户，Visual Studio 调试器会显示 ids`List<string>`有 3 个元素，但值为空。在 IE 和 Chrome 中的值是完全正确的。

那么它有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:48:25.067

这很可能与您的客户端代码有关。我猜是这条线

```
ids.push(proId[0].innerText); 
```

尝试使用 Firebug 对其进行调试，以查看返回的内容。您可能还想使用 jQuery 的方法`.text()`或`.html()`取决于您感兴趣的内容。

# selenium - 如何通过 Selenium WebDriver 将数据附加到 .xls 文件

> ID：15699287
> 
> 赞同：1
> 
> 时间：2013-03-29T07:39:11.780
> 
> 标签：selenium, selenium-webdriver, jxls

我想将数据附加到 TestData.xls。TestData.xls 已经包含我的脚本的数据。我正在程序中读取这些数据，对其进行处理，结果通过/失败取决于此处理。我想将此结果写回我尝试过的 TestData.xls 中的下一列，如下所示，

```
for(int i=0;i<rows-1;i++)
        {
        WritableWorkbook wkb = Workbook.createWorkbook(new File("E://Testing//testing  Tools//Selenium//TestData//TestData.xls"));
        WritableSheet sh = wkb.createSheet("Agent",0);
        WritableFont f = new WritableFont(WritableFont.ARIAL);
        WritableCellFormat cf = new WritableCellFormat(f);
        sh.addCell(new Label(0,i+1,"Pass",cf));
        wkb.write();
        wkb.close();
        } 
```

但它会删除以前在 TestData.xls 中可用的所有数据然后我尝试作为 TestData1.xls 但数据没有写入正确的位置并且它是部分的。

现在我想将数据附加到 TestData.xls 的下一个可用列而不删除以前的数据。

请告诉我如何通过 Selenium Webdriver 追加数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:20:15.783

对于这个问题的初学者：这与 Selenium WebDriver 无关。

您正在尝试将值插入 xls 中的特定位置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T12:37:04.537

试试下面的代码可能对你有用。

`public static void writeReport(String readFileName, String readSheetName, String result, int row,int col) 抛出 BiffException、IOException、RowsExceededException、WriteException

```
 {

        File fileWrite = new File(readFileName);

        Workbook in = Workbook.getWorkbook(fileWrite);

        WritableWorkbook writable_workbook = Workbook.createWorkbook(fileWrite, in);

        WritableSheet writable_sheet = writable_workbook.getSheet(readSheetName);

        writable_sheet.addCell(new Label(col, row , result));

        writable_workbook.write();

        writable_workbook.close();

    }` 
```

# android - 状态更新时报告无效的访问令牌格式

> ID：15699288
> 
> 赞同：2
> 
> 时间：2013-03-29T07:39:19.140
> 
> 标签：android, twitter, oauth, social-networking

我已将**Twitter4j**集成到 Android 应用程序的状态更新中。

我可以查看 Twitter 的登录页面并提交登录信息。

但在状态更新之前，我使用以下代码获取访问令牌。

```
Share.mTwitter.setOAuthAccessToken(new AccessToken(
                accessToken, accessTokenSecret)); 
```

它在之前抛出错误`updateStatus(msg)`：-

```
Invalid access token format. 
```

# php - PayPal自动退货无法获取参数

> ID：15699289
> 
> 赞同：0
> 
> 时间：2013-03-29T07:39:19.783
> 
> 标签：php, paypal, returnurl

PayPal 文档让我头晕目眩！

我已经从某个地方复制了示例以在付款完成后设置自动退货，我创建了一个页面`success.php`来获取返回的参数，不知何故我没有成功显示这些返回的参数，Paypal 专家可以帮忙检查下面的代码有什么问题吗？

**成功.php**

```
<?php
$req = 'cmd=_notify-synch';

$tx_token = $_GET['tx'];
$auth_token = "ZgTzjTg49XZGeD54WsS";
$req .= "&tx=".$tx_token."&at=".$auth_token;

foreach($_POST as $key => $value){
    $value = urlencode(stripslashes($value));
    $req .= '&'.$key.'='.$value;
}

$header = "POST /cgi-bin/webscr HTTP/1.0\r\n";
$header .= "Host: http://www.sandbox.paypal.com\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: ".strlen($req)."\r\n\r\n";

// url for paypal sandbox
$fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);  

if(!$fp){

    // HTTP ERROR

}else{

    fputs($fp, $header . $req);
    // read the body data
    $res = '';
    $headerdone = false;

    while(!feof($fp)){
        $line = fgets ($fp, 1024);

        if(strcmp($line, '\r\n') == 0){
        // read the header
            $headerdone = true;

            }else if($headerdone){
            // header has been read. now read the contents
                $res .= $line;
            }
    }

    // parse the data
    $lines = explode('\n', $res);
    $keyarray = array();

    if(strcmp($lines[0], 'SUCCESS') == 0){

        for($i=1; $i<count($lines);$i++){
            list($key,$val) = explode('=', $lines[$i]);
            $keyarray[urldecode($key)] = urldecode($val);
        }

        // check the payment_status is Completed
        // check that txn_id has not been previously processed
        // check that receiver_email is your Primary PayPal email
        // check that payment_amount/payment_currency are correct
        // process payment
        $firstname = $keyarray['first_name'];
        $lastname = $keyarray['last_name'];
        $itemname = $keyarray['item_name'];
        $amount = $keyarray['payment_gross'];

        echo '<p><h3>Thank you for your purchase!</h3></p>';
        echo '<b>Payment Details</b><br>';
        echo '<ul>';
        echo '<li>Name: '.$firstname.' '.$lastname.'</li>';
        echo '<li>Item: '.$itemname.'</li>';
        echo '<li>Amount: '.$amount.'</li>';
        echo '</ul>';

    }else if(strcmp($lines[0], 'FAIL') == 0){
        // log for manual investigation
    }

}

fclose($fp);

?>
Your transaction has been completed, and a receipt for your purchase has been emailed to you.<br> 
```

这是自动返回的 URL：

> [http://sitename.com/success.php?tx=88L2235578117773M&st=Completed&amt=318.00&cc=USD&cm=2013-23&item_number=&sig=HzS1ku7OeDrZJVZcXta6X9jrf71vct7Spstv0%2bW7lxj%2bqRtQXBDO9pqs%2bhmzaoSGs6EDjpEFCnPwOGYzlZ1FMbyw%2fIpF6%2bVMFCNDBYuLdFTYkWaiwG70IpyEMGFFNh1aJUsn3W%2fQK6ad6HOC7%2fzccQPUebhMSqp4WBw%2bRw%2f4tw4%3d](http://sitename.com/success.php?tx=88L2235578117773M&st=Completed&amt=318.00&cc=USD&cm=2013-23&item_number=&sig=HzS1ku7OeDrZJVZcXta6X9jrf71vct7Spstv0%2bW7lxj%2bqRtQXBDO9pqs%2bhmzaoSGs6EDjpEFCnPwOGYzlZ1FMbyw%2fIpF6%2bVMFCNDBYuLdFTYkWaiwG70IpyEMGFFNh1aJUsn3W%2fQK6ad6HOC7%2fzccQPUebhMSqp4WBw%2bRw%2f4tw4%3d)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:50:37.143

我发现使用沙盒对最终测试不是很好，所以一旦你确定你的代码可以正常工作，最好先上线，然后用 1 美元的交易进行测试。

此外，您不会返回所有客户的订单详细信息，因此最好从将详细信息发送到 Paypal 之前创建的数据库记录中简单地检索订单号并填充您的收据。

为您的发票编号检索的数据将作为**Request("item_number")**

# c# - 无法用最常用的方法清除空白

> ID：15699297
> 
> 赞同：0
> 
> 时间：2013-03-29T07:39:58.160
> 
> 标签：c#, string

就是这种情况 - 我需要使用`Text`a 的属性，`ToolStripItem`并且在此之前我需要清除字符串中的所有空格。但是，我尝试了三种非常常见的（在我看来）场景，但它们都没有返回没有空格的字符串。这是我尝试过的：

```
string tempBtnText = tempItem.Text; 
```

`tempBtnText`在我使用该`Text`属性的方法中定义。我觉得这样更容易。然后我尝试了那些：

```
tempBtnText.Replace(" ", String.Empty);
tempBtnText = Regex.Replace(tempItem.Text, @"^\s*$\n", string.Empty);
string tempBtnTexts = Regex.Replace(tempItem.Text, @"\s+", ""); 
```

所有这些都以原始形式（带有空格）返回字符串。删除空格的唯一方法是使用此方法：

```
public string RemoveWhitespace(string input)
{
    return new string(input.ToCharArray()
        .Where(c => !Char.IsWhiteSpace(c))
        .ToArray());
} 
```

我在类似的帖子中找到了`SO`。但我真的不明白为什么上述所有方法都不起作用。我开始认为这与我正在使用`ToolStripItem`Text 属性这一事实有关，但正如一开始所示，我声明了我自己的字符串变量，该变量采用`Text`属性的值和。

我不知道。有人可以告诉我，这种行为的原因是什么。并不是说使用另一种方法来清除空白有那么大的问题，但是不工作的选项更加紧凑和可读，如果可能的话，我想使用其中一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T07:42:27.017

[字符串是不可变的](http://msdn.microsoft.com/en-us/library/vstudio/362314fe.aspx)，这意味着任何操作都会产生一个新实例，因此您需要将任何方法结果分配回输入：

```
string input = "...";
intput = intput.Replace(x, y); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T07:43:33.940

您没有将结果分配回`tempBtnText`

```
tempBtnText.Replace(" ", String.Empty); 
```

它应该是：

```
tempBtnText = tempBtnText.Replace(" ", String.Empty); 
```

字符串是[不可变](http://en.wikipedia.org/wiki/Immutable_object)的，`string.Replace`返回一个新字符串，它不会修改现有字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T07:45:05.903

abatischev 是对的，所以写作

```
tempBtnText = tempBtnText.Replace(" ", String.Empty); 
```

应该解决你的问题。如果您只想删除前后的空白，请使用：

```
tempBtnText = tempBtnText.Trim(); 
```

# android - Android：编辑图像意图

> ID：15699299
> 
> 赞同：7
> 
> 时间：2013-03-29T07:40:09.550
> 
> 标签：android, android-camera

我发现了很多关于如何裁剪图像的问题。但是，有没有办法通过一个意图来启动编辑图像活动。我试过了，`com.android.camera.action.EDIT`但它不起作用。我想要做的是当我点击一个按钮时，启动编辑图像的活动，如下图所示：

![在此处输入图像描述](../Images/c81c72c6d7f72de51455690c6441d881.png)

就像我从图库中打开图像并`Edit`从菜单中单击一样。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-30T22:39:05.650

```
Intent editIntent = new Intent(Intent.ACTION_EDIT);
editIntent.setDataAndType(uri, "image/*");
editIntent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
startActivity(Intent.createChooser(editIntent, null)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T07:44:30.673

```
 Intent intent = new Intent("com.android.camera.action.CROP");
        intent.setDataAndType(yourimageuri, "image/*");
        intent.putExtra("crop", "true");
        intent.putExtra("aspectX", 1);
        intent.putExtra("aspectY", 1);
        intent.putExtra("outputX", 640);
        intent.putExtra("outputY", 640);
        intent.putExtra("scale", true);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, outPath);
        intent.putExtra("return-data", false);
        intent.putExtra("outputFormat", Bitmap.CompressFormat.JPEG.toString());
        intent.putExtra("noFaceDetection", true);
        startActivityForResult(intent, CAMERA_CROP_RESULT); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T07:23:07.717

找到了一个可以用于此的库，并且运行良好。图书馆可以在[这里](https://github.com/lvillani/android-cropimage)找到。

# php - 在 PHP 中将 MySQL 数据导出到 Excel

> ID：15699301
> 
> 赞同：41
> 
> 时间：2013-03-29T07:40:15.050
> 
> 标签：php, mysql, excel, export

我正在尝试将我的 MySQL 数据转换为 Excel 文件，但我遇到了 Excel 单元格的问题。我所有的文本都放在一个单元格中，我希望将每一行的值放在单独的 Excel 单元格中。这是我的代码：

```
$queryexport = ("
SELECT username,password,fullname FROM ecustomer_users
WHERE fk_customer='".$fk_customer."'
");

$row = mysql_fetch_assoc($queryexport);

$result = mysql_query($queryexport);
$header = '';

for ($i = 0; $i < $count; $i++){
   $header .= mysql_field_name($result, $i)."\t";
   }

while($row = mysql_fetch_row($result)){
   $line = '';
   foreach($row as $value){
          if(!isset($value) || $value == ""){
                 $value = "\t";
          }else{
                 $value = str_replace('"', '""', $value);
                 $value = '"' . $value . '"' . "\t";
                 }
          $line .= $value;
          }
   $data .= trim($line)."\n";
   $data = str_replace("\r", "", $data);

if ($data == "") {
   $data = "\nno matching records found\n";
   }
}
header("Content-type: application/vnd.ms-excel; name='excel'");
header("Content-Disposition: attachment; filename=exportfile.xls");
header("Pragma: no-cache");
header("Expires: 0");

// output data
echo $header."\n".$data;

mysql_close($conn);` 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-29T09:06:14.567

***只需尝试以下内容：***

**PHP部分：**

```
<?php
/*******EDIT LINES 3-8*******/
$DB_Server = "localhost"; //MySQL Server    
$DB_Username = "username"; //MySQL Username     
$DB_Password = "password";             //MySQL Password     
$DB_DBName = "databasename";         //MySQL Database Name  
$DB_TBLName = "tablename"; //MySQL Table Name   
$filename = "excelfilename";         //File Name
/*******YOU DO NOT NEED TO EDIT ANYTHING BELOW THIS LINE*******/    
//create MySQL connection   
$sql = "Select * from $DB_TBLName";
$Connect = @mysql_connect($DB_Server, $DB_Username, $DB_Password) or die("Couldn't connect to MySQL:<br>" . mysql_error() . "<br>" . mysql_errno());
//select database   
$Db = @mysql_select_db($DB_DBName, $Connect) or die("Couldn't select database:<br>" . mysql_error(). "<br>" . mysql_errno());   
//execute query 
$result = @mysql_query($sql,$Connect) or die("Couldn't execute query:<br>" . mysql_error(). "<br>" . mysql_errno());    
$file_ending = "xls";
//header info for browser
header("Content-Type: application/xls");    
header("Content-Disposition: attachment; filename=$filename.xls");  
header("Pragma: no-cache"); 
header("Expires: 0");
/*******Start of Formatting for Excel*******/   
//define separator (defines columns in excel & tabs in word)
$sep = "\t"; //tabbed character
//start of printing column names as names of MySQL fields
for ($i = 0; $i < mysql_num_fields($result); $i++) {
echo mysql_field_name($result,$i) . "\t";
}
print("\n");    
//end of printing column names  
//start while loop to get data
    while($row = mysql_fetch_row($result))
    {
        $schema_insert = "";
        for($j=0; $j<mysql_num_fields($result);$j++)
        {
            if(!isset($row[$j]))
                $schema_insert .= "NULL".$sep;
            elseif ($row[$j] != "")
                $schema_insert .= "$row[$j]".$sep;
            else
                $schema_insert .= "".$sep;
        }
        $schema_insert = str_replace($sep."$", "", $schema_insert);
        $schema_insert = preg_replace("/\r\n|\n\r|\n|\r/", " ", $schema_insert);
        $schema_insert .= "\t";
        print(trim($schema_insert));
        print "\n";
    }   
?> 
```

我认为这可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-11-18T05:38:41.367

试试这个代码。它肯定有效。

```
<?php
// Connection 

$conn=mysql_connect('localhost','root','');
$db=mysql_select_db('excel',$conn);

$filename = "Webinfopen.xls"; // File Name
// Download file
header("Content-Disposition: attachment; filename=\"$filename\"");
header("Content-Type: application/vnd.ms-excel");
$user_query = mysql_query('select name,work from info');
// Write data to file
$flag = false;
while ($row = mysql_fetch_assoc($user_query)) {
    if (!$flag) {
        // display field/column names as first row
        echo implode("\t", array_keys($row)) . "\r\n";
        $flag = true;
    }
    echo implode("\t", array_values($row)) . "\r\n";
}
?> 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-01-27T16:42:22.043

如果您只想将查询数据转储到 excel 中，我必须经常这样做，并且使用 html 表是一种非常简单的方法。我使用 mysqli 进行数据库查询，并使用以下代码导出到 excel：

```
header("Content-Type: application/xls");    
header("Content-Disposition: attachment; filename=filename.xls");  
header("Pragma: no-cache"); 
header("Expires: 0");

echo '<table border="1">';
//make the column headers what you want in whatever order you want
echo '<tr><th>Field Name 1</th><th>Field Name 2</th><th>Field Name 3</th></tr>';
//loop the query data to the table in same order as the headers
while ($row = mysqli_fetch_assoc($result)){
    echo "<tr><td>".$row['field1']."</td><td>".$row['field2']."</td><td>".$row['field3']."</td></tr>";
}
echo '</table>'; 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-04-11T06:31:56.893

这是新版本的php代码

```
$servername = "localhost";
$username = "root";
$password = "";
$dbname = "your_dbname";
//mysql and db connection

$con = new mysqli($servername, $username, $password, $dbname);

if ($con->connect_error) {  //error check
    die("Connection failed: " . $con->connect_error);
}
else
{

}

$DB_TBLName = "your_table_name"; 
$filename = "excelfilename";  //your_file_name
$file_ending = "xls";   //file_extention

header("Content-Type: application/xls");    
header("Content-Disposition: attachment; filename=$filename.'.'.$file_ending");  
header("Pragma: no-cache"); 
header("Expires: 0");

$sep = "\t";

$sql="SELECT * FROM $DB_TBLName"; 
$resultt = $con->query($sql);
while ($property = mysqli_fetch_field($resultt)) { //fetch table field name
    echo $property->name."\t";
}

print("\n");    

while($row = mysqli_fetch_row($resultt))  //fetch_table_data
{
    $schema_insert = "";
    for($j=0; $j< mysqli_num_fields($resultt);$j++)
    {
        if(!isset($row[$j]))
            $schema_insert .= "NULL".$sep;
        elseif ($row[$j] != "")
            $schema_insert .= "$row[$j]".$sep;
        else
            $schema_insert .= "".$sep;
    }
    $schema_insert = str_replace($sep."$", "", $schema_insert);
    $schema_insert = preg_replace("/\r\n|\n\r|\n|\r/", " ", $schema_insert);
    $schema_insert .= "\t";
    print(trim($schema_insert));
    print "\n";
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-10-31T21:55:58.090

PHPExcel 是你的朋友。非常易于使用，并且像魅力一样工作。

[https://github.com/PHPOffice/PHPExcel](https://github.com/PHPOffice/PHPExcel)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-29T08:05:16.507

我认为您应该尝试使用此 API

[http://code.google.com/p/php-excel/source/browse/trunk/php-excel.class.php](http://code.google.com/p/php-excel/source/browse/trunk/php-excel.class.php)

有了这个

```
Create a quick export from a database table into Excel

Compile some statistical records with a few calculations and deliver
the result in an Excel worksheet

Gather the items off your (web-based) todo list, put them in a
worksheet and use it as a foundation for some more statistics
magic.** 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-10-31T21:17:24.157

试试这个代码：

```
<?php
    header("Content-type: application/vnd-ms-excel");

    header("Content-Disposition: attachment; filename=hasil-export.xls");

    include 'view-lap.php';
?> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-11-22T16:41:39.843

试试这个代码

数据.php

```
 <table border="1">
<tr>
    <th>NO.</th>
    <th>NAME</th>
    <th>Major</th>
</tr>
<?php
//connection to mysql
mysql_connect("localhost", "root", ""); //server , username , password
mysql_select_db("codelution");

//query get data
$sql = mysql_query("SELECT * FROM student ORDER BY id ASC");
$no = 1;
while($data = mysql_fetch_assoc($sql)){
    echo '
    <tr>
        <td>'.$no.'</td>
        <td>'.$data['name'].'</td>
        <td>'.$data['major'].'</td>
    </tr>
    ';
    $no++;
}
?> 
```

excel文件的代码

导出.php

```
<?php
// The function header by sending raw excel
header("Content-type: application/vnd-ms-excel");
// Defines the name of the export file "codelution-export.xls"
header("Content-Disposition: attachment; filename=codelution-export.xls");
// Add data table
include 'data.php';
?> 
```

如果是 mysqli 版本

```
$sql="SELECT * FROM user_details";
$result=mysqli_query($conn,$sql);
if(mysqli_num_rows($result) > 0)
{
    $no = 1;
            while($data = mysqli_fetch_assoc($result))
            {echo '
    <tr>
        <<td>'.$no.'</td>
        <td>'.$data['name'].'</td>
        <td>'.$data['major'].'</td>

    </tr>
    ';
    $no++; 
```

[http://codelution.com/development/web/easy-ways-to-export-data-from-mysql-to-excel-with-php/](http://codelution.com/development/web/easy-ways-to-export-data-from-mysql-to-excel-with-php/)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-02-20T08:46:55.853

您可以使用这个简单的代码将数据从 MySQL 导出到 Excel。

```
<?php
include('db_con.php');

$stmt=$db_con->prepare('select * from books');
$stmt->execute();

$columnHeader ='';
$columnHeader = "Sr NO"."\t"."Book Name"."\t"."Book Author"."\t"."Book 
ISBN"."\t";

$setData='';

while($rec =$stmt->FETCH(PDO::FETCH_ASSOC))
{
 $rowData = '';
 foreach($rec as $value)
 {
  $value = '"' . $value . '"' . "\t";
  $rowData .= $value;
 }
 $setData .= trim($rowData)."\n";
}

header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=Book record 
sheet.xls");
header("Pragma: no-cache");
header("Expires: 0");

echo ucwords($columnHeader)."\n".$setData."\n";

?> 
```

完整代码在这里[php 导出到 excel](http://www.phpcodify.com/export-data-to-excel-in-php-mysql/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-02-29T23:24:58.600

John Peter 和 Dileep kurahe 的帖子帮助我开发了我认为更简单、更清洁的解决方案，以防万一其他人仍在寻找。（我没有显示任何数据库代码，因为我实际上使用了 $_SESSION 变量。）

上述解决方案在加载 Excel 时总是会导致错误，即扩展名与格式类型不匹配。其中一些解决方案创建了一个电子表格，其中包含跨页面的列中的数据，在这些列中使用列标题并将数据列在行中会更传统。所以这是我的简单解决方案：

```
$filename = "webreport.csv";
header("Content-Type: application/xls");    
header("Content-Disposition: attachment; filename=$filename");  
header("Pragma: no-cache"); 
header("Expires: 0");
foreach($results as $x => $x_value){
    echo '"'.$x.'",' . '"'.$x_value.'"' . "\r\n";
} 
```

1.  更改为 .csv（Excel 会立即更新为 .xls，加载时没有错误。）
2.  使用逗号作为分隔符。
3.  双引号键和值以转义数据中的任何逗号。
4.  我还添加了列标题，`$results`以便电子表格看起来更好。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-12-17T18:22:01.597

请尝试以下代码。只更新两个值。
1.your_database_name 2.table_name

```
 <?php
    $host="localhost";
    $username="root";
    $password="";
    $dbname="your_database_name";
    $con = new mysqli($host, $username, $password,$dbname); 

        $sql_data="select * from table_name";
        $result_data=$con->query($sql_data);
        $results=array();
    filename = "Webinfopen.xls"; // File Name
    // Download file
    header("Content-Disposition: attachment; filename=\"$filename\"");
    header("Content-Type: application/vnd.ms-excel");

    $flag = false;
    while ($row = mysqli_fetch_assoc($result_data)) {
        if (!$flag) {
            // display field/column names as first row
            echo implode("\t", array_keys($row)) . "\r\n";
            $flag = true;
        }
        echo implode("\t", array_values($row)) . "\r\n";
    }
    ?> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-04-16T07:16:19.383

这是基于约翰彼得上面的回答。该代码运行良好，但我需要它用于 WordPress。所以，我做了这样的事情：

```
<?php

require '../../../wp-load.php';

$file_name = "registered-users";
$args = array( 'role' => 'client',
   'meta_query' => array( array(
       'key' => '_dt_transaction_archived',
       'compare' => 'NOT EXISTS'
   ) ),
   'order' => 'DESC',
   'orderby' => 'ID'
);
$users = get_users( $args );
$file_ending = "xls";

// Header info for browser
header( "Content-Type: application/xls" );
header( "Content-Disposition: attachment; filename=$file_name.$file_ending" );
header( "Pragma: no-cache" );
header( "Expires: 0" );

/*******Start of Formatting for Excel*******/

// define separator (defines columns in excel & tabs in word)
$sep = "\t"; //tabbed character
// start of printing column names as names of MySQL fields

print( "First Name" . $sep );
print( "Last Name" . $sep );
print( "E-Mail" . $sep );
print( "\n" );
// end of printing column names

// start foreach loop to get data
$schema_insert = "";

foreach ($users as $user) {
    if ( $user ) {
        $schema_insert = "$user->first_name" . $sep;
        $schema_insert .= "$user->last_name" . $sep;
        $schema_insert .= "$user->user_email" . $sep;
        print "\n";
        $schema_insert = str_replace( $sep . "$", "", $schema_insert );
        $schema_insert = preg_replace( "/\r\n|\n\r|\n|\r/", " ", $schema_insert );
        $schema_insert .= "\t";
        print( trim( $schema_insert ) );
    }
} 
```

# python - 使用烧瓶+管理模块设置管理视图

> ID：15699303
> 
> 赞同：1
> 
> 时间：2013-03-29T07:40:31.453
> 
> 标签：python, flask

在以下代码中，所有内容都默认为成员的索引控制器。如何设置 add_view 以指向成员中的特定方法？这样，我可以在下拉列表中拥有一个具有相关功能的成员按钮。

意见：

```
admin.add_view(Members(name="Add",endpoint="add",category="Members"))
admin.add_view(Members(name="Edit",endpoint="edit",category="Members"))
admin.add_view
(Members(name="Delete",endpoint="delete",category="Members")) 
```

管理模块：

```
from flask import render_template, abort
from jinja2 import TemplateNotFound
from flask.ext.admin import BaseView, expose, Admin

admin = Admin(name='Foo')

# Add administrative views here

class Members(BaseView):
    @expose('/')
    def index(self):
        return self.render('admin/index.html')

    @expose('/edit')
    def edit(self):
        return self.render('admin/edit.html')

    @expose('/delete')
    def delete(self):
        pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T08:00:30.357

不确定它会有什么帮助，因为您正在创建同一个类的 3 个实例。虽然您可以保持实现高度耦合，但它不会像拥有 3 个不同的类那样不同。

无论如何，`add_view`将始终将菜单项指向`index`方法。但是，`self._default_view`包含默认视图方法名称（您的`Members`类的索引）。

只是想知道它的外观：

```
class MyBase(BaseView):
  def __init__(self, def_view, **kwargs):
    self._default_view = def_view
    super(MyBase, self).__init__(**kwargs)

class Members(MyBase):
  @expose('/')
  def index(self):
    return self.render('...')

  #.. other view methods

admin.add_view(Members(def_view='index', name='Add', endpoint='add'))
admin.add_view(Members(def_view='edit', name='Edit', endpoint='edit'))
# ... 
```

# design-patterns - 行数据网关返回值

> ID：15699313
> 
> 赞同：1
> 
> 时间：2013-03-29T07:41:56.560
> 
> 标签：design-patterns, poeaa

最近，我在 poeaa 中读到了行数据网关模式。

我的问题是，行数据网关模式的返回值是多少。它是网关对象本身吗？如果是这样，这不会增加 DAL 和 BLL 之间的依赖关系吗？

我的意思是，就像在存储库模式中一样，我们有一个关系：DAL -> BLL，例如：

```
class personrepository
{
   public model.person getpersonby(id) {...}
} 
```

但是在网关中，关系是这样的：BLL -> DAL，例如：

```
//organize by transaction script
class personservice
{
   public static void dosomethingwith(persongateway) {...}
} 
```

我是不是误会了什么？

# parameters - 当 dwMaxCCIDMessageLength 大于 4KB 时，SCardTransmit 返回 ERROR_INVALID_PARAMETER

> ID：15699326
> 
> 赞同：0
> 
> 时间：2013-03-29T07:42:55.863
> 
> 标签：parameters, smartcard, pcsc, winscard

我正在开发一个 USB 智能卡，并且我使用 Windows PC/SC API 来使用该智能卡传输数据。这是我的代码的一部分：

```
if(SCardConnect(hSC, sCard, SCARD_SHARE_EXCLUSIVE, SCARD_PROTOCOL_T1, &hCard, &dwActiveProtocol) == SCARD_S_SUCCESS)
{
    if(SCardTransmit(hCard, SCARD_PCI_T1, pSendBuf, ulSendBufLen, SCARD_PCI_T1, pRecBuf, pulRecBufLen) == SCARD_S_SUCCESS)
    {
        //do something
    }
} 
```

**我确定大小和指向两个输入/输出缓冲区的指针都是有效的。**

直到`dwMaxCCIDMessageLength`设备描述符的字段低于`0x00001000h`，没有问题并且程序工作正常，但是当我将其增加到更大的值（超过 4kb）时，`SCardTransmit`失败并显示 ERROR_INVALID_PARAMETER 结果代码。

目前，我知道`pSendBuf`智能卡已成功接收内容并处理内容已完成，但是当卡想要返回响应时，会发生该错误，我认为这是 PC/ 中的某种不一致（例如缓冲区大小限制） SC司机。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:20:34.083

驱动程序是瓶颈的可能性极小，并且鉴于您有一个 USB 接口，我也不认为协议层是可疑的。这使得智能卡芯片成为主要嫌疑人，而且由于许多新芯片总共有 8 KB RAM，我觉得可以理解，他们没有将大部分内存用于 I/O 缓冲区。不知道受影响的命令，我建议尝试链接或逐块读取文件。

# c++ - 何时在 OMP 中使用临界区和障碍？

> ID：15699328
> 
> 赞同：0
> 
> 时间：2013-03-29T07:43:00.040
> 
> 标签：c++, parallel-processing, shared, critical-section, openmp

从每个线程的公共向量/数组中读取数据时，是否必须使用临界区？会不会有什么冲突？

```
#include <omp.h>
#include <vector>
// ...

using namespace std;

// ...

int main(int argc, char** argv)
{
    vector<double> data;
    // populating vector from a file, for example...

    #pragma omp parallel num_threads(4)
    {
        // ...

        // in this cycle I only READ from the vector 'data'
        #pragma omp critical
        {
            for (vector<double>::iterator it = data.begin(); it < data.end(); it++)
            {
                double value = *it;
                // do some actions with 'value'...
            }
        }

        // ...
    }

    // ...

    return 0;
} 
```

我担心从公共（共享）向量中读取时线程可能无法正常工作。我对吗？

# ios - 如何显示电话号码和电子邮件以及用户的姓名？

> ID：15699332
> 
> 赞同：0
> 
> 时间：2013-03-29T07:43:11.390
> 
> 标签：ios, objective-c, abpersonviewcontroller, abrecordref

这是我尝试过的：

```
-(void) vDisplayPerson:(ABRecordRef)person
{
    ABPersonViewController *picker = [[ABPersonViewController alloc] init] ;
    picker.personViewDelegate = self;
    picker.displayedPerson = person;
    picker.displayedProperties=@[@(kABPersonPhoneProperty),@(kABPersonEmailProperty),@(kABPersonBirthdayProperty),@(kABPersonOrganizationProperty),@(kABPersonJobTitleProperty),@(kABPersonDepartmentProperty),@(kABPersonNoteProperty),@(kABPersonCreationDateProperty)];
    // Allow users to edit the person’s information
    picker.allowsEditing = YES;
    [self.navigationController pushViewController:picker animated:YES];

} 
```

请注意，我已设置显示属性以包含许多内容。电话。人。生日。然而，只显示姓名和职位。

我想显示人们在联系时使用的相同类型的信息。在 iOs6 中不再可能了吗？

更新：我强烈怀疑问题不在显示中，而是由于某种原因整个人记录根本不包含电话号码。那是因为我可以编辑联系人，添加电话号码和电话号码将被看到。但是，更新不会传播到“真实”联系人。在我的程序上进行的更新不会传播到真正的联系人。真实联系人上的更新不会显示在我的程序中。

我正在使用 CFArrayRef refAllPeople = ABAddressBookCopyArrayOfAllPeople(addressBook);

顺便说一下，这是在 iPhone 5.1 模拟器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:50:18.377

这里的关键是对 ABAddressBookCreate 的结果的引用还不能被释放。所以我创建了一个属性`@property (nonatomic) ABAddressBookRef addressBook;`，然后在 dealloc 时才释放它（直到程序结束才会调用它）。

这解决了这个问题。

# php - 使用 jQuery 或 Javascript 包含 PHP 文件

> ID：15699335
> 
> 赞同：4
> 
> 时间：2013-03-29T07:43:29.007
> 
> 标签：php, javascript, forms

我有一个提交表单并加载警报等的 Javascript 文件。现在我想添加调用或获取`.php`文件的功能，我尝试使用`$.get("mail.php");`但它似乎不起作用。

Javascript代码：

```
$('#myform').on('submit', function(e){
    e.preventDefault();
    $.get($(this).attr('action') + $(this).serialize());
    alert("Thank You! \nTop Up for: <?php echo "$username" ?> Purchased Successfully");
    $.get("mail.php");  //this is the added part to get mail.php//
    location.reload(); 
```

PHP - `mail.php`：

```
<?php

$to = "stephan@mail.co.za";

$headers = "From: website mail \r\n";

$email_body = "has just toped up his account.\n".

$email_subject = "User Topup Alert";

mail($to,$email_subject,$email_body,$headers);

?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T07:48:04.977

我想你可以试试`load()`：

```
$("#mailDiv").load('mail.php'); 
```

据我说`$.get`，`$.post`是发送数据。您不能使用它包含文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:04:38.463

您可以使用

```
$('selector').load() 
```

或者

```
$.ajax(); 
```

`$.ajax();`是最优选的。

# android - 在使用 Sherlock 库在 ActionBar 中添加导航列表时，标签隐藏在 Android 中？

> ID：15699339
> 
> 赞同：0
> 
> 时间：2013-03-29T07:43:50.517
> 
> 标签：android, tabs, actionbarsherlock

我正在使用使用 Sherlock 库的 ActionBar。在这个应用程序中也实现了选项卡。

现在，当我在 ActionBar 中使用 NavigationList 时，我丢失了 Tab 片段。为了在我使用的 ActionBar 中使用 ListNavigation：

```
mActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST); 
```

＆在此之前，我`mActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);`用于选项卡但没有列表。

现在，我想同时使用 ,`NavigationList`和`Tab Fragments`

```
public class MainActivity extends SherlockFragmentActivity implements OnNavigationListener {
    ActionBar mActionBar;
    ViewPager mPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        /** Getting a reference to action bar of this activity */
        mActionBar = getSupportActionBar();

        /** Set tab navigation mode */
        mActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
        //mActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        SpinnerAdapter mSpinnerAdapter = ArrayAdapter.createFromResource(
                this, 
                R.array.locations, 
                android.R.layout.simple_spinner_item);

        mActionBar.setListNavigationCallbacks(mSpinnerAdapter, this);
        mActionBar.setIcon(R.drawable.app_icon);

        /** Getting a reference to ViewPager from the layout */
        mPager = (ViewPager) findViewById(R.id.pager);

        /** Getting a reference to FragmentManager */
        FragmentManager fm = getSupportFragmentManager();      

        /** Defining a listener for pageChange */
        ViewPager.SimpleOnPageChangeListener pageChangeListener = new ViewPager.SimpleOnPageChangeListener(){
            @Override
            public void onPageSelected(int position) {              
                super.onPageSelected(position);
                mActionBar.setSelectedNavigationItem(position);             
            }

        };

        /** Setting the pageChange listner to the viewPager */
        mPager.setOnPageChangeListener(pageChangeListener);

        /** Creating an instance of FragmentPagerAdapter */
        MyFragmentPagerAdapter fragmentPagerAdapter = new MyFragmentPagerAdapter(fm);

        /** Setting the FragmentPagerAdapter object to the viewPager object */
        mPager.setAdapter(fragmentPagerAdapter);

        mActionBar.setDisplayShowTitleEnabled(true);

        /** Defining tab listener */
        ActionBar.TabListener tabListener = new ActionBar.TabListener() {

            @Override
            public void onTabUnselected(Tab tab, FragmentTransaction ft) {              
            }

            @Override
            public void onTabSelected(Tab tab, FragmentTransaction ft) {
                mPager.setCurrentItem(tab.getPosition());

            }

            @Override
            public void onTabReselected(Tab tab, FragmentTransaction ft) {
            }
        };

        /** Creating Android Tab */
        Tab tab = mActionBar.newTab()
                .setText("Android")
                .setIcon(R.drawable.android)
                .setTabListener(tabListener);

        mActionBar.addTab(tab);

        /** Creating Apple Tab */
        tab = mActionBar.newTab()
                .setText("Apple")
                .setIcon(R.drawable.apple)
                .setTabListener(tabListener); 
        mActionBar.addTab(tab);  

    }
} 
```

MyFragmentPagerAdapter.java

```
public class MyFragmentPagerAdapter extends FragmentPagerAdapter{

    final int PAGE_COUNT = 2;

    /** Constructor of the class */
    public MyFragmentPagerAdapter(FragmentManager fm) {
        super(fm);

    }

    /** This method will be invoked when a page is requested to create */
    @Override
    public Fragment getItem(int arg0) {
        Bundle data = new Bundle();
        switch(arg0){

            /** Android tab is selected */
            case 0:
                AndroidFragment androidFragment = new AndroidFragment();                
                data.putInt("current_page", arg0+1);
                androidFragment.setArguments(data);
                return androidFragment;

            /** Apple tab is selected */
            case 1:
                AppleFragment appleFragment = new AppleFragment();
                data.putInt("current_page", arg0+1);
                appleFragment.setArguments(data);
                return appleFragment;   
        }

        return null;
    }

    /** Returns the number of pages */
    @Override
    public int getCount() {     
        return PAGE_COUNT;
    }

} 
```

和其他两个类：1）`public class AppleFragment extends SherlockListFragment`

2)`public class AndroidFragment extends SherlockListFragment`

请建议我，为什么我在将列表添加到 ActionBar 时会丢失我的选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:27:00.273

您不能同时使用`NAVIGATION_MODE_LIST`两者`NAVIGATION_MODE_TABS`。您一次只能使用一种导航模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:27:17.550

列表导航和选项卡的使用`ActionBar`是互斥的，只能使用一个。

如果要同时使用列表和选项卡，则必须对其中至少一个使用不同的实现。对于选项卡，您可以使用[`ViewPagerIndicator`](http://viewpagerindicator.com/). `ActionBar`可以通过多种方式创建Spinner ：

*   使用自定义视图创建微调器
*   用于`actionLayout`菜单`actionViewClass`项
*   用于`ActionProvider`菜单项

**编辑：**
在您的情况下，最简单的调整是使用`ViewPagerIndicator`而不是`ActionBar`标签。更改列表导航需要更多的工作。
该项目的网页`ViewPagerIndicator`显示了一些您应该查看的示例设置。该项目的[GitHub 页面](https://github.com/JakeWharton/Android-ViewPagerIndicator)有许多示例，展示了如何使用库的各种设置。我猜你要找的是`TabPageIndicator`，所以看看[这个示例](https://github.com/JakeWharton/Android-ViewPagerIndicator/blob/master/sample/src/com/viewpagerindicator/sample/SampleTabsDefault.java)（注意标签的标题是在 中创建的，`FragmentPagerAdapter`你不再需要了）。`ActionBar.Tab``ActionBar.TabListener`

# android - Android中的ListView内存泄漏

> ID：15699343
> 
> 赞同：0
> 
> 时间：2013-03-29T07:44:00.030
> 
> 标签：android

我写了一个从 JSON 获取图像的类。它正在工作，但内存有问题。当我向下滚动应用程序时，它在内存中泄漏。这是我的代码。

```
package com.nexum.senddata;

public class MainActivity extends Activity {

private ListView list;
private MyAdapter adapter;

    private final String parsingUrl = "http://sametdede.com/expo/data.json";
private String tag_coord = "Coord";
private String tag_lat = "Lat";
private String tag_lon = "Lon";// Double
private String tag_image = "Image";
private String tag_InIzmir = "InIzmir";
private String tag_name = "Name";

private ProgressDialog pDialog;

private static int clickedItemPosition = -1;
private final int REQUEST_CODE_DETAIL = 1;

ArrayList<CoordItem> items;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    items = new ArrayList<CoordItem>();
    adapter = new MyAdapter(this, R.layout.list_item, items);

    list = (ListView) findViewById(R.id.exampList);
    list.setAdapter(adapter);

    pDialog = new ProgressDialog(this);
    pDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    pDialog.setMessage("Veriler alınıyor...");

    new ListViewLoad().execute();

    list.setOnItemClickListener(new OnItemClickListener() {

        @SuppressLint("ShowToast")
        @Override
        public void onItemClick(AdapterView<?> a, View v, int position,
                long id) {
            /*
             * String bulunma = ""; if (items.get(position).inIzmir) {
             * bulunma+="İzmir de bulundu."; }else{
             * bulunma+="İzmir de bulunmadı."; } String
             * s="Name:"+items.get(position).name+"\nInIzmir:"+bulunma;
             * Toast.makeText(getApplicationContext(), s,
             * Toast.LENGTH_LONG).show();
             */

            clickedItemPosition = position;
            Intent myIntent = new Intent(MainActivity.this,
                    DetailActivity.class);
            Bundle bundle = new Bundle();
            bundle.putParcelable(
                    "parcelable_key",
                    new CoordItem(items.get(position).name, items
                            .get(position).img, items.get(position).lat,
                            items.get(position).lon,
                            items.get(position).inIzmir));
            myIntent.putExtras(bundle);
            // Güncelleme olayı burada başlıyor
            // startActivityForResult(myIntent, REQUEST_CODE_DETAIL);

            startActivityForResult(myIntent, REQUEST_CODE_DETAIL);

        }

    });

}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == REQUEST_CODE_DETAIL && resultCode == RESULT_OK
            && data != null) {
        CoordItem coorditem = new CoordItem(data.getStringExtra("name"),
                items.get(clickedItemPosition).img, Double.parseDouble(data
                        .getStringExtra("lat")), Double.parseDouble(data
                        .getStringExtra("lon")),
                items.get(clickedItemPosition).inIzmir);

        items.set(clickedItemPosition, coorditem);
        adapter.notifyDataSetChanged();
        Toast.makeText(getApplicationContext(), "Guncelleme yapıldı.",
                Toast.LENGTH_SHORT).show();
    }
    /*
     * CoordItem coorditem = new CoordItem(data.getStringExtra("name"),
     * items.get(clickedItemPosition).img,
     * Double.parseDouble(data.getStringExtra("lat")),Double.parseDouble(
     * data.getStringExtra("lon")), items.get(clickedItemPosition).inIzmir);
     * 
     * items.set(clickedItemPosition, coorditem);
     * adapter.notifyDataSetChanged();
     * Toast.makeText(getApplicationContext(), "Guncelleme yapıldı.",
     * Toast.LENGTH_SHORT).show();
     */

}

private class ListViewLoad extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog.show();
    }

    @Override
    protected Void doInBackground(Void... params) {

        String json = getStringFromURL(parsingUrl);
        try {
            final JSONArray jArray = new JSONArray(json);

            for (int i = 0; i < jArray.length(); i++) {
                JSONObject c = jArray.getJSONObject(i);
                JSONObject coord = c.getJSONObject(tag_coord);
                double lat = coord.getDouble(tag_lat);
                double lon = coord.getDouble(tag_lon);
                String image = c.getString(tag_image);
                boolean InIzmir = c.getBoolean(tag_InIzmir);
                String name = c.getString(tag_name);

                CoordItem item = new CoordItem(name, image, lat, lon,
                        InIzmir);
                items.add(item);
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);

        adapter.notifyDataSetChanged();

        pDialog.dismiss();
    }

}

private class MyAdapter extends ArrayAdapter<CoordItem> {

    private LayoutInflater inflater;

    public MyAdapter(Context context, int textViewResourceId,
            ArrayList<CoordItem> objects) {
        super(context, textViewResourceId, objects);

        this.inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {
        if (items != null)
            return items.size();
        else
            return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder viewholder = null;

        if (convertView == null) {
            viewholder = new ViewHolder();

            convertView = inflater.inflate(R.layout.list_item, parent,
                    false);
            viewholder.listItemImage = (ImageView) convertView
                    .findViewById(R.id.listItemImage);

            viewholder.listItemName = (TextView) convertView
                    .findViewById(R.id.listItemName);
            viewholder.listItemInIzmir = (TextView) convertView
                    .findViewById(R.id.listItemInIzmir);
            viewholder.listItemLatitude = (TextView) convertView
                    .findViewById(R.id.listItemLatitude);
            viewholder.listItemLongitude = (TextView) convertView
                    .findViewById(R.id.listItemLongitude);
            convertView.setTag(viewholder);
        } else {
            viewholder = (ViewHolder) convertView.getTag();
        }

        viewholder.listItemName.setText(items.get(position).name);
        if (items.get(position).inIzmir) {
            viewholder.listItemInIzmir.setText("Izmirde.");
        } else {
            viewholder.listItemInIzmir.setText("Izmirde degil.");
        }

        try {
            viewholder.listItemImage
                    .setImageDrawable(getDrawableFromUrl(new URL(items.get(
                            position).getImg())));
        } catch (Exception e) {
            e.printStackTrace();
        }

        return convertView;
    }

    public Drawable getDrawableFromUrl(URL url) {
        try {
            InputStream is = (InputStream) url.getContent();
            Drawable d = Drawable.createFromStream(is, "src");
            return d;
        } catch (Exception e) {
            return null;
        }
    }

}

/**
 * Burada layoutinflater da kullandığımız layoutun componentlerini
 * yazıyoruz.Bu da bizim list_item.xml imizdir.
 */
static class ViewHolder {
    ImageView listItemImage;
    TextView listItemName, listItemInIzmir, listItemLatitude,
            listItemLongitude;
}

public String getStringFromURL(String url) {

    // Making HTTP request
    String json = "";
    InputStream is = null;
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "UTF-8"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        e.printStackTrace();
    }

    // return JSON String
    return json;

} 
```

}

我在哪里可以读取和获取图像以更快地执行而不是内存泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:48:30.837

您已经使用了 ViewHolder。

使用 LazyList 或通用图像加载器

**懒惰列表**

图像可以缓存到本地sd卡或手机内存。Url 被认为是关键。如果密钥存在于 sdcard 中，则显示来自 sd 卡的图像，否则通过从服务器下载显示图像并将其缓存到您选择的位置。可以设置缓存限制。您还可以选择自己的位置来缓存图像。缓存也可以清除。

而不是用户等待下载大图像然后显示惰性列表按需加载图像。由于图像区域缓存，您可以离线显示图像。

[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)。懒惰列表

在你的 getview

```
imageLoader.DisplayImage(imageurl, imageview); 
```

ImageLoader 显示方法

```
public void DisplayImage(String url, ImageView imageView) //url and imageview as parameters
{
imageViews.put(imageView, url);
Bitmap bitmap=memoryCache.get(url);   //get image from cache using url as key
if(bitmap!=null)         //if image exists
    imageView.setImageBitmap(bitmap);  //dispaly iamge
 else   //downlaod image and dispaly. add to cache.
 {
    queuePhoto(url, imageView);
    imageView.setImageResource(stub_id);
 }
 } 
```

**通用图像加载器**

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。

可以在本地或从服务器加载图像。

它基于惰性列表（工作原理相同）。但它还有很多其他配置。我更喜欢使用 Universal Image Loader，因为它为您提供了更多配置选项。如果下载失败，您可以显示错误图像。可以显示带圆角的图像。可以缓存在磁盘或内存上。可以压缩图像。

在您的自定义适配器构造函数中

```
 File cacheDir = StorageUtils.getOwnCacheDirectory(activity context, "your folder");//for caching

// Get singletone instance of ImageLoader
imageLoader = ImageLoader.getInstance();
// Create configuration for ImageLoader (all options are optional)
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
// You can pass your own memory cache implementation
.discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
.discCacheFileNameGenerator(new HashCodeFileNameGenerator())
.enableLogging()
.build();
// Initialize ImageLoader with created configuration. Do it once.
 imageLoader.init(config);
 options = new DisplayImageOptions.Builder()
.showStubImage(R.drawable.stub_id)//display stub image untik image is loaded
.cacheInMemory()
.cacheOnDisc()
.displayer(new RoundedBitmapDisplayer(20))
.build(); 
```

在你的 getView()

```
 ImageView image=(ImageView)vi.findViewById(R.id.imageview); 
 imageLoader.displayImage(imageurl, image,options);//provide imageurl, imageview and options. 
```

您可以配置其他选项以满足您的需求。

# c++ - 如何使用正则表达式匹配只有中文字母的字符串？

> ID：15699346
> 
> 赞同：6
> 
> 时间：2013-03-29T07:44:18.063
> 
> 标签：c++, regex, visual-c++, boost, unicode

我想得到一个正则表达式，它只能匹配一个由汉字组成的字符串，而没有英文或任何其他字符。[\u4e00-\u9fa5] 根本不起作用，并且 [^x00-xff] 将匹配带有标点符号或其他语言字符的情况。

```
boost::wregex reg(L"\\w*");
bool b = boost::regex_match(L"我a", reg);    // expected to be false
b = boost::regex_match(L"我,", reg);         // expected to be false
b = boost::regex_match(L"我", reg);          // expected to be true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T08:07:30.077

Boost with ICU[可以使用字符类](http://www.boost.org/doc/libs/1_53_0/libs/regex/doc/html/boost_regex/unicode.html)。我认为您正在寻找`\p{Han}`脚本。或者，U+4E00..U+9FFF 是`\p{InCJK_Unified_Ideographs}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:34:30.587

以下正则表达式工作正常。

```
boost::wregex reg(L"^[\u4e00-\u9fa5]+"); 
```

# git - 如何在 Netbeans 中显示 .git 文件夹

> ID：15699347
> 
> 赞同：10
> 
> 时间：2013-03-29T07:44:23.923
> 
> 标签：git, netbeans, directory, netbeans-7

我有一个项目，我从我的虚拟机远程签出。

现在它会检查除他没有看到的文件之外的所有文件。

恰好是`.git`文件夹...

我已经从

```
options->miscellenous->files 
```

从

```
^(CVS|SCCS|vssver.?\.scc|#.*#|%.*%|_svn)$|~$|^\.(?!htaccess$).*$ 
```

到

```
^(CVS|SCCS|vssver.?\.scc|#.*#|%.*%|_svn)$|~$|^\.(?!htaccess$)$ 
```

但是文件夹本身仍然没有被拉出......

有人对此有解决方案吗？

我在 Windows 7 上使用 Netbeans 7.3 64 位。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-29T14:36:21.660

[您的解决方案应该可以工作，如“在 NetBeans](http://mrhaki.blogspot.fr/2008/06/display-hidden-dot-files-and.html)中显示隐藏的点文件和目录”的注释所示：

> 在 Netbeans 7.1 中，它也在`Tools -> Options -> Miscellaneous -> Files`

```
^(CVS|SCCS|vssver.?\.scc|#.*#|%.*%|_svn)$|~$|^\.(?!htaccess$).*$ 
```

> 只需在最后删除`.*`就可以了。

但是我看到的所有参考资料（比如我的[旧答案](https://stackoverflow.com/a/1074430/6309)）都提到您需要重新启动 NetBeans 才能看到更新的模式生效。
或者至少尝试一个`Source->Scan for External Changes`，如“[如何刷新 Netbeans 工作区？](https://stackoverflow.com/a/9107475/6309) ”中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-22T05:04:17.733

您只能使 .git 文件可见。像这样

在工具 -> 选项 -> 杂项 -> 文件中进入 Netbeans 8

并输入

> ^(CVS|SCCS|vssver.?.scc|#. *#|%.* %|_svn)$|~$|^.(?!(htaccess|git.+|hgignore)$).*$

# java - Spring，不支持请求方法“POST”

> ID：15699350
> 
> 赞同：26
> 
> 时间：2013-03-29T07:44:33.807
> 
> 标签：java, spring, jsp, post

首先说抱歉问这个重复的问题..

实际上在我的春季申请中，我`user.jsp`有`professional.jsp`

这是我的 User.jsp：

```
 <form:form action="profile/user" modelAttribute="profile">
    <div>
        <jsp:include page="professional.jsp"></jsp:include>
    </div>

</form:form> 
```

这是我的专业.jsp：

```
 <%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<fieldset id="profile_proffiesional">
    <form:form action="profile/proffiesional" modelAttribute="PROFESSIONAL" method="POST">
        <p>
            <label for="position">Position</label>
            <form:input path="position" tabindex="4" />
        </p>
        <p>
            <label for="location">Location</label>
            <form:input path="location" tabindex="5" />
        </p>
        <p>
            <label for="description">Description</label>
            <form:input path="description" tabindex="5" />
        </p>
        <p>
            <input type="submit" value="Add">
        </p>
    </form:form>
</fieldset> 
```

这是我的控制器类：

```
 @Controller
@RequestMapping(value = "profile")
public class UserProfileController {

    @Autowired
    private UserService userService;

    @Autowired
    private SessionData sessionData;

    @RequestMapping(value = "user", method = RequestMethod.GET)
    public String user(Model model) throws Exception {
        model.addAttribute("PROFESSIONAL", new UserProfessionalForm());
        model.addAttribute("EDUCATIONAL", new UserEducationalForm());
        model.addAttribute("AWARDS", new UserAwardsForm());
        return "profile/user";
    }

    @RequestMapping(value = "proffessional", method = RequestMethod.POST)
    public @ResponseBody
    String forgotPassword(UserProfessionalForm professionalForm,
            BindingResult result, Model model) {

        UserProfileVO userProfileVO = new UserProfileVO();
        userProfileVO.setUser(sessionData.getUser());
        userService.saveUserProfile(userProfileVO);
        model.addAttribute("professional", professionalForm);
        return "Your Professional Details Updated";
    }
} 
```

`Problem`当我们点击`Add`按钮时`professional.jsp`，服务器控制台没有响应，但显示以下警告消息：

```
 29 Mar, 2013 1:03:51 PM org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver handleHttpRequestMethodNotSupported
WARNING: Request method 'POST' not supported 
```

为什么会出现这个警告？我已经指定了method="POST" ..

请帮忙..

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-03-28T19:50:00.360

我在我的 sprint 安全 xml 文件中启用了 csrf，所以我只在表单中添加了一行：

```
<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" /> 
```

这样我就能够提交具有该`model`属性的表单。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-29T07:53:37.213

在 Jsp 中：

```
action="profile/proffiesional" 
```

在控制器中

```
@RequestMapping(value = "proffessional", method = RequestMethod.POST) 
```

拼写错误！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-29T08:57:06.600

您的 user.jsp：

```
 <form:form action="profile/proffesional" modelAttribute="PROFESSIONAL">
     ---
     ---
    </form:form> 
```

在您的控制器类中：

（将其作为一个有意义的完整方法名称..听到我认为您在 DB 中插入记录。）

```
@RequestMapping(value = "proffessional", method = RequestMethod.POST)
    public @ResponseBody
    String proffessionalDetails(
            @ModelAttribute UserProfessionalForm professionalForm,
            BindingResult result, Model model) {

        UserProfileVO userProfileVO = new UserProfileVO();

        userProfileVO.setUser(sessionData.getUser());
        userService.saveUserProfile(userProfileVO);
        model.addAttribute("PROFESSIONAL", professionalForm);

        return "Your Professional Details Updated";

    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-29T07:48:52.123

您是方法中参数的错误`@ModelAttribute`注释。`UserProfessionalForm professionalForm``forgotPassword`

```
@RequestMapping(value = "proffessional", method = RequestMethod.POST)
public @ResponseBody
String forgotPassword(@ModelAttribute UserProfessionalForm professionalForm,
        BindingResult result, Model model) {

    UserProfileVO userProfileVO = new UserProfileVO();
    userProfileVO.setUser(sessionData.getUser());
    userService.saveUserProfile(userProfileVO);
    model.addAttribute("professional", professionalForm);
    return "Your Professional Details Updated";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T09:44:48.367

试试这个

```
@RequestMapping(value = "proffessional", method = RequestMethod.POST)
    public @ResponseBody
    String forgotPassword(@ModelAttribute("PROFESSIONAL") UserProfessionalForm professionalForm,
            BindingResult result, Model model) {

        UserProfileVO userProfileVO = new UserProfileVO();
        userProfileVO.setUser(sessionData.getUser());
        userService.saveUserProfile(userProfileVO);
        model.addAttribute("professional", professionalForm);
        return "Your Professional Details Updated";
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-20T07:31:13.377

有关信息，我删除了 action 属性，当我调用 ajax 帖子时出现此错误..即使我在表单中的 action 属性看起来像这样`action="javascript://;"`

我以为我从 ajax 调用和序列化表单中得到了它，但是我再次将虚拟操作属性添加到表单中并且它起作用了。

# php - 更有效地减去数组

> ID：15699352
> 
> 赞同：0
> 
> 时间：2013-03-29T07:44:44.820
> 
> 标签：php, arrays

我有几个问题。得到这个数组：

```
$array_1  = array(
    "1" => "4",
    "2" => "8",
    "3" => "12",
    "4" => "16",
    "5" => "20",
    "6" => "24",
    "7" => "28",
    "8" => "32",
    "9" => "36",
    "10" => "40",
    "11" => "44",
    "12" => "48",
    "13" => "52",
    "14" => "56",
    "15" => "60",
    "16" => "64",
    "17" => "68",
    "18" => "72",
    "19" => "76",
    "20" => "80",
    "21" => "84",
    "22" => "88",
    "23" => "92",
    "24" => "96",
    "25" => "100",
    "26" => "104",
    "27" => "108",
    "28" => "112",
    "29" => "116",
    "20" => "120",
    "31" => "124",
    "32" => "128",
    "33" => "132",
    "34" => "136",
    "35" => "140",
    "36" => "144",
    "37" => "148",
    "38" => "152",
    "39" => "156",
    "40" => "160",
    "41" => "164",
    "42" => "168",
    "43" => "172",
    "44" => "176",
    "45" => "180",
    "46" => "184",
    "47" => "188",
    "48" => "192",
    "49" => "196",
    "50" => "200"
); 
```

我想将`$array_1`1,2,3,4 减去到多个数组中。到目前为止，我已经通过拥有其他数组来完成它：

```
$array_2  = array(
    "1" => "1",
    "2" => "1",
    ...
    "49" => "1",
    "50" => "1"
);

$array_3  = array(
    "1" => "2",
    "2" => "2",
    ...
    "49" => "2",
    "50" => "2"
);
// All the way to values of 4 
```

然后有了这个我会做一个`array_diff`得到降低的价值。

我首先想知道是否有更好的方法（更有效）让数组减去而不是重复 1、2、3、4 50 次。

其次，有没有更有效的方法让`$array_1`4 的倍数达到 200？

第三，我需要一个数组来减去`$array_1`这个值吗？有没有更好的方法，比如：`$array_1 - 1`

**预期输出**

```
// $array_1 - $array_2 (value of 1)
$minus_one = array(
    "1" => "3",
    "2" => "7",
    "3" => "11",
    ...
);
// $array_1 - $array_3 (value of 2)
$minus_two = array(
    "1" => "2",
    "2" => "6",
    "3" => "10",
    ...
);
// $array_1 - $array_4 (value of 3)
$minus_one = array(
    "1" => "1",
    "2" => "4",
    "3" => "8",
    ...
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T09:05:56.177

虽然 xdazz 是解决方案是正确的。您还可以直接通过以下方式生成最终的预期数组

```
$array_1 = array_fill(1, 50, null);
array_walk($array_1, function(&$item, $key){
  $item = $key * 4;
});

$minus_one = $minus_two = $minus_three = array();
foreach($array_1 as $key => $value)
{
    $minus_one[$key] = $value - 1 ;
    $minus_two[$key] = $value - 2 ;
    $minus_three[$key] = $value - 3 ;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T07:54:14.663

你可以像下面这样构造你的数组：

```
$array_1 = array_fill(1, 50, null);
array_walk($array_1, function(&$item, $key){
  $item = $key * 4;
});
var_dump($array_1); 
```

对于`$array_2`and `$array_3`，只需使用`array_fill`就足够了：

```
$array_2 = array_fill(1, 50, 1);
$array_3 = array_fill(1, 50, 2); 
```

# java - 如何使用正则表达式根据模式拆分字符串

> ID：15699353
> 
> 赞同：3
> 
> 时间：2013-03-29T07:44:45.997
> 
> 标签：java, regex

我无法根据正则表达式拆分字符串。

```
String str = "1=(1-2,3-4),2=2,3=3,4=4";
Pattern commaPattern = Pattern.compile("\\([0-9-]+,[0-9-]+\\)|(,)") ;
String[] arr = commaPattern.split(str);
for (String s : arr)
{
    System.out.println(s);
} 
```

预期输出，

```
1=(1-2,3-4)     
2=2    
3=3    
4=4 
```

实际输出，

```
1=

2=2
3=3
4=4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T08:01:30.400

此正则表达式将根据需要 **拆分**

```
,(?![^()]*\\))
  ------------
      |->split with , only if it is not within () 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T08:13:53.253

这不太适合`split(...)`. 考虑扫描输入并`match`改为：

```
String str = "1=(1-2,3-4),2=2,3=3,4=4";

Matcher m = Pattern.compile("(\\d+)=(\\d+|\\([^)]*\\))").matcher(str);

while(m.find()) {
  String key = m.group(1);
  String value = m.group(2);
  System.out.printf("key=%s, value=%s\n", key, value);
} 
```

这将打印：

```
key=1, value=(1-2,3-4)
key=2, value=2
key=3, value=3
key=4, value=4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T07:54:19.153

您将不得不在这里使用一些前瞻机制。正如我所看到的，您试图将其拆分为不在括号中的逗号。但是你的正则表达式说：

```
Split on comma OR on comma between numbers in parenthesis 
```

所以你的字符串被分成 4 个地方 1) (1-2,3-4) 2-4) 逗号

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-03-29T07:47:03.007

```
String[] arr = commaPattern.split(str); 
```

应该

```
String[] arr = str.split(commaPattern); 
```

# c# - asp.net 向数据库插入文本在 Chrome/Firefox 中有效，但在 IE 中无效

> ID：15699354
> 
> 赞同：1
> 
> 时间：2013-03-29T07:44:54.897
> 
> 标签：c#, asp.net, sql-server, internet-explorer

我有一个非常奇怪的问题，我有一个 ASP.NET 文件，它接受用户的输入并插入数据库。此屏幕可正常使用 chrome/firefox，但不适用于 IE。我看到，在 IE 中，它插入了一行，但它插入了 EMPTY 字符串。

这是在 IE 中作为空字符串插入的文本框之一

```
<asp:TextBox ID="txt_post_header" runat="server" ></asp:TextBox> 
```

这是提交按钮的代码。

```
 protected void btn_submit_Click(object sender, EventArgs e)
{
    DbCommand dbCommand;
    try
    {
        ////////////////////////////////////////////////////////////////
        dbCommand = db.GetStoredProcCommand("MedBul_New_Post");
        db.AddInParameter(dbCommand, "PostHeader", DbType.String, txt_post_header.Text.Trim());
        db.AddInParameter(dbCommand, "PostBody", DbType.String, txt_post_body.Text.Trim());
        db.ExecuteNonQuery(dbCommand);

        Session["TestSessionPostHeader"] = txt_post_header.Text.Trim();
        /////////////////////////////////////////////////////////////////
    }
    catch (Exception ex)
    {
        lbl_result.Text = "Error Submit 1: " + ex.Message.ToString();
    } 
```

我从来没有遇到过这个问题，我知道 html+css+javascript 在不同的浏览器中表现不同，但我从未见过背后的代码表现不同。

你认为问题是什么？

# oauth - 谷歌 OAuth 在异常端口上提供服务

> ID：15699357
> 
> 赞同：3
> 
> 时间：2013-03-29T07:45:01.013
> 
> 标签：oauth, https, timeout, port, google-oauth

出于安全原因，我在一个不寻常的端口上运行了自己的网站：端口 11223 上的 https 而不是 443。

本网站提供使用 google 帐户登录的功能，通过使用 google OAuth API 实现。

在身份验证的最后一步（从 google OAuth 重定向回我的系统），发生网络超时。

另一方面：如果我的服务器在默认端口 443 而不是 11223 上运行 https，则一切正常。

我已经配置了使用特殊端口 112233 的 google OAuth 客户端设置（重定向 URI、主页 URL、JavaScript 来源）。但没有成功。

也许重要的是要知道，服务器位于带有 NAT 的防火墙后面。这意味着，防火墙接收到端口 11223 的 https 连接，以将其重定向到仅在端口 11223 上运行 https 的内部网络服务器。但我认为，这不是重点。

可能是什么原因，为什么端口 443 工作但端口 11223 没有。我猜谷歌 OAuth 不支持在不寻常的 prot 上运行的网络服务器！？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:37:13.740

端口号为 16 位，因此不能超过 65535。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T04:19:53.827

会不会是代理配置问题？我建议您将防火墙配置为在端口 11223 上返回 404，然后看看会发生什么。

# android - Android 中谷歌地图应用程序中的 getMap()

> ID：15699360
> 
> 赞同：0
> 
> 时间：2013-03-29T07:45:21.543
> 
> 标签：android

我试图在我的应用程序中调用 getMap() 并且总是在该行出现错误

```
map = ((SupportMapFragment) getActivity().getSupportFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

显示 GoogleMap 的活动是作为片段实现的。有什么问题？我的整个活动如下所示。

```
 package sg.SanThit.TrackMe;

 import android.annotation.SuppressLint;
 import android.database.Cursor;
 import android.os.Bundle;
 import android.support.v4.app.Fragment;
 import android.view.LayoutInflater;
 import android.view.Menu;
 import android.view.MenuInflater;
 import android.view.MenuItem;
 import android.view.View;
 import android.view.ViewGroup;
 import android.widget.Toast;

 import com.google.android.gms.maps.GoogleMap;
 import com.google.android.gms.maps.SupportMapFragment;

 public class MyDetailsFragment extends Fragment {
 private TrackerInfo trackerDetailInfo;
 GoogleMap map;

public MyDetailsFragment() {    
}

@SuppressLint("NewApi")
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getActivity().getActionBar().setDisplayHomeAsUpEnabled(true);
        map = ((SupportMapFragment)      
        getActivity().getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
        if (map == null) {
            Toast.makeText(getActivity(), "Google Maps not available", 
    Toast.LENGTH_LONG).show();
        }
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:08:42.363

使用`FragmentActivity`而不是`public class MyDetailsFragment extends Fragment`.

下面是加载地图的示例代码：

```
 public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.activity_map);

   map = ((SupportMapFragment)      
  getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
     } 
```

这`R.layout.activity_map`是包含地图片段的 XML 文件。

# javascript - 将 html 选择选项列表转换为单选按钮

> ID：15699363
> 
> 赞同：0
> 
> 时间：2013-03-29T07:46:01.690
> 
> 标签：javascript, html, radio-button

我有一个与选择/选项一起使用的 html 页面，我想将此功能转换为 input type=radio（列表到单选按钮）。

实际上我有一个这样的选择列表：

```
<select name="DEC-51537a4b580452b9e145b75c-A">
<option selected="" value="OK">OK</option>
<option value="NOK">NOK</option>
</select>

<select name="DEC-51537a4b58045459e145b75c-R">
<option selected="" value="OK">OK</option>
<option value="NOK">NOK</option>
</select>

<select name="DEC-51537a88880452b9e145b75c-A">
<option selected="" value="OK">OK</option>
<option value="NOK">NOK</option>
</select> 
```

用户选择他想要的值并单击一个按钮。该按钮调用一个 javascript 来获取每个“DEC-”的结果。

对于以“DEC-”开头的每个选择，我检索： - dec-number（例如 51537a88880452b9e145b75c） - 原始 dec 值（A 或 R） - 我得到 select.value 以检索用户选择的 dec 值

如果我想将选择转换为输入类型=收音机，首先我将选择更改为：

```
<input name="DEC-51537a4b580452b9e145b75c-A" type="radio" checked value="A">A
<input name="DEC-51537a4b580452b9e145b75c-A" type="radio" value="R">R 
```

这里的javascript函数适用于选择但不适用于单选按钮：

```
 var elements = $doc.getElementsByTagName('select');

  var sel;

  for(var i=0; i<elements.length; i++){
      sel = elements[i];

       if(sel.name.indexOf('DEC-') === 0){
          var selName = sel.name.split('-');
          var oid = selName[1];
          var originalDecision = selName[2];
          var supervisorDecision = sel.value;

          decisions++;
          if(originalDecision == supervisorDecision) {
              rightDecisions++;
          } else {
              wrongDecisions++;

              if(originalDecision == "ACCEPTED") {
                  originalDecision="<h3 class='green'>ACCEPTED</h3>";
              } else if(originalDecision == "REFUSED") {
                  originalDecision="<h3 class='red'>REFUSED</h3>";
              }

              if(supervisorDecision == "ACCEPTED") {
                  supervisorDecision="<h3 class='green'>ACCEPTED</h3>";
              } else if(supervisorDecision == "REFUSED") {
                  supervisorDecision="<h3 class='red'>REFUSED</h3>";
              }

              var content = $doc.getElementById(oid).innerHTML;
              wrongDecisionsTab += "<tr><td>" + content + "</td><td>" 
               + originalDecision + "</td><td><h3>" + supervisorDecision + "</h3></td></tr>";
          }

      }

  } 
```

我需要相同的东西，但有单选按钮，所以我试图改变：

```
 var elements = $doc.getElementsByTagName('input'); 
```

但这还不够。我错过了什么？

# c# - 如何检索 ASP.NET MVC 在为模型属性构建 HTML 控件时将使用的 NAME 和 ID 属性值

> ID：15699366
> 
> 赞同：2
> 
> 时间：2013-03-29T07:46:13.237
> 
> 标签：c#, asp.net-mvc, model-binding

我想让一个小程序能够在应该从表单中获取数据的控制器上发布数据。我的问题是我不知道如何以编程方式检索 ASP.NET MVC 将用于为每个属性构建 HTML 控件的 NAME 和 ID 属性（以便我可以将它们提供给小程序以使用它们进行发布）。

如何检索 APS.NET MVC 在为模型变量构建 HTML 控件时（例如使用时`@Html.TextAreaFor()`）将使用的 NAME 和 ID 属性值？

**编辑：** 我想我只需要 NAME 属性。似乎我可以使用反射得到这个，但我不确定......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:25:26.713

您可以像这样创建一个 html 助手来获取模型属性的 html 名称：

```
public static string FullHtmlNameFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression)
    {
        if (htmlHelper == null) { throw new ArgumentNullException("htmlHelper"); }
        if (expression == null) { throw new ArgumentNullException("expression"); }

        return htmlHelper.ViewData.TemplateInfo.GetFullHtmlFieldName(ExpressionHelper.GetExpressionText(expression));
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T14:33:52.703

现在还有

```
Html.FieldNameFor()
Html.FieldIdFor() 
```

# ios - 从 NSUserDefault 问题加载数组

> ID：15699372
> 
> 赞同：-2
> 
> 时间：2013-03-29T07:47:03.027
> 
> 标签：ios, nsarray, nsuserdefaults

我想从 nsuserdefault 加载数组，然后我想在该数组中添加一些东西，然后在我想用新更新的数组更新我的 nsuserdefault 之后，我正在执行以下操作

```
NSUserDefaults *defs = [NSUserDefaults standardUserDefaults];
if([defs valueForKey:@"Images"] )
{
    [appDelegate.arrayOfPaths addObject :[NSString stringWithFormat:@"%@", [defs valueForKey:@"Images"]]];
}
[appDelegate.arrayOfPaths addObject:path];
NSLog(@"_arrayOfPaths%@",appDelegate.arrayOfPaths);
[defs setObject:appDelegate.arrayOfPaths forKey:@"Images"];
NSLog(@"%@",[defs valueForKey:@"Images"]);
[appDelegate.arrayOfPaths removeAllObjects]; 
```

所以我的问题首先是当我使用 NSUserdefalut 加载数组时，它会使用一个包含一个对象（字符串）的数组来归档，然后我用新字符串更新我的数组，然后将其添加到 nsuserdefalut 中，但是在 nsuserdefalut 中，第一个对象是数组一个字符串，另一个只是字符串，我不想要这个。我只想要 nsuserdefault 中的一个数组，其中包含所有字符串。请告诉我如何实现这一目标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:49:51.250

替换您的代码行....

```
 [appDelegate.arrayOfPaths addObject :[NSString stringWithFormat:@"%@", [defs valueForKey:@"Images"]]]; 
```

就像这样在 nsuser 默认值中获取一个数组中的所有字符串...

```
 [appDelegate.arrayOfPaths addObjectsFromArray : [defs valueForKey:@"Images"]]]; 
```

这将满足您的要求。

# c# - 如何以编程方式检查 Windows 7 中是否注册了任何手指？

> ID：15699382
> 
> 赞同：1
> 
> 时间：2013-03-29T07:48:22.660
> 
> 标签：c#, windows-7, biometrics, credential-providers

我正在使用 c# 在 Windows 7 中编程。

我正在开发 WBF 入学申请。

我想检查该系统中是否注册了任何指纹。

我也试过getenablesetting功能。但它只启用或不启用生物识别选项。但我想知道指纹注册与否？

如何做到这一点？

# ruby-on-rails - 用 Kaminari 替换 Will_paginate

> ID：15699391
> 
> 赞同：2
> 
> 时间：2013-03-29T07:48:54.933
> 
> 标签：ruby-on-rails, will-paginate, kaminari

我正在用 Kaminari 替换 will_paginate 并且我的大部分应用程序使用具有多个条件的 .paginate 方法。

```
@posts = Post.published.paginate(:order => 'published_at desc, id',
                                  :joins => :comments,
                                  :conditions => conditions,
                                  :group => "posts.id",
                                  :per_page => 10, 
                                  :page => params[:page]) 
```

我正在寻找用 kaminari 替换此类代码的最快方法和最有效方法。

而不是

```
@posts = Post.published.paginate.order('published_at desc').....page().per() 
```

# background - PNG图像不透明度在浏览器中不起作用

> ID：15699392
> 
> 赞同：0
> 
> 时间：2013-03-29T07:48:57.530
> 
> 标签：background, web, png, photoshop

正如您在此处看到的 Photoshop 中的屏幕截图：

![在此处输入图像描述](../Images/59706557d517e292ca594b266c20b163.png)

在我将它保存到网络后，使用 PNG-24 格式，这就是它在我的网站上的样子：

![http://i.stack.imgur.com/HFU2y.png](../Images/fe42a4cdd9442923d5f08561cd3048cb.png)

为什么图像不透明度在我的浏览器上不起作用？使用火狐。

实际PNG：

![http://i.imgur.com/F3EAwzn.png](../Images/c4664dbb654b374574aa50aa0175eae5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T13:47:07.943

我不确定您想要的效果是什么，但我认为您希望渐变在底部消失。有了这个假设，渐变的问题在于它从顶部的棕色渐变到底部的白色。

你的渐变看起来像这样：

![在此处输入图像描述](../Images/01d1c2fea50939e9d23b0b9e121d7356.png)

您想将渐变两侧的颜色更改为相同的棕色，然后将右侧的不透明度降低到 0%，如下所示：

![在此处输入图像描述](../Images/b13d2e975dc1366376ddba76608a6a05.png)

我已经为你调整过了，所以这里是：

![在此处输入图像描述](../Images/36903a0d851bb5e44b25acf484066592.png)

它在白色背景上看起来没有任何不同，但是当它在另一种颜色或纹理上时，您会看到不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:11:45.193

您的 Photoshop 图层是否添加了一些效果？即相乘等。这意味着该层依赖于它下面的东西并受到它的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T08:26:27.307

多年前我面临同样的问题。当我们为网络保存文件或图像时。它应该**另存为网页**，当我们以 PNG 格式保存时，请确保关闭所有背景图层。然后只需保存为网络并从设置选项中选择 PNG(24)。

& 是 确保您在网络中通过图像的位置必须在标签中包含 CSS。

`background-color:none;`

# asp.net - 获取 ASP.NET 中目录内的文件夹计数

> ID：15699393
> 
> 赞同：1
> 
> 时间：2013-03-29T07:49:07.653
> 
> 标签：asp.net

我想在 asp.net 的父文件夹中获取文件夹（子文件夹）的数量。

我试过`int directoryCount = Server.MapPath("~/folder1/folder2/").Length;`

但没有得到正确的价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:50:47.377

使用[`DirectoryInfo.GetDirectories`](http://msdn.microsoft.com/en-us/library/s7xk2b58.aspx)方法获取目录并计算它们，如：

```
DirectoryInfo di = new DirectoryInfo(Server.MapPath("~/folder1/folder2/"));
DirectoryInfo[] diArr = di.GetDirectories();

int count = dirArr.Length; //Total directories under the folder 
```

上面会返回你的路径下的子目录，它不是递归的，如果你想递归地找到所有目录然后使用重载[`DirectoryInfo.GetDirectories Method (String, SearchOption)`](http://msdn.microsoft.com/en-us/library/ms143325.aspx)

```
DirectoryInfo[] diArr = di.GetDirectories(Server.MapPath("~/folder1/folder2/"),
                                          SearchOption.AllDirectories); 
```

# javascript - 将数组传递给 jquery ajax 后面的代码

> ID：15699395
> 
> 赞同：7
> 
> 时间：2013-03-29T07:49:08.393
> 
> 标签：javascript, jquery, asp.net, ajax

我必须将二维数组传递给在 asp.net 网页后面的代码中编写的页面方法我有一个变量`objList`作为二维数组。我使用以下代码实现了这一点，但没有成功，并且没有调用页面方法。

**JAVASCRIPT**

```
function BindTable(objList) {

    $.ajax(
    {
           url: "CompCommonQues.aspx/SaveData",
           contentType: "application/json; charset=utf-8",
           dataType: "json",
           type: "POST",
           data: { data: objList },
           success: function (data) {
           //Success code here
    },
    error: function () { }
    });
  } 
```

**.CS 文件背后的代码**

```
 [WebMethod]
public static string SaveData(string[,] data)
{
    string[,] mystring = data;
    return "saved";
} 
```

有像 JSON.stringify(objList) 这样的方法将 json 数组传递给后面的代码，但无法实现。一个简单的调用，没有数组对我有用，比如

```
data: "{ 'data':'this is string' }", 
```

在后面的代码中

```
[WebMethod]
public static string SaveData(string data)
{
    string mystring = data;
    return "saved";
} 
```

传球有问题`data`。你能帮我如何将它传递给数组吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T08:01:11.587

在 JavaScript 中尝试正确的 JSON 表示法

```
var objList = new Array();
objList.push(new Array("a","b"));
objList.push(new Array("a", "b"));
objList.push(new Array("a", "b"));

   $.ajax({
       type: "POST",
       url: "copyproduct.aspx/SaveDate",
       data: "{'data':'" + JSON.stringify(objList) + "'}",
       contentType: "application/json; charset=utf-8",
       dataType: "json",
       success: function (msg) {
            alert(msg.d);
       }
   }); 
```

在后面的代码中，您可以使用 JavaScriptSerializer (System.Web.Script.Serialization) 进行反序列化

```
[WebMethod()]
public static string SaveDate(string data)
{
    JavaScriptSerializer json = new JavaScriptSerializer();
    List<string[]> mystring = json.Deserialize<List<string[]>>(data);
    return "saved";
} 
```

我不得不反序列化为字符串数组的通用列表，因为您无法反序列化为字符串（检查：[http](http://forums.asp.net/t/1713640.aspx/1) ://forums.asp.net/t/1713640.aspx/1 ）

# c# - 如何在 XML 中使用 LINQ 合并相同 Id 节点的子节点

> ID：15699396
> 
> 赞同：0
> 
> 时间：2013-03-29T07:49:12.230
> 
> 标签：c#, linq-to-xml

```
<Description>116423<ul><li>Creation Story</li></ul></Description>
<Description>116423<ul><li>Promise</li></ul></Description>
<Description>116423<ul><li>My House Is the Red Earth</li></ul></Description>   <Description>116423<ul><li>Letter From the End of the Twentieth Century</li></ul></Description>
<Description>116423<ul><li>Fear Poem     </li></ul></Description>
<Description>116423<ul><li>The Real Revolution is Love</li></ul></Description><Description>116423<ul><li>For Anna Mae Pictou Aquash</li></ul></Description><Description>116423<ul><li>She Had Some Horses </li></ul></Description><Description>116423<ul><li>The Myth of Blackbirds</li></ul></Description>
<Description>116423<ul><li>A Postcolonial Tale </li></ul></Description> 
```

这是我的 XML，您可以看到描述节点包含与其他节点相同的 ID，但 li 标记包含所有不同的值。现在我想将所有 li 节点合并到一个描述和 ul 节点中，如下所示：

```
 <description>
    <ul>
               <li>Creation Story</li>
    <li>Promise</li>
    <li>My House Is the Red Earth</li>
    <li>Letter From the End of the Twentieth Century</li>
    <li>Fear Poem</li>
    <li>The Real Revolution is Love </li>
    <li>For Anna Mae Pictou Aquash </li>                                                                                                                                                                                                                                     
    <li>She Had Some Horses </li>                                                                                                                                                                                                                                            
    <li>The Myth of Blackbirds  </li>                                                                                                                                                                                                                                        
    <li>A Postcolonial Tale </li>
    </ul>
</description> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:35:22.753

```
var xml = @"
<root>
<Description>116423<ul><li>Creation Story</li></ul></Description>
<Description>116423<ul><li>Promise</li></ul></Description>
<Description>116423<ul><li>My House Is the Red Earth</li></ul></Description>   <Description>116423<ul><li>Letter From the End of the Twentieth Century</li></ul></Description>
<Description>116423<ul><li>Fear Poem     </li></ul></Description>
<Description>116423<ul><li>The Real Revolution is Love</li></ul></Description><Description>116423<ul><li>For Anna Mae Pictou Aquash</li></ul></Description><Description>116423<ul><li>She Had Some Horses </li></ul></Description><Description>116423<ul><li>The Myth of Blackbirds</li></ul></Description>
<Description>116423<ul><li>A Postcolonial Tale </li></ul></Description>
</root>
";
var elem=XElement.Parse(xml);

var newElem=new XElement("Description", 116423, 
    new XElement("ul",
        from li in elem.Descendants("li") select li
    )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:47:01.660

我想您还需要按 id 对节点进行分组：

```
var root = XElement.Parse(xml);

var newRoot = new XElement("root",
    from d in root.Descendants("Description")
    group d by ((XText)d.FirstNode).Value into g
    select new XElement("Description",
        new XElement("ul", g.Descendants("li")))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T08:44:16.853

```
 XDocument xdoc = XDocument.Load(@"XMLFile1.xml");
    var modified = new XElement("Description", new XElement("ul", xdoc.Elements("Description").Elements("ul").Elements("li"))); 
```

这是结果:)

```
<Description>
  <ul>
    <li>Creation Story</li>
    <li>Promise</li>
    <li>My House Is the Red Earth</li>
    <li>Letter From the End of the Twentieth Century</li>
    <li>Fear Poem     </li>
    <li>The Real Revolution is Love</li>
    <li>For Anna Mae Pictou Aquash</li>
    <li>She Had Some Horses </li>
    <li>The Myth of Blackbirds</li>
    <li>A Postcolonial Tale </li>
  </ul>
</Description> 
```

# php - 在数组 zend 框架中更改值

> ID：15699398
> 
> 赞同：0
> 
> 时间：2013-03-29T07:49:19.083
> 
> 标签：php, arrays

我正在为我的阵列而苦苦挣扎。我得到一个这样的数组：

```
Array
(
    [state] => Array
            (
                [0] => Array
                    (
                        [state] => 1
                    )

                [1] => Array
                    (
                        [state] => 2
                    )

            )
) 
```

我想将 1 更改为“活动”，将 2 更改为“非活动”。我已经有了一个控制器，它得到了这个 1 和 2。控制器看起来像：

```
if ($name == 'state') {
    foreach ($dropdownArray[$name] as $arrayName) {
        if ($arrayName[$name] == '1') {
            echo $arrayName[$name];
            $arrayName[$name] = 'active';
        } else {
            echo $arrayName[$name];
            $arrayName[$name] = 'inactive';
        }
    }
 } 
```

使用 $name 我从下拉字段中获取值。所以在这种情况下 $name = state.

正如预期的那样，我得到了 1 和 2 的回声。所以他得到了很好的价值。但是如何将此值设置为活动和非活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:57:54.797

使用 $dropdownArray[$name] 而不是 $arrayName[$name] 这样

```
foreach ($dropdownArray[$name] as $key=>$arrayName) {
    if ($arrayName[$name] == '1') {
        $dropdownArray[$name][$key][$name] = 'active';
    } else {
        $dropdownArray[$name][$key][$name] = 'inactive';
    }
} 
```

# hibernate - 休眠限制中的日期重叠

> ID：15699402
> 
> 赞同：3
> 
> 时间：2013-03-29T07:49:42.460
> 
> 标签：hibernate, date, overlap, restrictions

在 SQL 中，我们可以检查日期重叠为

```
SELECT (DATE '2001-02-16', DATE '2001-12-21') OVERLAPS
   (DATE '2001-10-30', DATE '2002-10-30'); 
```

我们如何使用 hibernate 来模仿`Restrictions`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:47:57.890

采用：

```
 criteria.add(Restrictions.ge("endDate", startDate2));
 criteria.add(Restrictions.le("startDate", endDate2)); 
```

在哪里：

`startDate`并且`endDate`是您实体的日期。

# core-data - 核心数据在多次保存时冻结应用

> ID：15699404
> 
> 赞同：0
> 
> 时间：2013-03-29T07:49:58.917
> 
> 标签：core-data, moc

我在将数据保存在核心数据中时遇到问题。我必须通过单击按钮将多个书籍信息保存在数据库中。当我单击按钮时，我调用该方法并将书籍信息保存在数据库中。前三下点击可以很好地保存图书信息，并且 ui 也是响应式的。当我第四次单击该按钮时，用户界面会在保存结束时冻结。

代码如下。

```
+(void) storeBookInfo:(NSDictionary *) bookInfo inContext:(NSManagedObjectContext *) ctx {

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    NSManagedObjectContext *tempCtx = [[NSManagedObjectContext alloc]initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    [tempCtx setPersistentStoreCoordinator:appDelegate.persistentStoreCoordinator];
    [tempCtx setUndoManager:nil];

    NSNotificationCenter *notify = [NSNotificationCenter defaultCenter];
    [notify addObserver:self
               selector:@selector(mergeChanges:)
                   name:NSManagedObjectContextDidSaveNotification
                 object:tempCtx];

    NSFetchRequest *req = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Book" inManagedObjectContext:tempCtx];
    [req setEntity:entity];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"bid==%@", [bookInfo objectForKey:@"bid"]];
    [req setPredicate:predicate];

    [req setFetchLimit:1];
    [req setReturnsObjectsAsFaults:NO];
    NSArray *bookObjects = [tempCtx executeFetchRequest:req error:nil];
    if([bookObjects count] > 0){
        NSError *err;
        Book *wi = [bookObjects objectAtIndex:0];
        wi.purchaseInfo = [NSNumber numberWithInt:[[bookInfo objectForKey:@"purchaseInfo"] intValue]];
        if (![tempCtx save:&err]) {
            NSLog(@"Problem saving book info..");
            NSLog(@"err: %@", [err userInfo]);
            [[NSNotificationCenter defaultCenter] removeObserver:self];
            [tempCtx undo];
            tempCtx = nil;

        } else {
            NSLog(@"Book saved. in if part");
            tempCtx = nil;
            [[NSNotificationCenter defaultCenter] removeObserver:self];
        }
    }
    else {

        Book *book = [NSEntityDescription insertNewObjectForEntityForName:@"Book" inManagedObjectContext:tempCtx];
        book.bid     = [bookInfo objectForKey:@"bid"];
        book.title  = [bookInfo objectForKey:@"title"];
        book.thumbnailImgId = [bookInfo objectForKey:@"imageUrl"];
        book.downloadState  = [NSNumber numberWithInt:0];
        book.pid = [bookInfo objectForKey:@"pid"];
        book.purchaseInfo = [NSNumber numberWithInt:[[bookInfo objectForKey:@"purchaseInfo"] intValue]];
        book.discription = [bookInfo objectForKey:@"desc"];
        NSError *err;
        if (![tempCtx save:&err]) {
            NSLog(@"Problem saving book ifo..");
            NSLog(@"err: %@", [err userInfo]);
            [[NSNotificationCenter defaultCenter] removeObserver:self];
            [tempCtx undo];
            tempCtx = nil;

        } else {

            NSLog(@"Book saved.");
            tempCtx = nil;
            [[NSNotificationCenter defaultCenter] removeObserver:self];
        }
    }

}

+ (void)mergeChanges:(NSNotification*)notification
{
    AppDelegate *theDelegate = [[UIApplication sharedApplication] delegate];
    [[theDelegate managedObjectContext]          performSelectorOnMainThread:@selector(mergeChangesFromContextDidSaveNotification:) withObject:notification waitUntilDone:YES];

} 
```

我创建了一个临时 MOC，因为代码在后台线程中，每次保存后我都会发送通知。

对于按钮应用程序的第四次点击获得冻结。我被困在这一点上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:18:38.830

*假设：

`+storeBookInfo:inContext:`总是在 BG 线程中调用

使用 ARC

*请注意：

`self`in`+storeBookInfo:inContext:`是类本身，`removeObserver:`它将删除所有观察信息（您可能会错过某些时间的合并，请考虑`removeObserver:name:object:`改用，而不是立即使 tempCtx 无效）

您正在使用：`NSPrivateQueueConcurrencyType`但不使用它的`performBlock:`或`performBlockAndWait:`方法（考虑使用`NSConfinementConcurrencyType`）

如果`+mergeChanges:`将在主线程上调用您的应用程序将卡住（考虑添加：

```
 NSAssert(![NSThread isMainThread],@"The application will get stuck"); 
```

确保或修改您的合并流程）

# javascript - 删除字符

> ID：15699408
> 
> 赞同：1
> 
> 时间：2013-03-29T07:50:12.277
> 
> 标签：javascript, string

我有一个像“|aaaaaaaaaaaaaa|aaaaaaaaa|aaaaaaaaaaaa|”这样的字符串......现在我只想删除字符“|” 并将它们替换为“/n”。

我尝试了这些不成功：

```
function removeSeperator(str){
str = str.replace('|', "\n");
return str;}

function removeSeperator(str){
var rs="";
var i = 0;

for(i=0;i<str.trim().length;i++){
    if(str[i]=="|"){
        rs += str.substring(0, i) + "/n";
        str = str.substring(i+1);
    }
}

return rs;} 
```

我必须在纯 javascript 上执行此操作，不允许使用 jquery。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T07:51:52.940

要替换多个字符，您需要一个带有全局修饰符的正则表达式：

```
var a = "|aaaaaaaaaaaaaa|aaaaaaaaa|aaaaaaaaaaaa|";

var b = a.replace(/\|/g, "\n"); 
```

[**小提琴**](http://jsfiddle.net/8TQFM/1/)

作为一个可调用函数，它将是：

```
function removeSeperator(str){
    return str.replace(/\|/g, "\n");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T07:54:47.937

您可以创建一个正则表达式来执行替换。

```
function removeSeperator(str){
    str = str.replace(/\|/g, "\n");
    return str;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T08:03:24.310

问题是javascript替换方法支持奇异值，例如'|' 只会替换字符一次。另一方面，您可以使用诸如“/\|/g”之类的正则表达式，它将替换所有出现的“|” 用一条新线。实际上，您的代码看起来像这样 -

```
 function replaceString ( str ) {
        cleanedString = str.replace(/\|/g, "\n");
        return cleanedString;
    }
    var theString = "|aaaaaaaaaaaaaa|aaaaaaaaa|aaaaaaaaaaaa|";

    window.alert(replaceString(theString)); 
```

输出看起来像 -

啊啊啊啊啊啊

啊啊啊啊

啊啊啊啊啊

大致上，这就是您所期望的。希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T08:04:24.030

你只需要一个正则表达式：

```
function removeSeperator(str){
    str = str.replace(/\|/g,'\n');
    return str;
} 
```

[小提琴](http://jsfiddle.net/b2vBw/1/)

简单替换仅适用于第一个条目。如果这是您的实际代码，还有 2 个同名的函数 .. 可能会给您带来一些问题。

# ruby - ruby 脚本中的语法错误（意外的keyword_end 和意外的$end）

> ID：15699413
> 
> 赞同：0
> 
> 时间：2013-03-29T07:50:48.590
> 
> 标签：ruby, syntax-error

我正在编写一些代码作为编程问题的解决方案。我刚刚在我的解决方案中引入了一个新功能，它导致了以下错误。请注意，如果没有此功能，错误就不存在。

```
search.rb:48: syntax error, unexpected keyword_end
search.rb:68: syntax error, unexpected $end, expecting keyword_end 
```

我意识到这是由错误的结尾引起的。我就是找不到。（我已经用注释标记了第一个错误的位置。第二个错误是最后一行代码，这里没有显示。）

```
def processing_function
    qcount = pcount = $n
    qstrength = 0
    $query_hash.each do |qkey, qvalue|
        print "Q",qkey,": "
        $page_hash.each do |pkey, pvalue|
            qvalue.each_index do |i|
                pvalue.each_index do |j|
                    if qvalue[i]==pvalue[j]
                        qstrength = qstrength + qcount*pcount
                    end
                    pcount--
                end #** This is line 48\. First error occurs here. **#
                qcount--
                pcount=$n
            end
            if qstrength!=0
                print "P",pkey," "
            end
            qstrength=0
        end
        print "\n"
    end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T08:24:12.470

Ruby 没有`--`or`++`运算符。例如，`+= 1`改为使用。

[有一篇关于 C/C++ 和 Ruby 差异的简短文章](http://www.ruby-lang.org/en/documentation/ruby-from-other-languages/to-ruby-from-c-and-c-/)。

# c++ - 访问插件中的符号列表

> ID：15699414
> 
> 赞同：0
> 
> 时间：2013-03-29T07:50:51.130
> 
> 标签：c++, dynamic-loading, libltdl

我正在使用 libltdl 来动态加载插件库。一直在关注这个[文档](http://www.gnu.org/software/libtool/manual/html_node/Libltdl-interface.html#Libltdl-interface)，在我打电话给这个之后

```
lt_dlhandle lt_dlopen (const char *filename) 
```

我需要知道这个库中定义了哪些符号。我需要将符号列表传递给

```
void * lt_dlsym (lt_dlhandle handle, const char *name) 
```

这需要一个符号名称作为参数。

在我的插件中获取可加载导出符号列表的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:05:59.867

就像 Matthieu M. 在他的评论中所说的那样，没有本地方法可以从动态库中获取已加载符号的列表。

但是，我通常使用这种解决方法，即让您的插件在容器中声明符号，然后从您的主程序中检索此容器。

**插件.h**

```
#include <set>
#include <string>

// call this method from your main program to get list of symbols:
const std::set<std::string> & getSymbols();

void MySymbol01();
bool MySymbol02(int arg1, char arg2); 
```

**插件.c**

```
#include "plugin.h"

class SymbolDeclarator {
    public:
    static std::set<std::string> symbols;
    SymbolDeclarator(const std::string & symbol) {
        symbols.insert(symbol);
    }
};

const std::set<std::string> & getSymbols() {
    return SymbolDeclarator::symbols;
}

#define SYMBOL(RETURN, NAME) \
    static const SymbolDeclarator Declarator##NAME(#NAME); \
    RETURN NAME

SYMBOL(void, MySymbol01)() {
    // write your code here
}

SYMBOL(bool, MySymbol02)(int arg1, char arg2) {
    // write your code here
} 
```

我只看到这个解决方案有 2 个问题：

1.  拥有一个非常量静态变量：`symbols`在 plugin.c -> 非线程安全中声明。
2.  在 main() 之前执行代码，这很难调试。

# knockout.js - 我输入的 BindingHandlers 没有正确解释敲除

> ID：15699418
> 
> 赞同：3
> 
> 时间：2013-03-29T07:51:34.623
> 
> 标签：knockout.js, durandal

我在一个使用 durandal 模板的网站上工作。

我的日期有这个 bindingHandlers：

```
ko.bindingHandlers.date = {
    update: function (element, valueAccessor, allBindingsAccessor) {
        var value = valueAccessor();  // 'Mon Sep 10 2012 02:00:00 GMT+0200 (Paris, Madrid (heure d’été))'; 
        var date = moment(value());
        $(element).val((date.format('DD/MM/YYYY')));
    }
}; 
```

这是我认为的电话：

```
<input type="text" class="datepicker" data-bind="date: demandDate" /> 
```

这用于以正确的格式格式化我的日期。它有效我的意思是我的日期在我的输入字段中的格式正确。

但**问题是，每当在输入字段中修改日期时，系统都没有检测到任何变化。**

如果我将“日期”替换为“值”，则当值更改时会正确解释它，但我错过了格式：

```
<input type="text" class="datepicker" data-bind="value: demandDate" /> 
```

任何的想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T09:43:22.990

`update:`绑定处理程序在`valueHasMutated()`从`knockout.js` `ViewModel`. 如果您想正确地`ViewModel`从您的自定义应用更改，`bindingHandler`那么您需要为`init:`输入的更改事件创建一个事件处理程序，然后对`ViewModel`.

例子：

```
ko.bindingHandlers.date = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        ko.utils.registerEventHandler(element, 'change', function (event) {
            valueAccessor().demandDate($(element).val());
        }
    },
    update: function (element, valueAccessor, allBindingsAccessor) {
        var value = valueAccessor();  // 'Mon Sep 10 2012 02:00:00 GMT+0200 (Paris, Madrid (heure d’été))'; 
        var date = moment(value());
        $(element).val((date.format('DD/MM/YYYY')));
    }
}; 
```

# telerik - Telerik Grid - BindTo、DataBinding

> ID：15699419
> 
> 赞同：0
> 
> 时间：2013-03-29T07:51:43.730
> 
> 标签：telerik

Telerik Grid Control 的 BindTo() 和 DataBinding() 属性有什么用。
在不使用这两个属性的情况下，我们可以绑定 Telerik Grid 并显示记录。
所以我想知道如何使用这两个属性来绑定telerik Grid，以及使用这些类型的绑定有什么好处。

在 Telerik 演示中，我看到了 DataBinding()
Ajax() 和 Server() 的两个属性——这两个属性有什么用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T17:33:15.873

[本教程](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-data-binding-ajax-binding.html)解释了服务器绑定和 Ajax 绑定之间的区别，并提供了有关完成 ajax 绑定的良好说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:30:18.743

通过使用 DataBinding 方法，我们可以动态绑定数据。在 ASP.net MVC 中，如果您像下面这样使用，那么在数据绑定期间，动作将从提到的控制器调用，动作将返回将绑定到网格的数据。对于搜索功能，DataBinding 方法非常有用。

```
.DataBinding(dataBinding => dataBinding.Ajax().Select("ActionName", "Controller")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-04T11:07:49.043

基本上， **Ajax**在您分页/排序/分组/过滤时使用 Ajax 请求，当您添加/更新/删除记录时也使用 Ajax 请求。

在**服务器**模式下，每个操作都向服务器发出 GET 或 POST 请求，并刷新整个页面。但是，当使用服务器绑定时，您有更好的搜索索引（如 google 等），您可以提供代表当前 Grid 集的 url-s。检查演示，您将看到不同之处。使用 Ajax 时，您肯定会获得更好的性能（更少的服务器负载）！

# java - 资源不会被提交到 svn 存储库中，即使它是非冲突文件

> ID：15699421
> 
> 赞同：0
> 
> 时间：2013-03-29T07:51:53.970
> 
> 标签：java, svn, eclipse-juno

我必须将我的开发分支合并到主干中，如果我在 Eclipse 中执行合并过程，则无法将某些资源从分支合并到主干中。其中一些会发生冲突，即使这些在我的工作副本中已解决，但在尝试提交到 SVN 存储库时，它会失败。请帮助我，如果有人有这方面的经验。由于 xxxx.java 中仍然存在冲突，我得到的错误消息就像操作失败，即使它是非冲突文件。显示操作失败对话框如下： ![在此处输入图像描述](../Images/57c9ff93e409a0d21e50f06880c35fd3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:04:43.213

您是否使用 将相关文件标记为已解决`svn resolved <filename>`？

# tiki-wiki - 在 Tiki-Wiki 上使用 LDAP

> ID：15699424
> 
> 赞同：1
> 
> 时间：2013-03-29T07:52:06.693
> 
> 标签：tiki-wiki

我正在使用 Tiki-Wiki 为我的公司创建一个 wiki。我需要使用 LDAP 进行用户身份验证。当我单击 Admin Login 页面上的 LDAP 选项卡时，LDAP 选项卡消失，只有 General Preferences 选项卡可见。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T18:13:12.877

确保您在 下选中了“高级” `Preference Filters`。你使用的是什么浏览器？还要确保您没有禁用 javascript。

# android - 我如何在android中编写自定义文本

> ID：15699426
> 
> 赞同：0
> 
> 时间：2013-03-29T07:52:24.553
> 
> 标签：android, internationalization, arabic, textinput

我正在尝试设计一个应用程序来编写自定义文本，其中文本类似于“محمّدُ”，但我无法使用软键盘编写字符“ُ”。

我尝试使用以下代码处理edittext中的keyevent：

```
public boolean onKey(View view, int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_B || keyCode = KeyEvent.KEYCODE_5) {
        editText1.setText("ً");          
        return true;
    }
    return false;       
} 
```

但是当我按下第 5 键（或输入键）时，文本工作正常（出现“ً”），当我按下键 B 时，文本不起作用，并且在文本框中输入了字符“B”。

然后我尝试了textwacher在下面显示的方式，但最终遇到了同样的问题

```
editText1.addTextChangedListener(new TextWatcher() {

public void afterTextChanged(Editable s) {
    editText1.setOnKeyListener(new OnKeyListener() {    
        public boolean onKey(View v, int keyCode,KeyEvent event) {
        // If the event is a key-down event on the "enter" button
           if (keyCode == KeyEvent.KEYCODE_M) {
               editText1.setText("م");
               return true;
           }
        return false;
        }
    }
});

@Override
public void beforeTextChanged(CharSequence s, int start, int count, int after) { }

@Override
public void onTextChanged(CharSequence s, int start, int before, int count) { } 
```

# php - 在 javascript 或 php 中渲染乳胶文档

> ID：15699434
> 
> 赞同：2
> 
> 时间：2013-03-29T07:53:10.947
> 
> 标签：php, javascript, latex, pdflatex

这是我想做的事情的大图。我的大学需要一个 wiki，我们可以在其中修改 tex 文件。结构与普通 wiki 相同（历史、评论等），但文档的代码只是乳胶。

**所以我想知道每次修改时是否有办法（javascript，php）在线编译乳胶文档？**

*注意：我在 google 和 stackoverflow 上进行了搜索，但还没有找到我想要的。我不需要 mathjax，因为我需要的不仅仅是数学方程式。我也读过这个解决方案（[PHP - LaTeX 渲染](https://stackoverflow.com/questions/3408278/php-latex-rendering)），但我宁愿只用 php 或 javascript 来做*

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T07:56:02.460

查看[LaTeX2HTML](http://www.latex2html.org/)以在服务器端运行进程，并[查看 LaTeX4Web](http://eric.chopin.pagesperso-orange.fr/latex/latex4web.htm)以使用 Javascript 在客户端运行。

此外，[这个问题](https://stackoverflow.com/questions/116054/what-is-the-best-way-to-embed-latex-in-a-webpage)也可能是相关的。

对于 PHP 特定项目，即使您没有使用 Drupal ，也请查看[http://drupal.org/project/drutex 。](http://drupal.org/project/drutex)它具有 latex2html 和 html2latex 功能。

# jquery - jquery 在 if else 条件下使用 scrollTop

> ID：15699439
> 
> 赞同：0
> 
> 时间：2013-03-29T07:53:49.417
> 
> 标签：jquery, if-statement

我正在使用带有 jquery 的“if else”，并且无法弄清楚如何正确填写第二个（即 scrollTop）条件 -

```
$(window).load(function(){  
     if (window.location.hash == '' && $(window).scrollTop() == 0) {

         doStuff_01('');

     } else {
         doStuff_02('');
     }
}); 
```

这是一个动画页面条目。如果用户刚刚出现在那里，它应该触发动画。但是，如果用户已经出现，向下滚动一点，然后点击“刷新”，它不应该触发动画。

我该怎么写：

如果 window.location.hash == ''

*和*

'窗口已经向下滚动了至少 1px' <--这是我无法理解的。

我什至应该使用 .scrollTop() 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:12:07.060

> 窗口已经向下滚动了至少 1px

可以在代码中表示为

```
if($(window).scrollTop() > 0) {
   ...
} 
```

# ruby-on-rails - 通过子域共享一个 cookie

> ID：15699441
> 
> 赞同：6
> 
> 时间：2013-03-29T07:54:11.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cookies, ruby-on-rails-3.2, subdomain

我有一个运行良好的博客子域，但是，登录与所有子域分离，因此，如果用户登录他的 cookie 仅在非子域页面上有效。如何设置我的应用程序以使 cookie 在所有子域和普通页面中都有效？

我完成了这个主题：[在 Rails 中的子域之间共享会话（cookies）？](https://stackoverflow.com/questions/10402777/share-session-cookies-between-subdomains-in-rails)但不幸的是没有成功。我什至尝试了这种漫长的逐步机架中间件方法，但没有成功。

我正在使用 Rails 3.2.13。

任何帮助表示赞赏！:)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-02T19:41:52.910

我需要做的就是在创建 cookie 时指定域，如上文所述。

```
cookies[:remember_token] = { value: user.remember_token, domain: ".lvh.me" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:29:26.523

放在`domain: all`config/session_store.rb 的行尾

例如。

```
YourApp::Application.config.session_store :encrypted_cookie_store, key: '_yourapp_session', domain: :all 
```

您可能还需要在 config/environments/production.rb 中更改此参数

```
config.action_dispatch.tld_length = 2 
```

如果您的域是，`example.com`那么您的 tld_length（顶级域长度）为 1（这是默认值）。 `example.com.au`是 2，`127.0.0.1.xip.io`是 5，依此类推。

# c - 超过 read() 的缓冲区大小

> ID：15699443
> 
> 赞同：0
> 
> 时间：2013-03-29T07:54:19.003
> 
> 标签：c, unix, input

```
#define MAX_BUFF_SIZE   64
char input[MAX_BUFF_SIZE];

int inSize = read(0, input, MAX_BUFF_SIZE);
if(inSize <= 0 || inSize > MAX_BUFF_SIZE){
     printf("An error occurred in the read.\n");
     exit(-1);
} 
```

我正在编写一个提示用户输入的程序，该输入的最大大小为 64 个字符。如果用户输入超过 64 个字符，程序应该退出。

我相信我使用`read()`正确，但即使我传入 > 64 个字符，它也永远不会导致任何错误/异常。我在这里做错了什么？

无论如何我可以检查用户是否使用 read() 输入了超过 64 个字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:57:44.830

`read()`永远不会读取超过您允许的数量的字节。如果您告诉它最多读取 64 个字节，即使有更多可用数据，它也最多读取 64 个字节。尚未读取的字节可用于进一步阅读（我假设`input`is `STDIN_FILENO`，在这种情况下它们只是留在标准输入缓冲区中）。

# java - Separatley 将数组列表索引表示为字符串

> ID：15699445
> 
> 赞同：0
> 
> 时间：2013-03-29T07:54:35.453
> 
> 标签：java, arraylist, tostring

到目前为止，我有一个 ArrayList 具有以下内容

```
[[2/11, 11/48], [8/35, 35/288], [16/43, 43/288], [75/152, 19/210], [4/5, 5/16], [135/163, 163/1680]] 
```

但是，我需要将其中的每个单独部分表示为字符串表示形式，如下所示，

```
{true@2/11, false@9/11}@11/48 
```

假@是真@的补充，不太确定如何将它们单独从列表中删除，例如我试过

```
knowledegeD.get(0) 
```

首先，但显然只是返回

```
{{true@[2/11, 11/48] 
```

关于我将如何解决这个问题的任何想法？

# ruby - 我如何点击 img（DevExpress 控件）？

> ID：15699446
> 
> 赞同：0
> 
> 时间：2013-03-29T07:54:38.787
> 
> 标签：ruby, eclipse, watir

我如何点击：

```
<td class="dxgvCommandColumn_Aqua dxgv" align="center">
<img title="Delete User" class="dxgvCommandColumnItem_Aqua dxgv__cci" onclick="aspxGVScheduleCommand('ctl00_ctl00_bodyPage_BodyPage_grApplicants',['CustomButton','DelAppl',0],1)" src="../images/delete.gif" alt="Delete User" style="cursor:pointer;">
</td> 
```

蚀。瓦提尔。红宝石。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:43:50.563

根据 OP，解决方案是使用一种`fire_event`方法来触发与标签`onclick`关联的事件：`<img>`

```
browser.image(:title => "Delete User").fire_event "onclick" 
```

# java - 如何在 ZK Chosenbox 组件中添加 ScrollBar？

> ID：15699447
> 
> 赞同：0
> 
> 时间：2013-03-29T07:54:39.650
> 
> 标签：java, scrollbar, zk

我正在使用**ZK Chosenbox**进行多项选择， **ZK Chosenbox**组件的问题是，如果我选择了 4-5 个项目，它会增加其自身的大小（高度或宽度），因此看起来很难看，因为覆盖页面中的其他组件而不是我会想要在 **ZK Chosenbox ** 中显示**滚动条。**![选择项目之前](../Images/5aa7e0ee40f477296218f8d6d7fba44a.png)

![选择项目后](../Images/e7c24118b135731cf7922de65fa6460b.png)

您可以在第二张图片中看到它与另一个组件重叠。可以以任何方式在**ZK Chosenbox**中使用滚动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T08:17:28.287

覆盖 [`overflow`](http://www.w3schools.com/cssref/pr_pos_overflow.asp)或者`overflow-y`如果你只想要垂直滚动条`.z-chosenbox`或者元素
到`scroll`or `auto`。

```
<chosenbox ... style="overflow:scroll"> 
```

或者

```
<style>
 .z-chosenbox {
      overflow:scroll
}
</style> 
```

# java - 在 Java 上加密信息并在 Objective-C/C++/C 上解密

> ID：15699450
> 
> 赞同：1
> 
> 时间：2013-03-29T07:54:41.283
> 
> 标签：java, c++, objective-c, encryption, blowfish

我正在尝试加密 Java 上的字符串并将其发送到 iOS 设备，到目前为止，我可以使用[此函数](http://tech.chitgoks.com/2009/07/15/encrypt-and-decrypt-using-blowfish-in-java/)轻松加密字符串，但困难的部分在 iOS 上。

在 iOS 上，我一直在尝试使用来自[http://www.schneier.com/blowfish-download.html](http://www.schneier.com/blowfish-download.html)的不同 Blowfish 库，但没有成功，这些算法甚至可能与 Java 输出不兼容，但我不确定所以我'想就在设备上解密这个字符串征求意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:36:37.013

使用`AES256`或`AES512`。关注`salt`和`seed`。或者您的加密字符串在其他机器上解密后可能无法读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:50:12.680

正如其他人所说，使用 AES 而不是 Blowfish。甚至 Schneier 也说不要使用 Blowfish - 如果您需要额外的安全性，请使用 Serpent，否则使用标准。

除了使用 AES，我还建议您使用[计数器模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)- 这种加密模式不需要填充，因此在匹配加密和解密方法时您需要担心的事情更少。但是，您可以使用除电子密码本之外的任何其他 NIST 模式。

# jodatime - Joda-time 如何获取当前标准时间，而不是系统时间

> ID：15699451
> 
> 赞同：1
> 
> 时间：2013-03-29T07:54:45.100
> 
> 标签：jodatime

使用 joda-time，如何获取当前标准时间，而不是系统时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:23:21.120

这个问题有点模棱两可，但要获得当前时间，您可以简单地使用：

```
new DateTime(); 
```

这将为您提供默认 Chronology（日历系统）和系统 TimeZone 中的 DateTime。但是，如果您想创建一个以不同或“标准时间”区域表示的 DateTime 对象。您可以使用：

```
new DateTime(DateTimeZone.UTC); 
```

或者您可以使用 DateTimeZone 来构造您感兴趣的不同时区。更详细的解释请参见：[DateTimeZone API 文档](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTimeZone.html)

# dart - 我在哪里可以下载 Dart 的离线文档？

> ID：15699455
> 
> 赞同：5
> 
> 时间：2013-03-29T07:54:49.607
> 
> 标签：dart

有没有比使用网络爬虫更好的方法来下载 Dart 文档以供离线查看？

我还没有找到任何东西！谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-31T04:11:15.533

[您可以从https://www.dartlang.org/tools/sdk/archive](https://www.dartlang.org/tools/sdk/archive)下载 API 文档的 zip

对于旧版本：

*   1.11： http: [//www.ecma-international.org/publications/files/ECMA-ST/ECMA-408.pdf](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-408.pdf)
*   2.0.0：[https ://github.com/chalin/dart-spec-and-grammar/blob/master/doc/dartLangSpec.pdf](https://github.com/chalin/dart-spec-and-grammar/blob/master/doc/dartLangSpec.pdf)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-08-29T15:08:57.523

[您可以在https://www.dartlang.org/tools/sdk/archive](https://www.dartlang.org/tools/sdk/archive)找到新的档案链接。有一个直接链接可以下载可以用浏览器查看的最新稳定 API 文档。

# sql - 别名的 Informix 组

> ID：15699456
> 
> 赞同：2
> 
> 时间：2013-03-29T07:54:53.547
> 
> 标签：sql, group-by, informix

根据此查询，我缺少什么：

```
SELECT mymonth, Header1
FROM
(
SELECT month(startdatetime) as mymonth, (CASE WHEN MyTable.somecolumn =2 THEN count(somecolumn2) END) as Header1
FROM MyTable WHERE year(startdatetime)=2013
group by startdatetime 

) x
GROUP BY Header1 
```

我在某处红色表示 Informix 不支持按别名分组，但是在尝试设置 GROUP BY 2 时，也出现错误 Column Header1 must be in a Group by 子句

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T08:56:12.843

这是您在该查询中得到的一些非常特殊的语法。我认为这`CASE`是导致问题的声明。

在这个更简单的版本中没有处理的实现是什么？

```
SELECT MONTH(startdatetime) AS mymonth, COUNT(*) AS header1
  FROM MyTable
  WHERE YEAR(startdatetime) = 2013
    AND somecolumn = 2
GROUP BY 1 
```

如果您正在尝试做一些比您在该`CASE`声明中放入示例更时髦的事情，那么我建议您尝试这样的事情：

```
SELECT ...., SUM(DECODE(somecolumn, 2, 1, 0)) 
```

...但通常当您`SUM()s`使用不同的谓词进行多重处理时，会使用这种语法风格。

* * *

*更新*

如果有多个计算谓词，我喜欢这样做：

```
SELECT ....
    SUM(CASE WHEN col1 = 1 THEN 1 ELSE 0 END) AS count1,
    SUM(CASE WHEN col3 = 7 AND col5 = 0 THEN 1
             WHEN col3 = 5 AND col5 = 1 THEN 1
             ELSE 0 END) AS count2
  FROM .... 
```

这为您提供了很大的灵活性，可以在 1 个 SQL 语句中计算很多不同的东西，只要它们的`GROUP`编辑方式相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:06:46.360

你的 SQL 很不寻常。Informix 服务器对 CASE 表达式是否为聚合感到困惑 — 我也是。如所写，您最好将查询重写为：

```
SELECT mymonth, Header1
  FROM (SELECT MONTH(startdatetime) AS mymonth,
               COUNT(somecolumn2)   AS Header1
          FROM MyTable
         WHERE YEAR(startdatetime) = 2013
           AND SomeColumn = 2
         GROUP BY startdatetime
       ) AS x
-- GROUP BY Header1;
; 
```

我可以看到（注释掉的）外层 GROUP BY 子句没有理由。给定以下测试数据：

```
CREATE TEMP TABLE MyTable
(
    startdatetime   DATE NOT NULL,
    somecolumn      INTEGER NOT NULL,
    somecolumn2     VARCHAR(10)
);

INSERT INTO MyTable VALUES('2013-03-01', 2, NULL);
INSERT INTO MyTable VALUES('2013-03-02', 2, 'Elephant');
INSERT INTO MyTable VALUES('2013-03-03', 2, 'Rhinoceros');
INSERT INTO MyTable VALUES('2013-03-04', 1, 'Elephant');
INSERT INTO MyTable VALUES('2013-03-05', 3, 'Rhinoceros'); 
```

查询的输出是：

```
mymonth      header1
SMALLINT     DECIMAL(15,0)
     3               0
     3               1
     3               1 
```

但是，我怀疑您已经进行了一些查询最小化来说明问题（如果是这样，谢谢），实际上您的主要子查询将有一些类似的 CASE 表达式，而不仅仅是一个。在这种情况下，您应该按照以下几行重写 CASE 表达式和聚合：

```
SELECT mymonth, Header1
  FROM (SELECT MONTH(startdatetime) AS mymonth,
               COUNT(CASE WHEN MyTable.somecolumn = 2 THEN somecolumn2 END) AS Header1
          FROM MyTable
         WHERE YEAR(startdatetime) = 2013
         GROUP BY mymonth 
       ) AS x
; 
```

对于相同的样本数据，这会产生：

```
mymonth     header1
SMALLINT    DECIMAL(15,0)
     3               2 
```

鉴于您使用的是 IBM Informix 11.50 而不是 11.70 或 12.10，您可能必须对此使用变体来完成聚合：

```
SELECT MonthNum, COUNT(Header1) AS Header1
  FROM (SELECT MONTH(startdatetime) AS MonthNum,
               CASE WHEN MyTable.somecolumn = 2 THEN somecolumn2 END AS Header1
          FROM MyTable
         WHERE YEAR(startdatetime) = 2013
       ) x
 GROUP BY MonthNum; 
```

输出：

```
monthnum    header1
SMALLINT    DECIMAL(15,0)
     3               2 
```

基本思路是使用 CASE 表达式在子查询的 Header1 列中生成你想要的值，然后将聚合应用于子查询的结果（而不是在子查询中进行聚合）。我还没有验证这将在 11.50 中工作（它在 11.70.FC6 中工作），但它很有可能会。

# html - 底部的导航栏，居中 - CSS

> ID：15699459
> 
> 赞同：4
> 
> 时间：2013-03-29T07:54:58.480
> 
> 标签：html, css, navigation

我需要一个快速提示如何解决一些问题。我创建了一个导航栏并将其居中，所以现在无论屏幕大小，它都位于页面中间，但是如何使该栏保持在页面底部？我知道当我`height`向`.MainContainer`它添加 a 时，将该条推到底部，但我想让它不受恒定高度的影响。非常感谢您的任何建议！

* * *

**HTML**

```
<html>
<head>
</head>  
<body>
    <div class="MainContainer">
    </div>  
    <div id="MenuContainer">
        <ul id="navigation">
            <li class="x"><a title="1" href="indexX-1.html" >1</a></li>
            <li class="x"><a title="2" href="#" >2</a></li>
            <li class="x"><a title="3" href="#" >3</a></li>
            <li class="x"><a title="4" href="#" >4</a></li>
            <li class="x"><a title="5" href="#" >5</a></li>
            <li class="contact" class="last"><a title="6" href="#" >6</a></li>
        </ul>
    </div> 
</body>
</html> 
```

* * *

**CSS**

```
.MainContainer {
    width: 1200px;
    background-color: #0066CC;
}
.MenuContainer {
    height: 70px;
    bottom:0;
}
ul#navigation {
    height: 70px;
    list-style: none;
    margin: 0;
    padding: 0;
    border: 1px solid #ccc;
    border-width: 1px 0;    
    text-align: center;
    font-size: 22px;
    font-family: 'Cham-WebFont', Arial, sans-serif;
    background-color: #FFF;
}
ul#navigation li {
    display: inline;
    margin-right: .75em;
    list-style: none;
    margin: 0;
    padding: 0;
}
ul#navigation li.last {
    margin-right: 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T07:57:40.507

通过制作`html`和`body` `height:100%`应用固定定位到您的导航。

```
html, body {
 height: 100%;
}

ul#navigation {
 position: fixed;
 bottom: 0;
 width: 100%;
} 
```

这是一个 jsFiddle： http: [//jsfiddle.net/nqKpe/1/](http://jsfiddle.net/nqKpe/1/)
随意调整窗口大小，看看您的导航始终保持在底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:02:03.663

这是一个适合你的[**JSFIDDLE**](http://jsfiddle.net/YG5vE/)

你有一个错字：

```
.MenuContainer {
    height: 70px;
    bottom:0;
} 
```

应该：

```
#MenuContainer {
        height: 70px;
        bottom:0;
    } 
```

根据您的 HTML。还添加`position:fixed;`：

```
 #MenuContainer {
            height: 70px;
            bottom:0;
            position:fixed;
        } 
```

# php - 从 URL 查询返回的 XML 解析

> ID：15699473
> 
> 赞同：0
> 
> 时间：2013-03-29T07:56:04.843
> 
> 标签：php, javascript, xml, http, rest

我正在研究使用 URL 进行查询的 LinkedIn API。查询结果以 XML 格式返回，我需要将其显示给用户。simplexml_load_file() 调用是否支持从 URL 获取？我尝试使用它，但它挂断了！

除了 simplexml_load_file 之外，还有什么更好的方法来解析从查询返回的 XML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:59:08.200

使用`XMLReader`，看这里：[XMLReader](http://se2.php.net/manual/en/book.xmlreader.php)。

# objective-c - 将 UIBarButtonItem 的操作发送到 IBAction 未触发

> ID：15699478
> 
> 赞同：2
> 
> 时间：2013-03-29T07:56:37.527
> 
> 标签：objective-c, cocoa-touch

我有一个视图控制器，我在其上放置了一个工具栏和栏按钮。该栏按钮被触发（触发 Segue）到另一个视图控制器 + 已向某些 IBAction 方法发送操作。现在触发 segue 可以正常工作，但单击时不会触发 IBAction 方法。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:31:58.663

@法尔汗阿里，

在连接检查器的帮助下，检查您是否将该条形按钮正确连接到 IBAction。通常，在将条形按钮项连接到 IBAction 时，您必须双击条形按钮。

如果所有东西都连接正确，

它应该看起来像这样。

![在此处输入图像描述](../Images/718867fa5eb95ff0f6fa7ee5b237dd2a.png)

# java - 如何将 MVC 与多个窗口/对话框一起应用

> ID：15699479
> 
> 赞同：5
> 
> 时间：2013-03-29T07:56:38.767
> 
> 标签：java, model-view-controller, design-patterns, netbeans

我想使用 MVC 开发一个应用程序。该应用程序将有多个窗口和对话框（> 30 个窗口/对话框）。现在的问题是：我如何在这样的应用程序中应用 MVC？

MVC-Tutorials 通常只有一个 Window、一个 Controller 和一个 Model。

我宁愿使用一个包含所有视图的视图包、一个包含所有控制器的控制器包和一个包含所有模型的模型包吗？

或者我会为每个窗口/对话框使用一个包并实现许多小型 MVC？

最后一个问题：MVC 是否适合与多个 Windows/Dialogs 一起使用，还是另一种模式是更好的解决方案？这可能取决于应用程序和每个窗口/对话框的作用，但如果有一般的事情要考虑，很高兴知道:)

编辑：对不起，我忘了，不认为这很重要。问题是关于 Java/Swing 的。但可能想稍后切换到任何想到的东西。如果我使用 Swing、SWT、GWT 重要吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T08:07:06.010

我更喜欢创建包，每个包都包含模型、视图、控制器等，因为它更清晰。在这种情况下，您会看到您的应用程序是以模块化形式创建的。如果您将创建应用程序并为控制器、视图等创建包，您将看不到您的应用程序做了什么，并且很难维护。但这是我自己的看法。

例如我会这样做

```
com.car.door
    controller.DoorController
    entity.DoorEntity
    view.DoorView

com.car.wheel
    controller.WheelController
    entity.WheelEntity
    view.WheelView

com.car.driver
    controller.DriverController
    entity.DriverEntity
    view.DriverView

com.car.road
    controller.RoadController
    entity.RoadEntity
    view.RoadView 
```

在我看来这是错误的，因为你看不到你的应用程序做了什么并且很难维护

```
com.car.controller
    controller.DoorController
    controller.WheelController
    controller.DriverController
    controller.RoadController

com.car.entity
    entity.DoorEntity
    entity.WheelEntity
    entity.DriverEntity
    entity.RoadEntity

com.car.view
    view.DoorView
    view.DriverView
    view.WheelView
    view.RoadView 
```

# windows - cassandra：~.cqlshrc 不起作用

> ID：15699485
> 
> 赞同：3
> 
> 时间：2013-03-29T07:57:03.600
> 
> 标签：windows, cassandra, config, cql

我是使用 cassandra 的新手，我想配置一个 cassandra.cqlshrc 文件，然后我可以避免使用 cqlsh 为每次登录传递凭据。我写的 cassandra.cqlshrc 中的代码是这样的：

`[authentication]`

`username = cassandra`

`password = cassandra`

我将文件放入目录：apache-cassandra\bin 但它不起作用，在我调用 cmd.exe 中的 cqlsh 后使用命令：python cqlsh 注意：我在 windows 7 64 位中安装了 cassandra。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-18T03:28:29.110

`.cqlshrc`必须在您的用户主目录中。

这是目前唯一受支持的位置（使用 Cassandra 1.2.6 测试）。对于 Windows 7 是`%USERPROFILE%\\.cqlshrc`（例如`C:\\Users\\<username>\\.cqlshrc`）。

您可以通过从 cassandra 程序目录复制到用户主目录来创建此文件，`conf\\cqlshrc.sample`然后启动并`cmd.exe`运行`cd %USERPROFILE%``ren cqlshrc.sample .cqlshrc`

# php - ZendFramework 函数 init() 不工作

> ID：15699488
> 
> 赞同：1
> 
> 时间：2013-03-29T07:57:33.660
> 
> 标签：php, zend-framework2

我的代码…………：

```
<?php
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

class IndexController extends AbstractActionController
{

    public function init()
    {
       echo 'init worked';
    }

    public function indexAction()
    {
        return new ViewModel();
    }

    public function testAction()
    {
        echo 'test';
    }
} 
```

为什么init函数不起作用？也许我需要更改一些配置？还是我需要使用标准的 php __construct() ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T08:05:47.847

由于 ZF2 可以安全地使用构造函数`__construct()`，因此旧 `init()`方法已被删除。

[http://www.mwop.net/blog/2012-07-30-the-new-init.html](http://www.mwop.net/blog/2012-07-30-the-new-init.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:06:05.290

这在 ZF2 中发生了变化。如果你想完成同样的事情，要么在控制器的构造函数（__construct()）中完成，或者如果你需要做很多花哨的事情，你应该为你的控制器创建一个工厂并在模块配置中定义它。

```
 'controllers' => array(
     'factories' => array(
          'TestController' => 'Your\Namespace\TestControllerFactory'
     )
 ) 
```

TestControllerFactory 应该实现 Zend\ServiceManager\FactoryInterface，这意味着它应该实现 createService 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T13:00:01.377

您可以添加自定义初始化程序以使该`init()`方法工作：

```
// in your Module class
public function onBootstrap($e)
{
    $cl = $e->getApplication()->getServiceManager()->get('ControllerLoader');

    $cl->addInitializer(function ($controller, $serviceManager) {
        if (method_exists($controller, 'init')) {
            $controller->init();
        }
    }, false); // false means the initializer will be added in the bottom of the stack
} 
```

在堆栈底部添加初始化程序是好的，因为内置初始化程序将首先被调用，因此您将可以访问`ServiceLocator`该`EventManager`方法`init()`。

# javascript - 函数未在 phonegap 中的 file://android_asset/www/index.html 中定义

> ID：15699489
> 
> 赞同：1
> 
> 时间：2013-03-29T07:57:38.673
> 
> 标签：javascript, jquery, html, cordova, jquery-mobile

我在 Phonegap 上收到此典型错误我在按钮 onclick 事件上调用了一个函数，但我得到 (function_name) 未在 phonegap 中的 file://android_asset/www/index.html 中定义。然后，我在其他页面上编写代码临时，它开始工作。一段时间后，同样的错误再次出现。我不知道出了什么问题。我正在使用 phonegap - Android (on eclipse) 任何帮助将不胜感激。

```
 <button onclick="clickIt();" data-theme="b">Login</button>

   <script type="text/javascript">

        function clickIt() {
           //code here

        }
   </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T12:59:07.337

我也有这个问题。不幸的是，Android 模拟器真的很慢，所以在加载文件时会发生超时，因为它的反应很慢。

在调用 super.loadUrl 之前，在您的自定义 Activity 文件中添加以下行：

```
super.setIntegerProperty("loadUrlTimeoutValue", 60000); 
```

这增加了加载网页的超时时间 - 这解决了我在模拟器上的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:12:15.403

确保仅在启动 js 文件后调用该函数。`$(document).on`您可以通过在函数内部调用它来确保。首先将按钮的 id 更改为`login`并执行以下操作。

如下所示

```
$(document).on('pagecreate', function(){
    $('#login').bind('click',function(){
        alert('test');
    });
}); 
```

如果您的页面 id 等于“mypage”，请将其更改为以下内容

```
$(document).on('pagecreate',  '#mypage', function(){
    $('#login').bind('click',function(){
        alert('test');
    });
}); 
```

[在http://jsfiddle.net/mayooresan/9pNRn/](http://jsfiddle.net/mayooresan/9pNRn/)查看现场小提琴

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:48:55.080

我解决了这个问题。实际上，我的文件中的某些函数出现错误，因此没有 java 脚本调用正在运行。这是一个未找到并导致其他代码失败的错误。

# .net - 使用 Ajax 将表单发布到 ASP.NET MVC 控制器

> ID：15699495
> 
> 赞同：0
> 
> 时间：2013-03-29T07:58:06.493
> 
> 标签：.net, ajax, asp.net-mvc, asp.net-mvc-4

当我单击链接“Foo”时，我在 LogOn 操作中遇到了断点，但用户名始终为空。我不明白为什么。

```
<a class="jqselect" id="myId" href="#">Foo</a>    
@using (Html.BeginForm("LogOn", "Account", FormMethod.Post, new { id = "fooForm" }))
{
    <input type="text" id="username"/>
}

<script type="text/javascript">
    $(document).ready(function () {
        $(".jqselect").click(function () {

            $.ajax({
                url: '/Account/LogOn',
                type: "Post",
                data: $('#fooForm').serialize(),
                success: function (result) {
                    if (result.success) {
                    }
                }
            });

        });
    });
</script>

[HttpPost]
public ActionResult LogOn(string username)
{
    Console.WriteLine(username);
    return new EmptyResult();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T08:07:34.607

你必须给它一个名字：

```
<input type="text" id="username" name="username"/> 
```

您实际上可以删除`id`并只使用名称，控制器方法将识别它。

如果需要，您还可以使用模型，并且可以将其编码为：

```
@Html.TextboxFor(m=>m.Username) 
```

您的模型定义为：

```
public class LogOnModel {
    public string Username {get;set;}
} 
```

并且您的方法定义为：

```
[HttpPost]
public ActionResult LogOn(LogOnModel input)
{
} 
```

# c - 在win32 api中的文本文件末尾附加文本

> ID：15699505
> 
> 赞同：2
> 
> 时间：2013-03-29T07:59:04.327
> 
> 标签：c, windows, winapi, text-files, createfile

我正在尝试打开一个文本文件，将一些数据写入其中，然后在已写入文件的数据的末尾追加一些数据，但这不起作用。任何人都可以帮我找出我的代码的问题吗？ **代码片段：**

```
char buffer[]="Write this text to file";
DWORD dwWritten; // number of bytes written to file
HANDLE hFile;  

hFile=CreateFile("file.txt",GENERIC_READ|GENERIC_WRITE,FILE_SHARE_READ|FILE_SHARE_WRITE,0,CREATE_ALWAYS,FILE_ATTRIBUTE_NORMAL,0);
if(hFile==INVALID_HANDLE_VALUE)
  {
    MessageBox(0,"Could not create/open a file","Error",16);
    return 0;
  }
WriteFile(hFile,buffer,sizeof(buffer),&dwWritten,0);

DWORD dwPtr = SetFilePointer( hFile, dwWritten, NULL, FILE_END); //set pointer position to end file

WriteFile(hFile,buffer,sizeof(buffer),&dwPtr,NULL); 

CloseHandle(hFile); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T08:22:27.740

如果要将数据附加到文件，可以使用 FILE_APPEND_DATA 标志将其传递给 CreateFile 方法。这可以通过使用包含 FILE_APPEND_DATA 的 FILE_GENERIC_WRITE 标志来完成

```
hFile=CreateFile("file.txt",FILE_GENERIC_WRITE,FILE_SHARE_READ|FILE_SHARE_WRITE,0,CREATE_ALWAYS,FILE_ATTRIBUTE_NORMAL,0); 
```

当您写入文件时，文件指针也会移动并指向当前位置。如果您想写入文件末尾，您可以使用

```
SetFilePointer( hFile, 0, NULL, FILE_END); 
```

并使用 WriteFile 作为

```
WriteFile(hFile,buffer,strlen(buffer),&dwWritten,NULL); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T08:06:57.780

不需要调用 to [`SetFilePointer()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa365541%28v=vs.85%29.aspx)，因为后续[`WriteFile()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa365747%28v=vs.85%29.aspx)调用将在第一个写入数据之后写入数据`WriteFile()`：删除对 的调用`SetFilePointer()`。

调用`SetFilePointer()`将文件指针`dwWritten`字节移动到其当前位置之外，并且当前位置位于刚刚写入的数据的末尾。

检查结果`WriteFile()`以确保数据已成功写入，重要的是在任何错误消息中包含 的值[`GetLastError()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms679360%28v=vs.85%29.aspx)或其描述[`FormatMessage()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms679351%28v=vs.85%29.aspx)，以便知道失败的实际原因：

```
if(hFile==INVALID_HANDLE_VALUE)
{
    char error_msg[128];
    sprintf(error_msg, "Could not create/open a file: %d", GetLastError());
    MessageBox(0,error_msg,"Error",16);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T08:31:01.163

如果要创建文本行，还需要在每行末尾输出 CR+LF 字符，例如：

```
char[] crlf = "\r\n"; 
```

并添加

```
WriteFile(hFile, crlf, sizeof(crlf), &dwWritten, 0); 
```

在写完每个字符串之后。

或者，使用文件流而不是句柄，以下代码等效于您的代码：

```
char buffer[]="Write this text to file";
FILE *stream;
if ((stream = fopen("file.txt", "w+")) == NULL)
{    MessageBox(0,"Could not create/open a file","Error",16);
    return 0;
}
fprintf(stream, "%s\n", buffer);
fseek(stream, 0L, SEEK_END);
fprintf(stream, "%s\n", buffer);
fclose(stream); 
```

# javascript - response.writeHead 上的意外令牌

> ID：15699508
> 
> 赞同：0
> 
> 时间：2013-03-29T07:59:15.543
> 
> 标签：javascript, node.js, http, fs

在 Node.JS 中运行以下代码时会产生一些错误，但我不明白为什么

```
var http = require("http"), fs = require("fs");

function onRequest(request, response){
        request.on("end", function(){
                fs.readFile("test.txt", "utf-8", function(error, data){
                        response.writeHead(200, {"Content-Type", "text/plain"});
                        data = parseInt(data) + 1;
                        fs.writeFile('test.txt', data);
                        response.end("This page was refreshed "+data+" times!\n");
                });
        });
}

http.createServer(onRequest).listen(8080); 
```

这是我得到的错误：

```
/home/dev/nodeplay/files.js:7

response.writeHead(200, {"Content-Type", "text-plain"});
                  ^
module.js:434
  var compiledWrapper = runInThisContext(wrapper, filename, true);
                        ^
SyntaxError: Unexpected token ,
    at Module._compile (module.js:434:25)
    at Object..js (module.js:464:10)
    at Module.load (module.js:353:31)
    at Function._load (module.js:311:12)
    at Array.0 (module.js:484:10)
    at EventEmitter._tickCallback (node.js:190:38) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T08:03:56.267

这部分：`{"Content-Type", "text-plain"}`是一个无效的对象。

你的意思是：

```
{"Content-Type": "text-plain"} 
```

# c# - C# DateTime.TryParse 格式相同，日期不同

> ID：15699510
> 
> 赞同：2
> 
> 时间：2013-03-29T07:59:32.353
> 
> 标签：c#, datetime, tryparse

```
DateTime res;
String s;

s = "Wed, 28 Mar 2012 10:30:52 GMT";
DateTime.TryParse(s, out res);
Console.WriteLine(s + " => " + res);

s = "Fri, 15 May 2009 20:10:57 GMT";
DateTime.TryParse(s, out res);
Console.WriteLine(s + " => " + res); 
```

输出：

```
Wed, 28 Mar 2012 10:30:52 GMT => 01/01/0001 00.00.00
Fri, 15 May 2009 20:10:57 GMT => 15/05/2009 22.10.57 
```

为什么它只适用于某些日期？显然，我同时在同一台机器上运行了该代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:17:51.933

我希望您所使用的文化的长日期格式可能只接受@VimalStan 建议的完整月份名称（您是否已经确认了这一点？）。

它*应该*（恕我直言）也接受你正在尝试做的事情，但我知道各种文化都可能有这样的“怪癖”。例如，也许“mar”在某些文化中是模棱两可的？（虽然它在您的文化中可能并不模棱两可......也许一些代码已经从一种文化传播到另一种文化......我不知道文化规则是如何实施的，所以不知道这是否是即使是一个有效的建议......但我认为特定文化可能并不总是按预期表现是公平的）。

使用[http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.currentculture.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.currentculture.aspx)检查您的 .NET 上下文在哪个文化中运行。您可以查看 Windows 用户配置文件在哪个上下文中运行通过控制面板（例如 Win 7 上的“区域和语言”），并查看那里的长日期格式。

您的示例在我的电脑上运行良好，其中长日期格式为“dddd，d MMMM yyyy”。我在澳大利亚，使用 en-au。

作为测试，请尝试使用 en-au "English (Australia) 作为您的文化（通过控制面板，或根据上述`currentculture`链接在“显式设置 CurrentCulture 属性”标题中显式设置，然后测试您的代码是否像预期的。

如果它按预期工作，我认为这意味着问题只是您的文化在解析方面比我的文化更严格（例如，比您预期的）。因此，您可能需要确保通过整月，或者根据此处使用的另一个答案指定您自己的特定解析模式`TryParseExact()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:07:06.857

前几天我遇到了同样的问题，这非常令人沮丧，因为它没有必要失败。

但是我解决问题的方法是转移到[DateTime.TryParseExact](http://msdn.microsoft.com/en-GB/library/system.datetime.tryparseexact.aspx)

使用如下：

```
// Parse date with no style flags.
dateString = " 5/01/2009 8:30 AM";
if (DateTime.TryParseExact(dateString, "g", enUS, 
                          DateTimeStyles.None, out dateValue))
   Console.WriteLine("Converted '{0}' to {1} ({2}).", 
                             dateString, 
                              dateValue, 
                             dateValue.Kind);
else
   Console.WriteLine("'{0}' is not in an acceptable format.", dateString); 
```

由于切换解析从未失败

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T08:33:51.127

试试这个：

```
DateTime res;
String s = "Wed, 28 Mar 2012 10:30:52 GMT";
DateTime.TryParseExact(s, "R", CultureInfo.InvariantCulture, DateTimeStyles.None, out res); 
```

这将给出：`{3/28/2012 10:30:52 AM}`

还有，当

```
String s = "Fri, 15 May 2009 20:10:57 GMT"; 
```

这将给出：`{5/15/2009 8:10:57 PM}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T08:30:19.527

这只是一个猜测，但也许问题在于意大利语中的“Mar”是“Martedì”（星期二）这个词的开头，所以“Wed, 28 Mar 2012 10:30:52 GMT”可能会被误解为“周三Martedì/Tuesday”，这是荒谬的。

作为一个反例，我在 2013 年寻找了 Martedì/Tuesday 28，它可以用月份代替星期几：

2013 年 3 月 28 日 10:30:52 GMT => 28/05/2013 12.30.52

显然它不能使用其他语言环境。

# php - 如何使用php测量网站的速度？

> ID：15699512
> 
> 赞同：3
> 
> 时间：2013-03-29T07:59:43.503
> 
> 标签：php, pagespeed

我有一个数组中的 URL 列表，并想检查访问每个网页需要多长时间。您能否告诉我是否可以使用 PHP 找到网页的速度？如果您能举个例子给我看，我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:16:07.677

如果您的网站完全在 php 上运行，您可以测量 php 脚本的工作时间。如果您想测量服务器的响应时间，您可以使用 firefox 或 chrome 开发人员菜单选项来显示对服务器的总访问时间。

**测量 php 脚本的生命周期：** php 函数 microtime() 是一个方便的时间分析工具。在您网站的入口处添加：

```
 $startTime = microtime(true);
 register_shutdown_function('measureTime');

 function measureTime(){
 global $startTime;
     $execTime = microtime(true)-$startTime;
     echo "Script execution time: $execTime seconds.";
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T08:19:23.647

[xdebug](http://xdebug.org)是一个分析 PHP 代码的工具。它支持堆栈和函数跟踪、分析信息以及内存分配和脚本执行分析。您将确切地看到在函数、外部调用中花费了多少时间......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T08:12:30.640

您需要请求页面（通过 GET 或 POST）并对其计时。这将告诉您页面加载需要多长时间。

一些简单的伪代码：

```
<?php

$lines = file ('url_list.txt');
foreach ($lines as $url)
{
    $start_request = time();
    fetch_webpage ($url);
    $end_request = time ();

    $time_taken = $end_request - $start_request;
} 
```

如何实现该`fetch_webpage()`部分取决于您。您可以[使用 PHP 套接字](http://php.net/fsockopen)或[CURL](http://php.net/curl)。

请记住，这只会计算原始 URL 的加载时间。不会请求其他资源（外部加载的），您需要确保这样做，以便您的时间尽可能准确。

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T08:02:27.303

测量服务器端速度的最简单方法是……捕获代码前后的时间，减去值并显示结果。如果有更简单的东西，请告诉：D

# linux - Linux内核中的模块间通信

> ID：15699518
> 
> 赞同：9
> 
> 时间：2013-03-29T08:00:13.643
> 
> 标签：linux, kernel

我有两个 Linux 内核模块，其中一个可以为另一个提供一些功能。但是使用该功能不是必需的，即使第一个模块不存在，第二个模块也可以（并且应该）工作。

如果我只是从第一个模块导出函数并在第二个模块中使用它，则第二个模块依赖于该符号并且没有第一个模块就无法加载。

一种解决方案是让用户脚本在 /proc/kallsym 中查找第一个模块中的函数，如果它存在，则脚本将其地址作为参数传递给第二个模块，然后从中生成指针. 但出于显而易见的原因，我不喜欢这种解决方案。

如果有更正确和优雅的解决方案允许第二个模块获取第一个模块中某个符号的地址，但避免硬依赖？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-15T15:28:04.750

最后我找到了解决方案：内核有 symbol_get() 和 symbol_put() 这让我有机会在另一个模块中查找任意符号（它当然需要导出）并防止模块在我使用它时卸载象征。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:22:19.680

I think if module B depends on module A, the module B can not be successfully loaded without module A is loaded first.

In fact, only after module A inserted first, the symbols which module B needed which exported from module A will appear in the /proc/kallsym file.

The solution to your situation: in module B, module_init() function should have some codes to check the module A is already there or not, if not, load A first. i.e. Using request_module() to load A, or create a more fancy method to using try_then_request_module().

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-09T18:12:19.347

有更优雅的解决方案，但需要更改内核。基本上，内核被增强以容纳模块注册。当一个模块被加载并想要将自己暴露给其他模块时，他将使用众所周知的 int 注册到内核中——这只是内核数组的索引，用于存储对已注册模块的引用。现在，任何想要获取对另一个模块的引用的模块都将简单地向内核请求对该模块的新引用——使用相同的、众所周知的 int。这些新的引用必须是短暂的（即你得到它的引用但把它放回相同的上下文中）。为了允许长期连接，您必须在两者之间建立一个协议，以便当任何一个模块被卸载时，他/她知道如何通知另一个模块他要离开了。

# windows - 在 Windows 中，如何知道应用程序的启动？

> ID：15699520
> 
> 赞同：0
> 
> 时间：2013-03-29T08:00:39.677
> 
> 标签：windows

在 Windows 中，如何知道应用程序已启动？我认为一种方法是挂钩 SSDT 功能。有没有其他方法不会改变 Windows 内核？

# .net - Html.Partial 在 if 语句下不起作用

> ID：15699522
> 
> 赞同：13
> 
> 时间：2013-03-29T08:00:44.333
> 
> 标签：.net, asp.net-mvc, razor

我的一个视图页面中有以下位置：

```
@* Html.Partial("Form")*@

  @{
    var role = Convert.ToInt32(Session["Role"]);
    if (role == 2)
    {
        Html.Partial("Form");
    }
} 
```

当`Html.Partial("Form")` 它在任何 if 语句之外并呈现一切正常时，它工作正常。

但是当在一个`if`块内它什么都不呈现时，如果语句被命中，这是真的，调试器 eves 读取函数并转到`Form Partial view`并遍历其中的每一行，但最后页面上没有输出。

请帮助

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-29T08:09:31.927

当您在代码块内时，您应该使用 RenderPartial 方法。

```
Html.RenderPartial("Form"); 
```

Html.Partial 返回一个 HtmlString，如果它不在代码块内，它将被呈现到页面。在您的情况下，Razor 会解析您的视图并将结果返回给您的代码。由于您没有做任何事情来渲染它，因此您不会得到输出。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T08:10:42.843

尝试更换：

```
Html.Partial("Form"); // <- this will return string 
```

和：

```
Html.RenderPartial("Form"); // <- writes to response 
```

[Html.Partial vs Html.RenderPartial & Html.Action vs Html.RenderAction](https://stackoverflow.com/questions/5248183/html-partial-vs-html-renderpartial-html-action-vs-html-renderaction)

# sql - Sql 选择不同的一列并从两个表中得到结果？

> ID：15699533
> 
> 赞同：-4
> 
> 时间：2013-03-29T08:01:30.663
> 
> 标签：sql, database, oracle, oracle11g

我的查询是：

```
 select ab.ID, cd.code_text  
  from city ab, codes cd 
  where ab.code = cd.code; 
```

但它返回重复值。所以我必须在 code_text 列上使用 distinct 。有人可以帮我在这种情况下如何在 code_text 列上使用 distinct 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:05:06.127

~~select distinct cd.code_text, ab.ID from city ab, codes cd where ab.code = cd.code;~~

**已编辑**

```
Select ID, "Code Text" From (  
Select ID, "Code Text", RANK() OVER (PARTITION BY "Code Text" ORDER BY ID) "The Rank"
From(
select ab.ID as "ID", cd.code_text as "Code Text"
from city ab, codes cd  
where ab.code = cd.code))
where "The Rank" = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:26:48.280

在 Microsoft Access 中：

```
SELECT ab.ID, cd.code_text
FROM city ab, (
    SELECT DISTINCT codes.code, codes.code_text
    FROM codes
) AS cd
WHERE ab.code = cd.code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:16:40.563

如果您只想从代码表中查看 code_text 的不同值，最简单的方法是：

```
select distinct code_text from codes 
```

如果您想从代码表中查看不同的 code_text 值，其中代码存在于 city 表中，最简单的方法是：

```
select distinct cd.code_text  
from city ab
join codes cd on ab.code = cd.code 
```

- 尽管 Oracle 中更有效的方法*可能*是：

```
select distinct cd.code_text  
from codes cd 
where exists
(select 1 from city ab where ab.code = cd.code) 
```

如果您想查看具有最低相应 ID 值的 code_text 的不同值，最简单的方法是：

```
select min(ab.ID), cd.code_text  
from city ab
join codes cd on ab.code = cd.code
group by cd.code_text 
```

如果您想查看每个给定 code_text 值在同一行上填充到单个字符串中的所有适用 ID 值，Oracle 11 中最简单的方法是：

```
select listagg(ab.ID, ',') within group (order by ab.ID) IDs, cd.code_text  
from city ab, codes cd 
where ab.code = cd.code
group by cd.code_text 
```

# php - 将多维数组拆分为两个新数组

> ID：15699534
> 
> 赞同：0
> 
> 时间：2013-03-29T08:01:35.883
> 
> 标签：php, arrays

我有这个多维数组：

```
Array
(
    [userId] => 35
    [fieldId] => Array
        (
            [0] => 1
            [1] => 2
            [2] => 3
            [4] => 4
        )

    [educationTitle] => Array
        (
            [0] => School1
            [1] => School2
            [2] => 3
            [4] => 
        )

    [educationDegree] => Array
        (
            [0] => Degree1
            [1] => Degree2
            [2] => 3
            [4] => 
        )

    [startDate] => Array
        (
            [0] => 2013-03-01
            [1] => 2013-03-03
            [2] => 1970-01-01
        )

    [endDate] => Array
        (
            [0] => 2013-03-02
            [1] => 2013-03-04
            [2] => 1970-01-01
        )

    [educationDescription] => Array
        (
            [0] => Description1
            [1] => Description2
            [2] => 
        )

) 
```

我有一个名为 id 的数组`matches`：

```
 [matches] => Array
        (
            [0] => 1
            [1] => 2

        ) 
```

我需要将主数组分成两个：

```
$eduAdd = array()
$eduUpdate = array() 
```

`$eduAdd`将包含不匹配**的 fieldId**，`$eduUpdate`并将包含匹配**的 fieldId**。

`$eduAdd`看起来像这样：

```
Array
    (
        [userId] => 35
        [fieldId] => Array
            (
                [2] => 3
                [4] => 4
            )

        [educationTitle] => Array
            (
                [2] => 3
                [4] => 
            )

        [educationDegree] => Array
            (

                [2] => 3
                [4] => 
            )

        [startDate] => Array
            (

                [2] => 1970-01-01
            )

        [endDate] => Array
            (

                [2] => 1970-01-01
            )

        [educationDescription] => Array
            (

                [2] => 
            )

    ) 
```

我试过这个，但发现`in_array`不适用于多维数组：

```
foreach($filteredSubmittedData as $filteredUpdates){
    if(in_array($filteredUpdates['fieldId'], $matches)){
        echo "yup";
    }
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:04:50.047

`$filteredUpdates['fieldId']`本身是一个数组，因为 in_array 需要一个干草堆，所以它不会像你期望的那样工作。尝试将您的 if 条件更改为，

```
if(array_intersect($filteredUpdates['fieldId'], $matches)){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:32:23.700

**解决方案**

考虑`$main`成为您的主数组并`$matches`成为您的匹配数组：

```
$eduAdd = array();
$eduUpdate = array();
$itodel = array();
foreach ($main['fieldId'] as $i => $v)
    if (isset($matches[$i]) and $matches[$i] == $v)
        $itodel[] = $i;

foreach ($main as $key => $arr) {
    if (!is_array($arr)) continue;
    foreach ($arr as $i => $v) {
        if (in_array($i, $itodel))
            $eduUpdate[$key][$i] = $v;
        else
            $eduAdd[$key][$i] = $v;
    }
} 
```

**解释**

首先，我们需要填充内部匹配的索引数组`$main['fieldId']`。这些是将被移动到`$eduUpdate`并且不会插入到的索引`$eduAdd`：

```
$itodel = array();
foreach ($main['fieldId'] as $i => $v)
    if (isset($matches[$i]) and $matches[$i] == $v)
        $itodel[] = $i; 
```

然后我们运行另一个`foreach`循环，实际上将`$main`数组拆分为另外两个。主要条件是`if (in_array($i, $itodel))`因为如果我们正在观察应该进入的索引中的索引，`$eduUpdate`那么我们应该将其添加到其中，否则我们只需将其插入到`$eduAdd`.

# android - android跨度点击事件

> ID：15699535
> 
> 赞同：2
> 
> 时间：2013-03-29T08:01:37.820
> 
> 标签：android, position, tooltip, html, clickable

行。这些是我的问题。

1.  我需要使用正则表达式来归档除字母之外的所有内容，然后我需要将找到的单词包含在 $word 标记中。有了这个 str = str.replaceAll(pattern, "$0");。现在我正在过滤所有正确的元素（标点符号、数字等），但它将每个单词中的每个字母都包含在 a 标签中，而不是单词中。那么如何使用正则表达式将字母组合成一个单词呢？

from "(a tag open)t(a close)(a tag open)h(a close)(a tag open)i(a close)(a tag open)s(a close) (a tag open)i(a close)(a tag open)s(a close) (a tag open)w(a close)(a tag open)r(a close)(a tag open)o(a close)(a tag open)n(a关闭）（标签打开）g（关闭）“；

到 ：

"(a tag open)this(a close) (a tag open) is(a close) (a tag open)right(a close)";

然后我让它们可点击，我需要捕捉点击事件并在点击的单词上获取屏幕上的位置，因为我想使用点击的事件使工具提示显示在点击的单词下方。感谢您的帮助。

公共类 MainActivity 扩展 Activity {

```
public String text = "This is just a sentence to test you. 23 this is another number23!g?";
public TextView tv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    text = explode(text);

    tv = (TextView) findViewById(R.id.tv1);

    tv.setLinksClickable(true);
    tv.setMovementMethod(LinkMovementMethod.getInstance());

    Spanned article = Html.fromHtml(text, null, null);
    setHTML(article);
}

public void setHTML(Spanned html) {
      SpannableString message = new SpannableString(html.toString());
      Object[] spans = html.getSpans(0, html.length(), Object.class);
      for (Object span : spans) {
         int start = html.getSpanStart(span);
         int end = html.getSpanEnd(span);
         int flags = html.getSpanFlags(span);
         if (span instanceof URLSpan) {
            URLSpan urlSpan = (URLSpan) span;
            span = new CallbackSpan(urlSpan.getURL());
         }
         message.setSpan(span, start, end, flags);
      }
      tv.setText(message);
   }
    public String explode(String str){  
      String pattern = "([a-zA-Z])";
      str = str.replaceAll(pattern, "<a href=\"$0\">$0</a>");
      return str;
    }

   private final class CallbackSpan extends ClickableSpan {

      private String m_data;
      private String url_main;

      public CallbackSpan(String url) {
         m_data = url.substring(0);
         url_main = url;

      }

      public void onClick(View view) {

          TextView item = (TextView)findViewById(R.id.tv2);
          item.setText(url_main + " was clicked.");
          Log.d("item", url_main);
      }
   } 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T02:42:57.147

最新代码，请参阅[链接形式github](https://github.com/boiledwater/spanned)

> ```
> message.setSpan(span, start, end, flags); 
> ```

您需要在设置新跨度之前**删除原始跨度。**请看下面
[ClickableSpan 的 onClick() 不适用于 URLSpan？](https://stackoverflow.com/questions/9164190/the-onclick-of-clickablespan-is-not-working-for-urlspan)

编辑您可以通过以下
方式捕获**任何跨度点击事件**`extends LinkMovementMethod`

```
 import android.os.Handler;
import android.os.Message;
import android.text.Layout;
import android.text.Selection;
import android.text.Spannable;
import android.text.method.LinkMovementMethod;
import android.text.method.MovementMethod;
import android.view.KeyEvent;
import android.view.MotionEvent;
import android.widget.TextView;

import java.lang.ref.WeakReference;

public class LinkMovementMethodExt extends LinkMovementMethod {
    public static final int LinkMovementMethod_Down = 1001;
    public static final int LinkMovementMethod_Up = 2002;
    private static LinkMovementMethod sInstance;
    private Class mSpanClass = null;
    private WeakReference<Handler> mWeakReference = null;

    public static MovementMethod getInstance(Handler handler, Class spanClass) {
        if (sInstance == null) {
            sInstance = new LinkMovementMethodExt();
            ((LinkMovementMethodExt) sInstance).mWeakReference = new WeakReference<>(handler);
            ((LinkMovementMethodExt) sInstance).mSpanClass = spanClass;
        }
        return sInstance;
    }

    @Override
    public boolean onTouchEvent(TextView widget, Spannable buffer,
                                MotionEvent event) {
        int action = event.getAction();

        if (action == MotionEvent.ACTION_UP ||
                action == MotionEvent.ACTION_DOWN) {
            int x = (int) event.getX();
            int y = (int) event.getY();

            x -= widget.getTotalPaddingLeft();
            y -= widget.getTotalPaddingTop();

            x += widget.getScrollX();
            y += widget.getScrollY();

            Layout layout = widget.getLayout();
            int line = layout.getLineForVertical(y);
            int off = layout.getOffsetForHorizontal(line, x);
            /**
             * get you interest span
             */
            Object[] spans = buffer.getSpans(off, off, mSpanClass);
            if (spans.length != 0) {
                if (action == MotionEvent.ACTION_DOWN) {
                    Selection.setSelection(buffer, buffer.getSpanStart(spans[0]), buffer.getSpanEnd(spans[0]));
                    MessageSpan obj = new MessageSpan();
                    obj.setObj(spans);
                    obj.setView(widget);
                    Handler handler = mWeakReference.get();
                    if (handler != null) {
                        Message message = handler.obtainMessage();
                        message.obj = obj;
                        message.what = LinkMovementMethod_Down;
                        message.sendToTarget();
                        return true;
                    }
                    return false;
                } else if (action == MotionEvent.ACTION_UP) {
                    Handler handler = mWeakReference.get();
                    if (handler != null) {
                        MessageSpan obj = new MessageSpan();
                        obj.setView(widget);
                        Message message = handler.obtainMessage();
                        message.obj = obj;
                        message.what = LinkMovementMethod_Up;
                        message.sendToTarget();
                        return true;
                    }
                    return false;
                }
            }
        }

        return super.onTouchEvent(widget, buffer, event);
    }

    public boolean canSelectArbitrarily() {
        return true;
    }

    public boolean onKeyUp(TextView widget, Spannable buffer, int keyCode,
                           KeyEvent event) {
        return false;
    } 
```

**textView.setMovementMethod(LinkMovementMethodExt.getInstance());**

* * *

**为“android developer”编辑**
最好为**LinkMovementMethodExt**类添加**Handler**属性。 您可以捕获作为 Message 对象传递的所有 Spanned。 在 onTouchEvent 方法中截取代码：

 **```
Message message = Handler.obtainMessage();
message.obj = buffer.getSpans(off, off, Spanned.class);//get all spanned
message.what = 111;//which value ,it is up to you
message.sendToTarget(); //send message to you target handler 
```

您可以在处理程序类中处理预期的处理程序。可能是灵活的处理方式。
希望能帮到你。

* * *

![在此处输入图像描述](../Images/2f5f7478f9e95d53e20e4bf41ad087ec.png)

上面的textview文本是`<a href='/a'>aaaa</a>123456<a href='/b'>bbbb</b>7890`
我理解你的要求：
点击'aaaa'，你想得到它`s href value '/a', click 'bbbb',get it`的href'/b'；不要触发在 Web 浏览器中打开的默认操作。
如果我的理解是正确的，你可以这样做：

*   为 textview 等设置 LinkMovementMethod：`textview.setMovementMethod(LinkMovementMethodExt.getInstance(handler, URLSpan.class));`
*   获取兴趣跨度，这里是 URLSpan。
    在您的处理程序**handleMessage**方法中，您可以这样做：

> ```
> private Handler handler = new Handler() {
>       public void handleMessage(Message msg) {
>           int what = msg.what;
>           if (what == 100) {
>               Object[] spans = (Object[])msg.obj;
>               for (Object span : spans) {
>                   if (span instanceof URLSpan) {
>                       System.out.println(((URLSpan) span).getURL());
>                   }
>               }
>           }
>       };
>   }; 
> ```

* * *

[下载演示代码](https://github.com/boiledwater/spanned "下载演示代码")

*   **MainActivity**具有**color**属性，您可以根据需要分配哪个颜色值。

怎么做？

*   Step1，获取当前点击跨度。

*   Step2，为当前点击范围设置BackgroundColorSpan

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:36:50.097

假设您要单击文本视图上的单个单词？我不明白在您的评论中将所有字母转换为单词。

下面可以用来点击个别作品，并以吐司的形式显示。

```
 public class MainActivity extends Activity {

    TextView _tv;
    String[] each;
    SpannableString ss1;
    Button b;
    EditText et;
    String s;
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    b= (Button) findViewById(R.id.button1);
    et = (EditText) findViewById(R.id.ed);
    _tv = (TextView) findViewById( R.id.tv );
    b.setOnClickListener(new OnClickListener()
    {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        s=et.getText().toString();
        _tv.setText("");
        for(int i=0;i<s.length();i++)
        {
            each = s.split("\\s+");
        }
        for(int i=0;i<each.length;i++)
        {
            System.out.println("................"+each[i]);
            ss1=  new SpannableString(each[i]);
            //StyleSpan boldSpan = new StyleSpan( Typeface.BOLD );
            //spannable.setSpan( boldSpan, 41, 52, Spannable.SPAN_INCLUSIVE_INCLUSIVE );
            ss1.setSpan(new MyClickableSpan(each[i]), 0, ss1.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
            _tv.append(ss1); 
            _tv.append(" "); 

        }
        _tv.setMovementMethod(LinkMovementMethod.getInstance());
    }
       });
      }
      class MyClickableSpan extends ClickableSpan{ 
      String clicked;
          public MyClickableSpan(String string) {
    // TODO Auto-generated constructor stub
       clicked =string;
      }
      //clickable span
      public void onClick(View textView) {
      //do something

      Toast.makeText(MainActivity.this,clicked ,
        Toast.LENGTH_SHORT).show();
     }
     @Override
     public void updateDrawState(TextPaint ds) {
     ds.setColor(Color.BLACK);//set text color 
     ds.setUnderlineText(false); // set to false to remove underline
     }
    }
    } 
```**

# php - Paypal 中缺少订单号

> ID：15699537
> 
> 赞同：0
> 
> 时间：2013-03-29T08:01:58.790
> 
> 标签：php, paypal

在我的网站中，我使用 Paypal 将多个项目传递到购物车。价格，产品名称一切都正确显示。但是Paypal中没有显示订单号。我在下面粘贴了我的代码。

```
<form name=pay_last_form method=post action='https://www.sandbox.paypal.com/cgi-bin/webscr'>
<input type=hidden name=cmd value=_cart>
<input type=hidden name=upload value='1'>
<input type=hidden name=rm value='2'>
<input type=hidden name=business value=mymail_id>
<input type=hidden name=item_name_1 value='Deep House 01 - Download Version'>
<input type=hidden name=amount_1 value='14.96'>
<input type=hidden name=item_number_1 value='1'>
<input type=hidden name=shipping value=''>
<input type=hidden name=currency_code value='EUR'>
<input type=hidden name=custom value='17297'>
<input type=hidden name=return value='thanks-payment.php'>
<input type=hidden name=cancel_return value='payment-cancel.php'>
<input type=hidden name=notify_url value='success_payment.php'>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:24:45.473

一旦您确定您的代码有效，最好进行最终测试。尝试使用 1 美元的交易。

尝试发送“item_number”而不是“item_number_1”。另外，尝试添加一些矿石数字以使其看起来真实。

您可以将其检索为 Request("item_number")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:09:21.177

您希望在哪里看到您的自定义值？这不会显示在支付页面上，因为这是商家只会看到的传递变量。当您登录商家帐户时，您应该在交易详细信息中看到它。如果您在买家账户中查看交易详情，您将不会看到它。这也通过 IPN 发回。这是应有的工作方式。我也刚刚进行了测试，它显示了它应该显示的位置。如果您试图让它显示在付款页面上，则需要使用一个不同的变量，该变量旨在向买家显示。

# wpf - Avalondock 文档选项卡重新定位

> ID：15699538
> 
> 赞同：0
> 
> 时间：2013-03-29T08:01:58.917
> 
> 标签：wpf, avalondock

当调整文档面板的大小时，Avalondock 会重新定位文档选项卡。请参阅下面的图片

![调整大小前的制表符位置](../Images/b9c343573fbb7ec5d6fcfab7bd59486c.png) ![调整大小后的标签位置](../Images/b98a03b911602569dbea195fe997a7e0.png)

谁能告诉我 Avalondock 如何管理其标签的顺序？我在哪里可以在 Avalondock 的源代码中找到这个逻辑（例如重新定位）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T09:55:56.817

同时我想通了。它是来自 DocumentPaneTabPanel 的 ArrangeOverride(Size finalSize) 方法正在执行此重新定位。

我更改了此代码以实现我自己的定位行为。

# putty - 无法在端口 22 上使用 ssh 进行腻子

> ID：15699542
> 
> 赞同：0
> 
> 时间：2013-03-29T08:02:22.697
> 
> 标签：putty

我在我的一个系统上安装了 linux 并为其分配了有效的网络 IP。我能够正确连接到网络。

但是，当我尝试在端口 22 上使用 ssh 从另一个系统中填充这个系统时，它会给我连接超时错误。当我 ping 系统时，它响应良好，但仍然无法 ssh。

可能是什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:19:22.310

The server in question may not be allowing logins as root. If so, you may need to log in using another username that also has admin privileges and then use the SU command to assume root privileges.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:08:12.520

我会首先检查端口 22 是否打开配置正确。我还要检查是否安装了 SSH - 我的首选是 OpenSSH - 并且它被配置为接受端口 22 上的传入连接。我还要检查是否没有设置防火墙或防火墙内的规则阻止连接到端口 22。

# java - 制作嵌套多边形

> ID：15699543
> 
> 赞同：0
> 
> 时间：2013-03-29T08:02:26.307
> 
> 标签：java, loops, geometry, do-while

我正在尝试使用循环，但不知道如何使其在循环中工作。这就是我对同心圆的看法，我想要同样的想法，但有三角形。

```
int x = 100;   
int y = 100;   
int width = 100;   
int height = 100;     
do{    
  g.drawOval(x, y, width, height);    
  x = x + 5;     
  y = y + 5;     
width = width - 10;     
height = height - 10; 
  } while (width>0 && height>0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:51:54.243

首先，do-while 循环并不常见（尽管它们有时确实有用）——最好熟悉`while`and `for`。

由于这似乎是一个家庭作业问题，我要做的是向您展示一些使用多边形绘制同心正方形的代码（这不是正常的方式，您通常只需使用`g.drawRect()`：

```
int width = 200;
int height = 200;
int xMid = width/2;
int yMid = width/2;
while(width > 0 && height > 0) {
    // Draw the square
    int xLeft = xMid - width/2;
    int xRight = xMid + width/2;
    int yTop = yMid - height/2;
    int yBottom = yMid + height/2;
    int[] xPoints = {xLeft, xRight, xRight, xLeft};
    int[] yPoints = {yTop, yTop, yBottom, yBottom};
    int nPoints = 4;
    g.drawPolygon(xPoints, yPoints, nPoints);

    // Change the dimensions
    width -= 20;
    height -= 20;
} 
```

看看你是否可以修改它来绘制三角形。

# shell - 我怎样才能在 shell 中做到这一点？

> ID：15699546
> 
> 赞同：-1
> 
> 时间：2013-03-29T08:02:37.447
> 
> 标签：shell

我是 shell 编程的新手，这是我实验室的作业。我真的不明白我应该做什么以及如何做。谁能帮我？

编写一个以给定文件夹开头的 shell，显示所有名称的列表：其中的文件和文件夹及其子目录。对于列表中的每个文本文件，name 打印该文件中相同行的最大数量，以及这些行的内容。对于列表中的每个文件夹名称，将打印包含的文件数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-16T12:00:04.530

```
find $1 | while read name
do  echo $name
    case `file $name` in
    *text)      sort $name|uniq -c|sort -nr|head -1;;
    *directory) find $name -maxdepth 1 -type f|wc -w;;
    esac
done 
```

# activerecord - YII 活动记录仅选择指定的文件

> ID：15699549
> 
> 赞同：2
> 
> 时间：2013-03-29T08:03:12.827
> 
> 标签：activerecord, yii

我只想获取指定的字段，但是当我这样做时：

```
 $criteria = new CDbCriteria();
 $criteria->condition = 't.DeletionMark = 0';
 $criteria->select = 't.Description, address.Description, city.Description';
 $data = WCatalogInternetCounterparties::model()->with('internetCounterpartyAddresses.address.city')->findAll($criteria); 
```

Active Record 使用 select Condition 中的所有字段生成查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:13:04.823

这是因为您使用的是 Active Records，您只能使用 DAO 获取所需的字段。

```
Yii::app()->db->createCommand()
    ->select('t.Description, address.Description, city.Description')
    ->where('t.DeletionMark = 0')
    ->from('w_catalog_internet_counterparties')
    ->with('internetCounterpartyAddresses.address.city')
    ->queryAll(); 
```

# javascript - 如何在 javascript 中计算图像加载/渲染时间？

> ID：15699556
> 
> 赞同：1
> 
> 时间：2013-03-29T08:03:43.370
> 
> 标签：javascript, jquery, image

有没有办法使用 javascript/jquery 在网页中查找图像加载/渲染时间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T08:12:15.857

正确的答案是使用 Chrome 或 Firefox/Firebug 等浏览器内置的开发工具，它会告诉您页面中所有资源的加载时间。这些工具可以访问纯 javascript 可以访问的更多信息。

使用 javascript，您可以精确计时加载使用 javascript 指定的图像。您不能使用 javascript 来精确计时 HTML 中指定的图像的加载时间，因为没有精确的方法可以在图像开始加载的那一刻开始进行 javascript 时间测量。

要为 javascript 中指定的图像计时：

```
var startTime = new Date().getTime();
var img = new Image();
img.onload = function() {
    var loadtime = new Date().getTime() - startTime;
    console.log("image took " + loadtime + "ms to load");
};
img.src = "http://www.whatever.com/testimg.jpg"; 
```

对于 HTML 中指定的图像，您可以做的最好的事情是：

```
<script>
var startTime = new Date().getTime();
function doneLoading() {
    var loadtime = new Date().getTime() - startTime;
    console.log("image took " + loadtime + "ms to load");
};    
</script>
<img src="http://www.whatever.com/testimg.jpg" onload="doneLoading()"> 
```

上一个示例中的`<script>`标签需要紧挨在`<img>`标签之前。

但说真的，使用 Chrome 或 Firebug 中的开发工具，您可以准确地看到所有页面资源的加载时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-12T19:36:22.590

```
var resourceList = window.performance.getEntriesByType("resource");
           for (i = 0; i < resourceList.length; i++)
           {
              if (resourceList[i].initiatorType == "img")
              {
                 alert("End to end resource fetch: "+ (resourceList[i].responseEnd - resourceList[i].responseStart ));
              }
           } 
```

[https://jsfiddle.net/q4euntat/5/](https://jsfiddle.net/q4euntat/5/)

您可以参考上面的链接，在 jsfiddle 上实现它。

# android - 在 Android 后台运行 App 时发送 GPS 数据

> ID：15699561
> 
> 赞同：1
> 
> 时间：2013-03-29T08:04:14.530
> 
> 标签：android, gps

我开发了获取 GPS 数据并发送到服务器的应用程序。所以我想在我的应用程序在 Android 设备中运行后台时获取 GPS 数据。我在很多网站上搜索过，但我无法回答。

我用2级。其中一个是 Main 类，另一个是 GPSTracker 类。现在我给出一些 2 类的部分代码。

主班

```
public class Request extends Activity {
public static Float longitude;
public static Float latitude;
public static int ID;  
public static String URL="http://xxx.xxx";
GPSTracker gps;

@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_request);

final Button button_send_info =    (Button)findViewById(R.id.button_send_info); 
    final TextView show_infos = (TextView) findViewById (R.id.textView1);
    gps = new GPSTracker(Request.this);

    if(gps.canGetLocation()){

        latitude = (float) gps.getLatitude();
        longitude = (float) gps.getLongitude();

        // \n is for new line
        Toast.makeText(getApplicationContext(), "Your Location is - \nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_LONG).show();    
    }else{
        // can't get location
        // GPS or Network is not enabled
        // Ask user to enable GPS/network in settings
        gps.showSettingsAlert();
    }

    if( Build.VERSION.SDK_INT >= 8){
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy); 
    }

    button_send_info.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
            postParameters.add(new BasicNameValuePair("latitude", latitude.toString()));
            postParameters.add(new BasicNameValuePair("longitude", longitude.toString()));

            String response = null;
            try 
            {
                response = CustomHttpClient.executeHttpPost(URL, postParameters);
                String res=response.toString();
                show_infos.setText(res);
            } 
            catch (Exception e) 
            {
                //hata alanı
            }
        }
    }); 
```

GPSTracker 类；

```
 public class GPSTracker extends Service implements LocationListener {

protected LocationManager locationManager;

public GPSTracker(Context context) {
    this.mContext = context;
    getLocation();
}

public Location getLocation() {
    try {
        locationManager = (LocationManager) mContext
                .getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!isGPSEnabled && !isNetworkEnabled) {
            // no network provider is enabled
        } else {
            this.canGetLocation = true;
            if (isNetworkEnabled) {
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("Network", "Network");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                    }
                }
            }
            // if GPS Enabled get lat/long using GPS Services
            if (isGPSEnabled) {
                if (location == null) {
                    locationManager.requestLocationUpdates(
                            LocationManager.GPS_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("GPS Enabled", "GPS Enabled");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return location;
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:13:14.773

android中有一个叫[Service的组件。](http://developer.android.com/reference/android/app/Service.html)它提供后台活动。您可以在其中执行后台进程。服务没有 GUI。您可以在那里编写 GPS 获取代码。

[查看Vogella](http://www.vogella.com/articles/AndroidServices/article.html)的服务组件的简单教程。

# sql - 依靠 SQL 函数返回值

> ID：15699562
> 
> 赞同：1
> 
> 时间：2013-03-29T08:04:16.123
> 
> 标签：sql, sql-server, tsql, function

我正在尝试计算表中使我创建的函数返回 1 的记录数。这是我所拥有的：

```
CREATE FUNCTION isErrorMismatch
(@theType nvarchar(1), @theExCode nvarchar(2))
RETURNS bit
AS
BEGIN
    DECLARE @theTypeAsInt int
    SET @theTypeAsInt = CAST(@theExCode AS INT)

    DECLARE @returnValue bit
    SET @returnValue = 0

    IF @theType = 'A'
        IF @theTypeAsInt >= 10 AND @theTypeAsInt <= 17 
            SET @returnValue = 0
        ELSE
            SET @returnValue = 1
    ELSE IF @theType = 'B'
        IF @theTypeAsInt >= 18 AND @theTypeAsInt <= 26 
            SET @returnValue = 0
        ELSE
            SET @returnValue = 1
    ELSE IF @theType = 'C'
        IF @theTypeAsInt >= 30 AND @theTypeAsInt <= 38 
            SET @returnValue = 0
        ELSE
            SET @returnValue = 1
    ELSE
            SET @returnValue = 1

    RETURN @returnValue
END

GO

SELECT (SELECT COUNT(*) 
FROM isErrorMismatch(LEFT(Type, 1),LEFT([Exception Code/Category],2)) 
As MismatchCount
FROM dbo.[All Service Ticket Data 2012_final] 
```

我想计算使函数返回 1 的每条记录。当我调用该函数时，我的 FROM 中出现语法错误。有人有想法么？谢谢！

***更新：

为了获得使函数返回 1 的计数：

```
SELECT COUNT(dbo.isErrorMismatch(LEFT(Type, 1), LEFT([Exception Code/Category],2))) As MismatchCount
FROM dbo.[All Service Ticket Data 2012_final]
WHERE dbo.isErrorMismatch(LEFT(Type, 1), LEFT([Exception Code/Category],2)) = 1 
```

为了获取使函数返回 1 的所有记录：

```
SELECT Type, [Exception Code/Category], 
dbo.isErrorMismatch(LEFT(Type, 1),LEFT([Exception Code/Category] ,2)) as Mismatch
FROM dbo.[All Service Ticket Data 2012_final]
WHERE dbo.isErrorMismatch(LEFT(Type, 1),LEFT([Exception Code/Category] ,2)) = 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:10:42.553

您遇到错误，因为您的函数不是表格类型或不返回表格，因此您无法从中进行选择。但是，您可以通过这样做来实现它：

```
SELECT  COUNT(*)            
FROM    dbo.[All Service Ticket Data 2012_final] a
        INNER JOIN
            (
            SELECT  isErrorMismatch(LEFT(Type, 1),LEFT([Exception Code/Category],2)) IsMatched, Your_PK_Column_or_Id
            FROM    dbo.[All Service Ticket Data 2012_final]
            ) x ON x.Your_PK_Column_or_Id = a.Your_PK_Column_or_Id
WHERE   x.IsMatched = 1 
```

我只想补充一点，如果您传递给该值的值`@theExCode`不能转换为 an ，`INT`那么您的查询中就会出现异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T08:32:56.923

标量 UDF，在这种情况下接受两个参数并返回一个值。可以使用标量 UDF 的一些领域：

*   SELECT 或 GROUP BY 中的列表达式
*   FROM 子句中 JOIN 的搜索条件
*   WHERE 或 HAVING 子句的搜索条件

* * *

```
SELECT SUM(CAST(dbo.isErrorMismatch(LEFT(Type, 1), LEFT([Exception Code/Category],2)) AS int)) As MismatchCount
FROM dbo.[All Service Ticket Data 2012_final] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T08:14:52.313

你需要结束`CREATE FUNCTION`with `GO`。此外，您的`SELECT`子查询最后需要一个右括号。

（您的问题是关于语法错误）。

# python - Python - 跟踪日志文件 - sleep() 与 inotify？

> ID：15699566
> 
> 赞同：1
> 
> 时间：2013-03-29T08:04:45.800
> 
> 标签：python, file-io, tail

我正在编写一个需要`tail -f`日志文件的 Python 脚本。

操作系统是 RHEL，运行 Linux 2.6.18。

我认为正常的方法是使用无限循环和睡眠，不断轮询文件。

但是，由于我们在 Linux 上，我想我也可以使用诸如 pinotify ( [https://github.com/seb-m/pyinotify](https://github.com/seb-m/pyinotify) ) 或 Watchdog ( [https://github.com/gorakhargosh/watchdog](https://github.com/gorakhargosh/watchdog) )之类的东西反而？

这有什么优点/缺点？

我听说使用`sleep()`, 如果文件快速增长，您可能会错过事件 - 这可能吗？我认为 GNU tail 无论如何也使用睡眠？

干杯，维克多

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T21:45:00.630

最干净的解决方案将是 inotify 在许多方面 - 毕竟这或多或少正是它的目的。如果日志文件的变化非常迅速，那么您可能会面临几乎不断被唤醒的风险，这不一定特别有效 - 但是，您始终可以通过在 inotify 文件句柄返回事件后添加自己的短暂延迟来缓解这种情况. 在实践中，我怀疑这在大多数系统上会是一个问题，但我认为值得一提，以防您的系统在 CPU 资源上非常紧张。

我看不出这种`sleep()`方法会如何错过文件更新，除非文件被截断或旋转（即重命名并创建另一个同名文件）。无论您做什么，这些都是棘手的情况，您可以使用诸如定期按名称重新打开文件以检查旋转的技巧。阅读`tail`手册页，因为它处理了许多此类情况，特别是日志文件将非常普遍（日志轮换被广泛认为是一种很好的做法）。

当然，缺点`sleep()`是您最终会批量读取并在两者之间产生延迟，而且即使文件没有更改，您也会有不断唤醒和轮询文件的开销。但是，如果您这样做，例如每秒一次，那么开销在大多数系统上可能并不明显。

我会说 inotify 是最好的选择，除非你想保持兼容，在这种情况下，简单的后备使用`sleep()`仍然是相当合理的。

**编辑：**

我刚刚意识到我忘了提及 - 检查文件是否被重命名的一种简单方法是`os.fstat(fd.fileno())`对打开的文件句柄和打开`os.stat()`的文件名执行 a 并比较结果。如果`os.stat()`失败，则错误将告诉您文件是否已被删除，如果没有，则比较`st_ino`（inode 编号）字段将告诉您文件是否已被删除，然后替换为同名的新文件。

检测截断更难 - 实际上，您的读取指针在文件中保持相同的偏移量，并且在文件内容大小恢复到原来的位置之前，读取将不会返回任何内容 - 然后文件将从该点正常读取。如果您`os.stat()`经常调用，您可以向后检查文件大小 - 或者您可以使用`fd.tell()`记录您在文件中的当前位置，然后显式查找文件末尾并`fd.tell()`再次调用。如果该值较低，则该文件已被您截断。只要您保留原始文件位置，这是一个安全的操作，因为您始终可以在检查后返回它。

或者，如果您仍然使用 inotify，则可以只观察父目录的更改。

请注意，文件可以被截断为非零大小，但我怀疑日志文件可能会发生这种情况 - 常见情况将被删除和替换，或者被截断为零。另外，我不知道您如何检测文件被截断然后立即填充到您当前位置之外的情况，除非记住最近的 N 个字符并比较它们，但这是一件非常糟糕的事情做。我认为 inotify 只会告诉您在这种情况下文件已被修改。

# eclipse-jdt - 使用eclipse JDT提取内部类

> ID：15699568
> 
> 赞同：1
> 
> 时间：2013-03-29T08:05:04.613
> 
> 标签：eclipse-jdt

我想解析一个项目，其中一些类具有内部类。如何使用 eclips JDT 提取内部类名称其他信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T13:21:36.570

可以遍历`Compilation`Java类的单元，访问`TypeDeclaration`AST节点。然后可以使用下面的代码检查它是否不是顶级类，即内部类。

```
public boolean visit(TypeDeclaration typeDeclarationStatement) {

    if (!typeDeclarationStatement.isPackageMemberTypeDeclaration()) {
            System.out.println(typeDeclarationStatement.getName());
            // Get more details from the type declaration.
    }

    return true;
} 
```

要获取匿名内部类，也可以使用以下代码：

```
public boolean visit(AnonymousClassDeclaration anonyomousClassDeclaration) {

    System.out.println(anonyomousClassDeclaration.toString());

    return true;
} 
```

使用 JDT 进行类遍历的详细信息可以从下面的链接中找到：

*   [Eclipse 从 .java 文件创建 CompilationUnit](https://stackoverflow.com/questions/11166862/eclipse-create-compilationunit-from-java-file/11168301#11168301)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T07:48:06.947

如果您有 IType 实例（类型），则可以通过以下方式查询内部类

```
type.getTypes(); 
```

这将为您提供此类型声明的直接成员类型的数组。

# iphone - 拒绝后删除应用内购买

> ID：15699581
> 
> 赞同：1
> 
> 时间：2013-03-29T08:06:14.167
> 
> 标签：iphone, ios, in-app-purchase, app-store-connect

我在 iTunes 上提交了申请，inApp 购买有问题。所以二进制文件被拒绝了。

inApp :- 非消耗品

现在我已经从应用程序中删除了 inApp 功能。如何从 iTunes 中禁用 inApp。我记得元数据中有一个用于 inApp 的 Tickmark 选项..我选择了..但现在它没有出现..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:49:56.153

这是我认为您应该采取的步骤。

1-上传一个新的二进制文件

2-自己拒绝二进制文件

3-删除应用内购买项目

4-标记应用程序准备好上传

5-上传没有应用内购买代码的新版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:44:39.697

删除您的应用内购买，然后上传新的二进制文件。在 AppPurchase 中删除的步骤

```
 1\. Login to intunesconnect.
 2\. Manage Application.
 3\. Select your app.
 4\. Manage Inapp purchase.
 5\. Select in app purchase already created.
 6\. Delete it. 
```

现在单击准备上传二进制文件，然后将二进制文件上传到存储。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T08:40:44.020

AFAIK，您必须在 iTunes 商店中创建一个新应用程序，而无需为其配置应用内功能。

# ruby-on-rails - 是否有安全的地方来存储动态创建的 Rails 模型？

> ID：15699588
> 
> 赞同：0
> 
> 时间：2013-03-29T08:06:49.440
> 
> 标签：ruby-on-rails

我正在使用以下 Rails 3 模型来动态创建模型：

```
# encoding: UTF-8

require_dependency 'read_only'
require_dependency 'readings_methods'

class Reading < ActiveRecord::Base
  self.abstract_class = true

  include ReadOnly
  include ReadingsMethods

  @@mutex = Mutex.new
  @@children = {}

  def self.with_table(t)
    @@mutex.synchronize do
      child = @@children[t]
      if child.nil?
        child = Class.new(self) do
          self.table_name = t
        end
        @@children[t] = child
      end

      child
    end
  end
end 
```

然而，调试显示，`@@children`在每次页面加载时都会重置，从而使每个页面加载非常非常缓慢。我该如何防止这种情况？是什么原因造成的？除非我记住孩子，否则 Rails 会进入无限循环，这让我相信每当我创建一个新模型或类似的东西时，它至少会重新加载一些类。如何防止这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:18:03.800

Rails 在开发模式下为您重新加载代码，这样您就不必每次进行更改时都重新启动 rails 服务器（在 rails 3.2 中，它尝试仅重新加载已更改的代码）。

当一个类被重新加载时，rails 取消设置常量并加载一个新的副本，所以特别是新的将有一组新的类变量。

`ActiveSupport::Dependencies.autoload_once_paths`并`ActiveSupport::Dependencies.autoload_paths`控制以这种方式重新加载的内容。您应该能够将文件的（完整）路径添加到 autoload_once_paths 以防止重新加载一个文件（但是您必须重新启动 rails 以便查看对其所做的任何更改）

# c# - 如何禁用 Datalist 中的链接按钮？

> ID：15699596
> 
> 赞同：0
> 
> 时间：2013-03-29T08:07:28.873
> 
> 标签：c#, javascript, asp.net

```
protected void lnk_Add_Click(object sender, DataListCommandEventArgs e)
{
    Label id = (Label)e.Item.FindControl("lbl_PID");
    Label lbl_P_Name = (Label)e.Item.FindControl("lbl_PN");
    Image P_Image = (Image)e.Item.FindControl("Img");
    LinkButton lnkbtn = (LinkButton)e.Item.FindControl("lnk_Add");
    lnkbtn.Enabled = false;

} 
```

我正在使用上述方法在单击一次链接按钮后禁用链接按钮，但我面临的问题是，当我单击其他链接按钮（在其他行中）时，上一个禁用的链接按钮会启用。

我想要的是禁用链接按钮，直到我没有从任何其他事件或方法启用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:27:03.530

只需`If(!IsPostBack)`在您的`page_load`活动中绑定您的网格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:20:28.973

我建议你使用你的`ItemDataBound`事件`Datalist`

```
void Item_Bound(Object sender, DataListItemEventArgs e)
{

         if (e.Item.ItemType == ListItemType.Item || 
             e.Item.ItemType == ListItemType.AlternatingItem)
         {

           var lnkbtn = (LinkButton)e.Item.FindControl("lnk_Add");
           lnkbtn.Enabled = false;

         }

} 
```

基于此链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)

# qt4 - 将对象从一个 QList 移动到另一个

> ID：15699599
> 
> 赞同：0
> 
> 时间：2013-03-29T08:07:43.767
> 
> 标签：qt4, qlist

我有两个数组，分别保存活跃和不活跃的QWebPage，也就是我想限制最大运行的QWebPages，所以我这样做了，

我使用两个 QList 对象，

```
QList<QWebPage*> pages;  // holds remaining pages
QList<QWebPage*> active; // holds active ones 
```

当我需要发送请求时，我会：

```
void XXX::addRequest (QUrl url)
{
    if (pages.size() > 0)
    {
        QWebPage *page = pages.front();
        pages.pop_front();
        active.push_back (page);

        page->mainFrame().load (url);
    }
} 
```

根据要求完成，

```
void XXX::finished (bool ok)
{
    QWebPage *page = qobject_cast<QWebPage*> (sender());

    // blabla

    // now I need to move this "page" to the "pages" list
} 
```

由于一个对象可以属于多个列表（它只是一个指针），我应该将它从`active`QList 中删除并将其附加到`pages`列表中，

但是 QList 只支持按索引号删除，我现在不能直接这样做。

有任何想法吗？希望不要遍历列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:11:17.817

QList*确实*支持按项目值删除项目，而不仅仅是按项目索引。有成员函数[`removeOne()`](http://qt-project.org/doc/qt-4.8/qlist.html#removeOne)和[`removeAll()`](http://qt-project.org/doc/qt-4.8/qlist.html#removeAll). 在您的情况下， removeOne() 是正确的选择。

# doctrine - 将子查询关联到连接查询

> ID：15699606
> 
> 赞同：1
> 
> 时间：2013-03-29T08:08:11.237
> 
> 标签：doctrine, subquery, symfony-1.4

我有这个过滤器添加

```
 $subQuery = $query->createSubquery()
    ->select ('ps.id')
    ->from('Person ps')
    ->innerJoin('ps.JoomlaUser ju')
    ->innerJoin('ju.OrderList o')
    ->innerJoin('o.ItemList oi')
    ->whereIn ('oi.product_id',$value);

    $subSubQuery = $subQuery->createSubquery()
    ->select('oh.order_id')
    ->from ('jos_vm_order_history oh')
    ->addWhere ('oh.order_status_code=?','C')
    ->addWhere ('oh.order_id=o.order_id')   //<-- this doesn't work
    ->orderBy ('oh.date_added desc')
    ->limit(1);

    $subQuery->addWhere('exists (' . $subSubQuery->getDql() . ')');

    $query->addWhere('person_id in (' . $subQuery->getDql() . ')'); 
```

在其中我需要将子查询与联接查询中的表相关联。当我执行这个我得到

```
Column not found: 1054 Unknown column 'o.order_id' in 'where clause' 
```

如何获取最终查询中使用的“OrderList”关系的查询别名？

# php - 如何管理许可以启用 Web 应用程序的功能？

> ID：15699618
> 
> 赞同：5
> 
> 时间：2013-03-29T08:08:51.473
> 
> 标签：php, mysql, web-applications, licensing, license-key

我将销售一种由我自己的服务器上的 Web 应用程序管理的新产品。Web 应用程序将允许管理一些设备。

我想将可管理设备的数量限制为用户购买的许可证数量。

我的网络应用程序目前允许管理所有设备，没有数量限制。

我不知道从哪里开始实施许可（许可密钥生成和检查），也不知道根据用户拥有的许可密钥限制设备。

任何帮助都将受到欢迎。先感谢您。

仅供参考：我正在使用 jquery、php 和 mysql。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T08:32:36.480

我会在数据库中实现几个表，如下所示：

![](../Images/72ae4429bb9767b4d0137066ad2212d5.png)

将有以下实体：**用户**、**许可证**和**设备**

如上所示，这些实体将相互关联。每个许可证都将包含有关许可设备数量的信息。

当设备连接到您的服务时，您的服务会通过其 ID 识别它，该 ID 在连接时由设备发送。然后你可以检查，设备是否注册，以及与该设备相关的许可证。

设备注册时将检查设备数量限制。

当用户注册设备时（将信息添加到表中：`Devices`和），您的代码应根据表中的字段值`LicensedDevices`检查已使用此许可证注册的设备的数量。`devicesQty``Licenses`

如果`devicesQty`value 允许添加更多设备，那么您的代码会将新设备添加到数据库中。

**更新：**

要控制许可设备的数量，您需要注册这些设备（例如 - 使用这些设备的唯一 ID）。否则，您无法控制使用您服务的设备数量。

一台设备连接、工作、断开连接，然后是另一台，然后是另一台，依此类推。在这种情况下如何控制数量？我认为除非注册这些设备的 ID，否则没有办法。

如果用户将他的设备更换为新设备，那么应该有一个程序来更新有关注册设备的信息。

如果您的客户仅使用网络浏览器来使用您的服务，那么控制许可证/设备的唯一方法是将 userid+password+deviceId 绑定到许可证。并在登录到您的网络服务/网络服务器时检查此信息。

如果您在移动设备上使用本机应用程序连接到您的 Web 服务，那么还有更复杂的方法。

[通过非对称加密方法](http://en.wikipedia.org/wiki/Public-key_cryptography)实现许可证密钥生成/验证。

为每个用户生成公钥和私钥。然后将私钥存储在您的数据库中，不要向任何人显示。

假设您的公钥是：**ABC-123-456**

使用[Base64 算法](http://en.wikipedia.org/wiki/Base64)将公钥字节转换为字母数字字符。

然后，在销售许可证时生成任意唯一的许可证代码。

Let say your license code is: **XYZ-789-012**

And provide end-users with public key and license code: **ABC-123-456** and **XYZ-789-012**

User sets public key and license code to the custom mobile application settings. And this application encrypts all sending data with this public key. And license code is included to the data package before encrypting it.

When your server receives a data from a device, it finds appropriate user by deviceId, then it finds appropriate private key to decrypt the data package. And then it inspects this data package on correctness.

# ruby - 如何正确处理持久的 TCP 套接字连接（模拟 HTTP 服务器）？

> ID：15699621
> 
> 赞同：5
> 
> 时间：2013-03-29T08:09:15.563
> 
> 标签：ruby, multithreading, sockets, http

因此，我正在尝试使用套接字和 Ruby 模拟一些基本的 HTTP 持久连接 - 用于大学课程。

关键是构建一个服务器 - 能够处理多个客户端 - 接收文件路径并返回文件内容 - 就像 HTTP GET 一样。

当前的服务器实现循环侦听客户端，当有传入连接时触发一个新线程并从此套接字读取文件路径。它非常愚蠢，但在使用非持久连接时效果很好 - 每个连接一个请求。

**但他们应该坚持不懈。**

这意味着客户端不应该担心关闭连接。在非持久版本中，服务器回应响应并关闭连接——*再见客户端，再见*。但是持久化意味着服务器线程应该循环并等待更多传入请求，直到......直到没有更多请求为止。服务器怎么知道的？它没有！需要某种超时。我试图用 Ruby 的 Timeout 来做到这一点，但没有奏效。

谷歌搜索一些解决方案——除了被彻底建议避免使用 Timeout 模块——我看过很多关于 IO.select 方法的帖子，它应该比使用线程和其他东西更好地处理这个套接字等待问题（这听起来真的很酷，考虑 Ruby 线程（不）如何工作）。我试图在这里了解 IO.select 的工作原理，但仍然无法使其在当前情况下工作。

所以我基本上问了两件事：

*   如何在服务器端有效地解决这个超时问题，或者使用一些基于线程的解决方案、低级套接字选项或一些 IO.select 魔术？

*   客户端如何知道服务器已经关闭了它的连接？

这是服务器的当前代码：

```
require 'date'
module Sockettp
  class Server
    def initialize(dir, port = Sockettp::DEFAULT_PORT)
      @dir = dir
      @port = port
    end

    def start
      puts "Starting Sockettp server..."
      puts "Serving #{@dir.yellow} on port #{@port.to_s.green}"

      Socket.tcp_server_loop(@port) do |socket, client_addrinfo|
        handle socket, client_addrinfo
      end
    end

    private
    def handle(socket, addrinfo)
      Thread.new(socket) do |client|
        log "New client connected"
        begin
          loop do
            if client.eof?
              puts "#{'-' * 100} end connection"
              break
            end

            input = client.gets.chomp

            body = content_for(input)

            response = {}

            if body
              response.merge!({
                status: 200,
                body: body
              })
            else
              response.merge!({
                status: 404,
                body: Sockettp::STATUSES[404]
              })
            end

            log "#{addrinfo.ip_address} #{input} -- #{response[:status]} #{Sockettp::STATUSES[response[:status]]}".send(response[:status] == 200 ? :green : :red)

            client.puts(response.to_json)
          end
        ensure
          socket.close
        end
      end
    end

    def content_for(path)
      path = File.join(@dir, path)

      return File.read(path) if File.file?(path)
      return Dir["#{path}/*"] if File.directory?(path)
    end

    def log(msg)
      puts "#{Thread.current} -- #{DateTime.now.to_s} -- #{msg}"
    end
  end
end 
```

**更新**

我能够使用 IO.select 方法模拟超时行为，但是当结合几个线程来接受新连接和另一个线程来处理请求时，实现感觉并不好。并发使情况变得疯狂和不稳定，除非我能找到更好的方法来使用这个解决方案，否则我可能不会坚持下去。

**更新 2**

似乎 Timeout 仍然是处理此问题的最佳方法。我会坚持下去，直到找到更好的选择。我仍然不知道如何处理僵尸客户端连接。

**解决方案**

我最终使用了 IO.select（在查看 webrick 代码时受到启发）。[你查一下这里](http://github.com/fuadsaud/http/)的最终版本（lib/http/server/client_handler.rb）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:08:03.073

您应该实现诸如心跳包之类的东西。客户端应在几秒/分钟后发送特殊数据包，以确保服务器不会使客户端的连接超时。您只需避免在此调用中执行任何操作。

# c# - 传递给另一个方法后如何访问从 LINQ 操作转换的对象列表的各个元素？

> ID：15699625
> 
> 赞同：1
> 
> 时间：2013-03-29T08:09:56.050
> 
> 标签：c#

我有一个 LINQ 列表如下

```
var lst =  (from entity in Entities
             join entity2 in E2.x equals Entities.x
                select entity); 
```

2\. 嗯，在上述操作之后这样做。返回`lst.ToList<Object>()`

并从另一个方法 um 像这样访问这个列表。

```
 List<Object> listObjects = new MyBO().GetAllEntities(); 
```

请注意，数字 2 在`GetAllEntities`方法中

但是`listObjects`通过迭代`listObjects`我无法访问单个元素中的成员。

如何访问各个元素？

这是从返回的输出`GetAllEntities()`

```
[0] { id= XCD1S100001, Type = EXPORT}
[1] { id= XSD1S100001, Type = IMPORT} 
```

如何访问`listObjects[0].getType()`还是`listObjects[0].Type`因为它不会给出这样的方法。

请需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:13:45.733

在第一个语句中，您使用`var`关键字：

```
var lst =  (from entity in Entities select entity); 
```

这使得`lst`最合适的类型是`IEnumerable<Entity>`（类名可以不同，我只是在这里猜测）。

在第二种方法中，您将输出设置为`List<object>`自己：

```
`return lst.ToList<Object>()` 
```

和

```
List<Object> listObjects = new MyBO().GetAllEntities(); 
```

这就是为什么你不能直接在`Entity`那里获取类成员的原因——`Object`实例没有属性`Type`。

```
`return lst.ToList();` 
```

把它挂到`var`：

```
var listObjects = new MyBO().GetAllEntities(); 
```

您还必须将方法返回类型更改`List<Entity>`为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:14:13.957

什么是`entity`收藏类型`Entities`？为什么要将其转换为`List`of `object`？尝试：

```
lst.ToList() 
```

代替：

```
lst.ToList<Object>() 
```

# php - mysql 不为 IS NOT NULL 工作

> ID：15699628
> 
> 赞同：-1
> 
> 时间：2013-03-29T08:10:22.623
> 
> 标签：php, mysql

所以我有以下查询

```
 query = "SELECT date_format(startPeriod,'%a, %M, %d, %Y') as startDate,
             date_format(startTime,'%I:%i%p') as startTime,
             date_format(endTime,'%I:%i%p') as endTime,
             jobLocation,jobId,
              hoursWorked
       FROM users,paycheck
       WHERE users.userId = '" . $_SESSION['userId'] .
       "' AND userId = empId
       AND startPeriod IS NOT NULL
       ORDER BY paycheck.startPeriod DESC"; 
```

问题是 startPeriod( 它是一个日期) 的一些值是空的，所以当我运行我的查询时，我不想显示那些为空的日期，但不幸的是，空的日期显示在我的表上。我怎样才能解决这个问题？

这是我源上的输出文件

```
 <tr><td></td><td>12:00AM</td><td>12:00AM</td><td>none</td><td>none</td><td>0.00</td></tr> 
```

在第一个 tds 之间你可以看到它是空的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:21:03.620

您确定插入的数据实际上是 NULL，而不仅仅是一个空字符串吗？

之后替换`startPeriod IS NOT NULL`为`TRIM(startPeriod) <> ""`

**或者**

```
query = "SELECT date_format(startPeriod,'%a, %M, %d, %Y') as startDate,
             date_format(startTime,'%I:%i%p') as startTime,
             date_format(endTime,'%I:%i%p') as endTime,
             jobLocation,jobId,
              hoursWorked
       FROM users,paycheck
       WHERE users.userId = '" . $_SESSION['userId'] .
       "' AND userId = empId
       AND (startPeriod != '0000-00-00' OR startPeriod IS NOT NULL)
       ORDER BY paycheck.startPeriod DESC"; 
```

这可以帮助你。

# sqlite - 在 SQLite 中使用 LIKE 条件更正语法

> ID：15699631
> 
> 赞同：0
> 
> 时间：2013-03-29T08:10:25.950
> 
> 标签：sqlite, grammar

使用 SQLite，我可以：

```
select my_column from my_table where substr(word,1,1) like '%I%'; 
```

所以我将得到第一个字符为 I 的所有字符串结果。但现在我想要第一个字符为 I 和 F 和 J 的结果。我尝试过：

```
select my_column from my_table where substr(word,1,1) like '%I%'&'%F%'&'%J%'; 
```

但这不起作用。

我应该使用什么语法来查找包含这些首字母的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:23:57.700

这是正确的答案：`SELECT mycolumn FROM mytable WHERE upper(substr(word,1,1)) IN ('I', 'F', 'J');`

# jquery-mobile - 在 JQueryMobile 中动态更改按钮数据主题

> ID：15699632
> 
> 赞同：3
> 
> 时间：2013-03-29T08:10:29.453
> 
> 标签：jquery-mobile

我在动态更改按钮主题时遇到了一些麻烦。从另一篇文章我学会了使用：

```
<input type="button" data-inline="true" data-mini="true" data-theme="c" id="my-button" value="Save">
<script>
$("#my-button").buttonMarkup({ theme: 'a' }).button('refresh');
</script> 
```

从技术上讲，这是可行的，直到我将鼠标悬停 - 然后按钮回退到数据主题“c”。有没有更好的方法来动态改变主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:47:45.650

如果您使用如下按钮

```
 <a href="#" id="my-button2" data-role="button" data-theme="e">Save2</a> 
```

您可以更改主题如下

```
$('#my-button2').attr("data-theme", "c").removeClass("ui-btn-up-e").addClass("ui-btn-up-c"); 
```

在这里查看现场小提琴[http://jsfiddle.net/mayooresan/jfDLU/](http://jsfiddle.net/mayooresan/jfDLU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T16:15:02.443

我试图找到这个问题的答案，但在研究了 DOM 结构后想出了这个解决方案。我创建了以下功能，用于在单击按钮时切换主题。只有在更改您单击的同一按钮的主题时才需要处理悬停类。这些似乎适用于输入类型的按钮元素。(jqm 版本 1.3.2)

```
function changeButtonTheme(buttonSelector,toTheme){
    var currentTheme  = $(buttonSelector).attr('data-theme');
    var parent  = $(buttonSelector).parent();
    $(buttonSelector).attr("data-theme", toTheme).removeClass("ui-btn-up-"+currentTheme).addClass("ui-btn-up-"+toTheme);
    parent.attr("data-theme", toTheme).removeClass("ui-btn-up-"+currentTheme).addClass("ui-btn-up-"+toTheme);
    //parent.removeClass("ui-btn-hover-"+currentTheme).addClass("ui-btn-hover-"+toTheme);
} 
```

# javascript - 向我的 SVG 窗口添加标题会擦除一个数据点？(d3)

> ID：15699633
> 
> 赞同：0
> 
> 时间：2013-03-29T08:10:41.137
> 
> 标签：javascript, d3.js

我有一个包含 100 个数字的数据集，在 SVG 中，我创建了一堆文本对象来使用下面的代码显示这些数字：

```
 svg.selectAll("text")
           .data(dataset)
           .enter()
           .append("text")
           .text(function(d) {
                console.log(output_format(d));
                return output_format(d); 
```

这完美地工作。但是，如果我稍后尝试使用以下代码（在我的 d3.csv 括号之外）创建一个标题：

```
 svg.append("text")
          .text("Actual Labels")
          .attr("x", w/1.92)
          .attr("y", top_gap/1.5)
          .attr("class", "title"); 
```

然后第一个数据点被删除，甚至不会显示在 console.log(output_format(d)); 中。这里发生了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:57:08.960

发生的情况是您的单个文本元素首先附加，因为其他代码必须等待 AJAX 请求。因此，当您附加文本元素的其余部分时，其中一个已经存在。此现有文本元素由 选择`selectAll("text")`，然后与 中的数据匹配`dataset`。默认情况下，d3 根据索引匹配数据——数组中的第一个元素匹配已经存在的第一个元素，因此不在`.enter()`您操作的选择中。

解决此问题的最简单方法是为您动态附加的文本标签提供不同的类并基于该类进行选择。也就是说，附加动态标签的代码看起来像

```
svg.selectAll("text.label")
       .data(dataset)
       .enter()
       .append("text")
       .attr("class", "label")
       .text(function(d) {
            console.log(output_format(d));
            return output_format(d);
       }); 
```

不需要进行其他更改。

# c++ - 现实世界开源项目中基于策略的设计

> ID：15699638
> 
> 赞同：1
> 
> 时间：2013-03-29T08:11:11.163
> 
> 标签：c++, open-source, policy-based-design

谁能指出我广泛使用基于策略的设计的开源 C++ 项目（最好不是 lib）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:13:47.450

亚历山德雷斯库最明显的一个：[洛基](http://sourceforge.net/projects/loki-lib/)

它正在积极开发中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:31:17.803

好吧，我想任何使用 STL 容器（由分配器，有时是比较器参数化）的 C++ 应用程序都广泛使用基于策略的设计。它一直是 STL 的基石，甚至看到它在 SGI 看到了曙光。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-11T03:01:22.953

任何使用 boost 的项目 :-) [http://www.boost.org/community/generic_programming.html#policy](http://www.boost.org/community/generic_programming.html#policy)

如果您的意思是启动基于策略的对象，那么将有很多项目使用 boost。例如，[http](http://programmingexamples.net/wiki/CPP/Boost/BGL/DijkstraDirected) ://programmingexamples.net/wiki/CPP/Boost/BGL/DijkstraDirected 或者您可以查看 github 上的大项目[https://github.com/search?q=%23include+%3Cboost%2Fgraph%2Fgraph_traits。 hpp%3E&type=代码&ref=搜索结果](https://github.com/search?q=%23include+%3Cboost%2Fgraph%2Fgraph_traits.hpp%3E&type=Code&ref=searchresults)

如果您的意思是定义基于策略的对象，那么大多数用例都是库。这样做的原因是，如果某些东西需要大量定制并且可以泛化，它就会变成一个库（即使是供内部使用）。如果您只是编写一个不需要自定义对象和多态的简单程序，那么它就不会使用太多基于策略的设计。对于那些，你也可以在 github 上搜索，尝试一些常见的基于策略的语法。

在我的科学工作中，我使用了 boost 的依赖于策略的 odeint 库。当我编码时，我从一个专门的哈密顿开始，然后我用策略概括它，它基本上成为我在许多其他项目中使用的库。

# html - 最小高度 Div 对齐

> ID：15699640
> 
> 赞同：0
> 
> 时间：2013-03-29T08:11:34.797
> 
> 标签：html, css

我在网上得到了这段代码，它满足了我对最小高度 div 的需求。但我也希望内容垂直居中对齐。有人可以帮忙吗？我已经浏览了这些论坛中给出的许多选项，但它们不能与这个特定的 css 结合使用。我必须使用这个特殊的 css 来获得最小高度的 div。

```
<html><style type="text/css">
  .prop {
    float:right;
    width:1px;

  }

  #footer {
    clear:both;
    border-top:2px solid #000000;
    text-align:left;
    font-size:80%;
  }

  .min200px {
    height:200px;
  }
  </style>
</html>
<body>

<div>
  <div class="prop min200px"></div>

I want this content to be vertically center aligned

  <div id="footer">
    Copyight 2012 - xyz
  </div>
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:18:45.210

您没有将文本包装在任何元素中。那时很难做到。

将文本保留在子元素中，并赋予`display:inline-block; vertical-align:middle;` 它和`line-height`父元素，其值等于元素的高度。稍后，随着`line-height`值继承给子元素，也赋予`line-height`子元素以使其看起来不错。

**更改的 HTML：**

```
<div>
    <div class="prop min200px">
        <div>I want this content to be vertically center aligned</div>
    </div>
    <div id="footer">Copyight 2012 - xyz</div>
</div> 
```

* * *

**更改 CSS**：

```
.prop{
    line-height:200px;
}
.prop>div{
    line-height:20px; /* or  1em */
    display:inline-block;
    vertical-align:middle;
} 
```

**[工作小提琴](http://jsfiddle.net/426Lm/5/)**

仅供参考，您提到您正在使用`min-height`财产。但是您还没有在代码中的任何地方使用它。（您刚刚声明了该属性名称的类名）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:23:29.947

我解决了。谢谢你们。但是无论内容是什么，我都需要一个最小高度，所以我使用了上面的 css 代码。但除此之外，我希望我的内容能够居中。所以我使用下面的代码。额外的 css 是为了满足我的其他需求：

```
@font-face { font-family: MyCustomFont;  src: url("file:///fonts/Roboto-Regular.ttf") }body,html,table { font-family: MyCustomFont; font-size:14.0pt;} body,html {text-align: center;vertical-align:middle;line-height: normal; margin: 0;padding: 0;width: 100%;height: 100%;}html {display: table;vertical-align: middle;text-align: center;}body {vertical-align: middle;text-align: center;}.minHeight { float:right; width:1px; height:94px; }

<div class="minHeight"></div><table height=94px align=center><tr>
<td align=center>My centered text </td></tr></table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T08:50:09.157

```
<div> 
```

我
希望
此
内容 垂直 居中 对齐
_
_

版权所有 2012 - xyz

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T08:24:17.137

I would use javascript/jQuery for this. This is just to point you out in the right direction

```
<div id="center">
  <div class="prop min200px"></div>
  I want this content to be vertically center aligned
  <div id="footer">
      Copyight 2012 - xyz
  </div>
</div>

<script type="text/javascript">
    var wh= window.height,
        h= $('#center').height(),
        x = (wh-h)/2;
    $('#center').css({"marginTop":"x"})
</script> 
```

what this does: it checks your window heigh and your div height. it subtracts from each other. After that this value is divided by 2 (for equal space between top and bottom) The margin-top is changed by this so you would have the equal space. This doesnt make the div Center fixed position (if you scroll it still changes) so if you want to change that you need to make some CSS adjustments to make it fixed.

# c# - 一种在 C# 中减少和优化此代码的方法

> ID：15699648
> 
> 赞同：0
> 
> 时间：2013-03-29T08:12:24.757
> 
> 标签：c#, .net

众所周知，c# 是强类型语言。

这有利有弊。

我有这段代码可以正常工作，没有问题：

```
 public static void SetText(Button Obj, string Text) { Obj.Text = Text; }
   public static void SetText(CheckBox Obj, string Text) { Obj.Text = Text; }
   public static void SetText(ComboBox Obj, string Text) { Obj.Text = Text; }
   public static void SetText(Label Obj, string Text) { Obj.Text = Text; }
   public static void SetText(LinkLabel Obj, string Text) { Obj.Text = Text; }
   public static void SetText(RadioButton Obj, string Text) { Obj.Text = Text; }
   public static void SetText(TextBox Obj, string Text) { Obj.Text = Text; }

   public static String GetText(Button Obj) { return Obj.Text; }
   public static String GetText(CheckBox Obj) { return Obj.Text; }
   public static String GetText(ComboBox Obj) { return Obj.Text; }
   public static String GetText(Label Obj) { return Obj.Text; }
   public static String GetText(LinkLabel Obj) { return Obj.Text; }
   public static String GetText(RadioButton Obj) { return Obj.Text; }
   public static String GetText(TextBox Obj) { return Obj.Text; } 
```

减少此代码的简单方法是这样的：

```
public static void SetText(Object Obj, string Text) { Obj.Text = Text; }
public static String GetText(Object Obj) { return Obj.Text; } 
```

但这是行不通的，因为 c# 是一种关于类型的严格语言。

为了解决这个问题，我可以使用反射，但我不想这样做。

如果有替代方案，我可以减少很多代码，否则我必须为其他功能做这件事。

一些想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T08:16:00.910

代码中的每个元素都派生自`Windows.Forms.Control`具有`Text`属性的元素。

```
public static void SetText(Control ctrl, string text) { ctrl.Text = text; }
public static String GetText(Control ctrl)            { return ctrl.Text; } 
```

（请注意，标准 .NET 命名约定建议对参数使用小写名称。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:00:01.773

德米特里的回答很棒，我只是稍微扩展了一点。

假设您在每个方法中都有重要的逻辑（因为为什么需要它们，如果您可以直接访问类`Text`上的属性`Control`），您可以利用 C# 中的扩展方法。他们从`C# 3.0`版本开始添加

```
public static class ControlExtensions
{
     public static void SetText(this Control ctrl, string text) 
     { 
          ctrl.Text = text;
     }

     public static String GetText(this Control ctrl)            
     { 
          return ctrl.Text;
     }
} 
```

对于简单的静态方法，您调用的方法如下所示：

```
YourStaticClass.SetText(myControl, "some text"); 
```

`Control`但是使用扩展方法语法，您可以在任何从类派生的对象上编写下一个代码。

```
myControl.SetText("some text"); 
```

`SetText`并且将调用静态方法

# nuget - 指定 nuget 包源

> ID：15699649
> 
> 赞同：2
> 
> 时间：2013-03-29T08:12:25.293
> 
> 标签：nuget, nuget-package, build-server

我的构建服务器无法构建，因为找不到包源。这是我想指定它的方式：

```
 <PackageSources><add key="My Feed" value="http://tfs2010:90/CompName.Nuget.Web.$(Configuration)/Nuget" /></PackageSources> 
```

错误：

C:\TFS2010\TFS\Nuget\nuget.Other.targets (43)：命令“C:\tmp\nuget.exe”安装“C:\Builds\1\PC\PackNameSources\PackName\packages.config” -source -o "C:\Builds\1\PC\PackName\Sources\packages"" 以代码 -1 退出。

现在，当然，如果我这样做：

```
<PackageSources>"http://tfs2010:90/MyFeed/Nuget"</PackageSources> 
```

然后它工作正常。

问题是最终，我想指定多个来源。

我该怎么做，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:41:13.740

解决方案是用分号分隔来源：

```
<PackageSources>"source1; source2"</PackageSources> 
```

# java - java.io.InvalidClassException: oracle.jdbc.oracore.OracleNamedType; 本地班

> ID：15699651
> 
> 赞同：0
> 
> 时间：2013-03-29T08:12:54.533
> 
> 标签：java

我试图在这里运行一个脚本，它抛出了以下错误。我怀疑这是因为jdk。我正在使用jdk1.6。我使用 jdk1.6 重新编译了脚本，仍然没有解决方案。

对此的任何投入都会有很大帮助！

```
java.io.InvalidClassException: oracle.jdbc.oracore.OracleNamedType; local class incompatible: stream classdesc serialVersionUID = -7756018223392232810, local class serialVersionUID = -5293859578141686716
java.io.InvalidClassException: oracle.jdbc.oracore.OracleNamedType; local class incompatible: stream classdesc serialVersionUID = -7756018223392232810, local class serialVersionUID = -5293859578141686716
        at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:562)
        at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1582)
        at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1495)
        at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1582)
        at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1495)
        at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1582)
        at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1495)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1315)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
        at weblogic.rjvm.ClassTableEntry.readExternal(ClassTableEntry.java:36)
        at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1791)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1750)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
        at weblogic.rjvm.InboundMsgAbbrev.readObject(InboundMsgAbbrev.java:65)
        at weblogic.rjvm.InboundMsgAbbrev.read(InboundMsgAbbrev.java:37)
        at weblogic.rjvm.MsgAbbrevJVMConnection.readMsgAbbrevs(MsgAbbrevJVMConnection.java:283)
        at weblogic.rjvm.MsgAbbrevInputStream.init(MsgAbbrevInputStream.java:213)
        at weblogic.rjvm.MsgAbbrevJVMConnection.dispatch(MsgAbbrevJVMConnection.java:498)
        at weblogic.rjvm.t3.MuxableSocketT3.dispatch(MuxableSocketT3.java:330)
        at weblogic.socket.BaseAbstractMuxableSocket.dispatch(BaseAbstractMuxableSocket.java:298)
        at weblogic.socket.SocketMuxer.readReadySocketOnce(SocketMuxer.java:950)
        at weblogic.socket.SocketMuxer.readReadySocket(SocketMuxer.java:888)
        at weblogic.socket.JavaSocketMuxer.processSockets(JavaSocketMuxer.java:339)
        at weblogic.socket.SocketReaderRequest.run(SocketReaderRequest.java:29)
        at weblogic.work.ExecuteRequestAdapter.execute(ExecuteRequestAdapter.java:21)
        at weblogic.kernel.ExecuteThread.execute(ExecuteThread.java:145)
        at weblogic.kernel.ExecuteThread.run(ExecuteThread.java:117)
> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:49:43.017

您的类路径中似乎有不同的类版本，正在反序列化的版本和类路径中可用的版本不同。

# jquery - 打印 Ajax 响应已定义，但尝试在 div 中打印时未定义

> ID：15699653
> 
> 赞同：0
> 
> 时间：2013-03-29T08:13:06.470
> 
> 标签：jquery, ajax, codeigniter

我正在处理一个表格。当用户单击按钮时，ajax 发送值，然后控制器加载模型和查询数据库以返回一个或一些注册表。

但是，当返回时，我得到了响应，但似乎是从表中获取所有数据而不是执行 where 子句。我也无法将此结果放入 div

```
--model

function get($where=array()) {
   $q = $this->db->get_where('tbl_name',$where);
   $result = $q->result_array();
   return $result;
}

-- controller

function get_em()
{   
  $key = $this->input->post('key');
  $this->load->model('model');
  $data['result'] = $this->model->get_em( array('id_guy' => $key)) ;
  header('Content-type: text/plain'); 
  echo json_encode($data);
}

--jquery
$(document).ready(function() {

   $('#btn').click(function(){
   var key = $("#key").val();     
   var postData = {
    'key' : key
   };
   $.ajax({
    type: "POST",
    url: "<?php echo base_url()?>index.php/controller/get_em",
    //data: postData , 
    dataType:"json",
    data: postData,
    success: function(response) {
            $.each(response, function(index,item){
              $("#wrapper_succes").append('<div><b>' + index[0] + '</b></div><hr />');
            });
        }
    });
    });
}); 
```

如何根据某些条件在从数据库中选择字段的 div 结果中打印结果，因为它们在控制器中返回，`$query->result_array()`所以在控制器中我理解 `$data['result'] = $this->model->`存储在 **结果**中，所以在 php 中我只会在**$result**中循环...但是如何使用 ajax 执行此操作，我无法打印任何结果，我只得到**未定义**或 [Object Object] 的东西，当使用 firebug 进行调试时，我可以看到响应如下所示：

```
{"result":[{"id_guy":"1","name":"joe",....,"last":"last man"}, .... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T15:02:19.750

如果你的反应看起来像`{"result":[{"id_guy":"1","name":"joe",....,"last":"last man"}]}`.

然后你有：

*   具有`Object`属性“结果”的一个`Array`
*   此数组包含具有您要显示的属性的对象

直接`$.each`在 response 上使用只会循环一次带有值：

```
index = result;
item = [{"id_guy":"1","name":"joe",....,"last":"last man"}] 
```

请注意，由于 item 包含 an如果`object`您`[object Object]`尝试将其转换为`String`

这意味着您必须遍历`result`，循环`array`，然后循环`object`属性。

给出类似的东西（[小提琴](http://jsfiddle.net/R8bAL/1/)）：

```
 $.each(response.result, function(index,item){
        $.each(item, function(index,item){
           $("body").append(index + " " + item + " ; ");
        });
        $("body").append("<BR>");
    }); 
```

# javascript - 按键在 Mozilla Firefox 中不起作用

> ID：15699654
> 
> 赞同：2
> 
> 时间：2013-03-29T08:13:08.187
> 
> 标签：javascript, jquery, html

我的任务是限制文本框的字母值。只有浮点值是可能的。在小数点后，我们必须写出两位数。我这样做了，但它在 Mozilla Firefox 中不起作用。我怎么解决这个问题？

我的脚本是

```
$(function () {
    $('#name').bind('paste', function () {
        var self = this;
        setTimeout(function () {
            if (!/^[a-zA-Z]+$/.test($(self).val())) $(self).val('');
        }, 0);
    });

    $('#salary').bind('paste', function () {
        var self = this;
        setTimeout(function () {
            if (!/^\d*(\.\d{1,2})+$/.test($(self).val())) $(self).val('');
        }, 0);
    });

    $('.decimal').keypress(function (e) {
        var character = String.fromCharCode(e.keyCode)
        var newValue = this.value + character;
        if (isNaN(newValue) || hasDecimalPlace(newValue, 3)) {
            e.preventDefault();
            return false;
        }
    });

    function hasDecimalPlace(value, x) {
        var pointIndex = value.indexOf('.');
        return  pointIndex >= 0 && pointIndex < value.length - x;
    }
     function isNumberKey(evt) { 
         var charCode = (evt.which) ? evt.which : event.keyCode 

         if (charCode > 31 && (charCode < 48 || charCode > 57) && charCode != 46) 
             return false; 
         else { 
             var len = document.getElementById("txtChar").value.length; 
             var index = document.getElementById("txtChar").value.indexOf('.'); 

             if (index > 0 && charCode == 46) { 
                 return false; 
             } 
             if (index >0 || index==0) { 
                 var CharAfterdot = (len + 1) - index; 
                 if (CharAfterdot > 3) { 
                     return false; 
                 } 

}

         } 
         return true; 
      } 
}); 
```

html是

```
<b>Name</b>
<input type="text" id="name"  /><br/>
<b>Salary</b>
<input type="text" id="txtChar" onkeypress="return isNumberKey(event)"  name="txtChar" class="CsstxtChar" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T09:00:50.203

您应该将 e.keyCode 更改为 e.charCode。

```
String.fromCharCode(e.charCode) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T09:01:59.397

```
function isNumberKey(evt) { 
     var charCode = (evt.charCode) ? evt.which : event.keyCode

     if (charCode > 31 && (charCode < 48 || charCode > 57) && charCode != 46) 
         return false; 
     else { 
         var len = document.getElementById("txtChar").value.length; 
         var index = document.getElementById("txtChar").value.indexOf('.'); 

         if (index > 0 && charCode == 46) { 
             return false; 
         } 
             if (index >0 || index==0) { 
                 var CharAfterdot = (len + 1) - index; 
                 if (CharAfterdot > 3) { 

                     return false; 
                 } 

}

         } 
         return true; 
      } 

<input type="text" id="txtChar" onkeypress="return isNumberKey(event)"  name="txtChar" class="CsstxtChar" /> 
```

# java - 我可以使用什么输入文件格式来创建方程？

> ID：15699656
> 
> 赞同：1
> 
> 时间：2013-03-29T08:13:16.967
> 
> 标签：java, c++, excel, input, vba

我正在使用监视软件来查找基于大量网络资源和方程式的特定主题的文章。方程式如下：

```
(K1 AND K2) OR K3 NOT "K4" OR "K5 K6"~5 
```

上面的示例说明了几乎所有可能的运算符，~ 是邻近运算符，当两个单词被找到并且最多被 n 个单词分隔时请求匹配。

给你一个更精确的例子（？是一个单字符通配符；* 是任意数量的字符）

```
("Game of Thrones" OR "George R. R. Martin") AND (Targaryen? OR Baratheon? NOT Lannister? OR "mother dragon?"~5) 
```

* * *

我想做的是提供一个脚本或程序，它可以采用关键字并形成方程式，而不必写下所有的括号。我认为这将使两个方程之间的比较更容易并降低错误率。

我首先想到了一个带有默认“OR”运算符的 excel 工作表：

```
keyword | logical operator | depth of parentheses 
```

但这并不是在每种组合中都有效——程序无法猜测两行之间的深度何时是恒定的，而实际上它确实是 -1 +1

我想要一个最简单的**输入**，因为我可能会将它发送给普通用户。你有什么主意吗 ？然后我可以用 C++、Java 甚至 VBA 做解释器。

**编辑**/为了澄清，我正在寻找一种输入格式，允许最终用户不写括号，只关心他们的关键字和它们之间的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:31:18.680

您在寻找什么，是将字符串输入与给定模式匹配。这是 CS 中一个非常常见的问题， 通常称为 regexps的[正则表达式的概念很好地解决了这个问题。](http://en.wikipedia.org/wiki/Regular_expression)

然而，正则表达式并不是那么容易编写，尤其是对于新手而言。即使是经验丰富的程序员有时也难以编写他们想要的确切正则表达式。

[这里](http://txt2re.com/)有一个有用的网站来生成正则表达式。它需要一些时间来了解它是如何工作的，但是之后它可以节省大量时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:35:41.810

我认为这些括号不能一直用 Regexp 正确完成。

我记得在大学里，我们学习了[编译器](http://en.wikipedia.org/wiki/Compiler)和[形式语言](http://en.wikipedia.org/wiki/Formal_language)。

您将需要在您的语言中定义允许的单词和一些规则，使其成为有效的语法（例如：括号必须关闭，必须是一个单词后跟一个逻辑运算符等等），最后您将获得执行结果。

在执行时，它需要用这些括号构建一个堆栈。并把价值观，偷看一个。

我希望它对您有所帮助，并且您有一些关键字可以在哪里搜索它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T09:02:50.313

您需要的是扫描仪和解析器。

自己编写扫描仪和解析器并不难。您可以在一百行中制作一个简单的**递归下降解析器**（[http://en.wikipedia.org/wiki/Recursive_descent_parser ）。](http://en.wikipedia.org/wiki/Recursive_descent_parser)

但是，您也可以使用编译器-编译器（如 lex/yacc）工具从给定的语法生成解析器。

# android - 有人可以帮我写Json吗？

> ID：15699657
> 
> 赞同：0
> 
> 时间：2013-03-29T08:13:18.307
> 
> 标签：android, json, getjson, android-parser

我只是从服务器解析 Json 格式的数据。我被卡住了。我不知道如何进一步进行。

```
JSONObject object1 = new JSONObject(str);
String s1 = object1.getString("results");
JSONArray array1 = object1.getJSONArray("constituencies"); 
```

上面的代码对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:19:10.567

看看下面的 JSON Parsing 代码，

```
public class ParseJSON extends Activity {

/** Called when the activity is first created. */

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    String readTwitterFeed = readTwitterFeed();
    try {
      JSONArray jsonArray = new JSONArray(readTwitterFeed);
      Log.i(ParseJSON.class.getName(),
          "Number of entries " + jsonArray.length());
      for (int i = 0; i < jsonArray.length(); i++) {
        JSONObject jsonObject = jsonArray.getJSONObject(i);
        Log.i(ParseJSON.class.getName(), jsonObject.getString("text"));
      }
    } catch (Exception e) {
      e.printStackTrace();
    }
  }

  public String readTwitterFeed() {
    StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet("http://twitter.com/statuses/user_timeline/vogella.json");
    try {
      HttpResponse response = client.execute(httpGet);
      StatusLine statusLine = response.getStatusLine();
      int statusCode = statusLine.getStatusCode();
      if (statusCode == 200) {
        HttpEntity entity = response.getEntity();
        InputStream content = entity.getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(content));
        String line;
        while ((line = reader.readLine()) != null) {
          builder.append(line);
        }
      } else {
        Log.e(ParseJSON.class.toString(), "Failed to download file");
      }
    } catch (ClientProtocolException e) {
      e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    }
    return builder.toString();
  }
} 
```

编写 JSON 非常简单。只需创建 JSONObject 或 JSONArray 并使用 toString() 方法。

```
public void writeJSON() {
  JSONObject object = new JSONObject();
  try {
    object.put("name", "Jack Hack");
    object.put("score", new Integer(200));
    object.put("current", new Double(152.32));
    object.put("nickname", "Hacker");
  } catch (JSONException e) {
    e.printStackTrace();
  }
  System.out.println(object);
} 
```

[原始来源](http://www.vogella.com/articles/AndroidJSON/article.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:19:22.443

> Above codes right or wrong??

So look at source:

```
{
   "results":{
      "constituencies":[

      ],
      "members":[
         {
            "constituency_name":"Beckenham",
            "member_name":"Bob Stewart",
            "member_party":"Conservative",
            "member_biography_url":"http://www.parliament.uk/biographies/commons/Bob-Stewart/3919",
            "member_website":"http://www.bobstewartmp.com/",
            "uri":"http://findyourmp.parliament.uk/constituencies/beckenham.json"
         },
         {
            "constituency_name":"Colchester",
            "member_name":"Sir Bob Russell",
            "member_party":"Liberal Democrat",
            "member_biography_url":"http://www.parliament.uk/biographies/commons/Sir-Bob-Russell/35",
            "member_website":"http://www.bobrussell.org.uk",
            "uri":"http://findyourmp.parliament.uk/constituencies/colchester.json"
         },
      ]
   }
} 
```

Here you have two `JSONObject`:

*   First(whole source)
*   results

results contains(in this snippet of code) two `JSONArrays`:

*   constituencies(that is empty array)
*   members(it has two childs)

So you need to first fetch whole `JSON` then results and then you have access to arrays.

```
JSONObject root = new JSONObject(str); // whole source
JSONObject results = root.getJSONObject("results");

JSONArray constituenciesArr = results.getJSONArray("constituencies");
JSONArray membersArr = results.getJSONArray("members");
JSONObject child = null;
for (int i = 0; i < membersArr.length(); i++) {
   child = membersArr.getJSONObject(i);
   String mName = child.getString("member_name");
   ...

} 
```

# java - 创建 Java 代码的图表表示/从代码中获取图表/将代码转换为图表的工具？

> ID：15699658
> 
> 赞同：1
> 
> 时间：2013-03-29T08:13:36.603
> 
> 标签：java, diagram, class-diagram, diagramming

我想要一个工具，它可以查看我的 java 代码或 eclipse java 项目并将其转换为显示类和方法之间的关系和依赖关系的图表。这样的工具将大大减少向他人解释我的代码的需要。它将使相关的图表/图片比仅评论和 java 文档更容易理解。

是否有任何可靠的工具可用于此类目的？我更喜欢免费/开源工具。但是，只要被业界接受，什么都可以。

***编辑***

我需要人们能想到的所有可能的图表——UML、序列、状态、交互、显示哪个方法调用哪个等等。如果每个功能都由不同的工具提供，这不是问题。我可以使用多种工具来生成不同类型的图表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:18:10.550

我认为您正在寻找的是类图。如果你不知道 UML 是什么，你肯定需要[看看它](http://en.wikipedia.org/wiki/Unified_Modeling_Language)。

使用 Eclipse 生成类图的问题已在 SO 上广泛讨论，[这里](https://stackoverflow.com/questions/6302490/eclipse-plugin-for-generating-a-class-diagram)是 Eclipse 插件的好指针。

# python - 为什么在这个 gevent 程序中只建立了一个与 redis 的连接？

> ID：15699666
> 
> 赞同：2
> 
> 时间：2013-03-29T08:14:04.197
> 
> 标签：python, redis, gevent

我正在使用 gevent 构建一个服务器，该服务器执行一些 redis 工作并将结果返回给客户端。但是性能很差。经过一番研究，我发现与redis只有一个连接。看起来只产生了一个greenlet。这是我的程序：

```
#!/usr/bin/env python
from gevent import monkey
monkey.patch_all()
import gevent
from gevent.wsgi import WSGIServer
from gevent.pool import Pool
import gevent.socket
from cgi import parse_qs, escape
import json
import redis

p = redis.ConnectionPool()

def app(environ, start_response):
    status = '200 OK'
    body = ''

    path = environ.get('PATH_INFO', '').lstrip('/')
    parameters = parse_qs(environ.get('QUERY_STRING', ''))

    r = redis.Redis(connection_pool=p)
    if path == 'top':
        l = r.zrevrange('online', 0, 50, True)
        body = json.dumps({'onlinetime':map(lambda (pid, online): {'pid':pid, 'onlinetime':online}, l)}) + '\n'

    headers = [
        ('Content-Type', 'text/html'),
        ('Content-Length', str(len(body))),
    ]

    print 'in_use_conn:', len(p._in_use_connections), 'created_connections:', p._created_connections
    start_response(status, headers)

    yield body

def main():
    pool = Pool(1000)
    WSGIServer(('', 7332), app, spawn=pool, log=None).serve_forever()

if __name__ == '__main__':
    main() 
```

我的程序有问题吗？为什么redis只有一个连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T13:18:51.373

看看[http://gehrcke.de/2013/01/highly-concurrent-connections-to-redis-with-gevent-and-redis-py/](http://gehrcke.de/2013/01/highly-concurrent-connections-to-redis-with-gevent-and-redis-py/)

我不是 100% 是你的猴子补丁在起作用，但我会将其替换为：

```
import gevent
import redis.connection
redis.connection.socket = gevent.socket 
```

您还可以创建自己的池，并使用 gevent 支持的 redis 连接...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T16:04:54.380

是什么让您认为您与 redis 的连接只有一个？实际上，我的小测试表明您的服务器确实打开了很多与 redis 的连接。

为了使测试更清楚，我稍微修改了您的打印语句：

```
print '%s' % parameters['index'], 'in_use_conn:', len(p._in_use_connections), 'created_connections:', p._created_connections, 'available_conn:', len(p._available_connections) 
```

然后运行此脚本以发出一些请求：

```
for i in {1..20}
do
    wget http://127.0.0.1:7332/top?index=$i > /dev/null 2>&1 &
done 
```

这就是我得到的：

```
['1'] in_use_conn: 1 created_connections: 2 available_conn: 1
['2'] in_use_conn: 4 created_connections: 5 available_conn: 1
['3'] in_use_conn: 3 created_connections: 5 available_conn: 2
['4'] in_use_conn: 5 created_connections: 6 available_conn: 1
['6'] in_use_conn: 4 created_connections: 6 available_conn: 2
['5'] in_use_conn: 3 created_connections: 6 available_conn: 3
['7'] in_use_conn: 2 created_connections: 6 available_conn: 4
['10'] in_use_conn: 1 created_connections: 6 available_conn: 5
['8'] in_use_conn: 0 created_connections: 6 available_conn: 6
['14'] in_use_conn: 10 created_connections: 11 available_conn: 1
['11'] in_use_conn: 9 created_connections: 11 available_conn: 2
['12'] in_use_conn: 8 created_connections: 11 available_conn: 3
['16'] in_use_conn: 7 created_connections: 11 available_conn: 4
['15'] in_use_conn: 6 created_connections: 11 available_conn: 5
['13'] in_use_conn: 5 created_connections: 11 available_conn: 6
['20'] in_use_conn: 4 created_connections: 11 available_conn: 7
['19'] in_use_conn: 3 created_connections: 11 available_conn: 8
['9'] in_use_conn: 2 created_connections: 11 available_conn: 9
['17'] in_use_conn: 1 created_connections: 11 available_conn: 10
['18'] in_use_conn: 0 created_connections: 11 available_conn: 11 
```

可以看出，在 peek time 你有 10 个 greenlet 同时运行，等待套接字。你的代码对我来说看起来非常好。为什么“表现不佳”是另一回事。可能是您排序的“在线”集太大。或者更有可能您正在使用阻塞客户端来测试服务器，在这种情况下，您只会看到一个与 redis 的连接。

# include - 包含保护中调用的 FILE_H 是什么

> ID：15699670
> 
> 赞同：0
> 
> 时间：2013-03-29T08:14:17.270
> 
> 标签：include, preprocessor

在文件`file.h`中，可以看到以下代码。

```
#ifndef FILE_H
#define FILE_H
 ...
 ...
#endif 
```

**问题**：谁生成了 FILE_H（FILE_H 被称为标识符吗？）这个命名约定叫什么？我应该阅读什么以了解更多信息？

目前，我知道这被称为包含保护，以及与预处理器有关的东西。但我似乎无法进一步谷歌。任何链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-03T02:00:22.663

包含保护实际上并不是语言本身的一个特性，它们只是一种确保同一个头文件不会两次包含在同一个翻译单元中的方法，它们是由低级语言特性构建的。

使这成为可能的实际*功能*是宏替换（特别是类似对象的宏）和条件包含。

因此，要找出它的`FILE_H`来源，您需要检查两件事。

首先是标准施加的限制（`C11 6.4.2`例如）。在宏替换中，宏名必须取自有限的字符集，*最少*包括大小写字母、下划线和数字（*可以*允许各种附加值，例如通用字符）名称或其他实现定义的字符，但这是强制性的基线）。

二是开发者的思想。除了标准的限制之外，开发人员必须提供一个用于包含保护的唯一标识符，最简单的方法是让它以某种方式依赖于文件名本身。因此，一种做法是使用大写文件名并`.`替换为下划线。

这就是为什么你最终会得到一个包含保护`btree.h`的形式：

```
#ifndef BTREE_H
#define BTREE_H
    // weave your magic here
#endif 
```

但是你应该记住，它并不*总是*很好。有时您可能会得到两个名称相似的头文件，它们使用相同的包含保护名称，从而导致根本不包含其中一个头文件。这种情况很少发生，通常不值得关注。

# vb.net - 如何使用 Rhino Mocks 在 vb.net 中模拟通用接口

> ID：15699678
> 
> 赞同：0
> 
> 时间：2013-03-29T08:15:16.760
> 
> 标签：vb.net, unit-testing, rhino-mocks

我有一个看起来像这样的界面：

```
ISomeInterface(Of ClassA, ClassB) 
```

我可以使用 VB.NET 和 Rhino Mocks 模拟这个界面吗？如果是这样，怎么做？如果没有，我有哪些选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:42:37.657

我找到了以下解决方案：

```
 <TestInitialize()>
    Public Sub TestInitialize()
        _myStub= MockRepository.GenerateStub(Of ISomeInterface(Of ClassA, ClassB))()
        _controller = New MyController(_myStub)
    End Sub

    <TestMethod()>
    Public Sub SomeMethodCallsMyStubOtherMethod()
        Dim someObject As New SomeObject() With {.Title = "TEST"}
        _myStub.Stub(Of SomeObject)(Function(x) x.GetSomeObject()).Return(someObject)
        Dim result As JsonResult = _controller.SomeMethod()
        Dim someResult As SomeObject = result.Data

        Assert.IsNotNull(someResult)
        Assert.AreEqual(someResult.Title, someObject.Title)
    End Sub 
```

# objective-c - box2d 和 cocos2d 中的椭圆夹具

> ID：15699692
> 
> 赞同：0
> 
> 时间：2013-03-29T08:17:20.853
> 
> 标签：objective-c, cocos2d-iphone, box2d

我正在尝试在 Cocos2d + Box2d 中开发 iOS 游戏。我想在 Box2D 中使用椭圆夹具。我尝试使用 b2Capsule 形状，但它不完全是我想要的，因为碰撞不正确。以前有人做过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T18:40:50.790

我也使用了近似值。这有一些性能缺陷，但我猜没有什么大不了的。代码（Flash ActionScript 3，但您应该能够轻松移植）：

```
var vertices:Vector.<b2Vec2> = new Vector.<b2Vec2>();
var a:Number = _image.width / 2 / PhysicsVals.RATIO;
var b:Number = _image.height / 2 / PhysicsVals.RATIO;
var segments:int = ellipse_approximation_vertices_count; (the more the more precise shape is, but the more time it takes to do collision detection)

var segment:Number = 2 * Math.PI / segments;

for (var i:int = 0; i < segments; i++)
{
    vertices.push(new b2Vec2(a * Math.cos(segment * i), b * Math.sin(segment * i)));
}

var shape:b2PolygonShape = new b2PolygonShape();
shape.SetAsVector(vertices, vertices.length);

var fixtureDef:b2FixtureDef = new b2FixtureDef();       
fixtureDef.shape = shape; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:05:58.567

对于 Box2D 中的特定形状，您将不得不对原始多边形进行三角剖分（在您的情况下，您将在其中保留一定数量的顶点的椭圆）。

为此，您可以使用[http://code.google.com/p/poly2tri/](http://code.google.com/p/poly2tri/)上的 poly2tri 出色的约束 Delaunay 三角剖分， 非常简单。这是我得到三角形的方法：

```
- (NSArray*) triangulate:(NSArray*)verticesArray
{

NSMutableArray* outputTriangles = [[[NSMutableArray alloc] init] autorelease];

p2t::CDT* triangulationContainer;
vector<p2t::Triangle*> p2tTriangles;
vector< vector<p2t::Point*> > polylines;
vector<p2t::Point*> polyline;

for (hOzPoint2D *point in verticesArray) {
    polyline.push_back(new p2t::Point([point x], [point y]));
}

polylines.push_back(polyline);
triangulationContainer = new p2t::CDT(polyline);
triangulationContainer->Triangulate();
p2tTriangles = triangulationContainer->GetTriangles();

for (int i = 0; i < p2tTriangles.size(); i++) {

    p2t::Triangle& t = *p2tTriangles[i];

    p2t::Point& a = *t.GetPoint(0);
    p2t::Point& b = *t.GetPoint(1);
    p2t::Point& c = *t.GetPoint(2);

    [outputTriangles addObject:[NSArray arrayWithObjects:
                                [hOzPoint2D point2DWithDoubleX:a.x doubleY:a.y],
                                [hOzPoint2D point2DWithDoubleX:b.x doubleY:b.y],
                                [hOzPoint2D point2DWithDoubleX:c.x doubleY:c.y], nil]];

}

delete triangulationContainer;

for(int i = 0; i < polylines.size(); i++) {
    vector<p2t::Point*> poly = polylines[i];
    FreeClear(poly);
}

return [outputTriangles copy]; 
```

}

hOzPoint2D 这里是我的自定义点类，但你可以传递任意几个坐标。您甚至不必输出 NSArray ：您可以将此方法插入到您的身体创建方法中。注意 poly2tri 有一些限制：

*   您的多边形中不能有两次相同的点；
*   多边形不能是自相交的；
*   ...

阅读 poly2tri 页面以了解更多信息。

生成的数组包含作为固定装置附加到同一主体的三角形。

# linux - 如何查找 CPU 使用率大多数文件？

> ID：15699701
> 
> 赞同：0
> 
> 时间：2013-03-29T08:17:58.013
> 
> 标签：linux, cpu-usage

我使用“top”命令并得到以下结果：
PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 30769 test 20 0 48964 23m 5968 R 100 1.4 2:06.89 php 30747 test 20 0 48964 23m 5976 R 57 1.4 6:24.55 php

我怎样才能找到哪个 php 文件使用最多的 CPU。（为我糟糕的英语道歉）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:48:38.143

试试这个：

```
ps -e -o pid,%cpu,comm= | sort -n -k 2 | grep "\.php" 
```

输出将按进程`%CPU`使用情况排序。

# git - git push NOT 当前分支到远程

> ID：15699702
> 
> 赞同：34
> 
> 时间：2013-03-29T08:18:01.133
> 
> 标签：git, git-push

**git裸**存储库中是否有办法推送当前不在 HEAD 中的分支？

例如我有两个分支：

```
$ git branch
* master
  another 
```

我有两个遥控器：`origin`和`another`。

我需要能够在不更改 HEAD 的情况下仅在一个命令中`another`推送。`another/another`

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-09-27T02:56:36.310

原始问题中的所有“另一个”，答案和大量评论都令人困惑（这是一个完美的例子，说明为什么首先要正确命名你的东西很重要），我忍​​不住帮忙（双关语不打算）写下另一个答案，如下所示。

问：在 git（裸）存储库中是否有办法推送当前**不在**HEAD 中的分支？例如，我有两个分支和两个遥控器。我需要能够在不更改 HEAD 的情况下仅在一个命令中`feature`推送。`upstream/feature`

```
$ git branch
* master
  feature
$ git remote
origin
upstream 
```

答：做**git push remote_name branch_name**。在上面的例子中，它看起来像这样。

```
$ git push upstream feature 
```

Q: 是不是会push local `feature`to `upstream/feature`? 我一直认为它会将当前的 HEAD 推到`upstream/feature`.

答：是的。该`feature`部分是一个*[refspec](https://git-scm.com/book/en/v2/Git-Internals-The-Refspec)*，其形式为`src:dst`. 这意味着将本地分支推`src`送到远程分支`dst`。如果`:dst`省略，则将本地分支`src`推送到远程分支`src`。您也可以指定不同的名称作为远程分支。做就是了：

```
$ git push upstream feature:cool_new_feature 
```

（感谢@gabriele-petronella 和@alexkey 为这个答案提供材料。）

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-29T08:20:07.897

`git push`您可以指定远程和本地

```
git push remotename branchname 
```

# java - 用Java创建数据结构

> ID：15699703
> 
> 赞同：2
> 
> 时间：2013-03-29T08:18:02.090
> 
> 标签：java, class, data-structures, struct

我想知道是否有一种在 Java 中创建新数据结构以避免创建新类文件的好方法。根据[这篇文章](https://stackoverflow.com/questions/14794196/creating-struc-like-data-structure-in-java)，Java 相当于**C**中的 struct 只是一个类。但是，我发现为仅具有几个公共字段的类创建一个全新的文件是多余的，例如：点的 x,y 坐标。在**C**中，可以在使用它的 .c 文件中定义数据结构，这要简单得多。这实际上是Java中的唯一方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T08:24:28.273

您可以使用[内部/嵌套类](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)。您将只有一个 .java 文件，但嵌套类在编译时都会有自己的 .class 文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T08:24:37.493

如果你想要一个数据结构，你必须创建一个类。为了避免创建多个 .java 文件，您可以将这些类放在一个 .java 文件中。假设，Test.java-

```
public class Test {

    class InnerOne {
    }

    void m() {
        class InnerMost {
        }
    }
}

class Dummy {
}

class OnMore {
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T08:23:38.620

您可以在一个 .java 文件中创建几个小的辅助类，但它们不能是公共的。因此，例如，您可以创建一个公共类，其名称对应于一个文件和几个非公共的辅助类。

至于java中的每个数据结构的类，java只有一种创建抽象数据类型的方法——类，如果你对此不满意——尝试使用其他JVM语言，比如Scala，在这方面要灵活得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T08:22:07.380

Java 是一种面向对象的编程语言，所以一切都适用于类，你不应该尝试像使用 C 一样使用 Java 进行编程。

如果你想在一个类中定义一个数据结构，你应该使用[InnerClass ，](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)[官方文档上](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)有一个很好的例子。

# c# - 动态创建的按钮数组的单击事件

> ID：15699704
> 
> 赞同：0
> 
> 时间：2013-03-29T08:18:02.307
> 
> 标签：c#, asp.net

在我的应用程序中，我动态创建了一系列按钮。我正在尝试为这些按钮引发 onclick 事件并更改我单击的按钮的文本。我为此尝试了以下代码，但它不起作用。我该怎么做?.任何建议？

**代码**：

```
 for (int i = 0; i < 5; i++)
    {
        lbl = new Button[5];
        lbl[i] = new Button();
        lbl[i].Text = "hi";
        lbl[i].Width = 30;
        lbl[i].Click += new EventHandler(lbl_click);
        //lbl[i].CssClass = "label";
        div1.Controls.Add(lbl[i]);
    } 
```

**点击事件**：

```
 protected void lbl_click(object sender, EventArgs e)
   {
    Button[] lbl = sender as button[];
    lbl[i].Text = "clicked";

   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T08:19:31.303

您正在事件处理程序中重新创建按钮数组，但该数组未填充之前创建的按钮。它是空的，如果您尝试使用此数组的元素（`null.Text`它永远不会工作），它会给您一个空引用异常。
相反，发送者对象代表用户单击的按钮。

```
protected void lbl_click(object sender, EventArgs e)
{
     Button lbl = sender as Button;
     lbl.Text = "clicked";
} 
```

另外，如果您需要知道单击了哪个特定按钮，那么我建议您在创建时添加一些内容以区分它们：

例如使用 name 属性：

```
Button[] lbl = new Button[5];
for(int i = 0; i< 5; i++)
{
    ....
    lbl[i].Name = "Button_" + i.ToString();
    ....
} 
```

请注意，我已将数组声明和初始化移到创建数组的每个元素（实际按钮）的循环之外。

# java - Jackrabbit 2.6.0 与 Java 6 的兼容性

> ID：15699707
> 
> 赞同：0
> 
> 时间：2013-03-29T08:18:28.433
> 
> 标签：java, jackrabbit

我们最近从 Jackrabbit 2.4.0 升级到 Jackrabbit 2.6.0。Jackrabbit 部署到 JBoss AS 7.1.0 中。我们仍然使用 Java 6。从 Jackrabbit 2.6.0 清单文件中，我们看到它是使用 Java 7 构建的。在 Java 6 中使用 Jackrabbit 2.6.0 有什么可担心的（实际上 Jackrabbit 2.6 从 Java 7 中使用了任何特定功能.0 代码库）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:33:15.967

2.6 版本的[Jackrabbit 父 POM](http://svn.apache.org/repos/asf/jackrabbit/branches/2.6/jackrabbit-parent/pom.xml)明确指出使用 Java 6 进行编译。

相关部分贴在下面

```
 <plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
      <target>1.6</target>
      <source>1.6</source>
    </configuration>
  </plugin>
  <!-- Generate aggregate Javadocs -->
  <plugin>
    <artifactId>maven-javadoc-plugin</artifactId>
    <configuration>
      <source>1.6</source>
      <aggregate>true</aggregate>
      <links>
        <link>http://docs.oracle.com/javase/6/docs/api/</link>
        <link>http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/</link>
      </links>
    </configuration>
  </plugin>
  <!-- JCR-988: IDE plugins -->
  <plugin>
    <!-- http://maven.apache.org/plugins/maven-idea-plugin/ -->
    <artifactId>maven-idea-plugin</artifactId>
    <configuration>
      <downloadSources>true</downloadSources>
      <jdkLevel>1.6</jdkLevel>
    </configuration>
  </plugin> 
```

# algorithm - 从给定的二部图中找到所有最大的完全二部子图

> ID：15699714
> 
> 赞同：6
> 
> 时间：2013-03-29T08:19:10.867
> 
> 标签：algorithm, bipartite

给定一个二部图，我们要列出所有最大完全二部子图。

例如，

顶点集 L = {A, B, C, D}

顶点集 R = {a, b, c, d, e}

边缘：Aa、Ab、Ba、Bb、Cc、Cd、Dc、Dd、De

最大完全二分是：

{A,B}-{a,b}

{C,D}-{c,d}

{D} - {c, d, e}

我找到了一个蛮力算法，O(2^n)。我不知道是一些近似算法还是随机算法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:03:05.333

您可以通过在二分图的每个部分的每对顶点之间添加边来将问题转换为找到最大团。

Bron-Kerbosch 算法可用于列出图中的所有最大团（不一定是二分的）。它很容易实现，并且在 O(3^(n/3)) 的最坏情况下的时间界限稍好一些。就图的退化而言，还有一个固定参数的可处理时间界限。

# jquery - 插件和“this”和范围，并在全球范围内解决它

> ID：15699716
> 
> 赞同：0
> 
> 时间：2013-03-29T08:19:12.393
> 
> 标签：jquery

所以，这不是一个“新”问题，但除了创建一些全局之外，我似乎找不到解决方案。但如果我有超过 1 个实例，该全局将与其他插件实例发生冲突。例如。

```
;(function( $, window, document, undefined ) {
    var self = {};
    function Niftyplugin(elem, config){
        this.config = $.extend( {}, $.fn.niftyplugin.config, config );
        this.elem = elem;
        this.$elem = $( elem );
        self.config = this.config;
    }
} 
```

我可以避免不断需要做这样的事情：

```
var that = this; 
```

在会产生范围问题的函数中，但如您所见 - 我正在使用全局

`var self = {};`或我可以使用的任何其他名称。

我的问题是，有没有更好的方法？一种更强大的方式，我的插件可以在构造函数中将不会与其他实例冲突的“this”obj分配给某个 var/obj ？

我试过...

```
;(function( $, window, document, undefined ) {
    var self = {};
    function Niftyplugin(elem, config, _self){  // <-- passing in _self
        this.config = $.extend( {}, $.fn.niftyplugin.config, config );
        this.elem = elem;
        this.$elem = $( elem );
        _self.config = this.config; // <-- _self
    }
 }

Niftyplugin.prototype = {
   // all the methods, and subsequently in some methods I'd have to use
   // var that = this. In situations of scope. I want to not do this and 
   // make my plugin self-contained with no global vars. But I want to circumvent 
   // need to assign "this" to vars etc..
}

$.fn.niftyplugin = function( config ) {
    if(this.length){
        this.each(function() {
            var nifty = new Niftyplugin( this, config, {} ); // <-- passing in obj
        }
    }
} 
```

我希望我很清楚。

**编辑：** 为了更清楚。

可以说，在我的方法实例中......我有类似的东西：

```
Niftyplugin.prototype = {
     _create : function(){
         $(someobj).each(function(){
             self.someVar <------ this gives me an error. "self" is undefined.
          })
     }
} 
```

这是我的问题。即使我在构造函数中声明了“var self”，它也不会继承到原型方法中。这让我感到困惑。现在，如果我将“var self”声明为全局变量，然后在构造函数中将其分配给它，就可以了。但是，我不想弄乱全局空间（即使它位于匿名函数中）。

现在，如果我做类似的事情

```
Niftyplugin.prototype = {
     _create : function(){
         var self = this;
         $(someobj).each(function(){
             self.someVar <------ this works
          })
     }
} 
```

但我想规避总是必须在每个原型方法中做一个 var self = this 。因此，我需要一个可以在构造函数中声明或传入等的“this”等价变量……我可以使用它。如果我有使用插件的各种元素，则该 var 不会发生冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:41:03.977

你还没有描述你真正想要解决的问题，我怀疑如果我们理解了这一点，我们可以提出比你在这里试图强迫的更优雅的解决方法。

jQuery 方法是 jQuery 对象的方法。因此，当它被调用时，它已`this`设置为当前正在操作的 jQuery 对象。这就是 jQuery 方法的设计方式和工作方式。您要么希望您的方法成为像这样工作的 jQuery 方法，要么不这样做。

如果您只是希望您的 jQuery 方法能够访问某些全局状态，那么您可以这样做：

```
(function() {

    // Set up protected global state for my plugin method
    // This data is available only inside this closure.
    // It is global in nature, but is not actually available in the global scope.
    var myData = {};
    myData.whatever = "foo";
    myData.whomever = "joe";

    // define the new jQuery method
    $.fn.niftyplugin = function( config ) {
        // you can access myData state here
        if(this.length){
            this.each(function() {
                // whatever code you need here
            }
        }
    }

})(); 
```

这将创建一个闭包，该闭包中的一些变量仅适用于您的插件方法。

除了某些全局状态的定义之外，您还没有描述您可能实际尝试解决的其他问题。请根据真正的问题来描述事情，而不是您试图伪造的 javascript 解决方案，因为您当前对解决方案的尝试看起来过于复杂或方向错误，或者至少问题解释得不够好，让我们知道建议什么.

* * *

另一方面，如果您想要的是每个实例数据，这些数据对于调用插件方法的每个 jQuery 对象都是独立的，那么您可以这样做：

```
(function() {

    // Set up protected global state for my plugin method
    // This data is available only inside this closure.
    // It is global in nature, but is not actually available in the global scope.
    var myData = {};

    // define the new jQuery method
    $.fn.niftyplugin = function( config ) {
       // set instance data on the jQuery object itself
       this.whatever = "foo";
       this.whomever = "joe";
       var self = this;

        if(this.length){
            this.each(function() {
                // inside this callback function, this is a DOM element
                // self is the jQuery obect
                // whatever code you need here
                // you can access self.whatever or self.whomever
                // to get access to instance data on this jQuery object
            }
        }
    }

})(); 
```

* * *

或者，如果您在插件方法的持续时间内只需要一些数据，您可以像这样使用局部变量：

```
(function() {

    // Set up protected global state for my plugin method
    // This data is available only inside this closure.
    // It is global in nature, but is not actually available in the global scope.
    var myData = {};

    // define the new jQuery method
    $.fn.niftyplugin = function( config ) {
       // set instance data on the jQuery object itself
       var whatever = "foo";
       var whomever = "joe";

        if(this.length){
            this.each(function() {
                // inside this callback function, this is a DOM element
                // whatever code you need here
                // you can access whatever or whomever
                // to get access to local variables during this method call
            }
        }
    }

})(); 
```

* * *

由于您在问题中添加了更多内容，因此这里有更多信息。如果您有这种类型的构造：

```
Niftyplugin.prototype = {
     _create : function(){
         var self = this;
         $(someobj).each(function(){
             self.someVar <------ this works
          })
     }
} 
```

并且您想访问`each()`回调中的对象实例，那么最好的办法就是将 保存`this`到单独的局部变量中，例如`self`. `this`在回调中被重新分配给其他东西，`.each()`所以如果你想访问原始的`this`，那么你必须将它保存在其他地方。如果您想在没有全局变量的情况下干净地执行此操作（这是建议），那么您必须在回调函数范围内的局部变量中执行此操作。在您在此处提供的代码片段中，您唯一的选择就是添加`var self = this`到每个方法中。

* * *

可以使用共享相同的不同结构`self`。

```
function Niftyplugin() {
    var self = this;

    this._create = function() {
        $(someobj).each(function(){
            self.someVar <------ this works
        })
    }

    this._update = function() {
        this.each(function(){
            self.someVar <------ this works
        })
    }
} 
```

# php - 'where 子句'，'ActiveRecord\DatabaseException' 中的未知列 'blogcats.id'

> ID：15699718
> 
> 赞同：0
> 
> 时间：2013-03-29T08:19:18.973
> 
> 标签：php, mysql, codeigniter, phpactiverecord

我正在尝试通过 Blogrefs 将博客表引用到 Blogcats 表。当我尝试按特定类别 id 检索博客时，它返回以下错误。

```
Fatal error: Uncaught exception 'ActiveRecord\DatabaseException' with message '42S22, 1054, Unknown column 'blogcats.id' in 'where clause'' in D:\Project Files\cms\application\libraries\php-activerecord\lib\Connection.php on line 312
( ! ) ActiveRecord\DatabaseException: 42S22, 1054, Unknown column 'blogcats.id' in 'where clause' in D:\Project Files\cms\application\libraries\php-activerecord\lib\Connection.php on line 312 
```

你会注意到它返回一个未知的列错误。

这是我的代码。

```
$joins  = 'LEFT JOIN blogrefs ON(blogs.id = blogrefs.blog_id) LEFT JOIN blogcats ON(blogrefs.blogcat_id = blogcats.id)';

$conditions = array("(blogcats.id = ? OR blogcats.parent_id = ?) AND blogs.status $st= ? OR (blogs.title LIKE '%$keyword%' OR blogs.content LIKE'%$keyword%')",$category,$category,$status);

$result = Blog::find('all',array(
    'joins'         => $joins,
    'conditions'    => $conditions,
    'group'         => 'blogs.id'
)); 
```

# javascript - Google Chart API JavaScript 使用函数更改最大 hAxis 值

> ID：15699723
> 
> 赞同：1
> 
> 时间：2013-03-29T08:19:33.587
> 
> 标签：javascript, google-visualization

我想知道，一旦加载图表，有没有办法使用函数更改水平最大窗口值（日期范围）而不必再次调用 drawChart 函数？

例如：

```
function changeWindow(){
    chart.setOptions(hAxis.viewWindow.max = 2);
} 
```

原始代码：

```
var chart;
function drawChart() {
   var data = google.visualization.arrayToDataTable([
      ['Year', 'Sales', 'Expenses'],
      ['2004',  1000,      400],
      ['2005',  1170,      460],
      ['2006',  660,       1120],
      ['2007',  1030,      540]
    ]);

    var options = {
      title: 'Company Performance',
      hAxis: {title: 'Year',  titleTextStyle: {color: 'red'}}
    };

    chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:08:51.037

当您绘制图表时，Google Visualization 将在`<div>`您拥有的目标中填充三个不同的元素。从[Google Playground 获取 Line Chart](http://code.google.com/apis/ajax/playground/?type=visualization#line_chart)的示例，这是它生成的代码：

```
<div style="position: relative; width: 500px; height: 400px;" dir="ltr">
<div style="position: absolute; left: 0px; top: 0px; width: 100%; height: 100%;">
<svg width="500" height="400" style="overflow: hidden;">
<defs id="defs">
<clipPath id="_ABSTRACT_RENDERER_ID_0">
<rect x="96" y="77" width="309" height="247">
</clipPath>
</defs>
<rect x="0" y="0" width="500" height="400" stroke="none" stroke-width="0" fill="#ffffff">
<g>
<rect x="417" y="77" width="71" height="50" stroke="none" stroke-width="0" fill-opacity="0" fill="#ffffff">
<g>
<rect x="417" y="77" width="71" height="12" stroke="none" stroke-width="0" fill-opacity="0" fill="#ffffff">
<g>
<text text-anchor="start" x="434" y="87.2" font-family="Arial" font-size="12" stroke="none" stroke-width="0" fill="#222222">Cats</text>
</g>
<rect x="417" y="77" width="12" height="12" stroke="none" stroke-width="0" fill="#3366cc">
</g>
<g>
<rect x="417" y="96" width="71" height="12" stroke="none" stroke-width="0" fill-opacity="0" fill="#ffffff">
<g>
<text text-anchor="start" x="434" y="106.2" font-family="Arial" font-size="12" stroke="none" stroke-width="0" fill="#222222">Blanket 1</text>
</g>
<rect x="417" y="96" width="12" height="12" stroke="none" stroke-width="0" fill="#dc3912">
</g>
<g>
<rect x="417" y="115" width="71" height="12" stroke="none" stroke-width="0" fill-opacity="0" fill="#ffffff">
<g>
<text text-anchor="start" x="434" y="125.2" font-family="Arial" font-size="12" stroke="none" stroke-width="0" fill="#222222">Blanket 2</text>
</g>
<rect x="417" y="115" width="12" height="12" stroke="none" stroke-width="0" fill="#ff9900">
</g>
</g>
<g>
<rect x="96" y="77" width="309" height="247" stroke="none" stroke-width="0" fill-opacity="0" fill="#ffffff">
<g clip-path="url(#_ABSTRACT_RENDERER_ID_0)">
<g>
<rect x="96" y="323" width="309" height="1" stroke="none" stroke-width="0" fill="#cccccc">
<rect x="96" y="262" width="309" height="1" stroke="none" stroke-width="0" fill="#cccccc">
<rect x="96" y="200" width="309" height="1" stroke="none" stroke-width="0" fill="#cccccc">
<rect x="96" y="139" width="309" height="1" stroke="none" stroke-width="0" fill="#cccccc">
<rect x="96" y="77" width="309" height="1" stroke="none" stroke-width="0" fill="#cccccc">
</g>
<g>
<rect x="96" y="323" width="309" height="1" stroke="none" stroke-width="0" fill="#333333">
</g>
<g>
</g>
<g>
<g>
</g>
<g>
</svg>
</div>
</div> 
```

为了更改图表的大小，您必须调整两个内部 div、SVG 本身的大小以及该图表中每个元素的 X/Y 坐标。您可以使用 Javascript 执行此操作，但再次调用会容易得多`draw()`。

# entity-framework - 更新多对多 EF

> ID：15699727
> 
> 赞同：1
> 
> 时间：2013-03-29T08:19:49.520
> 
> 标签：entity-framework, record

我创建了一个函数来更新数据库中的记录，如下所示：

```
 Users (UserId, Name)
    UsersRoles (UserId, RoleId)
    Roles (RoleId, Name) 
```

我将 parameter_user 和 parameter_role 传递给函数。如果它们在各自的表中，则更新数据。但是，它不会更新数据，而是每次都放入它们。

因此，如果表 UsersRoles 如下所示：

```
10 25
10 23
10 28
11 25
11 32 
```

我想将第 10 23 行更新为 10 27，它添加了一条记录 10 27，但它留下了 10 23。我猜你不能改变，因为它是一个双 FK。但是如何删除旧记录 10 23？

功能是这样的：

```
 var user = (from r in context.Users where r.UserId.Equals(parameter_user) select r).FirstOrDefault();
         Roles role;
         if (parameter_role > 0)
         {
           role = (from r in context.Roles where r.RoleId.Equals(parameter_role) select r).FirstOrDefault();
           if (role == null) return false;
             if (user != null)
             {
               role.Users.Add(user);
             }
               role.Name = "Paul";
            } 
```

非常感谢再见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:31:59.933

您想将角色 27 添加到用户 10 并从用户 10 中删除角色 23。您必须完全执行这两个步骤来“更新”`UserRoles`表（它实际上是后续的 INSERT 和 DELETE）。

它看起来像这样：

```
if (parameter_role > 0)
{
    var user = (from r in context.Users.Include("Roles") // include the roles
                where r.UserId.Equals(10) // parameter_user
                select r).FirstOrDefault();

    if (user != null)
    {
        Roles oldRole = (from r in user.Roles
                         where r.RoleId.Equals(23)
                         select r).FirstOrDefault();
        if (oldRole != null)
            user.Roles.Remove(oldRole);

        Roles newRole = (from r in context.Roles
                         where r.RoleId.Equals(27) // parameter_role
                         select r).FirstOrDefault();
        if (newRole != null)
            user.Roles.Add(newRole);

        user.Name = "Paul";
    }
} 
```

如果要删除*所有*旧角色并仅添加新角色 27 只需使用`user.Roles.Clear()`而不是`...Remove(oldRole)`：

```
 //...
    if (user != null)
    {
        user.Roles.Clear();

        Roles newRole = ... // etc.
        //...
    } 
```

# php - Extension manager is not working in typo3 version 6.0

> ID：15699732
> 
> 赞同：1
> 
> 时间：2013-03-29T08:20:14.427
> 
> 标签：php, content-management-system, typo3

i am on the latest version of typo3 (version 6.0) , In that all working fine except the typo3 extension manager , when i take the extension manager from the admin panel all i got the message is `"The connection was reset"` as we get the message like when there is no internet connection , So is there need the internet connection to work the extension manager ?? I didnt search for any new extensions from the repository , But it should load the base page of the extension manager that contains all the default extensions used in typo3 right ?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-05T08:15:18.880

原因可能是 xampp 的默认堆栈大小太小，导致堆栈溢出和连接重置。

您可以尝试将“ThreadStackSize 8388608”添加到您的 httpd.conf 吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-17T20:56:42.833

只是为了帮助一点，我会帮助翻译答案（是西班牙语，以防有人想知道）

非常感谢您的解决方案，它在 Xampp 上对我有用！，现在我可以使用typo3 扩展管理器，您也应该考虑以下步骤：注意：要能够使用扩展管理器，必须激活选项 [curlUse ] 从菜单“Tools--> All configuration”中，将再次需要在typo3安装期间配置的密码。此外，您需要在系统中安装 curl php 库，在 Debian/Ubuntu 上

# perl - 如何使用 sed 从多个文件中删除列？

> ID：15699735
> 
> 赞同：0
> 
> 时间：2013-03-29T08:20:33.590
> 
> 标签：perl, sed

如何使用 sed 从多个文件中删除列？

输入

```
1    2.1    3.3   4.2    5.1 
```

输出

```
3.3   4.2    5.1 
```

如果输出对齐就好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:25:37.153

一种方式（输出以制表符分隔）：

```
perl -lane'print join "\t",@F[2..$#F]' file 
```

对于右对齐输出：

```
perl -lane'printf "%10s",$_ for @F[2..$#F];print "";' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:27:44.520

使用 sed 删除前两列：

```
sed 's/^[ \t]*[0-9.]*[ \t]*[0-9.]*[ \t]*//' input1 input2 
```

`[ \t]*[0-9.]*`如果要删除更多列，可以增加 s 的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T08:40:02.000

awk 可以做同样的事情，允许您轻松切换列并在需要时更改输入和输出中的分隔符：

```
awk '{print $3,$4,$5}' test
3.3 4.2 5.1 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T09:39:10.177

```
awk '{$1=$2="";gsub("^  ","",$0);}1' your_file 
```

或者

```
perl -lane 'print "@F[2..scalar(@F)]"' your_file 
```

# attributes - Magento get product attribute through product id in list.phtml

> ID：15699736
> 
> 赞同：0
> 
> 时间：2013-03-29T08:20:43.277
> 
> 标签：attributes, magento-1.7

Hello all i need to get all frontend attributes from particular product id how to do this please give me some idea. I think i am quite clear on this. I just need to get product attributes from product id in list.phtml . product attributes with its values on list.phtml please suggest how to do this. Thanks in advance

# ruby-on-rails - Postgres Double Quotes No Escape

> ID：15699738
> 
> 赞同：0
> 
> 时间：2013-03-29T08:20:47.157
> 
> 标签：ruby-on-rails, string, postgresql, full-text-search

I have this model

```
class Post < ActiveRecord::Base
  attr_accessible :content, :title, :user_id

  belongs_to :user

  def self.text_search(query)
    if query.present?
      rank = <<-RANK
        ts_rank(to_tsvector(title), plainto_tsquery(#{sanitize(query)})) +
        ts_rank(to_tsvector(content), plainto_tsquery(#{sanitize(query)}))
      RANK
      where("to_tsvector('english', title) @@ :q or
        to_tsvector('english', content) @@ :q", q: sanitize(query)).order("#{rank} desc")
    else
      scoped
    end 
  end 

end 
```

and I have this method call

```
Post.text_search("Where is the safest place") 
```

Question: why is it that it that the query does not escape the double quotes when being called in SQL? As shown here:

```
 Post Load (2.4ms)  SELECT "posts".* FROM "posts" WHERE (to_tsvector('english', title) @@ '''Where is the safest place''' or
 to_tsvector('english', content) @@ '''Where is the safest place''') ORDER BY ts_rank(to_tsvector(title), plainto_tsquery('Where is the safest place')) +
 ts_rank(to_tsvector(content), plainto_tsquery('Where is the safest place')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:13:15.947

刚刚将 ":q" 绑定包装在 "plainto_tsquery()" 中

```
where("to_tsvector('english', title) @@ :q or
        to_tsvector('english', content) @@ plainto_tsquery(:q)", q: query).order("#{rank} desc") 
```

# c# - Unable to read Beyond the end of Stream

> ID：15699743
> 
> 赞同：1
> 
> 时间：2013-03-29T08:21:38.640
> 
> 标签：c#, filestream, binaryreader

I found a link: [http://code.cheesydesign.com/?p=572](http://code.cheesydesign.com/?p=572) about reading PE Files. I am using this code but unfortunately, I get an error on ntHeadersSignature (on `reader.ReadUint32`). It says that it's unable to read beyond the stream. I wonder why and how to fix this error since I tried with peekchar and read it with readint32, converting it to uint doesn't work. Thank you for your sincere help!

```
public PeHeaderReader(string filePath)
{
    // Read in the DLL or EXE and get the timestamp
    using (FileStream stream = new FileStream(filePath, System.IO.FileMode.Open, System.IO.FileAccess.Read))
    {
        BinaryReader reader = new BinaryReader(stream);
        dosHeader = FromBinaryReader<IMAGE_DOS_HEADER>(reader);

        // Add 4 bytes to the offset
        stream.Seek(dosHeader.e_lfanew, SeekOrigin.Begin);

        UInt32 ntHeadersSignature = reader.ReadUInt32(); //HERE IS THE ERROR
        fileHeader = FromBinaryReader<IMAGE_FILE_HEADER>(reader);

        if (this.Is32BitHeader)
        {
            optionalHeader32 = FromBinaryReader<IMAGE_OPTIONAL_HEADER32>(reader);
        }
        else
        {
            optionalHeader64 = FromBinaryReader<IMAGE_OPTIONAL_HEADER64>(reader);
        }

        imageSectionHeaders = new IMAGE_SECTION_HEADER[fileHeader.NumberOfSections];

        for(int headerNo = 0; headerNo < imageSectionHeaders.Length; ++headerNo)
        {
            imageSectionHeaders[headerNo] = FromBinaryReader<IMAGE_SECTION_HEADER>(reader);
        }
    }
} 
```

# ios - How to get src image and text from html string?

> ID：15699749
> 
> 赞同：2
> 
> 时间：2013-03-29T08:22:23.890
> 
> 标签：ios, objective-c

How get src image and text (*underline*) from html string ?

src and style are fixed.

<div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even"><div> **src="http://and_Snorkel_Club.jpg"** **style**="width: 300px; height: 225px; float: right; margin: 10px;" **During spring break, the Mount Olive College SCUBA/Snorkel Club traveled to Crystal River, Florida to expand their knowledge on aquatic life and to obtain their Open Water certification**.</div></div></div></div>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:45:45.077

如果您想从`HTML`内容中获取特定价值，您需要使用[Hpple](https://github.com/topfunky/hpple)**解析** 内容。这是[带有示例的文档](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios)。（*在本文档中，您将找到如何获取****src***）`HTML`

 ****在您的情况下，您使用：（***通过使用 Hpple* **）**

```
TFHpple *dataParser = [TFHpple hppleWithHTMLData:placesData];

NSString *XpathQueryString = @"//div[@class='field-item even']/div/";
NSArray *listOfdata= [dataParser searchWithXPathQuery: XpathQueryString]; 
```

我的代码将对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:13:21.880

```
NSString *htmlString = @"<div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even"><div> src="http://and_Snorkel_Club.jpg" *style*="width: 300px; height: 225px; float: right; margin: 10px;" During spring break, the Mount Olive College SCUBA/Snorkel Club traveled to Crystal River, Florida to expand their knowledge on aquatic life and to obtain their Open Water certification.</div></div></div></div>";

NSMutableString *imagLink = [[NSMutableString alloc] init];
NSScanner *scanner = [[NSScanner alloc] initWithString:htmlString];

[scanner scanUpToString:@"http://" intoString:nil];
[scanner scanUpToString:@""" *style" intoString:imgLink];

NSLog(@"%@", imgLink); 
```

同样，您可以应用此方法来获取 HTML 字符串的其他文本。否则，您可以使用 iPatel 显示的方式。**

# ruby - 捆绑安装失败

> ID：15699750
> 
> 赞同：0
> 
> 时间：2013-03-29T08:22:26.017
> 
> 标签：ruby, rvm, bundler

在我的 rails 项目中运行 bundle install 时出现错误。

```
sahil@debian:~/workspace/blog$ bundle install
/usr/bin/env: ruby: No such file or directory 
```

红宝石

```
sahil@debian:~/workspace/blog$ ruby -v
ruby 2.0.0p0 (2013-02-24 revision 39474) [x86__64-linux]

sahil@debian:~/workspace/blog$ which ruby
/home/sahil/.rvm/bin/ruby 
```

通过 rvm 安装 ruby​​ 时收到以下错误。

```
Error running 'env GEM_PATH=/home/sahil/.rvm/gems/ruby-2.0.0-p0:/home/sahil/.rvm/gems/ruby-2.0.0-p0@global:/home/sahil/.rvm/gems/ruby-2.0.0-p0:/home/sahil/.rvm/gems/ruby-2.0.0-p0@global GEM_HOME=/home/sahil/.rvm/gems/ruby-2.0.0-p0 /home/sahil/.rvm/rubies/ruby-2.0.0-p0/bin/ruby -d /home/sahil/.rvm/src/rubygems-2.0.3/setup.rb --verbose',
please read /home/sahil/.rvm/log/ruby-2.0.0-p0/rubygems.install.log 
```

rvm 环境

```
sahil@debian:~$ gem env
RubyGems Environment:
- RUBYGEMS VERSION: 2.0.3
- RUBY VERSION: 2.0.0 (2013-02-24 patchlevel 0) [x86_64-linux]
- INSTALLATION DIRECTORY: /home/sahil/.rvm/gems/ruby-2.0.0-p0
- RUBY EXECUTABLE: /home/sahil/.rvm/rubies/ruby-2.0.0-p0/bin/ruby
- EXECUTABLE DIRECTORY: /home/sahil/.rvm/gems/ruby-2.0.0-p0/bin
- RUBYGEMS PLATFORMS:
- ruby
- x86_64-linux
- GEM PATHS:
 - /home/sahil/.rvm/gems/ruby-2.0.0-p0
 - /home/sahil/.rvm/gems/ruby-2.0.0-p0@global
- GEM CONFIGURATION:
 - :update_sources => true
 - :verbose => t 
```

rvm env 看起来不错。不知道我错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:22:41.297

请遵循使用 RVM 的基本步骤（从[https://stackoverflow.com/a/15570121/497756](https://stackoverflow.com/a/15570121/497756)复制）：

```
rvm install 2.0.0
rvm use 2.0.0 --default # The default arg is needed only first time
gem install bundler
bundle install 
```

还有另一个显示更多细节的答案：[https ://stackoverflow.com/a/10591301/497756](https://stackoverflow.com/a/10591301/497756)

# c# - 如何访问 DataList 中的无界项

> ID：15699752
> 
> 赞同：1
> 
> 时间：2013-03-29T08:22:35.813
> 
> 标签：c#, asp.net, datalist

我正在使用一个`DataList`. `ItemTemplate`是有界的。我添加了一个`HeaderTemplate`, 并将其放在一个表中，该表需要包含我在每个 FormLoad 中添加的动态标签。我不希望标题有界。

我正在尝试访问此表，但它显示此表不存在或无法访问。

```
if (this.TableCategories.Rows.Count == 0 || 
    this.TableCategories.Rows[this.TableCategories.Rows.Count - 1].Cells.Count == 5)
{
    TableRow newRow = new TableRow();
    this.TableCategories.Rows.Add(newRow);
}

<asp:DataList ID="DataListProducts" runat="server" RepeatDirection="Horizontal" 
  OnItemCommand="DataListProducts_ItemCommand" Height="200px" Width="100%" 
  BackColor="White" BorderColor="#999999" BorderStyle="None" BorderWidth="1px" 
  CellPadding="0" GridLines="Vertical" RepeatColumns="6">

    <HeaderTemplate>
        <asp:Table ID="TableCategories" runat="server" BorderColor="Black"  
          CssClass="floatRight" BorderStyle="Inset" BorderWidth="2px" GridLines="Both">
        </asp:Table>
    </HeaderTemplate> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:03:13.693

您的 DataList 封装了它的所有控件。他们在页面级别不知道。

假设所有控件将始终存在，您可以尝试：

```
var myTable = (Table)DataListProducts
             .Controls[0]
             .FindControl("TableCategories"); 
```

# javascript - How to trigger contenteditable mousedown event?

> ID：15699754
> 
> 赞同：2
> 
> 时间：2013-03-29T08:22:38.970
> 
> 标签：javascript, events, javascript-events, jquery

I have a somewhat odd setup wherein a table cell is made contenteditable=true with a div placed over it to add some border effects without changing the dimensions of any of the cells in the table. The issue I'm running into is that the div over top of the cell is blocking the mousedown call - I already have a handler bound to the div through jQuery (the cell as well, because the div only hovers over the selected cell).

Is it possible to trigger the mousedown event on the table cell while passing the event information (mouse position, event.data, etc) from the jQuery handler of the div (positioned over the center the cell with a 2px larger size in each direction - using the css "outline" property isn't an option here because some of the cells have different sized borders that throw it off)?

I'm not attempting to call a custom mousedown handler in this case for the contenteditable cell, but to get the mouse event to propagate to the contenteditable cell (for doing things like selection start/end changes).

Edit: I tried this via the follow and it still doesn't work to trigger any of the native contenteditable events (moving the selection cursor, setting focus within chrome [though in firefox it does set focus if you have already clicked the contenteditable div once before]):

```
var x = 10;
var y = 10;
var event = document.createEvent('MouseEvents');
event.initMouseEvent('mousedown', true, true, window, 1, element.offsetLeft + x, element.offsetY + y, x, y, false, false, false, false, 0, null);
element.dispatchEvent(event); 
```

Here is a fiddle demonstrating the issue:

[http://jsfiddle.net/CoryG/SgBy4/](http://jsfiddle.net/CoryG/SgBy4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:46:01.483

*理念一*

如果您放置在单元格上的 div 不是 DOM 中单元格的子级，则该事件不会传播到该单元格。

如果您想将事件从 div 传递到单元格，您可以尝试 jQuery 的 trigger 方法。

要在触发事件后关注输入字段，您可以添加以下内容：

```
// queued and invoked after currently pending event handlers are finished
setTimeout(function(){$('#inputID').focus();}, 0); 
```

演示：http: [//jsfiddle.net/louisbros/9JNPr/](http://jsfiddle.net/louisbros/9JNPr/)

* * *

*想法 2*

由于您需要在编辑过程中让 div 阻塞编辑区域，请尝试添加：

```
pointer-events: none; 
```

到你的 div 的 css。鼠标事件将被 div 完全忽略。

演示：http: [//jsfiddle.net/louisbros/9JNPr/4/](http://jsfiddle.net/louisbros/9JNPr/4/)

Caniuse：[http ://caniuse.com/pointer-events](http://caniuse.com/pointer-events)

# php - query with multiple tables

> ID：15699757
> 
> 赞同：0
> 
> 时间：2013-03-29T08:23:01.407
> 
> 标签：php, phpmyadmin, xampp, lamp

this query gives top 5 number of tweets, username and number of tweets thay have

```
 SELECT users.username, COUNT(tweet.content) as tweet _count
                       FROM tweets
                       INNER JOIN users 
                       ON tweets.userid=users.id
                       GROUP BY userid ORDER BY tweet_count DESC
                       LIMIT 5 
```

to explain further here are the tables involved

retweets table is composed of

```
id, tweet_id, userid, date_created 
```

tweets table is composed of

```
id, userid, content, date_created 
```

users table is composed of

```
id and username 
```

as you can see retweets use the content of the tweets table through tweet_id and user_id.

now the problem is i want a query that gives top 5 number of retweets, username and number of retweets thay have..

im kinda confused with joining several tables and i keep getting errors when i try. THANKS FOR YOUR HELP!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:26:28.950

```
SELECT users.username,count(retweet.id) as retweets 
                       FROM retweets
                       LEFT JOIN tweets
                       ON retweets.tweet_id=tweets.id
                       INNER JOIN Users 
                       ON retweets.userid=users.id
                       GROUP BY userid
                       LIMIT 5 
```

# java - Behaviour regarding db pool and connection.setReadOnly() method

> ID：15699758
> 
> 赞同：3
> 
> 时间：2013-03-29T08:23:10.303
> 
> 标签：java, hibernate, connection-pooling, database-replication, c3p0

I have Java application with Hibernate framework(no spring) connect to MySQL DB , manage connection pooling via c3p0

i try to configure my apllication to read from slave db and write to master db , i have following this link to some extend [Master/Slave load balance](http://www.dragishak.com/?p=307)

let's say if the application already got a session with connection in pool and it need to execute a read-only method , like this

```
public someReadOnlyMethod()
{
    Session session = (get session from current Thread)

            //set read-only so that it read from slave db
            session.connection().setReadOnly(true);

            (...connect to db to do something...)

            //set it back in case of this method is followed by write method so that it go to master db
            session.connection().setReadOnly(false);

} 
```

Is the pooling create a new connection to connect to db 2 times for read-only and write operation(if so,this will heavily impact performance) or it smart enough to swap the operation to already existing read-only and writable connection pool ?

thx for your advice.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:24:46.050

所以这与池无关；这一切都在mysql驱动程序中。c3p0 会将您对 setReadOnly 的调用（无论是真还是假）传递给底层连接，并且连接将相应地路由到主服务器或从服务器。

如果您不喜欢 Connections 默认的方式（可能默认情况下它们不是只读的），您可以在 c3p0 ConnectionCustomizer 的 onAcquire 方法中设置只读属性，并且使用设置的值（true 或 false）将变为c3p0 将连接重置为的默认值。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-19T00:06:49.450

tl; dr：每当您切换时，它都会重新使用现有连接`setReadOnly(true/false)`。

当您这样做时，JDBC 将连接到您的连接 URL 中列出的所有服务器`ReplicationDriver().connect(url)`。无论您切换多少次，这些连接都将保持打开状态以供重复使用`setReadOnly()`。

资料来源：我刚刚使用`com.mysql.jdbc.ReplicationDriver`.

# php - Undefined index javascript php error

> ID：15699775
> 
> 赞同：0
> 
> 时间：2013-03-29T08:24:27.133
> 
> 标签：php, javascript, calendar

I am trying to create a function where my php calendar can be updated. This set of code is supposed to send $_POST["showmonth"] and $_POST["showyear"] to the controller but apparently it isn't working, causing the undefined index error. To be honest I am a total newbie in javascript and was just follow a tutorial on youtube. There are 2 similar functions for next and last month which are activated by the onClick trigger.Does anyone have any suggestion as to what the problem may be?

I am getting the error on line 9 and 10 of my php file,which where i announced

```
$showmonth = $_POST['showmonth']; and $showyear = $_POST['showyear']; 
```

Notice: Undefined index: showmonth in /home/jharvard/vhosts/localhost/html/calendar_start.php on line 9

```
 <script language="JavaScript" type="text/javascript">
function intialCalendar(){
// Create our XMLHttpRequest object
var hr = new XMLHttpRequest();
// Create some variables we need to send to our PHP file
var url = "calendar_start.php";
var currentTime = new Date();
var month = currentTime.getMonth()+1; 
var year = currentTime.getFullYear();
showmonth = month;
showyear = year;
var vars = "showmonth="+showmonth+"&showyear="+showyear;
hr.open("POST",url, true);
// Set content type header information for sending url encoded variables in the request
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
// Access the onreadystatechange event for the XMLHttpRequest object
hr.onreadystatechange = function() {
(hr.readyState == 4 && hr.status == 200) {
var return_data = hr.responseText;
document.getElementById("showCalendar").innerHTML = return_data;
}
}
// Send the data to PHP now... and wait for response to update the status div
hr.send(vars); // Actually execute the request
document.getElementById("showCalendar").innerHTML = "processing...";
}
</script> 
```

This is my html file

```
<!DOCTYPE html>

<html>

    <head>

        <link href="css/bootstrap.css" rel="stylesheet"/>
        <link href="css/bootstrap-responsive.css" rel="stylesheet"/>
        <link href="css/styles.css" rel="stylesheet"/>
        <link href="css/calcss.css" rel="stylesheet" type= "text/css" media = "all"/>
        <?php if (isset($title)): ?>
            <title>Calendar: <?= htmlspecialchars($title) ?></title>
        <?php else: ?>
            <title>Calendar</title>
        <?php endif ?>

        <script src="js/jquery-1.8.2.js"></script>
        <script src="js/bootstrap.js"></script>
        <script src="js/scripts.js"></script>
       <script src="js/calendar_functions.js"></script>

    </head>

    <body onload="initialCalendar();">

        <div class="container-fluid">

            <div id="top">
                <a href="calendar_start.php"><img alt="Calendar" src="img/square.png"/></a>
            </div>

            <div id="middle">

             <div id="showCalendar"></div> 
```

This is my php file

```
<?php

   // configuration
    require("../includes/config.php"); 
     require("../templates/show_calendar.php");

$showmonth = $_POST['showmonth'];
$showyear = $_POST['showyear'];
$showmonth = preg_replace('#[^0-9]#i', '', $showmonth);
$showyear = preg_replace('#[^0-9]#i', '', $showyear);

$day_count = cal_days_in_month(CAL_GREGORIAN, $showmonth,$showyear);
$pre_days = date('w', mktime(0, 0, 0, $showmonth, 1, $showyear));
$post_days = (6-(date(mktime(0, 0, 0, $showmonth, $day_count, $showyear))));

echo '<div id="calendar_wrap">';
echo '<div class="previous_month"><input name="myBtn" type="submit" value="Previous Month" onclick="javascript:last_month();"></div>';
echo '<div class="next_month"><input name="myBtn" type="submit" value="Next Month" onclick="javascript:next_month();"></div>';
echo '<div class="title_bar">';
echo '<div class="showmonth">' . $showmonth . '/' . $showyear . '</div>';
echo '</div>';

echo '<div class="week_days">';
echo '<div class="days_of_week">Sun</div>';
echo '<div class="days_of_week">Mon</div>';
echo '<div class="days_of_week">Tue</div>';
echo '<div class="days_of_week">Wed</div>';
echo '<div class="days_of_week">Thur</div>';
echo '<div class="days_of_week">Fri</div>';
echo '<div class="days_of_week">Sat</div>';
echo '<div class="clear"></div>';
echo '</div>';

//previous month filler days
if($pre_days != 0)
{
    for($i=1; $i<=$pre_days; $i++)
    {
        echo '<div class="non_cal_day"></div>';
    }   
}

//current month
for($i=1; $i<=$day_count; $i++)
    {
        echo '<div class="cal_day">';
        echo '<div class="day_heading">'.$i.'</div>';
        echo '</div>';
    } 

//next month filler days
if($post_days != 0)
{
    for($i=1; $i<=$post_days; $i++)
    {
        echo '<div class="non_cal_day"></div>';

    }   
}
echo '</div>';

require("../templates/footer.php");

?> 
```

Another source of error I suspect may be the use of require() to link my HTML with the controller(calendar_start.php), because it was the only difference between what I did and what the tutorial video taught. The video was using dreamweaver while i was using gedit and without using require() I do not know how to link the php file to the html file.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:52:53.797

**替换**

```
showmonth = month;
showyear = year; 
```

**和**

```
var showmonth = month;
var showyear = year; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:34:28.253

地方

`hr.send(vars); // Actually execute the request` 紧接着 `hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");`

方法

```
hr.open("POST",url, true);
// Set content type header information for sending url encoded variables in the request
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
// Access the onreadystatechange event for the XMLHttpRequest object
// Send the data to PHP now... and wait for response to update the status div
hr.send(vars); // Actually execute the request

hr.onreadystatechange = function() {
(hr.readyState == 4 && hr.status == 200) {
var return_data = hr.responseText;
document.getElementById("showCalendar").innerHTML = return_data;
}
}
document.getElementById("showCalendar").innerHTML = "processing...";
} 
```

# asp.net-mvc - mvc视图中的模型空引用异常

> ID：15699777
> 
> 赞同：7
> 
> 时间：2013-03-29T08:24:34.960
> 
> 标签：asp.net-mvc, asp.net-mvc-4

问题是在将数据从控制器传递到视图时出现空引用异常

我正在将模型从控制器传递给视图，如下所示：

```
 {
    ViewBag.PartId = id;
    var viewmodel= new Orderviewmodelnew();
    var order = new OrderMnagernew().GetSingleOrderField(id);
    viewmodel.ProjectId=order.ProjectId;
    return View(viewmodel);
 } 
```

在视图中我有这样的代码

```
 @model DreamTrade.Web.BL.ViewModels.OrderViewModelnew

 Home>Project @Model.ProjectID==null??//projected is of type guid

 Customer :@(Model.CreatedBy??string.empty)

 Project :@Model.ProjectID
     @Model.ProjectDetail

  CreatedBy:@Model.CreatedBy

  Creation Date:@Model.CreationDate

 CompletedBy :@Model.ModifiedBy
 Completion Date:@Model.LastModified

 @Model.Image

   @Html.Action("OrderIndex", "Ordernew", new { PartId = Guid.Parse("C0497A40-2ADE-4B23-BA9F-1694F087C3D0") }) 
```

我试过这样

```
@if(Model.ProjectId==Null)
 {/....} 
```

在控制器中，我尝试这样，如果模型为空，则不传递模型

```
 var order = new OrderMnagernew().GetSingleOrderField(id);
    if(order!=null)
   {
        viewmodel.ProjectId=order.ProjectId;
        return View(viewmodel);

   }
 return View() 
```

视图中的 projectid 的问题是显示异常。

如果它为空，我想显示空字符串并显示剩余部分..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T09:03:44.597

这段代码是错误的：

```
@Model.ProjectID==null??string.empty 
```

如果`ProjectID`是可空类型，你应该写：

```
@(Model.ProjectID ?? string.empty) 
```

**添加：**

代替：

```
return View() 
```

和：

```
return View(new Orderviewmodelnew()) 
```

because `null` object doesn't have any properties

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:29:52.437

通过放

```
@model DreamTrade.Web.DALNew.Source 
```

在您的视图顶部，您正在制作一个强类型视图，该视图需要该类型的模型。

但是，在您的控制器中，您正在传递一个类型的模型`Orderviewmodel`

您需要确保传递给视图的模型是正确的类型。

# asp.net - IPAD\IPHONE 上的 Asp.Net 桌面应用程序

> ID：15699779
> 
> 赞同：0
> 
> 时间：2013-03-29T08:24:37.790
> 
> 标签：asp.net, desktop-application

WPF 桌面应用程序可以在 IPAD\IPHONE 上运行吗？Silverlight 应用程序怎么样？

与 iOS 兼容的桌面应用程序的最佳 asp.net 技术是什么？至少在 iPad 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:43:35.587

*   ASP.NET 是一个运行在网络服务器上的网络应用程序平台，用于生成在网络浏览器中显示的网页。它用于运行网站。ASP.NET 与桌面或 iOS 应用程序完全无关。
*   WPF 是一个运行在 .NET Framework 之上的 UI 框架。WPF 与 Microsoft Windows 紧密相关。它不适用于任何其他平台。
*   Silverlight 是 WPF 的精简版 2D 版本，主要用于构建浏览器小程序，以及现在的 Windows Phone 7 应用程序。它正式用于面向 Windows、Windows Phone、OS X 和 Linux（使用 Moonlight）。它在 iOS 上不受支持，无论是在浏览器中还是作为开发应用程序的一种方式。
*   iOS 应用程序不是“桌面应用程序”——桌面应用程序意味着它以非独占、非全屏窗口的形式呈现给用户，并主要通过鼠标和键盘接受用户输入，而 iOS 应用程序运行全屏和接受触摸输入或来自虚拟键盘。
*   要为 iOS 开发，您必须使用 Apple 认可的语言和框架：官方名称是 C、C++ 或 Objective-C。（一般来说）不是游戏的应用程序必须（最终）使用 Cocoa Touch 作为其用户界面，以便与平台保持一致。允许使用 Cocoa Touch 周围的包装器，例如 Xamarin（以前称为 MonoTouch）。这也是为什么不允许使用 Flash（即使是浏览器外）的原因：因为您不能在 Flash 中使用 Cocoa Touch，这同样适用于 Silverlight）。

如果您想以 iOS 为目标并使用 C# 和 .NET Framework，那么可以使用 Xamarin 来完成，但是您仍然需要使用 iOS 的 UI 框架，除非您正在制作游戏并且使用 Unity 之类的东西。

# postgresql - pg_dump 输出包含重复项

> ID：15699781
> 
> 赞同：3
> 
> 时间：2013-03-29T08:24:54.323
> 
> 标签：postgresql, pg-dump

我在数据库上运行 pg_dump，并使用 pg_restore 恢复到一个新的、完全为空的数据库中，但出现错误：

```
pg_restore: [archiver (db)] could not execute query: ERROR:  could not create unique index "bibleverses_userversestatus_pkey"
DETAIL:  Table contains duplicated values. 
```

检查恢复后的表会显示重复的主键值，这会阻止创建索引。

然而，检查 pg_dump 来自的原始数据库并没有显示这个重复的行 - 一切都是它应该的（并且必须是，因为约束）。

这怎么会发生，如何解决？

（这是一个持续性错误，而不是一个错误 - 再次运行 pg_dump 并不能修复它）。

编辑：抱歉，完全忘记了版本信息：pg_dump/postgres 8.3.11，pg_restore 9.1.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T07:38:26.057

首先要弄清楚这一点，您将不得不花一些时间处理转储文件并找出发生了什么。我的直接猜测是，也许两个备份正在连接在一起。但这里有一些事情要看：

1.  给定表的 COPY 或 INSERT 语句是否多次出现？

2.  你能证明数据在给定的 COPY 或 INSERT 运行中被复制了吗？

3.  你可以用 --inserts 和没有那个来复制它吗？

如果您可以证明它不是由将备份连接在一起引起的，那么我建议此时执行两个步骤：

1.  将PostgreSQL升级到最新的9.1，再次测试，如果仍然出现

2.  写一个详细的案例并跟进 pgsql-bugs 电子邮件列表。

我敢打赌它就像将备份连接在一起一样，但我不能根据斯巴达式的结论排除可能存在错误的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-16T06:19:55.960

**在 psql 还原期间必须撤销与该数据库的所有会话，否则将产生重复条目问题**

从特定数据库撤消会话的命令：

```
SELECT pg_terminate_backend(pid) FROM pg_stat_activity WHERE  pid <> pg_backend_pid() AND datname = 'db_name' ; 
```

# styles - Windows 8 手机中可重用和可缓存的 xaml 样式

> ID：15699785
> 
> 赞同：1
> 
> 时间：2013-03-29T08:25:37.027
> 
> 标签：styles, windows-phone-8

我是 windows phone 8 的新手，我想知道 windows 8 phone 中是否有任何可重复使用的样式 xaml 功能。例如，我创建了两个具有两个不同唯一键的样式 xaml 标签。那么我将如何将这些样式应用于仅一个元素（比如一个文本框）。

你能推荐一些最好的风格指南网站和书籍吗，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T19:03:00.920

首先，您可以在多个地方定义您的样式：

*   将在其中使用它的 xaml 文件 - 在父元素的 Resource 中。
*   App.xaml 文件 - 在 Application.Resources 元素中。
*   样式的专用 xaml 文件 - 然后可以使用**ResourceDictionary**和**ResourceDictionary.MergedDictionaries**元素在 App.xaml 中引用它。

无论您决定将样式放在哪里，它都需要位于**Resource**元素中。如果您希望您的样式是全局的，App.xaml 是一个不错的选择，例如

```
<Application.Resources>
    <Style x:Key="TextBoxStyle2" TargetType="TextBox">
        <Setter Property="Background" Value="CornflowerBlue" />
    </Style>
    ...
</Application.Resources> 
```

然后可以将此样式作为静态资源引用，如下所示：

```
<StackPanel Orientation="Vertical">
    <TextBox Text="Default Style" />
    <TextBox Text="Custom Style" Style="{StaticResource TextBoxStyle1}" />
</StackPanel> 
```

您可以非常喜欢您的样式并在它们自己的 xaml 文件中定义它们并在 App.xaml 中引用它们，如下所示：

```
<Application.Resources>
    <ResourceDictionary x:Key="Styles">
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Colors.xaml"/>
            <ResourceDictionary Source="Styles.xaml"/>
            ...
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

这可能是组织样式的一种非常有用的方法。

# delphi - 对象帕斯卡与德尔福？

> ID：15699788
> 
> 赞同：32
> 
> 时间：2013-03-29T08:25:52.923
> 
> 标签：delphi, pascal

Object Pascal 和 Delphi 有什么区别？它们是一样的吗？它们之间有什么区别和相似之处，哪个更有用？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-29T08:49:53.867

Object Pascal 是 Apple 开发的 Pascal 面向对象的扩展。Delphi 的第一个版本是从 Turbo Pascal 演变而来的。Turbo Pascal 中的面向对象特性被正确地认为不适合目的。因此，Borland 开发了 Delphi 1 并结合了 Apple Object Pascal 语言的大部分内容。所以 Delphi 产品的语言最初被命名为 Object Pascal。

Apple 停止了 Object Pascal 的开发，并且它从未像最初预期的那样标准化。对于 Delphi 6 的发布，Borland 选择将他们的语言重命名为 Delphi。

你问这个问题：

> Object Pascal 和 Delphi 有什么区别？

但这并没有太大意义，因为原始的 Object Pascal 不再以独特的形式存在。苹果放弃了它。唯一现存的广泛使用的类似 Object Pascal 的语言的实现是 Delphi 及其启发的语言：FreePascal、Oxygene、DWS 等。

所以更好的问题是“Delphi 和 FreePascal 有什么区别？” 如今，Object Pascal 被松散地用来指代这个相关语言家族。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-02T01:03:15.387

Object Pascal 是 Pascal 的扩展。Object Pascal 有许多方言，Delphi 就是其中之一。[这是关于帕斯卡历史的](http://www.remobjects.com/oxygene/language/history.aspx)相当完整的文章。它不包括 Free Pascal 或 DWS。Free Pascal 专注于成为 Delphi 的开源和跨平台克隆（我相信我已经冒犯了一些人。）

Object Pascal 的每种方言都添加了一些东西并实现了一些不同的东西。

所以Pascal是一个语言家族，Object Pascal是一个子家族，Delphi是Object Pascal的一个子家族。

[![帕斯卡的演变和影响](../Images/3660d728f7065f08fe821c532e2e0649.png)](http://www.remobjects.com/oxygene/language/history.aspx)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-29T10:36:01.763

如前所述，Object Pascal 源自从未被批准的 Apple 标准提案，并且仍然用于借用它的方言。主要是 Delphi 使用的所有方言。

据我所知，面向对象的 Turbo Pascal 版本也被称为 Object Pascal，尽管有时称为“Pascal with Objects”。我不知道 Turbo Pascal 对象的实现是否与 Apple 提案有关。从 Apple 借来的主要方面似乎是 Object 实例始终是隐式引用。

Borland 将语言称为*Delphi 语言*，因此 Object Pascal 的完全等价物是*Delphi 语言*而不是*Delphi*。

由于**Delphi 是许多国家的注册商标**，即使在 Borland 重新命名后，大多数兼容者仍将语言称为 Object Pascal。据 Borland 称，之所以进行更名，主要是因为“Pascal”在市场上过于等同于“旧”。有人说这是因为“Object Pascal”不能注册商标，所以重命名是一种反竞争措施。（我不是偏执狂，我不认为这是针对 FreePascal 的，这在当时并没有任何威胁，如果是真的，那可能是针对像 Pocketstudio 和 Gardens Point 这样的嵌入式初创公司）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-29T08:43:56.990

Borland 在 Delphi 的第一个版本中使用了 Object Pascal 这个名称作为编程语言，但后来将其重命名为 Delphi 编程语言。然而，声称与 Object Pascal 兼容的编译器往往试图与 Delphi 源代码兼容。因为 Delphi 是商标，兼容的编译器继续使用名称 Object Pascal。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-06T18:57:49.527

据我所知，Object Pascal 是 Delphi 背后的语言名称。Delphi 本身就是 IDE（集成开发环境）。从这个意义上说，您可以说 Object Pascal 对于 Delphi（和 Lazarus）就像 Objective C 对于 xCode 一样。此外，Delphi 也被称为 RAD（快速应用程序开发）IDE。我希望这有帮助。

# javascript - 动态切换 jQuery 移动列表视图的拆分按钮

> ID：15699796
> 
> 赞同：2
> 
> 时间：2013-03-29T08:26:54.080
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用 jquery mobile 构建一个移动应用程序。我正在使用 listview 控件，到目前为止它工作正常。但是我想显示一个拆分按钮（[http://view.jquerymobile.com/1.3.0/docs/widgets/listviews/#list-split](http://view.jquerymobile.com/1.3.0/docs/widgets/listviews/#list-split)），但仅在单击某个按钮时。用例是启用/禁用“删除模式”，以便在单击工具栏上的按钮后，删除图标才会出现在列表元素旁边。我有一个或多或少的工作解决方案，如下所示：

```
$('#editmode').live('click', function(e){
e.preventDefault();
$('.deletelog').toggle();
$('.deletelog:hidden').closest('li').removeClass("ui-li-has-alt");
$('.deletelog:visible').closest('li').addClass("ui-li-has-alt");
}); 
```

问题是，对于第一页加载，即使按钮默认隐藏：

```
<a href="#" class="deletelog" style="display:none">Delete</a> 
```

我仍然需要添加数据属性 data-split-icon 和 data-split-theme，这使得第一页加载看起来有点像，为按钮保留了空间。从上面的代码可以看出，这是因为“data-split-theme”类。因此，如果我切换它，那么它会在第二次切换时消失。

有没有更好的方法来实现这种切换拆分按钮？

谢谢！

![截图 1](../Images/dda4c9df33c8a97ce85c551a813c4b32.png) ![截图 2](../Images/8e2353e7f52383fe78e2f8b410144e91.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:05:14.293

您可以通过添加一个类并使用 jQuery 操作它来显示和隐藏拆分按钮。

以显示

```
$('.delete').css('display', 'compact'); 
```

隐藏

```
$('.delete').css('display', 'none'); 
```

看看这个小提琴[http://jsfiddle.net/mayooresan/2XxJx/](http://jsfiddle.net/mayooresan/2XxJx/)

## 更新

在这种情况下，您需要更新的 css`ui-li-aside`

```
$('.ui-li-aside ').css('margin-right', '50px'); 
```

检查这个现场小提琴[http://jsfiddle.net/mayooresan/2XxJx/3/](http://jsfiddle.net/mayooresan/2XxJx/3/)

# html - 悬停图像时显示弹出窗口

> ID：15699800
> 
> 赞同：0
> 
> 时间：2013-03-29T08:27:01.170
> 
> 标签：html, image, onmouseover

我想在用户悬停图像时显示一个弹出窗口。作为测试，我想显示字符串“测试”。使用此代码，它不会显示任何内容。

```
<td width='27' height='17' style='border:1px solid #99a1ba align:center'>
<img src='../images/mission_ampm.png' onMouseOver='test' onClick=\"window.open('availability.jsp? user="+person.getPersonID()+"&clickeddate="+dateFormat.format(today2.getTime())+"','_self')\" /></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:31:14.490

如果你只是想提醒一些东西，你必须这样写：

```
onmouseover="alert('test');" 
```

如果你想要一个“工具提示”，你可以使用`title`属性：

```
title="test" 
```

# c - 如何在 C 中添加或重新定义运算符？

> ID：15699802
> 
> 赞同：1
> 
> 时间：2013-03-29T08:27:25.923
> 
> 标签：c, c-preprocessor, operator-keyword, inequality, redefine

我调试了一个代码几个小时，最后发现它使用`!=`运算符，而我的眼睛扫描代码时将其读取为`=`. 多年前，我总是在*Pascal*`<>`中使用运算符。**现在我必须用C**编写和调试，以使代码可以被社区重用。所以我试图定义为以下命令：***`<>``!=`***

 ***```
#define <> !=
#define "<>" "!=" 
```

但它没有用。我试图在网上搜索，但只有我找到有关 C++ 或 C# 的结果，但我需要它用于**C**。是否有机会使用不等式运算符编写可重用的**C**代码？`<>`（我假设其他`normal`用户可以自动替换`<>`为`!=`，但代码也应该在其他系统上编译而无需修改，即使用`<>`）。我使用 Linux ( *gcc* )。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T08:30:39.457

C 没有运算符重载。时期。如果您需要该功能，请使用不同的编程语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:31:13.913

You can't overload operator in c.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T08:35:17.977

如前所述，C 中没有运算符重载（仅在 C++ 中引入）但是，您仍然可以选择在编译过程中自动生成文件并`<>`替换为。`!=`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T08:38:28.917

运算符字符不能用于*任何*对象的名称，即预处理器宏（在您的情况下）、变量名称、函数名称......
所以基本上，您不能做这样的事情。你可以看看我的评论，看看为什么这是一个坏主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T09:33:13.713

如果您构建程序并且您的 c 代码中包含以下行之一

```
#define <> !=
#define "<>" "!=" 
```

那么你会得到一个编译错误：

```
error: macro names must be identifiers 
```

这意味着您的宏的名称应该以字母开头，甚至在宏名称中使用一些特殊字符也是有限制的。

可能您可以为宏使用其他名称，例如：

```
#define NEQ != 
```

这是允许的***

# objective-c - 在后台打开套接字连接并允许不同的控制器从 Objective-C 中的流中读取和写入

> ID：15699805
> 
> 赞同：0
> 
> 时间：2013-03-29T08:27:47.197
> 
> 标签：objective-c, class, sockets, multitasking, nsstream

首先 - 我是 iOS 6 编程的新手。我试图在应用程序启动时打开与远程服务器的套接字连接，并在某个后台线程中运行它。我有一个类 - NetworkCommunication.h，和 3 个视图控制器，我希望它们能够读取和写入流。

编码：

网络通讯.h：

```
#import <Foundation/Foundation.h>

@interface NetworkCommunication : NSObject {
   NSInputStream* inputStream;
   NSOutputStream* outputStream;
}

@property(retain) NSInputStream *inputStream;
@property(retain) NSOutputStream *outputStream;

-(void) initNetworkCommunication;

@end 
```

网络通讯.m

```
#import "NetworkCommunication.h"

NSOutputStream *outputStream;
NSInputStream *inputStream;

@implementation NetworkCommunication

@synthesize outputStream;
@synthesize inputStream;

- (id) init {
    NSLog(@"Start!");
    [self initNetworkCommunication];
    return 0;
}

- (void)initNetworkCommunication {
    CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;
    CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"127.0.0.1", 7000, &readStream, &writeStream);

inputStream = (__bridge_transfer NSInputStream *)readStream;
outputStream = (__bridge_transfer NSOutputStream *)writeStream;
[inputStream setDelegate:self];
[outputStream setDelegate:self];
[inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode ];
[outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

[inputStream open];
[outputStream open];

[inputStream setProperty:NSStreamSocketSecurityLevelNegotiatedSSL
                  forKey:NSStreamSocketSecurityLevelKey];
[outputStream setProperty:NSStreamSocketSecurityLevelNegotiatedSSL
                   forKey:NSStreamSocketSecurityLevelKey];

NSDictionary *settings = [[NSDictionary alloc] initWithObjectsAndKeys:
                          [NSNumber numberWithBool:YES], kCFStreamSSLAllowsExpiredCertificates,
                          [NSNumber numberWithBool:YES], kCFStreamSSLAllowsAnyRoot,
                          [NSNumber numberWithBool:NO], kCFStreamSSLValidatesCertificateChain,
                          kCFNull,kCFStreamSSLPeerName,
                          nil];

CFReadStreamSetProperty((CFReadStreamRef)inputStream, kCFStreamPropertySSLSettings, (CFTypeRef)settings);
CFWriteStreamSetProperty((CFWriteStreamRef)outputStream, kCFStreamPropertySSLSettings, (CFTypeRef)settings);

//[outputStream setProperty:NSStreamSocketSecurityLevelTLSv1 forKey:NSStreamSocketSecurityLevelKey];

NSString *response  = @"HELLO from my iphone\n";
NSData *data = [[NSData alloc] initWithData:[response dataUsingEncoding:NSASCIIStringEncoding]];
[outputStream write:[data bytes] maxLength:[data length]];
}

@end 
```

我尝试在任何控制器或 main.m 中使用以下命令启动它： NetworkController *comm = [NetworkController new];

当它到达此代码时：

```
[inputStream open];
[outputStream open]; 
```

我得到“头 1：EXC_BAD_ACCESS（代码=1，地址=0x10917df0）”

我不知道如何使它工作。我想在应用程序启动时启动一个线程，并且能够写入 NSOutputStream 并从任何控制器读取 NSInputStream。可能吗？如果是这样，怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:40:38.933

我把你的代码和测试。当我`-(id) init`像你一样定义方法时，我遇到了同样的错误。但在这样改变之后：

NetworkCommunication的.h

```
 #import <Foundation/Foundation.h>

    @interface NetworkCommunication : NSObject<NSStreamDelegate>
    {
        NSInputStream* inputStream;
        NSOutputStream* outputStream;
        CFReadStreamRef readStream;
        CFWriteStreamRef writeStream;
    }
    @property(retain) NSInputStream *inputStream;
    @property(retain) NSOutputStream *outputStream;
-(id)init;
    @end 
```

NetworkCommunication的.m

```
#import "NetworkCommunication.h"

@implementation NetworkCommunication
@synthesize inputStream,outputStream;
-(id)init
{
    self=[super init];
    if (self) {
        NSLog(@"Start!");
        [self initNetworkCommunication];

    }
    return self;//you returned 0 but types not matched.
}
- (void)initNetworkCommunication {

    CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"127.0.0.1", 7000, &readStream, &writeStream);

    inputStream = (__bridge_transfer NSInputStream *)readStream;
    outputStream = (__bridge_transfer NSOutputStream *)writeStream;
    [inputStream setDelegate:self];
    [outputStream setDelegate:self];
    [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode ];
    [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

    [inputStream open];
    [outputStream open];

 //   [inputStream setProperty:NSStreamSocketSecurityLevelNegotiatedSSL
  //                    forKey:NSStreamSocketSecurityLevelKey];
  //  [outputStream setProperty:NSStreamSocketSecurityLevelNegotiatedSSL
  //                     forKey:NSStreamSocketSecurityLevelKey];

//    NSDictionary *settings = [[NSDictionary alloc] initWithObjectsAndKeys:
//                              [NSNumber numberWithBool:YES], kCFStreamSSLAllowsExpiredCertificates,
 //                             [NSNumber numberWithBool:YES], kCFStreamSSLAllowsAnyRoot,
  //                            [NSNumber numberWithBool:NO], //kCFStreamSSLValidatesCertificateChain,
     //                         kCFNull,kCFStreamSSLPeerName,
    //                          nil];

//    CFReadStreamSetProperty((CFReadStreamRef)inputStream, kCFStreamPropertySSLSettings, (CFTypeRef)settings);
//    CFWriteStreamSetProperty((CFWriteStreamRef)outputStream, kCFStreamPropertySSLSettings, (CFTypeRef)settings);

    //[outputStream setProperty:NSStreamSocketSecurityLevelTLSv1 forKey:NSStreamSocketSecurityLevelKey];

    NSString *response  = @"HELLO from my iphone\n";
    NSData *data = [[NSData alloc] initWithData:[response dataUsingEncoding:NSASCIIStringEncoding]];
    [outputStream write:[data bytes] maxLength:[data length]];
}
@end 
```

在我的视图控制器中，我像这样创建它

```
#import "ViewController.h"
#import "NetworkCommunication.h"
BOOL count;

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
        [super viewDidLoad];

    NetworkCommunication * nc=[[NetworkCommunication alloc] init];  
} 
```

处理事件和查看错误

```
- (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)event {
    NSLog(@"Stream triggered.");
    switch(event) {
            case NSStreamEventErrorOccurred:
        {

            NSLog(@"%@",[stream streamError].localizedDescription);

        }
            break;
        case NSStreamEventHasSpaceAvailable: {
            if(stream == outputStream) {
                NSLog(@"outputStream is ready.");
            }
            break;
        }
        case NSStreamEventHasBytesAvailable: {
            if(stream == inputStream) {
                NSLog(@"inputStream is ready.");
                uint8_t buf[1024];
                unsigned int len = 0;
                len = [inputStream read:buf maxLength:1024];
                if(len > 0) {
                    NSMutableData* data=[[NSMutableData alloc] initWithLength:0];
                    [data appendBytes: (const void *)buf length:len];
                    NSString *s = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
                    [self readIn:s];
                }
            }
            break;
        }
        default: {
            NSLog(@"Stream is sending an Event: %i", event);
            break;
        }
    }
}

- (void)readIn:(NSString *)s {
    NSLog(@"Reading in the following:");
    NSLog(@"%@", s);
}

- (void)writeOut:(NSString *)s {
    uint8_t *buf = (uint8_t *)[s UTF8String];
    [outputStream write:buf maxLength:strlen((char *)buf)];
    NSLog(@"Writing out the following:");
    NSLog(@"%@", s);
} 
```

当我尝试使用您的代码时。拒绝连接。所以我想问题出在你的IP地址上试试另一个。

# abap - gui_upload 在哪里上传文件？

> ID：15699808
> 
> 赞同：1
> 
> 时间：2013-03-29T08:27:54.680
> 
> 标签：abap

简单地说，gui_upload 函数在哪里上传 Application Server 中的文件。如何找到它们的位置，或者是否有任何 tcode 可以找到最后上传的文件或按名称搜索？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T09:07:43.503

`gui_upload`函数不会将文件上传到应用程序服务器。它只是从表示层读取一个文件到一个内部表中。然后，您将需要使用其他一些函数将此内部表写入应用程序服务器上的文件。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:43:34.660

我可以确认之前的两个答案。例如，如果您想将文本/csv 文件上传到应用程序服务器，您可以使用以下代码。

使用 GUI_UPLOAD 将提供的输入文件实际读取到内部表中：

```
lv_filename = p_filebp.
CLEAR lt_data_tab.

IF NOT lv_filename IS INITIAL.
  CALL FUNCTION 'GUI_UPLOAD'
    EXPORTING
      filename                = lv_filename
    TABLES
      data_tab                = lt_data_tab
    EXCEPTIONS
      file_open_error         = 1
      OTHERS                  = 17.

  IF sy-subrc <> 0.
    EXIT.
  ENDIF.
ENDIF. 
```

检查文本文件中是否有数据，是否已正确传输到内部表中。如果是这样，请将其上传到应用程序服务器上的文件。您可以自己提供一个您希望看到此上传的路径：

```
READ TABLE lt_data_tab INDEX 1.
IF sy-subrc <> 0.
  WRITE: / 'No data in input file.'.
ELSE.
  CONCATENATE '/interfaces/' sy-sysid '/CRM_ACTIVITIES/' sy-datum '_INPUT.CSV' INTO p_serinp.

  OPEN DATASET p_serinp FOR OUTPUT IN TEXT MODE ENCODING DEFAULT.

  IF sy-subrc NE 0.
    EXIT.
  ENDIF.

  LOOP AT lt_data_tab.
    TRANSFER lt_data_tab TO p_serinp.
    CLEAR lt_data_tab.
  ENDLOOP.

  CLOSE DATASET p_serinp.

  IF sy-subrc = 0.
    CLEAR gd_error_text.

    CONCATENATE 'Download to file: ' p_serinp ' is finished.'
    INTO gd_error_text SEPARATED BY space.

    WRITE: / gd_error_text.
  ENDIF.
ENDIF. 
```

请记住，使用 OPEN DATASET 语句，您可以在网络上的任何位置写入文件。如果至少您获得了所需的授权。

**事务 AL11**可用于探索 SAP 系统上的现有文件夹和文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:30:02.730

我手头没有 ABAP 堆栈，但我相信您正在寻找的是命令 OPEN DATASET 或类似的东西。这处理在应用程序服务器上读取和写入文件。通过 OPEN DATASET 处理的文件可以在事务 AL11 中找到。

# php - 如何在布局/默认中设置控制器和模型以在所有页面中加载

> ID：15699810
> 
> 赞同：0
> 
> 时间：2013-03-29T08:28:16.303
> 
> 标签：php, mysql, codeigniter

**布局**

对于我加载数据时的所有页面，但模型和控制器不起作用。我指定的其他模型工作。我的意思是，一个控制器和所有页面的布局模型，但其他页面有自己的模型和控制器。一个控制器用于所有页面，一个控制器用于每个页面。

```
<?php foreach ($sidebars as $row):  ?>
<tr><td><?php echo $row->title; ?> </td></tr>
<?php endforeach; ?>

<div id="main" role="main" class="content">
            {content}------here this show my pages content other model and controller
</div> 
```

**控制器**

在我的控制器上我加载我的页面

现在，如果我再次加载其他页面，我必须输入

```
$this->load->model('side_model');
            $data['sidebars'] = $this->side_model->get_sidebar(); 
```

这是我的一个页面控制器，它可以工作，但是如果不提及其他控制器，那么它不起作用我想让它成为每个页面的控制器，我不想在上面的代码中的每个页面控制器中提及

```
"<?php"
    public $layout = 'default'

    public function index()
    {
        $this->load->model('side_model');
        $data['sidebars'] = $this->side_model->get_sidebar();   
        $this->load->view('Layout/default',$data);
    } 
```

**模型**

```
function get_sidebar(){
    $this->db->select('*');
    $this->db->from('side');
    $this->db->where('active','1');
    $this->db->order_by('added_date', 'DESC');

    return $this->db->get()->result(); 
```

如何为所有页面制作一个具有多种功能的主控制器和模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:44:38.303

创建一个名为 core/MY_Controller.php 的文件：

```
 class MY_Controller extends CI_Controller {

        public function __construct(){
            parent::__construct();
            $this->load->model("side_model");
            $this->data["sidebars"] = $this->side_model->get_sidebar();
        }

        protected function get_html_meta($meta){
            // method will be available for all extending controllers
            return ucfirst($meta)." ".date("Y-m-d");
        }

    } 
```

从现在开始，您应该扩展 MY_Controller 而不是 CI_Controller，在您现有的控制器中，您现在可以传递`$this->data`视图可用的变量（我添加了一些`$this->data`使用示例及其范围：

```
class your_controller extends MY_Controller {

    public function index(){
        $this->data["html_meta"] = $this->get_html_meta("this is meta");
        $this->data["html_title"] = "Hello World!";
        $this->load->view('Layout/default',$this->data);
    }

} 
```

**注意：**与 不同`$this->data`的是，范围`$data`仅在您声明的函数内。

至于全局模型，一旦 MY_Controller 构造函数（或 autoload.php）加载模型，您就可以调用模型，只要您的其他控制器扩展 MY_Controller。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:34:03.753

编写你自己的控制器

```
class ParentController extends CI_Controller {

    public function index()
    {
        echo 'Hello World!';
    }
}

class Blog extends ParentController {

    public function index()
    {
        echo 'Hello World!';
    }
} 
```

# python - 在另一个模板中包含一个模板但扩展

> ID：15699814
> 
> 赞同：0
> 
> 时间：2013-03-29T08:28:34.260
> 
> 标签：python, flask, jinja2

这就是我想要的

**tmpl1.jinja**

```
{% for x in List %}
    {% set User = List[x] %}
    {% include 'tmpl2.jinja' %}
{% endfor %} 
```

**tmpl2.jinja**

```
{% extends "tmpl3.jinja" %}    
{% block link %}
   <a>share</a>
{% endblock link %} 
```

**tmpl3.jinja**

```
User.name
{% block link %}
{% endblock link %} 
```

基本上我有一个跨站点存在的用户块，只有操作（一个或多个链接，但有一些安静的 html，如图像等）发生变化。我能做些什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:44:41.460

对于模板部分，一切看起来都很好，如果你所做的就是你所展示的，应该没有问题。

您的列表是 dict() 还是实际上是 list()？

因为你的问题在这里：

```
{% for x in List %}
    {% set User = List[x] %} 
```

仅当 List 是字典时，此语法才有效。

如果是列表，您应该写：

```
{% for x in List %}
    {% set User = x %} 
```

# scheme - 球拍编程。我哪里错了？

> ID：15699820
> 
> 赞同：1
> 
> 时间：2013-03-29T08:29:28.637
> 
> 标签：scheme, racket, primes, prime-factoring

我试图回答的问题：
13195 的质因数是 5、7、13 和 29。数字 600851475143 的最大质因数是多少？

我哪里错了？我的素数？测试似乎是问题所在，但它在相对较小的数字上运行良好。然而素数？测试给出较大数字的错误答案。有没有更简单的方法来解决这个问题？

```
 (define b 3)

    (define z 0)

    (define divides?
      (lambda (a b)
        (= (remainder a b) 0)))

    (define (prime? n)
        (cond
          ((or (= n 1) (= n 0)) false)
          ((even? n) false)
          ((= n 2) true)
          ((= n b) true)
          ((divides? n b) false)
          (else (and (set! b (+ b 1)) (prime? n)))))

    ;Largest Prime Factor Test
    (define (LPF x)
      (cond
        ((divides? 600851475143 x)
         (cond
           ((prime? x)
            (cond
              ((> x z) (set! z x)))))))
      (if (< x 775146) (LPF (+ x 1)) (display z))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T12:34:11.910

用某种伪代码编写，你的意图似乎是

```
 pe3 = last [x | x <- [2 .. 775146], isPrime x, rem 600851475143 x == 0] 
```

阅读它：*从 2 到 775146 范围内绘制，如果**持有，如果为 0，则收集此类；返回最大的`x``isPrime x``600851475143 % x``x`*。我们也在此处编写`(g x)`不带括号的应用程序，就像`g x`.

计算余数比测试素数要便宜，所以我们将交换这两个操作：

```
pe3 n = last [x | x <- [2 .. isqrt n], rem n x == 0, isPrime x] 
```

该算法可能适用于所涉及的特定数字，但不幸的是它通常是不正确的 - 例如对于整数平方根为 3000 的 9000009，它将返回 101。但*9901*是正确的答案（即 9901 是 9000009 的最大素数除数，而不是 101）。

让我们首先关注寻找*最小*的质因子，而不是：

```
pe3a n = head ([x | x <- [2 .. isqrt n], rem n x == 0, isPrime x] ++ [n]) 
```

为什么`( ... ++ [n])`（`++`意味着列表的串联）？因为如果`n`它自己是素数，就根本找不到除数，而且第一个列表将返回空，`[]`。在这种情况下，答案必须是`n`它自己。但如果不是，那么答案就是`head`除数列表的第一个（即 ）。当然，当我们找到它时，我们不需要继续寻找更多。一个就足够了，如果最小的就是我们所需要的。

好的，所以尝试它（在一个虚构的惰性伪代码解释器上），我们得到 3 作为它的第一个因素：

```
> pe3a 9000009
3 
```

现在我们可以从我们的数字中除以 3：

```
> div 9000009 3 
3000003 
```

并继续使用 3000003，而不是 9000009。这意味着我们可以停在*它的*平方根 1732 上，而不是停在 3000 上——效率上的巨大提升！此外，我们不需要从 2 重新开始——它已经过测试——我们可以从最后找到的因素开始：

```
pe3b (start, n) = (d, div n d)
  where
     d = head ([x | x <- [start .. isqrt n], rem n x == 0, isPrime x] ++ [n])

> pe3b (3, 3000003)
(3,1000001) 
```

所以我们得到第二个 3，这个数字再次除以找到的除数。

```
> pe3b (3, 1000001)
(101,9901) 
```

找到的下一个主要除数是 101，现在要分解的数字是 1000001 / 101 = 9901。我们再次从最后找到的除数 101 开始，因为所有较小的除数都已尝试过：

```
> pe3b (101, 9901)
(9901,1) 
```

有趣的。`isqrt(9901) == 99`，列表`[101 .. 99]`为空，因此立即产生结果。9901 是它自身大于 100 的第一个因数，实际上大于 1，因为之前的所有数字都已经被依次尝试过，并且被除掉了。这意味着 9901 是素数，无需测试它的素数。

事实上，该算法找到的所有因子**都可以通过相同的推理构造保证是素数**，并且所有调用`isPrime`都是多余的。

还要注意，这里执行除法（余数运算）的最大数字是 101，*而不是*3000。我们的新算法不仅正确，而且效率更高！

现在您可以在 Scheme 中编写这种重复`pe3b`应用并除以最后找到的因子的算法。达到 1 时停止。

* * *

所以，在[同一个伪代码](http://www.haskell.org/haskellwiki/Introduction#Quicksort_in_Haskell)中，

```
divStep (start, n) = (d, div n d) 
  where d = head ([x | x <- [start .. isqrt n], rem n x == 0] ++ [n])

pe3 n = fst . until ((== 1) . snd) divStep $ (2,n)  -- (1st,2nd) in a tuple

factorizing n = takeWhile ((> 1) . fst) . drop 1 . iterate divStep $ (2,n)

factors n = map fst . factorizing $ n

isPrime n = factors n == [n] 
```

读`.`为`$`“的”。`until` *pred step start*是重复应用函数的高阶模式，直到满足谓词（`((== 1) . snd)`意味着结果的第二个分量等于 1）。它通常在 Scheme 中用 named 编码`let`。

要查看整个计算历史，`iterate` *step start*是另一种模式，它收集所有中间结果（以及我们不需要的起始值，所以我们`drop`使用它）。为了仅查看因子本身，我们将每个结果的第一个组成部分用`map fst`. 一个数是素数，如果它是唯一的除数，大于 1，它本身。测试：

```
> pe3 9000009
9901
> factorizing 9000009
[(3,3000003),(3,1000001),(101,9901),(9901,1)]
> factors 9000009
[3,3,101,9901]

> pe3 600851475143
6857
> factorizing 600851475143
[(71,8462696833),(839,10086647),(1471,6857),(6857,1)]   -- 1471 is the largest
> factors 600851475143                                  --   factor tried, 
[71,839,1471,6857]                                      --   *not* 775146 !!

> factors 600851475143999917      -- isqrt 600851475143999917 == 775146099
[41,37309,392798360393]           -- isqrt 392798360393       ==    626736 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:41:29.900

简单的回答：

```
$ factor 600851475143
600851475143: 71 839 1471 6857 
```

更严肃的回答：你的`prime?`功能确实坏了；我什至不确定它想做什么。（另外，你的`(= n 2)`测试太晚了，没有用：`(even? n)`测试胜过了它。）

我的建议：实施[埃拉托色尼筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)。这是[我的实现](https://gist.github.com/cky/4532978)。

# class - UML 类图元模型

> ID：15699822
> 
> 赞同：1
> 
> 时间：2013-03-29T08:29:39.483
> 
> 标签：class, uml, metamodel, mda, eclipse-atl

我在哪里可以找到简化的类图元模型？这是一个 ATL ATLAS 转换语言项目，我需要将实体类图转换为 SQL 数据库。谢谢你 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:12:06.563

这是一个基于 EMOF的[简化类图元模型。](http://app.genmymodel.com/class-diagram/examples/simple-class-metamodel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:55:56.243

我们（我现在领导 atlanmod 团队，ATL 语言的创建者）拥有一个“[元模型动物园](http://www.emn.fr/z-info/atlanmod/index.php/Zoos)”，其中包含 200 多个不同格式的元模型，包括可与 ATL 一起使用的 ecore。

事实上，我们还有一个[ATL 转换动物园](http://www.eclipse.org/atl/atlTransformations/)，其中包含 100 多种 ATL 转换，您可以尝试（并从中学习）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T08:57:46.770

您可以测试 MOSKitt (www.moskitt.​​org)，基于 eclipse 的建模软件 kitt，您可以在其中找到不同的模块，包括使用 ATL 和 SQL 代码生成从 UML 类图到数据库到不同技术（postgre、mysql 等）的转换

# c++ - C++中的“*&”是什么意思

> ID：15699824
> 
> 赞同：0
> 
> 时间：2013-03-29T08:29:49.673
> 
> 标签：c++

我正在查看 ACE 框架的手册并遇到了这个声明

```
int ACE_Stream<>::get   (ACE_Message_Block *&   mb, ACE_Time_Value * timeout = 0) 
```

我无法理解`*&`代表什么。我知道 * 是指针， & 是参考。谁能解释一下这个声明的含义。

提前致谢

因此，正如@NPE 所说， *& 使指针的更改传播回来。但是为了理解我只是写了一些共享它的代码，以便它可以帮助其他人正确理解这一点

```
#include <iostream>

using namespace std;

class DoSomething
{
public:
  int n;
  DoSomething(int i){
    n = i;
  }
  virtual ~DoSomething();
};

DoSomething::~DoSomething()
{

}

int dosomething(DoSomething * a)
{
  cout << "Got value from caller: (in dosomething) = " << a << endl;
  a = new DoSomething(25);

  return 0;
}

int dosomethingElse(DoSomething *& a)
{
  cout << "Got value from caller: (in dosomethingElse) = " << a << endl;
  a = new DoSomething(15);
  return 0;
}

int main(int argc, char *argv[])
{
  DoSomething *d = new DoSomething(10);

  cout << "Pointer to DoSomething: " << d << endl;

  dosomething(d);
  cout << "After dosomething value of d: " << d << endl << endl;

  dosomethingElse(d);
  cout << "After dosomethingElse value of d: " << d << endl << endl;  

  delete d;
  return 0;
} 
```

所以正如@NPE所说，这里已经结束了

```
Pointer to DoSomething: 0x955f008
Got value from caller: (in dosomething) = 0x955f008
After dosomething value of d: 0x955f008

Got value from caller: (in dosomethingElse) = 0x955f008
After dosomethingElse value of d: 0x955f028 
```

所以确实，如果我在函数内部创建一个新实例，它只会在我使用时传播`*&`，而不仅仅是`*`

谢谢大家的回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T08:31:54.010

> 我知道`*`是指针，`&`是参考。

正确的。所以你这里有一个指针，通过引用传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T08:30:29.410

`mb`是一个通过引用传递的指针。这意味着如果`get()`要更改指针的值，更改将传播回调用者。

# jquery - 将脚本添加到单独的 .js 文件

> ID：15699826
> 
> 赞同：1
> 
> 时间：2013-03-29T08:29:54.423
> 
> 标签：jquery, asp.net, ajax, jquery-mobile

我在 .aspx 页面标题标签上添加了下面的脚本，它可以完美运行，没有任何问题。

```
<script type="text/javascript">
       $('#InfoPage').live('pageshow', function (event) {
           $("#apdf").click(function (e) {
               e.preventDefault();
               var serviceURL = "Default.aspx/GeneratePDF";

               $.ajax({
                   type: "POST",
                   url: serviceURL,
                   data: param = "", // parameter
                   contentType: "application/json; charset=utf-8",
                   dataType: "json",
                   success: successFunc,
                   error: errorFunc
               });

               function successFunc(data) {

                   alert('sucess');
               }

               function errorFunc() {
                   alert('error');
               }

           });
       });
   </script> 
```

后来我想清理我的代码并将上面的脚本添加到一个单独的 .js 文件中，并将链接添加到页眉标签。

```
<script type="text/javascript" src="PDFScript.js"/> 
```

然后突然停止工作网页根本没有呈现任何东西，即使没有显示静态内容。发生这种情况的任何具体原因？

我也在下面尝试过。

```
<div data-role="page" id="InfoPage">
 <script type="text/javascript" src="PDFScript.js"/>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:50:21.693

在标签`<script type="text/javascript" src="PDFScript.js"/>`之前导入。`</body>`否则请确保在 jQuery、jQuery Mobile js 库之后导入它。

如果您使用的是 jQuery 1.9.x，那么您将`live`无法正常工作。你需要使用`.on()`方法。

```
$(document).on('pageshow', '#InfoPage', function(){
   // your code goes here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:46:24.203

改变这个：

```
$('#InfoPage').live('pageshow', function (event) { 
```

对此：

```
$(document).live('pageshow', '#InfoPage' ,function (event) { 
```

为了更好地理解这一点，请阅读这篇文章（它不是我的）：http: [//jqfundamentals.com/chapter/events](http://jqfundamentals.com/chapter/events)并查找章节：**事件委托**

# android - 从自定义 ListView 中删除项目

> ID：15699827
> 
> 赞同：0
> 
> 时间：2013-03-29T08:29:54.057
> 
> 标签：android, android-listview, listadapter

我有一个自定义 ListView，其中填充了从数据库中检索到的内容。现在，我无法理解的是如何从列表中删除一个项目：在谷歌上搜索我看到了没有标准解决方案的不同问题，所以我对此表示怀疑。如何使用异步任务从 CustomListView 中删除一行？

这是 Leggi_Pizzaiolo 活动（我在其中显示 listView）：

```
public class Leggi_Pizzaiolo extends Activity
{
    // Progress Dialog
    private ProgressDialog pDialog;
    public List list = new LinkedList();
    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String, String>> productsList;

    // url to get all products list
    private static String url_all_products = "http://10.0.2.2/tesina/Leggi_Pizzaiolo.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "Esito";
    private static final String TAG_PRODUCTS = "comande";
    private static final String TAG_PID = "ID";
    private static final String TAG_NAME = "Nome";
    private static final String TAG_TABLE = "Tavolo";
    public ListView lv;
    // products JSONArray
    JSONArray products = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ordini_cuoco);

        // Hashmap for ListView
        productsList = new ArrayList<HashMap<String, String>>();

        // Loading products in Background Thread

        // Get listview
        lv = (ListView)findViewById(R.id.lista);

        new LoadAllProducts().execute();

    }

    /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadAllProducts extends AsyncTask<String, String, String> 
    {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(Leggi_Pizzaiolo.this);
            pDialog.setMessage("Loading products. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting All products from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All Products: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // products found
                    // Getting Array of Products
                    products = json.getJSONArray(TAG_PRODUCTS);

                    // looping through All Products
                    for (int i = 0; i < products.length(); i++) {
                        JSONObject c = products.getJSONObject(i);

                        // Storing each json item in variable
                        int id = c.getInt(TAG_PID);
                        String name = c.getString(TAG_NAME);
                        int Tavolo= c.getInt(TAG_TABLE);

                        list.add(new Comanda(name, id, Tavolo));

                    }
                } else {
                    // no products found
                    // Launch Add New product Activity
                    Intent i = new Intent(getApplicationContext(),
                            Listino.class);
                    // Closing all previous activities
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) 
        {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating listview
            final ComandaCursorAdapter adapter = new ComandaCursorAdapter(Leggi_Pizzaiolo.this, R.layout.comanda_cuoco, list);
            lv.setAdapter(adapter);

        }

    }

} 
```

这是光标适配器：

```
public class ComandaCursorAdapter extends ArrayAdapter<Comanda>
{

public ComandaCursorAdapter(Context context, int comandaCuoco, List list) {
    super(context, comandaCuoco, list);
    // TODO Auto-generated constructor stub
}

@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    convertView = inflater.inflate(R.layout.comanda_cuoco, null);

    TextView Nome = (TextView)convertView.findViewById(R.id.Comanda);
    TextView Tavolo = (TextView)convertView.findViewById(R.id.Tavolo);
    TextView Codice = (TextView)convertView.findViewById(R.id.Codice);

    Comanda c = getItem(position);

    Nome.setText(c.getNome());
    Tavolo.setText("Tavolo: " + Integer.toString(c.getTavolo()));
    Codice.setText("Codice: " + Integer.toString(c.getCodice()));

    return convertView;

} 
```

这是对象 Comanda：

```
public class Comanda {

    private String Nome;
    private int Codice;
    private int Tavolo;

    public Comanda(String Nome, int Codice, int Tavolo)
    {
        this.Nome = Nome;
        this.Codice = Codice;
        this.Tavolo = Tavolo;

    }

    public String getNome()
    {
        return Nome;
    }

    public void setNome(String Nome)
    {
        this.Nome = Nome;
    }

    public int getCodice()
    {
        return Codice;
    }

    public void setCodice(int Codice)
    {
        this.Codice = Codice;
    }

    public int getTavolo()
    {
        return Tavolo;
    }

    public void setTavolo(int Tavolo)
    {
        this.Tavolo = Tavolo;
    }

} 
```

现在，我必须在 Leggi_Pizzaiolo 活动中声明 setOnItemClickListener 的位置？我应该在类中实现一个删除方法还是什么？请让我知道如何...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:38:14.523

> 现在，我不明白的是如何从列表中删除一个项目

不，通常创建例如[`OnItemClickListener()`](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)能够处理 ListView 上的点击事件。然后在**onItemClick()**你有参数**int position**返回适配器中项目的位置。现在您需要从列表中删除项目，然后执行

```
list.remove(position) 
```

然后你需要打电话

```
adapter.notifyDataSetChanged(); 
```

通知适配器数据源已更改。

**注意：**为了更加舒适，您可以在单击 ListItem 后显示一些带有删除或不删除按钮的 AlertDialog。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:37:55.580

试试这个

```
 lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> a, View v, int position, long id) {
        AlertDialog.Builder adb=new AlertDialog.Builder(MyActivity.this);
        adb.setTitle("Delete?");
        adb.setMessage("Are you sure you want to delete " + position);
        final int positionToRemove = position;
        adb.setNegativeButton("Cancel", null);
        adb.setPositiveButton("Ok", new AlertDialog.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                MyDataObject.remove(positionToRemove);
                adapter.notifyDataSetChanged();
            }});
        adb.show();
        }
    }); 
```

其中 lv 是您的列表视图，adb 是一个对话框，mydataobject 是您用于填充列表视图的集合，适配器是您的适配器。

# c - 如何在程序中将缓冲区字符串更改为大写？

> ID：15699829
> 
> 赞同：-3
> 
> 时间：2013-03-29T08:30:02.673
> 
> 标签：c

我在 C 程序中遇到问题。我已经在缓冲区中有一个字符串，想将字符串更改为大写，然后写入套接字或将其转换为标准输出。请在下面的代码中帮助我。

```
char input[] = buffer;
int  alpha_count = 0;
for (int i = 0, x = strlen(input); i < x; i++) {
  if (isalpha(input[i])) {
    if (alpha_count++ % 2 == 0 ) 
      input [i] = toupper(input[i]);
  }   
}   
printf("%s\n", input); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:38:57.620

您的问题在此部分：

```
if (isalpha(input[i])) {
  if (alpha_count++ % 2 == 0 ) 
    input [i] = toupper(input[i]);
} 
```

你需要仔细`islower`考虑使用目的`if (alpha_count++ % 2 == 0 )`。这是我要使用的：

```
#include <ctype.h>

void str_upper(char *str) {
    do {
        *str = toupper((unsigned char) *str);
    } while (*str++);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:51:54.087

你必须修改这个`for`循环

```
for (int i = 0, x = strlen(input); i < x; i++) {
  if (isalpha(input[i])) {
    if (alpha_count++ % 2 == 0 ) 
      input [i] = toupper(input[i]);
  }   
} 
```

使用以下代码

```
for (int i = 0, x = strlen(input); i < x; i++) {
      input [i] = toupper(input[i]);
} 
```

从 cplusplus.com 的[toupper()](http://www.cplusplus.com/reference/cctype/toupper/)页面：

> **int toupper ( int c );**
> 
> 将小写字母转换为大写 如果 c 是小写字母并且具有等效的大写字母，则将 c 转换为其等效的大写字母。如果不可能进行这样的转换，则返回的值是 c 不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T08:55:45.357

为什么不使用_strupr？

```
_strupr(input); 
```

# php - Mysql 查询从命令行工作，但只有一半在 PHP 中工作

> ID：15699830
> 
> 赞同：0
> 
> 时间：2013-03-29T08:30:04.330
> 
> 标签：php, mysql

我有两张桌子

**1.owners**
id
firstname
lastname

**2.product**
id
id2
id3
item

```
SELECT * FROM owners LEFT JOIN product ON product.id=owners.id where firstname='Jezebel'; 
```

从返回所有者和产品的所有相关项目但使用以下 PHP 的命令行可以正常工作

```
$result = mysql_query("SELECT * FROM owners LEFT JOIN product ON product.id=owners.id where firstname='".$_POST['fname']."'") 
```

只返回表所有者的结果。

我已经广泛搜索并没有看到其他人有这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:17:17.243

我发现了错误。这与 select 语句无关。我在显示代码中有错字。应该是这样的

```
echo "</td><td>"; 
echo $row['id3']; 
```

而是变成了这样

```
echo "</td></td>"; 
echo $row['id3']; 
```

谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:36:09.343

```
$fname= $_POST['fname'];
$result = mysql_query("SELECT * FROM owners LEFT JOIN product ON product.id=owners.id where firstname='$fname'") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:10:43.860

首先，使您的查询类似于此

```
 $query = sprintf("SELECT * FROM owners LEFT JOIN product ON product.id=owners.id where firstname='%s'",mysql_real_escape_string(trim($_POST['fname'])));
    $result = mysql_query($query) or die(mysql_error());
    var_dump(mysql_fetch_assoc($result)); 
```

让我知道结果，以便我可以更新这个答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T12:27:37.387

首先：您有两个在自动增量列上匹配的表`id`？

但是，试试这个？

```
SELECT tb1.id, tb1\. firstname, tb1.lastname, tb2.id, tb2.id2, tb2.id3, tb2.item FROM owners AS tb1 LEFT JOIN product AS tb2 ON tb2.id=tb1.id where tb1.firstname=$fname 
```

# python - makedirs 错误：GAE Python 能否创建新目录（文件夹）？

> ID：15699836
> 
> 赞同：1
> 
> 时间：2013-03-29T08:30:29.613
> 
> 标签：python, google-app-engine, python-2.7, file-io, directory

我已经看到了许多与使用 Python 和 GAE 编写文件和创建新目录有关的问题，但其中一些问题得出结论（不仅在 SO 上），说 Python**不能**写入文件或创建新目录。然而这些命令是存在的，而且很多其他人似乎在写文件和打开目录也没问题。

我正在尝试写入 .txt 文件并创建文件夹并收到以下错误：

情况1：

```
with open("aardvark.txt", "a") as myfile:
    myfile.write("i can't believe its not butter") 
```

产生“IOError：[Errno 30] 只读文件系统：'aardvark.txt'”。但我已经检查过了，它的 def-o 不是只读文件。

案例2：

```
folder = r'C:\project\folder\' + str(name)
os.makedirs(folder) 
```

产生“OSError：[Errno 38] 功能未实现：'C:\project\folder'”

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:41:01.597

Appengine 不支持对文件系统的任何写入操作（以及其他限制）。BlobStore 确实有一个类似 api 的文件，但您不能重写/附加到现有的 Blob 存储实体。开发服务器还提供这些限制以模拟生产环境。

您可能应该阅读一些关于 appengine 的文档。概述文档[https://developers.google.com/appengine/docs/python/overview](https://developers.google.com/appengine/docs/python/overview)明确指出您不能编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-27T10:59:54.077

AppEngine 现在可以在使用 Managed-VM 时写入本地“临时”磁盘存储，但在使用本文档中指定的沙盒方法时不受支持：

[https://cloud.google.com/appengine/docs/managed-vms/tutorial/step3](https://cloud.google.com/appengine/docs/managed-vms/tutorial/step3)

# php - PHP密码保护足够安全

> ID：15699839
> 
> 赞同：2
> 
> 时间：2013-03-29T08:30:36.003
> 
> 标签：php, security, hash, password-protection, password-encryption

在我开始之前，我想为再次提出这个主题而道歉，正如许多用户所做的那样，但是通过我所做的研究，我对我的发现并不满意。我只是希望在这里提出一些真正有用的东西。

由于 md5 或 sha1 被认为是不好的做法（即使使用盐？？？），我试图创建这个函数来散列我的密码

```
$password = $_POST['password']; // lets say that my password is: my_sercretp@ssword123
function encrypt_the_password($password){
    $salt = "lorem_ipsumd0l0rs1t@m3tc0ns3ct3tur@d1p1sc1ng3lit";
    return hash('sha256', $salt.$password);// can use also different algorithm like sha512 or whirlpool
}
$hashed_password = encrypt_the_password($password); 
```

请注意，我在只有一个用户的个人网站中使用它，我。如果有多个用户，我会想出这样的方法：

```
$password = $_POST['password'];
function generate_salt() {
    $salt = uniqid(md5("lorem_ipsumd0l0rs1t@m3tc0ns3ct3tur@d1p1sc1ng3lit".microtime()));
    $salt = hash('sha256', $salt);// can use also different algorithm like sha512 or whirlpool
    return $salt;
}
function encrypt_the_password($password,$salt){
   return hash('sha256', $salt.$password);// can use also different algorithm like sha512 or whirlpool
}
$hashed_password = encrypt_the_password($password,generate_salt()); 
```

这是否足够安全（在每种情况下）还是可以进一步改进？？？

* * *

我的编辑：我尝试使用 crypt() 函数想出一些新的东西。如果网站只有一个用户管理员，这是我的代码：

```
$password = $_POST['password'];
$salt = "L0r3mIpsUmD0l0rS1tAm3t";
$hashed_password = crypt($password', '$2a$12$' . $salt); 
```

如果网站有多个用户：

```
$password = $_POST['password'];
function generate_salt() {
        $salt = uniqid(sha1("L0r3mIpsUmD0l0rS1tAm3tc0ns3CT3tur4d1p1sc1ng3lit".microtime()));
        $salt = substr(sha1($salt), 0, 22);
        return $salt;
}
$hashed_password = crypt($password', '$2a$12$' . generate_salt()); 
```

这可以还是需要改进？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T08:38:42.050

通过不编写自己的算法来改进它。您的算法是不安全的，因为您的盐是恒定的，并且您只使用 SHA256 的一次迭代进行散列，这在计算上很便宜。

Instead, use [Bcrypt](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php), which is both computationally expensive and verified by people who know what they're doing, so it's much safer than your solution.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T08:38:07.313

您应该使用 PHP 5.5 中内置的密码功能。ircmaxell 有一个后备库，可以提供早期版本 PHP 中的功能：[https ://github.com/ircmaxell/password_compat](https://github.com/ircmaxell/password_compat)

它将始终使用可用的最新散列技术，以防万一甚至为您更新记录。确保您阅读了该库随附的自述文件。

不要制作自己的散列函数。

# ios - 如何不保存托管对象上下文

> ID：15699841
> 
> 赞同：1
> 
> 时间：2013-03-29T08:30:48.787
> 
> 标签：ios, objective-c, core-data

我正在尝试创建一个新的核心数据对象，并用视图上的子视图的一些信息填充它。（只是用 template_control 对象填充数组）

有什么问题？该对象无法保存，但稍后当我真正保存 时`managedobjectcontect`，该对象被保存。

我尝试了什么？我创建了一个`managedobjectcontext`不保存的新控件，但是当我`savemanagedobjectcontext`在 normal 上执行 a 时，控件仍然被保存`managedobjectcontext`。

有谁对此有解决方案吗？

提前致谢。

```
 Template_Control * temp_control = [NSEntityDescription  
      insertNewObjectForEntityForName:@"Template_Control"
                                                                          inManagedObjectContext:self.tmpManagedObjectContext];

for(UIView *view in self.view.subviews){
    if(![view isEqual:self.templateEditView.leftSideView]){
        NSLog(@"DE TAG VAN DE view is %i",view.tag);

        temp_control.height = [NSNumber numberWithFloat:view.bounds.size.height];
        temp_control.width = [NSNumber numberWithFloat:view.bounds.size.width];

        [temp_control setX:[NSNumber numberWithFloat:view.frame.origin.x]];
        [temp_control setY:[NSNumber numberWithFloat:view.frame.origin.y]];
        NSLog(@"%i",view.tag);
        [temp_control setControl:[self getControlForTemplateControl:view.tag]];

        [self.controlsOnTemplate addObject:temp_control];
    }
}

NSLog(@"aantal controls: op de template %i", [self.controlsOnTemplate count]);
temp_control = nil; 
```

这是我的桌子的图像

![在此处输入图像描述](../Images/8d07d4e0393da53c3b0bcfd16d54edc3.png)

为了更清楚一点，这里是我保存正常 managedobjectcontext 的代码：

-(void)saveNewTemplateControls{

```
NSError *error;

//template voor de contorl ophalen
NSFetchRequest *request = [[NSFetchRequest alloc]init];
[request setEntity:[NSEntityDescription entityForName:@"Template" inManagedObjectContext:self.managedObjectContext]];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name == %@",self.template.name];
[request setPredicate:predicate];

NSArray *results = [self.managedObjectContext executeFetchRequest:request error:&error];

NSEntityDescription *entitydescTemplateControl = [NSEntityDescription entityForName:@"Template_Control"
                                                     inManagedObjectContext:self.managedObjectContext];

for(Template_Control *template_control in self.theNewControls){
    NSManagedObject *newtemplatecontrol = [[NSManagedObject alloc]initWithEntity:entitydescTemplateControl
                                                  insertIntoManagedObjectContext:self.managedObjectContext];

    [newtemplatecontrol setValue:template_control.width forKey:@"width"];
    [newtemplatecontrol setValue:template_control.height forKey:@"height"];

    [newtemplatecontrol setValue:template_control.x forKey:@"x"];
    [newtemplatecontrol setValue:template_control.y forKey:@"y"];

    [newtemplatecontrol setValue:[results objectAtIndex:0] forKey:@"template"];

    [newtemplatecontrol setValue:template_control.control forKey:@"control"];

    [self.managedObjectContext save:&error];
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:45:31.850

在您保存托管对象上下文之前，您的对象不会被写入（或“保存”）在支持核心数据的 sqlite 数据库中。在您调用 save 之前，不要检查数据库。

# sql - How can I retrieve an entire row of a MAX query?

> ID：15699842
> 
> 赞同：0
> 
> 时间：2013-03-29T08:30:59.383
> 
> 标签：sql, database

![TABLE.PNG](../Images/52861a826acf5eadff779d13e20a75b0.png)

Im currently using this query in attempts to retrieve the highlighted rows

"Select max(grades_id) from grades WHERE dt_year BETWEEN 2012 AND 2013 GROUP BY student_id HAVING count(grades_id) >= 2"

however it is only yielding

![RESULTS.PNG](../Images/49e5b58fd5debe0759e676289f1d3f7a.png)

is there any way to retrieve the entire row as opposed to just the grades_id?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:49:01.520

只需将现有查询用作子查询来确定所需的行，然后为它们选择所有列，如下所示：

```
select * from grades where grades_id in (Select max(grades_id) from grades WHERE dt_year BETWEEN 2012 AND 2013 GROUP BY student_id HAVING count(grades_id) >= 2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:48:31.737

询问：

```
SELECT g.*
FROM grades g
WHERE g.grades_id = (SELECT MAX(g1.grades_id)
                     FROM grades g1
                     WHERE g1.dt_year BETWEEN 2012 AND 2013
                     AND g1.student_id = g.student_id
                     HAVING count(g1.grades_id) >= 2) 
```

如果您可以在[http://sqlfiddle.com/](http://sqlfiddle.com/)中插入数据，也许我可以给出更优化的解决方案。

# c++ - 如果 x 和 y 分别是值为 1 和 2 的两个整数。语句 y= - -x-- 是什么意思；

> ID：15699850
> 
> 赞同：2
> 
> 时间：2013-03-29T08:31:20.930
> 
> 标签：c++, c

我编写了以下程序，它给了我输出 0 1 但我不明白如何

```
main()
{
  int i = 1, m = 2;
  m= - - i--;
  printf("%d %d", i, m);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T08:34:00.067

让我们考虑一下：

```
m = - - i--; 
```

在这里，`- -`应用一元减号两次。这实际上是一个空操作。因此上面可以简化为

```
m = i--; 
```

这相当于：

```
m = i;
i = i - 1; 
```

因此正确的输出是`0 1`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-29T08:33:33.283

-- 和 - - 不同： - - 等于 -(-()) 运算符，当您调用时

```
m= - - i--; 
```

您将 i 减 1，然后将新值乘以 -1 两次，这不会改变结果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-29T08:33:48.457

后递增运算符 ( `--`) 产生 的值`i`（之后它被否定两次），然后递减它。所以`m`会是1，`i`也会是0。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T08:34:13.050

`- -x--` can be write like `- (- (x--))`.

`x--` substract 1 from x, but return x before the substraction. So y will take the value of x. And x is now equals to `x - 1`.

# php - zend lucene 接近场的起点

> ID：15699856
> 
> 赞同：0
> 
> 时间：2013-03-29T08:32:05.663
> 
> 标签：php, zend-framework, lucene, indexing, full-text-search

我使用 zend lucene 进行搜索。我用那个代码形成我的索引

```
$doc = new Zend_Search_Lucene_Document();
            $doc->addField(Zend_Search_Lucene_Field::text('word_id', $word['id']));

            $boostField = Zend_Search_Lucene_Field::text('priority', $word['priority']);
            $doc->addField($boostField);
            $doc->addField(Zend_Search_Lucene_Field::unStored('description', $word['name'], 'UTF-8'));
            $index->addDocument($doc); 
```

使用该代码解析搜索字符串：

```
 $query=  str_replace(array('-','!','@','#','$','%','^','&','*','(',')'), ' ', $query);
        $query = trim($query);
        $words = explode(" ", $query);
        unset($query);
        $query = "";
        foreach ($words as $word) {
            $query.='(' . $word . '*)';
            if ($word != end($words)) {
                $query.=' AND ';
            }
        }
        return $query; 
```

并使用该代码搜索：

```
 try {
            Zend_Search_Lucene::setResultSetLimit($limit);
            $index = Zend_Search_Lucene::open($this->_indexPath);
        } catch (Exception $e) {
            return false;
        }
        try {
            return $index->find($query, 'score', SORT_NUMERIC, SORT_DESC, 'priority', SORT_NUMERIC, SORT_ASC);
        } catch (Exception $e) {
            return false;
        } 
```

所以，我的问题是——我在索引中有一些字段，例如：笔记本电脑的黑色袋子，笔记本电脑的蓝色袋子，笔记本电脑，笔记本苹果电脑。例如，我输入“笔记本”，我希望“笔记本，笔记本苹果”出现在最佳结果中。但我的包包名列前茅！我做错了什么？我需要做什么才能从搜索字段开始获得最大关闭位置的结果？有可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T04:45:11.550

我不知道有任何`Query`直接`Similarity`处理这种情况的实现。

A[`SpanQuery`](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/spans/SpanQuery.html)可用于完成类似的行为，但无法匹配查询的开头。我想到的解决方法是在要以这种方式搜索的字段的开头添加一个关键字，然后使用该关键字搜索 Span。所以，如果我索引：

```
xxxbeginxxx notebook apple 
```

您可以使用[SpanNearQuery](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/api/core/org/apache/lucene/search/spans/SpanNearQuery.html)进行搜索，例如：

```
SpanNearQuery spanNear1 = new SpanNearQuery(new SpanQuery[] {
new SpanTermQuery(new Term("description", "xxxbeginxxx")),
new SpanTermQuery(new Term("description", "notebook"))},
10, true); 
```

一种hacky的解决方案。您必须确保始终在索引时添加该术语，并在您自己显示给用户之前将其删除。

也许有人知道更好的方法，但我相信这应该让你得到你正在寻找的行为。

# c# - 如何在后面的链接按钮代码中添加“活动”css类

> ID：15699860
> 
> 赞同：2
> 
> 时间：2013-03-29T08:32:25.727
> 
> 标签：c#, asp.net, css

我的母版页中有几个链接按钮。单击每个链接按钮和回发 URL 后，我需要添加 css 类“活动”。

```
<asp:LinkButton ID="Linkbutton1" runat="server" PostBackUrl="/News.aspx?lang=1"
         Text="News" OnClick="Linkbutton1_Click">
</asp:LinkButton> 
```

链接按钮 1

**链接按钮 2** - “活动”类

链接按钮 3

我尝试使用链接按钮 onclick 事件添加类，但是在删除了回发 css 类之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:35:36.677

把这个放到`Linkbutton1_Click`方法中：

```
Linkbutton1.CssClass = "active"; 
```

[MSDN 上的文章](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.cssclass.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:06:35.563

如果你想在后面写代码，你可以使用 cookie：

**在 Linkbutton1_Click 方法中：**

```
Response.Cookies["Linkbutton1-cssClass"].Value = "active"; 
```

**在 Page_Load 方法中：**

```
if(Request.Cookies["Linkbutton1-cssClass"] != null)
   Linkbutton1.CssClass = Server.HtmlEncode(Request.Cookies["Linkbutton1-cssClass"].Value); 
```

最后，您可以`foreach`用于所有**LinkBut​​tons**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:21:53.393

链接按钮的 onclick 调用 javascript 函数 changestyle(SenderID)

```
<script type="javascript">
var strPreviousCahnge=""
function changestyle(SenderID)
{
   var LinkButtonActive=document.getelementbyid(senderID);
LinkButtonActive.className="subTabActive";

            if (strPreviousCahnge!= "" && strPreviousCahnge!= id)
            {
                var identity=document.getElementById(strPreviousCahnge);
                identity.className="subTabInactive";
            }
strPreviousCahnge=SenderID
}
</script> 
```

# matlab - 如何使用 Matlab 提取图像中的文本区域？

> ID：15699862
> 
> 赞同：3
> 
> 时间：2013-03-29T08:32:40.717
> 
> 标签：matlab, image-processing, edge-detection

我正在编写一个`matlab`程序来检测自然场景图像中的文本。我正在接受[这个视频讲座和论文](http://videolectures.net/cvpr2010_epshtein_dtns)的帮助。我理解了前几个步骤并进行了边缘检测（我在下面添加图像）。现在我想从最终图像中仅提取（分离）文本。我怎么做？

我的代码：

```
i = imread('f:\new.jpg');
i1 = rgb2gray(i);
imshow(i1);

i2 = edge(i1,'canny',0.3);
imshow(i2);

se = strel('square',2);
i3 = imdilate(i2,se);
imshow(i3);

i4 = imfill(i3,'holes');
imshow(i4);

[Ilabel num] = bwlabel(i4);
disp(num);
Iprops = regionprops(Ilabel);
Ibox = [Iprops.BoundingBox];
Ibox = reshape(Ibox,[4 92]);
imshow(i);

hold on;
for cnt = 1:92
    rectangle('position',Ibox(:,cnt),'edgecolor','r');
end 
```

最终图像： ![在此处输入图像描述](../Images/573c8c9eabd6ea1e2a218e732dd43ccd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:44:56.233

裁剪图像的一部分是从矩阵中获取子矩阵，知道它的边界索引。例如，如果子矩阵从`y1`行延伸到`y2`行，从`x1`列延伸到`x2`列（包括所有边界），您将获得子矩阵：

```
submat = mainmat(y1:y2,x1:x2); 
```

在提取子矩阵之前，您必须获取每个字母的边界坐标。如果你有一个字母`y`的`x`坐标；无论是图像区域的所有坐标，还是区域边缘的坐标，您都可以获得边界坐标：

```
% x-coordinates of the region are in the vector x
x1 = min( x(:) );
x2 = max( x(:) );
% y-coordinates of the region are in the vector y
y1 = min( y(:) );
y2 = max( y(:) ); 
```

在对所有字母执行上述过程之后，您可以一个接一个地分离字母，但是如果您想分离出字母的连接区域，则必须检查字母边界矩形的重叠。

# php - 在php中动态添加li和ul标签

> ID：15699864
> 
> 赞同：0
> 
> 时间：2013-03-29T08:33:05.813
> 
> 标签：php, dynamic-list

我想编写一个代码，用户可以动态轻松地制作菜单，就像他们想要的子菜单一样......我的代码的一部分是动态制作 li 和 ul 标签。有一个带有一个 li 的 ul，用户将使用两个复选框向其中添加更多内容。其中一个在 li 的右侧，另一个在底部。if the user checked the right one it means that they want to make a ul for that li ( and just like I said the added li should have two checkboxes too) and when choosing bottom one it will add another li to the li (they are在唯一的 ul 标签中），用户可以根据需要为任何部分添加。但我不知道如何添加这些，直到用户点击取消按钮。我是php新手，我已经在这部分停留了好几天！代码是这样的：

```
<?php
echo  "<form action=\"index.php\" method=\"post\">";
echo "<input type=\"submit\" id=\"box4\" value=\"cancel\" name=\"cancel\">";
echo"<ul>";
echo"<li>";
echo"<input type=\"checkbox\" size=\"10\" id=\"box1\" name=\"right\">";
echo"</li>";
echo"<input type=\"checkbox\" size=\"10\" id=\"box2\" name=\"bottom\"></li>";
echo "</ul>";
echo "<input type=\"submit\" id=\"box3\" value=\"submit\" name=\"submit\">";
echo "</form>";

if(isset($_POST[$submit]) 
if(isset($_POST[$right])
dynamically create a ul (and a li in it with two checkboxes) for that li
if(isset ($_POST[bottom])
dynamically add a li with two chekboxes for that ul, under that existing li
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:09:41.387

虽然任何支持复选框的 javascript 树插件都应该可以工作。[jQuery 树](https://github.com/daredevel/jquery-tree)。它可以从 json 或 li/ul 树生成树结构。当然，它需要将 jquery 包含到您的页面中。

# sql - 在 sybase 中使用自我加入进行更新

> ID：15699878
> 
> 赞同：1
> 
> 时间：2013-03-29T08:34:04.457
> 
> 标签：sql, sybase

我有一张如下表

```
COAR_ID COCE_ID COCI_TYPE BRKR_NM  AGNCY_NM
123      123      P        abc
123      231      G                 def
123      331      G                 ghi 
```

我想为 COCI_TYPE=P 更新 AGNCY_NM 其中 max(COCE_ID) 和 COCI_TYPE='G'

所以输出应该是

```
COAR_ID COCE_ID COCI_TYPE BRKR_NM  AGNCY_NM
123      123      P        abc      ghi
123      231      G                 def
123      331      G                 ghi 
```

我使用以下更新查询

```
UPDATE Table
   SET
       AGNCY_NM = BB.AGNCY_NM
      ,UPDT_NBR = 3
    FROM
       Table AA
      ,Table BB
   WHERE
      AA.COAR_ID=BB.COAR_ID
      AND AA.COCI_TYPE='P'
      AND BB.AGNCY_NM <> ''
      AND AA.UPDT_NBR <> 3
      AND BB.COCE_ID=(SELECT MAX(CC.COCE_ID) FROM Table CC WHERE CC.COAR_ID=BB.COAR_ID ) 
```

它按预期工作，但我不想再次使用同一张表，因为它可能会导致性能问题。

更新专栏有更好的解决方案吗？

谢谢， 迪拉吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:32:14.053

试试这个方法：

```
UPDATE TAB
   SET
       AGNCY_NM = BB.AGNCY_NM
      ,UPDT_NBR = 3
    FROM
       TAB BB
   WHERE
      TAB.COAR_ID=BB.COAR_ID
      AND TAB.COCI_TYPE='P'
      AND BB.AGNCY_NM <> ''
      AND TAB.UPDT_NBR <> 3
      AND BB.COCE_ID=(SELECT MAX(CC.COCE_ID) FROM TAB CC WHERE CC.COAR_ID=BB.COAR_ID ) 
```

# jquery - 我如何根据动态创建的下拉子项在更改上附加文本框

> ID：15699879
> 
> 赞同：0
> 
> 时间：2013-03-29T08:34:04.673
> 
> 标签：jquery

我想在选择子下拉计数时添加子文本框。我尝试了 jsfiddle 上的单独代码，该代码正在运行[http://jsfiddle.net/hs7t8/](http://jsfiddle.net/hs7t8/)。有两个下拉列表是在客人选择下拉菜单上创建的。它会在单击添加房间按钮时动态生成两个下拉菜单。第一个是成人，第二个是儿童。在子下拉列表的选择中，我想根据子下拉列表的选择添加文本框。但它没有添加到页面。请帮助我完成[http://jsfiddle.net/pYRj3/1/上的运行代码](http://jsfiddle.net/pYRj3/1/)

```
$('#guestsRoomsSelect').change(function () {

        if ($(this).val() === '0') {
               var $var2 = '<div id="dropdown2_ ' + (counter) + ' " class="class1"> <div class="wrapadults" style="float:left"> <label class="lbl_sm" style="font-size: 0.75em" for="adults">Adults</label>'
                $var2 = $var2 + '<br/><span> <span>     <select id="adults" class="t_adults" style="margin-left:7px;margin-right:7px; border-right: 0.5px solid #FFFFFF;">      <option value="1">1</option>        <option value="2" selected="selected">2</option>'
                $var2 = $var2 + '<option value="3">3</option>       <option value="4">4</option>        <option value="5">5</option>        <option value="6">6</option>        <option value="7">7</option>'
                $var2 = $var2 + '<option value="8">8</option>       <option value="9">9</option>        <option value="10">10</option>      </select>     </span>       </span>  </div>'
                $var2 = $var2 + '<div class="children" > <label class="lbl_sm" style="font-size: .75em;" for="children">Children</label><br/> <span>  <select id="hc_f_children" class="hc_evt_children " style="border-right: 0.5px solid #FFFFFF;">'
                $var2 = $var2 + '<option value="0" selected="selected">0</option> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option>'
                $var2 = $var2 + '<option value="4">4</option> </select> </span>  </div>   </div>';
                $("#Addition").prepend('<fieldset id="' + counter + '" data-index="' + index + '">' + $var2 + '</fieldset>');
                counter = counter + 1;
                index++;

                $('#roomconfig').show(300);

        }
        else if ($(this).val() === '1-1' || $(this).val() === '3-1' || $(this).val() === '4-1' || $(this).val() === '2-2' || $(this).val() === '2-1') {

          $('#roomconfig').hide(300);

            $('#Addition fieldset :first').remove();  
        } });

    var forage = 0;
    $(".addRoom").click(function () {
        // on add room event

        var $var1 = '<div id="dropdown2_ ' + (counter) + ' " class="class1"> <div class="wrapadults" style="float:left"> '
        $var1 = $var1 + '<span> <span>      <select id="adults" class="t_adults" style="margin-left:7px;margin-right:7px; border-right: 0.5px solid #FFFFFF;">      <option value="1">1</option>        <option value="2" selected="selected">2</option>'
        $var1 = $var1 + '<option value="3">3</option>       <option value="4">4</option>        <option value="5">5</option>        <option value="6">6</option>        <option value="7">7</option>'
        $var1 = $var1 + '<option value="8">8</option>       <option value="9">9</option>        <option value="10">10</option>      </select>     </span>       </span>  </div>'
        $var1 = $var1 + '<div class="children" > <span>  <select id="hc_f_children_' + forage + '" class="hc_evt_children " style="border-right: 0.5px solid #FFFFFF;" onselect="getIdvalue()">'
        $var1 = $var1 + '<option value="0" selected="selected">0</option> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option>'
        $var1 = $var1 + '<option value="4">4</option> </select> </span>  </div> <div id="chileage_'+forage+'" class="ch"></div>  </div>'
        $var1 = $var1 + '<div class="btnrmv" id="' + counter + '" > <a class="removeRoom " style=" width:30px; height:0px; margin:0px;left:200px;position:relative; top:-30px; background-image:none; color:#b11500;font-weight:normal;font-size:0.77em;" href="javascript:void(0);">remove<span></span> </a> </div>';

        $("#Addition").append('<fieldset id="' + counter + '" data-index="' + index + '"' + $var1 + '</fieldset>');

        counter++;
        index++;
        forage++;
        // for remove element
        $(".btnrmv").click(function () {
            $("#roomconfig fieldset#" + this.id).remove();
            counter--;

        });

        var Idvalue = null;
        // Add childage textbox
        function getIdvalue() {
            Idvalue = $('.hc_evt_children').attr("id");

        }

        $(Idvalue).change(function () {

            var index1 = $(".ch input").size();
            var requested = parseInt($(".hc_evt_children").val(), 5);

            if (requested > index1) {
                for (i = index1; i < requested; i++) {
                    var $ctrl = $('<input/>').attr({ type: 'text', name: 'text', value: '' });
                    $("#chileage_" + forage).append($ctrl);
                }
            }
            else if (requested < index1) {
                var x = requested - 1;
                $("#chileage_ input:gt(" + x + ")").remove();
            }
        });

    }); 
```

```
 <div class="btnWrap" style="clear:both;border-bottom: 0.5px solid #FFFFFF;"> 
```

添加房间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:27:35.580

创建标记时不要使用属性 onselect。它不会着火。

相反，在添加子下拉列表后，将更改事件绑定到下拉列表。On Need More Room selected: **$('#hc_f_children').bind('change', function() { // 你的代码在这里，它添加了那些文本框 });**

在按下添加房间时： **$('#hc_f_children_'+ forage).bind('change', function() { // 你的代码在这里，它添加了那些文本框 });**

# asp.net - 如何在 GridView 中显示搜索数据？

> ID：15699886
> 
> 赞同：1
> 
> 时间：2013-03-29T08:34:49.973
> 
> 标签：asp.net, linq, gridview

**我的 GridViews 连接到它们各自的 LinqDataSource(LinqDataSourceMale & LinqDataSourceFemale) 是**

```
<asp:GridView ID="GridViewMale" runat="server" AllowPaging="True" AutoGenerateColumns="False" BackColor="White" BorderColor="#CCCCCC" BorderStyle="None" BorderWidth="1px" CellPadding="4" DataKeyNames="ID" ForeColor="Black" GridLines="Horizontal" PageSize="5" Width="692px" DataSourceID="LinqDataSourceMale">
            <Columns>
                <asp:ImageField DataImageUrlField="Image" NullImageUrl="images/bullet.png" ReadOnly="True">
                </asp:ImageField>
                <asp:BoundField DataField="Age" HeaderText="Age" SortExpression="Age" />
                <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
                <asp:BoundField DataField="Education" HeaderText="Education" SortExpression="Education" />
                <asp:BoundField DataField="CurrentStatus" HeaderText="CurrentStatus" SortExpression="CurrentStatus" />
                <asp:BoundField DataField="Height" HeaderText="Height" SortExpression="Height" />
                <asp:BoundField DataField="Complexion" HeaderText="Complexion" SortExpression="Complexion" />
                <asp:BoundField DataField="Caste" HeaderText="Caste" SortExpression="Caste" />
                <asp:BoundField DataField="Group" HeaderText="Group" SortExpression="Group" />
            </Columns>
            <FooterStyle BackColor="#CCCC99" ForeColor="Black" />
            <HeaderStyle BackColor="#333333" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="White" ForeColor="Black" HorizontalAlign="Center" />
            <SelectedRowStyle BackColor="#CC3333" Font-Bold="True" ForeColor="White" />
            <SortedAscendingCellStyle BackColor="#F7F7F7" />
            <SortedAscendingHeaderStyle BackColor="#4B4B4B" />
            <SortedDescendingCellStyle BackColor="#E5E5E5" />
            <SortedDescendingHeaderStyle BackColor="#242121" />
        </asp:GridView>
        <asp:LinqDataSource ID="LinqDataSourceMale" runat="server" ContextTypeName="MB.BerouDataContext" EntityTypeName="" TableName="Males">
        </asp:LinqDataSource>
        <asp:GridView ID="GridViewFemale" runat="server" AllowPaging="True" AutoGenerateColumns="False" BackColor="White" BorderColor="#CCCCCC" BorderStyle="None" BorderWidth="1px" CellPadding="4" DataKeyNames="ID" ForeColor="Black" GridLines="Horizontal" PageSize="5" Width="693px" DataSourceID="LinqDataSourceFemale">
            <Columns>
                <asp:ImageField DataImageUrlField="Image" >
                </asp:ImageField>
                <asp:BoundField DataField="Age" HeaderText="Age" SortExpression="Age" />
                <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
                <asp:BoundField DataField="Education" HeaderText="Education" SortExpression="Education" />
                <asp:BoundField DataField="CurrentStatus" HeaderText="CurrentStatus" SortExpression="CurrentStatus" />
                <asp:BoundField DataField="Height" HeaderText="Height" SortExpression="Height" />
                <asp:BoundField DataField="Complexion" HeaderText="Complexion" SortExpression="Complexion" />
                <asp:BoundField DataField="Caste" HeaderText="Caste" SortExpression="Caste" />
                <asp:BoundField DataField="Group" HeaderText="Group" SortExpression="Group" />
            </Columns>
            <FooterStyle BackColor="#CCCC99" ForeColor="Black" />
            <HeaderStyle BackColor="#333333" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="White" ForeColor="Black" HorizontalAlign="Center" Wrap="True" />
            <SelectedRowStyle BackColor="#CC3333" Font-Bold="True" ForeColor="White" />
            <SortedAscendingCellStyle BackColor="#F7F7F7" />
            <SortedAscendingHeaderStyle BackColor="#4B4B4B" />
            <SortedDescendingCellStyle BackColor="#E5E5E5" />
            <SortedDescendingHeaderStyle BackColor="#242121" />
        </asp:GridView>
        <asp:LinqDataSource ID="LinqDataSourceFemale" runat="server" ContextTypeName="MB.BerouDataContext" EntityTypeName="" TableName="Females">
        </asp:LinqDataSource> 
```

**我的 SearchClick 事件代码是：**

```
 protected void ButtonSearch_Click(object sender, EventArgs e)
    {
        using(BerouDataContext Data = new BerouDataContext())
        {
              if (DropDownListGender.SelectedItem.Text == "Male")
              {

                  int age = Convert.ToInt32(DropDownListAge.Text);
                  string education = DropDownListEducation.Text.ToString();
                  string maritalstatus = DropDownListMaritalStatus.Text.ToString();
                  string caste = DropDownListCaste.Text.ToString();
                  string city = DropDownListCity.ToString();

                  var SearchResultBoys = Data.Males.Where(tan =>
                      (tan.Age == age)
                      && (tan.Education.Contains(education))
                      && (tan.Group.Contains(maritalstatus))
                      && (tan.Caste.Contains(caste)));

                  GridViewMale.DataSourceID = "";
                  GridViewMale.DataSource = SearchResultBoys;
                  GridViewMale.DataBind();
              }
              else if (DropDownListGender.SelectedItem.Text == "Female")
              {
                  int age = Convert.ToInt32(DropDownListAge.Text);
                  string education = DropDownListEducation.Text.ToString();
                  string maritalstatus = DropDownListMaritalStatus.Text.ToString();
                  //var religion = DropDownListReligion.Text.ToString();
                  string caste = DropDownListCaste.Text.ToString();
                  string city = DropDownListCity.ToString();

                  var SearchResultGirls = Data.Females.Where(tan =>
                      (tan.Age == age)
                      && (tan.Education.Contains(education))
                      && (tan.Group.Contains(maritalstatus))
                      && (tan.Caste.Contains(caste)));

                  GridViewFemale.DataSourceID = "";
                  GridViewFemale.DataSource = SearchResultGirls;
                  GridViewFemale.DataBind();

              }
        }
    } 
```

我无法在gridview中显示数据，searchClickEvent后gridview不出现，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:56:53.547

我认为您可能需要重新初始化您的 LinqDataSource 数据源而不是 gridview

看看[这个](http://weblogs.asp.net/scottgu/archive/2007/07/16/linq-to-sql-part-5-binding-ui-using-the-asp-linqdatasource-control.aspx)教程和[这个](http://forums.asp.net/t/1583858.aspx/1)线程

# c# - 获取错误 Error-Server 标记不能包含 <% ... %> 结构

> ID：15699895
> 
> 赞同：5
> 
> 时间：2013-03-29T08:35:33.993
> 
> 标签：c#, javascript, jquery, asp.net

```
<input id="tbxPopupCode" type="text" runat="server" value="<%= Request.QueryString["code"].Replace("-"," ") %>" /> 
```

我收到一个错误：

> 服务器标签不能包含 <% ... %> 结构

我需要替换值`Request.QueryString["code"]`并绑定到文本框值。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-29T08:40:12.720

实际上，异常信息很清楚：你不能拥有`runat="server"`and `<%= %>`。

有一些解决方法（例如`<%# %>`），但为什么不简单地设置代码隐藏的值`this.tbxPopupCode.Value = ...`呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T19:57:46.237

我知道它不适用于这个特定问题，但是当我在 PlaceHolder 控件中包含 HTML 标记属性的构造时，我也收到了这个错误。

# jquery - 尝试使用 json 从 Web 服务返回数据时出错

> ID：15699899
> 
> 赞同：0
> 
> 时间：2013-03-29T08:35:54.953
> 
> 标签：jquery, asp.net, json

我收到“内部服务器错误”，试图从 json 调用 Web 服务方法。

这是Web服务代码：

```
Imports System.Web.Services
Imports System.Web.Services.Protocols
Imports System.ComponentModel

<System.Web.Script.Services.ScriptService()> _
<System.Web.Services.WebService(Namespace:="http://tempuri.org/")> _
<System.Web.Services.WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<ToolboxItem(False)> _
Public Class WebService1
Inherits System.Web.Services.WebService

    <WebMethod()> _
    Public Function HelloWorld() As String
       Return "Hello World"
    End Function

End Class 
```

调用页面的标记和脚本如下：

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="WebForm1.aspx.vb" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>WebForm1</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script >
        $(document).ready(function ()
        {
            // Add the page method call as an onclick handler for the div.
            $("#Result").click(function ()
            {
                $.ajax({
                    type: "POST",
                    url: "WebService1.asmx/HelloWorld",
                    data: "{}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    error: function(xhr, status, error) 
                    {
                        $("#Result").html("xhr: " + xhr.text + "</br>Status: " + status + "</br>Error: " + error);
                    },
                    success: function (data)
                    {
                        $("#Result").html(data.d);
                    }
                });
            });
        });
    </script>
</head>
<body>
    <div id="Result">Click here ...</div><br/>
    <input id="KenID" />

</body>
</html> 
```

我不确定要检查什么才能使这个简单的应用程序正常工作。

会欣赏一些提示。

亚采克

# java - WebDriver 中不支持复合类名错误

> ID：15699900
> 
> 赞同：11
> 
> 时间：2013-03-29T08:36:00.150
> 
> 标签：java, css, selenium, webdriver, selenium-webdriver

我有一种方法来计算元素的数量`divs`并返回它们的数量。

```
 public int getNumberOfOpenBets() {

     openBetsSlip = driver.findElement(By.id("form_open_bets"));
     openBets = openBetsSlip.findElements(By.className(" cashout_noCash"));
     return openBets.size();
 } 
```

那是页面来源

```
<form id="form_open_bets" method="post" name="form_open_bets">
    <input type="hidden" value="" name="action">
    <input type="hidden" value="" name="bet_id">
    <input type="hidden" value="" name="cashout_price">
    <input id="target_page" type="hidden" value="" name="target_page">
    <div id="By.id" class="slipWrapper ">
        <div id="openBets_header"></div>
        <div id="cashout_1626" class=" cashout_noCash">
            <div id="cashout_1625" class=" cashout_noCash">
                <div id="cashout_1615" class=" cashout_noCash">
                    <div id="cashout_1614" class=" cashout_noCash">
                        <div id="cashout_1613" class=" cashout_noCash">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form> 
```

> *WebDriver 抛出以下错误：不支持复合类名。考虑搜索一个类名并过滤结果或使用 CSS 选择器。*

```
org.openqa.selenium.InvalidSelectorException: Compound class names are not supported. Consider searching for one class name and filtering the results or use CSS selectors.
For documentation on this error, please visit: http://seleniumhq.org/exceptions/invalid_selector_exception.html
Build info: version: '2.31.0', revision: '1bd294d185a80fa4206dfeab80ba773c04ac33c0', time: '2013-02-27 13:51:26'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.7.0_17'
Driver info: driver.version: unknown
    at org.openqa.selenium.By.className(By.java:131)
    at elements.betslip.Betslip.getNumberOfOpenBets(Betslip.java:136)
    at testSomething(SomethingTest.java:117)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

编辑：

事实证明`WerbDriver`，类名中不支持空格，天哪。

你们能帮我`CSS`在这种情况下使用选择器来查找元素吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-29T12:07:32.793

这完全符合预期。如果您的类名包含空格，WebDriver 会将其视为“复合选择器”。您可以删除`By.className()`定位器中的空间，它仍然可以找到您正在寻找的元素；或者你可以通过 CSS 选择器来查找，使用类似的东西`By.cssSelector(".cashout_noCash")`，它为类似的功能提供了更大的灵活性。这正是异常消息所说的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-30T10:38:17.787

您可以通过在其中任何一个之间不留空隙来包含复合类名称选择器。

例如，如果您`div`是：

```
<div class="k-calendar-container k-popup k-group k-reset"></div> 
```

那么你的`selector`将是：

```
driver.findElement(By.cssSelector("k-calendar-container.k-popup.k-group.k-reset")); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-21T20:48:10.107

如果有人需要，这是一个 Ruby 答案。我得出的结论是，上面适用于 java 的一些解决方案要么不适用于我的机器，要么根本不适用于 Ruby（尽管我不确定是哪种情况）。

如果 html 是：

```
<a class="button orange-bg" href="http://www.MyCarmelHome.com" target="_blank">
     access web portal
</a> 
```

查找此元素的格式为：

```
logInBtn = driver.find_element(:css, ".button.orange-bg") 
```

我使用它是因为以下方法不起作用：

1.  用“。”替换空格 并通过 css 选择器查找（您需要在前面放一个句点）。

2.  删除复合类名中的空格并使用类名定位器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T15:59:01.123

```
driver.findElements(By.cssSelector(".cashout_noCash")); 
```

# git - 设置为默认合并分支

> ID：15699901
> 
> 赞同：0
> 
> 时间：2013-03-29T08:36:06.220
> 
> 标签：git

我有一个`master`总是合并的分支`development`。是否可以设置`development`为默认合并分支？（保存几种类型）。而不是键入：

```
$ (master) git merge development 
```

我只需要

```
$ (master) git merge 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:44:28.457

不，不可能使用`git`选项。

要考虑的一个选项是使用一种解决方法，为您的 shell 定义一个别名，例如

```
alias 'gitmd'='git merge dev' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:53:41.890

这可能不是您想做的事情，但您*可以*将本地开发分支设置为上游到 master

```
git branch -u development master 
```

然后将上游设置为默认合并

```
git config merge.defaultToUpstream true 
```

然后`git merge`主人会做你想做的事。但是请注意，上面的分支命令也会改变 push 和 pull 的含义。

# php - 如何在一个 ajax 块中执行多个 ajax 查询

> ID：15699904
> 
> 赞同：0
> 
> 时间：2013-03-29T08:36:15.513
> 
> 标签：php, jquery, sql, ajax

我正在做一个项目，我在其中使用 ajax、jquery、php 和 sql 来操作数据。

```
function fetchComments(commentOnId, commentOn){
if(!isNaN(commentOnId) && commentOnId >=0){
    $.ajax({
        type: 'POST',
        dataType: "json",
        url: 'get_comments.php',
        data: 'commentOnId='+commentOnId+'&commentOn=blogArticle',
        success: function(data){},
        error: function(){
        }
    }); 
}
} 
```

上面的函数使用传递给它的“commentOnId & commentOn”以 json 格式获取对该特定博客 ID 的所有评论。我的评论表中的结果/行如下。id commentOnId commentOn commentText authorId created

我想要做的是获取这些行的值，并在同一个函数中运行另一个 ajax 查询，我会将 authorId 传递给一个 php 文件，该文件从名为 authorDetails 的表中返回作者的全名，并使用 id 值运行另一个 ajax 查询以返回对此评论 ID 的所有回复，如果没有回复，则返回 null。最后用结果更新一个 html div ''。

拜托，我将感谢您的快速全面帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:41:43.260

如果您不希望在用户迭代的基础上获得其他详细信息，则可以使用 SQL 联接在一个请求中获取所有需要的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:48:29.793

如果我是你，我会在一个 Ajax 调用中获取所有内容，而不是执行另一个 Ajax 调用。

如果您想要多个 Ajax 调用，您可以执行以下操作。

```
 function fetchComments(commentOnId, commentOn){
        if(!isNaN(commentOnId) && commentOnId >=0){
            $.ajax({
                type: 'POST',
                dataType: "json",
                url: 'get_comments.php',
                data: 'commentOnId='+commentOnId+'&commentOn=blogArticle',
                success: function(data){
                    $.ajax({
                        type :'post',
                        url : 'get_auth_details.php',
                        data : 'authorId=' + data.authorId,
                        success : function(data) {
                            Update div logic goes here
                        }
                    }
               },
               error: function(){
               }
           }); 
       }
   } 
```

# java - PHP PDO 批量更新 - 存在吗？

> ID：15699906
> 
> 赞同：1
> 
> 时间：2013-03-29T08:36:32.533
> 
> 标签：java, php, jdbc, pdo

我正在寻找与 Java 中的 jdbc 驱动程序类似的方式，以在 PHP 中执行一批更新。

在 jdbc 中有一个 API `PreparedStatement.executeBatch()`，它在一次往返数据库的过程中执行整个语句。

PHP PDO 是否具有类似的 API，如果没有，是否启动事务、执行更新然后提交将执行相同的效果，即在一次往返 DB 中执行所有更新，或者每次更新将往返 DB 并立即执行声明（虽然其他人看不到，因为它在交易中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:54:54.923

PHP PDO 没有批量执行查询。

在一个事务中运行许多插入和更新通常会大大提高执行速度。如果您在数据库上进行批处理作业，您应该在事务中批量运行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:03:53.760

Mysql中没有“批量更新”之类的东西。只有 SQL 查询。只要您可以在一次查询中进行更新，您的更新将在一次往返中完成。否则会有很多。无论使用什么 API。

说到单 SQL 查询，有 2 种可能的方式

1.  WHERE 中的 CASE 语句
2.  使用 ON DUPLICATE UPDATE 语句进行 INSERT(!) 查询的巧妙技巧。这实际上会更新您的数据。

# compiler-construction - 野牛中的多个属性

> ID：15699911
> 
> 赞同：1
> 
> 时间：2013-03-29T08:37:04.790
> 
> 标签：compiler-construction, semantics, bison, lexical-analysis

我在野牛中进行语义分析，我想使用与令牌关联的多个属性。我的代码的相关部分是：

```
%union semrec
{
    int Type;
    char *id;

}

%start prog

%token <id>  tIDENT 
```

在这里，我只能使用带有 tIDENT 令牌的“id”属性。我还想将“类型”属性与 tIDENT 令牌相关联。为此，我尝试了以下方法：

```
 %token <id>  tIDENT
 %token <Type>  tIDENT 
```

但它给了我一个令牌 tIDENT 的重新声明警告。我还尝试了以下方法：

```
 %token <id> <Type> tIDENT 
```

它也没有工作。我能做些什么？我认为这只是一个小语法问题。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:43:06.453

你不能这样做：你必须以`%union`这样一种方式定义你的，即所有具有多个“属性”的符号都有一个`struct`来定义所有这些“属性”。就像是

```
%union
{
  struct
  {
    int type;
    char *id;
  } type_id;
}
%type <type_id> tIDENT 
```

并使用`$1.type`或`$1.id`等。

Note however that I very much doubt that you're doing the right thing. Chances are high that you will need an AST (Abstract Syntax Tree). You should look for information about that.

# objective-c - 需要 UIPickerView 的解决方案

> ID：15699912
> 
> 赞同：0
> 
> 时间：2013-03-29T08:37:09.310
> 
> 标签：objective-c, uipickerview

有件事，我在我的视图中有分段控制，当用户在它之间切换时，我希望我`UIPickerView`改变它的行（例如`SegmentedControl`索引 0，我的行是厘米和千克，当索引是 1 时它变为英寸磅）。

所以，我想了 2 种方法来实现这一点，首先 - 我可能已经添加 2 `UIPickerView`，所以我可以在需要时将任何一个设置为隐藏，但我猜选择器视图的默认方法不希望与 2 个选择器一起使用。或者，是否有可能，当用户点击分段控件时，我必须动态更改值。

我应该怎么做才能达到目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:42:00.527

当您更改段控制值时尝试使用此选项更改选择器视图中的选定行。

```
[pickerView selectRow:n inComponent:0 animated:YES]; 
```

如果要更改选择器视图组件，请使用不同的值重新加载选择器视图。

```
[pickerView reloadAllComponents]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:48:30.010

是的，您可以在段值更改时更改值

使用下面的代码

选择段 0 时

```
[Array removeAllObjects];
[Array addObject:@"centimeter"];
[Array addObject:@"kilogram"];
[pickerVw reloadAllComponents]; 
```

选择段 1 时

```
[Array removeAllObjects];
[Array addObject:@"inches"];
[Array addObject:@"pound"];
[pickerVw reloadAllComponents]; 
```

这里数组是您的数组，您可以从中获取pickerview的原始值，而pickerVw是您的UIPickerView对象

# android - 如何知道点击了哪个按钮？

> ID：15699914
> 
> 赞同：0
> 
> 时间：2013-03-29T08:37:26.817
> 
> 标签：android

ListView的每一项都有两个按钮。我想控制Activity控件。我应该在Activity中操作，不能直接将监听设置为按钮。

所以我设置了这个代码：

```
listView.setOnItemClickListener(new OnItemClickListener() {

@Override
public void onItemClick(AdapterView<?> arg0, View view,
int position, long id) {
// TODO Auto-generated method stub
}
}); 
```

如何知道单击了项目的哪个按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:45:31.727

只需在 xml-layout 中为这些按钮设置不同的 id

```
@Override
public void onItemClick(AdapterView<?> arg0, View view,
int position, long id) {
    switch (view.getId) {
    case R.id.btn1: ...
    case R.id.btn2: ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:45:57.497

你必须在适配器类中处理它。这将是最合适的方式所以制作你的自定义适配器，然后在你的 getView 方法中尝试这种方式：

```
 public View getView(final int position, View convertView,ViewGroup parent) 
    {
       if(convertView == null)
       {
            LayoutInflater inflater = getLayoutInflater();
            convertView  = (LinearLayout)inflater.inflate(R.layout.YOUR_LAYOUT, null);
       }

       Button Button1= (Button)  convertView.findViewById(R.id.BUTTON1_ID);
       Button Button2= (Button)  convertView.findViewById(R.id.BUTTON2_ID);

       Button1.setOnClickListener(new OnClickListener() 
       { 
           @Override
           public void onClick(View v) 
           {
               // Your code that you want to execute on this button click
           }

       });
     Button2.setOnClickListener(new OnClickListener() 
       { 
           @Override
           public void onClick(View v) 
           {
               // Your code that you want to execute on this button click
           }

   });

   return convertView ;
} 
```

# java - 如何使此面板向面板中间缩放？

> ID：15699916
> 
> 赞同：3
> 
> 时间：2013-03-29T08:37:48.273
> 
> 标签：java, swing

我有一个 JPanel，这里有代码。当我用鼠标滚轮滚动时，我希望面板向面板中的中心放大。目前，每当我用鼠标滚轮放大/缩小时，图像左上角的角落都会保持在同一个位置。我很难找到正确的算法。

为了放大图片，代码使用 AffineTransform 对象根据鼠标滚轮的移动增加或减少的双精度值缩放图像。

还增加了复杂性的是，图像也可以在面板周围单击和拖动。如果单击并拖动它，则缩放仍必须放大 PANEL 的中心，而不是实际图像的中心。

再一次，缩放应该相对于当前可见区域的中心点进行。也就是说，当缩放发生时，视图中心的点应该保持固定。

这是代码（它是可执行的）：

```
package clientgui;

import java.awt.*;

import javax.imageio.ImageIO;
import javax.swing.*;

import java.awt.event.*;
import java.awt.geom.*;
import java.awt.image.BufferedImage;
import java.net.URL;

import javax.swing.border.TitledBorder;

public class MoveImageExample extends JFrame {
    ShowCanvas canvas;

    public MoveImageExample() throws Exception {
        super();
        Container container = getContentPane();
        canvas = new ShowCanvas(
                "http://cdn.smosh.com/sites/default/files/bloguploads/funny-iphone-5-bruce-lee.jpg");
        container.setPreferredSize(new Dimension(canvas.getWidth(), canvas
                .getHeight()));
        System.out.println("width = " + canvas.getWidth() + " height = "
                + canvas.getHeight());
        container.add(canvas);
        pack();
        setVisible(true);
    }

    public static void main(String arg[]) throws Exception {
        new MoveImageExample();
    }
}

@SuppressWarnings("serial")
class ShowCanvas extends JPanel {
    int imageX = 0, imageY = 0;
    int lastMouseX = 0, lastMouseY = 0;
    int centerX = 225;
    int centerY = 225;
    int canvasWidth = 450;
    int canvasHeight = 450;
    double scaleFactor = 1.0;
    boolean firstMouseDrag = true;
    BufferedImage image;

    public ShowCanvas(String imagePath) throws Exception {
        setBackground(Color.white);
        MouseMotionHandler mouseHandler = new MouseMotionHandler();
        addMouseMotionListener(mouseHandler);
        addMouseListener(mouseHandler);
        addMouseWheelListener(mouseHandler);
        URL url = new URL(imagePath);
        Image rawImage = ImageIO.read(url);
        image = new BufferedImage(rawImage.getWidth(this),
                rawImage.getHeight(this), BufferedImage.TYPE_INT_ARGB);
        setSize(image.getWidth(), image.getHeight());
        Graphics2D g2 = image.createGraphics();
        g2.drawImage(rawImage, imageX, imageY, this);
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2D = (Graphics2D) g;
        g2D.setColor(Color.gray);
        g.fillRect(0, 0, image.getWidth(), image.getHeight());
        AffineTransform transformer = new AffineTransform();
        // translate the image back (using new scale factor)
        transformer.scale(scaleFactor, scaleFactor); // scale by 2x on x and y
                                                        // axes.
        transformer.translate(imageX / scaleFactor, imageY / scaleFactor);
        g2D.drawImage(image, transformer, this);
    }

    class MouseMotionHandler extends MouseMotionAdapter implements
            MouseListener, MouseWheelListener {
        public void mousePressed(MouseEvent e) {
            lastMouseX = e.getX();
            lastMouseY = e.getY();
        }

        public void mouseDragged(MouseEvent e) {
            int xDiff = e.getX() - lastMouseX;
            int yDiff = e.getY() - lastMouseY;
            imageX = imageX + xDiff;
            imageY = imageY + yDiff;
            lastMouseX = e.getX();
            lastMouseY = e.getY();
            repaint();
        }

        public void mouseWheelMoved(MouseWheelEvent e) {
            int notches = e.getWheelRotation();
            scaleFactor = scaleFactor + notches / 10.0;
            if (scaleFactor < 0.5) {
                scaleFactor = 0.5;
            } else if (scaleFactor > 3.0) {
                scaleFactor = 3.0;
            }
            repaint();
        }

        public void mouseReleased(MouseEvent e) {
        }

        public void mouseEntered(MouseEvent e) {
        }

        public void mouseExited(MouseEvent e) {
        }

        public void mouseClicked(MouseEvent e) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T09:22:44.137

因此，基本思想是，当您更改比例时，而不是允许从宽度/高度中添加/减去整个更改，您需要将其划分为位置和大小......

```
public void mouseWheelMoved(MouseWheelEvent e) {
    int notches = e.getWheelRotation();

    // Get the current/old size...    
    double oldWidth = image.getWidth() * scaleFactor;
    double oldHeight = image.getHeight() * scaleFactor;

    scaleFactor = scaleFactor + notches / 10.0;
    if (scaleFactor < 0.5) {
        scaleFactor = 0.5;
    } else if (scaleFactor > 3.0) {
        scaleFactor = 3.0;
    }
    // Get the new size
    double newWidth = image.getWidth() * scaleFactor;
    double newHeight = image.getHeight() * scaleFactor;

    // Calculate the difference (and divide it by 2)
    double difWidth = (oldWidth - newWidth) / 2;
    double difHeight = (oldHeight - newHeight) / 2;

    // Add it to the image position...
    imageX += difWidth;
    imageY += difHeight;

    revalidate();
    repaint();
} 
```

**更新了工作示例**

好的，所以基本想法是您正在处理图像所在的虚拟空间。这个虚拟空间有一个大小（组件大小 x 比例因子）。这允许您将虚拟空间置于实际空间的中心。

之后，您只需要计算虚拟空间（在真实空间内）的 x/y 偏移量和图像的虚拟位置。

在这个例子中，我删除了`AffineTransformation#setLocation`有利于生成图像的缩放实例，它只是让放置图像更容易。

```
import java.awt.*;
import javax.imageio.ImageIO;
import javax.swing.*;
import java.awt.event.*;
import java.awt.geom.*;
import java.awt.image.BufferedImage;
import java.net.URL;

public class MoveImageExample extends JFrame {

    ShowCanvas canvas;

    public MoveImageExample() throws Exception {
        super();
        Container container = getContentPane();
        canvas = new ShowCanvas(
                        "http://cdn.smosh.com/sites/default/files/bloguploads/funny-iphone-5-bruce-lee.jpg");
        container.add(canvas);
        pack();
        setVisible(true);
    }

    public static void main(String arg[]) throws Exception {
        new MoveImageExample();
    }

}

@SuppressWarnings("serial")
final class ShowCanvas extends JPanel {

    int imageX = 0, imageY = 0;
    int lastMouseX = 0, lastMouseY = 0;
    int centerX = 225;
    int centerY = 225;
    int canvasWidth = 450;
    int canvasHeight = 450;
    double scaleFactor = 1.0;
    boolean firstMouseDrag = true;
    BufferedImage image;
    private BufferedImage scaled;

    public ShowCanvas(String imagePath) throws Exception {
        setBackground(Color.white);
        MouseMotionHandler mouseHandler = new MouseMotionHandler();
        addMouseMotionListener(mouseHandler);
        addMouseListener(mouseHandler);
        addMouseWheelListener(mouseHandler);
        URL url = new URL(imagePath);
        Image rawImage = ImageIO.read(url);
        image = new BufferedImage(rawImage.getWidth(this),
                        rawImage.getHeight(this), BufferedImage.TYPE_INT_ARGB);
        setSize(image.getWidth(), image.getHeight());
        Graphics2D g2 = image.createGraphics();
        g2.drawImage(rawImage, imageX, imageY, this);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension((int) (image.getWidth()), (int) (image.getHeight()));
    }

    protected BufferedImage getScaledInstance() {
        if (scaled == null) {
            int width = (int) (image.getWidth() * scaleFactor);
            int height = (int) (image.getHeight() * scaleFactor);
            scaled = new BufferedImage(width, height, image.getType());
            Graphics2D g2d = scaled.createGraphics();
            AffineTransform transformer = new AffineTransform();
            transformer.scale(scaleFactor, scaleFactor); // scale by 2x on x and y
            g2d.setTransform(transformer);
            g2d.drawImage(image, 0, 0, this);
            g2d.dispose();
        }
        return scaled;
    }

    public Dimension getVirtualSize() {
        return new Dimension(
                        (int)(getWidth() * scaleFactor), 
                        (int)(getHeight() * scaleFactor));
    }

    public Point getVirtualPoint(int x, int y) {
        return new Point(
                        (int)(x * scaleFactor),
                        (int)(y * scaleFactor));
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        Dimension vitualSize = getVirtualSize();
        int xOffset = (getWidth() - vitualSize.width) / 2;
        int yOffset = (getHeight() - vitualSize.height) / 2;

        Graphics2D g2D = (Graphics2D) g.create();
        g2D.setColor(Color.gray);
        g.fillRect(0, 0, image.getWidth(), image.getHeight());

        g2D.setColor(Color.GREEN);
        g2D.drawRect(xOffset, yOffset, vitualSize.width, vitualSize.height);
        g2D.setColor(Color.RED);
        g2D.drawLine(getWidth() / 2, 0, getWidth() / 2, getHeight());
        g2D.drawLine(0, getHeight() / 2, getWidth(), getHeight() / 2);

        Point virtualPoint = getVirtualPoint(imageX, imageY);
        System.out.println(virtualPoint);
        g2D.drawImage(getScaledInstance(), virtualPoint.x + xOffset, virtualPoint.y + yOffset, this);
        g2D.dispose();
    }

    class MouseMotionHandler extends MouseMotionAdapter implements
                    MouseListener, MouseWheelListener {

        public void mousePressed(MouseEvent e) {
            lastMouseX = e.getX();
            lastMouseY = e.getY();
        }

        public void mouseDragged(MouseEvent e) {
            int xDiff = e.getX() - lastMouseX;
            int yDiff = e.getY() - lastMouseY;
            imageX = imageX + xDiff;
            imageY = imageY + yDiff;
            lastMouseX = e.getX();
            lastMouseY = e.getY();
            repaint();
        }

        public void mouseWheelMoved(MouseWheelEvent e) {
            scaled = null;
            int notches = e.getWheelRotation();

            scaleFactor = scaleFactor + notches / 10.0;
            if (scaleFactor < 0.5) {
                scaleFactor = 0.5;
            } else if (scaleFactor > 3.0) {
                scaleFactor = 3.0;
            }

            repaint();
        }

        public void mouseReleased(MouseEvent e) {
        }

        public void mouseEntered(MouseEvent e) {
        }

        public void mouseExited(MouseEvent e) {
        }

        public void mouseClicked(MouseEvent e) {
        }

    }

} 
```

# mercurial - Mercurial hg ignore 无法正常工作

> ID：15699917
> 
> 赞同：4
> 
> 时间：2013-03-29T08:37:50.780
> 
> 标签：mercurial, hgignore

情况

```
$ cat .hgignore
.hgignore

$ hg status
M file1
M file2
M src/project.xml 
```

我不想追踪`project.xml`所以我跑

```
echo "project.xml" >> .hgignore 
```

结果是

```
$ cat .hgignore
.hgignore
project.xml

$ hg status
M .hgignore
M file1
M file2
M src/project.xml 
```

所以`.hgignore`即使它不应该被跟踪并且`project.xml`. 这是什么意思？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-29T09:52:41.210

你写了：

“ **M** src/project.xml”

这意味着它`src/project.xml`处于版本控制之下。已经在版本控制下的文件不能被忽略！该 `.hgignore`文件用于忽略未跟踪的文件（状态将显示“ **？** ”）。

您有两种解决方案可以忽略您的文件：

1.  您可以“ `hg forget`”文件，与“ `hg add`”相反（即告诉 Mercurial 不再跟踪此文件），或者
2.  `status/diff/commit` 您可以在配置文件中使用“<code>-X”选项作为默认选项`.hg/hgrc`，例如，

    [默认值]
    状态 = -X`<file>`
    差异 = -X`<file>`
    提交 = -X`<file>`

这将告诉 hg 不要将此文件包含在状态、差异和提交的使用中。

# asp.net - 更改下拉列表的 selectedindexchanged 上的标签文本

> ID：15699920
> 
> 赞同：0
> 
> 时间：2013-03-29T08:38:09.923
> 
> 标签：asp.net, data-binding, drop-down-menu

我需要根据下拉列表中选择的名称更改地址（下拉列表下方）...（它们都仅供一个用户使用）...！（我不知道为什么这一直说你的帖子似乎只是代码！！！！！！）

```
 public DataSet BindDropDownListToAUserAddress2()
    {
        UserFunctions objGetSession = new UserFunctions();
        string strSession = objGetSession.GetEmailFromSession();

        DataSet dsUserAddress = new DataSet();
        SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.AppSettings["ConnectionString"]);
        con.Open();
        string strQuery = "(SELECT FirstName +' '+  LastName as FullName, *  FROM AUserAddress inner join AState on AUserAddress.State_ID = AState.ID inner join ACountry on AUserAddress.Country_ID = ACountry.ID inner join AUser on AUserAddress.AUser_ID=AUser.ID where AUser.Email='" + strSession + "')";
        SqlCommand cmd = new SqlCommand(strQuery, con);
        using (SqlDataAdapter da = new SqlDataAdapter(cmd))
        da.Fill(dsUserAddress, "AUserAddress");
        con.Close();
        return dsUserAddress;
    }

 protected void ddlName_SelectedIndexChanged(object sender, EventArgs e)
    {
        DataSet dsUserAddress = objBindDDL.BindDropDownListToAUserAddress2();
        string strSession = objGetSession.GetEmailFromSession();
        ddlName.SelectedValue = "FullName";
        if (objBindDDL.BindDropDownListToAUserAddress2() != null && objBindDDL.BindDropDownListToAUserAddress2().Tables.Count > 0)
        {
            lblDisplayFirstName.Text = dsUserAddress.Tables["AUserAddress"].Rows[0]["FirstName"].ToString();
            lblDisplayLastName.Text = dsUserAddress.Tables["AUserAddress"].Rows[0]["LastName"].ToString();
            lblDisplayAddressLine1.Text = dsUserAddress.Tables["AUserAddress"].Rows[0]["AddressLine1"].ToString();
            lblDisplayAddressLine2.Text = dsUserAddress.Tables["AUserAddress"].Rows[0]["AddressLine2"].ToString();
            lblDisplayAddressLine3.Text = dsUserAddress.Tables["AUserAddress"].Rows[0]["AddressLine3"].ToString();
            lblDisplayCity.Text = dsUserAddress.Tables["AUserAddress"].Rows[0]["City"].ToString();
            lblDisplayState.Text = dsUserAddress.Tables["AUserAddress"].Rows[0]["StateName"].ToString();
            lblDisplayCountry.Text = dsUserAddress.Tables["AUserAddress"].Rows[0]["CountryName"].ToString();
            lblDisplayPostalCode.Text = dsUserAddress.Tables["AUserAddress"].Rows[0]["PostalCode"].ToString();
        }
    } 
```

![ddl](../Images/d323cbfc2be5a80967cfa1cca7aa4fe3.png)

![sql](../Images/3a5d67e13974ae586b461fe2b51851fb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:10:47.183

当您将数据绑定到下拉列表时

```
 ddlStatus.DataTextField = "FullName";
 ddlStatus.DataValueField = "Id"; 
```

onselected 索引更改事件

```
int ID =Convert.Toint32(ddlName.SelectedValue) 
```

通过使用此 ID 从数据表中仅选择此 ID 记录并显示

# android - Eclipse ADT Bundle - 它可以自动生成包含路径吗？

> ID：15699930
> 
> 赞同：1
> 
> 时间：2013-03-29T08:38:57.833
> 
> 标签：android, android-ndk, adt

当我将现有项目导入 Win64 的 Eclise ADT Bundle（[此处](http://developer.android.com/sdk/index.html)）时，Project Properties > C/C++ General > Paths and Symbols 没有任何包含文件夹。

在我看来，由于环境中已经设置了 NDK，至少它应该在“包含目录”中包含 ${ANDROID_NDK}\platforms\android-xx\arch-arm\usr\include 文件夹。我想它会满足至少一半的 NDK 开发者。并且 $ANDROID_NDK$ 甚至必须手动设置！

有谁知道如何将其设置为自动生成？非常感谢。PS：Linux 版本的 ADT 包似乎默认自动生成。

# ruby-on-rails - 保存嵌套表单时的未知属性

> ID：15699931
> 
> 赞同：0
> 
> 时间：2013-03-29T08:38:58.760
> 
> 标签：ruby-on-rails, forms, attributes, nested

我正在用 Rails 3 编写一个引擎。我有一个 generic_recipe，其中包含这样的食谱：

```
module EdibleRecipe
  class GenericRecipe < ActiveRecord::Base
    attr_accessible :recipe, :recipe_attributes, ....
    has_many :recipes
    accepts_nested_attributes_for :recipes 
  end
end 
```

表单正确呈现：

```
<%= f.fields_for :recipe do |r| %>
... 
```

但是在保存时，我得到：

```
ActiveRecord::UnknownAttributeError in EdibleRecipe::GenericRecipesController#create 
```

[完整代码在这里](https://github.com/valk/edible-recipe)。任何帮助是极大的赞赏 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:59:49.030

采用

```
attr_accessible :recipes_attributes 
```

而不是 :recipe_attributes

# c# - 在asp.net中将嵌套项从一个列表框移动到另一个列表框

> ID：15699935
> 
> 赞同：1
> 
> 时间：2013-03-29T08:39:18.350
> 
> 标签：c#, asp.net

我知道如何将项目从一个列表框移动到另一个，但当它们像这样嵌套时却不知道：

![在此处输入图像描述](../Images/2f45d75325a26a2bc6c151a8e6b244a3.png)

谁能告诉我如何将它们嵌套在列表框中并将它们从一个列表框移动到另一个列表框，就像上图一样？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:35:47.507

Items that are shown in a nested way are just like regular items, only the DataTemplate changes.
Say your item class contains 'title' (string) and 'members' (List(of String)), then your dataTemplate will look like :

```
<DataTemplate TargetType={x:Type l:MyClass}>
    <StackPanel>
       <TextBox Text:{Binding title} />
       <ItemsControl ItemsSource={Binding members} />
    </StackPanel>
 </DataTemplate> 
```

So to switch a nested item between two Listbox, just... switch the item !

# google-chrome - kineticjs镀铬填充不起作用

> ID：15699936
> 
> 赞同：0
> 
> 时间：2013-03-29T08:39:18.483
> 
> 标签：google-chrome, kineticjs

自动 Chrome 更新 26.0.1410.43m 有一些新的东西可以停止填充我的 KineticJS 形状 - 在教程形状上我也很欣慰 - [http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-rect-tutorial /](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-rect-tutorial/)

有人对这个有了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T13:34:23.177

我有同样的问题，更新到最新版本的 kineticJs 解决了我的问题。注意：我使用的是 Kinetic 4.3.1 并更新到 4.4.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:46:40.177

看来我应该将此标记为已回答，尽管如果您想将 Chrome 和 Kinectjs 用于非平凡目的，则需要关注向后兼容性问题。

然而，它迫使我解决了我自己制造的另一个问题 - 请参阅[kineticjs 拖放 - 没有发布不一致](https://stackoverflow.com/questions/15158768/kineticjs-drag-drop-no-release-inconsistency)，所以我对此表示感谢！

# android - Android欺骗电话号码？

> ID：15699937
> 
> 赞同：3
> 
> 时间：2013-03-29T08:39:24.897
> 
> 标签：android

有没有一种方法可以通过编程将他们的电话号码“欺骗”给接听您电话的人，或者它是否需要比编程更多的东西？我知道必须有一种方法......我在市场上看到了恶搞应用程序，我也有一个，但它似乎不再出现在市场上。虽然它仍然有效，但我只是不喜欢它被限制为每天最多使用三个电话，每个电话两分钟。我查看了这个 Caller ID Faker 的权限，它需要。

*   网络通讯
*   个人信息
*   贮存
*   花钱的服务
*   电话

AndroidManifest.xml 中只有五种不同的权限设置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:48:27.323

来电者电话号码来自运营商，而不是来自电话本身。所以我会冒险并回答这是不可能的，只要运营商不支持这种操作。

# php - MySQL删除具有重复和类似内容的行

> ID：15699939
> 
> 赞同：2
> 
> 时间：2013-03-29T08:39:58.910
> 
> 标签：php, mysql, duplicates

我是 PHP 和 MYSQL 的新手。在我的研究中我遇到了一个问题

我有一张这样的桌子：

```
+----+----------+---------+
| time | name   | number  |
+----+----------+---------+
| 12.1 | google | 10      |
| 12.2 | yahoo  | 15      |
| 12.3 | msn    | 20      |
| 12.1 | google | 10      |
| 12.1 | google | 29      |
| 12.2 | yahoo  | 10      |
+----+----------+---------+ 
```

但我想要这样的表：

```
+----+----------+---------+
| time | name   | number  |
+----+----------+---------+
| 12.2 | yahoo  | 15      |
| 12.3 | msn    | 20      |
| 12.1 | google | 29      |
+----+----------+---------+ 
```

当时间和名称相同时，我想要最大数量的行，

我该怎么办？我非常担心这个问题，感谢您回复我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T08:44:44.097

尝试（未测试）

```
SELECT `time`, `name`, `number`
FROM tbl
GROUP BY `name`,`time`
HAVING MAX(`number`) 
```

提示：**TIME**是 mysql 保留关键字，因此将其包装起来并在和列```上创建索引`name``time`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:44:41.627

尝试一下。

```
 Select time, name, number from [table name] group by time, name having max(number) 
```

# android - 如何在android上解析xml中的一个子节点？

> ID：15699941
> 
> 赞同：0
> 
> 时间：2013-03-29T08:40:06.690
> 
> 标签：android, parsing, xml-parsing

我是android编程的新手。我想创建可以解析 xml 文件的应用程序。下面是xml文件结构

```
<Cuaca>
<Tanggal>
<Mulai>30 March 2013</Mulai>
<MulaiPukul>07.00</MulaiPukul>
<Sampai>31 March 2013</Sampai>
<SampaiPukul>07.00</SampaiPukul>
</Tanggal>
<Isi>
<Row>
<Kota>Wates</Kota>
<point>
<coordinates>-</coordinates>
</point>
<Lintang>-7.81337</Lintang>
<Bujur>110.14757</Bujur>
<Balai>BBMKG_Ciputat</Balai>
<Propinsi>DI Yogyakarta</Propinsi>
<Cuaca>Berawan</Cuaca>
<_symbol>../imagesSWF/Berawan.swf</_symbol>
<SuhuMin>24</SuhuMin>
<SuhuMax>32</SuhuMax>
<KelembapanMin>67</KelembapanMin>
<KelembapanMax>96</KelembapanMax>
<KecepatanAngin>15</KecepatanAngin>
<ArahAngin>Tenggara</ArahAngin>
</Row>
<Row>
<Kota>Bantul</Kota>
<point>
<coordinates>-</coordinates>
</point>
<Lintang>-7.90749</Lintang>
<Bujur>110.35802</Bujur>
<Balai>BBMKG_Ciputat</Balai>
<Propinsi>DI Yogyakarta</Propinsi>
<Cuaca>Berawan</Cuaca>
<_symbol>../imagesSWF/Berawan.swf</_symbol>
<SuhuMin>24</SuhuMin>
<SuhuMax>33</SuhuMax>
<KelembapanMin>64</KelembapanMin>
<KelembapanMax>95</KelembapanMax>
<KecepatanAngin>15</KecepatanAngin>
<ArahAngin>Tenggara</ArahAngin>
</Row>
<Row>
<Kota>Wonosari</Kota>
<point>
<coordinates>-</coordinates>
</point>
<Lintang>-7.99321</Lintang>
<Bujur>110.58518</Bujur>
<Balai>BBMKG_Ciputat</Balai>
<Propinsi>DI Yogyakarta</Propinsi>
<Cuaca>Berawan</Cuaca>
<_symbol>../imagesSWF/Berawan.swf</_symbol>
<SuhuMin>25</SuhuMin>
<SuhuMax>32</SuhuMax>
<KelembapanMin>65</KelembapanMin>
<KelembapanMax>94</KelembapanMax>
<KecepatanAngin>15</KecepatanAngin>
<ArahAngin>Tenggara</ArahAngin>
</Row>
</Isi>
</Cuaca> 
```

我使用 DOM 解析器成功解析了上面的页面。但我想要的是只从 xml 文件中提取一部分而不循环，例如：

```
<Row>
<Kota>Wates</Kota>
<point>
<coordinates>-</coordinates>
</point>
<Lintang>-7.81337</Lintang>
<Bujur>110.14757</Bujur>
<Balai>BBMKG_Ciputat</Balai>
<Propinsi>DI Yogyakarta</Propinsi>
<Cuaca>Berawan</Cuaca>
<_symbol>../imagesSWF/Berawan.swf</_symbol>
<SuhuMin>24</SuhuMin>
<SuhuMax>32</SuhuMax>
<KelembapanMin>67</KelembapanMin>
<KelembapanMax>96</KelembapanMax>
<KecepatanAngin>15</KecepatanAngin>
<ArahAngin>Tenggara</ArahAngin>
</Row> 
```

任何人都可以帮助我吗？对不起，如果我的写作很乱，那是因为我第一次在论坛上提问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:38:41.670

如果要解析特定节点，则需要像这样移动到该节点，

```
 NodeList row_nodes = document.getElementsByTagName("Row");
                   for (int i = row_id; i < row_nodes.getLength();) {
                           org.w3c.dom.Element row_element = (org.w3c.dom.Element) row_nodes                                            .item(i);

                           break;
                   } 
```

这`row_id`是特定节点的数量，如果`row_id`是 0，那么它将解析

```
<Row>
<Kota>Wates</Kota>
...
</Row> 
```

如果`row_id`是 1 那么它将解析

```
<Row>
<Kota>Bantul</Kota>
...
</Row> 
```

如果`row_id`是 2 那么它将解析

```
<Row>
<Kota>Wonosari</Kota>
...
</Row> 
```

希望这对你有帮助，

# php - 如何使用添加更多选项在 Drupal 7 Ajax 表单中保留和检索图像细节？

> ID：15699946
> 
> 赞同：6
> 
> 时间：2013-03-29T08:40:56.850
> 
> 标签：php, forms, drupal, drupal-7

**我的自定义模块代码：**

![这是我的表格截图](../Images/fb7be854305791db4bc2003dff98b7bd.png)

```
 <?php
  function my_module_menu() {
  $items = array();

  $items['form-example'] = array( 
    'title' => 'My Module Form', 
    'description' => 'A form to mess around with.',
    'page callback' => 'drupal_get_form', 
    'page arguments' => array('my_module_form'), 
    'access callback' => TRUE
  );

  return $items;
}

function my_module_form($form, &$form_state, $no_js_use = FALSE) {  

  $form['file'] = array(
        '#type' => 'file',
        '#title' => t('Image'),
        '#description' => t('Upload an image'),
  );

    $form['menu'] = array(
    '#markup' => '<b>Add More:</b>'
    );

      $form['#tree'] = TRUE;
      $form['names_fieldset'] = array(
        '#type' => 'fieldset',
        '#title' => t('Add more images'),
        '#prefix' => '<div id="names-fieldset-wrapper">',
        '#suffix' => '</div>',
      );

      if (empty($form_state['num_names'])) {
        $form_state['num_names'] = 1;
      }

      for ($i = 0; $i < $form_state['num_names']; $i++) {       
        $form['names_fieldset']['name'][$i][0]= array(
             '#title' => t('Image'),
             '#type' => 'file',
             '#weight' => '5',
             '#description' => t('Upload an image'),
        );
      }

      $form['names_fieldset']['add_name'] = array(
        '#type' => 'submit',
        '#value' => t('Add one more'),
        '#submit' => array('my_module_add_more_add_one'),
        '#ajax' => array(
          'callback' => 'my_module_add_more_callback',
          'wrapper' => 'names-fieldset-wrapper',
        ),
      );
      if ($form_state['num_names'] > 1) {
        $form['names_fieldset']['remove_name'] = array(
          '#type' => 'submit',
          '#value' => t('Remove one'),
          '#submit' => array('my_module_add_more_remove_one'),
          '#ajax' => array(
            'callback' => 'my_module_add_more_callback',
            'wrapper' => 'names-fieldset-wrapper',
          ),
        );
      }

  $form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Submit'),    
  );

  $form['#submit'][] = 'my_module_add_more_submit';
    if ($no_js_use) {
    if (!empty($form['names_fieldset']['remove_name']['#ajax'])) {
      unset($form['names_fieldset']['remove_name']['#ajax']);
    }
    unset($form['names_fieldset']['add_name']['#ajax']);
  }    
  return $form;
} 

function my_module_add_more_callback($form, $form_state) {
  return $form['names_fieldset'];
}

function my_module_add_more_add_one($form, &$form_state) {
  $form_state['num_names']++;
  $form_state['rebuild'] = TRUE;
   //$form_state['no_redirect'] = TRUE;
}

function my_module_add_more_remove_one($form, &$form_state) {
  if ($form_state['num_names'] > 1) {
    $form_state['num_names']--;
  }
  $form_state['rebuild'] = TRUE;
}

function my_module_add_more_submit($form, &$form_state) {
    $file = $form_state['values']['file']."<br \>";
    $validators = array();
    $file = file_save_upload('file', $validators, 'public://uploads');  
    print_r($file);     
    exit();
} 
```

当我提交表单时，我试图获取通过添加更多选项添加的图像的详细信息。但我无法得到它们。但是我只能获取第一张图片的详细信息（并且能够上传它）。

我想在这里知道两件事：

1.  如何检索使用添加更多选项（字段集）添加的图像的详细信息，以及如何上传它们？
2.  当我浏览并选择字段集中的图像时，添加另一个图像字段后，它不会保留在表单中。如何在字段集中保留选定的图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:58:06.337

看看这篇文章——http: [//evolvingweb.ca/story/poutine-maker-introduction-field-api-drupal-7-part-1——](http://evolvingweb.ca/story/poutine-maker-introduction-field-api-drupal-7-part-1)因为它有一些关于你的代码中缺少的东西的信息。$三角洲。$delta 是分配给字段值的 id，即使您的字段只有 1 个项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T05:18:28.457

当您 var_dump 您创建的文件字段时，您会看到什么？如果您获得所有信息以及使用“再添加一个”按钮添加的信息，则可以使用以下方法了解值的正确结构：`echo "<pre>"; print_R($form_state['values']); echo "</pre>":`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-07T11:52:08.080

您的代码有几个问题。

第一个问题是您的提交功能仅处理第一个上传字段，该字段确实称为“文件”。但绝对没有处理其他领域。

第二个问题是，每次您单击“再添加一个”时，它都会上传并保存第一个字段，这将重复您的上传。如果没有 AJAX，你不会遇到这个问题，但如果你想添加它，你会的。

我将进行以下更改：

1.  删除`$form['#tree'] = TRUE`并将其添加到字段集中。`$form['names_fieldsets']['#tree'] = TRUE;`当然，在您声明字段集之后。

2.  `for`将您在字段集中（循环内）声明文件字段的方式更改为：

    ```
    for ($i = 0; $i < $form_state['num_names']; $i++) {
      $form['names_fieldset'][$i]['name']= array(
        '#title' => t('Image'),
        '#type' => 'file',
        '#weight' => '5',
        '#description' => t('Upload an image'),
        // We need this to know which file element this is.
        // By default drupal would name all as files[names_fieldset]
        '#name' => 'files[names_fieldset_' . $i . '_name]',
      );
    } 
    ```

3.  我会像这样更改提交功能（请注意，我假设您也执行了我上面建议的更改）：

    ```
    function my_module_add_more_submit($form, &$form_state) {
      if ($form_state['values']['op'] == 'Submit') {
        $validators = array();
        $files = array();
        if (!empty($_FILES['files']['name']['file'])) {
          $files[] = file_save_upload('file', $validators, file_default_scheme() . '://uploads');
        }
        foreach ($form_state['values']['names_fieldset'] as $name => $field) {
          if ($name != 'add_name') {
            $file_name = implode('_', $form['names_fieldset'][$name]['name']['#parents']);
            if (!empty($_FILES['files']['name'][$file_name])) {
              $files[] = file_save_upload($file_name, $validators, file_default_scheme() . '://uploads');
            }
          }
        }
      }
    } 
    ```

通过这些更改，我们在树内设置了一个表单字段名称。我们仅在单击“提交”按钮时触发上传，并且仅针对实际添加了文件的表单字段。此外，我们使用默认方案上传，并不总是使用公共方案。

当然，代码需要一些消息让用户知道上传了多少文件、名称或任何其他认为有价值的信息。

# django - 如何检查用户是否是第一次访问该页面

> ID：15699947
> 
> 赞同：5
> 
> 时间：2013-03-29T08:41:01.373
> 
> 标签：django, design-patterns, django-models

一般来说，我们如何知道用户是否是第一次访问该页面？从技术上讲，我们是否将每个页面的访问次数存储在模型中（我正在使用 django），或者是否有其他模式可以遵循以简化操作。

我只是在寻找实现这一点的设计。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T11:52:08.433

我认为您必须为此创建自己的机制。

我会创建一个模型来存储每个 url 和名为 eg 的用户的首次访问`FirstVisit`。然后，如果用户请求视图中的页面，您可以搜索当前用户和 url 是否有条目，`FirstVisit`并确定这是否是他的第一次。之后，如果他还没有访问过，你将入口存储到`FirstVisit`模型中，因为他只是要获取页面的内容。

我将尝试编写代码：

```
#models.py

class FirstVisit(models.Model):
    url = models.URLField()
    user = models.ForeignKey('auth.User')

#views.py

def my_view(request):
   if not FisrtVisit.objects.filter(user=request.user.id, url=request.path).exists():
      #he visits for the first time
      #your code...
      FisrtVisit(user=request.user, url=request.path).save() 
```

您可以创建一个装饰器并将此功能放入其中。然后将装饰器添加到您要存储此信息的任何视图中，并从装饰器将标志参数传递给视图，以确定用户是否第一次在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-20T18:17:33.140

根据@davekr 的建议，我将创建一个像 FirstVisit 这样的模型，它具有一些属性，如 ip-address、时间注册，并在 get 方法（与根 url 绑定）上实例化它，并在用户有效或经过身份验证时进行一些验证。

PS：检查此（[https://docs.djangoproject.com/en/2.0/ref/request-response/）django](https://docs.djangoproject.com/en/2.0/ref/request-response/)文档以识别您可能对构建 FirstVisit 感兴趣的请求属性。

# asp.net-web-api - 请求的资源不支持 http 方法“PUT”

> ID：15699950
> 
> 赞同：6
> 
> 时间：2013-03-29T08:41:08.873
> 
> 标签：asp.net-web-api, attributerouting

我将 AttributeRouting 与我的 Web API (MVC 4) 一起使用。

为什么这行得通？

```
 [AcceptVerbs("PUT")]
    [PUT("api/v1/tokens/current")]
    public MemoryToken UpdateToken([FromBody] DeviceTokenViewModel viewModel)
    {...} 
```

而这个没有？

```
 [PUT("api/v1/tokens/current")]
    public MemoryToken UpdateToken([FromBody] DeviceTokenViewModel viewModel)
    {...} 
```

错误消息：请求的资源不支持 http 方法“PUT”。为什么我必须明确接受 PUT 动词？

我只是感到困惑，因为与 POST 类似的东西可以正常工作（我不必指定接受的动词）：

```
 [POST("api/v1/tokens")]
 public MemoryToken CreateToken()
 {...} 
```

从其他各种帖子中，我相信这与我的 web.config 中的设置有关。Web 服务器部分当前如下所示：

```
<system.webServer>
<validation validateIntegratedModeConfiguration="false" />
<modules runAllManagedModulesForAllRequests="true" />
<handlers>
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
  <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
  <add name="AttributeRouting" path="routes.axd" verb="*" type="AttributeRouting.Web.Logging.LogRoutesHandler, AttributeRouting.Web" />
</handlers> 
```

我尝试了一些方法，例如删除 WebDav 之类的。但到目前为止没有任何效果（除非在注释中明确允许 PUT 动词）。

哦，我正在使用 Visual Studios 内置的开发服务器。

多谢你们！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T12:59:23.593

在此[链接](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection)中，如果没有任何操作匹配，他们将 POST 方法描述为默认方法。所以这就是为什么它仍然适用于没有 HttpPost 属性的 CreateToken() 方法。

*   您可以使用属性指定 HTTP 方法：AcceptVerbs、HttpDelete、HttpGet、HttpHead、HttpOptions、HttpPatch、HttpPost 或 HttpPut。
*   否则，如果控制器方法的名称以“Get”、“Post”、“Put”、“Delete”、“Head”、“Options”或“Patch”开头，则按照惯例，该操作支持该 HTTP 方法。
*   **如果以上都不是，则该方法支持 POST。**

# java - 如何将 JSON 解析为 int？

> ID：15699953
> 
> 赞同：21
> 
> 时间：2013-03-29T08:41:18.007
> 
> 标签：java, json

我已经解析了一些 JSON 数据，只要我将它存储在字符串变量中，它就可以正常工作。

我的问题是我需要 int 变量而不是 String 中的 ID。我试着做演员`int id = (int) jsonObj.get("");`

但它给出了一条错误消息，即我无法将对象转换为 int。所以我尝试使用以下方法进行转换：

```
String id = (String) jsonObj.get("id");
int value = Integer.parseInt(id); 
```

但这也行不通。怎么了。JSON 如何与 int 一起工作？我的字符串工作得很好，只有当我尝试将它们作为 int 时才会遇到问题。

这是我的代码：

```
public void parseJsonData() throws ParseException {

        JSONParser parser = new JSONParser();
        Object obj = parser.parse(jsonData);
        JSONObject topObject = (JSONObject) obj;
        JSONObject locationList = (JSONObject) topObject.get("LocationList");
        JSONArray array = (JSONArray) locationList.get("StopLocation");
        Iterator<JSONObject> iterator = array.iterator();

        while (iterator.hasNext()) {

            JSONObject jsonObj = (JSONObject) iterator.next();
            String name  =(String) jsonObj.get("name");
            String id = (String) jsonObj.get("id");
            Planner.getPlanner().setLocationName(name);
            Planner.getPlanner().setArrayID(id);

        }

    } 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-29T08:43:07.640

您可以使用`parseInt`：

```
int id = Integer.parseInt(jsonObj.get("id")); 
```

或者更好更直接的[getInt](http://www.json.org/javadoc/org/json/JSONObject.html#getInt%28java.lang.String%29)方法：

```
int id = jsonObj.getInt("id"); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-07-02T20:52:07.403

这取决于您正在解析的属性类型。

如果 json 属性是一个数字（例如 5），您可以直接转换为 Long，因此您可以这样做：

```
(long) jsonObj.get("id") // with id = 5, cast `5` to long 
```

获得 long 后，您可以再次转换为 int，结果是：

```
(int) (long) jsonObj.get("id") 
```

如果 json 属性是带引号的数字（例如“5”），则被视为字符串，您需要执行类似于 Integer.parseInt() 或 Long.parseLong() 的操作；

```
Integer.parseInt(jsonObj.get("id")) // with id = "5", convert "5" to Long 
```

唯一的问题是，如果您有时收到 id 的字符串或数字（您无法预测客户端的格式或者它可以互换），您可能会遇到异常，特别是如果您在 null json 对象上使用 parseInt/Long 时。

如果不使用 Java 泛型，我使用的处理这些运行时异常的最佳方法是：

```
if(jsonObj.get("id") == null) {
   // do something here
}

int id;
try{
    id = Integer.parseInt(jsonObj.get("id").toString());
} catch(NumberFormatException e) {
  // handle here
} 
```

您也可以先删除它，然后将异常添加到 catch 中。希望这可以帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-22T08:39:13.213

它非常简单。

示例 JSON：

```
{
   "value":1
} 
```

```
int z = jsonObject.getInt("value"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-02T16:15:40.587

他们都不为我工作。我这样做了，它奏效了：

编码为 json：

```
JSONObject obj = new JSONObject();
obj.put("productId", 100); 
```

解码：

```
long temp = (Long) obj.get("productId"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-24T16:42:24.117

这个问题有点老了，但我得到了一个很好的结果，创建了一个函数来将 Json 字符串中的对象从字符串变量转换为整数

```
function getInt(arr, prop) {
    var int;
    for (var i=0 ; i<arr.length ; i++) {
        int = parseInt(arr[i][prop])
            arr[i][prop] = int;
    }
    return arr;
  } 
```

该函数只是通过数组并将您选择的对象的所有元素作为整数返回

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-03T14:02:55.477

I use a combination of json.get() and instanceof to read in values that might be either integers or integer strings.

These three test cases illustrate:

```
int val;
Object obj;
JSONObject json = new JSONObject();
json.put("number", 1);
json.put("string", "10");
json.put("other", "tree");

obj = json.get("number");
val = (obj instanceof Integer) ? (int) obj : (int) Integer.parseInt((String) obj);
System.out.println(val);

obj = json.get("string");
val = (obj instanceof Integer) ? (int) obj : (int) Integer.parseInt((String) obj);
System.out.println(val);

try {
    obj = json.get("other");
    val = (obj instanceof Integer) ? (int) obj : (int) Integer.parseInt((String) obj);
} catch (Exception e) {
    // throws exception
} 
```

# linux - 如何生成配置脚本——linux

> ID：15699957
> 
> 赞同：0
> 
> 时间：2013-03-29T08:41:37.640
> 
> 标签：linux, configure

我已经下载了：--
libwebsockets-1.0-chrome25-firefox17

从;--
[http://git.warmcat.com/cgi-bin/cgit/libwebsockets/](http://git.warmcat.com/cgi-bin/cgit/libwebsockets/)

我必须安装 websocket 库。但它不包含配置文件。根据安装说明：-

```
 The file `configure.ac' (or `configure.in') is used to create
`configure' by a program called `autoconf'.  You need `configure.ac' if
you want to change it or regenerate `configure' using a newer version
of `autoconf'. 
```

它还包含文件：---
configure.ac
autogen.sh

请建议在 linux 中生成配置文件的命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:43:04.373

只需运行提供的`autogen.sh`脚本。

# php - Facebook php sdk 3.2.2 GetUser() 总是返回 0

> ID：15699958
> 
> 赞同：3
> 
> 时间：2013-03-29T08:41:37.890
> 
> 标签：php, facebook, sdk

我花了一整天的时间寻找答案..但似乎没有什么可以解决它。我想每个版本都有不同的问题......

嗯，这很简单，我有这个代码：

```
 <?php
    include_once("facebook.php"); //include facebook SDK

    ######### edit details ##########
    $appId = '****'; //Facebook App ID
    $appSecret = '****'; // Facebook App Secret
    ##################################

    //Call Facebook API
    $facebook = new Facebook(array(
      'appId'  => $appId,
      'secret' => $appSecret,
      'cookie' => true
    ));

    $fbuser = $facebook->getUser();

    if ($fbuser) {
    // Do Something

    }
    else{               
    //Show login button for guest users
    $loginUrl = $facebook->getLoginUrl(array('redirect_uri'=>$homeurl,'scope'=>$fbPermissions));
    echo '<a href="'.$loginUrl.'"><img src="images/facebook-login.png" border="0"></a>';
    }
    ?> 
```

我每次都在获取用户中得到 0。当我转到“在 facebook 上登录”并且我没有登录时，我得到了 facebook 登录屏幕。当我转到“在 facebook 上登录”并登录时，facebook 将我重定向到我的页面，我再次在获取用户时得到 0。

我想在我的本地主机上运行它，也许这就是问题所在？

希望有人可以帮助.. thx

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T13:12:24.963

使用相同的简单登录脚本时我遇到了类似的问题。我几乎尝试了任何东西，但没有任何帮助。（奇怪的是，前一天一切正常）。

于是开始调试“base_facebook.php”，发现函数**getAccessTokenFromCode****无**异常（无声）失败。

原来 _oauthRequest 的响应给出了错误消息回复，而不是预期的令牌回复：

```
$access_token_response =
        $this->_oauthRequest(
          $this->getUrl('graph', '/oauth/access_token'),
            $params = array ('client_id' => $this->getAppId(),
                             'client_secret' => $this->getAppSecret(),
                             'redirect_uri' => $redirect_uri,
                             'code' => $code)); 
```

所以通过添加 echo $access_token_response; 直接在这个函数之后发现了我的问题。

响应错误是我的应用程序被配置为本**机/桌面**应用程序。在我将其更改为**Internet**后，getUser(); 给出了正确的用户 ID。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T09:12:57.197

试试这个，这是我的一个同学写的一段代码，因为我也在为 FB 登录而苦苦挣扎。为我工作。

```
<?php
    session_start();
    require_once 'facebook/facebook.php';

    $facebook = new Facebook(array(
      'appId'  => '3525325', <- fake appID ofcourse, enter your own
      'secret' => 'fauuf983f9f', <- fake secret, enter your own
    ));

    $user = $facebook->getUser();

    if ($user) {
      try {
        $_fb['user'] = $facebook->api('/me');
      } catch (FacebookApiException $e) {
        error_log($e);
        $_fb['user'] = null;
      }
    }

    if ($user) 
    {
        $_fb['logouturl'] = $facebook->getLogoutUrl();
        $_fb['authed'] = true;

        echo '<h1>Logged in</h1>';
        echo 'Fbid: '.$user;

        echo "<br /><br /><pre>";
        print_r($_fb['user']);
        echo "</pre>";
    } 
    else 
    {
      $_fb['loginurl'] = $facebook->getLoginUrl(array('scope' => 'email'));
      $_fb['authed'] = false;
      echo '<a href="'.$_fb['loginurl'].'">Login with Facebook</a>';
    }
?>
<html>
    <head>
        <title>Login</title>
    </head>
    <body>
    </body>
</html> 
```

希望对你有用。祝你好运 :) Facebook 登录让我很恼火 :p

# python - 关于 python 错误：“ImportError: cannot import name Dynamic”

> ID：15699964
> 
> 赞同：2
> 
> 时间：2013-03-29T08:42:18.513
> 
> 标签：python, file, import, importerror

我在执行 python 代码时遇到了一个奇怪的错误。以下代码是我正在执行的 Python 代码的一小段：

```
#samplecode.py
    import time 
    from datetime import datetime 
    import sys 
    import os 
    import inspect
    sys.path.append(os.path.dirname('C:\Users\qksr\Desktop\work\kako\logging.py'))
    import logging
    from logging import Dynamic 
```

在执行 samplecode.py 时，我遇到了一个错误，显示如下：

```
Traceback (most recent call last):
  File "C:\Users\qksr\Desktop\work\Fire\samplecode6.py", line 8, in <module>
    from logging import Dynamic
ImportError: cannot import name Dynamic 
```

我的 logging.py 包含执行时需要导入的代码。以下是代码：

```
class Dynamic(object):
    pfile3=open('C:\Users\qksr\Desktop\work\sample3.txt','w') 
```

我们可以看到类 Dynamic 已创建，但引发了导入错误。

最奇怪的是我做了几个导入文件的例子，而且效果很好。我已经很努力了，但仍然无法弄清楚。我想知道为什么会抛出这个错误，为什么突然出现这个错误而不是以前的样本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:49:35.123

Python 已经有一个内置`logging`模块，它位于您的模块之前（您将文件夹附加到路径的末尾）。

将您的`logging.py`文件重命名为其他名称。

# php - Yii：2 个模型，beforeValidate 代码相同

> ID：15699971
> 
> 赞同：0
> 
> 时间：2013-03-29T08:42:57.690
> 
> 标签：php, yii, content-management-system, yii-cmodel

我有一个 Yii 应用程序，在 2 个模型中，我有 beforeValidation 方法的代码。

yii 是否有解决方案，或者我应该为这个公共代码创建一个组件并使用参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T10:38:21.670

您可以创建一个您的模型都扩展的类：

```
class CommonClass extends CActiveRecord
{

    public function beforeValidate(){
       ...
    }

}

class A extends CommonClass{
}

class B extends CommonClass{
} 
```

或者你可以定义一个行为并将这个行为添加到你的两个模型中！

```
class YourBehavior extends CActiveRecordBehavior
{
    public function beforeValidate($event)
    {
        ...
    }
}

class A extends CActiveRecord{
    public function behaviors(){
    return array(
        'YourBehavior' => array(
            'class' => 'components.YourBehavior',
        ),      
    );
}
}

class B extends CActiveRecord{
    public function behaviors(){
    return array(
        'YourBehavior' => array(
            'class' => 'components.YourBehavior',
        ),      
    );
}
} 
```

# iphone - Nextpeer in Landscape only iphone 游戏

> ID：15699972
> 
> 赞同：0
> 
> 时间：2013-03-29T08:42:59.990
> 
> 标签：iphone, cocos2d-iphone, landscape, nextpeer

我在肖像游戏中使用[了 Nextpeer](http://nextpeer.com/)，效果很好。在横向游戏中使用相同的代码，但 Nextpeer 仪表板仍处于纵向模式。如何将 Nextpeer 仪表板方向更改为横向？

这是我的 Nextpeer 初始化代码：

```
-(void)initializeNextpeer:(NSDictionary *)launchOptions
{
    if([self internetConnected])
    {
        BOOL isRetina = (IS_IPAD) ? FALSE : TRUE ;

        NSDictionary* settings = [NSDictionary dictionaryWithObjectsAndKeys:

                                  // This game has no retina support - therefore we have to let the platform know
                                  [NSNumber numberWithBool:isRetina], NextpeerSettingGameSupportsRetina,
                                  // Support orientation change for the dashboard notifications
                                  [NSNumber numberWithBool:TRUE], NextpeerSettingSupportsDashboardRotation,
                                  // Support orientation change for the in game notifications
                                  [NSNumber numberWithBool:TRUE], NextpeerSettingObserveNotificationOrientationChange,
                                  //  Place the in game notifications on the bottom screen (so the current score will be visible)
                                  [NSNumber numberWithInt:NPNotificationPosition_TOP], NextpeerSettingNotificationPosition,
                                  nil];

        [Nextpeer initializeWithProductKey:@"HERE_USED_NEXTPEER_KEY"
                               andSettings:settings
                              andDelegates:[NPDelegatesContainer containerWithNextpeerDelegate:self]];

        // Handle any notifications the game was launched with
        [Nextpeer handleLaunchOptions:launchOptions];
    }
} 
```

![在此处输入图像描述](../Images/6e480f9522294d76ae8d9d0086a753b7.png)

如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T08:46:34.970

我认为您错误地将 NExtPeer 提供的 Potarit 包用于不同的布局。请将 Landscape 包拖放到您的应用程序中。

有关更多信息，请查看此内容并查看第 3 步
[Next Peer Docs](http://developers.nextpeer.com/documentation/docs)

# iphone - 如何在 UITextfield 中以不同颜色显示字符串的每个单词

> ID：15699982
> 
> 赞同：0
> 
> 时间：2013-03-29T08:44:18.290
> 
> 标签：iphone, text, uicolor

我正在使用 UILable 来显示数据。我有一个 NSString @“你好，你好吗？”。我想以不同的颜色显示每个单词。例如 Hello - 红色，How - 黄色等。

我尝试了很多，但我没有找到任何解决方案。有什么想法给任何人我怎样才能得到解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:55:57.383

只需使用：

```
- (IBAction)go:(id)sender {
    NSMutableAttributedString *string = [[NSMutableAttributedString alloc]initWithString:self.text.text];

     NSArray *words=[self.text.text componentsSeparatedByString:@" "];

     NSArray *colors=[NSArray arrayWithObjects:[UIColor redColor],[UIColor grayColor],[UIColor blueColor],[UIColor blackColor],[UIColor purpleColor],nil];

    for (NSString *word in words) {        
        NSRange range=[self.text.text rangeOfString:word];
        [string addAttribute:NSForegroundColorAttributeName value:colors[arc4random()%colors.count] range:range];
    }
    [self.text setAttributedText:string];
} 
```

**[工作项目在这里](http://www.keepandshare.com/doc/6090101/ios-each-word-different-color-63k?da=y)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T12:25:10.650

我会补充

```
YOURTEXTFIELD.font=[UIFont fontWithName:@"HelveticaNeue-UltraLight" size:18.0f]; 
```

或任何您想要的字体大小，因为如果用户按两次空格键（或有多个空格），上述功能将产生糟糕的结果。所以函数会变成：

代码：

```
- (IBAction)go:(id)sender {
    NSMutableAttributedString *string = [[NSMutableAttributedString alloc]initWithString:self.text.text];

     NSArray *words=[self.text.text componentsSeparatedByString:@" "];

     NSArray *colors=[NSArray arrayWithObjects:[UIColor redColor],[UIColor grayColor],[UIColor blueColor],[UIColor blackColor],[UIColor purpleColor],nil];

    for (NSString *word in words) {        
        NSRange range=[self.text.text rangeOfString:word];
        [string addAttribute:NSForegroundColorAttributeName value:colors[arc4random()%colors.count] range:range];
YOURTEXTFIELD.font=[UIFont fontWithName:@"HelveticaNeue-UltraLight" size:18.0f];

    }
    [self.text setAttributedText:string];
YOURTEXTFIELD.font=[UIFont fontWithName:@"HelveticaNeue-UltraLight" size:18.0f];

} 
```

尝试一下！

# ios - 如何从过滤的 UITableView 中删除一个项目，而不实际删除它？

> ID：15699983
> 
> 赞同：0
> 
> 时间：2013-03-29T08:44:19.917
> 
> 标签：ios, objective-c, uitableview, core-data

我有一个 UITableView，它从 FetchedResultsController 获取一组核心数据对象。我希望能够使用标准删除按钮从表视图中删除一个对象，并让表视图单元格像删除项目时通常那样淡出，但是在我的情况下，我*实际上*并没有删除该对象，而是将其标记为删除。例如/我有一个名为deleted的属性，所以它仍然存在但似乎已删除；

```
obj.deleted = [NSNumber numberWithBool:YES]; 
```

有没有这样的方法可以做到这一点，所以它似乎仍然按照标准删除工作？

如果不打电话，我似乎无法做到这一点，`[self.tableView reloadData]`所以我失去了标准删除附带的漂亮动画。

我的 tableView 获取结果控制器有一个过滤器，因此 tableView 中的数据被过滤；

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"deleted == %@", [NSNumber numberWithBool:NO]; 
```

怀疑我需要的代码会放在这里；

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        //
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:31:29.080

`NSManagedObject`已经有一个方法`isDeleted`，因此自定义属性`deleted`可能会干扰该方法。您可以向您的实体添加一个属性`invisible`并检查

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"invisible == %@", [NSNumber numberWithBool:NO]; 
```

在获取的结果控制器中。如果你设置

```
obj.invisible = [NSNumber numberWithBool:YES]; 
```

该对象应从表视图中删除。（您可能需要保存上下文，我现在还不能 100% 确定。）

# php - Wamp 上的 Laravel 4 htaccess vhost NotFoundHttpException 问题

> ID：15699985
> 
> 赞同：3
> 
> 时间：2013-03-29T08:44:21.603
> 
> 标签：php, apache, .htaccess, wamp, laravel

我已经在 WAMP、windows 7 64 位、运行 apache2.4 和 php5.4 上安装了 Laravel 4 的本地副本。我为这个项目设置了一个虚拟主机，如下：

```
<VirtualHost *:80>
DocumentRoot "c:/Google Drive/project/public"
ServerName project
<directory "c:/Google Drive/project/public">
    Options Indexes FollowSymLinks
    AllowOverride all
    Require all granted
</directory>
</VirtualHost> 
```

当我尝试访问时一切正常`project/`。当我尝试从 访问默认 Home 控制器时`project/index.php?home`，它也可以正常工作。但是，当我尝试从 访问默认的 Home 控制器时`project/home/`，我得到了`NotFoundHttpException`Laravel 4 抛出的错误。

我正在使用`.htaccess`Laravel 4 提供的默认文件：

```
<IfModule mod_rewrite.c>
    Options -MultiViews
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
</IfModule> 
```

在没有 Laravel 4 抛出的情况下从 URL 中删除 index.php 的正确方法是什么`NotFoundHttpException`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T07:37:52.940

您是否从[Laravel 文档](http://four.laravel.com/docs/installation)中尝试过这个（请参阅安装 -> 漂亮的 URL）？

“如果 Laravel 附带的 .htaccess 文件不适用于你的 Apache 安装，试试这个：

```
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ http://%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [L] 
```

这似乎对我有用。我也在 Win7 64 位等上使用 WAMP（实际上是 XAMPP），但我不使用虚拟主机。

# php - mysql查询到js ...并将结果存储在var中

> ID：15699986
> 
> 赞同：0
> 
> 时间：2013-03-29T08:44:26.303
> 
> 标签：php, javascript, mysql, variables

我正在使用 mysql 查询从 db 获取数据。这些数据将通过以下方式在 js 函数中使用：

数据库查询页面：

```
<?php
   $server   = "localhost"; // MySql host name
   $username = "root"; // MySQL username
   $password = ""; // MySQL password
   $dbname   = "admins"; // MySQL database name
   $table    = "usersvisit"; // MySql table name
   $db=mysql_connect($server,$username,$password) or die(mysql_error());
   mysql_select_db($dbname) or die(mysql_error());
   $results=mysql_query("SELECT * FROM $table LIMIT 30") or die(mysql_error());
   $data="[";
   while($row=mysql_fetch_assoc($results))
   {
      $data.= "'".$row['idUser']."',";
   }
   $data.="];";
   echo $data;
?> 
```

然后在 HTML 页面中，我想将检索到的数据声明为一个名为 origins 的变量，因此 var origins 必须存储 $data 以便稍后在其他 js 函数中使用它：

```
function createRequest()
{
    var xmlhttp = false;
    try {xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try {xmlhttp = new   ActiveXObject("Microsoft.XMLHTTP");}catch(E){xmlhttp = false;}}
    if(!xmlhttp && typeof XMLHttpRequest!='undefined'){try{xmlhttp = new XMLHttpRequest();}catch(e){xmlhttp=false;}}
    if(!xmlhttp && window.createRequest){try{xmlhttp = window.createRequest();}catch(e){xmlhttp=false;}}
    return xmlhttp;
}
window.onload=createRequest;

// Make an xmlHttpRequest to query_database.php
function request_database_query()
{
    var url = "query_database.php";
    var con=createRequest();
    con.open("GET",url,true);
    con.onreadystatechange=function()
    {
       if(con.readyState==4 && con.status==200)
       {
          document.getElementById("div2").innerHTML=con.responseText;
       }
    }
    con.send(null);
}
window.onload=request_database_query;

 var origins= ... // in this var i want to store the data to be as the followling
/*var origins = [
  'Euston',
  'Kings Cross',
  'Liverpool St',
  'Paddington',
  'St. Pancras',
  'Victoria',
  'Waterloo'
];*/ 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:51:19.993

您可以将 json_encode 的结果存储在 PHP 中的数组中，并存储在 javascript 中的 var 值中。在您的情况下，您可以将 $data 更改为一个数组，并将每个 $row['idUser'] 存储在那里，然后对其进行 json_encode 并将其传递给您的 html 页面。

一个例子如下：

```
$results=mysql_query("SELECT * FROM $table LIMIT 30") or die(mysql_error());
$data=array();
while($row=mysql_fetch_assoc($results))
{
    $data[] = $row['idUser'];
}

echo "var origins = " . json_encode($data) . ";"; 
```

然后在javascript中

```
alert(origins);
for(var i = 0; i < origins.length; i++) {
   alert(origins[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:53:02.323

只需 json_encode 数据：

```
var origins = <?php echo json_encode($data) ?> 
```

其中 $data 是您希望打印的数据的 PHP 数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:26:16.213

使用**退出；**在**回显 $data 之后；**在你的 php 代码中。

然后更新你的 JS 函数：**request_database_query()**如下：

```
function request_database_query()
{
    var origins = null;   
    var url = "index.php";
    var con=createRequest();
    con.open("GET",url,true);
    con.onreadystatechange=function()
    {
        if(con.readyState==4 && con.status==200)
        {     
            document.getElementById("div2").innerHTML=con.responseText;
            origins = con.responseText;
        }
    }
    con.send(null);

    if(origins != null){
        // call your other JS functions here or do your JS works here
    } 
 }
 window.onload=request_database_query; 
```

删除**window.onload=request_database_query之后的****var origins**声明行；

# postgresql - 在大型数据集上删除 Postgres 中的列

> ID：15699989
> 
> 赞同：44
> 
> 时间：2013-03-29T08:44:38.027
> 
> 标签：postgresql, database-design, ddl, database-performance, postgresql-9.2

所以我有一个包含大型数据集的表，并且该表有三列我想删除。
问题是：Postgres 将如何处理它？

它会遍历每个条目还是仅更新映射信息而无需太多开销？`ALTER TABLE`在这种特殊情况下，我可以制作一个还是应该使用交换表？

而且，如果有任何区别，所有三列都有固定长度（两个整数和一个数字）。

很抱歉，如果它已经被问过，但谷歌找不到任何相关的问题/文章......

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-29T08:59:56.427

ALTER TABLE DROP COLUMN 仅禁用系统表中的列。它非常快，但不会从堆文件中删除数据。您必须稍后执行 VACUUM FULL 以压缩分配的文件空间。所以 ALTER TABLE DROP COLUMN 非常快。而要压缩文件，您必须调用较慢的（带有独占 LOCK）VACUUM FULL。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-03-29T09:01:17.733

谷歌可能对这个问题没用，但[手册很少失败](https://www.postgresql.org/docs/current/sql-altertable.html#SQL-ALTERTABLE-NOTES)：

> 该`DROP COLUMN`表单并未物理删除该列，而只是使其对 SQL 操作不可见。表中的后续插入和更新操作将存储该列的空值。因此，删除列很快，但不会立即减少表的磁盘大小，因为被删除列占用的空间不会被回收。随着现有行的更新，空间将随着时间的推移而被回收。

和：

> 要强制立即重写表，您可以使用`VACUUM FULL`, `CLUSTER`或`ALTER TABLE`强制重写的一种形式。这导致表中没有语义上可见的更改，但会删除不再有用的数据。

具体来说，`attisdropped`系统目录表中的列[`pg_attribute`](https://www.postgresql.org/docs/current/catalog-pg-attribute.html)设置为`true`。

### 副作用

有轻微的副作用（正如克里斯指出的那样）：

*   更新或新插入的行仍然存储一个不可见的 NULL 值，它强制为每个新行创建一个 NULL 位图，即使可见列中没有 NULL。不*影响*现有行，因为它们保留原始（现在不可见）列值。

*   NULL 位图必须足够大以覆盖所有可见*和*已删除的列。在极端情况下，这可能会扩大 NULL 位图。关于有效尺寸：

    *   [可以为空的列在 PostgreSQL 中是否会占用额外的空间？](https://stackoverflow.com/questions/12145772/do-nullable-columns-occupy-additional-space-in-postgresql/12147130#12147130)
*   删除的列计入允许的最大值（无论如何您都不应该抓取）。

*   目前（Postgres 13）没有简单的方法可以完全摆脱僵尸列。上面提到的表重写用 NULL 替换了不可见的值（这*几乎*回收了所有空间），但都没有从系统目录中清除删除的列。甚至没有`TRUNCATE`。只有创建一个新表（或转储/恢复周期）才能做到这一点。

# refactoring - 有人可以解释删除（或保留）未使用代码的优点吗？

> ID：15699995
> 
> 赞同：123
> 
> 时间：2013-03-29T08:44:53.167
> 
> 标签：refactoring

我多次听说必须从项目中删除未使用的代码。但是，我不清楚“为什么？”。

我不删除的观点是：

*   代码已经写好了，付出了努力
*   代码可以在语法和真实环境中进行测试
*   如果组织良好（分组、单独的包、松散耦合等），它不会干扰您进行整体代码分析或重构
*   将来可能会使用代码
*   删除后，作者可能会感到不舒服

有人可以解释删除（或保留）未使用代码的优点吗？

* * *

## 回答 #1

> 赞同：211
> 
> 时间：2013-03-29T09:02:44.577

以下是应删除未使用代码的一些原因：

*   对于任何新参与项目的人来说，他们不仅要了解工作代码，还必须了解未使用的材料。这是浪费时间并造成混乱。

*   有时会有危险，有人会做出无意中涉及“休眠”代码并可能引入错误的更改。我知道这发生在我从事的项目中。

*   任何代码的维护都是一种管理负担。通过保留旧的冗余代码，增加了负担。例如，合并主分支中的更改变得更加困难，因为要处理的代码更多，出错的可能性也更大。

*   随着时间的推移，越来越多的旧未使用代码被添加到代码库中。这增加了混乱、潜在的误解和管理开销。

*   再次使用未使用的代码的可能性很小。随着时间的推移，重复使用的可能性会降低。如果要删除代码并且认为代码足够重要，则可以将代码分支并记录在案。

*   编码人员可能对他们可能努力编写的代码有任何个人感受是可以理解的。但是，专业的一部分要求必须将这些想法放在一边，以获得更好的利益。时间不代表任何人，在工作代码库中没有保存历史代码的地方。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-03-29T14:22:41.147

@suspectus 在说明删除代码的原因方面做得非常出色；我想解决您个人保留代码的要点。

> *   代码已经写好了，付出了努力

但是如果已经编写的代码没有被使用，这只是没有（未来）价值的成本。这是徒劳的努力，保留这些努力的未使用产品并不能验证这些努力。我们保留代码是因为它现在很有用，而不是作为对作者努力的某种纪念。

> *   代码可以在语法和真实环境中进行测试

对不起，我不知道你这是什么意思。

> *   如果组织良好（分组、单独的包、松散耦合等），它不会干扰您进行整体代码分析或重构

如果它存在于代码库中，无论组织得多么好，都会增加维护和理解的负担。诚然，它可以被组织起来以*减轻*负担，但如果它消失了，它就根本不是负担。

> *   将来可能会使用代码

在敏捷学校里，我们说[YAGNI](http://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it) : You Ain't Gonna Need It。是的，您将来*可能*会用到它，但我们今天对明天的需求了解得不够多，无法以任何可靠性预测它。不这样想是自大趋向于狂妄自大。明天我们*可以*知道的是：我们希望我们的代码库易于修改，而未使用的代码会损害该特性。

> *   删除后，作者可能会感到不舒服

作者必须克服它。我们都写了一些结果证明没用的东西——能够指向一个正在使用的代码体（因为删除了未使用的垃圾）比指向一个你可以说的代码体要好得多一些方法，“而且那个方法确实在使用！”

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-03-29T09:00:05.580

拿起一些代码并弄清楚意图还不够困难，但现在你必须弄清楚哪些部分没有被使用？

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-03-29T15:58:41.740

> 代码已经写好了，付出了努力

这也是不必要的。如果您不将它用于任何事情，那么（根据定义）它是无用的，无论它做了什么或花费了多少精力。

> 代码可以在语法和真实环境中进行测试

如果它没用，即使您对其进行了测试，它仍然没用。如果代码没用，那么对它的测试也应该没用（因此将注释代码保留在那里会产生歧义-您是否保留测试？如果您有注释代码的客户端代码，您是否也注释了客户端代码？ )

> 如果组织良好（分组、单独的包、松散耦合等），它不会干扰您进行整体代码分析或重构

不是这样。您所有的工具（源代码控制、静态分析、文档提取器、编译器等）都会运行得更慢，因为它们必须处理更多数据（并且这些数据的更大或更小部分是噪音）。

另一方面，如果代码组织得*不好，它会搞砸静态分析、重构和其他任何事情。*

您正在向您的工具输入引入噪音，并希望它们能够正确处理它。

如果您的静态分析工具计算评论/代码比率怎么办？你只是把它搞砸了，直到昨天（或每当代码被评论时）相关的东西。

最相关的是，注释的代码块会在理解代码以进行维护和进一步开发方面引入延迟，而这种延迟几乎总是会付出很多代价。问问自己：如果你需要了解一个函数的实现，你更愿意看什么？两行清晰的代码，还是两行代码和另外 26 条不再实际的注释？

> 将来可能会使用代码

如果是，您将在您团队选择的 SCM 中找到它。

如果您使用称职的 SCM 并依靠它来保留死代码（而不是弄乱源代码），您不仅应该看到谁删除了该代码（提交作者），还应该看到出于什么原因（提交消息），以及其他什么随之进行了更改（该提交的其余差异）。

> 删除后，作者可能会感到不舒服

所以？

你是（我假设）整个开发团队，他们得到报酬来制作你知道如何制作的最好的软件，而不是“你知道如何制作最好的软件而不伤害 X 的感受”。

这是编程的一部分，大多数编写的代码最终都会被丢弃；例如，Joel Spolsky 曾说过，对于他的公司来说，大约 2% 的书面代码用于生产。

如果您将开发人员的自我置于代码库质量之上，您将牺牲产品的质量，因为……究竟是什么？保持开发人员的不成熟？保护同事不切实际的期望？

**编辑：**我已经看到了在源代码中留下注释掉代码的一个正当理由，这是一个非常具体的情况：当代码以奇怪/不直观的形式编写并且重写它的干净方式时不会出于一个非常微妙的原因而工作。这也应该仅在*重复尝试纠正问题*并且每次尝试重新引入相同的缺陷后应用。在这种情况下，您应该将注释的直观代码添加为注释，并解释它为什么不起作用（因此未来的开发人员不会再次尝试相同的更改）：

```
// note by <author>: the X parameter here should normally
// be a reference:
// void teleport(dinosaur& X);
// but that would require that we raise another dinosaur and
// kill it every twelve hours
// as such, the parameter is passed by value
void teleport(dinosaur X); 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-05-11T12:27:19.127

*   **恐惧**。这让团队更加担心，产出更少。当引入更多死代码时，恐惧的程度会呈指数级上升。“我们不知道那个钻头有没有用过，所以我们不敢拿掉它，也不敢碰它。”
*   **翻天覆地的变化**。如果系统各处都需要更改的东西也存在于死代码中，你会更改它吗？很难知道它是否绝对没有在某个地方使用，所以它总是有风险的。即使它不会破坏任何东西，如果在此更改后将死代码重新使用，它是否会起作用？

    在处理彻底的更改时，开发人员还必须检查包含代码的每个地方，如果是死代码，这是多余的。当代码失效时检查它们需要更长的时间，因为很难验证它没有在任何地方使用。

*   **精神负担**。每次你需要考虑是否使用某些东西或是否应该对死代码做一些事情时，它需要你的一些脑力。
*   **大雁追逐**。“我需要一个关于如何使用 Foobar 的示例。哦，它在代码库中的这些地方。我会检查第一个命中并找出它在 UI 中的位置。嗯……在任何地方都找不到。”
*   **夸大的报告**（例如多少行代码、类、例程、更改）。扭曲项目的可见性和关于代码库哪些部分应该工作的决定以及对未来项目的估计。
*   **对代码库的信任减弱**。这可能会导致更多时间花在冗余任务上，并且会破坏使用代码库的流程。开发人员可能必须非常仔细地检查他们使用的所有东西是否会按照他们认为应该的方式工作。

如果您*知道*代码库的一部分没有被使用，这是非常有价值的，因为您可以将其删除。如果您让它保留，那么将来可能很难或几乎不可能确定它实际上没有被使用。例如，一些以令人惊讶的方式使用代码的东西：**反射、动态调用从字符串连接的例程、eval、框架魔术**。

但是，如果将来很有可能使用代码，那么如果它就在其他代码中而不是在版本控制系统中，则更容易添加。一段时间后，您可能不记得代码中包含的任何单词，因此很难从 VCS 的内部找到代码。但是我会让死代码很少存在，即使那样我也会将代码注释掉。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-12-29T07:45:05.407

死代码正在污染你的代码

死代码降低了可理解性和可读性。

最好的代码总是被重用，如果你有死代码，它会降低可重用性

我们受到模块化编码方法的驱动，我们设计代码是为了与我们的程序员同行进行交互，而不是为机器设计。我们应该尽最大的努力让他/她更容易理解我们的代码。反正机器会好的。

死代码或注释代码就像只会让人们感到困惑的虚假痕迹，所以要不惜一切代价避免它。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-06-11T21:49:22.550

*   未使用的代码是一个更大的搜索空间，供您通读以及通常扫描您的代码的任何其他内容。例如编译器、IDE、在文件中查找、调试、静态分析、更多要查看、文件包含、从 VCS 中检出等。这会减慢这些过程并增加大量噪音。
*   未使用的代码并不总是死代码。它可以在某些情况下执行。这不仅可以为错误和性能问题提供载体，还可以成为安全问题。就性能而言，这可以以意想不到的方式表达自己，例如更大的下载量。
*   未使用的代码产生未使用的代码。如果您删除一个函数调用，然后搜索该函数的用途以查看它是否仍然需要，您可能会看到以前未使用的代码的匹配项并假设您可以保留它。您拥有的未使用代码越多，确定代码是否未使用的跳数就越多。
*   未使用的代码仍然经常需要维护。假设 A 和 B 取决于 C。其中 B 未使用。您更改了 C，然后 B 将无法编译，因为您已从 B 所需的 C 中的结构中删除了一个成员，现在您必须修复 B 或主动将其从编译中删除。您应该简单地删除它。

这个列表可能看起来很简单，但其中每一个都以数百种不同的方式表现出来，增加了在整个开发过程中协同作用的阻力。效率低下通常可以用直接和数学的方式来证明或证明。

回应你的观点...

*   代码已经写好了，付出了努力

但它通常必须维护。它还会出现在文件中查找等内容中。

*   代码可以在语法和真实环境中进行测试

我不确定你说的这个是什么意思。我觉得和上一个一样。您的意思是代码已经过测试并且清理它可能意味着它需要重新测试。这是一个通常值得的成本，因为它会在 90% 的时间里得到回报，并且避免在投入生产之前应该对其进行清洁。几乎所有代码都有两次迭代，让它工作，让它干净。必须测试两次的原因是有人跳过了最后一步。如果您的代码也太昂贵而无法校对差异，测试（如果它有很多未使用的代码很可能是混乱的）等等，那么这就是另一个完整的问题。

*   如果组织良好（分组、单独的包、松散耦合等），它不会干扰您进行整体代码分析或重构

无论如何，您的代码应该是这样的，但这只能适度缓解问题。听到某些东西应该有条理但不干净，这是最奇怪的论点。尝试保持代码模块化并减少依赖是很正常的，但您也需要可重用的代码，如果您的所有模块都是孤岛，那么您可能还没有 DRY。您可能还会发现自己进行了过度的解耦，这只会缓解未使用的混乱代码的问题。

*   将来可能会使用代码

很多人过分重视书面代码。如果现在不使用它，它就是无用的，实际上，当你沿着这条路走下去时，通常只有一小部分未使用的代码会变成使用过的代码。很可能未使用的代码不可能是可用的或已使用的代码。最有可能被重用的代码是已经使用的正在做某事的代码。

更糟糕的是，未使用的代码没有目的。当有人出现并且必须更改最终会影响未使用代码的内容时，他们会坐在那里试图弄清楚这些没有目的的未使用代码需要做什么。

人们在开始时很容易有这种感觉，因为代码需要付出很多努力。然而，一旦流利并习惯了它，代码就像骑自行车一样。你会发现，随着编写这样一段代码的成本直线下降，保持它的成本就会上升。

*   删除后，作者可能会感到不舒服

这是作者的问题。一方面，将大量未使用的代码留给其他人处理是自私的。另一方面，如果作者将他们的感受置于代码质量之上，那么他们可能不应该编码。当你的代码被破坏时，你无法修复他们的代码，因为这会伤害他们的感情。如果某人仅仅因为它是他们的而不是因为它是好的而对代码感兴趣，这不是一个好兆头。作者应该对他们的代码被清理感到高兴。这就像有人为您取出垃圾并将其扔进垃圾箱。

I would be over the moon if someone did that for me. What might make it easier to get over those feelings is instead of waiting for someone else to do it try doing it yourself. Keep iteratively rewriting a piece of code you've done, making it perform better, move concise, with less excess and more flexible yet with less code each time. Try not to feel good about the quantity of code but how much you can achieve with however little code. This is grinding to level up and once you do that all your code will come out at a good level following so it wont need to be leveled as often.

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-03-22T20:43:48.013

这个讨论已经有好几年了，但我刚刚碰到它......

我没有看到提到的一件事是删除未使用的代码必须进行的工作。在许多情况下，删除未使用的代码所花费的时间和精力本质上并不是微不足道的，而且测试和记录重构的系统通常会产生额外的成本。只是在决策过程中要考虑的另一件事。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-03-29T08:55:44.157

首先，您应该始终使用源代码管理工具来管理您的项目，因此删除未使用的代码是一种很好的做法，因为您始终可以使用源代码管理来获取已删除的代码。对我来说，删除未使用代码的原因是只有知道未使用代码的人知道它，团队中的其他人会遇到该代码并尝试弄清楚它的作用以及它如何适合整个应用程序和经过这么多努力以至于根本没有使用代码会感到失望:)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-03-29T08:55:46.873

我认为你可以有两种情况： - 应用程序代码：如果它未使用，也许它随着时间的推移未经测试和无人维护，也许你可以转移到“内部代码存储库” - API 代码：如果你正在编写一个库，那么恕我直言更好的选择来维护它，但在您的积极开发过程中

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-12-15T02:26:12.170

### 您确定代码未使用吗？

检查代码是否仍然可以编译是不够的。在 C++ 中，如果您删除一个“未使用”的[隐式定义方法](https://en.wikipedia.org/wiki/Special_member_functions)，就像`operator=`您不会遇到编译器错误一样，该类将默默地开始使用（可能不正确的）默认实现。在 Java 或 C# 中，可以通过反射使用代码。在面向对象的语言中，继承可以发挥作用（现在可以调用基类）。几乎在任何语言中，另一个重载函数可能已经接管了。

检查版本控制中代码的使用年限，而不仅仅是未使用。我见过看起来未使用但刚刚提交的代码，实际上是另一个开发人员项目的第一步。

### 积极删除未使用的代码

您支付维护代码的费用：

*   修复损坏的构建（工程时间）。我们最近有一个复杂的`#include`更改链，为未使用的代码引入了新的重载，这给由数十名开发人员组成的团队中的每个工程师带来了相当大的头痛。
*   在机器资源中进行测试（假设您有自测连续构建）。我的团队最近查看了我们所有最慢的测试，其中许多都超出了其他未使用的代码。在本地或作为持续集成的一部分运行测试的工程师正在等待对未使用代码的测试。
*   在可读性方面（再次工程时间）。您的头文件代表一个 API。如果它们包含没有人愿意使用但每个人都必须阅读的功能，那么您的代码的学习曲线就会更加困难。
*   在代码搜索中（再次工程时间）。你会清理你的房子、你的硬盘或谷歌驱动器吗？您搜索域的次数越多，拥有相关内容以避免误报（或者您使用更复杂的搜索，如网络搜索引擎）就越重要。

我想说的是，普通开发人员编写的所有代码在五年内都会被闲置，因此这项活动*永远不会*停止。不要让这成为你；只写高质量和绝对必要的代码。

# php - 删除内容后文件大小增加

> ID：15699997
> 
> 赞同：3
> 
> 时间：2013-03-29T08:44:57.103
> 
> 标签：php

我最近清理了一些我的 .PHP 文件，其中包含很多不需要的代码，所以我删除了这些行，在一种情况下，它大约有 200 行代码。

发生的奇怪事情是，在重新保存那个 .PHP 文件后，大小从 70,3 kb 变为 72,5 kb。

这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T08:50:31.287

a) 行数较少但较长。

b) 你的编辑器自动神奇地改变了你的缩进，并用 4 个空格替换了 2 个空格，或者用 4 个空格替换了一个制表符。

c) 你的操作系统在骗你

d) 你的眼睛在耍花招

e）某种字符编码杂耍巫术正在进行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:50:11.657

一些不可见的东西可以使文件明显变大，所以最好的猜测包括

*   原来的有\n行结尾，新的有\r\n
*   原来有很多 latin1 字符 >127，新的使用 UTF-8
*   原来使用的标签，新的使用空格