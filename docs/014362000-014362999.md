# StackOverflow 问答 14362000-14362999

# java - 摩托罗拉 LS1203 条码扫描器

> ID：14362010
> 
> 赞同：3
> 
> 时间：2013-01-16T15:33:31.863
> 
> 标签：java, serial-port, barcode

我正在使用摩托罗拉 LS1203 条码扫描仪并尝试将其连接到 Java 程序。

我可以通过模拟键盘的 USB 电缆让它工作，并且可以很好地打印到记事本，我可以捕获该信息，但 Java 程序必须有焦点。

我更希望通过 RS232 仿真发送它（因为我可以让 Java 在 COM 端口上运行一个 eventListener），但是我应该连接到的计算机上没有串行端口，因为它是一台笔记本电脑。有没有办法让 HID 键盘仿真器在没有串行电缆的情况下通过 RS232 显示为 COM 设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:37:02.717

我认为特定型号不支持您正在寻找的东西（插入 USB 并将其显示为操作系统上的串行设备）。您可以做的是购买便宜的现成 USB 转串口加密狗，它可以为您的笔记本电脑提供一个串口。

这样的一个应该可以工作：[http ://www.newegg.com/Product/Product.aspx?Item=N82E16812107108](http://www.newegg.com/Product/Product.aspx?Item=N82E16812107108)

然后您需要 LS1203 串行接口电缆将 LS1203 连接到串行端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:53:34.903

此型号支持通过 USB 进行 RS232 仿真。摩托罗拉网站上有一个程序可以让您更改设置。

[http://www.motorola.com/Business/US-EN/Business+Product+and+Services/Bar+Code+Scanning/General+Purpose+Scanners/LS1203_US-EN](http://www.motorola.com/Business/US-EN/Business+Product+and+Services/Bar+Code+Scanning/General+Purpose+Scanners/LS1203_US-EN)

下载 123Scan 实用程序，并按照程序上的说明打印条形码的配置选项。这将允许您选择键盘仿真或 COM 端口仿真。从那里，它可以通过串行端口以 9600 波特读取。

哦，也没有 64 位 Windows 的驱动程序，我只能让它在 XP32bit 上运行，这可能会为其他人节省一些时间。

# android - 如何仅在纵向模式下运行相机

> ID：14362014
> 
> 赞同：2
> 
> 时间：2013-01-16T15:33:40.047
> 
> 标签：android, camera, orientation

我想“仅以纵向模式”运行相机。我在 AndroidManifest 中将 screenOrientation 设置为纵向，但是在拍摄照片时它仍然将方向更改为横向。如何强制它仅在纵向模式下运行。（仅导致三星 Galaxy s3 和注释 2）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:40:02.940

试着把它放在你的活动的 OnCreate

```
 if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD){
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE);
    } else {
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T20:12:56.970

解决方案在 androidmanifest 中进行了简单的修改。将 configChanges 属性添加到活动属性。

```
<activity android:name="com.x.yactivity" android:screenOrientation="portrait" android:configChanges="orientation"/> 
```

就这样。

# php - 包含表单 _REQUEST 的 PHP 插入语句上的 SQL 语法错误

> ID：14362015
> 
> 赞同：0
> 
> 时间：2013-01-16T15:33:40.297
> 
> 标签：php, mysql, syntax

我在将表单中的数据插入数据库时​​遇到了一个小问题，下面的 INSERT 语句：

```
 if (isset($_REQUEST['Submit'])) { 
        // Code to insert note into field;
        $sql = "INSERT INTO fields (notes) VALUES   
        ('".mysql_real_escape_string(stripslashes($_REQUEST['note']))."') 
        WHERE companyId='".$companyid['id']."' AND fileNumber ='".$filename."'";

        if($result = mysql_query($sql)) { 
        echo "<h1>Thank you</h1>Your information has been entered into our database<br><br>";
        } else { 
        echo "ERROR: ".mysql_error(); 
        } 
        } else { 
```

产生此错误消息：

```
 ERROR: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE companyId='11' AND fileNumber =''' at line 1 
```

首先，$filename 变量显然没有显示出来，我可以将 $companyid[id] var 复制到字段中，它会正确显示 var 内容，但仍然会引发语法错误。

我是一个 PHP SQL 菜鸟，正在自学，所以请对我温柔一点:)

这是完整的代码减去表格

```
 <?php 
include "header.php";
$checkFiles = "checkFiles.php";
// Catches form input from previous page and stores it into session variable called filename for future reference;
$_SESSION['filename']=$_POST['filename'];
$filename = $_SESSION['filename'];
//User id stuff from previous page too; 
$userid = $_SESSION['userid'];
$id = mysql_query("SELECT id FROM users WHERE DXNumber='".$userid."'");
// Returns pointer so fetch it as an array and insert it into variable $companyid for later use;
$companyid = mysql_fetch_array($id);

if (isset($_REQUEST['Submit'])) { 
// Code to insert note into field;
$sql = "INSERT INTO fields (notes) VALUES ('".mysql_real_escape_string(stripslashes($_REQUEST['note']))."') 
        WHERE companyId='".$companyid['id']."' AND fileNumber ='".$filename."'";
    if($result = mysql_query($sql)) { 
        echo "<h1>Thank you</h1>Your information has been entered into our database<br><br>";
        } else { 
        echo "ERROR: ".mysql_error(); 
        } 
        } else { 
        ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:38:08.893

`INSERT INTO`语句没有`WHERE`从句。

它应该是`INSERT INTO <table> (field1, field2, field3) VALUES (value1, value2, value3)` 而不是`INSERT INTO <table> (field1) VALUES (value1) WHERE field2 = value2`等等。

请参阅[http://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)。

# database - 使用 LabVIEW 2012 连接到 Access 2010

> ID：14362022
> 
> 赞同：2
> 
> 时间：2013-01-16T15:33:59.873
> 
> 标签：database, ms-access, labview

如果 LabVIEW 和 Access 2007 安装在同一台机器上，则提供程序“Microsoft Office 12.0 Access Database Engine OLE DB Provider”（位于工具->创建数据链接下）可用于创建与 Access 数据库的连接。在装有 Access 2010 的机器上，此提供程序未列出（可以理解为 Accesss 2010 是 MS Office V14 的一部分，而不是 V12），但似乎没有明显合适的提供程序在其位置上列出。请问如何在 LabVIEW 2012 中创建与 Access 2010 数据库的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:03:18.083

根据 LabVIEW 2012 Database Connectivity Toolkit 的 NI 知识库 README 文件，您应该使用 Microsoft Jet 4.0（或更高版本）OLE DB Provider

[http://digital.ni.com/public.nsf/allkb/4C95363F9DC59E1586257A13000F35F6#dbclient](http://digital.ni.com/public.nsf/allkb/4C95363F9DC59E1586257A13000F35F6#dbclient)

# android - 如何通过轮廓多边形设置按钮？安卓

> ID：14362027
> 
> 赞同：5
> 
> 时间：2013-01-16T15:34:25.733
> 
> 标签：android, shape, android-button

有两个相邻的图形按钮。如果我使用坐标的计算方法 touch `TouchEvent`，我必须创建一个大的坐标数组。也许还有另一种方法？

![图像按钮](../Images/36a2a9a76949cbbcf7fae64d89d60675.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T11:35:50.973

可能不是最好的解决方案，但您可以重叠两个按钮，每个按钮代表图像的一部分（黑色或白色），并使图像的其余部分`Button`透明（两个按钮的图像具有相同的尺寸）。您还需要扩展`Button`该类以覆盖该`onTouchEvent`方法如何处理触摸事件，具体取决于触摸发生的点是透明点还是“图像”点。我制作了一个小样本项目，获得了`Button`如下两部分（忽略我的设计技能）：

![在此处输入图像描述](../Images/907213987c894405f358f9356a69149f.png)

你可以在[这里找到这个项目](https://github.com/luksprog/sasp/tree/master/widgets/OddShapedButtons)，它很容易解释。看看对你有没有帮助。

# performance - 渲染 8000 多个项目时如何优化 Mustache 渲染速度？

> ID：14362030
> 
> 赞同：2
> 
> 时间：2013-01-16T15:34:30.350
> 
> 标签：performance, optimization, rendering, mustache

我正在尝试渲染表格，因此模板非常简单；行模板如下所示：

```
 <script type=\"text/mustache\" id=\"template-list-records\">
  {{#.}}
   <tr>
    <td>{{airport_code}}</td>
    <td>{{city_code}}</td>
    <td class=\"pull-right\">
     [<a href=\"result.mics?m_uid={{airport_code}}\" class=\"listlink\">details</a>]
    </td>
   </tr>
  {{/.}}
  </script> 
```

问题是，当渲染超过 1000 个结果时，渲染速度开始呈指数级下降（我猜它一直呈指数级减速:)，但在 1000 多个结果时，渲染速度是非线性的，这一点很明显。现在，在 4000 个结果中，页面加载时间为 2.3 秒。在 7000 个结果时，渲染时间为 7.3 秒，渲染完整结果集（大约 8500 个结果）需要 10 秒。现在，我不需要将其加速到超过 8 秒来完全加载结果（因为这是旧功能渲染页面所花费的时间），这将是一个奖励:)，但我仍然需要剃须 2 秒。我查看了 Timeline 检查器，时间都花在了渲染上；渲染在 2.5 秒后开始。

我猜问题的一部分可能是我的笔记本电脑（我有一些显卡问题），但我仍然感兴趣是否有办法加快速度，例如预编译具有 8500 行的表并添加/删除行，如果需要（这确实是一个机场列表，所以这个数字不会经常改变，当它改变时，它不会改变太多）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:56:38.693

新想法：为什么不增量渲染页面呢？我想 8500 行是相当多的“页面”（在 1080p 屏幕上肯定有大约 200 个“页面”），因此您可以轻松实现连续滚动机制，根据需要将数据保持在小块中。

假设对于初学者，您开始渲染前 500 个项目（这已经很多），然后当用户开始滚动并接近总滚动大小的 80% 左右时，您会渲染 200 额外的行。你一直这样做，直到你用完要渲染的行。

如果您有一个要求说您需要立即提供所有内容（例如，以便用户可以 ctrl+F ），您仍然可以尝试分块渲染：而不是为您的模板提供整个数据集，而是将其分解以 500 个为一组，并根据需要使用这些较小的套件多次调用 Mustache。如果它仍然阻塞，请在调用之间添加一个小超时以提高感知响应能力。

TBH，我重新阅读了您的问题，您的大部分时间似乎都花在浏览器上，试图计算您的表格布局，因此这些建议应该适用于您的情况。作为最后的手段，您可以尝试使用 CSS `table-layout: fixed;`，这将大大加快您的表格渲染速度，但也会迫使您手动定义列宽，因为表格将不再根据其内容动态调整列宽。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:47:42.077

[您是否尝试过像Hogan](http://twitter.github.com/hogan.js/)或[Handlebars](http://handlebarsjs.com/)这样的替代 Mustache 实现？

您的模板非常小，因此使用预编译模板功能不会给您带来太多好处，但特别是在 Hogan 的情况下，它经过微调以尽可能加快渲染算法，因此有机会通过简单地使用 vanilla Mustache 之外的替代实现已经可以解决您的问题。

此外，如果您还没有使用最新版本的 Mustache.js，您可以尝试简单地升级。旧版本（大约 1.5 年）存在严重的性能问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-28T11:10:43.377

如何将胡须渲染的 HTML 添加到 DOM 中？

尝试一次性添加渲染代码，而不是连续插入。

缓慢，许多插入：

```
for () {
  table.innerHTML = table.innerHTML + Mustache.render(row);
} 
```

更快，1 个插入：

```
var buffer = '';
for () {
  buffer = buffer + Mustache.render(row);
}
table.innerHTML = buffer; 
```

# django - 外键的外键在管理员更改表单中不可用

> ID：14362037
> 
> 赞同：0
> 
> 时间：2013-01-16T15:34:57.917
> 
> 标签：django, django-admin

我的架构：

```
class Component():
  comp_id = models.CharField('Component ID', primary_key=True, db_column='comp_id')
  path = models.CharField('Path')

  def __unicode__(self):
    return self.path

class Configuration():
  config_id = Models.AutoField('Config ID', db_column='config_id', primary_key=True)
  component = models.ForeignKey('Component', db_column='component')
  org_id = models.Integer.Field('Org ID')

  def __unicode__(self):
    return "{} + {}".format(self.org_id, self.component)

class Result():
  result_id = Models.AutoField('Result ID', db_column='result_id', primary_key=True)
  config = models.ForeignKey('Configuration', db_column='config') 
```

在结果的更改表单中，我希望配置外键由下拉列表表示。但相反，该页面不会呈现，并且我收到 DatabaseError 异常并显示消息：“尝试启动新的 SQL Server 操作，结果未决。” 我认为正在发生的事情是 Result.config 下拉列表正在尝试解析配置的 unicode 表示，但这意味着要深入一层外键来解析相关组件的 unicode，而数据库将不允许这样做。有人看到解决此错误的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:47:49.583

事实证明，我的安装依赖于 MS SQL Server 的自定义数据库后端，我需要编辑它的 base.py 文件以在 DatabaseFeatures 类中包含以下行：

```
can_use_chunked_reads = False 
```

# android - arm-eabi-gcc：尝试设置 LiME 时找不到命令

> ID：14362039
> 
> 赞同：0
> 
> 时间：2013-01-16T15:35:08.070
> 
> 标签：android, compilation

我没主意了。我觉得我做的一切都是正确的。我正在尝试使用 LiME 从 android 捕获内存图像。如果我执行以下操作...

```
 $ cd $my_android_ndk_path/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/
   $ make ARCH=arm CROSS_COMPILE=arm-eabi- modules_prepare 
```

它返回

```
 make: *** No rule to make target `modules_prepare'.  Stop. 
```

如果我从我的内核源（我的 .config 所在的位置）键入相同的命令 $ make ARCH=arm CROSS_COMPILE=path/to/android_ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin /arm-eabi-modules_prepare

它返回

```
 make: /path/to/android_ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-eabi-gcc: Command not found
    CHK     include/linux/version.h
    make[1]: `include/asm-arm/mach-types.h' is up to date.
    CHK     include/linux/utsrelease.h
    SYMLINK include/asm -> include/asm-arm
    CC      kernel/bounds.s 
```

我确信我的目录是正确的。有谁知道我做错了什么。我没有为 ndk 使用任何特定的工具。我只是分别解压缩了 ndk 和 sdk 并安装了 JDK。一切都应该工作，但事实并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:54:27.953

您是否检查过您的 arm-eabi-gcc（命令：文件 /arm-eabi-gcc）编译器和您的机器（32 位或 64 位）之间的兼容性？如果您的 arm-eabi-gcc 与 32 位机器兼容，为了防止在 64 位机器上出现“make: arm-eabi-gcc: Command not found”之类的错误，您必须安装包“ia32-libs”（命令: sudo apt-get install ia32-libs)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:02:17.840

`modules_prepare`是内核准备程序。其目的是确保存在足够的头文件，以便您随后可以针对该内核源代码树构建内核模块。你看，内核有一些自动生成的文件，至少不运行`modules_prepare`，内核模块编译是不可能的。

为此，当您从内核树运行 modules_prepare 时，这是一个正确的操作。从交叉编译器运行它是没有意义的，因为它不理解你想要做什么。

我建议您通过将交叉编译器添加到 PATH 来让您的生活更轻松，如下所示：

```
PATH=$PATH:$my_android_ndk_path/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/
cd <kernel directory>
make ARCH=arm CROSS_COMPILE=arm-eabi- modules_prepare 
```

所以这说... modules_prepare 只是准备构建模块的第一步。如果您正在尝试构建内核模块~~（LiME？我不知道那是什么），~~那么您需要[按照构建内核模块的步骤进行](http://www.kernel.org/doc/Documentation/kbuild/modules.txt)操作。

编辑：

现在我知道您正在构建什么内核模块（石灰取证），我可以看到它的[SVN 源代码](http://code.google.com/p/lime-forensics/source/browse/trunk/src/Makefile)。Makefile 要求您为本地计算机构建，而不是交叉编译。

更改以下内容：

```
default:
        $(MAKE) -C /lib/modules/$(KVER)/build M=$(PWD) modules 
```

至

```
default:
        $(MAKE) -C <your Android kernel> ARCH=arm CROSS_COMPILE=arm-eabi- M=$(PWD) modules 
```

这可能会让你走得更远。

# javascript - IE6 变量仅在 alert() 中有效

> ID：14362042
> 
> 赞同：0
> 
> 时间：2013-01-16T15:35:15.607
> 
> 标签：javascript, delphi, internet-explorer-6

我在 delphi 应用程序中使用 TWebBrowser 组件并使用 JavaScript 进行通信。

在 JavaScript 中，我有以下代码：

```
function test() {
  var nr = external.GetNumber();
  alert(nr);
  nr = parseInt(nr); // this is where the javascript fails
  doSomethingWith(nr);
} 
```

alert(nr) 函数显示了我期望的数字（例如：1517376），但是当我调用 parseInt（或任何其他函数）时，它失败并显示“external.GetNumber(); is not a string”。nr 的类型是 "undefined" 。

有没有办法将其转换为字符串或数字？我尝试了 nr.toString(), String(nr), nr = nr + '' 并且它们都失败了，因为“预期字符串”。这只发生在 IE6 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:35:49.523

你有2个问题：

*   `external.GetNumber();`可能不返回字符串类型

您可以通过添加一个空字符串在 js 中解决此问题，这会将 nr 隐式转换为字符串类型：

`var nr = ""+ external.GetNumber();`

*   js parseInt 函数使用 radix 参数，[这里有完整的解释](https://stackoverflow.com/a/850346/800214)：

    `nr = parseInt(nr, 10);`// 正确使用

令我困惑的是，你为什么不首先返回一个数字？我们只能猜测，因为您没有共享 external.GetNumber(); 背后的代码；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:38:31.660

我不认为你在提醒真正的错误。尝试：

```
var nr;
try{ nr = external.GetNumber(); } catch(e) { alert(nr); } 
```

# javascript - Vanilla JS 插件模板

> ID：14362047
> 
> 赞同：10
> 
> 时间：2013-01-16T15:35:44.580
> 
> 标签：javascript

好的，我们都知道如何编写 jQuery 插件：[http ://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

有人可以就带有方法和默认设置的*纯 Javascript模板插件提供建议吗？*

我想让它与单个节点和节点数组（`querySelectorAll`）一起工作

像这样的东西：

```
var PluginName = function(selector){
    ...
} 
```

并这样称呼它：

```
var dropdown = new PluginName('.dropdown'); 
```

并且能够像这样关闭所有下拉菜单：

```
dropdown.close(); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-06-18T21:13:27.047

一段时间以来，我一直在使用带有 inits 和公共方法的模块模式。不是 jQuery 插件模式的完全匹配，但相当可扩展并且工作得非常好。刚刚为 UMD/CommonJS/AMD/etc 更新了它。

您可以在此处查看[我的入门模板](https://gist.github.com/cferdinandi/ece94569aefcffa5f7fa)，并在此处查看一个[工作示例](https://github.com/cferdinandi/smooth-scroll)。

为了更好地衡量，完整的模板在这里：

```
/**
 *
 * Name v0.0.1
 * Description, by Chris Ferdinandi.
 * http://gomakethings.com
 *
 * Free to use under the MIT License.
 * http://gomakethings.com/mit/
 *
 */

(function (root, factory) {
    if ( typeof define === 'function' && define.amd ) {
        define(factory);
    } else if ( typeof exports === 'object' ) {
        module.exports = factory;
    } else {
        root.Plugin = factory(root); // @todo Update to plugin name
    }
})(this, function (root) {

    'use strict';

    //
    // Variables
    //

    var exports = {}; // Object for public APIs
    var supports = !!document.querySelector && !!root.addEventListener; // Feature test

    // Default settings
    var defaults = {
        someVar: 123,
        callbackBefore: function () {},
        callbackAfter: function () {}
    };

    //
    // Methods
    //

    /**
     * Merge defaults with user options
     * @private
     * @param {Object} defaults Default settings
     * @param {Object} options User options
     * @returns {Object} Merged values of defaults and options
     */
    var extend = function ( defaults, options ) {
        for ( var key in options ) {
            if (Object.prototype.hasOwnProperty.call(options, key)) {
                defaults[key] = options[key];
            }
        }
        return defaults;
    };

    /**
     * A simple forEach() implementation for Arrays, Objects and NodeLists
     * @private
     * @param {Array|Object|NodeList} collection Collection of items to iterate
     * @param {Function} callback Callback function for each iteration
     * @param {Array|Object|NodeList} scope Object/NodeList/Array that forEach is iterating over (aka `this`)
     */
    var forEach = function (collection, callback, scope) {
        if (Object.prototype.toString.call(collection) === '[object Object]') {
            for (var prop in collection) {
                if (Object.prototype.hasOwnProperty.call(collection, prop)) {
                    callback.call(scope, collection[prop], prop, collection);
                }
            }
        } else {
            for (var i = 0, len = collection.length; i < len; i++) {
                callback.call(scope, collection[i], i, collection);
            }
        }
    };

    /**
     * Remove whitespace from a string
     * @private
     * @param {String} string
     * @returns {String}
     */
    var trim = function ( string ) {
        return string.replace(/^\s+|\s+$/g, '');
    };

    /**
     * Convert data-options attribute into an object of key/value pairs
     * @private
     * @param {String} options Link-specific options as a data attribute string
     * @returns {Object}
     */
    var getDataOptions = function ( options ) {
        var settings = {};
        // Create a key/value pair for each setting
        if ( options ) {
            options = options.split(';');
            options.forEach( function(option) {
                option = trim(option);
                if ( option !== '' ) {
                    option = option.split(':');
                    settings[option[0]] = trim(option[1]);
                }
            });
        }
        return settings;
    };

    // @todo Do something...

    /**
     * Initialize Plugin
     * @public
     * @param {Object} options User settings
     */
    exports.init = function ( options ) {

        // feature test
        if ( !supports ) return;

        // @todo Do something...

    };

    //
    // Public APIs
    //

    return exports;

}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-16T15:49:01.643

我会说你想要一个 JavaScript 类。

```
var PluginName = function(selector){
    // Constructor here
    this.el = document.querySelector(selector);
}

PluginName.prototype.close = function(){
    console.log(this.el);
}

PluginName.prototype.anotherMethod = function(){
    console.log(this.el);
} 
```

然后你可以这样做：

```
var dropdown = new PluginName('.dropdown');
dropdown.close();
dropdown.anotherMethod(); 
```

插件的一种常见做法是在构造函数中传递一个选项对象。通过这种方式，您可以优雅地参数化某些行为。例子：

```
var dropdown = new PluginName({el:'.dropdown',slideInterval:1000, effect:'fade'}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-16T15:46:48.920

查找 javascript 原型继承。

```
function PluginName(selector) {
    this.node = document.querySelector(selector);
        if (this.node == null) {
            // whoops node not found! Handle Error
        }

    return this;
}

PluginName.prototype.close = function() {
        this.var = "blah";
        // do stuff
}

var myPlugin = new Plugin(".selector") 
```

这个网站也有很棒的 javascript 设计模式 - [http://addyosmani.com/resources/essentialjsdesignpatterns/book/](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)

# php - 带有自定义会话处理程序的 PHP 会话上传进度

> ID：14362049
> 
> 赞同：0
> 
> 时间：2013-01-16T15:36:00.843
> 
> 标签：php, session

PHP5.4 提供[会话上传进度](http://php.net/manual/en/session.upload-progress.php)指示。我注意到它有效，但前提`session.save_handler`是设置为`files`，并且`session.name`未修改。一旦我修改了这些值，超全局`$_SESSION['upload_progress_<key>']`就为空/未设置。

是否可以提供会话上传进度指示，但使用自定义会话处理？即使保存处理程序`memcache`也不起作用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:52:22.700

正如@Marc 指出的那样：在上传过程中，会话上传进度指示正在运行*，*并且*在*控制权移交给用户的 PHP 代码之前。因此，php 上传处理程序使用`.ini`文件中设置的配置数据，并且只能使用当时可用的模块。

可以使用`memcache`保存处理程序，或指定不同的会话名称，只要所有内容都在`.ini`文件中配置：

```
session.save_handler = memcache
session.save_path = "tcp://198.51.100.1:11211?persistent=1&weight=1&timeout=1&retry_interval=15,tcp://198.51.100.2:11211?persistent=1&weight=1&timeout=1&retry_interval=15"
session.name = "myUploadProgressSession" 
```

无法通过`ini_set("session.save_handler", "memcache")`代码指定这些设置，因为执行得太晚了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T11:33:49.983

虽然 session.upload_progress 只有在 session.save_handler 设置为文件时才会起作用，但仍然可以对其进行管理。在您检查上传进度的 ajax 调用中，只需避免使用用户 session.save_handler。上传完成后，您可以删除不需要的 sess_xxx 文件，这些文件将留在您的临时目录中，方法是在您的用户会话设置中执行以下操作：

```
//setup the garbage collection parameters which will be used by both the user and file session.save_handler

ini_set('session.gc_maxlifetime', $this->tempo);
ini_set('session.gc_probability', '1');
ini_set('session.gc_divisor', '100');

//destroy the sess_xxx files left from the file session.save_handler for *this* session 
//and let the GC remove any which are left over from the file save_handler for *other sessions*

ini_set('session.save_handler', 'files');
session_start();
session_unset();
session_destroy(); //this will remove the sess_xxx temp files

//now set the handler to user defined

ini_set('session.save_handler', 'user'); 
```

# c# - 从所需 XML 的 C# XML 反序列化

> ID：14362052
> 
> 赞同：0
> 
> 时间：2013-01-16T15:36:02.733
> 
> 标签：c#, xml, deserialization

我正在尝试将 XML 反序列化为可用的对象图。我想让 XML 尽可能地人性化，因为在我们拥有能够在我们的系统中生成对象结构的工具之前还需要一段时间。

我正在寻找的是看起来像这样的 XML

```
<RuleSet>
  <Conditions>
    <AttributeEqualTo>
      <Id>C1</Id>
      <AttributeName>Foo</AttributeName>
      <ExpectedValue>Bar</ExpectedValue>
    </AttributeEqualTo>
    <AttributeNotEqualTo>
      <Id>C2</Id>
      <AttributeName>Blah</AttributeName>
      <ExpectedValue>Value</ExpectedValue>
    </AttributeNotEqualTo>
  </Conditions>
  <States>
    <State>
      <Id>Start</Id>
      <Transitions>
        <Transition>
            <Condition>C1</Condition>
            <State>S1</State>
        </Transition>
        <Transition>
            <Condition>C2</Condition>
            <State>S2</State>
        </Transition>
      </Transitions>
    </State>
    <State>
      <Id>S1</Id>
      <Transitions>
        <Transition>
            <Condition>C2</Condition>
            <State>S2</State>
        </Transition>
      </Transitions>
    </State>
    <State>
      <Id>S2</Id>
    </State>
  </States>
</RuleSet> 
```

我正在寻找的是一个对象图，其中包含一个 RuleSet 对象，该对象具有一个可枚举的条件和一个可枚举的状态。每个状态将有一个可枚举的转换，这些转换由之前定义的条件、规则集的条件和另一个状态组成。

有没有一种简单的方法可以做到这一点，因为有人已经用 C# 编写了一个 XML 解析器，而不必编写我们自己的自定义解析器？

从最初的回答来看，我认为我需要增加一点清晰度。当我尝试序列化我们的对象图的一个简单版本时，打开维护引用的设置以减少重复。我收到以下信息：

```
<RuleSet z:Id="1" >
    <Conditions z:Id="2" xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
        <a:anyType z:Id="3" i:type="b:AttributeEqualTo" >
            <b:AttributeName z:Id="4">Foo</b:AttributeName>
            <b:ExpectedValue z:Id="5" i:type="c:string" xmlns:c="http://www.w3.org/2001/XMLSchema">Bar</b:ExpectedValue>
            <b:Id z:Id="6">C1</b:Id>
        </a:anyType>
        <a:anyType z:Id="7" i:type="b:AttributeEqualTo" >
            <b:AttributeName z:Ref="5" i:nil="true"/>
            <b:ExpectedValue z:Ref="4" i:nil="true"/>
            <b:Id z:Id="8">C2</b:Id>
        </a:anyType>
    </Conditions>
    <States z:Id="9" xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
        <a:anyType z:Id="10" i:type="b:State" >
            <b:EntryActions z:Id="11"/>
            <b:Id z:Id="12">S1</b:Id>
            <b:Transitions z:Id="13" z:Size="2">
                <a:anyType z:Id="14" i:type="c:Transition" >
                    <c:Condition z:Ref="3" i:nil="true"/>
                    <c:Next z:Id="15" i:type="b:State">
                        <b:EntryActions z:Id="16"/>
                        <b:Id z:Id="17">S2</b:Id>
                        <b:Transitions z:Id="18" z:Size="1">
                            <a:anyType z:Id="19" i:type="c:Transition">
                                <c:Condition z:Ref="7" i:nil="true"/>
                                <c:Next z:Id="20" i:type="b:State">
                                    <b:EntryActions z:Id="21"/>
                                    <b:Id z:Id="22">S3</b:Id>
                                    <b:Transitions z:Id="23" z:Size="0"/>
                                </c:Next>
                            </a:anyType>
                        </b:Transitions>
                    </c:Next>
                </a:anyType>
                <a:anyType z:Id="24" i:type="c:Transition" >
                    <c:Condition z:Ref="7" i:nil="true"/>
                    <c:Next z:Ref="20" i:nil="true"/>
                </a:anyType>
            </b:Transitions>
        </a:anyType>
        <a:anyType z:Ref="15" i:nil="true"/>
        <a:anyType z:Ref="20" i:nil="true"/>
    </States>
</RuleSet> 
```

我想要做的是将 z:Id="x" 和 z:Ref="x" 替换为我自己的 Id 属性的用法。再次使系统更具人类可写性。我看到了如何通过在 C# 类中设置属性来更改标签的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:42:31.190

您不需要编写自己的解析器。您可以将 Xml 序列化属性应用于您的类，这将控制序列化和反序列化过程。或者您可以使用现有的解析器，例如 Linq to Xml。

下面是一个[Xml 序列化属性](http://msdn.microsoft.com/en-us/library/83y7df3e%28v=vs.71%29.aspx)使用的例子：

```
public class RuleSet
{
    [XmlArrayItem(typeof(AttributeEqualTo))]
    [XmlArrayItem(typeof(AttributeNotEqualTo))]
    public List<Condition> Conditions { get; set; }
}

public class Condition
{
    public string Id { get; set; }
    public string AttributeName { get; set; }
    public string ExpectedValue { get; set; }
}

public class AttributeEqualTo : Condition
{
    // code
}

public class AttributeNotEqualTo : Condition
{
    // code
} 
```

和反序列化：

```
XmlSerializer serializer = new XmlSerializer(typeof(RuleSet));
RuleSet ruleSet = (RuleSet)serializer.Deserialize(stream_with_xml); 
```

使用相同的方法来反序列化状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:56:10.353

首先，要（反）序列化的对象是类或结构。您将需要一个 using 语句，包括 System.Xml 和 System.Xml.Serialization（在我的脑海中）。

然后你必须用 [Serializable] 属性装饰这个类/结构声明。如果您希望将其序列化为 XML 元素或 [XmlAttribute] 如果您希望将其序列化为您的序列化类的 XML 属性，请使用其相应的属性装饰您想要（反）序列化的每个公共属性和方法/结构。

还要确保你的类有一个无参数的构造函数，否则序列化将失败。

最后但同样重要的是，使用 XmlSerializer/XmlDeserializer 生成/解析。编写自定义 XML 解析的日子已经一去不复返了，这绝对是一个巨大的节省时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:48:54.897

您可以为此使用[XmlSerializer 。](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)此外，假设您在所需的 XML 中没有任何 XML 属性，您还可以使用[NetDataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.netdatacontractserializer.aspx)（DataContractSerializer 不支持发出属性 - 仅支持元素）。

无论哪种方式，您都可能需要使用属性（XmlAttributes 或 DataMember 属性）注释您的 C# 类，以使其根据需要精确序列化。

# html - 将两个表格排成一行

> ID：14362057
> 
> 赞同：0
> 
> 时间：2013-01-16T15:36:14.823
> 
> 标签：html, html-table, inline

我有以下代码：

```
<div id="topinfo" style="margin: 10px 320px">
<table>
<tr>
<td>
<img src="/images/topinfo/flagpt.png""/>
</td>
<td>
<img src="/images/topinfo/flaguk.png""/>
</td>
</tr>
</table>

<table>
<tr>
<td>
<img src="/images/topinfo/assistencia.png" /> </br>
<img src="/images/topinfo/numero.png" />
</td>
<td background="/images/topinfo/separator.png">
</td>
<td>
<a href='/top-info/sobre-nos'><img src="/images/topinfo/sobrenos.png" /> </a> </br>
<a href='/top-info/contactos'><img src="/images/topinfo/contactos.png" /> </a>
(...) 
```

它下面还有更多代码，但我不相信它的问题，只是一些基本的图像和链接

我的问题是我想让它们都在同一行，而目前这不起作用。我尝试在表格和 div 中使用“style='display:inline;'”，但仍然无法正常工作。我也尝试“合并”两张桌子，但它们的高度固定，不能很好地融合在一起。

可能有一个非常简单的修复方法，但我对 css 和 html 还不太专业。

（屏幕截图显示了它的当前状态。左边的图形是一个带有“float:left;”的标志）

![截屏](../Images/394e2fe91658bb1c922d01eacdc624b1.png)

编辑：（还添加了当我尝试在同一张表中执行它们时会发生什么）

![截图 2 同一张桌子](../Images/cdeba2adeb1bd3a64c2843dc7a14a444.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:41:10.203

编辑：尝试将图像放在与文本相同的 td 中，并将分隔图像编辑为更高。

```
<table>
<tr>
<td>
<img src="/images/topinfo/flagpt.png""/>
<img src="/images/topinfo/assistencia.png" /> </br>
<img src="/images/topinfo/numero.png" />
</td>
<td background="/images/topinfo/separator.png">
</td>
<td>
<img src="/images/topinfo/flaguk.png""/>
<a href='/top-info/sobre-nos'><img src="/images/topinfo/sobrenos.png" /> </a> </br>
<a href='/top-info/contactos'><img src="/images/topinfo/contactos.png" /> </a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:12:47.480

没关系，我使用单个表格和“valign=middle”属性来对齐所有内容。

不管怎么说，还是要谢谢你。

# macos - Mac OSX 捆绑包的图标

> ID：14362063
> 
> 赞同：14
> 
> 时间：2013-01-16T15:36:46.827
> 
> 标签：macos, icons, bundle, finder

我编译了一个名为 MyBundle.bundle 的 Mac OSX 包，它用作另一个应用程序的插件。我希望捆绑包有一个唯一的图标，因此我将 Info.plist 文件设置为：

```
<key>CFBundleIconFile</key>
<string>MyIcon.icns</string> 
```

并将文件 MyIcon.icns 放在包的 MyBundle.bundle/Contents/Resources 文件夹中。

这不起作用，查找器显示包的通用图标并忽略指定的 MyIcon.icns 文件。如果我将包的扩展名从 .bundle 更改为 .app 图标会立即显示 - 所以我知道 Info.plist 是正确的。

我找到了一个模拟用户在捆绑包上复制和粘贴图标的解决方法：

我将图标作为“icns”类型的资源和 id -16455 添加到包的 .rsrc 文件中。

我比打电话

```
/Developer/Tools/SetFile -a BC MyBundle.bundle 
```

这行得通，但真的很蹩脚。从 Mac OS 10.8 开始，SetFile 需要永远执行。

我的问题：是否可以强制 Finder 在没有此类黑客的情况下显示捆绑包的图标？

顺便说一句：关于同一主题有一个问题：[Set icon of non app mac os x bundle](https://stackoverflow.com/questions/4806085/set-icon-of-non-app-mac-os-x-bundle)；但是那里唯一的答案是关于如何创建图标的说明，并且对解决问题没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T05:04:31.740

您可以使用 NSWorkspace

`[[NSWorkspace sharedWorkspace] setIcon:(NSImage *)image forFile:(NSString *)fullPath options:(NSWorkspaceIconCreationOptions)options]`

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T14:01:24.420

此解决方案将为您的所有 .bundle 关联相同的图标。我不确定这是您需要的（或者您是否需要每个 .bundle 的特定/不同图标）。

如果您可以修改应用程序包：您可以定义与应用程序关联的文档类型。为此，您必须编辑应用程序包：

*   将插件图标放在应用程序资源中：`TheOtherApp.app/Contents/Resources/MyIcon.icns`
*   编辑`TheOtherApp.app/Contents/Info.plist`并添加如下内容：

    ```
     <key>CFBundleDocumentTypes</key> 
     <array>
      <dict>
        <key>CFBundleTypeName</key>
        <string>TheOtherApp Plugin</string>
        <key>CFBundleTypeRole</key>
        <string>None</string>
        <key>CFBundleTypeIconFile</key>
        <string>FlexoDocument.icns</string>
        <key>CFBundleTypeExtensions</key>
        <array>
          <string>bundle</string>
        </array>
        <key>LSTypeIsPackage</key>
        <string>true</string>
      </dict>
    </array> 
    ```

developer.apple.com 上有关[CFBundleDocumentTypes](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html)的更多信息

您可能需要重新启动查找器和/或应用程序才能看到效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-13T16:31:43.773

尝试`.icns`在文件中不包含该部分`plist.info`：

```
<key>CFBundleIconFile</key>
<string>MyIcon.icns</string> 
```

将其更改为：

```
<key>CFBundleIconFile</key>
<string>MyIcon</string> 
```

我使用这种技术成功地创建了一个带有自定义图标的包：[https ://gist.github.com/Noitidart/6a2cbe0b4c74499765be](https://gist.github.com/Noitidart/6a2cbe0b4c74499765be)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-01-25T04:40:34.653

简单方法：打开一个图片文件全选副本，点击项目，apple-i获取信息，点击弹出窗口中的图标，点击apple-v。

就这么简单。

# jquery-mobile - jQuery Mobile 在输入焦点上显示键盘

> ID：14362066
> 
> 赞同：12
> 
> 时间：2013-01-16T15:36:54.547
> 
> 标签：jquery-mobile, keyboard, focus

当我关注文本输入时，无法显示 Android 键盘。我在初始化页面的函数中有这个：

```
jQuery(document).bind('pageshow', function()
{
    jQuery($inputItemReference).focus();
    jQuery($inputItemReference).prompt();
}); 
```

$inputItemReference 是一个指向输入文本框的变量。

有人告诉我 prompt() 会显示键盘。但是，事实并非如此。我只得到输入以在页面加载时显示闪烁的光标。如果我想显示键盘，我必须再次点击输入。我希望在页面加载时正确显示键盘。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-27T12:24:38.547

如果您使用的是 cordova/phonegap，请将其添加到 config.xml：

```
<preference name="KeyboardDisplayRequiresUserAction" value="false" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:24:52.487

基于这个答案，[在 javascript 中显示手机上的虚拟键盘](https://stackoverflow.com/questions/6837543/show-virtual-keyboard-on-mobile-phones-in-javascript)，这是不可能的。

> 你不能，至少在 iOS (iPhone) 中不能，我相信 Android 也是如此。这是一个可用性问题，除了用户输入外，不应允许键盘触发（如果它是自动的，那就很烦人了）。
> 
> 我知道有几种方法可以解决这个问题：
> 
> `prompt()`打开键盘`.focus()`_`.click()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-02T22:57:34.973

好的，所以我找到了一种在一定程度上做到这一点的方法。在 Android 上的 Chrome 上测试。这是 jsFiddle：http: [//jsfiddle.net/Twisty/x0tcr5ph/2/](http://jsfiddle.net/Twisty/x0tcr5ph/2/)

**查询：**

```
$(document).on("pageshow", "#loginDialog", function () {
    // When entering loginDialog
    $("label:first").click();
});
$(function () {
    $("#startBtn").click(function () {
        $.mobile.changePage('#loginDialog', 'pop', true, true);
    });
}); 
```

**HTML：**

```
<div data-role="page">
    <div data-role="header" data-theme="b">
         <h1>Test Focus onLoad</h1>
    </div>
    <div data-role="content"> <a href="#" id="startBtn" data-role="button">Login</a>
    </div>
</div>
<div id="loginDialog" data-role="dialog">
    <div data-role="header" data-theme="b">
         <h2>Login</h2>
    </div>
    <div data-role="content">
        <form>
            <label for="text1">User</label>
            <input type="text" name="login" id="text1" />
            <label for="text2">Password</label>
            <input type="password" name="pass" id="text2" />
            <button type="submit">Submit</button>
        </form>
        <script>
            $("label:first").click(function() {
                $("#text1").focus();
            });
        </script>
    </div>
</div>
```

当登录对话框打开时，焦点通过`click()`事件发送到文本框。它在加载所有元素后执行，`focus()`确实会调出键盘，因此用户可以立即开始输入。

怀疑可以在页面加载时使用`pagecontainerload`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-28T10:57:54.723

我在 Cordova 6 for Android 移动应用程序中使用以下过程，并且可以确认它有效：

首先，安装 Cordova 插件键盘。然后您可以分别使用`Keyboard.show()`和显示和隐藏键盘。`keyboard.hide()`

你可以这样做来显示键盘：

```
$("#your_input").click(function () {
    $(this).focus();
    Keyboard.show();
}); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-04-27T03:08:32.080

```
// Place an empty div at the bottom of your page
<div class="keyboard" style="height: 0">&nbsp;</div>

$("input").click(function () {
    $("#" + this.id).focus();
});
$("input").focus(function () {
    $(".keyboard").css("height", "300");// The height of your keyboard
    window.scrollTo(0, 5000); // Scroll to the bottom of the page
});
$("input").blur(function () {
    $(".keyboard").css("height", "0");
    window.scrollTo(0, 0);
}); 
```

# sql-server - CTE 生成“无法绑定多部分标识符”

> ID：14362068
> 
> 赞同：1
> 
> 时间：2013-01-16T15:36:55.930
> 
> 标签：sql-server, tsql, sql-server-2008-r2

我有一个使用 CTE 的存储过程，它运行良好。我最近搬到了一个新服务器，但是现在它出现了一个错误

> *无法绑定多部分标识符“DOWNLOADS_downloadCategoryLink.categoryID”*

我可以通过将数据库的兼容性级别更改为 80 (SQL Server 2000) 来解决此问题，但我更愿意正确解决问题 - 有人知道我哪里出错了吗？

存储过程是：

```
;WITH CTE( CategoryID, ParentCategoryID )
AS
(
    SELECT CategoryID, ParentCategoryID
    FROM DOWNLOADS_fileCategories
    WHERE CategoryID = @startCategoryID

    UNION ALL

    SELECT a.CategoryID, a.ParentCategoryID
    FROM DOWNLOADS_fileCategories a
    INNER JOIN CTE b ON b.CategoryID = a.ParentCategoryID
)
SELECT CategoryID INTO #tempLinkTable FROM CTE

set @query = 'SELECT TOP ' + cast(@noRecordsToReturn as varchar(5)) + ' DOWNLOADS_files.downloadID, DOWNLOADS_files.fileTypeID, DOWNLOADS_files.downloadName, DOWNLOADS_files.downloadFileName, DOWNLOADS_files.sizeInKb, DOWNLOADS_files.dateAdded, DOWNLOADS_files.visible, SYS_fileTypes.fileTypeName, SYS_fileTypes.fileTypeExtension
FROM DOWNLOADS_files LEFT OUTER JOIN SYS_fileTypes ON DOWNLOADS_files.fileTypeID = SYS_fileTypes.fileTypeID INNER JOIN
                  #tempLinkTable ON DOWNLOADS_downloadCategoryLink.categoryID = #tempLinkTable.categoryID
ORDER BY DOWNLOADS_files.dateAdded DESC'

exec(@query) 
```

我有的表是：

**下载S_files**

```
downloadID
downloadFileName 
```

**DOWNLOADS_fileCategories**

```
categoryID
parentCategoryID
categoryName 
```

**DOWNLOADS_fileCategoryLink**

```
categoryID
downloadID 
```

非常感谢！

鲍勃

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:45:27.237

您的动态 SQL 会生成一个查询，例如

```
SELECT TOP 10 DOWNLOADS_files.downloadID,
              DOWNLOADS_files.fileTypeID,
              DOWNLOADS_files.downloadName,
              DOWNLOADS_files.downloadFileName,
              DOWNLOADS_files.sizeInKb,
              DOWNLOADS_files.dateAdded,
              DOWNLOADS_files.visible,
              SYS_fileTypes.fileTypeName,
              SYS_fileTypes.fileTypeExtension
FROM   DOWNLOADS_files
       LEFT OUTER JOIN SYS_fileTypes
         ON DOWNLOADS_files.fileTypeID = SYS_fileTypes.fileTypeID
       INNER JOIN #tempLinkTable
         ON DOWNLOADS_downloadCategoryLink.categoryID = #tempLinkTable.categoryID
ORDER  BY DOWNLOADS_files.dateAdded DESC 
```

内连接条件

```
 INNER JOIN #tempLinkTable
     ON DOWNLOADS_downloadCategoryLink.categoryID = #tempLinkTable.categoryID 
```

引用`DOWNLOADS_downloadCategoryLink`查询中不存在的表。我很惊讶这个查询曾经工作过，但也许有一些解析器错误已经被修复了。

要正确解决此问题，我们需要知道`categoryID`实际属于哪个表。

**编辑：也许**

```
SELECT TOP (@noRecordsToReturn) DOWNLOADS_files.downloadID,
                                DOWNLOADS_files.fileTypeID,
                                DOWNLOADS_files.downloadName,
                                DOWNLOADS_files.downloadFileName,
                                DOWNLOADS_files.sizeInKb,
                                DOWNLOADS_files.dateAdded,
                                DOWNLOADS_files.visible,
                                SYS_fileTypes.fileTypeName,
                                SYS_fileTypes.fileTypeExtension
FROM   DOWNLOADS_files
       INNER JOIN DOWNLOADS_downloadCategoryLink
         ON DOWNLOADS_downloadCategoryLink.downloadID = DOWNLOADS_files.downloadID
       INNER JOIN #tempLinkTable
         ON DOWNLOADS_downloadCategoryLink.categoryID = #tempLinkTable.categoryID
       LEFT OUTER JOIN SYS_fileTypes
         ON DOWNLOADS_files.fileTypeID = SYS_fileTypes.fileTypeID
ORDER  BY DOWNLOADS_files.dateAdded DESC 
```

# python - 查看与字符串配对的时间列表，并找出一个时间是否与另一个时间不同

> ID：14362069
> 
> 赞同：1
> 
> 时间：2013-01-16T15:36:55.780
> 
> 标签：python, date, loops, web, web.py

我不太清楚如何表达我在标题中的意思，我想我可以在这里更好地解释它。

我有一个列表（条目），其中包括：

```
1358345153|russelg|[add] changelog @ /changelog
1358339500|russelg|ajaxify image uploads 
```

第一个值是 unix 时间戳。现在，因为这是一个变更日志类型的东西，我想`<span>`在两个不同的日子之间放置一个（或类似的）。

我目前的代码是：

```
for e in entries:
    ez = e.split('|')
    epoch = ez[0]
    auth = ez[1]
    type = 'fix'
    ext = '.png'
    message = ez[2]
    if re.match('\[(.+?)\]', message):
        type = re.findall('\[(.+?)\]', message)[0]
    message = re.sub('\[(.+?)\]', '', message)
    ledate = datetime.fromtimestamp(int(epoch))
    date = datetime.fromtimestamp(int(epoch)).strftime('%Y-%m-%d @ %H:%M:%S') 
```

然后我将其打印为 html 字符串。

```
<div class="changelog-text">
    <span class="epoch">2013-01-17 @ 00:05:53</span> 
    <span class="type">add</span> 
    [<span class="auth"><a href="http://steamcommunity.com/id/russelg">russelg</a></span>]  
    changelog @ /changelog
</div> 
```

令我困惑的是如何在 for 循环中比较两个不同的日期。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:03:25.960

> 令我困惑的是如何在 for 循环中比较两个不同的日期。

您已经`datetime`从时间戳构建了一个对象。您可以通过获取`datetime.date`对象单独获得日期。

```
this_entry_date = ledate.date() 
```

现在您可以很好地组织您的代码以保留对`datetime.date`前一个条目的引用，并在该条目与当前条目的日期之间进行定期比较。沿着：

```
if this_entry_date > last_entry_date:
    output_span() 
```

[Python：日期时间.日期](http://docs.python.org/2/library/datetime.html#datetime.date)

# c# - 使用反射，我可以列出#region 中的字段吗？

> ID：14362072
> 
> 赞同：1
> 
> 时间：2013-01-16T15:37:00.797
> 
> 标签：c#

使用反射，我可以列出字段`#region`吗？

否则，您能想到其他方法来实现类上的字段“分组”以枚举它们吗？用属性标记所有字段不是一个选项，因为这实际上是我想要下车的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T15:39:52.803

如果您需要对某些字段进行分组，它们可能属于自己的类。

相应地重构您的代码，您可以轻松地枚举每个组中的字段，因为每个组现在都有自己的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:40:07.957

我认为这是不可能的，因为区域是预处理器指令并且不会被编译。

也许你应该包括一个你想要实现的样本。我认为会有比使用区域更好的解决方案。每个区域使用一个类并创建一个属性怎么样？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-11-05T23:59:54.430

杰罗姆，我想我会重新提出你的问题，因为我有同样的要求。

在我的具体情况下，我正在考虑使用区域作为序列化的接口。目前我正在使用属性，但就像您想提供替代方案一样，语法糖以分组的形式出现。

两种可能足够的解决方案： 1) T4 模板，用于生成添加必要属性的部分类逻辑。换句话说，T4 持有分组逻辑。它可能太丑陋了，不值得认真考虑。

2) 更改代码的预构建事件，以确保区域分组成员被标记有必要的属性。这是一种折衷方案。

对听到任何预构建区域操作技术非常感兴趣。

为了响应子类的想法，这不是一个很好的选择，因为它要么增加了合约接口的复杂性，要​​么意味着创建额外的属性来访问这些强制的子类。

# c# - 类关联方法

> ID：14362075
> 
> 赞同：0
> 
> 时间：2013-01-16T15:37:09.037
> 
> 标签：c#, asp.net-mvc, design-patterns

我是 MVC 的新手，我的问题是我没有以正确的方式解决这个问题，它目前按我的预期工作，但我不确定结构和方法的放置位置。

我有一个用于帮助显示到视图（视图模型？）的类`FolderFileList`，它还包含一个名为 的函数`GetFolderStructure()`，该函数采用路径和文件夹并循环创建所有文件和文件夹的列表，然后返回它们。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.IO;

namespace xxx.Models
{

    public class FolderFileList
    {
        public DirectoryInfo Directory { get; set; }
        public FileInfo File { get; set; }

        public List<FileInfo> FileList { get; set; }
        public List<DirectoryInfo> FolderList { get; set; }
        public List<DirectoryInfo> RootFolderList { get; set; }
        public string FolderRoot { get; set; 
    }

    public static FolderFileList GetFolderStructure(string path, string foldername)
    {
        //initialise variables
        DirectoryInfo selecteddirectory = null;
        DirectoryInfo rootdirectory = null;
        var files = new List<FileInfo>();

        var listoffilesandfolders = new FolderFileList();
        listoffilesandfolders.FileList = new List<FileInfo>();
        listoffilesandfolders.FolderList = new List<DirectoryInfo>();
        listoffilesandfolders.RootFolderList = new List<DirectoryInfo>();
        listoffilesandfolders.FolderRoot = foldername;

        //get selected directory
        try
        {
            selecteddirectory = new DirectoryInfo(path + foldername);
            listoffilesandfolders.FolderList = selecteddirectory.GetDirectories("*", SearchOption.AllDirectories).ToList();
        }
        catch (DirectoryNotFoundException exp)
        {
            throw new Exception("Could not open the directory", exp);
        }
        catch (IOException exp)
        {
            throw new Exception("Failed to access directory", exp);
        }

        //get root directory
        try
        {
            rootdirectory = new DirectoryInfo(path);
            listoffilesandfolders.RootFolderList = rootdirectory.GetDirectories("*", SearchOption.TopDirectoryOnly).ToList();
        }
        catch (DirectoryNotFoundException exp)
        {
            throw new Exception("Could not open the directory", exp);
        }
        catch (IOException exp)
        {
            throw new Exception("Failed to access directory", exp);
        }

        //get all files and subfolder files
        try
        {
            files = selecteddirectory.GetFiles("*", SearchOption.AllDirectories).ToList();
        }
        catch (FileNotFoundException exp)
        {
            throw new Exception("Could not find file", exp);
        }
        catch (IOException exp)
        {
            throw new Exception("Failed to access fie", exp);
        }

        files = files.OrderBy(f => f.Name).ToList();

        foreach (FileInfo file in files)
        {
            listoffilesandfolders.FileList.Add(file);
        }

        return listoffilesandfolders;
    }
} 
```

我的控制器：

```
 public ActionResult Folder(string foldername)
    {
        var path = Server.MapPath(@"~\");

        var folderstructure = FolderFileList.GetFolderStructure(path, foldername);

        return View(folderstructure);

    } 
```

我的问题是：

1.  我把这门课放在哪里？它当前位于模型文件夹中。
2.  方法依赖于类，在类中可以吗？我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:43:42.560

回答第一个问题：

就个人而言，我会创建一个名为“ViewModels”或“Classes”的文件夹。这真的取决于你。如果你移动类，你应该更新代码中的命名空间。

第 2 点：您可以将方法存放在 ViewModel 中。正如下面 StewartLC 所提到的，现在视图可以调用该方法，而您可能不希望这样。如果没有，我会把它放在控制器中。

# android - 加载程序没有得到回调来更新 ListFragment

> ID：14362076
> 
> 赞同：2
> 
> 时间：2013-01-16T15:37:08.910
> 
> 标签：android, android-listfragment, android-loadermanager

我有一个活动，它从谷歌日历中提取所有用户日历事件，插入到数据库中很好，但是活动的`Loader for the`ListFragment 永远不会在发生更改时获得回调来刷新列表。我必须退出活动，然后再回来让加载程序正确加载所有内容。

我以前做过加载器，从来没有遇到过这个问题，我基本上是从另一个正常工作的项目中复制了加载器，所以我不明白为什么在内容更改时它没有收到回调？

这是我在数据库中的插入方法

```
@Override
public Uri insert(Uri uri, ContentValues values) {
    long rowID = db.insert(EVENTS_TABLE,null, values);
    Uri _uri = null;
    if(rowID > 0){
        _uri = ContentUris.withAppendedId(CONTENT_ID_URI_BASE,rowID);
        getContext().getContentResolver().notifyChange(_uri,null);

    }else{
        throw new SQLException("Failed to insert row into " + uri);
    }
    return _uri;
} 
```

如您所见，我正在调用`notifyChange`适配器更新但它没有。

这是我的`ListFragment`

```
@Override
public void onActivityCreated(Bundle state){
    super.onActivityCreated(state);

    lv = getListView();
    lv.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
    View v = getView();
    v.setClickable(true);
    setEmptyText("No Events");
    populate();
}

public void populate(){
    mAdapter = new CalendarRowAdapter(getActivity(), R.layout.calendar_view, null,
            new String[] {CalendarProvider.EVENT,CalendarProvider.LOCATION,CalendarProvider.DESCRIPTION,CalendarProvider.START},
            new int[] {R.id.calendarEntryText,R.id.locationEntryText,R.id.descEntryText,R.id.dateEntryText},0);

    setListAdapter(mAdapter);

    getLoaderManager().initLoader(0,null,this);
}

@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    return new CursorLoader(getActivity(),
            CalendarProvider.CONTENT_URI,new String[] {CalendarProvider.ID,CalendarProvider.EVENT,
        CalendarProvider.LOCATION,CalendarProvider.DESCRIPTION,CalendarProvider.START}
    ,null,null,CalendarProvider.START + " COLLATE LOCALIZED ASC");
}

@Override
public void onLoadFinished(Loader<Cursor> arg0, Cursor arg1) {
    mAdapter.swapCursor(arg1);
    if(isResumed()){
        setListShown(true);
    }else{
        setListShownNoAnimation(true);
    }
}

@Override
public void onLoaderReset(Loader<Cursor> arg0) {
    mAdapter.swapCursor(null);

} 
```

就像我说的，一切都正确地进入数据库，只是加载器没有得到回调来刷新列表。

日历事件从 an 放入数据库，`AsyncTask`但我认为这不是问题

logcat 也没有显示错误

**编辑**

我的查询方法

```
@Override
public Cursor query(Uri uri, String[] projection, String selection,
        String[] selectionArgs, String sortOrder) {
    SQLiteQueryBuilder sqlBuilder = new SQLiteQueryBuilder();
    sqlBuilder.setTables(EVENTS_TABLE);

    if(uriMatcher.match(uri) == 1){
        sqlBuilder.setProjectionMap(mMap);
    }else if(uriMatcher.match(uri) == 2){
        sqlBuilder.setProjectionMap(mMap);
        sqlBuilder.appendWhere(ID + "=?");
        selectionArgs = DatabaseUtils.appendSelectionArgs(selectionArgs,new String[] {uri.getLastPathSegment()});
    }
    if(sortOrder == null || sortOrder == "")
        sortOrder = START + " COLLATE LOCALIZED ASC";
    Cursor c = sqlBuilder.query(db, projection, selection, selectionArgs,null,null, sortOrder);
    c.setNotificationUri(getContext().getContentResolver(), uri);
    return c;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:52:08.430

在您的 insert 方法中，您使用插入`notifyChange`的特定行的 URI 调用，但在查询端，URI 是代表整个数据集的不同 URI。`notifyChange`on`/foo/bar/1`不会通知正在监听的听众`/foo/bar`。因此，在您的`insert()`方法中，您需要`notifyChange`使用数据集的 URI 而不是特定行来调用。

# java - 当你看到一个序列化的 Java 对象时，你会想到什么

> ID：14362081
> 
> 赞同：0
> 
> 时间：2013-01-16T15:37:15.977
> 
> 标签：java, serialization

我有一些代码，由已不在我们公司的人编写。他在代码的很多地方都使用了序列化（实现可序列化），我认为这是不必要的。

在从代码中删除这些序列化之前，我应该注意哪些预防措施？

**编辑 - 在下面添加**

1）我们的代码不是通过网络访问的。无需流式传输。也没有 Servlet。
2）没有对象到字节数组的转换发生在任何地方
3）它只是一个运行在单个 JVM 中的独立应用程序
4）它只是读取一个文件并将数据放入数据库中。数据库可能是远程的。
5) 没有任何 RMI/Corba 组件
6) 这些类的已知父级都不是可序列化的

还有其他需要处理的情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:40:57.933

我很想离开它们，因为如果不使用它们相对无害。JDK 中的许多类都可以`Serializable`，但这不是问题。

如果您已经检查了这些类，则永远`Serializable`可以删除它。如果这很容易可靠地测试，您可以这样做。否则我不会冒险，只是以后不要这样做。（制作`Serializable`不是的类）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:44:43.807

> 在从代码中删除这些序列化之前，我应该注意哪些预防措施。

确保你有一套好的单元测试和系统测试可用......并使用版本控制。

您还可以在代码库中搜索使用 ObjectStream 类的代码，但该用法可能隐藏在库和框架代码中。

我同意彼得的观点。删除`implements Seralizable`不太可能实现任何有价值的事情。（至少......不是从你的经理的角度来看。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T15:44:26.193

请注意，有些库需要类`Serializable`。

因为它没有害处，我会把它留在代码中。

# iphone - 如何用虚线划掉文本？

> ID：14362087
> 
> 赞同：3
> 
> 时间：2013-01-16T15:37:28.380
> 
> 标签：iphone, ios, objective-c, xcode

如何用虚线划掉文本或将其绘制在标签或警报视图中的文本上方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:52:11.760

也许本教程会对您有所帮助：http: [//www.cocoanetics.com/2011/01/befriending-core-text/](http://www.cocoanetics.com/2011/01/befriending-core-text/)

# javascript - JavaScript 从另一个窗口中选择元素

> ID：14362090
> 
> 赞同：-1
> 
> 时间：2013-01-16T15:37:32.393
> 
> 标签：javascript, web

这是我正在尝试做的事情：我在网页上有一个可以在新窗口中打开的功能（将元素拖放到新位置），因此需要在两个窗口之间同步数据（主要是每当在另一个窗口中更改某些内容时触发窗口刷新）

所以问题是是否可以从一个新窗口（最好使用jQuery）触发一个窗口的功能，反之亦然？

**更新：**

子窗口和父窗口共享同一个 JS 文件。到目前为止，我设法通过使用 window.opener.nameSpace.someFunction() 调用父窗口函数 nameSpace.someFunction()。但是我该如何反其道而行之呢？如何从父窗口调用子窗口函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:45:55.247

由于它们仍然具有父窗口-子窗口关系，因此您可以从父窗口访问/共享子窗口的信息，反之亦然。

在此处查看如何从父窗口访问子窗口的功能

[从父窗口中的子窗口运行函数](https://stackoverflow.com/questions/8152829/run-function-from-child-window-in-parent-window)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T15:39:37.183

您需要查看 HTML5 postMessage API

# c# - 使用 WebClient.UploadString 发布到同一网络上的另一台计算机时，HTTP 发布非常慢

> ID：14362091
> 
> 赞同：3
> 
> 时间：2013-01-16T15:37:33.657
> 
> 标签：c#, http, http-post

我们在客户端应用程序中有一个代码，它将数据发布到另一个程序上运行的 HTTP 侦听器。

```
try
{
  using (WebClient client = new WebClient())
  {
     client.Encoding = System.Text.Encoding.UTF8;
     client.Credentials = new NetworkCredential(NotificationUser, NotificationPassword);
     client.UploadString(NotificationUrl, msg);  // Notification URL is IP base not DNS name.
  }
}
catch (Exception ex){} 
```

我们正在高负载环境中对其进行测试，并尝试对请求/响应延迟进行压力测试。如果我将两个程序放在同一台机器上，我会在一秒钟内从发布应用程序发送大约 160 条消息到 http 侦听器应用程序，但是如果我将 http 侦听器应用程序放在同一网络上的不同机器上（本地网络我们在内部创建），这个数字下降到大约 5 条消息/秒。

以下是我们迄今为止所做的尝试：

1.  ping 到第二台机器显示它在不到 1 毫秒的时间内响应，tracert 显示它只有一跳。两台机器之间没有防火墙或代理。
2.  我使用[fiddler](http://www.fiddler2.com/fiddler2/)和[StressStimulus](http://stresstimulus.stimulustechnology.com/)来生成大量流量以发布到另一台机器上的监听器应用程序，我得到了（大约160 条消息/秒）。在我看来，这排除了网络延迟或侦听器应用程序是否存在问题。
3.  我尝试在发布应用程序中使用 UploadStringAsync 而不是 UploadString，但这并没有太大的不同。
4.  没有杀毒软件等...

奇怪的是，如果侦听器应用程序在同一台机器上，同样的代码可以正常工作。有谁知道 HTTP 帖子有任何限制或我忽略了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T15:01:40.597

我在这里发现了一个[关于](https://stackoverflow.com/questions/1694388/webclient-vs-httpwebrequest-httpwebresponse)WebClient() 和 HTTPWebRequest 的问题。所以基本上 WebClient() 只是 httpwebRequest 的一个包装器。我们决定改用 HTTPWebRequest 类来测试我的代码。

```
try
{
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(Program.NotificationUrl);
    request.KeepAlive = false;
    request.Method = "Post";
    request.ContentType = "text/xml";
    request.Credentials = new System.Net.NetworkCredential(Program.NotificationUser, Program.NotificationPassword);

    byte[] data = Encoding.UTF8.GetBytes(msg);

    request.ContentLength = data.Length;
    Stream reqStream = request.GetRequestStream();
    reqStream.Write(data, 0, data.Length);
    reqStream.Close();

    WebResponse response = request.GetResponse();
    using (StreamReader reader = new StreamReader(response.GetResponseStream()))
    {
            reader.ReadToEnd();
    }

}
catch (Exception) 
```

Then what we found that really made the different was the flag KeepAlive. With a default value set to true, as soon as we set this flag to false, the whole http post process became lightning fast even with the authentication. If I was using WebClient class, this flag is not exposed to me and I assumed it kept the value KeepAlive=true by default.

Hopefully someone find this information useful down the road.

# asp.net-mvc-4 - MVC4 派生自定义 ExtendedMembershipProvider

> ID：14362095
> 
> 赞同：0
> 
> 时间：2013-01-16T15:37:43.423
> 
> 标签：asp.net-mvc-4, asp.net-membership, customization

我希望

1.  像这样派生一个自定义提供程序：

MySimpleMembershipProvider : ExtendedMembershipProvider

1.  覆盖所有必需的成员

2.  在 Web.Config 中注册 MySimpleMembershipProvider 以便我可以使用 MVC4 模板 Internet Web 项目中使用的 WebSecurity 类

我看不到第 3 步是如何完成的。啤酒适合任何可以向我展示光芒的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:42:10.747

像这样在 Web.config 中注册会员提供程序

```
 <membership defaultProvider="CustomMembershipProvider">
      <providers>
        <clear/>
        <add name="CustomMembershipProvider" 
            type="CustomMembership.Models.CustomMembershipProvider"
            connectionStringName="AppDb"
            enablePasswordRetrieval="false"
            enablePasswordReset="true"
            requiresQuestionAndAnswer="false"
            requiresUniqueEmail="false"
            maxInvalidPasswordAttempts="5"
            minRequiredPasswordLength="6"
            minRequiredNonalphanumericCharacters="0"
            passwordAttemptWindow="10"
            applicationName="/" />
      </providers> 
```

有关更多详细信息，请参阅[此 codeproject 文章](http://www.codeproject.com/Articles/165159/Custom-Membership-Providers)

# filter - 骆驼 - 想在每次交换中删除第一条消息

> ID：14362098
> 
> 赞同：1
> 
> 时间：2013-01-16T15:37:48.940
> 
> 标签：filter, message, exchange-server, apache-camel

我有一些东西，我基本上总是想丢失列表中的第一条记录。它总是采用 List<String> 的形式——我不关心“标题”——它总是列表中的第一个元素，不希望它发送到我的端点

[“标题”、“消息 1”、“消息 2”...]

```
.from( A )  // this sends Lists of StringBuffers. The first in the list will be header 
.split().body() // now I have each
.to( B ) 
```

理想情况下，我希望丢失交换中的第一条消息，并正在考虑为它构建正确的查询。

类似的东西（这不起作用 - removeMessage 不是骆驼选项）

```
from( A )
.removeMessage( 0 ) // remove first message - this doesn't actually exist
.split().body().
.to( B ) 
```

我正在考虑创建一个过滤器，该过滤器根据交易所上的 CamelSplitIndex 属性进行删除，但此时已停止，我想知道“我这样做是否正确？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:18:57.867

我几乎按照我的建议做了，并且与其他人的建议类似，但没有使用简单的表达式语言，这（具有讽刺意味）对我来说似乎更简单

.split().body() .filter( header( "CamelSplitIndex" ).isNotEqual( 0 ) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:13:54.597

[正如您所说，这似乎是拆分器](http://camel.apache.org/splitter.html)和[过滤器](http://camel.apache.org/message-filter.html)EIP混合的一个很好的例子。

像这样的东西可能是你需要的。

```
from(A)
   .split().body()
       .filter().simple("${property.CamelSplitIndex} > 0")
          .to(B); 
```

有几种方法可以解决这个问题，但如果您可以使用这样的基本 EIP，请不要过于复杂。

你总是可以自由地插入一些 Java，如果这符合目的，那就去做。

# ajax - Ajax 刷新表

> ID：14362101
> 
> 赞同：0
> 
> 时间：2013-01-16T15:37:55.057
> 
> 标签：ajax

我在 gettable.php 中有一个表。该表包含在 index.php 中。我做了一个 AJAX 帖子，我想在帖子完成时用 AJAX 刷新表格。我发现这个：

```
$(document).ready(function(){
      refreshTable();
    });

    function refreshTable(){
        $('#table').load('getTable.php');
        setTimeout(refreshTable, 5000);
    } 
```

这是我的 AJAX 帖子：

```
function form(){

        var icao = document.getElementById('icao').value;
        var name = document.getElementById('name').value;
        var weightempty = document.getElementById('weightempty').value;
        var weightfull = document.getElementById('weightfull').value;
        var cargofull = document.getElementById('cargofull').value;
        var cruisespeed = document.getElementById('cruisespeed').value;
        var range = document.getElementById('range').value;
        var price = document.getElementById('price').value;
        var firstclassseats = document.getElementById('firstclassseats').value;
        var businessclassseats = document.getElementById('businessclassseats').value;
        var economyclassseats = document.getElementById('economyclassseats').value;
        ajax.open("POST","new_aircraft_process.php",true);
        ajax.onreadystatechange=function(){
            if(ajax.readyState==4)
            {
            var respuesta=ajax.responseText;
            document.getElementById('result').innerHTML=ajax.responseText;
            $("#newaircraftdialog").dialog('close');

            $("#loadingdialog").dialog('close');
//I want to add here the code to refresh the table
            }
        }
    ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    ajax.send("icao="+icao+"&name="+name+"&weightempty="+weightempty+"&weightfull="+weightfull+"&cargofull="+cargofull+"&cruisespeed="+cruisespeed+"&range="+range+"&price="+price+"&firstclassseats="+firstclassseats+"&businessclassseats="+businessclassseats+"&economyclassseats="+economyclassseats);
    $("#loadingdialog").dialog('open');
    } 
```

可以这样做，但只有在我想要每 5 秒一次时才刷新它？

# python - Python Tkinter 多选列表框

> ID：14362116
> 
> 赞同：11
> 
> 时间：2013-01-16T15:38:35.380
> 
> 标签：python, tkinter

我有一个使用`selection='multiple'`. 然后我尝试通过代码获取用户选择的所有选项的列表`name.get(ACTIVE)`。问题是它并不总是得到我在列表框 GUI 中突出显示的所有选项。

如果我突出显示一个，它会正确地恢复它。
如果我突出显示两个或更多（通过单击每个），它只返回我选择的最后一个项目
如果我有多个突出显示，但然后单击以取消突出显示一个，即使它未突出显示，我点击的最后一个也会返回.

我期待代码能够恢复突出显示的内容。

设置列表框的代码是：

```
self.rightBT3 = Listbox(Frame1,selectmode='multiple',exportselection=0) 
```

检索选择的代码是：

```
selection = self.rightBT3.get(ACTIVE) 
```

这是应用程序运行时的截图，在顶部您可以看到控制台只注册了一个选择（我点击的最后一个）。

![在此处输入图像描述](../Images/f8acb27cf3cfc15a6ef151f873260f17.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T15:52:07.573

似乎在 Tkinter 列表框中获取所选项目列表的正确方法是使用`self.rightBT3.curselection()`，它返回一个包含所选行的从零开始的索引的元组。然后，您可以`get()`使用这些索引的每一行。

（虽然我还没有实际测试过）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-05-04T18:58:02.133

要获取在列表框中选择的文本项列表，我发现以下解决方案是最优雅的：

```
selected_text_list = [listbox.get(i) for i in listbox.curselection()] 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-09-21T18:59:12.957

我发现上述解决方案有点“晦涩”。特别是当我们在这里与正在学习工艺或学习 python/tkinter 的程序员打交道时。

我想出了一个更具解释性的解决方案，如下所示。我希望这对你有更好的效果。

```
#-*- coding: utf-8 -*-
# Python version 3.4
# The use of the ttk module is optional, you can use regular tkinter widgets

from tkinter import *
from tkinter import ttk

main = Tk()
main.title("Multiple Choice Listbox")
main.geometry("+50+150")
frame = ttk.Frame(main, padding=(3, 3, 12, 12))
frame.grid(column=0, row=0, sticky=(N, S, E, W))

valores = StringVar()
valores.set("Carro Coche Moto Bici Triciclo Patineta Patin Patines Lancha Patrullas")

lstbox = Listbox(frame, listvariable=valores, selectmode=MULTIPLE, width=20, height=10)
lstbox.grid(column=0, row=0, columnspan=2)

def select():
    reslist = list()
    seleccion = lstbox.curselection()
    for i in seleccion:
        entrada = lstbox.get(i)
        reslist.append(entrada)
    for val in reslist:
        print(val)

btn = ttk.Button(frame, text="Choices", command=select)
btn.grid(column=1, row=1)

main.mainloop() 
```

请注意，ttk 主题小部件的使用是完全可选的。您可以使用普通 tkinter 的小部件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-18T19:37:23.833

我也遇到了同样的问题。经过一些研究，我找到了一个可行的解决方案，它允许在列表框中进行多项选择。这并不理想，因为该字段中仍然缺少滚动条（UX 线索表明存在附加值）。但是，它确实允许多选。

```
from tkinter import *
window_app = Tk()

# ### Allows for multi-selections ###
def listbox_used(event):
    curselection = listbox.curselection()
    for index in curselection:
        print(listbox.get(index))  # Gets current selection from listbox
        # Only challenge with this implementation is the incremental growth of the list.
        # However, this could be resolved with a Submit button that gets the final selections.

listbox = Listbox(window_app, height=4, selectmode='multiple')
fruits = ["Apple", "Pear", "Orange", "Banana", "Cherry", "Kiwi"]
for item in fruits:
    listbox.insert(fruits.index(item), item)
listbox.bind("<<ListboxSelect>>", listbox_used)  # bind function allows any selection to call listbox_used function.
listbox.pack(padx=10, pady=10)  # Adds some padding around the field, because...fields should be able to breathe :D

window_app.mainloop() 
```

# c# - C# 基本对象和类

> ID：14362117
> 
> 赞同：-1
> 
> 时间：2013-01-16T15:38:35.077
> 
> 标签：c#, class, object, inheritance

我在下面发布了我的代码。

我的问题是我使用时程序崩溃：

```
myCarLabel.Text = MyCar.ToString(); 
```

我做错了什么 ？

我想将值从 myCarLabel 输出`MyCar.Brand`到`MyCar.Year`myCarLabel 。

它使用：myCarLabel.Text = comboBoxBrand.Text + "\n" + comboBoxYear.Text；

但是后来我失去了使用我的课程等等的全部意义..有什么建议吗？

```
class Vehicle
{
    public string Brand { get; set; }
    public string Year { get; set; }

    // GetVehicleInfo() ska returnera värdena från MyCar
    public string GetVehicleInfo()
    {
        return Brand + "\n" + Year;
    }
}

class Car : Vehicle
{
    public string Kolor { get; set; }
}

private Car MyCar;    

private void Form1_Load(object sender, EventArgs e)
{       
    MyCar = new Car();
    MyCar.Brand = comboBoxBrand.Text;
    MyCar.Year = comboBoxYear.Text;
}

private void button1_Click(object sender, EventArgs e)
{
    // comboBoxBrand.Text + "\n" + comboBoxYear.Text;

    myCarLabel.Text = MyCar.ToString();
    myCarLabel.BackColor = colorDialog.Color;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:42:32.890

我不明白您所说的“程序崩溃”是什么意思，但是看着您的代码，您似乎应该这样做：

```
myCarLabel.Text = MyCar.GetVehicleInfo(); 
```

您没有覆盖 ToString 方法。默认的 ToString 实现将返回一些关于命名空间的元数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:42:30.177

崩溃可以发生在 1000 件事情上。在你的具体例子中，它**可能**与一个事实有关

```
myCarLabel.Text = MyCar.ToString(); 
```

*   或`MyCar`为空

*   或`myCarLabel`为空

*   或两者兼有

另外，我没有看到`ToString(..)`您的类中的方法被覆盖，例如：

```
class Car : Vehicle
{
    public string Kolor { get; set; }

    public override string ToString() {
          return Kolor;
    }
} 
```

这些只是您**可能**需要的基本示例，很难从您的问题中推断出具体的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:49:11.650

```
public class Vehicle
{
     public Vehicle()
     {
         // do instantiations here so that none of your members are null
     }

     public override string ToString()
     {
         return Brand + "\n" + Year;
     }
}

public class Car : Vehicle
{
     public Car() : base()
     {
         // Note that the base default constructor is called with : base()
         // then perform Car-specific instantiations here.
     }
     ...
     public override string ToString()
     {
         // Now, you can refer to the super class's ToString() if you want to.
         return base.ToString() + "\n" + Kolor;
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T16:14:35.440

你也可以使用继承，在`Vehicle`类覆盖`ToString()`上（如示例），当你这样做时，`Car`类将使用类`ToString()`上的函数`Vehicle`，因为实际上，`Car`类使用类`ToString()`上的函数`Object`。最后，您无需使用表达式`MyCar.Tostring()`，只需`MyCar`在函数`button1_Click`(myCarLabel.Text = MyCar)中的第 4 行使用

```
class Vehicle
{
    public string Brand { get; set; }
    public string Year { get; set; }

    // GetVehicleInfo() ska returnera värdena från MyCar
    public string GetVehicleInfo()
    {
        return Brand + "\n" + Year;
    }

    public override string ToString() {
        return GetVehicleInfo();
    }
}

class Car : Vehicle
{
    public string Kolor { get; set; }
}

private Car MyCar;    

private void Form1_Load(object sender, EventArgs e)
{       
    MyCar = new Car();
    MyCar.Brand = comboBoxBrand.Text;
    MyCar.Year = comboBoxYear.Text;
}

private void button1_Click(object sender, EventArgs e)
{
    // comboBoxBrand.Text + "\n" + comboBoxYear.Text;

    myCarLabel.Text = MyCar;
    myCarLabel.BackColor = colorDialog.Color;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T17:08:22.087

为了找到崩溃的原因，这里有几个检查：

*   确保`Form.Load`事件已正确设置为您的方法并被调用。您可以在第一行或内部括号中设置断点 ( **F9**`Form1_Load` )以确保它被命中。

*   在行上设置断点`myCarLabel.Text = MyCar.ToString()`。将鼠标悬停在两者上`myCarLabel`并`MyCar`确保它们在调试器中不为空。

至于对您的代码的改进，这里有一些：

首先，您没有覆盖`ToString()`任何一个`Car`或`Vehicle`类。虽然这不是必需的，但您的`ToString()`方法将在此处返回一个相当无意义的`YourNamespace.Car`字符串。考虑添加一个覆盖：

```
public override string ToString()
{ 
  // Format this however you'd like:
  return string.Format("{0} {1}", this.Year, this.Brand);
} 
```

其次，您在事件`Car`内部创建实例，`Form.Load`这意味着对事件的更改`ComboBox`不会反映在您的对象中。因此，如果用户更改选择的*Brand*或*Year*，它不会更新对象。考虑将其移至`Button.Click`事件：

```
void myButton_Click(object sender, EventArgs e)
{
  var car = new Car();
  car.Year = yearComboBox.Text;
  car.Brand = brandComboBox.Text;

  myCarLabel.Text = car.ToString();
  myCarLabel.BackColor = colorDialog.Color;
} 
```

此外，您不需要为此存储 a`Car`作为成员变量。如果您需要自定义对话框或`Form`添加/编辑汽车条目，最好创建`Car`在 custom 上返回 a 或具有类似属性的方法`Form`。例如：

```
void addCarButton_Click(object sender, EventArgs e)
{
  var dialog = new AddCarForm();
  var result = dialog.ShowDialog();

  if(result != DialogResult.OK) return;

  var newCar = dialog.Car;

  // Do something with the newly created car.      
} 
```

但是，如果必须保留成员变量，它应该以小写字母开头，`myCar`而不是`MyCar`避免与属性、常量和方法混淆。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-16T15:45:17.100

我没有看到 MyCar 被初始化，也没有任何异常处理。因此你的程序一定会崩溃

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-16T15:44:27.650

您必须覆盖类的 toString() 方法

```
 public override string ToString()
    {
        return comboBoxBrand.Text +"\r\n"+comboBoxYear.Text;
    } 
```

# windows-phone-7 - WP7 - 添加 silverlight 工具包时只有几个控件

> ID：14362118
> 
> 赞同：0
> 
> 时间：2013-01-16T15:38:40.873
> 
> 标签：windows-phone-7, xaml, visual-studio-2012, silverlight-toolkit

我正在尝试将 Silverlight Toolkit 添加到我的 Windows Phone 7.1 应用程序中，但是当我添加`Microsoft.Phone.Controls.Toolkit`参考时，我在 Intellisense 中只得到了几个控件（例如`ContextMenuService, DatePickerPage, GestureService`，...）。没有什么喜欢`ToggleSwitch`和其他控件。我尝试以多种方式添加引用（从 Program Files、通过 Nuget、其他项目）并且始终相同。我试图在对象浏览器中查看引用，并且控件在那里。当然，我将命名空间添加到 xaml 页面：

```
xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit" 
```

那么问题出在哪里？谢谢

# python - python中是否有类似 date_diff 的东西来获取明天的日期？

> ID：14362119
> 
> 赞同：1
> 
> 时间：2013-01-16T15:38:44.490
> 
> 标签：python, date, format

这是我的代码

```
while x <= datetime.date.today():
   print something 
```

我怎样才能得到`datetime.date.tomorrow()`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T15:39:52.607

使用[`datetime.timedelta()`](http://docs.python.org/2/library/datetime.html#datetime.timedelta)：

```
tomorrow = datetime.date.today() + datetime.timedelta(days=1) 
```

`date()`对 a和 a求和时`timedelta()`，仅使用`.days`属性。

# windows - 运行线程时窗口偶尔会挂起/冻结

> ID：14362123
> 
> 赞同：2
> 
> 时间：2013-01-16T15:38:54.730
> 
> 标签：windows, vb.net, multithreading, dispose, invoke

我的 VB.Net 应用程序有一个奇怪的挂起问题。当用户单击更新按钮时，以下内容作为线程运行以对数据进行一些长时间的计算。它禁用控件，显示“工作...”文本框，完成工作，重新启用控件并摆脱“工作...”文本框。有时（我在调试时从未复制过），用户窗口冻结并挂起。当它发生时，CPU 使用率为 0，因此它完成了计算，但控件仍显示为禁用，并且“正在工作...”文本框仍然可见，尽管窗口完全卡住并且不会更新。这将无限期地保持这种状态（用户已尝试等待长达 30 分钟）。奇怪的是，我可以“解开” 仅通过单击任务栏上窗口的右键菜单中的最小化/恢复按钮来打开窗口。短暂的延迟后，窗户又恢复了生机。窗口本身的最小化/恢复似乎没有效果。

所以我的问题是，我在下面的线程中做错了什么？

```
Dim Thread As New Threading.Thread(AddressOf SubDoPriceUpdateThread)
Thread.Start() 
```

线：

```
 Private Sub SubDoPriceUpdateThread()

            Dim Loading As New TextBox
            Try
                CntQuotePriceSummary1.Invoke(New Action(Of Control)(AddressOf CntQuotePriceSummary1.Controls.Add), Loading)
                CntQuotePriceSummary1.Invoke(New Action(Sub() CntQuotePriceSummary1.Enabled = False))

                Loading.Invoke(New Action(AddressOf Loading.BringToFront))
                Loading.Invoke(New Action(Sub() Loading.Text = "Working..."))

                '***Long running calculations***

                Invoke(New Action(AddressOf FillForm))

            Finally
                CntQuotePriceSummary1.Invoke(New Action(Of Control)(AddressOf CntQuotePriceSummary1.Controls.Remove), Loading)
                CntQuotePriceSummary1.Invoke(New Action(Sub() CntQuotePriceSummary1.Enabled = True))
                Loading.Invoke(New Action(AddressOf Loading.Dispose))
            End Try

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:35:14.390

根据 Hans 的评论，很明显`Loading`文本框不是在 UI 线程上创建的，这就是导致死锁问题的原因。我已经重写了代码。

```
 Private Sub SubDoPriceUpdateThread()

            Dim Loading As TextBox
            Invoke(Sub() Loading = New TextBox)

            Try
               Invoke(Sub()
                           CntQuotePriceSummary1.Controls.Add(Loading)
                           CntQuotePriceSummary1.Enabled = False
                           Loading.BringToFront()
                           Loading.Text = "Working..."
                       End Sub)

               '***Long running calculations***

                Invoke(Sub() FillForm())

            Finally
                Invoke(Sub()
                           CntQuotePriceSummary1.Controls.Remove(Loading)
                           CntQuotePriceSummary1.Enabled = True
                           Loading.Hide()
                           Loading.Dispose()
                       End Sub)
            End Try

    End Sub 
```

# r - 如何从随机自截线列表（R中的psp）生成段列表？

> ID：14362127
> 
> 赞同：0
> 
> 时间：2013-01-16T15:39:01.063
> 
> 标签：r, segment, spatstat

我`X=rpoisline(4)`用来生成线条并用`plot(X)`. 我有`X$ends`他们的坐标和他们的交点`selfcrossing.psp(X)`（在 R 和 spatstat : `library(spatstat)`）。

我需要获取段列表及其坐标并能够操作它们（更改它们的方向、位置、交叉点......）。这些线段必须通过一条线与另一条线和窗口的交点来定义。

那么，我是否错过了一种简单的方法来在非相交段的 psp 中转换几条相交线的 psp（我希望它很*清楚*）*？*

如果您有不简单的方法，我很感兴趣！

谢谢你的时间 ！

编辑 ：

这是我的行：

![这就是我所拥有的](../Images/6ec6a8edeed0247ca51d3228315caf87.png)

如果我设法处理每个部分（一个接一个），这是我认为可以产生的那种随机的东西。所以我需要从我的随机行列表中获取一个段列表。

![这就是我需要的](../Images/c6d4170faa8ddd1d3b357c2dace844ee.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:59:01.103

好的，几个茶歇后，这里有一些错误的代码可以满足您的需求。清理工作交给你。

```
ranpoly <- function(numsegs=10,plotit=TRUE) {

require(spatstat)
# temp fix: put the first seg into segset. Later make it a constrained random.
segset<-psp(c(0,1,1,0,.25),c(0,0,1,1,0),c(1,1,0,0,1),c(0,1,1,0,.75),owin(c(0,1),c(0,1)) ) #frame the frame
for (jj in 1: numsegs) {
    # randomly select a segment to start from, a point on the seg, the slope,and direction
    # later... watch for slopes that immediately exit the frame
    endx <-sample(c(-0.2,1.2),1)  #force 'x1' outside the frame
# watch that sample() gotcha
    if(segset$n<=5) sampset <- c(5,5) else sampset<-5:segset$n
    startseg<-sample(sampset,1) #don't select a frame segment
    # this is slope of segment to be constructed
    slope <- tan(runif(1)*2*pi-pi) # range +/- Inf 
    # get length of selected segment
    seglen<-lengths.psp(segset)[startseg]
    startcut <- runif(1) 
    # grab the coords of starting point (similar triangles)
    startx<- segset$ends$x0[startseg] + (segset$ends$x1[startseg]-segset$ends$x0[startseg])*startcut #seglen
    starty<- segset$ends$y0[startseg] + (segset$ends$y1[startseg]-segset$ends$y0[startseg])*startcut #seglen
    # make a psp object with that startpoint and slope; will adjust it after finding intersections
    endy <- starty + slope*(endx-startx)
    newpsp<-psp(startx,starty,endx,endy,segset$window,check=FALSE)
    # don't calc crossing for current element of segset
    hits <- crossing.psp(segset[-startseg],newpsp)
    segdist <- dist(cbind(c(startx,hits$x),c(starty,hits$y)))
    # dig back to get the crosspoint desired -- have to get matrixlike object out of class "dist" object
    # And, as.matrix puts a zero in location 1,1 kill that row.
    cutx <- hits$x[ which.min( as.matrix(segdist)[-1,1] )]
    cuty <- hits$y[which.min(as.matrix(segdist)[-1,1] )]
    segset <- superimpose(segset,psp(startx,starty,cutx,cuty,segset$window))

} #end jj loop
if(plotit) plot(segset,col=rainbow(numsegs))
return(invisible(segset))
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-27T02:18:52.600

该`spatstat`功能`selfcut.psp`正是为此目的而设计的。

```
Y <- selfcut.psp(X) 
```

有关操纵线段模式的更多信息，请参阅[spatstat book](http://spatstat.github.io/book/)中的第 4.4 节。

# java - 同一个 BufferedImage 对象加载多个图像时的内存泄漏

> ID：14362135
> 
> 赞同：0
> 
> 时间：2013-01-16T15:39:30.507
> 
> 标签：java, performance, memory, bufferedimage, javax.imageio

我正在尝试制作一个从文件夹中获取 jpeg 图像（4 张图像）并将它们合并为一个大图像的工具。

```
for (int i = desde; i < hasta + 1; i++) {
            for (int j = 0; j < 4; j++) {
                foto = ImageIO.read(new File("C:/picYou/Pic you_diciembre 06 2012/Pic you_take" + i + "/" + (j + 1) + ".jpg"));
                g.drawImage(foto, 300, 300 + j * (altoFoto + 20), null);
                foto.flush();
                foto = null;
            }
            File output = new File("C:/picYou/" + i + ".jpg");
            ImageIO.write(img, "jpg", output);
            g.finalize();
            g.dispose();
        } 
```

g 是 graphics2d 对象， foto 是 BufferedImage。

问题是，即使我在加载另一个图像之前刷新图像并使其为空，图像使用的内存也没有被释放。如您所见，每张图片都以“照片”加载，有什么方法可以提高效率吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:44:36.460

内存在需要时由垃圾收集器释放，而不是按需释放。

*如果您想检查是否有内存泄漏，我建议您使用 VisualVM 并查看仅在 Full GC 之后*使用了多少内存

# android - 修复布局图像视图和可滚动文本视图

> ID：14362137
> 
> 赞同：0
> 
> 时间：2013-01-16T15:39:34.400
> 
> 标签：android

我需要一个带有固定图像和可滚动文本视图的布局。问题是：如果文本增加，imageview 会变小，反之亦然。我想修复图像的大小。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:orientation="vertical" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="#000"
        android:src="@drawable/luna" />

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

<TextView 
    android:text="test test test test" 
    android:textSize="15pt" 
    android:background="#000000" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:layout_weight="1"/>

</ScrollView> 
</LinearLayout>

E/AndroidRuntime(  729): FATAL EXCEPTION: main
E/AndroidRuntime(  729): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.luna/com.example.luna.MainActivity}: android.view.InflateException: Binary XML file line #8: Error inflating class <unknown>
E/AndroidRuntime(  729):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
E/AndroidRuntime(  729):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
E/AndroidRuntime(  729):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
E/AndroidRuntime(  729):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
E/AndroidRuntime(  729):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(  729):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(  729):    at android.app.ActivityThread.main(ActivityThread.java:4745)
E/AndroidRuntime(  729):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  729):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(  729):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime(  729):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime(  729):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(  729): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class <unknown>
E/AndroidRuntime(  729):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
E/AndroidRuntime(  729):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
E/AndroidRuntime(  729):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
E/AndroidRuntime(  729):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
E/AndroidRuntime(  729):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
E/AndroidRuntime(  729):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
E/AndroidRuntime(  729):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
E/AndroidRuntime(  729):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
E/AndroidRuntime(  729):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
E/AndroidRuntime(  729):    at android.app.Activity.setContentView(Activity.java:1867)
E/AndroidRuntime(  729):    at com.example.luna.MainActivity.onCreate(MainActivity.java:21)
E/AndroidRuntime(  729):    at android.app.Activity.performCreate(Activity.java:5008)
E/AndroidRuntime(  729):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
E/AndroidRuntime(  729):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
E/AndroidRuntime(  729):    ... 11 more
E/AndroidRuntime(  729): Caused by: java.lang.reflect.InvocationTargetException
E/AndroidRuntime(  729):    at java.lang.reflect.Constructor.constructNative(Native Method)
E/AndroidRuntime(  729):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
E/AndroidRuntime(  729):    at android.view.LayoutInflater.createView(LayoutInflater.java:587)
E/AndroidRuntime(  729):    ... 24 more
E/AndroidRuntime(  729): Caused by: java.lang.OutOfMemoryError
E/AndroidRuntime(  729):    at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
E/AndroidRuntime(  729):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:500)
E/AndroidRuntime(  729):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:353)
E/AndroidRuntime(  729):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:781)
E/AndroidRuntime(  729):    at android.content.res.Resources.loadDrawable(Resources.java:1930)
E/AndroidRuntime(  729):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
E/AndroidRuntime(  729):    at android.widget.ImageView.<init>(ImageView.java:120)
E/AndroidRuntime(  729):    at android.widget.ImageView.<init>(ImageView.java:110)
E/AndroidRuntime(  729):    ... 27 more
W/ActivityManager(  150):   Force finishing activity com.example.luna/.MainActivity
W/WindowManager(  150): Failure taking screenshot for (164x246) to layer 21010
I/Choreographer(  150): Skipped 104 frames!  The application may be doing too much work on its main thread.
W/ActivityManager(  150): Activity pause timeout for ActivityRecord{412421f0 com.example.luna/.MainActivity}
I/Choreographer(  150): Skipped 31 frames!  The application may be doing too much work on its main thread.
I/Choreographer(  262): Skipped 79 frames!  The application may be doing too much work on its main thread.
I/Choreographer(  150): Skipped 43 frames!  The application may be doing too much work on its main thread.
I/Choreographer(  150): Skipped 31 frames!  The application may be doing too much work on its main thread.
I/Choreographer(  150): Skipped 35 frames!  The application may be doing too much work on its main thread.
I/ActivityManager(  150): No longer want com.android.contacts (pid 371): hidden #16
W/ActivityManager(  150): Activity destroy timeout for ActivityRecord{412421f0 com.example.luna/.MainActivity} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:46:34.447

您是否尝试`android:layout_height="0dp"`过使用`android:layout_weight="1"`（并在/`scrollview`中删除它）？`imageview``textview`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:orientation="vertical" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/luna" />

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >

<TextView 
    android:text="test test test test" 
    android:textSize="15pt" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" />

</ScrollView> 
</LinearLayout> 
```

# ruby-on-rails - 存根控制器内的实例变量

> ID：14362139
> 
> 赞同：9
> 
> 时间：2013-01-16T15:39:36.740
> 
> 标签：ruby-on-rails, ruby, rspec, tdd

我正在使用 rspec 1.3.2 来测试一个看起来像这样的控制器操作：

```
def action_foo
  ...
  @bar.can_do_something?
  ...
end 
```

我正在尝试存根`@bar`（假设它是 class 的一个实例`Bar`）实例变量，但我无法做到。我想如果我可以访问，`any_instance`那么我可以这样做`Bar.any_instance.stub(:can_do_something?)`，但这在我正在使用的 rspec 版本中不可用。

还有另一种访问和存根的方法`@bar`吗？以下方法均无效：

```
@bar.stub(:can_do_something?)
controller.instance_variable_get("@bar").stub(:can_do_something?)
controller.stub_chain(:bar, :can_do_something?)
Bar.new.stub(:can_do_something?) 
```

编辑：

`@bar`被分配在一个`before_filter`. 就像是`@bar = Bar.find(n)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-04T23:52:02.460

为了记录，我认为这更干净一些：

```
bar = Bar.new # or use FactoryGirl to create a Bar factory
bar.stub(:can_do_something?) { # return something }
controller.instance_variable_set(:@bar, bar) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:50:02.073

```
 Bar.any_instance.stub(:can_do_something?) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T23:46:41.383

如果所有其他方法都失败了，您可以执行类似于 any_instance.stub 的操作。为了记录，这让我感到肮脏。

```
Bar.class_eval do
  alias :original_can_do_something? :can_do_something?

  def can_do_something?  # "stub" method
    # Return whatever you need here
  end
end

# Run your test

Bar.class_eval do
  alias :can_do_something? :original_can_do_something?  # "unstub" the method
end 
```

# vbscript - 将基于 Windows 的脚本文件转换为 exe 文件

> ID：14362145
> 
> 赞同：0
> 
> 时间：2013-01-16T15:39:58.177
> 
> 标签：vbscript, exe, wsh

我已经创建了 WScript 文件，我需要将其制作为 .EXE 文件，这样没有人可以访问我的代码，有什么办法吗？我只想对可能使用脚本文件的其他用户隐藏我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:49:26.963

我想你要找的就[在这里](http://vbsedit.com/)。将您的 vb 脚本转换为 exe。请享用：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:37:02.680

您可以尝试使用[脚本编码器](http://www.vbs2exe.com/encrypt-vbs.html)来*加密*或混淆脚本，但可能有一种方法可以绕过它。

我知道没有 VBS 到 EXE 的转换——你可以将它移植到 VB 并编译它。VBS 和 VB6 非常相似，因此移植代码应该相当容易。再说一次，VB 也有反编译器。这一切都归结为你想制造多高的障碍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:34:17.660

谢谢大家，但我找到了一种有用的、易于实现的方法，使用下面的站点，它将 JS 和 VBS 文件转换为 .exe 文件。

[http://www.f2ko.de/programs.php?lang=en&pid=ov2e](http://www.f2ko.de/programs.php?lang=en&pid=ov2e)

谢谢， 马奈萨

# single-sign-on - StarterSTS 作为备份身份验证存储

> ID：14362152
> 
> 赞同：0
> 
> 时间：2013-01-16T15:40:06.693
> 
> 标签：single-sign-on, wif, adfs2.0, adfs, adlds

我在 ADFS 2.0 中将 starterst 设置为 ClaimsProviderTrust。通过更改 ADFS 2.0 web.config 条目来配置要显示的登录表单。我正在尝试在此处自定义登录过程，以便当有人输入电子邮件地址时，他将通过 ADFS 2.0 安装提供的 Active Directory 登录 StarterSts。我已经尝试过帖子[http://blogs.msdn.com/b/card/archive/2010/01/27/customizing-the-ad-fs-2-0-sign-in-web-pages 中的代码。 aspx](http://blogs.msdn.com/b/card/archive/2010/01/27/customizing-the-ad-fs-2-0-sign-in-web-pages.aspx)

```
protected void SubmitButton_Click( object sender, EventArgs e )
{
    try
    {
        SignInWithTokenFromOtherSTS( UsernameTextBox.Text, PasswordTextBox.Text );
    }
    catch ( Exception ex )
    {
        //
        // Fall back to signing in locally with the given username and password.
        //
        SignIn( UsernameTextBox.Text, PasswordTextBox.Text );
    }
} 
```

我只是不知道变量`OtherSTSAddress`和`YourSTSAddress`. 使这个地址正确后我需要做更多的配置吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:50:22.347

根据您提供的链接：

```
const string OtherSTSAddress = "https://ipsts.federatedidentity.net/SecurityTokenService/InteropSts.svc/Sts";

const string YourSTSAddress = "https://your-sts/adfs/ls/"; 
```

所以前者是 StarterSTS 的 WS-Trust 端点。

后者是 ADFS WS-Fed 端点。只需在“your-sts”部分替换您安装 ADFS 的框的 URL。

根据文章，这就是你所需要的。

# javascript - 这是准备好双重文件了吗？

> ID：14362153
> 
> 赞同：2
> 
> 时间：2013-01-16T15:40:07.257
> 
> 标签：javascript, jquery, dom, document

我正在使用脚本并找到以下内容，我真的找不到任何关于它的含义的信息

```
(function($) {
    $(document).ready(function(e) {

       ... bla bla bla ...

    });
}) (jQuery); 
```

是`(function($){}) (jQuery);`一样的`$(function () {});`吗？如果是这样，为什么有人会定义两次`document.ready`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:42:13.377

不，不一样。它是一个匿名函数，它被传递给 jQuery 对象，以确保它可以作为`$`函数范围内的局部变量使用，即使全局变量`$`被另一个库覆盖。`$(function () { })`它与和完全不同`$(document).ready(function () { })`。

[在jQuery 插件编写](http://docs.jquery.com/Plugins/Authoring)文档中推荐使用这种特定模式：

> *[创作插件时]*最好将 jQuery 传递给 IIFE（立即调用函数表达式），将其映射到美元符号，这样它就不会在其执行范围内被另一个库覆盖。
> 
> ```
> (function( $ ) {
>   $.fn.myPlugin = function() {
>  
>    // Do your awesome plugin stuff here
> 
>  };
> })( jQuery ); 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:42:14.803

> 是`(function($){}) (jQuery);`一样的`$(function () {});`吗？

不。第一个是立即调用匿名函数，主要用于防止全局范围的污染。在这种情况下，它还用于确保它`$`是对 的引用`jQuery`，而不用担心会覆盖`$`其他地方。

第二个是用 jQuery[绑定文档就绪处理程序的简写。](http://api.jquery.com/jQuery/#jQuery3)

更多阅读：

*   [javascript中自执行函数的目的是什么？](https://stackoverflow.com/questions/592396/what-is-the-purpose-of-a-self-executing-function-in-javascript/2867041#2867041)
*   [这种 JavaScript 立即调用模式的原因是什么？](https://stackoverflow.com/questions/8475578/what-is-the-reason-for-this-javascript-immediate-invocation-pattern)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T15:43:02.523

不，它不是，`(function($){}) (jQuery);`是一个 IIFE（立即调用的函数表达式）将 jQuery 作为参数传递并使用`$`在函数范围内表示它，因此如果在`$`不使用 jQuery.noConflict 的情况下加载另一个使用的库，则不会发生冲突。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T15:45:23.873

没有

```
(function(){})(); 
```

浏览器遇到该脚本时立即执行。.ready() 是整个文档解析完成后触发的事件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T15:42:22.557

不，这不对。它是一个内部带有文档就绪处理程序的闭包。它用于确保`$`外壳内的内容是为 jQuery 保留的，并且不会干扰任何其他库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T15:44:14.233

这里有一个很好的清晰解释；

[http://jquery-howto.blogspot.com/2008/12/what-heck-is-function-jquery.html](http://jquery-howto.blogspot.com/2008/12/what-heck-is-function-jquery.html)

# java - Maven 不使用指定的源和目标设置

> ID：14362155
> 
> 赞同：4
> 
> 时间：2013-01-16T15:40:08.243
> 
> 标签：java, maven

我正在尝试使用 maven 构建一个 java 项目。在项目根目录的 pom.xml 文件中，我有以下几行：

```
 <plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-compiler-plugin</artifactId>
  <configuration>
    <source>1.6</source>                                                                             
    <target>1.6</target>
    <debug>true</debug>
    <encoding>UTF-8</encoding>
  </configuration>
</plugin> 
```

但是当我尝试构建时`mvn -DskipTests -U install`，我得到以下`error: static import declarations are not supported in -source 1.3`

maven 没有使用我在 pom.xml 中指定的源和目标（1.6）。

```
java -version
java version "1.7.0_11"
Java(TM) SE Runtime Environment (build 1.7.0_11-b21)
Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode)

mvn --version
Apache Maven 3.0.4
Maven home: /usr/share/maven
Java version: 1.7.0_11, vendor: Oracle Corporation
Java home: /usr/lib/jvm/java-7-oracle
Default locale: en_US, platform encoding: UTF-8
OS name: "linux", version: "3.5.0-21-generic", arch: "amd64", family: "unix"

uname -a
Linux ubuntu 3.5.0-21-generic #32-Ubuntu SMP Tue Dec 11 18:51:59 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

maven 是否可以从其他任何地方获取其默认源和目标设置？为什么不使用 pom 中的设置？

以下是 maven 在调试模式下运行时的错误消息片段：

```
 [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile) on project LeaderLines: Compilation failure
 [ERROR] /path/geoserver-2.2/geotools-plugin/LeaderLines/src/org/geotools/filter/function/FilterFunction_leaderLine.java:[22,7] error: static import declarations are not supported in -source 1.3

 [ERROR] -> [Help 1]                                                                                
 org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins: maven-compiler-plugin:2.0.2:compile (default-compile) on project LeaderLines: Compilation failure
 /path/geoserver-2.2/geotools-plugin/LeaderLines/src/org/geotools/filter/function/FilterFunction_leaderLine.java:[22,7] error: static import declarations are not supported in -source 1.3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T13:25:26.620

尝试清除本地 Maven 存储库并再次运行构建（也许，也尝试使用“-o”选项运行它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:42:40.943

尝试使用以下属性设置源级别和源编码：

```
<properties>
    <maven.compiler.source>1.6</maven.compiler.source>
    <maven.compiler.target>1.6</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

# matlab - 使用基于第三个矩阵 C 的条件语句从矩阵 A 到矩阵 B 的矩阵分配

> ID：14362165
> 
> 赞同：0
> 
> 时间：2013-01-16T15:40:45.573
> 
> 标签：matlab, matrix

如果您能友好地回答，我有两个问题：

Q1) 我有一个矩阵`choice`，每个人做出 4 种可能的选择，分别表示为 1、2、3 和 4。我有三个矩阵`A1`，`A2`，`A3`其中包含每个人和每个时间段的收入信息。假设我有 n 个人和 t 个时间段，所以`A1`, `A2`,`A3`是 n-by-t 并且`choice`是 n-by-t。

现在我想制作另一个矩阵，根据选择矩阵中的值从`B`哪里`B`选择元素，即如果，那么。如果，那么，以此类推。`A``choice(n,t)==1``B(n,t) = A1(n,t)``choice(n,t)==2``B(n,t) = A2(n,t)`

我试过for循环和if语句，我做不到。请帮忙。

Q2）我有一个`A`收入矩阵。`A`是维度 n×t。有些人收入低，有些人收入高。假设任何收入<1000 的人都是低收入，高于 1000 的人是高收入。在我的模拟结束时，我需要知道每个人是高收入还是低收入。如何从更大的矩阵中制作高收入和低收入矩阵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:35:57.517

Q1：

```
C = choice %else the code gets too long
B = A1 .* (C==1) + A2 .* (C==2) + A3 .* (C==3) 
```

如果您只有 A1 A2 A3，我不确定您要如何处理 B 中的值“4”，但这应该可以。

[编辑]：如果选择是“4”，那么对于上面定义的 B i，B 的那个元素将为 0。

Q2：这个有点模糊。也许这就是你想要的：

```
HighIncome = A > 1000
LowIncome = A <= 1000 
```

如果这样做不行，请更准确地解释您的目标。

[编辑]：根据您对 Q2 稍微不那么含糊的解释，听起来您不想这样：

```
A_high_income = A .* (A > 1000)
A_low_income = A .* (A <= 1000)
CHOICE_high_income = choice .* (A > 1000)
CHOICE_high_income = choice .* (A <= 1000) 
```

高收入矩阵在低收入位置处为零，反之亦然。恕我直言，这并没有多大意义，但这是我能得到的最接近你的描述。如果不这样做，请按照我下面评论中的说明并发布一些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:43:01.173

Q1：你可以使用三个简单的语句和一些逻辑索引。

```
B = A1;
B(choice == 2) = A2(choice == 2);
B(choice == 3) = A3(choice == 3); 
```

Q2：要根据收入将 A 和选择分成两部分，您首先找到“低收入”行的索引并使用它从矩阵中获取行。

```
lowIncomeNdx = any(A < 1000, 2);
lowIncome = A(lowIncomeNdx, :);
lowIncomeChoice = choice(lowIncomeNdx, :);
highIncome = A(~lowIncomeNdx, :);
highIncomeChoice = choice(~lowIncomeNdx, :); 
```

# android - 如何在模拟器中使用语音拨打电话

> ID：14362171
> 
> 赞同：0
> 
> 时间：2013-01-16T15:41:02.720
> 
> 标签：android, emulation, voice-recording

我正在构建一个可以记录来电的应用程序。我希望来电有一些声音来测试我的应用程序。如何配置模拟器来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:01:41.523

您可以从您的模拟器生成虚拟调用`DDMS -> Emulator Control`

`Java`DDMS 可以从“ ”按钮附近的右上角按钮添加

# sql - Oracle SQL 无法选择我的索引

> ID：14362172
> 
> 赞同：0
> 
> 时间：2013-01-16T15:41:03.360
> 
> 标签：sql, oracle, indexing

我创建了这样的索引：

```
--CREATE INDEXES for Tables
CREATE UNIQUE INDEX worker_name_index ON WORKER (worker_id);
CREATE UNIQUE INDEX company_name_index ON COMPANY (company_name);
CREATE UNIQUE INDEX project_name_index ON PROJECT (project_id); 
```

但找不到索引在哪里：

```
SELECT * FROM USER_INDEXES; 
```

也不在这里：

```
SELECT * FROM ALL_INDEXES; 
```

也不在这里：

```
SELECT * FROM DBA_INDEXES; 
```

并且也不能删除这些索引，因为删除会抛出 ORA-01418:specified index does not exist 错误。

```
--REMOVE INDEXES
DROP INDEX project_name_index;
DROP INDEX company_name_index;
DROP INDEX project_name_index; 
```

并且无法重新创建，因为创建上升 ORA-01408:such columnt in list already indexed error...

已编辑（使用 select * all_ind_columns 并且索引不存在）

![在此处输入图像描述](../Images/adcfa3f42acf4ff1ce489a863da31f17.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:23:10.900

您的问题似乎有点误导，因为您永远无法成功创建那些命名索引。如您对 的后续查询所示`all_ind_columns`，例如：

```
select * from all_ind_columns
where table_name = 'WORKER' and column_name = 'WORKER_ID' 
```

...您尝试索引的列已经存在系统生成的索引。名称（例如`SYS_C0011015`）表明它们是针对表定义的主键（或可能是唯一的）约束的系统生成的后备索引。

几个地方的[文档说明：](http://docs.oracle.com/cd/E14072_01/server.112/e10592/clauses002.htm)

> 如果您不指定约束名称，则 Oracle 会为 SYS_Cn 形式的约束生成系统名称。

所以你不能创建命名索引；如果表上已经存在约束，那么您总是会得到 ORA-01408，并且如果您在创建索引后尝试添加约束，那么`alter`将会失败。由于它们确实不存在，因此它们没有被列出`all_indexes`并且不能被丢弃是很合理的，并且您不能出于同样的原因重新创建它们，因为您一开始就无法创建它们......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:56:25.967

您创建的索引可能与您用于删除或选择此索引的用户不同。

# unit-testing - 在公共课程中单元测试私人课程？

> ID：14362173
> 
> 赞同：0
> 
> 时间：2013-01-16T15:41:04.900
> 
> 标签：unit-testing

是否可以对私有类进行单元测试？我有类似的东西

```
 public class ClassA: ClassB    
      {     
         private class ClassX: ClassY   
         { 
            public static int TestMethod(int numberA, int numberB) 
               { 
               return numberA + numberB
               }  
          }
       } 
```

我想测试“TestMethod”但无法访问它。我尝试使用 Class A 和 Class Y 为私有 ClassX 创建新实例，但它不允许我访问“TestMethod”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:43:56.817

测试私人成员不是一个好习惯。他们应该使用公开的成员进行测试。

但是，如果您使用的是[MSTest](http://pluralsight.com/training/Courses/TableOfContents/mstest)，则可以使用[accessors](http://msdn.microsoft.com/en-us/library/ms184807%28v=vs.80%29.aspx)。

如果您正在使用其他测试框架，则可以利用[反射](http://blogs.msdn.com/b/jamesnewkirk/archive/2004/06/07/150361.aspx)。

以上适用于.NET。我不知道如何在其他语言中实现相同的效果（如果您要求使用 java/其他语言）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:43:18.587

应该有一个公共方法调用您的私有类中的方法。您应该对该方法进行单元测试。如果您无法通过公共接口访问您的私有方法，那么可能不需要私有方法开始。

# visual-studio-2010 - 在 Visual Studio 中添加 Excel RTD Server 项目类型

> ID：14362176
> 
> 赞同：0
> 
> 时间：2013-01-16T15:41:20.943
> 
> 标签：visual-studio-2010, visual-studio, add-in, rtd

我想创建类似于： http: [//www.add-in-express.com/docs/net-excel-rtd-servers.php](http://www.add-in-express.com/docs/net-excel-rtd-servers.php)

当我打开 Visual Studio 时，即使我以管理员身份运行它，我也没有该项目类型......

![在此处输入图像描述](../Images/2a9a6dce211c31274b3bd244eb98584f.png)

我必须做什么才能在 Visual Studio 上拥有该项目类型（ *ADX RTD Server ）？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:57:39.067

您只需安装适用于 Office 和 .net 的 Add-in Express。Visual Studio 2010 没有试用版，但如果您有 VS 2012，则可以从 Visual Studio Gallery 下载 60 天评估版的 Add-in Express：http: [//visualstudiogallery.msdn.microsoft.com/A4880BFE- A230-44B6-9D23-86AFAA1A2997](http://visualstudiogallery.msdn.microsoft.com/A4880BFE-A230-44B6-9D23-86AFAA1A2997)

# mysql - mysql 在行字符串 mbrcontains 中使用 lat long 列

> ID：14362178
> 
> 赞同：1
> 
> 时间：2013-01-16T15:41:22.503
> 
> 标签：mysql, geospatial

我将纬度和经度作为浮点数存储在 mysql 表中。我正在尝试使用 SELECT ... WHERE 命令来仅获取每行中两组坐标之间的线在边界内的行，即

> ... mbrcontains（geomfromtext（'Polygon（（50.619 0.479,53.153）0.019,54.089 -3.495,51.504 -2.941,50.619 0.479 0.479）' ...

效果很好，但是当我将 LINESTRING 更改为

> ...其中 MBRContains( GeomFromText(''Polygon((50.619 0.479,53.153 0.019,54.089 -3.495,51.504 -2.941,50.619 0.479))''), GeomFromText('LINESTRING( `addresses`. `latitude` `addresses`. `longitude`. `addresses1`. `latitude` `addresses1`. `longitude`)'))

它失败。显然select之前已经加入了地址表来创建address和address1表，这是正确的。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T15:56:08.843

您正在引用 LINESTRING 引号内的列，因此 MySQL 将其视为 WKT 定义的一部分：

`'LINESTRING(addresses.latitude addresses.longitude,addresses1.latitude addresses1.longitude)'`

由于你的列值没有被取消引用，这个 WKT 是无效的，当一个无效的 WKT 被传递给 GeomFromText 时，MySQL 悄悄地返回一个 NULL，导致 MBRContains 失败。使用 CONCAT 为 GeomFromText 建立一个正确的 LINESTRING：

`CONCAT('LINESTRING(',addresses.latitude',' ',addresses.longitude,',',addresses1.latitude....`

# c# - 在 C# 的 using 语句中使用多个值？

> ID：14362184
> 
> 赞同：0
> 
> 时间：2013-01-16T15:41:56.817
> 
> 标签：c#, using-statement

在 Python 中，您可以执行以下操作：

```
with open('filename') as f, something_else(f) as thing:
    do_thing(thing) 
```

它会做`open`一点，然后`something_else`一点。当块退出时，它将以相反的顺序“处理”它。

现在我有一些像这样的 C# 代码：

```
using (var cmd = new DB2Command(...)){
    using (var rdr = cmd.ExecuteReader()){
        // Magic super-duper-top-secret-code-here
    }
} 
```

有什么方法可以合并`cmd`成`rdr`一个`using`语句吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:43:35.330

仅当两个对象共享相同类型且它们不存在时，您才能执行此操作。

请注意，您不需要在外部使用大括号`using`，并且没有它，代码看起来更干净：

```
using (var cmd = new DB2Command(...))
using (var rdr = cmd.ExecuteReader())
{
    // Magic super-duper-top-secret-code-here
} 
```

如果对象都属于同一类型，则可以执行以下操作：

```
using(FileStream stream1 = File.Open("", FileMode.Open)
    , stream2 = File.Open("", FileMode.Open))
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:42:59.907

你可以这样做：

```
using (var cmd = new DB2Command(...))
using (var rdr = cmd.ExecuteReader())
{
    // Magic super-duper-top-secret-code-here
} 
```

这是它会得到的最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:54:42.897

所以我会尝试一些不使用 using ...

```
 public void processDisposables<T1, T2>(T1 type1, T2 type2, Action<T1, T2> action)
        where T1: IDisposable
        where T2: IDisposable {

            try {
                action(type1, type2);
            } finally {
                type1.Dispose();
                type2.Dispose();
            }
    } 
```

它的用法：

```
 processDisposables(new MemoryStream(), new StringReader("Frank Borland is 112"), (m, s) => {
        m.Seek(0, SeekOrigin.End);
        // other stuff with IDisposables
    }); 
```

# css - td 后面的图像（类似于背景）

> ID：14362188
> 
> 赞同：-1
> 
> 时间：2013-01-16T15:42:04.427
> 
> 标签：css

我有一个包含菜单的表格，每个菜单项在新行中居中对齐。

```
<table><tr>
<td> Menu item 1 </td>
<td> Menu item 2 </td>
...
</tr></table> 
```

我想在该菜单“后面”放置一些图像，所以假设我将图像放在第一行，并使其透明，因此它跨越其余行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:49:48.420

我不知道你为什么不只使用背景——这正是你在这里所描述的。要添加背景图像，您可以使用

```
<table style="background: url(path/to/image);">
... 
```

除了通常不鼓励使用内联样式外，您还可以使用这个 css：

```
table {
    background: url(path/to/image);
} 
```

而且，虽然这对您来说似乎不是问题，但您希望获得更快的加载时间，您可以改用 css 类。

```
.menu {
    background: url(path/to/image);
} 
```

并将您的更改`<table>`为`<table class="menu">`.

# jquery - 元素数组的jQuery .change事件

> ID：14362190
> 
> 赞同：1
> 
> 时间：2013-01-16T15:42:08.797
> 
> 标签：jquery

我在页面中有一组下拉列表，记录列表中的每一行都有一个。我需要在触发每个更改事件的下拉列表行中更新 DIV 的内容。

像这样的东西：

```
<div class="price"></div>

<select id="plan[]" name="plan[]" class="sel">
  <option value="0" selected="selected">None</option>
  <option value="1">One</option>
  <option value="2">Two</option>
</select>   

$(function() {
    $('#plan').change(function(){
        $(this).prevAll('.price:first').html('foo bar');
    });
}); 
```

更改事件永远不会触发，我错过了什么？这是一个要测试的[小提琴](http://jsfiddle.net/8daeu/5/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:43:01.307

尝试使用带有 id 选择器的startswith 通配符。

**[现场演示](http://jsfiddle.net/ySTFq/)**

```
$(function() {
    $('[id^=plan]').change(function(){
        $('.price:first').html('foo bar');
    });
}); 
```

如果您有单个项目并且不需要通配符，您可以使用像这样的 id 选择器来完成。

**[现场演示](http://jsfiddle.net/ySTFq/2/)**

```
$(function () {
  $('[id="plan[]"]').change(function () {
    $(this).prev('.price').html('foo bar');
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:44:02.467

您的元素的 id`plan[]`不是`plan`，因此事件回调未注册到任何对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:44:54.790

`id`是`plan`不是`plan[]`。 _ `$("#plan[]")`应该作为选择器工作，但对我来说似乎也是一个错误。您可能想将其更改为其他内容。这也意味着`plan[]`页面上有多个id元素，这是无效的。

# c# - 将字段放入下一个空数组索引

> ID：14362195
> 
> 赞同：1
> 
> 时间：2013-01-16T15:42:18.577
> 
> 标签：c#, arrays, foreach, boolean, appsettings

如何将字符串放入字符串数组中的下一个空索引？我想使用一个foreach循环，看看是否所有的布尔字符串都是有效的布尔值，然后把无效的布尔字符串的键放到一个数组中

```
string[] invalidKeys;
foreach (string key in ConfigurationManager.AppSettings)
{
    string value = ConfigurationManager.AppSettings[key];
    if (IsValidBooleanString(value) == false)
    {
        //Add 'key' to next empty index in the array 'invalidKeys'.
    }
return invalidKeys; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:47:35.270

您尚未初始化或指定数组的长度。您需要指定数组的长度来创建一个，但在您的情况下，您事先不知道该信息

所以你可以使用 List 代替

```
var invalidKeys = new List<String>();
foreach (string key in ConfigurationManager.AppSettings.Keys)
{
    string value = ConfigurationManager.AppSettings[key];
    if (IsValidBooleanString(value) == false)
    {
        //Add 'key' to next empty index in the array 'invalidKeys'.
        invalidKeys.Add(key);
    }
return invalidKeys; 
```

还注意到你的 foreach 应该在 ConfigurationManager.AppSettings.Keys 而不是 ConfigurationManager.AppSettings

这样做的其他方法是

```
var invalidKeys = 
ConfigurationManager.AppSettings.Keys
.Where(k => IsValidBooleanString(ConfigurationManager.AppSettings[k]) == false)
.ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:58:21.423

如果你真的想成为一名 C# 程序员：

```
return (from string key in ConfigurationManager.AppSettings
    where !IsValidBooleanString(ConfigurationManager.AppSettings[key])
    select key).ToList(); 
```

或 ToArray() 或其他。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:16:54.453

的功能`IsValidBooleanString()`可能在其他地方有用。我建议将它放在**扩展类**中：

```
public static class StringExtender
{
  static readonly string[] validBooleanStrings = { "True", "False", "Yes", "No" };

  public static bool IsValidBooleanString(this string value)
  {
    return ValidBooleanStrings.Contains(value, StringComparer.OrdinalIgnoreCase);
  }
} 
```

有人会说为单个方法创建扩展类有点过头了，但事实并非如此，它使您的代码模块化和可重用。更不用说当你遇到类似的场景时，你可以在这里添加更多的扩展方法。

现在所有`string`对象都`.IsValidBooleanString()`附加了一个方法，并自动将它们自己 ( `this`) 传递给它。[MSDN：扩展方法 (C#)](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)

为了检索具有无效布尔字符串值的所有设置键的列表，我将使用`LINQ`查询：

```
var settings = ConfigurationManager.AppSettings;

// Gets all the keys for values that are invalid boolean strings.
var invalidKeys = from key in settings.Keys
                   where !settings[key].IsValidBooleanString()
                   select key;

 // If you want a list...
 var invalidKeyList = invalidKeys.ToList<string>();

 // If you want an array...
 var invalidKeyArray = invalidKeys.ToArray<string>(); 
```

`LINQ`查询`IEnumerable<>`根据您提供的内容返回值。由于我在`select`输入一个`string`类型 ( `key`)，它知道给我一个`IEnumerable<string>`. 然后，您可以根据需要创建一个`List<string>`或`string[]`从结果。

# python - OS X 上 virtualenv 中的 wxPython？

> ID：14362197
> 
> 赞同：0
> 
> 时间：2013-01-16T15:42:23.947
> 
> 标签：python, wxpython, virtualenv, wxwidgets

我刚刚做了一个 virtualenv，安装了 py2app 和 wx，然后运行了一个 wxPython 应用程序。我有：

```
 class mainWindow(wx.Frame):
AttributeError: 'module' object has no attribute 'Frame' 
```

出于某种原因，当它从 virtualenv 运行时它永远不会工作。我听说这可以通过`wx`从源代码编译 python 模块来解决，但我无法访问任何编译器。有没有办法可以在没有 root 的情况下解决这个问题，或者任何需要 root 才能安装的东西？

我正在使用 virtualenv，因为 2.7 在我的系统上没有 py2app，并且我的管理员拒绝安装它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:37:36.290

我已经记录了我如何在 Mac 上的 virtualenv 中使用 wxPython。这有点杂乱无章，但它确实有效。见[http://wiki.wxpython.org/wxPythonVirtualenvOnMac](http://wiki.wxpython.org/wxPythonVirtualenvOnMac)

# python - 从 powershell 调用 wlst / jython

> ID：14362207
> 
> 赞同：0
> 
> 时间：2013-01-16T15:42:41.183
> 
> 标签：python, powershell, jython, wlst

我想用参数从 powershell 调用 wlst/jython 脚本。（这里是简化版）

你好.ps1

```
 param (
    [string]$cmd = "none"
 )

echo "cmd - $cmd"
Switch ($cmd) {
     "hello" {
             Write-Host "Start hello ..."
             $script='C:\_WORK_\hello.py'
             & java -cp C:\bea\tpc\WEBLOG~1\server\lib\weblogic.jar weblogic.WLST $script
         }
     "main" {
             Write-Host "w main $cmd" 
             $cmd='-c "hello"'
             $script="C:\_WORK_\hello_main.py"
             Write-Host "script: $script"
             & java -cp C:\bea\tpc\WEBLOG~1\server\lib\weblogic.jar weblogic.WLST $script $cmd
     }
     Default {Write-Warning "Invalid Choice. Try again."
                  sleep -milliseconds 750}
    } #switch 
```

你好.py

```
print "Hello without main/args" 
```

hello_main.py

```
import getopt

def main():
    try:
        opts, args = getopt.getopt(sys.argv[1:], "hc:v", ["help", "command="])
    except getopt.GetoptError, err:
        # print help information and exit:
        print str(err) # will print something like "option -a not recognized"
        usage()
        sys.exit(2)
    command = None
    verbose = False
    for o, a in opts:
        if o == "-v":
            verbose = True
        elif o in ("-h", "--help"):
            usage()
            sys.exit()
        elif o in ("-c", "--command"):
            command = a
        else:
            assert False, "unhandled option"
    print 'command: '+command
    if (command == 'hello'):
        print "if hello"

if __name__ == 'main':
    main() 
```

**使用“hello.ps1 -cmd main”，脚本在“print 'command: '+command”之后终止，我不知道为什么**

```
>powershell c:\_WORK_\SAS\hello.ps1 -cmd main
cmd - main
w main main
script: C:\_WORK_\SAS\hello_main.py

Initializing WebLogic Scripting Tool (WLST) ...

command:  hello

>powershell c:\_WORK_\SAS\hello.ps1 -cmd hello
cmd - hello
Status ...

Initializing WebLogic Scripting Tool (WLST) ...

Hello without main/args 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:13:49.453

```
 "main" {
         Write-Host "w main $cmd" 
          $arg0 = "C:\_WORK_\SAS\hello_main.py"
          $arg1 = "-c"
          $arg2 = "hello"

          $allArgs = @($arg0, $arg1, $arg2)

         & java -cp C:\bea\tpc\WEBLOG~1\server\lib\weblogic.jar weblogic.WLST $allArgs 
```

# python - 我如何用许多变量 python 填充列表

> ID：14362209
> 
> 赞同：0
> 
> 时间：2013-01-16T15:42:48.460
> 
> 标签：python

我有一些变量，我需要比较它们中的每一个并根据比较填充三个列表，如果`var == 1`添加`1`到`lista_a`，如果`var == 2`添加`1`到`lista_b`...，例如：

```
inx0=2 inx1=1 inx2=1 inx3=1 inx4=4 inx5=3 inx6=1 inx7=1 inx8=3 inx9=1
inx10=2 inx11=1 inx12=1 inx13=1 inx14=4 inx15=3 inx16=1 inx17=1 inx18=3 inx19=1
inx20=2 inx21=1 inx22=1 inx23=1 inx24=2 inx25=3 inx26=1 inx27=1 inx28=3 inx29=1

lista_a=[]
lista_b=[]
lista_c=[]

#this example is the comparison for the first variable inx0
#and the same for inx1, inx2, etc...
for k in range(1,30):
    if inx0==1:
        lista_a.append(1)
    elif inx0==2:
        lista_b.append(1)
    elif inx0==3:
        lista_c.append(1) 
```

我需要得到：

```
#lista_a = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
#lista_b = [1,1,1]
#lista_c = [1] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:46:49.347

您的 inx* 变量几乎可以肯定是一个列表：

```
inx = [2,1,1,1,4,3,1,1,3,1,2,1,1,1,4,3,1,1,3,1,2,1,1,1,2,3,1,1,3,1] 
```

然后，找出它有多少个 2：

```
inx.count(2) 
```

如果必须，您可以从中构建一个新列表：

```
list_a = [1]*inx.count(1)
list_b = [1]*inx.count(2)
list_c = [1]*inx.count(3) 
```

但是保留一份清单似乎很愚蠢。实际上，您需要保留的唯一数据是单个整数（计数），那么为什么还要随身携带一个列表呢？

* * *

获取列表的另一种方法是使用 defaultdict：

```
from collections import defaultdict
d = defaultdict(list)
for item in inx:
    d[item].append(1) 
```

在这种情况下，您想要的内容`list_a`可以通过`d[1]`、、 等`list_b`方式访问。`d[2]`

* * *

或者，如评论中所述，您可以使用 a 获得计数`collections.Counter`：

```
from collections import Counter #python2.7+
counts = Counter(inx)
list_a = [1]*counts[1]
list_b = [1]*counts[2]
... 
```

# json - StringHttpMessageConverter 使用中介类型“application/gml+xml”

> ID：14362224
> 
> 赞同：1
> 
> 时间：2013-01-16T15:43:24.747
> 
> 标签：json, spring, hibernate

我正在尝试在 Spring 中使用 @JsonSerialize 注释，然后序列化 GML 字符串，以便该字符串将显示在 MediaType "application/gml+xml" 中，其中 gml 标签可以展开和折叠。我想我可以在 Spring 3 中使用 StringHttpMessageConverter 来实现这一点。有没有人有使用这个的经验。我不知道如何让这个工作。有人可以建议吗？

# iphone - 想在标签栏中创建注销按钮

> ID：14362227
> 
> 赞同：0
> 
> 时间：2013-01-16T15:43:32.003
> 
> 标签：iphone, ios, uitabbar

我创建了一个有 9 个屏幕的应用程序，并在其中添加了包含 4 个 baritem 的标签栏。现在我有两个问题 -

1 => 我的最后一个 baritem 是注销按钮，我不想为它显示视图控制器，只需当用户单击此按钮时，alertview 应该弹出并要求注销，如果用户说是，那么它将注销。

2=> 如何在未添加到标签栏中的视图控制器中显示标签栏，因为我有 9 个屏幕，而标签栏中只有 4 个屏幕显示。

**更新**

我说我的应用程序中有 9 个视图控制器

像...

```
firstViewController
secondViewController
thirdViewController
fourViewController
|
|
ninthViewController 
```

但是我的标签栏在 baritem 中只有四个视图控制器，它们是 -

```
firstViewController
secondViewController
thirdViewController
fourViewController 
```

现在，我的另一个视图控制器不显示标签栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:15:37.420

我不知道这是否正确，但你可以这样做......

首先阅读这个[问题](https://stackoverflow.com/questions/2716755/showing-login-view-controller-before-main-tab-bar-controller)，该问题显示如何显示登录并返回主页。

现在在 didFinishLaunchingWithOptions 方法中添加此代码

UIViewController * logoutVC =[[UIViewController alloc] init];

```
NSArray *viewControllersArray = [[NSArray alloc] initWithObjects:firstView, secondView, thirdView,logoutVC, nil];

self.tabController = [[UITabBarController alloc] init];
[self.tabController setViewControllers:viewControllersArray animated:YES];
[self.window addSubview:self.tabController.view]; 
```

并实现tabbar的这个委托方法

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {
    //select the index where your logout button is
    if ([tabBarController selectedIndex] == 3) {
        NSLog(@"logout");
        self.tabController.selectedViewController = fistView;  //firstview is your home screen
        //LOGOUT
        LoginViewController * vc = [[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil];
        vc.delegate = self;
        [self.tabController presentModalViewController:vc animated:NO];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:53:19.490

**你的第一个问题：**

不要这样做，这是对标签栏控制器的滥用。标签栏控制器上的每个项目都应该是应用程序中的不同视图，而不是操作。为注销操作按钮找到合适的位置。

**你的第二个问题：**

有几种方法可以显示不是选项卡栏控制器的主要 VC 之一的视图控制器。可以通过以下方式到达：

*   显示为模态屏幕

*   作为弹出窗口

**更新**

要显示不是选项卡栏的主 VC 但仍使选项卡栏可见的“辅助”视图控制器，您可以将该辅助 VC 显示为主选项卡栏 VC 的子视图控制器。换句话说，将辅助 VC 的视图呈现为主 VC 视图的子视图。

# android - swfjunkie Tweetr 库是否仍然有效？

> ID：14362231
> 
> 赞同：0
> 
> 时间：2013-01-16T15:43:40.733
> 
> 标签：android, actionscript-3, air, tweetr

我需要将 twitter 集成添加到 AIR for Android 应用程序中，并且我找到了[http://wiki.swfjunkie.com/tweetr](http://wiki.swfjunkie.com/tweetr)库。

但是，网站上给出的例子似乎都不起作用...... [http://wiki.swfjunkie.com/tweetr:examples](http://wiki.swfjunkie.com/tweetr:examples)

这个库是否仍然与今天的 twitter API 兼容？

为什么这些示例没有显示任何推文？

对于向 AIR for Android 应用程序添加时间线显示和发送推文功能，您有什么建议？

谢谢

托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:35:52.333

最近几个月，Twittter API 发生了变化，实际上我不得不重构我的应用程序中的一些代码来处理它。除非更新此库，否则它将无法工作。这里有更多信息： http: [//mashable.com/2012/09/05/twitter-api-rss/](http://mashable.com/2012/09/05/twitter-api-rss/)

# python - 将文件上传到 Google 云端硬盘

> ID：14362232
> 
> 赞同：1
> 
> 时间：2013-01-16T15:43:40.607
> 
> 标签：python, google-drive-api

我使用密钥 (P12) 访问 Google 云端硬盘

我可以浏览文件夹，获取有关文件的数据，获取 Google 驱动器中的文件列表。但我无法将文件上传到 Google 驱动器。

在 TEAM 上一切正常（是所有者）

为什么不给我保存文件的机会？

示例代码我成功获得了文件夹列表：

```
def is_file_in_folder(service, folder_id, file_id):
  try:
    service.children().get(folderId=folder_id, childId=file_id).execute()
  except errors.HttpError, error:
    if error.resp.status == 404:
      return False
    else:
      print 'An error occurred: %s' % error
      raise error
  return True 
```

我试图保存文件的示例代码：

```
def insert_file(service, title, description, parent_id, mime_type, filename):
  media_body = MediaFileUpload(filename, mimetype=mime_type, resumable=True)
  body = {
    'title': title,
    'description': description,
    'mimeType': mime_type
  }
  if parent_id:
    body['parents'] = [{'id': parent_id}]

  try:
    file = service.files().insert(body=body, media_body=media_body).execute()

    return file
  except errors.HttpError, error:
    print 'An error occured: %s' % error
    return None 
```

显示错误 - [ERROR](http://docs.python.org/2/library/httplib.html#httplib.BadStatusLine)

我假设文件正在尝试加载，但有些东西阻止了他，以及（resumable = True），他一次又一次地尝试，直到时间。

我需要什么才能上传文件？

尝试使用代码在 Google 驱动器中创建文件夹，但显示错误（经过身份验证的用户没有对文件的所需访问权限）

那么如何获得这些权利呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:56:08.220

发现了问题。它出现在界面“Google Drive”上显示正确的文件夹是只读的，没有人能够将文件上传到它。正因为如此，并给出一个错误并且只允许读取。

顺便说一句，有人可以知道如何获得文件的直接链接。这种格式？： http: [//google.com/my_file.mp3](http://google.com/my_file.mp3)

# javascript - 如何使用 jQuery 离开悬停状态一段时间

> ID：14362233
> 
> 赞同：-1
> 
> 时间：2013-01-16T15:43:42.123
> 
> 标签：javascript, jquery, timeout, show-hide

我有这种情况：我的菜单里有一些隐藏的元素，在我悬停它之后，这些元素正在显示。一切都很好，我有一些超时等，但是当我离开悬停元素时，我的子菜单会隐藏到。我设置了这个超时，因为我不想在更改每个主菜单元素后隐藏这个子菜单，如果我在“超时区域”结束，我可以进入子菜单。当我将鼠标移出主菜单元素时出现问题，超时有效，但在此间隔之后我的子菜单隐藏。当我在“超时区域”时，如何让子菜单可见？我希望这是清楚的解释...

![在此处输入图像描述](../Images/231794c589ba42722424c9e52a9695aa.png)

和我的代码：

```
$('.main_menu ul li').hover(function() {
    var self = this;
    setTimeout(function() {
        $(self).children('.sub_menu_main').addClass('opened');
    }, 200);
}, function() {
    setTimeout(function() {
        $('.main_menu ul li').children('.sub_menu_main').removeClass('opened');
    }, 200);
}); 
```

或者，这适用于：

```
var main_menu_element = $('.main_menu ul li');
main_menu_element.on({
    mouseenter: function(){
        var self = this,
            time = 500;
        $(self).data('timer', setTimeout(function(){
            $(self).children('.sub_menu_main').addClass('opened');
        }, time));
    },
    mouseleave: function(){
        var self = this,
            time = 500;
        setTimeout(function() {
            $(self).children('.sub_menu_main').removeClass('opened');
        }, time);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:46:06.760

您可以为 setTimeout 函数设置一个变量，然后在用户将鼠标悬停在上面时清除超时。

```
var t1;
$('.main_menu ul li').hover(function() {
    clearTimeout(t1);
    var self = this;
    setTimeout(function() {
        $(self).children('.sub_menu_main').addClass('opened');
    }, 200);
}, function() {
    t1 = setTimeout(function() {
        $('.main_menu ul li').children('.sub_menu_main').removeClass('opened');
    }, 200);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:52:37.117

如果显示应用于`open`您的代码所做的类。毫不奇怪，您自己看看[http://jsfiddle.net/7GWKX/](http://jsfiddle.net/7GWKX/)。也许你的概念里有些东西搞砸了。

那是你想要的吗：http: [//jsfiddle.net/7GWKX/15/](http://jsfiddle.net/7GWKX/15/)

```
$('.main_menu ul li').hover(function (e) {
    var self = this,
        time = (e.type ==='mouseleave') ? 1000 : 200;
    var t = setTimeout(function () {
        hoverCallback(self);
    }, time);
});

function hoverCallback(parentNode) {
    $('.sub_menu_main',parentNode).toggleClass('opened');
}; 
```

# php - 贝宝沙盒 | 快速结帐允许信用卡付款

> ID：14362237
> 
> 赞同：0
> 
> 时间：2013-01-16T15:43:55.600
> 
> 标签：php, paypal

首先，我想提一下，我在 PayPal 方面还是个新手。

我为 WordPress 创建了一个插件，这对于预订出租车旅行很有用。该插件有自己的购物车，允许客户在购物车中添加多项服务，然后通过 PayPal 结账。

正如我之前提到的，我是 PayPal 新手，所以我已经下载了 PayPal 提供的 PHP SDK，并且我已经完成了付款流程的第一步。我获得了 Token，然后将我的客户重定向到 PayPal 网站以执行付款。

问题是，在 PayPal 网站中，我只有“拥有 PayPal 帐户？”选项。和“创建一个 PayPal 帐户”。我想问的是，如何使用信用卡付款而不是“创建 PayPal 帐户”？有什么办法吗？

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:10:21.987

您可能想尝试使用 Stripe。[http://www.stripe.com/](http://www.stripe.com/)超级简单，并且有优秀的文档。我已经将它与 Paypal 快速结帐一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T05:57:27.720

贝宝现在需要贝宝帐户才能在您使用快速结帐 api 时获得付款，从贝宝使用信用卡参考 api 或任何其他满足您需要的 api 从贝宝获得付款

# javascript - Chrome扩展程序：可以检测地址栏中的拖放吗？

> ID：14362242
> 
> 赞同：1
> 
> 时间：2013-01-16T15:44:04.373
> 
> 标签：javascript, google-chrome-extension, drag-and-drop

我想捕捉地址栏的拖动动作（并提供一个空间来放置链接）

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:19:52.033

这已经有效，只有您必须拖放图标，而不是文本。这会是一个可以接受的解决方案吗？您可以将其放入任何表单域。

# ms-word - Word 表单 - 在表单下方的文本中显示表单值

> ID：14362244
> 
> 赞同：0
> 
> 时间：2013-01-16T15:44:08.473
> 
> 标签：ms-word

如何显示 MS Word 表单中的值。

例如：

我有一个带有以下值的下拉列表的表单：

下拉1：a，b，c

当我选择值 a 时，我想以纯文本形式显示该值。例如：

所选字段的值为： a。

我宁愿不使用vb​​a。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:37:07.407

如果它是“遗留表单”（不是带有 ActiveX 控件或内容控件的表单，则

一个。将下拉列表的属性设置为在退出时计算，并将“书签”设置为（比如说）dropdown1。

湾。在文档中你想要值的地方放一个 { REF dropdown1 } 字段

C。以通常的方式保护表格。

仅当用户从下拉列表中跳出时才会显示该值。

它不完全是“纯文本”，但也不是表单域。如果您需要“真正的纯文本”，则需要代码。

如果它是一个内容控件，那么您需要设置一个自定义 XML 部件并将下拉列表链接到它，然后插入一个纯文本内容控件，该控件也链接到该部件中的相同元素/属性。这需要在设计时（或第三方加载项或 Word 2013）而不是在运行时编写代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:01:54.657

您可以使用（假设 DropDown1 是一个 ComboBox 控件）ComboBox 的 Change 例程。

```
Private Sub DropDown1_Change()
    Selection.TypeText DropDown1.Value
End Sub 
```

# ssl - 以编程方式为 Jetty 9 嵌入式配置 SSL

> ID：14362245
> 
> 赞同：24
> 
> 时间：2013-01-16T15:44:09.957
> 
> 标签：ssl, jetty

我正在使用码头版本 9.0.0.M4 并尝试将其配置为接受 SSL 连接。按照以下说明： http: [//www.eclipse.org/jetty/documentation/current/configuring-connectors.html](http://www.eclipse.org/jetty/documentation/current/configuring-connectors.html)

我设法写了一些有用的东西。但是，我编写的代码看起来很丑陋而且不必要地复杂。知道如何正确执行此操作吗？

```
final Server server = new Server(Config.Server.PORT);

SslContextFactory contextFactory = new SslContextFactory();
contextFactory.setKeyStorePath(Config.Location.KEYSTORE_LOCATION);
contextFactory.setKeyStorePassword("******");
SslConnectionFactory sslConnectionFactory = new SslConnectionFactory(contextFactory, org.eclipse.jetty.http.HttpVersion.HTTP_1_1.toString());

HttpConfiguration config = new HttpConfiguration();
config.setSecureScheme("https");
config.setSecurePort(Config.Server.SSL_PORT);
config.setOutputBufferSize(32786);
config.setRequestHeaderSize(8192);
config.setResponseHeaderSize(8192);
HttpConfiguration sslConfiguration = new HttpConfiguration(config);
sslConfiguration.addCustomizer(new SecureRequestCustomizer());
HttpConnectionFactory httpConnectionFactory = new HttpConnectionFactory(sslConfiguration);

ServerConnector connector = new ServerConnector(server, sslConnectionFactory, httpConnectionFactory);
connector.setPort(Config.Server.SSL_PORT);
server.addConnector(connector);

server.start();
server.join(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T21:55:46.900

[`ServerConnector`](http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/server/ServerConnector.html)应该使用[`SslContextFactory`](http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/util/ssl/SslContextFactory.html).

[您在HttpConfiguration](http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/server/HttpConfiguration.html)中所做的其余工作与设置 SSL 无关。

[在嵌入式码头示例](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/examples/embedded/src/main/java/org/eclipse/jetty/embedded/)项目 中维护了在嵌入式模式下设置 SSL 的一个很好的示例。[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/examples/embedded/src/main/java/org/eclipse/jetty/embedded/LikeJettyXml.java](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/examples/embedded/src/main/java/org/eclipse/jetty/embedded/LikeJettyXml.java)

*编辑：更清楚（感谢埃里克）*

**更新：2016 年 6 月**

Eclipse Jetty 项目已将其规范存储库移至 github。

`LikeJettyXml.java`现在可以在上面找到

[https://github.com/eclipse/jetty.project/blob/jetty-9.4.x/examples/embedded/src/main/java/org/eclipse/jetty/embedded/LikeJettyXml.java](https://github.com/eclipse/jetty.project/blob/jetty-9.4.x/examples/embedded/src/main/java/org/eclipse/jetty/embedded/LikeJettyXml.java)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-15T13:47:05.360

对于 Jetty 9，这里有一个很好的参考[，](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/examples/embedded/src/main/java/org/eclipse/jetty/embedded/ManyConnectors.java)您需要做的就是按照[这里](http://www.eclipse.org/jetty/documentation/current/configuring-ssl.html)的说明创建 JKS 密钥库文件。使用命令`keytool -genkey -alias sitename -keyalg RSA -keystore keystore.jks -keysize 2048`。出于某种原因，适用于 jetty 8 的功能不适用于 9。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-26T16:59:51.550

对于那些无法使用以上配置的人：如果您使用的是 java 1.7，请确保您有最新的更新。jvm 1.7 的第一个版本导致访问 https 网页出现问题（浏览器可能会显示：连接重置、连接中止或未收到数据错误）。

# json - 在杰克逊的 json 序列化过程中，如何向对象添加额外的字段？

> ID：14362247
> 
> 赞同：20
> 
> 时间：2013-01-16T15:44:11.053
> 
> 标签：json, serialization, jackson

在序列化为 JSON 时，我需要向对象添加新属性。该属性的值是在运行时计算的，并且不存在于对象中。同样的对象也可以用于创建具有不同集合的字段的不同 JSON（有点具有带有子类的基类，但我不想创建仅用于 JSON 生成的对象）。

这样做的最佳方法是什么，它不涉及创建自定义序列化程序类，它将负责序列化整组对象的字段？或者可能继承一些“基本”序列化程序，并简单地获取它的输出并以某种方式添加新字段？

我了解了[mixins](http://wiki.fasterxml.com/JacksonMixInAnnotations)，看起来可以重命名/隐藏某些字段，但似乎无法添加额外的字段。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-16T21:21:21.893

你不能只在值类中添加一个方法吗？请注意，它不必是公开的，也不必使用 getter 命名约定；您可以执行以下操作：

```
public class MyStuff {
   // ... the usual fields, getters and/or setters

   @JsonProperty("sum") // or whatever name you need in JSON
   private int calculateSumForJSON() {
        return 42; // calculate somehow
   }
} 
```

否则，您可以将 POJO 转换为 JSON Tree 值：

```
JsonNode tree = mapper.valueToTree(value); 
```

然后通过添加属性等来修改它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T01:02:34.343

一种选择是为此属性添加一个字段并将其设置在对象上，然后再写入 JSON。第二种选择，如果可以从其他对象属性计算属性，则可以为其添加一个 getter，例如：

```
public String getFullName() {
  return getFirstName() + " " + getLastName();
} 
```

即使没有匹配的字段，Jackson 也会在编写 JSON 时自动调用这个 getter，它会`fullName`在 JSON 输出中出现。如果这不起作用，第三种选择是将对象转换为地图，然后根据需要对其进行操作：

```
ObjectMapper mapper //.....
MyObject o //.....
long specialValue //.....
Map<String, Object> map = mapper.convertValue(o, new TypeReference<Map<String, Object>>() { });
map.put("specialValue", specialValue); 
```

你的问题没有提到解组，但如果你也需要这样做，那么第一个选项可以正常工作，但后两个需要一些调整。

至于为同一个对象编写不同的字段，这听起来像是一项工作[`@JsonView`](http://wiki.fasterxml.com/JacksonJsonViews)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-11T20:11:43.960

2021年召唤...

我发现这样做的最简单方法是[`@JsonUnwrapped`](https://github.com/FasterXML/jackson-annotations/blob/master/src/main/java/com/fasterxml/jackson/annotation/JsonUnwrapped.java)：

```
public class Envelope<T> {
  @JsonUnwrapped // content's fields are promoted alongside the envelope's
  public T content;
  // Transmission specific fields
  public String url;
  public long timestamp;
} 
```

只要`Envelope's`字段名不与`content`. 还有一个很好的特性是在序列化 JSON 的末尾保留传输属性。

# ssh - 如何在新的 Linux 安装中使用文件 id_rsa.pub 中的旧密钥？

> ID：14362250
> 
> 赞同：1
> 
> 时间：2013-01-16T15:44:20.257
> 
> 标签：ssh, ssh-keys

我在文件中有旧密钥`~/.ssh/id_rsa.pub`。我必须格式化计算机，如何恢复此密钥以再次访问服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:59:27.093

我想您的意思是“文件中的旧密钥`id_rsa.pub`”是您的客户端（“计算机”），并且您在格式化客户端时丢失了它。这个公钥应该已经保存在您的服务器上。为了能够对您的服务器进行身份验证，您需要匹配的*私钥*( `~/.ssh/id_rsa`)。如果有，只需将其复制回新系统上的该位置即可。

如果您在格式化过程中丢失了它并且没有备份，那么重新获得访问权限的唯一方法是生成一个新的对 ( `ssh-keygen`) 并将公钥复制到您的服务器（例如 via `ssh-copy-id`），同时通过密码进行身份验证，如果您没有禁用它。在这种情况下，我还建议从服务器中删除旧的公钥。

# javascript - 在文本区域内显示段落值

> ID：14362251
> 
> 赞同：0
> 
> 时间：2013-01-16T15:44:25.183
> 
> 标签：javascript

您好，我有以下代码：http: [//jsfiddle.net/yw7Zk/](http://jsfiddle.net/yw7Zk/)

```
var makeAreaEditable = function(event){
    var btn = event.target,
        li  = btn.parentNode,
        p   = li.getElementsByClassName('paratext')[0];

    p.style.display="none";
    btn.innerText="Ok";
    btn.onclick = saveEdit;
    var textareaEdit = document.createElement('textarea');
    textareaEdit.className = 'testarea';
    li.appendChild(textareaEdit);
    textareaEdit.appendChild(p);
    textareaEdit.style.display="block";
}; 
```

问题是我想要 paragraf display: none 当我按下按钮编辑但我希望它显示在 textarea 中.. 所以请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:49:24.517

尝试改变：

```
textareaEdit.appendChild(p); 
```

进入：

```
textareaEdit.value = p.innerHTML; 
```

# wordpress - 如何在魔域插件中获取相关类型的帖子 ID

> ID：14362253
> 
> 赞同：1
> 
> 时间：2013-01-16T15:44:25.943
> 
> 标签：wordpress

我正在为我的项目使用魔术字段插件并创建了两个相关的类型字段，我想获得选定的帖子/页面 ID。请帮助我，我被困在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T12:05:32.080

在循环内你可以说：

```
<?php echo get('field_name') ?> 
```

将 field_name 替换为您的字段名称。这应该打印它的内容。

# 64-bit - 编写驱动程序

> ID：14362257
> 
> 赞同：0
> 
> 时间：2013-01-16T15:44:32.673
> 
> 标签：64-bit, driver, code-signing, code-signing-certificate

我有一个程序和安装程序，可以在用户系统上安装驱动程序以供程序使用。但是，它不适用于 64 位系统。

据我了解，我需要签署驱动程序才能安装它。我有一个代码签名证书。

我如何用它签署驱动程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:48:49.337

您需要进行交叉签名[http://msdn.microsoft.com/en-us/library/windows/hardware/gg487315.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487315.aspx)

这和签字是一样的。不要让人们告诉您它必须是 Verisign 或其他。它没有。但它必须是 Microsoft 列表中的证书（请参阅链接）。

# vba - 如何锁定剪贴板或避免在 MS Excel 中使用它？

> ID：14362260
> 
> 赞同：2
> 
> 时间：2013-01-16T15:44:38.937
> 
> 标签：vba, excel, clipboard

我正在 Excel 下编写一个程序，该程序通过将一些数据从一个工作表复制/粘贴到另一个工作表来生成大量电子表格（例如：使用带有一些页眉/页脚单元格的“布局”工作表，这些单元格将被复制/粘贴到生成的工作表）。

我的问题是，有时（不是每次），在运行我的“生成过程”时，Excel 会生成此错误（抱歉，这是我的法语 Excel 错误的英文翻译）：

> 错误 1004：“_Worksheet”对象的“粘贴”方法失败

所以我假设剪贴板有问题（我电脑上的其他软件可能同时使用了剪贴板：/）

我首先尝试找到一种方法来复制/粘贴我的单元格（和其他东西）而不使用剪贴板，代码如下：

```
ThisWorkbook.Sheets("Layout").Range("A1").Copy Destination:=ThisWorkbook.Sheets("Test").Range("A1") 
```

或者那个

```
ThisWorkbook.Sheets("Test").Range("A1") = ThisWorkbook.Sheets("Layout").Range("A1") 
```

但似乎我们只能复制文本或公式，而不是所有的东西（边框，颜色，......），也不能复制图表对象（我有）！

所以我试图找到一种在复制/粘贴过程中锁定/解锁剪贴板的方法。我发现这段代码可以做到这一点：

```
Declare Function OpenClipboard Lib "user32" (ByVal hwnd As Long) As Long
Declare Function CloseClipboard Lib "user32" () As Long
Declare Function EmptyClipboard Lib "user32" () As Long

Public Sub Lockk()
    If OpenClipboard(0) = 0 Then
        MsgBox "cannot open clipboard."
    ElseIf EmptyClipboard() = 0 Then
        MsgBox "cannot clear clipboard."
    End If
End Sub

Public Sub Unlockk()
    CloseClipboard
End Sub 
```

复制单元格时似乎工作：我可以将剪贴板锁定在excel下，转到另一个软件（例如记事本），并且无法将某些数据复制粘贴到该软件中；返回 excel，我可以复制/粘贴数据（手动或使用宏）。

**但：**

*   似乎粘贴单元格会解锁剪贴板（我可以锁定，转到记事本，记事本无法访问剪贴板，返回excel，复制/粘贴单元格，返回记事本，然后记事本可以访问剪贴板；而且我还没有明确解锁剪贴板）。这对我来说真的不是问题。

*   锁定剪贴板后，我们无法复制/粘贴图表对象（手动或使用宏）。使用宏，我得到与以前完全相同的错误）。

那么，有人知道如何锁定/解锁剪贴板以复制图表对象吗？或者在不使用剪贴板的情况下复制它们？

编辑：

用于复制/粘贴图形对象的代码：

```
Utils_Clipboard.Lockk
ThisWorkbook.Sheets("Layout").ChartObjects("CHART_TEMPLATE").Copy
DoEvents
worksheet_p.Paste Destination:=where_p
Utils_Clipboard.Unlockk 
```

其中 worksheet_p 是 Worksheet 对象，而 where_p 是范围。请注意，没有第一行和最后一行（锁定剪贴板），它工作正常（除了一些时间）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:21:57.397

好的，我找到了解决方案（也许不是最好的？）

我可以使用我的 Utils_Clipboard.Lockk 和 Utils_Clipboard.Unlockk 来确保剪贴板在复制（复制/粘贴）单元格、合并单元格时不会被其他软件使用，...

但似乎，当剪贴板被锁定时，我们无法复制/粘贴图表对象（手动按 ctrl+c 和 ctrl+v 键；或者在 vba 中使用对象的复制和粘贴方法自动）。

我对图表对象的解决方案是使用功能 Duplicate (http://msdn.microsoft.com/en-us/library/office/ff840956.aspx) 和 Move (http://msdn.microsoft.com/en-us /library/office/ff840583.aspx) 像这样（其中 worksheet_p 是我要放置图表对象的工作表）：

```
Utils_Clipboard.Lockk
Dim newchart_l As Shape
Set newchart_l = ThisWorkbook.Sheets("Layout").ChartObjects("CHART_TEMPLATE").Duplicate
newchart_l.Chart.Location xlLocationAsObject, worksheet_p.Name
Utils_Clipboard.Unlockk 
```

请注意，复制的对象是 Shape 而不是 ChartObject（如果我们键入 ChartObject，执行代码时会出错）。

好吧，它正在工作（我认为这里不需要锁定剪贴板），但图表对象不在我想要的位置（在 worksheet_p 上正确的顶部/左侧坐标处）。为此，我发现我们必须移动 ChartArea（复制对象的父对象），但我们不能直接操作“newchart_l”（似乎 Excel 在调用 Duplicate 后不会更新其所有内部变量， 为什么？？？）。所以我的解决方案是首先检索新的重复图表对象，用这个：

```
Dim ChartObject_m As Chart
Set ChartObject_m = worksheet_p.ChartObjects(worksheet_p.ChartObjects.Count).Chart 
```

然后移动该对象的图表区域（其中'where_p'是我要放置我的字符对象的范围/单元格）：

```
ChartObject_m.ChartArea.Left = where_p.Left
ChartObject_m.ChartArea.Top = where_p.Top 
```

瞧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-25T10:04:18.693

受您的解决方案的启发，我想分享一段改进的代码。改进之处在于，它不依赖于“ChartObjects-Collection 中的图表顺序反映插入顺序”之类的假设：

```
Private Function copyGraph(source As ChartObject, pos As Range) As ChartObject
    ' Copies a given graph to the given position and returns the resulting 
    ' ChartObject. The destination position is expected to be a cell in the desired 
    ' target worksheet. The resulting ChartObject will be aligned to the Top/Left-
    ' Border of the given cell. 

    Dim dup As Object
    Dim dstChart As Chart

    ' First just duplicate the graph. This operation leaves it on the original 
    ' worksheet.
    Set dup = source.Duplicate

    ' In case the duplication failed, ... 
    If (Not dup.HasChart) Then
        ' ... we remove the duplicated object and leave the copy function.
        ' This yields a Nothing-reference as return value to signal the error
        ' to the caller.
        dup.Delete
        set copyGraph = Nothing
        Exit Function
    End If

    ' Then we move the graph to the target worksheet passed as parameter. This
    ' gives us the new link to the moved chart.
    '
    ' Excel displays some weired behavior when using the reference returned by ChartObject.Duplicate.
    ' Namely it yields sporadic 1004 runtime errors without further specification. However it seems,
    ' that activating the chart and calling location for ActiveChart gets around this problem.
    '
    ' Therefor the original code:
    ' Set dstChart = dup.Chart.Location(xlLocationAsObject, pos.Parent.Name)
    ' has been replaced with the following
    dup.Chart.parent.Activate
    Set dstChart = ActiveChart.Location(xlLocationAsObject, pos.Parent.Name)

    ' As we relocated the chart as an object, the parent of the chart object is
    ' an instance of ChartObject. Hence we use it as the return value.
    Set copyGraph = dstChart.parent

    ' Finally we move the graph to the requested position passed by the pos 
    ' parameter.
    With copyGraph
        .Top = pos.Top
        .Left = pos.Left
    End With
End Function 
```

我希望这可以帮助其他用户在这个问题上寻找一个简单的解决方案。

# magento - Magento 缓存变暖

> ID：14362263
> 
> 赞同：3
> 
> 时间：2013-01-16T15:44:43.383
> 
> 标签：magento, caching

我和我的团队正在快速推出 Magento Enterprise Edition 上的新商店和视图，但我们遇到了缓存问题。需要明确的是，缓存部分本身效果很好。我们有几个复杂的产品需要大约 17 秒的时间来构建，但是在缓存后页面加载时间为 300 毫秒，这太棒了！不幸的是，如果我们在任何严重负载（高流量）下清除缓存，我们似乎正在经历缓存未命中风暴，每个页面请求都试图填充缓存，导致我们的 webhead 在平均负载超过 50 时停止。

你有什么避免这种情况的建议吗？是否有记录为新代码部署甚至只是内容和配置更改预热缓存的最佳实践？

这可能是相关的，所以我将其包括在内：单击按钮刷新缓存后，在刷新过程完成之前，前端的大多数页面都会出现 500 个错误代码和看似随机的错误消息。知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-13T15:52:55.880

我实现了一个在保存 CMS 块后预热缓存的解决方案。您可以从这个解决方案中汲取灵感，针对不同的情况（产品保存、CMS 块、CMS 页面、类别保存等）执行相同的操作

这段代码可以在 CMS 块保存后使用观察者触发`cms_block_save_after`：

```
/**
 * Clean targeted cache block and warmup if content is provided
 */
public function clearBlockHtmlCache(Varien_Event_Observer $observer)
{

    $block = $observer->getEvent()->getObject();

    $id = $block->getCacheKey();

    // Remove only specific cache block
    Mage::app()->getCacheInstance()->getFrontend()->remove(strtoupper($id));

    // no print, it's ok just warmup cache with filters processing
    $block->toHtml();
} 
```

# asp.net - ASP.NET 中的 CDI 类事件

> ID：14362266
> 
> 赞同：0
> 
> 时间：2013-01-16T15:44:46.933
> 
> 标签：asp.net, events, cdi

我主要是一名 JEE6 开发人员。我确实想知道是否有一种方法可以在 asp.net 中实现 Fire 并忘记 CDI 事件的功能。并且事件观察者会收到一个特定的数据有效负载来响应事件

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:14:50.837

当然，您必须有一个始终可用的注册对象，以便您的听众可以注册他们的兴趣。然后同一个对象将有一个 fire 方法，或者一个事件对象将调用该 fire 方法，然后您只需遍历侦听器并调用它们的方法。使用接口保持简单。

# magento - Magento 1.7 附加复杂数据

> ID：14362270
> 
> 赞同：0
> 
> 时间：2013-01-16T15:45:00.100
> 
> 标签：magento

我正在尝试将类别 ID 附加到 Magento 1.7 中的大量 SKU。我使用了 Import > Append Complex Data，虽然它检查了文件并运行正常，但它没有将这些 SKU 添加到我想要它们的类别中。

因此，目标是将所有这些 SKU 保留在现有的类别中，但添加一个额外的类别。

任何帮助，将不胜感激。即使它完全是一种不同的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:43:48.410

最快的方法是直接将其作为 SQL 查询插入，使用：

```
INSERT INTO `catalog_category_product` (
`category_id` ,
`product_id` ,
`position`
)
VALUES (
'4', '34', '0'
), (
'4', '35', '0'
); 
```

在这种情况下，它会将类别 ID 4 添加到 ID 为 34 和 35 的产品中。您可以创建一个小的 PHP 脚本，从您的 SKU 和类别 ID 文件中动态创建此类查询。成功执行查询后重新索引。

或者，使用 Magento 生态系统而不是数据库，您可以这样做：

```
$categoryIds = array();
$toBeUpdatedProducts = array(4,6,7); // all the Ids you want to update
$newCategoryId = 65; // Id of new category
foreach ($toBeUpdatedProducts as $productId) {
    $product = Mage::getModel('catalog/product')->load($productId);
    $categoryIds = $product->getCategoryIds();
    $categoryIds[] = $newCategoryId; // Add new category to existing ones
    $product->setCategoryIds($categoryIds);
    $product->save();
} 
```

# google-maps - 将 Google 地方信息保存到移动设备上的“我的地图”

> ID：14362275
> 
> 赞同：1
> 
> 时间：2013-01-16T15:45:21.240
> 
> 标签：google-maps, google-places-api

本质上，我想从移动网页将地点保存到“我的地图”中。

*   用户访问移动网站
*   用户搜索 Google 地方
*   用户返回匹配
*   用户将相关匹配保存到“我的地图”

这是桌面的标准功能，但是，这在 Google Maps iOS 应用程序或移动 Google Maps 网站上看不到（而且我知道没有 Google My Places API），这让我相信这在移动设备上是不可能的。是这样吗？

# paypal - PayPal Express Chekout 不通过信用卡/借记卡选项付款

> ID：14362279
> 
> 赞同：8
> 
> 时间：2013-01-16T15:45:35.493
> 
> 标签：paypal

我有一个使用 PayPal Express Checkout 作为付款方式的网站。

它工作了 2 年没有问题，但昨天我注意到付款选项在向用户提供 2 个付款选项之前发生了变化

1.  登录并使用 PayPal 帐户付款。
2.  没有通过信用卡/借记卡支付的 PayPal 账户。

但现在第二个选项被替换为创建一个 PayPal 帐户。如果没有 PayPal 帐户，则无法付款。

我没有改变任何东西。

任何人都知道为什么信用卡/借记卡付款消失了。

![前](../Images/c0fd30c8db227a23456239d1a375dda4.png)

![现在](../Images/63c189ed1e1b38bc4b559e13c953b102.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:44:14.387

首先确保在您的 Paypal/Sandbox 帐户中 PayPal 帐户具有可选功能：打开 转到 --> PayPal 帐户的个人资料 -> 更多选项 -> 我的销售工具 -> 网站首选项屏幕。

然后在发出 setExpressCheckout 请求时将 SolutionTypeType 设置为 Sole，这将启用使用借记卡或信用卡付款的选项。你完成了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T05:41:26.800

我所知道的是，当您使用快速结帐 API 在贝宝上使用信用卡付款时，它还会为该用户创建一个帐户，并让用户处理不同的事情，例如将银行帐户与贝宝或信用卡付款相关联。

根据他们的新视图，这是贝宝快速结账的默认行为

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-09-02T01:53:53.960

PayPal 根据所选国家/地区显示不同的快速结帐选项（如果没有国家/地区传递到页面，它将检测您的 IP 地址并设置国家/地区）。例如，印度尼西亚（等）强制您创建一个 Paypal 帐户，而美国（等）则不这样做（并提供其他选项）。

# c# - CDate 有什么奇怪的行为？

> ID：14362282
> 
> 赞同：0
> 
> 时间：2013-01-16T15:45:51.373
> 
> 标签：c#, sql, database, ms-access, date-conversion

我发现该`CDate`函数在以下代码中有一个奇怪的行为：

```
private void button1_Click(object sender, EventArgs e)
        {
            OleDbConnection connection = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;User ID=Admin;Data Source=" + Application.StartupPath + @"\db.mdb" + ";Persist Security Info=False");
            {
                OleDbDataAdapter adapterA = new OleDbDataAdapter("SELECT CDate(#01/05/2013#) AS TheDate", connection);
                DataTable dataTableA = new DataTable();
                adapterA.Fill(dataTableA);
                DateTime dateTimeA = (DateTime)dataTableA.Rows[0]["TheDate"]; // get 1
                MessageBox.Show(dateTimeA.Month.ToString());
            } //these to ensure that I did not use the variables in the next block /^-^\ .

            {
                OleDbDataAdapter adapterB = new OleDbDataAdapter("SELECT CDate(#13/05/2013#) AS TheDate", connection);
                DataTable dataTableB = new DataTable();
                adapterB.Fill(dataTableB);
                DateTime dateTimeB = (DateTime)dataTableB.Rows[0]["TheDate"]; // get 5
                MessageBox.Show(dateTimeB.Month.ToString());
            }

        } 
```

我知道如果该值大于 12，该`CDate`函数会将其视为日期的“日”部分，而另一部分将被视为日期的“月”部分。

源代码可以从（[链接](http://www.c-sharpcorner.com/Forums/UploadFile/houssam11350/01162013102544AM/cdateproblem.rar)）下载。

这是什么规则？

为什么微软没有在 MSDN 中解释这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:18:02.953

是的你是对的。CDate 尝试将大于 12 的月份值视为天值。

你可以试试这个。

```
private bool IsDate(String inputDate)
{
  DateTime dt;

  Return DateTime.TryParse(inputDate,out dt);

} 
```

# javascript - Eclipse 代码格式化

> ID：14362283
> 
> 赞同：2
> 
> 时间：2013-01-16T15:45:53.187
> 
> 标签：javascript, eclipse, twig

我有一些混合了 JavaScript、HTML 和 twig 标记的 twig 文件。Eclipse 有没有办法对一段代码进行高精简并将其格式化为 JavaScript，然后将另一段高精简并将其格式化为 HTML？我尝试将文件类型 *.twig 与 JavaScript 编辑器关联，但是，我似乎没有得到任何格式。语法高亮和代码完成也会很好。

谢谢，斯科特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T16:03:10.550

有可能的。如果您有可用的 HTML/JS 编辑器（eclipse 经典默认有它们）。

1.  转到首选项，然后：常规 > 编辑器 > 文件关联并添加`*.twig`为新文件类型，然后将 HTML 编辑器（在底部面板中）添加到它。
2.  然后转到：General > Content Types，单击 Text/HTML 节点（在 Content Types 框中）并`*.twig`在底部面板中添加文件关联。

我已经检查过了，它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:48:14.250

您可以尝试找到一个支持 twig 文件并提供语法高亮的插件。[Twig Eclipse 插件](http://twig.dubture.com/)看起来很有前途，因为它至少似乎同时支持 HTML 和 twig 标记。

# sitecore - Sitecore如何通过上次更新用户名值选择项目

> ID：14362286
> 
> 赞同：1
> 
> 时间：2013-01-16T15:46:03.530
> 
> 标签：sitecore, sitecore6

您好，我需要在内容树中选择项目，但条件是项目统计部分，提交“更新者”

```
fast:/sitecore/content//*[@__username = 'sitecore\user'] 
```

我需要使用什么@变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:50:39.113

快速：/sitecore/content//*[@__updated by = 'sitecore\user']

# node.js - 尝试为 arm 交叉编译 node.js 时出现错误的 -rpath 选项

> ID：14362290
> 
> 赞同：2
> 
> 时间：2013-01-16T15:46:09.737
> 
> 标签：node.js, arm, cross-compiling

[我正在尝试按照此说明http://www.wigwag.com/devblog/cross-compile-node-js-for-arm/#comment-1419](http://www.wigwag.com/devblog/cross-compile-node-js-for-arm/#comment-1419)并在一段时间后为 arm 处理器交叉编译 node.js我在 ld 上得到一个“错误的 -rpath 选项”。有谁知道我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T21:10:24.947

我实际上写了那篇文章......在尝试解决同样的问题时遇到了这个问题。

显然，在我们现在使用的 CodeSourcery 二进制文件（gcc-4.4.4-glibc-2.11.1-multilib-1.0 通过飞思卡尔的工具）中，ld 命令不再喜欢 rpath 开关——就像你的问题一样。在任何情况下，您都可以按照本论坛中的建议切换到 g++ 来解决此问题： [https ://groups.google.com/forum/?fromgroups=#!topic/nodejs/uzHnSBhEp6g](https://groups.google.com/forum/?fromgroups=#!topic/nodejs/uzHnSBhEp6g)

以下是一个工作解决方案的要点：
[https ://gist.github.com/edhemphill/5094239](https://gist.github.com/edhemphill/5094239)

所以做这个改变：

```
export LD="${PREFIX_BIN}-g++" 
```

进一步说明：

那里的时髦`-Wl,-rpath-link,${X}`语法是将开关传递`-rpath-link X`给链接器。这是必需的，以便您的节点二进制文件的共享库在您的 ARM 平台上运行时可以找到*它们的共享库。*幸运的是，大多数共享库的混乱都不是问题，因为节点链接如此之多是静态的。

[http://ftp.gnu.org/old-gnu/Manuals/ld-2.9.1/html_node/ld_3.html](http://ftp.gnu.org/old-gnu/Manuals/ld-2.9.1/html_node/ld_3.html)

# jquery - 幻灯片中的 jQuery 叠加图像

> ID：14362291
> 
> 赞同：0
> 
> 时间：2013-01-16T15:46:27.097
> 
> 标签：jquery, image, overlay, slideshow, clickable

我只是想实现一个幻灯片，就像你在[http://www.caffeuno.co.uk/上找到的那样](http://www.caffeuno.co.uk/)

我已经有一个幻灯片，但我需要的是这个网站上显示的功能：

图1，稍等一下，淡入文字，淡入可点击按钮，最多等待3秒，翻转图片2，稍等一下，淡入文字，淡入可点击按钮，最多等待3秒秒，翻转图片 3，依此类推。

任何人都可以协助复制这个吗？会很好。感谢您花费时间和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:02:26.027

jQuery 的 .animate() 函数可以让您轻松地为图片和文本淡入淡出设置动画。

```
$('#image').animate({
    opacity: 1
}, 5000, function() {
    //Done fading, wait 3 seconds and display the next image
    setInterval(displayNextImage,3000);
}); 
```

有关详细信息，请参阅[http://api.jquery.com/animate/](http://api.jquery.com/animate/)。

您可能需要更改包含图像和文本的 div 的 z-index，以便在使用上述函数将不透明度设置为 1 之前，隐藏的（不透明度 0）大于当前图像。

我希望这有帮助！

# deployment - 在 deploy.rb 中创建符号链接的正确方法

> ID：14362292
> 
> 赞同：0
> 
> 时间：2013-01-16T15:46:30.910
> 
> 标签：deployment, capistrano, symlink

部署应用程序时出现错误：

```
 [neon.locum.ru] executing command
*** [err :: neon.locum.ru] find: `/home/hosting_grandinvest/projects/demo/releases/20130116145843/public/images /home/hosting_grandinvest/projects/demo/releases/20130116145843/public/stylesheets /home/hosting_grandinvest/projects/demo/releases/20130116145843/public/javascripts': Нет такого файла или каталога
    command finished in 91ms
    triggering after callbacks for `deploy:update_code'
  * 2013-01-16 16:58:45 executing `make_images_link'
  * executing "ln -s /home/hosting_grandinvest/projects/demo/shared/public/images /home/hosting_grandinvest/projects/demo/releases/20130116145843/public/images" 
```

如您所见，这是因为它首先尝试查找 /public/images 目录。然后才为该目录创建一个符号链接。我的 deploy.rb 的开始

```
require 'bundler/capistrano'
after "deploy:update_code", :make_images_link
task :make_images_link, roles => :app do
  images_dir = "#{shared_path}/public/images"
  run "ln -s #{images_dir} #{release_path}/public/images"
end 
```

部署完成

```
Gem.source_index called from /home/hosting_grandinvest/projects/demo/shared/gems/ruby/1.8/gems/rails-2.3.15/lib/rails/gem_dependency.rb:21.
master process ready
worker=0 ready
reaped #<Process::Status: pid=18656,exited(0)> worker=0
master complete 
```

在 public/images 目录中，有一些 css ( `background: url(/images/front/logo.gif) no-repeat 0 0;`) 使用的文件，它们没有显示出来！但是当我尝试直接访问这些文件时 ( `http://hosting.net/images/front/logo.gif`)，我可以看到它们！

有关如何解决此错误并使 capistrano 工作的任何建议？

**更新 1**
我已将 public/images/front 包含在 repo 中，并在代码部署后用链接交换空文件夹

```
after "deploy:update_code", :make_images_link
task :make_images_link, roles => :app do
  images_dir = "#{shared_path}/public/images"
  realease_images = "#{release_path}/public/images"
  run "rm -rf #{realease_images}"
  run "ln -s #{images_dir} #{realease_images}"
end 
```

当我部署错误仍然存​​在，但图像出现了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:32:14.337

最后，我在我的存储库中包含了“public”images 目录。
作为第 2 步，我运行我在更新 1 中指定的回调。

# jquery - 内联样式无处不在

> ID：14362297
> 
> 赞同：0
> 
> 时间：2013-01-16T15:46:52.400
> 
> 标签：jquery, if-statement, resize

**版本 1\. 编辑版本如下**

这是我最初拥有的一个**非常**基本的表示，我似乎无法得到比这更短的，所以我很抱歉代码负载。我评论了问题可能出在哪里。

扩展小提琴：http: [//jsfiddle.net/BramVanroy/tKL8E/53/](http://jsfiddle.net/BramVanroy/tKL8E/53/)

如您所见，有一个可以悬停的菜单。在普通视图（水平菜单）中，将出现代表链接标题的工具提示（基本上，修改后的工具提示）。当您将窗口大小调整为 < 800 时，菜单应变为垂直（媒体查询）。问题是，在 if 函数中调用的函数仍然有效。修改后的工具提示不断出现并具有动画效果（而不是标准工具提示），并且箭头仍在定位。

```
function triangleMenu() {
  var wW = $(window).width();
  if (wW > 800) {
    // Get rid of [title]'s and put them in data unless it has sub-items
    $("li:not(.has-sub-menu) > a[title]").each(function () {
      var $this = $(this);
      $this.data("title", $this.attr("title"));
      $this.removeAttr("title");
    });

    // tooltip positioning on hover and overlay fade on all li's
    $("nav li").hover(function () {
      // Bunch of vars

      if (
      ($this.parent("ul:not(.sub-menu)").length || ($this.parent("ul.sub-menu").length && $this.is(":last-child"))) && !$this.hasClass("has-sub-menu")) {

        tooltip.stop(true).css("right", "auto").text(title).animate({
          "left": posL - (tooltip.width() / 2),
            "top": posT + $this.offset().top + 20
        }, 300).fadeTo(200, 1);
      } else if (!$this.is(":last-child") && $this.parent("ul.sub-menu").length) {
        var condition = offL > ((wW / 2) - $this.width()),
          properties = {},
          cssProp = {};

        tooltip.stop(true).text(title);
        if (condition) {
          properties = {
            "left": (offL - tooltip.width() - 30)
          };
        } else {
          properties = {
            "left": (offL + $this.width() + 25)
          };
        }
        $.extend(properties, {
          "top": ($this.offset().top + (posT / 2) - (tooltip.height() / 2))
        });

        tooltip.animate(properties, 300).fadeTo(200, 1); // SO TOOLTIP ANIMATES, BUT ONLY WHEN WINDOW WIDTH EXCEEDS 800
      }
    },function () {
    });
  } else { // IF WINDOW IS TIGHTER THAN 800 PX
    // Put data back
    $("li:not(.has-sub-menu) > a").each(function () {
      var $this = $(this),
        title = $this.data("title");

      $this.attr("title", title);
    });
  }
}

triangleMenu();

$(window).resize(function () {
  triangleMenu();
}); 
```

再一次，我很抱歉这个例子的广泛性，但是在不丢失不起作用的功能的情况下进一步减少它是完全不可能的。

* * *

**新：版本 2**

在一些帮助和大量测试和含糖饮料的帮助下，我的“主菜单”开始工作了。调整大小的（移动/响应）菜单虽然不起作用。

[新小提琴](http://jsfiddle.net/tKL8E/59/)

当调整到较小的菜单时（您可能需要调整两次，更小，更大，更小），您应该能够通过单击打开具有子菜单的项目，但这不起作用。单击 li 时，子项会得到一堆内联样式，但我不知道它们来自哪里！

```
overflow: hidden; display: none; height: 159px; padding-top: 0px; margin-top: -2px; padding-bottom: 0px; margin-bottom: 0px; 
```

我认为他们阻止了菜单显示，但我似乎无法找到他们的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:06:57.650

我不是这方面的专家，但我找到了解决您问题的方法。经过大量测试后，我发现，在某种 if 状态下触发的部分函数仍然处于绑定状态。我发现是因为：

1.  `$(window).resize()`正在触发该功能；
2.  初始窗口大小按预期工作；
3.  但是在调整大小后，该功能似乎仍然存在。

我得出的结论是存在一个约束性问题，我尝试了这个并且它起作用了：在 else 语句中，我添加了这个第一行`$("nav li").unbind('hover');`。这摆脱了仍然绑定到元素的悬停功能。

但后来我意识到箭头也在持续。为了解决这个问题，我不得不添加两行代码。首先，我在 else 语句中添加了： `$("ul:not(.sub-menu) > li, ul.sub-menu > li:last-child").removeClass("over-down");`.

但这还不够，我还移入`$("ul:not(.sub-menu) > li, ul.sub-menu > li:last-child").not(":has(ul.sub-menu)").addClass("over-down");`了`$("nav li").hover()`函数，将其转换为更简单的：

`$(this).addClass("over-down");`.

我不知道这是否是最优雅的解决方案，但它似乎有效。我希望专家能更好地解释这一点。

您可能会发现更多错误，但我认为这将帮助您解决此功能的其他问题。也许改变一些逻辑和步骤会做一个更健壮的代码。

PS：在 Chrome 中调整窗口大小时，菜单高度仍然存在一些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:47:51.407

基于您的**新：版本 2**

您缺少的重要内容是，`$("nav li.has-sub-menu")`在调整大小时绑定了太多相同的单击功能。

`console.log(1)`我在点击处理程序中添加一个，如下所示：

```
 $("nav li.has-sub-menu").click(function () {                                                                               
        var $this = $(this);
        console.log(1);
        $this.children("ul.sub-menu").stop(true).slideToggle("fast");
    }); 
```

它会打印很多`1`，我认为你不例外。

而且更重要的是，来电次数`console.log(1);`总是偶数，真不知道为什么。但这意味着您的子菜单一次又一次地显示/隐藏，然后最终隐藏。）

所以我在绑定之前取消绑定所有点击功能，通过添加以下代码。有用。看[**这里**](http://jsfiddle.net/tKL8E/60/)

```
$("nav li.has-sub-menu").unbind("click"); 
```

然后我想说的另一点，在function中`triangleMenu`，所有代码都会在调整大小时执行多次。

所以我想我们可以在这里添加一个布尔变量来保存它是 now`> 800`或`< 800`，所以只有当这个变量发生变化时我们才能执行所有代码。

我执行如下：

```
var is_mobile;

function triangleMenu(){
    var wW = $(window).width();
    if (wW > 800 && (is_mobile === undefined || is_mobile)) {
       console.log('change to pc');
       is_mobile=false;
       //your code here
    } else if(wW <=800 && !is_mobile) {
       console.log('change to mobile');
       is_mobile=true;
       //your code here
    }
} 
```

**[这](http://jsfiddle.net/tKL8E/61/)**是jsfiddle。

**更新**

> 您知道为什么多次记录点击吗？这么奇怪？

因为当你调整浏览器的大小时，`$(window).resize`会一直被调用。您可以添加一个`console.log`进行检查，如下所示：

```
$(window).resize(function () {
    console.log('resizing');                                                                                                       
    triangleMenu();
}); 
```

> 你能解释一下 is_mobile 变量吗？

关于这一点，您可以将上面的代码与之前的代码进行比较，如下所示：

```
function triangleMenu(){
    var wW = $(window).width();
    if (wW > 800 ) {
       console.log('change to pc');
       //your code here
    } else {
       console.log('change to mobile');
       //your code here
    }
} 
```

它会做的更少`console.log`，这意味着可以避免 js 重复做同样的事情。

这`is_mobile`意味着，虽然`wW`现在是`>800`，无论在调整大小时它的宽度有多精确，我都设置`is_mobile`为`false`，所以我不需要重复初始化和绑定。只有 if`wW`是 first `<=800`，我设置`is_mobile`为`true`，标记我现在要更改为移动大小，然后执行初始化和绑定。在这些之后，我不需要做 init 和 bind agin，只要`wW`是`<=800`. 反之亦然。

我的英文不是很好，不知道解释清楚了没有。

# c# - Catch 提供的 URI 方案 'http' 无效；预期的“https”错误

> ID：14362302
> 
> 赞同：0
> 
> 时间：2013-01-16T15:47:11.750
> 
> 标签：c#, exception, error-handling, try-catch

我需要能够捕捉到这个特定的错误

> 提供的 URI 方案“http”无效；预期“https”

我有一个方法正在尝试 https 绑定，如果它因上述错误而失败，我希望它尝试 http 绑定。

我怎么能抓住这个？我已经能够通过捕获所有内容来捕获它，但我只想捕获一个特定的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:02:14.127

原来它属于参数异常。

# mysql - 使用低成本 CPU 更新 MySql

> ID：14362304
> 
> 赞同：0
> 
> 时间：2013-01-16T15:47:28.207
> 
> 标签：mysql, sql-update, ranking

我正在我的应用程序中实现一个排行榜，我想每隔几次更新一次。为此，我创建了两张排行榜，每张都如下所示：

```
user_id, score, rank 
```

这是我的更新查询：

```
select score from leaderboard order by score for update;
select(@rankCounter := 0);
update leaderboard set rank = (select(@rankCounter := @rankCounter + 1)) order by score desc; 
```

我正在使用我的活动表进行查询，并且每隔几次我切换一次活动表。

更新目前大约需要 3 分钟（在我的机器上）来更新 4M 原始数据。我希望减少它占用的 CPU 量，我不在乎更新会花费更长的时间。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:01:39.517

我建议您尝试添加 index `... ON leaderboard (score)`，以避免排序操作。我还建议您从 UPDATE 语句中删除不必要的 SELECT （但我不知道这是否会对性能产生影响，但在这种情况下 SELECT 关键字不是必需的。

排序操作肯定会使用一些 CPU。我不清楚 UPDATE 语句中的 SELECT 是否被优化器忽略，或者计划是否与那里的（不必要的？） SELECT 有所不同。（在该上下文中包含 SELECT 关键字的目的是什么？）

此外，不必从每一行返回得分值来获取排行榜表中所有行的锁定。该 SELECT 语句上的 ORDER BY 也可能消耗 CPU 周期（如果没有`score`作为前导列的索引。4M 行结果集的不必要准备也消耗 CPU 周期。

目前尚不清楚为什么需要使用 SELECT ... FOR UPDATE 来获取表中所有这些行的锁，而 UPDATE 语句本身将获取必要的锁。（SELECT ... FOR UPDATE 语句只会在 BEGIN TRANSACTION 的上下文中获得锁，或者如果自动提交被禁用。（我假设这`leaderboard`是一个 InnoDB 表。）

* * *

MySQL 可以利用索引来避免排序操作：

```
CREATE INDEX leaderboard_IX1 ON leaderboard (score) ; 
```

这应该足以更新排名列：

```
SET @rankCounter := 0;
UPDATE leaderboard
  SET rank = @rankCounter := @rankCounter + 1
ORDER BY score DESC ; 
```

# hadoop - 如何从减速器向输出文件写入许多参数？

> ID：14362308
> 
> 赞同：1
> 
> 时间：2013-01-16T15:47:41.140
> 
> 标签：hadoop, mapreduce

我有一个如下的文本文件

```
250788965731,20090906,200937,200909,621,SUNDAY,WEEKEND,ON-NET,MORNING,OUTGOING,VOICE,25078,PAY_AS_YOU_GO_PER_SECOND_PSB,SUCCESSFUL-RELEASEDBYSERVICE,5,0,1,6.25,635-10-104-40163\. 
```

我只是hadoop的初学者。我遇到了以下问题。

如何在输出文件中打印整行？据我所知，只有 A 键和 A 值可以写入输出文件。如何在我的输出文件中编写包含许多参数的整行。或者我如何在输出文件中至少写几个参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:00:03.120

使用 TextOutputFormat 并将该行写为 Text writable 作为键。将值设为空

```
context.write( new Text("your output line") , null); 
```

# drupal - 在 Drupal 7 中，您可以在内容类型中创建一个字段，以便您添加另一种内容类型的内容并保留引用吗？

> ID：14362312
> 
> 赞同：0
> 
> 时间：2013-01-16T15:47:52.317
> 
> 标签：drupal, reference, content-type

想象以下内容类型：

内容类型 A - 标题 - 带有“添加 B 类型内容”链接的字段

内容类型 B - 标题 - 节点参考

如果添加内容类型 A 的内容并查看此节点，则应该有一个链接/任何内容，上面写着“添加类型 B 的内容”。单击此链接（/node/add/b）时，应直接引用类型 A 的前一个节点。例如：

用户使用 url node/10 添加标题为“Awesome content”的新内容（类型 A）。其他一些用户查看此节点，看到链接“添加 b 类型的内容”并打开 node/add/b。在此节点表单中，有“节点参考”字段，应自动预选节点/20，因为这是最后一个用户来自的节点。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:19:50.543

我还没有看到这样做的模块。

但是你可以通过在节点 A 上建立一个链接来做到这一点，但它不是“node/add/b”，而是可以让链接“node/add/b/[node A id]”。

然后在节点 b 上有一个节点引用字段，并使用 form_alter 设置该字段的默认值，并在 form_alter 中使用 arg(3) 获取节点 A 的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T22:52:52.267

我认为这个新模块可能会对您有所帮助，Inline Entity Form 这使您能够编辑 ContentTypeA 节点，该节点包含一个表示 ContentTypeB 节点的内联字段。所有这些都来自同一页面。除此之外，我认为从该字段中您可以添加多个字段和节点。有解释它的youtube视频

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T09:48:21.850

[Nodereference URL 小部件](http://drupal.org/project/nodereference_url)神奇地做到了这一点。

# facebook - Facebook oAuth 访问令牌据称“永不”过期

> ID：14362313
> 
> 赞同：2
> 
> 时间：2013-01-16T15:47:52.957
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, facebook-oauth

我正在使用扩展访问令牌系统将 oAuth 令牌延长 60 天。该系统运行良好，但是一位用户报告说他们必须继续退出。在调试他的访问令牌时，结果如下：

```
Application ID
54321
Application
User ID 
12345
Joe Blogs
Issued  
1358275114 (21 hours ago)
Expires 
Never
Valid   True
Origin  Web
Scopes  email friends_events manage_pages publish_actions rsvp_event user_birthday user_events user_location 
```

Facebook`offline_access`在 10 月份被弃用，这被认为是生成这种“永不过期”访问令牌的唯一方法。确认我的问题：为什么我看到一个永无止境的访问令牌和一个不会在 60 天内过期的令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:39:36.433

该访问令牌具有`manage_pages`权限 - 如果您获得了 60 天的用户访问令牌，然后用它来检索页面访问令牌，则链接到（无限）页面访问令牌的用户访问令牌也不会过期

有关详细信息，请参阅[https://developers.facebook.com/roadmap/offline-access-removal/上的场景 5](https://developers.facebook.com/roadmap/offline-access-removal/)

# mysql - 将 SQL 变量与 INNER JOINS 结合使用

> ID：14362314
> 
> 赞同：0
> 
> 时间：2013-01-16T15:47:57.653
> 
> 标签：mysql, sql

我试图使用一个变量来计算我对特定 id 的行数，如果我在没有内部连接的情况下使用它，它工作得很好，否则不，这里是没有连接的部分

```
 select
                            cd.basis_point bpt,
                            cd.created,
                            @version:=@version+1 version
                        from tbl_class_det cd, (select @version:=1) v
                        where (cd.class_uuid='{$row['uuid']}')
                        and (cd.created>(
                                                        select
                                                            created
                                                        from tbl_class_det
                                                        where (class_uuid=cd.class_uuid)
                                                        order by created asc
                                                        limit 1
                                                    ))
                        order by cd.created asc 
```

带有连接的部分会给出错误：

```
 select c.name,
                            fd.value bpt,
                            fd.created,
                            @version:=@version+1 version
                        from tbl_fee_det fd, (select @version:=1) v
                            INNER JOIN tbl_fee f ON f.uuid = fd.fee_uuid
                            INNER JOIN tbl_class c ON c.uuid = f.class_uuid
                        where (fd.created>(
                                                        select
                                                            created
                                                        from tbl_class_det
                                                        where (fee_uuid=f.uuid)
                                                        order by created asc
                                                        limit 1
                                                    ))
                        order by fd.created asc; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:57:08.803

您正在使用显式和隐式连接的组合。您不应将`JOIN`语法与逗号语法混用。如果您需要这样做，请使用类似于此的子查询：

```
select name,
    value bpt,
    created,
    @version:=@version+1 version
from
(
    select c.name,
        fd.value,
        fd.created,
        f.uuid
    FROM tbl_fee_det fd
    INNER JOIN tbl_fee f 
        ON f.uuid = fd.fee_uuid
    INNER JOIN tbl_class c 
        ON c.uuid = f.class_uuid
) f, (select @version:=1) v
where (created>(select created
                   from tbl_class_det
                   where (fee_uuid=f.uuid)
                   order by created asc
                   limit 1))
order by created asc; 
```

# python - Python A* 实现

> ID：14362319
> 
> 赞同：3
> 
> 时间：2013-01-16T15:48:27.583
> 
> 标签：python, a-star

我目前正在使用 ika 开发我的 Python 游戏，它使用 python 2.5

我决定为 AI 使用 A* 寻路。但是，我发现它对我的需求来说太慢了（3-4 个敌人可能会落后于游戏，但我想提供多达 4-5 个没有问题）。我知道，像 A* 这样的复杂搜索并不意味着要在 python 中编写脚本，但我很确定，我的探路者也是以错误的方式实现的。

我的问题是：我怎样才能加快这个算法？我编写了自己的二进制堆，并且有一些 try: except: 一些函数内的行。这些线路会产生很大的开销吗？是否有更好的方法来维护开放列表？

我为算法提供了图形界面，用于测试目的（当路径查找器完成搜索时，它会在 ika.txt 文件中写入查找路径所需的迭代次数和秒数。此外，按 A 将执行完整搜索, 和 S 一步一步做的。) 图解版： [http ://data.hu/get/6084681/A_star.rar](http://data.hu/get/6084681/A_star.rar)

此外，这是一个 pastebin 版本： [http://pastebin.com/9N8ybX5F](http://pastebin.com/9N8ybX5F)

这是我用于寻路的主要代码：

```
import ika
import time

class Node:

  def __init__(self,x,y,parent=None,g=0,h=0):
    self.x = x
    self.y = y
    self.parent = parent
    self.g = g
    self.h = h

  def cost(self):
    return self.g + self.h

  def equal(self,node):
    if self.x == node.x and self.y == node.y:
      return True
    else:
      return False

class Emerald_Pathfinder:

  def __init__(self):
    pass

  def setup(self,start,goal):
    self.start = start
    self.goal = goal
    self.openlist = [None,start]    # Implemented as binary heap
    self.closedlist = {}            # Implemented as hash
    self.onopenlist = {}            # Hash, for searching the openlist
    self.found = False
    self.current = None
    self.iterations = 0

  def lowest_cost(self):
    pass

  def add_nodes(self,current):
    nodes = []
    x = current.x
    y = current.y
    self.add_node(x+1,y,current,10,nodes)
    self.add_node(x-1,y,current,10,nodes)
    self.add_node(x,y+1,current,10,nodes)
    self.add_node(x,y-1,current,10,nodes)
    # Dont cut across corners
    up = map.is_obstacle((x,y-1),x,y-1)
    down = map.is_obstacle((x,y+1),x,y+1)
    left = map.is_obstacle((x-1,y),x-1,y)
    right = map.is_obstacle((x+1,y),x+1,y)
    if right == False and down == False:
      self.add_node(x+1,y+1,current,14,nodes)
    if left == False and up == False:
      self.add_node(x-1,y-1,current,14,nodes)
    if right == False and up == False:
      self.add_node(x+1,y-1,current,14,nodes)
    if left == False and down == False:
      self.add_node(x-1,y+1,current,14,nodes)
    return nodes

  def heuristic(self,x1,y1,x2,y2):
    return (abs(x1-x2)+abs(y1-y2))*10

  def add_node(self,x,y,parent,cost,list):
    # If not obstructed
    if map.is_obstacle((x,y),x,y) == False:
      g = parent.g + cost
      h = self.heuristic(x,y,self.goal.x,self.goal.y)
      node = Node(x,y,parent,g,h)
      list.append(node)

  def ignore(self,node,current):
    # If its on the closed list, or open list, ignore
    try:
      if self.closedlist[(node.x,node.y)] == True:
        return True
    except:
      pass
    # If the node is on the openlist, do the following
    try:
      # If its on the open list
      if self.onopenlist[(node.x,node.y)] != None:
        # Get the id number of the item on the real open list
        index = self.openlist.index(self.onopenlist[(node.x,node.y)])
        # If one of the coordinates equal, its not diagonal.
        if node.x == current.x or node.y == current.y:
          cost = 10
        else:
          cost = 14
        # Check, is this items G cost is higher, than the current G + cost
        if self.openlist[index].g > (current.g + cost):
          # If so, then, make the list items parent, the current node.
          self.openlist[index].g = current.g + cost
          self.openlist[index].parent = current
          # Now resort the binary heap, in the right order.
          self.resort_binary_heap(index)
        # And ignore the node
        return True
    except:
      pass
    return False

  def resort_binary_heap(self,index):
    m = index
    while m > 1:
      if self.openlist[m/2].cost() > self.openlist[m].cost():
        temp = self.openlist[m/2]
        self.openlist[m/2] = self.openlist[m]
        self.openlist[m] = temp
        m = m / 2
      else:
        break

  def heap_add(self,node):
    self.openlist.append(node)
    # Add item to the onopenlist.
    self.onopenlist[(node.x,node.y)] = node
    m = len(self.openlist)-1
    while m > 1:
      if self.openlist[m/2].cost() > self.openlist[m].cost():
        temp = self.openlist[m/2]
        self.openlist[m/2] = self.openlist[m]
        self.openlist[m] = temp
        m = m / 2
      else:
        break

  def heap_remove(self):
    if len(self.openlist) == 1:
      return
    first = self.openlist[1]
    # Remove the first item from the onopenlist
    self.onopenlist[(self.openlist[1].x,self.openlist[1].y)] = None
    last = self.openlist.pop(len(self.openlist)-1)
    if len(self.openlist) == 1:
      return last
    else:
      self.openlist[1] = last
    v = 1
    while True:
      u = v
      # If there is two children
      if (2*u)+1 < len(self.openlist):
        if self.openlist[2*u].cost() <= self.openlist[u].cost():
          v = 2*u
        if self.openlist[(2*u)+1].cost() <= self.openlist[v].cost():
          v = (2*u)+1
      # If there is only one children
      elif 2*u < len(self.openlist):
        if self.openlist[2*u].cost() <= self.openlist[u].cost():
          v = 2*u
      # If at least one child is smaller, than parent, swap them
      if u != v:
        temp = self.openlist[u]
        self.openlist[u] = self.openlist[v]
        self.openlist[v] = temp
      else:
        break
    return first

  def iterate(self):
    # If the open list is empty, exit the game
    if len(self.openlist) == 1:
      ika.Exit("no path found")
    # Expand iteration by one
    self.iterations += 1
    # Make the current node the lowest cost
    self.current = self.heap_remove()
    # Add it to the closed list
    self.closedlist[(self.current.x,self.current.y)] = True
    # Are we there yet?
    if self.current.equal(self.goal) == True:
      # Target reached
      self.goal = self.current
      self.found = True
      print self.iterations
    else:
      # Add the adjacent nodes, and check them
      nodes_around = self.add_nodes(self.current)
      for na in nodes_around:
        if self.ignore(na,self.current) == False:
          self.heap_add(na)

  def iterateloop(self):
    time1 = time.clock()
    while 1:
      # If the open list is empty, exit the game
      if len(self.openlist) == 1:
        ika.Exit("no path found")
      # Expand iteration by one
      self.iterations += 1
      # Make the current node the lowest cost
      self.current = self.heap_remove()
      # Add it to the closed list
      self.closedlist[(self.current.x,self.current.y)] = True
      # Are we there yet?
      if self.current.equal(self.goal) == True:
        # Target reached
        self.goal = self.current
        self.found = True
        print "Number of iterations"
        print self.iterations
        break
      else:
        # Add the adjacent nodes, and check them
        nodes_around = self.add_nodes(self.current)
        for na in nodes_around:
          if self.ignore(na,self.current) == False:
            self.heap_add(na)
    time2 = time.clock()
    time3 = time2-time1
    print "Seconds to find path:"
    print time3

class Map:

  def __init__(self):
    self.map_size_x = 20
    self.map_size_y = 15
    self.obstructed = {} # Library, containing x,y couples
    self.start = [2*40,3*40]
    self.unit = [16*40,8*40]

  def is_obstacle(self,couple,x,y):
    if (x >= self.map_size_x or x < 0) or (y >= self.map_size_y or y < 0):
      return True
    try:
      if self.obstructed[(couple)] != None:
        return True
    except:
      return False

def render_screen():
  # Draw the Character
  ika.Video.DrawRect(map.start[0],map.start[1],map.start[0]+40,map.start[1]+40,ika.RGB(40,200,10),1)
  # Draw walls
  for x in range(0,map.map_size_x):
    for y in range(0,map.map_size_y):
      if map.is_obstacle((x,y),x,y) == True:
        ika.Video.DrawRect(x*40,y*40,(x*40)+40,(y*40)+40,ika.RGB(168,44,0),1)
  # Draw openlist items
  for node in path.openlist:
    if node == None:
      continue
    x = node.x
    y = node.y
    ika.Video.DrawRect(x*40,y*40,(x*40)+40,(y*40)+40,ika.RGB(100,100,100,50),1)
  # Draw closedlist items
  for x in range(0,map.map_size_x):
    for y in range(0,map.map_size_y):
      try:
        if path.closedlist[(x,y)] == True:
          ika.Video.DrawRect(x*40,y*40,(x*40)+20,(y*40)+20,ika.RGB(0,0,255))
      except:
        pass
  # Draw the current square
  try:
    ika.Video.DrawRect(path.current.x*40,path.current.y*40,(path.current.x*40)+40,(path.current.y*40)+40,ika.RGB(128,128,128), 1)
  except:
    pass
  ika.Video.DrawRect(mouse_x.Position(),mouse_y.Position(),mouse_x.Position()+8,mouse_y.Position()+8,ika.RGB(128,128,128), 1)
  # Draw the path, if reached
  if path.found == True:
    node = path.goal
    while node.parent:
      ika.Video.DrawRect(node.x*40,node.y*40,(node.x*40)+40,(node.y*40)+40,ika.RGB(40,200,200),1)
      node = node.parent
  # Draw the Target
  ika.Video.DrawRect(map.unit[0],map.unit[1],map.unit[0]+40,map.unit[1]+40,ika.RGB(128,40,200),1)

def mainloop():
  while 1:
    render_screen()
    if mouse_middle.Pressed():
      # Iterate pathfinder
      if path.found == False:
        path.iterateloop()
    elif mouse_right.Pressed():
      # Iterate pathfinder by one
      if path.found == False:
        path.iterate()
    elif ika.Input.keyboard["A"].Pressed():
      # Iterate pathfinder
      if path.found == False:
        path.iterateloop()
    elif ika.Input.keyboard["S"].Pressed():
      # Iterate pathfinder by one
      if path.found == False:
        path.iterate()
    elif mouse_left.Position():
      # Add a square to the map, to be obstructed
      if path.iterations == 0:
        x = mouse_x.Position()
        y = mouse_y.Position()
        map.obstructed[(int(x/40),int(y/40))] = True
    # Mouse preview
    x = mouse_x.Position()
    y = mouse_y.Position()
    mx = int(x/40)*40
    my = int(y/40)*40
    ika.Video.DrawRect(mx,my,mx+40,my+40,ika.RGB(150,150,150,70),1)
    ika.Video.ShowPage()
    ika.Input.Update()

map = Map()
path = Emerald_Pathfinder()
path.setup(Node(map.start[0]/40,map.start[1]/40),Node(map.unit[0]/40,map.unit[1]/40))
mouse_middle = ika.Input.mouse.middle
mouse_right = ika.Input.mouse.right
mouse_left = ika.Input.mouse.left
mouse_x = ika.Input.mouse.x
mouse_y = ika.Input.mouse.y
# Initialize loop
mainloop() 
```

我很感激任何帮助！（抱歉任何拼写错误，英语不是我的母语）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:24:48.880

我认为 python 中的正确实现对于您的目的来说足够快。但是 boost 库有一个 astar 实现和 python 绑定。[https://github.com/erwinvaneijk/bgl-python](https://github.com/erwinvaneijk/bgl-python)

# android - Android onItemSelected 函数无法识别实例变量

> ID：14362321
> 
> 赞同：0
> 
> 时间：2013-01-16T15:48:31.253
> 
> 标签：android, actionlistener, android-spinner, instance-variables

我的微调器的 onItemSelected 函数无法识别活动中的变量（声明为最终变量）。对于识别这些相同变量的按钮，我在同一活动中有 onClickListener 函数。

这是一些代码：

```
public class Currency extends Activity implements OnItemSelectedListener{
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE); 
    setContentView(R.layout.activity_currency);
    final TextView tv2 = (TextView) findViewById(R.id.textView2);
    final TextView tv3 = (TextView) findViewById(R.id.textView3);

}

@Override
public void onItemSelected(AdapterView<?> arg0, View v, int position,
        long arg3) {
    switch (position) {
    case 0:
        tv2.setText("something");
        tv3.setText("something");
        break;
    case 1:
        tv2.setText("something");
        tv3.setText("something");
    case 2:
        tv2.setText("something");
        tv3.setText("something");
        break;

        default:
        break;
    }

} 
```

错误（每一行旁边）：'tv2 无法解析'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:39:57.687

在类级别声明 tv2，如下所示。从 onCreate 中删除声明

```
private TextView tv2 
```

您的代码必须如下所示

```
public class Currency extends Activity implements OnItemSelectedListener{
 private TextView tv2;
private TextView tv3;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE); 
    setContentView(R.layout.activity_currency);
     tv2 = (TextView) findViewById(R.id.textView2);
     tv3 = (TextView) findViewById(R.id.textView3);

}

@Override
public void onItemSelected(AdapterView<?> arg0, View v, int position,
        long arg3) {
    switch (position) {
    case 0:
        tv2.setText("something");
        tv3.setText("something");
        break;
    case 1:
        tv2.setText("something");
        tv3.setText("something");
    case 2:
        tv2.setText("something");
        tv3.setText("something");
        break;

        default:
        break;
    }

} 
```

# html - 如何在没有 JS 的情况下为最后一个可见元素添加样式

> ID：14362325
> 
> 赞同：0
> 
> 时间：2013-01-16T15:48:46.620
> 
> 标签：html, css, css-selectors

这个选择器不起作用。真的有可能吗？

看到这个[http://jsfiddle.net/Hd7VZ/](http://jsfiddle.net/Hd7VZ/)

```
.x-form-fieldset:last-child:not(x-item-hidden) {
    border-bottom: 0;
} 
```

解决方案之一是这个[http://jsfiddle.net/8Fpyu/](http://jsfiddle.net/8Fpyu/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:49:48.470

antejan 的评论是正确的，目前您正在选择其块中的`.x-form-fieldset`哪个。`:last-child`如果你想选择`:last-child`inside`.x-form-fieldset`那么这是正确的语法：

```
.x-form-fieldset :last-child {
    border-bottom: 0;
} 
```

但是，即使最后一项被隐藏，它仍然是`:last-child`，因此`:not`在您的示例中添加 将一事无成。

目前 CSS 中没有任何内容可以让您忽略不可见元素，正如您从[示例的这个小修改中](http://jsfiddle.net/Hd7VZ/1/)看到的那样，简单效果（如交替条纹）也被隐藏元素破坏。这可能是对未来版本 CSS 的一个有价值的补充，您可以尝试[向 W3C CSS 工作组建议它](http://lists.w3.org/Archives/Public/www-style/)，看看他们是否认为值得将其添加到选择器规范的未来版本中（[CSS 选择器级别 4](http://dev.w3.org/csswg/selectors4/)即将推出现在通过标准流程，但[CSS5 选择器的想法正在被接受](http://wiki.csswg.org/spec/selectors)）。

与此同时，你要么找到替代标记方法，要么在 JavaScript 中破解它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:53:59.240

看起来您有语法错误，请添加“。” 如果它是一个类或'#'，如果它是 x-item-hidden 之前的一个 id。
`.x-form-fieldset:last-child:not(.x-item-hidden)`|`.x-form-fieldset:last-child:not(#x-item-hidden)`

# python - 如何比较同一个字典中的两个以上的键？

> ID：14362329
> 
> 赞同：0
> 
> 时间：2013-01-16T15:48:55.783
> 
> 标签：python, dictionary

我正在解析 100 个遵循类似格式的文件。从该文件中，我创建了一个字典，其中可能包含两个键或两个以上的键，其中值在一个集合中。无论如何，总会有一个包含“Y”值的键。对于该键，我需要删除其他键中存在的任何重复值。

我有一个类似的问题，我只有两个键，它已经解决了。[Python：如何比较字典中不同键的值，然后删除重复项？](https://stackoverflow.com/questions/14350899/python-how-to-compare-values-of-different-keys-in-dictionary-and-then-delete-du)

当字典有两个键但不超过两个时，以下代码可以正常工作。

```
for d, p in zip(temp_list, temp_search_list):
    temp2[d].add(p) #dictionary with delvt and pin names for cell
for test_d, test_p in temp2.items():
    if not re.search('Y', ' '.join(test_p)) :
         tp = temp2[test_d]
    else:
         temp2[test_d] = [t for t in temp2[test_d] if t not in tp] 
```

使用三个键的示例字典，但取决于解析的文件，我可以有更多的键。

```
temp2 = {'0.1995': set(['X7:GATE', 'X3:GATE', 'IN1']), '0.199533': set(['X4:GATE', 'X8:GATE', 'IN2']), '0.399': set(['X3:GATE', 'X5:GATE', 'X1:GATE', 'IN0', 'X4:GATE', 'Y', 'X8:GATE'])} 
```

预期输出：

```
temp2
{'0.1995': set(['X7:GATE', 'X3:GATE','IN1']), '0.199533': set(['X4:GATE', 'X8:GATE', 'IN2']), '0.399': set(['X5:GATE', 'X1:GATE', 'IN0', 'Y'])} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:01:40.820

您只需 1 个实际上必须遍历整个数据集的循环即可完成整个操作。

```
from collections import defaultdict

target = None
result = defaultdict(set)
occurance_dict = defaultdict(int)
# Loop over the inputs, building the result, counting the
# number of occurances for each value as you go and marking
# the key that contains 'Y'
for key, value in zip(temp_list, temp_search_list):
    # This is here so we don't count values twice if there
    # is more than one instance of the value for the given
    # key.  If we don't do this, if a value only exists in
    # the 'Y' set, but it occurs multiple times in the input,
    # we would still filter it out later on.
    if value not in result[key]:
        occurance_dict[value] += 1
        result[key].add(value)
    if value == 'Y':
        if target is None:
            target = key
        else:
            raise ValueError('Dataset contains more than 1 entry containing "Y"')
if target is None:
    raise ValueError('Dataset contains no entry containing "Y"')
# Filter the marked ('Y' containing) entry; if there is more than
# 1 occurance of the given value, then it exists in another entry
# so we don't want it in the 'Y' entry
result[target] = {value for value in result[target] if occurance_dict[value] == 1} 
```

Yes`occurance_dict`与 a 非常相似`collections.Counter`，但如果我不需要，我宁愿不迭代数据集两次（即使它发生在幕后），而且我们也不计算给定的第二次出现相同键的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:02:29.190

您需要将对`Y`值的搜索与对其余数据的搜索分开。当你已经在构建时，你真的想这样做`temp2`，以避免不必要的循环：

```
y_key = None
for d, p in zip(temp_list, temp_search_list):
    temp2[d].add(p)
    if p == 'Y':
        y_key = d 
```

接下来，删除重复值最容易[`set.difference_update()`](http://docs.python.org/2/library/stdtypes.html#set.difference_update)用于就地更改集合：

```
y_values = temp2[y_key]
for test_d, test_p in temp2.iteritems():
    if test_d == y_key:
        continue
    y_values.difference_update(test_p) 
```

使用您的示例`temp2`，并假设`y_key`在构建时已经设置`temp2`，第二个循环的结果是：

```
>>> temp2 = {'0.1995': set(['X7:GATE', 'X3:GATE', 'IN1']), '0.199533': set(['X4:GATE', 'X8:GATE', 'IN2']), '0.399': set(['X3:GATE', 'X5:GATE', 'X1:GATE', 'IN0', 'X4:GATE', 'Y', 'X8:GATE'])}
>>> y_key = '0.399'
>>> y_values = temp2[y_key]
>>> for test_d, test_p in temp2.iteritems():
...     if test_d == y_key:
...         continue
...     y_values.difference_update(test_p)
... 
>>> temp2
{'0.1995': set(['X7:GATE', 'X3:GATE', 'IN1']), '0.199533': set(['X4:GATE', 'X8:GATE', 'IN2']), '0.399': set(['X5:GATE', 'X1:GATE', 'IN0', 'Y'])} 
```

请注意这些值`X3:GATE`和是如何从集合`X4:GATE`中删除的。`X8:GATE``0.399`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:26:55.917

我希望我能想出一个可爱的方法来使用列表推导和/或 itertools 模块，但我做不到。我将从以下内容开始：

```
dict1 = {1: set([1,2,3,4,5]),
         2: set([3,4,5,6]),
         3: set([1,7,8,9])
        }

list1 = dict1.items()
newDict = {}
for i in range(len(list1)):
    (k1,set1) = list1[i]
    newDict[k1] = set1
    for j in range(i+1,len(list1)):
        (k2, set2) = list1[j]
        newDict[k2] = set2 - (set1 & set2)

print newDict 
# {1: set([1, 2, 3, 4, 5]), 2: set([6]), 3: set([8, 9, 7])} 
```

如果您有庞大的字典，这可能不是超级有效。

另一个想法：集合是否太长以至于你不能形成一个`collection.Counter`？您将首先通过字典并剥离每组中的成员并将它们粘贴在计数器中（可能可以通过列表理解在一行中完成）。然后，循环通过`originalDict.iteritems()`. 到一个新的字典中，您可以插入其值是原始集合的键（即 0.1995），过滤（`&`我认为使用如上），以便它只包含计数器中计数 > 0 的条目。对于您插入新字典，将它们从计数器中删除（即使它们的计数>1）。归根结底，您仍然需要循环两次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T17:40:03.977

对我来说似乎很简单。首先找到`'Y'`在其值集中具有 a 的键，然后遍历所有其他值集并将它们从该值集中删除。

```
temp2 = {'0.1995':  set(['X7:GATE', 'X3:GATE', 'IN1']),
         '0.199533':set(['X4:GATE', 'X8:GATE', 'IN2']),
         '0.399':   set(['X3:GATE', 'X5:GATE', 'X1:GATE', 'IN0', 'X4:GATE', 'Y', 'X8:GATE'])}

y_key = None
for k,v in temp2.iteritems():
    if 'Y' in v:
        y_key = k
        break

if y_key is None:
    print "no 'Y' found in values"
    exit()

result = {}
for k,v in temp2.iteritems():
    if k != y_key:
        temp2[y_key] -= v

print 'temp2 = {'
for k,v in temp2.iteritems():
    print '  {!r}: {!r},'.format(k,v)
print '}' 
```

输出：

```
temp2 = {
  '0.1995': set(['X7:GATE', 'X3:GATE', 'IN1']),
  '0.199533': set(['X4:GATE', 'X8:GATE', 'IN2']),
  '0.399': set(['X5:GATE', 'X1:GATE', 'IN0', 'Y']),
} 
```

# php - 对于重度多语言网站，程序员应该遵循哪些 Mysql 标准？

> ID：14362334
> 
> 赞同：0
> 
> 时间：2013-01-16T15:49:15.240
> 
> 标签：php, mysql, phpmyadmin

到目前为止，还没有好的文章来说明程序员应该遵循什么标准来建立全球网站！这就是为什么在这里，我希望在那里找到好的指导。

请帮助我解决以下问题：

*   我应该为多语言网站使用哪些数据类型？例如，用户字段可以是英语、荷兰语或阿拉伯语。我应该将其定义为带有 utf8_unicode_ci 排序规则的 varchar，这样可以吗？我发现文章说使用nvarchar，在phpmyadmin数据类型选择中没有！或者我应该在命令行中手动定义它

*   用户名、网址和电子邮件字段的首选长度是多少？

*   如果我想在我的内容中显示日期和时间，我应该使用时间戳还是日期时间？

*   实施多语言网站的首选方法是什么？我应该翻译内容并将其放在数据库表中，还是只创建不同的内容页面并在选择对应的语言时调用它们？毕竟只有网站菜单会改变，我没有看到将其保存在数据库中的充分理由。

抱歉写了这么久。我希望你能在这件事上帮助我，因为我愿意使用 php 和 mysql 建立一个沉重的网站，我不想从错误的方法开始，最后得到错误和错误。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:33:14.657

对您的观点的评论：

*   单一的 UTF-8 排序规则应该可以解决许多语言的问题，但您仍然可能会遇到阿拉伯语、俄语、西里尔语、日语和中文（输入）的问题。
*   没有首选的长度，它只是在你身上。我使用 50 个字符作为用户名，500 个字符作为 URL，250 个字符作为电子邮件地址。但是您也可以让用户选择一个长度为 300 个字符的用户名 - 再次，这完全取决于您
*   这与多语种无关，而且（有人可能会认为我在重复 mysels，但是）这取决于您的偏好
*   不仅菜单会改变，您还应该保留翻译后的 URL，并带有立即选择哪种语言的标记，因此“关于我们”页面应该是
    *   [http://mysite.com/en/about-us/](http://mysite.com/en/about-us/)英文版
    *   [http://mysite.com/de/uber-uns/](http://mysite.com/de/uber-uns/)德语
    *   [http://mysite.com/fr/a-propos-de-nous/](http://mysite.com/fr/a-propos-de-nous/)法语等
        因此更容易将翻译后的文档保存在主页位于顶部的树形文档结构中`/en/`，, `/de/`,`/fr/`文件夹和内容但这会导致内容管理更加困难。将翻译后的内容保存到数据库时，有些人可能会发现在语言之间切换并按照之前的 URL 打开正确的翻译内容和适当的翻译 URL 也不太容易。

结论：在谈到多语言网站时，没有首选的方式来做这件事和那件事——这就是为什么没有关于该主题的文章的原因。主要是关于您正在使用的 CMS，如果您是为自己编写一个，则仅取决于您的偏好。

# google-apps-script - Google App Script：从另一个脚本中运行脚本？

> ID：14362336
> 
> 赞同：1
> 
> 时间：2013-01-16T15:49:27.040
> 
> 标签：google-apps-script, forms

我正在为我的公司开发工资单网络应用程序。我想知道是否可以从另一个脚本中运行一个脚本。例如拥有一个超链接或类似的东西，用户可以去查看不同的 UI 和所有内容。如果这是不可能的，有谁知道如何将 html 表单的副本提交到电子邮件？我一直在尝试这样做，但 GAS 会在发送表单之前删除样式和填充表单的 JavaScript 代码。我只需要至少一张表格的图像，以便经理可以打印出来并签名。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:44:21.877

是的，您可以使用常规锚点从一个脚本链接到另一个脚本。

这不是 Apps 脚本从您的电子邮件形式中删除这些内容。电子邮件客户端（包括 Gmail）故意不支持复杂的 HTML。如果您需要图像，请尝试使用 DocumentsApp 创建 Google Doc，使用 document.getAs("application/pdf") 将其转换为 pdf，然后通过电子邮件发送。

# php - 检查mysql db中是否存在记录

> ID：14362338
> 
> 赞同：0
> 
> 时间：2013-01-16T15:49:35.583
> 
> 标签：php, mysql, database, search

我认为这应该工作，但它不是......

基本上我正在尝试检查 mysql db 以查看是否有符合 2 个变量的记录。如果没有，则做另一件事。在这一点上，结果总是否定的。

```
$result = mysql_query("SELECT 'lastname' FROM 'Cust_Releases' WHERE 'lastname' = '$usercheck' AND          'TripID'= '$RLtripid'");
echo $result;
if(mysql_num_rows($result) == 0) {
 echo"no";// row not found, do stuff...
} 
else {
 echo"yes"; // do other stuff...
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:56:54.337

首先，停止使用 mysql_* 函数，因为从 PHP 5.5.0 开始不推荐使用此扩展。

其次，始终在数据库名称、表名称和列名称周围使用 (`) 符号。

您使用了保留字`RELEASE`。

```
$sql = "SELECT `lastname` FROM `Releases` WHERE `lastname` = '$usercheck' AND `TripID` = '$RLtripid'"; 
```

[您在此处找到的保留字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:20:24.707

```
$result = mysql_query("SELECT lastname FROM `Releases` WHERE lastname = '$usercheck' AND TripID= '$RLtripid' LIMIT 1");
if (!$result) {
    die('Invalid query: ' . mysql_error());
}
echo $result;
if(mysql_num_rows($result) == 0) {
 echo"no";// row not found, do stuff...
} 
else {
 echo"yes"; // do other stuff...
  } 
```

*   正如邦迪所建议的那样，逃避“释放”
*   将“LIMIT 1”添加到您的查询中，以允许在有多个匹配记录时提前退出。您似乎不需要总数。如果存在唯一约束以保证只能返回一行，则可能没有任何区别
*   **mysql_query 已弃用。在实际代码中，您应该使用 PDO 和准备好的语句/绑定变量！**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:59:38.067

调试是编程中非常重要的事情。首先确保变量 $usercheck 和 $RLtripid 包含值。

```
----------------------
$sql = "SELECT `lastname` FROM `Cust_Releases` WHERE `lastname` = '$usercheck' AND `TripID`= '$RLtripid'";
回声 $sql;
$result = mysql_query($sql);
....--------------------

```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T18:35:05.817

```
Try this code. It will help you

$result =  mysql_query("SELECT COUNT( * ) from Cust_Releases lastname = '$usercheck' AND TripID= '$RLtripid'");
if($result  == 0) {
 echo"no";// row not found, do stuff...
} 
else {
 echo"yes"; // do other stuff...
  } 
```

# c++ - 如何在 MFC 中连续运行不冻结窗口的函数？

> ID：14362339
> 
> 赞同：0
> 
> 时间：2013-01-16T15:49:41.433
> 
> 标签：c++, mfc, cursor, infinite-loop

我是 MFC 的新手，正在制作一个简单的程序，它将不断更新两个编辑框。编辑框包含鼠标光标的 x 和 y 坐标。该程序仅在单击开始按钮时开始抓取光标坐标，并且应该在单击停止按钮时停止。但是，只要我单击开始按钮，整个窗口就会冻结。

这是我到目前为止所拥有的：

```
//Way up high in the code:
#include <windows.h>

//way down low in the code

void CmfcpixelDlg::OnBnClickedButtonStart()
{
POINT p;

CString x;
CString y;

int px;
int py;

while(stop == false){

    GetCursorPos(&p);

    px = p.x;
    //convert x coordinate to a CString
    x.Format(L"%d", px);
    //convert y coordinate to a CString
    py = p.y;
    y.Format(L"%d", py);
    m_x.SetWindowTextW(x.GetBuffer());
    m_y.SetWindowTextW(y.GetBuffer());

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:51:30.447

您正在阻止事件循环。您不能执行需要用户干预才能在 GUI 线程中结束的循环 - 您需要在单独的线程中执行。

事实上，您不应该在主线程中执行*任何冗长的操作。*

基本上，运行循环的线程就是负责显示和更新 GUI 的线程。因为这个线程现在正在等待 GUI 更新退出循环*，并且*这个线程是应该更新 GUI 的同一个线程，所以你有一个 Catch-22，或者用程序员的话来说，一个死锁。

要解决此问题，您可以将代码拆分到一个新线程中，或者更好的是，将其设计为完全消除循环。您的代码相当简单，并且可以无循环地完成：

*   单击开始时：设置标志。
*   *鼠标移动：如果*设置了标志，则更新 x、y 坐标文本。没有循环！
*   单击停止时：取消设置标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:53:27.657

您应该使用该`OnMouseMove`事件，并且仅当用户单击开始时才更新编辑框。

# d3.js - 可缩放树形图上的 D3 自动换行

> ID：14362342
> 
> 赞同：4
> 
> 时间：2013-01-16T15:49:44.973
> 
> 标签：d3.js, word-wrap, treemap

我在 D3 (http://bost.ocks.org/mike/treemap/) 中实现了可缩放树形图，但是我已经对其进行了修改，因此单击时叶子矩形将转到 URL。如果标题太长，它还会添加省略号。

我想在叶子矩形上实现自动换行，但不能让它工作。我想在文本中添加一组 tspan，但我在执行顺序上苦苦挣扎，以至于无法理解将其放在哪里。

代码：[https ://secure.polisci.ohio-state.edu/faq/d3/zoomabletreemap.htm](https://secure.polisci.ohio-state.edu/faq/d3/zoomabletreemap.htm)

数据：[https ://secure.polisci.ohio-state.edu/faq/d3/zoomabletreemap.json](https://secure.polisci.ohio-state.edu/faq/d3/zoomabletreemap.json)

我已经研究过，我要么需要 tspan 将其分解，要么需要一个 div，其中包含文本，但也不知道该怎么做。有常规 D3 Treemap 的文本换行示例，但我没有发现 Zoomable Treemap 的示例，并且代码明显不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T16:09:48.613

最简单的做法可能是用s inside替换 SVG`text`元素。为此，您将替换`div``foreignObject`

```
g.append("text") //was text
 .attr("dy", ".75em")
 ... 
```

和

```
g.append("foreignObject")
 .attr("dy", ".75em")
 ...
 .append("xhtml:div")
 ... 
```

也可能建议设置 的`width`和`height`属性`foreignObject`（使用类似于您用来确定文本是否太长的代码）以使文本正确流动。

# jquery - jQuery 不适用于数据库？

> ID：14362345
> 
> 赞同：-5
> 
> 时间：2013-01-16T15:49:48.377
> 
> 标签：jquery, mysql

当我不使用数据库中的用户名和密码时，我的代码有效。但是，如果我确实匹配了数据库中的详细信息，那将是一个问题。但是，如果我在脚本中匹配它们，它就可以工作。怎么了？我希望代码在不刷新的情况下显示成功消息，并且在它重定向到 view.php 之后：它按原样工作，但是如果我集成与 php 匹配的数据库，那么 jquery 将继续告诉我错误的用户名或密码密码和用户名没问题

```
<script type="text/javascript">
$(document).ready(function() {

$("#login").click(function() {

    var action = $("#form1").attr('action');
    var form_data = {
        username: $("#username").val(),
        password: $("#password").val(),
        is_ajax: 1
    };

    $.ajax({
        type: "POST",
        url: action,
        data: form_data,
        success: function(response)
        {
            if(response == 'success')
                $("#form1").slideUp('slow', function() {
                //function to direct 

window.location.replace("view.php");
                //$("#message").html("<p class='success'>You          logged in successfully!</p>");
                });
            else
                $("#message").html("<p class='error'  style='color:red'>Invalid username and/or password.</p>");    
        }
    });

    return false;
});
// Function that redirects the user to another page
});
</script> 
```

PHP 文件如果是这样的话，它会很好用。

```
<?php

    $is_ajax = $_REQUEST['is_ajax'];
    if(isset($is_ajax) && $is_ajax)
{
    $username = $_REQUEST['username'];
    $password = $_REQUEST['password'];

    if($username == 'demo' && $password == 'demo')
    {
        echo "success"; 
    }
}

?> 
```

与 db 匹配的 php 代码

```
<?php

$is_ajax = $_REQUEST['is_ajax'];
if(isset($is_ajax) && $is_ajax)
{
$username =(isset($_POST['username']))? trim($_POST['username']): '';
$password=(isset($_POST['password']))? $_POST['password'] : '';

// 
$query ='SELECT username FROM site_user WHERE '.
'username="'.mysql_real_escape_string($username,$con).'" AND ' .
'password = md5("'.mysql_real_escape_string($password,$con).'")';
$result=mysql_query($query,$con) or die (mysql_error($con));
if(mysql_num_rows($result)>0){
echo 'ok';
}

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:02:06.793

首先，该`url:`参数没有获取 URL……但还有其他问题。

以此为例（借用此处的另一个问题/答案... [jQuery Ajax POST 示例与 PHP](https://stackoverflow.com/questions/5004233/jquery-ajax-post-example)）

```
/* get some values from elements on the page: */
var values = $(this).serialize();

/* Send the data using post and put the results in a div */
$.ajax({
  url: "test.php",
  type: "post",
  data: values,
  success: function(){
      alert("success");
       $("#result").html('submitted successfully');
  },
  error:function(){
      alert("failure");
      $("#result").html('there is error while submit');
  }   
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:54:34.990

将正确的值传递给 ajax 函数

```
$.ajax({
        type: "POST",
        url: your php file handling form data,
        data: serialize the form data,
        success: function(response){}

}); 
```

# c# - T4MVC 未将参数传递给基本控制器，因此无法构建生成的代码

> ID：14362353
> 
> 赞同：5
> 
> 时间：2013-01-16T15:50:39.450
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4, t4mvc

问题：

构建时出现以下错误：

> “'.Controllers.ControllerBase' 不包含采用 0 个参数的构造函数”

我的基本控制器如下所示：

```
public abstract class ControllerBase : Controller
{
    public CompanyChannel<IAuthorizationService> authorizationServiceClient;
         public ControllerBase(CompanyChannel<IAuthorizationService> authService)
    {
        this.authorizationServiceClient = authService;
    }
} 
```

使用 Base.. 的示例控制器

```
public partial class SearchController : ControllerBase
{
    protected CompanyChannel<IComplaintTaskService> complaintTaskServiceChannel;
    protected IComplaintTaskService taskServiceClient;      

    protected ComplaintSearchViewModel searchViewModel;

    #region " Constructor "

    public SearchController(CompanyChannel<IComplaintTaskService> taskService, CompanyChannel<IAuthorizationService> authService, ComplaintSearchViewModel viewModel)
        : base(authService)
    {
        searchViewModel = viewModel;
        this.complaintTaskServiceChannel = taskService;
        this.taskServiceClient = complaintTaskServiceChannel.Channel;
    }

    #endregion

    public virtual ActionResult Index()
    {
        return View();
    }
} 
```

这似乎使 T4MVC 跳闸。

我不应该将参数传递给基本构造函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:08:27.383

您的抽象类必须有一个默认构造函数。当子类中有任何不调用基类ctor的构造函数时，编译器会自动调用基类的默认ctor，因此基类中必须有一个。

以下演示将有助于理解 C# 中的 ctor 链接

```
class Base
{
    public Base()
    {
        Console.WriteLine("Base() called");
    }

    public Base(int x)
    {
        Console.WriteLine("Base(int x) called");
    }
}

class Sub : Base
{
    public Sub()
    {
        Console.WriteLine("Sub() called");     
    }
} 
```

并从您的 Main() 创建

```
new Sub(); 
```

并观察控制台输出

# sql - SQL / DB2 - 同时检索值和更新/增量

> ID：14362354
> 
> 赞同：2
> 
> 时间：2013-01-16T15:50:42.197
> 
> 标签：sql, select, db2, sql-update, ibm-midrange

我正在连接到 DB2 数据库并执行 SQL 语句。

正在做的一个例子是：

```
select field from library/file
  [program code line finishes executing]
  [increment value by one]
update library/file set field = 'incremented value' 
```

我需要在返回值时立即更新值。而不必等待脚本完成，然后运行单独的 UPDATE 语句。

我想做的概念是这样的：

```
select field from library/file; update library/file set field = (Current Value + 1); go; 
```

请注意...这不是大多数人熟悉的常见 SQL 数据库，它是 IBM i 上的 DB2 数据库。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T23:20:11.247

如果此文件只是打算让单行存储您的计数器，请考虑使用 DB2 [SEQUENCE来管理下一个可用数字。](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Fdb2%2Frbafzsequences.htm)这就是 SEQUENCE 的设计目的。

要设置它，请使用[CREATE SEQUENCE](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Fdb2%2Frbafzcsequence.htm)语句。

要增加值并检索，请使用[SEQUENCE](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Fdb2%2Frbafzseqref.htm)形式的引用表达式`NEXT VALUE FOR sequence-name`。要找出最近的值是什么，请使用`PREVIOUS VALUE FOR sequence-name`. 这些表达式可以像常规的任何列表达式一样使用，例如在 SELECT 或 INSERT 语句中。

假设，例如，您想对发票编号执行此操作（也许您的会计部门不希望他们的第一个发票编号为 000001，因此我们将其初始化得更高）。

```
CREATE SEQUENCE InvoiceSeq
    as decimal (7,0)
    start with 27000; -- for example 
```

您可以像这样获得新发票的编号：

```
SELECT NEXT VALUE FOR InvoiceSeq
    INTO :myvar
    FROM SYSIBM/SYSDUMMY1; 
```

但是这个 SYSIBM/SYSDUMMY1 表是什么？我们并没有真正从餐桌上得到任何东西，那么我们为什么要假装这样做呢？SELECT 需要一个 FROM 表子句。但由于我们不需要，让我们使用[VALUES INTO](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Fdb2%2Frbafzvalinto.htm)语句。

```
VALUES NEXT VALUE FOR InvoiceSeq
    INTO :myvar; 
```

这样就增加了计数器，并将值放入我们的变量中。您可以使用该值插入到我们的 InvoiceHeaders 和 InvoiceDetails 表中。

**或者**，您可以在编写 InvoiceHeader 时增加计数器，然后在编写 InvoiceDetails 时再次使用它。

```
INSERT INTO InvoiceHeaders 
           (InvoiceNbr,                Customer, InvoiceDate)
    VALUES (NEXT VALUE FOR InvoiceSeq, :custnbr, :invdate);

for each invoice detail
   INSERT INTO InvoiceDetails 
              (InvoiceNbr,                    InvoiceLine, Reason,   Fee)
       VALUES (PREVIOUS VALUE FOR InvoiceSeq, :line,      :itemtxt,  :amt); 
```

PREVIOUS VALUE 是特定工作的本地值，因此不应该有另一个工作获得相同数字的风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:34:14.363

```
update library/file set field = field + 1;
select field from library/file; 
[program code line finishes executing]
[increment value by one] 
```

这可以解决另一个应用程序在您获取它和更新它之间更新数字的问题。更新它然后使用它。如果两个应用程序尝试同时更新，一个会等待。

一个 SEQUENCE 对象正是为此目的而设计的，但是如果您被迫更新这个“下一个 ID”文件，我会这样做。按照@Clockwork-Muse 评论中的链接获取有关 SEQUENCE 对象的信息，或尝试[V5R4 中的此示例](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=/sqlp/rbafysequence.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T06:48:35.003

他的要求是这样的：

```
UPDATE sometable
SET somecounter = somecounter + 10,
    :returnvar  = somecounter + 10; 
```

同时更新和检索。

这在 MSSQL 中是可能的，事实上我在那里经常使用它，

但是 DB2 似乎没有这个特性。

# java - Apache POI用希腊语读取excel xlsx

> ID：14362355
> 
> 赞同：0
> 
> 时间：2013-01-16T15:50:43.683
> 
> 标签：java, character-encoding, apache-poi

有很多主题如何读取 XLSX 文件和写入文件，它们对我有用，但不适用于希腊语（只是示例）单词。Excel 看起来像这样：

```
srcid   city    county
00008   ΠΑΤΡΑ   ΑΧΑΪΑΣ
00008   ΠΑΛΛΗΝΗ ΑΤΤΙΚΗΣ
00008   ΠΑΤΡΑ   ΑΧΑΪΑΣ 
```

当我读到这篇文章时，我得到了？？？？市县在哪里。我尝试了不同的示例：[ToCSV](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/ss/examples/ToCSV.java)，[XLSX2CSV](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/xssf/eventusermodel/XLSX2CSV.java)

字符集有问题，但我不知道是什么。我用 UTF-8 编码更新了示例，但没有运气。

我正在使用这个依赖项：org.apache.poi poi 3.9

```
<dependency>
    <groupId>org.apache.poi</groupId>
    <artifactId>poi-ooxml</artifactId>
    <version>3.9</version>
</dependency>

<dependency>
    <groupId>org.apache.poi</groupId>
    <artifactId>ooxml-schemas</artifactId>
    <version>1.1</version>
</dependency>

<dependency>
    <groupId>org.apache.xmlbeans</groupId>
    <artifactId>xmlbeans</artifactId>
    <version>2.5.0</version>
</dependency>
<dependency>
    <groupId>org.apache.poi</groupId>
    <artifactId>openxml4j</artifactId>
    <version>1.0-beta</version>
</dependency>
 <dependency>
    <groupId>dom4j</groupId>
    <artifactId>dom4j</artifactId>
    <version>1.6.1</version>
</dependency> 
```

请帮忙。我不知道出了什么问题。也许这个系统编码的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:59:27.047

`ToCSV.saveCSVFile`使用 FileWriter，它使用默认的平台编码。而是这样做：

```
bw = new BufferedWriter(
        new FileOutputStreamWriter(new FileOutputStream(file), "UTF-8")); 
```

（那么它总是 UTF-8。）

# javascript - 全日历日期问题

> ID：14362356
> 
> 赞同：0
> 
> 时间：2013-01-16T15:50:55.353
> 
> 标签：javascript, date, datetime, fullcalendar

我正在使用 Fullcalendar，并创建了一个事件列表（可拖动）。

当放置一个事件时，会调用 drop 方法。

```
drop: function(date, allDay, jsEvent, ui) {
    console.log(date.getDay());
    console.log(date); 
```

这个的输出是：

```
3 
Wed Jan 02 2013 00:00:00 GMT+0100 (CET) 
```

虽然我希望第一行输出 2 或 02。

allDay 参数是错误的，因为我总是在月历视图中掉线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:54:12.377

这不是 FullCalendar 问题，而是 RTD 问题。[`Date.getDay()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDay)返回星期几，从`0`到`6`（星期日到星期六）。星期三是`3`。

用于[`Date.getDate()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDate)获取月份中的日期（`1`到`31`）。

# ios - 报亭后台通知呼叫中止（时间限制？）

> ID：14362362
> 
> 赞同：1
> 
> 时间：2013-01-16T15:51:17.330
> 
> 标签：ios, newsstand-kit

我正在开发一个 iOS 报亭应用程序。我使用后台下载功能。除以下内容外的所有内容都可以正常工作：

如果应用程序在后台（启动然后单击主页按钮）并且它接收到远程推送通知，则按预期调用方法 [UIApplicationDelegate didReceiveRemoteNotification]。然后我做了一些计算来获取所有的下载 URL。第一次收到推送时效果很好。在处理以下推送期间，调用的 syncData 方法被中止。

整个计算最多可能需要 10 秒。后台通话是否有超时？

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

   NSLog(@"Received push notification: %@", userInfo.description);
   [self.downloadManager syncData];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:29:30.450

据我了解，您需要调用此方法：

```
[UIApplication beginTaskWithExpirationHandler:]; 
```

# android - 将 Ruby on Rails 应用程序转换为原生 Android PhoneGap 应用程序

> ID：14362363
> 
> 赞同：8
> 
> 时间：2013-01-16T15:51:21.993
> 
> 标签：android, ruby-on-rails, cordova, jquery-mobile

我一直在开发一个用 Ruby on Rails 编写的 jQuery 移动 Web 应用程序，并希望将其作为原生 Android 应用程序提供。我已经设置了 phonegap 项目来加载我的 url，一切似乎都在工作，但我一直在读到，如果它只是一个指向外部 url 的 webview 容器，谷歌将拒绝该应用程序。有没有人有这方面的经验？

据我所知，我需要重写 Web 应用程序以使用 ajax 调用来填充页面，而不是仅仅依赖对我的 Web 服务器的 Web 请求。任何人都可以对此提供任何见解吗？他们会接受只加载外部 url 的 PhoneGap 应用吗？任何帮助表示赞赏。

**更新 1：**我还了解到，无法处理没有互联网连接是他们批准/拒绝您的应用程序的主要原因之一。我认为这可以在 android 应用程序中使用一些检查互联网连接的逻辑来处理，如果它存在，则加载外部 url，如果它不加载本地 html 启动页面。这个想法可以吗？

**Update2：**是否可以选择将应用程序的“骨架”作为电话间隙应用程序中的基本 html 文件，该应用程序仅使用 ajax 来拉下所有主要的 html？这样，应用程序仍然可以在没有互联网连接的情况下运行，但您也可以对页面内容进行较大更改，这些内容将在每个请求中被拉下。这是一个可行的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T22:06:02.763

我从来没有听说过一个应用程序因为只是一个 WebView 容器而被 Play 商店拒绝。但即使他们不会因此拒绝您的应用程序，您也不应该以这种方式构建 PhoneGap 应用程序。你最终会得到一个感觉它只是一个 WebView 容器的应用程序，以及一个在连接不稳定时很容易中断的应用程序。请记住，即使在接收良好的情况下，手机的延迟也很高，因此减少您必须发出的请求数量（针对静态文件和资产）至关重要。

理想情况下，当将网站移植到 PhoneGap 应用程序时，您应该尽可能地解耦您的界面。更少的变量应该从控制器传递到视图，更多的数据应该通过 AJAX 调用。当您的前端代码（应用程序/视图中的所有文件）可以静态提供时，转移到 PhoneGap 应用程序很容易。

确保您的控制器中的操作都具有对 JS ( `format.js`) 的响应，而不仅仅是 HTML。您的视图应该对 Rails 进行 AJAX 调用，以获取通过 AJAX 填充页面的数据。然后您可以将您的视图（和您的资产）捆绑到您的 PhoneGap 应用程序中。

# gtk - gtkbin 似乎没有从我的 gtkwindow 顶级小部件中获取事件

> ID：14362364
> 
> 赞同：0
> 
> 时间：2013-01-16T15:51:23.303
> 
> 标签：gtk

我有一些问题，此时我尝试使用 gtkbin 在 gtk 中制作一个自定义小部件，所以我想知道是否可以将 gtkbin 子类化以及如何做到这一点......感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:54:21.590

我终于设法自己实现了这一点。以下是想要获得的人的方法`gtkbin widget`。

1) 了解小部件的层次结构很重要。

```
>Hierarchy of widgets:  
GtkWidget <- GtkContainer <- GtkBin 
```

例如，如果`Gtkcontainer`并且`GtkBin`不重写 contumize 函数*，*直接派生自的**自定义小部件类**将使用.`GtkWidgetClass->draw`**`GtkBin`*`GtkWidgetClass`***

 ***2）关于gtkbin的信息：

下载源代码`gtk`并打开`gtkwidget.c`，查看所有这些文件中的`gtkcontainer.c`函数。`gtkwindow.c``class_init`

在`GtkWidgetClass`：

*   1）我们必须看到，小部件类没有实现“绘制”功能：

    ```
     GtkWidgetClass->draw 
    ```

*   2）我们必须看到，`GtkWidgetClass->get_preferred_width`and的实现`GtkWidgetClass_preferred_width_height` **总是**返回“0”，这是不正确的。

*   我们还看到，`GtkWidgetClass->size_allocate`它只为您想要派生的小部件分配大小，它不计算自定义小部件的子级。

您必须将这四个函数重写为一切才能正常工作。

由于`GtkWindow`是直接派生自的小部件`GtkBin`，我们可以通过查看`GtkWindow.c`文件中的相应实现并进行一些更改来实现我们的功能。

这是我的实现：

```
 widget_class->get_preferred_width = item_list_get_preferred_width;
   widget_class->get_preferred_height = item_list_get_preferred_height;
   widget_class->draw = dsn_itemlist_draw;
   widget_class->size_allocate = item_list_size_allocate;

void item_list_size_allocate (GtkWidget     *widget,
                          GtkAllocation *allocation)
{
  GtkAllocation child_allocation;
  GtkWidget *child;
  guint border_width;

  gtk_widget_set_allocation (widget, allocation);
  child = gtk_bin_get_child (GTK_BIN(widget));

  if (child && gtk_widget_get_visible (child))
    {
      border_width = gtk_container_get_border_width (GTK_CONTAINER (widget));
      child_allocation.x = border_width;
      child_allocation.y = border_width;
      child_allocation.width = MAX (1, allocation->width - border_width * 2);
      child_allocation.height = MAX (1, allocation->height - border_width * 2);

      gtk_widget_size_allocate (child, &child_allocation);
    }
}

gboolean dsn_itemlist_draw( GtkWidget *widget, cairo_t *cr)
{
   GtkWidget *child;
   GtkBin *bin = GTK_BIN(widget);
   GtkContainer *container = GTK_CONTAINER(widget);
   child = gtk_bin_get_child(bin);
   gtk_container_propagate_draw(container, child, cr);
   printf("bonnnnnnn\n");
   return TRUE;
}

void item_list_get_preferred_width(GtkWidget *widget,
                                gint      *minimum_size,
                                gint      *natural_size)
{
  //GtkWindow *window;
  GtkWidget *child;
  guint border_width;

  //window = GTK_WINDOW (widget);
  child  = gtk_bin_get_child (GTK_BIN (widget)/*(window)*/);

  border_width = 0;//gtk_container_get_border_width (GTK_CONTAINER (window));
  *minimum_size = border_width * 2;
  *natural_size = border_width * 2;

  if (child && gtk_widget_get_visible (child))
    {
      gint child_min, child_nat;
      gtk_widget_get_preferred_width (child, &child_min, &child_nat);

      *minimum_size += child_min;
      *natural_size += child_nat;
    }
}

void item_list_get_preferred_height(GtkWidget *widget,
                                gint      *minimum_size,
                                gint      *natural_size)
{
  //GtkWindow *window;
  GtkWidget *child;
  guint border_width;

  //window = GTK_WINDOW (widget);
  child  = gtk_bin_get_child (GTK_BIN (widget)/*(window)*/);

  border_width = 0;//gtk_container_get_border_width (GTK_CONTAINER (window));
  *minimum_size = border_width * 2;
  *natural_size = border_width * 2;

  if (child && gtk_widget_get_visible (child))
    {
      gint child_min, child_nat;
      gtk_widget_get_preferred_height (child, &child_min, &child_nat);

      *minimum_size += child_min;
      *natural_size += child_nat;
    }
} 
```

`Note:`在`init`函数中，我们必须告诉`gtk`我们我们`widget`不拥有一个窗口（`gdkwindow`），但它通过调用从其父窗口小部件继承一个窗口

gtk_widget_set_has_window (GTK_WIDGET (this_instance), FALSE);

就这样结束...***

# powershell - 如何根据 Powershell 中的多个匹配字段值创建数据子集？

> ID：14362365
> 
> 赞同：2
> 
> 时间：2013-01-16T15:51:26.160
> 
> 标签：powershell

我有一个 powershell 脚本，它使用 EWS 托管 API 提取电子邮件，从地址到地址和 internetmessageheaders 读取它们的主题。在电子邮件读取循环中，它将所有这些信息加载到数据表中。

我需要获取每条消息的所有上述信息，并根据发件人地址填充数组或数据表。然后我将检查中继信息并根据从地址发送整个列表到目标地址。

我似乎无法理解如何构建来自地址列表的内容。我尝试将数据表数据转换为哈希表，然后使用 a`sort|get-unique`从地址获取唯一列表，但无法使用此信息正确构建从地址数组。我试过循环使用 a`select-string $_ -allmatches`但没有得到任何地方。

这是我的代码的一部分，它创建数据表并使用每封电子邮件中的信息填充它。

```
$msgTable = New-Object system.Data.DataTable “Messages”
$col1 = New-Object system.Data.DataColumn Subject,([string])
$col2 = New-Object system.Data.DataColumn From,([string])
$col3 = New-Object system.Data.DataColumn To,([string])
$col4 = New-Object system.Data.DataColumn Relay,([string])
$msgTable.columns.add($col1)
$msgTable.columns.add($col2)
$msgTable.columns.add($col3)
$msgTable.columns.add($col4)

$frItemResult = $PublicFolder.FindItems($sfCollection,$view)
# Loop through view results and mark read
$frItemResult | ForEach-object{
if($_.HasAttachments ) {
$_.Load()
"Report Subject: $($_.Subject)"
# Loop through attachments, extract info
$_.Attachments | ForEach-object  {
if($_.Name -notmatch "ATT00001"){
$_.Load($attPropset)

$row = $msgTable.NewRow();$row.Subject = $($_.item.Subject); $row.From = ($_.item.From.address); $row.To = $($_.item.ToRecipients.address); $row.Relay = "$($_.Item.InternetMessageHeaders | Where-Object {$_.name -like "*received*"})";$msgTable.Rows.Add($row) 
```

这`$msgTable`是填充数据后的样子。

```
Subject                          From                             To                               Relay                           
-------                          ----                             --                               -----                           
Message1                        user1@company.com           recipient1@yahoo.com               Received-SPF=pass (domain of ...
Message2                        user2@company.com           recipient2@comcast.net             Received=from imta27.mailguys...
Message2                        user2@company.com           recipient3@yahoo.com               Received-SPF=pass (domain of ...
Message3                        user3@company.com           recipient4@sbcglobal.net           Received-SPF=pass (domain of ... 
```

我需要能够将 user2@company.com 的所有信息 grep 到另一个变量，并对任意数量的其他重复或非重复地址执行相同操作。

然后，我将获取每个来自地址的变量并将其发送给目标收件人。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:15:17.717

尝试使用 Group-Object，然后您可以针对每个分组运行 foreach 循环：

```
$Grouping = $msgTable | Group-Object -Property From
foreach ($Group in $Grouping)
{
    Write-Host $Group.Name -ForegroundColor "Green"
    $Group.Group | ft -Auto
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:30:11.357

酷运动！这就是我将如何处理它...

> ...我需要能够将 user2@company.com 的所有信息 grep 到另一个变量

```
$patternMatches = $msgTable | select-string -pattern 'user2@company.com' 
```

> ...并对任意数量的其他重复或非重复地址执行相同操作。

```
$uniqueEmails = $msgTable | Select-Object From -Unique

foreach ($email in $uniqueEmails) {
    $patternMatches = $msgTable | Select-Object -property * | select-string -pattern $email
} 
```

我知道这并不完全正确，但它应该将您推向正确的方向。

# iis - .CFM（仅大写）页面的 CF10 中的空白页

> ID：14362366
> 
> 赞同：4
> 
> 时间：2013-01-16T15:51:28.373
> 
> 标签：iis, coldfusion, iis-7, coldfusion-10

我们有多个带有 IIS7 和 ColdFusion 的服务器。有些是CF9，有些是CF10。以“.cfm”（小写）结尾的 Coldfusion 页面在两者上都能正确呈现。但是，如果您输入“.CFM”（大写）作为浏览器 url，Coldfusion 10 服务器会返回一个空白页面。（页面源也为空） Coldfusion 9 服务器正常呈现页面。有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:13:19.340

Coldfusion 10 在文件名方面应该区分大小写。

[http://forums.adobe.com/message/4524330](http://forums.adobe.com/message/4524330)

CF10 区分大小写错误 ( [#3199281](https://bugbase.adobe.com/index.cfm?event=bug&id=3199281) & [#3199283](https://bugbase.adobe.com/index.cfm?event=bug&id=3199283) )

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T16:29:19.627

ColdFusion 10 的内置 Tomcat Web 服务器处理区分大小写的方式与旧的 JRun 内置 Web 服务器不同。基本上，它遵循 RFC 并且区分大小写。

请参阅 CF 10 错误库中的此错误报告：[https ://bugbase.adobe.com/index.cfm?event=bug&id=3199283](https://bugbase.adobe.com/index.cfm?event=bug&id=3199283)

可以在此处找到更多详细信息：[https ://docs.google.com/document/d/1k37HvumHZQTThJQRk99rIttc5k8ykm2BBVmJ4XZIjpY/edit](https://docs.google.com/document/d/1k37HvumHZQTThJQRk99rIttc5k8ykm2BBVmJ4XZIjpY/edit)

# php - 使用 PHP 更新 MySql 中的多行

> ID：14362368
> 
> 赞同：0
> 
> 时间：2013-01-16T15:51:31.133
> 
> 标签：php, mysql, xml, sql-update

我有这个脚本可以读取解析的 xml（外部）：

```
<?php
//mysql connection
$con2 = mysql_connect("localhost","username","password");
if (!$con2)
  {
  die('Could not connect: ' . mysql_error());
  }

$selectdb = mysql_select_db("test_db", $con2);
if (!$selectdb)
  {
 die('Database not used: ; ' . mysql_error());
  }

//simplexml load xml file
   $jackpots =  simplexml_load_file('https://www.123.com/xmldata.xml');

//loop through parsed xmlfeed and print output
      foreach ($jackpots->jackpot as $jackpot) {

                     foreach ($jackpots->jackpot as $jackpot) {
                     printf("gameId: %s\n", $jackpot->gameId);
                     printf("gameName: %s\n", $jackpot->gameName);
                     printf("amount: %s\n", $jackpot->amount);
                     printf("currency: %s\n", $jackpot->currency);
//insert into databse
foreach ($jackpots->gameId as $jackpot) {
                               mysql_query("UPDATE my_table SET amount=$jackpot->amount")
                               or die(mysql_error());}
//show updated records
            printf ("Records inserted: %d\n", mysql_affected_rows());
            }
        }
//close connection
 mysql_close($con2);

?> 
```

显然，我在数据库中有一个表（my_table），其中包含所有列（gameId、gameName、金额和货币）。

我需要为每个“gameId”列更新“金额”列。当我运行下面的脚本时，我得到了更新，但所有的“金额”都是一样的。请给我一些支持好吗？我的错误在哪里？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:53:50.717

您必须在查询中包含 gameId！

像这样：

```
mysql_query("UPDATE my_table SET amount=$jackpot->amount WHERE gameId = '".$jackpot->gameId."'") 
```

但是，当您像这样将硬编码的变量插入到查询中时要小心。您应该在之前转义变量以避免 SQL 注入漏洞。研究 PHP 框架（如 Code Igniter、Zend 或 Laravel）可能会很好，以便在这些任务中为您设置一些基本功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T15:53:19.340

您需要一个`where`针对特定行的语句，您的语句每次在循环中都会更新整个表，这就是为什么您获得相同数量的原因，即循环中的最后一个数量

> mysql_query("UPDATE my_table SET amount=$jackpot->amount WHERE gameId=$jackpot->gameId);

# hadoop-streaming - AWS 弹性 MapReduce 流式传输。使用嵌套文件夹中的数据作为输入

> ID：14362372
> 
> 赞同：0
> 
> 时间：2013-01-16T15:51:49.530
> 
> 标签：hadoop-streaming, elastic-map-reduce

我的数据位于结构 s3n://bucket/{date}/{file}.gz 中，包含 > 100 个文件夹。如何设置流式传输作业并将它们全部用作输入？指定 s3n://bucket/ 没有帮助，因为节点是文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T18:52:15.363

Specify s3n://bucket/*/ as input and it should work fine.

# c# - 我可以在 NHibernate 中使用实体代理接口的基本类型安全地查询吗？

> ID：14362374
> 
> 赞同：5
> 
> 时间：2013-01-16T15:51:55.330
> 
> 标签：c#, nhibernate

我目前处于多个相当复杂的系统的设计阶段，这些系统共享共同的功能（例如，两者都有客户关系管理（CRM）和销售功能）。因此，我试图提取域的公共部分并在两个应用程序中重用它。

假设我有应用程序 A 和应用程序 B，它们都使用 CRM 功能。在大多数情况下，CRM 功能是相同的，但两个应用程序都喜欢增加一些与 CRM 相关的东西。

我想创建一个实现 CRM 系统基本版本的库，例如将客户抽象为

```
interface ICustomer {
  string CustomerNumber {get;set;}
} 
```

基础库有 ICustomer 的基本实现

```
class Customer: ICustomer 
```

应用程序 A 现在可以增强它：

```
interface IACustomer : ICustomer {
    bool ReceivesNewsletter {get;set;}
}

class ACustomer : Customer, IACustomer {
   ...
} 
```

同样，B 也有自己的变体：

```
interface IBCustomer : ICustomer {
    string NickName {get;set;}
}

class BCustomer : Customer, IBCustomer {
    ....
} 
```

出于抽象的目的，我从不在基础库中实例化具体类型，而是使用工厂或 DI 容器，例如：

```
interface ICrmFactory {
    ICustomer CreateCustomer();
} 
```

A 和 B 相应地实现工厂，以便分别创建 ACustomers 或 BCustomers。

这是我的意思的UML图（未显示应用程序B）： ![应用程序设计](../Images/79c9a23315bb720ca3c30e08439c9144.png)

对于持久性，我使用 NHibernate。A 和 B 都提供自己的映射（按代码映射）以包含额外的属性。另外，A 定义 IACustomer 为 ACustomer 的代理类型，B 定义 IBCustomer 为 BCustomer 的代理类型。

我现在可以使用 NHibernate 来处理 A 和 B 中的实体，例如 A

```
session.QueryOver<ACustomer>()
    .Where(c=>c.ReceivesNewsletter)
    .List() 
```

现在假设我想对基础库中的客户做一些事情（例如在某种服务对象中）。我刚刚制作了一个非常简单的版本的原型，到目前为止这似乎工作正常：

```
session.QueryOver<ICustomer>()
   .Where(c => c.CustomerNumber == "1234ABC")
   .List() 
```

也就是说，我可以在QueryOver中使用特定实体的代理类型的基类，NHibernate会创建正确的查询，例如在A中：

```
SELECT
    this_.Id as Id0_0_,
    this_.CustomerNumber as Customer2_0_0_,
    this_.ReceivesNewsletter as Receives3_0_0_ 
FROM
    ACustomer this_ 
WHERE
    this_.CustomerNumber = @p0;
@p0 = '1234ABC' [Type: String (4000)] 
```

## 我的问题

这些查询会始终按预期工作吗？我可以在基本库的查询中始终安全地使用代理接口的基本类型吗？NHibernate 是否总能找到“正确”的实体类型和要检索的表？或者是否会在某些情况下对查询效率产生不利影响 b/c NHibernate 需要进行猜测工作？在这种情况下我应该注意的任何其他陷阱？

我在文档中找不到有关此的信息。这种方法可以让我巧妙地将某些域的公共部分移动到他们自己的基础库中，但我想确保它有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:50:04.203

我认为这种情况没有问题。特别是因为在每个应用程序中只有一个 ICustomer 实现。

即使您对每个应用程序都有多个实现，您也可能会遇到按 id 加载的一些问题（session.Load(42)，因为可能有多个具有该 id 的客户，具体取决于您的映射）。但是接收客户列表的查询仍然有效。

当我过去研究与 NHibernate 类似的问题时，我阅读了这篇文章 - 它谈论的是派生基类而不是接口，但它是相同的想法：[http ://codebetter.com/jameskovacs/2011/02/ 16/getload-polymorphism-in-nhibernate-3/](http://codebetter.com/jameskovacs/2011/02/16/getload-polymorphism-in-nhibernate-3/)

NHibernate 不会猜测工作 - 在初始化时，它会为任何给定类型构建所有映射的存储，当您为任何类型编写查询时，它会找到它映射的正确类型，从它继承并相应地查询.

# c++ - ftime() 和 time() C++ 有什么区别

> ID：14362376
> 
> 赞同：3
> 
> 时间：2013-01-16T15:52:00.637
> 
> 标签：c++, time

`ftime()`谁能解释和之间是否有区别`time()`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T15:55:44.620

`ftime()`是一个（已弃用）POSIX 函数，用于获取自纪元以来的秒数和毫秒数，`time()`是 ISO C（并且，多亏了 ISO C++）函数，用于获取自纪元以来的秒数。

[`ftime(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/ftime.3.html)从手册页引用：

> 此功能已过时。不要使用它。如果以秒为单位的时间足够，则可以使用 time(2)；gettimeofday(2) 给出微秒；clock_gettime(2) 提供纳秒，但没有广泛使用。

由于您正在编写 C++，因此请考虑使用[`std::chrono`](http://en.cppreference.com/w/cpp/chrono)C++11，这是在 C++ 中处理时间间隔的本机方式。

# dynamics-crm-2011 - CRM 2011：在条件下启用/禁用功能区按钮

> ID：14362378
> 
> 赞同：1
> 
> 时间：2013-01-16T15:52:05.020
> 
> 标签：dynamics-crm-2011, dynamics-crm

我是 CRM 新手，我有一个退出功能区按钮。我想在条件下禁用它（Field1 是否为空）。

到目前为止，我已经创建了一个新的解决方案并包含了所需的实体。导出解决方案并尝试更改 configuration.xml。

我试图在 . 但没有任何运气。

谁能帮我举个例子。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:11:13.893

不要手动编辑它。使用[可视功能区编辑器工具](http://crmvisualribbonedit.codeplex.com/)。比手动编辑 xml 更容易处理。

如果您想设置一个按钮以在 new_field1 （**大小写很重要**，因此请确保它与您的字段的实际名称是正确的）不为空时启用，您将执行以下操作：

1.  打开功能区编辑器
2.  连接到您的组织
3.  使用要启用/禁用的功能区按钮选择您的实体
4.  点击你的按钮
5.  单击启用规则选项卡
6.  在字段文本框中输入与 CRM 中解决方案的自定义部分中显示的字段名称**完全相同的字段名称。**
7.  输入“null”（不带引号）作为值。小写。
8.  跳过默认值（如果您有一些字段不存在的自定义表单，您可能希望给它一个默认值）
9.  将反转结果更改为真。
10.  单击最顶部的“保存”按钮。（不要单击功能区主选项卡上的保存按钮）
11.  验证它是否正在部署和发布。
12.  测试一下。

## 编辑：对系统功能区使用功能区工作台

我从未使用过它，但[Ribbon Workbench](http://ribbonworkbench.uservoice.com/knowledgebase/articles/71374-1-getting-started-with-the-ribbon-workbench)说它可以自定义系统按钮。

# algorithm - 生成从 0 到 n 的整数的无状态伪随机排列？

> ID：14362379
> 
> 赞同：2
> 
> 时间：2013-01-16T15:52:05.280
> 
> 标签：algorithm, math

[问题由此](https://stackoverflow.com/questions/14338350/java-ascii-random-line-file-access-with-state)产生。问题可以表述如下：

> 给定两个正整数 n 和 m，其中 m <= n，有没有办法找到一组数字，它们循环并覆盖从 0 到 n 的所有可能值？

作为一个基本示例，如果我们将 3 作为一个数字，对于`current`0 到 3 之间的任何数字，我们可以计算下一个值：

```
next = (current+3) % 4 
```

这将循环。例如：1 -> 0 -> 3 -> 2 -> 1 等。我“偶然”找到了这个解决方案，它甚至是通用的（`(i + n) % (n + 1)`对于任何`n`），我无法用数学证明它。这有点太明显了。

有没有更好的方法来产生这样的排列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:01:49.040

我不确定您打算`m`在问题中提及什么，或者您如何定义“一组数字”）。但是，获得数字循环的一种方法是使用以下形式的递归（或迭代）：

```
next = f(current) 
```

对于某些函数 f。例如，线性同余 RNG 使用迭代：

```
x = ( a · x + c ) mod m   where 0 < a, c < m 
```

它们并不总是产生从 0 到 m-1 的所有值，但在某些情况下它们会：

```
c and m are relatively prime

a - 1 is divisible by every prime factor of m (not including m)

if m is divisible by 4, a - 1 is divisible by 4. 
```

（这是赫尔-多贝尔定理。）

请注意，a, c == 1 对于任何 m 都满足上述标准。此外，如果 m 是素数，则 a 和 c 的任何值都满足标准，如果 m 是 2 的幂，则任何 a、c 都满足标准，使得 a == 1 mod 4 和 c == 1 mod 2\. 但是，对于某些 m 值（例如 6），唯一有效的 a 值是 1。

这可能不符合“无国籍”的条件，但我认为没有任何严格的无国籍解决方案；例如，您可能会寻找一些功能`f`，例如：

```
f(0), f(1),... f(m-1) 
```

是一个排列

```
0, 1, ..., m-1 
```

这样您就可以通过调用`f(i)`的连续值来生成循环`i`。但这仍然是一个状态，因为你必须记住`i`你使用的最后一个值，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T16:15:15.577

将每个后续数字增加*任何*不共享公共素因数的数字`(n-m+1)`将覆盖序列（例如，对于序列`[2-11]`（10 个数字），增加 3、7 或 9 将起作用，但 2、4、5、6 和 8不会因为它们共享一个公约数（2 和/或 5）

**编辑**

我提出了改组的想法，因为您似乎每次都想增加相同的数字。如果您想要一个真正的“随机”序列，其中 m 在第一个元素中，只需取出 m 并将其放在开头。不过，我不确定这对您有什么帮助。

# prolog - 在序言中附加两个不完整的列表

> ID：14362383
> 
> 赞同：2
> 
> 时间：2013-01-16T15:52:13.440
> 
> 标签：prolog

L = [a, b, c|_]。- 不完整列表的示例。我如何附加其中两个？如何反转不完整的列表？有人可以给我提示如何处理这些问题吗？

追加（[x|t]，y，[x|r]）：-追加（t，y，r）。这就是附加两个列表的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:18:44.263

例如

```
?- A=[1,2,3|X], B=[a,b,c|Y], X=B.
A = [1, 2, 3, a, b, c|Y],
X = B, B = [a, b, c|Y]. 
```

这些模式几乎没有用处。

正如@Daniel Lyons 建议的那样，您也可以使用 append/3

```
?- A=[1,2,3|X], B=[a,b,c|Y], append(A,B,C).
A = [1, 2, 3],
X = [],
B = [a, b, c|Y],
C = [1, 2, 3, a, b, c|Y] 
```

您可以看到这些模式之间的区别：首先*直接*将 X 绑定到 B（1 个推理），而 append 需要多个等于第一个列表长度的推理，才能在绑定之前到达尾部。

[您可以在此处](http://homepages.inf.ed.ac.uk/pbrna/prologbook/node180.html)阅读有关不完整数据结构的更多信息。最有用的模式是[dcg](/questions/tagged/dcg "显示标记为“dcg”的问题")`difference lists`的基础。

# lucene - 相似类中的访问令牌属性

> ID：14362384
> 
> 赞同：1
> 
> 时间：2013-01-16T15:52:16.690
> 
> 标签：lucene, lucene.net

如何在相似性类的自定义实现中访问术语的标记属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:04:51.883

Similarity 类中的 ComputeNorm(...) 方法有一个 FieldInvertState 参数，该参数有一个 AttributeSource 属性，应该可以解决问题。

# android - 带有片段的 Android Socket.IO

> ID：14362387
> 
> 赞同：2
> 
> 时间：2013-01-16T15:52:44.553
> 
> 标签：android, node.js, socket.io

我的应用程序使用 Koush 的 web-sockets/Socket.IO 库仅用于一个片段。（https://github.com/koush/android-websockets）

我在让 Socket.IO 客户端与片段生命周期及其线程正常工作时遇到一些问题。

在大多数情况下，我的片段如下所示：

```
 public class ScoresFragment extends SherlockFragment {

    public SocketIOClient socket;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        createSocket();
        super.onCreate(savedInstanceState);
    }

    @Override
    public void onPause() {
        try {
            this.socket.disconnect();
        } catch (IOException e) {
            e.printStackTrace();
        }
        super.onPause();
    }

    @Override
    public void onResume() {
        socket.connect();
        super.onResume();
    }

    public void createSocket() {
        this.socket = new SocketIOClient(URI.create("http://blah-url"), new SocketIOClient.Handler() {
            //Required methods here
        }
    }

    @Override
    public void onCreateView(LayoutInflater inflater, ViewGroup group, Bundle savedInstanceState) {
        //Everything for the layout here
    }
} 
```

当我尝试断开套接字时，我得到的错误出现在 onPause() 方法中。套接字连接得很好，但是一旦我更改片段，我就会崩溃。

```
致命例外：主要
java.lang.NullPointerException
    在 com.codebutler.android_websockets.SocketIOClient.cleanup(SocketIOClient.java:195)
    在 com.codebutler.android_websockets.SocketIOClient.disconnect(SocketIOClient.java:188)
    在 edu.bgsu.asf.athletics.fragments.ScoresFragment.onPause（ScoresFragment.java:14）

```

我在某处读到我可能不得不对线程保持警惕，并且我可能不得不为此使用处理程序，但是 web-sockets 的 git 页面并没有暗示必须使用类似的东西。提前致谢。

编辑：

SocketIOClient.java 的部分：

```
public void disconnect() throws IOException {
    cleanup(); //Line 188
}

/////////////////////////////////////////////

private void cleanup() {
    mClient.disconnect();
    mClient = null;

    mSendLooper.quit(); //Line 195
    mSendLooper = null;
    mSendHandler = null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-03T06:38:03.053

创建静态套接字并将其连接到您的片段所在的父活动中。之后，当您的片段通过 emit 方法创建订阅时。并在父活动的 onStop 方法中关闭套接字。按照这些说明使其工作。

# ftp - C# - WebRequestMethods.Ftp.DownloadFile 不工作（超时）

> ID：14362388
> 
> 赞同：1
> 
> 时间：2013-01-16T15:52:45.187
> 
> 标签：ftp, download

大家下午好。

我正在尝试从 FTP 服务器下载一些文件，但我不知道为什么这不起作用，因为之前的代码相同。现在，当我运行该服务时，出现以下错误：

> 错误 1053：服务没有及时响应启动或控制请求

我已经尝试过其他**方法**，例如**GetFileSize**甚至是假定在**DownloadFile之后执行的****DeleteFile**并且它们可以工作，但是这个方法不是，我不知道为什么。有任何想法吗？我的代码如下，非常感谢！

 **```
 FtpWebRequest reqFTP;

            reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri(server + file));
            reqFTP.Credentials = new NetworkCredential(username, password);

            reqFTP.KeepAlive = true;
            reqFTP.Method = WebRequestMethods.Ftp.DownloadFile;
            reqFTP.UseBinary = true;
            reqFTP.Proxy = null;
            reqFTP.UsePassive = false;
            reqFTP.Timeout = -1;

            FtpWebResponse response2 = (FtpWebResponse)reqFTP.GetResponse();
            Stream responseStream2 = response2.GetResponseStream();

            FileStream writeStream = new FileStream(folder + file, FileMode.Create);

            int Length = 2048;
            Byte[] buffer = new Byte[Length];
            int bytesRead = responseStream2.Read(buffer, 0, Length);

            while (bytesRead > 0)
            {
                writeStream.Write(buffer, 0, bytesRead);
                bytesRead = responseStream2.Read(buffer, 0, Length);
            }
            writeStream.Close();
            response2.Close();

            try
            {
                string uri2 = server + file;
                Uri serverUri2 = new Uri(uri);
                if (serverUri2.Scheme != Uri.UriSchemeFtp)
                {
                    return;
                }
                FtpWebRequest reqFTP2;
                reqFTP2 = (FtpWebRequest)FtpWebRequest.Create(new Uri(server + file));
                reqFTP2.Credentials = new NetworkCredential(username, password);
                reqFTP2.KeepAlive = false;
                reqFTP2.Method = WebRequestMethods.Ftp.DeleteFile;
                reqFTP2.UseBinary = true;
                reqFTP2.Proxy = null;
                reqFTP2.UsePassive = false;
                FtpWebResponse response3 = (FtpWebResponse)reqFTP2.GetResponse();
                Stream responseStream3 = response3.GetResponseStream();
                response3.Close();
            } 
```**

# network-programming - 环回中的 WinSock UDP 套接字创建顺序。

> ID：14362389
> 
> 赞同：1
> 
> 时间：2013-01-16T15:52:48.243
> 
> 标签：network-programming, udp, winsock

我有一个用于专用 LAN 的网络应用程序。我正在使用环回进行测试。当我在 LAN 上测试时，套接字创建顺序无关紧要。如果我使用环回 127.0.0.1 进行测试，则存在套接字创建排序问题。为什么在回环时会有所不同？

这里有更多细节......

有一台服务器和许多客户端实例。服务器通过 UDP 广播数据。客户端接收数据并处理它。

我需要让网络层不关心服务器或客户端的启动顺序。我的案例很难管理流程创建。应用程序实例应该能够以任何顺序在网络上启动，并且在发送数据时只看到在 UDP 端口上广播的数据。

但是我设置 UDP 套接字的方式有一些东西迫使订购发生。我必须启动客户端，然后启动服务器。如果我在服务器进行 UDP 广播之后启动客户端，则客户端套接字不会接收数据。如果我强制正在运行的服务器实例拆除并重建其 UDP 套接字，突然间所有客户端都开始接收数据。

我创建套接字的方式一定有问题。客户端和服务器代码使用共享函数库来创建 UDP 套接字。所以服务器在 m_fdOut 上发送。客户端的每个实例都在 m_fdIn 上接收。

我在这里做错了什么？

```
SOCKET m_fdIn;
SOCKET m_fdOut;

if ((m_fdIn = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) < 0)
{
    WARNF("socket failed, winsock error %d\n", WSAGetLastError());
    exit(1);
}

if ((m_fdOut = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) < 0)
{
    WARNF("socket failed, winsock error %d\n", WSAGetLastError());
    exit(1);
}

int sockopt = 1;
if (setsockopt(m_fdOut, SOL_SOCKET, SO_BROADCAST, (char *)&sockopt,
     sizeof(sockopt)) < 0)
{
    WARNF("setsockopt failed, winsock error %d\n", WSAGetLastError());
    exit(1);
}

sockopt = readPreference<int>("SOL_RCVBUF", 512*1024);
if (setsockopt(m_fdIn, SOL_SOCKET, SO_RCVBUF, (char *)&sockopt, sizeof(sockopt)) < 0)
{
    WARNF("setsockopt failed, winsock error %d\n", WSAGetLastError());
    exit(1);
}

sockopt = 1;
if (setsockopt(m_fdIn, SOL_SOCKET, SO_REUSEADDR, (char *)&sockopt, sizeof(sockopt)) < 0)
{
    WARNF("setsockopt failed, winsock error %d\n", WSAGetLastError());
    exit(1);
}

sockopt = readPreference<int>("IP_MULTICAST_TTL", 32);
if (setsockopt(m_fdOut, IPPROTO_IP, IP_MULTICAST_TTL, (char *)&sockopt, sizeof(sockopt)) < 0)
{
    WARNF("setsockopt failed, winsock error %d\n", WSAGetLastError());
    exit(1);
}

String destAdd = "255.255.255.255"
int portNumber = 1234;
int n1, n2, n3 ,n4;
if (sscanf(destAddr, "%d.%d.%d.%d", &n1, &n2, &n3, &n4) != 4)
{
    n1 = n2 = n3 = n4 = 255;
}

u_long bcastAddr = (n1<<24) | (n2<<16) | (n3<<8) | n4;
outAddr.sin_family = AF_INET;
outAddr.sin_port = htons(portNumber);
outAddr.sin_addr.s_addr = htonl(bcastAddr);

struct sockaddr_in in_name;
in_name.sin_family = AF_INET;
in_name.sin_addr.s_addr = INADDR_ANY;
in_name.sin_port = htons(portNumber);

if (bind(m_fdIn, (struct sockaddr *)&in_name, sizeof(in_name)) < 0)
{
    WARNF("bind failed, winsock error %d\n", WSAGetLastError());
    exit(1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:49:14.550

所以我确实将实现从 UDP 广播更改为多播。这似乎在环回中起作用，因此多个进程可以共享端口。

# drupal-6 - 删除 drupal 6 password_confirm 中的默认密码值

> ID：14362391
> 
> 赞同：1
> 
> 时间：2013-01-16T15:52:56.450
> 
> 标签：drupal-6, password-confirmation

我有一个电子邮件设置表单的代码，用户将输入电子邮件地址、密码等。

```
$form['mail_settings']['user_pass'] = array(
'#type' => 'password_confirm',
'#description' => t('your password')
);

$form['mail_settings']['user_signature'] = array(
'#type' => 'textfield'
'#description' => t('custm signature')
); 
```

我想要实现的是让用户能够随时更改他的签名，而无需重新输入他的密码。

现在发生的情况是，每次我加载此设置页面时，密码都有一个默认值，密码确认为空白。

因此，如果用户忘记再次输入密码，表单会显示错误。或者更确切地说，它将创建一个验证错误。

这里应该做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:17:18.937

想出了一个不同的解决方案。原来我的浏览器的密码链（保存的密码）负责在密码字段中添加默认值。

解决方案是，如果密码字段为空：使用旧密码更新密码；否则，如果不为空，则使用新密码更新密码。

# java - 在不固定行大小的 UTF-8 编码文本文件上使用 Java 进行二进制搜索

> ID：14362394
> 
> 赞同：1
> 
> 时间：2013-01-16T15:53:03.460
> 
> 标签：java, file-io, binary-search

我有一个制表符分隔的 UTF-8 文件，其中记录按一个字段排序。但是，线的大小不是固定的，所以不能直接跳到特定的位置。如何对此执行二进制搜索？

例子：

第 1 行：阿尔弗雷德·布伦德尔 /m/011hww /m/0crsgs6,/m/0crvt9h,/m/0cs5n_1,/m/0crtj4t,/m/0crwpnw,/m/0cr_n2s,/m/0crsgyh

第 2 行：鲁珀特·谢尔德雷克 /m/011ybj /m/0crtszs

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:57:46.830

你知道你的洞文件包含的字节数。让我们说`n` -> search-interval `[l, r]`with `l=0`, `r=n`。

*   估计你的 search-interval 的中间值`m=(r-l)/2`。在这个位置向左移动尽可能多的字节（右边也可以），直到找到一个制表符（字节==9 *（9 是制表符的 ASCII 和 UTF8 代码）*）[让我们命名这个位置`mReal`]并解码一行开始该选项卡。

*   确定您是否必须在下一个搜索步骤中采用前一个“半”（=> 新搜索间隔是`[l, mReal]`）或第二个“半”（=> 新搜索间隔是`[mReal, r]`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:05:44.723

```
public class YourTokenizer {

    public static final String EPF_EOL = "\t";

    public static final int READ_SIZE = 4 * 1024 ;

    /** The EPF stream buffer. */
    private StringBuilder buffer = new StringBuilder();

    /** The EPF stream. */
    private InputStream stream = null;

    public YourTokenizer(final InputStream stream) {
        this.stream = stream;
    }

    private String getNextLine() throws IOException {
        int pos = buffer.indexOf(EPF_EOL);
        if (pos == -1) {
            // eof-of-line sequence isn't available yet, read more of the file
            final byte[] bytes = new byte[READ_SIZE];
            final int readSize = stream.read(bytes, 0, READ_SIZE);

            buffer.append(new String(bytes));
            pos = buffer.indexOf(EPF_EOL);
            if (pos == -1) {
                if (readSize < READ_SIZE) {
                    // we have reached the end of the stream and what we're looking for still can't be found
                    throw new IOException("Premature end of stream");
                }
                return getNextLine();
            }
        }

        final String data = buffer.substring(0, pos);
        pos += EPF_EOL.length();
        buffer = buffer.delete(0, pos);
        return data;
    }

} 
```

以 main 结尾：

```
final InputStream stream = new FileInputStream(file);
 final YourTokenizer tokenizer = new YourTokenizer(stream);

 String line = tokenizer.getNextLine();
 while(line != line) {
   //do something
   line = tokenizer.getNextLine();
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:05:51.263

您可以跳转到字节的中间。从那里您可以找到该行的结尾，您可以从该点读取下一行。如果您需要向后搜索，则每次取四分之一点或四分之三并找到线。最终，您会将其缩小到一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T15:59:55.413

我想你可以从文件大小中猜出行长

然而，当您甚至无法猜测线条的长度时，我认为最好选择生成随机数。

# ruby-on-rails - Capybara 测试中视图中的实例变量保持为空

> ID：14362406
> 
> 赞同：0
> 
> 时间：2013-01-16T15:53:44.507
> 
> 标签：ruby-on-rails, rspec, capybara, bdd

我有一个页面，当我真正使用它时，它会呈现很多东西，但在 Capybara 中什么都不会呈现。

控制器是这样的：

```
class IdeasController < ApplicationController
  def index
    @ideas = Idea.all
  end 
```

页面的相关位是这样的：

```
<div class="accordion" id="accordion">
  Ideas length is <%= @ideas.length %>.
  <% @ideas.each do |idea| %>
    <div class="accordion-group">
      <div class="accordion-heading">
        <%= link_to(idea.title, '#idea_' + idea.id.to_s, class: "accordion-toggle", data: {toggle: "collapse", parent: "#accordion"}  ) %>
      </div>
      <%= div_for(idea, class: "accordion-body collapse") do %>
          <div class="accordion-inner">
            <%= render :partial => "idea", locals: { :idea => idea } %>
          </div>
      <% end %>
    </div>
  <% end %>
</div> 
```

在开发中查看时，它工作得很好，我在视图中得到了很多东西（我的数据库充满了模拟数据）。但是当我在测试中使用它打开它时`save_and_open_page`，它完全是空的，并显示“想法长度为 0”。

我做了`rake db:test:clone`and `rake db:test:prepare`，但是 nada - 保持空白。

你能帮我弄清楚为什么吗？有没有办法窥视测试数据库并查看是否有任何东西？

**编辑：**受评论的启发，我意识到问题一定是测试环境每次都会刷新东西，所以显然什么都没有。在（显然是被误导的）尝试解决这个问题时，我做了：

```
 before do
    create(:idea)
    visit root_path
    click_link "Log In"
  end 
```

请注意该`create(:idea)`行，它应该触发我的想法工厂并将模拟想法粘贴到数据库中（该工厂与其他测试一起工作正常）。

现在页面说：

内部服务器错误

SQLite3::BusyException: 数据库被锁定: INSERT INTO "users" ("created_at", "email", "name", "provider", "uid", "updated_at") VALUES (?, ?, ?, ?, ? , ?)

这太奇怪了。`Rails s`正在后台运行。

根据评论者的要求，完整的规格如下：

```
require 'spec_helper'

describe "Idea page", js: true do

  subject { page }

  before do
    create(:idea)
    visit root_path
    click_link "Log In"
  end

  context "Single idea" do
    before do
      save_and_open_page
        #click_link('Eligendi sint quod quia alias sed sit vitae repellendus.')
    end

    it { should have_selector('a',text:'Claim') }

  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:15:11.130

使用工厂创建数据是正确的方法。要修复 sqlite 错误，您可能需要增加数据库的超时时间。

为此，在`config/database.yml`

找到`test:`环境并设置

`timeout:`

为更大的值。正如问题[SQLite3::BusyException所建议的那样](https://stackoverflow.com/questions/78801/sqlite3busyexception)

之后，确保`spec/spec_helper.rb`您具有以下行：

```
 config.use_transactional_fixtures = false 
```

并且您正在使用诸如 database_cleaner 之类的东西来保持您的测试数据库在测试之间保持清洁。

# php - .htaccess 在 Apache2 上不起作用

> ID：14362407
> 
> 赞同：1
> 
> 时间：2013-01-16T15:53:49.367
> 
> 标签：php, apache, .htaccess, magento, mod-rewrite

我正在尝试进行 url 重写，启用了 mod_rewrite，我确定我的 .htaccess 文件很好，从未接触过 apache2.conf，我的 httpd.conf 是空的，并且在站点可用时，我的默认文件已在线修改7 从 AllowOverride None 到 AllowOverride All。

我的 .htaccess 文件仍然不起作用。

**.htaccess 文件**

```
############################################
## uncomment these lines for CGI mode
## make sure to specify the correct cgi php binary file name
## it might be /cgi-bin/php-cgi

#    Action php5-cgi /cgi-bin/php5-cgi
#    AddHandler php5-cgi .php

############################################
## GoDaddy specific options

#   Options -MultiViews

## you might also need to add this line to php.ini
##     cgi.fix_pathinfo = 1
## if it still doesn't work, rename php.ini to php5.ini

############################################
## this line is specific for 1and1 hosting

    #AddType x-mapp-php5 .php
    #AddHandler x-mapp-php5 .php

############################################
## default index file

    DirectoryIndex index.php

<IfModule mod_php5.c>

############################################
## adjust memory limit

#    php_value memory_limit 64M
    php_value memory_limit 256M
    php_value max_execution_time 18000

############################################
## disable magic quotes for php request vars

    php_flag magic_quotes_gpc off

############################################
## disable automatic session start
## before autoload was initialized

    php_flag session.auto_start off

############################################
## enable resulting html compression

    #php_flag zlib.output_compression on

###########################################
# disable user agent verification to not break multiple image upload

    php_flag suhosin.session.cryptua off

###########################################
# turn off compatibility with PHP4 when dealing with objects

    php_flag zend.ze1_compatibility_mode Off

</IfModule>

<IfModule mod_security.c>
###########################################
# disable POST processing to not break multiple image upload

    SecFilterEngine Off
    SecFilterScanPOST Off
</IfModule>

<IfModule mod_deflate.c>

############################################
## enable apache served files compression
## http://developer.yahoo.com/performance/rules.html#gzip

    # Insert filter on all content
    ###SetOutputFilter DEFLATE
    # Insert filter on selected content types only
    #AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript

    # Netscape 4.x has some problems...
    #BrowserMatch ^Mozilla/4 gzip-only-text/html

    # Netscape 4.06-4.08 have some more problems
    #BrowserMatch ^Mozilla/4\.0[678] no-gzip

    # MSIE masquerades as Netscape, but it is fine
    #BrowserMatch \bMSIE !no-gzip !gzip-only-text/html

    # Don't compress images
    #SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary

    # Make sure proxies don't deliver the wrong content
    #Header append Vary User-Agent env=!dont-vary

</IfModule>

<IfModule mod_ssl.c>

############################################
## make HTTPS env vars available for CGI mode

    SSLOptions StdEnvVars

</IfModule>

<IfModule mod_rewrite.c>

############################################
## enable rewrites

    Options +FollowSymLinks
    RewriteEngine on

############################################
## you can put here your magento root folder
## path relative to web root

    #RewriteBase /magento/

############################################
## workaround for HTTP authorization
## in CGI environment

    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

############################################
## always send 404 on missing files in these folders

    RewriteCond %{REQUEST_URI} !^/(media|skin|js)/

############################################
## never rewrite for existing files, directories and links

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l

############################################
## rewrite everything else to index.php

    RewriteRule .* index.php [L]

</IfModule>

############################################
## Prevent character encoding issues from server overrides
## If you still have problems, use the second line instead

    AddDefaultCharset Off
    #AddDefaultCharset UTF-8

<IfModule mod_expires.c>

############################################
## Add default Expires header
## http://developer.yahoo.com/performance/rules.html#expires

    ExpiresDefault "access plus 1 year"

</IfModule>

############################################
## By default allow all access

    Order allow,deny
    Allow from all

###########################################
## Deny access to release notes to prevent disclosure of the installed Magento version

    <Files RELEASE_NOTES.txt>
        order allow,deny
        deny from all
    </Files>

############################################
## If running in cluster environment, uncomment this
## http://developer.yahoo.com/performance/rules.html#etags

    #FileETag none 
```

**apache2.conf**

```
#
# Based upon the NCSA server configuration files originally by Rob McCool.
#
# This is the main Apache server configuration file.  It contains the
# configuration directives that give the server its instructions.
# See http://httpd.apache.org/docs/2.2/ for detailed information about
# the directives.
#
# Do NOT simply read the instructions in here without understanding
# what they do.  They're here only as hints or reminders.  If you are unsure
# consult the online docs. You have been warned.  
#
# The configuration directives are grouped into three basic sections:
#  1\. Directives that control the operation of the Apache server process as a
#     whole (the 'global environment').
#  2\. Directives that define the parameters of the 'main' or 'default' server,
#     which responds to requests that aren't handled by a virtual host.
#     These directives also provide default values for the settings
#     of all virtual hosts.
#  3\. Settings for virtual hosts, which allow Web requests to be sent to
#     different IP addresses or hostnames and have them handled by the
#     same Apache server process.
#
# Configuration and logfile names: If the filenames you specify for many
# of the server's control files begin with "/" (or "drive:/" for Win32), the
# server will use that explicit path.  If the filenames do *not* begin
# with "/", the value of ServerRoot is prepended -- so "foo.log"
# with ServerRoot set to "/etc/apache2" will be interpreted by the
# server as "/etc/apache2/foo.log".
#

### Section 1: Global Environment
#
# The directives in this section affect the overall operation of Apache,
# such as the number of concurrent requests it can handle or where it
# can find its configuration files.
#

#
# ServerRoot: The top of the directory tree under which the server's
# configuration, error, and log files are kept.
#
# NOTE!  If you intend to place this on an NFS (or otherwise network)
# mounted filesystem then please read the LockFile documentation (available
# at <URL:http://httpd.apache.org/docs/2.2/mod/mpm_common.html#lockfile>);
# you will save yourself a lot of trouble.
#
# Do NOT add a slash at the end of the directory path.
#
#ServerRoot "/etc/apache2"

#
# The accept serialization lock file MUST BE STORED ON A LOCAL DISK.
#
LockFile ${APACHE_LOCK_DIR}/accept.lock

#
# PidFile: The file in which the server should record its process
# identification number when it starts.
# This needs to be set in /etc/apache2/envvars
#
PidFile ${APACHE_PID_FILE}

#
# Timeout: The number of seconds before receives and sends time out.
#
Timeout 300

#
# KeepAlive: Whether or not to allow persistent connections (more than
# one request per connection). Set to "Off" to deactivate.
#
KeepAlive On

#
# MaxKeepAliveRequests: The maximum number of requests to allow
# during a persistent connection. Set to 0 to allow an unlimited amount.
# We recommend you leave this number high, for maximum performance.
#
MaxKeepAliveRequests 100

#
# KeepAliveTimeout: Number of seconds to wait for the next request from the
# same client on the same connection.
#
KeepAliveTimeout 5

##
## Server-Pool Size Regulation (MPM specific)
## 

# prefork MPM
# StartServers: number of server processes to start
# MinSpareServers: minimum number of server processes which are kept spare
# MaxSpareServers: maximum number of server processes which are kept spare
# MaxClients: maximum number of server processes allowed to start
# MaxRequestsPerChild: maximum number of requests a server process serves
<IfModule mpm_prefork_module>
    StartServers          5
    MinSpareServers       5
    MaxSpareServers      10
    MaxClients          150
    MaxRequestsPerChild   0
</IfModule>

# worker MPM
# StartServers: initial number of server processes to start
# MinSpareThreads: minimum number of worker threads which are kept spare
# MaxSpareThreads: maximum number of worker threads which are kept spare
# ThreadLimit: ThreadsPerChild can be changed to this maximum value during a
#              graceful restart. ThreadLimit can only be changed by stopping
#              and starting Apache.
# ThreadsPerChild: constant number of worker threads in each server process
# MaxClients: maximum number of simultaneous client connections
# MaxRequestsPerChild: maximum number of requests a server process serves
<IfModule mpm_worker_module>
    StartServers          2
    MinSpareThreads      25
    MaxSpareThreads      75 
    ThreadLimit          64
    ThreadsPerChild      25
    MaxClients          150
    MaxRequestsPerChild   0
</IfModule>

# event MPM
# StartServers: initial number of server processes to start
# MinSpareThreads: minimum number of worker threads which are kept spare
# MaxSpareThreads: maximum number of worker threads which are kept spare
# ThreadsPerChild: constant number of worker threads in each server process
# MaxClients: maximum number of simultaneous client connections
# MaxRequestsPerChild: maximum number of requests a server process serves
<IfModule mpm_event_module>
    StartServers          2
    MinSpareThreads      25
    MaxSpareThreads      75 
    ThreadLimit          64
    ThreadsPerChild      25
    MaxClients          150
    MaxRequestsPerChild   0
</IfModule>

# These need to be set in /etc/apache2/envvars
User ${APACHE_RUN_USER}
Group ${APACHE_RUN_GROUP}

#
# AccessFileName: The name of the file to look for in each directory
# for additional configuration directives.  See also the AllowOverride
# directive.
#

AccessFileName .htaccess

#
# The following lines prevent .htaccess and .htpasswd files from being 
# viewed by Web clients. 
#
<Files ~ "^\.ht">
    Order allow,deny
    Deny from all
    Satisfy all
</Files>

#
# DefaultType is the default MIME type the server will use for a document
# if it cannot otherwise determine one, such as from filename extensions.
# If your server contains mostly text or HTML documents, "text/plain" is
# a good value.  If most of your content is binary, such as applications
# or images, you may want to use "application/octet-stream" instead to
# keep browsers from trying to display binary files as though they are
# text.
#
DefaultType text/plain

#
# HostnameLookups: Log the names of clients or just their IP addresses
# e.g., www.apache.org (on) or 204.62.129.132 (off).
# The default is off because it'd be overall better for the net if people
# had to knowingly turn this feature on, since enabling it means that
# each client request will result in AT LEAST one lookup request to the
# nameserver.
#
HostnameLookups Off

# ErrorLog: The location of the error log file.
# If you do not specify an ErrorLog directive within a <VirtualHost>
# container, error messages relating to that virtual host will be
# logged here.  If you *do* define an error logfile for a <VirtualHost>
# container, that host's errors will be logged there and not here.
#
ErrorLog ${APACHE_LOG_DIR}/error.log

#
# LogLevel: Control the number of messages logged to the error_log.
# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
#
LogLevel warn

# Include module configuration:
Include mods-enabled/*.load
Include mods-enabled/*.conf

# Include all the user configurations:
Include httpd.conf

# Include ports listing
Include ports.conf

#
# The following directives define some format nicknames for use with
# a CustomLog directive (see below).
# If you are behind a reverse proxy, you might want to change %h into %{X-Forwarded-For}i
#
LogFormat "%v:%p %h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" vhost_combined
LogFormat "%h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%h %l %u %t \"%r\" %>s %O" common
LogFormat "%{Referer}i -> %U" referer
LogFormat "%{User-agent}i" agent

# Include of directories ignores editors' and dpkg's backup files,
# see README.Debian for details.

# Include generic snippets of statements
Include conf.d/

# Include the virtual host configurations:
Include sites-enabled/ 
```

**默认@sites-available**

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    DocumentRoot /var/www
    <Directory />
        Options FollowSymLinks
        AllowOverride All
    </Directory>
    <Directory /var/www/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T15:57:47.227

看看这个：

```
<Directory />
    Options FollowSymLinks
    AllowOverride All
</Directory>
<Directory /var/www/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
</Directory> 
```

您已`AllowOverride All`在根目录上启用，但随后在 /var/www/ 上禁用它。我猜你打算使用`Location /`而不是`Directory /`.

附加说明`AllowOverride`必须在一`Directory`节中。`Location`如果`Directory`在`Location`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-13T14:07:12.177

只需点击这里的 debian 拉伸和默认安全选项：

```
/etc/apache2/mods-enabled/userdir.conf 
```

需要

```
AllowOverride All 
```

在里面。

# matlab - 复矩阵乘法

> ID：14362411
> 
> 赞同：0
> 
> 时间：2013-01-16T15:53:59.107
> 
> 标签：matlab, matrix-multiplication

我正在尝试在下面执行此操作，但如果您使用 for 循环，对于大型矩阵来说真的很慢。有人可以帮忙做这个手术吗？我们知道`Y`, `A`,`M`是矩阵并且`mean`是一列。

谢谢

```
Y=zeros(s,y);
for i=1:y
   Y(:,i)=A*(M(:,i)-mean); 
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:55:20.213

```
Y = A * (M - repmat(mean, 1, y)); 
```

# python - 已激活时区支持的 Django 项目中南迁移的 DateTimeField 的默认值

> ID：14362414
> 
> 赞同：7
> 
> 时间：2013-01-16T15:54:09.703
> 
> 标签：python, django, django-south, django-timezone

我正在为启用时区支持的 Django 1.4.3 项目使用 South 0.7.6 创建模式迁移。

架构迁移包括在一个表上添加`DateTimeField`(with )。`auto_now=True`

创建迁移时，South 提示我：

```
The field 'MyTable.my_field' does not have a default specified, yet is NOT NULL.
Since you are adding this field, you MUST specify a default
value to use for existing rows. Would you like to:
 1\. Quit now, and add a default to the field in models.py
 2\. Specify a one-off value to use for existing columns now 
```

如果我不关心现有行的这个值（我只希望迁移成功而没有警告），那么在这里给出的正确一次性值是什么？

到目前为止，我使用了`datetime.datetime.utcnow()`. 但是，在应用迁移时我得到以下信息：

```
C:\Python27\lib\site-packages\django\db\models\fields\__init__.py:808:
RuntimeWarning: DateTimeField received a naive datetime (2013-01-16 00:00:00)
while time zone support is active. 
```

South 似乎没有导入 pytz 或 Django 辅助类，那么我如何在这里给出一个时区感知的默认值呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T16:11:20.917

手动编辑 South 创建的迁移文件并添加：

```
from django.utils import timezone 
```

然后在迁移文件中找到您要添加的字段并将其设置`default`为`timezone.now()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T03:07:48.753

pytz 可用于制作时区感知的日期时间对象。您可以在迁移文件中使用以下内容：

```
import pytz
cn_tz = pytz.timezone('Asia/Shanghai') 
```

然后在你的模型中

```
self.gf('django.db.models.fields.DateTimeField')(auto_now=True, default=datetime.datetime.now(cn_tz), blank=True), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-30T20:59:41.727

我注意到当我在开发机器上运行迁移时，它与我在生产中运行它们时不同。

我在文件顶部的开发机器有

```
 from south_utils import datetime_utils as datetime 
```

它在哪里生成

```
 import datetime 
```

通过用前者替换后者，它解决了我的问题，无需对迁移文件进行额外编辑。

# android - Titanium Studio - Android 中的 FLEXIBLE_SPACE 仿真

> ID：14362418
> 
> 赞同：0
> 
> 时间：2013-01-16T15:54:13.883
> 
> 标签：android, titanium

我在尝试模仿时遇到了一些麻烦`Ti.UI.iPhone.SystemButton.FLEXIBLE_SPACE`，想知道是否有任何建议（或我没有注意到的本机功能）。目前我有一个临时的解决方法来模拟一个工具栏，如果有一个项目，那么它将居中，如果有两个，那么第一个在左边，第二个在右边，如果超过三个，那么每个不是第一个或最后一个的项目都分配给视图中的特定插槽（插槽的宽度取决于项目的数量）。在下面的示例`items`中是一个对象数组`Ti.UI.Button`并且`view`是一个`Ti.Ui.View`对象。（`systemButton`在 Android 上时）是一个字符串，对应于其等效的 iOS '常量'。

```
// Iterate over each item
for (var i in items)
{

    // Continue if a flexible space
    if ('FLEXIBLE_SPACE' === items[i].systemButton)
    {
        continue
    }

    // If there is more than one item
    if (1 !== items.length)
    {

        // Get the key
        var key = parseInt(i, 10)

        // Set the position
        switch (true)
        {

            // First
            case (0 === key):
                items[i].left = 0
                break

            // Last
            case (items.length - 1 === key):
                items[i].right = 0
                break

            // Otherwise if there are more than 3 items
            case (3 < items.length):

                // Get the slot width
                var slot = 100 / items.length

                // If a left position
                if (key < items.length / 2)
                {
                    items[i].left = (slot * key) + '%'
                }

                // Otherwise
                else
                {
                    items[i].right = (slot * (items.length - key - 1)) + '%'
                }

                // Break
                break

        }

    }

    // Add the item to the view
    view.add(items[i])

} 
```

这在某些情况下可以接受（不完美），但并非总是在使用灵活空间时，因为根据定义，它们不适合我分配的固定宽度插槽。

任何帮助将非常感激。

**编辑：**

我应该提到我正在寻找一个动态的解决方案；我知道我可以在每种情况下明确定义左右位置，但我宁愿（如果可能）能够将`Ti.UI.Button`对象数组传递给函数并让它返回一个`Ti.Ui.View`对象作为带有按钮的伪工具栏根据灵活空间的存在定位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:33:23.443

好的，经过一番玩耍后，我想我已经想出了一个解决方案。它确实需要明确定义工具栏和每个项目的宽度，但这不是什么大问题。它的工作原理是从工具栏宽度中减去每个非灵活空间的宽度，然后将剩下的内容除以灵活空间的数量，得出每个灵活空间的宽度。然后每个项目都被迭代并添加到工具栏，除了灵活空间，这些空间用宽度等于灵活空间宽度的空视图切换。下面是实际代码：

```
// Create a toolbar
function createToolbar(data)
{

    // Create the toolbar
    var toolbar = Ti.UI.createView(data)

    // Set the height
    toolbar.height = 44

    // Set the layout
    toolbar.layout = 'horizontal'

    // If there are items
    if (undefined !== toolbar.items)
    {

        // The width
        var width = toolbar.width

        // The number of flexible spaces
        var spaces = 0

        // Iterate over each item
        for (var i in toolbar.items)
        {

            // If not a flexible space then subtract the item width from the total width
            if ('FLEXIBLE_SPACE' !== toolbar.items[i].systemButton)
            {
                width -= toolbar.items[i].width
            }

            // Otherwise increment the number of flexible spaces
            else
            {
                ++spaces
            }

        }

        // Iterate over each item
        for (var i in toolbar.items)
        {

            // If the item is a flexible space
            if ('FLEXIBLE_SPACE' === toolbar.items[i].systemButton)
            {

                // Create the flexible space
                var space = Ti.UI.createView(
                {
                    width: width / spaces
                }
                )

                // Add the space to the toolbar
                toolbar.add(space)

            }

            // Otherwise add the item to the toolbar
            else
            {
                toolbar.add(toolbar.items[i])
            }

        }

    }

    // Return the toolbar
    return toolbar

} 
```

# wpf - 样式列表框，使其看起来像图像（WPF XAML）

> ID：14362420
> 
> 赞同：0
> 
> 时间：2013-01-16T15:54:33.177
> 
> 标签：wpf, listbox

我意识到这是一个奇怪的问题，但有一种疯狂的方法。我正在使用一个框架，它使 ListBox 之间的拖放变得无缝，并且通过实现接口，我将能够很容易地实现我想要的结果。

所以我拥有的是一个列表框（我们称之为列表框 B），我希望能够将它拖到列表框 C。现在这很好，但我不希望列表框 C 看起来像一个列表框——我只是想要它是一个图像。

所以基本上我希望我的 30x30px 图像像一个列表框。实际的项目集合将全部在内部处理，只是为了让用户直观，我希望他们能够将项目从 ListBox B 拖到图像（ListBox C）上。

同样，拖放的行为方式或列表框的行为方式都没有问题 - 这只是一个样式问题。

如何设置 Listbox 的样式，使它看起来根本不像 Listbox - 所以它只是一个图像（将打包在应用程序中）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:57:24.070

如果我理解正确，您需要的是：

```
<ListBox>
   <ListBox.Template>
      <ControlTemplate>
         <Image Source="YourImage.png"/>
      </ControlTemplate>
   </ListBox.Template>
</ListBox> 
```

编辑：

我还是不明白你的说法

> 实际的项目集合将全部在内部处理，只是为了让用户直观，我希望他们能够将项目从 ListBox B 拖到图像（ListBox C）上。

请澄清

# r - 为什么将数值作为因子存储在 R 中？

> ID：14362426
> 
> 赞同：1
> 
> 时间：2013-01-16T15:54:46.343
> 
> 标签：r

> **可能重复：**
> [R 将数据框中的变量解释为因子；它不是](https://stackoverflow.com/questions/14244147/r-interpreting-variable-in-data-frame-as-factor-it-isnt)

我对我用 R 编写的一些代码有疑问，我认为我的问题源于对 R 中的因素的理解不足。

**我想要做什么：**我有一个列号，我想创建另一列 bin 描述（例如 1、2、3 等，对应于 bin1、bin2 等）

这是代码：

```
## import data to data frame
rawData = read.table("Data.csv", sep = ",", header = TRUE)

## reduce socre into bins
rawData["s10_BIN"] = NA
for(i in 1:length(rawData[,"foo"]))
    {
        if(rawData[i,"s10"] > 0 && rawData[i,"s10"] <= .5)
        {
            rawData[i,"s10_BIN"] = 1
        }
        else if(rawData[i,"s10"] > .5 && rawData[i,"s10"] <= 1)
        {
            rawdata[i,"s10_BIN"] = 2
        }
        else if(rawData[i,"s10"] > 1 && rawData[i,"s10"] <= 1.5)
        {
            rawData[i,"s10_BIN"] = 3
        }
        else if(rawData[i,"s10"] > 1.5 && rawData[i,"s10"] <= 2)
        {
            rawData[i,"s10_BIN_BIN"] = 4
        }
        else
            rawData[i,"s10_BIN"] = 0

    } 
```

我不断收到错误

```
1: In Ops.factor(rawData[i, "s10"], 0) : > not meaningful for factors
2: In Ops.factor(rawData[i, "s10"], 0.5) :
  <= not meaningful for factors 
```

有人可以让我了解我所缺少的吗？谢谢！

编辑：这是数据的前 2 行：

```
 rawData[1:2,]
        ID PRODUCT  GROUP     MARKET   s10  CLAIMS   NUM_CLAIMS   s10_BIN
1        1    foo     A        C       NULL    -5          2         NA
2        2    foo     A        D      1.064     1          1         NA 
```

我觉得问题可能是 NULL 值...

# css - 尝试删除第一个分隔符时不显示 css 菜单分隔符

> ID：14362427
> 
> 赞同：0
> 
> 时间：2013-01-16T15:54:50.037
> 
> 标签：css, menu

我有这个代码：

```
<div id="navigation">
        <ul>
            <li><a href="Default.aspx">Open POs</a></li>                              
            <li><a href="WebVisibility.aspx">Visibility</a></li>
            <li><a href="#">Live</a></li>
            <li><a href="#">Reports</a></li>
        </ul>
    </div> 
```

这个CSS代码：

```
 #navigation
    {
        float: left;
        width: 1024px;
        background:#0386ce; 
    }

    #navigation ul
    {
        margin: 0;
        padding: 0;
    }

    #navigation ul li
    {
        list-style-type: none;
        display: inline;    
    }

    #navigation li a
    {
        display: block;
        float: left;
        padding: 1px 5px;
        color:#fff; 
        font-size: 14px;
        border-left: 1px solid #000;
    }

#navigation li a:hover { background:#000; }

    #navigation li a:first-child
    {
        border-left:none;
    } 
```

当尝试使用最后一行 css 代码删除第一个分隔符时，`(...) border-left:none;`它会删除所有分隔符。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:00:03.993

您需要访问第一个`li`. 相反，您正在访问`a`任何`li`in 中的第一个`#navigation`。

试试这个：

```
#navigation li:first-child a
{
   border-left:none;
} 
```

# html - 全 div 宽度的文本框和按钮

> ID：14362428
> 
> 赞同：0
> 
> 时间：2013-01-16T15:54:53.030
> 
> 标签：html, css, forms

嗨，我希望表单宽度为 100%。我希望文本框几乎可以扩展整个页面的宽度，并且在文本框的右侧有一个小的“GO”按钮，所有这些都在同一行（或块）上。

现在我的文本框只有其中文本的宽度（“在此处输入地址”）谢谢！

CSS

```
#search1{
height: 25px;
padding:5px;
padding-left:11px;
display:inline-block;
background-color:#62564A;
width:100%;
} 
```

HTML

```
<div id="search1">
  <form style="margin: 0px; padding: 0px;" name="search_form" action="view" method="get"    onsubmit="codeAddress(); return false">
    <input id="address" style="color:#333" value="Enter an address here" onfocus="if(this.value==this.defaultValue) this.value='';"/>
    <input type="button" value="GO" onclick="codeAddress()"/>
  </form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:03:44.663

默认情况下，如果您不更改表单，则表单为 100%。如果您希望输入字段更长，可以使用 size 属性。

`<input id="address" size="90" style="color:#333" value="Enter an address here" onfocus="if(this.value==this.defaultValue) this.value='';"/>`

[小提琴](http://jsfiddle.net/TQ9Zs/)

或者您可以通过添加以下内容通过 CSS 实现它：

```
#address{
         width:80%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:08:58.193

CSS：

```
#search1{
height: 25px;
padding:5px;
padding-left:11px;
display:inline-block;
background-color:#62564A;
width:100%;
}

#search1 button {width:10%;}
#search1 input#address {width:85%;margin-left:5%;} 
```

HTML

```
<div id="search1">
  <form style="margin: 0px; padding: 0px;" name="search_form" action="view" method="get"    onsubmit="codeAddress(); return false">
    <input id="address" style="color:#333" value="Enter an address here" onfocus="if(this.value==this.defaultValue) this.value='';"/>
    <button type="button" onclick="codeAddress()"> GO </button>
  </form>
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T16:18:22.240

你也可以用一点 Jquery 来做到这一点

CSS：

```
#search1{
    height: 25px;
    padding:5px;
    padding-left:11px;
    display:inline-block;
    background-color:#62564A;
    width:99%;
}
input {
    display: inline-block;
} 
```

查询：

```
$(document).ready(function () {

var $ww = $(window).width();
var $input = $('input#address');

$input.width($ww - 90);

$(window).resize(function() {
    $input.width($(window).width() - 90);
});

}); 
```

我保持 HTML 相同。

`<head>`在您的标签中包含 Jquery 库`<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>`

您可能需要`- 90`根据放置表单的位置将其调整为更低或更高的值。

这是[工作示例](http://jsfiddle.net/Hbn3Q/)的链接。

# php - 包含文件无法正常工作 - url 路由

> ID：14362429
> 
> 赞同：9
> 
> 时间：2013-01-16T15:54:54.973
> 
> 标签：php, nginx, routes, url-routing

我的重定向过程显示了一些疯狂的东西。整个循环的第一部分工作得很好（如果只输入第一个元素）。

可能的网址如下所示：

> www.site.com/category
> 
> www.site.com/category/product

但是也：

> www.site.com/cart

使用 site.com/jeans 就可以了。但是当你点击一个产品时，会发生一些奇怪的事情。

仍然包含 categorie.php 文件（用于显示类别），之后包含 product.php 文件。

与购物车页面 (http://www.site.com/winkelwagen/) 的故事相同。

所以我的包含在某些时候是错误的。Winkelwagen 是我网站上的一个文件夹，它有一个索引文件。它应该包括[http://www.site.com/winkelwagen/index.php](http://www.site.com/winkelwagen/index.php)而不是 categorie.php。

路线代码：

```
<?php

$mult = Array();
if( ! empty( $_SERVER[ 'REQUEST_URI' ] ) ) {
$mult = explode ( '/', substr ( $_SERVER[ 'REQUEST_URI' ], 1 ) );
} else if( ! empty( $_SERVER[ 'ORIG_PATH_INFO' ] ) ) {
$mult = explode ( '/', substr ( $_SERVER[ 'ORIG_PATH_INFO' ], 1 ) );   
} else if( ! empty( $_SERVER[ 'PATH_INFO' ] ) ) {
$mult = explode ( '/', substr ( $_SERVER[ 'PATH_INFO' ], 1 ) );
}

if(empty($mult[0]))
{
include("comingsoon/index.html");
}

if(!empty($mult[0]) && empty($mult[1]))
{
$file = "$mult[0].php";
if($mult[0] == "index2")
{
    include("index2.php");
    die;
}
// if file exists include file
if(file_exists($file))
{
    include($file);
}
else 
{
    $file2 = "/$mult[0]/index.php";

    // if folder index file exists include that file
    if(file_exists($file2))
    {
        include($file2);
    }   
    else {
        // if folder index file doesn't exist, send to category page
        $_GET['q'] = $mult[0];
        include("categorie.php");
    }
}
}
if(!empty($mult[0]) && !empty($mult[1]))
{
if($mult[0] == "add")
{
    $_GET['addid'] = $mult[1];
    include("addtocart.php");
}
elseif($mult[0] == "remove")                    
{
    $_GET['removeid'] = $mult[1];
    include("deletefromcart.php");
}
// check if folder exists (first part of the url)
elseif(is_dir($mult[0]))
{
    // check if file .php (second part of the url) exists
    $filenew = "$mult[0]/$mult[1].php";

    if(file_exists($filenew))
    {
        // include that file
        include("$mult[0]/$mult[1].php");
    }
    else 
    {
        // second file does not exist, do something
    }
}
else 
{
    // folder does not exist so redirect to product page
    $_GET['c'] = $mult[0];
    $_GET['p'] = $mult[1];
    include("product.php");
}
}
?> 
```

我尝试删除 categorie.php 文件，但它仍然显示（比如，到底怎么了？！）

我很高兴得到答案——我完全不知道我做错了什么。

也很高兴知道：当我注释掉路由代码中的 include(categorie.php) 部分时，仍然包含该文件...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-19T02:40:22.417

好的...欢迎使用 Stack Overflow。我首先要说你可以发布链接，试图通过使用“点”来破坏链接实际上**更像是垃圾邮件**，至少对我来说。

我将继续建议您不要使用您的网站和公开该代码。它有各种*安全漏洞*，我不打算详细介绍。但是，假设我很好奇为什么您的用户被称为**d284h1**以及为什么您的站点/主页位于挂载点上`/mnt/home/d284h1`......

注意我的话。**您刚刚在一个非常**公开的网站上发布了您的路由逻辑和您的网站。

* * *

关于你的代码。我真的希望这会破坏你的缩进而不是你的实际源代码。

您缺少一些控制逻辑。其中一些**可能**导致您遇到的文件包含。我还注意到一个可能的错误，您正在测试并包含来自**根目录**的文件，而不是相对于您的站点路径。

***更新：***实际上回顾您的原始代码，绝对引用文件`$file2 = "/$mult[0]/index.php";`导致`categorie.php`加载。并且没有适当的控制逻辑，导致文件中出现多个包含。

* * *

温和地修改你的代码。以下代码不应继续包含任何随机文件。*除非包含的文件自己这样做。*

```
$mult = array();
if( ! empty( $_SERVER[ 'REQUEST_URI' ] ) ) {
    $mult = explode ( '/', substr ( $_SERVER[ 'REQUEST_URI' ], 1 ) );
} else if( ! empty( $_SERVER[ 'ORIG_PATH_INFO' ] ) ) {
    $mult = explode ( '/', substr ( $_SERVER[ 'ORIG_PATH_INFO' ], 1 ) );   
} else if( ! empty( $_SERVER[ 'PATH_INFO' ] ) ) {
    $mult = explode ( '/', substr ( $_SERVER[ 'PATH_INFO' ], 1 ) );
}

if (empty($mult[0])) {
    include("comingsoon/index.html");
    die; #missing
}
# no need to test for !empty($mult[0]), if it were empty, the above die would fire
if (empty($mult[1])) {
    $file = "$mult[0].php";
    if($mult[0] == "index2") {
        include("index2.php");
        die;
    }
    // if file exists include file
    if (file_exists($file)) {
        include($file);
        die; # missing die
    } # no need for else, you just die'd

    # renamed $file2 to $file, don't use temporary variable names in global scope. It clutters your application
    $file = "$mult[0]/index.php";# are you sure you meant to include from the root level?
    // if folder index file exists include that file
    if (file_exists($file)) {
        include($file);
        die;# missing die
    } # no need for else, you just die'd

    // if folder index file doesn't exist, send to category page
    $_GET['q'] = $mult[0];
    include("categorie.php");
    die;# missing die
}

# don't do succesive if/elseif on the same variable, use a switch!
switch($mult[0]) {
    case'add':
        $_GET['addid'] = $mult[1];
        include('addtocart.php');
        break;
    case'remove':
        $_GET['removeid'] = $mult[1];
        include('deletefromcart.php');
        break;
}
if (is_dir($mult[0])) {
    // check if file .php (second part of the url) exists
    $filenew = "$mult[0]/$mult[1].php";
    if(file_exists($filenew)) {
        // include that file
        include("$mult[0]/$mult[1].php");
        die; # missing die
    }
} else {
    // folder does not exist so redirect to product page
    $_GET['c'] = $mult[0];
    $_GET['p'] = $mult[1];
    include("product.php");
} 
```

我的更新被评论了`#`，这绝不是它应该看起来的最终形式。看一下[PSR1](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md)以获得一个温和的想法，关于什么是[编码标准](http://en.wikipedia.org/wiki/Coding_conventions#Examples)。尽管最初感觉很麻烦，但它们旨在帮助并使您更精通寻求终极代码。

我会继续做的其他事情是：

1.  `!empty($var)`与交换`isset($var[0])`，如果 $var 是一个字符串
2.  `include($file);die;`与交换`return include $file;`，如果您在主要范围内
3.  [用三元运算符](http://en.wikipedia.org/wiki/?:)交换 if/elseif 块

实际上关于#3，这里有一个例子：

```
$mult = isset($_SERVER['REQUEST_URI'][0])
        ? $_SERVER['REQUEST_URI']
        : isset($_SERVER['ORIG_PATH_INFO'][0])
            ? $_SERVER['ORIG_PATH_INFO']
            : isset($_SERVER['PATH_INFO'][0])
                ? $_SERVER['PATH_INFO']
                : false
        ;
$mult = $mult
        ? explode('/', substr($mult, 1))
        : array(); 
```

PS 我没有解决您遇到的安全问题，因为我认为您使用的代码不应该被使用。考虑[使用一个框架](http://ellislab.com/codeigniter)或至少[从一个框架中学习](http://symfony.com/)。路由是好的[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)的基石，你走在正确的道路上，更进一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:00:23.543

您能否也对此进行测试并发送您的反馈，我只是重新构建了代码（我使用 if elseif else 使条件更加严格）

```
<?php

$mult = Array();
if( ! empty( $_SERVER[ 'REQUEST_URI' ] ) ) {
$mult = explode ( '/', substr ( $_SERVER[ 'REQUEST_URI' ], 1 ) );
} else if( ! empty( $_SERVER[ 'ORIG_PATH_INFO' ] ) ) {
$mult = explode ( '/', substr ( $_SERVER[ 'ORIG_PATH_INFO' ], 1 ) );   
} else if( ! empty( $_SERVER[ 'PATH_INFO' ] ) ) {
$mult = explode ( '/', substr ( $_SERVER[ 'PATH_INFO' ], 1 ) );
}

if(empty($mult[0]))
{
  include("comingsoon/index.html");
}

elseif(!empty($mult[0]) && empty($mult[1]))
{
  $file = "$mult[0].php";
  if($mult[0] == "index2")
  {
      include("index2.php");
      die;
  }
  else{
    // if file exists include file
    if(file_exists($file))
    {
        include($file);
    }
    else 
    {
        $file2 = "/$mult[0]/index.php";

        // if folder index file exists include that file
        if(file_exists($file2))
        {
            include($file2);
        }   
        else {
            // if folder index file doesn't exist, send to category page
            $_GET['q'] = $mult[0];
            include("categorie.php");
        }
    }
  }
}
elseif(!empty($mult[0]) && !empty($mult[1]))
{
  if($mult[0] == "add")
  {
      $_GET['addid'] = $mult[1];
      include("addtocart.php");
  }
  elseif($mult[0] == "remove")                    
  {
      $_GET['removeid'] = $mult[1];
      include("deletefromcart.php");
  }
  // check if folder exists (first part of the url)
  elseif(is_dir($mult[0]))
  {
      // check if file .php (second part of the url) exists
      $filenew = "$mult[0]/$mult[1].php";

      if(file_exists($filenew))
      {
          // include that file
          include("$mult[0]/$mult[1].php");
      }
      else 
      {
          // second file does not exist, do something
      }
  }
  else 
  {
      // folder does not exist so redirect to product page
      $_GET['c'] = $mult[0];
      $_GET['p'] = $mult[1];
      include("product.php");
  }
}
?> 
```

# symfony - Doctrine 使用其他命名约定生成代码

> ID：14362431
> 
> 赞同：0
> 
> 时间：2013-01-16T15:55:11.873
> 
> 标签：symfony, doctrine, doctrine-orm

我们从 Symfony2 和 Doctrine 开始。我需要从已经存在的表中选择一些数据。这些表和列名不使用 Doctrine 定义的命名约定。

我想知道是否可以在某个地方创建自己的命名方案。主要是，我们使用 PascalCase 表和列名，没有下划线。这会导致实体属性（如 $firstpromotiondatetime），而列是 FirstPromotionDateTime，所以我希望我的属性是 firstPromotionDateTime。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:59:17.590

您不一定需要使用学说的实体生成器来生成新实体，您也可以手动完成。但是，您也可以通过命令行生成实体，然后打开实体类并根据需要更改属性名称。只需确保原则映射（例如使用以下注释）仍然指向数据库中的正确列名。

```
/**
 * @var \DateTime $firstPromotionDateTime
 *
 * @ORM\Column(name="FirstPromotionDateTime", type="datetime")
 */
private $firstPromotionDateTime; 
```

**编辑：**

如果您手动更改属性名称，还要确保您也正确修改了 setter 和 getter。

# java - 使用 uiBinder 在 gwt 中构建表单

> ID：14362432
> 
> 赞同：0
> 
> 时间：2013-01-16T15:55:13.880
> 
> 标签：java, gwt, uibinder

我正在开发一个需要表单的应用程序，但我不知道如何制作它。我正在寻找有用的信息（手册、书籍等），但找不到任何有用的信息。我想制作一个表格，当用户点击按钮时，我想收集表格中的信息。

我正在使用 GWT 和 UiBinder 进行开发。

**InterfazUsuario.ui.xml**：

```
 <!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
    xmlns:g="urn:import:com.google.gwt.user.client.ui"
    >
<g:DockLayoutPanel unit='EM'>
    <g:center>
        <g:FormPanel ui:field="form" action="/InterfazUsuario">
            <g:HTMLPanel height="427px">
                <g:Label text="Idioma:" width="49px"/>
                <g:ListBox visibleItemCount="1" name="lbIdioma" width="118px" ui:field="rellenarIdioma"/>
                <g:Label text="Tipo de Recurso:" width="100px"/>
                <g:ListBox ui:field="rellenarTipoRecurso" name="lbTipoRecurso" visibleItemCount="1" width="118px"/>
                <g:Label text="Motor de Búsqueda:" width="125px"/>
                <g:ListBox name="lbMotorBusqueda" visibleItemCount="1" width="118px"/>
                <g:Label text="Consulta:" width="125px"/>
                <g:TextBox visibleLength="50" name="txtConsulta"/>
                <g:Label text="Número de Recurso:" width="125px"/>
                <g:ListBox name="lbNumRecurso" visibleItemCount="1" width="118px"/>
                <g:Label text="Matriz:" width="125px"/>
                <g:ListBox name="lbMatriz" visibleItemCount="1" width="118px"/>
                <g:Label text="Fila:" width="125px"/>
                <g:ListBox name="lbFila" visibleItemCount="1" width="118px"/>
                <g:Label text="Columna:" width="125px"/>
                <g:ListBox name="lbColumna" visibleItemCount="1" width="118px"/>
                <g:Button width="142px" text="Aceptar" ui:field="btnAceptar"/>
            </g:HTMLPanel>
        </g:FormPanel>
    </g:center>
</g:DockLayoutPanel> 
```

InterfazUsuario.java

```
public class InterfazUsuario extends Composite {

//interface InterfazUsuarioUiBinder extends UiBinder<Widget, InterfazUsuario> {}
interface InterfazUsuarioUiBinder extends UiBinder<DockLayoutPanel, InterfazUsuario> {}

private static final InterfazUsuarioUiBinder binder = GWT.create(InterfazUsuarioUiBinder.class);

RootLayoutPanel root;

@UiField
ListBox rellenarIdioma;

@UiField
ListBox rellenarTipoRecurso;

@UiField
FormPanel form;

@UiField 
Button btnAceptar;

public InterfazUsuario(List<String> idiomas, List<String> tipoRecurso){
    System.out.println("Entra en el constructor");
    // sets listBox
    initWidget(binder.createAndBindUi(this));
    for (Iterator iter = idiomas.iterator(); iter.hasNext();) {
        System.out.println("Entra en el primer for");
        String name = (String) iter.next();
        rellenarIdioma.addItem(name);

    }

    System.out.println(rellenarIdioma.getItemText(1));

    for(Iterator iter = tipoRecurso.iterator(); iter.hasNext();){
        String tipoRec = (String) iter.next();
        rellenarTipoRecurso.addItem(tipoRec);
    }
    System.out.println("vamos a salir del constructor");

    // Add an event handler to the form.
      form.addSubmitHandler(new FormPanel.SubmitHandler() {
          public void onSubmit(SubmitEvent event) {
           Window.alert("The text box must not be empty");

          }
      });

    form.setAction("/InterfazUsuario");
    form.setEncoding(FormPanel.ENCODING_MULTIPART);
    form.setMethod(FormPanel.METHOD_POST);

    form.addSubmitCompleteHandler(new FormPanel.SubmitCompleteHandler() {
         @Override
         public void onSubmitComplete(SubmitCompleteEvent event) 
                  {Window.alert(event.getResults());                    
         }
      });
    System.out.println("despues de llamar al handler");
    System.out.println(form.getMethod());

}

@UiHandler("btnAceptar")
public void onClick(ClickEvent event) {
        form.submit();                  
    }

public InterfazUsuario(){

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:02:23.637

我不认为这就是 GWT 的使用方式。为什么不给每个 ListBox 一个 ui:field 标识符，然后将 ListBoxes 中的值分配给一个共享数据类，然后通过 RPC 将该类发送到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:19:21.510

您可以通过 GWT 团队的示例代码和基于 UiBinder 的单元测试找到大量示例 - [http://code.google.com/p/google-web-toolkit/source/search?q=.ui.xml&origq=。 ui.xml&btnG=搜索+中继](http://code.google.com/p/google-web-toolkit/source/search?q=.ui.xml&origq=.ui.xml&btnG=Search+Trunk)

您还应该逐步浏览[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder)

# javascript - 滚动一个 具体内容

> ID：14362435
> 
> 赞同：1
> 
> 时间：2013-01-16T15:55:21.107
> 
> 标签：javascript, jquery, html

我正在创建一个拆分页面，左侧是菜单，右侧是主要内容。当我单击一个菜单项时，我想将主要内容滚动到该项目。

我找到了 JavaScript `scrollTo()`，它接受偏移参数。

有没有办法确定 a 中特定`<p>`或其他元素的偏移量`<div>`？或者也许还有另一种方法可以在不知道其偏移量的情况下滚动到元素？

**编辑**

感谢您的回复。看来大家都给出了类似的答案。但是，我遇到了这个问题。似乎`offset().top`（或`position().top`）根据当前滚动位置返回不同的值。

我的 jsFiddle 在这里：http: [//jsfiddle.net/gBTW9/4/embedded/result/](http://jsfiddle.net/gBTW9/4/embedded/result/)

如果我滚动到顶部并选择第 4 节，它会按预期工作。但是一旦我滚动，它就会停止正常工作。任何人都可以看到发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:56:38.877

您可以使用获取元素的垂直偏移量`$('p').offset().top`。您可以将它与`scrollTop()`使用它结合起来：

```
$('div').scrollTop($('p').offset().top); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:58:34.927

您需要使用 position() 而不是 offset()。如果你知道那个 id

您可以轻松找到该段落标签的位置

[jQuery：位置（）和偏移量（）之间的区别](https://stackoverflow.com/questions/3202008/jquery-difference-between-position-and-offset)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T15:58:41.780

有 jquery 方法[offset](http://api.jquery.com/offset/)和[position](http://api.jquery.com/position/) stat 可以提供帮助。

还有一个很好的[scrollTo](http://demos.flesler.com/jquery/scrollTo/)插件，它接受元素等等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T16:23:38.030

如果我没有误解，您只需要动画滚动到特定元素，这与我在[投资组合](http://luigimannoni.com "文件夹")中所做的类似。

假设左侧的菜单是固定的，那么只需将页面滚动到您要滚动到的元素：

```
$("html, body").animate({
   scrollTop: $('#element').offset().top 
}); 
```

如果您需要将特定元素移动到另一个元素上，则：

```
$("#element1").animate({
   top: $('#element2').offset().top 
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T14:31:18.860

当您可以使用 HTML 原生属性时，为什么要努力尝试呢？

叫我老派，但我喜欢保持简单。

在您的菜单中：

采用：

```
<ul>
    <li>
        <a href="#Paragraph1">Paragraph 1</a>
    </li>
</ul> 
```

代替

```
<ul>
    <li>Paragraph 1</li>
</ul> 
```

这将使您的部分跳转到等于 Paragraph1 的 # (id)

# ruby - Rspec - Formatter 'specdoc' 未知 - 也许你的意思是'文档'

> ID：14362439
> 
> 赞同：1
> 
> 时间：2013-01-16T15:55:54.623
> 
> 标签：ruby, rspec

我正在开发宝石。有一个名为 /spec 的文件夹，其中包含 2 个文件：

```
#spec_helper.rb
$LOAD_PATH.unshift File.expand_path('../../lib', __FILE__)
require 'my_gem'

#my_gem_spec.rb
describe MyGem do
  it 'should have a version number' do
    MyGem::VERSION.should_not be_nil
  end

  #............
end 
```

然后我运行它

```
rspec spec
/var/lib/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:491:in `add_formatter': Formatter 'specdoc' unknown - maybe you meant 'documentation' or 'progress'?. (ArgumentError)
        from /var/lib/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:30:in `block in configure'
        from /var/lib/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:30:in `each'
        from /var/lib/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/configuration_options.rb:30:in `configure'
        from /var/lib/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/command_line.rb:21:in `run'
        from /var/lib/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:80:in `run'
        from /var/lib/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:17:in `block in autorun' 
```

这是什么意思？如何摆脱它？

这是捆绑包的输出

```
bundle install
Using rake (10.0.3) 
Using diff-lcs (1.1.3) 
Using my_gem (0.0.1) from source at . 
Using rspec-core (2.12.2) 
Using rspec-expectations (2.12.1) 
Using rspec-mocks (2.12.1) 
Using rspec (2.12.0) 
Using bundler (1.3.0.pre.4) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-10T00:40:11.107

卸载所有以前版本的 rspec 及其依赖项。

```
gem uninstall rspec
gem uninstall rspec-core
gem uninstall rspec-mocks
gem uninstall rspec-expectations 
```

[在 gem 文件install rspec](https://github.com/rspec/rspec-rails)中安装正确版本的rspec 。

```
group :development, :test do
  gem 'rspec-rails', '~> 3.0.0'
end 
```

[看到这个答案](http://edx-cs169-1x.stackexchange.com/questions/2638/cs-cs169-2x-oracle-of-bacon-homework-autotest-error/2642#2642)

# telerik - 没有标题栏和关闭按钮的 Radconfirm

> ID：14362444
> 
> 赞同：0
> 
> 时间：2013-01-16T15:56:13.017
> 
> 标签：telerik

如何让 Telerik radconfirm 没有标题栏和确认模板

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:16:09.637

RadWindowManager 有一个 VisibleTitlebar 属性。

您还可以查看 RadNotification 控件，它可能更适合您的需求。

[http://demos.telerik.com/aspnet-ajax/notification/examples/overview/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/notification/examples/overview/defaultcs.aspx)

# sql - 用三个表可视化内部连接

> ID：14362445
> 
> 赞同：2
> 
> 时间：2013-01-16T15:56:13.423
> 
> 标签：sql, join

有人可以解释这两种类型的连接之间的区别以及如何将它们可视化吗？不知道什么时候用哪个...

防爆1

```
select a.f1, a.f2, b.f1, b.f2
from table_a a
inner join table_c c
    on a.id = c.id
inner join table_b b
    on c.id = b.id 
```

前 2

```
SELECT a.au_lname,
       a.au_fname,
       t.title
FROM   authors a
       INNER JOIN titleauthor ta
         ON a.au_id = ta.au_id
       JOIN titles t
         ON ta.title_id = t.title_id
WHERE  t.type = 'trad_cook'
ORDER  BY t.title ASC 
```

使用这个不相关的维恩图——这两个查询返回什么？

![在此处输入图像描述](../Images/5083c68de335e8c7c1796df198992b9b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:57:45.127

它只是意味着您在`SELECT`语句中加入三个表。

*   `authors`与`titleauthor`
*   `titleauthor`与`titles`

要了解有关联接的更多信息，请参阅下面的文章，

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# regex - Sublime 正则表达式替换合并替换文本与捕获组

> ID：14362446
> 
> 赞同：27
> 
> 时间：2013-01-16T15:56:16.927
> 
> 标签：regex, sublimetext2, replace

非常简单的问题只是以前从未遇到过。

假设我正在用不同的值替换一组测试数据中的地址信息。简单的东西，除了在一种情况下我有一个捕获组，后面紧跟一个数字。例如

```
Regex - \d*(/?)\d (.*)
Text -  123 Main Street [should become] 72 Main Street
        1/3 Main Street [should become] 7/2 Main Street
Replace - 7$1B $2  <- works fine
          7$12 $2  <- tries to replace with group $12 rather than $1 
```

任何人都知道如何在不引入任何空格或其他字符的情况下将它们定义为单独的？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-16T16:49:50.737

您可以尝试其他替换`${1}`，例如`$1`

[正则表达式中的替换](http://msdn.microsoft.com/en-us/library/ewy2t5e0.aspx)应该对您有所帮助..

# delphi - 以编程方式从文件主机下载文件

> ID：14362453
> 
> 赞同：2
> 
> 时间：2013-01-16T15:56:37.667
> 
> 标签：delphi, redirect, download, idhttp

我有一些文件上传到文件主机，我想使用 Delphi 以编程方式下载这些文件。它们不需要任何验证码或类似的东西，通常您只需按一个按钮即可获得文件。让我们[以此为例](http://www56.zippyshare.com/v/5862319/file.html)。

现在我想我可以简单地获取立即下载 - 按钮指向的 URL，使用 TIdHTTP.Get 请求并将其保存为 MemoryStream / Filestream / 任何东西。复制链接地址指向[这个站点](http://www56.zippyshare.com/d/5862319/811375/bgAvgTable.png)，当输入到我的浏览器时会弹出下载提示。

```
var
  MemStream: TMemoryStream;
  code: string;       // added for solution
  number: integer;    // added for solution
begin
  with TIdHTTP.Create(nil) do
  try
    HandleRedirects := true;
    System.Delete(code,1,AnsiPos('var n =',code)+7);                  // added
    number := StrToInt(AnsiLeftStr(code,AnsiPos(' ',code)-1)) + 1;    // added
    MemStream := TMemoryStream.Create;
    try
      // Get('http://www56.zippyshare.com/d/5862319/604061/bgAvgTable.png', MemStream);
      Get(TIdURI.URLEncode('http://www56.zippyshare.com/d/5862319/' + IntToStr(number)
        + '/bgAvgTable.png'), MemStream);       // added for solution
      MemStream.SaveToFile('test.png');
    finally
      MemStream.Free;
    end;
  finally
    Free;
  end;
end; 
```

但是，使用检查工具我发现它包含一个 302 重定向到原始站点，因此在执行 GET 请求时我必须设置 HandleRedirects 以避免错误消息，并且我得到原始站点的 HTML 代码而不是我的文件曾怀疑。

所以，我有点困惑 **1）**我以某种方式从浏览器获取文件，尽管 URL 只包含 302 重定向到上一页， **2）**我可以在我的代码中实现相同的目标。你们中的任何人可能会在那里教育我一点吗？;)

**编辑**

感谢您的输入，我可以找到问题，结果是我必须使用的地址是使用随机数生成的，该随机数可以在原始源中找到。因此，首先发布一个获取号码的请求就可以了。我已经相应地编辑了代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:09:05.930

文件托管网站采用不同的技巧来确保您没有进行[盗链](http://altlab.com/hotlinking.html)，并向您展示广告和反击。可以有

*   请求中HTTP Referrer字段的简单分析
*   设置和检查会话唯一 cookie
*   具有隐藏的一次性值的 HTTP 表单，下载按钮不是链接，而是表单的提交操作。
*   生成一次性哈希 URL，并将不同的参数（如您的 IP 和浏览器名称）编码到其中
*   也许更多

像 USDownloader 和 JDownloader 这样的工具做了很多尝试来规避它。

虽然 zippyshare 似乎更加自由，但它仍然无法承受盗链，应该至少采取一些自卫措施。在分析流量时 - 从绝对新鲜的浏览器开始第一次加载 zippyshare 页面并检查所有内容。

当我重新加载页面几次时，我看到数字“604061”不同，并且每次重新加载后链接都会不断变化。您可能必须加载页面，解析链接，设置 HTTP 引用，然后才下载文件。

您没有显示 HTTP 流量日志，因此很难确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:05:35.913

服务器可能正在检查某些跟踪以避免以编程方式下载文件。

它可能是主机管理员想要检查的任何内容，有多种可能性，但最典型的检查是推荐人。

当您在 Web 浏览器中使用链接从一个页面导航到另一个页面时，浏览器会将第一个页面作为引用者添加到请求标头中的第二个页面。

Indy 支持您添加推荐人：

```
IdHTTP1.Request.Referer := 'http://www.any.other.page'; 
```

如果检查失败，服务器脚本只是将输入重定向到下载页面。这样做是为了展示广告或实现文件托管服务的其他目标。

# jquery - 使用 jQuery 遍历表格单元格并附加到 div

> ID：14362457
> 
> 赞同：3
> 
> 时间：2013-01-16T15:56:53.097
> 
> 标签：jquery, html-table, iteration

我在这里真的很困惑..我正在尝试从表中获取值并使用附加函数和`.text`函数将这些值添加到具有类标题的 div 中。问题是，当我使用每个函数时，表中的最后一个值被附加，其余的被跳过。这是我的代码：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#nameGridView tr').each(function() {
            if (!this.rowIndex) return; // skip first row
            var productName = this.cells[0].innerHTML;
            $('.title').each(function (i, obj) {
                $('.title').html(productName);

            });

        });
    });

</script> 
```

请告诉我如何遍历每个表并同时添加，比如说第一个 div 标题，表中的第一个值被附加等等。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T16:02:01.643

用于[`append()`](http://api.jquery.com/append/)附加到元素。也用于`.eq()`获取与行具有相同索引的 div。

```
<script type="text/javascript">
    $(document).ready(function() {
        var $title = $('.title');
        $('#nameGridView tr').each(function(i) {
            if (!this.rowIndex) return; // skip first row
            var productName = this.cells[0].innerHTML;
            $title.eq(i-1).append(productName);            
        });
    });

</script> 
```

# c# - 如何在局部视图中使用不同的模型（@RenderBody() 内的框架）

> ID：14362464
> 
> 赞同：0
> 
> 时间：2013-01-16T15:57:13.427
> 
> 标签：c#, asp.net-mvc-3, razor

我将 Razor（如在 MVC 3 中）用于 facebook 应用程序。
我的**_Layout.cshtml**调用`RenderBody()`返回带有我们要求 facebook 用户提供的数据的正文。如果用户属于某个类别（例如，他是某个组的管理员），我允许他向应用程序发送信息，而普通用户只能查看它。
为此，我在我的**Index.cshtml**中有：

```
@using samuraiscentraltrader.Models
@using Microsoft.AspNet.Mvc.Facebook.Models
@model MyAppUser
@{
    ViewBag.Title = "Home Page";
}
<article class="intro">
<span id="profilePicture">
    @if (Model.ProfilePicture != null && Model.ProfilePicture.Data != null)
    {
        <img src="@Model.ProfilePicture.Data.Url" />
    }
</span>
<h3>Welcome @Model.Name</h3>
@*<label>Email: @Model.Email</label>*@

@if(Model.Groups != null && Model.Groups.Data != null && Model.Groups.Data.Count > 0 &&
    Model.Groups.Data.Any(g=> g.ID=="xxxxxxxxxxxxxxx" && g.Administrator == "True"))
{
    <div>
        @Html.Partial("_Admin")
    </div>
}
else
{
    <p> blah blah blah.</p>
}
</article> 
```

看到线了`@Html.Partial("_Admin")`吗？这是正确的方法吗？

在我的**_Admin.cshtml**中，我有

```
@model samuraiscentraltrader.Hubs.TradeInfoHub

<fieldset>
    <legend>TradeInfoHub</legend>

    <div class="display-label">
        @Html.DisplayNameFor(model => model.msg)
    </div>
    <div class="display-field">
        @Html.DisplayFor(model => model.msg)
    </div>
</fieldset>
<p>
    @Html.ActionLink("Edit", "Edit", new { /* id=Model.PrimaryKey */ }) |
    @Html.ActionLink("Back to List", "Index")
</p> 
```

我遇到了以下异常：
*System.InvalidOperationException：传递到字典中的模型项的类型为“samuraiscentraltrader.Models.MyAppUser”，但该字典需要“samuraiscentraltrader.Hubs.TradeInfoHub”类型的模型项。*

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:02:08.723

周围将其模型类型声明为`@model MyAppUser`部分用途`@model [...].TradeInfoHub`。除非您提供不同的模型，否则模型会向下传递到局部视图。这就是您看到异常的原因。

由于视图需要 TradeInfoHub，您需要提供它：

```
 @Html.Partial("_Admin", /*a TradeInfoHub instance*/) 
```

或者，您可以调用子操作，例如

```
@Html.Action("ShowAdminContent", "AdminTools") 
```

`AdminToolsController.ShowAdminContent`然后将呈现适当的内容。这样原始视图不需要知道“框架”的模型。如果我需要编写这样的页面，我更喜欢子动作方法。

# asp.net - 如何创建分段数据功能

> ID：14362467
> 
> 赞同：0
> 
> 时间：2013-01-16T15:57:25.707
> 
> 标签：asp.net, sql-server, asp.net-mvc, xml-serialization, segment

我的任务是扩展我的 Web 应用程序，为用户提供分段他们自己的数据的能力（即选择他们自己的字段并使用 And/Or 等添加他们的标准），所以我正在创建类似于查询构建器工具但更轻的东西. 我暂时不担心前端，我只是想专注于如何在后端做到这一点。

到目前为止，我唯一的想法是将他们的“段”存储为 XML 文档（在数据库中序列化），其中包含所有列和标准以及它们如何映射到数据库，然后当段被调用时，我有一个映射类它反序列化此 xml 文档并映射字段并为此构建 SQL 查询，然后返回查询结果。我看到的问题是如果数据库设置发生更改（可能），那么我有一个序列化的 XML 文档，它对这些更改一无所知。

有没有人处理过类似的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:01:28.820

我遇到了类似的问题，并在此处发布了一个问题，该问题可能是您自己问题的潜在解决方案。

[具有多个/未知条件的动态 linq 查询](https://stackoverflow.com/questions/6453420/dynamic-linq-query-with-multiple-unknown-criteria)

看看你如何处理它。

# actionscript-3 - 警报和鼠标和按键事件

> ID：14362470
> 
> 赞同：0
> 
> 时间：2013-01-16T15:57:40.400
> 
> 标签：actionscript-3, air, actionscript-2

*当使用mx.controls.Alert.show()*显示警报框并使用鼠标（或 Enter 键）单击它的按钮或单击任意位置时，这些事件也会传递到父窗口，最终触发那里的按钮等。

有没有直接的方法来防止这种情况，比如设置警报实例的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:39:09.360

如果在[show()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Alert.html#show%28%29)`closeHandler`中设置参数，则可以调用[event.stopPropagation()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/Event.html#stopPropagation%28%29)以防止在后续节点上处理事件。

代码看起来像这样：

```
Alert.show("Message", "Title", Alert.OK, parent, onClose);

function onClose(event:CloseEvent):void
{
    event.stopPropagation();
    // Do close stuff here
} 
```

## 编辑

在 Flash Builder 4.6 中添加了 Flex 4.6 的示例：

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx"
    creationComplete="onCreationComplete(event)">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            import mx.controls.Alert;
            import mx.events.CloseEvent;
            import mx.events.FlexEvent;

            private function onCreationComplete(e:FlexEvent):void
            {
                addEventListener(MouseEvent.CLICK, onAppClick);
                showAlert();
            }

            private function showAlert():void
            {
                Alert.show("An Alert", "Alert Title", Alert.OK | Alert.CANCEL, this, onAlertClose);
            }

            private function onAlertClose(e:CloseEvent):void
            {
                e.stopPropagation();
                trace("Alert Close");
            }

            private function onAppClick(e:MouseEvent):void
            {
                trace("App Click");
            }

            private function onBtnClick(e:MouseEvent):void
            {
                trace("Button Click");
            }

        ]]>
    </fx:Script>

    <s:layout>

        <s:VerticalLayout
            gap="12"/>

    </s:layout>

    <s:Button
        label="A Clickable Button"
        click="onBtnClick(event)"/>

    <s:Button
        label="Show Alert"
        click="showAlert()"/>

</s:WindowedApplication> 
```

# c# - 在 DataList 中使用 checkBox 和 textBox

> ID：14362483
> 
> 赞同：3
> 
> 时间：2013-01-16T15:58:05.293
> 
> 标签：c#, asp.net, string, checkbox

我在 asp.net 中创建了一个 DataList -

```
<asp:DataList runat="server" ID="pTextBox">

<ItemTemplate>

<asp:CheckBox ID="CheckBoxPN" runat="server"  Checked='false' />
<asp:TextBox ID="profileTextBox" runat="server" Text='<%# Container.DataItem.ToString() %>'></asp:TextBox>&nbsp;

</ItemTemplate>
</asp:DataList> 
```

这会根据从 webService 传递的字符串值创建复选框和文本框。

`profileTextBox`当用户单击`CheckBoxPN`并使用字符串值在页面上的 DataList 之外填充另一个文本框时，如何获取文本字符串值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:04:57.530

您可以使用 the 的[`CheckedChanged`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.checkedchanged.aspx)事件`CheckBox`并将其`NamingContainer`转换为`DataListItem`，您只需要使用它`FindControl`来查找不同的服务器控件：

```
protected void CheckBoxPN_CheckedChanged(Object sender, EventArgs e)
{
    CheckBox chk = (CheckBox) sender;
    DataListItem item = (DataListItem) chk.NamingContainer;
    TextBox txt = (TextBox) item.FindControl("profileTextBox");
    this.OtherTextBoxOnPage.Text = txt.Text; // here we are
} 
```

顺便说一句，这种方法适用于任何 Web 数据绑定控件（`Repeater`、、`GridView`等）

# jquery - 是什么导致我的 nivo-slider 抛出以下错误？

> ID：14362486
> 
> 赞同：1
> 
> 时间：2013-01-16T15:58:24.270
> 
> 标签：jquery, nivo-slider

抛出的错误是：

Uncaught TypeError: Object [object Object] has no method 'live' Uncaught TypeError: undefined is not a function

它几乎就像 jquery 没有被加载或存在冲突。但是我所有的其他 jquery 方法都在工作。该脚本昨天运行良好，但发生了一些变化，我不确定是什么。

这是网址，

[http://greenbrierupgrade.tcgdevbox.com](http://greenbrierupgrade.tcgdevbox.com)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:29:06.537

[live()](http://api.jquery.com/live/)已弃用并由[on()](http://api.jquery.com/on/)取代。

尝试使用旧版本的 jQuery 或新版本的 nivoslider

# .net - 使用 OptimizeOrgImport 的导入组织抛出 InvalidOperationException

> ID：14362489
> 
> 赞同：1
> 
> 时间：2013-01-16T15:58:40.913
> 
> 标签：.net, active-directory, dynamics-crm, dynamics-crm-4

当我使用 OptimizeOrgImport=1 导入组织时是否有一些陷阱？这种优化在内部是如何工作的？

用例：

1.  导入组织，说“测试”。（工作正常）
2.  导入此组织的另一个副本，例如“test2”（更新用户时失败）
3.  设置 OptimizeOrgImport=0 并导入“test2”（又好了！）

步骤 2 的日志：

```
14:46:22|   Info| Import Organization (test2)
14:46:22|   Info| Update Organization...
14:48:20|   Info| Update Users...
14:48:44|  Error| Import Organization (Name=test2, Id=5b6bf441-650c-e211-b194-00185d111162) failed with Exception:
System.InvalidOperationException: ExecuteNonQuery requires an open and available Connection. The connection's current state is closed.
   at System.Data.SqlClient.SqlConnection.GetOpenConnection(String method)
   at System.Data.SqlClient.SqlConnection.ValidateConnectionForExecute(String method, SqlCommand command)
   at System.Data.SqlClient.SqlCommand.ValidateCommand(String method, Boolean async)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.Crm.CrmDbConnection.InternalExecuteNonQuery(IDbCommand command)
   at Microsoft.Crm.CrmDbConnection.ExecuteNonQuery(IDbCommand command, Boolean impersonate)
   at Microsoft.Crm.CrmDbConnection.SetTransactionIsolationLevel(IsolationLevel il)
   at Microsoft.Crm.CrmDbConnection.Dispose(Boolean disposing)
   at Microsoft.Crm.SqlExecutionContext.Dispose(Boolean disposing)
   at Microsoft.Crm.SqlExecutionContext.Dispose()
   at Microsoft.Crm.Tools.Admin.ImportOrganizationInstaller.Import(Guid organizationId, String organizationUniqueName, String organizationFriendlyName, String sqlServerName, String databaseName, Uri reportServerUrl, String privilegedUserGroupName, String sqlAccessGroupName, String userGroupName, String reportingGroupName, String privilegedReportingGroupName, ICollection`1 users, MultipleTenancy multipleTenancy) 
```

提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:24:32.957

将*OptimizeOrgImport*设置设置为 1 时，您必须考虑以下因素：

> 当您使用注册表项 OptimizeOrgImport 并将此项的值设置为 1 时，**您不能多次导入同一个组织数据库**。如果要多次导入同一个组织数据库，则必须执行以下操作之一：
> 
> *   设置 OptimizeOrgImport = 0 并使用正常的导入过程。
> *   删除组织，然后再次导入组织。

请参阅[http://support.microsoft.com/kb/977867/en](http://support.microsoft.com/kb/977867/en)

每个组织数据库都包含一个表`[dbo].[OrganizationBase]`。它的列之一是`OrganizationId`. 此 GUID 将标识组织。

如果您在 CRM Environment Prod 上备份组织数据库并在 CRM Environment Test 上恢复它，它将保留其 ID。如果您稍后恢复 test2，它的 ID 与您之前导入的 ID 相同。

OptimizeOrgImport 是在 Rollup 8 中引入的，并引入了一个新的导入过程。我假设旧的导入过程 (OptimizeOrgImport = 0) 也会更改组织的 ID。因此，您不会遇到旧导入过程的问题。

# c# - 带括号的 PropertyPath 与绑定

> ID：14362493
> 
> 赞同：1
> 
> 时间：2013-01-16T15:58:46.407
> 
> 标签：c#, wpf, binding

我正在后面的代码中创建绑定。

```
IEnumerable<IDictionary<string, object>> rows = dg1.ItemsSource.OfType<IDictionary<string, object>>();
        IEnumerable<string> columns = rows.SelectMany(d => d.Keys). Distinct(StringComparer.OrdinalIgnoreCase);
        foreach (string column in columns)
        {
            DataGridTemplateColumn col = new DataGridTemplateColumn();
             col.Header = column;

             // Create a factory. This will create the controls in each cell of this
             // column as needed.
             FrameworkElementFactory factory =
                 new FrameworkElementFactory(typeof(TextBox));

              **Binding b = new Binding() { Path=new PropertyPath(column)};**

             b.Mode = BindingMode.TwoWay;
             b.UpdateSourceTrigger = UpdateSourceTrigger.LostFocus;
            // b.StringFormat = "d";
             b.Converter = new MyConverter();
             b.ConverterParameter = dg1;
             factory.SetValue(TextBox.TextProperty, b);
            // factory.AddHandler(TextBox.LostFocusEvent, new RoutedEventHandler(TextBox_LostFocus));
             // Create the template itself, and add the factory to it.
             DataTemplate cellEditingTemplate = new DataTemplate();
             cellEditingTemplate.VisualTree = factory;

             col.CellTemplate = cellEditingTemplate;

             dg1.Columns.Add(col); 
```

现在，如果列的值以一个开头`(`，并且如果它不包含右大括号`)`，那么它会给出以下错误..

> *PropertyPath 中的语法错误“括号不匹配”*

您可以像这样简单地复制它：

```
public Window3()
{
        try
        {
            InitializeComponent();

            Binding b = new Binding() { Path = new PropertyPath("a(") };
        }
        catch (Exception)
        {

            throw;
        }
} 
```

此外，如果`PropertyPath`具有类似`(abc)`then 的值，则绑定也会失败。

避免此类绑定问题的解决方案是什么？

**编辑：**

[这个](https://stackoverflow.com/questions/6720285/how-do-i-escape-a-slash-character-in-a-wpf-binding-path-or-how-to-work-around)答案的任何提示。

# php - $_SERVER['REQUEST_URI'] - 防止 XSS 和其他攻击

> ID：14362494
> 
> 赞同：1
> 
> 时间：2013-01-16T15:58:47.120
> 
> 标签：php, forms, xss

我正在构建一个表单，用户可以将文件上传到我的服务器。上传脚本是 PHP 的并且是安全的，但我不确定我的表单操作有多安全。

目前我在提交时执行以下操作：

```
<form id="apply" method="post" enctype="multipart/form-data" action="<?php echo htmlspecialchars($_SERVER['REQUEST_URI'], ENT_QUOTES, "utf-8"); ?>"> 
```

我已经阅读了 XSS 和 $_SERVER 数组以及如何使用 htmlspecialchars 来保护它。

这够了吗？我应该做点别的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T16:00:55.670

只需使用`action=""`，它将 POST 到当前页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:01:58.760

直接使用 $_SERVER['REQUEST_URI'] 值是不安全的，即使您使用 htmlspecialchars

# javascript - 文件 API FileReader() readAsText 函数不适用于“文件”类型

> ID：14362496
> 
> 赞同：3
> 
> 时间：2013-01-16T15:58:55.750
> 
> 标签：javascript, file-io, fileapi

我为本地文件处理创建了一个测试，但无法让“文件”类型返回 Chrome 或 Firefox 中的任何内容。Chrome 没有给出错误，并且表现得好像从未调用过 FileReader()，而 Firefox 给出了一个奇怪的错误。FileReader() 适用于 Blob 类型。有任何想法吗？请参阅下面的测试代码：

```
<head>

<script language="JavaScript" type="text/javascript">

var ContentString='(empty)';

var reader = new FileReader();
var testBLOB = new Blob(['Test Blob'], { "type" : "text/plain" });
reader.onload = function(event) {ContentString = event.target.result;};
reader.onerror = function(event) {alert('Load error!');};

function WriteContents(Iteration,FileOrBlob) 
{
    if (Iteration==0) 
    {
        if (FileOrBlob==0) 
        {
            try 
            {
            var fileUpload=document.getElementById("inputFile");
            //alert(fileUpload.type);
            reader.readAsText(fileUpload/*, "UTF-8"*/);
            }
            catch(err) {alert(err.message);}
        }
            else
        {
        reader.readAsText(testBLOB/*, "UTF-8"*/);
        }
    }

    document.getElementById("Iteration").innerHTML=Iteration;
    document.getElementById("ContentString").innerHTML=ContentString;
    document.getElementById("error").innerHTML=reader.error;
    document.getElementById("readyState").innerHTML=reader.readyState;
    document.getElementById("result").innerHTML=reader.result;

    setTimeout('WriteContents('+(Iteration+1)+','+FileOrBlob+');',5000);
}

if (window.File && window.FileReader && window.FileList && window.Blob)  {document.write('OK<br>');} else {document.write('Browser Error<br>');}

</script>

</head>

<br>
<input type="file" id="inputFile" name="inputFile" onchange="WriteContents(0,0);">&nbsp;
<input type="button" onclick="WriteContents(0,1);" value="Use Test Blob">
<br><br>
<table border=1>
<tr><td>Iteration</td><td id="Iteration">Choose File or Blob Above (one time only please!)</td></tr>
<tr><td>ContentString</td><td id="ContentString"></td></tr>
<tr><td>error</td><td id="error"></td></tr>
<tr><td>readyState</td><td id="readyState"></td></tr>
<tr><td>result</td><td id="result"></td></tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:07:00.560

在这篇文章中找到了答案：

[文件 API：返回文件引用（对象）或整个文件内容（字符串）？](https://stackoverflow.com/questions/4295226/file-api-returns-file-reference-object-or-whole-file-content-string?rq=1)

您需要访问“文件”的 blob 部分 - 这些行

```
var fileUpload=document.getElementById("inputFile");
reader.readAsText(fileUpload/*, "UTF-8"*/); 
```

应该

```
var fileUpload=document.getElementById("inputFile").files[0];
reader.readAsText(fileUpload/*, "UTF-8"*/); 
```

只有9个字符！！

# quartz-scheduler - 具有 hh:mm 开始/结束时间和每 X 分钟的 java 石英 cron 表达式

> ID：14362497
> 
> 赞同：0
> 
> 时间：2013-01-16T15:58:57.823
> 
> 标签：quartz-scheduler, cronexpression

我正在尝试创建一个 cron 表达式，该表达式将根据我得到的时间以及每 X 分钟触发一次作业。开始/结束时间和分钟间隔都是我从用户那里得到的参数。例如：

开始时间：09:15 结束时间：19:35 分钟间隔：15

我希望工作从 09:15 开始，每 15 分钟触发一次，所以最后一个工作实际上是在 19:30（因为它不能在 19:35 之后）。我的问题是我不知道如何包含开始/结束时间的分钟数..

怎么可能创造出这种表达方式？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:48:11.413

你不需要 CRON，简单的触发器就可以了。查看[*第 5 课：SimpleTrigger*](http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/tutorial-lesson-05)。这应该适用于您的情况：

```
trigger = newTrigger()
    .startAt(nineFifteen)
    .endAt(nineteenThirtyFive)
    .withSchedule(simpleSchedule().withIntervalInMinutes(15))
    .forJob(someJob)
    .build(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:10:24.447

我认为不可能在单个 cron 表达式中满足您的要求，因为每个时间组件（小时/分钟/秒等）都是独立处理的。

也许最简单的方法是每 15 分钟运行一次触发器，并在 09:15 和 19:35 启用/禁用此触发器（例如，使用额外的触发器）。

或者，您可以每 15 分钟触发一次触发器，并在此触发器上附加程序逻辑，在执行任何工作之前检查当前时间是否在 09:15 和 19:35 之间。

# javascript - 检查Thickbox是否打开

> ID：14362498
> 
> 赞同：0
> 
> 时间：2013-01-16T15:59:01.390
> 
> 标签：javascript, thickbox

我正在使用 WP，我使用Thickbox 在自定义页面的后端上传图像。

JS有没有办法检查Thickbox是否打开？

我需要检查这一点，因为我有一个`onbeforeunload`事件（在某些情况下，当用户离开页面时显示警告），但显然我不希望在用户只是在Thickbox 页面之间导航时显示警告。谢谢。

我目前使用的代码 -

```
var bol_submit_clicked = false;
$('input[name="Submit"]').click(function(){
    bol_submit_clicked = true;
});

window.onbeforeunload = function closeEditorWarning(){

    var bol_option_changed = false;

    /** Check to see if the settings warning is displayed */
    if($('#unsaved-settings').css('display') !== 'none'){
        bol_option_changed = true;
    }

    /** Display a warning if the user is trying to leave the page with unsaved settings */
    if(bol_option_changed === true && bol_submit_clicked === false){
        return '';
    }

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:29:10.480

Thickbox 中没有要检查的固有函数，但是查看代码，您应该能够检查 的存在和可见性`#TB_window`：

```
var thickbox_shown = ($('#TB_window').is(':visible')) ? true : false; 
```

或者，尝试计算 的长度`#TB_load`：

```
var thickbox_shown = ($('#TB_load').length > 0) ? true : false;\ 
```

# javascript - 带有原型的面向对象的javascript

> ID：14362499
> 
> 赞同：0
> 
> 时间：2013-01-16T15:59:02.340
> 
> 标签：javascript

我试图更清楚地理解这一点。当我扩展修改Array原型中的每个函数时，调用func（this [i]）如何调用传递给Array.each的函数。

由于函数定义是 function(func) 而 func 是参数。

func =`function(i) { alert(i) }`和因此`func(this[i]) = { function(this[i]) { alert(this[i]) }`吗？

```
Array.prototype.each = function(func) {
  for (var i=0; i<this.length; i++) {
    func(this[i]);
  }
};

[1,2,3].each(function(i) {
  alert(i);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:02:42.500

是的，function(func) 基本上是一个带有参数 'func' 的匿名函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:05:22.537

请注意，JS 中的每个函数都只是一个对象。所以`func`传递给`each`函数的参数是一个对象，它是一个函数。

所以调用`func(aParam)`你得到`func`参数（它实际上是一个函数）并调用它传递相应的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:06:34.520

在您的示例中： func = function(i) { alert(i); }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T16:15:58.867

在对象内部，`this`将假设实例化原型的上下文（在 JS 中，每种类型基本上都是某个原型的对象实例，因此每种类型都有自己的原型，可以从中创建新对象）。因此，在这种情况下，`this`将引用从`Array`原型创建的对象（即`[1,2,3]`）。

将匿名函数传递给每个方法，允许该方法将`i`位置处的元素传递给您传递给它的函数（回调）。

我解释：

```
iter #1: this => [1,2,3] ; i => 0 ; func => (function(i){ alert(i); })(this[i]) => 1
iter #2: this => [1,2,3] ; i => 1 ; func => (function(i){ alert(i); })(this[i]) => 2
iter #3: this => [1,2,3] ; i => 2 ; func => (function(i){ alert(i); })(this[i]) => 3 
```

你可以读`this[i]`为`[1,2,3][i]`.

# google-app-engine - 我可以使用 ndb.key 处理重复属性或结构化属性吗

> ID：14362504
> 
> 赞同：2
> 
> 时间：2013-01-16T15:59:09.727
> 
> 标签：google-app-engine, python-2.7, app-engine-ndb

我尝试使用键来处理重复的属性元素，例如：ndb.Key('Books', 'Programming.one') 但这个键（.one 部分）无效。

下面的示例模型是我的应用模型的简化版本。在这个示例代码中，我在书籍章节和标签之间有依赖关系（使用键）：

```
class Tags(ndb.Model):
    tag = ndb.StringProperty() 
```

示例：标签（id = 'python'，标签 = 'python'）

```
class Books(ndb.Model):
    book = ndb.StringProperty)
    chapters = ndb.StringProperty(repeated = True) 
```

示例：书籍（id = 'Programming', book = 'Programming', chapters = ['one', 'two'])

```
class Dependencies(ndb.Model):
    chapter_key = ndb.KeyProperty()
    tag_keys = ndb.KeyProperty(repeated = True) 
```

例子 ：

```
chapter_key = ndb.Key('Books','Programming.one')
dependency_key = ndb.Key('Dependencies', chapter_key.id())
Dependencies(key = dependency_key, chapter_key = chapter_key, 
                   tag_keys = [ndb.Key('Tags', 'python'), ndb.Key('Tags', 'java')]) 
```

是否可以使用 ndb.Key 来处理重复的属性。在我的代码示例中，chapter_key 无效。我可以使用钩子或属性子类来使其工作吗？

为了使它工作，我可以将有效的 Book Key 与 StringProperty 结合起来来保存章节。

```
book_key = ndb.Key('Books','Programming')
chapter = 'one'
dependency_key = ndb.Key('Dependencies', book_key.id() + '.' + chapter)
Dependencies(key = dependency_key, book_key = book_key, chapter = chapter, 
                   tag_keys = [ndb.Key('Tags', 'python'), ndb.Key('Tags', 'java')]) 
```

但我想从一把钥匙中受益。

我对结构化属性有同样的问题。对于这个问题，重复的 StringProperty 章节被重复的 StructuredProperty 替换，例如：

```
class Chapters(ndb.Model):
    chapter = ndb.StringProperty()
    word_count = ndb.IntegerProperty() 
```

关于我的示例和键的使用：

我在依赖项中使用键，因为依赖项中的键可以引用不同的类型。这些种类不同于 Book like 种类，因为它们没有像 Book chapters 这样的重复属性。我在我的应用程序中使用重复的depends_on_keys，而不是chapter_keys。

在示例中，我还省略了父键。Book like kind 可以有依赖关系，但是在我的应用程序中你找不到实体，它依赖于 Book like kind。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:17:08.580

不，您不能使用密钥来识别实体的一部分。如果您想引用实体的一部分，则需要结合您自己的方案使用键来寻址实体参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:00:51.050

我很好奇，因为上面的代码在 sintax 术语中似乎不正确：

```
tag_keys = [ndb.Key('Tags', 'python', ndb.Key('Tags', 'java'] 
```

您可以使用下面的代码，它对我有用：

```
class SomeModel(ndb.Model):
    pass

class WithKeys(ndb.Model):
    keys=ndb.KeyProperty(SomeModel,repeated=True)

keys=[ndb.Key(SomeModel,i) for i in range(1,10)]

with_keys=WithKeys(keys=keys)

print with_keys.keys 
```

它打印：

```
[Key('SomeModel', 1), Key('SomeModel', 2), Key('SomeModel', 3), Key('SomeModel', 4), Key('SomeModel', 5), Key('SomeModel', 6), Key('SomeModel', 7), Key('SomeModel', 8), Key('SomeModel', 9)] 
```

祝你好运

# objective-c - NSOutlineView 故障

> ID：14362505
> 
> 赞同：1
> 
> 时间：2013-01-16T15:59:10.173
> 
> 标签：objective-c, cocoa, nsoutlineview

在我的应用程序中，我有一个 NSOutlineview 刷新太频繁，并且崩溃，得到以下堆栈跟踪

```
Exception Name: NSInternalInconsistencyException
Description: (null) should not be expanded already!
User Info: (null)

0   CoreFoundation                      0x00007fff918840a6 __exceptionPreprocess + 198
1   libobjc.A.dylib                     0x00007fff96eef3f0 objc_exception_throw + 43
2   CoreFoundation                      0x00007fff91883ee8 +[NSException raise:format:arguments:] + 104
3   Foundation                          0x00007fff9769a6a2 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 189
4   AppKit                              0x00007fff933e19b0 -[NSOutlineView _expandItemEntry:expandChildren:startLevel:] + 1153
5   AppKit                              0x00007fff933c7c42 -[NSOutlineView _uncachedNumberOfRows] + 379
6   AppKit                              0x00007fff93401938 -[NSOutlineView frameOfCellAtColumn:row:] + 66
7   AppKit                              0x00007fff9379f51c -[NSTableViewDynamicToolTipManager dynamicToolTipRectAtPoint:] + 298
8   AppKit                              0x00007fff9385cb9a -[NSViewDynamicToolTipManager _markMovementTrackingInfo] + 142
9   AppKit                              0x00007fff933f5d0a -[NSViewDynamicToolTipManager _restartMovementTracking] + 231
10  AppKit                              0x00007fff933f5b8b -[NSViewDynamicToolTipManager _viewVisibleBoundsChanged] + 526
11  AppKit                              0x00007fff933f58eb -[NSViewDynamicToolTipManager _threadsafeViewVisibleBoundsChanged] + 39
12  AppKit                              0x00007fff9336cda7 -[NSView(NSInternal) _updateTrackingAreas] + 479
13  AppKit                              0x00007fff933f6be8 -[NSOutlineView _updateTrackingAreas] + 99
14  CoreFoundation                      0x00007fff9187ca46 __NSArrayEnumerate + 582
15  AppKit                              0x00007fff9336d090 -[NSView(NSInternal) _updateTrackingAreas] + 1224
16  CoreFoundation                      0x00007fff9187ca46 __NSArrayEnumerate + 582
17  AppKit                              0x00007fff9336d090 -[NSView(NSInternal) _updateTrackingAreas] + 1224
18  AppKit                              0x00007fff9336dded -[NSScrollView _updateTrackingAreas] + 122
19  CoreFoundation                      0x00007fff9187ca46 __NSArrayEnumerate + 582
20  AppKit                              0x00007fff9336d090 -[NSView(NSInternal) _updateTrackingAreas] + 1224
21  CoreFoundation                      0x00007fff9187ca46 __NSArrayEnumerate + 582
22  AppKit                              0x00007fff9336d090 -[NSView(NSInternal) _updateTrackingAreas] + 1224
23  CoreFoundation                      0x00007fff9187ca46 __NSArrayEnumerate + 582
24  AppKit                              0x00007fff9336d090 -[NSView(NSInternal) _updateTrackingAreas] + 1224
25  AppKit                              0x00007fff9336caac _handleInvalidCursorRectsNote + 863
26  CoreFoundation                      0x00007fff9184a9b7 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 23
27  CoreFoundation                      0x00007fff9184a921 __CFRunLoopDoObservers + 369
28  CoreFoundation                      0x00007fff91825d88 __CFRunLoopRun + 728
29  CoreFoundation                      0x00007fff918256b2 CFRunLoopRunSpecific + 290
30  HIToolbox                           0x00007fff96a0f0a4 RunCurrentEventLoopInMode + 209
31  HIToolbox                           0x00007fff96a0ee42 ReceiveNextEventCommon + 356
32  HIToolbox                           0x00007fff96a0ecd3 BlockUntilNextEventMatchingListInMode + 62
33  AppKit                              0x00007fff93292613 _DPSNextEvent + 685
34  AppKit                              0x00007fff93291ed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
35  AppKit                              0x00007fff93289283 -[NSApplication run] + 517
36  AppKit                              0x00007fff9322dcb6 NSApplicationMain + 869 
```

这是我得到的断言，

```
*** Assertion failure in -[MyCustomOutlineView _expandItemEntry:expandChildren:startLevel:], /SourceCache/AppKit/AppKit-1187.34/TableView.subproj/NSOutlineView.m:1309
2013-01-16 21:16:41.346 AppName[4149:303] (null) should not be expanded already! 
```

任何线索我该如何调试它

**编辑场景**

这是客户端 - 服务器应用程序，

```
Client will listen from a Socket in a **thread, and data will come in XML Format**
In the same thread it will Extract the XML Data and Form a NSMutableDictionary & NSMutableArray 

something like this, 

NSMutableArray  *rootArray = will contain all first level of item, 

each element of rootArray will be of type OutlineViewData class, this will contain any additional info whether they are single element or it can be another group item , 

if at all they are group item again there will be an array and so on.. 

**From listen thread i am calling OutlineView reload data over main thread.** 
```

**我在怀疑什么**

事情就是这样发生的，

```
void SocketListenerThread(){

    while ( hasData ){
        if ( xmlOutLineData ){
          pData = Make Outline Data ; // This is modifying the Data which will be  
                                      // display/used by the NSOutlineView 

        }

       [ Call To Reload the NSOutlineView on the main thread ]
    }
} 
```

我期待 NSOutlineView reloadData 正在阻塞调用，但它似乎没有阻塞调用，这可能正在发生，我正在编辑/可能正在删除或添加一些条目到 pData 再次被 NSOutline 委托方法引用以显示 Outlineview，

**有没有办法让 NSOutlineView reloadData 的阻塞行为** 提前谢谢..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T22:45:42.983

`reloadData`仅在 NSOutlineView 中设置一个标志来触发对您的数据源的调用。您的代码基本上是我忙碌的循环，它永远不会返回主程序`runLoop`以实际处理对 GUI（或 NSOutlineView 实例本身）的任何状态更改。

您应该做的是在单独的线程上创建数据并在主线程上调用刷新函数。

您现在在与主线程不同的线程上调用非线程安全代码。

使用类似的东西：
`[myController performSelectorOnMainThread:@selector(refreshOutlineView:) withObject:myDataArray waitUntilDone:YES];`

`refreshOutlineView`应该将新创建的数据添加到数组或您在数据源中使用的任何底层对象。

`myDataArray`包含您创建的数据记录。

然后`reloadData`在该方法中调用。

# jquery - SlabText 用于加载时隐藏然后通过 JS 显示的内容

> ID：14362508
> 
> 赞同：0
> 
> 时间：2013-01-16T15:59:24.180
> 
> 标签：jquery, jquery-plugins

我在即将推出的项目中使用 SlabText ( [http://www.frequency-decoder.com/demo/slabText/](http://www.frequency-decoder.com/demo/slabText/) )，该项目使用 jQuery 即时创建一些内容（即在文档就绪事件之后）。

具体来说，在提交 AJAX 表单后，我想显示一点感谢信息。虽然理论上这一切都相当简单，但 SlabText 并没有以通常很酷的方式处理隐藏的内容。它处理我的所有标题，除了页面加载时隐藏的标题

这是我的代码：

```
<div id="result" class="container hide">
    <div class="row">
        <div class="span7">
            <h2 class="slab">
                <span class="slabtext">Thanks!</span>
            </h2>
        </div>
        <div class="span5">
            <h2 class="slab">
                <span class="slabtext">We'll be in touch</span>
                <span class="slabtext">very soon</span>
            </h2>
        </div>
    </div>
</div> 
```

我正在使用 Twitter 的 Bootstrap 和“隐藏”类将父 div (#result) 设置为`display: none`. 提交表单后，我将这个 div 设置为`display: block`（通过 JS），但没有任何乐趣。我还尝试在我的 JS 函数中包含一行来再次处理slabText（即在更改显示之后）：`$('#result').slabText();`唉，这仍然不起作用。

我创建了一个 JSFiddle 来更好地展示这个问题：http: [//jsfiddle.net/YeZfd/](http://jsfiddle.net/YeZfd/)

我确定我很愚蠢并且缺少一些基本的东西，如果是这样，请提供建议。

感谢您的帮助！乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:21:03.420

在没有看到您的实际代码的情况下，您应该能够将slabText 调用添加到“成功”下的ajax 设置中。如下所示：

```
success: function(data){
    $('#result').slabText();            
}); 
```

有关详细信息，请参阅[.ajax 文档](http://api.jquery.com/jQuery.ajax/)。

**更新 - -**

谢谢你的例子。问题似乎是在`#results`DIV 中，您试图在父容器上运行slabText，而不是实际文本。

改变这个

```
$('#result').slabText(); 
```

对此

```
$('#result .slab').slabText(); 
```

# codeigniter - Codeigniter在幻灯片中嵌套foreach？

> ID：14362511
> 
> 赞同：1
> 
> 时间：2013-01-16T15:59:28.933
> 
> 标签：codeigniter, loops, foreach, nested

我在其他帖子上问这个[https://stackoverflow.com/a/14277726/1670630](https://stackoverflow.com/a/14277726/1670630)但我的问题仍然存在。在 codeigniter 2.1 中，我试图按类别显示频道。因此，如果我有一个名为 Film 的类别，我应该会看到 Film 中的频道列表。我尝试了一个嵌套的 foreach 循环来完成此操作，但似乎无法让它在幻灯片中工作并限制行数。我的模型：

```
<?php

class Pages_model extends CI_Model {

function get_channels_by_categ_tv()
{

  $this->db->select('categories.category_name, channels.channel_name');
  $this->db->from('type_categ');
  $this->db->join('categories', 'categories.category_id = type_categ.category_id');
  $this->db->join('channels', 'channels.channel_id = type_categ.channel_id');
  $this->db->order_by('categories.category_id');
//$this->db->group_by(array('categories.category_id')); 
  $query = $this->db->get();

  if($query->num_rows() == 0)
  {
    #no channels
    return false;
  }

  return $query->result_array();
}

} 
```

我认为这是：

```
<ul class="slides">
   <li>
      <?php $cat_shown = ''; ?>
         <div class="programe-tv_link">
                <?php $cat_show = ''; $cnl_show = '';?>
                <?php foreach ($category_chaneels as $category): ?>
                    <?php
                    if ($cat_show != $category['category_name']) {
                        $cat_show = $category['category_name'];
                        echo '<p>' . $cat_show . '</p>'; 
                    }
                    $cnl_show = $category['channel_name'];
                    echo '<dd><a href=""> >>' . $cnl_show . '</a></dd> '; 
                    ?>    
                <?php endforeach; ?>  
          </div>
     </li>
     <li>
              <div class="programe-tv_link">
                    <p>Arte</p>
                   <dd> <a href="">>> Acasa</a></dd>
                   <dd> <a href="">>> Antena 1</a></dd>
                   <dd> <a href="">>> Pro TV</a></dd>
                </div>
                <div class="programe-tv_link">
                    <p>Music Box</p>
                   <dd> <a href="">>> Acasa</a></dd>
                   <dd> <a href="">>> Antena 1</a></dd>
                   <dd> <a href="">>> Pro TV</a></dd>
                   <dd> <a href="">>> TLC</a></dd>
                </div>
      </li>
  </ul> 
```

我用插图连接图像，![在此处输入图像描述](../Images/4bcfcaeaa368de859b94c8a32cd02139.png)

对不起我的英语，如果你不理解我，请写在这里。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:17:07.490

我的结局代码是这样的。

```
 <div id="programe-tv-slide" class="flexslider">
        <strong>Programe TV</strong>
        <div class="redLine"></div>

        <?php $cat_cnl = array(); 
              $list = array(); 
              $i=1;
                 foreach ($category_chaneels as $option) { 
                    $catname = $option['category_name'];
                    $chlname = $option['channel_name'];

                    $cat_cnl[$catname][$i] = $chlname;
                    $list[$i] = $catname;
              $i++;
                 }; 
        ?>
        <?php 
            $rows = array_chunk($cat_cnl, 4, TRUE);
            foreach ($rows as $row) {  //var_dump($rows);
        ?>

          <ul class="slides">    
            <?php
                echo ('<li>');
                foreach ($row as $category => $channels) {
                    echo '<div class="programe-tv_link">'; 
                    echo '<p>' . $category . '</p>'; 
                        foreach ($channels as $channel) {
                                echo '<dd><a href="">' . $channel . '</a></dd> '; 
                        };
                    echo '</div>'; 
                    };      
                echo ('</li>'); 
            ?>
          </ul>
          <?php }; ?>
    </div> 
```

# maven - SoapUI 步骤覆盖 log4j 设置

> ID：14362513
> 
> 赞同：1
> 
> 时间：2013-01-16T15:59:32.460
> 
> 标签：maven, log4j, soapui, jbehave

我有一个设置，我在 Maven 构建期间运行 JBehave 测试。

测试步骤包括使用 SoapUI Java 类向 Web 服务发送请求。

一切正常，testwise。我的问题是进度的 SoapUI 部分似乎覆盖了 log4j 设置，因此后续的日志调用不会打印到控制台（也不会打印到文件）。

我已经尝试过我打电话的解决方法

```
 ClassLoader loader = this.getClass().getClassLoader();
    URL resource = loader.getResource("log4j.xml");
    PropertyConfigurator.configure(resource); 
```

尝试将配置重置为我原来的配置，但到目前为止没有成功。

Log4j (1.2) 和 SoapUI (4.5.1) 在 pom.xml 中使用普通设置。记录器被创建为 `protected final Log log = LogFactory.getLog(getClass());`

我得到的控制台输出如下：

```
 pool-1-thread-1 16:36:08,212 DEBUG ästeps.LoginSteps:25 - logging in user: testfir
    pool-1-thread-1 16:36:08,213 DEBUG äpages.LoginPage:26 - Create LoginPage
    pool-1-thread-1 16:36:08,985 DEBUG äpages.LoginPage:38 - login user: testfir
    pool-1-thread-1 16:36:10,343 DEBUG äpages.WorkspacePage:36 - creating WorkspacePage
    Givet user testfir has logged in
    16:36:11,634 WARN  [SoapUI] Missing folder [D:\proj\src\test\functional-tests\.\ext] for external libraries
    16:36:11,809 INFO  [DefaultSoapUICore] initialized soapui-settings from [C:\Users\xxx\soapui-settings.xml]
    16:36:12,176 INFO  [WsdlProject] Loaded project from [file:/D:/proj/src/test/functional-tests/src/test/resources/ReceiveCase-soapui.xml]
    16:36:12,640 DEBUG [HttpClientSupport$SoapUIHttpClient] Attempt 1 to execute request
    16:36:12,640 DEBUG [SoapUIMultiThreadedHttpConnectionManager$SoapUIDefaultClientConnection] Sending request: POST /soa-infra/services/default/ReceiveCases/ReceiveCase_v1_0_ep HTTP/1.1
    16:36:13,841 DEBUG [SoapUIMultiThreadedHttpConnectionManager$SoapUIDefaultClientConnection] Receiving response: HTTP/1.1 200 OK
    16:36:13,842 DEBUG [HttpClientSupport$SoapUIHttpClient] Connection can be kept alive indefinitely
    And a case exists
    When case is choosen
    16:36:46,832 DEBUG [SoapUIMultiThreadedHttpConnectionManager$SoapUIDefaultClientConnection] Connection closed
    Then the details are displyed 
```

我期待一个日志输出

> 将案例 ID 设置为：123456

以与“创建登录页面”相同的方式。

无法理解这是为什么以及如何使我的日志条目显示出来。有什么想法吗？

最好的问候，克里斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:36:18.890

设法找到问题的根源。是 Maven 扭曲了文件编码。添加

> ```
>  <configuration>
>       <encoding>UTF-8</encoding>
>       <inputEncoding>UTF-8</inputEncoding>
>       <outputEncoding>UTF-8</outputEncoding>
>       <argLine>-Dfile.encoding=UTF-8</argLine>
>     </configuration> 
> ```

pom文件中的`maven-surefire-plugin`部分解决了我的问题。

/干杯

# git - 以本地子目录的名称扩展 env 变量以用于 repo

> ID：14362515
> 
> 赞同：2
> 
> 时间：2013-01-16T15:59:49.773
> 
> 标签：git, hudson-plugins

我正在尝试使用 GIT 插件在 Hudson 3.0.0 版中基于一些环境变量（例如 BUILD_ID 或 BUILD_NUMBER）配置参数化本地子目录。

当我在作业的配置页面中放置类似“code-$BUILD_ID”的内容时，在“本地 repo 子目录（可选）”字段中，按下“源代码管理”部分中“URL 存储库”字段下的“高级”按钮可见（选择 GIT），结果是字符串按原样获取，而不用实际的构建 ID 替换文本 $BUILD_ID。

代码-${BUILD_ID} 也是如此。

是否可以使用参数化的本地子目录？我需要使用哪个确切的文本？

# php - Facebook PHP SDK（最新 - 16.1.13）和访问令牌

> ID：14362521
> 
> 赞同：-2
> 
> 时间：2013-01-16T16:00:02.050
> 
> 标签：php, facebook-php-sdk, laravel

我有以下代码：

```
public function get_facebook()
    {
        $loginUrl = Helpers::fbLogin();

        if(Input::get('error'))
        {
            Session::flash('failure', 'You need to give permissions.');
            return Redirect::to('signup');
        }
        else
        {
            $facebook = IoC::resolve('facebook-sdk');
            $uid = $facebook->getUser();
            $fbuser = $facebook->api('/me', 'GET');

            $user = User::where('uid', '=', $uid)->or_where('email', '=', $fbuser['email'])->first();

            if(is_null($user)){
                Session::flash('fbuser', $fbuser);
                return Redirect::to('signup');
            } else {
                Auth::login($user);
                return Redirect::to('/');
            }
        }

        return Redirect::to($loginUrl);
    } 
```

但我收到这条消息： `An active access token must be used to query information about the current user.`

此外，当我打印`$facebook->getAccessToken()`& 尝试使用不同的 facebook 帐户打开我的应用程序时，我得到了相同的结果`token`。

它是`access token`什么以及我们用它做什么？

PS 我已经正确设置了我的 appID 和密码。问题是有时它有效，有时它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:03:11.570

访问令牌是令牌，由用户提供给您的应用程序以从您的应用程序访问他/她的信息。为了获得该令牌，用户必须授予您访问至少他的基本信息的权限。

更多[在这里](http://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)

# parsing - 使用 VB6 解析电子邮件 - 未正确拆分

> ID：14362522
> 
> 赞同：1
> 
> 时间：2013-01-16T16:00:02.740
> 
> 标签：parsing, email, vb6

当我解析一封看起来像这样的电子邮件时：

包括_po~301993959 'VBCRLF

po_no~vendor~part_no~class~type_code~buyer~qty_ordered~measure~balance_on_order~cost~amt_ordered~order_date~delivery_date~ship_date~receive_date~open~wo_no 'VBCRLF

301993959~100000~88008K~PROBE 800~F~VAX~4.0~EA~4.0~100.3300~401.32000~011513~012313~012313~000000~Y~STOCK'VBCRLF 301993959~100000~SPTEFCI~010WIRE ~VAX~1.0~SP~1.0~12.6400~12.64000~011513~012313~012313~000000~Y~STOCK 'VBCRLF 301993959~100000~TFIR-010-50~WIRE SPTEF~F~VAX~1.0~SP~1.0~12.6400 ~12.64000~011513~012313~012313~000000~Y~STOCK 'VBCRLF

使用代码：

```
Public Sub AddItems()

Dim aLineItem() As String
Dim aItem() As String
Dim i As Integer
Dim j As Integer
Dim iCnt As Double
Dim msg
Dim Item As Items

ReDim sWo(0)
iCnt = 0
For i = 1 To UBound(sMsg())

aLineItem = Split(sMsg(i), vbCrLf)
For j = 1 To UBound(aLineItem)
    If aLineItem(j) <> "" Then
        If blah = 1 Then
            Debug.Print ("...." & aLineItem(j))
        End If
        aItem = Split(aLineItem(j), "~")
        If (aItem(0) <> "") And (aItem(0) <> "included_po") And (aItem(0) <> "po_no") Then
          Item.PO_num = GetWo(aItem(1))
            If Item.PO_num <> "0" Then
                Item.Company = aItem(1)
                Item.Delivery_date = aItem(12)
                Item.pn = aItem(2)
                Item.QTY_ordered = aItem(6)
                Item.Unit_Price = aItem(9)
            End If 'If Item.PO_num <> "0" Then
        End If 'If aItem(1) <> "" Then
    End If ' If aLineItem(j) <> "" Then
Next j
Next i
End Sub 
```

电子邮件解析如下所示：

....301993959~100000~88008K~探针

....8800~F~VAX~4.0~EA~4.0~100.3300~401.32000~011513~012313~012313~000000~Y~S

....托克

有没有更好的方法来解析这封电子邮件？

编辑＃1：

```
Public Sub GetMailMsg()
Dim pop3 As jmail.pop3
Dim iCount As Integer
Dim i As Integer
Dim mailID As Integer
Dim j As Integer
Dim sSubject As String

j = 0

ReDim sMsg(0)

'connect to the mail box
Set pop3 = New pop3
pop3.Connect "REMOVED FOR SECURITY"

'Get message count
iCount = pop3.Count

'Read Messages
For i = 1 To iCount
 sSubject = pop3.Messages.Item(i).Subject
Label1.Caption = "Reading message.." & sSubject
DoEvents
If InStr(sSubject, "China Purchase Orders") <> 0 Then 'email test
j = j + 1
ReDim Preserve sMsg(j)
sMsg(j) = pop3.Messages.Item(i).Body
Label1.Caption = "Reading mail message for order " & sSubject
If blah = 1 Then
    Debug.Print ("Reading mail message for order " & sSubject)
    Debug.Print ("Reading mail message for order " & sMsg(j))
End If
End If
Next

pop3.Disconnect
Set pop3 = Nothing
End SUb 
```

--编辑#2

调试输出：阅读订单中国采购订单的邮件消息阅读订单包含的邮件_po~301993959

po_no~vendor~part_no~class~type_code~buyer~qty_ordered~measure~balance_o 'VBCRLF

n_order~cost~amt_ordered~order_date~delivery_date~ship_Date~receive_date 'VBCRLF

~open~wo_no 'VBCRLF

301993959~100000~88008K~探针'VBCRLF

8800~F~VAX~4.0~EA~4.0~100.3300~401.32000~011513~012313~012313~000000~Y~S'VBCRLF

托克'VBCRLF

301993959~100000~TFCI-010-50~WIRE 'VBCRLF

SPTEF~F~VAX~1.0~SP~1.0~12.6400~12.64000~011513~012313~012313~000000~Y~ST 'VBCRLF

奥克'VBCRLF

301993959~100000~TFIR-010-50~WIRE 'VBCRLF

SPTEF~F~VAX~1.0~SP~1.0~12.6400~12.64000~011513~012313~012313~000000~Y~ST 'VBCRLF

奥克'VBCRLF

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:02:18.170

你的台词没有正确分解让我觉得台词有问题`aLineItem = Split(sMsg(i), vbCrLf)`。请检查您`vbCrLF`是否没有正确的行中的任何内容。

那条线是一条连续的线吗？

**编辑 #1 @ 2013 年 1 月 16 日美国东部标准时间下午 1:16：**

我创建了一个文件并粘贴了提供的输入。我创建了一个简单的程序并将您的代码合并到其中。请参阅下面生成的 DEBUG，如预期的那样，由 3 行组成，以 301993959 开头，以 STOCK 结尾。这是正确且理想的输出，对吗？

`....301993959~100000~TFCI-010-50~WIRE SPTEF~F~VAX~1.0~SP~1.0~12.6400~12.64000~011513~012313~012313~000000~Y~STOCK ....301993959~100000~TFIR-010-50~WIRE SPTEF~F~VAX~1.0~SP~1.0~12.6400~12.64000~011513~012313~012313~000000~Y~STOCK ....301993959~100000~88008K~PROBE 800~F~VAX~4.0 ~EA~4.0~100.3300~401.32000~011513~012313~012313~000000~Y~STOCK`

所以你提供的代码工作正常。如果您说输入文件也很好，那意味着问题在于您如何阅读该电子邮件，特别是您如何填充`sMsg()`. 您可以发布该代码吗？

**编辑#2 @ 2013 年 1 月 16 日美国东部标准时间下午 2:32：**

您在单个记录行中得到了一些不需要`vbCrLf`的 s，并且您无法按照您想要的方式对其进行拆分。这是我建议您执行的操作：

1）如果您可以修改`GetMailMsg`为而不是按原样加载Body，请逐行进行以避免生成不需要`vbCrLf`的s。我对流行对象的经验为零，所以我不知道这是否可能。

2）如果不需要`cbCrLf`的 s 的数量是一致的，例如：单个记录中的 2，那么您可以简单地调整代码以连接这样的拆分记录

```
DIM concatLine As String
For j = 1 To UBound(aLineItem) Step 3
    concatLine = aLineItem(j) & aLineItem(j+1) & aLineItem(j+2)
    If concatLine <> "" Then
        If blah = 1 Then
            Debug.Print ("...." & concatLine)
        End If
        aItem = Split(concatLine, "~")
        If (aItem(0) <> "") And (aItem(0) <> "included_po") And (aItem(0) <> "po_no") Then
          Item.PO_num = GetWo(aItem(1))
            If Item.PO_num <> "0" Then
                Item.Company = aItem(1)
                Item.Delivery_date = aItem(12)
                Item.pn = aItem(2)
                Item.QTY_ordered = aItem(6)
                Item.Unit_Price = aItem(9)
            End If 'If Item.PO_num <> "0" Then
        End If 'If aItem(1) <> "" Then
    End If ' If concatLine <> "" Then
Next j 
```

3）或者更好的是，连接字符串直到到达记录的末尾，然后拆分该连接的字符串。

```
DIM concatLine As String
DIM detailsRecord as Integer

For detailsRecord  = 1 To UBound(aLineItem)
    if LCase(Right(aLineItem(detailsRecord),5)) = 'wo_no' Then Exit For ' when we find this tag, we know where details record begin
Next detailsRecord 
For j = detailsRecord + 1 To UBound(aLineItem) ' begin looping detail records
    concatLine = concatLine + aLineItem(j)

    If UCase(Right(aLineItem(j), 5)) = "STOCK" Then ' this is your end of the record indicator
        If blah = 1 Then
            Debug.Print ("...." & concatLine)
        End If
        aItem = Split(concatLine, "~")
        If (aItem(0) <> "") Then
          Item.PO_num = GetWo(aItem(1))
            If Item.PO_num <> "0" Then
                Item.Company = aItem(1)
                Item.Delivery_date = aItem(12)
                Item.pn = aItem(2)
                Item.QTY_ordered = aItem(6)
                Item.Unit_Price = aItem(9)
            End If 'If Item.PO_num <> "0" Then
        End If 'If aItem(1) <> "" Then
    End If ' If concatLine <> "" Then
    concatLine = ""
Next j 
```

对于情况 2 和 3，不要忘记先处理标题 - 您必须移出 `If (aItem(0) <> "") And (aItem(0) <> "included_po") And (aItem(0) <> "po_no")`主循环以处理标题记录（我相信前 2 个或记录是标题）。

**编辑＃3：** 我修复了场景＃3以跳过标题记录（假设'wo_no'是该记录结束的指示符），然后通过搜索结束标签（“STOCK” ）。此方法将足够灵活，可以处理`vbCrLf`电子邮件正文中的动态 s 数量，将单个记录拆分为不可预测数量的字符串。

代码是在浏览器中输入的，所以我不保证它会起作用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:06:21.920

既然你知道每一行应该从什么开始，那么使用“301993959”使用拆分功能。

```
Dim LineItems(100) As String
x = Split(sMsg(i), "301993959")
For j = 1 To UBound(x) - 1 'Don't use 0 becuase you don't need that part
      LineItems(j - 1) = x(j)
Next i 
```

当然，您可以更进一步，然后使用“~”作为第二个分隔符拆分字符串中的每个项目。

```
Dim LineItems(100, 15) As String
x = Split(Text1.Text, "301993959")
For j = 1 To UBound(x) - 1 'Don't use 0 becuase you don't need that part
  y = Split(x(j), "~")
  For k = 1 To 15
    LineItems(j - 1, k) = y(k)
  Next k
Next j 
```

# ios - 使用自动布局在 UITableView 上固定宽度不符合预期

> ID：14362528
> 
> 赞同：2
> 
> 时间：2013-01-16T16:00:13.827
> 
> 标签：ios, objective-c, xcode, uikit, autolayout

我目前正忙于使用 auto 在单独的视图 xib 文件中设计我的自定义视图，并且真的很难弄清楚这一点。

我面临的问题是，当我在表格视图上设置固定宽度约束（引脚宽度）时，例如 320 点（在横向模式下），一旦我通过将方向设置为纵向约束来测试视图输了，桌子缩小到65分？

我到底在这里做错了什么或者为什么会这样？或者，也许我只是错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-01-16T16:03:01.603

我建议仅在非常特殊的情况下使用 iOS 6 的新自动布局选项。我已经非常深入地测试了这个选项并发现了很多错误，例如：

*   在控制台中出现指示苹果错误的消息
*   它大大减慢了你的用户界面
*   而布局约束突然消失
*   该应用程序有时会因未记录的错误消息而崩溃

使用自动布局目前非常令人沮丧。我没有使用自动布局，而是使用

```
- (void)viewDidLayoutSubviews {} 
```

以编程方式调整我的 UI，这更容易和更快（在开发和运行时）。

# javascript - 如果未单击元素则聚焦（参见小提琴）

> ID：14362529
> 
> 赞同：0
> 
> 时间：2013-01-16T16:00:18.790
> 
> 标签：javascript, jquery, focus, jquery-click-event, jquery-focusout

当我写东西时，我的输入字段中会动态显示一个“清除”图标。按键和焦点事件处理得很好，唯一的事情是我希望在输入字段不处于焦点模式时删除图标。问题是我在图标上有一个点击事件，所以如果我点击图标，focusout-event 就会触发。我想不通。

```
$(".searchInput").focusout(function(e) {
    console.log(e);

    if(e.currentTarget != this) {
        if ($(".keypress").length > 0) {
            $(".keypress").remove();
        }
    }
}) 
```

我整理了一个小小提琴：http: [//jsfiddle.net/w9RbW/](http://jsfiddle.net/w9RbW/)。

如您所见，如果输入值不为空，则图标仍然存在，我不知道如何检查它是否被单击，或者类似的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:06:23.907

看到这个 [http://jsfiddle.net/w9RbW/8/](http://jsfiddle.net/w9RbW/8/)

如果您只想在不聚焦时删除图标。

```
 $(".searchInput").focusout(function(e) {
  $(".keypress").css('opacity', '0');
        if(e.currentTarget != this) {
            if ($(".keypress").length > 0) {
                $(".keypress").remove();
            }
        }
    }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:07:47.183

为什么不设置一个计时器，每 10 秒检查一次“清除”图标是否存在！发现文本框失去焦点后，您可以删除该清除图标并停止该计时器

[使用 jQuery 测试输入是否有焦点](https://stackoverflow.com/questions/967096/using-jquery-to-test-if-an-input-has-focus)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:16:19.910

作为解决方法，您可以在 icon mouseover/out 上设置/删除一些标志并在 focusout 事件中检查它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T16:16:29.727

问题（如您所知）是当您从文本框中聚焦时，清除图标在其单击事件被触发之前被删除。一种可能的解决方案是更改清除图标的不透明度而不是删除它，以便它仍然继续接收事件。

**演示：http:** [//jsfiddle.net/w9RbW/10/](http://jsfiddle.net/w9RbW/10/)

```
// Have the clear icon in there all the time
$("<span class='keypress'><i class='icon-remove-sign'></i></span>").appendTo($(".searchInput").parent()); 

$(".keypress").click(function(e) {
  if($(this).css('opacity') == 0) return;
  $(".searchInput").val("").focus();
  $(this).css('opacity', '0'); // hide it after clearing the text
})

// focusout
$(".searchInput").blur(function(e) {
  $(".keypress").css('opacity', '0'); // hide it on blur
})

$(".searchInput").focus(function() {
  if ($(".searchInput").val() != "") {
    $(".keypress").css('opacity', '1'); // show it
  }
})

$(".searchInput").keyup(function() {
  if($(this).val() != "") {
    $(".keypress").css('opacity', '1');
  } else {
    $(".keypress").css('opacity', '0');
  }
}) 
```

# android - USB 设备 - UsbManager 不会枚举

> ID：14362530
> 
> 赞同：2
> 
> 时间：2013-01-16T16:00:22.533
> 
> 标签：android

我正在将我构建的 USB 设备（由 dsPIC33E 供电）连接到通用 7" A13-MID android。

我在运行 LogCat 的情况下使用 ADB over TCPIP。

当我插入我的设备时，我在 LogCat 中得到了这个：

```
I/USB3G (90): event { 'add', '/devices/platform/sw_hcd_host0/usb1/1-1', 'usb', '', 189, 7 }
I/USB3G (90): path : '/sys/devices/platform/sw_hcd_host0/usb1/1-1'
I/USB3G (90): VID :size 5,vid_path '/sys/devices/platform/sw_hcd_host0/usb1/1-   1/idVendor',VID  '04d8'.
I/USB3G (90): PID :size 5,Pid_path '/sys/devices/platform/sw_hcd_host0/usb1/1-1/idProduct',PID  '003f'.
I/USB3G (90): cmd=/system/etc/usb_modeswitch.sh /system/etc/usb_modeswitch.d/04d8_003f &,
I/USB3G (90): excute ret : 0,err:No such file or directory 
```

我有 MissileLauncher Demo 在调试模式 ADT 下运行。

我可以在 Fire 中设置一个断点，当我按下 Fire 按钮时，代码会在那里中断（所以调试工作正常）。

我已在 device_filter.xml 中将 Product-ID 和 Vendor-ID 设置为正确的值。

然后我在这里设置一个断点：

```
UsbDevice device = (UsbDevice)intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);
if (UsbManager.ACTION_USB_DEVICE_ATTACHED.equals(action)) {
    setDevice(device);
} else if (UsbManager.ACTION_USB_DEVICE_DETACHED.equals(action)) {
    if (mDevice != null && mDevice.equals(device)) {
        setDevice(null);
    }
} 
```

当我在休息后单步执行代码时，意图。line 被执行，但是下面的 if 语句没有被输入并且`setDevice(device)`永远不会被调用（也不是`setDevice(null)`）。

我确实希望 setDevice(device) 被调用。毕竟，我已经插入了设备，android 看到我插入了它（参见上面的 LogCat）并且我正确设置了 device_filter.xml。

我错过了什么？

其他信息，我安装的“USB 设备”应用程序会看到该设备，但会将其列在 Linux 选项卡下。我希望这对我来说不是坏消息！

谢谢，戴尔

我试图单独枚举设备，但没有“是”（实际上在 HashMap 中没有返回设备）：

```
HashMap<String, UsbDevice> deviceList = mUsbManager.getDeviceList();
Iterator<UsbDevice> deviceIterator = deviceList.values().iterator();
while(deviceIterator.hasNext()){
    UsbDevice device1 = deviceIterator.next();
    //your code
    if (device1.getVendorId()==1240) {
        savetofile("Yeah!");
    }
} 
```

不确定这是否相关，但android是植根的，它就是这样来的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:52:24.257

原来我需要使用 root 权限并做出我在这个回答的问题中找到的更改：

[Android USB 主机和隐藏设备](https://stackoverflow.com/questions/11183792/android-usb-host-and-hidden-devices)

我走在正确的轨道上，现在我又来了:)。我相信其他人会发现我寻求此答案的努力很有帮助。

但是，只有 HashMap 枚举方法有效，intent filter 方法仍然返回 action 作为 android.intent.action.MAIN。

感谢您的输入！

戴尔

# python - 使 SocketHandler 在 python 中登录文件

> ID：14362535
> 
> 赞同：2
> 
> 时间：2013-01-16T16:00:40.913
> 
> 标签：python, logging

我正在查看 python[`SocketHandler`示例](http://docs.python.org/2.7/howto/logging-cookbook.html)，了解如何通过网络发送和接收日志记录事件。我想要的只是将记录器记录到文件中而不是使用`StreamHandler`. 查看代码后，我找不到需要在哪里进行更改以记录到文件。有人可以告诉我如何实现这一目标吗？如果您觉得这很琐碎，我深表歉意。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:12:07.343

经过大量搜索后，我在互联网上找到了一个与我正在寻找的示例相近的示例。您可以在此处找到示例：http: [//code.activestate.com/recipes/577025-loggingwebmonitor-a-central-logging-server-and-mon/](http://code.activestate.com/recipes/577025-loggingwebmonitor-a-central-logging-server-and-mon/)。

再次为所有的麻烦感到抱歉。

# macos - couchdb.org 上 mac osx 的下载地址在哪里？

> ID：14362540
> 
> 赞同：0
> 
> 时间：2013-01-16T16:00:59.383
> 
> 标签：macos, installation, osx-lion, couchdb

我将我的 OSX 升级到了 Lion。当我去本地安装 couchdb 时，我发现[http://couchdb.apache.org](http://couchdb.apache.org/)上的 mac 安装程序链接消失了，取而代之的是“Mac OS X 二进制文件即将推出”。我以前没有使用过 couchdb，但我知道它曾经存在过。

一位朋友给我发了一份他安装在他的 Snow Leopard OSX 上的压缩副本。这个安装了，我可以访问管理控制台，但我无法访问被褥。

按钮丢失是有原因的，还是有其他安装方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:00:59.383

我的猜测是该站点正在检测我的操作系统，但它们还没有为 10.7.5 做好准备。但是我该如何安装本地版本呢？

要安装，我按照这篇文章[Couch DB installation not working on Mac OSx Lion](https://stackoverflow.com/questions/10282638/couch-db-installation-on-mac-osx-lion)中的步骤进行操作。

它一步一步地发挥着魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:14:14.723

最近发布了新版本 1.2.1，并为 Mac OSX 打包。您可以从[http://couchdb.apache.org/#download](http://couchdb.apache.org/#download)或从[http://www.apache.org/dyn/closer.cgi?path=/couchdb/packages/mac/1.2.1/Apache-下载它CouchDB-1.2.1.zip](http://www.apache.org/dyn/closer.cgi?path=/couchdb/packages/mac/1.2.1/Apache-CouchDB-1.2.1.zip)

# c++ - 为什么不能在 Eclipse Juno 中解析 stl 类型？

> ID：14362544
> 
> 赞同：1
> 
> 时间：2013-01-16T16:01:06.717
> 
> 标签：c++, eclipse

最近我在 Ubuntu 12.10 上安装了带有 CDT 8.1 的 Eclipse Juno，但即使是基本的 HelloWorld 项目也显示错误。并且 std 无法解决。在我将 /usr/include/c++/4.7/ 添加到包含路径之后，可以解析像这样的标题，但是 std::cout 和其他 std 的东西仍然无法解析。除了使用靛蓝，还有其他解决方案吗？

# java - 获取用 null 初始化的类型的类

> ID：14362546
> 
> 赞同：0
> 
> 时间：2013-01-16T16:01:13.673
> 
> 标签：java, android, class, nullpointerexception, freemarker

我的问题是我用 Freemarker 创建了 java 代码，我需要一个未初始化的变量类型。我需要类型，因为每种类类型都有指定的方法。

所以我有一个从 Parcelable 实现的自定义类。

```
int id;
  public MyClass(Parcel parcel) {   
    if(id.getClass().toString().equals("Long")) id=parcel.readLong();
    if(id.getClass().toString().equals("String")) id=parcel.readString();
  } 
```

我知道有一个方法 readValue() 但这并没有解决我的问题，因为同样的问题是，如果我想编写对象。

所以这是主要问题。我希望你明白这一点，你可以提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:10:02.657

你的意思不是很清楚，但我认为你正在寻找

> 实例

# java - Spring Security 3.1 重定向到登录不起作用

> ID：14362547
> 
> 赞同：1
> 
> 时间：2013-01-16T16:01:17.340
> 
> 标签：java, spring, spring-mvc, spring-security

我将 Spring 3.1 与 Spring Mvc 和 Spring Security 一起使用。

```
<security:http auto-config="true" use-expressions="true" access-denied-page="/views/not-authorized.jsp">
    <security:form-login login-page="/login.html" 
                         login-processing-url="/j_spring_security_check"
                         default-target-url="/main.html"
                         always-use-default-target="false"
                         authentication-failure-url="/login.html?error=true" />

    <security:logout logout-url="/j_spring_security_logout" 
                     invalidate-session="true" 
                     logout-success-url="/login.html"/>
</security:http> 
```

当我在未登录或会话过期时尝试访问安全页面时，这可以正常工作，但是当我从控制器调用安全操作方法时它不起作用。我只是在日志中得到一个 ActionDenied 异常，就是这样......

更新：由于正文限制，我删除了旧日志，但它是相同的日志......虽然有一个 ExceptionHandlerExceptionResolver，但没有 @ExceptionHandler 方法......

```
 DEBUG 17-01-2013 12:47:50,337 - FilterChainProxy:318 - /rs/administration/team/1/list.action?_dc=1358419670168&role=SUPERVISOR&page=1&start=0&limit=10&sort=username&dir=ASC at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
DEBUG 17-01-2013 12:47:50,338 - HttpSessionSecurityContextRepository:139 - HttpSession returned null object for SPRING_SECURITY_CONTEXT
DEBUG 17-01-2013 12:47:50,338 - HttpSessionSecurityContextRepository:85 - No SecurityContext was available from the HttpSession: org.apache.catalina.session.StandardSessionFacade@63f61b14\. A new one will be created.
DEBUG 17-01-2013 12:47:50,338 - FilterChainProxy:318 - /rs/administration/team/1/list.action?_dc=1358419670168&role=SUPERVISOR&page=1&start=0&limit=10&sort=username&dir=ASC at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
DEBUG 17-01-2013 12:47:50,339 - FilterChainProxy:318 - /rs/administration/team/1/list.action?_dc=1358419670168&role=SUPERVISOR&page=1&start=0&limit=10&sort=username&dir=ASC at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
DEBUG 17-01-2013 12:47:50,339 - FilterChainProxy:318 - /rs/administration/team/1/list.action?_dc=1358419670168&role=SUPERVISOR&page=1&start=0&limit=10&sort=username&dir=ASC at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
DEBUG 17-01-2013 12:47:50,339 - FilterChainProxy:318 - /rs/administration/team/1/list.action?_dc=1358419670168&role=SUPERVISOR&page=1&start=0&limit=10&sort=username&dir=ASC at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
DEBUG 17-01-2013 12:47:50,339 - FilterChainProxy:318 - /rs/administration/team/1/list.action?_dc=1358419670168&role=SUPERVISOR&page=1&start=0&limit=10&sort=username&dir=ASC at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
DEBUG 17-01-2013 12:47:50,339 - FilterChainProxy:318 - /rs/administration/team/1/list.action?_dc=1358419670168&role=SUPERVISOR&page=1&start=0&limit=10&sort=username&dir=ASC at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
DEBUG 17-01-2013 12:47:50,340 - AnonymousAuthenticationFilter:102 - Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@6fa8dbd0: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffdaa08: RemoteIpAddress: 127.0.0.1; SessionId: C6A69A5A39B643C5DBE37DC225E76F49; Granted Authorities: ROLE_ANONYMOUS'
DEBUG 17-01-2013 12:47:50,340 - FilterChainProxy:318 - /rs/administration/team/1/list.action?_dc=1358419670168&role=SUPERVISOR&page=1&start=0&limit=10&sort=username&dir=ASC at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter'
DEBUG 17-01-2013 12:47:50,340 - FilterChainProxy:318 - /rs/administration/team/1/list.action?_dc=1358419670168&role=SUPERVISOR&page=1&start=0&limit=10&sort=username&dir=ASC at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
DEBUG 17-01-2013 12:47:50,340 - FilterChainProxy:318 - /rs/administration/team/1/list.action?_dc=1358419670168&role=SUPERVISOR&page=1&start=0&limit=10&sort=username&dir=ASC at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
DEBUG 17-01-2013 12:47:50,340 - AntPathRequestMatcher:103 - Checking match of request : '/rs/administration/team/1/list.action'; against '/login.html'
DEBUG 17-01-2013 12:47:50,341 - AntPathRequestMatcher:103 - Checking match of request : '/rs/administration/team/1/list.action'; against '/views/not-authorized.jsp'
DEBUG 17-01-2013 12:47:50,341 - FilterSecurityInterceptor:184 - Public object - authentication not attempted
DEBUG 17-01-2013 12:47:50,341 - FilterChainProxy:304 - /rs/administration/team/1/list.action?_dc=1358419670168&role=SUPERVISOR&page=1&start=0&limit=10&sort=username&dir=ASC reached end of additional filter chain; proceeding with original chain
DEBUG 17-01-2013 12:47:50,341 - DispatcherServlet:799 - DispatcherServlet with name 'action' processing GET request for [/bpms/prestataire/rs/administration/team/1/list.action]
DEBUG 17-01-2013 12:47:50,342 - RequestMappingHandlerMapping:211 - Looking up handler method for path /rs/administration/team/1/list.action
DEBUG 17-01-2013 12:47:50,342 - RequestMappingHandlerMapping:218 - Returning handler method [public java.util.Map<java.lang.String, ?> fr.isiom.bpms.prestataire.action.controllers.administration.TeamAdministrationController.listTeams(fr.isiom.bpms.prestataire.action.model.generic.ActionListParam,fr.isiom.bpms.prestataire.action.model.administration.TeamProfile,java.security.Principal) throws java.lang.Exception]
DEBUG 17-01-2013 12:47:50,343 - DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'teamAdministrationController'
DEBUG 17-01-2013 12:47:50,343 - DispatcherServlet:879 - Last-Modified value for [/bpms/prestataire/rs/administration/team/1/list.action] is: -1
DEBUG 17-01-2013 12:47:50,346 - MethodSecurityInterceptor:193 - Secure object: ReflectiveMethodInvocation: public java.util.Map fr.isiom.bpms.prestataire.action.controllers.administration.TeamAdministrationController.listTeams(fr.isiom.bpms.prestataire.action.model.generic.ActionListParam,fr.isiom.bpms.prestataire.action.model.administration.TeamProfile,java.security.Principal) throws java.lang.Exception; target is of class [fr.isiom.bpms.prestataire.action.controllers.administration.TeamAdministrationController]; Attributes: [ROLE_SUPERVISOR, ROLE_TEAM_LEADER]
DEBUG 17-01-2013 12:47:50,346 - MethodSecurityInterceptor:298 - Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@6fa8dbd0: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffdaa08: RemoteIpAddress: 127.0.0.1; SessionId: C6A69A5A39B643C5DBE37DC225E76F49; Granted Authorities: ROLE_ANONYMOUS
DEBUG 17-01-2013 12:47:50,347 - AffirmativeBased:65 - Voter: org.springframework.security.access.vote.RoleVoter@3b61c3c3, returned: -1
DEBUG 17-01-2013 12:47:50,347 - AffirmativeBased:65 - Voter: org.springframework.security.access.vote.AuthenticatedVoter@3ca2691a, returned: 0
DEBUG 17-01-2013 12:47:50,348 - DefaultListableBeanFactory:245 - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalScheduledAnnotationProcessor'
DEBUG 17-01-2013 12:47:50,349 - ExceptionHandlerExceptionResolver:132 - Resolving exception from handler [public java.util.Map<java.lang.String, ?> fr.isiom.bpms.prestataire.action.controllers.administration.TeamAdministrationController.listTeams(fr.isiom.bpms.prestataire.action.model.generic.ActionListParam,fr.isiom.bpms.prestataire.action.model.administration.TeamProfile,java.security.Principal) throws java.lang.Exception]: org.springframework.security.access.AccessDeniedException: Access is denied
DEBUG 17-01-2013 12:47:50,353 - ResponseStatusExceptionResolver:132 - Resolving exception from handler [public java.util.Map<java.lang.String, ?> fr.isiom.bpms.prestataire.action.controllers.administration.TeamAdministrationController.listTeams(fr.isiom.bpms.prestataire.action.model.generic.ActionListParam,fr.isiom.bpms.prestataire.action.model.administration.TeamProfile,java.security.Principal) throws java.lang.Exception]: org.springframework.security.access.AccessDeniedException: Access is denied
DEBUG 17-01-2013 12:47:50,354 - DefaultHandlerExceptionResolver:132 - Resolving exception from handler [public java.util.Map<java.lang.String, ?> fr.isiom.bpms.prestataire.action.controllers.administration.TeamAdministrationController.listTeams(fr.isiom.bpms.prestataire.action.model.generic.ActionListParam,fr.isiom.bpms.prestataire.action.model.administration.TeamProfile,java.security.Principal) throws java.lang.Exception]: org.springframework.security.access.AccessDeniedException: Access is denied
DEBUG 17-01-2013 12:47:50,356 - DispatcherServlet:910 - Could not complete request
org.springframework.security.access.AccessDeniedException: Access is denied
    at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:83)
    at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:205)
    at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:59)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
    at java.lang.Thread.run(Thread.java:662)
DEBUG 17-01-2013 12:47:50,360 - ExceptionTranslationFilter:165 - Access is denied (user is anonymous); redirecting to authentication entry point
org.springframework.security.access.AccessDeniedException: Access is denied
    at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:83)
    at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:205)
    at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:59)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
    at java.lang.Thread.run(Thread.java:662)
DEBUG 17-01-2013 12:47:50,363 - HttpSessionRequestCache:41 - DefaultSavedRequest added to Session: DefaultSavedRequest[http://localhost:8080/bpms/prestataire/rs/administration/team/1/list.action?_dc=1358419670168&role=SUPERVISOR&page=1&start=0&limit=10&sort=username&dir=ASC]
DEBUG 17-01-2013 12:47:50,363 - ExceptionTranslationFilter:185 - Calling Authentication entry point.
DEBUG 17-01-2013 12:47:50,365 - DefaultRedirectStrategy:36 - Redirecting to 'http://localhost:8080/bpms/prestataire/login.html'
DEBUG 17-01-2013 12:47:50,366 - HttpSessionSecurityContextRepository:269 - SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
DEBUG 17-01-2013 12:47:50,366 - SecurityContextPersistenceFilter:97 - SecurityContextHolder now cleared, as request processing completed
DEBUG 17-01-2013 12:47:50,378 - FilterChainProxy:318 - /login.html at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
DEBUG 17-01-2013 12:47:50,378 - HttpSessionSecurityContextRepository:139 - HttpSession returned null object for SPRING_SECURITY_CONTEXT
DEBUG 17-01-2013 12:47:50,378 - HttpSessionSecurityContextRepository:85 - No SecurityContext was available from the HttpSession: org.apache.catalina.session.StandardSessionFacade@63f61b14\. A new one will be created.
DEBUG 17-01-2013 12:47:50,378 - FilterChainProxy:318 - /login.html at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
DEBUG 17-01-2013 12:47:50,379 - FilterChainProxy:318 - /login.html at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
DEBUG 17-01-2013 12:47:50,379 - FilterChainProxy:318 - /login.html at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
DEBUG 17-01-2013 12:47:50,379 - FilterChainProxy:318 - /login.html at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
DEBUG 17-01-2013 12:47:50,379 - DefaultSavedRequest:309 - pathInfo: both null (property equals)
DEBUG 17-01-2013 12:47:50,379 - DefaultSavedRequest:317 - queryString: arg1=_dc=1358419670168&role=SUPERVISOR&page=1&start=0&limit=10&sort=username&dir=ASC; arg2=null (property not equals)
DEBUG 17-01-2013 12:47:50,379 - HttpSessionRequestCache:75 - saved request doesn't match
DEBUG 17-01-2013 12:47:50,380 - FilterChainProxy:318 - /login.html at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
DEBUG 17-01-2013 12:47:50,380 - FilterChainProxy:318 - /login.html at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
DEBUG 17-01-2013 12:47:50,380 - AnonymousAuthenticationFilter:102 - Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@6fa8dbd0: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffdaa08: RemoteIpAddress: 127.0.0.1; SessionId: C6A69A5A39B643C5DBE37DC225E76F49; Granted Authorities: ROLE_ANONYMOUS'
DEBUG 17-01-2013 12:47:50,380 - FilterChainProxy:318 - /login.html at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter'
DEBUG 17-01-2013 12:47:50,381 - FilterChainProxy:318 - /login.html at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
DEBUG 17-01-2013 12:47:50,381 - FilterChainProxy:318 - /login.html at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor' 
```

这是和以前一样的日志......我评论了@ExceptionHandler方法，然后重新启动服务器......无论如何这是我的exceptionHandler方法：

```
 @ExceptionHandler(RuntimeException.class)
    public ModelAndView handleException(Exception ex, HttpServletRequest request, HttpServletResponse response) {
        return getErrorResponseMap(StringUtils.EMPTY, JsonErrorCause.TECHNICAL_ERROR));
    }
    protected static Map<String, Object> getErrorResponseMap(String msg, String causeCode) {

        Map<String, Object> modelMap = new HashMap<String, Object>(ERROR_PROPERTY_COUNT);
        modelMap.put(JsonProperties.MESSAGE, msg);
        modelMap.put(JsonProperties.SUCCESS, Boolean.FALSE);
        modelMap.put(JsonProperties.CAUSE, causeCode);

        return modelMap;
    } 
```

我什至尝试过类似...

```
@ExceptionHandler(RuntimeException.class)
public ModelAndView handleException(Exception ex, HttpServletRequest request, HttpServletResponse response) {
    ModelAndView modelAndView = new ModelAndView();
    if (ex.getMessage().contains("Access is denied")) {
        modelAndView.setViewName("/views/not-authorized.jsp");
        return modelAndView;
    }
    modelAndView.addAllObjects(getErrorResponseMap(StringUtils.EMPTY, JsonErrorCause.TECHNICAL_ERROR));
    return modelAndView;
} 
```

更新 2：我的 showLoginPage 方法：

```
@RequestMapping(value = PageAddress.LOGIN_URL)
public ModelAndView showLoginPage(@RequestParam(value = "error", required = false) boolean errorParam, ModelMap model) {

    Authentication auth = SecurityContextHolder.getContext().getAuthentication();

    if (!auth.getAuthorities().contains(new SimpleGrantedAuthority(ContractorRole.USER))) {
        model.put(ERROR_PROP_NAME, errorParam);
        return new ModelAndView(PageCode.LOGIN, model);
    } else {
        RedirectView mainRedirectView = new RedirectView(PageAddress.MAIN_URL, true);
        mainRedirectView.setExposeModelAttributes(false);
        return new ModelAndView(mainRedirectView);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:20:02.657

尝试使用 < [access-denied-handler](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-access-denied-handler) > 元素而不是弃用的 access-denied-page：

```
<security:http ...>
    ...
    <security:access-denied-handler ref="accessDeniedHandlerImpl" />
</security:http>

<bean id="accessDeniedHandlerImpl" class="org.springframework.security.web.access.AccessDeniedHandlerImpl">
    <property name="errorPage" value="/views/not-authorized.jsp"/>
</bean> 
```

# visio - 无法激活 Visio 2013 MSDN

> ID：14362549
> 
> 赞同：38
> 
> 时间：2013-01-16T16:01:25.317
> 
> 标签：visio, activation

我订阅了 MSDN，并且安装了 Visio 2013。我无法激活该产品，它已降至只读状态。

任何激活或“切换帐户”的尝试都会遇到“抱歉，我们遇到一些临时服务器问题”。我发现一些帖子提到从注册表中删除与办公室相关的密钥，但这并没有帮助。

在某一时刻，我相信我也听说我们的网络可能会阻止激活，但不知道这将如何发挥作用（如果有的话）。

其他人是否遇到并（希望）找到了解决此问题的方法？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-05-28T15:45:09.223

转到控制面板 -> 程序和功能 -> Microsoft Visio Professional 2013

右键单击 Microsoft Visio Professional 2013，然后单击“更改”

然后选择“输入产品密钥”并提供您的 25 位许可证密钥以激活。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-07-16T17:02:50.310

以下是有关输入产品代码的控制面板/程序和功能方法的更多详细信息。

这适用于以前安装的 Office 2010，然后是未提供激活对话框的更高版本的 Visio 2013 Pro 安装。

在程序和功能中右键单击 Microsoft Visio Professional 2013 您将看到卸载（默认）和更改。选择更改您将看到一个包含这些选项的对话框

*   添加或删除功能
*   修理
*   消除
*   输入产品密钥（瞧！）

选择产品密钥，其余的按预期进行。

脚注：我花了 45 分钟与四个不同的 Microsoft 支持团队进行了六次对话，试图解决这个问题。没有人知道如何解决这个问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T09:14:08.687

我有同样的问题。要激活，我必须转到“控制面板\程序和功能\Microsoft Visio Professional 2013”​​并选择“修复”选项；您将被要求插入您的产品密钥。现在我的 Visio 已激活，我可以创建新图表，但我仍然遇到使用在线选项的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-20T11:15:09.247

如果您的系统是离线计算机，您需要致电 MS 支持中心并向他们提供屏幕上显示的代码。然后作为回报，输入他们给你的一长串数字。

# git - 从 teamcity 运行时 Bower 安装缓慢

> ID：14362554
> 
> 赞同：15
> 
> 时间：2013-01-16T16:01:39.413
> 
> 标签：git, teamcity, bower

我有许多由 bower 管理的客户端包。当我们（通过 teamcity）部署我们的应用程序时，我们会执行 bower install 以获取每个包的最新版本，然后将其复制到我们的服务器。

当我从本地机器上运行它时，Bower 安装需要 10-20 秒。当我在 teamcity 中将它作为构建步骤运行时（注意命令行构建步骤，自定义脚本包含“bower install”），需要 4 分钟。如果我将桌面远程安装到那台机器上并从命令行运行 bower install，则需要 10-20 秒。

有没有人有任何想法发生了什么？

**编辑**

如果我查看服务器上的 ProcExp，似乎 ssh.exe 在完成执行之前挂了很长时间。

一些额外的细节：

*   TeamCity Enterprise 7.1.4（内部版本 24331）；代理版本：24331
*   视窗服务器 2008 R2
*   代理以管理员帐户运行
*   git v1.8
*   构建步骤是自定义脚本；节点 node_modules/bower/bin/bower 安装
*   尝试使用 teamcity.git.use.native.ssh=false 和 teamcity.git.use.native.ssh=true
*   在 /.ssh 中使用私钥

我[在 Teamcity 的 Youtrack 上发现了这个问题，](http://youtrack.jetbrains.com/issue/TW-24300)这似乎是相同/相似的问题，但已经关闭。不确定它是否相关。我也提出了一个[新问题](http://youtrack.jetbrains.com/issue/TW-26257)，但没有回应

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T14:26:30.203

我们发现 Git for windows 安装了旧版本的 SSH，如果您升级到最新版本的 SSH，它将修复缓慢 [http://darrell.mozingo.net/2011/09/29/painfully-slow-clone-speeds -with-msysgit-gitextensions/](http://darrell.mozingo.net/2011/09/29/painfully-slow-clone-speeds-with-msysgit-gitextensions/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T17:43:44.487

看看团队城市的详细日志。您将看到是 git 还是 bower 性能或网络吞吐量下降。如果是 git，您可能想查看是否可以将深度选项添加为 1 并指定分支，这样如果它很大，它就不会复制您的历史记录。

# php - Laravel 将默认变量发送到布局

> ID：14362559
> 
> 赞同：2
> 
> 时间：2013-01-16T16:01:45.637
> 
> 标签：php, variables, inheritance, views, laravel

具有以下由其他控制器扩展的类

```
class Admin_Controller extends Base_Controller 
{
    static $admin_layout = 'admin.layouts.default';

    public function __construct()
    {
        parent::__construct();

        $role_object = User::find(Auth::user()->id)->roles()->get();
        $role = $role_object[0]->attributes['name']; 
```

如：

```
class Admin_Draws_Controller extends Admin_Controller
{
    public $restful = true;

    public function __construct()
    {
                $this->layout = parent::$admin_layout;
        parent::__construct();
    }

    public function get_index()
    {
        $view = View::make('admin.templates.draws');
        $this->layout->content = $view;
    }
} 
```

如何将`$role`变量发送到，`admin.layouts.default`以便在加载视图时可以使用它？

“全局”`$role`变量的重点是避免必须`View::make()`像以下那样在我的所有内容中调用它：

```
$view = View::make('admin.templates.articles',
    array(
        'fields' => $fields,
        'data' => $results,
        'links' => $links,
                    'role' => 'role here'. // I don't want to add this where ever I call the View::make
    )
);
$this->layout->content = $view; 
```

点个`echo $role`赞，在我的`header.blade.php`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T05:20:17.987

我最终做了以下工作。

## 控制器

```
// Example of variable to set
$this->layout->body_class = 'user-register';

$view = View::make('modules.user.register', array(
    'success' => true,
));

$this->layout->content = $view; 
```

## 我的`default.layout.php`看法

```
<body class="<?php echo isset($body_class) ? $body_class : '' ;?>">

    @include('partials.header')

    {{ $content }}

    @include('partials.footer') 
```

该变量可以很容易地在视图中的任何其他上下文中使用。

# c# - NHibernate 映射与中间表的一对一关系

> ID：14362561
> 
> 赞同：2
> 
> 时间：2013-01-16T16:01:56.540
> 
> 标签：c#, nhibernate, oracle11g

给定表格：

```
TableA
aId
...

TableB
bId
...

TableC
aId
cId // Maps to TableB.bId 
```

换句话说，TableA 和 TableB 仅通过 TableC 中的条目相关联。

我想要以下课程：

```
public class ClassA
{
    aId
    ...
}

public class ClassB
{
    bId
    ...
}

public class ClassD : ClassA
{
   ClassB
} 
```

因此，ClassD 具有 ClassA 的所有属性，并添加了 ClassB 的单个实例。

我最初的想法是使用：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping auto-import="false" xmlns="urn:nhibernate-mapping-2.2">
  <class name="ClassD" lazy="false" table="TableA" polymorphism="explicit">
    <id name="aId" column="aId" type="Guid">
      <generator class="CustomGuidGenerator" />
    </id>
    ...
    <many-to-one name="ClassB" column="cId" class="ClassB" cascade="all" not-found="ignore" />
  </class>
</hibernate-mapping> 
```

显然，在这个映射中，TableA 中没有 cId，也没有多对一的方式来指定表。那么，如何通过中间连接表映射单个实体呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:16:44.630

不确定您的表格中到底有什么（ TableC.aId 是对 TableA.aId 的引用吗？），但也许您可以采用按子类划分表格的策略（例如参见[http://docs.huihoo.com/hibernate /nhibernate-reference-1.2.0/inheritance.html](http://docs.huihoo.com/hibernate/nhibernate-reference-1.2.0/inheritance.html) )

```
<class name="ClassA" table="TableA">
  <id name="aId" column="aId" type="Guid">
    <generator class="CustomGuidGenerator" />
   </id>        
    <joined-subclass name="ClassD" table="TableC">
        <key column="aId"/>
        <many-to-one name="ClassB" column="cId" class="ClassB" cascade="all" not-found="ignore" />
    </joined-subclass>
</class> 
```

关于`ClassB`，它应该有自己的映射文件，系统将能够计算多对一`ClassB`属性的表名（TableB）。

# c# - 将制表符空格插入文本框

> ID：14362563
> 
> 赞同：2
> 
> 时间：2013-01-16T16:01:59.707
> 
> 标签：c#, .net, xaml, windows-8, microsoft-metro

我见过很少的教程声称可以在线解决这个问题，但它们不起作用。当按下 TAB 键时，我想在我的*多行*文本框中插入一个 TAB 空格。

微软的一个花花公子回应是，按照设计，如果您在 TextBox 内按 TAB，Metro 应用程序会将焦点转移到下一个控件。现在，如果您在单行文本框上按 TAB，这将是有意义的。但是在多行文本框中？您不认为用户想要插入 TAB 的可能性更大吗？

是的，我知道，您可以通过按 Ctrl+TAB 在 Metro TextBox 中插入 TAB 空格。但这很容易出错，因为我们大多数人都习惯于按 TAB 键，而且旧习惯有时很难改掉。

这是我的问题。我的应用程序有一个文本编辑器功能，用户可能需要输入大量数据。而且您知道人们喜欢什么，他们喜欢将事物分开以使他们的文本文档更具可读性，并且使用 Ctrl+TAB 非常不舒服和乏味。所以我想知道是否有人可以帮助解决这个问题（但它不能涉及 RichTextBox）？

另外，如果我设法找到解决方法，这是否会增加我的应用发布被商店拒绝的机会？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:16:12.580

订阅 TextBox 的 KeyPress 事件，通过检查所按下键的 KeyCode 来捕获 Tab 键，然后将 KeyEventArgs 的 Handled 属性设置为 true，这样该键就不会传递给任何其他控件。

使用 SendKeys 将“Tab”字符发送到 TextBox 以模仿按“Ctrl+Tab”的行为，如您所说：

```
TextBox_KeyPress(object sender, System.Windows.Forms.KeyEventArgs e)
{
      if (e.KeyCode == Keys.Tab)
      {
          e.Handled = true;
          SendKeys(^{TAB});
      }
} 
```

胡萝卜 (^) 代表 CTRL 键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-10T18:35:17.590

```
richTextBox1.AcceptsTab = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:13:46.360

在文本框控件的**KeyPress 事件中。**确保您在文本框控件上为多行设置了属性 true 如果您使用的是我建议的 RichText 控件，这将起作用

```
if (e.Key == Windows.System.VirtualKey.Tab) 
{
    e.Handled = true;
    string SelectionText = "";
    TextBox.Document.Selection.GetText(Windows.UI.Text.TextGetOptions.None, SelectionText);
    TextBox.Document.Selection.TypeText(char(9) + SelectionText);
} 
```

# php - PHP MySQL插入/选择多个一对多

> ID：14362565
> 
> 赞同：0
> 
> 时间：2013-01-16T16:02:02.413
> 
> 标签：php, mysql

我已经为此苦苦挣扎了一段时间，并搜索了各种资源（书籍/网络/本网站），但尚未找到解决方案。我已经很久没有使用 PHP / MySQL，所以我可能不知道相关的白话能够定位我的搜索。反正...

我有一个基本的订单管理系统。客户可以为他们想要测试的项目输入多行，每行都有要测试的项目，以及所需的测试套件。然后，我需要将这些项目中的每一项扩展到其组成测试中，以便测试实验室管理其工作流程。我需要能够将测试与订单项目和订单联系起来。

我有一个订单表，其中使用 order_id 字段（自动递增）和一些其他信息（谁下订单等）捕获了整个订单。然后，我使用订单表中的 order_id 和客户想要的每个项目/测试套件组合填充订单项目表，每个订单项目都有一个 order_item_id（自动递增）。

```
$sql1="INSERT INTO tbl_order(od_date, od_customer_id)
    SELECT ct_date, ct_customer_id 
    FROM tbl_cart
    WHERE ct_customer_id='$customerID' AND ct_session_id='$sid'";
mysql_query($sql1);
// get order_id
$orderid=mysql_insert_id();

// save order details to tbl_order_item
$sql2="INSERT INTO tbl_order_item(cat_code, pd_code, pd_description, pc_code, smpl_type, test_suite_name)
    SELECT cat_code, pd_code, pd_description, pc_code, smpl_type, test_suite_name 
    FROM tbl_cart
    WHERE ct_customer_id='$customerID' AND ct_session_id='$sid'";
mysql_query($sql2);

//  update date fields
$sql3="UPDATE tbl_order SET od_date='$date' WHERE ct_date='0000-00-00 00:00:00'";
$sql4="UPDATE tbl_order SET od_username='$username' WHERE od_username=''";
mysql_query($sql3);
mysql_query($sql4);

// set the order id in the order item and lab item tables
$sql5="UPDATE tbl_order_item SET od_id='$orderid' WHERE od_id='0'"; 
```

一切正常，但是当我尝试获取每个订单项目并将其扩展到其相关测试时，我现在卡住了。我创建了一个显示 test_suite / test_name 组合的表，但我无法将输出插入到 lab_item 表中。

```
//$sql6="UPDATE tbl_lab_item SET od_id='$orderid' WHERE od_id=''";
mysql_query($sql5);

// Expand Suite into tests in lab item table
$sql7="INSERT INTO tbl_lab_item(od_id,test_name)
    VALUES ('$orderid',(SELECT test_name FROM tbl_suite_select  WHERE tbl_order_item.test_suite_name=tbl_suite_select.test_suite_name))";
mysql_query($sql7); 
```

我应该直接在数据库中执行此操作，还是应该先将数据提取到变量中？如果是这样，怎么做？

提前谢谢了。

**更新** 我现在已经解决了这个问题。感谢您的输入，如果有人感兴趣，这是最终解决它的查询。这一切都取决于在最终表的 Select 中调用正确的表/单元格。我错过了一个字段，所以它没有参考。

```
//  Insert individual tests into tbl_lab_item
$sql6="INSERT INTO tbl_lab_item(od_item_id, test_suite_name,test_name)
    SELECT tbl_order_item.od_item_id,tbl_order_item.test_suite_name,tbl_suite_select.test_name
    FROM tbl_order_item,tbl_suite_select
    WHERE tbl_order_item.test_suite_name=tbl_suite_select.test_suite_name";
mysql_query($sql6); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:47:23.977

我不确定我是否完全理解这个问题，但这里有一些改进的查询（使用 pdo）。我认为我添加的要点是最后一个查询中的 join 语句。我还结合了您以前的一些查询以一次性添加行（而不是插入而不是更新）。我没有测试任何东西。

```
$sqlStmt = $pdo->prepare("
    INSERT INTO tbl_order
    (   od_date
    ,   od_customer_id
    ,   od_date
    ,   od_username)
    SELECT
        ct_date
    ,   ct_customer_id
    ,   ? AS od_date
    ,   ? AS od_username
    FROM tbl_cart
    WHERE ct_customer_id = ?
    AND ct_session_id = ?
");

$sqlStmt->execute(array(
    $date,
    $username,
    $customerID,
    $sid
));

$orderid = $pdo->lastInsertId();

$sqlStmt = $pdo->prepare("
    INSERT INTO tbl_order_item
    (   cat_code
    ,   pd_code
    ,   pd_description
    ,   pc_code
    ,   smpl_type
    ,   test_suite_name
    ,   od_id)
    SELECT 
        cat_code
    ,   pd_code
    ,   pd_description
    ,   pc_code
    ,   smpl_type
    ,   test_suite_name 
    ,   ? AS od_id
    FROM tbl_cart
    WHERE ct_customer_id = ?
    AND ct_session_id = ?
");
$sqlStmt->execute(array(
    $orderid,
    $customerID,
    $sid
));

$sqlStmt = $pdo->prepare("
    INSERT INTO tbl_lab_item
    (   od_id
    ,   test_name)
    SELECT
        ? AS od_id
    ,   tss.test_name
    FROM tbl_suite_select tss
    INNER JOIN tbl_order_item toi
    ON toi.test_suite_name = tss.test_suite_name
    WHERE toi.od_id = ?
");
$sqlStmt->execute(array(
    $orderid,
    $orderid
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:38:40.353

这应该将您的代码转换为工作代码：

```
$sql7="INSERT INTO tbl_lab_item(od_id,test_name)
       SELECT '$orderid', test_name FROM tbl_suite_select 
       WHERE tbl_order_item.test_suite_name=tbl_suite_select.test_suite_name"; 
```

不过，我不太明白适用于 where 的条件是否足够。

# ruby-on-rails-3.2 - 重命名表列名称模型导轨

> ID：14362566
> 
> 赞同：0
> 
> 时间：2013-01-16T16:02:05.463
> 
> 标签：ruby-on-rails-3.2, field, rename

我有这个问题。

我必须实现一个从 PostgreSql 数据库读取数据的应用程序。我不能修改数据库，我只能读这个。

有一个表有一些列，但其中之一名为“更新”。

当我尝试从该表中读取所有记录并将它们打印到屏幕上时，应用程序告诉我：

> “HomeController#index 中的 ActiveRecord::DangerousAttributeError”
> 
> “更新由 ActiveRecord 定义”

如何重命名应用程序/模型中的列？（我无法修改数据库）解决此问题的更好解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:49:25.537

您可以使用 rails 虚拟属性。

```
class User < ActiveRecord::Base
  def full_name
    [first_name, last_name].join(' ')
  end

  def full_name=(name)
    split = name.split(' ', 2)
    self.first_name = split.first
    self.last_name = split.last
  end
end 
```

那么您可以使用 full_name 作为模型属性。

# java - Android - 谷歌地图中的多个标记

> ID：14362579
> 
> 赞同：1
> 
> 时间：2013-01-16T16:02:32.677
> 
> 标签：java, android, google-maps

我正在使用 java 开发一个包含映射功能的 android 项目。我的问题是如何添加具有不同颜色（红色，蓝色）的多个标记（两个不同的标记）。

我使用了谷歌地图 api。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:57:38.510

试试这种方式：

> ```
> private static final LatLng BRISBANE = new LatLng(-27.47093, 153.0235);
> private static final LatLng MELBOURNE = new LatLng(-37.81319, 144.96298);
> private static final LatLng SYDNEY = new LatLng(-33.87365, 151.20689);
> private static final LatLng ADELAIDE = new LatLng(-34.92873, 138.59995);
> private static final LatLng PERTH = new LatLng(-31.952854, 115.857342);
> 
> private void addMarkersToMap() {
>     // Uses a colored icon.
>     mBrisbane = mMap.addMarker(new MarkerOptions()
>             .position(BRISBANE)
>             .title("Brisbane")
>             .snippet("Population: 2,074,200")
>             .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_AZURE)));
>     // Uses a custom icon.
>     mSydney = mMap.addMarker(new MarkerOptions()
>             .position(SYDNEY)
>             .title("Sydney")
>             .snippet("Population: 4,627,300")
>             .icon(BitmapDescriptorFactory.fromResource(R.drawable.arrow)));
>     // Creates a draggable marker. Long press to drag.
>     mMelbourne = mMap.addMarker(new MarkerOptions()
>             .position(MELBOURNE)
>             .title("Melbourne")
>             .snippet("Population: 4,137,400")
>             .draggable(true));
>     // A few more markers for good measure.
>     mPerth = mMap.addMarker(new MarkerOptions()
>             .position(PERTH)
>             .title("Perth")
>             .snippet("Population: 1,738,800"));
>     mAdelaide = mMap.addMarker(new MarkerOptions()
>             .position(ADELAIDE)
>             .title("Adelaide")
>             .snippet("Population: 1,213,000"));
>     // Creates a marker rainbow demonstrating how to create default marker icons of different
>     // hues (colors).
>     int numMarkersInRainbow = 12;
>     for (int i = 0; i < numMarkersInRainbow; i++) {
>         mMap.addMarker(new MarkerOptions()
>                 .position(new LatLng(
>                         -30 + 10 * Math.sin(i * Math.PI / (numMarkersInRainbow - 1)),
>                         135 - 10 * Math.cos(i * Math.PI / (numMarkersInRainbow - 1))))
>                 .title("Marker " + i)
>                 .icon(BitmapDescriptorFactory.defaultMarker(i * 360 / numMarkersInRainbow)));
>     }
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:48:03.180

1.始终参考Android官方文档；

[关于 Google Maps API v2 上的标记的所有信息（单击此处）](https://developers.google.com/maps/documentation/android/marker)

2.你可以在那里得到你想知道的。

3.你可以在[这里得到它的示例代码点击](https://developers.google.com/maps/documentation/android/intro#sample_code)

4.欲了解更多信息，请与我联系，然后让您了解。

> [更新]

5.如果你想在谷歌地图上用触摸和拖动事件绘制多段线，请看这部电影和教程，如下所示；

5-1。请参阅[*YouTube 电影](http://youtu.be/YEM90r9r9vI)。

5-2。请看[*电影引用的源代码](http://android-er.blogspot.kr/2013/01/google-maps-android-api-v2-example-draw.html)。

# ios - Stripes ActionBean 获取客户端 PUT 数据

> ID：14362580
> 
> 赞同：1
> 
> 时间：2013-01-16T16:02:35.370
> 
> 标签：ios, put, stripes, mdm

我正在尝试用 Java 实现带有条纹的 iOS MDM 服务器。

我希望 iDevice 签入到 ActionBean，但是如何从 iDevice 的 PUT 请求中获取数据？

iDevice 将发送的数据如下。

```
PUT: /checkin
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" 
"http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>MessageType</key>
    <string>Authenticate</string>
    <key>Topic</key>
    <string>com.example.mdm.pushcert</string>
    <key>UDID</key>
    <string> [ redacted ] </string>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:23:10.970

我通过创建一个 Servlet（扩展 HttpServlet）并覆盖 doPut() 方法解决了这个问题。

servlet 需要映射到 web.xml 文件中。（通过码头运行）。

```
<servlet>
    <servlet-name>MDM</servlet-name>
    <servlet-class>com.mycompany.web.MDMServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>MDM</servlet-name>
    <url-pattern>/mdm-servlet/*</url-pattern>
</servlet-mapping> 
```

# html - 无法摆脱 CSS 中的 div 换行符

> ID：14362583
> 
> 赞同：0
> 
> 时间：2013-01-16T16:02:40.557
> 
> 标签：html, css

在此代码示例中，我无法摆脱输入字段和提交按钮之间的换行符：

[http://jsfiddle.net/m4FNx/1/](http://jsfiddle.net/m4FNx/1/) （使用 Chrome）

我将所有相关标签设置为

```
display:inline-block 
```

但它似乎没有做它通常做的事情。

我一直在看它太久，所以我看不到那里的错误，所以任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:16:20.253

如果您不想设置固定宽度（这并不总是有效），请添加

```
white-space:nowrap; 
```

到你的`.bubble`div。这将防止内容包装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T16:06:13.897

为 .bubble div 设置宽度

```
.bubble {
    width: 320px;
} 
```

# api - Instagram - “分页”中的空链接

> ID：14362584
> 
> 赞同：1
> 
> 时间：2013-01-16T16:02:41.767
> 
> 标签：api, pagination, photo, instagram

问题：第二个链接带有一个空参数“分页”。这就是为什么我看不到所有照片的原因。

查询文字（按顺序）： 1\. [https://api.instagram.com/v1/users/self/feed?access_token=xxxxxxxxx.xxxxxxxxx.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&count=100](https://api.instagram.com/v1/users/self/feed?access_token=xxxxxxxxx.xxxxxxxxx.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&count=100) 2\. [https://api.instagram.com/v1/ users/self/feed?access_token=xxxxxxxx.xxxxxxxxx.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&max_id=360226483121788237_30882660&count=100](https://api.instagram.com/v1/users/self/feed?access_token=xxxxxxxxx.xxxxxxxxx.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&max_id=360226483121788237_30882660&count=100)

答案：1\. {"pagination":{"next_url":"https://api.instagram.com/v1/users/self/feed?access_token=xxxxxxxxx.xxxxxxxxx.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u0026count=100\u0026max_id=360226483121788237_30882660", "next_max_id":"360226483121788237_30882660"},"meta":{"code":200},"data": ... 等 2\. {"pagination":{},"meta":{"code":200 },"数据": ...等

有人知道任何解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:39:14.460

通常这表示没有更多照片...您期望有多少张照片？可能是，有一些私人或已删除的照片 - 通常仍会被计算在内，但不会被退回。

# mysql - Ruby on Rails - 通过 SQL 查找添加撇号

> ID：14362587
> 
> 赞同：0
> 
> 时间：2013-01-16T16:02:43.223
> 
> 标签：mysql, sql, ruby-on-rails, ruby

我已经编写了一个在我的模型中使用的 SQL 查询，如下所示：

```
Tag.find_by_sql(["SELECT tags.id, tags.name, count(*) AS count FROM tags
    INNER JOIN taggings ON tags.id = taggings.tag_id
    WHERE 
    (taggings.taggable_type = 'Discussion' AND taggings.taggable_id IN (SELECT id FROM  `discussions` WHERE discussions.group_id = ?))
     GROUP BY tag_id ORDER BY ? LIMIT ?;", self.id, self.id, self.id, self.id, order, limit]) 
```

这可以正常工作并提取所需的标签。但是，标签的顺序不正确。我在服务器控制台中注意到查询在 order 语句周围有撇号，如下所示：

```
ORDER BY 'count desc' 
```

当我删除撇号时，如下所示：

```
ORDER BY count desc 
```

并手动运行查询，它会以正确的顺序提取标签。有没有办法阻止将撇号添加到查询中？

干杯

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:06:26.623

原因是你已经参数化了列名

```
ORDER BY ? 
```

您传递的值已被清理，这就是它变为`'count desc'`.

您不能通过设计传递列名和表名。唯一的方法是连接字符串中的列名。

# c# - 使类型的实例不可存储

> ID：14362588
> 
> 赞同：8
> 
> 时间：2013-01-16T16:02:46.607
> 
> 标签：c#, compiler-errors, il, ildasm

*   有没有办法标记一个类型（或者更好的是，一个接口），这样它的实例就不能存储在一个字段中（以类似于`TypedReference`and的方式`ArgIterator`）？
*   同样，有没有办法防止实例通过匿名方法传递，并且——通常——模仿上述两种类型的行为？
*   这可以通过 ILDasm 或更一般地通过 IL 编辑来完成吗？由于[UnconstrainedMelody](http://code.google.com/p/unconstrained-melody/)通过编译程序集的二进制编辑实现了通常无法获得的结果，也许有一种方法可以通过相同的方法“标记”某些类型（或者甚至更好，抽象类型或标记接口）。

我怀疑它在编译器中是硬编码的，因为[错误 CS0610 的文档](http://msdn.microsoft.com/en-us/library/t93xez96(v=vs.80).aspx)指出：

> 有些类型不能用作字段或属性。这些类型包括...

在我看来，这暗示了可以扩展这些类型的集合——但我可能是错的。

我在 SO 上进行了一些搜索，虽然我知道无法以编程方式[引发编译器错误](https://stackoverflow.com/questions/6266031/c-sharp-net-how-to-throw-a-compiler-error)，但我找不到任何来源说明某些“特殊”类型的行为无法复制。

即使这个问题主要是学术性的，也可能有一些答案的用法。例如，有时确保某个对象的生命周期受限于创建它的方法块可能很有用。

**编辑：** `RuntimeArgumentHandle`是另一种（未提及的）不可存储类型。

**编辑 2：**如果它有任何用处，CLR 似乎也以不同的方式处理这些类型，如果不仅仅是编译器（仍然假设这些类型与其他类型没有任何不同）。例如，以下程序将抛出一个`TypeLoadException`about `TypedReference*`。我已经对其进行了调整以使其更短，但您可以随心所欲地解决它。例如，将指针的类型更改为`void*`不会引发异常。

```
using System;

unsafe static class Program
{
    static TypedReference* _tr;

    static void Main(string[] args)
    {
        _tr = (TypedReference*) IntPtr.Zero;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T16:16:21.363

好的。这不是一个完整的分析，但我怀疑它足以确定你是否可以做到这一点，即使通过玩弄 IL - 据我所知，你不能。

我还在用 dotPeek 查看反编译版本时，看不到那里的特定类型/那些特定类型的任何特别之处，无论是属性还是其他：

```
namespace System
{
  /// <summary>
  /// Describes objects that contain both a managed pointer to a location and a runtime representation of the type that may be stored at that location.
  /// </summary>
  /// <filterpriority>2</filterpriority>
  [ComVisible(true)]
  [CLSCompliant(false)]
  public struct TypedReference
  { 
```

所以，完成后，我尝试使用 System.Reflection.Emit 创建这样一个类：

```
namespace NonStorableTest
{
    //public class Invalid
    //{
    //    public TypedReference i;
    //}

    class Program
    {
        static void Main(string[] args)
        {
            AssemblyBuilder asmBuilder = AppDomain.CurrentDomain.DefineDynamicAssembly(new AssemblyName("EmitNonStorable"),
                                                                                       AssemblyBuilderAccess.RunAndSave);

            ModuleBuilder moduleBuilder = asmBuilder.DefineDynamicModule("EmitNonStorable", "EmitNonStorable.dll");

            TypeBuilder invalidBuilder = moduleBuilder.DefineType("EmitNonStorable.Invalid",
                                                                  TypeAttributes.Class | TypeAttributes.Public);

            ConstructorBuilder constructorBuilder = invalidBuilder.DefineDefaultConstructor(MethodAttributes.Public);

            FieldBuilder fieldI = invalidBuilder.DefineField("i", typeof (TypedReference), FieldAttributes.Public);

            invalidBuilder.CreateType();
            asmBuilder.Save("EmitNonStorable.dll");

            Console.ReadLine();
        }
    }
} 
```

当你运行它时，它会抛出一个 TypeLoadException，它的堆栈跟踪将你指向 System.Reflection.Emit.TypeBuilder.TermCreateClass。所以然后我用反编译器去追求它，它给了我这个：

```
[SuppressUnmanagedCodeSecurity]
[SecurityCritical]
[DllImport("QCall", CharSet = CharSet.Unicode)]
private static void TermCreateClass(RuntimeModule module, int tk, ObjectHandleOnStack type); 
```

指向 CLR 的非托管部分。在这一点上，为了不被打败，我挖掘了 CLR 参考版本的共享源。我不会进行我所做的所有跟踪，以避免使这个答案超出所有合理使用范围，但最终你会在 MethodTableBuilder::SetupMethodTable2 函数中进入 \clr\src\vm\class.cpp (这似乎也设置了字段描述符），您可以在其中找到这些行：

```
// Mark the special types that have embeded stack poitners in them
                        if (strcmp(name, "ArgIterator") == 0 || strcmp(name, "RuntimeArgumentHandle") == 0)
                            pClass->SetContainsStackPtr(); 
```

和

```
if (pMT->GetInternalCorElementType() == ELEMENT_TYPE_TYPEDBYREF)
                            pClass->SetContainsStackPtr(); 
```

后者与 \src\inc\cortypeinfo.h 中的信息有关，因此：

```
// This describes information about the COM+ primitive types

// TYPEINFO(enumName,               className,          size,           gcType,         isArray,isPrim, isFloat,isModifier)

[...]

TYPEINFO(ELEMENT_TYPE_TYPEDBYREF,  "System", "TypedReference",2*sizeof(void*), TYPE_GC_BYREF, false,  false,  false,  false) 
```

（它实际上是该列表中唯一的 ELEMENT_TYPE_TYPEDBYREF 类型。）

然后，ContainsStackPtr() 又在不同地方的其他地方使用，以防止使用这些特定类型，包括在字段中 - 来自 \src\vm\class.cp，MethodTableBuilder::InitializeFieldDescs()：

```
// If it is an illegal type, say so
if (pByValueClass->ContainsStackPtr())
{
    BuildMethodTableThrowException(COR_E_BADIMAGEFORMAT, IDS_CLASSLOAD_BAD_FIELD, mdTokenNil);
} 
```

无论如何：长话短说，似乎以这种方式不可存储的类型被有效地硬编码到 CLR 中，因此，如果您想更改列表或提供一种 IL 方法将类型标记为不可存储，您几乎将不得不采用 Mono 或共享源 CLR 并衍生出您自己的版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T16:26:50.100

我在 IL 中找不到任何表明这些类型有任何特殊性的东西。我确实知道编译器有很多很多特殊情况，例如将`int`/`Int32`转换为内部类型`int32`，或者与结构有关的许多事情`Nullable`。我高度怀疑这些类型也是特例。

一个可能的解决方案是[Roslyn](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)，我希望它可以让您创建这样的约束。

# iphone - 从子视图控制器返回到容器

> ID：14362591
> 
> 赞同：1
> 
> 时间：2013-01-16T16:02:53.413
> 
> 标签：iphone, ios, objective-c, xcode

我有一个带有 4 个导航按钮的容器，每个按钮代表 4 个单独的子 vc。我已经成功地实现了从容器到子 vc 的代码，`addchildviewcontroller`但是现在我不知道如何返回。

Container VC：4 个按钮导航到 4 个单独的子视图控制器。

单击按钮时，当前视图将替换为子 VC 的视图。因此按钮不再可见。出于这个原因，子 VC 有一个主页按钮，专门设计用于返回 4 个按钮所在的容器 VC。

4 个按钮中的 1 个示例调用函数以显示子 VC：

```
- (IBAction)btn_bus:(id)sender {   
   [self addMyController:businessVC_];
} 
```

添加子视图控制器，单击按钮时调用的函数：

```
-(void)addMyController:(UIViewController *)myController{
    [self addChildViewController:myController];
    [self.view addSubview:myController.view]; 
    [myController didMoveToParentViewController:self]; 
```

}

**问题 1：**如何在子 VC 上捕获/执行功能。例如，如何让子 VC 上的主页按钮现在导致子 vc 自行删除并再次显示容器/导航屏幕？

**问题 2：**这些过程在自定义容器 VC 或子 VC 中的什么位置进行？

**问题 3：**是否有特别的指南或教程说明如何在父子关系中管理 IBAction 和 IBOutlet 的关系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:24:10.743

如果您不想要任何动画，则返回是这样完成的，代码位于父视图控制器中：

```
-(void)removeChild:(UIViewController *) child {
    [child didMoveToParentViewController:nil];
    [child.view removeFromSuperview];
    [child removeFromParentViewController];
} 
```

在子控制器中，您可以这样称呼它：

```
-(IBAction) goBackToContainer {
    [(ParentClassNameHere *)self.parentViewController removeChild:self];
} 
```

通常，应从自定义容器控制器中添加和删除子项。我不确定你的第三个问题是什么意思。IBActions 和 outlets 属于具有 UI 项的控制器视图。你的整体设计与 Apple 的容器控制器不同。除了导航或标签栏视图之外，导航和标签栏控制器等容器没有可返回的视图——其中一个chid 视图始终在屏幕上。我不知道你为什么在这种情况下使用自定义控制器，因为它的设计看起来很像标签栏控制器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T17:48:25.560

上一个答案有一个小错误，因为我没有足够的声誉来发表评论。第一行应该是：

`[child willMoveToParentViewController:nil];`

这告诉孩子它正在被移除。

在 Apple Docs 中查找创建自定义容器视图控制器。

并且 UIViewController.h 有一个非常好的文档。

# ruby-on-rails-3 - 成功删除（活动记录，Rails）

> ID：14362592
> 
> 赞同：0
> 
> 时间：2013-01-16T16:02:54.417
> 
> 标签：ruby-on-rails-3, sqlite, activerecord

我正在开发一个 Rails 应用程序，它有一个更新一些用户信息的后台进程。为此，此方法必须删除所有现有信息（存储在另一个表中）并从 Internet 获取新信息。问题是，如果中途出现问题，用户在进程再次运行之前没有信息。

有一些事情要做：

```
transaction = EntityUser.delete_all(:user_id => @current_user.id)
#instructions that adds new  entity
...
...
transaction.commit 
```

谁能建议我可以做些什么来避免这种问题？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:34:43.093

阅读有关**[ActiveRecord::Transactions](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)**的信息。您可以将所有内容包装在一个块中

```
ActiveRecord::Base.transaction do
  EntityUser.delete_all(:user_id => @current_user.id)

  # ...
end 
```

如果出现问题，您可以`raise ActiveRecord::Rollback`在该块内调用以还原事务块内对数据库的所有更改。

* * *

另一个想法是软删除`EntityUser`实例，`User`而不是实际从数据库中删除它们。有一些 gem 可以帮助您使用此功能，例如**[`acts_as_paranoid`](https://github.com/goncalossilva/rails3_acts_as_paranoid)**.

你会

1.  软删除`EntityUser`实例
2.  获取并构建新`EntityUser`实例
3.  *（可选）*如果一切顺利，则从数据库中刷新软删除的实例

如果使用此方法出现问题，很容易取消删除软删除的记录。

# javascript - jQuery - 将 .live 转换为 .on 点击

> ID：14362598
> 
> 赞同：4
> 
> 时间：2013-01-16T16:03:09.153
> 
> 标签：javascript, jquery, jquery-on

> **可能重复：**
> [jQuery 1.7 - 将 live() 转换为 on()](https://stackoverflow.com/questions/8021436/jquery-1-7-turning-live-into-on)
> [.live() 与 .on() 方法](https://stackoverflow.com/questions/9215237/live-vs-on-method)

我有以下代码（我已经为此简化了）与 jquery-1.7 一起工作得很好。

```
$("td.ui-datepicker-week-col a").live("click", function () {
    alert("hello");
}); 
```

我正在尝试升级我的代码，所以我可以升级我的 jQuery 包版本，所以我把它改成了这个。

```
$("td.ui-datepicker-week-col").on("click", "a", function () {
    alert("hello");
}); 
```

但这并没有做任何事情。它也不会抛出任何错误，所以我看不出问题出在哪里。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T16:04:59.747

如果您在开始时没有`"td.ui-datepicker-week-col"`元素，那么您必须选择现有的永久集。例如

```
$(document).on("click", "td.ui-datepicker-week-col a", function () {
    alert("hello");
}); 
```

`on`与 相反，该函数`live`仅适用于调用绑定函数时定义的集合。`on`动态的是当事件发生时作为参数传递的选择器的解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T16:05:40.947

`on`语句的第一部分绑定到*调用时已经存在的*元素。要正确使用委托，您需要选择一个当时存在的元素，并保证是事件元素的父元素。如果不出意外，您可以随时使用`document`（这也是这样`live`做的！）

```
$(document).on("click", "td.ui-datepicker-week-col a", function(e) { /*...*/ }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T16:09:48.347

问题可能是`"td.ui-datepicker-week-col"`在页面加载和`on`附加事件时 DOM 中不存在。

将处理程序附加到父元素，该元素将在 javascript 代码加载时存在。最简单（更糟糕，但有效）是：

```
$("body").on("click", "td.ui-datepicker-week-col a", function () {
  alert("hello")
}) 
```

这将在每次点击文档时触发，然后 jQuery 将验证点击的元素是否为`"td.ui-datepicker-week-col a"`真，如果为真，则执行回调。

一个更有效的方法是附加到一个现有的子容器，这`"td.ui-datepicker-week-col a"`是肯定的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T16:05:35.190

```
$("body").on("click", "td.ui-datepicker-week-col a", function () {
    alert("hello");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T16:12:26.723

尝试这个...

```
$('.ui-datepicker-week-col').on('click', 'a', function () {
    alert("hello");
}); 
```

并看到这个[例子](http://jsfiddle.net/pUByL/1/)

问候。

# c++ - 如何调试阿帕奇？我在哪里可以找到核心转储

> ID：14362601
> 
> 赞同：0
> 
> 时间：2013-01-16T16:03:14.593
> 
> 标签：c++, apache, debugging, coredump

我正在编写一些作为 Apache 的一部分运行的 CPP 代码。我有一个段错误。我在哪里可以找到核心转储，以便我可以调试它。如果没有核心转储，我如何告诉 Apache 创建一个（是否有调试标志？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:11:45.140

核心是否被转储通过`ulimit -c`. 是否由应用程序决定是否转储核心并不取决于应用程序（核心是由操作系统生成的，而不是应用程序，它已经在那时消失了）。

核心文件应位于启动应用程序的目录中。

无论应用程序是否为调试版本，都可以/将转储核心。（当然，由于进程映像中缺少调试符号，非调试版本的核心转储不太有用。）

# php - 否定实例

> ID：14362603
> 
> 赞同：63
> 
> 时间：2013-01-16T16:03:23.513
> 
> 标签：php, instanceof

否定instanceof的正确格式是什么？

```
if ( ! $a instanceof stdClass) 
```

或者

```
if ( ! ($a instanceof stdClass) ) 
```

我说服自己后者是正确的方式，可能是在几年前阅读了一篇博客文章之后，但经过一些命令行测试，它们似乎都是等价的。*他们是吗*？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-01-16T16:08:45.127

让我们阅读[文档](http://php.net/manual/en/language.operators.precedence.php)：

> 下表按优先级顺序列出了运算符，最高优先级的运算符位于顶部。 [...]

```
Associativity      Operators       Additional Information
================== =============== ======================
non-associative    instanceof      types
right              !               logical 
```

所以`instanceof`具有更高的优先级，因此两个语句是等价的。括号可能用于使其明显，因此您无需在文档中查找它。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-16T16:07:14.693

> 它们是等价的吗？

是的，从逻辑上讲，它们是等价的。**Álvaro G. Vicario***的*[回答](https://stackoverflow.com/a/14362690/164998)提供了更多详细信息。

 ***> 否定实例的正确格式是什么？

在这两者中，有一个论点认为以下内容更具可读性。但没有单一*的方法*。这就是 PHP 的美丽和诅咒。

```
!($a instanceof stdClass) 
```***

# java - 单例和数据源

> ID：14362605
> 
> 赞同：6
> 
> 时间：2013-01-16T16:03:30.037
> 
> 标签：java, web-applications, singleton, jndi, connection-pooling

我正在使用 Java 开发一个 Web 应用程序，它需要与数据库连接。**资源管理好很重要**。该应用程序将位于 Tomcat 6 servlet 容器中，并且我已经实现了**BoneCP**来管理连接（我不能使用 Spring）。

我读过**JNDI 查找 DataSource 太昂贵了**，我正在考虑创建一个 DataSource 对象的单例，只获取一次 JNDI 资源，并为将来的连接返回相同的 DataSource。

问题：**只创建一次 DataSource 并从同一个 DataSource 获取连接是个好主意吗？**我不想获得相同的连接，只有相同的数据源。

谢谢 ;）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:09:56.017

使用池数据源，如下所述：

[http://www.javaranch.com/journal/200601/JDBCConnectionPooling.html](http://www.javaranch.com/journal/200601/JDBCConnectionPooling.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-25T15:10:33.090

是的，正如 Renjith 建议的那样，您只需要创建`DataSource`一次。我昨天实际上遇到了同样的问题。每次在我的“getConnection”方法中，我都注意到我不必要地创建了一个新的 InitialContext 和 DataSource。我修改了我的 Connection Manager 类，使其具有一个静态代码块，仅在第一次加载该类时才创建 DataSource 对象（在阅读了 BalusC 在[正确使用 JDBC 连接池（Glassfish）](https://stackoverflow.com/questions/1915992/proper-usage-of-jdbc-connection-pool-glassfish)中的回答之后）

我考虑过使用老式`ServiceLocator`模式（请参阅上面链接中 Pascal 的回答），但我觉得这对于我的需求来说有点过分了。

另一种可能性是您也可以`@Resource`在 DataSources 上使用带有注入的注释，但这似乎**不适**用于`Tomcat 7`.

# mysql - 如何创建 SQL 语句来计算行中的值

> ID：14362606
> 
> 赞同：0
> 
> 时间：2013-01-16T16:03:33.947
> 
> 标签：mysql, sql

我正在尝试构建一个 SQL，它将返回所有事件的文件总量。

D B：

```
id | name    | filename1 | filename2
1    event1    1.jpg       2.jpg
2    event2    1.jpg       Null 
```

如果您查看这种情况，它应该返回“您有 3 个文件”，但我不知道如何制作 SQL。

我正在使用 mySQL。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T16:07:05.270

您可以*取消透视*或使用and字段`UNION ALL`中的数据，然后获得总计数。从多列中获取数据并将其转换为多行：`filename1``filename2``UNION ALL`

```
select count(files) Total
from
(
    select name, filename1 as files
    from yourtable
    union all
    select name, filename2
    from yourtable
) src 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/c16d6/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:10:37.533

你的桌子没有标准化，这让你的生活变得困难。当您有像 event:files 这样的一对多关系时，您需要 2 个表，一个用于事件，一个用于属于事件的文件。像这样：

## 事件

```
event_id int unsigned not null auto_increment
event_name varchar(45)
.... 
```

## 事件文件

```
file_id int unsigned not null auto_increment
event_id int unsigned not null,
file_name varchar(45)
.... 
```

要获取文件总数，只需执行以下操作：

```
SELECT COUNT(*) FROM eventfiles; 
```

如果要获取每个事件的文件数，请执行以下操作：

```
SELECT e.event_name, COUNT(f.file_id)
FROM events e LEFT JOIN eventfiles f ON e.event_id=f.event_id
GROUP BY e.event_name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:10:06.117

当那里没有文件名时，您没有指定列中的内容，我假设它是 NULL （应该是）。

我不确定性能 - 但这应该在这种情况下有效：

```
SELECT 
SUM(CASE WHEN filename1 IS NOT NULL THEN 1 ELSE 0 END +
CASE WHEN filename2 IS NOT NULL THEN 1 ELSE 0 END) img_cnt
FROM event_table; 
```

您也可以通过事件 ID 获取单个事件的计数：

```
SELECT event_id
SUM(CASE WHEN filename1 IS NOT NULL THEN 1 ELSE 0 END +
CASE WHEN filename2 IS NOT NULL THEN 1 ELSE 0 END) img_cnt
FROM event_table
GROUP BY event_id 
```

此外，这个数据库结构确实不好。正如 dnagirl 建议的那样，它应该被标准化！

# android - Android 使用字符串填充电子邮件地址

> ID：14362607
> 
> 赞同：0
> 
> 时间：2013-01-16T16:03:39.883
> 
> 标签：android, email

从我下面的原始问题继续：

[Android 使用电子邮件地址列表发送电子邮件](https://stackoverflow.com/questions/14154358/android-sending-an-email-using-a-list-of-email-addresses)

我尝试使用字符串填充电子邮件地址行。编写电子邮件时，消息部分会填充通过单击微调器给出的答案，其代码显示为“%1$s”。因此，如果我有一个微调器，在我输入的主要电子邮件的字符串中包含 4 个不同的国家/地区：

国家：%1$s

它将在最终发送的电子邮件中显示为：

国家：英国

例如。

当我将此字符串放入电子邮件地址而不是原来的样子时：

家%1$s@gmail.com

并在最终电子邮件中显示为：

homeUK@gmail.com

它留在家里%1$s@gmail.com！

是否有一个原因？它是不能添加到地址行的东西吗？

我在下面附上了我的代码，非常感谢有人的帮助。我一直用这个把头发拉出来。该应用程序的其余部分已完成！

主要活动

```
public void sendFeedbackMessage(String subject, String message) {

        Intent messageIntent = new Intent(android.content.Intent.ACTION_SEND);

        String aEmailList[] = { getResources().getString(R.string.emailaddress_format) };
        String bEmailList[] = { ("country@gmail.com") };

        messageIntent.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList);
        messageIntent.putExtra(Intent.EXTRA_CC, bEmailList);
          //email.putExtra(Intent.EXTRA_BCC, new String[]{to});

        messageIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);

        messageIntent.setType("plain/text");
        messageIntent.putExtra(android.content.Intent.EXTRA_TEXT, message);

        startActivity(messageIntent);

    }

} 
```

以及相关的字符串

```
<string
        name="emailaddress_format">country%1$s@gmail.com</string> 
```

如果需要更多代码来查看我正在尝试做什么，请告诉我，我会添加它。我不想用整个代码让每个人都超载，然后尝试解释我在哪里挣扎。

希望有人可以帮助我，我很有意义。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:34:30.177

不确定您遇到的特定问题的确切答案，但更简单的方法来完成您似乎想要完成的事情是：

```
Spinner yourSpinner = (Spinner)findViewById(R.id.yourSpinner);
String country = yourSpinner.getSelectedItem().toString();

String aEmailList[] = { "country" + country + "@gmail.com" }; 
```

这将从微调器中获取该人选择的国家并将其转换为字符串，然后您可以将其放入`EXTRA_EMAIL`您已经在做的事情中。

# android - AlarmManager - 用 WiFi 唤醒？

> ID：14362612
> 
> 赞同：1
> 
> 时间：2013-01-16T16:03:56.830
> 
> 标签：android

所以我已经创建了我的大部分应用程序，但是我遇到了节能应用程序干扰它的问题。我使用 AlarmManager 运行一段代码，每 x 分钟（至少 1 小时）向服务器发送信息，我遇到的主要问题是电源管理器正在禁用 WiFi，因为设备正在休眠。

确保唤醒时 WiFi 可用的最有效方法是什么？是简单地启用WiFi并重新连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:19:24.417

也许您的解决方案的另一种方法是侦听 connection_changed 意图。这样你就知道有互联网连接，你可以上传。

您也可以启用 WiFi，但您需要权限：（我猜是这些）

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission>
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE"></uses-permission>

WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
wifi.setWifiEnabled(enabled); 
```

没有尝试过，但这应该可以解决问题。

# junit - 在 intellij 12 中运行 junit，其中每个测试都在自己的 JVM 上运行

> ID：14362613
> 
> 赞同：2
> 
> 时间：2013-01-16T16:04:02.307
> 
> 标签：junit, intellij-idea

我有一组单元测试，使用单音，所以每个测试都会影响另一个（不需要的行为）。我可以使用 intellij 12 junit 插件在自己的 JVM 实例（fork=yes）中运行每个测试吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:00:44.097

我相信您在运行/调试配置中追求的是什么。

运行 --> 编辑配置 --> 默认值 --> JUnit

在配置选项卡的右上角有 Fork Mode

在默认情况下，这可以更改为`none`或`method`，如果您选择特定的运行配置，您也可以设置`class`为

# r - 我应该如何从 R data.table 中删除 NA 块

> ID：14362614
> 
> 赞同：13
> 
> 时间：2013-01-16T16:04:04.460
> 
> 标签：r, data.table

我有一个`data.table`带有多列键的大 R，其中一些值列包含一些 NA。我想删除一个或多个值列中完全不适用的组，但保留整个组。对键的每一列重复此操作。

举一个简化的例子：

```
library(data.table)
DT = data.table(
    Series = rep(letters[1:12], each = 3), 
    Id = 1:12,
    Value1 = c(1:3, NA, 5:9, rep(NA,3), 1:3, NA, 5:9, rep(NA,3), 1:3, NA, 5:9, rep(NA,3)), 
    Value2 = c(rep(NA,3), 1:4, NA, 6:9, rep(NA,3), 1:9, 1:9, rep(NA,3)))
DT
    Series Id Value1 Value2
 1:      a  1      1     NA
 2:      a  2      2     NA
 3:      a  3      3     NA
 4:      b  4     NA      1
 5:      b  5      5      2
 6:      b  6      6      3
 7:      c  7      7      4
 8:      c  8      8     NA
 9:      c  9      9      6
10:      d 10     NA      7
11:      d 11     NA      8
12:      d 12     NA      9
13:      e  1      1     NA
14:      e  2      2     NA
15:      e  3      3     NA
16:      f  4     NA      1
17:      f  5      5      2
18:      f  6      6      3
19:      g  7      7      4
20:      g  8      8      5
21:      g  9      9      6
22:      h 10     NA      7
23:      h 11     NA      8
24:      h 12     NA      9
25:      i  1      1      1
26:      i  2      2      2
27:      i  3      3      3
28:      j  4     NA      4
29:      j  5      5      5
30:      j  6      6      6
31:      k  7      7      7
32:      k  8      8      8
33:      k  9      9      9
34:      l 10     NA     NA
35:      l 11     NA     NA
36:      l 12     NA     NA
    Series Id Value1 Value2 
```

所以我想放弃：

*   系列：a、d、e、h 和 l
*   ID：4、10、11 和 12

正确的结果应如下所示：

```
 Series Id Value1 Value2
 1:      b  5      5      2
 2:      b  6      6      3
 3:      c  7      7      4
 4:      c  8      8     NA
 5:      c  9      9      6
 6:      f  5      5      2
 7:      f  6      6      3
 8:      g  7      7      4
 9:      g  8      8      5
10:      g  9      9      6
11:      i  1      1      1
12:      i  2      2      2
13:      i  3      3      3
14:      j  5      5      5
15:      j  6      6      6
16:      k  7      7      7
17:      k  8      8      8
18:      k  9      9      9
    Series Id Value1 Value2 
```

* * *

到目前为止我所管理的：

我可以像这样找到 Value1 不适用的系列：

```
DT[, sum(1-is.na(Value1)) == 0, by = Series][V1 == TRUE] 
```

我什至可以做

```
setkey(DT, Series)
DT = DT[DT[, sum(1-is.na(Value)) == 0, by = Series][V1 != TRUE]] 
```

但现在我最终以 V1 出现在决赛桌。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T16:10:14.387

您可以这样做来获取那些不是 ALL`Value`的条目`NA`：

```
setkey(DT, "Series")
DT[, .SD[(!all(is.na(Value)))], by=Series] 
```

需要使用括号`!all`来避免 Matthew 将研究的非连接语法（见评论）。与此相同：

```
DT[, .SD[as.logical(!all(is.na(Value)))], by=Series] 
```

* * *

在此基础上回答新的澄清问题：

```
allNA = function(x) all(is.na(x))     # define helper function
for (i in c("Id","Series"))
    DT = DT[, if (!any(sapply(.SD,allNA))) .SD else NULL, by=i]
DT
    Series Id Value1 Value2
 1:      i  1      1      1
 2:      i  2      2      2
 3:      i  3      3      3
 4:      b  5      5      2
 5:      b  6      6      3
 6:      f  5      5      2
 7:      f  6      6      3
 8:      j  5      5      5
 9:      j  6      6      6
10:      c  7      7      4
11:      c  8      8     NA
12:      c  9      9      6
13:      g  7      7      4
14:      g  8      8      5
15:      g  9      9      6
16:      k  7      7      7
17:      k  8      8      8
18:      k  9      9      9 
```

不过，这会改变顺序。所以不正是要求的结果。以下保持顺序，也应该更快。

```
# starting fresh from original DT in question again
DT[,drop:=FALSE]
for (i in c("Series","Id"))
    DT[,drop:=drop|any(sapply(.SD,allNA)),by=i]
DT[(!drop)][,drop:=NULL][]
    Series Id Value1 Value2
 1:      b  5      5      2
 2:      b  6      6      3
 3:      c  7      7      4
 4:      c  8      8     NA
 5:      c  9      9      6
 6:      f  5      5      2
 7:      f  6      6      3
 8:      g  7      7      4
 9:      g  8      8      5
10:      g  9      9      6
11:      i  1      1      1
12:      i  2      2      2
13:      i  3      3      3
14:      j  5      5      5
15:      j  6      6      6
16:      k  7      7      7
17:      k  8      8      8
18:      k  9      9      9 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-16T16:44:37.827

使用`complete.cases`函数呢？

```
DT[complete.cases(DT),] 
```

它将删除具有 NA 列值的行

```
> DT[complete.cases(DT),]
    Series Id Value1 Value2
 1:      b  4      4      1
 2:      b  5      5      2
 3:      b  6      6      3
 4:      c  7      7      4
 5:      c  8      8      5
 6:      c  9      9      6
 7:      f  4      4      1
 8:      f  5      5      2
 9:      f  6      6      3
10:      g  7      7      4
11:      g  8      8      5
12:      g  9      9      6
13:      j  4      4      1
14:      j  5      5      2
15:      j  6      6      3
16:      k  7      7      4
17:      k  8      8      5
18:      k  9      9      6 
```

# sql-server-2008 - 将文本文件导入 sql Server

> ID：14362619
> 
> 赞同：0
> 
> 时间：2013-01-16T16:04:31.360
> 
> 标签：sql-server-2008

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:17:15.847

There are (at least) two options:

1.  Split the file into two separate files outside SQL Server, using your preferred scripting language; one with the header row and one with the details rows. Then use two `BULK INSERT` statements to load them into two different tables
2.  Use SSIS and a Script Task to split the file into two data flows and process each one separately within the package

Personally I would use option 1, it's much easier. And there's no reason to load the data into a temp table, I would create a permanent table (or tables) just for loading this data. That is a lot easier to work with.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:10:31.040

Thanks for the advice to Pondlife, i got the answer for my own question. Here we go;

Well as we know i have this text file that in the same time has the header and the detail

> HR|001580/06|RG|11/01/2013 12:00|BG|3573|001580| IT|001580/01|1|00147066||1200|852.3|830.3|1.35|UNIDAD|0|31/12/2014 00:00 IT|001580/02|1|00147066||200|852.3|830.3|1.35|UNIDAD|1|31/12/2014 00:00 IT|001580/03|1|00147066||100|852.3|830.3|1.35|UNIDAD|55|31/12/2014 00:00 IT|001580/04|2|00254276||200|852.3|830.3|1.35|UNIDAD|0|31/12/2014 00:00 IT|001580/05|3|00305359||1700|852.3|830.3|1.35|UNIDAD|0|31/12/2014 00:00 IT|001580/06|3|00305359||300|852.3|830.3|1.35|UNIDAD|1|31/12/2014 00:00

So i need to:

1.  Read the file
2.  Insert the header into table1
3.  Insert the detail into table2

For the First Step i create a table and then i use the Sql BulkInsert

```
CREATE TABLE #ImportData
(
    Field VARCHAR(max)
)
-- Insert the data into the first table
BULK INSERT #ImportData
FROM 'PATH FILE'
WITH 
( 
    ROWTERMINATOR = '\n'
) 
```

i got something like this.

* * *

We see that the rows it has delimiters( | ), that means the fields of the each table (HR - Header, IT - Details)

Then for my second and third step i need insert the rows on each table, but also i need to separate each fields of each row, so i create a procedure that receive a string and delimiter and return a table with each field of my string, i created the fields dynamically.

If you want to create the procedure you need to run this first `SET QUOTED_IDENTIFIER OFF` Then you can create it.

```
--EXEC spSplit
--  @InputString = 'IT|001580/01|1|00147066||1200|852.3|830.3|1.35|QUANTITY|0|31/12/2014 00:00', -- VARCHAR(max)
--  @Delimiter = '|' -- VARCHAR(50)

--SET QUOTED_IDENTIFIER OFF
ALTER PROCEDURE spSplit
-- =============================================
-- Author:      Gabriel Jiménez
-- Create date: 2013-01-16
-- Description: Procedimiento creado para retornar
-- valores de cada campo de una cadena delimitada 
-- =============================================
    @InputString    NVARCHAR(max),
    @Delimiter      VARCHAR(50)

AS
BEGIN

    SET QUOTED_IDENTIFIER OFF

    CREATE TABLE #Items (Field1 VARCHAR(max))

    DECLARE @Item           VARCHAR(max)
    DECLARE @ItemList       VARCHAR(max)
    DECLARE @DelimIndex     INT
    DECLARE @PositionField  INT 
    DECLARE @SqlTable       VARCHAR(max)
    DECLARE @SqlUpdate      VARCHAR(max)

    SET @ItemList = @InputString
    SET @DelimIndex = CHARINDEX(@Delimiter, @ItemList, 0)
    SET @PositionField = 0

    WHILE (@DelimIndex != 0) 
    BEGIN

        SET @SqlTable = "ALTER TABLE #Items ADD Field"
        SET @SqlUpdate = "UPDATE #Items SET Field"

        -- Set positions Rows and Fields 
        SET @PositionField = @PositionField + 1
        SET @Item = SUBSTRING(@ItemList, 0, @DelimIndex)

        IF @PositionField = 1
        BEGIN
            -- Insert the first data into the first field created on the table
            INSERT INTO #Items (Field1) VALUES ( @Item )
        END
        ELSE
        BEGIN
            -- Create a dynamic table for the @InputString
            SET @SqlTable = @SqlTable + CONVERT(VARCHAR, @PositionField)+ " VARCHAR(MAX)"
            EXEC(@SqlTable)

            SET @SqlUpdate = @SqlUpdate + 
                CONVERT(VARCHAR, @PositionField) + " = '" + 
                CONVERT(VARCHAR, @Item) +"'"
            EXEC(@SqlUpdate)

        END

        -- Set @ItemList = @ItemList minus one less item
        SET @ItemList = SUBSTRING(@ItemList, @DelimIndex+1, LEN(@ItemList)-@DelimIndex)
        SET @DelimIndex = CHARINDEX(@Delimiter, @ItemList, 0)

    END -- End WHILE

    IF @Item IS NOT NULL -- At least one delimiter was encountered in @InputString
    BEGIN
        SET @SqlTable = "ALTER TABLE #Items ADD Field"
        SET @SqlUpdate = "UPDATE #Items SET Field"
        SET @SqlTable = @SqlTable + CONVERT(VARCHAR, @PositionField+1)+ " VARCHAR(MAX)"
        EXEC(@SqlTable)

        SET @SqlUpdate = @SqlUpdate + 
            CONVERT(VARCHAR, @PositionField+1) + " = '" + 
            CONVERT(VARCHAR, @ItemList) +"'"
        EXEC(@SqlUpdate)

    END
    -- No delimiters were encountered in @InputString, so just return @InputString
    ELSE 
    BEGIN
        SET @SqlTable = "ALTER TABLE #Items ADD Field"
        SET @SqlUpdate = "UPDATE #Items SET Field"
        SET @SqlTable = @SqlTable + CONVERT(VARCHAR, @PositionField+1)+ " VARCHAR(MAX)"
        EXEC(@SqlTable)

        SET @SqlUpdate = @SqlUpdate + 
            CONVERT(VARCHAR, @PositionField+1) + " = '" + 
            CONVERT(VARCHAR, @InputString) +"'"
        EXEC(@SqlUpdate)

    END 

    SELECT * FROM #Items

    SET QUOTED_IDENTIFIER ON 
END -- End Procedure
GO 
```

If you see i comment the three first lines for execute the procedure and you can get something like this

Well we not finish yet, we read the file, and we create the procedure that return the fields and now we need insert into each table, for that i create two temp table with static fields 'cause i know the fields of each table and then create Cursor for read each row on my #ImporData table.

```
CREATE TABLE #Header
(
    Field1 VARCHAR(max),
    Field2 VARCHAR(max),
    Field3 VARCHAR(max),
    Field4 VARCHAR(max),
    Field5 VARCHAR(max),
    Field6 VARCHAR(max),
    Field7 VARCHAR(max),
    Field8 VARCHAR(max)
)
-- Detail table is for the detail items 
CREATE TABLE #Detail
(
    Field1 VARCHAR(max),
    Field2 VARCHAR(max),
    Field3 VARCHAR(max),
    Field4 VARCHAR(max),
    Field5 VARCHAR(max),
    Field6 VARCHAR(max),
    Field7 VARCHAR(max),
    Field8 VARCHAR(max),
    Field9 VARCHAR(max),
    Field10 VARCHAR(max),
    Field11 VARCHAR(max),
    Field12 VARCHAR(max)
)

DECLARE @Field NVARCHAR(max)
DECLARE Header CURSOR        
    FOR SELECT  Field
        FROM    #ImportData
        WHERE SUBSTRING(Field,1,2) = 'HR'
OPEN Header
FETCH NEXT FROM Header INTO @Field

WHILE @@FETCH_STATUS = 0           
    BEGIN 
        INSERT INTO #Header
        EXEC spSplit @Field, '|'
        FETCH NEXT FROM Header INTO @Field
    END                              
CLOSE Header
DEALLOCATE Header

--Detail
--DECLARE @f NVARCHAR(max)
DECLARE Detail CURSOR        
    FOR SELECT  Field
        FROM    #ImportData
        WHERE SUBSTRING(Field,1,2) = 'IT'
OPEN Detail
FETCH NEXT FROM Detail INTO @Field

WHILE @@FETCH_STATUS = 0           
    BEGIN 
        INSERT INTO #Detail
        EXEC spSplit @Field, '|'
        FETCH NEXT FROM Detail INTO @Field
    END                              
CLOSE Detail
DEALLOCATE Detail

--SELECT * FROM #ImportData
SELECT * FROM #Header
SELECT * FROM #Detail

DROP TABLE #ImportData
DROP TABLE #Header
DROP TABLE #Detail 
```

After that if you put all the pieces on the same query you got this.

As i need to.

* * *

Again thanks Pondlife to give me the advice for the split.

# javascript - 如何在 VS2012 中启用 javascript 语法检查？

> ID：14362620
> 
> 赞同：2
> 
> 时间：2013-01-16T16:04:34.137
> 
> 标签：javascript, visual-studio-2012

如何设置 VS2012 来捕获 javascript 语法错误？我一直在使用[http://www.javascriptlint.com/](http://www.javascriptlint.com/)来检查我的 javascript。VS2012有更简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:07:17.743

[Web Essentials 扩展](http://visualstudiogallery.msdn.microsoft.com/6ed4c78f-a23e-49ad-b5fd-369af0c2107f)可以使用 JSHint 做到这一点。

[http://vswebessentials.com/features/javascript](http://vswebessentials.com/features/javascript)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T16:07:50.147

我看到有一个用于 VS2012 的 JSLint 插件

[http://visualstudiogallery.msdn.microsoft.com/1a417c37-4d6f-43ca-b753-6ea6eb5041fd](http://visualstudiogallery.msdn.microsoft.com/1a417c37-4d6f-43ca-b753-6ea6eb5041fd)

# css - 更改 Div 字体大小

> ID：14362622
> 
> 赞同：0
> 
> 时间：2013-01-16T16:04:46.493
> 
> 标签：css, html

我想更改在 div 中找到的几个 rss 链接的字体大小

```
<div class="rss">
    <%
                    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
                    DocumentBuilder db = dbf.newDocumentBuilder();
                    Document d = db.parse("http://www.engadget.com/rss.xml");
                    d.getDocumentElement().normalize();
                    NodeList items = d.getElementsByTagName("item");
                    for(int y = 0 ; y< 5 ; y++)
                    {
                    String title = "", description = "" , link = "";
                    NodeList subitems = (items.item(y)).getChildNodes();
                    for(int x = 0 ; x< subitems.getLength() ; x++)
                    {
                    if(subitems.item(x).getNodeType() == Element.ELEMENT_NODE)
                    {
                    if(subitems.item(x).getNodeName().equals("title")&& title.isEmpty())
                    {
                    title = subitems.item(x).getTextContent();
                    } else
                    if(subitems.item(x).getNodeName().equalsIgnoreCase("link") && link.isEmpty())
                    {
                    link = subitems.item(x).getTextContent();
                    } else
                    if(subitems.item(x).getNodeName().equals("description") && description.isEmpty())
                    {
                    description = subitems.item(x).getTextContent();
                    }
                    }
                    if(!description.isEmpty()&&!link.isEmpty()&&!title.isEmpty())
                    {
                    %>

                    <a href="<%=link%>"><%=title%></a>
                    <br/>
                    <%
                    break;
                    }
                    }
                    }
                    %>
</div> 
```

从css文件我试过这个：

```
 .rss
    {
       font-size: x-small;
    } 
```

但后来我注意到这个 css 可能正在覆盖它：

```
 body, div, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; font-size: 14px; direction: ltr; }

p { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-size: 14px; line-height: 1.6; margin-bottom: 17px; }
p.lead { font-size: 17.5px; line-height: 1.6; margin-bottom: 17px; } 
```

所以我也尝试添加：

```
 div.rss{
    font-size: xx-small;
    } 
```

还是行不通。

我该怎么做才能使这些链接变小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:36:22.890

为了更好地定义您的 css 类，您应该尝试以下操作。

```
.rss a { } 
```

当然，这是假设您没有将它包装在任何其他标签中，例如`li`标签。如果您也可以发布实际的html，那将更有帮助。

您可能有一个类覆盖了`font-size`您的链接，因此将其更改为上述 css 应该有助于用您的新设置覆盖 css。

# jquery - 使用 pjax 时销毁/隐藏 twitter 引导工具提示

> ID：14362628
> 
> 赞同：4
> 
> 时间：2013-01-16T16:05:04.257
> 
> 标签：jquery, ruby-on-rails, dom, twitter-bootstrap, pjax

在 Rails 应用程序上使用 pjax 时，[没有从 DOM](https://github.com/twitter/bootstrap/issues/2298)元素中删除twitter 引导工具提示，我遇到了一些问题。例如，当我将鼠标悬停在带有工具提示的元素上，然后单击指向另一个页面的链接时，工具提示被冻结。我目前删除工具提示的解决方案如下：

```
App.Utils.Tooltip = {

  triggerAll: function(element) {
    if (element.data('tooltip-loaded') == true) { return; }
    element.data('tooltip-loaded', true).tooltip().trigger('mouseover');
  },

  destroyAll: function() {
    var tooltips = ($('[rel=tooltip]').get());

    $.each(tooltips, function() {
      $(this).tooltip('destroy');
     });
  }

};

$(document).on('mouseover', '[rel=tooltip]', function() {
  App.Utils.Tooltip.triggerAll($(this));
});

$(document).on('pjax:beforeSend', function() {
  App.Utils.Tooltip.destroyAll();
}); 
```

有没有更有效/更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T15:15:05.517

工具提示插件会阻止您将其实例化两次，因此无需进行检查，您可以将代码简化为以下内容。

```
App.Utils.Tooltip = {
  triggerAll: function(element) {
    element.tooltip('show');
  },
  destroyAll: function() {
    $('[rel=tooltip]').tooltip('destroy');
  }
}; 
```

# python - 重命名熊猫数据透视表而不丢失轴标签

> ID：14362632
> 
> 赞同：0
> 
> 时间：2013-01-16T16:05:26.750
> 
> 标签：python, pandas, pivot-table

当我在数据透视表上调用重命名时，我丢失了轴标签：

```
In [5]: df = pd.DataFrame(dict(x=[0,0,1,0,1], y=[1,0,1,1,0], z=[0,0,1,0,1]))
In [6]: pt = pd.pivot_table(df, 'z', cols='x', rows='y')
In [7]: print pt
x  0  1
y      
0  0  1
1  0  1
In [8]: labels = {0:'False', 1:'True'}
In [9]: print pt.rename(index=labels, columns=labels) # discards "x" and "y"
       False  True
False      0     1
True       0     1 
```

有没有办法在不丢失轴标签的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:33:05.547

当您旋转时，x 和 y 的值*是*标签，这是预期的行为。

尝试这个：

```
df['x'] = df['x'] == 1
pt = pandas.pivot_table(df, 'z', cols='x', rows='y')
print pt
x  False  True 
y               
0      0      1
1      0      1 
```

# regex - 模式属性并且匹配的正则表达式不起作用

> ID：14362638
> 
> 赞同：1
> 
> 时间：2013-01-16T16:05:40.583
> 
> 标签：regex, input

我有一个文本类型的输入元素，我希望只允许输入具有 . 在每个其他角色之间。我对数据完整性有点着迷，并希望从用户开始尽可能多地构建故障保存。

表单设置为接收如下输入：

```
Firstname:     |John____________________|
First Letters: |J.W.H.__________________|
Lastname:      |Baker___________________| 
```

我有以下正则表达式可以正常工作，但不能在表单的模式字段中工作。

```
/.{1}\./g 
```

这是我用来匹配的表格，但如果我填写正确的模式，它不会让我通过。

```
<input type="text" name="firstletters" pattern="/.{1}\./g" title="First name letters with a . in between each letter."> 
```

有人有解决方案吗？字符串的长度可能会有所不同，具体取决于要添加到数据库中的人的名字的数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:10:44.883

您应该使用带有 ^(start of string),$(end of string) 的组

```
^(.\.)+$ 
```

# permissions - 指南针对生成的 CSS 文件设置权限

> ID：14362641
> 
> 赞同：2
> 
> 时间：2013-01-16T16:05:42.397
> 
> 标签：permissions, sass, compass-sass, phing

很简单，当 Compass 遇到一个新的 SCSS 文件时，它会生成一个新的 CSS 文件。我可以为这些设置默认权限吗，因为默认情况下它设置它们时没有正确的权限让浏览器读取它们（给出 403 禁止错误）。如果有一种方法可以设置文件以继承其目录的权限，这也是可以接受的，就像在 Phing 中的复制任务期间更改权限的方法一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-10T12:32:47.127

我不知道你的开发环境是如何设置的，但是我使用[grunt](http://gruntjs.com)来编译我的 sass 文件。使用 grunt，您可以完全控制构建过程，并且可以在成功构建后执行脚本（fx 清除前端缓存或在必要时设置文件权限）。

马库斯

# android - 居中对齐的登录屏幕

> ID：14362648
> 
> 赞同：1
> 
> 时间：2013-01-16T16:06:13.157
> 
> 标签：android, android-layout

我想设计一个登录屏幕。内容应水平和垂直对齐中心。到目前为止，我已经创建了这个：

![在此处输入图像描述](../Images/847a233d5ec4b9cd3d72180216d3a5db.png)

目前，我已将 marginTop 赋予我的顶部元素，即图标。但我认为这不是正确的方法。我希望用户名字段位于屏幕的垂直中心。这会将整个内容移动到屏幕中间。

到目前为止，这是我的布局代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".LoginActivity" 
    android:background="#d1d6df">

    <ImageView 
        android:id="@+id/imgIcon"
        android:src="@drawable/ic_launcher"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="Icon"
        android:layout_marginBottom="20dp"
        android:layout_marginTop="120dp"
        android:layout_centerHorizontal="true"/>

    <EditText
        android:id="@+id/txtUsername"
        android:hint="Username"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/imgIcon"
        android:ems="10"
        android:inputType="text">

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/txtPassword"
        android:hint="@string/passwordHint"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/txtUsername"
        android:ems="10"
        android:inputType="textPassword">
    </EditText>

    <Button
        android:text="@string/loginButtonText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/txtPassword"
        />

</RelativeLayout> 
```

此外，我希望登录按钮从其上兄弟中获取宽度，即密码字段。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:10:04.370

1.  删除`marginTop`并添加`android:gravity="center"`您的`relativeLayout`
2.  添加`android:layout_alignLeft="@+id/txtPassword"`和`android:layout_alignRight="@+id/txtPassword"`到您的按钮

希望对你有帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:14:40.883

使用此代码

我已经检查过它看起来像如图所示。

![在此处输入图像描述](../Images/20fd40d5220ec81e8d9671113ed794eb.png)

**XML 代码：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".LoginActivity" 
    android:gravity="center"
    android:background="#d1d6df">

    <ImageView 
        android:id="@+id/imgIcon"
        android:src="@drawable/ic_launcher"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="Icon"
        android:layout_marginBottom="20dp"

        android:layout_centerHorizontal="true"/>

    <EditText
        android:id="@+id/txtUsername"
        android:hint="Username"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/imgIcon"
        android:layout_centerVertical="true"
        android:ems="10"
        android:inputType="text">

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/txtPassword"
        android:hint="passwordHint"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/txtUsername"
        android:ems="10"
        android:inputType="textPassword">
    </EditText>

    <Button
        android:text="@string/loginButtonText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/txtPassword"
        android:layout_alignLeft="@+id/txtPassword" 
        android:layout_alignRight="@+id/txtPassword"
        />

</RelativeLayout> 
```

# ios - iOS Twitter NSURLErrorDomain 代码=-1012

> ID：14362651
> 
> 赞同：8
> 
> 时间：2013-01-16T16:06:23.613
> 
> 标签：ios, twitter, nsurlrequest, nsurlerrordomain

我正在尝试通过在我的应用程序中使用 twitter 唱歌来获取用户的联系方式。我在 github 上发现[了这个项目，看起来非常好。](https://github.com/malcommac/DMTwitterOAuth)我只遇到一个问题。如果我使用来自 twitter 的新应用程序消费者密码和消费者密钥代码运行它，它会给我一个错误：

```
Error Domain=NSURLErrorDomain Code=-1012 "The operation couldn’t be completed. (NSURLErrorDomain error -1012.)" UserInfo=0x6898e80 {NSErrorFailingURLKey=https://api.twitter.com/oauth/request_token, NSErrorFailingURLStringKey=https://api.twitter.com/oauth/request_token, NSUnderlyingError=0x68980e0 "The operation couldn’t be completed. (kCFErrorDomainCFNetwork error -1012.)"} 
```

控制台中的输出是：

```
2013-01-16 17:55:24.367 DMTwitterOAuth[3411:c07] current status = Prompt for user data and request token to server
2013-01-16 17:55:24.371 DMTwitterOAuth[3411:c07] current status = Requesting token for current user's auth data...
2013-01-16 17:55:25.433 DMTwitterOAuth[3411:c07] current status = Token received from server 
```

在我收到警报视图后，它说它遇到了一个`NSURLErrorDomain`.

另一方面，如果我使用来自另一个 twitter 应用程序的一些其他代码运行它，它可以工作，为我提供有关用户的所有详细信息。我只是不明白为什么某些键有效，而另一些则无效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T08:46:00.313

错误代码`-1012`是`kCFURLErrorUserCancelledAuthentication`。这应该意味着在某处调用某些代码`[sender cancelAuthenticationChallenge:]`以响应身份验证质询。这可能是 DMTwitterOAuth 内部的代码，但也有可能是 Apple 自己的 URL 加载系统内部的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T19:12:46.137

确保您的 twitter[应用程序访问设置](https://dev.twitter.com/apps)适合您尝试执行的操作。如果您尝试发布推文，您可能需要读取和写入权限。

有关更多信息，请参阅[应用程序模型文档](https://dev.twitter.com/docs/application-permission-model)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-10T16:40:19.703

它也可能只是请求标头中的错误身份验证数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-29T09:28:58.427

访问下面的 url 它解决了通常不是特定于这个 twitter 上下文的问题。它会给你一些想法

[https://stackoverflow.com/a/17920301/730807](https://stackoverflow.com/a/17920301/730807)

我希望这有帮助..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-24T23:35:42.480

据 Twitter 称，[该修复程序已](https://twittercommunity.com/t/ios-twitter-kit-1-10-1-twtrloginbutton-responds-with-1012-error/52766/55)在 SDK 版本 1.14.1 中生效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-25T04:49:40.847

我最近发现这个问题发生在以前 Twitter 登录工作的项目中。出于这个原因，我认为这是由于 iOS 的变化或 Twitter 功能的升级。

主要问题之一是几乎不可能重现此问题，这里有一个非常有趣的 Twitter 社区博客在讨论它：[https ://twittercommunity.com/t/ios-twitter-kit-1-10-1- twtrloginbutton-responds-with-1012-error/52766](https://twittercommunity.com/t/ios-twitter-kit-1-10-1-twtrloginbutton-responds-with-1012-error/52766)

Twitter 工作人员正在尝试解决此问题，但无法重新创建它以查看问题所在。

问题似乎是用户的 Twitter 帐户已与他们的设备断开连接。这意味着 Twitter Auth Helper 无法获取您的详细信息以正确登录。

解决此问题的方法是进入设置 -> Twitter，然后单击您的 Twitter 帐户名称。对我来说，这提示我重新输入密码，因为该帐户当前未连接。非常令人沮丧且很难找到，因为在您点击您的 Twitter 帐户之前没有任何迹象。

我发现在尝试使用 Firebase 使用 Twitter 帐户登录时应用了此解决方案。

# ios - 丢失分发的私钥，推送通知

> ID：14362652
> 
> 赞同：2
> 
> 时间：2013-01-16T16:06:23.747
> 
> 标签：ios, push-notification

通过重新安装 OSX，我丢失了分发证书。（愚蠢的我）其中一个是带有推送通知的应用程序的顶点。如果我重新生成该证书，是否需要新证书才能从我的服务器发送推送通知？这会是旧版本的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:59:23.607

您似乎只是丢失了 Mac 上的证书。但生成的分发证书仍在您的 ios 开发中心/itunes 中。您需要做的就是下载分发证书并
再次推送证书并将证书安装在您的钥匙串中。

# css - 自动调整 SVG 大小？

> ID：14362656
> 
> 赞同：13
> 
> 时间：2013-01-16T16:06:28.153
> 
> 标签：css, svg

这是一个[代码演示](http://jsfiddle.net/y59MR/1/)

我有一个高度未知的 SVG。在我加载 json 并使用 javascript+math 后我可以弄清楚，但是有没有我可以用来动态调整大小的 css？

CSS：

```
svg {
  width: 500px;
  height: 9000px;
}
.tabme {
  border:3px solid red;
  height: 200px;
   overflow:scroll;
} 
```

html:

```
<div class="tabme">
  <div id="Chart">
    <div class="chartbody" />
    <svg>
      <rect width="190" y="0" height="16" x="175" />
      <rect width="190" y="20" height="16" x="175" />
      <rect width="190" y="40" height="16" x="175" />
      <rect width="190" y="60" height="16" x="175" />
      <rect width="190" y="80" height="16" x="175" />
      <rect width="190" y="100" height="16" x="175" />
      <rect width="190" y="120" height="16" x="175" />
      <rect width="190" y="140" height="16" x="175" />
      <rect width="190" y="160" height="16" x="175" />
      <rect width="190" y="180" height="16" x="175" />
      <rect width="190" y="200" height="16" x="175" />
      <rect width="190" y="220" height="16" x="175" />
      <rect width="190" y="240" height="16" x="175" />
      <rect width="190" y="260" height="16" x="175" />
      <rect width="190" y="280" height="16" x="175" />
      <rect width="190" y="300" height="16" x="175" />
    </svg>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-16T17:09:54.563

如果 SVG 元素没有任何宽度和高度属性，则应[根据 CSS 规范计算](http://www.w3.org/TR/CSS21/visudet.html#inline-replaced-width)宽度/高度，正如 Robert Longson 指出的那样。但是，这些值不会反映 SVG 内容的正确尺寸。您可以使用以下方法找出正确的尺寸和位置`getBBox()`：

```
// Javascript to run after document load
var svg = document.getElementsByTagName("svg")[0];
var bbox = svg.getBBox();
svg.setAttribute("width", bbox.width + "px");
svg.setAttribute("height", bbox.height + "px");
svg.setAttribute("viewBox", `${bbox.x} ${bbox.y} ${bbox.width} ${bbox.height}`);
```

```
<svg xmlns="http://www.w3.org/2000/svg" style="background-color: red">
  <rect x="30" y="40" width="50" height="60"/>
</svg>
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-12T23:39:33.390

另一种方法是与上面的 JS 类似，但使用来自调用的值设置`viewBox`（注意，不是`viewbox`！）而不是`width`和`height`来自 JS 。`getBBox()`然后使用`preserveAspectRatio="xMidYMid meet"`或类似。

```
var svg = document.getElementById("x1");
svg.setAttribute("viewBox", "0 0 32 18.4"); 
```

[https://jsfiddle.net/t88pLgbb/4/](https://jsfiddle.net/t88pLgbb/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-26T18:08:48.493

受托马斯回答的启发，我是这样做的：

```
if (true) {
  let svg = document.getElementById("bleh");
  let bb = svg.getBBox();
  svg.setAttribute("width", bb.width);
  svg.setAttribute("height", bb.height);
  svg.setAttribute("transform",
    "translate(-" + bb.width / 2 + ",-" + bb.height / 2 + ") \
    scale(" + 600 / bb.width + "," + 250 / bb.height + ") \
    translate(" + bb.width / 2 + "," + bb.height / 2 + ")");
}
```

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>

<div style="width: 600px; height: 250px; border: 1px solid blue;">
  <svg id="bleh">
    <path d="M0 0 T100 400 T500 500 T800 200 T0 0" fill="purple" opacity="0.8" />
    <path d="M0 0 L100 400 L500 500 L800 200 L0 0" fill="none" stroke="black" stroke-width="2" />
  </svg>
</div>

</body>
</html>
```

目标：尝试将整个 SVG 图自动适应大小为 600*250 的 div。

基本上我所做的是获取 SVG 形成后的宽度和高度，将其向左和向上平移 50%，根据 600*250 div 和 SVG 图形尺寸之间的宽度和高度差的比率进行缩放，以及然后将其向右和向下翻译回 50%。这样，当我缩放它时它保持居中。（它似乎不喜欢这种方式的实际百分比......）

# android - Android：如何在 gmail 应用程序中创建类似于列表背景的列表？

> ID：14362658
> 
> 赞同：1
> 
> 时间：2013-01-16T16:06:35.497
> 
> 标签：android

在附加的 Gmail 应用截图中，ListView 的背景似乎在列表的右侧有一个垂直渐变，以与相邻的 View 分开。

我知道我可以在 xml 中定义 GradientDrawable，但是如何使用它来绘制渐变作为列表一侧的背景，同时将列表的其余部分绘制为浅灰色？

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
  <gradient
      android:startColor="#DDDDDD"
      android:endColor="#CCCCCC"
      android:angle="0" />
</shape> 
```

![在此处输入图像描述](../Images/35c8e246a3394f9fd2e23ec6fba34bde.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:13:35.160

您只需将您创建的 cutsom 可绘制对象分配为 ListView 项目的背景属性。您可以在用于定义列表元素的 XML 布局中执行此操作。

例如，我使用此布局 (list_item.xml) 为我的列表项定义自定义布局（并指定渐变作为背景）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/list_item_gray_gradient"
    android:orientation="horizontal"

... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:21:48.980

您可以创建一个可绘制对象，并将其放置在包含列表项的布局的右侧。因此，您的渐变是视图中的一个单独组件，它将您的 ListView 分散到右侧的视图中。

像这样的伪代码

```
<LinearLayout
   android:orientation="horizontal"

   <ListView

   />

   <ImageView
        android:background="@drawable/gradient_drawable"
   >

> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:33:23.347

我可以将可绘制对象设置为 95% 浅灰色，渐变在右半部分，使用以下命令：

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
  <gradient
      android:startColor="#DDDDDD"
      android:centerColor="#DDDDDD"
      android:endColor="#CCCCCC"
      android:centerX=".95"
      android:centerY=".95"
      android:angle="0" />
</shape> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T16:46:01.100

首先创建这个`drawable`：**（drawable/list_gray_gradient.xml）**

```
<?xml version="1.0" encoding="utf-8"?>

<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<!-- This is the line -->
<item>
      <shape>
            <solid android:color="#CCCCCC" />
      </shape>
</item>
<!-- This is the main color -->
<item android:right="10dp">
     <shape>
           <solid android:color="#DDDDDD" />
     </shape>
</item>

</layer-list> 
```

然后将其用于您的`list item layout`: **(layout/list_item.xml)**

```
<RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"            
        android:background="@drawable/list_gray_gradient" >
</RelativeLayout> 
```

# android - 如何让下载管理器覆盖现有文件而不是在 android 中重命名文件

> ID：14362659
> 
> 赞同：16
> 
> 时间：2013-01-16T16:06:36.423
> 
> 标签：android

我在 sdcard 上有一个数据库文件，现在当下载一个新的数据库文件时，我需要它来覆盖旧的而不是重命名它，这是我的下载代码。下载代码运行良好..

```
 public void startDownload() {
        pDialog = new ProgressDialog(this);
        pDialog.setMessage("Downloading Database. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setMax(100);
        pDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        pDialog.setCancelable(false);

    Uri uri=Uri.parse(file_url);

    String baseDir = Environment.getExternalStorageDirectory().getAbsolutePath();
    File ADirectory = new File(baseDir +"/test");
    ADirectory.mkdirs();

    lastDownload=
      mgr.enqueue(new DownloadManager.Request(uri)
                  .setAllowedNetworkTypes(DownloadManager.Request.NETWORK_WIFI |
                                          DownloadManager.Request.NETWORK_MOBILE)
                  .setAllowedOverRoaming(false)
                  .setTitle(" Database File")
                  .setDescription("Please wait....test Database downloading.")
                  .setDestinationInExternalPublicDir("/test", "/testing"));

    pDialog.show();
    //v.setEnabled(false);
   // findViewById(R.id.query).setEnabled(true);
  } 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-08-15T00:57:08.843

当您将文件提交给下载管理器时，请检查该文件是否已存在。然后删除它。

```
private boolean isFileExists(String filename){

    File folder1 = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + filename);
    return folder1.exists();

}

private boolean deleteFile( String filename){

    File folder1 = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + filename);
    return folder1.delete();

} 
```

# hibernate - JoinTable 上的级联删除的适当注释是什么？

> ID：14362661
> 
> 赞同：0
> 
> 时间：2013-01-16T16:07:02.037
> 
> 标签：hibernate, annotations, cascading-deletes, jointable

我正在使用 Hibernate 4.1.0.Final、Spring 3.1.1.RELEASE 和 MySQL 5.5。我有这个实体...

```
@GenericGenerator(name = "uuid-strategy", strategy = "uuid.hex")
@Entity
@Table(name = "user")
@Cacheable
public class User implements Serializable
{
    …    
    @OneToMany(fetch = FetchType.EAGER)
    @JoinTable(name = "user_contracts",
              joinColumns = @JoinColumn(name = "user_id"),
              inverseJoinColumns = @JoinColumn(name = "contract_id"))
    /* List of contracts for which this user has registered. */
    private Set<Contract> contracts; 
```

如何注释“contracts”字段，以便如果删除 Contract 对象，其在连接表（“user_contracts”）中的相应记录也被删除并正确更新用户实体？我希望该字段反映 MySQL 表声明...</p>

```
CREATE TABLE `user_contracts` (
  `USER_ID` varchar(32) COLLATE utf8_bin NOT NULL,
  `CONTRACT_ID` varchar(32) COLLATE utf8_bin NOT NULL,
  UNIQUE KEY `UK_USER_CONTRACTS` (`USER_ID`,`CONTRACT_ID`),
  KEY `FK2_USER_CONTRACTS` (`CONTRACT_ID`),
  CONSTRAINT `FK1_USER_CONTRACTS` FOREIGN KEY (`USER_ID`) REFERENCES `user` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION,
  CONSTRAINT `FK2_USER_CONTRACTS` FOREIGN KEY (`CONTRACT_ID`) REFERENCES `contract` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin 
```

谢谢， - 戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:09:35.157

尝试

`@OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.DELETE)`

# ruby - jRuby 中的 FFI 代码段错误，但不是 MRI Ruby

> ID：14362662
> 
> 赞同：0
> 
> 时间：2013-01-16T16:07:02.830
> 
> 标签：ruby, segmentation-fault, jruby, ffi, sqlanywhere

我正在使用 FFI 将用 C 编写的 Ruby gem 移植到 Ruby。

当我使用 MRI Ruby 运行测试时，没有任何段错误。在 jRuby 中运行时，出现段错误。

这是我认为负责的测试中的代码：

```
if type == Date or type == DateTime then
  assert_nil param.set_value(value.strftime("%F %T"));
else
  assert_nil param.set_value(value);
end
@api.sqlany_bind_param(stmt, 0, param)
puts "\n#{param.inspect}"

#return if String === value or Date === value or DateTime === value
assert_succeeded @api.sqlany_execute(stmt) 
```

运行 sqlany_execute 时会发生分段错误，但仅当传递给 set_value 的对象属于 String 类时。

sqlany_execute 只使用 FFI 的 attach_function 方法。

param.set_value 更复杂。我将只关注字符串特定的部分。这是原始的C代码

```
case T_STRING:
    s_bind->value.length = malloc(sizeof(size_t));
    length = RSTRING_LEN(val);
    *s_bind->value.length = length;
    s_bind->value.buffer = malloc(length);
    memcpy(s_bind->value.buffer, RSTRING_PTR(val), length);
    s_bind->value.type = A_STRING;
    break; 
```

[https://github.com/in4systems/sqlanywhere/blob/db25e7c7a2d5c855ab3899eacbc7a86b91114f53/ext/sqlanywhere.c#L1461](https://github.com/in4systems/sqlanywhere/blob/db25e7c7a2d5c855ab3899eacbc7a86b91114f53/ext/sqlanywhere.c#L1461)

在我的港口，这变成了：

```
when String
  self[:value][:length] = SQLAnywhere::LibC.malloc(FFI::Type::ULONG.size)
  length = value.bytesize
  self[:value][:length].write_int(length)
  self[:value][:buffer] = SQLAnywhere::LibC.malloc(length + 1)
  self[:value][:buffer_size] = length + 1

  ## Don't use put_string as that includes the terminating null
  # value.each_byte.each_with_index do |byte, index|
  # self[:value][:buffer].put_uchar(index, byte)
  # end
  self[:value][:buffer].put_string(0, value)
  self[:value][:type] = :string 
```

[https://github.com/in4systems/sqlanywhere/blob/e49099a4e6514169395523391f57d2333fbf7d78/lib/bind_param.rb#L31](https://github.com/in4systems/sqlanywhere/blob/e49099a4e6514169395523391f57d2333fbf7d78/lib/bind_param.rb#L31)

我的问题是：是什么导致 jRuby 出现段错误，我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T05:24:46.803

这个答案可能过于详细，但我认为对于那些将来遇到类似问题的人来说，深入一点会很好。

看起来这是你的问题：

```
self[:value][:length].write_int(length) 
```

什么时候应该是：

```
self[:value][:length].write_ulong(length) 
```

在 64 位系统上，内存 self[:value][:length] 指向的字节 4..7 可能包含垃圾（因为 malloc 不会清除它返回的内存），并且当本机代码读取 size_t 数量时在该地址处，它将是垃圾，可能表示缓冲区大于 4 GB。

例如，如果字符串长度确实是 15 个字节，则设置低 4 位，高 60 位应全为零。

```
bit   0   1   2   3   4      32       63
    +---+---+---+---+---+ ~ +---+ ~ +---+
    | 1 | 1 | 1 | 1 | 0 | ~ | 0 | ~ | 0 |
    +---+---+---+---+---+ ~ +---+ ~ +---+ 
```

如果只设置了高 32 位中的一位，那么您将获得 > 4 GB 的值

```
bit   0   1   2   3   4      32       63
    +---+---+---+---+---+ ~ +---+ ~ +---+
    | 1 | 1 | 1 | 1 | 0 | ~ | 1 | ~ | 0 |
    +---+---+---+---+---+ ~ +---+ ~ +---+ 
```

这将是 4294967311 字节的长度。

解决它的一种方法是定义一个 SizeT 结构并将其用于长度。例如

```
class SizeT < FFI::Struct
  layout :value, :size_t
end

self[:value][:length] = SQLAnywhere::LibC.malloc(SizeT.size)
length = value.bytesize
SizeT.new(self[:value][:length])[:value] = length 
```

或者你可以修改 FFI::Pointer:

```
class FFI::Pointer
  if FFI.type_size(:size_t) == 4
    def write_size_t(val)
      write_int(val)
    end
  else
    def write_size_t(val)
      write_long_long(val)
    end
  end
end 
```

为什么它只在 JRuby 上出现段错误，而不是在 MRI 上？也许 MRI 是一个 32 位的可执行文件（打印 FFI.type_size(:size_t) 的值会告诉你）。

# java - 无法使用 facebook 按钮登录到我的 android 应用程序

> ID：14362664
> 
> 赞同：1
> 
> 时间：2013-01-16T16:07:05.643
> 
> 标签：java, android

我的应用程序已经有一个登录程序，但如果我尝试使用 FB 登录，则尝试与 facebook graph api 集成，应用程序不接受。帮助我在这里粘贴 FB 按钮代码

```
case R.id.fbButton:
            authenticateOnFacebook();
            sendFacebookIdToServer(APP_ID, getApplicationContext());
            break; 
```

facebook 的身份验证方法，在此我也使用 getcredentials 方法。

```
public void authenticateOnFacebook()
     {
        try{
            String[] permissions={"user_birthday", "email"};
            facebook.authorize(this.activity, permissions, Facebook.FORCE_DIALOG_AUTH, new DialogListener() {

                @Override
                public void onFacebookError(FacebookError e) {
                }

                @Override
                public void onError(DialogError e) {
                }

                @Override
                public void onComplete(Bundle values) {
                    try{
                        String facebookId = getCredentials((String) values.get("access_token"));
                        sendFacebookIdToServer(facebookId, context);
                    } catch(Exception e){
                        e.printStackTrace();
                    }
                }

                @Override
                public void onCancel() {

                }
            });
        } catch(Exception e){
            e.printStackTrace();
        }
     }

     protected String getCredentials(String token) {
        JSONObject jObject=null;
        String facebookId = null; 

        Bundle params = new Bundle();
        params.putString(Facebook.TOKEN, token);

        try {
            jObject = new JSONObject(facebook.request("me", params));
        }catch(Exception e){
            e.printStackTrace();
        }

        if(jObject!=null)
        {
            try {  
                facebookId = jObject.getString("id");
            }catch(Exception e){
                e.printStackTrace();
            }
        }
        return facebookId;
    } 
```

为了向我的服务器发送请求以进行身份​​验证，我正在使用这种方法

```
public void sendFacebookIdToServer(String facebookId, Context context){
        String accessToken = null;
        DatabaseHelper helper = new DatabaseHelper(context);
        DatabaseUtility dao = new DatabaseUtility(helper);
        try {
            accessToken = dao.getAccessToken();
        } catch (Exception e1) {
            e1.printStackTrace();
        }
        Map<String , String> params = new HashMap<String,String>();
        params.put(Constants.FACEBOOK_ID, facebookId);
        params.put(Constants.ACCESS_TOKEN_PARAM, accessToken);
        Status status = null;
        try {
            status = Utils.addFacebookAccount(params, context);
        } catch (NullPointerException e) {
            e.printStackTrace();
        } catch (JSONException e) {
            e.printStackTrace();
        }

        if((status != null) && (status.getStatus().equalsIgnoreCase(Constants.SUCCESS))){
            navigateNowLisnScreenWithSuccess();
        }
     }

    private void navigateNowLisnScreenWithSuccess() {
        // TODO Auto-generated method stub
        Intent i = new Intent(context,TabView.class);
        startActivity(i);   
    } 
```

日志猫

```
01-16 21:40:26.098: E/Cursor(1299):     at android.view.View.performClick(View.java:2408)
01-16 21:40:26.108: E/Cursor(1299): Finalizing a Cursor that has not been deactivated or closed. database = /data/data/com.lisnx.activity/databases/lisnx.db, table = access_token, query = SELECT token FROM access_token
01-16 21:40:26.108: E/Cursor(1299): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
01-16 21:40:26.108: E/Cursor(1299):     at android.database.sqlite.SQLiteCursor.<init>(SQLiteCursor.java:210)
01-16 21:40:26.108: E/Cursor(1299):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:53)
01-16 21:40:26.108: E/Cursor(1299):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1345)
01-16 21:40:26.108: E/Cursor(1299):     at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1229)
01-16 21:40:26.108: E/Cursor(1299):     at com.lisnx.activity.LoginActivity.sendFacebookIdToServer(LoginActivity.java:223)
01-16 21:40:26.108: E/Cursor(1299):     at com.lisnx.activity.LoginActivity.onClick(LoginActivity.java:263)
01-16 21:40:26.108: E/Cursor(1299):     at android.view.View.performClick(View.java:2408)
01-16 21:40:26.108: E/Cursor(1299):     at android.view.View$PerformClick.run(View.java:8816)
01-16 21:40:26.108: E/Cursor(1299):     at android.os.Handler.handleCallback(Handler.java:587)
01-16 21:40:26.108: E/Cursor(1299):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-16 21:40:26.108: E/Cursor(1299):     at android.os.Looper.loop(Looper.java:123)
01-16 21:40:26.108: E/Cursor(1299):     at android.app.ActivityThread.main(ActivityThread.java:4627)
01-16 21:40:26.108: E/Cursor(1299):     at java.lang.reflect.Method.invokeNative(Native Method)
01-16 21:40:26.108: E/Cursor(1299):     at java.lang.reflect.Method.invoke(Method.java:521)
01-16 21:40:26.108: E/Cursor(1299):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-16 21:40:26.108: E/Cursor(1299):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-16 21:40:26.108: E/Cursor(1299):     at dalvik.system.NativeStart.main(Native Method) 
```

# xcode - xcode 从设备中删除 SQL 数据库

> ID：14362666
> 
> 赞同：0
> 
> 时间：2013-01-16T16:07:09.807
> 
> 标签：xcode

我正在使用 xcode 4.5 和 ios 模拟器 6.0，我想删除正在使用的数据库，但我不知道如何操作。我想建立一个全新的数据库。

我读到可以只删除 Macintosh/Library/Application Support/iOS Simulator 下的文件。但是这个文件夹在我的 mac 上不存在。

那么如何删除我的数据库呢？

```
- (void)createOrOpenDB {
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docPath = [path objectAtIndex:0];

    dbPathString = [docPath stringByAppendingPathComponent:@"WorkoutPlans.db"];

    char *error;

    NSFileManager *fileManager = [NSFileManager defaultManager];

    if(![fileManager fileExistsAtPath:dbPathString]) {
        const char *dbPath = [dbPathString UTF8String];

        if (sqlite3_open(dbPath, &workoutPlansDB) == SQLITE_OK) {
            const char *sql_cr_wp = "CREATE TABLE IF NOT EXISTS WORKOUTPLANS (ID INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , NAME TEXT NOT NULL  UNIQUE , DESCRIPTION TEXT NOT NULL  UNIQUE)";
            const char *sql_cr_en = "CREATE TABLE TABLE IF NOT EXISTS ENTITY (ID INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , NAME TEXT NOT NULL  UNIQUE , DESCRIPTION TEXT NOT NULL  UNIQUE )";
            const char *sql_cr_ex = "CREATE TABLE IF NOT EXISTS EXERCISE (ID INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , NAME TEXT NOT NULL  UNIQUE , DESCRIPTION TEXT NOT NULL  UNIQUE , REPS TEXT NOT NULL , WEIGHT TEXT NOT NULL)";
            const char *sql_cr_plen = "CREATE TABLE IF NOT EXISTS WPEN (PLANID, ENID, FOREIGN KEY(PLANID) REFERENCES WORKOUTPLANS(ID) ON DELETE CASCADE, FOREIGN KEY(ENID) REFERENCES ENTITY(ID) ON DELETE CASCADE)";
            const char *sql_cr_enex = "CREATE TABLE IF NOT EXISTS ENEX (ENTITYID, EXERCISEID, FOREIGN KEY(ENTITYID) REFERENCES ENTITY(ID) ON DELETE CASCADE, FOREIGN KEY(EXERCISEID) REFERENCES EXERCISE(ID) ON DELETE CASCADE)";

            sqlite3_exec(workoutPlansDB, sql_cr_wp, NULL, NULL, &error);
            sqlite3_exec(workoutPlansDB, sql_cr_ex, NULL, NULL, &error);
            sqlite3_exec(workoutPlansDB, sql_cr_en, NULL, NULL, &error);
            sqlite3_exec(workoutPlansDB, sql_cr_plen, NULL, NULL, &error);
            sqlite3_exec(workoutPlansDB, sql_cr_enex, NULL, NULL, &error);
            sqlite3_close(workoutPlansDB);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:03:34.757

只需在`applicationDidFinishLaunching`.

```
if([fileManager fileExistsAtPath:dbPathString]) {
   [fileManager removeItemAtPath:dbPathString error:&error];
} 
```

# wcf - 对 wcf 安全架构的建议

> ID：14362673
> 
> 赞同：0
> 
> 时间：2013-01-16T16:07:22.713
> 
> 标签：wcf, security, architecture

**WCF 中的安全 Web 服务**

**背景**

*   我们想要创建一个安全的 WCF 服务，它可以对数据进行加密/解密。将被加密和解密的数据的性质需要尽可能高的安全级别。
*   该服务的消费者将是我们网络中的应用程序。将是 asp.net 网站、其他 wcf 服务、控制台应用程序以及可能在 linux 上运行的基于 java 的应用程序
*   消费者将在没有任何域成员身份的本地计算机帐户上运行。

我已经阅读了大量有关 wcf 安全性的内容，并且在很大程度上理解了这些概念。我正在寻找一种对其他有类似需求的人来说效果很好的参考架构。

**问题**

1.  鉴于新的 wcf 服务不能依赖任何数据库等来存储凭据，并且也不能依赖消费者成为 Windows 域的成员，我应该使用什么身份验证方法。我应该能够在服务中正确识别消费者，因为功能会根据消费者的身份而略有变化。
2.  我应该使用哪种类型的传输安全 - 传输/消息/混合？这些是否有性能考虑？
3.  我还应该考虑什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:27:53.957

1.  使用客户端证书进行身份验证。要识别客户，请使用带有自定义标头的消息合同。每个客户端都应该将一些唯一值放入标头中。
2.  我建议在您的情况下使用传输安全性。使用消息安全性有两个主要缺点： 性能和对您更重要的 互操作性，正如您所说，您可能需要支持 Java 客户端。您说您已经阅读了很多关于 WCF 安全性的内容，但以防万一您错过了，这里有一篇关于[传输和消息](http://wcfsecurityguide.codeplex.com/wikipage?title=Ch%2007%20-%20Message%20and%20Transport%20Security%20in%20WCF)安全性的好文章。
3.  注意您的服务绑定。考虑到可能的 Java 客户端，我建议使用 basicHttpBinding。

希望能帮助到你！

**编辑：** 标题值应该是私有的。只有您和您的客户应该知道它。这就像如果我知道您的 Gmail 密码，很快就会找到您的登录信息。如果您认为它不够安全，您可以跳过自定义标头并将每个客户端映射到一个 IP 或一组 IP。例如，IP 12.32.456.10 对应于客户端 A。然后您可以将此映射存储在自定义配置文件部分中，您可以对此部分进行加密，这样即使有权访问您的服务文件的人也无法获取映射。

如果有帮助，请不要忘记将答案标记为有用；）

# c# - C# 反射和实例化 - 有没有办法做 Activator.CreateInstance(myType){ X = x }？

> ID：14362674
> 
> 赞同：5
> 
> 时间：2013-01-16T16:07:35.867
> 
> 标签：c#, reflection, instantiation

我不确定这种代码的术语，但我想知道是否可以在括号后实例化变量，但同时使用反射。

我有一张从 XML 文件加载的地图。这是 (int X, int Y, string S) 的集合，其中 X,Y 是某个地形的位置，S 是表示地形类型的字符串。我有一个字典可以在字符串和相关类型之间传递；例如，一个键值对可能是“Tree”，typeof(Tree)。

使用反射时，虽然我知道可以使用参数进行实例化，但我感到舒服的唯一方法就是使用 Activator.CreateInstance(Type t)，即使用空的构造函数。

当我对地图进行硬编码时，我最初会像这样实例化（在一些 i,j for 循环中）：

```
case: "Tree"
 world.Add( new Tree(i,j) ); 
```

在开始考虑反射和我的保存文件时，我将其更改为：

```
world.Add( new Tree() { X = i, Y = j } 
```

但是，我意识到这不适用于反射，因此我必须执行以下操作（Tree 继承自 Terrain，并且字典只是将 XML 保存数据字符串转换为一种类型）：

```
Type type = dictionary[dataItem.typeAsString];
Terrain t = (Terrain)Activator.CreateInstance(type);
t.X = i;
t.Y = j;
world.Add(t); 
```

我宁愿使用类似的东西来做到这一点

```
Type type = dictionary[dataItem.typeAsString];
world.Add((Terrain)Activator.CreateInstance(type) { X = i, Y = j } 
```

有没有这样的捷径？我想如果不是我可以编辑 world.Add 以获取 X 和 Y 并在那里转换到 Terrain 以访问这些变量，但我仍然对 a) 这个 {var1 = X, var2 = Y} 编程被称为什么感到好奇, 和 b) 使用反射时是否存在类似的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T16:09:43.763

这种语法称为 Object Initializer 语法，只是用于设置属性的语法糖。

代码`var result = new MyType { X = x }`将编译为：

```
MyType __tmp = new MyType();
__tmp.X = x;
MyType result = __tmp; 
```

如果您仅在运行时知道实例化类型，则您必须自己执行此操作，`PropertyInfo.SetValue`或者如果在编译时知道类型，则使用普通属性设置器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T16:15:15.983

答案是否定的，因为您提到的[对象初始化语法](http://msdn.microsoft.com/en-us/library/bb384062%28v=vs.90%29.aspx)（在 3.0 中随 LINQ 引入）是编译器的错觉。如，当你输入这个

```
var foo = new Foo { Bar = "baz" }; 
```

编译器实际上将其转换为符合 CLS 的 IL，这相当于

```
var foo = new Foo();
foo.Bar = "baz"; 
```

Phil Haack 有一篇[很棒的博客文章](http://haacked.com/archive/2013/01/11/hidden-pitfalls-with-object-initializers.aspx)，它不仅涵盖了编译器完成的重写的细节，还介绍了它在处理实现的类型时可能导致的一些副作用`IDisposable`

由于所有这些都只是编译器的佯攻，因此没有等效的使用反射（即`Activator.CreateInstance(Type t)`）。其他人会给你解决方法，但最终确实没有直接的等价物。

您可以管理的最接近的通用黑客可能是创建一个接受对象的方法，然后使用反射来识别该对象的属性及其各自的值，以便为您执行对象初始化。它可能会像这样使用

```
var foo = Supercollider.Initialize<Foo>(new { Bar = "baz" }); 
```

并且代码将类似于（这不在我的脑海中）

```
public sealed class Supercollider
{    
    public static T Initialize<T>(object propertySource)
    {
        // you can provide overloads for types that don't have a default ctor
        var result = Activator.CreateInstance(typeof(T)); 
        foreach(var prop in ReflectionHelper.GetProperties(typeof(T)))
            ReflectionHelper.SetPropertyValue(
                result, // the target
                prop,  // the PropertyInfo 
                propertySource); // where we get the value
    }    
} 
```

您必须从匿名对象中获取每个属性，在目标类型中找到具有相同名称和类型的属性，然后从匿名对象中的该属性中获取值并将目标属性的值设置为该值. 它不是非常难，但它绝对容易出现运行时异常和编译器为匿名类型的属性选择不同类型的问题，要求您更具体（例如，`new { Bar = (string)null }`），这与事物的优雅有关。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T16:09:57.413

```
(T)Activator.CreateInstance(typeof(T), param1, param2, ...); 
```

如[这里](http://msdn.microsoft.com/en-us/library/wcxyzt4d.aspx)所述。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-31T13:20:23.000

```
public sealed class ReflectionUtils
    {

        public static T ObjectInitializer<T>(Action<T> initialize)
        {
            var result = Activator.CreateInstance<T>();
            initialize(result);
            return result;
        }
    }

public class MyModel
{
    public string Name{get;set;}
} 
```

之后只需拨打电话：

```
var myModel = ReflectionUtils.ObjectInitializer<MyModel>(m => 
   {
     m.Name = "Asdf"
   }); 
```

这样做的好处是，通过这种方式，您将具有类型安全性并尽可能少地使用反射，因为我们都知道反射是一项昂贵的操作，应尽可能避免。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T16:13:19.830

您可以创建一个接受这些参数的构造函数，然后使用

[`Activator.CreateInstance(type, i, j)`](http://msdn.microsoft.com/en-us/library/wcxyzt4d.aspx)

但是您将无法使用对象初始化语法。这只是设置属性的糖糖。

# asp.net-mvc-4 - 为什么 ASP.NET MVC 假定视图将具有匹配的输入和输出类型？

> ID：14362676
> 
> 赞同：0
> 
> 时间：2013-01-16T16:07:38.567
> 
> 标签：asp.net-mvc-4

ASP.NET MVC（或者更确切地说是 Html.Helpers 和基页实现）假设将有一种类型用于呈现和发布（即模型）。

这是违反[ISP](http://en.wikipedia.org/wiki/Interface_segregation_principle)的，不是吗？

我很想从自定义的`EditPageBaseView<TViewModel, TFormData>`.

问题是我想要针对 FormData 实例（存储在 ViewModel 中）进行验证和发布工作，但 MVC 假设整个 ViewModel 将被回发。

1.  有没有一种OOB方式来促进这一点？（如果有的话我没有找到）。
2.  为服务公开的不同操作（在这种情况下为视图）具有单独的数据类型是一个坏主意（在概念上）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:48:42.967

它们不必匹配，但默认情况下它们确实匹配。

如果您不希望它们匹配，您可以在 Form 或 ActionLink 中指定不同的模型：

***使用 Razor 和 C# 的不匹配示例：***

**索引.chtml：**

```
@model FirstModel

<div>
@using (Html.BeginForm("Action", "ControllerName", new { ParameterName = new SecondModel { First = "First", Second = "Second" } }, FormMethod.Post)) {
<input type="submit" value="Submit Button" />
}
</div> 
```

**控制器：**

```
public class ControllerName : Controller {

public ActionResult Index() {
return View(new FirstModel());
}

public ActionResult Action(SecondModel ParameterName) {
return View() // Where to now?
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:39:18.197

在构建视图模型时，我倾向于遵循 CQRS 模型。所有的渲染都是用`ViewModel`类完成的，所有的回发都是用`Command`类完成的。这是一个人为的例子。假设我们有一个用于创建用户的小表单视图。

和`ViewModel`类`Command`看起来像这样：

```
public abstract class ViewModel {}

public abstract class Command: ViewModel

public class CreateUserViewModel : ViewModel
{
    public string Username { get; set; }
    public string Password { get; set; }
    public string PasswordConfirm { get; set; }
}

public class CreateUserCommand : Command
{
    public string Username { get; set; }
    public string Password { get; set; }
    public string PasswordConfirm { get; set; }
} 
```

`UserController`创建 a`CreateUserViewModel`作为请求的模型，并`Get`期望`CreateUserCommand`请求a `Post`：

```
public ActionResult CreateUser()
{
    // this should be created by a factory of some sort that is injected in
    var model = new CreateUserViewModel();
    return View(model);
}

[HttpPost]
public ActionResult CreateUser(CreateUserCommand command)
{
    // validate and then save the user, create new CreateUserViewModel and re-display the view if validation fails
} 
```

模型绑定负责确保`CreateUserCommand`正确填充 Posted 的属性，即使 Get View 绑定到`CreateUserViewModel`.

# c++ - 如何沿二维线段使用二维矩形缓冲区限制搜索空间

> ID：14362682
> 
> 赞同：2
> 
> 时间：2013-01-16T16:07:54.983
> 
> 标签：c++, algorithm, image-processing, geometry, computational-geometry

我有从图像中提取的二维线段。所以我知道它们的终点坐标。另外，我有一些参考二维线段。两条线段现在都是矢量形式。与参考线和提取线相比，我有大量提取的线段。

我想要做的是从我的提取中找到每个参考线的共轭线段。那就是我想匹配线段。但是，为了减少搜索区域，我希望通过在参考线段周围定义缓冲区来限制它。

> (1) 我的第一个问题是我如何用 c++ 实现这个缓冲案例，因为我缺乏几何理论。

注意：我不想使用边界框并寻找沿参考线定向的矩形缓冲区。

> (2) 我的第二个问题是，如果我知道矩形缓冲区的限制，那么我应该使用哪种类型的概念来避免不必要的线段搜索。

实际上，我正在寻找几何基础方法

请不要认为这是家庭作业，因为我的数学很差，我真的很挣扎。提前致谢。

请看例子。如果我采用边界框（蓝色框），则出现不必要的线条，如果它是面向主参考线（深黑色）的缓冲区矩形（红色），则出现几条线。

黑线是 - 参考线和虚线是基于图像的提取线

![在此处输入图像描述](../Images/c718871a88cd6167f9ed468c79e9ce2e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:34:44.653

**第一个建议**

看看[KD-Tree](http://en.wikipedia.org/wiki/K-d_tree)和[R-Tree](http://en.wikipedia.org/wiki/R-Tree)。 ~~它们用于划分空间以减少一些计算。并且有许多实现作为它们的类库，与[libkdtree](http://libkdtree.alioth.debian.org/)相同。我之前个人使用 KD-Tree 来减少在 2D 空间中查找最近邻域的比较，这并不简单，但它很有效。~~

~~*   [如何在 kd-tree 中最好地存储行](https://stackoverflow.com/questions/4047920/how-to-best-store-lines-in-a-kd-tree)~~
*   ~~[在此处输入链接描述](https://stackoverflow.com/questions/1498949/data-structure-for-fast-line-queries)~~

**第二个建议**

您可以考虑点到线段的距离，而不是考虑定向矩形（测试点是否在其中）。

![在此处输入图像描述](../Images/5fe87db8703abf4264cc6d253a9ee222.png)

检查提取线段的两个起点和终点是否足够接近参考线段，灰色区域是您定向矩形的一个很好的近似值。

灰色胶囊中的那些片段适合与参考片段匹配，您可以忽略其他片段。（如果提取段的两个点处于灰色区域，则它可能是与参考段匹配的好候选。否则您可以忽略该段。）

*一条线段有两个点作为起点和终点，每个点有两个分量，分别是 X 和 Y。*

```
Segment ref(r.start, r.end);

foreach(seg : extracted segments)
{
  if (DistancePointSegment(seg.start, ref)<D &&
      DistancePointSegment(seg.end  , ref)<D )
  {
    // Mark seg as a search candidate
  }
} 
```

要检查点到线段的距离，请阅读此[点和线段之间的最短距离](https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment)

# jpa - EJB - 使用 EntityManager - 可以找到实体导致 OptimisticLockException

> ID：14362684
> 
> 赞同：2
> 
> 时间：2013-01-16T16:08:15.670
> 
> 标签：jpa, transactions, ejb, entitymanager, optimistic-locking

不幸的是，我的代码中出现了 OptimisticLockException，我不知道为什么。也许有人可以帮助我回答一般问题。

以下场景：

```
@Entity
public class MyEntity {
    @Id
    @GeneratedValue
    private Integer id;

    @Version
    private int version;

    private String value;
}

@Singleton
@TransactionManagement(TransactionManagementType.CONTAINER)
public class MyBean {
    @PersistenceContext
    private EntityManager em;

    @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
    public void test() {

        MyEntity myEntity = em.find(MyEntity.class, 1);

    }
} 
```

使用 CMT。方法 test() 需要一个新事务。

现在我的问题是：如果另一个 bean 中的另一个线程使用相同的持久性上下文在提交之前更改了我的实体，那么方法 test() 是否可以抛出 OptimisticLockException，尽管我只使用 find 并且不更新我的方法 test() 中的任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:33:35.900

从[这个](https://blogs.oracle.com/carolmcdonald/entry/jpa_2_0_concurrency_and)博客

> JPA 乐观锁定允许任何人读取和更新实体，但是在提交时会进行版本检查，如果在读取实体后在数据库中更新了版本，则会引发异常

因此无需进行更新即可获得 OptimisticLockingException。当您阅读它时假设 myEntity.getVersion()==1 。`test()`如果在提交时（即您的方法结束时），版本列中的实际值为 != 1 ，您将收到 OptimisticLockingException 。

这意味着有人更新了实体（在 READ 和事务 COMMIT 之间的平均时间），因此您刚刚读取的值在提交时不再有效。

# encoding - 未知编码格式

> ID：14362688
> 
> 赞同：-1
> 
> 时间：2013-01-16T16:08:38.367
> 
> 标签：encoding, md5

我的朋友挑战我弄清楚他使用了什么编码，只给了我提示 MD5（它不仅仅是一个 MD5 哈希，但我仍然只是学习加密），我最终输了，但他仍然不会告诉我他用什么。

他的代码每次都验证他的编码是真实的，所以我希望我可以在这里询问某人使用了什么编码以及了解它并在我未来的一些应用程序中使用它对我来说有多有效。

以下是`String`他用来进行身份验证的一些示例：

```
pkG5llUrdxRcfe2wYLFawQ==
Zy6mwGZ9cNk3UyHvVOqpWg==
SdG3KvuLp/902XTiSlM+NQ==
mutGi6BcdPvv/z6j1B3/KQ==
pkG5llUrdxRcfe2wYLFawQ==
FJy+7HiRVlbsjntIign+PQ==
tYa63Ko4SS9WaGMUTdSkFg==
tgVrNGfztjS8Tony9swqUw==
XrhfcKqnNlPBtH8hXswEDA==
v4H+13J+Eh1ERpsGSIHYdQ==
+AV1IoAyU8DkTv6Ry+GH+g== 
```

如果有人能告诉我这些是什么，我将不胜感激。

另外，作为*奖励*，因为这显然还不足以让我发疯，为什么每次加密的末尾都有两个等号？这是某种形式，还是只是为了分散我的注意力？

编辑：我想说的一点是我知道原始消息，但我不明白一条消息如何每次都创建唯一的哈希值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:11:08.117

看起来像原始 md5 结果 base64 编码......但实际上它可能是任何东西，没有办法通过查看 16 个字节来了解它们是什么产生的，或者它们是否有意义。

如果这些都是相同的 74 字节消息的结果，那么这很可能意味着[HMAC-MD5](http://en.wikipedia.org/wiki/HMAC-MD5)与不同的密钥一起使用。无论如何都是不可逆的。

# android - 在Android USB调试模式下，我可以在USB调试时将我的电脑键盘作为手机的输入设备吗？

> ID：14362691
> 
> 赞同：4
> 
> 时间：2013-01-16T16:08:50.240
> 
> 标签：android, android-emulator

我喜欢 Android 上的 USB 调试，因为它比 Emulator 更快。我知道我可以在模拟器中使用我的键盘，但是在调试时我想使用我的计算机键盘（插入计算机）而不是设备键盘来使我的输入更快。那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T15:18:43.507

[Share KM](https://sites.google.com/site/droidskm/)是一款免费应用程序，可让您使用 PC 的键盘和鼠标来控制您的 Android。可以通过 USB、WiFi 或蓝牙进行连接。

它的工作原理很像在您的计算机上添加一个额外的显示器——将鼠标移动到屏幕边缘，光标移动到 Android。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-13T10:17:28.497

我通过“adb 工具”找到了一种可能性。将手机通过usb线连接到电脑，在电脑终端启动adb（例如Ubuntu）

```
adb shell input keyboard text Hello 
```

或者

```
adb shell input [<source>] <command> [<arg>...] 
```

这将使您可以通过计算机/笔记本电脑键盘将文本/击键发送到您的智能手机。

注意：您的输入将通过两个外壳（计算机和安卓设备）发送，因此您必须“双重转义”甚至空格。为避免这种情况，您可以例如键入

```
adb shell
input keyboard 'any text you like, including shell-sensitive characters' 
```

第二行是在您的 Android 设备上的 adb shell 中输入

在带有 CyanogenMod 的 Ubuntu 14.04 LTS 和三星 Galaxy S3 上进行了测试。在带有 Lineage OS 的 Ubuntu 18.04 LTS 和 Moto G2 上得到确认

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T18:47:57.477

听起来您想通过 PC 上的某些软件使用 PC 的键盘，而不是使用连接到 Android 设备的单独 USB 键盘。

这实际上是可能的，但细节是特定于设备的。您需要通过 adb 发送关键事件，但您需要确定特定于实现的字符到事件代码的转换，甚至是事件通道号。可能有一些开源项目可以做到这一点，你最好从其中一个开始，而不是尝试从头开始开发它。

至于使用单独的 USB 键盘，正如评论中提到的，这在一些较新的设备上是可能的（通常您需要一根 ID 引脚接地的适配器电缆），但引入了无法将 USB 用于 ADB 的问题以及同时一个键盘。一种可能的解决方法是将 ADB 置于 TCP/无线模式，拔下计算机并插入键盘。更简单的方法可能是使用蓝牙键盘。

请注意，USB 或蓝牙键盘，可能还有按键事件方法，都会导致屏幕键盘弹出。尝试使用带有外部键盘的设备的人发现这很烦人，并倾向于在屏幕键盘上安装零高度；但是，如果您正在测试实际用户会做什么，那么弹出键盘会给最终用户体验带来更真实的印象（当然，键盘后剩余的屏幕空间量因设备而异）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T18:59:33.217

将键盘直接插入 Android USB OTG 端口即可使用。大多数最新的 Android 设备都支持 USB 主机模式，只有极少数型号故意删除了此功能（谷歌）。我们对此也有很好[的猜测](https://stackoverflow.com/questions/9765207/which-devices-do-and-do-not-support-usb-host-mode)。

使用我的 Google Galaxy Nexus 和 Lenovo 平板电脑，甚至鼠标也能正常工作（出现鼠标指针）。您可能可以使用允许在两台计算机之间共享键盘的 USB 开关。还请注意，您需要 USB OTG 而不是 USB 设备转换器（有些 USB 转换器可以很好地插入微型 USB OTG 端口，但仅适用于 USB 设备）。

当然，如果 USB 端口已经被键盘占用，ADB 将无法使用它。因此，您需要为 ADB 使用无线。

该提议与您最初的想法不完全匹配，但似乎与您要实现的目标相匹配（使用键盘直接在设备上调试 Android 应用程序）。

# android - Fragment的调用方法没有效果

> ID：14362694
> 
> 赞同：0
> 
> 时间：2013-01-16T16:09:07.763
> 
> 标签：android, android-fragments, fragment

首先感谢您的帮助。这对我来说是一个难题。

请我有一个包含 5 个片段的活动；在用户交互时，片段被交换。

我正在使用 ACL。

```
 public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        stackArray =new ArrayList<Integer>();
        favQ =new ArrayList<Stock>();
        tablet=true;
        mBound = false;
        fragmentActivity = this;
        setContentView(R.layout.splashmain);
        splashfragment =new splashFragment();
        FragmentManager fragmentManager = getSupportFragmentManager();
        FragmentTransaction fragmentTransaction =     fragmentManager.beginTransaction();       
        fragmentTransaction.add(R.id.splashview,splashfragment);
        fragmentTransaction.commit();
        /*
            other stuff....
            */
        fragmentlista = new listafragment();
        fragmentfavourites= new favouritesFragment() ;
        worstbest = new WorstBest();
        searchfragment = new searchFragment(); 
        /*
            other stuff....
            */
        lt = mService.ritira();
        worst=mService.ritiraWorst();
        best=mService.ritiraBest();
        favQ.clear();
        favQ.addAll(mService.ritiraFav());          
            fragmentlista.prendiLista(lt);
        worstbest.prendiListaWorst(worst);
        worstbest.prendiListaBest(best);
        if(favQ.size()>0)fragmentfavourites.prendiLista(favQ);

// --->>>>HERE THE SAME METHOD enableAll() WORKS!!! <---
// --->>>>HERE THE SAME METHOD enableAll() WORKS!!! <---

            splashfragment.enableAll();

// --->>>>HERE THE SAME METHOD enableAll() WORKS!!! <---
// --->>>>HERE THE SAME METHOD enableAll() WORKS!!! <---
        /*
            other stuff....
            */
        }

//Method invoked to setup the configuration of the screen is layoutSchermo(int conf)
public static void layoutSchermo(int conf){
//Check if it is a Tablet in Landscape mode or not
//if it finds v2 than we are on a LARGE screen, then we check ORIENTATIO
    fragmentActivity.setContentView(R.layout.main);
    View v2 =(View)fragmentActivity.findViewById(R.id.view2);
    if(v2==null 
            & 
            fragmentActivity.getResources().getConfiguration().orientation==
            Configuration.ORIENTATION_PORTRAIT)
        tablet=false;

//Calls the screen configuration LIST
if(conf==LIST){     
    fragmentActivity.setContentView(R.layout.main);

    FragmentManager fragmentManager = fragmentActivity.getSupportFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

    fragmentTransaction.remove(splashfragment);
    fragmentTransaction.commit();
    fragmentManager.executePendingTransactions();
    //Remove old Fragment splashfragment
//At this point I expect the fragment splashfragment is destroyed
//OR NOT???
    fragmentTransaction = fragmentManager.beginTransaction();

    fragmentTransaction.setCustomAnimations(R.anim.slide_in_left, R.anim.slide_out_right);
    if(!tablet){fragmentTransaction.replace(R.id.view1, fragmentlista);}
    if(tablet){
        fragmentTransaction.replace(R.id.view1, splashfragment);
        fragmentTransaction.replace(R.id.view2,fragmentlista );
        }       fragmentTransaction.addToBackStack(null);   
    stack= fragmentTransaction.commit();
    stackArray.add(stack);
//Brand new fragments added

// --->>>>HERE THE SAME METHOD enableAll() NOT WORKING!!! <---
// --->>>>HERE THE SAME METHOD enableAll() NOT WORKING!!! <---

splashfragment.enableAll(); 
    } 
```

## ------------

所以基本上会发生什么以及问题出在哪里：

**问题出在方法上**

```
layoutSchermo(int conf) 
```

在方法 layoutSchermo(int conf) 中，

我分离了一个片段（splashfragment）并重新附加它（与另一个片段一起）。

我不清楚当我打电话时

```
 remove(splashfragment) 
```

**实际上 Fragment 是否被销毁？**

此外，每当新添加的 Fragment 是新的或旧的，为什么调用

```
splashfragment.enableAll(); 
```

有没有效果？

**我希望它可以工作，无论是新的还是旧的片段！**

请赐教！

谢谢毛里齐奥

## ----------

*编辑 编辑 编辑 编辑 编辑 编辑* *这是片段的代码（我认为它没有多大帮助）*

```
ublic class splashFragment extends Fragment {
    public View v;
    public Button buttonfav;
    public Button buttonBW;
    public Button buttonSe;
    public Button buttonLi;

    @Override 
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {
        v=inflater.inflate(R.layout.splashnew, container, false);
        RelativeLayout box1 = (RelativeLayout)v.findViewById(R.id.box1);
        //box1.setBackgroundColor(Color.BLUE);
        buttonfav=(Button)v.findViewById(R.id.heart);
        buttonBW=(Button)v.findViewById(R.id.star);
    buttonSe=(Button)v.findViewById(R.id.search);
        buttonLi=(Button)v.findViewById(R.id.lista);

        buttonfav.setBackgroundResource(R.drawable.hearth_gray_tansp);
        buttonBW.setBackgroundResource(R.drawable.star_gray_trans);
        buttonSe.setBackgroundResource(R.drawable.search_gray_transp);
        buttonLi.setBackgroundResource(R.drawable.list_gray_trans);

        buttonfav.setEnabled(false);
        buttonBW.setEnabled(false);
    buttonSe.setEnabled(false);
        buttonLi.setEnabled(false);

        buttonfav.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v) {
                Quotes.layoutSchermo(Quotes.FAVOURITES);
            }});

        buttonBW.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v) {
                Quotes.layoutSchermo(Quotes.BESTWORST);
            }});

        buttonSe.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v) {
                Quotes.layoutSchermo(Quotes.SEARCH);
            }});

        buttonLi.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v) {
                Quotes.layoutSchermo(Quotes.LIST);
            }});
        return v;           
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {  } 

public void enableAll(){
    buttonfav.setEnabled(true);
    buttonfav.setBackgroundResource(R.drawable.hearth);
    buttonBW.setEnabled(true);
    buttonBW.setBackgroundResource(R.drawable.star);
    buttonLi.setEnabled(true);
    buttonLi.setBackgroundResource(R.drawable.list);
    buttonSe.setEnabled(true);
    buttonSe.setBackgroundResource(R.drawable.search);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:29:45.237

无法确切知道碎片何时被破坏。你只知道它是在 onStop() 之后和 onDetach() 之前调用的。

至于您的 splashFragment.enableAll()，您还没有向我们展示该方法是什么，那么我们怎么知道它为什么不起作用……此外，您还没有向我们展示此 layoutSchermo 方法的更一般的上下文。我这样说是因为我怀疑你做错了。你有一个静态方法，以某种方式引用活动......（不清楚这是如何发生的），在该活动引用上设置内容视图......整个事情只是引发了一些危险信号。

SplashFragment.enableAll 很可能需要在该 Fragment 的 onAttach 或 onResume 内部调用，但同样，如果没有您的解释，就不可能知道。

编辑

好的，所以我认为您的处理方式不正确。当您再次显示 Fragment 时，您有效地尝试完成的是以某种方式（取决于某些状态）“配置”您的 Fragment。这里的问题是您不确切知道 Fragment 的 View 层次结构何时膨胀或何时将其附加到 Activity 等。换句话说，试图调用影响片段 UI 的方法只是基于引用 Fragment 的**对象**是错误的。您需要连接到 Fragment 的生命周期并以“正确的方式”做事。

以下是我的建议：为您的 Fragment 创建一个静态构造函数，以便轻松创建您想要的正确配置的 Fragment。这可能是这样的：

```
public class SplashFragment extends Fragment {

    public static SplashFragment newInstance(Bundle bundle) {
        SplashFragment splashFragment = new SplashFragment()
        splashFragment.setArguments(bundle);
        return splashFragment;
    }

    // or alternatively
    public static SplashFragment newInstance(int favResource, int bwResource, int liResource, int seResource,
        boolean favEnabled, boolean bwEnabled, boolean liEnabled, boolean seEnabled) {
        SplashFragment splashFragment = new SplashFragment()
        Bundle bundle = new Bundle();
        bundle.putInt("fav_res", favResource);
        bundle.putInt("bw_res", bwResource);
        bundle.putInt"li_res", liResource);
        bundle.putInt("se_res", seResource);
        bundle.putBoolean("fav_enabled", favEnabled);
        //...And so on  
        splashFragment.setArguments(bundle);
        return splashFragment;
    }

    //Then....

    @Override 
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {
        //setup your view as normal...then
        buttonFav.setBackgroundResource(getArguments().getInt("fave_res"));
        //.....etc
    }

} 
```

现在，如果您真的需要能够在不创建新实例的情况下操作片段，那么我能想到的唯一方法是添加带有标签的片段，如

```
replace(int containerViewId, Fragment fragment, String tag) 
```

和

```
add (Fragment fragment, String tag) 
```

品种。

然后，稍后您可以尝试让片段管理器为您找到那些片段，即

```
SplashFragment splashFragment = (SplashFragment) getFragmentManager().findFragmentByTag("some tag here"); 
```

检查它是否不为空，然后在其上调用您的方法...

# html - 为什么我们使用相对方案 // 而不是 http:// 或 https://？

> ID：14362697
> 
> 赞同：3
> 
> 时间：2013-01-16T16:09:15.970
> 
> 标签：html, http

我一直对这种新趋势有很多问题。它无处不在（例如 htmlboilerplate / twitter 小部件），但即使是 twitter 本身也不喜欢它......（在尝试其 twitter 卡预览时，请参见图片）。

![](../Images/f5a885aa3810d5700a1c9107e4640040.png)

除了看起来之外，还有更多的东西吗，因为它似乎在被浏览器充分利用之前已经由编码人员实现了，还是它是一个遗留的 html？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T16:14:08.690

因为许多网站同时提供常规 (http) 和加密版本 (https)，​​并使用子域来存储各种内容，例如图像。如果您要嵌入类似的内容，则必须生成两个完全不同版本的网站

```
<img src="http://images.example.com/kittens.jpg" /> 
```

并`https://`在网站的版本上提供它，即使它是完全相同的内容。没有人喜欢遇到 SSL 错误，特别是因为这些错误往往会在浏览器中显示为“zomg 你被欺骗/黑客/欺诈”类型的警告。

但是如果你有协议相关的版本，

```
<img src="//images.example.com/kittens.jpg" /> 
```

无论您是通过 http://、https:// 还是 ftp:// 访问该站点都没有关系 - url 仍然可以使用并使用适当的协议，您只需要维护一份内容的副本。

# python - 使用python检索具有未知命名空间的元素的内容

> ID：14362698
> 
> 赞同：1
> 
> 时间：2013-01-16T16:09:17.213
> 
> 标签：python, xpath

我正在尝试使用 python 解析 maven 项目定义以提取版本。

项目定义如下：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
                        http://maven.apache.org/maven-v4_0_0.xsd">
   <modelVersion>4.0.0</modelVersion>

   <groupId>...</groupId>
   <artifactId>...</artifactId>
   <version>1.6.0-SNAPSHOT</version>
   ...
</project> 
```

我可以使用以下方法提取版本：

```
root = ET.fromstring(xml)
version = root.find('./p:version', { 'p': 'http://maven.apache.org/POM/4.0.0' })
print(version.text)

prints: 1.6.0-SNAPSHOT 
```

但是，使用的命名空间可能会改变，我不想依赖于此。有没有办法提取命名空间以在我后续的 xpath 表达式中使用？

我尝试了以下方法，以查看 xmlns 本身是否暴露，但没有运气：

```
root = ET.fromstring(xml)
for k in root.attrib:
    print('%s => %s' % (k, root.attrib[k]))

prints: {http://www.w3.org/2001/XMLSchema-instance}schemaLocation => http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:54:59.893

> 但是，使用的命名空间可能会改变，我不想依赖于此。

您是说名称空间 uri 可能会更改，还是前缀可能会更改？如果只是前缀，那么这不是问题，因为重要的是 XPath 中的前缀与您提供给 XPath 评估程序的前缀匹配。在任何一种情况下，自动检测命名空间都可能是一个错误的调用。假设有人决定像这样开始生成 XML：

```
<proj:project xmlns:proj="http://maven.apache.org/POM/4.0.0" 
xmlns:other="http://maven.apache.org/POM/5.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
                    http://maven.apache.org/maven-v4_0_0.xsd"> 
```

它仍然完美地代表了与您的示例相同的命名空间中的 XML，但您不知道`proj`前缀是您正在寻找的命名空间前缀。

我认为 Apache 不太可能突然更改其官方 XML 格式之一的名称空间，但如果您真的担心它，应该始终可以选择使用 local-name() 来与名称空间无关地找到您的节点重新寻找：

```
version = root.find('./*[local-name() = "version"]') 
```

另外，我不熟悉 elementTree 库，但您*可以*尝试此操作以尝试获取有关 XML 文档名称空间的信息，看看是否可以：

```
namespaces = root.findall('//namespace::*') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T16:37:45.163

不幸的是，`ElementTree`命名空间支持相当不完整。

您需要使用`xml.etree.ElementTree`模块中的内部方法来获取命名空间映射：

```
_, namespaces = ET._namespaces(root, 'utf8') 
```

`namespaces`现在是一个以 URI 作为键，前缀作为值的字典。

你可以改用[`lxml`](http://lxml.de/)。该库实现了相同的 ElementTree API，但大大增强了该 API。

例如，每个节点都包含一个`.nsmap`将前缀映射到 URI 的属性，包括 key 下的默认命名空间`None`。

# php - 如何在 Windows 上从 PHP 获取进程 PID

> ID：14362699
> 
> 赞同：0
> 
> 时间：2013-01-16T16:09:19.130
> 
> 标签：php, windows, matlab, exec, pid

我正在开发一个基于 Web 的应用程序，我需要运行一个 Matlab 脚本来处理一些信息。

问题是我对同时运行的 Matlab 进程的最大数量有限制，因此，我必须获取每个进程的 PID 才能知道它们中是否有任何一个已经崩溃以及它是哪一个。

我使用了一些方法来获取它的 PID，但由于某种原因，运行像“notepad.exe”这样的简单命令可以正常工作并获得正确的 PID，但是当我运行我的脚本时，它会得到错误的 PID。

我尝试过的方法之一是这个：

```
$process = "matlab";
$command = "-sd ".$softExecPath." -r \"analyse('".$videoDataPath."', '".$id_video_data."') \" ";
$WshShell = new COM("WScript.Shell");
$oExec = $WshShell->exec($process." ".$command);
$pid = intval($oExec->ProcessID); 
```

另一个是：

```
$process = "matlab";
$command = "-sd ".$softExecPath." -r \"analyse('".$videoDataPath."', '".$id_video_data."') \" ";
$command = $process." ".$command;
// use psexec to start in background, pipe stderr to stdout to capture pid
exec("C:/AppServ/www/PsTools/psexec.exe -d -accepteula $command 2>&1", $output);
// capture pid on the 6th line
preg_match('/ID (\d+)/', $output[5], $matches);
$pid = $matches[1]; 
```

他们俩都得到了PID，但都不是真正的PID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:46:56.410

在 Windows 上，您调用以启动 Matlab 的 Matlab 程序（由“开始”菜单中的快捷方式指向的程序以及添加它的路径上的程序）只是一个启动程序，它继续运行另一个`matlab.exe`是实际程序的启动程序，然后立即返回。您返回的 PID 是启动程序的 PID，当真正的 Matlab 工作时，它就会消失。

您可以做两件事：您可以`matlab.exe`直接运行实际程序，方法是在 Matlab 安装下的 bin/win32 或类似的特定于平台的目录中找到它。然后你会得到正确的PID。或者你可以`-wait`选择使启动程序同步运行，这意味着它会阻塞直到子程序`matlab.exe`退出，所以它仍然会在 Matlab 运行时显示在进程列表中。

# javascript - JavaScript 函数中创建的 DOM 元素在函数返回后消失

> ID：14362701
> 
> 赞同：0
> 
> 时间：2013-01-16T16:09:31.930
> 
> 标签：javascript, spring, dom, dwr

我有一个允许多项选择的下拉列表。用户从列表中选择，然后单击带有调用 JS 函数的 onclick=test() 的提交按钮。我正在使用 Jsp 页面，这是一个带有 DWR 的 Spring MVC 框架项目，用于远程服务。

从远程服务 - dwrService 返回的数据由回调函数 - handleAddSuccess 处理。根据选择的项目，我需要填充一个或多个文本区域。通过查看 Firebug，我看到 textarea 显示然后被填充，但是一旦函数 test() 完成，textarea 就会消失。我一直在到处寻找答案，但没有结果。

```
function test() {
var careIDs = dwr.util.getValue("careIDs");
dwrService.getNewCares(careIDs, {
callback : handleAddSuccess,
errorHandler : handleAddError
});
}

function handleAddSuccess(data) {
    var aFragment = document.createDocumentFragment();
    var divta1 = document.getElementById("divta1");
    for (i = 0; i < data.length; i++) {
        var ta = document.createElement("textarea");
        ta.setAttribute("id", "definition"+i);
        ta.setAttribute("cols", "75");
        ta.setAttribute("rows", "75");
        divta1.appendChild(ta);
        aFragment.appendChild(divta1);
    }      
    document.body.appendChild(aFragment);

    for (i = 0; i < data.length; i++) {
       dwr.util.setValue("definition"+i, data[i].definition);
    }
alert(" end of handleAddSuccess " ) ;
} 
```

我也从回调函数返回，情况是一样的——我可以看到在 Firebug 中设置了 textarea 元素并填充了值，但是一旦函数返回，textarea 元素就会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:24:23.973

您不是`return false`来自内部`test()`，因此当单击提交按钮并将页面重置为其初始状态时，表单将被提交（取决于服务器对提交的表单所做的操作）。

# php - Magento：通过事件以编程方式更新购物车

> ID：14362702
> 
> 赞同：2
> 
> 时间：2013-01-16T16:09:33.467
> 
> 标签：php, zend-framework, magento

我正在连接`sales_quote_save_after`事件调度程序。首先，作为一个测试，我试图将商品放入购物车并将它们的价格更改为 0。在我这样做之后，我将构建一些其他的东西。

我有麻烦了。我可以更改单价没问题，但是当我重新计算购物车总数时，价格会恢复到原始价格。

```
public function sales_quote_save_before($observer) {

    if (Mage::registry('basket_observer_executed')) {
        return $this;
    }

    $quote = $observer->getEvent()->getQuote();

    foreach ($quote->getAllItems() as $item) {
        if($item->getId()) {    
            $item->setCustomPrice(0);
        }
    }

    Mage::register('basket_observer_executed', true);

    $quote->save();
    $quote->setTotalsCollectedFlag(false)->collectTotals();
} 
```

有人可以指出我在重新计算总数的同时保持新价格吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T18:42:10.577

我会尝试使用不同的事件。我总是`checkout_cart_save_after`用来做类似的动作。使用我提到的事件，使用以下代码：

```
$cart = $observer->getData('cart');

$quote = $cart->getData('quote');

$items = $quote->getAllVisibleItems();

foreach($items as $item)
{
    $item->setCustomPrice(0);
    $item->setOriginalCustomPrice(0);
    $item->getProduct()->setIsSuperMode(true);
    $item->save();
}
$quote->save();
$quote->setTotalsCollectedFlag(false)->collectTotals(); 
```

# wordpress - 使用 htaccess 按用户主机名阻止请求

> ID：14362708
> 
> 赞同：5
> 
> 时间：2013-01-16T16:09:50.037
> 
> 标签：wordpress, .htaccess, ip, hostname

最近，我的 wordpress 网站经历了各种 IP 的黑客尝试激增，但它们都有相同的用户主机名：

IP 地址为 xxx.xxx.xx.x 的用户已被锁定无法登录或使用密码恢复表单，原因如下： 使用无效的用户名尝试登录。用户 IP：91.121.156.62 用户主机名： ks359219。**坏主机网**

IP 地址为 xxx.xxx.xx.x 的用户已被锁定无法登录或使用密码恢复表单，原因如下：使用无效的用户名尝试登录。用户 IP：5.135.182.147 用户主机名： ks3289006。**坏主机网**

IP 地址为 xxx.xxx.xx.x 的用户已被锁定无法登录或使用密码恢复表单，原因如下：使用无效的用户名尝试登录。用户 IP：5.135.185.89 用户主机名： ks3290602。**坏主机网**

IP 地址为 xxx.xxx.xx.x 的用户已被锁定无法登录或使用密码恢复表单，原因如下：使用无效的用户名尝试登录。用户 IP：5.39.86.162 用户主机名： ks3273571。**坏主机网**

我正在使用的安全插件似乎可以阻止它们，但我希望能够使用通配符（如 xxx）阻止来自与用户主机名关联的任何 IP 的所有请求。**坏主机网**

该插件让我可以阻止一系列 IP，例如 123.12.1.*，但不能阻止主机名。阻止这些黑客攻击的最佳方法是什么？.ht 访问？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T08:16:53.210

对于 WordPress，您可以使用 VSF 简单块[http://wordpress.org/plugins/vsf-simple-block/](http://wordpress.org/plugins/vsf-simple-block/)

在阻止规则设置中输入要阻止的主机名字符串部分，例如 badhost.com

请记住，这是一个活动插件，因此确实会为每个查找请求使用一些服务器资源和数据库查询，但我们还没有发现它太重。

PS-来自ks。示例的一部分我很清楚您要禁止的主机-我同意您的观点，这些主机是坏消息-禁止它们.... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:16:47.420

有关您可能想要做的事情的示例，请参阅此 Apache 文档页面。它涵盖了来自直接域和引用站点的大多数重定向、阻止等情况。

[http://httpd.apache.org/docs/2.2/rewrite/access.html#blocked-inline-images](http://httpd.apache.org/docs/2.2/rewrite/access.html#blocked-inline-images)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T16:13:41.023

如果您这样做`whois ks3273571.badhost.com`，它会告诉您该 ISP 网络块的 NetRange 和 CIDR。

例如，`whois 69.59.197.21`（StackOverflow）报告：

```
NetRange:       69.59.192.0 - 69.59.223.255
CIDR:           69.59.192.0/19 
```

# java - 用 java 转义引号替换文件中的每个引号

> ID：14362710
> 
> 赞同：2
> 
> 时间：2013-01-16T16:09:56.123
> 
> 标签：java, file, replace, escaping, edit

我正在尝试使用 java 编辑文件。

我想用 \" 转义我文件中的每个报价 "

我这样尝试过（关于stackoverflow上的其他解决方案，我可以复制哪些代码）：

```
public void replaceInFile(File file) throws IOException {

File tempFile = new File("twittergeoUpdate.csv");
FileWriter fw = new FileWriter(tempFile);

Reader fr = new FileReader(file);
BufferedReader br = new BufferedReader(fr);

while (br.ready()) {
fw.write(br.readLine().replaceAll("\"", "\\\"") + "\n");
}

fw.close();
br.close();
fr.close();
} 
```

我太快了……这对我不起作用。报价单在我的文件中保持不变。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:13:18.713

`\\\"`仅转义`"`（双引号），您还必须转义反斜杠，因此您需要 5 个反斜杠。`\\\\\"`

```
s.replaceAll("\"", "\\\\\"") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T16:13:15.503

您应该`StringEscapeUtils#escapeJava()`从 Apache`commons-lang`包中使用。

像这样：

```
org.apache.commons.lang.StringEscapeUtils.escapeJava(<yourStringLiteralHere>) 
```

**从 javadoc**：

`StringEscapeUtils#escapeJava()`使用`Java`字符串规则转义字符串中的字符。

正确处理引号和控制字符（制表符、反斜杠、cr、ff 等）

所以一个制表符变成了字符'\'和't'。

`Java`字符串和`JavaScript`字符串之间的唯一区别是，在 中`JavaScript`，必须对单引号进行转义。

**示例**：

*   输入字符串：他没有说，“停止！”
*   输出字符串：他没有说，“停止！”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T16:22:59.317

我编码：

```
public void replaceInFile(File file) throws IOException {

    File tempFile = new File("twittergeoUpdate.csv");
    FileWriter fw = new FileWriter(tempFile);

    Reader fr = new FileReader(file);
    BufferedReader br = new BufferedReader(fr);

    while (br.ready()) {

        fw.write(br.readLine().replaceAll("\"", "\\\\\"") + "\n");
    }

    fw.close();
    br.close();
    fr.close();
}//replaceInFile 
```

正确的替换字符串是 \\\"（5 个反斜杠，而不是 3 个）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T16:24:29.260

基本问题是您不能写入正在读取的文件并且不希望它改变。在您的情况下， FileWriter 做的第一件事是*截断*文件。我已经看到读者仍然设法阅读某些内容但已损坏的示例。

您必须写入一个临时文件，关闭这两个文件，并在完成后用临时文件替换（使用删除和重命名）您的原始文件。

# phpmyadmin - 我们可以在 DropBox 中运行 XAMPP 吗？

> ID：14362718
> 
> 赞同：0
> 
> 时间：2013-01-16T16:10:19.173
> 
> 标签：phpmyadmin, xampp, cloud, dropbox

是否可以在 Dropbox 中运行 XAMPP、PHPMyAdmin？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:15:08.857

不明白为什么不这样做，但这是有风险的。
Dropbox 会默默地为它尝试更新的任何文件生成 .bak 文件（比如它们最近在另一台机器上被修改过），但它们被锁定在本地机器上。如果您不期待它，这可能需要很长时间才能调试/查找。（例如，假设 apache 正在读取 php 文件，而您将修改后的版本保存在另一台机器上......）

如果是为了简化同步，您可能需要查看某种源代码控制，例如 SVN/Perforce/Git。您可以让服务器定期同步。

知道 DropBox 有多成功当然很有趣，我知道对于 Excel 等项目的团队协作，与真正的源代码控制系统相比，这是一场噩梦。

不要误会我的意思，我喜欢 Dropbox 并经常使用它……如果您经常访问其中的文件，请务必小心。

# linq - 我不能让 Linq 比较地理距离？

> ID：14362724
> 
> 赞同：1
> 
> 时间：2013-01-16T16:10:32.980
> 
> 标签：linq, azure-mobile-services

我收到错误：

```
'new GeoCoordinate(MyEntity.Lat, MyEntity.Lon).GetDistanceTo(14.4416616666667, 5.71794583333333)' is not supported in a 'Where' Mobile Services query expression. 
```

从以下查询：

```
GeoCoordinate mypos = new GeoCoordinate(MainPage.myEntity.Lat, MainPage.myEntity.Lon);

var items = await App.MobileService
                        .GetTable<MyEntity>()
                        .Where(MyEntity => MyEntity.Id != MainPage.myEntity.Id && MyEntity.IsSelected == MainPage.myEntity.IsSelected 
                            && (MyEntity.Lat != 0 && MyEntity.Lon != 0) 
                            && new GeoCoordinate(MyEntity.Lat, MyEntity.Lon).GetDistanceTo(mypos) <= 5000)
                        .Take(20)
                        .ToListAsync(); 
```

我试图从一张不是我的桌子上获取 20 个实体，并且距离我的位置 5 公里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T06:22:38.757

您需要注意的一件事是行表达式不是在本地执行的。相反，它被转换为发送到服务器的查询字符串 - 否则您将下载比您需要的更多的数据（顺便说一句，您仍然可以这样做）。鉴于此，没有办法将方法`GeoCoordinate.GetDistanceTo`转换为可以通过网络发送的东西。

服务器支持一些操作，例如算术（+、-、*、/），您可能会实现类似于您需要的东西。类似下面的代码应该可以工作（还没有尝试过）。请注意，您需要在坐标距离（纬度/经度）和`GetDistanceTo`方法返回的任何单位之间进行转换。

```
GeoCoordinate mypos = new GeoCoordinate(MainPage.myEntity.Lat, MainPage.myEntity.Lon);
double maxDistance = 1;
var items = await App.MobileService
    .GetTable<MyEntity>()
    .Where(e => e.Id != MainPage.myEntity.Id &&
                e.IsSelected == MainPage.myEntity.IsSelected &&
                (e.Lat != 0 && e.Lon != 0) &&
                ( ((e.Lat - mypos.Lat) * (e.Lat - mypos.Lat) +
                   (e.Lon - mypos.Lon) * (e.Lon - mypos.Lon)) < maxDistance )
    .Take(20)
    .ToListAsync(); 
```

或者，我之前提到的另一种选择是根本不按该呼叫的距离进行过滤，然后再对其进行过滤。类似于下面的代码：

```
GeoCoordinate mypos = new GeoCoordinate(MainPage.myEntity.Lat, MainPage.myEntity.Lon);
List<MyEntity> items = new List<MyEntity>();
int skip = 0;
while (items.Count < 20) {
    var temp = await App.MobileService
        .GetTable<MyEntity>()
        .Where(e => e.Id != MainPage.myEntity.Id &&
                    e.IsSelected == MainPage.myEntity.IsSelected &&
                    (e.Lat != 0 && e.Lon != 0)
        .Skip(skip)
        .Take(20)
        .ToListAsync();
    if (temp.Count == 0) break;
    foreach (var item in temp)
    {
        if (new GeoCoordinate(item.Lat, item.Lon).GetDistanceTo(mypos) <= 5000)
        {
            items.Add(item);
        }
    }
} 
```

# windows-7 - 重新启动后 Wamp 无法正常工作

> ID：14362728
> 
> 赞同：-1
> 
> 时间：2013-01-16T16:10:44.043
> 
> 标签：windows-7, wamp, wampserver

我正在运行 win 7 x64，我只是在其他一些东西中安装了一个 custopack 主题，重新启动，现在当我运行 wamp 时，图标保持橙色

端口 80 不被任何东西使用。至少，Skype 已经设置为使用另一个，而且它甚至没有运行，并且 wamp 说端口 80 是好的。

除此之外，几天前我最近摆弄了虚拟主机和其他一些东西。但是重启后问题就出现了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:52:06.113

修正：我简单地重新安装了 wamp。随机：S

# neo4j - 为什么我不能通过Cypher查询一个节点的相关节点，存在关系？

> ID：14362730
> 
> 赞同：0
> 
> 时间：2013-01-16T16:10:44.630
> 
> 标签：neo4j, cypher

我正在尝试通过 Cypher 查询具有特定关系类型的节点。

所以有两个节点A（ID 1）和B（ID 2）。我在管理 GUI 中使用 Cypher 控制台。

如果我这样做： rel:1

我得到两个关系（ID 10 和 11）两个相同节点（ID 3）的结果（我知道这很糟糕，但这就是数据）。如果我查看显示的关系： Node 1 SimilarTo Node 3 Node 1 SimilarTo Node 3

如果我试试这个：

```
START n=node(*) MATCH n-[:SimilarTo]->b WHERE n.Name='A' 
```

我得到一个空的结果！？

所以我的问题是，为什么我会得到那个空结果，尽管存在两个具有正确起始节点和正确结束节点的关系？

我不明白。

如果您有任何建议，请让我知道 ;）

好的，我再举一个例子..

我做以下查询：

```
START artist=node:artists('artistMbid:*')
MATCH artist-[:SimilarTo]->x-[:SimilarTo]->sim
WHERE artist.artistName! = 'Shining Fury' 
RETURN artist.artistName, x.artistName, sim.artistName 
```

并得到这个结果（是正确的）：

```
artist.artistName x.artistName sim.artistName
"Shining Fury"  "Dragonsfire"   "Holy Cross"
"Shining Fury"  "Dragonsfire"   "Holy Cross"
"Shining Fury"  "Dragonsfire"   "Lorenguard"
"Shining Fury"  "Dragonsfire"   "Lorenguard"
"Shining Fury"  "Dragonsfire"   "Shining Fury"
"Shining Fury"  "Dragonsfire"   "Shining Fury" 
```

如果我这样做：

```
START artist=node:artists('artistMbid:*')
MATCH artist-[:SimilarTo]->x-[:SimilarTo]->y-[:SimilarTo]->sim
WHERE artist.artistName! = 'Shining Fury' 
RETURN artist.artistName, x.artistName, y.artistName, sim.artistName 
```

我明白了（不正确）：

```
artist.artistName x.artistName y.artistName   sim.artistName
"Shining Fury"  "Dragonsfire"   "Holy Cross"    "Dragonsfire"
"Shining Fury"  "Dragonsfire"   "Holy Cross"    "Ruffians"
"Shining Fury"  "Dragonsfire"   "Holy Cross"    "Dragonsfire"
"Shining Fury"  "Dragonsfire"   "Holy Cross"    "Ruffians"
"Shining Fury"  "Dragonsfire"   "Lorenguard"    "Holy Cross"
"Shining Fury"  "Dragonsfire"   "Lorenguard"    "Nightqueen"
"Shining Fury"  "Dragonsfire"   "Lorenguard"    "Dragonsfire"
"Shining Fury"  "Dragonsfire"   "Lorenguard"    "Holy Cross"
"Shining Fury"  "Dragonsfire"   "Lorenguard"    "Nightqueen"
"Shining Fury"  "Dragonsfire"   "Lorenguard"    "Dragonsfire" 
```

这是不正确的，因为我在 y.artistName 下缺少艺术家“Shining Fury”，就像我在之前的步骤中得到的一样。我找不到我的错误！

另一个编辑..

查询 1

```
START artist=node:artists('artistMbid:*')
MATCH artist-[:SimilarTo]->x-[:SimilarTo]->sim
WHERE artist.artistName! = 'Shining Fury' 
RETURN ID(artist), ID(x), ID(sim) 
```

结果：

```
ID(artist) ID(x) ID(sim)
210292  209410  228580
210292  209410  228580
210292  209410  212568
210292  209410  212568
210292  209410  210292
210292  209410  210292 
```

查询2：

```
START artist=node:artists('artistMbid:*')
MATCH artist-[:SimilarTo]->x-[:SimilarTo]->y-[:SimilarTo]->sim
WHERE artist.artistName! = 'Shining Fury' 
RETURN ID(artist), ID(x), ID(y), ID(sim) 
```

结果：

```
ID(artist) ID(x) ID(y) ID(sim)
210292  209410  228580  209410
210292  209410  228580  202357
210292  209410  228580  209410
210292  209410  228580  202357
210292  209410  212568  228580
210292  209410  212568  202279
210292  209410  212568  209410
210292  209410  212568  228580
210292  209410  212568  202279
210292  209410  212568  209410 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:01:54.340

我认为那里没有问题：

`artist-[:SimilarTo]->x-[:SimilarTo]->sim`

为您提供标识符`artist`以及`sim`在某些情况下艺术家 = sim. 然而

`artist-[:SimilarTo]->x-[:SimilarTo]->y-[:SimilarTo]->sim`

为您提供标识符`artist, x, y, sim`，`y<>artist`因为它后面是`sim`-> 我的意思是，如果您将获得与第一种情况相同的标识符，那么密码匹配将进入无限循环，即`210292 209410 210292 209410`（我打赌“Shining Fury”有仅连接到“DragonsFly”，因此除了“DragonsFly”之外，根本不可能有另一个 sim 标识符。

尝试再添加 1 个标识符，您还将看到第一个查询的部分，例如：

`artist-[:SimilarTo]->x-[:SimilarTo]->y-[:SimilarTo]->z-[:SimilarTo]->sim`

会给你imo`210292 209410 210292 209410 xxxxx`

我建议 100% 确保您在标识符下获得相同的节点，或者将查询分成 2 个单独的部分（如 WITH 注释中所建议的那样），或者严格定义您不希望查询中有任何循环：

```
MATCH artist-[:SimilarTo]->x-[:SimilarTo]->sim
WHERE artist.artistName! = 'Shining Fury' 
AND Id(artist)<>Id(sim) 
```

如果您必须通过循环，则将查询解决方案分为两部分

# sorting - Hadoop 对值进行二次排序。对松散的价值观进行分类

> ID：14362734
> 
> 赞同：0
> 
> 时间：2013-01-16T16:11:05.470
> 
> 标签：sorting, hadoop, mapreduce, partitioning

比较常见的问题，不知道怎么选。

我有字段：**id、creationDate、state、dateDiff**

**id**是一个**自然键**。

我需要进入我的减速器：

**KEY(id), VALUE(creationDate, state, dateDiff)**

**VALUE(creationDate, state, dateDiff) 应按以下方式排序：creationDate, state**

我应该选择什么钥匙？我确实创建了**复合键（id、creationDate、state）**

我确实通过**id****实现** 了分区器

 ****id**石斑鱼

 ****按**id、creationDate、state****排序****

 ****我的减速器只有唯一的 id ... 例如：

```
1 123 true  6
1 456 false 6
1 789 true  7 
```

我只得到

```
1 123 true  6 
```

在我的减速机中。好像我没有分类器，分区器，石斑鱼:(有很多理解。

这是我的代码：

```
public class POIMapper extends Mapper<LongWritable, Text, XVLRKey, XVLRValue>{

    private static final Log LOG = LogFactory.getLog(POIMapper.class);

    @Override
    public void map(LongWritable key, Text csvLine, Context context) throws IOException, InterruptedException {
        Pair<XVLRKey, XVLRValue> xvlrPair = POIUtil.parseKeyAndValue(csvLine.toString(), POIUtil.CSV_DELIMITER);
        context.write(xvlrPair.getValue0(), xvlrPair.getValue1());
    }

}

public class POIReducer extends Reducer<XVLRKey, XVLRValue, LongWritable, Text>{

    private static final Log LOG = LogFactory.getLog(POIReducer.class);

    private final Text textForOutput = new Text();

    @Override()
    public void reduce(XVLRKey key, Iterable<XVLRValue> values, Context context)
                                                                            throws IOException, InterruptedException {
        XVLROutput out = null;
//Just check that values are correctly attached to keys. No logic here...
        LOG.info("\nPOIReducer: key:"+key);
        for(XVLRValue value : values){
            LOG.info("\n --- --- --- value:"+value+"\n");
            textForOutput.set(print(key, value));
            context.write(key.getMsisdn(), textForOutput);
        }
    }

    private String print(XVLRKey key, XVLRValue value){
        StringBuilder builder = new StringBuilder();
        builder.append(value.getLac())          .append("\t")
               .append(value.getCellId())       .append("\t")
               .append(key.getDateOccurrence()) .append("\t")
               .append(value.getTimeDelta());
        return builder.toString();
    }
} 
```

职位代码：

```
JobBuilder<POIJob> jobBuilder = createTestableJobInstance();

        jobBuilder.withOutputKey(XVLRKey.class);
        jobBuilder.withOutputValue(XVLRValue.class);

        jobBuilder.withMapper(POIMapper.class);
        jobBuilder.withReducer(POIReducer.class);

        jobBuilder.withInputFormat(TextInputFormat.class);
        jobBuilder.withOutputFormat(TextOutputFormat.class);

        jobBuilder.withPartitioner(XVLRKeyPartitioner.class);
        jobBuilder.withSortComparator(XVLRCompositeKeyComparator.class);
        jobBuilder.withGroupingComparator(XVLRKeyGroupingComparator.class);

        boolean result = buildSubmitAndWaitForCompletion(jobBuilder);
        MatcherAssert.assertThat(result, Matchers.is(true));

public class XVLRKeyPartitioner extends Partitioner<XVLRKey, XVLRValue> {

    @Override
    public int getPartition(XVLRKey key, XVLRValue value, int numPartitions) {
            return Math.abs(key.getMsisdn().hashCode() * 127) % numPartitions;
    }
}

public class XVLRCompositeKeyComparator extends WritableComparator {

    protected XVLRCompositeKeyComparator() {
        super(XVLRKey.class, true);
    }

    @Override
    public int compare(WritableComparable writable1, WritableComparable writable2) {
        XVLRKey key1 = (XVLRKey) writable1;
        XVLRKey key2 = (XVLRKey) writable2;
       return key1.compareTo(key2);
    }
}

public class XVLRKeyGroupingComparator extends WritableComparator {

    protected XVLRKeyGroupingComparator() {
        super(XVLRKey.class, true);
    }

    @Override
    public int compare(WritableComparable writable1, WritableComparable writable2) {

        XVLRKey key1 = (XVLRKey) writable1;
        XVLRKey key2 = (XVLRKey) writable2;

        return key1.getMsisdn().compareTo(key2.getMsisdn());

    }
}

public class XVLRKey implements WritableComparable<XVLRKey>{

    private  final LongWritable msisdn;
    private  final LongWritable dateOccurrence;
    private  final BooleanWritable state;
//getters-setters
}

public class XVLRValue implements WritableComparable<XVLRValue> {

    private final LongWritable lac;
    private final LongWritable cellId;
    private final LongWritable timeDelta;
    private final LongWritable dateOccurrence;
    private final BooleanWritable state;
//getters-setterrs
} 
```

请查看 XVLRKey、XVLRValue 确实有重复的字段。我在 XVLRKey 中复制了 dateOccurrence 和 state，因为我想在 reducer 中获取排序值。它们应该按 dateOccurrence 排序。

我找不到不重复的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:25:52.897

在二级排序情况下（如您所描述的），当您从迭代器中检索下一个值时，您拥有的键的值会发生变化。

发生这种情况是因为 Hadoop 框架重用了对象的实例，以尽可能避免对象创建和垃圾收集。

因此，当您调用“next()”时，框架也会更改键实例内的数据。

所以如果你移动

```
 LOG.info("\nPOIReducer: key:"+key); 
```

语句，以便它位于 for 循环内，您应该会看到所有的键。

由于这种影响，我的工作基本上遵循以下“规则”：

> 该键仅由框架用于将值定向到正确的减速器。

这意味着

1.  我可能需要的一切都必须存在于值中。
2.  在减速器中，我只查看值，并且总是丢弃/忽略键。
3.  用于创建键的属性也可以在值中找到。********

# php - joomla 搜索模块 - 在单独的页面上显示结果

> ID：14362735
> 
> 赞同：0
> 
> 时间：2013-01-16T16:11:06.483
> 
> 标签：php, joomla, joomla2.5, joomla-extensions

我创建了一个使用 AJAX 显示结果而不刷新页面的搜索模块。但是，我的客户希望它以与搜索模块显示数据相同的方式显示。我无法使用默认搜索模块，因为我从数据库中自己的表中搜索数据。

所以我的问题是：如何在新的单独页面上显示搜索结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:17:36.350

@Vojtech 只需编写一个搜索插件和简单的模块即可将数据提交到 joomla 搜索组件。

# android - 更新 Android 联系人的唯一键

> ID：14362736
> 
> 赞同：0
> 
> 时间：2013-01-16T16:11:08.643
> 
> 标签：android

哪个是更新 Android 联系人的正确唯一联系人标识符？

*   ContactsContract.Contacts._ID
*   ContactsContract.Contacts.LOOKUP_KEY
*   ContactsContract.Data.LOOKUP_KEY
*   ContactsContract.RawContacts._ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:36:37.570

ContactsContract.Contacts._ID 是正确且唯一的 id。它由其他表中的 CONTACT_ID 引用，例如：ContactsContract.RawContacts.CONTACT_ID

# oracle - 比较 2 个数据库实例

> ID：14362737
> 
> 赞同：1
> 
> 时间：2013-01-16T16:11:10.090
> 
> 标签：oracle, release-management

我在本地机器上创建的 2 个数据库有问题。我不断更改一个数据库实例（比如 SID A），而另一个实例（比如 SID B）每 2-3 周只更改一次。我想找出我在 SID A 中对本地数据库（过程、插入、删除、函数等）所做的所有更改。两个实例都有 10 个用户，并且所有 10 个用户都存在这些更改。

我试图在 sqldeveloper 中做一个“差异”，但我最终得到了所有表、过程等的列表——所有这些都将在 SID B 中创建。

我看过一些工具，现成的脚本等。

有没有我想念的明确方法 - 我不想每次要迁移更改时都进行数据库导出和导入。

数据库：Oracle 10G

提前感谢您的帮助。

谢谢，贡献

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:29:17.950

一种选择是使用像[Red Gate 的“Schema Compare for Oracle”](http://www.red-gate.com/products/oracle-development/schema-compare-for-oracle/)这样的工具；它坚如磐石，可以完全满足您的需求，几乎开箱即用。

不过，在走这种路线之前，我建议您考虑一下如何将更改部署到您的环境中。例如，如果您将对模式 A 所做的增量 DML 和 DDL 更改存储在源代码管理中，那么您可以非常轻松地针对模式 B 进行这些更改。

# hex - 是否有任何编译器生成带有小写十六进制字母的十六进制 Intel Recs？

> ID：14362738
> 
> 赞同：0
> 
> 时间：2013-01-16T16:11:10.390
> 
> 标签：hex, intel

只是好奇：使用带有 ASCII 转换的英特尔十六进制记录文件解析器。我的编译器为十六进制字段生成带有大写字母的英特尔十六进制记录。一些编译器是否生成带有小写十六进制值的记录？

```
:10001000C4BC5F563E678745456679D421234556F8 
```

对比

```
:10001000c4bc5f563e678745456679d421234556f8 
```

该标准仅使用大写字母，但由于它似乎并没有明确禁止小写字母，我猜一些编译器可能会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:39:58.700

如果您在 Linux 或某些 Unix 系统上工作，您始终可以使用 tr 之类的工具自己进行转换。例如，看[sed one-liner 将所有大写字母转换为小写字母？](https://stackoverflow.com/questions/4569825/sed-one-liner-to-convert-all-uppercase-to-lowercase)

如果你在 Windows 上，你可以在 msys 中找到一个可用的 tr（例如，如果你使用 TortoiseGit，你甚至可能已经拥有它）。

# database - 原子操作 django

> ID：14362739
> 
> 赞同：1
> 
> 时间：2013-01-16T16:11:17.187
> 
> 标签：database, django, transactions, counter, atomic

我最近更新到 django 1.4 并且一直在解决一些问题。

最近的是原子操作。

由于某种原因，当单击链接时，视图会被调用两次。这已通过开发服务器上的打印语句验证。

举个例子：

```
 def link_createNewNumber(self, request, obj=None):
      print "*** createNewNumber Called ***"
      number = numbers.objects.filter(id=obj)
      if len(number) == 1:
         print "Exists, just redirect to new page"
         # ResponseRedirect here...
      elif len(number) == 0:
         # Code to create new entry
         print "Saved new database entry"
         # ResponseRedirect here... 
```

现在我偶然发现了一些交易，这似乎是我需要的。但是，即使在将事务中间件添加到 settings.py 之后：

```
...
'django.middleware.transaction.TransactionMiddleware',
... 
```

和@transaction.commit_on_success 到函数的开始：

```
@transaction.commit_on_success
def link_createNewNumber(self, request, obj=None):
... 
```

我经常得到以下输出（简化）：

```
*** createNewNumber Called ***

*** createNewNumber Called ***

Saved new database entry

Saved new database entry 
```

我很难过，因为这一切都可以在 1.2.3 中正常工作。问题的核心似乎是选择链接时的双重执行。

# javascript - Windows 8 WinJS 中的 Cookie

> ID：14362740
> 
> 赞同：0
> 
> 时间：2013-01-16T16:11:19.860
> 
> 标签：javascript, facebook-graph-api, windows-8, winjs, internet-explorer-10

如何启用 IE10 存储 cookie？

一些互联网服务（例如 Facebook 对话框）以这种方式传递变量，您需要在进一步的请求中使用它们，但 IE10 不允许 cookie。

我要做的是使用“Windows.Security.Authentication.Web.WebAuthenticationBroker”登录 facebook，获取令牌，然后打开提要对话框......当我尝试打开提要对话框时，我收到一个错误，因为页面没有cookies...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:15:01.440

如果您的问题是关于`WinRT`使用编写的应用程序，`JavaScript/HTML/CSS`那么您没有 cookie 的概念，因为这不是 IE10，而是`IE10 HTML rendering engine`- *Trident*和`IE10 JS engine`- *Chakra*。您有`AppData`（**本地状态、临时状态、漫游状态**）`Windows Store Apps`，您可以在其中存储您想要的任何数据。[这是](http://msdn.microsoft.com/en-us/library/windows/apps/hh465118.aspx)如何访问当地状态的指南。

如果问题真的是关于 IE10，那么我向您保证，如果用户启用了 cookie，IE10 支持 cookie。

# javascript - 如何查看 javascript 修改了特定的 HTML 位？

> ID：14362742
> 
> 赞同：1
> 
> 时间：2013-01-16T16:11:20.793
> 
> 标签：javascript, html, debugging

当我加载一个页面时，有一个样式属性已添加到`<body>`我的模板中不存在的标签中。我如何发现 javascript 修改了它？

为了清楚起见，body 标签现在是：

```
<body class="home page" style="margin-top: -43px;"> 
```

所以样式不是来自样式表。虽然模板根本不包含“style=”位。所以我很确定一些正在运行的javascript正在修改body标签。

我可以使用 Firefox/Firebug 和 Chrome Inspector。我曾尝试在“HTML”/“元素”视图中右键单击正文标记并选择“属性修改中断”，但在我可以做到这一点时发生了变化，并且断点在页面重新加载后无法生存。

我正在使用 Django 和 jQuery，以防改变答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:25:32.437

我目前使用名为**FireDiff**的 Firebug 扩展，您可以在此处提交其主页：http: [//www.incaseofstairs.com/firediff/](http://www.incaseofstairs.com/firediff/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:32:33.657

您可以使用[突变观察者](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)。
尝试将此代码添加为在页面加载时执行的第一件事：

```
var target = document.querySelector('body'),
    observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            debugger;
        });
    });

observer.observe(target, { attributes: true }); 
```

作为旁注，如果这种特定类型的断点在页面重新加载后幸存下来，那就太好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:15:43.770

它也有可能被添加到服务器端。如果您在源文件中搜索样式表名称，它应该出现在 JavaScript 或 Python 文件中。即“mystylefile.css”的grep

如果要缩小范围，您可以禁用 JavaScript 并查看是否仍添加它。

**更新**

找到将边距顶部添加到元素的内容将更加困难！您可以在 JavaScript 文件中搜索“margin-top”并查看返回多少结果 - 或逐个添加 JavaScript 文件，直到其中一个文件被添加。

# sql - 交叉连接查询

> ID：14362749
> 
> 赞同：0
> 
> 时间：2013-01-16T16:11:54.430
> 
> 标签：sql, oracle

改写我的原始帖子以进一步澄清。

我目前有下表：

**产品_参考**

*   product_id
*   产品名称

**产品**

*   product_id
*   so_date（日期）
*   总销售额

**日历**

*   dt（日期字段，每一行代表过去/未来 10 年的一天）

我希望生成一份报告，该报告将告诉我过去 6 个月（基于 SYSDATE）每天销售的产品数量，该报告应该是过去 6 个月中每个可能的 product_id 的每一天组合格式：

产品编号 | 日期 | 总销售额

如果我假设产品表中有 0 个条目（即没有销售），我仍然希望得到完整的报告输出，但它会显示 6 个月的零数据，即

```
1 | 2012-01-01 | 0
2 | 2012-01-01 | 0
3 | 2012-01-01 | 0
1 | 2012-01-02 | 0
2 | 2012-01-02 | 0
3 | 2012-01-02 | 0
… 
```

这将假设 product_reference 表中有 3 种产品 - 我的原始查询（如下所述）是我的 10 种产品，但不确定从这里去哪里。

```
SELECT products.product_id, calendar.dt, products.total_sales
FROM products RIGHT JOIN calendar ON (products.so_date = calendar.dt)
WHERE calendar.dt < SYSDATE AND calendar.dt >= ADD_MONTHS(SYSDATE, -7)+1
ORDER BY calendar.dt ASC, products.product_id DESC; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:13:05.117

线索就在问题中 - 您正在寻找一个 CROSS JOIN。

```
SELECT products.product_id, calendar.dt, products.total_sales
FROM Product_Ref
CROSS JOIN calendar 
LEFT JOIN products ON products.so_date = calendar.dt 
                    AND products.product_id = Product_Ref.product_id
WHERE calendar.dt < SYSDATE AND calendar.dt >= ADD_MONTHS(SYSDATE, -7)+1
ORDER BY calendar.dt ASC, products.product_id DESC; 
```

起初我对您的表名感到困惑，其中“产品”实际上意味着“销售”，而“Product_Ref”是产品！

[这与我曾经在此处](https://stackoverflow.com/a/523611/18747)发布的使用 CROSS JOIN 的示例非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:23:21.860

假设您想要的输出是仅将产品日期与日历表中的日期匹配，您应该使用`INNER JOIN`：

```
SELECT c.dt, p.product_id, p.total_sales
FROM calendar c
INNER JOIN products p on c.dt = p.so_date
WHERE c.dt < SYSDATE and c.dt >= ADD_MONTHS(SYSDATE,-7)+1
ORDER BY c.dt ASC, p.product_id DESC; 
```

A`CROSS JOIN`将使用您的产品表和日历表中的每个组合产生结果，因此不需要使用`ON`.

- 编辑

请参阅下面的编辑（未经测试）：

```
SELECT PR.Product_ID, C.dt, P.TotalSales
FROM Calendar C 
   CROSS JOIN Product_Ref PR 
   LEFT JOIN Product P ON P.Product_Id = PR.Product_Id and p.so_date = c.dt
WHERE c.dt < SYSDATE and c.dt >= ADD_MONTHS(SYSDATE,-7)+1
ORDER BY c.dt ASC, p.product_id DESC; 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:25:35.883

据我了解，如果没有销售，您想要的是没有结果，写？

所以，我认为你只需要将**RIGHT JOIN**更改为**INNER JOIN**。

通过 RIGHT 连接，如果 JOIN 表中有寄存器，而 FROM 表中没有，它将返回 JOIN 表中的数据，引用 FROM 表的列中的值为 NULL。

通过 INNER 加入，只要您在两个表中都有匹配的数据，您就会得到结果。

希望我理解得很好，它会有所帮助。

# c++ - 反转代码时解析错误

> ID：14362750
> 
> 赞同：1
> 
> 时间：2013-01-16T16:11:57.067
> 
> 标签：c++, enterprise-architect

我尝试使用 Enterprise Architect 9.3.935 从现有的 C++ 代码制作类图。我做代码工程/导入源目录，然后选择我的目录。

但是，我收到大量类型的错误：“在第 xxxx 行解析 C:\xxxxx # 时出错。意外符号：XXXXX。您可能需要定义一个语言宏。”

在代码中，我有一个用于导出 DLL 的宏，我的大部分类看起来像：

类 MACRO_FOR_DLL_EXPORT CMyClassName { ... }

或者

类 MACRO_FOR_DLL_EXPORT CMyClassName：公共 CHerMother { ... }

意外的符号通常是第一种情况下的“{”和第二种情况下的“CHerMother”。

如何解决这个问题，它与宏有关吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T02:14:45.190

您可以在您的 EA 项目中声明几个[特定于语言的宏](http://www.sparxsystems.com/enterprise_architect_user_guide/9.3/software_engineering/languagemacros.html)，以便在逆向工程（解析）代码时忽略这些宏。EA 原生预定义了许多标准 C/C++ 框架宏。

# json - 具有相同名称的 JSONpath 字段

> ID：14362757
> 
> 赞同：1
> 
> 时间：2013-01-16T16:12:20.563
> 
> 标签：json, twitter

我正在尝试从 twitter 响应中获取用户 ID（询问多个用户）

[https://dev.twitter.com/docs/api/1/get/users/lookup](https://dev.twitter.com/docs/api/1/get/users/lookup)

但如果我尝试

$.[*].id 或 $..id

检索所有具有 id 的字段（甚至是嵌套字段）。

我怎样才能将“id”字段放在第一级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:26:08.647

我相信您只能通过以下查询获得第一级 id `$[*].id`。我相信这就是您所要求的；如果我误解了你，请告诉我。

# c# - 引用添加到 StackPanel 的 WPF 控件

> ID：14362760
> 
> 赞同：0
> 
> 时间：2013-01-16T16:12:47.970
> 
> 标签：c#, wpf, controls, stackpanel

这是我几天来一直试图解决的问题，但我还没有找到一个好的解决方案。

我有一个包含 StackPanel 的主 WPF 窗口。我还有一个名为“MessageManagement”的类，其中包含一个名为“MessagePreview”的自定义 WPF 控件列表。

**消息预览**

```
<UserControl x:Class="FinalYearProject.MessagePreview"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="58" d:DesignWidth="254" Background="White" BorderThickness="1" BorderBrush="#FF320000">
<Grid Name="grid1">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="50" MaxWidth="50" MinWidth="50" />
        <ColumnDefinition Width="197*" MinWidth="20" />
    </Grid.ColumnDefinitions>
    <Grid Grid.Column="1" Name="grid2">
        <Grid.RowDefinitions>
            <RowDefinition Height="31*" />
            <RowDefinition Height="34*" />
            <RowDefinition Height="33*" />
        </Grid.RowDefinitions>
        <Label Content="-ERROR-" Height="28" HorizontalAlignment="Left" Margin="2,1,0,0" Name="senderLabel" VerticalAlignment="Top" Foreground="#FF0000B4" Grid.RowSpan="2" />
        <Label Content="-ERROR-" Height="33" HorizontalAlignment="Left" Name="previewLabel" VerticalAlignment="Top" Margin="-1,17,0,0" Grid.RowSpan="3" />
        <Label Content="-Error-" Grid.Row="1" Height="28" HorizontalAlignment="Left" Margin="0,16,6,0" Name="timeLabel" VerticalAlignment="Top" Grid.RowSpan="2" Width="196" />
    </Grid>
    <Grid Name="grid3">
        <Grid.RowDefinitions>
            <RowDefinition Height="29*" />
            <RowDefinition Height="27*" />
        </Grid.RowDefinitions>
        <Image Height="38" HorizontalAlignment="Center" Margin="3,0,6,20" Name="image1" Stretch="Fill" VerticalAlignment="Bottom" Width="41" Source="/FinalYearProject;component/Images/twitter-bird-light-bgs.png" Grid.RowSpan="2" />
        <CheckBox Height="16" Margin="15,0,22,6" Name="checkBox" VerticalAlignment="Bottom" Grid.Row="1" IsChecked="False" />
    </Grid>
</Grid> 
```

**消息管理**

```
List<MessagePreview> unread = new List<MessagePreview>();

    public bool messagesLocked()
    {
        foreach (MessagePreview m in unread)
        {
            if ((bool)m.checkBox.IsChecked)
                return true;
        }
        return false;
    } 
```

**主窗口 C#**

```
MessageManagement messageManagement; 
```

MessagesPanel1 是 MainWindow 内的空白 StackPanel

```
if (!messageManagement.messagesLocked())
{
       foreach (Message m in messageManagement.getListOfMessages()
       {
              MessagesPanel1.Children.Add(m)
       }
} 
```

当您将自定义控件添加到 StackPanel 时，它会创建原始控件的副本，这意味着更改 StackPanel 中控件的值不会影响我的 MessageManagement List 中的控件。

有没有办法可以引用我的原始控件，以便它们一起更改？我查看了 DataBinding，但我不确定这是否是正确的区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:45:47.317

同样，您不会`List`在 WPF 中创建 UI 元素。您使用 an`ItemsControl`并将其`ItemTemplate`属性设置为表示您的项目所需的任何 UI：

```
 <ItemsControl ItemsSource="{Binding Messages}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <!-- Everything you placed in your usercontrol, or else an instance of your usercontrol itself -->
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:16:09.213

如果说“改变”，你会看到一个数据，`WPF`你*永远*不需要直接访问内部`UI`元素，因为它们可能会发生变化。您要做的是读取绑定到它们的数据。`databinding`在该控件上正确设置后，您**将**始终更新信息。

访问`UI`元素绝非易事，但除此之外，访问数据的方式完全不可靠，因为注入控制的方式`VisualTree` *可能*会发生变化，因此您的代码将在下次更新时失败。

例如关于如何架构可以看看这里：

[WPF 数据绑定示例](http://www.codeproject.com/Articles/29054/WPF-Data-Binding-Part-1)

# database - 当一个输入有两个输出时，如何将一个输入限制为一个输出？数据库

> ID：14362767
> 
> 赞同：1
> 
> 时间：2013-01-16T16:13:27.627
> 
> 标签：database, ms-access

我似乎总是得到令人困惑的事情，所以请耐心等待。我目前正在处理标准化考试成绩。我正在做的是在 Access 中，我将学生获得的分数与百分比相匹配，因为百分比是我们的学校系统用来判断某些学生是否有资格获得某些服务的标准。当 39 的分数可以是 8% 和 7% 时，我的问题就来了。我不太了解这样做的逻辑，但我不做标准化测试，也不给它们打分。基本上，我有两个表格，一个包含学生的人数和他们的分数，另一个表格包含什么分数等于什么百分比。

```
Score

Local_ID    Fall_Score
12121         39

Percentage

Fall_Score   Percentages
39                8
39                7 
```

我有一个结合这两者的查询，但问题是，它产生了两条记录。有没有一种方法可以让 Access 只选择其中一个记录，因为我不需要输出中的两条记录？

例如，输出看起来像

```
Combine

Local_ID   Fall_Score   Percentages
12121         39            8
12121         39            7 
```

查询看起来像这样，

```
SELECT Local_ID, Fall_Score, Percentages
FROM Score LEFT JOIN Percentage ON Score.Fall_Score = Percentage.Fall_Score; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:18:34.790

平均值可能是个好主意：

```
SELECT tr.Local_ID, tr.Fall_Score, Avg(tr.Percentages) AS AvgOfPercentages
FROM TableName As tr
GROUP BY tr.Local_ID, tr.Fall_Score; 
```

# sql - case语句中的“then”处或附近的语法错误

> ID：14362770
> 
> 赞同：0
> 
> 时间：2013-01-16T16:13:38.203
> 
> 标签：sql, postgresql

我有我写的这个 sql 语句。我试图写的这个 sql 语句是在 postgres 中。我在 oracle 中有相同的 sql 语句，它工作正常。我已经通读了语法，但对我来说它看起来不错。oracle sql语句如下所示：

```
select to_char(calldate,'Day') as Day, 
       trunc(calldate) as transdate,
       decode(zoneorange,'-1, 'Onnet','0','Orange Uganda','1','UTL','2','MTN',3,'Airtel','4','Warid','5','MTN Fixed','Undefined') as destination 
```

我写的 postgres sql 语句如下所示：

```
select to_char(calldate,'Day') as Day, 
       date_trunc('day',calldate) as transdate, 
      (case when zoneorange = '-1' 
         then 'Onnet'::text = '0'  
         then 'Orange Uganda' = '1' 
         then 'UTL' = '2' 
         then 'MTN' =3 
         then 'Airtel' = '4' 
         then 'Warid' = '5', 
         then 'MTN Fixed' 
         else 'Undefined' end) as destination 
```

它抱怨我的 case 语句中的语法错误。对我来说看起来不错，所以我不知道出了什么问题。在我的 postgresql 查询中我可能做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:16:02.947

这里有很多语法错误。

尝试 ：

```
select to_char(calldate,'Day') as Day, 
    date_trunc('day',calldate) as transdate, 
    (case zoneorange when '-1' then 'Onnet'
        when '0' then 'Orange Uganda'
        when '1' then 'UTL'
        when '2' then 'MTN'
        when '3' then 'Airtel'
        when '4' then 'Warid'
        when '5' then 'MTN Fixed'
        else 'Undefined' end) as destination 
```

# windows-phone-7 - 触发 DragStartedEvent 时获取对象的绝对原点

> ID：14362774
> 
> 赞同：2
> 
> 时间：2013-01-16T16:13:44.473
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8, windows-phone, windows-phone-7.1.1

我有一个应用程序，如下图所示（抱歉，我使用的是 iPhone 样机）

![图像1](../Images/4597b5ff2b39eca322348d18db1b6144.png)

该应用程序有一个图像作为背景（使用 Canvas 显示，它采用整个可视屏幕大小），然后另一个形状（在本例中为红色矩形）将显示在背景上方，可以拖动和缩放缩放。

**现在的问题是**：

如何获取矩形左上角的坐标（从屏幕左上角开始，即画布的左上角）？

* * *

**更新**

根据@Will 的建议，我目前在这种情况下通过在其中使用来移动矩形`DragDelta`，`TranslateTransform`例如：

```
rectTransform.X += e.HorizonalChange;
rectTransform.Y += e.VerticalChange; 
```

矩形是在代码中定义的，而不是在 XAML 中：

```
rect.Stroke = new SolidColorBrush(Colors.Green);
rect.StrokeThickness = 10;
rect.Fill = new SolidColorBrush(Colors.Transparent);
rect.HorizontalAlignment = System.Windows.HorizontalAlignment.Center;
rect.VerticalAlignment = System.Windows.VerticalAlignment.Center;
rect.Width = 200;
rect.Height = 200;

canvas.Children.Add(rect); 
```

并且画布在 XAML 中定义。

* * *

**我试过的**：

最初我试图在 Drag 事件开始时获取起点，但是通过使用`DragStarted(object sender, DragStartedGestureEventArgs e)`，我只能输出被触摸点的坐标，但不能输出该矩形左上角的点。

它类似于`DragCompleted`将返回我手势结束点的事件。

那么我有没有机会获得红色矩形的原点坐标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:10:04.243

我在 Google 和 MSDN 上花了将近一个下午，然后终于在 SO 上找到了这个：

[如何获取 StackPanel 中元素的位置？](https://stackoverflow.com/questions/1510667/how-to-get-the-position-of-an-element-in-a-stackpanel)

这启发了我使用类似的方法。在这种情况下，他们设法获得了 UI 元素的绝对坐标。同样，在我的情况下，我打算知道红色矩形到背景画布的绝对原点（坐标）。

我用：

```
GeneralTransform gt = canvas.TransformToVisual(rect);
Point currentPos = gt.Transform(new Point(0, 0)); 
```

那么 currentPos 是矩形的当前位置（它的绝对位置，相对于画布）。

这是[MSDN中TransformToVisual的参考](http://msdn.microsoft.com/en-us/library/system.windows.media.visual.transformtovisual.aspx)

只有一件事需要注意：X 和 Y 的值是负数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:48:32.167

不是 100% 确定这里的语法，但是在 WPF 中（应该是类似的）我会处理它

```
private double _startX, startY, _endX, _endY;
private void DragStarted(object sender, DragStartedGestureEventArgs e)
{
   var rect = sender as UIElement; // I'm assuming the sender is your Rectangle
   this._startX = Canvas.GetLeft(rect);
   this._startY = Canvas.GetTop(rect);
}
private void DragCompleted(object sender, DragCompletedGestureOrWhateverLolEventArgs e)
{
   var rect = sender as UIElement; // I'm assuming the sender is your Rectangle
   this._endX = Canvas.GetLeft(rect);
   this._endY = Canvas.GetTop(rect);
} 
```

你说的话？打字不安全？是的，好吧，好吧。给你的矩形一个 x:Name 然后在这些方法中使用它怎么样？

```
<Rectangle x:Name="rect" SkipOtherPropertiesLol="true" /> 
```

和

```
this._startX = Canvas.GetLeft(rect); //etc 
```

附加属性一开始有点混乱，但是一旦你了解了它们的仙术，它们就非常强大且易于使用。

# java - UI Java：清除 JTable 数据的按钮

> ID：14362777
> 
> 赞同：0
> 
> 时间：2013-01-16T16:13:52.107
> 
> 标签：java, swing, user-interface, jtable, windowbuilder

我对在`Java`. 我一直在使用`WindowBuilder`创建界面。我有一些表格中的数据，我想

*   用户检查他们是否是双倍并点击右键（双倍，不是双倍）

*   然后，变量 double 或 notdouble 我想增加

*   最后，从数据中清除表并显示表中的下一个数据。

*   最后，我想给出变量的结果（double，notdouble）

    到目前为止，我已经为按钮的动作监听器编写了一个代码，以便显示一些消息

```
 // DOUBLE BUTTON

  JButton btnDouble = new JButton("DOUBLE");        
  btnDouble.setFont(new Font("Calibri", Font.PLAIN, 12));

  btnDouble.addActionListener(new ActionListener() { // For event handling

  public void actionPerformed(ActionEvent e)
  {
           //Execute when button is pressed

            System.out.println("You clicked the DOUBLE button");}
  }); 
```

我写在这里只是为了给我一些指导或我应该寻找的地方。任何可用的教程都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:23:31.483

[如何使用按钮](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)和 [如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

# javascript - 在活动的内联花式框中打开 url

> ID：14362781
> 
> 赞同：1
> 
> 时间：2013-01-16T16:13:57.753
> 
> 标签：javascript, jquery, asp.net, fancybox-2

我有一个可以加载内联内容的fancybox。当网站加载时，内容会在页面上呈现，并且在准备好文档时会显示fancybox。执行此操作的 HTML 和 javascript 如下；

**HTML：**

```
<div style="display: none">
    <div id="cookieContainer">
        <div class="splash">
            <!-- Some more content here -->
            <div class="buttons">
                <a href="javascript:parent.jQuery.fancybox.open({href : '<%=UrlRewriter.GetUrlForSystemName("MyPage")%>'})" class="cookie_button settings">Instellingen</a>
                <a href="javascript:void(0);" class="cookie_button accept">Accepteren</a>
            </div>
        </div>
    </div>
</div> 
```

**JAVASCRIPT：**

```
$(document).ready(function(){
          $("a#myUrl").fancybox({
                'closeClick': false,
                'modal': false,
                'closeBtn': false,
                'width': '400px',
                'height': '200px',
                'autoSize': false,
                'padding': 10,
                'margin': 0
            });

          $('a#myUrl').trigger('click');
}); 
```

花式框包含两个超链接。一个执行一些javascript（带有“cookie_button接受”类的按钮），另一个应该将用户发送到当前活动的fancybox中的特定*url*。

我已经尝试了[Fancybox 网站上](http://fancyapps.com/fancybox/#examples)的各种选项，但都没有给我想要的结果。其中一个示例（带有 iFrame 的示例）具有我想要的功能，但是这个示例从一个类型为“iFrame”的花式框导航到另一个具有相同类型的花式框。我在这里要做的是从“inline”类型的fancybox导航到“iFrame”类型的fancybox。这甚至可能吗？还是有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:07:59.300

这就是您可以在`inline`内容中执行的操作（注意我使用了呈现的 html）

```
<a id="myUrl" href="#cookieContainer">open fancybox</a>

<div style="display: none">
  <div id="cookieContainer">
    <div class="splash">
      <!-- Some more content here -->
      <div class="buttons"> 
        <a href="http://jsfiddle.net" id="myUrl2" class="cookie_button settings" data-fancybox-type="iframe">Instellingen</a>
        <a href="javascript:void(0);" class="cookie_button accept" onclick="jQuery.fancybox.close()">Accepteren</a>
      </div>
    </div>
  </div>
</div> 
```

顶部的链接是绑定到 fancybox ( `#myUrl`) 的选择器。

现在，关于`inline`内容中的按钮，第一个（*Instellingen*）不需要运行javascript来打开新的fancybox；在您的情况下，您可以将其设置为常规链接，例如：

```
<a href="<%=UrlRewriter.GetUrlForSystemName("MyPage")%>" id="myUrl2" class="cookie_button settings" data-fancybox-type="iframe">Instellingen</a> 
```

**请注意**，我向该链接添加了两个属性：

*   `id="myUrl2"`: 绑定到 fancybox 的新选择器
*   `data-fancybox-type="iframe"`: 所以下一个fancybox 将作为iframe 打开

然后是fancybox脚本：

```
$(document).ready(function () {
  $("#myUrl, #myUrl2").fancybox({
    closeClick: false,
    closeBtn: false,
    width: 400,
    height: 200,
    autoSize: false,
    fitToView : false,
    padding: 10,
    margin: 0
  });
  $('a#myUrl').trigger('click');
}); 
```

请注意，我们将 fancybox 绑定到 fancybox 内外的选择器：

```
$("#myUrl, #myUrl2") 
```

另请注意，我通过 and 更改了 and （`'width': '400px'`整数和布尔值不带引号和隐含的 'px'）。`'height': '200px'``width: 400``height: 200`

我还删除`'modal': false`了因为是默认值，并在`fitToView : false`您使用`autoSize: false`.

可选地，我添加`onclick="jQuery.fancybox.close()"`到“ *Accepteren* ”按钮，这样它会`inline`在点击后关闭fancybox，但你可能不需要它。

这将使您从您的幻想`inline`内容转移到幻想`iframe`内容。

见演示**[JSFIDDLE](http://jsfiddle.net/bpNRH/)**

# javascript - 有没有一种简单的方法来使用 javascript 替换来删除标签内的内容

> ID：14362784
> 
> 赞同：0
> 
> 时间：2013-01-16T16:14:02.180
> 
> 标签：javascript, regex

有很长的字符串，比如

```
<td>sdfaf</td><td width='1'></td><td width='1'>sdfdsf</td><td></td> 
```

是否有一个简单的正则表达式方法来删除标签内的内容，将其转换为

```
<td></td><td width='1'></td><td width='1'></td><td></td> 
```

我知道 jquery html() 和 empty() 可以完成这项工作，但我想找到一个纯 javascript 方法来完成这项工作。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:15:39.390

假设您的“字符串”来自文档中的表格，以下是在 vanilla javascript 中执行此操作的方法：

```
var cells = yourtable.getElementsByTagName('td');
for (var i=0; i<cells.length; i++) cells[i].innerHTML = ''; 
```

（如果您只有字符串，您可以简单地创建一个`tr`节点并将此字符串设置为 innerHTML）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T16:17:31.703

试试这个简单的代码

```
var tds = document.getElementsByTagName("td");

for ( var counter = 0; counter < tds.length; counter++ )
{
  tds[ counter ].innerHTML = ""; 
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T20:01:53.550

粗略且准备就绪，假设标签之间或标签内没有尖括号：

```
 str = str.replace( />[^<]+<\//g, '></' ); 
```

# php - 如何让我的 android 应用程序听到更新？

> ID：14362788
> 
> 赞同：0
> 
> 时间：2013-01-16T16:14:08.967
> 
> 标签：php, android, updates

您好，2013 年新年快乐！！

假期后我回到了我的应用程序，现在我希望它保持活力并听取更新！有谁知道该怎么做？我的意思不是一个完整的答案，我的意思是像指导，方向！因为不知道怎么开始！！另一方面，如何从我的 PHP/PostgreSQL 服务器发送更新？之前有没有人做过这样的事情可以帮助我？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:22:38.173

如果您想推送更新到您的应用程序，您可以使用 GCM：http: [//developer.android.com/google/gcm/index.html](http://developer.android.com/google/gcm/index.html)

如果您可以简单地让您的应用程序 POLL 定期更新，那么您可以使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)和[IntentService](http://developer.android.com/reference/android/app/IntentService.html)让您的应用程序根据需要访问您的 PHP 端点。

选择使用哪个通常取决于更新需要多及时以及它们可能发生的频率（考虑到电池、网络和其他资源使用情况等）。

要开始使用 PHP 的 GCM，请查看：[使用 Google Cloud Messaging (GCM)、PHP 和 MySQL 的 Android 推送通知](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

而且，这里有一个很好的[AlarmManager/IntentService 示例](https://github.com/commonsguy/cwac-wakeful)（以及处理唤醒锁）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:27:33.013

我的建议是使用 GCM 向运行应用程序的设备发送推送消息，因为 GCM 服务始终在运行，并且它比轮询使用更少的电池。

附带说明：不要通过推送通知发送实际数据，而只需发送服务器上有新数据的通知。然后，该应用程序可以从服务器下载新数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:29:22.930

如果通过更新您的意思是更新版本是用户具有您的应用程序的第 1 版，但有第 2 版可用，那么您可以这样做：

您可以有一个变量来保存当前的应用程序版本，然后每次用户启动应用程序时，您应该连接到您的服务器以检查最新版本。然后，如果用户的版本低于您当前服务器中的版本，您可以比较并显示警报。

这里有两件重要的事情：每次更新应用程序时，您都应该查找版本变量的值并更改它，并且您应该也更新服务器中的当前应用程序版本变量

如果您的意思是数据更新，那么最好的选择是使用 GCM 服务（Google Cloud Messaging）

# activemq - 即使使用 JDBC 持久性，ActiveMQ 是否总是需要 KahaDB 库？

> ID：14362800
> 
> 赞同：3
> 
> 时间：2013-01-16T16:14:41.600
> 
> 标签：activemq

我正在尝试使用 JDBC 持久性设置以下代理：

```
<amq:broker id="activeMQBroker" brokerName="activeMQBroker" useJmx="false" persistent="true">
    <amq:transportConnectors>
        <amq:transportConnector name="vm" uri="vm://activeMQBroker" />
    </amq:transportConnectors>
    <amq:persistenceAdapter>
        <amq:jdbcPersistenceAdapter dataSource="#dataSource" />
    </amq:persistenceAdapter>
</amq:broker> 
```

在启动时，我得到：

```
java.lang.NoClassDefFoundError: org/apache/kahadb/page/Transaction$Closure 
```

如果我将 KahaDB JAR 添加到类路径中，一切都很好，并且 ActiveMQ 数据库表被创建（在 Postgres 中）。不过，我宁愿没有这种额外的依赖，因为我没有使用它。

知道为什么 ActiveMQ 仍在寻找 KahaDB，即使我使用的是 JDBC？我尝试了设置`schedulerSupport="false"`，如[this question](https://stackoverflow.com/q/13857373/612265)中所述，但没有运气。

PS 有足够代表的人可以创建一个“KahaDB”标签吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:01:57.907

当前版本的 ActiveMQ***与*** KahaDB 紧密相关。TempStore 使用一个分页列表，该列表也使用 KahaDB。最简单的方法是只包含库。

# c# - 监控数据库 Linq 的变化

> ID：14362801
> 
> 赞同：-1
> 
> 时间：2013-01-16T16:14:53.067
> 
> 标签：c#, .net, sql, linq

```
 try
        {
            var dda = db.Contacts.Where(b => b.indecator == g.UserIndecator()).SingleOrDefault();

            req = Convert.ToString(dda.status);
        }
        catch (Exception e)
        {
            Console.WriteLine( е + "Error of request");
        }

        return req; 
```

问题是每次请求我都会得到相同的值。

只有通过调用`Application.Restart();`我才能获得新的价值。如何解决？

g.UserIndecator () == "abc123"; // 静态字符串

dda.status == 1 || 0; // 整数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:25:20.020

我最好的猜测是您的数据上下文（db）不会在您的每次检查迭代中重新创建，因此您正在获取缓存数据。

# c# - 初始化多个空列表

> ID：14362805
> 
> 赞同：1
> 
> 时间：2013-01-16T16:15:03.127
> 
> 标签：c#

简单的语法 c# 问题是这样的。

鉴于此代码：

```
List<string> Columns = new List<string>();
List<string> Parameters = new List<string>();
List<string> Values = new List<string>(); 
```

它可以简化为：

```
List<string> Columns = new List<string>(), Parameters = new List<string>(), Values = new List<string>(); 
```

但是我可以让它更短，因为它们都被初始化为一个空列表吗？

谢谢你们！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T16:18:22.060

`var`如果这些变量不是类字段，我可以推荐使用关键字，因为类型是从使用中知道的。平面声明三个变量真的没有意义。

```
var Columns = new List<string>();
var Parameters = new List<string>();
var Values = new List<string>(); 
```

是的，你可以做一些事情，比如在一行中声明多个局部变量，然后在一行中初始化它们。但是请**避免**在一行中声明多个变量——这会使代码更具可读性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T16:24:29.380

纯粹作为琐事/代码高尔夫的一点：

```
Func<List<string>> n = () => new List<string>();
List<string> a = n(), b = n(), c = n(), d = n(), e = n(), f = n(); 
```

但是用它来代替可用的更清晰的构造是很荒谬的。如果初始化更复杂，并且代码被正确命名和间隔，它*可能会有价值。*

```
Func<List<string>> setupFoo = () => {
    return new List<string>() { 1, 2, 3 };
};

var option1 = setupFoo();
var option2 = setupFoo();
var option3 = setupFoo(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T16:24:04.127

这不是一个很好的做法，但如果您在单个 .cs 文件中初始化字符串列表很多，您可以使用该文件的其他`using`语句为该类添加一个别名：

```
using StringList = List<string>; 
```

然后声明和初始化它们的代码是：

```
StringList Columns = new StringList(), 
           Parameters = new StringList(), 
           Values = new StringList(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T16:25:19.483

你不能再缩短了。

您*可以*使用某种“空列表工厂”：

```
public static List<string> EmptySList()
{
    return EmptyList<string>();
}

public static List<T> EmptyList<T>()
{
    return new List<T>();
}

...

List<string> Columns = EmptySList(), Parameters = EmptySList(), Values = EmptySList(); 
```

老实说，您可能不想缩短代码。只需写一些可读和可维护的东西：

```
var columns = new List<string>();
var parameters = new List<string>();
var values = new List<string>(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-11-30T20:44:38.807

IEnumerable 是集合的最基本接口。
使用它，您可以动态地实例化任何类型的集合。

对于空列表，请使用。

```
Enumerable.Empty<TYPE>(); 
```

在你的例子中......

```
using using System.Collections.Generic;
...
IEnumerable<string> Columns = Enumerable.Empty<string>();
IEnumerable<string> Parameters = Enumerable.Empty<string>();
IEnumerable<string> Values = Enumerable.Empty<string>(); 
```

# java - （旧版）TCP 到 ZeroMQ 代理的 ZeroMQ 模式

> ID：14362812
> 
> 赞同：1
> 
> 时间：2013-01-16T16:15:35.993
> 
> 标签：java, zeromq

我们正在为现有的在线游戏构建一个新客户端以及一个缓存代理组件。当前设置如下所示：

```
 Server
  |     \
 TCP    TCP
  |       \
Client1  Client2 
```

新设置将是：

```
 Server
 |   |
TCP TCP
  \   \
   Proxy          <-- (New!)
   |    \
  0MQ   0MQ
   |      \
Client1  Client2  <-- (New!) 
```

代理组件将靠近现有的游戏服务器，向它使用基于旧线路的 TCP 协议，同时通过 0MQ 向新客户端使用基于 Google Protocol Buffers 的新协议。除了在服务器与其客户端之间转发和翻译消息外，代理还将缓存（protobuf）发往客户端的消息。

服务器响应客户端请求，但也可能向特定客户端或所有客户端发送未经请求的消息。由于代理将维护发往某个客户端的消息缓存，因此它需要保持与每个客户端相关联的某些状态。

我已经在 ZeroMQ Guide 中阅读了很多内容，但我仍然不确定它的哪些“模式”或套接字组合最适合这种设置。我希望那里有一些 ZeroMQ 向导，可以就这里的最佳方式提供一些建议。

问题不是特定于语言的，但代理组件将用 Java 编写，客户端用 C# 编写。

提前谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T17:59:57.777

我认为[异步客户端服务器](http://zguide.zeromq.org/page%3aall#The-Asynchronous-Client-Server-Pattern)模式会让你接近。您的每个客户端都会创建一个 DEALER 套接字，该套接字连接到您代理中的 ROUTER 套接字。查看[示例 Java 源代码](http://zguide.zeromq.org/java%3aasyncsrv)。您可以将代理基于 ServerTask 类，使用前端/ROUTER 套接字并省略后端/经销商套接字。

您的服务器将能够响应客户端请求并将未经请求的消息发送回任何客户端。在客户端至少发送一条消息后，您需要缓存每个客户端的套接字 ID。

您与游戏服务器的 TCP 连接在概念上类似于服务器和工作人员之间的后端 DEALER 套接字 - 但是，由于您的连接是经典 TCP 而不是 ZeroMQ，因此您不能使用 ZeroMQ 套接字并且需要做一些自定义的事情。当您与经典 TCP 套接字集成时，您的自定义解决方案要求您不违反 ZeroMQ 的并发规则。

这是一种方法 - 使用一组 PAIR 套接字（我们称它们为 A 和 B）和 BlockingQueue 充当 ZeroMQ 和 TCP 套接字之间的桥梁。并创建 3 个线程 - TCPRead、TCPWrite 和 ZeroMQ。

TCPRead 从 TCP 连接读取游戏服务器。它将它们转换为 protobuf 消息并通过 A 套接字转发它们。

TCPWrite 轮询 BlockingQueue 中的消息。当它收到一条消息时，它会转换它并通过 TCP 连接将其发送到游戏服务器。

最后，大部分工作都在 ZeroMQ 线程中。它使用 ZeroMQ 轮询并不断轮询它的路由器套接字（用于来自所有客户端的所有消息）和 B 套接字（用于来自游戏服务器的消息）。向客户端发送消息很简单，通过将消息发送到路由器套接字来处理，并在消息前面加上客户端的套接字 id。通过将消息添加到 BlockingQueue 来完成向服务器发送消息。它将被 TCPWrite 拾取并转发到游戏服务器。

一旦你让这个基本设计工作起来，你就可以按照各种模式中的描述发疯并添加工人等。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:54:06.493

您还可以在原始模式下使用 0MQ ROUTER 套接字，这意味着您可以使用两个 ROUTER 套接字编写代理。除了父子线程管道外，我会远离 PAIR 套接字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-05T14:35:56.353

阅读 ZeroMQ 文档需要一些时间，尽管它非常出色。我做了并得出结论，异步客户端-服务器接近我最初想要的。

但这并不完全。所以我然后开始建造。

我真正想要的是基于我从各种例子中学到的东西。对我最终得到的内容的完整描述以及[可能](https://github.com/andycrutchlow/nimrod-ipc)有一些用途的代码，供参考或作为实际库。

# javascript - 无需 javascript 处理即可获取原始 dom 元素 innerHTML

> ID：14362816
> 
> 赞同：6
> 
> 时间：2013-01-16T16:15:42.970
> 
> 标签：javascript, html, tinymce, html-entities

背景 - 在由 TinyMCE 为大型媒体网站背后的企业内部 CMS 提供支持的文章编辑器中

HTML

```
<p>non-breaking-space: &nbsp; pound: &pound; copyright: &copy;</p> 
```

JS

```
console.log($('p').html());
console.log(document.getElementsByTagName('p').item(0).innerHTML); 
```

两者都返回

```
non-breaking-space: &nbsp; pound: £ copyright: © 
```

当我期待

```
non-breaking-space: &nbsp; pound: &pound; copyright: &copy; 
```

一些元素的实体被反转（如英镑和版权），一些元素被保留（非破坏空间）。我需要一种方法来获取所有保留的原始内部 HTML，而不是由浏览器处理的；那可能吗？

这是一个 TinyMCE 插件，它使用 jQuery 处理输入并将其放回。内容是通过数据库加载的，插件正在处理图像标签，根本不想修改文本内容。将某些实体自动更改回原始字符不会有太大问题，但是 -

*   我们不能修改社论的输入，即使它是次要的
*   由于我们网站上的一些浏览器兼容性问题，我们强制这些必须是实体才能保存

我会使用这个答案 - [https://stackoverflow.com/a/4404544/830171](https://stackoverflow.com/a/4404544/830171) - 但是不能，因为我的 HTML 代码位于用户需要编辑的文本区域内，并且我需要运行 jQuery DOM 操作（通过插件）。

我能想到的一种方法是不使用 jQuery/DOM 来处理我需要更改的图像标签，而是像许多 TinyMCE 插件一样使用正则表达式；但是由于我在正则表达式中被击落[以从所有元标记中提取所有属性](https://stackoverflow.com/questions/6723278/)以尝试在 HTML 上进行任何正则表达式，因此希望有更好的方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:22:28.703

Tinymce 使用 contenteditable iframe 来编辑内容。这就是为什么 `console.log($('p').html());`会记录其他内容的原因。

使用以下代码获取纯编辑器内容：

```
tinymce.get('your_editor_id').getBody().innerHTML 
```

# c# - 我可以使用 C# 处理程序处理 HTML5 事件吗？

> ID：14362818
> 
> 赞同：0
> 
> 时间：2013-01-16T16:15:51.733
> 
> 标签：c#, html, handler

我有一个按钮

```
 <input type="submit" value="Click Me" onclick="substitute()"/> 
```

在我的第一个 HTML5 页面中。无论如何我可以在 C# 代码中编写替代方法的主体吗？

还是我除了 JavaScript 没有其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:17:00.427

让 C# 响应网页的唯一方法是将页面发布到 Web 服务器，或执行 AJAX 请求。在 Web 服务器端，您的请求将执行一些包含 C# 代码的方法。

但这实际上取决于您要做什么；有些事情在浏览器中处理得更好。学习 ASP.NET MVC 和 Javascript，你的策略会更清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:20:31.507

像另一种选择，我可以让你看看

[TypeScript](http://www.typescriptlang.org/Samples/)是 JavaScript 语言的上标，其语法`C#`由`Microsoft`.

*非常*有趣和有前途的项目，但据我所知，仍在积极开发中，所以如果你决定使用它，请保持我对回归和追溯兼容性的看法。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:48:06.400

您可以使用一些工具在 C# 中编写将在浏览器中运行的代码。但是，这需要将 C# 自动翻译成 JavaScript（因为所有浏览器仅支持 JS）。如果您想在桌面应用程序和 Web 应用程序之间共享 C# 代码，这可能很有用。缺点是页面上的任何错误都将出现在自动生成的 JavaScript 中，您必须以某种方式将其映射到您的 C# 代码，这可能很难。

看看：

*   [JSIL](http://jsil.org/try/)
*   [萨尔塔雷勒](http://www.saltarelle-compiler.com/)

您可以在 Miguel de Icaza 博客文章中找到更多信息：http: [//tirania.org/blog/archive/2012/Sep-06.html](http://tirania.org/blog/archive/2012/Sep-06.html)

# tomcat6 - Tomcat 6 ERR_SSL_VERSION_OR_CIPHER_MISMATCH / ssl_error_no_cypher_overlap

> ID：14362819
> 
> 赞同：0
> 
> 时间：2013-01-16T16:15:52.117
> 
> 标签：tomcat6, encryption, mismatch

我无法使用浏览器访问启用 SSL/TLS 的 tomcat-6.0.36-windows-x64 服务器。它适用于 openssl 但不适用于任何浏览器。

初始化看起来不错：

`16.01.2013 16:45:09 org.apache.coyote.http11.Http11AprProtocol init`

`INFO: Initializing Coyote HTTP/1.1 on http-8443`

还有openSSL： `openssl s_client -tls1 -connect localhost:8443:` 结果：

`New, TLSv1/SSLv3, Cipher is ECDH-ECDSA-AES256-SHA`

`Server public key is 256 bit`

`Secure Renegotiation IS supported`

`Compression: NONE`

`Expansion: NONE`

`SSL-Session:`

```
Protocol  : TLSv1 
```

`Cipher : ECDH-ECDSA-AES256-SHA`

只有网络浏览器不起作用：

**Firefox 15.0.1 说：ssl_error_no_cypher_overlap**

**Chrome 24.0.1312.52 m：ERR_SSL_VERSION_OR_CIPHER_MISMATCH**

那是tomcat的配置：

`Connector port="8443" maxHttpHeaderSize="8192"
protocol="org.apache.coyote.http11.Http11AprProtocol" maxThreads="150" scheme="https" secure="true"
SSLProtocol="all"
enableLookups="false" disableUploadTimeout="true" acceptCount="100" SSLEnabled="true" SSLCertificateFile="../ecc_servercert.crt" SSLCertificateKeyFile="../ec_serverkey.pem"`

该证书基于黄道曲线算法：

`openssl ecparam -out c:\ecc\ec_serverkey.pem -name secp256k1 -genkey`

`openssl req -new -x509 -nodes -days 365 -key c:\ecc\ec_serverkey.pem -out c:\ecc\ecc_servercert.crt`

希望有人有想法？根据几个小时的搜索，浏览器应该支持这个配置......

拉加兹，托比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:05:10.427

我认为有两种可能：

1.  要么你使用 APR 连接器和 Tomcat 本地库，所以它会抛出错误。（更多信息：http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html#Edit_the_Tomcat_Configuration_File）

2.  或者您对 http 和 https 使用相同的端口：在您的连接器中，您使用通常用于 http 的 8443。（您是否尝试过使用 port="443" 而不是 "8443"？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-14T23:51:30.790

ashiii 不正确，这是因为`secp256k1`chrome 或 firefox 不支持 ecc 曲线。

`prime256v1`并且`secp384r1`是不错的选择。请参阅[http://security.stackexchange.com/questions/78621/which-elliptic-curve-should-i-use](http://security.stackexchange.com/questions/78621/which-elliptic-curve-should-i-use)

# deployment - 为什么 Capistrano 需要修改才能使用 pythonbrew 之类的东西？

> ID：14362820
> 
> 赞同：0
> 
> 时间：2013-01-16T16:15:57.433
> 
> 标签：deployment, ssh, capistrano, fabric

据我了解，Capistrano 所做的只是 ssh 进入服务器并执行我们希望它执行的命令（大部分）。

我在过去的几个项目中使用了 rvm，并且必须安装 rvm-capistrano gem。否则，即使我们在存储库中有一个正确的 .rvmrc 文件（具有正确的 ruby​​ 和正确的 gemset），它也无法找到可执行文件（或者我记得）。

同样，今天我正在为我正在使用 pythonbrew 的项目设置部署，并且一个简单的“cd #{deploy_to}/current && pythonbrew venv use myenv && gunicorn_django -c gunicorn.py”给了我一条错误消息，说“找不到可执行的 gunicorn_django”。我想这是因为 virtualenv 没有正确激活。但是我们在做“pythonbrew venv use myenv”的时候不是激活了环境吗？如果我 ssh 进入服务器并在 shell 上执行它，完整的命令可以正常工作，但是当我通过 Capistrano 执行它时它不会。

我的问题是 - 为什么 Capistrano 需要修改才能与 rvm 和 pythonbrew 等程序一起使用，即使它所做的只是通过 ssh 执行几个命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:06:47.230

那是因为他们的 ssh'ing 不会激活你的 shell 环境。所以它没有选择启用魔法的源语句。只需在运行命令之前执行 rvm use ... 而不是假设 cd 会自动拾取它。那应该没问题。如果您一直在使用结构，则可以使用 env() 上下文管理器来确保在每个命令之前运行。

# jquery - 设置 CORS（Access-Control-Allow-Origin）响应标头进行 XSS 时未在 ajax 请求标头中发送 Cookie

> ID：14362830
> 
> 赞同：2
> 
> 时间：2013-01-16T16:16:15.207
> 
> 标签：jquery, asp.net-mvc, cookies, xss, cors

我似乎无法在我的浏览器中以 javascript 设置 cookie，以作为 jQuery ajax 请求的一部分发送到子域 Web 应用程序。

我有两个 Web 应用程序，一个在根域上，一个在子域上。为了绕过跨站点脚本限制，我的子域 Web 应用程序实现了一个全局操作过滤器，以将 Access-Control-Allow-Origin 标头添加到其所有 http 响应的根域。这允许从根域到子域的 ajax 调用工作。

但是，当我使用以下代码在 javascript 中创建 cookie 时...

```
var myDate = new Date();
myDate.setMonth(myDate.getMonth() + 12);
document.cookie = 'searchId=' + ids.generateGUID() + ';domain=' + ".root.example.com" + ';path=/;expires=' + myDate; 
```

... cookie 不会在后续的 ajax 请求中传递给 -sub 域服务器。

我认为 CORS 标头并在 cookie 中设置域和路径将允许子域 Web 应用程序访问 cookie，但浏览器（chrome 21.0.1180.89 和 firefox 17.0.1）似乎不提供 cookie。

使用子域和 ajax 请求时，我是否误解了浏览器 cookie 访问限制？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T16:48:38.300

为了使 cookie 与 CORS 一起使用，您需要做两件事。

首先，您的服务器需要使用以下标头进行响应：

```
Access-Control-Allow-Credentials: true 
```

其次，您的 XmlHttpRequest 对象需要设置`withCredentials`属性：

```
xhr.withCredentials = true; 
```

这应该在请求中发送远程域 cookie，尽管 cookie 必须由远程服务器设置。

您的 JS 代码本身仍然无法访问 cookie，也无法在远程域上设置 cookie。没有办法，AFIAK for JS 代码访问另一个域的 cookie。

# vb.net - 使用 Microsoft Sync 框架时使用 JOIN 离线查询 SQL Server CE 数据库

> ID：14362832
> 
> 赞同：0
> 
> 时间：2013-01-16T16:16:17.333
> 
> 标签：vb.net, sql-server-ce, microsoft-sync-framework

运行我的应用程序时出现此错误，使用同步框架构建，离线

> *ntext 和 image 数据类型不能用于 WHERE、HAVING、GROUP BY、ON 或 IN 子句，除非这些数据类型与 LIKE 或 IS NULL 谓词一起使用。*

我有一个保存一些测试的数据库，TestOptions。另一个持有名为 CreateScript 的测试集合。这些表用于填充要执行的测试的列表视图。

使用 Sync 框架，这些表已在本地克隆为 SQL Server CE 表。

用户选择所需的测试并将结果存储在结果表中。

填充列表视图时，会使用包含所有这三个表的两个连接来运行查询，以收集测试数据。

```
select 
    TestType, TestName, LowerLimits, UpperLimits 
from 
    CreateScriptTable 
inner join 
    TestOptionsTable on CreateScriptTable.TestType = TestOptionsTable.TestName 
LEFT JOIN 
    TestResultsTable on CreateScriptTable.TestType = TestResultsTable.TestName 
WHERE 
    CreateScriptTable.InstrumentType= 'type1' 
ORDER BY 
    [Index] ASC 
```

**当应用程序在线**时，此查询工作正常。当应用程序**处于脱机状态**时，我得到上面关于`nText`和`image`数据类型的异常。

我也得到了例外，

> *大对象（ntext 和 image）不能在 ORDER BY 子句中使用。*

运行与上述类似的查询时。

在我的数据库中，没有包含这些数据类型的列。从四处阅读看来，和`varbinary(MAX)`数据`nvarchar(MAX)`类型分别被强制转换为本地 SQL Server CE 数据库。为了解决这个问题，我将数据类型更改为，但问题仍然存在。`image``nText``nvarchar(4000)``varbinary(4000)`

[这里](http://support.microsoft.com/kb/958478#appliesto)有一个热修复程序，但它早于我机器上的 SQL Server CE 版本。我还没有测试它，因为我担心会弄乱我的开发环境并且非常接近需要完整的构建来演示。

我还玩弄了在内存`DataTables`中为每个表创建并查询这些表的想法，但这也没有成功。

目前我没有想法，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:20:36.793

利用

```
ORDER BY CAST ([Index] as nvarchar(4000)) 
```

# android - PhoneGap - 如何在 for 循环中查询 SQLite？

> ID：14362835
> 
> 赞同：0
> 
> 时间：2013-01-16T16:16:19.977
> 
> 标签：android, cordova, sqlite, sp-executesql

我对 PhoneGap 应用程序的 SQLite 查询有疑问。我会打开一个文件夹并使用 where 子句为文件夹中的每个条目进行选择。在选择查询之后，我打开了一个 for 循环，但脚本对所有条目使用相同的变量（它只记住最后一条记录的变量）。循环正确读取条目数，但它仅适用于一条记录的变量，并且它适用于文件夹中仅包含这些变量的文件的次数。

```
function readerSuccess(entries) {    
var db = window.openDatabase("Test", "1.0", "Demo test", 200000);
db.transaction(function(tx) { 
var i;
for (i=0; i<entries.length; i+=1) {
var imgName=entries[i].name;
var upfi=entries[i];
console.log(imgName);
tx.executeSql("SELECT * FROM FOTO WHERE img=?", [imgName], function(tx, result) {
console.log(imgName+" after SQL");
var dataset = result.rows;
console.log("Returned rows = " + dataset.length);
if (dataset.length==0) {
console.log('No rows!');
console.log('File sync: '+imgName);
} else {
console.log('File already sync: '+imgName);
};
}, successCB, errorCB)}}, successCB, errorCB);
}; 
```

我已经用全局变量或局部变量进行了测试，但没有成功。我不知道该转向哪里！！:(

# python-3.x - 在 Python 中创建一个计数器

> ID：14362837
> 
> 赞同：-2
> 
> 时间：2013-01-16T16:16:27.633
> 
> 标签：python-3.x

我想以 1 微秒的步长制作一个从 0 到 2.097152 秒的计数器。

我尝试使用 time.sleep() 但这不是正确的解决方案

我使用 Python 3.x

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:25:53.227

你可以搜索`[python] range float`

但无论如何：

```
def msrange(start, stop, step=0.000001):
    while start <= stop:
        yield round(start, 6)
        if start + step > stop:
            yield stop
        start += step 
```

那么你就可以：

```
for i in msrange(0, 0.00003):
    print(i) 
```

输出：

```
0
1e-06
2e-06
3e-06
...
3e-05 
```

# java - LWJGL：更有效的渲染天空盒的方法

> ID：14362839
> 
> 赞同：0
> 
> 时间：2013-01-16T16:16:29.773
> 
> 标签：java, lwjgl, skybox

我目前正在渲染一个这样的天空盒：

```
 //Front Face
    GL11.glBindTexture(GL11.GL_TEXTURE_2D, skybox[0].getTextureID());
    GL11.glBegin(GL11.GL_QUADS);
        GL11.glTexCoord2f(1f, 0.0f);
        GL11.glVertex3f(-player.x - offset, -player.y - offset, -player.z - offset);
        GL11.glTexCoord2f(1f, 1f);
        GL11.glVertex3f(-player.x - offset, -player.y + offset, -player.z - offset);
        GL11.glTexCoord2f(0.0f, 1f);
        GL11.glVertex3f(-player.x + offset, -player.y + offset, -player.z - offset);
        GL11.glTexCoord2f(0.0f, 0.0f);
        GL11.glVertex3f(-player.x + offset, -player.y - offset, -player.z - offset);
    GL11.glEnd();

    // Back Face
    GL11.glBindTexture(GL11.GL_TEXTURE_2D, skybox[2].getTextureID());
    GL11.glBegin(GL11.GL_QUADS);
        GL11.glTexCoord2f(0.0f, 0.0f);
        GL11.glVertex3f(-player.x - offset, -player.y - offset, -player.z + offset);
        GL11.glTexCoord2f(1f, 0.0f);
        GL11.glVertex3f(-player.x + offset, -player.y - offset, -player.z + offset);
        GL11.glTexCoord2f(1f, 1f);
        GL11.glVertex3f(-player.x + offset, -player.y + offset, -player.z + offset);
        GL11.glTexCoord2f(0.0f, 1f);
        GL11.glVertex3f(-player.x - offset, -player.y + offset, -player.z + offset);
    GL11.glEnd();

    // Top Face
    GL11.glBindTexture(GL11.GL_TEXTURE_2D, skybox[4].getTextureID());
    GL11.glBegin(GL11.GL_QUADS);
        GL11.glTexCoord2f(1f, 1f);
        GL11.glVertex3f(-player.x - offset, -player.y - offset, -player.z - offset);
        GL11.glTexCoord2f(0.0f, 1f);
        GL11.glVertex3f(-player.x + offset, -player.y - offset, -player.z - offset);
        GL11.glTexCoord2f(0.0f, 0.0f);
        GL11.glVertex3f(-player.x + offset, -player.y - offset, -player.z + offset);
        GL11.glTexCoord2f(1f, 0.0f);
        GL11.glVertex3f(-player.x - offset, -player.y - offset, -player.z + offset);
    GL11.glEnd();

    // Bottom Face
    GL11.glBindTexture(GL11.GL_TEXTURE_2D, skybox[5].getTextureID());
    GL11.glBegin(GL11.GL_QUADS);
        GL11.glTexCoord2f(1f, 0f);
        GL11.glVertex3f(-player.x - offset, -player.y + offset, -player.z - offset);
        GL11.glTexCoord2f(1f, 1f);
        GL11.glVertex3f(-player.x - offset, -player.y + offset, -player.z + offset);
        GL11.glTexCoord2f(0f, 1f);
        GL11.glVertex3f(-player.x + offset, -player.y + offset, -player.z + offset);
        GL11.glTexCoord2f(0f, 0f);
        GL11.glVertex3f(-player.x + offset, -player.y + offset, -player.z - offset);
    GL11.glEnd();

    // Right face
    GL11.glBindTexture(GL11.GL_TEXTURE_2D, skybox[3].getTextureID());
    GL11.glBegin(GL11.GL_QUADS);
        GL11.glTexCoord2f(0.0f, 0.0f);
        GL11.glVertex3f(-player.x - offset, -player.y - offset, -player.z - offset);
        GL11.glTexCoord2f(1f, 0.0f);
        GL11.glVertex3f(-player.x - offset, -player.y - offset, -player.z + offset);
        GL11.glTexCoord2f(1f, 1f);
        GL11.glVertex3f(-player.x - offset, -player.y + offset, -player.z + offset);
        GL11.glTexCoord2f(0.0f, 1f);
        GL11.glVertex3f(-player.x - offset, -player.y + offset, -player.z - offset);
    GL11.glEnd();

    // Left Face
    GL11.glBindTexture(GL11.GL_TEXTURE_2D, skybox[1].getTextureID());
    GL11.glBegin(GL11.GL_QUADS);
        GL11.glTexCoord2f(1f, 0.0f);
        GL11.glVertex3f(-player.x + offset, -player.y - offset, -player.z - offset);
        GL11.glTexCoord2f(1f, 1f);
        GL11.glVertex3f(-player.x + offset, -player.y + offset, -player.z - offset);
        GL11.glTexCoord2f(0.0f, 1f);
        GL11.glVertex3f(-player.x + offset, -player.y + offset, -player.z + offset);
        GL11.glTexCoord2f(0.0f, 0.0f);
        GL11.glVertex3f(-player.x + offset, -player.y - offset, -player.z + offset);
    GL11.glEnd(); 
```

这似乎是一种非常低效的渲染天空盒的方法，因为我必须不断在纹理和四边形之间切换。此外，像这样渲染四边形往往会归因于视觉伪影，例如单像素线（四边形之间的接缝）。我听说过使用立方体贴图来提高效率，但我在努力实现。如果你们有任何建议，请随时指出我正确的方向。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:13:43.637

立方体贴图基本上是将所有六个纹理放在一个纹理上。然后只更改一次坐标并使用一次 glBindTexture 这将类似于：

```
GL11.glBindTexture(GL11.GL_TEXTURE_2D, skybox.getTextureID());
GL11.glBegin(GL11.GL_QUADS);
    //Front Face
    GL11.glTexCoord2f(0.25f, 0.25f);
    GL11.glVertex3f(-player.x - offset, -player.y - offset, -player.z - offset);
    GL11.glTexCoord2f(0.25f, 0.5f);
    GL11.glVertex3f(-player.x - offset, -player.y + offset, -player.z - offset);
    GL11.glTexCoord2f(0.0f, 0.5f);
    GL11.glVertex3f(-player.x + offset, -player.y + offset, -player.z - offset);
    GL11.glTexCoord2f(0.0f, 0.25f);
    GL11.glVertex3f(-player.x + offset, -player.y - offset, -player.z - offset);

    // Back Face
    ...
GL11.glEnd(); 
```

要获得更多优化，请考虑在渲染天空盒时禁用深度缓冲区。您也可以停止清除颜色位。

# visual-studio-2010 - WiX 源文件位于与项目文件不同的目录中

> ID：14362840
> 
> 赞同：0
> 
> 时间：2013-01-16T16:16:40.543
> 
> 标签：visual-studio-2010, wix, votive

我正在为 Visual Studio 2010 解决方案构建安装程序，并且我决定使用 WiX。我已将 WiX 设置项目添加到解决方案中，并尝试以与解决方案中的其余项目类似的方式对其进行配置。

这些项目的设置方式是它们的项目文件与源的其余部分位于单独的目录中：

```
Source
    Core
    UI
    Projects <- .vcproj files for the Core and UI projects are in this directory
    ... 
```

现在，WiX 安装程序的新项目名为 Setup，因此目录树现在如下所示：

```
Source
    Core
    UI
    Setup
    Projects <- .wixproj for Setup is here, and I want it's source files in the Setup directory
    ... 
```

问题是，每当我将源文件添加到 Setup 项目时，它都会将文件从它所在的位置复制到 .wixproj 文件旁边的 Projects 目录中。

我可以在项目上设置什么来防止这种行为并就地包含 WiX 源文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:41:11.863

[布莱恩的评论](https://stackoverflow.com/questions/14362840/wix-source-files-in-a-different-directory-from-the-project-file/14370424#comment19972958_14362840)基本上涵盖了它：

> 您还可以在 xml 编辑器中打开 .wixproj 并通过编辑 xml 添加文件（查看链接到项目的其他文件如何显示）。这似乎更复杂，但如果您要添加大量源文件，则可能会不那么乏味。

# templates - 首次导航到页面时出现“未找到标记”异常

> ID：14362841
> 
> 赞同：1
> 
> 时间：2013-01-16T16:16:43.343
> 
> 标签：templates, jsf, composite-component

我在我们的应用程序中遇到了以下问题：每次服务器重新启动或重新部署应用程序后，第一次尝试导航到一个特定页面将失败并出现异常：

```
javax.faces.view.facelets.TagException: /testing/target.xhtml @8,72 <ofc:testComp> Tag Library supports namespace: http://java.sun.com/jsf/composite/of-components, but no tag was defined for name: testComp 
```

我花了一段时间将其精简为最小版本。在这样做时，我想出了以下几点：

在以下情况下会出现问题：

*   服务器已重新启动或应用程序已重新部署
*   尝试通过`h:commandLink`
*   目标页面使用复合组件

问题在以下情况下消失：

*   以其他方式到达目标页面，例如`h:outputLink`通过 URL 或通过 URL
*   每次成功到达目标页面后

我排除了各种事情（我们在 Mojarra 2.1.7 上，目标页面没有嵌套组件，所以[嵌套命名空间声明](https://stackoverflow.com/q/10898906/840977)不是这个问题）并将其缩小到以下“罪魁祸首”：

源页面使用了一个模板，我将其简化如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html">
<h:head>
    <title>Testpage</title>        
</h:head>

<h:body>
    <h:form id="form">
        <ui:insert name="content"/>
        <ui:include src="some_other_content.xhtml" />
    </h:form>
</h:body>
</html> 
```

如果我删除`ui:include`一切正常。有人可以向我解释这里发生了什么吗？它似乎与在服务器重新启动后初始化我的组件库有关，但我不明白模板中的包含与它有什么关系。据我所知，这是在页面中包含一些固定内容的标准方式？如果这不是应该这样做的，请让我知道还有其他方法。

谢谢！

* * *

* * *

**为了完整性而保留的代码片段**（这里没有魔法）：

**source_page.xhtml**

```
<ui:composition template="/testing/test_template.xhtml">
    <ui:define name="content">
        <h:outputLink value="target.xhtml">Outputlink to target</h:outputLink> <br />
        <h:commandLink value="Commandlink to target" action="target.xhtml" />
    </ui:define>
</ui:composition> 
```

**目标.xhtml**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ofc="http://java.sun.com/jsf/composite/of-components"
      xmlns:h="http://java.sun.com/jsf/html">
    <h:head></h:head>
    <h:body>
        <ofc:testComp content="This is a component for testing purposes" />
    </h:body>
</html> 
```

**testComp.xhtml**

```
<html   xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:cc="http://java.sun.com/jsf/composite">

     <cc:interface>
         <cc:attribute name="content" required="true" />
     </cc:interface>

     <cc:implementation>
         <h:outputText value="#{cc.attrs.content}" />
     </cc:implementation>
 </html> 
```

最后，**some_other_content.xhtml**只是一个随机的 Hello-World-Page。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T18:13:03.610

花了很长时间，但我们终于设法升级了。我们现在正在运行 Mojarra 2.1.21。

我重新启用了包含并尝试尽可能地恢复原始设置。我没有收到任何错误。代码在其他地方也发生了变化，所以我不能绝对肯定地说这是它工作的唯一原因。然而，最初的问题是非常可重现的，一般设置与以前基本相同，所以我很确定其中一个跳过的 Mojarra 版本可以解决问题。

# json - Spring MVC验证表单中@Valid注解的一些疑惑

> ID：14362842
> 
> 赞同：0
> 
> 时间：2013-01-16T16:16:44.577
> 
> 标签：json, spring, validation, spring-mvc, bean-validation

我有以下情况，在我看来我有以下形式：

```
<form id="readJson" class="readJsonForm" action="<c:url value="/messageconverters/json" />" method="post">
    <input id="readJsonSubmit" type="submit" value="Read JSON" />   
</form> 
```

与此表单表单的提交事件相关（具有 class="readJsonForm）我有以下 Jquery 回调函数：

```
$("form.readJsonForm").submit(function() {          

    // Riferimento all'elemento che ha scatenato l'evento submit (il form) 
    var form = $(this);                  
    var button = form.children(":first");// Seleziona il bottone submit 

    // OPERATORE CONDIZIONALE: il form ha classe "invalid" ? 
    var data = form.hasClass("invalid") ?       
            "{ \"foo\": \"bar\" }" :            // SI: foo = bar 
            // NO: foo= bar ; fruit = apple 
            "{ \"foo\": \"bar\", \"fruit\": \"apple\" }";    

    /* AJAX CALL PARAMETER:
       type: Say to the servlet tath the request is a POST HTTP Request
       url: The address to which to send the call   
       data: the content of my data variable
       contentType: an object having JSON format
       dataType: the type of content returned by the server
    */
    $.ajax({ 
        type: "POST", 
        url: form.attr("action"), 
        data: data, contentType: "application/json", 
        dataType: "text", 

        success: function(text) {       // CASO DI SUCCESSO:
            /* Passa al metodo il testo ritornato dalla chiamata AJAX ed il 
               riferimento nel DOM al bottone accanto ala quale mostrare
               tale output */
            MvcUtil.showSuccessResponse(text, button);
        }, 

        error: function(xhr) {        // CASO DI ERRORE
            MvcUtil.showErrorResponse(xhr.responseText, button); 
        }
    });

    return false;
}); 
```

所以这个 Jquery 函数创建了一个新的 JSON 对象，它有两个属性（foo 和fruit），以这种方式进行评估：

**富=酒吧**

**水果 = 苹果**

HTTP 请求由我的控制器类的以下方法处理：

```
/* Metodo che gestisce HTTP Request di tipo POST dirette verso
 * l'URL: "/messageconverters/json"
 * @param L'oggetto JSON inserito all'interno del campo body dell'HTTP
 *        su cui viene eseguita una validazione
 *        
 */
@RequestMapping(value="/json", method=RequestMethod.POST)
public @ResponseBody String readJson(@Valid @RequestBody JavaBean bean) {
    return "Read from JSON: " + bean;
} 
```

此方法只需从 HTTP 请求的正文字段中获取 JSON 对象，并使用 Jaxb2RootElementHttpMessageConverter 将其传输到新的 JavaBean 对象中

在我的例子中，JavaBean 对象是一个只有两个属性的对象：**foo**、**fruit**和 getter、setter 和 toString() 方法，如下所示：

@XmlRootElement 公共类 JavaBean {

```
@NotNull
private String foo;

@NotNull
private String fruit;

public JavaBean() {
}

public JavaBean(String foo, String fruit) {
    this.foo = foo;
    this.fruit = fruit;
}
    // GETTER, SETTER & toString() methods 
```

好的，所以 JSON 对象中的值被放入具有相同名称的 JavaBean 对象变量中……这对我来说很清楚。

**我对@Valid**注释的规则有一些问题。

我的 JavaBean 参数使用**@Valid**注释进行注释，阅读文档我知道这不是 Spring 注释，但这与 Validation Framework JSR-303 Validation API 有关

我对这个 API 知之甚少，我记得 @Valid 触发了对象字段的验证

但我记得我的对象字段（我在 JavaBeans 对象中的变量）必须使用一些验证注释来进行注释，例如**@NotNull**或使用实现我的个人验证器的个人验证 Java 类。

在这种情况下，我对此一无所知，我的方法参数上只有**@Valid**注释......

在这种情况下具体做什么？

我唯一能想到的是检查我的 JSON 对象是否正确映射到 JavaBean 对象（如果具有相同的 valorized 属性），例如......如果 JSON 对象只有一个属性 valorized 会出错.. .

有人可以帮助我吗？

Tnx安德烈亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:06:17.960

首先：如果您发送 Json，则需要将 consumes="application/json" 添加到 @requestmapping 注释中，反之亦然，如果您想发送 json 响应体，则需要添加。

第二：@Valid 用于调用验证 api 来检查命令对象的所有约束 durig mappig。所以你需要在你的类路径中有一个实现，比如hibernate-validator。我不确定如果它在运行时不存在会发生什么。可能它只是被忽略了？

要在控制器中获取所有验证错误，请添加 BindingResult 类型的参数。此类包含所有验证错误。没有什么能阻止控制器处理您的对象。您负责在绑定结果上调用“hasError”并采取相应措施。

第三：由于您将 foo 和 bar 与 JavaBean 一起提到，看起来您正在使用展示应用程序。这个例子通常写得很好，解释得很好。尝试按原样部署应用程序并直接使用。我通过这个学习了大部分spring mvc。

# iphone - 从搜索栏中搜索表视图时，如何阻止 index.path.row 更改？

> ID：14362845
> 
> 赞同：0
> 
> 时间：2013-01-16T16:16:54.500
> 
> 标签：iphone, ios, searchbar

以下作品：我有一个表格视图，其中包含从数组中显示的项目。每个表格视图单元格中的按钮返回一个布尔值。

在搜索栏中，当我搜索单元格时，单元格的索引从原始表中的值更改，这会更改`indexPath.row`并且我的按钮`indexPath`在单击时使用不正确。

我的按钮中的相关代码：

```
(void)clickedButton:(UIButton*)sender {

NSLog(@"Row: %d", sender.tag);

NSIndexPath* indexPath = [NSIndexPath indexPathForRow:sender.tag inSection:0];
Stories *story = (Stories *)[self.fetchedResultsController objectAtIndexPath:indexPath];
BOOL isSaved = [story.isBookmarked boolValue];
story.isBookmarked = [NSNumber numberWithBool:!isSaved]; 
```

我的相关代码`cellForRowAtIndexPath`

```
if (tableView == self.searchDisplayController.searchResultsTableView){

     [cell.button setSelected:[story.isBookmarked boolValue]];
    cell.button.tag = indexPath.row;

    }

else
{

         [cell.button setSelected:[story.isBookmarked boolValue]];
    cell.button.tag = indexPath.row;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:59:53.517

`indexPath.row`可能会根据您的搜索结果而改变。尝试此代码以获取`indexPath`.

```
(void)clickedButton:(UIButton*)sender {
    UIButton *button = (UIButton *)sender;
    // Get the UITableViewCell which is the superview of the UITableViewCellContentView which is the superview of the UIButton
    UITableViewCell *cell = (UITableViewCell*)[[button superview] superview];

    NSIndexPath* indexPath = [subListTable indexPathForCell:cell];
} 
```

# linux - bash中的浮点/科学记数法值错误

> ID：14362846
> 
> 赞同：0
> 
> 时间：2013-01-16T16:16:57.030
> 
> 标签：linux, arrays, bash, floating-point

我对以下代码有疑问

```
THRESH_SERIE=("1" "5E-1" "1E-1" "5E-2" "1E-2" "5E-3" "1E-3" "5E-4" "1E-4") 

for ((i=0;i<${#THRESH_SERIE[@]};i++))
do

    let thresh=$(echo ${THRESH_SERIE[$i]})
    $EXEC 1 $N ${thresh} 0 0 >> $OUTPUT
done 
```

如果我尝试运行脚本，它将为数组中的每个值返回如下错误：

```
/bench_new.sh: line 40: let: thresh=5E: value too great for base (error token is "5E") 
```

我也尝试过使用浮点数（如“0.1”），但它给出了不同的错误。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:35:10.163

这里的数组没有特别的原因（除了玩起来很“有趣”）：

```
THRESH_SERIE="1 5E-1 1E-1 5E-2 1E-2 5E-3 1E-3 5E-4 1E-4" 

for thresh in ${THRESH_SERIE}
do
  $EXEC 1 $N ${thresh} 0 0 >> $OUTPUT
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:30:59.180

这很无聊的原因是 let 将它的所有参数都视为算术值。

bash[算术表达式](http://wiki.bash-hackers.org/syntax/arith_expr)由一组默认为十进制的规则定义。E 不是十进制数，因此是错误的。

正如@DiegoBasch 建议尝试删除 let 那样它不会被视为算术表达式。

# html - iOS固定位置css的问题

> ID：14362847
> 
> 赞同：1
> 
> 时间：2013-01-16T16:17:00.060
> 
> 标签：html, ios, css, cordova

> **可能重复：**
> [iOS 5 固定定位和虚拟键盘](https://stackoverflow.com/questions/7970389/ios-5-fixed-positioning-and-virtual-keyboard)

有没有人遇到过这个？仅当键盘在屏幕上时才会发生，一旦键盘再次隐藏，它就会恢复正常。

CSS

```
div#menu {
    position: fixed;
    bottom: 0;
    width: 100%;
    z-index: 10;
} 
```

的HTML

```
<div id="menu">
    <ul>
        <li id="menu-account" class="active"><a href="#">Account</a></li>
        <li id="menu-readmeter"><a href="#">Read Meter</a></li>
        <li id="menu-info"><a href="#">Info</a></li>
        <li id="menu-logout"><a href="#">Logout</a></li>
        <br class="clear">
    </ul>
</div> 
```

![应用程序](../Images/1870c09bc7d263b294adde3448d19b55.png)

# wordpress - 类别及其子类别下的帖子树。自定义帖子类型中的函数“in_category”对我不起作用

> ID：14362849
> 
> 赞同：0
> 
> 时间：2013-01-16T16:17:04.483
> 
> 标签：wordpress, custom-post-type, custom-wordpress-pages

我的代码在工作中不是最优的 - 它没有正确显示父类别帖子。他不是只显示父类别的帖子，而是抛出属于父类别的所有子类别的所有帖子。我对函数“in_category”有疑问 - 自定义帖子类型是否有任何替换？代码如下：

```
<?php

$categories = get_terms('MY_CUSTOM_TAXONOMY',array('parent' => 0 , 'hide_empty'=> '0' ));

foreach ( $categories as $category ) {

if ( $category->parent > 0 ) {
continue;   
}

$i = 0;
echo '<h1 style="font-weight:bold">' . $category->name . '</h1>';

$posts = get_posts( array( 'MY_CUSTOM_TAXONOMY' => $category->name, 'post_type' => 'CUSTOM_POST_TYPE' ) );  
echo '<ul>';
foreach ( $posts as $post ) {

$child_categories = get_term_children( $category->term_id, 'MY_CUSTOM_TAXONOMY' );

if ( $child_categories && in_category( $child_categories, $post->ID ) ) {
continue;
}
            setup_postdata($post);  

         echo '<li>'; the_title();   echo '</li>';   
}
echo '</ul>';

$categories2 = get_terms('MY_CUSTOM_TAXONOMY',array('parent' => $category->term_id , 'hide_empty'=> '0' ));

foreach ( $categories2 as $category ) {

$j = 0;
echo '<h2>' . $category->name . '</h2>';

$posts = get_posts( array( 'MY_CUSTOM_TAXONOMY' => $category->name, 'post_type' => 'CUSTOM_POST_TYPE' ) );  

        echo '<ul>';
        foreach($posts as $post) :  
            setup_postdata($post);  

         echo '<li>'; the_title();   echo '</li>';

        endforeach;
        echo '</ul>';

}
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:37:18.460

这是我的工作解决方案：

```
<?php

$args=array(
'post_type'                => 'biblioteka',
'child_of'                 => 0,
'parent'                   => '',
'orderby'                  => 'name',
'order'                    => 'ASC',
'hide_empty'               => 1,
'hierarchical'             => 1,
'exclude'                  => '',
'include'                  => '',
'number'                   => '',
'taxonomy'                 => 'kategoria-pozycji',
'pad_counts'               => false
);

$categories=get_categories($args);

foreach ( $categories as $category ) {

if ( $category->parent > 0 ) {
continue;   
}

echo '<h1 style="font-weight:bold">' . $category->name . '</h1>';

$querystr = "SELECT $wpdb->posts.*
              FROM $wpdb->posts, $wpdb->term_relationships, $wpdb->terms
              WHERE term_id = (" . $category->cat_ID . ")
              AND term_taxonomy_id = (" . $category->term_taxonomy_id . ")
              AND ID = object_id
              AND post_type = 'biblioteka'
              AND post_status = 'publish'
              ORDER BY post_date DESC";
$posts = $wpdb->get_results($querystr, OBJECT);

echo '<ul>';
    foreach ( $posts as $post ) {
        setup_postdata($post);  

            echo '<li>'; the_title();   echo '</li>';

            }
echo '</ul>';

$categories2 = get_terms('kategoria-pozycji',array('parent' => $category->term_id , 'hide_empty'=> '0' ));

foreach ( $categories2 as $category ) {

echo '<h2>' . $category->name . '</h2>';

$posts = get_posts( array( 'kategoria-pozycji' => $category->name, 'post_type' => 'biblioteka' ) );  

echo '<ul>';
    foreach($posts as $post) { 
        setup_postdata($post);  

            echo '<li>'; the_title();   echo '</li>';

            }
echo '</ul>';

}
}

?> 
```

# javascript - Retrieving Position X,Y for Three Images

> ID：14362851
> 
> 赞同：0
> 
> 时间：2013-01-16T16:17:14.613
> 
> 标签：javascript, jquery

Apologies but I haven't found what I needed from other threads OR I just couldn't use what they had.

afternoon was hoping to get an answer to an annoying problem I'm having I need these values to work from; as in dynamically. So, I can have a variable with the X position constantly updated and also have the original stored earlier.

[http://postimage.org/image/q8h41o7f9/full/](http://postimage.org/image/q8h41o7f9/full/)

*   the offset values of an image, but I need them for 3 images

I get this error [http://postimage.org/image/5drn1ubo7/](http://postimage.org/image/5drn1ubo7/)

no point in saying I'm a newb, but go easy and explain as if you would a child.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:35:58.330

Judging by the error you have received, it looks like you're using `offsetTop()` (i.e. as a function), rather than `offsetTop` (as a property of the element object)...

You should try:

```
topPos = element.offsetTop; 
```

See here for more information > [https://developer.mozilla.org/en-US/docs/DOM/element.offsetTop](https://developer.mozilla.org/en-US/docs/DOM/element.offsetTop)

# php - PHP - 更新多维数组

> ID：14362854
> 
> 赞同：-1
> 
> 时间：2013-01-16T16:17:22.113
> 
> 标签：php, arrays

在 PHP 中使用 foreach 循环我想将 id 添加到以下对象...

$array_before

```
Array
(
    [1111] => Array
        (
            [Name] => Name A
            [Subcats] => Array
                (
                    [11111] => Array
                        (
                            [Name] => Name A.1
                        )
                    [11112] => Array
                        (
                            [Name] => Name A.2
                        )
                )
        )
    [2222] => Array
        (
            [Name] => Name B
            [Subcats] => Array
                (
                    [22221] => Array
                        (
                            [Name] => Name B.1
                        )
                    [22222] => Array
                        (
                            [Name] => Name B.2
                        )
                )
        )
) 
```

...所以它看起来类似于以下内容：

$array_after

```
Array
(
    [1111] => Array
        (
            [Id] => 1
            [Name] => Name A
            [Subcats] => Array
                (
                    [11111] => Array
                        (
                            [Id] => 1
                            [Name] => Name A.1
                        )
                    [11112] => Array
                        (
                            [Id] => 2                       
                            [Name] => Name A.2
                        )
                    [11113] => Array
                        (
                            [Id] => 3                       
                            [Name] => Name A.2
                        )                       
                )
        )
    [2222] => Array
        (
                    [Id] => 2
                    [Name] => Name B
            [Subcats] => Array
                (
                    [22221] => Array
                        (
                            [Id] => 1                       
                            [Name] => Name B.1
                        )
                    [22222] => Array
                        (
                            [Id] => 2                       
                            [Name] => Name B.2
                        )
                )
        )
) 
```

有人能指出我正确的方向吗？

谢谢， LG

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T16:19:03.503

试试这个：

```
$id = 0;
array_walk($array,function(&$a) use (&$id) {$a['id'] = ++$id;}); 
```

这将修改原始数组以添加 ID，而不是创建一个新数组。

# javascript - 访问在 iframe src 中定义的全局 javascript 对象

> ID：14362856
> 
> 赞同：0
> 
> 时间：2013-01-16T16:17:25.253
> 
> 标签：javascript, iframe

我在同一站点上将 iframe 设置为 src。在 iframe 页面内，我有一个名为 Rack 的命名空间，其中包含一个名为 app...

```
Rack.app = function() {...}(); 
```

我可以从我的外部页面（包含 iframe 的页面）访问该 Rack.app 对象吗？我想做类似的事情

```
var iframe = document.getElementById('rackFrame');
iframe.contentWindow.Rack.app.doSomething(); 
```

但这不起作用，我没有看到 Rack 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:45:52.893

您可以通过在调用命名空间的命名空间之外调用 iframe 中的函数来破解它吗？

> var iframe = document.getElementById('rackFrame');
> iframe.contentWindow.rackTrigger();

然后在iframe中有一个功能：

> 功能 rackTrigger() {
> Rack.app.doSomething();
> }

如果您要触发一个函数，这不是最优雅的解决方案，但如果您想在 iframe 上进行许多更改，则更简洁。

# regex - 正则表达式和 Ant

> ID：14362859
> 
> 赞同：2
> 
> 时间：2013-01-16T16:17:41.777
> 
> 标签：regex, ant

有没有人使用过蚂蚁属性和正则表达式？如果是这样，您是否知道应如何更正此字符串以使其正常工作？

```
<replaceregexp 
file="../cms-distribution/src/main/properties/editorial/common/csdtflags.properties" 
flags="s" 
match="${typeSplitFirstPart}:([a-zA-Z,0-9-]+)([;])?"
replace="${typeSplitFirstPart}:\1,${uid}\2"
byline="true"/>

Error : java.util.regex.PatternSyntaxException: Illegal repetition near index 0

${typeSplitFirstPart}:([a-zA-Z,0-9-]+)([;])? 
```

TypeSplitFirstPart 是一个 ant 属性，因此需要以这种方式引用它 - ${typeSplitFirstPart} 以获取值。需要用反斜杠转义 $,{,} 等特殊字符，但是这样就得不到属性的值。转义 $ 只会检索 typeSplitFirstPart 的值，但它会引发此错误 -

```
java.util.regex.PatternSyntaxException: Illegal/unsupported escape sequence near index 1

\Template:([a-zA-Z,0-9-]+)([;])? 
```

注意 - 此处`${typeSplitFirstPart}`已正确读取，并且已写入其值“模板”。

谢谢你，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:21:53.647

看起来列表中的最后一个破折号需要转义：

```
([a-zA-Z0-9\-]+) 
```

# html - 如何从我的网站的图像创建导航菜单？

> ID：14362860
> 
> 赞同：0
> 
> 时间：2013-01-16T16:17:57.000
> 
> 标签：html, css, web

我想使用 Photoshop 中的图像创建导航栏。我尝试将图像用作 .png，但我的页面中没有任何内容。即，页面是空白的。这是页面的css和导航栏的图像。请有人帮助我。

```
*{ margin:0; padding:0; } 

ul#awesome-menu {
    width: 517px; margin: 250px auto;
    list-style: none;
}

ul#awesome-menu li a {
    display: block; float: left; height: 56px;
    background-image: url(![enter image description here][1]/web/Project/butt.png) no-repeat; text-indent: -9999px;
}

ul#awesome-menu li a.ninja {
    width; 96px; background-position: 0 0;
}

ul#awesome-menu li a.zombie {
    width; 108px; background-position: -96px 0;
}

ul#awesome-menu li a.robot {
    width; 97px; background-position: -204px 0;
}

ul#awesome-menu li a.assassin {
    width; 121px; background-position: -301px 0;
}

ul#awesome-menu li a.jedi {
    width; 94px; background-position: -422px 0;
}

ul#awesome-menu li a.ninja:hover {
    background-position: 0 -56px;
}

ul#awesome-menu li a.zombie:hover {
    background-position: -96px -56px;
}

ul#awesome-menu li a.robot:hover {
    background-position: -204px -56px;
}

ul#awesome-menu li a.assassin:hover {
    background-position: -301px -56px;
}

ul#awesome-menu li a.jedi:hover,ul#awesome-menu li a.jedi: focus {
    background-position: -422px -56;
}
ul#awesome-menu li a.jedi:hover {
    background-position: -422px -56px;
}

a { outline:none;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:32:41.097

`background-image`您拥有的选择`ul#awesome-menu li a`器格式为[Markdown](http://en.wikipedia.org/wiki/Markdown)。您需要在 CSS 中正确格式化它才能使其正常工作。

```
background-image: url('../web/Project/butt.png') no-repeat; 
```

# javascript - ReferenceError：未使用 activeX 定义

> ID：14362861
> 
> 赞同：1
> 
> 时间：2013-01-16T16:17:58.290
> 
> 标签：javascript, xml, activexobject

出现此错误是什么意思：

```
ReferenceError: ActiveXObject is not defined
var fso = new ActiveXObject("Scripting.FileSystemObject"); 
```

这是我的代码：

```
 var fso = new ActiveXObject("Scripting.FileSystemObject");
    varFileObject = fso.OpenTextFile("C:\\LogFile.txt", 8, true,0); // 8=append, true=create if not exist, 0 = ASCII
    newObject.write(XML.innerHTML);
    newFileObject.close(); 
```

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:21:48.967

问题是浏览器的安全设置阻止了它。

如果您尝试 IE6，代码应该可以工作。您必须使用死浏览器，因为新浏览器阻止它作为 Microsoft 为解决安全问题而进行的 killbit 修复的一部分工作。

# wxpython - 如何禁用从用户拖动 wx.DIalog

> ID：14362863
> 
> 赞同：2
> 
> 时间：2013-01-16T16:18:16.423
> 
> 标签：wxpython, wxwidgets

我想禁用拖动 wx.Dialog。我注意到当我删除标题时，用户无法拖动对话框，但我想保留标题。任何的意见都将会有帮助？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:56:32.330

唯一的方法是删除您已经找到的标题。您可能可以使用 wx.Timer 或捕获某种拖动事件并将对话框居中，但除此之外，删除标题是要走的路。

# wpf - 将外部 SDK 二进制文件共享到 WPF 和 Silverlight

> ID：14362864
> 
> 赞同：0
> 
> 时间：2013-01-16T16:18:19.040
> 
> 标签：wpf, silverlight, sdk, compatibility

我一直在努力解决这个问题一段时间了..

我有一些 .NET 库作为外部应用程序的 SDK 工作。我需要从 WPF 类库和 Silverlight 类库中使用该 SDK。我一直在阅读很多解决方案，包括：

*   可移植类库 - 当我尝试将 SDK 库添加到项目时，它抱怨这些库引用 .NET 2.0 库并且不兼容。
*   WCF RIA - 我可能做错了，但无论我走到哪里，过程的一个步骤是使用 EF 创建一个实体。现在，我不想访问数据库，只想访问那些库。

但到目前为止，没有运气。你有什么想分享的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:29:18.350

据我所知，如果旧的 .NET 2.0 二进制文件有对 COM 或系统库的引用，它可能不起作用。这可能与您的数据库实现有关。我在以前的工作中的一个项目中遇到过这个问题。我们通过创建 WCF 服务作为中间解决方案解决了这个问题。那是 WCF 而不是 WCF RIA。

如果 .NET 2.0 代码真的很旧，您应该检查它是否必须编译为 x86 并在 IIS 中托管 WCF 服务的站点的 AppPool 上托管为 32 位应用程序。

但这是一项棘手的工作，这完全取决于旧 .NET 2.0 库文件及其引用的复杂性。

# android - maven android pom.xml

> ID：14362865
> 
> 赞同：1
> 
> 时间：2013-01-16T16:18:21.717
> 
> 标签：android, maven

我已经建立了我的内部关系存储库。现在我已经更改了我的 settings.xml 文件以指向我的存储库，但我也想在我的项目 pom.xml 文件中包含引用。现在这个 pom.xml 文件有效吗？如果我更改了 repo 的密码，maven 仍然从 repo 下载文件吗？我究竟做错了什么 ？这个配置正确吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.mycomp</groupId>
    <artifactId>TestAndroid</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>apk</packaging>
    <name>Test Android Application</name>
    <servers>
        <server>
            <id>com-repo</id>
            <username>admin</username>
            <password>admin</password>
        </server>
    </servers>
    <repositories>
        <repository>
            <id>com-repo</id>
            <url>http://central</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
                <updatePolicy>always</updatePolicy>
            </snapshots>
        </repository>
    </repositories>
    <pluginRepositories>
        <pluginRepository>
            <id>com-repo</id>
            <name>com-repo</name>
            <url>http://10.10.10.230:8081/nexus/content/groups/public/</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </pluginRepository>
    </pluginRepositories>
    <dependencies>
        <dependency>
            <groupId>org.springframework.android</groupId>
            <artifactId>spring-android-rest-template</artifactId>
            <version>1.0.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.8</version>
        </dependency>
        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>20030203.000129</version>
        </dependency>
        <dependency>
            <groupId>com.actionbarsherlock</groupId>
            <artifactId>actionbarsherlock</artifactId>
            <version>4.2.0</version>
            <type>apklib</type>
        </dependency>

        <dependency>
            <groupId>org.google</groupId>
            <artifactId>admob</artifactId>
            <version>1.0.0</version>
        </dependency>
        <dependency>
            <groupId>org.mycpmp</groupId>
            <artifactId>1234</artifactId>
            <version>1.0.0</version>
        </dependency>
        <dependency>
            <groupId>com.test</groupId>
            <artifactId>test</artifactId>
            <version>1.0.0</version>
        </dependency>

        <dependency>
            <groupId>org.taptwo.android</groupId>
            <artifactId>widget</artifactId>
            <version>1.0.0</version>
            <type>apklib</type>
        </dependency>
        <dependency>
            <groupId>commons-validator</groupId>
            <artifactId>commons-validator</artifactId>
            <version>1.4.0</version>
        </dependency>

        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>4.1.1.4</version>
            <scope>provided</scope>
        </dependency>
        <!-- <dependency> -->
        <!-- <groupId>com.google.api-ads</groupId> -->
        <!-- <artifactId>dfp-lib</artifactId> -->
        <!-- <version>0.4.0</version> -->
        <!-- </dependency> -->

    </dependencies>
    <build>
        <finalName>${project.artifactId}</finalName>
        <sourceDirectory>src/main/java</sourceDirectory>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <version>3.1.1</version>
                    <extensions>true</extensions>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <configuration>
                    <attachSources>true</attachSources>
                    <sign>
                        <debug>false</debug>
                    </sign>
                    <sdk>
                        <platform>16</platform>
                    </sdk>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jarsigner-plugin</artifactId>
                <version>1.2</version>
                <executions>
                    <execution>
                        <id>signing</id>
                        <goals>
                            <goal>sign</goal>
                        </goals>
                        <phase>package</phase>
                        <inherited>true</inherited>
                        <configuration>
                            <archiveDirectory></archiveDirectory>
                            <includes>
                                <include>target/*.apk</include>
                            </includes>
                            <keystore>avm.keystore</keystore>
                            <storepass>123</storepass>
                            <keypass>123</keypass>
                            <alias>asdfg</alias>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:45:42.390

你的 pom 无效。[如此处](http://maven.apache.org/settings.html)所述，您不应将用户名和密码放在 pom.xml 中。

> 用于下载和部署的存储库由 POM 的存储库和 distributionManagement 元素定义。但是，某些设置（例如用户名和密码）不应与 pom.xml 一起分发。此类信息应存在于构建服务器的 settings.xml 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:48:07.587

凭据仅用于部署到存储库。用于部署的存储库在[distributionManagement](http://maven.apache.org/pom.html#Distribution_Management)元素中定义；它与存储库元素的东西不同。repositories 元素定义了从其中解析依赖项的 repos。

此外，pom 不支持像这样放入凭据。执行时是否出现错误？我会这么认为。

# ios - 在纹理中转换 UIImage

> ID：14362868
> 
> 赞同：7
> 
> 时间：2013-01-16T16:18:22.643
> 
> 标签：ios, objective-c, opengl-es, textures

在我的 opengl 项目中，我需要将 UIImage 转换为纹理；有什么办法呢？你能帮助我吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T16:44:50.250

我没有测试以下内容，但我将分 3 个步骤分解转换：

1.  为您的图像提取信息：

    ```
    UIImage* image = [UIImage imageNamed:@"imageToApplyAsATexture.png"];
    CGImageRef imageRef = [image CGImage];
    int width = CGImageGetWidth(imageRef);
    int height = CGImageGetHeight(imageRef); 
    ```

2.  分配`textureData`具有上述属性的 a：

    ```
    GLubyte* textureData = (GLubyte *)malloc(width * height * 4); // if 4 components per pixel (RGBA)

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    NSUInteger bytesPerPixel = 4;
    NSUInteger bytesPerRow = bytesPerPixel * width;
    NSUInteger bitsPerComponent = 8;  
    CGContextRef context = CGBitmapContextCreate(textureData, width, height,
                                                 bitsPerComponent, bytesPerRow, colorSpace,
                                                 kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

    CGColorSpaceRelease(colorSpace);

    CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);
    CGContextRelease(context); 
    ```

3.  设置你的纹理：

    ```
    GLuint textureID;    
    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
    glGenTextures(1, &textureID);

    glBindTexture(GL_TEXTURE_2D, textureID);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, textureData); 
    ```

**编辑：**

阅读[此书](http://blog.csdn.net/opengl_es/article/details/25240061)；从一张图像到纹理的转换以及在 iOS 环境中应用纹理，一切都得到了解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-16T07:34:08.720

这是从 UIImage 中获取纹理的快速版本

```
func setupTexture(sourceImage: UIImage) -> GLuint {

guard let textureImage = sourceImage.cgImage else {
    print("Failed to load image")
    return 0
}

let width = textureImage.width
let height = textureImage.height

/*
 it will write one byte each for red, green, blue, and alpha – so 4 bytes in total.
 */

let textureData = calloc(width * height * 4, MemoryLayout<GLubyte>.size) //4 components per pixel (RGBA)
let spriteContext = CGContext(data: textureData,
                              width: width,
                              height: height,
                              bitsPerComponent: 8,
                              bytesPerRow: width * 4,
                              space: textureImage.colorSpace!,
                              bitmapInfo: CGImageAlphaInfo.premultipliedLast.rawValue)

spriteContext?.draw(textureImage, in: CGRect(x: 0, y: 0, width: width, height: height))

var textName = GLuint()
glGenTextures(1, &textName)
glBindTexture(GLenum(GL_TEXTURE_2D), textName)
glTexParameteri(GLenum(GL_TEXTURE_2D), GLenum(GL_TEXTURE_MIN_FILTER), GL_NEAREST)
glTexImage2D(GLenum(GL_TEXTURE_2D), 0, GL_RGBA, GLsizei(width),
             GLsizei(height), 0, GLenum(GL_RGBA), GLenum(GL_UNSIGNED_BYTE), textureData)

return textName 
```

}

**注意：需要记住，Core Graphics 在加载图像时会翻转图像。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-13T18:30:51.347

使用 GLKit 框架的另一种方法：

```
//Path to image
NSString *path = [[NSBundle mainBundle] pathForResource:@"textureImage" ofType:@"png"];

//Set eaglContext
[EAGLContext setCurrentContext:[[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2]];

//Create texture
NSError *theError;    
GLKTextureInfo *texture = [GLKTextureLoader textureWithContentsOfFile:filePath options:nil error:&theError];
glBindTexture(texture.target, texture.name); 
```

`texture.name`是纹理的 OpenGL 上下文名称。

# c - 如何在特定字符串之后打印一个值

> ID：14362869
> 
> 赞同：0
> 
> 时间：2013-01-16T16:18:23.377
> 
> 标签：c, string

我正在尝试读取文件，找到字符串“myprop”，在“myprop”之后将是一个“=”符号，然后是一个数字。我需要将那个数字打印为字符串，去掉空格和注释。我能够找到“myprop”字符串，然后我相信我应该使用 fscanf，但我遇到了麻烦。

```
const char *get_filename_property()
{
    const char *filename  = "myfile.properties";
    const char *propkey = "myprop";
    char buffer[100], *buffPtr, lastChar, value[50];
    int line_num=1, i=0;

    FILE *fp;
    fp=fopen("myfile.properties", "r");
    if (fp == NULL)
        perror("Error opening file\n\n");

    while(fgets(buffer, 100, fp) != NULL)
    {
        if((strstr(buffer, propkey)) != NULL)
        {
            printf("Myprop found on line: %d\n", line_num);
            printf("\n%s\n", buffer);
        }
        line_num++;
    }
    if (fp)
        fclose(fp);
}  

int main(int argc, char *argv[])
{
    get_filename_property();
    system("pause");
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:25:00.340

您可以`sscanf`在文件中找到`mypop`字符串时添加。在您的 while 循环中添加以下行：

```
sscanf(buf,"%*[^=]= %[^\n]",value); 
```

`"%*[^=]"`：这意味着 scanf 将所有字符捕获在 the 之前`=`并忽略它

`" %[^\n]"`：这意味着您将`=`在缓冲区字符串的结尾（甚至是空格字符）之后加上所有字符。只有值字符串开头的空格字符不会被加盖

以这种方式添加

```
while(fgets(buffer, 100, fp) != NULL)
 {
  if((strstr(buffer, propkey)) != NULL)
  {
   printf("Myprop found on line: %d\n", line_num);
   printf("\n%s\n", buffer);
   sscanf(buf,"%*[^=]= %[^\n]",value);
   printf("\nvalue is %s\n", value);
   break;
  }
  line_num++;
 } 
```

# objective-c - 使用@class-@interface 对时对编译器有什么帮助？

> ID：14362870
> 
> 赞同：0
> 
> 时间：2013-01-16T16:18:29.490
> 
> 标签：objective-c, gnustep

```
@class  GSValue;
@interface GSValue : NSObject   // Help the compiler
@end
@class  GSNonretainedObjectValue;
@interface GSNonretainedObjectValue : NSObject  // Help the compiler
@end 
```

以上代码来自 NSValue.m 。我谷歌并给了我一些信息，它表明@class（不伴随@interface）用于两个类之间的类前向声明​​，但仅声明为类的指针。我的问题是为什么“@class GSValue;” 紧随其后的是“@interface GSValue:NSObject”，这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:42:30.857

我不太确定，但我认为在这种情况下它是前向声明 + 声明，它`GSValue`和其他类是`NSObject`. 因此，编译器在您编写`[GSValue class]`. 它实际上不是“帮助”，只是为了摆脱警告。

不过，如果是这种情况，那么我不知道他们为什么使用前向声明 with ，因为没有指令`@interface`它的工作原理是一样的。`@class`

我是这么看的。

他们首先使用前向声明。然后他们注意到编译器给出了警告`Receiver 'GSValue' is a forward class and corresponding @interface may not exist`，所以他们添加了`@interface`部分，但是忘记了或者懒得删除以前的`@class`指令。

# c++ - 为什么当我尝试“制作”mysql-connector-c++-1.1.1 时会出现错误？

> ID：14362874
> 
> 赞同：2
> 
> 时间：2013-01-16T16:18:44.810
> 
> 标签：c++, mysql, connector

我正在运行 Mountain Lion，我下载了 mysql-connector-c++-1.1.1.tar.gz。Boost和mysql已安装。这些是我遵循的步骤： 1 'CMake . -DBOOST_ROOT:STRING=/usr/local/boost_1_52_0' 没关系 2 'make clear' 没关系 3 'make' 当它到达 35% 时停止说：

`[35%] 构建 CXX 对象示例/CMakeFiles/connect.dir/connect.cpp.o 链接 CXX 可执行文件连接 ld：警告：ld：警告：忽略文件 ../driver/libmysqlcppconn-static.a，文件是为不是被链接架构的存档（x86_64）：../driver/libmysqlcppconn-static.aignoring 文件 CMakeFiles/connect.dir/connect.cpp.o，文件是为 i386 构建的，它不是被链接的架构（x86_64） : CMakeFiles/connect.dir/connect.cpp.o

ld：警告：忽略文件/usr/local/mysql/lib/libmysqlclient_r.dylib，文件是为不受支持的文件格式构建的（0xce 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 0 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ）不是被链接的架构（x86_64）：/usr/local/mysql/lib/libmysqlclient_r.dylib 架构x86_64的未定义符号：“_main”，引用自：-u命令行选项ld：符号(s) not found for architecture x86_64 clang: error: linker command failed with exit code 1 (use -v to see invocation) make[2]: *** [examples/connect] Error 1 make[1]:****[examples/CMakeFiles/connect.dir/all] 错误 2 make: ** * [all] 错误 2`*

 *我需要做什么？*

# c - clCreateImage2D - 加载 RGB 图像

> ID：14362876
> 
> 赞同：0
> 
> 时间：2013-01-16T16:18:48.020
> 
> 标签：c, opencv, opencl

我正在尝试将 OpenCV 图像 ( `IplImage`) 加载到 GPU 中`clCreateImage2D`。

使用的原因`IplImage`是，我想加载任何类型的图像。（jpg，bmp，png）。

我可以使用 mem_flags 加载图像`clCreateImage2D`，`CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR`然后`CL_RGB`输入`CL_UNORM_SHORT_565`。但是在核函数中`read_imagef`函数是不接受`CL_UNORM_SHORT_565`类型的。

那么，如何将 RGB 图像发送到 OpenCL 内核函数？

**编辑：**我将输入图像转换为 32 位。`image_channel_order`但是现在and会是什么`image_channel_data_type`？订单不能是 RGBA，因为它没有 Alpha 通道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:32:18.560

OpenCL 不支持 24 位 RGB。所以你必须先将其转换为 32 位 RGB，然后将其传递给 OpenCL 内核

# php - 如何确定在我的 PHP 表单中单击了哪个动态生成的提交按钮？

> ID：14362877
> 
> 赞同：2
> 
> 时间：2013-01-16T16:18:51.093
> 
> 标签：php, mysql, while-loop, submit-button

我想编辑一个动态生成的表单（意思是：我不知道会生成多少行）。此内容是在`while`循环中生成的，并且生成的 HTML 会创建 的按钮`input-type=submit`，生成与循环中的迭代一样多的同名按钮。

在生成的按钮中，我想知道单击了哪个提交按钮，以便为用户提供单击它的相同表单。忽略连接数据库的名称和密码；连接性很好。

随意提出任何新方法来实现所需的功能。

代码如下：

```
 echo "you have reached your travel details page. your recent travelling details are as follows".'</br>';
$dbc=mysqli_connect('localhost','xyz','xyz','abc') or die("connection to DB failed");
$query="SELECT * FROM travel_details WHERE emailid='{$_SESSION['username']}' ORDER BY dep_date DESC";
$result=mysqli_query($dbc,$query) or die("error in querying the DB");
?>
<h1>Your travel details are:-</h1>
<form name="showtraveldet" METHOD="POST" action="edittraveldet.php">
    <table border="1">
    <tr>
    <th>Starting point</th><th>Ending point</th><th>No of passengers</th><th>Expected fare</th><th>Departure date</th>
    <th>Departure time</th><th>Arrival Date</th><th>Arrival Time</th><th>Car Model</th><th>Car number</th>
    <th>Who is driving</th><th>Driver's license number</th>
    </tr>
<?php
while ($row=mysqli_fetch_array($result)) 
{
    $tid=$row['travel_id'];
    echo "the value of tid is '{$tid}'";
    echo'<tr><td>'.$row['start_point'].'</td><td>'.$row['end_point'].'</td><td>'.$row['no_of_pass'].'</td><td>'.
    $row['exp_fare'].'</td><td>'.$row['dep_date'].'</td><td>'.$row['dep_time'].'</td><td>'.$row['arr_date'].'</td><td>'.$row['arr_time'].'
    </td><td>'.$row['car_model'].'</td><td>'.$row['car_no'].'</td><td>'.$row['who_is_driving'].'</td><td>'.$row['driver_license_no'].'</td>
    <td><input type="submit" name="edit" value="Edit"></td></tr><input type="hidden" name="travelid" value="'.$row['travel_id'].' ;?>">';

} 
```

编辑traveldet.php：-

```
 $travelid=$_POST['travelid'];
echo "the travel id in the variable is $travelid and got the value from '{$_POST['travelid']}'";
$dbc=mysqli_connect('localhost','xyz','xyz','abc') or die("connection to DB failed");
$query="SELECT * FROM travel_details WHERE travel_id='{$travelid}'";
$result=mysqli_query($dbc,$query) or die("error in querying the DB");
mysqli_close($dbc);
$row=mysqli_fetch_array($result);
?>

<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>" onsubmit="return validatewheregoing()" name="wheregoing">
        <h1> Enter your travelling details so that other travellers can join you</h1>
        <fieldset>
            <legend> Travelling details </legend>
            Start Point: <input type="text" name="start" value="<?php echo $row['start_point']; ?>"/><br />
            End point: <input type="text" name="end" value="<?php echo $row['end_point']; ?>"/><br />
            Passengers allowed: <input type="number" name="noofpass" value="<?php echo $row['no_of_pass']; ?>"/><br />
            Expected Fare per passengers in rupees:<input type="number" name="fare" value="<?php echo $row['exp_fare']; ?>"/><br />
            Departure Date:<input type="date" name="depdate" value="<?php echo $row['dep_date']; ?>"/><br/>
            Departure time:<input type="time" name="deptime" value="<?php echo $row['dep_time'] ;?>"/><br/>
            Arrival Date:<input type="date" name="arrdate" value="<?php echo $row['arr_date']; ?>"/><br/>
            Arrival time at destination:<input type="time" name="arrtime" value="<?php echo $row['arr_time']; ?>"/><br/>
            Car Model and name:<input type="text" name="cardet" value="<?php echo $row['car_det']; ?>"/><br/> <!--make this as a dropdown box for better database matching-->
            Car Number:<input type="text" name="carno" /><br/><input type="checkbox" name="taxi" value="check this box if pooling a taxi">
            Is the car self driven or driven by driver?<input type="radio" name="drivedet" value="Selfdriven" checked=""/>Self Driven<input type="radio" name="drivedet" value="driverdriven" />Driver driven<br />
            Driver's License number<input type="text" name="licence_no"/></br>
            <input type="checkbox" name="taxi" value="check this box if pooling a taxi"></br>
            <input type="hidden" name="travelid" value="<?php echo $travelid ;?>" />
            <input type="submit" value="invite travellers" name="editwheregoing"/>
        </fieldset>
     </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:28:48.050

如果只有您可以更改代码，我建议您将表单标签本身放在 while 循环中，每个标签都有相同的操作指向相同的 url，但向目标页面提交不同的信息。这样您就不必担心单击的按钮

```
while($row=mysqli_fetch_array($result))
{
    //<form action="sameactionurl.php" name="form_1">
       //<input type="hidden" name="travelid" value="$row['travelid']" />
    //</form>
} 
```

另一种解决方案，如果您不想更改代码，则在提交表单之前使用 JavaScript 将公共隐藏字段设置为当前 ID 的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:25:19.067

以标准方式命名您的提交按钮，并在末尾附加一个 3 位数字，“button_XXXX_###”，其中 ### 是数字，XXX 是按钮的原始名称。

提交后，检查所有以“button_XXXX”开头的变量的请求参数，并将实际名称“button_XXXX_####”用'_'字符分开，“###”后缀将显示按钮的编号按下。

不过，为每一行创建一个表单可能会更容易。

# mysql - Qt MySQL无法加载插件驱动（QLibrary，QPluginLoader成功加载，QSqlDatabase::drivers()返回空！）

> ID：14362881
> 
> 赞同：1
> 
> 时间：2013-01-16T16:18:57.577
> 
> 标签：mysql, qt, plugins, driver, qtsql

我已经成功编译了 MySQL 驱动程序，但我无法强制 Qt 加载它们。

一开始应该说什么 Iv 得到了 ODBC 和 SQLite 驱动程序包（在安装 Qt 之后），它们也没有被检测到。

在 *C:\Qt\4.8.0\plugins\sqldrivers* 我得到：

> qsqlite4.dll
> 
> qsqlite4.lib
> 
> qsqlited4.dll
> 
> qsqlited4.lib
> 
> qsqlmysql4.dll
> 
> qsqlmysql4.lib
> 
> qsqlmysqld4.dll
> 
> qsqlmysqld4.lib
> 
> qsqlodbc4.dll
> 
> qsqlodbc4.lib
> 
> qsqlodbcd4.dll
> 
> qsqlodbcd4.lib
> 
> qsqlpsql4.dll
> 
> qsqlpsql4.lib
> 
> qsqlpsqld4.dll
> 
> qsqlpsqld4.lib

我还放入的 qsqlmysql*.* 文件：

> C:\Qt\4.8.0\bin
> 
> 应用\
> 
> 应用\调试\
> 
> 应用\发布\
> 
> 应用程序\sqldrivers\

当然，我也得到了 QtSql*.dll。

Iv 正确配置了 .pro：

> QT += core gui 网络 sql

我正在运行这段代码：

```
#include <QSqlRecord>
#include <QSqlError>

QLibrary mysqllib("qsqlmysqld4.dll");
mysqllib.load();
auto t1 = mysqllib.isLoaded();
qDebug()<<"my library loaded"<<mysqllib.isLoaded();

QPluginLoader plug("qsqlmysqld4.dll");
plug.load();
auto t2 = plug.isLoaded();
qDebug()<<"mysql plugin is loaded"<<plug.isLoaded();

ui->textEditContent->append( "--SQL DRIVERS SUPPORTED:--\n" );
FOREACH( auto driver, QSqlDatabase::drivers() )
    ui->textEditContent->append( "  " + driver + "\n" ); 
```

QLibrary 和 QPluginLoader 返回 true。而 QSqlDatabase::drivers() 是空的。我做错了什么？Qt 看不到 C:\Qt\4.8.0\plugins\sqldrivers 中的所有驱动程序。Iv 使用相同的编译器 (MSVC2010) 编译 Qt 和 SQL 驱动程序，没有错误。我正在运行我的代码几个月。任务是添加 MySQL 支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:59:50.700

问题解决了！我修改了代码，现在看起来像这样：

```
#include <QSqlRecord>
#include <QSqlError>    

QStringList liblist;
liblist.push_back("c:/Qt/4.8.0/plugins/");
liblist.push_back("c:/Qt/4.8.0/bin/");
QCoreApplication::setLibraryPaths(liblist);

QLibrary mysqllib("qsqlmysqld4.dll");
mysqllib.load();
auto t1 = mysqllib.isLoaded();
qDebug()<<"my library loaded"<<mysqllib.isLoaded();

QPluginLoader plug("qsqlmysqld4.dll");
plug.load();
auto t2 = plug.isLoaded();
qDebug()<<"mysql plugin is loaded"<<plug.isLoaded();

ui->textEditContent->append( "--SQL DRIVERS SUPPORTED:--\n" );
FOREACH( auto driver, QSqlDatabase::drivers() )
    ui->textEditContent->append( "  " + driver + "\n" ); 
```

似乎即使 Qt 有指向它自己的文件夹的路径，您也需要在加载驱动程序之前指定它们。您可以通过添加这些行来做到这一点：

```
QStringList liblist;
liblist.push_back("c:/Qt/4.8.0/plugins/");
liblist.push_back("c:/Qt/4.8.0/bin/");
QCoreApplication::setLibraryPaths(liblist); 
```

如果您想像我一样将这些驱动程序包含到您的应用程序文件夹中，您可以在应用程序的根目录中创建文件夹“sqldrivers”并将路径添加到该根目录。所以我们有 libmysql.dll 和 qsqlmysql.dll 在：

> X:\应用程序\sqldrivers\

代码如下所示：

```
QStringList liblist;
liblist.push_back(QDir::currentPath()); // Qt always looks for those drivers in <LIB_FOLDER_SPECIFIED>/sqldrivers/
//liblist.push_back("e:/Qt/4.8.0/bin/");
//liblist.push_back("e:/Qt/4.8.0/plugins/");
QCoreApplication::setLibraryPaths(liblist); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:50:19.317

你还需要一个 libmysql.dll

```
C:\Qt\4.8.0\bin

APPLICATION\

APPLICATION\Debug\

APPLICATION\Release\ 
```

# android - 活动未开始

> ID：14362883
> 
> 赞同：0
> 
> 时间：2013-01-16T16:18:58.313
> 
> 标签：android, android-activity

我使用此代码从我的 开始一个新游戏`MainMenu`，一切正常，但是当游戏完成时，用户会得到一个弹出窗口（只是另一个以 命名`GameFinished`的Activity `Theme.Dialog`）。用户可以选择是否要再次玩游戏或返回`MainMenu`. 这也可以正常工作，但是当我开始另一个游戏时，我`MainMenu`什么也没发生，调试器显示该行已执行。

视觉指南：

A --> B --> C --完成--> B --完成--> A

之后我不能这样：

A --> B

```
public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

    if (id == 0) {
                        startActivity(new Intent(GameMenu.this, GuessFlag.class));
                    } else if (id == 1) {
                        startActivity(new Intent(GameMenu.this,
                                MovieQuestions.class));
                    } else if (id == 2) {
                        startActivity(new Intent(GameMenu.this, SimpleMath.class));
                    } else if (id == 3) {
                        startActivity(new Intent(GameMenu.this, TickTacToe.class));
                    }
                } 
```

我在几周内唯一添加的就是这条线，所以我[Tapifier](http://www.tapifier.com)可以工作：

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
        .permitAll().build();

StrictMode.setThreadPolicy(policy); 
```

这是我的（非常大的）logcat：

```
01-16 17:17:28.845: E/ActivityThread(9311): Activity com.obattech.twoplayergame.games.MovieQuestions has leaked IntentReceiver com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent$1@42342078 that was originally registered here. Are you missing a call to unregisterReceiver()?
01-16 17:17:28.845: E/ActivityThread(9311): android.app.IntentReceiverLeaked: Activity com.obattech.twoplayergame.games.MovieQuestions has leaked IntentReceiver com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent$1@42342078 that was originally registered here. Are you missing a call to unregisterReceiver()?
01-16 17:17:28.845: E/ActivityThread(9311):     at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:792)
01-16 17:17:28.845: E/ActivityThread(9311):     at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:593)
01-16 17:17:28.845: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1254)
01-16 17:17:28.845: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1241)
01-16 17:17:28.845: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1235)
01-16 17:17:28.845: E/ActivityThread(9311):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:372)
01-16 17:17:28.845: E/ActivityThread(9311):     at com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent.<init>(MultiPhoneWindowEvent.java:332)
01-16 17:17:28.845: E/ActivityThread(9311):     at com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent.installDecor(MultiPhoneWindowEvent.java:176)
01-16 17:17:28.845: E/ActivityThread(9311):     at java.lang.reflect.Method.invokeNative(Native Method)
01-16 17:17:28.845: E/ActivityThread(9311):     at java.lang.reflect.Method.invoke(Method.java:511)
01-16 17:17:28.845: E/ActivityThread(9311):     at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:3175)
01-16 17:17:28.845: E/ActivityThread(9311):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:304)
01-16 17:17:28.845: E/ActivityThread(9311):     at android.app.Activity.setContentView(Activity.java:1924)
01-16 17:17:28.845: E/ActivityThread(9311):     at com.obattech.twoplayergame.games.MovieQuestions.onCreate(MovieQuestions.java:45)
01-16 17:17:28.845: E/ActivityThread(9311):     at android.app.Activity.performCreate(Activity.java:5206)
01-16 17:17:28.845: E/ActivityThread(9311):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
01-16 17:17:28.845: E/ActivityThread(9311):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
01-16 17:17:28.845: E/ActivityThread(9311):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
01-16 17:17:28.845: E/ActivityThread(9311):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
01-16 17:17:28.845: E/ActivityThread(9311):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
01-16 17:17:28.845: E/ActivityThread(9311):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-16 17:17:28.845: E/ActivityThread(9311):     at android.os.Looper.loop(Looper.java:137)
01-16 17:17:28.845: E/ActivityThread(9311):     at android.app.ActivityThread.main(ActivityThread.java:4898)
01-16 17:17:28.845: E/ActivityThread(9311):     at java.lang.reflect.Method.invokeNative(Native Method)
01-16 17:17:28.845: E/ActivityThread(9311):     at java.lang.reflect.Method.invoke(Method.java:511)
01-16 17:17:28.845: E/ActivityThread(9311):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
01-16 17:17:28.845: E/ActivityThread(9311):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
01-16 17:17:28.845: E/ActivityThread(9311):     at dalvik.system.NativeStart.main(Native Method)
01-16 17:17:29.900: E/ActivityThread(9311): Activity com.obattech.twoplayergame.games.SimpleMath has leaked IntentReceiver com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent$1@423555f8 that was originally registered here. Are you missing a call to unregisterReceiver()?
01-16 17:17:29.900: E/ActivityThread(9311): android.app.IntentReceiverLeaked: Activity com.obattech.twoplayergame.games.SimpleMath has leaked IntentReceiver com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent$1@423555f8 that was originally registered here. Are you missing a call to unregisterReceiver()?
01-16 17:17:29.900: E/ActivityThread(9311):     at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:792)
01-16 17:17:29.900: E/ActivityThread(9311):     at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:593)
01-16 17:17:29.900: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1254)
01-16 17:17:29.900: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1241)
01-16 17:17:29.900: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1235)
01-16 17:17:29.900: E/ActivityThread(9311):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:372)
01-16 17:17:29.900: E/ActivityThread(9311):     at com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent.<init>(MultiPhoneWindowEvent.java:332)
01-16 17:17:29.900: E/ActivityThread(9311):     at com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent.installDecor(MultiPhoneWindowEvent.java:176)
01-16 17:17:29.900: E/ActivityThread(9311):     at java.lang.reflect.Method.invokeNative(Native Method)
01-16 17:17:29.900: E/ActivityThread(9311):     at java.lang.reflect.Method.invoke(Method.java:511)
01-16 17:17:29.900: E/ActivityThread(9311):     at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:3175)
01-16 17:17:29.900: E/ActivityThread(9311):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:304)
01-16 17:17:29.900: E/ActivityThread(9311):     at android.app.Activity.setContentView(Activity.java:1924)
01-16 17:17:29.900: E/ActivityThread(9311):     at com.obattech.twoplayergame.games.SimpleMath.onCreate(SimpleMath.java:46)
01-16 17:17:29.900: E/ActivityThread(9311):     at android.app.Activity.performCreate(Activity.java:5206)
01-16 17:17:29.900: E/ActivityThread(9311):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
01-16 17:17:29.900: E/ActivityThread(9311):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
01-16 17:17:29.900: E/ActivityThread(9311):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
01-16 17:17:29.900: E/ActivityThread(9311):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
01-16 17:17:29.900: E/ActivityThread(9311):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
01-16 17:17:29.900: E/ActivityThread(9311):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-16 17:17:29.900: E/ActivityThread(9311):     at android.os.Looper.loop(Looper.java:137)
01-16 17:17:29.900: E/ActivityThread(9311):     at android.app.ActivityThread.main(ActivityThread.java:4898)
01-16 17:17:29.900: E/ActivityThread(9311):     at java.lang.reflect.Method.invokeNative(Native Method)
01-16 17:17:29.900: E/ActivityThread(9311):     at java.lang.reflect.Method.invoke(Method.java:511)
01-16 17:17:29.900: E/ActivityThread(9311):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
01-16 17:17:29.900: E/ActivityThread(9311):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
01-16 17:17:29.900: E/ActivityThread(9311):     at dalvik.system.NativeStart.main(Native Method)
01-16 17:17:30.520: E/ActivityThread(9311): Activity com.obattech.twoplayergame.games.MovieQuestions has leaked IntentReceiver com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent$1@4294f240 that was originally registered here. Are you missing a call to unregisterReceiver()?
01-16 17:17:30.520: E/ActivityThread(9311): android.app.IntentReceiverLeaked: Activity com.obattech.twoplayergame.games.MovieQuestions has leaked IntentReceiver com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent$1@4294f240 that was originally registered here. Are you missing a call to unregisterReceiver()?
01-16 17:17:30.520: E/ActivityThread(9311):     at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:792)
01-16 17:17:30.520: E/ActivityThread(9311):     at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:593)
01-16 17:17:30.520: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1254)
01-16 17:17:30.520: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1241)
01-16 17:17:30.520: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1235)
01-16 17:17:30.520: E/ActivityThread(9311):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:372)
01-16 17:17:30.520: E/ActivityThread(9311):     at com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent.<init>(MultiPhoneWindowEvent.java:332)
01-16 17:17:30.520: E/ActivityThread(9311):     at com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent.installDecor(MultiPhoneWindowEvent.java:176)
01-16 17:17:30.520: E/ActivityThread(9311):     at java.lang.reflect.Method.invokeNative(Native Method)
01-16 17:17:30.520: E/ActivityThread(9311):     at java.lang.reflect.Method.invoke(Method.java:511)
01-16 17:17:30.520: E/ActivityThread(9311):     at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:3175)
01-16 17:17:30.520: E/ActivityThread(9311):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:304)
01-16 17:17:30.520: E/ActivityThread(9311):     at android.app.Activity.setContentView(Activity.java:1924)
01-16 17:17:30.520: E/ActivityThread(9311):     at com.obattech.twoplayergame.games.MovieQuestions.onCreate(MovieQuestions.java:45)
01-16 17:17:30.520: E/ActivityThread(9311):     at android.app.Activity.performCreate(Activity.java:5206)
01-16 17:17:30.520: E/ActivityThread(9311):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
01-16 17:17:30.520: E/ActivityThread(9311):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
01-16 17:17:30.520: E/ActivityThread(9311):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
01-16 17:17:30.520: E/ActivityThread(9311):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
01-16 17:17:30.520: E/ActivityThread(9311):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
01-16 17:17:30.520: E/ActivityThread(9311):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-16 17:17:30.520: E/ActivityThread(9311):     at android.os.Looper.loop(Looper.java:137)
01-16 17:17:30.520: E/ActivityThread(9311):     at android.app.ActivityThread.main(ActivityThread.java:4898)
01-16 17:17:30.520: E/ActivityThread(9311):     at java.lang.reflect.Method.invokeNative(Native Method)
01-16 17:17:30.520: E/ActivityThread(9311):     at java.lang.reflect.Method.invoke(Method.java:511)
01-16 17:17:30.520: E/ActivityThread(9311):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
01-16 17:17:30.520: E/ActivityThread(9311):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
01-16 17:17:30.520: E/ActivityThread(9311):     at dalvik.system.NativeStart.main(Native Method)
01-16 17:17:30.825: E/ActivityThread(9311): Activity com.obattech.twoplayergame.games.GuessFlag has leaked IntentReceiver com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent$1@4296a908 that was originally registered here. Are you missing a call to unregisterReceiver()?
01-16 17:17:30.825: E/ActivityThread(9311): android.app.IntentReceiverLeaked: Activity com.obattech.twoplayergame.games.GuessFlag has leaked IntentReceiver com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent$1@4296a908 that was originally registered here. Are you missing a call to unregisterReceiver()?
01-16 17:17:30.825: E/ActivityThread(9311):     at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:792)
01-16 17:17:30.825: E/ActivityThread(9311):     at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:593)
01-16 17:17:30.825: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1254)
01-16 17:17:30.825: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1241)
01-16 17:17:30.825: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1235)
01-16 17:17:30.825: E/ActivityThread(9311):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:372)
01-16 17:17:30.825: E/ActivityThread(9311):     at com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent.<init>(MultiPhoneWindowEvent.java:332)
01-16 17:17:30.825: E/ActivityThread(9311):     at com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent.installDecor(MultiPhoneWindowEvent.java:176)
01-16 17:17:30.825: E/ActivityThread(9311):     at java.lang.reflect.Method.invokeNative(Native Method)
01-16 17:17:30.825: E/ActivityThread(9311):     at java.lang.reflect.Method.invoke(Method.java:511)
01-16 17:17:30.825: E/ActivityThread(9311):     at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:3175)
01-16 17:17:30.825: E/ActivityThread(9311):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:304)
01-16 17:17:30.825: E/ActivityThread(9311):     at android.app.Activity.setContentView(Activity.java:1924)
01-16 17:17:30.825: E/ActivityThread(9311):     at com.obattech.twoplayergame.games.GuessFlag.onCreate(GuessFlag.java:46)
01-16 17:17:30.825: E/ActivityThread(9311):     at android.app.Activity.performCreate(Activity.java:5206)
01-16 17:17:30.825: E/ActivityThread(9311):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
01-16 17:17:30.825: E/ActivityThread(9311):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
01-16 17:17:30.825: E/ActivityThread(9311):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
01-16 17:17:30.825: E/ActivityThread(9311):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
01-16 17:17:30.825: E/ActivityThread(9311):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
01-16 17:17:30.825: E/ActivityThread(9311):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-16 17:17:30.825: E/ActivityThread(9311):     at android.os.Looper.loop(Looper.java:137)
01-16 17:17:30.825: E/ActivityThread(9311):     at android.app.ActivityThread.main(ActivityThread.java:4898)
01-16 17:17:30.825: E/ActivityThread(9311):     at java.lang.reflect.Method.invokeNative(Native Method)
01-16 17:17:30.825: E/ActivityThread(9311):     at java.lang.reflect.Method.invoke(Method.java:511)
01-16 17:17:30.825: E/ActivityThread(9311):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
01-16 17:17:30.825: E/ActivityThread(9311):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
01-16 17:17:30.825: E/ActivityThread(9311):     at dalvik.system.NativeStart.main(Native Method)
01-16 17:17:31.225: E/ActivityThread(9311): Activity com.obattech.twoplayergame.games.SimpleMath has leaked IntentReceiver com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent$1@429858b0 that was originally registered here. Are you missing a call to unregisterReceiver()?
01-16 17:17:31.225: E/ActivityThread(9311): android.app.IntentReceiverLeaked: Activity com.obattech.twoplayergame.games.SimpleMath has leaked IntentReceiver com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent$1@429858b0 that was originally registered here. Are you missing a call to unregisterReceiver()?
01-16 17:17:31.225: E/ActivityThread(9311):     at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:792)
01-16 17:17:31.225: E/ActivityThread(9311):     at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:593)
01-16 17:17:31.225: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1254)
01-16 17:17:31.225: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1241)
01-16 17:17:31.225: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1235)
01-16 17:17:31.225: E/ActivityThread(9311):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:372)
01-16 17:17:31.225: E/ActivityThread(9311):     at com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent.<init>(MultiPhoneWindowEvent.java:332)
01-16 17:17:31.225: E/ActivityThread(9311):     at com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent.installDecor(MultiPhoneWindowEvent.java:176)
01-16 17:17:31.225: E/ActivityThread(9311):     at java.lang.reflect.Method.invokeNative(Native Method)
01-16 17:17:31.225: E/ActivityThread(9311):     at java.lang.reflect.Method.invoke(Method.java:511)
01-16 17:17:31.225: E/ActivityThread(9311):     at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:3175)
01-16 17:17:31.225: E/ActivityThread(9311):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:304)
01-16 17:17:31.225: E/ActivityThread(9311):     at android.app.Activity.setContentView(Activity.java:1924)
01-16 17:17:31.225: E/ActivityThread(9311):     at com.obattech.twoplayergame.games.SimpleMath.onCreate(SimpleMath.java:46)
01-16 17:17:31.225: E/ActivityThread(9311):     at android.app.Activity.performCreate(Activity.java:5206)
01-16 17:17:31.225: E/ActivityThread(9311):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
01-16 17:17:31.225: E/ActivityThread(9311):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
01-16 17:17:31.225: E/ActivityThread(9311):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
01-16 17:17:31.225: E/ActivityThread(9311):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
01-16 17:17:31.225: E/ActivityThread(9311):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
01-16 17:17:31.225: E/ActivityThread(9311):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-16 17:17:31.225: E/ActivityThread(9311):     at android.os.Looper.loop(Looper.java:137)
01-16 17:17:31.225: E/ActivityThread(9311):     at android.app.ActivityThread.main(ActivityThread.java:4898)
01-16 17:17:31.225: E/ActivityThread(9311):     at java.lang.reflect.Method.invokeNative(Native Method)
01-16 17:17:31.225: E/ActivityThread(9311):     at java.lang.reflect.Method.invoke(Method.java:511)
01-16 17:17:31.225: E/ActivityThread(9311):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
01-16 17:17:31.225: E/ActivityThread(9311):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
01-16 17:17:31.225: E/ActivityThread(9311):     at dalvik.system.NativeStart.main(Native Method)
01-16 17:17:31.500: E/ActivityThread(9311): Activity com.obattech.twoplayergame.games.GuessFlag has leaked IntentReceiver com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent$1@429a0de0 that was originally registered here. Are you missing a call to unregisterReceiver()?
01-16 17:17:31.500: E/ActivityThread(9311): android.app.IntentReceiverLeaked: Activity com.obattech.twoplayergame.games.GuessFlag has leaked IntentReceiver com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent$1@429a0de0 that was originally registered here. Are you missing a call to unregisterReceiver()?
01-16 17:17:31.500: E/ActivityThread(9311):     at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:792)
01-16 17:17:31.500: E/ActivityThread(9311):     at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:593)
01-16 17:17:31.500: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1254)
01-16 17:17:31.500: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1241)
01-16 17:17:31.500: E/ActivityThread(9311):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1235)
01-16 17:17:31.500: E/ActivityThread(9311):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:372)
01-16 17:17:31.500: E/ActivityThread(9311):     at com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent.<init>(MultiPhoneWindowEvent.java:332)
01-16 17:17:31.500: E/ActivityThread(9311):     at com.android.internal.policy.impl.multiwindow.MultiPhoneWindowEvent.installDecor(MultiPhoneWindowEvent.java:176)
01-16 17:17:31.500: E/ActivityThread(9311):     at java.lang.reflect.Method.invokeNative(Native Method)
01-16 17:17:31.500: E/ActivityThread(9311):     at java.lang.reflect.Method.invoke(Method.java:511)
01-16 17:17:31.500: E/ActivityThread(9311):     at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:3175)
01-16 17:17:31.500: E/ActivityThread(9311):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:304)
01-16 17:17:31.500: E/ActivityThread(9311):     at android.app.Activity.setContentView(Activity.java:1924)
01-16 17:17:31.500: E/ActivityThread(9311):     at com.obattech.twoplayergame.games.GuessFlag.onCreate(GuessFlag.java:46)
01-16 17:17:31.500: E/ActivityThread(9311):     at android.app.Activity.performCreate(Activity.java:5206)
01-16 17:17:31.500: E/ActivityThread(9311):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
01-16 17:17:31.500: E/ActivityThread(9311):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
01-16 17:17:31.500: E/ActivityThread(9311):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
01-16 17:17:31.500: E/ActivityThread(9311):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
01-16 17:17:31.500: E/ActivityThread(9311):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
01-16 17:17:31.500: E/ActivityThread(9311):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-16 17:17:31.500: E/ActivityThread(9311):     at android.os.Looper.loop(Looper.java:137)
01-16 17:17:31.500: E/ActivityThread(9311):     at android.app.ActivityThread.main(ActivityThread.java:4898)
01-16 17:17:31.500: E/ActivityThread(9311):     at java.lang.reflect.Method.invokeNative(Native Method)
01-16 17:17:31.500: E/ActivityThread(9311):     at java.lang.reflect.Method.invoke(Method.java:511)
01-16 17:17:31.500: E/ActivityThread(9311):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
01-16 17:17:31.500: E/ActivityThread(9311):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
01-16 17:17:31.500: E/ActivityThread(9311):     at dalvik.system.NativeStart.main(Native Method) 
```

简单数学：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {

            requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                    WindowManager.LayoutParams.FLAG_FULLSCREEN);
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_game_simpemath);

        }

protected void onResume() {
    super.onResume();
    if (AppData.questionsLoaded) {
        AppData.questionsLoaded  = false;
        runGame();
    }

    if (AppData.restartGame) {
        AppData.restartGame = false;
        finish();
        startActivity(new Intent(SimpleMath.this, TickTacToe.class));
    }

    if(AppData.finishMe){
        finish();
    }

} 
```

PlayAgain（游戏结束时接听电话）：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_game_gamefinished);

    Window window = this.getWindow();
    window.setFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL,
            WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);

    android.view.WindowManager.LayoutParams params = getWindow()
            .getAttributes();
    params.width = android.view.WindowManager.LayoutParams.MATCH_PARENT;
    getWindow().setAttributes(
            (android.view.WindowManager.LayoutParams) params);

            setListeners();
}

public void setListeners() {

    button_restart.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            AppData.restartGame = true;
            finish();
        }
    });

    button_mainmenu.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            AppData.finishMe = true;
            finish();
        }
    });
} 
```

唯一相关的其他事情是我使用了 AsyncTask 和 Handler。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T18:22:22.430

ObAt，我的应用程序中有完全相同的错误。您写道您不使用 IntentReceiver，但这可能不是真的。

似乎您正在使用三星设备的特殊功能 - MultiWindow，所以如果您在清单中注册了意图过滤器，就像我一样：

```
 <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
        <!-- SAMSUNG MULTI-WINDOW -->
        <category android:name="android.intent.category.MULTIWINDOW_LAUNCHER" />
    </intent-filter>

    <!-- SAMSUNG MULTI-WINDOW -->   
    <meta-data android:name="com.sec.minimode.icon.portrait.normal"
        android:resource="@drawable/ic_launcher" />
    <meta-data android:name="com.sec.minimode.icon.landscape.normal"
        android:resource="@drawable/ic_launcher" /> 
```

那么三星设备可能会在后台自行注册 IntentReceiver 以正确处理与 MultiWindow 功能相关的一些任务。我在日志中看到这个错误几个月，它从来没有任何问题。所以我只是忽略了这一点，直到三星在他们这边解决了这个问题。这就是我的看法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:24:46.127

根据您的错误，您正在泄漏您之前注册的 IntentReceiver。

您需要取消注册 IntentReceiver，该`onPause`方法将是为您的`SimpleMath`活动执行此操作的好地方。

```
@Override
protected void onPause() {
    super.onPause();
    unregister(); //  here
} 
```

# java - 自定义形状的透明按钮

> ID：14362885
> 
> 赞同：2
> 
> 时间：2013-01-16T16:19:03.910
> 
> 标签：java, swing, jbutton, bufferedimage, imageicon

我发现了 2 种不适合我的不同解决方案。第一个涉及透明度。第二个我更喜欢，因为它看起来更干净。目标是使用具有透明度的图像创建自定义形状的按钮。我想忽略透明部分，仅在单击图像的非透明部分时才采取行动。

第一个代码来自这里[http://java.macteki.com/2012/07/custom-shape-buttons.html](http://java.macteki.com/2012/07/custom-shape-buttons.html)。顺便问一下，下面代码中的 0x00ffffff 有什么意义？

```
//********** BEGIN OF IMAGE BUTTON CODE ****************
      // The following is the actual code to create a image button
      // you may use any transparent image file, just change "a.png" below
      final BufferedImage image = ImageIO.read(new File("a.png"));
      ImageIcon icon = new ImageIcon(image);

      jLabel1 = new javax.swing.JLabel(icon);
      jLabel1.addMouseListener(new MouseAdapter()
      {
      public void mouseClicked(MouseEvent e)
      {
      boolean transparent = (image.getRGB(e.getX(),e.getY()) & 0x00ffffff)!=0;
     if (!transparent) {
      // write your button handler here
       System.out.println("button pressed");
      } else {
        System.out.println("else");
      }
      }
      }

      );
      //********** END OF IMAGE BUTTON CODE ****************
      // add the button to the panel so that it becomes visible 
```

它适用于他的测试图像，但不适用于我的任何图像。我什至拿走了他，只是改变了 gimp 中 A 的颜色，导出到 a2.png 并且它不起作用。它将所有区域注册为`else`并且`if (!transparent)`从不触发。

此图像有效： ![此图像有效](../Images/ef975e642dec6fde3b9f3e0b9725ffc1.png) 此图像无效： ![此图无效](../Images/adde1dd20a3ca7acb0b2cb9d7274176c.png)

我更喜欢的第二个代码来自这里[用 JButton 在 Java 中创建自定义按钮](https://stackoverflow.com/questions/5751311/creating-a-custom-button-in-java-with-jbutton)。图像适用于按钮，但在框中的任意位置（包括透明区域）单击将注册为单击。我希望它仅在您单击非透明区域（或本例中的 A）时才起作用。

```
BufferedImage startButton = ImageIO.read(new File("a2.png"));       
        jButton1 = new javax.swing.JButton(new ImageIcon(startButton));  
        jButton1.setBorder(BorderFactory.createEmptyBorder());
        jButton1.setContentAreaFilled(false);
        jButton1.setFocusable(false); 
```

这是我根据 Guillame 的示例尝试使用的代码

```
private void initComponents() throws IOException {

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        final BufferedImage image = ImageIO.read(getClass().getResource("/images/a.png"));
        jButton1 = new JButton(new ImageIcon(image)) {
             @Override
             public boolean contains(int x, int y) {
                 Rectangle viewRect = getBounds();
                 Insets insets = getInsets();
                 viewRect.x += insets.left;
                 viewRect.y += insets.top;
                 viewRect.width -= insets.left + insets.right;
                 viewRect.height -= insets.top + insets.bottom;
                 Rectangle iconR = new Rectangle();
                 SwingUtilities.layoutCompoundLabel(this, this.getFontMetrics(this.getFont()), this.getText(), this.getIcon(),
                         this.getVerticalAlignment(), this.getHorizontalAlignment(), this.getVerticalTextPosition(),
                         this.getHorizontalTextPosition(), viewRect, iconR, new Rectangle(), this.getIconTextGap());
                 if (!iconR.contains(x, y)) {
                     return false;
                 }
                 x -= iconR.x;
                 y -= iconR.y;
                 Color c = new Color(image.getRGB(x, y), true);
                 return c.getAlpha() != 0 && (c.getRed() < 255 || c.getGreen() < 255 || c.getBlue() < 255);
             }
         };

        jButton1.setContentAreaFilled(false); 
        jButton1.setFocusPainted(false);            
        jButton1.setRolloverEnabled(false);       
        jButton1.setBorderPainted(false);

        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(72, 72, 72)
                .addComponent(jButton1)
                .addContainerGap(255, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(193, Short.MAX_VALUE)
                .addComponent(jButton1)
                .addGap(84, 84, 84))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:50:26.413

您需要覆盖 的方法才能`contains(int,int)`使`JButton`您的第二种方法起作用。现在最难的部分是弄清楚你是否在图像的相关部分。在这种情况下，我假设完全透明的像素不相关，白色像素也不相关。由您选择不同的实现：

```
import java.awt.Color;
import java.awt.Insets;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;

public class TestTransparentButton {

    protected void createAndShowGUI() throws MalformedURLException, IOException {
        JFrame frame = new JFrame("Test button");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final BufferedImage image = ImageIO.read(new URL("http://i.stack.imgur.com/7D547.png"));
        final JButton button = new JButton(new ImageIcon(image)) {
            @Override
            public boolean contains(int x, int y) {
                Rectangle viewRect = getBounds();
                Insets insets = getInsets();
                viewRect.x = insets.left;
                viewRect.y = insets.top;
                viewRect.width -= insets.left + insets.right;
                viewRect.height -= insets.top + insets.bottom;
                Rectangle iconR = new Rectangle();
                SwingUtilities.layoutCompoundLabel(this, this.getFontMetrics(this.getFont()), this.getText(), this.getIcon(),
                        this.getVerticalAlignment(), this.getHorizontalAlignment(), this.getVerticalTextPosition(),
                        this.getHorizontalTextPosition(), viewRect, iconR, new Rectangle(), this.getIconTextGap());
                if (!iconR.contains(x, y)) {
                    return false;
                }
                x -= iconR.x;
                y -= iconR.y;
                Color c = new Color(image.getRGB(x, y), true);
                return c.getAlpha() != 0 && (c.getRed() < 255 || c.getGreen() < 255 || c.getBlue() < 255);
            }
        };
        button.setContentAreaFilled(false);
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JOptionPane.showMessageDialog(button, "You clicked on the button");
            }
        });
        frame.add(button);
        frame.setSize(200, 200);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    new TestTransparentButton().createAndShowGUI();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });

    }

} 
```

# c# - 在投影中使用 NHibernate 拦截器

> ID：14362888
> 
> 赞同：2
> 
> 时间：2013-01-16T16:19:07.530
> 
> 标签：c#, interceptor, nhibernate-criteria, nhibernate-projections

我有这种情况：

我正在使用 Nhibernate 映射一个实体“ **User** ”，该实体“ User ”映射到 Sql 中的一个大表上，出于性能原因，我创建了一个轻量级实体“ **LightweightUser** ”，它只有一小部分属性并且**没有**映射到 hbm文件或其他任何东西，我正在使用**Nhibernate 投影**技术来连接“ **LightweightUser** ”实体。这两个实体都派生自一个包含 Id 属性的简单类“实体”。

上述实现工作正常，sql 查询更小 == 更快。

但是在我的 Nhibernate SessionFactory 中，我还注入了一个**Nhibernate Intercerptor**。当我从 NHibernate Dao 获取“ **User** ”实体时，将调用 Interceptor的**OnLoad方法，但是当我从 NHibernate Dao 获取“** **LightweightUser** ”实体时，**不会触发**Interceptor （OnLoad 方法）。

 ******这可能与 NHibernate SessionFactory 不知道我的“LightweightUser”实体有关。有没有办法通知 Sessionfactory/Interceptor 我的“轻量级”实体的存在？还是有一些其他技术可以将投影连接到拦截器？是的，我也可以为我的轻量级实体复制“hbm”文件，但这似乎是一种不好的做法。

```
 [TestFixture]
    public class InterceptorTest : NhibernateSessionHelper
    {
    [Test]
    public void GetEntiy()
    {
        //ok trigger OnLoad in the Interceptor
        var user = GetSession().Get<User>(1);
        Assert.IsNotNull(user);
    }

    [Test]
    public void GetProjection()
    {
        var crit = GetSession().CreateCriteria<User>();
        crit.Add(Restrictions.Eq("Id", 5));
        crit.SetProjection(Projections.ProjectionList()
                                      .Add(Projections.Property("Id"), "Id")
                                      .Add(Projections.Property("Username"), "UserName"));

        crit.SetResultTransformer(Transformers.AliasToBean(typeof(LightweightUser)));

        //does not trigger the Interceptor
        var result = crit.List<LightweightUser>();

        Assert.IsNotNull(result.First());

    }
} 

    //Wire the Sessionfactory with Interceptor
    private static ISessionFactory CreateSessionFactory()
    {
        return new Configuration()
        .CurrentSessionContext<ThreadStaticSessionContext>()
        .SetInterceptor(new MyInterceptor())
            .Configure().BuildSessionFactory();
    }

 public class MyInterceptor: IInterceptor
{
    public override bool OnLoad(object entity, object id, object[] state, string[] propertyNames, NHibernate.Type.IType[] types)
    {
        //do stuff

        var s = entity;
        return base.OnLoad(entity, id, state, propertyNames, types);
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T09:40:36.043

拦截器的 OnLoad 方法仅在处理 PreLoadEvent 时被调用。这在两种情况下会出现：从数据库加载实体时，或者从缓存中组装实体时。使用像您这样的投影创建的对象不被视为实体。

如果您想为实体和 LightweightUser 元组应用相同的代码，您可以实现您的自定义 IResultTransformer 包含一个实例

```
Transformers.AliasToBean(typeof(LightweightUser)) 
```

并在调用原始转换器方法后应用您的逻辑

```
//do stuff 
```

如果想了解更多关于拦截器的信息，我鼓励你从这里开始阅读我的博客条目列表：http: [//blog.scooletz.com/2011/02/03/nhibernate-interceptor-magic-tricks-pt-1/](http://blog.scooletz.com/2011/02/03/nhibernate-interceptor-magic-tricks-pt-1/)******

# php - 即时修改 PHP 对象属性

> ID：14362889
> 
> 赞同：1
> 
> 时间：2013-01-16T16:19:10.773
> 
> 标签：php, oop, object

> **可能重复：**
> [在 PHP 中，我如何访问对象中的“:private”数组？](https://stackoverflow.com/questions/8286798/in-php-how-can-i-access-a-private-array-in-an-object)

我不确定是否有正确的方法可以做到这一点，或者这是否是完全不可接受的技术。

我正在使用 PHP，并且我的脚本被赋予了一个对象，它无权访问对象类并且许多属性受到保护（见下文）。

是否可以手动“破解”（单词选择错误）对象以动态修改属性值？
不确定一种方法可以做到这一点，或者是否有一种方法可以转换一种方法然后再返回。

```
object(__PHP_Incomplete_Class)#3 (16) {

["__PHP_Incomplete_Class_Name"]=>
  string(28) "Zend_Controller_Request_Http"
  ["_paramSources":protected]=>
  array(2) {
    [0]=>
    string(4) "_GET"
    [1]=>
    string(5) "_POST"
  }
  ["_requestUri":protected]=>
  string(13) "/?mod=mainnav"
  ["_baseUrl":protected]=>
  NULL
  ["_basePath":protected]=>
  NULL
  ["_pathInfo":protected]=>
  string(0) ""
  ["_params":protected]=>
  array(0) {
  }
  ["_rawBody":protected]=>
  NULL
  ["_aliases":protected]=>
  array(0) {
  }
  ["_dispatched":protected]=>
  bool(false)
  ["_module":protected]=>
  NULL
  ["_moduleKey":protected]=>
  string(6) "module"
  ["_controller":protected]=>
  NULL
  ["_controllerKey":protected]=>
  string(10) "controller"
  ["_action":protected]=>
  NULL
  ["_actionKey":protected]=>
  string(6) "action"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:31:12.037

如果属性受到保护，您可以创建一个从该类扩展的类并修改任何属性。如果它们是私有的，请查看反射：

```
$reflecRequest = new ReflectionObject($request);
$reflecRequestProp = $reflecRequest->getProperty('_requestUri');
$reflecRequestProp->setAccessible(true);
$reflecRequestProp->setValue($request, 'newUri'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:25:51.373

最终使用更简单的技术来做到这一点。
我将对象序列化为字符串。因此，我只是使用 preg_replace 将当前值（我一直拥有）替换为新值。

有一些正则表达式可以找到变量名，然后我可以更改它的值（所以不需要知道值），但我还不能完成它（我确实有当前值）。

```
$objectA = serialize($request);
$current_url = '\?mod=mainnav';
$new_url = 'newpage';
$objectB = preg_replace('/'.$current_url.'/', $new_url, $objectA);

//check the new object
var_dump('<pre>');
var_dump(unserialize($objectB));
var_dump('</pre>'); 
```

大多数时候，使用反射可能是更好的技术，但对于我在这里需要的东西，我觉得这是一种简单而快速的方法，并且可以保留所有其他对象属性。

# jython - 无法从 jython 导入kombu

> ID：14362892
> 
> 赞同：0
> 
> 时间：2013-01-16T16:19:18.190
> 
> 标签：jython, kombu

我正在尝试将 python 应用程序移植到 jython 并遇到了 jython 无法导入 kombu 的问题（在原始 python 应用程序中使用显着）。

我已经通过 pip 安装了 kombu（甚至尝试了 -U 选项来获取最新版本）：

```
sudo pip install -U kombu
Downloading/unpacking kombu
  Downloading kombu-2.5.4.tar.gz (300Kb): 300Kb downloaded
  Running setup.py egg_info for package kombu

Downloading/unpacking anyjson>=0.3.3 (from kombu)
  Downloading anyjson-0.3.3.tar.gz
  Running setup.py egg_info for package anyjson

Downloading/unpacking amqp>=1.0.5,<1.1.0 (from kombu)
  Downloading amqp-1.0.6.tar.gz (69Kb): 69Kb downloaded
  Running setup.py egg_info for package amqp

Installing collected packages: amqp, anyjson, kombu
  Found existing installation: amqp 1.0.6
    Uninstalling amqp:
      Successfully uninstalled amqp
  Running setup.py install for amqp

  Found existing installation: anyjson 0.3.3
    Uninstalling anyjson:
      Successfully uninstalled anyjson
  Running setup.py install for anyjson

  Found existing installation: kombu 2.5.4
    Uninstalling kombu:
      Successfully uninstalled kombu
  Running setup.py install for kombu

Successfully installed amqp anyjson kombu
Cleaning up... 
```

我安装了 jython 2.5.3 版，当我尝试导入 kombu 时，出现“ImportError：没有名为 kombu 的模块”错误：

```
Jython 2.5.3 (2.5:c56500f08d34+, Aug 13 2012, 14:48:36) 
[Java HotSpot(TM) 64-Bit Server VM (Sun Microsystems Inc.)] on java1.6.0_26
Type "help", "copyright", "credits" or "license" for more information.
>>> import kombu
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named kombu
>>> from kombu.connection import BrokerConnection
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named kombu 
```

任何帮助将不胜感激！

谢谢，弗林特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:33:06.983

在 Jython IRC 人员的帮助下，我终于克服了这个错误。我的问题是我没有在 Jython 中安装 kombu。可以在[Importing python modules in jython](https://stackoverflow.com/questions/3256135/importing-python-modules-in-jython)中找到完成此操作的过程。

# entity-framework - EF Code First - 将实体链接到相同的依赖实体 - 删除级联错误

> ID：14362895
> 
> 赞同：0
> 
> 时间：2013-01-16T16:19:35.147
> 
> 标签：entity-framework, ef-code-first, foreign-keys

我有这两个实体：

```
public class Profile
{
    public int ProfileID { get; set; }

    public ICollection<Friend> Friends { get; set; }
}

public class Friend : BaseEntity
{
    public int FriendID { get; set; }

    public int ProfileID { get; set; }
    [ForeignKey("ProfileID")]
    public Profile Profile { get; set; }

    public int FriendProfileID { get; set; }
    [ForeignKey("FriendProfileID")]
    public Profile FriendProfile { get; set; }
} 
```

我想很清楚我想要做什么。我希望个人资料能够拥有一组引用其他个人资料的朋友。如果没有在 OnModelCreating 中指定任何内容，我会收到以下错误：

> 在表 'Friends' 上引入 FOREIGN KEY 约束 'FK_dbo.Friends_dbo.Profiles_FriendProfileID' 可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。

这意味着我需要在上下文的 OnModelCreating 方法中使用流利的 API 指定 WillCascadeOnDelete(false)。但是，我似乎无法使用这些关系找出正确的语法。

如何解决级联删除周期并让实体框架容忍这种关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:55:32.167

你是对的，你需要向 OnModelCreating() 添加一个流畅的映射。尝试这样的事情：

```
modelBuilder.Entity<Friend>()
                .HasOptional(x => x.FriendProfile )  //or HasRequired
                .WithMany()
                .WillCascadeOnDelete(false); 
```

# ajax - GSP 中的 Grails remoteFunction AJAX 函数，访问变量以用于参数

> ID：14362897
> 
> 赞同：0
> 
> 时间：2013-01-16T16:19:36.657
> 
> 标签：ajax, grails, grails-2.0

我想在复选框内的**remoteFunction中****动态设置参数。**我尝试了很多不同的组合，我将在下面展示几个，但我只是收到如下错误......

 **所以它基本上是我的理论，在这个方法的范围内不知道 eventInstance 是什么

在*FireBug 错误控制台中*，我收到`ReferenceError: eventInstance is not defined`

```
Test Combination 1
<g:checkBox name='completed' value="${eventInstance.completed}"
    onclick="${remoteFunction(action:'update', id:eventInstance.id, params:'\'id=\' + eventInstance.id+\'&version=\' + eventInstance.version' , onComplete: "tester()" )}" />

Test Combination 2 
<g:checkBox name='completed' value="${eventInstance.completed}" evt="${eventInstance}"
    onclick="${remoteFunction(action:'update', id:eventInstance.id, params:"[version=evt.version, editType='occurrence', title=evt.title, startTime=start, endTime=end, isRecurring=evt.isRecurring, completed='true']", onComplete: "tester()" )}" /> 
```

如果手动输入即硬编码数据，则此方法有效，但这没有用。一些愚蠢的东西，我只是找不到答案:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T06:19:55.177

这可以帮助你，

```
onchange="${remoteFunction(asynchronous: false, controller: 'mycontroller', action: 'remoteMethod', params: '\'p1='+params?.p1+'&p2=less&p3=\'+ this.value', update: 'remoteDiv')}" 
```

试试这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:59:27.710

可以这样工作......看起来有点奇怪，你**不能**使用 grails 变量，即从控制器发送到 GSP 中使用

相反......您必须将变量保存**到**JavaScript 变量中。

`eventInstance`因此，对于我想在`params`id、版本、包含在其中的任何其他字段中使用的每个变量，我只需执行以下操作：

```
<script type="text/javascript">
    function tester() {
        $('#calendar').fullCalendar('refetchEvents');
    }

    var test0 = ${eventInstance.id};
    var test1 = ${eventInstance.version};
    var test3 ='${eventInstance.title}';
    var test4 = '${start}';
    var test5 = '${end}';
    var test6 = ${eventInstance.isRecurring};
    alert(test0 + test1 + test3 + test4 + test5 + test5 + 
</script> 
```

然后在类似的参数部分引用这些变量`remoteFunction`如下：

```
<g:checkBox name='completed' value="${eventInstance.completed}"
onclick="${remoteFunction(action:'update', id:eventInstance.id, params:'\'id=\' + test0+\'&version=\' + test1+\'&editType=\'+"occurrence"', onComplete: "tester()" )}" /> 
```

不确定这是某种错误还是我的方法有问题，但是我已经尝试了每一种可能的组合，似乎是我能想出的唯一解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T06:21:22.337

这可以帮助你，

```
 onchange="$
    {
         remoteFunction(asynchronous: false, 
              controller: 'mycontroller', 
              action: 'remoteMethod', 
              params: '\'p1='+params?.p1+'&p2=less&p3=\'+ this.value', update: 'remoteDiv')}" 
```

试试这个。**

# java - 使用 ZXing 问题在 Java 中解码 QR 码

> ID：14362898
> 
> 赞同：2
> 
> 时间：2013-01-16T16:19:41.590
> 
> 标签：java, pdf, png, qr-code, zxing

我在 Java 中使用 ZXing 时遇到了问题。这是交易，我有一个包含二维码的 PDF。我使用 Imagemagick 将 PDF 转换为 300dpi、单色 PNG 文件，并将其提供给我的解码类：

```
Result result = null;
BinaryBitmap binaryBitmap;

    try{

        binaryBitmap = new BinaryBitmap(new HybridBinarizer(new BufferedImageLuminanceSource(ImageIO.read(
                new FileInputStream(filename)))));
        result = new MultiFormatReader().decode(binaryBitmap);
        System.out.println("QR Code: "+result.getText());

        return result.getText();

    }

    catch(Exception e){
        return null;
    } 
```

解码类无法在图像中找到二维码，即使我裁剪了 PNG 文件中的二维码以外的所有内容。我有 20 个这样的不同 PDF，但没有一个可以工作。疯狂的部分是，Android 应用 Barcode Scanner 读取 QR 码没有问题，无论是 PDF 文件还是 PNG 文件。Barcode Scanner 应用程序不是基于 ZXing 代码的吗？我已经在 J​​ava 类中使用了其他 QR 码并且它们正在解码，所以我知道该功能确实有效。任何建议都非常感谢，谢谢。

-SL

# java - 在两点之间读取文件

> ID：14362899
> 
> 赞同：3
> 
> 时间：2013-01-16T16:19:47.170
> 
> 标签：java, io, newline, readfile

我有以下文件：

文件.csv

```
header:2013/01/01, shasum: 495629218484151218892233214
content:data,a,s,d,f,g,h,j,k,l
content:data,q,w,e,r,t,y,u,i,o,p
content:data,z,x,c,v,b,n,m
footer:2013/01/01 EOF 
```

我需要计算内容的哈希值。换句话说，我需要计算没有页眉和页脚的文件内容的哈希值，并确保它与源头中提供的内容匹配。`scanner`我尝试使用并省略页眉和页脚逐行读取文件。

```
Scanner reader = new Scanner(new FileReader("filename"));
String header = reader.nextLine();
while(reader.hasNextLine()){
    line = reader.nextLine();
    if(reader.hasNextLine()){
        md.update(line.getBytes());
        md.update(NEW_LINE.getBytes());
    }
} 
```

在这里我不知道文件来自哪里。它可能来自 Windows 或 Unix。那我怎么知道该`NEW_LINE`用什么。为此，我写了这个肮脏的黑客。

```
int i;
while((i = br.read()) != -1){
    if(i == '\r'){
        if(br.read() == '\n'){
            NEW_LINE = "\r\n";
            break;
        }
    } else if(i == '\n'){
        NEW_LINE = "\n";
        break;
    }
} 
```

基本上它正在寻找`\r\n`or的第一个序列`\n`。无论它首先遇到什么，它都假定它是换行符。

如果我的文件是 CRLF 和 LF 的混合，这肯定会给我带来麻烦。我可能会受益于我可以提供两个偏移量的阅读器，它可以让我返回这两个偏移量之间的内容。像这样：

`reader.read(15569, 236952265);`

我相信可以计算出我想要的两个偏移量。来自社区的任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:59:08.890

比我在评论中想象的要好，我们应该简单地使用这个`RandomAccessFile`类！

```
// Load in the data file in read-only mode:
RandomAccessFile randFile = new RandomAccessFile("inputFileName.txt", "r");

// (On your own): Calculate starting byte to read from
// (On your own): Calculate ending byte to read from

// Discard header and footer.
randFile.setLength(endingPoint);
randFile.seek(startingPoint);

// Discard newlines of any kind as they are read in.
StringBuilder sb = new StringBuilder(endingPoint - startingPoint);
String currentLine = "";
while(currentLine != null)
{
  sb.append(currentLine);
  currentLine = randFile.readLine();
}

// hash your String contained in your StringBuilder without worrying about
// header, footer or newlines of any kind. 
```

请注意，此代码不是生产质量，因为它不会捕获异常并且可能会出现一些错误。我强烈建议阅读有关 RandomAccessFile 类的文档：http: [//docs.oracle.com/javase/1.4.2/docs/api/java/io/RandomAccessFile.html#readLine](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/RandomAccessFile.html#readLine) ()

我希望这有帮助。如果我不在基地，请告诉我，我会再试一次。

# apache - 使用 config.assets.compile = false 在 localhost 上运行 rails server -e production 会中断 Rails 资产管道

> ID：14362900
> 
> 赞同：0
> 
> 时间：2013-01-16T16:19:49.667
> 
> 标签：apache, ruby-on-rails-3.2, asset-pipeline, webrick

我正在尝试迁移我们的应用程序以使用资产管道，因此我一直在本地测试我的更改（使用内置的 Webrick 服务器）。我的 production.rb 看起来像这样：

```
 # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = true

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = false

  # Generate digests for assets URLs
  config.assets.digest = true 
```

请注意，`config.serve_static_assets = true`

这很完美，因为我可以运行

```
rm -rf tmp
rm -rf public/assets
RAILS_ENV=production bundle exec rake assets:clean
RAILS_ENV=production bundle exec rake assets:precompile 
rails server -p 3500 -e production 
```

在我的本地机器上，一切正常。但是，现在我想将我的更改推送到我们的生产 Apache 服务器我希望 Apache 服务资产，所以我设置：

`config.serve_static_assets = false`

如果我现在尝试在本地机器上加载生产 Rails 服务器，则不会加载静态资产。我不确定这是否是预期的行为（我的意思是，我告诉 Rails 不要为我提供静态资产，但事实并非如此——但我想要*一些东西*为我服务）。

所以我的问题是，我怎样才能`config.serve_static_assets = false`在我`production.rb`仍然能够运行本地生产 Rails 服务器的同时拥有？我要问的是可能的还是明智的？

谢谢

注意：使用 Rails 3.2.11

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:01:34.050

连同`rake assets:precompile`您应该指示您的网络服务器为公用文件夹提供服务。

您是否使用Passenger 进行部署？

请参阅[http://www.modrails.com/documentation/Users%20guide%20Apache.html](http://www.modrails.com/documentation/Users%20guide%20Apache.html)，特别是：

```
Listen *:80
NameVirtualHosts *:80
....

LoadModule passenger_module /somewhere/passenger-x.x.x/ext/apache2/mod_passenger.so

PassengerRuby /usr/bin/ruby
PassengerRoot /somewhere/passenger/x.x.x
PassengerMaxPoolSize 10

<VirtualHost *:80>
    ServerName www.foo.com
    DocumentRoot /webapps/foo/public
    RailsBaseURI /rails
</VirtualHost> 
```

和

```
<Directory "/webapps/mycook/public">
   Options FollowSymLinks
   AllowOverride None
   Order allow,deny
   Allow from all
</Directory> 
```

# objective-c - NSDictionary 访问值快捷方式

> ID：14362901
> 
> 赞同：13
> 
> 时间：2013-01-16T16:19:55.850
> 
> 标签：objective-c, dictionary, nsdictionary

我不明白这些访问`NSDictionary`值的方式之间的区别

```
[my_dict objectForKey:@"field"]
[my_dict valueForKey:@"field"]
my_dict[@"field"] 
```

有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-16T16:23:35.043

`[my_dict objectForKey:@"field"]`是一种`NSDictionary`方法。它接受任何类型的对象。

`[my_dict valueForKey:@"field"]`是KVC方法。它只接受`NSString`.

`my_dict[@"field"]`与 相同`objectForKey:`。这是添加的新功能。

# labview - 使用 Labview 测量模拟信号的频率和幅度

> ID：14362906
> 
> 赞同：2
> 
> 时间：2013-01-16T16:20:15.620
> 
> 标签：labview

我正在准备一个实验室，在那里我将用光学方法测量音叉的频率和幅度。从我的设置中，我会得到一个与音叉当前位移毫米数相对应的信号。我希望这个信号看起来像一个正弦波，并且幅度会随着时间的推移而减小。

这是我将通过 GPIB 发送到 LabView 的信号。它可能会产生一些噪音。找到信号频率和幅度的最佳方法是什么？

如何在 LabView 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:41:18.113

LabView 中有一些内置示例，请查看**“查找示例”**

帮助-->查找示例-->选择搜索选项卡->在输入关键字文本框中输入“**音调”。**

**基本单音测量.vi**

希望对您有所帮助... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:23:41.173

如果它是一个相当干净的信号，那么只需计算给定时间段内过零的数量并从中计算频率。使用滞后来消除噪声的影响。对于幅度，只需测量前几个峰值的大小。

如果它是一个嘈杂的信号，那么您可能想要使用 FFT 来生成功率谱并从频谱中的最大峰值获得幅度和频率。

# c# - 在 C# 中获取实际日期时间而不是系统日期时间

> ID：14362907
> 
> 赞同：3
> 
> 时间：2013-01-16T16:20:19.230
> 
> 标签：c#, c#-4.0, datetime

我正在构建的应用程序的一部分应仅在特定时间段内访问。

`DateTime`我知道我们可以使用C# 中的属性获取当前系统时间。如果我使用`DateTime`属性，那么用户可以更改他们的系统时间并在他们想要的时候访问应用程序的一部分。

请让我知道如何在 C# 中获取实际的当前时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:24:18.117

您可以查询[NTP](http://en.wikipedia.org/wiki/Network_Time_Protocol)服务器。NTP 服务器为您提供当前时间，并让您非常准确（这就是计算机同步时钟的方式）。

[在此处](https://stackoverflow.com/questions/1193955/how-to-query-an-ntp-server-using-c)查看示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T16:24:58.817

看看这个 NTP 客户端的实现：http: [//dotnet-snippets.com/dns/simple-network-time-ntp-protocol-client-SID571.aspx](http://dotnet-snippets.com/dns/simple-network-time-ntp-protocol-client-SID571.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T16:22:43.650

您需要查询一些 NTP 服务器以获取当前的实际时间，例如 www.pool.ntp.org

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T16:24:33.953

如果系统日期错误，那么您的应用程序必须从其他地方获取正确的日期。这意味着外部资源可能是 Web 服务或其他本地远程服务器。

# jquery - 如何处理 droppable 元素的子元素？

> ID：14362920
> 
> 赞同：2
> 
> 时间：2013-01-16T16:21:27.977
> 
> 标签：jquery, jquery-ui

我有一些具体情况： ![在此处输入图像描述](../Images/912462f28dae17452397c86274207e21.png) 图片显示它非常好。所以我正在制定以下行动：

*   Sortable Div`.sortable()`本身有方法。并且可排序的项目排序良好。
*   DroppableDiv`.droppable()`本身有方法。而且 DragItems 有自己的方法`.draggable()`。

**我的问题**

我想要做的是处理从容器中放置 DragItem 的可排序项目。 ![在此处输入图像描述](../Images/6aa528978f5e8a1a88c4c642f4cbb5be.png)

在此示例中，我将拖放`DragItem 2`到`Sortable Item 2`. 我需要`Sortable Item 2`在`DroppableDiv.droppable({drop : function(event, ui) {}});`.

我已经搜索`event`并`ui`反对，但我还没有找到解决方案。

也很抱歉我没有给 anny fiddle 但我在 jsfiddle/jsBin 中创建工作示例时遇到问题。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:58:04.893

在这种情况下，我编写了自己的函数：

```
function findPosition(position) {
    var container = $("#DroppableDiv");
    var sortableItems = container.find("li");
    var searchedItem = null;

    for (var i = 0; i < sortableItems.length; i++) {
        var item = sortableItems.eq(i);
        var itemPosition = item.position();
        var itemWidth = item.css('width');
        var itemHeight = item.css('length');

        if (position.left < parseFloat(widgetPosition.left) + (parseFloat(widgetWidth) * 0.75) && position.top < parseFloat(widgetPosition.top) + (parseFloat(widgetHeight) * 0.75)) {
            searchedItem = widget;
            break;
        }
    }

    return searchedItem;
} 
```

从以下位置调用：

```
 $("#DroppableDiv").droppable({
        accept: 'li',
        drop: function (event, ui) {
            //here is little trick for check is event comes from drag or sort(only in my case)
            if (ui.draggable.context.childElementCount === 0) {
                var newWidgetPosition = findPosition(ui.position);
            }
        }
    }); 
```

# objective-c - Cocoa 窗口最大尺寸垂直，但不是水平

> ID：14362922
> 
> 赞同：1
> 
> 时间：2013-01-16T16:21:42.460
> 
> 标签：objective-c, xcode, macos, cocoa, interface-builder

我希望我的窗口对可以垂直扩展多少有限制，但对水平扩展没有限制。从我在 Interface Builder 中可以看到，如果您选中该框以设置最大窗口大小，它会自动约束两者。有没有办法解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:40:03.843

我不知道在不指定最大宽度的情况下指定最大高度的方法。但是，您可以指定宽度高达 9,999 的 maxSize。

这本质上是一个无限的宽度，因为[“窗口服务器将窗口大小限制为 10,000”](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html)，至少目前如此。

# windows-phone-7 - 如何在笔记本电脑 Windows 7 上使用网络摄像头在 WP7 模拟器中模拟手机摄像头？

> ID：14362926
> 
> 赞同：-1
> 
> 时间：2013-01-16T16:21:49.993
> 
> 标签：windows-phone-7, webcam

有人知道吗？？？请告诉我怎么做！非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:27:56.137

[MSDN 声明](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402563%28v=vs.105%29.aspx#BKMK_Featuresandlimitationsoftheemulator)模拟器不支持相机、指南针和陀螺仪。你需要一个真实的设备来测试这些功能。

# php - 从 ASP.NET 代码运行本地 PHP 脚本

> ID：14362929
> 
> 赞同：0
> 
> 时间：2013-01-16T16:21:55.423
> 
> 标签：php, asp.net, .net

我需要运行与 ASP.NET 应用程序位于同一文件夹中的特定 PHP 脚本。

当然，我可以通过 WebClient 运行它，例如，使用网站的完整公共 URL，但我认为也许有更合乎逻辑的方式？以某种方式在本地启动它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:35:50.153

是的，您可以在本地运行 php 文件，但如果它不依赖于用户交互或外部浏览器资产，请使用：

```
Process.Start("/path/to/php path/to/the/file.php", "any additional parameters"); 
```

或者

```
System.Diagnostics.Process.Start("/path/to/php path/to/the/file.php", "any additional parameters"); 
```

要不就：

```
system("/path/to/php path/to/the/file.php"); 
```

可以参考[http://php.net/manual/en/features.commandline.php](http://php.net/manual/en/features.commandline.php)

# asp.net - 为 MVC 创建可再发行组件

> ID：14362931
> 
> 赞同：1
> 
> 时间：2013-01-16T16:22:00.323
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

有没有人知道如何为 MVC3/4 网站创建和打包可再发行组件，就像我们在 Web 表单中使用用户控件等一样，其中一个功能及其 UI 和业务逻辑可以模块化、打包和重用在其他各种上下文，如果可能的话，如何在 MVC 中执行此操作而不实际共享其源代码。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:32:49.260

您可以使用 RazorGenerator Visual Studio 扩展 ( [http://razorgenerator.codeplex.com/](http://razorgenerator.codeplex.com/) ) 来执行此操作。该文档非常完整，但您基本上需要将每个视图的自定义工具属性设置为“RazorGenerator”，这会生成一个“[viewname].generated.cs”文件（类似于 WebForms 中的设计器文件）。然后编译成您项目的 DLL，然后您可以在其他项目/上下文中引用该 DLL，并以与使用项目自己的视图相同的方式使用已编译的视图。我在我的一个项目中广泛使用了它，我定义了一整套编辑器和显示模板，并将它们用于我的强类型模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:32:44.703

您可能正在搜索 MVC 视图用户控件

[你可以在这里](http://www.matthidinger.com/archive/2008/02/21/asp.net-mvc-usercontrols-start-to-finish.aspx)找到一个例子，或者一个简单的谷歌搜索 MVC 视图用户控件给你很多例子

# java-me - 如何让 J2Me 聊天服务和 Whatsapp 一样便宜

> ID：14362933
> 
> 赞同：-2
> 
> 时间：2013-01-16T16:22:03.363
> 
> 标签：java-me, chat

我正在尝试使用 J2ME 制作一个 IM 客户端，以便与朋友聊天。目的是学习新东西。我需要了解的是 --- 我如何让它像 Whatsapp 一样便宜？

根据 Wiki，whatsapp 使用 XMPP。这是为什么在 Whatsapp 中发送接收消息非常便宜的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:36:59.683

whatsapp 相对便宜的原因是移动电话提供商一直在向我们收取短信数据的费用。Whatsapp 使用您手机的数据计划来发送和接收数据（通常是统一费率/合理使用），从而绕过手机运营商发送短信的成本。短信本身本质上不是数据密集型的，所以我不明白为什么一种协议会比另一种协议特别便宜。

另请查看[http://sourceforge.net/projects/jabbermixclient/](http://sourceforge.net/projects/jabbermixclient/)这是一个使用 XMPP 协议连接到 jabber 服务器的 j2me 应用程序，也许您可​​以从中学到一些东西。

GL&HF！

# function - 在 IBM、ZOS 上的 DB2 中创建函数（因 THE CLAUSES ARE MUTUALLY EXCLUSIVE 失败）

> ID：14362936
> 
> 赞同：1
> 
> 时间：2013-01-16T16:22:15.040
> 
> 标签：function, db2

我想在 DB2 中创建和部署这个功能，但我卡住了。请你帮助我好吗？

干杯，

我的功能代码：

```
CREATE FUNCTION getID(NameIn VARCHAR(255),versionIn varchar(255))
 RETURNS varchar(12)
 NOT DETERMINISTIC
 LANGUAGE SQL
 MODIFIES SQL DATA
 NO EXTERNAL ACTION
 BEGIN 
  declare IDOut varchar(12);
  set IDOut = (select mID 
    from mIDHolder 
    where mName = NameIn and version = versionIn);
  IF mappingIDOut IS NULL THEN
    set IDOut = Hex(GENERATE_UNIQUE());
    insert into mIDHolder VALUES (IDOut,NameIn,versionIn);
  END IF;
  RETURN IDOut;
 END 
```

这是 mIDHolder 表 DDL

```
CREATE TABLE "V"."MIDHOLDER" (
    "MID" VARCHAR(12) FOR SBCS DATA NOT NULL, 
    "MNAME" VARCHAR(255) FOR SBCS DATA WITH DEFAULT NULL, 
    "VERSION" VARCHAR(255) FOR SBCS DATA WITH DEFAULT NULL
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:55:16.493

您使用的是哪个版本的 DB2 for zOS？

查看版本 10 上[CREATE FUNCTION 的文档](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z9.doc.sqlref/src/tpc/db2z_sql_createfunctionsqlscalar.htm)，它指出`MODIFIES SQL DATA`与`ALLOW PARALLEL`. 并且`ALLOW PARALLEL`是您指定时的默认值`NO EXTERNAL ACTION`。我怀疑这是你的问题。

另一方面，查看9.1 版[CREATE FUNCTION 的文档](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z9.doc.sqlref/src/tpc/db2z_sql_createproceduresqlexternal.htm)，我认为在任何地方都没有`MODIFIES SQL DATA`提到作为选项。事实上，如果你看看他们在它下面所说的话`READS SQL DATA`，强烈建议在函数中根本不允许修改表的语句。

根据我的经验，函数和过程定义非常挑剔，错误消息不透明，并且 DB2 版本之间存在很大差异。

# android - eclipse phonegap android模拟器上的媒体播放器错误

> ID：14362937
> 
> 赞同：0
> 
> 时间：2013-01-16T16:22:21.793
> 
> 标签：android, cordova

当您触摸不同的按钮时，我有一个简单的应用程序会播放不同的声音。

这条线重复了 22 次：

```
<div class=btn7><a onclick="this.firstChild.play()"><audio src="android_asset/www/a.mp3" ></audio>א</a></div> 
```

它在浏览器上运行良好，但模拟的应用程序给了我这些错误：

在加载时，30 或 40 个错误

```
error (1, -2147483648) 
```

尝试播放曲目时 - 错误

```
Attempt to perform seekTo in wrong state: mPlayer=0x0, mCurrentState=1 
Error (-38,0) 
```

如果尝试第二次播放曲目：

```
Attempt to attempt to call getduration without a valid mediaplayer 
```

我如何找到我的问题并解决它？

# jquery - 变量前面的$是什么意思

> ID：14362939
> 
> 赞同：5
> 
> 时间：2013-01-16T16:22:29.277
> 
> 标签：jquery

(this) 前面的 $ 美元符号用于选择当前元素。我对选项前面的 $ 和 thisSelect 有点困惑。它们有什么特殊含义吗？

```
var $options = $(this).children('option');
var $thisSelect = $(this); 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T16:30:02.737

正如大家所说，这只是一个约定。
我使用`$`变量前面的符号来标识该变量包含一个对象。

```
var thisIsANumber = 1024; // No $.. Its a normal variable
var $divElement = $('div#idOfDiv'); // Yes! Its a jQuery Object
var $this = $(this); // Commonly used to reduce the work javascript has to do!

//Now I can use something like this.. (Notice how easy it is to read!)
$divElement.slideUp();

// Or a more `real world` example!
$('#element').click(function(){
    // Hold $(this) inside a variable
    // So we don't have to traverse the dom unnecessarily
    var $this = $(this); // Save it (its a object.. so prepend a `$` )
    $this.hide(); // Use it again
    $this.fadeIn(); // and again
//  ^ Has a dollar sign, because it is a jQuery Object.
}); 
```

你会看到很多插件都使用这个约定（嗯..至少写得很好）。
通过将对象存储在变量中，Javascript 不必每次都通过您的代码来获取元素。相反，我们已经有了元素（在变量内部），所以我们用它来引用它。

如果您`$(this)`在同一个回调函数中多次使用，则应将其存储在变量中.. ( `var $this = $(this);`)。否则，每次您使用它时，javascript 都必须每次都从您的源代码中获取元素（这会大大降低性能！（尤其是对于在慢/旧计算机上浏览的人！）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T16:23:42.707

它是对 jQuery 包装对象的常见引用。它使阅读代码更容易知道哪些变量是 jQuery 包装的。

```
//Item has been "cached" for later use in the script as a jQuery object.
var $item = $(this); 
```

**其他常见做法：**

如果变量是私有的，则使用如下划线：

```
(function(){
     var _foo = "bar";
})() 
```

如果它是公开的，我们不使用下划线：

```
var foo = "bar" 
```

如果它是一个 jQuery 选择器，我们使用*$*：

```
var $foo = $('bar');    
//then you can access it like this
$foo.attr('id') 
```

这只是一个编码约定，它允许您在代码的后面快速引用变量的类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T16:23:27.323

美元符号可以帮助指示您的变量何时包含 jQuery 对象而不是任何其他类型。是否要在 var 前面包含 $ 符号完全取决于编码人员，它只是作为提醒。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T16:23:30.800

没有任何意义。这些只是普通字符，就像`_`或`π`（如果你不掌握你的工具链，这个不安全）你可以放入你的变量名。

请参阅[此处有关有效 javascript 名称的规范](http://www.ecma-international.org/ecma-262/5.1/#sec-7.6)。特别是这个：

> 本标准规定了特定的字符添加：美元符号 ($) 和下划线 (_) 允许在 IdentifierName 的任何位置。

您可能也[对此相关答案](https://stackoverflow.com/questions/1661197/valid-characters-for-javascript-variable-names)感兴趣。

通常以`$`包含 jQuery 集的变量作为前缀。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T16:24:46.870

这些变量名前的 $ 符号就像变量名中的其他字符一样。它没有任何意义。您可以使用此约定来确定您在此变量中有 jQuery 对象。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-16T16:25:31.927

有些人习惯于`$`在 var 名称前面添加约定，以知道它的值是一个 jQuery 对象。

这样我就知道以下变量有不同的结果。

```
var $this = $(this);
var self = this; 
```

# jquery - 为 jmapping ajax 调用加载图像

> ID：14362940
> 
> 赞同：0
> 
> 时间：2013-01-16T16:22:29.520
> 
> 标签：jquery, ajax

我一直在尝试使用 jquery jmapping 插件在 ajax 调用期间显示加载图像，以更新地图上的类别。我更像一个 PHP 人而不是 JS 人，所以这就是我想出的（我能想到的）......任何帮助将不胜感激！

```
$('#map-Shopping').click(function(){
    $('#map_canvas').empty().html('<img src="<?php bloginfo('template_directory'); ?>/images/ajax-loader.gif" alt="Loading..." />');
    $('#map-side-bar').load('<?php the_permalink(); ?>?ajax=yes&map=Shopping #map-Shopping', function() {
        $('#map_canvas').jMapping('update');
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:47:37.017

我想到了！

```
$('#map-Restaurants').click(function(){
    $('#loading_img').show();
    $('#map-side-bar').load('<?php the_permalink(); ?>?ajax=yes&map=Restaurants #map-Restaurants', function() {
        $('#map_canvas').jMapping('update');
        $('#loading_img').hide();
    });
}); 
```

# ruby - bundle exec rake test 什么都不做

> ID：14362944
> 
> 赞同：5
> 
> 时间：2013-01-16T16:22:42.443
> 
> 标签：ruby, tdd, bundler, rake-task

我试图用 TDD 让我的头脑“变脏”，由于某种原因，当我`bundle exec rake test`在命令行上运行时，什么也没有发生。

这是我的`RakeFile`：

```
require 'rake/testtask'

Rake::TestTask.new do |test|
  test.libs << 'test'
end

desc "Run Tests"
task :default => :test 
```

这是我的测试文件：

```
require 'test/unit'

class TestMygem < Test::Unit::TestCase
  def test_silly_example
    assert_equal 2+2, 5
  end
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T16:29:20.010

我忘了将此行添加到我的`RakeFile`

```
test.test_files = FileList['tests/test_*.rb'] 
```

所以，总而言之，这是我的最终`RakeFile`

```
require 'rake/testtask'

Rake::TestTask.new(:test) do |test|
  test.libs << 'test'
  test.test_files = FileList['tests/test_*.rb']
end

desc "Run Tests"
task :default => :test 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-09T21:51:46.163

从 Rails 3.2.20 开始，以下是可以接受的

```
require 'rake/testtask'

Rake::TestTask.new(:test) do |t|
  t.libs << 'test'
  t.pattern = 'test/_test*.rb'
  t.verbose = false # or true
end

desc "Run Tests"
task :default => :test 
```

# ios - 捕获所有异常，以便我可以报告它们

> ID：14362947
> 
> 赞同：0
> 
> 时间：2013-01-16T16:22:45.750
> 
> 标签：ios, xcode, appdelegate

我希望能够在我的应用程序委托中设置一个全局函数，这样我就可以记录所有未捕获的异常。

有没有办法可以捕获所有未捕获的异常，以便将它们记录到文件中？我已经创建了文件，所以我只需要和方法来调用未处理异常的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T16:41:49.807

虽然有一些快速的解决方案（`NSUncaughtExceptionHandler`等等），但处理您可能想要处理的所有情况都非常复杂。例如，我假设您真的想捕获由于信号 (SEGV) 而导致的崩溃，而不仅仅是由于 ObjC 异常而导致的崩溃。

IMO，这不是您想从头开始构建的东西。使用为它设计的框架。我最喜欢的解决这个问题的框架是[PLCrashReporter](http://code.google.com/p/plcrashreporter/)和[QuincyKit](http://quincykit.net/)（使用 PLCrashReporter）。

# functional-programming - 为什么这个元组有 2 个元素？

> ID：14362953
> 
> 赞同：0
> 
> 时间：2013-01-16T16:23:16.383
> 
> 标签：functional-programming, ocaml

**let p = let x = 1 in x + 1, let y = 2 in y + 1, 4**

由于`comma ,`具有最低优先级，我将图像`p`具有`3`元素：`(2, 3, 4)`.

但实际上，`p`只有`2`元素：`(2, (3, 4))`

**为什么？**

为什么最后一个`,`属于`let y`表达式，而不是它之外？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:42:00.250

我希望`let...in...`有以下语法

> **让** *绑定*= *表达式* **中的** *表达式*

并且该块尽可能向右移动。

在您的示例中，OCaml 解析器期望

```
let y = 2 in y + 1, 4 
```

成为一个表达式并将其解析为`(3, 4)`成功。

与显式括号的示例等效的是

```
let p = (let x = 1 in x + 1, (let y = 2 in y + 1, 4)) 
```

如果你想返回最终结果，你应该在适当的地方`(2, 3, 4)`放一个括号来停止块：`let...in...`

```
let p = let x = 1 in x + 1, (let y = 2 in y + 1), 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:26:24.730

尝试在多行上写出，并使用缩进来显示关系：

```
let p = 
    let x = 1 in x + 1, 
        let y = 2 in y + 1, 4 
```

所以你可以看到一个人如何让“属于”另一个人。

(2, (3,4)) 正是我所期望的。

# c++ - Microsoft Visual C++ 2008 Express Edition：我可以在我创建的每个 .cpp 文件中插入默认代码吗？

> ID：14362954
> 
> 赞同：3
> 
> 时间：2013-01-16T16:23:21.540
> 
> 标签：c++, visual-studio-2008, editor

如果我有例如此代码：

```
#include <iostream>
#include <cstdio>
#include <fstream>
#include <string> 
```

当我使用 Visual C++ 2008 创建一个空项目时，如何将此代码插入到我在此项目中创建的每个 .cpp 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:26:46.370

您可以创建一个项目模板，该模板是一个包含所有必要内容的 .cpp 文件。然后，当您将文件添加到项目时，您将添加该项目而不是空的 .cpp 文件。

项目模板位于此处：

```
%USER%\Documents\Visual Studio 2008\Templates\ItemTemplates 
```

[创建项目和项目模板的指南。](http://msdn.microsoft.com/en-us/library/vstudio/s365byhx%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:28:04.323

然后在项目的属性上`Configuration Properties -> C/C++ -> Advanced`，你会找到一个字段`Force Includes`。只需在那里写一个标题的名称，该标题又包含包含。

# android - 带有壁纸标志的 moveTaskToBack 导致果冻豆上出现黑色闪烁

> ID：14362963
> 
> 赞同：0
> 
> 时间：2013-01-16T16:23:39.113
> 
> 标签：android, android-4.2-jelly-bean

我有一个设置为显示设备壁纸的活动，即：在**AndroidManifest.xml**中：

```
<activity
    ...
    android:theme="@android:style/Theme.Translucent.NoTitleBar"
> 
```

在活动中`OnCreate`：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WALLPAPER) 
```

当我打电话

```
moveTaskToBack(true); 
```

活动按预期消失，到目前为止一切顺利。
但是，当在 Jelly Bean 上运行它时，例如运行 4.1.1 的 Galaxy S3，在 moveTaskToBack 之后的转换过程中会出现非常明显的黑色闪烁。仅当 Home 活动位于我的活动下方时才会发生闪烁。

正如我所描述的那样，通过一个简单的活动设置，这个问题是完全可重现的。

如果我改用，则不会发生闪烁`finish()`，但不能选择使用完成。它也不会发生在运行 ICS 的 S3 上。

我怀疑这可能与壁纸的一些刷新有关，或者可能与 Project Butter 的变化有关，但我没有想法。

如何在仍然能够看到设备壁纸的同时消除这种闪烁，并且在我将其移出视野时不会破坏活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:19:37.403

我刚刚遇到了一个与 moveTaskToBack(true) 相关的类似问题。这个 API 的行为在 JellyBean 和 ICS 上明显不同，但是我找不到任何有帮助的文档。

# c - 如何在从多个目录/文件编译内核模块时创建新目录并将 .o 文件移动到其中

> ID：14362969
> 
> 赞同：1
> 
> 时间：2013-01-16T16:23:53.313
> 
> 标签：c, linux, module, makefile, kernel

我正在尝试从多个目录中的文件构建内核模块。我想将生成的 .o 文件放在与每个源目录相对应的新目录中。

例如，如果我的来源是 A/a1.c 、 A/a2.c 、 B/bc ；我希望 .o 文件转到 A/new-dir/a1.o A/new-dir/a2.o B/new-dir/bo 等等。

我当前的 Makefile 是这样的：

```
obj-m += foo.o

lavya-objs := lavya_module1.o  lavya_module2.o

lavya-objs += $(A_DIR)/a1.o $(A_DIR)/a2.o $(B_DIR)/b.o 

all: 

        make -C $KERNEL_PATH  M=$(PWD) modules 
```

它会在与对应的 .c 文件相同的目录中创建 .o 文件。是否可以修改 Makefile 以在每个源目录中插入一个新目录并将 .o 文件移到那里？怎么做到呢？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T03:08:03.720

主内核 Makefile 讲述了两种将输出放置在别处的方法（不像你问的那样，但它可能很有用）。查找 KBUILD_OUTPUT（可以设置为环境变量或设置为 O=where/to/put to make）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-22T10:10:56.750

Yes you can do it in makefile like below

```
obj-m += foo.o

lavya-objs := lavya_module1.o  lavya_module2.o

lavya-objs += $(A_DIR)/a1.o $(A_DIR)/a2.o $(B_DIR)/b.o 

all: 
    make -C $KERNEL_PATH  M=$(PWD) modules
    mkdir -p $(A_DIR)/objs && mv $(A_DIR)/*.o $(A_DIR)/objs/
    mkdir -p $(B_DIR)/objs && mv $(B_DIR)/*.o $(B_DIR)/objs/ 
```

# c# - 保存 XML 文档 Windows RT 开发

> ID：14362970
> 
> 赞同：0
> 
> 时间：2013-01-16T16:23:54.437
> 
> 标签：c#, windows-rt

到目前为止，操作 XML（读/写）比标准窗口更具挑战性。我正在尝试打开配置文件进行编辑，进行更改，然后将文件再次保存到磁盘。

我可以`StorageFile`将文件作为. 目前我有`XDocument``XDocument`

```
 StorageFile file = await installedLocation.GetFileAsync(fileNameAndPath);
            var data = await FileIO.ReadTextAsync(file);
            string actualXML = data.ToString();
            XDocument doc = XDocument.Parse(actualXML);
            // do work
            //save
            MemoryStream ms = new MemoryStream();
            XmlWriter w = XmlWriter.Create(ms);
            doc.WriteTo(w); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T04:17:02.863

如果它向路径抛出访问被拒绝，请检查或尝试在您的应用清单中授予相应文件夹的权限。

# java - 多个下载异步

> ID：14362972
> 
> 赞同：2
> 
> 时间：2013-01-16T16:23:57.813
> 
> 标签：java, android, multithreading, android-asynctask

在java中，我想一次为我的imageview下载多个图像。我发现这段代码确实如此，但它只下载第一个图像。我认为这与 doInBackground 中的第一行有关。如何调整此代码，使其循环 imageViews 并下载 imageViews 的每个图像。

```
package com.denederlandsewateren.daos;

import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.net.URLConnection;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.util.Log;
import android.widget.ImageView;

public class DownloadImageTaskDAO extends AsyncTask<ImageView, Void, Bitmap> {

    ImageView imageView = null;

    @Override
    protected Bitmap doInBackground(ImageView... imageViews) {
        this.imageView = imageViews[0];
        return download_Image((String)imageView.getTag());
    }

    @Override
    protected void onPostExecute(Bitmap result) {
        imageView.setImageBitmap(result);
    }

    private Bitmap download_Image(String url) {
        //---------------------------------------------------
        Bitmap bm = null;
        try {
            URL aURL = new URL(url);
            URLConnection conn = aURL.openConnection();
            conn.connect();
            InputStream is = conn.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);
            bm = BitmapFactory.decodeStream(bis);
            bis.close();
            is.close();
        } catch (IOException e) {
            Log.e("Hub","Error getting the image from server : " + e.getMessage().toString());
        } 
        return bm;
        //---------------------------------------------------
    }

} 
```

从这里调用：

```
public void setImages(String url1, String url2) {
        image1.setTag(url1);
        image2.setTag(url2);
        DownloadImageTaskDAO imageDAO = new DownloadImageTaskDAO();
        imageDAO.execute(image1, image2);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T17:00:38.393

```
@Override
protected Bitmap doInBackground(ImageView... imageViews) {
    this.imageView = imageViews[0];
    return download_Image((String)imageView.getTag());
} 
```

您只处理发送到 AsyncTask 的第一个参数。使用该参数`ImageView...`，您可以发送一个、两个、N 个元素或数组。循环遍历参数并处理每个参数。

您可以使用 return from `doInBackground`、in`onPostExecute`和我个人尝试尽可能多地利用它来进行[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)。

总的来说，我建议您阅读 Android Developers 上的[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)参考，以更好地了解 AsyncTasks。

我确实重写了你的代码，下面理论上应该可以工作（它没有经过测试）。

```
public class DownloadImageTaskDAO extends AsyncTask<ImageView, Void, ArrayList<DownloadImageTaskDAO.Container>> {

    @Override
    protected ArrayList<Container> doInBackground(ImageView... imageViews) {
         ArrayList<Container> results = new ArrayList<Container>(imageViews.length);

         for (ImageView imageView : imageViews) {
             Container tmp = new Container();
             tmp.holder = imageView;
             tmp.image = download_Image(imageView.getTag().toString());
             results.add(tmp);
         }

         return results;
    }

    @Override
    protected void onPostExecute(ArrayList<Container> result) {
        for (Container container : result) {
            container.holder.setImageBitmap(container.image);
        }
    }

    private Bitmap download_Image(String url) {
        ....
    }

    class Container {
        ImageView holder;
        Bitmap image;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:53:53.050

不要使用 AsyncTask，而是考虑使用带有 ResultReceiver 的 IntentService 作为额外的服务传递。IntentService 在负载下表现更好（比如下载多个图像），因为它们使用 HandlerThread 而不是使用 ThreadPoolExecutor 的 AsyncTask。

[意向服务](https://developer.android.com/reference/android/app/IntentService.html)

[结果接收器](https://developer.android.com/reference/android/os/ResultReceiver.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:49:27.740

我建议这种方式来实现你的代码

希望它对您`Multiple images`通过单个`AsyncTask`呼叫下载有所帮助。

**异步任务调用方法**

```
public void setImages(String[] urls)
{
   DownloadImageTaskDAO imageDAO = new DownloadImageTaskDAO();

   if(int i= 0; i< urls.lenght();i++)
   {
        image.setTag(urls[i]);
        imageDAO.execute(image).get();
    }
} 
```

**下载ImageTaskDAO 类：**

```
public class DownloadImageTaskDAO extends AsyncTask<ImageView, Void, Bitmap> {

    ImageView imageView = null;

    @Override
    protected Bitmap doInBackground(ImageView imageView) {
        this.imageView = imageView;
        return download_Image((String)imageView.getTag());
    }

    @Override
    protected void onPostExecute(Bitmap result) {
        imageView.setImageBitmap(result);
    }

    private Bitmap download_Image(String url) {
        //---------------------------------------------------
        Bitmap bm = null;
        try {
            URL aURL = new URL(url);
            URLConnection conn = aURL.openConnection();
            conn.connect();
            InputStream is = conn.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);
            bm = BitmapFactory.decodeStream(bis);
            bis.close();
            is.close();
        } catch (IOException e) {
            Log.e("Hub","Error getting the image from server : " + e.getMessage().toString());
        } 
        return bm;
        //---------------------------------------------------
    }

} 
```

# android - android设置日期的最大值< API级别11

> ID：14362978
> 
> 赞同：0
> 
> 时间：2013-01-16T16:24:20.640
> 
> 标签：android, api, date, dialog, datepicker

在我的应用程序中`editText`，单击它会调用`openDatePicker()`函数。

```
protected void openDatePicker() {
    DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {
        public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
            GregorianCalendar calendar = new GregorianCalendar();
            calendar.set(Calendar.YEAR, year);
            calendar.set(Calendar.MONTH, monthOfYear);
            calendar.set(Calendar.DATE, dayOfMonth);
            Date birthDate = calendar.getTime();
            setDate(birthDate);
        }

    };
    DatePickerDialog dialog = prepareDatePickerDialg(mDateSetListener);
    dialog.show();
} 
```

当用户选择日期时，我必须设置最大值。那么有人可以给我一些建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:09:32.890

根据之前的评论：

如果您的目标是 API 级别 11 及更高级别，则可以`DatePicker`从对话框中获取实例并调用`setMaxDate(long)`它。对于较旧的设备，另一种方法是使用向后移植的版本，[例如这个](https://github.com/SimonVT/android-datepicker)（尽管它也有一些缺点）。

# python - 理解他人代码中的 get() 行为

> ID：14362981
> 
> 赞同：-2
> 
> 时间：2013-01-16T16:24:25.277
> 
> 标签：python

我正在查看[EPGReader 的这个 python 代码，](https://bitbucket.org/mfabrik/epgreader/src/a60a0799b4cc/epg_stream_decoder.py)并试图了解它是如何`reader = self.PIDHandlers.get(headers.PID, None)`工作的。`get`回报是什么？

因此，`PIDHandlers`is`dict`由`TSSectionReader`类组成，并且调用`SDTSectionContainer`类。我是否正确理解了这一点？

我的目标是添加代码来处理[PAT 表](http://en.wikipedia.org/wiki/MPEG_transport_stream)，我强迫自己理解别人的代码，而不是抄写自己的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:26:54.457

`PIDHandlers`是一个`dict`，是的。如果在 中，则`get`调用返回，否则。`PIDHandlers[headers.PID]``headers.PID``PIDHandlers.keys()``None`

`get`只是一个`dict`不抛出的访问`KeyError`，而是返回给定的默认值。

# c# - 如何启动全屏应用程序？

> ID：14362982
> 
> 赞同：2
> 
> 时间：2013-01-16T16:24:26.187
> 
> 标签：c#, wpf, xaml

我找到了一些代码，我想知道是否有人可以解释它是如何工作的。

```
<Window x:Class="FullScreenDemo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
        xmlns:Einstein="clr-namespace:FullScreenDemo"
        Title="FullScreenBehavior Demo" Width="640" Height="480"
        Einstein:FullScreenBehavior.IsFullScreen="{Binding Path=IsChecked, ElementName=FullScreenButton, Mode=TwoWay}">

    <i:Interaction.Behaviors>
        <Einstein:FullScreenBehavior
            FullScreenOnDoubleClick="{Binding IsChecked, ElementName=FullOnDoubleClick}"
            FullScreenOnMaximize="{Binding IsChecked, ElementName=FullOnMaximize}"
            RestoreOnEscape="{Binding IsChecked, ElementName=ExitOnEscape}"/>
    </i:Interaction.Behaviors>

    <Viewbox Stretch="Uniform">

        <Grid Width="640" Height="480">

            <StackPanel Margin="20">

                <TextBlock Text="Full Screen Demo" FontSize="32" />

                <TextBlock TextWrapping="Wrap">

                    <LineBreak />
                    <LineBreak />

                    <Run>
                        The FullScreenBehavior makes it easy to create a WPF window that can &quot;go full screen&quot;.
                        By default, the full screen setting can only be changed programmatically. Try pressing the 
                        ToggleButton in the upper right hand corner which is Two-Way bound to the IsFullScreen
                        property of the Window.
                    </Run>

                    <LineBreak />
                    <LineBreak />

                    <Run>
                        This demo uses a ViewBox to scale the content with the Window but that is not required.
                        You can use whatever layout strategy you want.
                    </Run>

                    <LineBreak />
                    <LineBreak />

                    <Run>
                        There are properties that can be set that can be used to enable automatic full screen behavior
                        in response to common user actions. Play around with the options below which control how the
                        Window reacts to user gestures.
                    </Run>

                    <LineBreak />

                </TextBlock>

                <CheckBox x:Name="FullOnMaximize" Margin="5" Content="Maximizing enters full screen"/>
                <CheckBox x:Name="FullOnDoubleClick" Margin="5" Content="Double clicking enters/exits full screen" />
                <CheckBox x:Name="ExitOnEscape" Margin="5" Content="Pressing escape exits full screen"/>

            </StackPanel>

            <ToggleButton x:Name="FullScreenButton" Content="Full Screen"
                          Margin="8" VerticalAlignment="Top" HorizontalAlignment="Right"
                          Height="50" Width="120" Checked="FullScreenButton_Checked"/>

        </Grid>

    </Viewbox>

</Window> 
```

我将代码更新为完整的 XAML 代码。我最初发布了相关部分，但我根据要求发布了整个代码。

我看到没有制作 window 的“代码” `FullScreen`。我的问题是如何使窗口“全屏”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:27:23.910

> 我找到了一些代码，我想知道是否有人可以解释它是如何工作的

没有人可以，因为你错过了 Einstein::FullScreenBehavior 的行为

行为是自定义 XAML 元素，您错过了代码 - 您只有集成到页面中。

它不是关于开始的，它做了一些按钮和一些事件连接，没有说窗口开始全屏，除非检查了 FullscrrenButton_Checked。

但要了解它是如何工作的，您需要向我们提供行为代码。

# javascript - 在列中重新父图像

> ID：14362985
> 
> 赞同：2
> 
> 时间：2013-01-16T16:24:32.040
> 
> 标签：javascript, jquery, dom-traversal

*几天后，没有找到任何可以指导我找到解决方案的信息，我希望各位高手能提供帮助。该解决方案非常简单，但我不确定要搜索什么。*

**情况：**

我正在为图像创建一个列布局，该布局主要使用 javascript 进行布局，但我需要它在需要多少列方面具有灵活性 - 例如可以从 1 到 20。

*到目前为止，我的想法是获取位于我的包装器中的所有图像，然后说如果我有 9 张图像并且我有 3 列然后遍历所有图像，但分配一个与列相对应的类（从 1 到 3）和在我动态创建的新列（div）下重新定义它们。*

**HTML 标记如下，包含 9 个示例图像：**

```
<div id="imgWrapper">
    <img src="http://placekitten.com/301/300" class="flexImg">
    <img src="http://placekitten.com/302/300" class="flexImg">
    <img src="http://placekitten.com/303/300" class="flexImg">
    <img src="http://placekitten.com/304/300" class="flexImg">
    <img src="http://placekitten.com/305/300" class="flexImg">
    <img src="http://placekitten.com/306/300" class="flexImg">
    <img src="http://placekitten.com/307/300" class="flexImg">
    <img src="http://placekitten.com/308/300" class="flexImg">
    <img src="http://placekitten.com/309/300" class="flexImg">
</div> 
```

**CSS是：**

```
#imgWrapper{
    /*No styles for the imgWrapper as it's just for selecting so far*/
}
img.flexImg{    
    width: 100% ;
    height: auto ;
    float: left;
    position: relative; 
}
.column{
    float: left;
    position: relative;
    /* the width is img-wrapper (which is 100%) devided by how many columns */
    width: 33.3% ;
    height: auto;
} 
```

案子：

1.  假设我想要 3 列然后我会将其设置为我的 js 中的变量。
2.  然后我想创建 3 个名为 flexi-column-01、flexi-column-02 和 flexi-column-03。
3.  然后我想获取其中包含的所有图像`<div id="imgWrapper">`并将第一个图像添加到第一个 div 然后将第二个图像添加到第二个 div 和第三个 img 到第三个 div**然后**我想将第四个图像添加到第一个 div 等等.. .

我尝试了各种方法，将所有图像添加`<div id="imgWrapper">`到数组中，然后对其进行切片并将它们添加到新的 div 中，但没有运气。

到目前为止，我想出的最好的是以下内容，但在我可以拥有多少列方面并不灵活。

```
$(document).ready(
  function flexiColumns () {
    var wrapper     = $('div#imgWrapper'),
        selSize     = wrapper.children('img').length,
        colCount    = 3,
        colSize     = selSize / colCount,
        colEntries  = $(wrapper).find('img').addClass('flexi-img-selector');

        colOne      = $(wrapper).append('<div class="columnOne" />'),
        colTwo      = $(wrapper).append('<div class="columnTwo" />'),
        colThree    = $(wrapper).append('<div class="columnThree" />'),

        firstCol    = $('img.flexi-img-selector:nth-child(3n+1)').addClass('first'),
        secondCol   = $('img.flexi-img-selector:nth-child(3n+2)').addClass('second'),
        thirdCol    = $('img.flexi-img-selector:nth-child(3n+3)').addClass('third');

         // CREATE THE BLOCK COLUMNS
        for (var i = 0; i <  colCount; i++){
         $(wrapper).append('<div class="flexi-column-0' + i + '" />')

        }

   $(firstCol).appendTo($('.columnOne'));
   $(secondCol).appendTo($('.columnTwo'));  
   $(thirdCol).appendTo($('.columnThree'));
  } // END FUNCTION FLEXICOLUMN
); // END DOCUMENT READY 
```

如果有帮助的话，我已经整理了我到目前为止所拥有的 jsfiddle：http: [//jsfiddle.net/Djk9e/](http://jsfiddle.net/Djk9e/)

任何形式的关于我如何解决这个问题的指导或建议都非常受欢迎。如果您需要更多信息或示例，请告诉我。

提前谢谢你， Sofus

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:06:01.560

只有一个可能的解决方案的快速草稿：

```
for (var i = 0; i <  colCount; i++){
      $(wrapper).append('<div class="column" id="col_'+i+'" style="width:' + colSize + '%;" />');

      var images = $('img').splice(0, Math.round(selSize/colCount));
      $(images).appendTo($('#col_'+i));
    } 
```

[http://jsfiddle.net/Djk9e/15/](http://jsfiddle.net/Djk9e/15/)

列宽是动态计算的——不需要带有标记的静态 css 选择器。

它背后的想法：切片图像数组并将其附加到其包装列（仅当列数和图像配对时才匹配！）。之后选择剩余的图像并通过其索引将它们分配给列。

这不是完整的解决方案，而且非常老套——不要在生产环境中使用它；）

# java - 如何使用java在应用程序引擎中使用文件名将文件存储为blob？

> ID：14362990
> 
> 赞同：1
> 
> 时间：2013-01-16T16:24:39.630
> 
> 标签：java, google-app-engine, blob

我已经上传了文件……现在我需要使用文件名在 blob 中搜索和下载文件……我可以实现以下代码来检索文件名……

BlobInfo blobInfo = blobInfoFactory.loadBlobInfo(blobKey)

字符串 blobFilename = blobInfo.getFilename();

现在使用这个下载文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:29:06.160

只需遵循 App Engine 文档中的本指南：[https ://developers.google.com/appengine/docs/java/blobstore/overview#Serving_a_Blob](https://developers.google.com/appengine/docs/java/blobstore/overview#Serving_a_Blob)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:52:18.830

您需要设置内容类型

```
response.setContentLength(new Long(blobInfo.getSize()).intValue()); 
response.setHeader("content-type", blobInfo.getContentType()); 
response.setHeader("content-disposition", "attachment; filename=" + 
blobInfo.getFilename()); 
blobstoreService.serve(blobKey, response); 
```

# php - PHP/CodeIgniter 没有来自 jQuery Ajax 调用的 POST 响应

> ID：14362995
> 
> 赞同：0
> 
> 时间：2013-01-16T16:24:46.777
> 
> 标签：php, jquery, ajax, codeigniter

我有一个 jQuery Ajax Post 请求，该请求进入 Code Igniter 函数，之后 CodeIgniter 发送一封电子邮件，其中包含 post 请求中的详细信息。

# JavaScript 代码：

```
$.ajax({
    type: 'POST',
    url: 'http://localhost/admin/index.php/callback',
    data: { 'name': inputName, 'phone': inputNumber},
    success: function() {
        onSuccess();
},
async:true
}); 
```

# PHP/CodeIgniter 函数

```
public function email() {
    if (!isset($_POST)) {
         //exit('No direct script access allowed');
    } else {
    //Send Email
    }
} 
```

# 问题见编辑

~~CodeIgniter 不会对调用发送响应。~~

~~Post 请求已收到并在电子邮件部分正常运行时运行，我收到了包含 post 请求中发送的详细信息的电子邮件，但 onSuccess(); 从未被调用（并且没有通过 Chromes 网络观察程序记录任何响应，它只是显示“待处理”）~~

这都是从我的本地机器上运行的

此请求是从主 index.php 完成的，但 CodeIgniter 仅安装在 /admin 目录中

谢谢你的时间！

编辑：将 ajax url 更改为带有 localhost 的完整 url，因为它是在 CI $config 中设置的

编辑：CI 确实会发送回复，这需要 2-3 分钟，这也是发送电子邮件所需的时间，那时我无法访问该网站的任何其他页面。我开始认为这可能是我的本地机器/Apache 设置的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:29:56.703

```
var base_url = '<?php echo base_url();?>';
$.ajax({
    type: "POST",
    url: base_url+"index.php/my_class/email",
    data: { name: inputName, phone: inputNumber},
    success: function() {
        // success actions....
    }
}); 
```

控制器

```
class My_class extends CI_Controller{
    public function email() {
        $name = $this->input->post('name');
        if (!$name) {
        //exit('No direct script access allowed');
        } else {
        //Send Email
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:48:29.490

试试下面的代码：

```
var url = '<?php echo base_url();?>index.php/my_class/email';

$.post(url, {
    data: { name: inputName, phone: inputNumber},
},
function(data_returned){
    alert(data_returned);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:03:06.370

你应该你`empty`而不是`!isset`，因为`isset($_POST)`总是`TRUE`，我认为是这样的：

```
public function email() {
    if (empty($_POST)) {
         //exit('No direct script access allowed');
    } else {
    //Send Email
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T12:52:13.240

问题在于我的 sendmail 设置和 PHP 挂起/重试，直到它得到 sendmail 的响应。

# c# - Webforms：如果 url 没有 .aspx 扩展名，则未捕获 404 错误

> ID：14362998
> 
> 赞同：0
> 
> 时间：2013-01-16T16:24:51.267
> 
> 标签：c#, error-handling, webforms

我有一个 webforms 项目，我想在 Global.asax 中记录所有 404 错误，所以我把这段代码放在那里：

```
void Application_Error(object sender, EventArgs e)
{
    var exception = Server.GetLastError();
    var httpException = exception as HttpException;
    if (httpException == null)
    {
        Log.Error(string.Format("Unkown error:", Request.Url.AbsoluteUri), exception);
    }
    else if (httpException.GetHttpCode() == 404)
    {
        Log.Warn(string.Format("RequestError 404: {0}", HttpContext.Current.Request.Url.AbsoluteUri));
    }
    else
    {
        Log.Error(string.Format("RequestError {0}: {2}\r\n{1}", httpException.GetHttpCode(), Server.UrlDecode(Request.Headers.ToString()), HttpContext.Current.Request.Url.AbsoluteUri), httpException);
    }
} 
```

这适用于所有扩展名为“.aspx”的请求。没有它或使用另一个扩展`Application_Error`名将被绕过。

这是我的`web.config`

```
<customErrors defaultRedirect="/500.aspx" mode="Off">
  <error statusCode="404" redirect="/404.aspx"/>
  <error statusCode="500" redirect="/500.aspx"/>
</customErrors> 
```

任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T16:28:21.693

Global.asax 文件中定义的错误处理程序将仅捕获在 ASP.NET 运行时处理请求期间发生的错误。例如，如果用户请求在您的应用程序中没有出现的 .aspx 文件，它将捕获错误。但是，如果用户请求不存在的 .htm 文件，它不会捕获错误。对于非 ASP.NET 错误，您可以在 Internet 信息服务 (IIS) 中创建自定义处理程序。服务器级错误也不会调用自定义处理程序。

This is extract from [http://msdn.microsoft.com/en-us/library/24395wz3(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/24395wz3(v=vs.100).aspx)

# java - 在不同文件夹中制作文件的多个副本时的异常处理

> ID：14362999
> 
> 赞同：-1
> 
> 时间：2013-01-16T16:24:52.653
> 
> 标签：java

我正在将一个文件复制到多个文件夹中，比如说我有一个`abc.htm`需要复制的文件`c:/test1`，`c:/test2`...。`c:/test10`使用 Java 程序。我需要确保在所有 10 个文件夹中复制成功，或者如果在文件之间失败，则应从所有文件夹中删除。每次我制作副本时，我都会返回路径，现在我正在寻求帮助来设置复制的重试次数，即使重试失败，所有副本也`abc.htm`应该从它被复制到的文件夹中删除。任何人都可以提供任何指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:30:34.390

完成所有文件的写入后进行错误检查。像这样写它们：

```
Write file 1;
flush stream;
Write file 2;
flush stream;
...
...
write file 10;
flush stream; 
```

将所有路径作为字符串存储在数组中，并执行以下操作：

```
for (int i=0; i<paths.length; i++)
    if (!(new File(paths[i]).exists()))
        for (int j=0; j<paths.length; j++)
            new File(paths[j]).delete(); 
```

好久没用java了，但是`exists()`肯定会检查文件是否存在，如果没有文件方法`destroy()`也可以

`Runtime.getRuntime().exec("rm " + paths[j]);`

如果其中一个文件不存在，这样的检查将导致删除所有文件。希望这可以帮助。

- 编辑

考尔斯是对的​​，你真的应该开始接受答案。没有人会回答你的问题。