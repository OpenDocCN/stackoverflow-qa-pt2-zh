# StackOverflow 问答 13513000-13513999

# java-native-interface - 哪个本机函数导致 JNI 代码中的 EXCEPTION_ACCESS_VIOLATION？

> ID：13513000
> 
> 赞同：10
> 
> 时间：2012-11-22T12:42:45.463
> 
> 标签：java-native-interface, windbg, libgdx, bullet, dumpbin

我正在尝试使用由 libgdx Android Java 开发框架[（gdx-bullet）](https://github.com/libgdx/libgdx/tree/master/extensions/gdx-bullet)包装的子弹物理库，并在一段时间的随机工作后出现 JVM 崩溃或“称为纯虚拟方法”的崩溃。

其中一些生成 hs_err_pidXXXX.log 文件，这些文件通常包含：

```
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0aa0c217, pid=7956, tid=7440
#
# JRE version: 7.0_05-b05
# Java VM: Java HotSpot(TM) Client VM (23.1-b03 mixed mode, sharing windows-x86 )
# Problematic frame:
# C  [gdx-bullet.dll+0x1c217]

Current thread (0x04af2800):  JavaThread "LWJGL Application" [_thread_in_native, id=7440, stack(0x04d70000,0x04dc0000)]

siginfo: ExceptionCode=0xc0000005, reading address 0x6572fc0f

Registers:
EAX=0x0073f370, EBX=0x0073f480, ECX=0x0073f484, EDX=0x6572fc07
ESP=0x04dbf3c0, EBP=0x04dbf400, ESI=0x0073f120, EDI=0x04dbf3f0
EIP=0x0aa0c217, EFLAGS=0x00010206

Instructions: (pc=0x0aa0c217)
0x0aa0c217:   ff 52 08 f3 0f 10 05 0c f0 ba 0a f3 0f 10 4c 24

Register to memory mapping:
EDX=0x6572fc07 is an unknown value

Stack: [0x04d70000,0x04dc0000],  sp=0x04dbf3c0,  free space=316k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [gdx-bullet.dll+0x1c217]
C  0x38cffed8

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  com.badlogic.gdx.physics.bullet.gdxBulletJNI.btDiscreteDynamicsWorld_stepSimulation__SWIG_1(JLcom/badlogic/gdx/physics/bullet/btDiscreteDynamicsWorld;FI)I+0
j  com.badlogic.gdx.physics.bullet.btDiscreteDynamicsWorld.stepSimulation(FI)I+7 
```

我被告知这可能是 Java GC 释放 Java 代码中不再引用的对象的问题，但子弹本机代码仍然需要它。

我查看了我的代码，但没有发现这种情况，这并不意味着它们不存在。我可以寻找更长的时间，但我认为如果我继续采用这种方法，我需要学习如何自己调试这种情况。

所以我在 gdx-bullet.dll 上运行了 dumpbin.exe，发现如下：

```
6AB80000 image base (6AB80000 to 6BD4FFFF) 
```

然后我添加了 0x6AB80000 + 0x1c217 = 0x6AB9C217 并在 dumpbin.exe 反汇编中查找：

```
6AB9C206: 8B 10              mov         edx,dword ptr [eax]
6AB9C208: 89 6C 24 0C        mov         dword ptr [esp+0Ch],ebp
6AB9C20C: 89 7C 24 08        mov         dword ptr [esp+8],edi
6AB9C210: 89 4C 24 04        mov         dword ptr [esp+4],ecx
6AB9C214: 89 04 24           mov         dword ptr [esp],eax
6AB9C217: FF 52 08           call        dword ptr [edx+8]
6AB9C21A: F3 0F 10 05 0C F0  movss       xmm0,dword ptr ds:[6AD3F00Ch]
          D3 6A
6AB9C222: F3 0F 10 4C 24 30  movss       xmm1,dword ptr [esp+30h]
6AB9C228: 80 7E 2C 00        cmp         byte ptr [esi+2Ch],0
6AB9C22C: F3 0F 5C C8        subss       xmm1,xmm0 
```

这一切都很好，但是关于我被困在哪里，因为我不知道 [edx+8] 的位置。

我有使用的子弹的源代码[（大约是这个）](https://github.com/libgdx/libgdx/blob/master/extensions/gdx-bullet/jni/src/BulletDynamics/Dynamics/btDiscreteDynamicsWorld.cpp)。

我安装了 windbg.exe 并设法让 userdump.exe 生成一个 javaw.dmp 文件，但不确定要在其中查找什么以及如何查找。我试图使用“r”命令找出 rdx 的内容，但它是 0x0，而不是 hs_err_pid 文件，它是一些随机值。

我找到了一些[构建脚本](https://github.com/libgdx/libgdx/tree/master/extensions/gdx-bullet/jni)，但我怀疑我是否可以向它们添加“包含调试信息”标志，然后让它们及时工作。

**我该怎么做才能确定哪个特定的本地方法有问题？**

如果我知道，那么我可以查看它的源代码并了解我传递给它的错误参数或它需要的 GC 已取消分配的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-22T12:04:09.373

指针可能为时已晚，在您的情况下，访问冲突发生是因为访问了在本机代码中已取消分配内存的指针。在这种情况下，如果试图写入该指针指向的内存，如果释放的块还没有被内存管理重新分配，它可能会实际工作几次。我在 Windows 中遇到过这种情况，最终程序在退出之前给出了 Heap Overrun 错误，并且从 Java 端抛出了上述错误。它工作时间短的原因是因为一旦内存块被解除分配，它不会立即被 Windows 分配，而是当它需要重新分配时，Windows 检查内存块的头字段并发现它是损坏，因此出现堆溢出错误。

如果本机代码是由您编写的，您可以添加跟踪并找到问题，在包装的库中，您可能没有在 Java 端保留对库的引用，或者包装器中存在问题。

# iphone - UIScrollview 查看第二页按钮没有听触摸

> ID：13513005
> 
> 赞同：1
> 
> 时间：2012-11-22T12:42:53.963
> 
> 标签：iphone, objective-c, ios, uiscrollview, uibutton

我有许多图像按钮的滚动视图，对于按钮 1-8，按钮行为没有问题。它可以是可点击的日志。

问题是第二页上的按钮看起来不像在选择器上听（按钮 9-10）。页面控制可能有问题吗？或者我在这里错过了什么？

```
 // button paging
myImages = [NSArray arrayWithObjects:
                     [UIImage imageNamed:@"img_1.png"],
                     [UIImage imageNamed:@"img_2png"],
                     [UIImage imageNamed:@"img_3.png"],
                     [UIImage imageNamed:@"img_4.png"],
                     [UIImage imageNamed:@"img_5.png"],
                     [UIImage imageNamed:@"img_6.png"],
                     [UIImage imageNamed:@"img_7.png"],
                     [UIImage imageNamed:@"img_8.png"],
                     [UIImage imageNamed:@"img_9.png"],
                     [UIImage imageNamed:@"img_10.png"],
                     nil
            ];

// prepare counter
int posX, posY = 5, counter = 0, pages = 0;
BOOL reset = NO;

// uiviewscroller
CGRect scrollFrame;
scrollFrame.origin.x = self.myScrollView.frame.size.width * pages;
scrollFrame.origin.y = 0;
scrollFrame.size = self.myScrollView.frame.size;

UIView *subView = [[UIView alloc] initWithFrame:scrollFrame];
subView.backgroundColor = [UIColor colorWithRed:232.0f/255.0f green:233.0f/255.0f blue:235.0f/255.0f alpha: 1];

// loop over images
for (int i = 0; i < myImages.count; i++)
{
    counter++;

    // reposition X
    if (counter == 1 || counter == 5)
    {
        posX = 4;

        // more than 1 page
        if (pages > 0)
            posX = 320 * pages;
    }
    else
    {
        posX += 80;
    }

    // reposition Y
    posY = (counter <= 4) ? 5 : 85;

    if (reset == YES)
    {
        // reflag
        reset = NO;

        // redefined size
        scrollFrame.origin.x = self.myScrollView.frame.size.width * pages;            
    }

    // create image view for button
    UIImage *myIcon = [myImages objectAtIndex:i];
    UIButton *myButton = [UIButton buttonWithType:UIButtonTypeCustom];

    // manipulate button behavior
    myButton.frame = CGRectMake(posX, posY, 80, 80);
    [myButton setTitle:[NSString stringWithFormat:@"%d", i] forState:UIControlStateNormal];
    [myButton setImage:myIcon forState:UIControlStateNormal];
    [myButton addTarget:self action:@selector(btnClicked:) forControlEvents:UIControlEventTouchUpInside];

    // add image to subview
    [subView addSubview:myButton];

    if (counter == 8)
    {
        // reset position
        posX = 4;
        posY = 5;

        // populate counter
        counter = 0;
        pages++;

        // reset section
        reset = YES;

        // add subview to view
        [self.myScrollView addSubview:subView];
    }

    // add balance subview to scroller
    if (counter > 0 && i == myImages.count-1)
    {
        // add subview to view
        [self.myScrollView addSubview:subView];
        pages++;
    }
}

scrollFrame.origin.x = self.myScrollView.frame.size.width * pages;
self.myScrollView.contentSize = CGSizeMake(self.myScrollView.frame.size.width * pages, self.myScrollView.frame.size.height);
self.myPaging.numberOfPages = pages; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:38:24.377

您正在一个名为 subView 的视图上添加按钮。最后两个按钮被添加到该视图的边界之外，因为视图的框架等于滚动视图的框架 ( `UIView *subView = [[UIView alloc] initWithFrame:scrollFrame];`)。

添加按钮后更改其框架-

在更改滚动视图的内容大小的末尾添加以下行。

```
[subView setFrame:CGRectMake(subView.frame.origin.x, subView.frame.origin.y, _scrollView.frame.size.width * pages, _scrollView.frame.size.height)]; 
```

# scala - Akka 和游戏服务器架构

> ID：13513010
> 
> 赞同：5
> 
> 时间：2012-11-22T12:43:01.640
> 
> 标签：scala, client-server, akka

我正在为我的游戏创建服务器，我认为尝试 scala 和 akka 可能是个好主意。我快速阅读了文档，并产生了架构的想法。但在做任何事情之前，我想我可能会问更高级的用户我是否走的是一条好路。

基本上，我的游戏服务器从客户端接收带有连接的 Array[Byte]：[http](http://backchatio.github.com/hookup/) ://backchatio.github.com/hookup/（websocket！）并托管一定数量的“派对”。它应该使用 sBinary 将 Array[Byte] 解码为更多结构化数据，然后通过将结构化数据与应该发送的一方相关联来解释它们。

所以我来到了这个架构：主 Actor 接收 Array[Byte] (master ! arrayByte) 并将它们委托给专门的 Actor，解码它们并将它们作为更结构化的数据发送回主控，然后当主控接收到这些结构化数据时将它们委托给理解结构化数据并更改软件事务内存映射 [Id,Party] 中保存的相应游戏的状态的解释器工作人员，然后他将收到的订单发送回包裹在 Checked(order:Order) 中如果当事人说这是对客户的有效订单，现在可以假设他的订单是正确的，并在他自己的当事人版本中解释它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:05:31.450

也许你想看看[Akka IO](http://doc.akka.io/docs/akka/2.0.4/scala/io.html)来利用非阻塞 IO 来处理你的数据包，以及[Akka 有限状态机](http://doc.akka.io/docs/akka/2.0.4/scala/fsm.html)来实现你的游戏状态。

对于您想做的事情，它们可能会派上用场。

# wpf - 如何解决图像切片旋转错误？

> ID：13513012
> 
> 赞同：2
> 
> 时间：2012-11-22T12:43:04.357
> 
> 标签：wpf, silverlight, xaml, winrt-xaml

我有一个图像的两个切片，它是一个环，切片是图像的垂直切割，所以我采取了网格，我创建了两个相等的列，然后我将左切片放入左列，将右切片放入右 cloumn。之后我开始旋转

在 '0','90','180','360' 角度图像如下所示![在此处输入图像描述](../Images/3be3cedbee1cfc659e9103f02ffaefa5.png)

看起来不错

但在其他角度，在旋转时可以看到小分裂，如下所示 ![在此处输入图像描述](../Images/90460d956b1b85f3b8fe23ecab32261a.png)

任何人都可以帮助我，我能做些什么来在所有其他角度完美旋转？

顺便说一句，我正在做 winrt 应用程序！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T20:37:14.930

对我来说，答案是重叠。但是，利用图像在 0 处匹配并使用 a`RotateTransform`来旋转您的戒指。像这样：

```
<Grid>
    <Grid.RenderTransform>
        <RotateTransform Angle="90" />
    </Grid.RenderTransform>
    <Image Source="ms-appx:///images/Arc1.jpg" />
    <Image Source="ms-appx:///images/Arc2.jpg" />
</Grid> 
```

祝你好运！

# javascript - .hover 不适用于我动态分配类的元素

> ID：13513014
> 
> 赞同：0
> 
> 时间：2012-11-22T12:43:30.253
> 
> 标签：javascript, jquery, class, onhover

我正在根据我之前的[线程](https://stackoverflow.com/questions/13308080/magento-varnish-logic-for-stores-that-open-and-close-at-specific-times)实现一个解决方案，它的主要目标是在 Magento 中检查商店是否打开。开了就好了 如果不是，它应该停用“添加到购物车”按钮并将工作时间悬停在文本上。

该解决方案可以：

1.  通过 AJAX 获取服务器上的当前时间
2.  使用这个时间检查条件
3.  根据上述结果，它为按钮元素分配或不分配一个类。

但是，从我的测试中我看到，当我尝试悬停一个具有通过动态添加的类的元素时`$(this).addClass('btn-closed');`- 它不起作用。如果我尝试通过匹配元素上已经存在的类来悬停，它可以正常工作（但是由于逻辑，它不能作为我的解决方案）。

```
// funcao para acertar as classes dos botoes aberto fechado
 $j.get('/restaurante/hora', function(data) {
        $j('#now').val(data);
        // Box de Sugestoes
        $j("#products-grid-QD .btn-cart").each( function() {
            //alert($j(this).attr('tipo') + " " +  $j(this).attr('abre1') + " " + $j(this).attr('fecha1') + " " + $j(this).attr('abre2') + " " + $j(this).attr('fecha2') + " " + $j('#now').val())
            if (checkinrange($j(this).attr('tipo'), $j(this).attr('abre1'),$j(this).attr('fecha1'),$j(this).attr('abre2'),$j(this).attr('fecha2'),$j('#now').val())) {
                $j(this).removeClass('btn-fechado');
            } else {
                $j(this).addClass('btn-fechado');
                $j(this).removeAttr('onclick');
                $j(".commentBtn").text('Fechado');

            }

        });
    }); 

    $j(document).ready(function(){
        $j('.btn-fechado').hover(function() {               
           $j(this).next(".commentBtn").animate({opacity: "show"}, "slow");
         }, function() {
           $j(this).next(".commentBtn").animate({opacity: "hide"}, "fast");

         });
    });

<button type="button" onclick="btnComprar(<?php echo $_help['store_id']; ?>, '<?php echo $this->getAddToCartUrl($_product); ?>', '<?php echo $_help['nome'];?>')" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')" tipo="<?php echo $_help['tipo'];?>" abre1="<?php echo $_help['abre1'];?>" fecha1="<?php echo $_help['fecha1'];?>" abre2="<?php echo $_help['abre2'];?>" fecha2="<?php echo $_help['fecha2'];?>" >
                                    <span><span><?php echo $this->__('Add to Cart') ?></span></span>
                                </button>
                                <span class="commentBtn"></span> 
```

请协助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:47:50.633

您的代码执行此操作：

1.  等待 DOM 准备好
2.  选择所有具有类的元素`.btn-fechado`
3.  绑定他们悬停事件。

您应该在分配类时绑定事件，或者对事件使用实时绑定。

分配类时的绑定：

```
$j(this).addClass('btn-fechado')
  .hover(function() {
    $j(this).next(".commentBtn").animate({opacity: "show"}, "slow");
  }, function() {
    $j(this).next(".commentBtn").animate({opacity: "hide"}, "fast");
  }); 
```

使用实时绑定：

```
$j(document).on("mouseover", '.btn-fechado', function() {               
  $j(this).next(".commentBtn").animate({opacity: "show"}, "slow");
});
$j(document).on("mouseout", '.btn-fechado', function() {
  $j(this).next(".commentBtn").animate({opacity: "hide"}, "fast");
}); 
```

您可以更换`$j(document)`一个较小的容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:48:39.137

您可以通过给按钮本身一个 id 来避免这样做，然后使用

```
$('#yourButton').addClass('yourClass');
$('#yourButton').on('hover', function() {}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:49:29.877

您必须使用委托：

```
$j(document).on('hover','.btn-fechado',function() {
 ....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T12:50:10.457

`hover`请尝试`jquery live`

```
$j(document).ready(function(){
    $j('.btn-fechado').live('hover',function() {               
       $j(this).next(".commentBtn").animate({opacity: "show"}, "slow");
     }, function() {
       $j(this).next(".commentBtn").animate({opacity: "hide"}, "fast");

     });
}); 
```

使用 jquery live 方法，您没有绑定/取消绑定 dom。欲了解更多信息，请访问。

[http://api.jquery.com/live/](http://api.jquery.com/live/)

# javascript - java - 如何在java脚本中的页面加载ddaccordion.init方法中只打开特定的标题菜单？

> ID：13513015
> 
> 赞同：0
> 
> 时间：2012-11-22T12:43:34.450
> 
> 标签：javascript

false, //是否应该默认打开内容以动画方式显示？persiststate: true, //在浏览器会话中保持打开内容的状态？toggleclass: ["", ""], //标题折叠和展开时应用的两个 CSS 类，分别为 ["class1", "class2"] togglehtml: ["suffix", " ", " "] , // 折叠和展开时添加到标题的附加 HTML，分别 ["position", "html1", "html2"] (see docs) animatespeed: "fast", //动画速度：以毫秒为单位的整数（即: 200), 或关键字 "fast", "normal", or "slow" oninit: function (headers,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:04:13.110

答案就在你的问题本身

`defaultexpanded: [], //index of content(s) open by default [index1, index2, etc] [] denotes no content`

指定项目的索引说`defaultexpanded: [0]`打开手风琴的第一个项目。

# authentication - 具有身份验证的 API - 响应签名？

> ID：13513016
> 
> 赞同：0
> 
> 时间：2012-11-22T12:43:35.413
> 
> 标签：authentication, restful-authentication

我有一个 API，其中客户端调用必须包含签名。这基于类似于 oauth 以及亚马逊如何做到这一点（签名 v2） 我的问题是默认标准也在返回给客户端的响应中添加签名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:14:15.273

我查看了其他 API，例如 twitter 和 Amazon。他们不会在对客户端的响应中添加身份验证详细信息

# mod-rewrite - 在 vhost 配置中包含重写文件

> ID：13513018
> 
> 赞同：2
> 
> 时间：2012-11-22T12:43:43.670
> 
> 标签：mod-rewrite, virtualhost, apache

有人可以告诉我是否可以在您的虚拟主机配置中包含一个包含所有重写规则的文件？

由于必须应用 500 多个重写规则，我希望它们位于不同的文件中，以便 vhost 配置仍然可读。

重写的数量是必要的，因为它们包含从旧到新的商店文章。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T12:47:37.877

Apache 允许该`Include`指令： [http ://httpd.apache.org/docs/2.2/mod/core.html#include](http://httpd.apache.org/docs/2.2/mod/core.html#include)

事实上，任何重要的 Web 服务器配置都会有某种形式的`Include`结构，并且大多数 Linux 发行版都将其作为软件包的一部分。

如果您有这么多重写规则，您可能希望将它们组织起来并具有通配符功能`Include`将所有文件带入配置。

# c - 在函数 c 中使用枚举定义全局变量

> ID：13513019
> 
> 赞同：0
> 
> 时间：2012-11-22T12:43:45.273
> 
> 标签：c, function, enums, global-variables, declaration

我有一个程序需要同一变量的两个不同值，具体取决于程序的状态。

函数在头文件（test.inc）中声明：

```
void function_a(int pr)
{
    if (pr == 1)
    enum{
      a = 5,
      b = 5,
      c = 5,
    };
    else
    enum{
      a = 2,
      b = 2,
      c = 2,
    };
} 
```

和程序：（main.c）

```
int main() {
    function_a(1);        
    printf("%d",a);
    return (EXIT_SUCCESS);
} 
```

编译后说：

> main.c:26: error: `a' undeclared (first use in this function)
> main.c:26: error: (每个未声明的标识符只报告一次
> main.c:26: error: 对于它出现的每个函数。 )

如何在位于标头的函数中使用枚举进行全局声明？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:04:09.867

这里没有使用枚举，您只需要 3 个全局变量并设置它们：

```
int a,b,c;

void function_a(int pr)
{
    if (pr == 1) {
      a = 5,
      b = 5,
      c = 5,
    } else {
      a = 2;
      b = 2;
      c = 2;
    }
}

int main() {
    function_a(1);        
    printf("%d",a);
    return (EXIT_SUCCESS);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T13:09:07.343

我有两个建议给你：

1）使用结构而不是枚举

```
struct test_struct {
   int a;
   int b;
   int c;
} test;
void function_a(int pr)
{
    if (pr == 1)
    test = {
      .a = 5,
      .b = 5,
      .c = 5,
    };
    else
    test = {
      .a = 2,
      .b = 2,
      .c = 2,
    };
} 
```

和程序：（main.c）

```
int main() {
    function_a(1);        
    printf("%d",test.a);
    return (EXIT_SUCCESS);
} 
```

2) 使用简单变量

```
int a,b,c;

void function_a(int pr)
{
    if (pr == 1) {
      a = 5;
      b = 5;
      c = 5;
    }
    else {
      a = 2;
      b = 2;
      c = 2;
    }
} 
```

和程序：（main.c）

```
int main() {
    function_a(1);        
    printf("%d",a);
    return (EXIT_SUCCESS);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T13:02:27.693

如果我理解正确，您希望名为 x 的变量根据程序的部分具有不同的值。一个变量不能同时引用两个不同的值，但是你可以在某个点通过赋值来改变一个变量的值。

我认为你真正需要的是功能。调用一个函数（在最粗略的意义上）将值绑定到它的参数。

但是看到您对枚举的笨拙使用，您可能想退后一步，拿起一本关于 C 的好书。请参阅[此处的列表](https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T13:06:19.653

我会用这个

```
void function_a(int pr)
{
    if (pr == 1)
    { //make them local
    enum{
      a = 5,
      b = 5,
      c = 5,
    };
     common_function(); // move common functionality inside a function and call it
    }
    else
    {  // make them local
      enum{
      a = 2,
      b = 2,
      c = 2,
    };
common_function(); // move common functionality inside a function and call it
}
} 
```

在里面`common_function`，你使用枚举值

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T13:06:34.887

由于编译器查找符号而导致的编译时错误`a`。

由于函数调用发生在运行时，所以`function_1(1)`将在运行时调用，然后`a`开始存在。但是编译器需要`a`在编译时解析符号或标记，因此您会遇到此错误。

编译器错误是由于任何语法错误造成的。`a`这是没有声明的事情。

注意：在一个翻译单元中使用的所有符号都应在此处正确声明，`compile time`否则编译器将抛出错误

您可以通过使用宏调用而不是函数调用来解决此问题。因为宏是预处理的。或者，你做`#define`常数。

# c++ - 尝试将多重集对象加倍后的c ++错误c4430

> ID：13513022
> 
> 赞同：0
> 
> 时间：2012-11-22T12:43:52.027
> 
> 标签：c++, namespaces

在头文件的几个类（在 vlr 命名空间中）中，我有一个这种形式的公共成员：

```
std::multiset<classA,classB::ClassC> data_; 
```

在我的程序中，它在某处被清空，因此我想创建一个缓冲区以在其内容丢失之前存储它。所以在每一行声明的标题类中的旧成员下，我添加了这样一行：

```
std::multiset<classA,classB::ClassC> data_buff_; 
```

然后为了缓冲我写了一些 .cpp 文件：

```
data_buff_.insert(data_); 
```

并在此处获取**errorC4430：缺少类型说明符，假定为 int。** 你能帮我吗，我应该如何正确缓冲这些数据，因为我试图在我得到错误的行中给出命名空间，但没有任何帮助。

非常感谢！- - - - - - - - - 更新 - - - - - - - -

类A.h：

```
namespace vlr {
    class A{
     // some unimportant things
    }
} 
```

B类.h：

```
namespace vlr {
    class B{
     // some unimportant things
     public:
     class C{
        // some unimportant things
     }
    }
} 
```

D类.h：

```
#include <set>
#include "ClassA.h"
#include "ClassB.h"

namespace vlr {
 class D {
 public:
 std::multiset<classA,classB::ClassC> data_;
 std::multiset<classA,classB::ClassC> data_buff_;
 // some other methods and members
 }
} 
```

类E.h：

```
#include <set>
#include "ClassA.h"
#include "ClassB.h"

namespace vlr {
 class E {
 public:
 std::multiset<classA,classB::ClassC> data_;
 std::multiset<classA,classB::ClassC> data_buff_;
 // some other methods and members
 }
} 
```

最终的.cpp：

```
#include <set>
#include "ClassA.h"
#include "ClassB.h"
#include "ClassD.h"
#include "ClassE.h"
namespace vlr{
 // something
 data_buff_.insert(data_);
 data_.clear();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:06:55.127

您似乎正在将一个多重集插入到相同类型的多重集中。该[`std::multiset::insert`](http://en.cppreference.com/w/cpp/container/multiset/insert)方法需要该特定多重集的 value_type 对象。如果您只想将多图复制`data_`到`data_buff_`然后您可以分配它：

```
data_buff_ = data_; 
```

如果要附加 to 的元素`data_`，`data_buf_`可以使用 的两个迭代器重载`insert()`：

```
data_.insert(data_.begin(), data_.end()); 
```

这种类型的多重集：

```
std::multiset<classA,classB::ClassC> 
```

可以容纳类型的对象`classA`。您只能将`classA`对象真正插入其中。第二个参数`classB::classC`应该是用于比较类型实例的类型`classA`。它在内部用于组织集合的二叉树结构。这种比较类型必须实现[严格的弱排序](http://www.sgi.com/tech/stl/StrictWeakOrdering.html)。在你的情况下，它可能是某种形式

```
classB {
 public:
   classC {
    public:
     bool operator() (const classA& lhs&, const classA rhs&) const {
       return lhs.x() < rhs.x();
     }
   };
}; 
```

# wordpress - 跨多个页面的wordpress中的相同评论框

> ID：13513023
> 
> 赞同：1
> 
> 时间：2012-11-22T12:43:52.393
> 
> 标签：wordpress, comments

快速提问：

是否可以在 Wordpress 的多个页面中使用相同的评论框？

我想在 4-5 个不同的页面上显示完全相同的评论。

可能吗？

提前致谢！

编辑：我添加了下面的代码（它是葡萄牙语），我尝试在每个帖子的基础上插入，但我相信我搞砸了为两个帖子设置正确的帖子 ID 应该评论与其他页面相关，然后在其他页面上对其进行解析

```
<?php
// Do not delete these lines
    if (!empty($_SERVER['SCRIPT_FILENAME']) && 'comments.php' == basename($_SERVER['SCRIPT_FILENAME']))
        die ('Please do not load this page directly. Thanks!');

    if ( post_password_required() ) { ?>
        <p class="nocomments">Este artigo está protegido por password. Insira-a para ver os comentários.</p>
    <?php
        return;
    }
?>

<div id="comments">
    <h3><?php comments_number('0 Comentários', '1 Comentário', '% Comentários' );?></h3>

    <?php if ( have_comments() ) : ?>

        <ol class="commentlist">
            <?php
                //Gather comments for a specific page/post 
                $comments = get_comments(array(
                    'post_id' => 156,
                    'status' => 'approve' //Change this to the type of comments to be displayed
                ));

                //Display the list of comments
                wp_list_comments(array(
                    'per_page' => 10, //Allow comment pagination
                    'reverse_top_level' => false //Show the latest comments at the top of the list
                ), $comments);
            ?>
        </ol>

    </div>

    <?php endif; ?>

    <?php if ( comments_open() ) : ?>

    <div id="respond">
            <h3>Deixe o seu comentário!</h3>

            <form action="<?php echo get_option('siteurl'); ?>/wp-comments-post.php" method="post" id="commentform">
            <fieldset>
                <?php if ( $user_ID ) : ?>

                <p>Autentificado como <a href="<?php echo get_option('siteurl'); ?>/wp-admin/profile.php"><?php echo $user_identity; ?></a>. <a href="<?php echo wp_logout_url(); ?>" title="Sair desta conta">Sair desta conta &raquo;</a></p>

                <?php else : ?>

                <label for="author">Nome:</label>
                <input type="text" name="author" id="author" value="<?php echo $comment_author; ?>" />

                <label for="email">Email:</label>
                <input type="text" name="email" id="email" value="<?php echo $comment_author_email; ?>" />

                <label for="url">Website:</label>
                <input type="text" name="url" id="url" value="<?php echo $comment_author_url; ?>" />

                <?php endif; ?>

                <label for="comment">Mensagem:</label>
                <textarea name="comment" id="comment" rows="" cols=""></textarea>

                <input type="submit" class="commentsubmit" value="Enviar Comentário" />

                <?php comment_id_fields(); ?>
                <?php do_action('comment_form', $post->ID); ?>
            </fieldset>
        </form>
        <p class="cancel"><?php cancel_comment_reply_link('Cancelar Resposta'); ?></p>
        </div>
     <?php else : ?>
        <h3>Os comentários estão fechados.</h3>
<?php endif; ?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:57:54.267

对的，这是可能的。请参阅法典[`wp_list_comments()`](http://codex.wordpress.org/Function_Reference/wp_list_comments)-

```
<ol class="commentlist">
    <?php
        //Gather comments for a specific page/post 
        $comments = get_comments(array(
            'post_id' => XXX,
            'status' => 'approve' //Change this to the type of comments to be displayed
        ));

        //Display the list of comments
        wp_list_comments(array(
            'per_page' => 10, //Allow comment pagination
            'reverse_top_level' => false //Show the latest comments at the top of the list
        ), $comments);
    ?>
</ol> 
```

# c# - 如何获取数组中类的属性

> ID：13513024
> 
> 赞同：5
> 
> 时间：2012-11-22T12:43:52.717
> 
> 标签：c#

我有一个具有以下结构的学生班：

```
 public sealed class Student
    {
       public string Name {get;set;}
       public string RollNo {get;set;}
       public string standard {get;set;}
       public bool IsScholarshipped {get;set;}
       public List<string> MobNumber {get;set;}
    } 
```

如何在数组中获取 Student 类的这些属性，例如

```
 arr[0]=Name;
     arr[1]=RollNo; 
      .
      .
      .
     arr[4]=MobNumber 
```

并且这些属性的类型在单独的数组中，例如

```
 arr2[0]=string;
     arr2[1]=string;
      .
      .
      .
     arr2[4]=List<string> or IEnumerable 
```

请用代码块解释一下。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T12:49:37.740

```
var type = model.GetType();
var properties = type.GetProperties(BindingFlags.Public | BindingFlags.Instance); 
```

这会给你一个数组`PropertyInfo`。然后，您可以这样做以获取名称：

```
properties.Select(x => x.Name).ToArray(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T12:47:43.757

您可以使用反射：

```
foreach (PropertyInfo prop in typeof(Student).GetProperties(BindingFlags.Public | BindingFlags.Instance))
{
   '''
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-22T12:51:38.940

您可以对 的结果使用 LINQ `GetProperty`，如下所示：

```
var props = typeof(Student).GetProperties();
var names = props
    .Select(p => p.Name)
    .ToArray();
var types = props
    .Select(p => p.PropertyType)
    .ToArray();
for (int i = 0 ; i != names.Length ; i++) {
    Console.WriteLine("{0} {1}", names[i], types[i]);
} 
```

这是打印的内容：

```
Name System.String
RollNo System.String
standard System.String
IsScholarshipped System.Boolean
MobNumber System.Collections.Generic.List`1[System.String] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T13:12:35.567

为此可以使用运算符 [] 重载。可以使用 PropertyInfo 映射属性。

```
public sealed class Student
{
  public string Name { get; set; }
  public string RollNo { get; set; }
  public string Standard { get; set; }
  public bool IsScholarshipped { get; set; }
  public List<string> MobNumber { get; set; }

  public object this[int index]
  {
    get
    {
      // Note: This may cause IndexOutOfRangeException!
      var propertyInfo = this.GetType().GetProperties()[index];
      return propertyInfo != null ? propertyInfo.GetValue(this, null) : null;
    }
  }

  public object this[string key]
  {
    get
    {
      var propertyInfo = this.GetType().GetProperties().First(x => x.Name == key);
      return propertyInfo != null ? propertyInfo.GetValue(this, null) : null;
    }
  }
} 
```

然后您可以通过这种方式使用该类：

```
var student = new Student { Name = "Doe, John", RollNo = "1", IsScholarshipped = false, MobNumber = new List<string>(new[] { "07011223344" }) };

var nameByIndex = student[0] as string;
var nameByKey = student["Name"] as string; 
```

[在msdn](http://msdn.microsoft.com/en-us/library/a3hd7ste%28v=vs.71%29.aspx)阅读有关 [] 运算符的更多信息。

请注意，以这种方式通过索引访问属性容易出错，因为属性的顺序很容易在没有任何控制的情况下更改。

# jquery - 从菜单项和子菜单项的 jquery 数组创建以下 json 对象

> ID：13513025
> 
> 赞同：1
> 
> 时间：2012-11-22T12:44:01.000
> 
> 标签：jquery

我有一个上下文菜单，其中包含菜单项和子菜单项。一个菜单可以有零个或多个子菜单项。我需要将我的菜单对象映射到一个 json 对象，如下所示。我该怎么做？

```
 var commonMenuItems = [
              {
                  Menu: "Print",
                  Caption: "Print"

                  },
                  SubMenuItems: [
                    {
                        SubMenuItemName: "PrintSelected",
                        SubMenuItemDisplayName: "Print Selected",

                    },
                    {
                        SubMenuItemName: "PrintAll",
                        SubMenuItemDisplayName: "Print All",

                    }
                ]
              }

        ]; 
```

我想以编程方式将 commonMenuItems 数组映射到项目 json 对象项目。

```
 items: {
                "Print": {"name": "Print"
                  "items":{
                       "PrintSelected": {"name": "Print Selected"},
                       "PrintAll": {"name": "Print All"},
                  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:48:18.090

您可以使用 JsonSerializer。有很多可用的。JSON.NET 和 ServiceStack.NET 序列化器是更好的选择，但我建议你使用 NuGet 包中的 ServiceStack 序列化器。它是地球上最快的序列化器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:16:08.660

假设您在客户端返回 commonMenuItems 然后将其转换为 javascript 数组，`var commonMenuItems = datagotfromserver;`然后将其转换为 json 您可以简单地使用 `var items = JSON.stringify(commonMenuItems);`.

# wcf - WCF 代理返回数组而不是列表，即使集合类型 == Generic.List

> ID：13513027
> 
> 赞同：12
> 
> 时间：2012-11-22T12:44:04.993
> 
> 标签：wcf, tfs, visual-studio-2012, wcf-client

我有一个 VS 2010 解决方案，其中包含一个 WCF 库项目和另一个使用该 Web 服务的项目。在 VS 2012 中打开后，进行了升级。

代理现在将 List<T> 类型作为数组返回，即使 CollectionMappings 明确设置为 Generic.List。

会发生什么？

其他人在[这里](https://stackoverflow.com/questions/13298066/wcf-returning-array-instead-of-list-even-though-collection-type-generic-list)也有类似的问题，但他是从 VS 2012 降级到 VS 2010。

编辑：我仔细检查了，Reference.svcmap 包含：

```
<CollectionMappings>
  <CollectionMapping TypeName="System.Collections.Generic.List`1" Category="List" />
</CollectionMappings> 
```

但 Reference.cs 包含以下内容：

```
 public xxx.ServiceReference1.ADUser[] get_ADUsers; 
```

在网络服务中是：

```
 public List<ADUser> get_ADUsers(string wildcard, string sortexp, string sortorder) 
```

更多信息（2012 年 12 月 12 日添加）：

在 VS2010 中创建的解决方案在另一台 PC 上运行良好。它已从该 PC 检入 TFS。在这台有问题的 PC 上，我们进行了映射和 GET。当我们尝试构建时，我们遇到了错误，服务引用中使用的所有 List<T> 类型都以某种方式被视为数组。我们在有问题的 PC 上安装了 VS 2010 并获得了该解决方案。同样的错误也存在。因此，它似乎与 VS 2012 无关。

所有 PC 都是 Windows 7 专业版。

更多信息（2012 年 12 月 19 日添加）：

工程打开时，本地PC上的ServiceReferences/ServiceReference1/Reference.cs被自动修改。变化是巨大的。下面是其中的一小部分：

![在此处输入图像描述](../Images/7b2b206995d8c7d414963531708f634c.png)

显示了两种方法。List<string> get_Hotlines() 变为 string[] get_Hotlines() 并且 List<string> get_HotlinesBySite() 变为 string[] get_HotlinesBySite()。

为什么即使没有我的要求，文件也会更改？VS 2012 升级日志说两个文件已更改，但 Reference.cs 不是其中之一。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T18:58:26.820

添加对 wcf 服务的引用时，您需要将 Collection Type 更改为 Generic List：

![在此处输入图像描述](../Images/449d4ee061b83d0c958ead1515d0210b.png)

您也可以更新此设置，只需在解决方案中选择服务引用，单击鼠标右键并选择“配置服务引用...”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-20T21:26:13.103

我对 VS2010 也有同样的问题。经过数小时的尝试和测试，我认为这是代码生成的错误。我能够重现它。这是服务器端的代码，它会影响 Visual Studio 代码生成的行为。在我的情况下，注释行产生了这个问题。当此成员不可为空时，Visual Studio 会生成 Array 集合而不是 List<>。

```
[DataContract]
public enum DocumentAttachmentSourceType
{
    [EnumMember]
    ServiceMission                              
}

[MessageContract]
public class DocumentUploadRequest : IDisposable
{
    [MessageHeader]
    public long NodeId { get; set; }

    [MessageHeader]
    public DocumentAttachmentSourceType? AttachmentSource { get; set; } //This works
    //public DocumentAttachmentSourceType  AttachmentSource { get; set; }   //This not works !!!!!!!

    [MessageBodyMember]
    public System.IO.Stream Stream { get; set; }

    public void Dispose()
    {
        if (Stream != null)
        {
            Stream.Close();
            Stream = null;
        }
    } 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-02T09:01:31.403

它为我做了什么：

1.  安装 Visual Studio 2013 的所有更新
2.  取消选中“在引用的程序集中重用类型”

# datatable - 如何在支持 bean 中获取选定的行索引

> ID：13513028
> 
> 赞同：0
> 
> 时间：2012-11-22T12:44:06.230
> 
> 标签：datatable, primefaces

我尝试从我的 bean 中获取选定的行索引。

在支持 bean 中，我使用监听器

```
public void updateCurrent()
{
   int rowIndex = dataTable.getRowIndex();
   ...
} 
```

但我总是在 rowIndex 中得到 -1

在 p:dataTable 我尝试处理我的 DataTable 并在选择行上调用监听器

```
<p:ajax event="rowSelect" listener="#{locationBean.updateCurrent}" 
           process=":mainTab:mainLocationForm:mainLocationTable"/> 
```

PrimeFaces 版本 - 3.4

请帮助获取选定的行索引。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:41:46.297

我不太确定你的方法是检索rowIndex的正确方法。不知何故，浏览器和服务器需要同步当前选择的行（在浏览器中），我不明白这是如何工作的。

也许这可以/应该通过使用 listener 参数以不同的方式完成`org.primefaces.event.SelectEvent`

您可以将您的`public void updateCurrent()`方法扩展到：

```
public void updateCurrent(SelectEvent mySelectEvent) {
   // use the mySelectEvent.getObject() method in here and 
   // check what this object has to offer
} 
```

我没有尝试过，因此无法验证您获得的对象是否具有 rowIndex（不知何故）。但是您可以自己轻松地尝试一下。

编辑：还要查看这个问题和 balusC 的答案： [如何在 JSF 数据表中获取选定的行索引？](https://stackoverflow.com/questions/2779320/how-to-get-selected-row-index-in-jsf-datatable)

# ios - 如何编写代码（Web 应用程序）以在点击打印图标时从 ipad 自动查找 wifi 打印机

> ID：13513032
> 
> 赞同：2
> 
> 时间：2012-11-22T12:44:22.710
> 
> 标签：ios, ipad, web-applications, printers, airprint

我正在创建一个 iPad 版本的网页。当试图查看通过 wifi 连接 ipad 和打印机的可能方法时，许多网站说没有空中打印是不可能的。我只需要知道，

1）是否可以通过WiFi连接iPad和打印机而无需进行空中打印？

2）如何让我的应用程序自动查找打印机并连接到打印机并通过代码进行打印？

3）哪个是查找有关此问题的代码的最佳位置（站点）？

4) 除了空中打印，还有哪些通过 WiFi 连接 iPad 和打印机的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:47:49.157

以我的经验，这并不像找到打印机然后打印那么简单。所有打印机都需要在假脱机设备上安装驱动程序软件，该驱动程序软件作为 OSI 模型的一部分，是打印机和应用程序之间通信的关键部分。

# javascript - Stitch & Grunt - 找不到文件

> ID：13513038
> 
> 赞同：2
> 
> 时间：2012-11-22T12:45:12.440
> 
> 标签：javascript, node.js, gruntjs, node-stitch

刚开始玩[Grunt](https://github.com/gruntjs/grunt/)，想用[Stitch](https://github.com/sstephenson/stitch)组合我的模块以供客户端使用。一般来说，我对 commonJS 没有太多经验，而且这两个库对我来说都是新的——所以请多多包涵。

这是我的 Grunt 文件的摘录：

```
var fs     = require('fs');
var stitch = require('stitch');

module.exports = function(grunt) {

  grunt.initConfig({

    … SNIP …

    stitch: {
      dist: {
        src: ['lib'],
        dest: 'dist/<%= pkg.name %>.js'
      }
    }
  });

  grunt.registerMultiTask('stitch', 'Compile common.js modules with stitch', function() {
    var done = this.async();

    var paths = this.file.src.map(function(dir){
      return __dirname + '/' + dir;
    });

    stitch.createPackage({ paths: paths }).compile(function(error, src){
      if (error) {
        return grunt.log.writeln(error);
      }
      file.write(name, src);
      grunt.log.writeln("File '" + name + "' created.");
      done();
    });
  });

}; 
```

但是，在运行`grunt stitch`时，我得到：

```
ReferenceError: can't compile  /path/to/file.js
file is not defined 
```

但是，绝对路径是正确的，并且该文件确实存在。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:18:04.900

事实证明，我尝试合并的文件之一中的引用不正确。

这个问题应该因为过于本地化而被关闭，但在不太可能的情况下，有人可能会遇到同样的问题——<strong>检查所有`require`调用，看看它们是否指向正确的文件。请记住，路径将相对于根而不是所需文件。

但是，这个错误消息尤其是非常神秘且基本上无用的 IMO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T10:18:38.573

考虑到编译器的性质是异步的，循环遍历文件`grunt.util.async.forEachSeries`为我解决了这个问题：[https ://github.com/fahad19/grunt-stitch-extra/blob/master/tasks/stitch_extra.js#L43](https://github.com/fahad19/grunt-stitch-extra/blob/master/tasks/stitch_extra.js#L43)

grunt 插件可以在这里找到：[https ://github.com/fahad19/grunt-stitch-extra](https://github.com/fahad19/grunt-stitch-extra)

# script# - System.GetField 在哪里？

> ID：13513041
> 
> 赞同：2
> 
> 时间：2012-11-22T12:45:24.863
> 
> 标签：script#

我在 Visual Studio Web Express 2012 中创建了一个 ScriptSharp 项目，并假定 ScriptSharp 版本为 0.7.6。

我有一些使用 Type.SetField 和 Type.GetField 的类，但我收到一个错误：“System.Type”不包含“GetField”的定义

System.Type.GetField 在哪里？？？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:35:17.897

您可以在公共静态类`GetField()`中找到Script# 的较新版本。`SetField()``System.Script`

# php - 更改标记名称 xml 和 php 之后的文本

> ID：13513042
> 
> 赞同：1
> 
> 时间：2012-11-22T12:45:24.703
> 
> 标签：php, xml, domxpath

我无法更改空标签后的文本。怎么解决？，

```
$xml = '<?xml version="1.0" encoding="utf-8"?>
<book>
    <titlePart>
        <text>hi</text>
        <text>hello</text>
    </titlePart>
    <titlePart>
        <entryReference>hello refence <sref ref="BH002"/>, go go<sref ref="BH003"/> car</entryReference>
        <text>bank</text>
    </titlePart>
</book>'; 
```

如何使用 domdocument 修复我的代码以更改空标记后的文本。

最后结果！

```
<book>
    <titlePart>
        <text>teste 01</text>
        <text>teste 02</text>
    </titlePart>
    <titlePart>
        <entryReference>teste 03 <sref ref="BH002"/>texte 04 <sref ref="BH002"/>texte 05</entryReference>
        <text>teste 06</text>
    </titlePart>
</book> 
```

我的代码！

```
$xml = '<?xml version="1.0" encoding="utf-8"?>
<book>
    <titlePart>
        <text>hi</text>
        <text>hello</text>
    </titlePart>
    <titlePart>
        <entryReference>hello refence <sref ref="BH002"/>, go go<sref ref="BH003"/> car</entryReference>
        <text>bank</text>
    </titlePart>
</book>';

$array = array("teste 01", "teste 02", "teste 03", "teste 04", "teste 05", "teste 06");

$dom = new DOMDocument();
$dom->loadXml($xml);
$dom->preserveWhiteSpace = true;

$xpath = new DOMXPath($dom);
$result2 = $xpath->query('//book//titlePart//*|//entryReference[sref]//node()//*');

for ($i = $result2->length - 1; $i >= 0; $i --) {
    $nodePre = $result2->item($i); 

    if($result2->item($i)->getAttribute('ref')!="") {
        $tag = $result2->item($i)->getAttribute('ref');
        $varTexto = $array[$i];

    }else{
        $tag = $result2->item($i)->tagName;
        $varTexto = $array[$i];
    }

    $nodeDiv = $dom->createElement($tag, $varTexto); 
    $varNode = $nodePre->parentNode->replaceChild($nodeDiv, $nodePre);

}

       header("Content-type: text/xml");
       echo $dom->saveXML(); 
```

# actionscript-3 - setChildIndex 在重叠按钮上

> ID：13513044
> 
> 赞同：2
> 
> 时间：2012-11-22T12:45:51.727
> 
> 标签：actionscript-3

我在舞台上有两个按钮，在彼此的顶部。我试图使用 setChildindex 以便当我按下打开按钮时，关闭按钮将出现在它的顶部。反之亦然。但我不断收到这个错误，我似乎无法理解。

Track On ArgumentError：错误 #2025：提供的 DisplayObject 必须是调用者的子对象。在 flash.display::DisplayObjectContainer/setChildIndex() 在 com.audio::Sequencer/trackOn1()

```
private var trackOnOff:Boolean = true;

this.track1.trackOn1.addEventListener(MouseEvent.CLICK, trackOn1);
this.track1.trackOff1.addEventListener(MouseEvent.CLICK, trackOff1);

public function trackOn1(event:MouseEvent = null):void
{
trace("Track On")
this.setChildIndex(this.track1.trackOff1, this.numChildren - 1);
trackOnOff = true;
}

public function trackOff1(event:MouseEvent = null):void
{
trace("Track Off")
this.setChildIndex(this.track1.trackOn1, this.numChildren - 1);
trackOnOff = false;
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:49:17.000

我希望您`track1`成为一个带有资产的电影剪辑，`trackOff1`即`trackOn1`. 如果是这样，您必须将`setChildIndex()`呼叫定位到该 MC 而不是`this`.

```
public function trackOn1(event:MouseEvent = null):void
{
    trace("Track On")
    this.track1.setChildIndex(this.track1.trackOff1, this.track1.numChildren - 1);
    trackOnOff = true;
}

public function trackOff1(event:MouseEvent = null):void
{
    trace("Track Off")
    this.track1.setChildIndex(this.track1.trackOn1, this.track1.numChildren - 1);
    trackOnOff = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:12:32.450

有一些简单的方法可以做到这一点：

`swapChildren(track1, track2);`

两个按钮都可以调用这个函数，它的效果与使用 setChildIndex 交换它们的效果相同，或者只是调用`addChild(track1)`或`addChild(track2)`将影片剪辑放在同一层中的任何其他内容之前。

# c# - c# xaml中的范围滑块控件

> ID：13513046
> 
> 赞同：2
> 
> 时间：2012-11-22T12:45:57.700
> 
> 标签：c#, silverlight, windows-8, custom-controls, winrt-xaml

我需要用两个拇指[范围滑块]创建一个滑块控件。任何人都可以给我以这种方式修改默认滑块控件的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:45:35.187

我创建了一个带有两个滑块的自定义滑块控件。
此链接对我有帮助
[http://blogs.u2u.be/diederik/post/2012/01/21/Building-C-custom-controls-in-WinRT-Metro.aspx](http://blogs.u2u.be/diederik/post/2012/01/21/Building-C-custom-controls-in-WinRT-Metro.aspx) **MainPage.xaml：**

```
<newslider:SimpleSlider x:Name="PriceSlider"  Width="650" LowerValueChanged="PriceSlider_LowerValueChanged" UpperValueChanged="PriceSlider_UpperValueChanged"/> 
```

**MainPage.xaml.cs：**

```
 private void PriceSlider_UpperValueChanged(object sender, EventArgs e)
 {
 }

 private void PriceSlider_LowerValueChanged(object sender, EventArgs e)
 {
 } 
```

这是控制代码：

**通用的.xaml：**

```
<Style TargetType="ctrl:RangeSliderSlider">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ctrl:SimpleSlider">
                <StackPanel>
                    <Grid Height="15">
                        <Border Height="15"
                            VerticalAlignment="Stretch"
                            Background="DarkGray"/>
                        <Canvas Margin="0"
                            MinHeight="8">
                            <Rectangle x:Name="PART_Rectangle_Middle" 
                                   Height="15"
                                   Fill="LightBlue" />
                            <Thumb x:Name="PART_Thumb_Lower"
                               Width="15"
                               Height="15" Background="White" />
                            <Thumb x:Name="PART_Thumb_Upper"
                               Width="15"
                               Height="15" Background="White" />
                        </Canvas>
                    </Grid>
                    <StackPanel Orientation="Horizontal" Margin="0,0,-15,0">
                        <ItemsControl  x:Name="PART_ItemsControl_RangeControl" 
                                       Canvas.ZIndex="1"                                                                                  
                                        >
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid Width="{Binding Tag,ElementName=PART_ItemsControl_RangeControl}" >
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="auto"/>
                                            <RowDefinition Height="auto"/>
                                        </Grid.RowDefinitions>
                                        <TextBlock Text="|" Grid.Row="0" VerticalAlignment="Center" HorizontalAlignment="Left" Foreground="Gray" FontSize="10"/>
                                        <TextBlock Grid.Row="1" Foreground="Gray" VerticalAlignment="Center"  Margin="{Binding RangeMargin}" HorizontalAlignment="Left" TextAlignment="Left" Text="{Binding RangeValue}" FontSize="12"/>
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        <Grid x:Name="PART_LastMark_Grid" Width="{Binding Tag,ElementName=PART_ItemsControl_RangeControl}" >
                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto"/>
                                <RowDefinition Height="auto"/>
                            </Grid.RowDefinitions>
                            <TextBlock Text="|" Grid.Row="0" VerticalAlignment="Center" Margin="-4,0,0,0" HorizontalAlignment="Left" Foreground="Gray" FontSize="10"/>
                            <TextBlock x:Name="PART_Lastmark_TextBlock"  Grid.Row="1" Margin="-4,0,0,0" Foreground="Gray" VerticalAlignment="Center" HorizontalAlignment="Left" TextAlignment="Left" FontSize="12"/>
                        </Grid>
                    </StackPanel>
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

**RangeSlider.cs：**

```
using RangeSlider;
using System;
using System.Collections.Generic;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Controls.Primitives;
using Windows.UI.Xaml.Media;
using Windows.UI.Xaml.Shapes;

[TemplatePart(Name = ThumbPartName_Upper, Type = typeof(Thumb))]
[TemplatePart(Name = ThumbPartNameLower, Type = typeof(Thumb))]
[TemplatePart(Name = RectanglePartName, Type = typeof(Rectangle))]
[TemplatePart(Name = RangeValueControl, Type = typeof(ItemsControl))]
[TemplatePart(Name = RangeLastMarkValue, Type = typeof(TextBlock))]
public class SimpleSlider : Control
{
    private const string ThumbPartName_Upper = "PART_Thumb_Upper";
    private const string RectanglePartName = "PART_Rectangle_Middle";
    private const string ThumbPartNameLower = "PART_Thumb_Lower";
    private const string RangeValueControl = "PART_ItemsControl_RangeControl";
    private const string RangeLastMarkValue = "PART_Lastmark_TextBlock";

    private Thumb _upperThumb;
    private Thumb _lowerthumb;
    private Rectangle _middleFillRectangle;
    private ItemsControl _scaleValueControl;
    private TextBlock _lastmarkTextblock;
    private int _interval;
    private double _sectionValue;
    private double _interval_width;

    public event EventHandler LowerValueChanged;
    public event EventHandler UpperValueChanged;

    #region Properties

    private bool isThumbSelected = true;

    public bool IsThumbSelected
    {
        get { return isThumbSelected; }
        set { isThumbSelected = value; IsThumb_Selected = value; }
    }

    public static bool IsThumb_Selected { get; set; }

    #endregion

    #region Dependency Properties

    public double Minimum
    {
        get { return (double)GetValue(MinimumProperty); }
        set { SetValue(MinimumProperty, value); }
    }

    public double Maximum
    {
        get { return (double)GetValue(MaximumProperty); }
        set { SetValue(MaximumProperty, value); }
    }

    public double LowerValue
    {
        get { return (double)GetValue(LowerValueProperty); }
        set
        {
            SetValue(LowerValueProperty, value);
            RangeEventArgs e = new RangeEventArgs() { NewValue = value };
            if (LowerValueChanged != null)
                LowerValueChanged(this, e);
        }
    }

    public double UpperValue
    {
        get { return (double)GetValue(UpperValueProperty); }
        set
        {
            SetValue(UpperValueProperty, value);
            RangeEventArgs e = new RangeEventArgs() { NewValue = value };
            if (UpperValueChanged != null)
                UpperValueChanged(this, e);
        }
    }

    // Using a DependencyProperty as the backing store for UpperValue.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty UpperValueProperty =
        DependencyProperty.Register("UpperValue", typeof(double), typeof(SimpleSlider), new PropertyMetadata(0.0, UpperValuePropertyChanged));

    // Using a DependencyProperty as the backing store for LowerValue.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty LowerValueProperty =
        DependencyProperty.Register("LowerValue", typeof(double), typeof(SimpleSlider), new PropertyMetadata(0.0, LowerValuePropertyChanged));

    // Using a DependencyProperty as the backing store for Minimum.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty MinimumProperty =
        DependencyProperty.Register("Minimum", typeof(double), typeof(SimpleSlider), new PropertyMetadata(0.0));

    // Using a DependencyProperty as the backing store for Maximum.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty MaximumProperty =
        DependencyProperty.Register("Maximum", typeof(double), typeof(SimpleSlider), new PropertyMetadata(0.0));

    // Using a DependencyProperty as the backing store for RangeCollection.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty RangeCollectionProperty =
        DependencyProperty.Register("RangeCollection", typeof(List<Range>), typeof(SimpleSlider), new PropertyMetadata(null));

    public List<Range> RangeCollection
    {
        get { return (List<Range>)GetValue(RangeCollectionProperty); }
        set { SetValue(RangeCollectionProperty, value); }
    }

    public double Division
    {
        get { return (double)GetValue(DivisionProperty); }
        set { SetValue(DivisionProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Division.  This enables binding scale division width, etc...
    public static readonly DependencyProperty DivisionProperty =
        DependencyProperty.Register("Division", typeof(double), typeof(SimpleSlider), new PropertyMetadata(0));

    public string LastMark
    {
        get { return (string)GetValue(LastMarkProperty); }
        set { SetValue(LastMarkProperty, value); }
    }

    public static readonly DependencyProperty LastMarkProperty =
      DependencyProperty.Register("LastMark", typeof(string), typeof(SimpleSlider), new PropertyMetadata(""));

    public int MinimumInterval
    {
        get { return (int)GetValue(MinimumIntervalProperty); }
        set { SetValue(MinimumIntervalProperty, value); }
    }

    // Using a DependencyProperty as the backing store for MinimumInterval.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty MinimumIntervalProperty =
        DependencyProperty.Register("MinimumInterval", typeof(int), typeof(SimpleSlider), new PropertyMetadata(5));

    public int MaximumInteraval
    {
        get { return (int)GetValue(MaximumInteravalProperty); }
        set { SetValue(MaximumInteravalProperty, value); }
    }

    // Using a DependencyProperty as the backing store for MaximumInteraval.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty MaximumInteravalProperty =
        DependencyProperty.Register("MaximumInteraval", typeof(int), typeof(SimpleSlider), new PropertyMetadata(15));

    #endregion

    /// <summary>
    /// When overridden in a derived class, is invoked whenever application code or internal processes call <see cref="M:System.Windows.FrameworkElement.ApplyTemplate"/>.
    /// </summary>
    protected override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        this._upperThumb = this.GetTemplateChild(ThumbPartName_Upper) as Thumb;
        if (this._upperThumb != null)
        {
            this._upperThumb.DragDelta += this.Thumb_DragDelta;
        }

        this._lowerthumb = this.GetTemplateChild(ThumbPartNameLower) as Thumb;
        if (_lowerthumb != null)
        {
            this._lowerthumb.DragDelta += this.Thumb1_DragDelta;
        }
        this._middleFillRectangle = this.GetTemplateChild(RectanglePartName) as Rectangle;

        this._scaleValueControl = this.GetTemplateChild(RangeValueControl) as ItemsControl;
        this._lastmarkTextblock = this.GetTemplateChild(RangeLastMarkValue) as TextBlock;

        this.SizeChanged += new SizeChangedEventHandler(SimpleSlider_SizeChanged);
    }

    /// <summary>
    /// Method for displying values in the range slider
    /// </summary>
    public void PopulateScaleValues()
    {
        _sectionValue = Minimum;
        bool isDivFound = false;
        for (int i = MaximumInteraval; i >= MinimumInterval; i--)
        {
            if (!isDivFound)
            {
                if (0 == Math.IEEERemainder(Maximum, i))
                {
                    _interval = i;
                    isDivFound = true;
                    continue;
                }
            }
        }
        _interval_width = Maximum / _interval;
        var totalSize = this.ActualWidth;
        Division = totalSize / _interval;
        this._scaleValueControl.Tag = Division;
        if (RangeCollection == null)
            RangeCollection = new List<Range>();
        RangeCollection.Add(new Range { RangeValue = _sectionValue });
        for (int i = 0; i < _interval; i++)
        {
            _sectionValue = _sectionValue + _interval_width;
            RangeCollection.Add(new Range { RangeValue = _sectionValue });
        }

        this._scaleValueControl.ItemsSource = RangeCollection;
        LastMark = (_sectionValue + _interval_width).ToString();
        this._lastmarkTextblock.Text = RangeCollection[_interval].RangeValue.ToString();
    }

    /// <summary>
    /// Called when size changed.
    /// </summary>
    private void SimpleSlider_SizeChanged(object sender, SizeChangedEventArgs e)
    {
        if (e.NewSize.Width != e.PreviousSize.Width)
        {
            //this.UpdateControls();
            //this.UpdateControls1();
            //PopulateScaleValues();
        }
    }

    /// <summary>
    /// Called when value changed.
    /// </summary>
    private static void OnValueChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs e)
    {
        // Simple version: no coercion involved.
        var customSlider = (SimpleSlider)dependencyObject;
        if (IsThumb_Selected)
        {
            customSlider.UpperValue = Convert.ToDouble(e.NewValue);
        }
        else
        {
            customSlider.LowerValue = Convert.ToDouble(e.NewValue);
        }
    }

    /// <summary>
    /// Called  when lower value changed
    /// </summary>
    private static void LowerValuePropertyChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs e)
    {
        var customSlider = (SimpleSlider)dependencyObject;
        customSlider.UpperValue = Math.Max(customSlider.UpperValue, customSlider.LowerValue);
        customSlider.UpdateControls1();
    }

    /// <summary>
    /// Called When Upper value changed
    /// </summary>
    private static void UpperValuePropertyChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs e)
    {
        var customSlider = (SimpleSlider)dependencyObject;
        customSlider.LowerValue = Math.Min(customSlider.UpperValue, customSlider.LowerValue);
        customSlider.UpdateControls();
    }

    /// <summary>
    /// Handles the DragDelta event of the Thumb control.
    /// </summary>
    private void Thumb_DragDelta(object sender, DragDeltaEventArgs e)
    {
        IsThumbSelected = true;
        this._lowerthumb.Visibility = Visibility.Visible;
        this._upperThumb.Visibility = Visibility.Visible;
        var pixelDiff = e.HorizontalChange;
        var currentLeft = Canvas.GetLeft(this._upperThumb);

        // trying to drag too far left
        if ((currentLeft + pixelDiff) < 0)
        {
            this.UpperValue = 0;
        }
        // trying to drag too far right
        else if ((currentLeft + pixelDiff + this._upperThumb.ActualWidth) > this.ActualWidth)
        {
            this.UpperValue = this.Maximum;
        }
        else
        {
            var totalSize = this.ActualWidth;
            var ratioDiff = pixelDiff / totalSize;
            var rangeSize = this.Maximum - this.Minimum;
            var rangeDiff = rangeSize * ratioDiff;
            this.UpperValue += rangeDiff;

        }
        if (this.LowerValue == this.UpperValue && e.HorizontalChange < 0)
        {

            this._lowerthumb.Visibility = Visibility.Visible;
            this._upperThumb.Visibility = Visibility.Collapsed;
        }
        if (this.LowerValue == this.Minimum && this.LowerValue == this.UpperValue)
        {

            this._lowerthumb.Visibility = Visibility.Collapsed;
            this._upperThumb.Visibility = Visibility.Visible;
        }
    }

    /// <summary>
    /// Handles the DragDelta event of the Thumb control.
    /// </summary>
    private void Thumb1_DragDelta(object sender, DragDeltaEventArgs e)
    {
        this._lowerthumb.Visibility = Visibility.Visible;
        this._upperThumb.Visibility = Visibility.Visible;

        IsThumbSelected = false;

        var pixelDiff = e.HorizontalChange;
        var currentLeft = Canvas.GetLeft(this._lowerthumb);

        // trying to drag too far left
        if ((currentLeft + pixelDiff) < 0)
        {
            this.LowerValue = 0;
        }

        // trying to drag too far right
        else if ((currentLeft + pixelDiff + this._lowerthumb.ActualWidth) > this.ActualWidth)
        {
            this.LowerValue = this.Maximum;
        }
        else
        {
            var totalSize = this.ActualWidth;
            var ratioDiff = pixelDiff / totalSize;
            var rangeSize = this.Maximum - this.Minimum;
            var rangeDiff = rangeSize * ratioDiff;

            this.LowerValue += rangeDiff;
        }
        if (this.LowerValue == this.UpperValue && e.HorizontalChange > 0)
        {

            this._lowerthumb.Visibility = Visibility.Collapsed;
            this._upperThumb.Visibility = Visibility.Visible;
        }
        if (this.LowerValue == this.Maximum && this.LowerValue==this.UpperValue)
        {

            this._lowerthumb.Visibility = Visibility.Visible;
            this._upperThumb.Visibility = Visibility.Collapsed;
        }

    }

    /// <summary>
    /// Updates the controls.
    /// </summary>
    public void UpdateControls()
    {
        double halfTheThumbWith = 0;

        if (this._upperThumb != null)
        {
            halfTheThumbWith = this._upperThumb.ActualWidth / 2;
        }

        double totalSize = this.ActualWidth - halfTheThumbWith * 2;

        double ratio = totalSize / (this.Maximum - this.Minimum);

        if (this._upperThumb != null)
        {
            Canvas.SetLeft(this._upperThumb, ratio * this.UpperValue);
        }

        if (this._middleFillRectangle != null)
        {
            Canvas.SetLeft(this._middleFillRectangle, ratio * this.LowerValue);
            this._middleFillRectangle.Width = ratio * (this.UpperValue - this.LowerValue) + halfTheThumbWith;
        }
    }

    /// <summary>
    /// Updates the controls.
    /// </summary>
    public void UpdateControls1()
    {
        double halfTheThumbWith = 0;

        if (this._lowerthumb != null)
        {
            halfTheThumbWith = this._upperThumb.ActualWidth / 2;
        }

        double totalSize = this.ActualWidth - halfTheThumbWith * 2;

        double ratio = totalSize / (this.Maximum - this.Minimum);

        if (this._lowerthumb != null)
        {
            Canvas.SetLeft(this._lowerthumb, ratio * this.LowerValue);
        }

        if (this._middleFillRectangle != null)
        {
            Canvas.SetLeft(this._middleFillRectangle, ratio * this.LowerValue);
            this._middleFillRectangle.Width = ratio * (this.UpperValue - this.LowerValue) + halfTheThumbWith;
        }
    }
} 
```

**Range.cs 模型：**

```
public class Range
{
    public double RangeValue { get; set; }

    public Thickness RangeMargin
    {
        get
        {
            if (RangeValue.ToString().Length == 1)
            {
                return new Thickness(-1, 0, -1, 0);
            }
            else if (RangeValue.ToString().Length == 2)
            {
                return new Thickness(-5, 0, -5, 0);
            }
            else if (RangeValue.ToString().Length == 3)
            {
                return new Thickness(-7, 0, -7, 0);
            }
            else if (RangeValue.ToString().Length == 4)
            {
                return new Thickness(-9, 0, -9, 0);
            }

            else
                return new Thickness(-1, 0, -1, 0);
        }

    }
} 
```

**RangeEventArgs.cs：**

```
public class RangeEventArgs :EventArgs
{
    public double NewValue { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:55:01.893

我想你可以看看这篇文章。

[http://www.thejoyofcode.com/Creating_a_Range_Slider_in_Silverlight_and_some_of_the_binding_gotchas_in_SL3_.aspx](http://www.thejoyofcode.com/Creating_a_Range_Slider_in_Silverlight_and_some_of_the_binding_gotchas_in_SL3_.aspx)

在我看来是相当清楚的描述。样品可能不是很好看，但我希望它不是最重要的。享受！

# ios - 如何在 MonoDevelop 调试器中查看视图控制器链？

> ID：13513051
> 
> 赞同：3
> 
> 时间：2012-11-22T12:46:18.167
> 
> 标签：ios, xamarin.ios

例如，我推视图控制器，然后推另一个，然后弹出，然后再推 3 次和 1 次弹出。如何查看生成的视图控制器“堆栈”？当我按下顶栏上的“后退按钮”时，如何查看会出现哪个视图控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:53:22.173

通过数组属性`UINavigationController`公开视图控制器的“堆栈” 。`ViewControllers`请参阅以下文档：

[http://iosapi.xamarin.com/?link=P%3aMonoTouch.UIKit.UINavigationController.ViewControllers](http://iosapi.xamarin.com/?link=P%3aMonoTouch.UIKit.UINavigationController.ViewControllers)

要找到将被导航到的视图控制器，只需从该数组中获取最后一个元素。

# selenium - Selenium webdriver 设计文档

> ID：13513052
> 
> 赞同：3
> 
> 时间：2012-11-22T12:46:28.497
> 
> 标签：selenium, webdriver

我正在尝试为嵌入式设备用户界面（例如 VoIP 电话）编写一个自动化框架。这些设备具有不同的 UI，但在逻辑上执行相同的操作。

经过我的分析，似乎我正在开发一个类似于 selenium webdriver 的框架。Selenium webdriver 适用于各种浏览器，而该框架适用于不同的嵌入式设备 UI。

我正在尝试了解 selenium webdriver 的实现。我已经浏览了它的 javadocs 和源代码，但我觉得最好有一个设计文档。

如果你有它的链接，请告诉我。

感谢你的帮助！！

PS：我将在 Python/Perl 中开发这个框架。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T21:55:55.507

WebDriver 背后的指导力量 Simon Stewart为[The Architecture of Open Source Applications写了一个](http://www.aosabook.org/en/index.html)[关于其设计和架构的章节](http://www.aosabook.org/en/selenium.html)。它详细介绍了如何以及为什么要完成这些事情。您还可以在 Selenium 项目的[JsonWireProtocol wiki 页面](http://code.google.com/p/selenium/wiki/JsonWireProtocol)中找到很好的信息，该页面描述了客户端（脚本编写者）和服务器（浏览器）之间的正式协议。WebDriver的[W3C 标准化过程](http://www.w3.org/TR/webdriver/)有朝一日会成为有用的权威参考，但它才刚刚开始，目前还有很多东西没有在规范中定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:45:06.463

您可以参考提交给 W3C 的 Selenium 2.0 工作草案...它类似于高级设计文档，其中大部分功能逻辑都有解释。

请参考此链接：

[http://www.w3.org/TR/2012/WD-webdriver-20120710/](http://www.w3.org/TR/2012/WD-webdriver-20120710/)

# javascript - Javascript对象调用函数whit in function

> ID：13513062
> 
> 赞同：2
> 
> 时间：2012-11-22T12:47:16.543
> 
> 标签：javascript, jquery, ajax

我在用对象编写 javascript 方面很新。现在我试图做一个 ajaxcall 并有一个回调函数，但我可以在 ajax 调用中到达回调函数。

这是代码，我该如何调用回调函数？

```
function smarttalkObj() {

    this.base_url = 'http://';

    this.getPts = function() {

        $.ajax({
            url: this.base_url + 'getPTS',
            dataType: "jsonp",
            jsonp : "callback",
            jsonpCallback: "this.callback_pts",
            contentType: 'application/x-javascript'
        }); 
    }

    }

    this.callback_pts = function(data) {

        console.log(data);

    }

}

smarttalk = new smarttalkObj();

smarttalk.getPts(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:50:19.297

ajax 方法可以接收**成功**和**错误**回调函数作为设置的一部分。像这样的东西：

```
 $.ajax({
        url: this.base_url + 'getPTS',
        dataType: "jsonp",
        jsonp : "callback",
        contentType: 'application/x-javascript',
        success: function(data, textStatus, jqXHR){
            console.log(data);
            // your callback function here
        },
        error: function(jqXHR, textStatus, errorThrown){
            // callback in case of error
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:51:01.680

添加 `success field`：

```
success: function(data)
{
 // put code here
} 
```

对于您的示例：

```
$.ajax({
        url: this.base_url + 'getPTS',
        dataType: "jsonp",
        jsonp : "callback",
        jsonpCallback: "this.callback_pts",
        contentType: 'application/x-javascript',
        success: function(data)
                 {
                  // put code here
                  }
    }); 
```

您也可以使用单独的功能：

```
$.ajax({
        url: this.base_url + 'getPTS',
        dataType: "jsonp",
        jsonp : "callback",
        jsonpCallback: "this.callback_pts",
        contentType: 'application/x-javascript',
        success: getCallback
    }); 

  function getCallback (data)
  {
  // put code here
  } 
```

# c# - 壁虎清除缓存历史记录和cookies

> ID：13513063
> 
> 赞同：6
> 
> 时间：2012-11-22T12:47:21.960
> 
> 标签：c#, cookies, gecko

帮助！我使用**GeckoFx-Windows-10.0-0.6**浏览器和**xulrunner-10.0.en-US.win32**。（Visual Studio 2010 c#）一切正常。但我需要清除 Firefox 的所有历史记录：工具 >> 选项 >> 隐私

我发现 cookie 是多么清晰`Gecko.CookieManager.RemoveAll();`

缓存、临时文件和历史记录有多清晰？！

当我初始化时，由于显而易见的原因， `Gecko.Xpcom`我无法清理文件夹（缓存和 cookie 所在的位置）。没有帮助`"Gecko.Xpcom.ProfileDirectory"``Gecko.Xpcom.Shutdown()`

* * *

我找到了一种通过 javascript 清理 cookie 的方法：

`var cookieManager = Components.classes["@mozilla.org/cookiemanager;1"].getService(Components.interfa‌​ces.nsICookieManager); cookieManager.removeAll();`

在 C# 中如何正确调用这个 JS？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T15:00:18.590

要清除 cookie，您需要查询如下界面：

```
 if (MessageBox.Show("Do you want to delete cookies?", "About to delete all cookies", MessageBoxButtons.YesNo, MessageBoxIcon.Information) == DialogResult.Yes)
    {
        nsICookieManager CookieMan;
        CookieMan = Xpcom.GetService<nsICookieManager>("@mozilla.org/cookiemanager;1");
        CookieMan = Xpcom.QueryInterface<nsICookieManager>(CookieMan);
        CookieMan.RemoveAll();
    } 
```

由于安全等原因，在运行时拒绝访问缓存。这意味着您需要在程序关闭等之后找到一种删除这些文件夹的方法。创建另一个应用程序来处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-30T01:17:32.097

对于它的价值，因为我为此看了一段时间，在 GeckoFX 29 上，至少历史遵循相同的模式：

```
nsIBrowserHistory historyMan = Xpcom.GetService<nsIBrowserHistory>(Gecko.Contracts.NavHistoryService);
historyMan = Xpcom.QueryInterface<nsIBrowserHistory>(historyMan);
historyMan.RemoveAllPages(); 
```

对于没有确定是正确方法的缓存：

```
// https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/imgICache
Gecko.Cache.ImageCache.ClearCache(true);
Gecko.Cache.ImageCache.ClearCache(false);
// Defaults to all devices(0) - https://bitbucket.org/geckofx/geckofx-9.0/issue/7/idl-translation-bug-for-enums
Gecko.Cache.CacheService.Clear(new CacheStoragePolicy()); 
```

# php - php 使用来自另一个授权网站的数据

> ID：13513067
> 
> 赞同：2
> 
> 时间：2012-11-22T12:47:34.797
> 
> 标签：php, web-services, soap

什么是使用 php 将数据从一个站点消耗到另一个站点的最佳方法。

站点 A 是分类站点列表广告（汽车、动物、自行车等）。

站点 B 是另一个也列出广告的分类站点，站点 B 希望在站点 A 上展示其广告。

我知道站点 A（数据消费者）和站点 B（数据生成器）上应该有 2 个实现 1。

站点 B 应在站点 A 上拥有一个帐户，并应提供用户名和密码，以便在站点 A 上使用数据

我正在考虑使用 SOAP。有什么更好的建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:58:39.640

如果您拥有这两个站点，则应该考虑创建某种可以从其他位置调用的 API。Web 服务非常有用，而 SOAP 是一个很好的方法。另一种方法是允许从远程位置访问您的数据库，然后在需要时打开从站点 B 到站点 A 的连接。不过，这确实带来了一些安全问题，并且可能会有点迟缓，具体取决于服务器在地理上相互关联的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:21:48.357

我建议您为您的应用程序制作 Rest Api。

# webview - Titan 中的 Webview 和 httpClient 问题

> ID：13513069
> 
> 赞同：4
> 
> 时间：2012-11-22T12:47:37.527
> 
> 标签：webview, titanium-mobile

我正在尝试使用 Titanium Studio 构建简单的应用程序，该应用程序将加载 google.com，但我没有得到正确的结果。

1）我使用 WebView 加载 url，但除了白屏之外什么都没有显示。

2) 我使用了 httpClient，但我总是遇到我在 onerror 函数中定义的错误。

两种方法都粘贴在下面。我是否必须在 tiApp.xml 中进行更改，即 interent 权限？

请帮助我，我怎样才能做得更好？

注意：我正在使用代理互联网。问题出现在模拟器和设备上。

我正在从 app.js 加载以下 js 文件

```
var win = Ti.UI.currentWindow;    
Ti.App.fireEvent('show_indicator'); //display loading spinner until webview gets loaded
var fbUrl = "http://www.facebook.com";
var extwebview = Titanium.UI.createWebView({
     url:fbUrl,
     backgroundColor:'#ccc'
});
win.add(extwebview); //adding webview in current window

extwebview.addEventListener('load', function() {
     Ti.App.fireEvent('hide_indicator'); //Hide the Loading indicatr
}); 
```

---------------方法2-----------------

```
var url ="http://www.google.com.pk";
var xhr = Ti.Network.createHTTPClient({
onload: function() {
    // I don't know what to write here.
},
onerror: function(e) {
     Ti.API.debug("STATUS: " + this.status);
     Ti.API.debug("TEXT:   " + this.responseText);
     Ti.API.debug("ERROR:  " + e.error);
     alert('There was an error retrieving the remote data. Try again.');
  },
  timeout:50000
});
xhr.open("GET", url);
xhr.send(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:10:07.120

您的方法 1 的代码看起来不错。您的加载事件是否会触发？我建议您为 WebView 上的“错误”事件添加一个处理程序，看看它是否被触发？

```
extwebview.addEventListener('error', function(e) {
     Ti.API.debug("Oh no!");
}); 
```

但是，“错误”事件不会因 404 或其他与 HTTP 相关的错误而触发。另一个测试选项是为您的 webview 设置 html 值，而不是加载外部 URL，并确保您的 WebView 的其他所有内容都正常工作并且您可以在那里看到 html。您的代理可能有问题。

```
var extwebview = Titanium.UI.createWebView({
     html:"<html><head></head><body><h1>YOU MADE IT!</h1></body></html>",
     backgroundColor:'#ccc'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:41:15.360

您的第一个代码工作正常，我不禁认为您的问题出在您的 win 变量上。

*   你的窗户可能没有打开吗？即在代码末尾尝试 win.open()。

*   您能否测试 win 是否正确填充了 window 对象，Ti.UI.currentWindow 只能在从 url 实例化窗口时的某些情况下使用。

如果这些仍然不起作用，您能否提供 app.js 文件中的代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T19:59:26.220

你的问题出在网址上……我曾经为此发疯了，哈哈

[http://www.google.com.pk](http://www.google.com.pk)

应该

http://www.google.com.pk

本质上，如果您的视图中有一个名为 detailwebview 的网络视图，那么您可以这样做

$.detailwebview.url = "http://www.google.com.pk"

干杯！

# wordpress - wordpress 德语问题

> ID：13513071
> 
> 赞同：2
> 
> 时间：2012-11-22T12:47:41.473
> 
> 标签：wordpress

我正在尝试开发一个德语 word-press 网站。但内容显示为

```
Bewusst ern�hren. 
```

我怎样才能删除这些符号。

```
<html lang="de-DE" dir="ltr">
<head>
<meta charset="UTF-8">
<meta content="width=device-width" name="viewport">
<meta content="de-DE" name="language">
<meta content="de-DE" name="content-language"> 
```

我已经添加了这些代码，但问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:03:47.260

安装[UTF-8 Database Converter](http://wordpress.org/extend/plugins/utf-8-database-converter/)并让它修复您的数据库。

# haxe - Bytes.compare 的返回值是多少？

> ID：13513075
> 
> 赞同：1
> 
> 时间：2012-11-22T12:47:51.553
> 
> 标签：haxe

根据：

[http://haxe.org/api/haxe/io/bytes](http://haxe.org/api/haxe/io/bytes)

有一个返回 Int 的函数 Bytes.compare。这是什么意思？我试图比较相等的 2 个字节对象，但我得到了 0。对于 2 个不同的我得到了 -529068432。

因此，该函数似乎为相等的字节返回 0，否则返回其他内容。但只是问，什么是“官方规范”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:25:14.743

它类似于我们给[Array.sort](http://haxe.org/api/array)的 compare 参数。在这种情况下，它会返回

*   0 如果 x == y
*   >0 如果 x > y
*   <0 如果 x < y

其中 x 是调用者，y 是其他字节。

只是一个提示，如果有不清楚的地方，您可以随时查看源代码 ( [Bytes.compare's](http://code.google.com/p/haxe/source/browse/trunk/std/haxe/io/Bytes.hx#127) )。

# knockout.js - 淘汰赛 - 可暂停阵列不起作用

> ID：13513076
> 
> 赞同：1
> 
> 时间：2012-11-22T12:47:53.630
> 
> 标签：knockout.js

我正在使用此页面中可暂停的淘汰赛：[https ://github.com/Areson/Knockout-Extensions/wiki/Knockout.Pausable](https://github.com/Areson/Knockout-Extensions/wiki/Knockout.Pausable)

它在可观察对象上完美运行，但是我无法让它与可观察数组一起使用。数组声明如下：

```
 var itemModel = function () {
          var me = this;
          me.Key = ko.observable(0).extend({ pauseable: true });
          me.Value = ko.observable('').extend({ pauseable: true });

      };

 me.testArray = ko.observableArray().extend({ pauseable: true }); 
```

当我使用： me.testArray.pause(); 和 me.testArray.resume();

它没有任何效果。

这是完整示例的 JS fiddle 的链接：

[http://jsfiddle.net/almir/TTsZ5/](http://jsfiddle.net/almir/TTsZ5/)

对你的帮助表示感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:24:25.993

我只是在这里假设，但是暂停 observableArray 将在您添加或删除项目时暂停绑定，而不是在您修改数组中项目的属性时。

# jquery - 单击并拖动以滚动时禁用链接（jQuery）

> ID：13513077
> 
> 赞同：6
> 
> 时间：2012-11-22T12:47:53.313
> 
> 标签：jquery, hyperlink, scroll, drag, disable-link

见小提琴：http: [//jsfiddle.net/mrcarllister/Z2GjN/](http://jsfiddle.net/mrcarllister/Z2GjN/)

基本上，除了单击并拖动锚点/链接时，我已经让单击-拖动-滚动正常工作。

似乎只有当鼠标光标停留在释放链接上时，才会跟随 url（例如，如果您拖动得足够远并且链接离开窗口，则效果很好。）

```
;(function($){ 

$.fn.scrollsync = function( options ){
var settings = $.extend(
        {   
            targetSelector:':first',
            axis: 'xy'
        },options || {});

function scrollHandler(event) {
    if (event.data.xaxis){
        event.data.followers.scrollLeft(event.data.target.scrollLeft());
    }
    if (event.data.yaxis){
        event.data.followers.scrollTop(event.data.target.scrollTop());
    }
}

settings.target = this.filter(settings.targetSelector).filter(':first');
settings.followers=this.not(settings.target); // the rest of elements

settings.xaxis= (settings.axis=='xy' || settings.axis=='x') ? true : false; 
settings.yaxis= (settings.axis=='xy' || settings.axis=='y') ? true : false;
if (!settings.xaxis && !settings.yaxis) return;  

settings.target.bind('scroll', settings, scrollHandler);

};

})( jQuery ); 

;(function($){

$.fn.dragscrollable = function( options ){

var settings = $.extend(
    {   
        dragSelector:'>:first',
        acceptPropagatedEvent: true,
        preventDefault: true
    },options || {});

var dragscroll= {
    mouseDownHandler : function(event) {

        if (event.which!=1 ||
            (!event.data.acceptPropagatedEvent && event.target != this)){ 
            return false; 
        }

        event.data.lastCoord = {left: event.clientX, top: event.clientY}; 

        $.event.add( document, "mouseup", 
                     dragscroll.mouseUpHandler, event.data );
        $.event.add( document, "mousemove", 
                     dragscroll.mouseMoveHandler, event.data );
        if (event.data.preventDefault) {
            event.preventDefault();
            return false;
        }
    },
    mouseMoveHandler : function(event) { 

        var delta = {left: (event.clientX - event.data.lastCoord.left),
                     top: (event.clientY - event.data.lastCoord.top)};

        event.data.scrollable.scrollLeft(
                        event.data.scrollable.scrollLeft() - delta.left);
        event.data.scrollable.scrollTop(
                        event.data.scrollable.scrollTop() - delta.top);

        event.data.lastCoord={left: event.clientX, top: event.clientY}
        if (event.data.preventDefault) {
            event.preventDefault();
            return false;
        }

    },
    mouseUpHandler : function(event) { 
        $.event.remove( document, "mousemove", dragscroll.mouseMoveHandler);
        $.event.remove( document, "mouseup", dragscroll.mouseUpHandler);
        if (event.data.preventDefault) {
            event.preventDefault();
            return false;
        }
    }
}

this.each(function() {

    var data = {scrollable : $(this),
                acceptPropagatedEvent : settings.acceptPropagatedEvent,
                preventDefault : settings.preventDefault }

    $(this).find(settings.dragSelector).
                    bind('mousedown', data, dragscroll.mouseDownHandler);
});
}; 

})( jQuery ); 
```

​</p>

我很确定我必须'return：false;' 对于锚点，但我不确定如何仅在拖动/滚动时执行此操作。

任何帮助，将不胜感激。

**编辑**- 伊恩的建议有效，但我只需要一些修改：

1.  仅上下滚动（不向左或向右）
2.  仅限于内容/ div 大小 - 并且不再滚动。

--->>>>>>>>>>>>>

干杯，

卡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:17:52.937

好吧，这里的问题是它使用鼠标上下来工作，所以你可以永久禁用锚，或者它会工作，所以你需要有一些业务逻辑来说明它何时打开和关闭。如果你想编辑 dragscrollable，把它放在代码中就可以了

[http://jsfiddle.net/Z2GjN/33/](http://jsfiddle.net/Z2GjN/33/)

我添加了

```
event.data.initCoord = event.data.lastCoord 
```

到 mouseDownHandler，我添加了

```
 if(event.data.lastCoord != event.data.initCoord){
            obj = $(this);
            $('a', obj).on('click', function(event) {
             event.preventDefault();                      
            });
            setTimeout(function(){$('a', obj).off('click'); },300);
        } 
```

到 mouseUpHandler，我打开了 preventdefault

```
$('#viewport, #inner').
        dragscrollable({dragSelector: '.dragger:first', preventDefault: true}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:16:19.763

根据您的示例，这似乎适用于小提琴。

```
<head>
    <title>iPhone Test</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>

<script type="text/javascript">
  $(document).ready(function() {

    // Set drag scroll on first descendant of class dragger on both selected elements
    $('.dragger').
        draggable({ start:function(){ console.log("HI");

    }});

  });

</script>

</head> 
```

# ssas - 立方体中的用户定义层次结构（阅读障碍）

> ID：13513078
> 
> 赞同：1
> 
> 时间：2012-11-22T12:48:05.007
> 
> 标签：ssas, hierarchy, dimension

我可以用这样的关系制作 6 级维度层次结构：

1.  主要-> lvl1
2.  lvl1 -> lvl2
3.  lvl2 -> lvl3
4.  lvl3 -> lvl4
5.  lvl4 -> lvl5

层次结构在维度浏览器中看起来不错。所有属性键都是彼此的组合键。

当我尝试在多维数据集中使用维度时，将 main 作为度量的关键，它将失败引用：'找不到属性键'main'..'

在度量中是维度层次结构的所有成员。

关系有问题还是缺少什​​么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:32:08.190

这是 SSAS 的一个非常棘手的领域。最快的方法可能是安装 BIDS Helper 并使用“维度健康检查”功能：

[http://bidshelper.codeplex.com/wikipage?title=Dimension%20Health%20Check&referringTitle=Documentation](http://bidshelper.codeplex.com/wikipage?title=Dimension%20Health%20Check&referringTitle=Documentation)

它将向您显示数据中的所有问题（不仅仅是您迄今为止发现的第一个问题），并为您提供有关如何继续的一些信息。

由于调试和修复这些问题的困难，我个人已经不再建立属性关系。我现在倾向于构建每个属性都与关键属性直接相关的维度。您永远不会看到这些错误，并且性能似乎非常相似。您仍然可以向用户呈现层次结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:59:25.820

在维度中定义复合键时，必须提供与度量键列对应的值列。

# android - Webview 弹出窗口不起作用

> ID：13513081
> 
> 赞同：1
> 
> 时间：2012-11-22T12:48:17.997
> 
> 标签：android, html, android-webview

我正在尝试在单击时显示一个弹出对话框，其中包含来自 web 视图的图像。我的问题是弹出对话框没有弹出，但它在 webview 中全屏打开或在浏览器中打开。是否可以在 webview 中弹出？我使用了以下网络设置，但事实证明是徒劳的。

```
WebSettings settings = wvcontent.getSettings(); 
settings.setSupportMultipleWindows(true);
settings.setPluginsEnabled(true);
settings.setAllowFileAccess(true);
settings.setJavaScriptEnabled(true); 
```

这是我的 html 内容。

html_content =

```
"<strong>"+title+"</strong>" 
               + " <br><br><img src='"+single_image+" width='300' height='211'>" 
               + "<br> " 
               + ""+ content + "<br>"
               + str 
               + "<div id='popup' style='display:none'>"
               + "<a id='popup-close' href='' class='button'>"
               + "Fermer" 
               + "</a><p><img id='image-placeholder' width='300px';height='250px'  src=''>"

        + "<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js'></script>"
               + "<script type='text/javascript'>
                  $(document).ready( function() {
                        $('.popup-open').click( function(e)" 
               +        "{$('#popup:visible').hide(); 
                         e.preventDefault();

                 $('#image-placeholder').attr('src', $(this).attr('href'));" 
               + "$('#popup').fadeIn('fast');});
                  $('#popup-close').click( function(e) {e.preventDefault();                                                        $('#popup').fadeOut('fast');});});" 
               +"</script>"; 
```

有人可以提供提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:59:41.830

您应该尝试使用模式对话框，而不是做一个普通的弹出窗口。这将在同一页面中打开，位于活动内容的顶部。我相信，在 Android 上，您尝试对弹出窗口进行的操作是不可能的。它们将始终在新窗口中打开。

[http://jqueryui.com/dialog/#modal](http://jqueryui.com/dialog/#modal)

# android - How to update my apps in my device if exists from Google Play Store in android?

> ID：13513082
> 
> 赞同：-1
> 
> 时间：2012-11-22T12:48:17.343
> 
> 标签：android, google-play

How can I solve this types of issue from my android device when I update application if any one then not updated application from Google Play store, so what I do? Please tell me and solve this issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:02:44.310

if I understand you correctly you want to force updates on your users.

this can be achieved in a pretty simple way if your app is connected to your own server for data transfer.

all you have to do is send a key to your sever for authentication (in addition to the user and password or whatever is sent).

```
private static final String [] myKey = new String [] {"str1", "str2", "str3", "str4"};

public boolean login(String user, String password) {

    boolean loginSuccessful ServerModule.sendRequest(user, SHA1(password + TextUtils.join("-", myKey));
    if(loginSuccessful) {
          return true;
    }
    return false;
} 
```

the SHA1 function is taken from [this answer](https://stackoverflow.com/a/5980789/1056359):

```
private static String convertToHex(byte[] data) {
    StringBuilder buf = new StringBuilder();
    for (byte b : data) {
        int halfbyte = (b >>> 4) & 0x0F;
        int two_halfs = 0;
        do {
            buf.append((0 <= halfbyte) && (halfbyte <= 9) ? (char) ('0' + halfbyte) : (char) ('a' + (halfbyte - 10)));
            halfbyte = b & 0x0F;
        } while (two_halfs++ < 1);
    }
    return buf.toString();
}

public static String SHA1(String text) throws NoSuchAlgorithmException, UnsupportedEncodingException {
    MessageDigest md = MessageDigest.getInstance("SHA-1");
    md.update(text.getBytes("iso-8859-1"), 0, text.length());
    byte[] sha1hash = md.digest();
    return convertToHex(sha1hash);
} 
```

every time you send an update you change the key in the app and in the server and now your users are forced to update.

you should probably add a UI that prompts if the user has an old key and send them to the app in the Google Play site. You can do this with an intent.

```
final String appName = "com.example";
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id="+appName))); 
```

(this code was taken from [this answer](https://stackoverflow.com/a/10922920/1056359))

# mysql - mysql：拒绝更新行

> ID：13513084
> 
> 赞同：3
> 
> 时间：2012-11-22T12:48:21.153
> 
> 标签：mysql

我有一个包含 3 个字段的表，其中一个是“状态”。status 是一个 ENUM，内容可能为 'a'、'b' 或 'c'。

我需要找到一种方法来拒绝对具有“status”='b'的所有行的任何更新，甚至不应该允许root用户更新这些行。所以这就像让这一行“最终”。如果 status = a 或 status = c，则应允许更新。

有没有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:08:17.790

您可以使用此触发器 -

```
DELIMITER $$

CREATE TRIGGER trigger1
  BEFORE UPDATE
  ON table1
  FOR EACH ROW
BEGIN
  IF OLD.status = 'b' THEN
    SIGNAL SQLSTATE '02000' SET MESSAGE_TEXT = 'Cannot update value';
  END IF;
END
$$

DELIMITER ; 
```

如果你知道嘟嘟用户的祸根并想让他更新，那么你可以使用这个条件 -

```
...
IF CURRENT_USER() <> 'root@localhost' AND OLD.status = 'b' THEN
  SIGNAL SQLSTATE '02000' SET MESSAGE_TEXT = 'Cannot update value';
END IF;
... 
```

# ruby-on-rails - 在不弄乱 Airbrake 的情况下拯救 500 错误

> ID：13513086
> 
> 赞同：6
> 
> 时间：2012-11-22T12:48:24.487
> 
> 标签：ruby-on-rails, airbrake

我在我的 Rails 应用程序上安装了 Airbrake。但是，当 500 发生时，我还想执行一些其他操作。如何在不干扰 Airbrake 的情况下挽救 500 个错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T13:05:19.117

你可以在你的 中做到这一点的一种方法`ApplicationController`，你可以把

```
unless Rails.application.config.consider_all_requests_local
  rescue_from Exception, with: :render_500
end 
```

后来，一种新`render_500`方法

```
def render_500(ex)
  notify_airbrake(ex)
  # render your template/message
end 
```

# ios - 将 NSArray 结果从 Web 服务传递到 UITableViewController

> ID：13513089
> 
> 赞同：1
> 
> 时间：2012-11-22T12:48:36.407
> 
> 标签：ios, uitableview, nsarray

抱歉，如果这是一个重复的问题，但我似乎无法理解逻辑。

作为学习经验，我正在使用 Web 服务来填充 uitableview。基本上，我的 Web 服务返回一个数组数组，我希望将其传递给我的 UItableviewcontroller。我在一个单独的班级中有我的网络服务，我不确定如何传递数组。

这里的最佳实践通常是什么？

这是我的 WebService.m 文件：

```
#import "WebService.h"
#import "VaskerierTableViewController.h"

@implementation WebService

// Search the Laundrettes

-(void) searchLandrettes: (NSString*) SS {

        //create the service  
        SDZDevices2Api* service = [SDZDevices2Api service];
    service.logging = YES;

     // Returns NSMutableArray*.
    [service LocationFindSimple:self action:@selector(LocationFindSimpleHandler:) SearchString: SS Max: 25 BankId: [NSMutableArray array] BankName: [NSMutableArray array] Id: [NSMutableArray array] Name: [NSMutableArray array] Icon: [NSMutableArray array] Zip: [NSMutableArray array] Attributes: [NSMutableArray array]];

}

// Handle the response from LocationFindSimple.

 - (void) LocationFindSimpleHandler: (id) value {

     // Handle errors
     if([value isKindOfClass:[NSError class]]) {
             NSLog(@"%@", value);
         return;
     }

     // Handle faults
      if([value isKindOfClass:[SoapFault class]]) {
         NSLog(@"%@", value);
         return;
      }

      // Do something with the NSString* result
          NSArray* result = (NSArray*)value;
      NSLog(@"LocationFindSimple returned the string-value: %@", result);

          // Antal arrays i alt
          int arrayCount = [value count];
          NSLog(@"ArrayCont = %i", arrayCount);

     /*
      * Første array indeholder kun taksten "OK"
      * De efterfølgende synes at indeholde 6 elementer
      * Derfor opretter jeg 6 array, til det indhold, som jeg synes at kunne finde
      */

     if (arrayCount > 1) {

         // Blot til test
         NSLog(@"test = %@", [value objectAtIndex:1]);

         // Et array til hver type information, for hvert resultat
         NSArray *bankId = [[NSArray alloc] initWithArray:[value objectAtIndex:1]];
         NSArray *bankName = [[NSArray alloc] initWithArray:[value objectAtIndex:2]];
         NSArray *iId = [[NSArray alloc] initWithArray:[value objectAtIndex:3]];
         NSArray *name = [[NSArray alloc] initWithArray:[value objectAtIndex:4]];
         NSArray *icon = [[NSArray alloc] initWithArray:[value objectAtIndex:5]];
         NSArray *zip = [[NSArray alloc] initWithArray:[value objectAtIndex:6]];
         NSArray *attributes = [[NSArray alloc] initWithArray:[value objectAtIndex:7]];
    }
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:05:21.483

使用类函数从 WebserviceManager 中获取返回的数组。在视图的视图控制器的 viewdidLoad 中调用该函数。

尝试低于概念。在您的 WebserviceManager 类中

> +(NSMutableArray *)getArrayFromWebservice { ........ 返回返回数组；}

在 viewController 的 viewdidLoad 中调用该函数并放松您的 tableview。

更新1：选中“+”号表示这是目标C上的类方法。所以你可以直接使用类名调用它。

例如

> self.list = [WebserviceManager getArrayFromWebservice];

# php - 一次服务一位客户

> ID：13513097
> 
> 赞同：2
> 
> 时间：2012-11-22T12:49:07.063
> 
> 标签：php

我需要放置一个每次只能服务一个请求的 php 脚本。也就是说，如果用户请求该页面，则必须在未完全处理先前的请求之前为他提供服务。

为了实现这一点，我会使用应用程序变量，但是如果我很好理解的话，我发现 php 没有类似的东西。

然后我尝试使用`apc`，将这段代码放在一起：

```
<?php

  while (apc_fetch('foo')) {
    echo "waiting...\n";
    sleep(1);
  }

  $foo = true;
  apc_store('foo', $foo);

  echo "results.";
  sleep(10);

  apc_delete('foo');

?> 
```

但是如果我打开这个页面两次，我看到的只是`results.`两个。我也期待阅读一些内容`waiting...`，因为当我第二次加载页面时，第一个应该设置`foo`为`true`.

这是对 的合法（但错误）使用`apc`吗？我是否使用了错误的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:24:23.627

我不喜欢回答自己的问题，但最后这是我发现做我想做的最简单的方法：

```
<?php

$fp = fopen("lock.txt", "r");

if (flock($fp, LOCK_EX)) {  // acquire

  echo "processing...";

  //if (isset($_GET['sleep'])) sleep(5); // decomment this line to test:
                                         // load "script.php?sleep=1" and then
                                         // load "script.php". The second page will
                                         // wait until the first one ends.

  flock($fp, LOCK_UN); // release

} else {
  // exception handling
  echo "ERROR: unable to flock()";
}

fclose($fp);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:16:08.537

```
<?php

  while ($var = apc_fetch('foo')) {
    echo "apc_fetch positive, got ".var_export( $var, true)."\n";
    sleep(1);
  }
  echo "apc_fetch was negative, continuing. \n";

  $foo = "asd";
  apc_store('foo', $foo);
  if( !apc_fetch('foo')) {
     echo "Btw, apc_store was not successful with foo\n";
  }

  echo date('c').": results.";
  flush();
  sleep(10);

  apc_delete('foo');

?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T13:07:41.617

你的apc设置正确吗？apc_fetch 在错误时返回 false。

# c# - 在 c# 中通过具有相对路径的代码启动应用程序

> ID：13513100
> 
> 赞同：0
> 
> 时间：2012-11-22T12:49:18.653
> 
> 标签：c#, visual-studio, tfsbuild

谁能向我解释如何使用导航到相对路径

```
AppDomain.CurrentDomain.BaseDirectory 
```

或类似的东西？

我想从我的单元测试中启动一个 Web 服务。我知道如何像上面那样获取单元测试的相对路径或使用系统反射版本，但我不知道如何使用它进行导航。

单元测试在 Visual Studio 中的一个单独项目中，其文件夹与服务不同，但它们都在同一个解决方案中，因此相对于彼此的路径始终相同，但我不知道如何使用它

```
Process.Start 
```

所以我可以告诉它启动服务。

如果有人知道，请告诉我，或者如果您偶然知道在 TFS 自动构建中启动 Web 服务的另一种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:58:33.813

有一个名为“System.Diagnostics.ProcessStartInfo”的对象可以帮助您调用外部进程或从 .NET 应用程序启动应用程序。可以使用某种 Path.Combine() 方法遍历文件夹，并且您可以将应用程序所在的相同路径传递给 ProcessStartInfo 对象的“WorkingDirectory”属性。

```
var processStartInfo = new ProcessStartInfo(string.Format("cmd /c start some service"))
            {
                WorkingDirectory = ==PathWhereApplicationIs==,
                WindowStyle = ProcessWindowStyle.Hidden,
                ErrorDialog = false,
                CreateNoWindow = true,
                RedirectStandardOutput = true,
                RedirectStandardError = true,
                UseShellExecute = false,
            }; 
```

在上面的代码片段中： cmd 是命令提示符，/c 表示我们正在传递一些参数，其余的可以是您希望执行的任何命令

# python - 如何使用 python 发送并发 10,000 个 post 请求？

> ID：13513103
> 
> 赞同：3
> 
> 时间：2012-11-22T12:49:29.043
> 
> 标签：python, testing, load-testing, performance-testing

我开发了 REST 服务器。我托管了我的虚拟机 nginx 服务器。现在我想通过每秒发送 10,000 个并发请求来进行基准测试。那么有什么解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-19T21:08:52.787

[蝗虫](http://locust.io/)会完成这项工作。由于使用了用于生成负载的线程，JMeter 最终将无法承受巨大的负载。

Locust 使用[gevent](http://www.gevent.org/) - 没有线程，限制更少。

使用 locust ，如果一台机器的硬件不够用，甚至可以从[集群中生成负载。](http://docs.locust.io/en/latest/running-locust-distributed.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:58:17.120

尝试使用[gevent](http://gevent.org)。

Monkey-patch all with `gevent.monkey.patch_all`，编写使用 urllib2.urlopen 进行查询的函数，并将其作为 greenlet 生成 10000 次。

但是我怀疑你是否可以使用 Python 每秒执行 10000 个请求（但我认为你应该尝试）。

如果工具无关紧要，您只需要执行没有任何逻辑的简单 POST 请求，请尝试使用[Apache Benchmark](http://httpd.apache.org/docs/2.2/programs/ab.html)而不是 Python。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:57:07.547

以编程方式，您可以创建线程并通过每个线程进行 url 获取，但不确定是否可以创建 10,000 个请求。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-22T12:52:24.273

每秒 10,000 次？你需要很多机器才能做到这一点。

编写一个可以串行 POST 请求的客户端，然后在多台机器上复制它。

# javascript - 如何改变这个 d3.js 图表

> ID：13513104
> 
> 赞同：0
> 
> 时间：2012-11-22T12:49:31.867
> 
> 标签：javascript, canvas, charts, svg, d3.js

这是一个 d3 js 图的链接。

[http://enjalot.com/inlet/4131006/](http://enjalot.com/inlet/4131006/)

这是代码

```
 var w = 300,
    h = 300,
    padding = 31,
    p = 10;

var data = [{count:200,year:2008},
    {count:240,year:2010},
    {count:290,year:2009}];

var bar_height = d3.scale.linear()
    .domain(d3.extent(data, function(d) { return d.count; }) )  // min max of count
    .range([p,h-p]);  // min max of area to plot in

var bar_xpos = d3.scale.linear()
    .domain(d3.extent(data, function(d) { return d.year; }) )  // min max of year
    .range([p,w-p]);  // min max of area to plot in

var xAxis = d3.svg.axis()
            .scale(bar_xpos)
            .orient("bottom")
            .ticks(5);  //Set rough # of ticks

var yAxis = d3.svg.axis()
            .scale(bar_height)
            .orient("left")
            .ticks(5);

var svg = d3.select("svg")
    .attr("width", w)
    .attr("height", h);

svg.append("g")
    .attr("class", "axis")
    .attr("transform", "translate(0," + (h - padding) + ")")
    .call(xAxis);

svg.append("g")
    .attr("class", "axis")
    .attr("transform", "translate(" + padding + ",0)")
    .call(yAxis);

svg.selectAll("rect")
    .data(data)
    .enter().append("rect")
    .attr("x", function(d) {
        return bar_xpos(d.year); })
    .attr("y", function(d) { 
        return h - bar_height(d.count); })
    .attr("width", 10)
    .attr("height", function(d) {return bar_height(d.count); })
    .attr("fill", "steelblue") 
```

我已经能够在该图中绘制 y 轴和 x 轴，但它们看起来不正确。有一些问题 矩形线不在 X 轴上。图表上的x轴和y轴上没有0。它以json数据中的最小值开始。并且可以通过任何方式配置轴上两个标记之间的距离。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:02:43.190

要配置轴，您必须修改比例。

```
var bar_height = d3.scale.linear()
    .domain(d3.extent(data, function(d) { return d.count; }) )  // min max of count
    .range([p,h-p]);  // min max of area to plot in

var bar_xpos = d3.scale.linear()
    .domain(d3.extent(data, function(d) { return d.year; }) )  // min max of year
    .range([p,w-p]);  // min max of area to plot in 
```

d3.extent() 同时返回数据的最小值和最大值，并将其用作图形的域。因为您使用`bar_height`and`bar_xpos`来格式化您`scale`的 s，所以刻度的最小值*也*将是数据中的最小值。要解决此问题，请`d3.max()`改用，如下所示：

```
var bar_height = d3.scale.linear()
    .domain([d3.max(data, function(d) { return d.count; }), 0] )  // min max of count
    .range([p,h-p]);  // min max of area to plot in

var bar_xpos = d3.scale.linear()
    .domain([2000, d3.max(data, function(d) { return d.year; })] )  // min max of year
    .range([p,w-p]);  // min max of area to plot in 
```

您可以为 bar_xpos min 使用 0，但如果您按年进行，则没有意义，因为您的数据将无法实际读取。我在这里使用了 2000 分钟。

[这里](http://enjalot.com/inlet/4132552/)的工作示例。

此外，在此示例中，我将您的条形位置格式化为与轴更好地对齐。我替换`.attr('width', 10)`为, 并从attr 中`.attr('width', barwidth)`减去。这将使你的酒吧的右边缘与轴的右边缘对齐，而不是溢出边缘。`barwidth``x`

**编辑：** 修改`y`和`height`属性。高度则相反，否则在图表下方。链接已更新。

```
.attr("y", function(d) { 
    return bar_height(d.count); })
.attr("width", barwidth)
.attr("height", function(d) {return h - bar_height(d.count) - padding; }) 
```

# javascript - 使用backbone.js 获取单个模型

> ID：13513107
> 
> 赞同：0
> 
> 时间：2012-11-22T12:49:41.447
> 
> 标签：javascript, backbone.js, model, fetch

在我的backbone.js 代码中，我一直试图从一个url 中获取一个模型。我一定是做错了什么，因为我的模型永远不会使用 fetch() 填充。

我尝试在互联网上寻找解决方案，但我无法弄清楚我做错了什么。

任何帮助深表感谢！

我有一个 JSON 文件，如下所示：

```
JSON = { size : 'small' , username : 'jasper' , messages : '3' } 
```

和代码：

```
(function($){

Header=Backbone.Model.extend({

    defaults:{

        size:"large",

    },

    urlRoot:'urltofile.json',

});

header=new Header();

var HeaderView=Backbone.View.extend({

    events:{    
        'click #header_account_options_login':'loginClicked'
    },

    initialize:function(){

        $(this.el).append('<div id="header"></div>');

        _.bindAll(this,'render','loginClicked');

        dust.loadSource(dust.compile($(this.options.tpl).html(),'header-template'));

        this.model.bind('change',this.render,this);

        this.render();

    },

    render:function(){

        var_self=this;

        dust.render('header-template',this.model.toJSON(),function(error,rendered){

            $('#header').replaceWith(rendered);

        });

        return this;

    },

    loginClicked:function(){

        this.model.fetch();
        console.log(this.model);

    }

});

var headerView=new HeaderView({

    el:'#container',
    tpl:'#header-template',
    model:header

});

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:20:10.443

我发现 JSON 中的问题不正确。修复 JSON 解决了​​这个问题

# javascript - 避免在之前设置 true 值时更改 JS 变量值

> ID：13513110
> 
> 赞同：0
> 
> 时间：2012-11-22T12:49:51.517
> 
> 标签：javascript, jquery

我有一个 javascript 函数，它检查文本框的值并返回关于它的值的 true 或 false。

我有几个文本框要检查：

```
<asp:textbox id="txt1" class="tocheck" runat="server />
<asp:textbox id="txt2" class="tocheck" runat="server />
<asp:textbox id="txt3" class="tocheck" runat="server /> 
```

当我按下提交按钮（Linkbutton1）时，我会检查它们的所有值：

```
$('#LinkButton1').click(function () {
    var error = false;
    $.each($('.tocheck'), function (i, v) {
        error =  check($(v).val(), $(this));
    });
    return error;
}); 
```

如果其中一个调用返回 true，则必须将整体验证视为失败并且`true`必须保留该值。

所以我想要的是防止将错误变量设置为`false`之前已经设置为`true`.

是否有任何**操作员**或**功能**可以控制它？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:51:08.657

```
$('#LinkButton1').click(function () {
    var error = false;
    $.each($('.tocheck'), function (i, v) {
        if (!error) {
            error =  check($(v).val(), $(this));
        }
    });
    return error;
}); 
```

你也可以`false`在函数中返回来打破 each。文档中的更多信息：http: [//api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:53:02.947

您可以[`filter()`](http://api.jquery.com/filter/)改用：

```
$("#LinkButton1").click(function() {
    return $(".tocheck").filter(function() {
        return check(this.value, this);
    }).length;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:53:16.590

```
$('#LinkButton1').click(function () {
    var error = false;
    $.each($('.tocheck'), function (i, v) {
        error =  check($(v).val(), $(this));
        if(error)
            return error;
    });
    return error;
}); 
```

# ruby-on-rails - 在 Rails 中解析文本

> ID：13513120
> 
> 赞同：0
> 
> 时间：2012-11-22T12:50:14.970
> 
> 标签：ruby-on-rails, parsing, heroku, cloudmailin

我有一个在[Heroku](http://www.heroku.com)上运行的 RoR 应用程序，我使用[Cloudmailin](https://addons.heroku.com/cloudmailin)插件将电子邮件发送到应用程序本身。

这些电子邮件的内容将用于在数据库中创建新内容。这是一个应用程序，用户可以在其中对其他用户下注。结果是通过电子邮件发送到应用程序，因此可以触发结算过程。

我有一个看起来像这样的传入邮件控制器：

```
class IncomingMailsController < ApplicationController
  skip_before_filter :verify_authenticity_token

  def create
    Spotprice.create(:deliverydate => Date.tomorrow, :spotarea_id => Spotarea.find_by_areaname("Phelix").id, :product_id => Product.find_by_productname("Base").id, :value_in_currency => "87")
  end

end 
```

上面的工作很好，但我需要它来阅读电子邮件的内容，而不是上面代码中的静态内容（*Phelix、Base、Date.tomorrow 和 87*）。

那么当电子邮件正文如下所示时，我该怎么做：

```
23112012 Phelix Base 87.00
23112012 System Peak 64.55 
```

邮件有多行，其中每一行是数据库中的一个新 Spotprice。这意味着我还必须以某种方式遍历邮件中的每一行并分别创建每个 Spotprice。

帮助将非常受欢迎:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:56:16.267

如果您正在寻找的只是如何解析每一行以空格分隔的文本，那么这应该可以 -

```
email_text_array = []

email_text.split("\n").each do |email_line|
    email_text_array << email_line.split(" ")
end 
```

和 email_text_array 看起来像

```
email_text_array = [
    ["23112012", "Phelix", "Base", "87.00"],
    ["23112012", "System", "Peak", "64.55"]
] 
```

# database - 简单的 VB 2010 应用程序未将数据保存到 Access 2007

> ID：13513123
> 
> 赞同：2
> 
> 时间：2012-11-22T12:50:18.107
> 
> 标签：database, vb.net, winforms, ms-access-2007

我已经下载了 VB 2010 的试用版并制作了一个连接到 Access 2007 MDB 文件的小应用程序。

有几件事出了问题：

1.  如果我尝试发布它，然后运行生成的安装文件，它会说找不到 .MDB 文件。

2.  如果我在开发过程中运行它（F5），它运行良好，当我在 DataGridView 中输入新数据时，我知道它会被保存，因为当我关闭会话并再次按 F5 时，新输入的数据仍然存在。（更新数据的相关代码很简单）：

    ```
    Me.Validate()
    Me.MenuItemsBindingSource.EndEdit()
    Me.MenuItemsTableAdapter.Update(Me.MenuOrdersDataSet.MenuItems)
    Me.MenuOrdersDataSet.AcceptChanges() 
    ```

但是，如果我关闭整个项目并重新运行它并查看 DataGridView，或者如果我手动检查 .MDB 文件，它不再具有新输入的数据。

这是我的连接代码：

```
 Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Me.MenuItemsTableAdapter.Fill(Me.MenuOrdersDataSet.MenuItems)
    Dim con As New OleDb.OleDbConnection
    Dim dbString As String
    Dim ds As New DataSet
    Dim da As OleDb.OleDbDataAdapter
    Dim sql As String

    dbString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\MenuOrders.accdb"

    con.ConnectionString = dbString
    con.Open()

    sql = "SELECT * FROM MenuItems"
    da = New OleDb.OleDbDataAdapter(sql, con)
    da.Fill(ds, "MenuItems")
    con.Close()

End Sub 
```

怎么了？这些问题是否与试用版有关，还是我应该注意其他一些明显的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:05:37.463

最后做了以下修复。

在解决方案资源管理器中，我打开 App.config 并将数据库的绝对路径放在`connectionStrings`标签中，替换默认`|DataDirectory|`文本。

不确定这是否是最好的选择……但它奏效了！

```
<connectionStrings>
    <add name="MenuSystem.My.MySettings.MenuDBConnectionString" connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Administrator\Documents\MenuDB.accdb"
        providerName="System.Data.OleDb" />
</connectionStrings> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:15:02.290

我曾经遇到过同样的问题，我想我通过将我的数据源/数据库**复制到输出目录**设置为“如果更新则复制”来解决它，位于 MyDatabase.mdf 文件的属性窗口中。

有时该选项可以默认为“始终”，这解释了为什么每次运行应用程序时数据集*都会重置。*

# c++ - 从 lambda 内部返回 C++11 中的 lambda 类型（平面映射函数）

> ID：13513129
> 
> 赞同：3
> 
> 时间：2012-11-22T12:50:21.563
> 
> 标签：c++, c++11, lambda

我已经在 scala 的平面地图上实现了一个函数，我想知道我是否可以访问 lambda 中的 lambda 的返回类型以避免在使用时重复它

```
/**
 * Inspired on scala's flat map, provide a @param func which output will be flattened in the output
 * sequence, which is the return type of @param func
 */
template <typename IN, typename F>
auto flat_mapf(const IN& input, F func)
    -> decltype(func(std::declval<typename IN::value_type>()))
{
    decltype(func(std::declval<typename IN::value_type>())) output;
    auto outit = std::back_inserter(output);
    for (auto i = input.begin(); i != input.end(); ++i)
    {
        decltype(func(std::declval<typename IN::value_type>())) interm = func(*i);
        std::move(interm.begin(), interm.end(), outit);
    }
    return output;
}

// usage example, I would like to avoid repeating vector<size_t> type two times:
auto vo = flat_mapf(vi, [](const size_t& x) -> vector<size_t> {
    vector<size_t> res;
    for (size_t i = 0; i < x; ++i)
        res.push_back(x);
    return res;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:55:45.420

你不能省略`-> vector<size_t>`使用示例中的 ，所以编译器推断出 lambda 的返回类型吗？这样你只说一次类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:21:08.410

由于您要提供的功能适用于范围（这是非常合理的事情），我可以向您指出 Boost.Range。用户将能够将您`flat_mapf`与例如`boost::irange`像这样结合起来：

```
auto vo = flat_mapf(vi, [](size_t x) {
    return boost::irange(size_t { 0 }, x);
 }); 
```

（`boost::irange`仅适用于整数类型，`boost::counting_range`更通用。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:40:01.323

返回一个实际的向量可能不是正确的方法。这需要在将每个元素的所有输出累积在一起之前生成和缓存。

某种生成器模式，例如返回 boost 可选（空表示已完成生成）等的子映射函子意味着您不需要中间容器。将这样的生成器转换为标准向量很容易，并且当每个子映射都是生成器 lambda 时编写平面映射也很容易。

我提出这个是因为它也意味着双类型规范消失了。在三元运算符不起作用的情况下，您只有一个位置返回，然后另一个位置返回空。

简而言之，也许您正在输入大量标准向量，因为您正在制作大量标准向量。

# c# - 组合两个 Linq 表达式

> ID：13513134
> 
> 赞同：5
> 
> 时间：2012-11-22T12:50:44.320
> 
> 标签：c#, linq

使用来自各种 SO 帖子的信息，尤其是这个[博客](http://blogs.msdn.com/b/meek/archive/2008/05/02/linq-to-entities-combining-predicates.aspx)（更正为使用`AndAlso`而不是`And`），我设法将类似类型的 linq 表达式组合成一个谓词。但现在我想组合两个表达式，其中一个是另一个的输入。这是完全扩展的原件`Expression`；

```
 private Expression<Func<T, bool>> ExpressionIsNamed(IEnumerable<EntityName> AccessorNames)
    {
        // works
        Expression<Func<T, bool>> Texpr = x => x.Security.Readers.Any(n => AccessorNames.ToStringArray().Contains(n.Text));

        return Texpr;
    } 
```

请注意，至关重要的是，我需要将这些作为**表达式**进行管理，因为我的数据库驱动程序需要遍历树并转换为本机调用，因此不能使用**Compile()**进行组合。

`Any()`所以下面是我想与上面的调用结合的功能。最终的输出表达式需要是类型`Expression<Func<T, bool>>`，我需要传入`x.Security.Readers`这个。

```
 public static Expression<Func<IEnumerable<EntityName>,bool>> AccessCheckExpression(IEnumerable<EntityName> AccessorNames)
    {
        return accessList => accessList.Any(n => AccessorNames.ToStringArray().Contains(n.Text));
    } 
```

我已经做到了这一点，但我正在努力解决如何换出`accessList =>`并`accessCheck`在`accessList`单个表达式中使用它。到目前为止，我有这个；

```
 private Expression<Func<T, bool>> ExpressionIsNamed(IEnumerable<EntityName> AccessorNames)
    {
        Expression<Func<T, IEnumerable<EntityName>>> accessList = (T x) => x.Security.Readers;
        Expression<Func<IEnumerable<EntityName>, bool>> accessCheck = SecurityDescriptor.AccessCheckExpression(AccessorNames);

        // Combine?
        Expression<Func<T, bool>> Texpr = ??? accessCheck + accessList ???

        return Texpr;
    } 
```

**[更新]**

所以我还有一点；

```
 class ParameterUpdateVisitor : System.Linq.Expressions.ExpressionVisitor
    {
        private ParameterExpression _oldParameter;
        private ParameterExpression _newParameter;

        public ParameterUpdateVisitor(ParameterExpression oldParameter, ParameterExpression newParameter)
        {
            _oldParameter = oldParameter;
            _newParameter = newParameter;
        }

        protected override Expression VisitParameter(ParameterExpression node)
        {
            if (object.ReferenceEquals(node, _oldParameter))
                return _newParameter;

            return base.VisitParameter(node);
        }
    }

    static Expression<Func<T, bool>> UpdateParameter<T>(
        Expression<Func<T, IEnumerable<EntityName>>> expr,
        ParameterExpression newParameter)
    {
        var visitor = new ParameterUpdateVisitor(expr.Parameters[0], newParameter);
        var body = visitor.Visit(expr.Body);

        return Expression.Lambda<Func<T, bool>>(body, newParameter);
    } 
```

然后我可以编译；

```
UpdateParameter(accessList, accessCheck.Parameters[0]); 
```

感谢所有这些`Invoke()`建议，但我的猜测是，当他们使用 MongoDB 驱动程序时，它不会喜欢`InvocationExpression`. 但是，`Invoke`我上面的代码现在都以完全相同的方式失败。即；

```
System.ArgumentException: Expression of type 
'System.Func`2[MyLib.Project,System.Collections.Generic.IEnumerable`1[MyLib.EntityName]]' 
cannot be used for parameter of type 
                            'System.Collections.Generic.IEnumerable`1[MyLib.EntityName]' 
```

因此，隐式参数似乎与`x.Security.Readers`普通的旧参数不同`IEnumerable<EntityName>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T13:11:56.097

`VisitorExpression`是你的朋友吗？这是合并类似内容的简化但完整的示例：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Linq.Expressions;

class Source {
    public List<Value> Values {get;set;}
}
class Value {
    public int FinalValue {get;set;}
}
static class Program {
    static void Main() {
        Expression<Func<Source, IEnumerable<Value>>> f1 =
            source => source.Values;
        Expression<Func<IEnumerable<Value>, bool>> f2 =
            vals => vals.Any(v => v.FinalValue == 3);

        // change the p0 from f2 => f1
        var body = SwapVisitor.Swap(f2.Body, f2.Parameters[0], f1.Body);
        var lambda = Expression.Lambda<Func<Source, bool>>(body,f1.Parameters);
        // which is:
        // source => source.Values.Any(v => (v.FinalValue == 3))
    }

}
class SwapVisitor : ExpressionVisitor {
    private readonly Expression from, to;
    private SwapVisitor(Expression from, Expression to) {
        this.from = from;
        this.to = to;
    }
    public static Expression Swap(Expression body,
        Expression from, Expression to)
    {
        return new SwapVisitor(from, to).Visit(body);
    }
    public override Expression Visit(Expression node)
    {
         return node == from ? to : base.Visit(node);
    }
} 
```

编辑：在你的情况下，这将是：

```
private Expression<Func<T, bool>> ExpressionIsNamed(
    IEnumerable<EntityName> AccessorNames)
{
    Expression<Func<T, IEnumerable<EntityName>>> accessList =
        (T x) => x.Security.Readers;
    Expression<Func<IEnumerable<EntityName>, bool>> accessCheck =
        SecurityDescriptor.AccessCheckExpression(AccessorNames);

    var body = SwapVisitor.Swap(accessCheck.Body,
        accessCheck.Parameters[0], accessList.Body);
    return Expression.Lambda<Func<T, bool>>(body, accessList.Parameters);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:13:12.200

我不确定它是否会起作用，但试试这个：

```
private Expression<Func<T, bool>> ExpressionIsNamed(IEnumerable<EntityName> AccessorNames)
{
    Expression<Func<T, IEnumerable<EntityName>>> accessList = (x) => x.Security.Readers;
    Expression<Func<IEnumerable<EntityName>, bool>> accessCheck = AccessCheckExpression(AccessorNames);

    var result = Expression.Lambda<Func<T, bool>>(
        Expression.Invoke(accessCheck, accessList.Body), // make invokation of accessCheck, and provide body of accessList (x.Security.Readers) as parameter
        accessList.Parameters.First() // parameter
    );

    return result;
} 
```

# jquery - IE麻烦jquery iframe的高度

> ID：13513138
> 
> 赞同：1
> 
> 时间：2012-11-22T12:50:59.047
> 
> 标签：jquery, internet-explorer, iframe, height

我有以下行来控制 iframe 在其内容中的高度：

`$("#frame",top.document).height($("#frame",top.document).contents().find("html").height());`

在有人使用 IE 之前它可以完美运行。我怎样才能让它与 IE 一起使用？

在此先感谢，埃洛

找到了解决方案：

```
var iFrame = parent.document.getElementById('frame');
newHeight = parseInt(iFrame.contentWindow.document.body.offsetHeight)+20;
$("#frame",top.document).height(newHeight); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T05:34:47.300

好的，托马斯，我们走了：

```
var iFrame = parent.document.getElementById('frame');
newHeight = parseInt(iFrame.contentWindow.document.body.offsetHeight)+20;
$("#frame",top.document).height(newHeight); 
```

# javascript - Javascript获取并格式化当前日期

> ID：13513144
> 
> 赞同：5
> 
> 时间：2012-11-22T12:51:22.120
> 
> 标签：javascript, date, format

> **可能重复：**
> [在 JavaScript 中格式化日期](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)

我需要以如下格式显示**当前日期**（一些示例）：

```
sep 10, 2012
nov 5, 2012 
```

等等。

使用`javascript`我得到一个当前日期对象

```
var date  = new Date(); 
```

接下来我需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:07:45.860

你可以用这个。

```
function dateTest(){
  var d =new Date();
 var month_name=new Array(12);
 month_name[0]="Jan"
 month_name[1]="Feb"
 month_name[2]="Mar"
 month_name[3]="Apr"
 month_name[4]="May"
 month_name[5]="Jun"
 month_name[6]="Jul"
 month_name[7]="Aug"
 month_name[8]="Sep"
 month_name[9]="Oct"
 month_name[10]="Nov"     
 month_name[11]="Dec"
 alert(month_name[d.getMonth()]+" "+d.getDate()+" , "+d.getFullYear());
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:55:04.140

使用以下链接中提供的 dateFormat lib [http://stevenlevithan.com/assets/misc/date.format.js](http://stevenlevithan.com/assets/misc/date.format.js)

请参阅本文以使用上述库格式化 js。 [http://blog.stevenlevithan.com/archives/date-time-format](http://blog.stevenlevithan.com/archives/date-time-format)

编辑：如果你不能使用 lib 然后

> var d = 新日期（）；
> 
> var curr_date = d.getDate();
> 
> var curr_month = d.getMonth();
> 
> var curr_year = d.getFullYear();
> 
> var formattedDate = curr_date + " " + curr_month + ", " + curr_year;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T12:57:10.273

您可以使用 getMonth（包括文本的一些开关/大小写）、getDate 和 getFullYear 方法来构建您的字符串。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/prototype#Methods](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/prototype#Methods)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T13:01:20.853

**已编辑**

您可以在代码中使用此功能：

```
function getFormattedDate(input){
   var pattern=/(.*?)\/(.*?)\/(.*?)$/;
   var result = input.replace(pattern,function(match,p1,p2,p3){
   var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Dec'];
   return (months[(p1-1)]+" "+p2<10?"0"+p2:p2)+" "+p3;
});
alert(result);
} 
```

对于参考。你可以像这样直接调用这个函数：

```
getFormattedDate("11/18/2013"); 
```

或者，您也可以使用此代码。

```
var date  = new Date();
dateFormat(date,"mediumDate"); 
```

您还可以[在此处找到更多不同的格式。](http://blog.stevenlevithan.com/archives/date-time-format)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T13:07:30.470

试试这个

```
function getCurrentDate(){
var now=new Date();
var date=now.getDate();
var year=now.getFullYear();
var months=new Array('jan', 'feb', 'mar' ... 'dec');
var month=months[now.getMonth()]

return month + ' ' + date + ', ' + year;
} 
```

# android - MapView 加载后关闭 ProgressDialog

> ID：13513149
> 
> 赞同：0
> 
> 时间：2012-11-22T12:51:32.260
> 
> 标签：android

我想在启动自动初始化地图的活动时显示 ProgressDialog，并在 MapView 加载到某个度量时将其关闭。我不希望用户在加载地图之前观看默认的灰屏。是否有显示地图加载进度或类似指标的功能？

谢谢，问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:32:43.557

你会显示一个这样的对话框：

```
ProgressDialog progress = (ProgressDialog) new ProgressDialog(context);
progress.isIndeterminate();
progress.setTitle("Map setup");
progress.setCancelable(false);
progress.setMessage("Wait a second while map is prepared");

progress.show(); 
```

然后你像这样删除它：

```
progress.dismiss(); 
```

**编辑**

安卓地图没有这样的东西。最接近的是mapview方法`canCoverCenter()`

具有相同响应的类似帖子在[这里](https://stackoverflow.com/q/2288507/969325)。

但是瓷砖并不是唯一需要时间加载的东西，如果你有很多叠加层，加载它们可能需要时间，在这种情况下，我可能能够理解进度条。但如果唯一的问题是灰色瓷砖，我不会推荐这种行为。如果您查看谷歌自己的地图实现（纬度、导航、地图），它们在加载正确的图块之前都有灰色图块。这是预期的行为。

# matlab - 不需要参数的matlab函数

> ID：13513150
> 
> 赞同：5
> 
> 时间：2012-11-22T12:51:33.637
> 
> 标签：matlab

我创建一个函数

```
function y = getValue(modelName, param, option)
    open_system(modelName);
    runModel(option);
    y = getActiveFun(param);
end 
```

我想在调用这个函数时选择传递或不传递`option` 来自其他文件的参数我用所有参数调用函数，有时我想在不传递`option`参数的情况下调用它？

我想打电话：`getValue(modelName, param)`从其他文件

我怎么能那样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T12:54:54.360

最简单的方法是使用`nargin`变量：

```
function y = getValue(modelName,param,option)
    open_system(modelName);

    if (nargin < 3)
        # No option passed, do something like
        runModel('defaultOption')
    else
        # Option passed
        runModel(option);
    end
    y = getActiveFun(param);
end 
```

`nargin`只是实际提交的输入参数的数量。因此，`nargin == 3`表示选项参数已设置，`nargin < 3`但尚未设置。

因此，您现在可以随时调用您的函数

```
result = getValue('myModel', myParameter) 
```

或所有参数

```
result = getValue('myModel', myParameter, someOption) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T17:54:20.377

虽然`nargin`已经给出了解决方案，并且在大多数 MATLAB 代码库中或多或少是标准用法，但我认为有一个更好的替代方案，更具可读性。

在`nargin`大函数中，你必须记住参数 3 到底是什么。特别是如果您有更多可选参数，那么跟踪或允许传递一些可选参数而其他的则不是很麻烦。

第一个也是更简单的解决方案是我个人的替代方案`nargin`，即使用以下`exist`功能：

```
function [output] = getValue(modelName,param,option, otherOption)

if ~exist('option', 'var') || isempty(option)
  option = 'defaultValueForOption';
end

if ~exist('otherOption', 'var') || isempty(otherOption)
  otherOption = 'defaultValueForOption';
end

% perform other actions 
```

优点是现在所有与输入相关的代码都在开头，并且对于应该发生的事情更加详细。你不会用那种逻辑弄乱你的其他代码。您还可以`if`通过输入验证来补充这些语句，并在给出无效选项时回退到默认值。

另一种可能性是更高版本的 MATLAB 中的标准：[`inputParser`](http://www.mathworks.nl/help/matlab/ref/inputparserclass.html)类。使用这个类，您可以定义更复杂的可选参数甚至键值对的场景。

下面是一个自我描述的示例，我一直保留以避免每次都需要文档。

```
%% Usage Example input Parser
%
function output = FuncName(rParam1, rParam2, oParam1, oParam2, varargin)

p = inputParser();

defaultValue = 0;
validatorFunc = @(x)(true); % validator function should return true when x is valid

%% Input Format definition

p.addRequired('rParam1', validatorFunc);
p.addRequired('rParam2', validatorFunc);

p.addOptional('oParam1', defaultValue, validatorFunc);
p.addOptional('oParam2', defaultValue, validatorFunc);

p.addParamValue('kvParam1', defaultValue, validatorFunc);
p.addParamValue('kvParam2', defaultValue, validatorFunc);
p.addParamValue('kvParam3', defaultValue, validatorFunc);
p.addParamValue('kvParam4', defaultValue, validatorFunc)

%% Optional Settings
% expand supplied struct to ParamValue pairs (or other arguments)
p.StructExpand = true; % default: false

%% Parse
p.parse(rParam1, rParam2, oParam1, oParam2, varargin{:})

%% Retrieve results
values = p.Results(); % structure with all values
defaultedArgs = p.UsingDefaults; % cell array of all parameter names using defaults
end 
```

这种方法更加冗长而且就个人而言，我不太喜欢这样一个事实，即必须为每个输入重新定义它是必需的还是可选的，并且它需要大量的样板代码。但至少，它是一个标准解决方案，毫无疑问是大型功能的首选解决方案。

与检查方式相比，这两种方法都存在一个缺点`nargin`：它们都比较慢。因此，如果您在经常调用的函数中使用这些（或仅执行非常快速的计算），那么使用它可能更值得`nargin`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T13:04:46.887

为了完整起见，让我们看看基础知识（[请参阅此处的文档](http://www.mathworks.com/help/matlab/ref/nargin.html)）。

在一个函数中，如果一个参数没有被使用，它只是一个“编程警告”，仅此而已。所以问题是你使用了一个可能提供也可能不提供的参数。

所以这是使用

```
nargin                  % the number of parameters provided in current call

nargin(function_name)   % the number of parameters the declaration has 
```

因此，基于这些，您可以编写一些条件并在其中包含使用非标准输入参数的代码。

对于更复杂的情况， [varargin](http://www.mathworks.com/help/matlab/ref/varargin.html)最适合处理可能未定义排序的可变长度参数列表。但这对于这个问题来说太过分了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T12:56:42.117

请看以下链接：

[http://www.mathworks.com/matlabcentral/newsreader/view_thread/65943](http://www.mathworks.com/matlabcentral/newsreader/view_thread/65943)

他们有几个建议

# iphone - 设备日志中的应用程序崩溃报告

> ID：13513159
> 
> 赞同：1
> 
> 时间：2012-11-22T12:52:15.010
> 
> 标签：iphone

在测试我的应用程序超过 20 分钟后，我遇到了崩溃问题。它在某处崩溃，但我无法找到它在哪里崩溃。我启用了 NSZombiaEnable 但仍然没有得到任何正确的报告。

以下是我的设备崩溃日志：

```
Nov 22 23:49:31 unknown UserEventAgent[12] <Notice>: jetsam: kernel termination snapshot being created
Nov 22 23:49:31 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.apple.mobilemail[0x56d0]) Exited: Killed: 9
Nov 22 23:49:31 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.yqlabsEnterprise.ticketPadPUSHCHAT[0xee8a]) Bug: launchd_core_logic.c:3733 (25562):0
Nov 22 23:49:31 unknown com.apple.debugserver-64[1522] <Warning>: 1 [05f2/1303]: error: ::read ( 4, 0x2ff179d4, 1024 ) => -1 err = Bad file descriptor (0x00000009)
Nov 22 23:49:31 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.yqlabsEnterprise.ticketPadPUSHCHAT[0xee8a]) Bug: launchd_core_logic.c:3732 (25562):3
Nov 22 23:49:31 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.yqlabsEnterprise.ticketPadPUSHCHAT[0xee8a]) Assuming job exited: <rdar://problem/5020256>: 10: No child processes
Nov 22 23:49:31 unknown com.apple.launchd[1] <Warning>: (UIKitApplication:com.yqlabsEnterprise.ticketPadPUSHCHAT[0xee8a]) Job appears to have crashed: Segmentation fault: 11
Nov 22 23:49:31 unknown SpringBoard[51] <Warning>: Application 'Mail' exited abnormally with signal 9: Killed: 9
Nov 22 23:49:32 unknown SpringBoard[51] <Warning>: Application 'ticketPad' exited abnormally with signal 11: Segmentation fault: 11
Nov 22 23:49:32 unknown kernel[0] <Debug>: launchd[1576] Builtin profile: MobileMail (sandbox)
Nov 22 23:49:33 unknown ReportCrash[1575] <Notice>: Saved crashreport to /Library/Logs/CrashReporter/LowMemory-2012-11-22-234933.plist using uid: 0 gid: 0, synthetic_euid: 0 egid: 0 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:00:57.567

因为它不是一个糟糕的访问，所以不会有僵尸......它的段错误。

原因 #1：
NSLog 或 stringWithFormat 中的格式错误：D（至少对我而言）

原因＃2：如果不是，请尝试查找您使用的可能不存在的c代码。

（不存在的符号）

**顶部提示：原因 #3：
IOS 文件系统区分大小写，也许您指定的 xib 名称有误，无法加载 xib？/ a xib 本身已损坏**

原因＃4：
谷歌“假设作业退出：：10：没有子进程”：D

# wordpress - 无法登录到 Wordpress，在 localhost 上运行

> ID：13513160
> 
> 赞同：1
> 
> 时间：2012-11-22T12:52:17.653
> 
> 标签：wordpress, login, localhost

使用 WAMP 服务器和 PhpMyAdmin - MySql 数据库在 localhost 上安装 wordpress。我创建了数据库、连接到数据库的用户和包含所有需要信息的 wp-config 文件。当安装完成时没有任何问题，但登录不起作用时，就会出现问题。所以我去了数据库，发现没有创建用户（用于管理面板）。

每次我在本地主机上使用 wordpress 时，我都必须手动将用户插入表中。我可以访问管理面板，但缺少一些 WP 功能。这怎么会发生，为什么 Wordpress 不创建用户。

谢谢您的答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:28:47.717

缺少某些功能：是的，因为通过手动添加用户，您正在破坏参照完整性：所有在此处获取用户凭据的功能都可以，但其他功能则不行（一个很好的例子是在 WP-MU 网站上：您可以像这样手动添加管理员，但管理员将无法访问 WPMU 网络功能，只有个人博客管理员）。所以这不是继续的方法。您真的在安装时启动了正常的 WordPress 进程吗？您为数据库创建数据库+用户是正确的。但是这个用户和 WordPress 用户不一样，和它没有关系。因此，只需使用数据库用户凭据创建 wp-config.php，然后通过访问根 URL (http://yoursite.com) 启动 WordPress 站点。WordPress 要求您创建您的博客、名称等 + 用户。

# php - 如何使用教义 orm 将 sqlite 数据库与 zf2 连接

> ID：13513164
> 
> 赞同：1
> 
> 时间：2012-11-22T12:52:29.230
> 
> 标签：php, doctrine-orm, zend-framework2

我正在使用 zf2 与教义 orm 模块和 sqlite3 数据库。当我从数据库中获取数据时，出现如下错误：

> 执行“SELECT t0.id AS id1, t0.email AS email2, t0.password AS password3, t0.fname AS fname4, t0.lname AS lname5, t0.mobile AS mobile6 FROM user t0”时发生异常：
> 
> SQLSTATE[HY000]: 一般错误: 1 no such table: user

我的 global.php 文件在这里：

```
<?php

return array(
'doctrine' => array(
    'connection' => array(
        'orm_default' => array(
                'driverClass' => 'Doctrine\DBAL\Driver\PDOSqlite\Driver',
                'params' => array(                                      'dsn'  =>  __DIR__ . '/data/intranet.db',     
                            )
                    )
            )
    ),

); 
```

你能回答我是对还是错？谢谢,,,,,,

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T05:58:33.627

```
'doctrine' => array(
    'connection' => array(
        'orm_default' => array(
            'driverClass' => 'Doctrine\DBAL\Driver\PDOSqlite\Driver',
            'params' => array(
                'path'=> __DIR__.'/../../data/database name',
            )
        )
    )
), 
```

);

# sql - SQL M:1 关系

> ID：13513168
> 
> 赞同：1
> 
> 时间：2012-11-22T12:53:00.940
> 
> 标签：sql, sql-server, database-design, many-to-one

我必须使用 SQL Server 建立 M:1 关系，但我一直想知道表示“多”端的列是否应该是外键，而表示“单”端的列是否应该是主键。目的是使用列表示“多”侧的表从表中检索信息，该列表示“一”侧。你认为这个想法是合理的并且会成功吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:09:32.100

> 我一直想知道代表“多”方的列是否应该是外键，而代表“一”方的列是否应该是主键。

表示多面的列确实是一张表的主键，而表示一面的列也是另一张表的主键。但是其中有一个新列，是一个相互连接的外键（该列是使关系成为多对一的列，这是您应该关心的列）。

所以，你必须把它们做成两张桌子。考虑以下多对一示例：

> 国家和城市关系：一个国家有许多城市。

这将用两个表表示：

![在此处输入图像描述](../Images/351fe85d8613c3670d3e9d45160418f2.png)

**`Countries`**：

*   `CountryID`首要的关键，
*   `Name`.

**`Cities`**：

*   `CityID`主键^(**1**) ,
*   `CountryId`外键引用`Countries(ID)`，
*   `Name`.

这就是您应该如何创建多对一关系，如下所示：

*   列`CountryID`和`CityID`是两个表中的主键。
*   `CountryID`代表一侧的列是多侧（`cities`表）中的外键。那是你应该的专栏

* * *

^(**1：**^(除非您希望一个城市同时位于多个国家/地区，否则)^(您应该有一个**复合键**而不是主表。`Cities`))

# c# - 将字符串用作布尔值的最佳方法

> ID：13513170
> 
> 赞同：0
> 
> 时间：2012-11-22T12:53:03.790
> 
> 标签：c#

我有这样的方法：

```
public void Method(bool value)
{
} 
```

现在我想用一个从 xml 文件 (*.loadtest) 解析的值来调用这个方法，该文件是一个字符串：

```
<ContextParameter Name="paratemeter" Value="True" /> 
```

那么，我应该从调用者那里做到这一点：

```
if(parameter.Equals("True")
    Method(true);
else
    Method(false); 
```

还是我应该重构`Method`以获取字符串作为参数并在那里进行检查？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T12:55:43.787

我认为你应该保留

*   从字符串到实际方法参数的转换和

*   实际的“要完成的工作”

在两种不同的方法中。它使您的方法保持简短，从而使您的代码具有可读性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T12:54:28.603

我会用`bool.Parse(string)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T12:56:23.707

`bool.Parse`除非您对输入有 100% 的控制权，否则切勿使用。

`TryParse`无论如何，在处理用户输入时始终使用这些方法。

```
bool result;
if(!bool.TryParse(value, out result))
   throw new Exception("There was a problem with the config.. etc..");

Method(result); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T12:56:24.123

您的对象将直接由配置填充吗？如果是这样，让它接受一个字符串。否则，分别解析字符串并维护您的“布尔”参数化方法。

我可能会检查您是否获得了一个有效的字符串，例如“True”/“False”，如果没有，则抛出异常。否则有人会提供“真实”，您会将其解释为`FALSE`.

您可以选择（作为相关点）对您接受的内容相对宽容（例如修剪空白字符串等）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T12:56:51.867

> 或者我应该重构方法以获取字符串作为参数并在那里进行检查？

没有。单一责任。该方法不应该是进行参数转换的方法。您可以创建一个接受字符串参数的重载来执行此操作，然后调用接受布尔值的实现，但是您必须为每个需要非字符串配置参数的方法执行此操作。

最好在一个地方进行转换，并将其称为：

```
bool param = Configuration.GetBoolParameter("ParameterName"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-22T12:57:37.780

我更喜欢尽快摆脱字符串。这是 XML 的限制，无需将限制转移到您的方法的“合同”。

至于比较，我想说最强大的是

```
var parsedBool = parameter.ToUpper() == "TRUE"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-22T12:55:07.110

```
Method(bool.Parse(parameter)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-22T12:55:54.037

我会保留“我需要一个布尔值”的合同。

解析 XML，使用上面推荐的方法将该文本值转换为布尔值，然后传递它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-22T13:02:14.873

我永远不会相信这种输入足够安全，可以传递给 bool.Parse 相反，我会做一些更安全的事情，比如这种带有负回退的正解析。

```
bool getBoolean(string input) {
  var value = false;
  bool.TryParse(input ?? string.Empty,out value);
  return value;
} 
```

# jquery - 如何在从返回 json 而不是 jsonp 数据的 api 获取数据时让 $.getJSON 回调工作

> ID：13513176
> 
> 赞同：0
> 
> 时间：2012-11-22T12:53:39.133
> 
> 标签：jquery, json, jsonp

我试图让 $.getJSON 回调为返回 json 而不是 jsonp 数据的 api 工作。如何改变这个工作。

```
$.getJSON("http://url&callback=?", function(response){ alert("hi");  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:21:59.887

最近，我处理了类似的问题，以使用生成 JSON 响应的 twitter API 调用获取 URL 的 twitter 计数。

查看下面的片段以供参考

```
<script type="text/javascript">
 $(document).ready(function () {
     var url = "http://www.google.com/"; //test url 
     $.getJSON('http://urls.api.twitter.com/1/urls/count.json?url=' + url + '&callback=?', function (data) {
                   console.log(data);
                });
});
</script> 
```

我希望它对你也有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-29T07:42:50.267

JSONP 不是数据类型。如果您想了解有关 JSONP 的更多信息，请阅读这篇名为[“JSONP 到底是什么？”的SO 帖子。](https://stackoverflow.com/questions/2067472/what-is-jsonp-all-about/2067584#comment63666090_2067584)

在 OS/400 上发出 ajax 请求时，您实际上可以使用`$.ajax`or `$.get`（或任何 jQuery ajax 方法），但如果您从与实际 HTTP SERVER/域不同的端口调用 RPGLE PGM，那么您必须提供`?callback=?`让我们javascript引擎知道它的JSONP（我相信）。JSONP 实际上是一个 javascript 函数/包装器，它允许将数据毫无保留地传递给客户端。如果您正在使用诸如 twitter 之类的 API 来执行跨域调用，那么您最好知道提供者是 SECURE。

我在实际执行 POST 时执行 GET 得到 500 Internal Server Error，因此我调查了发出 Ajax 请求的正确方法。

# javascript - 当范围为 0-1 或 0-2 时，仅在 d3.js 中沿 y 轴显示整数值

> ID：13513177
> 
> 赞同：13
> 
> 时间：2012-11-22T12:53:42.073
> 
> 标签：javascript, d3.js

我正在使用 d3js 来显示网站视图的实时表示。为此，我使用堆栈布局，并且我现在通过 JSON 更新我的数据集。

当 y 轴上只显示 1 或 2 个视图时，这与图中的视图数量是动态相关的，轴标签为：1 => `0, 0.2, 0.4, 0.6, 0.8, 1`，轴标签为：2 =>`0, 0.5, 1, 1.5, 2`这对于我的数据集，因为它显示页面的视图，并且您不能有一半的视图。

我在 d3js 中有一个线性比例，我的 y 轴基于

```
var y_inverted = d3.scale.linear().domain([0, 1]).rangeRound([0, height]); 
```

根据[rangeRound() 的文档，](https://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-linear_rangeRound)我应该只得到超出这个比例的整个值。为了绘制我的轴，我使用：

```
var y_axis = svg.append("g")
    .attr("class", "y axis")
    .attr("transform", "translate(0,0)")
    .call(y_inverted.axis = d3.svg.axis()
        .scale(y_inverted)
        .orient("left")
        .ticks(5)); 
```

因为它是一个实时应用程序，所以我通过调用每秒更新一次：

```
function update(){
    y_inverted.domain([yStackMax, 0]);
    y_axis.transition()
        .duration(interval)
        .ease("linear")
        .call(y_inverted.axis);
} 
```

yStackMax 是根据堆栈布局计算的，据我所知，用于 y 值的数据仅包含整数。

```
var yStackMax = d3.max(layers, function(layer) {
    return d3.max(layer, function(d) {
        return d.y0 + d.y;
    });
}); 
```

我已经尝试了几件事来为我的 y 轴获得一个合适的值。

```
d3.svg.axis()
    .scale(y_inverted)
    .orient("left")
    .ticks(5).tickFormat(d3.format(",.0f")) 
```

让我到目前为止最近，但它仍然显示`0, 0, 0, 1, 1, 1`

基本上我想要的是在 1 时只有 1 个刻度`yStackMax`，在 2 时只有 2 个刻度，但如果`yStackMax`是 12 或 1,000,000 ，它也应该工作

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T15:08:48.723

**简短回答**：您可以动态设置刻度数。将其设置`1`为仅显示两个刻度标签：

```
var maxTicks = 5, minTicks = 1;
if (yStackMax < maxTicks) {
    y_axis.ticks(minTicks)
}
else {
    y_axis.ticks(maxTicks)
} 
```

**长答案**（有点跑题了）：在玩你的例子时，我想出了一个相当“完整的解决方案”来解决你所有的格式问题。随意使用它 ：）

```
var svg = d3.select("#svg")
var width = svg.attr("width")
var height = svg.attr("height")
var yStackMax = 100000
var interval = 500
var maxTicks = 5
var minTicks = 1

var y_inverted = d3.scale.linear().domain([0, 1]).rangeRound([0, height])
var defaultFormat = d3.format(",.0f")

var format = defaultFormat

var y_axis = d3.svg.axis()
    .scale(y_inverted)
    .orient("left")
    .ticks(minTicks)
    .tickFormat(doFormat)

var y_axis_root;
var decimals = 0;

function countDecimals(v){
    var test = v, count = 0;
    while(test > 10) {
        test /= 10
        count++;
    }
    return count;
}

function doFormat(d,i){
    return format(d,i)
}

function init(){
    y_axis_root = svg.append("g")
        .attr("class", "y axis")
        // I modified your example to move the axis to a visible part of the screen
        .attr("transform", "translate(150,0)")
        .call(y_axis)
}

// custom formatting functions:
function toTerra(d) { return (Math.round(d/10000000000)/100) + "T" }
function toGiga(d)  { return (Math.round(d/10000000)/100) + "G" }
function toMega(d)  { return (Math.round(d/10000)/100) + "M" }
function toKilo(d)  { return (Math.round(d/10)/100) + "k" }

// the factor is just for testing and not needed if based on real world data
function update(factor){
    factor = (factor) || 0.1;
    yStackMax*=factor
    decimals = countDecimals(yStackMax)
    console.log("yStackMax decimals:",decimals, factor)
    if     (yStackMax < maxTicks) {
        format = defaultFormat
        y_axis.ticks(minTicks)
    }
    else {
        y_axis.ticks(maxTicks)
        if     (decimals < 3 ) format = defaultFormat
        else if(decimals < 6 ) format = toKilo
        else if(decimals < 9 ) format = toMega
        else if(decimals < 12) format = toGiga
        else                   format = toTerra
    }

    y_inverted.domain([yStackMax, 0]);
    y_axis_root.transition()
        .duration(interval)
        .ease("linear")
        .call(y_axis);
}

init()
setTimeout(update, 200)
setTimeout(update, 400)
setTimeout(update, 600) 
```

您可以与此 html 片段一起尝试：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <script type="text/javascript" src="http://mbostock.github.com/d3/d3.v2.js"></script>
    </head>

    <body>
        <div><svg id="svg" width="200" height="300"></svg></div>
        <script src="axis.js"></script>
        <button id="button1" onclick="update(10)">+</button>
        <button id="button2" onclick="update(0.1)">-</button>
    </body>
</html> 
```

我知道这有点离题，但我通常喜欢提供运行示例/解决方案。将额外的格式化内容视为对实际问题的奖励。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T14:36:55.113

如果您要求一定数量的滴答声（通过 axis.ticks() ），那么 d3 会尝试给您那么多滴答声 - 但会尝试使用漂亮的值。它与您的数据无关。

您的解决方案是像您一样使用 tickFormat 将所有值四舍五入为整数值，只要求 Juve 回答的一个刻度，或者使用[axis.tickValues([...])](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickValues)显式设置刻度值，这会很漂亮易于与[d3.range结合使用](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_range)

rangeRound 在这种情况下将无济于事，因为它与比例的输出范围有关，在这种情况下是要绘制的像素偏移量：介于 0 和高度之间。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T22:58:16.427

脱离 Superboggly 的回答，这对我有用。首先，我从 y 域中获得了最大（最大）数`y.domain().slice(-1)[0]`，然后我使用`d3.range()`...构建了一个刻度值数组。

```
 var y_max = y.domain().slice(-1)[0]
  var yAxis = d3.svg.axis()
      .scale(y)
      .tickValues(d3.range(y_max+1))
      .tickFormat(d3.format(",.0f")) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-15T08:05:56.213

或者只是让刻度保持原样并“隐藏”十进制数字

```
d3.svg.axis()
    .scale(y_inverted)
    .orient("left")
    .ticks(5).tickFormat(function(d) {
              if (d % 1 == 0) {
                return d3.format('.f')(d)
              } else {
                return ""
              }
            }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-04T16:34:02.497

这是代码：

```
var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left")
    .tickFormat(d3.format(".2s")); 
```

# c++ - 用 BOOST 代替 ACE

> ID：13513179
> 
> 赞同：0
> 
> 时间：2012-11-22T12:53:46.770
> 
> 标签：c++, boost, ace

我是新手`BOOST`

我们正计划从`ACE`搬到`BOOST`。我们没有使用完整`ACE`的库，而只是库的一部分，`ACE`下面提到了一些

1.  ACE_THREAD
2.  ACE_OS
3.  ACE_Condition
4.  ACE_定时器
5.  ACE_Hash
6.  ACE_Semaphore
7.  ACE_Time_Value

这个或类似`functionality/api`的东西在`BOOST`. 最重要的是有`ACE_Task_Base`某种功能`BOOST`

我想知道这是可能的使用`BOOST`以及使用的任何问题`BOOST`。我的产品是纯净`C++`的，沉重的`Network`，而且`Threads``Windows``Unices`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T13:24:44.943

> **ACE_Semaphore & ACE_THREAD & ACE_Condition**

以上都是部分`boost::threads`

[http://www.boost.org/doc/libs/1_52_0/doc/html/thread.html](http://www.boost.org/doc/libs/1_52_0/doc/html/thread.html)

C++11 [http://en.cppreference.com/w/cpp/thread](http://en.cppreference.com/w/cpp/thread)

> **ACE_OS**

在 boost wrt OS 中完成了一些常见的事情，但这取决于您使用的部分。有`boost::system`and `boost::filesystem`，上面的线程等等。我怀疑您需要处理的一些较低级别的呼叫。

[http://www.boost.org/doc/libs/1_52_0/libs/system/doc/index.html](http://www.boost.org/doc/libs/1_52_0/libs/system/doc/index.html)

[http://www.boost.org/doc/libs/1_52_0/libs/filesystem/doc/index.htm](http://www.boost.org/doc/libs/1_52_0/libs/filesystem/doc/index.htm)

> **ACE_定时器**

`boost::asio`可用于创建与此类似的计时器，并且此库可以提供更多 ACE 的功能（或创建它的机制）

[http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio.html)

> **ACE_Hash**

ACE_Hash - 这里还有很多功能，但可以用 boost 或 C++11 替换/实现

提升： http: [//www.boost.org/doc/libs/1_52_0/doc/html/hash.html](http://www.boost.org/doc/libs/1_52_0/doc/html/hash.html)

[http://www.boost.org/doc/libs/1_52_0/doc/html/unordered.html](http://www.boost.org/doc/libs/1_52_0/doc/html/unordered.html)

c++11： [http ://en.cppreference.com/w/cpp/container/unordered_map](http://en.cppreference.com/w/cpp/container/unordered_map)

> **ACE_Task_Base**

我怀疑您需要为这里的功能创建自己的替代品。ACE 涉及到消息和消息解析机制。上面介绍了线程，但是可能需要再次实现创建线程的管理器。

# java-me - 我如何通过 ApiBridge 在 JavaME 中获取通话记录？

> ID：13513184
> 
> 赞同：0
> 
> 时间：2012-11-22T12:54:07.567
> 
> 标签：java-me, sms, s60

我正在尝试使用 JavaME 阅读 SMS 收件箱。我尝试了 ApiBridge，重新搜索了 developer.nokia，并找到了一些示例。我尝试了示例，但我认为代码没有得到调用日志，只是循环。

感谢您的帮助。

这是我的示例代码。

```
 APIBridge bridge = APIBridge.getInstance();
        bridge.Initialize(this);

        final LoggingService service = (LoggingService)bridge.createService("service.logging");
        formum.append("Başlıyor\n");
        Thread thread = new Thread() {

            public void run() {
                try {
                    BridgeResult res = service.GetList();
                    Vector returnValues = (Vector) res.getReturnValue();
                    String out = "Result: \n";

                    for (int i = 0; i < 2; i++) {
                        System.out.println("BridgeResult CallLog");
                        Hashtable item = (Hashtable) (returnValues.elementAt(i));
                        out += "PhoneNumber: " + item.get("PhoneNumber").toString() + "\n";

                    }

                    formum.append(out);                                   
                } catch (BridgeException ex) {
                    tbox.setString("Bridge error occured - unable to retrieve data. " + ex.getMessage());
                } catch (Exception ex) {
                    tbox.setString("General error occured - unable to retrieve data. " + ex.getMessage());
                }

            }
        };

        thread.start(); 
```

示例代码在这里： http: [//www.developer.nokia.com/Community/Wiki/J2ME_Api_Bridge_Interface](http://www.developer.nokia.com/Community/Wiki/J2ME_Api_Bridge_Interface)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:01:31.680

API Bridge API 是一个特定于 Symbian 的解决方案，它要求您在下载的 zip 上安装本地 Symbian 应用程序和 /APIBridge Installer/APIBridge_v1_1.sis。APIBridge.jar 适用于 APIBridge_v1_1.sis 提供的接口。

由于这是诺基亚 Symbian 特定的解决方案，因此不适用于其他移动操作系统和制造商。

# mysql - MySQL 相关的“项目”查询

> ID：13513187
> 
> 赞同：1
> 
> 时间：2012-11-22T12:54:26.887
> 
> 标签：mysql, sql

请考虑以下项目表：

```
Project:
  table: project
  manyToMany:
    themes:
      targetEntity: Theme
      inversedBy: projects
      joinTable:
        name: project_theme
        joinColumns:
          project_id:
            referencedColumnName: id
        inverseJoinColumns:
          theme_id:
            referencedColumnName: id
    platforms:
      targetEntity: Platform
      joinTable:
        name: project_platform
        joinColumns:
          project_id:
            referencedColumnName: id
        inverseJoinColumns:
          platform_id:
            referencedColumnName: id
  manyToOne:
    client:
      targetEntity: Client
```

如您所见，一个项目具有三个关系；主题通过 project_theme 连接表，平台通过 project_platform 表，客户端通过 client_id 列。

我正在尝试生成一个查询，该查询将找到所有相关项目——具有相同主题、平台或客户的项目——并按“分数”对它们进行排序。

例如：

```
项目一：
  主题：18、19
  平台：1、4
  客户：22
```

查找与项目 A.. 相关的项目

```
项目 D：
  主题：18、19
  平台：1、4
  客户：22
得分：5
```

```
项目 G：
  主题：18、21
  平台：3、4
  客户：22
得分：3
```

```
项目B：
  主题：8、21
  平台：2、4
  客户：1
得分：1
```

我真的很感谢一些为此编写 MySQL 查询的助手。我一直在为以下问题苦苦挣扎-但我可能还很遥远：

```
SELECT 
    `project`.*,
    GROUP_CONCAT(`project_theme`.`theme_id`) as themes,
    GROUP_CONCAT(`project_platform`.`platform_id`) as platforms,
    `project`.`client_id` as client
FROM `project`
LEFT JOIN `project_theme` ON `project`.`id` = `project_theme`.`project_id`
LEFT JOIN `project_platform` ON `project`.`id` = `project_platform`.`project_id`
GROUP BY `project`.`id` 
```

非常感谢
皮特的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:01:25.437

我在平板电脑上，所以我会很简短。将它们视为三个单独的查询并将它们合并。当我有键盘时，我会带着 sql 回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:15:31.140

感谢您在阅读[高级查询后提示马林。对mysql中最相关的字段进行排名，](https://stackoverflow.com/questions/11609348/advance-query-rank-most-related-fields-in-mysql)并进行一些实验，我想我可能已经破解了它......

```
SELECT 
    p.*,
    (
        IFNULL(themes.matches, 0) + IFNULL(platforms.matches, 0) + IFNULL(clients.matches, 0)
    ) as score
FROM `project` p
LEFT JOIN (
    SELECT t2.project_id, COUNT(*) as matches FROM `project_theme` t1, `project_theme` t2
    WHERE 
      t1.theme_id = t2.theme_id AND t1.project_id = 1
      GROUP BY t2.project_id
) themes ON p.id = themes.project_id
LEFT JOIN (
    SELECT f2.project_id, COUNT(*) as matches FROM `project_platform` f1, `project_platform` f2
    WHERE 
      f1.platform_id = f2.platform_id AND f1.project_id = 1
      GROUP BY f2.project_id
) platforms ON p.id = platforms.project_id
LEFT JOIN (
    SELECT p2.id, COUNT(*) as matches FROM `project` p1, `project` p2
    WHERE 
      p1.client_id = p2.client_id AND p1.id = 1
      GROUP BY p2.id
) clients ON p.id = clients.id
GROUP BY p.`id`
HAVING score > 0
ORDER BY score DESC;
```

# android - Android SDK Manager 中的 Google Web Driver 是什么？

> ID：13513189
> 
> 赞同：67
> 
> 时间：2012-11-22T12:54:31.897
> 
> 标签：android, web-testing

我在包窗口中看到要安装的可选项目列表，但找不到任何关于**Google Web 驱动程序**及其实际功能的参考？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-22T13:08:49.127

Web Driver 是 selenium 的框架，用于在 Android 设备上测试 webapps。

有关如何使用此链接的更多详细信息，请访问[链接](http://android-developers.blogspot.in/2011/10/introducing-android-webdriver.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-01T15:39:58.860

Web Driver 仍然是测试 Web 应用程序的好工具。

Android Web App 是 Selenium 的另一部分，用于在所有平台上测试 Web 应用程序。

为了更好地了解如何使用 Android Web App，您需要学习 Selenium。可以在 Selenium 站点上找到需要在 Android 中进行不同配置的设置。

[http://docs.seleniumhq.org/docs/03_webdriver.jsp#android-driver](http://docs.seleniumhq.org/docs/03_webdriver.jsp#android-driver)

# mysql - 从联接查询（联接表）中获取不同的值

> ID：13513191
> 
> 赞同：0
> 
> 时间：2012-11-22T12:54:38.957
> 
> 标签：mysql, join

如何从多个表中获取不同的值（内部连接查询）。

例如，

```
select a.id,b.name,c.address 
from table1 a 
inner join table2 b on (a.id = b.row_id)
inner join table3 c on (a.id = c.ticket_id)
where c.status = 'open'; 
```

例如，这里的场景是，两行包含相同的 a.id 值，那么如何从 a.id 中获取不同的值。

哪位大神帮我看看怎么弄？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:00:30.783

只需添加不同的...

```
select DISTINCT a.id,b.name,c.address 
from table1 a 
inner join table2 b on (a.id = b.row_id)
inner join table3 c on (a.id = c.ticket_id)
where c.status = 'open'; 
```

我认为这很好用..

如果你只需要一个不同的记录，那么它应该是这样的......

```
SELECT DISTINCT(cat_id) FROM PRODUCTS WHERE brand_id = 'sony' 
```

# ruby-on-rails-3 - CakePHP vs Rails 如何从相关表中检索数据

> ID：13513193
> 
> 赞同：0
> 
> 时间：2012-11-22T12:54:39.727
> 
> 标签：ruby-on-rails-3, cakephp-2.1

我是 CakePHP 的新手，但我使用 Rails。我想在 CakePHP 中做这样的事情：

```
class Manager < ActiveRecord::Base
    has_many :employees
end 
```

然后像这样询问对象：

```
m = Manager.find(1)
# Sends SQL query SELECT COUNT * FROM EMPLOYEES WHERE MANAGER_ID = 1
count = m.employees.count

# Sends SQL query SELECT * FROM EMPLOYEES WHERE MANAGER_ID = 1
m.employees.each do |e|
    puts e.name
end 
```

我在 CakePHP 中有这段代码...

```
class Manager extends AppModel {
    public $hasMany = array(
        'Employee' => array(
            'className'  => 'Employee',
            'order'      => 'Employee.created DESC'
        )
    );
}

class Employee extends AppModel {
    public $belongsTo = 'Manager';
} 
```

如何在 CakePHP 中实现这些（上述）功能（在 RoR 中很容易由其 ORM 制作）？

感谢帮助...

神话冲刺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:06:42.950

您的问题归结为“我如何检索 id=1 的经理并找到他的员工。

在 CakePHP 中，您将发出以下查找查询来检索所需的管理器条目：

```
$manager = $this->Manager->findById(1);
// or
$manager = $this->Manager->find('first', array(
    'conditions' => array(
        'Manager.id' => 1
    )
); 
```

上面的 find 调用从数据库中获取 id=1 的经理，并且由于您设置了关系 Manager hasMany Employee，因此结果还将包含由 Employee.created DESC 排序的经理的所有员工。

结果集看起来像这样：

```
Array
(
    [Manager] => Array
        (
            [id] => 1
            [field1] => value1
        )

    [Employee] => Array
        (
            [0] => Array
                (
                    [id] => 2
                    [manager_id] => 1
                    [name] => Bar
                )

            [1] => Array
                (
                    [id] => 1
                    [manager_id] => 1
                    [name] => Foo
                )

        )

) 
```

如您所见，CakePHP 使用数组格式返回结果，而不是像 Ruby on Rails 中的对象。因此，您必须访问结果数组中的相关数据。

CakePHP 和 Ruby on Rails(RoR) 之间的另一个重要区别是，在 CakePHP 中，对数据库的查询在您调用它们时执行，而在 RoR 中，它们在您尝试访问结果时延迟执行。

为了补充您访问员工的 RoR 示例，这里是 CakePHP 版本：

```
$employee_count = count($manager['Employee']);

foreach ($manager['Employee'] as $e) {
    echo $e['name'];
} 
```

我希望这能消除一些困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:26:28.967

我认为您正在寻找 CakePHP 的可包含[行为](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)。

将可包含行为附加到您的模型很重要，否则它将不起作用。

# asp.net-mvc-3 - VS 2010 中不显示 ASP.NET MVC 3 项目模板

> ID：13513194
> 
> 赞同：1
> 
> 时间：2012-11-22T12:54:40.677
> 
> 标签：asp.net-mvc-3

我有 Microsoft Visual Studio 2010：

版本 10.0.30319.1 RTMRel 平台 Microsoft .NET Framework 版本 4.0.30319 RTMRel

1.  我安装了从[http://www.microsoft.com/en-us/download/details.aspx?id=1491](http://www.microsoft.com/en-us/download/details.aspx?id=1491)下载的文件。
2.  我清除了位于“[ProgramFile x86]\Microsoft Visual Studio 10.0\Common7\IDE\ProjectTemplatesCache”的模板缓存，然后从 Visual Studio 命令行运行 devenv.exe /installvstemplates。

3.  我确信我使用的是 Net.Framework 4.0。我已经看过很多次了：）

但是 MVC 3 模板还没有显示出来！如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:30:13.103

我卸载了 MS VS 2010 并重复了所有操作，一切都变好了:)。

# c# - 类似 Windows 的文件夹窗格中的文件详细信息

> ID：13513200
> 
> 赞同：1
> 
> 时间：2012-11-22T12:54:54.517
> 
> 标签：c#, asp.net

我需要在 GridView 中为我的 Web 应用程序显示文件详细信息。我还需要按上传日期顺序列出它们，最近的日期在最上面（降序）。例如，我需要以下详细信息。

```
FileName | Extension | UploadedDate | LastDownloadedDate 
```

我在网上找不到任何代码。抱歉，这可能很容易，但我只知道如何将文件放入字符串数组中。在这里我只得到文件名

```
String[] files = Directory.GetFiles("myPath"); 
```

我如何获得其余的详细信息？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:59:24.707

您可以使用`System.IO.FileInfo`class 获取 a`List`然后将其绑定到`GridView`.

```
System.IO.FileInfo[] fInfo = new System.IO.DirectoryInfo("YOUR_PATH").GetFiles();

var filList = (from f in fInfo
           orderby f.CreationTime descending 
           select new
           {
             FileName = f.Name,
             UploadedDate = f.CreationTime,
             Extension = f.Extension,
             LastDownloadedDate = f.LastAccessTime //Not sure this would be the same.
           }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:03:34.310

请查看`System.IO`命名空间：

```
string extension = System.IO.Path.GetExtension(this.File1.PostedFile.FileName);
string path= Path.GetFileName(fileName);
string LastModified=System.IO.File.GetLastWriteTime(Server.MapPath("myFile.txt")).ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:04:45.557

此[链接](https://stackoverflow.com/questions/7861886/how-to-get-file-properties)可能会对您有所帮助，但我不确定您是否可以在任何默认属性中获取任何上传/下载的信息。

您可以设置一些自定义/扩展属性来保存这些信息并在网格上显示时读取它们。读写扩展属性取决于文件扩展名。

# java - 如何使用 cellEditor 将验证器（具有禁用条件）添加到 primefaces 数据表？

> ID：13513209
> 
> 赞同：1
> 
> 时间：2012-11-22T12:55:18.917
> 
> 标签：java, jsf-2, primefaces

我正在使用 primefaces 2.2.1，我想`f:validatorLength`在数据表中设置为一行，其中有很多行`p:cellEditor`。

```
<c:set var="flag" value="#{item.key eq 'someKey'}" />
<p:column headerText="header">
    <p:cellEditor>
       <f:facet name="output">
        <h:outputText value="#{item.value}" />
            </f:facet>
               <f:facet name="input">
                <p:inputText value="#{item.value}" style="width:100%" >
    <f:validateLength maximum="4" disabled="#{flag}"/>
                </p:inputText>

                </f:facet>
    </p:cellEditor>
</p:column> 
```

并且当标志`true`用于具有适当键的所选 inputText 时，验证器会为所有 inputTexts 打开。并且当标志为`false`- 验证器为所有输入文本打开。但我想将验证器设置为一些 inputTexts 等等。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:55:45.320

这是一个已知问题。标签的属性`<f:validateXxx>`在视图构建时进行评估。因此它们不能依赖于仅在视图渲染期间可用的变量。

这基本上与此处概述和详细回答的问题相同：[如何为数据表的每一行设置转换器属性？](https://stackoverflow.com/questions/7530560/how-to-set-converter-properties-for-each-row-of-a-datatable/7531284#7531284)

在您的特定情况下，除了您自己`#{item}`在方法内部以编程方式评估的自行开发验证器之外`validate()`，您还可以使用[OmniFaces](http://omnifaces.org) [`<o:validator>`](http://showcase.omnifaces.org/taghandlers/validator)，它可以对所有属性进行渲染时评估。

```
<p:inputText value="#{item.value}">
    <o:validator validatorId="javax.faces.Length" maximum="4" disabled="#{flag}" />
</p:inputText> 
```

# objective-c - iOS 6 中的 UITextView 字体问题

> ID：13513210
> 
> 赞同：3
> 
> 时间：2012-11-22T12:55:20.070
> 
> 标签：objective-c, ios, ios6, uitextfield

如果分配给 UITextView 的任何字符串和字符串包含“\n”，则 UITextView 字体会随机更改。表示字体大小发生变化。

此问题仅在 iOS 6 上发生。在 iOS 5 上工作的代码相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:12:58.563

UITextfield 旨在用于单行文本，如果您想要多行，请使用 UITextview。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:24:44.433

可能是因为您`adjustsFontSizeToFitWidth`在`UITextField`.

# ruby-on-rails - 如何在rails3中生成rspec模型

> ID：13513211
> 
> 赞同：0
> 
> 时间：2012-11-22T12:55:24.330
> 
> 标签：ruby-on-rails, rspec-rails

> **可能重复：**
> [找不到生成器 rspec_model 问题](https://stackoverflow.com/questions/7762748/could-not-find-generator-rspec-model-issue)

是否有任何命令可以为 Rspec 生成模型而不为 Rails 3 生成任何迁移和夹具，并且是否可以在使用相同的应用程序/模型构建项目后生成 rspec_model？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:14:13.480

`rspec-rails`gem 中唯一的生成器是`rspec:install`.

阅读：[https ://github.com/rspec/rspec-rails#generators](https://github.com/rspec/rspec-rails#generators)

运行时`rspec:install`，它不会为您现有的模型创建文件，但您在现有应用程序上`spec/model/...`运行没有问题。`rspec:install`

阅读：[找不到生成器 rspec_model 问题](https://stackoverflow.com/questions/7762748/could-not-find-generator-rspec-model-issue)

创建自己的`spec/model/...`文件真的很容易；他们所需要的只是

```
require 'rspec_helpers' 
```

在顶部。

# php - 如何使用教义查询 symfony 插入新行？

> ID：13513212
> 
> 赞同：0
> 
> 时间：2012-11-22T12:55:25.010
> 
> 标签：php, sql, symfony1, symfony-1.4

我必须使用这个：

```
 $deleted = Doctrine_Query::create()
  ->delete()
  ->from('orders')
  ->andWhere('user_id = "'.$_REQUEST["user_id"].'"')
  ->execute(); 
```

在 symfony 中从 SQL 中删除一行，但是如何使用这些行创建一个新行：

```
id|user_id|order_date|order_type|order_end_date|aktiv|fiz_meth 
```

表名：orders

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:04:50.480

您应该使用这种代码创建一个新订单：

```
$orders = new Orders();
$orders->set('id', $id); // maybe you don't need this line, if `id` is the primary key
$orders->set('user_id', $user_id);
$orders->set('order_date', $order_date);
$orders->set('order_type', $order_type);
$orders->set('order_end_date', $order_end_date);
$orders->set('aktiv', $aktiv);
$orders->set('fiz_meth', $fiz_meth);
$orders->save(); 
```

请务必替换每列的变量名称。

[您将在官方文档](http://doctrine.readthedocs.org/en/latest/en/manual/dql-doctrine-query-language.html#select-queries)的第二个代码块中找到另一个示例。

# python - 使用 request.GET 进行递归 [ [] ]

> ID：13513213
> 
> 赞同：0
> 
> 时间：2012-11-22T12:55:32.837
> 
> 标签：python, django, http-headers

我正在尝试访问 django 上的服务器响应给出的值

> "GET /customize/report/?sid=1&buzz_graph%5Btitle%5D=Buzz+Graph&buzz_graph%5Badded%5D=true&source_distribution%5Btitle%5D=Source+Distribution&geographic_distribution%5Btitle%5D=Geographic+Distribution&gender_distribution%5Btitle%5D=Gender+Distribution&age_group_distribution% 5Btitle%5D=年龄组+分布&top_phrases%5Btitle%5D=Top+短语 HTTP/1.1" 200 8264

因为`%5B`and`%5D`被用作`[`and `]`。

我无法使用`request.GET['buzz_graph['title']']`. 如何从响应中访问这些值？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:01:07.710

没有引号 - `buzz_graph%5Btitle%5D`is `buzz_graph[title]`，所以你想要的是：

```
request.GET['buzz_graph[title]'] 
```

而不是你的 python-like `request.GET['buzz_graph['title']']`，因为你需要转义内引号才能让它成为字符串的一部分（因为它会产生语法错误），所以它无论如何都不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:25:17.850

不确定这是否是一个合适的答案，但关键`'buzz_graph[title]'`对我有用

```
>>> from django.http import QueryDict
>>> QueryDict("""sid=1&buzz_graph%5Btitle%5D=Buzz+Graph&buzz_graph%5Badded%5D=true&source_distribution%5Btitle%5D=Source+Distribution&geographic_distribution%5Btitle%5D=Geographic+Distribution&gender_distribution%5Btitle%5D=Gender+Distribution&age_group_distribution%5Btitle%5D=Age-group+Distribution&top_phrases%5Btitle%5D=Top+Phrases""")
<QueryDict: {u'age_group_distribution[title]': [u'Age-group Distribution'], u'geographic_distribution[title]': [u'Geographic Distribution'], u'buzz_graph[title]': [u'Buzz Graph'], u'top_phrases[title]': [u'Top Phrases'], u'source_distribution[title]': [u'Source Distribution'], u'sid': [u'1'], u'buzz_graph[added]': [u'true'], u'gender_distribution[title]': [u'Gender Distribution']}>
>>> _['buzz_graph[title]']
u'Buzz Graph' 
```

# perl - 在 Mojolicious::Lite 下以正确的格式呈现错误

> ID：13513217
> 
> 赞同：2
> 
> 时间：2012-11-22T12:55:52.040
> 
> 标签：perl, mojolicious, mojolicious-lite

我有一个`under`可能会产生错误的语句（例如，身份验证错误）。我到处使用内容协商，我想以`under`正确的格式返回错误。示例代码：

```
under sub {
  my $self = shift;

  # Authenticated
  my $token = $self->param('token') || '';
  return 1 if $token eq '123456';

  # Not authenticated
  $self->respond_to(
    json => {
      json => { error => 'Invalid authentication token.' },
      status => 401
    },
    text => {
      text => 'Unauthorized.',
      status => 401
    }
  );
  return undef;
} 
```

我可以`render`在里面使用`under`，但`respond_to`不会工作。可能`under`为此工作。但在那种情况下，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:20:12.677

在[伽利略](https://github.com/jberger/Galileo/blob/master/lib/Galileo.pm#L96)中，我有一个`auth_fail`助手可以做这样的事情。当我制定一个示例时，请查看该代码（以及`if_author`and `if_admin` `under`s）。

好的，这是一个例子，在你可以重定向到你的失败处理程序之前，这个技巧被证明是（至少对于这个机制），你需要`flash`格式，使它可以用于下一个处理程序。

```
#!/usr/bin/env perl

use Mojolicious::Lite;

any '/fail' => sub {
  my $self = shift;
  $self->respond_to(
    json => {
      json => { error => 'Invalid authentication token.' },
      status => 401
    },
    text => {
      text => 'Unauthorized.',
      status => 401
    }
  );
};

under sub {
  my $self = shift;

  # Authenticated
  my $token = $self->param('token') || '';
  return 1 if $token eq '123456';

  # Not authenticated
  $self->flash( format => $self->param('format') );
  $self->redirect_to('fail');
  return undef;
};

any '/private' => sub {
  my $self = shift;
  $self->respond_to(
    json => {
      json => { launch_codes => '9999999' },
    },
    text => {
      text => 'Launch Code: 9999999',
    }
  ); 
};

app->start; 
```

# php - 读取excel文件内容并插入数据库

> ID：13513218
> 
> 赞同：0
> 
> 时间：2012-11-22T12:55:52.237
> 
> 标签：php, symfony

您好，我想读取一个 excel 文件并将其内容插入到我的网络中给出的数据库中

```
<form  class="form-analyste"  method="POST" action="{{ path('Importer_dark_cell')}}" enctype="multipart/form-data"> 
```

```
 <input type="hidden" name="MAX_FILE_SIZE" value="2097152000000">
 Fichier : <input type="file" name="avatar">
                <li class="li">

 <input  type="submit" name="envoyer" value="Envoyer le fichier">
 </li>
 </ul>
 </h5> 
```

`

网络，但当我点击发送时，我总是找不到文件！© e 导入已停止。我试图在互联网上找到，但我找到了可以帮助我的相同答案我被困在这一点上：（在设置之前我无法继续前进（

```
public function importer_dark_cellAction(){
    $session =$this->get('request')->getSession() ;
        $user_name = $session->get('user_name');

    $fichier=$_FILES["avatar"]["name"];
/* On ouvre le fichier à importer en lecture seulement */
if (file_exists($fichier))
$fp = fopen("$fichier", "r"); 
else
{ /* le fichier n'existe pas */
echo "Fichier introuvable !<br>Importation stoppée.";
exit();
}  $host = "172.25.5.227"; 
$user = "stgzouaoui"; 
$password = "stg"; 
$bdd = "stg_zouaoui_dev"; 
    mysql_connect($host, $user, $password) or die ("impossible de se connecter au serveur" ); 
        mysql_select_db($bdd) or die ("impossible de se connecter a la base de donnees" );
  while (!feof($fp)) /* Et Hop on importe */
    { /* Tant qu'on n'atteint pas la fin du fichier */ 
       $ligne = fgets($fp,4096); /* On lit une ligne */  

       /* On récupère les champs séparés par ; dans liste*/
       $liste = explode( ";",$ligne);  

       /* On assigne les variables */ 
       $Nom_cell = $liste[0]; 
       $cmts = $liste[1]; 

       /* Ajouter un nouvel enregistrement dans la table */ 
       $query = "INSERT INTO dark_cell VALUES('$Nom_cell','$cmts')"; 
       $result= MYSQL_QUERY($query); 

       if(mysql_error())
        { /* Erreur dans la base de donnees, surement la table qu'il faut créer */
           print "Erreur dans la base de données : ".mysql_error();
           print "<br>Importation stoppée.";
           exit();
        } 
       else /* Tout va bien */
         print "$Nom_cell $cmts <br>";
     } 

     echo "<br>Importation terminée, avec succès."; 

     /* Fermeture */ 
     fclose($fp); 
     MYSQL_CLOSE(); 

   break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:02:34.217

请在您的代码中编辑

```
$fichier=$_FILES["avatar"]["tmp_name"]; 
```

# firefox-addon - 检查 Flash 对象中的元素

> ID：13513219
> 
> 赞同：3
> 
> 时间：2012-11-22T12:55:52.377
> 
> 标签：firefox-addon, firebug, watir-webdriver

我只想单击 Flash 对象中的一个元素。为此，我尝试使用萤火虫检查元素。但我找不到任何使用 firebug 进行检查的选项。我是新来的。请提出一些解决方案。

谢谢，萨拉瓦娜

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:36:27.240

据我所知，Watir 和 Firebug 都将 Flash 元素视为一个黑盒子，他们看不到里面有什么。

# yii - 如何创建确认邮件并将其发送给 yii 中的用户？

> ID：13513221
> 
> 赞同：0
> 
> 时间：2012-11-22T12:55:56.717
> 
> 标签：yii

在 yii 我正在创建注册表单。成功注册后，我想生成确认码，也想向同一用户发送注册确认电子邮件。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:14:10.153

[检查 yii Link](http://www.yiiframework.com/extension/email/)中的邮件扩展名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:14:29.780

您可以使用邮件程序说[swift mailer](http://www.yiiframework.com/extension/swiftmailer/)或[phpmailer](http://www.yiiframework.com/extension/phpmailer/)，将它们添加到您的项目中，在您的提交页面中包含邮件程序文件。

做这样的事情`require_once(LIB_DIR.'/phpmailer/mail-wrapper.php');`并调用函数`email()`或`sendEmail()`传递主题、发件人地址、正文、附件并完成。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:17:28.967

还可以使用 Gmail 作为您的 SMTP 服务器，以避免垃圾邮件和其他邮件传递等问题。[Gmail 作为 SMTP](http://lifehacker.com/111166/how-to-use-gmail-as-your-smtp-server)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T10:26:29.173

yii 用户扩展内置了这个确认邮件功能： [http ://www.yiiframework.com/extension/yii-user/](http://www.yiiframework.com/extension/yii-user/)

正如 Ajet 所说，使用 gmail 作为 SMTP 很有意义。

# javascript - 使用 jquery-localize 访问 javascript 函数中的本地化字符串

> ID：13513223
> 
> 赞同：2
> 
> 时间：2012-11-22T12:56:05.220
> 
> 标签：javascript, jquery, localization

我正在为我的静态 Web 项目使用 jquery-localize 插件。我可以在 html 文件中本地化字符串，如下所示：

```
<p rel=localize[hello]></p> 
```

但我还需要在 js 函数中使用本地化字符串。如何从函数中正确访问那些 jquery-localize 字符串？

```
alert( localized_strings[hello] ??? ); 
```

这是 jquery-localize 插件： [https ://github.com/coderifous/jquery-localize/blob/master/README.markdown](https://github.com/coderifous/jquery-localize/blob/master/README.markdown)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T22:49:39.647

我对这个插件没有经验，但是看了代码，相信你可以通过以下方式访问加载包的数据

```
$.localize.data.PACKAGE.KEY 
```

`PACKAGE`您加载的语言包在哪里

```
$("[data-localize]").localize("PACKAGE"); 
```

并且`KEY`是您要检索的任何键（在您的示例中`hello`）。

由于包是通过 AJAX 加载的，因此您可能必须确保数据在需要时实际可用。该插件似乎为加载数据时定义了一个回调方法，并通过一个选项公开它。所以你可以做这样的事情：

```
$("[data-localize]").localize("PACKAGE", { 
    callback: function(data, defaultCallback) {
        console.log(data.KEY); // <-- do whatever here
        defaultCallback(data);
}}); 
```

# vb.net - FileMaker 的 ODBC 驱动程序不释放句柄（内存泄漏）

> ID：13513224
> 
> 赞同：0
> 
> 时间：2012-11-22T12:56:07.273
> 
> 标签：vb.net, memory-leaks, odbc, driver, filemaker

在我的 VB.NET 项目中追踪内存泄漏一整天后，我将原因追溯到 FileMaker 的 ODBC 驱动程序的错误！

要重现，您需要一个可以连接的数据库（我的数据库托管在 Server Advanced 11.0.3 上，但您也可以在本地托管它），以及在 PC 上注册/安装的 ODBC 驱动程序（我测试了 11.3 和 12.0 版本，以及最新的 12.2)。

启动一个新的 VB.NET WinForms 项目，在表单中添加一个按钮并将此代码粘贴到按钮的单击事件中：

```
Using cn_FM As New Odbc.OdbcConnection("DRIVER={FileMaker ODBC};SERVER=192.168.1.xxx;UID=admin;PWD=admin;DATABASE=test;")
    cn_FM.Open()
End Using 
```

这段代码所做的只是打开一个到 FileMaker 数据库的连接，但是如果您在 Windows 任务管理器中分析内存使用情况，您可以很容易地看到（通过反复单击您刚刚创建的按钮）`cn_FM`没有正确处理，因为句柄不断增加！我尝试强制垃圾收集，但这没有做任何事情，所以我认为它是驱动程序本身的问题。

哦，我用同样的方法测试了连接到 SQL 数据库，正如你所料，没有句柄泄漏......

谁能确认这是正确的？

**编辑：**我尝试了各种打开和关闭连接的方法，以及实际在数据库中查询`using`块中的某些内容。还尝试在本地托管 fp7 文件，但仍然不行:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:47:50.857

FileMaker 的 ODBC 驱动程序很糟糕，他们承认这一点。您还会发现，每次访问 FM 服务器时，您的 CPU 都会飙升至近 100%。多年来，我一直在抱怨他们。

他们的“解决方案”是引入外部 SQL 源，但这需要你走向另一个方向。您可以将 VB 数据库绑定到 FileMaker，然后像访问实际 FileMaker 数据一样访问数据。这将允许您在 FM 服务器上创建脚本来同步您需要与 VB 数据库同步的任何表。

这并不理想，但这将是您获得良好性能的最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T02:35:22.467

我通过建立持久连接解决了这个问题（声明并打开一次并保持打开状态）。但是每次我想使用它时，我都需要检查它是否仍然打开，例如：

```
Public Sub CheckOpen(ByRef cn As Odbc.OdbcConnection)
    If cn.State <> System.Data.ConnectionState.Open Then
        cn.Close()
        cn.Open()
    End If
End Sub 
```

如果您有多个 FM 数据库文件，那么这可能意味着您需要为每个文件建立一个连接。

**旁注：**在 FMSA 上运行的 FileMaker 的 xdbc_listener.exe 进程也存在漏洞。我们注意到一种模式，一旦内存使用量达到 2GB 以下，它就会崩溃。因此请记住，该过程可能需要不断重新启动。

# visual-studio - 测试资源管理器的测试结果与调试结果不匹配

> ID：13513228
> 
> 赞同：0
> 
> 时间：2012-11-22T12:56:17.900
> 
> 标签：visual-studio, unit-testing, testing, visual-studio-2012

我已经使用[gtest](http://code.google.com/p/googletest/)在 Visual Studio 2012 中编写了一些简单的测试，并且每个测试都按我的意愿通过，但是当它们通过命令行时，其中一个失败，即期望从某个位置加载文件的测试。代码：

```
TEST(configTest, paramsTest) { 
    Config cfg;
    ASSERT_TRUE(cfg.loadConfigFile("config100.txt"));
    EXPECT_EQ (100, cfg.getBoardHeight());
    EXPECT_EQ (100, cfg.getBoardWidth());
    EXPECT_EQ (100, cfg.getGoldNumber());
    EXPECT_EQ (100, cfg.getPlatinumNumber());
    EXPECT_EQ (100, cfg.getWallsNumber());
} 
```

当我调试测试时，我在每个字段中得到 100 `cfg`（+ 当我从 VS 正常启动应用程序时测试通过）但是当我使用 Visual Studio 的测试资源管理器时，我有这个：

我认为这是工作目录的问题，但我知道 Project 的工作目录并将配置放在那里，所以我不知道应该在哪里搜索测试资源管理器的工作目录。

我可以在某个地方调整它吗？

![在此处输入图像描述](../Images/4f8eac7f5eaebf3bfe818c025873f4b9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:49:57.420

[您应该使用 msbuild](http://msdn.microsoft.com/en-us/library/42x5kfw4%28v=vs.80%29.aspx)使用构建后事件将此文件复制到您的 $(OutDir)

# persistence - 我如何使用 spring roo 进行回滚？

> ID：13513234
> 
> 赞同：1
> 
> 时间：2012-11-22T12:56:35.763
> 
> 标签：persistence, spring-roo, rollback, jta

我正在尝试找到一种方法，当列表中的一个元素由于已建立的业务规则内的原因而失败时（即：抛出我的自定义异常时），我可以进行回滚

示例，（如果列表中的一个元素失败，这个想法不会记录任何内容）

```
public class ControlSaveElement {

 public void saveRecords(List<MyRecord> listRecords) {

  Boolean status = true;

  foreach(MyRecord element: listRecords) {
     // Here is business rules
     if(element.getStatus() == false) {
        // something
        status = false;
     }
     element.persist();
  }

  if(status == false) {
     // I need to do roll back from all elements persisted before
  }
 }

...
} 
```

任何的想法？我正在使用 Roo 1.2.2 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T01:09:33.610

您所描述的是一种需要事务性的服务方法（saveRecords）。要么使用 @Transactional 注释进行注释，然后引发异常，要么您将不得不考虑使用 TransactionTemplate 来获得更好的控制，以便进行手动回滚。

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html)

[http://springinpractice.com/2008/03/18/annotation-based-transactions-in-spring/](http://springinpractice.com/2008/03/18/annotation-based-transactions-in-spring/)

[有没有办法在不遇到异常的情况下强制事务回滚？](https://stackoverflow.com/questions/832375/is-there-a-way-to-force-a-transactional-rollback-without-encountering-an-excepti)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:11:46.470

在 MyRecord 实体中创建一个新的静态方法怎么样：

```
@Transactional
public static void saveMyRecordsList(List<MyRecord> listRecords) {

  boolean persistAll = true;

  foreach(MyRecord element: listRecords) {
     if(element.getStatus() == false) {
        persistAll = false;
     }
  }

  if (persistAll) {
      foreach(MyRecord element: listRecords) {
         entityManager().persist(element);
      }
  }
 } 
```

这可能比持久化元素并不得不回滚它们更有效？

# java - 如何在 Eclipse Juno 中以编程方式分离编辑器？

> ID：13513235
> 
> 赞同：2
> 
> 时间：2012-11-22T12:56:36.823
> 
> 标签：java, eclipse, editor, detach

在我的 RCP 应用程序中，我可以在 Eclipse 4.2 (Juno) 中打开一个编辑器，但我希望它在默认情况下在单独的窗口中打开（即分离）。我不想被迫手动将其拖放到主工作台窗口之外。

我在 IEditorPart、WorkbenchWindow、WorkbenchPage、IViewSite 等类中闲逛，但到目前为止还没有运气。

实际上，如果能够将编辑器嵌入到 org.eclipse.jface.dialogs 中的某个对话框窗口中，那就太好了。但我认为这是不可能的，因为窗口（与视图一样多）和编辑器不能很好地结合在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:20:30.197

试试看[这里](http://tomsondev.bestsolution.at/2012/07/13/so-you-used-internal-api/)

有一个关于视图的例子，但我认为它可以适应您的需求

# python - python：3d上的嵌套循环

> ID：13513243
> 
> 赞同：1
> 
> 时间：2012-11-22T12:57:03.223
> 
> 标签：python, performance, loops, nested, iteration

有没有办法简化 3d 字段上的 3 嵌套循环？代码如下：

```
from itertools import product
for kx, ky, kz in product(freq, freq, freq):
    k = np.sqrt(kx**2+ky**2+kz**2)
    if int(k+0.5) < N/2.0:
        yaxes[field][int(k+0.5)] += A[kx][ky][kz] 
```

A 的形状是 (N,N,N)，freq 是长度为 N 的特殊迭代。也许有一个 numpy-tool 来执行此代码，因为这需要很长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:59:07.177

通过这个简单的优化，您可以将时间消耗减少 20%：

```
NN = N/2.0
for kx, ky, kz in product(freq, freq, freq):
    k = int(np.sqrt(kx**2 + ky**2 + kz**2) + 0.5)
    if k < NN:
        yaxes[field][k] += A[kx][ky][kz] 
```

使用 dis 模块检查字节码和 timeit 以测量算法的速度。以下示例说明了您的代码如何更改。

每次编写 int(k+0.5) 时，都会得到以下字节码：

```
 65 LOAD_GLOBAL              3 (int) 
     68 LOAD_FAST                2 (k) 
     71 LOAD_CONST               3 (0.5) 
     74 BINARY_ADD           
     75 CALL_FUNCTION            1 
```

最好计算一次，这样下一次调用会快很多：

```
 75 LOAD_FAST                2 (k) 
```

N/2.0 的情况相同。而不是在每次迭代中都有这个：

```
 78 LOAD_GLOBAL              4 (N) 
     81 LOAD_CONST               4 (2.0) 
     84 BINARY_TRUE_DIVIDE 
```

你可以只使用预先计算的NN：

```
 78 LOAD_GLOBAL              4 (NN) 
```

# python - 使用 splrep 平滑轨迹

> ID：13513244
> 
> 赞同：3
> 
> 时间：2012-11-22T12:57:05.403
> 
> 标签：python, scipy

从视频记录中，可以提取行人**头部**穿过瓶颈的轨迹。因为，行人在移动轨迹时摇摆包含我想消除的讨厌的振荡。（平滑算法与这个问题无关）

结果如图[所示](http://postimage.org/image/mt83l9lu3/)。

所以，我的目标是使用蓝点（称为零点）获得平滑的轨迹。为此，我想到了样条曲线。不幸的是，scipy 的函数*splrep*有一个限制，即数据应该相对于 x 轴进行排序（为什么？）。

但是在我的情况下，对数据点进行排序不是一个好主意，然后它会使真实轨迹变形。样条曲线的结果，排序**后看起来**[像](http://postimage.org/image/3mb5dbhnl/)。

（图的最后部分是第二部分的放大图，以展示振荡。）

从数学的角度来看，*splrep*的结果可能是正确的，但是它们没有物理相关性，这是因为我不必操纵轨迹。

任何想法如何用python（scipy）正确解决这个问题？

如果有人想玩数据，这是我的代码。

```
from matplotlib.pyplot import *
from numpy import *
from scipy import interpolate

# trajectory
path =   array([
[ 3.83911987e+02,  -3.63506010e+01],
[ 3.80407013e+02,  -3.70444980e+01],
[ 3.77910004e+02,  -3.73224980e+01],
[ 3.75592010e+02,  -3.72258990e+01],
[ 3.72606995e+02,  -3.68973010e+01],
[ 3.68860992e+02,  -3.64117010e+01],
[ 3.64709991e+02,  -3.54816020e+01],
[ 3.60441986e+02,  -3.46052020e+01],
[ 3.56470001e+02,  -3.33995020e+01],
[ 3.53148010e+02,  -3.17936990e+01],
[ 3.50332001e+02,  -2.99004990e+01],
[ 3.48214996e+02,  -2.76462990e+01],
[ 3.45072998e+02,  -2.56490000e+01],
[ 3.41787994e+02,  -2.45536990e+01],
[ 3.38785004e+02,  -2.41054990e+01],
[ 3.36031006e+02,  -2.40007990e+01],
[ 3.33045013e+02,  -2.41030010e+01],
[ 3.29737000e+02,  -2.44983010e+01],
[ 3.26299011e+02,  -2.53087010e+01],
[ 3.22807007e+02,  -2.65634990e+01],
[ 3.19296997e+02,  -2.82255000e+01],
[ 3.15854004e+02,  -3.02551990e+01],
[ 3.12652008e+02,  -3.22993010e+01],
[ 3.09871002e+02,  -3.41482010e+01],
[ 3.07183990e+02,  -3.56874010e+01],
[ 3.04494995e+02,  -3.66516990e+01],
[ 3.01890015e+02,  -3.71099010e+01],
[ 2.99341003e+02,  -3.74341010e+01],
[ 2.96681000e+02,  -3.77743990e+01],
[ 2.93803986e+02,  -3.79683000e+01],
[ 2.90785004e+02,  -3.77564010e+01],
[ 2.87817993e+02,  -3.69802020e+01],
[ 2.84980988e+02,  -3.57428020e+01],
[ 2.82131989e+02,  -3.40877990e+01],
[ 2.79335999e+02,  -3.21539990e+01],
[ 2.76933014e+02,  -3.00962010e+01],
[ 2.74431000e+02,  -2.81432000e+01],
[ 2.71325012e+02,  -2.63622000e+01],
[ 2.68205994e+02,  -2.47146000e+01],
[ 2.65588013e+02,  -2.33606000e+01],
[ 2.63167999e+02,  -2.23937000e+01],
[ 2.60816010e+02,  -2.16775000e+01],
[ 2.58609985e+02,  -2.10203990e+01],
[ 2.56585999e+02,  -2.06432990e+01],
[ 2.54651001e+02,  -2.06508010e+01],
[ 2.52639008e+02,  -2.09992010e+01],
[ 2.50608002e+02,  -2.17117000e+01],
[ 2.48576004e+02,  -2.28300990e+01],
[ 2.46585999e+02,  -2.42358000e+01],
[ 2.44641006e+02,  -2.59650990e+01],
[ 2.42638000e+02,  -2.79718000e+01],
[ 2.40481995e+02,  -2.97957990e+01],
[ 2.38220993e+02,  -3.15263000e+01],
[ 2.35929993e+02,  -3.32879980e+01],
[ 2.33899994e+02,  -3.47654000e+01],
[ 2.32324005e+02,  -3.58550000e+01],
[ 2.30934006e+02,  -3.66335980e+01],
[ 2.29505005e+02,  -3.73493000e+01],
[ 2.28022995e+02,  -3.80163000e+01],
[ 2.26539993e+02,  -3.84826010e+01],
[ 2.25024002e+02,  -3.86341020e+01],
[ 2.23253998e+02,  -3.84396020e+01],
[ 2.21259995e+02,  -3.78853990e+01],
[ 2.19130997e+02,  -3.69795990e+01],
[ 2.16889999e+02,  -3.58032990e+01],
[ 2.14451996e+02,  -3.43969990e+01],
[ 2.11820007e+02,  -3.27537000e+01],
[ 2.09186996e+02,  -3.10618990e+01],
[ 2.07384995e+02,  -2.93244990e+01],
[ 2.04218002e+02,  -2.81264000e+01],
[ 2.01115997e+02,  -2.68684010e+01],
[ 1.98009003e+02,  -2.56004010e+01],
[ 1.95281006e+02,  -2.47794000e+01],
[ 1.92839005e+02,  -2.42327000e+01],
[ 1.90753006e+02,  -2.39883000e+01],
[ 1.88904007e+02,  -2.39496990e+01],
[ 1.87065002e+02,  -2.40893000e+01],
[ 1.85164001e+02,  -2.51790010e+01],
[ 1.83408005e+02,  -2.58622000e+01],
[ 1.81880997e+02,  -2.68085000e+01],
[ 1.80416000e+02,  -2.82280010e+01],
[ 1.79287994e+02,  -3.01436000e+01],
[ 1.78574997e+02,  -3.22188990e+01],
[ 1.77757004e+02,  -3.42841000e+01],
[ 1.76931000e+02,  -3.64440990e+01],
[ 1.76029007e+02,  -3.81259990e+01],
[ 1.75113998e+02,  -3.96713980e+01],
[ 1.74244003e+02,  -4.08652000e+01],
[ 1.73044998e+02,  -4.15327990e+01],
[ 1.72110001e+02,  -4.16768000e+01],
[ 1.70936005e+02,  -4.17703020e+01],
[ 1.69544006e+02,  -4.12965010e+01],
[ 1.67804993e+02,  -4.05098000e+01],
[ 1.66028000e+02,  -3.96259000e+01],
[ 1.64475998e+02,  -3.81104010e+01],
[ 1.63324005e+02,  -3.61517980e+01],
[ 1.62007004e+02,  -3.43326990e+01],
[ 1.60423996e+02,  -3.27486990e+01],
[ 1.58707993e+02,  -3.09353010e+01],
[ 1.56770996e+02,  -2.94423010e+01],
[ 1.54835999e+02,  -2.79886000e+01],
[ 1.52953003e+02,  -2.67169000e+01],
[ 1.50912994e+02,  -2.57530990e+01],
[ 1.48996002e+02,  -2.54090000e+01],
[ 1.47061996e+02,  -2.53249000e+01],
[ 1.45320007e+02,  -2.55256000e+01],
[ 1.43707993e+02,  -2.60972000e+01],
[ 1.41876007e+02,  -2.68913990e+01],
[ 1.40018997e+02,  -2.78764000e+01],
[ 1.38016998e+02,  -2.91917000e+01],
[ 1.36063004e+02,  -3.06130010e+01],
[ 1.34001999e+02,  -3.22636990e+01],
[ 1.31807999e+02,  -3.42985000e+01],
[ 1.29455002e+02,  -3.65051990e+01],
[ 1.27331001e+02,  -3.85568010e+01],
[ 1.25116997e+02,  -4.05253980e+01],
[ 1.23258003e+02,  -4.22365990e+01],
[ 1.21709000e+02,  -4.36623000e+01],
[ 1.20507004e+02,  -4.48983990e+01],
[ 1.19530998e+02,  -4.56188010e+01],
[ 1.18888000e+02,  -4.60003010e+01],
[ 1.18030998e+02,  -4.58804020e+01],
[ 1.17032997e+02,  -4.53919980e+01],
[ 1.15643997e+02,  -4.47540020e+01],
[ 1.14077003e+02,  -4.39210010e+01],
[ 1.12264000e+02,  -4.29716000e+01],
[ 1.10446999e+02,  -4.18083990e+01],
[ 1.08487000e+02,  -4.06045990e+01],
[ 1.06468002e+02,  -3.88120990e+01],
[ 1.04453003e+02,  -3.67605020e+01],
[ 1.02263000e+02,  -3.47210010e+01],
[ 9.98833010e+01,  -3.29178010e+01],
[ 9.76293030e+01,  -3.16152000e+01],
[ 9.55121000e+01,  -3.09032000e+01],
[ 9.33936000e+01,  -3.05140000e+01],
[ 9.14021000e+01,  -3.02255000e+01],
[ 8.95216980e+01,  -3.02507990e+01],
[ 8.76836010e+01,  -3.06539000e+01],
[ 8.58259960e+01,  -3.10028990e+01],
[ 8.40342030e+01,  -3.14128000e+01],
[ 8.25109020e+01,  -3.24874990e+01],
[ 8.16477970e+01,  -3.37783010e+01],
[ 8.10721970e+01,  -3.54217000e+01],
[ 8.02864000e+01,  -3.69583020e+01],
[ 7.93555980e+01,  -3.81934010e+01],
[ 7.82388990e+01,  -3.90952990e+01],
[ 7.72057040e+01,  -3.95537990e+01],
[ 7.61997990e+01,  -3.97468990e+01],
[ 7.54201970e+01,  -3.95574000e+01],
[ 7.46388020e+01,  -3.92573010e+01],
[ 7.36848980e+01,  -3.86537020e+01],
[ 7.25225980e+01,  -3.76381990e+01],
[ 7.13074040e+01,  -3.64692990e+01],
[ 7.02815020e+01,  -3.50397990e+01],
[ 6.93098980e+01,  -3.34804990e+01],
[ 6.82506030e+01,  -3.18008000e+01],
[ 6.69611970e+01,  -3.02639010e+01],
[ 6.55927960e+01,  -2.89077000e+01],
[ 6.44023970e+01,  -2.77817990e+01],
[ 6.31432990e+01,  -2.70891990e+01],
[ 6.19845010e+01,  -2.66151010e+01],
[ 6.08012010e+01,  -2.63731990e+01],
[ 5.95279010e+01,  -2.63244000e+01],
[ 5.81848980e+01,  -2.66625000e+01],
[ 5.67341000e+01,  -2.70667000e+01],
[ 5.53522000e+01,  -2.76193010e+01],
[ 5.40955010e+01,  -2.89263990e+01],
[ 5.30055010e+01,  -3.03295990e+01],
[ 5.19216000e+01,  -3.15974010e+01],
[ 5.08109020e+01,  -3.27397990e+01],
[ 4.95959010e+01,  -3.36008990e+01],
[ 4.83475990e+01,  -3.42673000e+01],
[ 4.69407010e+01,  -3.46990010e+01],
[ 4.56283000e+01,  -3.50008010e+01],
[ 4.45952990e+01,  -3.53820990e+01],
[ 4.35136990e+01,  -3.55634990e+01],
[ 4.24670980e+01,  -3.54066010e+01],
[ 4.11960980e+01,  -3.49855000e+01],
[ 3.94818000e+01,  -3.43259010e+01],
[ 3.75299990e+01,  -3.32298010e+01],
[ 3.54291000e+01,  -3.18832000e+01],
[ 3.35419010e+01,  -3.01863990e+01],
[ 3.18060000e+01,  -2.83223990e+01],
[ 3.03379000e+01,  -2.64284990e+01],
[ 2.90386010e+01,  -2.48046000e+01],
[ 2.77717000e+01,  -2.35111010e+01],
[ 2.66282010e+01,  -2.24167000e+01],
[ 2.56504000e+01,  -2.15105990e+01],
[ 2.45620990e+01,  -2.09494990e+01],
[ 2.36200010e+01,  -2.05372010e+01],
[ 2.25006010e+01,  -2.02623000e+01],
[ 2.12878000e+01,  -2.01607000e+01],
[ 1.99335990e+01,  -2.02614990e+01],
[ 1.84620000e+01,  -2.04685990e+01],
[ 1.67920000e+01,  -2.09810010e+01],
[ 1.50698000e+01,  -2.15951000e+01],
[ 1.31372000e+01,  -2.24368000e+01],
[ 1.08794000e+01,  -2.30415000e+01],
[ 8.29891000e+00,  -2.31980000e+01],
[ 5.61593000e+00,  -2.27952000e+01],
[ 2.89633000e+00,  -2.16718010e+01],
[ 8.38298000e-01,  -2.05924000e+01],
[-9.50327000e-01,  -1.92878000e+01],
[-2.68694000e+00,  -1.77108000e+01],
[-4.20826000e+00,  -1.59780000e+01],
[-5.74339000e+00,  -1.44248000e+01],
[-7.13617000e+00,  -1.34790000e+01],
[-8.80355000e+00,  -1.29467000e+01],
[-1.09091000e+01,  -1.23274000e+01],
[-1.32822000e+01,  -1.15982000e+01],
[-1.57716000e+01,  -1.08766000e+01],
[-1.82273010e+01,  -1.04894000e+01],
[-2.05464000e+01,  -1.03020000e+01],
[-2.24237000e+01,  -9.95550000e+00],
[-2.38675990e+01,  -9.45586000e+00],
[-2.50128990e+01,  -8.74390000e+00],
[-2.58752990e+01,  -7.79803000e+00],
[-2.64664000e+01,  -6.62279000e+00],
[-2.66699010e+01,  -5.05463000e+00],
[-2.65776000e+01,  -3.41969000e+00],
[-2.63474010e+01,  -1.57144000e+00],
[-2.61133000e+01,   6.46999000e-01],
[-2.58085990e+01,   3.23445000e+00],
[-2.55969010e+01,   5.78099000e+00],
[-2.55000000e+01,   8.36744000e+00],
[-2.54680000e+01,   1.11505000e+01],
[-2.53899000e+01,   1.41447000e+01],
[-2.53566000e+01,   1.71451000e+01],
[-2.58187010e+01,   2.05758000e+01],
[-2.65830990e+01,   2.44065000e+01],
[-2.79578990e+01,   2.84622990e+01],
[-2.95126990e+01,   3.26220020e+01],
[-3.12829000e+01,   3.70005990e+01],
[-3.31349980e+01,   4.12872010e+01],
[-3.51132010e+01,   4.54515000e+01],
[-3.70420000e+01,   4.90353010e+01],
[-3.85575980e+01,   5.27621990e+01],
[-3.94586980e+01,   5.64221990e+01],
[-3.97930980e+01,   5.98333020e+01],
[-3.98658980e+01,   6.29235000e+01],
[-3.94589000e+01,   6.64207990e+01],
[-3.88973010e+01,   6.96651990e+01],
[-3.81236990e+01,   7.34041980e+01],
[-3.68148000e+01,   7.73573990e+01],
[-3.54217990e+01,   8.15375980e+01],
[-3.38608020e+01,   8.63582990e+01],
[-3.15564000e+01,   9.19246980e+01],
[-2.93428990e+01,   9.76631010e+01],
[-2.72516990e+01,   1.02860001e+02],
[-2.59647010e+01,   1.08068001e+02],
[-2.51345010e+01,   1.12709999e+02],
[-2.48617990e+01,   1.16903000e+02],
[-2.48806990e+01,   1.20731003e+02],
[-2.52887990e+01,   1.24375000e+02],
[-2.62332990e+01,   1.28048004e+02],
[-2.74224000e+01,   1.31630005e+02],
[-2.93577000e+01,   1.35138000e+02],
[-3.18421000e+01,   1.38580002e+02],
[-3.43532980e+01,   1.42533997e+02],
[-3.68244020e+01,   1.46210999e+02],
[-3.83947980e+01,   1.49451996e+02],
[-3.94422990e+01,   1.52266006e+02],
[-4.00191000e+01,   1.54524002e+02],
[-4.01052020e+01,   1.56955002e+02],
[-4.01661990e+01,   1.59701996e+02],
[-3.94771000e+01,   1.62824997e+02],
[-3.84656980e+01,   1.65957993e+02],
[-3.69557000e+01,   1.69384995e+02],
[-3.54382020e+01,   1.72932007e+02],
[-3.37109990e+01,   1.77065002e+02],
[-3.12064990e+01,   1.81628006e+02],
[-2.85994000e+01,   1.86921005e+02],
[-2.57090000e+01,   1.91203003e+02],
[-2.33045010e+01,   1.95505005e+02],
[-2.18305000e+01,   1.99636993e+02],
[-2.07416990e+01,   2.03414993e+02],
[-2.00366990e+01,   2.06847000e+02],
[-1.97754000e+01,   2.11009003e+02],
[-1.97579000e+01,   2.15139999e+02],
[-1.99501990e+01,   2.19901001e+02],
[-2.07133010e+01,   2.24968994e+02],
[-2.17415010e+01,   2.30507004e+02],
[-2.29566990e+01,   2.36494003e+02],
[-2.40505010e+01,   2.42442001e+02],
[-2.48687990e+01,   2.48417007e+02],
[-2.52953000e+01,   2.54072006e+02],
[-2.54123000e+01,   2.59537994e+02],
[-2.54193000e+01,   2.64915985e+02],
[-2.56805990e+01,   2.71098999e+02],
[-2.59018990e+01,   2.77950989e+02],
[-2.64182000e+01,   2.84119995e+02],
[-2.65342010e+01,   2.89997009e+02],
[-2.60492990e+01,   2.95882996e+02],
[-2.51636010e+01,   3.02220001e+02],
[-2.36994990e+01,   3.09553986e+02],
[-2.22290000e+01,   3.16851990e+02],
[-2.17989010e+01,   3.23812012e+02],
[-2.21809010e+01,   3.30109985e+02],
[-2.24906010e+01,   3.36039001e+02],
[-2.24252000e+01,   3.41493011e+02],
[-2.26278990e+01,   3.46933990e+02],
[-2.34319000e+01,   3.52662994e+02],
[-2.43871990e+01,   3.58191010e+02],
[-2.52982010e+01,   3.64041992e+02],
[-2.64419000e+01,   3.70739990e+02],
[-2.79559990e+01,   3.77709991e+02],
[-2.87983000e+01,   3.84595001e+02],
[-2.86500000e+01,   3.90970001e+02],
[-2.82661990e+01,   3.96442993e+02],
[-2.81972010e+01,   4.01808014e+02]])   
#nullpoints
A = array([
[ 3.50332001e+02,  -2.99004990e+01],
[ 3.15854004e+02,  -3.02551990e+01],
[ 2.76933014e+02,  -3.00962010e+01],
[ 2.42638000e+02,  -2.79718000e+01],
[ 2.11820007e+02,  -3.27537000e+01],
[ 1.77757004e+02,  -3.42841000e+01],
[ 1.63324005e+02,  -3.61517980e+01],
[ 1.27331001e+02,  -3.85568010e+01],
[ 1.06468002e+02,  -3.88120990e+01],
[ 8.10721970e+01,  -3.54217000e+01],
[ 7.02815020e+01,  -3.50397990e+01],
[ 5.30055010e+01,  -3.03295990e+01],
[ 3.03379000e+01,  -2.64284990e+01],
[ 1.67920000e+01,  -2.09810010e+01],
[-2.61133000e+01,   6.46999000e-01],
[-3.31349980e+01,   4.12872010e+01],
[-3.38608020e+01,   8.63582990e+01],
[-3.18421000e+01,   1.38580002e+02],
[-3.12064990e+01,   1.81628006e+02],
[-2.17415010e+01,   2.30507004e+02],
[-2.17415010e+01,   2.30507004e+02],
[-2.51636010e+01,   3.02220001e+02],
[-2.43871990e+01,   3.58191010e+02]])

isSort = 1 
# isSort = 0 --> problems with splrep 
#    File "/usr/local/lib/python2.6/dist-packages/scipy/interpolate/fitpack.py",
#    line 466, in splrep
#    raise _iermess[ier][3](_iermess[ier][0])
#    ValueError:     Error on input data

if isSort:
    I = lexsort((A[:,1], A[:,0]) )
    A = A[I]

a1 = A[:,0]
a2 = A[:,1] 
subplot(311)
plot(path[:,0], path[:,1], "-r", lw=2, label="path")
plot(a1, a2, "ob", ms = 6,  label = "nullpoints")
legend();grid()
subplot(312)
# -------------------- spline ------------------------
xnew = np.arange( min(a1), max(a1), 1)
for s, color in zip([abs(max(a2)- min(a2))*32, abs(max(a2)- min(a2))*8], ["-m", "-g"]):
    tck = interpolate.splrep(a1, a2, s = s)
    ynew = interpolate.splev(xnew, tck)
    plot(xnew, ynew, "%s"%color, lw=2, label = "splrep, s=%d"%s)
#------------------------------------------------------
plot(a1, a2, "ob", ms = 6)
legend();grid()
# zoom around the oscillating part
subplot(313)
for s, color in zip([abs(max(a2)- min(a2))*32, abs(max(a2)- min(a2))*8], ["-m", "-g"]):
    tck = interpolate.splrep(a1, a2, s = s)
    ynew = interpolate.splev(xnew, tck)
    plot(xnew, ynew, "%s"%color, lw=2, label = "splrep, s=%d"%s)
xlim([min(a2), -20])
plot(a1, a2, "ob", ms = 6,  label = "nullpoints")
grid();savefig("dummy.png"); show() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T13:22:50.490

您的数据的问题似乎是重复的：当两个连续点相等时，您无法正确插值。

在“空点”数据的末尾附近，有两个相同的行：

```
[-2.17415010e+01, 2.30507004e+02],
[-2.17415010e+01, 2.30507004e+02],

```

另请注意，由于您有 2D 数据，因此您需要使用[`splprep()`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.splprep.html#scipy.interpolate.splprep)（注意额外的`p`）。

对于我的一个项目，我使用以下函数来插入 2D 点集（折线）：

```
import numpy as np
import scipy.interpolate as interp

def interpolate_polyline(polyline, num_points):
    duplicates = []
    for i in range(1, len(polyline)):
        if np.allclose(polyline[i], polyline[i-1]):
            duplicates.append(i)
    if duplicates:
        polyline = np.delete(polyline, duplicates, axis=0)
    tck, u = interp.splprep(polyline.T, s=0)
    u = np.linspace(0.0, 1.0, num_points)
    return np.column_stack(interp.splev(u, tck)) 
```

我可以成功地将此功能应用于您的“空点”数据：

```
>>> B = interpolate_polyline(A, 100)
>>> B.shape
(100, 2)
>>> plot(B[:, 0], B[:, 1]) 
```

![情节结果](../Images/9899bb7e0d1d5f224a69e9bce7af7daa.png)

# node.js - nodejs中的转发代理

> ID：13513247
> 
> 赞同：3
> 
> 时间：2012-11-22T12:57:25.470
> 
> 标签：node.js, http, proxy, reverse-proxy, appfog

我用 nodejs 制作了一个小型转发代理并将其托管在 appfog 中。它在设置我的浏览器的代理后在本地工作，但是当我尝试使用托管在 appfog 中的代理时，它说：*Errore 130 (net::ERR_PROXY_CONNECTION_FAILED): Connessione al server proxy non riuscita.* 这是我的代码：

```
var http = require('http');
http.createServer(function(request, response) {
http.get(request.url, function(res) {
  console.log("Got response: " + res.statusCode);
    res.on('data', function(d) {
      response.write(d);
  });
   res.on('end', function() {
     response.end();
    });
}).on('error', function(e) {
  console.log("Got error: " + e.message);
});
}).listen(8080); 
```

我错过了什么吗？

您的代码正在运行，但是一旦我尝试像这样使用它：

```
var port = process.env.VCAP_APP_PORT || 8080;
var http = require('http');
var urldec = require('url');
http.createServer(function(request, response) {
var gotourl=urldec.parse(request.url);
var hosturl=gotourl.host;
var pathurl=gotourl.path;
var options = {
    host: hosturl,
    port: 80,
    path: pathurl,
    method: request.method
  };

  http.get(options, function(res) {
    console.log("Got response: " + res.statusCode);
    res.on('data', function(d) {
      response.write(d);
    });
    res.on('end', function() {
      response.end();
    });
  }).on('error', function(e) {
    console.log("Got error: " + e.message);
    response.write("error");
    response.end();
  });
}).listen(port);
console.log(port); 
```

它仍然不起作用：当我尝试 ping 地址时请求超时，我得到相同的 ERR_PROXY_CONNECTION_FAILED ... 本地工作但是当我使用远程地址作为代理时它没有

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:40:53.427

**第一：**应用需要使用cloudfoundry发给它的端口号。该应用程序位于反向代理之后，该代理在端口 80 上接收传入请求并将它们转发到 VCAP_APP_PORT。

```
var port = process.env.VCAP_APP_PORT || 8080; // 8080 only works on localhost

....

}).listen(port); 
```

然后您访问您的托管应用程序，如下所示：

```
http://<app_name>.<infra>.af.cm  // port 80 
```

和您的本地应用程序：

```
http://localhost:8080 
```

**第二：**您可能需要使用选项哈希发送到 http.get 方法，而不是仅仅提供 request.url。

```
var options = {
  host: '<host part of url without the protocal prefix>',
  path: '<path part of url>'
  port: 80, 
  method: 'GET' } 
```

我在本地机器和 AppFog 上测试了以下代码，并且 IP 不同。Whatismyip 在本地运行时返回了我的本地互联网 IP 地址，并且在 AppFog 托管的应用程序上它返回了 AppFog 服务器 IP。

```
var port = process.env.VCAP_APP_PORT || 8080;
var http = require('http');
var options = {
    host: "www.whatismyip.com",
    port: 80,
    path: '/',
    method: 'GET'
  };
http.createServer(function(request, response) {
  http.get(options, function(res) {
    console.log("Got response: " + res.statusCode);
    res.on('data', function(d) {
      response.write(d);
    });
    res.on('end', function() {
      response.end();
    });
  }).on('error', function(e) {
    console.log("Got error: " + e.message);
    response.write("error");
    response.end();
  });
}).listen(port); 
```

# api - “未知路径组件”的可能原因是什么？

> ID：13513249
> 
> 赞同：3
> 
> 时间：2012-11-22T12:57:38.797
> 
> 标签：api, facebook-graph-api, facebook-opengraph

我创建了一个 Facebook 应用程序和一些自定义的 Open Graph Actions 和 Types。

当我使用 Open Graph Dashboard 中的示例代码创建操作时，我收到以下错误：

```
{"error":{"message":"Unknown path components: \/NAMESPACE:ACTION","type":"OAuthException","code":2500}} 
```

我确定我为我的帐户验证了该应用程序，并且它具有为该应用程序发布操作的正确权限。

我还能检查什么或者我必须确保我没有收到此错误？

# c++ - 在 Qt 4.8 中使用 C++、libcurl 获取网站源时出错

> ID：13513252
> 
> 赞同：0
> 
> 时间：2012-11-22T12:57:47.980
> 
> 标签：c++, qt, libcurl

我正在尝试在 Qt 4.8 中使用 C++ 和 libcurl 获取网站源代码。我是 Qt 和 C++ 的新手。但是，我收到一条错误消息

**错误信息 -**

```
启动 C:*****.exe...
程序意外结束。
C:*****.exe 退出，代码为 -1073741819

```

```
#include <curl/include/curl/curl.h>
#include <fstream>
#include <sstream>
#include <iostream>

static size_t data_write(void* buf, size_t size, size_t nmemb, void* userp)
{
    if(userp)
    {
        std::ostream& os = *static_cast<std::ostream*>(userp);
        std::streamsize len = size * nmemb;
        if(os.write(static_cast<char*>(buf), len))
            return len;
    }

    return 0;
}

CURLcode curl_read(const std::string& url, std::ostream& os, long timeout = 30)
{
    CURLcode code(CURLE_FAILED_INIT);
    CURL* curl = curl_easy_init();

    if(curl)
    {
        if(CURLE_OK == (code = curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, &data_write))
        && CURLE_OK == (code = curl_easy_setopt(curl, CURLOPT_NOPROGRESS, 1L))
        && CURLE_OK == (code = curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, 1L))
        && CURLE_OK == (code = curl_easy_setopt(curl, CURLOPT_FILE, &os))
        && CURLE_OK == (code = curl_easy_setopt(curl, CURLOPT_TIMEOUT, timeout))
        && CURLE_OK == (code = curl_easy_setopt(curl, CURLOPT_URL, url.c_str())))
        {
            code = curl_easy_perform(curl);
        }
        curl_easy_cleanup(curl);
    }
    return code;
}

int main()
{
    curl_global_init(CURL_GLOBAL_ALL);

    if(CURLE_OK == curl_read("http://google.com", std::cout))
    {
    // Web page successfully written to standard output (console?)
    }

    curl_global_cleanup();
    return 0;
} 
```

上面的代码有什么问题？

PS - 上面的代码不是我的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:13:50.737

不要费心使用外部库，使用 Qt 所拥有的。它有很多！

这是一个关于如何获取网页源的简单示例！

```
void MainWindow::on_pushButton_clicked()
{
    QNetworkAccessManager * mgr = new QNetworkAccessManager(this);
    connect(mgr,SIGNAL(finished(QNetworkReply*)),this,SLOT(onfinish(QNetworkReply*)));
    connect(mgr,SIGNAL(finished(QNetworkReply*)),mgr,SLOT(deleteLater()));

    mgr->get(QNetworkRequest(QUrl("http://www.google.com")));

}

void MainWindow::onfinish(QNetworkReply *rep)
{
    QByteArray bts = rep->readAll();
    QString str(bts);
    QMessageBox::information(this,"sal",str,"ok");

} 
```

如果你想创建一个阻塞函数，请查看这里的[教程](http://www.erata.net/qt-boost/synchronous-http-request/)。

希望能帮助到你！

# android - 获取 ListView 值

> ID：13513257
> 
> 赞同：-1
> 
> 时间：2012-11-22T12:58:02.440
> 
> 标签：android, listview, textview, android-edittext

我有一个带有 Textview 和 EditText 的列表视图。现在我想获取那个 Textview 和 EditText 的值，我得到了 TextView 的值而不是 EditText。它给了我 EditText 的空白值。

请帮我

```
for (int i = 0; i < list.getCount() ; i++) { 
    View v = adapter.getView(i, null, null); 
    ClassA obj = new ClassA (); 
    obj = (ClassA) v.getTag(); 
    String Text = obj.edittext1.getText().toString(); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:06:17.400

我以为您在 editText 时设置了侦听器没有任何价值。

而是将您的editText 发送到Listner，然后从editText 中提取值。

```
 OnItemSelectedListener(new CustomListener(editText));

    public class CustomListener implements OnItemSelectedListener
    {
    private EditText editText;
    public CustomListener(EditText editText)
    {
    this.editText=editText;
    }

    onItemSelect(..)
    {
    Log.v("TAG",editText.getText().toString);

    }

} 
```

在你的主类中添加一个

```
ArrayList<EditText> editTextList=new ArrayList<EditText>(); 
```

和这个editTextList的setter方法

```
 public setEditTextList(EditText editText)
    {
    this.editTextList.add(editText);

    button.setOnClickListener(new OnClickListener(){

     onClick()
{

for(EditText editText:editTextlist)
      {
       Log.v("TAG",editText.getText().toString());
      }

}

});
    } 
```

在您的适配器中，当生成一个视图时，添加您的 editText 这个视图，但要在构造函数中发送一个 Main 活动对象。像

```
private MainActivity mainActivity;

CustomAdapter(MainActivity mainActivity)
{
  this.mainActivity=mainActivity;
} 
```

现在在您的适配器中设置editView之后

```
{

mainActivity.setEditTextList(holder.editText);

} 
```

# alfresco - 如何在 WebPreviewer 中选择文本？

> ID：13513258
> 
> 赞同：0
> 
> 时间：2012-11-22T12:58:05.177
> 
> 标签：alfresco, alfresco-share

当我们单击“共享”中的文档时，会打开另一个页面（文档详细信息），其中会在 Flash 中预览该文档。默认情况下，我们无法在该预览中选择文本（用于复制/粘贴），我想知道这是否可行以及如何？也许我应该使用另一个预览器，或者使用带有特定参数的默认预览器？！我在网上搜索，发现此功能存在于 flash 中，但找不到如何使用 WebPreviewer 实现该功能。

欢迎任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:12:03.977

Share Extras 上的[媒体查看器](https://addons.alfresco.com/addons/media-viewers)插件提供了基于[pdf.js的替代文档查看器](http://mozilla.github.com/pdf.js/)

假设您使用的是 Alfresco 4.0，该插件允许您查看文档大纲、缩略图和页面。在页面中，您可以选择文本并执行搜索。

我是这个附加组件的贡献者之一，我们欢迎通过项目站点提供反馈。

# javascript - 在javascript中使用正则表达式查找和删除字符串中的子字符串

> ID：13513262
> 
> 赞同：0
> 
> 时间：2012-11-22T12:58:28.977
> 
> 标签：javascript, regex

在 Javascript 或 ruby​​ 中，我需要使用正则表达式找到一个子字符串并将其从可能包含多个子字符串的主字符串中删除。

我的主要字符串是

```
 My <style type="">first</style> name <style>is</style> xyz <style>abc</style>. 
```

我需要删除样式标签中的所有文本，包括样式标签。

我尝试了以下表达式和其他几种变体

```
(<style .*>[^<>]*?<\/style>)
(<style .*>[^<>]*<\/style>) 
```

我想要的结果字符串是

```
My name xyz. 
```

但我找不到正确的方法。我得到的是

```
<style type="">first</style> name <style>is</style> xyz <style>abc</style> 
```

什么是正确的正则表达式？

注意：不能使用任何 JS 库，如 jquery 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:05:13.337

这应该这样做：

```
str = 'My <style type="">first</style> name <style>is</style> xyz <style>abc</style>.';
str = str.replace("<style[^>]*?>.*?</style>",""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:12:02.970

```
'My <style type="">first</style> name <style>is</style> xyz <style>abc</style>.'
.replace(/<style[^>]*>[^<]*<\/style>/g,'');
"My  name  xyz ." 
```

但本质上，您正在尝试使用正则表达式解析 xml，这实际上是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:12:36.207

您还可以使用 DOM 解析来删除不需要的节点。

```
var el = document.createElement('div');
el.innerHTML = 'My <style type="">first</style> name <style>is</style> xyz <style>abc</style>.';
var styles = el.getElementsByTagName('style');
for(var i = styles.length - 1; i >= 0; i--){
    console.log(styles);
    el.removeChild(styles[i]);
}
el.innerHTML; // My name xyz 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T13:45:33.343

你可以试试这个

`[<\/][a-z]+[a-z][ ][a-z]+[=]["]["][>]|[<][\/][a-z]+[>]|[<][a-z]+[>]`

并[点击这里输出](http://regexpal.com/?flags=g&regex=%5B%3C%5C%2F%5D%5Ba-z%5D%2B%5Ba-z%5D%5B%20%5D%5Ba-z%5D%2B%5B%3D%5D%5B%22%5D%5B%22%5D%5B%3E%5D|%5B%3C%5D%5B%5C%2F%5D%5Ba-z%5D%2B%5B%3E%5D|%5B%3C%5D%5Ba-z%5D%2B%5B%3E%5D&input=%20My%20%3Cstyle%20type%3D%22%22%3Efirst%3C%2Fstyle%3E%20name%20%3Cstyle%3Eis%3C%2Fstyle%3E%20xyz%20%3Cstyle%3Eabc%3C%2Fstyle%3E.)

# html - 使用 Phonegap 和 jQuery Mobile 的多个多页 HTML 文件在 iOS 上不起作用

> ID：13513273
> 
> 赞同：1
> 
> 时间：2012-11-22T12:58:54.033
> 
> 标签：html, ios, cordova, jquery-mobile, hyperlink

我试图弄清楚如何在使用 Phonegap 构建的 iOS 应用程序中使用具有多个 jQuery Mobile 页面的多个 HTML 文件。

第一个文件“home.html”可以正确加载，并且可以使用以下方法链接到该文件中的不同页面：

```
<a href="#contact" data-transition="slide">About</a> 
```

以及同一文件中的联系页面 div：

```
<div data-role="page" id="contact" class="page"> 
```

这在 iOS 上可以正常工作，并且加载 HTML 文件也可以：

```
<a href="feesAndCharges.html">Fees and charges</a> 
```

问题是，一旦我到达第二个 HTML 文件，指向该文件内页面的链接在 iOS 模拟器上不起作用，但在桌面 Web 浏览器上工作正常。

# jquery - jQuery循环.each函数

> ID：13513279
> 
> 赞同：2
> 
> 时间：2012-11-22T12:59:08.213
> 
> 标签：jquery, function, loops, each

我有一堆块引用，我设法一个接一个地淡入淡出。目前，在最后一个淡入淡出之后，函数结束。但我希望它循环并从头开始。到目前为止，这是我的代码：

```
$("div.quotes blockquote").each(function (index){
  $(this).delay(4500*index).fadeIn(500).delay(4000).fadeOut(500);
}); 
```

我如何让它循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:04:37.753

一种可能的解决方案：

```
function run() {
    var els = $("div.quotes blockquote");
    els.each(function(i) {
        $(this).delay(4500 * i).fadeIn(500).delay(4000).fadeOut(500, function() {
            if (i == els.length - 1) run();
        });
    });
}
run(); 
```

**演示：http:** [//jsfiddle.net/eDu6W/](http://jsfiddle.net/eDu6W/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:04:16.867

```
function toggleBlockQuotes()
{
    var countBlockquotes = $("div.quotes blockquote").length;
    var b = 1;
    $("div.quotes blockquote").each(function (index)
    {
        $(this).delay(4500*index).fadeIn(500).delay(4000).fadeOut(500);
        b++;
        if(b == countBlockquotes)
        {
            toggleBlockQuotes();
        }
    });
} 
```

请注意，这将创建一个无限循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:05:19.830

```
function loop() {
    $("div.quotes blockquote").each(function(index) {
        $(this).delay(4500 * index).fadeIn(500).delay(4000).fadeOut(500, function() {
            loop();
        });
    });
}

loop();​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T13:12:17.160

可以这样做，这取决于你到底需要什么：http: [//jsfiddle.net/MmPgG/](http://jsfiddle.net/MmPgG/)

```
(function loopAnim() {
    var $elems = $("div")
    $elems.each(function(index) {
        var $that = $(this);
        (function() {
            $that.delay(4500 * index).fadeIn(500).delay(4000).fadeOut(500, function() {
                if (index == $elems.length - 1) {
                    $elems.show();
                    loopAnim()
                }
            });

        })($that)
    });
})()​ 
```

# flash - Flex、Flash Builder 4.6 Cs6 复制和粘贴不起作用

> ID：13513282
> 
> 赞同：1
> 
> 时间：2012-11-22T12:59:23.433
> 
> 标签：flash, apache-flex, flex4.5, flexbuilder

我有一个有点奇怪的问题。这仅发生在 Web 服务器上的应用程序中，并且仅在 Chrome 中。

我有一个 SPARK textarea - `<s:TextArea>`。

我第一次可以使用快捷键和上下文菜单进行复制和粘贴。

但是当我选择另一个文本时，后者会正确复制。但它只粘贴首先选择的文本

我在 Skin 组件中尝试了该属性`mouseEnable = true`作为组件，因为它在 popup`mxTitleWindow`中。但它不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:48:07.607

如果您没有找到有关该问题的其他信息。

我发现这个错误报告[http://code.google.com/p/chromium/issues/detail?id=154497](http://code.google.com/p/chromium/issues/detail?id=154497)，很可能与您的问题有关。

我也看到了火花控件的许多复制和粘贴问题，您是否尝试过使用 mx 控件？

# jsf - JSF FlashScope 不适用于 FacesContext 重定向

> ID：13513284
> 
> 赞同：0
> 
> 时间：2012-11-22T12:59:27.157
> 
> 标签：jsf, jsf-2

我对 JSF 的 FlashScope 有疑问，请注意，我知道重定向应该指向与调用页面相同的基本路径。

我的情况是，当客户端从他/她的电子邮件中单击一个链接时，该操作将被初始化，然后它将加载一个带有支持 bean 的 .xhtml（具有 preRenderView 事件）页面以检查传递的参数。当参数错误时，它必须重定向到带有消息的新页面。

风景：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

    <f:metadata>
        <f:viewParam name="dummy" />
        <f:event listener="#{signupMaterialBean.initFromContext()}"
            type="preRenderView"></f:event>
    </f:metadata>

    <h:outputText value="#{signupMaterialBean.html}" escape="false"></h:outputText>

</ui:composition> 
```

支持豆：

```
public void initFromContext() {
    try {
        Map<String, String> params = facesContext.getExternalContext()
                .getRequestParameterMap();
        ...
    } catch (NullPointerException e) {      
        try {
            Message message = new Message();
            String msg = "Invalid parameters";
            message.setMessage(msg);

            JSFUtils.flashScope().put("message", message);

            facesContext.getExternalContext().redirect("message.xhtml");
            facesContext.responseComplete();
        } catch (IOException ioe) {
        }
    } catch (IOException e) {
    }
} 
```

重定向有效，但 FlashScope 中保存的消息消失了。知道为什么要删除闪存范围或其他方式吗？

消息.xhtml

```
 <ui:define name="head"></ui:define>

    <ui:define name="content">
        <div class="box-middle-content faded">
            <div class="message">
                <h:outputText escape="false" value="#{flash.message.message}"></h:outputText>
                <br />
                <p>
                    <h:outputText value="#{msgs['message.footer']}" escape="false" />
                </p>
            </div>
        </div>
    </ui:define>
</ui:composition> 
```

JSFUtils

```
public class JSFUtils {
    public static Flash flashScope() {
        return (FacesContext.getCurrentInstance().getExternalContext()
                .getFlash());
    }
} 
```

更新视图：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:of="http://omnifaces.org/functions">

    <f:metadata>
        <f:viewParam name="dummy"></f:viewParam>
        <f:event type="postInvokeAction"
            listener="#{signupMaterialBean.initFromContext}" />
    </f:metadata>

    <h:outputText value="#{signupMaterialBean.html}" escape="false"></h:outputText>

</ui:composition> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T14:06:50.400

`<f:event type="preRenderView">`设置 Flash 范围属性为时已晚。当 JSF 当前处于渲染响应阶段时，无法创建 flash 范围。您基本上需要在渲染响应阶段*之前设置 flash 作用域属性。*尽管 name `preRenderView`，这个事件实际上是在渲染响应阶段（最开始）*期间触发的。*

您基本上需要在 INVOKE_ACTION 阶段调用侦听器方法。由于没有标准`<f:event>`类型，因此您需要自行开发。此答案中对此进行了详细概述：[Can't keep faces message after navigation from preRender](https://stackoverflow.com/questions/13144611/cant-keep-faces-message-after-navigation-from-prerender/13144845#13144845)。

您最终希望成为：

```
<f:event listener="#{signupMaterialBean.initFromContext()}"
         type="postInvokeAction" /> 
```

请注意，此事件已由[OmniFaces](http://omnifaces.org)提供。另请参阅处理此问题[的`InvokeActionEventListener`展示页面。](http://showcase.omnifaces.org/eventlisteners/InvokeActionEventListener)

* * *

**与具体问题**无关**`NullPointerException`，流行的是巨大的代码气味。不要捕获这样的运行时异常。通过执行空检查等来防止它们`if (foo != null)`。那些空洞的东西`IOException`也很糟糕。将它们全部删除，然后添加`throws IOException`到方法中。**

 **此外，重定向路径问题自 Mojarra 2.1.14 起已修复。因此，自从该版本以来，您可以安全地重定向到不同的基本路径。**

# android - Android导航：获取尚未旅行的距离

> ID：13513285
> 
> 赞同：0
> 
> 时间：2012-11-22T12:59:28.393
> 
> 标签：android, api, android-layout, navigation, locationmanager

案例：一个安卓用户刚刚在他的标准安卓导航应用程序中设置了目的地，并选择了他想要旅行的路线（或备用路线）。

我是否有可能获得他目前必须行驶的距离，以便我可以在我的应用程序中使用它？如果是这样，怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:01:26.133

简单的位置更改再次找到您的目的地和您的位置之间的距离。

并计算这些点之间的距离。这会给你距离还没有旅行。

# jquery - 从 jQuery 1.4.2 升级到 1.8.2 后选项卡无法正常工作

> ID：13513292
> 
> 赞同：2
> 
> 时间：2012-11-22T13:00:09.797
> 
> 标签：jquery

非常简单的代码：

```
<script>
$(function() {
    $("ul.tabs").tabs("div.panes > div");
});
</script> 
```

从 1.4.1 升级到 1.8 jquery 后停止工作。有什么帮助吗？

# php - Magento：“我的帐户”下没有客户的订单历史记录 - 订单对象未正确传递

> ID：13513294
> 
> 赞同：1
> 
> 时间：2012-11-22T13:00:23.993
> 
> 标签：php, magento

我正在运行 Magento Enterprise 1.9，客户在“我的帐户”的“订单历史记录”部分没有看到任何订单。我已经调试了很多，只是无法弄清楚发生了什么。奇怪的是，在我们的登台服务器上，它工作正常。

到目前为止我所做的：

1）确保`<visible_on_front/>`应用于其中的每个订单状态`/app/code/core/Mage/Sales/etc/config.xml`（因此它们都应该是可见的）。

2）`app\code\core\Mage\Sales\Block\Order\History.php`[（查看文件源）](http://paste2.org/p/2505946)从数据库中获取订单并使用`$this->setOrders($orders);`. 我已经调试了这个对象并输出了原始 SQL 来得到这个：

```
SELECT `main_table`.*
FROM   `sales_flat_order` AS `main_table`
WHERE  ( main_table.customer_id = '4' )
       AND ( state IN ( 'new', 'processing', 'complete', 'closed',
                        'canceled', 'holded', 'payment_review' ) ) 
```

这*确实*为我的测试客户返回了暂存服务器和实时服务器上的订单。

3）`app\design\frontend\enterprise\astleyclarke\template\sales\order\history.phtml`[（查看文件源）](http://paste2.org/p/2505975)是对应的模板文件，负责输出订单。它使用 抓取订单`$_orders = $this->getOrders();`并使用`if($_orders->getSize()):`. **正是在这一点上，事情出了问题。**实时服务器上报告的大小为 0，尽管当我手动运行 SQL 时，尽管两台服务器都报告了数据库中的订单，但它不在登台服务器上。

所以对我来说，$orders 对象似乎没有被实时服务器上的 phtml 文件正确传递或获取。

非常感谢任何其他想法或帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:23:46.563

订单集合在 中初始化`Mage_Sales_Block_Order_History::__construct`。

但该集合尚未加载。

你可以做些什么来调试这个，你可以`$orders->load()`在上面的函数中临时添加一个，然后检查对象的`_items`属性`$order`。是否列出了订单？

您可以提取由`(string) $order->getSelect()`.

如果您在这种情况下收到订单，则可能在块`_construct`和视图呈现之间对集合进行了操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-24T06:12:42.297

我知道这是一个老问题，但我认为 OP 遇到了以下情况。安装了一个扩展来重新定义订单历史的模板 phtml。xml 配置指向一个安装在下面的模板文件，`base/default`但服务器使用名为 的主题`enterprise/astleyclarke`，因此无法访问模板文件，在这种情况下将没有输出，也没有日志输出。

`history.phtml`从应用程序文件夹及以后搜索 xml 文件。很有可能有一个配置文件指向一个在活动主题下不存在的位置。

我最近遇到了同样的问题，安装在下面的扩展 xml`base/default/layout/chipmaster/reant.xml`有以下内容：

```
<template>chipmaster/reant/sales/order/history.phtml</template> 
```

但是服务器正在使用主题`xyz/default`，并且配置中的历史文件隐藏在：

```
design/frontend/base/default/template/chipmaster/reant/sales/order/history.phtml 
```

要使服务器再次打印历史记录，请将文件及其目录结构移动到您的主题中，或者编辑 xml 文件。我做了后来和编辑后

```
<template>sales/order/history.phtml</template> 
```

这是默认位置，我们再次在前端有订单历史记录。

# javascript - 我可以通过使用 javascript 检查的多个复选框吗

> ID：13513295
> 
> 赞同：0
> 
> 时间：2012-11-22T13:00:26.343
> 
> 标签：javascript, jquery, html, checkbox

这是脚本（javascript & jQuery）：

```
$('#button_submit').click(function() {
    var check = { 'opt[]' : []};
    $("input:checked").each(function() {
        check['opt[]'].push($(this).val());
    });
} 
```

和html之一：

```
<html>
<body>
    <h4>Data Options</h4>
    <form id="myForm">
        <input type='checkbox' name='opt[]' value='1'id='ck1' /> Counts<br>
        <input type='checkbox' name='opt[]' value='2'id='ck2' /> Male<br>
        <input type='checkbox' name='opt[]' value='3'id='ck3' /> Female<br>
        <input type="button" id="button_submit" value="go">
    </form>
</body>
</html> 
```

我没有得到选中的复选框，有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:03:28.850

尝试添加`$(document).ready`：

```
<script type='text/javascript'>
$(document).ready(function(){
  $('#button_submit').click(function() 
  {...}
})
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:07:57.990

如果您只想检查多个复选框

```
$("input:checkbox").prop("checked", true ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:12:29.057

鉴于上面的标记，这就是我将如何填充检查

```
$(document).ready(function() {
    $('#button_submit').click(function() {
       var check = { 'opt[]' : []};
       $('input[name="opt[]"]:checked').each(function() {
           check['opt[]'].push($(this).val());
       });

       // just for a bit of debugging
       for(var x in check['opt[]']) {
           $('span').append(check['opt[]'][x]);
       }
       // assuming you want to do something other than just let it submit

       return false;      
    });
}); 
```

有关示例，请参见[http://jsfiddle.net/8Dm9C/1/](http://jsfiddle.net/8Dm9C/1/)

# javascript - JavaScript-如何检查具有多个节点和数组的 Json 数组中的值？

> ID：13513296
> 
> 赞同：3
> 
> 时间：2012-11-22T13:00:28.040
> 
> 标签：javascript, json

我有一个以下格式的 JSON 数据。我需要获取与“Non Veg”中具有 specialDeal 为 true 的商店名称对应的商店名称。（注意：只有一家商店将 specialDeal 设为 true）我将如何检索它。请帮忙。在此先感谢..请帮助我，因为我刚刚学习 Java。

```
 {"Food":
      {
       "Veg":
        {
            "amtSpent":"", "shortDesc":"", "longDesc":"", "excTxt":"", 
            "discntType":"", "Store":"", "StoreType":"", "Fund":"",
            "FundDetails":[
                    {"status":"", "discntVal":"", "FundVal":"", "FundBal":""},
                    {"status":"", "discntVal":"", "FundVal":"", "FundBal":""}
            ]
         },
       "Non Veg":
            {
            "chicken":
                    [
                    {
                            "amtSpent":"", "shortDesc":"", "longDesc":"", "excTxt":"",
                            "discntType":"", "Store":"", "StoreType":"", "Fund":"",
                            "specialDeal":"", "promoStatus":"",
                            "FundDetails":[
                                    {"status":"", "discntVal":"", "FundVal":"", "FundBal":""},
                                    {"status":"", "discntVal":"", "FundVal":"", "FundBal":""}
                            ]
         },
         {
                            "amtSpent":"", "shortDesc":"", "longDesc":"", "excTxt":"",
                            "discntType":"", "Store":"", "StoreType":"", "Fund":"",
                            "specialDeal":"", "promoStatus":"",
                            "FundDetails":[
                                    {"status":"", "discntVal":"", "FundVal":"", "FundBal":""},
                                    {"status":"", "discntVal":"", "FundVal":"", "FundBal":""}
                            ]
         }
        ],
            "fish":
                    [
                    {
                            "amtSpent":"", "shortDesc":"", "longDesc":"", "excTxt":"",
                            "discntType":"", "Store":"", "StoreType":"", "Fund":"",
                            "specialDeal":"", "promoStatus":"",
                            "FundDetails":[
                                    {"status":"", "discntVal":"", "FundVal":"", "FundBal":""},
                                    {"status":"", "discntVal":"", "FundVal":"", "FundBal":""}
                            ]
                    },
                    {
                            "amtSpent":"", "shortDesc":"", "longDesc":"", "excTxt":"",
                            "discntType":"", "Store":"", "StoreType":"", "Fund":"",
                            "specialDeal":"", "promoStatus":"",
                            "FundDetails":[
                                    {"status":"", "discntVal":"", "FundVal":"", "FundBal":""},
                                    {"status":"", "discntVal":"", "FundVal":"", "FundBal":""}
                            ]
                    }
                    ],
            "egg":
                    [
                    {
                            "amtSpent":"", "shortDesc":"", "longDesc":"", "excTxt":"",
                            "discntType":"", "Store":"", "StoreType":"", "Fund":"",
                            "specialDeal":"", "promoStatus":"",
                            "discntVal":"", "FundVal":"", "FundBal":""
                    },
                    {
                            "amtSpent":"", "shortDesc":"", "longDesc":"", "excTxt":"",
                            "discntType":"", "Store":"", "StoreType":"", "Fund":"",
                            "specialDeal":"", "promoStatus":"",
                            "discntVal":"", "FundVal":"", "FundBal":""
                    }
                             ]
            },
    "isMember":"Y",
    "orderId":""
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:13:15.090

一种方法是为此使用 JSONPath，使用任何 Java 实现，例如这个：[json-path](http://code.google.com/p/json-path/)

```
List<Object> objectsHavingSpecialDeal = JsonPath.read(json, "$..*[?(@.specialDeal == 'true')]");
// iterate over that list to get the `Store` field value
for (Object o: objectsHavingSpecialDeal) {
    Map<String, String> fields = (Map<String, String>)o;
    System.out.println("Store: " + fields.get("Store"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:31:20.550

假设javascript：

您的数据略有不一致，关于蔬菜，我建议像这样重组它：

```
var test = { "Food":
{
    "Veg":
            {
                "vegetables":
                    [
                    {
                        "amtSpent": "", "shortDesc": "", "longDesc": "", "excTxt": "",
                        "discntType": "", "Store": "", "StoreType": "", "Fund": "",
                        "FundDetails": [
                    { "status": "", "discntVal": "", "FundVal": "", "FundBal": "" },
                    { "status": "", "discntVal": "", "FundVal": "", "FundBal": "" }
                            ]
                    }]
            },
    "Non Veg":
            {
                "chicken":
                    [
                    {
                        "amtSpent": "", "shortDesc": "", "longDesc": "", "excTxt": "",
                        "discntType": "", "Store": "", "StoreType": "", "Fund": "",
                        "specialDeal": "", "promoStatus": "",
                        "FundDetails": [
                                    { "status": "", "discntVal": "", "FundVal": "", "FundBal": "" },
                                    { "status": "", "discntVal": "", "FundVal": "", "FundBal": "" }
                            ]
                    },
                    {
                        "amtSpent": "", "shortDesc": "", "longDesc": "", "excTxt": "",
                        "discntType": "", "Store": "", "StoreType": "", "Fund": "",
                        "specialDeal": "", "promoStatus": "",
                        "FundDetails": [
                                    { "status": "", "discntVal": "", "FundVal": "", "FundBal": "" },
                                    { "status": "", "discntVal": "", "FundVal": "", "FundBal": "" }
                            ]
         }
        ],
                "fish":
                    [
                    {
                        "amtSpent": "", "shortDesc": "", "longDesc": "", "excTxt": "",
                        "discntType": "", "Store": "", "StoreType": "", "Fund": "",
                        "specialDeal": "", "promoStatus": "",
                        "FundDetails": [
                                    { "status": "", "discntVal": "", "FundVal": "", "FundBal": "" },
                                    { "status": "", "discntVal": "", "FundVal": "", "FundBal": "" }
                            ]
                    },
                    {
                        "amtSpent": "", "shortDesc": "", "longDesc": "", "excTxt": "",
                        "discntType": "", "Store": "", "StoreType": "", "Fund": "",
                        "specialDeal": "", "promoStatus": "",
                        "FundDetails": [
                                    { "status": "", "discntVal": "", "FundVal": "", "FundBal": "" },
                                    { "status": "", "discntVal": "", "FundVal": "", "FundBal": "" }
                            ]
                    }
                    ],
                "egg":
                    [
                    {
                        "amtSpent": "", "shortDesc": "", "longDesc": "", "excTxt": "",
                        "discntType": "", "Store": "", "StoreType": "", "Fund": "",
                        "specialDeal": "", "promoStatus": "",
                        "discntVal": "", "FundVal": "", "FundBal": ""
                    },
                    {
                        "amtSpent": "", "shortDesc": "", "longDesc": "", "excTxt": "",
                        "discntType": "", "Store": "", "StoreType": "", "Fund": "",
                        "specialDeal": "", "promoStatus": "",
                        "discntVal": "", "FundVal": "", "FundBal": ""
                    }
                             ]
            },
    "isMember": "Y",
    "orderId": ""
}
} 
```

然后，您可以获取所有具有`specialDeal`属性的对象，如下所示：

```
for (key in test.Food) {
    if (test.Food.hasOwnProperty(key)) {
        var f = test.Food[key];
        for (cat in f) {
            if (f.hasOwnProperty(cat)) {
                for (prop in f[cat]) {
                    if (f[cat].hasOwnProperty(prop) && f[cat][prop].specialDeal != undefined) {
                        console.log(f[cat][prop].specialDeal, f[cat][prop], "Category: " + cat + ", Index: " + prop)
                    }
                }
            }
        }
    }
} 
```

它不漂亮，但它有效。

我在这里做的是循环遍历对象。 `for (key in test.Food) {}`找到 中的所有键`test.Food`，它们是：

```
Veg
Non Veg
isMember
orderId 
```

然后，您可以使用 获取子对象`test.Food[key]`，并再次遍历该对象。在循环的后面，我正在测试对象是否具有`specialDeal`属性。如果是这种情况，我会记录下来。

对象的问题在于，如果您想通过它们搜索具有特定值的对象，则该对象必须具有常规格式。这就是为什么我在`"Veg"`.

# vb.net - 管理显示的按钮、标签和其他控件

> ID：13513301
> 
> 赞同：1
> 
> 时间：2012-11-22T13:00:51.563
> 
> 标签：vb.net, controls

每当我因为某种情况想隐藏一些按钮时，我都会这样

```
button1.visible = false 
```

所以假设我启动了 form-X 并在加载时检查该用户是否具有所需的条件。该用户是该公司的成员吗？是的？好的，那么你可以看到这个 button1 并且这个标签发生了变化。

在此表格-X 中，您可以将自己从该公司中删除。现在我需要设置另一个条件来检查当公司从用户列表中删除时是否允许按钮留在那里。

问题不在于我将其设置为可见或不可见，而是当您看到几个按钮在某些条件下关闭或打开时代码的外观看起来并不好。此外，当条件发生变化时，我需要处理不同位置的所有代码并进行调整。

难道没有办法在一个地方处理所有这些情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:28:00.127

我建议创建一个私有方法，根据当前条件隐藏和显示所有控件。例如，您可以将其称为 SetupForm。然后，只要在任何条件发生变化的地方调用该方法。

# unity3d - 如何在 Unity 3d 中的纹理上设置图像

> ID：13513302
> 
> 赞同：7
> 
> 时间：2012-11-22T13:00:51.440
> 
> 标签：unity3d, textures

我是 Unity 3D 的新手，我只想做一点小任务：`Texture`在 Unity 3D 中的实例上设置图像。我不知道如何在运行时执行此操作，我也想知道如何将其透明度设置为低。

我不需要 Texture2D - 我只需要 Texture。我的图像是`.png`格式的。我还想将我的文档目录中的图像设置到这个纹理上。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T20:06:27.510

*   首先将您的图像导入您的项目，只需将其拖放到项目窗口中即可。

*   在项目窗口中选择图像，并确保在检查器中将其设置为纹理类型。

*   接下来，通过右键单击项目窗口来创建新材料。

*   接下来，您要将图像分配给此材质，您可以通过将图像（位于项目窗口中）拖放到新创建的材质上来执行此操作。在最新版本的 Unity 中，您需要将其放在“Albedo”左侧的方格上。

*   然后单击新材质，在检查器窗口中它应该会显示您的图像是活动纹理，并且默认情况下应该将着色器设置为漫反射。

*   要激活透明度，您需要通过单击检查器窗口中的着色器下拉菜单并选择透明/漫反射（或任何透明度选项，具体取决于您想要的外观）来更改着色器类型。

*   在此之后更改它的透明度，只需单击主色样，应该会打开一个新窗口，为您提供各种修改器（带有 4 个水平滑块来调整红色、绿色、蓝色和 Alpha）。

*   调整 Alpha 滑块以影响材质的透明度。

现在，无论何时您需要在运行时调用您的材质（例如，如果您想更改应用到游戏对象的纹理），只需使用：

```
renderer.material 
```

这将影响脚本附加到的游戏对象的材质。例如，如果您想在运行时从脚本[**更改纹理**](http://docs.unity3d.com/Documentation/ScriptReference/Material-mainTexture.html)，您可以说：

```
// Assign the texture exposed in the inspector the renderer's material

var texture : Texture;
renderer.material.mainTexture = texture; 
```

如果你想改变 alpha 通道：

```
renderer.material.color.a = 0 // For example 
```

希望这可以帮助。让我知道是否有任何需要澄清的地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-08-06T12:16:32.423

在您的资产中拥有图像后

1.  创建一个新材质。
2.  将材质的着色器更改为“Unlit/Texture”。你会得到以下

[![新材料准备好纹理](../Images/c59f4a461191c37571ed65b0137d7e8f.png)](https://i.stack.imgur.com/M7ltY.png)

3.  将图像拖到显示“无（纹理）”的位置，或单击选择按钮并选择图像。然后你会得到纹理

[![最终纹理](../Images/2eb1c57417122a5fafcec7d0fe599206.png)](https://i.stack.imgur.com/wsyPU.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-30T07:23:09.820

首先，您需要将图像导入您的`asset`文件夹。

如果您想使用代码在`Texture`运行时设置图像，请使用下面给定的代码

```
[SerializeField] private Texture _texture;
[SerializeField] private GameObject _gameObject;

void Start()
{
    Material m = GetComponent<MeshRenderer>().material;
    m.color = new Color(1,1,1,.5f);
    m.mainTexture = _texture;
} 
```

首先分配一个`Gameobject`你想改变纹理的。然后在 中分配一个图像`_texture`。

然后从该对象获取 a`material`并从该对象获取`assign`a 。`_texture``material.mainTexture`

# python - 使用 python ctypes 获取 system.hardware.uuid 有错误消息

> ID：13513315
> 
> 赞同：2
> 
> 时间：2012-11-22T13:01:40.940
> 
> 标签：python, 64-bit, ctypes

我使用 python ctypes 获取 system.hardware.uuid。在 i386 机器上执行的 python 程序不会失败。但是在 x64 机器上执行的相同程序会产生错误。

这是我的python类：

```
self._hal = ctypes.cdll.LoadLibrary(find_library('hal'))
self._ctx = self._hal.libhal_ctx_new()
self._dbus_error = dbus_error()
self._hal.dbus_error_init(ctypes.byref(self._dbus_error))
self._conn = self._hal.dbus_bus_get(ctypes.c_int(1),ctypes.byref(self._dbus_error))
self._hal.libhal_ctx_set_dbus_connection(self._ctx, self._conn)
udi = ctypes.c_char_p("/org/freedesktop/Hal/devices/computer")
key = ctypes.c_char_p("system.hardware.uuid")
self._hal.libhal_device_get_property_string.restype = ctypes.c_char_p
self._uuid_ = self._hal.libhal_device_get_property_string(self._ctx, udi, key,   self._dbus_error)
return self._uuid_ 
```

这是错误消息：

[tmp]$ ./test-uid.py

```
*** glibc detected *** /usr/bin/python: free(): invalid pointer: 0x00000000007546c0 ***
======= Backtrace: =========
/lib64/libc.so.6[0x2af62a5741df]
/lib64/libc.so.6(cfree+0x4b)[0x2af62a57463b]
/lib64/libdbus-1.so.3(dbus_error_free+0x29)[0x379fa10219]
/lib64/libdbus-1.so.3(dbus_move_error+0x31)[0x379fa10281]
/usr/lib64/libhal.so.1(libhal_device_get_property_string+0xaf)[0x379da05e5f] 
```

# symfony1 - 我无法执行数据加载（Symfony 1.4 Doctrine）

> ID：13513317
> 
> 赞同：1
> 
> 时间：2012-11-22T13:01:56.417
> 
> 标签：symfony1, doctrine, symfony-1.4, fixtures, data-dump

我的 symfony 项目有一些问题。
我有一个带有 InnoDB 表的 MySQL 数据库。
我尝试创建简单的树形菜单：

架构.yml

```
Menu:
  actAs:
    Timestampable:
      created:
        disabled: true
      updated:
        disabled: true
  columns:
    id: { type: integer, autoincrement: true, notnull: true, primary: true }
    name: { type: string(255), notnull: true }
    parent: { type: integer, notnull: false }
  relations:
    Parent:
      alias: parentItem
      foreignAlias: childrens
      class: Menu
      local: parent
      foreign: id
      type: many-to-one
      onDelete: CASCADE 
```

在后端创建元素后，我执行`data:dump`并获取此代码

夹具：

```
Menu:
  Menu_1:
    name: 'Parent'
  Menu_2:
    parentItem: Menu_1
    name: 'Children' 
```

如果我尝试运行，我已经失去了项目之间的关系

我不明白出了什么问题。

**编辑：**

前：

```
| id | name     | parent |
| 1  | Parent   | NULL   |
| 2  | Children | 1      | 
```

后

```
| id | name     | parent |
| 1  | Parent   | NULL   |
| 2  | Children | 0      | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:18:28.017

我认为关系的类型是一种，关系的foreignType很多：

```
Menu:
  actAs:
    Timestampable:
      created:
        disabled: true
      updated:
        disabled: true
  columns:
    id: { type: integer, autoincrement: true, notnull: true, primary: true }
    name: { type: string(255), notnull: true }
    parent: { type: integer, notnull: false }
  relations:
    Parent:
      alias: parentItem
      class: Menu
      local: parent
      foreign: id
      type: one
      foreignAlias: childrens
      foreignType: many
      onDelete: CASCADE 
```

# php - 从 facebook 登录 oauth 重定向时出现 500 服务器错误

> ID：13513321
> 
> 赞同：1
> 
> 时间：2012-11-22T13:02:15.620
> 
> 标签：php, facebook, permissions, internal-server-error

我遇到了这个奇怪的问题。我只是将我的应用程序放在服务器上，并且我有一个使用 facebook 功能的登录名。当我单击使用 facebook 登录时，它会将我重定向到 facebook 登录，然后我输入凭据然后提交它，但是当我被重定向到应该重定向到我的网站主页的控制器方法时，我得到一个内部服务器错误（甚至虽然脚本似乎在运行，因为我可以看到会话变量已经创建）。奇怪的是，它在我的开发环境（本地主机）上运行良好。有任何想法吗？是文件权限问题，还是 PHP 安装问题（其他功能正常）。

提前致谢

# jquery - jQuery datepicker 火灾警报如果是明天

> ID：13513322
> 
> 赞同：3
> 
> 时间：2012-11-22T13:02:21.640
> 
> 标签：jquery, date, datepicker

如果选择的日期是明天，我想发出警报。这就是我所拥有的：

```
$('#dateInput').datepicker({
    onSelect: function(dateText, inst) {
        if (Date.parse(today)+1 == Date.parse(selectedDate)) {
            alert('tomorrow!');
        }
    }
}); 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:53:01.033

这将在明天被解雇，而不是在明天的同一天被解雇：

```
$('#dateInput').datepicker({
    onSelect: function(dateText, inst) {
        var date_now = new Date();
        var date_today = date_now.getDate();
        var date_thismonth = date_now.getMonth();
        var date_thisyear = date_now.getFullYear();
        if (date_thisyear == inst.selectedYear && 
            date_thismonth == inst.selectedMonth && 
            (date_today+1) == inst.selectedDay){
            alert('tomorrow!');
        }
    }
});? 
```

[http://jsfiddle.net/ue9Lh/](http://jsfiddle.net/ue9Lh/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:59:59.187

```
$('#dateInput').datepicker({
   onSelect: function(dateText, inst) {
       var todayDate = new Date();
       var tomorrowDate = new Date(todayDate.getTime() + (24 * 60 * 60 * 1000)).setHours(0,0,0,0);
       var inputDate = new Date(dateText);
       if (tomorrowDate - inputDate == 0) {
        alert('tomorrow!');
        }
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:02:11.493

```
$('#dateInput').datepicker({
   onSelect: function(dateText, inst) {
        var tomorrow = new Date();
        tomorrow.setHours(0,0,0,0);
        tomorrow.setDate(tomorrow.getDate()+1);
        if (tomorrow.getTime() == Date.parse(dateText)) {
            alert('tomorrow!');
        }
   }
}); 
```

# c# - 如何在 asp.net 中下载文件之前调用 javascript 函数？

> ID：13513324
> 
> 赞同：0
> 
> 时间：2012-11-22T13:02:25.640
> 
> 标签：c#, javascript, asp.net, html

在我的 Asp 页面中，我必须在下载 asp 页面中的文件之前调用一个 javascript 函数。我的实际要求是每次单击下载按钮时都必须确保下载格式。

所以，在我的下载按钮事件中，我只显示一个包含两个单选按钮（asp:RadioButton）的 div 标签，即 docx、pdf 和一个 OK 按钮。选择任何单选按钮后，用户将按下 ok 按钮（asp:Button） .

最后，

在 Ok Button(asp:Button) 事件中，我只是隐藏了 div 标签部分，并且基于用户选择的输出格式，文件将被下载。

我的确定按钮事件代码如下：

```
 protected void OKButton(object sender, EventArgs e)
    {
        string outputType = "";
        if (docx.Checked == true)
        {
            outputType = "docx";
        }
        else
        {
            outputType = "pdf";
        }

        filename=filename+"."+outputType;
       ClientScript.RegisterStartupScript(GetType(), "popup", "hidePopUp()", true);
       bool isDownloaded=downloadFile(strURL, docPath, filename);
    } 
```

downloadFile 函数如下：

```
protected bool downloadFile(string srcURL, string docPath, string filenameOnly)
        {
            System.IO.FileInfo FileName = new System.IO.FileInfo(srcURL);
            FileStream myFile = new FileStream(srcURL, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
            BinaryReader _BinaryReader = new BinaryReader(myFile);

            if (FileName.Exists)
            {
                try
                {
                    long startBytes = 0;
                    string lastUpdateTiemStamp = File.GetLastWriteTimeUtc(docPath).ToString("r");
                    string _EncodedData = HttpUtility.UrlEncode(filenameOnly, Encoding.UTF8) + lastUpdateTiemStamp;

                    Response.Clear();
                    Response.Buffer = false;
                    Response.AddHeader("Accept-Ranges", "bytes");
                    Response.AppendHeader("ETag", "\"" + _EncodedData + "\"");
                    Response.AppendHeader("Last-Modified", lastUpdateTiemStamp);
                    Response.ContentType = "application/octet-stream";
                    Response.AddHeader("Content-Disposition", "attachment;filename=" + FileName.Name);
                    Response.AddHeader("Content-Length", (FileName.Length - startBytes).ToString());
                    Response.AddHeader("Connection", "Keep-Alive");
                    Response.ContentEncoding = Encoding.UTF8;

                    //Send data
                    _BinaryReader.BaseStream.Seek(startBytes, SeekOrigin.Begin);

                    //Dividing the data in 1024 bytes package
                    int maxCount = (int)Math.Ceiling((FileName.Length - startBytes + 0.0) / 1024);

                    //Download in block of 1024 bytes
                    int i;
                    for (i = 0; i < maxCount && Response.IsClientConnected; i++)
                    {
                        Response.BinaryWrite(_BinaryReader.ReadBytes(1024));
                        Response.Flush();
                    }
                    //if blocks transfered not equals total number of blocks
                    if (i < maxCount)
                        return false;
                    return true;
                }
                catch (Exception ex)
                {
                    return false;
                }
                finally
                {
                   _BinaryReader.Close();
                    myFile.Close();
                }
            }
            else
            {
                return false;
            }

        }//downloadFile ends here... 
```

至此，特定文件下载成功。但它并没有隐藏 Div Tag 部分。

我尝试不调用 downloadFile 函数，然后它将成功隐藏 div 标签部分。

但我必须先隐藏 div 标签部分，然后下载特定文件。请参考我的图片...

![在此处输入图像描述](../Images/a46f16b9577b0ed0c152faf45f67021e.png)

请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:06:30.883

为什么不在 OKButton 的 ClientClick 中隐藏 Div。

例如：

```
<asp:Button ID="OkButton" runat="server" .... OnClick="OkButton_Click"
        OnClientClick="document.getElementById('divName').style.display = 'none';" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:18:33.903

想想这里发生了什么。

*   当您单击“确定”按钮时，一些 javascript 正在运行，这会导致回发到服务器。
*   在您的 OKButton 处理程序中，您正在注册一个启动脚本。**此脚本此时不运行！**一旦响应流返回到客户端，它将运行。
*   您从 OK 处理程序执行下载文件方法。
*   在下载方法中，您清除响应，然后执行附件类型响应。

因此，您的 RegisterStartupScript 没有执行！尽可能多地分离您的客户端和服务器逻辑。

正如 Blachshma 所说，您可以使用 OnClientClick 实现此目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T13:18:59.817

尝试修改您的代码：

```
 ClientScript.RegisterStartupScript(GetType(), "popup", "Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(hidePopUp)", true); 
```

# javascript - 将光标设置到 contenteditable div 的末尾

> ID：13513329
> 
> 赞同：9
> 
> 时间：2012-11-22T13:02:45.637
> 
> 标签：javascript, jquery, html, contenteditable

如果当前标记为空，我正在尝试将光标设置到下一个/上一个 contenteditable 标记的末尾，但是当我设置焦点时，它会将焦点添加到文本的开头而不是结束在 SO 上尝试了几乎所有解决方案，但似乎没有为我工作。这是我正在尝试的简单代码

**代码**

```
<div id = 'main'>
<div id = 'n1' contenteditable=true> Content one</div>
<div id = 'n2' contenteditable=true> Content 2</div>
<div id = 'n3' contenteditable=true> Content 3</div>
<div id = 'n4' contenteditable=true> Content 4</div> 
```

**JS代码**

```
$('#main div').keydown(function(){
if(!$(this).text().trim()){
    $(this).prev().focus();
   //setCursorToEnd(this.prev())
    }
});

function setCursorToEnd(ele)
  {
    var range = document.createRange();
    var sel = window.getSelection();
    range.setStart(ele, 1);
    range.collapse(true);
    sel.removeAllRanges();
    sel.addRange(range);
    ele.focus();
  } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T14:32:22.727

您正在使用 jQuery 并从 jQuery 获取元素。您必须将其转换为原生 DOM 元素（通过 jQuery-get 函数）才能使用“setCurserToEnd”-Function：

你的方法调用：

```
setCursorToEnd(this.prev()); 
```

工作解决方案：

```
setCursorToEnd($(this).prev().get(0)); 
```

查看更新的小提琴：http: [//jsfiddle.net/dvH5r/4/](http://jsfiddle.net/dvH5r/4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T16:04:50.293

你非常接近，唯一的问题是 prev() 返回一个 jQuery 对象，而你想将实际的 DOM 元素传递给 setCursorToEnd()

成品：http: [//jsfiddle.net/B5GuC/](http://jsfiddle.net/B5GuC/)

*注意：即使上面的 div 元素为空，这也有效。香草js ftw。

```
$('#main div').keydown(function(){
    if(!$(this).text().trim()){
        $(this).prev().focus();
        setCursorToEnd(getPrevSib(this));
    }
});

function setCursorToEnd(ele){
    var range = document.createRange();
    var sel = window.getSelection();
    range.setStart(ele, 1);
    range.collapse(true);
    sel.removeAllRanges();
    sel.addRange(range);
}

function getPrevSib(n){
    //gets prev sibling excl whitespace || text nodes
    var x=n.previousSibling;
    while (x && x.nodeType!=1){
          x=x.previousSibling;
    }
    return x;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:11:06.580

建议您使用插件[jCaret](http://plugins.jquery.com/project/jCaret)，因为浏览器在执行此操作时有很大不同。例如，您可以使用以下命令检索您在该字段中的当前位置

```
$("#myTextInput").bind("keydown keypress mousemove", function() {
  alert("Current position: " + $(this).caret().start);
}); 
```

然后您可以使用设置位置（虽然没有测试过）

```
var endPos = $(this).caret().end;
$("input:text.hola").caret({start:endPos ,end:endPos }); 
```

# matlab - Matlab：有效地产生听觉尖峰

> ID：13513331
> 
> 赞同：2
> 
> 时间：2012-11-22T13:03:06.350
> 
> 标签：matlab, optimization

我正在尝试从 MATLAB 中的采样信号中生成一系列“听觉尖峰”，而到目前为止我实现的方法很慢。太慢了。

[尖峰是在http://patrec.cs.tu-dortmund.de/pubs/papers/Plinge2010-RNF.pdf](http://patrec.cs.tu-dortmund.de/pubs/papers/Plinge2010-RNF.pdf)的第二部分 B 中生成的：检测零交叉并对（平方根压缩）正部分求和每对之间的信号。这给出了每个尖峰的高度。它们的位置是通过在每对零交叉之间识别具有最大值的样本来找到的。

我想过为此使用 accumarray(...)，这让我想到了生成一个矩阵，其中每列代表一对零交叉（一个尖峰），每一行代表一个样本。然后在相应的零交叉对之间填充每一列。

当前的实现从实际的数据向量中填充这些列，这样我们之后就不必使用 accumarray 了。

当前实施：

```
function out = audspike(data)
    % Find the indices of the zero crossings. Two types of zero crossing:
    %   * Exact, samples where data == 0
    %   * Change, where data(i) .* data(i+1) < 0; that is, data changes sign
    %   between two samples. In this implementation i+1 is returned as the
    %   index of the zero crossing.
    zExact = (data == 0);
    zChange = logical([0; data(1:end-1) .* data(2:end) < 0]);
    zeroInds = find(zExact | zChange);

    % Vector of the difference between each zero crossing index
    z=[zeroInds(1)-1; diff(zeroInds)];

    % Find the "number of zeros" it takes to move from the first sample to the 
    % a given zero crossing
    nzeros=cumsum(z);

    % If the first sample is positive, we cannot generate a spike for the first
    % pair of zero crossings as this represents part of the signal that is
    % negative; therefore, skip the first zero crossing and begin pairing from
    % the second
    if data(1) > 0
        nzeros = nzeros(2:2:end);
        nones = z(3:2:end)+1;
    else
        nzeros = nzeros(1:2:end);
        nones = z(2:2:end)+1;
    end

    % Allocate sparse array for result
    G = spalloc(length(data), length(nzeros), sum(nones));

    % Loop through pairs of zero crossings. Each pair gets a column in the
    % resultant matrix. The number of rows of the matrix is the number of 
    % samples. G(n, ii) ~= 0 indicates that sample n belongs to pair ii
    for ii = 1:min(length(nzeros), length(nones))
        sampleInd = nzeros(ii)+1:nzeros(ii)+nones(ii)-1;
        G(sampleInd, ii) = data(sampleInd);
    end

    % Sum the square root-compressed positive parts of signal between each zero
    % crossing
    height = sum(sqrt(G), 2);

    % Find the peak over average position
    [~, pos] = max(G, [], 2);

    out = zeros(size(data));
    out(pos) = height;
end 
```

正如我所说，这很慢，一次只能用于一个频道。缓慢的部分（不出所料）是循环。如果我将矩阵 G 的分配更改为标准 zeros(...) 而不是稀疏数组，那么由于显而易见的原因，缓慢的部分就会变成 sum(...) 和 max(...) 计算。

我怎样才能更有效地做到这一点？如果需要的话，我并不反对编写 MEX 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:38:39.283

现在，我创建了一个 MEX 函数，它执行与上述代码相同的任务，除了最后三行，它们几乎不需要修改即可使用 MEX 函数。这种方法要快几个数量级。

下面是代码，供参考：

```
#include "mex.h"
#include "matrix.h"

/*=======================
 * Output arguments
 *=======================
 */
#define OUT_zCross   plhs[0]
#define OUT_sums     plhs[1]
#define OUT_maxes    plhs[2]

/*=======================
 * Input arguments
 *=======================
 */
#define IN_x        prhs[0]
#define IN_fs       prhs[1]

#define myMax(x,y)     ( ( x ) > ( y ) ? ( x ) : ( y ) )

/*=======================
 * Main Function
 *=======================
 */
void mexFunction ( int nlhs, mxArray* plhs[], int nrhs, const mxArray* prhs[] )
{
    /* params: signal vector; 
       outputs: indices (one-based) of the zero crossings,
       sum of positive values between each pair of zero crossings, and the indices
       (one-based) of the maximum element between each pair
    */

    double *x = NULL;
    double *zCross = NULL;
    double *sums = NULL;
    double *maxes = NULL;
    double curMax = 0;
    unsigned int curMaxPos = 0;
    int Fs = 0;
    unsigned int nZeroCrossings = 0;
    unsigned int nPeaks = 0;
    unsigned int nSamples = 0;
    unsigned int i = 0, j = 0, t = 0;
    bool bIgnoreFirst = false;
    bool bSum = false;

    // Get signal and its size
    x = mxGetPr(IN_x);
    i = mxGetN (IN_x); 
    j = mxGetM (IN_x);

    if (i>1 && j>1) {
        mexPrintf ( "??? Input x must be a vector.\n" );
        return;
    }

    // Length of vector
    nSamples = myMax (i, j);

    zCross = mxCalloc(nSamples, sizeof(double));
    sums = mxCalloc(nSamples, sizeof(double));
    maxes = mxCalloc(nSamples, sizeof(double));

    if (x[0] > 0)
    {
        /* If the first sample is positive, we cannot generate a spike for the first
         pair of zero crossings as this represents part of the signal that is
         negative; therefore, skip the first zero crossing and begin pairing from
         the second */
        bIgnoreFirst = true;
    }
    else if (x[0] == 0)
    {
        // Begin summation from first element
        bSum = true;

        nZeroCrossings = 1;
        sums[0] = x[0];
        curMax = x[0];
        curMaxPos = 0;
    }

    for (t = 1; t < nSamples; ++t)
    {
        // Look for a zero-crossing
        if (x[t] * x[t-1] < 0 || (x[t] == 0 && x[t-1] != 0))
        {
            bool bIgnore = false;

            // If not the first one, we can safely flip the boolean flag
            if (nZeroCrossings != 0)
            {
                bSum = !bSum;
            }
            else if (!bIgnoreFirst)
            {
                // If not, make sure we're not supposed to ignore the first one
                bSum = true;
            }
            else
            {
                bIgnore = true;
            }

            // Store the zero-crossing index
            zCross[nZeroCrossings] = t+1;

            // If this crossing terminated the summation, store and reset the position of the max. element
            if (!bSum && !bIgnore)
            {
                maxes[nPeaks] = curMaxPos+1;
                curMax = 0;
                curMaxPos = 0;
                ++nPeaks;
            }

            ++nZeroCrossings;
        }

        if (bSum)
        {
            sums[nPeaks] += x[t];
            if (x[t] > curMax)
            {
                curMax = x[t];
                curMaxPos = t;
            }
        }
    }

    // Allocate outputs
    OUT_zCross = mxCreateNumericMatrix(0, 0, mxDOUBLE_CLASS, mxREAL);

    OUT_sums = mxCreateNumericMatrix(0, 0, mxDOUBLE_CLASS, mxREAL);

    OUT_maxes = mxCreateNumericMatrix(0, 0, mxDOUBLE_CLASS, mxREAL);

    mxSetPr(OUT_zCross, zCross);
    mxSetM(OUT_zCross, nZeroCrossings);
    mxSetN(OUT_zCross, 1);

    mxSetPr(OUT_sums, sums);
    mxSetM(OUT_sums, nPeaks);
    mxSetN(OUT_sums, 1);

    mxSetPr(OUT_maxes, maxes);
    mxSetM(OUT_maxes, nPeaks);
    mxSetN(OUT_maxes, 1);

    return;
} 
```

# android - 如何确保在服务被终止时停止异步任务

> ID：13513333
> 
> 赞同：1
> 
> 时间：2012-11-22T13:03:11.707
> 
> 标签：android, android-intent, android-asynctask

我知道当 Androids 杀死一个服务时，不一定会调用 onDestroy() （我的意思是真的杀死了没有正确停止这个服务）。我有一个启动异步任务的前台服务，我必须确保在服务被终止时取消正在运行的任务。服务和异步任务与用于启动服务的活动一起在同一进程中运行。

我现在的问题是当我不能依赖 onDestroy() 将被调用时如何取消此任务？Android有可能会终止单个服务并让进程和任务继续运行，还是Android只会终止整个进程？最后一个对我来说没问题，因为这也将确保任务停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:29:19.080

请参阅此处的文档：http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

> 只要服务已启动或绑定了客户端，Android 系统就会尝试保持托管服务的进程。当内存不足并需要终止**现有进程**时[...]

因此，如果您的 AsyncTask 和服务共享该进程，则两者都会关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:41:24.860

你可以为此编写一个测试/一些测试代码；

**异步任务定义**

```
doInBackground() {

  while (isHostingServiceRunning()) {
     // Do some stuff.
  }

  cancel();
}

private boolean isHostingServiceRunning() {
  final ActivityManager activityManager = (ActivityManager) Application.getContext().getSystemService(Context.ACTIVITY_SERVICE);
  final List<RunningServiceInfo> services = activityManager.getRunningServices(Integer.MAX_VALUE);

  for (RunningServiceInfo runningServiceInfo : services) {
    if (runningServiceInfo.service.getClassName().equals(<hostingServiceClassName>)){
      return true;
    }
  }
  return false;
} 
```

`return false`然后在手动停止服务后放置一个调试点。如果它被击中，那么可以说你的任务比你的服务寿命长。

我怀疑其他人是对的（杀死意味着杀死每个底层进程），但我很想知道是否有可能孤立这样的异步任务。

# zend-framework - 尝试使用 Google Provisioning API 更新用户时出现 500 错误

> ID：13513337
> 
> 赞同：2
> 
> 时间：2012-11-22T13:03:40.533
> 
> 标签：zend-framework, google-api, gdata, zend-gdata, google-provisioning-api

我有一个小脚本可以强制我们 Google Apps 域中的用户在下次登录时更改密码。我使用的是 Zend Framework 1.11.13，但我在 1.12.0 上也得到了相同的结果。

[在 google 文档 ( https://developers.google.com/google-apps/provisioning/#updating_a_user_account](https://developers.google.com/google-apps/provisioning/#updating_a_user_account) )中更新用户的示例似乎已过时或不正确，因为在客户端对象上调用 updateUser 总是返回未定义的方法错误。

这是我的代码：

```
<?php
set_include_path(implode(PATH_SEPARATOR, array(
    "/var/www/workspace/extlib/zend-framework/library/",
    get_include_path(),
)));
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
Zend_Loader::loadClass('Zend_Gdata_Gapps');

$client = Zend_Gdata_ClientLogin::getHttpClient("removed", "removed", Zend_Gdata_Gapps::AUTH_SERVICE_NAME);
$gdata = new Zend_Gdata_Gapps($client, 'domain.com');
$userEntry = $gdata->retrieveUser("a.username");
$userEntry->getLogin()->setChangePasswordAtNextLogin(true);
$gdata->updateUser("a.username", $userEntry); 
```

我得到的错误是：

```
PHP Fatal error:  Uncaught exception 'Zend_Gdata_App_HttpException' with message 'Expected response code 200, got 500
Internal Error' in /var/www/workspace/extlib/zend-framework/library/Zend/Gdata/App.php:718
Stack trace:
#0 /var/www/workspace/extlib/zend-framework/library/Zend/Gdata.php(219): Zend_Gdata_App->performHttpRequest('PUT', 'https://apps-ap...', Array, '<atom:entry xml...', 'application/ato...', NULL)
#1 /var/www/workspace/extlib/zend-framework/library/Zend/Gdata/App.php(934): Zend_Gdata->performHttpRequest('PUT', 'https://apps-ap...', Array, '<atom:entry xml...', 'application/ato...')
#2 /var/www/workspace/extlib/zend-framework/library/Zend/Gdata/Gapps.php(272): Zend_Gdata_App->put(Object(Zend_Gdata_Gapps_UserEntry), 'https://apps-ap...', NULL, NULL, Array)
#3 /var/www/workspace/extlib/zend-framework/library/Zend/Gdata/App.php(1025): Zend_Gdata_Gapps->put(Object(Zend_Gdata_Gapps_UserEntry), 'https://apps-ap...', NULL, NULL, Array)
#4 /var/www/workspace/extlib/zend-framework/library/Zend/Gdata/Gapps.php(1005): Zend_ in /var/www/workspace/extlib/zend-framework/library/Zend/Gdata/App.php on line 718 
```

我在这里和那里添加了一些调试代码，并且用户肯定可以正常加载，因此它似乎不是权限错误或网络错误，因为初始请求工作正常。当我尝试调用 updateUser 时出现错误。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:06:52.220

使用[Fiddler](http://www.fiddler2.com/fiddler2/)进行错误描述，它提供了有关错误的更多描述

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T12:32:04.203

我发现问题实际上是基于权限的。

我创建的用于管理密码更改的用户虽然有权重置密码，但无法为具有超级管理员权限的用户重置密码，因为它只有管理员权限。

也许这里需要更合适的错误消息？

# php - html中的服务器页面动态获取数据

> ID：13513339
> 
> 赞同：2
> 
> 时间：2012-11-22T13:03:51.967
> 
> 标签：php, apache

实际上我有一个搜索引擎，我想在 html 页面中显示我的搜索结果

例如

用户可以在我的网站上搜索的一种方法是访问类似的网址

`http://mysite.com/search.php?q='KEYWORDS'`

但我想以这种方式在我的网站上进行搜索查询

`http://mysite.com/search/keywords.html`

虽然 keyword.html 不是我网站上的静态页面，而是在搜索查询时动态创建的，所以我如何使用 php 或 apache .htaccess 文件来完成这项工作。我用谷歌搜索但找不到答案

所以请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:08:50.547

您可能想使用类似这样的[mod_rewrite ：](http://www.sitepoint.com/apache-mod_rewrite-examples/)

```
RewriteEngine on
RewriteRule ^/?([0-9a-z]+)\.html$ search.php?q=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:07:28.837

你可以尝试这样的事情：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !index.php
RewriteBase /

RewriteRule ^(.+) /index.php?query=$1.html 
```

请注意，此规则可能会影响您文件夹中的其他媒体文件。所以最好将它们移到别处（在子域中）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T13:28:24.557

你可以做的是先做一个表格

`use php`

search_result.php 应该是这样的看看

[结果文件点击这里](http://submaza.com)

# ios - 在 iPhone 中接收推送通知时如何播放声音

> ID：13513344
> 
> 赞同：3
> 
> 时间：2012-11-22T13:04:08.910
> 
> 标签：ios, xcode, uialertview, apple-push-notifications, audio

嗨，我正在尝试在我的 iDevice 上收到推送通知时播放默认的推送声音我使用此代码在

```
-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo` Method 

NSDictionary *test =(NSDictionary *)[userInfo objectForKey:@"aps"];
    NSString *alertString =(NSString *) [test objectForKey:@"alert"];
    NSLog(@"String recieved: %@",alertString);
    if (state == UIApplicationStateActive) {
            UIAlertView *alertmessage=[[UIAlertView alloc]initWithTitle:@"iEverything Tech"
                                                                message:alertString                                                    delegate:self
                                               cancelButtonTitle:@"OK"
                                               otherButtonTitles:nil];

            [alertmessage show];

            AudioServicesPlaySystemSound(1002);

        }

        if (state == UIApplicationStateInactive) {
            AudioServicesPlaySystemSound(1002);
        }

        if (state == UIApplicationStateBackground) {
            AudioServicesPlaySystemSound(1002);
        } 
```

我的第二个问题是如何在 AlertView 中显示 Pushed 消息？

谢谢您的回答！

而且我不能使用像 Parse 这样的推送提供程序，因为我们有自己的服务器，我们需要自动推送

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:11:32.633

就像 NSEncoder 写的那样，声音必须在通知负载中。要回答第二个问题，您的通知将显示在警报、徽章或根本不显示 - 根据用户通知设置中的设置，您对此没有影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T13:08:30.173

您必须使用推送通知有效负载来播放声音。阅读苹果文档。![在此处输入图像描述](../Images/da9cedae154e1c3bb0e7064d1e80e02a.png)

[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T13:10:41.997

试试这个来检索通知消息，下面的“alertString”保存收到的消息

```
NSDictionary *test =(NSDictionary *)[userInfo objectForKey:@"aps"];
NSString *alertString =(NSString *) [test objectForKey:@"alert"];
NSLog(@"String recieved: %@",alertString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T13:59:40.633

只需将字符串传递到警报中即可

```
NSDictionary *test =(NSDictionary *)[userInfo objectForKey:@"aps"];
NSString *alertString =(NSString *) [test objectForKey:@"alert"];
NSLog(@"String recieved: %@",alertString);
UIAlertView *alert = [[[UIAlertView alloc] initWithTitle:@"Title" message:alertString delegate:self cancelButtonTitle:@"OK" otherButtonTitles: @"Not OK", nil] autorelease];
[alert show]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T13:49:51.803

在您的“应用程序 didfinishlaunchingwithoptions 添加以下内容

```
NSDictionary *remoteNotif = [launchOptions objectForKey: UIApplicationLaunchOptionsRemoteNotificationKey];
if (remoteNotif) {
    [self handleRemoteNotification:application userInfo:remoteNotif];
    [[UIApplication sharedApplication] cancelAllLocalNotifications];
    [UIApplication sharedApplication].applicationIconBadgeNumber--;        
} 
```

当您通过远程通知打开应用程序时，通过点击通知这将减少徽章编号，如果您想在用户打开应用程序时删除徽章编号，那么只需在 if 条件下执行代码，如果条件在这里只检查是否该应用程序已通过点击远程通知打开..，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-28T20:11:12.917

为了在 iOS 中播放通知的默认声音，您需要将以下代码添加到有效负载 json

```
"sound" : "default" 
```

因此，您的“通知”有效负载应类似于：

```
 "notification": {
        "title": "4x8",
        "body": "15:16.2342",
        "message":"https://www.google.com",
        "sound" : "default"
      } 
```

# c# - C# 制作容器中声明的所有私有成员

> ID：13513347
> 
> 赞同：1
> 
> 时间：2012-11-22T13:04:23.400
> 
> 标签：c#

我的代码中有很多私有数据成员，接近 20 行有没有办法将所有这些都放在一个容器中；我在 VS 2010 中做 C# 4.0。

```
private const string sig1 = "SignatureField";
private const string sig2 = "Message";
private const string sig3 = "Enter Label name & its Associated Types";
private const string sig4 = "Label 1";
private const string sig5 = "Label 2"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:06:44.100

你的意思是在#region 中？

```
#region Constants
   const string sig1 = "SignatureField";
   const string sig2 = "Message";
   const string sig3 = "Enter Label name & its Associated Types";
   const string sig4 = "Label 1";
   const string sig5 = "Label 2";
   // etc.
#endregion 
```

这将允许您在 VS 中进行代码折叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:10:12.060

如果您希望它们由用户更改，您可以将它们放在项目的 App.config 中并使用 ConfigurationManager 调用它们。

这是初学者的解释：http: [//blogs.technet.com/b/vanih/archive/2008/01/25/configurationmanager-class-in-c.aspx](http://blogs.technet.com/b/vanih/archive/2008/01/25/configurationmanager-class-in-c.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:09:21.263

你到底想做什么？

如果您只是不想在大多数时间看到它们，则可以添加

```
#region 
```

在私有成员之前和 #endregion 之后。这将为您提供一个小的 + 符号，您可以在其中折叠代码。

如果您想让成员在自己的类或结构中，您可以编写一个新的，但是您需要属性以便原始类可以访问它（如果您标记行并右键单击它，可以使用重构设置）

如果它们都是 const 设置，也许您正在寻找类似单例的东西？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T13:22:52.757

我不确定我是否正确理解了您，但也许您可以尝试执行以下操作：

```
public class Signatures
{
    private const string sig1 = "SignatureField";

    public static string Sig1
    {
        get
        {
            return sig1;
        }
    }    
} 
```

接下来，您可以根据需要在其他类中使用它：

```
class Program
{
    static void Main(string[] args)
    {
        Console.Write(Signatures.Sig1);
        Console.ReadKey();
    }
} 
```

当然，由于 consts privates，您必须记住仅对公共属性使用 getter。

我希望我能很好地理解你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T13:07:00.870

也许将它们放在一个数组中？

```
private static final string[] sigs = new[] { "SignatureField", "Message", "Enter Label name & its Associated Types", "Label 1", "Label 2" }; 
```

并像这样使用它们：

```
string value = sigs[0]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T13:08:04.827

使用区域，这是来自微软的官方文章[http://msdn.microsoft.com/en-us/library/9a1ybwek(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/9a1ybwek(v=vs.71).aspx)

# ruby-on-rails - 在ruby中覆盖类方法没有按预期工作

> ID：13513350
> 
> 赞同：1
> 
> 时间：2012-11-22T13:04:37.923
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, oop, cancan

我有一个基本控制器来干燥我的许多沼泽标准 crud 控制器，我的想法是，如果我需要做一些非标准的事情，我只覆盖每个方法。

```
class MyBaseController < ApplicationController

  load_and_authorize_resource

  # Common crud actions

end 
```

现在在我的一个子控制器中，我有一个自定义操作（export_csv）

```
class ReportsController < MyBaseController 

  load_and_authorize_resource :except => :export_csv

  def export_csv
    # custom auth and other stuff
  end

end 
```

现在我无法再点击 export_csv 操作，而是收到拒绝访问异常。如果我不从我的基本控制器继承一切都很好。

我想我可以按如下方式解决它：

```
class MyBaseController < ApplicationController

  load_and_authorize_resource :except => auth_exceptions

  def self.auth_exceptions
    []
  end

  # Common crud actions

end 
```

然后根据需要覆盖我的子类中的 self.auth_exceptions 。

但是，这会触发错误“MyBaseController:Class 的未定义局部变量或方法‘auth_exceptions’”

有没有人有任何建议可以选择性地覆盖我的子控制器中的加载和授权资源？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:35:35.480

在您的派生类中尝试：

```
skip_load_and_authorize_resource :only => :export_csv 
```

文档在这里：[skip_load_and_authorize_resource](http://rubydoc.info/gems/cancan/CanCan/ControllerAdditions/ClassMethods%3askip_load_and_authorize_resource)。

# python - 如何在python中从最后一个单词到第一个单词读取txt文件上的单词（或字符）？

> ID：13513355
> 
> 赞同：-1
> 
> 时间：2012-11-22T13:04:54.840
> 
> 标签：python

示例：我有一个文件：
filename1 = "I am a student"（在 filename1 中有 I am a student）

```
f = open(filename1)
string = f.read()
spl = re.split('\s|(?<!\d)[,.](?!\d)',string)
f.close 
```

print spl 将显示：我是学生，但我需要结果，因为 [我是学生] 你能回答我吗...提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:08:17.127

[您可以使用火星笑脸](https://stackoverflow.com/a/1695416/190597)来反转列表：

```
spl = spl[::-1] 
```

或者，如果您只需要一个迭代器：

```
spl = reversed(spl) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:25:18.800

```
str=['im a student','im a teacher']
list=[]
for x in str:
   new=""
   for y in [x for x in reversed(x.split())]:
       new+=y
       new+=' '
   list.append(new)

print list // ['student a im ', 'teacher a im '] 
```

# c# - C# 通过 tcp/ip 异步读取

> ID：13513356
> 
> 赞同：0
> 
> 时间：2012-11-22T13:04:58.507
> 
> 标签：c#, buffer, tcp-ip, asynchronous

我需要创建一个通过 tcpip 连接到医疗机器的客户端。这台机器在发生内部事件时，会向我发送一个或多个 XML 文件，其中包含我需要处理的数据。由于这些事件是不可预测的，我想到了异步连接，它获取数据并将其保存在文件系统上。基本上，对于该机器发送的每个 XML，我都必须将其保存到磁盘上。

我搜索了一下，因为我在 tcp/ip 编程方面没有太多经验，我在 MSDN 上找到了一个异步客户端示例（[客户端示例](http://msdn.microsoft.com/en-us/library/bew39x2a.aspx)）

首先，不工作的财产，因为`Console.WriteLine("Response received : {0}", response);`从来没有被击中。然后，当那台机器只向我发送一个文件时，在缓冲区我有两次相同的数据。而且我还在猜测如何在发送的 xml 文件中检测 EOF。

我也考虑过轮询，但作为解决方案似乎不正确。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:20:09.043

我很确定在这种情况下轮询将无济于事。

很少有事情可以向您展示一些好的建议：

1）。套接字以您决定大小的一些预定义提供的字节数组为您提供接收到的数据，因此请确定大小。例如：

```
public const int BufferSize = 256; 
```

对于 MSDN 上的示例，是 256，现在如果您的数据大小为 260 字节，它将首先向您发送 256 字节，然后在下一次接收时将向您发送其余 4 字节。这可能是您需要找到一种方法来堆积收到的所有这些数据然后每次检查开始标识符和结束标识符以提取您需要的数据的一个原因。从另一个角度来看，如果您考虑数据的平均大小定义更大的字节缓冲区大小。在大多数情况下，您将一次性收到整个消息。但是您仍然无法 100% 实现它，这就是套接字的工作方式。

2）。您可能已经收到两次数据或某种损坏的数据，因为缓冲区字节数组未在适当的时间清除或在下次使用前未刷新。

3）。EOF 或 EOT 可以通过多种方式确定，如果您可以控制医疗机器，您可以在其发送数据之前在末尾插入一个标识符，并使用它来区分发送的消息。如果您没有对发送方的编程控制并且您确定要接收 XML 格式，您可以随时尝试在接收到的数据中查找“<xml>”“</xml>”文本并在此基础上进行区分。

# c - C（和循环）中的输入验证

> ID：13513359
> 
> 赞同：2
> 
> 时间：2012-11-22T13:05:11.790
> 
> 标签：c, validation, input

我正在创建一个程序，它应该验证我输入的正确值，但不幸的是我做错了。如果答案是 1 或 0，该程序需要检查输入值 10 次。否则它必须再次要求答案。输入完成后，它应该通过 printf 显示正确答案，但事实并非如此。

我的猜测是“开关盒”部分出了点问题。帮助将不胜感激！

我的代码：

```
int main()

{
char a0, a1, a2, a3, a4, a5, a6, a7, a8, a9;
char c = '0';
int a = 0, OK = 0, check = 0, valid_input = 0, a_ok;

printf("Fill in a value 1 or 0.\n\n");

while (a < 10)
{
while (valid_input == 0)
{
    printf("Fill in a%d: ", a);
    a_ok = scanf("%d", &OK);
    if (a_ok != 1)
    {
        scanf("%s", &c);
    }
    else if (OK <0 | OK >1)
    {
        do
        {
            while (check == 0)
            {
            printf("Fill in a%d: ", a);
            check = check +1;
            }
        c = getchar();
        }
        while (!isdigit(c));
        ungetc(c, stdin);
    }
    else
    valid_input = 1;
}
switch (a)
    {
    case 0:
    OK = a0;
    case 1:
    OK = a1;
    case 2:
    OK = a2;
    case 3:
    OK = a3;
    case 4:
    OK = a4;
    case 5:
    OK = a5;
    case 6:
    OK = a6;
    case 7:
    OK = a7;
    case 8:
    OK = a8;
    case 9:
    OK = a9;
    }
a = a +1;
}

/*
printf("Fill in a1: ");      **<--- WANT TO REMOVE THIS PART BY LOOP**
scanf("%d", &a1);
printf("\nFill in a2: ");
scanf("%d", &a2);
printf("\nFill in a3: ");
scanf("%d", &a3);
printf("Fill in a4: ");
scanf("%d", &a4);
printf("\nFill in a5: ");
scanf("%d", &a5);
printf("Fill in a6: ");
scanf("%d", &a6);
printf("\nFill in a7: ");
scanf("%d", &a7);
printf("\nFill in a8: ");
scanf("%d", &a8);
printf("Fill in a9: ");
scanf("%d", &a9);
*/

printf("\n%d\n%d\n%d\n%d\n%d\n%d\n%d\n%d\n%d\n%d", a0,a1,a2,a3,a4,a5,a6,a7,a8,a9);

getch();
return(0);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T13:07:51.083

您忘记了`break`开关的每种情况下的声明：

```
case 0:
    OK = a0;
    break;
case 1:
    OK = a1;
    break;
/* etc. */ 
```

另外，这个`if`说法是错误的：

```
if (OK <0 | OK >1) 
```

您可能打算使用`||`逻辑 OR 运算符，而不是`|`按位 OR 运算符。

此外，您的 aN 变量（`a0`, `a1`, ... `a9`）未在任何地方初始化。它们的初始值是未定义的。

另外（我这里的续词用完了:-P），这个：

```
while (!isdigit(c)); 
```

只是看起来不对。这相当于：

```
while (!isdigit(c))
{
} 
```

这意味着它是一个无限循环 when`isdigit(c) == 0`并且什么也不做 when `isdigit(c) != 0`。也许你打算写这个：

```
while (!isdigit(c)) {
    ungetc(c, stdin);
} 
```

但即便如此，您仍会`stdin`在无限循环中将同一个角色推回原处。

这也是错误的：

```
scanf("%s", &c); 
```

`c`是一个`char`变量，但你告诉 scanf() 读取一个字符串。

不是错误，而是应该使用数组而不是 10 个单独的变量：

```
char val[10]; 
```

所以，而不是：

```
a0 a1 ... a9 
```

你将拥有：

```
val[0] val[1] ... val[9] 
```

Anyway, this program is extremely broken. If you just began to learn C, I'd recommend starting from scratch and paying more attention.

# c# - 带有 js encodeURI 的图像不会显示在电子邮件中

> ID：13513365
> 
> 赞同：0
> 
> 时间：2012-11-22T13:05:35.523
> 
> 标签：c#, javascript, html, css, email

我正在从我的网站发送电子邮件。电子邮件是 html 并包含图像。看起来带有编码的uris没有显示在outlook、gmail等中。

这个不显示：路径：[示例](http://www.example.com/fileshare/filarkivroot/Bilder/Rett%20til%20%C3%A5%20lese/Lydkort_bilder/15_Murakami_2_kort.jpg)

电子邮件来源（前景）：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
Test6<br><br><br><br>
<img alt="" src="http://www.example.com/fileshare/filarkivroot/Bilder/Rett%20til%20%C3%A5%20lese/Lydkort_bilder/15_Murakami_2_kort.jpg"> 
<br><br><br><br> 
```

这确实显示在电子邮件中：

小路： `http://www.rettilaalese.no/fileshare/filarkivroot/shop/Produktgruppe/medium.jpg`

电子邮件来源（展望）：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
Test5<br><br><br><br>
<img alt="" src="http://example.com/fileshare/filarkivroot/shop/Produktgruppe/medium.jpg">
<br><br><br><br>Hilsen Espen 
```

使用正确的 url（不是 example.com）时，图像存在并显示在浏览器中

# iterator - boost::filesystem::directory_iterator 是否因删除而失效？

> ID：13513369
> 
> 赞同：6
> 
> 时间：2012-11-22T13:06:07.347
> 
> 标签：iterator, boost-filesystem

我正在遍历一个目录，当一个项目符合某些条件时，我将其删除。我可以从循环中安全地执行此操作，还是必须将路径保存在数组中并稍后删除？

[我在boost::filesystem docs](http://www.boost.org/doc/libs/1_52_0/libs/filesystem/doc/index.htm)中没有找到相关信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-22T18:38:24.287

[引用boost::filesystem::directory_iterator 文档](http://www.boost.org/doc/libs/1_54_0/libs/filesystem/doc/reference.html#Class-directory_iterator)所附注释的第一部分（重点是我自己的）：

> 执行目录迭代的程序可能希望测试通过取消引用目录迭代器获得的路径是否确实存在。它可能是指向不存在文件的符号链接。出于删除和重命名**条目****的目的而递归遍历目录树的程序**可能希望避免遵循符号链接。

 **我很清楚，为了删除文件而迭代目录是官方支持的用例，因此不会使迭代器无效。另外，引用该说明的第二部分：

> 如果在为目录构建 directory_iterator 之后从目录中删除或添加文件，则未指定迭代器的后续递增是否会导致迭代器的值是已删除或添加的目录条目。参见 ISO/IEC 9945 readdir_r()。

这是关于在遍历目录时是否会出现已删除文件的非常具体的声明。同样，我知道迭代过程本身在任何情况下都保持有效。

请注意，[ISO/IEC 9945](http://pubs.opengroup.org/onlinepubs/000095399/functions/readdir_r.html)有类似的措辞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-08T09:16:45.077

在 Windows 上确实如此，但我发现了一个 Ubuntu，在该 Ubuntu 上，迭代器在删除后失效，因此下一次访问会引发异常。

所以我最终使用了这样的东西：

```
 recursive_directory_iterator end;
    for (recursive_directory_iterator itr(folderPath); itr != end; )
    {
        path filePath = *itr++;
        if (is_regular_file(filePath) && filePath.string().find(filter) != std::string::npos)
        {
            if (remove(filePath))
            {
                removedFilesCounter++;
            }
        }
    } 
```**

# jquery - 调整屏幕大小时，modernizr 复制脚本

> ID：13513370
> 
> 赞同：0
> 
> 时间：2012-11-22T13:06:09.900
> 
> 标签：jquery, responsive-design, media-queries, modernizr

我正在为特定的屏幕宽度放置带有modernizr 的脚本。初始加载一切正常，但是当我将平板电脑的方向从纵向更改为横向时，有两个问题：脚本 wp 根本不加载，或者每次我切换到给定方向时，modernizr 都会复制它们。查看我正在使用的代码：

```
 Modernizr.load([
            {
                test : Modernizr.mq('screen and (min-width: 600px)'),
                yep : ['/js/supersized/js/supersized.core.3.2.1.min.js','/js/supersized/css/supersized.core.css'],
                complete : function() {
                    if(Modernizr.mq('screen and (min-width:600px)')) {
                        jQuery(function($){
                            $.supersized({
                                fit_portrait: true,
                                slides  : [
                                    {image : img/sample.jpg', title : 'sample'}
                                ]
                            });
                        }); 
                    };
                }
            }
        ]); 
```

因此，当将方向从 600px 以下更改为更大的方向时（在加载较窄版本后），它不会加载脚本。但是当我添加 $(window).bind('resize', function(){ 时，它会不断将脚本和 css 添加到头部（所以我得到了很多附加到头部的超大脚本）。

所以基本上问题是：如果脚本已经被包含，或者在调整到指定断点（在我的情况下为 600px）以下时是否有可能从头部删除脚本，modernizr 是否有机会检查窗口调整大小。

阿雷克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:36:58.733

我最终做的是创建一个加载的 var 并将其设置为 false 运行 mondernizr.load 的函数之外。在同一个函数中，我设置了loaded = true。然后我在加载和调整大小时调用这个函数。这是一个如何使用代码执行此操作的示例。

```
var loaded = false;

// Set up function to call when DOM is ready and on resize
var loadScripts = function(){

    // Check to make sure our code has not run yet
    if(!loaded){

        Modernizr.load([{
            test : Modernizr.mq('screen and (min-width: 600px)'),
            yep : ['/js/supersized/js/supersized.core.3.2.1.min.js','/js/supersized/css/supersized.core.css'],
           complete : function() {
               if(Modernizr.mq('screen and (min-width:600px)')) {
                   jQuery(function($){
                       $.supersized({
                           fit_portrait: true,
                           slides  : [{image : 'img/sample.jpg', title : 'sample'}]
                        });
                    }); 
                }
            } 
        }]);

       // Switch loaded over to true so Modernizr.load is not run again on resize
       loaded = true;

    } // End if!loaded

};

// Run when DOM is ready
loadScripts();

// Run on resize
if( window.addEventListener ){
    window.addEventListener( "resize", loadScripts, false );
} 
```

# go - 如何在golang中将文本附加到文件中？

> ID：13513375
> 
> 赞同：19
> 
> 时间：2012-11-22T13:06:18.317
> 
> 标签：go

我发现 os.Open() 返回一个 O_RDONLY 文件，而 os.Create() 返回一个 O_RDWR 但找不到返回 APPEND 文件指针的方法。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-22T13:12:44.893

[OpenFile](http://golang.org/pkg/os/#OpenFile)接受一个可以使用的标志参数：

```
 os.OpenFile("foo.txt", os.O_RDWR|os.O_APPEND, 0660); 
```

与 O_CREATE 一起使用，OpenFile 也可以起到与 os.Create() 相同的目的

# javascript - 获取本地 html 文件的访问令牌

> ID：13513376
> 
> 赞同：1
> 
> 时间：2012-11-22T13:06:28.680
> 
> 标签：javascript, jquery, facebook

```
$.getScript('http://connect.facebook.net/en_US/all.js', function(){

    FB.init({
          appId  : 'my app id',           
          status : true, // check login status
          cookie : true, // enable cookies to allow the server to access the session
          xfbml  : true  // parse XFBML
    });

}); 
```

这会导致错误：`One or more of the given URLs is not allowed by the App's settings. It must match the Website URL or Canvas URL, or the domain must be a subdomain of one of the App's domains.`

我的目标是在我的本地 html 文件上生成访问令牌。我在 facebook 上的应用程序设置不允许“localhost”或任何类似的东西。

这可能吗，还是我需要一个本地网络服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:49:08.530

我做了更多的研究，我会说这是最简单的方法：

```
$.ajax({

url: 'https://graph.facebook.com/oauth/access_token?client_id=<APPID>&client_secret=<APP SECRET>&grant_type=client_credentials',
dataType: 'text',
success: function(tokenstring){

    var token = tokenstring.split('=')[1];

}

}); 
```

# c# - 如何验证远程 ssl 证书？

> ID：13513379
> 
> 赞同：1
> 
> 时间：2012-11-22T13:06:33.430
> 
> 标签：c#, ssl, x509certificate, x509certificate2

我想验证远程 SSL 证书。

我有一个**X509Certificate2**实例并通过以下方式访问它：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://www.paypal.com/de/webapps/mpp/home");
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
response.Close();
X509Certificate cert = request.ServicePoint.Certificate;
X509Certificate2 cert2 = new X509Certificate2(cert);
byte[] rawdata = cert2.RawData;
MessageBox.Show(cert2.GetNameInfo(X509NameType.EmailName,true)); 
```

但我现在怎么知道，这真的是我的证书？

那么我现在如何验证它？如果我做：

虚拟代码：

if(Certificate.URL = "MYSAFEURL.COM") {//OK}

有人可以“修改”我的 .exe 中的字符串以将 MYSAFEURL 更改为whatever.com

那么有什么方法可以100%确定证书是真的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-16T13:34:17.787

您可以签署网址

```
 if((Hash(Certificate.URL) = Decrypt("UrlSignature")) {//OK}

With "UrlSignature" = Encrypt(Hash("MYSAFEURL.COM")) 
```

哈希可以是 SHA256

加密和解密是像 RSA 一样的非对称加密

你用私钥加密

你用公钥解密

# vb.net - ID 重复的总计 DataTable 列

> ID：13513383
> 
> 赞同：0
> 
> 时间：2012-11-22T13:06:50.897
> 
> 标签：vb.net, full-text-search

我正在使用全文搜索在 MSSQL 中搜索表。此表包含支持事件的摘要和内容。摘要通过 EVENT_TYPE 打开来标识。

我想搜索所有事件类型，因此我在包含相关文本 (COMMENTS) 的字段上设置了全文搜索。现在我只想在屏幕上显示摘要行（DataGridView），因为一旦选择了摘要行，就会访问其他更新。

我只想要显示 EVENT_TYPE 为“打开”的行，所以我使用：

```
dt.DefaultView.RowFilter = " [EVENT_TYPE] = 'Open'" 
```

我有一个名为 Match 的列，它给出了每个结果的百分比匹配，我将如何组合具有相同 ID 的所有行的结果？

即，将具有重复 ID 号的所有行的所有匹配分数相加，添加到新列？

```
ID | EVENT_TYPE| match
123     Open       33
123     Closed     47
123     Update     12 
```

理想情况下显示为：

```
ID | EVENT_TYPE| match | matchTotal
123     Open       33        92 
```

我认为这可能是使用数据表计算的情况，但它似乎并不那么容易，我认为不可能以所需的方式进行过滤。

```
dt.Compute("Sum(Match)", "[EVENT_TYPE] = 'Open' AND Duplicate(INCIDENT_ID)") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:28:43.670

你可以试试 LINQ：

```
Dim q = From p In dt
Group p By tID = p(0) _
Into matchTotal= Sum(Convert.ToDouble(p(2))) _
Select tID, totalForType
'Where dt is your original datatable 
```

我知道这将导致：

```
 ID |  matchTotal
 123       92 
```

但我为您提供了一个起点。

# asp.net-mvc-3 - 将带有 azure 表存储的 asp.net mvc 3 应用程序部署为网站

> ID：13513387
> 
> 赞同：0
> 
> 时间：2012-11-22T13:06:55.527
> 
> 标签：asp.net-mvc-3, azure

我是 azure 的新手，但我在官方 azure 网站上尝试了这些示例。我开发了一个 3 层 Web 应用程序，如下所示：

*   带有存储库的 dal 层（天蓝色表存储和 blob 存储中的数据）
*   服务层（包含逻辑并在 dal 层使用存储库）
*   ui 层（实际的 asp.net mvc 3 网站）

Visual Studio 解决方案包含 5 个项目： - Dal（类库） - Service（类库） - Objects（类库） - UI（asp.net mvc 3 网站） - Azure（天蓝色云项目，包含 mvc UI 项目）

该网站在本地运行得很好。当我将应用程序部署为云服务时，一切正常。但我注意到，我没有 ftp 支持，因此我的 UI 设计师可以更改 css 和 html 文件。我将应用程序部署为网站（在 UI 项目上发布），部署成功，但无法访问应用程序。它抛出一个错误，即 Dal dll 不可访问（是的，我将本地复制标记为 true，并且我在 ftp 上查看了也有 Dal.dll）。

我的问题是：如何将我的应用程序部署为网站？我确定我做错了什么。

谢谢你的帮助，贾尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:26:18.690

在您的 ASP.NET MVC 3 Web 应用程序中，您能否尝试引用以下程序集并将所有这些程序集的 Copy Local 设置为 true：

*   达尔
*   服务
*   对象

# git - GIT 在初始提交后不会推送

> ID：13513393
> 
> 赞同：1
> 
> 时间：2012-11-22T13:07:20.863
> 
> 标签：git, netbeans

我正在尝试为我正在从事的工作项目设置一个共享存储库。我对此还是很陌生，因为我的工作在此之前从未真正使用过任何源代码控制。我们正在尝试设置一个共享的 git 存储库。在进行初始提交后，其他用户无法推送任何更改。只有进行初始提交的用户才能进行任何更改。其他人可以拉和克隆，但不能推。

我正在初始化共享存储库：

```
git init --bare project.git 
```

初始提交后，其他用户从 netbeans 推送时收到错误：

```
REJECTED_OTHER_REASON 
```

坦率地说，这不是很有帮助。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:41:43.920

在您的服务器上尝试运行：

```
git update-server-info 
```

# c# - 如何在 C# 中使用自定义系统命名空间？

> ID：13513396
> 
> 赞同：1
> 
> 时间：2012-11-22T13:07:29.570
> 
> 标签：c#, visual-studio, namespaces

我在`Company.System`命名空间中有自定义类。但是现在我正在编写引用的代码`System`，但它引用了 Company.System。我可以`global::System`用来指定 .NET System 命名空间，但是当我通过 Visual Studio（即）创建服务安装程序时，所有类都被引用`Company.System`并且设计器不起作用。我该如何解决这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:10:22.130

您必须使用别名来区分一个命名空间和另一个命名空间：比如

```
 using colAlias = System.Collections;

 colAlias::Hashtable test = new colAlias::Hashtable(); 
```

更多信息在这里：http: [//msdn.microsoft.com/en-us/library/c3ay4x3d (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/c3ay4x3d(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:15:56.863

您是否使用了以下代码？

```
using Company.System; 
```

为您自己的库使用别名。

```
using Company.System = Foo; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:13:42.227

最明显的解决方案是重命名您的`Company.System`命名空间——这只会让您和可怜的维护开发人员感到悲痛。

另一种方法是在添加对包含命名空间的程序集的引用时使用该`Aliases`功能（请参阅[http://msdn.microsoft.com/en-us/library/ms173212(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173212(v=vs.80).aspx)）`Company.System`。

# android - android中gridview的行数

> ID：13513398
> 
> 赞同：6
> 
> 时间：2012-11-22T13:07:38.667
> 
> 标签：android, gridview, rows

我正在尝试制作一个只有两行的gridview。我的目的是让它看起来像一个有两行的画廊，一个在另一个之上，并带有一个水平滚动。我看到您可以更改gridview中的列数，但找不到如何更改行数。我感谢任何帮助，如果无法与 gridview 一起使用，也感谢任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-15T12:26:22.853

是的，它可以在父布局的固定高度的帮助下显示固定的网格视图行，并且还可以删除滚动视图作为父 GridView 自动维护滚动视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-15T12:57:33.507

您可以使用 RecycleView 代替 GridView。

使用 RecyclerView，您可以制作水平和垂直网格状视图。

使用 GridLayoutManager，您可以设置具有有限行数的水平回收视图。

[https://developer.android.com/reference/android/support/v7/widget/GridLayoutManager.html](https://developer.android.com/reference/android/support/v7/widget/GridLayoutManager.html)

请参阅文档中的此方法，

```
 GridLayoutManager (Context context, 
            int spanCount, 
            int orientation, 
            boolean reverseLayout) 
```

# c# - 在数据库中搜索类似的术语

> ID：13513399
> 
> 赞同：0
> 
> 时间：2012-11-22T13:07:39.933
> 
> 标签：c#, sql, search, compact-framework, sql-server-ce

我在移动设备上有 ac# 应用程序，上面有 sqlce 数据库。

在数据库中有一张大表，我想在其中搜索城市或地址的名称。问题是，城市名称来自不同的来源，或者是由不同的人插入的，因此城市包含例如**Saint XXX、St. YYY**和**St ZZZ**。

**在我的搜索中，我搜索 fpr St XXX**还是搜索**Saint XXX**都无关紧要。结果应该是一样的

当然这个问题不仅仅出现在圣徒这个词上，它只是一个例子。我还不知道多少，但会有很多不同的术语。

我有一些方法，比如更换

```
SELECT REPLACE(REPLACE(name,'St.','Saint'),'St','Saint') FROM cities WHERE name = REPLACE(REPLACE(@SearchTerm,'St.','Saint'),'St','Saint') 
```

但是性能很差。

也`SoundEx`没有真正给出我需要的结果，因为 Saint 和 St 听起来根本不相似。

城市名称来自外部数据源（通过合并复制），因此我无法在服务器上更新它们，也不想更新城市名称，而是使用它们，因为它们存储在数据库中。

我怎样才能进行搜索以满足我的需求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:17:47.493

模糊搜索，每个数据库设计师的祸根……

我会将数据库中的每个名称拆分为空格和标点符号，然后将生成的子字符串输入到一个新表“city_alias”中，该表还包括原始城市表的外键。

因此，对于“Saint Petersburg”，将创建两个别名，“Saint”和“Petersburg”。别名“Saint”很可能是一个非常常见的别名，因此对于搜索查询应该忽略它。

当用户在搜索中输入“St.Petersburg”时，它会被分成“St”和“Petersburg”。“St”可能和“Saint”一样频繁，所以应该忽略它。因此在别名表中搜索“Petersburg”，这将返回“Saint Petersburg”（以及“Saint Petersburg-Kronstadt”或“Petersburg (Alaska)”）。

**编辑：**别名表也可以手动填充频繁的拼写错误 (Petersbourg)、昵称 (Piter)、过时的名称 (Leningrad) 或本地拼写 (Петербу́рг)。

# java - 用于身份验证问题的应用程序范围过滤器

> ID：13513402
> 
> 赞同：0
> 
> 时间：2012-11-22T13:07:46.560
> 
> 标签：java, servlets, servlet-filters

我正在尝试学习过滤器的使用。我通过指定这样的 url-pattern 创建了一个应用程序范围的过滤器：

```
<filter>
    <display-name>AuthenticationFilter</display-name>
    <filter-name>AuthenticationFilter</filter-name>
    <filter-class>learn.filters.AuthenticationFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>AuthenticationFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping> 
```

我已将 welome-file 设置为：

```
<welcome-file-list>
       <welcome-file>/WEB-INF/jsp/home.jsp</welcome-file>
</welcome-file-list> 
```

我的 doFilter 代码如下：

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    HttpServletRequest req=(HttpServletRequest)request;
    HttpServletResponse res=(HttpServletResponse)response;
    String username=(String)req.getSession().getAttribute("username");
    if(username==null && req.getParameter("username")==null){
        req.getRequestDispatcher("/WEB-INF/jsp/login.jsp").forward(request, response);
    }else{
        String user=req.getParameter("username");
        String pass=req.getParameter("password");
        if(user==null){
            req.getRequestDispatcher("/WEB-INF/jsp/home.jsp").forward(request, response);
        }else{
            if(user.equals(pass)){
                req.getSession().setAttribute("username", user);
                res.sendRedirect("home");
            }
        }
    } 
```

此代码工作正常并验证用户，但我的 login.jsp 页面上的任何额外资源（如 js 文件）都不会导入，因为每个请求都会返回登录页面。这意味着如果用户未通过身份验证，我将无法访问我的网络应用程序的任何资源，例如验证码、js、css 文件。请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:11:20.077

过滤器设置为映射到 -everything-。也许您只想将它​​映射到 *.jsp，这样它就不会触发静态资源，如 html 文件、javascript 文件、css 文件、图像等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:21:21.630

在您的 doFilter 方法中添加模式匹配以跳过过滤。

您可以为您的 .js 和 .css 等进行模式匹配并跳过它们。

你也可以检查[一下](https://stackoverflow.com/questions/2521740/java-filter-url-pattern-specific-to-request-params)

# hibernate - Hibernate 和 Maven：无法从资源中解析映射文档

> ID：13513403
> 
> 赞同：1
> 
> 时间：2012-11-22T13:07:47.543
> 
> 标签：hibernate, hibernate-mapping

当我尝试使用 Maven 编译时，出现此错误：

```
INFO: HHH000041: Configured SessionFactory: null
Error creating Session: org.hibernate.InvalidMappingException: Could not parse mapping document from resource com/baskeitor/models/User.hbm.xml 
```

但我看不出错误在哪里：

**用户.java**

包 main.java.com.project.models；

公共类用户实现 java.io.Serializable {

```
private static final long serialVersionUID = 1L;

private Long id;

private String firstName;
private String secondName;
private String email;
private String password;
private Set<Artifact> artifact = new HashSet<Artifact>();

public User(){}

public User(String firstName, String secondName, String email, String password){
    this.firstName = firstName;
    this.secondName = secondName;
    this.email = email;
    this.password = password;
}   

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public Set<Artifact> getArtifacts() {
    return teams;
}

public void setArtifacts(Set<Artifact> artifacts) {
    this.teams = team;
}

public String getFirstName() {
    return firstName;
}

public void setFirstName(String firstName) {
    this.firstName = firstName;
}

public String getSecondName() {
    return secondName;
}

public void setSecondName(String secondName) {
    this.secondName = secondName;
}

public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
} 
```

}

**用户.hbm.xml**

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="com.project.models">
    <class name="User" table="USER">
        <id name="id" column="USER_ID">
            <generator class="native"/>
        </id>
        <property name="firstName"/>
        <property name="secondName"/>
        <property name="email"/>
        <property name="password"/>
    </class>
</hibernate-mapping> 
```

**休眠.cfg.xml**

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <!-- Database connection settings -->
        <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="connection.url">jdbc:mysql://localhost:3306/db</property>
        <property name="connection.username">user</property>
        <property name="connection.password">pass</property>

        <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">1</property>
        <!-- SQL dialect -->
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
        <!-- Enable Hibernate's automatic session context management -->
        <property name="current_session_context_class">thread</property>
        <!-- Disable the second-level cache  -->
        <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
        <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">true</property>        
        <property name="hbm2ddl.auto">create</property>

        <mapping resource="com/project/models/User.hbm.xml"/>

    </session-factory>
</hibernate-configuration> 
```

当 maven 运行测试时我收到此错误，我尝试获取 HibernateUtil.getSessionFactory();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:12:40.017

这里似乎有几个问题，首先，找不到休眠映射文件。奇怪的是，您在 Maven 输出中给出的位置与您在休眠配置中指定的位置不匹配。

你有

```
<mapping resource="com/project/models/User.hbm.xml"/> 
```

但是hibernate抱怨找不到`com/baskeitor/models/User.hbm.xml`。这个值显然是hibernate随意编造的，所以一定要在某个地方设置。尝试使用您喜欢搜索文件的任何工具搜索它。

此外，您的 hibernate-mapping 元素的 package 属性存在问题，它`com.project.models`在您的 hbm 文件中设置，但实际包是`main.java.com.project.models`.

因此，由于您在 hibernate-mapping 元素中指定的包名在映射文档中的非限定类名前面加上前缀，因此类元素中的类名将是 com.project.models.User，这与实际类名。

（在一个侧面节点上，为什么不使用注释？他们觉得使用 imho 更自然）

# java - 用于记录输出的分块 SOAP 消息解析

> ID：13513415
> 
> 赞同：3
> 
> 时间：2012-11-22T13:08:18.097
> 
> 标签：java, parsing, logging, soap, chunked

我有一个使用 EJB3 的 JBoss Web 服务 (5.1) 在我们的 MSSQL 服务器上运行用于 dao 更新/插入的应用程序。

应用程序设置的一部分包括一个自定义 SOAPHandler，它用于从 ByteArray[Output/Input]Stream 中的消息中解析 xml 并将其打印到服务器日志中。

这在大多数情况下都可以正常工作，但最近我们接手了一个正在发送大量数据的新客户，并且由于预算很少（实际上不存在），我必须在旧电脑上运行我们的测试/集成服务（相信我，我不想）。

果然，没多久我就遇到了：

```
 2012-11-21 14:20:40,128 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost]. *removed* -5) Servlet.service() for servlet *MyIface* threw exception
java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2786)
    at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:94)
    at com.sun.xml.bind.v2.runtime.output.UTF8XmlOutput.write(UTF8XmlOutput.java:394)
    at com.sun.xml.bind.v2.runtime.output.UTF8XmlOutput.write(UTF8XmlOutput.java:386)
    at com.sun.xml.bind.v2.runtime.output.UTF8XmlOutput.endTag(UTF8XmlOutput.java:273)
    at com.sun.xml.bind.v2.runtime.output.NamespaceContextImpl$Element.endElement(NamespaceContextImpl.java:493)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.endElement(XMLSerializer.java:310)
    at com.sun.xml.bind.v2.runtime.property.SingleElementNodeProperty.serializeBody(SingleElementNodeProperty.java:152)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:322)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:681)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementNodeProperty.serializeItem(ArrayElementNodeProperty.java:65)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementProperty.serializeListBody(ArrayElementProperty.java:168)
    at com.sun.xml.bind.v2.runtime.property.ArrayERProperty.serializeBody(ArrayERProperty.java:152)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:322)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:681)
    at com.sun.xml.bind.v2.runtime.property.SingleElementNodeProperty.serializeBody(SingleElementNodeProperty.java:150)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:322)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:681)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementNodeProperty.serializeItem(ArrayElementNodeProperty.java:65)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementProperty.serializeListBody(ArrayElementProperty.java:168)
    at com.sun.xml.bind.v2.runtime.property.ArrayERProperty.serializeBody(ArrayERProperty.java:152)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:322)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:681)
    at com.sun.xml.bind.v2.runtime.property.SingleElementNodeProperty.serializeBody(SingleElementNodeProperty.java:150)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:322)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:681)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementNodeProperty.serializeItem(ArrayElementNodeProperty.java:65)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementProperty.serializeListBody(ArrayElementProperty.java:168)
    at com.sun.xml.bind.v2.runtime.property.ArrayERProperty.serializeBody(ArrayERProperty.java:152)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:322)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:681)
    at com.sun.xml.bind.v2.runtime.property.SingleElementNodeProperty.serializeBody(SingleElementNodeProperty.java:150) 
```

有人可以在这里给我一些关于分块解析的提示吗？我已经在其他线程中检查过[这个线程，我的问题听起来与此类似，但我不知道要使用哪种 api/方法。](https://stackoverflow.com/questions/8891019/chunked-parsing-with-fparsec)

这是我的处理程序：

```
@SuppressWarnings("rawtypes")
public class MyHandler extends GenericSOAPHandler {

    private void print(InputStream input, OutputStream out) throws Exception {
        try {
            DocumentBuilder parser;
            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
            factory.setNamespaceAware(true);
            parser = factory.newDocumentBuilder();
            Document document = parser.parse(input);
            Transformer serializer = TransformerFactory.newInstance().newTransformer();
            serializer.setOutputProperty(OutputKeys.INDENT, "yes");
            serializer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "2");
            serializer.transform(new DOMSource(document), new StreamResult(out));
        } catch (TransformerException e) {
            // A fatal error occurred
            throw new Exception(e);
        }
    }

    @Override
    protected boolean handleInbound(MessageContext msgContext) {
        SOAPMessageContext soapMessageCtx = (SOAPMessageContext) msgContext;
        SOAPMessage soapMessage = soapMessageCtx.getMessage();
        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
        try {
            soapMessage.writeTo(outputStream);
            byte[] array = outputStream.toByteArray();
            ByteArrayInputStream inputStream = new ByteArrayInputStream(array);
            System.out.println("SOAP request message:\n");
            print(inputStream, System.out);
        } catch (SOAPException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return true;
    }

    @Override
    protected boolean handleOutbound(MessageContext msgContext) {
        SOAPMessageContext soapMessageCtx = (SOAPMessageContext) msgContext;
        SOAPMessage soapMessage = soapMessageCtx.getMessage();
        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
        try {
            soapMessage.writeTo(outputStream);
            byte[] array = outputStream.toByteArray();
            ByteArrayInputStream inputStream = new ByteArrayInputStream(array);
            System.out.println("SOAP response message:\n");
            print(inputStream, System.out);
        } catch (SOAPException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return true;
    }

} 
```

谢谢

# javascript - 注销而不是刷新ajax调用的信息

> ID：13513419
> 
> 赞同：1
> 
> 时间：2012-11-22T13:08:42.850
> 
> 标签：javascript, ajax, django

我需要自动刷新选择值 onchange country-province-city

看起来很简单，但是当事件发生时，第一次调用注销一些代码：

Javascript：

```
$('#id_province_es').change(function(){
if ($('#id_province_es').val() == 0){
console.info("don't do nothing");
}
else{
var data = $('#id_province_es').val();
console.info(data);
$.ajax({
    type: 'GET',
    url: "/city/"+data,
    dataType: 'json',
    success: function(data) {
    var options = '<option value="">{% trans "Selecciona una ciudad" %}</option>';
    for (var i = 0; i < data.length; i++){
        options += '<option value="'+data[i][0]+'">' +data[i][1] +'</option>'
    }
    $('#id_city_es').html(options)            
},
error: function () { console.error("error al cargar las ciudades")};  
  });}}); 
```

姜戈：

```
def refreshCities(request,province):
    client = WSDL_CLIENT  # Client(settings.WSDL_URL
    data = ""
    try:
        cities = client.service.getCities(province)
        citiesList = []
        for p in cities:
            citiesList.append((p.pkCity, _(p.name)))
    except BaseException as e:
        o4aException = One4allCoreException(e)
        messages.add_message(request, messages.ERROR, o4aException)
    try:
        data = json.dumps(citiesList)
    except BaseException as e:
        pass
    return HttpResponse(data, mimetype="application/javascript") 
```

还有我的 chrome 日志。我做了两次改变。首先注销，然后就ok了

```
[22/Nov/2012 13:21:24] "GET /city/2/ HTTP/1.1" 302 0
[22/Nov/2012 13:23:25] "GET /accounts/logout/ HTTP/1.1" 302 0
[22/Nov/2012 13:23:26] "GET / HTTP/1.1" 302 0
[22/Nov/2012 13:23:26] "GET /accounts/login/?next=/ HTTP/1.1" 200 7399
[22/Nov/2012 13:24:04] "GET /city/2 HTTP/1.1" 301 0
[22/Nov/2012 13:49:58] "GET /city/2/ HTTP/1.1" 200 16 
```

任何想法？

# php - 用于下载文件 php 的标头

> ID：13513420
> 
> 赞同：2
> 
> 时间：2012-11-22T13:08:47.167
> 
> 标签：php, header, download

> **可能重复：**
> [php，文件下载](https://stackoverflow.com/questions/5595485/php-file-download)

我有一些不在 Web 根目录中的文件，我需要提供这些文件以供下载。所以我有一个脚本，它使用以下内容来下载请求的文件。问题是，我下载的每个文件都损坏了？文件没问题，因为如果我使用 FTP 下载，它们就会打开。以下是传递的标头：

```
header($_SERVER["SERVER_PROTOCOL"] . " 200 OK");
        header("Cache-Control: public"); // needed for i.e.
        header("Content-Type: " . $download[0]['mime']);
        header("Content-Disposition: attachment; filename=" .$download_file);
        header("Content-Transfer-Encoding: Binary");
        header("Content-Length:".filesize($attachment_location));

        readfile($attachment_location); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T13:10:24.837

这是用于此的标头示例：http:
[//php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)

```
 header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file)); 
```

# android - 7zip 库是否有 Android 端口？

> ID：13513426
> 
> 赞同：0
> 
> 时间：2012-11-22T13:09:05.467
> 
> 标签：android, compression, 7zip

我正在考虑移植它，如果还没有可用的话。谷歌搜索产生了一个结果，但那个端口不完整，也没有编译......如果这个库已经存在一个 android 端口，那么我不想在它上面花费不必要的努力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-22T18:15:46.960

# android - android 4.0.3 模拟器方向。漏洞？还是我的系统故障？

> ID：13513431
> 
> 赞同：4
> 
> 时间：2012-11-22T13:09:25.337
> 
> 标签：android, emulation

就在今天，我下载了带有 eclipse 和 sdk 的“adt-bundle-windows-x86”。这真的很棒。但是当我创建了 android 模拟器时：GOOGLE_API 4.0.3; 我有这个：

![这就是模拟器在 Windows 32 上的样子](../Images/67560a736b94d57fc71862d707cbcf4e.png)

按 CNTRL + F11 后，我得到： ![方向改变](../Images/9c634b456b4f7321ef35a51fe9ff5a91.png)

有什么问题？我的操作系统有问题吗？我该如何修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:58:42.957

我找到了原因。我采用选择“HVGA”。但现在不仅仅是“HVGA”，而是“HVGA 滑块”。这就是为什么方向是这样的。现在我们应该使用“QVGA”对不起这是我的错误。感谢所有答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:25:02.240

尝试在程序开始时使用此代码：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

还将其添加到您的清单文件中（在活动下）：

```
 android:configChanges = "orientation" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:13:09.163

尝试按 CTRL + F11 向后旋转。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T13:18:19.390

我有同样的问题，但大多数时候我必须重新启动模拟器。

# python - 转到while循环的某个部分

> ID：13513432
> 
> 赞同：-1
> 
> 时间：2012-11-22T13:09:25.913
> 
> 标签：python, while-loop

我做了一个小猜数游戏，如果你愿意，我已经让它重新启动。但是它通过回到开头并再次询问“myname”来重新启动，我怎样才能让它回到它想到一个数字的位置，并从第一次记住我的名字？

```
import random
restart = '1'
def main():
    guessestaken = 0

    print ('Hello, what is your name?')
    myname = raw_input()

    number = random.randint(1, 50)
    print ('Okay ' + myname + ', I am thinking of a number between 1 and 50\. You have 5 guesses.')

    while guessestaken < 5:
        print ('Take a guess.')
        guess = input()
        guess = int(guess)

        guessestaken = guessestaken + 1

        if guess < number:
            print ('Your guess is too low.')

        if guess > number:
            print ('Your guess is too high.')

        if guess == number:
            break

    if guess == number:
        guessestaken = str(guessestaken)
        print ('Good job ' + myname + ', you got the correct answer in ' + guessestaken + ' guesses')

    if guess != number:
        number = str(number)
        print ('Oh dear ' + myname + ', the number I was thinking of was ' + number + '.')

while restart == '1':
    main()
    restart = raw_input('Would you like to try again? Press 1 for Yes, and 2 for No: ') 
```

此刻它再次询问我的名字。我的意思是，它是功能性的，只是烦人。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:11:55.630

你可以简单地移动

```
print ('Hello, what is your name?')
myname = raw_input() 
```

在`main()`函数之前，所以它只会运行一次。

您还需要在函数中使用`raw_input()`而不是 。`input()``main()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:12:02.027

最简单的方法是在函数之外询问名称`main()`，然后为每个游戏传递它。从技术上讲，您不必传入它（python 仍然可以访问该变量），但这样做是更好的做法。

```
def main(myname):
    # Remove the name prompt from here

...

print ('Hello, what is your name?')
myname = raw_input()

while restart == '1':
    main(myname)
    restart = raw_input('Would you like to try again? Press 1 for Yes, and 2 for No: ') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:12:29.773

一个简单的解决方法是在`myname`之外进行初始化，方法是在 .下方`main`放置. 然后，如果他的名字未知，只询问玩家的名字，即：`myname = ''``restart = '1'`

```
if myname == '':
    print ('Hello, what is your name?')
    myname = raw_input() 
```

# functional-programming - 如何高效地学习 OCaml？

> ID：13513435
> 
> 赞同：13
> 
> 时间：2012-11-22T13:09:38.870
> 
> 标签：functional-programming, ocaml

好的，我是一个没有任何函数式编程知识的 Java 程序员。

现在我已经学习了 2 周的 OCaml，我什至对 OCaml 都一无所知。

这里推荐了几本教程和书籍：

[https://stackoverflow.com/questions/2073436/ocaml-resources](https://stackoverflow.com/questions/2073436/ocaml-resources)

但他们似乎都不友好。真的，我是认真的。

**至少**没有任何**`Hello World`教程或书籍能让我快速入门。两周后，我什至不知道`program entrance`Ocaml 是什么（比如 a `main()`）。**

 **我什至不知道如何真正将 OCaml 代码写入文件，并以某种方式让 OCaml 编译它。

好了，投诉完毕。

我必须学习并做好。那么，你能给我一些学习它的建议吗？我觉得 OCaml 非常晦涩难懂。**请赐教我的道路。**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T13:21:40.180

您尝试[过 TryOCaml](http://try.ocamlpro.com/)网站吗？这可能是一个好的开始。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-22T13:26:55.150

我第一次遇到 OCaml 是在 4 年前，我需要为大学现有学生的项目添加一些小功能。我从 [OCaml 教程](http://mirror.ocamlcore.org/ocaml-tutorial.org/)开始，我了解这种语言有多棒。然后我尝试用 OCaml 编写或多或少的大程序，并开始向社区提问。根据我的经验，我认为你需要同样的东西。选择一个最喜欢的编程领域（网络、unix 工具、图形和游戏、桌面应用程序），选择一个对于您的第一个应用程序来说不太大或不太复杂的项目。我认为 OCaml 社区可以帮助您做出决定。你可以在邮件列表中找到他们，但我更喜欢 Freenode IRC 服务器。然后只需编写一些代码，如果有什么奇怪的地方问！

最好的祝愿，卡卡杜

PS 我希望 OCaml 将成为您的下一个大爱，就像我们中的许多人一样。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-22T15:08:57.087

**根据我的个人经验，我发现充分了解 λ 演算为学习任何**函数式语言提供了一个很好的入口（平台） 。但话又说回来，这就是我被介绍给函数式编程的方式，所以我无法将它与其他方法进行比较。

您可以从[本教程](http://www.cs.bham.ac.uk/~axj/pub/papers/lambda-calculus.pdf)中很好地介绍 λ 演算。但是，它需要一点数学思维，并且可能太无聊而无法自学。从大学学习 λ 演算或函数式编程基础的模块是理想的。

但是请注意，λ-演算主要`functions`只讨论方面。但是一旦你理解了计算的函数式方法，语言的其余部分应该很容易处理（至少我是这么认为的）。

不知道我是帮助还是让它更混乱。**

# c# - 节目中的表情包

> ID：13513437
> 
> 赞同：1
> 
> 时间：2012-11-22T13:09:55.203
> 
> 标签：c#, .net, winforms

我刚刚用 C# 制作了一个 winform 聊天客户端。

我想知道是否有任何方法可以在程序中插入表情符号。

在这件事上的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:13:45.190

使用 ImageList 并将您的表情符号图片放入其中

[http://msdn.microsoft.com/en-en/library/system.windows.forms.imagelist.aspx](http://msdn.microsoft.com/en-en/library/system.windows.forms.imagelist.aspx)

然后，只要键入“:-)”等组合，您就可以在文本框上使用 KeyDown 事件插入某些笑脸图像

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown.aspx)

希望我能帮助你

# vim - 如何将当前目录放入vim命令行

> ID：13513438
> 
> 赞同：4
> 
> 时间：2012-11-22T13:10:00.820
> 
> 标签：vim

我想调用 VCSStatus 函数，将当前工作目录（无论`:pwd`返回什么）传递给它。它必须是完整路径，并且没有特殊字符，例如“。” 被接受。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T13:40:47.887

```
:execute 'VCSStatus' getcwd() 
```

应该做的伎俩。如果您希望改用当前文件的目录，则为：

```
:execute 'VCSStatus' expand('%:p:h') 
```

(`%`引用当前文件，`:p`修改为完整的绝对路径，并`:h`切断文件名；cp. `:help filename-modifiers`)

# winforms - 获取 SizeableToolWindow .NET 表单的标题栏高度

> ID：13513442
> 
> 赞同：1
> 
> 时间：2012-11-22T13:10:24.003
> 
> 标签：winforms, forms, height, titlebar, formborderstyle

我已经写过[https://stackoverflow.com/questions/13396293/getting-correct-winforms-forms-border-width-when-changeing-formborderstyle-from](https://stackoverflow.com/questions/13396293/getting-correct-winforms-forms-border-width-when-changing-formborderstyle-from)那个 .NET WindowsForms 包在计算边框大小方面存在一些问题。现在我需要知道如何在 FormBorderSize 属性设置为“SizableToolWindow”的情况下检索表单标题栏部分的高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:15:12.263

我计算任何形式的标题栏高度，使用以下对普通形式或 SizableToolWindow 有效：

```
Rectangle screenRectangle = RectangleToScreen(this.ClientRectangle);
int titleHeight = screenRectangle.Top - this.Top; 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:23:22.507

抱歉，在问之前似乎忽略了托管工具中的这个东西：

```
SystemInformation.ToolWindowCaptionHeight 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-28T11:10:21.957

这是我在winform中查找标题栏高度的方法。这也适用于隐藏表单时。代码是 VB.NET。

```
Dim TitlebarHeight as Integer = (Me.Height - Me.ClientSize.Height) 
```

# linux - 多任务限制应用程序

> ID：13513447
> 
> 赞同：1
> 
> 时间：2012-11-22T13:10:50.320
> 
> 标签：linux, window

我想制作一个 window/unix/linux 应用程序，除非它被关闭，否则它不允许访问其他应用程序。简而言之，该应用程序不允许多任务处理。如果可能的话，请告诉我我可以编码的语言和所有其他有用的信息。

# url - GWT 真实与重定向 URL

> ID：13513452
> 
> 赞同：0
> 
> 时间：2012-11-22T13:11:09.533
> 
> 标签：url, gwt, redirect

我有一个 OVH 托管的应用程序`http://ovhserver/myapp/`

此应用程序也可通过[http://anyUser.domain.com](http://anyUser.domain.com)访问。我通过将 *.domain.com 重定向到`http://ovhserver/myapp/`

浏览器显示`http://[anyUser].domain.com`. 但是当我尝试使用 GWT 阅读它时，我只得到了真正的地址 ( `http://ovhserver/myapp/`)。

[anyUser] 是对活动帐户的引用；如果您创建一个帐户 X，我的应用程序将可以通过`http://X.domain.com`.

我尝试使用 GWT.getHostPageBaseURL()、Window.Location.getHref() 和 Window.Location.getPath()，但徒劳无功。

我想在浏览器中阅读“显示”的 URL。我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:41:05.440

这不是*重定向*，很可能是在框架中`anyUser.domain.com`加载。`ovhserver/myapp`您可以尝试`$wnd.top.location.href`在 JSNI 方法中使用，但我不确定您是否可以访问它（因为它是跨域访问）。

您真的应该尝试设置一个*真正*的域/托管，它不会花费太多，并且会为您省去许多*框架*无疑会造成的麻烦。

# python - 从距离矩阵中绘制图形或网络？

> ID：13513455
> 
> 赞同：28
> 
> 时间：2012-11-22T13:11:18.830
> 
> 标签：python, graph, plot, social-networking

我正在尝试绘制/草图（matplotlib 或其他 python 库）一个大距离矩阵的二维网络，其中距离将是草图网络的边缘以及其节点的线和列。

```
DistMatrix =
[       'a',   'b',     'c',    'd'],
['a',   0,      0.3,    0.4,    0.7],
['b',   0.3,    0,      0.9,    0.2],
['c',   0.4,    0.9,    0,      0.1],
['d',   0.7,    0.2,    0.1,    0] ] 
```

我正在搜索从这样的（更大：千列和线）距离矩阵中绘制/绘制二维网络：节点'a'通过边缘深度0.3链接到节点'b'，节点'c'和'd ' 将由 0.1 的边缘深度绑定。我可以使用哪些工具/库（距离矩阵可以转换为 numpy 矩阵）来获取此类网络的草图/图形投影？（熊猫，matplotlib，igraph，...？）和一些导致快速做到这一点（我不会定义我自己的 Tkinter 函数来做到这一点;-)）？感谢您收到的答案。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-22T14:05:51.270

[graphviz](http://www.graphviz.org/)程序`neato` *试图*尊重边长。[doug 展示了一种](https://stackoverflow.com/a/1898456/190597)利用[networkx](http://networkx.lanl.gov)`neato`的方法，如下所示：

```
import networkx as nx
import numpy as np
import string

dt = [('len', float)]
A = np.array([(0, 0.3, 0.4, 0.7),
               (0.3, 0, 0.9, 0.2),
               (0.4, 0.9, 0, 0.1),
               (0.7, 0.2, 0.1, 0)
               ])*10
A = A.view(dt)

G = nx.from_numpy_matrix(A)
G = nx.relabel_nodes(G, dict(zip(range(len(G.nodes())),string.ascii_uppercase)))    

G = nx.drawing.nx_agraph.to_agraph(G)

G.node_attr.update(color="red", style="filled")
G.edge_attr.update(color="blue", width="2.0")

G.draw('/tmp/out.png', format='png', prog='neato') 
```

产量

![在此处输入图像描述](../Images/a6f217e7f904316177dd5fa1faea0287.png)

* * *

如果要生成点文件，可以使用

```
G.draw('/tmp/out.dot', format='dot', prog='neato') 
```

产生

```
strict graph {
    graph [bb="0,0,226.19,339.42"];
    node [color=red,
        label="\N",
        style=filled
    ];
    edge [color=blue,
        width=2.0
    ];
    B    [height=0.5,
        pos="27,157.41",
        width=0.75];
    D    [height=0.5,
        pos="69,303.6",
        width=0.75];
    B -- D   [len=2.0,
        pos="32.15,175.34 40.211,203.4 55.721,257.38 63.808,285.53"];
    A    [height=0.5,
        pos="199.19,18",
        width=0.75];
    B -- A   [len=3.0,
        pos="44.458,143.28 77.546,116.49 149.02,58.622 181.94,31.965"];
    C    [height=0.5,
        pos="140.12,321.42",
        width=0.75];
    B -- C   [len=9.0,
        pos="38.469,174.04 60.15,205.48 106.92,273.28 128.62,304.75"];
    D -- A   [len=7.0,
        pos="76.948,286.17 100.19,235.18 167.86,86.729 191.18,35.571"];
    D -- C   [len=1.0,
        pos="94.274,309.94 100.82,311.58 107.88,313.34 114.45,314.99"];
    A -- C   [len=4.0,
        pos="195.67,36.072 185.17,90.039 154.1,249.6 143.62,303.45"];
} 
```

`png`然后可以使用以下`graphviz` `neato`程序生成该文件：

```
neato -Tpng -o /tmp/out.png /tmp/out.dot 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-22T13:41:25.003

您可以使用 networkx 包，它可以完美地解决此类问题。调整矩阵以删除一个简单的 numpy 数组，如下所示：

```
DistMatrix =array([[0,      0.3,    0.4,    0.7],
[0.3,    0,      0.9,    0.2],
[0.4,    0.9,    0,      0.1],
[0.7,    0.2,    0.1,    0] ]) 
```

然后导入networkx并使用它

```
import networkx as nx
G = G=nx.from_numpy_matrix(DistMatrix)
nx.draw(G) 
```

如果要绘制图形的加权版本，则必须指定每条边的颜色（至少，我找不到更自动化的方法）：

```
nx.draw(G,edge_color = [ i[2]['weight'] for i in G.edges(data=True) ], edge_cmap=cm.winter ) 
```

# ruby-on-rails - Rails 将链接转换为引导按钮

> ID：13513457
> 
> 赞同：6
> 
> 时间：2012-11-22T13:11:22.743
> 
> 标签：ruby-on-rails, twitter-bootstrap

我已经使用我视图中的链接构建了一些对索引页面进行排序的代码。这适用于链接，工作代码是这样的：

```
<p>
  <%= link_to "Sentence", :controller => params[:controller], :action => params[:action], :type => '1', :class => "btn" %>
  <%= link_to "Question", :controller => params[:controller], :action => params[:action], :type => '2', :class => "btn" %>
  <%= link_to "Mnemonic", :controller => params[:controller], :action => params[:action], :type => '3', :class => "btn"  %>
  <%= link_to "Article", :controller => params[:controller], :action => params[:action], :type => '4', :class => "btn"  %>
  <%= link_to "Recommendation", :controller => params[:controller], :action => params[:action], :type => '5', :class => "btn"  %>
</p> 
```

我想使用一个按钮组，并使用纯 HTML 的 Twitter Bootstrap 构建了这个示例：

```
<div class="btn-group">
  <button class="btn">Sentence</button>
  <button class="btn">Question</button>
  <button class="btn">Mnemonic</button>
  <button class="btn">Article</button>
  <button class="btn">Recommendation</button>
</div> 
```

我无法将链接转换为按钮行。我尝试了各种样式选项以及尝试使用**button_to**。理想情况下，我想进一步设置按钮的样式，以便当前选择的按钮与其他按钮颜色不同。

**编辑**

按照建议输出 HTML：

```
<div class="btn-group">
  <a href="/dialog_catagories?class=btn&amp;type=1">Sentence</a>
  <a href="/dialog_catagories?class=btn&amp;type=2">Question</a>
  <a href="/dialog_catagories?class=btn&amp;type=3">Mnemonic</a>
  <a href="/dialog_catagories?class=btn&amp;type=4">Article</a>
  <a href="/dialog_catagories?class=btn&amp;type=5">Recommendation</a>
</div> 
```

btn-group 出于某种原因阻止按钮在页面上呈现，即使它位于 html 中。

**编辑 2**

根据 Varun 的回答，HTML 代码：

```
<div class="btn-group">
  <a href="/dialog_catagories?html%5Bclass%5D=btn&amp;type=1">Sentence</a>
  <a href="/dialog_catagories?html%5Bclass%5D=btn&amp;type=2">Question</a>
  <a href="/dialog_catagories?html%5Bclass%5D=btn&amp;type=3">Mnemonic</a>
  <a href="/dialog_catagories?html%5Bclass%5D=btn&amp;type=4">Article</a>
  <a href="/dialog_catagories?html%5Bclass%5D=btn&amp;type=5">Recommendation</a>
</div> 
```

**解决方案**

@Varun 建议的答案最终奏效了：

```
<div class="btn-group">
  <%= link_to "Sentence", "?type=1", :class => "btn" %>
  <%= link_to "Question", "?type=2", :class => "btn" %>
</div> 
```

我有点不清楚该功能是如何工作的，因为以下内容没有被明确传递：

```
:controller => params[:controller], :action => params[:action] 
```

但它工作正常。谢谢你。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-22T13:57:29.643

尝试这个：

```
<div class="btn-group">
  <%= link_to "Sentence", :controller => params[:controller], :action => params[:action], :type => '1', :html => { :class => "btn" } %>
  <%= link_to "Question", :controller => params[:controller], :action => params[:action], :type => '2', :html => { :class => "btn" } %>
  <%= link_to "Mnemonic", :controller => params[:controller], :action => params[:action], :type => '3', :html => { :class => "btn" } %>
  <%= link_to "Article", :controller => params[:controller], :action => params[:action], :type => '4', :html => { :class => "btn" }  %>
  <%= link_to "Recommendation", :controller => params[:controller], :action => params[:action], :type => '5', :html => { :class => "btn" } %>
</div> 
```

**编辑**

尝试这个：

```
<div class="btn-group">
  <%= link_to "Sentence", "?type=1", :class => "btn" %>
  <%= link_to "Question", "?type=2", :class => "btn" %>
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-13T18:15:55.363

我仍在使用 Rails 2 并且 html=> { :class => :btn } 对我不起作用。

我这样做了，它渲染/工作得很好

```
 <div class="btn-group">
          <%= link_to "Pool my Order", 
             {:controller => :purchasing, :action => :search_for_salesdoc,
              :sold_to_number => sold_to, doc_number => @cart.doc_number, 
              :search_option => :pool},
             :class => "btn btn-success align-center" %>
        </div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T13:24:33.540

您的第一个代码有什么问题，但将 p 转换为 a ？Bootstrap 链接的样式可以像带有类 'btn' 的按钮

```
<div class="btn-group">
  <%= link_to "Sentence", :controller => params[:controller], :action => params[:action], :type => '1', :class => "btn" %>
  <%= link_to "Question", :controller => params[:controller], :action => params[:action], :type => '2', :class => "btn" %>
  <%= link_to "Mnemonic", :controller => params[:controller], :action => params[:action], :type => '3', :class => "btn"  %>
  <%= link_to "Article", :controller => params[:controller], :action => params[:action], :type => '4', :class => "btn"  %>
  <%= link_to "Recommendation", :controller => params[:controller], :action => params[:action], :type => '5', :class => "btn"  %>
</div> 
```

这应该是世界.. 进行选择检测也不是那么难，只需在 link_to 中添加一个检查：

```
 <%= link_to "Recommendation", :controller => params[:controller], :action => params[:action], :type => '5', :class => selected? ? "btn btn-primary" : "btn"  %> 
```

你仍然需要以某种方式实现选定的？帮手，但我想你可以解决这个问题。

*更新*：似乎你的 link_to 助手是问题，因为你使用控制器，在那里操作。我认为您的 link_to 方法的正确方法是：

```
link_to "Sentence", :controller => :foo, :action => :bar, :html => { :class => :btn } 
```

# android - 蓝牙不安全的连接就像一个环回？

> ID：13513462
> 
> 赞同：3
> 
> 时间：2012-11-22T13:11:35.393
> 
> 标签：android, bluetooth, insecure-connection

我正在开发一个 Android 蓝牙应用程序，旨在通过我们创建的设备使用蓝牙说话，我成功地在大多数设备上运行 Android 3+，但似乎 android 2.3.x（这是我们的最低要求）没有像其他人一样行事。我还在华为 Ascend P1 上重现了相同的行为。

发生的情况是，在 Android 端，一切正常，我连接到设备，如果我没有配对，则会发出配对请求，我同时检索输入和输出，但是当我使用它们时，它们的行为就像我在自言自语一个环回。在输出流上写入的所有内容都在输入流上读取。当然，设备什么也看不到（似乎它甚至不知道连接了安卓手机）。

以下是来自我的源代码的一些代码示例（其中大部分与 android 文档中的描述完全相同）：

**连接螺纹：**

```
 private class ConnectThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final BluetoothDevice mmDevice;

    public ConnectThread(BluetoothDevice device) {
        // Use a temporary object that is later assigned to mmSocket,
        // because mmSocket is final
        btSpeaking = true;
        BluetoothSocket tmp = null;
        mmDevice = device;
        // Get a BluetoothSocket to connect with the given BluetoothDevice
        try {
            tmp = device.createInsecureRfcommSocketToServiceRecord(BluetoothUuid.declareUuid.getUuid());
        } catch (IOException e) { }
        mmSocket = tmp;
    }

    public void run() {
        try {
            // Connect the device through the socket. This will block
            // until it succeeds or throws an exception
            mmSocket.connect();
        } catch (IOException connectException) {
            // Unable to connect; close the socket and get out
            try {
                mmSocket.close();
            } catch (IOException closeException) { }
            return;
        }

        // Do work to manage the connection (in a separate thread)
        mConnected = new ConnectedThread(mmSocket);
        mConnected.start();
    }

    /** Will cancel an in-progress connection, and close the socket */
    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) { }
    }
} 
```

**阅读线程：**

```
private class ConnectedThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket) {
        mmSocket = socket;
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        // Get the input and output streams, using temp objects because
        // member streams are final
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) {
            WSLog.e(tag, e.getMessage(), e);
        }

        mmInStream = tmpIn;
        mmOutStream = tmpOut;
    }

    public void run() {
            try {
                writeSocket(RESET, empty);
            } catch (IOException e1) {
                return;
            }

            // Keep listening to the InputStream until an exception occurs
            while (true) {
                try {
                                              for (int size = 0; size < framesize;) {
                        int read = mmInStream.read(frame, size, frame.length - size);
                        if (read < 0) {
                            return;
                        }
                        size = size + read;
                    }
                } catch (IOException e) {
                    return;
                }
            }

    } 
```

**写套接字：**

```
private void writeSocket(byte comm, byte[] data) throws IOException {
        ByteBuffer bf = ByteBuffer.allocate(1 + data.length);
        bf.put(PROTO);
        bf.put(comm);
        bf.put(data);
        mmOutStream.write(bf.array());
    } 
```

我真的希望我没有做明显错误的事情，但由于我不明白为什么它不起作用，我别无选择，只能寻求帮助。

谢谢，马丁

# controller - MVC 4：将选定的下拉框值返回给控制器

> ID：13513464
> 
> 赞同：2
> 
> 时间：2012-11-22T13:11:36.673
> 
> 标签：controller, asp.net-mvc-4, dropdownbox

我有一个关于如何将选定的下拉框值返回给控制器的问题。

问题是我使用了两种不同的模型。我会尽力解释。

对于这个用例，我在数据库中使用以下实体：项目和课程。项目具有许多属性和导航属性。导航属性之一是课程。

在视图中，它显示了数据库中所有现有课程的下拉框。所以我想做的是选择一门课程，然后将其添加到项目中。（使用它的 ID）但我不知道如何将选定的值返回给控制器。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:52:36.793

在您看来，您只需输入以下代码：

```
@model Projects

@Html.DropDownListFor(m => m.CourseID, new SelectList(ViewBag.Courses, "CourseID", "CourseName")) 
```

你只需要`CourseID`在你的模型中有一个字段`Projects`和一个这样的控制器来处理表单：

```
[HttpPost]
public ActionResult(Projects projects) {
    // Here you have projects.CourseID filled with the correct value
} 
```

# jquery - Jquery Fullscreen API 不同的图像

> ID：13513465
> 
> 赞同：-1
> 
> 时间：2012-11-22T13:11:39.313
> 
> 标签：jquery, fullscreen

我正在尝试全屏显示与单击的图像不同的图像。我想全屏显示 gif，而不是 png。这是使用的代码

```
$('img#pic01').click(function() {
    var png = $(this).attr("src");
    var gif = png.split("png");
    var element = gif[0]+"gif";
    $('img#pic01').attr("src", "element");
    if (screenfull.enabled) {
        // We can use `this` since we want the clicked element
        screenfull.toggle(this);
    }
});

<a href="#" class="thumbnail">
    <img src="<?php echo base_url().'assets/img/animation01.png' ?>"
        alt="Abertura normal das vias Respiratórias" id="pic01">
</a> 
```

提前致谢

更新

这就像一个魅力......我的坏处是错过了var点..现在我需要在退出时将属性放回png，否则退出全屏后会出现gif，而不是png。

像这样的东西

```
$('img#pic01').click(function() {
    var png = $(this).attr("src");
    var gif = png.split("png");
    var element = gif[0]+"gif";
    $('img#pic01').attr("src", element);
    if (screenfull.enabled) {
        // We can use `this` since we want the clicked element
        screenfull.toggle(this);
    }
    if (screenfull.exit) {
        var gif_ = $(this).attr("src");
        var png_ = gif_.split("gif");
        var element_ = png_[0]+"png";
        $('img#pic01').attr("src", element_);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:09:57.300

为了使您的示例有效，您可能应该更改

```
$('img#pic01').attr("src", "element"); 
```

至

```
$('img#pic01').attr("src", element); 
```

引号当前意味着您将图像源更改为文本“元素”而不是变量的值。

更新

在回答你的新问题时，你应该使用 screenfull.onchange 因为 screenfull.exit 是一个退出全屏的函数。我在下面添加了一个示例。我还整理了不必要的“img#pic01”的重复使用。

```
$('img#pic01').click(function() {
    var png = $(this).attr("src");
    var gif = png.split("png");
    var element = gif[0]+"gif";
    var _obj = $(this);
    _obj.attr("src", element);

    if (screenfull.enabled) {
        // We can use `this` since we want the clicked element
        screenfull.toggle(this);
    }

    // Set the callback function that is called when screenfull changes state
    screenfull.onchange = function() {
        // Back to the normal page state
        if(!screenfull.isFullscreen) {
            _obj.attr("src", png);
        }
    };
}); 
```

# php - 如何在 cakephp 中验证关联模型

> ID：13513469
> 
> 赞同：3
> 
> 时间：2012-11-22T13:11:56.217
> 
> 标签：php, cakephp

你好可以告诉我。如何验证 cakephp 中的关联模型？我在一个控制器中使用多个模型，控制器名称是“AdminsController”。这些是 AdminsController 中的模型

```
$uses=array('index','Static_page_view','Admin','Categories','Products', 'contact','User','Rams');' 
```

现在我想验证“类别”（模型）。我已经定义了一组验证规则。但不能验证。当我使用“管理员”（模型）时，它可以完美运行。

```
<?php        
class AdminsController extends AppController {    

  public $uses=array('index','Static_page_view','Admin','Categories','Products', 'contact','User','Rams'); 

public function index()
    {       
    if(!empty($this->request->data)) //this checks if the form is being submitted and is not empty  
        {

            if($this->Admin->save($this->request->data))//this saves the data from the form   and also return true or false 
                {
                    $this->Session->setFlash('The post was successfully added!');
                    $this->redirect(array('action'=>'index'));
                } 
            else
                {
                    $this->Session->setFlash('The post was not saved, please try again');
                } 
```

}

```
public function Add_Category()

{

if(!empty($this->request->data)) //this checks if the form is being submitted and is not empty
{

        if($this->Rams->save($this->request->data))//this saves the data from the form   and also return true or false
        {
            $this->Session->setFlash('The post was successfully added!');
            $this->redirect(array('action'=>'Add_Category'));
        }
        else
        {
            $this->Session->setFlash('The post was not saved, please try again');
        }

}
}
    } 
```

\app\Model\Admin

```
 <?php
    class Admin extends AppModel {

     public $validate = array( ['Admin'] => array(
            'name'=>array(
                'title_must_not_be_blank'=>array(
                    'rule'=>'notEmpty',
                    'message'=>'Please Enter your Name!'
                )
                ),
            'email'=>array(
                'body_must_not_be_blank'=>array(
                    'rule'=>'notEmpty',
                    'message'=>'Please Enter your Email!'
                )
            ),
            'phone'=>array(
                    'body_must_not_be_blank'=>array(
                            'rule'=>'notEmpty',
                            'message'=>'Please Enter your phone!'
                    )
            ),
            'query'=>array(
                    'body_must_not_be_blank'=>array(
                            'rule'=>'notEmpty',
                            'message'=>'Please Enter your Query!'
                    )
            )
        ));
    }

\app\Model\categories

<?php 
class Categories extends AppModel { 

 public $validate = array(
        'name'=>array(
            'title_must_not_be_blank'=>array(
                'rule'=>'notEmpty',
                'message'=>'Please Enter your Name!'
            )
            ),
        'email'=>array(
            'body_must_not_be_blank'=>array(
                'rule'=>'notEmpty',
                'message'=>'Please Enter your Email!'
            )
        ),
        'phone'=>array(
                'body_must_not_be_blank'=>array(
                        'rule'=>'notEmpty',
                        'message'=>'Please Enter your phone!'
                )
        ),
        'query'=>array(
                'body_must_not_be_blank'=>array(
                        'rule'=>'notEmpty',
                        'message'=>'Please Enter your Query!'
                )
        )
    );
}

    \app\View\admins\index.ctp

<h2>Add a Post</h2>
<?php
echo json_encode($this->validationErrors);

//<!--create the form 2parameter:the post model and the 2nd is the form is submitted to which action-->
echo $this->Form->create('Admin', array('action'=>'index'));
echo $this->Form->input('name');//<!--We have not specified the field so type becomes text as the according to the database field type-->
echo $this->Form->input('email');
echo $this->Form->input('phone');
echo $this->Form->input('query');//<!--We have not specified the field so type becomes textarea as the according to the database field type-->
echo $this->Form->end('Create a Post');//<!--ends the form and create the text on button the same as specified-->
?>

\app\View\admins\category.ctp

<head>
<title>Admin Panel</title>
</head>

<body>
<div id="container">
<?php echo $this->element("header"); ?>
<div id="content">
<?php echo $this->element("left-content"); ?>
<div id="right-content">
<div id="upper">
<h3>Add SubCategory</h3>
</div><!---upper end--->

<?php 
echo $this->Form->create('Admin', array('class' => "righform"));
$options = array(); 
?>
<fieldset class="textbox">
<label class="cate"><span>Main Category :</span>
<select name="parentId">
<?php foreach($name as $row){?>
<option value="<?php echo $row['Categories']['id'];?>"><?php echo $row['Categories']['name']; ?></option>
<?php } ?>
</select>
</label>
<br /><br /><br />
<label class="cate">
<?php echo $this->Form->input('name'); ?>
<br /><br /><br />
<label class="cate1">
<?php echo $this->Form->input('Description'); ?>
<br /><br /><br />
<br /><br /><br />

<td><button class="button" type="submit">Submit</button></td>   
</fieldset>
</form>
</div>
</div><!---main content end--->
</div><!----content end---->
<?php echo $this->element("footer"); ?>
</div><!---container end---->
</body>
</html> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:43:21.093

如果您的模型通过关系连接，假设管理员与类别有 OnetoOne/manytomany/onetomany 关系

你可以通过

```
$this->Admin->Category->saveAll(array('validate'=> 'only')); // pass 'only' string not only 
```

或者，如果您想使用与默认模型无关的任何模型，则只需先将其加载到当前控制器上，然后对其进行验证，假设类别与当前模型无关，然后简单

```
$this->loadModel('category');
$this->category->set($this->data);
$this->category->saveAll(array('validate'=> 'only')); 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:21:50.277

您可以使用 Multivalidatable 行为。

[http://bakery.cakephp.org/articles/dardosordi/2008/07/29/multivalidatablebehavior-using-many-validation-rulesets-per-model](http://bakery.cakephp.org/articles/dardosordi/2008/07/29/multivalidatablebehavior-using-many-validation-rulesets-per-model)

# wpf - 从 PasswordBox 获取密码

> ID：13513472
> 
> 赞同：2
> 
> 时间：2012-11-22T13:12:01.350
> 
> 标签：wpf, mvvm, passwordbox, securestring

我在 SO 找到了关于这个问题的一些信息，但不知何故我并没有真正得到它;-) 根据我的阅读，由于安全原因，PasswordBox 的密码不能绑定到属性，即保留纯密码在记忆中。

我的模型包含这个：

```
private SecureString password;
public SecureString Password {
  get { return password; }
  set { password = value; }
} 
```

*虽然不支持将数据绑定到 PasswordBox，但*Microsoft 必须知道如何从 PasswordBox 获取密码并以安全的方式使用它，嗯？

什么是合适且相对简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-07T10:02:56.880

因此，我写了一个`UserControl`带有可绑定密码的 - `SecureString`。这个代码`UserControl`看起来像：

**代码隐藏：**

```
public partial class BindablePasswordBox : UserControl
    {
        public static readonly DependencyProperty SecurePasswordProperty = DependencyProperty.Register(
           "SecurePassword", typeof(SecureString), typeof(BindablePasswordBox), new PropertyMetadata(default(SecureString)));

        public SecureString SecurePassword
        {
            get { return (SecureString)GetValue(SecurePasswordProperty); }
            set { SetValue(SecurePasswordProperty, value); }
        }

        public BindablePasswordBox()
        {
            InitializeComponent();
        }

        private void PasswordBox_OnPasswordChanged(object sender, RoutedEventArgs e)
        {
            SecurePassword = ((PasswordBox)sender).SecurePassword;
        }

        private void BindablePasswordBox_OnGotFocus(object sender, RoutedEventArgs e)
        {
            passwordBox.Focus();
        }
    } 
```

**XAML：**

```
<UserControl x:Class="Sol.Controls.BindablePasswordBox"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" d:DesignHeight="300" d:DesignWidth="300"
             GotFocus="BindablePasswordBox_OnGotFocus">
    <PasswordBox x:Name="passwordBox" PasswordChanged="PasswordBox_OnPasswordChanged"/>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T09:54:33.293

```
<PasswordBox Height="29" HorizontalAlignment="Left" Margin="191,136,0,0" Name="textPassword" VerticalAlignment="Top" PasswordChar="*" Width="167" /> 
```

密码箱的名称是`textPassword`：

```
String pass = textPassword.Password; 
```

# javascript - jQuery：访问具有特定日期和文本的数字字符串的总和

> ID：13513475
> 
> 赞同：5
> 
> 时间：2012-11-22T13:12:13.850
> 
> 标签：javascript, jquery, string, sum

我有这个字符串：

```
var result = " / 07-09-2012 73 ABC / 11-09-2012 195 DEF/ 03-09-2012 95 / 04-09-2012 188 ABC / 31-10-2012 72 / 18-09-2012 205 / 26-09-2012 244 ABC / 14-09-2012 86 / 20-09-2012 92 DEF / 28-09-2012 97 / 01-09-2012 95 DEF/ 17-09-2012 95 / 17-09-2012 83 / 12-09-2012 95 / 18-09-2012 95 ABC / 18-09-2012 69 / 21-09-2012 95 / 21-09-2012 95 ABC/ 24-09-2012 144 / 28-09-2012 93 DEF"; 
```

字符串分为 3 类。

1.  日期（日/月/年）
2.  数字
3.  特点

因此：**07-09-2012 73 ABC**

我想得到数字的总和，其中日期为 09 并且具有字符 ABC。

目前，从另一个问题中，我发现了如何在字符串没有字符时仅检索日期示例：http: [//jsfiddle.net/javascript/pBNNt/10/](http://jsfiddle.net/javascript/pBNNt/10/)

```
var result = " / 07-09-2012 73 / 11-09-2012 195 / 03-09-2012 95 / 04-09-2012 188 / 31-10-2012 72 / 18-09-2012 205 / 26-09-2012 244 / 14-09-2012 86 / 20-09-2012 92 / 28-09-2012 97 / 01-09-2012 95 / 17-09-2012 95 / 17-09-2012 83 / 12-09-2012 95 / 18-09-2012 95 / 18-09-2012 69 / 21-09-2012 95 / 21-09-2012 95 / 24-09-2012 144 / 28-09-2012 93";

var resultArr = result.split('/');
var results = {}; //sum by month
for (var i = 0; i < resultArr.length; i++) {    
    if ( resultArr[i].length >= 11) { //it has date
        var resultTkn = resultArr[i].split(' ');

        if (resultTkn[1].length == 10) { //it is a date
            var date = resultTkn[1].split('-');
            var sum = 0;
            if (results.hasOwnProperty(date[1])) {
                sum = results[date[1]];
            }

            sum += parseFloat(resultTkn[2]);
            results[date[1]] = sum;
        }
    }
}
$('div').text(results["09"]) 
```

​</p>

现在我该如何做同样的事情，**但要检索具有特定字符的特定日期或月份的总和。**

这是我目前对字符串的小提琴：http: [//jsfiddle.net/javascript/pBNNt/8/](http://jsfiddle.net/javascript/pBNNt/8/)

就像是：`results["09/2012,ABC"]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:27:19.423

那个怎么样：

```
function search(result, cat) {
    var data = [],
        lines = result.split(/\s*\/\s*/);
    for (var i = 0; i < lines.length; i++) {
        if (lines[i] === "") continue;
        var s = lines[i].split(/\s+/);
        data.push({
            date: s[0],
            number: parseInt(s[1], 10) || 0,
            char: s[2] || ""
        });
    }

    var num = 0;
    for (var j = 0; j < data.length; j++) {
        if ((cat.char && data[j].char === cat.char) &&
            (cat.date && data[j].date.indexOf(cat.date) !== -1)) {
            num += data[j].number;
        }
    }
    return num;
}

var result = " / 07-09-2012 73 ABC / 11-09-2012 195 DEF/ 03-09-2012 95 / 04-09-2012 188 ABC / 31-10-2012 72 / 18-09-2012 205 / 26-09-2012 244 ABC / 14-09-2012 86 / 20-09-2012 92 DEF / 28-09-2012 97 / 01-09-2012 95 DEF/ 17-09-2012 95 / 17-09-2012 83 / 12-09-2012 95 / 18-09-2012 95 ABC / 18-09-2012 69 / 21-09-2012 95 / 21-09-2012 95 ABC/ 24-09-2012 144 / 28-09-2012 93 DEF";

var total = search(result, {
    char: "ABC",
    date: "-09-2012"
});

console.log(total); 
```

**演示：http:** [//jsfiddle.net/pBNNt/12/](http://jsfiddle.net/pBNNt/12/)

# c++ - Windows 7：MFC ActiveX 控件不在任何文件夹中创建文件

> ID：13513477
> 
> 赞同：0
> 
> 时间：2012-11-22T13:12:15.207
> 
> 标签：c++, windows-7, mfc, activex, uac

我开发了一个用于 Internet Explorer 的 MFC ActiveX 控件。此控件在硬盘驱动器上创建文件。我已经在 Windows 7（32 位）上安装了控件。如果我以管理员身份运行 IE，控件会按预期创建文件。但是，如果我在 UAC 开启的情况下以普通用户身份运行 IE，则控件不会创建任何文件。

下面是创建文件的代码：

```
int WriteDataToFile()
{
    CString Data;
    int DataLength;
    CString FilePath;
    std::ofstream File;

    // Set Data, DataLength and FilePath

    try
    {
        File.open(FilePath, std::ios::binary | std::ios::out);

        if (TRUE == File.fail())
        {
            return ERROR;
        }

        File.write((const char *)Data.GetBuffer(), DataLength);

        if (TRUE == File.bad())
        {
            File.close();

            return ERROR;
        }

        File.close();
    }
    catch (...)
    {
        return ERROR;
    }

    return SUCCESS;
} 
```

`SUCCESS`如果程序以管理员或普通用户身份运行，则该函数返回。为什么程序不为普通用户创建文件？

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:23:28.230

您的程序将文件写入哪个文件夹？文件夹，如系统驱动程序中的“程序文件”，受Windows7保护，不允许为普通用户创建新文件。

也许您应该将文件写入某些不受 Windows7 保护的文件夹。

# c# - ContentPresenter 与 DataContext 中的 ContentTemplateSelector = NULL 上下文？

> ID：13513480
> 
> 赞同：3
> 
> 时间：2012-11-22T13:12:27.667
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps

我有一个 Windows 应用商店应用程序，它使用数据模板和数据模板选择器来设置各种显示内容的样式。

我有一个 TemplateSelector，它返回一个基于参数的模板。这个模板还使用了一个内容展示器，它本身有一个模板选择器。

我曾尝试以这种方式调用内部 TemplateSelector：

```
<DataTemplate x:Key="Template1">
<Grid>
    <Border Background="{StaticResource ApplicationBackgroundBrush}">
        <Grid>
            <ContentPresenter Content="{TemplateBinding DataContext}">
                <ContentPresenter.ContentTemplateSelector>
                    <my:MyTemplateSelector />
                </ContentPresenter.ContentTemplateSelector>
            </ContentPresenter>
        </Grid>
    </Border>
</Grid> 
```

使用 TemplateBinding，我得到一个异常，即找不到 DataContext 属性（无法从字符串创建 DependencyProperty）。

我的第一次尝试是这样的：

```
<DataTemplate x:Key="Template2">
<Grid>
    <Border Background="{StaticResource ApplicationBackgroundBrush}">
        <Grid>
            <ContentPresenter Content="{Binding DataContext}">
                <ContentPresenter.ContentTemplateSelector>
                    <my:MyTemplateSelector />
                </ContentPresenter.ContentTemplateSelector>
            </ContentPresenter>
        </Grid>
    </Border>
</Grid> 
```

问题在于调用 TemplateSelector 时 Content 和 DataContext 为空。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-17T14:58:27.130

试试这个，我遇到了类似的问题，因为我错过了属性关键字。希望它适用于你的情况。

```
Content={TemplateBinding Property=DataContext} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-27T19:41:22.310

如果您使用 ContentControl 而不是 ContentPresenter，它会起作用。

# mysql - mysql查看难度

> ID：13513483
> 
> 赞同：1
> 
> 时间：2012-11-22T13:12:33.790
> 
> 标签：mysql, view, syntax

我有一个视图“vui_trading_period_rates”。从此视图中选择 * 会产生

```
+----------------------+-------------+----------+
| trading_period_month | ccy_pair_id | price    |
+----------------------+-------------+----------+
| 201211               | EUR/USD     | 1.294000 |
| 201211               | GBP/USD     | 1.613100 |
| 201210               | EUR/USD     | 1.286700 |
| 201210               | GBP/USD     | 1.614500 |
| 201209               | EUR/USD     | 1.257100 |
| 201209               | GBP/USD     | 1.585700 |
| 201208               | EUR/USD     | 1.231700 |
| 201208               | GBP/USD     | 1.567900 |
| 201207               | EUR/USD     | 1.263500 |
| 201207               | GBP/USD     | 1.565800 |
| 201206               | EUR/USD     | 1.234900 |
| 201206               | GBP/USD     | 1.535100 |
| 201205               | EUR/USD     | 1.326500 |
| 201205               | GBP/USD     | 1.621600 |
| 201204               | EUR/USD     | 1.336300 |
| 201204               | GBP/USD     | 1.602700 |
| 201203               | EUR/USD     | 1.331600 |
| 201203               | GBP/USD     | 1.591400 |
| 201202               | EUR/USD     | 1.304900 |
| 201202               | GBP/USD     | 1.572600 |
| 201201               | EUR/USD     | 1.293900 |
| 201201               | GBP/USD     | 1.549500 | 
```

我正在尝试从中创建另一个名为“vui_trading_ccy_fluctuations”的视图

此视图将包含三列（trading_period_month、ccy_pair_id、ccy_fluctuation）

我希望一行出现的一个例子是

```
+----------------------+-------------+-----------------+
| trading_period_month | ccy_pair_id | ccy_fluctuation |
+----------------------+-------------+-----------------+
| 201210               | EUR/USD     |  0.005673       |
| 201210               | GBP/USD     | -0.000867       | 
```

其中 trading_period_monthX (tpx) 的 ccy_fluctuation = [(tpX+1) 的价格 - (tpX) 的价格]/ 价格 (tpX)

我坚持认为这是我必须要做的

```
-- --------------------
-- form "Trading Period CCY Fluctuations"
-- --------------------
drop view if exists vui_trading_ccy_fluctuations;
create view vui_trading_ccy_fluctuations as
  select tp.trading_period_month,
         tp.ccy_pair_id,
         format( tp.price, 6) as ccy_fluctuation
  from   vui_trading_period_rates tp
  where  tp.price = 
```

# java - 如何在应用程序中使用按钮显示手机的联系人列表

> ID：13513486
> 
> 赞同：2
> 
> 时间：2012-11-22T13:12:35.823
> 
> 标签：java, android, android-imageview

大家好，我对编程完全没有经验，所以请在您回复时将我视为 2 岁。当我坐在办公室无事可做时，我手头有很多时间，所以我想我应该做一些富有成效的事情，而且由于我有一个 android 平板电脑，我想我会尝试学习如何为它制作应用程序。这是我的第一次尝试，我在代码的 .java 部分出现错误，我一直在阅读和阅读各种网站，似乎无法清楚地了解我需要做些什么来纠正它. 请帮忙

现在说正事，在应用程序中，我正在尝试学习如何显示图像，就这么简单，我正在采取婴儿步骤。所以我开始了一个项目，阅读了一些关于如何编写 ImageView 的教程，然后我就卡住了。**我有错误说“公共类型 TestImages 必须在它自己的文件中定义”所以我问如何定义/创建这个文件？放在哪里？**

这是错误所在代码的 .java 部分。

```
 package com.example.myproject;

  import com.example.myproject.util.SystemUiHider;

  import android.annotation.TargetApi;
  import android.app.Activity;
  import android.os.Build;
  import android.os.Bundle;
  import android.os.Handler;
  import android.view.MotionEvent;
  import android.view.View;
  import android.widget.ImageView;

  public class TestImages extends Activity {

    /**Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_fullscreen);
        ImageView image = (ImageView) findViewById(R.id.test_image);
    }
   } 
```

请帮忙，如果你知道任何其他资源可以帮助像我这样对编码一无所知并且需要解释每一个细节的新手/假人，请指出我的方向。我已经尝试过 Android Developers 网站，但那里提供的信息没有详细解释，看起来好像他们希望尝试这样做的每个人都有编码背景，而我没有。哦，请不要气馁鼓励，因为我渴望学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:34:42.563

在按钮上使用单击侦听器，然后检查此 [https://github.com/android/platform_packages_apps_contacts](https://github.com/android/platform_packages_apps_contacts)

# c# - 组合框选择到文本文件

> ID：13513488
> 
> 赞同：0
> 
> 时间：2012-11-22T13:12:41.387
> 
> 标签：c#, .net, visual-studio-2010, combobox

新手在这里很抱歉听起来很愚蠢

我有一个组合框，用户选择一个值并单击提交按钮我不知道如何获取所选值并将其写入文本文件。有没有人可以帮忙？

在此先感谢... Jimbob

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:14:22.153

尝试：

```
 string PathToFile = "c:\\File.txt";
    System.IO.File.WriteAllText(PathToFile,Combobox.SelectValue.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:21:04.453

如果没有看到您的代码，并且我假设您没有使用 MVVM，我认为您需要做一些事情来实现这一点：

1.  在 XAML 中为您的组合框命名，例如：Name="myComboBox"
2.  同样在 XAML 中，将 Click 事件添加到您的按钮
3.  在按钮的单击处理程序中，编写如下内容： System.IO.File.WriteAllText("selected.txt", myComboBox.SelectedValue);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:26:56.600

您可以检测返回对象的`ComboBox`using的选定值。`comboBox1.SelectedValue`如果需要，您可以使用将其转换为字符串`ToString()`

**例子**

```
string _string = comboBox1.SelectedValue.ToString(); 
```

这将初始化一个名为 name 的新变量`_string`作为 中的选定`ComboBox`值`String`。考虑到它是 a ，您也可以使用`comboBox1.SelectedIndex`which 返回 an`int`来获取项目的选定索引。`comboBox1``ComboBox`

此外，如果您想将值写入特定文件，您可以使用`StreamWriter`or`File.WriteAllLines`但我相信 a`StreamWriter`会更易于管理

**例子**

```
string DestinationFile = @"D:\Resources\International\MyNewFile.txt"; //Initializes a new string of name DestinationFile as D:\Resources\International\MyNewFile.txt
StreamWriter _StreamWriter = new StreamWriter(DestinationFile); //Initializes a new StreamWriter class of name _StreamWriter
_StreamWriter.WriteLine(comboBox1.SelectedValue.ToString()); //Attempts to write the selected combo box value in string as a new line
_StreamWriter.Close(); //Closes the file and saves settings 
```

**注意**：这将在 D:\Resources\International\MyNewFile.txt 中创建一个新文件。然后，用所选项目的新行**覆盖**`ComboBox`文件。如果您想将文本**附加**到特定文件，您可能需要在`,true`之后添加`_StreamWriter = new StreamWriter(DestinationFile`

**例子**

```
string DestinationFile = @"D:\Resources\International\MyNewFile.txt"; //Initializes a new string of name DestinationFile as D:\Resources\International\MyNewFile.txt
StreamWriter _StreamWriter = new StreamWriter(DestinationFile, true); //Initializes a new StreamWriter class of name _StreamWriter
_StreamWriter.WriteLine(comboBox1.SelectedValue.ToString()); //Attempts to write the selected combo box value in string as a new line
_StreamWriter.Close(); //Closes the file and saves settings 
```

谢谢，
我希望你觉得这有帮助:)

# mysql - 启动mysql时遇到问题

> ID：13513491
> 
> 赞同：0
> 
> 时间：2012-11-22T13:12:55.477
> 
> 标签：mysql, ubuntu-12.04

我在 Ubuntu 12.04 上使用 mysql 时遇到了一些麻烦。我希望这篇文章在正确的论坛中（如果没有，请告诉我将它移到哪里）

当我运行：sudo /etc/init.d/mysql 时，我收到此消息

```
Since the script you are attempting to invoke has been converted to an
Upstart job, you may also use the start(8) utility, e.g. start mysql
start: Job failed to start 
```

当我运行 mysql -u root status 时，我得到了这个

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) 
```

所以我试图杀死这个进程，所以我运行了 ps aux | grep mysql 显示这个

```
1000      3262  0.0  0.0   4388   832 pts/1    S+   14:05   0:00 grep --color=auto mysqld 
```

当我运行 kill 命令时，我得到了这个：

kill: 没有这个进程

当我启动 sudo mysqld --verbose

```
[Warning] The syntax '--log-slow-queries' is deprecated and will be removed in a future release. Please use '--slow-query-log'/'--slow-query-log-file' instead.
121122 14:50:24 [ERROR] An old style --language value with language specific part detected: /usr/share/mysql/french/
121122 14:50:24 [ERROR] Use --lc-messages-dir without language specific part instead.
121122 14:50:24 [Note] Plugin 'FEDERATED' is disabled.
121122 14:50:24 InnoDB: The InnoDB memory heap is disabled
121122 14:50:24 InnoDB: Mutexes and rw_locks use GCC atomic builtins
121122 14:50:24 InnoDB: Compressed tables use zlib 1.2.3.4
121122 14:50:24 InnoDB: Initializing buffer pool, size = 128.0M
121122 14:50:24 InnoDB: Completed initialization of buffer pool
121122 14:50:24 InnoDB: highest supported file format is Barracuda.
121122 14:50:24  InnoDB: Waiting for the background threads to start
121122 14:50:25 InnoDB: 1.1.8 started; log sequence number 2289875
121122 14:50:25 [ERROR] mysqld: unknown variable 'default-character-set=utf8'
121122 14:50:25 [ERROR] Aborting

121122 14:50:25  InnoDB: Starting shutdown...
121122 14:50:26  InnoDB: Shutdown completed; log sequence number 2289875
121122 14:50:26 [Note] mysqld: Arrêt du serveur terminé 
```

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:17:12.670

使用命令“mysql”，您要做的是启动 mysql 客户端。Mysql 客户端必须连接到服务器。您应该像 Jeremy 建议的那样启动 mysql 服务器，或者使用

```
sudo start mysql 
```

浏览此处获取更多信息

[https://askubuntu.com/questions/125686/mysql-fails-to-start-after-upgrade-to-12-04](https://askubuntu.com/questions/125686/mysql-fails-to-start-after-upgrade-to-12-04)

# windows-8 - 为 Sideloading 签署应用程序

> ID：13513499
> 
> 赞同：2
> 
> 时间：2012-11-22T13:13:28.713
> 
> 标签：windows-8, visual-studio-2012, microsoft-metro, digital-certificate, sideloading

我想明确一个关于 Windows 8 侧载应用程序（供公司内部使用）的问题。阅读一些关于它的文章，始终在部署之前编写应用程序必须经过加密签名（[http://technet.microsoft.com/en -us/图书馆/hh852635.aspx](http://technet.microsoft.com/en-us/library/hh852635.aspx)）。我找到了如何签署我的应用程序（[http://msdn.microsoft.com/ru-RU/library/hh446592%28v=vs.85%29.aspx](http://msdn.microsoft.com/ru-RU/library/hh446592%28v=vs.85%29.aspx))，但有一个问题是从哪里获取签名应用程序的密钥。可以从 Verisign、Comodo 还是其他公司购买？如果是这样，需要什么，需要多少时间？我是否正确理解签名应用程序不需要应用程序打包程序，因为应用程序包生成了一个 Visual Studio，之后您必须使用 CertMgr 将证书安装到域并使用 SignTool 签署此证书应用程序？如果我错了-请纠正我

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:51:30.500

您应该能够使用`Active Directory Certificate Services`.

[这](http://blogs.msdn.com/b/sqlforum/archive/2011/01/03/walkthrough-request-a-digital-certificate-from-certificate-server-or-create-a-testing-digital-certificate-to-sign-a-package.aspx)是有关如何从 AD CS 生成证书的快速演练

[Active Directory 证书服务分步指南](http://technet.microsoft.com/en-us/library/cc772393%28v=WS.10%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T16:47:17.690

如果您在没有访问 AD CS 的情况下执行此操作，则可以从任何提供 RFC3161 时间戳服务的证书颁发机构购买代码签名证书。获得代码签名证书所需的时间取决于证书颁发机构验证您的身份所需的时间。

但是，您需要手动为 appx 文件添加时间戳，因为 VS2013 在生成 appx 文件时不支持使用第三方 CA 的时间戳服务。您需要为 appx 加上时间戳，否则软件将在您的代码签名证书到期的日期到期。

这就是我使用signtool的方式：

```
signtool sign /fd SHA256 /a /f YourCertKey.pfx /p mypassword /tr http://timestampserver.yourca.com/somepath YourApp.appx 
```

以下是有关使用 signtool 签署应用程序包的更多信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/jj835835 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/jj835835(v=vs.85).aspx)

如果您尝试旁加载这些 appx 文件，您可能还需要在相关计算机上启用旁加载权限。如果您未在客户端计算机上使用已加入域的 Windows Enterprise，则可能需要从 Microsoft 批量许可或合作伙伴处购买侧载许可证。

以下是有关侧载的更多信息：[http ://technet.microsoft.com/en-ca/windows/jj874388.aspx](http://technet.microsoft.com/en-ca/windows/jj874388.aspx)

# python - Scons 在不同的子目录中运行 py.test

> ID：13513500
> 
> 赞同：1
> 
> 时间：2012-11-22T13:13:34.273
> 
> 标签：python, scons, pytest

我们有一个包含多个 Python 包（*）的大型存储库。我希望 scons[在](http://pytest.org/latest/)每个子目录中而不是从项目根目录中运行 py.test。这证明相当令人沮丧。目前，我已经删除了所有错误检查的此操作：

```
def runTests (target = None, source = None, env = None):
    cmd = which(env['TEST_RUNNER'])
    if cmd:
        retCode = True
        for path in env['TEST_DIR_LIST']:
            print 'Doing directory %s:' % (path)
            retCode = retCode and subprocess.call([cmd], cwd=path)
        env.Exit(retCode) 
```

我在`SConstruct`文件中调用它：

```
runTestsCmd = env.Command('runTests', None, Action(runTests, "Running tests"))
AlwaysBuild(runTestsCmd)
Alias('test', runTestsCmd) 
```

在每个`SConscript`文件中，我都有这个：

```
env.Append(TEST_DIR_LIST = ['PackageDirectory']) 
```

我得到的是只有一个 py.test 实例运行。我可以看到“Doing directory X”消息，但没有运行 py.test。

显然，不需要在 SConscript 中克隆环境，或者如果克隆了 env，请确保添加到 TEST_DIR_LIST 的内容发生在原始 env 上。

所以，我的问题有两个：

1.  **这是做我想做的事的明智方式**吗？
2.  如果是，**我做错了**什么？如果不是，**我该怎么**办？

(*)*是的，我们正在考虑改变这一点。不，它不会很快发生，所以我确实需要上述内容。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:09:05.723

问题是这条线：

```
retCode = retCode and subprocess.call([cmd], cwd=path) 
```

`subprocess.call`成功时返回 0（计算结果为`False`）。您需要插入一个`not`或可能进行适当的检查，如下所示：

```
retcode = subprocess.call([cmd], cwd=path)
if retcode != 0:
     print ("failed ...")
     break  # or not break if you want to continue anyway 
```

# jquery - 如果选择器不存在，则停止函数运行 - jquery？

> ID：13513501
> 
> 赞同：0
> 
> 时间：2012-11-22T13:13:38.710
> 
> 标签：jquery

我试图停止我的 autoBike(); 如果我的`#bike-main-slider div.bike`data-bike 属性值不存在，则自行车功能将运行。

```
<script>

    var bike = '<?=(isset($_REQUEST['bike']) ? htmlentities($_REQUEST['bike']) : null)?>';

    autoBike = function () {

         var bikeIndex = $('#bike-main-slider div.bike[data-bike=' + bike + ']').index();

         mainSlider.goToSlide(bikeIndex);  

    };

    autoBike();

</script>

<div id="slideshow">

     <div class="bike" data-bike="50cc"></div>
     <div class="bike" data-bike="100cc"></div>
     <div class="bike" data-bike="150cc"></div>
     <div class="bike" data-bike="200cc"></div>
     <div class="bike" data-bike="250cc"></div>
     <div class="bike" data-bike="350cc"></div>

</div> 
```

这可能吗？

例如，如果我的网址是...

**http://example.com/?bike=450cc**

如您所见，我的#slideshow div 中不存在 450cc，那么`autoBike();`如果 data-bike 属性值不存在，是否有办法阻止我的函数运行？

使用 jQuery

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:15:45.540

您可以检查调用选择器时返回的对象的长度，如果为零，则只需从函数中返回您所做的第一件事。

```
var autobike = function () {

   var elms = $('#bike-main-slider div.bike[data-bike=' + bike + ']');
   if (elms.length === 0)
       return;

   // Do your stuff here, at least one element matched.
} 
```

这是上面代码的一个工作示例：http: [//jsfiddle.net/Gp5Xw/](http://jsfiddle.net/Gp5Xw/)

**长度属性与 jQuery 的 .size()**

由于使用选择器调用 jQuery 函数将返回一个数组，因此该数组将具有您可以读取的长度属性，就像任何其他 JavaScript 数组一样。使用 jQuery 的`.size()`方法将产生与读取长度属性相同的结果，但它需要额外的函数调用，这是完全没有必要的。确实使用长度属性是一种微优化，但仍然如此。

来自 jQuery 文档[`.size()`](http://api.jquery.com/size/)：

> .size() 方法在功能上等同于 .length 属性；但是，**首选 .length 属性，**因为它没有函数调用的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:18:44.197

```
autoBike = function () {
     var $bike = $('#bike-main-slider div.bike[data-bike=' + bike + ']');
     if($bike.size() > 0) {
          var bikeIndex = $bike.index();
          mainSlider.goToSlide(bikeIndex); 
     }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T13:22:26.437

这应该工作...

```
$(document).ready(function() {

var bike = '<?=(isset($_REQUEST['bike']) ? htmlentities($_REQUEST['bike']) : null)?>';

$('bike').each(function() {
 if ($(this).attr('data-bike') === bike) {
     autoBike();
 }
});

}); 
```

autoBike() 仅当您的自行车 URL 参数作为数据自行车属性存在时才会运行...

# java - 如何在使用文本字段输入的 jframe 上显示信息？

> ID：13513505
> 
> 赞同：1
> 
> 时间：2012-11-22T13:13:47.863
> 
> 标签：java

这是我的代码...

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.util.Scanner;
public class gui extends JFrame
{
public gui()
{
// creates a frame with thee buttons if i choose the register one it will lead me to the next frame
super ("Property Tax Management System");
JFrame gui = new JFrame("PCMS user interface ");
JButton Register = new JButton("Register",register);
JButton View = new JButton("View",view);
JButton Management = new JButton("Management query's",management)
JButton Exit = new JButton("Exit",exit);
gui.setLayout(new FlowLayout());
Register.setToolTipText("Click if you would like to register");
View.setToolTipText("Click if you would like to view your property file");
Management.setToolTipText("Click if you would like to view statistics")
View.setToolTipText("Click if you would like to exit the programm")
Registeroption one = new Registeroption();
Viewoption two = new Viewoption();
Managementoption three = new Managementoption();
Exitoption four = new Exitoption();
Register.addActionListener(one);
View.addActionListener(two);
Management.addActionListener(two);
Exit.addActionListener(two);
gui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
gui.setSize(350,110);
gui.setVisible(true);
gui.add(Register);
gui.add(View);
gui.add(Management);
gui.add(Exit);
}

// I input my information i want to be displayed
private class Registeroption implements ActionListener{
public void actionPerformed(ActionEvent register){
JFrame gui = new JFrame("Register");
JButton Enter = new JButton("View",view);
JTextField Name = new JTextField("Please enter your full name here");
JTextField Address = new JTextField("Please enter your address");
JTextField PPR = new JTextField("Please if you are the principle private residant?yes\no")
JTextField PEV = new JTextField("Please enter your estimated property value");
JTextField Location = new JTextField("Please enter your location ");
JTextField Paid = new JTextField("Please enter if your ta is paid");
Enteroption one = new Enteroption();
Enter.addActionListener(one);
gui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
gui.setSize(350,110);
gui.setVisible(true);
gui.add(Enter);
gui.add(Name);
gui.add(Address);
gui.add(PVR);
gui.add(Location);
gui.add(PEV);
gui.add(Paid);
}
} 
```

我想显示我在另一个框架中输入的信息并插入一个方法。这就是我开始的：

```
private class Enteroption{
public void actionPerformed(ActionEvent enter){
JFrame gui = new JFrame("property details");
JLabel label = new JLabel("");
frame.add(label); 
```

# jsp - OutputStream 已经获得

> ID：13513507
> 
> 赞同：0
> 
> 时间：2012-11-22T13:13:51.653
> 
> 标签：jsp, exception, servlets, jfreechart, outputstream

我正在使用 JFree 图表。然后最后我在使用

## Java 文件：

```
ChartUtilities.writeChartAsPNG(response.getOutputStream(), chart,
                       1150, 450); 
```

## .jsp文件：

```
<img src="${pageContext.request.contextPath}/weeklyDlvyInstancesDashboardReportPost.do?method=generateParetoInstanceBasedChart" alt="Graph" width="100%" height="450"  border="0"/></br> 
```

## 服务器：

IBM Webshpere 6.0.1

该图表工作正常。但是控制台显示错误

```
[11/22/12 18:31:28:243 IST] 0000002f ServletWrappe E   SRVE0068E: Uncaught exception thrown in one of the service methods of the servlet: /jsp/layout/layout.jsp. Exception thrown : java.lang.IllegalStateException: SRVE0199E: OutputStream already obtained
    at com.ibm.ws.webcontainer.srt.SRTServletResponse.getWriter(SRTServletResponse.java:601)
    at org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:196)
    at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:184)
    at org.apache.jasper.runtime.JspWriterImpl.flush(JspWriterImpl.java:240)
    at org.apache.struts.tiles.taglib.InsertTag$InsertHandler.doEndTag(InsertTag.java:893)
    at org.apache.struts.tiles.taglib.InsertTag.doEndTag(InsertTag.java:465)
    at com.ibm._jsp._layout._jspx_meth_tiles_insert_0(_layout.java:568)
    at com.ibm._jsp._layout._jspService(_layout.java:162)
    at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:87)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1146)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1087)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:118)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:87)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:848)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:691)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:588)
    at com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:525)
    at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:122)
    at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:232)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.include(WebAppRequestDispatcher.java:639)
    at org.apache.struts.action.RequestProcessor.doInclude(RequestProcessor.java:1110)
    at org.apache.struts.tiles.TilesRequestProcessor.doForward(TilesRequestProcessor.java:292)
    at org.apache.struts.tiles.TilesRequestProcessor.processTilesDefinition(TilesRequestProcessor.java:271)
    at org.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(TilesRequestProcessor.java:332)
    at com.ford.it.strutscore.context.ScTilesRequestProcessor.processForwardConfig(ScTilesRequestProcessor.java:863)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:232)
    at com.ford.it.strutscore.context.ScTilesRequestProcessor.processRequest(ScTilesRequestProcessor.java:199)
    at com.ford.it.strutscore.context.ScTilesRequestProcessor.process(ScTilesRequestProcessor.java:143)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:743)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1146)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1087)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:145)
    at com.ford.it.persistencecore.context.PcRequestContextFilter.doFilter(PcRequestContextFilter.java:153)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
    at com.ford.mpl.supergweb.context.I18NUserProfileFilter.doFilterChain(I18NUserProfileFilter.java:139)
    at com.ford.mpl.supergweb.context.I18NUserProfileFilter.doFilter(I18NUserProfileFilter.java:79)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
    at com.ford.it.context.RequestContextFilter.doFilter(RequestContextFilter.java:123)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
    at com.ford.mpl.supergweb.context.EncodingFilter.doFilter(EncodingFilter.java:50)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:87)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:848)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:691)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:588)
    at com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:525)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:90)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:764)
    at com.ibm.ws.wswebcontainer.WebContainer.handleRequest(WebContainer.java:1478)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:133)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:458)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:387)
    at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:102)
    at com.ibm.ws.ssl.channel.impl.SSLReadServiceContext$SSLReadCompletedCallback.complete(SSLReadServiceContext.java:1818)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:136)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:196)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:751)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:881)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1497)

---- Begin backtrace for Nested Throwables
java.lang.IllegalStateException: SRVE0199E: OutputStream already obtained
    at com.ibm.ws.webcontainer.srt.SRTServletResponse.getWriter(SRTServletResponse.java:601)
    at org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:196)
    at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:184)
    at org.apache.jasper.runtime.JspWriterImpl.flush(JspWriterImpl.java:240)
    at org.apache.struts.tiles.taglib.InsertTag$InsertHandler.doEndTag(InsertTag.java:893)
    at org.apache.struts.tiles.taglib.InsertTag.doEndTag(InsertTag.java:465)
    at com.ibm._jsp._layout._jspx_meth_tiles_insert_0(_layout.java:568)
    at com.ibm._jsp._layout._jspService(_layout.java:162)
    at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:87)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1146)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1087)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:118)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:87)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:848)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:691)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:588)
    at com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:525)
    at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:122)
    at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:232)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.include(WebAppRequestDispatcher.java:639)
    at org.apache.struts.action.RequestProcessor.doInclude(RequestProcessor.java:1110)
    at org.apache.struts.tiles.TilesRequestProcessor.doForward(TilesRequestProcessor.java:292)
    at org.apache.struts.tiles.TilesRequestProcessor.processTilesDefinition(TilesRequestProcessor.java:271)
    at org.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(TilesRequestProcessor.java:332)
    at com.ford.it.strutscore.context.ScTilesRequestProcessor.processForwardConfig(ScTilesRequestProcessor.java:863)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:232)
    at com.ford.it.strutscore.context.ScTilesRequestProcessor.processRequest(ScTilesRequestProcessor.java:199)
    at com.ford.it.strutscore.context.ScTilesRequestProcessor.process(ScTilesRequestProcessor.java:143)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:743)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1146)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1087)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:145)
    at com.ford.it.persistencecore.context.PcRequestContextFilter.doFilter(PcRequestContextFilter.java:153)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
    at com.ford.mpl.supergweb.context.I18NUserProfileFilter.doFilterChain(I18NUserProfileFilter.java:139)
    at com.ford.mpl.supergweb.context.I18NUserProfileFilter.doFilter(I18NUserProfileFilter.java:79)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
    at com.ford.it.context.RequestContextFilter.doFilter(RequestContextFilter.java:123)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
    at com.ford.mpl.supergweb.context.EncodingFilter.doFilter(EncodingFilter.java:50)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:87)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:848)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:691)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:588)
    at com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:525)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:90)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:764)
    at com.ibm.ws.wswebcontainer.WebContainer.handleRequest(WebContainer.java:1478)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:133)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:458)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:387)
    at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:102)
    at com.ibm.ws.ssl.channel.impl.SSLReadServiceContext$SSLReadCompletedCallback.complete(SSLReadServiceContext.java:1818)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:136)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:196)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:751)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:881)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1497)

[11/22/12 18:31:28:368 IST] 0000002f SRTServletRes W   WARNING: Cannot set status. Response already committed.
[11/22/12 18:31:28:368 IST] 0000002f SRTServletRes W   WARNING: Cannot set header. Response already committed.) 
```

## Java页面：

```
try
        {
            CategoryDataset dataset1 = createDataSetForInstanceBasedChart();
             String instancesCountLabelName = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.reports.wdid.instcnt");
             JFreeChart chart = ChartFactory.createBarChart(
                    "",       // chart title
                    "",               // domain axis label
                    instancesCountLabelName,                  // range axis label
                    dataset1,                  // data
                    PlotOrientation.VERTICAL, // orientation
                    true,                     // include legend
                    true,                     // tooltips?
                    false                     // URLs?
                );

                // NOW DO SOME OPTIONAL CUSTOMISATION OF THE CHART...

                // set the background color for the chart...
                chart.setBackgroundPaint(Color.white);
                CategoryPlot plot = (CategoryPlot) chart.getPlot();
                plot.setBackgroundPaint(Color.lightGray);

                /*CategoryDataset dataset2 = createDataset2();
                plot.setDataset(1, dataset2);
                plot.mapDatasetToRangeAxis(1, 1);*/

                CategoryItemRenderer renderer1 = plot.getRenderer();
               renderer1.setSeriesItemLabelGenerator(0,new CategoryItemLabelGenerator() {

                    public String generateRowLabel(final CategoryDataset arg0, final int arg1) {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    public String generateLabel(final CategoryDataset dataset1,final int series,final int category) {
                        String result = null;
                        //CHAPTER 12\. ITEM LABELS 91
                        final Number value = dataset1.getValue(series, category);
                        if (value != null) {
                        final double v = value.doubleValue();
                        if (v > 0) {
                        result = value.toString(); // could apply formatting here
                        }
                        }
                        return result;
                        }

                    public String generateColumnLabel(final CategoryDataset arg0, final int arg1) {
                        // TODO Auto-generated method stub
                        return null;
                    }
                });
               renderer1.setSeriesItemLabelsVisible(0,true);
               System.out.println("+++++++++++++++++++++++++++++++++renderer1" +renderer1);
                BarRenderer renderer = (BarRenderer) plot.getRenderer();
                renderer.setDrawBarOutline(false);
                renderer.setSeriesOutlinePaint(0,Color.BLACK);
                renderer.setDrawBarOutline(true);
                renderer.setMaximumBarWidth(0.02);
                renderer.setSeriesPaint(0,new Color(170, 0, 85));          
                System.out.println("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!renderer" +renderer);
                CategoryAxis domainAxis = plot.getDomainAxis();
                domainAxis.setCategoryLabelPositions(CategoryLabelPositions.createUpRotationLabelPositions(.6));  
                domainAxis.setLabelFont(new Font("Helvetica", Font.BOLD, 14));
                domainAxis.setTickLabelFont(new Font("Helvetica", Font.BOLD, 14));
                System.out.println("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@domainAxis" +domainAxis);
                /*String numOfSupplrs = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.rateElement.history.numOfSupplrs");
                ValueAxis axis2 = new NumberAxis(numOfSupplrs);
                axis2.setLabelFont(new Font("Helvetica", Font.BOLD, 14));    
                axis2.setTickLabelFont(new Font("Helvetica", Font.PLAIN, 14));
                //if(!this.isValueDataZeros)
                    //axis2.setRange(0,13);
                plot.setRangeAxis(1, axis2);*/

                NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
               // if(!this.isNumberDataZeros)
                    //rangeAxis.setRange(0,90);
               //rangeAxis.setTickUnit(new NumberTickUnit(1)); 
               rangeAxis.setLabelFont(new Font("Helvetica", Font.BOLD, 14));
               rangeAxis.setTickLabelFont(new Font("Helvetica", Font.PLAIN, 14));

                /*LineAndShapeRenderer renderer2 = new LineAndShapeRenderer();
                renderer2.setSeriesPaint(0, Color.BLUE);
                Start 
                renderer2.setSeriesItemLabelGenerator(0,new CategoryItemLabelGenerator() {

                    public String generateRowLabel(final CategoryDataset arg0, final int arg1) {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    public String generateLabel(final CategoryDataset dataset1,final int series,final int category) {
                        String result = null;
                        //CHAPTER 12\. ITEM LABELS 91
                        final Number value = dataset1.getValue(series, category);
                        if (value != null) {
                        final double v = value.doubleValue();
                        if (v > 0) {
                        result = value.toString(); // could apply formatting here
                        }
                        }
                        return result;
                        }

                    public String generateColumnLabel(final CategoryDataset arg0, final int arg1) {
                        // TODO Auto-generated method stub
                        return null;
                    }
                });
               renderer2.setSeriesItemLabelsVisible(0,true);*/
                /* End */
                //plot.setRenderer(1, renderer2);
                plot.setDatasetRenderingOrder(DatasetRenderingOrder.FORWARD);
                System.out.println("#########################plot" +plot);
                ChartUtilities.writeChartAsPNG(response.getOutputStream(), chart,
                       1150, 450);

                log.exiting(CLASS_NAME, METHOD_NAME);
        }
        catch(Exception writeInstanceBasedParetoChartException)
        {
            System.out.println("Exception in writeInstanceBasedParetoChartException: "+writeInstanceBasedParetoChartException.getMessage());
        } 
```

## 我想要的是：

如何避免控制台中的错误？请给我建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-25T10:56:37.127

在处理 servlet 请求时，只能获得一次 OutputStream（用于二进制数据）或 Writer（用于文本）。

该错误表明进行了第二次尝试。当输出加倍时，这通常会发生在 JSP 中：二进制图像数据和 JSP 本身；例如 final 之后的换行符`%>`。

这里似乎要写一个标签。也许缺少回报​​。特别要注意编写 HTTP 标头等`setContentType("application/png")`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-25T10:04:47.260

阅读[http://www.coderanch.com/t/55147/Struts/OutputStream-obtained-error-generating-pdf](http://www.coderanch.com/t/55147/Struts/OutputStream-obtained-error-generating-pdf)。我遇到了同样的问题，但在我的情况下，我不需要 JSP/Java 页面作为响应。

我用了：

```
FileInputStream inputStream = new FileInputStream(file);    
ServletOutputStream out = response.getOutputStream();

IOUtils.copy(inputStream, out);    
inputStream.close();

out.flush();    
out.close();

response.flushBuffer();

return null; 
```

# c# - 无法启用约束。一行或多行包含违反非空、唯一或外键约束的值。MyDataset.Tables[0].Merge

> ID：13513508
> 
> 赞同：0
> 
> 时间：2012-11-22T13:14:07.223
> 
> 标签：c#

当我尝试在数据集中合并表时，发生此异常：-（无法启用约束。一行或多行包含违反非空、唯一或外键约束的值。）

代码：

```
MyDataset.Tables[0].Merge(dt, false, MissingSchemaAction.Add); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-16T17:47:53.043

我查看了 Murat Yıldız 评论中的问题，但没有一个答案适用于我的设置。`Merge`我的代码在该方法上也失败了。在我的案例中起作用的是这个片段，取自这里： http: [//www.codeproject.com/Tips/405938/Debugging-DataSet-Constraint-Errors](http://www.codeproject.com/Tips/405938/Debugging-DataSet-Constraint-Errors)

```
try
{
    dataSet.Merge(anotherDataSet);
}
catch (ConstraintException)
{
    foreach (DataTable table in dataSet.Tables)
    {
        DataRow[] rowErrors = table.GetErrors();

        System.Diagnostics.Debug.WriteLine(table.TableName + " Errors:" + rowErrors.Length);

        for (int i = 0; i < rowErrors.Length; i++)
        {
            System.Diagnostics.Debug.WriteLine(rowErrors[i].RowError);

            foreach (DataColumn col in rowErrors[i].GetColumnsInError())
            {
                System.Diagnostics.Debug.WriteLine(col.ColumnName + ":" + rowErrors[i].GetColumnError(col));
            }
        }
    }
} 
```

# mysql - 查找数据库表中是否有可用的时隙

> ID：13513516
> 
> 赞同：2
> 
> 时间：2012-11-22T13:14:37.757
> 
> 标签：mysql, database

我有以下带有列的数据库表。

```
+----+---------------------+---------------------+------------------+
| id | start_datetime      | end_datetime        | arena_surface_id |
+----+---------------------+---------------------+------------------+
|  1 | 2012-11-22 02:30:00 | 2012-11-22 05:00:00 |                2 |
|  2 | 2012-11-22 00:00:00 | 2012-11-22 02:30:00 |                2 |
|  3 | 2012-11-22 05:00:00 | 2012-11-22 08:00:00 |                2 |
|  4 | 2012-11-22 08:00:00 | 2012-11-22 11:00:00 |                2 |
|  5 | 2012-11-22 11:00:00 | 2012-11-22 17:00:00 |                2 |
+----+---------------------+---------------------+------------------+ 
```

通过用户输入日期、开始时间和结束时间，我想知道在给定的时间段内是否有为特定 arena_surface_id 预订的插槽。

例如，如果用户输入是。

```
start_datetime : 2012-11-22 6:00
end_datetime : 2012-11-22 9:00
arena_surface_id : 2 
```

我想知道是否有任何行与给定日期时间的 6:00 到 9:00 之间的时间段匹配（在上面的示例中它应该匹配）。

什么是正确的mysql查询？

这实际上是一个后续问题，[我将如何检测两个时间段的不重叠？](https://stackoverflow.com/questions/13512501/how-would-i-detect-a-non-overlap-of-two-time-periods/13513064#comment18497118_13513064)

**更新**

@March 这是我使用您的查询时返回的内容。

```
SELECT 
    id, 
    start_datetime, 
    end_datetime, 
    arena_surface_id 
FROM 
    gce_arena_surface_booking 
WHERE 
    (start_datetime BETWEEN '2012-11-22 04:00:00' AND '2012-11-22 09:00:00')
OR 
    (end_datetime BETWEEN '2012-11-22 4:00:00' AND '2012-11-22 9:00:00')

+----+---------------------+---------------------+------------------+
| id | start_datetime      | end_datetime        | arena_surface_id |
+----+---------------------+---------------------+------------------+
|  1 | 2012-11-22 02:30:00 | 2012-11-22 05:00:00 |                2 |
|  3 | 2012-11-22 05:00:00 | 2012-11-22 08:00:00 |                2 |
|  4 | 2012-11-22 08:00:00 | 2012-11-22 11:00:00 |                2 |
+----+---------------------+---------------------+------------------+ 
```

中间记录与条件不匹配，仍然获取它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T13:19:01.773

怎么样

```
SELECT * 
FROM yourTable
WHERE (startTime BETWEEN 'yourStartImput' AND 'yourEndImput') OR (endTime BETWEEN 'yourStartImput' AND 'yourEndImput') 
```

因此，您检查输入之间是否存在开始或结束的匹配。

对于您的评论，您的最终查询应如下所示：

```
SELECT * 
FROM yourTable
WHERE ((startTime BETWEEN 'yourStartImput' AND 'yourEndImput') 
  OR (endTime BETWEEN 'yourStartImput' AND 'yourEndImput')) 
  AND arena_surface_id = 1 
```

# iphone - 如何知道来自 Facebook 的日历

> ID：13513517
> 
> 赞同：0
> 
> 时间：2012-11-22T13:14:38.847
> 
> 标签：iphone, objective-c, ios6, ekeventstore

我已经从 EKEventStore 获取日历，所以有没有办法知道日历是否来自 Facebook 或不像下面的图片。

![在此处输入图像描述](../Images/5e95512ac36ea42cbe5894e77fb56458.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:01:32.660

你可以这样做：

*   从日历对象中获取描述字符串。
*   在这个字符串中有“account=Facebook”子字符串。

因此，您必须拆分描述字符串并获取“帐户”子字符串并从那里读取值

# vb.net - 显示模态对话框时，窗体在顶部但不可点击

> ID：13513519
> 
> 赞同：1
> 
> 时间：2012-11-22T13:14:47.570
> 
> 标签：vb.net, focus, modal-dialog, topmost, createparams

我想要的是一个小的通知消息，当有任何消息要显示时，它会显示在右下角。如果没有，则不会显示通知消息。通知消息不应窃取焦点或阻塞主应用程序。

我所拥有的是一个将任务作为一种消息服务运行的应用程序。此应用程序包含多个作为模式对话框打开的对话框。

当消息到达应用程序时，它会被添加到可观察列表中。这会在显示通知消息的表单中触发一个事件处理程序，并重新绘制它以显示列表中的第一项。当一条消息被读取/关闭时，它会从再次触发事件的列表中删除，并使用列表中第一项的信息更新表单。如果列表为空，则隐藏表单。

我的问题是，如果我收到一条消息并显示通知消息表单，并且在我关闭它之前，在主应用程序中打开了一个模式对话框，我的通知消息表单仍然位于所有内容之上，甚至是模式对话框，但它不可点击。

我已经搜索并阅读了几个论坛以寻求答案，但一直未能找到答案。

可以在 Github 上找到一个模拟这种行为的小型测试应用程序。 [https://github.com/Oneleg/NotificationMessage](https://github.com/Oneleg/NotificationMessage)

一些快速信息：

NotificationMessage 表单具有：

*   FormBorderStyle = 无
*   最顶层 = 假
*   用 Show() 显示
*   重载 ShowWithoutActivation()
*   使用 WS_EX_NOACTIVATE WS_EX_TOOLWINDOW WS_EX_TOPMOST 重载 CreateParams

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:33:18.070

看起来我将能够回答我自己的问题。

答案是将 NotificationMessage 创建为具有自己的消息泵的应用程序。

```
Application.Run(New NotificationMessage(_messageList)) 
```

经过一些修改后，我的 Main 现在看起来像这样：

```
Imports System.Threading
Imports System.Threading.Tasks

Public Class frmMain

    Private _notificationMessage As NotificationMessage
    Private _task As Task
    Private _messageList As ObservableGenericList(Of String) = New ObservableGenericList(Of String)
    Private ReadOnly _cancelMessages As CancellationTokenSource = New CancellationTokenSource()

    Private Sub btnModal_Click(sender As System.Object, e As System.EventArgs) Handles btnModal.Click
        frmModal.ShowDialog()
    End Sub

    Private Sub frmMain_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        AddHandler _messageList.Changed, AddressOf MessageListChanged
    End Sub

    Private Sub NotificationMessageLoop(mess As String)
        _notificationMessage = New NotificationMessage(_messageList)
        _messageList.Add(mess)
        Application.Run(_notificationMessage)
    End Sub

    Private Sub btnMessage_Click(sender As System.Object, e As System.EventArgs) Handles btnMessage.Click

        Dim newMessage = String.Format("Message no {0}", _messageList.Count + 1)

        If _task Is Nothing Then
            _task = Task.Factory.StartNew(Sub() NotificationMessageLoop(newMessage), _cancelMessages.Token)
        Else
            _messageList.Add(newMessage)
        End If
    End Sub

    Private Sub MessageListChanged()
        If Not _messageList.Any Then
            _cancelMessages.Cancel()
        End If
    End Sub
End Class 
```

NotificationMessage 看起来像这样：

```
Imports System.Runtime.InteropServices

Public Class NotificationMessage
    Public Sub New(messages As ObservableGenericList(Of String))

        InitializeComponent()
        _messages = messages
        AddHandler _messages.Changed, AddressOf ListChanged

    End Sub

    Private ReadOnly _messages As ObservableGenericList(Of String)
    Private Delegate Sub ListChangedDelegate()

    Private Sub ListChanged()
        If InvokeRequired Then
            BeginInvoke(New ListChangedDelegate(AddressOf ListChanged))
            Return
        End If

        If _messages.Any Then
            Dim message As String = _messages.First
            txtMessage.Text = message
            lblCounter.Text = String.Format("({0} messages)", _messages.Count)
            Show()
        Else
            Hide()
        End If
    End Sub

    Private Sub MessageLoad(sender As System.Object, e As EventArgs) Handles MyBase.Load
        Left = Screen.PrimaryScreen.WorkingArea.Width - Width
        Top = Screen.PrimaryScreen.WorkingArea.Height - Height
    End Sub

    Private Sub btnClose_Click(sender As System.Object, e As System.EventArgs) Handles btnClose.Click
        _messages.RemoveFirst()
    End Sub

#Region "Overrides"

    Private Const WS_EX_NOACTIVATE = &H8000000 ' Do not steal focus
    Private Const WS_EX_TOOLWINDOW = &H80 ' Makes form hidden from Alt + Tab window
    Private Const WS_EX_TOPMOST = &H8 ' Makes window topmost

    ''' <summary> Indicates whether the window will be activated when it is shown. </summary>
    ''' <remarks> http://msdn.microsoft.com/en-us/library/system.windows.forms.form.showwithoutactivation.aspx </remarks>
    Protected Overrides ReadOnly Property ShowWithoutActivation() As Boolean
        Get
            Return True
        End Get
    End Property

    ''' <summary> Override for creation parameters that are set when control handle is created. </summary>
    Protected Overrides ReadOnly Property CreateParams() As CreateParams
        Get
            Dim params As CreateParams = MyBase.CreateParams
            params.ExStyle = params.ExStyle Or WS_EX_NOACTIVATE Or WS_EX_TOOLWINDOW Or WS_EX_TOPMOST
            Return params
        End Get
    End Property

#End Region

End Class 
```

我现在有一条通知消息，该消息仅在有任何消息要显示时才可见，在新消息到达时不会窃取焦点，始终位于顶部并且即使在主应用程序中打开模态表单后也可单击。

# random - 在音板应用程序上播放随机声音

> ID：13513525
> 
> 赞同：0
> 
> 时间：2012-11-22T13:15:09.183
> 
> 标签：random, avfoundation, avaudioplayer, xcode4.5, audio-player

我一直在尝试创建一个应用程序，当我按下按钮时它会播放声音，但是当我再次按下同一个按钮时，它会播放不同的声音我不介意它是否一直完全随机播放或播放一次不同的声音，但每次都相同的顺序希望这有意义伙计们

这是我拥有的所有代码：

。H

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@class AVAudioPlayer;

@interface ViewController : UIViewController

-(IBAction)PlayRandomSound;
@property (nonatomic, retain) AVAudioPlayer *soundPlayer;

@end 
```

.m

```
#import "ViewController.h"
#import <AVFoundation/AVAudioPlayer.h>
@interface ViewController ()

@end

@implementation ViewController

@synthesize soundPlayer = _soundPlayer;

-(IBAction)PlayRandomSound{

    int randomNumber = arc4random() % 8 + 1;

    NSURL *soundURL = [NSURL fileURLWithPath:[[NSBundle mainBundle]pathForResource:[NSString stringWithFormat:@"Sound%02d", randomNumber] ofType:@"mp3"]];

    _soundPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundURL error:nil];

    [_soundPlayer prepareToPlay];
    [_soundPlayer play];

    NSLog(@"randomNumber is %d", randomNumber);
    NSLog(@"tmpFilename is %@", soundURL);
} 
```

这是我在图像中的错误

![在此处输入图像描述](../Images/38474004ca34975a2962f5c11526cbdc.png)

![在此处输入图像描述](../Images/0d8675cce54805c9ecc999ae0636418c.png)

我还插入了 AVFoundation.Framework 和 AudioToolbox.Frame

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:58:07.867

你有很多问题。很难回答您的实际问题，因为您遇到了很多小问题。

给你一些帮助：

这是不正确的：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@class AVAudioPlayer;

@interface ViewController : UIViewController 
```

正如您发布的图片一样，即使是 Xcode 也在努力帮助您。前`@class`向声明在错误的位置。试着把它放在`#import`语句之后。因此，您的声音播放器没有正确创建，并且您收到其他警告。

您需要修复所有错误，然后修复所有警告，并继续这样做，直到它干净地构建。

# java - JSF 将 OutputText 和 InputText 值传递给属性

> ID：13513528
> 
> 赞同：1
> 
> 时间：2012-11-22T13:15:23.803
> 
> 标签：java, jsf, jstl

这是我与 JSF 合作的第二天。以前没有 Java 方面的背景，已经使用 Flex 和 C++ 有一段时间了。一些历史，让每个人都知道我来自哪里。对于“匆忙”项目，我遇到了问题

```
<h:panelGroup id="txeTab" layout="block" class="txeTab">

        <h1>TXE</h1>
        <h:form id="txeForm">
            <h:panelGrid columns="3">
                <c:forEach  items="${txeConfBean.getListTable()}" var="property">
                    <h:outputLabel id="key" value="${property.key}"/>
                    <h:inputText  id="value" value="${property.value}" />
                    <h:commandButton value="Change" action='${txeConfBean.setProperty('key','value')}'/>
                </c:forEach>
            </h:panelGrid>
        </h:form>   
    </h:panelGroup> 
```

和 Bean 如下

```
public  HashMap <String,String> getListTable ()
{
    String[] keys = new String[super.keyData.size()];
    HashMap <String,String> retKeys = new HashMap <String, String>();
    super.keyData.toArray(keys);

    for (int i=0;i<keys.length;i++)
    {
        if(!keys[i].isEmpty())
        {
            retKeys.put(keys[i],getProperty(keys[i]));
        }
    }

    return retKeys;

} 
```

我能够递归地显示键值对。`h:inputText id="value" value="${property.value}" />`但是一旦有人更新并按下新值写入的命令按钮，我想用新值更新特定键。在这方面需要帮助。谷歌搜索让我觉得有太多方法可以做到这一点。需要帮忙。我只是无法弄清楚要传递给什么`${txeConfBean.setProperty('key','value')}`我如何将 InputText 和 OutPutText 的值传递给 setProperty ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T13:25:45.260

继承自遗留 JSP的`${}`不能对属性执行“设置”操作。它只能对属性进行“获取”操作。

如果你想在一个属性上同时支持“get”和“set”，你需要`#{}`. 更何况，一般在 JSF 中，你不应该*再*使用`${}`了。此外，为了通过输入组件获取/设置映射值，您必须使用大括号表示法通过其键引用映射值 as `#{bean.map[key]}`。

```
<h:form id="txeForm">
    <h:panelGrid columns="3">
        <c:forEach items="#{txeConfBean.listTable}" var="property">
            <h:outputLabel id="key" value="#{property.key}"/>
            <h:inputText id="value" value="#{txeConfBean.listTable[property.key]}" />
            <h:commandButton value="Change" />
        </c:forEach>
    </h:panelGrid>
</h:form> 
```

请注意，命令按钮操作被省略。`put()`当模型值即将更新时，JSF/EL 将“自动”已经调用映射的方法。在这个特定的结构中是不必要的。另请注意，在此构造中，提交了**整个**表单。您可能希望将命令按钮放在表格之外，或者`<f:ajax>`仅用于提交当前“行”。

### 也可以看看：

*   [JSP EL、JSF EL 和 Unified EL 的区别](https://stackoverflow.com/questions/4812755/difference-between-jsp-el-jsf-el-and-unified-el/4812883#4812883)

* * *

**与具体问题无关**：您正在使用 getter 方法进行业务工作。如果在迭代组件中引用了该属性，这是非常低效的。改为在（后）构造函数中执行业务工作。它只会被调用一次。这样，您可以使 getter 真正成为一个完全值得的 getter。

```
public HashMap<String,String> getListTable() {
    return listTable;
} 
```

### 也可以看看：

*   [JSF 多次调用 setter & getter](https://stackoverflow.com/questions/12740842/jsf-calling-setter-getter-multiple-times)。

# ios - 如何在不旋转的情况下以正确的方向启动横向 iOS 应用程序？

> ID：13513543
> 
> 赞同：1
> 
> 时间：2012-11-22T13:16:41.700
> 
> 标签：ios, rotation, landscape, uiinterfaceorientation, uideviceorientation

我正在开发一个仅限横向、仅限 iPhone 的 iOS6+ 应用程序，并且在让旋转按我想要的方式工作时遇到问题。

为应用程序目标设置的唯一受支持的界面方向是横向左和右。目前我只有一个视图控制器，它的`-supportedInterfaceOrientations`方法只是返回`UIInterfaceOrientationMaskLandscape`. info.plist 文件没有`UIInterfaceOrientation`密钥。

我想要发生的是，在启动图像消失并显示初始视图控制器后，它会立即以用户手持设备的方向正确显示，没有动画。

相反，如果用户拿着手机，home 键在右边，界面会被上下颠倒，然后自动旋转以匹配设备旋转。手机会自动选择一种横向模式而不是另一种，我需要它不喜欢两者（或者至少看起来不喜欢两者，即使这意味着需要使用诡计。）

[这个问题](https://stackoverflow.com/questions/8751956/set-initial-orientation-to-either-landscape-left-or-landscape-right-for-ios)似乎在问同样的事情，尽管那里的用例有些不同，而且没有答案。

我需要做什么才能实现这一目标？

# java - 替换字符串中的模式匹配

> ID：13513544
> 
> 赞同：0
> 
> 时间：2012-11-22T13:16:45.290
> 
> 标签：java, regex, pattern-matching

```
String output = "";
pattern = Pattern.compile(">Part\s.");
matcher = pattern.matcher(docToProcess);
while (matcher.find()) {
      match = matcher.group();
} 
```

我正在尝试使用上面的代码来查找`>Part\s.`里面的模式`docToProcess`（这是一个大型 xml 文档的字符串），然后我想要做的是将与模式匹配的内容替换为`<ref></ref>`

有什么想法可以使`output`变量等于`docToProcess`除了上面指出的替换吗？

**编辑：更换时我需要以某种方式使用匹配器。我不能只使用`replaceAll()`**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:20:28.357

你可以使用[`String#replaceAll`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)方法。它需要一个`Regex`作为第一个参数：-

```
String output = docToProcess.replaceAll(">Part\\s\\.", "<ref></ref>"); 
```

请注意，`dot (.)`是 中的一个特殊元字符`regex`，它匹配所有内容，而不仅仅是`dot(.)`. 所以，你需要转义它，除非你真的想匹配 . 之后的任何字符`>Part\\s`。您需要添加 2 个反斜杠才能在 Java 中转义。

* * *

如果你想使用`Matcher`类，你可以使用[Matcher.appendReplacement](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#appendReplacement%28java.lang.StringBuffer,%20java.lang.String%29)方法： -

```
 String docToProcess = "XYZ>Part .asdf";
 Pattern p = Pattern.compile(">Part\\s\\.");
 Matcher m = p.matcher(docToProcess);
 StringBuffer sb = new StringBuffer();
 while (m.find()) {
     m.appendReplacement(sb, "<ref></ref>");
 }
 m.appendTail(sb);
 System.out.println(sb.toString()); 
```

**输出 ： -**

```
"XYZ<ref></ref>asdf" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:28:38.663

这就是你需要的：

```
String docToProcess = "... your xml here ...";
Pattern pattern = Pattern.compile(">Part\\s.");
Matcher matcher = pattern.matcher(docToProcess);
StringBuffer output = new StringBuffer();
while (matcher.find()) matcher.appendReplacement(output, "<ref></ref>");
matcher.appendTail(output); 
```

`StringBuilder`不幸的是，由于 Java API 的历史限制，您不能使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:20:43.863

```
docToProcess.replaceAll(">Part\\s[.]", "<ref></ref>"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T13:20:51.850

```
String output = docToProcess.replaceAll(">Part\\s\\.", "<ref></ref>"); 
```

# php - 在同一页面中将 PHP 值赋予 Javascript

> ID：13513545
> 
> 赞同：1
> 
> 时间：2012-11-22T13:17:00.277
> 
> 标签：php, javascript, jquery

如何在同一页面中将 ID 值提供给 Javascript。

示例数据：

```
<a href="" id="ctextarea<?php echo $uid; ?>"/> 
```

JS：

```
function recountss()
        {
            var maxlen=280;
            var current = maxlen-$('#ctextarea').val().length;
            $('.counters').html(current);

            if(current<0 || current==maxlen)
            {
                $('.counters').css('color','#D40D12');
                $('input.comment_button').attr('disabled','disabled').addClass('inact');
            }
            else if (!$.trim($("#ctextarea").val())) {
                $('input.comment_button').attr('disabled','disabled').addClass('inact');
            }
            else
                $('input.comment_button').removeAttr('disabled').removeClass('inact');

            if(current<10)
                $('.counters').css('color','#D40D12');

            else if(current<20)
                $('.counters').css('color','#5C0002');

            else
                $('.counters').css('color','#C0C0C0');
        } 
```

我尝试使用 get 类，但它对 1 个数据而不是很多数据的影响。有想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:18:31.487

这应该工作：

```
<script type="text/javascript">
    var id = "ctextarea<?php echo $uid; ?>";
</script> 
```

在您的 javascript 中，您可以执行以下操作：

```
var current = maxlen-$(id).val().length; 
```

但是您应该为变量使用其他名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:24:55.307

试试`data-`属性：

```
<a href="somewhere.php" data-id="<?php echo $uid; ?>" id="link">Link</a> 
```

在 JS 中，您可以执行以下操作：

```
document.getElementById('link').getAttribute('data-id'); 
```

这些东西在 HTML5 中是完全有效的——但即使是较旧的浏览器也不在乎。

# node.js - 如何以 HTML5 输入类型日期格式（dd/mm/yyyy）显示猫鼬日期，

> ID：13513548
> 
> 赞同：0
> 
> 时间：2012-11-22T13:17:02.997
> 
> 标签：node.js, html, mongodb, mongoose, handlebars.js

我有一个像这样的 MongoDB 架构

```
var Person = new Schema({
  "Name": { type: String, required: true },
  "DOB": {  type: Date, "default": Date.now  }
}); 
```

并创建了一个新对象（NodeJs using mongoose ODM）

```
{   
  "Name": "Dany",  
  "_id": "50ae0cb32c46b2901c000001",  
  "__v": 0,  
  "DOB": "2012-11-22T12:54:43.852Z"   
} 
```

我可以从中检索这个对象和 DOB。我想要的是：将此 DOB 转换为某种合适的格式，可以直接在 HTML5“日期”输入元素中分配它。这必须使用玉和把手呈现。

类似于`var brthday = Person.DOB.tosome_suitable_form);`然后`<input type="date" value="brthday">`或（而不是html语法jade和Handlebars语法是必需的）。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T13:35:37.197

试试[moment.js](http://momentjs.com/)，它几乎是 nodejs 的标准日期模块。您可以使用`moment(doc.DOB).format('whatever_format_you_want')`. 您可以从他们的文档中查看格式。

# asp.net-mvc - 编辑模型，包括导航属性 MVC4

> ID：13513550
> 
> 赞同：2
> 
> 时间：2012-11-22T13:17:07.253
> 
> 标签：asp.net-mvc, vb.net, navigation

我有一个人模型：

```
Partial Public Class Person
Public Property Id As Long
<DisplayName("Fornavn")>
Public Property Firstname As String
<DisplayName("Efternavn")>
Public Property Lastname As String
Public Property chr_cpr As String
<DisplayName("Medarbejdernummer")>
Public Property EmployeeNumber As String

Public Overridable Property Accounts As ICollection(Of Account) = New HashSet(Of Account)

Public Overridable Property PaymentCards As ICollection(Of PaymentCard) = New HashSet(Of PaymentCard)

Public Overridable Property PaymentRoles As ICollection(Of PaymentRole) = New HashSet(Of PaymentRole)

Public Overridable Property AllPaymentRoles As ICollection(Of PaymentRole) = New HashSet(Of PaymentRole)

Public Overridable Property BillableDepartments As ICollection(Of Department) = New HashSet(Of Department)

Public Overridable Property AllDepartments As ICollection(Of Department) = New HashSet(Of Department)

Public Overridable Property AccessablePosDevices As ICollection(Of PosDevice) = New HashSet(Of PosDevice)

Public Overridable Property AllPosDevices As ICollection(Of PosDevice) = New HashSet(Of PosDevice)

End Class 
```

和一个帐户模型：

```
Partial Public Class Account
Public Property Id As Long
Public Property PersonId As Long
Public Property Balance As Decimal
Public Property SchemaId As Long
Public Property HasAutoRefill As Boolean

Public Overridable Property Schema As AccountSchema
Public Overridable Property Person As Person

End Class 
```

还有一个支付卡模型：

```
Partial Public Class PaymentCard
Public Property Id As Long
Public Property Serial As String
Public Property TypeId As Nullable(Of Long)
Public Property IsActive As Boolean
Public Property PersonId As Long

Public Overridable Property Type As CardType
Public Overridable Property Person As Person
End Class 
```

我希望能够从 Person/Edit 视图中编辑 Person、PaymentCard 和 Account 属性。我正在使用 EditorTemplates。这是我的看法：

```
@ModelType IDCompany.WEB.Person

@Using Html.BeginForm()
    @Html.ValidationSummary(True)
@<fieldset>
        <legend>Person</legend>

    @Html.HiddenFor(Function(model) model.Id)

    <div class="editor-label">
        @Html.LabelFor(Function(model) model.Firstname)
    </div>
    <div class="editor-field">
        @Html.EditorFor(Function(model) model.Firstname)
        @Html.ValidationMessageFor(Function(model) model.Firstname)
    </div>

    <div class="editor-label">
        @Html.LabelFor(Function(model) model.Lastname)
    </div>
    <div class="editor-field">
        @Html.EditorFor(Function(model) model.Lastname)
        @Html.ValidationMessageFor(Function(model) model.Lastname)
    </div>

    <div class="editor-label">
        @Html.LabelFor(Function(model) model.chr_cpr)
    </div>
    <div class="editor-field">
        @Html.EditorFor(Function(model) model.chr_cpr)
        @Html.ValidationMessageFor(Function(model) model.chr_cpr)
    </div>

    <div class="editor-label">
        @Html.LabelFor(Function(model) model.EmployeeNumber)
    </div>
    <div class="editor-field">
        @Html.EditorFor(Function(model) model.EmployeeNumber)
        @Html.ValidationMessageFor(Function(model) model.EmployeeNumber)
    </div>
 </fieldset>

@<table class="cardTable">
    <tr>
        <th>Id</th>
        <th>Serienummer</th>
        <th>Type</th>
        <th>Aktiv</th>
    </tr>
    @Html.EditorFor(Function(x) x.PaymentCards)
</table>

@Html.EditorFor(Function(x) x.Accounts)

@<p><input type="submit" value="Save" /></p>

End Using
<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@Section Scripts
    @Scripts.Render("~/bundles/jqueryval")
End Section 
```

这是我的人/编辑模板/帐户：

```
@ModelType IDCompany.WEB.Account

    @Html.EditorFor(Function(model) model.PersonId)
    @Html.EditorFor(Function(model) model.Id)
    @Html.EditorFor(Function(model) model.HasAutoRefill)
    @Html.EditorFor(Function(model) model.SchemaId) 
```

还有我的 Person/EditorTemplates/PaymentCard：

```
@ModelType IDCompany.WEB.PaymentCard

        @Html.HiddenFor(Function(model) model.TypeId)
        @Html.HiddenFor(Function(model) model.PersonId)

        @Html.HiddenFor(Function(model) model.Id)
        @Html.HiddenFor(Function(model) Model.Serial)
        @Html.HiddenFor(Function(model) Model.Type.Name)
 <tr class="cardRow">
            <td>@Model.Id</td>
            <td>@Model.Serial</td>
            <td>@Model.Type.Name</td>
           <td>@Html.EditorFor(Function(model) model.IsActive)</td>
 </tr> 
```

这是我的 PersonController 中的编辑功能：

```
 <HttpPost()> _
    Function Edit(ByVal person As Person) As ActionResult
        Dim kontoSubMenu As New List(Of MenuPoint)
        Dim emptyList As New List(Of String)
        kontoSubMenu.Add(New MenuPoint("Kantine", emptyList, "Kontooplysninger", "Home", "All"))
        kontoSubMenu.Add(New MenuPoint("Personer", emptyList, "Personer", "Person", "All"))
        kontoSubMenu.Add(New MenuPoint("Test", emptyList, "LogUd", "Home", "All"))
        ViewBag.kontoSubMenu = kontoSubMenu
        If ModelState.IsValid Then

            Dim paymentcardList
            paymentcardList = person.PaymentCards.ToList()
            For Each pc In paymentcardList
                db.Entry(pc).State = EntityState.Modified

                db.SaveChanges()

            Next
            Dim accountList
            accountList = person.Accounts.ToList()
            For Each ac As Account In accountList
                db.Entry(ac).State = EntityState.Modified
                'Dim accountValue As Account = db.Accounts.Find(accountt.Id)

                db.SaveChanges()
            Next

            db.Entry(person).State = EntityState.Modified
            db.SaveChanges()

            Return RedirectToAction("Index")
        End If

        Return View(person)
    End Function 
```

我是 MVC 的新手。当我尝试在视图中编辑 som 数据时，我收到错误消息：“发生引用完整性约束冲突：定义引用约束的属性值在关系中的主体和依赖对象之间不一致。” 关于“db.Entry(pc).State = EntityState.Modified”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:17:29.910

您的代码中有一些问题：

1.  `db.SaveChanges()`你为什么在你的行动中多次打电话？最后你应该只调用一次。全部或全部保存。
2.  当模型绑定器为您的操作创建参数对象时，它对 EF 一无所知。例如，对象的`Person`属性`PaymentCard`不会被设置。当您尝试通过调用将对象重新附加到数据上下文时，这可能是 EF 抱怨的地方`db.Entry(pc).State = EntityState.Modified`。您应该通过 id 从数据库中重新查询对象并映射所需/更改的属性。最好不要将 EF 类直接传递给视图，而是使用普通的 ViewModel 类。
3.  您用于类型`EditorFor`为 的属性。您的 EditorTemplate 的模型类型为. 那是行不通的。您可以为您的视图编写另一个 EditorTemplate或只是在您的视图中进行迭代（抱歉，在 C# 中）：`Person.PaymentCards``ICollection(Of PaymentCard)``PaymentCard``ICollection(Of PaymentCard)`

    ```
    @foreach(var acc in Model.Accounts) {
        @Html.EditorFor(m => acc)
    } 
    ```

# ruby-on-rails - 当更新操作中的表单验证错误时如何重定向到相同的 url

> ID：13513552
> 
> 赞同：1
> 
> 时间：2012-11-22T13:17:15.397
> 
> 标签：ruby-on-rails, validation, redirect

验证时是否可以重定向到相同的 url (site.com/posts/1/edit)，保留以前输入的数据？不要（site.com/posts/）

我是说

site.com/posts/1/edit ---> 验证失败 ---> site.com/posts/1/edit

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:25:04.507

您可以使用以下代码段：

```
 def update
        @post= Post.new(params[:post])
        if @post.valid?
          redirect_to valid_path
        else
          render action: "edit"
        end
    end 
```

如果用户无效，rails 将再次呈现编辑页面。如果您使用 form_for @post，表单值将再次填写

# php - 如何在 Xampp 中升级到 php 版本 5.4.8？

> ID：13513554
> 
> 赞同：0
> 
> 时间：2012-11-22T13:17:20.363
> 
> 标签：php, apache, xampp

我已经搜索过，但我找不到正确的指南。我得到了指南，但没有 5.4.8 版本的指南。根据[http://hype-free.blogspot.in/2007/07/updating-php-in-xampp-for-windows.html](http://hype-free.blogspot.in/2007/07/updating-php-in-xampp-for-windows.html)我在 D:\xampp\apache\modules 中没有 php5apache_2.dll 也没有在 \bin 。请提供解决方案。我正在使用 xampp 版本 1.7.7 、 php 5.3.8 和 apache 2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:20:03.783

最佳选择：

*   备份当前`htdocs`的`mysql`Xampp
*   停止 Apache 和 Mysql 服务并卸载当前 Xampp
*   安装[`XAMPP 1.8.1`](http://www.apachefriends.org/en/xampp-windows.html)具有**MySQL 5.5.27**、**PHP 5.4.7**和**phpMyAdmin 3.5.2.2的新版本**
*   然后你可以升级 PHP 版本**5.4.8**，下载**[Windows 二进制文件](http://windows.php.net/download/#php-5.4)**

# model-view-controller - 为什么 MVP 中没有控制器

> ID：13513557
> 
> 赞同：0
> 
> 时间：2012-11-22T13:17:28.427
> 
> 标签：model-view-controller, gwt, mvp

我最近在一家公司接受采访，有人问我 MVC 和 MVP 之间的区别（因为我曾在 GWT 工作过）。

我告诉他，在 MVP 中，数据（模型）与视图分离，而在 MVC 中，视图和模型相互交互。他看起来对这个答案并不满意。

我说错了吗？

然后，他问我为什么MVP中没有控制器。它的优点/缺点是什么？我对此完全空白。

你能提供你的意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:59:55.783

我希望这个简化的表示会有所帮助。该图像是经典 Web 应用程序中典型的 MVC 使用示例以及胖客户端 Web 应用程序中 MVP 的使用示例。

![在此处输入图像描述](../Images/2f92e3b3fb27bba2c9f7c54d2ec90fd5.png)

我不会谈论disadv。/优点，因为它们都非常适合不同的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:27:51.740

我在什么是 MVP 和 MVC 上找到了一篇关于此的文章，[有什么区别？](https://stackoverflow.com/questions/2056/what-are-mvp-and-mvc-and-what-is-the-difference). 通常，mvc 更像是一种网站风格的方法，而 mvp 更像是一种 .net 方法（认为您也可以采用 mvvm 方式）。mvp 更像是一种动手方法，它与视图交互更多，因为控制器将只与模型和视图对话，将数据传递给它，mvp 将采用这种方式以及数据绑定并可能成为视图的一部分。

# grails - 可以通过grails中的控制器操作接收paypal-ipn吗

> ID：13513562
> 
> 赞同：0
> 
> 时间：2012-11-22T13:17:44.383
> 
> 标签：grails, paypal-ipn, paypal-subscriptions

我需要在我们的 grails 应用程序中集成贝宝订阅。

我在沙盒中创建了订阅按钮。我创建了一个控制器操作，并在按钮 ipn 中提供了相应的 url。

付款已成功进行，并且正在发送电子邮件通知。但是ipn没有调用该操作。

是不是 ipn url 不能是控制器动作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:29:45.913

该网址可以从外部访问吗？Paypal 将在他们的网络服务器订阅后调用您的 url，因此您的服务器必须可以从 Internet 访问。

# javascript - 防止 Enter 键作为鼠标单击起作用

> ID：13513567
> 
> 赞同：3
> 
> 时间：2012-11-22T13:18:10.237
> 
> 标签：javascript, jquery, html

我注意到，如果您专注于可以触发鼠标单击的元素，则 Enter 键的作用就像您左键单击鼠标一样。我想避免这种运行，因为它在我的其他代码中发生冲突。

在下面的示例中，如果我关注此 imageButton 并单击一次，则可以使用 Enter 键“完成”下一次单击，因此我不希望这样做，因为此按钮会触发 slideToggle() 并显示隐藏的 div，所以IMO 用键盘切换这个 div 是没有意义的。

![在此处输入图像描述](../Images/baefafdd4c02febb88a904881a25c7e2.png)

有没有办法让它成为**全球性的方式**？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:22:14.030

试试这个：

```
$(".myElements").keypress(function(e) {
    if (e.which == 13) {
        e.preventDefault();
    }
}); 
```

它只会停止`enter`按键行为，允许其他按键功能照常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:24:03.597

听`"keypress"`和`.preventDefault()`

前任。和`<myelm class="nokey"/>`

```
function noKeyPressing(){
    var elms = document.getElementsByClassName('nokey'),
        stop = function stop(e){ return e.preventDefault(), false; },
        i = elms.length;
    while(--i >= 0){
        elms[i].addEventListener('keypress', stop, true);
    }
}
noKeyPressing() 
```

如果您只是想阻止，`Enter`那么要查找的 keyCode 是 13。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:20:03.557

尝试

```
.unbind('keydown'); 
```

禁用元素上的所有关键事件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T13:23:58.880

您可以返回 false 以阻止默认操作。

```
 <input type="submit" onkeypress="return false;" value="Submit" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T13:24:18.013

试试这个代码

```
 $('body *').keypress(function (e) {
    if (e.which == 13) {
        e.preventDefault();
    }
}); 
```

上面的代码将阻止对页面中的每个元素按 enter ，您可以`$('body *')`根据您的情况将选择器更改为其他内容

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T13:25:05.647

我认为另一种可能的方式：

```
$('.elems').on('click',function(){$(this).blur()}); 
```

# android - 使用 Robolectric 测试 ListView

> ID：13513568
> 
> 赞同：4
> 
> 时间：2012-11-22T13:18:17.220
> 
> 标签：android, android-listview, robolectric

我目前正在尝试使用 Robolectric 测试一些 Android 代码，但我的 ListView 遇到了一些问题。当我尝试访问子视图时，由于列表为空，ListView 始终返回 null。

应用程序的实现如下所示，并创建了一个简单的列表视图：

```
private ListView listView;
private ArrayAdapter<String> adapter;
private static String values[] = 
        new String[] {"Android", "Apple", "Windows" };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_overview);

    initialize();
}

private void initialize() {
    listView = (ListView) findViewById(R.id.tweet_list);

    adapter = new ArrayAdapter<String>(
            getApplicationContext(), 
            android.R.layout.simple_list_item_1, 
            values);

    listView.setAdapter(adapter);
} 
```

但是，当我尝试按以下方式访问我的 ListView 时。当我通过 getChildAt() 访问 ArrayAdapter 时，Robolectric TestRunner 总是返回 null

```
private OverviewActivity activity;
private ListView listView;

@Before
public void setUp() throws Exception {
    activity = new OverviewActivity();      
    activity.onCreate(null);

    listView = (ListView) activity.findViewById(R.id.tweet_list);
}

@Test
public void shouldFindListView() throws Exception {     
    if (listView.getChildCount() > 0) {
        assertThat(
                "Android",
                equalTo(listView.getChildAt(0).toString()));
    } else {
        fail("no child views are avaliable");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-08-06T02:39:10.913

如果像我这样的人，仍然访问链接以解决如何使用 Roboelectric 3.0 测试列表视图。这是我的 MAinActivityTest 文件

```
private MainActivity mainActivity;
private ListView lstView;

@Before
public void setup() throws Exception{
    mainActivity= Robolectric.setupActivity(MainActivity.class);
    assertNotNull("Mainactivity not intsantiated",mainActivity);
    lstView=(ListView)mainActivity.findViewById(R.id.list);//getting the list layout xml
    ShadowLog.stream = System.out; //This is for printing log messages in console
}

@Test
public void shouldFindListView()throws Exception{
    assertNotNull("ListView not found ", lstView);
    ShadowListView shadowListView = Shadows.shadowOf(lstView); //we need to shadow the list view

    shadowListView.populateItems();// will populate the adapter
    ShadowLog.d("Checking the first country name in adapter " ,
        ((RowModel)lstView.getAdapter().getItem(0)).getCountry());

    assertTrue("Country Japan doesnt exist", "Japan".equals(((RowModel) lstView.getAdapter().getItem(0)).getCountry()));
    assertTrue(3==lstView.getChildCount());
} 
```

RowModel 是要在列表视图中显示的字段的简单 POJO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:33:05.520

我看到您使用的是旧版本的 Robolectric。我们对您使用 Robolectric 1.1 的类似代码没有任何问题。

因此，将此行添加到您的 pom 文件中：

```
<dependency>
        <groupId>com.pivotallabs</groupId>
        <artifactId>robolectric</artifactId>
        <version>1.1</version>
        <scope>test</scope>
    </dependency> 
```

或者从这里下载并将其捆绑到您的项目中 [http://mvnrepository.com/artifact/com.pivotallabs/robolectric/1.1](http://mvnrepository.com/artifact/com.pivotallabs/robolectric/1.1)

# symfony - Symfony2 将项目拆分为捆绑包

> ID：13513570
> 
> 赞同：0
> 
> 时间：2012-11-22T13:18:21.340
> 
> 标签：symfony

我是 Symfony2 的新手，我正在开始新项目，其中将包含文章、带有帖子的博客、民意调查等。该应用程序将具有管理部分。

我想知道应用程序应该分成多少包。什么是最佳实践。

我应该做：

*   一个包含所有逻辑（公共和私有）的捆绑包。
*   整个门户的公共包和私有部分的管理包。
*   文章包、博客包、投票包等和管理包（可能分为 AdminArticle 包、AdminBlog 包...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:16:33.170

我建议您将应用程序划分为逻辑包，换句话说，这是您的第三个选择。例如：主包、文章包、博客包、投票包和管理包

在 Main Bundle 中，您可以制作全局方法、主页、树枝扩展等。

# php - 在 yii 中，当用户在另一个浏览器选项卡中从 facebook 注销时，facebook opengraph 返回 uid

> ID：13513575
> 
> 赞同：0
> 
> 时间：2012-11-22T13:18:41.103
> 
> 标签：php, yii, facebook-php-sdk, yii-extensions

我在 yii 1.1 中工作，并且有一个 php sdk 3.1.1 的扩展 yii-facebook-opengraph 包装器

```
 $facebook_id = Yii::app()->facebook->getUser();
    if ($facebook_id) 
      { 
       // check that you get a Facebook ID before calling api()
       // now we know we have a Facebook Session,
       $user_info = Yii::app()->facebook->api('/me'); // so it's safe to call api()
       if ($user_info) 
       {
          // ...  code ...
       }
      } 
```

问题是当用户在一个选项卡中通过 facebook 登录并在另一个选项卡中从 facebook 注销时`$facebook_id`仍然设置。为什么？当尝试访问用户信息时，出现错误“需要用户会话”。我搜索了很多，找到了类似的东西

```
$facebook->getSession(); 
```

获取用户会话但此功能在 yii-facebook-opengraph 中不可用请建议我任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:19:54.477

尝试：

```
if ($facebook_id) {
    try
    {
        $user_info = $fb->api('/me');
    }
    catch(FacebookApiException $e){
        $fb->destroySession();
    }
} 
```

其中*$fb*是您的**$fb = new Facebook();实例**

# android - 放大时Android MapView覆盖消失

> ID：13513578
> 
> 赞同：1
> 
> 时间：2012-11-22T13:18:44.053
> 
> 标签：android, google-maps, maps, overlays

我正在开发一个简单的 Android 应用程序，用于在地图上绘制路线。一切顺利，但在放大我的三星 Galaxy S2 时遇到了问题。它在 Galaxy S3 上运行良好，所以我想知道它是否与低规格设备上的内存管理有关。它在模拟器上也可以正常工作。

这是位于叠加层 onDraw 方法中的等效代码，只是为了在此处发布而压缩：

```
Point current = new Point();
Path path = new Path();
Projection projection = mapView.getProjection();

Iterator<GeoPoint> iterator = pointList.iterator();
if (iterator.hasNext()) {
    projection.toPixels(iterator.next(), current);
    path.moveTo((float) current.x, (float) current.y);
} else return path;
while(iterator.hasNext()) {
    projection.toPixels(iterator.next(), current);
    path.lineTo((float) current.x, (float) current.y);
}

Paint roadPaint = new Paint();
roadPaint.setAntiAlias(true);
roadPaint.setStrokeWidth(8.0f);
roadPaint.setColor(Color.BLACK);
roadPaint.setStyle(Paint.Style.STROKE);

canvas.drawPath(path, roadPaint); 
```

它与大多数用于执行此操作的示例代码并没有太大的不同。我只是想知道是否有人可以证实我的怀疑并建议我是否可以在配置或调整方面做些什么来强制在所有缩放级别上绘制？

提前致谢。

干杯，内森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:33:55.303

问题是您正在自己为地图视图的特定状态绘制叠加层。您应该改用[OverlayItem](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/OverlayItem)。

OverlayItem 被添加到 MapView 覆盖集合中，并且 MapView 根据它自己的状态（缩放、位置等）处理所有重新绘制

```
@Override
public void draw( Canvas canvas, MapView mapView, boolean shadow )
{
    super.draw( canvas, mapView, shadow );

    int x1 = -1;
    int y1 = -1;
    int x2 = -1;
    int y2 = -1;

    Paint paint = new Paint();
    paint.setStyle( Paint.Style.STROKE );
    paint.setColor( GeoLocation.ROUTE_COLOR );
    paint.setStrokeWidth( STROKE_WIDTH );

    for ( int i = 0; i < mRouteGeoPoints.size(); i++ )
    {
        Point point = new Point();
        mapView.getProjection().toPixels( geoPoints.get( i ), point );
        x2 = point.x;
        y2 = point.y;
        if ( i > 0 )
        {
            canvas.drawLine( x1, y1, x2, y2, paint );
        }
        x1 = x2;
        y1 = y2;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T01:02:48.237

您说上面的代码是等效的（不是您正在运行的真实代码），这很清楚，因为您正在返回一个您无法返回的`Path`对象`onDraw()`。

您显示的代码的“压缩形式”应该与使用`drawLine()`. 所以问题应该来自其他东西（可能是原始代码）。

无论如何，我会给你一些提示：

*   当您在画布上绘制的对象的顶部和底部都在屏幕之外时，该对象将被忽略且不绘制。检查这是否与您的路径无关。在这篇文章中查看我的答案[Android Map Overlay Disappears on Zoom](https://stackoverflow.com/questions/12713671/android-map-overlay-disappears-on-zoom/12714185#12714185)
*   您不需要每次都重建路径对象。您可能已经这样做了，这就是您制作上述简短版本的原因。请参阅我在这篇文章中的回答以及一些改进路径绘制的建议：[缩放时的叠加行为](https://stackoverflow.com/questions/13051864/overlay-behavior-when-zooming/13055270#13055270)
*   如果由于某种原因您真的想使用较慢的方法`drawLine()`，您可以使用以下方法使线条看起来更好：

    ```
    paint = new Paint();
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeJoin(Paint.Join.ROUND);
    paint.setStrokeCap(Paint.Cap.ROUND);
    paint.setColor(...);
    paint.setAlpha(...);
    paint.setStrokeWidth(...); 
    ```

最后，如果问题仍然存在，请使用更相关的代码更新您的问题并告诉我。也许我可以提供进一步的帮助。

问候。

# actionscript-3 - 是否可以在 AS3 项目中嵌入 mp4 电影？（没有网络流）

> ID：13513584
> 
> 赞同：0
> 
> 时间：2012-11-22T13:19:02.477
> 
> 标签：actionscript-3, flash, embedded-resource

我需要将电影文件嵌入到 AS3 项目中并播放。我以前只使用过 NetStreams，但由于这次我想将它作为嵌入式资源，所以没有必要。

我知道 MP3 和其他资源是可能的，但在 mp4 等视频上找不到任何明确的信息。

由于“嵌入”这个词的含糊不清，很难用谷歌搜索这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:29:52.773

您可以使用如下元数据将任何内容作为二进制数据嵌入：

```
[嵌入("file.mp4", mimeType="application/octet-stream")]
```

然后您可以在运行时将这些数据作为 ByteArray 获取。因此，如果您可以使用字节数组进行播放，那么是的，这是可能的。

# .net - VB.net 函数中是否有任何 IN 运算符，如 SQL 中的函数

> ID：13513586
> 
> 赞同：15
> 
> 时间：2012-11-22T13:19:04.920
> 
> 标签：.net, vb.net, operators

是否有任何函数或运算符，例如：

```
 If RoleName in ( "Val1",  "Val2" ,"Val2" ) Then
        'Go
    End If 
```

代替：

```
 If RoleName = "Val1" Or RoleName = "Val2" Or RoleName = "Val2" Then
        'Go
    End If 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-22T13:22:24.020

尝试使用数组，然后您可以使用 Contains 扩展：

```
Dim s() As String = {"Val1", "Val2", "Val3"}
If s.Contains(RoleName) Then
  'Go      
End If 
```

或者没有声明行：

```
If New String() {"Val1", "Val2", "Val3"}.Contains(RoleName) Then
  'Go
End If 
```

在 OP 中，如果 Contains 扩展不可用，您可以尝试以下操作：

```
If Array.IndexOf(New String() {"Val1", "Val2", "Val3"}, RoleName) > -1 Then
  'Go
End If 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-22T14:31:17.030

`In`您可以使用如 LarsTech 所示的 Contains，但添加扩展方法也很容易：

```
Public Module Extensions

    <Extension()> _
    Public Function [In](Of T)(value As T, ParamArray collectionValues As T()) As Boolean
        Return collectionValues.Contains(value)
    End Function

End Module 
```

你可以像这样使用它：

```
If RoleName.In("Val1", "Val2", "Val3") Then
    'Go
End If 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-11-22T13:24:21.877

您还可以使用以下`Select..Case`语句：

```
Select Case RoleName 
    Case "Val1", "Val2", "Val3"
        ' Whatever
End Select 
```

# mysql - mysql选择查询优化

> ID：13513589
> 
> 赞同：3
> 
> 时间：2012-11-22T13:19:18.097
> 
> 标签：mysql, performance, select, query-optimization

我有两个表 testa 和 testb。

```
CREATE TABLE `testa` (
  `id` INT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(50) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

CREATE TABLE `testb` (
  `id` INT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(50) DEFAULT NULL,
  `aid1` INT(10) DEFAULT NULL,
  `aid2` INT(10) DEFAULT NULL,
  `aid3` INT(10) DEFAULT NULL,
  PRIMARY KEY (`id`)
); 
```

目前，我正在运行以下查询，以检索 testa 表中的 id 与 tableb 中的aid1、aid2、aid3 的任何列匹配的所有行。该查询正在检索准确的结果，但执行至少需要 30 秒，这太多了。我也尝试使用 UNION 优化我的查询，但没有这样做。

```
SELECT a.id, a.name, b.name, b.id 
FROM testb b 
INNER JOIN testa a ON b.aid1 = a.id OR b.aid2 = a.id OR b.aid3 = a.id ; 
```

如何优化我的查询，使其总执行时间在 2-3 秒内？

提前致谢...

解释的结果：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  b   ALL idx_aid1,idx_aid2,idx_aid3  (NULL)  (NULL)  (NULL)  10940   
1   SIMPLE  a   ALL PRIMARY (NULL)  (NULL)  (NULL)  7512    Using where; Using join buffer 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T08:05:37.760

因为您允许aid1、aid2、aid3 为NULL（显然，根据您的解释，它们大多为NULL），您的连接条件实际上是不可索引的。

为什么？如果aid1、aid2 或aid3 中的任何一个为NULL， SQL 表达式`b.aid1 = a.id OR b.aid2 = a.id OR b.aid3 = a.id` 的计算结果为NULL，这就是MySQL 规划器不显示使用索引的原因。

解决方案：不要对aid1、aid2、aid3 使用NULL。相反，发明特殊的 id（比如 0），它保证在 testa 中不存在。然后，确保 testb.aid[123] 不为 NULL（并将其分配给 0，之前为 NULL）。

**编辑**：为这个问题添加替代方法。

如果您有能力通过添加一个表来更改架构，您也可以解决此问题。这个新表将包含您当前存储在表 testb 中的援助列表，而 testb 将只包含一个链接到新表的 id。这应该类似于此[答案](https://stackoverflow.com/questions/13412735/how-to-setup-sqlite-join-on-variable-column-data/13413130#13413130)中解释的内容。这样做的另一个好处是您可以允许任意数量的援助（而不是现在只有 3 个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T06:09:23.917

除了其他人建议的索引之外，请确保您`ANALYZE`的表，以便表上的统计信息是最新的。如果统计信息与表中的实际数据大相径庭，那么查询计划器将做出错误的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:12:30.417

您是否尝试过加入`IN`而不是`OR`？

`SELECT a.id, a.name, b.name, b.id FROM testb b INNER JOIN testa a ON a.id IN (b.aid1, b.aid2, b.aid3) ;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T13:23:15.760

您应该索引以下列以避免全表扫描

```
 `aid1` INT(10) DEFAULT NULL,
  `aid2` INT(10) DEFAULT NULL,
  `aid3` INT(10) DEFAULT NULL, 
```

如果你想改变表格

```
ALTER TABLE testb ADD INDEX (aid1);
ALTER TABLE testb ADD INDEX (aid2);
ALTER TABLE testb ADD INDEX (aid3); 
```

# mysql - MDB 文件到 Mysql

> ID：13513591
> 
> 赞同：1
> 
> 时间：2012-11-22T13:19:24.810
> 
> 标签：mysql, oracle, ms-access

我有带有数据的 MDB 文件和 Mysql 数据库，我想将 MDB 文件的一些特定字段插入到我的 mysql 数据库中，是否有任何机制来隐藏它并提及一些特定的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:25:43.510

如果您有 Microsoft Access，则可以使用适用于 MySQL 的适当 ODBC 驱动程序创建指向 MySQL 数据库的链接。但是安装 MySQL Workbench 和使用迁移助手可能更容易（在这种情况下，您必须使用 ODBC 驱动程序进行 Access）。

# java - 如何在按钮单击时关闭小程序

> ID：13513592
> 
> 赞同：2
> 
> 时间：2012-11-22T13:19:29.373
> 
> 标签：java, applet

如何从我使用过的代码中关闭小程序**System.exit(0)**但它只会抛出一堆异常并且它没有关闭它。我知道关闭小程序是用户的责任，但是还有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:24:08.233

**不要**调用`System.exit(0)`小程序。这可能会导致浏览器关闭。

更好的方法是在 a 中运行应用程序`JFrame`并使用[Java Web Start](http://docs.oracle.com/javase/tutorial/deployment/webstart/index.html)来启动应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T14:35:55.500

在`actionPerformed(ActionEvent)`方法中，调用..

```
// end the applet by navigating to the 'applet ended' URL
applet.getAppletContext().showDocument(appletCloseURL); 
```

# android - 如何获取列表视图选定行的小部件ID

> ID：13513596
> 
> 赞同：0
> 
> 时间：2012-11-22T13:19:39.417
> 
> 标签：android, facebook, listview, textview

我在我的应用程序中使用自定义列表视图。在我的行中我有（两个图像，剩余的文本视图）。

当我单击其中一个 textview 时，我想设置另一个 textview 数据。我编写了下面的代码来执行此操作

```
 likes.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
//          if(likes.getText().toString().equals("Like")){
               TextView t=(TextView)v;
              TextView likesnumber1 = (TextView) findViewById(R.id.likesnumber);
//            TextView  likesnumber = (TextView) convertView.findViewById(R.id.likesnumber);
                int i=  Integer.parseInt(likescount.get(position));

           if(like_or_ulike.get(position).equals("Like")){
                Log.e("inlike","like");
                like_or_ulike.set(position, "Unlike");
                t.setText(like_or_ulike.get(position));
                UrltoValue.getValuefromUrl("https://graph.facebook.com/"+objectid.get(position)+"/likes?access_token="+accesstoken+"&method="+"post");
//             listView.getAdapter().getItemAt(position);
               j=i+1;
               String s=Integer.toString(j);
            likescount.set(position, s);
             likesnumber1.setText(likescount.get(position));

            }
            else{
                Log.e("unlike","unlike");
                like_or_ulike.set(position, "Like");
                t.setText(like_or_ulike.get(position));
                UrltoValue.getValuefromUrl("https://graph.facebook.com/"+objectid.get(position)+"/likes?access_token="+accesstoken+"&method="+"DELETE");

                   j=i-1;
                 String s=Integer.toString(j);
                likescount.set(position, s);
                 likesnumber1.setText(likescount.get(position));
            }
        }
    }); 
```

当我单击 textview 时，如何获取特定行的另一个 textview id。是否可以获取该特定行的 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:29:02.660

当您想在同一行中获取 textview 时，您可以执行以下操作。

使用单击的文本视图获取其父视图，然后使用父视图，您可以搜索您的文本视图：

```
View parent = (View) textViewThatWasClicked.getParent();
        if (parent != null) {
            TextView textViewThatYouWantToChange = parent.findViewById(R.id.textViewThatYouWantToChange);
            textViewThatYouWantToChange.setText(...);
        } 
```

您需要将要查找的 id 更改为其他 textview 的 id。如果您需要设置一个 id，您可以在您使用的 xml 布局文件中执行此操作。

我不能很好地遵循你的代码来实际给你代码，但这应该足以让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:24:17.390

如果列表视图中的每一行都有自定义布局，那么您可以为自定义视图中的每个视图提供 id，然后为您的列表视图设置 setOnItemClickListener，您将能够以视图的形式访问每一行。当您可以像视图一样访问您的行时，您可以使用 view.findViewById 并通过它们的 id 从自定义视图中获取所有视图。

# javascript - 删除循环中的函数创建 - 闭包

> ID：13513598
> 
> 赞同：0
> 
> 时间：2012-11-22T13:19:51.827
> 
> 标签：javascript, jshint

我想在我的代码中删除函数创建，但我不知道怎么做？这里有人可以帮助我吗？

```
 for (var eventName in this.events) {
        var eventFunc = this.events[eventName],
            splitEventName = eventName.split(" "),
            eventType = splitEventName[0],
            eventUI = splitEventName[1];

        Utilities.addEventListener(this.ui[eventUI], eventType, (function(view, eventFunc) {
            return function(e) {
                eventFunc.call(view, e);
            };
        }(this, eventFunc)));
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:24:19.763

您可以将立即调用的函数表达式移出循环并将其转换为正常的函数声明。然后你可以简单地在每次迭代中调用它：

```
function makeEventListener(view, eventFunc) {
    return function (e) {
        eventFunc.call(view, e);
    };
}
for (var eventName in this.events) {
    var eventFunc = this.events[eventName],
        splitEventName = eventName.split(" "), 
        eventType = splitEventName[0],
        eventUI = splitEventName[1];
    Utilities.addEventListener(this.ui[eventUI], eventType, makeEventListener(this, eventFunc));
} 
```

# php - 如何从 get_term_children 按字母顺序对 id 进行排序？

> ID：13513606
> 
> 赞同：1
> 
> 时间：2012-11-22T13:20:23.193
> 
> 标签：php, wordpress, sorting, taxonomy

我的代码如下，但是返回的列表没有按字母顺序排序。

有什么帮助吗？

```
<?php
    $termID = 4;
    $taxonomyName = "location";
    $termchildren = get_term_children( $termID, $taxonomyName );

    echo '<ul class="list">';
        foreach ($termchildren as $child) {
        $term = get_term_by( 'id', $child, $taxonomyName );
        echo '<li><span class="feature"><a href="' . get_term_link( $term->name, $taxonomyName ) . '">' .   $term->name . '</a></li>';
        }
    echo '</ul>';
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T14:13:56.167

用这个 ：

```
 $termID = 4;
        $taxonomyName = "location";
        $termchildren = get_term_children( $termID, $taxonomyName );

            foreach ($termchildren as $child) {
            $term = get_term_by( 'id', $child, $taxonomyName );

            $namearray[$term->name]= get_term_link( $term->name, $taxonomyName );

            }

        print_r($namearray);

        ksort($namearray);

         echo '<ul class="list">';
            foreach ($namearray as $key => $value) {
            echo '<li><span class="feature"><a href="'.$value.'">' .   $key . '</a></li>';
            }
        echo '</ul>'; 
```

# sql - SSMS ADD IN：状态栏颜色

> ID：13513609
> 
> 赞同：2
> 
> 时间：2012-11-22T13:20:35.767
> 
> 标签：sql, add-in, ssms-2012

我正在写一个`SSMS`Add in ( `SQL 2012`)。
我正在尝试更改状态栏颜色，但如何？
文档太差了，我已经搜索了几个小时。
我在这里被封锁：

```
TextDocument document = (EnvDTE.TextDocument)ServiceCache.ExtensibilityModel.Application.ActiveDocument.Object(null); 
```

现在 。我还没有找到任何用于更改状态栏颜色的属性。

目标是在更改连接时调整状态栏颜色。如果`Servername`包含“ `PROD`”，则状态栏必须为红色。

非常感谢

奥雷连

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-30T00:32:00.907

您是否考虑过使用 Mladen Prajdić 的 SSMS 工具包而不是实施您自己的解决方案？对于 30 美元以下，它可能是一个更好的选择，并且它具有许多其他有用的功能。

[http://www.ssmstoolspack.com/Features#WCC](http://www.ssmstoolspack.com/Features#WCC)

# apache - 阻止所有未被 RewriteRule 重写的文件

> ID：13513613
> 
> 赞同：0
> 
> 时间：2012-11-22T13:20:55.593
> 
> 标签：apache, .htaccess, mod-rewrite

我有一个使用 PHP 的网页，我用它`mod_rewrite`来制作更简单的 URL，例如

```
RewriteRule ^login$ /php/pages/login.php [L] 
```

我想要做的是防止直接访问目录`/php`。但如果我使用类似的东西：

```
RewriteRule ^php - [R=404,L,NC] 
```

在文件的末尾，甚至重写的 URL 也被阻止，因为 .htaccess 在子目录中再次与重写的 URL 一起使用。如果可能的话，我不想在每个目录中放置另一个 .htaccess。我也试过`RewriteCond`没有`REQUEST_URI`任何运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:49:12.553

在 .htaccess 的末尾：

```
RewriteCond %{REQUEST_URI} ^/php/    
RewriteCond %{ENV:REDIRECT_STATUS} ^$
RewriteRule . - [R=404,L] 
```

# python - 如何在win7命令提示符下使用python导出文本文件

> ID：13513616
> 
> 赞同：0
> 
> 时间：2012-11-22T13:21:04.750
> 
> 标签：python

我在运行的命令提示符中有一个类似“.exe abcd >c:\filename.txt”的命令，然后需要按两次 Enter 按钮，然后 filename.txt 获取值，但我使用了

```
os.system(".exe abcd >c:\filename.txt") 
```

然后文件变为空如何使用python解决此问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:25:07.347

使用[`subprocess`](http://docs.python.org/2/library/subprocess.html#using-the-subprocess-module)模块创建流程。使用参数`call`来指定标准输入、输出和错误流。

例子：

```
with open('somefile.txt','w') as f:
    subprocess.call(["command.exe", "abcd"], stdout=f) 
```

# javascript - jquery.offset() 方法的非常奇怪的行为

> ID：13513618
> 
> 赞同：1
> 
> 时间：2012-11-22T13:21:10.833
> 
> 标签：javascript, html

做完之后

```
$view.offset({
   left : X, //X is the same each time
   top : this.y
});
console.log($view.offset()); //outputs what it should 
```

对于几个对象。我看到（在萤火虫中）以下html代码

```
<div id="4017" class="text-block" style="position: relative; top: 2px; left: 22px;">
<div id="4043" class="text-block" style="position: relative; top: 41px; left: -64px;">
<div id="4053" class="text-block" style="position: relative; top: 80px; left: -95px;">
<div id="4081" class="text-block" style="position: relative; top: 119px; left: -135px;"> 
```

`left`对于所有 div 应该是相同的（并且它被显示，所以 if`left`对于 each 是相等的`div`）。尽管显示了，但为什么`left`每个 div 都不相同，所以所有 div 都相同？`div``left`

在 CSS 中，我有：

```
div.text-block {
   display: inline-block;
} 
```

先感谢您！

**UPD：** div 位于其他三个 div 旁边：

```
<div id="app-container">
    <div id="canvas-container">
        <div id="canvas">
            <!-- divs are located here -->
        </div>
     </div>
</div> 
```

在相应的 CSS 中，我有：

```
#canvas {
  position: absolute;
  background-color: white;
  width: 100%;
  height: 100%;
}

#app-container {
  height: auto !important;
  min-height: 100%;
}

#canvas-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:35:32.220

正如[jQuery 文档](http://api.jquery.com/offset/#offset2)中所说，

> .offset(坐标)
> 
> **描述：**设置匹配元素集中每个元素的当前坐标，相对于文档。

因此，如果您的元素位于相对于文档未位于位置 (0, 0) 的其他元素中，则会应用偏移量。

* * *

**编辑**

具有相同左值的相对定位的内联元素：

![演示图片](../Images/44e22bb26fdc47c5f4ad93c58abada67.png)

# python - Python日志模块不保存到指定的文件名？

> ID：13513619
> 
> 赞同：0
> 
> 时间：2012-11-22T13:21:13.007
> 
> 标签：python, logging

我需要将用 Python 编写的应用程序作为 exe 分发，该应用程序将安装在用户计算机的 Program Files 文件夹中。由于 Program Files 默认是写保护的，所以我需要将所有文件保存到 Windows 上的 %APPDATA% 文件夹中。我正在这样做 - 我有 settings.ini、settings_db.db 和在那里创建的另一个文件。

但是，Python 中的日志记录模块似乎拒绝将其日志保存在那里，而是将其保存到根目录。这是我的代码：

```
currentPath = os.environ["APPDATA"] + "\\tools\\"

if not os.path.exists(currentPath):
    try:
        os.makedirs(os.environ["APPDATA"] + "\\tools\\")
        currentPath = os.environ["APPDATA"] + "\\tools\\"
    except:
        currentPath = os.getcwd()

if not os.path.exists(currentPath + "ubc.log"):
    open(currentPath + "ubc.log", "w").close()

print currentPath + "ubc.log"

#Let's define the logging "manager" as well as logging format...
logging.basicConfig(filename=currentPath + "ubc.log",
    format='%(asctime)-15s: %(name)-18s - %(levelname)-8s - %(module)-15s - %(funcName)-20s - %(lineno)-6d - %(message)s',
    level=logging.DEBUG)

logger = logging.getLogger("gui-log") 
```

上面的`print`语句返回正确的结果，给了我`C:\Users\Bogdan\AppData\Roaming\utools\ubc.log`. 如果`os.path.exists()`文件不存在，则零件成功创建文件。但是记录器不会在那里记录 - 它会记录到`.py`执行脚本的目录中的文件。

不确定它是否重要，但在我拥有`filename="ubc.log"`, 并且它确实记录到该文件之前，但是当需要分发这个应用程序时，我改变了它。

有人有想法么？

# google-chrome - 从命令行使用 ffmpeg 创建与 Chrome 兼容的 .mp4

> ID：13513621
> 
> 赞同：4
> 
> 时间：2012-11-22T13:21:22.957
> 
> 标签：google-chrome, video, ffmpeg

您如何使用 ffmpeg 从命令行对 en .mp4 文件进行编码，使其在 chrome 中工作？这确实很有挑战性，因为 ffmpeg 有很多参数组合，而 Chrome 对输出格式的颜色编码很敏感。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T13:21:22.957

解决方法是使用参数“-pix_fmt yuv420p”：

```
ps>ffmpeg.exe -i $input\$file -y -strict experimental -acodec aac -ac 2 -ab 160k -vcodec libx264 -s 640x480 -pix_fmt yuv420p -preset slow -profile:v baseline -level 30 -maxrate 10000000 -bufsize 10000000 -b 1200k -f mp4 -threads 0 $output\$file.iphone.mp4 
```

ffmpeg 版本 N-46936-g8b6aeb1

希望这可以帮助您获得与 chrome 兼容的视频

# python - 线程内未捕获的异常是否仅杀死线程或整个进程？

> ID：13513627
> 
> 赞同：12
> 
> 时间：2012-11-22T13:21:44.083
> 
> 标签：python, multithreading, exception

当在线程内部引发异常而没有在其他任何地方捕获它时，它会杀死整个应用程序/解释器/进程吗？还是只会杀死线程？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T13:29:21.520

让我们尝试一下：

```
import threading
import time

class ThreadWorker(threading.Thread):

    def run(self):
        print "Statement from a thread!"
        raise Dead

class Main:

    def __init__(self):
        print "initializing the thread"
        t = ThreadWorker()
        t.start()
        time.sleep(2)
        print "Did it work?"

class Dead(Exception): pass

Main() 
```

上面的代码产生以下结果：

> ```
> > initializing the thread 
> > Statement from a thread! 
> > Exception in thread
> > Thread-1: Traceback (most recent call last):   File
> > "C:\Python27\lib\threading.py", line 551, in __bootstrap_inner
> >     self.run()   File ".\pythreading.py", line 8, in run
> >     raise Dead Dead
> > ----- here the interpreter sleeps for 2 seconds -----
> > Did it work? 
> ```

因此，您的问题的答案是，引发的异常仅崩溃它所在的线程，而不是整个程序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T13:34:52.873

从[线程](http://docs.python.org/3/library/threading.html)文档：

> 一旦线程的活动开始，线程就被认为是“活动的”。当它的 run() 方法终止时，它会停止活动——无论是正常终止，还是引发未处理的异常。is_alive() 方法测试线程是否处于活动状态。

并且：

> 加入（超时=无）
> 
> 等到线程终止。这会阻塞调用线程，直到调用其 join() 方法的线程终止 - 正常或通过未处理的异常 - 或直到发生可选超时。

换句话说，未捕获的异常是结束线程的一种方式，并且会在父`join`线程对所述线程的调用中被检测到。

# c# - 如何解决where子句项中的泛型谓词？

> ID：13513630
> 
> 赞同：0
> 
> 时间：2012-11-22T13:21:52.660
> 
> 标签：c#, c#-4.0, generics, func

**我在where子句“ _list.Where<T>(whereClause)** ”上遇到3个错误如何解决？

**错误 1**
​​'System.Collections.Generic.List<FuncMetodunuTaniyalim3.DataModel.Customer>' 不包含 'Where' 的定义和最佳扩展方法重载 'System.Linq.ParallelEnumerable.Where<TSource>(System.Linq.ParallelQuery <TSource>, System.Func<TSource,int,bool>)' 有一些无效参数
**错误 2**实例参数：无法从 'System.Collections.Generic.List<FuncMetodunuTaniyalim3.DataModel.Customer>' 转换为 'System.Linq。 ParallelQuery<T>'
**错误 3**参数 2：无法从 'System.Func<T,bool>' 转换为 'System.Func<T,int,bool>'

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace FuncMetodunuTaniyalim3
{
    public class Search<T> where T : class
    {
         private  List<DataModel.Customer> _list;

         public Search()
         {
             _list = new List<DataModel.Customer>();
         }
        public int Find(Func<T, bool> whereClause)
        {
            return _list.IndexOf(_list.Where<T>(whereClause).FirstOrDefault<T>());
        }
    }

    //Repository
    public class DataModel
    {
        private IEnumerable<Customer> customers;

        public List<Customer> Customers
        {
            get { return customers.ToList(); }

        }

        public DataModel()
        {
            customers = new[] { new Customer(){ Id=1, Name="cbfghg", SurName="hfh", Age=29, Dept=0, Income=100},
                                new Customer(){ Id=2, Name="hfghfhf", SurName="erhfghfhfhem", Age=0,Dept=45, Income=300},
                                new Customer(){ Id=3, Name="hgfhgfhf", SurName="balhfghgfhfgh", Age=33, Dept=20, Income=150}};
        }

        //Model
        public class Customer
        {
            public int Id { get; set; }
            public string Name { get; set; }
            public string SurName { get; set; }
            public int Age { get; set; }
            public int Income { get; set; }
            public int Dept { get; set; }

            public Customer()
            {

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:32:18.087

您的列表是 a `List<DataModel.Customer>`，而您的谓词是 a `Func<T, bool>`。将谓词类型更改为`Func<DataModel.Customer, bool>`或将列表类型更改为`List<T>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:33:34.357

您的 Search 类包含一个`List<Customer>`. 可能您打算使用`List<T>`：

```
public class Search<T> where T : class
{
    private List<T> _list;

    public Search()
    {
        _list = new List<T>();
    }
    public int Find(Func<T, bool> whereClause)
    {
        return _list.IndexOf(_list.Where<T>(whereClause).FirstOrDefault<T>());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:31:14.083

你不能这样做，因为`List<DataModel.Customer>`实现`IEnumerable<DataModel.Customer>` 了查看方法文档：http: [//msdn.microsoft.com/en-us/library/bb534803.aspx](http://msdn.microsoft.com/en-us/library/bb534803.aspx)也许你想要 _list 在`List<T>`那里？

# c# - conn.open() oracleException 未处理

> ID：13513633
> 
> 赞同：0
> 
> 时间：2012-11-22T13:21:57.303
> 
> 标签：c#, visual-studio-2008, oracle11g, devart

我正在用 C# 开发 Windows CE 应用程序并尝试连接到 Oracle 数据库。我正在使用 CoreLab.Oracle 参考。这是我的代码：

```
using CoreLab.Oracle; 

namespace SmartDeviceProject1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        private void button1_Click(object sender, EventArgs e)
        {           
            OracleConnection conn = new OracleConnection();
            conn.ConnectionString = "User ID=name;Password=pass;Host=ip;Pooling=true;Min Pool Size=0;Max Pool Size=100;Connection Lifetime=0;Port=1522;Sid=bleh;Unicode=True";
conn.Open();
        OracleCommand cmd = new OracleCommand();
        cmd.Connection = conn;
        cmd.CommandText = "Select * from dc_emp ";
        cmd.CommandType = CommandType.Text;
        OracleDataReader dr = cmd.ExecuteReader();
        dr.Read();
        label1.Text = dr.GetString(0);
        conn.Dispose();

    }
}
} 
```

每次我运行项目**conn.Open();** 获取错误：网络错误：：尝试对无法访问的主机执行 Socket 操作。所以我的连接字符串有问题，但我不知道是什么。

我可能会补充一点，当我在设计模式下将“oracleConnection”组件拖放到我的表单并编辑属性时，我的连接就创建了。

我在一些论坛上读过我必须在我的连接字符串中将“direct”属性设置为 true，但是当我将它添加到我的连接字符串时它说：未知连接字符串参数 Direct

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:49:05.020

现在正在工作！终于想通了。必须为 VS 模拟器安装 Virtual PC 2007。然后配置模拟器使用虚拟网卡。

# powershell-2.0 - .ToString 在错误中返回 System.Object[]

> ID：13513635
> 
> 赞同：1
> 
> 时间：2012-11-22T13:21:59.963
> 
> 标签：powershell-2.0

如果我在 Windows 7 机器上运行以下命令，则使用 PowerShell 2.0：

```
(Get-WmiObject Win32_NetworkAdapterConfiguration |
    Where { $_.IPAddress } 
```

它返回

```
192.168.83.26
fe80::<IPv6 address> 
```

如果我运行：

```
(Get-WmiObject Win32_NetworkAdapterConfiguration |
    Where { $_.IPAddress }.ToString() 
```

它返回

```
System.Object[] 
```

为什么？我该如何解决？

仅供参考，我实际上正在尝试使用`.ToString().split('.')[0..2] -join '.'`，但我很确定这`.ToString`是导致问题的原因

* * *

```
function Get-IPAddress{
(Get-WmiObject Win32_NetworkAdapterConfiguration |
    Where { $_.IPAddress } |
Select -Expand IPAddress).split('.')[0..2] -join '.'
}
Get-IPAddress 
```

在 PoSh 3 上返回`192.168.10`。这似乎在 PoSh 2 上不起作用，并返回我上面所说的“System.Object []”。该错误抱怨没有名为 trim 的方法。其他人建议将其声明为字符串，但我无法使其工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:14:52.727

试试这个：

```
(Get-WmiObject Win32_NetworkAdapterConfiguration | 
? { $_.IPAddress } ).ipaddress | % { ($_ -split '\.')[0..2]} 
```

这：

```
(Get-WmiObject Win32_NetworkAdapterConfiguration | ? { $_.IPAddress } ).ipaddress 
```

*在单个 ip 地址*`array of strings`的情况下也总是返回一个。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:01:08.607

它不起作用的原因是 IPAddress 属性是 PropertySet 的一部分，控制台输出使它看起来像一个字符串，但它不是

不完全确定您对最终结果的要求，但您可以尝试

```
(Get-WmiObject Win32_NetworkAdapterConfiguration | %{ $_.IPAddress }) -join " " 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T14:56:10.593

正如 Christian 所提到的， $_.IPAddress 属性是一个字符串数组。

```
Get-WmiObject Win32_NetworkAdapterConfiguration | % { 
    if($_.IPAddress){
        $_.IPAddress[0]
    }
} 
```

使用您的字符串操作：

```
$ip = Get-WmiObject Win32_NetworkAdapterConfiguration | % { if($_.IPAddress){$_.IPAddress[0] }}
$ip.ToString().split('.')[0..2] -join '.'

10.15.0 
```

作为一个单行：

```
(Get-WmiObject Win32_NetworkAdapterConfiguration | % { if($_.IPAddress){$_.IPAddress[0] }}).ToString().split('.')[0..2] -join '.' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-15T12:36:25.730

`toString`导致问题。

你需要管道“out-string”

为`tostring()`您提供定义的类类型为字符串*

# mysql - Solr DIH 错误：无法读取：dataimport.properties

> ID：13513636
> 
> 赞同：0
> 
> 时间：2012-11-22T13:22:03.160
> 
> 标签：mysql, solr, lucene, dataimporthandler, dih

安装 Solr 4 后，我使用 DIH 进行了完全导入，但在错误日志中出现以下错误：

**Catalina.out**

```
22-Nov-2012 08:36:21 org.apache.solr.handler.dataimport.DataImporter maybeReloadConfiguration
INFO: Loading DIH Configuration: /opt/solr/collection1/conf/data-config.xml
22-Nov-2012 08:36:21 org.apache.solr.handler.dataimport.config.ConfigParseUtil verifyWithSchema
INFO: id is a required field in SolrSchema . But not found in DataConfig
22-Nov-2012 08:36:21 org.apache.solr.handler.dataimport.config.ConfigParseUtil verifyWithSchema
INFO: latlng is a required field in SolrSchema . But not found in DataConfig
22-Nov-2012 08:36:21 org.apache.solr.handler.dataimport.DataImporter loadDataConfig
INFO: Data Configuration loaded successfully
22-Nov-2012 08:36:21 org.apache.solr.handler.dataimport.DataImporter doFullImport
INFO: Starting Full Import
22-Nov-2012 08:36:21 org.apache.solr.core.SolrCore execute
INFO: [collection1] webapp=/solr path=/dataimport params={command=full-import} status=0 QTime=5 
22-Nov-2012 08:36:21 org.apache.solr.handler.dataimport.SimplePropertiesWriter readIndexerProperties
WARNING: Unable to read: dataimport.properties
22-Nov-2012 08:36:21 org.apache.solr.handler.dataimport.JdbcDataSource$1 call
INFO: Creating a connection for entity listings with URL: jdbc:mysql://localhost/mysite
22-Nov-2012 08:36:21 org.apache.solr.handler.dataimport.JdbcDataSource$1 call
INFO: Time taken for getConnection(): 15
22-Nov-2012 08:36:25 org.apache.solr.update.processor.LogUpdateProcessor finish
INFO: [collection1] webapp=/solr path=/dataimport params={command=full-import} status=0 QTime=5 {deleteByQuery=*:*} 0 5
22-Nov-2012 08:36:25 org.apache.solr.core.SolrCore execute
INFO: [collection1] webapp=/solr path=/admin/logging params={since=1353591348955&wt=json} status=0 QTime=0 
22-Nov-2012 08:36:25 org.apache.solr.handler.dataimport.JdbcDataSource closeConnection
SEVERE: Ignoring Error when closing connection
java.sql.SQLException: Unknown character set index for field '3687' received from server.
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1074)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:988)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:974)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:919)
    at com.mysql.jdbc.ConnectionImpl.getCharsetNameForIndex(ConnectionImpl.java:2976)
    at com.mysql.jdbc.Field.<init>(Field.java:200)
    at com.mysql.jdbc.MysqlIO.unpackField(MysqlIO.java:758)
    at com.mysql.jdbc.MysqlIO.getResultSet(MysqlIO.java:423)
    at com.mysql.jdbc.MysqlIO.readResultsForQueryOrUpdate(MysqlIO.java:3096)
    at com.mysql.jdbc.MysqlIO.readAllResults(MysqlIO.java:2266)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2687)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2713)
    at com.mysql.jdbc.ConnectionImpl.rollbackNoChecks(ConnectionImpl.java:4893)
    at com.mysql.jdbc.ConnectionImpl.rollback(ConnectionImpl.java:4779)
    at com.mysql.jdbc.ConnectionImpl.realClose(ConnectionImpl.java:4388)
    at com.mysql.jdbc.ConnectionImpl.close(ConnectionImpl.java:1594)
    at org.apache.solr.handler.dataimport.JdbcDataSource.closeConnection(JdbcDataSource.java:400)
    at org.apache.solr.handler.dataimport.JdbcDataSource.close(JdbcDataSource.java:391)
    at org.apache.solr.handler.dataimport.DocBuilder.closeEntityProcessorWrappers(DocBuilder.java:291)
    at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:280)
    at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:382)
    at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:448)
    at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:429)
22-Nov-2012 08:36:25 org.apache.solr.common.SolrException log
SEVERE: Full Import failed:java.lang.RuntimeException: java.lang.RuntimeException: org.apache.solr.handler.dataimport.DataImportHandlerException: java.lang.OutOfMemoryError: Java heap space
    at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:273)
    at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:382)
    at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:448)
    at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:429)
Caused by: java.lang.RuntimeException: org.apache.solr.handler.dataimport.DataImportHandlerException: java.lang.OutOfMemoryError: Java heap space
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:413)
    at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:326)
    at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:234)
    ... 3 more
Caused by: org.apache.solr.handler.dataimport.DataImportHandlerException: java.lang.OutOfMemoryError: Java heap space
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:542)
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:411)
    ... 5 more
Caused by: java.lang.OutOfMemoryError: Java heap space

22-Nov-2012 08:36:25 org.apache.solr.update.DirectUpdateHandler2 rollback
INFO: start rollback{flags=0,_version_=0}
22-Nov-2012 08:36:25 org.apache.solr.handler.dataimport.SolrWriter rollback
SEVERE: Exception while solr rollback.
java.lang.NullPointerException
    at org.apache.solr.update.DefaultSolrCoreState.rollbackIndexWriter(DefaultSolrCoreState.java:173)
    at org.apache.solr.update.DirectUpdateHandler2.rollbackWriter(DirectUpdateHandler2.java:150)
    at org.apache.solr.update.DirectUpdateHandler2.rollback(DirectUpdateHandler2.java:625)
    at org.apache.solr.update.processor.RunUpdateProcessor.processRollback(RunUpdateProcessorFactory.java:98)
    at org.apache.solr.update.processor.UpdateRequestProcessor.processRollback(UpdateRequestProcessor.java:72)
    at org.apache.solr.update.processor.LogUpdateProcessor.processRollback(LogUpdateProcessorFactory.java:170)
    at org.apache.solr.handler.dataimport.SolrWriter.rollback(SolrWriter.java:117)
    at org.apache.solr.handler.dataimport.DocBuilder.rollback(DocBuilder.java:319)
    at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:387)
    at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:448)
    at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:429) 
```

令我困惑的是这条线`Unknown character set index for field '3687' received from server.`。任何表中都没有字段`3687`！

我基本上是在设置一台新服务器并尝试从旧服务器迁移到该服务器。我使用 Puppet 配置了新服务器，并将所有数据库转移到新服务器上的 MySQL 数据库。

服务器是运行 MySQL 5.5.28-0ubuntu0.12.04.2、Tomcat 7.0.26、Solr 4.0.0.2012.08.06.22.50.47 的 Ubuntu 12.04。旧服务器是运行 MySQL 5.5.24 的 Ubuntu 12.04

知道完全导入出了什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:15:56.570

这是由于 JVM 内存不足和完整导入中使用的 SQL 查询中的错误

# python - 每次从列表中获取 30 个字符的字符串

> ID：13513637
> 
> 赞同：0
> 
> 时间：2012-11-22T13:22:07.857
> 
> 标签：python, string, list

我有一个问题，我只想在每次运行时获取最多包含 30 个字符的字符串。

```
import random
test=["test1 up to 30 characters",
      "test2 passing 30 characters easy",
      "test3 up to 30 characters",
      "test4 passing 30 characters easy"]
random.shuffle(test)
if len(test[0])  <= 30:
    print test[0]
elif len(test[0])  >= 30:
    print "Shit"
    print len(test[0]) 
```

**编辑：************************************************ ********************************

在测试中，我将有一个看起来像这样的变量：

```
import random
test=["test1 up to "+variable+" characters",
      "test2 passing "+variable+" characters easy",
      "test3 up to "+variable+" characters",
      "test4 passing "+variable+" characters easy"]
random.shuffle(test)
if len(test[0])  <= 30:
    print test[0]
elif len(test[0])  >= 30:
    print "Shit"
    print len(test[0]) 
```

该变量将是从 5 到我不知道的混合字符数，比如说 10。

我希望程序从列表中选择总共最多包含 30 个字符的字符串。您的解决方案只打印出包含最多 30 个字符的字符串，仅此而已。我希望它返回并在列表中找到每个变量每次总共给出 30 个字符的字符串。我真的希望你能理解，我很难理解自己。

**已编辑 ************************************************* ********************************

好的，我这样做了：

```
import random
test=["test1 up to 30 characters",
      "test2 passing 30 characters easy",
      "test3 up to 30 characters",
      "test4 passing 30 characters easy"]
random.shuffle(test)
print [x for x in test[0:1] if len(x) < 30] 
```

它做了我想要的，但仍然是空白，比如空 []

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:25:11.423

使用列表推导：

```
print [x for x in test if len(x) < 30] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:24:33.340

你不能同时拥有`<=`好的和`>=`坏的，即你不能同时拥有`=`这两者。本质上，第二个`if`应该只是一个`else`，因为如果它不小于或等于 30，还剩下什么？

# sql - 请帮我处理这个数据库查询

> ID：13513642
> 
> 赞同：-3
> 
> 时间：2012-11-22T13:22:21.150
> 
> 标签：sql, oracle10g, plsqldeveloper

我有 xyz 表，我有 13 列，即 emplid、jan、feb…dec。这里我有如下数据

```
EMPLID  JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC
123      0   0   0   0   0   5   5   2   6   0   0   0
456      0   2   3   0   0   0   5   5   3   0   0   0
789      5   0   0   5   0   5   0   5   6   3   0   4
ABC      4   5   0   5   5   0   5   0   6   0   0   0 
```

现在我需要编写一个查询，以便将输出作为输入除 0 以外的一些数据的第一个月例如：如果我检查 EMPLID 123，我应该将输出作为 JUN（因为 JUN 是第一个此 EMPLID 的月份，其中数据不是 0）类似地，对于 456，它将是 FEB，对于 789 和 ABC 其 JAN。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:37:48.717

正如**Philipp**在他的评论中所说，你的表结构肯定会改变。否则，您将来会遇到很多这样的问题。

要回答你的问题，你可以试试这个：

```
 select case when JAN > 0 then 'JAN'
             when FEB > 0 then 'FEB'
             when MAR > 0 then 'MAR'
             when APR > 0 then 'APR'
             when MAY > 0 then 'MAY'
             when JUN > 0 then 'JUN'
             when JUL > 0 then 'JUL'
             when AUG > 0 then 'AUG'
             when SEP > 0 then 'SEP'
             when OCT > 0 then 'OCT'
             when NOV > 0 then 'NOV'
             when DEC > 0 then 'DEC'
        end as Month
from xyz
where EMPLID='456' 
```

### [SQL Fiddle 演示](http://sqlfiddle.com/#!4/7c597/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:40:33.443

首先，我建议像[Philipp](https://stackoverflow.com/questions/13513642/please-help-me-with-this#comment18498045_13513642)提到的那样进行重构：使用这样的一个表：

```
EMPLID   MONTH   VALUE
123      1       3
123      12      5 
```

在这种情况下，它更容易查询：

```
SELECT [MONTH]
FROM YourTable
GROUP BY EMPLID, [MONTH]
HAVING VALUE > 0
AND MIN([MONTH]) = [MONTH] 
```

* * *

如果您没有其他选择，请使用案例：

```
SELECT 
CASE 
    WHEN JAN > 0 THEN 'JAN'
    WHEN FEB > 0 THEN 'FEB'
    WHEN MAR > 0 THEN 'MAR'
    WHEN APR > 0 THEN 'APR'
    WHEN MAY > 0 THEN 'MAY'
    WHEN JUN > 0 THEN 'JUN'
    WHEN JUL > 0 THEN 'JUL'
    WHEN AUG > 0 THEN 'AUG'
    WHEN SEP > 0 THEN 'SEP'
    WHEN OCT > 0 THEN 'OCT'
    WHEN NOV > 0 THEN 'NOV'
    WHEN DEC > 0 THEN 'DEC'
    ELSE 'No Month found' 
END AS FirstMonth
FROM YourTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:41:39.823

正如菲利普所说，最好为您的桌子使用不同的结构。使用当前结构，您可以执行以下操作：

```
Select a.EMPLID, case when (select b.JAN from tbl b where a.EMPLID=b.EMPLID) > 0 then 'JAN' 
                      when.....etc(the same for each month).... end as Val
  from tbl a 
```

可能这不是最好的解决方案，但它应该可以工作。

# c# - 如何为一行c#代码设置超时

> ID：13513650
> 
> 赞同：64
> 
> 时间：2012-11-22T13:22:38.467
> 
> 标签：c#, timeout

> **可能重复：**
> [为操作设置超时](https://stackoverflow.com/questions/2265412/set-timeout-to-an-operation)

如何在 c# 中为一行代码设置超时。例如 `RunThisLine(SomeMethod(Some Input), TimeSpan.FromSeconds(10))` 运行`SomeMethod`10 秒超时。提前致谢。

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-11-22T13:35:04.433

您可以使用[任务并行库](http://msdn.microsoft.com/en-us/library/dd537609.aspx)。更准确地说，您可以使用 [`Task.Wait(TimeSpan)`](https://msdn.microsoft.com/en-us/library/dd235606(v=vs.110).aspx)：

```
using System.Threading.Tasks;

var task = Task.Run(() => SomeMethod(input));
if (task.Wait(TimeSpan.FromSeconds(10)))
    return task.Result;
else
    throw new Exception("Timed out"); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-22T13:35:45.730

您可以使用 IAsyncResult 和 Action 类/接口来实现这一点。

```
public void TimeoutExample()
{
    IAsyncResult result;
    Action action = () =>
    {
        // Your code here
    };

    result = action.BeginInvoke(null, null);

    if (result.AsyncWaitHandle.WaitOne(10000))
         Console.WriteLine("Method successful.");
    else
         Console.WriteLine("Method timed out.");
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-22T13:28:24.923

我使用这样的东西（你应该添加代码来处理各种失败）：

```
 var response = RunTaskWithTimeout<ReturnType>(
        (Func<ReturnType>)delegate { return SomeMethod(someInput); }, 30);

    /// <summary>
    /// Generic method to run a task on a background thread with a specific timeout, if the task fails,
    /// notifies a user
    /// </summary>
    /// <typeparam name="T">Return type of function</typeparam>
    /// <param name="TaskAction">Function delegate for task to perform</param>
    /// <param name="TimeoutSeconds">Time to allow before task times out</param>
    /// <returns></returns>
    private T RunTaskWithTimeout<T>(Func<T> TaskAction, int TimeoutSeconds)
    {
        Task<T> backgroundTask;

        try
        {
            backgroundTask = Task.Factory.StartNew(TaskAction);
            backgroundTask.Wait(new TimeSpan(0, 0, TimeoutSeconds));
        }
        catch (AggregateException ex)
        {
            // task failed
            var failMessage = ex.Flatten().InnerException.Message);
            return default(T);
        }
        catch (Exception ex)
        {
            // task failed
            var failMessage = ex.Message;
            return default(T);
        }

        if (!backgroundTask.IsCompleted)
        {
            // task timed out
            return default(T);
        }

        // task succeeded
        return backgroundTask.Result;
    } 
```

# java - 使用 jnlp/webstart 在 OSX 上使用 Java 7 对文件名进行编码问题

> ID：13513652
> 
> 赞同：11
> 
> 时间：2012-11-22T13:22:41.960
> 
> 标签：java, macos, character-encoding, java-7, jnlp

我遇到了这个问题，并且已经有几天的搜索和解决方法尝试不成功。

我现在有一个由 jnlp/webstart 在 osx 和 windows 计算机上分发的内部 java swing 程序，除其他外，它从 WebDav 下载一些文件。

最近，在一台装有 OSX 10.8 和 Java 7 的测试机器上，带有重音字符的文件名和目录名开始被问号替换。

在 7 之前的 Java 版本的 OSX 上没有问题。

例子 ：

XXXYYY_è_ABCD/

变成

XXXYY_?_ABCD/

在原始字符串上使用**java.text.Normalizer** (NFD, NFC, NFKD, NFKC)，结果不同但仍然错误：

XXXYY_e?_ABCD/

或者

XXXYYY_e_ABCD/

我知道，根据 [andrew.brygin at oracle.com] 和 [mik3hall at gmail.com] 之间的通信，

> 是的，file.encoding 是根据运行 jvm 的语言环境设置的，如果你在 xxxx.UTF-8 语言环境中运行你的 java vm，file.encoding 应该是 UTF-8，设置为 MacRoman 会有问题。所以我相信 Oracle/OpenJDK7 的行为是正确的。也就是说，正如 Andrew Thompson 指出的那样，如果所有以前的 Apple JDK 版本都使用 MacRoman 作为英语/UTF-8 语言环境的 file.encoding，那么这里存在“兼容性”问题，可能值得在发行说明中添加一些内容Oracle/OpenJDK MacOS 用户请注意。

[原始邮件](http://mail.openjdk.java.net/pipermail/macosx-port-dev/2012-May/004290.html)

从**[Joni Salonen](https://stackoverflow.com/users/318758/joni?tab=summary)**博客（[java-and-file-names-with-invalid-characters](http://jonisalonen.com/2012/java-and-file-names-with-invalid-characters/)）我知道：

> 您可能知道 Java 使用“默认字符编码”将二进制数据转换为字符串。要使用其他编码读取或写入文本，您可以使用 InputStreamReader 或 OutputStreamWriter。但是对于 API 深处的数据到文本的转换，您别无选择，只能更改默认编码。

和

> file.encoding 呢？
> 
> file.encoding 系统属性还可用于设置 Java 用于 I/O 的默认字符编码。不幸的是，它似乎对如何将文件名解码为字符串没有影响。

从 jnlp 内部执行语言环境不变地打印

```
LANG=
LC_COLLATE="C"
LC_CTYPE="C"
LC_MESSAGES="C"
LC_MONETARY="C"
LC_NUMERIC="C"
LC_TIME="C"
LC_ALL= 
```

stackoverflow 上最类似的问题是这样的： [encoding-issues-on-java-7-file-names-in-os-x](https://stackoverflow.com/questions/12987252/file-list-retrieves-file-names-with-non-ascii-characters-incorrectly-on-mac-os)

但解决方案是将java程序的执行包装在一个脚本中

```
#!/bin/bash
export LC_CTYPE="UTF-8" # Try other options if this doesn't work
exec java your.program.Here 
```

但我不认为这个选项对我来说是可用的，因为 webstart，我还没有找到任何方法来从程序中设置 LC_CTYPE 环境变量。

任何解决方案或解决方法？

**PS：**

如果我们直接从 shell 运行程序，它即使在 OSX 10+Java 7 上也能正确写入文件/目录。只有 JNLP+OSX+Java7 的组合才会出现问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T12:53:23.103

我认为文件名的最大 ASCII 表示是可以接受的，它几乎适用于任何编码。

首先，您要专门使用 NFKD，以便以 ASCII 形式保留最大信息。例如，一旦过滤掉非 ascii 和非控制字符，就`"2⁵"`变成了，`"25"`而不是只是 `"2"`，`"ﬁ"`变成`"fi"`了而不是等。`""`

```
String str = "XXXYYY_è_ABCD/";
str = Normalizer.normalize(str, Normalizer.Form.NFKD);
str = str.replaceAll( "[^\\x20-\\x7E]", "");
//The file name will be XXXYYY_e_ABCD no matter what system encoding 
```

然后，您将始终通过此过滤器传递文件名以获取它们的文件系统名称。你唯一失去的是一些独特性，IE文件`asdé.txt`是一样的`asde.txt`，在这个系统中它们是无法区分的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T21:48:53.120

编辑：在尝试了更多 OS X 之后，我意识到我的答案完全错误，所以我正在重做。

如果您的 JVM 支持`-Dfile.encoding=UTF-8`JVM 命令行，那可能会解决问题。我相信这是一个标准属性，但我不确定。

HFS Plus 与其他符合 POSIX 的文件系统一样，将文件名存储为字节。但与 Linux 的 ext3 文件系统不同，它强制文件名是有效的分解 UTF-8。这可以在我的 OS X 系统上的 Python 解释器中看到，从一个空目录开始。

```
$ python
Python 2.7.1 (r271:86832, Jul 31 2011, 19:30:53) 
>>> import os
>>> os.mkdir('\xc3\xa8')
>>> os.mkdir('e\xcc\x80')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OSError: [Errno 17] File exists: 'e\xcc\x80'
>>> os.mkdir('\x8f')
>>> os.listdir('.')
['%8F', 'e\xcc\x80']
>>> ^D
$ ls
%8F è 
```

这证明文件系统上的目录名称不能是 Mac-Roman 编码的（即，只要它是 HFS Plus 文件系统，就可以在看到`8F`的地方使用字节值）。`è`但是当然，JVM 不能保证 HFS Plus 文件系统，并且 SMB 和 NFS 没有相同的编码保证，所以 JVM 不应该假设这种方案。

因此，您必须说服 JVM 使用 UTF-8 编码来解释文件和目录名称，以便将名称`java.lang.String`正确地读取为对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T09:28:37.863

在黑暗中拍摄：文件编码不会影响文件名的创建方式，只会影响内容写入文件的方式 - 在这里查看这个人：http: [//jonisalonen.com/2012/java-and-file-带有无效字符的名称/](http://jonisalonen.com/2012/java-and-file-names-with-invalid-characters/)

这是来自 Apple 的简短条目：http: [//developer.apple.com/library/mac/#qa/qa1173/_index.html](http://developer.apple.com/library/mac/#qa/qa1173/_index.html)

将此与[http://docs.oracle.com/javase/tutorial/i18n/text/normalizerapi.html](http://docs.oracle.com/javase/tutorial/i18n/text/normalizerapi.html)进行比较，我假设您想使用

`normalized_string = Normalizer.normalize(target_chars, Normalizer.Form.NFD);`

在将文件名传递给 File 构造函数之前对其进行规范化。这有帮助吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T14:52:49.267

我认为目前还没有真正解决这个问题的方法。

同时我得出的结论是，从程序内部打印的“C”环境变量来自 Java Web Start 沙箱，并且（显然，按照设计）你不能影响那些使用 jnlp 的环境变量。

接受的（公司接受的）解决方法/妥协是使用 bash 脚本中的 javaws 启动 jnlp。

显然，从浏览器或 finder 启动 jnlp 会创建一个未设置 LANG 的新沙盒环境（因此设置为等于 ASCII 的“C”）。从命令行启动 jnlp 而是从系统默认值打印正确的 LANG，从 shell 继承它。

这允许至少保留 jnlp 和依赖项的自动更新功能。

无论如何，我们向 Oracle 发送了错误报告，但我个人不希望它很快得到解决，如果有的话。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-24T13:11:24.540

这是 old-skool java File api 中的一个错误，可能只是在 mac 上？无论如何，新的 java.nio api 工作得更好。我有几个文件包含无法使用 java.io.File 和相关类加载的 unicode 字符和内容。在将我的所有代码转换为使用[java.nio.Path](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html)之后，一切都开始工作了。我用[java.nio.Files](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)替换了 org.apache.commons.io.FileUtils （有同样的问题） ......

...并确保使用适当的字符集读取和写入文件的内容，例如：

```
Files.readAllLines(myPath, StandardCharsets.UTF_8) 
```

# android - 如何从 tabspec 活动禁用 tablayout 中的选项卡

> ID：13513658
> 
> 赞同：0
> 
> 时间：2012-11-22T13:23:14.780
> 
> 标签：android, android-tabhost, android-tabs, android-tabactivity

我有一个 tabActivity，我将活动设置为选项卡的内容。从一项活动中，我尝试禁用 tabhost。如何实现这一目标。

```
 public class Main extends TabActivity {

public static final File sdcard = Environment.getExternalStorageDirectory();

 @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TabHost tabHost = getTabHost();

    TabSpec homespec = tabHost.newTabSpec("Home");
    homespec.setIndicator("Home");
    Intent homeIntent = new Intent(this, HomeActivity.class);
    homespec.setContent(homeIntent);

    TabSpec presentspec = tabHost.newTabSpec("Presentations");
    presentspec.setIndicator("Presentations");
    Intent presentIntent = new Intent(this, PresentationActivity.class);
    presentspec.setContent(presentIntent);

    TabSpec pendspec = tabHost.newTabSpec("Pending Submission");
    pendspec.setIndicator("Pending Submission" /*getResources().getDrawable(R.drawable.icon_videos_tab)*/);
    Intent pendingIntent = new Intent(this, PendingActivity.class);
    pendspec.setContent(pendingIntent);

    TabSpec syncspec = tabHost.newTabSpec("Synchronization");
    syncspec.setIndicator("Synchronization" /*getResources().getDrawable(R.drawable.icon_videos_tab)*/);
    Intent syncIntent = new Intent(this, SyncActivity.class);
    syncspec.setContent(syncIntent);

    tabHost.addTab(homespec); 
    tabHost.addTab(presentspec); 
    tabHost.addTab(pendspec);
    tabHost.addTab(syncspec);

}
} 
```

这是我的 tbb 活动

```
 public class SyncActivity extends Activity {
     class DownloadWebPageTask extends AsyncTask<String, Void, String> {

                   @Override
        protected void onPostExecute(String result) {
            end();
        }

        @Override
        protected String doInBackground(String... params) {

              progress.setVisibility(ProgressBar.VISIBLE);
              progress.setProgress(0);
              progress.setMax(1000);

            int currentPosition= 0;

            while (currentPosition<1000) {
                try {
                    Thread.sleep(500);
                    currentPosition+=100;
                } catch (InterruptedException e) {
                    return null;
                } catch (Exception e) {
                    return null;
                }            
                progress.setProgress(currentPosition);

            }
            return null;
        }
      }
    } 
```

当我尝试这个时，其他标签应该被禁用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:32:31.507

TabActivity 现在已弃用，请尝试选项卡和片段，您可以[在此处找到更多信息](https://stackoverflow.com/questions/9958303/create-custom-tab-in-fragmentactivity/10013297#10013297)

您可以使用布尔标志来处理启用的选项卡，当您尝试更改选项卡时，首先您可以检查选项卡是否处于活动状态。

# .net - 如何使用 WiX 包安装 .NET 4.5？

> ID：13513664
> 
> 赞同：12
> 
> 时间：2012-11-22T13:23:30.667
> 
> 标签：.net, wix, windows-installer, wix3.6

我需要在我的安装包中包含 Microsoft [.NET](http://en.wikipedia.org/wiki/.NET_Framework) 4.5 作为先决条件，并且我希望它尽可能自动化。*但是，卸载时不应*删除.NET 。我想我已经阅读了有关如何使用`DetectCondition`和/或的所有内容`InstallCondition`，但我仍然没有正确理解；它要么总是运行 .NET 安装，要么从不运行它。

这是我的最新设置：

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension"
     xmlns:bal="http://schemas.microsoft.com/wix/BalExtension"
     xmlns:netfx='http://schemas.microsoft.com/wix/NetFxExtension'>

  <!-- Define minimum .NET Framework version -->
  <?define NetFx45MinRelease = 377811?>
  ...
    <Chain>
      <PackageGroupRef Id="Netfx45FullPackage"/>
      ...
    </Chain>

    <PackageGroup Id="Netfx45FullPackage">
      <ExePackage Id="Netfx45Full" Cache="no" Compressed="yes" PerMachine="yes" Permanent="yes" Vital="yes"
                  SourceFile="..\..\..\..\Environment\InstallerResources\Prerequisites\dotnetfx45_full_x86_x64.exe"
                  InstallCommand="/passive /norestart"
                  DetectCondition="NETFRAMEWORK45 &gt;= $(var.NetFx45MinRelease)"
                  InstallCondition="NOT REMOVE AND (NETFRAMEWORK45 &lt; $(var.NetFx45MinRelease))" />
    </PackageGroup> 
```

（出于某种原因，我必须定义`NetFx45MinRelease`自己，即使它应该包含在 WixNetFxExtension 中。）

我怎样才能得到正确的设置？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T15:43:20.463

我不太清楚你为什么会遇到问题，但我只是有同样的任务，它（现在;-）按预期工作。也就是说，它仅在需要时安装[.NET](http://en.wikipedia.org/wiki/.NET_Framework) 4.5，并且在整个卸载引导程序时不会执行 .NET 卸载。

但是，.NET 4.5**可以**单独卸载，我认为这很好。

这是我使用的（很可能来自其他 Stack Overflow 帖子）：

```
<PackageGroup Id="Netfx45Xxx">
    <ExePackage Id="Netfx45Xxx" Cache="no" Compressed="no" PerMachine="yes" Permanent="yes" Vital="yes" InstallCommand="/q"
        SourceFile="C:\wixtest\dotnetfx45_full_x86_x64.exe"
        DetectCondition="(Netfx4FullVersion=&quot;4.5.50709&quot;) AND (NOT VersionNT64 OR (Netfx4x64FullVersion=&quot;4.5.50709&quot;))"
        InstallCondition="(VersionNT >= v6.0 OR VersionNT64 >= v6.0) AND (NOT (Netfx4FullVersion=&quot;4.5.50709&quot; OR Netfx4x64FullVersion=&quot;4.5.50709&quot;))"/>
</PackageGroup> 
```

奇怪的是，您已经拥有 Permanent="yes"，这确实是保持 .NET 处于卸载状态的关键。

一个区别是我在 InstallCondition 中没有明确的“NOT REMOVE”，也许这比对 Windows Installer 的帮助更令人困惑...？

我正在使用当前最新的 WiX 3.7.1224.0。

* * *

TheESJ 的回答有一条评论：即使使用预定义的 PackageGroupRef，您也可以提供本地文件以避免下载。只需将它放在您的引导程序 EXE 文件下方的“redist”文件夹中，如果存在而不下载，它将从那里获取。我昨天在安装错误后通过日志文件发现了这种行为。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T18:14:02.247

您不需要定义 PackageGroup。这包含在 WixNetFxExtension 中。请参阅[http://wix.sourceforge.net/manual-wix3/install_dotnet.htm](http://wix.sourceforge.net/manual-wix3/install_dotnet.htm)。您需要做的就是在您的 wixproj 中包含对 WixNetFxExtension 的引用，然后将 PackageGroupRef 添加到此处记录的 PackageGroup 之一：[http](http://wix.sourceforge.net/manual-wix3/wixnetfxextension.htm) ://wix.sourceforge.net/manual-wix3/wixnetfxextension.htm到您的链中。

# reporting-services - SSRS 自动为每条记录生成一个 pdf

> ID：13513665
> 
> 赞同：4
> 
> 时间：2012-11-22T13:23:33.810
> 
> 标签：reporting-services, reportbuilder

我已经建立了一个显示来自数据库的数据的报告。这工作正常，正确呈现报告。

我的查询返回约 40,000 条记录。我想为每条记录自动生成一个 pdf 文件，使用查询返回的字段之一命名。

我该如何自动化呢？我有 Report Builder 3 和 Visual Studio。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:15:58.827

我会编写一个带有参数并为一条记录生成报告的报告。部署到您的 Reporting Services 服务器。

然后我会编写一个快速程序，循环遍历您的数据并将每个唯一记录值作为参数传递给报告，并将其保存为具有唯一名称的 PDF。以编程方式运行报告非常容易，[Microsoft 有一些代码可以帮助您入门](http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.render.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:32:35.247

如果您有 SQL Server 的 Enterprise SKU，请查看[数据驱动订阅](http://msdn.microsoft.com/en-us/library/ms159150.aspx)。另一种选择是创建每页一条记录的报告，然后使用一些免费工具将生成的 PDF 拆分为单独的 PDF。

# java - 读取文本文件并存储在 hashmap 中。然后按顺序排列

> ID：13513667
> 
> 赞同：0
> 
> 时间：2012-11-22T13:23:45.363
> 
> 标签：java, io, hashmap, comparator

文件是这样的：

```
name1   134.2
name2   456.7
name3   265.3
...
... 
```

我读取了文本文件并存储在 HashMap 中，然后我想按顺序排序（按最大值），但问题是因为我对字符串中的值进行排序，所以我无法比较它。那么..有没有办法将文本文件的值以双精度或整数形式放入哈希图中？

```
import java.io.*;
import java.util.*;

class Test 
{
    public static void main(String[] args) throws FileNotFoundException {

Scanner scanner = new Scanner(new FileReader("score.txt"));

        HashMap<String, String> map = new HashMap<String, String>();

        while (scanner.hasNextLine()) {
            String[] columns = scanner.nextLine().split("\t\t");
            map.put(columns[0], columns[1]);
        }

        System.out.println(map);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:28:13.387

是的，使用`HashMap<String,Double>`and 输入值时，使用 将它们转换为 double `Double.parseDouble()`。

（你可以用`Float`而不是做同样的事情`Double`，但使用 Double 通常更有意义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:31:44.437

[`HashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)不保证顺序：

> 此类不保证地图的顺序；特别是，它不保证订单会随着时间的推移保持不变。

这意味着对哈希图进行排序将毫无用处。如果您需要加载这样的键值对，您可以考虑实现自己的类，该类具有必需的字段并实现[`Comparible`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)接口。

这将允许您加载对象，然后调用[`Collections.sort()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)对自定义对象列表进行排序。

# sql - 如何在单个语句中使用一些静态数据将数据从一个表插入到另一个表？

> ID：13513670
> 
> 赞同：1
> 
> 时间：2012-11-22T13:23:50.753
> 
> 标签：sql, sql-server, sql-server-2008

我有一张桌子车如下

```
Car_ID | Car_Name 
```

**样本数据**

```
Car_ID    Car_Name
1         Honda City
2         Ferrari
3         Mercedes
4         Rolls Royce 
```

我在 Car 表中有数据。现在我有其他表 Car_Detail 如下

```
Car_Detail_ID | Car_ID | Car_Color 
```

现在我必须将数据从 Car 插入 Car_Detail ，其中 Car_Color 将是默认值。如何在单个语句中实现这一点？

**预期结果**

```
Car_Detail_ID   Car_ID    Color
1               1         Red
2               2         Red
3               3         Red
4               4         Red 
```

# **编辑**

**样本数据**

**车台**

```
Car_ID    Car_Name
1         Honda City
2         Ferrari
3         Mercedes
4         Rolls Royce 
```

**颜色表**

```
Color_ID    Color_Name
1           Red
2           Yellow
3           Blue
4           Green 
```

**预期结果**

```
Car_Detail_ID   Car_ID    Color_ID
1               1         1
2               2         1
3               3         1
4               4         1
5               1         2
6               2         2
7               3         2
8               4         2
9               1         3
10              2         3
11              3         3
12              4         3
13              1         4
14              2         4
15              3         4
16              4         4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:25:56.493

use`INSERT INTO...SELECT`语句，下面的查询假定它`Car_Detail_ID`是一个自动递增的列，并且`Color`具有默认值`Red`

```
INSERT INTO Car_Detail (Car_ID)
SELECT Car_ID
FROM Car 
```

但如果不是，

```
INSERT INTO Car_Detail (Car_ID, Color)
SELECT Car_ID, 'Red' Color
FROM Car 
```

或类似的东西，

```
INSERT INTO Car_Detail (Car_Detail_ID, Car_ID, Color)
SELECT Car_ID, Car_ID, 'Red' Color
FROM Car 
```

**更新 1**

采用`CROSS JOIN`

```
INSERT INTO CAr_Detail(Car_ID, Color_ID)
SELECT  Car_ID, Color_ID
FROM Car CROSS JOIN Color 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/fbc1af/1)

# playframework - play-framework 2 如何在路由中转义冒号

> ID：13513671
> 
> 赞同：2
> 
> 时间：2012-11-22T13:23:50.660
> 
> 标签：playframework, playframework-2.0

在我的 play2 路由文件中，我试图使用冒号作为文字：

```
GET     /:search                       controllers.SearchController.index() 
```

但是 play 抱怨说缺少一个参数。如何逃脱冒号（我尝试反斜杠）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:36:13.300

您必须引入一个虚拟正则表达式参数，例如：

```
GET     /$colon<\:>search           controllers.SearchController.index(colon) 
```

然后，您还必须重新定义控制器方法：

```
public static Result index(String colon) {
 .... 
```

解析器的构建方式使得路径表达式不能被转义，除了这个方法。

# delphi - 字符串列表和 CSV

> ID：13513678
> 
> 赞同：2
> 
> 时间：2012-11-22T13:24:10.860
> 
> 标签：delphi, delphi-xe2

将此 CSV 文件加载到其中后，如何根据 Stringlist 中的索引访问单个记录。

CSV 示例：

```
 Record0;Record1;Record2
   Record0;Record1;Record2
   Record0;Record1;Record2
   Record0;Record1;Record2 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T14:04:18.137

您不能将 TStringList 用于[RFC4180中描述的 CSV 文件](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDcQFjAA&url=https://www.rfc-editor.org/rfc/rfc4180&ei=ozGuUJbyO8XptQb37IDYDw&usg=AFQjCNEAoOXkSPh2XnTMXwniiQ4zh527iA&sig2=_xFtRUQ8NhEqQjvVn31b8A)

有效 RFC4180 CSV 文件示例（2 行，5 字段）

```
Data1;"Data2;Data2";"Data3
Data3";"Data4""Data4""";Data5
Data1;"Data2;Data2";"Data3
Data3";"Data4""Data4""";Data5 
```

和单个字段值

1.  数据1
2.  数据2;数据2
3.  数据3#13#10数据3
4.  数据4“数据4”
5.  数据5

但也许你觉得这很有用（[我在 2011 年写的一个快速示例](http://www.delphipraxis.net/1081747-post29.html)）。

不要混淆，您可以修改单元格值但不能修改 SaveToFile 方法。

```
unit CSVData;

interface

type
  TCSVData = class
  private
    FData : array of array of string;
    FDelim : Char;
    FQuote : Char;
    function GetRows : Integer;
    function GetCols : Integer;
    function GetCell( Row, Col : Integer ) : string;
    procedure SetCell( Row, Col : Integer; const Value : string );
  public
    destructor Destroy; override;
    procedure LoadFromFile( const FileName : string );
    property Cell[Row, Col : Integer] : string
      read GetCell
      write SetCell;
    property Rows : Integer
      read GetRows;
    property Cols : Integer
      read GetCols;
    property Delim : Char
      read FDelim
      write FDelim;
    property Quote : Char
      read FQuote
      write FQuote;
  end;

implementation

uses
  Classes;

{ TCSVData }

destructor TCSVData.Destroy;
begin
  SetLength( FData, 0, 0 );
  inherited;
end;

function TCSVData.GetCell( Row, Col : Integer ) : string;
begin
  Result := FData[Row, Col];
end;

function TCSVData.GetCols : Integer;
begin
  if Rows > 0
  then
    Result := Length( FData[0] )
  else
    Result := 0;
end;

function TCSVData.GetRows : Integer;
begin
  Result := Length( FData );
end;

procedure TCSVData.LoadFromFile( const FileName : string );
var
  Data : TStrings;
  Val : string;
  MyChar : Char;
  LastChar : Char;
  QuotePart : Boolean;
  Col : Integer;
  Row : Integer;
  MaxCol : Integer;
begin
  Data := TStringList.Create;
  try
    Data.LoadFromFile( FileName );

    LastChar := #0;
    QuotePart := False;
    Val := '';
    MaxCol := 0;
    Col := 0;
    Row := 0;

    // Jedes Zeichen durchlaufen
    for MyChar in Data.Text do
      begin
        if ( MyChar = Quote )
        then
          begin
            // QuotePart wechselt den Status
            QuotePart := not QuotePart;

            // Befinden wir uns im QuotePart und das letzte Zeichen
            // war das Quote-Zeichen, dann handelt es sich um eine
            // Verdoppelung und wir hängen das Quote-Zeichen an
            // den Puffer
            if QuotePart and ( LastChar = Quote )
            then
              Val := Val + Quote;
          end
        else if not QuotePart and ( MyChar = Delim )
        then
          begin
            // Sind noch nicht genug Zeilen da ...
            if high( FData ) < Row + 1
            then
              // ... dann auf Verdacht schon mal 10 hinzufügen
              SetLength( FData, Row + 10 );
            // Sind noch nicht genug Spalten da ...
            if high( FData[Row] ) < Col + 1
            then
              // ... dann auf Verdacht schon mal 10 hinzufügen
              SetLength( FData[Row], Col + 10 );
            // Wert eintragen
            FData[Row, Col] := Val;
            // Puffer leeren
            Val := '';
            // Spalte hochzählen
            Inc( Col );
          end
        else if not QuotePart and ( ( MyChar = #13 ) or ( MyChar = #10 ) )
        then
          begin
            // Haben wir CR LF gefunden ...
            if ( MyChar = #10 ) and ( LastChar = #13 )
            then
              begin
                // Sind noch nicht genug Zeilen da ...
                if high( FData ) < Row + 1
                then
                  // ... dann auf Verdacht schon mal 10 hinzufügen
                  SetLength( FData, Row + 10 );
                // Die Anzahl der Spalten steht jetzt fest
                SetLength( FData[Row], Col + 1 );
                // MaxCol merken
                if Col > MaxCol
                then
                  MaxCol := Col;
                // Wert eintragen
                FData[Row, Col] := Val;
                // Puffer leeren
                Val := '';
                // Zeile hochzählen
                Inc( Row );
                // Neue Zeile => erste Spalte
                Col := 0;
              end;
          end
        else
          // Das aktuelle Zeichen an den Puffer hängen
          Val := Val + MyChar;
        // Das letzte Zeichen merken
        LastChar := MyChar;
      end;

    SetLength( FData, Row );

    // Das ist eigentlich nur notwendig, wenn die CSV-Datei falsch aufgebaut ist
    // und unterschiedliche Anzahl von Spalten in den Zeilen aufweist
    // Dieses ist allerdings nicht RFC-konform, aber wir wollen mal nicht so sein
    for Row := low( FData ) to high( FData ) do
      SetLength( FData[Row], MaxCol + 1 );

  finally
    Data.Free;
  end;
end;

procedure TCSVData.SetCell( Row, Col : Integer; const Value : string );
begin
  FData[Row, Col] := Value;
end;

end. 
```

PS：我知道我有另一种使用状态模式的方法，但我找不到它......也许稍后

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T13:39:47.663

`SplitString`将使用您定义的分隔符拆分您的字符串。在此示例中，空格和 ; 特点。

**更新**

添加了索引拆分函数的示例。( `SplitByIndex`)。

**更新 2**

添加了一个示例 ( `SplitByIndexAlt`) 不使用`SplitString`, 但`TStringList.DelimitedText`. 这将处理空格和 ; 作为分隔符（不是由 括起来的分隔符`QuoteChar`）。

```
uses
  SysUtils,Classes,System.Types,System.StrUtils;

procedure Test(aStringList: TStringList);
var
  s,split : String;
  splittedString : TStringDynArray;
begin
  for s in aStringList do begin
    splittedString := SplitString(s,' ;'); // Splits at space and ;
    for split in splittedString do
    begin
      WriteLn(split);
    end;
  end;    
end;

Function SplitByIndex(aList : TStringList; aRow,aCol : Integer) : String;
// Zero based index !
var
  splittedString : TStringDynArray;
begin
  Result := '';
  if (aRow < aList.Count) then
  begin
    splittedString := SplitString(aList[aRow],' ;');
    if (aCol < Length(splittedString))
      then Result := splittedString[aCol];
  end;    
end;

Function SplitByIndexAlt(aList : TStringList; aRow,aCol : Integer) : String;
// Zero based index !
var
  splitlist : TstringList;
begin
  Result := '';
  if (aRow < aList.Count) then
  begin
    splitList := TStringList.Create;
    Try
      splitList.Delimiter := ';';
      // splitList.QuoteChar := '"'; // This may have to be changed
      splitList.StrictDelimiter := false;
      splitList.DelimitedText := aList[aRow];
      if (aCol < splitList.Count)
        then Result := splitList[aCol];
    Finally
      splitList.Free;
    End;
  end;
end;

var
  myList: TStringList;
begin
  myList := TStringList.Create;
  Try
    myList.Add('#0  Record0;Record1;Record2');
    myList.Add('#1  Record0;Record1;Record2');
    myList.Add('#2  Record0;Record1;Record2');
    myList.Add('#3  Record0;Record1;Record2');
    Test(myList);
    WriteLn(SplitByIndex(myList,0,4);
    ReadLn;
    Finally
      myList.Free;
    End;
end. 
```

此处的输出将如下所示：

```
#0

Record0
Record1
Record2

etc 
```

现在考虑 CSV 文件格式未标准化，请参阅[CSV Wiki](http://en.wikipedia.org/wiki/Comma-separated_values)。因此，对于更通用的解决方案，解决方案可能看起来更复杂。

# c# - 新的更改不会出现在 bin 调试中

> ID：13513683
> 
> 赞同：1
> 
> 时间：2012-11-22T13:24:24.083
> 
> 标签：c#, .net, winforms

我创建了一个 Windows 窗体应用程序。几天前，我开始通过更改图标和图像使其看起来更好。但是这些变化没有出现在我的表格上。(imagelist and program logo .ico) 我已经多次构建/清理了我的应用程序。还有什么我应该清理的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:27:27.163

1.  确保您正在编译为 Debug 而不是 Release
2.  确保您拥有与以前相同的平台（x86、x64、任何 CPU）。

如果仍有问题：

1.  清洁溶液
2.  删除 bin 和 obj 文件夹。
3.  重建

此外，在资源中包含图像和图标是一种很好的做法。如果你不这样做，你可以试一试。

**更新**

你确定应用程序正在编译吗？您可能已经说过即使出现错误也要运行并检查不会再次询问您。转到`View`菜单->`Error list`看看是否有任何编译错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:29:55.957

请确保在解决方案的属性中，项目实际上被标记为构建。您可以 - 对于解决方案中的每个项目 - 选中一个框，说明该项目是否应该实际构建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T03:26:52.857

任何资源（例如图像文件）都必须添加到项目中并标记为复制到输出文件夹（始终），如果较新，则可以选择复制，但由于这取决于时间戳，所以首选更可靠。

没有这个关联的资源文件将不会出现在您的构建输出文件夹中。

# database - 指定的值不是“Edm.Decimal”类型的实例\r\n参数名称: 值

> ID：13513692
> 
> 赞同：2
> 
> 时间：2012-11-22T13:24:59.327
> 
> 标签：database, visual-studio, asp.net-mvc-4, edmx

当我尝试`Int16`使用 Visual Studio 2010 使用 Edmx Entity 的属性映射 SQL 数据库的数字数据类型字段，然后尝试在具有数字数据类型的数据库表中添加或更新记录时，它会给出错误消息：

> 指定的值不是“Edm.Decimal”类型的实例
> 参数名称：值。

但是当我尝试使用 Visual Studio 2012 做同样的事情时，它工作正常。

如何使用 Visual Studio 2010 解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T15:39:58.207

我是编码新手，但我遇到了完全相同的错误。我试图将 Int16 传递到定义为“数字”的数据库中。将有问题的值的“int”更改为“decimal”为我解决了这个问题。

# php - 将 PHP 集成到 HTML 时出错

> ID：13513701
> 
> 赞同：-1
> 
> 时间：2012-11-22T13:25:29.483
> 
> 标签：php, html, web-site-project

我有一个 PHP 论坛，我有一个 HTML 网站

我需要利用网站模板“统一外观”来输出我想将PHP代码包含到html文件中时卡住的论坛内容

我用

```
<?php echo "here goes my PHP code" ?> 
```

但它对我没有任何作用:(

所以我能得到一些帮助来推动我的发展吗

我已经尝试厌倦了在这里发布代码片段，所以我决定发布问题并在需要时尝试找出稍后发布的代码

不管怎么说，还是要谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:28:50.440

如果它“什么都不做”，那么 Web 服务器（如果有的话）可能会将文件“按原样”传递给浏览器，而浏览器会将其解释为未知标签。

你必须：

*   通过 Web 服务器访问页面
*   使用支持 PHP 的 Web 服务器
*   将 Web 服务器配置为将该文件视为 PHP（默认情况下，在大多数系统上，这是通过为文件提供 .php 文件扩展名来完成的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:36:23.097

> 想将 PHP 代码包含到 html 中

HTML 通常不被 PHP 处理。只有以 *.php 结尾的文件（默认配置）通过 PHP 解释器。如果您愿意更改的这些 HTML 文件是独立文件（并且您可以像 一样直接访问它们`http://domain/file.html`），那么您可以尝试在那里强制执行 PHP。如果您的服务器是 Apache 并且您可以使用文件调整其设置`.htaccess`（或者如果您可以更改主要 Apache 的配置），那么您可以尝试将其添加到您的`.htaccess`

```
<Files "*.html">
ForceType application/x-httpd-php
</Files> 
```

如果您的目标是 HTML 模板，那么基本上您很不走运，因为这些文件不会通过网络服务器，而是由您的论坛读取，并且通常在代码中**处理**（不执行等）。论坛使用 ie Smarty 模板引擎的可能性很小，您可以调整论坛代码以在 Smarty 模板中启用 PHP。

**编辑**

对于 PhpBB 来说`.htaccess`，这些 HTML 文件是纯模板，因此无法解决问题。但是，您可以在安全设置中的模板中启用 PHP。只需将“是”设置为“在模板中启用 PHP”。一旦你这样做了，你就可以使用 PHP 代码，但是虽然 PHP 代码本身是相同的，但 PHP 块的标记与通常不同，`<?php`并且`?>`. 代替

```
<?php echo "Test"; ?> 
```

你需要写

```
<!-- PHP --> echo "test"; <!-- ENDPHP --> 
```

# objective-c - 收到 NSNotification 后导航到特定的 UIViewController

> ID：13513707
> 
> 赞同：1
> 
> 时间：2012-11-22T13:25:46.263
> 
> 标签：objective-c, ios, uiviewcontroller, uinavigationcontroller

我正在开发一个 iOS 应用程序，它`UIViewController`使用以下对象处理对象层次结构`UINavigationController`：

```
MenuViewController
  |
  |-ListOfAnimalsViewController
    |
    |-AnimalDetailsViewController
  |
  |-ListOfPlantsViewController
    |
    |-PlantDetailsViewController 
```

`NSNotification`该应用程序接收具有某种动物或植物信息的本地对象。当您触摸通知时，通常的行为是打开应用程序并加载层次结构中的第一个视图控制器。

`UIViewController`有没有办法以编程方式导航到层次结构深处的实例？

**编辑：**我不是要求将控制器推入导航堆栈，而是要求将以前的控制器也推入，即我想保留上面的导航模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T00:23:14.573

我将不得不不同意苏雷什。虽然此解决方案可能适用于像这样的简单情况，即您只有 1 个以前的 ViewController，但如果您想添加第 10 个 ViewController 并保留整个层次结构怎么办？首先，您必须通过每个 ViewController 传递您想要显示的最后一条数据（在本例中为植物或动物），并且您将一次创建 10 个 ViewController。当前 ViewController 和第 10 个之间的转换远非无缝，性能会很糟糕。也不需要去创建你自己的导航系统，不需要让事情变得比现在更复杂，因为这个问题并不太难。

只需推送您要显示的 ViewController，这样您就只会创建 1 个 ViewController。在每个可以作为通知的结果推送的 ViewController 中（以及所有下面的），覆盖后退按钮的行为。如果之前的 ViewController 是您所期望的，请使用 NSStringFromClass 检查 navigationController 的 viewControllers 属性。如果没有，请创建一个 NSMutableArray 作为 viewControllers 的副本，创建您期望的 ViewController 并将其插入到数组中倒数第二个位置。然后通过使用可变数组调用导航控制器上的 setViewControllers:animated: 方法来替换整个堆栈，动画 NO。最后做流行音乐。同样，您一次只创建 1 个 ViewController，保持最佳性能。

我现在无法发布代码，因为我在 iPad 上，但如果你需要它，请询问，当我有一个真正的键盘时，我会添加一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:37:32.130

如果您知道类的名称，则可以使用以下代码进行导航。

```
NSString *className = @"viewControllerName";

    UIViewController* myClass = (UIViewController*)[[NSClassFromString(className) alloc] init];
[self.navigationController pushViewController:myClass animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:08:09.350

我认为您必须发明自己的机制来遵循导航顺序，因为 iOS 视图控制器的静态定义中没有定义顺序的内容。（Segues 似乎已经很接近了，但并不是很接近。）

如果我必须为具有未知深度的视图控制器层次结构执行此操作，我会考虑创建一个使用路径的超类，有点像网络路由。它会有一个方法，例如`displayNextControllerOnPath:(NSString *)path`. `MenuViewController`作为子类的 A`RoutingController`将接收类似 @"ListOfAnimalsViewController.AnimalDetailsViewController" 的路径，剥离第一个路径元素，实例化它（它是另一个`RoutingController`子类），然后发送 @"AnimalDetailsViewController"。

其他细节将涉及知道何时停止，并可能将对象或字典作为有效负载传递给最后一个控制器以用作内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-20T14:35:59.880

我将通过以下方式重建堆栈：

```
MenuViewController *menuController = [[MenuViewController alloc] init];
ListOfAnimalsViewController *listController = [[ListOfAnimalsViewController alloc] init];
AnimalDetailsViewController *detailsController = [[AnimalDetailsViewController alloc] init];
UINavigationController *navigationController = [[UINavigationController alloc] init];
[navigationController setViewControllers:@[menuController, listController, detailsController]];
self.window.rootViewController = navigationController; 
```

您可能需要根据您的实现设置一些属性。

# hsqldb - 迁移期间无法解析存储过程

> ID：13513710
> 
> 赞同：0
> 
> 时间：2012-11-22T13:26:04.900
> 
> 标签：hsqldb, flyway

我正在使用 flyway 1.7 的 api 来迁移 hsql 数据库。我对存储过程有一些问题。以下脚本适用于 hsql 数据库管理器：

```
CREATE TABLE CUSTOMER (
  firstname VARCHAR(50),
  lastname VARCHAR(50),
  mod_ts TIMESTAMP
);

CREATE PROCEDURE new_customer(firstname VARCHAR(50), lastname VARCHAR(50), address VARCHAR(100))
  MODIFIES SQL DATA
    BEGIN ATOMIC
    INSERT INTO CUSTOMER VALUES (firstname, lastname, CURRENT_TIMESTAMP);
  END 
```

但我认为在 flyway 迁移期间，脚本未正确解析（看起来 flyway 认为第二条语句在分号之后结束）。

这是相应的日志输出：

```
DEBUG 2012-11-22 14:16:00,232 [main] (SqlScript.java:161) - Found statement at line 1: create table CUSTOMER (
firstname varchar(50),
lastname varchar(50),
mod_ts timestamp
);
DEBUG 2012-11-22 14:16:00,232 [main] (SqlScript.java:161) - Found statement at line 7: CREATE PROCEDURE new_customer(firstname VARCHAR(50), lastname VARCHAR(50), address VARCHAR(100))
MODIFIES SQL DATA
BEGIN ATOMIC
INSERT INTO CUSTOMER VALUES (firstname, lastname, CURRENT_TIMESTAMP);
DEBUG 2012-11-22 14:16:00,232 [main] (SqlStatement.java:75) - Executing SQL: create table CUSTOMER (
firstname varchar(50),
lastname varchar(50),
mod_ts timestamp
)
DEBUG 2012-11-22 14:16:00,232 [main] (SqlStatement.java:75) - Executing SQL: CREATE PROCEDURE new_customer(firstname VARCHAR(50), lastname VARCHAR(50), address VARCHAR(100))
MODIFIES SQL DATA
BEGIN ATOMIC
INSERT INTO CUSTOMER VALUES (firstname, lastname, CURRENT_TIMESTAMP)
ERROR 2012-11-22 14:16:00,232 [main] (DbMigrator.java:231) - com.googlecode.flyway.core.exception.FlywayException: Error executing statement at line 7: CREATE PROCEDURE new_customer(firstname VARCHAR(50), lastname VARCHAR(50), address VARCHAR(100))
MODIFIES SQL DATA
BEGIN ATOMIC
INSERT INTO CUSTOMER VALUES (firstname, lastname, CURRENT_TIMESTAMP)
ERROR 2012-11-22 14:16:00,232 [main] (DbMigrator.java:236) - Caused by org.hsqldb.HsqlException: unexpected end of statement:  required: ; : line: 4 
```

有没有办法解决这个问题？

**编辑**我刚刚做了一个有趣的观察。如果我使用 flyway 命令行程序，那么它可以完美运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:45:28.533

升级到 Flyway 2.0。它增加了对 Hsql 中 BEGIN ATOMIC 块的支持。

# jquery - jQuery在表格中查找文本

> ID：13513715
> 
> 赞同：0
> 
> 时间：2012-11-22T13:26:22.770
> 
> 标签：jquery, html-table

我需要一种算法，它只调用一行中的文本。

我的 td 由数字和文本组成，我只想要“td”中的文本。

演示：http: [//jsfiddle.net/3yYFY/1](http://jsfiddle.net/3yYFY/1)

例如：

***在第二行***= accure，鳄鱼，獾

***第三行***= 斑马、大象

我的表中有很多行（td），文本不在特定列中

HTML：

```
 <table id="docsTable">
    <tr bgcolor="#E7DDCC" class="liste-0">
        <td align="center"><input type="checkbox"/></td>
        <td>Document Title 1</td>
        <td>567</td>
    </tr>
    <tr bgcolor="#E7DDCC">
        <td align="center"><input type="checkbox"/></td>
        <td>accure</td>
        <td>134</td>
        <td>alligator</td>
        <td>badger</td>
    </tr>
    <tr bgcolor="#E7DDCC">
        <td align="center"><input type="checkbox"/></td>
        <td>Zebra</td>
        <td>231</td>
        <td>Elephant</td>
    </tr>
</table>
<input type='button' id='btnTest' value='Get Rows' /> 
```

jQuery :

```
$(function() {
    $('#btnTest').click(function() {
        var arr = $('#docsTable tr').has('input[type="checkbox"]:checked').map(function() {
            alert($('td:eq(1)', this).text())
        });

    });
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:42:06.677

最终**更新**：

使用这个：http: [//jsfiddle.net/uJdj9/2/](http://jsfiddle.net/uJdj9/2/)

```
$(function() {
    $('#btnTest').click(function() {
        var arr = $('#docsTable tr').has('input[type="checkbox"]:checked').map(function() {
            var text = "";
            $(this).find('td').each(function(){
                var txt = $(this).text();
                if(txt && !txt.match(/\d/g))
                  text += txt + ', ';
            })
            text = text.replace(/,([^,]*)$/,'');
            alert(text);
        });

    });
});​ 
```

或者，如果您知道要丢弃的 td 是这样的：

**演示：http:** [//jsfiddle.net/uJdj9/](http://jsfiddle.net/uJdj9/)

```
 $(function() {
    $('#btnTest').click(function() {
        var arr = $('#docsTable tr').has('input[type="checkbox"]:checked').map(function() {
            var text = "";
            $('td',this).not(':eq(2)').each(function(){
                text += $(this).text()?$(this).text() +', ':'';
            })
            alert(text);
        });

  });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:39:38.567

试试这个代码

```
$(function() {
$('#btnTest').click(function() {
    var arr = $('#docsTable tr').has('input[type="checkbox"]:checked').map(function() {
        alert($('td', this).text())
    });

}); 
```

});​</p>

[http://jsfiddle.net/3yYFY/4/](http://jsfiddle.net/3yYFY/4/)

# .htaccess - htaccess mod 用斜杠将 $_GET 重写为变量

> ID：13513721
> 
> 赞同：8
> 
> 时间：2012-11-22T13:26:45.600
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, get, subdomain

我想用 htaccess 将 URL 重写为可读性更好的 URL，并在 PHP 中使用 $_GET 变量
我有时会使用子域，因此它必须使用和不使用。网址中不需要的变量也是如此。我在 URL 中最多使用 3 个变量

URL`sub.mydomain.com/page/a/1/b/2/c/3`应该指向`sub.mydomain.com/page.php?a=1&b=2&c=3`并且 url`sub.mydomain.com/a/1/b/2/c/3`应该指向`sub.mydomain.com/index.php?a=1&b=2&c=3`哪里`$_GET['a'] = 1`

在搜索和尝试了很多之后我想出了这个

```
RewriteEngine on
RewriteRule ([^/]+)\.domain.com/([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)$ $1.domain.com/$2.php?$3=$4&$5=$6&$7=$8 [QSA,NC]  
RewriteRule ([^/]+)\.domain.com/([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)$ $1.domain.com/index.php?$2=$3&$4=$5&$6=$7 [QSA,NC]  
RewriteRule ([^/]+)\.domain.com/([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)$ $1.domain.com/$2.php?$3=$4&$5=$6 [QSA,NC]  
RewriteRule ([^/]+)\.domain.com/([^/]+)/([^/]+)/([^/]+)/([^/]+)$ $1.domain.com/index.php?$2=$3&$4=$5 [QSA,NC]  
RewriteRule ([^/]+)\.domain.com/([^/]+)/([^/]+)/([^/]+)$ $1.domain.com/$2.php?$3=$4 [QSA,NC]  
RewriteRule ([^/]+)\.domain.com/([^/]+)/([^/]+)$ $1.domain.com/index.php?$2=$3 [QSA,NC]  
RewriteRule ([^/]+)\.domain.com/([^/]+)$ $1.domain.com/$2.php [L,QSA,NC] 
```

但我得到的是一个未找到的服务器错误

我不擅长这个，所以也许我监督一些事情。
我也希望它在结尾处使用和不使用斜线

我应该使用 RewriteCond 和/或设置一些选项吗？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T08:41:42.760

使用时`RewriteRule`，请不要在该行中包含域名。另外，请确保先打开 RewriteEngine。像这样：

```
RewriteEngine On
RewriteRule ^([^/]+)/([^/]+)$  index.php?$1=$2
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+)$  index.php?$1=$2&$3=$4
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)$  index.php?$1=$2&$3=$4&$5=$6 
```

第一行将重写`sub.mydomain.com/a/1`为`sub.mydomain.com/page.php?a=1`，第二行将重写`sub.mydomain.com/a/1/b/2`为`sub.mydomain.com/page.php?a=1&b=2`，依此类推。

# jquery - jquery：如果存在具有正确名称的孩子，则应用 jquery .css 规则

> ID：13513722
> 
> 赞同：0
> 
> 时间：2012-11-22T13:26:46.130
> 
> 标签：jquery, css, parent-child, children, radiobuttonlist

好的，我想为页面上的第二个 div 设置边距

```
$('div#superid:nth-child(2)').css('margin-left', '10px'); 
```

一切正常，我已经达到了目标。但是，我希望仅当此 div 包含至少一个名为 superchild 的输入收音机时才应用该规则。因此，上述规则应适用于：

```
<div id="superid">
   <div>some text
   </div>
   <div>
    <input type="radio"  name="superchild" value="2010">
    <input type="radio"  name="superchild" value="2010">
   </div>
</div> 
```

因为它至少有一个输入收音机，`name="superchild"` 最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:28:35.230

```
var div = $('div#superid:nth-child(2)');
if (div.find('input[name="superchild"]').length) {
    div.css('margin-left', '10px');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:29:47.873

您也可以使用过滤器方法。下面的脚本选择`div`中的每一个`#superid-div`，其中至少有一个类型为 radio 和名称 superchild 的输入字段。然后它将所需的 css 添加到选定的 div 中。

```
$('div#superid > div').filter( function(index,elem) {
    return $(this).find('input[type=radio][name=superchild]').length > 0;
}).css('margin-left', '10px'); 
```

**[jsFiddle](http://jsfiddle.net/Qw6SG/)**

如果您只想将此样式添加到第二个 div，请改用您的选择器。但我认为我的脚本更好地涵盖了所需的行为。

# c++ - 面向 C++ 程序员的 SQL 简介

> ID：13513723
> 
> 赞同：0
> 
> 时间：2012-11-22T13:26:48.893
> 
> 标签：c++, sql, qt, qtsql

我是一名 C++ 程序员，他想将他的知识扩展到 SQL 语言，因为我正在处理 QtSQL 模块并且想更好地理解它。

我想为 C/C++ 程序员找到一个关于 SQL 语言的温和介绍。你能推荐一些阅读或特定的教程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:30:42.583

看到这个问题：[https ://stackoverflow.com/questions/31982/looking-for-a-good-book-to-learn-sql](https://stackoverflow.com/questions/31982/looking-for-a-good-book-to-learn-sql)

评分最高的答案为初学者推荐了 2 本好书。

在我看来，在这种情况下，来自 C++ 领域并没有太大区别。从基本的东西开始，你会没事的！

对于一个不错的网络教程，您还可以查看：[http ://www.w3schools.com/sql/default.asp](http://www.w3schools.com/sql/default.asp)

**评论**：您不应该在 SO 中要求推荐（尽管从您的声誉来看，您知道规则）。这个问题已经有各种各样的答案，因为它过于笼统和主观。阅读一些书籍和教程，然后返回 SQL 编码问题；-)

# html - 以正确的纵横比调整图像大小的 CSS 水平菜单

> ID：13513730
> 
> 赞同：2
> 
> 时间：2012-11-22T13:27:12.000
> 
> 标签：html, css

我找不到解决方案，尽管我确信这很简单！

我使用无序列表和一系列图像创建了一个水平菜单，例如“home”、“about”等。每个图像的宽度都不同，但高度相同，均为 25 像素。

当我调整浏览器的大小时，我希望菜单的宽度和高度都缩小。

当前代码如下：

```
<style>

#container ul.content_list {
}
#container ul.content_list li {
    float: left;
    list-style: none;
    width: 100%;
}
#container ul.content_list li .image{
    float: left; 
    width: 100%;
    max-height: 25px;
}
#container ul.content_list li .image img {
    float: left;
    display: inline-block;
    width: 15%; /* comment this out to make the images the correct width and height */
    max-height: 25px;
}

</style>

<div id="container">
    <ul class="content_list">
        <li>
            <div class="image">
                <img src="homeOff.png" />
                <img src="aboutOff.png" />
                <img src="servicesOff.png" />
                <img src="portfolioOff.png" />
                <img src="contactOff.png" />
                <img src="blogOff.png" />
            </div>
        </li>
    </ul>
</div> 
```

我整理了一个小提琴来证明这个问题：

[http://jsfiddle.net/CAM79/JQuuj/](http://jsfiddle.net/CAM79/JQuuj/)

目前菜单的宽度和高度正在缩小，但图像的高度是错误的。

注释掉“宽度：15%”（在代码中突出显示）将正确显示图像，但随后它们会换行而不是缩进。

任何帮助将不胜感激，非常感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:47:52.397

如果你想让你的设计具有响应性，你必须认为它会在用户调整屏幕大小时对屏幕宽度做出反应。然后，使所有图像具有相同的宽度会容易得多。根据您的设计，这是可能的，但我不建议在菜单中使用图片！！！如果您查看 css 渐变，您可以在不使用任何图片的情况下实现与现在相同的设计（这对于 SEO 来说要好得多）。最后，检查如何正确使用 ul 和 li 标签，您还可以删除所有类并仅使用标签名称作为目标，这将使您的代码更轻。你应该以这样的方式结束：

```
<div id="container">
<ul>
    <li><a>Home/</a></li>
    <li><a>About/</a></li>
    <li><a>Services/</a></li>
    <li><a>portoflio/</a></li>
    <li><a>contact/</a></li>
    <li><a>blog/</a></li>
</ul> 
```

例如，您的 css 可能有类似的东西：

```
#container ul li{
float: left;
width:15%;
background:black;
background: #999; /* for non-css3 browsers */
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#cccccc', endColorstr='#000000'); /* for IE */
background: -webkit-gradient(linear, left top, left bottom, from(#ccc), to(#000)); /* for webkit browsers */
background: -moz-linear-gradient(top,  #ccc,  #000); /* for firefox 3.6+ */

}

#container ul li a{
color:yellow;
text-align:center;
font-weight:bold;
} 
```

# javascript - 如何在jsp中使用javascript打印pdf？

> ID：13513731
> 
> 赞同：0
> 
> 时间：2012-11-22T13:27:11.640
> 
> 标签：javascript, jquery, jsp

我有一个 iframe，其内容是从 jsp 加载的。iframe 包含我在其中显示 pdf 的部分。我有一个名为 print 的按钮，它必须让我打印 pdf 。这是我在探索堆栈后发现的代码：

```
<script type="text/javascript">
function printPDF()
{
if (navigator.appName == 'Microsoft Internet Explorer')
{
document.getElementById('PDFtoPrint').print();
}
else
{
var agreement = document.getElementById('PDFtoPrint');
agreement.focus();
agreement.contentWindow.print();
} 
}
</script>

<html>
<object type="application/pdf" data="http://www.irs.gov/pub/irs-pdf/fw4.pdf" style="width:100%; height:100%" id="PDFtoPrint">
</object>
<a id="printbtn" href="#"  onclick="printPDF()">Print</a>
</html> 
```

问题是它在 mozilla 或 chrome 中都不起作用。这是我不断收到的错误：

```
Error: Error calling method on NPObject!
agreement.focus();
agreement.print(); 
```

现在，我知道 NPobject 是什么了。但是我怎样才能克服这个问题呢？我该怎么做才能让它正常工作？

请帮助。

# android - 在 WebView 中显示弹出对话框的最佳方式是什么？

> ID：13513732
> 
> 赞同：0
> 
> 时间：2012-11-22T13:27:13.603
> 
> 标签：android, html, android-webview

我正在尝试在单击时显示一个弹出对话框，其中包含来自 web 视图的图像。我的问题是弹出对话框没有弹出，但它在 webview 中全屏打开或在浏览器中打开。是否可以在 webview 中弹出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:37:31.550

您可以使用 javascript 从 webview 中弹出一个对话框。

如果您希望在从 web 视图中执行某些操作时在您的应用程序中发生其他事情，那么事情会变得更加复杂。您可能必须推出自己的框架。Netflix这样做了，我会尝试找到链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:40:04.893

```
 public void mDialog(){
    AlertDialog.Builder alert = new AlertDialog.Builder(this);

    alert.setTitle("title");
    alert.setMessage("message");

    // Set an EditText view to get user input 
    final EditText input = new EditText(this);
    input.setInputType(InputType.TYPE_CLASS_NUMBER);
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {

      }
    });

    alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int whichButton) {
        // Canceled.
      }
    });

    alert.show();
  } 
```

此示例显示了一个带有`EditText`. 我自己用这个`WebView`。我相信您可以配置它以显示图像

# jquery - 使用jquery将div滑动到中心

> ID：13513733
> 
> 赞同：0
> 
> 时间：2012-11-22T13:27:14.990
> 
> 标签：jquery

我在左侧有一个 div，我想单击 div 幻灯片（移动）到中心，

我的代码：

```
$('#operator_' + opids[i]).show("slide", { direction: "right" }, 1000); 
```

但它不起作用。

谁能给我jquery代码来实现这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:47:15.977

尝试使用`animate()`：

```
$('#operator_' + opids[i]).animate({marginLeft: "+=200px"}, "slow"); 
```

这将使标识的对象`$('#operator_' + opids[i])`向右移动（因为 leftMargin 增加了）200px。第二个参数是速度。第一个参数可以采用任何 CSS 值。

[有关 jQuery animate() 的更多信息](http://api.jquery.com/animate/)。

# ios - iPad键盘分裂时调整UIPopover

> ID：13513739
> 
> 赞同：3
> 
> 时间：2012-11-22T13:27:30.857
> 
> 标签：ios, ipad, uipopovercontroller

我有一个横向的 iPad 应用程序。它在屏幕上从上到下有多个 UIButtons，其中显示了一个 UIPopover，其中包含一个 TextView。

当键盘出现并覆盖按钮时，弹出框在键盘上移动，并在键盘关闭时很好地返回。

但是当键盘突然进入拆分模式并且如果弹出框是键盘下方的按钮时，弹出框会返回并位于键盘的一半后面。

这种情况应该如何优雅地处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T02:56:11.480

会创建一个透明视图/按钮，您可以从工作中启动 Popover 视图吗？然后，您可以将按钮移动到您想要的任何位置。

# asp.net - 如何访问从安装 Web 服务到主网站的文件夹

> ID：13513746
> 
> 赞同：0
> 
> 时间：2012-11-22T13:28:11.610
> 
> 标签：asp.net

在我的 IIS 服务器中，我有一个正在运行的网站和一个安装在同一网站中的 Web 服务。结构是这样的。

MainWebSite 文件夹 1 文件夹 2 + WebService

现在我怎样才能得到 Folder1 的路径？我想使用类似 server.mapPath("Folder1")

希望我已经解释得当。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:38:25.707

使用`Server.MapPath("Folder1")`，您无法离开应用程序根文件夹。如果您的“Folder1”在 web 服务的根文件夹之外，那么您将无法访问该文件夹。

或者您可能需要多解释一下您的问题。

# c# - DropDownList 事件不会触发

> ID：13513753
> 
> 赞同：3
> 
> 时间：2012-11-22T13:28:35.280
> 
> 标签：c#, asp.net, visual-studio-2010

我的 DropDownList 有问题。事件不会触发！我已经在一个单独的项目中使用 DropDownList 和文字对其进行了测试。每次选择的值发生变化时，我都会在文字中添加一个小星“*”。从来没有问题。但是每次我在项目中的网页上尝试它时，它都会失败。

[这](http://i46.tinypic.com/2cgbrs4.jpg)是一张图片。

```
protected void ddlConsole_SelectedIndexChanged(object sender, EventArgs e)
{
    ltlTesting.Text += "*";
} 
```

**更新：**

我已经尝试了一些东西，但仍然没有成功。我希望有人能告诉我我做错了什么。我现在在后面的代码中连接事件，但我在下拉列表旁边添加了一个链接按钮，看看它是否有效。

```
protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        ddlConsole.SelectedIndexChanged += new EventHandler(ddlConsole_SelectedIndexChanged);
        lnkGet.Click += new EventHandler(ddlConsole_SelectedIndexChanged);
    } 
```

![](../Images/0f75d260a94bd34ddcd024db66305b3a.png)

这是一张图片，看看发生了什么。开头文字中的条纹是在页面加载中添加的，其代码与添加星号的代码相同。只是为了确保它不会加载两次。“GET”链接按钮工作正常。下拉列表不...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:30:37.060

你设置了吗

```
AutoPostBack="true" 
```

在控制属性？？

**编辑：**

消除

> ```
> OnSelectedIndexChanged="ddlConsole_SelectedIndexChanged" 
> ```

从 ASPX 页面中的标记，然后仅使用 AutoPostback true 和代码隐藏中定义的事件重试。aspx 页面应如下所示：

```
 <asp:DropDownList runat="server" ID="ddlConsole" AutoPostBack="True"></asp:DropDownList> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:31:54.627

是`AutoPostBack`下拉列表的`true`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:32:51.610

检查 Dropdownlist 的 AutopostBack 属性将其设置为 true ：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T13:34:21.640

如果图片是正确的`AutoPostBack="True"`，是否有任何代码可以设置`ltlTesting`页面加载时的值？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T19:09:41.487

`AutoPostback="True"`将and添加`OnSelectedIndexChanged="ddlConsole_SelectedIndexChanged"`到 ddlConsole 属性。您可以删除该`OnInit`方法，因为您在设计时绑定了 SeletedIndexChanged 事件。

# maven - Maven 发布插件 - 需要 SNAPSHOT 项目

> ID：13513758
> 
> 赞同：12
> 
> 时间：2012-11-22T13:28:50.870
> 
> 标签：maven, jenkins, hudson, maven-release-plugin

我正在使用**Jenkins**中的 M2 发布插件，它在内部调用**maven-release-plugin 2.3.2**，并且在构建时会抛出此错误：**`You don't have a SNAPSHOT project in the reactor projects list`**。问题是，我的项目 poms的版本**确实**为 1.0.0-SNAPSHOT。我错过了什么？

`com.abc.def`是`company parent POM`, 我只是`mvn release`为了`utils`

```
<modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.abc</groupId>
        <artifactId>def</artifactId>
        <version>1.0.0</version>
    </parent>

    <groupId>com.abc.def</groupId>
    <artifactId>utils</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>pom</packaging>
    <name>utils</name> 
```

* * *

是的，我已经完成了基本的 Google + SO 拖网，并且到处都指出我的 POM 应该将 SNAPSHOT 作为版本，它已经存在。除了我公司的父 POM 不是快照。这可能是原因吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-21T15:15:36.020

我有同样的问题，但这些解决方案没有奏效。[Tomek Kaczanowski 的这篇博](http://www.kaczanowscy.pl/tomek/2012-12/jenkins-maven-no-snapshots-in-the-reactor-project-list)文一针见血。

原因通常是 Jenkins SVN 策略设置为“尽可能使用 svn update”，这不会清理构建之间的构建工作区。

当你尝试删减版本时，Jenkins 会更新你的 pom 并创建一些临时文件。如果发布失败，这些 pom 更新和临时文件不会被清理。因此，当您修复 pom 并尝试重建时，`You don't have a SNAPSHOT project in the reactor projects list`由于这些时髦的工作区工件使 Jenkins 感到困惑，您会收到错误消息。

解决方案是更改您的 Jenkins SVN 策略。以下任何一项都应该有效：

*   总是检查一个新的副本
*   通过首先删除未版本控制/忽略的文件，然后“svn update”来模拟干净的结帐
*   尽可能使用 svn update，在更新前使用 'svn revert'

我还建议您清除 Jenkins 工作区，以确保您重新开始。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T15:14:40.660

大师`pom`不需要`SNAPSHOT`那么好（在我的公司，我们有相同的设置，它工作正常）。据我所知，这部分没问题`utils pom`，所以也许你错过了其他东西，比如

```
<scm>
    <developerConnection>scm:${release-scm}</developerConnection>
</scm> 
```

当然还有`maven release plugin`你的构建定义部分`POM`？（我知道的远射）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-25T19:39:11.920

我有时会发现术语“SNAPSHOT”的拼写问题，基本上也会导致同样的错误。像：

```
 1\. SNAPSOT
 2\. SNASHOT
 3\. SHNAPSOT 
```

;-) 所以值得提前检查一下。

很酷的修复是在父 pom 上使用：

```
versions:set 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-24T18:27:21.000

实际上 Jenkis 的工作区包含一些模块的旧的非 SNAPSHOT 版本。尝试清除工作区（=清理并清除它），然后再次发布，他将获得带有后缀 -SNAPSHOT 的更正版本

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-27T11:08:22.170

我找到了原因：最新的公司Parent POM没有被捡到

1.  我在参数列表中`clean`都有。不工作`-U``mvn`
2.  然后我清理了`~/.m2`存储库。不工作

有效的是，在詹金斯

1.  转到`Job config`页面
2.  前往`Build`，点击`Advanced`
3.  选中该框`Use private Maven repository`
4.  选择`Local to the workspace`。`Save`

我知道这是 Maven 出于某种原因习惯做的那些奇怪的事情之一。和往常一样，错误信息不够丰富/直观。

# javascript - 在java中匹配美国电话号码模式的正则表达式

> ID：13513760
> 
> 赞同：0
> 
> 时间：2012-11-22T13:29:03.397
> 
> 标签：javascript, regex, phone-number

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:36:09.930

The following regex will do:

```
^\+?[0-9\-]+\*?$ 
```

How it works:

2.  Beginning of string: `^`
3.  Optional + character, escaped because "+" could also be a regex operator: `\+?`
4.  At least one character which is either 0-9 or "-", escaped because "-" could also be a regex operator: `[0-9\-]+`
5.  Optional "*" character, escaped: `\*?`
6.  End of string: `$'

Note that this is just a simple example to match the pattern as you defined it. A more elaborate discussion on handling US phone numbers with Regex can be found [here](https://stackoverflow.com/questions/175488/us-phone-number-verification)

# iphone - 删除应用程序后按下 CFUUIDRef

> ID：13513761
> 
> 赞同：1
> 
> 时间：2012-11-22T13:29:12.567
> 
> 标签：iphone, objective-c, ios, nsuserdefaults

最近苹果拒绝了使用唯一设备标识符（`UDID`）的应用程序，在我的应用程序中，我第一次`CFUUIDRef`为每个设备创建了一次，效果很好。在我的应用程序中，当我第一次创建设备 ID 并将其发送到服务器时，我向新用户提供了 10 次单击按钮（某些服务），并且该 ID 现在具有 10 次单击的信用。问题是当用户删除我的应用程序时，它会生成一个新的标识符。我如何使用标识符将一些文件写入 iphone，例如“MyCustomDeviceID”，当用户下载应用程序时，我正在检查该文件是否存在，如果存在，我将获取保存的参数，如果不存在我正在创建标识符，然后创建文档。我得想办法在 iPhone 上留下印记。

想法将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T08:36:28.030

假设您可以将 a`CFUUIDRef`转换为`NSString`，则可以将其存储在钥匙串中。存储在钥匙串中的项目在应用程序删除时仍然存在。查看[PDKeychainBindingsController](https://github.com/carlbrown/PDKeychainBindingsController "PDKeychainBindingsController")以供参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:39:38.153

在 iOS 上，您没有“共享空间”来保存数据并在应用程序删除后对其进行维护。你必须以其他方式做到这一点：

*   您可以为您的应用启用 iCloud 并使用 NSUbiquitousKeyValueStore 保存您的 id。

*   您可以将您的标识符保存在 NSUserDefaults 中，因此如果应用程序被删除然后重新安装，它将在备份中可用。（显然用户必须从备份中恢复）

*   或者，您可以将标识符与名义帐户相关联。（您必须创建一个系统，用户可以使用此名义帐户进行注册和登录）

# c++ - 使用IE8打开网站的流程

> ID：13513764
> 
> 赞同：1
> 
> 时间：2012-11-22T13:29:16.133
> 
> 标签：c++, c, sdk

我想知道当我用IE8打开一个网站（比如www.yahoo.com）时，IE8会调用哪个API？所以我可以挂钩这些 API 来捕获 IE8 当前打开的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T01:34:50.607

IE 使用 Microsoft 的[WinSock](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741416%28v=vs.85%29.aspx)库 API 与 Web 服务器交互。

您可能想要寻找一个网络监控/嗅探 API，您可以使用它来检查 HTTP 请求，并确定浏览器正在使用的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:19:46.213

当您在浏览器中输入 URL 时，浏览器（通常）会向该 URL 标识的服务器发出 HTTP 请求。要发出请求，需要服务器的 IP 地址，该地址是通过主机（域名）名称的 DNS 查找获得的。

一旦收到响应（通常包含 HTML 标记），浏览器就会渲染它以显示网页。

此处提供更多详细信息：[在浏览器中输入 URL 时会发生什么](https://stackoverflow.com/questions/2092527/what-happens-when-you-type-in-a-url-in-browser)

因此，在一般情况下，不会发出这样的“API”请求。（从技术上讲，您可以将对服务器的原始 HTTP 请求视为 API 请求）。但是，您可能指的那种“API”请求并不是在刚刚描述的这种一般情况下提出的。这些请求发生在页面上执行的 JavaScript 向 Web 服务器发出**Ajax** HTTP 请求 (XmlHttpRequest) 以执行某些操作时。

我不确定 IE8，但大多数现代浏览器（包括 IE9 和 IE10）的“开发人员工具”功能可以让您看到网页在执行不同操作时发出的 Ajax HTTP 请求。

希望这可以帮助。

# linq - 在 linq 查询中使用字典

> ID：13513767
> 
> 赞同：6
> 
> 时间：2012-11-22T13:29:27.733
> 
> 标签：linq, dictionary, linq-to-entities

我想在我的 linq 查询中使用一些字典，但是由于 LINQ to entity 无法翻译字典的使用，它会引发异常。实际上在以下问题中描述了相同的问题： [linq to entity framework: use dictionary in query](https://stackoverflow.com/questions/7638859/linq-to-entity-framework-use-dictionary-in-query)

我对那里描述的解决方案不满意。我确信这个问题还有其他解决方案。我不想使用 ToList/ToArray 方法 - 这会将所有数据带到内存中。

在不将数据库数据拉到内存的情况下，解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:39:58.787

您的示例看起来您实际上不需要字典的功能，您只是想要`WHERE IN`功能。
您可以使用以下方法来实现此目的：

```
var countries = Countries.WhereIn(x => x.CountryId, dict.Keys); 
```

`WhereIn`不是内置的查询运算符，您需要自己编写 - 或复制：

```
/// <summary>
/// Holds extension methods that simplify querying.
/// </summary>
public static class QueryExtensions
{
    /// <summary>
    ///   Return the element that the specified property's value is contained in the specified values.
    /// </summary>
    /// <typeparam name="TElement"> The type of the element. </typeparam>
    /// <typeparam name="TValue"> The type of the values. </typeparam>
    /// <param name="source"> The source. </param>
    /// <param name="propertySelector"> The property to be tested. </param>
    /// <param name="values"> The accepted values of the property. </param>
    /// <returns> The accepted elements. </returns>
    public static IQueryable<TElement> WhereIn<TElement, TValue>(
        this IQueryable<TElement> source, 
        Expression<Func<TElement, TValue>> propertySelector, 
        params TValue[] values)
    {
        return source.Where(GetWhereInExpression(propertySelector, values));
    }

    /// <summary>
    ///   Return the element that the specified property's value is contained in the specified values.
    /// </summary>
    /// <typeparam name="TElement"> The type of the element. </typeparam>
    /// <typeparam name="TValue"> The type of the values. </typeparam>
    /// <param name="source"> The source. </param>
    /// <param name="propertySelector"> The property to be tested. </param>
    /// <param name="values"> The accepted values of the property. </param>
    /// <returns> The accepted elements. </returns>
    public static IQueryable<TElement> WhereIn<TElement, TValue>(
        this IQueryable<TElement> source, 
        Expression<Func<TElement, TValue>> propertySelector, 
        IEnumerable<TValue> values)
    {
        return source.Where(GetWhereInExpression(propertySelector, values.ToList()));
    }

    /// <summary>
    ///   Gets the expression for a "where in" condition.
    /// </summary>
    /// <typeparam name="TElement"> The type of the element. </typeparam>
    /// <typeparam name="TValue"> The type of the value. </typeparam>
    /// <param name="propertySelector"> The property selector. </param>
    /// <param name="values"> The values. </param>
    /// <returns> The expression. </returns>
    private static Expression<Func<TElement, bool>> GetWhereInExpression<TElement, TValue>(
        Expression<Func<TElement, TValue>> propertySelector, ICollection<TValue> values)
    {
        var p = propertySelector.Parameters.Single();
        if (!values.Any())
            return e => false;

        var equals =
            values.Select(
                value =>
                (Expression)Expression.Equal(propertySelector.Body, Expression.Constant(value, typeof(TValue))));
        var body = equals.Aggregate(Expression.OrElse);

        return Expression.Lambda<Func<TElement, bool>>(body, p);
    }
} 
```

# javascript - Jquery/Javascript 和 Css 条件不适用于 firefox 和 IE。它适用于 Chrome

> ID：13513769
> 
> 赞同：3
> 
> 时间：2012-11-22T13:29:39.243
> 
> 标签：javascript, jquery, css, firefox, if-statement

```
$('.myclassname').mouseover(function(){

  if($(this).children('span').css('font-weight')=='normal')

  {..do something... }

} 
```

为什么“做某事”在 Chrome 上有效，但在 Firefox 16 和 Internet Explorer 9 上无效？如果我删除 if 条件，它可以工作，但我需要它，所以我不能删除。这是CSS

```
div.myclassname span {...; font-weight:normal ; ...} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:39:49.520

尝试，

```
if($(this).children('span').css('font-weight')=='400') 
```

或者

```
if($(this).children('span').css('font-weight')==400) 
```

检查这里[http://jsfiddle.net/muthkum/qpEK2/2/](http://jsfiddle.net/muthkum/qpEK2/2/) `font-weight`在 JS 中返回 400。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:31:16.657

试试这个：

```
if($(this).children('span').eq(0).css('font-weight')=='normal') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:37:45.307

你可以在jsfiddle中设置它吗？做：

```
$('.myclassname').mouseover(function(){
    $('span',$(this)).each(function(){
      if($(this).css('font-weight')=='normal'){
       //do something
      }
    });
}); 
```

工作？

# php - 使用填充调整图像大小

> ID：13513775
> 
> 赞同：0
> 
> 时间：2012-11-22T13:29:56.210
> 
> 标签：php, image-processing

我正在尝试使用此类：[http ://www.verot.net/php_class_upload_samples.htm](http://www.verot.net/php_class_upload_samples.htm)

如果有人熟悉调整大小和填充图像的其余部分，请帮助我。

这个想法是，如果你上传一张 600x600 的图片，我想保存两张图片：1-600x600 和 1-300x300。到目前为止，它工作得很好。但是，如果用户选择上传大小为 749x1202 的图片，我希望脚本使其在 300x300 和 600x600 中看起来不错，其中无用的空间被白色填充，因此图像仍然是 600x600。对于较小的图像（例如 249x400）也应如此。

到目前为止，这是我的代码：

```
// Set the upload directory
$uploadDir = '../../htdocs/public/product_images/'.$id.'/';
$thumbDir = '../../htdocs/public/product_images/'.$id.'/thumbs/';

@mkdir($uploadDir, 0755, true);
@mkdir($thumbDir, 0755, true);

// Store the file content in a variable
$file = file_get_contents('php://input');

// Save the file to the server
file_put_contents($uploadDir . $filename, $file);

$targetFile =  str_replace('//','/',$uploadDir) . $filename;
$targetThumb = str_replace('//','/',$thumbDir) . $filename;
copy ($targetFile,$targetThumb);

$image = new upload($targetFile);
if ($image->uploaded) {
    $image->image_resize          = true;
    $image->image_ratio_fill      = true;
    $image->image_x               = 600;
    $image->image_y               = 600;
    $image->file_overwrite        = true;
    $image->process($uploadDir);
} 

$image = new upload($targetThumb);
if ($image->uploaded) {
    $image->image_resize          = true;
    $image->image_ratio_fill      = true;
    $image->image_x               = 300;
    $image->image_y               = 300;
    $image->file_overwrite        = true;
    $image->process($thumbDir);
} 
```

我可以用另一种方式做到这一点，但如果有人能指导我一点，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:43:52.397

您可以做的是在保持纵横比的情况下缩放图像，因此至少有一个尺寸符合您的要求（即您获得 128x300），然后创建空图像（画布）并将这两个图像合并在画布上居中。但是我只需将这个 128x300 像素的图像写在磁盘上，并在 HTML/CSS 中强制执行 300x300 像素的容器大小 - 这会更好，因为您的文件更小，并且您可以通过更改 CSS 轻松更改画布的即 bg 颜色 - 使用以前的技术，如果 bg 不透明（如果是，那么为什么不使用 HTML）就不会那么容易了？

# wcf - WCF REST 的服务行为

> ID：13513776
> 
> 赞同：5
> 
> 时间：2012-11-22T13:30:01.530
> 
> 标签：wcf, ierrorhandler, servicebehavior

我在为我的 WCF 服务配置 ServiceBehavior 时遇到问题。

一些背景。基本上我正在开发一个应该在 IIS 上运行的 REST 服务 WCF。我需要能够记录服务抛出的异常（我正在使用 log4net）并根据异常类型返回 HTTP 状态代码。我希望我的服务实现对 WCF 相关的东西有最少的了解，所以我不想在服务中的任何地方都将异常转换为 FaultException。所以我发现将我自己的 IErrorHandler 添加到服务主机将是最好的方法。

然而，我的问题是，无论我尝试什么，我似乎都无法在 Web.config 中获得我的自定义 ServiceBehavior 的配置。这是相关的代码。

网络配置。

```
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true">
    <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </modules>
</system.webServer>

<system.serviceModel>
  <behaviors>
    <serviceBehaviors>
      <behavior name="UsingErrorLogBehavior">
        <errorLogBehavior/>
      </behavior>
    </serviceBehaviors>
    <endpointBehaviors>
      <behavior>
        <webHttp/>
      </behavior>
    </endpointBehaviors>
  </behaviors>
  <extensions>
    <behaviorExtensions>
      <add name="errorLogBehavior"
           type="MyNameSpace.Web.ErrorExtensionElement, MyNameSpace.Web"/>
    </behaviorExtensions>
  </extensions>
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
  <standardEndpoints>
    <webHttpEndpoint>
      <standardEndpoint name="" helpEnabled="true" 
                        automaticFormatSelectionEnabled="false" 
                        defaultOutgoingResponseFormat="Json" 
                        maxReceivedMessageSize="4194304" transferMode="Buffered" />
    </webHttpEndpoint>
  </standardEndpoints>
</system.serviceModel> 
```

错误扩展元素。

```
namespace MyNameSpace.Web
{
    public class ErrorExtensionElement : BehaviorExtensionElement
    {
        public override Type BehaviorType
        {
            get { return typeof(ErrorServiceBehavior); }
        }

        protected override object CreateBehavior()
        {
            return new ErrorServiceBehavior();
        }
    }
} 
```

错误服务行为。

```
namespace MyNameSpace.Web
{
    public class ErrorServiceBehavior : IServiceBehavior
    {
        public void AddBindingParameters(ServiceDescription serviceDescription, System.ServiceModel.ServiceHostBase serviceHostBase, System.Collections.ObjectModel.Collection<ServiceEndpoint> endpoints, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
        {
        }

        public void ApplyDispatchBehavior(ServiceDescription serviceDescription, System.ServiceModel.ServiceHostBase serviceHostBase)
        {
            foreach (ChannelDispatcher channelDispatcher in serviceHostBase.ChannelDispatchers)
            {
                channelDispatcher.ErrorHandlers.Add(new ExceptionModule());
            }
        }

        public void Validate(ServiceDescription serviceDescription, System.ServiceModel.ServiceHostBase serviceHostBase)
        {
        }
    }
} 
```

ExceptionModule 实现 IErrorHandler 的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:32:55.170

您有一个`<serviceBehavior>`名为“UsingErrorLogBehavior”的部分，但没有服务配置引用该部分。您可以将该部分设置为*默认*服务行为（通过不给它命名，就像您为端点行为所拥有的那样），或者`<service>`为您的服务添加一个引用该行为的元素：

```
<services>
  <service name="YourNamespace.YourServiceName"
           behaviorConfiguration="UsingErrorLogBehavior">
    <endpoint address=""
              binding="webHttpBinding"
              contract="YourNamespace.YourContractName" />
  </service>
</services> 
```

# visual-studio-2010 - Is it better to create your sharepoint application in sharepoint designer or visual studio?

> ID：13513782
> 
> 赞同：0
> 
> 时间：2012-11-22T13:30:26.297
> 
> 标签：visual-studio-2010, sharepoint-2010

I have been asked to create a sandboxed SharePoint application/site; multiple developers will be working on this. All the team members are .Net developers. Which is the best/maintainable/professional approach?

Approach 1 - Create pages, lists, workflows etc. in SharePoint and SharePoint designer. Then export the wsp file and import it into visual studio. e.g. do most of the work in the SharePoint ui.

Approach 2 - Build it up using visual studio e.g. modules, elements, feature receivers.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:34:45.590

It really depends on how much you want to do with the sharepoint application.

Sharepoint Designer has slightly more functionality than the SPS web admin interface, and this connects directly to your SPS instance.

VS will give you far more flixibility but requires greater programming knowledge and (if memory serves me) you will require an instance of SPS installed on your development machine.

# listview - 无法将多个项目插入列表视图控件的单行

> ID：13513784
> 
> 赞同：0
> 
> 时间：2012-11-22T13:30:34.950
> 
> 标签：listview, user-interface, win32gui

我正在尝试使用下面的代码创建带有两列的 Listview 控件。

```
LV_COLUMN lvc = {0};
lvc.mask = LVCF_FMT | LVCF_WIDTH | LVCF_TEXT | LVCF_SUBITEM;
lvc.fmt = LVCFMT_LEFT;
lvc.cx = 180;
lvc.pszText = _T("Title");
lvc.cchTextMax = _tcslen(lvc.pszText);
ListView_InsertColumn(hwndList, 0, &lvc);

lvc.pszText = _T("ApplicationName");
lvc.cchTextMax = _tcslen(lvc.pszText);
ListView_InsertColumn(hwndList, 1, &lvc); 
```

插入两个列。这是成功插入的。然后我想在第一行分别为 Title & ApplicationName 列添加 2 个项目。

我正在使用结构：

```
typedef struct{
   TCHAR m_title[512];
   TCHAR m_Application[512];
  }APPLICATION_LIST; 
```

然后尝试使用以下方法在同一行中插入多个项目：

```
APPLICATION_LIST *pAppList = new APPLICATION_LIST;
    if(pAppList)
    {
        _tcscpy(pAppList->m_title,TEXT("My Mozilla"));
        _tcscpy(pAppList->m_Application,TEXT("FireFox"));

    }

            LVITEM lvi = {0};
            lvi.mask =  LVIF_PARAM | LVIF_TEXT;
        lvi.iItem = ListView_GetItemCount(hwndList);
            lvi.pszText = LPSTR_TEXTCALLBACK ;
            ListView_InsertItem(hwndList,&lvi); 
```

但我无法使用这个将多个项目插入同一行！我哪里出错了？这样做时不会插入任何项目！

请帮我纠正这个代码？那么如何将多个项目插入列表视图控件的同一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:15:39.870

您正在指定`LVIF_PARAM`标志，但没有分配`lvi.lParam`字段。你需要添加它。那么，要`LPSTR_TEXTCALLBACK`正确使用，ListView的父窗口的消息过程需要处理[`LVN_GETDISPINFO`](http://msdn.microsoft.com/en-us/library/bb774818.aspx)通知。它将提供一个指向结构的指针，该`LVITEM`结构指定它希望您为其提供文本的列表项和列。您可以使用该项目`lParam`来访问您的`APPLICATION_LIST`指针并将适当的字符串复制到项目的`pszText`缓冲区中。

例如：

```
LV_COLUMN lvc = {0};
lvc.mask = LVCF_FMT | LVCF_WIDTH | LVCF_TEXT | LVCF_SUBITEM;
lvc.fmt = LVCFMT_LEFT;
lvc.cx = 180;
lvc.pszText = TEXT("Title");
lvc.cchTextMax = lstrlen(lvc.pszText);
ListView_InsertColumn(hwndList, 0, &lvc);
...
lvc.pszText = TEXT("ApplicationName");
lvc.cchTextMax = lstrlen(lvc.pszText);
ListView_InsertColumn(hwndList, 1, &lvc); 
```

.

```
typedef struct
{
   TCHAR m_title[512];
   TCHAR m_Application[512];
} APPLICATION_INFO;

APPLICATION_INFO *pAppInfo = new APPLICATION_INFO;
lstrcpy(pAppInfo->m_title, TEXT("My Mozilla"));
lstrcpy(pAppInfo->m_Application, TEXT("FireFox"));

LVITEM lvi = {0};
lvi.mask =  LVIF_PARAM | LVIF_TEXT;
lvi.iItem = ListView_GetItemCount(hwndList);
lvi.pszText = LPSTR_TEXTCALLBACK;
lvi.lParam = reinterpret_cast<LPARAM>(pAppInfo);
ListView_InsertItem(hwndList,&lvi); 
```

.

```
case WM_NOTIFY:
{
    NMDR *nmhdr = reinterpret_cast<NMHDR*>(msg.lParam);
    if ((nmhdr->hwndFrom == hwndList) && (nmhdr->code == LVN_GETDISPINFO))
    {
        NMLVDISPINFO pdi = reinterpret_cast<NMLVDISPINFO*>(msg.lParam);

        if (pdi->item.mask & LVIF_TEXT)
        {
            APPLICATION_INFO *pAppInfo = reinterpret_cast<APPLICATION_INFO*>(pdi->item.lParam);

            switch (pdi->item.iSubItem)
            {
                case 0:
                    lstrcpyn(pdi->item.pszText, pAppInfo->m_Title, pdi->item->cchTextMax);
                    break;

                case 1:
                    lstrcpyn(pdi->item.pszText, pAppInfo->m_Application, pdi->item->cchTextMax);
                    break;
            }
        }
    }
    else
    {
        ...
    }
    break;
} 
```

# java - 正则表达式匹配中的问号不起作用

> ID：13513787
> 
> 赞同：0
> 
> 时间：2012-11-22T13:30:46.773
> 
> 标签：java, regex

我是正则表达式的新手。我以为这会返回`matched succesfully`，但事实并非如此。为什么呢？

```
String myString = "SUB_HEADER5_LABEL";
if (myString.matches(Pattern.quote("SUB_HEADER?_LABEL")))
{
    System.out.println("matched succesfully");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T13:31:36.593

`Pattern.qoute()`将创建一个仅与给定字符串**完全匹配的模式。**你需要

```
if (myString.matches("SUB_HEADER\\d_LABEL")) 
```

如果您希望数字超过 9，请添加`+`量词，例如

```
if (myString.matches("SUB_HEADER\\d+_LABEL")) 
```

如果您想匹配您拥有的数字`?`（在您的情况下意味着一或零`R`，因为它是一个量词）。您需要将其替换为`[0-9]`or `\\d`。

# iphone - 如何检查 ABNewPersonViewController 中的所有字段是否为空

> ID：13513788
> 
> 赞同：3
> 
> 时间：2012-11-22T13:30:46.087
> 
> 标签：iphone, ios, abpersonviewcontroller

我在 ABNewPersonViewController 中有一个自定义按钮。仅当 ABNewPersonViewController 中的任何（至少）一个字段被编辑时，我才需要启用该按钮。除了编写代码来独立检查所有字段之外，还有什么方法可以检查这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:38:11.980

您将需要一些代码来执行此操作，但我会通过对每个字段上的现有事件侦听器进行编码来在编辑正在侦听的字段时启用按钮来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:50:10.323

所有控件都有事件，因此您可以将代码链接到它。示例：UITextField 具有事件 Editing Did Begin。每个控件都可以链接到同一个 IBAction，您可以通过检查发送者参数来识别用户更改的控件。

# c# - 对齐多个排序列表

> ID：13513789
> 
> 赞同：9
> 
> 时间：2012-11-22T13:30:57.590
> 
> 标签：c#, linq

`List<int>`如果我有，例如以下

```
{ 1, 2, 3, 4 } //list1
{ 2, 3, 5, 6 } //list2
...
{ 3, 4, 5 }    //listN 
```

检索以下相应`List<int?>`s 的最佳方法是什么？

```
{    1, 2,    3,    4,    null, null } //list1
{ null, 2,    3,    null, 5,    6    } //list2
...
{ null, null, 3,    4,    5,    null } //listN 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T13:39:32.630

我正在发布我们在聊天中讨论的解决方案。我有一个使用 Linq 进行所有循环/过滤的未优化版本：

*   [http://ideone.com/H4gCoE](http://ideone.com/H4gCoE)（现场演示）

但是，我怀疑它不会太高效，因为创建了所有枚举器类，并且沿途实例化/修改了集合。

因此，我花时间将其*优化*为手写循环，并通过管理来跟踪活动的*迭代器*，而不是修改`iters`集合。这里是：

有关完整的现场演示，请参阅**[http://ideone.com/FuZIDy](http://ideone.com/FuZIDy)**。

> **注意**我假设列表是预先排序的`DefaultComparer<T>`，因为我使用 Linq 的`Min()`扩展方法，没有*自定义比较器*

```
public static IEnumerable<IEnumerable<T>> AlignSequences<T>(this IEnumerable<IEnumerable<T>> sequences)
{
    var iters = sequences
        .Select((s, index) => new { active=true, index, enumerator = s.GetEnumerator() })
        .ToArray();

    var isActive = iters.Select(it => it.enumerator.MoveNext()).ToArray();
    var numactive = isActive.Count(flag => flag);

    try
    {
        while (numactive > 0)
        {
            T min = iters
                .Where(it => isActive[it.index])
                .Min(it => it.enumerator.Current);

            var row = new T[iters.Count()];

            for (int j = 0; j < isActive.Length; j++)
            {
                if (!isActive[j] || !Equals(iters[j].enumerator.Current, min)) 
                    continue;

                row[j] = min;
                if (!iters[j].enumerator.MoveNext())
                {
                    isActive[j] = false;
                    numactive -= 1;
                }
            }
            yield return row;
        }
    }
    finally
    {
        foreach (var iter in iters) iter.enumerator.Dispose();
    }
} 
```

像这样使用它：

```
public static void Main(string[] args)
{
    var list1 = new int?[] { 1, 2, 3, 4, 5 };
    var list2 = new int?[] { 3, 4, 5, 6, 7 };
    var list3 = new int?[] { 6, 9, 9 };

    var lockstep = AlignSequences(new[] { list1, list2, list3 });

    foreach (var step in lockstep)
        Console.WriteLine(string.Join("\t", step.Select(i => i.HasValue ? i.Value.ToString() : "null").ToArray()));
} 
```

它打印（*出于演示目的，我横向打印结果*）：

```
1       null    null
2       null    null
3       3       null
4       4       null
5       5       null
null    6       6
null    7       null
null    null    9
null    null    9 
```

注意：您可能希望更改接口以接受任意数量的列表，而不是单个*序列序列*：

```
public static IEnumerable<IEnumerable<T>> AlignSequences<T>(params IEnumerable<T>[] sequences) 
```

这样你就可以打电话

```
var lockstep = AlignSequences(list1, list2, list3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:36:30.113

这是另一种使用[`List.BinarySearch`](http://msdn.microsoft.com/en-us/library/w4e7fxsh.aspx).

样本数据：

```
var list1 = new List<int>() { 1, 2, 3, 4 };
var list2 = new List<int>() { 2, 3, 5, 6, 7, 8 }; 
var list3 = new List<int>() { 3, 4, 5 };
var all   = new List<List<int>>() { list1, list2, list3 }; 
```

计算最小/最大和所有可空列表：

```
int min = all.Min(l => l.Min());
int max = all.Max(l => l.Max());
// start from smallest number and end with highest, fill all between
int count = max - min + 1;  

List<int?> l1Result = new List<int?>(count);
List<int?> l2Result = new List<int?>(count);
List<int?> l3Result = new List<int?>(count);

foreach (int val in Enumerable.Range(min, count))
{
    if (list1.BinarySearch(val) >= 0)
        l1Result.Add(val);
    else
        l1Result.Add(new Nullable<int>());

    if (list2.BinarySearch(val) >= 0)
        l2Result.Add(val);
    else
        l2Result.Add(new Nullable<int>());

    if (list3.BinarySearch(val) >= 0)
        l3Result.Add(val);
    else
        l3Result.Add(new Nullable<int>());
} 
```

输出：

```
Console.WriteLine(string.Join(",", l1Result.Select(i => !i.HasValue ? "NULL" : i.Value.ToString())));
Console.WriteLine(string.Join(",", l2Result.Select(i => !i.HasValue ? "NULL" : i.Value.ToString())));
Console.WriteLine(string.Join(",", l3Result.Select(i => !i.HasValue ? "NULL" : i.Value.ToString())));

1,      2,      3,      4,      NULL,   NULL,   NULL,   NULL
NULL,   2,      3,      NULL,   5,      6,      7,      8
NULL,   NULL,   3,      4,      5,      NULL,   NULL,   NULL 
```

[**演示**](http://ideone.com/D2UqfC)

# c# - itextsharp 中的页脚文本和页码

> ID：13513790
> 
> 赞同：0
> 
> 时间：2012-11-22T13:30:57.787
> 
> 标签：c#, itextsharp, pdfptable

我有一个 PDF 文档，其中通常每个页面都标有页脚，页码前面是页面应该所在的章节或章节的名称。但是，偶尔，我会得到一些跨越页数。

我需要维护它们所在的当前部分的页脚印记，但由于大表运行在多个页面上，这些页面被前面部分的页脚印记加盖，而显示表格的最后一页得到当前部分页脚印章。

如果有人能想出一个解决方案来为当前部分设置和维护章节/部分页脚印章，那就太好了。

*** 附加 *** 这是 onEndPage 覆盖的代码。

```
public override void OnEndPage(PdfWriter writer, Document document)
{
    base.OnEndPage(writer, document);

    if ((pagenumber - 1) >= 1)
    {
        String text = footer + pagenumber.ToString();
        float len = bf.GetWidthPoint(text, 8);

        Rectangle pageSize = document.PageSize;

        cb.SetRGBColorFill(100, 100, 100);

        cb.BeginText();
        cb.SetFontAndSize(bf, 8);
        cb.SetTextMatrix(pageSize.GetRight(100), pageSize.GetBottom(20));
        cb.ShowText(text);
        cb.EndText();
        if (this.currentChapter > this.totalChapters)
        {
            pagenumber = 0;
        }
        else
        {
            pagenumber++;
        }
    }
    else
    {
        pagenumber++;
    }
} 
```

我跳过为文档添加页眉和页脚信息，因为我有一个封面。由于各个部分是不同的信息，因此我根据各个领域将它们分解为章节和小节。此外，用户可以选择一次打印从数据库信息生成的多个 PDF。在每一章的开头，我使用以下命令设置页脚文本：

```
this.PageEventHandler.footer = "(Part 1) - Page: "; 
```

或者至少我正在努力。在做第二部分（就业历史）时，如果一个人在他们的就业历史中经常在各个部门之间交换，他们可以建立一个相当多的记录，并且它会溢出到好几页上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:51:53.367

一种方法是在`PdfPageEvents`处理每个页面时使用添加页脚。该文档适用于 Java 版本，但您需要覆盖该`onEndPage`方法。

[iTextPDF - PdfPageEvent](http://www.java2s.com/Tutorial/Java/0419__PDF/PdfPageEventHelper.htm)

# plot - Gnuplot 用调色板填充曲线

> ID：13513791
> 
> 赞同：14
> 
> 时间：2012-11-22T13:31:00.727
> 
> 标签：plot, gnuplot, palette

我一直在尝试更改 gnuplot 中填充曲线选项的填充样式，以便填充颜色表示二维图上两条曲线之间的差异。我认为这是“上/下填充曲线”选项的扩展，其中不仅有两种颜色代表上方或下方，还有颜色范围或调色板。

这是我想使用上/下填充曲线样式从数据文件制作的图示例。表示两条曲线之间的 y 差异的颜色条将非常有用。

![http://i.stack.imgur.com/RLlpU.png](../Images/32ce02dac4ceb1f6721be825bc58a2cf.png)

我试图通过在使用命令中添加第四列来做到这一点，即

```
plot 'data.txt' using 1:2:3:($3-$2) with filledcurves fs palette 
```

但`filledcurves`似乎不接受第四列......我也考虑过尝试 rgb 变量，但这似乎也不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-06T12:12:16.407

我正在玩 gnuplot 的补丁以允许使用`linecolor rgb variable`填充曲线。然后可以使用以下 gnuplot 代码：

```
max_color=1
# for a datafile one could extract the maximum diffference with e.g.
# stats 'hotcold.dat' using 1:($3-$2)
# max_color = (abs(STATS_min_y) > abs(STATS_max_y)) ? abs(STATS_min_y) : abs(STATS_max_y)

red(val) = (val < 0 ? abs(1+val/max_color) : 1)
green(val) = (1 - abs(val)/max_color)
blue(val) = red(-val)
rgb(val) = 65536*int(255*red(val)) + 256*int(255*green(val)) + int(255*blue(val))

set yrange[0:1]
set xrange[400:2500]
set samples 200

fhot(x) = 0.1*exp(-((x-400)/200)**2) + 0.8*exp(-((x-2000)/300)**2)
fcold(x) = 0.25*exp(-((x-700)/100)**6)+ 0.4 - (2e-4*(x-2500))**2
plot '+' using 1:(fhot($1)):(fcold($1)):(rgb(fhot($1)-fcold($1))) with filledcurves lc rgb var t '',\
     '' using 1:(fhot($1)) with lines lw 4 lc rgb rgb(max_color) t 'Hot',\
     '' using 1:(fcold($1)) with lines lw 4 lc rgb rgb(-max_color) t 'Cold' 
```

这给出了这个结果： ![在此处输入图像描述](../Images/24d49319003dd604cd2691db7f7a95e3.png)

我还没有提交补丁，因为我不知道我是否正确理解了这个问题，因为我不知道我是否涵盖了所有情况。所以可能需要一些微调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-04T20:10:44.113

尝试使用填充直方图。

```
set style fill solid 1.0
plot \
 datafile u 1:2:3 lt palette w boxes,\
 datafile u 1:2:3 lt palette lw 2 w l 
```

第 3 列根据调色板设置定义颜色填充颜色，第 1 列和第 2 列定义数据点。您还可以使用背景颜色直方图来清除图形下的部分。

我想添加图像，但由于声誉低而无法添加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-25T10:15:39.427

AFAIK，这仍然没有在`gnuplot`. 但是，您可以通过覆盖几条透明填充曲线来解决脏（*）问题。

例如，

```
max_color=1
max_diff=0.5
N_col=6
TRSP="E0"
HOTCOL="FF0000"
COLDCOL="0000FF"
RGBA_HOT="#".TRSP.HOTCOL
RGBA_COLD="#".TRSP.COLDCOL
RGB_HOT="#".HOTCOL
RGB_COLD="#".COLDCOL
#red(val) = (val < 0 ? abs(1+val/max_color) : 1)
#green(val) = (1 - abs(val)/max_color)
#blue(val) = red(-val)
#rgb(val) = 65536*int(255*red(val)) + 256*int(255*green(val)) + int(255*blue(val))
fhot(x) = 0.1*exp(-((x-400)/200)**2) + 0.8*exp(-((x-2000)/300)**2)
fcold(x) = 0.25*exp(-((x-700)/100)**6)+ 0.4 - (2e-4*(x-2500))**2
plot [400:2600] for [thr=0:N_col] '+' using (((fhot($1)-fcold($1))/max_diff*N_col>thr)?$1:1/0):(fhot($1)):(fcold($1)) with filledcurves lc rgb RGBA_HOT title '',\
     for [thr=0:N_col] '+' using ((-(fhot($1)-fcold($1))/max_diff*N_col>thr)?$1:1/0):(fhot($1)):(fcold($1)) with filledcurves lc rgb RGBA_COLD title '',\
     '' using 1:(fhot($1)) with lines lw 4 lc rgb RGB_HOT t 'Hot',\
     '' using 1:(fcold($1)) with lines lw 4 lc rgb RGB_COLD t 'Cold' 
```

调整`N_col`和`TRSP`更改渐变：覆盖的填充曲线的数量和每个曲线的透明度（更多曲线意味着更接近最大透明度`FE`）。

[![在此处输入图像描述](../Images/156f517556bdac397e7f6d45434f2812.png)](https://i.stack.imgur.com/IQiNO.png)

(*) 如果您要绘制的信息是离散变量，例如在给定横坐标处可用的数据集数量，这将不那么脏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-25T06:29:32.570

### 另一个解决方案

如果允许 pm3d 2D 地图没有填充曲线，那么可以使用以下代码来实现这一点

在数据处理部分，`splot`从原始输入数据构建网格数据。填充区域的颜色由为 splot 指定的 z 值确定。

```
set table $first
plot "test.dat" using 1:2:($3-$2) with table
set table $second
plot "test.dat" using 1:3:($3-$2) with table
unset table

set print $data
do for [i=1:|$first|] {
  print $first[i]
  print $second[i]
  print ""
}
set print

set yrange [-2:2]
set palette define (-1 "skyblue", 0 "gray90", 1 "pink")

splot $data using 1:2:3 with pm3d 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-25T13:32:09.697

**另一个尴尬的解决方法：** 而不是`filledcurves`使用粗垂直矢量线。

当您具有示例中的函数或 x 中的等距数据时，这将起作用。如果 x 中没有等距数据，则必须进行插值。不幸的是，gnuplot 没有插值或重采样的功能。您可以使用外部工具执行此操作，也可以使用变得有点冗长的 gnuplot 来完成此操作，请参见此处：[使用 gnuplot 重新采样数据](https://stackoverflow.com/q/54362441/7295599)

为了获得好看的颜色渐变，您必须调整图形/画布大小、采样和/或线宽，以找到消除间隙、悬垂或锯齿的最佳方法。太薄（`lw 1`）和太厚（`lw 8`）都不好。在下面的示例中`lw 3`似乎是一个合理的值。也许还有更多的方法可以进一步优化。

下面的示例使用@Christoph 的代码，稍作修改。

**代码：**

```
max_color=1
# for a datafile one could extract the maximum diffference with e.g.
# stats 'hotcold.dat' using 1:($3-$2)
# max_color = (abs(STATS_min_y) > abs(STATS_max_y)) ? abs(STATS_min_y) : abs(STATS_max_y)

red(val) = (val < 0 ? abs(1+val/max_color) : 1)
green(val) = (1 - abs(val)/max_color)
blue(val) = red(-val)
rgb(val) = 65536*int(255*red(val)) + 256*int(255*green(val)) + int(255*blue(val))

set yrange[0:1]
set xrange[400:2500]
set samples 200

fhot(x) = 0.1*exp(-((x-400)/200)**2) + 0.8*exp(-((x-2000)/300)**2)
fcold(x) = 0.25*exp(-((x-700)/100)**6)+ 0.4 - (2e-4*(x-2500))**2

plot \
     '+' using 1:(fhot($1)):(0):(fcold($1)-fhot($1)):(rgb(fhot($1)-fcold($1))) with vectors nohead lw 3 lc rgb var t '',\
     '' using 1:(fhot($1)) with lines lw 4 lc rgb rgb(max_color) t 'Hot',\
     '' using 1:(fcold($1)) with lines lw 4 lc rgb rgb(-max_color) t 'Cold' 
```

**结果：**（wxt 640x480，lw 1） [![在此处输入图像描述](../Images/f440fec495f42024aab6bdf44fe0346a.png)](https://i.stack.imgur.com/5FrCw.png)

**结果：**（wxt 640x480，lw 3）

[![在此处输入图像描述](../Images/e10a78b9021a768e7d4617e033bed94a.png)](https://i.stack.imgur.com/ftGD6.png)

**结果：**（wxt 640x480，lw 8） [![在此处输入图像描述](../Images/1f3861a50748e39be0052f83e8228cf5.png)](https://i.stack.imgur.com/jDzpe.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-03T14:05:09.030

而不是@luuuucky 建议的填充直方图，您可以使用`boxxyerror`将矩形放置在任何地方并用可变颜色为它们着色。

这是一个简单的示例，其中的数据包含`x,y1,y2`间距`x`一致的三元组。盒子根据以下颜色着色`y2-y1`：

```
set style fill solid
set palette gray

set cbrange [0:1]
set xrange [0:1]
set yrange [0:1]

plot '-' using 1:2:1:($1+0.1):2:3:($3-$2) with boxxyerror lc palette notitle
0.0 0.62 0.82
0.1 0.64 0.94
0.2 0.51 0.91
0.3 0.33 0.83
0.4 0.20 0.63
0.5 0.15 0.43
0.6 0.10 0.23
0.7 0.05 0.13
0.8 0.03 0.10
0.9 0.02 0.05 
```

[![带有 boxxyerror 的伪彩色填充曲线](../Images/85b9495cd0a71f3c472415d402efdc27.png)](https://i.stack.imgur.com/dCqLQ.png) 自然，精细的`x`离散化会导致更平滑的结果。这是一个数值模拟的例子，一个压缩弹簧的两个末端 s1(t) 和 s2(t) 在各向异性环境中随时间机械松弛（颜色 = 机械力） [![在此处输入图像描述](../Images/e64193454f98fdc8b31fb7577e7abf0e.png)](https://i.stack.imgur.com/kBLRV.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-23T16:45:23.013

## （另一种）开发版本 5.5 的新方法

开发版有一个新的机制`masking`。这里我们首先将整个图形的填充区域创建为`image`，然后将所需区域之外的所有内容都隐藏起来，即不可见。遮蔽区域是一个（复杂的）多边形，我们必须分两步构建它：首先，在正常绘图方向上创建上边界作为两个数据集的较大值，然后下边界需要向后创建作为最小值，以便最终创建适当的多边形。出于说明目的，我使用了@Christoph's answer中的函数并将它们转换为一个看起来像 OP 数据文件的数据集：

```
set yrange[0:1]
set xrange[400:2500]
set ur [400:2500]
set vr [0:1]
set samples 1000
set isosamples 1000
fhot(x) = 0.1*exp(-((x-400)/200)**2) + 0.8*exp(-((x-2000)/300)**2)
fcold(x) = 0.25*exp(-((x-700)/100)**6)+ 0.4 - (2e-4*(x-2500))**2

set table $data
plot '+' u 1:(fhot($1)):(fcold($1)) w table
unset table 
```

现在计算上下边界：

```
set table $upper
plot $data u 1:($2>=$3 ? $2 : $3) w table
unset table

# gnuplot has no build-in "backwards" plotting
set table $lower
plot for [i=1:|$data|] $data every ::(|$data|-i)::(|$data|-i) u 1:($2<=$3 ? $2 : $3) w table
unset table

set table $mask
plot $upper w table
plot $lower w table
unset table 
```

我发现一个完全不透明的调色板太多了，因此让我们定义一个新的、半透明的调色板：

```
set palette defined (-1 "blue", 0 "white", 1 "red")
set colormap new MYPALETTE
do for [i=1:|MYPALETTE|] {MYPALETTE[i] = MYPALETTE[i] + (int(0.5*0xff)<<24)}
unset colorbox 
```

现在在实际的绘图命令中，第一个元素是掩蔽数据，它本身不会绘制任何东西，而是为绘图的下一个元素做准备：

```
plot $mask w mask not, '++' u 1:2:(fhot($1)-fcold($1)) mask w image fc palette MYPALETTE not, fhot(x) lc "red" lw 3, fcold(x) lc "blue" lw 3 
```

[![在此处输入图像描述](../Images/de913c6c625db6533ddb62d7d0710c1b.png)](https://i.stack.imgur.com/En3ak.png)

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2013-04-23T08:46:35.130

诀窍是画线，然后在它们之间填充`filledcurves`. 以下是如何做到这一点（基于[gnuplot 的示例](http://www.gnuplot.info/demo/fillbetween.html)）：

```
set style line 2 lc rgb 'forest-green'
set style line 3 lc rgb 'plum'
set style fill pattern 5 lc 'yellow'
set xrange [0:3000]
set yrange [0:1]
plot 'data.txt' u 1:2:3 w filledcurves notitle, \
     '' u 1:2 ls 2 with lines notitle, \
     '' u 1:3 ls 3 with lines notitle 
```

输出如下所示： ![在此处输入图像描述](../Images/9d624bb4bbb43da6a06d9544e7aad387.png)

数据文件包含这些虚拟值（类似于您的第二个图表）：

```
500     0.90    0.90
1000    0.90    0.75
1500    0.92    0.40
2000    0.95    0.30
2500    0.94    0.23 
```

# android - 多语言应用程序中的图像提取问题

> ID：13513792
> 
> 赞同：1
> 
> 时间：2012-11-22T13:31:02.860
> 
> 标签：android, multilingual, screen-resolution, android-4.2-jelly-bean, hdpi

我开发了一个支持两种语言英语（en）和西班牙语（es）的应用程序，以支持多语言我遵循 developer.android 的链接[http://developer.android.com/training/basics/supporting-devices/languages.html](http://developer.android.com/training/basics/supporting-devices/languages.html) 我已将西班牙图像放入可绘制文件夹 drawable-es-rES-hdpi、drawable-es-rES-ldpi、drawable-es-rES-mdpi 和所有与西班牙语相关的文本到 values-es 文件夹中的 strings.xml 中。

当我从应用程序的设置中将语言从英语更改为西班牙语时，它将所有文本从英语更改为西班牙语工作正常但是应用程序没有从西班牙语可绘制文件夹中获取图像（此问题发生在 HDPI 设备和**所有文本中，图像更改是**在三星 Galaxy ACE（分辨率：320 X 480）**等 MDPI 设备上运行良好。**

**我在使用 OS 4.1.2、分辨率 480 X 800 的设备 Google Nexus 上遇到了这个问题。**

有人遇到过这样的问题吗？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:53:21.737

**最后我得到了解决方案。**

我只用语言创建本地对象，直到姜饼它改变了英语 <-> 西班牙语的所有文本和图像，但它不会改变果冻豆上的图像：我的英语和西班牙语的旧本地对象：

**区域设置 locale2 = 新区域设置（appLanguageStr）**

工作本地对象

**Locale locale2 = new Locale(appLanguageStr, countrycode);**

这是对姜饼和果冻豆都适用的最后一种方法：

```
public void updateAppsLanguage(String appLanguageStr) 
{
    Locale locale2 = null;
    if(appLanguageStr.equalsIgnoreCase("English"))
    {
        appLanguageStr = "en";
        locale2 = new Locale(appLanguageStr); 
    }
    else if(appLanguageStr.equalsIgnoreCase("Spanish"))
    {
        appLanguageStr = "es";
        locale2 = new Locale(appLanguageStr, "esp"); 
    }

    Locale.setDefault(locale2);
    Configuration config2 = new Configuration();
    config2.locale = locale2;
    getBaseContext().getResources().updateConfiguration(config2, getBaseContext().getResources().getDisplayMetrics());
    //Refresh the current page 
    finish();
    Intent intent = new Intent(this,AppSetting.class);
    startActivity(intent);
} 
```

# c++ - 来自系统的等待调用中的套接字关闭 - 心跳机制

> ID：13513793
> 
> 赞同：1
> 
> 时间：2012-11-22T13:31:09.337
> 
> 标签：c++, multithreading, sockets, unix, aix

我实现了一个心跳机制，其中应用程序“app1”每 60 秒向看门狗进程“watch1”发送一次脉冲。如果 watch1 在 60 秒后没有从 app1 收到任何消息，则假定 app1 已死并重新启动它。但实际上它是活的。这种通信通过 TCP/IP 套接字和在同一台机器上运行的应用程序发生。watch1 进程侦听端口 3000 以从 app1 读取数据包。这些应用程序在多个操作系统 UNIX、AIX 等上运行。

但是对于特定的 AIX 机器，“app1”的套接字正在关闭，并且 watch1 进程一次又一次地重新启动 app1。它的多线程应用程序 app1 创建一个线程以将消息/数据包发送到 watch1。

我放置了一个脚本，它每 60 秒在 app1 PID 上运行“procstack”以查看发生了什么。这并没有提供我希望的任何指针（比如被卡在锁上），而是开始显示一些“奇怪”的堆栈模式：

```
 ---------- tid# 21692655 (pthread ID:   3342) ----------
 0xd4be4754  SocketBase::close()(0x0) + 0x34 
 0xd0503ca4  _event_wait(??, ??) + 0x2c4
 0xd0511e78  _cond_wait_local(??, ??, ??) + 0x378
 0xd05125d0  _cond_wait(??, ??, ??) + 0xb0
 0xd0512f1c  pthread_cond_timedwait(??, ??, ??) + 0x21c
 0xd4a2cbd8  TaskEvent::Wait(int)(0x32ebc03c, 0x7530) + 0xd8
 0xd4e40b70  SendIAmAliveThreadFunc(void*)(0x32ebc038) + 0xf50
 0xd3dfcdc4  ThreadStartRoutine(void*)(0x32ebbba8) + 0xc4
 0xd04f0c4c  _pthread_body(??) + 0xec 
```

内核服务 _event_wait() 将调用我们的代码（用于套接字处理的包装类）SocketBase::close() 是没有意义的。可能是一些奇怪的异常；可能需要一些 AIX 专业知识来帮助诊断。

有人知道这个问题或对此有指导吗？

****** *** ** *** *** EDIT1 - 23-11-12 ***** *******

 **app1 进程以信号 15 终止。

日志：在线程 515 上收到信号 15 线程 515 未处理信号 15 由于信号 15kill 导致异常终止：7143518：没有此类进程启动命令失败。杀死：7405740：没有这样的过程

警告：核心文件不是完整核心。某些信息可能不可用。**

# jsf - 限制用户在注销后返回不起作用

> ID：13513795
> 
> 赞同：1
> 
> 时间：2012-11-22T13:31:11.177
> 
> 标签：jsf, jsf-2, httpresponse, logout, restriction

我已经使用 JSF 2.0 创建了 web 应用程序，我想限制用户在注销后返回。

对于解决方案，我查看了[Great BalusC 的答案](https://stackoverflow.com/questions/4194207/prevent-user-from-going-back-to-the-previous-secured-page-after-logout)并尝试了其他方法，但它不起作用。

我尝试如下。

```
<h:commandLink value="logout" action="#{bean.makeMeLogut()}" /> 
```

在豆里我有

```
public void makeMeLogut() {
    try {
        // get response from JSF itself instead of coming from filter.
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("isLoggedIn", "false");
        FacesContext.getCurrentInstance().getExternalContext().invalidateSession();
        HttpServletResponse hsr = (HttpServletResponse) FacesContext.getCurrentInstance().getExternalContext().getResponse();
        hsr.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
        hsr.setHeader("Pragma", "no-cache"); // HTTP 1.0.
        hsr.setDateHeader("Expires", 0); // Proxies.
        FacesContext.getCurrentInstance().getExternalContext().redirect("index.xhtml");
    } catch (IOException ex) {
        System.out.println("can't logut...");
    }
} 
```

根据 BalusC 的回答，我需要创建过滤器，但是我想使用 JSF 响应并在其中设置标题。但是它不起作用。

**知道我哪里出错了吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:38:21.163

您没有在受限页面本身的响应中设置这些标头，而只是在注销操作的响应中设置这些标头。所以限制页面本身还在浏览器缓存中，只是注销动作不在浏览器缓存中。但是，后退按钮不会转到注销操作，而是转到受限制的页面（因此仍然从浏览器缓存中提供）。

您确实需要对这些受限页面的所有请求进行过滤，正如您找到的答案中所述。

### 也可以看看：

*   [避免 JSF Web 应用程序上的后退按钮](https://stackoverflow.com/questions/10305718/avoid-back-button-on-jsfprimefaces-application)
*   [javax.faces.application.ViewExpiredException：无法恢复视图](https://stackoverflow.com/questions/3642919/javax-faces-application-viewexpiredexception-view-could-not-be-restored)

* * *

**与具体问题无关**，在失效之前操作会话映射是没有意义的。会话失效将隐含地清除整个映射（因为它基本上是指会话的属性）。只需删除您在其中操纵会话映射的行。

此外，仅执行标准输出的捕获`IOException`率也非常差。删除整个`try-catch`并添加`throws IOException`到方法中。容器将使用错误页面处理它。

# git - 为什么没有 git commit -A -m？它一定是故意省略的，但为什么呢？

> ID：13513796
> 
> 赞同：2
> 
> 时间：2012-11-22T13:31:12.190
> 
> 标签：git, stage

所以我可以组合`git add -a`和`git commit -m "Add whatever"`使用`git commit -a -m "Add whatever"`，但这只会暂存跟踪的文件。为什么 git 不提供`git commit -A -m "Add whatever"`这样我也可以暂存未跟踪的文件。这似乎是一个明显的捷径，所以我想知道为什么它被省略了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:46:27.730

随意在 git 邮件列表中提出建议，或者更好地发送补丁。请注意，尽管许多 Git 人不鼓励使用`-a`for add 和 commit，因为您完全无法控制实际添加的内容。

话虽这么说，您还可以创建一个兼具两者的别名：

```
git config --global alias.commitall "!git add -A && git commit -m $0" 
```

然后你可以输入`git commitall "Add whatever"`，它会添加并提交所有内容。

# python - Python 错误：“应为缩进块”

> ID：13513798
> 
> 赞同：-2
> 
> 时间：2012-11-22T13:31:16.320
> 
> 标签：python, syntax-error

我有“通常”的预期缩进块。所有的缩进都是对的。我已经在各种编辑器中打开了我的脚本，并且没有任何问题 abt misalignments 或由制表符引起的隐藏空格。

如果有人能对这个问题有所了解，我将不胜感激。

## 这是导致问题的脚本部分：

```
def findCSVs():
'''
looks into a 'tocom_data' subdirectory, finds 'tocomxxx.csv' files,
retuns a sorted list of filenames that conform: begins with TOCOM, ends in .csv
'''
    csvlist = []
    datadir=os.path.join('.','tocom_data')
    flist = os.listdir(datadir)
    for fname in flist:
        fsplit = fname.split('.')
        if len(fsplit)>1:
            if fsplit[1]=="csv" and fname[0:5]=="TOCOM":
                completeFname= os.path.join(datadir,fname)
                csvlist.append(completeFname)
                csvlist.sort()
    return csvlist 
```

* * *

Python 期望在该行有一个缩进块`if len(fsplit)>1:`

非常感激

何塞

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T13:33:51.897

问题在于函数开头的文档字符串。它也应该缩进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:36:26.780

缩进文档字符串的第一行。

只是改变：

```
def findCSVs():
'''
looks into a 'tocom_data' subdirectory, finds 'tocomxxx.csv' files,
retuns a sorted list of filenames that conform: begins with TOCOM, ends in .csv
''' 
```

至：

```
def findCSVs():
    '''
looks into a 'tocom_data' subdirectory, finds 'tocomxxx.csv' files,
retuns a sorted list of filenames that conform: begins with TOCOM, ends in .csv
''' 
```

它应该可以正常工作。

# wpf - WPF 设计视图崩溃

> ID：13513800
> 
> 赞同：1
> 
> 时间：2012-11-22T13:31:25.247
> 
> 标签：wpf

我使用 VS2010 专业版 (sp1) 并且操作系统是 Windows 7

我创建了 WPF 项目，它的目标框架是 Framework 4 - 不是 Framework 4 客户端。

那是因为我还需要水晶报告，另一方面需要以下设置：

**问题**是当我尝试处理页面/窗口时设计视图崩溃。单击链接*“单击此处重新加载设计器”* 视图正常化，但是 - 当然，如果我做某事，它会再次崩溃。

错误信息（部分）：

> **“System.Reflection.TargetInvocationException 异常已由调用的目标引发。在 System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo 方法, Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner) at System.RuntimeMethodHandle System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] 参数, CultureInfo 文化, Boolean skipVisibilityChecks) 在 System.Delegate.DynamicInvokeImpl(Object[] args) 在 System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate 回调，对象 args，Int32 numArgs) 在 MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
> 
> System.Reflection.Adds.UnresolvedAssemblyException 类型 Universe 无法解析程序集：Microsoft.VisualStudio.Shell，Version=2.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a。"**

如果我将目标框架更改为框架 4 客户端，页面/窗口的处理工作正常 - 除了水晶报表。

是否可以在 WPF 4 项目中使用水晶报表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-26T02:07:28.847

它告诉你出了什么问题。它无法加载 Microsoft.VisualStudio.Shell v2.0 程序集。这与 CrystalReports 没有任何关系。

# awk - wget 在使用双向 I/O 在 AWK 中调用它时出错

> ID：13513802
> 
> 赞同：1
> 
> 时间：2012-11-22T13:31:34.513
> 
> 标签：awk, pipe, wget

我需要在k 脚本中获取`wget`调用的输出。`aw`但是，由于某种原因，`wget`当我使用[双向 I/O](https://stackoverflow.com/questions/1960895/awk-assigning-system-commands-output-to-variable)时调用失败。

我的尝试是（以 MWE 形式）：

使用循环捕获多行：

```
echo http://www.del-rio.net/images/festival/medium/2000_0516_Ellen_Burstyn_1274-1-4.jpg | awk '{
  cmd = "wget -t 1 $0";
  while ( (cmd | getline line) > 0 ){
    result = result " " line;
  }     
  print result;
  close (cmd);
 }' 
```

并使用单行。这个我尝试过使用和不使用非详细选项，因为带有`-nv`选项的 wget 调用仅返回一行。

```
 echo http://www.del-rio.net/images/festival/medium/2000_0516_Ellen_Burstyn_1274-1-4.jpg | gawk '{
  "wget -t 1 -nv $0" | getline line;   
  print line;
}' 
```

但是，在这两种情况下，它都会停止并给出消息：

```
--22:09:09--  http://sh/
          => `index.html' 
Resolving sh... failed: Host not found. 
```

难道我做错了什么？还是`wget`在这种管道模式下不起作用？在那种情况下，如何在`awk`脚本内的变量中获取调用结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:30:16.563

将 $0 移到引号之外，即这样做：

```
"wget... " $0 
```

而不是这个：

```
"wget... $0" 
```

不相关但：摆脱所有那些使您的脚本混乱的空语句（尾随分号）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T02:22:31.383

主要问题是`wget`输出被重定向到标准输出而不是标准输出。因此，`getline`将永远不会捕获它（据我所知）。

所以我的解决方案是将日志输出重定向到标准输出，然后处理该行。

正如[Ed Morton](https://stackoverflow.com/a/13515877/424986)所指出的，主机未解决的问题是`$0`引号内的变量。

因此，将所有内容放在一起它就像这样

```
echo http://www.absolutely.net/wenn/handy_manny_05_wenn5360250.jpg  | awk '{
  cmd = "wget -t 1 " $0 " 2>&1"
  while ( (cmd | getline line) > 0 ){
    result = result " " line
  }
  close(cmd)
  print "the result: " result
}' 
```

# javascript - 强制重新缓存 .js 文件或最好是一个文件

> ID：13513808
> 
> 赞同：2
> 
> 时间：2012-11-22T13:32:05.997
> 
> 标签：javascript, .htaccess, caching

我有一个无法重命名的 js 文件，因为它被在浏览器中添加书签的用户使用。js 文件是从书签中调用的。

我使用 htaccess 文件中的缓存控制缓存我网站上的所有 js 文件。

因此，如果我对有问题的 js 文件进行更改，我可以以某种方式强制用户机器重新缓存该文件吗？

我可以在 htaccess 或类似的东西中做些什么吗？

这对我来说是新的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:46:42.427

`Cache-Control: max-age=86400`如果您经常更新文件，我会设置 a而不是到期日期。

但是，如果您要进行计划的每周部署，您可以设置一个`Expires:`指向当前周末时间的标头，以便它在您计划的部署之前到期，从而使浏览器下载文件的新版本在那个时间点之后的所有请求。

另一种解决方案是开始使用版本号命名文件或将查询字符串附加到您的书签 JS URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:52:08.410

在您的书签代码中，您可以在包含该 JS 文件时附加例如当前日期，

```
http://example.com/included.js?d=2012-11-22 
```

然后在您的 .htaccess 中将其重新路由到具有重写规则的任何内容。因此，您每天都有机会推送更改，而不会受到太多缓存的影响。可能已经足够好了。

# javascript - javascript获取函数参数名称/值

> ID：13513809
> 
> 赞同：0
> 
> 时间：2012-11-22T13:32:07.460
> 
> 标签：javascript, ajax

在函数内部时，我可以获得它的参数名称/值吗？

我希望将它们转换为我可以 JSON.stringify() 的对象，以便我可以将其作为数据传递给 ajax 调用。

[编辑] 感谢其他人为我指明了正确的方向，我有一个解决方案可以动态创建与 webmethod 匹配的参数以及与 webmethod 匹配的客户端存根。我认为，这有助于使事情更具可读性。

[EDIT2] 更进一步。现在 javascript 中的函数名称必须与 webmethod 的名称匹配，现在您将 webmethod 所在的页面作为第一个参数传递给它。它动态地获取客户端 javascript 函数名称，这就是它现在正在寻找的 webmethod 的名称。

以下是您在代码中某处创建的常用方法：

```
 function WebMethodCall(args) {
        // in your stubs call this to get argname/value pairings in JSON form
        var params = JSONArgs(args);
        var fun = GetFunctionName(args);

        // make a call to the webmethod via ajax using json
        AjaxPostJSON(args[0] + "/" + fun, params, args);
    }

function JSONArgs(args) {
        var tmp = args.callee.toString().match(/\(.*?\)/)[0];
        var argumentNames = tmp.replace(/[()\s]/g, '').split(',');

        var param = new Object();
        for (var i = 0; i < argumentNames.length; i++) {
            param[argumentNames[i]] = args[i];
        }

        return JSON.stringify(param);
    }

    function GetFunctionName(args) {
        var fName = args.callee.toString().match(/function ([^\(]+)/)[1]

        return fName;
    }

    function AjaxPostJSON(url, data, args) {
        var objGetData = new Object();
        var fun = GetFunctionName(args);
        var s = "On" + fun + "Success";
        var f = "On" + fun + "Failure";

        objGetData.url = url;
        objGetData.type = "POST";
        objGetData.data = data;
        objGetData.contentType = "application/json; charset=utf-8";
        objGetData.dataType = "json";
        objGetData.success = window[s];
        objGetData.error = window[f];

        $.ajax(objGetData);
    } 
```

参数名称应与 webmethod 参数名称匹配的存根。函数名也必须与 webmethod 函数名匹配。请注意，page 必须是第一个参数，但不应出现在您的 web 方法中。它在这里只是用来使调用正确： // function stub function GetData(page, id, name) { WebMethodCall(arguments); }

注意“On” + func_name + “Success”/“Failure”的成功和失败名称模式。用法：

```
 function Button2_onclick() {
        // call client side stub that matches the webmethod
        GetData("Default.aspx", 8, "Bob");
    }

    // automatically registers these as success/error
    function OnGetDataSuccess(data) {
        alert(data.d);
    }

    function OnGetDataFailure(data) {
        alert("failure");
    } 
```

我认为，这样做的好处是，当我更改/添加参数到我的 webmethod 时，很容易获取客户端 javascript 方法并更改参数名称以匹配 webmethod，仅此而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:37:52.900

您可以使用`arguments`对象获取值。名称有点棘手，您必须解析函数的字符串表示形式。

我更喜欢直接将对象传递给函数：`myFunction({name: value})`并将该对象直接传递给`JSON.stringify`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:38:06.910

如果我理解你，你想获得变量的“名称”作为“值”，如果是这样，不，你不能，变量名称只是一个符号，可以帮助你作为程序员区分它们，但是您无法获取“元数据”信息，这就是为什么我们现在更喜欢使用 json 来提供更有意义的对象作为数据传输对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T13:45:18.210

这有帮助吗？：

```
function test (name, pass){
    var params = (test.toString().substring(test.toString().indexOf('(')+ 1, test.toString().indexOf(')'))).replace(/ /g, '').split(',');
    var obj = new Object();
    var js = "";
for(var i=0;i<arguments.length;i++){
        js += 'obj.'+ params[i]+' = "'+ arguments[i]+'";';
    }
     eval(js);
     JSON.stringify(obj);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T13:35:22.303

是的，你可以......但这真的是一件简单的事情，谷歌会有所帮助

```
function myFunction(name,job) {
 alert("Welcome " + name + ", the " + job);
} 
```

# javascript - raphaeljs 歌剧中的鼠标事件错误？

> ID：13513815
> 
> 赞同：0
> 
> 时间：2012-11-22T13:32:48.780
> 
> 标签：javascript, svg, raphael

我有非常简单的 svg：只有一个需要在悬停时进行动画处理的矩形。

这是我现在拥有的：

```
var paper = Raphael('paper', 50, 50);

var rect = paper.rect(0, 0, 20, 20).attr({
    'width': 20,
    'height': 20,
    'fill': "red",
    'stroke-width': 0,
}).data('x', 'y');

rect.mouseover(function() {
    this.toFront();
    this.animate({
        'transform': 's2'
    }, 70);
}).mouseout(function() {
   this.animate({
      'transform': 's1'
   }, 50);
});​ 
```

看看实际操作[http://jsfiddle.net/HPmqN/](http://jsfiddle.net/HPmqN/)

这是问题所在：该代码在 Opera（我相信 IE）中无法正常工作，似乎 mouseout 事件只是没有触发。这是 Raphael、Opera 或我的代码中的某种错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:39:19.110

您需要在 mouseover() 和 mouseout() 函数中的每个 .animate() 调用中添加一个 .stop() ，因为它们在动画期间会互相干扰

```
rect.mouseover(function() {
    this.toFront();
    this.stop().animate({
        'transform': 's2'
    }, 70);
}).mouseout(function() {
   this.stop().animate({
      'transform': 's1'
   }, 50);
});​ 
```

同样为了它，我会尝试同时制作出动画和过度动画。只为观赏乐趣。但这只是我。

**编辑：** 显然`this.toFront()`是导致 Opera 失去对 DOM 元素的跟踪。正如您所说，您需要 toFront() 您可以通过使用 $.css() 来交换它以达到相同的效果（可能）

```
$(this).css('zIndex', 9999); 
```

# mysql - 获取组内的计数和百分比

> ID：13513817
> 
> 赞同：1
> 
> 时间：2012-11-22T13:32:48.640
> 
> 标签：mysql, sql

我有一个包含问题编号和响应数据的数据表。

我需要能够获得每个问题的每个选项的响应计数，以及代表的百分比。

例如数据可能看起来像

```
questionNum   ResponseNum
1             1
1             2
1             2
1             2
1             3
2             1
2             1
2             2 
```

....然后这应该给出查询的结果

```
questionNum     responseNum   count   percent
1               1             1       20
1               2             3       60
1               3             1       20
2               1             2       66
2               2             1       33 
```

我可以进行查询以获取每个响应的计数，但看不到获取百分比的方法。

有人可以帮忙吗？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T13:38:02.380

```
SELECT a.questionNum, a.responseNum,
        COUNT(*) `count`,
        (COUNT(*) / b.totalCOunt) * 100 Percentage
FROM   table1 a
       INNER JOIN 
        (
          SELECT questionNum, COUNT(*) totalCOunt
          FROM table1
          GROUP BY questionNum
        ) b ON a.questionNUm = b.questionNum
GROUP BY questionNum, responseNum 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/db2ec/7)

您还可以添加附加功能[**FLOOR**](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_floor)

```
SELECT a.questionNum, a.responseNum,
        COUNT(*) `count`,
        FLOOR((COUNT(*) / b.totalCOunt) * 100) Percentage
FROM   table1 a
       INNER JOIN 
        (
          SELECT questionNum, COUNT(*) totalCOunt
          FROM table1
          GROUP BY questionNum
        ) b ON a.questionNUm = b.questionNum
GROUP BY questionNum, responseNum 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/db2ec/8)

# javascript - 我正在制作一个循环的连续图像滑块，但我无法让它很好地过渡

> ID：13513821
> 
> 赞同：0
> 
> 时间：2012-11-22T13:33:22.457
> 
> 标签：javascript, jquery, html, css, image

到目前为止，这是我的代码。我有几个问题。

1）如何使过渡更平滑？我永远无法让所有图片正确对齐，所以有没有办法让图像跳到右边图像的左边（因为它是向左滚动的），这样就没有空白了？

2）我想在到达区域标签上弹出一个弹出窗口（当您将鼠标悬停在图片的不同部分时，它会停止滚动条，并在该特定区域上放置一个具有不同颜色的弹出窗口）。做这个的最好方式是什么？

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
        <script type="text/javascript">
            // when the DOM/elements load, start
            var readyStateCheckInterval = setInterval(function() {
                if (document.readyState === "complete") {
                    init();
                    clearInterval(readyStateCheckInterval);
                }
            }, 10)
            paused = false;
        function init() {
            setInterval(wells_fancy_slider, 50);
            $('area').hover(function() {
                console.log(this);
                paused = true;
            }, function() {
                paused = false;
            })
        }

        function wells_fancy_slider() {
            if (!paused) {
                if (parseInt($('#pic1').css('left')) < -2800) {
                    $('#pic1').css('left', '5596');
                }
                if (parseInt($('#pic2').css('left')) < -2800) {
                    $('#pic2').css('left', '5596');
                }
                if (parseInt($('#pic3').css('left')) < -2800) {
                    $('#pic3').css('left', '5596');
                }
                $('#pic1, #pic2, #pic3').css('left', '-=15');
            }
        }

    </script>
    <style>
        body{
            min-width: 960px;
            background-color:blue;
        }
        #container{
            overflow: hidden;
            /*width: 6000px;*/
            height: 500px;
            position: relative;
            text-align: center;
            margin-top:-8px;
        }
        #pic1{
            position:absolute;
            left:570px;
        }
        #pic2{
            position:absolute;
            left:3315px;
        }
        #pic3{
            position:absolute;
            left: 6110px;
        }
    </style>
</head>
<body>
    <div style="position:absolute; width: 20%; z-index: 1000; float: left; height: 450px; left:0px; background-color:black;"></div>
    <div style="position:absolute; width: 20%; z-index: 1000; float: right; height: 450px; right:0px; background-color:black;"></div>

    <div id="container">
        <div style="text-align:center; width:2798px; margin-left:auto; margin-right:auto;">
            <img id="pic1" src="LMDay.jpg" usemap="img_map" border="0" width="2798" height="450" alt="" />
            <img id="pic2" src="LMDay.jpg" usemap="img_map" border="0" width="2798" height="450" alt="" />
            <img id="pic3" src="LMDay.jpg" usemap="img_map" border="0" width="2798" height="450" alt="" />

            <map id="img_map" name="img_map">
                <area shape="rect" coords="3,69,413,445" href="http://www.image-maps.com/" alt="1" title="1"    />
                <area shape="rect" coords="413,73,692,443" href="http://www.wellsjohnston.com/" alt="2" title="2"    />
                <area shape="rect" coords="692,91,919,440" href="http://www.image-maps.com/" alt="3" title="3"    />
                <area shape="rect" coords="917,102,1135,440" href="http://www.wellsjohnston.com/" alt="4" title="4"    />
                <area shape="rect" coords="1134,103,1363,441" href="http://www.image-maps.com/" alt="5" title="5"    />
                <area shape="rect" coords="1360,107,1591,438" href="http://www.wellsjohnston.com/" alt="6" title="6"    />
                <area shape="rect" coords="1589,96,1872,438" href="http://www.image-maps.com/" alt="7" title="7"    />
                <area shape="rect" coords="1871,100,2072,439" href="http://www.wellsjohnston.com/" alt="8" title="8"    />
                <area shape="rect" coords="2072,116,2272,436" href="http://www.image-maps.com/" alt="9" title="9"    />
                <area shape="rect" coords="2270,70,2597,433" href="http://www.wellsjohnston.com/" alt="10" title="10"    />
                <area shape="rect" coords="2595,78,2784,430" href="http://www.image-maps.com/" alt="11" title="11"    />
            </map>
        </div>
    </div>
    <div style="background-color:red; width:100px; height:100px; margin-top:2000px;">
        ay
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:41:19.127

您应该制作一个包含所有图像的元素并移动它，而不是移动每个单独的图像。

我通常用图像滑块做这样的事情：

* * *

主滑块：

*   设置大小
*   溢出：隐藏
*   相对定位

图像容器：

*   999999px 宽度（这样 float:left 将起作用）
*   绝对定位

图片：

*   与主滑块大小相同
*   向左飘浮

* * *

如果仅移动图像容器的`left`属性，您将节省一些绘制周期并编写更少的代码，并且不会出现任何空白故障。

此外，如果可以选择，您应该使用 CSS3 过渡。较旧的浏览器只会看到图像跳到下一张幻灯片，但现代浏览器将获得目前在网络上可能实现的平滑过渡。另外，您不需要使用 Javascript 进行演示，无论如何我们都不应该这样做。

# blackberry - 如何为黑莓应用程序创建 Jar 文件以进行分发

> ID：13513823
> 
> 赞同：0
> 
> 时间：2012-11-22T13:33:33.017
> 
> 标签：blackberry, java-me

我有一个完整的黑莓项目，我如何创建一个可安装的 jar 文件或 jad 文件，无论它在黑莓上以何种方式完成？我对此很陌生，有人可以指导我吗？

我尝试从项目中的可交付成果文件夹中导出 jar 文件，但是当我尝试在设备上安装它时，它说“缺少 Midlet-name 属性”..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:42:47.417

您可以使用 .cod 文件而不是 jar，您可以在项目路径下的“可交付成果”文件中找到它。您可以使用 Java Loader 在您的设备中部署应用程序“.cod”。有关更多信息，您可以阅读此 [http://supportforums.blackberry.com/t5/Testing-and-Deployment/How-to-Deploy-and-Distribute-Applications/ta-p/442794](http://supportforums.blackberry.com/t5/Testing-and-Deployment/How-to-Deploy-and-Distribute-Applications/ta-p/442794)

# java - 在多个 Jetty 服务器之间共享连接池

> ID：13513834
> 
> 赞同：0
> 
> 时间：2012-11-22T13:34:02.830
> 
> 标签：java, jetty, share, connection-pooling

我知道我的问题很不寻常，但我真的需要这样做。

我有多个网站和服务。每个站点或服务都从它自己的 Jetty 服务器开始。它对我非常有用，我不想拒绝这种架构。每个应用程序都有 3 个用于 3 个数据库的池化数据源 (c3p0 ComboPooledDataSource)。而且...至少有 120 个打开的连接到我的 PGSQL 服务器。并且最多 3000 =)

有没有办法在我的应用程序或 Jetty 服务器之间共享连接池？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T03:26:24.950

答案是朋友给我的建议。这很简单=）

我应该使用[PgBouncer](http://wiki.postgresql.org/wiki/PgBouncer#Project_Overview)。

# c# - IronPython 用 c# 编写的类中的类“不可调用”

> ID：13513835
> 
> 赞同：1
> 
> 时间：2012-11-22T13:34:03.767
> 
> 标签：c#, .net, object, ironpython

我正在使用用 c# 编写的 .NET 库。目前我正在 IronPython 中运行一个过程来调用一个过程来创建一个像这样的对象：

```
foo = bar.ProcessAndCreateFoo() # bar is a Bar object 
```

日志显示该`ProcessAndCreateFoo()`方法在创建 Foo 对象时失败；IronPython 控制台显示消息“'FooExtended' 不可调用”。两个类`Foo`和`FooExtended`，后者是前者的子类，都在类内部定义，`Bar`如下所示：

```
namespace ns.pc
{
    public class Bar
    {
        public class Foo
        {
            public Foo (Object o) 
            {
            }
        }

        public class FooExtended : Foo
        {
            public FooExtended (Object o) 
            {
            }
        }

        public Foo ProcessAndCreateFoo()
        {
            // ...
            Foo foo = new FooExtended(o);
            return foo;
        }
    }
} 
```

从 c#调用该`ProcessAndCreateFoo()`方法不会引发任何错误，仅从 IronPython 调用。如何让 IronPython 代码执行该函数？如果有的话，需要对图书馆进行哪些更正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:43:09.173

尝试将每个类移动到自己的外部级别...只要在同一个命名空间中，并且您已经将它们公开，您仍然可以创建它们...例如

```
namespace ns.pc
{
    public class Bar
    {
        public Foo ProcessAndCreateFoo()
        {
            // ...
            Foo foo = new FooExtended(o);
            return foo;
        }
    }

    public class Foo
    {
        public Foo (Object o) 
        {}
    }

    public class FooExtended : Foo
    {
        public FooExtended (Object o) 
        {}
    }
} 
```

现在，我已经将原始的 Foo 和 FooExtended 分开，因为它完全合法地从基线真正将一个类扩展到另一个具有更多选项/功能等。但是，您可能真正的意思是重载 Richnau 提供的 foo 对象的创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:44:19.727

尝试在 Foo 中添加无参数构造函数。

```
public class Foo
{
    public Foo (Object o) 
    {
    }

    protected Foo()
    {

    }
} 
```

# php - 用于选择数组对象的变量。（变量中的变量）

> ID：13513836
> 
> 赞同：-1
> 
> 时间：2012-11-22T13:34:05.943
> 
> 标签：php, sql, ajax

我正在尝试使用 PHP 来遍历搜索词并将它们附加到 SQL 字符串中，然后再进行搜索。但是，由于此代码，该页面无法正常工作：

```
 $sql .= "
    WHERE Title
    LIKE '%$ss[$i]%'"; 
```

可以在此处查看此代码的完整上下文：

```
if(isset($_POST['ss'])){
    $ss = $_POST['ss'];
    $ss = explode(' ',$ss);
    $num_search_terms = count($ss);
    $sql = "
    SELECT * 
    FROM CRDRecord";
    $i = 0;
    while($i <= $num_search_terms){
        $ssf=
        $sql .= "
        WHERE Title
        LIKE '%$ss[$i]%'";
        $i++;
    }
    $params = array();
    $options =  array( "Scrollable" => SQLSRV_CURSOR_KEYSET );
    $stmt = sqlsrv_query( $conn, $sql , $params, $options );
    $row_count = sqlsrv_num_rows( $stmt );
    if ($row_count === false){
       echo "Error in retrieving row count.";
    }
    else {
    $jsonData = '{ "num":"Number of records-'.$row_count.',<br><br> search terms being used- <br>search 1- '.$ss[0].'<br>search2- '.$ss[1].'<BR>Number of search terms detected- '.$num_search_terms.'<br>SQL STRING: '.$sql.'" }';
       echo $jsonData;
    }
} 
```

我知道我想要做什么，但不知道如何表达。很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:32:55.470

您需要将 WHERE 移出 LOOP 并添加默认条件来处理连接

```
$sql = "
SELECT * 
FROM CRDRecord WHERE 1=1 ";
$i = 0;
while($i <= $num_search_terms){
    $ssf=
    $sql .= "
    AND Title LIKE '%$ss[$i]%'";
    $i++;
} 
```

这样做会导致过多的 WHERE 语句，您只能使用一个。WHERE 1=1 是一种允许您在开始附加其他条件之前在 WHERE 子句中拥有单个条件的方法。

# c# - 在 C# 中存储设置的设计模式

> ID：13513838
> 
> 赞同：5
> 
> 时间：2012-11-22T13:34:14.690
> 
> 标签：c#, design-patterns

我有以下与自定义设备接口的应用程序。该应用程序用于对设备进行编程。

我的应用程序可以从设备读取设置，并将设置编程到设备。这意味着，有两组设置；当前在设备中的一组设置，以及用户通过应用程序输入的一组设置。

有不同的设备类型，都有一些共同的设置和一些设备特定的设置。

我在考虑两个课程，都有完整的设置。两者都使用单例，因此我可以轻松访问整个项目的所有设置。但这感觉不对，关于这种情况的任何提示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:46:59.637

不是设计模式，但我可能会这样做：

```
// represents a device with it's settings
public class Device
{
   public string Type { get; set;}

   public List<Setting> Settings { get; set; }
}

// represents a setting, agnostic of which device it applies to
public class Setting
{
   public string Setting { get; set; }

   public string Value { get; set; }
}

// represents mapping which devices has which settings
public class DeviceSettings
{
   public List<string> ApplicableDevices { get; set; }

   public List<Settings> ApplicableSettings { get; set; }
} 
```

不要专注于使用的集合类型。我想你会有更多的属性。

使用此设计，您可以在运行时定义设置并将它们分配给特定设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T07:24:11.980

我可能会这样做（我的 C# 有点生疏，所以不要指望语法是正确的）：

```
class Settings
{
  Settings parent = null;
  Map<String, String> settings;
  String getSetting(String setting)
  {
    if (settings.contains(setting))
      return settings.get(setting);
    else if (parent != null)
      return parent.getSetting(setting);
    else return null;
  }
} 
```

那么通用设置是每个设备的父级，通用设置没有父级。

如何访问/创建这些类将取决于项目的结构。一个包含一组这些类的单例（可能在地图 ( `Map<String, Setting>`) 中）是一个想法。

以这种方式做事的好处是，子设置也可以选择性地覆盖其父设置的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:42:20.530

看看[命令模式](http://en.wikipedia.org/wiki/Command_pattern)。您可以将设置封装在配置对象中，并将其用作控制器类的输入。使用适当的参数配置控制器类后，您可以调用其`execute`处理数据的方法。

您还可以将其与[状态模式](http://en.wikipedia.org/wiki/State_pattern)或[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)结合以切换处理算法（例如，在一种状态下，处理可能包括将数据发送到设备，而在另一种状态下则从设备接收数据）。

# php - 正在修改重复数组中的 PHP 对象

> ID：13513839
> 
> 赞同：1
> 
> 时间：2012-11-22T13:34:19.353
> 
> 标签：php, arrays

我有一个多维数组，其中一些元素是对象。我想最终得到 2 个数组，一个具有通过我的 esc() 函数传递的所有字符串值和对象属性，另一个是未修改的原始数组。

给定以下代码：

```
$raw = $data;
echo $raw['obj']->description; // Prints '< >Test Desc'

array_walk_recursive($data, function (&$item, $key){
   if(is_string($item)) {
      $item = esc($item);
   } elseif(is_object($item)) {
      foreach ($item as $property => $value)  {
          if(is_string($value)) {
              $item->$property = esc($value);
          }
      }
   }
});

echo $data['obj']->description; // Prints '&lt; &gt;Test Desc' - Correct
echo $raw['obj']->description; // Prints '&lt; &gt;Test Desc' - Incorrect 
```

我希望 $raw 完全未修改，并且 $data 已通过 esc() 处理。对象属性除外。由于某种原因，$raw 中的对象也被修改了，所以这两`echo`行打印了不同的值，这是为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:37:57.590

因为 PHP 5 对象总是通过引用传递。

您必须“克隆”对象才能真正复制它们。

有关详细信息，请参阅[http://php.net/manual/en/language.oop5.references.php](http://php.net/manual/en/language.oop5.references.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:39:57.083

对象在 PHP 中通过引用传递。这意味着如果您将一个对象分配`$a`给一个变量`$b`，两者`$a`和`$b`都将指向同一个对象。[这在对象和参考](http://php.net/manual/en/language.oop5.references.php)手册页中有更详细的解释。

您可以使用[`clone`](http://php.net/manual/en/language.oop5.cloning.php)运算符真正克隆对象：

```
$b = clone $a; 
```

但是，这仅适用于对象，因此您必须递归地制作`clone`用于对象的数组的副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T13:43:03.513

PHP 的底层传递对象-by-reference 在这里起作用。

简而言之，PHP 自然地通过引用传递对象，这包括数组成员。如果您想要证明这一点，请尝试以下脚本：

```
<?php $arr = array(new stdClass()); var_dump($arr[0]); $arr2 = $arr; var_dump($arr[0]); ?> 
```

输出将`object(stdClass)[1]`在这两种情况下。

有几个解决方案供您使用。例如，您可以`clone`对对象使用运算符。如果你知道数组的结构，这很简单。如果你不这样做，你会有一个问题，因为 PHP 不能`clone`数组（因此，你需要递归地遍历它）。所有其他解决方案都包括在编辑之前复制您的对象数据。

# eclipse - 如何在 Eclipse 中为 ssh 隧道设置 localport

> ID：13513842
> 
> 赞同：2
> 
> 时间：2012-11-22T13:34:39.053
> 
> 标签：eclipse, ssh, tunneling, ssh-tunnel, eclipse-rse

我想通过 ssh 隧道连接到远程服务器，例如*localport* :server1.blabla.com: *remoteport*。我想我知道如何设置*远程端口*（选择连接的“sftp 文件”并将属性面板中的“端口”更改为*远程端口*），但我找不到如何设置*本地*端口。我应该如何照顾这个？

附言。我希望我没有切换本地端口和远程端口，因为这让我很困惑。*远程端口是**指*我需要访问的服务器上的端口，本地端口是指我想要将其转发到的本地计算机上的端口（可以自由选择）。

# ruby-on-rails - 从 Rails 中的成员中过滤掉管理员

> ID：13513846
> 
> 赞同：2
> 
> 时间：2012-11-22T13:34:50.370
> 
> 标签：ruby-on-rails, ruby

我有一个应用程序，用户在注册后由管理员批准。我需要一些帮助来过滤成员列表中的管理员。

这是我的索引方法：

```
def index
  if params[:is_approved].to_i == 0
    @users = User.find_all_by_is_approved(0) #returns all unapproved users
  else
    @users = User.find_all_by_is_approved(1) #here I wanna filter out the admins
  end   
end 
```

我试图添加`&& User.find_all_by_is_admin(0)`，但后来我得到了所有不是管理员的用户，即未经批准的用户。

管理员是用户，但有一列`is_admin`设置为 true，我不想显示它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:47:18.037

如果您想要获得批准但不是管理员的用户列表：

```
User.where(:is_approved => 1, :is_admin => 0) 
```

或者，如果您想以您使用的样式编写它，您可以这样做：

```
User.find_all_by_is_approved_and_is_admin(1, 0) 
```

您尝试的方法不起作用的原因`&&`是布尔 AND 运算符，因此如果您编写

```
User.find_all_by_is_approved(1) && User.find_all_by_is_admin(0) 
```

这里的两边`&&`都被认为是真的，所以这会计算到右手边，即`User.find_all_by_is_admin(0)`

`&`在 Ruby 中的数组上有一个(single & sign) 运算符，它给出了 2 个数组的*交集*，即

```
User.find_all_by_is_approved(1) & User.find_all_by_is_admin(0) 
```

将是两个列表中的用户列表，但这是一种低效的方法，因为它会导致 2 个单独的数据库查询。

# javascript - 像 http://vimeo.com/ 这样的导航菜单

> ID：13513848
> 
> 赞同：0
> 
> 时间：2012-11-22T13:34:54.153
> 
> 标签：javascript, jquery, css

我想知道如何通过 css 和最终的 js 构建类似的导航。我复制“静态”部分没有问题，我想知道的是如何制作下拉菜单。

就像整个页面幻灯片为它腾出空间一样，它不会像我找到的所有脚本那样重叠。我很感激一个解释，甚至更好的是我无法在网络上某个地方找到的现成脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:53:46.330

## *[jsBin 演示](http://jsbin.com/itekuv/8/edit)*

jQuery：

```
$('nav li:has(ul)').on('hover',function(){
    $('ul', this).stop().animate({height:'toggle'},300); 
}); 
```

HTML

```
 <nav>    
    <ul>      
      <li><a href="#">Join</a></li>      
      <li><a href="#">Login</a></li>      
      <li>
          <a href="#">Watch</a>
          <ul>
              <h2>Watch additional menu</h2>      
          </ul>     
      </li>            
    </ul>
 </nav> 
```

CSS：

```
/* ALL ULs */
nav ul{
  list-style:none;
  width:100%;
}

/* INNER UL */
nav li > ul{
  float:left;
  display:none;
  background:#ccc;
}

/* ALL LI */
nav li{
  display:inline;
  margin:30px;
} 
```

# asp.net - 使用jquery将数据插入数据库

> ID：13513853
> 
> 赞同：3
> 
> 时间：2012-11-22T13:35:01.597
> 
> 标签：asp.net, jquery

我正在尝试将从 asp .net 表单中获取的四个字段插入到数据库中的表中，但我无法做到这一点。请给我完全编译的代码，它可以工作并且成功地将 4 个值输入到 db

这是我使用的代码

```
 <script type="text/javascript">
    $(document).ready(function () {
        $("#<%= Button1.ClientID %>").click(function () {
           /* $(".style2").hide();
            return false; */
            var name = $('#<%=TextBox1.ClientID%>').val();
            var email = $('#<%=TextBox2.ClientID%>').val();
            var phone = $('#<%=TextBox3.ClientID%>').val();
            var message = $('#<%=TextBox4.ClientID%>').val();
            var json = "{'" + name + "','" + email + "','" + phone + "','" + message + "'}";
            alert("comes here");
            $ajax({
                  type:"POST",
                  url:"JqueryFunction.aspx/insert_details",

                  data:'{name: "' + $("#<%=TextBox1.ClientID%>")[0].value + '",email: "' + $("#<%=TextBox2.ClientID%>")[0].value + '",phone: "' + $("#<%=TextBox3.ClientID%>")[0].value + '",message: "' + $("#<%=TextBox4.ClientID%>")[0].value + '"}',

                  clientType:"application/json; charset=utf-8",
                  datatype:"json",
                  async: false,
                  success: function () { alert("success"); },
                  error: function(){alert("error");}
                  });
        });
    });
</script> 
```

这是 insert_details 函数：

```
public static void insert_details(string name,string emailid,string phone,string message)
{
    SqlConnection Con = new SqlConnection(@"Server=HP-PC;Integrated Security=True;" + "Database=DB1");
    //Console.WriteLine("connected to db");
    string query = "INSERT INTO [SubmissionFormTable]([Name],[Email],[Phone],[Message])" +
                "VALUES (@Name,@Email,@Phone,@Message)";

    SqlCommand cmd = new SqlCommand(query, Con);
    cmd.Parameters.AddWithValue("@Name", name);
    cmd.Parameters.AddWithValue("@Email", emailid);
    cmd.Parameters.AddWithValue("@Phone", phone);
    cmd.Parameters.AddWithValue("@Message", message);

    try
    {
        Con.Open();

        cmd.ExecuteNonQuery();
    }
    catch (Exception)
    {
        throw;
    }
    finally
    {
        Con.Close();
    }
    //string str_insert = "INSERT INTO remark VALUES(@remark)";

    //SqlParameter[] parameter = {
    //        new SqlParameter("@remark", remark),
    //    };
   // int abc = DBclass.TruyVan_XuLy_VoiThamSo(str_insert, parameter);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:53:28.213

更新您的 js 代码，如下所示，并尝试使用 JSON.stringify 将值转换为 JSON 以传递您的参数：

```
$(document).ready(function () {
        $("#<%= Button1.ClientID %>").click(function () {
            var name = $('#<%=TextBox1.ClientID%>').val();
            var email = $('#<%=TextBox2.ClientID%>').val();
            var phone = $('#<%=TextBox3.ClientID%>').val();
            var message = $('#<%=TextBox4.ClientID%>').val();
            var data = JSON.stringify({ name: name, email: email, phone: phone, message: message });
            alert("comes here");
            $ajax({
                  type:"POST",
                  url:"JqueryFunction.aspx/insert_details",
                  data:data,
                  contentType: "application/json; charset=utf-8",
                  datatype:"json",
                  success: function () { alert("success"); },
                  error: function(){alert("error");}
                  });
        });
    }); 
```

上面的代码没有问题。

**编辑**：
您的方法应该是 WebMethode ：

```
[System.Web.Services.WebMethod]
public static void insert_details(string name,string emailid,string phone,string message)
{
    SqlConnection Con = new SqlConnection(@"Server=HP-PC;Integrated Security=True;" + "Database=DB1");
    //Console.WriteLine("connected to db");
    string query = "INSERT INTO [SubmissionFormTable]([Name],[Email],[Phone],[Message])" +
                "VALUES (@Name,@Email,@Phone,@Message)";

    SqlCommand cmd = new SqlCommand(query, Con);
    cmd.Parameters.AddWithValue("@Name", name);
    cmd.Parameters.AddWithValue("@Email", emailid);
    cmd.Parameters.AddWithValue("@Phone", phone);
    cmd.Parameters.AddWithValue("@Message", message);

    try
    {
        Con.Open();

        cmd.ExecuteNonQuery();
    }
    catch (Exception)
    {
        throw;
    }
    finally
    {
        Con.Close();
    }
    //string str_insert = "INSERT INTO remark VALUES(@remark)";

    //SqlParameter[] parameter = {
    //        new SqlParameter("@remark", remark),
    //    };
   // int abc = DBclass.TruyVan_XuLy_VoiThamSo(str_insert, parameter);
} 
```

# powershell - powershell 删除特定用户对文件夹的所有权限

> ID：13513863
> 
> 赞同：5
> 
> 时间：2012-11-22T13:35:34.293
> 
> 标签：powershell, permissions, directory

我需要一个脚本或简单的powershell代码来删除特定用户对文件夹的所有权限，方法是将这些删除继承到所有子文件夹和文件 - 递归......提前谢谢你！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T19:55:19.700

```
 $acl=get-acl c:\temp
 $accessrule = New-Object system.security.AccessControl.FileSystemAccessRule("domain\user","Read",,,"Allow")
 $acl.RemoveAccessRuleAll($accessrule)
 Set-Acl -Path "c:\temp" -AclObject $acl 
```

这应该以递归方式擦除 c:\temp 中用户的所有安全规则

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:59:27.050

我认为更简单的方法是从具有正确权限的文件或文件夹中复制 acl 并将其应用于您想要特定访问权限的文件夹。例子：

```
$acl= get-acl /path/to/file_with_correct acl 
$files = get-childItem c:\temp\*.* -recurce | set-acl -aclobject $acl -whatif 
```

去掉-whatif参数有效修改acl

或者按照[这篇技术网文章](http://technet.microsoft.com/en-us/library/ff730951.aspx)并使用如下代码：

```
$Right = [System.Security.AccessControl.FileSystemRights]::Read
$InheritanceFlag = [System.Security.AccessControl.InheritanceFlags]::None 
$PropagationFlag = [System.Security.AccessControl.PropagationFlags]::InheritOnly  
$objType = [System.Security.AccessControl.AccessControlType]::Allow 

$objUser = New-Object System.Security.Principal.NTAccount("domain\bob") 
$objACE = New-Object System.Security.AccessControl.FileSystemAccessRule `
    ($objUser, $Right, $InheritanceFlag, $PropagationFlag, $objType) 
$objACL = Get-ACL "d:\test" 
$objACL.RemoveAccessRuleAll($objACE) 
Set-ACL "d:\test" -AclObject $objACL 
```

# c - 乘法或减法哪个更快？

> ID：13513867
> 
> 赞同：7
> 
> 时间：2012-11-22T13:35:37.197
> 
> 标签：c, performance, optimization

我目前正在做一个大学项目，该项目在很大程度上取决于我的解决方案的速度和效率。我对代码所做的微小更改会产生巨大的影响，因为我正在编写的特定函数被调用了数十万次。

我现在已经编写了我的项目的主要功能，并且目前正在尽可能优化一切。我质疑的代码的一个特定部分如下所示：

```
array[i] *= -1; 
```

我正在考虑优化到：

```
array[i] = 0 - array[i]; 
```

更改此代码实际上会影响速度吗？减法运算比乘法运算快吗？还是这种问题已成为过去？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-22T13:48:39.810

忽略您可能应该使用它的事实：

```
array[i] = -array[i]; 
```

因为它直接说明了意图，所以 IMO 更加清晰，让我们检查一下编译器对这个程序做了什么（x86-64 上的 GCC 4.7.2）：

```
#include <stdio.h>
#include <time.h>

int main(void)
{
    time_t t = time(NULL);
    t *= -1;
    return 0;
} 
```

```
gcc -S mult.c -o 1.s
```

为此：

```
#include <stdio.h>
#include <time.h>

int main(void)
{
    time_t t = time(NULL);
    t = 0 - t;
    return 0;
} 
```

```
gcc -S sub.c -o 2.s
```

现在比较两个汇编输出：

```
差异 1.s 2.s
```

什么都没有打印。编译器为两个版本生成了完全相同的代码。所以答案是：你使用什么并不重要。编译器会选择最快的。这是一个非常容易进行的优化（如果您甚至可以称其为优化），因此我们可以假设几乎每个编译器都会为给定的 CPU 架构选择最快的方法来完成它。

作为参考，生成的代码是：

```
主函数（）
{
    time_t t = 时间（NULL）；
       移动编辑，0x0
       拨打 12
       mov QWORD PTR [rbp-0x8],rax

    t *= -1；
       否定 QWORD PTR [rbp-0x8]

    t = 0 - t;
       否定 QWORD PTR [rbp-0x8]

    返回0；
       移动 eax,0x0
}
```

在这两种情况下，它都使用 NEG 来否定该值。`t *= -1`并且`t = 0 - t`都生成：

```
否定 QWORD PTR [rbp-0x8]
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-22T13:42:38.533

进行优化只有一种明智的方法，那就是测量应用程序的性能。一个好的分析器可以告诉你很多，但简单地安排你的程序的执行时间和各种修改也会有很大的帮助。我会先使用分析器，但要找到瓶颈所在。

至于您的具体问题，正如其他人指出的那样，这将高度依赖于架构。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-22T13:45:20.383

编译器足够聪明，可以将其转换为有效的操作。例如

C源

```
void f()
{
    int a = 7, b = 7;
    a *= -1;
    b = -b;
} 
```

给出使用`gcc -S a.c`

```
 .file    "a.c"
    .text
    .globl    f
    .type    f, @function
f:
.LFB0:
    .cfi_startproc
    pushq    %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6
    movl    $7, -8(%rbp) ; assign 7
    movl    $7, -4(%rbp) ; assign 7
    negl    -8(%rbp)     ; negate variable
    negl    -4(%rbp)     ; negate variable
    popq    %rbp
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE0:
    .size    f, .-f
    .ident    "GCC: (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3"
    .section    .note.GNU-stack,"",@progbits 
```

这是在使用 Ubuntu 12.04 和 gcc 4.6.3 的 PC 上。您的架构可能会有所不同。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-22T13:45:08.777

几乎所有设备上的乘法都会变慢。这是一个更复杂的操作。

但是，您的编译器可能足够聪明，可以自己进行转换。在现代 CPU 上，操作可能会以这样的方式重叠，即指令的额外时间不会导致执行时间增加，因为它与其他工作重叠。而且很可能差异很小，除非您做数百万次，否则如果不付出巨大的努力就无法测量。

一般先写清晰的代码，以后有必要再优化。如果您想要变量的负值，请写“-value”而不是“-1*value”，因为它更准确地反映了您的意图，而不仅仅是一种计算方式。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-22T13:57:44.457

这是 gcc 4.6.1 对 -O 所做的：

```
double a1(double b) { return -b; }       // xors sign bit with constant, 2 instr
                                         // movsd   .LC0(%rip), %xmm1   (instr 1)
                                         // xorpd   %xmm1, %xmm0        (instr 2)
                                         // ret                     (not counted)
double a2(double b) { return -1.0*b; }   // xors sign bit with constant, 2 instr
                                         // same code as above
double a3(double b) { return 0.0-b; }    // substract b from 0,  3 instructions
                                         // xorpd   %xmm1, %xmm1
                                         // subsd   %xmm0, %xmm1
                                         // movapd  %xmm1, %xmm0    (+ret)
int a4(int a){return -a;}                // neg rax   (+ret)  1 instruction
int a5(int a){return a*(-1);}            // neg rax
int a6(int a){return 0-a;}               // neg rax
double a7(double b) { return 0-b;}       // same as a3() -- 3 instructions 
```

因此，建议的优化在此编译器上变得更糟（取决于数组类型）。

然后关于乘法比加法慢的问题。一个经验法则是，*如果乘法与加法一样快*，我们谈论的是 DSP 架构或 DSP 扩展：Texas C64、Arm NEON、Arm VFP、MMX、SSE。许多浮点扩展也是如此，从 Pentium 开始，FADD 和 FMUL 都有 3 个周期的延迟和每个周期 1 条指令的吞吐量。ARM 整数内核也在 1 个周期内执行乘法运算。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-22T13:42:21.873

好吧，试着收拾我的烂摊子，把我的愚蠢变成有用的知识，不仅对我自己，对别人也是如此。

## 主要结论和总结：

**这种优化是由编译器自动完成的，在这种情况下，两种方法都被编译为 x86 上的一条 ASM 指令。**（见上面的帖子）不要让编译器的工作比它必须的更难，只要按照逻辑暗示就行。

几个答案表明，这两种方式都编译为完全相同的指令。

**TL;博士**

为了弥补我在这个话题上犯下的错误，我决定付出一些努力来为自己澄清这个问题——也为那些像我在回答这个问题时给出的一个奇迹般糟糕的答案一样遭受精神障碍的人......

取反一个数字取决于架构以及数据的表示方式。

## 符号和幅度表示

不知何故，我假设使用了这个实现 - 它不是。这将数字表示为一个符号位，其余的都表示为值。所以它可以表示从 -2 ^(n-1) -1 到 2 ^(n-1) -1 的数字，并且也有一个负零值。在这种表示中，翻转符号位就足够了：

```
input ^ -0; // as the negative zero has all bits but the MSB as zero 
```

## 一个补码表示

一个[补码整数表示](http://en.wikipedia.org/wiki/Ones%27_complement)将负数表示为正表示的按位否定。然而，这并没有真正使用，从 8080 开始，使用二进制的恭维。这种表示的一个奇怪结果是负零，这会带来很多麻烦。此外，表示的数字范围从 -2 ^(n-1) -1 到 2 ^(n-1) -1，其中 n 是存储数字的位数。

在这种情况下，对数字求反的最快“手动”方法是翻转所有表示符号的位：

```
input ^ 0xFFFFFFFF; //assuming 32 bits architecture 
```

或者

```
input ^ -0; //as negative zero is a "full one" binary value 
```

## 二进制补码表示

更广泛（总是？）使用的表示是[二进制补码系统](http://en.wikipedia.org/wiki/Two%27s_complement)。它表示从 -2 ^(n-1)到 2 ^(n-1) -1 的数字，并且只有一个零值。它将正范围表示为其普通的二进制表示。但是，将 1 加到 2 ^(n-1) -1（表示为除 MSB 之外的所有位都为 1）将导致 -2 ^(n-1)（表示 MSB 为 1，所有其他位为零）。

手动取反二进制补码需要取反所有位并加 1：

```
(input ^ -1) + 1 //as -1 is represented by all bits as 1 
```

**然而**，由于负值的范围比正值的范围更广，因此在此表示中最负数没有正对应物，在处理这些数字时必须考虑到这一点！反转最负值会导致它本身，就像它发生在零一样（为简单起见，以 8 位为单位）

```
most negative number: -128, represented as 10000000
inverting all bits: 01111111
adding one: 10000000 -> -128 again 
```

但是请大家*记住：过早的优化是万恶之源！（并且使用优化器，这些在任何资源丰富的架构上都已成为过去）

*：OP 已经通过这个，所以这适用于所有其他人，比如我。

[（自我注意：（过早地）愚蠢是所有（合法的）反对票的根源。）]

# c# - 屈服于 IList 返回类型

> ID：13513868
> 
> 赞同：4
> 
> 时间：2012-11-22T13:35:40.410
> 
> 标签：c#, ienumerable, yield, ilist

我必须实现一个序列化/反序列化类，并且我正在使用`System.Xml.Serialization`. 我有一些`IList<Decimal>`类型属性，并希望在`IList<string>`解码属于具有特定文化信息的列表的所有十进制值时进行序列化。例如`10`，`10,00`带有意大利文化信息但`10.00`带有英语文化信息。我试着用这个来做到这一点：

```
public IList<string> method()
    {
        for (int i = 0; i < 1000; i++)
        {
            yield return i.ToString();
        }
    } 
```

但我在编译时得到错误 33

```
The body of 'Class1.method()' cannot be an iterator block because 'System.Collections.Generic.IList<string>' is not an iterator interface type 
```

如果我将其用作属性类型`IEnumerable<string>`，它会成功运行，但显然我无法更改我想要序列化的数据类型。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T13:38:20.773

`yield`仅适用于、 和`IEnumerable<T>`作为`IEnumerable`返回类型。 在您的情况下，您需要改用普通方法：`IEnumerator<T>``IEnumerator`

```
public IList<string> method()
{
    var result = new List<string>();
    for (int i = 0; i < 1000; i++)
    {
        result.Add(i.ToString());
    }
    return result;
} 
```

想想看。您的代码将允许您编写以下代码：

```
method().Add("foo"); 
```

这没有太多意义，不是吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T10:56:06.593

您还可以将迭代器块移动到私有方法或 getter，如下所示：

```
public IList<string> method()
{
  return seq.ToList();
}

IEnumerable<string> seq
{
  get
  {
    for (int i = 0; i < 1000; i++)
    {
      yield return i.ToString();
    }
  }
} 
```

但还要注意，对于范围的特定情况，`x : x+1 : x+2 : ... : x+(n-1)`.NET 中已经有[`Enumerable.Range`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)您可以像这样使用的方法：

```
public IList<string> method()
{
  return Enumerable.Range(0, 1000).Select(i => i.ToString()).ToList();
} 
```

# php - 发送带附件的电子邮件

> ID：13513869
> 
> 赞同：0
> 
> 时间：2012-11-22T13:35:40.613
> 
> 标签：php, function, email, header, attachment

嗨，我在这里学习了一个教程和几个答案，但是当我尝试将带有附件的电子邮件发送到我的 gmail 作为测试时，它仍然不起作用。电子邮件：

非洲侏儒刺猬俱乐部新闻信

admin@africanpygmyhedgehogclub.co.uk 通过 moth.xssl.net

"

> 内容类型：文本/html；
> 
> ### 非洲侏儒刺猬俱乐部新闻信
> 
> 您好，这是一条测试消息--1575d7e57c4ae2d9bdd29f847d8f48ea
> 
> 内容类型：图片/jpeg；name="/tmp/php7LfGKW" Content-Transfer-Encoding: base64 Content-Disposition: attachment /9j/4AAQSkZJRgABAgEASABIAAD/4RNGRXhpZgAATU0AKgAAAAgABwESAAMAAAABAAEAAAEaAAUA AAABAAAAYgEbAAUAAAABAAAAagEoAAMAAAABAAMAAAExAAIAAAAUAAAAcgEyAAIAAAAUAAAAhodp AAQAAAABAAAAnAAAAMgAAAAcAAAAAQAAABwAAAABQWRvYmUgUGhvdG9zaG9wIDcuMAAyMDA5OjA4 OjA4IDIxOjE1OjA5AAAAAAOgAQADAAAAAf//AACgAgAEAAAAAQAAAligAwAEAAAAAQAAAdAAAAAA AAAABgEDAAMAAAABAAYAAAEaAAUAAAABAAABFgEbAAUAAAABAAABHgEoAAMAAAABAAIAAAIBAAQA AAABAAABJgICAAQAAAABAAASGAAAAAAAAABIAAAAAQAAAEgAAAAB/9j/4AAQSkZJRgABAgEASABI AAD/7QAMQWRvYmVfQ00AAv/uAA5BZG9iZQBkgAAAAAH/2wCEAAwICAgJCAwJCQwRCwoLERUPDAwP FRgTExUTExgRDAwMDAwMEQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBDQsLDQ4NEA4OEBQO ....

我的代码：

```
 if(isset($_POST['send_newsletter']))
    {
    $newsletter->store_form_values($_POST);
        $emails = explode(',', $newsletter->newsletter_emails);
    $file = $_FILES;

    $send_email = $newsletter->email_newsletter($emails, $file);

        echo $send_email;
    }

    public function email_newsletter($emails, $file)
    {
        //email address from
    $from = 'admin@africanpygmyhedgehogclub.co.uk';
    //subject
    $subject = "African Pygmy Hedgehog Club News Letter";

    $random_hash = "--" .  md5(date('r', time())) . "\r\n\n";
    $boundry_last = $random_hash;

    //turn emails array into csv
    $bcc = null;
    foreach($emails as $key => $value)
    {
        if($key == 'newsletter_sign_email')
        {
        $bcc .= $value . ',';
        } 
    }

    $bcc = rtrim($bcc);

    //headers
    $headers = 'From: ' . $from . "\r\n";
    $headers .= 'Reply-To: ' . $from . "\r\n";
    $headers .= 'BCC: ' . $bcc . "\r\n";
    $headers .= "MIME-Version: 1.0\r\n";
    $headers .= "Content-Type: multipart/mixed; boundary=\"PHP-mixed-" . $random_hash . "\"";

    //main message body
    $message = "Content-Type: text/html;" . "\r\n";
    $message .= "<h3>African Pygmy Hedgehog Club News Letter</h3>\n\n";
    $message .= $this->formatting($this->newsletter_content) . "\r\n";
    $message .= $random_hash;

    //attachment
    $file = $file['newsletter_attachment'];
    $filename = $file['tmp_name'];
    $filecontents = file_get_contents($filename);
    $message .= "Content-Type: " . $file['type'] . "; name=\"" . $filename . "\"" . "\r\n"; 
    $message .= "Content-Transfer-Encoding: base64" . "\r\n";  
    $message .= "Content-Disposition: attachment" . "\r\n";  
    $message .= chunk_split(base64_encode($filecontents)) . "\r\n";
    $message .= $boundry_last;

    if(mail($from, $subject, $message, $headers))
    {
    $result = "Successfully Sent News Letter";
    }
    else
    {
    $result = "Failed to Send New Letter, please try again!";
    }

    return $result;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:43:38.370

阅读本文后，您可能可以解决您的问题：

[http://webcheatsheet.com/php/send_email_text_html_attachment.php](http://webcheatsheet.com/php/send_email_text_html_attachment.php)

它非常简洁且切中要害 - 尽管它非常混乱。

您最好的选择是使用[http://swiftmailer.org/](http://swiftmailer.org/)发送您的电子邮件，它还支持附件和更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:47:39.120

如果不运行代码，看起来邮件消息和附件之间的边界没有设置。它似乎没有——

```
PHP-Mixed . . . 
```

# regex - Perl 正则表达式不匹配字符串与前导零/错误转义的数字与 Perl 命令行中的前导零

> ID：13513871
> 
> 赞同：4
> 
> 时间：2012-11-22T13:35:42.350
> 
> 标签：regex, perl

*我已经更新了这个问题，因为在原始问题中，我所追求的问题原来是一个完全不同的错误（在这种情况下并不有趣）。但是我在测试中犯的第二个错误是其他人可能会遇到的，并产生了一个非常有趣的见解的答案，所以我将把它留在这里作为一个问题。*

我试图找出由于前导零而导致的正则表达式似乎不匹配的问题。我发现以下所有正则表达式在我的命令行测试中都不匹配：

```
"005630" =~ /^0056(10|11|15|20|21|25|30|31)$/
"005630" =~ /0056(10|11|15|20|21|25|30|31)/  
"005630" =~ /56(10|11|15|20|21|25|30|31)/
"005630" =~ /..56(10|11|15|20|21|25|30|31)/
"005630" =~ /..5630/
"005630" =~ /005630/
"005630" =~ /^005630$/
"005630" =~ /5630/
"005630" =~ /(0)*5630/
"005630" =~ /5630/g
"005630" =~ m/5630/g 
```

这确实匹配：

```
"x005630" =~ /0056(10|11|15|20|21|25|30|31)/ 
```

其他人也类似，即一旦我添加了一个前导字母，它就可以工作。

测试代码是（在 Cygwin bash 上使用 Cygwin Perl v5.10.1 测试）：

```
perl -e "print ( "005630" =~ /0056(10|11|15|20|21|25|30|31)/)"   # does not display a true value
perl -e "print ( "x005630" =~ /0056(10|11|15|20|21|25|30|31)/)"  # displays a true value 
```

这里的引用显然是一个错误（不能`"`在用 引用的字符串中使用未转义`"`）。但是我仍然不明白为什么尽管引用不正确，第二行仍然有效。

注意：这也可能发生在其他没有正则表达式的情况下。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T14:39:28.180

给出命令的原因

```
perl -e "print ( "005630" =~ /0056(10|11|15|20|21|25|30|31)/)"
perl -e "print ( "x005630" =~ /0056(10|11|15|20|21|25|30|31)/)" 
```

只有第二行打印匹配的是 Perl 支持[八进制](http://en.wikipedia.org/wiki/Octal) [数字文字](http://perldoc.perl.org/perldata.html#Scalar-value-constructors)。正如你所知道的，你的 shell 正在吃引号，所以你实际上是在执行语句：

```
print ( 005630 =~ /0056(10|11|15|20|21|25|30|31)/);
print ( x005630 =~ /0056(10|11|15|20|21|25|30|31)/); 
```

任何以零开头且不紧跟小数点的数字文字（不带引号的数字）都被视为八进制数。

```
perl -e "print 005630 . ''"  # prints 2968
perl -e "print x005630 . ''" # prints x005630 
```

（`. ''`此处需要确保将裸字视为字符串。`=~`运算符在您的示例中执行此操作。）

因此，您的正则表达式不匹配的原因是您的字符串不包含您认为的内容。

# javascript - 当用户注销其中一个标签时，自动注销所有打开的标签

> ID：13513874
> 
> 赞同：29
> 
> 时间：2012-11-22T13:35:52.320
> 
> 标签：javascript, html

我创建了基于 localStorage 的登录页面。在加载页面时，我检查了 localStorage 的值。如果我在多个选项卡中打开网页，然后从任何一个选项卡中注销，则所有剩余页面都应自动注销。

如果重新加载/刷新意味着它注销。

当用户查看页面或说出任何其他解决此问题的方法时，请帮助我运行脚本。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-22T13:43:04.250

您可以使用[Storage 事件](http://html5demos.com/storage-events)在 localStorage 值更改时收到通知。

```
function storageChange (event) {
    if(event.key === 'logged_in') {
        alert('Logged in: ' + event.newValue)
    }
}
window.addEventListener('storage', storageChange, false) 
```

例如，如果其中一个选项卡注销：

```
window.localStorage.setItem('logged_in', false) 
```

然后所有*其他*选项卡将收到一个`StorageEvent`，并会出现一个警报：

```
Logged in: false 
```

我希望这回答了你的问题！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T13:41:33.677

“localStorage 将任何保存的数据无限期地保存在用户的计算机上和跨浏览器选项卡”^([源](http://www.javascriptkit.com/javatutors/domstorage.shtml))

这意味着如果您清空/删除您在一个选项卡中设置的登录数据，则所有其他选项卡中的数据也将更改。

因此，如果用户注销，localStorage 数据会更改。
然后，在您的选项卡上，使用事件检测用户何时再次将焦点更改到该选项卡`onfocus`：

```
function onFocus(){
//Reload Page if logged out (Check localStorage)
    window.location.reload();
};

if (/*@cc_on!@*/false) { // check for Internet Explorer
    document.addEventHandler("focusin", onFocus);
} else {
    window.addEventHandler("focus", onFocus);
} 
```

[资源](http://www.thefutureoftheweb.com/blog/detect-browser-window-focus)

这意味着您不会不断地运行 javascript，或同时重新加载（可能大量）选项卡。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-07T17:48:05.490

如果您能够在 Apache 或 PHP 等服务器端脚本中设置一个 HTTP 标头，这也可以使用 HTTP 标头来完成：

```
Clear-Site-Data: "cookies", "storage", "executionContexts" 
```

例如在 PHP 中：

```
header('Clear-Site-Data: "cookies", "storage", "executionContexts"'); 
```

这里要注意的关键是`"executionContexts"`指令。从[文档](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Clear-Site-Data)：

> “执行上下文”
> 
> 表示服务器希望重新加载响应来源的所有浏览上下文 (Location.reload)。

*某些浏览器 (ahem..IE/Edge) 的兼容性目前尚不清楚，但大多数优秀的*浏览器都支持此标头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T13:40:42.927

看看[HTML5 的页面可见性 API](http://www.html5rocks.com/en/tutorials/pagevisibility/intro/)。这可以帮助你

# c# - 如何将值从 foreach 循环传递到另一个方法

> ID：13513875
> 
> 赞同：0
> 
> 时间：2012-11-22T13:35:54.153
> 
> 标签：c#, methods, foreach, unity3d

我需要做的是从一个调用的方法中获取 foreach 值`private void ReceiveData()`并将它们发送到另一个方法`void Update()`。如何在 C# 中做到这一点？

```
private void ReceiveData() 
    {

       IPEndPoint remoteIP = new IPEndPoint(IPAddress.Parse("10.0.2.217"), port);
       client = new UdpClient(remoteIP);
        while (true) 
        {
           try 
            {
                IPEndPoint anyIP = new IPEndPoint(IPAddress.Any, 0);
                data = client.Receive(ref anyIP);

                int nIndex = 0;
                foreach(SignalIndex si in xmlreader.cdpSignals)
                {
                     x= ReadSingleBigEndian(data, si.index + 0);
                     y= ReadSingleBigEndian(data, si.index + 4);
                     z= ReadSingleBigEndian(data, si.index + 8);
                     alpha= ReadSingleBigEndian(data, si.index + 12);
                     theta= ReadSingleBigEndian(data, si.index + 16);
                     phi= ReadSingleBigEndian(data, si.index + 20);

                //  xmlreader.unityGameObjects[nIndex].transform.localPosition = new Vector3(x,y,z);
                //  xmlreader.unityGameObjects[nIndex].transform.Rotate(alpha,theta,phi);   
                }

            }
            catch (Exception err) 
            {
               print(err.ToString());
            }

        }

        client.Close();
    }

    void Update() 
    {
        foreach(GameObject go in xmlreader.unityGameObjects)
        {
            go.transform.localPosition = new Vector3(x,y,z);
            go.transform.transform.Rotate(alpha,theta,phi);
        }
    } 
```

有 2 种方法，我需要从 ReceiveData() 获取 foreach 中的值并在方法 Update() 中实例化它们。ReceiveData() 中的 foreach 中的所有变量都是公共的，但在 Update() 中它们都取 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:41:05.430

foreach 的工作方式如下：

在您的方法 ( `ReceiveData`) 中，您将循环使用某种方法。然后从那个循环你可以调用另一个方法（`Update`）。但是，您将不得不传递这些变量。您的方法目前是无效的，并且没有任何参数。

我建议如下：

```
private void ReceiveData()
{
    var data = GetMyDataFromSomewhere(); // data should be an IEnumerable of some sort

    foreach (MyDataItemType dataItem in data)
    {
        Update(dataItem);
    }
}

private void UpdateData(MyDataItemType dataItem)
{
    // Do some update to dataItem here...
} 
```

在您使用更多代码进行新更新后，还有更多信息可供使用。显然，您正在类（、、、等）中设置一些字段`x`/`y`属性`z`。update 方法将使用这些来更新一些东西。

那么为什么不从循环中调用`Update()`，或者在`foreach`循环之后调用，如果它只需要在设置后完成：

```
foreach(SignalIndex si in xmlreader.cdpSignals)
{
    x= ReadSingleBigEndian(data, si.index + 0);
    y= ReadSingleBigEndian(data, si.index + 4);
    z= ReadSingleBigEndian(data, si.index + 8);
    alpha= ReadSingleBigEndian(data, si.index + 12);
    theta= ReadSingleBigEndian(data, si.index + 16);
    phi= ReadSingleBigEndian(data, si.index + 20);

    UpdateData(); // Just call it!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:44:23.970

编辑2：

ReaderWriterLockSlim 的文档：http: [//msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)

```
struct CoordData
{
    public float X, Y, Z, Alpha, Theta, Phi;
    public int NIndex;
}

private List<CoordData> coordDataList = new List<CoordData>();
private ReaderWriterLockSlim lockObj = new ReaderWriterLockSlim();

private void ReceiveData() 
{

   IPEndPoint remoteIP = new IPEndPoint(IPAddress.Parse("10.0.2.217"), port);
   client = new UdpClient(remoteIP);
    while (true) 
    {
       try 
        {
            IPEndPoint anyIP = new IPEndPoint(IPAddress.Any, 0);
            data = client.Receive(ref anyIP);

            int nIndex = 0;
            foreach(SignalIndex si in xmlreader.cdpSignals)
            {
                 x= ReadSingleBigEndian(data, si.index + 0);
                 y= ReadSingleBigEndian(data, si.index + 4);
                 z= ReadSingleBigEndian(data, si.index + 8);
                 alpha= ReadSingleBigEndian(data, si.index + 12);
                 theta= ReadSingleBigEndian(data, si.index + 16);
                 phi= ReadSingleBigEndian(data, si.index + 20);

                 lockObj.EnterWriteLock();
                 try
                 {
                     coordDataList.Add(new CoordData() { X = x, Y = y, Z = z, Alpha = alpha, Theta = theta, Phi = phi, NIndex = nIndex });
                 }
                 finally
                 {
                     lockObj.ExitWriteLock();
                 }

                 nIndex++; //I'm assuming you want to do this here otherwise you'll be changing the same object in the array every time  
            }

        }
        catch (Exception err) 
        {
           print(err.ToString());
        }

    }

    client.Close();
}

void Update()
{
    lockObj.EnterReadLock();
    try
    {
        foreach (CoordData data in coordDataList)
        {
            xmlReader.unityGameObjects[data.NIndex].localPosition = new Vector3(data.X,data.Y,data.Z);
            xmlReader.unityGameObjects[data.NIndex].Rotate(data.Alpha,data.Theta,data.Phi);
        }
    }
    finally
    {
        lockObj.ExitReadLock();
    }
} 
```

# c - 为什么 h_addr_list（在 hostent 结构中）类型为 char** 而不是 void*？

> ID：13513878
> 
> 赞同：2
> 
> 时间：2012-11-22T13:36:18.570
> 
> 标签：c, networking

我试图找出一段代码来构造一个 hostent 对象，更具体地说，它是填充 h_addr_list 数组的部分工作。

我对分配给数组的值被强制转换为 的事实感到困惑，`char*`因为据我阅读，这个数组与字符串无关。

我注意到该`h_addr_list`数组实际上键入为`char**`.

我看到的唯一注意到这一事实的地方是[beej 的网络编程指南中的第 9.7 节](http://beej.us/guide/bgnet/output/html/multipage/gethostbynameman.html)，但即使没有解释为什么要这样输入。

是否有`h_addr_list`输入为`char**`而不是`void*`/的原因`void**`（或其他任何可能提供更多信息的内容）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:46:03.860

`char *`不一定要引用 C 字符串，也可以引用需要按字节寻址的已知长度的内存块，大概是因为它来自网络。

在将 和 之类的类型`int8_t`添加`uint8_t`到 C99 之前，`char *`这是引用连续字节数组的唯一实用方法。事实上，早于形式化类型`struct hostent`的 C89 。`void`如果今天编写，该字段将被声明为`void **`或可能`uint8_t **`。

# ios - 测试 NSMutableArray 中的值并显示到 Tableview

> ID：13513879
> 
> 赞同：0
> 
> 时间：2012-11-22T13:36:19.457
> 
> 标签：ios, nsmutablearray, tableview

我有一个 NSMutableArray；

```
array=(
 {
  names=a;
  score=2;
 },
 {
  names=b;
  score=5;
 },
 {
  names=c;
  score=20;
 }
) 
```

首先我想测试分数是否大于10，然后在tableview中显示所有值；

我很难访问数组，我是从 PHP 的角度来看的，所以我真的没有任何线索

我得到了一个 SIGABRT

```
cell.textLabel.text = [self.array objectAtIndex:indexPath.row]; 
```

我想是因为我没有消化数组，或者我将整个数组内容传递到可能会窒息并吐出的单元格中。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:46:27.420

最好的是将您的数组重写为新数组，以避免在每个单元格中执行此操作的开销。

例如，您可以这样做`viewDidLoad`：

```
- (void)viewDidLoad {
    self.filteredArray = [[NSMutableArray alloc] init];
    for (ArrayElement *arrayObject in self.array)
    {
        if ([[arrayObject score] intValue] > 10)
        {
            [self.filteredArray addObject:arrayObject];
        }
    }
} 
```

然后`self.filteredArray`在你的`tableView`代表中使用。

# url - 使用 Safari 在 URL 中显示非 ASCII 字符

> ID：13513885
> 
> 赞同：2
> 
> 时间：2012-11-22T13:36:46.680
> 
> 标签：url, utf-8, safari

我正在一个需要生成包含非 ASCII 字符的 URL 的站点上工作，但在 Safari 中正确显示 URL 中的某些字符时遇到问题。我希望字符在写入时出现，但 Safari 显示的是 % 编码版本 - 我使用的是 Safari 版本 6.0.2。

例如，这里是西班牙语短语“el día después”的[链接](http://www.phraselist.net/items/74/el-d%C3%ADa-despu%C3%A9s)。如果您将鼠标悬停在或单击 Chrome 中的链接，它会在 URL 中正确显示重音字符“í”和“é”；但是，出于某种原因，Safari 会显示字符“í”的 % 编码版本。

要生成 URL，首先将文本编码为 UTF-8，然后进行 % 编码，我认为这是在 URL 中显示非 ASCII 字符的正确方法。

但是，如果您查看此[链接](https://chinese.stackexchange.com/questions/2471/how-did-%e5%a4%96%e5%9b%bd%e4%ba%ba-become-%e8%80%81%e5%a4%96)到中文 Stack Exchange 上的帖子，Safari*确实会*正确显示 URL 中的中文字符。

关于为什么 Safari 似乎没有在 URL 中显示重音字符（例如“í”）以及如何绕过它的任何想法？

# c# - 内部类库上的授权属性+验证属性

> ID：13513886
> 
> 赞同：0
> 
> 时间：2012-11-22T13:36:52.083
> 
> 标签：c#, asp.net-mvc-3, attributes, class-library

有没有办法将用于验证和安全的属性放入内层？
例如，我想将安全性放在 API 层中。
api 层只是控制器的一个注入类。

控制器调用 API。

```
api.Join(user);

class UserApi{
    //I want the attribute on a class library.
    [Authorized(Role....)]
    public void Join(User user){}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:54:01.823

在类库上，您可以使用[PrincipalPermissionAttribute](http://www.google.co.uk/#hl=en&sugexp=les%3B&gs_nf=3&cp=20&gs_id=2b&xhr=t&q=PrincipalPermissionAttribute&pf=p&tbo=d&sclient=psy-ab&oq=PrincipalPermissionA&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=f7107c3d0079a89d&bpcl=38897761&biw=1600&bih=742)。

```
[PrincipalPermission(SecurityAction.Demand, Role = "...")]
public void Join(User user){} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:48:34.083

你会想看看[Aspect Oriented Programming](http://en.wikipedia.org/wiki/Aspect-oriented_programming)，对于 .net[许多](https://stackoverflow.com/questions/4999144/aspect-oriented-programing-aop-solutions-for-c-sharp-net-and-their-features)人推荐使用[PostSharp](http://www.sharpcrafters.com/)

# iphone - 禁用 UIButton 而没有淡入淡出效果

> ID：13513887
> 
> 赞同：6
> 
> 时间：2012-11-22T13:36:55.340
> 
> 标签：iphone, objective-c, ios, uibutton

当我使用按钮禁用按钮时`Button.enabled = NO;`，它会淡出。

有可能预防吗？

我想禁用按钮的功能，但我希望它具有相同的外观。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-22T13:38:35.880

尝试使用

```
[Button setUserInteractionEnabled:NO]; 
```

希望对你有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:14:23.307

您可以阻止用户使用此按钮与按钮交互

```
yourButton.userInteractionEnabled = NO; 
```

# c# - C#：分析工具

> ID：13513888
> 
> 赞同：0
> 
> 时间：2012-11-22T13:36:57.213
> 
> 标签：c#, visual-studio-2010, code-analysis

我想知道 Visual Studio 2010 是否有任何工具可以检测死锁和引导项。我现在正在尝试 PostSharp。其他一些？我更喜欢免费软件，但我不会丢弃商业软件。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:43:25.837

您可以尝试使用 Visual Studio 中的性能向导。确保此工具已添加到 Ultimate 版本。使用此工具，您可以查看应用程序花费在哪种方法上的时间百分比。它有一个非常漂亮和清晰的布局。对我来说，有时它非常有用。如果您在 VS“分析”选项卡的“向上”菜单中可以找到它。

# random - Inform7：如何在inform7中创 建特定情况下的随机机会事件？

> ID：13513892
> 
> 赞同：1
> 
> 时间：2012-11-22T13:37:28.203
> 
> 标签：random, inform7

我想在我的 Inform7 游戏中创建一个功能：

当玩家决定向北穿过人行横道时，解说员会在第一时间向玩家提示玩家有可能会死亡，如果玩家再次向北输入，则该事件将发生并且以 2 分之一的随机概率成功，玩家将能够前往花园。像这样：

```
 Instead of going north in the road for the second time when a random chance of 1 in 2 succeeds:
        say "Yay! You made it!";
        now the player is in the Garden.

        otherwise:
        say "The car crashed you instantly - without any hope, you lost your whole strength in your body…";
        end the game in death. 
```

是的，这段代码不起作用..有人能帮我弄清楚如何使它工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-10T18:31:37.620

这段代码有两个问题：

1.  Inform 不允许`when`在`for the second time`. （您*可以*反过来写，如“当 2 中 1 的随机机会第二次成功时”，但这意味着不同：它会在随机机会第二次成功时触发规则，也就是说，玩家第二次在过马路时幸存下来。）

2.  `otherwise`必须是`if`陈述的一部分；它不能与`when`子句一起使用。

要修复代码，您只需将“随机机会”条件移动到`if`语句中，然后更改标点符号，以便两个备选方案都属于同一规则：

```
[I added these lines to make a complete example...]
Road is a room.

Garden is a room, north of Road.

Instead of going north in the road for the first time:
    say "The road looks dangerous. You hesitate a moment, unsure if you really want to take the risk."

[And here's the fixed rule:]
Instead of going north in the road for the second time:
    if a random chance of 1 in 2 succeeds:
        say "Yay! You made it!";
        now the player is in the Garden;
    otherwise:
        say "The car crashed you instantly - without any hope, you lost your whole strength in your body…";
        end the game in death.
```

# c# - 并发连接期间sharpssh“会话已关闭”

> ID：13513893
> 
> 赞同：2
> 
> 时间：2012-11-22T13:37:30.093
> 
> 标签：c#, ssh, .net-2.0, sharpssh

我正在将 SharpSSH 集成到现有的 .NET 2.0 项目中。所以不能切换到[http://sshnet.codeplex.com/](http://sshnet.codeplex.com/)或者其他更新的库...

我拥有与设备进行单一连接的一切工作，并且可以毫无问题地运行命令和上传文件。

但是因为这个工具必须能够同时更新多个设备，所以应用程序同时启动多个sharpssh连接。然后一切都继续工作，但有时文件没有完全上传，并抛出错误“会话已关闭”。

```
SshTransferProtocolBase tx = new Scp(_hostname, _username, _password);
tx.Connect();
tx.OnTransferProgress += new FileTransferEvent(tx_OnTransferProgress);

tx.Put(sshSource.FullName, "/tmp/" + Path.GetFileName(sshTarget));
// --> tx.Put throws the error 
```

当像这样用“new Sftp”替换“new Scp”时

```
SshTransferProtocolBase tx = new Sftp(_hostname, _username, _password); 
```

错误消息是：“输入流已关闭”或“会话已关闭”

关于如何避免这种情况的任何想法？

非常感谢，弗兰克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T07:33:04.393

我一直在努力解决同样的问题。在多处理期间出现“**会话已关闭**”错误是 SharpSSH 的一个已知问题。此库不再更新。[所以我建议你使用另一个SSH](https://github.com/sshnet/SSH.NET)库，例如 SSH.NET：https://github.com/sshnet/SSH.NET

它很容易使用。一个例子：

```
SshClient sshobject = new SshClient(OSShostIP, OSSusername, OSSpassword);
sshobject.Connect();
sshobject.RunCommand("mkdir /home/nedim");
sshobject.Disconnect(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T15:10:15.713

通过添加具有可定义的最大重试次数的重试循环来解决...

# c++ - 如何在 Linux 上将 googleTest 设置为共享库

> ID：13513905
> 
> 赞同：96
> 
> 时间：2012-11-22T13:38:10.923
> 
> 标签：c++, linux, unit-testing, installation, googletest

Debian 不再为 gTest 提供任何预编译的软件包。他们建议您将框架集成到项目的 makefile 中。但我想保持我的 makefile 干净。如何像以前的版本 (<1.6.0) 一样设置 gTest，以便可以链接到库？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-11-22T13:38:10.923

在开始之前，请确保您已阅读并理解 [Google 的此说明](https://github.com/google/googletest/blob/36066cfecf79267bdf46ff82ca6c3b052f8f633c/googletest/docs/faq.md#why-is-it-not-recommended-to-install-a-pre-compiled-copy-of-google-test-for-example-into-usrlocal)！本教程使 gtest 的使用变得容易，但可能会引入[令人讨厌的错误](https://stackoverflow.com/questions/9183540/linking-error-when-building-google-test-on-mac-commandline/20974890#20974890)。

## 1.获取googletest框架

```
wget https://github.com/google/googletest/archive/release-1.8.0.tar.gz 
```

或者[手拿](https://github.com/google/googletest/releases)。我不会维护这个小操作指南，所以如果你偶然发现它并且链接已经过时，请随时编辑它。

## 2\. 解压构建google test

```
tar xf release-1.8.0.tar.gz
cd googletest-release-1.8.0
cmake -DBUILD_SHARED_LIBS=ON .
make 
```

## 3\. 在您的系统上“安装”头文件和库。

此步骤可能因发行版而异，因此请确保将标头和库复制到正确的目录中。我通过检查[Debian 以前的 gtest 库](http://packages.debian.org/squeeze/amd64/libgtest-dev/filelist)的位置来实现这一点。但我确信有更好的方法来做到这一点。注意：`make install`很危险，不支持

```
sudo cp -a googletest/include/gtest /usr/include
sudo cp -a googlemock/gtest/libgtest_main.so googlemock/gtest/libgtest.so /usr/lib/ 
```

## 4.更新链接器的缓存

...并检查 GNU 链接器是否知道库

```
sudo ldconfig -v | grep gtest 
```

如果输出如下所示：

```
libgtest.so.0 -> libgtest.so.0.0.0
libgtest_main.so.0 -> libgtest_main.so.0.0.0 
```

那么一切都很好。

gTestframework 现在可以使用了。只是不要忘记通过设置`-lgtest`为链接器标志来将您的项目与库链接，如果您没有编写自己的测试主程序，则可以选择显式`-lgtest_main`标志。

从这里开始，您可能想访问 Google的[文档](https://github.com/google/googletest/blob/master/googletest/docs/primer.md)，以及有关该框架的[旧文档](https://chromium.googlesource.com/external/github.com/google/googletest/+/release-1.8.0/googletest/docs/Documentation.md)，以了解它是如何工作的。快乐编码！

***编辑：*** 这也适用于 OS X！请参阅[“如何在 OS X 上正确设置 googleTest”](https://stackoverflow.com/questions/20746232/how-to-properly-setup-googletest-on-os-x-mavericks/21045113#21045113)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2017-01-31T09:43:34.473

让我专门为 ubuntu 用户回答这个问题。首先安装 gtest 开发包。

```
sudo apt-get install libgtest-dev 
```

请注意，此软件包仅安装源文件。您必须自己编译代码以创建必要的库文件。这些源文件应位于 /usr/src/gtest。浏览到此文件夹并使用 cmake 编译库：

```
sudo apt-get install cmake # install cmake
cd /usr/src/gtest
sudo mkdir build
cd build
sudo cmake ..
sudo make
sudo make install 
```

现在要编译使用 gtest 的程序，您必须将其链接到：

```
-lgtest -lgtest_main -lpthread 
```

这在 Ubuntu 14.04LTS 上非常适合我。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-01-23T16:33:02.887

我花了一段时间才弄清楚这一点，因为正常的“make install”已被删除，我不使用 cmake。这里是我的经验分享。在工作中，我在 Linux 上没有 root 访问权限，所以我在我的主目录下安装了 Google 测试框架：`~/usr/gtest/`.

要将包安装在 ~/usr/gtest/ 中作为共享库，以及示例构建：

```
$ mkdir ~/temp
$ cd ~/temp
$ unzip gtest-1.7.0.zip 
$ cd gtest-1.7.0
$ mkdir mybuild
$ cd mybuild
$ cmake -DBUILD_SHARED_LIBS=ON -Dgtest_build_samples=ON -G"Unix Makefiles" ..
$ make
$ cp -r ../include/gtest ~/usr/gtest/include/
$ cp lib*.so ~/usr/gtest/lib 
```

要验证安装，请使用以下 test.c 作为简单的测试示例：

```
 #include <gtest/gtest.h>
    TEST(MathTest, TwoPlusTwoEqualsFour) {
        EXPECT_EQ(2 + 2, 4);
    }

    int main(int argc, char **argv) {
        ::testing::InitGoogleTest( &argc, argv );
        return RUN_ALL_TESTS();
    } 
```

编译：

```
 $ export GTEST_HOME=~/usr/gtest
    $ export LD_LIBRARY_PATH=$GTEST_HOME/lib:$LD_LIBRARY_PATH
    $ g++ -I $GTEST_HOME/include -L $GTEST_HOME/lib -lgtest -lgtest_main -lpthread test.cpp 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-11-22T13:51:12.027

如果你碰巧在使用 CMake，你可以按照[这里](https://stackoverflow.com/a/9695234/424459)[`ExternalProject_Add`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#module:ExternalProject)的描述使用。

这避免了您必须将 gtest 源代码保留在存储库中，或将其安装在任何地方。它会自动下载并构建在您的构建树中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-03-30T09:41:27.647

**Debian/Ubuntu 更新**

Google Mock (package: `google-mock`) 和 Google Test (package: `libgtest-dev`) 已合并。新包名为`googletest`. 两个旧名称仍可用于向后兼容，现在依赖于新包`googletest`。

因此，要从包存储库中获取库，您可以执行以下操作：

```
sudo apt-get install googletest -y
cd /usr/src/googletest
sudo mkdir build
cd build
sudo cmake ..
sudo make
sudo cp googlemock/*.a googlemock/gtest/*.a /usr/lib 
```

之后，您可以链接到`-lgmock`（`-lgmock_main`如果您不使用自定义 main 方法，也可以链接到）和`-lpthread`. 至少在我的情况下，这足以使用 Google Test。

如果您想要最新版本的 Google Test，请从 github 下载。之后，步骤类似：

```
git clone https://github.com/google/googletest
cd googletest
sudo mkdir build
cd build
sudo cmake ..
sudo make
sudo cp lib/*.a /usr/lib 
```

As you can see, the path where the libraries are created has changed. Keep in mind that the new path might be valid for the package repositories soon, too.

Instead of copying the libraries manually, you could use `sudo make install`. It "currently" works, but be aware that it did not always work in the past. Also, you don't have control over the target location when using this command and you might not want to pollute `/usr/lib`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-26T13:32:23.573

我同样对这种情况感到不知所措，最终为此制作了自己的 Ubuntu 源代码包。这些源代码包允许您轻松生成二进制包。它们基于本文最新的 gtest 和 gmock 源。

[谷歌测试DEB源码包](http://drake.redwyvern.com/files/gtest-1.7.0.tar.gz)

[Google Mock DEB 源码包](http://drake.redwyvern.com/files/gmock-1.7.0.tar.gz)

要构建二进制包，请执行以下操作：

```
tar -xzvf gtest-1.7.0.tar.gz
cd gtest-1.7.0
dpkg-source -x gtest_1.7.0-1.dsc
cd gtest-1.7.0
dpkg-buildpackage 
```

它可能会告诉您需要一些必备软件包，在这种情况下您只需要 apt-get 安装它们。除此之外，构建的 .deb 二进制包应该位于父目录中。

对于 GMock，过程是相同的。

作为旁注，虽然不是特定于我的源包，但在将 gtest 链接到您的单元测试时，请确保首先包含 gtest ( [https://bbs.archlinux.org/viewtopic.php?id=156639](https://bbs.archlinux.org/viewtopic.php?id=156639) ) 这似乎是常见的陷阱。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-23T14:30:09.880

以防万一其他人昨天（2016-06-22）遇到和我一样的情况，并且已经发布的方法也没有成功 -`Lubuntu 14.04`它使用以下命令链对我有用：

```
git clone https://github.com/google/googletest
cd googletest
cmake -DBUILD_SHARED_LIBS=ON .
make
cd googlemock
sudo cp ./libgmock_main.so ./gtest/libgtest.so gtest/libgtest_main.so ./libgmock.so /usr/lib/
sudo ldconfig 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-12-24T07:09:17.800

askubuntu 的这个答案对我有用。似乎比其他选项更容易出错，因为它使用包`libgtest-dev`来获取源代码并从那里构建：[https ://askubuntu.com/questions/145887/why-no-library-files-installed-for-google- test?answertab=votes#tab-top](https://askubuntu.com/questions/145887/why-no-library-files-installed-for-google-test?answertab=votes#tab-top)

请参考该答案，但作为捷径，我也在此处提供了步骤：

```
sudo apt-get install -y libgtest-dev
sudo apt-get install -y cmake
cd /usr/src/gtest
sudo cmake .
sudo make
sudo mv libg* /usr/lib/ 
```

之后，我可以毫无问题地构建我的项目`gtest`。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-06-28T06:37:41.510

以下方法避免了手动弄乱`/usr/lib`目录，同时还需要对文件进行最少的更改`CMakeLists.txt`。它还可以让您的包管理器干净地卸载`libgtest-dev`.

这个想法是，当你`libgtest-dev`通过

```
sudo apt install libgtest-dev 
```

源存储在位置`/usr/src/googletest`

您可以简单地将您`CMakeLists.txt`指向该目录，以便它可以找到必要的依赖项

只需替换`FindGTest`为`add_subdirectory(/usr/src/googletest gtest)`

最后，它应该看起来像这样

```
add_subdirectory(/usr/src/googletest gtest)
target_link_libraries(your_executable gtest) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-11-11T22:42:59.203

这将在基于 Ubuntu/Debian 的系统中安装 google 测试和模拟库：

```
sudo apt-get install google-mock 
```

在基于 debian 的图像中在谷歌云中测试。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-01-04T10:50:45.690

这将构建并安装 gtest 和 gmock 1.7.0：

```
mkdir /tmp/googleTestMock
tar -xvf googletest-release-1.7.0.tar.gz -C /tmp/googleTestMock
tar -xvf googlemock-release-1.7.0.tar.gz -C /tmp/googleTestMock
cd /tmp/googleTestMock
mv googletest-release-1.7.0 gtest
cd googlemock-release-1.7.0
cmake -DBUILD_SHARED_LIBS=ON .
make -j$(nproc)
sudo cp -a include/gmock /usr/include
sudo cp -a libgmock.so libgmock_main.so /usr/lib/
sudo cp -a ../gtest/include/gtest /usr/include
sudo cp -a gtest/libgtest.so gtest/libgtest_main.so /usr/lib/
sudo ldconfig 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-02-22T14:44:47.413

对于基于@ManuelSchneid3r 的回答的 1.8.1，我必须这样做：

```
wget github.com/google/googletar xf release-1.8.1.tar.gz 
tar xf release-1.8.1.tar.gz
cd googletest-release-1.8.1/
cmake -DBUILD_SHARED_LIBS=ON .
make 
```

然后我做了`make install`这似乎适用于 1.8.1，但遵循@ManuelSchneid3r 这意味着：

```
sudo cp -a googletest/include/gtest /usr/include
sudo cp -a googlemock/include/gmock /usr/include
sudo cp `find .|grep .so$` /usr/lib/ 
```

# css - 响应式网页设计：动态高度

> ID：13513906
> 
> 赞同：0
> 
> 时间：2012-11-22T13:38:14.323
> 
> 标签：css, responsive-design

我有以下页面作为响应式布局的示例：[flexible Grid](http://www.alistapart.com/d/responsive-web-design/ex/ex-site-flexible.html)

现在我希望我自己的项目与此页面上的图像一样。随着屏幕尺寸的减小，元素也应该调整大小。

对于这些元素的宽度，一切正常。但他们的身高不会改变。我想知道示例页面的作者是如何做到这一点的，因为他甚至没有在他的图像上使用单个高度属性。

这是我的代码：

*   HTML

    ```
    <div id="wrapper">  
    <ol>
        <li id="el-1" class="figure"><div class="element"><p class="heading">Lorem1</p></div></li>
        <li id="el-2" class="figure"><div class="element"><p class="heading">Lorem2</p></div></li>
        <li id="el-3" class="figure"><div class="element"><p class="heading">Lorem3</p></div></li>
        <li id="el-4" class="figure"><div class="element"><p class="heading">Lorem4</p></div></li>
        <li id="el-5" class="figure"><div class="element"><p class="heading">Lorem5</p></div></li>
        <li id="el-logo" class="figure"><div class="background"><p>LoremIpsum<br>Lorem</p></div></li>
        <li id="el-6" class="figure"><div class="element"><p class="heading">Lorem6</p></div></li>
        <li id="el-7" class="figure"><div class="element"><p class="heading">Lorem7</p></div></li>
        <li id="el-8" class="figure"><div class="element"><p class="heading">Lorem8</p></div></li>
        <li id="el-9" class="figure"><div class="element"><p class="heading">Lorem9</p></div></li>
        <li id="el-10" class="figure"><div class="element"><p class="heading">Lorem10</p></div></li>
    </ol> 
    ```

*   CSS

[http://nopaste.info/d8a051e767.html](http://nopaste.info/d8a051e767.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:05:36.080

示例页面正在使用图像，而您却没有。那你就不能拿它来举例子了。在您的情况下，如果您没有为您的 div 设置任何高度，它们将增长以使其内容适合。因此，要使它们一起调整大小，您可以使用表格或使用 javascript（例如检查匹配列）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:13:47.193

它的

```
img {
    max-width: 100%;
} 
```

在 ex-site-flexible.html 第 63 行。

它使图像与包含 A 的宽度一样宽，并且图像会自动正确缩放..

但是其他元素没有，因此您只能对图像执行此操作。

# c - MapViewOfFile 向子进程发送整数

> ID：13513908
> 
> 赞同：0
> 
> 时间：2012-11-22T13:38:19.020
> 
> 标签：c, windows, winapi, shared-memory

所以我试图将一个整数 a =3 从服务器端传递给客户端。问题是，当我在客户端对消息进行 printf 时，显示的值不是 3，而是一个随机数（类似于 19923） .我试图在服务器端通过值（＆a）传递a，但显示的值是心形。请查看该通信有什么问题。提前致谢。

```
 //Server
    #include <windows.h>
    #define BUF_SIZE 256
    LPSTR szMapName = "MyFileMappingObject";

    int main(void)
    {
        int a = 3;
        HANDLE hMapFile;
        LPVOID lpMapAddress;
        BOOL bRet;

        hMapFile = CreateFileMapping(
            INVALID_HANDLE_VALUE,         /* use swap, not a particular file */
            NULL,                     /* default security */
            PAGE_READWRITE,               /* read/write access */
            0,                        /* maximum object size (high-order DWORD) */
            1024,                     /* maximum object size (low-order DWORD) */
            szMapName);               /* name of mapping object */
        if (hMapFile == INVALID_HANDLE_VALUE){
                 printf("CreateFileMapping error %lu",GetLastError());
            }
        lpMapAddress = MapViewOfFile(
                hMapFile,         /* handle to map object */
                FILE_MAP_ALL_ACCESS,  /* read/write permission */
                0,            /* offset (high-order) */
                0,            /* offset (low-order) */
                0);
        if (lpMapAddress == NULL) 
                 printf("MapViewOfFile error");

        //ZeroMemory(lpMapAddress, strlen(szMsg) + 1);
        CopyMemory(lpMapAddress, a, sizeof(a));

        Sleep(10000);

        bRet = UnmapViewOfFile(lpMapAddress);
        if (bRet == FALSE)
                printf("UnampViewOfFile error");

        bRet = CloseHandle(hMapFile);
        if (bRet == FALSE)
                printf("CloseHandle error");

        return 0;
    }
//Client
#include <windows.h>
#include <stdio.h>
#define BUF_SIZE 256
LPSTR szMapName = "MyFileMappingObject";

int main(void)
{
    HANDLE hMapFile;
    LPVOID lpMapAddress;
    BOOL bRet;
    hMapFile = OpenFileMapping(
        FILE_MAP_ALL_ACCESS,                 /* read/write access */
        FALSE,                               /* do not inherit the name */
        szMapName);                          /* name of mapping object */ 

    if (hMapFile == INVALID_HANDLE_VALUE){
        printf("CreateFileMapping error %lu",GetLastError());
        return 1;
    }

    lpMapAddress = MapViewOfFile(
        hMapFile,       /* handle to map object */
        FILE_MAP_ALL_ACCESS,    /* read/write permission */
        0,          /* offset (high-order) */
        0,          /* offset (low-order) */
        0);

    if (lpMapAddress == NULL){
        printf("MapViewOfFile error %d",GetLastError());
        return 1;
    }

    printf("Message from server is: %d\n", lpMapAddress);

    bRet = UnmapViewOfFile(lpMapAddress);
    if (bRet == FALSE){
        printf("UnampViewOfFile");
        return 1;
    }
    bRet = CloseHandle(hMapFile);
    if (bRet == FALSE){ 
        printf("CloseHandle");
        return 1;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:12:36.740

这是不正确的：

```
printf("Message from server is: %d\n", lpMapAddress); 
```

与(a )`lpMapAddress`类型一样，因此这将打印指向的内存地址，而不是整数值。（只是要注意必须使用一个指针值来打印）。`LPVOID``void*``lpMapAddress``%p`

基于用于写入`int`共享内存的技术：

```
CopyMemory(lpMapAddress, a, sizeof(a)); 
```

提取`int`将是相反的：

```
int read_a;
CopyMemory(&read_a, lpMapAddress, sizeof(read_a));
printf("Message from server is: %d\n", read_a); 
```

请注意，以下行中缺少格式说明符：

```
printf("CreateFileMapping error",GetLastError()); 
```

应该：

```
printf("CreateFileMapping error: %lu", GetLastError()); 
```

# delphi - Delphi 7：如何在 BDE 数据库字段中搜索某些关键字

> ID：13513918
> 
> 赞同：0
> 
> 时间：2012-11-22T13:38:34.663
> 
> 标签：delphi, delphi-7, bde

我对 Delphi 非常陌生，并创建了一个简单的 BDE 数据库，其中包含以下字段：条目号、系统、错误、解决方案。我希望能够在“错误”字段中搜索任何关键字，并且包含该关键字的所有条目都应显示在另一个窗口中。

任何有关编码的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:49:17.053

您应该将 TDataSet 的 Filter 属性设置为类似`Error = '*keyword*'`. 假设关键字是在名为 Edit1 的 TEdit 控件中键入的，您将使用 Edit1Change 事件来触发过滤，如下所示：

```
procedure TForm1.Edit1Change(Sender: TObject);
  Table1.Filter := 'Error = ''' + Edit1.Text + '*''';
  Table1.Filtered := Edit1.Text <> '';
end; 
```

结果可以显示在数据感知网格中，例如 DBGrid。对于 Table1 和网格之间的连接，您需要一个 TDataSource 组件：Grid 链接到 Source，并且 Source 在其 DataSet 属性中保存 Table1。

将示例扩展到多个关键字的一种简单方法是使用逗号分隔：

```
procedure TForm1.Edit1Change(Sender: TObject);
var
  stlSep                                : TStringList;
  sFilter                               : string;
  i                                     : Integer;
begin
  stlSep := TStringList.Create;
  stlSep.CommaText := Edit1.Text;
  for i := 0 to stlSep.Count - 1 do
    sFilter := sFilter + ' or Error=''' + stlSep[i] + '*''';
  stlSep.Free;

  Table1.Filter := Copy(sFilter, 4, MaxInt);
  Table1.Filtered := Edit1.Text <> '';
  Table1.Open;
end; 
```

根据您的需要，您可能必须将 替换`or`为`and`.

# css - CSS3 变换 rotateY(180deg) - IE 后备

> ID：13513921
> 
> 赞同：0
> 
> 时间：2012-11-22T13:38:42.650
> 
> 标签：css, css-transitions

变换rotateY（180deg）是否有IE后备？需要一个3D翻转动画！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:11:30.510

我没有要测试的 IE8，但我认为这可能有效： (ie5.5+) filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);

[http://msdn.microsoft.com/en-us/library/ms532972%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms532972%28VS.85%29.aspx)

IE 的矩阵过滤器可能是另一种选择：http: [//msdn.microsoft.com/en-us/library/ms533014%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms533014%28VS.85%29.aspx)

当我在玩其他东西时，我从这个网站得到了答案：http: [//snook.ca/archives/html_and_css/css-text-rotation](http://snook.ca/archives/html_and_css/css-text-rotation)

个人使用 IE6-8 时，最适合我的标签是 display: none ;P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T14:59:25.013

我知道这个问题很老，但上周我遇到了同样的问题。你需要的是：

```
.flipHorizontal {
filter: "fliph";
} 
```

更具体地说，如果你想在 y 轴上连续旋转它，我创建了一个 jquery 插件来使用：

```
**
 * jQuery Rotate On Axis In IE Plugin 1.0.0
 *
 * Copyright (c) 2014 Aryeh Citron
 *
 * Licensed under MIT: http://www.opensource.org/licenses/mit-license.php
 */

(function ($)
{
    $.fn.rotateOnAxisInIE = function (options)
    {
        var settings = $.extend(
        {
            spinSpeed: "slow",
        }, options);

        return this.each(function ()
        {
            var startingInterval;
            switch (settings.spinSpeed)
            {
                case "slow": startingInterval = 0.006; break;
                case "medium": startingInterval = 0.01; break;
                case "fast": startingInterval = 0.03; break;
                default: startingInterval = 0.01; break;
            }

            var image = this;
            var imageWidth = 1;
            var gettingSmaller = true;
            var fullRotation = true;
            var interval = startingInterval;
            var increment = startingInterval / 4;
            var refreshRateInMilliseconds = 35;

            setInterval(function ()
            {
                $(image).css("msTransform", "scaleX(" + imageWidth + ")");
                if (gettingSmaller)
                {
                    interval = interval + increment;
                    imageWidth = imageWidth - interval;
                }
                else
                {
                    interval = interval - increment;
                    imageWidth = imageWidth + interval;
                }

                if (imageWidth <= 0)
                {
                    gettingSmaller = false;
                    if ($(image).css("filter") == "")
                        $(image).css("filter", "fliph");
                    else
                        $(image).css("filter", "");

                    imageWidth = 0.01;
                }
                if (imageWidth >= 1)
                {
                    gettingSmaller = true;
                }

                if (gettingSmaller && interval < 0)
                    interval = 0;

            }, refreshRateInMilliseconds);
        });
    };
}(jQuery)); 
```

示例用法

```
$("#myImageId").rotateOnAxisInIE(); 
```

或者

```
$("#myImageId").rotateOnAxisInIE({ spinSpeed: "fast" }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T13:47:18.497

您将需要使用过滤器

```
#rotate {
 -ms-transform:rotateY(180deg); //IE9
} 
```

# asp.net - 我可以使 sitemapPath 控件的最后一项不可点击吗？ASP.NET

> ID：13513924
> 
> 赞同：0
> 
> 时间：2012-11-22T13:38:52.490
> 
> 标签：asp.net, sitemap, sitemappath, web.sitemap

我使用 asp.net 内置的 SitemapPath 控件作为站点上的面包屑栏。SitemapPath 从 Web.Sitemap 文件中获取数据。目前，如果您单击 SitemapPath 上的最后一项，它将再次重新加载同一页面。

我可以使 SitemapPath 的最后一项不可点击，但其他项目仍可点击以避免用户点击最后一项。

谢谢，

大号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:48:33.137

[文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sitemappath.rendercurrentnodeaslink.aspx)建议这是[`RenderCurrentNodeAsLink`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sitemappath.rendercurrentnodeaslink.aspx)您要查找的属性，但默认值为`false`.

# installation - 安装或升级后 WIX 应用程序池不正确

> ID：13513925
> 
> 赞同：2
> 
> 时间：2012-11-22T13:38:57.247
> 
> 标签：installation, wix, wix3

在我们的 WIX 安装程序中，我们为各种组件创建了多个应用程序池，但是我们的 .net 1.1 应用程序池在安装完成后始终位于 .net 2.0 上。

这导致我们在每次安装和升级后手动将我们创建的应用程序池修复回 1.1。

我的问题是有没有办法让安装程序将其正确注册为 1.1 应用程序池，而不是将其更改为 2.0 应用程序池？

我们用于创建应用程序池的代码：

```
<Component Id ="WebApps.Component" Guid="{5F518238-F564-43ff-A249-F87C23E02B52}">
            <CreateFolder />
            <iis:WebAppPool
               Id="V1WebAppPool"
               Name=".Net 1.1 App Pool"
               ManagedRuntimeVersion="v1.1"
               Identity="networkService">
            </iis:WebAppPool>
            <iis:WebAppPool
               Id="V2WebAppPool"
               Name=".Net 2.0 App Pool"
               ManagedRuntimeVersion="v2.0"
               Identity="networkService">
            </iis:WebAppPool>
            <iis:WebAppPool
               Id="V4WebAppPool"
               Name=".Net 4.0 App Pool"
               ManagedRuntimeVersion="v4.0"
               Identity="networkService">
            </iis:WebAppPool>
         </Component> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:41:54.103

看看这个[为 ASP.NET Web 应用程序创建 WIX 安装程序](http://www.codeproject.com/Articles/115036/Creating-WIX-Installer-for-ASP-NET-Web-Application)

asp.net 版本的代码部分

```
 <!-- Switch ASP.NET to version 2.0 -->
    <CustomAction Id="MakeWepApp20" Directory="MYWEBWEBSITE" 
      ExeCommand="[ASPNETREGIIS] -norestart -s W3SVC/1/ROOT/[WEB_APP_NAME]" 
      Return="check"/>

    <InstallExecuteSequence>
        <Custom Action="MakeWepApp20" After="InstallFinalize">
               ASPNETREGIIS AND NOT Installed</Custom>
    </InstallExecuteSequence> 
```

设置 ASP 版本的是 CustomAction，您可以创建一个条件来运行正确的 CustomAction 以在版本之间切换。这是切换版本的[链接。](http://support.microsoft.com/kb/894435)

高温高压

# java - 如何在标有 CascadeType.ALL 的关系中添加持久化实体？

> ID：13513927
> 
> 赞同：1
> 
> 时间：2012-11-22T13:39:06.250
> 
> 标签：java, jpa-2.0, eclipselink, cascade

我有`Entity`一个双向`ManyToMany`关系（在同一实体上）标记为`CascadeType.ALL`.

以下是它查找`Contact`实体的方式：

```
@ManyToMany(cascade= CascadeType.ALL)
private List<Contact> parentContacts = new ArrayList<Contact>();
@ManyToMany(cascade= CascadeType.ALL, mappedBy="parentContacts")
private List<Contact> childContacts = new ArrayList<Contact>(); 
```

我在服务器端有一个方法可以保存这个实体：

```
public AltContact saveContact(EntityManager em, Contact contact, List<Contact> childs) {
    for (Contact c : childs) {
        contact.getChildContacts().add(c);
        c.getParentContacts().add(contact);
    }
    if (contact.getId() == null) {
        em.persist(contact);
    } else {
        contact = em.merge(contact);
    }
    return contact;
} 
```

如果列表中的`contact`或任何实体`childs`没有被持久化，它会很好用。但有时我需要对`saveContact`已经持久化的实体使用该方法，当我尝试这样做时，似乎 JPA 尝试持久化关系的所有实体，然后会引发异常：

```
Internal Exception: java.sql.SQLIntegrityConstraintViolationException 
```

事实上，它会尝试重新持久化和已经持久化的实体，因此`Contact`会违反 ID 字段的唯一性。

怎么能激活这个？我的方法有什么问题？

**我怎样才能使 Eclipselink/JPA 不尝试持久化作为关系的一部分并且已经持久化的实体？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:39:15.813

如果您的父联系人实体是新的，但一些子实体存在（但已分离），您不想在父实体上调用persist - 这将导致persist 级联到子实体，这是引发异常所必需的立即或在刷新/提交时。如果您希望在新的父联系人上调用 perist，那么您应该尝试找到现有的子级并将托管实例与新联系人相关联。如果它不存在，您可以单独持久化子对象或允许持久化关系级联来为您执行此操作。

不过，一般来说，只需对新的父联系人调用 merge 并让提供者确定它应该是更新还是插入要容易得多。由于合并级联到子级，它们也将被适当地插入或更新。

不过要小心使用级联。当你去删除一个父级时，它也会级联删除到子级，然后级联到其父集合中的每个父级。如果管理不当，可能会无意中删除所有联系人。另请注意，导致从列表中删除子项的更改可能无法正确级联 - 级联合并只能对当前在集合中的实体进行操作，而不是曾经存在的实体。因此，您可能需要在从父级集合中删除子级时手动调用合并，或确保它们已通过不同的路径合并调用。

# javascript - DOM .xml 属性的 Chrome 等效项

> ID：13513928
> 
> 赞同：0
> 
> 时间：2012-11-22T13:39:12.920
> 
> 标签：javascript, google-chrome, dom, xml-parsing, xmlhttprequest

请看一下[这个链接](http://www.w3schools.com/dom/prop_node_xml.asp)。它说 .xml DOM 属性仅适用于 Internet Explorer。

我的问题是 - 同一属性是否有任何 chrome 等价物？

下面是我试图解析的 xml -

```
<Message>
  <tag1 type=S1>
    <tag2>Text</tag2> 
  </tag1>
</Message> 
```

我想要实现的是将变量中“消息”节点的全部内容作为字符串读取。感谢你的帮助。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-01T18:00:05.690

在非 IE 浏览器中使用 XMLSerializer 对象

```
`function xmlToString(xmlInput)
{
   if (window.ActiveXObject)
      return xmlInput.xml;
   else
      return new XMLSerializer().serializeToString(xmlInput);
}` 
```

# c# - 检测重叠周期的算法

> ID：13513932
> 
> 赞同：520
> 
> 时间：2012-11-22T13:39:29.207
> 
> 标签：c#, .net, algorithm, datetime, time

我必须检测两个时间段是否重叠。
每个时期都有一个开始日期和一个结束日期。
我需要检测我的第一个时间段 (A) 是否与另一个时间段 (B/C) 重叠。
就我而言，如果 B 的开头等于 A 的结尾，则它们不重叠（反之亦然）
我发现以下情况：

![在此处输入图像描述](../Images/2d26bf12b8adc2755e1922bd349c4f63.png)

所以实际上我是这样做的：

```
tStartA < tStartB && tStartB < tEndA //For case 1
OR
tStartA < tEndB && tEndB <= tEndA //For case 2
OR
tStartB < tStartA  && tEndB > tEndA //For case 3 
```

（案例4在案例1或案例2中被记入账户）

它**有效**，但似乎效率不高。

因此，首先 C# 中有一个现有的类可以对此（时间段）进行建模，类似于时间跨度，但具有固定的开始日期。

`DateTime`其次：是否已经有可以处理这个问题的 ac# 代码（比如在课堂上）？

第三：如果不是，您将采取什么方法使这种比较最快？

* * *

## 回答 #1

> 赞同：909
> 
> 时间：2012-11-22T13:41:21.870

简单检查两个时间段是否重叠：

```
bool overlap = a.start < b.end && b.start < a.end; 
```

或在您的代码中：

```
bool overlap = tStartA < tEndB && tStartB < tEndA; 
```

（如果您改变主意不想说两个刚刚接触的时期重叠，请使用`<=`代替。）`<`

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-11-22T13:46:17.543

有一个很棒的库，对 CodeProject 有很好的评价：http: [//www.codeproject.com/Articles/168662/Time-Period-Library-for-NET](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET)

该库在重叠、相交等方面做了很多工作。复制/粘贴所有内容太大了，但我会看看哪些特定部分对您有用。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-11-22T13:50:58.717

您可以创建一个可重用的 Range 模式类：

```
public class Range<T> where T : IComparable
{
    readonly T min;
    readonly T max;

    public Range(T min, T max)
    {
        this.min = min;
        this.max = max;
    }

    public bool IsOverlapped(Range<T> other)
    {
        return Min.CompareTo(other.Max) < 0 && other.Min.CompareTo(Max) < 0;
    }

    public T Min { get { return min; } }
    public T Max { get { return max; } }
} 
```

您可以添加合并范围、获取交点等所需的所有方法...

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2015-11-04T10:51:56.140

我正在建立一个预订系统并找到了这个页面。我只对范围相交感兴趣，所以我建立了这个结构；玩 DateTime 范围就足够了。

您可以检查 Intersection 并检查特定日期是否在范围内，并获取交叉类型和最重要的：您可以获得 intersected Range。

```
public struct DateTimeRange
{

    #region Construction
    public DateTimeRange(DateTime start, DateTime end) {
        if (start>end) {
            throw new Exception("Invalid range edges.");
        }
        _Start = start;
        _End = end;
    }
    #endregion

    #region Properties
    private DateTime _Start;

    public DateTime Start {
        get { return _Start; }
        private set { _Start = value; }
    }
    private DateTime _End;

    public DateTime End {
        get { return _End; }
        private set { _End = value; }
    }
    #endregion

    #region Operators
    public static bool operator ==(DateTimeRange range1, DateTimeRange range2) {
        return range1.Equals(range2);
    }

    public static bool operator !=(DateTimeRange range1, DateTimeRange range2) {
        return !(range1 == range2);
    }
    public override bool Equals(object obj) {
        if (obj is DateTimeRange) {
            var range1 = this;
            var range2 = (DateTimeRange)obj;
            return range1.Start == range2.Start && range1.End == range2.End;
        }
        return base.Equals(obj);
    }
    public override int GetHashCode() {
        return base.GetHashCode();
    }
    #endregion

    #region Querying
    public bool Intersects(DateTimeRange range) {
        var type = GetIntersectionType(range);
        return type != IntersectionType.None;
    }
    public bool IsInRange(DateTime date) {
        return (date >= this.Start) && (date <= this.End);
    }
    public IntersectionType GetIntersectionType(DateTimeRange range) {
        if (this == range) {
            return IntersectionType.RangesEqauled;
        }
        else if (IsInRange(range.Start) && IsInRange(range.End)) {
            return IntersectionType.ContainedInRange;
        }
        else if (IsInRange(range.Start)) {
            return IntersectionType.StartsInRange;
        }
        else if (IsInRange(range.End)) {
            return IntersectionType.EndsInRange;
        }
        else if (range.IsInRange(this.Start) && range.IsInRange(this.End)) {
            return IntersectionType.ContainsRange;
        }
        return IntersectionType.None;
    }
    public DateTimeRange GetIntersection(DateTimeRange range) {
        var type = this.GetIntersectionType(range);
        if (type == IntersectionType.RangesEqauled || type==IntersectionType.ContainedInRange) {
            return range;
        }
        else if (type == IntersectionType.StartsInRange) {
            return new DateTimeRange(range.Start, this.End);
        }
        else if (type == IntersectionType.EndsInRange) {
            return new DateTimeRange(this.Start, range.End);
        }
        else if (type == IntersectionType.ContainsRange) {
            return this;
        }
        else {
            return default(DateTimeRange);
        }
    }
    #endregion

    public override string ToString() {
        return Start.ToString() + " - " + End.ToString();
    }
}
public enum IntersectionType
{
    /// <summary>
    /// No Intersection
    /// </summary>
    None = -1,
    /// <summary>
    /// Given range ends inside the range
    /// </summary>
    EndsInRange,
    /// <summary>
    /// Given range starts inside the range
    /// </summary>
    StartsInRange,
    /// <summary>
    /// Both ranges are equaled
    /// </summary>
    RangesEqauled,
    /// <summary>
    /// Given range contained in the range
    /// </summary>
    ContainedInRange,
    /// <summary>
    /// Given range contains the range
    /// </summary>
    ContainsRange,
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-10-27T09:50:02.613

此代码检查两个间隔是否重叠。

```
---------|---|
---|---|                > FALSE
xxxxxxxxxxxxxxxxxxxxxxxxx
-------|---|
---|---|                > FALSE
xxxxxxxxxxxxxxxxxxxxxxxxx
------|---|
---|---|                > TRUE
xxxxxxxxxxxxxxxxxxxxxxxxx
---|---|
---|--|                 > TRUE
xxxxxxxxxxxxxxxxxxxxxxxxx
----|---|
---|-----|              > TRUE
xxxxxxxxxxxxxxxxxxxxxxxxx
---|---|
----|-|                 > TRUE
xxxxxxxxxxxxxxxxxxxxxxxxx
---|---|
----|--|                > TRUE
xxxxxxxxxxxxxxxxxxxxxxxxx
---|---|
---|---|                > TRUE
xxxxxxxxxxxxxxxxxxxxxxxxx
---|---|
----|---|               > TRUE
xxxxxxxxxxxxxxxxxxxxxxxxx
---|---|
-------|---|            > FALSE
xxxxxxxxxxxxxxxxxxxxxxxxx
---|---|
--------|---|           > FALSE 
```

算法：

```
x1 < y2
and
x2 > y1 
```

例如 12:00 - 12:30 与 12:30 13:00 不重叠

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-06-18T08:17:10.510

这是我的解决方案：

```
public static bool OverlappingPeriods(DateTime aStart, DateTime aEnd,
                                      DateTime bStart, DateTime bEnd)
{
    if (aStart > aEnd)
        throw new ArgumentException("A start can not be after its end.");

    if(bStart > bEnd)
        throw new ArgumentException("B start can not be after its end.");

    return !((aEnd < bStart && aStart < bStart) ||
                (bEnd < aStart && bStart < aStart));
} 
```

我以 100% 的覆盖率对其进行了单元测试。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-22T13:46:32.690

自定义[区间树](http://en.wikipedia.org/wiki/Interval_tree)结构怎么样？您必须对其进行一些调整，以定义两个间隔在您的域中“重叠”的含义。

[这个问题](https://stackoverflow.com/questions/8773469/c-sharp-interval-tree-class)可能会帮助您在 C# 中找到现成的区间树实现。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-22T14:03:11.857

我不相信框架本身有这个类。可能是第三方库...

但是为什么不创建一个 Period 值对象类来处理这种复杂性呢？这样，您可以确保其他约束，例如验证开始与结束日期时间。就像是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Whatever.Domain.Timing {
    public class Period {
        public DateTime StartDateTime {get; private set;}
        public DateTime EndDateTime {get; private set;}

        public Period(DateTime StartDateTime, DateTime EndDateTime) {
            if (StartDateTime > EndDateTime)
                throw new InvalidPeriodException("End DateTime Must Be Greater Than Start DateTime!");
            this.StartDateTime = StartDateTime;
            this.EndDateTime = EndDateTime;
        }

        public bool Overlaps(Period anotherPeriod){
            return (this.StartDateTime < anotherPeriod.EndDateTime && anotherPeriod.StartDateTime < this.EndDateTime)
        }

        public TimeSpan GetDuration(){
            return EndDateTime - StartDateTime;
        }

    }

    public class InvalidPeriodException : Exception {
        public InvalidPeriodException(string Message) : base(Message) { }    
    }
} 
```

这样您就可以单独比较每个时期...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-04T11:48:57.070

检查这个简单的方法（建议把这个方法放在你的`dateUtility`

```
public static bool isOverlapDates(DateTime dtStartA, DateTime dtEndA, DateTime dtStartB, DateTime dtEndB)
        {
            return dtStartA < dtEndB && dtStartB < dtEndA;
        } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-11T13:25:32.037

```
public class ConcreteClassModel : BaseModel
{
... rest of class

public bool InersectsWith(ConcreteClassModel crm)
    {
        return !(this.StartDateDT > crm.EndDateDT || this.EndDateDT < crm.StartDateDT);
    }
}

[TestClass]
public class ConcreteClassTest
{
    [TestMethod]
    public void TestConcreteClass_IntersectsWith()
    {
        var sutPeriod = new ConcreteClassModel() { StartDateDT = new DateTime(2016, 02, 01), EndDateDT = new DateTime(2016, 02, 29) };

        var periodBeforeSutPeriod = new ConcreteClassModel() { StartDateDT = new DateTime(2016, 01, 01), EndDateDT = new DateTime(2016, 01, 31) };
        var periodWithEndInsideSutPeriod = new ConcreteClassModel() { StartDateDT = new DateTime(2016, 01, 10), EndDateDT = new DateTime(2016, 02, 10) };
        var periodSameAsSutPeriod = new ConcreteClassModel() { StartDateDT = new DateTime(2016, 02, 01), EndDateDT = new DateTime(2016, 02, 29) };

        var periodWithEndDaySameAsStartDaySutPeriod = new ConcreteClassModel() { StartDateDT = new DateTime(2016, 01, 01), EndDateDT = new DateTime(2016, 02, 01) };
        var periodWithStartDaySameAsEndDaySutPeriod = new ConcreteClassModel() { StartDateDT = new DateTime(2016, 02, 29), EndDateDT = new DateTime(2016, 03, 31) };
        var periodEnclosingSutPeriod = new ConcreteClassModel() { StartDateDT = new DateTime(2016, 01, 01), EndDateDT = new DateTime(2016, 03, 31) };

        var periodWithinSutPeriod = new ConcreteClassModel() { StartDateDT = new DateTime(2016, 02, 010), EndDateDT = new DateTime(2016, 02, 20) };
        var periodWithStartInsideSutPeriod = new ConcreteClassModel() { StartDateDT = new DateTime(2016, 02, 10), EndDateDT = new DateTime(2016, 03, 10) };
        var periodAfterSutPeriod = new ConcreteClassModel() { StartDateDT = new DateTime(2016, 03, 01), EndDateDT = new DateTime(2016, 03, 31) };

        Assert.IsFalse(sutPeriod.InersectsWith(periodBeforeSutPeriod), "sutPeriod.InersectsWith(periodBeforeSutPeriod) should be false");
        Assert.IsTrue(sutPeriod.InersectsWith(periodWithEndInsideSutPeriod), "sutPeriod.InersectsWith(periodEndInsideSutPeriod)should be true");
        Assert.IsTrue(sutPeriod.InersectsWith(periodSameAsSutPeriod), "sutPeriod.InersectsWith(periodSameAsSutPeriod) should be true");

        Assert.IsTrue(sutPeriod.InersectsWith(periodWithEndDaySameAsStartDaySutPeriod), "sutPeriod.InersectsWith(periodWithEndDaySameAsStartDaySutPeriod) should be true");
        Assert.IsTrue(sutPeriod.InersectsWith(periodWithStartDaySameAsEndDaySutPeriod), "sutPeriod.InersectsWith(periodWithStartDaySameAsEndDaySutPeriod) should be true");
        Assert.IsTrue(sutPeriod.InersectsWith(periodEnclosingSutPeriod), "sutPeriod.InersectsWith(periodEnclosingSutPeriod) should be true");

        Assert.IsTrue(sutPeriod.InersectsWith(periodWithinSutPeriod), "sutPeriod.InersectsWith(periodWithinSutPeriod) should be true");
        Assert.IsTrue(sutPeriod.InersectsWith(periodWithStartInsideSutPeriod), "sutPeriod.InersectsWith(periodStartInsideSutPeriod) should be true");
        Assert.IsFalse(sutPeriod.InersectsWith(periodAfterSutPeriod), "sutPeriod.InersectsWith(periodAfterSutPeriod) should be false");
    }
} 
```

感谢上述答案，它们帮助我为 MVC 项目编写上述代码。

注意 StartDateDT 和 EndDateDT 是 dateTime 类型

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-13T19:03:10.300

```
--logic FOR OVERLAPPING DATES
DECLARE @StartDate datetime  --Reference start date
DECLARE @EndDate datetime    --Reference end date
DECLARE @NewStartDate datetime --New Start date
DECLARE @NewEndDate datetime   --New End Date

Select 
(Case 
    when @StartDate is null 
        then @NewStartDate
    when (@StartDate<@NewStartDate and  @EndDate < @NewStartDate)
        then @NewStartDate
    when (@StartDate<@NewStartDate and  @EndDate > @NewEndDate)
        then @NewStartDate
    when (@StartDate<@NewStartDate and  @EndDate > @NewStartDate)
        then @NewStartDate  
    when (@StartDate>@NewStartDate and  @NewEndDate < @StartDate)
        then @NewStartDate
    else @StartDate end) as StartDate,  

(Case 
    when @EndDate is null   
        then @NewEndDate
    when (@EndDate>@NewEndDate and @Startdate < @NewEndDate)
        then @NewEndDate
    when (@EndDate>@NewEndDate and @Startdate > @NewEndDate)
        then @NewEndDate
    when (@EndDate<@NewEndDate and @NewStartDate > @EndDate)
        then @NewEndDate
    else @EndDate end) as EndDate 
```

[分配逻辑](https://i.stack.imgur.com/oc2a3.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-05-24T15:20:33.923

尝试这个。此方法将确定（两个）日期跨度是否重叠，无论方法输入参数的顺序如何。这也可以用于两个以上的日期跨度，通过单独检查每个日期跨度组合（例如，使用 3 个日期跨度，运行`span1`反对`span2`、`span2`反对`span3`和`span1`反对`span3`）：

```
public static class HelperFunctions
{
    public static bool AreSpansOverlapping(Tuple<DateTime,DateTime> span1, Tuple<DateTime,DateTime> span2, bool includeEndPoints)
    {
        if (span1 == null || span2 == null)
        {
            return false;
        }
        else if ((new DateTime[] { span1.Item1, span1.Item2, span2.Item1, span2.Item2 }).Any(v => v == DateTime.MinValue))
        {
            return false;
        }
        else
        {
            if (span1.Item1 > span1.Item2)
            {
                span1 = new Tuple<DateTime, DateTime>(span1.Item2, span1.Item1);
            }
            if (span2.Item1 > span2.Item2)
            {
                span2 = new Tuple<DateTime, DateTime>(span2.Item2, span2.Item1);
            }

            if (includeEndPoints)
            {
                return 
                ((
                    (span1.Item1 <= span2.Item1 && span1.Item2 >= span2.Item1) 
                    || (span1.Item1 <= span2.Item2 && span1.Item2 >= span2.Item2)
                ) || (
                    (span2.Item1 <= span1.Item1 && span2.Item2 >= span1.Item1) 
                    || (span2.Item1 <= span1.Item2 && span2.Item2 >= span1.Item2)
                ));
            }
            else
            {
                return 
                ((
                    (span1.Item1 < span2.Item1 && span1.Item2 > span2.Item1) 
                    || (span1.Item1 < span2.Item2 && span1.Item2 > span2.Item2)
                ) || (
                    (span2.Item1 < span1.Item1 && span2.Item2 > span1.Item1) 
                    || (span2.Item1 < span1.Item2 && span2.Item2 > span1.Item2)
                ) || (
                    span1.Item1 == span2.Item1 && span1.Item2 == span2.Item2
                ));
            }
        }
    }
} 
```

测试：

```
static void Main(string[] args)
{  
    Random r = new Random();

    DateTime d1;
    DateTime d2;
    DateTime d3;
    DateTime d4;

    for (int i = 0; i < 100; i++)
    {
        d1 = new DateTime(2012,1, r.Next(1,31));
        d2 = new DateTime(2012,1, r.Next(1,31));
        d3 = new DateTime(2012,1, r.Next(1,31));
        d4 = new DateTime(2012,1, r.Next(1,31));

        Console.WriteLine("span1 = " + d1.ToShortDateString() + " to " + d2.ToShortDateString());
        Console.WriteLine("span2 = " + d3.ToShortDateString() + " to " + d4.ToShortDateString());
        Console.Write("\t");
        Console.WriteLine(HelperFunctions.AreSpansOverlapping(
            new Tuple<DateTime, DateTime>(d1, d2),
            new Tuple<DateTime, DateTime>(d3, d4),
            true    //or use False, to ignore span's endpoints
            ).ToString());
        Console.WriteLine();
    }

    Console.WriteLine("COMPLETE");
    System.Console.ReadKey();
} 
```

# oracle - Oracle 序列值未排序

> ID：13513936
> 
> 赞同：11
> 
> 时间：2012-11-22T13:39:38.220
> 
> 标签：oracle, oracle10g, oracle11g

> **可能重复：**
> [Oracle RAC 和序列](https://stackoverflow.com/questions/4866959/oracle-rac-and-sequences)

我在本地环境中配置了 Oracle RAC。我分析了Sequnce的一个问题，就是nextVal生成的数字没有排序。假设我第一次获得值为 1 ，第二次获得值为 21 （我已将序列配置为默认 CACHE 20 和 NOORDER ）。

在搜索时，我找到了解决方案，我需要订购序列。我有疑问哪个是更好的选择，

1) 缓存和排序

2) NOCACHE 和 ORDER

我想知道以上哪一项是更好的选择，为什么？

其次，如果我将序列更改为 NOCACHE 而不考虑 ORDER/NOORDER，我能否实现排序。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-22T15:27:22.323

> 其次，如果我将序列更改为 NOCACHE 而不考虑 ORDER/NOORDER，我能否实现排序。

是的，因为 NOCACHE 是有效的，因为您在每次增量时强制写入 sys.seq$ 表，这也必须在节点上进行序列化。

--

我会在可能的重复中对已接受的答案提出异议。RAC 中的 CACHE + ORDER 和 NOCACHE 有很大的不同。您没有用 ORDER 否定 CACHE；只是降低了它的有效性。我个人看到中间层应用程序的性能急剧下降，因为他们在序列上使用 NOCACHE 并且一次在多个节点上访问。我们将他们的顺序切换到 ORDER CACHE（因为他们想要一个跨种族的顺序）。和性能大大提高。

总之：序列速度将从最快到最慢，如“CACHE NOORDER”->“CACHE ORDER”，远远落后于“NOCACHE”。

这也很容易测试：

所以我们从一个标准序列开始：

```
SQL> create sequence daz_test start with 1 increment by 1 cache 100 noorder;

Sequence created. 
```

即没有顺序的缓存。现在我们启动两个会话。我在此测试中使用 4 节点 RAC 数据库 10.2.0.4：

我的测试脚本很简单

```
select instance_number from v$instance;              
set serverout on
declare                                                     
 v_timer   timestamp with time zone := systimestamp;  
 v_num number(22);                                    
begin                                                  
 for idx in 1..100000                                 
 loop                                                 
   select daz_test.nextval into v_num from dual;      
 end loop;                                            
 dbms_output.put_line(systimestamp - v_timer);        
end;                                                   
/ 
/ 
```

现在我们运行第一个测试（CACHE NOORDER）：

```
SESSION 1                                       SESSION 2
SQL> @run_test                                  SQL> @run_test

INSTANCE_NUMBER                                 INSTANCE_NUMBER
---------------                                 ---------------
              2                                               1

PL/SQL procedure successfully completed.        PL/SQL procedure successfully completed.

PL/SQL procedure successfully completed.        PL/SQL procedure successfully completed.

SQL> @run_test                                  SQL> @run_test

INSTANCE_NUMBER                                 INSTANCE_NUMBER
---------------                                 ---------------
              2                                               1

+000000000 00:00:07.309916000                   +000000000 00:00:07.966913000

PL/SQL procedure successfully completed.        PL/SQL procedure successfully completed.

+000000000 00:00:08.430094000                   +000000000 00:00:07.341760000

PL/SQL procedure successfully completed.        PL/SQL procedure successfully completed. 
```

因此选择 100,000 次序列迭代需要 7-8 秒。

现在让我们试试 NOCACHE（ORDER 与 NOORDER 对此无关紧要，因为我们在每次调用序列时都强制写入 seq$）。

```
SQL> alter sequence daz_test nocache;

Sequence altered.

SESSION 1                                       SESSION 2
SQL> @run_test                                  SQL> @run_test

INSTANCE_NUMBER                                 INSTANCE_NUMBER
---------------                                 ---------------
              2                                               1

+000000000 00:08:20.040064000                   +000000000 00:08:15.227200000

PL/SQL procedure successfully completed.        PL/SQL procedure successfully completed.

+000000000 00:08:30.140277000                   +000000000 00:08:35.063616000

PL/SQL procedure successfully completed.        PL/SQL procedure successfully completed. 
```

所以对于同一个工作集，我们从 8 秒跳到了 8 分钟。

缓存+订单呢？

```
SQL> alter sequence daz_test cache 100 order;

Sequence altered.

SQL> @run_test                                  SQL> @run_test

INSTANCE_NUMBER                                 INSTANCE_NUMBER
---------------                                 ---------------
              2                                               1

+000000000 00:00:25.549392000                   +000000000 00:00:26.157107000

PL/SQL procedure successfully completed.        PL/SQL procedure successfully completed.

+000000000 00:00:26.057346000                   +000000000 00:00:25.919005000

PL/SQL procedure successfully completed.        PL/SQL procedure successfully completed. 
```

所以总而言之，100,000 次单次调用获取 CACHE NOORDER = 8 秒 NOCACHE = 8 分钟 CACHE ORDER = 25 秒

对于缓存顺序，oracle 确实在 RAC 节点之间进行了很多 ping 操作，但它*不必*将内容写回 seq$ 直到缓存大小用完，因为它全部在内存中完成。

如果我是你，我会设置一个适当的缓存大小（ps 高缓存大小不会给盒子内存带来负担，因为 oracle 不会将所有数字存储在 RAM 中；只有当前 + 最终数字）并考虑如果需要，请订购。

# excel - 如何使用 VBA 刷新单元格？

> ID：13513942
> 
> 赞同：4
> 
> 时间：2012-11-22T13:39:47.990
> 
> 标签：excel, vba

我正在使用出现在的所有解决方案：

[如何通过 VBA 刷新所有单元格](https://stackoverflow.com/questions/2370930/how-to-refresh-all-cell-through-vba)

[让 Excel 从 VBA 中刷新工作表上的数据](https://stackoverflow.com/questions/154434/how-do-you-get-excel-to-refresh-data-on-sheet-from-within-vba)

```
ActiveSheet.EnableCalculation = False  
ActiveSheet.EnableCalculation = True 
```

或者

```
Application.Calculate 
```

或者

```
Application.CalculateFull 
```

它们都不适用于 Excel 2010。当我转到单元格并右键单击刷新时，它可以工作。如何在 VBA 中刷新？

`Sheets("Name_of_sheet").Range("D424").Refresh`提出一个

> 异常 438

问题：

1.  如何使脚本支持 Excel 2003、2007、2010？
2.  如何使用 VBA 选择要刷新的源文件？

编辑：

1.  我想模拟鼠标右键单击并在菜单中选择刷新`worksheet 3`。这就是整个故事。

2.  我处理 10 年前创建的 Excel 文件。在 Excel 2010 中打开时，我可以转到一个单元格并右键单击它并选择刷新，然后选择要刷新的 .txt 文件。我正在尝试在 VBA 中自动执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:42:32.700

你可以尝试使用**[`Application.Calculation`](http://msdn.microsoft.com/en-us/library/office/ff821260%28v=office.14%29.aspx)**

```
Application.Calculation = xlCalculationManual
Application.Calculation = xlCalculationAutomatic 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T13:46:11.287

对于单个单元格，您可以使用：

`Range("D13").Calculate`

或者

```
Cells(13, "D").Calculate 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T05:52:22.317

我终于使用鼠标事件和击键来做到这一点：

```
Sheets("worksheet34").Select
Range("D15").Select
Application.WindowState = xlMaximized
SetCursorPos 200, 600 'set mouse position at 200, 600
Call mouse_event(MOUSEEVENTF_RIGHTDOWN, 0, 0, 0, 0) 'click left mouse
Application.SendKeys ("R") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-16T17:53:45.200

只是提醒;

使用时要小心

```
Application.Calculation = xlCalculationManual
Application.Calculation = xlCalculationAutomatic 
```

这将整个 excel 应用程序设置为自动或手动计算公式。如果你使用

```
Application.Calculation = xlCalculationManual 
```

您会注意到您的自动公式不再起作用。

干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-05T19:36:29.020

`Application.Calculate`对我的功能不起作用。甚至不跟随`DoEvents`。

我发现有效的是在单元格中**重新输入**公式。获取公式的一种简单方法是开始记录 a `macro`，使用`F2`编辑单元格，然后按`enter`。该宏将使用所有需要的引号对函数文本进行很好的复制。

下面是一个例子。

```
Sheets("Name_of_sheet").Range("D424").FormulaR1C1 = "=now()" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-05T11:16:09.383

您可以通过将单元格/范围标记为脏来强制 Excel 重新计算单元格或单元格范围。

例子 ：

' 重新计算 D4 列到 D24
Sheets("Name_of_sheet").Range("D4:D24").Dirty
或
' 重新计算单元格 D4
Sheets("Name_of_sheet").Range("D4").Dirty

# c# - 在c#中找出字符串日期的日期时间格式

> ID：13513944
> 
> 赞同：6
> 
> 时间：2012-11-22T13:39:52.647
> 
> 标签：c#, datetime, internationalization, globalization, cultureinfo

我正在申请。该应用程序使用日期格式，例如 `"2012-11-21 15:22:35"`.
我已经知道格式是`"yyyy-MM-dd HH:mm:ss"`. 但是如何以编程方式找到任意输入字符串的日期和时间格式？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-12T19:34:51.143

这可能会对您有所帮助..（在数组中，添加更多格式以进行检查）

```
string[] formats = {"M/d/yyyy", "MM/dd/yyyy",                                    
                            "d/M/yyyy", "dd/MM/yyyy", 
                            "yyyy/M/d", "yyyy/MM/dd",
                            "M-d-yyyy", "MM-dd-yyyy",                                    
                            "d-M-yyyy", "dd-MM-yyyy", 
                            "yyyy-M-d", "yyyy-MM-dd",
                            "M.d.yyyy", "MM.dd.yyyy",                                    
                            "d.M.yyyy", "dd.MM.yyyy", 
                            "yyyy.M.d", "yyyy.MM.dd",
                            "M,d,yyyy", "MM,dd,yyyy",                                    
                            "d,M,yyyy", "dd,MM,yyyy", 
                            "yyyy,M,d", "yyyy,MM,dd",
                            "M d yyyy", "MM dd yyyy",                                    
                            "d M yyyy", "dd MM yyyy", 
                            "yyyy M d", "yyyy MM dd"
                           };

        DateTime dateValue;

        foreach (string dateStringFormat in formats)
        {
            if (DateTime.TryParseExact(strDateTime, dateStringFormat,
                                       CultureInfo.InvariantCulture,
                                       DateTimeStyles.None,
                                       out dateValue))
                //Console.WriteLine("Converted '{0}' to {1}.", dateStringFormat, dateValue.ToString("yyyy-MM-dd"));                
                Console.WriteLine( dateStringFormat);
        } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T13:51:55.223

我认为您会遇到月份值 <= 12 的日期字符串的问题，因为这意味着该字符串的格式可能是`"yyyy-MM-dd"`或`"yyyy-dd-MM"`

除非您在解析器中设置首选项，否则无法知道哪个是正确的。

例如： `2012/08/07`-“这可能是七月还是八月？”

你可以暴力破解它，并希望有一个符合格式的 CultureInfo

```
 var datestring = "2012-10-05 12:00:03";
 DateTime time;
 var matchingCulture = CultureInfo.GetCultures(CultureTypes.AllCultures).FirstOrDefault(ci => DateTime.TryParse(datestring, ci, DateTimeStyles.None, out time)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T18:09:01.930

如果您想识别格式，几乎没有办法 100% 确定地做到这一点。但是，您可能想要浏览 given`CultureInfo`和`TryParse`它们支持的所有格式。不幸的是，这可能会产生不正确的结果，因为无法通过以下方式判断年、月和日：

> 2012 年 10 月 11 日

根据您的文化偏见，您可以将其解释为 2012 年 10 月 11 日；2012 年 11 月 10 日或 2010 年 11 月 12 日。

你还没有提到你想用这个日期做什么，所以我会给你常规的最佳实践：

1.  如果要在应用程序的不同模块之间传输日期，请使用不变的日期格式。
2.  如果您需要格式化日期和时间，请使用给定文化的默认日期格式。
3.  谈到默认日期格式，如果您想接受最终用户输入的日期，您可能希望以文化的默认格式解析自由格式输入，或者您可以创建（或使用预先存在的）日期时间选择器控件。后一种方法是优选的。

广告 1\. 要转换为不变的日期和时间格式，请使用：

```
DateTime now = DateTime.UtcNow;
string formatted = now.ToUniversalTime.ToString(CultureInfo.InvariantCulture); 
```

或（转换为[类似 ISO8601](http://en.wikipedia.org/wiki/ISO_8601)的格式）：

```
string formatted = now.ToString("u"); 
```

同样，您可以从不变格式解析 DateTime：

```
DateTime result;
string source = "11/20/2012 11:22:33";
if (DateTime.TryParse(source, CultureInfo.InvariantCulture, DateTimeStyles.AssumeUniversal, out result))
{
  // do something with result
} 
```

或（通用格式不需要 CultureInfo）：

```
DateTime result;
string source = "2012-11-20 11:22:33Z";
if (DateTime.TryParse(source, out result))
{
  // do something
} 
```

广告 2 和 3。特定文化的格式化和解析类似于格式化和解析不变日期，但您需要将 InvariantCulture 替换为检测到的特定实例，例如`CultureInfo.CurrentCulture`.

根据应用程序的类型，您可能希望使用专用的日历控件，即[jQuery UI Datepicker](http://jqueryui.com/demos/datepicker/)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-22T13:50:45.593

使用以下代码：

字符串 sysFormat = CultureInfo.CurrentCulture.DateTimeFormat;

# servlets - 多次刷新页面会使服务器停机

> ID：13513947
> 
> 赞同：0
> 
> 时间：2012-11-22T13:40:00.510
> 
> 标签：servlets, bandwidth

我有一个用 JSP/Servlets 开发的网站/webapp。主要是从数据库中收集数据，所以我首先运行 Servlet 来收集数据并将其发送到 JSP。**（工作正常）**问题是几分钟前我按住 F5 一段时间（即刷新页面好几次）。现在服务器已关闭，网站显示**服务暂时不可用**消息。账号的带宽限制是无限的，还是说账号超出了带宽限制。

谁能告诉我如何解决这个问题。我知道几分钟/几小时后就可以了，但我不希望我的用户再次看到此消息。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:00:54.510

设置一个标志，该标志在操作开始时设置为真。操作完成后重置标志

现在，如果用户试图离开刷新页面的页面，则会出现一个弹出窗口（可以使用 javascript 完成）。这不会让页面被刷新。

如果用户确认“您确定要离开页面”警报，则停止当前执行的进程。

# php - 使用 Youtube API 将视频移动到另一个媒体主机

> ID：13513949
> 
> 赞同：1
> 
> 时间：2012-11-22T13:40:00.260
> 
> 标签：php, youtube, download, private

我可以使用 Youtube API 或任何其他合法方式制作 PHP 脚本，将 mp4 文件从我自己的 youtube 频道直接复制到 Amazon S3 或其他媒体主机吗？

我需要这个，因为我的客户希望我制作能够从他的频道流式传输视频的原生 iPhone / Android 应用程序。

我知道我可以从 Youtube 网络手动完成，但问题是我只能在本地下载视频，然后再上传到亚马逊，这似乎是在浪费时间和资产。

# python - 一会儿用 Python 用 np.save 写一个大文件 True Loop

> ID：13513950
> 
> 赞同：1
> 
> 时间：2012-11-22T13:40:01.763
> 
> 标签：python, linux, numpy, cp

我正在使用 while True 循环抓取网站，然后将所有数据保存到带有 np.savez 的文件中。我想处理 npz 文件，但文件更新速度比我复制它的速度快。这是我的代码：

```
while True:
  time.sleep(1.5)
  for post in new:
    all_posts.append(post)
  np.savez('records.npz', posts)
  new = other_site.get_next() 
```

最初为了处理我正在抓取的数据，我只是复制文件，但现在文件太大而且每次都会损坏。我可以从头开始重新启动这个过程并减少保存的频率，这样我就有更多的时间来复制，但我想知道是否有办法恢复我写入的数据。我的另一个想法是截断文件的末尾，使其看起来仍然像一个 npz 文件，python 可以读取它，但我不知道这是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:59:20.080

为了避免您的文件被践踏或覆盖，为什么不编写一些 python 代码来避免这种情况呢？例如，您可以为每个站点保存到一个新文件，并将这些文件收集到一个目录中；

```
import os

os.mkdir('scraped_sites')

while True:
   time.sleep(1.5)
   for post in new:
      all_posts.append(post)

   # create a unique file path
   save_file = os.path.join('scraped_sites', 'records_%s.npz' % other_site)
   np.savez(save_file, all_posts)

   new = other_site.get_next() 
```

这样您的文件将永远不会被践踏，因此您不必担心在再次写入之前对其进行处理。如果您不喜欢为文件命名的想法，请查看[`tempfile`](http://docs.python.org/2/library/tempfile.html)

此外，`while True`可能很危险，因为您的循环永远不会退出 - 我假设您只是为了简洁而编写了这个，但是最好有一个`break`or`while <conditional`这样您就不会在中间文件写入时意外强制循环退出.

# jquery - Microsoft JScript 运行时错误：发布应用程序后未定义“jQuery”

> ID：13513952
> 
> 赞同：0
> 
> 时间：2012-11-22T13:40:04.597
> 
> 标签：jquery, asp.net-mvc

在发布之前它工作正常但是当我发布并运行它时给我一个名为 - Microsoft JScript runtime error: 'jQuery' is undefined 的错误。我在我的 Master Page 使用这些 .js。

```
 <script type="text/javascript" src="../../Scripts/chrome.js"></script>
<%-- <script type="text/javascript" src="../../Scripts/jquery.js"></script>--%>
<script type="text/javascript" src="../../Scripts/jquery-1.js"></script>
<script type="text/javascript" src="../../Scripts/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="../../Scripts/jquery.simplyscroll.min.js"></script>
<script type="text/javascript" src="../../Scripts/jquery.simplyscroll.js"></script>
<script type="text/javascript">
    (function ($) {
        $(function () {
            $("#scroller").simplyScroll();
        });
    })(jQuery);
</script>
<script type="text/javascript" src="../../Scripts/script.js"></script>
<script type="text/javascript" src="../../Scripts/coin-slider.min.js"></script> 
```

Visual Studio 2010 - 在 IE9 IE8 Google crome 中运行。任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:31:53.033

**你可以试试这个：**

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">window.jQuery || document.write('<script type="text/javascript" src="path/to/your/jquery"><\/script>')</script> 
```

这是使用 Google 托管的 jQuery，但在 Google 失败时，您可以退回到您的托管库。请尝试使用最新的 jquery [ *Current Release* : **v1.8.3** ]。你可以从[这里](http://jquery.com/)得到它。

# android - 如何在android的imageview中设置图像？

> ID：13513953
> 
> 赞同：21
> 
> 时间：2012-11-22T13:40:08.403
> 
> 标签：android, image, imageview

我想在 imageview 中显示一个图像，所以我创建了一个文件夹 -并将我的图像放在那里`drawable`。`res`类似的东西`apple.png`。然后我使用这段代码：

```
ImageView iv= (ImageView)findViewById(R.id.img_selected_image);
String path = getApplication().getFilesDir().getAbsolutePath();
InputStream is = new FileInputStream(path + "/apple.png");
Drawable icon = new BitmapDrawable(is);
Log.i("Fnord", "width="+icon.getIntrinsicWidth()+
     " height="+icon.getIntrinsicHeight());
iv.setImageDrawable(icon); 
```

但是当我运行它时，它说`apple.png`. `data/data/package-name/files`我想我把我的形象放在不合适的地方。我应该把我的形象放在哪里？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-11-22T13:42:01.763

您可以直接在您的 setimage 中给出图像名称，因为`iv.setImageResource(R.drawable.apple);`它应该是它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-22T13:55:49.417

使用以下代码，

```
 iv.setImageResource(getResources().getIdentifier("apple", "drawable", getPackageName())); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-31T05:03:06.433

除了在活动类中通过代码设置可绘制资源之外，您还可以在 XML 布局中设置：

代码如下：

```
<ImageView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/apple" /> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-23T09:14:00.897

```
// take variable of imageview

private ImageView mImageView;

//bind imageview with your xml's id

mImageView = (ImageView)findViewById(R.id.mImageView);

//set resource for imageview

mImageView.setImageResource(R.drawable.your_image_name); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-22T13:45:22.487

您放入 res/drawable 的图像由 Android 处理。您无需按照您的方式获取图像。在你的情况下，你可以简单地打电话`iv.setImageRessource(R.drawable.apple)`

要获取图像（而不是直接将其添加到 ImageView），您可以调用`Context.getRessources().getDrawable(R.drawable.apple)`以获取图像

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-03T06:20:10.123

> 如果您想将位图对象设置为图像视图，这里是简单的两行`

```
Bitmap bitmap=BitmapFactory.decodeResource(getResources(),R.drawable.sample_drawable_image);
image.setImageBitmap(bitmap); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-22T14:00:55.457

```
 ImageView iv= (ImageView)findViewById(R.id.img_selected_image);
        public static int getDrawable(Context context, String name)//method to get id
        {
         Assert.assertNotNull(context);
         Assert.assertNotNull(name);
        return context.getResources().getIdentifier(name,    //return id
            "your drawable", context.getPackageName());
        }
        image.setImageResource(int Id);//set id using this method 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-01-03T05:38:00.583

如果您`ImageView`从 Java 类创建

```
ImageView img = new ImageView(this);

//Here we are setting the image in image view
img.setImageResource(R.drawable.my_image); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-13T13:37:15.437

*1> 您可以从布局本身添加图像：*

```
<ImageView
                android:id="@+id/iv_your_image"
                android:layout_width="wrap_content"
                android:layout_height="25dp"
                android:background="@mipmap/your_image"
                android:padding="2dp" /> 
```

**或者**

*2>以编程方式在java类中：*

```
ImageView ivYouImage= (ImageView)findViewById(R.id.iv_your_image);
        ivYouImage.setImageResource(R.mipmap.ic_changeImage); 
```

**或** *片段*：

```
View rowView= inflater.inflate(R.layout.your_layout, null, true);

ImageView ivYouImage= (ImageView) rowView.findViewById(R.id.iv_your_image);
        ivYouImage.setImageResource(R.mipmap.ic_changeImage); 
```

# java - java中的内存泄漏（在while循环中）

> ID：13513956
> 
> 赞同：5
> 
> 时间：2012-11-22T13:40:26.813
> 
> 标签：java, memory, memory-leaks

```
public class MemoryLeakExample {
    public static void main(String[] args) {
        while (true) {
            System.gc();
        }
    }
} 
```

该程序中的内存泄漏如何？通过 NETBEANS 分析器进行监视时，内存逐渐增加。如果我错了，请指导我，感谢任何帮助。 **5 分钟之前使用的堆大小为：2257416 之后：2258360**

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T13:47:19.277

我运行了这段代码：

```
final Runtime rt = Runtime.getRuntime();
long before = System.currentTimeMillis();
while (true) {
  System.gc();
  long now = System.currentTimeMillis();
  if (now - before > 1000) {
    System.out.println(rt.totalMemory() + " " + rt.freeMemory());
    before = now;
  }
} 
```

它打印的数字是完全稳定的。在您的情况下，分析器本身正在使用分析数据占用内存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T13:54:45.363

> 通过 NETBEANS 分析器进行监视时，内存逐渐增加。

VisualVM 分析器使用内存进行分析。如果您执行内存分析，您可以看到使用的内存是发送到分析器的对象。

如果您使用商业分析器，例如 YourKit，它会将分析信​​息记录在本机内存中，因此不会影响堆的工作。

# wpf - 项目宽度跟随控件宽度的列表框

> ID：13513957
> 
> 赞同：4
> 
> 时间：2012-11-22T13:40:32.333
> 
> 标签：wpf, user-controls, listbox, grid, datatemplate

我正在构建一个 WPF 用户控件，其中包含一个列表，其项目显示为图标和文本。但是，文本有不同的长度，我希望它们水平滚动。相反，我希望项目与用户控件具有相同的宽度，并且文本显示为包裹（因此具有垂直滚动）。

这是我的 XAML

```
<UserControl x:Class="Demo.NotificationsWidget"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
   <Border CornerRadius="2" 
           BorderThickness="1" BorderBrush="LightGray"
           Background="White">
      <DockPanel LastChildFill="True">
         <TextBlock Text="Alerts" DockPanel.Dock="Top" Margin="5" FontSize="15"/>

         <ListBox Name="alertsList" DockPanel.Dock="Bottom" Margin="5"
               Grid.IsSharedSizeScope="True"
               HorizontalContentAlignment="Stretch"
               BorderThickness="0" 
               ItemsSource="{Binding}">
            <ListBox.ItemTemplate>
               <DataTemplate>
                  <Border BorderThickness="0,1,0,0" BorderBrush="Gray" Margin="5,0,5,5">
                     <Grid>
                        <Grid.ColumnDefinitions>
                           <ColumnDefinition SharedSizeGroup="col1" Width="40" />
                           <ColumnDefinition SharedSizeGroup="col2" Width="*" />
                        </Grid.ColumnDefinitions>

                        <Image Grid.Column="0" Source="{Binding Image}" Width="24" Height="24" Margin="5" />
                        <StackPanel Grid.Column="1" Orientation="Vertical" Margin="5">
                           <TextBlock Text="{Binding Title}" TextWrapping="Wrap" FontWeight="Bold" />
                           <TextBlock Text="{Binding Text}" TextWrapping="Wrap" />
                        </StackPanel>
                     </Grid>
                  </Border>
               </DataTemplate>
            </ListBox.ItemTemplate>
         </ListBox>
      </DockPanel>
   </Border>
</UserControl> 
```

这是一个带有包含此用户控件的窗口的图像。请注意，控件宽度随窗口宽度而变化。

![在此处输入图像描述](../Images/bb78827aac5fce1b8ac3d77fbd99eae8.png)

我想要的是当项目宽度超过列表宽度时，文本被换行（并且我得到列表的垂直滚动）。

我尝试`ScrollViewer.HorizontalScrollBarVisibility="Disabled"`为列表框添加，但唯一的结果是滚动被隐藏。列表项仍然具有相同的宽度（比控件的宽度长）。

如果我不够清楚，看看 twitter 如何在列表中显示推文，这就是我想要做的。谢谢。

**更新**：这基本上是我想要实现的目标：

![在此处输入图像描述](../Images/a9654930086cb80f350abe547e65baf8.png)

我可以通过显式设置数据模板网格中每一列的宽度来做到这一点。

```
<Grid.ColumnDefinitions>
   <ColumnDefinition SharedSizeGroup="col1" Width="40" />
   <ColumnDefinition SharedSizeGroup="col2" Width="200" />
</Grid.ColumnDefinitions> 
```

但是，重要的是列表和它的项目会在窗口调整大小时自动调整大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:48:27.600

在 TextBlock 上尝试：

```
Width="{Binding ElementName=alertsList, Path=ActualWidth}"> 
```

如果您需要脱掉一些，请参阅我对这个问题的回答

[GridViewColumn 宽度调整](https://stackoverflow.com/questions/9083933/gridviewcolumn-width-adjustment/9088071#9088071)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T07:45:58.050

我能够通过将 替换`Grid`为`DockPanel`.

```
 <ListBox.ItemTemplate>
           <DataTemplate>
              <Border BorderThickness="0,1,0,0" BorderBrush="Black" Margin="0,0,0,5">
                 <DockPanel LastChildFill="True">
                    <Image DockPanel.Dock="Left" Source="{Binding Image}" Width="24" Height="24" Margin="0,5,0,5"
                           VerticalAlignment="Top"/>

                    <StackPanel DockPanel.Dock="Right" Orientation="Vertical"
                                Margin="5,2,0,0"
                                VerticalAlignment="Top">
                       <TextBlock Text="{Binding Title}" TextWrapping="Wrap" FontWeight="Bold" />
                       <TextBlock Text="{Binding Text}" TextWrapping="Wrap" FontSize="12" Margin="0,2,0,0" />
                    </StackPanel>
                 </DockPanel>
              </Border>
           </DataTemplate>
        </ListBox.ItemTemplate> 
```

# c# - 对象上的方法调用不会引发异常

> ID：13513961
> 
> 赞同：1
> 
> 时间：2012-11-22T13:40:42.167
> 
> 标签：c#, asp.net, .net

这些天我遇到了[许多奇怪的情况](https://stackoverflow.com/questions/13306275/datatype-returned-varies-based-on-data-in-table):-)

我在 ASP.Net 应用程序中测试了以下两个代码。当字符串值为空时，代码 1 抛出异常（如预期）而代码 2 不抛出异常（与预期相反）。

1.  为什么“<strong>EVAL”在这种情况下不抛出异常？
2.  EVAL 会一直这样工作（即“没有例外”）还是只是运气？
3.  是否有任何 MSDN 参考表明“Eval”返回空字符串？

//**代码 1**：导致异常

```
 string test = Convert.ToString(subscriber.EncryptedSSN).Substring(0, Convert.ToString(subscriber.EncryptedSSN).Length >= 5 ? 5 : Convert.ToString(subscriber.EncryptedSSN).Length); 
```

//**代码2**：不抛出异常

```
 <%# Convert.ToString(Eval("EncryptedSSN")).Substring(0, Convert.ToString(Eval("EncryptedSSN")).Length  >= 5 ? 5 : Convert.ToString(Eval("EncryptedSSN")).Length)  %> 
```

**参考资料**：

1.  [DBNull 的评估检查不起作用](https://stackoverflow.com/questions/5224264/eval-check-for-dbnull-doesnt-work)
2.  [Convert.ToString 对于“NULL 对象”和“NULL 字符串”的行为不同](https://stackoverflow.com/questions/13514337/convert-tostring-behaves-differently-for-null-object-and-null-string)
3.  [返回的数据类型因表中的数据而异](https://stackoverflow.com/questions/13306275/datatype-returned-varies-based-on-data-in-table)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T13:51:02.303

您的情况似乎不正确。第一个在 .NET 4 上对我没有例外：

```
object foo = null;

string test = Convert.ToString(foo).Substring(0, Convert.ToString(foo).Length >= 5 ? 5 : Convert.ToString(foo).Length); 
```

这是因为`Convert.ToString()` [返回*"The string representation of value, or String.Empty if value is null"*](http://msdn.microsoft.com/en-us/library/astxcyeh.aspx)。

String.Empty 不是 null，它是一个长度为 0 的字符串，所以在其上调用方法时不会抛出异常。

一番搜索后，我来到了[这个页面](http://msdn.microsoft.com/en-us/library/ms178366.aspx)，一般解释了 ASP 中的数据绑定，它解释了*“在运行时，Eval 方法调用 DataBinder 对象的 Eval 方法”*。[`DataBinder.Eval()`](http://msdn.microsoft.com/en-us/library/4hx47hfe.aspx)返回一个对象，因此`Convert.ToString(Eval(Something))`至少会返回`String.Empty`，因此如果您尝试访问其结果的成员或属性，则不会抛出 NullReferenceException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:50:58.987

你的`Eval`评价是什么？也许它`String.Empty`不是 null ，在这种情况下你不会得到异常。

# php - MySQL 表结果处理另一个表结果

> ID：13513962
> 
> 赞同：1
> 
> 时间：2012-11-22T13:40:45.413
> 
> 标签：php, mysql

您将在下面找到我的代码，它不是全部，而是显示了重要的内容。我有一些自定义函数只是用来说明的。我的代码所做的是搜索 MySQL 表并根据当前会话用户 ID 显示所有结果。然后我遍历这些结果，并为每个结果搜索另一个表。这工作得很好，但我只是想看看是否有更好的方法来做到这一点，而不必循环和搜索每个结果行的表

```
<?php
$table_sql = "SELECT * FROM participation WHERE shop_id = '{$session->user_id}'";
$result = $database->query($table_sql);
$participation = array();
while ($row = $database->fetch_array($result)) {
        $participation[] = array (
                'shop_id'               => $row['shop_id'],
                'qpon_id'           => $row['qpon_id'],
                'distributor_id'        => $row['distributor_id']
        );
}
$qpons = array();
if (isset ($participation)) {
        if (!empty ($participation)) {
                foreach ($participation as $qpon) {
                        $table_sql = "SELECT * FROM qpons WHERE id = '{$qpon['qpon_id']}'";
                        $result = $database->query($table_sql);

                        while ($row = $database->fetch_array($result)) {
                                $qpons[] = array (
                                        'id'                    => $row['id'],
                                        'service'       => $row['service'],
                                        'start_date'    => $row['start_date'],
                                        'end_date'      => $row['end_date']
                                );
                        }
                }
        }
}

if (isset ($qpons)) {
if (!empty ($qpons)) {
foreach ($qpons as $value) {

echo '<tr>';
echo '<td>' . $value['service'] . '</td>';
echo '<td>' . $value['start_date'] . '</td>';
echo '<td>' . $value['end_date'] . '</td>';
echo '<td>' . $value['id'] . '</td>';
echo '<td class="action_icon"><a href="admin-edit.php?id=' . $value['id'] . '"><img src="images/icons/view.png" alt="View"></a></td>';
echo '</tr>';

}

} else {
echo '<tr>';
echo '<td>No Results Found!</td>';
echo '<td></td>';
echo '<td></td>';
echo '<td></td>';
echo '<td></td>';
echo '<td></td>';
echo '<td></td>';
echo '</tr>';
}

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:47:25.727

将所有这些放入带有`JOIN`子句的单个查询中会明显更快。

```
<?php
$table_sql = "SELECT q.* 
              FROM participation AS p
                  INNER JOIN qpons AS q ON p.qpon_id = q.id
              WHERE shop_id = '{$session->user_id}'";
while ($row = $database->fetch_array($result)) {
    $qpons[] = array (
        'id'                    => $row['id'],
        'service'       => $row['service'],
        'start_date'    => $row['start_date'],
        'end_date'      => $row['end_date']
    );
} 
```

# wpf - wpf动态数据显示中如何高亮标注指定点？

> ID：13513964
> 
> 赞同：3
> 
> 时间：2012-11-22T13:40:50.750
> 
> 标签：wpf, charts, points, dynamic-data-display

您知道如何突出显示图表中的指定点吗？
是否也可以显示此指定点的标签？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:12:44.463

您可以创建一个标记以显示在您想要强调的特定点！首先，实例化任何类型的 ElementPointMarker。您也许可以设置一个工具提示（为您的标签？），例如：

```
elementPointMarker.ToolTip = "I am a label!"; 
```

设置其余部分并将其添加到您的图表中：

```
plotter.Children.Add(elementPointMarker); 
```

如果要添加实际标签而不是工具提示，可以检查两件事。

1.  创建一个包含要在图表上显示的文本的新标记类。
2.  检查 D3 Canvas 的工作原理并在画布上的指定点插入标签。

# javascript - 正则表达式中缺少组？

> ID：13513979
> 
> 赞同：2
> 
> 时间：2012-11-22T13:41:33.060
> 
> 标签：javascript, regex

我有这个字符串： `"xvvv 123y"`

我想测试`replace`命令

所以我创建了：

`"xvvv 123y".match(/(v+).+?([0-9]+)/)`

结果 ：

`["vvv 123", "vvv", "123"]`//让我们记住这个数组。

一切都好。

*   现在说我想将匹配的文本替换为组 `$1`==>

    `"xvvv 123y".replace(/(v+).+?([0-9]+)/,'$1')`

    结果：`"xvvvy"`好的。

*   现在说我想将匹配的文本替换为组 `$2`==>

    `"xvvv 123y".replace(/(v+).+?([0-9]+)/,'$2')`

    结果：`"x123y"`好的。

*   现在说我想将匹配的文本替换为组 `$0` ==>

    ```
     ["vvv   123", "vvv", "123"]
                           ^ 
                           |
    I mean to ------------- 
    ```

    `"xvvv 123y".replace(/(v+).+?([0-9]+)/,'$0')`

    结果：`"x$0y"` **哎呀？**

为什么它不允许我将匹配的文本替换为第一个索引组？

# 编辑

如果**我无法访问它**，为什么它会返回第一个元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:47:18.137

返回值中的第一个元素`match`是表示完全匹配的字符串。该值可通过以下方式访问`$&`：

```
"xvvv 123y".replace(/(v+).+?([0-9]+)/, '$&');
// Result: ""xvvv 123y" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:44:48.120

您可以创建一个新的匹配组：

```
"xvvv 123y".replace(/((v+).+?([0-9]+))/,'$1') 
```

作为替代方案，您还可以使用替换功能

```
"xvvv 123y".replace(/(v+).+?([0-9]+)/,function(){
    return arguments[0];
}); 
```

或者使用 Rob 的回答方法

```
"xvvv 123y".replace(/(v+).+?([0-9]+)/, '$&'); 
```

# asp.net-mvc - 如何渲染来自 Helper 的 HtmlTable

> ID：13513982
> 
> 赞同：1
> 
> 时间：2012-11-22T13:41:36.513
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0

我有一个返回 htmlTable 以供查看的助手。编码：

```
public static HtmlTable Sales(this HtmlHelper helper)
        {
            HtmlTable tabela = new HtmlTable();
            HtmlTableRow rowHeader = new HtmlTableRow();
            HtmlTableCell cellCode = new HtmlTableCell();
            HtmlTableCell cellUnd = new HtmlTableCell();
            HtmlTableCell cellDescription = new HtmlTableCell();
            HtmlTableCell cellQtd = new HtmlTableCell();

            tabela.Width = "800px";

            cellCode.InnerText = "Código";
            cellUnd.InnerText = "Unidade";
            cellDescription.InnerText = "Descrição";
            cellQtd.InnerText = "QTD";

            cellCode.Focus();

            rowHeader.Cells.Add(cellCode);
            rowHeader.Cells.Add(cellUnd);
            rowHeader.Cells.Add(cellDescription);
            rowHeader.Cells.Add(cellQtd);

            tabela.Rows.Add(rowHeader);

            return tabela;
        } 
```

但我的观点只是：

```
System.Web.UI.HtmlControls.HtmlTable 
```

我的回报是 HtmlTable，如何在视图中呈现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:45:02.180

如评论中所述，此答案仅在您使用 Razor ViewEngine 时适用。

问题是 Razor 引擎不知道如何处理`System.Web.UI.HtmlControls.HtmlTable`

您应该尝试使用常规 HTML 标记来构建表格，例如：

```
public static MvcHtmlString Sales(this HtmlHelper helper)
        {

            MvcHtmlString tabela = new MvcHtmlString(@"
<table style=""width: 800px"">
    <thead>
        <tr>
            <th>Código</th>
            <th>Unidade</th>
            <th>Descrição</th>
            <th>QTD</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>
");

            return tabela;
        } 
```

然后，您可以传递您的数据并用您的值填充表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:51:05.457

视图用于包含 html 输出。使用不同的“帮助器”（？）方法不会帮助您使您的代码无法维护。

# php - 在页面加载/点击时保存 url 参数

> ID：13513996
> 
> 赞同：0
> 
> 时间：2012-11-22T13:42:17.060
> 
> 标签：php, file, url, parameters

```
<a href="http://www.example.co.uk?id=<?=rand(1, 1000000); ?>"> .... 
```

我有这个链接，每次刷新页面或每次实际单击链接时（以最简单的为准），我都需要将随机 id 保存到文本文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:44:35.530

参见[fopen()](http://www.php.net/manual/en/function.fopen.php)和[fwrite()](http://php.net/manual/en/function.fwrite.php)来处理文件。在询问之前，请在 google 或其他网站或[php.net](http://www.php.net)上进行一些研究：D