# StackOverflow 问答 13036000-13036999

# c# - 在一个 WCF 调用中更新多个实体，而不是为每个实体点击 WCF 服务进行更新

> ID：13036009
> 
> 赞同：1
> 
> 时间：2012-10-23T17:28:22.890
> 
> 标签：c#, wcf, entity-framework

我在一个多层应用程序上工作，我需要通过三种方式优化一个长期运行的流程：

1.  避免 EF 更新并发问题。
2.  提高速度。
3.  通知用户进度。

**实际上，客户端代码使用完成所有工作**的方法调用 WCF 服务（*评估要更新的实体的数量*、*查询要更新的实体*、*更新它们*，最后*将它们保存回数据库*）。

这个过程很长，**除了过程完成后的最终结果外，什么都不会发回给用户**。用户可以在等待表单前停留长达 10 分钟，而不知道发生了什么。

查询实体的数量和深度可能会变得非常大，我有时会遇到 OutOfMemoryExceptions。我不得不更改服务方法来一次处理 100 个实体更新，所以我的 DbContext 会经常刷新，不会变得太大。

我的实际问题是每次更新实体时我都无法通知用户，因为**我的服务方法会在将结果返回给用户之前完成整个过程。**

我阅读了有关实现双工服务的信息，但由于我必须向用户返回**两个不同的回调**（一个回调*返回要更新的实体数量，*另一个回调返回*每个实体更新的结果*）我必须在一个通用回调接口，它变得有点混乱（嗯，我的口味）。

有一个 WCF 服务方法来返回要评估的实体的数量，另一个 WCF 方法将返回一个简单的实体更新结果，每个实体都会被更新，这不是更好吗？我的 DBContext 将仅在单个实体更新时存在，因此它不会增长太多，我认为这很好。**但是，我担心在此过程中经常会遇到 WCF 服务**。

你有什么想法？你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:54:25.167

1.  避免 EF 更新并发问题。

    请参阅此问题/答案[长时间运行的实体框架事务](https://stackoverflow.com/questions/6180466/long-running-entity-framework-transaction)

2.  提高速度。

    一些建议：

    *   尝试使用 SQL Profiler 查看正在执行的 SQL 查询，并优化 linq 查询
    *   或者尝试改进查询本身或调用存储过程。
    *   更新可以并行进行吗？不同的线程？不同的处理器？
3.  通知用户进度。

    我建议将客户端更改为调用异步方法，或然后异步启动长时间运行的操作的方法。这将立即将控制权返回给客户端。然后由长期运行的操作来提供有关其进度的反馈。

    请参阅本文以[从后台线程更新进度](http://www.codeproject.com/Articles/99143/BackgroundWorker-Class-Sample-for-Beginners)

    *更新*
    我建议的“架构”如下：

```
              . 服务 。. .
    ________ 。_________ _______ ____
   | | . | WCF | | 英孚 | | |
   | 客户 |---->| 服务 |->| 类 |->| 数据库 |
   |________| . |_________| |_______| |____|
              .
              . .

```

WCF 服务仅负责接受客户端请求，并在 EF 类中启动长时间运行的操作。客户端应向 WCF 服务发送异步请求，以便它保持控制和响应能力。EF 类负责更新数据库，您可以选择一次更新**全部**或**子集**或记录。然后，EF 类可以根据需要通过 WCF 服务通知客户端它已取得的任何进展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T02:42:36.310

您是否考虑过将 WCF 主机添加到您的客户端？这样你就可以得到完整的双向通讯。

客户端连接到服务器并将服务器连接详细信息返回给客户端客户
端请求长时间运行操作以开始
服务器随着工作的进行向客户端 WCF 主机发送多个更新。
服务器将完成的工作发送给客户端。

这使您的客户端可以自由地做其他事情，根据您认为合适的方式使用来自服务器的消息。可能会在消息进入时更新状态区域。

您甚至可以让服务器维护一个客户端列表并向所有客户端发送更新。

--------编辑---------
当我说 WCF 主机时，我的意思是[ServiceHost](http://msdn.microsoft.com/en-us/library/ms553788%28v=vs.90%29.aspx) 它可以从 App.config 中的 XML 或直接通过代码自动创建。

```
var myUri = new Uri[0];
myUri[0] = new Uri("net.tcp://localhost:4000");
var someService = new SomeService(); //implements ISomeService interface
var host = new ServiceHost(someService, myUri);
var binding = new NetTcpBinding(); // need to configure this
host.AddServiceEndpoint(typeof(ISomeService), binding, "");
host.Open(); 
```

代理是我用来描述客户端用来连接服务器的术语，它是在我遇到的一个早期示例中，从那以后它就一直困扰着我。同样可以通过两种方式创建。

```
var binding = new NetTcpBinding(); // need to configure this
var endpointAddress = new EndpointAddress("net.tcp://localhost:4000");
var factory = new ChannelFactory<ISomeService>(binding, endpointAddress);
var proxy = factory.CreateChannel();
proxy.DoSomeWork(); 
```

因此，在典型的客户端/服务器应用程序中，您拥有

```
CLIENT APP 1       SERVER APP         CLIENT APP 2
proxy------------->ServiceHost<-------proxy 
```

我的建议是您也可以使客户端成为“服务器”

```
CLIENT APP 1       SERVER APP         CLIENT APP 2
proxy------------->ServiceHostA<------proxy
ServiceHostB<------proxy1
                   proxy2------------>ServiceHostB 
```

如果您这样做，您仍然可以根据需要将大型任务拆分为较小的任务（您提到了内存问题），但从事情的声音来看，它们仍然可能需要一些时间，这样进度更新仍然可以发送回客户端或如果您希望每个人都知道正在发生的事情，甚至是所有客户。不需要回调，但您仍然可以根据需要使用它们。

# ios - 在自定义弹出转场期间视图转换没有动画

> ID：13036014
> 
> 赞同：1
> 
> 时间：2012-10-23T17:28:39.313
> 
> 标签：ios, uistoryboardsegue

当我将新视图控制器推送到我的导航堆栈时，我正在使用自定义 segue 创建展开动画。如果调用时没有指定 sourceRect `prepareForSegue:sender:`，则目标视图控制器从源视图控制器的中心展开。

**展开Segue.m：**

```
- (id)initWithIdentifier:(NSString *)identifier source:(UIViewController *)source destination:(UIViewController *)destination {
    self = [super initWithIdentifier:identifier source:source destination:destination];

    self.sourceRect = CGRectMake(source.view.center.x, source.view.center.y, 0.0, 0.0);

    return self;
}

- (void)perform {
    UIViewController *sourceViewController = (UIViewController *)self.sourceViewController;
    UIViewController *destinationViewController = (UIViewController *)self.destinationViewController;

    CGRect destinationRect = sourceViewController.view.frame;
    CGFloat tx = self.sourceRect.origin.x + self.sourceRect.size.width/2 - destinationRect.origin.x - destinationRect.size.width/2;
    CGFloat ty = self.sourceRect.origin.y + self.sourceRect.size.height/2 - destinationRect.origin.y - destinationRect.size.height/2;
    CGFloat sx = self.sourceRect.size.width/destinationRect.size.width;
    CGFloat sy = self.sourceRect.size.height/destinationRect.size.height;

    [sourceViewController.view addSubview:destinationViewController.view];
    [destinationViewController.view setFrame:sourceViewController.view.frame];
    [destinationViewController.view setTransform:CGAffineTransformConcat(CGAffineTransformMakeScale(sx, sy), CGAffineTransformMakeTranslation(tx, ty))];

    [UIView animateWithDuration:0.5
                          delay:0.0
                        options:UIViewAnimationCurveEaseOut
                     animations:^{
                         [destinationViewController.view setTransform:CGAffineTransformIdentity];
                     } completion:^(BOOL finished) {
                         [destinationViewController.view removeFromSuperview];
                         [sourceViewController.navigationController pushViewController:destinationViewController animated:NO];
                     }];
} 
```

扩展转场按预期工作。我试图通过反转展开转场的逻辑来创建折叠转场，但这给我带来了问题。我希望源视图控制器缩小到目标矩形的大小。如果没有提供destinationRect，那么我希望视图缩小到目标视图控制器视图的中心。

**CollapseSegue.m：**

```
- (id)initWithIdentifier:(NSString *)identifier source:(UIViewController *)source destination:(UIViewController *)destination {
    self = [super initWithIdentifier:identifier source:source destination:destination];

    self.destinationRect = CGRectMake(source.view.center.x, source.view.center.y, 0.0, 0.0);

    return self;
}

- (void)perform {
    UIViewController *sourceViewController = (UIViewController *)self.sourceViewController;
    UIViewController *destinationViewController = (UIViewController *)self.destinationViewController;

    CGRect sourceRect = sourceViewController.view.frame;
    CGFloat tx = self.destinationRect.origin.x + self.destinationRect.size.width/2 - sourceRect.origin.x - sourceRect.size.width/2;
    CGFloat ty = self.destinationRect.origin.y + self.destinationRect.size.height/2 - sourceRect.origin.y - sourceRect.size.height/2;
    CGFloat sx = self.destinationRect.size.width/sourceRect.size.width;
    CGFloat sy = self.destinationRect.size.height/sourceRect.size.height;

    [sourceViewController.navigationController popViewControllerAnimated:NO];
    [destinationViewController.view addSubview:sourceViewController.view];
    [sourceViewController.view setFrame:destinationViewController.view.frame];

    [UIView animateWithDuration:0.5
                          delay:0.0
                        options:UIViewAnimationCurveEaseOut
                     animations:^{
                         [sourceViewController.view setTransform:CGAffineTransformConcat(CGAffineTransformMakeScale(sx, sy), CGAffineTransformMakeTranslation(tx, ty))];
                     } completion:^(BOOL finished) {
                         [sourceViewController.view removeFromSuperview];
                     }];
} 
```

sourceViewController 的视图并没有很好地制作动画，而是简单地消失了，好像我只调用了`[sourceViewController.navigationController popViewControllerAnimated:NO];`这似乎表明我没有正确设置视图层次结构，但我似乎无法弄清楚我哪里出错了！任何帮助将不胜感激。

# javascript - 重新加载页面后保留复选框

> ID：13036023
> 
> 赞同：2
> 
> 时间：2012-10-23T17:29:02.547
> 
> 标签：javascript, jquery, html

我试图在选中或取消选中复选框以及检查和取消选中的 if 语句后重新加载后保留复选框状态。我做错了什么或最好的方法是什么？

```
$('.js-bbCheckbox').click(function(event) {

    $('.js-bbCheckbox').change(function(){
            if($(this).is(':checked')){
                window.location = '?filter=topRated'; 

            }else{
                window.location = '?filter=nottopRated';
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:39:48.170

这不是完全错误的，因为它会起作用。但是一旦用户关闭页面并再次打开它，复选框将具有其默认状态。

如果您想在会话之间保留复选框的状态，您可以使用 cookie。您可以使用该`document.cookie`属性使用 JavaScript 设置 cookie，但您最好查一下，因为它有点复杂。

但是，如果您在此应用程序上使用任何服务器端技术，则可以从那里设置 cookie。例如，在 PHP 中它会是这样的：

```
$_COOKIE['checkbox-topRated'] = isset($_GET['topRated']); 
```

然后，当您打印复选框时，您会检查该 cookie 是否为真。那会是这样的：

```
$checked = '';
if ($_COOKIE['checkbox-topRated']) {
    $checked = ' checked="checked"';
}

echo '<type input="checkbox" name="topRated"'.$checked.'>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:57:49.540

因此，您可以设置位置，但您需要页面根据过滤器更改复选框。这样，您就不需要保存 cookie。

```
 $(document).ready(function () {
        var topRated = new RegExp("[?|&]filter=topRated");
        $('.js-bbCheckbox').prop('checked', function () {
            var filter = window.location.search.match(topRated);
            return filter != null;
        }).change(function () {
            window.location = $(this).is(':checked') ? '?filter=topRated' : window.location.toString().replace(topRated, "");
        });
    }); 
```

# java - 获取 YouTube 视频的交互式脚本

> ID：13036024
> 
> 赞同：1
> 
> 时间：2012-10-23T17:29:05.943
> 
> 标签：java, youtube-api

我正在尝试从 YouTube 的 Java API 获取视频的交互式脚本（如果可用），但这样做收效甚微，因为我找不到通过 API 获取它的方法。

因此，在使用 JSoup 获取页面后，我尝试使用 HTML 解析器解析页面（搜索 id = "transcript-scrollbox" 的元素），但这不起作用，因为页面不包含任何具有此 id 的元素。

```
Document doc = Jsoup.connect(pageUrl).get();

Element transcriptScrollBox = 

doc.select("div[transcript-scrollbox]").first();
//doc.getElementById("div#transcript-scrollbox");
if(transcriptScrollBox!=null)
  System.out.println("element in trnascript = " + transcriptScrollBox.text()); 
```

例如，在可汗学院关于概率的[视频](http://www.youtube.com/watch?v=3ER8OkqBdpE)中，有一个按钮可以显示该视频的交互式脚本。我获取了此 URL 的页面内容，然后尝试搜索该元素。交互式脚本是否不是页面的一部分（可能是，因为元素 transcriptScrollBox 始终为空）。如果是，那么我该如何获取数据？

谁能指出我的方向或帮助我实现目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:07:12.137

我们不会通过 YouTube API 公开这些数据，我也不能提倡任何自动抓取 YouTube 网站的解决方案。很抱歉让您失望了。

# c# - 动态 Razor 数据源

> ID：13036029
> 
> 赞同：2
> 
> 时间：2012-10-23T17:29:20.857
> 
> 标签：c#, razor

我正在尝试将 Razor Engine 用作独立的模板引擎。这很好用，只是我不知道哪些属性将传递给 Razor，因此我无法声明列出我的变量的对象。我目前使用字典来执行此操作，允许我编写类似的内容：

```
@Model.Vars["MyProperty"] 
```

但我希望能够简单地写：

```
@MyProperty 
```

有没有办法做到这一点？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:44:51.403

您可以使用一些剃刀语法为您的视图提供智能感知：

```
@inherits MyNamespace.MoreNamespace.MyCustomRazorModel<MyModelType> 
```

只要您`MyCustomRazorModel`实现了 required`Write`等`WriteLiteral`方法，那么一切都应该正常工作，您可以在视图中使用以下内容：

```
@MyProperty 
```

假设您有这样的定义：

```
public class MyCustomRazorModel<T>
{
    public string MyProperty { get; set; }
} 
```

我提到您的支持 Razor 实现可能应该是通用的，以便您可以将它与您想要的任何模板模型一起重新使用。这也是 Razor 引擎在 ASP.NET 中的工作方式，通过提供在`@Model`属性中公开模型的通用模型。

**编辑**

例如，看看下面的类，看看框架人是如何做到的：

[http://msdn.microsoft.com/en-us/library/gg402107(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/gg402107(v=vs.108).aspx)

这是 ASP.NET 中 RazorEngine 的支持视图。对于独立实现，您将为视图创建一个支持类型以像这样继承。

# facebook-graph-api - 对 Facebook API 的最大调用次数限制有冲突吗？

> ID：13036030
> 
> 赞同：0
> 
> 时间：2012-10-23T17:29:30.517
> 
> 标签：facebook-graph-api, call, facebook-fql, limit, policy

在[https://developers.facebook.com/policy/#features](https://developers.facebook.com/policy/#features)上，他们说应用程序每天的调用上限为 1 亿次。

但是，错误代码：613 - FQL_EC_RATE_LIMIT_EXCEEDED - 对流的调用已超过每 600 秒 100 次调用的速率

指定您平均每 6 秒最多可以执行 1 次调用。

这两个限制冲突。

FQL 应该是 API 的一部分，对吧？如果没有，那么您每天最多可以对 API 执行 100000000 次调用，但最多只能执行 14400 次 FQL 查询。

但如果将 FQL 视为 Facebook API 的一部分，那么真正的限制是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:35:26.720

仅仅因为您不能每天调用 FQL 100M 次并不意味着您不能调用 API 的其他方面。FQL 确实有一个有效的下限，然后是 API 的其余部分。

# vba - EXCEL VBA：对年份进行排序并按十年找到简单的平均值、最大值和最小值

> ID：13036031
> 
> 赞同：0
> 
> 时间：2012-10-23T17:29:34.997
> 
> 标签：vba, sorting, excel, filter, filtering

好吧，场景如下：我目前正在使用三列。A 列是我的唯一 ID，B 列是我的年份，C 列是我的价值。我正在使用 excel，并且有大约 350,000 行可以使用，所以问题/目标：

我正在尝试找到正确的代码来筛选这些年，并按十年为我提供 VALUE 列 C 的 AVERAGE、MAX 和 MIN 值。

同样，我有数十万行代码要处理，我想按从 1940 年代到 2010 年代的十年排序；每十年它会给我平均、最大值和最小值。

我只是一个业余程序员，所以我知道如何通过在漫长而乏味的时间段内创建多种排序来逐个十年地过滤它。但是，我想知道是否有人知道可以一举完成所有工作的代码，从而节省了程序必须多次筛选我的 350,000 行代码的过程。

我将非常感谢谁能教我这一点，祝你好运，谢谢！

编辑:: (如何显示平均值、最大值和最小值))::

“啊，我很抱歉没有澄清这一点。我只是假设我会在他们‘神奇地’出现后处理这个问题，哈哈。无论如何，我将在一个新的简单表格中显示我整理的十年信息工作表，其中 AVERAGE、MAX、MIN 将是三行标题，而十年将是表的列标题。"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:30:49.977

我同意 Scott 的观点，在大多数情况下，公式是比 VBA 更好的选择。但是，您要求一些具体的事情，包括对数据进行排序，在单独的选项卡上显示结果，所以我假设在这种情况下，您可以接受宏带来的额外开销。

您遗漏了有关数据的一些详细信息（数据类型、特定单元格位置等）......所以请参阅代码中的注释，您可能需要自定义。

我试图尽可能按字面意思回答您的问题...例如，我个人可能更喜欢表格中的结果而不是横着的结果，但这不是我接近答案的方式。

```
Sub SummarizeDecade()

Const YearColumn As Integer = 2  'assumes the first year is in cell B2
Const FirstDataRow As Integer = 2 'assumes the first year is in cell B2

Dim wb As Excel.Workbook, ws As Excel.Worksheet, wsNew As Excel.Worksheet
Dim rowStart As Long, rowEnd As Long, colPaste As Long
Dim decade As Integer
Dim avg As Double, mini As Double, maxi As Double 'you didn't specify data type, Double is most accommodating

   Set wb = ThisWorkbook
   Set ws = wb.ActiveSheet  'assumes you run the macro while the data sheet is the current sheet; would prefer to use a sheet name

   'setup new worksheet for summary results, as requested
   wb.Worksheets.Add
   Set wsNew = wb.Worksheets(1)
   wsNew.Name = "Results"
   wsNew.Cells(1, 1).Value = "Decade"
   wsNew.Cells(2, 1).Value = "Average"
   wsNew.Cells(3, 1).Value = "Minimum"
   wsNew.Cells(4, 1).Value = "Maximum"
   colPaste = 2

   ws.Activate
   ws.Cells(FirstDataRow, YearColumn).Sort ws.Cells(FirstDataRow, YearColumn), xlAscending, , , , , , xlYes 'sorts the data by year, as requested

   rowStart = FirstDataRow
   rowEnd = rowStart

   Do Until Len(ws.Cells(rowEnd, 3).Value) = 0 'be sure your data does not include strings with spaces, zeroes, etc.  Must be blank/null/empty.
      decade = Int(ws.Cells(rowStart, YearColumn) / 10) * 10

      Do Until Int(ws.Cells(rowEnd, YearColumn) / 10) * 10 <> decade
         rowEnd = rowEnd + 1
      Loop

      'calculate the average, max, and min
      avg = Application.WorksheetFunction.Average(ws.Range(ws.Cells(rowStart, 3), ws.Cells(rowEnd - 1, 3)))
      mini = Application.WorksheetFunction.min(ws.Range(ws.Cells(rowStart, 3), ws.Cells(rowEnd - 1, 3)))
      maxi = Application.WorksheetFunction.max(ws.Range(ws.Cells(rowStart, 3), ws.Cells(rowEnd - 1, 3)))

      'write the summaries on the new worksheet tab
      wsNew.Cells(1, colPaste).Value = decade
      wsNew.Cells(2, colPaste).Value = avg
      wsNew.Cells(3, colPaste).Value = mini
      wsNew.Cells(4, colPaste).Value = maxi

      colPaste = colPaste + 1
      rowStart = rowEnd
   Loop

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:55:34.247

非VBA解决方案：

见下图。我冒昧地以简洁的格式设置数据以显示我的概念，但您可以轻松调整。相应地更改数据范围以及 Max / Min 公式。

请务必按`Ctrl + Shift + Enter`，因为这些公式是数组公式。

![非 VBA 解决方案](../Images/bddf90cdf006a58e317e27e2314498fa.png)

# java - 如何使用 JasperReports API 更改 JRBaseSubreport 表达式

> ID：13036034
> 
> 赞同：1
> 
> 时间：2012-10-23T17:29:43.437
> 
> 标签：java, jasper-reports, subreport, php-java-bridge

我通过*PHP/Java Bridge使用**JasperReports API*。这意味着*PHP端与**Java*端位于另一台机器上，并且这两个端不共享相同的文件系统。

 ***要加载报告，我必须在*PHP中读取**.jasper*文件并将其转换为实例并使用静态方法加载它。**`java.io.InputStream`**`net.sf.jasperreports.engine.util.JRLoader::loadObject`**

 *因此，在我的报告有*子*报告引用*Java*端无权访问的文件之前，一切正常。所以我的解决方案是访问所有*子报表*（使用*`net.sf.jasperreports.engine.util.JRElementsVisitor`*类），评估*子报表*表达式，使用与主报表相同的方法加载报表，但它在主报表的参数中。

然后，这是我的问题，我不知道如何更改***JRBaseSubreport***表达式以指向新添加的参数。

所以我的问题是，如何更改***JRBaseSubreport***表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:34:38.437

我不确定这是否是您的意思，但是您实际上可以将 JRXML 中子报告的定义从使用 a`String`更改为 using`net.sf.jasperreports.engine.JasperReport`

例如，当您添加子报表时，它通常会在您的报表中添加以下参数：

```
<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
    <defaultValueExpression><![CDATA["C:\\reports\\"]]
    </defaultValueExpression>
</parameter> 
```

对于子报表元素本身，它将添加如下内容：

```
<subreport>
  <reportElement uuid="64d21a88-9389-49f5-ba63-1f33aac5a39f" x="821" y="0" width="200" height="100"/>
  <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
  <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "report4_subreport1.jasper"]]></subreportExpression>
</subreport> 
```

`SUBREPORT_DIR`而不是在编译的`JasperReport`对象中传递 int 。因此，将您的参数更改为：

```
<parameter name="SUBREPORT" class="net.sf.jasperreports.engine.JasperReport" isForPrompting="false"/> 
```

然后是子报表元素：

```
<subreport>
  <reportElement uuid="64d21a88-9389-49f5-ba63-1f33aac5a39f" x="821" y="0" width="200" height="100"/>
  <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
  <subreportExpression><![CDATA[$P{SUBREPORT}]]></subreportExpression>
</subreport> 
```

然后只需要知道特定报告需要哪些子报告。

**注意：**这确实有它没有运行的不幸副作用`iReport`，但我通常只是在测试时将参数从 a 交换`JasperReport`到`String`实例`iReport`以绕过它。****

# c++ - std::unordered_multiset 中的桶

> ID：13036036
> 
> 赞同：3
> 
> 时间：2012-10-23T17:29:52.590
> 
> 标签：c++, c++11, unordered-set

假设我有一个`std::unordered_multiset<int>`which is named`hashTable`和一个 bucket `i`。我可以遍历`i`th 桶的元素吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T17:34:07.537

您确实可以使用本地迭代器遍历每个存储桶：

```
for (auto it = hashTable.cbegin(i); it != hashTable.cend(i); ++it)
{
    // ... use *it
} 
```

确保`i`位于范围内`[0, hashTable.bucket_count())`。

# javascript - 将带有 jquery 的复选框添加到 div

> ID：13036039
> 
> 赞同：4
> 
> 时间：2012-10-23T17:30:04.680
> 
> 标签：javascript, jquery, html, checkbox

我想将一个复选框添加到一个 div 到另一个 div 中（使用 id="#sensorList"），然后将一些事件处理程序绑定到它。我这样做

```
/* Add div */
$("#sensorList").append($('<div>', { id : sensorId})
.addClass("sensorListItem")
.text(sensorId)
);

/* Adds visibile checkbox */
$("#"+sensorId).append($('<input>', { id : sensorId + "VisibleCheckbox", type:"checkbox", name: sensorId + "VisibleCheckbox"})); 
```

它似乎工作正常，但如果我点击复选框，它不会切换到检查状态！

任何想法？先感谢您。

* * *

很抱歉，我发现问题出在哪里了。我无法看到选中的复选框，因为我在 div 上有一个名为 sensorId 的点击处理程序，我愚蠢地做了：event.preventDefault()（点击 div 时没有默认行为！！！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:34:33.887

尝试一些长手，看看它是否有效......

```
$("#"+sensorId).append('<input type="checkbox" id="' + sensorId + 'VisibleCheckbox" name="'  + sensorId + 'VisibleCheckbox" >'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T17:41:04.290

这个对我有用。查看 jsfiddle：http: [//jsfiddle.net/pVjNM/](http://jsfiddle.net/pVjNM/)

```
var sensorId = "one";

/* Add div */
$("#sensorList").append($('<div>', { id : sensorId })
.addClass("sensorListItem")
.text(sensorId)
);

/* Adds visibile checkbox */
$("#"+sensorId).append($('<input>', { id : sensorId + "VisibleCheckbox", type:"checkbox", name: sensorId + "VisibleCheckbox"}));

$("input[type=checkbox]").each(function(){
    this.click();
    console.log("Should be true:", this.checked);
});

$("input[type=checkbox]").each(function(){
    this.click();
    console.log("Should be false:", this.checked);
});​ 
```

# javascript - SVG 旋转和缩放：如何更改旋转/缩放中心？

> ID：13036043
> 
> 赞同：0
> 
> 时间：2012-10-23T17:30:32.610
> 
> 标签：javascript, svg, raphael

我正在使用 Raphael.js 来旋转和缩放图像。而且我知道（希望我没有弄错）默认情况下，旋转和缩放的*轴心点*与图像中心相同。我怎样才能改变轴心点的位置，以便所有未来的转换都会发生在它身上？

换句话说，我怎样才能修改旋转/缩放中心，以便方法调用如`image.transform("s2,5r20")`将与该点而不是默认点相关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:30:59.377

实际上，我一直认为有必要为您所描述的行为手动指定枢轴点。

给定一个 element `el`，使用 scale 指令的可选第三个和第四个参数来指定要缩放的点：

```
var bbox = el.getBBox();
el.transform( [ "S", "2.0", "2.0", bbox.x + bbox.width / 2, bbox.y + bbox.height / 2 ] ); 
```

同样，对于 rotate 指令，使用可选的 2nd 和 3rd 参数用于相同目的：

```
var bbox = el.getBBox();
el.transform( [ "R", 45, bbox.x + bbox.width / 2, bbox.y + bbox.height / 2 ] ); 
```

显然，最好将此功能包装到实用函数或 Raphael 扩展中。但这将使您能够实现您正在寻求的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:34:25.477

该文档有[示例](http://raphaeljs.com/reference.html#Element.transform)：

```
ar el = paper.rect(10, 20, 300, 200);
// translate 100, 100, rotate 45°, translate -100, 0
el.transform("t100,100r45t-100,0"); 
```

# linux - 如何通过命令行识别特定的 Linux 风格？

> ID：13036048
> 
> 赞同：53
> 
> 时间：2012-10-23T17:30:58.663
> 
> 标签：linux, version, command-line-interface

我希望能够通过命令行命令检测计算机上安装了哪种特定的 Linux 风格，例如 Ubuntu 与 Fedora。

有人推荐`uname -a`，但这仅报告内核版本。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2015-01-29T05:50:41.920

试试下面的命令......它对我有用......

# 猫 /proc/版本

例如，一旦您知道您正在运行 Red Hat，您可以通过以下方式进入重点：

# 猫 /etc/redhat-release

或者在 Debian 上：

# 猫 /etc/debian_version

或一般来说：

# 猫 /etc/*-release

您也可以使用以下命令

# 猫 /etc/问题

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-23T17:46:38.323

用于显示详细信息，包括发行版的版本和代号

```
lsb_release -a 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T17:33:43.697

我希望这有效 echo $(lsb_release -si)

# c# - System.Diagnostics.Process.Start 针对不同域的进程

> ID：13036052
> 
> 赞同：6
> 
> 时间：2012-10-23T17:31:09.313
> 
> 标签：c#, .net, process

我们有一个场景，我们需要我们的用户能够启动 SQLServer 并使用与当前登录不同的域对其进行身份验证。因此，为了澄清这是设置的方式：

1.  用户到达办公室并登录公司域（为简单起见，我们将其称为 LOCALDOMAIN）
2.  他们希望连接到我们在不同域上的远程数据库（我们称之为 REMOTEDOMAIN）
3.  首先，他们启动了 VPN 工具，该工具建立了到 REMOTEDOMAIN 的 VPN 隧道（这一切都经过测试并且效果很好）
4.  但是，如果他们默认启动 SSMS，它将只允许通过 LOCALDOMAIN 进行 Windows 身份验证，选择 REMOTEDOMAIN 的选项甚至不可用

我们发现从命令行运行它会起作用：

```
RUNAS /user:REMOTEDOMAIN\AUserName /netonly "C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\Ssms.exe 
```

它将提示“输入 REMOTEDOMAIN\AUserName 的密码：”消息，如果您提供正确的密码，SSMS 将启动并可以连接到远程数据库。但是，当我尝试在 C# 中使用更好的界面做同样的事情时，我得到“登录失败：未知用户名或密码错误”，这是我的代码：

```
System.Security.SecureString password = new System.Security.SecureString();
foreach(char c in txtPassword.Text.ToCharArray()){
    password.AppendChar(c);
}
System.Diagnostics.ProcessStartInfo procInfo = new System.Diagnostics.ProcessStartInfo();
procInfo.Arguments = "/netonly";
procInfo.FileName = @"C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\Ssms.exe"; ;
procInfo.Domain = "REMOTEDOMAIN";
procInfo.Verb = "runas";
procInfo.UserName = txtUsername.Text;
procInfo.Password = password;
procInfo.UseShellExecute = false;
System.Diagnostics.Process.Start(procInfo); 
```

我尝试了带有和不带有预先挂起的域的用户名，但都不起作用。有人尝试过做类似的事情吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:02:38.960

我做了一些可能相关的事情。我登录到一个域并尝试获取另一个域上共享文件夹的目录列表。为此，我使用 LogonUser 和 Impersonate。代码如下所示（抱歉，我没有 SQL 服务器来尝试您的确切方案）...

```
public class Login : IDisposable
{
    public Login(string userName, string domainName)
    {
        _userName = userName;
        _domainName = domainName;
    }

    string _userName = null;
    string _domainName = null;

    IntPtr tokenHandle = new IntPtr(0);
    IntPtr dupeTokenHandle = new IntPtr(0);
    WindowsImpersonationContext impersonatedUser = null;

    const int LOGON32_PROVIDER_DEFAULT = 0;
    const int LOGON32_LOGON_INTERACTIVE = 2;
    const int LOGON32_LOGON_NEW_CREDENTIALS = 9;

    [DllImport("advapi32.dll", SetLastError = true, EntryPoint = "LogonUser")]
    public static extern bool LogonUser(String lpszUsername, String lpszDomain, String lpszPassword,
        int dwLogonType, int dwLogonProvider, ref IntPtr phToken);

    [DllImport("advapi32.dll", SetLastError = true, EntryPoint = "LogonUser")]
    public static extern bool LogonUserPrompt(String lpszUsername, String lpszDomain, IntPtr lpszPassword,
        int dwLogonType, int dwLogonProvider, ref IntPtr phToken);

    [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
    public extern static bool CloseHandle(IntPtr handle);

    [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public extern static bool DuplicateToken(IntPtr ExistingTokenHandle,
        int SECURITY_IMPERSONATION_LEVEL, ref IntPtr DuplicateTokenHandle);

    public void AccessShare(string password)
    {
        tokenHandle = IntPtr.Zero;

        bool returnValue = LogonUser(_userName, _domainName, password,
            LOGON32_LOGON_NEW_CREDENTIALS, LOGON32_PROVIDER_DEFAULT,
            ref tokenHandle);

        if (false == returnValue)
        {
            int ret = Marshal.GetLastWin32Error();
            throw new System.ComponentModel.Win32Exception(ret);
        }

        // Use the token handle returned by LogonUser.
        WindowsIdentity newId = new WindowsIdentity(tokenHandle);
        impersonatedUser = newId.Impersonate();
    }

#region IDisposable Members
    public void  Dispose()
    {
        impersonatedUser.Undo();

        // Free the tokens.
        if (tokenHandle != IntPtr.Zero)
            CloseHandle(tokenHandle);
    }
#endregion
} 
```

我已经将它与 Directory.GetDirectories(UNCPath) 一起使用，其中路径通向另一个域上的机器并且它在那里工作。我还没有尝试过实现“runas”。

我这样称呼它...

```
using(var login = new Login("myname","mydomain))
{
    login.AccessShare("mypassword");
    // do stuff
} 
```

也许你可以让它适应你的问题。LMK

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:57:32.327

您应该删除以下行：

```
// Not passing /netonly to SMSS, it was passed to RunAs originally.
procInfo.Arguments = "/netonly";
// Again, SMSS is not getting the verb, it's being run
procInfo.Verb = "runas"; 
```

基本上，您将`/netonly`参数传递给 SMSS，而在命令行上，您运行的`runas` *不是 SMSS*。与动词相同，you're not running `runas`。

此时调用`Start`应该会成功，因为您将使用正确的凭据指向正确的可执行文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-12T14:53:12.413

我尝试了所有我能找到的各种用户模拟代码示例。他们都没有工作。

最后，我想出了以下代码。它`cmd.exe`使用`/C`参数执行， which `Carries out the command specified by string and then terminates`。我执行的命令是`runas /netonly ...`

## 注意事项

不幸的是，密码必须手动输入。我的下一步是调查向`process`. 我尝试重定向标准输入并写入它，但它不起作用。我在某处读到，大多数密码提示只接受直接来自键盘的输入。

此外，当 SSMS 打开时，“**连接到服务器**”对话框将显示您当前的域\用户名，但它将使用您提供给`runas`.

最后，如果您的 AD 帐户被锁定，在您尝试连接到 SQL Server 之前，您不会收到错误消息。我忽略了复制收到的错误消息，但没有提到帐户被锁定。

## 代码

```
 public static void RunAsNetonly(string username, string domain, string exePath)
    {

        var psi = new ProcessStartInfo();

        psi.FileName = "cmd.exe";
        psi.Arguments = $"/C runas /netonly /user:{domain}\\{username} \"{exePath}\"";            
        psi.UseShellExecute = false;

        var process = Process.Start(psi);

        // not sure if this is required
        process.WaitForExit();

    }        

    // usage example
    public static void RunSSMS()
    {
        RunAsNetonly("walter", "domain123", @"C:\Program Files (x86)\Microsoft SQL Server\140\Tools\Binn\ManagementStudio\ssms.exe");
    } 
```

# android - 使用两个 y 轴和 x 轴的 AChartEngine 图（日期时间）

> ID：13036056
> 
> 赞同：1
> 
> 时间：2012-10-23T17:31:54.430
> 
> 标签：android, datetime, charts, achartengine

在 android 上使用 achartengine 很难让多个 Y 轴显示在图表上。[**我试图在这里**](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/MultipleTemperatureChart.java)修改“多温度图表”演示中所做的事情[](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/MultipleTemperatureChart.java)

 **我需要更改**DateTime**的 X 轴。代码示例中需要更改的内容以使用日期时间 X 轴。

谢谢，罗德里戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:51:36.750

这里最简单的方法是在 X 轴上放置`Date`时间戳（`long`值）。此外，您必须添加自定义标签：

```
renderer.addXTextLabel(dateTimestampValue, "custom label"); 
```

你会想要隐藏默认标签：

```
renderer.setXLabels(0); 
```**

# java - 在没有 JLabel 的 Swing 中显示文本

> ID：13036057
> 
> 赞同：4
> 
> 时间：2012-10-23T17:31:59.277
> 
> 标签：java, swing, jframe

我必须使用 Swing 制作一个 Java 程序，我想显示一些文本，但不使用`JLabel`（包括文本组件）！我必须扩展`JFrame`。我还有什么其他选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T17:33:30.733

你不应该：

*   `JFrame`不必要地扩展
*   直接画到`JFrame`via`paint(..)`

你应该：

*   覆盖`JComponent`_`paintComponent(...)`
*   做定制绘画`paintComponent(...)`，
*   将`JComponent`实例添加到`JFrame`

这是一个例子：

![在此处输入图像描述](../Images/57353657ed180af83a789f1e95826e47.png)

```
import java.awt.Dimension;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class DrawSimpleText {

    public DrawSimpleText() {
        initComponents();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new DrawSimpleText();
            }
        });
    }

    private void initComponents() {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.getContentPane().add(new JPanel(true) {
            Font font = new Font("Serif", Font.PLAIN, 20);
            String s = "Java Source and Support";

            @Override
            public void paintComponent(Graphics g) {
                super.paintComponent(g);
                Graphics2D g2 = (Graphics2D) g;

                g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                        RenderingHints.VALUE_ANTIALIAS_ON);
                g2.setFont(font);

                FontMetrics fm = g.getFontMetrics(font);

                int width = fm.stringWidth(s);

                Dimension d = getSize();

                //center String/text
                int cx = (d.width - width) / 2;
                int cy = (d.height - fm.getHeight()) / 2 + fm.getAscent();

                g2.drawString(s, cx, cy);
            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(300, 100);
            }
        });
        f.pack();
        f.setVisible(true);
    }
} 
```

**更新：**

根据您的评论**，尽管它违反了所有 Swing 规则和我自己的道德**：

但是，如果您仍然**需**要这样做（我无法理解为什么这只是不好的做法），方法如下：

![在此处输入图像描述](../Images/7e86b416735c932158f0082e961bc480.png)

```
import java.awt.Dimension;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class DrawSimpleText extends JFrame {

    public DrawSimpleText() {
        initComponents();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new DrawSimpleText();
            }
        });
    }

    private void initComponents() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
        setVisible(true);
    }
    Font font = new Font("Serif", Font.PLAIN, 20);
    String s = "Java Source and Support";

    @Override
    public void paint(Graphics g) {

        super.paint(g);
        Graphics2D g2 = (Graphics2D) g;

        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
        g2.setFont(font);

        FontMetrics fm = g.getFontMetrics(font);

        int width = fm.stringWidth(s);

        Dimension d = getSize();

        //center String/text
        int cx = (d.width - width) / 2;
        int cy = (d.height - fm.getHeight()) / 2 + fm.getAscent();

        g2.drawString(s, cx, cy);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(300, 100);
    }
} 
```

# linux - 如何找到与套接字描述符关联的文件名？

> ID：13036061
> 
> 赞同：0
> 
> 时间：2012-10-23T17:32:20.513
> 
> 标签：linux, sockets, filenames

当我想查看使用 的进程的打开文件列表时`ls -l /proc/pid/fd`，我看到了一些套接字描述符。如何找到相应的文件名？

```
lr-x------ 1 u1 users 64 Sep 15 14:45 0 -> /dev/null
lrwx------ 1 u1 users 64 Sep 15 14:45 1 -> /dev/pts/3
lrwx------ 1 u1 users 64 Sep 15 14:45 10 -> socket:[507942]
l-wx------ 1 u1 users 64 Sep 15 14:45 2 -> pipe:[505993]
l-wx------ 1 u1 users 64 Sep 15 14:45 22 -> pipe:[505994]
l-wx------ 1 u1 users 64 Sep 15 14:45 3 -> /dev/null
lrwx------ 1 u1 users 64 Sep 15 14:45 4 -> socket:[507938]
lrwx------ 1 u1 users 64 Sep 15 14:45 5 -> socket:[507939]
lrwx------ 1 u1 users 64 Sep 15 14:45 6 -> socket:[486323]
lrwx------ 1 u1 users 64 Sep 15 14:45 7 -> socket:[486324]
lrwx------ 1 u1 users 64 Sep 15 14:45 8 -> socket:[509999]
lrwx------ 1 u1 users 64 Sep 15 14:45 9 -> socket:[507941] 
```

我`lsof -p pid`也看到了套接字。

```
atIcoFoam 24376 u1  0r   CHR                1,3      0t0     1029 /dev/null
atIcoFoam 24376 u1  1u   CHR              136,3      0t0        6 /dev/pts/3
atIcoFoam 24376 u1  2w  FIFO                0,8      0t0   506122 pipe
atIcoFoam 24376 u1  3w   CHR                1,3      0t0     1029 /dev/null
atIcoFoam 24376 u1  4u  unix 0x0000000000000000      0t0   511127 socket
atIcoFoam 24376 u1  5u  unix 0x0000000000000000      0t0   511128 socket
atIcoFoam 24376 u1  6u  IPv4             510153      0t0      TCP *:37340 (LISTEN)
atIcoFoam 24376 u1  7u  IPv6             510154      0t0      TCP *:43305 (LISTEN)
atIcoFoam 24376 u1  8u  IPv4             512654      0t0      TCP hpclab.ws05:57696->hpclab.ws05:33141 (ESTABLISHED)
atIcoFoam 24376 u1  9u  IPv4             508030      0t0      TCP *:1027 (LISTEN)
atIcoFoam 24376 u1  10u  IPv6             508031      0t0      TCP *:1027 (LISTEN) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:01:09.483

只有命名的 UNIX 域名套接字（`AF_UNIX`类型化套接字）具有关联的文件。

**更新：**

`/proc/<process id>/fd/`使用此套接字的文件描述符的进程特定值将此类文件的名称链接到目录中。

所有其他套接字在文件系统中没有表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:41:05.600

您可以通过以下方式列出打开的文件：

```
lsof -p PID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:41:38.423

这些是 UNIX 监听套接字吗？我认为是的，因为如果它们是其他任何东西，那么您的问题就没有意义。

`lsof`通常能够解析套接字绑定到的文件系统名称：

```
lsof -p pid 
```

# linux - Git - 将 Github 存储库与本地存储库同步？

> ID：13036064
> 
> 赞同：14
> 
> 时间：2012-10-23T17:32:31.290
> 
> 标签：linux, git, github

首先，如果这是一个重复的问题，请原谅我。除了基本术语我什么都不知道，仅使用外行术语很难找到答案。

我做了一个项目，并在 Github 上做了一个存储库。在 Windows 上，我已经能够使用它并将东西上传到它一段时间了。Github Windows 应用程序很好，但我希望有一个用于 Linux git 的 GUI。

我希望能够下载该项目的源代码，并能够在我的 Linux 机器上对其进行编辑，并且能够将`git commit -m 'durrhurr'`其上传到主存储库。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T17:40:51.930

如果您已经完成了大部分操作，请原谅我：

如果您尝试通过 ssh，第一步是设置您的 ssh 密钥，如果您通过 https，则可以跳过此步骤。[https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)提供了详细说明

下一步是制作存储库的本地克隆。使用命令行，它将是`git clone <url>`您应该能够在您的 github 页面上找到的 url。

之后，您应该能够使用`git commit -am "commit message"`and提交并推送命令行`git push`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-23T17:39:15.850

您可以`SmartGit`在 Linux 上使用 git 的 GUI：[http ://www.syntevo.com/smartgit/index.html](http://www.syntevo.com/smartgit/index.html)

但是首先在命令行上学习 git 通常是个好主意：

以下是一些基本示例，假设您仅在`master`分支中工作：

根据您从 github 获得的内容启动本地 repo 的示例：

```
git clone https://github.com/sampson-chen/sack.git 
```

要查看 repo 的状态，请执行以下操作：

```
git status 
```

将本地存储库同步到 github 上的最新更改的示例：

```
git pull 
```

将新文件或修改文件添加到“阶段”以进行提交的示例

```
git add /path/file1 /path/file2 
```

将阶段视为您明确告诉 git 跟踪修订控制的文件。git 将看到 repo 中的所有文件（以及对跟踪文件的更改），但它只会对您添加到要提交的阶段的文件起作用。

在“阶段”中提交文件的示例

```
git commit 
```

将本地存储库（无论您对本地存储库所做的任何承诺）推送到 github 的示例

```
git push 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T17:44:14.497

您需要做的是克隆您的 git 存储库。从终端`cd`到您希望项目所在的目录并执行

`git clone https://github.com/[username]/[repository].git`

记住**不要**使用`sudo`，因为你会弄乱远程权限。

然后，您需要在本地提交任何更改，即您的`git commit -m`然后您可以执行。

`git push`

这将更新**远程**存储库。

最后，如果您需要将**本地**项目更新`cd`到所需目录，然后：

`git pull`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T17:40:32.243

*   要开始在 linux 中处理项目，请将 repo 克隆到 linux 机器。将 ssh 公钥添加到 github。将您的用户名和电子邮件添加到 git-config。
*   对于 GUI，您可以使用 gitg。

PS：习惯了 git cli，值得花时间在上面。

# mysql - 从任何表中选择任何字段

> ID：13036065
> 
> 赞同：1
> 
> 时间：2012-10-23T17:32:31.467
> 
> 标签：mysql, mysqli

mysql 语句是否可以从任何表中选择任何字段？例如： `SELECT * FROM * WHERE ? IN (SELECT * FROM *)`实现不依赖于特定表或字段的通用搜索方法。我刚刚读到我们可以使用 SQL 命令列出数据库的所有表：`SHOW TABLES` 您对我们如何做到这一点有任何想法吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:48:57.650

You could try something like this in php

```
$getTables = mysql_query("show tables");
$tmpString = '';
while ($table_data = mysql_fetch_row($getTables))
{
    $tmpString.=$table_data[0].',';
}   
$ALL_DATABASE_TABLES = substr($string,0,strlen($tmpString)-1); //Remove the last , 
```

Then you got all your tables and you can build your query

like this

```
$qry = "SELECT * FROM $ALL_DATABASE_TABLES" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:43:56.290

创建一个过程并使用动态查询机制，例如：

```
 CREATE PROCEDURE dynamicQuery()
  BEGIN
  SET @tableName := 'TABLENAME1';
  SET @SqlStr = 'SELECT  * FROM @tableName';
  PREPARE n_StrSQL FROM @SqlStr;
  EXECUTE n_StrSQL;
  DEALLOCATE PREPARE n_StrSQL;
 END 
```

# javascript - Eclipse Javascript 格式化程序 (ctrl-shift-f)

> ID：13036068
> 
> 赞同：26
> 
> 时间：2012-10-23T17:32:44.553
> 
> 标签：javascript, eclipse, code-formatting

我不喜欢问这个问题，但老实说，很长一段时间以来我一直在寻找一种方法来解决这个问题。

这是一个简单的问题。我已经使用 NetBeans 很长时间了，但最近因为一些我不会深入讨论的原因切换到了 Eclipse。无论如何，我发现 javascript 源格式的行为非常奇怪。

这是我自己格式化的 javascript 代码示例块：

```
function buildDatabase () {
    db.transaction(function (tx) {
        tx.executeSql('DROP TABLE IF EXISTS calendar');
        tx.executeSql('CREATE TABLE IF NOT EXISTS calendar(id UNIQUE, summary, description, location, startdate, enddate)');
    }, function (err) {
        document.querySelector('#debugLog').innerHTML += '<p><code>' + err.message + '</code></p>';
    });
} 
```

很简单的东西。现在，如果我按`Ctrl`++`Shift`对其`F`进行格式化（因为坦率地说，这个功能可以节省大量时间），由于我无法理解的原因，它现在看起来像这样：

```
function buildDatabase() {
    db
            .transaction(
                    function(tx) {
                        tx.executeSql('DROP TABLE IF EXISTS calendar');
                        tx
                                .executeSql('CREATE TABLE IF NOT EXISTS calendar(id UNIQUE, summary, description, location, startdate, enddate)');
                    },
                    function(err) {
                        document.querySelector('#debugLog').innerHTML += '<p><code>'
                                + err.message + '</code></p>';
                    });
} 
```

为什么要将 .transaction 移到新行？它没有接近 80 的线宽。看起来真的很乱。第二个 .executeSql 也是如此，但仍然无法正确包装。这很奇怪。

现在我当然知道*Window > Preferences > JavaScript > Code Style*但无论我在这里做什么都可以解决这个问题。我希望有人对 Eclipse 有更多的经验来知道出了什么问题。

我安装了 Android 开发工具和 PDT。但是，此行为预先存在这些插件的安装。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-24T08:33:39.950

该问题可以通过访问解决

```
Preferences > JavaScript > Code Style > Formatter 
```

继续：

1.  创建一个新配置文件（因为您无法编辑内置配置文件），如果您还没有，然后单击`Edit...`。
2.  打开`Line Wrapping`选项卡。
3.  在该`Maximum line width`字段中，输入**9999**。
4.  单击`Apply`和`Ok`。

对于超过 9999 个字符的代码行，问题再次出现，但我可以忍受。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T22:06:12.830

根据我的经验，导致此问题的原因是长而牢不可破的线路。很烦人。尝试将长字符串常量（如“'CREATE TABLE IF NOT EXISTS calendar(id UNIQUE, summary, description, location, startdate, enddate)'”）放入一个单独的变量中，或者如果它真的让你烦恼，你可以把它分开并与 + 连接。

我试过这个：

```
function buildDatabase() {
    var sql1 = 'CREATE TABLE IF NOT EXISTS calendar(id UNIQUE, summary, description, location, startdate, enddate)';

    db.transaction(function(tx) {
        tx.executeSql('DROP TABLE IF EXISTS calendar');
        tx.executeSql(sql1);
    }, function(err) {
        document.querySelector('#debugLog').innerHTML += '<p><code>'
            + err.message + '</code></p>';
    });
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-27T03:24:47.513

首选项 > JavaScript > 代码样式 > 格式化程序 > 换行（选项卡）

**取消选中**>> 更喜欢包装外部表达式（将嵌套表达式保持在一行）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-11T21:53:06.443

我有同样的问题。我所做的是安装[Aptana Studio 插件](http://www.aptana.com/products/studio3/download)并开始使用它附带的 JavaScript 编辑器。它比 WTP 附带的要好得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T06:55:42.777

我也发现了这一点，这也是我在很大程度上回到 NetBeans 的主要原因之一。

我没有解决方案，但我可以给你一些对我有用的**一般**提示，至少在某种程度上是这样。

1.  而不是这样的括号：}); 试着把每一个放在一个新的行上。
2.  而不是像这样解析参数：

    日历（ID UNIQUE、摘要、描述、位置、开始日期、结束日期）

也许试试

```
calendar(id 
UNIQUE, 
summary, 
description, 
location, 
startdate, 
enddate) 
```

   3\. 最后，您可以尝试在连接字符串时将 + 放在新行上。

就像我说的，我知道这并不能解决您的问题，但我认为至少在出现更好的解决方案之前它可能会对您有所帮助。

祝你好运。

# c# - 如何制作影响代码隐藏添加 DataGridTemplateColumn 的 DataGrid MultiDataTrigger

> ID：13036069
> 
> 赞同：1
> 
> 时间：2012-10-23T17:32:50.767
> 
> 标签：c#, wpf, binding, styles, datagridtemplatecolumn

因此，在我的 DataGrid 上，我有以下样式，设置、绑定要使用 MultiDataTrigger 触发的 ReadOnly 和 Reordering 变量，我知道它可以工作，因为它会变灰并将值设置为只读。唯一的问题是，如果使用 DataGridTemplateColumn 创建的 ComboBox 没有设置其 IsReadOnly 值。我怎样才能得到这个工作？我不知道我将如何去寻找应该如何绑定模板列。

DataGrid 样式（包含在`<DataGrid></DataGrid>`标签中）

```
 <DataGrid.Style>
            <Style TargetType="{x:Type DataGrid}">
                <Style.Triggers>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding ReadOnly}" Value="True"/>
                            <Condition Binding="{Binding Reordering}" Value="False"/>
                        </MultiDataTrigger.Conditions>
                        <MultiDataTrigger.Setters>
                            <Setter Property="IsReadOnly" Value="True" />
                            <Setter Property="Foreground" Value="Gray" />
                        </MultiDataTrigger.Setters>
                    </MultiDataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding ReadOnly}" Value="True"/>
                            <Condition Binding="{Binding Reordering}" Value="True"/>
                        </MultiDataTrigger.Conditions>
                        <MultiDataTrigger.Setters>
                            <Setter Property="IsReadOnly" Value="True" />
                        </MultiDataTrigger.Setters>
                    </MultiDataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding ReadOnly}" Value="False"/>
                        </MultiDataTrigger.Conditions>
                        <MultiDataTrigger.Setters>
                            <Setter Property="IsReadOnly" Value="False" />
                        </MultiDataTrigger.Setters>
                    </MultiDataTrigger>
                </Style.Triggers>
            </Style>
        </DataGrid.Style> 
```

用于创建 DataGridTemplateColumn 的代码

```
 DataTemplate comboDisplayTemplate = new DataTemplate();
 FrameworkElementFactory comboDisplayElement = new FrameworkElementFactory(typeof(ComboBox));
 Binding comboDisplayBinding = new Binding(f.ColumnName) { UpdateSourceTrigger = UpdateSourceTrigger.LostFocus };
 comboDisplayElement.SetBinding(ComboBox.SelectedValueProperty, comboDisplayBinding);
 comboDisplayElement.SetValue(ComboBox.DisplayMemberPathProperty, "Value");
 comboDisplayElement.SetValue(ComboBox.SelectedValuePathProperty, "Key");
 Binding comboDisplayListBinding = new Binding(f.ColumnName + "List");
 comboDisplayElement.SetValue(ComboBox.ItemsSourceProperty, comboDisplayListBinding);
 comboDisplayTemplate.VisualTree = comboDisplayElement;
 templateColumn.CellTemplate = comboDisplayTemplate;

  DataGridTemplateColumn templateColumn = new DataGridTemplateColumn() {
      Header = f.ShortDisplay,
 };

 DataTemplate comboboxTemplate = new DataTemplate();
 FrameworkElementFactory comboboxElement = new FrameworkElementFactory(typeof(ComboBox));
 Binding comboboxBinding = new Binding(f.ColumnName) { UpdateSourceTrigger = UpdateSourceTrigger.LostFocus };
 comboboxElement.SetBinding(ComboBox.SelectedValueProperty, comboboxBinding);
 comboboxElement.SetValue(ComboBox.DisplayMemberPathProperty, "Value");
 comboboxElement.SetValue(ComboBox.SelectedValuePathProperty, "Key");
 Binding comboboxListBinding = new Binding(f.ColumnName + "List");
 comboboxElement.SetValue(ComboBox.ItemsSourceProperty, comboboxListBinding);
 comboboxTemplate.VisualTree = comboboxElement;
 templateColumn.CellEditingTemplate = comboboxTemplate; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:04:39.097

该`IsReadOnly`属性用于控件以允许/禁止用户更改控件的基础文本，但是默认情况下，组合框没有要更改的基础文本。我不得不使用`IsHitTestVisible`UIElement 的属性，来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.uielement.ishittestvisible.aspx) ->*获取或设置一个值，该值声明该元素是否可以作为命中测试结果从其渲染内容的某些部分返回。*

```
 <Setter Property="IsHitTestVisible" Value="False" /> 
```

# php - 启动脚本 Centos 只启动一个 PHP 脚本

> ID：13036073
> 
> 赞同：1
> 
> 时间：2012-10-23T17:33:14.330
> 
> 标签：php, upstart

```
start on run level [2345]
stop on run level [!2345]

respawn
respawn limit 15 5

script
   exec su - datafeeder - c 'php /home/datafeeder/ftp.php' >> /home/datafeeder/ftp.log
   exec su - datafeeder - c 'php /home/datafeeder/parse.php' >> /home/datafeeder/parse.log
   sleep 1m

end script 
```

上面的代码只运行了第一个 php 脚本，然后最终重新生成，最终整个脚本由于太多的重新生成而停止。我无法弄清楚的是重生的原因。我可以手动运行不同的脚本，它们工作正常，但是在这个脚本中，第二个脚本永远不会被调用，并且 sleep 命令也永远不会运行。

# unit-testing - sqlpackage.exe“无法打开数据库”随机出现

> ID：13036080
> 
> 赞同：0
> 
> 时间：2012-10-23T17:33:33.540
> 
> 标签：unit-testing, sql-server-data-tools

我正在使用 sqlpackage.exe 创建动态数据库来运行单元测试。这在本地工作 100% 的时间，但不是在 TFS 中。所有单元测试都使用 locahost\sqlexpress 的集成安全性。TFS 会随机导致 sqlpackage.exe 返回以下错误。

对于单元测试，我使用的是[此处](http://nicholas.piasecki.name/blog/2010/01/integration-testing-with-sql-server-express-2008-nhibernate-and-mstest/)描述的模式，但进行了一些修改以使用带有 sqlpackage 的 dacpac，以反对 nhibernate 的模式导出功能。

```
sqlpackage error    : *** Could not deploy package.
sqlpackage error    : Cannot open database "MessagesRepositoryTests" requested by the login. The login failed.
sqlpackage error    : Login failed for user 'DOMAIN\TFSService'. 
```

其他（随机）错误包括另一行提到它未能导入目标模型。

```
sqlpackage error    : *** Could not deploy package.
sqlpackage error    : Failed to import target model MessagesRepositoryTests. Detailed message Cannot open database "MessagesRepositoryTests" requested by the login. The login failed.
sqlpackage error    : Login failed for user 'DOMAIN\TFSService'.
sqlpackage error    : Cannot open database "MessagesRepositoryTests" requested by the login. The login failed.
sqlpackage error    : Login failed for user 'DOMAIN\TFSService'. 
```

“DOMAIN\TFSService”已被授予每个服务器角色（系统管理员、公共等）。

有谁知道为什么这会在我的所有测试中间歇性出现？请记住，这只发生在 TFS 构建自动化单元测试中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:22:24.447

我不确定原因的实际根源，但是当我从构建过程模板中删除“删除测试结果”目录时，这个问题得到了解决。它必须与将日志/数据文件添加到被删除和重新创建的目录有关。从那以后，我将代码更改为始终将测试数据库存储在 C:\ 驱动器正下方的文件夹中。

# python - 从两个列表中创建所有可能的项目组合的元组，而不在元组中复制项目

> ID：13036081
> 
> 赞同：12
> 
> 时间：2012-10-23T17:33:34.657
> 
> 标签：python, combinatorics

我希望能够获取一系列数字并返回一个包含三元组且不重复的列表。x 的每个元素应该在三元组的每个位置出现一次。目标是获得类似以下内容：

```
get_combinations_without_duplicates(3) = [(0, 1, 2), (1, 2, 0), (2, 0, 1)] 
```

对于 range(3) 这只是一个列表轮换，但对于更高的范围，有更多可能的组合。我希望能够随机生成满足这些约束的三元组列表。

假设我们首先为 n=4 的情况指定每个三元组的第一个元素：

[(0,), (1,), (2,), (3,)]

第一个三元组的第二个元素可以是 0 以外的任何值。一旦选择其中一个，就会限制下一个三元组的选项，依此类推。目标是有一个函数，它接受一个数字并以这种方式创建三元组，但并不总是创建相同的三元组。也就是说，最终结果可能是轮换：

```
[(0, 1, 2), (1, 2, 3), (2, 3, 0), (3, 0, 1),] 
```

或者

```
[(0, 2, 3), (1, 3, 0), (2, 0, 1), (3, 1, 2)] 
```

下面是这个函数的一个实现：

```
def get_combinations_without_duplicates(n):
    output = []
    second = range(n)
     third = range(n)
for i in range(n):
    triple = [i]
    #Get the second value of the triple, but make sure that it isn't a 
    #duplicate of the first value
    #in the triple or any value that has appeared in the second position of any triple
    choices_for_second = [number for number in second if number not in triple]
    #Randomly select a number from the allowed possibilities
    n_second = random.choice(choices_for_second) 
    #Append it to the triple
    triple.append(n_second)
    #Remove that value from second so that it won't be chosen for other triples
    second = [number for number in second if number != n_second]
    #Do the same for the third value
    choices_for_third = [number for number in third if number not in triple]
    n_third = random.choice(choices_for_third)
    triple.append(n_third)
    third = [number for number in third if number != n_third]
    output.append(tuple(triple))
return output 
```

如下所述，此过程有时会随机选择不起作用的组合。如果您执行以下操作，则可以处理：

```
def keep_trying(n):
    try:
        return get_combinations_without_duplicates(n)
    except IndexError:
        return keep_trying(n) 
```

但是，我想知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T17:53:58.187

Let's try this again.

A few observations.

1.  The first value will always be zero in a sorted array of your tuples.
2.  The length of the array will always be as long as the number of tuples that exist in your array.
3.  You want these to be *randomly* generated.
4.  The tuples are produced in 'sorted' order.

Based on these specifications, we can come up with a procedural method;

1.  Generate 2 lists of serial integers, one to pick from, the other to seed from.
2.  For each number in the seed list, `[0, 1, 2, 3]`, randomly append and remove a number that's not already in the element. `[01, 13, 20, 32]`
3.  Generate another list of serial integers, and repeat. `[012, 130, 203, 321]`

But, this doesn't work. For some iterations, it will back itself into a corner and not be able to generate a number. For instance, `[01, 13, 20, 32].. appending [3, 0, 1... crap, I'm stuck.`

The only way to fix this, is to do a *true* shuffling over the entire row, and reshuffle until one fits. This may take quite a bit of time, and will only get more painful as the sets get longer.

So, procedurally speaking:

**Solution 1:** Random generation

1.  Populate a list with your range. [0, 1, 2, 3]
2.  Create another list. [0, 1, 2, 3]
3.  Shuffle the list. [1, 0, 2, 3]
4.  Shuffle until you find one that fits... [1, 2, 3, 0]
5.  Repeat with the third element.

With this procedure, while a computer can *verify* solutions very quickly, it cannot *generate* solutions very quickly. However, it is merely one of two ways to generate a truly random answer.

Therefore, the fastest guaranteed method would use make use of a verification procedure, rather than a generating procedure. First things first, generate all the possible permutations.

```
from itertools import permutations

n = 4
candidates = [i for i in permutations(xrange(n),3)] 
```

Then.

**Solution 2:** Random verification

1.  Pick a triplet that starts with 0\.
2.  Pop, at random, a triplet that does not start with 0.
3.  Verify if the randomly picked triplet is an intermediate solution.
4.  If not, pop another triplet.
5.  If yes, append the triplet, and *REPOPULATE THE TRIPLET QUEUE*.
6.  Repeat n times. # or until you exhaust the queue, at which point repeat n times naturally becomes TRUE

A solution for the next triplet is mathematically guaranteed to be in the solution set, so if you just let it exhaust itself, a randomized solution should appear. The problem with this approach is that there's no guarantee that every *possible* outcome has an *equal* probability.

**Solution 3:** Iterative verification

For equal probability results, get rid of the randomization, and generate every possible 3-tuple combination, n-lists long-- and verify each of those solution candidates.

Write a function to *verify* over the list of candidate solutions to produce *every* solution, and then randomly pop a solution from that list.

```
from itertools import combinations

results = [verify(i) for i in combinations(candidates, n)]
# this is 10626 calls to verify for n=4, 5 million for n=5 
# this is not an acceptable solution. 
```

Neither Solution 1 or 3 is very fast, O(n**2), but given your criteria, it's possible this is as fast as it'll get if you want a truly random solution. Solution 2 will guaranteed be the fastest of these three, often times significantly beating 1 or 3, Solution 3 has the most stable results. Which of these approaches you choose will depend on what you want to do with the output.

Afterward:

Ultimately, the speed of the code will be contingent on exactly *how random* you want your code to be. An algorithm to spit out the VERY first (and only the very first) instance of a tuple series that satisfies your requirement can run supremely quickly, as it just attacks the permutations in order, once, and it will run in O(n) time. However, it will not do anything randomly...

Also, here's some quick code for verify(i). It's based on the observation that two tuples may not have the same number in the same index.

```
def verify(t):
    """ Verifies that a set of tuples satisfies the combinations without duplicates condition. """
    zipt = zip(*t)
    return all([len(i) == len(set(i)) for i in zipt]) 
```

n = 4 Full Solution Set

```
((0, 1, 2), (1, 0, 3), (2, 3, 0), (3, 2, 1))
((0, 1, 2), (1, 0, 3), (2, 3, 1), (3, 2, 0))
((0, 1, 2), (1, 2, 3), (2, 3, 0), (3, 0, 1))
((0, 1, 2), (1, 3, 0), (2, 0, 3), (3, 2, 1))
((0, 1, 3), (1, 0, 2), (2, 3, 0), (3, 2, 1))
((0, 1, 3), (1, 0, 2), (2, 3, 1), (3, 2, 0))
((0, 1, 3), (1, 2, 0), (2, 3, 1), (3, 0, 2))
((0, 1, 3), (1, 3, 2), (2, 0, 1), (3, 2, 0))
((0, 2, 1), (1, 0, 3), (2, 3, 0), (3, 1, 2))
((0, 2, 1), (1, 3, 0), (2, 0, 3), (3, 1, 2))
((0, 2, 1), (1, 3, 0), (2, 1, 3), (3, 0, 2))
((0, 2, 1), (1, 3, 2), (2, 0, 3), (3, 1, 0))
((0, 2, 3), (1, 0, 2), (2, 3, 1), (3, 1, 0))
((0, 2, 3), (1, 3, 0), (2, 0, 1), (3, 1, 2))
((0, 2, 3), (1, 3, 2), (2, 0, 1), (3, 1, 0))
((0, 2, 3), (1, 3, 2), (2, 1, 0), (3, 0, 1))
((0, 3, 1), (1, 0, 2), (2, 1, 3), (3, 2, 0))
((0, 3, 1), (1, 2, 0), (2, 0, 3), (3, 1, 2))
((0, 3, 1), (1, 2, 0), (2, 1, 3), (3, 0, 2))
((0, 3, 1), (1, 2, 3), (2, 1, 0), (3, 0, 2))
((0, 3, 2), (1, 0, 3), (2, 1, 0), (3, 2, 1))
((0, 3, 2), (1, 2, 0), (2, 1, 3), (3, 0, 1))
((0, 3, 2), (1, 2, 3), (2, 0, 1), (3, 1, 0))
((0, 3, 2), (1, 2, 3), (2, 1, 0), (3, 0, 1)) 
```

n = 5 has 552 unique solutions. Here are the first 20\.

```
((0, 1, 2), (1, 0, 3), (2, 3, 4), (3, 4, 0), (4, 2, 1))
((0, 1, 2), (1, 0, 3), (2, 3, 4), (3, 4, 1), (4, 2, 0))
((0, 1, 2), (1, 0, 3), (2, 4, 0), (3, 2, 4), (4, 3, 1))
((0, 1, 2), (1, 0, 3), (2, 4, 1), (3, 2, 4), (4, 3, 0))
((0, 1, 2), (1, 0, 4), (2, 3, 0), (3, 4, 1), (4, 2, 3))
((0, 1, 2), (1, 0, 4), (2, 3, 1), (3, 4, 0), (4, 2, 3))
((0, 1, 2), (1, 0, 4), (2, 4, 3), (3, 2, 0), (4, 3, 1))
((0, 1, 2), (1, 0, 4), (2, 4, 3), (3, 2, 1), (4, 3, 0))
((0, 1, 2), (1, 2, 0), (2, 3, 4), (3, 4, 1), (4, 0, 3))
((0, 1, 2), (1, 2, 0), (2, 4, 3), (3, 0, 4), (4, 3, 1))
((0, 1, 2), (1, 2, 3), (2, 0, 4), (3, 4, 0), (4, 3, 1))
((0, 1, 2), (1, 2, 3), (2, 0, 4), (3, 4, 1), (4, 3, 0))
((0, 1, 2), (1, 2, 3), (2, 3, 4), (3, 4, 0), (4, 0, 1))
((0, 1, 2), (1, 2, 3), (2, 4, 0), (3, 0, 4), (4, 3, 1))
((0, 1, 2), (1, 2, 3), (2, 4, 1), (3, 0, 4), (4, 3, 0))
((0, 1, 2), (1, 2, 4), (2, 0, 3), (3, 4, 0), (4, 3, 1))
((0, 1, 2), (1, 2, 4), (2, 0, 3), (3, 4, 1), (4, 3, 0))
((0, 1, 2), (1, 2, 4), (2, 3, 0), (3, 4, 1), (4, 0, 3))
((0, 1, 2), (1, 2, 4), (2, 3, 1), (3, 4, 0), (4, 0, 3))
((0, 1, 2), (1, 2, 4), (2, 4, 3), (3, 0, 1), (4, 3, 0)) 
```

So, you can generate solutions like this, but it takes time. If you were going to utilize this, I would cache the solutions generated as is, and then randomly pull from them when you need them for whatever number n. Incidentally, n=5 took a little under a minute to complete, brute force. Since the solution is O(n**2), I expect n=6 to take over an hour, n=7 over a day. The only way you can get return a true randomized solution is by doing it this way.

**Edited:** Random Solution without equal distribution:

The following is code I wrote in attempting to solve this problem, an implementation of **Solution 2**. I figured I would post it, since it is a partial, non-equal distribution solution, and *generates every possible solution*, guaranteed, given enough time.

```
def seeder(n):
    """ Randomly generates the first element in a solution. """
    seed = [0]
    a = range(1, n)
    for i in range(1, 3):
        seed.append(a.pop(random.randint(0,len(a)-1)))
    return [seed]

def extend_seed(seed, n):
    """ Semi-Randomly generates the next element in a solution. """
    next_seed = [seed[-1][0] + 1]
    candidates = range(0, n)
    for i in range(1, 3):
        c = candidates[:]
        for s in next_seed:
            c.remove(s)
        for s in seed:
            try:
                c.remove(s[i])
            except ValueError:
                pass
        next_seed.append(c.pop(random.randint(0,len(c)-1)))
    seed.append(next_seed)
    return seed

def combo(n):
    """ Extends seed until exhausted. 
    Some random generations return results shorter than n. """
    seed = seeder(n)
    while True:
        try:
            extend_seed(seed, n)
        except (ValueError, IndexError):
            return seed

def combos(n):
    """ Ensures that the final return is of length n. """
    while True:
        result = combo(n)
        if len(result) == n:
            return result 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T23:24:41.310

您本质上想要一个[拉丁方格](http://en.wikipedia.org/wiki/Latin_square)，anxn 数字网格，其中每行和每列仅包含每个数字一次，除非您只关心每行中的前三个数字（拉丁矩形）。

**更新：**

我已经删除了无效的代码示例，因为生成具有相等概率的随机拉丁方格并非易事，正如[math.stackexchange.com 上的问题中](https://math.stackexchange.com/questions/63131/generate-random-latin-squares)所讨论的那样。

[SAGE 项目](http://www.sagemath.org/doc/reference/sage/combinat/matrices/latin.html#sage.combinat.matrices.latin.LatinSquare_generator)实现了该问题中提到的算法，因此您可以查看代码以获得灵感。

或者，如果您真的想了解详细信息，请查看[本文](http://cs.anu.edu.au/~bdm/papers/randomlatin.pdf)以了解生成随机拉丁矩形的具体情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T18:11:57.737

实际上 itertools 已经为你解决了这个问题。

```
import itertools

allp = [x for x in itertools.permutations(range(3))]
print allp

mylist = ['A','B','C']
allp2 = [x for x in itertools.permutations(mylist)]
print allp2 
```

输出

```
[(0, 1, 2), (0, 2, 1), (1, 0, 2), (1, 2, 0), (2, 0, 1), (2, 1, 0)]
[('A', 'B', 'C'), ('A', 'C', 'B'), ('B', 'A', 'C'), ('B', 'C', 'A'), ('C', 'A', 'B'), ('C', 'B', 'A')] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T17:57:29.187

只是对你的问题有不同的看法。看看这是否适合你

```
>>> from itertools import chain,combinations
>>> def get_combinations_without_duplicates(iterable):
        return (tuple(chain(*(set(iterable) - set(e) , e))) for e in combinations(iterable,2))

>>> list(get_combinations_without_duplicates(range(3)))
[(2, 0, 1), (1, 0, 2), (0, 1, 2)] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T19:04:28.993

一个简单的列表轮换为所有 n >= 3 提供了一个正确的解决方案：

考虑 n = 5 的旋转解：

```
[
    (0, 1, 2),
    (1, 2, 3),
    (2, 3, 4),
    (3, 4, 0),
    (4, 0, 1)
] 
```

每个数字仅在每个位置出现一次，并且对于每个位置，所有数字都存在。

* * *

一般来说，`len(get_combinations_without_duplicates(n)) == n`对于 n >= 3

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T22:46:24.303

这是一种利用 deque.rotate 的方法

```
>>> datax = []
>>> from collections import deque
>>> data_length = 10
>>> subset_length = 3
>>> for i in xrange(0, subset_length):
...     datax.append(deque(xrange(data_length)))
...
>>> for i in xrange(0, subset_length):
...     datax[i].rotate(i)
...
>>> print zip(*datax)
[(0, 9, 8), (1, 0, 9), (2, 1, 0), (3, 2, 1), (4, 3, 2), (5, 4, 3), (6, 5, 4), (7, 6, 5), (8, 7, 6), (9, 8, 7)] 
```

# ruby-on-rails - Rails 中的列相关选择

> ID：13036086
> 
> 赞同：1
> 
> 时间：2012-10-23T17:33:45.400
> 
> 标签：ruby-on-rails, forms, postgresql

我有一个数据库表，`vehicles`它们由`year`、`make`、`model`和分隔成列`trim`。

我想创建一个表单，用户可以在其中选择`year`，然后是`make`，然后是`model`，然后是`trim`每个选择（除了`year`），同时考虑到它之前的选择。

有没有办法做到这一点？它会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:05:21.717

好吧，你有很多不同的方法来做到这一点。

我会这样做：

```
$("#year']").click(function(){
  var url = '/get_make_values?year=' + $(this).val()
  $("#group").removeOption(/./)
  $.get(url, function(data) {
    $('#group').addOption(data, false);
  });
}); 
```

在您的控制器中，

```
def get_make_values
  val = params[:year]
  #Use val to find records
  options = Vehicles.collect{|x| "'#{x.id}' : '#{x.label}'"}    
  render :text => "{#{options.join(",")}}" 
end 
```

在您的模型中，您可以定义一些范围：

```
class Vehicle < ActiveRecord::Base
  scope :by_year, lambda {|v| where(:year => year)}
  ...
end 
```

希望这可以帮助！

问候

**编辑：**

我会分部分解释

在**javascript**中，我将事件与年份列表相关联，然后我向控制器操作发出 GET 请求，以获取所有 make 值。然后我用它填写 MAKE 列表 你应该这样做来制作、建模和修剪

在**控制器**中，我正在创建一个方法来检索 make 值（由 get 方法调用）。您还必须为其他检索到的值执行此操作。模型和修剪。

在**模型**中，我只是建议了一个资源，您可以使用它来促进查询，即范围功能。

请接受我的回复！

# php - 带有 CC 的 PHP 联系表

> ID：13036089
> 
> 赞同：0
> 
> 时间：2012-10-23T17:34:20.497
> 
> 标签：php, forms

> **可能重复：**
> [PHP 邮件、抄送字段](https://stackoverflow.com/questions/3582126/php-mail-cc-field)

我的任务是在客户网站上的表单中添加抄送。我真正需要的只是将表格提交给指定为 theemail@address.com 的收件人，然后抄送（抄送）到另一个电子邮件地址。

这是我在 doctype (HTML 5) 上方文档顶部的 PHP 方面的内容

```
<?php
    if(isset($_POST['submit'])) {

        if(trim($_POST['contactname']) == '') {
            $hasError = true;
        } else {
            $name = trim($_POST['contactname']);
        }

        if(trim($_POST['subject']) == '') {
            $hasError = true;
        } else {
            $subject = trim($_POST['subject']);
        }

        if(trim($_POST['email']) == '')  {
            $hasError = true;
        } else if (!eregi("^[A-Z0-9._%-]+@[A-Z0-9._%-]+\.[A-Z]{2,4}$", trim($_POST['email']))) {
            $hasError = true;
        } else {
            $email = trim($_POST['email']);
        }

        if(trim($_POST['message']) == '') {
            $hasError = true;
        } else {
            if(function_exists('stripslashes')) {
                $comments = stripslashes(trim($_POST['message']));
            } else {
                $comments = trim($_POST['message']);
            }
        }

        if(!isset($hasError)) {
            $emailTo = 'theemail@address.com';
            $body = "Name: $name \n\nEmail: $email \n\nSubject: $subject \n\nComments:\n $comments";
            $headers = 'From: Sigma Web Site <'.$emailTo.'>' . "\r\n" . 'Reply-To: ' . $email;

            mail($emailTo, $subject, $body, $headers);
            $emailSent = true;
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:37:11.033

要添加 CC，然后添加此标头

`$headers .= "\r\n" . 'CC: somebody@domain.com' . "\r\n";`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:38:54.117

改变

```
$headers = 'From: Sigma Web Site <'.$emailTo.'>' . "\r\n" . 'Reply-To: ' . $email; 
```

到

```
$headers = 'From: Sigma Web Site <'.$emailTo.'>' . "\r\n" . 'Reply-To: ' . $email. "\r\n";
$headers .= 'Cc: '.$ccemail; // $ccemail is carbon copying email address 
```

查看更多关于[邮件（）](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:37:25.480

```
$headers .= "CC: sombodyelse@noplace.com\r\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T17:37:54.897

您可以查看手册[示例：](http://us2.php.net/manual/en/function.mail.php)

```
 $headers .=  "\r\n".'Cc: yourccemail@yourdomain.com' . "\r\n"; 
```

此外，php 使用 filter_var 提供电子邮件验证

```
 filter_var('bob@example.com', FILTER_VALIDATE_EMAIL); 
```

# linux - 在 Fedora Linux 上安装 matlab 时出错

> ID：13036102
> 
> 赞同：-3
> 
> 时间：2012-10-23T17:35:23.103
> 
> 标签：linux, matlab, installation, fedora

我正在尝试`matlab R2008b student`在 Fedora Linux 上安装。当我运行时`/.install`，我得到以下信息（如何解决这个问题）？

```
 An error status was returned by the program 'xsetup',
    the X Window System version of 'install'. The following
    messages were written to standard error:

        /home/abder-rahman/Desktop/tmp/update/install/main.sh: line 86: /home/abder-rahman/Desktop/tmp/update/bin/glnxa64/xsetup: No such file or directory

    Attempt to fix the problem and try again. If X is not available
    or 'xsetup' cannot be made to work then try the terminal
    version of 'install' using the command:

            install* -t    or    INSTALL* -t 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:49:21.213

You have to install some xserver related packages. Assuming you have ubuntu `sudo apt-get install xserver-core xserver-common`

If you have connected to the system (that want to install Matlab) remotely through `ssh`, remember to use `-X` option.

# c# - 在声明中的对象初始化与构造函数中的初始化之间经历不同的行为

> ID：13036107
> 
> 赞同：11
> 
> 时间：2012-10-23T17:35:30.653
> 
> 标签：c#, winforms

这是一个 WinForms C# 应用程序。以下两个片段显示了初始化对象的两种不同方式。他们给出了不同的结果。

这按预期工作：

```
public partial class Form1 : Form
{
  private CameraWrapper cam;
  public Form1()
  {
       cam = new CameraWrapper();
       InitializeComponent();           
  } 
```

这不起作用（详情如下）：

```
public partial class Form1 : Form
{
  private CameraWrapper cam = new CameraWrapper();
  public Form1()
  {
       InitializeComponent();
  } 
```

在内部`CameraWrapper`，我使用第三方 SDK 与相机进行通信。我在 SDK 上注册了一个事件，该事件在结果可用时被调用。

在情况 1（构造函数内部的初始化）中，一切都按预期工作，并且内部的事件处理程序`CameraWrapper`被调用。在情况 2 中，永远不会调用事件处理程序。

我以为这两种对象初始化风格是相同的，但似乎并非如此。为什么？

Here is the entire `CameraWrapper` class. The event handler should get called after a call to `Trigger`.

```
class CameraWrapper
{
    private Cognex.DataMan.SDK.DataManSystem ds;
    public CameraWrapper()
    {
        ds = new DataManSystem();
        DataManConnectionParams connectionParams = new DataManConnectionParams("10.10.191.187");
        ds.Connect(connectionParams);

        ds.DmccResponseArrived += new DataManSystem.DmccResponseArrivedEventHandler(ds_DmccResponseArrived);
    }

    public void Trigger()
    {
        SendCommand("TRIGGER ON");
    }

    void ds_DmccResponseArrived(object sender, DmccResponseArrivedEventArgs e)
    {
        System.Console.Write("Num barcodes: ");
        System.Console.WriteLine(e.Data.Length.ToString());
    }

    void SendCommand(string command)
    {
        const string cmdHeader = "||>";
        ds.SendDmcc(cmdHeader + command);
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T17:39:03.930

> I thought that these two styles of object initialization were identical, but it seems not to be the case.

Not quite.

In the first case, the `CameraWrapper` constructor is called *after* the base class constructor for `Form`. In the second case, the `CameraWrapper` constructor is called, *then* the base class constructor, then the `Form1` constructor body.

It's possible that something within the `Form` constructor affects the execution of the `CameraWrapper` constructor.

# php - 如何获取递归文件名并将其存储到php中的数组中

> ID：13036110
> 
> 赞同：0
> 
> 时间：2012-10-23T17:35:48.650
> 
> 标签：php, file-io

我有一个函数在特定路径中获取递归文件夹的文件名：

```
function getDirectory( $path = '.', $level = 0 ){

$ignore = array( 'cgi-bin', '.', '..');
// Directories to ignore when listing output. Many hosts
// will deny PHP access to the cgi-bin.

$dh = @opendir( $path );
// Open the directory to the handle $dh
$files_matched = array(); 

while( false !== ( $file = readdir( $dh ) ) ){
// Loop through the directory

    if( !in_array($file, $ignore ) && !preg_match("/^.*\.(rar|txt)$/", $file) ){
    // Check that this file is not to be ignored

        if( is_dir( "$path/$file" ) ){
        // Its a directory, so we need to keep reading down...

            echo "<strong>$spaces $file</strong><br />";

            getDirectory( "$path/$file", ($level+1) );
            // Re-call this same function but on a new directory.
            // this is what makes function recursive.

        } else {
            $files_matched[$i] = $file;
            $i++;
        }

    }

}

closedir( $dh );
// Close the directory handle
return $files_matched;
}

echo "<pre>";
$files = getDirectory("F:\Test");
foreach($files as $file) printf("%s<br />", $file);
echo "</pre>"; 
```

我使用 $files_matched 将文件名存储在数组中。

对于上述结果，它只显示“F:\test”下的文件名。

实际上，我在“F:\test”下有一个子文件夹。如何使用数组显示这些文件名进行存储？

如果我修改了代码：

```
$files_matched[$i] = $file;
$i++; 
```

进入：

```
echo "$files<br />"; 
```

这会很好，我只是不知道为什么使用数组来存储文件名以供以后处理是行不通的？

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:05:56.350

我不记得我从哪里得到这个代码，但它有效。

```
<?php

function getDirectoryTree( $outerDir , $x){
    $dirs = array_diff( scandir( $outerDir ), Array( ".", ".." ) );
    $dir_array = Array();
    foreach( $dirs as $d ){
        if( is_dir($outerDir."/".$d)  ){
            $dir_array[ $d ] = getDirectoryTree( $outerDir."/".$d , $x);
        }else{
            if (($x)?ereg($x.'$',$d):1)
            $dir_array[ $d ] = $d;
        }
    }
    return $dir_array;
}

var_dump( getDirectoryTree(getcwd(),'') ); 
```

# c++ - C++ 文件输入中的意外输出

> ID：13036114
> 
> 赞同：-1
> 
> 时间：2012-10-23T17:36:10.030
> 
> 标签：c++, parsing, file-io

我有以下代码用于解析包含数据行的文本文件，例如 1,1,1,1,1,1。

```
while(file >> line)
    {
        words.push_back(line);
    }

    for(int i = 0; i < words.size(); i++)
    {
            if(words.at(i).substr(0, 1) == "[" && words.at(i) != "[header]")
                layers.push_back(words.at(i));

            if(words.at(i).substr(0, 4) == "type")
            {
                temp = words.at(i);
                temp.substr(4, 1);
                types.push_back(temp);
            }

            if(words.at(i) == "[header]")
            {
                map_width = words.at(i+1).substr(6, words.at(i+1).size());
                map_height = words.at(i+2).substr(7, words.at(i+1).size());

                stringstream(map_width) >> width;
                stringstream(map_height) >> height;
            }

            if(words.at(i) == "type=background")
            {
                for(int j = i+1; j <= height + (i+1); j++)
                {
                    int l = 0, m = 1, number = 0, extracted;
                    string extracted_line = words.at(j);

                    for(int k = 0; k <= extracted_line.size(); k++)
                    {
                        cout << number << endl;
                        string ph_character = words.at(j).substr(l, m);
                        if(ph_character == ",")
                        {
                            number = 0;
                            break;
                        }
                        if(ph_character == "0") cout << "Found 0.\n";

                        stringstream(ph_character) >> extracted;
                        number = (number*10) + extracted;

                        switch(number)
                        {
                            case 1:
                                //cout << "Found 1" << endl;
                                break;

                            case 4:
                                cout << "Found 4" << endl;
                                break;
                        }
                        l++; m++;
                    }
                }
            }
    }
    file.close();
} 
```

上面的代码应该遍历文件，将每一行存储在一个字符串数组中，将每一行存储在一个字符串中，然后检查字符串的每个字符。每次遇到“，”字符时，该数字都必须重置，但是输出很疯狂：

```
0
1
11
111
1111
11111
111111
1111111
11111111
111111111
1111111111
-1773790777
-558038505
and so on. 
```

我做错了什么？输出应该是文件的确切内容，通常是 1，然后是 1，然后是 1，然后是 10，基本上是“，”之前的数字。我正在使用 code::blocks 运行 Windows XP Sp3。

编辑：

我试图解析的文件中的一个样本：

```
> 1,1,1,1,1,2,23,23,23,23,23,1,1,1,1,1,1,1,1,1
> 10,10,10,23,1,1,1,1,1,1,1,1,23,23,23,23,1,1,1 
```

并且有更多这样的数据行，但是没有必要进一步泛滥这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:39:56.300

你的问题是它`number`不够大，`11111111111`所以你得到有符号整数溢出，创建你看到打印的数字。您可以尝试使用更大的类型，或者说 boost 中的 bigint。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:00:29.033

你应该改进你的缩进，让你的代码更清晰，然后修复你的数字解析。显然，您的`','`分隔符是在数字之前解析的，而不是之后。诚然，您的代码很难理解（所有这些`.at`和），并且其中 80% 与问题无关，我想`.substr`这是字符串的解析。`word`

所以，如果我没有理解你的问题，没关系，你真的可以更清楚。

* * *

以下是如何做得更好的建议：

```
// TODO: add error handling

// TODO: define start and end position of your vector appropriately
std::vector<std::string>::iterator it = words.begin();
std::vector<std::string>::const_iterator end = words.end();

// iterate over your lines
for( ; it != end; ++it) {

    // tokenize using getline
    std::stringstream this_row( *it );
    std::string substr;
    while (std::getline(this_row, substr, ',')) {

        // extract formatted data using stringstream
        std::stringstream str(substr);
        int number;
        str >> number;
        std::cout << number << std::endl;

        // TODO: do whatever you like with that number
    }
} 
```

* * *

为了进一步阅读，我建议（并且为了比我的简单示例更好的错误处理）：

*   [在 C++ 中拆分字符串？](https://stackoverflow.com/questions/236129/splitting-a-string-in-c?lq=1)
*   [如何在 C++ 中将字符串解析为 int？](https://stackoverflow.com/questions/194465/how-to-parse-a-string-to-an-int-in-c?lq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:48:00.820

是的，你的号码溢出了。带符号的 32 位 int 可以容纳的最大值是 2147483648。您会看到在打印出 11111111111 后发生溢出。

`number = (number*10) + extracted;`将导致您的号码在 10 次迭代后溢出，这正是正在发生的事情。

经过进一步审查，该行`stringstream(ph_character) >> extracted;`可能会在重置为零后覆盖您的号码。如果条件是将数字设置为零，则再次覆盖数字。通常，这是由越界访问数组引起的。

# php - php。删除 URL 和 URL 编码

> ID：13036116
> 
> 赞同：-2
> 
> 时间：2012-10-23T17:36:17.160
> 
> 标签：php

我怎么能把这个字符串：

```
//twitter.com/home?status=Bob Muno %7C via @MyUnknownWebsite https://dev.MyUnknownWebsite.com/people/bob_muno 
```

进入

```
Bob Muno | via @MyUnknownWebsite https://dev.MyUnknownWebsite.com/people/bob_muno 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:48:00.450

```
<?
    $original="//twitter.com/home?status=Bob Muno %7C via @MyUnknownWebsite https://dev.MyUnknownWebsite.com/people/bob_muno";
    $parts=explode("=",$original);
    echo urldecode($parts[1]); // decoding url for %7C -> |
?> 
```

这应该有效。

# ajax - 我也无法让 POST 与 Ajax 一起工作

> ID：13036120
> 
> 赞同：0
> 
> 时间：2012-10-23T17:36:30.923
> 
> 标签：ajax, post

这是我的 CSHTML 文件中的 AJAX 调用：

```
var personId = "Somebody";
var personNotes = "E, F Sharp, A Flat";

var TheData = { "D": { "Id": personId, "Notes": personNotes} };

$.ajax({
    type: "POST",
    url: "/DataHandler.svc/PostResult",
    data: TheData,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (data) {
        $(ValidationErrorDiv).html("It works");
    },
    error: function (HelpRequest, ErrorCode, TheError) {
        $(ValidationErrorDiv).html("It doesn't work - " + TheError);
    }
}); 
```

这是 DataHandler.svc.cs 中的内容：

```
public class PostResultType
{
    public String Id;
    public String Notes;
}

// in the interface:

{   
  [WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json)]
  int PostResult(PostResultType D);
}

// in the class:

public int PostResult(PostResultType D)
{
    return 1;
} 
```

如果按原样调用，Ajax 调用将返回内部服务器错误，而无需访问 C# 代码。

如果我在 Ajax 调用中将“数据：TheData”替换为“数据：JSON.stringify(TheData)”，它会到达 C# 代码，但 D.Id 和 D.Notes 都是空的。

如果我将“PostResultType D”替换为“String Id, String Notes”作为 PostResult 的参数，DataHandler.svc.cs 中的所有调用都会开始引发内部服务器错误。显然，使用 Post 的调用仅限于一个参数。

是的，使用 Get 而不是 Post 会起作用，但最终目标是使用它来更新数据库，所以我更愿意让 Post 工作。

# jquery - 如何使用 jQuery append 将嵌套的 xml 数据放入正确的 html 元素中？

> ID：13036125
> 
> 赞同：0
> 
> 时间：2012-10-23T17:36:59.027
> 
> 标签：jquery, xml, append

我正在尝试使用 append 使用 xml 文件中的数据生成 html。但是我无法让嵌套数据出现在正确的 html 元素中。代码来了。希望你能看到我要做什么。

Javascript

```
$(document).ready(function()
{
  $.ajax({
    type: "GET",
    url: "data.xml",
    dataType: "xml",
    success: parseXml
  });
})

function parseXml(xml) {

    $(xml).find('period').each( function(){
        $('#timeline').append('<div id="slide">');

        $(this).find('event').each(function(i,e){
            $('#slide').append('<div class="image-div">\
            <h1>' + $(this).attr('year') + '</h1>\
            <h2>' + $(this).find('title').text() + '</h2>\
            <img src="images/' + $(this).find('image').text() + '" />\
            <p>' + $(this).find('description').text() + '</p></div>');
        });
        $('#slide').append('</div>');
    });
} 
```

XML 文件 - data.xml

```
<?xml version="1.0" encoding="utf-8"?>
<timeline>
    <imgurl>images/</imgurl>
    <period date="1910">
        <event year="1912">
            <title>Here's a title</title>
            <image>temp.jpg</image>
            <description>Lorem ipsum </description>
        </event>
        <event year="1915">
            <title>Here's a title</title>
            <image>temp.jpg</image>
            <description>Lorem ipsum </description>
        </event>
        <event year="1917">
            <title>Here's a title</title>
            <image>temp.jpg</image>
            <description>Lorem ipsum </description>
        </event>
    </period>
    <period date="1920">
        <event year="1924">
            <title>Title number 2</title>
            <image>temp.jpg</image>
            <description>Lorem ipsum </description>
        </event>
    </period>
    <period date="1930">
        <event year="1937">
            <title>This is the 3rd one</title>
            <image>temp.jpg</image>
            <description>Lorem ipsum </description>
        </event>
    </period>
</timeline> 
```

我要使用的 html 输出结构类似于：

```
<div id="timeline">
    <div id="slide">
        <div class="image-div">...</div>
        <div class="image-div">...</div>
        <div class="image-div">...</div>
    </div>
    <div id="slide">
        <div class="image-div">...</div>
    </div>
    <div id="slide">
        <div class="image-div">...</div>
    </div>
</div> 
```

但是我当前的代码将所有 image-div 元素放入第一个#slide div，而不是根据它们在 xml 文件中的嵌套位置将它们分类为三个不同的#slide div。我实际上可以让它与 document.write 一起正常工作，但由于显而易见的原因，这并不理想，因为它也删除了我的 css。

Append 是我知道从我的 xml 文件生成 html 并且仍然使用单独的样式表来添加样式的唯一方法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:40:16.850

这是因为您只能使用一次 id。你将不得不使用类。将您的代码更改为：

```
$('.slide').addClass('add_content');
$(this).find('event').each(function(i,e){
    $('.add_content:first-child').append('<div class="image-div">\
    <h1>' + $(this).attr('year') + '</h1>\
    <h2>' + $(this).find('title').text() + '</h2>\
    <img src="images/' + $(this).find('image').text() + '" />\
    <p>' + $(this).find('description').text() + '</p></div>');
});
$('.add_content:first-child').append('</div>').removeClass("add_content"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:45:43.993

Tobias 是对的，您只能使用一次 ID，但是，您的代码在技术上由于另一个原因而损坏。

你的来电...

```
$('#slide').append('<div class="image-div"> 
```

...不考虑“当前上下文”。创建幻灯片（附加它）时，保留对它的引用以对其执行 $object.append 而不是使用 jquery 再次从 DOM 中获取元素。

```
var $slide = $('<div id="slide">');
$('#timeline').append($slide);
....
$slide.append('<div class="image-div">') 
```

# coldfusion - 你见过这个奇怪的 QoQ 错误 [ColdFusion] 吗？

> ID：13036134
> 
> 赞同：1
> 
> 时间：2012-10-23T17:37:50.013
> 
> 标签：coldfusion, coldfusion-8, qoq

我已确认第一个查询按预期工作

```
<cfquery name="validation_info" dbtype="query">
    select      shipViaName,TOTALSHIPRATE
    from        s_c_c.qShipCalc
    WHERE       sku in (#preserveSingleQuotes(validate)#)
</cfquery>
<cfquery name="validation_info2" dbtype="query">
    select      TOTALSHIPRATE
    from        validation_info
    WHERE       shipViaName = "FedEx 3 Day"
</cfquery> 
```

但是在第二个查询中，我收到了这个错误：

> 遇到“shipViaName。不正确的条件表达式，不正确的条件表达式，第 0 行第 0 列的词法错误。遇到：“\””（34），后：“”

它说错误发生在这一行：

```
<cfquery name="validation_info2" dbtype="query"> 
```

当我将两个查询合并为一个时，我也遇到了这个错误。

**评论更新：**

验证信息查询的转储：

SHIPVIANAME TOTALSHIPRATE

```
1 | FedEx Ground | 11.9  ||
2 | FedEx 3 Day  | 22.99 || 
3 | FedEx 2 Day  | 26.99 || 
4 | FedEx 1 Day  | 44.55 || 
5 | FedEx Ground | 0     || 
6 | FedEx 3 Day  | 23.63 || 
7 | FedEx 2 Day  | 26.71 || 
8 | FedEx 1 Day  | 41.9  || 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T18:53:10.817

您需要在第二个 SQL 查询中为您的字符串使用单引号而不是双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:56:52.373

我建议使用`cfqueryparam`你的变量，试试这个

```
<cfquery name="validation_info" dbtype="query">
    SELECT      
        shipViaName,
        TOTALSHIPRATE
    FROM        
        s_c_c.qShipCalc
    WHERE       
        sku IN (<cfqueryparam value="#validate#" cfsqltype="CF_SQL_INTEGER" list="yes" /> )
</cfquery> 
```

# fortran - fortran 2003 中的通用过程

> ID：13036135
> 
> 赞同：2
> 
> 时间：2012-10-23T17:37:53.233
> 
> 标签：fortran, fortran2003

我知道 fortran 有一个通用过程的概念，它允许用户定义几个特定的​​过程并将他们的接口收集在一个接口块中。然而，我不清楚的是，是否可以通过仅使用通用函数的一种实现来消除代码重复。

例如，考虑内在的 SIN 函数。它可以接受实数和双精度参数。这是否意味着有两个实现说 SIN_REAL 和 SIN_DOUBLE_PRECISION 具有完全相同的代码？

为这个幼稚的问题道歉，我是一个 fortran 初学者。谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:02:29.347

> 例如，考虑内在的 SIN 函数。它可以接受实数和双精度参数。这是否意味着有两个实现说 SIN_REAL 和 SIN_DOUBLE_PRECISION 具有完全相同的代码？

是的。但是您可以管理常见的编程部分，将其放入包含文件中。

# c++ - 64bit vc++程序似乎在32bit模式下运行

> ID：13036139
> 
> 赞同：10
> 
> 时间：2012-10-23T17:38:08.110
> 
> 标签：c++, win64

我在 Visual Studio 2010 中创建了一个 64bit c++ 项目（在 Windows 7 64bit 下）；

我以为我正在运行一个 64 位应用程序，以下代码返回*true*：

```
bool is64bit = (sizeof(void*)==8); 
```

但如果我调用该函数`IsWow64Process`，它返回*FALSE* ...

更奇怪的事情：

*   调用`LoadLibrary()`加载下的 dll`c:\windows\system32\some.dll`效果很好
*   在下加载 dll`c:\windows\sysWow64\some.dll`将失败（错误代码 193：some.dll 不是有效的 win32 应用程序）

所有这些失败都表明应用程序在 32 位模式下运行，但这与指针类型是 8 字节长度的事实背道而驰

我很困惑，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T17:39:39.827

> 调用 LoadLibrary() 加载 c:\windows\system32\some.dll 下的 dll 效果很好；在 c:\windows\sysWow64\some.dll 下加载 dll 将失败

您所说的一切都表明您正在运行 64 位。

在 Windows 64 位中，该`System32`文件夹包含*64 位版本*的 DLL，该`SysWow64`文件夹包含*32 位版本*。返回 TRUE时`IsWow64Process`，表示您是 64 位操作系统上的 32 位应用程序。

这与文件夹中的名称所暗示的相反，这可能是这看起来令人困惑的原因。基本上，该文件夹是在[WoW64](http://en.wikipedia.org/wiki/WoW64)`SysWow64`下使用的 32 位版本，即“Windows 64 位上的 Windows 32 位” - 基本上，*运行 32 位时*使用 WoW64 DLL ，运行 64 位时使用普通 DLL。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T17:43:32.593

按`Ctrl-Shitf-Esc`运行任务管理器应用程序。在“进程”选项卡中，您将看到`*32`每个 32 位进程名称的标签。这是检查进程位数的最简单方法之一。*

# html - 锚链接从固定在顶部的标题下方开始

> ID：13036142
> 
> 赞同：21
> 
> 时间：2012-10-23T17:38:55.177
> 
> 标签：html, css

我有一个页面，顶部有一个固定的标题，高度为 63 像素。在此之下，我有页面的不同部分（div），它们本质上是单独的页面。每个部分都在标题中链接为相关 div id 的锚链接。我遇到的问题是，当单击锚链接时，div 的顶部从文档的顶部开始，而不是在标题下方。任何解决方案都会非常有帮助。

标题的 CSS 代码：

> ```
> #headercontainer{
> position:fixed;
> background-color:#1a1813; 
> top:0px;
> left:0px;
> width:100%;
> height:63px;
> z-index:1;} 
> ```

```
#headercontent{
position:relative;
background-image:no-repeat; 
top:0px;
left:0px;
width:1280px;
margin-left:auto;
margin-right:auto;} 
```

第一部分的 CSS 代码（单击锚点时应位于标题下方：

```
#landingcontainer{
margin-top:63px;
position:relative;
width:100%;
height:700px;
background-color:#000000;}

#landingcontent{
position:relative;
width:1280px;
height:700px;
margin-left:auto;
margin-right:auto;
background-image:url("../images/landing/landing_bg.png");
background-repeat:no-repeat; 
```

}

需要的 HTML 到点：

```
<!-- START BODY CONTAINER -->
<div id="bodycontainer">
    <!-- START HEADER -->
    <div id="headercontainer">
        <!-- START HEADER CONTENT -->
        <div id="headercontent">
            <div id="headerbg">
                <a href="#landingcontainer"><div id="headerlogo"></div></a>
                <div id="headercard"></div>
                <div id="headernavigation">
                    <ul>
                        <a href="#menucontainer"><li>Menu</li></a>
                        <li>Sauces</li>
                        <li>Ranches</li>
                        <li>Order</li>
                        <li>Franchise</li>
                        <li>About</li>
                    </ul>
                </div>
                <div id="headersociallinks"></div>
            </div>
        </div>
        <!-- END HEADER CONTENT -->
    </div>
    <!-- END HEADER -->

    <!-- START LANDING SECTION -->
    <div id="landingcontainer"> 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-23T19:30:20.707

对于这个问题，我有更好的解决方案。

• 首先在css 中可以创建一个类（随便你怎么称呼它）

```
.anchor{
   display:block;
   height:63px; /* this is the height of your header */
   margin-top:-63px; /* this is again negative value of the height of your header */
   visibility:hidden;
} 
```

• 在您的实际 div 部分开始之前的 HTML 中，例如，我`#landingcontainer`应该添加一个 span 标签，其中包含锚类（我们在上面制作）和任何您想要的 id。对我来说，我这样做了：

```
<span class="anchor" id="landing"></span> 
```

然后实际的链接现在不会链接到您想要将它们带到的部分的实际 div id，而是必须在链接中给出 span 标签的 id。

```
<a href="#landing">HOME</a> 
```

你有它！

我们在这里所做的本质上是让浏览器在跨度开始的地方停止，这正是标题的高度，这使得查看器变得不明智；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:14:31.557

只需将 a 添加`padding-top: 63px;`到您要锚链接的元素。即一个假设`<div id="sauceslanding">`的 CSS 会`#sauceslanding { padding-top: 63px; }`带有指向它的链接`<a href="#sauceslanding">Sauces</a>`。

测试了它，这对我有用。如果它对您不起作用，请创建一个 jsfiddle 或一些我们可以玩的实时测试，看看您的代码中是否有问题。

**更新**

你有这个：

```
#menucontainer{
    position:relative;
    width:100%;
    height:700px;
    background-color:#1d0f00;
    padding-top:63px;
}
/* END MENU CONTAINER */

/* MENU CONTENT */
#menucontent{
    position:relative;
    width:1280px;
    height:700px;
    margin-left:auto;
    margin-right:auto;
    background-image:url("../images/menu/menu_bg.png");
    background-size:cover; 
    background-repeat:no-repeat;
} 
```

将其更新为：

```
#menucontainer{
    position:relative;
    width:100%;
    height:700px;
    background-color:#1d0f00;
    padding-top:63px;
    background-image:url("../images/menu/menu_bg.png");
}
/* END MENU CONTAINER */

/* MENU CONTENT */
#menucontent{
    position:relative;
    width:1280px;
    height:700px;
    margin-left:auto;
    margin-right:auto;
    background-size:cover; 
    background-repeat:no-repeat;
} 
```

然后您可能会看到图像的顶部随后被切断，就好像没有填充一样。然后您需要做的是修改您的背景图像以增加 63 像素的死区（将栅栏图案向北延伸）。那你就可以走了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-06T16:45:17.147

我有一页`<p class="paragraph" id="#uniqueid">`标签，所以元素上没有预设/可预测的高度。效果最好的解决方案——不会对其他已建立的 CSS/布局造成严重破坏——是来自[CSS-tricks](https://css-tricks.com/hash-tag-links-padding/)的解决方案：

```
div#container p.paragraph:before {
  content: " "; 
  margin-top: -180px; 
  height: 180px; 
  visibility: hidden; 
} 
```

不需要其他任何东西。

（仅供考虑使用此解决方案的任何人：只要您不需要受影响元素中的任何内容即可单击/选择，它就可以工作，因为此方法似乎与事物的实际屏幕位置相混淆。但对于随意浏览。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-02T09:51:05.547

在[Muhammed Bhikha 的解决方案的](https://stackoverflow.com/a/13037793/157247)`::before`基础上，您可以通过将其应用于您想要用作锚目标的任何元素的元素来完全避免额外的标记。例如，这个版本在所有带有 a 的元素和所有带有 a`::before`的元素上使用伪元素（例如，通常的目标）。（你可能想用一个类来缩小范围，这取决于你是否在 [say] 一些带有 s 的元素上使用其他东西。）`id``a``name``::before``id`

```
a[name]::before,
[id]::before {
    content: '';
    display: block;
    visibility: hidden;
    height: 63px;      /* this is the height of your header */
    margin-top: -63px; /* this is the height of your header, negated */
} 
```

例子：

```
header {
    position: fixed;
    min-height: 63px;
    top: 0;
    width: 100%;
    height: 63px;
    background-color: blue;
}

main {
    margin-top: 63px;
}

a[name]::before,
[id]::before {
    content: '';
    display: block;
    visibility: hidden;
    height: 63px;      /* this is the height of your header */
    margin-top: -63px; /* this is the height of your header, negated */
}
```

```
<header>
    Header
</header>
<main>
<ul>
    <li><a href="#one">One</a></li>
    <li><a href="#two">Two</a></li>
    <li><a href="#three">Three</a></li>
    <li><a href="#four">Four</a></li>
    <li><a href="#five">Five</a></li>
</ul>
<p id="one">One: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p><a name="two"></a>Two: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p id="three">Three: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p><a name="four"></a>Four: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p id="five">Five: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<!-- So there's room to scroll at the bottom -->
<div style="min-height: 100vh"></div>
</main>
```

# wpf - 不确定我的 DataGrid 控件的外观是怎么回事

> ID：13036148
> 
> 赞同：0
> 
> 时间：2012-10-23T17:39:10.050
> 
> 标签：wpf, datagrid

`DataGrid`我的 WPF 应用程序的主窗口上有一个控件。我的应用程序有一个“白天模式”和一个“夜间模式”，因为它在警车上运行，它需要一个更柔和且不那么明亮的配色方案以供夜间使用。问题是在夜间模式下输入的第一行数据`DataGrid`最终具有白色背景，我不知道它来自哪里。

我已经安装了 Snoop，但由于某种原因，我的程序的主窗口没有出现在 Snoop 识别为 WPF 窗口的窗口列表中，所以它没用。我确实升级到了 3.8，我相信这是最新版本，但仍然没有乐趣。

我知道该`DataGrid's SelectedIndex`属性是-1，所以它不是选定的行。在我的程序中，我为选定的行提供了其他颜色选择。我不知道控件试图显示什么以及为什么它会使背景变白。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:23:18.003

这里发生了几件事。

事实证明，[本教程](http://wpftutorial.net/MergedDictionaryPerformance.html)`DataGrid`中描述了白色背景的原因。 为了解决这个问题，我将我的样式在合并的资源目录树中上移了一个级别。

Snoop 的问题是由以管理员身份运行 VS 但以普通用户身份运行 Snoop 引起的。以管理员身份运行 Snoop 允许它查看我的程序并与之交互。

# asterisk - 应答呼叫时 Asterisk 运行脚本

> ID：13036151
> 
> 赞同：4
> 
> 时间：2012-10-23T17:39:16.543
> 
> 标签：asterisk

每次接听电话（由使用 sip 电话的人）时，我都需要运行 perl 或 php 脚本。

我正在使用 FreePBX，该系统将用于管理扩展，所以无论我做什么，我都需要确保从 FreePBX 界面添加新扩展或修改扩展不会清除调用脚本的部分。

该人可能直接拨打分机，通过振铃组或 IVR 到达分机，或者他们可能已被转移。该脚本需要在所有情况下运行。

我知道我需要在其中一个配置文件中添加一行：

> exten => s,n,System(myperlscript.pl "caller=${ARG1} exten=${ARG2} 被调用=${ARG3}")

这只是一个示例代码，我很可能会弄清楚那部分。

问题是我不知道将其放入哪个配置文件，或者将其放入该文件的何处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:34:34.980

我想通了，所以我会把答案放在这里，以防它帮助任何人。

在 FreePBX 网络管理员中有两个文件

/libararies/extensions.class.php /modules/core/functions.inc.php

在 extensions.class.php 我添加了以下类

```
class ext_crmagi extends extension {
    var $pri;
    var $ext;
    var $context;

function ext_crmagi($pri, $ext = false, $context = false) {
    if ($context !== false && $ext === false) {
        trigger_error("\$ext is required when passing \$context in ext_crmagi::ext_crmagi()");
    }

    $this->pri = $pri;
    $this->ext = $ext;
    $this->context = $context;
}

function incrementContents($value) {
    $this->pri += $value;
}

function output() {
    return 'AGI(myphpscript.php, ${CALLERID(num)}, ${CALLERID(name)}, ${EXTEN}, ${SIPCALLID}, ${UNIQUEID})' ;
}
} 
```

我添加的 in functions.inc.php

```
$ext->add('ext-local', $exten['extension'], '', new ext_crmagi('','')); 
```

然后，无论何时您使用 Web 界面添加扩展，它也会添加到 agi 脚本中，从而允许您使用 php 与星号进行交互。

# emacs - 如何在 MS Windows 上结合 Emacs 主/剪贴板复制和粘贴行为？

> ID：13036155
> 
> 赞同：14
> 
> 时间：2012-10-23T17:39:43.223
> 
> 标签：emacs, copy-paste

Emacs 24 改变了复制/粘贴行为的工作方式以符合现代 X 应用程序（请参阅[本文](http://batsov.com/articles/2011/08/19/a-peek-at-emacs24/)“选择更改”下的文章）。他们明确地将主要选择和鼠标中键粘贴与剪贴板复制/粘贴分开。

对我来说不幸的是，在 MS Windows 下使用本机（不是 cygwin！）Emacs 24.2.1，这弄乱了我想要的工作方式。

这是我想要的：

1.  在 Emacs 中突出显示（选择）文本会自动将其复制到 Windows 剪贴板。如果我将它（Ctrl-V）粘贴到另一个 Windows 应用程序中，它会粘贴。如果我在 Emacs 中键入 Cy (yank)，它会粘贴。如果我在 Emacs 中单击鼠标中键，它会粘贴。
2.  在 Emacs (Cw) 中执行 Kill 会将数据复制到剪贴板。如果我将它（Ctrl-V）粘贴到另一个 Windows 应用程序中，它会粘贴。如果我在 Emacs 中键入 Cy (yank)，它会粘贴。如果我在 Emacs 中单击鼠标中键，它会粘贴**剪贴板内容，而不是最后选择的文本**。
3.  我从另一个 Windows 应用程序（例如，通过 Ctrl-C）复制到剪贴板的任何内容都可以通过键入 Cy（yank）**或中键**（现在，中键粘贴最后选择的文本，而不是剪贴板内容）粘贴到 Emacs ）。

总而言之，我认为这意味着消除 Emacs 中主要选择和剪贴板之间的区别。我希望一切都在剪贴板上起作用！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-24T05:52:22.707

来自 NEWS 的以下条目似乎是相关的：

*   `mouse-drag-copy-region`现在默认为零。

*   mouse-2 现在绑定到`mouse-yank-primary`.

这从主要选择中粘贴，忽略了杀伤环。以前，mouse-2 绑定到`mouse-yank-at-click`.

*   要返回之前的行为，请执行以下操作：

    *   改为`select-active-regions`零。
    *   更改`mouse-drag-copy-region`为 t。
    *   更改`x-select-enable-primary`为 t（仅在 X 上）。
    *   改为`x-select-enable-clipboard`零。
    *   绑定`mouse-yank-at-click`到鼠标 2。

我认为要在 Windows 上获得以前的行为，您需要保留它们`x-select-enable-primary`的`x-select-enable-clipboard`当前值，并且可能`select-active-regions`与您在这里抱怨的行为变化无关。

* * *

以下是要放入 .emacs 文件的确切行：

```
(setq select-active-regions nil)
(setq mouse-drag-copy-region t)
(global-set-key [mouse-2] 'mouse-yank-at-click) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T22:18:54.723

似乎拖动鼠标对剪贴板没有任何作用。以下补充了这一点，但我不知道它做了什么来指向和标记：

```
(defadvice mouse-drag-region (after copy-to-clipboard activate)
  (clipboard-kill-ring-save (region-beginning) (region-end))
  (goto-char st) (push-mark nd nil t)
  ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:59:30.693

*   据我所知，第 2 点和第 3 点已经“开箱即用”了？
*   另外，我认为您对提供历史记录（例如杀人戒指）不感兴趣？
*   您的意思是突出显示“选择它”（在 emacs 中称为区域），还是实际上突出显示它（给它一种颜色，比如黄色）？

如果您的意思是选择它，我认为问题在于 Emacs 不知道您的选择何时结束，因此必须将其复制到剪贴板？这就是为什么您会使用`Meta-W`(Alt-Shift-w) 将其复制到`kill-ring`Emacs 外部可访问的 .

（我在此处发布此内容是因为我认为这些评论令人困惑，但稍后我将删除或更改此答案）

我想你会在以下位置找到你需要的所有信息`mouse.el`：

要到达那里，请尝试：`C-h``k``any mouse button`并单击 mouse.el 以找出它的定义位置。如果您在文件中查找更多“ `global-set-key`”，您可能会找到您正在寻找的内容（我仍然不是 100% 确定这一点）

# java - Spring Data：覆盖保存方法

> ID：13036159
> 
> 赞同：50
> 
> 时间：2012-10-23T17:39:56.540
> 
> 标签：java, spring-data

我正在考虑一个项目的弹簧数据。是否可以覆盖每个默认生成的保存方法？如果是，如何？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2015-03-12T10:05:37.583

只需像往常一样创建您的自定义接口，并在那里声明您想要覆盖的方法，并使用与`CrudRepository`（或`JpaRepository`等）公开的方法相同的签名。假设您有一个`MyEntity`实体和一个`MyEntityRepository`存储库，并且您想要覆盖默认的自动生成`save`方法，`MyEntityRepository`该方法采用唯一的实体实例，然后定义：

```
public interface MyEntityRepositoryCustom {
  <S extends MyEntity> S save(S entity);
} 
```

`MyEntityRepositoryImpl`并像往常一样在您的 中实现此方法：

```
@Transactional
public class MyEntityRepositoryImpl implements MyEntityRepositoryCustom {
  public <S extends MyEntity> S save(S entity) {
    // your implementation
  }
} 
```

然后，像往常一样，让`MyEntityRepository`extend `MyEntityRepositoryCustom`。

这样做，Spring Data JPA 将调用`save`您的方法`MyEntityRepositoryImpl`而不是默认实现。至少这对我来说适用`delete`于 Spring Data JPA 1.7.2 中的方法。

* * *

## “不明确的参考”错误

正如一些评论者所报告的，可能是从某个 Spring Data JPA 版本或 javac 版本开始（我不能说它是什么时候开始失败的，但我确定它之前确实有效）javac 编译器开始编译覆盖方法上的错误：“不明确的引用”。Eclipse JDT 不返回此错误并且代码在运行时工作，实际上我打开[错误 463770](https://bugs.eclipse.org/bugs/show_bug.cgi?id=463770)的原因是：它是 javac 错误或不符合 javac 的 JDT 错误。这就是说，卢卡斯在下面发布了解决方法，乍一看似乎与上面描述的相同。实际上，区别在于**必须**包含泛型类型的`MyEntityRepositoryCustom`, 声明**`<S>`，即使它显然没用。因此，如果您遇到此错误，请将自定义接口声明更改为：**

 **```
public interface MyEntityRepositoryCustom<S> {
  <S extends MyEntity> S save(S entity);
} 
```

并让标准存储库接口实现`MyEntityRepositoryCustom<MyEntity>`而不仅仅是`MyEntityRepositoryCustom`.

但是，如果您不想生成自定义接口，则可以为`save`方法[2](https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/#repositories.single-repository-behavior)提取一个单独的片段接口。然后解决方案如下所示：

```
public interface MyEntityRepositoryCustom {
  // custom methods
}

public interface CustomizedSaveRepository<T> {
  <S extends T> S save(S entity);
}

@Transactional
public class MyEntityRepositoryImpl implements MyEntityRepositoryCustom,
 CustomizedSaveRepository<MyEntity> {

  @Override
  public MyEntity save(MyEntity entity) {
    // your implementation for CustomizedSaveRepository#save
  }

  // implementations of MyEntityRepositoryCustom
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-01-15T15:21:04.897

要覆盖默认生成的保存方法，您需要在您自己的自定义存储库实现中使用 Spring Data 存储库实现的聚合。

仓库界面：

```
public interface UserRepository extends CrudRepository<User, String>{

} 
```

您的存储库实现：

```
@Repository("customUserRepository")
public class CustomUserRepository implements UserRepository {

    @Autowired
    @Qualifier("userRepository") // inject Spring implementation here
    private UserRepository userRepository;

    public User save(User user) {
        User user = userRepository.save(entity);
        // Your custom code goes here
        return user;
    }

    // Delegate other methods here ...

    @Override
    public User findOne(String s) {
        return userRepository.findOne(s);
    }
} 
```

然后在您的服务中使用您的自定义实现：

```
@Autowired
@Qualifier("customUserRepository")
private UserRepository userRepository; 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-10T09:26:44.177

没有让它很好地工作，所以我把我需要的逻辑放到一个服务类中，并保持存储库保存方法不变。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-02-09T22:02:24.750

我猜你扩展 SimpleJpaRepository ：

```
public class **CustomSimpleJpaRepository** extends SimpleJpaRepository {

@Transactional
public <S extends T> S save(S entity) { //do what you want instead }
} 
```

然后通过扩展确保使用它而不是默认的 SimpleJpaRepository：

```
public class CustomJpaRepositoryFactory extends JpaRepositoryFactory {

    protected <T, ID extends Serializable> JpaRepository<?, ?> getTargetRepository(RepositoryMetadata metadata, EntityManager entityManager) {

      Class<?> repositoryInterface = metadata.getRepositoryInterface();
      JpaEntityInformation<?, Serializable> entityInformation = getEntityInformation(metadata.getDomainType());

      SimpleJpaRepository<?, ?> repo = isQueryDslExecutor(repositoryInterface) ? new QueryDslJpaRepository(
            entityInformation, entityManager) : new CustomSimpleJpaRepository(entityInformation, entityManager);
    repo.setLockMetadataProvider(lockModePostProcessor.getLockMetadataProvider());

      return repo;
  }
} 
```

还没有完成，我们还需要有自己的工厂 bean 才能在配置 xml 中使用它：

```
public class CustomRepositoryFactoryBean <T extends JpaRepository<S, ID>, S, ID extends Serializable> extends JpaRepositoryFactoryBean<T, S, ID> {

protected RepositoryFactorySupport createRepositoryFactory(EntityManager entityManager) {
    return new **CustomJpaRepositoryFactory**(entityManager);
} 
```

}

配置：

```
<jpa:repositories base-package="bla.bla.dao" factory-class="xxxx.**CustomRepositoryFactoryBean**"/> 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-07-22T16:00:08.467

为了正确覆盖保存方法，您必须创建一个接口，该接口具有在 CrudRepository 上声明的原始方法的正确签名，包括泛型

```
public interface MyCustomRepository<T> {
    <S extends T> S save(S entity);
} 
```

然后，创建您的实现（后缀 Impl 在类的名称中很重要）

```
public class MyCustomRepositoryImpl implements MyCustomRepository<MyBean> {

    @Autowired
    private EntityManager entityManager;

    @Override
    public <S extends MyBean> S save(S entity) {
       /**
         your custom implementation comes here ...
         i think the default one is just        
        return this.entityManager.persist(entity);
       */
    }

} 
```

最后，使用之前创建的接口扩展您的存储库

```
@RepositoryRestResource
@Repository
public interface MyBeanRepository extends PagingAndSortingRepository<MyBean, Long>, MyCustomRepository<MyBean> {} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-05-15T21:29:49.447

我在 OpenJDK 11 上使用 Spring Boot 2.1.4 并且还不断`ambiguous reference`从编译器中收到错误（尽管我的 IDE 使用的 Eclipse JDT 编译器没有问题，所以直到我尝试构建时才发现这个问题它在我的 IDE 之外）。

我基本上最终在我的扩展接口中定义了一个具有不同名称的方法，然后`default`在我的主存储库接口中使用覆盖在调用正常时调用它`save()`。

这是一个例子：

**像往常一样为您的自定义逻辑定义接口：**

```
public interface MyEntityRepositoryCustomSaveAction {
    public MyEntity saveSafely(MyEntity entity);
} 
```

**使您的存储库扩展该接口：**

```
public interface MyEntityRepository extends JpaRepository<MyEntity, MyEntityId>,
  MyEntityRepositoryCustomSaveAction {

    @Override
    @SuppressWarnings("unchecked")
    default MyEntity save(MyEntity entity)
    {
        return saveSafely(entity);
    }
} 
```

请注意，我们已经覆盖了 save() from `JpaRepository`（好吧，真的`CrudRepository`是`JpaRepository`扩展）来调用我们的自定义方法。编译器会警告未经检查的转换，所以如果你想用`@SuppressWarnings`.

**使用您的自定义逻辑遵循 Impl 类的约定**

```
public class MyEntityRepositoryCustomSaveActionImpl implements 
  MyEntityRepositoryCustomSaveAction {

    @PersistenceContext
    private EntityManager entityManager;

    @Override
    public MyEntity saveSafely(MyEntity entity) {
       //whatever custom logic you need
    }

} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-01-20T11:28:29.223

如果您要重用原始方法，这可能会有所帮助。只需注入`EntityManager`实现类。

```
public interface MyEntityRepositoryCustom {
  <S extends MyEntity> S save(S entity);
}

public class MyEntityRepositoryImpl implements MyEntityRepositoryCustom {

    // optionally specify unitName, if there are more than one
    @PersistenceContext(unitName = PRIMARY_ENTITY_MANAGER_FACTORY)
    private EntityManager entityManager;

    /**
     * @see org.springframework.data.jpa.repository.support.SimpleJpaRepository
     */
    @Transactional
    public <S extends MyEntity> S save(S entity) {
        // do your logic here
        JpaEntityInformation<MyEntity, ?> entityInformation = JpaEntityInformationSupport.getMetadata(MyEntity.class, entityManager);
        if (entityInformation.isNew(entity)) {
            entityManager.persist(entity);
            return entity;
        } else {
            return entityManager.merge(entity);
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-03-20T08:03:58.113

如果您只使用接口，则可以使用默认方法对`CrudRepository`or进行简单的覆盖`JpaRepository`：

```
 public interface MyCustomRepository extends CrudRepository<T, ID> {

  @Override
  default <S extends T> S save(S entity)
  {
    throw new UnsupportedOperationException("writes not allowed");
  }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-07-13T06:36:28.193

使用 JPA 事件侦听器，例如 @PrePersist、@PreUpdate。如果底层 JPA 提供程序支持此功能，这将起作用。这是 JPA 2 的特性，所以最新的 Hibernate、EclipseLink 等应该支持它。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-09-28T08:21:54.260

什么对我有用（Spring boot 2.x Java 11），即使不是很干净。它使用 IDE 和 Maven 和 Gradle 编译。Lucas 的上述解决方案不适用于 JpaRepository。

```
public interface MyRepo extends JpaRepository<MyType, Long>, MyRepoCustom{

   //Implemented in MyRepoCustom
   public MyType save(MyType mytypeEntity);
} 
```

自定义接口（重复声明，不好）：

```
public interface MyRepoCustom{
    public MyType save(MyType mytypeEntity);
} 
```

自定义 Impl：

```
@Repository
public class MyRepoImpl implements MyRepoCustom{
    @PersistenceContext
    private EntityManager em;

    @Transactional
    public MyType save(MyType mytypeEntity) {
       //type safe implementation
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-07-05T20:21:33.393

@ytterrr 的解决方案有效，但对于较旧的 Spring Data 版本，至少对于**Spring Data 2.1** ，这不仅可以覆盖任何存储库方法，还可以访问底层功能（访问实体管理器以持久、删除、查找...）：

```
public interface MyEntityRepositoryCustom {
  <S extends MyEntity> S save(S entity);
}

public class MyEntityRepositoryImpl implements MyEntityRepositoryCustom {

    final JpaEntityInformation<MyEntity, ?> entityInformation;
    EntityManager em;

    public MyEntityRepositoryImpl(EntityManager entityManager) {
        this.entityInformation = JpaEntityInformationSupport.getEntityInformation(MyEntity.class, entityManager);
        this.em = entityManager;
    }

    /**
     * @see org.springframework.data.jpa.repository.support.SimpleJpaRepository
     */
    @Transactional
    public <S extends MyEntity> S save(S entity) {

        // do your logic here

        if (entityInformation.isNew(entity)) {
            em.persist(entity);
            return entity;
        } else {
            return em.merge(entity);
        }
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-30T18:06:40.933

我正在将应用程序从 Spring Boot 1.5 更新到 Spring Boot 2.0 的过程中，突然发现我们在保存方法中的一些自定义行为不再起作用，结果我们不得不更新保存方法的签名在我们的存储库上工作。请注意，我必须在函数上添加泛型类参数和泛型参数才能使 Eclipse 内部的构建和通过 CLI（gradle）工作。

所以我改变了我的自定义存储库界面，如下所示：

```
interface ScoreRepositoryCustom {
  Score save(Score score);
} 
```

对此（以匹配 CrudRepository 中的签名）：

```
interface ScoreRepositoryCustom<T> {
  <S extends T> S save(S to);
} 
```**

# php - PHP 的 array_map 包括键

> ID：13036160
> 
> 赞同：281
> 
> 时间：2012-10-23T17:40:00.153
> 
> 标签：php, functional-programming

有没有办法做这样的事情：

```
$test_array = array("first_key" => "first_value", 
                    "second_key" => "second_value");

var_dump(array_map(function($a, $b) { return "$a loves $b"; }, 
         array_keys($test_array), 
         array_values($test_array))); 
```

但不是调用`array_keys`and `array_values`，而是直接传递`$test_array`变量？

所需的输出是：

```
array(2) {
  [0]=>
  string(27) "first_key loves first_value"
  [1]=>
  string(29) "second_key loves second_value"
} 
```

* * *

## 回答 #1

> 赞同：262
> 
> 时间：2012-10-23T17:51:18.810

不适用于 array_map，因为它不处理键。

[array_walk](http://www.php.net/manual/en/function.array-walk.php)可以：

```
$test_array = array("first_key" => "first_value",
                    "second_key" => "second_value");
array_walk($test_array, function(&$a, $b) { $a = "$b loves $a"; });
var_dump($test_array);

// array(2) {
//   ["first_key"]=>
//   string(27) "first_key loves first_value"
//   ["second_key"]=>
//   string(29) "second_key loves second_value"
// } 
```

然而，它确实改变了作为参数给出的数组，所以它不完全是函数式编程（因为你有这样的问题标签）。此外，正如评论中所指出的，这只会更改数组的值，因此键不会是您在问题中指定的键。

如果你愿意，你可以编写一个函数来修复你自己上面的点，如下所示：

```
function mymapper($arrayparam, $valuecallback) {
  $resultarr = array();
  foreach ($arrayparam as $key => $value) {
    $resultarr[] = $valuecallback($key, $value);
  }
  return $resultarr;
}

$test_array = array("first_key" => "first_value",
                    "second_key" => "second_value");
$new_array = mymapper($test_array, function($a, $b) { return "$a loves $b"; });
var_dump($new_array);

// array(2) {
//   [0]=>
//   string(27) "first_key loves first_value"
//   [1]=>
//   string(29) "second_key loves second_value"
// } 
```

* * *

## 回答 #2

> 赞同：203
> 
> 时间：2015-05-29T21:28:00.463

这可能是最短和最容易推理的：

```
$states = array('az' => 'Arizona', 'al' => 'Alabama');

array_map(function ($short, $long) {
    return array(
        'short' => $short,
        'long'  => $long
    );
}, array_keys($states), $states);

// produces:
array(
     array('short' => 'az', 'long' => 'Arizona'), 
     array('short' => 'al', 'long' => 'Alabama')
) 
```

* * *

## 回答 #3

> 赞同：86
> 
> 时间：2017-03-24T16:49:16.010

这是我非常简单的、与 PHP 5.5 兼容的解决方案：

```
function array_map_assoc(callable $f, array $a) {
    return array_column(array_map($f, array_keys($a), $a), 1, 0);
} 
```

您提供的可调用对象本身应该返回一个包含两个值的数组，即`return [key, value]`. 因此，内部调用会[`array_map`](https://secure.php.net/manual/en/function.array-map.php)产生一个数组数组。然后通过 将其转换回一维数组[`array_column`](https://secure.php.net/manual/en/function.array-column.php)。

### 用法

```
$ordinals = [
    'first' => '1st',
    'second' => '2nd',
    'third' => '3rd',
];

$func = function ($k, $v) {
    return ['new ' . $k, 'new ' . $v];
};

var_dump(array_map_assoc($func, $ordinals)); 
```

### 输出

```
array(3) {
  ["new first"]=>
  string(7) "new 1st"
  ["new second"]=>
  string(7) "new 2nd"
  ["new third"]=>
  string(7) "new 3rd"
} 
```

### 部分应用

如果你需要多次使用不同数组但映射函数相同的函数，你可以做一些叫做[偏函数应用](https://stackoverflow.com/a/23438430/760706)的事情（与 '<a href="https://en.wikipedia.org/wiki/Currying" rel="noreferrer">currying')，它允许您仅在调用时传入数据数组：

```
function array_map_assoc_partial(callable $f) {
    return function (array $a) use ($f) {
        return array_column(array_map($f, array_keys($a), $a), 1, 0);
    };
}

...
$my_mapping = array_map_assoc_partial($func);
var_dump($my_mapping($ordinals)); 
```

它产生相同的输出，给定`$func`并且`$ordinals`如前所述。

注意：如果您的映射函数为两个不同的输入返回**相同的键**，则与后一个键关联的值**将获胜。**反转输入数组和输出结果`array_map_assoc`以允许较早的键获胜。（在我的示例中，返回的键不能冲突，因为它们包含源数组的键，而源数组的键又必须是唯一的。）

* * *

# 选择

以下是上述的变体，对某些人来说可能更合乎逻辑，但需要 PHP 5.6：

```
function array_map_assoc(callable $f, array $a) {
    return array_merge(...array_map($f, array_keys($a), $a));
} 
```

在此变体中，您提供的函数（在其上映射数据数组）应改为返回一个具有一行的关联数组，即`return [key => value]`. 然后将可调用的映射结果简单地解包并传递给`array_merge`. 如前所述，返回重复键将导致后面的值获胜。

> nb Alex83690 在评论中指出，使用`array_replace`此处代替`array_merge`将保留整数键。`array_replace`不修改输入数组，因此对于功能代码是安全的。

如果您使用的是 PHP 5.3 到 5.5，则以下内容是等效的。它使用`array_reduce`和二元`+`数组运算符将生成的二维数组转换为一维数组，同时保留键：

```
function array_map_assoc(callable $f, array $a) {
    return array_reduce(array_map($f, array_keys($a), $a), function (array $acc, array $a) {
        return $acc + $a;
    }, []);
} 
```

### 用法

因此将使用这两种变体：

```
$ordinals = [
    'first' => '1st',
    'second' => '2nd',
    'third' => '3rd',
];

$func = function ($k, $v) {
    return ['new ' . $k => 'new ' . $v];
};

var_dump(array_map_assoc($func, $ordinals)); 
```

**注意`=>`代替`,`in `$func`。**

输出和以前一样，每个都可以像以前一样部分应用。

* * *

#  概括

原始问题的目标是使调用的调用尽可能简单，代价是调用更复杂的函数；特别是，能够将数据数组作为单个参数传入，而无需拆分键和值。使用此答案开头提供的函数：

```
$test_array = ["first_key" => "first_value",
               "second_key" => "second_value"];

$array_map_assoc = function (callable $f, array $a) {
    return array_column(array_map($f, array_keys($a), $a), 1, 0);
};

$f = function ($key, $value) {
    return [$key, $key . ' loves ' . $value];
};

var_dump(array_values($array_map_assoc($f, $test_array))); 
```

或者，仅针对这个问题，我们可以简化`array_map_assoc()`删除输出键的功能，因为问题不要求它们：

```
$test_array = ["first_key" => "first_value",
               "second_key" => "second_value"];

$array_map_assoc = function (callable $f, array $a) {
    return array_map($f, array_keys($a), $a);
};

$f = function ($key, $value) {
    return $key . ' loves ' . $value;
};

var_dump($array_map_assoc($f, $test_array)); 
```

所以答案是**否定**的，你不能避免调用`array_keys`，但是你可以把被调用的地方抽象`array_keys`成一个高阶函数，这可能已经足够好了。

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2020-05-05T11:49:21.287

```
$array = [
  'category1' => 'first category',
  'category2' => 'second category',
];

$new = array_map(function($key, $value) {
  return "{$key} => {$value}";
}, array_keys($array), $array); 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2014-01-28T13:45:06.030

使用 PHP5.3 或更高版本：

```
$test_array = array("first_key" => "first_value", 
                    "second_key" => "second_value");

var_dump(
    array_map(
        function($key) use ($test_array) { return "$key loves ${test_array[$key]}"; },
        array_keys($test_array)
    )
); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-09-05T10:27:43.947

**看这里！有一个简单的解决方案！**

```
function array_map2(callable $f, array $a)
{
    return array_map($f, array_keys($a), $a);
} 
```

如问题所述，`array_map` *已经完全具有所需的功能*。这里的其他答案严重地使事情复杂化：`array_walk`没有功能。

**用法**

正如您对示例所期望的那样：

```
$test_array = array("first_key" => "first_value", 
                    "second_key" => "second_value");

var_dump(array_map2(function($a, $b) { return "$a loves $b"; }, $test_array)); 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-10-02T10:44:56.633

我将使用 5.6 或更高版本为该问题添加另一个解决方案。不知道它是否比已经很棒的解决方案更有效（可能不是），但对我来说它更容易阅读：

```
$myArray = [
    "key0" => 0,
    "key1" => 1,
    "key2" => 2
];

array_combine(
    array_keys($myArray),
    array_map(
        function ($intVal) {
            return strval($intVal);
        },
        $myArray
    )
); 
```

使用`strval()`中的示例函数`array_map`，这将生成：

```
array(3) {
  ["key0"]=>
  string(1) "0"
  ["key1"]=>
  string(1) "1"
  ["key2"]=>
  string(1) "2"
} 
```

希望我不是唯一一个觉得这很容易掌握的人。 从一个键数组和一个值数组`array_combine`创建一个数组，其余的很容易解释。`key => value`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-10-23T17:45:57.720

通过“手动循环”，我的意思是编写一个使用`foreach`. 这会像 do 一样返回一个新数组`array_map`，因为函数的作用域`$array`是一个副本——而不是一个引用：

```
function map($array, callable $fn) {
  foreach ($array as $k => &$v) $v = call_user_func($fn, $k, $v);
  return $array;
} 
```

您使用`array_map`with`array_keys`虽然的技术实际上看起来更简单并且更强大，因为您可以将`null`其用作回调来返回键值对：

```
function map($array, callable $fn = null) {
  return array_map($fn, array_keys($array), $array);
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-03-06T21:57:07.867

这就是我在我的项目中实现这一点的方式。

```
function array_map_associative(callable $callback, $array) {
    /* map original array keys, and call $callable with $key and value of $key from original array. */
    return array_map(function($key) use ($callback, $array){
        return $callback($key, $array[$key]);
    }, array_keys($array));
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-09-08T22:57:14.773

如果您只需要一次，则[关闭将起作用。](https://www.php.net/manual/en/functions.anonymous.php)我会使用[发电机](https://www.php.net/manual/en/language.generators.overview.php)。

```
$test_array = [
    "first_key" => "first_value", 
    "second_key" => "second_value",
];

$x_result = (function(array $arr) {
    foreach ($arr as $key => $value) {
        yield "$key loves $value";
    }
})($test_array);

var_dump(iterator_to_array($x_result));

// array(2) {
//   [0]=>
//   string(27) "first_key loves first_value"
//   [1]=>
//   string(29) "second_key loves second_value"
// } 
```

对于可重用的东西：

```
function xmap(callable $cb, array $arr)
{
    foreach ($arr as $key => $value) {
        yield $cb($key, $value);
    }
}

var_dump(iterator_to_array(
    xmap(function($a, $b) { return "$a loves $b"; }, $test_array)
)); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-10-23T21:10:24.887

根据[eis 的回答](https://stackoverflow.com/a/13036310/276451)，为了避免弄乱原始数组，我最终做了以下操作：

```
$test_array = array("first_key" => "first_value",
                    "second_key" => "second_value");

$result_array = array();
array_walk($test_array, 
           function($a, $b) use (&$result_array) 
           { $result_array[] = "$b loves $a"; }, 
           $result_array);
var_dump($result_array); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-04-01T20:25:13.977

我根据[eis的回答](https://stackoverflow.com/a/13036310/276451)做了这个功能：

```
function array_map_($callback, $arr) {
    if (!is_callable($callback))
        return $arr;

    $result = array_walk($arr, function(&$value, $key) use ($callback) {
        $value = call_user_func($callback, $key, $value);
    });

    if (!$result)
        return false;

    return $arr;
} 
```

例子：

```
$test_array = array("first_key" => "first_value", 
                "second_key" => "second_value");

var_dump(array_map_(function($key, $value){
    return $key . " loves " . $value;
}, $arr)); 
```

输出：

```
array (
  'first_key' => 'first_key loves first_value,
  'second_key' => 'second_key loves second_value',
) 
```

当然，您可以使用它`array_values`来准确返回 OP 想要的内容。

```
array_values(array_map_(function($key, $value){
    return $key . " loves " . $value;
}, $test_array)) 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-06-04T13:36:39.940

[YaLinqo](https://github.com/Athari/YaLinqo)库* 非常适合此类任务。它是 .NET 的 LINQ 端口，它完全支持所有回调中的值和键，并且类似于 SQL。例如：

```
$mapped_array = from($test_array)
    ->select(function ($v, $k) { return "$k loves $v"; })
    ->toArray(); 
```

要不就：

```
$mapped_iterator = from($test_array)->select('"$k loves $v"'); 
```

这`'"$k loves $v"'`是该库支持的完整闭包语法的快捷方式。`toArray()`到底是可选的。方法链返回一个迭代器，因此如果只需要使用 using 迭代结果`foreach`，`toArray`则可以删除 call 。

[* 由我开发]

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-01-09T14:40:22.120

我总是喜欢数组映射的 javascript 变体。最简单的版本是：

```
/**
 * @param  array    $array
 * @param  callable $callback
 * @return array
 */
function arrayMap(array $array, callable $callback)
{
    $newArray = [];

    foreach( $array as $key => $value )
    {
        $newArray[] = call_user_func($callback, $value, $key, $array);
    }

    return $newArray;
} 
```

所以现在你可以只传递一个回调函数来构造值。

```
$testArray = [
    "first_key" => "first_value", 
    "second_key" => "second_value"
];

var_dump(
    arrayMap($testArray, function($value, $key) {
        return $key . ' loves ' . $value;
    });
); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-08-15T03:50:07.700

我会做这样的事情：

```
<?php

/**
 * array_map_kv()
 *   An array mapping function to map with both keys and values.
 *
 * @param $callback callable
 *   A callback function($key, $value) for mapping values.
 * @param $array array
 *   An array for mapping.
 */
function array_map_kv(callable $callback, array $array) {
  return array_map(
    function ($key) use ($callback, $array) {
      return $callback($key, $array[$key]); // $callback($key, $value)
    },
    array_keys($array)
  );
}

// use it
var_dump(array_map_kv(function ($key, $value) {
  return "{$key} loves {$value}";
}, array(
  "first_key" => "first_value",
  "second_key" => "second_value",
)));

?> 
```

结果：

```
array(2) {
  [0]=>
  string(27) "first_key loves first_value"
  [1]=>
  string(29) "second_key loves second_value"
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-07-26T19:47:45.563

您可以使用此[数组库中的](https://packagist.org/packages/minwork/array)[map](https://minwork.gitbook.io/array/manipulating-array/mapping#map)方法来轻松实现您想要的内容：

```
Arr::map($test_array, function($a, $b) { return "$a loves $b"; }); 
```

它还保留键并返回新数组，更不用说满足您需求的几种不同模式了。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-11-21T00:08:17.260

另一种使用（出）保留键的方法：

```
$test_array = [
    "first_key"     => "first_value",
    "second_key"    => "second_value"
];

$f = function($ar) {
    return array_map(
        function($key, $val) {
            return "{$key} - {$val}";
        },
        array_keys($ar),
        $ar
    );
};

#-- WITHOUT preserving keys
$res = $f($test_array);

#-- WITH preserving keys
$res = array_combine(
    array_keys($test_array),
    $f($test_array)
); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-03-05T21:56:30.167

您可以在函数上传递 2 个参数来获取数组的键和值。像：

```
array_map(function($key, $value) {
    return [$key => $value];
}, array_keys($my_array), $my_array); 
```

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2013-07-22T20:22:55.873

我看到它缺少明显的答案：

```
function array_map_assoc(){
    if(func_num_args() < 2) throw new \BadFuncionCallException('Missing parameters');

    $args = func_get_args();
    $callback = $args[0];

    if(!is_callable($callback)) throw new \InvalidArgumentException('First parameter musst be callable');

    $arrays = array_slice($args, 1);

    array_walk($arrays, function(&$a){
        $a = (array)$a;
        reset($a);
    });

    $results = array();
    $max_length = max(array_map('count', $arrays));

    $arrays = array_map(function($pole) use ($max_length){
        return array_pad($pole, $max_length, null);
    }, $arrays);

    for($i=0; $i < $max_length; $i++){
        $elements = array();
        foreach($arrays as &$v){
            $elements[] = each($v);
        }
        unset($v);

        $out = call_user_func_array($callback, $elements);

        if($out === null) continue;

        $val = isset($out[1]) ? $out[1] : null;

        if(isset($out[0])){
            $results[$out[0]] = $val;
        }else{
            $results[] = $val;
        }
    }

    return $results;
} 
```

与array_map 完全一样。几乎。

实际上，它并不`map`像您从其他语言中所知道的那样纯粹。Php 很奇怪，所以它需要一些很奇怪的用户函数，因为我们不想破坏我们精确破坏`worse is better`的方法。

真的，这根本不是`map`。然而，它仍然非常有用。

*   与 array_map 的第一个明显区别是回调`each()`从每个输入数组中获取输出而不是单独的值。您仍然可以一次遍历更多数组。

*   第二个区别是键从回调返回后的处理方式；回调函数的返回值应该是`array('new_key', 'new_value')`. 键可以并且将被更改，如果返回相同的键，相同的键甚至会导致以前的值被覆盖。这不是常见的`map`行为，但它允许您重写密钥。

*   第三个奇怪的事情是，如果您`key`在返回值中省略（ by`array(1 => 'value')`或`array(null, 'value')`），则将分配新键，就像`$array[] = $value`使用过一样。这也不`map`是常见的行为，但我猜它有时会派上用场。

*   第四个奇怪的事情是，如果回调函数没有返回值，或者返回`null`，则输出中省略了当前键和值的整个集合，它只是被跳过了。这个功能完全是un `map`py，但如果有这样的功能，它将使这个功能成为优秀的特技替身`array_filter_assoc`。

*   如果您在回调的返回中省略第二个元素 ( `1 => ...`)（**值**`null`部分），则使用而不是实际值。

*   除了带有键`0`和`1`回调返回的元素之外的任何其他元素都将被忽略。

*   最后，如果 lambda 返回除 of`null`或数组之外的任何值，则将其视为键和值都被省略，因此：

    1.  分配了元素的新键
    2.  `null`被用作它的价值

> 警告：
> 请记住，最后一个功能只是以前功能的残余，它可能完全没用。强烈建议不要依赖此功能，因为此功能将在未来的版本中被随机**弃用**和意外更改。

注意：
与 in 不同`array_map`，传递给 的所有非数组参数`array_map_assoc`（第一个回调参数除外）都被默默地转换为数组。

例子：
`// TODO: examples, anyone?`

# mysql - 将参数传递给存储过程 MySql

> ID：13036162
> 
> 赞同：0
> 
> 时间：2012-10-23T17:40:09.643
> 
> 标签：mysql, sql, stored-procedures, parameter-passing

我已经在我的数据库中创建了带有 IN 参数的过程（MySql-> 例程-> 创建过程）。我正在使用它来创建一个新数据库。当我调用过程并传递参数时，会创建新数据库，但新数据库的名称是我在过程中使用的变量的名称，而不是我作为参数传递的名称。

> 创建过程 dbCreate (IN dbName VARCHAR(255))
> 
> 开始
> 
> ```
>  CREATE DATABASE IF NOT EXISTS dbName COLLATE utf8_bin;
>     CREATE TABLE IF NOT EXISTS dbName.City(
>     .
>     .
>     .
>     ); 
> ```

当我调用程序 dbCreate 时，

> 使用旧数据库；
> 
> 调用 old_database.dbCreate('FRANCE');

MySql 生成名为 dbName 的新数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:45:10.933

构造你的语句，就好像它是一个字符串：

```
SET @s = CONCAT('USE old_database; CALL old_database.dbCreate(', dbName,');');
PREPARE stmt FROM @s;
EXECUTE stmt; 
```

# c# - 更改紧凑框架上的文件创建时间

> ID：13036165
> 
> 赞同：2
> 
> 时间：2012-10-23T17:40:28.910
> 
> 标签：c#, .net, compact-framework

使用套接字下载文件后，我需要设置文件创建时间。在 CF FileInfo.CreationTime 中是只读的。我尝试使用[此主题](https://stackoverflow.com/questions/5673921/change-file-lastwritedate-in-compact-framework)中的 P/Invoke 解决方案，但它不起作用：我收到错误 6（无效句柄）。

根据 MSDN，SetFileTime() 的第一个参数必须是句柄，而在提到的主题中它是字符串，有人说它对他有用。我究竟做错了什么？如果我需要使用句柄，如何在 CF 中获取此句柄以及如何更改 SetFileTime() 声明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:52:04.557

有趣的。您指出的答案显然是错误的，尽管它被接受了。

无论如何，您需要传入一个从对 CreateFile 的调用返回的 HANDLE（IntPtr 或者您想表示它） -[您还需要 P/Invoke](http://pinvoke.net/default.aspx/coredll.CreateFile)。

```
[DllImport("coredll.dll")] 
private static extern bool SetFileTime(IntPtr fileHandle, 
                                  ref long creationTime, 
                                  ref long lastAccessTime, 
                                  ref long lastWriteTime); 
```

完成后一定要调用[CloseHandle](http://pinvoke.net/default.aspx/coredll.CloseHandle)。

# google-app-engine - 协调 appstats Grand Total 和 apache bench 之间的差异

> ID：13036167
> 
> 赞同：1
> 
> 时间：2012-10-23T17:40:32.833
> 
> 标签：google-app-engine, appstats

我一直在使用 appstats 来检查一些调用。我有一个简单的视图，可以调用 memcache 并返回结果。Appstats 告诉我总时间（总计）约为 15 毫秒。但是，我在浏览器中观察到的更像是 242 毫秒左右。实际上，我使用 apache bench 也得到了相同的结果。我尝试了另一个网络（使用 ec2 实例），看看我是否会看到不同的往返时间并得到大致相同的结果。对服务器的 ping 大约需要 13 或 14 毫秒。

我肯定在这里遗漏了一些东西。我无法解释大约 180-200 毫秒的延迟。根据使用应用程序引擎和应用程序统计的经验，我希望有人可以帮助我睁开眼睛了解我所缺少的东西。

如果有兴趣，请提供一些环境细节...... python 2.7; 在测试中同时使用了 webapp2 和 Flask；我的 apache bench 测试都是单线程的 100 次。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:07:20.567

根据我的经验，您总是会看到 appstats 和总时间之间的差异。您可以在日志中看到这一点。列出总延迟的位置。Appstats 为您提供代码处理请求所花费的时间，但日志列出了总 i/o 时间。从我可以锻炼的情况来看，增加的时间归结为负载平衡以及应用程序引擎在内部对请求进行排队并评估它是否需要扩展的方式。此外，如果您发送 100 个请求的突发，您实际上可能会使差异更加明显，因为根据您的应用程序设置，它很可能会在新实例开始之前在最少实例上处理这些请求。

如果您希望您的应用程序运行良好，一个好的经验法则是让 appstats 低于 100 毫秒，其余的取决于您想烧多少钱。

会对官方线路感兴趣，但这就是我在使用应用引擎 3 年后的感觉

# objective-c - iCloud NSUserDefaults 未跨设备同步（通过 MKiCloudSync）

> ID：13036175
> 
> 赞同：1
> 
> 时间：2012-10-23T17:40:51.047
> 
> 标签：objective-c, ios, nsuserdefaults, icloud

我已经构建了一个启用了 iCloud 的应用程序，并且我正在两台设备上运行它。

我期望的是，当我添加一些数据时，它会被写入 NSUserDefaults 并使用 MKiCloudSync 类，随后会上传到 iCloud。这似乎工作。

然后当我在另一台设备上打开应用程序时，我试图从 iCloud 中拉下 NSUserDefaults（通过 MKiCloudSync）。

我在相同的代码上运行两个设备（我已经尝试过使用分发版本）。这些设备都启用了 iCloud 并连接到同一个帐户。

但是，在第一台设备上创建了一些数据，然后尝试从第二台设备上拉下来之后，我没有得到任何数据。当我启动它们时，两个设备都试图拉下数据，但它们都不共享它们的数据。

我错过了什么？多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:48:08.367

NSUserDefaults 不会自动同步到云端。

您可以使用：

[https://github.com/MugunthKumar/MKiCloudSync](https://github.com/MugunthKumar/MKiCloudSync)

虽然，使用键/值存储非常不稳定。许多开发人员（以及我自己）都报告了不一致的同步。

# ruby-on-rails-3 - 在 Rails 和 Active Record 中运行总计

> ID：13036179
> 
> 赞同：1
> 
> 时间：2012-10-23T17:41:03.183
> 
> 标签：ruby-on-rails-3, activerecord

我有一个包含以下关键列的锻炼表：

**锻炼 ID**      **距离**
1 2.3
2 3.1

假设我想编写一个 Rails 活动记录查询，以便获得这些列加上运行总距离，如下所示：

**      **锻炼_id****距离**      **running_total** 1 2.3 2.3 2 3.1 5.4**

 ****我怎么能做这种事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:48:35.683

我同意 HungryCoder 的观点，即您可能应该在模型中而不是在数据库查询中执行此操作。

```
class Workout
  # ...
  attr_accessor :running_total
  class << self
    def distance_with_running_total
      total = 0.0
      Workout.order(:id).collect do |w|
        total += w.distance
        w.running_total = total
      end
    end
  end
  # ...
end 
```

然后在控制器中，只需执行以下操作：

```
@workouts = Workout.distance_with_running_total 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:50:59.067

为了更接近对象，虽然这不是最有效的方法，但您可以执行以下操作：

```
<% Workout.all.map{|x| x.attributes}.each_with_index{|e, i| e["running_total"] = Workout.all.take(i + 1).map{|x| x.distance}.inject{|sum,x| sum + x}}.each do |workout| %>
    <%= workout["id"] %>
    <%= workout["distance"] %>
    <%= workout["running_total"] %>
<% end %> 
```

但请注意这正在执行多少个 sql 查询。可能不是您的最佳解决方案。我的代码本身也可能会得到优化，但总的来说，您的方法可能不是其他人已经指出的最佳主意。****

# actionscript-3 - 简化从单个 Flash 项目发布适用于 android、iphone、swf 和 air 的 Flash CS6 AS3 代码的过程的最佳方法是什么？

> ID：13036185
> 
> 赞同：2
> 
> 时间：2012-10-23T17:41:06.630
> 
> 标签：actionscript-3, air, flash, publishing, flash-cs6

我有一个使用 Flash CS6 开发的 Flash 项目 (AS3)。我正在为 iOS 设备、Android 设备、桌面（air）和网络浏览器（swf）进行开发。到目前为止，我已经能够使用单个代码库，例如在发布到每个代码库时只进行一些修改 -

当用户按下使用 flash.desktop.NativeApplication 类的主页按钮时，我有一些代码可以处理在移动设备上退出应用程序。显然，这对于桌面或 swf 版本来说是不需要的，所以当我发布这些内容时，我会注释掉相关的导入语句和监听按下的主页按钮的代码。

我还有一个加载一些设置的 config.xml 文件，对于 swf，它与 swf 文件不在同一目录中，因此在加载 swf 对象时传入此配置文件的位置（flashvars）。但是对于所有其他版本，该文件的路径只是 config.xml，所以我注释掉处理 flashvars 加载的代码 -

```
allFlashVars = LoaderInfo(this.root.loaderInfo).parameters;
webroot = String(allFlashVars["webroot"]) 
```

需要类似步骤的版本之间还有一些其他差异，我已确保在文档中注明，以供自己和其他开发人员记住。

但是我知道这不是理想的解决方案，并且认为必须有更好的方法来管理它。

有谁知道处理这种情况的任何好的建议/最佳实践？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:31:39.150

我知道两种方法。

*   使用条件编译。[这里](http://bill.shadish.com/post/2011/09/30/Conditional-Compilation-in-FLASH.aspx)描述了这种方式。
*   使用工厂模式。您可以在主类中调整工厂。为每个平台制作具有不同工厂设置的不同主类。

# android - admob 6.2.1 空指针异常

> ID：13036188
> 
> 赞同：4
> 
> 时间：2012-10-23T17:41:22.683
> 
> 标签：android, eclipse, sdk, admob

我有一个大问题，我想将 admob 集成到我的 android 应用程序中，但是当我尝试将 admob 集成到 xml 文件中时，我在图形布局中得到一个空指针异常

```
java.lang.NullPointerException
    at com.google.ads.AdView.onMeasure(SourceFile:670)
    at android.view.View.measure(View.java:15172)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
    at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
    at android.view.View.measure(View.java:15172)
    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:617)
    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:399)
    at android.view.View.measure(View.java:15172)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
    at android.view.View.measure(View.java:15172)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
    at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
    at android.view.View.measure(View.java:15172)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
    at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
    at android.view.View.measure(View.java:15172)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.measureView(RenderSessionImpl.java:542)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.render(RenderSessionImpl.java:444)
    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:333)
    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1638)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1389)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:1163)
    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:674)
    at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:360)
    at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:292)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:774)
    at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:3023)
    at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1730)
    at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:270)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

这是xml文件

```
<RelativeLayout xmlns:tools="http://schemas.android.com/tools"
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/backgroundapp"
android:orientation="vertical" >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_alignParentBottom="true"
  android:orientation="vertical"
  android:gravity="bottom"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

    <ListView android:id="@id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:cacheColorHint="#00000000"
    android:textColor="#FFFFFF"/>

    <Button
    android:id="@+id/add_main_btn"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:text="@string/add_serie" />

</LinearLayout>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" android:layout_alignParentTop="true" android:id="@+id/ad_layout" android:orientation="vertical" android:gravity="top" android:layout_width="fill_parent" android:layout_height="fill_parent">

    <com.google.ads.AdView android:id="@+id/adView" android:layout_width="wrap_content" android:layout_height="wrap_content" ads:adUnitId="a15086a2a707a22" ads:adSize="BANNER" ads:loadAdOnCreate="true" />

</LinearLayout>

</RelativeLayout> 
```

我的课在这里

```
adView = new AdView(this, AdSize.BANNER, MY_AD_UNIT_ID);
    LinearLayout layout = (LinearLayout)findViewById(R.id.adView);
    layout.addView(adView);
    adView.loadAd(new AdRequest()); 
```

谢谢你的回答。

编辑：添加另一个 XML 布局文件相同的错误

```
<RelativeLayout 
xmlns:tools="http://schemas.android.com/tools"
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/backgroundapp"
android:orientation="vertical">

    <Button
        android:id="@+id/add_main_btn"
        android:layout_width="fill_parent"
        android:layout_height="70dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:text="@string/add_serie" />

    <ListView
        android:id="@id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="541dp"
        android:layout_alignParentLeft="true"
        android:cacheColorHint="#00000000"
        android:textColor="#FFFFFF" >

    </ListView>

    <com.google.ads.AdView 
    android:id="@+id/adView" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    ads:adUnitId="a15086a2a707a22" 
    ads:adSize="BANNER" 
    ads:testDevices="TEST_EMULATOR"
    ads:loadAdOnCreate="true" /> 
```

Edit2：问题已解决 Admob 6.2.1 有一个针对 Android 4.1.2 的错误将 Api 布局设置为 10 或更低，有新的错误消息但不影响程序或广告

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:10:56.497

查看图形布局时的`NullPointerException`in是一个已知问题。它将在下一个主要版本中修复。`onMeasure``AdView`

同时，编辑原始 XML 或定义`AdView`in 代码也可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:57:16.220

布局设计中存在错误尝试在代码中对其进行编码或仅生成布局，然后最终实现 google ads xml 行

# java - Java ArrayList 和对象问题。值重置

> ID：13036191
> 
> 赞同：0
> 
> 时间：2012-10-23T17:41:32.093
> 
> 标签：java, arrays, arraylist

我有 3 个班级和一个主要班级。这些类是城市、旅游和人口。一个人口有一个包含 X 个旅游的数组列表，而旅游有一个包含 X 个城市的数组列表。城市只是 X 和 Y 坐标。当我创建新的旅游时，其中的城市是随机的，然后我将旅游添加到人口数组列表中，这工作正常，输出是随机的。但是，如果我再次输出数组列表，它们不再是随机的，并且所有的游览都是相同的。我认为通过显示一些代码会更容易解释：

`Population.java`

```
public class Population {

private ArrayList<Tour> toursList;

public Population(int size, ArrayList<City> loadedCities)
{
    toursList = new ArrayList<Tour>();

    // Fill the population with the number of tours
    for (int i = 0; i < size; i++) {
        Tour newTour = new Tour(loadedCities);
        newTour.setId(i);
        toursList.add(newTour);
    }

}

public void output() 
{
    for (Tour tour : toursList)
        System.out.println(tour.toString());
}
} 
```

`Tour.java`

```
public class Tour {

private ArrayList<City> tour;
private int id = 0;

public Tour(ArrayList<City> cities)
{
    Collections.shuffle(cities);
    tour = cities;
}

public void setId(int i)
{
    this.id = i;
    System.out.println("Constructor: "+toString());
}

public int getId()
{
    return id;
}

public String toString()
{
    String str = "Tour: "+id+" - ";
    for (City city : tour) {
         str += city.toString()+" | ";
    }
    return str;
}
} 
```

`City.java`

```
public class City {

private int code;
private Double y;
private Double x;

public City(int code, Double y, Double x)
{
    this.code = code;
    this.y = y;
    this.x = x;
}

public int getCode() 
{
    return code;
}

public Double getX() 
{
    return x;
}

public Double getY()
{
    return y;
}

public String toString()
{
    return "Code: "+this.code+" - X: "+this.x+" Y: "+this.y;
}
} 
```

然后主类在加载城市数组列表后进行这些调用：

```
Population population = new Population(10, cities);
population.output(); 
```

少数 println 的控制台输出如下（精简版）：

```
Constructor: Tour: 0 - Code: 2 - X: 42373.8889 Y: 11108.6111
Constructor: Tour: 1 - Code: 28 - X: 43026.1111 Y: 11973.0556
Tour: 0 - Code: 8 - X: 42983.3333 Y: 11416.6667
Tour: 1 - Code: 8 - X: 42983.3333 Y: 11416.6667 
```

您可以看到现在所有的旅行都变得相同且顺序相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:47:15.473

`ArrayList<City> cities`您对所有旅行都使用相同的。

`Tour`构造函数应该是这样的：

```
tour = new ArrayList<City>(cities);
Collections.shuffle(tour); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:55:52.887

Java 使用可变集合。由于您将同一个集合传递到所有 Tours 中，因此它会被洗牌很多次，但最终所有游览都引用了相同的、经过洗牌的集合。

从中可以学到两点：

1.  如果你想修改你传入的集合，首先制作一个副本（例如`new ArrayList(collectionToCopy)`）
2.  如果您将自己拥有的收藏传递给其他人，请首先确保他无法更改它（例如`Collections.unmodifiableList(myCollection)`）

在您的 Java 职业生涯中，您将多次踏入这个陷阱。如果你不这样做，别人会为你做的。

# java - 为什么 2*Integer.MAX_VALUE = -2？

> ID：13036192
> 
> 赞同：1
> 
> 时间：2012-10-23T17:41:34.757
> 
> 标签：java

> **可能重复：**
> [Java 如何处理整数下溢和上溢以及如何检查？](https://stackoverflow.com/questions/3001836/how-does-java-handle-integer-underflows-and-overflows-and-how-would-you-check-fo)
> [System.out.println(4*2147483647) 在java中如何等于-4？](https://stackoverflow.com/questions/11795522/how-is-system-out-println42147483647-equal-to-4-in-java)

我想知道为什么会这样：

```
2 * Integer.MAX_VALUE == -2 
```

我期待着你的回应。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T17:42:46.470

由于[整数溢出](http://en.wikipedia.org/wiki/Integer_overflow)，您会得到此结果：在表示负整数[的二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)系统中，取最大值`011.....11`[2]并将其乘以`2`得到`11.....110`[2]，对应于`-2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:44:50.467

那是因为整数溢出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T17:45:05.563

`Integer.MAX_VALUE`是`0x7FFFFFFF`。乘以 2 就可以得到`0xFFFFFFFE`（相当于左移一位）。这是一个负数（第一位是 1）并且是 的二进制表示`-2`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T17:45:11.433

这是因为二进制补码，其中最左边的位用于表示数字是正数 (0) 还是负数 (1)。因此，当您自己添加 max int （相当于乘以 2）时，会发生这种情况：

```
 011111111111111111111111
+ 011111111111111111111111
__________________________
  111111111111111111111110 
```

并且`111111111111111111111110`代表-2。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T18:11:21.777

Int的MAX_VALUE是2^31 - 1 = 2147483647 = 0111 1111 1111 1111 1111 1111 1111 1111(二进制数)最高位（这里是第一位0，表示整数为正数，1表示负数。

（假设一个整数的长度是 4 个字节），2 * MAX_VALUE，在计算机中，一个整数乘以 2 是在位上左移（运算符 <<），例如。2 << 1 = 4; 2 << 2 = 8; 所以 0111 1111 1111 1111 1111 1111 1111 1111 << 1 变为 1111 1111 1111 1111 1111 1111 1111 1110 等于十进制的 -2。

# java - 如何为 EditText 设置键盘的大小

> ID：13036196
> 
> 赞同：0
> 
> 时间：2012-10-23T17:42:10.763
> 
> 标签：java, android, size, android-edittext, android-softkeyboard

我想知道是否可以为可编辑的文本字段设置键盘的大小？是否可以使用现有工具指定尺寸，即使是相对而言，或者是否有可能实现目的陈述？我希望能得到你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:46:38.103

不，除非您可以控制您的应用程序将在其上运行的所有设备（如企业环境）并且您安装了自定义键盘。

确实，您为屏幕键盘获得的唯一选项是一些关于[键盘启动状态](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)（显示或隐藏）的清单条目，以及当屏幕键盘显示时您的 Activity 如何响应/调整自身大小。

# python - 使用 IPython Notebook 获取输出

> ID：13036197
> 
> 赞同：16
> 
> 时间：2012-10-23T17:42:13.057
> 
> 标签：python, ipython, ipython-notebook

当我启动[IPython Notebook](https://en.wikipedia.org/wiki/IPython#Notebook)时，我可以导航到它并输入代码。然而，IPython Notebook 界面并没有回显任何内容。

我知道服务器正在获取查询（来自`--debug output`）并响应它们，它只是永远不会在我的 IPython Notebook 窗口中给我输出。

**我正在运行 Python 2.6.6 和 Windows 7**

我目前不知道如何让这个笔记本工作。

这是我尝试（未成功）获取输出的截屏视频：

> > > [http://screencast.com/t/TwJ2ZmGnT](http://screencast.com/t/TwJ2ZmGnT)

即使您不知道出了什么问题，关于如何进一步调试我的问题的任何指示:(

到目前为止，我已经成功运行了 tornado 的测试聊天客户端[https://github.com/facebook/tornado/tree/master/demos/websocket](https://github.com/facebook/tornado/tree/master/demos/websocket)。

pyzmq 的测试脚本[https://github.com/zeromq/pyzmq/blob/master/examples/poll/reqrep.py](https://github.com/zeromq/pyzmq/blob/master/examples/poll/reqrep.py)也成功运行。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-25T18:56:27.890

Sophos Endpoint Security and Control 阻止了返回到笔记本的输出。

在 services.msc 中禁用“Sophos Web Intelligence Service”是可行的，但这并不理想，因为它会关闭我的网络智能或其他任何东西......我真的不想让自己更容易受到坏东西的影响......

所以解决办法是：

1.  从托盘或开始菜单打开 Sophos Endpoint Security and Control Panel。

2.  从顶部的菜单中选择“配置”->“防病毒”->“授权”。

3.  选择网站选项卡。

4.  单击“添加”按钮，将 127.0.0.1 和 localhost 添加到“授权网站”列表中。

5.  重新启动计算机

6.  输出现在有效:)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-10-15T12:33:57.940

我与 OP 处于相同的情况，只是发现 IPython 笔记本在启动时可以工作（没有禁用 Sophos）

```
ipython notebook --ip=localhost 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-23T20:34:21.707

我有这个问题。我找到了两种修复方法，尽管您的里程可能会有所不同：

1.  我杀死了软件防火墙进程。

2.  我将笔记本配置为接受来自任何地方的 HTTP 连接（显然，使用密码和安全连接）。可以[在 IPython 网站上](http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html#running-a-public-notebook-server)找到有关如何执行此操作的详细信息。

我不知道为什么第二个有效。我最好的猜测是，防火墙和 NAT 的组合使得到 localhost 的连接看起来像笔记本电脑，就好像它们来自其他地方一样。

# ssis - 从一个半随机字符串中提取多个子字符串

> ID：13036201
> 
> 赞同：2
> 
> 时间：2012-10-23T17:42:29.340
> 
> 标签：ssis

我正在处理我公司的广告转储。我得到了用户名、名称和组。我的最终目标是定期转储 csv 文件，我的 SSIS 包抓取它，从组中删除所有垃圾，然后从中获取报告提要，以便用户可以搜索某人的姓名或用户名以及它将列出他们所属的组。

我遇到的问题是组部分充满了很多垃圾，例如我得到了这样的东西：

```
CN=Standards of Conduct,CN=Users,DC=rlhk,DC=local|CN=ManagementLevel-9,OU=Groups,OU=rem,DC=rlhk,DC=local 
```

这是一个非常短的（有些超过 3000 个字符）。我想从中提取的部分是行为标准和 ManagementLevel-9。我说这是半随机的，因为显然不是每个人都属于同一组，而且我不相信他们都处于相同的顺序。

组总是紧跟在 |CN= 之后，第一个出现的地方没有 | 在前面它只是CN =。

我试过类似的东西：

```
SUBSTRING(Groups,FINDSTRING(Groups,"|CN=",1 ) + 3,FINDSTRING(Groups,",",1) - 4) 
```

然而，它显然只获得了“|CN=”的第一次迭代，我不确定如何获得所有这些。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:00:23.257

如果他们遵循您概述的规则，下面的正则表达式代码将与您的组匹配。正则表达式将在输入字符串中搜索所有 CN= 实例，然后是逗号之前的所有内容。

```
 string groupString = "CN=Standards of Conduct,CN=Users,DC=rlhk,DC=local|CN=ManagementLevel-9,OU=Groups,OU=rem,DC=rlhk,DC=local";
    foreach (Match match in Regex.Matches(groupString , @"CN=([^,]*)"))
    {
        Console.WriteLine(match.Groups[1].Value);
    }
    Console.ReadLine(); 
```

这是另一个版本（非控制台），它在 a 中捕获结果，`List<string>`因此您可以对其进行迭代，或者检查其中是否包含特定值：

```
 string groupString = "CN=Standards of Conduct,CN=Users,DC=rlhk,DC=local|CN=ManagementLevel-9,OU=Groups,OU=rem,DC=rlhk,DC=local";
        List<string> matchedGroups = new List<string>();
        foreach (Match match in Regex.Matches(groupString , @"CN=([^,]*)"))
        {
            matchedGroups.Add(match.Groups[1].Value);
        }
        //Use the matchedGroups collection here 
```

要在 SSIS 包中使用它，您将添加一个脚本组件作为转换，然后在 Input Columns 选项卡上，选中与该字段对应的框，即 distinctname 并指示它是 ReadWrite。

```
 foreach (Match match in Regex.Matches(Row.distinguishedname, @"CN=([^,]*)"))
    {
        Row.distinguishedname = (match.Groups[1].Value);
    } 
```

如果这是一个新列，那么您需要进入输入和输出选项卡，展开输出 0，选择输出列，单击添加列，然后为其提供新名称和数据类型（simplifiedName，DT_STR 3000 代码页 1252 ）。然后我们将上面的行更改为

```
 Row.simplifiedName = (match.Groups[1].Value); 
```

不要忘记添加对正则表达式程序集的引用`using System.Text.RegularExpressions;`

# wordpress - 服务器尝试写入目录的正确解决方案是什么？

> ID：13036202
> 
> 赞同：0
> 
> 时间：2012-10-23T17:42:38.293
> 
> 标签：wordpress, unix

所以，我有一个带有“部署”用户的盒子。此部署用户拥有一个代码存储库，并且 wordpress 正在此框上运行...

当 wordpress 尝试执行诸如上传插件之类的操作时，它正在使用用户“www-data”写入“wp-content/plugins”。显然它正在上传一个 zip 文件，取消归档，然后删除该 zip 文件。

我一直遇到 wordpress 无法执行这些操作的问题。由于我的整个代码存储库被设置为所有者和组：“deploy:deploy”，显然 www-data 无法访问它。

因此，我的第一次尝试是将 www-data 添加到部署组。

```
usermod -a -G deploy www-data 
```

发出此命令后，我立即发现我无法再通过 ssh 进入该框。完全不知道为什么 - 任何人都可以告诉我吗？所以我最终做了：

```
chmod -R go-w ~ 
```

然后可以再次 ssh... 执行“groups www-data”将部署显示为选项之一，所以我想万岁...我去确保 wp-content 和插件目录都具有该组的写入权限，他们做到了……双喜临门，它应该可以完美运行！

但是，不...尝试上传插件时失败。

经过一番烦恼，我刚刚进入 apache 配置并将 APACHE_RUN_USER & GROUP 更改为“部署”

问题解决了......有点。除了 apache 作为主要用户运行的想法之外，我认为这很糟糕。

无论如何，因此在进行此更改后，上传插件成功，我看到：

```
drwxr-xr-x 8 deploy deploy 4096 Oct 22 21:28 wp-crm 
```

所以，该组没有写访问权限——我想这可能是为什么失败的暗示……但是，它使用 deploy 编写的事实意味着这并不是真正的暗示……因为那只是由于deploy 的 umask 如何设置为.. 我假设...

所以......我只是迷失了解决方案是什么......

我的 wp-content 组应该是 www-data 吗？

还是我在这里错过了其他东西？

# javascript - 图像 src 在 jquery 中不起作用

> ID：13036208
> 
> 赞同：1
> 
> 时间：2012-10-23T17:43:37.360
> 
> 标签：javascript, jquery

我有一个功能，

```
function showimage(a)
    {
        $("#lightboxholder").show("fast");
        $('#lightboximage').attr('src', 'images/demo/190x90.gif');
    } 
```

当我去 localhost/svce 并在gallery.php中查看时，它没有显示图像，但是如果我更换它`$('#lightboximage').attr('src', 'images/demo/190x90.gif');`，`$('#lightboximage').attr('src', 'http://localhost/svce/images/demo/190x90.gif');` 它会显示图像，对不起我的英语不好，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:46:44.927

尝试

```
function showimage(a)
{
       $("#lightboxholder").show("fast");
       $('#lightboximage').attr('src', '../images/demo/190x90.gif');
} 
```

注意图像/演示之前的“/”....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:46:51.090

问题是相对 url - 这对我来说也总是一个挑战

试试这些

```
$('#lightboximage').attr('src', '../images/demo/190x90.gif'); 
```

或者

```
$('#lightboximage').attr('src', '../../images/demo/190x90.gif'); 
```

当你从一个页面移动到另一个页面时，相对 url 会改变，但绝对不会

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T17:47:19.720

您正在将 更改`src`为相对 URL。所以如果你的当前页面是`http://localhost/foo/bar`，浏览器会尝试在`http://localhost/foo/bar/images/demo/190x90.gif`. 使用绝对 URL，例如`/svce/images/demo/190x90.gif`.

# objective-c - 在屏幕中间画一个方形边框

> ID：13036214
> 
> 赞同：0
> 
> 时间：2012-10-23T17:44:37.467
> 
> 标签：objective-c, ios

我正在尝试在视图中间绘制一个透明的正方形（仅限边框），但我很难找出方法。我想我有两个问题，第一个是关于绘制一个带有黑色边框的透明正方形，第二个是将它放在视图的中间。

有什么好的教程可以学习吗？

**更新**

我尝试按照 Apple 教程进行操作，并且有一段代码可以在我的视图控制器中绘制一个矩形：

```
 CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(context, 2.0);
    CGContextSetStrokeColorWithColor(context, [UIColor blueColor].CGColor);
    CGRect rectangle = CGRectMake(60,170,200,80);
    CGContextAddRect(context, rectangle);
    CGContextStrokePath(context); 
```

但我找不到如何将其添加到特定视图或视图中心。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:00:37.277

您提供的绘图代码需要放在其 drawRect 方法中的自定义 UIView 子类中。

但是，如果您只是想在屏幕上的某处显示一个矩形，则只需添加所需大小的子视图并相应地设置其图层属性会更容易：

```
#import <QuartzCore/QuartzCore.h>
//...
UIView *rectView = [[UIView alloc] initWithFrame:CGRectMake(60,170,200,80)];
rectView.backgroundColor = [UIColor clearColor];
rectView.layer.borderColor = [[UIColor blueColor] CGColor];
rectView.layer.borderWidth = 2.0;
[someView addSubview:rectView]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T19:12:23.147

I think you probably want to subclass the UIView in question and override its drawRect:

```
- (void)drawRect:(CGRect)rect 
```

be sure to call:

```
[super drawRect:rect]; 
```

Then you want to use coordinates in your drawing code that are relative to the size of the view you are drawing in.

So you get something more like:

```
- (void)drawRect:(CGRect)rect
{
    [super drawRect:rect];

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(context, 2.0);
    CGContextSetStrokeColorWithColor(context, [UIColor blueColor].CGColor);
    CGFloat width = 200;
    CGFloat height = 80;
    CGFloat x = (self.frame.size.width - width) * 0.5f;
    CGFloat y = (self.frame.size.height - height) * 0.5f;
    CGRect rectangle = CGRectMake(x, y, width, height);
    CGContextAddRect(context, rectangle);
    CGContextStrokePath(context);
} 
```

# java - 注释会影响 Java 默认序列化吗？

> ID：13036222
> 
> 赞同：3
> 
> 时间：2012-10-23T17:45:22.803
> 
> 标签：java, serialization, annotations

类注释会影响其默认序列化吗？[Java 文档](http://docs.oracle.com/javase/1.5.0/docs/guide/language/annotations.html)说

> 注解不会直接影响程序语义，但会影响工具和库处理程序的方式，进而影响正在运行的程序的语义。可以从源文件、类文件或在运行时反射地读取注释。

这会让我猜不是，但我还没有找到一个结论性的陈述。

**编辑**：我的意思是问“注释会影响Java默认序列化吗？” 因此，我正在更改问题文本并接受不太受欢迎的答案。我向回答我之前提出的问题的人道歉（“注释会影响序列化吗？”）。:) 是的，您可以构建影响序列化的案例。但是，我认为更改后的问题将更具实用价值，当然对我来说。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:49:01.623

可以构建一个基于运行时注释以不同方式序列化的类。

```
public class Foo implements Externalizable {
  public void writeExternal(ObjectOutputStream out) throws IOException {
    if (getClass().getAnnotations().length == 0) {
      out.writeObject("no");
    } else {
      out.writeObject("yes");
    }
  }
  public void readExternal(ObjectInputStream in) throws IOException { ... }
} 
```

然后具有运行时注释的子类的实例将与父类不同地序列化，尽管事实上`writeExternal`是共享的。

```
@Retention(RetentionPolicy.RUNTIME)
@interface ARuntimeAnnotation {}

@ARuntimeAnnotation
public class SubFoo extends Foo {} 
```

`RetentionPolicy.RUNTIME`发生这种情况是因为您引用的“可以反过来影响正在运行的程序的语义”的注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:55:02.687

带有的注释`RETENTION=RUNTIME`是字节码，但本身没有序列化。序列化适用于对象字段，而不适用于类。

序列化程序可以使用注释。但是，标准的 java 序列化机制不使用它们：它是为 java 1.0 创建的，比注解早了 10 年。

但是，自定义机制可以使用注释。例如，您可以创建`@Transient`注释并使用它来标记不应序列化的字段。

可以使用`writeObject()`方法或使用第三方库（如 xstream）自定义序列化。

有很多序列化库。您可以将 JAXB 或 XStream 视为将对象序列化为 XML 的库。两者都支持大量注释。

# twitter-bootstrap - Twitter Bootstrap 菜单只打开和关闭一次

> ID：13036223
> 
> 赞同：2
> 
> 时间：2012-10-23T17:45:27.427
> 
> 标签：twitter-bootstrap

我的网站上有一个（标准）Twitter Bootstrap 菜单。当我缩小浏览器窗口或使用智能手机或 iPad 时，菜单会缩小，您会在右侧看到一个按钮。我可以按一次，菜单打开。我可以再按一次，它就关闭了。但是当我再次单击它时，它不会打开。您可以在[http://www.boajobs.com](http://www.boajobs.com)查看代码。我错过了什么，因为类似的菜单在 Twitter Bootstrap 网站上可以正常工作吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:11:46.133

您使用的 Bootstrap CSS 的缩小版本缺少`.collapse`类中 CSS 转换的一些规则， **bootstrap-collapse.js**插件假定这些规则存在。`$.support.transition.end`当插件折叠导航栏时，它会为事件添加一个监听器。由于该事件从未被触发，插件被锁定在一个`transitioning`状态，导致它在所有未来的调用中短路。

您可以通过将所需的 CSS 过渡添加回您的 CSS 文件来纠正此行为：

### 相关引导 CSS (v.2.1.1)

```
.collapse {
  position:relative;
  height:0;
  overflow:hidden;
  -webkit-transition:height 0.35s ease;
  -moz-transition:height 0.35s ease;
  -o-transition:height 0.35s ease;
  transition:height 0.35s ease;
}
.collapse.in {
  height:auto;
} 
```

或者，如果您真的不想要 CSS 过渡，您可以从 JavaScript 中省略**bootstrap-transition.js 。**

# security - MediaElement.js：带有变量的源 URL？

> ID：13036226
> 
> 赞同：1
> 
> 时间：2012-10-23T17:45:43.987
> 
> 标签：security, video-streaming, html5-video, cdn, mediaelement.js

在爱上 MediaElement.js 之后，我遇到了一个问题。在有问题的网站上，我们使用 Bitgravity 作为我们的 CDN。Bitgravity 使用 MD5 哈希来保护视频 URL，并将其作为变量添加到末尾。例如：

```
 http://stuff.blah.cdn.bitg.net/Secure/stuff/myvideo.mp4?h=3440203940902383938298394833324323 
```

结果是 MEj 的“下载文件”链接，指向代码所在的页面。胡闹一番后，我发现 URL 上存在变量会触发问题。

有谁知道让 MediaElements.js 接受带有诸如此类变量的源 URL 的方法？

# c++ - 结合 & 和 * 运算符

> ID：13036239
> 
> 赞同：10
> 
> 时间：2012-10-23T17:46:23.783
> 
> 标签：c++, class, reference, linked-list, operators

我一直在阅读使用类的 List（及其节点）的实现，并且发现了一些我不太了解的事情。这是我不明白的 Node 类中的代码：

```
 class Node {
      private:
         Data data;
         Node* next;
      public:
         Node*& getNext();
    };

    Node*& Node::getNext()
    {
       return this->next;
    } 
```

*& 到底是什么？我不知道该方法返回了什么样的变量。

我想我现在明白了，稍后我有这些行（在类列表中）：

```
Node** node = &first;
node = &(*node)->getNext(); 
```

这是否意味着我将下一个地址存储在节点 * 中？

注意：评论中回答了第二个问题。感谢您的回复。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T17:47:22.570

那是对指针的引用。这意味着`Node*`函数返回的是一个别名`Node::next`。

例如，假设您有：

```
Node n;
n.getNext() = NULL; 
```

这设置`n.next`为`NULL`。

如果方法没有通过引用返回

```
Node* Node::getNext()  //no reference
{
   return this->next;
} 
```

相同的代码

```
Node n;
n.getNext() = NULL; 
```

不会~~修改`n.next`- 在这种情况下，它将保持未初始化~~编译，因为这里`getNext`返回一个`rvalue`。

或者，通过引用返回：

```
Node*& x = n.getNext();
x = new Node; 
```

会修改`n.next`，因为`x`是对`n.next`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T17:47:29.830

```
Node*& getNext(); 
```

返回对 a 的引用`Node*`。为什么他们选择返回对指针的非常量引用，这允许函数的调用者更改它的值......我不知道。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-23T17:47:55.330

这意味着您通过引用返回一个指针。这意味着有人可以修改节点内的实际指针：

```
Node anode = /* something... */;
anode.getNext() = nullptr;
assert(anode.getNext() == nullptr); // assertion passed! 
```

这看起来不像您会使用它的情况。只需返回指针：

```
Node* Node::getNext()
{
   return next;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-23T17:57:54.317

比较

```
class Node {
  private:
     Data data;
     Node* next;
  public:
     Node*& getNext();
};

Node*& Node::getNext()
{
   return this->next;
} 
```

到

```
class Node {
  private:
     Data data;
  public:
     Node* next;
}; 
```

这些代码片段实现*几乎*相同，但后者是

*   更短，

*   更简单，并且

*   也允许访问对象`next`上的指针`const`。

因此，考虑到所有不必要的复杂性和限制，更不用说诸如`Get`前缀和使用之类的 Java 主义`this->`，您可以放心地假设您在该代码中看到的结构甚至命名很可能*没有意义*，甚至具有不利影响——正如该`GetNext`方法所具有的那样，限制了访问。

技术细节：`&`C++ 是否代表“引用”，C++ 引用的最基本解释是它是某个对象的**别名**。在 C++03 中，引用与它所引用的对象无法区分。无论 C++ 版本如何，在有效代码中都不存在空引用之类的东西。

要真正了解指针和引用，您应该使用一本好的**C++ 教科书**，而不是依赖网络论坛中的答案。

SO **[C++ FAQ book list](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)**对教科书有很多很好的建议。

# java - 比较日历时忽略时间

> ID：13036240
> 
> 赞同：1
> 
> 时间：2012-10-23T17:46:23.727
> 
> 标签：java, android, calendar

我将 2 个日历设置为相同的日期，但 Cal1.CompareTo(Cal2) 的结果不是所需的零，因为 2 个日历的时间不同。有没有办法减少日历条目的时间？一种解决方案是将日历条目转换为“日期”类型。然而 Date 几乎被弃用（或者至少它的构造函数使用日历的日、月和年参数）还有其他想法吗？对 timeInMuliseconds 进行一些模计算听起来很难看。

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T17:47:45.317

您可以在两个对象上将 MILLISECOND（或任何您不想要的字段）设置为零。

例子：

```
cal.set(Calendar.MILLISECOND, 0);
cal.set(Calendar.HOUR , 0);
cal.set(Calendar.MINUTE , 0);
cal.set(Calendar.SECOND , 0); 
```

这是日历的[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T17:49:10.080

Personally, I would *strongly* advise you to use [Joda Time](http://joda-time.sf.net) instead. At that point you can use `LocalDate` instead, which accurately represents the information you're interested in. Joda Time has a much richer set of types. It's generally a far better date/time API than the built-in `Calendar` and `Date` classes.

Note that you should also consider the time zone - the same instant in time can be different dates for two different people... (you'd have to consider this when *constructing* a `LocalDate`).

All this is assuming the two values are in the same calendar system, too - but that's pretty likely.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:38:25.207

打印您的日历：

```
Log.d("Test","Time1: "+cal1.getTimeInMillis());
Log.d("Test","Time2: "+cal2.getTimeInMillis()); 
```

如果您没有得到相同的时间，并且您希望两者都相同，请执行以下操作：

```
cal2 = cal1.clone; 
```

# php - 不允许使用 eval()

> ID：13036246
> 
> 赞同：-4
> 
> 时间：2012-10-23T17:46:43.493
> 
> 标签：php, javascript, wordpress, eval

我在我的 wordpress 主题中使用 WPAlchemy MetaBox PHP 类来处理一些自定义帖子类型。运行主题检查时出现问题：

```
WARNING: Found eval in the file inc/metaboxes/MediaAccess.php. eval() is not allowed.. 
Line 375: data = eval('(' + (data.indexOf('{') < 0 ? '{' + data + '}' : data) + ')'); 
```

我不知道为什么会这样，因为第 375 行是 JavaScript 包含在：CDATA

请参阅以下 MediaAccess.php 的摘录

```
// include javascript for special functionality
?><script type="text/javascript">
/* <![CDATA[ */
var interval = null;
var data = $(this).attr('class').match(/({.*})/i);
data = (data && data[1]) ? data[1] : '' ;
data = eval("(" + (data.indexOf('{') < 0 ? '{' + data + '}' : data) + ")");
/* ]]> */
</script><?php 
```

我想将此主题提交到 wordpress 目录，但他们不允许它出现此错误：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T17:47:54.943

您绝对不应该使用`eval`它，因为它可能是一个严重的安全问题。看[这个¹](https://stackoverflow.com/questions/951373/when-is-eval-evil-in-php)，[这个²](https://stackoverflow.com/questions/2482861/question-about-eval-in-php-5)，[这个³](https://stackoverflow.com/questions/4631246/risks-of-using-php-eval?rq=1)，[这个⁴](https://stackoverflow.com/questions/3499672/when-if-ever-is-eval-not-evil)，[这个⁵](https://stackoverflow.com/questions/951373/when-is-eval-evil-in-php)或者[这个⁶](https://stackoverflow.com/questions/4797373/eval-whats-the-point)。

只需以不需要 eval 的方式重写您的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T17:49:19.470

尝试`$.parseJSON(data.indexOf('{') < 0 ? '{' + data + '}' : data)`

*评估是邪恶的*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:50:25.307

如果您必须使用 eval ，就会出现问题。不应该存在使用无法通过最佳实践正确实施的 eval 的实际情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T17:52:00.780

您可以使用：“ev”。“al”，因为它正在扫描您的文件以查找“eval”。但是 eval 的使用是否好，是另一个问题。

# python - 需要帮助在 windows 上为 python27 构建调试 lxml

> ID：13036249
> 
> 赞同：4
> 
> 时间：2012-10-23T17:46:50.877
> 
> 标签：python, lxml

我正在调试另一个由使用 lxml 的脚本导入的 dll。我需要从 lxml 项目创建一个 objectify_d.pyd 和 etree_d.pyd。我按照此处的构建说明成功构建了这些：http: [//lxml.de/build.html](http://lxml.de/build.html)但使用此命令：

```
python setup.py build --debug --static 
```

我试着做：

```
python setup.py build --debug 
```

但这没有用。

构建似乎成功。一个 objectify_d.pyd 和 etree_d.pyd 被创建。使用这些文件（通过将它们复制到 c:/python27/lib/site-packages/lxml/）并运行调试 python 构建，我在尝试导入时得到以下信息：

```
>>> from lxml import objectify
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: DLL load failed: The specified module could not be found.
[83669 refs] 
```

然后我在调试器中运行 python 并看到对 LoadLibraryEx 的调用失败（返回 NULL）。GetLastError() 调用返回 126，这意味着它找不到 dll。路径是正确的。所以我希望它没有找到依赖的DLL。我在构建它的机器上运行它，所以它不是缺少的运行时库。

这是我构建 dll 时打印的内容：

```
</c/lxml/lxml-2.3 Trunk>
$python setup.py build --debug --static
Building lxml version 2.3.
Building with Cython 0.15.1.
ERROR: 'xslt-config' is not recognized as an internal or external command,
operable program or batch file.

** make sure the development packages of libxml2 and libxslt are installed **

Using build configuration of libxslt
Building against libxml2/libxslt in one of the following directories:
  ..\iconv-1.9.2.win32\lib
  ..\libxml2-2.7.8.win32\lib
  ..\libxmlsec-1.2.18.win32\lib
  ..\libxslt-1.1.26.win32\lib
  ..\zlib-1.2.5\lib
  c:\python27
running build
running build_py
running build_ext
skipping 'src/lxml\lxml.etree.c' Cython extension (up-to-date)
building 'lxml.etree' extension
C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\cl.exe /c /nologo /Od /MDd /W3 /GS- /Z7 /D_DEBUG -I..\iconv-1.9.2.win32\include -I..\libxml2-2.7.8.win 32\include -I..\libxmlsec-1.2.18.win32\include -I..\libxslt-1.1.26.win32\include -I..\zlib-1.2.5\include -I..\ -IC:\python27\include -IC:\python27\PC /TcC:\lxml \lxml-2.3\src\lxml\lxml.etree.c /Fobuild\temp.win32-2.7\Debug\src/lxml\lxml.etree.obj -w DEBUG
cl : Command line warning D9025 : overriding '/W3' with '/w'
cl : Command line warning D9024 : unrecognized source file type 'DEBUG', object file assumed
cl : Command line warning D9027 : source file 'DEBUG' ignored
lxml.etree.c
C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\link.exe /DLL /nologo /INCREMENTAL:no /DEBUG /pdb:None /LIBPATH:..\iconv-1.9.2.win32\lib /LIBPATH:..\l ibxml2-2.7.8.win32\lib /LIBPATH:..\libxmlsec-1.2.18.win32\lib /LIBPATH:..\libxslt-1.1.26.win32\lib /LIBPATH:..\zlib-1.2.5\lib /LIBPATH:c:\python27 /LIBPATH:C:\p ython27\libs /LIBPATH:C:\python27\PCbuild libxslt_a.lib libexslt_a.lib libxml2_a.lib iconv_a.lib zlib.lib WS2_32.lib /EXPORT:initetree build\temp.win32-2.7\Debu g\src/lxml\lxml.etree.obj /OUT:build\lib.win32-2.7\lxml\etree_d.pyd /IMPLIB:build\temp.win32-2.7\Debug\src/lxml\etree_d.lib /MANIFESTFILE:build\temp.win32-2.7\Debug\src/lxml\etree_d.pyd.manifest
   Creating library build\temp.win32-2.7\Debug\src/lxml\etree_d.lib and object build\temp.win32-2.7\Debug\src/lxml\etree_d.exp
LINK : warning LNK4098: defaultlib 'MSVCRT' conflicts with use of other libs; use /NODEFAULTLIB:library
lxml.etree.obj : warning LNK4049: locally defined symbol _xmlFree imported
lxml.etree.obj : warning LNK4049: locally defined symbol _xmlMalloc imported
lxml.etree.obj : warning LNK4049: locally defined symbol _xsltDocDefaultLoader imported
lxml.etree.obj : warning LNK4049: locally defined symbol _xsltLibxsltVersion imported
zlib.lib(adler32.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(crc32.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(deflate.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(gzclose.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(gzlib.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(gzread.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(gzwrite.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(inffast.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(inflate.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(inftrees.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(trees.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(zutil.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin\mt.exe -nologo -manifest build\temp.win32-2.7\Debug\src/lxml\etree_d.pyd.manifest -outputresource:build\lib.win32-2.7\lxml\etree_d.pyd;2 skipping 'src/lxml\lxml.objectify.c' Cython extension (up-to-date)
building 'lxml.objectify' extension
C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\cl.exe /c /nologo /Od /MDd /W3 /GS- /Z7 /D_DEBUG -I..\iconv-1.9.2.win32\include -I..\libxml2-2.7.8.win32\include -I..\libxmlsec-1.2.18.win32\include -I..\libxslt-1.1.26.win32\include -I..\zlib-1.2.5\include -I..\ -IC:\python27\include -IC:\python27\PC /TcC:\lxml\lxml-2.3\src\lxml\lxml.objectify.c /Fobuild\temp.win32-2.7\Debug\src/lxml\lxml.objectify.obj -w DEBUG
cl : Command line warning D9025 : overriding '/W3' with '/w'
cl : Command line warning D9024 : unrecognized source file type 'DEBUG', object file assumed
cl : Command line warning D9027 : source file 'DEBUG' ignored
lxml.objectify.c
C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\link.exe /DLL /nologo /INCREMENTAL:no /DEBUG /pdb:None /LIBPATH:..\iconv-1.9.2.win32\lib /LIBPATH:..\libxml2-2.7.8.win32\lib /LIBPATH:..\libxmlsec-1.2.18.win32\lib /LIBPATH:..\libxslt-1.1.26.win32\lib /LIBPATH:..\zlib-1.2.5\lib /LIBPATH:c:\python27 /LIBPATH:C:\python27\libs /LIBPATH:C:\python27\PCbuild libxslt_a.lib libexslt_a.lib libxml2_a.lib iconv_a.lib zlib.lib WS2_32.lib /EXPORT:initobjectify build\temp.win32-2.7\Debug\src/lxml\lxml.objectify.obj /OUT:build\lib.win32-2.7\lxml\objectify_d.pyd /IMPLIB:build\temp.win32-2.7\Debug\src/lxml\objectify_d.lib /MANIFESTFILE:build\temp.win32-2.7\Debug\src/lxml\objectify_d.pyd.manifest
   Creating library build\temp.win32-2.7\Debug\src/lxml\objectify_d.lib and object build\temp.win32-2.7\Debug\src/lxml\objectify_d.exp
LINK : warning LNK4098: defaultlib 'MSVCRT' conflicts with use of other libs; use /NODEFAULTLIB:library
zlib.lib(adler32.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(crc32.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(deflate.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(gzclose.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(gzlib.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(gzread.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(gzwrite.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(inffast.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(inflate.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(inftrees.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(trees.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
zlib.lib(zutil.obj) : warning LNK4099: PDB 'zlib.pdb' was not found with '..\zlib-1.2.5\lib\zlib.lib' or at 'C:\lxml\lxml-2.3\zlib.pdb'; linking object as if no debug info
C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin\mt.exe -nologo -manifest build\temp.win32-2.7\Debug\src/lxml\objectify_d.pyd.manifest -outputresource:build\lib.win32-2.7\lxml\objectify_d.pyd;2 
```

其他一些信息：

*   我正在使用 lxml-2.3 代码，因为这是我的应用程序一直在使用的。
*   我正在使用 python27（32 位）的 Windows 7 机器上运行

如果有人可以为我提供适用于 Windows 的 lxml 调试版本，或者向我说明如何使用与调试 dll 混合的发布 python dll，我会很满意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:00:24.330

您是在 Cygwin 环境中构建然后尝试在 Windows 中运行吗？尝试在 Windows 中构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-27T20:18:30.540

我还没有尝试构建 lxml 的调试版本，但几乎可以肯定它不会工作。据我记得，lxml 附带的设置脚本仅用于构建发布版本。

您可以利用这一点，简单地为发布版本生成调试符号 (.pdb)。该过程相当复杂，但这里有一个概述：

1.  安装必要的构建工具（Visual Studio、Powershell）。
2.  获取lxml的依赖（libxml2、libxslt、iconv、zlib）的源代码。
3.  构建这些依赖项并生成它们的调试符号。
4.  下载您要调试的lxml 版本（例如3.7.0）。
5.  调整 lxml 的 setup.py 以指向静态构建的依赖项。
6.  修补 distutils 使其认为必须使用您的特定 Visual Studio 版本，而不是用于构建 Python 解释器的版本。
7.  构建 lxml 并生成其调试符号。
8.  将整个东西打包在一个轮子文件中。

而已！[:) 我想链接到详细程序](https://benbernardblog.com/how-to-build-lxml-and-get-its-debug-symbols-on-windows/)可能更合理。

免责声明：我是帖子的作者。

# yahoo-pipes - 雅虎管道 - 仅获取图像和描述

> ID：13036250
> 
> 赞同：1
> 
> 时间：2012-10-23T17:46:54.070
> 
> 标签：yahoo-pipes

我正在尝试通过雅虎管道从站点 free.zoznam.sk 创建我自己的 rss 提要。这个网站的提要是通过 feed43.com/ 创建的源代码让我们谈谈这个视频[http://free.zoznam.sk/video/Specialny-preskok-1350927332](http://free.zoznam.sk/video/Specialny-preskok-1350927332)

现在我只需要提取视频的描述和图像，而忽略其余部分。

描述可以从：

```
<meta
   name="description"
   content="už od začiatku to vyzeralo na problém. Zábavné videá online na Free.sk. Pridaj aj svoje video!"
/> 
```

或者

```
<!-- eTarget ContextAd Start -->
  už od začiatku to vyzeralo na problém
<!-- eTarget ContextAd End -->` 
```

或者

```
<input
   type="hidden"
   name="module_description"
   value="už od začiatku to vyzeralo na problém"
/> 
```

而视频图像的来源是：

```
<link
   rel="image_src"
   href="http://free.zoznam.sk/openMedia.php?path=e70fc312077202556dd3e5261adbcd49a2502b0eabc95423473527e6ef3df9467a4730bface6b045720aa361b2fd1874"
/> 
```

这是我的管道[http://pipes.yahoo.com/pipes/pipe.info?_id=d08fe4bb311f8681c2e007966cdf6226](http://pipes.yahoo.com/pipes/pipe.info?_id=d08fe4bb311f8681c2e007966cdf6226)

它正在工作，但我怎样才能从源中删除不相关的东西，例如：

```
<div style="width:640px;">

<div class="popisb" style="background-image:none;width:640px;margin-left:10px;margin-top:10px;height:auto;">

etc... 
```

任何帮助，将不胜感激。

# c# - 在程序启动时使用输出文件对话框提示用户（初始化）

> ID：13036254
> 
> 赞同：1
> 
> 时间：2012-10-23T17:47:17.873
> 
> 标签：c#, winforms, openfiledialog

我目前正在处理输出文件。我正在构建一个程序，该程序要求用户在程序执行任何其他操作之前保存输出文件。目的是程序将结果写入此输出文件。我已经能够通过单击按钮来显示输出文件对话框。程序初始化后是否会立即通过输出文件对话框提示用户？

通过按钮的代码输出文件：

```
namespace open_document
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

private void button1_Click(object sender, EventArgs e)
        {
            OpenFileDialog openFile = new OpenFileDialog();
            openFile.Filter = "Text Files | *.txt";
            openFile.ShowDialog();          
            StreamReader infile = File.OpenText(openFile.FileName);

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:50:46.653

根据您的要求，您为什么不使用or的`Load`事件：`Form``Page`

设计师：

```
this.Load += new System.EventHandler(this.MainForm_Load); 
```

代码：

```
private void MainForm_Load(object sender, EventArgs e)
{   
    OpenFileDialog openFile = new OpenFileDialog();
    openFile.Filter = "Text Files | *.txt";
    openFile.ShowDialog();          
    StreamReader infile = File.OpenText(openFile.FileName);
    // ... 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:29:04.133

这会在表单加载之前执行您的代码。

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        OpenFileDialog openFile = new OpenFileDialog();
        openFile.Filter = "Text Files | *.txt";
        openFile.ShowDialog();          
        StreamReader infile = File.OpenText(openFile.FileName);
        ...

        Application.Run(new Form1());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:50:36.353

您可以使用 OnShown：

```
protected override void OnShown(EventArgs e)
{
    base.OnShown(e);
    OpenFileDialog openFile = new OpenFileDialog();                 
    openFile.Filter = "Text Files | *.txt";                 
    openFile.ShowDialog();                           
    StreamReader infile = File.OpenText(openFile.FileName);   // Don't leave this open!
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T17:50:47.833

您最好的选择可能是将此处理程序中的代码提取到不带参数的方法中（无论如何您不需要事件传递的任何内容），然后在构造函数或表单的 Load 事件中调用它。

# google-bigquery - bq load：错误处理作业...意外。请再试一次

> ID：13036259
> 
> 赞同：1
> 
> 时间：2012-10-23T17:47:29.913
> 
> 标签：google-bigquery

```
bq load --max_bad_records=1000000 --format=json install.$date gs://production_data/install/install_$date.json.gz ./schema.json 
```

错误：

```
BigQuery error in load operation: Error processing job 'xxxxxxxxxxxxx:job_c4932fa55c304c9f88224595071f1e17': Unexpected. Please try again. 
```

bq show -j 对错误消息没有任何帮助。

```
 "status": {
    "errorResult": {
      "message": "Unexpected. Please try again.",
      "reason": "internalError"
    },
    "errors": [
      {
        "message": "Unexpected. Please try again.",
        "reason": "internalError"
      }
    ],
    "state": "DONE"
  } 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:03:48.107

您将数据导入为 CSV，而不是 json。这是由于 bq 工具中有一个令人困惑的标志：`--format`是输出的格式。你应该`--source_format=json`改用。我已经提交了两个内部错误：一个是 format/source_format 标志太容易混淆，另一个是当数据格式与指定的格式不匹配时我们应该给出更好的错误。

# python - python Storm ORM和避免重复

> ID：13036265
> 
> 赞同：0
> 
> 时间：2012-10-23T17:47:58.390
> 
> 标签：python, orm, storm-orm

我是 python 新手，我刚开始使用 Storm 和 python 作为基本的 ORM。

我在一个文件中有很多数据并且有一些重复，为了识别它们，您可以看到一些行的 id 重复。

我想将它们插入到我的数据库中，我确实将 id 设置为主键，所以它不能有重复项。如果它是重复的，我希望我的代码忽略在表中插入数据。但相反，它只是失败了`_mysql_exceptions.IntegrityError: (1062, "Duplicate entry '75083587476530022' for key 'PRIMARY'")`

这是我班级的定义

```
from storm.locals import *

class Board(object):
  __storm_table__ = 'boards'
  id = Int(primary=True)
  description = Unicode()
  category = Unicode()

  def __init__(self, val): 
    self.id = val['id']
    self.description = val['description']
    self.category = val['category'] 
```

并创建一行我做：

```
database = create_database('mysql://root@/mydb') 
store = Store(database)
data = {u'description': u'', u'id': 165366686256470180, u'category': u'Children'}
store.add(Board(data))
store.commit()
store.flush() 
```

我也知道在 MYSQL 中我可以做什么

```
ON DUPLICATE KEY UPDATE o 
```

知道如何让 Storm 使用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:25:39.403

我会编写一个 python 脚本，在 SQL 插入之前删除重复。否则，您必须提交每一行，捕获异常并忽略该行。这不好。拥有干净的数据并一次性提交所有数据会更好。SQL 实际上只关心表操作，而不关心数据完整性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-30T17:51:53.477

如果您想让数据库处理，我建议：

```
from MySQLdb import IntegrityError
# You connected to DB and have your store
# You loaded your data inside data_list
for data_row in data_list:
    try:
        store.add(Board(data_row))
        store.flush() # This is enough to raise any DB error
    except IntegrityError:
        continue # You can probably log something here
store.commit() 
```

# c - 使用大量节点后 malloc 失败

> ID：13036270
> 
> 赞同：1
> 
> 时间：2012-10-23T17:48:19.607
> 
> 标签：c, malloc

我必须创建能够生成 GML 文件的程序。

为此我实现了一个函数`GetEdges`，这个函数应该返回三个数组（通过引用调用）。

该函数的签名如下所示：

```
bool GetEdges(DG_NODE_ID **sourceIds, DG_NODE_ID **destIds, int **weights, int *count) 
```

在我想分配空间的函数中：

```
*sourceIds = (DG_NODE_ID *) malloc(cntEdges * sizeof (DG_NODE_ID)); 
```

一旦我使用 4 个节点，我就会得到以下输出：

> 图：malloc.c:2451: sSYSMALLOc: 断言`(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size)
> 
> > = (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1)) ) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' 失败。

我尝试了所有方法，但我不知道为什么在使用 4 个节点后会失败。

我上传了整个源代码：[下载 - 源代码](http://www.file-upload.net/download-6727886/malloc_problem.zip.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:53:24.620

这很可能意味着您正在滥用由以下人员分配的内存：

1.  在您分配的内容开始之前编写（不常见）。
2.  写完你分配的东西（常见）。
3.  释放以前未分配的东西（不常见）。
4.  释放后写入先前分配的空间（常见）。

你有`valgrind`吗？如果是这样，请使用它。如果没有，请尽可能获取并使用它。（它可用于许多类 Unix 系统；它不适用于 Windows AFAIK。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:54:16.237

您是否验证过 cntEdges 是一个合理的值，而不是一些未初始化的（和非常大的数字）值？

# python - python - compare two directories recursively and flag equivalent structure

> ID：13036272
> 
> 赞同：3
> 
> 时间：2012-10-23T17:48:42.500
> 
> 标签：python, performance, recursion

I have read many questions in stackoverflow, related to python compare directory. However, my current question is bit different.
I have two directories, which contains two different version release package contents. Now I want to compare to ensure the contents are same. **However** few files have version name embedded into them. Now which is the best possible way to compare them and conclude (except the version difference, all files match).

* * *

For example:
Version **V1R1C1** contains directory structure as below

```
pmt> find . -name "*"
.
./c1
./c1/c2
./c1/c1_V1R1C1.cfg
./a1
./a1/a1_V1R1C1.cfg
./a1/a2
./a1/a2/a1a2_V1R1C1.cfg
./b1/a_best_file.txt
./b1/b2/a_test_file.txt
./b1/b2/b1b2_V1R1C1.cfg
./a_V1R1C1.cfg 
```

Version **V2R3C1** may contain below structure

```
pmt> find . -name "*"
.
./c1
./c1/c2
./c1/c1_V2R3C1.cfg
./a1
./a1/a1_V2R3C1.cfg
./a1/a2
./a1/a2/a1a2_V2R3C1.cfg
./b1/a_best_file.txt
./b1/b2/a_test_file.txt
./b1/b2/b1b2_V2R3C1.cfg
./a_V2R3C1.cfg 
```

* * *

In the above case, the program must flag it as **equivalent** structure.

I can think of few solutions - like for example, read both the directory structure recursively into cache (dict), rip the version information and compare etc. But looks like not a completely effective mechanism because of two reason 1\. It does not utilize the inbuilt directory compare 2.The multiple read/rip/compare is bound to cost (especially with huge directory tree structure).

I am looking for ideas, which are simple and efficient than the one above.

* * *

PS :
1\. In case of any difference (except the version unlike the above example), I would like to use the left/right etc to get diffed list.
2\. We can assume before hand which is the version name in both directories (like V1R1C1 in first case and V2R3C1 in second case).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:06:33.193

glob 模块有一个迭代器函数（与列表生成相比），您可能可以在轻型 for 循环中使用它来迭代每个文件条目，然后将差异踢到单独的列表/字典中。

这样你就不会生成大量文件名然后挑选它们。

[http://docs.python.org/py3k/library/glob.html#module-glob](http://docs.python.org/py3k/library/glob.html#module-glob)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T18:08:42.693

使用集合比较怎么样？

```
set((remove_version(filepath) for filepath in iter_file(dic1))) == set((remove_version(filepath) for filepath in iter_file(dic2))) 
```

# c - Binary Process Tree with fork()

> ID：13036278
> 
> 赞同：3
> 
> 时间：2012-10-23T17:49:11.613
> 
> 标签：c, fork, binary-tree

My first project for my OS class is to create a process tree using `fork()` that has a depth that the user specifies at the command line. Each leaf level node needs to sort data and pass it back to its parent using named-pipes (FIFOs).

I can create an N-depth tree with `fork()`, each process having 2 children. What I can’t figure out is how to pass a FIFO to each child all the way down the tree and then have this *process* perform a sort on certain data in the FIFO *and then* also pass it back up the tree to the top.

Here is the pseudo-code of what I have so far for building the tree:

```
void CreateTree(int level)
{
    if level = 0 return

    int left_child = fork();
    if(left_child != 0)        //we are the parent
    {
        int right_child = fork();
        if(right_child == 0)
            CreateTree(level - 1);
    }
    else
    {
        CreateTree(level-1);
    }
} 
```

So how do I grab each process individually to do work with them?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:24:51.423

您没有说明任何数据流要求，例如叶子要排序的数据源。在分工方面，叶子节点会排序，但分支只需要合并。从某种意义上说，您正在创建一个使用进程和 FIFO 而不是堆栈的混合[归并排序。](https://en.wikipedia.org/wiki/Merge_sort)

如前所述，您可以使用简单但不优雅的方法来分配要排序的值数组并在主进程中预先创建所有 FIFO。根据每个孩子的标识符或索引号，它会从整个数组和适当的 FIFO 中选择一个数据范围（例如，对于节点*N*用来向其父节点传输数据的 FIFO）。回想一下，创建的子进程共享其父进程的地址空间，并且可以在全局范围内看到一个数组。`fifo.*N*`*`fork`*

 *二叉树很好地打包成一个数组。根据维基百科上的[二叉树](https://en.wikipedia.org/wiki/Binary_tree#Arrays)

> 二叉树也可以以广度优先顺序存储为数组中的隐式数据结构，如果树是完全二叉树，这种方法不会浪费空间。在这种紧凑的安排中，如果一个节点有一个索引*i*，它的子节点在索引*2i+1*（对于左子节点）和*2i+2*（对于右子节点），而它的父节点（如果有的话）在索引 ⌊ <em>(i-1)/2⌋（假设根的索引为零）。

注意 ⌊<em>x⌋ 是不大于*x*的最大整数，也称为[*x*](https://en.wikipedia.org/wiki/Floor_and_ceiling_functions)[的下限](https://en.wikipedia.org/wiki/Floor_and_ceiling_functions)*。`(i-1)/2`在 C 语言中，您可以通过将 的值分配给类型为 的变量来获得发言权`int`。*

 *要在树周围线程节点标识符，您可以使用代码，例如

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>

void proc_tree(int i, int current_depth, int max_depth)
{
  pid_t kid = fork();

  if (kid == -1) {
    fprintf(stderr, "[%d]: fork: %s\n", getpid(), strerror(errno));
  }
  else if (kid == 0) {
    /* child */
    printf("[%d]: i=%d (depth %d)\n", getpid(), i, current_depth);

    if (current_depth < max_depth) {
      proc_tree(2*i+1, current_depth+1, max_depth);
      proc_tree(2*i+2, current_depth+1, max_depth);
    }

    exit(EXIT_SUCCESS);
  }
  else {
    /* parent */
    pid_t pid;
    int status;
    pid = waitpid(kid, &status, 0);
    if (pid == -1)
      fprintf(stderr, "[%z]: waitpid: %s\n", getpid(), strerror(errno));
  }
} 
```

调用它

```
int main(int argc, char *argv[])
{
  int depth;

  if (argc != 2) {
    fprintf(stderr, "Usage: %s depth\n", argv[0]);
    return EXIT_FAILURE;
  }

  depth = atoi(argv[1]);
  if (depth < 0) {
    fprintf(stderr, "%s: depth must be non-negative\n", argv[0]);
    return EXIT_FAILURE;
  }

  proc_tree(0, 0, depth);

  return EXIT_SUCCESS;
} 
```

样本输出：

```
$ ./树排序 3
[28837]：i=0（深度 0）
[28838]：i=1（深度 1）
[28839]：i=3（深度 2）
[28840]：i=7（深度 3）
[28841]：i=8（深度 3）
[28842]：i=4（深度 2）
[28843]：i=9（深度 3）
[28844]：i=10（深度 3）
[28845]：i=2（深度 1）
[28846]：i=5（深度 2）
[28847]：i=11（深度 3）
[28848]：i=12（深度 3）
[28849]：i=6（深度 2）
[28850]：i=13（深度 3）
[28851]：i=14（深度 3）
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:53:37.050

You mentioned fifo, aka a named pipe, so we'll look at that. (code here assumes *nix):

This quick example shows sending data from the parent to the child, having the child manipulate it, then returning it to the parent. So you're not "passing" the fifo, but each process (or child process) will have access to the `char *` which gives them the name of the fifo so they can open it for reading or writting as they need to. You can take this concept and expand upon it for each of the children nodes you have:

```
int main()
{
    int fd, n, ret;
    fd_set rfds;
    char * myfifo = "/tmp/myfifo";

    mkfifo(myfifo, 0666);  // Create this buffer

    if(fork())     //Kid code
    {
      char kid_buffer[4] = {0};
      char temp;

      fd = open(myfifo, O_RDONLY); //Open the fifo for reading
      n = read(fd, kid_buffer, 4);

      printf("Kid %d read %d bytes, parent gave us %s\n",getpid(), n, kid_buffer);
      fflush(stdout);
      close(fd);

      // "sort" the data the parent gave us
      temp = kid_buffer[0];
      kid_buffer[0] = kid_buffer[1];
      kid_buffer[1] = kid_buffer[2];
      kid_buffer[2] = temp;
      kid_buffer[3] = '\0';
      printf("Kid %d reoriginized the list %s\n",getpid(), kid_buffer);
      fflush(stdout);

      // send the data back
      fd = open(myfifo, O_WRONLY);
      write(fd, kid_buffer, strlen(kid_buffer));
      close(fd);
      return 0; 
    }
    else
    {
      char arr[] = "abc";

      //Open the fifo for writing
      fd = open(myfifo, O_WRONLY);
      write(fd, arr, strlen(arr));  //Sent my data to kid
      printf("Parent process %d, just sent my data %s to the kid\n", getpid(), arr);
      fflush(stdout);
      close(fd);

      //Open the fifo for reading
      fd = open(myfifo, O_RDONLY);
      n = read(fd, arr, 4);

      // show the data we got back
      printf("Parent %d read %d bytes, kid gave us back %s\n",getpid(), n, arr);
      fflush(stdout);
      close(fd);
    }

    unlink(myfifo);

    return 0;
} 
```

So from the output here you can see the parent created it's own array "abc" and it got modified by the child (passed via FIFO) to "bca", now it's back with the parent and formated.

```
mike@linux-4puc:~> ./a.out 
Parent process 4295, just sent my data abc to the kid
Kid 4294 read 3 bytes, parent gave us abc
Kid 4294 reoriginized the list bca
Parent 4295 read 3 bytes, kid gave us back bca 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:57:27.443

*   为每个孩子分配一个数字（不是 PID；在有 PID 之前您需要知道数字！）。
*   创建一个`mkfifo()`名称如下的 FIFO ( )，`fifo.N`其中 N 是数字。
*   然后每个孩子都知道要写入哪个 FIFO。
*   每个父节点都知道要读取哪些 FIFO。（据推测，父母只是在运行合并而不是排序。）

大概，孩子们都知道，不知何故，他们也必须对哪些数据进行排序。

* * *

> 在我初始化所有 FIFO 之后，我如何知道哪个进程正在执行以及何时执行？当我在构建树后回到我的主程序时，有没有办法根据 PID 和控制语句来分类正在运行的进程？

进程可以分为“叶”和“非叶”进程。

叶进程没有任何子进程。他们执行排序任务并将排序后的数据写入其输出 FIFO。它们将在 FIFO 上被阻塞，直到它们的父进程打开它进行读取。当他们完成写入时，他们关闭 FIFO 并且父进程获得 EOF。

每个非叶进程都在合并来自其两个子进程的排序数据。每个非叶进程都需要知道它自己的输出 FIFO 是什么（根节点可能写入标准输出而不是 FIFO），以及它的两个子节点的 FIFO 是什么。也许非叶进程创建 fifo.$$.1 和 fifo.$$.2 （其中 '$$' 是已经运行的非叶进程的 PID），而不是让父进程创建它们正面。然后它分叉它的两个孩子，用一个变量指示每个孩子使用哪个 FIFO。然后非叶进程打开两个 FIFO 进行读取（以及它自己的输出 FIFO 进行写入），并合并两个数据流（从两者中读取一行，将较小的写入输出，读取替换行，并一直持续到一个EOF，然后完成另一个的阅读）。

在顶层（原始进程），基本机制与任何非叶进程相同；它创建两个 FIFO，启动两个子级，打开 FIFO 进行读取，对两个流进行合并，写入标准输出而不需要与另一个 FIFO 混淆。**

# hbase - can not access HBase status UI on http://localhost:60010

> ID：13036279
> 
> 赞同：14
> 
> 时间：2012-10-23T17:49:14.427
> 
> 标签：hbase

I use ubuntu 12.04, after download and un-tar hbase-0.94.1.jar. I started hbash in standalone mode by the following command

```
user@ubuntu:~/temp/hbase-0.94.1$ bin/start-hbase.sh 
starting master, logging to /home/user/temp/hbase-0.94.1/bin/../logs/hbase-user-master-ubuntu.out 
```

but when I try to access hbash status UI on

```
http://localhost:60010 
```

, I got "Unable to connect".

Thanks.

Dan

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2014-07-21T06:53:34.017

0.98 版本后端口号发生了变化。现在是 16010 而不是 60010）。检查此页面以了解一般 UI 故障排除： http: [//hbase.apache.org/book/trouble.tools.html](http://hbase.apache.org/book/trouble.tools.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T06:17:33.820

首先检查日志文件以查看 HBase 是否正确启动。然后尝试使用IP地址

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-07T15:58:30.757

首先从您的 hbase 安装路径的**日志文件夹中检查“** **hbase-hduser-master-ubuntu.log** ”文件

 ****如果您收到以下错误**

2014-09-07 20:22:24,505 错误 [main] master.HMasterCommandLine: Master exiting java.lang.RuntimeException: **HMaster Aborted** at org.apache.hadoop.hbase.master.HMasterCommandLine.startMaster(HMasterCommandLine.java:194) at org.apache.hadoop.hbase.master.HMasterCommandLine.run(HMasterCommandLine.java:135) 在 org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70) 在 org.apache.hadoop.hbase.util。 org.apache.hadoop.hbase.master.HMaster.main(HMaster.java:2794) 上的 ServerCommandLine.doMain(ServerCommandLine.java:126)

比较***Hadoop***的**core** -site.xml和hbase的***hbase*** **-site.xml**。两个文件中的 hdfs URL 应该相同

 *******核心站点.xml***

```
 <configuration>
    <property>
        <name>fs.default.name</name>
        <value>hdfs://192.168.203.130:9000</value>
    </property>
 </configuration> 
```

***hbase-site.xml***

```
 <property>
    <name>hbase.rootdir</name>
    <!-- <value>hdfs://localhost:9000/hbase</value> -->
    <value>hdfs://192.168.203.130:9000/hbase</value> 
    <description>The directory shared by RegionServers.
    </description>
 </property> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-28T15:25:41.237

请尝试使用[http://localhost:16010访问 HBase master web-ui](http://localhost:16010)******

# c++ - 在磁盘上的特定位置创建队列 c++

> ID：13036280
> 
> 赞同：-2
> 
> 时间：2012-10-23T17:49:18.767
> 
> 标签：c++, linux, queue, ram, alloc

如何在 C++ 中创建将在特定路径上分配的队列？

我将 ramfs 安装在 /mnt/ram/ 上，这是一个 RAM 文件夹而不是磁盘，并且希望队列在那里，因此性能会比在磁盘上分配队列更好。

队列是c++的队列库，即：

```
#include <queue>
queue<string> requestsqueue; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:32:26.163

> > 如何在 C++ 中创建将在特定路径上分配的队列？

你不能。

> > 队列是c++的队列库，即：
> > 
> > ```
> > #include <queue>
> > queue<string> requestsqueue; 
> > ```

标准队列数据结构 ,`std::queue`仅存在于内存中。它与任何磁盘文件或文件系统中的任何路径都没有特殊关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:15:30.733

您可以在 /mnt/ram 中创建文件，就像在其他任何地方创建文件一样。不同之处在于 ramfs 的内容在系统重新启动时被删除。

您可能还想考虑使用 tmpfs，因为它的大小可能会受到限制，因此您不会用完所有内存并且由交换空间支持，因此如果一段时间不使用它可以被分页。

[这里有更多信息。](http://www.thegeekstuff.com/2008/11/overview-of-ramfs-and-tmpfs-on-linux/)

# ejb - Problems with EJB injection when use Quartz and JBoss 5.0.1

> ID：13036283
> 
> 赞同：1
> 
> 时间：2012-10-23T17:49:43.513
> 
> 标签：ejb, quartz-scheduler

I need to configure a process that it execute when start the server JBoss 5.0.1\. I have the next class:

```
@MessageDriven(activationConfig =
{
@ActivationConfigProperty(propertyName="cronTrigger", propertyValue="0 0/1 * * * ?")
})
@ResourceAdapter("quartz-ra.rar")
public class SincronizadorProcesosEnEspera implements Job
{
// @EJB(mappedName=Constants.EJB_MAPPED_FACADE_ADMINISTRADOR_LOCAL) <----------I try with this other way, and nothing
private IAdministradorFacade administradorFacade;

public void execute(JobExecutionContext arg0) throws JobExecutionException
{
// administradorFacade = (IAdministradorFacade) JNDIResources.getAdministradorFacade(); <-------------------I try with this other way, and nothing
// administradorFacade =(IAdministradorFacade) BeanContextUtil.getBean("administradorFacade"); <------------------I try with this other way, and nothing
administradorFacade.sincronizarProcesos();<--------- When pass for this point throw a error
}
} 
```

The error that throw the aplicattion is this:

```
11:38:00,066 ERROR [TxPolicy] javax.ejb.EJBTransactionRolledbackException: Unable to inject jndi dependency: env/com.integra.ppo.modelo.administrador.scheluder.SincronizadorProcesosEnEspera/administradorFacade into property com.integra.ppo.modelo.administrador.scheluder.SincronizadorProcesosEnEspera.administradorFacade: ejb not bound
11:38:00,066 ERROR [JobRunShell] Job default.job.0.1351010259957 threw an unhandled Exception:
javax.ejb.EJBTransactionRolledbackException: Unable to inject jndi dependency: env/com.integra.ppo.modelo.administrador.scheluder.SincronizadorProcesosEnEspera/administradorFacade into property com.integra.ppo.modelo.administrador.scheluder.SincronizadorProcesosEnEspera.administradorFacade: ejb not bound
at org.jboss.ejb3.tx.Ejb3TxPolicy.handleInCallerTx(Ejb3TxPolicy.java:115)
at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:130)
at org.jboss.aspects.tx.TxInterceptor$Required.invoke(TxInterceptor.java:194)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.ejb3.tx.NullInterceptor.invoke(NullInterceptor.java:42)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.ejb3.security.Ejb3AuthenticationInterceptorv2.invoke(Ejb3AuthenticationInterceptorv2.java:80)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.ejb3.BlockContainerShutdownInterceptor.invoke(BlockContainerShutdownInterceptor.java:67)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.aspects.currentinvocation.CurrentInvocationInterceptor.invoke(CurrentInvocationInterceptor.java:67)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.ejb3.mdb.MessagingContainer.localInvoke(MessagingContainer.java:262)
at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.delivery(MessageInflowLocalProxy.java:270)
at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.invoke(MessageInflowLocalProxy.java:140)
at $Proxy351.execute(Unknown Source)
at org.jboss.resource.adapter.quartz.inflow.QuartzJob.execute(QuartzJob.java:57)
at org.quartz.core.JobRunShell.run(JobRunShell.java:203)
at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520)
Caused by: java.lang.RuntimeException: Unable to inject jndi dependency: env/com.integra.ppo.modelo.administrador.scheluder.SincronizadorProcesosEnEspera/administradorFacade into property com.integra.ppo.modelo.administrador.scheluder.SincronizadorProcesosEnEspera.administradorFacade: ejb not bound
at org.jboss.injection.JndiPropertyInjector.lookup(JndiPropertyInjector.java:82)
at org.jboss.injection.JndiPropertyInjector.inject(JndiPropertyInjector.java:99)
at org.jboss.injection.JndiPropertyInjector.inject(JndiPropertyInjector.java:89)
at org.jboss.injection.JndiPropertyInjector.inject(JndiPropertyInjector.java:61)
at org.jboss.ejb3.injection.InjectionInvocation.invokeTarget(InjectionInvocation.java:89)
at org.jboss.ejb3.injection.InjectionInvocation.invokeNext(InjectionInvocation.java:83)
at org.jboss.aspects.currentinvocation.CurrentInvocationInterceptor.invoke(CurrentInvocationInterceptor.java:67)
at org.jboss.ejb3.injection.InjectionInvocation.invokeNext(InjectionInvocation.java:74)
at org.jboss.ejb3.EJBContainer.injectBeanContext(EJBContainer.java:1086)
at org.jboss.ejb3.pool.AbstractPool.create(AbstractPool.java:83)
at org.jboss.ejb3.pool.AbstractPool.create(AbstractPool.java:73)
at org.jboss.ejb3.pool.StrictMaxPool.get(StrictMaxPool.java:145)
at org.jboss.ejb3.stateless.StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:58)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126)
... 17 more
Caused by: javax.naming.NamingException: Could not dereference object [Root exception is javax.naming.NameNotFoundException: ejb not bound]
at org.jnp.interfaces.NamingContext.resolveLink(NamingContext.java:1348)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:813)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:682)
at org.jboss.ejb3.JndiUtil.lookup(JndiUtil.java:44)
at org.jboss.injection.JndiPropertyInjector.lookup(JndiPropertyInjector.java:75)
... 31 more
Caused by: javax.naming.NameNotFoundException: ejb not bound
at org.jnp.server.NamingServer.getBinding(NamingServer.java:771)
at org.jnp.server.NamingServer.getBinding(NamingServer.java:779)
at org.jnp.server.NamingServer.getObject(NamingServer.java:785)
at org.jnp.server.NamingServer.lookup(NamingServer.java:396)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:722)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:682)
at javax.naming.InitialContext.lookup(InitialContext.java:392)
at org.jnp.interfaces.NamingContext.resolveLink(NamingContext.java:1342)
... 35 more
11:38:00,066 ERROR [ErrorLogger] Job (default.job.0.1351010259957 threw an exception.
org.quartz.SchedulerException: Job threw an unhandled exception. [See nested exception: javax.ejb.EJBTransactionRolledbackException: Unable to inject jndi dependency: env/com.integra.ppo.modelo.administrador.scheluder.SincronizadorProcesosEnEspera/administradorFacade into property com.integra.ppo.modelo.administrador.scheluder.SincronizadorProcesosEnEspera.administradorFacade: ejb not bound]
at org.quartz.core.JobRunShell.run(JobRunShell.java:214)
at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520)
* Nested Exception (Underlying Cause)
javax.ejb.EJBTransactionRolledbackException: Unable to inject jndi dependency: env/com.integra.ppo.modelo.administrador.scheluder.SincronizadorProcesosEnEspera/administradorFacade into property com.integra.ppo.modelo.administrador.scheluder.SincronizadorProcesosEnEspera.administradorFacade: ejb not bound
at org.jboss.ejb3.tx.Ejb3TxPolicy.handleInCallerTx(Ejb3TxPolicy.java:115)
at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:130)
at org.jboss.aspects.tx.TxInterceptor$Required.invoke(TxInterceptor.java:194)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.ejb3.tx.NullInterceptor.invoke(NullInterceptor.java:42)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.ejb3.security.Ejb3AuthenticationInterceptorv2.invoke(Ejb3AuthenticationInterceptorv2.java:80)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.ejb3.BlockContainerShutdownInterceptor.invoke(BlockContainerShutdownInterceptor.java:67)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.aspects.currentinvocation.CurrentInvocationInterceptor.invoke(CurrentInvocationInterceptor.java:67)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.ejb3.mdb.MessagingContainer.localInvoke(MessagingContainer.java:262)
at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.delivery(MessageInflowLocalProxy.java:270)
at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.invoke(MessageInflowLocalProxy.java:140)
at $Proxy351.execute(Unknown Source)
at org.jboss.resource.adapter.quartz.inflow.QuartzJob.execute(QuartzJob.java:57)
at org.quartz.core.JobRunShell.run(JobRunShell.java:203)
at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520)
Caused by: java.lang.RuntimeException: Unable to inject jndi dependency: env/com.integra.ppo.modelo.administrador.scheluder.SincronizadorProcesosEnEspera/administradorFacade into property com.integra.ppo.modelo.administrador.scheluder.SincronizadorProcesosEnEspera.administradorFacade: ejb not bound
at org.jboss.injection.JndiPropertyInjector.lookup(JndiPropertyInjector.java:82)
at org.jboss.injection.JndiPropertyInjector.inject(JndiPropertyInjector.java:99)
at org.jboss.injection.JndiPropertyInjector.inject(JndiPropertyInjector.java:89)
at org.jboss.injection.JndiPropertyInjector.inject(JndiPropertyInjector.java:61)
at org.jboss.ejb3.injection.InjectionInvocation.invokeTarget(InjectionInvocation.java:89)
at org.jboss.ejb3.injection.InjectionInvocation.invokeNext(InjectionInvocation.java:83)
at org.jboss.aspects.currentinvocation.CurrentInvocationInterceptor.invoke(CurrentInvocationInterceptor.java:67)
at org.jboss.ejb3.injection.InjectionInvocation.invokeNext(InjectionInvocation.java:74)
at org.jboss.ejb3.EJBContainer.injectBeanContext(EJBContainer.java:1086)
at org.jboss.ejb3.pool.AbstractPool.create(AbstractPool.java:83)
at org.jboss.ejb3.pool.AbstractPool.create(AbstractPool.java:73)
at org.jboss.ejb3.pool.StrictMaxPool.get(StrictMaxPool.java:145)
at org.jboss.ejb3.stateless.StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:58)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126)
... 17 more
Caused by: javax.naming.NamingException: Could not dereference object [Root exception is javax.naming.NameNotFoundException: ejb not bound]
at org.jnp.interfaces.NamingContext.resolveLink(NamingContext.java:1348)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:813)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:682)
at org.jboss.ejb3.JndiUtil.lookup(JndiUtil.java:44)
at org.jboss.injection.JndiPropertyInjector.lookup(JndiPropertyInjector.java:75)
... 31 more
Caused by: javax.naming.NameNotFoundException: ejb not bound
at org.jnp.server.NamingServer.getBinding(NamingServer.java:771)
at org.jnp.server.NamingServer.getBinding(NamingServer.java:779)
at org.jnp.server.NamingServer.getObject(NamingServer.java:785)
at org.jnp.server.NamingServer.lookup(NamingServer.java:396)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:722)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:682)
at javax.naming.InitialContext.lookup(InitialContext.java:392)
at org.jnp.interfaces.NamingContext.resolveLink(NamingContext.java:1342)
... 35 more 
```

---Please, help me, Only I need to execute a process with Quartz but the EJB cant be injected, The EJB is declarate in spring like this:

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:jee="http://www.springframework.org/schema/jee"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

<jee:local-slsb id="administradorFacade"
jndi-name="ModeloAdministradorEAR/AdministradorFacade/local"
business-interface="com.integra.ppo.modelo.administrador.facade.IAdministradorFacadeLocal"
cache-home="true" lookup-home-on-startup="true" resource-ref="true" />
</beans> 
```

Thanks

# jquery - createPseudo performance

> ID：13036284
> 
> 赞同：1
> 
> 时间：2012-10-23T17:49:55.827
> 
> 标签：jquery, jquery-selectors, sizzle

I recently had a quick look at the new jQuery Sizzle, i was wondering if there is any significant performance difference between using Sizzle.matchesSelector or assessing directly the attribute of the element parameter :

```
$.expr.createPseudo(function(selector) {
  return function( elem ) {
    return elem.getAttribute('data-smth').match(/someRegex/)
  }
} 
```

VS :

```
$.expr.createPseudo(function(selector) {
  return function( elem ) {
    return $.find.matchesSelector(elem, 'div.someClass[data-smth*=smth]')
  }
} 
```

I find personaly matchesSelector easier since we keep on jquery level and we can add easily some constraints (.someClass in my exemple above)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:03:16.570

不同之处在于它`.matchesSelector()`是一个原生函数或由 Sizzle 开发人员创建的自定义函数。在本机函数的情况下，差异虽然`.getAttribute()`仍然会更快，但会更小。但是，在自定义函数的情况下，差异会更大，绝对有利于`.getAttribute()`.

`.matchesSelector()`但是，安全地查询属性，所以要记住这一点。

# node.js - express.js sample apps

> ID：13036286
> 
> 赞同：7
> 
> 时间：2012-10-23T17:50:01.490
> 
> 标签：node.js, express

I am starting an express.js project. I want to look at code of exiting large apps, especially their file system structure. Anyone knows of apps that use express.js and are on github?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T07:38:03.593

这是我的布局。

```
./myapp
  ./public -- static files
  ./modules -- modules I made for reusability
  ./routes -- like controllers 
  ./log  -- app log file
  ./views -- ejs views
  ./config -- config.development.js, config.global.js
  ./templates -- email templates (text/html in ejs)
  ./pid -- for server
  ./init -- git post-receive hook for deploy
  ./models -- mongoose schemas 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T18:01:18.567

看看我对[ExpressJS 如何构建应用程序的](https://stackoverflow.com/a/7350875/266795)回答。您还可以查看[我自己的网站的 repo](https://github.com/focusaurus/peterlyons.com)，虽然不大也不令人兴奋，但它是一个快速应用程序，并且具有非常健全的文件系统和代码组织方案（恕我直言）。

当然，浏览[Express 主站点上的 ExpressJS 应用程序列表](http://expressjs.com/applications.html)。不确定哪些是开源的，但看看那些。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T18:01:19.560

Express 有点臭名昭著，因为它没有关于如何布置文件夹结构和构建大型应用程序的任何具体指导。公平地说，它并不是真的打算成为“Rails”，它更像是一个简化基本 HTTP 功能的轻层。

Github 上可能有一些 Express 示例，但我没有想到。

您可能想看看[RailsJS](http://railwayjs.com/)，它更接近 Express 之上的预期“Rails”。您可能还想看看用于大型应用程序的[Geddy 。](http://geddyjs.org)Geddy*不是*基于 Express 的，但对如何构建所有内容有更明确的指导。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T05:36:50.237

在我的快递应用程序中，我或多或少有这样的结构：

```
project
|--app.js
|--bin
|  `--shell scripts and stuff*
|--docroot
|  `--static files, etc*
|--node_modules
|  `--npm downloads go here*
|--lib
|  |--vendor
|  |  `--jar files and stuff*
|  |--my-custom-middleware1.js
|  `--my-custom-middleware2.js
|--package.json
|--README.md
`--templates
   `--a bunch of templates* 
```

可以很好地满足我的需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-17T03:33:39.540

github 上有大量使用 express 的应用程序。对于大型项目，您可以查看 krakenjs.com。这不是一个真正的应用程序，而更像是一个由 paypal 从 java 切换到 node.js 时创建的应用程序的结构。

如果您想使用 angular.js 和 mongodb，还可以查看更完整的应用程序结构，例如 mean.io 或 meanjs.org。即使您不知道，您也可以了解他们如何构建代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T05:38:12.377

这不是一个非常大规模的项目，但它为您提供了有关如何构建应用程序的基本概念，它是一个 REST API [https://github.com/khurrumqureshi/BotnikServer](https://github.com/khurrumqureshi/BotnikServer)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-24T07:03:47.993

[查看可以在 github存储库](https://github.com/visionmedia/express/tree/master/examples)中找到的 express 示例。如果你喜欢 MVC，还有一个[例子](https://github.com/visionmedia/express/tree/master/examples/mvc)。它们让您对如何构建应用程序有一个很好的初步了解。

有关如何构建您的应用程序的更多信息，请参见“我应该如何构建我的应用程序？”下的快速[常见问题解答。](http://expressjs.com/faq.html)

# php - Evaluating PHP inside javascript for a wordpress blog for a pinterest button

> ID：13036288
> 
> 赞同：0
> 
> 时间：2012-10-23T17:50:21.983
> 
> 标签：php, javascript, jquery, wordpress, pinterest

This is a very interesting problem that I am running into. I am appending a div with a pinterest button using javaScript but I am using PHP inside the Javascript to determine what the source of the image and the URL of the page to send to pinterest.

I am doing it this way instead of using plain HTML provided by pinterest because I have found that you can use your own branded pinterst button .jpg instead of the iFrame that pinterest uses and forces you to use their branding. I have used this javaScript successfully on other parts of my sites without using PHP. I am very new to PHP and JavaScript so I am not sure if I am missing anything but I have spent countless hours tinkering with this problem and need a fresh set of eyes. Thanks for all your help!

```
function add_social_media () {
?>
<p align="right">
    <a href="http://twitter.com/home?status=<?php print(urlencode(get_permalink())); ?>+<?php print(urlencode(the_title())); ?>">
<img src="/sites/aerialist.localhost/files/images/twitter.jpg" alt="Share On Twitter" /></a>

<a href="http://pinterest.com/pin/create/button/?url=http%3A%2F%2Ffamousartistprints.com%2F&media=http%3A%2F%2Ffamousartistprints.com%2F" ><img border="0" src="/sites/aerialist.localhost/files/images/twitter.jpg"/></a>

<script>

jQuery(document).ready(function() {

   jQuery('#pinItDiv').append( '<a class="pin-it-button" href="http://pinterest.com/pin/create/button/?url='+
          <?php the_permalink(); ?>+
          '&media='+
          //set your image path here
          <?php if(function_exists('the_post_thumbnail')) echo wp_get_attachment_url(get_post_thumbnail_id()); ?>+
          '&description='+<?php echo get_the_title(); ?>'">'+
          '<img class="pinItSuite" title="Pin It" src="/sites/aerialist.localhost/files/images/pinSuite.jpg" alt="" border="0" /></a>');

});

</script>

<?php
}
add_action('thesis_hook_before_headline', 'add_social_media'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T08:06:55.877

据我了解，最好的做法是尽可能将 php 和 javascript 分开。尝试将您的 javascript 放在它自己的 js 文件中，并通过 wp_enqueue_scripts 将它与 wordpress 的脚本一起排队。然后使用 wp_localize_script 向它传递您需要的任何 php 变量（例如 the_permalink() 或 get_the_title() ）。

查看这些网站了解更多信息：

[http://wp.tutsplus.com/articles/how-to-include-javascript-and-css-in-your-wordpress-themes-and-plugins/](http://wp.tutsplus.com/articles/how-to-include-javascript-and-css-in-your-wordpress-themes-and-plugins/)

[http://tosbourn.com/2011/08/wordpress/accessing-php-variables-from-within-javascript-under-wordpress/](http://tosbourn.com/2011/08/wordpress/accessing-php-variables-from-within-javascript-under-wordpress/)

# php - How to make optional parameters in body with Restler 3?

> ID：13036291
> 
> 赞同：1
> 
> 时间：2012-10-23T17:50:26.477
> 
> 标签：php, restler

I want some parameters to be optional in the JSON body. I have made phpdocs and set the parameter to null:

```
/**
 * Create a new text
 *
 * @param int $product_id       product id
 * @param int $template_id      {@from body} template id
 * @param string $language      {@from body} the language of the text
 * @param string $name          {@from body} product name
 *
 * @url POST {product_id}/texts
 */
public function postText($product_id, $template_id, $market_id = null)
{ } 
```

But Restler gives me:

```
{
   "error": {
   "code": 400,
   "message": "Bad Request: market_id is missing."
   }
} 
```

How do I specify a parameter to be optional?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T05:11:34.727

知道了。我的代码不完整，实际上我有多个参数，例如：

```
function($a, $b = null, $c, $d = 5) 
```

问题是这`$b`是必需的，尽管我已经为它设置了一个值。通过将所有可选参数放在最后来解决问题，如下所示：

```
function($a, $c, $b = null, $d = 5) 
```

# php - PHP page returning the same time for every mySQL query

> ID：13036292
> 
> 赞同：-2
> 
> 时间：2012-10-23T17:50:28.277
> 
> 标签：php, mysql

Im getting time information from a database that is in 24 hour format(00:00:00). When i get it on the php page, i use:

```
$output .= date("g:i A", $result1['event_start_time']); 
```

But when i check the data on my client/receiver side, all of the times are the same, right now they are all saying 6:00 PM. I event do a call to get the 'event_end_time' and it also returns the same time.

Is there any way to fix this or where this error is happening.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:59:07.423

尝试`strtotime`在您的数据库字段上使用 -

```
$output .= date("g:i A", strtotime($result1['event_start_time'])); 
```

[http://us2.php.net/manual/en/function.strtotime.php](http://us2.php.net/manual/en/function.strtotime.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:00:19.300

您需要使用`strtotime`，请参阅[手册](http://php.net/manual/en/function.strtotime.php)

```
$output .= date("g:i A", strtotime($result1['event_start_time'])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:02:41.713

如果您的 event_start_time 以 24 小时格式存储时间，为什么要使用日期函数对其进行转换？

# javascript - How to access in a SVG document

> ID：13036294
> 
> 赞同：3
> 
> 时间：2012-10-23T17:50:30.553
> 
> 标签：javascript, jquery, path, svg, tags

I'm creating several click-able maps - and have been unsuccessful in trying to find how to access a tag for a path so that I can make all the different counties in the map clickable. (the SVG file is incredibly complicated... this is the structure and I can't change it - it's getting automatically generated for all the different states):

```
<svg width="932.25827pt" height="569.25354pt" viewBox="0 0 932.25827 569.25354" enable-background="new 0 0 932.25827 569.25354"
version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<g id="Layers">
    <g id="Ohio_Counties">
        <clipPath id="SVG_CP_1">
            <path d="M0,569.25354L0,0L932.25827,0L932.25827,569.25354L0,569.25354z"/>
        </clipPath>
        <path clip-path="url(#SVG_CP_1)" fill="none" stroke="#4E4E4E" stroke-width="0.48003" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" d="
    M374.18483,441.14215L375.38491,440.90214L375.62493,440.90214L376.58499,440.66213L376.82501,440.66213L377.54505,440.42212
            L378.02508,440.42212L378.2651,440.42212L378.74513,440.42212L379.46518,440.66213L381.14529,440.66213L381.38531,440.66213L
            381.62532,440.66213L382.10536,440.66213L382.8254,440.66213L384.50551,440.90214L384.74553,440.90214L386.18563,440.90214L386.42564,441.38217
            L386.42564,441.62218L386.42564,441.86219L386.66566,441.86219L386.90567,441.86219L386.90567,442.1022L386.90567,442.34221L"/>
       </path>   
    </g>
</g>

/* There are about 87 more paths in the file... this is just a part of one.*/ 
```

I'm using jquery.svg - but haven't found the solution in the documentation.

Here's the javascript:

```
function changeState(newState){
    nS = newState.replace(/\s/g, '');

    try {      
        var map = 'mapLayers/AEP'+nS+'Counties.svg';
            $("#contentCounties").empty();
            var currentCountyMap = $('#contentCounties').svg({loadURL: loc, onLoad: addClickEvents(this)});

        } catch(err){
           alert("the map " + currentCountyMap + " does not exist");
    }
}

function addClickEvents(){
    // this is where I want to put the code to 
    // add click events to the individual paths.
    // Whether it's running a loop or using a jquery selector
    // I'm fine with either.

    // This is, in theory, what I think I want - but alas, it is wrong:
    var svg=document.getElementByTagName("path");
    alert(svg);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:18:15.037

看起来您刚刚将 s 排除在 getElementsByTagName 之外

# python - How to return image with GAE?

> ID：13036295
> 
> 赞同：0
> 
> 时间：2012-10-23T17:50:31.937
> 
> 标签：python, google-app-engine

Each time user accesses [http://www.example.com/some-random-symbols-1x1.png](http://www.example.com/some-random-symbols-1x1.png), I should return transparent image 1x1px. I've created according file, but how should I read it in my code to return to the user? I know how to display the image from the datastore or blobstore. But have no idea how to read and return binary file.

It can not be static file due to the following reasons:

1.  url will contain some-random-symbols;
2.  once url is accessed, prior to displaying images, I would like to log that somebody accessed the file.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:24:30.087

1x1 透明 PNG（或 GIF）足够小，您可以直接硬编码 base64 表示并通过`self.response.write()`（解码后）直接发出它。

每次从磁盘读取相对昂贵。如果你想走那条路，懒惰地初始化一个全局变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T18:13:10.130

在更一般的情况下，我会使用 blobstore 和[BlobstoreDownloadHandler](https://developers.google.com/appengine/docs/python/tools/webapp/blobstorehandlers)，但对于一个绝对适合内存的小 gif ，像这样读取文件内容的东西：

```
with open('path/to/file.gif') as f:
  img_content = f.read() 
```

我把它放在我的处理程序之外，所以每个实例都做一次。如果您使用的是 2.5，那么您需要从将来导入“with”，或者自己打开和关闭文件。

然后在您的处理程序中，假设 webapp2：

```
self.response.content_type = 'image/gif'
self.response.write(img_content) 
```

# html - alink not working

> ID：13036303
> 
> 赞同：0
> 
> 时间：2012-10-23T17:50:48.050
> 
> 标签：html, css, menu, hyperlink

For some reason the alink doesn't go to the link when clicked on. It recognizes it on hover, but nothing happens when clicked. Any suggestions? Couuld it be in the CSS? The page link is [http://www.kerrydean.ca/new_layout](http://www.kerrydean.ca/new_layout)

```
.lavalamp {
    position: relative;
    border: 1px solid #d6d6d6;
    background: #fff;
    padding: 15px;
    -webkit-box-shadow: 0 3px 6px rgba(0,0,0,.25);
    -moz-box-shadow: 0 3px 6px rgba(0,0,0,.25);
    border-radius : 10px;
    -moz-border-radius : 10px;
    -webkit-border-radius : 10px;
    background : -webkit-gradient(linear, left top, left bottom, from(rgb(240,240,240)), to(rgb(204,204,204)));
    background : -moz-linear-gradient(top, rgb(240,240,240), rgb(204,204,204));
    height: 18px;
}   
ul {
    margin: 0;
    padding: 0;
    z-index: 300;
    position: absolute;
}

ul li {
    list-style: none;
    float:left;
    text-align: center;
    }

ul li a {
    padding: 0 20px;
    text-align: center;
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 14px;
    text-decoration: none;
    }
.floatr {
    position: absolute;
    top: 10px;
    z-index: 50;
    width: 70px;
    height: 30px;
    border-radius : 8px;
    -moz-border-radius : 8px;
    -webkit-border-radius : 8px;
    background : rgba(0,0,0,.20);
    -webkit-transition: all .4s ease-in-out;
    -moz-transition: all .4s ease-in-out;
}

<div id="Navigation">
        <div class="lavalamp" >
            <ul>
                <li class="active"><a href="blog.php">Blog</a></li>
                <li><a href="leaders.html">Leaders</a></li>
                <li><a href="webinars.html">Webinars</a></li>
                <li><a href="resources.html">Resources</a></li>
                <li><a href="http://theglobalpartnersgroup.com/gpg-events">Global Partners</a></li>
                <li><a href="contact.html">Contacts</a></li>
                <li><a href="http://www.kerrydeanchocolate.com">Opportunites</a></li>
            </ul>
            <div class="floatr"></div>
        </div> <!--End of lavalamp -->
</div> <!-- end of navigation --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:52:09.530

You are returning `false` on the click in `javascript` (`jquery`).

# java - Cannot Find Symbol: method draw(AsciiDisplay)

> ID：13036304
> 
> 赞同：1
> 
> 时间：2012-10-23T17:50:52.970
> 
> 标签：java, methods, arraylist, compiler-errors

I'm getting a compiler error at line 80:

Error: /Users.../AsciiDisplay.java:80: cannot find symbol

Symbol: method draw(AsciiDisplay)

Location: class java.lang.Object

```
public class AsciiDisplay {

  private char [][] grid;
  private ArrayList shapes;

  public AsciiDisplay() {
    grid = new char [30][15];
    shapes = new ArrayList();
  }

  public void updateGrid() {

    for(int i = 0; i < shapes.size(); i++) {
      shapes.get(i).draw(this); //Line 80: The error is in this line of code.
    }
  }
}

public class Shape {

  protected String id;
  protected Coordinate location;

  public Shape(String id, Coordinate location) {
    this.id = id;
    this.location = location;
  }

  public void draw(AsciiDisplay dis) {
    dis.putCharAt(location.getX(),location.getY(),'?');
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:52:11.047

What you want is ArrayList of shapes so you need to declare your `ArrayList` that way.

```
ArrayList<Shape> shapes; 
```

Now compiler will know that it only contains Shapes so it will allow you to call methods on shapes on elements of list.

You can have a look at [Generics Tutorial](http://docs.oracle.com/javase/tutorial/java/generics/) for more info.

# jquery - jQuery on click but not on child click

> ID：13036308
> 
> 赞同：1
> 
> 时间：2012-10-23T17:51:07.673
> 
> 标签：jquery, jquery-selectors

I am trying to create a small 20x20px div box, that when clicked opens a 200x200px box located inside the first box:

**HTML**

```
<div id="container" style="width:20px; height:20px;">
    <div id="box" style="display:none;width:200px; height:200px;">
        <img src="example1.gif" />
        <img src="example2.gif" />
    </div>
</div> 
```

**Aim**

My aim is to make it so when `#container` is clicked, `#box` is faded in. The user will then click an image inside this box and the `#box` will then fade out.

1.  `#container` clicked and `#box` `fadeIn();`
2.  Item in `#box` is clicked
3.  `#box` `fadeOut()`

To do this I am using the following jQuery:

```
$(document).on("click", "#container", function(){

    $("#box").fadeIn("fast");
});

$(document).on("mouseleave", "#box", function(){

    $("#box").fadeOut("fast");
});

$(document).on("click", "#box img", function(){

    // Do things, removed for example

    $("#box").fadeOut();        
}); 
```

**What actually happens**

At the moment it's not working though because this happens:

1.  Click `#container`
2.  `#box` fades in
3.  Click `#box img`
4.  // Do things, removed for example
5.  `#box` fades out
6.  `#box` fades in

Number 6\. on the above list should not happen, the box should not fade back in.

I think the problem is with `.on("click", "#container", function(){` this may be applying that code when `#container #box img` is clicked, how can I stop this?

**Demo**

[http://jsfiddle.net/8FuBD/](http://jsfiddle.net/8FuBD/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:54:50.933

您需要使用[event.stopPropagation()](http://api.jquery.com/event.stopPropagation/)。该事件正在冒泡，导致 div 再次淡入。

```
$(document).on("click", "#box img", function(e){
    e.stopPropagation();
    // Do things, removed for example

    $("#box").fadeOut();        
});​ 
```

[http://jsfiddle.net/ycpFL/](http://jsfiddle.net/ycpFL/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T17:54:44.850

更改要使用的最后一部分，以[`event.stopPropagation`](http://api.jquery.com/event.stopPropagation/)使事件不会冒泡到`#box`元素。

```
$(document).on("click", "#box img", function(e){

    // Do things, removed for example
    e.stopPropagation();
    $("#box").fadeOut();        
}); 
```

# django - 验证 Django 模型对象的正确方法？

> ID：13036315
> 
> 赞同：34
> 
> 时间：2012-10-23T17:51:47.620
> 
> 标签：django, django-models

我仍在尝试了解在模型级别使用自定义验证器验证 Django 模型对象的正确方法。我知道验证通常在表单或模型表单中完成。但是，如果我通过 Python shell 中的 ORM 与其交互，我想确保模型级别的数据的完整性。这是我目前的方法：

```
from django.db import models
from django.core import validators
from django.core exceptions import ValidationError

def validate_gender(value):
    """ Custom validator """
    if not value in ('m', 'f', 'M', 'F'):
        raise ValidationError(u'%s is not a valid value for gender.' % value)

class Person(models.Model):
    name = models.CharField(max_length=128)
    age = models.IntegerField()
    gender = models.CharField(maxlength=1, validators=[validate_gender])

    def save(self, *args, **kwargs):
        """ Override Person's save """
        self.full_clean(exclude=None)
        super(Person, self).save(*args, **kwargs) 
```

以下是我的问题：

1.  我应该创建一个自定义验证函数，将其指定为验证器，然后像上面所做的那样覆盖 Person 的 save() 函数吗？（顺便说一句，我知道我可以使用“选择”字段选项来验证我的性别选择，但我创建了“验证性别”以进行说明）。

2.  如果我*真的*想确保我的数据的完整性，我是否应该不仅编写用于模型层测试的 Django 单元测试，还要使用 Python/Psycopg 编写等效的数据库级单元测试？我注意到引发 ValidationErrors 的 Django 单元测试仅使用数据库副本测试模型对数据库模式的理解。即使我要使用 South 进行迁移，任何数据库级别的约束都仅限于 Django 可以理解并转换为 Postgres 约束的内容。如果我需要一个 Django 无法复制的自定义约束，如果我直接通过 psql 终端与数据库交互，我可能会在我的数据库中输入违反该约束的数据。

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-23T20:52:53.720

当我第一次开始使用 Django 时，我对 ORM 也有类似的误解。

1.  不，不要放在`self.full_clean()`里面`save`。任何一个

A）使用 a `ModelForm`（这将导致发生所有相同的验证 - 注意：`ModelForm.is_valid()`不会`Model.full_clean`显式调用，但会执行与 完全相同的检查`Model.full_clean`）。例子：

```
class PersonForm(forms.ModelForm):
    class Meta:
        model = Person

def add_person(request):
    if request.method == 'POST':
        form = PersonForm(request.POST, request.FILES)
        if form.is_valid():  # Performs your validation, including ``validate_gender``
            person = form.save()
            return redirect('some-other-view')
    else:
        form = PersonForm()
        # ... return response with ``form`` in the context for rendering in a template 
```

另请注意，表单不仅仅用于在模板中呈现它们的视图 - 它们非常适合任何类型的使用，包括 API 等。运行`form.is_valid()`并出现错误后，您将拥有`form.errors`一个包含所有内容的字典表单中的错误，包括一个名为的键`'__all__'`，它将包含非字段错误。

B）只需`model_instance.full_clean()`在您的视图（或其他逻辑应用程序层）中使用，而不是使用表单，但表单是一个很好的抽象。

2.  I don't really have a solution to, but I've never run into such a problem, even in large projects (the current project I work with my company on has 146 tables) and I don't suspect it'll be a concern in your case either.

# javascript - Jquery UI accordion. How to close the accordion when fired an event?

> ID：13036316
> 
> 赞同：0
> 
> 时间：2012-10-23T17:51:52.340
> 
> 标签：javascript, jquery-ui, accordion

I'm trying to mix the accordion and the autocomplete plugins into one single solution.

It is working ok, exept for a few detail. I can't find how to close the accordion after an element of the autocomplete is clicked.

JS fiddle with the code: [http://jsfiddle.net/yBKjd/1/](http://jsfiddle.net/yBKjd/1/)

Graphic explanation: ![Accordion-autocomplete example](../Images/5ccef398c1e22c47710cec35dcbce747.png)

The code I'm using is the following:

```
 $("#tags").autocomplete({
                                  source: availableTags,
                                  minLength: 0,

                                  select: function(event, ui)
                                  { 
                                      alert('I would like to close the accordion in this moment')
                                  },

                                  open: function()
                                  {
                                      $(this).autocomplete("widget")
                                      .appendTo("#demo-description")
                                      .css("position", "static");
                                  }
                              }).on("focus", function ()
            {
                $(this).autocomplete("search", '');   

            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:58:31.093

只需用普通的 jquery 隐藏手风琴：

$('#demo-description').hide();

# java - Creating events in a java class

> ID：13036318
> 
> 赞同：0
> 
> 时间：2012-10-23T17:51:59.563
> 
> 标签：java, events

In C# I can create events on a class such that I can wireup methods to execute when the event occurs like:

```
user.OnSave += someCallback;
user.OnDelete += otherCallback; 
```

How can I do this in Java?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:58:32.930

您可以通过在 java 中实现观察者模式（Java.util.observer 和 observable）或创建您自己的事件和事件侦听器来完成此操作：http: [//castever.wordpress.com/2008/07/31/how-to -create-your-own-events-in-java/](http://castever.wordpress.com/2008/07/31/how-to-create-your-own-events-in-java/)

编辑：在该链接中，它显示了 java 如何使用事件模式，其中包括创建一个从 java.awt.Event 继承的子类，并创建一个实现 Java.util.Event 侦听器的接口，然后添加一个实现具体的函数界面。最后一步是添加事件抛出，例如。您的保存并添加捕获。

完整的java教程在这里：http://docs.oracle.com/javase/tutorial/uiswing/events/index.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:15:14.367

示例实现参见[Promise.java](https://github.com/rfqu/df4j/blob/master/df4j-core/src/com/github/rfqu/df4j/core/Promise.java)。它使用一些位于同一个包中的接口。

# c - Pulling two ints from string in C

> ID：13036321
> 
> 赞同：2
> 
> 时间：2012-10-23T17:52:03.790
> 
> 标签：c, string, parsing

Say if I have a string like this

```
char foo[10] = "%r1%r2"; 
```

I want to take out the `1` and `2` and convert them into `int`s. How can I go about doing this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T18:00:30.093

```
if (sscanf(foo, "%%r%d%%r%d", &i1, &i2) != 2)
    ...format error... 
```

* * *

> 当你做`sscanf()`我理解的格式`%d`是十进制 int 但你为什么有`%%r`？

如果您要`%`在源字符串中查找文字，请使用`%%`在格式字符串中指定它（并且在 中`printf()`，您`%%`在格式字符串中使用以在输出中生成 a `%`）；代表`r`自己。

还有其他方法可以指定转换，例如`%*[^0-9]%d%*[^0-9]%d`; 使用分配抑制（`*`）和扫描集（`[^0-9]`，任何不是数字的东西）。此信息应可从`sscanf()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T17:55:00.673

你可以`sscanf()`用来得到你的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:56:24.480

考虑到您的字符串确实有两个 '%' 和每个后面的一个数字。例如：

```
 char foo[10] = "%123%874"; 
```

不要忘记包含 stdlib 库：

```
 #include <stdlib.h> 
```

以下代码将 123 输入 r1 并将 874 输入 r2。

```
 for(int i = 1; ; i++)
      if(foo[i] == '%')
      {
          r2 = atoi(&foo[i + 1]); // this line will transform what is after the second '%' into an integer and save it into r2
          foo[i] = 0; // this line will make the place where the second '%' was to be the end of the string now
          break;
      }
  r1 = atoi(&foo[1]); // this line transforms whatever is after the first character ('%') into an int and save it into r1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T20:07:10.660

```
int array[MAXLEN];
int counter = 0; 
for(int i = 0; i < strlen(foo); i++){
   if(isdigit(foo[i]) && (counter < MAXLEN)){
        array[counter++] = (int)(foo[i]-'0');
   }
}
//integers are in array[]. 
```

# powershell - Powershell将变量传递给远程脚本

> ID：13036327
> 
> 赞同：2
> 
> 时间：2012-10-23T17:52:22.763
> 
> 标签：powershell, invoke-command

我有以下 cmd 文件：-

```
PowerShell.exe -noexit E:\wwwroot\domains\processes\AddDirectory.ps1 -Param testdomain.co.uk 
```

它经过：-

```
$Session = New-PSSession -ComputerName 192.168.0.25
$script = {
Param($Param1)
set-executionpolicy unrestricted -force

# Set Variables
$domain = $Param1
$sitepath = "e:\domains\" + $domain

# Check for physical path
if (-not (Test-Path -path $sitePath))
{
New-Item -Path $sitepath -type directory 
New-Item -Path $sitepath\wwwroot -type directory 
}
set-executionpolicy restricted -force     
}
Invoke-Command -Session $Session -ScriptBlock $script 
```

但它只是运行但什么也不做。

如果我将 $domain 变量声明为 $domain = 'testdomain.co.uk' 它可以工作，但它不想通过 cmd 文件中的 var。我究竟做错了什么？我试图将它作为 -ArgumentsList -$Param1 放在 Invoke-Command 中，但这也不起作用.....

任何想法都非常受欢迎

谢谢保罗

更新 - 我已经按照以下更新了我的代码，但遇到了同样的问题： -

```
param($domainName)
$script = {
    Param($Param1)
    set-executionpolicy unrestricted -force
    # Set Variables
    $domain = $Param1
    $sitepath = "e:\domains\" + $domain
    # Check for physical path
    if (-not (Test-Path -path $sitePath))
    {
        New-Item -Path $sitepath -type directory
        New-Item -Path $sitepath\wwwroot -type directory
        New-Item -Path $sitepath\db -type directory
        New-Item -Path $sitepath\stats -type directory
    }
    set-executionpolicy restricted -force
}

$Session = New-PSSession -ComputerName 192.168.0.25

Invoke-Command -Session $Session -ScriptBlock $script -ArgumentList $domainName 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:11:43.410

您需要在脚本中使用 param 块，传递给文件的参数将分配给 $domainName ，您将使用它将值传递给 scriptblock ：

```
PowerShell.exe -noexit E:\wwwroot\domains\processes\AddDirectory.ps1 testdomain.co.uk

# script file

param($domainName)

$script = {
    Param($Param1)

    ...
    $domain = $Param1
    ...   
}

$Session = New-PSSession -ComputerName 192.168.0.25
Invoke-Command -Session $Session -ScriptBlock $script -ArgumentList $domainName 
```

# ms-access - Update Query Access

> ID：13036328
> 
> 赞同：1
> 
> 时间：2012-10-23T17:52:30.573
> 
> 标签：ms-access

I am trying to update a field inside one table, "Todays_Deliveries", from another table called "Current_Delivery". The field is a number field called "Remaining" which describes how many units there are of a particular item left on the daily deliveries.

The "Todays_Deliveries" table is generated using an APPEND query from another master table with every delivery stored in it. Everytime the user opens a delivery on a form anything in the "Current_Delivery" table is removed using a DELETE query and then generated based on the delivery selected using an APPEND query from the "Todays_Deliveries" table.

Both tables have identical fields and identical values, given one is generated from the data of the other.

I have tried to create an UPDATE query to update the "Todays_Deliveries" table when a user edits the "Current_Delivery" table but it doesn't work. I recieve no error messages the field just doesn't update. The steps I took were as follows:

1.  Add both tables.
2.  Change to UPDATE query.
3.  Link tables using the Remaining field.
4.  Set the Field: Remaining and
5.  Set the Table: Current_Delivery.
6.  Set Update To: [Todays_Deliveries].[Remaining].

Any advice/help would be greatly appreciated.

EDIT:

BEFORE:

**Todays_Deliveries**

```
ID   Date      Time  Ref  Studio Description Total Remaining
3187 23-Oct-12 10:00 3663 ROCK   PINK        1900  1900 
```

**Current_Delivery**

```
ID   Date      Time  Ref  Studio Description Total Remaining
3187 23-Oct-12 10:00 3663 ROCK   PINK        1900  1000 
```

AFTER:

**Todays_Deliveries**

```
ID   Date      Time  Ref  Studio Description Total Remaining
3187 23-Oct-12 10:00 3663 ROCK   PINK        1900  1000 
```

UPDATE:

I've got the query working using the below function

```
UPDATE Todays_Deliveries SET Remaining = DLookup("Remaining","Current_Delivery","[MP-Ref] = Form![MP-Ref] And [Cat No] ='" & [Cat No] & "'")
WHERE "[MP-Ref] = Form![MP-Ref] And [Cat No] ='" & [Cat No] & "'"; 
```

Where *MP-Ref* is the delivery reference that list a number of items, and *Cat No* is the individual item reference.

The only problem is the other items in the _Daily_Deliveries_ table, the ones not in the _Current_Delivery_ table, have there remaining field set to 0 when I run it. Is there anyway to stop this?

# tomcat - 在已部署的 Tomcat Web 应用程序中触发操作

> ID：13036329
> 
> 赞同：0
> 
> 时间：2012-10-23T17:52:33.107
> 
> 标签：tomcat, web-applications, servlets, web, notifications

我们有许多托管不同 Web 应用程序的 Tomcat 容器。所有这些应用程序都使用共享库。我们需要能够通过这个共享库触发动作。

这可以通过所有应用程序将在其 web.xml 文件中指定的 servlet 来完成。然后可以通过 URL 触发操作。但是，这种方法似乎不是很优雅。

我也研究过 MBean，但不确定这是否是他们要解决的问题。

任何这样做的最佳实践方法都值得赞赏。详细讨论选项以帮助我思考这个问题会很棒。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:31:26.490

我个人不明白为什么使用 HTTP POST 来触发某些东西是错误的，只要您实现了一个体面的身份验证机制。

将 MBean 视为更强大的监控钩子。传统上，监控是一种只读活动，但使用 MBean，您可以公开一个 setter 并使用任意值调用它（JMX 可以提供身份验证顺便说一句）。

另一种选择：

*   RMI（糟糕！）
*   轮询一些预定义的 URI（糟糕！）或 JNDI
*   通过 jabber（或其他 IM 协议）通知
*   管理系统

但是，如果不了解完整的上下文，很难给出建议。

# java - Is there a way to change the internal radix of Java code?

> ID：13036332
> 
> 赞同：1
> 
> 时间：2012-10-23T17:52:44.583
> 
> 标签：java, integer, environment, radix

If I want to write a program that deals almost exclusively with, say, base 8 math, is there a way to change the source code or JVM to perform all calculations with this radix without having to explicitly change it on every integer reference?

For example, instead of...

```
private static final int RADIX = 8;

// ... then, elsewhere ...

System.out.println(Integer.toString(3 + 7, RADIX)); 
```

... I could just do ...

```
System.out.println(3 + 7); 
```

... and have it print the same result of `12`? Is there some environment variable or in-code setting I can apply? Or is this simply not possible?

This may seem arcane or a "why in the world would you want to do this" scenario, but if you can imagine having to perform a large number of non-trivial calculations under a different base, then you can see how it would become extremely tedious extremely fast to have to keep manually converting numbers to the appropriate radix.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:02:34.833

不。

还有，你为什么要这样？想象一下，在同一个 JVM 中运行时您会破坏多少段代码——没有一个编码库会期望默认基数会突然改变。

您使用常量是正确的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:07:46.647

不，没有这样的功能。

无论您谈论的是什么基数，数字都是一个数字，只有在转换为/从字符串时才会出现基数。如果您必须一直这样做，那么创建一些实用方法来完成这项工作，并始终调用它们。或者，编写您自己的类整数类来处理 fromString/toString 位。

```
public final class OctalInteger extends Number implements Comparable<OctalInteger> {
    // Basically a copy of Integer.java, but changes the methods dealing with Strings

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:04:28.363

您不能更改默认基数。但是您可以轻松编写自己的程序`print`和`println`以八进制打印整数的程序。

# java - Convert array of ascii numbers into their respective chracters

> ID：13036334
> 
> 赞同：0
> 
> 时间：2012-10-23T17:53:00.093
> 
> 标签：java, arrays, char, int, ascii

In this little project for school, I am doing a Caesar cipher. What will be done is that the user will punch in a word, and it will be converted to an character array, then into its respective ascii numbers. Then this equation will be performed upon each number:

new_code = (Ascii_Code + shift[A number that the user picks out]) % 26

So far, here is the code I've written out:

```
import javax.swing.*;
import java.text.*;
import java.util.*;
import java.lang.*;

public class Encrypt {

public static void main(String[] args) {

String phrase = JOptionPane.showInputDialog(null, "Enter phrase to be messed with ");
String shift =  JOptionPane.showInputDialog(null, "How many spots should the characters be shifted by?");
int shiftNum = Integer.parseInt(shift);  //converts the shift string into an integer
char[] charArray = phrase.toCharArray(); // array to store the characters from the string
int[] asciiArray = new int[charArray.length]; //array to store the ascii codes

//for loop that converts the charArray into an integer array
for (int count = 0; count < charArray.length; count++) {

asciiArray[count] = charArray[count];

System.out.println(asciiArray[count]);

} //end of For Loop

//loop that performs the encryption
for (int count = 0; count < asciiArray.length; count++) {

    asciiArray[count] = (asciiArray[count]+ shiftNum) % 26;

} // end of for loop

//loop that converts the int array back into a character array
for (int count = 0; count < asciiArray.length; count++) {

    charArray[count] = asciiArray[count]; //error is right here =(

}

}//end of main function

}// end of Encrypt class 
```

It is mentioning a "possible loss of precision" in the last for loop. Is there something else I'm supposed to do? Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:55:13.433

因为`A a; B b;`，当 时，赋值`a = (A) b`会丢失精度`((B) ((A) b)) != b`。换句话说，转换为目标类型并返回会给出不同的值。例如`(float) ((int) 1.5f) != 1.5f`，将 a 转换为 a`float`会`int`因为丢失而丢失精度`.5`。

`char`s 是 Java 中的 16 位无符号整数，而`int`s 是 32 位有符号 2-s 补码。您不能将所有 32 位值都放入 16 位，因此编译器会警告由于 16 位会丢失的精度损失，隐式转换只会将 16 个最低有效位`int`从`char`16 个最高有效位。

考虑

```
int i = 0x10000;
char c = (char) i;  // equivalent to c = (char) (i & 0xffff)
System.out.println(c); 
```

你有一个只能容纳 17 位的整数`c`，`(char) 0`.

要解决这个问题，`char`如果您认为由于程序的逻辑而不会发生这种情况，请添加显式转换：`asciiArray[count]`→ `((char) asciiArray[count])`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:55:10.423

只需键入 cast`char`如下：

```
 charArray[count] = (char)asciiArray[count]; 
```

# pattern-matching - Set of all possible matches in SymPy

> ID：13036336
> 
> 赞同：3
> 
> 时间：2012-10-23T17:53:17.490
> 
> 标签：pattern-matching, sympy

I would like to match a pattern to an expression in such a way that returns all possible matchings. Using SymPy I can match my pattern to my expression in a single arbitrarily selected way. How can I use pattern matching to obtain the entire set (up to arbitrary renamings)

Currently I can do this

```
>>> p, q = Wild('p'), Wild('q')
>>> x, y, z = symbols('x,y,z')

>>> (p+q).matches(x+y+z)
{p: y + z, q: x} 
```

I want to do this

```
>>> (p+q).allmatches(x+y+z)
{{p: x, q: y + z}, {p: y, q: x + z}, {p: z, q: x + y}} 
```

Note that each possible partitioning is represented. I would be willing to implement this myself. What are standard algorithms for pattern matching that produce all possible matches?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:24:20.613

我认为您必须使用所有可能的排除组来定位匹配项，例如

```
In [16]: [(x + y + z).match(Wild('p', exclude=i) + Wild('q', exclude=set([x, y, z]) - set(i))) for i in subsets([x, y, z])]
Out[16]: [{p: x + y + z, q: 0}, {p: y + z, q: x}, {p: x + z, q: y}, {p: x + y, q: z}, {p: z, q: x + y}, {p: y, q: x + z}, {p: x, q: y + z}, {p: 0, q: x + y + z}] 
```

（`subsets`是来自 的 SymPy 函数`sympy.utilities.iterables`）。

# c# - There were not enough free threads in the ThreadPool object to complete the operation

> ID：13036338
> 
> 赞同：1
> 
> 时间：2012-10-23T17:53:28.737
> 
> 标签：c#, .net, web-services, threadpool

I have an issue with a program that calls the same web service in a loop developed in Visual Studio 2003\. I keep getting this error:

```
Unable to make web service call. Ceasing processing. Message:The request was aborted: The         request was canceled. 
System.Net.WebException: The request was aborted: The request was canceled. ---> System.InvalidOperationException: There were not enough free threads in the ThreadPool object to complete the operation. 
   --- End of inner exception stack trace ---
   at System.Net.HttpWebRequest.BeginGetResponse(AsyncCallback callback, Object state)
   at System.Net.HttpWebRequest.GetResponse()
   at System.Net.WebClient.OpenRead(String address) 
```

The address in the `OpenRead(String address)` method is valid - I can debug, take the address and view the wsdl in a browser.

I'm not sure how to get around this error - my method closes the stream every time it opens it. How ever, it doesn't seem to get to this line anymore since the error is at `OpenRead()`

Is there a way to empty the threadpool and in a sort of way, start over? I've tried rebooting the machine that both runs my application and hosts the web service with no luck. I've also tried increasing the max worker threads in the machine.config file to 75 with also no luck

I know this application works in general because I have it running in two other environments with the exact same configuration.

Here is part of the loop that calls the web service

```
try
{
    returnValue = WebServiceProxy.CallWebService(
        transaction.WebServiceURL, transaction.WebServiceName, 
        transaction.Request.MethodName, args);
} 
```

The proxy class that calls the web service is a static class:

```
public static object CallWebService(string url, string serviceName, 
    string methodName, object[] args)
{
    //Connect to web service and retrieve WSDL
    Stream stream = client.OpenRead(url + "?wsdl");

    ServiceDescription description = ServiceDescription.Read(stream);
    stream.Close(); 
```

# java - 在java中调用自身的验证方法

> ID：13036346
> 
> 赞同：2
> 
> 时间：2012-10-23T17:54:05.973
> 
> 标签：java, validation, try-catch

我试图理解为什么方法 validateItemquantity 最终会因`NumberFormatException`错误而崩溃。逻辑似乎是正确的，但有些事情是不对的。它假设不断要求用户重新输入，直到它获得有效输入，然后返回该有效输入。

```
String validateItemquantity(String itemQuantity) {
       try{ 
           Integer.parseInt(itemQuantity);

          }
       catch (NumberFormatException e) {
           itemQuantity = JOptionPane.showInputDialog 
                                   ("Invalid item quantiy, please enter a new Value");
           validateItemquantity(itemQuantity);
          }
       return itemQuantity ; 
```

调用它的方法：

```
 private void bnPurchaseActionPerformed(java.awt.event.ActionEvent evt) {

    String itemCode, validItemquantity ; 
    int itemQuantity, itemPrice, itemCost, totalCost ;

    validItemquantity =  validateItemquantity(itemQuantityinput.getText());
    itemQuantity = Integer.parseInt(validItemquantity);
    itemCode = itemCodeinput.getText();
    itemPrice = catalog.searchCatalog(itemCode);
    itemCost = payment.calculateItemcost(itemQuantity,itemPrice);
    totalCost = payment.calculateTotalcost(itemCost); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:58:19.703

让它返回解析结果或在异常时调用自身，如下所示：

```
String validateItemQuantity(String itemQuantity) {
   try { 
       return Integer.parseInt(itemQuantity); // returns if no exception
   } catch (NumberFormatException e) {
       return validateItemQuantity(JOptionPane.showInputDialog 
                               ("Invalid item quantiy, please enter a new Value"));
   }
} 
```

这个方法只会返回一个有效的响应；它永远循环，直到它得到一个有效的响应。

一些评论提到，上述代码可能会受到用户数百万次输入不良数据并炸毁堆栈的攻击。我说“让他们”，但如果你真的想让它安全，请使用 while 循环：

```
String validateItemQuantity(String itemQuantity) {
    while (true) {
        try { 
            return Integer.parseInt(itemQuantity); // returns if no exception
        } catch (NumberFormatException e) {
           itemQuantity = JOptionPane.showInputDialog(
               "Invalid item quantiy, please enter a new Value"));
        }
    }
} 
```

它增加了一个`while`循环，因此代码复杂度略有增加，但它只是额外的几行代码，并且更高效和安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:03:15.957

> 我试图理解为什么方法 validateItemquantity 最终会因 NumberFormatException 错误而崩溃。

您需要发布堆栈跟踪以进行调查。更好的是，使用调试器查看异常的位置。

> 逻辑似乎是正确的

这似乎是正确的，但令人费解:) 你有理由使用递归吗？像这样简单的东西怎么样？

```
String validateItemquantity(String itemQuantity) {
    while (true) {
       try { 
           Integer.parseInt(itemQuantity);
           return itemQuantity;
       }
       catch (NumberFormatException e) {
           validateItemquantity(itemQuantity);
       }
       itemQuantity = JOptionPane.showInputDialog 
            ("Invalid item quantity, please enter a new Value");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:03:24.960

问题是您正在更改引用。`itemQuantity`在每个“catch”块中分配了不同的引用。引用的更改不会更新传递给函数的参数。这基本上是一个“按值传递”错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T18:07:09.453

您的方法`validateItemQuantity`返回传入的原始字符串（如果有效），或者从 catch 块（无条件地）第一次显示输入框获得的字符串。所有递归调用及其所有输入框都被浪费了。

# java - 通过 LAN 从一台 PC 向另一台 PC 发送 DatagramPacket

> ID：13036349
> 
> 赞同：0
> 
> 时间：2012-10-23T17:54:12.027
> 
> 标签：java, networking, udp

我希望 Peer(s) 能够通过 WIFI LAN 发送 DatagramPackets，其唯一目的是发现其他 Peer。所以，我让每个 Peer 都由一个客户端（发送数据包）和一个服务器（监听数据包）组成。

我只能通过在每台机器上使用 IPConfig 来获取它们各自的 IPv4 地址，然后将其用作创建 DatagramPacket 的参数，才能使其工作：-

```
InetAddress server = InetAddress.getByName("THE IPv4 ADDRESS OF THE PEER'S SERVER
                                            RUNNING ON THE OTHER MACHINE");

DatagramPacket sendPacket = new DatagramPacket(outBuffer, outBuffer.length,
                                               server, serverPort); 
```

我是否在这里以正确的方式使用广播（用于对等发现），因为如果我这样做对我来说似乎很垃圾？我假设我可以让 machineA 上的客户端将数据包发送到 LAN 深渊，并且在 machineB 上运行的服务器将监听整个 LAN 并检测数据包。目前我所做的只是在运行服务器的机器上手动使用 IPConfig 并在运行客户端的机器上的 DatagramPacket 中键入该地址，这似乎毫无意义。

我可以很好地使用多播，但我认为广播更适合我进行对等发现的需要。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:22:28.067

这并不是真正的广播，因为您提供的是服务器的地址，而不是广播地址 ( `255.255.255.255`，或者您的本地网络广播地址是什么（例如`192.168.1.255`，如果您的网段是`192.168.1.0/24`)。

您还可以考虑在您的服务器端口上设置防火墙阻止传入的 UDP 数据包。您应该查看 DatagramSocket/DatagramPacket 的文档，看看是否有正确绑定服务器套接字或正确从客户端发送数据包的魔法咒语。

[**编辑**：如何找到网络广播] 一旦知道网络地址，就可以找到网络广播地址，这两者都可以从您的 IP 和子网掩码中分辨出来。子网掩码基本上显示了地址中有多少是网络，有多少是客户端。（子网掩码常写成“网络掩码”） 一个例子：

IP：192.168.1.101 网络掩码：255.255.255.0 网络地址 (CIDR)：192.168.1.0/24 广播地址：192.168.1.255

或者：

IP：10.13.28.55 网络掩码：255.255.0.0 网络：10.13.0.0/16 广播地址：10.13.255.255

所以本质上，网络地址末尾有一堆零，而广播地址用 1 替换它们。

IPv4 地址是 32 位数字（最容易将它们视为无符号数。如果您对地址和网络掩码进行按位与运算，则会得到网络地址。如果您将其与网络掩码的按位非运算按位或，您将获得广播地址（因此`(addr & netmask) | ~netmask)`将获得本地广播）。

`255.255.255.255`（或`0xFFFFFFFF`）是全球广播地址。IP 广播不跨网段，因此发送给它是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:15:57.410

对服务器和客户端都使用广播地址`255.255.255.255`。

# jquery - blueimg 文件上传插件响应代码

> ID：13036366
> 
> 赞同：1
> 
> 时间：2012-10-23T17:55:32.200
> 
> 标签：jquery, twitter-bootstrap, file-upload

[我正在使用来自这里https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)的文件上传插件“blueimg 文件上传” 。

它暗示了一些错误，如下所示：

```
window.locale = {
    "fileupload": {
        "errors": {
            "maxFileSize": "File is too big",
            "minFileSize": "File is too small",
            "acceptFileTypes": "Filetype not allowed",
            "maxNumberOfFiles": "Max number of files exceeded",
            "uploadedBytes": "Uploaded bytes exceed file size",
            "emptyResult": "Empty file upload result"
        },
        "error": "Error",
        "start": "Start",
        "cancel": "Cancel",
        "destroy": "Delete"
}
}; 
```

但是，我怎么能抛出这些错误。例如：我可以检查服务器端的最大文件大小，然后将相应的错误代码响应到客户端的 blueimg 插件。

而且，我想给它注入更多的错误映射。如何完成？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:54:38.700

使用文件上传小部件时，您可以将 maxFileSize、minFileSize、acceptFileTypes 等设置为选项。

在文件上传初始化的add函数中，可以这样检查。

```
add: function (e, data) {
  $.each(data.files, function (index, file) {
    if (file.error === 'maxFileSize') {  
        $('#errorMessage').html('<a class=\"close\" onclick=\"closeAlert(\'errorMessage\');\">×</a>' + fname +  ': File size larger than allowed. Please upload a smaller file.');
    } 
    else if (file.error === 'acceptFileTypes') {
        $('#errorMessage').html('<a class=\"close\" onclick=\"closeAlert(\'errorMessage\');\">×</a>' + fname +  ': Invalid file type. Please select a valid file.');
    } 
    else if (file.error === 'minFileSize') {
        $('#errorMessage').html('<a class=\"close\" onclick=\"closeAlert(\'errorMessage\');\">×</a>' + fname + ': Cannot upload empty file.');
    }
  });
} 
```

文件上传插件进行所有检查并根据选项集返回错误。

# ruby-on-rails-3 - 如何在 Rails 项目中命名咖啡脚本

> ID：13036370
> 
> 赞同：1
> 
> 时间：2012-10-23T17:55:43.030
> 
> 标签：ruby-on-rails-3, coffeescript

在我使用 Coffeescript 的 Rails 项目中，我希望能够在视图中执行以下操作：

```
f.text_area :content, :size => "77x4", :oninput => 'Helpers.expandTextarea(300)' 
```

这将调用一个咖啡脚本函数，该函数将在需要时扩展文本区域。我的问题是我似乎无法正确命名咖啡脚本以使其正常工作。我试着这样做

```
# site.js.coffee
Helpers =
  expandTextarea: ->
    alert "function found!" 
```

这行不通。尝试`Helpers`在浏览器控制台中调用会引发`undefined`错误。我的问题是这样的：

**我将在 site.js.coffee 中使用什么代码来实现我想要的命名空间？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:36:19.480

您可以手动放入`Helpers`全局命名空间：

```
window.Helpers =
  expandTextarea: ->
    alert "function found!" 
```

然后你应该可以说`Helpers.expandTextarea(300)`任何你想说的。当然，假设`site.js.coffee`它包含在每一页上。

CoffeeScript 文件默认包装在函数中：

```
(function() { /* compiled CoffeeScript goes here */ })(); 
```

以避免污染全局命名空间。您可以为 CoffeeScript 编译器提供选项以使其不像这样包装，但最好将全局内容显式放入`window`.

# ruby - 使用 Ruby，我如何迭代一个 for 循环 n.times

> ID：13036371
> 
> 赞同：51
> 
> 时间：2012-10-23T17:55:49.580
> 
> 标签：ruby, for-loop

我有一个基本的红宝石循环

```
for video in site.posts
  video.some_parameter
endfor 
```

我想运行这个循环 2 或 3 次。

这可能吗？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-10-23T17:59:33.590

```
3.times do
   # do work here
end 
```

检查[http://www.tutorialspoint.com/ruby/ruby_loops.htm](http://www.tutorialspoint.com/ruby/ruby_loops.htm)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-04-24T15:17:46.583

如果需要索引：

```
5.times do |i|
  print i, " "
end 
```

回报：

`0 1 2 3 4`

参考：[https ://apidock.com/ruby/Integer/times](https://apidock.com/ruby/Integer/times)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-08-13T17:12:58.333

**用于**. _

```
3.times do
  site.posts.each do |video|
    video.some_parameter
  end
end 
```

或者如果**video.some_parameter**是一行，

```
3.times do
  site.posts.each { |video| video.some_parameter }
end 
```

见：[https ://github.com/bbatsov/ruby-style-guide#source-code-layout](https://github.com/bbatsov/ruby-style-guide#source-code-layout)

# backbone.js - Backbone.js 和 Bootstrap Typeahead - 异步获取后渲染

> ID：13036377
> 
> 赞同：0
> 
> 时间：2012-10-23T17:56:06.693
> 
> 标签：backbone.js, backbone-events

我从要点中获取了此代码的基础。`fetch()`当我第一次编辑集合然后`render()`调用 tw-bootstap's时，它最初工作得很好`.typeahead()`。

但是，我已经设置了一个`keypress`事件来尝试限制`fetch()`. 采集数据返回，经过`prepData()`精细过滤后到达`render()`. 预输入不起作用，但是在那个阶段。可能是主干事件在那个时候覆盖了渲染？

```
// typeahead on the numbers
var Bootstrap = {};

Bootstrap.Typeahead = Backbone.View.extend({
    el: '#autocompleteN',
    tagName: 'input',
    attributes: {"data-provide": "typeahead"},
    initialize: function(options){
        if(!this.collection) {
            return null;
        }

        //this.collection.on("reset", this.prepData, this);
    },
    events: {
        "keypress": "setSearch"
    },

    setSearch: _.throttle(function(e) {
        var that=this;
        var d = e.currentTarget.value;

        // strip spaces and remove non-numerics
        d = d.replace(/ /g,'');
        d = d.replace(/[^0-9]/g, '');

        // if it's longer than 2, call a fetch;
        if(d.length > 2) {
            $.when( app.searchNums.fetch({url: 'api/index.php/search/num/'+d}) ).then(function() { 
                //console.dir("success");
                that.prepData();
            });
        }

    }, 1000),
    prepData: function() {
        //console.dir("prepData called");
        var prepare = _.pluck(this.collection.models, 'attributes');
        this.property = this.options.property || _.keys(prepare[0])[0];

        this.items = this.options.items;
        this.data = _.pluck(prepare, this.property);

        this.render();
    },
    render: function() {
        var that = this;
        that.$el.typeahead({
            source: that.data,
            //source: ['PHP', 'MySQL', 'SQL', 'PostgreSQL', 'HTML', 'CSS', 'HTML5', 'CSS3', 'JSON'],
            items: that.items,
            onselect: function( data ) {  
                // render the results view here
            }
        });

        return this;
    }
});

var bui = new Bootstrap.Typeahead({
    collection: app.searchNums,
    items: 5
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:23:05.620

你为什么不直接设置`minLength`预输入，看起来这就是你想要做的？

# android - 为什么 getDefaultSharedPreferences(context).getString(key, value) 返回本地化字符串？

> ID：13036383
> 
> 赞同：0
> 
> 时间：2012-10-23T17:56:43.293
> 
> 标签：android, android-preferences

我正在使用 Android 中的应用程序，并且我有一个列表首选项。问题是，当我使用它获取值时，`PreferenceManager.getDefaultSharedPreferences(context).getString(key, value)`它返回本地化字符串而不是我所期望的条目值。在以前的版本中，它可以工作。这是正确的行为吗？在这种情况下，我该怎么做才能获得进入值？这里有一些代码来解释。

提前致谢。

**首选项.xml：**

```
<ListPreference
android:id="@+id/protocol"
android:key="protocol"
android:title="@string/protocol"
android:dialogTitle="@string/change_protocol"
android:defaultValue="default"
android:entries="@array/protocol_entries"
android:entryValues="@array/protocol_entry_values" /> 
```

**数组.xml**

```
<string-array
    name="protocol_entry_values">
    <item>default</item>
    <item>protocol_1</item>
    <item>protocol_2</item>
    <item></item>
</string-array>
<string-array
    name="protocol_entries">
    <item>@string/label_default_protocol</item>
    <item>@string/label_protocol_1</item>
    <item>@string/label_protocol_2</item>
    <item>@string/label_other</item>
</string-array> 
```

**字符串.xml**

```
<string name="label_default_protocol">Default protocol</string>
<string name="label_protocol_1">First protocol</string>
<string name="label_protocol_2">Second Protocol</string>
<string name="label_other">Other</string> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:46:20.780

听起来您有不同版本的`<string-array name="protocol_entry_values">`本地化形式的数据。您应该只有一个值定义。`protocol_entries`应该本地化。

# wcf - 更新服务参考时不再返回 ObservableCollections

> ID：13036389
> 
> 赞同：0
> 
> 时间：2012-10-23T17:57:07.160
> 
> 标签：wcf, silverlight

我有一个 Silverlight 5 应用程序。这个应用程序已经开发了 18 个月。此应用回调 WCF 服务。我刚收到一个支持请求。

在今天之前，该服务将返回`ObservableCollection<T>`结果。但是，现在突然之间，`T[]`在我更新 Silverlight 应用程序中的服务引用后，它开始返回结果。

我的问题是，会发生什么会导致这种变化？由于类型冲突，这导致了大约 70 个错误。我是否忽略了基本设置？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:19:35.567

如果您使用服务引用与服务通信，请确保未更改数据类型。右键单击Service References文件夹中的服务，选择Configure Service Reference...，然后查看Data Type - Collection type:。如果它是 System.Array，那么这可能是您的问题。将其更改为 ObservableCollection 并查看是否有帮助。

# c# - 卸载程序在开发盒上运行后保留 COM 注册

> ID：13036392
> 
> 赞同：2
> 
> 时间：2012-10-23T17:57:19.050
> 
> 标签：c#, visual-studio-2010, com, vb6, installation

我的任务是构建一个 C# 4.0 应用程序，该应用程序利用旧的 VB6 COM 组件与另一个旧的 VB6 应用程序集成。该组件是为这种集成严格构建的，并由我的应用程序部署。

我使用 Visual Studio 安装项目为我的 C# 应用程序构建了一个安装程序，并将该 COM 组件添加到已部署文件的列表中。安装程序自动注册/注销组件精美。

但是，我现在遇到的问题是，在我的开发盒上卸载应用程序后，我无法在不手动重新注册 COM 组件的情况下调试应用程序，因为卸载取消了它的注册。我并不是暗示卸载不应该取消注册 COM 组件。我只是想找出一种更好的方法来确保我们仍然可以在我们的开发盒上构建和测试应用程序和安装程序，而不会带来这种不便。

PS我尝试使用 a `DllImport`，但它永远找不到入口点。根据我从研究中了解到的情况，您不能真正`DllImport`在 COM 组件上使用 a 。我希望我没有错过什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T18:05:57.130

您几乎做对了事情，安装程序*必须*取消注册 COM 组件，除非您想在客户机器上遇到一些真正有问题的影响。

不幸的是，除了在测试安装程序后编写一个简单的 CMD 文件来重新注册 COM 组件之外，您无能为力。

# ios - iOS Safari 显示已安装的应用程序。这是如何运作的？元标记？

> ID：13036393
> 
> 赞同：2
> 
> 时间：2012-10-23T17:57:18.467
> 
> 标签：ios, ios6, mobile-safari

你有没有注意到 iOS safari 中的一些网站会显示一个横幅，让用户知道应用程序已安装？这是如何运作的？这是元标记吗？

![Airbnb 示例显示打开应用程序的横幅](../Images/c428c06f771ce95cedab5c6cb0e706a0.png)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:14:51.087

您应该包含`<meta name="apple-itunes-app" content="app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL">`在您的网页的**head**中。

请查看此链接以获取更多信息：http: [//developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)

**注意**：它仅适用于 iOS6 或更高版本！

# javascript - 如何使它成为一个缓慢的 jQuery 计数器

> ID：13036394
> 
> 赞同：0
> 
> 时间：2012-10-23T17:57:21.540
> 
> 标签：javascript, jquery, counter

我目前正忙于制作一个新网站。我想在我的网站上制作一个计数器，向访问者显示我制作了多少个网站。我目前正在使用 Javascript 和 jQuery 来执行此操作。唯一的问题是，在使用 for 循环时，结果显示非常快，我希望它慢慢计数。这是我到目前为止的代码：

```
$(document).ready(function() {

    var websites = 10;
    for (var i=0;i<websites;i++)
    {
        $('.webcounter').html(i);
    }
}); 
```

任何人都有让柜台变慢的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:02:28.713

你可以试试这个：

```
var interval = window.setInterval(func, delay[, param1, param2, ...]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:15:20.823

使用[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)：

**[例子](http://jsfiddle.net/GKucL/1/)**

**HTML**

```
​&lt;div class="websites">0</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**查询**

```
$(document).ready(function() {
    var websites = 10;
    var counter = 1;
    var id = setInterval(function(){ 
        $('.websites').text(counter);
        counter++;
        if(counter > websites){ clearInterval(id);}
    }, 500);    
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T18:02:30.183

只是一个快速的猜测，但尝试这样的事情（我在工作，无法测试自己，呵呵）

```
var websites = 10, tmrSiteCount;

function siteCount(i) {
    if (i <= websites) {
        $('.webcounter').html(i);
        tmrSiteCount = setTimeout(function() { siteCount(i++); }, 1000);
    }
    else {
        clearTimeout(tmrSiteCount);
    };
}

$(document).ready(function() {
    tmrSiteCount = setTimeout(function() { siteCount(1); });
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T18:06:26.673

此计时器以秒为单位工作，您可以在 else 部分中将代码运行完成后运行：

**Javascript**

```
function countdown(count){

    $('.webcounter').html(count);

    count -= 1;

    if(count >= 0)
        setTimeout("countdown("+count+")", 1000);
    else
        alert("Countdown Complete");
}

$(document).ready(function() {

    countdown(10);
} 
```

**HTML**

```
<div class="webcounter">Webcounter Holder</div>​ 
```

**演示**

[http://jsfiddle.net/silver89/SBXAQ/8/](http://jsfiddle.net/silver89/SBXAQ/8/)

# java - QueryDSL & Hibernate-Search with Lucene Analyzers

> ID：13036398
> 
> 赞同：2
> 
> 时间：2012-10-23T17:57:32.183
> 
> 标签：java, lucene, hibernate-search, querydsl

我将 Hibernate-Search 配置为在索引我的实体时使用我的自定义分析器。但是，当我尝试使用 QueryDSL 的 Hibernate-Search 集成进行搜索时，它不会找到实体，但如果我使用直接的 hibernate-search 它会找到一些东西。

```
@AnalyzerDef(name = "customanalyzer",
    tokenizer = @TokenizerDef(factory = StandardTokenizerFactory.class),
    filters = {
            @TokenFilterDef(factory = LowerCaseFilterFactory.class),
            @TokenFilterDef(factory = SnowballPorterFilterFactory.class, params = {
                    @Parameter(name = "language", value = "English")
            })
    })
@Analyzer(definition = "customanalyzer")
public abstract class Post extends BaseEntity {} 
```

我索引了一个标题为“the quick brown fox jumped over the lazy dog”的实体。

这些工作……</p>

```
List articlePosts = fullTextEntityManager.createFullTextQuery(queryBuilder.keyword().onFields("title").matching("jumped").createQuery(), ArticlePost.class).getResultList(); // list of 2
List articlePosts = fullTextSession.createFullTextQuery(queryBuilder.keyword().onFields("title").matching("jumped").createQuery(), ArticlePost.class).getResultList(); // list of 2 
```

这不……</p>

```
SearchQuery<ArticlePost> query = new SearchQuery<ArticlePost>(this.entityManagerFactory.createEntityManager().unwrap(HibernateEntityManager.class).getSession(), post);
List articlePosts = query.where(post.title.contains("jumped")).list() // empty list 
```

但是搜索一下它是如何存储在 Lucene 中的（SnowballPorter 的可能结果），然后它就可以工作了……</p>

```
SearchQuery<ArticlePost> query = new SearchQuery<ArticlePost>(this.entityManagerFactory.createEntityManager().unwrap(HibernateEntityManager.class).getSession(), post);
List articlePosts = query.where(post.title.contains("jump")).list() // list of 2 
```

因此，似乎在使用 QueryDSL 时，分析器在执行查询之前并未运行。谁能确认这是问题所在，无论如何在 QueryDSL 运行查询之前让它们自动运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:53:56.487

关于您的问题，使用查询 DSL 时默认应用分析器。在大多数情况下，使用相同的分析器进行索引和搜索是有意义的。因此，除非使用“ignoreAnalyzer”，否则默认应用分析器。

为什么你的第二个例子不起作用我不能告诉你。*SearchQuery*不是 Hibernate Search 或 ORM API 的一部分。它必须是应用程序的内部类。这堂课发生了什么？它使用哪种类型的查询？

# haskell - 创建一个 Reader 和 Maybe Monad 的组合（Applicative Functor）

> ID：13036399
> 
> 赞同：6
> 
> 时间：2012-10-23T17:57:35.243
> 
> 标签：haskell, monads, monad-transformers

我想做的是从 Reader monad 中创建一个 Applicative Functor，它执行以下操作：

```
data MyData = Int Int

get2Sum :: Reader [Int] Int
get2Sum = do
    myData <- ask
    let fst2 = take 2 myData
    case length fst2 of
        2 -> return $ sum fst2
        _ -> return 0

myDataFromApplicative = MyData <$> get2Sum <*> get2Sum

main = print $ runReader myDataFromApplicative [1,2] 
```

但是，如果运行类似

```
runReader myDataFromApplicative [1] 
```

而不是给我`MyData 0 0`

我要它给我`Error`

我正在尝试创建自己的 Reader Monad 来完成此操作，但无法完全弄清楚。

我想象的是这样的（显然这只是一个大纲

```
data SuccessReader r a = Interm {runSuccessReader :: r -> SuccessReader a} | Success a | Error
throwError :: SuccessReader ()

get2Sum :: Reader [Int] Int
get2Sum = do
    myData <- ask
    let fst2 = take 2 myData
    case length fst2 of
        2 -> return $ sum fst2
        _ -> throwError

myDataFromApplicative = MyData <$> get2Sum <*> get2Sum

main = do
    print $ runSuccessReader myDataFromApplicative [1,2]
    print $ runSuccessReader myDataFromApplicative [1] 
```

这将输出

```
Success MyData 3 3
Error 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T18:08:43.120

您不需要编写自己的 monad，因为这正是 monad 转换器和 monad 堆栈解决的问题。由于您想要 a`Reader`和的组合`Maybe`，因此可以将`ReaderT`转换器与`Maybe`monad 一起使用。例如

```
get2Sum :: ReaderT [Int] Maybe Int
get2Sum = do
    myData <- ask
    let fst2 = take 2 myData
    case length fst2 of
        2 -> return $ sum fst2
        _ -> lift Nothing 
```

类型`get2Sum`意味着我们拥有`Reader [Int]`包含内部 monad 的外部 monad `Maybe`。在 的实现中`get2Sum`，`lift`用于在内部 monad 中运行操作（在这种情况下，简单地用 表示错误`Nothing`）。现在当你运行时（注意**T** in `runReaderT`）

```
main = do
    print $ runReaderT myDataFromApplicative [1,2]
    print $ runReaderT myDataFromApplicative [1] 
```

你得到

```
Just (MyData 3 3)
Nothing 
```

您还可以将 monad 堆栈隐藏在自定义中`newtype`

```
{-# LANGUAGE GeneralizedNewtypeDeriving #-}

import Control.Applicative
import Control.Monad.Reader

data MyData = MyData Int Int deriving Show

newtype MyMonad a = MyMonad (ReaderT [Int] Maybe a)
    deriving (Functor, Applicative, Monad, MonadReader [Int])

runMyMonad :: MyMonad a -> [Int] -> Maybe a
runMyMonad (MyMonad m) = runReaderT m

myError :: MyMonad a
myError = MyMonad $ lift Nothing

get2Sum :: MyMonad Int
get2Sum = do
    myData <- ask
    let fst2 = take 2 myData
    case length fst2 of
        2 -> return $ sum fst2
        _ -> myError

myDataFromApplicative = MyData <$> get2Sum <*> get2Sum

main = do
    print $ runMyMonad myDataFromApplicative [1,2]
    print $ runMyMonad myDataFromApplicative [1] 
```

# php - 将javascript文件添加到站点加载页面？

> ID：13036401
> 
> 赞同：0
> 
> 时间：2012-10-23T17:57:45.037
> 
> 标签：php, javascript, html, apache

有没有办法在网站加载时向代码 php/html 页面提供或添加 js 文件。我有 500 多个页面，我正在寻找一种将一小段代码添加到所有页面的方法。

例如 onload www.xyz.com - 在运行时将 javascript 文件/片段添加到该页面

这个想法是在加载的页面上添加一个javascript片段，这样它就不会是服务器端，它必须是客户端。

下面提供的代码仍然需要我在每一页上添加检查脚本。

我需要知道是否有办法通过 apache 在站点加载时提供文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:27:15.313

假设您有带有`<html><head></head><body>whatever</body></html>`某种东西的静态页面。以下应该可以快速解决。我的方法修改了底部结束`</body>`标签，但您可以修改它以更改`<head>`或开始`<body>`标签

## .htaccess

```
<IfModule php5_module>
    php_value auto_prepend_file /var/www/vhosts/example.com/httpdocs/auto_prepend.php
    php_value auto_append_file  /var/www/vhosts/example.com/httpdocs/auto_append.php
</IfModule> 
```

## auto_prepend.php

```
<?php 
ob_start();
?> 
```

## auto_append.php

```
<?php 
$output = ob_get_clean();
$script = file_get_contents($_SERVER['DOCUMENT_ROOT'].'/script.inc');
$output = str_replace('</body>', $script.PHP_EOL.'</body>', $output);
echo $output;
?> 
```

## 脚本公司

```
<script>
// using jquery method to attach onload:
jQuery(function(){
    // do your js stuff here or load your external js, like with jQuery.getScript() or jQuery.ajax()
    // http://api.jquery.com/jQuery.getScript/
    // http://api.jquery.com/category/ajax/
});

// or if you want go without a framework and attach your onload event. 
// in the most cross browser way see: 
// http://stackoverflow.com/questions/1235985/attach-a-body-onload-event-with-js

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:02:52.560

是的你可以。看看他们是如何动态加载 jquery 的： [Loading jQuery on-the-fly](https://stackoverflow.com/questions/8763580/loading-jquery-on-the-fly)

一个典型的用例：jqueryfy [http://www.learningjquery.com/2009/04/better-stronger-safer-jquerify-bookmarklet](http://www.learningjquery.com/2009/04/better-stronger-safer-jquerify-bookmarklet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:05:40.800

`onload`您可以调用一个函数，该函数在 body属性中调用脚本

```
<body onload="addScript()">
<script type="text/javascript">
function addScript()
{
    document.write("<script src='path\/to\/script.js' type=\"text/javascript\"><\/script>");
}
</script> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-22T15:21:01.830

使用上面的 Anthony Hatzopoulos 解决方案。

```
ob_start(); 
```

在前面和追加中（通过 htaccess 或 php.ini）使用：

```
<?php
$output = ob_get_clean();
$yourcode = "<yourscript/></body>";
$output = str_replace('</body>', $yourcode, $output);
echo $output;
?> 
```

这对我来说是最好的解决方案。

# android - Nexus 7 - 方向改变时出现神秘的空白搜索屏幕

> ID：13036402
> 
> 赞同：0
> 
> 时间：2012-10-23T17:57:46.363
> 
> 标签：android

完成一项活动（横向）后，返回另一项活动（纵向），会出现以下屏幕。为什么？没有错误信息。

![神秘的搜索画面](../Images/e390e2c839478da5fad419aad5c4e280.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:52:10.367

添加这个：`android:configChanges="keyboardHidden|orientation"`到你里面的活动`AndroidManifest.xml`

# mongodb - MongoDB聚合函数返回未定义

> ID：13036403
> 
> 赞同：0
> 
> 时间：2012-10-23T17:57:48.043
> 
> 标签：mongodb

我正在尝试使用新的 MongoDB 聚合功能按日期统计一些统计数据。下面是我正在使用的文档示例、我尝试的代码和期望的结果。聚合函数返回“未定义”。有人能告诉我为什么会这样吗？其次，我希望我的聚合函数以 mm-dd-yyyy 格式按日期对结果进行分组。但是，正如目前编写的那样，我认为代码将在完整的 ISO 日期之前执行聚合。有人可以告诉我如何解决这个问题吗？

文档示例

```
{
  user: "2A8761E4-C13A-470E-A759-91432D61B6AF-25982-0000352D853511AF",
  language: "English",
  imageFileName: "F7A5ED9-D43C-4671-A5C6-F06C7E41F902-7758-000008371FB5B834",
  audioFileName: "F6D5727D-9377-4092-A28A-AA900F02653D-7758-0000083749066CF2",
  date: ISODate("2012-10-22T02:43:52Z"),
  correct: "1",
  _id: ObjectId("5084b2e8179c41cc15000001")
} 
```

聚合函数

```
 var getUserStats = function(user, language, callback) {
    var guessCollection = db.collection('Guesses');
    guessCollection.aggregate(
  { $match: {
    user: user,
    language: language,
  }},
  { $sort: {
    date: 1
  }},
  { $project : {
     user : 1,
            language : 1,
            date : 1,
            correct : 1,
            incorrect : 1,
  } },
  { $unwind : "$language" },
  { $group : {
     _id : "$date",
            correct : { $sum : "$correct" },
            incorrect : { $sum : "$incorrect" }
  } }
, function(err, result){
    console.log(result);
    callback(result);
}); 
```

期望的结果

```
 {
        "result" : [
    //...snip...
            {
                "_id" : "2A8761E4-C13A-470E-A759-91432D61B6AF-25982-0000352D853511AF",
                "correct" : 32,
                "incorrect" : 17,
                "date" : 2012-10-22
            },
{
                "_id" : "2A8761E4-C13A-470E-A759-91432D61B6AF-25982-0000352D853511AF",
                "correct" : 16,
                "incorrect" : 7,
                "date" : 2012-10-23
            }
        ],
        "Ok" : 1
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T22:31:37.050

关于你关于它返回的第一个问题`undefined`，有两个问题：

1.  您在不是数组`$unwind`的字段 ( ) 上使用运算符。`$language`
2.  您`$sum`在字符串字段 ( `$correct`) 上使用运算符；仅支持数字字段。

关于仅按日期分组的第二个问题，您需要投影要分组的日期组件，然后在`$group`操作员的`_id`值中使用这些组件：

例如：

```
test.aggregate(
    { $match: {
        user: user,
        language: language
    }},
    { $sort: {
        date: 1
    }},
    { $project : {
        user : 1,
        language : 1,
        year : { $year: '$date' },
        month : { $month: '$date' },
        day : { $dayOfMonth: '$date'},
        correct : 1,
        incorrect : 1
    }},
    { $group : {
        _id : { year: "$year", month: "$month", day: "$day" },
        correct : { $sum : "$correct" },
        incorrect : { $sum : "$incorrect" }
    }},
    function(err, result){
        console.log(result);
    }
); 
```

产生以下输出：

```
[ { _id: { year: 2012, month: 10, day: 22 },
    correct: 0,
    incorrect: 0 } ] 
```

您可以从那里将其组装成`'2012-10-22'`代码。

# java - Swing 应用程序中的依赖注入

> ID：13036410
> 
> 赞同：2
> 
> 时间：2012-10-23T17:57:59.050
> 
> 标签：java, swing, dependency-injection

我必须有哪些选项才能在基于 Java Swing 的客户端应用程序中获得基于注释的依赖注入功能，就像在 JSF2 和 EJB3 中一样？

```
@ManagedProperty(value="#{myBean}")
private MyBean myBean;

public void setMyBean(MyBean myBean) {
    this.myBean= myBean;
} 
```

或者

```
@EJB
MyBean myBean; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:44:39.523

除了[CDI](https://stackoverflow.com/questions/3575211/can-cdi-be-lessened-towards-jse)（参见 @BalusC 的评论），您可能还想看看 [Spring Rich Client](https://stackoverflow.com/questions/1273979/is-there-a-good-di-framework-suitable-for-java-1-4-and-se-swing-apps)和[Guice](https://stackoverflow.com/questions/2632033/how-to-use-guice-in-swing-application)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-08T12:14:37.317

自 2009 年以来，Spring 富客户端已死。

# xml - Xerces-C“无法打开主文档实体”

> ID：13036412
> 
> 赞同：0
> 
> 时间：2012-10-23T17:58:04.440
> 
> 标签：xml, xsd, xerces

我收到了一条错误消息，这是我以前在我的 XML 处理代码中从未见过的。我最近并没有真正改变任何东西，但我们现在正在这里搬东西。到目前为止我运行的程序都受到了影响。

```
Warning at file , line=0, column=0, An exception occurred! Type:RuntimeException, Message:Warning: The primary document entity could not be opened. Id=/tmp/authNotify.xsd 
```

请注意，没有列出文件名（“文件警告”）。我在 /tmp 目录中根本没有任何 XSD 文件，所以它不应该在那里查找。困惑！

XML 文件与往常一样。我可以发布您认为有帮助的任何内容。当前目录不是 /tmp。

我在这里的 AS/400 环境中使用 Xerces-C 2.8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:30:18.443

当 xercesc 打开一个 xml 文件以成功读取它时，似乎会发生此错误，然后当它打开时，文件句柄下方的文件被删除，文件句柄保持打开状态但没有指向任何内容。要在一个紧密的循环中重现创建和删除xml文件，一段时间后xercesc会产生这个错误。

# translation - 使用 po 编辑器创建新的 po 文件

> ID：13036418
> 
> 赞同：0
> 
> 时间：2012-10-23T17:58:34.307
> 
> 标签：translation, gettext, po

我尝试了一些[po 编辑软件](http://alternativeto.net/software/better-po-editor/)。我想知道为什么没有一个不允许从头开始创建新的 po 文件或向现有文件添加新条目。有没有什么技巧可以让他们创建新条目？（我知道 po 文件是纯文本，可以在任何文本编辑器中编辑！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:46:43.800

PO 编辑器用于将 PO 文件从一种语言翻译成另一种语言。它们不是为创建 PO 文件而设计的。您的 PO 文件应该作为构建系统的一部分而不是由编辑器创建。

如果您想创建它们以进行测试，那么通过使用另一个现有的 PO 文件或通过反编译 MO 文件（使用 msgunfmt）很容易创建它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-24T10:17:28.680

# 脚本自动创建 .po 文件，自动添加代码中的所有文本

1.  添加 load_theme_textdomain('my-textdomain', **DIR** .'/languages/');
2.  创建文件夹 wp-content/themes/MY_THEME/languages（将您的语言 .mo 文件添加到此文件夹）
3.  创建**po.php**并添加此脚本：

```
<?php /*Script by Sien.com.vn */
define('WP_USE_THEMES', true);

require(''.$_SERVER['DOCUMENT_ROOT'].'/wp-load.php' );

function title_p($title) {

$title='Po create';   

return $title;}
add_filter( 'pre_get_document_title', 'title_p' );

$robots_p='noindex,nofollow';   

get_header();  

echo '<div id="content" class="col col-100">';

if(current_user_can('manage_options')){

function write_txt($path,$content,$type){
$file=fopen($path,$type) or die();
fwrite($file,$content);
fclose($file);
return TRUE;
}

if(isset($_POST['lang'])){
$lang_code=pathinfo($_POST['lang'],PATHINFO_FILENAME);

load_textdomain('this_lang',__DIR__.'/'.$lang_code.'.mo');

$textdomain=$_POST['textdomain'];

$txt='';

function sfile($dir, $ext) {
	global $textdomain;

$globFiles = glob("$dir".DIRECTORY_SEPARATOR."*.$ext");
$globDirs = glob("$dir/*", GLOB_ONLYDIR);

foreach ($globDirs as $dir) {
sfile($dir, $ext);

}

foreach ($globFiles as $file=>$path) {

$txt.=file_get_contents($path,FILE_USE_INCLUDE_PATH);

}

preg_match_all('/(translate|__|_e|esc_attr__|esc_attr_e|esc_html__|esc_html_e) ?\( ?(\'|\")(.+?)(\'|\") ?, ?(\'|\")'.$textdomain.'(\'|\") ?\)/',$txt,$output);

foreach(array_unique($output[3]) as $v){

	if(isset($v)){

write_txt(''.__DIR__.'/po.dat',''.(str_replace(array("\'",'\"'),array("'",'"'),$v)).'**$!3|\\/**','a+');
	}
}

}
sfile(get_template_directory(),'php');

$get=file_get_contents(''.__DIR__.'/po.dat');

$k=explode('**$!3|\\/**',$get);

foreach(array_unique($k) as $v){

	if(!empty($v)){ 

if($v==__($v,'this_lang')){
write_txt(''.__DIR__.'/po.dat.empty','
msgid "'.$v.'"
msgstr ""
','a+');
}else{
write_txt(''.__DIR__.'/po.dat.isset','
msgid "'.$v.'"
msgstr "'.__($v,'this_lang').'"
','a+');
}

	}

	}

if(empty(file_get_contents(''.__DIR__.'/po.dat.isset')) && empty(file_get_contents(''.__DIR__.'/po.dat.empty'))){
		echo '<div class="error">Error, Textdomain <b>'.$textdomain.'</b> not found!</div>';
	}else{

write_txt(''.__DIR__.'/'.$lang_code.'.po','# '.$lang_code.' LANG
msgid ""
msgstr ""
"PO-Revision-Date: 2017-11-23 22:26+0700\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"
"X-Generator: Poedit 2.0.4\n"
"Language: vi_VN\n"
"Project-Id-Version: Sien\n"
"POT-Creation-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"

'.file_get_contents(''.__DIR__.'/po.dat.isset').'
'.file_get_contents(''.__DIR__.'/po.dat.empty').'
','w+');

echo '<div class="success"><span style="color:blue">Success</span> -> Saved to: '.__DIR__.'/ <b>'.$lang_code.'.po</b></div>';

unlink(''.__DIR__.'/po.dat');
unlink(''.__DIR__.'/po.dat.isset');
unlink(''.__DIR__.'/po.dat.empty');

}

}

echo '<form action="" method="POST">
<div class="menu bd text-center"><p>Language: <select name="lang">';

foreach(glob("".__DIR__."/*.mo") as $path) {echo '<option value="'.$path.'">'.pathinfo($path,PATHINFO_FILENAME).'</option>';}

echo '</select></p>';

$txt='';
function stext($dir, $ext) {
$globFiles = glob("$dir".DIRECTORY_SEPARATOR."*.$ext");
$globDirs = glob("$dir/*", GLOB_ONLYDIR);
foreach ($globDirs as $dir) {stext($dir, $ext);}

foreach ($globFiles as $file=>$path) {
	if($path!=__FILE__){
$txt.=(str_replace(' ','',file_get_contents($path,FILE_USE_INCLUDE_PATH)));
	}

}

preg_match_all('/load_theme_textdomain\((\'|\")(.+?)(\'|\")/',$txt,$gtextdomain);
$td='';
foreach($gtextdomain[2] as $text){

	if(!empty($text)){
	$td.='<option value="'.$text.'">'.$text.'</option>';
	}

}

write_txt(__DIR__.'/textdomain.dat',$td,'a+');
}
stext(get_template_directory(),'php');

$textdomain=file_get_contents(__DIR__.'/textdomain.dat');
if(empty($textdomain)){echo '<div class="error">Not found textdomain [ <b>load_theme_textdomain ("you-textdomain","path_to_language_folder");</b> ]</div>';}else{
echo '<p>Textdomain: <select name="textdomain">'.$textdomain.'</select></p>';
}

echo '<p>
<input type="submit" value="Create new.po file"/>
</p>
</div>
</form>';

unlink(__DIR__.'/textdomain.dat');

}

echo '</div>';

get_footer(); 
```

4.  转到**youdomain/wp-content/themes/MY_THEME/languages/po.php**并创建 .po 文件
5.  将**wp-content/themes/MY_THEME/languages/[LANG].po**复制到桌面并使用**Poedit**打开-> 编译 MO -> 将 [LANG].mo 复制到**语言**文件夹

# c# - LINQ 子查询和嵌套的 FROM 语句有什么区别

> ID：13036426
> 
> 赞同：-4
> 
> 时间：2012-10-23T17:59:50.700
> 
> 标签：c#, linq, linq-to-objects

1) 子查询是查询中的查询，因此必须以 FROM 子句开头并以 SELECT 或 GROUP BY 子句结尾。但我很困惑为什么我们不将那些只有 FROM 子句的嵌套语句也视为子查询（因此它们不以 SELECT 或 GROUP BY 结尾）。

的行为`from c_2 in collection_2`与子查询的行为非常相似，因为它枚举了`collection_2`每个`c_1`元素的整体。由于它们的行为非常相似，为什么不将诸如子查询之类的语句`from c_2 in collection_2`视为子查询（您可以争辩说子查询返回结果，但也可以说相同的论点`from c_2 in collection_2`，因为它确实被转换为对 的调用`SelectMany`）？

```
 var query = from c_1  in collection_1
                from c_2  in collection_2 
                select ... 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:06:54.300

> 但同样的论点也可以从 collection_2 中的 c_2 说起，因为它确实被转换为对 SelectMany 的调用

并不真地。那个电话不会被转换成`SelectMany`. 事实上，有两个`from`子句组合在一起（只有一个`select`）导致它被转换为`SelectMany`调用，所以在这种情况下整个事情都是一个查询。如果每个都`from`与一个匹配，`select`那么它将是一个子查询。

# python - 在 Django 中使用 {% url %} 时的通用视图 NoReverseMatch

> ID：13036436
> 
> 赞同：1
> 
> 时间：2012-10-23T18:00:46.320
> 
> 标签：python, django, django-templates, django-urls, django-generic-views

我在从模板 base.html 执行反向命令“url”时遇到问题。

**URLS.conf**我的文件如下所示：

```
dic_info_artigo = {
                  'queryset': Artigo.modificado.all(),
                  'date_field': 'data_pub',
}

urlpatterns = patterns('django.views.generic.date_based',
    (r'^$', 'archive_index', dic_info_artigo,'artigos'),

    (r'^(?P<year>\d{4})/$','archive_year', dic_info_artigo,'artigos_ano'),
    (r'^(?P<year>\d{4})/(?P<month>\w{3})/$',
        'archive_month', dic_info_artigo,'artigos_mes'),
    (r'^(?P<year>\d{4})/(?P<month>\w{3})/(?P<day>\d{2})/$',
        'archive_day', dic_info_artigo,'artigos_dia'),
    (r'^(?P<year>\d{4})/(?P<month>\w{3})/(?P<day>\d{2})/(?P<slug>[-\w]+)/$',
        'object_detail', dic_info_artigo,'detalhe_artigo'),
) 
```

**base.html**

```
<a href="{% url artigos %}"> Artigos </ a> 
```

**错误：**

*字典更新序列元素#0的长度为1；2 是必需的*

已经尝试使用参数'name='，我更改了值，但它不起作用

```
url(r'^$', 'archive_index', dic_info_artigo, name='artigos'), 
```

我究竟做错了什么？有小费吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:39:08.433

错误消息表明您尝试使用以下内容命名视图：

```
(r'^my_url$', 'my_view', 'my_view') 
```

但是，第三个参数应该是字典，而不是视图的名称。

为防止出现此类错误，我建议始终使用`url`快捷方式并命名 url 模式：

```
url(r'^my_url$', 'my_view', name='my_view') 
```

但是，如果愿意，您可以将空字典作为第三个参数传递：

```
(r'^my_url$', 'my_view', {}, 'my_view') 
```

您发布的`urls.py`看起来不错，所以问题可能出在不同的`urls.py`. 如果幸运的话，完整的回溯可能会为您提供发生错误的模块的确切行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:27:03.310

使用 url() 命名 url 并在模板文件中尝试以下操作。

`{% url 'artigos' %}`

# perl - 将 Perl 打印语句重定向到 Apache 日志

> ID：13036438
> 
> 赞同：6
> 
> 时间：2012-10-23T18:00:57.220
> 
> 标签：perl, apache, logging, log4j, stdout

我们有一个在 Apache 上运行的 Java Web 应用程序，它在某些用例中调用 Perl 脚本。我希望能够将 Perl 脚本的打印语句（默认情况下打印到 STDOUT）重定向到 Apache 日志。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T20:25:40.920

在 Perl 脚本中使用它是有效的：

```
print STDERR "my comment"; 
```

# php - PHPexcel CONCATENATE 使空白列

> ID：13036439
> 
> 赞同：0
> 
> 时间：2012-10-23T18:01:04.800
> 
> 标签：php

我有这个命令，其他列有它的数据，但是 I2 是空的，没有功能，没有什么我认为我做错了什么，但不知道是什么。谢谢

在 I2 中是这个数据“2012/10”

```
$foo->mergeCells("B$rowCounter:E$rowCounter");
$foo->setCellValue("B$rowCounter", "Lukáš Doubek")
    ->setCellValue("F$rowCounter", "IČ: 77889977")
    ->setCellValue("H$rowCounter", "Variabilní symbol")
    ->setCellValue("I$rowCounter", '=CONCATENATE("LEFT(I2;4)","RIGHT(I2;2)")');
$rowCounter++; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:04:37.050

虽然这是一个 excel 命令，而不是 php 命令，但我相信这一行是不正确的：

```
->setCellValue("I$rowCounter", '=CONCATENATE("LEFT(I2;4)","RIGHT(I2;2)")'); 
```

相反，不应该是这样吗？

```
->setCellValue("I$rowCounter", '=CONCATENATE("LEFT(I2,4)","RIGHT(I2,2)")'); 
```

# cuda - 有效地将多维数组传输到 CUDA GPU

> ID：13036441
> 
> 赞同：1
> 
> 时间：2012-10-23T18:01:10.510
> 
> 标签：cuda, gpu, gpgpu

如何传输定义为类似于数组“A”的（一种）多维数组（即

```
int********* A; 
```

) 有效地[将 C 中的多维数组转换为单维](https://stackoverflow.com/questions/12938357/convert-multidimensional-array-to-single-dimensional-in-c)到 CUDA GPU？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T18:35:05.380

既然你已经编辑了你的问题，我将编辑我的回复。这样的数组 (* *******A) 很难创建。它需要带有 malloc 的嵌套循环，其中嵌套级别等于数组维数。话虽如此，响应类似于我已经在下面发布的内容。要么您有一组并行的嵌套循环，这些循环正在执行 cudaMalloc 和 cudaMemcpy，要么您将整个事情线性化并一步转移。对于二维数组，我可能会考虑建议任何一种方法。对于 N 维数组，第一种方法简直是疯了，如[这一系列 SO 问题所示](https://stackoverflow.com/questions/12924155/sending-3d-array-to-cuda-kernel). 因此，我认为在尝试将其传输到设备之前，您当然应该线性化一个大维可变行数组。您提到的上一个问题中询问了线性化方法，这超出了我在这里回答的范围。线性化后，传输操作很简单，可以通过单个 cudaMalloc/cudaMemcpy 操作完成。

* * *

大概您指的是各个行具有不同大小的数组（因此是独立分配的）。我认为你有两个选择：

1.  使用相应的 cudaMalloc（对于每一行 malloc）和一个 cudaMemcpy（对于每个 cudaMalloc）独立传输行。
2.  合并（打包）主机内存中的行，以创建一个连续块，该块是整个数据集的大小（行大小的总和）。然后，使用单个 cudaMemcpy，一步将这个“打包”数组传输到设备。从传输效率的角度来看，这将是最有效的。

无论哪种情况，您都必须仔细考虑访问机制，以使阵列在 GPU 上方便地可用。第一种方法在这方面可能更容易，因为您将自动为每一行提供指针。对于第二种方法，您可能需要在设备上创建一组指针以匹配主机上的行指针。除此之外，您在设备上的访问机制应该类似于主机，因为两者都将使用一组行指针来访问您的数组。

相反，如果您指的是普通的多维数组（a[dim1][dim2][dim3]...），这很简单，因为它在内存中已经是连续的并且可以通过单个指针访问。如果您将原始的可变行数组重新制作为一个普通的多维数组，其列数等于最长的行（因此在其他行中保留一些未使用的元素），您可以利用这种技术来代替。这将有一些低效率，因为您正在传输未使用的元素，但访问数组会很简单。

如果您有真正的稀疏矩阵，您可能还需要考虑稀疏矩阵表示方法。 [cusp](https://github.com/cusplibrary/cusplibrary/wiki/Quick-Start-Guide)将是在 GPU 上处理和操作这些的一种方法。

这个[答案](https://stackoverflow.com/questions/45643682/cuda-using-2d-and-3d-arrays/45644824#45644824)可能也很有趣。

# python - 蟒蛇家庭作业

> ID：13036446
> 
> 赞同：-4
> 
> 时间：2012-10-23T18:01:23.820
> 
> 标签：python

> 1.  定义一个字符串
> 2.  定义字符串的长度
> 3.  如果字符串 len 是偶数且右半部分与左半部分相同，则打印 true，否则 - 打印 false。

我只需要在 3 行中执行此操作，并且它必须适用于每个字符串 len 而无需更改 (3) 中的条件。

我们还没有学习或循环。它应该与切片。

请帮忙。

* * *

我试着这样做：

```
some_string = "bb" 
str_len = len (some_string),str(a)
if str_len%2==0 and some_string[0:a/2]==some_string[a/2:0]: print "True"
else: print "False" 
```

但出了点问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:39:04.237

您的代码几乎没问题，只需要一点改进。您实际上不需要使用`modulus(%)`运算符检查偶数长度，因为第二个条件会自动处理它。

因此，您的代码如下所示：-

```
>>> def check_str(value):
        mid = len(value) / 2
        return True if value[:mid] == value[mid:] else False

>>> check_str("abab")
True
>>> check_str("abb")
False
>>> check_str("aaba")
False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T18:39:13.990

使用[三元运算符](http://docs.python.org/reference/expressions.html#conditional-expressions)：

```
In [38]: def ans(x):

    strs=x           # line 1
    length=len(strs) # line 2 
    print True if length%2==0 and strs[0:length/2]==strs[length/2:] else False  ## line 3
   ....:     
   ....:     

In [42]: ans("bb")
True

In [43]: ans("bbb")
False

In [44]: ans("abcabc")
True

In [45]: ans("abcdabc")
False 
```

# javascript - Javascript 对象在数组中但无法访问它

> ID：13036451
> 
> 赞同：0
> 
> 时间：2012-10-23T18:02:18.873
> 
> 标签：javascript, arrays, date, object

我有一个 for 循环，它遍历 currentObject 作为响应。

这段代码：

```
console.log(response[currentObject]); 
```

清楚地表明 response[currentObject] 具有“start”等属性。

但是，这段代码告诉我变量未定义：

```
console.log(response[currentObject].start); 
```

为什么是这样？请注意，“开始”是一个日期变量。

这是整个功能：

```
function(response) {

                            for (var currentObject in response) {
                                //Parsing the data before its used
                                //"17\/10\/2012 20:55:00"
                                var phpStartDate = response[currentObject].start;
                                console.log(response[currentObject]);
                                var phpStopDate = response[currentObject].stop;
                                var datePartsStart = phpStartDate.match(/(\d+)/g);
                                var datePartsStop = phpStopDate.match(/(\d+)/g);
                                var parsedDateStart = new Date(datePartsStart[2], datePartsStart[1], datePartsStart[0], datePartsStart[3], datePartsStart[4], datePartsStart[5]);
                                var parsedDateStop = new Date(datePartsStop[2], datePartsStop[1], datePartsStop[0], datePartsStop[3], datePartsStop[4], datePartsStop[5]);

                                response[currentObject].start = parsedDateStart;
                                response[currentObject].stop = parsedDateStop;
                                //debugger;
                            };
                            return response;
                        } 
```

忘了补充，我使用的是 jQuery 1.8.2，我相信它处理日期的方式与 1.7 不同（但我不能使用 1.7，因为我遇到了一大堆其他问题！）

这是 console.log(response):Object 的输出

```
data: Array[3]
0: Object
hourly: "4.00"
id: "40"
staff: "James Hadley"
start: "2012-09-25 00:00:00"
stop: "2012-09-27 00:00:00"
__proto__: Object
1: Object
hourly: "25.00"
id: "39"
staff: "James Hadley"
start: "2012-10-17 21:12:00"
stop: "2012-10-26 02:30:00"
__proto__: Object
2: Object
length: 3
__proto__: Array[0]
total: 3
__proto__: Object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:10:21.120

我想这是一个时间问题，因为 console.log 对象是*live*。尝试

```
console.log(JSON.stringify(response[currentObject])); 
```

我敢打赌，`start`没有它，它甚至不包括思想`stringify`。您的响应是异步的，并且您访问`start`得太早（您的代码没有显示该部分）。

现在有了你的评论，这很明显。这是一个数组，您缺少索引，例如 0。

```
console.log(response[currentObject][0].start); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T18:04:27.393

采用

> currentObject.start = parsedDateStart

代替

> response[currentObject].start = parsedDateStart

# ajax - f:ajax 调用不适用于 f:validateRegex

> ID：13036459
> 
> 赞同：1
> 
> 时间：2012-10-23T18:02:37.990
> 
> 标签：ajax, validation, jsf-2

令我惊讶的是，在我在文本框中输入的每个键之后都**没有**发生ajax 调用。**只有在**输入 14 位数字后才会调用 ajax 。不确定在这种情况下 ajax 与 validateRegex 标记处理程序有何关联？另外，我可以说`<f:validateRegex>, <f:valiadteLength>`etc 将始终在客户端执行验证（如 java script/jquery）吗？

```
<h:inputText id="input" value="#{bean.input}" maxlength="16">
<f:ajax event="keyup" render="another_id" listener="{bean.method}"/>
<f:validateRegex pattern="[0-9]{14}" />
</h:inputText> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:28:23.117

> *在我在文本框中输入的每个键之后都不会发生 ajax 调用。仅在输入 14 位数字后才调用 ajax*

有一些混乱正在发生。上述陈述不属实。

肯定会调用 ajax 调用。在 webbrowser 的内置开发人员工具集中跟踪 HTTP 流量（在 Chrome/IE9/Firebug 中按 F12 并检查*网络*部分）。`/*`在或 JSF上创建一个 HTTP 过滤器`PhaseListener`，您会看到它在每次按键时都会被调用（这意味着每次都肯定会命中服务器）。

您可能实际上意味着`<f:ajax listener>`未调用中指定的动作侦听器方法。反过来，这确实是真的。但这是完全预期的行为。即存在验证错误。这样 JSF 将**跳过**UPDATE_MODEL_VALUES 和 INVOKE_ACTION 阶段。所以动作方法实际上是设计上没有被调用的。当出现验证错误时，不应执行业务逻辑。

我不确定你为什么期望它被调用。为什么要对无效输入执行业务逻辑？如果您更详细地阐述具体功能，那么我们也许可以为此提出正确的方法。

* * *

**根据评论进行**更新**`disabled`，只需在视图端检查输入组件在其他组件属性中的有效性，方法是检查[`UIInput#isValid()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#isValid%28%29)通过将组件绑定到视图可以获得的结果：**

 **```
<h:inputText ... binding="#{input}">
    <f:ajax event="keyup" render="input2 input3 input4" />
    <f:validateRegex pattern="[0-9]{14}" />
</h:inputText>

<h:inputText id="input2" ... disabled="#{not input.valid}" />
<h:inputText id="input3" ... disabled="#{not input.valid}" />
<h:inputText id="input4" ... disabled="#{not input.valid}" /> 
```

不需要 ajax 侦听器方法。**

# jquery - 如何使项目既可排序（jQuery UI）又可拖动（HTML5）？

> ID：13036460
> 
> 赞同：1
> 
> 时间：2012-10-23T18:02:40.030
> 
> 标签：jquery, html, jquery-ui, jquery-ui-sortable

我有一个可排序的列表，使用可排序的 jQuery UI。但是，我还希望列表中的项目可以使用 HTML 5 进行拖动（即不是 jQuery UI Draggable）。问题是，可排序的似乎覆盖了可拖动的。所以我有：

```
<ul id="my-folder-list" class="ui-sortable">
    <li draggable="true" item-id="6KXoILDr5K" ondragstart="drag(event);"><div>Winter 2012</div></li>
    <li draggable="true" item-id="WL2mL8emnH" ondragstart="drag(event);"><div>Summer 2012</div></li>
</ul> 
```

基本上我希望这些文件夹在它们之间是可排序的，但如果其中一个被拖到另一个 div（垃圾桶），那么它应该被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:30:21.530

看看 HTML5 Sortable，它是一个使用原生 HTML5 拖放 API 创建可排序列表和网格的 jQuery 插件。

你会在这里找到它：http: [//farhadi.ir/projects/html5sortable/](http://farhadi.ir/projects/html5sortable/)

# generics - 为什么使用 GHC.Generics 时会出现模棱两可的类型变量错误？

> ID：13036462
> 
> 赞同：2
> 
> 时间：2012-10-23T18:02:44.750
> 
> 标签：generics, haskell, ghc

我已经尝试过 [http://www.haskell.org/haskellwiki/GHC.Generics#A_generic_function中的示例](http://www.haskell.org/haskellwiki/GHC.Generics#A_generic_function)

那是：

```
import GHC.Generics

{-# LANGUAGE DeriveGeneric #-}
{-# LANGUAGE DefaultSignaturesGeneric #-}

data Bin = O | I deriving Show

data UserTree a = Node a (UserTree a) (UserTree a) | Leaf deriving Generic

class GSerialize f where
    gput :: f a -> [Bin]

instance GSerialize U1 where
    gput U1 = []

instance (GSerialize a, GSerialize b) => GSerialize (a :*: b) where
    gput (x :*: y) = gput x ++ gput y

instance (GSerialize a, GSerialize b) => GSerialize (a :+: b) where
    gput (L1 x) = O : gput x
    gput (R1 x) = I : gput x

instance (GSerialize a) => GSerialize (M1 i c a) where
    gput (M1 x) = gput x

instance (Serialize a) => GSerialize (K1 i a) where
    gput (K1 x) = put x 
```

* * *

```
class Serialize a where
    put :: a -> [Bin]
    default put :: (Generic a, GSerialize (Rep a)) => a -> [Bin]
    put = gput . from

instance Serialize Int
instance Serialize Char
instance Serialize Bool
instance (Serialize a) => Serialize (UserTree a)

toserialize :: (Serialize (UserTree a) ) => UserTree a -> [Bin]
toserialize tree = put tree 
```

* * *

我通过调用测试了该函数：

```
toserialize Leaf 
```

这里编译器给出了一个错误消息：

```
 Ambiguous type variable `a0' in the constraint:
   (Serialize a0) arising from a use of `toserialize'
 Probable fix: add a type signature that fixes these type variable(s)
 In the expression: serialize Leaf
 In an equation for `it': it = toserialize Leaf 
```

这里缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:23:08.440

问题是，由于类型变量`a`in`UserTree a`根本没有出现在`Leaf`构造函数中，GHC 无法确定`a`您想要哪个值作为您的值。您可以通过添加显式类型签名来解决此问题，例如

```
toserialize (Leaf :: UserTree Int) 
```

更新：该示例`toserialize (Node 2 Leaf Leaf)`挂起，因为 的通用表示`Int`是递归的

```
type Rep Int = D1 D_Int (C1 C_Int (S1 NoSelector (Rec0 Int))) 
```

对于没有“普通”构造函数的“原始”类型，您通常必须手动定义实例。但是，因为例如`Bool`只是

```
data Bool = True | False 
```

这适用于通用`Serialize`实例

```
toserialize (Node True Leaf Leaf) 
```

# asp.net - 如何在 asp.net Web 应用程序中从条码标签打印机打印条码

> ID：13036463
> 
> 赞同：0
> 
> 时间：2012-10-23T18:02:46.773
> 
> 标签：asp.net, barcode

我有一个按钮和一个文本框，当用户单击该按钮时，文本框中输入的数字应从条码打印机（公民打印机）以条码格式打印到条码标签纸上。

我怎样才能做到这一点。？？

我做了一些 RND，我创建了一个 bat 文件。在该文件中，我将代码编写为

```
copy c:/desktop/myfolder/textfile.txt b\ citizen 
```

我的方法正确吗？？？，是否有任何不同的技术通过条码标签打印机打印条码。

请帮忙，我无法打印。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:31:47.453

为了在您的方法中取得成功，您的 asp.net 脚本需要：

1.  将字段条目写入 textfile.txt 文件
2.  触发批处理文件的启动以将 textfile.txt 发送到打印机端口

这是假设：

1.  您正确设置了打印机 - 要按照您的命令提示从命令提示符打印`COPY`，您需要将打印机设置为共享，然后映射到命令行可识别的端口 ( `NET USE LPT2 \\COMPUTER\PRINTER`)
2.  您的 asp.net 脚本以打印机可以理解的格式编写了 textfile.txt

批处理文件中复制 textfile.txt 的实际命令是：

```
copy /B c:\desktop\myfolder\textfile.txt LPT2 
```

将路径和端口更改为系统上的路径和端口。如果这是在服务器环境中设置的，您还需要确保权限正确，以便 asp.net 脚本可以启动批处理文件。

# python - 从 tkinter 的列表框中选择项目的问题

> ID：13036464
> 
> 赞同：0
> 
> 时间：2012-10-23T18:02:49.297
> 
> 标签：python, user-interface, widget, tkinter

我正在尝试从列表框中选择一个项目，当按下按钮时，该文件的索引位置将传递给另一个函数。

现在我只是想正确选择文件，但它不起作用。通过 openfile 选择一个目录（是的，错误的命名和所有），然后将其传递给 directoryContents。从这里在命令提示符中打印“（）”。这应该只在按钮运行时不立即按下时发生，所以这是我的问题的一部分。在列表中选择一个项目并按下按钮后，没有任何反应。

假设我选择列表中的第一项并按下按钮，（0）应该打印在命令提示符中。

```
class Actions:

    def openfile(self):
        directory = tkFileDialog.askdirectory(initialdir='.')
        self.directoryContents(directory)

    def filename(self):
        Label (text='Please select a directory').pack(side=TOP,padx=10,pady=10)

    def directoryContents(self, directory):
        scrollbar = Scrollbar() #left scrollbar - display contents in directory
        scrollbar.pack(side = LEFT, fill = Y) 

        scrollbarSorted = Scrollbar() #right scrollbar - display sorted files 
        scrollbarSorted.pack(side = RIGHT, fill = Y, padx = 2)

        fileList = Listbox(yscrollcommand = scrollbar.set) #files displayed in the first scrollbar
        for filename in os.listdir(directory):
            fileList.insert(END, filename)
        fileList.pack(side =LEFT, fill = BOTH)
        scrollbar.config(command = fileList.yview)

        fileList2 = Listbox(yscrollcommand = scrollbarSorted.set) #second scrollbar (button will send selected files to this window)
        fileList2.pack(side =RIGHT, fill = BOTH)
        scrollbarSorted.config(command = fileList2.yview)

        selection = fileList.curselection() #select the file
        b = Button(text="->", command=self.moveFile(selection)) #send the file to moveFile
        b.pack(pady=5, padx =20)

        mainloop()

    def moveFile(self,File):
        print(File)

#b = Button(text="->", command=Actions.moveFile(Actions.selection))
#b.pack(pady=5, padx =20) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:08:22.447

我很快看到的一个问题是：

```
b = Button(text="->", command=self.moveFile(selection)) 
```

应该是这样的：

```
b = Button(text="->", command=lambda:self.moveFile(fileList.curselection())) 
```

正如它所写的那样，您正在传递`self.moveFile`as的结果`command`（显然需要*调用* `self.movefile`才能获得结果）

将a 滑入`lambda`其中会延迟调用该函数，直到实际单击该按钮。

里面`mainloop`也好像有点腥...

# emacs - 用于“自由”光标定位的 Emacs 模式

> ID：13036465
> 
> 赞同：5
> 
> 时间：2012-10-23T18:02:49.783
> 
> 标签：emacs

是否有一种模式可以让我通过鼠标单击或按键将光标放置在屏幕上的任何位置（包括行尾之后）？

**编辑：**

一种基于图片模式的次要模式，它完全符合问题的要求。

```
(define-minor-mode free-point-mode
    "Place the cursor anywhere on the screen, irrespective of linebreaks, by clicking or using the arrow keys"
  nil nil
  `((,(kbd "<mouse-1>") . picture-mouse-set-point)
    (,[remap right-char] . picture-forward-column)
    (,[remap left-char] . picture-backward-column)
    (,[remap previous-line] . picture-move-up)
    (,[remap next-line] . picture-move-down))
  (require 'picture))

(defadvice picture-mouse-set-point (after no-region activate)
  (deactivate-mark)) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T18:20:32.540

[`picture-mode`](http://www.gnu.org/software/emacs/manual/html_node/emacs/Picture-Mode.html)让您将光标定位在屏幕上的任何位置。不要让这个名字欺骗你，这与图像无关：

> 要编辑由文本字符组成的图片（例如，将寄存器划分为字段的图片，作为程序中的注释），请使用命令 Mx picture-mode 进入图片模式。

# c - linux/input.h 和击键记录

> ID：13036468
> 
> 赞同：1
> 
> 时间：2012-10-23T18:02:58.447
> 
> 标签：c, linux, x11

我目前正在编写一个 GNU/linux IRC 机器人来帮助我评估在现代 GNU/Linux 系统上运行的恶意软件类型。此 IRC 机器人的一部分旨在允许操作员请求在客户端上记录击键。

所以我有几个关于 linux/input 头文件的问题要问你们。首先，我不知道它是否是 x11 的一部分，如果有人能澄清它会很棒。最后，通过从“驱动程序”捕获设备事件来捕获键盘输入的唯一方法是什么？在 /dev/input/?

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:13:03.973

没有 linux/input.h 不是 X11 的一部分，它是 linux 的一部分。（所有 X11 标头都在 X11/ 下）

做事总是有不止一种方法，但从 /dev/input 读取可能是最简单/最可靠的。见[http://www.thelinuxdaily.com/2010/05/grab-raw-keyboard-input-from-event-device-node-devinputevent/](http://www.thelinuxdaily.com/2010/05/grab-raw-keyboard-input-from-event-device-node-devinputevent/)

注意：您需要 root 才能像这样从键盘读取。

# asp.net - 母版页中的 ASP.NET 分页在新窗口中打开

> ID：13036469
> 
> 赞同：0
> 
> 时间：2012-10-23T18:02:58.417
> 
> 标签：asp.net, asp.net-4.0

我在引用母版页的页面的内容面板中有一个 gridview。我在 gridview 中启用了分页，当我单击第 2 页查看第二页时，网格显示在另一个弹出的窗口中。从这一点开始，单击下一页会在弹出窗口中显示数据。

如何强制 gridview 在同一页面中显示数据？我正在使用 ASP.NET 4.0

# r - 用 R 组织项目

> ID：13036472
> 
> 赞同：2
> 
> 时间：2012-10-23T18:03:06.147
> 
> 标签：r, project-management, project

> **可能重复：**
> [统计分析和报告撰写的工作流程](https://stackoverflow.com/questions/1429907/workflow-for-statistical-analysis-and-report-writing)

我用 R 编程的时间不长，但遇到了一个项目组织问题，我希望有人能给我一些提示。我发现我所做的很多分析都是临时性的：也就是说，我运行一些东西，考虑结果，然后再运行一些。这在概念上与 C++ 之类的语言不同，在这种语言中，您在编码之前考虑要运行的全部内容。这是解释语言的巨大优势。但是，出现的问题是我最终保存了很多 .RData 文件，因此我不必`source`每次都使用我的脚本。有没有人对如何组织我的项目有任何好主意，以便我可以在一个月后返回它并很好地了解每个文件与什么相关联？

我猜这是一个文档问题。我是否应该在每个阶段都记录我的整个项目，并积极清理不再需要但作为研究副产品的文件？这是我目前的系统，但有点麻烦。还有其他人有其他建议吗？

根据下面的评论：我要避免的关键事情之一是 .R 分析文件和随之而来的 .RData 集的扩散。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:12:47.463

我的分析是一个`knitr`文档，其中包含一些从中调用的外部 .R 文件。

所有数据都在数据库中，但在我的分析过程中，处理过的数据保存为 .RData 文件。只有当我删除 RData 时，当我再次运行分析时，它们才会从数据库中重新创建。有点像缓存，当我重新运行（部分）我的分析时，可以节省数据库访问和数据处理时间。

使用`knitr`（`Sweave`等）文档进行分析使您能够轻松编写包含结果的文档化工作流程。并且 knitr 缓存分析的结果，因此小的更改通常不会导致所有 R 代码的完全重新运行，而只会导致一小部分。为更大的分析节省了相当多的运行时间。

（啊，如前所述：使用版本控制。另一个提示：使用 knitr 和版本控制在 RStudio 中非常容易。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T22:12:08.510

关于研究项目组织的一些想法在这里：

[http://software-carpentry.org/4_0/data/mgmt/](http://software-carpentry.org/4_0/data/mgmt/)

带回家的信息是：

*   为您的程序使用版本控制
*   使用合理的目录名称
*   对元数据使用版本控制
*   真的，版本控制是一件好事。

# asp.net - 读取 CSV - 内存问题

> ID：13036475
> 
> 赞同：2
> 
> 时间：2012-10-23T18:03:17.437
> 
> 标签：asp.net, csv

简单的问题。我需要在 .NET 中读取一个 CSV 文件，为此我正在使用 Lumenworks CSV 库。问题是这个解决方案似乎将整个 CSV 内容读入内存。我想知道是否有另一种选项可以让我一次遍历一个元素的 CSV 内容，因此消耗更少的内存。

XmlDocument 与 XmlReader 之类的东西。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:07:33.187

可以使用[StreamReader 类](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)逐行加载文件，进行搜索、匹配等操作，方法是[StreamReader.ReadLine](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx)方法。其中包含一个示例以说明如何操作。这真的花费很少的时间。

存储一次操作后的位置或行号，然后在下一次操作中使用[Stream.Seek 方法](http://msdn.microsoft.com/en-us/library/system.io.stream.seek%28v=VS.100%29.aspx)从存储的位置开始加载。

# visual-studio-2012 - Visual Studio 2012 OLEDB 连接

> ID：13036478
> 
> 赞同：0
> 
> 时间：2012-10-23T18:03:27.643
> 
> 标签：visual-studio-2012

我有这段代码，我在 Visual Studio 2012 中使用它来从 sql 数据库中的数据填充组合框。每次我尝试调试它时，我都会在空引用异常的 for 循环中得到异常。我希望有人可以帮助我弄清楚我在这里缺少什么。

Private Sub StationList_Click(sender As Object, e As EventArgs) 处理 StationList.Click

```
 Dim cn As New OleDbConnection
    cn.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\hendera2\Desktop\StationEquip.accdb"
    Dim Mystr As String = "SELECT DISTINCT Location FROM StationEquipment"
    Dim Myadapter As OleDbDataAdapter
    Dim Mydataset As New DataSet()

    Try
        cn.Open()

        Myadapter = New OleDbDataAdapter(Mystr, cn.ConnectionString)
        Myadapter.Fill(Mydataset, Mystr)

        Dim dr As DataRow

        For Each dr In Mydataset.Tables("StationEquipDataSet").Rows
            Me.StationList.Items.Add(dr("Location"))
        Next

        cn.Close()
    Catch ex As Exception
        MsgBox("Cannot Open connection")
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:11:24.207

将“StationEquipDataSet”数据表名称更改为“StationEquipment”您与表名称不匹配，这导致当您尝试访问此表的行时出现空引用，因为它不存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:08:02.120

显然我看不到您的数据库或它正在提取的记录，但我会尝试添加它以增加尝试引用空值的可能性：

```
If Mydataset.Tables("StationEquipDataSet").Rows.Count > 0 Then
    For Each dr In Mydataset.Tables("StationEquipDataSet").Rows
        Me.StationList.Items.Add(dr("Location"))
    Next
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T18:36:35.420

我相信你在`Mydataset.Tables("StationEquipDataSet")`表达中把名字弄错了。

要确定数据集是否确实包含您的表，并找出用作索引的正确名称，您可以尝试在循环之前插入这些行：

```
 Console.WriteLine(MyDataSet.Tables.Count);
    for (var i = 0; i > MyDataSet.Tables.Count;i++)
    {
        Console.WriteLine(MyDataSet.Tables[0].TableName);
    } 
```

例如，这会将表的数量和表名写入控制台。

# php - php变量不存储

> ID：13036479
> 
> 赞同：2
> 
> 时间：2012-10-23T18:03:36.190
> 
> 标签：php, mysql, mysqli

我正在尝试使用将主机等作为变量的 php 创建一个 db 类。我无法坚持初始化值，我不知道为什么。当我在将它们设置为公共的顶部初始化它们时，它工作正常，但是当我尝试在构造函数中初始化它们时它不起作用。

```
 class Database {

    public $dbHost;
    public $dbUser;
    public $dbPass;
    public $dbName;

    public $db;

    public function __construct($Host, $User, $Pass, $Name){ 
        $dbHost = $Host;
        $dbUser = $User;
        $dbPass = $Pass;
        $dbName = $Name;
        $this->dbConnect();
    }

    public function dbConnect(){
        echo $dbPass;
        $this->db = new mysqli($this->dbHost, $this->dbUser, $this->dbPass, $this->dbName);

        /* check connection */
        if (mysqli_connect_errno()){
            printf("Connect failed: %s\n", mysqli_connect_error());
            exit();
        }else{
            //echo 'connection made';
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T18:04:43.620

您没有在构造函数中正确初始化它们；尝试：

```
$this->dbHost = $Host; 
```

您当前正在做的是初始化一个名为 $dbHost 的局部变量，其作用域只是构造函数本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T18:05:30.250

您必须使用`$this`来访问类中的实例变量，例如`$this->dbHost = $Host;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T18:05:52.243

改变这个：

```
public function __construct($Host, $User, $Pass, $Name){ 
        $dbHost = $Host;
        $dbUser = $User;
        $dbPass = $Pass;
        $dbName = $Name;
        $this->dbConnect();
    } 
```

对此：

```
public function __construct($Host, $User, $Pass, $Name){ 
        $this->dbHost = $Host;
        $this->dbUser = $User;
        $this->dbPass = $Pass;
        $this->dbName = $Name;
        $this->dbConnect();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T18:06:30.037

尝试这个：

```
public function __construct($Host, $User, $Pass, $Name){ 
        $this->dbHost = $Host;
        $this->dbUser = $User;
        $this->dbPass = $Pass;
        $this->dbName = $Name;
        $this->dbConnect();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T18:05:52.960

用这个怎么样**->**

```
public function __construct($Host, $User, $Pass, $Name){ 
    $this->dbHost = $Host;
    $this->dbUser = $User;
    $this->dbPass = $Pass;
    $this->dbName = $Name;
    $this->dbConnect();
} 
```

# asp.net - 如何获取网站子目录以使用子域 url？

> ID：13036486
> 
> 赞同：0
> 
> 时间：2012-10-23T18:04:05.803
> 
> 标签：asp.net, iis-6, url-routing

我有一个 ASP.NET 4.0 网站 (mysite.com)，并将在 mysite.com/talk 上为项目添加新功能。关键是我需要使用talk.mysite.com 作为url 访问和使用/talk 子目录。如何在 .net 或 IIS 6.0 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:13:16.647

这里有几个选项。

1.  添加[URL 重写](http://msdn.microsoft.com/en-us/library/ms972974.aspx)规则 - 匹配传入的主机名`talk.mysite.com`并将其重写为`mysite.com/talk`.
2.  在 IIS 中创建一个新网站（指向 /talk 目录）并修改其绑定信息。设置“主机名”，使其仅接受`talk.mysite.com`.
3.  在 ASP.Net 应用程序级别执行重定向。`Application_BeginRequest`向 global.asax添加一个处理程序，如果 Request.Url.Host 为 则重定向`talk.mysite.com`。

最好的一个取决于您的方案的细节。我认为#1 可能是最简单的（最直接的），但在某些情况下，其他之一可能更适合。

# python - 在本地机器上运行 Python 脚本

> ID：13036490
> 
> 赞同：0
> 
> 时间：2012-10-23T18:04:34.960
> 
> 标签：python, mongodb

我正在尝试在针对 mongodb 的 python 中运行一个简单的 hello world 示例。我已经设置了 mongo、bottle 和 pymong，并且里面有以下脚本`C:\Python27\Scripts`：

```
import bottle
import pymongo

@bottle.route('/')
def index()
    from pymongo import Connection
    connection = Connection('localhost', 27017)

    db = connection.test

    names = db.names

    item = names.find_one()

    return '<b>Hello %s!</b>' % item['name']

bottle.run(host='localhost', port=8082)

-!-- hello.py   All L8  (Python) 
```

我想在本地运行它，然后我去了，`http://localhost:8082`但找不到找不到。如何运行该代码以在我的计算机上本地测试它，以便我可以通过浏览器测试代码。我正在运行 Windows 7 并安装了 WAMP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:06:11.960

1）`:`在函数名称后添加：

```
def index(): 
```

2) WAMP 不包括 MongoDB。您还需要[在本地安装 Mongodb](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-windows/)。

3）如果某些东西不起作用，那么您通常应该在控制台中查找错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:27:01.610

此脚本将独立运行（`bottle.run()`启动它自己的 Python 网络服务器），因此您不需要任何 WAMP - 只需运行此脚本。从命令行运行它，以便查看是否有任何错误。

您还需要运行 MongoDB 才能连接到它。如果您没有将 MongoDB 配置为在 Windows 启动后自动启动，您也可以从命令行运行它。

# asp.net-mvc - 安装包实体框架错误

> ID：13036496
> 
> 赞同：2
> 
> 时间：2012-10-23T18:05:15.783
> 
> 标签：asp.net-mvc, visual-studio-2010, entity-framework, nuget, class-library

我需要帮助。当我尝试在我的解决方案中将 Entity-framework 安装到我的类库时，出现错误：

*使用“8”参数调用“CreateInstanceFrom”的异常：“无法加载文件或程序集'file:///D:#work#web\DanceClubCMS\packages\EntityFramework.5.0.0\tools\EntityFramework.PowerShell。 dll' 或其依赖项之一。Не удается найти указанный файл。=> **（从俄语翻译 - 找不到文件）** 在 D:#work#web\DanceClubCMS\packages\EntityFramework.5.0.0\tools\install.ps1:10 char:34 + $appDomain.CreateInstanceFrom <<<< ( + CategoryInfo : NotSpecified: (:) [], MethodInvocationException + FullyQualifiedErrorId : DotNetMethodException*

请帮我。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T03:44:37.903

我找到了解决方案。问题出在我的项目 'file:///D:#work#web\' 字符 '#' 这是一个不好的做法......谢谢。

# c# - isoFileWriter.Write() 和 isoFileWriter.WriteLine() 之间的区别

> ID：13036497
> 
> 赞同：-1
> 
> 时间：2012-10-23T18:05:21.440
> 
> 标签：c#, .net, windows

当我们在 c# 中使用隔离存储时，我们有两个来自 isoFileWriter 的函数。`isoFileWriter.Write()`有人可以解释和之间的区别吗`isoFileWriter.WriteLine()`

我正在使用以下代码：

```
IsolatedStorageFile myspace = IsolatedStorageFile.GetUserStoreForApplication();
myspace.CreateDirectory("Emotions");
using (var isoFileStream = new IsolatedStorageFileStream("Emotions\\history.txt", FileMode.OpenOrCreate, myspace))
{
    using (var isoFileWriter = new StreamWriter(isoFileStream))
    {
        isoFileWriter.WriteLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:07:49.683

这是[StreamWriter.Write](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.write.aspx)和[StreamWriter.WriteLine](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.writeline.aspx)。

这两种方法的主要区别在于，`WriteLine`它将向文件写入一个新行，而`Write`将只写入数据（没有换行符）。

调用`isoFileWriter.WriteLine()`只会在文件中写入一个新行。如果您要`WriteLine`在传递参数时调用，即：`isoFileWriter.WriteLine("Foo")`，它将写入`Foo`后跟一个新行。 `isoFileWriter.Write("Foo")`, 另一方面，只写`Foo`没有换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:08:12.180

```
Write() vs WriteLine() 
```

典型的文本流。不同的是`WriteLine`在文本之后写了一个新行

```
iso.Write('a'); 
iso.Write('b'); 
```

将输出`ab`

```
iso.WriteLine('a'); //puts a new line after a
iso.Write('b'); //the next output will be on the same line as b 
```

将输出

```
a
b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T18:46:29.953

该类`System.IO.StreamWriter`用于以特定编码将字符写入流。我认为最好使用类`StreamWriter`将文本附加或写入特定文件并稍后控制编写器（类）。

## 结构

* * *

考虑使用以下示例创建`StreamWriter`被调用`_TextWriter`

```
StreamWriter _TextWriter = new StreamWriter(Path) 
```

另一个`StreamWriter`调用`_TextWriter2`使用以下示例创建

```
StreamWriter _TextWriter2 = new StreamWriter(Path, true); 
```

如果你注意到了，我们的`StreamWriter`被调用`_TextWriter2`有两个参数：`Path`和一个布尔值`true`

在这里使用`true`只是告诉类它将用于将字符**附加**到该类可能创建或已经存在的文件中。否则，如果您将此留空或插入`false`，则该文件将被覆盖。

**这是一个例子**

考虑有一个`Path`包含两行内容的文件名

> 这是第一行
> 这是第二行

通过使用以下代码，您的文档 ( `Path`)中将只有一行，即**Hello**

```
_TextWriter.WriteLine("Hello"); 
```

通过使用以下代码，您将在文档 ( ) 中有三行`Path`代表以下内容：

> 这是第一行
> 这是第二行
> 你好

```
_TextWriter2.WriteLine("Hello"); 
```

* * *

`Write()`现在让我们转到您的问题，和之间有什么区别`WriteLine()`

## 写（）和写线（）

* * *

答案很简单，如果您设置为布尔值，则使用该方法`Write()`会将字符写入特定流的最后一个可用行，但如果您将布尔值留空或将其设置为，则会覆盖特定文件的内容。`true``append``append``false`

**这是一个例子**

**考虑以下**

*   你有一个文件名`D:\MyDocument.txt`
*   该文件包含以下内容

> 这是我的第一行
> 这是我的第二行

您有以下代码：

```
StreamWriter _TextWriter = new StreamWriter(@"D:\MyDocument.txt");
_TextWriter.Write("Hello");  
_TextWriter.Close(); //Save and Close the StreamWriter 
```

你期望会发生什么？文件内容`D:\MyDocument.txt`会变成如下

> 你好

这是因为您没有在上面的代码中指定是否要追加，并且因为 append 的默认值为`false`，`StreamWriter`不会追加到文件中，因此文件将被新内容覆盖。

**另一个例子**

**考虑以下**

*   你有一个文件名`D:\MyDocument.txt`
*   该文件包含以下内容

> 这是我的第一行
> 这是我的第二行

您有以下代码：

```
StreamWriter _TextWriter = new StreamWriter(@"D:\MyDocument.txt", true);
_TextWriter.Write("Hello");  
_TextWriter.Close(); //Save and Close the StreamWriter 
```

你期望会发生什么？

文件内容`D:\MyDocument.txt`会变成如下

> 这是我的第一行
> 这是我的第二行你好

该文件没有被单词覆盖，`Hello`因为您已将布尔值设置`append`为`true`但您注意到了吗？文件的第二行已更改为

> 这是我的第一行
> **这是我的第二行你好**

这意味着`Hello`附加到可用的最后一行，这是因为您使用`Write()`了它将文本附加到可用的最后一行。

## 概括

* * *

因此，如果您不希望这种情况发生，您可以使用`WriteLine()`which 将首先在文件末尾创建一行。然后，使用您指定的字符**附加或覆盖文件。**

# java - Java Mac OS X 实现类似 mac 的首选项对话框

> ID：13036499
> 
> 赞同：1
> 
> 时间：2012-10-23T18:05:22.993
> 
> 标签：java, macos, swing

我对 Java 有点陌生，对 OS X 编程也很陌生。我已经完成了一些让 Java 应用程序看起来像原生 Mac 应用程序的细节。现在我正在努力实现一个看起来像“mac”的首选项对话框。

我正在研究 Mountain Lion 和 Java SE 6。是否有一个简单的解决方案，或者它只是使用 JDialog 和 JToolbar 等。阿尔。？

谢谢蒂姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T20:29:57.597

在这方面有几点值得注意：

*   不要覆盖默认的[外观和感觉](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/index.html)，`com.apple.laf.AquaLookAndFeel`.

*   [请按照此处](https://stackoverflow.com/a/8956715/230513)的建议创建 Mac 应用程序包。

*   请考虑诸如[*Mac Widgets for Java*](http://code.google.com/p/macwidgets/)之类的库。

*   使用`java.util.Preferences`or `javax.jnlp.BasicService`，如[这里](https://stackoverflow.com/a/11724866/230513)建议的那样。

# .htaccess - 使 php.ini 文件在 1and1 主机上递归

> ID：13036500
> 
> 赞同：3
> 
> 时间：2012-10-23T18:05:28.377
> 
> 标签：.htaccess, settings, php

我的网站托管在 1and1 服务器上，我想调整 php.ini 文件中的一些设置。我可以创建文件并且它被正确解释但仅适用于直接目录而不适用于任何子目录。我希望不必将 php.ini 文件复制到每个子目录中。我从谷歌搜索中看到的唯一方法是将以下内容添加到 .htaccess 文件中

```
suPHP_ConfigPath /path/to/htdocs/php.ini 
```

我有一个 .htaccess 文件，并且其中的不同指令被正确解释，但是当我添加该行时，它会导致 500 Internal Server 错误。

谁能建议我可以做些什么，以便在所有子目录中使用 php.ini 设置，而不必将 php.ini 文件复制到所有子目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:12:15.050

您可以在每个文件夹中创建指向主 php.ini 的软链接。1and1 不允许在其 .htaccess 文件中使用许多指令。1and1 的[支持网站有更多信息](http://faq.1and1.com/scripting_languages_supported/php/8.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:26:57.657

suPHP 在 .htaccess PerDir 上下文中进行评估。如果您想为不同的目录使用不同的 ini 文件，那么您需要在每个相关目录中使用单独的 .htaccess。默认情况下，Apache 将使用它可以找到的请求 URI 路径上的最低 .htaccess。或者，如果您对文件名有系统的命名约定，则禁止将不同的 suPHP 指令放在不同的指令中。

# asp.net - 在没有 FormsAuthentication.Decrypt 方法的情况下解密 ASP.NET Auth Cookie 值

> ID：13036503
> 
> 赞同：0
> 
> 时间：2012-10-23T18:05:35.097
> 
> 标签：asp.net, cryptography, aes

我尝试从用 AES 编写的表单身份验证中读取/解密身份验证 cookie 的值，但没有在 web.config 中设置 MachineKey，因为我自己无法修改此配置。

因此我不能使用 FormsAuthentication.Decrypt 因为它在内部使用机器密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:56:29.010

您没有指定 ASP.NET 版本，但在 2.0 中，我*认为*仍在 4.0 中，您可以覆盖 web.config 中的 machineKey。

查看“Web Farm 部署注意事项”部分。 [http://msdn.microsoft.com/en-us/library/ff649308.aspx#paght000007_webfarmdeploymentconsiderations](http://msdn.microsoft.com/en-us/library/ff649308.aspx#paght000007_webfarmdeploymentconsiderations)

您可以使用此工具在线生成机器密钥：http: [//aspnetresources.com/tools/machineKey](http://aspnetresources.com/tools/machineKey)

# javascript - 在下一次迭代之前等待ajax成功

> ID：13036504
> 
> 赞同：2
> 
> 时间：2012-10-23T18:05:40.207
> 
> 标签：javascript, jquery, ajax, arrays, each

我必须对特定数组执行 ajax 请求并等待服务器响应，然后再进行循环中的下一次迭代。

我目前正在同时执行我的迭代。确保成功后如何进行？

感谢您的任何建议。

```
myArray.each(function(val, index) {
    new Ajax.Request(myUrl + val, {
        onSuccess: function() {
               responseFromServer();
        }
    });
    void(0);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:13:30.167

只有在 AJAX 请求完成后，您才需要进行下一次迭代。我将使用 jQuery 来展示一个示例；

```
function sendRequests(requests) {
    var value = requests.shift();
    $.ajax(myUrl + value).done(function(data){
        if (requests.length > 0) {
            sendRequests(requests);
        }
    });    
}

sendRequests( [1,2,3,4] ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T18:12:03.070

可以这样试试

```
function getItem(url, array, index)
{
   new Ajax.Request(url + array[index])
   {
      onSuccess : function()
      {
        responseFromServer(); //assuming this handles the server response
        if (index < array.length)
           getItem(url, array, ++index);
      }
   }
} 
```

然后只需调用它

```
getItem(myUrl, myrray, 0); 
```

基本上，您希望回调在数组中的下一个项目上启动下一个 ajaxrequest

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:12:20.993

尝试这样的事情。基本上，不是遍历所有元素，而是从数组中取出第一项，然后发出 AJAX 请求。然后，当您的请求成功完成时，您调用下一项。

请注意，在此示例中，原始数组已发生突变，在您的情况下可能会也可能不会。

```
function invokeAll(myArray)
{
    var val = myArray.shift(); //get the next item to be processed
    if (!val)
        return;
    new Ajax.Request(myUrl + val, {
        onSuccess: function() {
               responseFromServer();
               invokeAll(myArray); //got a successful response, start the next one
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T18:17:47.540

您可以为此作业编写一个类，它的 processNext() 函数将处理数组中的所有项目

```
var arrayProcessor = {
        values: [],
        process: function(arr) {
           arrayProcessor.values = arr;
           arrayProcessor.processNext();  
        },
        processNext: function(){
            if (arrayProcessor.values.length > 0) {
              new Ajax.Request(myUrl + arrayProcessor.values.shift(), {
                  onSuccess: function() {
                       responseFromServer();
                       arrayProcessor.processNext();  
                  }
              });
           }
        },

    } 
```

# ado.net - ADO.NET 请求现有的连接字符串

> ID：13036510
> 
> 赞同：0
> 
> 时间：2012-10-23T18:05:53.697
> 
> 标签：ado.net, visual-studio-2012, sql-server-2012, entity-framework-5

我在我的 WCF 服务项目中创建了一个 ADO.NET 对象，但是当我尝试连接它时，我收到了这个错误：

> 在应用程序配置文件中找不到名为“FileEntities”的连接字符串。

这是我的代码：

> ```
>  public File GetFile()
>     {
>         using (FileEntities ctx = new FileEntities())
>         {
>             File aFile = (from f in ctx.Files
>                           where f.ID == 5
>                           select f).FirstOrDefault();       // No connection string named 'FileEntities' could be found in the 
> ```
> 
> 应用程序配置文件。返回一个文件；} }

这是我的服务项目的 App.Config：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="FileEntities" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=HOOVERS-PC;initial catalog=Interview_MicahHoover;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

我试过删除模型中的“name=”前缀。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:20:34.553

啊，问题是我的服务项目只是建立了一个库。使用该库的项目中没有连接字符串。我将连接字符串添加到该项目并且它（大部分）有效。

保持这样的直截了当是不将事情分解成很多项目的原因，但是 WCF O'Reilly 的书推荐它。

# php - 如何自动使用超时

> ID：13036513
> 
> 赞同：2
> 
> 时间：2012-10-23T18:06:08.563
> 
> 标签：php

当用户退出网页时，我需要执行一个操作，我想我会使用超时来这样做，它可以工作，但只有当我刷新/重新加载页面时，这不是我想要的，我需要它工作自动，如果用户处于非活动状态，比如说 5 分钟，我需要一个属于该用户的某个文件来销毁。我首先进行了以下测试以检查超时是否有效：

```
<?php
session_start();
//set timeout
$inactive=60;
 //check to see if timeout is set
if(isset($_SESSION['timeout'])){
 $session_life= time() - $_SESSION['timeout'];
 if($session_life > $inactive)
{session_destroy();
  echo "new message<br>";
}
}
$_SESSION['timeout']= time();
 echo "after one minute,a new message should be added.";
  ?> 
```

它只有在我重新加载/刷新页面时才有效，我如何让它在所述时间范围内不活动后自动执行命令？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:42:04.030

我认为最好的方法是设置一个每 5 分钟运行一次并删除文件的 CronJob。

也许使用[session_set_save_handler](http://php.net/session_set_save_handler)将会话存储在 db 表中，并在上次活动时检查 cronjob。

您要删除的文件是否连接到用户或会话？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:14:07.513

我不确定我是否给出了正确的答案，但是如果您询问在给定时间后自动使会话过期，您为什么不考虑设置

`session.gc_maxlifetime`

在您的`php.ini`文件中，我猜这是一个更有效的解决方案，如果上下文错误，请原谅。

如果您想删除文件系统中的某些数据，请使用 cron 作业或守护程序，如果您不希望从客户端回调来启动它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T18:08:19.530

使用 javascript 的[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)命令运行您的命令并使用该命令刷新页面。

# sql - 为什么交叉应用会使查询变慢？

> ID：13036520
> 
> 赞同：4
> 
> 时间：2012-10-23T18:06:30.437
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个查询需要大约 11 秒才能运行一个日期。我想多天运行相同的查询。换句话说，我希望能够返回多天的快照。这是我的原始查询：

```
SELECT 
    COUNT(*) AS 'Number of Cars',
    d.ManufacturerName AS 'Make',
    d.Name AS 'Model', 
    c.name AS 'Car Class'
FROM CarRating a 
    INNER JOIN OwnedCar b ON a.OwnedCarID = b.OwnedCarID
    INNER JOIN CarClass c ON a.CarClassID = c.CarClassID
    INNER JOIN BaseCar d ON b.BaseCarID = d.BaseCarID

WHERE 
    @myDate < a.ExpiredWhen AND @myDate  >= a.EffectiveWhen 
GROUP BY 
    d.Name, c.name,d.ManufacturerName 
```

就像我提到的那样，查询需要 11 秒。为了对多个日期运行此查询，我使用日期表并将其交叉应用于上述查询：

```
SELECT [DATE], b.* FROM DimDate 
CROSS APPLY
    (SELECT 
        COUNT(*) AS 'Number of Cars',
        d.ManufacturerName AS 'Make',
        d.Name AS 'Model', 
        c.name AS 'Car Class'
    FROM CarRating a 
        INNER JOIN OwnedCar b ON a.OwnedCarID = b.OwnedCarID
        INNER JOIN CarClass c ON a.CarClassID = c.CarClassID
        INNER JOIN BaseCar d ON b.BaseCarID = d.BaseCarID

    WHERE 
    dimDate.Date < a.ExpiredWhen AND dimDate.Date >= a.EffectiveWhen    
    GROUP BY 
    d.Name, c.name,d.ManufacturerName) b

 WHERE DimDate.Date between @StartDate and @EndDate 
```

这个查询即使是一天也需要 49 秒。为什么这么慢？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:34:40.243

您的查询速度较慢，因为它正在加入维度表，大大增加了正在处理的数据量。您可以通过确保您具有适当的索引来修复此查询：

*   拥有汽车（OwnedCarId）
*   汽车类（汽车类 ID）
*   BaseCare(BaseCareID)
*   CarRating(EffectiveWhen, ExpiredWhen)

如果这没有帮助，那么您将需要重新考虑查询。有另一种写法，但索引可能更简单地解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:53:07.277

它真的需要交叉应用/子查询吗？似乎它正在以这种方式做更多的工作。不能是左连接吗？

```
SELECT 
    dimDate.[Date]
    COUNT(1) AS 'Number of Cars',
    d.ManufacturerName AS 'Make',
    d.Name AS 'Model', 
    c.name AS 'Car Class'
FROM DimDate
LEFT OUTER JOIN CarRating a ON dimDate.[Date] < a.ExpiredWhen AND dimDate.[Date] >= a.EffectiveWhen 
LEFT OUTER JOIN OwnedCar b ON a.OwnedCarID = b.OwnedCarID
LEFT OUTER JOIN CarClass c ON a.CarClassID = c.CarClassID
LEFT OUTER JOIN BaseCar d ON b.BaseCarID = d.BaseCarID
GROUP BY dimDate.[Date], d.Name, c.name,d.ManufacturerName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:13:14.477

您可以尝试如下修改您的查询，然后分享结果（如果您观察到任何改进）

```
SELECT [DATE], b.* FROM DimDate 
CROSS APPLY
    (SELECT 
        **COUNT(1)** AS 'Number of Cars',
        d.ManufacturerName AS 'Make',
        d.Name AS 'Model', 
        c.name AS 'Car Class'
    FROM CarRating a 
        INNER JOIN OwnedCar b ON a.OwnedCarID = b.OwnedCarID
        **AND  dimDate.Date < a.ExpiredWhen AND dimDate.Date >= a.EffectiveWhen**   
        INNER JOIN CarClass c ON a.CarClassID = c.CarClassID
        INNER JOIN BaseCar d ON b.BaseCarID = d.BaseCarID

    GROUP BY 
    d.Name, c.name,d.ManufacturerName) b

 WHERE DimDate.Date between @StartDate and @EndDate 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T18:35:02.510

我对`CROSS APPLY`自己不熟悉，但你不能`ExpiredWhen`按范围添加和分组，如下所示：

```
SELECT
     a.ExpiredWhen AS dimDate
   , COUNT(*) AS 'Number of Cars'
   , d.ManufacturerName AS 'Make'
   , d.Name AS 'Model'
   , c.name AS 'Car Class' 
FROM CarRating a
INNER JOIN OwnedCar b ON a.OwnedCarID = b.OwnedCarID
INNER JOIN CarClass c ON a.CarClassID = c.CarClassID
INNER JOIN BaseCar d ON b.BaseCarID = d.BaseCarID  
WHERE a.ExpiredWhen between @StartDate AND @EndDate
GROUP BY
   a.ExpiredWhen, d.Name, c.name, d.ManufacturerName 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-27T19:42:36.850

当在医疗数据集中的大表上使用时，我在 MS SQL 服务器中使用 CROSS APPLY 时也有类似的体验。我说的是添加 CROSS APPLY 后执行时间增加了几个数量级。

经过一番探索，我发现使用 PIVOT 非常有效，将查询从 > 18 小时缩短到 2 分钟以下（！）所以我想我会分享这个 2c 技巧。乔。

# php - Doctrine 2中没有共享自动增量ID的类表继承？

> ID：13036521
> 
> 赞同：0
> 
> 时间：2012-10-23T18:06:31.357
> 
> 标签：php, doctrine, doctrine-orm

是否有可能在 Doctrine 2 中有一个不共享自动增量的 CTI？例如，我有一个`Pet`实体和两个子类，`Cat`并且`Dog`. 但是，如果我创建两只狗和一只猫，两个实体的下一个 ID 将是 4。我想要`Dog`并`Cat`拥有它自己的自动增量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:10:02.360

无论教义如何，我都不知道这将如何工作。

如果您不知道期望哪个实体并且只有 id 怎么办？例如获取 id 为 4 的宠物？

您不能按基类查询，恕我直言，这破坏了继承的目的。

使用 CTI，您可以获得单独的表，但它仍然只是简单的继承，CTI 只是一个对象关系映射 shema。

从对象模型的角度来看，拥有两个具有相同 id 的相同类型的实体是没有意义的。

因此，您可以坚持现有的，也可以完全摆脱继承，将 Cat 和 Dog 作为两个独立的实体进行管理。我建议你坚持第一个选项。

此外，对于 CTI，Cat 和 Dog 上没有自动增量，只有 Pet 上。子表只是从父表复制 ID，而不管 ID 是如何生成的。

# render - 使用 vars 渲染 Twig

> ID：13036523
> 
> 赞同：1
> 
> 时间：2012-10-23T18:06:34.647
> 
> 标签：render, twig

我正在使用 Silex，并且需要根据加载位置来更改 Twig 文件。

我的第一个想法是检查 url，但不幸的是，这会返回渲染的 Twig 位置的位置，而不是预期的父 url。

```
{{ path(app.request.attributes.get('_route')) }} 
```

另一种尝试是通过渲染传递一些变量，但是我不确定如何从 Twig 中执行此操作（以及是否可能）。

```
{{ render(path('cart')) }} 
```

有人可以帮助我解决问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:49:09.200

这确实是silex core的问题。我已经提交了一个[拉取请求](https://github.com/fabpot/Silex/pull/524)，该请求引入了一个`renderRoute`可以解决问题的新树枝功能。希望它会尽快合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:05:04.697

好吧，我没有完全理解你在问什么，但是如果你想在渲染方法中传递变量，你可以这样做：

```
{% render "ProjectTesteBundle::ControllerName::actionName" with { 'variableNameToPass' : variableValue } %} 
```

如果您想在树枝模板中获取路线名称，您可以执行以下操作：

```
{% set routeName = app.request.attributes.get('_route') %} 
```

# jquery - IE9 中的 jquery 和 css 标题滑块不起作用

> ID：13036525
> 
> 赞同：1
> 
> 时间：2012-10-23T18:06:42.697
> 
> 标签：jquery, internet-explorer, css, slider, css-transitions

嗨，我正在尝试实现悬停覆盖效果，使用基本的 div ul li a img 列出对象元素，当悬停在特定图像上时，我只想要一个带有一些白色文本标题的黑色覆盖层。

到目前为止，我已经让 JQuery 和 CSS 标题滑块功能在现代浏览器甚至 IE8 以及以前的版本中正常运行，但我似乎无法让标题集成以在 IE9 中正常运行。文本标题覆盖部分显示（如预期的那样），但不会在悬停事件上向上滑动。

下面是一个 JSFiddle 示例，说明它如何在现代浏览器中正常工作：

[http://jsfiddle.net/RossB/THS2J/](http://jsfiddle.net/RossB/THS2J/)

任何人都可以阐明我缺少的任何技巧吗？

这是我的 HTML 代码的一部分：

```
<ul>
<div class="featurebox holder">
     <li><img src="images/web_page/pink.jpg" alt="events" /></li>
     <div class="cover featuretext">
        <h3 class="date">Day 24th Month</h3>
        <p>Lorem ipsum dolor sit amet,
        consectetur asipisicing elit, sed do
        eiusmod tempor incididunt...<a href="http://webpage.net/events/" target="_BLANK">Read More></a></p>
      </div>
</div>
</ul> 
```

这是我正在应用的 CSS：

```
.featurebox h3{ 
        color:#ffffff;
        margin-top:0px; 
        margin-bottom:0px; 
        padding-left:5px; 
        font:11pt;  
        font-weight: bold;  
    }

.featurebox{ 
        color:#ffffff;
        width: 185px; 
        height: 118px;  
        float:left; 
        /*border: solid 2px #8399AF;*/ 
        overflow: hidden;
        position: relative; 
    }

/*caption para text*/               
.featurebox p{ 
        margin-top:0px;
        padding-left: 5px; 
        padding-right:5px; 
    }

/*caption slider */             
.featuretext{ 
        top:99px;
        float: left; 
        position: absolute; 
        background: #000; 
        height: 100px; 
        width: 100%; 
        opacity: .8; 
        /* For IE 5-7 */
        filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=80);
        /* For IE 8 */
        -MS-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";
    }

.holder .featuretext {
        top: 220;
        left: 0;
    }

.featurebox p a  {
        float: right;
        color:#FFFF00;
    } 
```

最后是 JQuery：

```
<script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.1.js"></script>
<script type="text/javascript">

$(document).ready(function(){   
//Caption Sliding (Partially Hidden to Visible)
    $('.featurebox.holder').hover(function(){
    $(".cover", this).stop().animate({top:'32px'},{queue:false,duration:160});
    }, function() {
        $(".cover", this).stop().animate({top:'100px'},{queue:false,duration:160});
    });
});
</script> 
```

任何帮助将非常感激。谢谢

# java - Eclipse RCP 中的 Ajax

> ID：13036527
> 
> 赞同：0
> 
> 时间：2012-10-23T18:06:55.007
> 
> 标签：java, ajax, eclipse, rcp

有没有办法在 Eclipse RCP 应用程序中使用任何类似 AJAX 的组件，但无需迁移到 RAP 平台？如果迁移是唯一的方法，是否有任何工具/向导可以帮助将应用程序从 RCP 转换为 RAP 平台？

任何指针都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:48:39.753

So you want a thick client or thin client (web browser)? or you want to migrate UI components from thin client to thick client (RCP)? Please clarify.

# c#-4.0 - 代理模式找不到合适的方法来覆盖？帮助我不确定刚刚出了什么问题

> ID：13036528
> 
> 赞同：2
> 
> 时间：2012-10-23T18:06:59.380
> 
> 标签：c#-4.0, proxy-pattern

这都是形式...

namespace Proxy_Pattern { public partial class Form1 : Form { public Form1() { InitializeComponent(); } 双银行金额 = 1000.00;

```
 private void btnCheck_Click(object sender, EventArgs e)
    {
        double amount;
        amount = double.Parse(txtAmount.Text);

        CheckProxy cp =new CheckProxy();
        cp.CheckTransactionRequest(amount);
        lbltotal.Text = bankAmount.ToString();
    }

    private void btnCreditCard_Click(object sender, EventArgs e)
    {

    }
}

abstract class BankSubject
{

    public abstract void CreditTransactionRequest(double amount);
    public abstract void CheckTransactionRequest(double amount);
}

class RealBankSubject : BankSubject
{
    double bank;
    public RealBankSubject(double m_bacc)

    {
        bank = m_bacc;
    }

    public override void CreditTransactionRequest(double num)
    {
        bank -= num;
    }

    public override void CheckTransactionRequest(double num)
    {
        bank += num;
    }
} 
```

不实现继承的抽象成员....但是为什么呢？类 CreditCardProxy : BankSubject { RealBankSubject realSubject; 双倍金额；

```
 public CreditCardProxy (double m_bacc) 

    {
        amount = m_bacc ;
    } 
```

没有合适的方法来覆盖？...这是怎么回事？我这里有方法吗？

```
 public override void CreditTransactionRequest()
    {

         if (realSubject == null)
        {
            realSubject = new RealBankSubject(amount);
        }

        realSubject.CreditTransactionRequest(amount);
    }

    public override void CheckTransactionRequest()
    {

    }
}

class CheckProxy : BankSubject
{
    RealBankSubject realSubject;
    double amount;

    public override void CreditTransactionRequest()
    { 

    }

    public override void CheckTransactionRequest()
    {

       if (realSubject == null)
        {
            realSubject = new RealBankSubject(amount);
        }

        realSubject.CheckTransactionRequest(amount);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:30:23.043

`CreditTransactionRequest`in`CreditCardProxy`不接受任何参数，但`CreditTransactionRequest`in接受`BankSubject`。这就是为什么您不能覆盖签名不匹配的方法的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:31:25.440

在您的代理中，您没有将金额指定为方法的参数：

```
public override void CreditTransactionRequest(); 
```

所以它不能覆盖

```
public abstract void CreditTransactionRequest(double amount); 
```

因为方法签名不匹配

# c# - 创建一个类似 nhibernate 的查询构建器

> ID：13036533
> 
> 赞同：2
> 
> 时间：2012-10-23T18:07:12.120
> 
> 标签：c#, expression, func

我正在尝试创建类似于 nhibernate 流利语法的东西。

我有一个名为 Query 的类（其中 t 是我的 sql 表的类表示），我想添加一个 Where 表达式，以便它可以在内部生成要执行的 sql 字符串。我只是为了学习目的而这样做，这就是为什么我没有使用实际的 ORM。我不需要任何复杂的东西，只是想了解如何使用 Func 或 Expression 构建这样的东西的基础知识。

任何帮助将不胜感激。谢谢！！

我基本上想打电话：

```
var query = new Query<MyDomainClass>().Where(x => x.Id == 1); 
```

并让它创建一个查询`"SELECT * FROM MyDomainClass WHERE Id = 1"`：

我不确定如何让对象的 where 部分工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:12:20.713

您需要解析表达式树，请参阅[此](http://weblogs.asp.net/mehfuzh/archive/2007/10/04/writing-custom-linq-provider.aspx)链接以进行快速介绍。

# jquery - IE8 'attr(...)' 为 null 或不是对象

> ID：13036534
> 
> 赞同：0
> 
> 时间：2012-10-23T18:07:16.720
> 
> 标签：jquery, placeholder, attr

我正在尝试让 jquery IE 占位符修复工作。它在 IE9 中运行良好，但在 IE8 中我不断收到警报...

> 'attr(...)' 为 null 或不是对象

这是我正在使用的代码。难道我做错了什么？

```
<!--[if lte IE 9 ]>
    <script>
        // IE Placeholder Fix
        $(function() {
            if ($('input[placeholder]').attr('placeholder').val() != '') {
                var ph = $('input[placeholder]').attr('placeholder');
                $('input[placeholder]').blur();
                if ($('input[placeholder]').attr('value').val() == 0) {
                    $('input[placeholder]').attr('value', ph);
                    $('input[placeholder]').css('color','#999999');
                };
                $('input[placeholder]').click(
                    function() {
                        $(this).css('color','#000000');
                        if ($(this).attr('value') == ph) {
                            $(this).attr('value','');
                    }
                });
            }
        });
    </script>
<![endif]--> 
```

**更新：**

使用下面的评论我想出了......

```
<!--[if lte IE 9 ]>
    <script>
        // IE Placeholder Fix
        $(function() {
            if ($('input[placeholder]').length != 0) {
                var ph = $('input[placeholder]').attr('placeholder');
                $('input[placeholder]').blur();
                if ($('input[placeholder]').attr('value') == '') {
                    $('input[placeholder]').attr('value', ph);
                    $('input[placeholder]').css('color','#999999');
                };
                $('input[placeholder]').click(
                    function() {
                        $(this).css('color','#000000');
                        if ($(this).attr('value') == ph) {
                            $(this).attr('value','');
                    }
                });
            }
        });
    </script>
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:24:25.817

在空对象上调用方法或属性将导致您遇到的错误。如果您不确定对象是否已定义，请在引用任何子对象之前对其进行测试。

# oracle - Oracle 用户定义对象 - 自引用类型的集合

> ID：13036538
> 
> 赞同：2
> 
> 时间：2012-10-23T18:07:33.670
> 
> 标签：oracle, collections, adt, user-defined-types, self-reference

> **可能重复：**
> [如何在 oracle11g 中定义引用该类型集合的类型？](https://stackoverflow.com/questions/1054896/how-can-i-define-a-type-in-oracle11g-that-references-a-collection-of-that-type)

我有一个场景，我必须创建一个用户定义的类型 A，它具有类型 A 的集合。我尝试执行以下操作但没有帮助：

```
create or replace type sku_t;

create or replace type skulink_t as table of sku_t;

create or replace type sku_t as object(skuId varchar(12), display_name varchar(100), bundlnks ref skulink_t ); 
```

这会使对象 sku_t 和 skulink_t 处于不完整状态，编译器会抱怨要完成它们。我不知道该怎么做。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:04:49.820

您需要使用 REF 的嵌套表，而不是嵌套表的 REF。

```
create or replace type sku_t;
create or replace type skulink_t as table of ref sku_t;
create or replace type sku_t as object(skuId varchar(12), display_name varchar(100), bundlnks skulink_t ); 
```

如何使用它的示例：

```
create table sku_table of sku_t nested table bundlnks store as outer_nt;

insert into sku_table values(sku_t('sku1', 'sku1', null));
insert into sku_table values(sku_t('sku2', 'sku2', null));
insert into sku_table
values(sku_t('sku3', 'sku3',
    skulink_t
    (
        (select ref(s) from sku_table s where s.skuId = 'sku1'),
        (select ref(s) from sku_table s where s.skuId = 'sku2')
    )));

commit;

select deref(b.column_value).skuid skuid
from sku_table, table(bundlnks) b where skuid = 'sku3';

skuid
-----
sku1
sku2 
```

但是一个常规的分层表可能会在 99.99% 的情况下工作得更好。

# php - 年份变化时时差不起作用

> ID：13036540
> 
> 赞同：0
> 
> 时间：2012-10-23T18:07:42.323
> 
> 标签：php, ajax

我有一个正在运行的脚本，运行良好但不正常。该函数假设计算两个日期/时间之间的时间差。

第一个日期是当前日期和时间（日期+小时：分钟），第二个日期由用户选择。

目的是在当前日期/时间在用户选择的日期后 24 小时内显示错误。即，如果今天是 23/20/2012 16:00 并且用户选择 24/10/2012 15:00（这意味着它在 24 小时内）但是如果用户选择 26/10/2012 19:00 那么它已经过去了 24 小时。

现在这工作正常，但是当日期更改其年份时（当用户选择 2012 年 12 月 31 日之后的任何日期时......它假设它仍然在 24 小时内......我很困惑这是怎么发生的......谁能阐明我所知道的做错了吗？

```
 $dt = $_GET['dt']; $tm = $_GET['tm']; 

    // Current Date an time (Hrs & Mins)
$date1 = date("Y-m-d H:i");

    // Chosen Date/Time

$date2 = date("Y-m-d", strtotime( "$dt" ) );
$diff = strtotime($date2." $tm") + - strtotime($date1);
if($diff/3600 < 24)
    echo "0";
else
    echo "1"; 
```

以下是进行调用的相应 Ajax

```
function getAjaxTime()
{

xmlHttp=GetXmlHttpObject();
if (xmlHttp==null)
  {
  alert ("Your browser does not support AJAX!");
  return;
  } 
dt = document.frm.arrival_date.value;
tm = document.frm.arrival_hour.value +':'+document.frm.arrival_min.value;
xmlHttp.open("GET","<?php echo $base_dir;?>/admin/get/timediff.php?dt="+encodeURI(dt)+"&tm="+encodeURI(tm),false);
xmlHttp.send(null);
return xmlHttp.responseText; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:29:31.540

我会尝试这样的事情：

```
function isDateWithin24Hours($targetDate, $currentDate = 'now') {   
    $targetDate = new DateTime($targetDate);
    $currentDate = new DateTime($currentDate);
    $interval = $targetDate->diff($currentDate);
    //%a = total number of days
    if ($interval->format('%a') > 1) {
        return (int) false;
    }

    return (int) true;
}

echo isDateWithin24Hours('2012-10-24 19:00:00');

echo isDateWithin24Hours('2012-10-24 19:00:00', '2012-10-23 18:00:00'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:30:09.007

根据 php 手册 - h​​ttp: [//us3.php.net/manual/en/datetime.formats.date.php](http://us3.php.net/manual/en/datetime.formats.date.php) - 您的日期不是有效格式：

```
24/10/2013   // with / as deliminators 
```

这些将是有效的

```
24-10-2013   // with - as deliminators
10/24/2013   // with / as deliminators and as m/d/Y 
```

* * *

更新-

此外，以下格式在`strtotime`& `date`-中无效

```
Thursday, 10 May, 2012 00:30 
```

但这将是有效的-

```
Thursday, May 10, 2012 00:30 
```

* * *

更新#2

实际上，一旦您`$_GET['dt']`采用有效的 php 格式，您就可以将代码简化为-

```
$dt = $_GET['dt']; $tm = $_GET['tm']; 

// Current Date an time (Hrs & Mins)
$date1 = date("Y-m-d H:i");

$diff = strtotime($dt." ".$tm) + - strtotime($date1);
if($diff/3600 < 24)
  echo "0";
  else
  echo "1"; 
```

# apache - .htaccess 将类似文件夹的 url 重写到现有的 html 页面

> ID：13036542
> 
> 赞同：0
> 
> 时间：2012-10-23T18:07:47.237
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我的本地项目的根是**localhost/website**

我使用以下内容创建了文件 localhost/website/.htaccess：

```
RewriteEngine On
RewriteRule ^content/(.*)$ content/$1.html [L] 
```

我到底想要实现什么： **localhost/website/main** -> **localhost/website/content/main.html** 其中**localhost/website/content/main.html**确实存在。

我尝试了几条规则，但没有一条对我有用。不知何故，我觉得我错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:36:54.747

以下是诀窍

```
RewriteEngine On

RewriteCond %{REQUEST_URI} !^.*content/[^/]*\.html$
RewriteRule ^(.*)$ content/$1\.html [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:03:54.953

如果你想重定向`/main`到`/content/main`你必须`content/`从第一个参数中省略。

# javascript - 如何简化这个 jquery 脚本？

> ID：13036544
> 
> 赞同：0
> 
> 时间：2012-10-23T18:07:51.963
> 
> 标签：javascript, jquery, asp.net, refactoring

我有一个 ASP.NET Web 表单项目，我正在尝试在其中实现自动选项卡。我是 jquery 的新手，但我在网上找到了一个代码片段来执行自动选项卡，我想用它来自动标记多个组的文本框。

例如：

```
Textbox1 -> Textbox2 -> Textbox3

Textbox4 -> Textbox5 -> Textbox6 
```

但不是：

```
Textbox3 -> Textbox4 
```

希望这是有道理的。无论如何，我有以下代码：

```
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.5.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $(".autotab").keyup(function () {
            if ($(this).attr("maxlength") == $(this).val().length) {
                var index = $(".autotab").index(this);
                var item = $($(".autotab")[++index]);
                if (item.length > 0)
                    item.focus();
            }
        });
        $(".autotab2").keyup(function () {
            if ($(this).attr("maxlength") == $(this).val().length) {
                var index = $(".autotab2").index(this);
                var item = $($(".autotab2")[++index]);
                if (item.length > 0)
                    item.focus();
            }
        });
    });
</script>

<input name="tbOne" type="text" maxlength="3" id="tbOne" class="autotab" />
<input name="tbTwo" type="text" maxlength="3" id="tbTwo" class="autotab" />
<input name="tbThree" type="text" maxlength="4" id="tbThree" class="autotab" />

<input name="tbFour" type="text" maxlength="3" id="tbFour" class="autotab2" />
<input name="tbFive" type="text" maxlength="3" id="tbFive" class="autotab2" />
<input name="tbSix" type="text" maxlength="4" id="tbSix" class="autotab2" /> 
```

如何将复制/粘贴的代码重构为单个函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:13:25.877

一种更通用的解决方案，不需要您每组使用一个类：

```
// loop through adjacent pairs
$.fn.eachPair = function(f) {
    for(var i = 0, j = 1; j < this.length; i = j++)
        f.call(this[i], this[j]);
}

$.fn.autotab = function() {
    this.eachPair(function(next) {
        // add an event handler to focus the next field
        $(this).keyup(function() {
            if($(this).attr("maxlength") == $(this).val().length)
                $(next).focus();
        });
    });
}

$(document).ready(function () {
    $(".autotab").autotab();
    $(".autotab2").autotab();
}); 
```

^(附带说明一下`$($(".autotab2")[++index])`，您的代码中的`$(".autotab2").eq(index + 1)`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:27:23.567

您可以通过将选择器传递给 .next() 来限制元素 - 这是假设您只有一个类分配给您的输入并且它们都是兄弟姐妹。

```
// get all inputs with class that start with autotab
$("input[class^=autotab]").keyup(function() {
    var $el = $(this);
    // get nextfield with same class
    var nextField = $el.next('.'+$el.attr('class'));
    if($el.attr("maxlength") == $el.val().length){
        // if true - give next field with same class focus
        $el.next().focus();
    }
});​ 
```

[http://jsfiddle.net/JaVaR/](http://jsfiddle.net/JaVaR/)

或者，如果它们不能保证是兄弟姐妹.. 您可以使用 .eq() 获取当前索引并加一。这将获取与当前元素类匹配的元素集合，然后获取当前的索引以查找下一个字段

```
$("input[class^=autotab]").keyup(function() {
    var $el = $(this);
    // gets all inputs with same class
    var $inp = $('.'+$el.attr('class'));
    // gets next input with same class
    var nextField = $inp.eq($inp.index(this)+1);
    if($el.attr("maxlength") == $el.val().length){
        nextField.focus();
    }
});​ 
```

[http://jsfiddle.net/L4MEP/](http://jsfiddle.net/L4MEP/)

# ruby-on-rails - Rails 模型上的无效日期时间结果为零

> ID：13036550
> 
> 赞同：19
> 
> 时间：2012-10-23T18:08:20.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, activerecord

我有一个带有日期时间属性的模型。我正在尝试验证将更新模型的传入 JSON。但如果它是无效的日期时间，ActiveRecord 似乎将属性的值设置为 nil。我无法以适当的错误响应，因为该属性允许为零。我究竟做错了什么？

代码：

```
class DatetimeValidator < ActiveModel::EachValidator
  def validate_each(record, attribute, value)
    value.to_datetime rescue record.errors[attribute] << (options[:message] || "must be a date.")
  end
end

class Foo
   # column :my_date, :datetime
   validates :my_date, :allow_nil => true, :datetime => true
end 
```

安慰：

```
1.9.3p125 :001 > x = Foo.new
=> #<Foo id: nil, my_date: nil>
1.9.3p125 :001 > x.my_date = 'bad value'
=> 'bad value'
1.9.3p125 :001 > x.my_date
=> nil
1.9.3p125 :001 > x.valid?
=> true 
```

就 ActiveRecord 而言，将 datetime 属性设置为 'bad_value' 等同于将其设置为 nil，因此我无法验证它，因为 my_date 不是必需的。这对我来说似乎是一个错误。最好的解决方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T19:05:02.193

一种解决方法是将`allow_nil`部件移到`date_time`验证中：

```
class DatetimeValidator < ActiveModel::EachValidator
  def validate_each(record, attribute, value)
    return if value.blank?
    value.to_datetime rescue record.errors[attribute] << (options[:message] || "must be a date.")
  end
end

class Foo
  validates :my_date, :datetime => true
end 
```

编辑：我认为这是类型转换的问题 - 试试这个（改编自代码`validates :numericality`）：

```
def validate_each(record, attribute, value)
  before_type_cast = "#{attribute}_before_type_cast"

  raw_value = record.send(before_type_cast) if record.respond_to?(before_type_cast.to_sym)
  raw_value ||= value

  return if raw_value.blank?
  raw_value.to_datetime rescue record.errors[attribute] << (options[:message] || "must be a date.")
end 
```

# objective-c - NSInteger 到 const char *

> ID：13036556
> 
> 赞同：0
> 
> 时间：2012-10-23T18:08:41.713
> 
> 标签：objective-c, cgcontext, uiprintpagerenderer

我收到了一个`(NSInteger) pageIndex`并且需要在一个页面上打印它

`void CGContextShowTextAtPoint ( CGContextRef c, CGFloat x, CGFloat y, const char *string, size_t length );`

我如何获得`const char *string`并且不要忘记该字符串的长度

我倾向于以讨厌的技巧结束，先将整数转换为字符串，然后再做`cStringUsingEncoding:NSMacOSRomanStringEncoding`，但这不是最优雅的方式

为了完整起见，这里是代码

```
const char *pageIndexString = [[NSString stringWithFormat:@"%d", pageIndex] cStringUsingEncoding:NSMacOSRomanStringEncoding];
CGContextShowTextAtPoint(CGContextRef, CGFloat x, CGFloat y, pageIndexString, strlen(pageIndexString)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T18:14:14.470

尝试这个：

```
NSString *tmp = [NSString stringWithFormat:@"%ld", pageIndex];
const char *str = [tmp UTF8String];
size_t length = [tmp length]; 
```

# r - 将空格（制表符）分隔的文本文件读入矩阵（向量）

> ID：13036557
> 
> 赞同：2
> 
> 时间：2012-10-23T18:08:40.933
> 
> 标签：r

我需要在 R 中后处理一些 FORTRAN 输出文件。例如，我需要从输出文件中读取 20 行并忽略空格。然后将它们转换为向量或矩阵。我想知道是否有更好的方法来忽略空格并保留值？谢谢！这是我的 Out.txt 文件（我只需要最后四列）：

```
 CNC HORIZON     COMPARTMENT      TOTAL      ADSORBED   DISSOLVED  GAS CONC.
 CNC                              (MG/KG)    (MG/KG)    (MG/L)     (MG/L)
 CNC --------------------------------------------------------------------------
 CNC
 CNC
 CNC   1            1             0.4062     0.3737      1.210     0.2419E-05
 CNC   1            2             0.4942     0.4547      1.472     0.2943E-05
 CNC   1            3             0.4930     0.4536      1.468     0.2936E-05
 CNC   1            4             0.4812     0.4427      1.433     0.2865E-05
 CNC   1            5             0.4682     0.4307      1.394     0.2788E-05
 CNC   1            6             0.4550     0.4186      1.355     0.2710E-05
 CNC   1            7             0.4418     0.4065      1.315     0.2631E-05
 CNC   1            8             0.4286     0.3944      1.276     0.2552E-05
 CNC   1            9             0.4154     0.3822      1.237     0.2474E-05
 CNC   1           10             0.4022     0.3701      1.198     0.2395E-05 
```

以下是我的方法：

```
TOT={}
file_out <- file(paste(pth,'/Out.txt', sep=""))
b=readLines(file_out)
dd=as.numeric(ldply(strsplit(b[88334],"   "))) # I have to adjust the amount of spaces in
                                               # order to separate numbers out
TOT[1]=dd[10]                                  # It is not always 10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:56:36.750

如果您不介意重新标记列，这是一个非常简单的 read.table 练习。

```
b <- read.table("path/to/Out.txt",skip=5)

  V1 V2 V3     V4     V5    V6        V7
1  CNC  1  1 0.4062 0.3737 1.210 2.419e-06
2  CNC  1  2 0.4942 0.4547 1.472 2.943e-06
3  CNC  1  3 0.4930 0.4536 1.468 2.936e-06
4  CNC  1  4 0.4812 0.4427 1.433 2.865e-06
5  CNC  1  5 0.4682 0.4307 1.394 2.788e-06
6  CNC  1  6 0.4550 0.4186 1.355 2.710e-06
7  CNC  1  7 0.4418 0.4065 1.315 2.631e-06
8  CNC  1  8 0.4286 0.3944 1.276 2.552e-06
9  CNC  1  9 0.4154 0.3822 1.237 2.474e-06
10 CNC  1 10 0.4022 0.3701 1.198 2.395e-06 
```

# scala - 试图让 ScalaTest 工作：执行“mvn test”时“没有要运行的测试”

> ID：13036561
> 
> 赞同：11
> 
> 时间：2012-10-23T18:08:43.397
> 
> 标签：scala, maven, automated-tests

编辑：我终于让它工作了！！！

它需要 pom.xml 中的 JUnit 和我的 .scala 中的三个语句的组合：

```
import org.junit.runner.RunWith
import org.scalatest.junit.JUnitRunner

@RunWith(classOf[JUnitRunner]) 
```

出于某种原因，尝试配置 Surefire 会使测试再次停止运行。

* * *

我在 IntelliJ 中编码，试图通过 Maven ( `mvn test`) 构建过程运行一个简单的 ScalaTest 测试。没有任何错误，但不幸的是也没有运行测试。

这是我的 .scala 文件：

```
import org.scalatest.FunSuite
import org.scalatest.BeforeAndAfter

class ExampleSuite extends FunSuite with BeforeAndAfter {

  before {
    println("Doing setup tasks...")
  }

  test("Example test of checking the browser title") {

    val expected_title = "Company Platform"
    var actual_title = "Company Platform"
    assert(actual_title == expected_title)
  }

  after {
    println("Doing teardown tasks...")
  }
} 
```

这是 Maven 输出：

```
[INFO] Scanning for projects...
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for JoeTestDemo:JoeTestDemo:jar:1.0
[WARNING] 'build.plugins.plugin.version' for org.scala-tools:maven-scala-plugin is missing. @ line 42, column 21
[WARNING] 
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[WARNING] 
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
[WARNING] 
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building JoeTestDemo 1.0
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @ JoeTestDemo ---
[WARNING] Using platform encoding (MacRoman actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ JoeTestDemo ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-scala-plugin:2.15.2:compile (default) @ JoeTestDemo ---
[INFO] Checking for multiple versions of scala
[INFO] includes = [**/*.scala,**/*.java,]
[INFO] excludes = []
[WARNING] No source files found.
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:testResources (default-testResources) @ JoeTestDemo ---
[WARNING] Using platform encoding (MacRoman actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory /Users/Joeshaver/Projects/JoeTestDemo/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ JoeTestDemo ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-scala-plugin:2.15.2:testCompile (default) @ JoeTestDemo ---
[INFO] Checking for multiple versions of scala
[INFO] includes = [**/*.scala,**/*.java,]
[INFO] excludes = []
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.7.2:test (default-test) @ JoeTestDemo ---
[INFO] Surefire report directory: /Users/Joeshaver/Projects/JoeTestDemo/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
There are no tests to run.

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.368s
[INFO] Finished at: Tue Oct 23 10:58:30 PDT 2012
[INFO] Final Memory: 6M/81M
[INFO] ------------------------------------------------------------------------ 
```

这是 pom.xml。我认为我的 Maven Scala 插件可能不正确：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>JoeTestDemo</groupId>
    <artifactId>JoeTestDemo</artifactId>
    <version>1.0</version>

    <repositories>
        <repository>
            <id>scala-tools.org</id>
            <name>Scala-tools Maven2 Repository</name>
            <url>http://scala-tools.org/repo-releases</url>
        </repository>
    </repositories>

    <pluginRepositories>
        <pluginRepository>
            <id>scala-tools.org</id>
            <name>Scala-tools Maven2 Repository</name>
            <url>http://scala-tools.org/repo-releases</url>
        </pluginRepository>
    </pluginRepositories>

    <dependencies>
        <dependency>
            <groupId>org.scala-lang</groupId>
            <artifactId>scala-library</artifactId>
            <version>2.9.0-1</version>
        </dependency>
        <dependency>
            <groupId>org.scalatest</groupId>
            <artifactId>scalatest_2.9.0-1</artifactId>
            <version>1.6.1</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.scala-tools</groupId>
                <artifactId>maven-scala-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                            <goal>testCompile</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <sourceDir>src/main/java</sourceDir>
                    <jvmArgs>
                        <jvmArg>-Xms64m</jvmArg>
                        <jvmArg>-Xmx1024m</jvmArg>
                    </jvmArgs>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-24T07:13:44.240

您可能希望使用[`scalatest-maven-plugin`](http://www.scalatest.org/user_guide/using_the_scalatest_maven_plugin)来运行您的 scala 测试。

还要确保您使用`<scope>test</scope>`仅用于测试目的的罐子。

这就是我`pom.xml`为使用[ScalaTest](http://www.scalatest.org/)定义的方式：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>com.stackoverflow</groupId>
    <artifactId>Q13036561</artifactId>
    <version>1.0-SNAPSHOT</version>

    <name>${project.artifactId}-${project.version}</name>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <scala.version>2.9.2</scala.version>
        <scalatest.version>2.0.M4</scalatest.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.scala-lang</groupId>
            <artifactId>scala-library</artifactId>
            <version>${scala.version}</version>
        </dependency>
        <dependency>
            <groupId>org.scalatest</groupId>
            <artifactId>scalatest_${scala.version}</artifactId>
            <version>${scalatest.version}</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.scala-tools</groupId>
                <artifactId>maven-scala-plugin</artifactId>
                <version>2.15.2</version>
                <executions>
                    <execution>
                        <id>scala-compile</id>
                        <goals>
                            <goal>compile</goal>
                            <goal>testCompile</goal>
                        </goals>
                        <configuration>
                            <args>
                                <arg>-make:transitive</arg>
                                <arg>-dependencyfile</arg>
                                <arg>${project.build.directory}/.scala_dependencies</arg>
                            </args>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <!--
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.7.2</version>
                <executions>
                    <execution>
                        <id>default-test</id>
                        < ! - Disable the default-test by putting it in phase none - >
                        <phase>none</phase>
                    </execution>
                </executions>
            </plugin>
            -->
            <plugin>
                <groupId>org.scalatest</groupId>
                <artifactId>scalatest-maven-plugin</artifactId>
                <version>1.0-M2</version>
                <configuration>
                    <reportsDirectory>${project.build.directory}/surefire-reports</reportsDirectory>
                    <stdout>W</stdout> <!-- Skip coloring output -->
                </configuration>
                <executions>
                    <execution>
                        <id>scala-test</id>
                        <goals>
                            <goal>test</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

正如你所看到的，如果你真的不想运行它，我还添加了一个禁用surefire插件的部分。它在上面的 pom 中有注释，但如果你想禁用 surefire 插件，只需取消注释该部分。

我也在使用 IntelliJ，这种组合完全没有问题。只需从 IntelliJ 或使用运行测试`mvn test`，它们都可以工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-23T18:18:15.577

如果你在 Maven 上运行，那么你要么必须用

```
@RunWith(classOf[JUnitRunner]) 
```

这将要求您将 JUnit 作为依赖项。或者您可以使用[ScalaTest Maven 插件](http://www.scalatest.org/user_guide/using_the_scalatest_maven_plugin)（虽然我自己没有使用过）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-23T18:28:14.330

除了布莱克的回答之外，`@RunWith(classOf[JUnitRunner])`您可能还需要按如下方式设置万能：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.12</version>
    <configuration>
      <includes>
        <include>**/*Suite.class</include>
        <include>**/*Test.class</include>
        <include>**/*Tests.class</include>
        <include>**/*Spec.class</include>
        <include>**/*Specs.class</include>
      </includes>
    </configuration>
  </plugin> 
```

这是我的一个 Maven 项目，它在没有任何特殊插件的情况下通过 ScalaTest 进行了很好的测试：[https ://github.com/nikita-volkov/sext/](https://github.com/nikita-volkov/sext/)

# java - 比较java中数组的索引

> ID：13036564
> 
> 赞同：-3
> 
> 时间：2012-10-23T18:09:05.893
> 
> 标签：java, arrays

我是java新手，真的遇到了一个小问题，

我想比较两个数组的索引，例如数组是

```
String Array1[]={"A" , "B" , "C", "D"};
String Array2[]={"a" , "b" , "c", "d"}; 
```

现在我想要的是让用户为 Array2 输入一个单词，例如“a”，在这种情况下我会看到它的索引为“0”，所以我将使用数组 1 中索引“0”的值打印它，所以它打印一个 A ，同样如果用户 eneterd d ，它会检查它的 index ，以及它在 Array1 中的相应索引，然后打印 d D 。所以请帮我做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:18:24.170

你必须使用[Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)。您必须在`arr2`. 声明如下。

```
Map<String, String> m = new Map<String, String>(); 
```

然后插入`arr2`和`arr1`in的元素`m`，作为键值对的映射。

现在，如果您`string`从用户那里得到一个说法`ch`，那么您可能想要

```
System.out.println(m.get(ch)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T18:18:35.380

```
public static void main(String[] args) {
    // TODO code application logic here

    String array1[]={"A" , "B" , "C", "D"};
    String array2[]={"a" , "b" , "c", "d"};

    System.out.println("Enter your letter: ");

    try {
        BufferedReader bufferRead =
                new BufferedReader(new InputStreamReader(System.in));

        String input = bufferRead.readLine();

        if(!Arrays.asList(array2).contains(input)){
            System.out.println("There is no \""+input+"\" in array2[]");
        }else{
            int index = Arrays.asList(array2).indexOf(input);                
            System.out.println("Here is the result: "+array1[index]);
        }

    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

# java - Java RMI - ClassNotFound 异常

> ID：13036566
> 
> 赞同：4
> 
> 时间：2012-10-23T18:09:29.823
> 
> 标签：java, rmi, classnotfoundexception

我正在创建一个 Java RMI 程序，但我得到了一个 ClassNotFoundException。你们能帮我弄清楚吗？我正在使用 Eclipse。有人建议我这是一个代码库问题，但这有什么关系？以下是我的服务器和客户端的代码：

服务器：

```
 package server;

import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;
import java.rmi.server.UnicastRemoteObject;

import base.Server;
import base.RmiStarter;

public class ServerImplStarter extends RmiStarter{

    public ServerImplStarter() {
        super(Server.class);
    }

    @Override
    public void doCustomRmiHandling() {
        try{
            Server engine = new ServerImpl();
            Server engineStub = (Server)UnicastRemoteObject.exportObject(engine, 0);

            Registry registry = LocateRegistry.createRegistry( 1099 );
            registry = LocateRegistry.getRegistry();
            registry.rebind("Server", engineStub);

        }catch(Exception e){
            e.printStackTrace();
        }

    }

    public static void main(String[] args){
        new ServerImplStarter();
    }

} 
```

客户：

```
package client;

import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;

import base.RmiStarter;
import base.Server;
import base.Cell;

public class CellClient extends RmiStarter {

    public CellClient() {
        super(Server.class);
    }

    @Override
    public void doCustomRmiHandling() {
        try{
            Registry registry = LocateRegistry.getRegistry();
            Server server = (Server)registry.lookup("Server");

            Cell c = null;
            c = server.getcell();

        }catch(Exception e){
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        new CellClient();
    }

} 
```

错误是这样的：

```
java.rmi.UnmarshalException: error unmarshalling return; nested exception is: 
    java.lang.ClassNotFoundException: server.CellImpl
    at sun.rmi.server.UnicastRef.invoke(Unknown Source)
    at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(Unknown Source)
    at java.rmi.server.RemoteObjectInvocationHandler.invoke(Unknown Source)
    at $Proxy0.getcell(Unknown Source)
    at client.CellClient.doCustomRmiHandling(CellClient.java:23)
    at base.RmiStarter.<init>(RmiStarter.java:19)
    at client.CellClient.<init>(CellClient.java:13)
    at client.CellClient.main(CellClient.java:31)
Caused by: java.lang.ClassNotFoundException: server.CellImpl
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at sun.rmi.server.LoaderHandler.loadClass(Unknown Source)
    at sun.rmi.server.LoaderHandler.loadClass(Unknown Source)
    at java.rmi.server.RMIClassLoader$2.loadClass(Unknown Source)
    at java.rmi.server.RMIClassLoader.loadClass(Unknown Source)
    at sun.rmi.server.MarshalInputStream.resolveClass(Unknown Source)
    at java.io.ObjectInputStream.readNonProxyDesc(Unknown Source)
    at java.io.ObjectInputStream.readClassDesc(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at sun.rmi.server.UnicastRef.unmarshalValue(Unknown Source)
    ... 8 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:08:09.287

客户端和服务器都应该具有相同的包名称。我昨天也遇到了同样的错误，经过大量搜索后我更正了。试试看，如果有任何其他错误出现，请告诉我。

将此标记为答案，如果您发现是这样。谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T22:53:29.680

CellImpl 尚未通过客户端的 CLASSPATH 导出或提供。它需要 (a) 扩展 UnicastRemoteObject 或通过 UnicastRemoteObject.exportObject() 导出；或 (b) 可序列化并在客户端的 CLASSPATH 上可用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-05-03T10:07:32.970

运行 RMI 客户端时 NoClassFound 异常的解决方案。

案子：

服务器和客户端文件位于不同的文件夹中。

例子：

服务器端：服务器接口和服务器实现在项目文件夹：C:\RMIServer 包：rmiserver

客户端：服务器接口和客户端都在里面 项目文件夹：C:\RMIClient 包：rmiClient

问题：找不到服务器接口的位置。

解决方法：在客户端， 1.创建一个包名rmiServer（包名要和服务端包名相同）。2\. 将服务器存根放入此包中。3\. client.java 在 rmiClient 包内。现在在 client.java 文件中导入 rmiServer 包。导入 rmiServer.*；

这将解决我们执行客户端 RMI 时发生的 classNotFound 异常。

# c# - 在 Web 应用程序中将 SQL Server 数据导出到 Excel

> ID：13036569
> 
> 赞同：2
> 
> 时间：2012-10-23T18:09:47.220
> 
> 标签：c#, asp.net, sql-server, ajax, excel

我想将数据从 SQL Server 拉取（通常我使用`SqlDataReader`，但我愿意接受建议）导出到 Excel/CSV 文件中，并让 Web 应用程序的用户将其作为下载获取。

我想做这种 AJAX 风格，这样点击下载就不会导致重新加载/回发。

有人以前做过这个或知道如何做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:26:32.633

我认为这种机制会起作用。

有一个 HTML 按钮，单击时会调用 javascript 函数。

```
<input id="downloadbtn" type="button" value="Download" onclick="download();" /> 
```

函数看起来像这样：

```
var download = function() {
  $.ajax({
  url: "datamaker.aspx",
  context: document.body
  }).done(function(data) { 
    //  parse response data, get file path
    var filepath = ParseDataToGetFilePath(data);

    // open the csv file path in a new window (which will begin download)
    window.open(filepath, '_blank');
  });

}; 
```

在服务器端，“datamaker.aspx”应该连接到 SQL Server，并创建 CSV 文件。创建 CSV 文件就像使用 streamwriter 创建任何其他文件一样简单，并在字段之间写入“逗号”。在此页面的末尾，以响应 xml 或 json 格式输出文件名。

```
 { filepath: \path\datafile.csv } 
```

# r - 访问列表中每个矩阵的特定行

> ID：13036571
> 
> 赞同：0
> 
> 时间：2012-10-23T18:09:54.880
> 
> 标签：r, list, matrix

这可能非常微不足道，但我还没有找到答案（而且我对 R 很陌生）。

我有一个包含一堆矩阵的列表。列表中的每个矩阵都具有相同的行数和行名。

我如何访问说，列表中每个矩阵的第二行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:15:48.990

利用`lapply`

```
x <-matrix(1:9, 3, dimnames=list(LETTERS[1:3], letters[24:26])) # creating a matrix

mylist <- list(x, 2*x, 3*x, 4*x) # creating the list

lapply(mylist, function(x) x['B',])  # By name
sapply(mylist, function(x) x['B',])  # alternative

lapply(mylist, function(x) x[2,])  # By index
sapply(mylist, function(x) x[2,]) 
```

# c# - 从内存中卸载 DLL

> ID：13036575
> 
> 赞同：3
> 
> 时间：2012-10-23T18:10:06.550
> 
> 标签：c#, .net, memory, dll

如何从属于另一个进程的内存中卸载 DLL，或者进程已结束但 DLL 仍加载到内存中？

我知道如何查找现有进程，甚至为此列出所有已加载的 DLL，但我似乎无法得到的是如何找到已加载的 DLL 并从内存中卸载它们。

我读过的所有内容都在谈论`AppDomains`，但我不确定这种情况是否适用于该方法，因为我想关闭我的应用程序未调用的 DLL。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:13:13.220

我认为您不能卸载单个程序集。但是您可以卸载包含程序集的 AppDomain。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:18:37.517

除非退出进程，否则无法卸载以域中立方式加载的共享 DLL。域特定的 DLL 与域一起被卸载。但是，即使加载 DLL 仅用于反射，也无法卸载单个 DLL。

# indy - INDY 10 TCP 服务器 - 结合非线程安全的 VCL 代码

> ID：13036579
> 
> 赞同：5
> 
> 时间：2012-10-23T18:10:20.870
> 
> 标签：indy, indy10, delphi

VCL 不是线程安全的。`server.execute(...)` 因此，我想在 INDY 10 TCP函数中将信息写入 gui 并不是一个好主意。

如何将信息从服务器执行发送到 VCL？

我需要在`tcpserver.execute`函数中修改 TBitmap。如何使该线程安全？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T18:29:20.467

从 Indy 向 VCL 线程写入内容的方式与从其他任何地方向 VCL 线程写入内容的方式相同。常见选项包括`TThread.Synchronize`和`TThread.Queue`。

修改一个独立的`TBitmap`应该不需要与主线程同步。您可以从任何您想要的线程修改它，只要您一次只从一个线程进行修改。您可以使用标准同步对象（如临界区和事件）来确保一次只有一个线程使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:26:06.923

同步的最佳方式是创建和使用 TidNotify 后代。

使用适当的私有字段定义一个像这样的 tidnotify 后代和 vcl proc。

```
TVclProc= procedure(aBMP: TBitmap) of object;

TBmpNotify = class(TIdNotify)
protected
  FBMP: TBitmap;
  FProc: TVclProc;
  procedure DoNotify; override;
public
  constructor Create(aBMP: TBitmap; aProc: TVclProc); reintroduce;
  class procedure NewBMP(aBMP: TBitmap; aProc: TVclProc);
end; 
```

然后像这样实现它

```
{ TBmpNotify }

constructor TBmpNotify.Create(aBMP: TBitmap; aProc: TVclProc);
begin
  inherited Create;
  FBMP:= aBMP;
  FProc:= aProc;
end;

procedure TBmpNotify.DoNotify;
begin
  inherited;
  FProc(FBMP);
end;

class procedure TBmpNotify.NewBMP(aBMP: TBitmap; aProc: TVclProc);
begin
  with Create(aBMP, aProc) do
  begin
    Notify;
  end;

end; 
```

然后从

```
server.execute(...) 
```

像这样称呼它

```
procedure TTCPServer.DoExecute(aContext: TIdContext);
var
  NewBMP: TBitmap;
begin
  TBmpNotify.NewBMP(NewBMP, FVclBmpProc);  
end; 
```

其中 FVclBmpPro 是一个私有字段，指向与 TVclProc 的参数签名匹配的表单上的过程。此字段应在创建之后和启动服务器之前通过服务器对象上的属性进行设置。

表单上的方法可以自由地使用它接收到的位图，而不必担心线程争用、死锁和其他通过访问 VCL 控件而不同步而产生的麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:32:26.593

一个简单的 PostMessage（线程内）和处理消息（线程外）是进行 UI 更新所必需的......

# javascript - 什么咖啡脚本生成这个js？

> ID：13036582
> 
> 赞同：0
> 
> 时间：2012-10-23T18:10:29.513
> 
> 标签：javascript, coffeescript

我一直在为此绞尽脑汁（和谷歌），似乎找不到答案。

**什么咖啡脚本代码会生成以下 javascript？**

```
var Helper = {
  expandTextarea: function() {
    alert("BOOM AGAIN!");
  }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:11:58.043

```
Helper = expandTextarea: ->
  alert "BOOM AGAIN!" 
```

# c# - 为什么在实体框架中使用数据结构更好

> ID：13036583
> 
> 赞同：2
> 
> 时间：2012-10-23T18:10:30.603
> 
> 标签：c#, linq, entity-framework, data-structures, expression

[http://geekswithblogs.net/Martinez/archive/2009/06/29/understanding-expression-trees.aspx](http://geekswithblogs.net/Martinez/archive/2009/06/29/understanding-expression-trees.aspx)

通过阅读这篇解释什么是表达式树以及它们的用途的文章，我有一些问题，那就是那些没有清楚地回答我的文章。

**A.**数据结构和“已编译的代码”有什么区别。* 我知道数据结构是 Array,List,.. 但这不是我要找的答案。

**B.**为什么在 Entity Framework 中使用数据结构比使用“编译代码”在效率方面更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:15:23.207

回答 A 和 B。

编译后的代码不能被逆向工程成可以转换为 SQL 的东西。有很多细节使您想要转换为 SQL 的原始概念消失了。表达式树可以在运行时进行分析和理解，而编译的代码则不能。

可以使用查询的另一种元表示，但表达式树的优势在于编译器中的现有管道可用于大量繁重的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:18:45.767

An`Expression`是代表代码的代码。在调用`Compile()`.

An`Expression`包含一个描述一些代码的对象图。所以示例函数：

```
x => x + 1 
```

表示一个接受 1 个参数并返回表达式 (x + 1) 的函数。作为一个对象图，它是这样的：

```
Expression
   AdditionExpression
       RightValue
          VariableExpression (x)
       LeftValue
          LiteralExpression (1) 
```

您可以解析表达式并找出表达式各部分的名称，或者文字值是什么，或者操作是什么。一旦编译完成，它就是一个逻辑操作序列，所有元数据都会丢失。

就实体框架而言，给定一个示例表达式，如下所示：

```
myObjects.Where(x => x.Id > 10).ToList() 
```

LINQ to SQL`IQueryable`提供程序正在检查此表达式，查找属性名称，`Id`然后查找文字值 10 以将其转换为 SQL 语句。如果这是一个函数（一个已编译的代码单元），则没有要检查的元数据，并且不可能转换为 SQL。它还允许您将事物解构为支持和不支持的表达式，以确保您的 SQL 查询仅返回请求的数据，而不是大型数据集。

# c# - 在 ASP.NET MVC 3 应用程序中使用自定义 html 帮助程序

> ID：13036586
> 
> 赞同：2
> 
> 时间：2012-10-23T18:10:47.810
> 
> 标签：c#, asp.net, asp.net-mvc, razor

所以，几个小时以来，我一直在尝试做一些我认为——而且仍然认为——应该是微不足道的事情。基本上，我创建了一个 Html 助手，我需要使用它来将一些 CSS 属性应用于 ASP.NET MVC 3 应用程序的选定菜单。这是我的 Html 助手：

```
namespace MVCUI.Extensibility
{
    public static class HtmlHelpers
    {
        public static MvcHtmlString MenuLink(
            this HtmlHelper helper, 
            string text, 
            string action, 
            string controller, 
            string selectedCssClass, 
            object routeValues, 
            object htmlAttributes)
        {
            var attributes = new RouteValueDictionary(htmlAttributes);

            if (!String.IsNullOrWhiteSpace(selectedCssClass))
            {
                var contextController = helper.ViewContext.RouteData.Values["controller"] as String ?? "Home";
                var contextAction = helper.ViewContext.RouteData.Values["action"] as String ?? "Index";

                if (String.Compare(
                    String.Format("{0}/{1}", controller, action), 
                    String.Format("{0}/{1}", contextController, contextAction), true) == 0)
                {
                    var cssValue = String.Empty;
                    if (attributes.ContainsKey("class"))
                        cssValue = attributes["class"] as String ?? String.Empty;
                    cssValue = cssValue.Trim();
                    if (cssValue.Length > 0)
                        cssValue = cssValue += (" " + selectedCssClass);
                    else
                        cssValue = selectedCssClass;
                    attributes["class"] = cssValue;
                }
            }

            return helper.ActionLink(text, action, controller, new RouteValueDictionary(routeValues), attributes);
        }
    }
} 
```

这是我从**_Layout.cshtml**文件中使用它的方式：

```
@Html.MenuLink("Posts", "Posts", "Post", "selected", new { }, new { }) 
```

由于一些非常奇怪的原因，我不断收到错误消息：

**说明：** *在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。*

**编译器错误消息：** *CS1061：“System.Web.Mvc.HtmlHelper”不包含“MenuLink”的定义，并且找不到接受“System.Web.Mvc.HtmlHelper”类型的第一个参数的扩展方法“MenuLink”（您是否缺少 using 指令或程序集引用？）*

这是我尝试过的：

1.  添加`<add namespace="MVCUI.Extensibility" />`到**Views**文件夹根目录下的**Web.config**`<system.web.webPages.razor>/<pages>/<namespaces>`文件部分。
*****   **在_Layout.cshtml**文件`@using MVCUI.Extensibility;`的顶部添加。***   尝试了上述 (1) 和 (2) 的所有组合。*   尝试了语法：`@{ Html.MenuLink("Posts", "Posts", "Post", "selected", new { }, new { }); }`*   谷歌搜索，很多！所有材料和资源，包括我们自己的 stackoverflow，似乎都表明我在做正确的事情。*   甚至尝试在**AssemblyInfo.cs中设置***[assembly: ComVisible(true)]*。好吧，以防万一！;)******

 ********免责声明：**这是我第一次在 ASP.NET MVC 3 应用程序中尝试使用 html 助手。我哪里会出错？谢谢人们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:55:49.627

就像有人在评论中指出的那样，我的设置有些不同。在我的解决方案中，我已将我的项目（包括 MVC 项目）的**输出路径**`bin\`从默认更改为`..\Library\Build\`. 到目前为止，该设置运行良好，因此没有犯罪。

但是，这就是让我陷入困境的原因。在我恢复默认输出路径并重建我的项目后，Html 助手工作。即使在我恢复了我的首选输出路径后，它仍然可以继续工作 - 显然是因为`bin`文件夹中的 dll 已更新。

这意味着`@using MVCUI.Extensibility;`我的**.cshtml**文件和**Web.config**`<add namespace="MVCUI.Extensibility" />`中的语句*引用了 bin 文件夹中未定义 HtmlHelper 的旧的过时 dll*。这仍然令人困扰。我如何让他们在我想要的输出路径中引用 dll？

 ***无论如何，我只是想我应该发布有关经验和教训的信息，以防其他人遇到类似的麻烦。谢谢人们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:12:23.317

如果具有扩展方法的文件说`using System.Web.WebPages`（它有自己的单独`HtmlHelper`类）而不是`using System.Web.Mvc`.*********

# mono - mdtool生成makefile

> ID：13036587
> 
> 赞同：0
> 
> 时间：2012-10-23T18:11:00.137
> 
> 标签：mono, makefile, monodevelop

我目前正在 gpl 下开发一个单声道应用程序。因此，我想提供一个带有 makefile 的源包。

我使用 mdtool 生成简单的 makefile：

```
mdtool generate-makefiles AudioCuesheetEditor.sln --simple-makefiles 
```

在此之后，我可以成功运行

```
./configure 
```

之后

```
make 
```

但如果我想跑步

```
make install 
```

它失败并显示此消息：

```
[sven@Sven Downloads]$ make install
make[1]: Entering directory `/home/sven/Downloads'
make[1]: Leaving directory `/home/sven/Downloads'
make[1]: Entering directory `/home/sven/Downloads'
make pre-install-local-hook prefix=/usr/local
make[2]: Entering directory `/home/sven/Downloads'
make[2]: Leaving directory `/home/sven/Downloads'
make install-satellite-assemblies prefix=/usr/local
make[2]: Entering directory `/home/sven/Downloads'
mkdir -p '/usr/local/lib'
cp   bin/Release /usr/local/lib/audiocuesheeteditor
cp: Directory „bin/Release“ left out
make[2]: *** [/usr/local/lib/audiocuesheeteditor] Error 1
make[2]: Leaving directory `/home/sven/Downloads'
make[1]: *** [install-local] Error 2
make[1]: Leaving directory `/home/sven/Downloads'
make: *** [install-recursive] Error 1 
```

如果你想检查构建，这里是包：http: [//sourceforge.net/projects/audiocuesheet/files/0.1.0/Audio%20Cuesheet%20Editor-src.tar.gz/download](http://sourceforge.net/projects/audiocuesheet/files/0.1.0/Audio%20Cuesheet%20Editor-src.tar.gz/download)

有谁知道，为什么这个 make install 失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:37:51.243

MonoDevelop 中的 Makefile 集成是一个废弃的项目。

我建议您只使用 MSBuild 文件（.sln、.csproj 等），然后在构建文件中调用“xbuild”。对于安装，您可能想要创建自定义的“安装”make 目标，或者如果您想通过 MSBuild/xbuild 进行安装试验，那么您可能想看看他们在 tasque 项目中是如何做到的（源代码[在这里](http://git.gnome.org/browse/tasque/tree/)）。

# android - 是否需要在 AsyncTask 中访问 SQLiteDatabase？

> ID：13036588
> 
> 赞同：7
> 
> 时间：2012-10-23T18:11:00.123
> 
> 标签：android, android-asynctask, android-sqlite

总是从 AsyncTask 访问 SQLiteDatabase 是否有必要甚至是好的做法？

从 UI 线程执行它似乎不会导致任何问题，并且实现起来要简单得多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T18:16:17.513

建议不要从主应用程序线程执行 IO，但**不必**使用`AsyncTask`.

您还有其他退出主线程的选项，其中一些包括[Loader Framework](http://developer.android.com/guide/components/loaders.html)、[IntentService](http://developer.android.com/reference/android/app/IntentService.html)和[Executors](http://developer.android.com/reference/java/util/concurrent/Executor.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T18:13:08.503

这是一个很好的做法。数据库操作并不总是很快，因此 Android 建议在后台线程（AsyncTask、Runnable 等）上执行所有数据库和网络操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T18:38:51.100

不，没有必要总是在另一个线程中访问您的数据库。这取决于需要多长时间。通常读/写速度很快，不会减慢 UI，也不需要另一个线程。但是，当执行清理等冗长操作时，是的，在另一个线程中执行它们是个好主意。

# java - 如何在Spring中自动将长值转换为字符串？

> ID：13036592
> 
> 赞同：1
> 
> 时间：2012-10-23T18:11:13.977
> 
> 标签：java, javascript, json, spring, spring-mvc

我正在使用 Spring MVC 3 和 MappingJacksonHttpMessageConverter 在将我的 java 对象发送到我的客户端时将它们序列化为 JSON。我的问题是 Java long 值在客户端被四舍五入，因为 Javascript 数字无法处理 long 值的精度。为了解决这个问题，我将把这些字段作为字符串而不是 long 发送。有什么方法可以让 Spring 自动将 long 转换为字符串，而无需我在控制器中强制转换每个返回值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:26:09.643

您可以使用 import org.apache.commons.beanutils.* 添加字符串类型的新变量来复制对象；

```
public class Object {

String a;
Long b;

public String getA() {
    return a;
}
public void setA(String a) {
    this.a = a;
}
public Long getB() {
    return b;
}
public void setB(Long b) {
    this.b = b;
}} 
```

* * *

```
public class Object2 extends Object{

String f;

public String getF() {
    return b.toString();
}} 
```

* * *

```
 public static void main( String[] args ) throws IllegalAccessException, InvocationTargetException
{       
    Object m = new Object();
    m.setA("aa");
    m.setB((long) 22222);
    Object2 m2 = new Object2();

    BeanUtils.copyProperties(m2, m);

    //now you can convert m2 to JSONobject

} 
```

# python - 在服务器端使用 ASP.NET 从站点请求页面

> ID：13036599
> 
> 赞同：0
> 
> 时间：2012-10-23T18:11:35.047
> 
> 标签：python, http, parsing

我用 Python 编写了一个应用程序来爬取在服务器站点上使用 ASP.NET 的网站。

这就是我一直在做的（只是从浏览器复制 HTTP 标头和正文，因为我看不到其他方法）：

（它奏效了！前段时间......但现在它因“连接超时”而中止。）

```
def SBPageLoader(keyWord):
    headers = {'Host': 'www.sberbank-ast.ru' ,
    'Connection': 'keep-alive' ,
    'Content-Length': '46203',
    'Cache-Control': 'max-age=0' ,
    'Origin': 'http://www.sberbank-ast.ru' ,
    'User-Agent': 'Mozilla/5.0 (Linux i686)' ,
    'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8' ,
    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' ,
    'Referer': 'http://www.sberbank-ast.ru/purchaseList.aspx' ,
    'Accept-Encoding': 'gzip,deflate,sdch' ,
    'Accept-Language': 'ru-RU,ru;q=0.8,en-US;q=0.6,en;q=0.4' ,
    'Accept-Charset': 'utf-8' ,
    'Cookie': 'ASP.NET_SessionId=d4ki4j55hsq3km45b4qbrgjs; __utma=99173852.1461595200.1340564818.1341685237.1341758931.11; __utmb=99173852.4.9.1341758978151; __utmc=99173852; __utmz=99173852.1340564818.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)'
    }
#....( here is lots of data with undefined meaning - what is it? )......
    data = '_EVENTTARGET=&__EVENTARGUMENT=........&__VIEWSTATE=%2FwEPDwUJMzUwNDEzMjgxD2QWAmYPZBYCZg9kFgICAw9kFgQCAQ9kFgICAg8PFgIeB1Zpc2libGVoZGQCBQ9kFgICAQ9kFgYCAQ9kFgICAQ9kFgwCFQ8PZBYGHgdjb250ZW50BRRsZWFmOnB1YmxpY2RhdGVzdGFydB4JbWF4bGVuZ3RoBQIxMB4FY2xhc3MFCCBkYXRlUlVTZAIXDw9kFgYfAQUSbGVhZjpwdWJsaWNkYXRlpurchID400=887031'
    data = data.replace("Toyota", keyWord) # haha - cattlecode

    log("Strat loading http://www.sberbank-ast.ru/purchaseList.aspx ...")
    req = urllib2.Request('http://www.sberbank-ast.ru/purchaseList.aspx', data, headers)
    response = urllib2.urlopen(req)
    page = response.read()
    log(".. Loading is finished") 
```

现在，即使我用新的替换旧的正文和标题 - 也会发生同样的事情。

欢迎任何关于它有什么问题的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:56:57.433

该网站的会话可能已过期。如果您查看 cookie，您可以看到它正在传递会话标识符：

> 'Cookie': ' **ASP.NET_SessionId=d4ki4j55hsq3km45b4qbrgjs** ; __utma=99173852.1461595200.1340564818.1341685237.1341758931.11；__utmb=99173852.4.9.1341758978151; __utmc=99173852; __utmz=99173852.1340564818.1.1.utmcsr=(直接)|utmccn=(直接)|utmcmd=(无)'

（顺便说一句，其余的 cookie 可以忽略，它们实际上是 Google Analytics cookie，仅在 JavaScript 中使用客户端。）

大多数服务器的会话如果在一段时间内不使用就会过期。如果会话存储在服务器的内存中，那么如果重新启动服务器，它们就会丢失。

您可能需要在浏览器中返回该站点并获取新的会话标识符，或者将该部分构建到您的爬虫中。

如果你想将它构建到你的爬虫中，那么你需要看看存储你从服务器收到的 cookie。

# ruby-on-rails - Rails 3将范围与连接合并

> ID：13036604
> 
> 赞同：6
> 
> 时间：2012-10-23T18:12:08.470
> 
> 标签：ruby-on-rails, rails-activerecord

# 设置

对于这个问题，我将使用以下三个类：

```
class SolarSystem < ActiveRecord::Base
  has_many :planets

  scope :has_earthlike_planet, joins(:planets).merge(Planet.like_earth)
end

class Planet < ActiveRecord::Base
  belongs_to :solar_system
  belongs_to :planet_type

  scope :like_earth, joins(:planet_type).where(:planet_types => {:life => true, :gravity => 9.8})
end

class PlanetType < ActiveRecord::Base
  has_many :planets

  attr_accessible :gravity, :life
end 
```

# 问题

范围`has_earthlike_planet`不起作用。它给了我以下错误：

> ActiveRecord::ConfigurationError: 未找到名为“planet_type”的关联；也许你拼错了？

# 问题

我发现这是因为它相当于以下内容：

```
joins(:planets, :planet_type)... 
```

和 SolarSystem 没有`planet_type`关联。我想使用`like_earth`范围 on `Planet`，`has_earthlike_planet`on `SolarSystem`，并希望避免重复代码和条件。有没有办法像我试图做的那样合并这些范围但缺少一块？如果不是，我可以使用哪些其他技术来实现这些目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T18:25:42.267

显然，此时您只能合并不涉及连接的简单构造。如果您将模型修改为如下所示，这是一种可能的解决方法：

```
class SolarSystem < ActiveRecord::Base
  has_many :planets
  has_many :planet_types, :through => :planets

  scope :has_earthlike_planet, joins(:planet_types).merge(PlanetType.like_earth)
end

class Planet < ActiveRecord::Base
  belongs_to :solar_system
  belongs_to :planet_type

  scope :like_earth, joins(:planet_type).merge(PlanetType.like_earth)
end

class PlanetType < ActiveRecord::Base
   has_many :planets

   attr_accessible :gravity, :life

   scope :like_earth, where(:life => true, :gravity => 9.8)
end 
```

** 更新 **

作为记录，[已提交](https://github.com/rails/rails/pull/5494)有关此行为的错误 - 希望很快会修复...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:52:01.227

您正在重用范围中的条件`Planet.like_earth`，它连接`planet_type`。合并这些条件时，`planet_type`正在调用该关联，该关联`SolarSystem`不存在。

A`SolarSystem`有很多`planet_types`through `planets`，但这仍然不是正确的关联名称，因为它是复数形式。您可以将以下内容添加到`SolarSystem`类中以设置`planet_type`关联，这只是`planet_types`. 但是，您不能使用 Ruby `alias`，因为 AREL 反映在关联宏上，并且不会查询模型是否响应该名称的方法：

```
class SolarSystem < ActiveRecord::Base
  has_many :planets
  has_many :planet_types, :through => :planets
  has_many :planet_type, :through => :planets, :class_name => 'PlanetType'

  scope :has_earthlike_planet, joins(:planets).merge(Planet.like_earth)
end

SolarSystem.has_earthlike_planet.to_sql # => SELECT "solar_systems".* FROM "solar_systems" INNER JOIN "planets" ON "planets"."solar_system_id" = "solar_systems"."id" INNER JOIN "planets" "planet_types_solar_systems_join" ON "solar_systems"."id" = "planet_types_solar_systems_join"."solar_system_id" INNER JOIN "planet_types" ON "planet_types"."id" = "planet_types_solar_systems_join"."planet_type_id" WHERE "planet_types"."life" = 't' AND "planet_types"."gravity" = 9.8 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-28T08:47:18.970

我发现一个简单的解决方案是，您可以将 Planet 类中的联接更改为

```
joins(Planet.joins(:planet_type).join_sql) 
```

这将为连接创建一个 SQL 字符串，该字符串将始终包含正确的表名，因此无论您是直接调用范围还是在合并中使用它，都应该始终有效。它看起来不是那么漂亮，可能有点小技巧，但它只是多一点代码，没有必要改变你的关联。

# python - 使用 CSS 为 TreeView 的行设置样式

> ID：13036605
> 
> 赞同：0
> 
> 时间：2012-10-23T18:12:12.040
> 
> 标签：python, gtk, pygtk

我应该使用什么类名来设置 TreeView 行的样式？

我试过 GtkCellRendererText，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:54:49.727

傻我，只需使用 GtkTreeView:Hover 或 GtkTreeView:Selected

# r - 双strsplit

> ID：13036606
> 
> 赞同：1
> 
> 时间：2012-10-23T18:12:13.740
> 
> 标签：r

我有这样的情况：
df

```
List           Count 
R472_21:345     1   
R47_2:90        1   
R844_21:98      2   
R845_54:123     2   
R975_12:1       2 
```

我想按以下方式拆分“列表”列的元素：

```
R472 21 345      
R47  2  90      
.......... 
```

我尝试根据此代码拆分，`:`但我无法同时拆分`_`。

```
test <- unlist(strsplit(as.character(df$List), "\\:")) 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:17:14.573

使用 | 在您的模式中使用 OR 进行拆分。所以你在“_”或“：”上分裂。

```
df <- read.table(header=TRUE, text="List           Count 
  R472_21:345     1   
  R47_2:90        1   
  R844_21:98      2   
  R845_54:123     2   
  R975_12:1       2   ")

strsplit(as.character(df$List), "_|:") 
```

结果：

```
[[1]]
[1] "R472" "21"   "345" 

[[2]]
[1] "R47" "2"   "90" 

[[3]]
[1] "R844" "21"   "98"  

[[4]]
[1] "R845" "54"   "123" 

[[5]]
[1] "R975" "12"   "1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:16:33.620

用于`"_|:"`您的模式而不是`"\:"`. 但是，您的呼叫`unlist`将连接所有内容。你可能不想要这个。

# java - 在java中计算矩形相交的面积

> ID：13036614
> 
> 赞同：-1
> 
> 时间：2012-10-23T18:12:20.713
> 
> 标签：java, area, rectangles

我对一种算法有疑问。我想计算 2 个矩形的相交面积（都与 OX 和 OY 平行）。矩形（我们称之为A）由（x1，y1，x2，y2）左上角（x1，y1）和右下角（x2，y2）描述，第二个将是B（x3，y3，x4， y4)。我想到了一种算法，但它似乎很蹩脚。

```
if(all of the points of rectangle A are inside of rectangle B)
     calculate(A);
else if(all of points the points of rectangle B are in A)
     calculate(B);
else if(x1 y1 is inside rectangle B)
        if(x1 is on the left from x3){
            if(y1 is under the y3)
         else
        } 
```

等等它会很长很傻。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:44:23.970

是的，这似乎有点低效，因为我认为，问题是*可分离*的，可以扩展到3维或更多维。

*计算维度 x 中的重叠宽度*和维度 y 中的重叠*高度*并将它们相乘就足够了。

（如果矩形在某个维度上不重叠，则该值为 0）

通过比较每个矩形的 min_x、max_x 值来进行重叠检测：

```
 <------>  <------->   vs.  <-----> <----->
 a      b  c       d        c     d a     b
 Thus if b<=c OR a>=d, then no overlapping length = 0

 <------------->   or   <------------->
 a    <---->   b        a       <------------->
      c    d                    c     b       d
 + the 2 symmetric cases (swap ab & cd) 
```

从最后几行开始，公共区域的端点是d & b 的*最小值*；公共区域的起点是 a & c 的*最大值*。

那么公共区域是 min(d,b) - max (a,c) - 如果这是负数怎么办？好吧，您刚刚检查了第一行的条件...

# facebook - 使用 FQL 获取最近添加的朋友

> ID：13036617
> 
> 赞同：0
> 
> 时间：2012-10-23T18:12:29.383
> 
> 标签：facebook, facebook-fql

是否可以做到，而不是如何做到，这更像是一个问题。使用 FQL，我获取了朋友的 UID，我看到它是按升序排列的，即当我获取 uid 时，第一个加入 fb 的人成为第一个 UID。

有什么方法可以查看我添加的最后一个人吗？如果不能直接获取，也许我们可以获取 2 人成为朋友的日期，然后比较看看最新的？

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:43:05.043

做到这一点的唯一方法是使用`stream`表格查找好友公告：

```
 SELECT description, description_tags, type, created_time FROM stream 
    WHERE source_id = me() AND type = 8 LIMIT 50 
```

将其`type=8`限制为流式发布是朋友公告的帖子。

当然，您仅限于`stream`表格的正常限制：50 个帖子或 30 天的帖子中的较大者，因此即使找到最后一个朋友公告也可能需要多次 FQL 调用。

# assembly - 32 位 Windows 内联程序中的堆栈宽度

> ID：13036619
> 
> 赞同：1
> 
> 时间：2012-10-23T18:12:33.333
> 
> 标签：assembly, stack, width

我正在编写一个 Windows 32 位程序，它在内联汇编中有一些部分。该程序旨在在 32 位和 64 位系统中运行。我正在为这两个系统编译一个 32 位版本。

我的问题是我假设堆栈宽度为 4 个字节宽。当我的 32 位程序在 64 Windows 系统下运行时，堆栈宽度仍然是 4 字节宽吗？

在我的程序中（这是简化版本）我在堆栈上推送一些值：

```
for (i=0;i<4;i++)   
    {
    _asm 
        {
        mov ebx,i   ; push 0,1,2,3 on the stack
        push ebx
        }
    } 
```

稍后我将使用如下代码查询这些值：

```
ii=0;
for (i=0;i<5;i++)   
    {
    _asm 
        {
        mov ebx,ii   ; ii has 0, then 4, then 8 ...
        mov eax,dword ptr [esp+ebx]     ; peek values on the stack from the top
        mov num1,eax
        }
   ii+=4;   // here I am assuming stack width is 4 bytes  
   // -- do something with num1 --//
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:20:26.750

假设 64 位系统提供了一种向后兼容 32 位二进制文​​件的机制，那么堆栈仍然是 32 位宽的。

Windows x64 系统就是其中之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:38:19.407

无论如何，堆栈实际上并没有“宽度”。它只是字节。有时期望堆栈指针对齐，但堆栈本身只是字节。您可以以任何您想要的方式使用该空间。您可以`rSP`手动操作并随心所欲地将其错位（这可能会导致麻烦，但您仍然*可以*）。您可以在任何偏移量处直接从堆栈读取/写入堆栈 - 甚至超出堆栈指针。

本质上，没有规则，只有系统其余部分的假设。如果您的代码未能满足这些假设，事情可能会出错，但没有什么可以阻止您从堆栈指针中减去 3，然后在您刚刚创建的空间中写入 5 个字节（显然它们不会全部适合）。

但是您实际上似乎要问的是：**是否`push r32`在兼容模式下推送 dword？**

是的，它确实。事实上，它总是在任何情况下都会这样做，否则它将无法组装。您不能编写`push r32`和“意外”推送一个 qword -`push r32`对于 64 位模式根本无法编码。

该行为不依赖于操作系统。

此外，您仍然可以在普通 32 位模式、兼容模式和 64 位模式下推送和弹出单词。而且，就像我之前说的，你可以继续使用堆栈指针做任何事情。

# android - 从 WPF 到 Android 应用程序 - 向所有设备发送一个字符串和图片

> ID：13036620
> 
> 赞同：2
> 
> 时间：2012-10-23T18:12:40.880
> 
> 标签：android, wpf

我在 Android 方面绝对是新手，我只会欣赏一些关于使用哪些工具来实现我的目标的提示，因为我没有最适合的经验。

*   我用 C# 编写了一个 WPF 应用程序来管理事件！
*   我写了一个 Android 应用程序来向用户表示计划的事件（目前总是只有一个 --> 下一个）

**我的目标是：**

*   为所有安装了应用程序的 Android 设备提供一个字符串（一两
    句话，包括日期、时间、位置等）和一张图片。这是由本地桌面计算机上的 WPF 应用程序管理的。

**C#：**可以在每种需要的形式中创建一个 Event 对象。--> 一切正常

**应用程序：**我创建了一个带有 TextView 和 ImageView 的布局 --> 一切正常

所以我的问题：

*   我是否应该使用 Google 应用程序引擎数据存储在商店中始终只有一个事件实体，该实体是通过我的 WPF 应用程序上传的。每次启动布局/活动时，Android 应用都会加载事件。

*   我应该使用 Google Cloud Messaging 发送字符串消息和 App Engine 来提供图片吗？

所以，我不是在寻找代码，只是寻求有关实现我的目标的策略的帮助！

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:25:21.487

这是一种可能的高级解决方案。

当相关活动显示给最终用户时，您的 Android 客户端应检查新事件/图片（这很重要，因为典型的推送通知不能保证交付）。

您还可以使用[GCM](http://developer.android.com/guide/google/gcm/index.html)通知设备发生了更新。但是，尝试从 GCM 消息发送图像可能是个坏主意。相反，当设备收到通知时，它应该包含图像的 URL，然后设备可以自行下载。

另请注意，并非所有设备都可以使用 GCM。使用 GCM 的要求是设备上的有效 Google 帐户可能存在也可能不存在。此外，GCM 要求您向清单添加多个权限（某些用户可能不满意）。

# java - Java 通用堆栈错误

> ID：13036622
> 
> 赞同：0
> 
> 时间：2012-10-23T18:12:50.120
> 
> 标签：java, generics, data-structures

所以我在 Java 中创建了一个 DoubleQueue。它用于我的数据结构和算法类，我们试图证明 DoubleQueue 可用于实现堆栈和队列。以下是它的工作原理：

它使用一个数组来存储元素，其中头部指向数组中的前面元素，尾部指向数组的后面元素。该阵列是圆形的，当容量达到 90% 时，它会扩展。现在我认为扩张正在大惊小怪。当我将一堆整数添加到堆栈中，然后将它们全部删除时，它们以相反的顺序显示得很好。但是，我试图通过推动 String.charAt 来反转字符串，然后弹出所有字符并打印它们。这适用于足够短以至于不需要扩展的字符串。但是，一旦需要扩展，我就会开始得到一个奇怪的输出，其中涉及混乱的字符（顺序不正确，缺少字符）以及空值。

我认为这与我如何 cast 数组有关：

```
 /**
  * Expands the capacity of the storage array that holds the collection of items
  * within the DoubleQueue *** only if expansion is needed ***
  * @return True if the array was expanded; False otherwise
  */
 @SuppressWarnings({"unchecked"})
 public boolean expandArray() {

  // First, see if need to expand
  if( (double) size / storage.length >= CAPACITY_EXPAND ) {

   // Create a temporary pointer to the storage array
   E[] temp = storage;

   // First out what type of expansion we're doing and create a new, larger array
   if( expansionRule == EXPANSION_DOUBLE )
    storage = ( E[] )new Object[ 2 * temp.length ];
   else 
    storage = ( E[] )new Object[ temp.length + INCREASE_CONSTANT ];

   int i = 0; // Counter for storage
   int j = tail; // Counter for temp

   // Copy temp to storage
   while( j != head ) {
    storage[ i ] = temp[ j ];
    if( j == temp.length - 1 ) j = 0; // If we have to wrap around the array
    else j++;
    i++;
   }

   storage[ i ] = temp[ j ];

   return true;
  }

  return false;
 } 
```

这是整个代码：

```
public class DoubleQueue<E> {

 /** CONSTANTS **/
 private final int INCREASE_CONSTANT = 10; // The amount to increase by if expansion rule is increase by constant
 private final double CAPACITY_EXPAND = 0.9; // The size:capacity ratio at which the storage should be expanded
 public static final char EXPANSION_DOUBLE = 'd'; // Parameter for expansionRule()
 public static final char EXPANSION_CONSTANT = 'c'; // Parameter for expansionRule()

 /** VARIABLES **/
 private char expansionRule; // Stores the current expansion rule
 private int head; // Keeps track of the index of the first element
 private int tail; // Keeps track of the index of the last element
 private int size; // Keeps track of the number of items in storage
 private E storage[]; // Holds the collection of items

 /** CONSTRUCTORS **/
 /**
  * Creates an empty DoubleQueue with a given capacity.  Initializes variables
  * and sets the default expansion rule.
  * @param capacity The initial capacity of the DoubleQueue
  */
 @SuppressWarnings({ "unchecked" })
 public DoubleQueue( int capacity ) {

  size = 0;
  head = -1;
  tail = -1;
  storage = ( E[] )new Object[ capacity ];

  setExpansionRule( EXPANSION_DOUBLE );

 }

 /**
  * Creates an empty DoubleQueue of initial capacity 10.
  */
 public DoubleQueue() {

  this( 10 );
 }

 /** METHODS **/
 /**
  * Checks to see if the DoubleQueue is currently empty
  * @return True if the DoubleQueue is empty; False otherwise
  */
 public boolean isEmpty() {

  return size == 0;
 }

 /**
  * Adds an item at the beginning of the DoubleQueue
  * @param item The item to be added to the DoubleQueue
  * @return True if the item was successfully added
  */
 public boolean addFirst( E item ) {

  // First, perform expansion if neccessary
  expandArray();

  // Put the head and tail pointers in the right spots
  if( isEmpty() ) {
   head = 0;
   tail = 0;
  } else if( head == storage.length - 1 ) head = 0;
  else head++;

  // Add the item
  storage[ head ] = item;

  // Increment the size
  size++;

  return true;
 }

 /**
  * Adds an item at the end of the DoubleQueue
  * @param item The item to be added to the DoubleQueue
  * @return True if the item was successfully added
  */
 public boolean addLast( E item ) {

   // First, perform expansion if neccessary
   expandArray();

   // Put the head and tail pointers in the right place
   if( isEmpty() ) {
     head = 0;
     tail = 0;
   } else if( tail == 0 ) tail = storage.length - 1;
   else tail--;

   // Add the item
   storage[ tail ] = item;

   // Increment the size
   size++;

   return true;
 }

 /**
  * Expands the capacity of the storage array that holds the collection of items
  * within the DoubleQueue *** only if expansion is needed ***
  * @return True if the array was expanded; False otherwise
  */
 @SuppressWarnings({"unchecked"})
 public boolean expandArray() {

  // First, see if need to expand
  if( (double) size / storage.length >= CAPACITY_EXPAND ) {

   // Create a temporary pointer to the storage array
   E[] temp = storage;

   // First out what type of expansion we're doing and create a new, larger array
   if( expansionRule == EXPANSION_DOUBLE )
    storage = ( E[] )new Object[ 2 * temp.length ];
   else 
    storage = ( E[] )new Object[ temp.length + INCREASE_CONSTANT ];

   int i = 0; // Counter for storage
   int j = tail; // Counter for temp

   // Copy temp to storage
   while( j != head ) {
    storage[ i ] = temp[ j ];
    if( j == temp.length - 1 ) j = 0; // If we have to wrap around the array
    else j++;
    i++;
   }

   storage[ i ] = temp[ j ];

   return true;
  }

  return false;
 }

 /**
  * Gets the element at the front of the DoubleQueue & removes it
  * @throws EmptyDoubleQueueException if the queue is empty and there is no item to remove
  * @return The item at the front of the DoubleQueue
  */
 public E removeFirst() throws EmptyDoubleQueueException {

  // If the DoubleQueue is empty we obviously can't get an element from it..
  if( size == 0 ) throw new EmptyDoubleQueueException();

  // Create a temporary record of the item and remove it from storage
  E temp = storage[ head ];
  storage[ head ] = null;

  size--; // Decrease the size of the DoubleQueue

  if( size == 0 ) { // If we're taking the last element
   head = -1;
   tail = -1;
  } else if ( head == 0 ) head = storage.length - 1; // Wrap around the array
  else head--;

  return temp;
 }

 /**
  * Gets the item at the back of the DoubleQueue & removes it
  * @throws EmptyDoubleQueueException if the queue is empty and there is no item to return
  * @return The item at the back of the doubleQueue
  */
 public E removeLast() throws EmptyDoubleQueueException {

  // If the DoubleQueue is empty we obviously can't get an element from it..
  if( size == 0 ) throw new EmptyDoubleQueueException();

  // Create a temporary record of the item and remove it from storage
  E temp = storage[ tail ];
  storage[ tail ] = null;

  size--; // Decrease the size of the DoubleQueue

  if( size == 0 ) { // If we're taking the last element
   head = -1;
   tail = -1;
  } else if ( tail == storage.length - 1 ) tail = 0; // Wrap around the array
  else tail++;

  return temp;
 }

 /**
  * Gets the item at the front of the DoubleQueue
  * @return The item at the front of the DoubleQueue; null if list is empty
  */
 public E peekFirst() {

  if( size == 0 ) return null; // Nothing to return
  return storage[ head ];
 }

 /**
  * Gets the item at the back of the DoubleQueue
  * @return The item at the back of the DoubleQueue; null if list is empty
  */
 public E peekLast() {

  if( size == 0 ) return null; // Nothing to return
  return storage[  tail ];
 }

 /**
  * Trims the size of the underlying collection to the exact number of items within
  * the collection
  */
 @SuppressWarnings({"unchecked"})
 public void truncate() {

  E[] temp = storage; // Create a temporary pointer to storage
  storage = ( E[] )new Object[ storage.length ]; // Create a new storage array that is the size of the # of elements in storage

  int i = 0; // Pointer to iterate storage
  int j = 0; // Pointer to iterate temp

  // Copy values from temp to storage
  while( j != head ) {
   storage[ i ] = temp[ j ];
   i++;
   if( j == temp.length - 1 ) j = 0; // Wrap around array
   else j++;
  }
 }

 /**
  * Sets the type of expansion to be used when the underlying array nears capacity
  * @param rule The type of expansion to be used in the future
  * @throws InvalidInputException when the input provided does not correspond to an expansion type
  * @return True if the expansion rule was set successfully
  */
 public boolean setExpansionRule( char rule ) {

  // Check to make sure the rule provided was valid
  if( rule != EXPANSION_CONSTANT && rule != EXPANSION_DOUBLE )
   throw new InvalidInputException();

  // Set the rule
  expansionRule = rule;
  return true;
 }

 /**
  * Returns the current capacity of the array that holds the collection of
  * items currently in the DoubleQueue.  This method is used for testing
  * purposes only and WOULD NOT BE INCLUDED in a public release of DoubleQueue.
  * @return The capcity of the storage array
  */
 public int getCapacity() {

  return storage.length;
 }

 /**
  * Gets the number of elements currently in the DoubleQueue
  * @return The number of elements currently in  the DoubleQueue
  */
 public int getSize() {

  return size;
 }
} 
```

这是驱动程序：

```
public class Driver {

  public static void main( String[] args ) {

    // First, check the isEmpty() method
    System.out.println( "Check isEmpty() method:" );
    DoubleQueue<Integer> dq = new DoubleQueue<Integer>();
    if( dq.isEmpty() ) System.out.println( "isEmpty() method returns true when DoubleQueue is empty." );
    else System.out.println( "ERROR: isEmpty() method returns false when DoubleQueue is empty." );

    // Add something and check the isEmpty() method again
    dq.addFirst( 1 );
    if( dq.isEmpty() ) System.out.println( "ERROR: isEmpty() method returns true when DoubleQueue is not empty." );
    else System.out.println( "isEmpty() method returns false when DoubleQueue is not empty." );
    System.out.println();

    // Test expansion using default expansion ( double )
    System.out.println( "Check expansion by doubling (should double in capacity when the 10th element is added and again when the 19th element is added):" );
    dq = new DoubleQueue<Integer>();
    System.out.println( "Capacity before adding elements: " + dq.getCapacity() );

    for( int i = 1; i <= 20; i++ ) {

      dq.addFirst( i );
      System.out.println( "Added element #" + i + ". Capacity: " + dq.getCapacity() + "." );
    }

    // Test expansion using constant expansion
    System.out.println();
    System.out.println( "Check expansion by constant (should add ten to capacity when the 10th and 19th elements are added)." );
    dq = new DoubleQueue<Integer>();
    dq.setExpansionRule( DoubleQueue.EXPANSION_CONSTANT );
    System.out.println( "Capacity before adding elements: " + dq.getCapacity() );

    for( int i = 1; i <= 20; i++ ) {

      dq.addFirst( i );
      System.out.println( "Added element #" + i + ". Capacity: " + dq.getCapacity() + ". " );
    }

    // Test functionality as a STACK
    DoubleQueue<Character> stack = new DoubleQueue<Character>();
    String toBeReversed = "reht olleh";
    System.out.println();
    System.out.println( "String to be reversed: " + toBeReversed );

    // Add string to be reversed letter by letter into strck
    for( int i = 0; i < toBeReversed.length(); i++ ) {

      char j = toBeReversed.charAt( i );
      stack.addLast( j );
      System.out.println( "Added letter " + j );
    }

    System.out.println( stack.getCapacity() );
    System.out.println( stack.getSize() );

    // Print stack
    while( !stack.isEmpty() ) {

      try {

        System.out.print( stack.removeLast() );
      } catch( EmptyDoubleQueueException e ) {

      }
    }

    /**
    // This first bit tests the DoubleQueue as a stack, to reverse a strign
    DoubleQueue<Character> dq1 = new DoubleQueue<Character>();
    String toBeReversed = "hello";

    for( int i = 0; i < toBeReversed.length(); i++ ) {

      dq1.addLast( toBeReversed.charAt( i ) );
    }

    while( !dq1.isEmpty() ) {

      try {
        System.out.print( dq1.removeFirst() );
      } catch( EmptyDoubleQueueException e ) {
        // Do nothing
      }
    }**/

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:45:12.463

在您调用 expand 之后，您`head`和`tail`索引似乎是错误的。

在您的扩展方法返回后，您有以下数组 `[e, l, l, o, , t, h, e, r, null, null, null, null, null, null, null, null, null, null, null]`

然后分别设置为 0 和 1 `head`。`tail`然后在索引 1 处插入“h”，结果：

`[e, h, l, o, , t, h, e, r, null, null, null, null, null, null, null, null, null, null, null]`

这显然是错误的。

由于这是家庭作业，我会让你尝试从这里找出答案。

# java - 从文本中删除文件路径

> ID：13036629
> 
> 赞同：0
> 
> 时间：2012-10-23T18:13:15.847
> 
> 标签：java, android, regex, parsing

我有一个长文本，其中包含一些文件的路径。

我想要做的是从中删除路径。文件路径都是这样的：

```
some text 1
/all/extraItems/Java/.Scripts/.Sample1.js
some text 2
/all/extraItems/Android/.Scripts/.Sample2.js
some text 3 
```

我知道使用**"^/all"会选择一个以****/all**开头的句子，以及**.js$**以**.js**结尾的句子。但我无法将它们合并在一起以选择整个文件路径。

毕竟正则表达式应该放在下面的代码上以删除路径。

```
text.replaceAll(<RegularExpression> , ""); 
```

我可以为谁编写正则表达式？有什么工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:15:08.600

用于`.*?`将它们合并在一起

```
^/all.*?\.js$ 
```

因此，`regex`表示匹配 0 到 n 个字符，即以 ..`.*?`开头`all`和结尾的字符，`\.js`您需要转义`.`，因为`.`意味着匹配任何字符...

不要忘记使用**多行选项**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:15:31.413

如果你想“合并”它们，你还必须匹配它们之间的字符：

```
^/all.*?\.js$ 
```

`.`匹配任何字符，`*`重复前一个字符 0 次或更多次，`?`使重复不贪婪，避免匹配超过多行。由于您使用的是 Java，因此您需要在字符串中再次转义反斜杠：

```
"^/all.*?\\.js$" 
```

如果您还没有使用 multiline 选项（您实际上需要这样做，以便`^/all`处理`js$`您的输入），您可以这样做：

```
"(?m)^/all.*?\\.js$" 
```

# google-apps-script - UI 使用客户端处理程序根据复选框值启用元素

> ID：13036630
> 
> 赞同：1
> 
> 时间：2012-10-23T18:13:24.037
> 
> 标签：google-apps-script

所以我想在单击后根据复选框的值启用或禁用日期框。我可以在服务器端做到这一点，如下所示，但似乎无法弄清楚如何在客户端做到这一点。我的问题是如果不调用服务器，我似乎无法访问复选框的值。有任何想法吗？

```
var chkPaid = app.createCheckBox("Paid in Full").setName("paidInFull").setId("paidInFull");
var dateBox2 = app.createDateBox().setName("paidThrough").setFormat(UiApp.DateTimeFormat.DATE_MEDIUM).setEnabled(false).setId("paidThru");
var paidThruDisable = app.createServerHandler("disableHandler");
paidThruDisable.addCallbackElement(chkPaid);
chkPaid.addValueChangeHandler(paidThruDisable); 
```

* * *

```
function disableHandler(e){
  var app = UiApp.getActiveApplication();
  var widget = app.getElementById("paidThru");
  if(e.parameter.paidInFull !== "true"){
    widget.setEnabled(false);
  }else{
    widget.setEnabled(true);
  };
  return app;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:06:58.730

这是我写的一段代码，可以解决问题;-)

你可以[在这里在线测试](https://script.google.com/macros/s/AKfycbyeEtioOOI2DuqEKh590M-YyNA2eWYei9HpykRwIZL2bzE7WcFE/exec)

```
function doGet() {
  var app = UiApp.createApplication()
  var chkPaida = app.createCheckBox("Paid in Full").setValue(true);
  var chkPaidb = app.createCheckBox("Paid in Full").setVisible(false);
  var checkpanel = app.createHorizontalPanel().add(chkPaida).add(chkPaidb)
  var dateBox2 = app.createDateBox().setName("paidThrough").setFormat(UiApp.DateTimeFormat.DATE_MEDIUM).setId("paidThru").setName("paidThru");

  var Chandlera = app.createClientHandler().forTargets(dateBox2).setEnabled(false).forTargets(chkPaidb).setVisible(true).setValue(false)
  .forEventSource().setVisible(false)  
  chkPaida.addClickHandler(Chandlera)

  var Chandlerb = app.createClientHandler().forTargets(dateBox2).setEnabled(true).forTargets(chkPaida).setVisible(true).setValue(true)
  .forEventSource().setVisible(false)  
  chkPaidb.addClickHandler(Chandlerb)

app.add(checkpanel).add(dateBox2)
  return app
} 
```

# mysql - 我应该归档未使用的数据吗？

> ID：13036633
> 
> 赞同：0
> 
> 时间：2012-10-23T18:13:41.620
> 
> 标签：mysql, transactions

我在数据库中有一个表，它可能每分钟接受 x00 次插入，所以它会很快变大。

我应该定期存档这些数据吗？最好的方法是什么？

我目前正在通过交易做这样的事情：

```
function doArchiveMyTable() {
    $transaction->query("
        INSERT INTO `archive_my_table`
        SELECT * FROM `my_table`
        WHERE ...
    ");

    $transaction->query("
        DELETE FROM `my_table`
        WHERE ...
    ");

    return $transaction->commit();
} 
```

我什至应该打扰吗？如果我丢失数据会很糟糕，但如果数据库很慢也会很糟糕。

**关于使用的额外信息：**

该数据库由游戏的最终用户使用的 API 使用。该数据库用于存储经常更新的各种分数数据。

它实际上还没有上线，所以我估计任何时候都有 200 个用户，并且每分钟都执行大约 10 次插入。

用户和其他用户可以通过 API 查询其他用户的数据，后端脚本也经常查询这些数据。

所有查询都是 SELECT、INSERT、UPDATE 和偶尔的 DELETE。

用户每分钟查询数据库大约 15 次，但所有这些调用都是在 20 秒的短时间内完成的。

# c# - 在实体框架中映射 1 到 0-1

> ID：13036635
> 
> 赞同：2
> 
> 时间：2012-10-23T18:14:02.087
> 
> 标签：c#, sql-server, entity-framework, entity-framework-5

首先编写实体框架 (5) 代码，尽管我们不是从代码生成数据模型——我们只是手动保持它们同步（比听起来更痛苦）。

试图建立一个 1 对 0-1 的关系。这是使用可能具有 0 或 1 个地址的客户的虚构示例的设置：

**编辑：原始示例不正确。客户可以有 0-1 个地址，地址正好有 1 个客户。表设计和代码均已更新。**

```
地址
--------------
AddressId（身份）
地址文本
CustomerId （编辑：这采用了唯一约束）

```

```
顾客
--------------
客户 ID（身份）
顾客姓名

```

地址映射的相关部分：

```
 this.HasKey(t => t.AddressId);
   //SEE NOTE ON THIS BELOW
   //this.Property(t =>t.AddressId).
                   HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
   this.HasRequired(t => t.Customer)
       .WithOptional(); 
```

客户映射的相关部分：

```
 this.HasKey(t => t.CustomerId);
   this.HasOptional(b => b.Address)
            .WithRequired(); 
```

请注意在客户中注释掉的行。如果我包括这个，我会收到以下错误：

> ReferentialConstraint 中的依赖属性映射到存储生成的列。列：“客户 ID”。

如果我不包括它，我会得到：

> 当 IDENTITY_INSERT 设置为 OFF 时，无法在表“客户”中插入标识列的显式值。

高低搜索过，上面的代码似乎是推荐的做法。我还看到一些模糊的提及，除非两个表共享同名的键，否则无法建模 1:1 关系？

这种关系可以用代码建模吗？如果可以，正确的语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:20:39.263

您的映射看起来无效。您是说 an`Address`有一个 optional `Customer`，并且 a`Customer`有一个必需的地址，但是您在实体`Address`上的外键是可以`Customer`为空的，所以关系应该是相反的。

另外，是的，如果您想对 1 对 1 关系建模，那么您应该有一个`Customer`带有主键的表，然后是一个`Address`带有主键列的表，该主键列也是您的`Customer`表的外键。

否则，您实际上是在为数据库中的一对多关系建模。

# ruby-on-rails - 在 rails 3.2 中每个模型可以有多个夹具文件吗？

> ID：13036641
> 
> 赞同：7
> 
> 时间：2012-10-23T18:14:23.223
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unit-testing

在 Rails 3.2 中，给定的 ActiveRecord 对象是否可以有多个夹具文件？

客户要求将测试数据写入夹具，但也希望它们易于管理。我想通过引入第二套原件将包括/需要/渲染任何东西来稍微拆分固定装置。

我无法通过谷歌找到任何关于如何做到这一点的信息，而且固定装置不是我的一杯茶。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T23:35:44.690

在我看来，您想要做的是包含来自另一个 YAML 文件的 YAML 文件。这是一个涵盖如何做到这一点的问题：[如何在 YAML 文件中包含 YAML 文件？](https://stackoverflow.com/questions/2278241/how-to-include-a-yaml-file-inside-a-yaml-file)

由于fixtures已经有ERB，它应该很简单：

```
<%= IO.read(Rails.root.join "test/other_fixtures/fixture_to_load.yml") %> 
```

只需确保夹具位于主夹具目录之外，否则加载夹具的机制也会尝试将它们映射到模型。

如果您需要在夹具内部使用 ERB，请将其包裹在 中`ERB.new`，例如：

```
<%= ERB.new(IO.read(Rails.root.join "test/other_fixtures/fixture_to_load.yml")).result %> 
```

# javascript - 使用开发者工具单步执行 javascript 中的匿名函数

> ID：13036642
> 
> 赞同：2
> 
> 时间：2012-10-23T18:14:25.797
> 
> 标签：javascript

例如，我想检查名为“test”的变量。

```
(function() {
    var test = function(){alert("hello");};
    test();
})(); 
```

添加断点是执行此操作的唯一方法，还是有一些特定于 [chrome | javascript | 开发者工具]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:17:22.067

你可以试试这个： -

```
 console.error(e);

 (function() {
    var test = function(){alert("hello");};
     test();
     console.error(e);
  })(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:19:09.157

```
(function() {
  var test = function(){alert("hello");};
  debugger;
  test();
})(); 
```

# javascript - 如何在 Chrome 扩展程序中挂钩 jquery 表单提交

> ID：13036644
> 
> 赞同：4
> 
> 时间：2012-10-23T18:14:32.137
> 
> 标签：javascript, jquery, google-chrome-extension

我在 chrome 扩展中有简单的内容脚本来捕获所有表单提交。它在按钮触发提交时起作用（参见代码），但在 jquery 调用时不起作用。它应该工作无法理解出了什么问题。

```
content.js
---------
jQuery("form").submit(function() {
    alert('submit hooked!: ' + $(this).serialize());
}); 
```

页：

```
page.html
--------
<html>
  <head>
    <script type="text/javascript" src="jquery-1.8.2.min.js"></script>
    <script language="JavaScript">
      function foo() {
        jQuery("#some_form").submit();
      }

      function foo_native() {
        document.getElementById('some_form').submit();
      }
    </script>
  </head>
<body>
    <form action="http://example.com/handler" id="some_form">
      Your name:<input type="text" name="name"><br>
      Your email:<input type="text" name="email"><br>
      <!-- This hooked -->
      <input type="submit" value="Send simple submit"><br>
      <!-- Hook not working for such calls -->
      <input type="button" value="Send jquery submit" onclick="foo()"><br>
      <input type="button" value="Send native submit" onclick="foo_native()">
    </form>
    <br>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T18:59:11.383

## 背景

这与提交事件的工作方式有关。你可以在这里用小提琴测试这个`onsubmit`事件：http: [//jsfiddle.net/sirhc/VueEJ/](http://jsfiddle.net/sirhc/VueEJ/)

[由于W3C 邮件列表中](http://lists.w3.org/Archives/Public/www-dom/2012JanMar/0011.html)所述的历史原因，此行为是设计使然。

要解决此问题，您可能必须覆盖本机提交方法。为此，您必须将 javascript 注入页面，因为内容脚本无法访问内容窗口中的局部变量。

## 解决方案

我的解决方案涉及监听`submit`文档上的事件以进行正常的表单提交，同时还注入一个提交处理程序以手动触发`submit`页面上的事件。

请注意，此处的 JavaScript 方法利用了浏览器是现代 DOM 兼容浏览器这一事实。这里的某些方法在 IE 版本 8 及以下版本中不可用，但这很好，因为此代码用于 Chrome 扩展程序。我还建议不要使用 jQuery 并编写自己的序列化方法。

虽然没有要求，但我也尊重了提交处理程序`event.preventDefault()`。

### 内容.js

```
document.addEventListener("submit", function (e) {
  alert('submit hooked!: ' + $(e.target).serialize());
}, false);

// Remember to change this to the relative path to inject.js
injectScript( chrome.extension.getURL( "/" ), "inject.js" );

function injectScript ( aBasePath, aScriptURL ) {
  var scriptEl = document.createElement( "script" );
  scriptEl.src = aBasePath + aScriptURL;
  scriptEl.async = false;

  (document.body || document.head || document.documentElement)
  .appendChild( scriptEl );
} 
```

### 注入.js

```
HTMLFormElement.prototype._nativeSubmit = HTMLFormElement.prototype.submit;
HTMLFormElement.prototype.submit = function () {
  var submitEvent = document.createEvent("HTMLEvents");
  submitEvent.initEvent("submit", true, true);
  if (this.dispatchEvent(submitEvent)) {
    this._nativeSubmit.apply(this, arguments);
  }
}; 
```

### manifest.json（待补充，这*不是*整个文件）

```
"web_accessible_resources": [ "inject.js" ] 
```

对清单的添加允许将`inject.js`JavaScript 文件注入页面。

## 参考

*   [http://briancrescimanno.com/2009/05/14/form-submit-method-doesnt-fire-submit-event-workaround/](http://briancrescimanno.com/2009/05/14/form-submit-method-doesnt-fire-submit-event-workaround/)
*   [https://developer.mozilla.org/en-US/docs/DOM/Creating_and_triggering_events](https://developer.mozilla.org/en-US/docs/DOM/Creating_and_triggering_events)
*   [http://www.jspatterns.com/the-ridiculous-case-of-adding-a-script-element/](http://www.jspatterns.com/the-ridiculous-case-of-adding-a-script-element/)
*   [http://paulirish.com/2011/surefire-dom-element-insertion/](http://paulirish.com/2011/surefire-dom-element-insertion/)
*   [http://developer.chrome.com/extensions/manifest.html#web_accessible_resources](http://developer.chrome.com/extensions/manifest.html#web_accessible_resources)

# java - Google App Engine - Brightcove 集成

> ID：13036645
> 
> 赞同：0
> 
> 时间：2012-10-23T18:14:37.030
> 
> 标签：java, google-app-engine, servlets, upload, brightcove

我尝试在 Java 中将视频上传与 Brightcove 集成：

[http://support.brightcove.com/en/docs/java-example-upload-video](http://support.brightcove.com/en/docs/java-example-upload-video)

但是使用 GAE，我们不能在磁盘上写入，所以我得到了以下异常：

> java.lang.NoClassDefFoundError: java.rmi.server.UID 是一个受限类。有关详细信息，请参阅 Google App Engine 开发人员指南。

异常发生在这一行：（UploadVideo.java）

```
 // Parse the request into a list of DiskFileItems
 List items = upload.parseRequest(request); 
```

因为它正在尝试使用`org.apache.commons.fileupload.disk.*`哪个不适用于 GAE。

我正在寻找解决此问题的方法。看起来这可能真的很棘手，所以我愿意接受任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:26:31.240

一种常见的方法是使用 BlobStore。请参阅： [https](https://developers.google.com/appengine/docs/java/blobstore/overview)
://developers.google.com/appengine/docs/java/blobstore/overview 想法是：通过您网页的表单提供 blobstore 创建的上传 URL（即，brightcove 的“使用 HTML 表单上传”部分）例子）。blobstore 的createUploadUrl 函数接受一个回调URL 的参数... 即文件上传并存储到BlobStore 后，GAE 将请求您的回调URL。在该请求中，您可以通过 JSON 将视频 blob 发送到 Brightcove（或者，最好生成一个任务以将其发送到 Brightcove）。

Google Cloud Storage 是另一种选择，请参阅： [https](https://developers.google.com/appengine/docs/java/googlestorage/overview)
://developers.google.com/appengine/docs/java/googlestorage/overview 您可以写入 Cloud Storage 请求流，而不是写入文件。

# r - 如何连接字符串和从 R 中的函数评估的输出？

> ID：13036649
> 
> 赞同：12
> 
> 时间：2012-10-23T18:15:00.230
> 
> 标签：r, statistics

基本上，我有以下说法：

```
counter <- 3
k <- 9999 
```

我想让 R 打印以下内容：

```
on the 3rd count: 9999 
```

有谁我应该使用什么命令来做到这一点？请为我拼写出来，因为我对 R 完全陌生。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-23T18:19:08.827

基本结构是

```
paste("on the ", counter, "rd count: ", k, sep="") 
```

您必须有点聪明才能为数字选择正确的后缀（即 3 后的“rd”，4-9 后的“th”等。这是一个功能：

```
suffixSelector <- function(x) {
  if (x%%10==1) {
    suffixSelector <- "st"
  } else if(x%%10==2) {
    suffixSelector <- "nd"
  } else if(x%%10==3) {
    suffixSelector <- "rd"
  } else {
    suffixSelector <- "th"
  } 
```

}

因此：

```
suffix <- suffixSelector(counter)
paste("on the ", counter, suffix, " count: ", k, sep="") 
```

您需要设置`sep`参数，因为默认情况下`paste`会在字符串之间插入一个空格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T18:33:11.460

采用`sprintf`

```
> sprintf("on the %drd count: %d", counter, k)
[1] "on the 3rd count: 9999" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T18:58:44.203

这是一种将每个整数与适当的后缀挂钩的稍微不同的方法。如果你把它分开，你会发现它确实捕获了构造每个整数的序数形式的句法（？）规则。

```
suffixPicker <- function(x) {
    suffix <- c("st", "nd", "rd", rep("th", 17))
    suffix[((x-1) %% 10 + 1) + 10*(((x %% 100) %/% 10) == 1)]
}

## Testing with your example
counter <- 3
k <- 9999
paste("on the ", paste0(counter, suffixPicker(counter)), 
      " count: ", k, sep="")
# [1] "on the 3rd count: 9999"

## Show that it also works for a range of numbers
x <- 1:24
paste0(x, suffixPicker(x))
#  [1] "1st"  "2nd"  "3rd"  "4th"  "5th"  "6th"  "7th"  "8th"  "9th"  "10th"
# [11] "11th" "12th" "13th" "14th" "15th" "16th" "17th" "18th" "19th" "20th"
# [21] "21st" "22nd" "23rd" "24th" 
```

一个解释性说明：需要该`10*(((x %% 100) %/% 10) == 1)`位来挑选以 10 到 19 结尾的数字（11、12 和 13 是这里真正的坏演员）将它们全部发送到 contains 的`suffix`元素`"th"`。

# jquery - 滚动导航

> ID：13036652
> 
> 赞同：1
> 
> 时间：2012-10-23T18:15:05.917
> 
> 标签：jquery, navigation, scroll

我是 JQuery 的新手，这个问题之前一定被问过数百万次。我的网站将 4 页合为一页。我想保持我的导航菜单就像它在这个网站上一样[http://www.oncarbure.com/en.html](http://www.oncarbure.com/en.html) 在第一页的底部和其余页面的顶部。任何帮助将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:31:28.893

## 仅使用 CSS

如果您只想将菜单定位在页面底部，那么固定定位将为您解决问题：

```
.menu
{
    position: fixed;
    width: 100%;
    bottom: 0;
    background: #333;
} 
```

[这个 JSFiddle](http://jsfiddle.net/t4F3M/)展示了一个简化的例子。

当您以后想将其定位在顶部时，只需设置`top: 0;`它，它将被移动到顶部并且不会随着滚动而移动。

### 示例页面注释

您提到的示例页面使用了您可能不会使用的高级技术（至少一开始不会），因为我理解您的评论。

# encryption - 解密 MS-Access 2003 后端？

> ID：13036653
> 
> 赞同：1
> 
> 时间：2012-10-23T18:15:08.590
> 
> 标签：encryption, ms-access-2003, jet, cracking

从[我读到](http://www.everythingaccess.com/tutorials.asp?ID=Changing-the-encryption-type-in-Access-2007)的 MS-Access 2003 数据库 (*.mdb) 上的加密非常弱。

我正在使用具有前端和 odbc 访问权限的旧版 JET/MS-Access 2003 数据库，并且我很难使用 Microsoft SQL Server Migration Assistant 2008 for Access 来移植数据。导入时，大多数表都说表是加密的。

有破解 MS-Access 2003 加密的工具吗？有没有办法找出使用什么加密来加密它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:12:41.020

*   *有没有办法找出使用什么加密来加密它？*

对于 Access 2003，我认为只使用了一种编码类型。以下引自[Encryption level for 2003](http://www.pcreview.co.uk/forums/encryption-level-2003-a-t2624066.html)：

*Access 使用 RC4 加密和存储在文件头中的 32 位密钥。它通常被称为“编码”而不是“加密”，因为它始终是完全可逆的，因为加密密钥始终可用（无论您是否应用 ULS）。*

*   *有破解 MS-Access 2003 加密的工具吗？*

也许吧，但我不知道。我会在 Access 2003 中打开 db 文件，然后使用 Tools->Security->Encode/Decode Database 创建解码副本并将副本迁移到 SQL Server。如果您没有安装 Access，您应该仍然可以使用`dbDecrypt`(value = 4) 作为该`CompactDatabase`方法的选项。

```
DBEngine.CompactDatabase olddb, newdb, locale, options, password 
```

# javascript - 如何在 Window 的嵌入浏览器中调试 Javascript？

> ID：13036658
> 
> 赞同：5
> 
> 时间：2012-10-23T18:15:17.243
> 
> 标签：javascript, jquery, internet-explorer, debugging, sketchup

当我在 Sketchup 中使用浏览器时，我需要在 Windows 7 和 XP 的嵌入式浏览器中调试 Javascript (Jquery) 源代码。我尝试使用 console.log，但它对我没有帮助，因为会阻止应用程序的布局。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:07:16.460

在 Windows 中尝试使用 Charles Web 调试代理 www.charlesproxy.com 调试 javascript

在 Mac OSX 上的 WebDialog 中启用 Web Inspector 面板...

1.  转到 ~/Library/Preferences/com.xxx.yourapp.plist
2.  使用 Property List Editor.app(default) 或其他打开文件
3.  单击添加 [+] 图标
4.  新项目名称“WebKitDeveloperExtras”，然后选项卡
5.  将类型设置为布尔值，然后制表符
6.  复选框，将此值设置为 true
7.  打开您的应用程序，打开 WebDialog，右键单击空白处并选择“检查元素”以打开检查器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:47:32.283

There's a checkbox in the Internet Explorer options that might help:

Internet Options > Advanced > Browsing

*   Disable script debugging (Internet Explorer)
*   Disable script debugging (Other)

The "Other" will affect embedded webcontrols. If you uncheck that you should get error messages popping up when they occur in the SketchUp WebDialog.

It is possible to hook up debuggers as well, I don't remember exactly how it was right now, but I found this article which sounds very familiar. I think that should work: [http://blogs.perl.org/users/mark_leighton_fisher/2011/09/debugging-javascript-in-a-webbrowser-control-from-vs2010.html](http://blogs.perl.org/users/mark_leighton_fisher/2011/09/debugging-javascript-in-a-webbrowser-control-from-vs2010.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-28T14:56:01.983

我目前正在成功使用类似于此处描述的解决方案。

[http://blogs.perl.org/users/mark_leighton_fisher/2011/09/debugging-javascript-in-a-webbrowser-control-from-vs2010.html](http://blogs.perl.org/users/mark_leighton_fisher/2011/09/debugging-javascript-in-a-webbrowser-control-from-vs2010.html)

警告：需要 Visual Studio。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T18:18:56.020

你试过Weinre吗？可在此处获取[http://people.apache.org/~pmuellr/weinre/docs/1.x/1.5.0/](http://people.apache.org/~pmuellr/weinre/docs/1.x/1.5.0/) 非常好用且易于使用的工具。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-23T18:22:07.940

F12 开发人员工具使 Web 开发人员能够在不离开浏览器的情况下快速调试 JavaScript 代码。通过此链接[http://msdn.microsoft.com/en-us/library/ie/gg699336(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/gg699336(v=vs.85).aspx)

# javascript - Soundcloud 流式传输音频

> ID：13036667
> 
> 赞同：3
> 
> 时间：2012-10-23T18:15:50.627
> 
> 标签：javascript, jquery, soundcloud, soundmanager2

我正在尝试从 soundcloud 用户流式传输曲目。我有客户 ID 并且拉动轨道工作正常。但是当我尝试播放曲目时，它不起作用。这是我在`onload()`网页中使用的代码。

```
<script>
    function pageload()
    { 
        SC.initialize({
            client_id: {MY CLIENT ID}
        });

        SC.stream("/tracks/{MY TRACK ID}", function(sound){
            sound.play();
        });
    }
</script> 
```

注意：我也包含了 soundmanagerjs。

在控制台中我得到一个错误。

```
[23:38:44.140] -- SoundManager 2: HTML5 support tests (/^(probably|maybe)$/i): mp3: false (using flash), mp4: false (using flash), ogg: true, wav: true 
[23:38:44.199] sound.play is not a function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:08:37.917

这是一个 javascript 错误，而不是 soundmanager。

```
function(sound){
        sound.play();
}); 
```

这是您的问题，因为您正在调用一个不存在的函数。我不太确定您的其他代码是什么，但通常您在 soundmanager 中播放声音的方式是：

```
soundManager.play(SoundID); 
```

在您的情况下，我假设您传递的变量“声音”是 soundid，因此在函数（声音）中

```
soundManager.play(sound); 
```

# jquery - 没有得到 JQuery 响应

> ID：13036668
> 
> 赞同：0
> 
> 时间：2012-10-23T18:15:54.820
> 
> 标签：jquery

我有以下脚本：

```
<script>
    $(document).ready(function(){
        $("div.msg").hide();
        $("button.show").click(function(){
            $("div.msg").slideDown(2000);
        });
        $("button.hide").click(function(){
            $("div.msg").slideUp(2000);
        });
        $("form.reg").submit(function(){
            var name = $("#name").val();
            if(($("#name").val() == "") || ($("#name").val() == null)){
                $("div.error").html("Name cannot be left blank");
                //alert("Name cannot be left blank");
                return false;
            }
            else{
                $("div.error").html("Name:"+name);
                return true;
            }       
        });
        $("#name").blur(function(){
            var name = $("#name").val();
            alert("Hi! "+name);
            $.ajax({
                type:"POST",
                url:"validate.php",
                data:"name="+name,
                success:function(res){
                    //alert(res);
                    $("#error").val(res);
                }
            });
        }); 
    });
</script> 
```

和 validate.php 脚本：

```
<?php
if(isset($_POST['name'])){
    $name = $_POST['name'];
    if($name == 'sam')
        echo '<strong>Already taken.</strong>';
    else
        echo '<strong>Avaiable</strong>';
}
else
    echo 'Not Set!';
?> 
```

我的问题是我从来没有从这个验证页面得到响应到我的 div (#error) 中。请帮助如何解决同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:26:39.787

看来您只是使用了错误的 jQuery 函数来设置结果。从您之前的代码中，选择器似乎`#error`指向一个 div 元素，在这种情况下，您需要使用该函数`.html()`来设置响应。

改变

```
 $("#error").val(res); 
```

至

```
$("#error").html(res); 
```

当然，这是假设您在 POST 的成功函数中得到响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:01:07.333

我认为如果您将验证功能分开会更容易。然后在您的 php 验证脚本上使用 json 响应更安全。

HTML / Javascript 函数 form_validation() { var error = 0; 变量错误消息；

```
 if(($("#name").val() == "") || ($("#name").val() == null)){

        error_msg = "Name cannot be left blank";
        error = 1;
    }else
    {
         $.ajax({
                type:"POST",
                url:"validate.php",
                data:"name="+$("#name").val(),
                success:function(res){                    
                    if(res.status=='error')
                    {
                        error_msg = res.msg;
                        error = 1;
                    }
                },
                dataType: "json"
            });
    }

    if(error==1)
    {
        $("div.error").html(error_msg);
        return false;
    }else
    {
        return true;
    }
}

$(document).ready(function(){

    ("#name").blur(function(){
                form_validation();
        }); 

    $("form.reg").submit(function(){

        if(form_validation())
        {
            #### Do ajax post to PHP to save to your DB
        }

        return false; ### Do disable the form submit (page refresh)
    });

  });
</script> 
```

PHP 验证脚本

```
<?php

if(isset($_POST['name'])){
    $name = $_POST['name'];
    if($name == 'sam')
        $arr = array("status"=>'success','msg'=>'Taken');
    else
        $arr = array("status"=>'success','msg'=>'Available');
}
else
{
    $arr = array("status"=>'error','msg'=>'Error');
}

    echo json_encode($arr);
    exit;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:36:42.250

尝试

```
$.ajax({                                
    url: "validate.php",
        data: { name: $("#name").val() },
        type: "POST",
        success: function (res) {
        alert(res); 
        //$("#error").val(res);
        },
        error: function(xhr, status, error) {
        alert(xhr.responseText);
        }                      
}); 
```

对于这类场景，像 firebug 这样的工具会很有用。通过导航到 Net-->XHR 选项卡，我们可以看到异步请求的结果。

# testing - 提供移动应用测试服务的第三方公司

> ID：13036674
> 
> 赞同：2
> 
> 时间：2012-10-23T18:16:36.943
> 
> 标签：testing, mobile

我们的所有团队都使用我们应用程序的候选发布版本运行手动测试。这开始变得笨拙，尤其是随着各种设备的问世（iPad Mini，你是认真的吗？！）。

话虽如此，我们正在寻找可以使用所有受支持的 iOS 设备针对我们的应用程序运行完整测试套件的第三方公司。我们可以编制一份提供此类服务的公司名单吗？

*注意：如果您认为这个问题不适合 Stack Overflow，请不要投反对票。相反，请告诉我这篇文章在 Stack Exchange 的哪个位置。我认为这是提问的好地方。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-12T18:28:54.377

我碰巧最近正在研究这个，这是我到目前为止提出的一个简短列表：

1.  雨林 - [https://www.rainforestqa.com/](https://www.rainforestqa.com/)
    *   它使用书面简单的英语测试和 Mechanical Turk 让真人运行测试并报告问题
    *   目前仅限移动网络
2.  掌声 - [http://www.applause.com/](http://www.applause.com/)
    *   与真实的人在真实世界的场景中执行真实测试
    *   可以进行功能、可用性、本地化、负载和安全测试
3.  TestElf - [https://www.testelf.com/](https://www.testelf.com/)
    *   在真实设备、iOS 和 Android 上进行功能测试
    *   两天测试周转
    *   将创建包含屏幕截图、测试用例、崩溃日志和重现步骤的综合报告

# python - 为 HMAC 准备一个字符串

> ID：13036675
> 
> 赞同：2
> 
> 时间：2012-10-23T18:16:42.350
> 
> 标签：python, node.js, hmac

我正在编写一个使用 HMAC 进行消息身份验证的 Web 服务。我在准备摘要的“数据”时遇到了一些问题，并且在 Python 与 NodeJS 中为相同的“数据”获得了不同的摘要。

我相当确定这个问题是由于编码造成的，但我不确定如何最好地解决这个问题。

Python代码：

```
import hmac
from hashlib import sha1

f = open('../test.txt')
raw = f.read()

raw = raw.strip()

hm = hmac.new('12345', raw, sha1)
res = hm.hexdigest()
print res

>> 5bff447a0fb82f3e7572d9fde362494f1ee2c25b 
```

NodeJS（咖啡）代码：

```
fs = require 'fs'
http = require 'http'
{argv} = require 'optimist'
crypto = require 'crypto'

# Load the file
file = fs.readFileSync argv.file, 'utf-8'
file = file.trim()

# Create the signature
hash = crypto.createHmac('sha1', '12345').update(file).digest('hex')
console.log(hash)

>> a698f82ea8ff3c4e9ffe0670be2707c104d933aa 
```

编辑：另外，raw 的长度比文件长 2 个字符，但我不知道这两个字符来自哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:02:58.667

这是您从文件系统读取的数据的编码问题，与您使用的算法无关。

当你在 Python 和 JavaScript 中处理字符串数据时，你应该对存储数据的编码非常小心。尝试使用字符串（特别是具有编码这样的属性）来处理数据，或者用“原始数据”。在读取和签署数据时，您可能不应该关心编码，并尝试在您的语言中尽可能多地使用“原始”数据。

需要注意的几点：

*   文件系统存储“原始”字节，对文件的内容和编码一无所知。此外，对于某些文件（例如 jpeg），“编码”概念毫无价值
*   这同样适用于加密算法。他们使用原始字节，对它的“字符表示”一无所知。这就是为什么数字签名适用于各种二进制文档等的原因。
*   `trim()`在 javascript 或`strip()`python 中使用字符串，它们的行为可能因底层编码而异（`u's '.encode('utf-16').strip().decode('utf-16')`例如，在 python 中尝试）。如果可能的话，我宁愿避免使用修剪，而不是混合使用数据的方式。
*   Python 2.x（我想还有 Javascript）有一套用于字符串和原始数据之间隐式转换的规则。

在您的代码中，您在 Python 中处理二进制数据，但在定义要读取的文件的编码时，在 JavaScript 中转换为字符串。显然，在加密模块中有一种从 utf-8 到原始字符串的隐式转换，但我不知道它做了什么。

[如此处](http://nodejs.org/api/buffer.html#buffer_buffer)所述，在 node.js 中处理原始字符串的最合理的方式是使用缓冲区。您可以从文件系统读取缓冲区，但不幸的是，nodejs 加密库还不支持它们。[如此处](http://nodejs.org/api/crypto.html#crypto_proposed_api_changes_in_future_versions_of_node)所述：

> Crypto 模块被添加到 Node 之前，还有统一的 Stream API 的概念，以及用于处理二进制数据的 Buffer 对象。
> 
> 因此，流类没有其他 Node 类中的典型方法，并且许多方法默认接受和返回二进制编码的字符串，而不是缓冲区。

也就是说，为了使示例工作，当前的方法是通过将“二进制”作为调用的第二个参数传递来读取数据：

```
file = fs.readFileSync argv.file, "binary" 
```

另外，正如我所说，我宁愿避免剥离我刚刚从文件中读取的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:26:18.450

一些尝试的想法：

*   检查`raw`具有相同的长度`file`
*   `f`以二进制形式打开
*   `import codecs`并`codecs.open`与编码一起使用
*   `strip`将删除 Python 中字符串开头和结尾的所有空格 - 我认为`trim`只会从结尾删除。因此，您可能希望`rstrip()`设置显式字符来获得相同的行为

# javascript - jQuery 从输入中获取值并创建一个数组

> ID：13036676
> 
> 赞同：24
> 
> 时间：2012-10-23T18:16:47.043
> 
> 标签：javascript, jquery, input, key-value

我在一个页面上有很多输入。我想使用 jQuery 创建一个包含每个输入的名称和值的关联数组。我试过了：

```
<input class="activeInput" type="text" name="key1" value="red">
<input class="activeInput" type="text" name="key3" value="France">

inputValues = $('.activeInput').val(); 
```

编辑 - 多亏了有见地的评论，似乎创建一个对象是一个更好的方法。关于如何创建对象的任何建议？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-23T18:19:48.827

您可以使用[`.each()`](http://api.jquery.com/each/)迭代元素并将名称和值添加到地图（普通对象）中，如下所示：

```
var map = {};
$(".activeInput").each(function() {
    map[$(this).attr("name")] = $(this).val();
});

alert(map.key1); // "red" 
```

**[看到它在行动](http://jsfiddle.net/8MBHZ/)**。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-08-18T12:43:08.187

要创建一个值数组，您可以这样做：

```
var $inputValues = $('.activeInput')
  .map((i, el) => el.val())
  .toArray(); 
```

要创建具有键和值的对象，您可以执行以下操作：

```
var data = $('.activeInput')
  .toArray()
  .reduce((accumulator, element) => {
    accumulator[element.name] = element.value;
    return accumulator;
  }, {}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-23T18:28:13.727

通过循环运行它们，您可以创建具有字符串可访问值的对象。Javascript 没有关联数组的概念，但是使用括号语法，您可以访问对象的属性，其方式与 PHP 中关联数组的工作方式非常相似。

```
var values = {};
$('.activeInput').each(function() {
    values[this.name] = this.value;
});

console.log(values['key1'], values['key3']);
// Note, this is the same as above.
console.log(values.key1, values.key3); 
```

在您的控制台中，您应该看到： red France

这是一个[JsFiddle http://jsfiddle.net/rEtVt/](http://jsfiddle.net/rEtVt/)。

这也称为用于快速查找的哈希图（概念）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T18:19:30.217

```
var inputValues = new Array();
$('input').each(function(){
    inputValues[$(this).attr('name')] = $(this).val();
}); 
```

当然，这是假设您想要所有输入的值。

* * *

话虽如此，许多不使用 Array 的原因已经引起了我的注意。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T20:02:27.337

如果您需要序列化表单以进行 ajax 提交，那么您应该看看[serialize](http://api.jquery.com/serialize/)和[serializeArray](http://api.jquery.com/serializeArray/) jQuery 方法。当您有许多具有相同`name`属性的输入必须在服务器上创建数组时，可能会发生特殊情况。

否则，我会`serializeArray`在表单元素上调用 jquery 并迭代其结果以将其转换为对象。

UPD：添加示例[http://jsfiddle.net/zQNUW/](http://jsfiddle.net/zQNUW/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-23T18:18:12.627

试试这个：

```
var values = new Object() // creates a new instance of an object
$('.activeInput').each(function() {
    values[$(this).attr('name')] = $(this).val()
}) 
```

检查对象属性：

```
output = ""
for (property in values) {
  output += property + ': ' + values[property]+'; ';
}
alert(output) 
```

# iphone - 将 iOS 应用标记为与 ios6 不兼容

> ID：13036678
> 
> 赞同：0
> 
> 时间：2012-10-23T18:17:09.007
> 
> 标签：iphone, app-store, compatibility

我有一个在 iOS 5 上运行的 iPhone 应用程序，但在 iOS 6 上存在严重的、非平凡的问题。有没有办法在 App Store 中将应用程序标记为与 iOS 6 不兼容一段时间，以便使用 iOS 的用户6 不会看吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:00:22.347

您不能让它对`iOS`6 个用户不可见。您唯一能做的就是，在应用启动时检查当前操作系统是什么并向用户显示消息并退出应用。但我不建议这样做。更好的解决方案是修复`iOS`6 中的问题并发布应用程序。那会更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:11:49.513

不，我不这么认为。在这两个 iOS 版本中，显然 iOS6 的支持时间会比 iOS5 更长。无论您的应用程序在 iOS6 下出现什么问题，显然您都需要修复它们。如果有的话，如果您必须放弃对 iOS5 的支持才能使其在 iOS6 下符合您的喜好，那么我会说：就这样吧。（我认为这是最后的手段，但如果您别无选择，这是合法的。）最终，您的所有 iOS5 用户都将使用 iOS6 及更高版本。作为一个数据点，iOS4 用户的数量已经大幅减少。

# c - C 算法溢出内存

> ID：13036682
> 
> 赞同：0
> 
> 时间：2012-10-23T18:17:18.610
> 
> 标签：c, overflow

我正在研究一个在线代码学校的简单算法。以下算法在我的 Xcode 控制台上运行良好，但在线平台输出我正在溢出内存。以下代码处理股票的筛选。（我第一次使用 malloc 动态分配，但是在这个消息之后，我使用了简单的数组，见下文）。

假设您有 N 种产品的库存。假设初始库存由大小为 N 的一维数组 ( `c[i], i between 0 and N-1`) 设置。现在假设有 M 个操作，每个操作由两个条目表示：产品的索引和输入的产品数量。结果输出库存的每个产品的最终状态。这是一个例子：

输入 ：

3（产品数量）4 6 3（产品'1'的4个项目，产品'2'的6个，...）2（操作数量）2 3（产品'2'的3个元素）1 -1（1 个元素减去产品“1”）

输出 ：

3（产品“1”左侧 4-1） 9（产品“2”左侧 6+3） 3（产品“3”左侧）

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{   int i,j,N,M;
    //Number of products
    scanf("%d",&N);
    //Initial stock of each product
    int c[N];
    //Input if the user
    for (i = 0; i < N; i++) {
        scanf("%d", &c[i]);}
    //Outputs's result
    int res[N];
    //Initializing the output res
    for (i = 0; i < N; i++) {
        res[i] = c[i];}
    //Number of operations
    scanf("%d",&M);
    //Each operation represented by the index of the product, and the number elements of the        //latter
    int d[M][2];
    //A loop to update at each step the stock
    for (i = 0; i < M; i++) {
        scanf("%d%d", &d[i][0],&d[i][1]);}
    for(i=0;i<M;i++){
                res[d[i][0]-1] = res[d[i][0]-1] + d[i][1];}
    //Printing the result
    for(i=0;i<N;i++){
        printf("%d ",res[i]);}
} 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:36:00.220

在此循环中读取产品索引时，您不会检查它们的范围：

```
for (i = 0; i < M; i++) { scanf("%d%d", &d[i][0],&d[i][1]);} 
```

因此，如果有人输入超出范围的产品索引，程序将索引超出 res 数组的末尾。

# mysql - 根据另一列获取最小出现次数

> ID：13036685
> 
> 赞同：0
> 
> 时间：2012-10-23T18:17:29.883
> 
> 标签：mysql, sql

问题：有多少部电影有最少数量的演员？

桌子：

```
title | year | person | role (actor, director, writer, producer) 
```

我做了什么：

```
SELECT title, count(role) 
FROM movie_table 
where role='actor' 
GROUP BY title 
ORDER by count(role) ASC; 
```

我得到了什么：

```
title (007, Dark Knight, Superman, Batman ...) | count(role) (1, 1, 2, 2,...) 
```

我需要的是一种计算具有最小演员角色的电影的方法，在这种情况下是 2（007 和黑暗骑士）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:25:04.133

目前还不清楚你想要什么，但似乎你在问这个：

```
SELECT title, count(role) 
FROM movie_table 
where role='actor' 
GROUP BY title 
HAVING count(role) = 1
ORDER by count(role) ASC; 
```

根据您的评论，您可以使用以下内容：

```
SELECT title
FROM movie_table 
where role='actor' 
GROUP BY title 
HAVING count(role) = (select min(cnt)
                      from (select count(role) cnt
                            from movie_table
                            group by title) c)
ORDER BY count(role); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/1b56a/13)

如果您只想要总数，请将`count()`函数应用于查询：

```
select count(title) Total
from
(
  SELECT title
  FROM movie_table 
  where role='actor' 
  GROUP BY title 
  HAVING count(role) = (select min(cnt)
                        from (select count(role) cnt
                              from movie_table
                              group by title) c)
) x 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/1b56a/18)

# vb.net - 将某些内容设置为 Nothing 后，它会保持以前的状态吗？

> ID：13036686
> 
> 赞同：0
> 
> 时间：2012-10-23T18:17:30.350
> 
> 标签：vb.net, nothing

我有以下内容：

```
For Each curCustomer As Customer In _customersEdit
    If (IsNothing(curCustomer)) Then
        Continue For
    End If
    'other code
    If (curCustomer.SeatIDs(0) = primarySeat) Then
        'other code
    End If

    If (curCustomer.SeatIDs.Count = 0) Then
        curCustomer = Nothing
    End If
Next 
```

运行此代码一次没问题后，当您第二次运行它时，虽然我在检查它是否是主要座位时出错，因为 SeatIDs 什么都没有。当我在 curCustomer = Nothing 上设置断点时，它第一次触发，我将客户名称更改为“test”，在下一行放置一个断点，它确实将 curCustomer 设置为它应该有的任何东西。接下来，当我再次运行代码时，它在检查主要座位时抛出了错误，并且 curCustomer 仍然存在，并且在将其设置为 Nothing 之前我给它起了“测试”名称。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:35:05.910

`curCustomer = Nothing`实际上并没有做任何事情（在示例中），因为它`curCustomer`在下一个 for-each 序列中重新初始化，并且`curCustomer`仅作为引用起作用（您正在对数组中的项目的引用，而不是数组项目本身）。

您将需要使用索引将其设置为数组中的任何内容`_customersEdit`。

你可以这样做：

```
 Dim i As Integer
    For i = 0 To _customersEdit.Count - 1
        ' your check code
        If (curCustomer.SeatIDs.Count = 0) Then
            _customerEdit(i) = Nothing
        End If

    Next 
```

或者可能更好：

```
 Dim i As Integer
    For i =  _customersEdit.Count - 1 To 0 Step -1
        ' your check code
        If (curCustomer.SeatIDs.Count = 0) Then
            _customerEdit.RemoveAt(i)
        End If
    Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:32:20.603

`_customersEdit(i) = Nothing`将数组中的引用设置为 Nothing。

# javascript - 浏览器调试器在任何 javascript 触发时自动停止在代码行（不知道代码行在哪里）

> ID：13036688
> 
> 赞同：0
> 
> 时间：2012-10-23T18:17:45.677
> 
> 标签：javascript

有没有办法让浏览器调试器（firebug 或 chrome）在任何 javascript 代码触发后立即中断（在执行的代码行处停止）？**（不知道代码行在哪里）** 我知道断点。我只需要调试器在执行一行 javascript 时**自动**停止

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:19:15.893

在萤火虫下方左侧的萤火虫面板上有两个黄色垂直线的按下暂停按钮的按钮

![在此处输入图像描述](../Images/3d91e22df99aca0f5117049db6c57174.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:20:10.860

您应该为此使用[断点。](https://getfirebug.com/doc/breakpoints/demo.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:20:16.333

只需在 firebug 中打开脚本选项卡，然后单击要放置断点的行的左侧

![在此处输入图像描述](../Images/d8fe136b6353141d55813f049ee9e6d8.png)

如果您需要停止当前的 javascript 执行（不知道正在运行什么），请按暂停按钮：

![在此处输入图像描述](../Images/b077270ed20b398ddcdb98aedc9b4adc.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T18:21:05.350

请参阅此答案： [如何在 Google Chrome 中的内联 Javascript 中设置断点？](https://stackoverflow.com/questions/5156388/how-to-set-breakpoint-in-inline-javascript-in-google-chrome-browser-for-linux)

这个答案（对于 Chrome）： [https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints)

并完成这个以获得一些有趣的提示： [http ://www.andismith.com/blog/2011/11/25-dev-tool-secrets/](http://www.andismith.com/blog/2011/11/25-dev-tool-secrets/)

# java - 无法使用 curl 访问在 Eclipse 中创建的 Web 应用程序

> ID：13036692
> 
> 赞同：0
> 
> 时间：2012-10-23T18:18:04.947
> 
> 标签：java, tomcat, web-applications, curl

我用 eclipse 创建了一个 web 应用程序。我可以运行它并且可以在浏览器中访问它。我想使用 curl 访问它，但我收到“404，在此服务上找不到请求的 URL /de.vogella.wtp.jsp/ShowAll.jsp”作为响应。我正在使用的命令是

```
curl http://localhost:8080/de.vogella.wtp.jsp/ShowAll.jsp 
```

我们必须在 tomcat 上进行任何设置才能从 curl 或任何 java 程序访问它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:19:31.527

I could get the successful response from Curl when I created a war file from eclipse web project and deployed it to Tomcat. I thought running project on server (Tomcat) through eclipse was enough.

Is it necessary to export the eclipse web project and deploy it to tomcat? I believe there should be better way than this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:31:37.680

使用[HTTPTracer 之](http://simile.mit.edu/wiki/HTTPTracer)类的代理来确定浏览器请求和 curl 请求之间可能存在的差异。

# javascript - 使用 JayData 的 webSQL 事务

> ID：13036693
> 
> 赞同：0
> 
> 时间：2012-10-23T18:18:08.987
> 
> 标签：javascript, web-sql, jaydata

这个问题来自 JayData 论坛，但我决定在这里分享它，因为这是一个有趣的话题，也许其他人也可以从中受益。

通过 V3nom » 2012 年 10 月 23 日，星期二，下午 2:06

我很难在 JayData 中找到有关 websql 事务的信息。谁能给个提示或链接？

[http://jaydata.org/forum/viewtopic.php?f=3&t=101&sid=8accd7bf5bed872b6e88d36004a280c5](http://jaydata.org/forum/viewtopic.php?f=3&t=101&sid=8accd7bf5bed872b6e88d36004a280c5)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:27:01.597

以与存储无关的方式支持事务并不是一件容易的事情。因此，JayData 没有显式的事务管理，您可以使用 EntityContext 的隐式“全有或全无”行为。对于 webSQL，每个 delta 包（即：多个`add/update`项目和`saveChanges()`最后一个）都运行在同一个 webSQL 事务中。如果在保存任何项目期间发生错误，所有以前的插入/更新都将被回滚。

一个非常简单的示例显示了这一点：以下代码将两个项目插入到一个表中，并创建了一个重复键错误场景。最终结果是即使第二次插入被拒绝重复，表中也不会有任何行。

```
$data.Entity.extend("item", {
    ID: { key: true, computed: true, type: 'int' },
    data: { type: 'string' }
});

$data.EntityContext.extend("ItemsContainer", {
    items: { type: $data.EntitySet, elementType: item }
});

var offlinedb = new ItemsContainer({
    name: 'sqLite',
    databaseName: 'itemdb'
});

function createLocalData() {
    offlinedb.items.add({ data: 'apple' });
    offlinedb.items.add({ data: 'orange', ID:1 });
    offlinedb.saveChanges(
        function () {

        }
    );
} 
```

这会创建编程回滚，您可以挂钩设置和上下文级别的事件处理程序并在其中引发异常。在此处阅读更多信息：http: [//jaydata.org/blog/entitycontext-and-entityset-scoped-event-handlers-in-jaydata-1.2](http://jaydata.org/blog/entitycontext-and-entityset-scoped-event-handlers-in-jaydata-1.2)

# vb.net - 在VB中使用变量设置控件的属性（变量包含控件的名称）

> ID：13036701
> 
> 赞同：1
> 
> 时间：2012-10-23T18:18:28.100
> 
> 标签：vb.net, string, variables, controls

例如，在 Visual Basic 中

```
Dim VariableName As String
VariableName = "button1"
VariableName.Visible = true 
```

将 button1 设置为可见。

编辑：我明白了！

```
Me.Controls(variableName).Visible = True 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:32:01.297

好吧，VariableName 是一个字符串，而字符串没有名为“可见”的属性。

您想获得实际的 Button 本身。您可以这样做的一种方法是（未经测试）：

```
dim btn as Button
for each c in Controls
  if c.name = "button1" then
    btn = c
  end if
next
btn.visible = true 
```

编辑：OP找到了一个更好的解决方案，尽管如果您正在寻找具有特定“文本”属性或类似内容的文本框，这可能会起作用。

# c# - 奇怪的结构行为，解释会很好

> ID：13036702
> 
> 赞同：0
> 
> 时间：2012-10-23T18:18:30.530
> 
> 标签：c#, class, struct, unity3d

简短而简单，我只是不明白为什么会这样：

```
using UnityEngine;
using System.Collections.Generic;

// this struct holds data for a single 'shake' source
public struct Shake
{
    public float AmountX;
    public float AmountY;
    public float Duration;

    private float percentageComplete;
    public float PercentageComplete { get { return percentageComplete; } }

    public Shake(float _amountX, float _amountY, float _duration)
    {
        AmountX = _amountX;
        AmountY = _amountY;
        Duration = _duration;
        percentageComplete = 0f;
        Debug.Log("wtf");
    }

    public void Update()
    {
        Debug.Log("a " + percentageComplete);
        percentageComplete += Time.deltaTime;
        Debug.Log("b " + percentageComplete);

        AmountX = Mathf.Lerp(AmountX, 0f, percentageComplete);
        AmountY = Mathf.Lerp(AmountY, 0f, percentageComplete);

    }
}

// This class uses that data to implement the shakes on a game camera
public class CameraShake : MonoBehaviour 
{
    // components
    private Transform myTransform;

    // vars
    private List<Shake> shakes;

    private float totalShakeX;
    private float totalShakeY;

    private void Awake()
    {
        myTransform = transform;

        shakes = new List<Shake>();
    }

    private void Update() 
    {
        if (Input.GetKeyDown(KeyCode.Space))
        {
            AddShake(new Shake(.1f, .1f, 1f));
        }

        totalShakeX = 0f;
        totalShakeY = 0f;

        for (int i = 0; i < shakes.Count; i++)
        {
            shakes[i].Update();
            Debug.Log("c " + shakes[i].PercentageComplete);

            totalShakeX += shakes[i].AmountX;
            totalShakeY += shakes[i].AmountY;

            if (shakes[i].PercentageComplete >= 1f)
            {
                shakes.RemoveAt(i);
                i--;
            }
        }

        myTransform.position += new Vector3(totalShakeX, 0f, totalShakeY);
    }

    public void AddShake(Shake shake)
    {
        shakes.Add(shake);
    }
} 
```

当我运行此代码（使用 Unity3D 游戏引擎）时，struct Shake 不会记录正确的值。

完成百分比记录这些值（每一帧）： a 0 b 0.001（或大约，它的 Time.deltaTime，处理前一帧所花费的时间） c 0

是什么赋予了？为什么percentageComplete 每帧都重置为0？

如果我将 Shake 更改为一个类而不是一个结构，它可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:57:39.333

C# 不允许属性访问结合读取和写入，这意味着对结构类型属性的访问将被视为只读访问。不幸的是，C# 没有提供指示结构方法是否会修改`this`. 因此，尝试调用修改`this`只读结构的结构方法将编译得很好，但实际上不会工作。

为了避免这个问题，如果你的结构需要定义一个方法`Update`，比如就地修改结构，你应该把它改成这样：

```
public static void Update(ref Shake it)
{
    it.percentageComplete += it.Time.deltaTime;
    it.AmountX = Mathf.Lerp(it.AmountX, 0f, it.percentageComplete);
    it.AmountY = Mathf.Lerp(it.AmountY, 0f, it.percentageComplete);
} 
```

如果您尝试类似以下操作，编译器将能够正确地发出声音：`Shake.Update(ref shakes[i]);`when `shakes`is a `List<Shake>`，但允许构造 like `var temp = shakes[i]; Shake.Update(ref temp); shakes[i] = temp;`，或者允许第一个构造（并且它会工作），如果`shakes`是 a`Shake[]`而不是 a `List<Shake>`.

值类型与引用类型具有不同的语义。有时这些不同的语义会很有用。允许方便的分段突变的值类型的语义差异比那些不允许方便的值类型更明显，并且一些认为所有类型都应该表现相同的人因此谴责它们是邪恶的，但我不同意这种想法。一个结构，它暴露了它的所有字段，并且没有变异的方法`this`, 将像满足该描述的所有其他结构一样运行（除了其字段的精确名称和类型）。这种行为不同于任何引用类型，但这正是它有用的原因。相比之下，虽然可以对具有私有字段的结构进行编码，以便“假装”为不可变，并消除值类型的语义优势，但非平凡结构类型的可变存储位置将始终保存可变结构实例，*无论是否这些类型假装是不可变的*。恕我直言，价值类型最好宣传自己是什么，而不是假装自己不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:26:36.953

也许是因为结构是值类型，所以将 Shake 对象复制到列表中是按值复制的，而不是按引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T20:22:20.203

您正在使用 [evil mutable struct]http://stackoverflow.com/questions/441309/why-are-mutable-structs-evil）。

当您从列表（或从强类型字段或局部变量以外的任何内容）调用结构上的方法时，它将在结构的新副本上调用该方法，而不会影响原始副本。

# django - 如何通过配置文件字段值获取用户对象

> ID：13036708
> 
> 赞同：0
> 
> 时间：2012-10-23T18:18:49.037
> 
> 标签：django, django-models, django-authentication

以下是如何获取具有相关配置文件的用户：[Django：User.objects.profile.all() 和 User.objects.get_profile() 之间的区别？](https://stackoverflow.com/questions/5253926/django-difference-between-user-objects-profile-all-and-user-objects-get-profil)

但是这个例子使用的是用户 ID。我想获取`activation_key`UserProfile 对象中的用户，我尝试类似：

```
UserProfile.objects.select_related('user').get(activation_key=key) 
```

但我得到：

> UserProfile 匹配查询不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:38:02.647

如果您要做的是获取与您的 UserProfile 关联的 django.contrib.auth.models.User 对象，如下例所示：

```
from django.contrib.auth.models import User

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    activation_key = models.CharField(...) 
```

我会做的是：

```
user_profile = UserProfile.objects.get(activation_key='some_key')
user = user_profile.user 
```

希望那是您正在寻找的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T22:47:46.290

```
user = User.objects.get(userprofile__activation_key='key') 
```

# javascript - javascript中的正则表达式'dark'或'light'

> ID：13036710
> 
> 赞同：-5
> 
> 时间：2012-10-23T18:18:59.930
> 
> 标签：javascript, regex

如何编写正则表达式来匹配 javascript 中的“暗”或“亮”。它将被替换为完整的单词。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T18:21:07.013

尝试这个：

```
str.match(/\b(dark|light)\b/g) 
```

演示：http: [//jsfiddle.net/zhggQ/](http://jsfiddle.net/zhggQ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T18:25:48.663

```
/\b(?:dark|light)\b/g 
```

只匹配整个单词。看一下

*   字符串的[`replace`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)
*   [全局标志](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/global)是什么意思
*   [单词边界](http://www.regular-expressions.info/wordboundaries.html)
*   和[交替](http://www.regular-expressions.info/alternation.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T18:27:42.187

尝试这个

"暗或亮".replace(/(dark|light)/g,"other")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T18:24:00.637

/(\sdark\s|\slight\s)/ 您需要在单词周围提供可选的前导或尾随空格

# sql - sql中的多个关键字搜索

> ID：13036717
> 
> 赞同：-1
> 
> 时间：2012-10-23T18:19:23.023
> 
> 标签：sql, sql-server, sql-server-2008

> **可能重复：**
> [SQL 搜索的关键字](https://stackoverflow.com/questions/2474229/keyword-to-sql-search)

我正在使用 SQL SERVER 2008，我的任务是搜索与技术支持说明相关的特定关键字（接近 100 个）。有 20 列和 100 万行。我正在查找的关键字位于 3 个特定列中。我该怎么做？

列标题：日期、星期、季度、代理、经理、客户、问题、描述、解决方案、订单号、

我必须从问题、描述、解决方案列中搜索关键字。问题：nvarchar 描述：nvarchar 解决方案：ntext

关键词：蓝牙、cd、dvd、硬盘、主板、电源、电池、交流适配器、windows、蓝屏、模板。

示例数据： 问题：风扇噪音 说明：风扇噪音 解决方案：风扇噪音和系统升温。有A20 BIOS。检查支持站点和可用的 BIOS 更新。客户尝试一下，然后将结果回复给我们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:26:22.850

我不确定最好的方法。但一种方法可以是：

```
select * from table_name where 
Problem IN('bluetooth', 'cd', 'dvd', 'hard drive', 'motherboard', 'power supply', 'battery', 'ac adapter', 'windows', 'blue screen') 
OR 
Description IN('bluetooth', 'cd', 'dvd', 'hard drive', 'motherboard', 'power supply', 'battery', 'ac adapter', 'windows', 'blue screen') 
OR 
Solution IN('bluetooth', 'cd', 'dvd', 'hard drive', 'motherboard', 'power supply', 'battery', 'ac adapter', 'windows', 'blue screen'); 
```

# ruby-on-rails-3 - rails / rspec中请求规范的存根辅助方法

> ID：13036718
> 
> 赞同：4
> 
> 时间：2012-10-23T18:19:29.367
> 
> 标签：ruby-on-rails-3, rspec, mocking, helper, stub

我有一个名为 get_books_from_amazon 的辅助方法，它执行 API 调用并返回一组书籍。我无法弄清楚如何在我的请求规范中将其存根。

```
module BooksHelper
  def get_books_from_amazon(search_term)
    ...
  end
end

class StaticController < ApplicationController
  include BooksHelper
  def resources
    @books = get_books_from_amazon(search_term)
  end
end 
```

我在规范中尝试了以下方法，但均无济于事：

```
# spec/requests/resource_pages_spec.rb
...
describe "Navigation" do
  it "should do such and such" do
    BooksHelper.stub!(:get_books_from_amazon).and_return(book_array)
    StaticHelper.stub!(:get_books_from_amazon).and_return(book_array)
    ApplicationHelper.stub!(:get_books_from_amazon).and_return(book_array)
    StaticController.stub!(:get_books_from_amazon).and_return(book_array[0..4])
    ApplicationController.stub!(:get_books_from_amazon).and_return(book_array[0..4])
    request.stub!(:get_books_from_amazon).and_return(book_array)
    helper.stub!(:get_books_from_amazon).and_return(book_array)
    controller.stub!(:get_books_from_amazon).and_return(book_array)
    self.stub!(:get_books_from_amazon).and_return(book_array)
    stub!(:get_books_from_amazon).and_return(book_array)

    visit resources_path
    save_and_open_page
  end 
```

关于问题是什么的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T16:52:13.597

在这种情况下，肯迪克的反应是很好的建议。

我已经添加了这个，以防有人真的在寻找原始问题的答案：

```
ActionView::Base.any_instance.stub(:helper_method) { "substitute return value" } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T20:30:04.393

助手通常用于清理演示“逻辑”，所以我不会在助手方法中调用亚马逊 API 之类的东西。

相反，将该方法移至可以从控制器调用的普通旧 Ruby 类。一个例子可能是：

```
class AmazonBookRetriever
  def get_books_from_amazon
    #code here
  end
end 
```

然后你的控制器可以调用它：

```
def resources
  @books = AmazonBookRetriever.new.get_books_from_amazon(params[:search_term])
end 
```

这应该使模拟更容易。您可以存根返回一个模拟，并验证它是否接收到`#new`消息。`AmazonBookRetriever``get_books_from_amazon`

# eclipse - Eclipse installing plugin doesn't work

> ID：13036722
> 
> 赞同：0
> 
> 时间：2012-10-23T18:19:40.403
> 
> 标签：eclipse, plugins, installation

I am trying to add the Android Plugin to Eclipse from [http://dl-ssl.google.com/android/eclipse/](http://dl-ssl.google.com/android/eclipse/). After entering the URL nothing happens. I already unchecked "Contact all update sites during install to find required software" but it still doesn't work.

Does someone know this behaviour?

Error:

```
Communication with repository at http://dl-ssl.google.com/android/eclipse/ failed.
Communication with repository at http://dl-ssl.google.com/android/eclipse/ failed.
Read timed out 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:41:02.027

I used to use a local proxy, but I don't anymore (but it still was running in background). And since I never worked on Eclipse outside of the office the internet connection always worked. I removed the settings, and now it works.

# objective-c - 使用部分时如何编辑（即删除行）uiTableView？

> ID：13036723
> 
> 赞同：0
> 
> 时间：2012-10-23T18:19:41.580
> 
> 标签：objective-c, ios, uitableview

您好，谢谢大家。我有一个表格视图，允许用户更改为剖视图。在标准视图中一切正常，但是当用户切换到剖视图时，当我尝试使用 (-commitEditingStyle:) 函数删除一行时，我崩溃了。我在这个功能中缺少什么？分段时我应该如何删除一行？（我从一个 plist 加载我的表，它是一个数组字典。每个索引都是 tableview 中的一行。）

```
 - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
     if ([strTitle isEqualToString:@"sectionView"]) {

         @try {

         if (editingStyle == UITableViewCellEditingStyleDelete) {
             // Delete the row from the data source.
           //  NSMutableDictionary *book =[[NSMutableDictionary alloc]init];
             NSMutableDictionary *mynewList = [[NSMutableDictionary alloc]init];
             mynewList = [[self.TitleDis valueForKey:[[[self.TitleDis allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row];
             NSMutableArray *sectionRow = [mynewList objectForKey:@"Dis"];

             [sectionRow removeObjectAtIndex:indexPath.row];

             [mynewList writeToFile:[self dataFilePath] atomically:YES];

             //
             [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

         } else if (editingStyle == UITableViewCellEditingStyleInsert) {
             // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view.
         }   
         }
         @catch (NSException *exception) {
             NSLog(@"hello error...%@",exception);
         }

     }

     else {
    /////////////////////// STANDARD VIEW 

    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source.
        [distribArray removeObjectAtIndex:indexPath.row];
        //
        //        NSMutableArray *contents = [[NSMutableArray alloc] init];
        //        [contents addObject:myMasterList];
        //        //[contents addObject:[NSArray arrayWithObjects:arraydata.text,distroName.text,destorEmail.text, nil]];

        [distribArray writeToFile:[self dataFilePath] atomically:YES];

        //
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

    } else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view.
    }   
         //////////////////////////////////
     }
} 
```

控制台：-[__NSCFString removeObjectAtIndex:]：无法识别的选择器发送到实例 0xe4bd3f0

如您所见，我一直在玩弄格式....不确定下一步该尝试什么？？？谢谢。

我所说的分段是什么意思：![在此处输入图像描述](../Images/c1c7ccf92f0b865fa7deb72c7e7b34b3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:56:18.263

因此，一方面，你有：

```
NSMutableDictionary *mynewList = [[NSMutableDictionary alloc]init];
mynewList = [[self.TitleDis valueForKey:[[[self.TitleDis allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row]; 
```

你在哪里分配 mynewList 然后立即覆盖它。

但我认为您可能应该在调试器中检查 sectionRow 的类型。我的猜测是它是一个 NSString。

如果不了解更多关于数据结构的信息，很难判断发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:24:43.110

这里有两个问题。下面的行会造成泄漏，不应以这种方式使用。

```
NSMutableDictionary *mynewList = [[NSMutableDictionary alloc]init];
             mynewList = [[self.TitleDis valueForKey:[[[self.TitleDis allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row]; 
```

而不是这个，你可以把它说成，

```
NSMutableDictionary *mynewList = [[self.TitleDis valueForKey:[[[self.TitleDis allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row]; 
```

另一件事是，

`[mynewList objectForKey:@"Dis"];`并不总是一个数组，它有时会以字符串的形式出现。检查您的数据结构并确认它是否是一个数组。

像这样试试

```
id obj = [mynewList objectForKey:@"Dis"];
NSLog(@"%@", [[obj class] description]); 
```

并检查`obj`print in的数据类型是什么`NSLog`。确认它是`NSMutableArray`和不是`NSString`。

# java - 复杂的文本解析 - 请帮助弄清楚

> ID：13036728
> 
> 赞同：1
> 
> 时间：2012-10-23T18:19:55.713
> 
> 标签：java, regex, groovy

我在算法设计方面相当差，并且有一个复杂的问题 - 请看一下。我目前正在使用 Java/Groovy。

我有一些看起来像这样的文本：

```
AAAAA  
AAAAA
CCCCC
any stuff here  
111  
any stuff here  
AAAAA  
stuff  
AAAAA  
stuff  
AAAAA  

BBBBB  
stuff  
222  
stuff  
BBBBB 
```

我的挑战是抓取所有格式为 AAAAA stuff 111 stuff AAAAA 的字符串，而不抓取任何周围的文本。可以看到字符串中有多个AAAAA，但我必须只抓取最接近111s和222s的那些，然后对所有这种类型的字符串执行此操作。

我的正则表达式（不起作用）如下所示：

```
/(\w{8}|\w{11}).*?(\w{3}).*?\1/ 
```

我一直在玩一堆他们，他们要么抓取太多文本，要么执行得太慢......如果有人知道我应该使用什么来解决这类问题，请告诉我。

编辑：这些是我想要匹配的：

```
AAAAA
CCCCC
any stuff here  
111  
any stuff here  
AAAAA 
```

和

```
BBBBB  
stuff  
222  
stuff  
BBBBB 
```

我想说这很像解析不正确标记的 XML。无论如何，感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:43:04.583

使用正则表达式模式

```
(?s)\b(\w{5})\b(?:(?!\1).)*?\b\w{3}\b(?:(?!\1).)*?\1 
```

# sql - 如何向现有表中插入多行

> ID：13036733
> 
> 赞同：-2
> 
> 时间：2012-10-23T18:20:25.937
> 
> 标签：sql, sql-server-2008

嗨，我正在尝试使用此命令将 10000 条记录插入表中。

```
CREATE TABLE mytable(
    id            INTEGER      PRIMARY KEY,
    TEXT          INTEGER       NOT NULL,
    OLDID         iNTEGER       NOT NULL,
    Firstname      VARCHAR(50)  NOT NULL,
    Middlename    VARCHAR(50)   NULL,
    last_name     VARCHAR(75)   NOT NULL,
    EMAIL         VARCHAR(225)  NOT NULL,
    STATUS        BOOL          NOT NULL
);

DECLARE @i int
declare @rows_to_insert int
SET @i = 6
set @rows_to_insert = 10000

WHILE @i < @rows_to_insert
    BEGIN
        INSERT INTO mytable VALUES (@i, @i,@i,'john'+@i,null,'Test','john'+@i+'@someone.com','Active');
        set @i = @i+1
    END 
```

但我收到了这个错误。

> 消息 8101，级别 16，状态 1，第 8 行 只有在使用列列表并且 IDENTITY_INSERT 为 ON 时，才能为表“mytable”中的标识列指定显式值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T18:27:26.437

该表有一个标识列。您需要在插入语句中显式声明其余列。我可能会假设您的第一列是身份。然后它看起来像：

```
BEGIN
    INSERT INTO mytable(<col2>, <col3>, <col4>, <col5>, <col6>, <col7>)
        VALUES (@i,@i,'john'+@i,null,'Test','john'+@i+'@someone.com','Active');
    set @i = @i+1
END 
```

当然，您的列名在哪里。顺便说一下，列出列名总是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T18:28:39.967

您正在尝试将值插入标识列。例如，如果您的表格如下所示：

```
Id        | Name    | Value
^identity 
```

然后你不能在`Id`列中插入一个值，除非你设置`IDENTITY_INSERT`. 这意味着有效的插入语句如下所示：

```
INSERT INTO MyTable (Name, Value) VALUES ('MyName', 'MyValue') 
```

将`Id`自动生成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T18:28:44.607

您的表定义使用增量 ID 作为身份（主键）。所以你不能为这个主键插入值，因为值会自动插入。

要解决您的问题，请使用下面的查询模板插入数据并排除主键，因为它将自动插入：

```
INSERT INTO mytable (field1, field2,...) VALUES (value1, value2...) 
```

# ruby - 正则表达式类似于解析函数参数，例如 foo(var, bar) 并在 Ruby 中获取 var

> ID：13036736
> 
> 赞同：0
> 
> 时间：2012-10-23T18:20:37.167
> 
> 标签：ruby, regex

如果我有一个看起来像“TEST(10,20,30)”的字符串，我怎么能从这个字符串中取出 10 个。

我试过了

```
/\(([^\)]+)\)/ 
```

这得到了括号的内部，但是当我尝试添加逗号时，例如

```
/\(([^\),]+)\)/ 
```

然后没有匹配项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:17:19.057

在这种情况下，您要捡起的部分的图案要比您要扔掉的部分的图案简单得多。

```
"TEST(10,20,30)"[/\d+/] # => 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:23:10.810

那是因为您也需要告诉正则表达式匹配逗号和右括号之间的内容（或将其省略）：

```
/\(([^),]+)/ 
```

或者

```
/\(([^),]+)[^)]*\)/ 
```

如您所见，您也不需要在字符类中转义括号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T19:20:25.400

> 我怎么能从这个字符串中只拉出 10 个。

使用`lookahead`和`lookbehind`

```
(?<=\()\d+(?=,) 
```

在[这里工作](http://fiddle.re/dkm5)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T18:31:17.687

希望这可以指导您朝着正确的方向前进：

```
irb(main):001:0> str = "TEST(10,20,30)"
=> "TEST(10,20,30)"
irb(main):002:0> str =~ /\w+\(([^,]+),.+\)/
=> 0
irb(main):003:0> $~[1]
=> "10" 
```

正则表达式这样做：
**\w+**
一个或多个单词字符（“TEST”）

**(([^,]+)**
任何非逗号的组，这将匹配从左括号到逗号的所有内容。

正则表达式的其余部分忽略其他参数，但可以对其进行修改以将它们包含在单独的组中。

# pdf - 编译haru text_demo.c 错误

> ID：13036740
> 
> 赞同：0
> 
> 时间：2012-10-23T18:20:55.890
> 
> 标签：pdf, compiler-errors

在 Redhat Linux 上下载并安装 2.2.1 并尝试编译 text_demo.c，但它抱怨缺少 grid_sheet.h。所以我下载了2.0.8来获取grid_sheet.h。现在，当我尝试编译时，出现以下错误：

> gcc -o text_demo -I /usr/local/include I /home/downloads/libharu-2.0.8/demo -L /usr/local/lib text_demo.c
> 
> /tmp/ccmPxCcu.o：在函数`show_stripe_pattern': text_demo.c:(.text+0x68): undefined reference to` HPDF_Page_SetRGBStroke' text_demo.c:(.text+0x7c)：未定义对`HPDF_Page_SetLineWidth' text_demo.c:(.text+0xa6): undefined reference to`HPDF_Page_MoveTo' text_demo.c:(.text+0xd0) 的引用：未定义对`HPDF_Page_TextWidth' text_demo.c:(.text+0xe9): undefined reference to`HPDF_Page_LineTo' text_demo.c:(.text +0xf4)：对 HPDF_Page_SetLineWidth'/tmp/ccmPxCcu.o 的未定义引用`HPDF_Page_Stroke' text_demo.c:(.text+0x116): undefined reference to`：在函数 `show_description': text_demo.c:(.text+0x129): undefined reference to` HPDF_Page_GetCurrentFontSize' text_demo.c:(.text+0x137)：对`HPDF_Page_GetCurrentFont' text_demo.c:(.text+0x14c): undefined reference to`HPDF_Page_GetRGBFill' text_demo.c:(.text+0x15a) 的未定义引用 `HPDF_Page_BeginText' text_demo.c:(.text+0x180): undefined reference to`HPDF_Page_SetRGBFill' text_demo.c:(.text+0x193): 未定义引用`HPDF_Page_SetTextRenderingMode' text_demo.c:(.text+0x1ae): undefined reference to` HPDF_Page_SetFontAndSize' text_demo.c:(.text+0x1d6): 未定义引用`HPDF_Page_TextOut' text_demo.c:(.text+0x1e1): undefined reference to`HPDF_Page_EndText' text_demo.c:(.text+0x1fa): 未定义引用`HPDF_Page_SetFontAndSize' text_demo.c:(.text+0x21a): undefined reference to`HPDF_Page_SetRGBFill'/tmp/ccmPxCcu.o：在函数`main': text_demo.c:(.text+0x2ab): undefined reference to` HPDF_New'text_demo.c:(.text+0x2ea): 未定义对 `HPDF_Free' text_demo.c:(.text+0x30c): undefined reference to` HPDF_SetCompressionMode' text_demo.c:(.text+0x327) 的引用：未定义对`HPDF_GetFont' text_demo.c:(.text+0x335): undefined reference to`HPDF_AddPage' text_demo.c:( .text+0x34a)：未定义对`print_grid' text_demo.c:(.text+0x365): undefined reference to`HPDF_Page_SetFontAndSize 的引用 text_demo.c:(.text+0x377)：未定义对`HPDF_Page_TextWidth' text_demo.c:(.text+0x385): undefined reference to` HPDF_Page_BeginText 的引用 text_demo.c:(.text+0x390)：未定义对`HPDF_Page_GetHeight' text_demo.c:(.text+0x3a9): undefined reference to`HPDF_Page_GetWidth 的引用 text_demo.c:(.text +0x3d4)：未定义对`HPDF_Page_TextOut' text_demo.c:(.text+0x3df): undefined reference to`HPDF_Page_EndText 的引用 text_demo.c:(.text+0x3ea)：未定义对`HPDF_Page_BeginText' text_demo.c:(.text+0x3f5): undefined reference to`HPDF_Page_GetHeight 的引用 text_demo.c:(.text+0x415)：未定义对 `HPDF_Page_MoveTextPos' text_demo.c:(.text+0x43b): undefined reference to`HPDF_Page_SetFontAndSize 的引用 text_demo.c:(.text+0x45c ）： 未定义的引用`HPDF_Page_MoveTextPos' text_demo.c:(.text+0x47c): undefined reference to`HPDF_Page_GetWidth' text_demo.c:(.text+0x4aa): 未定义引用`HPDF_Page_MeasureText' text_demo.c:(.text+0x4cd): undefined reference to`HPDF_Page_ShowText' text_demo.c:(.text+0x4ea): 未定义引用 `HPDF_Page_MoveTextPos' text_demo.c:(.text+0x505): undefined reference to`HPDF_Page_SetFontAndSize' text_demo.c:(.text+0x53f): 未定义引用`HPDF_Page_ShowText' text_demo.c:(.text+0x57c): undefined reference to`HPDF_Page_SetFontAndSize' text_demo.c:(.text+0x599): 未定义对`HPDF_Page_MoveTextPos' text_demo.c:(.text+0x5ac): undefined reference to`HPDF_Page_ShowText 的引用 text_demo.c:(.text+0x5c7): 未定义对 `HPDF_Page_SetFontAndSize' text_demo.c:(.text+0x5e4): undefined reference to`HPDF_Page_MoveTextPos 的引用 text_demo.c:(.text+0x665): 未定义对`HPDF_Page_SetRGBFill' text_demo.c:(.text+0x67a): undefined reference to`HPDF_Page_ShowText 的引用 text_demo。 c:(.text+0x6a3): 未定义对 `HPDF_Page_MoveTextPos' text_demo.c:(.text+0x6fe): undefined reference to`HPDF_Page_SetRGBFill' 的引用 text_demo.c:(.text+0x713): 未定义对`HPDF_Page_ShowText' text_demo.c:(.text+0x73c): undefined reference to`HPDF_Page_MoveTextPos' 的引用 text_demo.c:(.text+0x797): 未定义的对`HPDF_Page_SetRGBFill' text_demo.c:(.text+0x7ac): undefined reference to`HPDF_Page_ShowText' text_demo.c:(.text+0x7c3): 未定义引用`HPDF_Page_EndText' text_demo.c:(.text+0x7e6): undefined reference to` HPDF_Page_SetFontAndSize' text_demo.c:(.text+0x80c): 未定义引用`HPDF_Page_SetRGBFill' text_demo.c:(.text+0x820): undefined reference to`HPDF_Page_SetLineWidth' text_demo.c:(.text+0x856): 未定义引用 `HPDF_Page_SetTextRenderingMode' text_demo.c:(.text+0x861): undefined reference to`HPDF_Page_BeginText' text_demo.c:(.text+0x884): 未定义对`HPDF_Page_TextOut' text_demo.c:(.text+0x88f): undefined reference to`HPDF_Page_EndText' 的引用 text_demo.c:(.text+0x8cd): 未定义对`HPDF_Page_SetTextRenderingMode' text_demo.c:(.text+0x8d8): undefined reference to` HPDF_Page_BeginText' 的引用 text_demo.c:(.text+0x903): 未定义对`HPDF_Page_TextOut' text_demo.c:(.text+0x90e): undefined reference to`HPDF_Page_EndText' text_demo 的引用。 c:(.text+0x94c): 未定义引用`HPDF_Page_SetTextRenderingMode' text_demo.c:(.text+0x957): undefined reference to`HPDF_Page_BeginText' text_demo.c:(.text+0x982): 未定义引用`HPDF_Page_TextOut' text_demo.c:(.text+0x98d): undefined reference to`HPDF_Page_EndText' text_demo.c:(.text+0x9c3): 未定义引用`HPDF_Page_GSave' text_demo.c:(.text+0x9d6): undefined reference to` HPDF_Page_SetTextRenderingMode' text_demo.c:(.text+0x9e1): 未定义引用`HPDF_Page_BeginText' text_demo.c:(.text+0xa0c): undefined reference to`HPDF_Page_TextOut' text_demo.c:(.text+0xa17): 未定义引用`HPDF_Page_EndText' text_demo.c:(.text+0xa45): undefined reference to`HPDF_Page_GRestore' text_demo.c:(.text+0xa7b): 未定义引用`HPDF_Page_GSave' text_demo.c:(.text+0xa8e): undefined reference to`HPDF_Page_SetTextRenderingMode' text_demo.c:(.text+0xa99): 未定义引用 `HPDF_Page_BeginText' text_demo.c:(.text+0xac4): undefined reference to`HPDF_Page_TextOut' text_demo.c:(.text+0xacf): 未定义引用`HPDF_Page_EndText' text_demo.c:(.text+0xafd): undefined reference to`HPDF_Page_GRestore' text_demo.c:(.text+0xb33): 未定义引用`HPDF_Page_GSave' text_demo.c:(.text+0xb46): undefined reference to` HPDF_Page_SetTextRenderingMode' text_demo。 c:(.text+0xb51): 未定义`HPDF_Page_BeginText' text_demo.c:(.text+0xb7c): undefined reference to`的 HPDF_Page_TextOut 引用 text_demo.c:(.text+0xb87): 未定义`HPDF_Page_EndText' text_demo.c:(.text+0xbb5): undefined reference to`的 HPDF_Page_GRestore 引用 text_demo.c:(.text+0xbc8): 未定义的引用`HPDF_Page_SetTextRenderingMode' text_demo.c:(.text+0xbee): undefined reference to` HPDF_Page_SetRGBFill' text_demo.c:(.text+0xc09): undefined reference to `HPDF_Page_SetFontAndSize' text_demo.c:(.text+0xc5d): undefined reference to`HPDF_Page_BeginText' text_demo.c:(.text+0xc79): undefined reference to `cos' text_demo.c:(.text+0xc8a): undefined reference to`sin' text_demo.c:(.text+0xcb3): undefined reference to `sin' text_demo.c:(.text+0xcc4): undefined reference to`cos' text_demo.c:(.text+0xd0a): 未定义对 `HPDF_Page_SetTextMatrix' text_demo.c:(.text+0xd1d): undefined reference to`HPDF_Page_ShowText' 的引用 text_demo.c:(.text+0xd28): 未定义对`HPDF_Page_EndText' text_demo.c:(.text+0xd5e): undefined reference to`HPDF_Page_BeginText' 的引用 text_demo.c:(.text+0xdb6): 未定义对`tan' text_demo.c:(.text+0xdc7): undefined reference to`tan' text_demo 的引用。 c:(.text+0xe11): 未定义引用 `HPDF_Page_SetTextMatrix' text_demo.c:(.text+0xe24): undefined reference to`HPDF_Page_ShowText' text_demo.c:(.text+0xe2f): 未定义引用`HPDF_Page_EndText' text_demo.c:(.text+0xe65): undefined reference to`HPDF_Page_BeginText' text_demo.c:(.text+0xeac): 未定义引用`HPDF_Page_SetTextMatrix' text_demo.c:(.text+0xebf): undefined reference to`HPDF_Page_ShowText' text_demo.c: (.text+0xeca): 未定义的引用`HPDF_Page_EndText' text_demo.c:(.text+0xf00): undefined reference to` HPDF_Page_BeginText' text_demo.c:(.text+0xf47): 未定义引用`HPDF_Page_SetTextMatrix' text_demo.c:(.text+0xf5a): undefined reference to`HPDF_Page_ShowText' text_demo.c:(.text+0xf65): 未定义引用`HPDF_Page_EndText' text_demo.c:(.text+0xfef): undefined reference to`HPDF_Page_SetFontAndSize' text_demo.c:(.text+0x1015): 未定义引用`HPDF_Page_SetRGBFill' text_demo.c:(.text+0x1020): undefined reference to` HPDF_Page_BeginText' text_demo.c:(.text+0x1044): 未定义引用`HPDF_Page_TextOut' text_demo.c:(.text+0x104f): undefined reference to`HPDF_Page_EndText' text_demo.c:(.text+0x1063): 未定义引用`HPDF_Page_SetCharSpace' text_demo.c:(.text+0x106e): undefined reference to`HPDF_Page_BeginText' text_demo.c:(.text+0x1092): 未定义引用`HPDF_Page_TextOut' text_demo.c:(.text+0x109d): undefined reference to`HPDF_Page_EndText' text_demo。 c:(.text+0x10b1): 未定义对`HPDF_Page_SetWordSpace' text_demo.c:(.text+0x10bc): undefined reference to` HPDF_Page_BeginText 的引用 text_demo.c:(.text+0x10e0): 未定义对`HPDF_Page_TextOut' text_demo.c:(.text+0x10eb): undefined reference to`HPDF_Page_EndText 的引用 text_demo.c:(.text+0x1100): 未定义对`HPDF_SaveToFile' text_demo.c:(.text+0x110b): undefined reference to`HPDF_Free 的引用 collect2: ld 返回1 退出状态

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T14:40:45.887

All libharu functions are missing because the library was not found. Please change your -L option.

# c# - 应用程序设置中的自定义类型

> ID：13036743
> 
> 赞同：9
> 
> 时间：2012-10-23T18:21:04.453
> 
> 标签：c#, types, settings

我环顾四周，到目前为止没有任何帮助。

我目前有这个代码：

```
namespace InstaShot
{
    [Serializable]
    public class Hotkey
    {
        public uint Modifier { get; private set; }
        public int Key { get; private set; }
        public Hotkey(uint modifier, int key)
        {
            this.Modifier = modifier;
            this.Key = key;
        }
    }
} 
```

然而，每当我尝试在我的应用程序设置中创建设置时，我都会得到：

> 未定义类型“InstaShot.Hotkey”。

显然它是......它适用于同一命名空间内的其他类，而不是那个......现在真的很烦我。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-06-18T17:39:56.250

*尽管问题作者可能已经继续前进，但如果其他人遇到相同的问题，则值得发布答案。*

首先让我**澄清一下这个问题**，因为对这个问题的评论表明存在一些歧义。OP 没有询问自定义配置部分。相反，问题是关于使用标准设置 - 当您在 Visual Studio 中打开项目属性的“设置”选项卡时获得的设置窗格，如下所示：

![标准 Visual Studio 项目设置](../Images/b0845ef0581560f7ee2d297f8c3ecb63.png)

至于**答案**，您必须添加一个*默认构造函数*，即您分配默认值的无参数构造函数。一旦我这样做了，我就可以指定类型以获得上图所示的结果。（请注意，如果您的自定义类型与您的设置在同一个程序集中，当您在设置设计器中打开下拉列表时，它*不会*`browse`出现在可用类型列表中，也不会出现在该列表中或者，但此时您可以输入完全限定的名称。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-08T14:17:27.187

这是一个更常见的解决方案，它也可以用于集合：在设置中按查看代码以打开 Settings.cs

以这种方式添加您的属性：

```
 [global::System.Configuration.UserScopedSettingAttribute()]
    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
    [global::System.Configuration.DefaultSettingValueAttribute("")]
    public YourType PropertyName
    {
        get => (YourType)this["PropertyName"];
        set => this["PropertyName"] = value;
    } 
```

这里的 YourType 可以是集合之类的`List<object>`。DefaultSettingValueAttribute 用于使用默认构造函数进行初始化，否则它将为 null 作为默认值。

# ios - 处理 iPad Mini 屏幕尺寸

> ID：13036745
> 
> 赞同：60
> 
> 时间：2012-10-23T18:21:04.317
> 
> 标签：ios, ipad-mini

新款 iPad Mini 的屏幕尺寸为 7.9 英寸。它有视网膜显示器吗？它会自动扩展现有的 xib 和故事板，还是我们必须创建每个版本的两个版本？

我们处理它的方式是否类似于处理 iPhone 5 的方式？

如何创建定义或条件来查看设备是否正在运行 iPad Mini？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-23T18:49:44.860

应用程序将正常工作。但是如果你有一些非常小的 UI 元素。由于屏幕尺寸减小，您可能需要重新访问它们。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-10-23T18:23:08.103

如果您的应用程序在 iPad 1 或 iPad 2 上运行，它将在新的 iPad mini 上按原样运行。mini 上没有视网膜显示屏。从应用程序的角度来看，它与 iPad 2 相同。

编辑：有人询问如何确定应用程序何时在 iPad mini 上运行。对此没有 API 检查。屏幕尺寸没有帮助。`UI_USER_INTERFACE_IDIOM()`没有帮助。在有人真正拥有之前，没有办法知道它是否`UIScreenMode pixelAspectRatio`有任何不同（可能与 iPad 2 相同）。

这只剩下一种可能性 - 获取`machine`from`uname()`并硬编码对该值的检查。这绝不是一种理想的方法。在撰写本文时，我们不知道价值是什么。也许**iPad5,x**假设第四代 iPad 是**iPad4,x**。

编辑：到目前为止，我已经看到一份报告称 iPad mini 返回 iPad2,5（是的，这是两个逗号五）以及 iPad2,6 和 iPad2,7 作为机器名称。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-23T18:22:59.730

为 iPad 2 分辨率构建应用程序。新的 iPad Mini 没有视网膜，分辨率为 1024x768，这意味着已经在 iPad 1 或 iPad 2 上运行的应用程序会自动在 iPad Mini 上运行。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-25T07:46:47.287

[我认为 Phil Schiller（Apple 的高级副总裁）在发布 iPad Mini 的新闻发布会上](http://www.apple.com/apple-events/october-2012/)说得最好（大约 53:00 进入主题演讲）

> 我们选择什么屏幕尺寸，为什么？团队非常努力地思考这个问题。我们希望 iPad 能够运行为 iPad 编写的所有令人惊叹的软件，而无需开发人员做任何工作......

然后他接着说：

> ...而且像素更容易记住，因为它们完全相同。最初的 iPad 和 iPad 2 的尺寸为 1024 x 768，而新款 iPad Mini 的尺寸为 1024 x 768。**这意味着为 iPad 创建的所有软件都可以在 iPad Mini 上正常运行。**

因此，总而言之，为了回答您的问题，iPad Mini 没有 Retina 显示屏，您无需做任何额外的工作。iPad Mini 将利用您已经为 iPad 创建的故事板或 xib。

然后就检测而言，我还找不到任何可以证明这一点的东西（因为它们还没有发布），但我敢打赌，下面会输出“iPad Mini”。

```
NSLog(@"%@",[[UIDevice currentDevice] model]); 
```

**编辑：**

```
NSLog(@"\nMachine ID: %@\nModel: %@\nLocalized Model: %@",machineName(),[[UIDevice currentDevice] model],[[UIDevice currentDevice] localizedModel]);

NSString *machineName()
{

    struct utsname systemInfo;
    uname(&systemInfo);

    return [NSString stringWithCString:systemInfo.machine
                              encoding:NSUTF8StringEncoding];
} 
```

在我的 16GB iPad Mini（仅限 Wifi）上返回：

> 机器 ID：iPad2,5
> 型号：iPad
> 本地化型号：iPad

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-05-11T04:59:55.507

如果 iPad Mini 和非视网膜 iPad 的屏幕尺寸无论如何都相同，你不能使用类似的东西来确定设备屏幕是 iPhone 5 还是 iPhone 4：

```
#define IS_WIDESCREEN5 ( [ [ UIScreen mainScreen ] bounds ].size.height == 568 )
#define IS_WIDESCREEN4 ( [ [ UIScreen mainScreen ] bounds ].size.height == 480 ) 
```

因此，对于 iPad Mini 和非视网膜 iPad，请执行以下操作：

```
#define IS_PAD ( [ [ UIScreen mainScreen ] bounds ].size.height == 512 ) 
```

对于视网膜 iPad 的做法：

```
#define IS_RETINA_PAD ( [ [ UIScreen mainScreen ] bounds ].size.height == 1024 ) 
```

这应该区分这两种类型的屏幕，并绕过为了缩放目的而精确定位模型的需要。另一种方法是使用自动布局，但是没有它我会有更好的控制感。

我希望这对您问题的第二部分有所帮助。祝你好运 ：）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-02-01T10:12:36.903

iPad mini uses the same resolution as the non-retina iPads, iOS will use 1x graphics. Refer to this link... [link](http://techcrunch.com/2012/10/23/ios-ipad-mini-apps/)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-10-23T19:04:45.373

你不必做任何不同的事情。它应该像苹果所说的那样自动工作。分辨率仍与 iPad 相同。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-02-22T23:49:22.347

ipad mini 的图像与 ipad 1 和 2 相同。但建议您也将@2x 图像用于视网膜屏幕。因为，一旦您的应用程序在应用商店上架，您就无法阻止人们在具有视网膜显示屏的 ipad 上下载它。

所以在这个时候，你必须为视网膜和非视网膜制作图像。

以编程方式，ipad 视网膜显示不需要单独的 xib 文件。只需为所有图像资产保留 imageName@2x.png 即可。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-21T10:12:21.610

要检测 iPad Mini（任何型号），我正在使用此代码（在 iOS 10.x 上测试）：

```
- (BOOL)isIPadMini {
   return [[UIDevice currentDevice].name hasPrefix:@"iPad Mini"];
} 
```

# asp.net - ASP.NET 会话变量

> ID：13036748
> 
> 赞同：0
> 
> 时间：2012-10-23T18:21:13.490
> 
> 标签：asp.net, vb.net, m

我有一个会话变量：ID。同一台 PC 上的两个浏览器是否有可能共享相同的会话变量并对其进行更新，从而产生随机结果。我希望总是有两个单独的会话，带有两组单独的会话变量。

我对此进行了研究，并且浏览了以下网页，这表明存在会话锁以防止这种情况发生：http://odetocode.com/blogs/scott/archive/2006/05/20/session-state -使用-a-reader-writer-lock.aspx。我有一个 ASP.NET 应用程序，随机结果表明这可能会发生。

如果需要，我会生成一些代码。

更新 19:51 Tim Medora 说：“使用相同会话 ID 的相同浏览器类型的两个实例”。这是否意味着如果用户打开一个浏览器然后关闭它（因为打开时间太长）然后打开另一个浏览器（在另一个窗口中），那么可以使用相同的会话 ID 并复制窗口 1 中的会话变量对于窗口 2？

2012 年 10 月 24 日更新 19:35 Tim Medora 说：“但是，在同一个浏览器中存在两个选项卡的可能性非常大，或者同一浏览器类型的两个实例使用相同的会话 ID”。在这些情况下，会话信息是否会分开。例如，如果用户打开浏览器然后关闭它（在响应加载之前），然后打开具有不同会话变量集的同一个窗口，那么会话 A 和会话 B 具有相同会话变量的风险。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:12:24.100

I faced similar situation recently. In create user screen, multiple addresses can be entered for the user. Initially I used session for storing addresses. Since session is shared across browser tabs, functionality didn't work well. And also I realized storing data in session is not a good approach due to various reasons like overhead in maintaining session state in webfarm scenario, etc. So, I had to switch back to DOM manipulation (since its mvc application) to store addresses. If it is web forms, viewstate might be alternative for session.

As mentioned in already posted answer, it can be achieved through sessions by using unique key per request i.e., in my case, storing addresses in session[userid] or you can use any random key to hold the values and have hidden fields to persist that key across web requests. However, I was not convinced by other reason that they will not be cleared automatically when user closes the tab.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:33:37.360

随机碰撞的可能性极低。

但是，在同一个浏览器中存在两个选项卡的可能性非常大，或者同一浏览器类型的两个实例使用相同的会话 ID ^([1](http://support.microsoft.com/kb/899918))。[会话 ID 也可能被重复使用](http://support.microsoft.com/kb/899918)，从而增加了混乱。

> 这是否意味着如果用户打开一个浏览器然后关闭它（因为打开时间太长）然后打开另一个浏览器（在另一个窗口中），那么可以使用相同的会话 ID 并复制窗口 1 中的会话变量对于窗口 2？

是的，会话 ID 可以重复使用，并且同一会话可能处于活动状态。我用 Chrome 做了一个快速的实验，我能够将一个 URL（它使用会话）复制到浏览器的新选项卡和新实例中，并且同一个会话保持活动状态。

但是，不会为新窗口*复制*会话变量；它们是相同的值。

## 会话锁定

Locking Session 只意味着两个作者不能同时更新它。更具体地说，从请求开始到请求结束，对 Session 加了一个锁；在此期间，只有一次写入可以更改它。但是这段时间通常非常短，并且（虽然锁定可以防止一些问题）它不会阻止两个不同的来源在不同的时间更改相同的数据。

## 避免碰撞

最小化冲突的一种方法是使用唯一的会话密钥。假设用户（在同一个会话中）打开两条不同的记录进行编辑。如果您有“ActiveRecord”会话密钥，则数据损坏/不匹配的可能性非常高。但是，如果每个页面在隐藏字段中存储一个唯一键，则该唯一键可以用于从 Session 检索适当的值，并且可以离散地操作每个值。

换句话说，唯一键允许您同时安全地打开同一项目的两个不同实例。这并*不能*防止两个窗口同时编辑同一个项目的问题。尽管它们将具有单独的键，但在提交数据时最终结果可能是不可取的。

^([1](http://support.microsoft.com/kb/899918) - 在所有现代浏览器中似乎都是这种情况，但我不能肯定地说*总是*如此。欢迎参考。)

# php - 使用 AJAX 刷新会话购物车

> ID：13036749
> 
> 赞同：0
> 
> 时间：2012-10-23T18:21:21.870
> 
> 标签：php, ajax, session

我有一个使用会话存储项目的购物车，所以我使用 AJAX 发送带有 XMLHttpRequest 的产品 ID。

商品页面和购物车在同一页面中。所以在将变量发送到同一页面并设置会话之后，nth 会发生，直到我刷新页面以查看差异。

我如何在不刷新 PHP 页面的情况下查看购物车中的差异？

# eclipse - 崩溃后在 Eclipse IDE 中加载工作区快照

> ID：13036751
> 
> 赞同：0
> 
> 时间：2012-10-23T18:21:31.010
> 
> 标签：eclipse, crash, snapshot

我最近发生了系统崩溃，并且在 Eclipse IDE (Juno) 中有一些未保存的文件。[我在Eclipse 网站](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Freference%2Fref-8.htm)上读到Eclipse 保存了工作区的快照。但我无法找到快照，因此无法加载它们。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:09:56.727

只需重新启动。Eclipse 会自动恢复它所能做的。另请参阅[Eclipse 中的 *.snap 文件是什么？](https://stackoverflow.com/questions/2026502/what-are-snap-files-in-eclipse)

# google-maps - GoogleMapApi3 - 即时隐藏标签

> ID：13036754
> 
> 赞同：0
> 
> 时间：2012-10-23T18:21:39.217
> 
> 标签：google-maps, google-maps-api-3, google-maps-styled

我正在使用样式地图 - 现在我喜欢应用一个按钮来隐藏/显示街道的标签

等等...但是当我通过“map.setOptions({styles: MyStylesArrayShowLabel});”设置样式时 这会杀死我所有已经放置的标记....

...有没有办法在不破坏标记的情况下即时设置样式？

（所有标记 [不包括主标记/信息窗口] 都是通过 sql 和 php 从 db 生成的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:06:20.263

是的，您必须使用`MapTypeIds`并将样式化的地图与 ID 相关联。然后使用`map.setMapTypeId([MapTypeId])`而不是`map.setOptions([options])`. 我建议快速阅读[Styled Maps 文档](https://developers.google.com/maps/documentation/javascript/styling)以供参考。但基本上你需要注意的是 3 件事：

1.  创建一个新的 StyledMapType 对象
2.  将样式化地图与 MapTypeId 关联
3.  将 MapType 设置为显示

我在[jsfiddle](http://jsfiddle.net/svigna/tLd88/)上包含了一个示例，其中包含对您应该注意的 3 个关键组件的注释。

创建新的 StyledMapType 非常简单，所以我将首先解释 StyledMapType 与 MapTypeID 的关联：

```
map.mapTypes.set('hide_street_names', hideLabels); 
```

从本质上讲，这意味着您可以使用 mapTypeID 引用您`hideLabels`的 styledmap，在这种情况下，它`hide_street_names`就像您使用`google.maps.MapTypeId.ROADMAP`or`google.maps.MapTypeId.TERRAIN`等​​一样。

然后通过设置地图的 MapTypeId 来简单地通过在单击操作（或者您当前控制它）上切换 MapTypeId 来触发您的样式：

```
map.setMapTypeId('hide_street_names'); 
```

您会注意到我通过将 mapTypeID 更改回 ROADMAP 来恢复到默认视图 -`map.setMapTypeId(google.maps.MapTypeId.ROADMAP);`

# c# - ORA-12541 TNS:Oracle.DataAccess 连接上没有监听器打开

> ID：13036757
> 
> 赞同：3
> 
> 时间：2012-10-23T18:21:54.307
> 
> 标签：c#, oracle, visual-studio-2010, visual-studio, odp.net

我的 WCF 服务用于`Oracle.DataAccess.Client`连接到 oracle db。它已经使用以下连接字符串成功运行了一年左右：

```
OracleConnection conn = new OracleConnection(String.Format("USER ID=XXX;PASSWORD=XXX;DATA SOURCE={0}", db)); 
```

我最近买了一台新电脑，不得不重新安装 Oracle 客户端。我尝试将新的 operationContract 添加到现有服务中，并且不得不重新引用新添加的 ODAC。突然，它不再连接了。它在`connection.open();`

我的 TNSnames.ora 文件与以前相同。我什至尝试将其复制到项目的 bin 目录中只是为了笑。

蟾蜍有效。我可以从 OraHome 成功 tnsping 我的数据库。我可以使用 访问数据库`System.Data.OracleClient`，但我不想重写所有内容以使用已弃用的 dll。

如果 tnsnames 存在，路径在我的 env 变量中标识，并且侦听器正在运行，还应该检查什么？我确实注意到`HKEY_LOCAL_MACHINE`Oracle 的密钥指向了错误的 OraHome 路径，但即使我修改了路径，它仍然无法连接，所以我把它放回去了，担心我会让 TOAD 也停止工作。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:31:26.550

如果实例化连接的用户没有运行 Oracle 客户端的权限，则可能会发生此错误。确保运行 WCF 服务的帐户具有正确的权限。

# facebook - 如何为 Facebook App 登录设置多个网站

> ID：13036758
> 
> 赞同：0
> 
> 时间：2012-10-23T18:22:01.837
> 
> 标签：facebook

我有一个应用服务器 (app.a.com) 和一个测试服务器 (test.a.com)。我将“应用程序域”设置为“*.a.com”。如何设置“使用 Facebook 登录的网站”以便两台服务器都能正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T23:44:30.210

是的，我在我的网站上这样做。

在“基本”选项卡的[应用仪表板中，设置：](https://developers.facebook.com/apps)

`App Domains`到 your-domain.com

`Website with Facebook Login`到[http://your-domain.com](http://your-domain.com)

然后您的应用 URL 将如下所示：

[http://www.example.com/php_sdk/get_user_feed.php](http://www.example.com/php_sdk/get_user_feed.php)

和

[http://test.example.com/php_sdk/get_user_feed.php](http://test.example.com/php_sdk/get_user_feed.php)

子域中的 get_user_feed.php 与`test`上的文件不同`www`

# c# - 如何裁剪图像并覆盖退出

> ID：13036759
> 
> 赞同：0
> 
> 时间：2012-10-23T18:22:06.770
> 
> 标签：c#, asp.net, image, file, crop

```
protected void btnCropIt_Click(object s, EventArgs e)
{
    System.Drawing.Image img = System.Drawing.Image.FromFile(Server.MapPath("../upload/" + u.Avatar));
    var m = cropImage(img, new Rectangle(0, 0, 50, 50));
    System.IO.File.Delete(Server.MapPath("../upload/" + u.Avatar));
    m.Save(Server.MapPath("../upload/" + u.Avatar));
}

private static System.Drawing.Image cropImage(System.Drawing.Image img, Rectangle cropArea)
{
    Bitmap bmpImage = new Bitmap(img);
    Bitmap bmpCrop = bmpImage.Clone(cropArea, bmpImage.PixelFormat);
    return (System.Drawing.Image)(bmpCrop);
}

System.IO.File.Delete(Server.MapPath("../upload/" + u.Avatar)); 
```

这行代码抛出无法删除图像的异常，它被另一个进程使用。任何想法？如何覆盖它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:35:36.770

您的代码仍在使用它。 `FromFile()`保持锁定状态，直到图像被处理。这是一种晦涩难懂的语义，但[MSDN 文档](http://msdn.microsoft.com/en-us/library/stf701f5.aspx)确实提到了它。

作为一个简单的修复，`img.Finalize()`您可以立即尝试。`cropImage()`如果这不起作用，请使用[FileStream](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)将其拉入，使用[System.Drawing.Bitmap](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx) Stream 构造函数重载，然后立即关闭 FileStream。

# java - 如何保存和加载 HashMap ?

> ID：13036763
> 
> 赞同：2
> 
> 时间：2012-10-23T18:22:26.387
> 
> 标签：java, map, load, hashmap, save

哈希映射

```
public Map<String, BarrackData> barrack = new HashMap<String, BarrackData>(); 
```

营房数据.java

```
public class BarrackData {
int A;
int B;
int C;
int D;
int E;
String Title;

public BarrackData(int a, int b, int c, int d, int e, String title) {
    A = a;
    B = b;
    C = c;
    D = d;
    P = p;
    Title = title;
} 
```

我怎样才能保存这个HashMap？并加载它？
我用 Objectin/outputstream 尝试了不同的方法，
结果是 NotSerializable、ObjectSteam 和 IO 异常，
我不知道如何处理它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:28:57.953

只有`Serializable`类可以序列化：只需添加`implements Serializable`到您的类：

```
public class BarrackData implements Serializable { 
```

请注意，要实际*序列*化，类中的所有字段都必须是`Serializable`，但是 java 原语、数组（如果元素类型是`Serializable`）、`java.lang`类（如`String`）和`Collections`（如果元素类型是`Serializable`）是`Serializable`，所以你没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:30:08.093

您必须使您的 Object 类可序列化（为其提供 serialize() 和 deserialize() 方法，将其转换为字符串或可以保存/加载的字符串）。显然，HashMap 促进了开箱即用的某种程度的序列化。

以下是 Java 序列化教程的链接：[http ://www.tutorialspoint.com/java/java_serialization.htm](http://www.tutorialspoint.com/java/java_serialization.htm)

这里有一些关于 HashMap 序列化的更详细信息： [Serializing and deserializing a map with key as string](https://stackoverflow.com/questions/2747819/serializing-and-deserializing-a-map-with-key-as-string)

正如 Bohemian 所提到的，实施`Serializable`是执行此操作的标准方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:30:27.160

要完成答案，请注意`keySet()`属于`HashMap`（如果您随时需要）的结果不是`Serializable`。

实际上，键不应该与有关`HashMap`.

# asp.net - MVC 路由与服务路由冲突

> ID：13036768
> 
> 赞同：3
> 
> 时间：2012-10-23T18:22:37.467
> 
> 标签：asp.net, asp.net-mvc

我正在尝试将现有的 Web 项目转换为 MVC。我在 VS 2012 中做了一个标准的 MVC 项目。它添加了路由配置。我现有的项目已经包含 WCF 服务使用的路由条目。所以现在路由配置如下：

```
// Was here before, used by services
routes.Add(new ServiceRoute("AppServer", new WebServiceHostFactory(), typeof(MyService)));

// the rest is added by vs to configure a default controller
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

我意识到服务部分应该始终放在第一位，因为它更具限制性。如果放在最后，服务将不起作用。但现在的问题是

```
@Html.ActionLink("text", "MyAction", "MyController") 
```

现在生成我类型的链接

```
http://localhost/AppServer?action=MyAction&controller=My 
```

代替

```
http://localhost/My/MyAction 
```

我所期望的。

有谁知道如何使服务路由和与 mvc 相关的路由“和平相处”，即不相互影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:17:50.560

尝试将 MapRoute 放在顶部，但为约束添加[第四个参数](http://msdn.microsoft.com/en-us/library/dd460520%28v=vs.108%29.aspx)，如下所示：

```
new { controller = "regex-for-!=-AppServer" } 
```

这样，在创建链接时，助手将使用找到的第一个路由，但仍将跳过传入到“/AppServer”的请求，并由 ServiceRoute 处理。

# javascript - 如何覆盖从另一个脚本加载的可变参数

> ID：13036770
> 
> 赞同：8
> 
> 时间：2012-10-23T18:22:40.820
> 
> 标签：javascript, jquery

我有一个动态加载代码的脚本。它是一种搜索引擎。当我按下搜索按钮时，会触发该操作并打开一个包含许多参数的新页面。

我想覆盖在新 URL 中使用脚本生成的参数之一。JS 代码很大而且很难阅读，但我在 Firebug DOM 编辑器中找到了重要的部分。

这是执行搜索时生成的 URL 模式：

```
http://www.example.com/...?ParameterOne=123&ParameterTwo=Two&ThisParameter=Sth&ParameterFour=Four... 
```

我要编辑的是“ThisParameter”并更改其值。这是在 DOM 中编辑的部分，可以满足我的要求：

```
Foobar = {
_options: [],
...
var options = {"ParameterOne":123,"ParameterTwo":"Two","ThisParameter":"ABC","ParameterFour":Four,...}
... 
```

当您在 Firebug 的 DOM 选项卡中选择“复制路径”时，这是“ThisParameter”的输出：

```
_options[0].ThisParameter 
```

我想知道这是可能的。是什么让我认为它是，我可以在 Firebug 中更改此参数并且它可以完美运行。所以，如果 Firebug 可以编辑它，应该有办法用另一个脚本来影响它。

期待任何建议，提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:55:13.943

由于您无法编辑动态脚本，因此您有以下选项：

1.  您必须尝试为脚本提供正确的输入，并希望它使用您的值。
2.  向结果页面添加一个脚本，该脚本将读取 url 和参数，对其进行更改并重定向，正如我们在[此处](https://stackoverflow.com/a/13011390/888177)讨论的那样。（如果你把所有东西都放在函数中，如果函数是唯一命名的，它不应该与动态脚本冲突。）

您可以尝试使用搜索按钮在页面中添加类似这样的 jQuery 代码：

```
$('input[name=search_button_name]').click(function(e) {
    e.preventDefault();
    var form_search = $('#search_form_id');
    $('<input>').attr({
        type: 'hidden',
        name: 'ThisParameter',
        value: 'SomethingElse'
     }).appendTo(form_search);
     f.submit();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:40:18.727

You can override any js function and method, or wrap you code around it. The easiest thing would be to look at the code you get and once it gets loaded, you re-declare a method with your own functionality.

I you are trying to replace a parameter in a specific jquery request, you can even wrap around the jquerys ajax method:

```
var jquery_ajax = $.ajax
$.ajax = function(options){
    // parse only a specific occurence
    if(options.url.indexOf("example.com") > -1) {
           // change the url/params object - depending on where the parameter is
        options.params.ThisParameter = "My Custom value"
    }
    // call the original jquery ajax function
    jquery_ajax(options);
} 
```

But it would be a lot cleaner to override the method that builds the ajax request rather than the ajax request itself.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T22:30:03.203

我会进一步调查变量*选项*( `var options`) 的范围，它是全局的吗？即，如果您在 Firebug 控制台中键入“选项”，它会显示其属性吗？

如果是这样，您可以通过您自己的脚本访问它，并且更改是值，例如

```
options.ThisParameter = 'my-own-value'; 
```

您可以将脚本挂接到搜索按钮的单击事件。

我希望这会有所帮助，如果您在某处有一些示例代码，它可能会更具体。

# ruby - 无法运行 rake 或 rails 命令（如 rails c） - libcrypto 错误

> ID：13036771
> 
> 赞同：2
> 
> 时间：2012-10-23T18:22:44.243
> 
> 标签：ruby, rvm

尝试运行任何 rake、rails 或 bundle 命令时，我收到以下错误：

```
/home/username/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': libcrypto.so.1.0.0: cannot open shared object file: No such file or directory - /home/username/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/digest/sha1.so 
```

我试过 rvm pkg install openssl、rvm remove 1.9.3、rvm reinstall 1.9.3、重新安装 bundler 和所有 gem。我在另一个论坛上读到，我可能必须卸载 rvm、ruby 和 rails 并从头开始。呃——真的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:30:15.183

您需要阅读并遵循以下显示的说明：

```
rvm requirements 
```

然后删除rvm安装的openssl：

```
rm -rf $rvm_path/usr/ 
```

并重新安装红宝石：

```
rvm reinstall 1.9.3-p194 
```

# shell - 用于连接 4 个不同服务器并运行从文件输入的命令的 Shell 脚本

> ID：13036772
> 
> 赞同：-1
> 
> 时间：2012-10-23T18:22:43.930
> 
> 标签：shell, scripting

我需要创建一个脚本，将 4 个不同的服务器一一连接，并检查服务器是否正在运行，然后执行命令并退出。如果第一台服务器未运行，则连接到第二台并退出。

我正在考虑使用基于密钥的身份验证通过 SSH 脚本进行连接。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:31:41.357

关于什么

```
hosts="host1 host2 host3"

for h in $hosts; do
    ssh -o BatchMode=yes -o ConnectTimeout=7 $h command
    [ $? -eq 0 ] && break
done 
```

# java - 回文检查比较2个字符串Java

> ID：13036773
> 
> 赞同：0
> 
> 时间：2012-10-23T18:22:46.863
> 
> 标签：java

您好，我使用 2 种不同的方法来检查一个单词是否是回文。一种是硬编码的（这可以按预期工作），另一种是我使用 Stringbuilder 的，但我总是得到 true 并且永远不会 false 作为输出。我不明白为什么它在没有硬编码时不起作用......这是我用于测试的代码。（注释变量有效）

```
 public static void main(String[] args) {

      StringBuilder a = new StringBuilder("did");

      StringBuilder b = a.reverse();

     // String a = "did";
     // String b = "dad";

      if(b.equals(a)) {
          System.out.println("true");
      }
      else {
          System.out.println("false");
      }

      System.out.println(b);
      } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T18:25:58.187

因为，[`StringBuilder#reverse`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#reverse%28%29)做到位倒车。所以，`a.reverse()`也改变了 的值`a`。

您可以创建您的`StringBuilder`相当的副本。

```
 StringBuilder a = new StringBuilder("did");
    StringBuilder b = new StringBuilder(a);

    if (b.toString().equals(a.reverse().toString())) {
        System.out.println("true");
    } else {
        System.out.println("false");
    } 
```

您需要使用`toString()`来比较内容。`equals`在 StringBuilder 实例上使用将比较`references`.

# php - 在 wordpress 中，我正在操作 404 响应。我想在 404 错误给谷歌之前给出响应

> ID：13036774
> 
> 赞同：0
> 
> 时间：2012-10-23T18:22:49.303
> 
> 标签：php, wordpress

可能是标题中的问题没有解释我到底想要什么。所以我将解释一个逻辑，然后问我从中得到了什么问题。

我们正在使用wordpress。我们有 2 个类别 Option1（有 64 个不同的值）和 Option2（有 8 个不同的值）。我们想要像 ourdomain/Option1/Option2 这样的 url，具体取决于用户的位置。并且该 url 上的数据将根据 Option1 和 Option2 进行具体说明。我们不希望创建所有这些 64*8 的实际 wordpress 页面。

所以在网上搜索了很多之后，我们有一个解决方案，我实现了一个路由插件。

在该代码段中如下。

```
function site_router() {

global $route,$wp_query,$window_title;
error_reporting(E_ALL);
if ( $wp_query->is_404 ) 
    {
        $wp_query->is_404 = false;
        $cUrl="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
        $targetUrl="";
        switch($cUrl)
                {
                /* According to condition  I had written diffent cases like below.
                */
        default :
            {           
            include(get_template_directory() . "/home.php" ); 
            $template =locate_template('pagepath/home.php');
                        $window_title = 'dynamically it will come';
                        if ($template) {
                        load_template($template);
                        die;
                        }
                    }                   

                }
         }
}

add_action( 'wp', 'site_router'); 
```

至此，我的目的就成功实现了。

但现在的问题是谷歌说他们正在返回一个 404 错误。我认为它显然会给出错误，因为它给出了我们正在执行所有模板加载和所有内容的错误。

那么在向谷歌提供 404 响应之前，任何人都可以指导我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:04:07.187

我在 wordpress stackexchange 上发布了这个问题，并在那里得到了答案。链接如下。 [https://wordpress.stackexchange.com/questions/70345/in-wordpress-i-am-manipulation-404-response-i-want-to-give-the-response-before](https://wordpress.stackexchange.com/questions/70345/in-wordpress-i-am-manipulation-404-response-i-want-to-give-the-response-before)

# jquery - Javascript /Jquery：将点击替换为 on

> ID：13036775
> 
> 赞同：1
> 
> 时间：2012-10-23T18:22:52.227
> 
> 标签：jquery, click

我需要将点击处理程序添加到动态添加的链接。我读过 JQuery 的 click 方法不适用于动态创建的元素（实际上我无法让它工作）。

我有以下代码：

```
$(this).find(ops.editbuttonselector).click(function(e) { 
```

由于现在不推荐使用 .live 方法，因此我需要为此使用 .on 。根据这个[线程](https://stackoverflow.com/a/4944344/210481)和我对 jquery 的理解（这是有限的），我应该这样做：

```
selector = $(this).find(ops.editbuttonselector) 
$(document).on('click', selector, function(e) { 
```

但这也不起作用，实际上之前的工作（现有元素）也停止工作。

有人可以指点我正确的语法。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:23:49.137

第二个参数`.on()`是选择器字符串，而不是 jQuery 对象：

```
$(document).on('click', ops.editbuttonselector, function(e) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:28:47.320

由于您使用 绑定它`$(this)`，我假设您正在尝试在元素添加到 DOM 之后添加处理程序。如果是这种情况，那么您可以简单地执行以下操作，

```
//below is direct binding which is better than delegated event
$(this).find(ops.editbuttonselector).on('click', function(e) { 
```

否则，如果`this`是执行下一行时存在于 DOM 中的父元素，

```
//this is delegated event binding method
$(this).on('click', ops.editbuttonselector, function(e) { 
```

否则，您可以`.on`找到可能存在于 DOM 或文档对象中的最近的父级。

您可以阅读更多关于何时以及为什么应该绑定到文档对象[https://stackoverflow.com/a/12824698/297641](https://stackoverflow.com/a/12824698/297641)

# php - PHP script wont connect to database?

> ID：13036780
> 
> 赞同：-2
> 
> 时间：2012-10-23T18:23:03.537
> 
> 标签：php, mysql, database

When certain pages load on my site I have a script that will add points to the users table in the points row. Here is my script

```
<?php

session_start();
$db = mysqli_connect("hostname", "username", "password", "database");

$username = $_SESSION['username']; 

mysqli_query($db, 'UPDATE login_users SET points_column=points_column+1 WHERE username=$username');

?> 
```

I have already checked the host name, username and password details and everything is correct but I keep getting this error

> Warning: mysqli_connect() [function.mysqli-connect]: (28000/1045): Access denied for user 'a5950626_jlf'@'10.1.1.34' (using password: YES) in /home/a5950626/public_html/application/home.php on line 5
> 
> PHP Error Message
> 
> Warning: mysqli_query() expects parameter 1 to be mysqli, boolean given in /home/a5950626/public_html/application/home.php on line 9

Any ideas what the problem could be or how to fix it? Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:26:41.523

Well, the error message clearly says that access is denied, so either hostname/username/password/database is wrong or the user doesn't have the required permissions.

How to set up permissions, in this example all:

```
GRANT ALL PRIVILEGES ON database_name TO user@host IDENTIFIED BY 'password';
FLUSH PRIVILEGES; 
```

Host is where you'd be connecting from. `%` can be used as a wildchar. See more detailed examples at the [documentation](http://dev.mysql.com/doc/refman/5.0/en/grant.html). (you can see your user + host in the error message, btw)

As a side note, you should check that connection was successful before trying to use the database link in a query.

# sublimetext2 - 在 SublimeLinter 中忽略 XML 命名空间 (TAL)

> ID：13036784
> 
> 赞同：3
> 
> 时间：2012-10-23T18:23:13.640
> 
> 标签：sublimetext2, plone, zope, template-tal, zpt

我正在使用 SublimeText 2 和 SublimeLinter，我为 Zope 和 Plone 开发。在页面模板（.pt）中，我收到很多关于命名空间问题的错误，我想修复或让 SublimeLinter 忽略这些错误。

例如：

```
<p tal:replace="structure some_content">Content</p> 
```

...引发以下 SublimeLinter 错误：

```
Namespace error: Namespace prefix tal for replace on p is not defined 
```

我想忽略（或修复！）这些，因为页面模板中有很多 TAL，并且显示每个语句的错误没有帮助。

所以问题本质上是，我如何告诉 SublimeLinter 忽略命名空间错误，或者我是否从我的页面模板中遗漏了一些东西来包含命名空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:16:02.223

如果您 a) 使用 XML 语法高亮显示 (View -> Syntax -> XML)，并且 b) 正确声明`tal`,`metal`和`i18n`命名空间，那么`xmllint`（SublimeLinter 用于此任务的命令行工具）将对 TAL 模板非常满意。

例如，使用 HTML 正文标记：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="someprojectid"> 
```

我可以随意使用`tal`,`metal`和`i18n`属性和标签。

# javascript - JavaScript 与托管/本机代码的互操作性

> ID：13036786
> 
> 赞同：0
> 
> 时间：2012-10-23T18:23:32.070
> 
> 标签：javascript, .net, interop, v8, typescript

我目前正在构建一个运行无浏览器的 JavaScript 和 TypeScript 程序的服务器端应用程序。我目前使用的 JavaScript 引擎是 Microsoft 的 JavaScript 引擎“Chakra”（不过考虑使用 JavaScript.NET，因为它以更优雅的方式与 Google 的 V8 引擎挂钩）。

我正在使用 C# 和 .NET 4.0 对我的应用程序进行编程（前进到 4.5）

到目前为止，我遇到了几个问题，例如，如果我运行以下命令：

```
alert("Hello World"); 
```

我收到一个错误，因为“警报”未定义。想必这是在浏览器中实现的！（与 HTMLElement、XMLHttpRequest 等其他对象一样）

我想知道的是，我是否可以编写 JavaScript 代码来编组来自 .NET（或其他托管/本机系统）的代码

例如：

```
function alert(message) {
    //Performs call to .NET
    MessageBox.Show("Hello World");
} 
```

笔记：

我已经在这里做了一些研究：

[将 JavaScript 引擎嵌入 .NET](https://stackoverflow.com/questions/172753/embedding-javascript-engine-into-net-c)

[从 .NET 应用程序引用 Google 的 V8 引擎](https://stackoverflow.com/questions/356948/referencing-googles-v8-engine-from-a-net-app)

[与 JVM 和 CLR 具有良好互操作性的 Javascript 引擎](https://stackoverflow.com/questions/3926788/javascript-engine-with-good-interoperability-with-jvm-and-clr)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:29:19.427

有很多方法可以解决这个问题。Chakra 是 Windows 中的“[活动脚本引擎](http://msdn.microsoft.com/en-us/library/xawadt95%28v=vs.94%29.aspx)”，并实现了许多 COM 接口，使其能够告诉操作系统它能够在交互式环境中运行脚本文件。

这可以实现的一件事是在应用程序中使用 COM（如果您是纯托管的，则为互操作）并向脚本环境提供本机对象。这就是 windows 脚本宿主的运行方式，并在您使用它运行脚本时将 WSH 类启用到它所托管的所有脚本引擎。COM[接口参考在 MSDN 上](http://msdn.microsoft.com/en-us/library/t9d4xf28%28v=vs.94%29.aspx)。您可以使用[IActiveScript::AddNamedItem](http://msdn.microsoft.com/en-us/library/s8eyc3sh%28v=vs.94%29.aspx)在运行时将对象公开给正在执行的脚本。

我这样做是为了使托管的 IE Web 浏览器控件能够通过 javascript 调用本机代码，但是您必须对 COM 的工作非常熟悉，并且您的 COM/互操作技能必须非常敏锐。事后看来，这项艰巨的任务并不值得，因为我的一位同事发现了一种更简单的方法来完成脚本/主机 RPC（通过观察浏览器 ccontrol 的导航事件，他能够制作自定义链接，然后以编程方式单击它们然后使用链接中的 URL 来确定要执行哪个操作，这是一个非常黑客但他在 5 分钟内启动并运行它，我花了几个小时将类暴露给脚本运行时......）

# curl - ActiveMQ 通过脚本发送消息

> ID：13036790
> 
> 赞同：0
> 
> 时间：2012-10-23T18:23:51.003
> 
> 标签：curl, activemq

有没有人使用 curl 来编写 ActiveMQ 主题的脚本插入？我正在尝试这样的事情

```
curl -d "JMSDestination=COMMON_TOPIC&JMSDestinationType=topic&JMSMessageCount=1&JMSText={\"name\":\"values-etc\"}}" http://localhost:8161/admin/sendMessage.action 
```

我返回 HTTP 500 NullPointerException，它看起来像[AMQ-2740](https://issues.apache.org/jira/browse/AMQ-2740)

```
java.lang.NullPointerException
at org.apache.activemq.web.handler.BindingBeanNameUrlHandlerMapping.getHandlerInternal(BindingBeanNameUrlHandlerMapping.java:57) 
```

看起来问题是生成一个密钥并重新发送它，这就是我迷路的地方。有人对此有好运吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:50:35.867

这适用于 BASIC HTTP 身份验证和 ActiveMQ 5.4.2。

正如您所说，您必须包含密钥，以及维护您的 java 会话。让我们在 SECRET 变量中获取密钥并保存 cookie 文件（用于 JSESSIONID）。

```
SECRET=`curl --silent -H "Authorization: Basic YWRtaW46c29tZXBhc3N3b3Jk" -c cookies "http://127.0.0.1:6500/admin/send.jsp?JMSDestination=$DESTINATION&JMSDestinationType=$DESTINATION_TYPE" | sed -n '/secret/s/.*name="secret"\s\+value="\([^"]\+\).*/\1/p'` 
```

Authorization 标头包含您的凭据的哈希值，您可以在实际的 Web 控制台和 Web 开发工具（Chome 中的 F12）中嗅探您的凭据。

通过重复使用 cookie 和 SECRET 发送您的消息

```
curl --silent -H "Authorization: Basic YWRtaW46c29tZXBhc3N3b3Jk" -b cookies --data "secret=${SECRET}&JMSDestination=${DESTINATION}&JMSDestinationType=${DESTINATION_TYPE}&JMSText=${MESSAGE}" 
```

请注意，5.8 有一个[RESTful api](http://activemq.apache.org/rest.html)，应该被授予特权。

# java - 如何在不破坏当前设置的情况下安装多个版本的 JDK？

> ID：13036793
> 
> 赞同：0
> 
> 时间：2012-10-23T18:24:00.977
> 
> 标签：java, ubuntu, installation, jdk1.5

我在使用 JDK 1.6.34 设置的 Ubuntu 桌面上，一切正常。我想安装 JDK 1.5.11，以使我的环境变量等不会因安装 1.5.11 而“爆炸”。

这甚至可能吗？同一台机器上可以安装 2 个以上的 JDK 吗？如果是这样，实现这一目标需要采取哪些必要步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:28:19.223

是的，您可以在一台机器上安装任意数量的 JDK。至于“吹出”环境变量，这是您控制将使用哪个 jdk 的方式（即确保所需 jdk 的 /bin 目录位于路径的第一个位置，并且 JAVA_HOME 指向您要使用的 JDK）。

# css - 如何在不使用位置的情况下将一个 div 覆盖在另一个 div 上：绝对？

> ID：13036796
> 
> 赞同：13
> 
> 时间：2012-10-23T18:24:17.917
> 
> 标签：css, overlay, css-position, margin

我有两个带有两个图像的 div：

```
<div id="div1">    

     <div id="div2">
         <img src="img1" />
    </div> 

    <img src="img2" /> 

</div> 
```

第二个比第一个小一些。如何在不使用的情况下将第二张图片放在第一张图片上

```
#div2{
    position: absolute;
} 
```

我需要得到[类似](http://jsfiddle.net/4w5Ln/7/)的结果，但不使用绝对位置属性；

主要问题是在父 div 中还有很多其他元素，而不仅仅是 div2。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-23T18:48:26.593

## 负边距

你可以做很多负利润。我创建[了一个示例](http://jsfiddle.net/QEuNU/4)，其中只有两个图像，没有任何 div。

```
img {
    display: block;
}
.small {
    margin: -202px 0 0 0;
    border: 1px solid #fff;
}
.small.top {
    position: relative;
    margin: 0 0 -202px 0;
}
```

```
<img src="http://www.lorempixel.com/300/300">
<img class="small" src="http://www.lorempixel.com/200/200">
And some text
<img class="small top" src="http://www.lorempixel.com/200/200">
<img src="http://www.lorempixel.com/300/300">
And some more text
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-23T18:48:54.827

我对你的问题是为什么你必须这样做

```
#div2 {
    position: absolute;
} 
```

如果您遇到的问题是因为它是页面而不是 div 的绝对问题，请确保 #div1 具有以下内容：

```
#div1 {
    position:relative;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T18:25:53.740

你可以嵌套`div2`在里面`div1`：

```
<div id="div1">
    <img src="\img1.png" />

    <div id="div2">
        <img src="\img1.png" />
    </div>

</div> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-06T11:17:21.753

它不是使用负边距的好方法。特别是在电子邮件模板时，gmail 拒绝负边距和头寸。所以另一种方法是

```
 <div class='wrapDiv'  style='width: 255px;'>
           <div class='divToComeUp' style='
                    float: left;
                    margin-top: 149px; width:100%;'>This text comes above the .innerDiv  
according to the amount of margin-top that you give</div>

           <div class='innerDiv' style='width:100%; height:600px'>
               Inner div Content
           </div>

    </div> 
```

# java - Java 插入带有空格的字符二维数组

> ID：13036797
> 
> 赞同：1
> 
> 时间：2012-10-23T18:24:19.927
> 
> 标签：java, arrays

我正在尝试在 2D 字符数组的所有元素中插入一个空格。这行得通吗？

```
public class AsciiDisplay {

  private char [][] grid;

  public AsciiDisplay() {
    grid = new char [30][15];
  }

  public void updateGrid() {

  //Here is the code to initialize all the elements on my 2D char array with a blank space.
    for(int i = 0; i < grid.length; i++) {
      for(int j = 0; i <grid[0].length; i++) {
        grid[i][j] = ' ';
      }
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:28:13.707

如果您的网格是正方形或矩形的，那么它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:29:49.017

问题出在第二个循环中。

`for(int j = 0; i <grid[0].length; i++) {`当你使用`i++`

将其更改为`j++`

我认为`grid[0].length`部分很好，因为所有行的长度都相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:27:00.690

只是一个更正，您的循环应该如下所示，因为在第二个循环中，您需要在第一个循环中获得的数组上循环。

```
for(int j = 0; j <grid[i].length; j++) { 
```

# eclipse - 在 eclipse juno 中安装 EPIC

> ID：13036803
> 
> 赞同：4
> 
> 时间：2012-10-23T18:25:00.227
> 
> 标签：eclipse, macos, perl, epic

我在 Eclipse 中安装 EPIC 但总是出错：

```
Unable to read repository at http://e-p-i-c.sf.net/updates/testing/content.xml 
```

[我在这篇文章](https://stackoverflow.com/questions/7409691/eclipse-indigo-unable-to-connect-to-repository)中尝试了第二个答案：

1）在eclipse.ini中添加一行：-Djava.net.preferIPv4Stack = true

2）删除eclipse/p2/org.eclipse.equinox.p2.repository/cache目录

但仍然得到错误。但是我可以正确安装 CDT。

我正在使用 Mac OX Lion 和 Eclipse Classic 4.2.1 mac os 64bit 版本。我也尝试切换到 32 位版本，但没有奏效。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-11T11:33:30.113

在 Eclipse 中安装 EPIC 有两种方法：

**方式一：**

1.  打开日食

2.  转到帮助 -> 安装新软件，然后单击添加按钮

3.  输入名称作为 EPIC 和位置如下：
    [http](http://e-p-i-c.sf.net/updates) : //epic.sf.net/updates（对于稳定的 0.5.x，旧版本的 EPIC）
    [http://epic.sf.net/updates/testing](http://e-p-i-c.sf.net/updates/testing)（对于大多数最近的 0.6.x 版本）

4.  按照eclipse弹出的指示

5.  成功安装后转到 Window -> Preferences 并在左侧面板中观察列表为“Perl EPIC”

**方式二：**

1.  打开日食

2.  转到帮助 -> Eclipse 市场

3.  在 Find 文本框中键入 EPIC，然后单击 Go 按钮

4.  单击“EPIC - Eclipse Perl 集成”区域的安装按钮

5.  按照eclipse弹出的指示

6.  成功安装后转到 Window -> Preferences 并在
    左侧面板中观察列表为“Perl EPIC”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-28T08:00:33.073

这是另一个可能的答案，除了已经提供的答案。

我刚刚打了这个，这是防火墙规则的问题。实际上，该文件`content.xml`在插件更新中不存在（它有 a `site.xml`），但这就是当它无法到达外部世界时错误所说的

解决方案是只向 Eclipse 开放端口 80 和 443

PS：这发生在我安装新版本的 Eclipse 时，该版本未在防火墙规则中列入白名单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:34:20.207

从“可用软件站点”中删除该站点。
1) 转到“帮助”>“安装新软件”>“可用软件站点”

找到您在列表中提到的 URL 并将其删除。

注意：如果需要，然后从市场安装 EPIC。

# assembly - 装配中的有限状态机 (MASM615)

> ID：13036804
> 
> 赞同：0
> 
> 时间：2012-10-23T18:25:00.490
> 
> 标签：assembly, recursion, state-machine, masm32

我正在尝试在上述版本的程序集中实现**FSM**，但如果不知道采用哪种方法似乎无法走多远。有没有人愿意分享他们的实现？

我主要关心的是如何为这个特定任务使用跳转和循环。

此外，有谁知道我如何在汇编中制作一个递归“方法”，以及这是否适合这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:56:32.453

我建议您的设计尽可能以数据为导向；尽可能用数据描述你的 FSM。

我将 DFA 实现为状态和下一个状态的二维表，并制作了一个简单的迭代电机，根据该表读取输入并更改状态。

这是表格的样子（fasm）：

```
dfa_chars       db      '=','<','>','!','/',',','*','(',')','{','}','+','-',' ',';',TAB, CR, LF;  N,  A

dfa             db      $07,$04,$05,$06,$0a,$10,$11,$12,$13,$14,$15,$16,$17,$00,$18,$00,$0b,$1d,$08,$09; 0 WS
                db      $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$0b,$1d,$01,$01; 1 //
                db      $02,$02,$02,$02,$02,$02,$03,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02; 2 /*
                db      $02,$02,$02,$02,$1d,$02,$03,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02; 3 /**
                db      $19,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20; 4 <
                db      $1a,$21,$21,$21,$21,$21,$21,$21,$21,$21,$21,$21,$21,$21,$21,$21,$21,$21,$21,$21; 5 >
                db      $1b,$22,$22,$22,$22,$22,$22,$22,$22,$22,$22,$22,$22,$22,$22,$22,$22,$22,$22,$22; 6 !
                db      $1c,$23,$23,$23,$23,$23,$23,$23,$23,$23,$23,$23,$23,$23,$23,$23,$23,$23,$23,$23; 7 =
                db      $24,$24,$24,$24,$24,$24,$24,$24,$24,$24,$24,$24,$24,$24,$24,$24,$24,$24,$08,$24; 8 N
                db      $25,$25,$25,$25,$25,$25,$25,$25,$25,$25,$25,$25,$25,$25,$25,$25,$25,$25,$09,$09; 9 A+N
                db      $26,$26,$26,$26,$01,$26,$02,$26,$26,$26,$26,$26,$26,$26,$26,$26,$26,$26,$26,$26; a /
                db      $27,$27,$27,$27,$27,$27,$27,$27,$27,$27,$27,$27,$27,$27,$27,$27,$27,$1d,$27,$27; b CR 
```

# magento - 如何显示哪个用户在 Magento 1.7 中对订单发表评论的用户名

> ID：13036807
> 
> 赞同：2
> 
> 时间：2012-10-23T18:25:05.817
> 
> 标签：magento, magento-1.7

当我们团队中的一位管理员对订单发表评论时，我想在他们写的评论中显示他们的名字。

这将帮助我们在看到评论时知道谁在评论。

我[为 1.4 找到了一些解决方案](https://stackoverflow.com/questions/6219620/add-username-to-order-comment-history)，**但我们正在使用 1.7**，我觉得使用 1.4 解决方案会让我们失败。

如果有人可以提供帮助，那将不胜感激。谢谢大家！

**已解决**：

我听了 RS 的回答，在他较早的[较短的编辑](https://stackoverflow.com/revisions/13039841/5)中，它说只需将此代码添加到：

/app/code/core/Mage/Adminhtml/controllers/Sales/OrderController.php

```
 public function addCommentAction(){
 ......

 // get the login info of current user
 $_user = Mage::getSingleton('admin/session');
 $user['email'] = $_user->getUser()->getEmail();
 $user['firstname'] = $_user->getUser()->getFirstname();
 $user['lastname'] = $_user->getUser()->getLastname();

 $order->addStatusHistoryComment($data['comment'] . " Add by {$user['firstname']}", $data['status'])
                ->setIsVisibleOnFront($visible)
                ->setIsCustomerNotified($notify); 
```

这非常有效！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:48:02.830

如果你想让它更容易，你可以在评论之前或之后附加写评论的用户名，而不是在数据库中创建新字段和更少的代码。（例如。“这是我的评论 - 由 xxxx yyyyy 添加）

通过创建扩展管理订单控制器的自定义模块。（请参阅“覆盖前端核心控制器” [http://prattski.com/2010/06/24/magento-overriding-core-files-blocks-models-resources-controllers/](http://prattski.com/2010/06/24/magento-overriding-core-files-blocks-models-resources-controllers/)）

创建 /app/code/local/RWS/OrderComment/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <RWS_OrderComment>
            <version>0.1.0</version>
        </RWS_OrderComment>
    </modules>

    <admin>
      <routers>
        <adminhtml>
          <args>
            <modules>
              <RWS_OrderComment before="Mage_Adminhtml">RWS_OrderComment_Adminhtml</RWS_OrderComment>
            </modules>
          </args>
        </adminhtml>
      </routers>
  </admin>
</config> 
```

创建 /app/code/local/RWS/OrderComment/controllers/Adminhtml/Sales/OrderController.php

（从 /app/code/core/Mage/Adminhtml/controllers/Sales/OrderController.php 复制 addCommentAction 方法）

```
<?php
   include_once Mage::getModuleDir('controllers', 'Mage_Adminhtml') . DS . 'Sales' . DS . 'OrderController.php';

   class RWS_OrderComment_Adminhtml_Sales_OrderController extends Mage_Adminhtml_Sales_OrderController
   {

       public function addCommentAction(){
          ......

          // get the login info of current user
          $_user = Mage::getSingleton('admin/session');
          $user['email'] = $_user->getUser()->getEmail();
          $user['firstname'] = $_user->getUser()->getFirstname();
          $user['lastname'] = $_user->getUser()->getLastname();

          $order->addStatusHistoryComment($data['comment'] . " Added by {$user['firstname']}", $data['status'])
                ->setIsVisibleOnFront($visible)
                ->setIsCustomerNotified($notify);
        }
    } 
```

创建 app/etc/modules/RWS_OrderComment.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
   <modules>
       <RWS_OrderComment>
           <active>true</active>
           <codePool>local</codePool>
       </RWS_OrderComment>
   </modules>
</config> 
```

# php - 获取所有文章 ID 的 PHP 脚本 joomla

> ID：13036812
> 
> 赞同：1
> 
> 时间：2012-10-23T18:25:32.500
> 
> 标签：php, joomla

我开发了一个脚本，它通过它的 ID 为我提供 Joomla 文章的文本，如下所示：

```
$article =& JTable::getInstance("content");
$article->load($address = JRequest::getVar('articleID'));
echo $article->get("introtext");
echo $article->get("fulltext"); 
```

现在我需要一个类似的脚本来获取当前站点的所有（活动）文章 ID（可能像 joomla 主页上的从最后一个到第一个排序）。

我环顾四周，但找不到任何东西。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:30:43.913

您可以使用以下内容：

```
$query = "SELECT * FROM #__content";
$db = JFactory::getDBO();
$db->setQuery($query); 
$articles = $db->loadObjectList(); 
foreach($articles as $article){
    echo 'ID:' . $article->id . ' Title: ' . $article->title;
} 
```

如果要获取特定类别的所有文章 ID，可以使用以下命令：

```
$catId = 59;
$query = "SELECT * FROM #__content WHERE catid ='" . $catId . "'";
$db = JFactory::getDBO();
$db->setQuery($query); 
$articles = $db->loadObjectList(); 
foreach($articles as $article){
    echo 'ID:' . $article->id . ' Title: ' . $article->title;
} 
```

显然，您可以更改`59`为适合您需要的任何内容

**请注意，这种数据库查询方法适用于 Joomla 1.5**

希望这可以帮助

# xpath - 如果节点存在于某个位置，xquery 返回布尔值

> ID：13036830
> 
> 赞同：2
> 
> 时间：2012-10-23T18:26:49.653
> 
> 标签：xpath, xquery, xquery-sql

我在 SQL 2008 数据库中有类似于以下内容的 XML，存储在 XML 字段中。如果节点存在于 XML 的特定部分中，我想返回一个真或假指示。

```
<root>
    <node attribute1='value1' attribute2='value2'>
        <sub1 name='ID' value="1" />
        <sub2 name='project' value="abc" />
        <sub3 name='Lead' value="John" />
    </node>
    <entry attribute1='value1' attribute2='value2'>
        <message>start</message>
    </entry>
    <entry attribute1='value1' attribute2='value2'>
        <attribute name='project' value='done'>
    </entry>    
    <node attribute1='value1'>
        <sub1 name='ID' value="2" />
        <sub2 name='project' value="abc" />
        <sub3 name='Lead' value="John" />
    </node>
    <entry attribute1='value1' attribute2='value2'>
        <message>start</message>
    </entry>
    <node attribute1='value1'>
        <sub1 name='ID' value="3" />
        <sub2 name='project' value="abc" />
        <sub3 name='Lead' value="John" />
    </node>
    <entry attribute1='value1' attribute2='value2'>
        <message>start</message>
    </entry>
    <node attribute1='value1'>
        <sub1 name='ID' value="4" />
        <sub2 name='project' value="abc" />
        <sub3 name='Lead' value="John" />
    </node> 
    <entry attribute1='value1' attribute2='value2'>
        <message>start</message>
    </entry>
    <entry attribute1='value1' attribute2='value2'>
        <attribute name='project' value='done'>
    </entry>
</root> 
```

您会注意到，该`<attribute>`节点可能出现在具有“ID”的节点之后，也可能不出现。在此示例中，您可以在第一和第四“部分”中看到它，因为没有更好的术语。

具有以下表结构：

```
ID (PK)
EventID (FK)
RawXML (XML)
Created (datetime) 
```

以下是我目前所拥有的 SQL/xQuery 的摘录：

```
WITH XMLNAMESPACES(
  'http://www.w3.org/2001/XMLSchema-instance' as xsi,
),
t1 as(
    SELECT distinct
      x.EventId
    , c.value ('(//node/sub[@name=''ID'']/@value)[1]', 'nvarchar(max)') as ID   
    , c.value ('(//node/sub[@name=''ID''][1][descendant::attribute/@name=''project''])[1]', 'nvarchar(max)' ) as Exists     
    FROM
      Table1 x
    CROSS APPLY
      RawXML.nodes('./.') as t(c)
     )
select distinct
  t1.ID
, t1.Exists
from t1 
```

我将运行脚本 4 次或更多次（在每次运行之前递增所有单例值）

对于给定的 XML，我需要在运行 4 次查询后得到以下结果：（不知道 ID 的值，因此我不能在查询中使用它们）

```
 ID    Exists
   ----   -------
    1      true
    2      false
    3      false
    4      true 
```

给出 SQL 后，我没有收到任何错误，但它需要很长时间（超过 45 分钟），我什至还没有让它完成。解析 XML 真的不应该花这么长时间。

**更新：** 我限制了我的查询以确保它只解析一行（一个 XML 文件）并在 57 秒内完成。但是，当我应该为 ID 1 获得“1”时，我得到了 ID 1 和 ID 2 的“0”结果。

而且我相信你们中的大多数人都知道 SQL Server 不支持以下兄弟姐妹等，所以很遗憾，这不是一个选项。

仅供参考，我已经成功地使用它来找到“项目”的两个实例，但它忽略了它们在 xml 中出现的位置。：

```
c.value ('(//node[descendant::attribute/@name=''Project''])[1]', 'nvarchar(max)' ) as TrueFalse 
```

所以基本上，我需要知道名称='Project'的节点是否存在于名称='ID'的节点之后，但在名称='ID'的节点的下一个实例之前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T05:52:42.423

您的 XML 中有一些错误，根据您使用的查询判断，我还更改了子节点。

您可以使用常规 SQL 而不是 XQuery 来枚举您的 ID 和项目节点`row_number()`，然后检查“下一行”是项目节点还是 ID 行。

```
-- Temp table to hold the extracted values from the XML
create table #C
(
  rn int primary key,
  ID int
);

-- Get the enumerated rows with ID.
-- project nodes will have NULL in ID
insert into #C
  select row_number() over(order by T.N) as rn,
         T.N.value('sub[@name = "ID"][1]/@value', 'int') as ID
  from table1
    cross apply RawXML.nodes('/root/*[sub/@name = "ID" or attribute/@name = "project"]') as T(N)

-- Get the ID's and check if the next row is a project node
select C1.ID,
       case when exists (
                          select *
                          from #C as C2
                          where C1.rn + 1 = C2.rn and 
                          C2.ID is null
                        ) 
         then 1
         else 0
       end as [Exists]
from #C as C1
where C1.ID is not null;

drop table #C; 
```

[SQL小提琴](http://sqlfiddle.com/#!3/2d559/4/0)

您可以在没有临时表的情况下使用 CTE 来代替，但我怀疑临时表版本会更快。

```
with C as
(
  select row_number() over(order by T.N) as rn,
          T.N.value('sub[@name = "ID"][1]/@value', 'int') as ID
  from table1
    cross apply RawXML.nodes('/root/*[sub/@name = "ID" or attribute/@name = "project"]') as T(N)
)
select C1.ID,
        case when exists (
                          select * 
                          from C as C2 
                          where C1.rn + 1 = C2.rn and 
                                C2.ID is null
                        ) 
          then 1
          else 0
        end as [Exists]
from C as C1
where C1.ID is not null; 
```

[SQL小提琴](http://sqlfiddle.com/#!3/2d559/5/0)

# jquery - 验证来自 jquery 插件的表单。低音炮.de

> ID：13036831
> 
> 赞同：0
> 
> 时间：2012-10-23T18:26:54.710
> 
> 标签：jquery, asp.net, validation

我想用下面写的脚本来验证我的表格。我试过了，但它没有验证.. 下面是我的代码。任何建议，将不胜感激。

```
<form id="signupForm">
        <table id="control_Table">
            <tr>
                <td style="padding-top: 20px;">
                    <label for="fullname">
                        Full Name</label>
                </td>
                <td>
                    <asp:TextBox ID="txtFullName" runat="server"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td style="padding-top: 20px;">
                    <label for="email">
                        Email Address</label>
                </td>
                <td>
                    <asp:UpdatePanel ID="UpdatePanel2" runat="server">
                        <ContentTemplate>
                            <asp:TextBox ID="txtEmail" runat="server"></asp:TextBox>
                        </ContentTemplate>
                    </asp:UpdatePanel>
                </td>
            </tr>
            <tr>
                <td style="padding-top: 20px;">
                    <label for="username">
                        User Name</label>
                </td>
                <td>
                    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                        <ContentTemplate>
                            <asp:TextBox ID="txtuname" runat="server"></asp:TextBox>
                        </ContentTemplate>
                    </asp:UpdatePanel>
                </td>
            </tr>
            <tr>
                <td style="padding-top: 20px;">
                    <label for="password">
                        Password</label>
                </td>
                <td>
                    <asp:TextBox ID="txtPwd" runat="server" TextMode="Password"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td style="padding-top: 20px;">
                    <label for="confirm_password">
                        Confirm Password
                    </label>
                </td>
                <td>
                    <asp:TextBox ID="txtCPwd" runat="server" TextMode="Password"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td style="padding-top: 20px;">
                    Active User
                </td>
                <td>
                    <asp:CheckBox ID="chkActive" runat="server" />
                </td>
            </tr>
            <tr>
                <td style="padding-top: 20px;">
                    Admin User
                </td>
                <td>
                    <asp:CheckBox ID="chkAdmin" runat="server" />
                </td>
            </tr>
            <tr>
                <td style="padding-top: 10px;">
                    <asp:Button ID="btnSubmit" runat="server" Text="Submit" />
                </td>
            </tr>
        </table>
    </form> 
```

下面是表单的脚本。

```
$.validator.setDefaults({
    submitHandler: function() {
        alert("submitted!");
    }
});

$(document).ready(function() {
    // validate the comment form when it is submitted
    // validate signup form on keyup and submit
    $("#signupForm").validate({
        rules: {
            fullname: "required",
            username: {
                required: true,
                minlength: 2
            },
            password: {
                required: true,
                minlength: 5
            },
            confirm_password: {
                required: true,
                minlength: 5,
                equalTo: "#MainContent_txtPwd"
            },
            email: {
                required: true,
                email: true
            },
            agree: "required"
        },
        messages: {
            fullname: "Please enter your firstname",
            username: {
                required: "Please enter a username",
                minlength: "Your username must consist of at least 2 characters"
            },
            password: {
                required: "Please provide a password",
                minlength: "Your password must be at least 5 characters long"
            },
            confirm_password: {
                required: "Please provide a password",
                minlength: "Your password must be at least 5 characters long",
                equalTo: "Please enter the same password as above"
            },
            email: "Please enter a valid email address",
            agree: "Please accept our policy"
        }
    });

    // propose username by combining first- and lastname
    $("#MainContent_txtuname").focus(function() {
        var firstname = $("#MainContent_txtfullname").val();
        var lastname = $("#lastname").val();
        if (firstname && lastname && !this.value) {}
    });

});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:40:16.900

除了属性之外，您还必须为`name`输入提供`id`属性。Validate 插件和您的所有规则都必须引用`name`not `id`。

从有关[validate](http://docs.jquery.com/Plugins/Validation/validate#toptions)`rules`选项的文档中：

> 定义自定义规则的键/值对。键是元素的**名称**（或一组复选框/单选按钮），值是由规则/参数对或纯字符串组成的对象.... [继续]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:40:29.297

看看您的 ID。默认情况下，服务器控件 ID 与 ASP.NET 中的结果元素 ID 不匹配。

如果您在 .NET 框架 4.0 或更高版本上，则可以使用`ClientIDMode="Static"`，或者只需确保在脚本中引用正确的元素 ID。

请参阅 ClientIDMode 枚举和[此处](http://msdn.microsoft.com/en-us/library/system.web.ui.clientidmode.aspx)的描述。

# php - 如何使用 Ajax 即时获取 ID

> ID：13036839
> 
> 赞同：1
> 
> 时间：2012-10-23T18:27:20.993
> 
> 标签：php, jquery, mysql, ajax

我有一个问题要你升级我的知识。

我正在尝试创建一个内联编辑页面，数据存储在数据库中。在“内容”表中，我创建了 2 个用于测试目的的字段，即“id”和“text”字段。

如果我想用“id=25”或 id=X 修改字段，我知道如何手动进行，只需在 MySQL Query 中指定“WHERE id=25”，但如果我有 1000 个条目的列表，如何修改查询以即时获取 ID？

这是代码，我正在玩：

**index.php**文件

```
<style>
body {      
    font-family: Helvetica,Arial,sans-serif;
    color:#333333;
    font-size:13px;
}

h1{
    font-family: Georgia, Times, serif;
    font-size: 28px;        
}

a{
    color: #0071D8;
    text-decoration:none;
}

a:hover{
    text-decoration:underline;
}

:focus {
    outline: 0;
}

#wrap{
    width: 500px;
    margin:0 auto;              
    overflow:auto;      
}

#content{
    background: #f7f7f7;
    border-radius: 10px;
}

#editable {     
    padding: 10px;      
}

#status{
    display:none; 
    margin-bottom:15px; 
    padding:5px 10px; 
    border-radius:5px;
}

.success{
    background: #B6D96C;
}

.error{
    background: #ffc5cf; 
}

#footer{
    margin-top:15px;
    text-align: center;
}

#save{  
    display: none;
    margin: 5px 10px 10px;      
    outline: none;
    cursor: pointer;    
    text-align: center;
    text-decoration: none;
    font: 12px/100% Arial, Helvetica, sans-serif;
    font-weight:700;    
    padding: 5px 10px;  
    -webkit-border-radius: 5px; 
    -moz-border-radius: 5px;
    border-radius: 5px; 
    color: #606060;
    border: solid 1px #b7b7b7;  
    background: #fff;
    background: -webkit-gradient(linear, left top, left bottom, from(#fff), to(#ededed));
    background: -moz-linear-gradient(top,  #fff,  #ededed);
    filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#ededed');
}   

#save:hover
{
    background: #ededed;
    background: -webkit-gradient(linear, left top, left bottom, from(#fff), to(#dcdcdc));
    background: -moz-linear-gradient(top,  #fff,  #dcdcdc);
    filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#dcdcdc');
}

</style>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
 <script>
 $(document).ready(function() {

$("#save").click(function (e) {         
    var content = $('#editable').html();    

    $.ajax({
        url: 'save.php',
        type: 'POST',
        data: {
        content: content
        },              
        success:function (data) {

            if (data == '1')
            {
                $("#status")
                .addClass("success")
                .html("Data saved successfully")
                .fadeIn('fast')
                .delay(3000)
                .fadeOut('slow');   
            }
            else
            {
                $("#status")
                .addClass("error")
                .html("An error occured, the data could not be saved")
                .fadeIn('fast')
                .delay(3000)
                .fadeOut('slow');   
            }
        }
    });   

});

$("#editable").click(function (e) {
    $("#save").show();
    e.stopPropagation();
});

$(document).click(function() {
    $("#save").hide();  
});

 });
 </script>

</head>
<body>
<div id="wrap">

    <div id="status"></div>

    <div id="content">

    <div id="editable" contentEditable="true">
    <?php
        //get data from database.
        include("db.php");
        $sql = mysql_query("select * from content");
        $row = mysql_fetch_array($sql);     
        echo $row['id'];
        echo "<br />";
        echo $row['text'];
    ?>      
    </div>  

    <button id="save">Save</button>
    </div>

</div>
  </body> 
```

这是**save.php**文件：

```
include("db.php");

$content = $_POST['content']; //get posted data
$content = mysql_real_escape_string($content);  //escape string 

$sql = "UPDATE content SET text = '$content' WHERE id = '$id' ";

if (mysql_query($sql))
{
    echo 1;
} 
```

我知道这可能是一个愚蠢的问题，但我是新手。

预先感谢您的帮助。

**更新：** 感谢 Luis 我解决了我的老问题，但我不知道为什么如果我将所有代码放在一段时间内，只有第一个条目的“保存”按钮运行良好，其余的没有，有什么提示吗？目前我只测试“description_text”。

这是“while”代码：

```
<?php 

    /////////// Now let us print the table headers //////////////// 

    $query =" SELECT * FROM gallery ORDER BY id DESC ";

    $result = mysql_query($query) or die(mysql_error());

    echo "<div style='width: 100%; text-align: center;'>";                   
    echo "<table style='margin: auto auto;'>";
    echo "<tr><th>ID</th><th>Image</th><th>Category</th><th>Description</th><th>Added on</th></tr>";

    while($ordinate = mysql_fetch_array($result))
    {

    $id     = $ordinate['id'];
    $img_name    = $ordinate['img_name'];
    $category     = $ordinate['category'];
    $description_text = $ordinate['description_text'];
    $insert_datetime    = $ordinate['insert_datetime'];

    echo "<tr><td style='width: 20px;'>".$id."</td><td style='width: 210px;'><img src='../../upload/content/uploaded_images/". $img_name ."' width='200px'></td><td style='width: 100px;'>".$category."</td><td style='width: 100px;'><div id='status'></div><div id='content'><div id='editable' contentEditable='true'>".$description_text."</div><button id='save'>Save</button></div></td><td style='width: 100px;'>".$insert_datetime."</td></tr>";        

    }
    echo "</table><br /><br /></div>";
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:38:03.370

在 index.php 上，将这部分代码移到开头，这样您就可以在脚本的其余部分使用相同的变量。

```
<?php
    //get data from database.
    include("db.php");
    $sql = mysql_query("select * from content");
    $row = mysql_fetch_array($sql);     
    // echo $row['id'];    but keep this ones in its original place inside their <%php %> tags
    // echo "<br />";
    // echo $row['text'];
?> 
```

稍后在 ajax 调用中，插入以下 PHP 行：

```
 data: {
    content: content
    <?php
    echo ", id: ".$row['id'];
    echo ", token: '".md5('my SALT text'.(int)$row['id'])."'";    // strongly!!! recomended, not mandatory
    ?>
    }, 
```

在 save.php 上

```
 $id = (int)$_POST['id'];                    // (int)  sanitizes  id
    $token = $_POST['token'];
    if(md5('my SALT text'.$id)!=$token) die();  // or whatever but do not execute update
                                                // perhaps  echo 0; die();

    // ... rest of your code ....
    $sql = "UPDATE content SET text = '$content' WHERE id = $id" 
```

该令牌可防止有人使用您的 save.php 作为在桌面上的每个帖子上注入任何内容的方式的风险。

至少，一个建议：使用 mysqli_query（注意 i）而不是 mysql_query，因为最后一个已弃用。此外，但有更多不同，您可以使用 PDO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:15:11.480

与其简单地回显 $row['id']，不如在具有特定 id 的 HTML 元素中回显它，以便可以从 jQuery 访问并发布它。

```
<span id="idfield"><?php echo $row['id']; ?></span>
<button id="save">Save</button>
</div> 
```

然后，在 javascript 内部：

```
 $("#save").click(function (e) {         
    var content = $('#editable').html();    
    var id = $('#idfield').html(); 
```

将其用作 POST 中的参数：

```
 $.ajax({
      url: 'save.php',
      type: 'POST',
      data: {
       content: content,
       id: id
      }, 
```

# webhooks - Dwolla API Webhooks Notification 是否发送错误的事务 id？

> ID：13036846
> 
> 赞同：3
> 
> 时间：2012-10-23T18:27:38.620
> 
> 标签：webhooks, dwolla

我认为 Dwolla API 在通知中发送了错误的事务 ID。在正常的 dwolla 货币交易中，会创建两个交易 ID（这对我来说很奇怪，但 dwolla 就是这样做的）。因为这两个是同时创建的，所以它们总是（根据我的经验）连续的数字。例如，如果账户 X 向账户 Y 汇款，Y 将看到交易 id M，X 将看到交易 id M+1。

但是 Dwolla 的通知 webhook 会发送 Y 条 id 为 M+1 的交易细节。虽然 ID M+1 对该交易仍然是唯一的，但 ID M+1 不能被 Y 通过 API 使用——因为 M+1 应该只被 X 使用。

这是一个具体的例子：

1.  通过我的 web 应用程序，我通过异地网关 api 从我的个人 dwolla 帐户向我的组织汇款。

2.  我的 webapp 以回调和通知形式发送交易详细信息。第 1 步生成的事务 id 是 1431566。这是发送给回调和通知的事务 id。我的网络应用程序存储此 ID 以供将来使用。

3.  通过我的网络应用程序，我决定从我的组织退还我的个人 dwolla 帐户，因此：

4.  我的 webapp 尝试向 dwolla 查询交易 1431566 以获取 SourceId，但这失败了 - dwolla 报告“找不到帐户的交易”。如果没有像从 ID 中减去一个并重试这样的丑陋杂物，我的自动退款将无法继续。

    手动解决方法是通过 Web 界面登录到我组织的 dwolla 帐户。在这里我可以根据日期时间查找交易，可以看到交易ID实际上是1431565（在Web界面中正确报告）。如果我进入我组织的数据库并将 1431566 替换为 1431565，我可以重复第 4 步，这一次可以正常工作。之后我可以发起一个 send() 并退款。

在 dwolla 将支持转移到 stackoverflow 之前，我在这里报告了同样的问题：[https ://getsatisfaction.com/dwolla/topics/callback_and_webhook_notification_sent_wrong_transaction_id_off_by_one](https://getsatisfaction.com/dwolla/topics/callback_and_webhook_notification_sent_wrong_transaction_id_off_by_one)

我认为如果其他人有同样的问题，它会更快地修复。或者，也许我遗漏了一些明显的东西，有人会指出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T21:47:23.450

感谢 Michael 的帮助，我们能够通过在获取交易详细信息时使用**接收方的**OAuth 令牌而不是发送方的 OAuth 令牌来解决此问题。

例如，假设我使用 API 发送了一些钱，然后创建了针对汇款人的交易 1202 和针对收款人的交易 1201。如果您进行 API 调用以获取交易 1202 的详细信息但使用接收方的 OAuth 令牌，它将为您提供交易 1201 的详细信息，包括费用信息。

我不确定情况是否完全相同，因为我们是两笔交易之间的促进者，所以不能保证这在您的情况下会奏效。但值得一试。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T18:28:29.487

因此，您的应用程序的密钥和机密可以通过传递应用程序的 client_id 和 client_secret 的 transactionById() 方法来访问发布给您的事务 ID，而不是 oauth_token。这意味着，当您轮询交易时，而不是查询此 URL：

```
https://www.dwolla.com/oauth/rest/transactions/{transaction_id}?oauth_token=x 
```

改为查询此 url：

```
https://www.dwolla.com/oauth/rest/transactions/{transaction_id}?client_id=x&client_secret=y 
```

说得通？

# wcf - WCF 上的空白 ADO.NET 对象

> ID：13036849
> 
> 赞同：0
> 
> 时间：2012-10-23T18:27:54.677
> 
> 标签：wcf, ado.net, entity-framework-5

我试图公开从 ADO.NET 对象（从数据库创建）创建的对象。

当我尝试从服务返回这些对象之一时，所有对象的字段都是 0。

这是服务合同：

```
[ServiceContract(Namespace="http://www.thatindigogirl.com/samples/2006/06")]
public interface IMFileService
{
    [OperationContract]
    File GetFile();
} 
```

下面是实现服务契约的类型：

```
public class MFileService : IMFileService
{
    public File GetFile()
    {
        using (FileEntities ctx = new FileEntities())
        {
            File aFile = (from f in ctx.Files
                          where f.ID == 5
                          select f).FirstOrDefault();       // No connection string named 'FileEntities' could be found in the application config file.
            return aFile;
        }
    }
} 
```

这是我的客户代码：

```
 EndpointAddress ep = new EndpointAddress("http://localhost:8000/MFileService/MFileService");

    IMFileService proxy = ChannelFactory<IMFileService>.CreateChannel(new BasicHttpBinding(), ep);
    File f = proxy.GetFile();
    Console.WriteLine("File info: " + f.Name + ", " + f.ID + ", " + f.ParentDirectory + ", " + f.Size);
    Console.ReadLine(); 
```

我不确定为什么提琴手看不到对数据库的请求、响应或从主机到客户端的消息。

ADO.NET 对象甚至允许这样的事情吗？还是必须先创建自己的类并将 ADO.NET 对象数据放入其中，然后再通过网络发送？

# c# - 我需要为“缩小”/概览页面的每个部分使用语义缩放控件，还是只需要一个？

> ID：13036850
> 
> 赞同：1
> 
> 时间：2012-10-23T18:28:00.690
> 
> 标签：c#, gridview, windows-8, microsoft-metro

我了解语义缩放控件基本上是通过这种方式在 XAML 中实现的：

```
<SemanticZoom>

    <SemanticZoom.ZoomedOutView>
        <!-- Put the GridView for the zoomed out view here. -->   
    </SemanticZoom.ZoomedOutView>

    <SemanticZoom.ZoomedInView>
        <!-- Put the GridView for the zoomed in view here. -->       
    </SemanticZoom.ZoomedInView>

</SemanticZoom> 
```

我感到困惑的是，假设我有一个“开始”或“主”页面，上面有六个 Gridview，每个 Gridview 在“放大”以查看其详细信息时都会单独显示，我是否需要一个语义缩放来处理整个 GridView 集合，或者我是否需要为每个 GridView 提供语义缩放控件？

如果我只需要一个语义缩放控件来处理所有这些（根据定义，缩小视图实际上对所有这些控件都是相同的），我如何制作特定于所选 GridView 的放大/详细视图?

IOW，如果我有六个包含以下信息的 GridView：

```
Green Bay Packers
Milwaukee Bucks
Baltimore Orioles
Rory Gallagher
Mark Twain
Abraham Lincoln 
```

...我如何看到当放大/详细视图被激活，并且用户在“马克吐温”网格上“捏出”时，显示马克吐温特定页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:18:07.503

语义缩放最适用于绑定到分组集合源的 GridView。放大和缩小视图仅支持 GridView 或 ListView 作为其子元素，因此如果您有 6 个组，则可以使用单个网格视图来实现。

在缩小视图方面，可以使用相同类型的控件来表示组。可以自定义此视图以显示您需要的信息 - 例如，某个部分中的书籍数量或该部分的概述。

Handling the transition from the zoomed out view to zoomed in is easy enough, if a little convoluted in terms of setting up the binding (IIRC you need to specify the zoomed out binding in code) but moving in the other direction is not guaranteed to behave as you want it to. If the zoomed out view is only one screen wide, for example, then it doesn't make sense to try to scroll to the previously selected group.

I am not in front of my dev machine right now so I'm afraid I can't put a sample together for you, but there are lots of examples online.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:45:51.537

I believe you just need one Semantic Zoom control. But instead of having six different gridviews, can't you just have one bound to a grouped collection? And then your GridView can use an ItemTemplateSelector to display your different data types.

See here for itemtemplateselector: [http://blogs.u2u.be/diederik/post/2012/05/22/Using-Dynamic-XAML-in-Windows-8-Metro.aspx](http://blogs.u2u.be/diederik/post/2012/05/22/Using-Dynamic-XAML-in-Windows-8-Metro.aspx)

I can provide some code if needed.

And regarding making sure the correct GridView is selected, the semantic zoom control handles that for you.

# ios - 处理多个 Tap 事件

> ID：13036853
> 
> 赞同：0
> 
> 时间：2012-10-23T18:28:04.513
> 
> 标签：ios, events, uigesturerecognizer

我有`UIView`一个`UITapGestureRecognizer`附件，当用户在`UITextFields`. 现在，我还有一些标签，当点击时会显示`UIPickerView`. 标签`UITapGestureRecognizer`也使用 an 。问题是这些事件似乎在蚕食自己。

点击我的标签时是否可以执行两个事件处理程序？

谢谢你。

```
UITapGestureRecognizer* tapForUnit = [[UITapGestureRecognizer alloc] initWithTarget:self.fridgeItemUnit action:@selector(onTap)];
[self.fridgeItemUnit addGestureRecognizer:tapForUnit]; 
```

上面的代码是针对其中一个标签的。我删除了视图的代码，因为我的标签将停止工作，但它完全相同，唯一不同的是它附加到`self.view`并且执行的函数是这个：

```
-(void)dismissKeyboard:(UIGestureRecognizer*)gesture {
    [self.fridgeItemName resignFirstResponder];
    [self.fridgeItemQuantity resignFirstResponder];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:15:54.813

我将从以下方法实现`UIGestureRecognizerDelegate`：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
```

我附上一个例子：

![截屏](../Images/b44cd6c8f524288a6927242331017f1d.png)

我在 XIB 上做的唯一一件事就是启用用户交互。这里`.m`是`UIViewController`：

```
@implementation ViewController

- (void)viewDidLoad {

    [super viewDidLoad];
    _viewRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(viewTap:)];
    [_viewRecognizer setDelegate:self];
    _labelRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelTap:)];
    [_labelRecognizer setDelegate:self];
    [self.view addGestureRecognizer:_viewRecognizer];
    [self.label addGestureRecognizer:_labelRecognizer];
}

- (void)viewDidUnload {

    [super viewDidUnload];
    [_viewRecognizer release]; _viewRecognizer = nil;
    [_labelRecognizer release]; _labelRecognizer = nil;
    self.label = nil;
}

- (void)dealloc {
    [_viewRecognizer release];
    [_labelRecognizer release];
    self.label = nil;
    [super dealloc];
}

- (void)labelTap:(UIGestureRecognizer *)recognizer {

    NSLog(@"labelTap");
}

- (void)viewTap:(UIGestureRecognizer *)recognizer {

    NSLog(@"viewTap");
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    NSLog(@"shouldRecognizeSimultaneouslyWithGestureRecognizer");
    return YES;
} 
```

然后当点击标签时，我得到以下日志：

```
shouldRecognizeSimultaneouslyWithGestureRecognizer
shouldRecognizeSimultaneouslyWithGestureRecognizer
labelTap
viewTap 
```

当点击视图时：

```
viewTap 
```

# c# - 如何防止修改继承的属性？

> ID：13036854
> 
> 赞同：1
> 
> 时间：2012-10-23T18:28:06.120
> 
> 标签：c#, wpf, inheritance

我在标准 wpf 组合框中添加了一些额外的东西。在构造函数中，我设置了两个属性：

```
public SmartComboBox()
            : base()
        {
            this.IsEditable = true;
            this.IsTextSearchEnabled = false;
            ...
        } 
```

这两个属性继承自 System.Windows.Controls.ComboBox。在构造函数中设置它们的值后，如何防止修改这两个属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T18:35:12.880

简短的回答：你不能，因为你不能改变属性修饰符。如果要隐藏实现，只需将类*封装* `ComboBox`在类中即可。

```
public class SmartComboBox {

     private ComboBox _uiCombo = ....
} 
```

此外还有另一件事：

在您的示例中，在提供的代码中，没有任何理由显式调用`base()`on `ctor`，因为它将由`CLR`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:47:55.920

如果您覆盖 IsEditableProperty 的元数据并使用 PropertyChangedCallBack 和 CorceValueCallBack 会怎样？[http://msdn.microsoft.com/en-us/library/ms597491.aspx](http://msdn.microsoft.com/en-us/library/ms597491.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T18:41:06.017

你不能完全阻止它，你能来的最接近的是将属性重新声明为新的

```
public SmartComboBox()
{
    base.IsEditable = true;
    base.IsTextSearchEnabled = false;
    ...
}

public new bool IsEditable { get { return base.IsEditable; } }
public new bool IsTextSearchEnabled { get { return base.IsTextSearchEnabled; } } 
```

这样做的缺点是 new 不是覆盖，如果对象被转换为其父对象，则可以设置属性。

另一种选择是像 Tigran 提到的那样包装类，但是带有它的皮塔饼会暴露您需要的所有其他属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T18:35:29.680

如果`IsEditable`被标记为虚拟，它应该是微不足道的

```
bool iseditableSet=false;
override bool IsEditable
{
    get;
    set
    {
      if(!iseditableSet){
        iseditableSet=true;
        base.IsEditable=value;
      }else{
        throw Exception...
    }     
} 
```

如果它没有被标记为虚拟，那就更难了，但是你可以使用“隐藏”来防止至少你自己的代码在没有非常明确的`base.`指令的情况下修改属性。当然，如果你正在处理，这在物理上是不可能做到的一个函数，`Combobox`它可能会修改这些属性。把它当作一个教训，为什么属性几乎总是虚拟的

# linux - 在 PS1 之后添加换行符

> ID：13036855
> 
> 赞同：3
> 
> 时间：2012-10-23T18:28:07.813
> 
> 标签：linux, macos, bash, terminal

我正在尝试在提示后添加换行符。基本上我想要：

```
$ ls
                    <-- how do I get this line break?
file1 file2 file3
                    <-- this one is easy, PS1="\n$ " or whatnot
$ 
```

代替

```
$ ls
file1 file2 file3
$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:58:15.273

如果您使用的是 Bash，则可以使用类似[这样](http://www.twistedmatrix.com/users/glyph/preexec.bash.txt)的脚本来提供`preexec`功能。

使用`preexec`，您可以在提示后添加换行符，方法是编辑您的`.bash_profile`以包含

```
preexec() { echo; }
preexec_install 
```

请注意，我必须修改上述链接脚本的第 125 行才能阅读

```
PROMPT_COMMAND="${PROMPT_COMMAND} preexec_invoke_cmd" 
```

在我的 OS X 盒子上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T18:48:09.963

如果您只是逐案想要此功能，您可以这样做：

```
$ echo -e "\n" && ls 
```

（即告诉 echo 插入换行符，然后运行常规命令。-e 标志告诉 echo 解释转义序列。并非所有系统配置都需要它）

为简洁起见，您可以创建一个别名，并在需要一些空格时使用它

```
$ alias ws='echo -e "\n"'
$ ws && echo "I am padded text"

  I am padded text 
```

# c++ - 在 C++ 中使用 if/else 的奇怪输出

> ID：13036864
> 
> 赞同：2
> 
> 时间：2012-10-23T18:28:40.033
> 
> 标签：c++, if-statement

所以我有以下代码：

```
char command;
cin >> command;
if ( command == 'P' ) {
    do_something();
}
if ( command == 'Q' ) {
    cout << "Exit\n";
    exit(0);
}
else {
    cout << "command= " command << endl; //use for debugging
    cout << "Non-valid input\n";
    exit(1);
}
cout << "exit at completion\n";
exit(0);
} 
```

当我使用输入时`P`，我`do_something()`完成后的输出是：

```
"output from do_something() function"
command= P
Non-valid input 
```

我的问题是为什么我仍然会在第一个 if 语句中调用`Non-valid input`after ？`do_something()`AKA 为什么 else`do_something()`完成后仍然运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T18:30:04.657

您省略了`else`第二个之前的`if`，这意味着如果`command != 'Q'`（对于`P`），该`exit`块将被执行。

你可能打算做

```
if ( command == 'P' ) {
    do_something();
}
else if ( command == 'Q' ) { // Note the 'else'
    cout << "Exit\n";
    exit(0);
}
else {
    cout << "command= " command << endl; //use for debugging
    cout << "Non-valid input\n";
    exit(1);
} 
```

这样，当命令为`P`,时`do_something`将被调用，其余的将被跳过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:32:50.080

您`else`与**第二个** `if`而不是第一个相关联。因此，在完成第一个之后，`if`它进入`else`第二个 if 的部分。这就是你得到这个的原因。你应该使用这个

```
char command;
cin >> command;
if ( command == 'P' ) {
    do_something();
}
else if ( command == 'Q' ) {
    cout << "Exit\n";
    exit(0);
}
else {
    cout << "command= " command << endl; //use for debugging
    cout << "Non-valid input\n";
    exit(1);
}
cout << "exit at completion\n";
exit(0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:30:37.973

这两个`if`语句是相互独立的...... else 是第二个`if`条件。所以它永远不会进入第二个`if`条件，总是进入它的`else`部分。第一个`if`条件没有`else`作用。

# regex - 带有未注释“console.log”字符串的 Grep 文件

> ID：13036871
> 
> 赞同：2
> 
> 时间：2012-10-23T18:29:10.090
> 
> 标签：regex, unix, grep

我需要返回包含未`console.log`注释字符串的目录中的所有文件。`//`所以我认为我应该搜索在换行符和字符串之间没有字符串的任何行`console.log`。

此命令返回已注释和未注释的 console.log。我想排除注释了 console.log 的实例。

```
grep -H -r  "^.*[^//].*console\.log" /var/www/vhosts/mysite.com 
```

我需要的命令将匹配这些行：

```
var num = 0;  console.log(num);
alert('some text'); console.log('anything');
  console.log(); 
```

但不匹配这些行：

```
var num = 0; // console.log(num);
//alert('some text'); console.log('anything');
  // console.log(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T19:03:22.087

~~使用`-L`开关~~

 ~~```
grep -rL '//.*console\.log' directory 
```~~  ~~### 更新：

```
grep -rlP '^(?!.*//.*console\.log)(?=.*console\.log)' directory 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T12:45:57.827

扩展 Ωmega 的答案：为了找到多行注释 ( `/* console.log(); */`) 额外使用：

```
^(?!.*//.*console\.log)^(?!.*/\*.*console\.log)(?=.*console\.log) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:47:55.950

列出所有**包含未注释的文件的解决方案 console.log**：

```
grep -rlL "\/\/.*console\.log" /var/www/vhosts/mysite.com 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T18:49:39.483

`-v`您可以使用in 中的开关使用反转匹配`grep`。

```
grep -H -r "console\.log" /var/www/vhosts/mysite.com | grep -v "//" 
```~~

# javascript - 如何通过 cookie 处理访问权限，通过 ajax 获取价值

> ID：13036874
> 
> 赞同：1
> 
> 时间：2012-10-23T18:29:27.013
> 
> 标签：javascript, jquery, ajax, json

问题是：我制作了一个类似于 facebook 的画廊灯箱，它将在左侧加载图像并在右侧为内容留出一些空间，现在我必须加载要放置在右侧的内容，但是我想通过处理访问权限来获得这些评论，例如：只显示允许登录用户查看的此类信息，现在我可以使用cookie直接处理服务器端吗？或者我需要在请求中提供cookie变量，然后处理？如果是这样`json`对我来说？或者有什么东西可以让我的工作更轻松？

# css - div 内的 Span 样式不正确

> ID：13036880
> 
> 赞同：2
> 
> 时间：2012-10-23T18:30:04.853
> 
> 标签：css, html

我想在 div 中使用 span

div用来放一条红色的横线

```
<div style="background-color:red;">
</div> 
```

**span 用于在 div**中将元素向右放置

```
<div style="background-color:red;">
<span style="float:right;">
ABC
</span>
</div> 
```

但是**水平线没有变成红色，右边只显示ABC，实际上没有像width：900px这样的div样式的效果..** ....为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T18:33:17.437

我建议：

```
<div style="background-color:red; text-align:right;">ABC</div> 
```

`overflow:auto`否则，如果您确实想利用`<span>`原始示例中的样式，则需要添加到 div 的样式定义中。

干杯

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T18:31:50.340

添加`overflow:auto`到 div：

```
<div style="background-color:red;overflow:auto;">
<span style="float:right;">
ABC
</span>
</div>​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/TtKGy/)**

浮动内部跨度会导致 div 本质上崩溃，添加溢出规则允许它重新获得跨度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T18:33:27.457

浮动没有给你的 div 任何高度。您需要使用`clear`. 试试这个：

```
<div style="background-color:red;">
  <span style="float:right;">
    ABC
  </span>
  <div style="clear: both;"></div>
</div> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-05T07:08:20.767

您需要添加属性`overflow:hidden`；在你的 DIV 中。下面我提到了代码：

```
<div style="background-color:red; text-align:right; overflow:hidden;"> ABC </div> 
```

# php - 如何在 Wordpress 中为 get_post_meta 编写 if 语句

> ID：13036893
> 
> 赞同：0
> 
> 时间：2012-10-23T18:30:58.597
> 
> 标签：php, wordpress, if-statement

我正在尝试纠正 get_post_meta 的 if 语句。如果有东西，我想显示信息，如果没有，不要显示任何东西。这是我正在使用的一个例子，没有运气。

```
if(get_post_meta()); echo '<a href="'.get_post_meta($post->ID, 'text', true).'">'; endif; 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:41:32.493

您在语法中犯了错误。采用

```
if($condition): statements; endif;
              ^ 
```

代替

```
if($condition); statements; endif;
              ^ 
```

所以你的代码是

```
if(get_post_meta()):
    echo '<a href="'.get_post_meta($post->ID, 'text', true).'">';
endif; 
```

这是[控制结构的替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)。
你总是可以使用标准的

```
if($conition) {
    // statements
    // .....
}
else { 
    // otherweise
} 
```

# c++ - 交叉编译 qt (linux/mingw -> windows)：各种未定义的引用

> ID：13036895
> 
> 赞同：2
> 
> 时间：2012-10-23T18:31:01.193
> 
> 标签：c++, qt, mingw, cross-compiling

（从[这里](http://www.qtcentre.org/threads/51647-cross-compiling-qt-%28linux-mingw-gt-windows%29-various-undefined-references)发帖，因为似乎没有人知道）

大家好，

我正在尝试从我的 linux 为我的 windows 交叉编译 qt 4.8.3。最终目标是构建一个静态 qt，但独立于是否构建静态我总是得到相同的错误。玩弄各种标志也无济于事：

```
./.obj/release-shared/qtextcodec.o:qtextcodec.cpp:(.text+0x18dc): undefined reference to `QGb18030Codec::QGb18030Codec()'
./.obj/release-shared/qtextcodec.o:qtextcodec.cpp:(.text+0x18ef): undefined reference to `QGbkCodec::QGbkCodec()'
./.obj/release-shared/qtextcodec.o:qtextcodec.cpp:(.text+0x1902): undefined reference to `QGb2312Codec::QGb2312Codec()'
./.obj/release-shared/qtextcodec.o:qtextcodec.cpp:(.text+0x1915): undefined reference to `QEucJpCodec::QEucJpCodec()'
./.obj/release-shared/qtextcodec.o:qtextcodec.cpp:(.text+0x1928): undefined reference to `QJisCodec::QJisCodec()'
./.obj/release-shared/qtextcodec.o:qtextcodec.cpp:(.text+0x193b): undefined reference to `QSjisCodec::QSjisCodec()'
./.obj/release-shared/qtextcodec.o:qtextcodec.cpp:(.text+0x1956): undefined reference to `vtable for QEucKrCodec'
./.obj/release-shared/qtextcodec.o:qtextcodec.cpp:(.text+0x1971): undefined reference to `vtable for QCP949Codec'
./.obj/release-shared/qtextcodec.o:qtextcodec.cpp:(.text+0x198c): undefined reference to `vtable for QBig5Codec'
./.obj/release-shared/qtextcodec.o:qtextcodec.cpp:(.text+0x19a7): undefined reference to `vtable for QBig5hkscsCodec' 
```

我将默认的 win32-g++ 配置文件与 mingw 结合使用。

我用谷歌搜索了很多，但我仍然不知道这是从哪里来的。也许你们中的某个人对我有正确的提示；-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T23:15:14.907

您可以使用 MXE 来构建它。这很容易。你只需这样做：

```
make qt 
```

它几乎可以自动完成所有工作，包括下载源代码、应用所需的补丁以启用交叉编译（这可能是您自己手动交叉编译 Qt 失败的原因）以及构建所有依赖项。您可以从以下网址下载 MXE：http: [//mxe.cc](http://mxe.cc)。当然，请阅读有关如何使用它交叉编译软件的文档。

它的要点是，而不是`qmake`您使用`i686-pc-mingw32-qmake`（根据文档，在您更改 PATH 以包含 MXE 目录之后。）

MXE 将所有内容构建为静态库，因此当您交叉编译程序时，您将获得一个不依赖任何 DLL 的单个 .exe 文件。

# excel - 将 ABS 公式列排序和匹配

> ID：13036896
> 
> 赞同：0
> 
> 时间：2012-10-23T18:31:01.823
> 
> 标签：excel

我退休了，所以我有很多空闲时间，所以我喜欢玩赛狗。使用 Excel，我试图通过一次整理两列（Post - B-SPD）等来帮助自己节省时间，因为您必须对一些低位和一些高位进行排序。未标记 Post 的列是公式列 =abs(a3) 等，但是当我尝试对 Post 列进行排序时，会排序，但我尝试使用它排序的列不会排序并且与分配给它的帖子编号匹配。

可以这样做还是 =ABS 公式可以阻止它。加上即使使用 =ABS 一些数字是负数，但 - 减号不会出现。我已经尝试了所有使用数字，使用货币，使用通用的方法，但没有任何效果。一个人把我送到控制面板的时钟、语言和区域设置。去额外的设置并在那里设置你的负面设置。但这也不会让 - 减号出现在负数上。

以上任何一个甚至可能吗？

```
POST B-SPD POST A-SPD POST 8TH POST L-SPD POST A-FIN
1 31.43 1 31.84 1 0 1 3 1 5.83
2 31.43 2 31.67 2 35.14 2 0 2 4.67
3 31.79 3 31.9 3 59.11 3 6 3 5.67
4 31.32 4 31.73 4 65.5 4 3 4 3.83
5 31.47 5 31.68 5 29.71 5 4 5 3.33
6 31.76 6 32.18 6 100 6 9 6 5.01
7 31.48 7 31.99 7 41.13 7 1 7 5.67
8 31.69 8 31.99 8 75.79 8 6 8 4.83
    低 低 高 高 低

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:03:23.483

要求不明确，但使用 ABS 不应引起分类问题。=ABS（绝对）功能是去除减号（所以似乎工作正常）。

可能会建议 OP 删除除一个 POST 列之外的所有列，选择标题和数据（不包括“LOW”或“HIGH”）并插入 > 表格 - 表格，检查我的表格有标题，确定，然后使用过滤器按钮对于要排序的任何属性，选择是从最小到最大排序还是从最大到最小排序（其他列将“效仿”）。过滤器按钮将显示哪个按钮正在确定排序以及是升序还是降序（例如下表按“8TH”降序排序）：

![SO13036896 示例](../Images/0939e1987db5c642ea29b2faff8c205b.png)

# tabs - 从页面内滑出面板

> ID：13036897
> 
> 赞同：1
> 
> 时间：2012-10-23T18:31:03.940
> 
> 标签：tabs, slide

我在将各种滑动面板插件应用到页面中的 div 时遇到问题。因此，不是从浏览器窗口的顶部、侧面或底部，而是从页面内的某个位置。

这会工作...

```
$("div").click(function () {
      $(this).hide("slide", { direction: "down" }, 1000);
}); 
```

但是 div 滑出视图，因此没有可以单击的选项卡将其向上滑动。

我可以使用单独的元素来启动点击功能，但我需要可点击元素充当连接到滑动 div 的选项卡。

因此，当页面加载时，您会在屏幕中间看到一个面板，该面板底部会伸出一个小标签。单击选项卡时，它会与带有附加信息的面板一起向上滑动。再次单击选项卡时，它会向下滑动。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:14:06.637

您需要在其旁边添加另一个 div 以用作切换选项卡，该选项卡不会被隐藏。让该选项卡隐藏/显示您想要隐藏的 div。

```
$("#tab").click(function () {
    $("#slider").slideToggle("slow");
}); 
```

看到这个小提琴：http: [//jsfiddle.net/Jxbkj/](http://jsfiddle.net/Jxbkj/)

# list - 从列表序言中删除相邻的重复项

> ID：13036899
> 
> 赞同：1
> 
> 时间：2012-10-23T18:31:06.210
> 
> 标签：list, prolog, duplicates

我是 Prolog 的新手，我需要从列表中删除重复项，如下例所示。

```
?- remove([a,a,b,c,a,a,b,c,b,a,a],X).
X = [a,b,c,a,b,c,b,a] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:42:19.407

如果我理解正确，您需要删除*相邻*的重复项。只需复制跳过第一个相邻元素的元素。我会让你完成代码...

```
remove([X,X|Rest], [X|Rest1]) :-
   !,   % this commit avoid the logical alternative you'll code below
   .... % recurse to get Rest1 from Rest
remove([X|Rest], [X|Rest1]) :-
   % recurse to get Rest1 from Rest
% remember the base case !! 
```

**编辑**错误指出，这种天真的 remove/2 是错误的。我已经更正了添加 remove/3 谓词，该谓词对见证进行了复制，即元素前瞻。

```
remove([X|Xs], [X|Ys]) :-
  remove(X, Xs, Ys).
remove(X, [X|Xs], Ys) :-
  !,  % discard the duplicate
  ... % recurse to get Ys from Xs, with same witness
remove(_, [X|Xs], [X|Ys]) :-
  ... % the cut above ensure that here we must change witness when recursing
% as always, remember the base case !! 
```

# php - 在 foreach 循环中多次运行 mysql_query

> ID：13036903
> 
> 赞同：0
> 
> 时间：2012-10-23T18:31:19.577
> 
> 标签：php, mysql, sql

我想根据他们的 sdk 检索一些产品的 id .. 但如果有 2 个或多个产品，它只返回第一个 id ......

有谁能够帮助我 ？

非常感谢

这是我使用的代码...（我是 php 新手）

```
<?
     foreach(array_keys($nume_individual) as $n){

        $sql = mysql_query("SELECT * FROM products WHERE cod_produs = '$cod_produs_individual[$n]' LIMIT 1");
        while($row = mysql_fetch_assoc($sql)){
                $id_s[$n]=$row["id"];

        }

    echo (
        "<tr>
        <td>".$id_s[$n]."</td>  /* this is not working well (running just once) */
            <td>".$nume_individual[$n]."</td> 
        <td>".$cod_produs_individual[$n]."</td>
        <td>".$numar_individual[$n]."</td>
        <td>".$bucati_individual[$n]."</td>
        <td>".$pret_individual[$n]."</td>

        </tr>

        ");

        };?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:36:14.377

这是因为您设置了限制 1 以便它只返回一行

```
$sql = mysql_query("SELECT * 
                     FROM products 
                      WHERE cod_produs = '$cod_produs_individual[$n]' 
                      LIMIT 1 // this is the reason you getting only one row 
                      "); 
```

其次，您在 while 循环之外使用 echo 在 while loopp 内部使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:36:17.870

将您`echo`放入 while 循环中，然后`limit 1`从查询中删除。

当您`limit 1`的查询中有 a 时，您将结果限制为仅从数据库返回 1 行。此外，当您在 while 循环之外有回显时，您只会打印数据库中最后加载的行。

看来您正在从某些数组中打印 $n 键处的值。我不知道 $n 是什么，但您可能想尝试使用该行的 ID，因为您使用的是主 foreach 索引。

```
foreach(array_keys($nume_individual) as $n){
    $sql = mysql_query("SELECT * FROM products WHERE cod_produs = '$cod_produs_individual[$n]'");
    while($row = mysql_fetch_assoc($sql)){
        $id_s[$n]=$row["id"];
        echo (
            "<tr>
            <td>".$row["id"]."</td>  
            <td>".$nume_individual[$row["id"]]."</td>
            <td>".$cod_produs_individual[$row["id"]]."</td>
            <td>".$numar_individual[$row["id"]]."</td>
            <td>".$bucati_individual[$row["id"]]."</td>
            <td>".$pret_individual[$row["id"]]."</td>
            </tr>"
        );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T22:15:02.750

我设法解决了这个问题。这是代码，也许对某人有用:)

```
<? 
$cod_produs_individual2 = array_pop($cod_produs_individual) ;
$csv =implode(',', $cod_produs_individual); 
$csv2 = "'" . join("', '", $cod_produs_individual) . "'"; 
$csv3= $string = rtrim($csv2, ',');

$query2 = sprintf("SELECT * 
                    FROM products 
                   WHERE cod_produs IN (%s)",
                  $csv3); 

$results2 = mysql_query($query2);
$randuri = mysql_num_rows($results2);

$a = array();

if ($randuri >0) { while($row = mysql_fetch_array($results2)){ 

    array_push ($a, $row["id"]);

        }
}
print_r ($a);

foreach(array_keys($nume_individual) as $n){

    echo (
    "<tr>
    <td>".$a[$n]."</td>
    <td>".$nume_individual[$n]."</td>
    <td>".$cod_produs_individual[$n]."</td>
    <td>".$numar_individual[$n]."</td>
    <td>".$bucati_individual[$n]."</td>
    <td>".$pret_individual[$n]."</td>

    </tr>

    ");

    };?> 
```

# c# - 使用来自 FormCollection 的数据发出异步 HttpClient 发布请求

> ID：13036904
> 
> 赞同：21
> 
> 时间：2012-10-23T18:31:20.967
> 
> 标签：c#, asp.net-mvc-4, formcollection, dotnet-httpclient

我正在做一个 Asp.Net MVC 4 项目，并且正在寻找对我们的 api 服务的内部请求（如代理）。

这就是我的控制器中 index 方法的样子。我被困在 PostAsync 部分。

```
[HttpPost]
public async Task<ActionResult> Index(FormCollection body){

   HttpClient httpClient  = new HttpClient();
   httpClient.BaseAddress = new Uri("http://myapi.com");

   // posts to http://myapi.com/users
   var response = await httpClient.PostAsync("users", body);

   if(response.isSuccessStatusCode) return Json(new {
        status = true,
        url    = response.Content.Url
   });
} 
```

我想将我的“application/x-form-urlencoded”“body”内容传递给 PostAsync POST 方法。但是，我收到错误消息“正文不是 HttpContent 类型”。

我无法投射或转换。现在怎么办？

让我知道我在这里做错了什么。

埃里克

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-23T20:27:14.733

我不完全确定您要做什么，但可能将其转换`FormCollection`为字典并使用`FormUrlEncodedContent`该类是您正在寻找的。

例如：

```
var response = await httpClient.PostAsync("users",
                                          new FormUrlEncodedContent(
                                              body.
                                                  AllKeys.ToDictionary(
                                                      k => k, v => body[v]))); 
```

# java - Java 以这种格式减去两个日期

> ID：13036907
> 
> 赞同：5
> 
> 时间：2012-10-23T18:31:25.897
> 
> 标签：java

> **可能重复：**
> [在 Java 中计算日期的差异](https://stackoverflow.com/questions/453388/calculating-difference-in-dates-in-java)
> [如何在 Java 中减去日期？](https://stackoverflow.com/questions/3526485/how-do-you-subtract-dates-in-java)

我正在从一个字符串中解析两个日期，如下所示：

```
Oct 15, 2012 1:07:13 PM
Oct 23, 2012 03:43:34 PM 
```

我需要做的是找出这两个日期之间的区别，例如：

```
Oct 23, 2012 03:43:34 PM - Oct 15, 2012 1:07:13 PM 
```

= 8 天 2 小时 36 分 21 秒

^ 这是我需要得到的两个日期/时间

我相信我需要解析格式并将其转换为另一种格式，然后减去两者之间的差异并进行数学运算以获得之间的天/小时/分钟/秒

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T19:17:00.523

与其他回答者试图暗示的相反，计算两个日期之间的差异在标准 Java SE 中并不是那么简单。

您的第一步确实是将这些字符串转换为可用`Date`实例。您可以使用[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html). 这是一个启动示例：

```
String string1 = "Oct 15, 2012 1:07:13 PM";
String string2 = "Oct 23, 2012 03:43:34 PM";

SimpleDateFormat sdf = new SimpleDateFormat("MMM d, yyyy h:mm:ss a", Locale.ENGLISH);

Date date1 = sdf.parse(string1);
Date date2 = sdf.parse(string2); 
```

*（请注意此处可选参数的重要性`Locale`，这在有关将字符串转换为日期的答案中经常被忽略）*

您的下一步是计算这两个日期之间的差异。当您受限于标准 Java SE API 时，这是一项糟糕的工作。你能得到的最好的是[`java.util.Calendar`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html).

* * *

*请注意，您当然可以减去毫秒并使用通常的算术运算符计算差异。*

```
long differenceInMillis = date2.getTime() - date1.getTime();
// ... 
```

*但是这种天真的方法没有考虑闰年，更不用说夏令时和[本地特定的 datetime 变化](https://stackoverflow.com/questions/6841333/why-is-subtracting-these-two-times-in-1927-giving-a-strange-result)。*

* * *

至于`java.util.Calendar`方法，您*基本上*需要`Calendar#add()`在计数器循环中使用来获取年、月和日的经过值。这需要适当考虑闰年、夏令时和当地特定的时间干扰。

首先创建这个辅助方法来消除一些样板代码：

```
public static int elapsed(Calendar before, Calendar after, int field) {
    Calendar clone = (Calendar) before.clone(); // Otherwise changes are been reflected.
    int elapsed = -1;
    while (!clone.after(after)) {
        clone.add(field, 1);
        elapsed++;
    }
    return elapsed;
} 
```

现在您可以按如下方式计算经过的时间：

```
Calendar start = Calendar.getInstance();
start.setTime(date1);
Calendar end = Calendar.getInstance();
end.setTime(date2);

Integer[] elapsed = new Integer[6];
Calendar clone = (Calendar) start.clone(); // Otherwise changes are been reflected.
elapsed[0] = elapsed(clone, end, Calendar.YEAR);
clone.add(Calendar.YEAR, elapsed[0]);
elapsed[1] = elapsed(clone, end, Calendar.MONTH);
clone.add(Calendar.MONTH, elapsed[1]);
elapsed[2] = elapsed(clone, end, Calendar.DATE);
clone.add(Calendar.DATE, elapsed[2]);
elapsed[3] = (int) (end.getTimeInMillis() - clone.getTimeInMillis()) / 3600000;
clone.add(Calendar.HOUR, elapsed[3]);
elapsed[4] = (int) (end.getTimeInMillis() - clone.getTimeInMillis()) / 60000;
clone.add(Calendar.MINUTE, elapsed[4]);
elapsed[5] = (int) (end.getTimeInMillis() - clone.getTimeInMillis()) / 1000;

System.out.format("%d years, %d months, %d days, %d hours, %d minutes, %d seconds", elapsed); 
```

很丑，是的。

如果您经常在 Java 中使用日期和时间，那么您可能会发现[Joda time](http://joda-time.sourceforge.net/)是 walhalla。这是一个具体的启动示例，说明如何使用纯 Joda Time 完成所有操作：

```
String string1 = "Oct 15, 2012 1:07:13 PM";
String string2 = "Oct 23, 2012 03:43:34 PM";

DateTimeFormatter dtf = DateTimeFormat.forPattern("MMM d, yyyy h:mm:ss a").withLocale(Locale.ENGLISH);

DateTime dateTime1 = dtf.parseDateTime(string1);
DateTime dateTime2 = dtf.parseDateTime(string2);
Period period = new Period(dateTime1, dateTime2);

PeriodFormatter formatter = new PeriodFormatterBuilder()
    .appendYears().appendSuffix(" years ")
    .appendMonths().appendSuffix(" months ")
    .appendWeeks().appendSuffix(" weeks ")
    .appendDays().appendSuffix(" days ")
    .appendHours().appendSuffix(" hours ")
    .appendMinutes().appendSuffix(" minutes ")
    .appendSeconds().appendSuffix(" seconds ")
    .printZeroNever()
    .toFormatter();

String elapsed = formatter.print(period);
System.out.println(elapsed); 
```

好多了，对吧？复数“s”虽然需要一些工作，但这不是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:32:28.277

您需要使用`SimpleDateFormat`来解析字符串并创建`Date`

然后你可以找到日期之间的差异。

这是[SimpleDateFormat的 javadoc](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-10-23T18:35:48.283

试试这个：

```
Calendar ca1 = Calendar.getInstance();
ca1.set(2012,05,25);
// Addition of date in java        
ca1.add(Calendar.DATE, 23); // Add 23 days in Dates in Calendar
ca1.add(Calendar.MONTH, 2); // Add 2 Month in Date in Calendar
ca1.add(Calendar.YEAR, 4); // add 4 Year in Date in Calendar

ca1.add(Calendar.DATE, -23); // sub 23 days in Dates in Calendar
ca1.add(Calendar.MONTH, -2); // sub 2 Month in Date in Calendar
ca1.add(Calendar.YEAR, -4); // sub 4 Year in Date in Calendar 
```

# ios - IOS编程——对Spring Batch服务器的异步json调用

> ID：13036911
> 
> 赞同：3
> 
> 时间：2012-10-23T18:31:41.577
> 
> 标签：ios, spring-mvc, spring-security

我正在开发一个 IOS 应用程序，它将对受 Spring Security 保护的 Spring-MVC 后端进行异步调用。我一直无法弄清楚这将如何工作。我有一个调用该服务的 Web 客户端（使用 jQuery Ajax），我想在 IOS（iPad）中实现相同的调用。

是否有任何框架可以处理身份验证，然后按照 Spring Security 的要求来回传递令牌？IOS 应用程序如何知道在超时后再次向用户请求用户名/密码？

-- 经过一番研究，IOS API 似乎已经具备身份验证功能（提供 Basic、Digest、Certificate 和 trust Authentication）。看起来可以抛出一个对话框来获取用户 ID/密码，然后将其保存在 NSURLCredential 对象中，并在必要时使用它。

我对此是否正确？有没有更简单的方法？有没有人有一个简单的示例来说明此身份验证如何与受 Spring 安全保护的服务器一起使用？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:18:22.060

我使用[AFNetwork](https://github.com/AFNetworking/AFNetworking)进行网络 API 调用。我遇到的唯一问题是当两个具有过期 JSessionIds 的连接命中服务器时发生的 CookieTheftException。

# sql-server - SQL Server 视图 - 索引使用

> ID：13036917
> 
> 赞同：2
> 
> 时间：2012-10-23T18:32:10.823
> 
> 标签：sql-server, sql-server-2008

> **可能重复：**
> [索引未应用于索引视图](https://stackoverflow.com/questions/8700126/index-is-not-getting-applied-on-indexed-view)

有没有办法让视图只使用我在它们上创建的索引，而不是基表上的索引？

# tfsbuild - TFS 构建使用相对路径

> ID：13036918
> 
> 赞同：3
> 
> 时间：2012-10-23T18:32:13.667
> 
> 标签：tfsbuild

在我目前正在使用的项目中，我们大量使用构建后事件和相对路径引用。即，我们将所有解决方案间引用实现为具有相对路径的 dll 引用，其中引用解决方案使用构建后事件将二进制文件拖放到其中。

这在视觉工作室 enviornmnet 中运行良好，现在我们正在寻找一种自动构建源代码并创建每日二进制文件的方法。TFS 构建似乎不能很好地与相对路径引用配合使用。

有什么快速的解决方案吗？我不敢相信这会如此复杂，因为我们只需要安排构建以获取最新的源代码，按照 Visual Studio 定义构建它，然后将二进制文件放到共享文件夹中。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:29:49.753

我见过不少项目在与 TFS 构建系统一起使用时使用构建后事件中断。此问题通常源于 Visual Studio 将 $(OutDir) 变量传递给 MSBuild 引擎的方式与 TFS Build 引擎的方式不同。本质上，当您在 Visual Studio 中编译时，$(OutDir) 路径（通常）设置为 bin\debu 或 bin\release，而在 TFS BUild System 中，它被设置为构建发生的构建机器上的 Binaries 目录。

如果这是破坏您的构建的原因，那么有几种方法可以解决此问题

**方法一**

1.  确保您的构建后事件不依赖于硬编码路径，如 ..\bin\release 等，而是在您使用 bin\debug 或 bin\release 的任何地方使用 $(OutDir)
2.  要获取正在构建的解决方案文件的路径，请使用 $(SolutionDir) 或 $(solutionPath)
3.  使用[此处](http://msdn.microsoft.com/en-us/library/c02as0cs%28loband%29.aspx)的列表对构建脚本中的路径变量进行必要的更改

**方法二**

1.  [在此处](http://lajak.wordpress.com/2011/05/07/customize-binaries-folder-in-tfs-team-build/)使用此链接自定义您的构建模板，以便它使用 Visual Studio 编译模式。您不必更改构建后的事件即可使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:13:55.380

尼基尔，谢谢。我最终选择使用巡航控制，因为它比 TFS 构建更容易和灵活。我的意思是这只是一个构建，对于像我们这样的小团队来说，我们并不真正关心那些工作流程和复杂的需求..

# c# - 从另一个线程访问会话数据

> ID：13036928
> 
> 赞同：15
> 
> 时间：2012-10-23T18:33:03.660
> 
> 标签：c#, asp.net, .net

我这里有个问题。在我的网络应用程序中，我有一个页面启动另一个线程来执行耗时的任务。在这个新线程中，我调用了我的一种架构方法**（在另一个项目中 - 一个架构项目）**。问题是：在其中一种方法中，我访问了**HttpContext.Current.Session**字段。但是当我启动应用程序时，会抛出一个异常，说这个对象（**HttpContext.Current.Session**）有一个空引用。我如何将新线程的上下文设置为与 HttpApplication 上下文相同以访问**HttpContext.Current.Session**？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T18:54:26.340

这里有很多事情需要考虑。

如果您的线程的生命周期与页面的生命周期相同，并且您需要大量随机访问[`HttpSessionState`](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.aspx)，那么您应该从使用静态[属性](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.current.aspx)[`SynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)创建后台线程的调用中获取。[`Current`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.current.aspx)

一旦你有了它，你可以将它传递给你的线程，然后当你需要访问与请求相关联的*任何东西*[`HttpContextBase`](http://msdn.microsoft.com/en-us/library/system.web.httpcontextbase.aspx)（这包括会话）时，你可以调用你传递给线程的[`Post`方法](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.post.aspx)来获取值`SynchronizationContext`（或设置它们）：

```
// From thread servicing request.
var sc = SynchronizationContext.Current;

// Run the task
Task t = Task.Run(() => {
    // Do other stuff.
    // ...

    // The value to get from the session.
    string sessionValue = null;

    // Need to get something from the session?
    sc.Post(() => {
        // Get the value.
        sessionValue = HttpContext.Current.Session["sessionValue"];
    }

    // Do other stuff.
    // ...
}); 
```

这样做很重要，因为访问`HttpContextBase`（以及与之相关的任何内容）*不是*线程安全的，并且与处理请求的线程（嗯，上下文）相关联。

请注意，该`Post`方法不会阻塞，因此调用之后的代码`Post`（即 之后的行`// Do other stuff.`）应该独立于传递给的委托`Post`。如果后面的代码是依赖的，需要等待调用完成再继续，那么可以调用[`Send`方法](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.send.aspx)；它具有相同的签名，并且会一直阻塞，直到委托中的代码被执行。

也就是说，如果您只想对值进行*只读*访问，那么最好在调用代码*之前*获取它们，然后在后台线程中访问它们：

```
// Get the values needed in the background thread here.
var values = {
    SessionValue = HttpContext.Current.Session["sessionValue"];
};

// Run the task
Task t = Task.Run(() => {
    // Do other stuff.
    // ...

    // Work with the session value.
    if (values.SessionValue == ...)

    // Do other stuff.
    // ...
}); 
```

如果你的线程在请求​​被处理后还要继续处理，那么你*只有*只读状态，你*必须*在启动线程之前捕获它。一旦请求得到服务，即使会话存在，它也是一个逻辑概念；根据会话状态的提供者（会话状态管理器、SQL Server 等），每次有新请求进来时，对象都可能会被水合。

您还必须处理会话超时问题，您甚至不知道会话是否*存在*于您想要访问它的点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-27T10:12:17.487

如果将当前上下文传递给子线程，问题在于它依赖于父上下文。如果父上下文死了，那么你的线程将无法再访问上下文并且它会导致问题。

一种解决方案是克隆父上下文，然后在线程中使用克隆。这样，如果父线程处置，该线程将继续工作并可以访问所有上下文好东西。

```
HttpContext ctx = ThreadingFixHttpContext();
Thread newThread = new System.Threading.Thread(new ThreadStart(() =>
{
    HttpContext.Current = ctx;
    Thread.CurrentPrincipal = ctx.User;
    var test = HttpContext.Current.Session["testKey"];
}));
newThread.Start(); 
```

这也应该适用于 Task.Run() 方式。完成这项工作的方法：

```
 private static Object CloneObject(Object Source)
    {
        MemoryStream Stream = new MemoryStream();
        System.Runtime.Serialization.Formatters.Binary.BinaryFormatter Formatter = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
        Formatter.Serialize(Stream, Source);
        Stream.Position = 0;
        object Clone = (object)Formatter.Deserialize(Stream);
        Stream.Close(); Stream.Dispose();
        return Clone;
    }

    public static System.Web.HttpContext ThreadingFixHttpContext()
    {
        //If this method is called from a new thread there is issues holding httpContext.current (which is injected from parent thread in AniReturnedPaymentsFetch.ascx.cs
        //The parent http current will die of its own accord (because it is from a different thread)
        //So we clone it into thread current principal. 
        System.Security.Principal.WindowsIdentity ThreadIdentity =
            (System.Security.Principal.WindowsIdentity)CloneObject(System.Web.HttpContext.Current.User.Identity);

        //Then create a new httpcontext using the parent's request & response, so now the http current belongs to this thread and will not die.
        var request = System.Web.HttpContext.Current.Request;
        var response = System.Web.HttpContext.Current.Response;
        var ctx = new System.Web.HttpContext(request, response);
        ctx.User = new System.Security.Principal.WindowsPrincipal(ThreadIdentity);
        return ctx;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-07T20:02:38.463

您无法从线程中访问会话，但您可以使用以下方式共享数据：`HttpRuntime.Cache`

不过有几件事要记住：与会话不同，缓存确实会过期。此外，缓存在所有 Web 用户之间共享。

# java - 我可以忽略杰克逊和斯普林的二传手吗？

> ID：13036931
> 
> 赞同：2
> 
> 时间：2012-10-23T18:33:12.280
> 
> 标签：java, json, spring, jackson

我有一种情况，我将一个对象从 Java 传递回 Javascript 客户端，并且它正在由 Spring 3 中内置的 Jackson 映射器序列化（使用 @RequestBody / @ResponseBody 和 application/json 内容类型）

我遇到的问题是一些类从具有getter 但没有setter 的接口实现。

我确实希望客户端可以使用 getter 值，所以我不能使用 @JsonIgnore 注释，因为它会完全忽略该属性，包括序列化和反序列化。序列化时我需要该属性。

还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:57:59.410

可能有一种更简单的方法，但我想提到使用[JSON 视图](http://wiki.fasterxml.com/JacksonJsonViews)作为一种可能的解决方案。[这个线程](https://stackoverflow.com/questions/7161638/how-do-i-use-a-custom-serializer-with-jackson/10835504#10835504)上有一个例子。

您可能需要对反序列化有不同的看法，而不仅仅是序列化，这将是 Jackson 2.0 的一个特性——[受 Spring 3.2 支持并向后移植到 Spring 3.1](https://stackoverflow.com/questions/10420040/jackson-2-0-with-spring-3-1)中。自 Jackson 1.4 以来，仅使用序列化视图是一项功能。

想到的另一个选择是使用[自定义反序列化器](https://stackoverflow.com/questions/6553051/setting-up-json-custom-deserializer)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-13T15:54:53.303

我一直在寻找同样的东西。

根据[Jackson 文档](https://github.com/FasterXML/jackson-annotations/wiki/Jackson-Annotations)，我们可以`@JsonIgnore`在属性、getter 或 setter 上设置注释，这将隐藏完整的属性，除非我们为 setter 提供`@JsonProperty`注释以确保在设置时该属性可见。不幸的是，反过来也行不通。我想在我的回复中显示该属性，但不将其包含在我的请求中。

例如，用例是自动生成的 id。我不希望用户设置，甚至看到它，但他可能会阅读它。

您可以通过确实隐藏属性本身然后添加一个`@JsonAnyGetter`方法来实现这一点。在这种方法中，您可以将数据按摩成您想要的任何形式。表示您只想显示单个名称或标识符或其他格式的复杂属性类也很有用。后者有更好的方法，但如果用例不太复杂，这就足够了。

举个例子（如果这太复杂了，我很抱歉）：

用户：

```
public class User {

    private String uid;
    private String customerId;
    private String taxSsnId;

    public String getUid() {
        return uid;
    }

    public void setUid(String uid) {
        this.uid = uid;
    }

    public String getCustomerId() {
        return extCustomerId;
    }

    public void setCustomerId(String extCustomerId) {
        this.extCustomerId = extCustomerId;
    }

    public String getTaxSsnId() {
        return taxSsnId;
    }

    public void setTaxSsnId(String taxSsnId) {
        this.taxSsnId = taxSsnId;
    }

    @JsonIgnore
    public void getId(){
        if (getUid() != null){
            return getUid();
        }
        if (getCustomerId() != null ){
            return getCustomerId();
        }
        return null;
    }
} 
```

环境：

```
public class Setting {

    @JsonIgnore
    private int id;

    private String key;
    private String value;

    @JsonIgnore
    private User lastUpdatedBy;

    @JsonIgnore
    private Date lastUpdatedAt;

        public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getKey() {
        return key;
    }

    public void setKey(String key) {
        this.key = key;
    }

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

    public User getLastUpdatedBy() {
        return lastUpdatedBy;
    }

    public void setLastUpdatedBy(User lastUpdatedBy) {
        this.lastUpdatedBy = lastUpdatedBy;
    }

    public Date getLastUpdatedAt() {
        return lastUpdatedAt;
    }

    public void setLastUpdatedAt(Date lastUpdatedAt) {
        this.lastUpdatedAt = lastUpdatedAt;
    }

    @JsonAnyGetter
    private Map<String, String> other() {
        Map<String, String> map = new LinkedHashMap<String, String>();
        map.put( "id", this.getId());
        map.put( "lastUpdatedBy", this.getLastUpdatedBy().getId());
        SimpleDateFormat format = new SimpleDateFormat("E, dd MMM yyyy HH:mm:ss z");
        map.put( "lastUpdatedAt", format.format(this.getLastUpdatedAt()) );
        return map;
    }

} 
```

产生此`Request`模式（反序列化视图）：

```
{
  "key": "string",
  "value": "string"
} 
```

和这个`Response`模式（序列化视图）：

```
{
  "key": "string",
  "value": "string",
  "id": "12345",
  "lastUpdatedBy": "String",
  "lastUpdatedAt": "String" 
} 
```

# emacs - 重新加载 AucTex 标签和定义键绑定

> ID：13036934
> 
> 赞同：3
> 
> 时间：2012-10-23T18:33:28.393
> 
> 标签：emacs, auctex

当我在 emacs 中将标签添加到 .tex 文件时，我曾经重新加载文件以使其显示在 RefTeX 中。ie Cc ) 不会有新标签，除非我重新加载文件。

经过一番搜索，我发现 Cu Cc ) 在尝试引用之前会刷新 RefTeX。这可以按我的意愿工作，但我想对这个命令使用 Cc r 而不是每次都输入 Cu Cc )。我该怎么做呢？

谢谢，吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:54:10.490

基于奥列格的回答：

如果这就是你所追求的，也许最好已经给它提供 Cu 论点：

```
(defun call-reftex-reference-directly ()
  (interactive)
  (let ((current-prefix-arg 4)) ;; emulate C-u
    (call-interactively 'reftex-reference) ;; invoke reftex-reference 
  )
)
(define-key reftex-mode-map (kbd "C-c r") 'call-reftex-reference-directly) 
```

也许试试这对你有用吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:41:27.937

我不使用 reftex 但据我所知，您只想定义一个绑定：

```
(define-key reftex-mode-map (kbd "C-c r") 'reftex-reference) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:06:35.547

您可以键入`r`标签选择缓冲区以刷新它而无需重新加载文件。刷新是即时的（除非您有非常大/非常多的链接文件）。

# algorithm - 算法问题 - 找到最不常见的子集

> ID：13036939
> 
> 赞同：7
> 
> 时间：2012-10-23T18:33:50.107
> 
> 标签：algorithm

a 是具有多个“类别”的对象，b，例如 a1 具有三个类别 b1、b2、b3。问题在于，将类别的数量（可能会变得相当大）减少到总是一起出现的组中。一个“最大公共子集”的东西。

例如，给定以下数据集：

```
a1{ b1,b2,b3 } 
a2{ b2,b3 }
a3{ b1,b4 } 
```

我们可以发现 b2 和 b3 总是在一起..

```
b23 = {b2,b3} 
```

..我们可以将类别集减少为：

```
a1{ b1, b23 }
a2{ b23 }
a3{ b1,b4 } 
```

所以，我的问题是找到一些算法来解决这个问题。

我已经开始研究[最长公共序列](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)问题，它可能是一个解决方案。即像这样反复对类别`b' = LCS(set_of_As)`进行分组，直到遍历所有类别。然而，这并不完整。我必须以某种方式限制输入域才能做到这一点。

我错过了一些明显的东西吗？您可以指出我的问题域的任何提示吗？有没有人认识到解决此类问题的任何其他方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T18:46:18.683

将您的集合转换为具有包含 a 的 b 集合：

```
b1 { a1, a3 }
b2 { a1, a2 }
b3 { a1, a2 }
b4 { a3 } 
```

确保新 b 集的内容已排序。

按内容对 b 集进行排序。

任何两个具有相同元素的相邻集合都是出现在同一个集合中的 b。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:46:22.647

如果您可以对类别进行排序，我认为您在 LCS 的正确轨道上（如果不能，则 LCS 算法无法识别 {b3, b4} 和 {b4, b3}）。如果您可以对它们进行强制排序和排序，那么我认为这样的事情可能会起作用：

```
 As = {a1={b1, b2},a2={b3},...}
while ((newgroup = LCS(As)) != empty) {
  for (a in As) {
     replace newgroup in a
  }
} 
```

# apache - 从 iis 到 apache2 的 codeigniter 项目迁移

> ID：13036941
> 
> 赞同：0
> 
> 时间：2012-10-23T18:34:00.573
> 
> 标签：apache, codeigniter, linux-mint

我已将我的项目从 Windows IIS 迁移到 Mint Apache2。不幸的是，我收到一个错误：

```
HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfil the request. 
```

我已将文件的权限更改为 755。通常，如果出现 CI 错误（连接到数据库等），则会引发错误。

我用 VI 打开了我的 index.php，我注意到每个文件的每一行末尾都有 ^M。不过，这并没有在 Aptana 中显示。 ![每行末尾都有奇怪的结尾](../Images/15182c32543fd9885fcd047fc6fd1aa5.png)

我花了半年时间写这个应用程序，我对此并不感到很兴奋。有没有人有这方面的经验？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:32:06.323

如果您可以访问服务器上的 shell 并且它正在运行 Linux/Unix，请尝试以下操作：

```
for i in `find . -type f` ; do dos2unix $i $i; done 
```

该`for i in `find . -type f` ;`部分查找当前目录中的所有文件。

然后，`do dos2unix $i $i; done`运行`dos2unix`会将您的所有`^M`' 转换为 Unix 标准，即`\r`.

如果要在单个文件上进行测试，请复制文件并替换`find .`为`find filename.ext`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:01:27.980

尝试将此添加到您的 php.ini。

```
display_errors = On 
```

这应该显示一个正确的错误，而不是仅仅抛出 500。从那里调试起来应该相对简单。

# mysql - 特定列更改 Mysql/Joomla 时是否有时间戳？

> ID：13036942
> 
> 赞同：0
> 
> 时间：2012-10-23T18:34:21.297
> 
> 标签：mysql, joomla

是否有类似的功能或查询来跟踪上次更改行的时间？id 没有时间戳列，我也不能添加一个，有特定的列，名称发布从 0 变为 1，反之亦然，我想检查它上次更改的时间。

在这里使用joomla，并试图弄清楚插件何时发布/取消发布，没有事件，只有我们拥有的事件是 onExtensionBefore 和 after save ，但没​​有跟踪发布状态的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:41:17.720

`columnname`添加在每次更新 时执行的触发器：

```
DELIMITER |
CREATE TRIGGER `TriggerName` 
    AFTER UPDATE ON `TriggerTable` 
    FOR EACH ROW 
    BEGIN 
        IF NEW.columnname <> OLD.columnname THEN
            SET `timestampcolumn`=NOW();
        END IF 
    END
    | 
```

之后，如果您进行更新`columnname`，它应该更新`timestampcolumn`到当前时间。

***注意：***在定义触发器时更改分隔符分隔符应该是不在定义内的东西。默认分隔符 is并且需要将其从默认值更改，因为after否则会破坏定义。`DELIMITER [`*`delimiter`*`]``CREATE TRIGGER``;``;``SET ´timestampcolumn´=NOW();``TRIGGER`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:09:15.690

对于 onSave 事件，您应该获得包括已发布/状态状态在内的整行数据。对于保存中可能涉及的每个字段，您不需要特殊触发器。我会制作一个内容插件，该插件有一个键控到有问题的表的表，如果状态改变，它会抓住保存时间。

# html - CSS3 专栏：如何使用 overflow-x 获得适当的 horz 填充？

> ID：13036945
> 
> 赞同：2
> 
> 时间：2012-10-23T18:34:45.177
> 
> 标签：html, css

因此，我正在使用 CSS3 列并尝试在一堆水平列中布置内容，如果内容足够长，它会创建一个水平滚动页面。但是，我**不**希望内容与视口的左/右边缘直接对接，但我**确实**希望滚动条接触左/右边缘。我想我可以用填充来做到这一点，最初它看起来工作得很好，直到我一直滚动到内容的末尾。

代码非常简单。HTML：

```
<section id="content">
  <p>Lorem ipsum...</p>
  <p>And a bunch more paragraphs to overflow the viewport...</p>
</section> 
```

和CSS：

```
#content {
    height: 400px;
    padding: 10px 50px;
    column-count: 2;
    column-gap: 50px;  
    -webkit-column-count: 2;
    -webkit-column-gap: 50px;
    overflow-x: scroll;
    overflow-y: hidden;
}
#content p {
    /* just to make it easier to see the boundaries */
    background-color: rgba(255,0,0,0.1);
} 
```

​ 我还在这里设置了一个小提琴：http: [//jsfiddle.net/uu9Tv/](http://jsfiddle.net/uu9Tv/)。

我已经尝试了很多东西，但似乎没有任何效果...... #content 上的边距导致滚动条无法到达视口的两侧。

我还尝试了另一种方法，基本上让包装器 div 处理溢出/滚动并将水平边距放在#content 元素上，但它似乎根本没有帮助。见这里：http: [//jsfiddle.net/vQLCz/](http://jsfiddle.net/vQLCz/)。

任何人都能够阐明如何在水平滚动布局中的列内容的最右侧获得一些空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:04:59.833

您的方法很有意义，但填充`section#content`不适用于溢出的内容。有列会使这更难看，所以首先看看我`section#no-columns`在[http://jsfiddle.net/ansonhoyt/wGKFa/](http://jsfiddle.net/ansonhoyt/wGKFa/)中的示例。该部分包含一个带有 的段落`nowrap`。请注意填充如何约束背景颜色，而不是溢出的文本。

当您将列添加到组合中时，填充仍然不适用于溢出的段落。一个不错的选择是在`<p>`. 此解决方案是有限的。由于边距提供了正确的“填充”和“间隙”，因此它们都必须为 50px。

啊，CSS的极限。CSS3 列很好，但有限....我们希望 CSS4 会添加一些更优雅的添加，例如`p:last-column { margin-right: 50px; }`.

# git - 10 条 GIT 行从我的电脑中删除了 8Gb - 如何找回它们？

> ID：13036947
> 
> 赞同：4
> 
> 时间：2012-10-23T18:34:48.603
> 
> 标签：git, recovery

我是 GIT 的初学者，不知道这个程序有多强大……我从几个命令中删除了 8 Gb。
我记得我输入了以下几行：

```
$git config --global user.name "my name"
$git config --global user.email "my email"
$git add *.c
$git commit -m
$git status 
```

然后我看到了很多跟踪和未跟踪的文件，我试图删除它们（从 gi​​t 中）。我不知道我会从我的电脑中删除它们。所以我做了以下事情：

```
$git rm
$git rm --cached *.c 
```

这样我删除了所有跟踪的文件。所以我继续说：

```
$git clean -f
$git clean -f -d
$git clean -f -x
$git clean -d -x -n 
```

这样我删除了一些未跟踪的文件，系统未使用的文件（我正在使用 Windows）。现在这就是我所拥有的：

```
$git status
On branch master
Initial commit
Untracked files:
 (use "git add <file>..." to include in what will be commited)
 .gitconfig
 AppData/
 Desktop/
 Favourites/
 NTUSER.DAT
 NTUSER.DAT{some characters and numbers}
 ntuser.dat.LOG1
 ntuser.dat.LOG

$git checkout
fatal: You are on a branch yet to be born 
```

也许我使用了更多命令，但我不记得了！我只想恢复我的旧文件，我将停止使用这个可爱的 Git 软件。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-10-23T18:47:51.587

好家伙。我看到你做了什么，它并不漂亮。让我们阅读“git clean”的文档：

> git-clean - 从工作树中删除未跟踪的文件

这意味着`git-clean` **删除****无法恢复的**文件。 Git 有一些安全措施，这样你就不会意外运行`git clean`——除非你指定，否则它不会删除目录`-d`，除非你通过，否则它不会删除被忽略的文件，除非你指定，否则它`-x`不会做任何事情`-f`。

看起来您将主目录变成了 Git 存储库，提交了`*.c`文件，然后删除了其他所有内容。

它基本上就像运行`rm -rf *`，或者`del /s *.*`在 Windows 中。 **不要那样做。**

## 解决方案

从备份中恢复。

如果您没有备份，那么这是我们*为什么*要备份的一个痛苦的对象教训，您将不得不尝试恢复已删除的文件 - 您必须关闭计算机并且在此之前不要启动到 Windows完全的。

## 关于“未跟踪文件”的注意事项

“未跟踪文件”是不属于您的 Git 存储库的文件。我可以看到，如果您认为未跟踪的文件是您的 Git 存储库的一部分，您将如何尝试越来越危险的事情，直到它们被删除。未跟踪的文件从一开始就不是您的 Git 存储库的一部分，因此您无需执行任何操作即可将它们从您的 Git 存储库中删除。

## 注意事项`-f`

`-f`/选项的`--force`意思是“这个命令会删除数据，我知道我在做什么”。在任何命令提示符下键入之前`-f`，您应该考虑一下该命令将删除哪些数据，并确保您确实要删除它。

例如，`git rm`作为`-f`参数。该`git rm`命令将拒绝删除具有未提交更改的文件，因为这会破坏更改。使用`-f`会覆盖此行为，允许您使用`git rm`.

# jquery - 在 jquery.html() 中使用 application/x-silverlight

> ID：13036949
> 
> 赞同：1
> 
> 时间：2012-10-23T18:34:58.407
> 
> 标签：jquery, asp.net, silverlight

我正在尝试使用 jquery.html() 来更改 div 的内容。它可以识别

```
<SPSWC:ProfilePropertyLoader id="m_objLoader" LoadFullProfileOfCurrentUser="true" runat="server"/> 
```

但它无法识别

```
<SPSWC:ProfileBrowser webpart="true" runat="server" __WebPartId="{DCD5C686-342C-46C6-AD85-B2C2D27A6EAF}"> 
```

我已经注册了以下内容：

```
<%@ Register Tagprefix="SharePoint" Namespace="Microsoft.SharePoint.WebControls" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
<%@ Register Tagprefix="WebPartPages" Namespace="Microsoft.SharePoint.WebPartPages" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Register Tagprefix="SPSWC" Namespace="Microsoft.SharePoint.Portal.WebControls" Assembly="Microsoft.SharePoint.Portal, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
```

但是组织浏览器不会被识别，而在其他页面中它很好。

然后我用

```
<object type="application/x-silverlight" data="data:application/x-silverlight," id="ProfileBrowserSilverlightControl" width="100%" height="100%">
<param name="top" value="30">
<param name="enableHtmlAccess" value="true">
<param name="source" value="/_layouts/ClientBin/hierarchychart.xap">
<param name="initParams" value="username",User,ctl00_m_g_9d50a31d_3b6b_47c5_809c_cf68c257eb9b_ctl00">
<param name="windowless" value="true">
<param name="onLoad" value="__slEvent0"> 
```

出现了一些东西，但在 Fiddler 中，没有查询请求

> SilverlightProfileService.json/GetUserSLProfileData

这通常效果很好。

有人有线索吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:08:50.033

最后我使用第一个，因为我无法以 HTML 对象的方式显示任何内容。如果有人对问题所在有一些想法，非常欢迎您告诉我。

为了避免使用 jquery.html()，我直接在页面中集成了 Web 部件。这是因为当 jquery.html() 将页面集成到原始页面时，它不会集成***ProfilePropertyLoader***，因为在 Web 部件中没有 ProfileProperty。

# javascript - 选择表格行以产生点击事件包括 Firefox 中的子项

> ID：13036951
> 
> 赞同：0
> 
> 时间：2012-10-23T18:35:03.050
> 
> 标签：javascript, jquery, firefox

我有一个表格行，其中包含一个链接。我将整行设置为一个链接，在 Chrome 中，该行转到我设置的链接，子链接将用户带到正确的链接。在 Firefox 中，行和子都转到行上设置的链接。我怎样才能让它在 Firefox 和 Chrome 中保持一致。我正在使用以下 jquery 将行设置为转到链接

```
$('.table tbody tr, !a').click(function () {
    $.pjax({
        url: $(this).find('td a.row-click').attr('href'),
        container: '#update_panel'
    });
}); 
```

该行的html看起来像这样

```
<tr>
    <td>
        Main Tire Set
    </td>
    <td>
        <a class="js-pjax" href="/Events/TireSets?tireGroupID=d09fb958-d008-e211-aa97-d067e53b2ed6">Sets</a>
    </td>
    <td>
        <a class="js-pjax" href="/Events/TireBuilder?tireSetGroupID=d09fb958-d008-e211-aa97-d067e53b2ed6">Tire List</a>
    </td>
    <td>
        <a href="/Events/DeleteTireGroup?tireGroupID=d09fb958-d008-e211-aa97-d067e53b2ed6"><ins class="icon-remove"></ins></a>
    </td>
    <td style="display: none;">
        <a class="row-click" href="/Events/TireInfoListView?tireSetGroupID=d09fb958-d008-e211-aa97-d067e53b2ed6">Details</a>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:11:42.780

如果它是一行，我最终不得不检查点击功能。IE

```
$('.table tbody tr').click(function (event) {
    if (event.target.localName == 'td') {
        $.pjax({
            url: $(this).find('td a.row-click').attr('href'),
            container: '#update_panel'
        });
    }
}); 
```

# java - 为什么 Struts 中的 ActionSupport 是一个类而不是一个接口？

> ID：13036958
> 
> 赞同：1
> 
> 时间：2012-10-23T18:35:12.607
> 
> 标签：java, struts2, struts

与具体类相比，接口为 Java 开发人员提供了更大的灵活性。我是 Struts 框架的新手，我对 Struts 开发人员决定创建`ActionSupport`一个类感到困惑。在我看来，它应该是一个接口。他们为什么这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:39:20.200

[你应该在这里](http://struts.apache.org/2.0.9/struts2-core/apidocs/com/opensymphony/xwork2/ActionSupport.html)阅读文档

> 为最常见的操作提供默认实现。有关更多详细信息，请参阅此类实现的所有接口的文档。

它实际上是**接口** `Action`的默认实现。因为它是一个实现，所以它不能是一个接口，因为接口是 100% 抽象的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:41:03.837

来自 struts 文档：

> 类 ActionSupport 为最常见的操作提供默认实现。有关更多详细信息，请参阅此类实现的所有接口的文档。

[http://struts.apache.org/2.1.2/struts2-core/apidocs/com/opensymphony/xwork2/ActionSupport.html](http://struts.apache.org/2.1.2/struts2-core/apidocs/com/opensymphony/xwork2/ActionSupport.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:44:09.677

这完全是一个架构决定。`ActionSupport`因此，在用户自己的操作中为用户提供了非常有用的资源，而无需在 API 中的其他地方公开它。用户打算`ActionSupport`为自己的行为扩展以利用其资源。`Action`接口服从用户实现方法，`execute`我们知道没有必要。

动作是简单的 POJO，它们不需要扩展或实现某些东西。

# visual-studio - 转换 trdx 文件 (Telerik Reporting) 以在 Visual Studio 中使用

> ID：13036959
> 
> 赞同：0
> 
> 时间：2012-10-23T18:35:14.490
> 
> 标签：visual-studio, telerik, visual-studio-2012, telerik-reporting

我们最近开始使用 Telerik Reporting。一些用户使用 Telerik Report Designer，而我使用 Visual Studio 2012。有没有办法将他们的 trdx 报告导入到我的 Visual Studio 类库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T19:41:01.357

这目前不受支持，老实说，如果 Telerik 要这样做（从 xml 文件创建 .net 类），这将是不自然且乏味的任务。我相信他们以一种方式（VS -> xml）做到了，因为在大多数情况下，开发人员会创建一个普通用户可以修改的基本/模板报告。

# c++ - 带指针的奇怪运算符

> ID：13036966
> 
> 赞同：1
> 
> 时间：2012-10-23T18:35:48.563
> 
> 标签：c++, pointers, operators

我正在阅读一些代码并遇到了这个问题。我现在没有完整的上下文保存这一行。

```
cout<<(*--*++ptr+1)<< endl; 
```

当我们在其中输入值时，它编译得很好并且可以工作..

它的声明是这样的。

```
char ***ptr ; 
```

这个运算符是什么，它是否包含在标准中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T18:37:33.603

它不是单个运算符，它是几个一元运算符的组合。它被解析如下：

```
*(--(*(++ptr))) + 1 
```

因此，`ptr1`首先递增，然后取消引用，然后该值递减并再次取消引用。

# javascript - requestAnimFrame 无法提供恒定的帧速率，但我的物理引擎需要它

> ID：13036976
> 
> 赞同：5
> 
> 时间：2012-10-23T18:36:29.860
> 
> 标签：javascript, box2d, webgl, requestanimationframe

我将 Box2D 与 WebGL 一起使用。Box2D 需要恒定的帧速率（“世界”更新的时间步长）。

```
function update(time) {//update of box2d world
     world.Step(
           1/60   // 1 / frame-rate
        ,  3      //velocity iterations
        ,  8       //position iterations
     ); 
```

但我已经读过定义如下的 requestAnimFrame 是正确的方法。

```
 requestAnimFrame = (function() {
     return window.requestAnimationFrame ||
     window.webkitRequestAnimationFrame ||
     window.mozRequestAnimationFrame ||
     window.oRequestAnimationFrame ||
     window.msRequestAnimationFrame ||
     function(/* function FrameRequestCallback */ callback, /* DOMElement Element */ element) {
       window.setTimeout(callback, 1000/60);
     };
})(); 
```

requestAnimFrame 没有给我一个恒定的帧速率，所以我的 Box2D 的变量是不同步的。

有解决办法吗？

**[编辑]**

实施时约翰（Cutch）的解决方案如下所示：

```
function interpolate(dt) {
    var t = dt/time_step;
    body_coordinates = (1-t) * body_coordinates + t * next_body_coordinates;
}

var physicsDt = 0;
function tick() {
    var time_now = new Date().getTime();
    var dt = time_now - last_time; //Note that last_time is initialized priorly
    last_time = time_now;
    physicsDt += dt;
    clear_the_screen();
    requestAnimFrame(tick);
    drawEverything();
    if(physicsDt >= time_step) {
        update();
        physicsDt -= time_step;
    }
    interpolate(dt);
} 
```

请注意，我的物理更新函数负责`next_attribue`设置 s。而且，`update`在此之前调用了一个物理，以使物理世界领先一帧。

**结果**

动画相当流畅，除了那些我可以看到一些非常糟糕的跳跃和*随机*出现的微动的时候。

我认为解决方案中没有解决以下问题：

**----> 1)** `dt`可能会变得大于`time_step`：这将`dt/time_step`大于 1，这会破坏插值方程。

当`dt`仍然大于`time_step`一致时，问题会增加。是否有可能克服时间间隔变大的问题`time_step`？

我的意思是，即使我们将世界保持在渲染之前一帧，如果时间间隔始终大于`time_step`，那么“提前”帧也不会花费很长时间。

**----> 2)** 想象`dt`不到`time_step`1 毫秒。然后，世界不会更新那一次。现在插值完成并找到了近似位置（比它应该在的位置晚 1 毫秒）。

可以说下一次`dt`和之间没有区别`time_step`。

现在，考虑到这一点，没有进行插值`dt`并且`time_step`是相等的。那么，下一个绘制的是世界上的“前方”框架，对吗？（使用这些方程，用`t = 1`）

但准确地说，渲染的世界应该是它之前的 1 毫秒。我的意思是，它落后于世界框架的 1ms 不应该消失。但是用`t = 1`, 绘制物理世界框架并忘记了 1ms。

我对代码或以上两点有误吗？

我请求你澄清这些问题。

**[编辑]**

我在[那里的评论中询问了](http://games.greggman.com/game/webgl-how-it-works/)[这个](http://games.greggman.com/game/webgl-how-it-works/)网页的作者，寻找一种有效地绘制许多形状的方法。

我学会了这样做：我 `bufferData`通过为每个形状保存单独的缓冲区来保存调用，并且`createBuffer`在初始化期间只调用一次`bindBuffer`。`bufferData`

每次刷新屏幕时，我都必须遍历所有形状，并且必须在绑定所需形状的缓冲区（使用）之后调用`enableVertexAttribArray`和。`vertexAttribPointer``bindBuffer`

我的形状不会随着时间而改变。它们中只有很多种（如多边形、圆形、三角形）从头到尾都保持不变。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T19:07:28.793

您必须将物理模拟步进时序与渲染垂直同步时序分离。最简单的解决方案是这样做：

```
frameCallback(dt) {
  physicsDt += dt;
  if (physicsDt > 16) {
    stepPhysics();
    physicsDt -= 16;
  }
  renderWorld();
  requestAnimFrame(frameCallback);
} 
```

这里最大的问题是，有时您将使用过时的物理世界进行渲染，例如，如果physicsDt 为15，则不会发生模拟更新，但到那时您的对象几乎已经移动了整个帧。您可以通过将物理帧保持在渲染之前 1 帧并在渲染器中线性插值对象位置来解决此问题。就像是：

```
var t = dt/16.0;
framePosition = (1-t) * previousFramePositions + (t) * nextFramePositions; 
```

这样，即使您的渲染与物理模拟不同步，您的对象也会平稳移动。如果您有任何问题，请告诉我。

约翰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:48:12.087

`requestAnimFrame`并不是要保证恒定的帧速率——它的设计目的是让浏览器只计算它实际绘制的帧。

如果您想/必须计算未绘制的帧，那么这不是要走的路。

# android - 每次打开应用程序时出现 GCM 消息后的 AlertDialog

> ID：13036981
> 
> 赞同：1
> 
> 时间：2012-10-23T18:37:01.043
> 
> 标签：android, google-cloud-messaging

我正在接收来自 GCM 的消息。

这就是我在 GCMBaseIntentService 中处理接收消息的方式：

```
@Override
protected void onMessage(Context context, Intent intent) {
    String msg = intent.getExtras().getString("message");
    generateNotification(context, msg);
}

private static void generateNotification(Context context, String message) {
    long when = System.currentTimeMillis();
    NotificationManager notificationManager = (NotificationManager)
            context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.ic_launcher, message, when);
    String title = context.getString(R.string.app_name);
    Intent notificationIntent = new Intent(context, MyClass.class);
    notificationIntent.putExtra("message", message);
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
            Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent intent =
            PendingIntent.getActivity(context, 0, notificationIntent, 0);
    notification.setLatestEventInfo(context, title, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notification.defaults|= Notification.DEFAULT_LIGHTS;
    notification.defaults|= Notification.DEFAULT_VIBRATE;
    notification.flags |= Notification.FLAG_SHOW_LIGHTS;
    notificationManager.notify(0, notification);
} 
```

在`MyClass`我有这个`onResume`：

```
String msg = this.getIntent().getStringExtra("message");
if(msg != null){
    new AlertDialog.Builder(this)
    .setTitle("New Notification")
    .setMessage(msg)
    .setNeutralButton("OK", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.cancel();
            }
    }).create().show();
} 
```

GCM 消息出现在状态栏中。单击通知后，`MyClass`将打开并显示`AlertDialog`上述内容。

我`MyClass`通过转到新活动、单击返回或单击主页来导航。当我返回该活动时，每次返回时都会出现“AlertDialog”。

我该如何防止这种情况？我认为`AlertDialog`单击状态栏中的通知后只会立即出现一次。

更新：

所以我认为正在发生的是，当我`generateNotification`从 GCM 消息创建通知 () 时，它会以这个新意图打开活动。现在，每次打开此活动时，都会重复使用相同的意图，以便再次读取额外内容，然后显示警报。我仍然不知道如何阻止这种情况。

我想我将尝试将`SharedPreference`带有意图的时间戳的 a 存储为额外的。然后我只会`msg == null`在时间戳是新的时显示警报。

我喜欢 devunwired 的回答，但如果有人好奇，将时间戳存储在共享首选项中也可以。

这就是我实现它的方式：（在`MyClass`我有这个`onResume`）

```
String msg = this.getIntent().getStringExtra("message");
if(msg != null){
    long newTime = intent.getLongExtra("intentTime", 0);
    long oldTime = preferences.getLong("intentTime", 0);

    if(newTime > oldTime){
        new AlertDialog.Builder(this)
        .setTitle("New Notification")
        .setMessage(msg)
        .setNeutralButton("OK", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.cancel();
            }
        }).create().show();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:55:59.480

您是正确的，`Intent`仍然附加到，`Activity`因此每个条目`onResume()`都将执行该代码。它没有被重复使用，必然，只是`Intent`您收到的始终是启动实例的那个，如果您导航到新屏幕并返回，或者点击 HOME 键，因为当前实例仍然存在，它不会改变（它只是暂时停止）。

奇怪的是你说它也发生在 BACK 上。在 BACK 按钮的情况下，它应该销毁`Activity`实例，以便新的启动将`Intent`与它有不同的关联。除非您下次启动它是从同一个通知或最近菜单（也将与前一个启动它`Intent`）。

您可以尝试将此逻辑移动到`onCreate()`中，它只会在新实例开始发挥作用时被调用。另一种选择是在您使用新空白处理传入通知后调用`setIntent()`，以便后续条目不会启动该代码。`Activity``Intent`

# ruby - Ruby：猴子修补字符串类

> ID：13036986
> 
> 赞同：3
> 
> 时间：2012-10-23T18:37:41.320
> 
> 标签：ruby, metaprogramming, monkeypatching

我有点困惑为什么以下代码实际上有效：

```
String.instance_eval do # self is set to String
  [:readlink, :symlink?, :expand_path].each do |method| # self is still String
    define_method(method) do # self is still String
      File.send(method, self) # what exactly is this self?
    end
  end
end
"asdf".expand_path # => "C:/users/some_user/asdf" 
```

我不明白为什么最后一行会这样工作。定义每个方法时，方法的主体不等于`File.send(method, String)`？上述块实际上都没有改变`self`。唯一更改的行`self`是`String.instance_eval`并且它更改`self`为`String`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T18:40:22.633

```
File.send(method, self) 
```

这`self`将在调用动态生成的方法时进行评估。此时它将被设置为 String 的一个实例。（在您的示例中为“asdf”）。

它实际上相当于打开`String`类并手动编写所有这些方法。

```
class String
  def readlink
    File.send :readlink, self
  end

  def expand_path
    File.send :expand_path, self
  end
end 
```

# mysql - mysql查询最近的记录

> ID：13036989
> 
> 赞同：0
> 
> 时间：2012-10-23T18:37:59.103
> 
> 标签：mysql

我想在 mysql 中创建一个表，该表有 3 列 user_id、活动 - 在线或离线 - 和时间戳，现在我希望该表显示所有 user_id 以及最近的状态。目前使用

```
 SELECT DISTINCT user_id,activity FROM activity ORDER BY timestamp DESC 
```

声明显示用户上次在线和离线的时间，这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:42:50.493

尝试这个：

```
 select act.*
 from activity as act
      inner join (
          select user_id, max(timestamp) as max_ts
          from activity
          group by user_id) as a on act.user_id=a.user_Id and act.timestamp=a.max_ts 
```

这将返回每个用户的最新记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:40:03.050

```
select user_id, max(timestamp) ts from activity a
inner join
   (select user_id, activity, max(timestamp) ts
   group by user_id, activity) iam
on iam.user_id =a.user_id and a.ts = iam.ts 
```

# php - php中的SQL注入保护机制

> ID：13036992
> 
> 赞同：0
> 
> 时间：2012-10-23T18:38:02.447
> 
> 标签：php, sql-injection

因此，通常您会从表单中收集数据并将其插入数据库。

我知道这`mysql_real_escape_string()`是用来消除威胁的，但我想提供一种机制，它接受 $_POST 并对其进行处理，使其对数据库使用安全。

实现这一目标的理想而优雅的方式是什么？简单地浏览后数组是否足以使数组安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:46:43.710

有时你知道某些东西必须是字符串，有时你知道它必须是整数。有时您知道它必须是电子邮件地址，有时您知道它必须是 4 个字符长的字符串。

mysql 扩展当然已被弃用，并且已经有一段时间了。PHP 文档说：

> 不建议将此扩展用于编写新代码。相反，应该使用 mysqli 或 PDO_MySQL 扩展。在选择 MySQL API 时，另请参阅 MySQL API 概述以获得更多帮助。

PDO 是在 PHP 中使用 MYSQL 的“正确”方式。如果由于某种原因不行，请使用 mysqli。但是，只需使用 PDO。

从文档：

```
<?php
/* Execute a prepared statement by binding PHP variables */
$calories = 150;
$colour = 'red';
$sth = $dbh->prepare('SELECT name, colour, calories
    FROM fruit
    WHERE calories < :calories AND colour = :colour');
$sth->bindValue(':calories', $calories, PDO::PARAM_INT);
$sth->bindValue(':colour', $colour, PDO::PARAM_STR);
$sth->execute();
?> 
```

请注意，卡路里是一个整数，颜色是一个字符串。这是处理事情的更好方法。

这结合起来`filter_var`可以确保事情是安全的。

[http://www.php.net/manual/en/filter.filters.sanitize.php](http://www.php.net/manual/en/filter.filters.sanitize.php)和[http://www.php.net/manual/en/filter.filters.validate.php](http://www.php.net/manual/en/filter.filters.validate.php)描述了可用的不同过滤器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T18:39:36.187

使用 mysqli_real_escape_string 和 array_map

```
$_POST = array_map('mysqli_real_escape_string', $_POST); 
```

如果你想对所有查询字符串变量做同样的事情：

```
$_GET = array_map('mysqli_real_escape_string', $_GET); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T18:41:51.863

我使用这两个功能：

```
function getMySQLString($string) {
    global $link;

    /* Si esta activaldo el magic quotes, saco los caracteres de escape */
    if (get_magic_quotes_gpc()) {
        $string = stripslashes($string);
    }

    /* Armo el string. */
    return mysqli_real_escape_string($link, $string);
}

function toSecureArray($array) {
    $result = Array();

    /* Recorro todas las llaves del campo */
    $keys = array_keys($array);
    foreach ($keys as $key_id => $value) {
        if (!is_array($array[$value]))
            $result[$value] = getMySQLString($array[$value]);
    }

    return $result;
} 
```

“toSecureArray”不是递归的，你可以让它变得更好。:)

# firebase - 使用 Firebase 时钟为更改添加时间戳

> ID：13036994
> 
> 赞同：9
> 
> 时间：2012-10-23T18:38:03.490
> 
> 标签：firebase

我们在 Firebase 中有一个由多个客户端更新的数据集。我们想要跟踪数据集日期时间的最后修改。我们不能依赖客户端设置修改的日期时间，因为他们的本地时钟可能完全不同步。

有没有办法可以根据数据集的时钟将 Firebase 标记时间戳记到数据集中以跟踪上次修改的时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T19:21:25.307

我们目前正在开发一些功能来支持这一点，但我们现在没有办法做到这一点。但是请注意，“push()”创建的 ID 是按时间顺序排列的，我们在创建它们时会尽可能补偿客户端时钟偏差，所以如果您要做的只是确保一些按顺序写入列表，您可以使用 push() 来完成。

我很想听听您希望此功能的外观。如果您有时间，我将不胜感激发电子邮件给 firebase 的 Andrew...

**更新：** Firebase 现在支持设置服务器时间戳以及直接在客户端访问服务器时间。请参阅此处的文档： [https ://www.firebase.com/docs/managing-presence.html](https://www.firebase.com/docs/managing-presence.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T00:09:43.310

我们在同一条船上......我想迟早会有许多 Firebase 客户端遇到这个问题，因为这是我们在旧的“客户端-服务器”时代从未遇到过的“新类型”问题。

当前的解决方案（*仍在制定中*）是在初始化时估计客户端和我们的服务器之间的时间差，并进行补偿，
所以 - 我们有**x = new Date()**的地方，
现在是**x = ourDateService.now()**

我们的 now() 函数只是做**new Date() + diff**

这对我们有用，因为我们不需要毫秒精度，而且它是一个加载一次的单页应用程序，所以我们可以进行差异检查并在加载时初始化我们的DateService，但这个解决方案并不适用于所有人（*当然，您可以将其存储在 localstorage/cookie 中并每天左右重新验证*）。

# java - 用于从 LaTeX 源创建 PDF 的 Java 库

> ID：13036995
> 
> 赞同：5
> 
> 时间：2012-10-23T18:38:09.557
> 
> 标签：java, pdf, latex, tex

我有 Java 程序，它接收一些数据并生成 LaTeX 文档。

我需要 Java 库从生成的 LaTeX 源创建 PDF 文件。

请给我推荐点东西好吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T21:25:00.977

我同意 kurtzbot 的观点，LaTeX 编译器是复杂的软件，无法用 Java 或任何其他语言合理地重写。如果是这样，那将是一项巨大的努力。据我所知，甚至没有实现编译器的 C 库，我们必须使用命令行程序。

这并不是说没有管理构建过程的库，可能通过系统调用和监视临时文件（来自 LaTeX 构建）。例如，我知道有[latexmk](http://www.phys.psu.edu/~collins/software/latexmk-jcc/)可以执行这样的任务。如果有人制作了类似的 Java 实现，我会将 LaTeX 编译器和该管理器捆绑到您的程序中。

# java - 如何使用 Java 活动编写多按钮导航

> ID：13036996
> 
> 赞同：0
> 
> 时间：2012-10-23T17:19:42.543
> 
> 标签：java, android

问题 1：我有两个活动。我想知道如何优化它。我可以创建两个具有多个侦听器的活动。或者为每个按钮创建多个 Java 文件（onclick 监听器）

问题 2：我尝试在一个 Java 中创建多个侦听器，但只能让一个按钮工作。一个 Java 文件中的多个侦听器的语法是什么？这是我的*更新代码：现在的问题是无论单击什么按钮都会导致相同的页面。

```
package install.fineline;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Button;
import android.view.View;
import android.view.View.OnClickListener;

public class Activity1 extends Activity2 {

    Button Button1;
    Button Button2;
    Button Button3;
    Button Button4;
    Button Button5;
    Button Button6;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fineline);
        addListenerOnButton();
    }

    public void addListenerOnButton() {

        final Context context = this;
        Button1 = (Button) findViewById(R.id.autobody);
        Button1.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {

                Intent intent = new Intent(context, Activity1.class);
                startActivity(intent);
            }
        });

        Button2 = (Button) findViewById(R.id.glass);

        Button2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent intent = new Intent(context, Activity1.class);
                startActivity(intent);
            }
        });

        Button3 = (Button) findViewById(R.id.wheels);

        Button3.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent intent = new Intent(context, Activity1.class);
                startActivity(intent);
            }
        });

        Button4 = (Button) findViewById(R.id.speedy);

        Button4.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent intent = new Intent(context, Activity1.class);
                startActivity(intent);
            }
        });

        Button5 = (Button) findViewById(R.id.sevan);

        Button5.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent intent = new Intent(context, Activity1.class);
                startActivity(intent);
            }
        });

        Button6 = (Button) findViewById(R.id.towing);

        Button6.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent intent = new Intent(context, Activity1.class);
                startActivity(intent);
            }
        });
    }
} 
```

### 活动2.java

```
package install.fineline;

import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;

public class Activity2 extends Activity {

    Button Button1;

    public void onCreate1(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.autobody);
    }
    Button Button2;

    public void onCreate2(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.glass);
    }
    Button Button3;

    public void onCreate3(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.wheels);
    }
    Button button4;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.speedy);
    }
    Button Button5;

    public void onCreate5(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sevan);
    }

    Button Button6;

    public void onCreate6(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.towing);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:24:29.787

从您发布的代码中，您的所有按钮都指向同一页面，因为您在每个侦听器中都有相同的代码：

```
Intent intent = new Intent(context, Activity1.class);
    startActivity(intent); 
```

`Activity1.class`您希望开始的活动的类对象在哪里。如果您想`Activity2`从该按钮开始，您需要将`Activity2.class`第二个参数作为 Intent 的第二个参数。

在您的 Activity2 示例中，请注意只有 onCreate() 会被调用，因为该方法会覆盖 Activity 基类中的 onCreate() 方法。除非您明确调用它们，否则永远不会调用 onCreate1、onCreate2 等，因为它们不会覆盖基类中的任何内容。

根据您最初的问题，可以像在 Activity1 中那样创建 OnClickListeners 内联，或者您可以将它们创建为类变量以便更好地组织，并将内联代码的数量保持在最低限度。例如：

```
OnClickListener button1Listener = new OnClickListener() {

    @覆盖
    公共无效 onClick（查看 arg0）{

        Intent 意图 = new Intent(context, Activity1.class);
        开始活动（意图）；   

    }

});

```

然后您可以将点击侦听器设置为：

```
Button1.setOnClickListener(button1Listener);

```

我会考虑为每个 OnClickListener 创建一个新的 .java 文件。