# StackOverflow 问答 15491000-15491999

# objective-c - 如何使 UIView 可点击

> ID：15491003
> 
> 赞同：12
> 
> 时间：2013-03-19T03:29:38.147
> 
> 标签：objective-c, uiview, ios6, uiimageview, uilabel

我有一个包含 UILabel 和 UIImageView 的自定义 UIView。如何使我的 UIView 可点击？我希望 UIView 的背景在用户开始按下 UIView 时随时更改。当用户抬起按钮时，颜色应该会变回来。我还需要能够处理点击事件。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-19T03:35:34.890

```
-(void)addGestureRecogniser:(UIView *)touchView{

    UITapGestureRecognizer *singleTap=[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(changecolor)];
    [touchView addGestureRecognizer:singleTap];
    DBLog(@"ADD GESTURE RECOGNIZER");
}
-(void)changecolor{

  // do something

} 
```

1`）这是代码片段，您需要将视图作为参数传递以使其可点击。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-08-01T04:40:17.387

**另一种方法是通过故事板/界面生成器连接手势识别器。**

这很容易，而且我觉得比使用代码更干净。

这是设置手势识别器的分步参考。只需搜索`Gesture Recognizer`：

[https://developer.apple.com/library/ios/referencelibrary/GettingStarted/DevelopiOSAppsSwift/Lesson4.html#//apple_ref/doc/uid/TP40015214-CH6-SW1](https://developer.apple.com/library/ios/referencelibrary/GettingStarted/DevelopiOSAppsSwift/Lesson4.html#//apple_ref/doc/uid/TP40015214-CH6-SW1)

在此处列出上述链接中的步骤：

1.  将 Tap Gesture Recognizer 对象从 拖到`Object library`您的场景中，并将其放在 UIView 的顶部。
2.  您将在`scene dock`. 场景停靠栏是情节提要中视图控制器的顶部，您可以在其中拥有 First Responder、Exit 等。
3.  将 Tap Gesture Recognizer 连接到您的代码，方法是按住 Control 从场景停靠栏中的手势识别器拖动到代码显示。像对 UIButton 操作一样填写操作对话框。
4.  你完成了！:D

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-11T11:07:00.480

**斯威夫特 2.0 版本：**

不要忘记实现*UIGestureRecognizerDelegate*

```
// Add tap gesture recognizer to View
let tapGesture = UITapGestureRecognizer(target: self, action: Selector("onClickOnView"))
tapGesture.delegate = self
self.view.addGestureRecognizer(tapGesture)

func onClickOnView(){
   print("You clicked on view..")
} 
```

**斯威夫特 3.0 版本：**

```
// Add tap gesture recognizer to View
let tapGesture = UITapGestureRecognizer(target: self, action: #selector(clickView(_:)))
tapGesture.delegate = self
view.addGestureRecognizer(tapGesture)

func clickView(_ sender: UIView) {
    print("You clicked on view")
} 
```

# php - 在填充的 PHP 下拉列表中选择匹配的值

> ID：15491015
> 
> 赞同：0
> 
> 时间：2013-03-19T03:31:14.573
> 
> 标签：php, mysql, wordpress

我已经设法通过从 MySQL 获取的 php 创建填充的下拉列表。代码 #1

```
// START FUNCTION: create a drop down list containing area options from saved area in database
function create_dropdown_areanames() {
    global $wpdb;
    $output = '';
    $tbl_ads = $wpdb->prefix . "awpcp_areas";

    $query="SELECT DISTINCT area_name FROM ".$tbl_ads." WHERE area_name <> '' ORDER by area_name ASC";
    $res = awpcp_query($query, __LINE__);

    $listofsavedareas = array();
    while ($rsrow=mysql_fetch_row($res)) {
        $listofsavedareas[] = $rsrow[0];
    }
    $savedareaslist = $listofsavedareas;

    foreach ($savedareaslist as $savedarea) {
        $output .= "<option value=\"" . esc_attr($savedarea) . "\">" . stripslashes($savedarea) . "</option>";
    }
    return $output;
}
// END FUNCTION: create a drop down list containing area options from saved area in database 
```

然后我通过代码#2调用了这个函数

```
 $allareas = create_dropdown_areanames($adcontact_country); 
```

然后我通过代码 #3 在页面中显示它

```
$theformbody.="<select name=\"adarea\" onchange=\"changeareameo();\" id='add_new_ad_area'><option value=\"\">";
$theformbody.=__("Area","AWPCP");
$theformbody.="</option>$allareas</select></p>"; 
```

我想将下面的代码添加到代码 #1

```
$output .= "<option selected='selected' value=\"" . esc_attr($savedarea) . "\">" . stripslashes($savedarea) . "</option>"; 
```

所以当触发函数 $allareas = create_dropdown_areanames($adcontact_country); **如果**$adcontact_country 变量与数据库字符串匹配，它将是下拉列表中选择的变量，否则下拉列表从上到下生成。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:40:00.020

只需在 foreach 中添加一个三元运算符。

```
 foreach ($savedareaslist as $savedarea) {
        $output .= "<option ".($savedarea==$adcontact_country?'selected="selected" ':'')."value=\"" . esc_attr($savedarea) . "\">" . stripslashes($savedarea) . "</option>";
    } 
```

并将变量添加到您的函数参数中

```
function create_dropdown_areanames($adcontact_country=null) { 
```

# asp.net - 如何使嵌套 IF 中包含的查询与 RDLC 一起使用？

> ID：15491017
> 
> 赞同：1
> 
> 时间：2013-03-19T03:31:18.737
> 
> 标签：asp.net, visual-studio-2008, rdlc

我正在使用 Visual Studio 2008。

我有一个存储过程，代码如下：

```
declare @query varchar(200)

if (@Filter = 'T')
  set @query = 'select .......'
else if (@Filter = 'D')
  set @query = 'select .......'

exec(@query) 
```

@Filter 是此存储过程中的输入参数。

当我尝试在 Report 的 DataSource 中设置此存储过程时，@query 的列无法被 DataSource 识别且未显示。

如何使这种包含查询的嵌套 IF 与 RDLC 一起使用？

在为报表创建 DataSet 时，RDLC 不会选择查询列。

# ios - NSUndoManager 调用不再存在的方法

> ID：15491018
> 
> 赞同：0
> 
> 时间：2013-03-19T03:31:28.663
> 
> 标签：ios, objective-c, nsundomanager

我有一个复杂的情况，我有一个视图控制器和几个子视图控制器。

**情况A：**当我更改子视图控制器时，我在NSUndoManager中记录了更改，并且undo调用了子视图控制器中的undo方法并且工作正常。

```
-(void)setElementTransform:(NSString *)transform
{
    NSUndoManager *undoManager = [Global sharedGlobalInstance].undoMgr;
    [undoManager registerUndoWithTarget:self selector:@selector(setElementTransform:) object:self.element.transform];
    self.element.transform = transform;
    self.view.transform = CGAffineTransformFromString(transform);
} 
```

**情况B：**这有点复杂——当我移除子视图控制器时，我在NSUndoManager 中记录了撤消方法（在主视图控制器中）。当我撤消该删除时，NSUndoManager 调用主视图控制器中的撤消方法，该方法重新创建子视图控制器。这也很好。

问题是，如果我先执行情况 A，然后执行情况 B，则撤消堆栈中有两个。我可以撤消情况 B，但情况 A 引用了不再存在的子视图控制器中的撤消方法（通过在情况 B 中删除和撤消来删除和重新创建它）。

我认为没有任何方法可以更新 NSUndoManager 以便我可以更改对旧子视图控制器的引用？

我还能如何应对呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T03:48:35.423

您可以使用不会被丢弃的对象注册所有撤消操作。例如在顶级视图控制器，甚至是应用程序委托，或单独的单例。然后，您需要在 registerUndoWithTarget:selector:object: 的对象参数中包含足够的信息，以便在适当的子视图控制器*或其替换*上应用撤消操作。

如果您只需要从撤消堆栈中获取针对死子视图控制器的操作，请在子视图控制器的 dealloc（或 viewWillDisappear，或 viewDidUnload，视情况而定）方法中调用 removeAllActionsWithTarget:self。

# json - 如何将 extjs 模型映射到 JSON spring mvc 模型

> ID：15491022
> 
> 赞同：0
> 
> 时间：2013-03-19T03:32:50.950
> 
> 标签：json, spring, spring-mvc, extjs

我正在使用 extjs4 + JSON post + spring MVC。我知道如何使它在这篇文章之后的一个简单案例中工作：http: [//equin0xe.blogspot.ca/2012/07/tutorial-to-start-using-extjs-4-and.html](http://equin0xe.blogspot.ca/2012/07/tutorial-to-start-using-extjs-4-and.html) 但我有一个非常复杂的表单（超过 80 个输入），表单的元素也可能因用户选择的类别而异。

我的目标是在 extjs 模型和 spring 模型（JPA）之间实现一些“自动”映射。因为手工工作量很大，不符合“动态形式”的要求。如果“自动映射”是不可能的，至少有某种方法可以让我将我的动态表单放入一个模型中，而不是在 extjs 中为每个表单创建每个模型。

有什么好的模式或样本可以做到这一点吗？

# javascript - 动态设置可编辑的目标 URL

> ID：15491025
> 
> 赞同：0
> 
> 时间：2013-03-19T03:33:33.337
> 
> 标签：javascript, jquery, ruby-on-rails, jeditable

我有一系列可以用 jEditable 编辑的 div。集合中的每个项目都有一个唯一的 RESTful URL，我需要`PUT`保存它。例如：

*   `budgets/6/incomes/1`
*   `budgets/6/incomes/5`
*   `budgets/6/incomes/8`
*   ETC...

我不确定如何为我的输出的每一行（在本例中为收入）将唯一 URL 注入 jEditable 的 settings.target 属性。

JavaScript：

```
 $(document).ready(function() {
     $('.edit').editable("http://<needstobedynamic", {
        method    : 'PUT',
        indicator : "saving...",
        tooltip   : "Click to edit"
     }); 
```

Rails 视图 (html.erb)：

```
<% @incomes.each do |income| %>
    <div class="row-fluid action_container">
        <div class="edit"><%= number_to_currency income.amount %></div>
    </div>
<% end %> 
```

这是[另一个](https://stackoverflow.com/questions/2631282/jeditable-dynamic-target-value)引用该问题的帖子，但没有接受答案。这篇文章中给出的答案允许我动态设置目标 URL，但不能解决在 HTML 声明中设置该 URL 而不是在 JavaScript 中设置的问题。

我也对其他图书馆的建议持开放态度并表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:00:43.290

操作，

扩展提供的[相关 SO 问题](https://stackoverflow.com/questions/2631282/jeditable-dynamic-target-value)中的答案。

为了在标记中（以及在 JS 中）引用 RESTful url，将值存储在数据属性中是否适合您的需要？

```
$('div.whatever').editable("", {
    onsubmit: function (settings) {
      settings.target = "//foo.bar" || $(this).attr('data-editable-url');
    }
}); 
```

```
<div class="whatever" data-editable-url="budgets/6/incomes/1">
...
</div> 
```

那是立即浮现在脑海中的路线。

希望能帮助到你。

# c# - System.Drawing.dll 中出现“System.OutOfMemoryException”类型的未处理异常附加信息：内存不足

> ID：15491026
> 
> 赞同：6
> 
> 时间：2013-03-19T03:33:55.627
> 
> 标签：c#, winforms, bitmap, clone

我有一个“图像”列表，其中包含大约 20 张照片，每张大约 1MB。我想通过单击下一步按钮滚动列表中的图像。但是在大约 8 张照片之后，我失去了记忆。

```
 private void button4_Click(object sender, EventArgs e) //next
    {
        index++;
        if (index >= images.Count) index = 0;
        CurrImage = images[index]; 
        Bitmap b = new Bitmap((Bitmap)CurrImage.Clone()); //breakpoint occurs her
        pictureBox1.Image = b; 

        NewThread = new Thread(new ThreadStart(ChooseColors2));
    } 
```

ChooseColors2 线程将使用“CurrImage”，所以为了避免竞争条件，我通过创建一个新的位图来避免这种情况，如上所示

请注意，如果我使用 pictureBox1.Image = CurrImage; 如果不创建新的位图，我不会收到此错误，但线程会出现竞争条件异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T03:41:53.297

您可以在将新的位图分配给 之前尝试调用以下命令`pictureBox1.Image`，以删除以前的“新”位图并释放资源：

```
pictureBox1.Image.Dispose(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-16T10:18:51.613

我相信你也可以尝试使用`using`关键字；因为它将确保对象在其作用域之后直接被释放。你可以这样做：

```
using (Bitmap b = new Bitmap((Bitmap)CurrImage.Clone()))
{
    pictureBox1.Image = b;
}` 
```

有关详细信息，请查看[C# 中“使用”的用途是什么](https://stackoverflow.com/questions/75401/what-are-the-uses-of-using-in-c-sharp)。

# php - EAN Expedia API 酒店预订返回错误响应（身份验证）

> ID：15491032
> 
> 赞同：1
> 
> 时间：2013-03-19T03:34:22.883
> 
> 标签：php, api, authentication

**目前正在使用酒店预订**测试 EAN Expedia API，但它给出了身份验证错误。

![在此处输入图像描述](../Images/a1ddeab597494787e5d19540970bb1c7.png)

我们尝试过**IP 身份验证**和**签名身份验证**都返回相同的错误，还将 IP 地址添加到我们的应用程序，但没有工作。

如何解决这个任何想法？

# apache - Apache 中的 weblogic 代理拒绝包含编码斜杠错误日志的请求 - “拒绝双编码 URI”

> ID：15491038
> 
> 赞同：1
> 
> 时间：2013-03-19T03:35:18.780
> 
> 标签：apache, weblogic-10.x

我正在为我的应用程序使用 Apache Server + Weblogic。Apache 似乎拒绝任何带有编码斜杠的 uri。

我尝试在 httpd.conf 中设置 AllowEncodedSlashes On/NoDecode

但是 NoDecode 似乎使用 404 响应对 URI 进行了双重编码，weblogic 代理日志显示以下错误“拒绝双重编码的 URI”。我没有找到此错误的参考。

我怀疑问题出在 Apache 但与 weblogic 代理有关。任何人都可以在这里帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T14:20:00.410

添加

```
 AllowEncodedSlashes On 
```

到 Apache 中的 vhost 配置解决了我们的 weblogic 10 设置的问题。

更多详细信息：[需要在 Apache 上允许编码斜杠](https://stackoverflow.com/questions/4390436/need-to-allow-encoded-slashes-on-apache)

# java - Java - 定界符忽略句尾的标点符号

> ID：15491042
> 
> 赞同：0
> 
> 时间：2013-03-19T03:35:45.250
> 
> 标签：java, string

所以我在较早的线程[Java 中询问，检查字符串是否为回文。](https://stackoverflow.com/questions/15401630/java-check-if-a-string-is-a-palindrome-regardless-of-spacing-and-punctuation)读取回文字符串时[不区分大小写。](https://stackoverflow.com/questions/15401630/java-check-if-a-string-is-a-palindrome-regardless-of-spacing-and-punctuation)

我收到了很多很好的反馈并做了功课（学到了很多东西！），但由于这是一项实验室作业（大学），我无法使用建议的方法（字符串生成器）。下面的代码（至少是大纲）是我“应该”为这个作业编写代码的方式，所以这不是关于方法的问题。

```
import java.util.*;

public class Lab04 {

public static void main(String[] args) {
    // declaring variables
    String sentence;
    String word;

    // initiating the scanner
    Scanner keyboard = new Scanner(System.in);

    // prompting the user for a sentence

    System.out.println("Please enter the sentence: ");
    sentence = keyboard.nextLine();
    System.out.println("Your input was: " + '"' + sentence + '"');

    // checking if it is a palindrome
    sentence = sentence.toLowerCase();
    Scanner stringScan = new Scanner(sentence);
    **stringScan.useDelimiter("[ \t\n,.-:;'?!\"] + ");**
    char leftChar, rightChar;
    boolean isPalindrome = true;

    while ( stringScan.hasNext() ) {
        word = stringScan.next();
        leftChar = word.charAt(0);
        rightChar = word.charAt(word.length() - 1);
        if (!(leftChar == rightChar))
            isPalindrome = false;   
    }

    if (isPalindrome)
        System.out.println("This is a palindrome.");
    else 
        System.out.println("This is not a palindrome.");

    // checking if it is an alliteration
    sentence = sentence.toLowerCase();
    Scanner stringScan1 = new Scanner(sentence);

    **stringScan1.useDelimiter("[ \t\n,.-:;'?!\"]+");**

    char firstChar = sentence.charAt(0);
    boolean isAlliteration = true;
    while ( stringScan1.hasNext() ) {
        word = stringScan1.next();
        if (firstChar != word.charAt(0) && word.length() > 3)
            isAlliteration = false;
    }

    if (isAlliteration)
        System.out.println("This is an alliteration.");
    else 
        System.out.println("This is not an alliteration.");
}
} 
```

我好奇的部分是用粗体写的。我一直在谷歌搜索并尝试使用 Java 文档，但我很难找出分隔符的格式是如何工作的。

当前的分隔符可能很乱并且包含不必要的字符。

我的目标是让分隔符忽略末尾的标点符号。它已经接近完美，但我需要找到一种方法来忽略最后的标点符号；

例子：

输入：

```
Doc, note, I dissent. A fast never prevents a fatness. I diet on cod 
```

输出：

```
Your input was: "Doc, note, I dissent. A fast never prevents a fatness. I diet on cod"
This is a palindrome. 
```

输入：

```
Doc, note, I dissent. A fast never prevents a fatness. I diet on cod. 
```

输出：

```
Your input was: "Doc, note, I dissent. A fast never prevents a fatness. I diet on cod"
This is not a palindrome. 
```

关于其余代码：

我一直在尝试几种不同的东西，所以有一些“额外”代码，比如我不再需要使用 sentence.toLowerCase 并且可能只使用一个扫描仪（？），但我只是想看看是否有解决办法标点符号问题，因为我觉得其余的只是我自己能够弄清楚的细节。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:57:09.597

不确定您的代码总体上是否正确，但如果您的问题是关于从输入字符串中删除标点符号，这非常简单。

```
String lowerCaseInput = input.toLowerCase();
String strippedInput = lowerCaseInput.replaceAll("[^a-z]", ""); 
```

转换为小写后，replaceAll() 会去掉所有非小写字母。

感谢 Patashu 的更正。

# apache - 500 Internal Server Error 锚点错误

> ID：15491043
> 
> 赞同：0
> 
> 时间：2013-03-19T03:35:50.153
> 
> 标签：apache, zend-framework, anchor, smarty3

我在我的页面中发现了这个错误

```
 Internal Server Error

 The server encountered an internal error or misconfiguration and was unable to complete your request.

 Please contact the server administrator, admin@localhost and inform them of the time the error occurred, and anything you might have done that may have caused the error.

 More information about this error may be available in the server error log. 
```

我在我的 Apache 错误日志中发现了这个错误

```
[Tue Mar 19 11:28:28 2013] [error] [client 127.0.0.1] File does not exist:        C:/wamp/www/favicon.ico
[Tue Mar 19 11:28:30 2013] [error] [client 127.0.0.1] Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to   increase the limit if necessary. Use 'LogLevel debug' to get a backtrace., referer: http://iblog.local/iBlog/
[Tue Mar 19 11:28:30 2013] [debug] core.c(3112): [client 127.0.0.1] r->uri = /iBlog/public/index.php, referer: http://iblog.local/iBlog/
[Tue Mar 19 11:28:30 2013] [debug] core.c(3118): [client 127.0.0.1] redirected from r->uri = /iBlog/public/index.php, referer: http://iblog.local/iBlog/
[Tue Mar 19 11:28:30 2013] [debug] core.c(3118): [client 127.0.0.1] redirected from r->uri = /iBlog/public/index.php, referer: http://iblog.local/iBlog/
[Tue Mar 19 11:28:30 2013] [debug] core.c(3118): [client 127.0.0.1] redirected from r->uri = /iBlog/public/index.php, referer: http://iblog.local/iBlog/
[Tue Mar 19 11:28:30 2013] [debug] core.c(3118): [client 127.0.0.1] redirected from r->uri = /iBlog/public/index.php, referer: http://iblog.local/iBlog/
[Tue Mar 19 11:28:30 2013] [debug] core.c(3118): [client 127.0.0.1] redirected from r->uri = /iBlog/public/index.php, referer: http://iblog.local/iBlog/
[Tue Mar 19 11:28:30 2013] [debug] core.c(3118): [client 127.0.0.1] redirected from r->uri = /iBlog/public/index.php, referer: http://iblog.local/iBlog/
[Tue Mar 19 11:28:30 2013] [debug] core.c(3118): [client 127.0.0.1] redirected from r->uri = /iBlog/public/index.php, referer: http://iblog.local/iBlog/
[Tue Mar 19 11:28:30 2013] [debug] core.c(3118): [client 127.0.0.1] redirected from r->uri = /iBlog/public/index.php, referer: http://iblog.local/iBlog/
[Tue Mar 19 11:28:30 2013] [debug] core.c(3118): [client 127.0.0.1] redirected from r->uri = /iBlog/public/index.php, referer: http://iblog.local/iBlog/
[Tue Mar 19 11:28:30 2013] [debug] core.c(3118): [client 127.0.0.1] redirected from r->uri = /iBlog/index/login, referer: http://iblog.local/iBlog/
[Tue Mar 19 11:28:30 2013] [error] [client 127.0.0.1] File does not exist: C:/wamp/www/favicon.ico 
```

我想访问我的其他模板

它的控制器是索引，模板名称是登录

```
 <a href= "index/login">Login</a> 
```

我该如何解决错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:37:19.450

页面[http://iblog.local/iBlog/](http://iblog.local/iBlog/)重定向到自身，并将网络服务器发送到循环中。您只需要确保删除该重定向。

# iis-7.5 - Windows 2008 R2 用户配置文件服务：卸载应用程序池身份的用户配置文件

> ID：15491044
> 
> 赞同：3
> 
> 时间：2013-03-19T03:35:59.143
> 
> 标签：iis-7.5, windows-server-2008-r2, user-profile, applicationpoolidentity

我目前面临以下问题。

1.  Web 应用程序在 IIS 7.5 windows 2008 R2 中作为域帐户（帐户 A）托管。
2.  属性“加载用户配置文件”设置为 false
3.  应用程序池与 .net v2.0 运行集成模式

当用户（帐户 B）从其远程桌面会话注销到托管服务器时，用户配置文件服务会卸载（推测）应用程序池身份（帐户 A）的用户配置文件。

我知道这个问题可以通过启用组策略“不要在用户注销时强制卸载用户注册表”或通过设置[此处](http://blogs.msdn.com/b/distributedservices/archive/2009/11/06/a-com-server-application-may-stop-working-on-windows-server-2008.aspx)描述的“加载用户配置文件”属性来解决。

问题：

1.  为什么当其他用户（帐户 B）注销时，用户配置文件服务会卸载（帐户 A）应用程序池身份的配置文件？注意：账户 B 注销后，没有其他用户远程或物理登录到主机。
2.  用户配置文件服务是否有一个特定的用户/组列表，以便每次都卸载配置文件。

谢谢，布赖恩

# python - 覆盖默认值的 Django 管理表单

> ID：15491046
> 
> 赞同：1
> 
> 时间：2013-03-19T03:36:11.493
> 
> 标签：python, django

我正在像这样在 django 模型构造函数中设置默认值

```
class Student(models.Model):
  name = models.TextField()
  location = models.TextField()
   def __init__(self, *args, **kwargs):
        self.location="sample"
        super(Student, self).__init__(*args, **kwargs) 
```

现在我排除了管理表单中的位置字段。但是如果在 StudentAdmin 中这样做

```
 def save_model(self, request, obj, form, change):

        raise Exception(obj.location) 
```

然后它是空的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:51:47.370

django 有自己的方式来设置默认值。

```
class Student(models.Model):
    name = models.TextField()
    location = models.TextField(default="sample") 
```

编辑1：

由于 django 将再次初始化实例，因此您的值将被覆盖。更改顺序可能会有所帮助。

```
def __init__(self, *args, **kwargs):        
    super(Student, self).__init__(*args, **kwargs)
    self.location="sample" 
```

### 然而。

> 依靠 Django 的内置功能并传递命名参数将是最简单的方法。 [编写一个 __init__ 函数用于 django 模型](https://stackoverflow.com/questions/843580/writing-a-init-function-to-be-used-in-django-model)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:23:02.130

使用[`default`](https://docs.djangoproject.com/en/dev/ref/models/fields/#default)模型字段参数设置默认值。如果您排除在任何形式中编辑该字段，将使用默认值。

如果您想更改默认值，则只需要覆盖保存方法，或者如果您尚未在模型或表单中这样做，则设置一个。

# java - 的意思 在java函数声明中

> ID：15491058
> 
> 赞同：5
> 
> 时间：2013-03-19T03:37:33.020
> 
> 标签：java, generics, methods

我看到了这个：

```
public static <T,U extends T> AutoBean<T> getAutoBean(U delegate) 
```

我知道输入类是 U 类型，AutoBean 类是 T 类型，U extends T 是边界。但`<T,`这里的意思是什么？

另外，如果我要编写一个函数来接受 getAutoBean 的输出，你会如何编写函数声明？（即myFunction(getAutoBean(...))，myFunction()的函数声明会是什么？）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T03:38:52.443

它只是声明您的方法处理的类型。也就是说，它基本上必须先声明泛型类型名称，然后才能在签名中使用它们。`<T`本身没有任何意义，但尖括号中的字母表示“这是我将在方法中使用的类型”。

至于“myFunction()”与以下输出一起工作`getAutoBean(...)`：

```
`public static  <T> String myFunction(AutoBean<T> arg){ // If you return a generic type object, you will also have to declare it's type parameter in the first angular brackets and in angular brackets after it.
    // do work here
}` 
```

* * *

 `## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T03:41:37.410

`<T>`是将由方法返回的 AutoBean 的类型。另请注意，输入参数类型`<U>`必须扩展类型`<T>`才能调用该方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-19T03:42:40.340

`<T,U extends T>`正在声明静态方法的类型参数。此方法有两个类型参数，一个 type`T`和一个`U`扩展第一个类型的第二个类型。

当您显式指定类型参数的绑定时，这些可能会有所不同，如

```
AutoBean<Object> autoBean = Foo.<Object, String>getAutoBean("delegate"); 
```

假设`getAutoBean`是类的成员`Foo`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T03:40:50.507

这意味着类型`U`必须扩展类型`T`。例如，这些类型可以用来代替`T`and `U`。

```
class TType { }
class UType extends TType { } 
```

至于什么`<T,`意思，它是声明要在函数中使用的泛型类型。这是示例用法：

```
UType uType = new UType();
AutoBean<TType> autobean = getAutoBean(uType); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-19T03:42:28.497

正如 lbolit 所说，声明你的方法处理什么，即在这种情况下返回类型为 T 和参数 U 是 T 的子类。`

# c++ - Cryptopp.dll 访问冲突读取位置 0x74736554

> ID：15491062
> 
> 赞同：0
> 
> 时间：2013-03-19T03:38:11.017
> 
> 标签：c++, visual-c++, cryptography, crypto++

我正在尝试使用cryptopp，下面的代码导致stringsource函数的访问冲突。这可能是什么原因？我以前成功地运行过类似的代码，差别不大。

AesHelper.cpp

```
#include "dll.h"
#include "AesHelper.h"

#include "aes.h"
using CryptoPP::AES;
#include "ccm.h"
using CryptoPP::CBC_Mode;

#include "filters.h"
using CryptoPP::StringSink;
using CryptoPP::StringSource;
using CryptoPP::StreamTransformationFilter;

#include "hex.h"
using CryptoPP::HexEncoder;
using CryptoPP::HexDecoder;

#include <string>
using namespace std;

#include "osrng.h"
using CryptoPP::AutoSeededRandomPool;

byte AesHelper::_key[AES::DEFAULT_KEYLENGTH];
byte AesHelper::_iv[AES::BLOCKSIZE];

void AesHelper::encrypt(const char* str, char ** outIv, char ** encrypted )
{
    try
    {
        AutoSeededRandomPool prng;

        byte key[AES::DEFAULT_KEYLENGTH];
        prng.GenerateBlock(key, sizeof(key));

        byte iv[AES::BLOCKSIZE];
        prng.GenerateBlock(iv, sizeof(iv));

        string cipher, encoded;
        string plain = "CBC Test Mode";

        CBC_Mode<AES>::Encryption e;
        e.SetKeyWithIV(key, sizeof(key), iv);

        // The StreamTransformationFilter removes
        //  padding as required.
        StreamTransformationFilter *stf = new StreamTransformationFilter(e,
                new StringSink(cipher),
                CryptoPP::BlockPaddingSchemeDef::ZEROS_PADDING
            );

        StringSource s(plain, true, stf); // This line cause Access Violation

        StreamTransformationFilter filter(e);
        filter.Put((const byte*)plain.data(), plain.size());
        filter.MessageEnd();

        const size_t ret = filter.MaxRetrievable();
        cipher.resize(ret);
        filter.Get((byte*)cipher.data(), cipher.size());

        //encode the cipher to hexadecimal
        StringSource(cipher, true,
        new HexEncoder(
                new StringSink(encoded)
            ) // HexEncoder
        ); // StringSource

        //set the output parameter
        outIv = (char**)_iv;
        encrypted = (char**)cipher.c_str();
    }
    catch(const CryptoPP::Exception& e)
    {
        cerr << "exception : " << e.what() << endl;
        exit(1);
    }

} 
```

错误

> PaymentManager.exe 中 0x550714CA (cryptopp.dll) 处未处理的异常：0xC0000005：访问冲突读取位置 0x74736554。
> 
> > cryptopp.dll!memcpy(unsigned char * dst, unsigned char * src, unsigned long count) 第 188 行未知

**更新：** 将 DLL 和 Exe 程序都设置为“发布”后问题解决。但现在又出现了新问题。在这条线上，问题也在 stringsource 函数中

```
StringSource(cipher, true,
            new HexEncoder(
                    new StringSink(encoded)
                ) // HexEncoder
            ); // StringSource 
```

错误

> PaymentManager.exe 已触发断点。

程序停在

```
void __cdecl _free_base (void * pBlock) {

        int retval = 0;

        if (pBlock == NULL)
            return;

        RTCCALLBACK(_RTC_Free_hook, (pBlock, 0));

        retval = HeapFree(_crtheap, 0, pBlock); // program stop at this line
        if (retval == 0)
        {
            errno = _get_errno_from_oserr(GetLastError());
        } } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T04:28:43.617

0x74736554 是四个 ASCII 字符`"tseT"`(big-endian) 或`"Test"`(little-endian) 的十六进制 - 后者正是您的`string plain`. `StringSource`构造函数试图读取该地址的事实表明您的可执行文件和 DLL 在 a 的`std::string`外观上存在分歧。特别是，该库正在从您传递它的对象的偏移量 4 处取消引用内存地址，但您传递它的对象在那里没有有效的指针值。

换句话说，`string`你正在传递的（或者可能是它的一些子对象）在内存中看起来像这样：

```
Offset    0      1      2      3      4      5      6      7
       +------+------+------+------+------+------+------+------+--
Value  | 0x43 | 0x42 | 0x43 | 0x20 | 0x54 | 0x65 | 0x73 | 0x74 | ...
       | 'C'  | 'B'  | 'C'  | ' '  | 'T'  | 'e'  | 's'  | 't'  | ...
       +------+------+------+------+------+------+------+------+-- 
```

但是，图书馆是这样对待它的：

```
Offset    0      1      2      3      4      5      6      7
       +------+------+------+------+------+------+------+------+--
Value  |           ?????           | Pointer to character data | ...
       +------+------+------+------+------+------+------+------+-- 
```

我只是意识到导致故障的地址完全由与源代码中的值匹配的 ASCII 值组成，我就弄清楚了这一切。

造成这种情况的原因几乎可以肯定是您的代码和库使用了不同的`std::string`实现，它们具有不同的对象布局。[这与跨模块边界分配和释放内存](http://blogs.msdn.com/b/oldnewthing/archive/2006/09/15/755966.aspx)的问题完全相同。为了在模块之间传递 C++ 对象（即主可执行文件和它加载的任何 DLL），两个模块需要就对象的布局方式达成一致。如果模块是在不同时间编译的，那么您需要更加努力地确保它们是针对相同的头文件编译的。

如果您从源代码编译 DLL，那么最简单的做法是确保 DLL 和您的可执行文件都使用相同的 C++ 标准库实现。如果您使用的 DLL 已经由其他人编译，那么您需要询问他们或查看文档以找到编译它的 C++ 标准库，然后针对同一个库编译您的可执行文件。

如果您不能这样做，那么下一个最佳解决方案是避免在**所有**情况下跨模块边界传递 C++ 对象——仅使用采用预定义数据类型（如整数和原始指针）或 DLL 头文件中定义的数据类型的 API . 这将完全避免该问题，但也会使您的代码更难编写，因为您无法再传递或接收`std::string`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T03:51:17.267

我不知道这个库，但我认为`StringSource`get`std::string`作为第一个参数。在这种情况下，您应该绝对确定 DLL 和您的程序都使用完全相同的 STL 编译和链接，使用完全相同的编译器及其选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T02:36:27.457

除了鲍里斯和亚当的回答之外，我还看到这会导致 Linux 上出现问题（我意识到你在 Windows 上）：

```
 StringSource(cipher, true,
    new HexEncoder(
            new StringSink(encoded)
        ) // HexEncoder
    ); // StringSource 
```

匿名声明是合法的 C/C++。但是特定版本的 GCC（大约 4.3 或 4.4 或 4.5）会在生成的代码中过早开始运行析构函数。早在 2011 年，我就曾与 Jonathan Wakely 谈过此事，但我始终无法弄清楚原因。这是导致 m 开始查看它的线程：[运行 RSA 示例和一些安装问题](https://groups.google.com/forum/#!topic/cryptopp-users/kzFQFHDioQw)。

解决方法很简单：

```
 StringSource ss(cipher, true,
    new HexEncoder(
            new StringSink(encoded)
        ) // HexEncoder
    ); // StringSource 
```

# ruby-on-rails - 未定义的方法 rails form_for

> ID：15491064
> 
> 赞同：0
> 
> 时间：2013-03-19T03:38:12.957
> 
> 标签：ruby-on-rails, ruby, model, controller, undefined

在 user_sponsorship 上获得未定义的方法错误

app/controllers/user_sponsorships_controller.rb:7:in `new'

这是 new.html.erb：

```
<% if @event %>
<%= form_for @user_sponsorship, method: :post do |form|  %>
<div class="mike">
<%= form.hidden_field :event_id, value: @event %>
<%= submit_tag "Yes, sponsor event", class: 'btn btn-success' %>
<%= link_to "Cancel", event_path(@event), class: 'btn btn-default'%>
</div>
<% end %>
<% end %> 
```

这是控制器：

```
class UserSponsorshipsController < ApplicationController
 before_filter :authenticate_user!, only: [:new]

def new
    if params[:event_id]
        @event = Event.find(params[:event_id])
        @user_sponsorship = current_user.user_sponsorship.new(event: @event)
        else
        flash[:error] = "Event required"
     end
end
end 
```

这是模型：

```
class UserSponsorship < ActiveRecord::Base
belongs_to :user
belongs_to :event

attr_accessible :user, :event
end 
```

如您所知，我对 Rails 还很陌生。在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:40:52.243

您的错误很可能是由于这一行

```
@user_sponsorship = current_user.user_sponsorship.new(event: @event) 
```

用户（最有可能） has_many user_sponsorships 所以该行应该是

```
@user_sponsorship = current_user.user_sponsorships.new(event: @event) 
```

使用复数形式，它也应该是关联名称（如果您遵循 rails 约定）。

# xml - 根据兄弟的值选择 XML 元素

> ID：15491066
> 
> 赞同：4
> 
> 时间：2013-03-19T03:38:18.093
> 
> 标签：xml, linq, linq-to-xml

使用 Linq to XML 和下面的示例 XML 文档，我如何获得“itemColor”为蓝色的“itemType”的值？

```
<?xml version="1.0" encoding="utf-8" ?>
<items>
    <item>
         <itemName>my item name</itemName>
         <itemType>spoon</itemType>
         <itemColor>red</itemColor>
    </item>
    <item>
         <itemName>your item name</itemName>
         <itemType>fork</itemType>
         <itemColor>blue</itemColor>
    </item>
 </items> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:52:21.050

```
var xdoc = XDocument.Load(path_to_xml);
var itemType = xdoc.Root.Elements("item")
                   .Where(i => (string)i.Element("itemColor") == "blue")
                   .Select(i => (string)i.Element("itemType"))
                   .FirstOrDefault();
// returns "fork" 
```

另一种选择是使用 XPath 的单行：

```
var type = (string)xdoc.XPathSelectElement("//item[itemColor='blue']/itemType"); 
```

**顺便说一句**，对于使用 XDocument 的 XPath 扩展，您应该使用*System.Xml.XPath*命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:48:22.440

这应该可以解决问题：

```
XDocument doc = XDocument.Load("../../sample.xml");
var elements = from item in doc.Descendants("items").Descendants("item")
               where item.Element("itemColor").Value == "blue"
               select item.Element("itemType").Value; 
```

顺便说一句：这**不是**LINQ to SQL（在这个例子中 SQL 来自哪里），而是[LINQ to XML](http://msdn.microsoft.com/de-de/library/vstudio/bb387098.aspx)

# javascript - 如何避免 box2dweb 中的重影碰撞

> ID：15491069
> 
> 赞同：2
> 
> 时间：2013-03-19T03:38:32.183
> 
> 标签：javascript, html, canvas, box2d, box2dweb

我正在使用 box2dweb 创建游戏，但希望在我的游戏中有一个不平坦的地面。但是，box2dweb 不是最新的，并且不包含用于修复重影碰撞的边缘链。

目前，我的地面看起来像这样： http: [//gyazo.com/db00ef9f6bda6bfc48fd733509af8b1c.png](http://gyazo.com/db00ef9f6bda6bfc48fd733509af8b1c.png)

它由 b2polygon 边组成，但在边相交的点仍然存在重影碰撞。有没有其他方法可以防止重影碰撞而不剪掉矩形上的角或将我的形状变成圆形？

# java - 变量可能未初始化错误和一般建议

> ID：15491073
> 
> 赞同：1
> 
> 时间：2013-03-19T03:39:07.470
> 
> 标签：java, syntax

我对这一切都非常陌生，我第一年主修编程和网页设计。我在网上上课，我的教授有时很难找到。

无论如何，我已经从一个程序中编写了这段代码，该程序获取银行信息（帐号、账户余额和账户类型 [储蓄或支票]，计算利息和服务费并输出帐号和账户余额。

我的主要问题是语法错误，指出我的变量“servCharge”可能尚未初始化。我已经看过很多次了，无法追查我做错了什么。

我敢肯定，你们大多数人都很容易发现这样的事情。对此的任何帮助以及有关如何清理代码的总体建议都会有所帮助并非常感谢！

这是我到目前为止所拥有的：

```
import java.util.*;

public class Unit5
{
    static Scanner console = new Scanner(System.in);

    public static void main(String[] args)
    {

      final double CHECKING_MIN_BAL = 25.00;
      final double CHECKING_SFEE = 25.00;
      final double MAX_CHECKING_INTR = .015;
      final double MIN_CHECKING_INTR = .03;
      final double SAVINGS_MIN_BAL = 500.00;
      final double SAVINGS_SFEE = 10.00;
      final double SAVINGS_INTR = .04;
      final double FIVE_THOU = 5000.00;

      String accountNumber;
      String accountBal;
      String accountType;
      double accountBalDbl;
      double interest;
      double servCharge;
      double accountBalFinal;

      System.out.println("Bank");
      System.out.println("Please enter a 10 digit "
                           +"account number or enter # to exit: ");
      while (! ( accountNumber = console.next() ).equalsIgnoreCase( "#" ) ) 
      {
        if (accountNumber.matches("^[0-9]{10}"))
        {
          System.out.println();
        }else{
          System.out.println("Invalid account number!");
          System.exit(0); 
        }

        System.out.println("Please enter account balance: ");
        accountBal = console.next();
        {
          if (accountBal.matches("^\\$?([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)(\\.[0-9][0-9])?$"))  //adjust so it takes more numbers before decimal
          {
             System.out.println();
          }else{
             System.out.println("Invalid dollar amount!");
             System.exit(0);
          }

          System.out.println("Please enter account type,"
                        +"C for checking or S for savings");
          accountType = console.next();
          {
          if (accountType.matches("^[Ss | Cc]"))  //look into this
          {
             System.out.println();
          }else{
             System.out.println("Invalid account type, please enter"
                          +"C or S");
             System.exit(0);
          }

          accountBalDbl = Double.parseDouble(accountBal);
          {
             if (accountType == ("[Cc]"))
             {     
                if (accountBalDbl < CHECKING_MIN_BAL)
                   servCharge = CHECKING_SFEE;
                else
                   servCharge = 0.0;

             if (accountBalDbl < CHECKING_MIN_BAL + FIVE_THOU)
                interest = accountBalDbl * MIN_CHECKING_INTR;
             }
          }
          {
           if (accountType == ("S | s"))
             {
             if (accountBalDbl < SAVINGS_MIN_BAL)
                servCharge = SAVINGS_SFEE;
                interest = 0.0;
             }else{ 
                servCharge = 0.0;
                interest = accountBalDbl * SAVINGS_INTR;
             }
          }
          accountBalFinal = (accountBalDbl - servCharge) + interest;
          System.out.println("Account Number: " + accountNumber);
          System.out.println();
          System.out.println("Current Balance: " + accountBalFinal);
          System.out.println();
          System.out.println("Please enter a 10 digit "
                     +"account number or enter # to exit: ");

         }
        }
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:46:52.950

您的格式有点难以解读，但您提到的错误与以下事实有关：您的代码中至少有一个分支您没有为 servCharge 分配值。当您尝试这样做时，这是一个问题：

```
accountBalFinal = (accountBalDbl - servCharge) + interest; 
```

确保您始终通过所有分支将 servCharge 设置为某个值，和/或确保在代码开头将其设置为默认值。就像是：

```
servCharge = 0.0; 
```

最大的问题是你最终可能会得到一个你没有预料到的 servCharge 值（0.0）。检查所有 if/else 分支，并确保为每个分支中的 servCharge 分配了适当的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T05:49:05.793

错误本身暗示了如何克服这个问题。您需要将变量初始化为某个默认值。这是因为局部变量（在方法中声明的变量）没有在 java 中隐式初始化。因此，编译器会提示您一条错误消息，说明在使用变量之前对其进行初始化。

如果您只是在方法主体内声明一个（而不初始化它）并且从不使用它，您将不会收到错误消息。编译器只会打扰您，如果您尝试以某种方式使用未初始化的局部变量，例如为其赋值、打印其内容等。

我建议您阅读 Java 基础知识以掌握这些内容。希望这可以帮助。

# asp.net - 使用带有局部视图的 MVC Ajax 并设置 UpdateTargetId

> ID：15491075
> 
> 赞同：2
> 
> 时间：2013-03-19T03:39:17.420
> 
> 标签：asp.net, asp.net-mvc, actionlink, ajaxhelper

我试图解决的一个难题是这样的：

假设我们有一个显示按钮列表的视图，当单击按钮时，它可以做两件事：

1.  转到下一个按钮列表
2.  打开编辑表单

包含按钮列表的整个 from 实际上是由父级调用以加载到模态对话框 div 容器中的局部视图：

所以这里是部分 _ButtonListForm 的代码：

```
<div class="modal-body" id="buttonsContainer">

@foreach (var item in Model.CategoryTypesList.ListItems)
{
    var ajaxDialogoptions = new AjaxOptions()
    {
        HttpMethod = "GET",
        InsertionMode = InsertionMode.Replace,
        UpdateTargetId = "???",
        OnComplete = "OpenDialog('???');"
    };
    @Ajax.ActionLink(item.ListItemName, item.MainItemActionButton.ActionName, item.MainItemActionButton.ControllerName, item.MainItemActionButton.RoutValues, ajaxDialogoptions, new { Class = "btn btn-large btn-info btn-block" })
}
</div> 
```

我无法将其设置为`UpdateTargetId`，`buttonsContainer`因为它会用另一个加载整个视图，`buttonsContainer`然后单击另一个按钮，它会再次执行此操作，等等...

如何单击 ajax 操作链接以更新整个部分视图 UpdateTargetId 是什么？

我知道我可以创建另一个仅列出按钮的部分，并且将从父部分更新目标，但是如果某些内容得到更新并且看起来不是一个好的设计（或者是它 ？ ）..

# thrift - thrift 0.5 和 0.8 不兼容

> ID：15491078
> 
> 赞同：0
> 
> 时间：2013-03-19T03:39:21.117
> 
> 标签：thrift, scribe

我正在使用一个依赖于 thrift-0.5.0.jar 的 java scribe 客户端，但我的依赖于 scribe 客户端的 appserver 依赖于 libthrift-0.8.0.jar。建服务器的时候报不兼容，谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:11:06.970

最后，我找到了解决方案： 1\. 使用 thrift-0.8.0 重新编译 scribe-client 的 thrift 文件 2\. 使用新生成的 thrift 类重新编译 scribe-client 3\. 使用新编译的 scribe-client 重新编译我的应用服务器

# ruby-on-rails - 上限部署错误 - 在任何来源中都找不到 i18n-0.6.4

> ID：15491080
> 
> 赞同：3
> 
> 时间：2013-03-19T03:39:49.433
> 
> 标签：ruby-on-rails, capistrano, bundler

我正在尝试部署我的应用程序 ( `cap deploy:cold`) 并且一切顺利，直到：

```
Could not find i18n-0.6.4 in any of the sources 
```

现在，我看到了其他类似的帖子，但它们都指向乘客问题，而在我的情况下，我在服务器上安装了 nginx（Ubuntu Server 12.04）。

我对 Rails 比较陌生，所以我可能在这里遗漏了一些基本的东西，但我知道 i18n 是在本地安装的（OS X Mountain Lion），'bundle show i18n' 给了我：

```
/Users/myhomedirectory/.rvm/gems/ruby-1.9.3-head/gems/i18n-0.6.4 
```

问题出在我的服务器上吗？我该如何处理？

在此先感谢您的帮助！

Capistrano 食谱下方

```
require "rvm/capistrano"

server 'myserverip', :web, :app, :db, primary: true

set :application, "siac"
set :user, "deployer"
set :deploy_to, "/home/#{user}/apps/#{application}"
set :deploy_via, :remote_cache
set :use_sudo, false

set :rvm_type, :system

set :scm, :git
set :repository,  "mygitdir"
set :branch, "master"

default_run_options[:pty] = true
ssh_options[:forward_agent] = true

namespace :deploy do
  %w[start stop restart].each do |command|
    desc "#{command} unicorn server"
    task command, roles: :app, except: {no_release: true} do
      run "/etc/init.d/unicorn_#{application} #{command}"
    end
  end

  task :setup_config, roles: :app do
    sudo "ln -nfs #{current_path}/config/nginx.conf /etc/nginx/sites-enabled/#{application}"
    sudo "ln -nfs #{current_path}/config/unicorn_init.sh /etc/init.d/unicorn_#{application}"
    run "mkdir -p #{shared_path}/config"
    put File.read("config/database.yml.tpl"), "#{shared_path}/config/database.yml"
    puts "Now edit the config files in #{shared_path}."
  end
  after "deploy:setup", "deploy:setup_config"

  task :symlink_config, roles: :app do
    run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"
  end
  after "deploy:finalize_update", "deploy:symlink_config"

  desc "Make sure local git is in sync with remote."
  task :check_revision, roles: :web do
    unless `git rev-parse HEAD` == `git rev-parse origin/master`
      puts "WARNING: HEAD is not the same as origin/master"
      puts "Run `git push` to sync changes."
      exit
    end
  end
  before "deploy", "deploy:check_revision"
end 
```

和堆栈跟踪：

```
 * executing "cd -- /home/deployer/apps/siac/releases/20130319035235 && rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile && cp -- /home/deployer/apps/siac/shared/assets/manifest.yml /home/deployer/apps/siac/releases/20130319035235/assets_manifest.yml"
    servers: ["myserverip"]
    [myserverip] executing command
 ** [out :: myserverip] Could not find i18n-0.6.4 in any of the sources
 ** [out :: myserverip] Run `bundle install` to install missing gems.
    command finished in 905ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/deployer/apps/siac/releases/20130319035235; true"
    servers: ["myserverip"]
    [myserverip] executing command
    command finished in 627ms
failed: "rvm_path=/usr/local/rvm /usr/local/rvm/bin/rvm-shell 'default' -c 'cd -- /home/deployer/apps/siac/releases/20130319035235 && rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile && cp -- /home/deployer/apps/siac/shared/assets/manifest.yml /home/deployer/apps/siac/releases/20130319035235/assets_manifest.yml'" on myserverip 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-08T05:20:23.090

复制评论中的答案，以便从“未回答”过滤器中删除此问题：

> 谢谢你们，在使用**cap shell**和**cap invoke COMMAND=**进行了一些测试后，我最终清理了 capistrano 配方，在服务器端修复了一些符号链接，我让它工作了。谢谢大家！

~ 每个[加斯顿康西里奥的回答](https://stackoverflow.com/users/1036654/gaston-concilio)

# java - 从初始位置、方位角和距离得出的结果位置

> ID：15491087
> 
> 赞同：0
> 
> 时间：2013-03-19T03:40:26.660
> 
> 标签：java, geolocation, coordinates

我试图从这个[站点](http://www.movable-type.co.uk/scripts/latlong.html)实现该功能。

> φ2 = asin( sin(φ1)*cos(d/R) + cos(φ1)*sin(d/R)*cos(θ) )
> 
> λ2 = λ1 + atan2( sin(θ)*sin(d/R)*cos(φ1), cos(d/R)-sin(φ1)*sin(φ2))

```
//import static  java.lang.Math.*;      
public static LatLng fromBearingDistance(double lat1, double lon1, double brng, double d) {     
    double R = 6371.0;      
    double lat2 = Math.asin( Math.sin(lat1)*Math.cos(d/R) + 
              Math.cos(lat1)*Math.sin(d/R)*Math.cos(brng) );
    double lon2 = lon1 + Math.atan2(Math.sin(brng)*Math.sin(d/R)*Math.cos(lat1), 
                     Math.cos(d/R)-Math.sin(lat1)*Math.sin(lat2));
    return new LatLng(lat2,lon2);   
} 
```

我的函数的结果是：`0.0905,1.710`应该在什么时候`53.188 0.133`调用

```
fromBearingDistance(53.32055555555556f, 1.7297222222222224f,
        96.02166666666666f, 124.8f); 
```

这与示例站点的坐标相同。

这里会发生什么？- 代码字面上的意思是一样的。我唯一改变的是双打的vars。

我使用[这个](http://www.onlineconversion.com/map_decimaldegrees.htm)网站将度数转换为十进制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T04:54:29.337

我认为部分问题可能是您的纬度、经度和方位值似乎以度为单位，而您链接的页面上的公式要求它们以弧度为单位。如果您将页面向下滚动到底部，页面作者实际上已经提供了计算的 javascript 实现，作为`LatLon`表示位置的对象的方法。这是似乎与您尝试做的事情相匹配的方法。请注意，他在计算之前做的第一件事是将所有内容都转换为弧度，而他做的最后一件事是将其转换回度数。

```
/**
 * Returns the destination point from this point having travelled the given distance
 * (in km) on the given initial bearing (bearing may vary before destination is reached)
 *
 *   see http://williams.best.vwh.net/avform.htm#LL
 *
 * @param   {Number} brng: Initial bearing in degrees
 * @param   {Number} dist: Distance in km
 * @returns {LatLon} Destination point
 */
LatLon.prototype.destinationPoint = function(brng, dist) 
{
  dist = typeof(dist)=='number' ? dist : typeof(dist)=='string' && dist.trim()!='' ? +dist : NaN;
  dist = dist/this._radius;  // convert dist to angular distance in radians
  brng = brng.toRad();  // 
  var lat1 = this._lat.toRad(), lon1 = this._lon.toRad();

  var lat2 = Math.asin( Math.sin(lat1)*Math.cos(dist) + 
                        Math.cos(lat1)*Math.sin(dist)*Math.cos(brng) );
  var lon2 = lon1 + Math.atan2(Math.sin(brng)*Math.sin(dist)*Math.cos(lat1), 
                               Math.cos(dist)-Math.sin(lat1)*Math.sin(lat2));
  lon2 = (lon2+3*Math.PI) % (2*Math.PI) - Math.PI;  // normalise to -180..+180º

  return new LatLon(lat2.toDeg(), lon2.toDeg());
} 
```

该类`java.lang.Math`具有从度到弧度来回转换的方法，因此使用它们来改进您的代码应该很容易。

# c# - Windows 手机：从后台代理通知调用事件处理程序

> ID：15491088
> 
> 赞同：1
> 
> 时间：2013-03-19T03:40:27.733
> 
> 标签：c#, windows-phone-7, windows-phone-8

我正在尝试从网站下载图像并将其作为 WP8 上的磁贴的背景。在 OnInvoke() 方法的后台代理中，我有以下几行可将该图像下载到 BitmapImage 对象中：

```
static BitmapImage img;

protected override void OnInvoke(ScheduledTask task)
{
    Deployment.Current.Dispatcher.BeginInvoke(() =>
                    {

                        img = new BitmapImage(new Uri(imgLoc, UriKind.Absolute));

                        img.ImageOpened += img_ImageOpened;
      });
} 
```

但是，当我单步执行代码时，我从未遇到过 img_ImageOpened 事件

```
void img_ImageOpened(object sender, RoutedEventArgs e)
    {
        Deployment.Current.Dispatcher.BeginInvoke(() =>
                    {

                        Image uiImage = new Image();
                        uiImage.Source = img;
                        CreateNewHubTile(uiImage);
                    });
    } 
```

URI 是正确的，我可以单步执行 OnInvoke() 方法的 Deployment.Current.Dispatcher.BeginInvoke(())...，只是未调用 BitmapImage 的事件。

我试过在谷歌搜索一些东西，但我似乎没有使用正确的关键字......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:58:39.030

您需要做的是禁用 BitmapImage 的延迟创建，这是通过将 CreateOptions 设置为 None 来完成的，如下所示：

```
protected override void OnInvoke(ScheduledTask task)
{
   Deployment.Current.Dispatcher.BeginInvoke(() =>
      {
          img = new BitmapImage(new Uri(imgLoc, UriKind.Absolute));
          img.CreateOptions = BitmapCreateOptions.None;
          img.ImageOpened += img_ImageOpened;
      });
} 
```

此外，如果您调用了 NotifyComplete()，请确保在您收到事件之前不会调用它。

# android - Android 片段侧边栏

> ID：15491090
> 
> 赞同：0
> 
> 时间：2013-03-19T03:40:39.930
> 
> 标签：android, user-interface, android-fragments

我有一个小的侧边栏片段，我在选择操作项时添加。它有一个固定的宽度，我希望主视图将全屏显示，直到操作项选择时，它会被略微压缩以允许侧边栏出现。

我已经尝试了很多东西，包括相对 toleftOf/RightOf 和各种布局/宽度组合。除非我使用带权重的 LinearLayout，否则我总是以侧边栏全屏结束。半工作 LinearLayout 权重的问题在于它使用了屏幕的百分比，这会导致对不同屏幕尺寸的不可靠影响。

有没有人做过类似的事情？

```
 ______    _
|      |  | |
| Main |<-|S|
|______|  |_| 
```

目前半工作的xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:baselineAligned="false" >

    <FrameLayout
        android:id="@+id/frameLayoutImage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" >
    </FrameLayout>

    <!-- This will initially have no content/collapsed -->
    <FrameLayout
        android:id="@+id/frameLayoutEdit"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="right|top"
        android:layout_marginBottom="40dp"
        android:layout_weight="4" >

    </FrameLayout>

</LinearLayout> 
```

片段 xml（可以是固定宽度）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout />

    <Button />

    <Button />

</RelativeLayout> 
```

片段添加：

```
// This should just push the frame layout the necessary width to display the fragment
FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
transaction.add(R.id.frameLayoutEdit, xmpFrag); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:45:11.913

不要在侧边栏上设置权重；设置固定大小（或 wrap_content）并将主要内容的 layout_width 设置为 0dp。

根据您想要的效果，您可能希望将它们都放在 FrameLayout 中，以便侧边栏覆盖主片段而不是缩小主片段，使主片段始终填充并且侧边栏只是它自己的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:34:11.233

这是上述答案的实际工作代码（感谢斯科特帮助我实现了逻辑飞跃）：

```
<FrameLayout
    android:id="@+id/frameLayoutImage"
    android:layout_width="match_parent"
    android:layout_height="fill_parent" 
    android:layout_weight="1">
</FrameLayout>

<!-- This will initially have no content/collapsed -->
<FrameLayout
    android:id="@+id/frameLayoutEdit"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_gravity="right|top"
    android:layout_marginBottom="40dp" >

</FrameLayout> 
```

分段：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="300dp"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout />

    <Button />

    <Button />

</RelativeLayout> 
```

# css - 如何使 css @media 属性内联（关于电子邮件响应）

> ID：15491096
> 
> 赞同：1
> 
> 时间：2013-03-19T03:41:06.720
> 
> 标签：css, media-queries

我正在尝试让我的注册电子邮件在移动设备中响应，
我想尝试@media 属性，但我无法弄清楚如何使这个内联，据我所知，电子邮件的样式应该始终嵌入......
文档不要提到那个

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T03:43:19.933

你不能把它内联，你必须把它放在样式标签内的html电子邮件的头标签中。例如：

```
<head>
...
<style type="text/css">
    @media screen and (max-width:480px) {
    ...
    ...
    }
</style>
</head> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T06:16:55.790

媒体查询是最好的选择，但

电子邮件客户端对媒体查询的支持有很大不同。许多客户端（例如 Gmail）根本不支持媒体查询。

```
<meta name="viewport" content="width=device-width" />

.container {
  max-width:600px!important;
  display:block!important;
  margin:0 auto!important;
  clear:both!important;
} 
```

# java - 使用加密哈希函数之前和之后

> ID：15491100
> 
> 赞同：4
> 
> 时间：2013-03-19T03:41:20.280
> 
> 标签：java, hex, bytearray, checksum, cryptographic-hash-function

在查看了用于生成 Java MD5 和 SHA* 哈希的多个在线参考之后，我注意到纯文本（文件字符串）在被馈送到 Digest 对象以生成哈希之前和之后都经过了一定的准备。具体来说，数据首先转换为字节数组，然后馈送到摘要，然后将输出哈希转换为十六进制流。为什么所有这些字节和十六进制转换？

PS：我想答案与 Java 和 Digest 对象如何开展业务有关，我提出这个问题的动机是了解这种行为，并可能获得对一些文档/文献的参考，以深入解释这一点.

丹克！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T03:49:16.320

这有两个部分：

1.  为什么我们在消化之前将字符串转换为字节数组？
2.  为什么我们将摘要转换为十六进制？

第一个答案是摘要**仅**适用于字节数组。他们对字符串、数字或任何其他数据类型一无所知。只是字节。因此，我们获取一个`String`对象并使用某种形式的文本编码（例如 UTF-8）将其转换为字节数组。

请注意，编码很重要：我可以用 UTF-8、UTF-16、US-ASCII 或任何数量的其他编码对字符串“hello world”进行编码。如果我选择 UTF-8，它将生成 11 个字节的输出（因为“hello world”是 11 个字符长），但 UTF-16 将生成 22 个字节的输出。这两种编码会产生不同的摘要，因此了解编码至关重要。

第二个答案是，摘要通常用于基于字符串的协议（例如 HTTP cookie）中，用于将密码哈希存储在数据库的文本列中，用于将 PGP 签名添加到电子邮件等。

由于摘要生成原始字节数组，因此需要将其重新编码为文本友好的内容。这就是为什么使用十六进制（或更可能是 base-64）的原因。

例如，继续使用“hello world”示例，假设 UTF-8 编码的摘要转换为具有以下值的字节数组：（`4 27 125 8 0 22 90 7`对于我神话般的 8 字节摘要函数）。如果我试图将其解释为 UTF-8 字符串，那么我会得到很多垃圾：0 不是可打印的字符。以十六进制编码意味着我可以以有意义的方式将其打印出来，或将其添加到我的 PGP 电子邮件或其他任何内容中。

那有意义吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T03:46:37.927

这些散列算法的实现适用于字节，而不是字符串字符之类的其他东西。这就是为什么您需要将所有内容都转换为字节形式的原因。

# facebook - Facebook news.reads 动作未出现在时间线和新闻源上

> ID：15491108
> 
> 赞同：1
> 
> 时间：2013-03-19T03:41:57.883
> 
> 标签：facebook, facebook-graph-api, web-applications, facebook-opengraph, facebook-timeline

News.reads（内置）操作已成功发布在活动日志下，但未发布在时间线和新闻源上。我怎样才能让它出现在我的时间线/新闻源中以供其他人查看？

我尝试进行自定义阅读操作，它已成功发布在我的时间线、新闻源和活动日志上。Facebook 会批准自定义阅读操作吗？

# java - 在android中的特定时间内运行方法

> ID：15491109
> 
> 赞同：0
> 
> 时间：2013-03-19T03:42:04.977
> 
> 标签：java, android

我想在特定时间（比如每 5 秒）运行一个 android 方法。这是代码，我想按时间间隔运行。

```
shipDB = this.openOrCreateDatabase("shipDB", SQLiteDatabase.CREATE_IF_NECESSARY, null);
                String query = "select *from ShopList";
                Cursor c = shipDB.rawQuery(query, null);
                c.moveToFirst();
                do{
                    String Item = c.getString(c.getColumnIndex("name"));

                    /* Add current Entry to results. */ 
                 results.add(Item);
                }while(c.moveToNext());
                 this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, results)); 
```

我该怎么做？？

# error-handling - 启动预先存在的重启的最快、最简单的方法是什么？

> ID：15491113
> 
> 赞同：2
> 
> 时间：2013-03-19T03:42:23.073
> 
> 标签：error-handling, common-lisp

好的，我需要重写这个问题。

如果我走：

```
CL-USER> whatever 
```

我在调试器框架中得到了这个：

```
The variable WHATEVER is unbound.
   [Condition of type UNBOUND-VARIABLE]

Restarts:
 0: [RETRY] Retry SLIME REPL evaluation request.
 1: [*ABORT] Return to SLIME's top level.
 2: [TERMINATE-THREAD] Terminate this thread (#<THREAD "repl-thread" RUNNING {C0C6CF9}>)
 ... 
```

因此，我应该能够做到这一点：

```
(handler-case
    whatever
  (unbound-variable (e) (invoke-restart 'retry))) 
```

然而它产生：

```
No restart RETRY is active.
   [Condition of type SB-INT:SIMPLE-CONTROL-ERROR]
... 
```

我错过了什么？

ABORT 重试确实工作正常；感谢 hans 和 Svante 指出这一点。其他的 - 重试，终止线程等 - 都出错了。

我还尝试在调试器中按 e 并直接运行 INVOKE-RESTART。[结果相同，但有一个例外：此答案](https://stackoverflow.com/a/15473880/1435206)中的低级示例就像我认为的那样工作：

```
Eval in frame (COMMON-LISP-USER)> (invoke-restart 'go-on) 
```

无怨无悔地返回提示。仅当从重新启动菜单中手动选择时，高级示例才会正确重新启动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T06:04:23.523

输出中 restart 1 前面的星号表示此重启将由 SLIME 的 [q]uit 命令调用。重新启动的名称是 'ABORT，因此要调用它，请使用以下命令：

```
(handler-case
    whatever
  (unbound-variable (e) (invoke-restart 'abort))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:10:58.650

`retry`只是再次尝试评估相同的变量。由于您没有绑定它，它仍然是未绑定的。你可能有更好的运气

```
(handler-case
    whatever
  (unbound-variable (e)
    (setq whatever 42)
    (invoke-restart 'swank::retry))) 
```

应该返回 42。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T14:41:19.140

如果你运行`compute-restarts`，你会看到重启`retry`实际上是`swank`包内部的：

```
(#<RESTART SWANK::RETRY {100462AE63}> #<RESTART ABORT {1003E4C2B3}>
 #<RESTART ABORT {1007138083}>) 
```

如果您因此将其限定为`swank::retry`，您将获得预期的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T16:08:01.973

要查看所有重新启动并获取实际符号，请执行以下操作。请注意，调试器没有被调用，因此它的重新启动不可用。

```
CL-USER> (handler-case whatever
           (unbound-variable (c)
              (mapcar (lambda (r) (describe r) (terpri))
                      (compute-restarts c))
              (abort))) 
```

我们得到：

```
#<RESTART SWANK::RETRY {10055BDB83}>                                                                                                                                                             
  [structure-object]                                                                                                                                                                             

Slots with :INSTANCE allocation:                                                                                                                                                                 
  NAME                  = SWANK::RETRY                                                                                                                                                           
  FUNCTION              = #<CLOSURE (LAMBDA (&REST SB-IMPL::TEMP)..                                                                                                                              
  REPORT-FUNCTION       = #<CLOSURE (LAMBDA (STREAM) :IN SWANK::CALL-WITH-RETRY-RESTART) {10055B..                                                                                               
  INTERACTIVE-FUNCTION  = NIL                                                                                                                                                                    
  TEST-FUNCTION         = #<FUNCTION (LAMBDA (COND)..                                                                                                                                            

#<RESTART ABORT {10055B9A83}>                                                                                                                                                                    
  [structure-object]                                                                                                                                                                             

Slots with :INSTANCE allocation:                                                                                                                                                                 
  NAME                  = ABORT                                                                                                                                                                  
  FUNCTION              = #<CLOSURE (LAMBDA (&REST SB-IMPL::TEMP) :IN SWANK::HANDLE-REQUESTS) {1..                                                                                               
  REPORT-FUNCTION       = #<FUNCTION (LAMBDA (STREAM) :IN SWANK::HANDLE-REQUESTS) {10041ECF6B}>                                                                                                  
  INTERACTIVE-FUNCTION  = NIL                                                                                                                                                                    
  TEST-FUNCTION         = #<FUNCTION (LAMBDA (COND)..                                                                                                                                            

#<RESTART SB-SYS:REMOVE-FD-HANDLER {10055B97D3}>                                                                                                                                                 
  [structure-object]                                                                                                                                                                             

Slots with :INSTANCE allocation:                                                                                                                                                                 
  NAME                  = SB-SYS:REMOVE-FD-HANDLER                                                                                                                                               
  FUNCTION              = #<CLOSURE (LAMBDA (&REST SB-IMPL::TEMP)..                                                                                                                              
  REPORT-FUNCTION       = #<CLOSURE (LAMBDA (STREAM) :IN SB-IMPL::SUB-SUB-SERVE-EVENT) {10055B97..                                                                                               
  INTERACTIVE-FUNCTION  = NIL                                                                                                                                                                    
  TEST-FUNCTION         = #<FUNCTION (LAMBDA (COND)..                                                                                                                                            

#<RESTART ABORT {10029531B3}>                                                                                                                                                                    
  [structure-object]                                                                                                                                                                             

Slots with :INSTANCE allocation:                                                                                                                                                                 
  NAME                  = ABORT                                                                                                                                                                  
  FUNCTION              = #<CLOSURE (LAMBDA (&REST SB-IMPL::TEMP) :IN SB-IMPL::TOPLEVEL-REPL) {1..                                                                                               
  REPORT-FUNCTION       = #<FUNCTION (LAMBDA (STREAM) :IN SB-IMPL::TOPLEVEL-REPL) {100014A8BB}>                                                                                                  
  INTERACTIVE-FUNCTION  = NIL                                                                                                                                                                    
  TEST-FUNCTION         = #<FUNCTION (LAMBDA (COND).. 
```

# java - 清除与恢复 Java 中的对象

> ID：15491116
> 
> 赞同：0
> 
> 时间：2013-03-19T03:42:40.900
> 
> 标签：java

这是我被问到的问题。

实现以下两个静态方法。请注意，尽管这两种方法计算相同的函数，但第一种方法会清除给定的 NaturalNumber，而第二种方法会恢复它。（naturalnumber 是一个产生特殊数字的类）

我不是在寻找答案，只是澄清他们所说的清除与恢复的含义。我在下面发布了一个完整作业的链接。

[任务](http://www.cse.ohio-state.edu/software/2221/web-sw1/assignments/homeworks/review3.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:47:06.940

这不是标准术语。它可能与`NaturalNumber`. 作为一种猜测，我会说*清除* `n`的方法将返回并`n`设置为全零，而*恢复* `n`的方法将返回`n`不变（或者可能在方法执行时更改，但然后恢复它返回之前的方式） .

可以肯定的是，请向您的助教进行澄清。

# c++ - c++ 用用户输入做while循环

> ID：15491123
> 
> 赞同：0
> 
> 时间：2013-03-19T03:43:32.097
> 
> 标签：c++, cin

我正在尝试这样做，因此如果用户输入的数字小于 4 或大于 10，则会提示他们无效并输入新数字。我遇到的问题是，如果他们确实输入了正确的数字，它就不会继续到下一部分。这是我到目前为止所拥有的：

```
#include <iostream>
#include <iomanip>
#include <string>
#include <fstream>
#include <cstdlib>
#include <ctime>

int NewRandomNumber (int n);
void MakeQuestion (int n, int& a, int& b, int& atimesb);
bool UserAnswer (int a, int b, int atimesb);
void PrintScore (int numCorrect, int numAsked);

using namespace std;

int main()

{
string name;
int n;
string s;

cout << "Welcome to Multiplication Quiz 1000!" << endl;
cout << "Firstly what is your name?\n" << endl;

cin >> name;

cout << "\nHi " << name <<" !" << endl;
cout << "What difficulty would you like your quiz to be? Enter a value from [4 to 12]

      \nwith 4 being the easiest:\n" << endl;

do
{
cin >> s;
n = atoi(s.c_str());

if ( n >= 4 || n <= 10)

  if ( n < 4 || n > 10)
    {cout << "invalid. try again" << endl;
    }

{cout << "Ok" << endl;
cout << NewRandomNumber (4);
}

}
while ( n >= 4 || n <= 10);

 return 0;

 }

int NewRandomNumber (int n)

{ 

    n = rand()% 10 + 1;

return (n);

 }

void MakeQuestion (int n, int& a, int& b, int& atimesb)

{
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T04:06:47.760

你的`while( n >= 4 || n <= 10)`条件永远是真实的。你应该去 `while (n <= 4 || n >= 10)`。

有几种方法可以解决您的问题，就像它已经发布在这里一样。我会用一个`continue`声明，就像 slacker 说的那样，但一定要改变你的*while*条件，否则它不会起作用。它会是这样的：

```
while (true) {
    cin >> s;
    n = atoi(s.c_str());

    if (n <= 4 || n >= 10) {  
    // handles your exception and goes back to the beggining of the loop
    continue;
    }
    else {
    // the number was correct, so make your magic happen and then...
    break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T03:50:25.783

我想你错过了继续声明。

：

```
// .............

        if ( n < 4 || n > 10)
            {cout << "invalid. try again" << endl;
             continue;
            }

    //.............. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T03:51:30.220

使用标志以这种方式尝试：

```
int flag=0;

do{

cin >> s;
n = atoi(s.c_str());

if ( n < 4 || n > 10)
{
  cout << "invalid. try again";
}
else
{
   flag=1;
   cout<<"OK"
}
}while(flag=0); 
```

自从我用 C++ 编程以来已经有一段时间了，所以语法上可能存在一些小问题。但是这里的逻辑应该没问题。

# cakephp - Cakephp 2.2 在主页显示多个视图

> ID：15491127
> 
> 赞同：0
> 
> 时间：2013-03-19T03:44:18.833
> 
> 标签：cakephp, cakephp-2.1

我是蛋糕新手。我已经用 CRUD 烘焙了一个应用程序，现在我想要设置身份验证。我想在我的主页中显示两个表单，例如 login.ctp 和 add.ctp（这是一个用户注册表单）。但是为了显示 add.ctp，我使用了类似的路由

```
Router::connect('/', array('controller' => 'Users', 'action' => 'add')); 
```

这是正确的方法吗？如何在默认布局中显示特定视图/表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:58:03.707

元素非常适合在不同页面上重复使用“视图”！

将您的代码从 login.ctp 和 add.ctp 移动到 Elements 目录，例如

`Elements/userLogin.ctp`&`Elements/userAdd.ctp`

并参考这些元素，例如`User/login.ctp`：

```
<?php echo $this->element('userLogin'); ?> 
```

现在创建一个`HomeController`, 并给它一个`index`动作, 和`Home/index.ctp`.

在`Home/index.ctp`：

```
<?php echo $this->element('userLogin'); ?>

<?php echo $this->element('userAdd'); ?> 
```

并路由到它：

```
Router::connect('/', array('controller' => 'Home', 'action' => 'index')); 
```

怎么样？

# jsf - 抛出 javax.faces.view.facelets.TagAttributeException：路径无效

> ID：15491135
> 
> 赞同：3
> 
> 时间：2013-03-19T03:46:11.473
> 
> 标签：jsf, facelets, uiinclude

我正在练习 JSF+JPA 并遇到以下异常：

```
19/03/2013 00:04:18 org.apache.catalina.core.StandardWrapperValve invoke
GRAVE: Servlet.service() for servlet [Faces Servlet] in context with path [/K19-Futebol] threw exception [/times.xhtml @11,60 <ui:include src="formulario-novo-time.xhtml"> Invalid path : formulario-novo-time.xhtml] with root cause
javax.faces.view.facelets.TagAttributeException: /times.xhtml @11,60 <ui:include src="formulario-novo-time.xhtml"> Invalid path : formulario-novo-time.xhtml
[...]
at filters.JPAFilter.doFilter(JPAFilter.java:42)
[...] 
```

当我关注 BalusC 链接（[如何使用 JSF 2.0 Facelets 在 XHTML 中包含另一个 XHTML？](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets)）时，我认为问题与 Facelets 无关，但这个过滤器：

```
@WebFilter(servletNames = {"Faces Servlet"})
public class JPAFilter implements Filter {

    private EntityManagerFactory factory;

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        this.factory = Persistence.createEntityManagerFactory("K19-Futebol-PU");
    }

    @Override
    public void destroy() {
        this.factory.close();
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {

        // CHEGADA
        EntityManager manager = this.factory.createEntityManager();
        request.setAttribute("EntityManager", manager);
        manager.getTransaction().begin();
        // CHEGADA

        // FACES SERVLET
        chain.doFilter(request, response);
        // FACES SERVLET

        // SAÍDA
        try {
            manager.getTransaction().commit();
        } catch (Exception e) {
            manager.getTransaction().rollback();
        } finally {
            manager.close();
        }
        // SAÍDA
    }
} 
```

我还询问您的意见，如果以这种方式使用过滤器是一种好的做法，我的意思是，对模型/持久层使用过滤器。

其他需要澄清的类：

```
@Entity
public class Time implements Serializable { //in portuguese 'Time' means Team (e.g.:football Team)

    @Id
    @GeneratedValue
    private Long id;
    private String nome;
    private String tecnico;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getNome() {
        return nome;
    }

    public void setNome(String nome) {
        this.nome = nome;
    }

    public String getTecnico() {
        return tecnico;
    }

    public void setTecnico(String tecnico) {
        this.tecnico = tecnico;
    }
} 
```

托管bean：

```
@ManagedBean
public class TimeBean {

    public Time getTime() {
        return time;
    }

    public void setTime(Time time) {
        this.time = time;
    }

    public void setTimes(List<Time> times) {
        this.times = times;
    }

    private Time time = new Time();
    private List<Time> times;

    public void adiciona() {
        EntityManager manager = this.getManager();
        TimeRepository repository = new TimeRepository(manager);
        if (this.time.getId() == null) {
            repository.adiciona(this.time);
        } else {
            repository.atualiza(this.time);
        }
        this.time = new Time();
        this.times = null;
    }

    public void preparaAlteracao() {
        Map<String, String> params = FacesContext.getCurrentInstance()
                .getExternalContext().getRequestParameterMap();
        Long id = Long.parseLong(params.get("id"));
        EntityManager manager = this.getManager();
        TimeRepository repository = new TimeRepository(manager);
        this.time = repository.procura(id);
    }

    public void remove() {
        Map<String, String> params = FacesContext.getCurrentInstance()
                .getExternalContext().getRequestParameterMap();
        Long id = Long.parseLong(params.get("id"));
        EntityManager manager = this.getManager();
        TimeRepository repository = new TimeRepository(manager);
        repository.remove(id);
        this.times = null;
    }

    public List<Time> getTimes() {
        if (this.times == null) {
            EntityManager manager = this.getManager();
            TimeRepository repository = new TimeRepository(manager);
            this.times = repository.getLista();
        }
        return this.times;
    }

    private EntityManager getManager() {
        FacesContext fc = FacesContext.getCurrentInstance();
        ExternalContext ec = fc.getExternalContext();
        HttpServletRequest request = (HttpServletRequest) ec.getRequest();
        return (EntityManager) request.getAttribute(" EntityManager ");
    }
} 
```

“存储库”类：

```
public class TimeRepository {

    private EntityManager manager;

    public TimeRepository(EntityManager manager) {
        this.manager = manager;
    }

    public void adiciona(Time time) {
        this.manager.persist(time);
    }

    @SuppressWarnings("unchecked")
    public void remove(Long id) {
        Time time = this.procura(id);
        Query query = this.manager.createQuery("select x from Jogador x");
        List<Jogador> jogadores = query.getResultList();
        for (Jogador jogador : jogadores) {
            jogador.setTime(null);
        }
        this.manager.remove(time);
    }

    public Time atualiza(Time time) {
        return this.manager.merge(time);
    }

    public Time procura(Long id) {
        return this.manager.find(Time.class, id);
    }

    @SuppressWarnings("unchecked")
    public List<Time> getLista() {
        Query query = this.manager.createQuery("select x from Time x");
        return query.getResultList();
    }
} 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T11:58:31.627

> javax.faces.view.facelets.TagAttributeException：/times.xhtml @11,60`<ui:include src="formulario-novo-time.xhtml">`无效路径：formulario-novo-time.xhtml

此问题不是由过滤器引起的。它恰好在调用堆栈中，因为它是在 faces servlet 之前调用的。

抛出. [`FaceletContext#includeFacelet()`](http://docs.oracle.com/javaee/6/api/javax/faces/view/facelets/FaceletContext.html#includeFacelet%28javax.faces.component.UIComponent,%20java.lang.String%29)_ `IOException`不幸的是，这`IOException`反过来没有被包装为根本原因，它只是登录`FINE`级别。您可能需要打开`FINE`（或`ALL`）日志才能看到它。另请参阅this answer how to configure logging for JSF: [JSF2 logs with tomcat](https://stackoverflow.com/questions/7363704/jsf2-logs-with-tomcat/7364065#7364065)

最常见的原因之一是文件不在您认为的位置。例如，路径确实无效。`<ui:include>`路径是相对于父文件的路径解析的。您应该努力在`<ui:xxx>`标签中使用绝对路径以避免在重构文件层次结构时出现维护问题，即从路径开始`/`，因此基本上使其相对于 web 内容根目录。例如

```
<ui:include src="/WEB-INF/includes/foo.xhtml" /> 
```

如果您绝对肯定路径是正确的，则另一个可能的原因是所需的包含文件是使用未知或错误的字符编码保存的，这会导致解析 XML 树时出现问题。您需要验证您的编辑器是否已正确配置为将所有文件保存为 UTF-8。

# html - 我们可以使用带有 HTML5 结构的引导响应，例如：

> ID：15491137
> 
> 赞同：-2
> 
> 时间：2013-03-19T03:46:19.033
> 
> 标签：html, html5boilerplate

我们可以使用带有 HTML5 结构标签的引导响应，例如：

```
<header> <nav> <article> <section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:18:17.770

您可以将任何这些标签与 Bootstrap 一起使用。但 David Nguyen 是对的，如果您不使用内置的 Twitter-Bootstrap 标签，那么如果它们没有按照您想要的方式响应，您需要进行补偿。

# java - 查找最长公共子序列：我的方法

> ID：15491138
> 
> 赞同：-1
> 
> 时间：2013-03-19T03:46:31.670
> 
> 标签：java, string, longest-substring

我正在尝试实现 2 个字符串的最长公共子序列。我的方法与这里发布的有点不同。我接近解决方案，但问题不大。请帮我。

我的问题：期望输出：metalica 电流输出：etallica

我的代码是：

```
import java.util.ArrayList;
import java.util.Stack;

public class CommonSubS  {

public static void main(String[] args) {

   ArrayList<Character> ss = new ArrayList<>();
   String s1 = "metallicarules";
   String s2 = "rulmetallicales";
   ArrayList<ArrayList<Character>> one = new ArrayList<>();
   char[] first = s1.toCharArray();
   char[] second = s2.toCharArray();
   int j = 0;
   int current = 0;
   int mainIndex = 0;
   ArrayList<Character> sec = new ArrayList<>();

   // search for each char in second            
   for(int i = 0; i<second.length; i++)
   {    
       j = current;
       // search for each char in first
       while(j<first.length)
       {
           // if match found, add to the arraylist
           if(first[j] == second[i]){

               sec.add(first[j]);
               current = j+1;
               break;
           }
           else 
           {   // if different char occured in between,
               // save current arraylist in one
               // and go forward
               one.add(sec);
               sec = new ArrayList<>();
               j++; 
               current = 0;        
           }

       }
   }

   for(ArrayList<Character> s: one)
   {
       for(Character c: s)
       {
           System.out.print(c);
       }
       System.out.println();    
    }

  }
}

/*
 desired output: metallica
current output: etallica
*/ 
```

我知道还有其他方法，但我尝试使用简单的方法来实现。请指出问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:27:06.843

我仍然不确定您的算法是如何工作的，但我认为 的值`j`太快变得太大了。我每次都将您的`else`块更改为重置为 0，现在代码会产生所需的“metallica”输出。`j`

```
 else 
           {   // if different char occured in between,
               // save current arraylist in one
               // and go forward
               one.add(sec);
               sec = new ArrayList<>();
               j = 0; // Start checking from the beginning of the string
               current = 0;
               break; // This will exit the while loop and move on to the next value of i
           } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:41:01.213

我认为问题在于您的 i 被递增并将第二个单词的 metala 中的 m 与第一个单词的最后一个 e 进行比较，因此下一次迭代它将从下一个字母开始，即 e （第二个单词的） ，这就是为什么你一开始没有得到 m 的原因。也许如果你每次结束一个公共子序列时都使用 i = i-1 。

# jquery - MVC4表单序列化到控制器不起作用

> ID：15491139
> 
> 赞同：4
> 
> 时间：2013-03-19T03:46:35.547
> 
> 标签：jquery, ajax, asp.net-mvc, razor, asp.net-mvc-4

我已经尝试了几乎所有方法来使用 ajax 将表单发送回我的控制器。

我已将模型简化为字符串。

*   ajax 正在正确提取所有表单数据。
*   我也有 serilaizeArray() 。

我的名为模型的对象每次都是空的（其他参数映射就好了，即页面，排序......）。我错过了什么？

阿贾克斯：

```
...
var model = $('#advancesearchform').serialize();
var request = $.ajax({
    type: "POST",
    url: "/DAM/Home/_ImageSearchResult",
    cache: false,
    traditional: true,
    contentType: 'application/json; charset=utf-8',
    dataType: 'json',
    data: JSON.stringify({
        page: page,
        itemsperpage: itemsperpage,
        sort: sort,
        sortdir: sortdir,
        model: model
    }),
    success: function (data) {
        $('#imagesearchresults').html(data);
    }
}); 
```

JSON.stringfy :
{\"page\":null,\"itemsperpage\":8,\"sort\":\"Project\",\"sortdir\":\"ASC\",\"model\ ":\"FileName=123&OriginalFileName=sas&Height=asas&Width=asas&DepartmentId=9b4463cd-c184-e211-9244-005056887208&ClassId=28de9d15-c284-e211-9244-005056887208\"}

控制器：

```
[HttpPost]
public PartialViewResult _ImageSearchResult(int? page, int itemsperpage, string sort, string sortdir, AdvanceSearchFilters model)
{
} 
```

模型：

```
public class AdvanceSearchFilters
{
    public string FileName { get; set; }
    public string OriginalFormat { get; set; }
    public string Width { get; set; }
    public string Height { get; set; }
    public string MediaSource { get; set; }
    public string DepartmentId { get; set; }
    public string ClassId { get; set; }
    public string ThemeId { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-28T21:57:51.570

The problems is that you are sending data in the incorrect format. When you call $('#advancesearchform').serialize(); the data is formatted as a query string, but you are telling ajax to send JSON. With this:

```
{
 "page":null,
 "itemsperpage":8,
 "sort":"Project",
 "sortdir":"ASC",
 "model":"FileName=123&OriginalFileName=sas&Height=asas&Width=asas&DepartmentId=9b4463cd-    c184-e211-9244-005056887208&ClassId=28de9d15-c284-e211-9244-005056887208"
} 
```

You are sending "model" as a string. What you need to do is either convert your advancesearchform atributes to a json format and attach them to the current JSON or send everything as a query string.

For the first one, a quick soulution would be

```
$.ajax({
  type: "POST",
  url: "/DAM/Home/_ImageSearchResult",
  cache: false,
  traditional: true,
  contentType: 'application/json; charset=utf-8',
  dataType: 'json',
  data: JSON.stringify({
    page: page,
    itemsperpage: itemsperpage,
    sort: sort,
    sortdir: sortdir,
    model: {
        FileName: $("#FileName").val(),
        OriginalFormat: $("#OriginalFormat").val()
        and so on... 
```

for the second one, you could do something like

```
$.ajax({
  type: "POST",
  url: "/DAM/Home/_ImageSearchResult",
  data: $('#advancesearchform').serialize() + "&page=" + page + "&itemsperpage=" + itemsperpage + "&sort=" + sort + "&sortdir=" +sortdir 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:37:28.740

查看您的代码，`AdvanceSearchFilters`该类有一个名为的属性`OriginalFormat`，而序列化表单的值为**OriginalFileName**

另外我建议从非 ajax 方法开始。如果您可以在非 js 环境中正确回发值，那么您就知道问题与 ajax 相关。

如果元素上的名称值不正确，则模型绑定器无法正确映射它们。例如`AdvanceSearchFilters.Height`，相对于`Height`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-05T23:27:28.640

首先，尝试查看这里：[JSON.Stringify 示例](http://jsfiddle.net/ifandelse/6Yj5h/)
或者，您可以使用 $("form").serialize() 来序列化您的数据。

```
$.ajax({ 
url: "....",
method: "POST",
data: $("form").serialize()
}) 
```

# mysql - 当引用键不可用时，mysql 不限制要插入的条目

> ID：15491142
> 
> 赞同：2
> 
> 时间：2013-03-19T03:46:52.827
> 
> 标签：mysql, sql

我对 sql 语句有疑问。

我有三个表：worker、HasSkill 和 HasTime。HasSkill 和 HasTime 有一个指向 Worker 表的外键。

（我将该属性作为主键的一部分，如果 w_id 不存在于 Worker 表中，我还想限制插入）

以下是我的sql语句。但是，插入限制不起作用。希望有人能给我一些建议。非常感谢。

```
 1 CREATE TABLE IF NOT EXISTS Worker
  2 (
  3 id INTEGER NOT NULL AUTO_INCREMENT,
  4 name VARCHAR(30), 
  5 email VARCHAR(30), 
  6 address VARCHAR(255), 
  7 hour_rate INTEGER, 
  8 PRIMARY KEY(id)
  9 ); 
 10 
 11 CREATE TABLE IF NOT EXISTS HasSkill
 12 (
 13 w_id INTEGER NOT NULL, 
 14 skill_name VARCHAR(255), 
 15 PRIMARY KEY(w_id, skill_name), 
 16 FOREIGN KEY(w_id) REFERENCES Worker(id) ON DELETE CASCADE
 17 ); 
 18 
 19 CREATE TABLE IF NOT EXISTS HasTime
 20 (
 21 w_id INTEGER NOT NULL, 
 22 day_of_week TINYINT NOT NULL, 
 23 start_time  TIME NOT NULL, 
 24 end_time TIME NOT NULL, 
 25 PRIMARY KEY(w_id, day_of_week, start_time, end_time), 
 26 FOREIGN KEY(w_id) REFERENCES Worker(id) ON DELETE CASCADE
 27 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:50:02.387

最常见的原因是表使用了 MyISAM 存储引擎。尽管声明了外键约束，MyISAM 解析但忽略约束，并且不能强制引用完整性。

使用`SHOW TABLE STATUS LIKE 'Has%'`并查看“引擎”字段报告的内容。

* * *

您可以使用 table 选项指定存储引擎：

```
CREATE TABLE HasTime ( . . . ) ENGINE=InnoDB; 
```

这`TYPE=InnoDB`是过时的语法。它被认为具有向后兼容性，但首选语法是`ENGINE=InnoDB`.

从 MySQL 5.5 开始，默认的存储引擎应该是 InnoDB，所以如果你不指定引擎，应该在 InnoDB 中创建表。可以在服务器配置文件中更改此默认设置，但这不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:29:08.820

感谢@Bill Karwin。

因为我使用的是 mysql。

在每个创建语句的末尾添加 TYPE=InnoDB。

像这些：

```
CREATE TABLE IF NOT EXISTS HasTime
(
    w_id INTEGER NOT NULL, 
    day_of_week TINYINT NOT NULL, 
    start_time  TIME NOT NULL, 
    end_time TIME NOT NULL, 
    PRIMARY KEY(w_id, day_of_week, start_time, end_time), 
    FOREIGN KEY(w_id) REFERENCES Worker(id) ON DELETE CASCADE
) TYPE=InnoDB; 
```

参考[http://dev.mysql.com/doc/refman/5.6/en/storage-engines.html](http://dev.mysql.com/doc/refman/5.6/en/storage-engines.html)

# javascript - AngularJS：嵌套循环、数据绑定和基本行为的正确设计

> ID：15491146
> 
> 赞同：2
> 
> 时间：2013-03-19T03:47:11.780
> 
> 标签：javascript, angularjs

一般来说，我是 AngularJS 和 MVC 框架的新手，所以我希望有人能帮上大忙。我有一个用例，其中我有一个对象数组，每个对象都包含一个子数组。我需要将顶级对象显示为单选按钮，将它们的子对象显示为复选框。我有嵌入 ng-repeats 的基本视图渲染，但我需要添加一些简单的行为。这个想法是，如果未选中其父复选框，则子复选框将被禁用（灰显）。因此，一旦选择了不同的单选按钮，所有其他复选框都将被禁用，除了其子项。我可以在这里打一些 jquery 来做到这一点，但我相信这对于纯 AngularJS 是可能的。

HTML：

```
<div ng-controller="OrgListCtrl">
    <div ng-repeat="org in orgs">
        <label><input type="radio" name="temp"/> {{org.Name}}</label>
        <section ng-repeat="child in org.children">
            <label><input type="checkbox" class="orgCheckbox"/> {{child.Name}}</label>
        </section>
        <hr/>
    </div>
</div> 
```

Javascript：

```
function OrgListCtrl($scope) {
    $scope.orgs = [
        {
            "Id" : "ada7a436",
            "Name" : "Organization 1",
            "children" : [{
                    "Id" : "aa556aea",
                    "Name" : "Org 1 Location 1",
                    "children" : []
                }, {
                    "Id" : "0dd8d34a",
                    "Name" : "Org 1 Location 2",
                    "children" : []
                }, {
                    "Id" : "d8315566",
                    "Name" : "Org 1 Location 3",
                    "children" : []
                }
            ]
        }, {
            "Id" : "5ab3e566",
            "Name" : "Organization 2",
            "children" : [{
                    "Id" : "5cae66aa",
                    "Name" : "Org 2 Location 1",
                    "children" : []
                }, {
                    "Id" : "16b8ec35",
                    "Name" : "Org 2 Location 2",
                    "children" : []
                }, {
                    "Id" : "53adb4ba",
                    "Name" : "Org 2 Location 3",
                    "children" : []
                }
            ]
        }
    ];
} 
```

[http://jsfiddle.net/CrLRN/](http://jsfiddle.net/CrLRN/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:30:10.857

[正如在此](https://stackoverflow.com/questions/12597138/angularjs-radio-buttons)StackOverflow 问答中所观察到的，您需要让单选按钮更新共享模型，然后您可以将复选框的禁用状态基于该模型的状态。因此，在您的控制器中，您可以在设置 $scope.orgs 之前添加此行：

```
$scope.selected = {id: ''}; 
```

接下来，更改您的单选按钮标签，使其如下所示：

```
<input type="radio" name="temp" ng-model="selected.id" value="{{org.Id}}"/> 
```

最后，将 ng-disabled 指令添加到您的复选框中：

```
<input type="checkbox" class="orgCheckbox" ng-disabled="selected.id != org.Id"/> 
```

那应该这样做。

编辑：我的原始代码有一个简单的模型值，“selectedId”，直接放在 $scope 上，这当然违反了“在你的 ng-models 中总是有一个点”的规则，如[Noob Handbook](https://github.com/angular/angular.js/wiki/Noob-Handbook)所述。现在更正，以便选择是模型值是辅助“id”属性的对象。

# android - Android Dev：从存储在 SD 卡上的临时文件创建位图，设置 ImageView，然后将其存储在本地

> ID：15491149
> 
> 赞同：0
> 
> 时间：2013-03-19T03:47:33.297
> 
> 标签：android, bitmap, android-sdcard, fileinputstream

因此，由于仅从 android.media.action.IMAGE_CAPTURE 获取数据的质量问题，我显然需要调用活动，保存一个本地临时文件，然后我可以从中创建位图。这个Bitmap会被裁剪成一个正方形，设置成一个ImageView，然后存储在本地；但是，我遇到了一些问题。一切（现在不包括裁剪）都可以设置图像（它返回一个空白图像）并将其存储在内部，此时它会崩溃。我尝试使用文件管理器在 SD 卡上查找文件，但该文件夹甚至没有显示，所以我不知道该文件是否真的被创建。任何想法我做错了什么？编码：

```
private static final String TAG = "AddEdit";
private final static String FOLDER_NAME = "com.ex.beerlog/Image/";
private Uri selectedImageUri = null;
private final static int CAPTURE_IMAGE_CALLBACK = 1;

switch (arg0.getId()) {
            case R.id.imageView1:

                File photo = null;
                Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");

                if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED)) {
                    photo = new File(android.os.Environment.getExternalStorageDirectory(), FOLDER_NAME + File.separator
                            + "temp.png");
                    Log.w(TAG, "*******Photo path set from Enviro*********");
                } else {
                    photo = new File(getCacheDir(), FOLDER_NAME + File.separator + "temp.png");
                    Log.w(TAG, "*******photo set from cache*********");
                }
                if (photo != null) {
                    Log.w(TAG, "*******Photo is not null*********");
                    intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
                    intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
                    selectedImageUri = Uri.fromFile(photo);
                    Log.w(TAG, "*******from imageUri=" + selectedImageUri + "*********");
                    startActivityForResult(intent, CAPTURE_IMAGE_CALLBACK);
                }
 break;

  protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);

        switch (requestCode) {
            case CAPTURE_IMAGE_CALLBACK:
                if (resultCode == RESULT_OK) {
                    String path = selectedImageUri.toString();
                    Log.w(TAG, "*****path set =" + path + "******");
                    BitmapFactory.Options options = new BitmapFactory.Options();
                    Log.w(TAG, "*****Bimapfactory options set******");
                    options.inPreferredConfig = Bitmap.Config.ARGB_8888;
                    Log.w(TAG, "****Options defined********");
                    bmp = BitmapFactory.decodeFile(path, options);
                    Log.w(TAG, "*****Bmp is set ==> crop******");

                    brewPhoto.setImageBitmap(bmp);
                    Log.w(TAG, "******************Image is set to ButtonImage**********************");
                    // Store image
                    FileOutputStream fos;
                    Log.w(TAG, "********FileOutPutStream created*************");
                    try {
                        fos = openFileOutput(cDate, Context.MODE_PRIVATE);
                        Log.w(TAG, "********FileOutPutStream defined*************");
                        bmp.compress(Bitmap.CompressFormat.PNG, 100, fos);
                        Log.w(TAG, "********bitmap compressed*************");
                        fos.close();
                        Log.w(TAG, "*****FOS closed**********");
                    } catch (FileNotFoundException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
                break;
        }
    } 
```

这是我收到的错误日志：

```
03-18 21:24:50.325: W/AddEdit(8208): *****path set =file:///storage/sdcard0/com.ex.beerlog/Image/temp.png******
03-18 21:24:50.325: W/AddEdit(8208): *****Bimapfactory options set******
03-18 21:24:50.325: W/AddEdit(8208): ****Options defined********
03-18 21:24:50.325: I/System.out(8208): Not a DRM File, opening notmally
03-18 21:24:50.325: W/AddEdit(8208): *****Bmp is set ==> crop******
03-18 21:24:50.325: W/AddEdit(8208): ******************Image is set to ButtonImage**********************
03-18 21:24:50.325: W/AddEdit(8208): ********FileOutPutStream created*************
03-18 21:24:50.325: W/AddEdit(8208): ********FileOutPutStream defined*************
03-18 21:24:50.335: W/dalvikvm(8208): threadid=1: thread exiting with uncaught exception (group=0x41314438)
03-18 21:24:50.335: E/AndroidRuntime(8208): FATAL EXCEPTION: main
03-18 21:24:50.335: E/AndroidRuntime(8208): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=null} to activity {com.ex.beerlog/com.ex.beerlog.AddEdit}: java.lang.NullPointerException
03-18 21:24:50.335: E/AndroidRuntime(8208):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3183)
03-18 21:24:50.335: E/AndroidRuntime(8208):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3226)
03-18 21:24:50.335: E/AndroidRuntime(8208):     at android.app.ActivityThread.access$1200(ActivityThread.java:139)
03-18 21:24:50.335: E/AndroidRuntime(8208):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1272)
03-18 21:24:50.335: E/AndroidRuntime(8208):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-18 21:24:50.335: E/AndroidRuntime(8208):     at android.os.Looper.loop(Looper.java:137)
03-18 21:24:50.335: E/AndroidRuntime(8208):     at android.app.ActivityThread.main(ActivityThread.java:4918)
03-18 21:24:50.335: E/AndroidRuntime(8208):     at java.lang.reflect.Method.invokeNative(Native Method)
03-18 21:24:50.335: E/AndroidRuntime(8208):     at java.lang.reflect.Method.invoke(Method.java:511)
03-18 21:24:50.335: E/AndroidRuntime(8208):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
03-18 21:24:50.335: E/AndroidRuntime(8208):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
03-18 21:24:50.335: E/AndroidRuntime(8208):     at dalvik.system.NativeStart.main(Native Method)
03-18 21:24:50.335: E/AndroidRuntime(8208): Caused by: java.lang.NullPointerException
03-18 21:24:50.335: E/AndroidRuntime(8208):     at com.ex.beerlog.AddEdit.onActivityResult(AddEdit.java:329)
03-18 21:24:50.335: E/AndroidRuntime(8208):     at android.app.Activity.dispatchActivityResult(Activity.java:5232)
03-18 21:24:50.335: E/AndroidRuntime(8208):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3179)
03-18 21:24:50.335: E/AndroidRuntime(8208):     ... 11 more 
```

如您所见，fileInputSteam 已创建，但在尝试存储图像时崩溃。我已经删除了这段代码，并且设置为 ImageView 的图像是空白的（透明的）。所以我假设它崩溃了，因为实际上什么都没有？我试图在清单中设置权限以允许访问 SD 卡。另请注意，我正在我的 Galaxy sIII 上进行测试，并启用了调试器。我还取消了 SD 卡的保护并拔下手机以确保 SD 卡可用，但每次都是相同的结果。

再次感谢。你们这里的人都非常擅长这些东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:33:57.683

好的，所以我发现了我的问题，希望这能帮助像我这样的其他人解决这个问题。

总而言之，如果您想从您的 CAMERA 意图中收集高质量信息，您必须（根据我的发现）将图像保存到 SD 卡。我的应用程序返回一个空白（我认为是透明的）图像，因为该图像从未存在过。 **您必须创建文件路径，这不是一个自动过程。**

我通过设置一个静态路径来实现这一点，并在该位置创建了一个 temp.png：

```
File photo = null;
File path = new File("storage/sdcard0/Android/data/com.ex.beerlog/");
String pathstring = path.toString();
if (!path.exists()) {
    path.mkdirs();
    Log.w(TAG, "*******Photo Directory Created*********");
} else { // do nothing } 
```

最后，我仍然想在内部存储我拍摄的照片，但图像大小会导致内存不足 (OOM) 异常。所以为了解决这个问题，我创建了一个矩阵，将图像缩小到 350px 宽（实际上是我的应用程序需要的最大尺寸图像）。**您会注意到“matrix.postrotate(90)”，这是因为我的照片会返回到他们这边。

```
 private Bitmap cropImage(Bitmap bmp2) {
     // TODO Auto-generated method stub
     int width = bmp2.getWidth();
     int height = bmp2.getHeight();
     float scale = (float) 350/bmp.getHeight();

     Log.w(TAG, "*********Image Wt=" + width + ", Ht=" + height + " scale" + scale + "*********");

     Matrix matrix = new Matrix();
     matrix.postScale(scale, scale);
     matrix.postRotate(90);

     // recreate the new Bitmap
     Bitmap resizedBitmap = Bitmap.createBitmap(bmp2, 0, 0, width, height, matrix, true);
     int bmpHtWidth = resizedBitmap.getWidth();
     int bmpHeight = resizedBitmap.getHeight();
     int bmpTop = (bmpHeight - bmpHtWidth) / 2;
     Log.w(TAG, "*********resizedImage HtWt=" + bmpHtWidth + ", Ht=" + bmpHeight + ", top=" + bmpTop + "*********");

     return resizedBitmap;
 } 
```

这些基本上回答了我上面的问题。希望它对其他人也有帮助！

编辑：哦，最后我遇到了一个问题，因为我在活动之间拍了一张疯狂的照片，导致 OutOfMemoryException。为了解决这个问题，我在活动关闭并移至下一个活动之前使用了 Bitmap.recycle() 函数。这将尝试在活动之间释放一些内存。

# xml - 分别对负值和正值求和

> ID：15491152
> 
> 赞同：2
> 
> 时间：2013-03-19T03:47:50.400
> 
> 标签：xml, xslt, xpath, sum

我试图在 XSL v1.0 中分别总结正值和负值。

我有这样的 XML：

```
<Billing_Statements>
    <Statement_Details>
        <Invoice_Details>
            <Meter_Details>
                <Consumption>XX</Consumption>
            </Meter_Details>
            <Meter_Details>
                <Consumption>XX</Consumption>
            </Meter_Details>
        </Invoice_Details>
        <Invoice_Details>
            <Meter_Details>
                <Consumption>XX</Consumption>
            </Meter_Details>
            <Meter_Details>
                <Consumption>XX</Consumption>
            </Meter_Details>
        </Invoice_Details>
    </Statement_Details>
</Billing_Statements> 
```

其中 XX 可以是正值或负值。

我需要首先输出每个 Statement_Details 的所有 Invoice_Detail 节点的正值总和，然后输出负值总和。

目前我已经尝试过：

```
<xsl:value-of select="sum(Invoice_Details/Meter_Details[Consumption &lt; 0])" /> 
```

以及这个的许多变体，无论如何它们都会返回一个总和`0`。

从 Meter_Details 节点收集所有其他信息时，我的 for-each 部分可以完美地工作，如下所示：

```
<xsl:for-each select="Invoice_Details/Meter_Details[Consumption &lt; 0]"> 
```

并且只选择具有负值或正值的节点。为什么这对 sum() 不起作用？

我当然在这里与 XSL 作斗争，并希望能得到任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:00:56.760

**使用**：

```
sum(*/*/*[. >=0]) 
```

**和**

```
sum(*/*/*[not(. >=0)]) 
```

**这是一个使用这两个相对 XPath 表达式的完整转换：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="Statement_Details">

Statement <xsl:value-of select="position()"/>
  <xsl:apply-templates/>
 </xsl:template>

 <xsl:template match="Invoice_Details">
  Invoice <xsl:value-of select="position()"/>
    Positive: <xsl:value-of select="sum(*/*[. >=0])"/>
    Negative: <xsl:value-of select="sum(*/*[not(. >=0)])"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档**（具有所需结构）时：

```
<Billing_Statements>
    <Statement_Details>
        <Invoice_Details>
            <Meter_Details>
                <Consumption>-3</Consumption>
            </Meter_Details>
            <Meter_Details>
                <Consumption>5</Consumption>
            </Meter_Details>
        </Invoice_Details>
        <Invoice_Details>
            <Meter_Details>
                <Consumption>8</Consumption>
            </Meter_Details>
            <Meter_Details>
                <Consumption>-12</Consumption>
            </Meter_Details>
        </Invoice_Details>
        <Invoice_Details>
            <Meter_Details>
                <Consumption>22</Consumption>
            </Meter_Details>
            <Meter_Details>
                <Consumption>3</Consumption>
            </Meter_Details>
        </Invoice_Details>
        <Invoice_Details>
            <Meter_Details>
                <Consumption>4</Consumption>
            </Meter_Details>
            <Meter_Details>
                <Consumption>-5</Consumption>
            </Meter_Details>
        </Invoice_Details>
    </Statement_Details>
    <Statement_Details>
        <Invoice_Details>
            <Meter_Details>
                <Consumption>-13</Consumption>
            </Meter_Details>
            <Meter_Details>
                <Consumption>25</Consumption>
            </Meter_Details>
        </Invoice_Details>
        <Invoice_Details>
            <Meter_Details>
                <Consumption>77</Consumption>
            </Meter_Details>
            <Meter_Details>
                <Consumption>-15</Consumption>
            </Meter_Details>
        </Invoice_Details>
        <Invoice_Details>
            <Meter_Details>
                <Consumption>31</Consumption>
            </Meter_Details>
            <Meter_Details>
                <Consumption>-3</Consumption>
            </Meter_Details>
        </Invoice_Details>
        <Invoice_Details>
            <Meter_Details>
                <Consumption>-87</Consumption>
            </Meter_Details>
            <Meter_Details>
                <Consumption>54</Consumption>
            </Meter_Details>
        </Invoice_Details>
    </Statement_Details>
</Billing_Statements> 
```

**产生了想要的正确结果：**

```
Statement 1
  Invoice 1
    Positive: 5
    Negative: -3
  Invoice 2
    Positive: 8
    Negative: -12
  Invoice 3
    Positive: 25
    Negative: 0
  Invoice 4
    Positive: 4
    Negative: -5

Statement 2
  Invoice 1
    Positive: 25
    Negative: -13
  Invoice 2
    Positive: 77
    Negative: -15
  Invoice 3
    Positive: 31
    Negative: -3
  Invoice 4
    Positive: 54
    Negative: -87 
```

# ruby-on-rails - 在 PostGresql 中思考 Sphinx 没有将属性从 :decimal 转换为 :float

> ID：15491154
> 
> 赞同：0
> 
> 时间：2013-03-19T03:48:11.783
> 
> 标签：ruby-on-rails, sphinx, thinking-sphinx

Thinking_Sphinx 有点麻烦。到白衣：

我有一个餐厅模型和一个具有以下关系的评论模型：

```
Restaurant Has_many Reviews through relationships
Review belongs_to Restaurant through relationships 
```

每条评论都有一个十进制系统的评分，增量为 0.5。

我在 Thinking Sphinx 中搜索餐馆，并将评论评分设置为如下属性（我这样做是为了按评分值的降序排列结果）：

```
has reviews.rating, :as => :review_rating, :type => :float 
```

这是我在终端中索引 Thinking Sphinx 时遇到的错误：

```
indexing index 'restaurant_core'...
ERROR: source 'restaurant_core_0': expected attr type ('uint' or 'timestamp' or 'bigint') in sql_attr_multi, got 'float review_rating from field'.
ERROR: index 'restaurant_core': failed to configure some of the sources, will not index. 
```

有趣的故事：当我将 :type 更改为 :integer 时，如下：

```
has reviews.rating, :as => :review_rating, :type => :integer 
```

我没有收到错误。

我正在运行 Ruby on Rails 3.2.11、Thinking Sphinx 3.0.1、Ubuntu 12.10

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:06:53.620

您的问题是一个`Restaurant`有很多`Review`s，但您将索引`reviews.rating`作为单个值。您应该更改索引以计算评论的一些汇总（例如平均值、中位数、最高或最低），或使用多值属性 (MVA)。但是，MVA 只能是整数、时间戳或布尔值。

例如，要将评级的平均值作为属性值，应该可以这样：

```
has "AVG(reviews.rating)", :as => :review_rating, :type => :float 
```

当然，确切的代码取决于您的表名等。`sphinx.conf`如果遇到问题，请检查生成的文件。

# ruby-on-rails - Railstutorial.org：卡在 9.2.2 中（需要正确的用户）

> ID：15491155
> 
> 赞同：1
> 
> 时间：2013-03-19T03:48:26.957
> 
> 标签：ruby-on-rails, railstutorial.org

我通过了第 9.2.1 章末尾的所有测试（需要登录用户）。但是我在第 9.2.2 章末尾的测试（需要正确的用户）失败了。事实上，有 21 次失败。

我的源代码位于[https://github.com/jhsu802701/ror-sample/tree/updating-users](https://github.com/jhsu802701/ror-sample/tree/updating-users)。

错误消息列表太长，无法在此处完整打印，但我已将它们上传到此项目的 GitHub 存储库，网址为[https://raw.github.com/jhsu802701/ror-sample/updating-users/ERRORS -9_2_2.txt](https://raw.github.com/jhsu802701/ror-sample/updating-users/ERRORS-9_2_2.txt)。

第 9.2.1 章末尾的所有测试都通过了。在第 9.2.2 章结束时，有 21 次失败。我已经多次通过 9.2.2，但我仍然收到 21 个错误。所以我猜我一定是在早些时候犯了这个错误，但是直到 9.2.2 这个错误才变得相关。（我在第 8 章遇到了一个问题，这是由于我在第 5 章中犯的一个错误，直到 3 章后才变得相关。我只是想出了如何解决它，因为其他人在 StackOverflow 上发布了同样的问题.)

编辑：完整上传错误消息的副本并提供指向它们的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:34:56.410

我自己刚刚完成了教程，所以我希望我所经历的一些可以帮助你:-)

根据您收到的错误：

失败/错误：登录用户 NoMethodError：未定义的方法 `current_user=' for #

我认为您的 SessionsHelper 模块中缺少此内容：

```
def current_user=(user)
  @current_user = user
end 
```

这个函数应该在那里，所以我们可以指出当前用户是谁

HTH，弥敦道

# r - knitr：在循环中调用 ggplot2 函数在伴随某些其他绘图函数时不会绘图

> ID：15491160
> 
> 赞同：7
> 
> 时间：2013-03-19T03:49:14.803
> 
> 标签：r, ggplot2, knitr

我不确定这是一个真正的错误还是我遗漏了一些东西，但它就在这里。我有一个要循环调用的 ggplot 函数 (plot_data)。我已经将该函数包含在它自己的块中。在第一种情况下（标题为“works”的块），在循环中调用该函数可以正常工作，在这种情况下，plot_data 函数后跟一个条形图。然而，在第二种情况下，plot_data() 函数后跟一个热图，在这种情况下，热图奇怪地抑制了 plot_data 函数。无论是否围绕 plot_data 函数调用 plot() 或 print() 都会发生这种情况。

有没有办法让 ggplots 与 knitr 一起工作？函数调用到底是如何抑制先前函数调用的输出的？

以下代码为我重现了该错误：

```
[preamble omitted]
\begin{document}

<<setup, eval=TRUE, echo=FALSE, cache=FALSE>>=
plot_data <- function(data) {
    require(ggplot2)
    require(reshape)
    d.melt <- melt(data)
    ggplot(data=d.melt, aes(x=X2, y=value, group=X1, colour=X1)) + geom_line(size=.5) +
          scale_x_discrete("") +
          scale_y_continuous("Value")
    }
@

<<works, echo=FALSE, results='asis', out.width='.3\\linewidth', dev='pdf', cache=TRUE >>=
set.seed(10010)
data <- matrix(runif(10000, 1,100), ncol=100)
for (i in 1:10) {
    ind <- sample(1:100, 10)
    plot(plot_data(data[ind,]))
    barplot(ind)
}
@

<<doesnt-work, echo=FALSE, results='asis', out.width='.3\\linewidth', dev='pdf', cache=TRUE >>=
set.seed(10010)
data <- matrix(runif(10000, 1,100), ncol=100)
for (i in 1:10) {
    ind <- sample(1:100, 10)
    plot(plot_data(data[ind,]))  # calling print instead of plot doesn't work either
    heatmap(data[ind,]  )
}
@

\end{document} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:08:05.390

我想你问了很多`knitr`。在 R 中对齐基本图形和网格图形不是很容易和具有挑战性。我不知道如何`knitr`使用（包 latex `graphics`），但我认为当你调用 时`heatmap`，它会打印在网格的同一个位置阴谋。

在调用基本图形之前添加一个`plot.new`对我来说很好：

```
<<doesnt-work, fig.show='hold',out.width='.3\\linewidth'>>=
  set.seed(10010)
data <- matrix(runif(10000, 1,100), ncol=100)
for (i in 1:3) {
  ind <- sample(1:100, 10)
  print(plot_data(data[ind,]))  # calling print instead of plot doesn't work either
  plot.new()
  heatmap(data[ind,]  )
 }
@ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-15T22:12:13.237

我认为你的函数有错误，融化的变量已经关闭。这对我有用：

```
library(ggplot2)
library(reshape2)
set.seed(10010)
data <- matrix(runif(10000, 1,100), ncol=100)
for (i in 1:3) {
   ind <- sample(1:100, 10)

   d.melt <- melt(data[ind,])
   p<-ggplot(data=d.melt, aes(x=Var1, y=Var2, group=Var1, colour=Var1)) + 
      geom_line(size=.5) +
      scale_x_discrete("") +
      scale_y_continuous("Value")

   print(p)  
   plot.new()
   heatmap(data[ind,]  )
} 
```

# iphone - 这个 NSPersistentStoreCoordinator 没有持久存储。它无法执行保存操作

> ID：15491162
> 
> 赞同：4
> 
> 时间：2013-03-19T03:49:38.920
> 
> 标签：iphone, ios, core-data

我已阅读[我的 XCode 数据模型发生任何更改后，我不断收到“保存操作失败”](https://stackoverflow.com/questions/1091228/i-keep-on-getting-save-operation-failure-after-any-change-on-my-xcode-data-mod)

错误代码：

```
 This NSPersistentStoreCoordinator has no persistent stores.  It cannot perform a save operation.
 (null)
 (
0   CoreFoundation                      0x36aeb8a7 __exceptionPreprocess + 186
1   libobjc.A.dylib                     0x32f02259 objc_exception_throw + 32
2   CoreData                            0x353a8fe7 -[NSPersistentStoreCoordinator executeRequest:withContext:error:] + 282
3   CoreData                            0x35411287 -[NSManagedObjectContext save:] + 522
4   myshine                             0x001a1e59 _mh_execute_header + 1293913
5   myshine                             0x0006cacd _mh_execute_header + 27341
6   myshine                             0x000aa829 _mh_execute_header + 280617
7   myshine                             0x000abe07 _mh_execute_header + 286215
8   myshine                             0x0009a12b _mh_execute_header + 213291
9   myshine                             0x00099fb3 _mh_execute_header + 212915
10  myshine                             0x0009ad9b _mh_execute_header + 216475
11  myshine                             0x000978a7 _mh_execute_header + 202919
12  CoreFoundation                      0x36a80533 _signalEventSync + 74
13  CoreFoundation                      0x36a804e1 _cfstream_solo_signalEventSync + 76
14  CoreFoundation                      0x36a80353 _CFStreamSignalEvent + 374
15  CFNetwork                           0x3367b121 _ZN12SocketStream40dispatchSignalFromSocketCallbackUnlockedEP24SocketStreamSignalHolder + 24
16  CFNetwork                           0x33607bb9 _ZN12SocketStream14socketCallbackEP10__CFSocketmPK8__CFDataPKv + 112
17  CFNetwork                           0x33607b39 _ZN12SocketStream22_SocketCallBack_streamEP10__CFSocketmPK8__CFDataPKvPv + 64
18  CoreFoundation                      0x36ac22ef __CFSocketPerformV0 + 638
19  CoreFoundation                      0x36abfad3 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 14
20  CoreFoundation                      0x36abf29f __CFRunLoopDoSources0 + 214
21  CoreFoundation                      0x36abe045 __CFRunLoopRun + 652
22  CoreFoundation                      0x36a414a5 CFRunLoopRunSpecific + 300
23  CoreFoundation                      0x36a4136d CFRunLoopRunInMode + 104
24  GraphicsServices                    0x34c08439 GSEventRunModal + 136
25  UIKit                               0x34ceacd5 UIApplicationMain + 1080
26  myshine                             0x00069f0b _mh_execute_header + 16139
27  myshine                             0x000686b0 _mh_execute_header + 9904 
```

)

我的代码：

```
+ (CoreDataManager *)sharedInstance {
    @synchronized(self) {
        if (instance == nil) {
            instance = [[CoreDataManager alloc] init];
        }
    }
    return instance;
}

-(NSManagedObjectModel *)getmanagedObjectModel:(NSManagedObjectModel *)managedobjectModel
{
    if (managedobjectModel != nil) {
        return managedobjectModel;
    }
   // managedobjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"PushNoticationModel" withExtension:@"momd"];
    managedobjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return managedobjectModel;
}

-(NSPersistentStoreCoordinator *)persistentStoreCoordinator:(NSString*)modelName
{
    if (persistentStoreCoordinator != nil) {
        return persistentStoreCoordinator;
    }

    NSString *docs = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
    @"PushNoticationModal.sqlite"
    NSURL *storeUrl = [NSURL fileURLWithPath:[docs stringByAppendingPathComponent:modelName]];
    NSError *error = nil;
    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                             [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

    persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc]initWithManagedObjectModel:[self getmanagedObjectModel:self.managedObjectModel]];

    if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:options error:&error]) {
        NSLog(@"persistentStoreCoordinator Error: %@,%@",error,[error userInfo]);
    }

    return persistentStoreCoordinator;
}

-(NSManagedObjectContext *)managedObjectContext:(NSString*)modelName
{
    if (managedObjectContext != nil) {
        return managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator =[self persistentStoreCoordinator:modelName];

    if (coordinator != nil) {
        managedObjectContext = [[NSManagedObjectContext alloc]init];
        [managedObjectContext setPersistentStoreCoordinator:coordinator];
    }

    return managedObjectContext;
}

-(NSManagedObjectContext *)managedObjectContext:(NSString*)modelName managedObjectContext:(NSManagedObjectContext *)managedContext
{
    if (managedContext != nil) {
        return managedContext;
    }

    NSPersistentStoreCoordinator *coordinator =[self persistentStoreCoordinator:modelName];

    if (coordinator != nil) {
        managedContext = [[NSManagedObjectContext alloc]init];
        [managedContext setPersistentStoreCoordinator:coordinator];
    }

    return managedContext;
} 
```

我用过

```
-(NSManagedObjectContext *)getManagedObjectContext{

 return  [[CoreDataManager sharedInstance] managedObjectContext:kSqlname managedObjectContext:[CoreDataManager sharedInstance].managedObjectContext]; 
```

}

如果我每次都需要修改kSqlname，当我的代码数据添加新字段时？例如，如果修改 sqlname：

```
NSURL *storeUrl = [NSURL fileURLWithPath:[docs stringByAppendingPathComponent:modelName]]; 
```

如果我需要重命名模型名，例如：version1 modelName=version1.sqlite 当我添加新字段 modelName=version2.sqlite

编辑：我认为不是在不同的线程，因为我测试了很多次没有给我错误，只有其他用户更新版本可能会给出错误

```
-(void)refreshData{

     NSLog(@"ChatHistoryViewController2333");

        isRefresh=NO;
        AppDelegate *delegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];

        dispatch_queue_t downloadQueue = dispatch_queue_create("refresh history", NULL);
        dispatch_async(downloadQueue, ^{

            NSManagedObjectContext *managedObjectContext =[self getManagedObjectContext];
            readArray=[[CoreDataManager sharedInstance] readEvent:@"ChatHistoryEntity" SortDescriptor:@"when" managedObjectContext:managedObjectContext];

            __block NSMutableArray *chatArr=[[NSMutableArray alloc]init];

            if(readArray.count>0){
                for(int i=0;i<readArray.count;i++){

    //                ChatHistoryEntity *chatHistoryEntity=[readArray objectAtIndex:(readArray.count-i-1)];
                    ChatHistoryEntity *chatHistoryEntity=[readArray objectAtIndex:i];

                    People *people=[[People alloc]init];

                    people.lastActivity=chatHistoryEntity.lastChat;
                    people.avatarsmall=chatHistoryEntity.avatarsmall;
                    people.when=chatHistoryEntity.when;
                    people.source=chatHistoryEntity.source;
                    people.idName=chatHistoryEntity.idName;

                    people.foreignId=[NSString stringWithFormat:@"%@",chatHistoryEntity.from];
                    NSManagedObjectContext *managedObjectContext =[self getManagedObjectContext];
                    int count=[[CoreDataManager sharedInstance]Count_ChatEventEntity:chatHistoryEntity.from to:delegate.myAuraId managedObjectContext:managedObjectContext];
                     people.readnum=[NSString stringWithFormat:@"%d",count];
                    NSString *distanceStr;
                    if (people.lastActivity) {
                         distanceStr=[ModelClass CheckIsNull:people.lastActivity];
                    }
                    if (chatHistoryEntity.name) {
                         people.screenName=[ModelClass CheckIsNull:chatHistoryEntity.name];
                    }

    //                NSLog(@"distanceStr:%@",distanceStr);
                    if (distanceStr==nil||[distanceStr isEqualToString:@"(null)"]||
                        people.screenName==nil||[people.screenName isEqualToString:@"(null)"]){

                    }else{

                        NSLog(@"people.foreignId=%@  people.screenName=%@  people.source=%@",chatHistoryEntity.from ,chatHistoryEntity.name ,chatHistoryEntity.source);
                        NSLog(@"people.idName=%@",chatHistoryEntity.idName);

                         [chatArr addObject:people];
                    }

                }
            }

            dispatch_async(dispatch_get_main_queue(), ^{

                    if (chatListArry) {
                        chatListArry=[[NSMutableArray alloc]init];
                    }

                    chatListArry=chatArr;
                   if ([chatListArry count]==0) {
                        self.tableView1.hidden=YES;
                        nodataView.hidden=NO;
                    }else{
                        self.tableView1.hidden=NO;
                        nodataView.hidden=YES;
                       [self.tableView1 reloadData]; 
                    }

                  chatArr=nil;

            });

        });
        dispatch_release(downloadQueue);

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T09:21:50.957

我通过修改sql数据库文件名解决了我的问题：

```
NSURL *storeUrl = [NSURL fileURLWithPath:[docs stringByAppendingPathComponent:modelName]]; 
```

如果数据库被修改，`modelName`应该重命名。例如在版本 1`modelName = version1.sqlite`中。然后在添加一个新字段后，`modelName = version2.sqlite`

每次在 Core Data 中添加或删除字段时，重命名 sqlite 数据库。

# graphics - 更改像素图的颜色

> ID：15491163
> 
> 赞同：0
> 
> 时间：2013-03-19T03:49:39.530
> 
> 标签：graphics, colors, bitmap, pixel, pixmap

我有一个像素图，它是一个简单的二维像素数组，我使用 FreeType 渲染（或在某些情况下使用 libpng 读取）。

是否有任何简单的算法可以让我用我选择的颜色来着色这个像素数据？我只需要更改颜色，alpha 值应该保持原样。此外，如果这仅适用于全白像素，那就没问题了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:52:15.087

将其转换为 HSV（[http://en.wikipedia.org/wiki/HSL_and_HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)），更改色调并将其转换回 RGB？

# php - 搜索关键字并检索整个句子

> ID：15491165
> 
> 赞同：2
> 
> 时间：2013-03-19T03:50:07.933
> 
> 标签：php, mysql

目前我使用`SELECT id FROM table WHERE text LIKE '%{$keyword}%';`which 简单有效，但我想知道如何在关键字之前和之后显示几个周围的单词。请参阅示例以更好地理解：

关键词：

**音乐**

文本（MySQL 中的文本字段）：

> 《温柔的怜悯》是一部 1983 年的美国剧情片。罗伯特杜瓦尔（如图）扮演麦克斯莱奇，一位正在康复的酗酒乡村**音乐**歌手，他试图通过与德克萨斯州农村的一位年轻寡妇和她的儿子的关系来改变自己的生活。杜瓦尔在影片中演唱了自己的歌曲，他驱车 600 多英里（966 公里）穿越全州，录制当地口音，并在乡村乐队中演奏**，**为这个角色做准备。他和导演布鲁斯·贝雷斯福德在制作过程中多次发生冲突，一度促使贝雷斯福德离开片场，据报道考虑退出。

并检索这个：

*   ... 扮演 Mac Sledge，一位正在康复的酗酒乡村**音乐**歌手，他试图改变自己的生活...
*   ... 录音带录制当地口音并在乡村乐队中演奏**，**为角色做准备。...

最后，我使用的是 PHP 和 MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:00:41.147

您可以通过 2 种方式执行此操作：

第一个。创建 mysql 函数 ( [http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html) ) 将处理全文并生成剪切句子。

第二。在 php 中获取全文并处理文本以生成剪切的句子。

在这两种方式中，您都必须通过自定义函数来做到这一点。

我更喜欢第二种方式，因为 php 文件中的代码将来很容易支持。

# cross-compiling - 为 Raspberry Pi 工具链编译 C/C++ 库

> ID：15491166
> 
> 赞同：3
> 
> 时间：2013-03-19T03:50:16.793
> 
> 标签：cross-compiling, libraries, raspberry-pi, toolchain

我一直致力于为 Raspberry Pi 开发设置工具链。[设置官方 Raspberry Pi 交叉编译器](http://github.com/raspberrypi/tools)没有问题，但现在我开始需要一些外部库，如 OpenSSL，以及最近发布的 OpenMAX 库。

将 C/C++ 库集成到交叉编译器中的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:03:04.147

好的，所以我找到了一种将 3rd 方库与交叉编译器一起使用的方法，但它似乎并不是最优的。基本上，我只是将所需的库安装到我的 Raspberry Pi 上（运行 Arch Linux）

```
pi:# pacman -S libssl-dev 
```

然后用

```
pi:# tar -zcvf include.tar.gz /usr/include
pi:# tar -zcvf lib.tar.gz /usr/lib 
```

压缩我的 Pi 上的 include 和 lib 目录。

接下来，我将它们复制到运行交叉编译器的本地机器（运行 Debian 挤压的 i686）上`sftp`：

```
debian:$ sftp root@<pi_ip_address>:/usr/include.tar.gz
debian:$ sftp root@<pi_ip_address>:/usr/lib.tar.gz 
```

我使用命令备份了交叉编译器`include`和`lib`目录（作为 root，因为我的交叉目录位于`/opt`）

```
debian:# tar -zcvf OLDinclude.tar.gz ./include
debian:# tar -zcvf OLDlib.tar.gz ./lib 
```

并继续将档案从 Pi 提取到交叉编译器的`sysroot/usr/`目录。

最后，为了测试它是否有效，我使用库编译了一个程序，同时使用`<cross>-gcc`和`<cross>-g++`. . . 它奏效了！现在，我可能会编写一个 bash 脚本来为我处理大部分这些步骤。如果有人对如何简化此过程有任何提示，请告知。

* * *

**注意：**对于像我这样的其他Linux新手，`'$'`代表普通用户shell，而`'#'`代表超级用户（即root）shell。普通用户可以使用该`su`命令升级为超级用户。

# ruby-on-rails - 改进我的 Rails 控制流程

> ID：15491171
> 
> 赞同：0
> 
> 时间：2013-03-19T03:50:54.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我在我的模型中定义了一个非常复杂的方法，我认为它是：

```
 def self.current_rating(recommendation_id, rating_set, product_id)
    if !Recommendation.find(recommendation_id).ratings.find_by_rating_set(rating_set).nil?
      Recommendation.find(recommendation_id).ratings.find_by_rating_set(rating_set).rating.to_i
    elsif  !Recommendation.find(recommendation_id).ratings.find_by_product_id(product_id).nil?
      Recommendation.find(recommendation_id).ratings.find_by_product_id(product_id).rating.to_i
    else
    end
  end 
```

在我看来，我打电话给：

```
:selected => Rating.current_rating(rec.id,params[:rating_set_id], params[:product_id]) 
```

在我的`select_tag`.

基本上我想检查第一次查找是否返回任何内容，是否`nil`检查第二次查找，如果`nil`没有返回任何内容。我如何将其重构为更好/更具语法性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:12:29.623

```
def self.current_rating(recommendation_id, rating_set, product_id)
    r = Recommendation.find(recommendation_id).ratings
    x = r.find_by_rating_set(rating_set) || r.find_by_product_id(product_id)
    x && x.rating.to_i
end 
```

所以我注意到你所有的表达都是从根据 reco id 找到推荐并获得它的评级开始的。所以我先这样做，分配给`r`.

然后我尝试通过 rating_set 查找，如果失败（它将返回 nil）它会短路到通过产品 id 查找。如果失败（nil），那么 x 将为 nil。

无论我们是通过 rating_set 还是 product id 来查找，都有一个 rating 方法。所以如果 x 不是 nil (x &&) 我们调用 rating，然后调用 to_i。它被返回，因为它是最后一个表达式。

如果 x 为 nil，则返回 (nil && whatever) 的结果，即 nil。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:22:50.117

你可以做各种各样的事情。在不了解您的应用程序的情况下，以下是我的建议：

其中的每一步都包括`Recommendation.find(recommendation_id)`，这让我认为您希望这是`Recommendation`模型上的一个实例方法，因此您可能不会运行 4 个相同的推荐查找。

此方法的第一行从推荐中获取您想要的评级。除非找到某些东西，否则该`rating`变量将保留。`nil`

```
def current_rating(rating_set, product_id)
  ratings.find_by_rating_set(rating_set) || ratings.find_by_product_id(product_id)
end 
```

所以现在你只剩下一个返回 a`rating`或的方法`nil`。由于我们不知道您打算对此做什么，因此很难说您下一步应该做什么，但我认为这是针对这种情况的更好的总体策略，因为这种方法的意图很明确，至少在某种程度上它的输出是可预测的（如果我调用一个`current_rating`方法并收到一个整数而不是一个 Rating 对象，我会有点惊慌）。如果使用它在视图中显示评级的数字，这是装饰器或其他模式的良好候选者。

# jquery-ui - JQuery 对话框在 IE 9.0 上不起作用，但在 Chrome 中很好，需要在 IE 中运行

> ID：15491173
> 
> 赞同：0
> 
> 时间：2013-03-19T03:50:58.207
> 
> 标签：jquery-ui, jquery-ui-dialog

我有两个经典的 asp 文件，default.asp 创建一个对话框并打开加载 default2.asp default2.asp 显示一些控件和一个链接，该链接调用一个 javascript 函数，该函数执行一些活动并关闭对话框

这件事在 Chrome 中运行良好，但在 IE 9.0 中运行良好，有人知道为什么吗？将不胜感激。

谢谢

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
    <title>Default.asp</title>
  <link rel="stylesheet" href="/jquery/themes/base/jquery-ui.css" />
  <script src="/JQuery/jquery-1.9.1.js"></script>
  <script src="/JQuery/jquery-ui.js"></script>

  <style>
    body { font-size: 85.5%; }
    div#mydiv { width: 350px; margin: 20px 0; }
  </style>

<script>
$(document).ready(function(){
    var MyDlg = $( "#mydiv" );
    MyDlg.dialog({
                autoOpen: false,
                 closeOnEscape: true,
                 modal: true,
                 width: 300,
                 height: 400,
                 modal: true,
                 resizable: true,
      buttons: {
        Cancel: function() {
          MyDlg.dialog( "close" );
          }
               }
    });

$("#Opendlg").click(function() {
  MyDlg.load("Default2.asp").dialog("open");
});

});
</script>

</head>
<body>
This is a test form-1
<br><br>

<% 
Dim FName, LName
FName = Request.form("fname")
LName = Request.form("lname")

Response.write("The First name was := " & FName & " and Last name was:=" & LName )
%>

<br><br>
<form ID=Form1 method="post" action="Default.asp">
First Name: <input type="text" name="fname"><br>
Last Name: <input type="text" name="lname"><br><br>
<input type="submit" value="Submit">
</form>
<br><br>

<input type="button"  class="ui-widget" ID="Opendlg" value="Open Dialog"/>

<div id="mydiv"  title="Product Wizard">
</div>

</body>
</html> 
```

------------------------- Default2.asp---------- ------------------------------

```
<script type="text/javascript">
$(function() {
    $('#Form2').submit(function(evt) {
        evt.preventDefault();
        $.ajax({
            url: "Default2.asp", 
            type: 'POST',
            data: $(this).serialize(),
            success: function(result) {
                $('#mydiv').html(result);
            }
        });
    });
});

var MyDlg = $( "#mydiv" );

$(".ui-widget-overlay").click (function () {
    MyDlg.dialog( "close" );
});

function CloseMe()
{
 $("#mydiv").dialog("close");
}

</script>

This is Default2.asp file
<br><br>

<% 
Dim Name, Address
Name = Request.form("Name")
Address = Request.form("address")

Response.write("The Name was " & Name & " and Address was " & Address )
%>
<a href="Javascript:CloseMe();">Close Me</a>

<br><br>
<form ID=Form2 >
Name: <input type="text" name="Name"><br>
Address: <input type="text" name="address"><br><br>
<input type="submit" value="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:35:18.803

```
$(this).closest('.ui-dialog-content').dialog('close'); 
```

尝试是..它将关闭对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T23:27:40.153

我发现我使用的 Google apis 在 Chrome 上运行良好，但在 IE 上运行良好，所以我用从 JQuery.com 下载的 JQuery 文件替换了这些引用，并在 IE 上测试了它们，对于问题中提到的这个问题一切正常。

感谢所有人的回答并尽力帮助我:)

## 而不是在 IE 上使用这些

[http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js) [http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js)

## 下载后使用这些并保存在本地文件夹中。

# php - 在单个页面上强制 https，然后将其他请求重定向到 http

> ID：15491177
> 
> 赞同：0
> 
> 时间：2013-03-19T03:51:24.877
> 
> 标签：php, html, apache, .htaccess, mod-rewrite

你好，所以基本上我有一个页面，我想拥有 https，我希望它的孩子和兄弟姐妹只有 http。

我的代码可以正常工作，但是如果我单击从我的 ssl 页面到非 ssl 页面的链接，https 仍然存在。我试图让它重定向回 http

这是我到目前为止所拥有的

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.domain.com/$1 [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ $1/ [L,R=301]

RewriteCond %{SERVER_PORT} !^443$
RewriteRule ^prepaid/?$ https://www.domain.com/prepaid/ [R=301,L]

RewriteRule ^prepaid/h2o/?$  index.php?p=prepaid&s=h2o [L]
RewriteRule ^prepaid/?$      index.php?p=prepaid       [L] 
```

主要目标是始终强制 www 以及尾随斜杠也希望仅在[https://www.domain.com/prepaid/](https://www.domain.com/prepaid/)上强制 https ，然后任何 childeren 或 sibliligs 试图强制 http。即使您在 https 页面上并且您点击离开（这是我坚持的，它目前停留在 https 中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:00:20.583

尝试这个：

```
<Location /sample.php>
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}
</Location> 
```

将 sample.php 重命名为您的文件名

# ruby-on-rails - 手动设置身份验证令牌？

> ID：15491180
> 
> 赞同：1
> 
> 时间：2013-03-19T03:51:33.773
> 
> 标签：ruby-on-rails, ruby, heroku, token

我最近更新了一个应用程序并推送到 heroku，更新的功能之一是将我的会话 ID 从用户 ID 更改为安全的十六进制。推送后，我注意到以前的用户无法再登录。我检查了 heroku 控制台，发现他们的身份验证令牌设置为 nil，我猜这是预期的。我的问题是：

有没有办法在更新之前为用户设置身份验证令牌？我可以在更新之前编写某种循环来为用户创建此令牌以防止再次发生这种情况吗？

还是我只需要擦除数据库并让用户重新注册。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:31:39.640

[记住我并重置密码](http://railscasts.com/episoades/274-remember-me-reset-password?view=comments)评论部分的解决方案。

**在您的开发数据库上试用**

我前段时间尝试过，如果**generate_token**是方法名称并且**auth_token**是存储令牌的数据库字段，它将为所有用户更新身份验证令牌。如果您只需要为目前没有令牌的用户更改它，您可以在任务中使用 if 语句进行思考。

**在lib/tasks/rebuild_token_auth.rake**中创建文件：

 **```
namespace :user do
  desc "Rebuild Auth-Tokens"
  task :rebuild_auth_token => :environment do
    User.transaction do
      User.all.each { |u|
        u.generate_token(:auth_token)
        u.save!
      }
    end
  end
end 
```

像这样称呼它：

```
rake user:rebuild_auth_token 
```

在他的示例中 generate_token 看起来像这样：

```
class User < ActiveRecord::Base
 def generate_token(column)
   begin
     self[column] = SecureRandom.urlsafe_base64
   end while User.exists?(column => self[column])
 end
end 
```**

# jquery - jquery Block UI不呈现按钮

> ID：15491182
> 
> 赞同：1
> 
> 时间：2013-03-19T03:51:49.737
> 
> 标签：jquery, jquery-ui, salesforce, visualforce

大家好，我有一个奇怪的问题。

当我在课堂上执行此操作并将变量绑定到我的页面时，它可以工作：

```
$j.blockUI({ message: "<h1><br/>Loading Please wait<br/><br/></h1>}); 
```

但是当我这样做时它停止工作：

```
$j.blockUI({ message: "<h1><br/>Loading Please wait<br/><br/></h1><input type="button" value="No" />" }); 
```

我做错了什么？？

我的平台是 Salesforce 和 visualforce。

** 我的屏幕现在看起来像这样，但在我的代码中，我给出了一个类型按钮，但它把它当作文本为什么？

```
string t = '<input type=\'\' button \'\' value=\'\' OK \'\' >JJJJ</input>'; 
```

![我的结果](../Images/ad0e2d5bfa57ea90124a157c141c16c1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:30:10.613

**是的，我知道了，我现在使用**

```
<button type=\'button\'>Click</button> 
```

它工作正常。

**如果它对其他人有帮助，请将其标记为答案..**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:53:07.010

因为您需要`"`从输入中逃脱。

**例子**

```
$j.blockUI({ message: "<h1><br/>Loading Please wait<br/><br/></h1><input type='button' value='No' />" }); 
```

**或者**

```
$j.blockUI({ message: "<h1><br/>Loading Please wait<br/><br/></h1><input type=\"button\" value=\"No\" />" }); 
```

# java - 如何使用 JDBC 检索标量值？

> ID：15491186
> 
> 赞同：2
> 
> 时间：2013-03-19T03:52:13.510
> 
> 标签：java, stored-procedures, jdbc, scalar

我现在正在尝试调用一个返回标量值的存储过程，该值表示插入行的 ID（即 varchar），这如何在 JDBC 中实现？我现在正在做的是让 DB sproc 像这样返回结果

```
select SCOPE_IDENTITY() 
```

在我的代码中我使用 ResultSet

```
ResultSet resultSet = statement.executeQuery();
resultSet.next();
String productId = resultSet.getString(1); 
```

我做得对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T04:36:39.333

最好使用 JDBC 检索生成的 ID

```
 PreparedStatement ps = conn.prepareStatement(insertStatement, Statement.RETURN_GENERATED_KEYS);
    ps.executeUpdate();
    ResultSet rs = ps.getGeneratedKeys();
    rs.next();
    String id = rs.getString(1); 
```

# jquery - 未记录的值?

> ID：15491189
> 
> 赞同：2
> 
> 时间：2013-03-19T03:53:01.847
> 
> 标签：jquery

我正在尝试检查两个输入框是否具有相同的值，但问题是它总是以相同的值显示它们。我认为这些值没有被存储在价值中？

```
<div class="errorbox-good">
        <div>
            <div class="form-entry">
                <label>
                    <div> First Name
                        <span class="ss-required-asterisk">*</span>
                    </div>
                </label>
                    <input type="text" id="fname" name="fname" required> 
            </div>
        </div>
    </div> 

<div class="errorbox-good">
        <div>
            <div class="form-entry">
                <label>
                    <div> Last Name
                        <span class="ss-required-asterisk">*</span>
                    </div>
                </label>
                    <input type="text" name="lname" id="lname" required> 
            </div>
        </div>
    </div> 
```

jQuery

```
$(document).ready( function() {
$('input').blur(function () {
    if ($('#fname').attr('value') == $('#lname').attr('value')) {
        alert('Same Value');
        return false;
    } else {
        return true;
    }
 });
}); 
```

当我尝试提醒它时，`$('#fname').attr('value')`它说未定义。是没有正确记录值还是其他原因？

这是jsfiddle。它可以工作，但当我在本地机器上运行相同的代码时就不行了。 [http://jsfiddle.net/g2kBm/56/](http://jsfiddle.net/g2kBm/56/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T03:57:14.207

使用`.val()`jQuery 方法。

> **描述：**获取匹配元素集中第一个元素的当前值。

```
$("#fname").val(); 
```

### [阅读更多](http://api.jquery.com/val/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:57:37.100

你应该使用：

```
if ($('#fname').val() == $('#lname').val()) {
    alert('Same Value');
    return false;
} else {
    return true;
} 
```

相反， attr() 不用于获取输入的值。这用于向输入添加属性。这也是您收到“未定义”消息的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T04:01:09.163

可能只是修改这个小部分，可能会对您有所帮助。

```
$(document).ready( function() {
$('input').blur(function () {
    if ($('#fname').val() == $('#lname').val()) {
        alert('Same Value');
        return false;
    } else {
        return true;
    }
 });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T04:01:48.880

你定义`$('#fname').attr('value')`了，它说未定义。如果你想使用**value 属性**，你必须先声明它。但是您没有声明并尝试获取输入的价值。

`jquery`如果要检查值，可以使用`val()`.

```
if ($('#fname').val() == $('#lname').val()) {
    alert('Same Value');
    return false;
} else {
    return true;
} 
```

# delphi - .cpp 文件存储在已安装的 Delphi .groupproj 文件中的什么位置？

> ID：15491190
> 
> 赞同：0
> 
> 时间：2013-03-19T03:53:05.940
> 
> 标签：delphi, delphi-xe, group-project

我的 Delphi XE 上安装了 RxLib 工具。我需要了解有关 RxLib 源的更多信息，但我不知道 .cpp 文件存储在已安装的 Delphi .groupproj 文件中的位置。

这里的任何人都可以帮助我存储它的位置吗？

预先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T04:34:10.370

RxLib 库是用 Delphi 编码的，而不是 C++，所以不涉及 cpp 文件，只有 .pas 文件。

文件在磁盘中的位置可能会有所不同，具体取决于您安装库的方式。

1.  如果您使用了安装程序并且安装程序进行了 IDE 库路径配置以让 IDE 浏览单元源代码，您可以使用`ctrl`+click IDE 功能自动打开文件并检查其位置。为此，将库中的组件添加到表单并保存（让 IDE 将所有需要的单元添加到 uses 子句）。在 uses 子句中找到您感兴趣的文件，按住键，当您将鼠标悬停在该文件上时`ctrl`，您将看到单位名称是如何变成*超链接的。*单击单元名称，单元将打开。

    [我在示例中使用了 jedi 库，因为我不再使用 rx，因为它已添加到 jvcl。]

    ![ctrl+点击](../Images/8453199fc673269099f3b6494faba625.png)

    现在，当此文件在 IDE 中处于活动状态时，您将鼠标悬停在页面标题上，您将获得包含完整路径的文件名。

    ![完整路径](../Images/135de93ead51f1e05905992b935b9a0f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T04:27:17.497

我在该项目中看到的唯一 C++ 文件是用于[C++ Builder 演示的](http://rxlib.svn.sourceforge.net/viewvc/rxlib/trunk/Demos/CBUILDER/)。否则它是一个带有 Delphi 代码的 Delphi 项目。

# google-drive-api - 向受信任的测试人员发布 Google Drive SDK 应用

> ID：15491192
> 
> 赞同：0
> 
> 时间：2013-03-19T03:53:20.187
> 
> 标签：google-drive-api

我已按照[https://developers.google.com/drive/listing](https://developers.google.com/drive/listing)中描述的步骤操作，并为我的应用创建了私有 Chrome 网上应用店列表。Chrome Web Store 列表的所有者（即我自己）可以看到该应用程序并能够将其安装在他的 Google Drive 中。但是，其他受信任的测试人员看不到该应用程序（它不会出现在 Chrome 网上应用店的搜索结果中，也不会出现在他们 Google 云端硬盘的“连接更多应用程序”中）。我怎样才能让他们看到私人列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:04:45.223

好的，我发现了问题：我在与我的主帐户相同的 Chrome 浏览器中尝试另一个“受信任的测试人员”帐户。由于某种原因，它不起作用（我无法在同一个 Chrome 中“两次”安装 Chrome 网上应用店应用程序）。因此，我为我的另一个测试人员帐户创建了一个新的 Chrome 用户，以便拥有一个干净的 Chrome 环境，并且我能够在这个新环境中再次从 Chrome Web Store 安装该应用程序。

# javascript - 使用文件阅读器获取图像的宽度和高度

> ID：15491193
> 
> 赞同：49
> 
> 时间：2013-03-19T03:53:35.623
> 
> 标签：javascript, dom, filereader

我正在构建图像调整大小/裁剪，并且我想在他们以模态（引导程序）对其进行编辑后显示实时预览。我相信这*应该*可行，但我在 console.log 中只得到 0。这需要将原始图像的宽度和高度输入另一个脚本（我将在之后执行此操作，现在只需要它们在 console.log/a 变量中）

```
function doProfilePictureChangeEdit(e) {
    var files = document.getElementById('fileupload').files[0];
    var reader = new FileReader();
    reader.onload = (function(theFile) {
        document.getElementById('imgresizepreview').src = theFile.target.result;

        document.getElementById('profilepicturepreview').src = theFile.target.result;
      }
    );
    reader.readAsDataURL(files);
    var imagepreview = document.getElementById('imgresizepreview');
    console.log(imagepreview.offsetWidth);
    $('img#imgresizepreview').imgAreaSelect({
        handles: true,
        enable: true,
        aspectRatio: "1:1",
        onSelectEnd: preview
    });
    $('#resizeprofilepicturemodal').modal('show');
    }; 
```

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-03-19T04:02:10.433

您必须等待图像加载。尝试处理里面的元素`.onload`。

我还简化了将两个元素的来源设置为您应该如何做的过程（使用 jQuery）。

```
reader.onload = (function(theFile) { 
    var image = new Image();
    image.src = theFile.target.result;

    image.onload = function() {
        // access image size here 
        console.log(this.width);

        $('#imgresizepreview, #profilepicturepreview').attr('src', this.src);
    };
}); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-07-23T07:55:29.490

对我来说，奥斯汀的解决方案不起作用，所以我提出了一个对我有用的解决方案：

```
var reader = new FileReader;

reader.onload = function() {
    var image = new Image();

    image.src = reader.result;

    image.onload = function() {
        alert(image.width);
    };

};

reader.readAsDataURL(this.files[0]); 
```

如果您发现`image.src = reader.result;`在 image.onload 有点连线之后进行分配，我也这么认为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-18T18:11:55.053

这是一个受 Austin Brunkhorst 启发的答案，它带有一个用于确定图像大小的回调，以防您想在代码中的其他地方重用该函数。

`fileControl`假定为 jQuery 元素。

```
function didUploadImage(fileControl) {      
   // Render image if file exists.
   var domFileControl = fileControl[0];
   if (domFileControl.files && domFileControl.files[0]) {
      // Get first file.
      var firstFile = domFileControl.files[0];

      // Create reader.
      var reader = new FileReader();

      // Notify parent when image read.
      reader.onload = function(e) {
         // Get image URL.
         var imageURL = reader.result;

        // Get image size for image.
        getImageSize(imageURL, function(imageWidth, imageHeight) {
            // Do stuff here.
        });
      };

      // Read image from hard disk.
      reader.readAsDataURL(firstFile);

      // Print status.
      console.log("Uploaded image: " + firstFile.name);
   }
}

function getImageSize(imageURL, callback) {      
   // Create image object to ascertain dimensions.
   var image = new Image();

   // Get image data when loaded.
   image.onload = function() {      
      // No callback? Show error.
      if (!callback) {
         console.log("Error getting image size: no callback. Image URL: " + imageURL);

      // Yes, invoke callback with image size.
      } else {
         callback(this.naturalWidth, this.naturalHeight);
      }
   }

   // Load image.
   image.src = imageURL;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-23T06:01:10.750

```
fileChangeEventHeader(fileInput) {
    const oFReader = new FileReader();
    oFReader.readAsDataURL(fileInput.target.files[0]);
    oFReader.onload = (event: any) => {
      var image = new Image();
      image.src = event.target.result;
      image.onload = function () {
        console.log(`width : ${image.width} px`, `height: ${image.height} px`);
      };
    };
  }
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.5/angular.min.js"></script>

<input type="file" name="profile_img" accept="image/*" (change)="fileChangeEventHeader($event)"
                  class="input-file">
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-26T16:26:25.830

这就是我对AngularJS的方式

```
 fileReader.readAsDataUrl($scope.file, $scope).then(function(result) {
               var image = new Image();
               image.src = result;
               image.onload = function() {
                    console.log(this.width);
               };
               $scope.imageSrc = result; //all I wanted was to find the width and height

          });
```

# algorithm - 在二叉树中找到最长的路径

> ID：15491197
> 
> 赞同：4
> 
> 时间：2013-03-19T03:54:02.273
> 
> 标签：algorithm, path, binary-tree, nodes, depth-first-search

我想在二叉树中找到最长的路径。我打算将它们添加到列表中，这样我就可以告诉我的敌人角色在简单模式下走很长的路。

```
private static <T> ArrayList<T> depthFirstSearch(BinaryNode<T> node)
{
    if(node != null)
    {
        Stack<BinaryNode<T>> stack = new Stack<BinaryNode<T>>();

        stack.push(node);

        while(!stack.isEmpty())
        {
            BinaryNode<T> currentNode = stack.pop();

            if(currentNode.right != null)
                stack.push(currentNode.right);

            // We want to visit left child first, so push left node last.
            if(currentNode.left != null) 
                stack.push(currentNode.left);
        }
    }
} 
```

我已经编写了该代码，但它是一团糟。我正在尝试使用 DFS 找到最长的路径。有什么建议么？

**编辑：**我确实有树的高度，我可以用这个得到它。

```
public static <T> int height(BinaryNode<T> t)
{
    if (t == null)
        return -1;

    else 
        return 1 + Math.max(height(t.left), height(t.right));
} 
```

我的问题是：**我什么时候知道我使用 DFS 找到了最长的路径，以便我可以将节点添加到我的列表中？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T05:28:21.323

一棵树中最长的路径，称为“直径”。你可以在这里看到算法的实现：[http ://www.geeksforgeeks.org/diameter-of-a-binary-tree/](http://www.geeksforgeeks.org/diameter-of-a-binary-tree/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-17T15:46:35.747

检查 Niki 在以下链接中给出的答案。这是 O(n) 解决方案

[二叉树的直径 - 更好的设计](https://stackoverflow.com/questions/11897088/diameter-of-binary-tree-better-design/19122726#19122726)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-16T08:05:07.190

如果有人需要，我会留下这个答案。这是我在 C++ 中的解决方案。该函数`Get_Max_Path()`返回一个具有最长路径的向量，因此您可以得到路径、长度和总和（如果需要）：

```
vector<int> Max_Path(vector<int>rightpath, vector<int>leftpath)
{
    return (rightpath.size() > leftpath.size()) ? rightpath : leftpath;
}

vector<int> GetPath(node* N, vector<int> v)
{
    v.push_back(N->Data);
    return v;
}
vector<int> Get_Max_Path(node* root)
{
    if (!root) return 
        vector<int>(0);
    return Max_Path(GetPath( root, Get_Max_Path(root->Right)), 
                    GetPath( root, Get_Max_Path(root->Left)) );
} 
```

这是树形结构

```
 class node
{
public:
    node* Right = NULL;
    node* Left = NULL;
    int Data;
};

class Tree
{
private:
    node* Root = NULL;

public:

    void Insert_Node(int Data)
    {
        node* DataNode = (node*)malloc(sizeof(node));
        DataNode->Data = Data;
        DataNode->Left = DataNode->Right = NULL;

        if (Root == NULL) {
            Root = DataNode;
            return;
        }

        node* tmp_root = Root, * prev = NULL;
        while (tmp_root != NULL)
        {
            prev = tmp_root;
            tmp_root = (tmp_root->Data < Data) ?
                tmp_root->Right :
                tmp_root->Left;
        }
        (prev->Data < Data) ? (prev->Right = DataNode) : (prev->Left = DataNode);
    }

    vector<int> Max_Path(vector<int>rightpath, vector<int>leftpath)
    {
        return (rightpath.size() > leftpath.size()) ? rightpath : leftpath;
    }
    vector<int> Update_Path(node* N, vector<int> v)
    {
        v.push_back(N->Data);
        return v;
    }
    vector<int> Get_Max_length_Path(node* root)
    {
        if (!root) return
            vector<int>(0);
        return Max_Path(
            Update_Path(root, Get_Max_length_Path(root->Right)),
            Update_Path(root, Get_Max_length_Path(root->Left)));
    }

    vector<int> Get_Max_length_Path()
    {
        return Get_Max_length_Path(Root);
    }
}; 
```

这是驱动代码

```
int main()
{
    Tree T;

    int nodes[] = { 11, 6, 8, 19, 4, 13, 5, 17, 43, 49, 16, 31, 32};
    int length = sizeof(nodes) / sizeof(nodes[0]);

    for (size_t i = 0; i < length; i++)
        T.Insert_Node(nodes[i]);

    int sum = 0;

    vector<int> path = T.Get_Max_length_Path();
    cout << "The path length is : " << path.size() <<endl;
    cout << "The path from the leaf to the root is : ";
    for (int i = 0; i < path.size(); i++)
    {
        cout << path[i] << " ";
        sum += path[i] ;
    }
    cout << endl;
    cout << "the path sum is :" << sum << endl;
    return 0;
} 
```

测试用例

BST 样本 [![BST 样本](../Images/2ddd162d17c473ab2d7affbb2ebc868d.png)](https://i.stack.imgur.com/9Dale.png)

输出

```
The path length is : 5 The path from the leaf to the root is : 16 17
13 19 11 the path sum is :76 
```

# ruby-on-rails - 如何使用 rvm 运行 rails 2 项目？

> ID：15491198
> 
> 赞同：1
> 
> 时间：2013-03-19T03:54:02.283
> 
> 标签：ruby-on-rails, ruby, rvm

我有一个旧的 Rails 项目。在 environment.rb 中：

```
RAILS_GEM_VERSION = '2.3.8' unless defined? RAILS_GEM_VERSION 
```

&我想用 rails -v=2.3.8 运行它

```
I use RVM
    => ree-1.8.7-2011.12 [ i686 ]
my ruby -v
    ruby 1.8.7
my rails -v
    Rails 2.3.8 
```

我的宝石清单：

> ```
> actionmailer (2.3.8)
> actionpack (2.3.8)
> activerecord (2.3.8)
> activerecord-postgresql-adapter (0.0.1)
> activeresource (2.3.8)
> activesupport (2.3.8)
> bundler (1.3.4, 1.0.21)
> fastercsv (1.5.5)
> geokit (1.5.0)
> htmlentities (4.2.4)
> i18n (0.6.1)
> mime-types (1.19)
> multi_json (1.5.0)
> pg (0.14.1)
> rack (1.1.3)
> rails (2.3.8)
> rake (10.0.3, 0.8.7)
> rest-client (1.6.7)
> rubygems-bundler (1.1.1)
> rvm (1.11.3.6) 
> ```

& 当我尝试运行时 ->`ruby script/server` 我收到此消息 ->“在任何源中找不到 activesupport-3.2.10 运行`bundle install`以安装丢失的 gem。”

如果我运行“捆绑安装”，我的 rails 版本将更新为 Rails 3.2.10，然后，如果我尝试运行 -> ruby​​ 脚本/服务器 -> 我得到这个消息 -> “缺少 Rails 2.3.8 gem . 请`gem install -v=2.3.8 rails`在 config/environment.rb 中为您已安装的 Rails 版本更新您的 RAILS_GEM_VERSION 设置，或注释掉 RAILS_GEM_VERSION 以使用已安装的最新版本。”

我照它说的做:) ->`gem install -v=2.3.8 rails` 但是，我再次得到相同的味精 ->

> “缺少 Rails 2.3.8 gem。请`gem install -v=2.3.8 rails`在 config/environment.rb 中为您已安装的 Rails 版本更新您的 RAILS_GEM_VERSION 设置，或注释掉 RAILS_GEM_VERSION 以使用已安装的最新版本。”

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:07:24.900

尝试使用以下命令运行所有内容`bundle exec`：

`bundle exec ruby script/server`

同样在您的 Gemfile 中，设置 rails 版本：

`gem 'rails', '2.3.8'`

这样`bundle install`就不会尝试升级你。

# php - PHP AES 加密填充 NULL

> ID：15491200
> 
> 赞同：0
> 
> 时间：2013-03-19T03:54:27.137
> 
> 标签：php

我正在尝试设置 AES 加密。

我正在使用以下库，效果很好。

[http://www.coderelic.com/examples/AES_Encryption_Example.php](http://www.coderelic.com/examples/AES_Encryption_Example.php)

但是外部业务告诉我使用填充NULL，我不知道

```
 3 = Pad with NULLs. (If already a multiple of the algorithm's block
  size, no padding is added). 
```

我完全迷路了，lib类中也没有带NULL的Pad，有没有人可以帮忙，说真的我一无所知。任何建议或帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:21:44.427

您正在使用的代码已经在这样做了。查看开头`AES_Encryption.php`：

> 此 AES_Encryption 类中的默认填充方法是零填充零填充对于消息中的填充通常是可以的，因为在可读消息末尾剥离的空字节不应损害文本的重点。如果您担心消息完整性，可以使用 PKCS7 代替

背景：AES 与许多加密算法一样，是一种分组密码。这意味着它只能加密与其块长度完全相同的数据。在加密之前，您必须决定使用填充技术将数据填充到块大小。但是任何体面的低级加密库都会处理这样的细节。您确实必须知道解密时的填充技术，否则有办法恢复原始长度，这样您就不会认为填充是数据的一部分，这就是外部业务指定填充方法的原因。

用 NULL 填充，它们几乎肯定意味着用 nul 字节填充（NULL 和 nul，经常混淆），这就是 AES_Encryption 所谓的零填充。

# cakephp-2.0 - 如何在 cakephp 的同一页面上显示链接？

> ID：15491201
> 
> 赞同：0
> 
> 时间：2013-03-19T03:54:30.407
> 
> 标签：cakephp-2.0

我有两个控制器产品和服务，它们有很多属于关联。我有一个显示我所有产品的“index.ctp”，但我想在我的“index.ctp”上有一个链接，它将显示结果来自同一个 'index.ctp' 中的另一个动作 'productdisplay' 。是否可以使用元素以及如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:26:38.557

## 使用 requestAction()

在 CakePHP 中，可以通过`requestAction()`. 阅读手册的这一部分了解更多信息；[控制器::requestAction()](http://book.cakephp.org/2.0/en/controllers.html#Controller::requestAction)。

例如;

```
echo $this->requestAction('/products/productdisplay/5'); 
```

然而， requestAction 确实应该避免，因为它的性能很差。

## 备择方案

### 使用 AJAX

因为您提到了“单击链接时”，所以我假设您正在显示产品列表，并且当用户单击“详细信息”按钮/链接时，应显示*该产品的详细信息。*

最好的方法是使用 JavaScript (AJAX) 从 productdisplay 操作中检索信息。

### 使用元素

如果您不想依赖 JavaScript，并且希望产品显示内容“静态”包含在页面中，您可以考虑为此创建一个“元素”。元素是可以嵌入到您的视图中的“部分视图”。但是，如果某个元素使用了模型中的数据，则必须检索该数据并将其传递给视图；

有关元素的更多信息，请阅读手册的这一部分：[元素](http://book.cakephp.org/2.0/en/views.html#elements)

在您的控制器中：

```
public function index($selectedProductId = null)
{
    // retrieve all products for the overview
    $this->set('products', $this->Products->find('all'));

    if ($selectedProductId) {
        // a product has been selected,
        // retrieve the data for the selected product
        $this->set('selectedProduct', $this->Products->findById($selectedProductId));
    }

} 
```

在你看来

```
// render your list of products 
foreach ($products as $product) {
     echo $this->Html->link(
        $product['Product']['name'], 
        array('action' => 'index', 0 => $product['Product']['id'])
     );
}

if (isset($selectedProduct)) {
     // a product has been selected. Render it using an element
     // this will render View/Elements/productDisplay.ctp
     echo $this->element('productDisplay');
} 
```

# c# - 尝试在接口上使用 foreach 时出现 NullReferenceException

> ID：15491208
> 
> 赞同：2
> 
> 时间：2013-03-19T03:55:17.337
> 
> 标签：c#, foreach, unity3d

这是我在 Unity 3D 中的 C# 代码：

```
private List<IEnemy> Enemies;

void Start () {
    soldier = OT.AnimatingSprite("PlayerAnimatingSprite");

    Bomber bomber = new Bomber(soldier);
    Enemies.Add(bomber as IEnemy);
}

void Update () {        
    ProcessEnemies();       
}

void ProcessEnemies()
{
    foreach(IEnemy enemy in Enemies)
    {
        enemy.Move();
    }
} 
```

当我在上面的代码中实例化 Bomber 时，我还会收到以下警告：“您正在尝试使用 'new' 关键字创建 MonoBehavior。这是不允许的。只能使用 AddComponent() 添加 MonoBehavior。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T03:56:44.803

敌人对象尚未初始化

```
private List<IEnemy> Enemies = new List<IEnemy>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T04:40:46.837

AnteSim 的答案解决了一个问题，但您得到的实际错误来自尝试在 Bmber 上调用“新”，我认为它是 GameObject 或 MonoBehaviour 组件。

如果 Bomber 是一个组件：

```
Bomber b = gameObject.AddComponent<Bomber>();
Enemies.Add(b); 
```

如果 Bomber 是一个游戏对象：

```
GameObject b = Instantiate(Bomber, Vector3.zero, Quaternion.identity) as GameObject;
Enemies.Add(b); 
```

# oracle - Oracle 序列未生成

> ID：15491210
> 
> 赞同：0
> 
> 时间：2013-03-19T03:55:25.390
> 
> 标签：oracle, oracle11g

我有一个表 Person 包含字段是 personName,personId 并且没有指定主要我在表中添加了一些值。表 Person 中的值是

```
 ('muni',1)   
 ('Ganesh',1) 
```

我需要将主键添加为 personId 并将列修改为自动生成。因此，我尝试通过以下查询生成序列以生成触发器为

```
declare           
id  number;     
begin  
select max(rownum)+1 into id from Person;  
execute immediate 'create sequence personseq start with '||to_char(id);  
end; 
```

如果我在值在表中时执行上述查询，那么它会正确执行，但是当我有空表时，这意味着表中没有条目，那么上述查询不会生成序列。

我也尝试过 if 语句。

```
declare  
id  number;  
begin  
select max(rownum)+1 into id from Person;  
if (id=null) then  
execute immediate 'create sequence personseq start with '||to_char(1);  
else  
execute immediate 'create sequence personseq start with '||to_char(id);  
end if;  
end; 
```

系统说错误 no is `ORA01722`，表示我给的数字无效。但是不知道错在哪里？
任何帮助高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:07:19.420

尝试这个

```
select nvl(max(rownum),0)+1 into id from Person; 
```

当表为空时 max(rownum) 将返回 null 并且当您将 null 添加到值时将始终返回 null，因此您需要将任何 null 转换为 0 以便 0 + 1 将返回 1 而不是 null

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T04:07:39.547

upd：刚刚注意到比 count/rownum 更重要的缺陷。

`id=null`. 永远不要那样做，这是行不通的。

您可以通过以下方式检查值是否为空：`id is null`.

[空值](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements005.htm "NULL 参考")

使用`count(*)`.

```
12:03:55 SYSTEM@saz-dev> create table person as
12:04:05   2  select 'muni' name, 1 attribute from dual union all
12:04:32   3  select 'ganesh' name, 1 attribute from dual;

Table created.

Elapsed: 00:00:00.07
12:04:47 SYSTEM@saz-dev> ed
Wrote file S:\tools\buffer.sql

  1  declare
  2  id  number;
  3  begin
  4  select count(*)+1 into id from person;
  5  execute immediate 'create sequence personseq start with '||to_char(id)||' increment by 1';
  6* end;
12:05:52   7  /

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.06
12:05:53 SYSTEM@saz-dev> select object_name from user_objects where object_name = 'PERSONSEQ';

OBJECT_NAME
---------------------------------------
PERSONSEQ

Elapsed: 00:00:00.08
12:06:16 SYSTEM@saz-dev> truncate table person;

Table truncated.

Elapsed: 00:00:00.32
12:06:27 SYSTEM@saz-dev> drop sequence personseq;

Sequence dropped.

Elapsed: 00:00:00.20
12:06:33 SYSTEM@saz-dev>  declare
12:06:38   2   id  number;
12:06:38   3   begin
12:06:38   4   select count(*)+1 into id from person;
12:06:38   5   execute immediate 'create sequence personseq start with '||to_char(id)||' increment by 1';
12:06:38   6   end;
12:06:39   7  /

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.03
12:06:40 SYSTEM@saz-dev> select personseq.nextval from dual;

   NEXTVAL
----------
         1

Elapsed: 00:00:00.04 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T04:07:08.220

像这样创建一个序列

```
CREATE SEQUENCE person_seq
 START WITH     1000
 INCREMENT BY   1
 NOCACHE
 NOCYCLE; 
```

而不是使用 - 'person_seq.nextval' 用于每次插入新记录，
例如

插入人（姓名，身份证）值（'abc'，person_seq.nextval）

# java - 如何将多个项目添加到 DefaultComboBoxModel

> ID：15491211
> 
> 赞同：0
> 
> 时间：2013-03-19T03:55:25.970
> 
> 标签：java, swing, defaulttablemodel

我有以下代码，但我不知道如何将所有项目添加到我的组合框中。

```
DefaultTableModel rs = MyDB.DataTable("SELECT `Activity` FROM `transactions` WHERE `Group` = '" + Gname.getText()+ "' OR `Group` = 'ALL'");

DefaultComboBoxModel dmc = new DefaultComboBoxModel();

dmc.addElement("");

if (rs.getRowCount() > 0) {
    dmc.addElement(rs.getValueAt(0,0).toString());
}

cboItem.setModel(dmc); 
```

它只将一项添加到我的`DefaultTableModel`，我如何添加所有项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T04:02:18.517

take 的构造`DefaultComboBoxModel`函数`Object[]`。您可以首先遍历`rs`值准备一个数组（或列表），然后将此数组传递给`DefaultComboBoxModel`构造函数。像这样 ...

```
DefaultTableModel rs = MyDB.DataTable("SELECT `Activity` FROM `transactions` WHERE `Group` = '" + Gname.getText()+ "' OR `Group` = 'ALL'");
int columnCount = rs.getColumnCount();
int rowCount = rs.getRowCount();

List <Object> values = new ArrayList<Object>();
for (int rowIndex = 0; rowIndex < rowCount; rowIndex ++){
    for(int columnIndex = 0; columnIndex < columnCount; columnIndex++){
         Object value = rs.getValueAt(rowIndex , columnIndex );
         values.add(value);
    }
}
DefaultComboBoxModel dmc = new DefaultComboBoxModel(values.toArray()); 
```

# liferay - 用户无法访问 Liferay 中的组织

> ID：15491213
> 
> 赞同：0
> 
> 时间：2013-03-19T03:55:58.833
> 
> 标签：liferay

我是 Liferay 的新手，请帮我解决这个问题。 **首先**，我创建了一个名为：Sample Organisation 的新组织。 **然后**，我创建了一个名为：Sample Creator 的新角色。 **然后**，我创建一个新用户并将**样本**组织、样本创建者分配给该用户。 **最后**，我登录这个新用户。

**但**我找不到示例组织作为底部图像。谢谢大家。

[http://www.liferay.com/c/message_boards/get_message_attachment?messageId=22771000&attachment=liferay+training.jpg](http://www.liferay.com/c/message_boards/get_message_attachment?messageId=22771000&attachment=liferay+training.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:54:49.940

在 Liferay 6.1 中，组织*可以*附加一个站点，但这不是强制性的。有一个名为“组织站点”的项目带有一个复选框“创建站点”，您必须选中它才能拥有一个站点。

另外，为了能够导航到这样的网站，它必须有页面。

两者都是人们无法访问网站（或组织）的常见原因。

在 Liferay 6.0 中，第一步不是必需的：组织*是*该版本的站点，但您仍然必须拥有页面。

# ios - 主从视图，在详细视图中获得“返回”调用

> ID：15491217
> 
> 赞同：0
> 
> 时间：2013-03-19T03:56:46.323
> 
> 标签：ios, ipad, uisplitviewcontroller

我拥有的是嵌入在导航控制器中的主视图，当您按下按钮时，它会导航到不同的主视图并导致详细视图的替换转场。

我想要的是当按下自动“后退按钮”时，详细视图会返回到我用作启动屏幕的“标题”版本。

**到目前为止我尝试过的事情**

*   委托 UINavigationBar
*   当与其“链接”详细信息视图关联的主视图离开屏幕时手动强制转场

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:02:04.287

好的，想通了。

需要获取“启动页面”才能调用segue。我确实这样做了，但是我使用“替换”类型进行了操作，它不允许“流行”转换

# javascript - 三.JS，如何配置相机不倒模？

> ID：15491219
> 
> 赞同：1
> 
> 时间：2013-03-19T03:56:55.497
> 
> 标签：javascript, three.js, webgl, interactive, collada

我正在使用 Three.JS 和 Collada loader 制作建筑物的 3D 模型。

我正在改进我的系统交互性，但我有两个主要问题：

1-当我在场景中旋转模型时，它会在 3 轴上旋转并使其倒置！我想将模型固定在水平轴上，并且只沿 Y 轴（向上）旋转它。

[现场示例](https://dl.dropbox.com/u/44791710/rotate/Model.html)我如何才能仅围绕 Y 轴（向上）旋转这个立方体？

2-如何使用鼠标移动对系统进行平滑控制？例如在大模型中，平滑缩放到特定的小对象并不容易。如何配置相机以平滑缩放、平移和旋转？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:15:36.563

在您的脚本中添加以下内容：

```
controls.getMouseProjectionOnBall2 = controls.getMouseProjectionOnBall;
controls.getMouseProjectionOnBall = function(x, y){
    return controls.getMouseProjectionOnBall2.call(controls, x, controls.screen.height/2);
} 
```

关于生涩的动作，我看到您已经在尽一切可能（通常人们忽略了 requestAnimationFrame）。我认为除了降低建筑物的复杂性之外，您无法做任何事情来减少抖动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T04:59:51.390

您没有旋转模型。您正在旋转相机。

使用`OrbitControls`而不是`TrackballControls`- 它将保持相机正面朝上。

`OrbitControls`应该是光滑的。如果不是，那么您的模型可能有问题。这只能根据具体情况来处理。

您正在使用一年前的库版本。更新到当前版本是明智的。

三.js r.57。

# wix - 使用 wix burn Boostrapper UI 取消自定义操作执行和回滚

> ID：15491226
> 
> 赞同：0
> 
> 时间：2013-03-19T03:57:23.577
> 
> 标签：wix, custom-action, bootstrapper, burn

我正在尝试创建安装我的 msi 的 wix burn 引导程序。我正在使用 Wix 3.7。我的 msi 几乎没有自定义操作。如果我在第一个（或任何）CA 运行时取消设置，则在执行该特定 CA 后，将按顺序调用所有其他 CA。我已将所有 CA 的 Execute 属性值设置为立即**Execute="immediate"**

我还在 ApplyExecuteProgress 回调中设置了代码**Result.Cancel** 。在日志文件中，我发现了这样的错误：

```
 MSI (s) (10:34) [07:34:58:759]: I/O on thread 4844 could not be cancelled. Error: 1168
 MSI (s) (10:34) [07:34:58:759]: I/O on thread 5164 could not be cancelled. Error: 1168
 MSI (s) (10:34) [07:34:58:759]: I/O on thread 6040 could not be cancelled. Error: 1168
 MSI (s) (10:34) [07:34:58:759]: I/O on thread 2908 could not be cancelled. Error: 1168
 MSI (s) (10:34) [07:34:58:759]: I/O on thread 6272 could not be cancelled. Error: 1168
 MSI (s) (10:34) [07:34:58:760]: I/O on thread 6280 could not be cancelled. Error: 1168
 MSI (s) (10:34) [07:34:58:760]: I/O on thread 6612 could not be cancelled. Error: 1168
 MSI (s) (10:34) [07:34:58:760]: I/O on thread 4076 could not be cancelled. Error: 1168
 MSI (s) (10:34) [07:34:58:760]: I/O on thread 6596 could not be cancelled. Error: 1168 
```

谁能告诉我停止 CA 的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:19:36.427

看起来您的自定义操作有线程在执行无法取消的 I/O。您需要查看您的代码并确定导致问题的原因。这非常特定于您的代码。

# android - 刷新时Android滚动上的PullToRefresh Gridview

> ID：15491230
> 
> 赞同：0
> 
> 时间：2013-03-19T03:58:21.263
> 
> 标签：android, android-widget

我使用[Chris Banes 的 PullToRefresh 库](https://github.com/chrisbanes/Android-PullToRefresh)。PullToRefreshGridview 工作正常，但有一个问题。刷新时，gridview被锁定，无法移动。我设置`ptrScrollingWhileRefreshingEnabled`为 true，gridview 可以在刷新时滚动，但刷新视图始终存在，它不能像 PullToRefreshListview 那样隐藏或变小。

如何修复它，使 PullToRefreshGridview 像 PullToRefreshListview 一样工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T08:40:33.477

您需要调用“onRefreshComplete”方法。

例如..

```
@Override
public void onPullDownToRefresh(PullToRefreshBase refreshView) {
    refreshView.onRefreshComplete();
} 
```

# image - 如何在浏览器选项卡中放置图像/徽标

> ID：15491231
> 
> 赞同：4
> 
> 时间：2013-03-19T03:58:35.303
> 
> 标签：image, web, browser, tabs

快速提问。您知道，当您打开一个新窗口时，在页面顶部您会看到该窗口的选项卡，您会看到您在标题标签中输入的任何内容，您会看到一个小图像（网站徽标）。如何在那个小标签中放置图像/徽标？我必须在我的标题标签中放置一个图片链接吗？！

这是我的 HTML：

```
<!DOCTYPE html>

<html lang="en">

<head>

<title>Round Table</title>

<meta charset="utf-8">
<link rel="stylesheet" href="RTH.css">
<script src="RTH.js"></script>

</head>

<body>

<H1> Come & take a seat at the Round Table B] </H1> 

<p> "Where <i>REAL MUSIC</i> still exists"</p><br><br>

<ol type=I> <H2> <li>BEAT$</li> 
<br><li>Music by Mercile$$</li> 
<br><li>Spoken Word</li> <br>
<li><a href="RthPg2.html" title="RthPg2">Tale$ of a Blind Sword$man</a></li> </H2> </ol><br><br><br>

<dt><i>RTH</i> consists of:</dt> 
<dd>Show Luciano, Pistol McFly, Dior, YZ, & last but not least...Mercile$$</dd>

<p> thee music industry is DEAD !! i hope to bring restoration.<br>

                                                                                            ~mercile$$</p><br>

<footer>&copy; Round Table</footer>
</font>
</body>
</html> 
```

& 这是我的 CSS 文件：

```
body {
        background-image: url("Round Table, Hoe II.jpg");
    background-repeat: Repeat;
    font-family: AR Christy, Kozuka Gothic Pr6N, Cooper std;
    color: Red;
    text-shadow: 1px 0 0 #CEA40C, 0 -1px 0 #CEA40C, 0 1px 0 #CEA40C, -1px 0 0 #CEA40C;
        font-size: 25px;
        margin: 0 auto;
    text-align: center;
    width: 700px;

}

h1 {
    font-family: AR Christy, Kozuka Gothic Pr6N, Cooper std;
    color: Red;
    text-shadow: 2px 0 0 #CEA40C, 0 0px 0 #CEA40C, 0 2px 0 #CEA40C, 0px 0 0 #CEA40C;
        margin: 0 auto;
        text-align: center;
    width: 700px;

}

i {
    font-family: AR Christy, Kozuka Gothic Pr6N, Cooper std;
    color: White;
    text-shadow: 2px 0 0 #CEA40C, 0 0px 0 #CEA40C, 0 2px 0 #CEA40C, 0px 0 0 #CEA40C;
        margin: 0 auto;
        text-align: center;
    width: 700px;

}

dt {

    color: #1BD29B;
    text-shadow: 4px 0 0 #CEA40C, 0 0px 0 #CEA40C, 0 4px 0 #CEA40C, 0px 0 0 #CEA40C;
    font-size: 45pt;
    padding: 10px;

}

dd {

    color: White;
    padding: 5px 10px 5px 10px; 
    background: #f03; 
    border: solid 2px #fff;

}

p {
    padding: 5px 10px 5px 10px; 
    background: #f03; 
    border: solid 2px #fff; 

}

footer {

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-02-24T10:26:04.137

它很容易使用这个站点来转换图像[http://www.favicongenerator.com/](http://www.favicongenerator.com/) 然后在头部，但是改变你的图像名称和路径

```
<link rel="shortcut icon" type="image/png" href="img/logo-favicon.ico.png"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:03:26.140

您需要一个方形图像或图标，然后将此代码放在您的脑海中

```
<link rel="icon" type="image/png" href="/path/image.png"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-23T13:53:55.383

一件重要的事情是将您的链接放在头标签之间：

```
<html>
    <head>
        <link rel="shortcut icon" type="image/png" href="img/logo.ico">
    </head>
    .
    .
    .
</html> 
```

# php - 将两个 xml 文档合并为一个，用新根替换原始根元素

> ID：15491234
> 
> 赞同：1
> 
> 时间：2013-03-19T03:59:04.090
> 
> 标签：php, xml

我有两个 XML 数据源，我想将它们与 PHP 脚本合并到一个 XML 文档中。

第一个源 XML 文档

```
<book>
 <id>1</id>
 <title>Republic</title>
</book> 
```

第二个源 XML 文档

```
<data>
 <author>Plato</author>
 <language>Greek</language>
</data> 
```

我想将两者结合起来得到

```
<book>
 <id>1</id>
 <title>Republic</title>
 <author>Plato</author>
 <language>Greek</language>
</book> 
```

但我得到的是

```
<book>
 <id>1</id>
 <title>Republic</title>
<data>
 <author>Plato</author>
 <language>Greek</language>
</data></book> 
```

这是我的代码

```
$first = new DOMDocument("1.0", 'UTF-8');
$first->formatOutput = true;
$first->loadXML(firstXML);

$second = new DOMDocument("1.0", 'UTF-8');
$second->formatOutput = true;
$second->loadXML(secondXML);

$second = $second->documentElement;

$first->documentElement->appendChild($first->importNode($second, TRUE));

$first->saveXML();

$xml = new DOMDocument("1.0", 'UTF-8');
$xml->formatOutput = true;
$xml->appendChild($xml->importNode($first->documentElement,true));

return $xml->saveXML(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T04:56:39.427

这就是你需要的。您必须使用循环添加节点

```
 $first = new DOMDocument("1.0", 'UTF-8');
        $first->formatOutput = true;
        $first->loadXML($xml_string1);

        $second = new DOMDocument("1.0", 'UTF-8');
        $second->formatOutput = true;
        $second->loadXML($xml_string2);
        $second = $second->documentElement;

        foreach($second->childNodes as $node)
        {

           $importNode = $first->importNode($node,TRUE);
           $first->documentElement->appendChild($importNode);
        }

        $first->saveXML();

        $xml = new DOMDocument("1.0", 'UTF-8');
        $xml->formatOutput = true;
        $xml->appendChild($xml->importNode($first->documentElement,true));

        return $xml->saveXML(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:30:49.210

这是因为您的`$second`var（最初是 DOMDocument）被设置为`$second->documentElement`哪个是根节点。

在您的情况下，根节点是`<data>`节点。

因此，当您`appendChild` `$second`将 deep 参数设置为`TRUE`时，它将附加`<data>`节点及其所有子节点。

解决方案：您应该改为附加 this 的所有子级`$second`。

```
foreach($second->childNodes as $secondNode){
    $first->documentElement->appendChild($secondNode);
} 
```

# yui - 带有文本响应类型的 YUI 数据表

> ID：15491237
> 
> 赞同：0
> 
> 时间：2013-03-19T03:59:48.267
> 
> 标签：yui, yui-datatable

```
 //Define the columns of the table
  var myColumnDefs = new Array();
  for ( i=0; i < $names.length ; i++)
  {
    var colObjConfig = new Object();
    colObjConfig.label =$names[i];
    colObjConfig.resizeable =true;
    colObjConfig.width =150;
    myColumnDefs.push ( new YAHOO.widget.Column(colObjConfig));

  }

 var beginningScoreRow = "1111,1111|1111,1111";

 var myDataSource = new YAHOO.util.FunctionDataSource( function () { 
         return beginningScoreRow ;} );
  myDataSource.responseType = YAHOO.util.DataSource.TYPE_TEXT;
  myDataSource.responseSchema = {
            fieldDelim : ",",
            recordDelim : "|"
  }; 

  var myDataTable = new YAHOO.widget.DataTable("statusTable", myColumnDefs,     
       myDataSource); 
```

我想为 YUI 数据源使用 TYPE_TEXT responseType。但以上未能呈现 YUI 表格列单元格中的数据。我也没有在 JS 控制台中看到任何错误。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:35:08.360

```
 var column = new YAHOO.widget.Column(colObjConfig);
 column.field = ""+i+"";
 myColumnDefs.push (column ); 
```

更改了列定义以添加字段属性，它成功了......

# ios - 在iOS中启动应用程序时如何复制sqlite数据库？

> ID：15491238
> 
> 赞同：12
> 
> 时间：2013-03-19T04:00:04.170
> 
> 标签：ios, objective-c, database, sqlite

每次启动应用程序时，我都想将我的 sqlite 数据库从数据库位置复制到我的 iOS 应用程序的最新更新中。

有什么办法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-19T04:04:28.727

您可以将以下方法添加到您的 appdelegate

```
- (void) copyDatabaseIfNeeded {

    //Using NSFileManager we can perform many file system operations.
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;

    NSString *dbPath = [self getDBPath];
    BOOL success = [fileManager fileExistsAtPath:dbPath];

    if(!success) {

       NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"database.sqlite"];
       success = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];

       if (!success)
          NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
    }
}

- (NSString *) getDBPath
{   
    //Search for standard documents using NSSearchPathForDirectoriesInDomains
    //First Param = Searching the documents directory
    //Second Param = Searching the Users directory and not the System
    //Expand any tildes and identify home directories.

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    //NSLog(@"dbpath : %@",documentsDir);
    return [documentsDir stringByAppendingPathComponent:@"database.sqlite"];
} 
```

并在您的启动方法中调用此方法 **`[self copyDatabaseIfNeeded];`**希望这会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T04:09:03.353

应用程序启动时使用以下代码处理数据库

在你的 appdelegate.m

在

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{

  [self getdatabase];

  return YES;
} 
```

并将以下功能添加到您的 appdelegate.m

```
-(void)getdatabase
{
    BOOL success;
    NSFileManager *filemanager = [NSFileManager defaultManager];
    NSError *error;
    NSArray *pathArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *DBPath = [pathArray objectAtIndex:0];
    NSString *writableDBPath = @"";
    writableDBPath = [DBPath stringByAppendingPathComponent:@"xyz.sqlite"];
    NSLog(@"writableDBPath:%@",writableDBPath);
    success = [filemanager fileExistsAtPath:writableDBPath];
    if (!success) {
        NSString *defaultDBpath = [[[NSBundle mainBundle]resourcePath]stringByAppendingPathComponent:@"xyz.sqlite"];
       success = [filemanager copyItemAtPath:defaultDBpath toPath:writableDBPath error:&error];
       if (!success) {
            NSAssert(0, @"failed to copy database at path with message '%@'.",[error localizedDescription]); 
        }
    }     
    NSLog(@"111writableDBPath:%@",writableDBPath);    
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-24T02:49:37.180

这是 Swift 4/5

```
 func copyDatabaseIfNeeded(sourcePath : String) -> Bool {
      var destPath = NSSearchPathForDirectoriesInDomains(.documentDirectory, .userDomainMask, true).first!
      destPath = destPath + "/foo.db3"
      let databaseExistsWhereNeeded = FileManager.default.fileExists(atPath: destPath)
      if (!databaseExistsWhereNeeded) {
        do {
            try FileManager.default.copyItem(atPath: sourcePath, toPath: destPath)
            print("db copied")
        }
        catch {
            print("error during file copy: \(error)")
        }
    }
    return true
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T04:06:32.910

**在AppDelegate 类**中试试这个

 **.h 文件

```
@property(nonatomic, retain) NSString *dbPath; 
```

.m 文件

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self copyDatabaseIfNeeded];
}
- (void) copyDatabaseIfNeeded
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;
    dbPath = [self getDBPath];

    BOOL success = [fileManager fileExistsAtPath:dbPath];

    if(!success)
    {
       NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"sampleDB.sqlite3"];
       success = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];
       if (!success)
          NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
    }
}

/********* Database Path *********/
- (NSString *) getDBPath
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);
    NSString *documentsDir = [paths objectAtIndex:0];

    return [documentsDir stringByAppendingPathComponent:@"sampleDB.sqlite3"];
} 
```

如果在应用程序中没有找到任何数据库，它将自动复制。

希望它会帮助你。

谢谢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T04:05:24.367

试试这个：

```
NSArray *docPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *strDocDirectory = [docPath objectAtIndex:0];

    self.strDatabasePath = [strDocDirectory stringByAppendingPathComponent:YOUR_DB];

    NSFileManager *filemgr = [NSFileManager defaultManager];

    if ([filemgr fileExistsAtPath: self.strDatabasePath ] == NO)
    {
        const char *dbpath = [self.strDatabasePath UTF8String];
        sqlite3 *contactDB;

        if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
        {
            char *errMsg;
            const char *sql_stmt = "CREATE TABLE IF NOT EXISTS YOUR_Table (ID INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT)";

            if (sqlite3_exec(contactDB, sql_stmt, NULL, NULL, &errMsg) != SQLITE_OK)
            {
                NSLog(@"Failed to create table");
            }

            sqlite3_close(contactDB); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-31T08:29:42.893

```
-(void)openDatase{  
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
    NSString *documentsDirectory = [paths objectAtIndex:0];  
    self.databasePath = [documentsDirectory stringByAppendingPathComponent:@"weightCal.sqlite"];  
    if (sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {  
        NSLog(@"Database Successfully Opened ");  
    } else {   
        NSLog(@"Error in opening database ");  
    }  
}

-(void)dealloc{
    sqlite3_close(database);
    [super dealloc];
}

-(void)copyDatabase {
    BOOL success;
    NSFileManager *fileManager=[NSFileManager defaultManager];
    NSError *error;
    NSArray *paths= NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory=[paths objectAtIndex:0];
    NSString *writablePath = [documentsDirectory stringByAppendingPathComponent:@"test.sqlite"];
    success = [fileManager fileExistsAtPath:writablePath];
    if(success) {
       return;
    }
    NSString *defaultPath=[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"test.sqlite"];
    success=[fileManager copyItemAtPath:defaultPath toPath:writablePath error:&error];
    if(!success){
       NSAssert1(0,@"Failed to create writable database file with message '%@' .",[error localizedDescription]);
    }
} 
```

在 中声明以下 teo 变量`.h`：

```
sqlite3 *database; 
NSString *databasePath; 
```**

# android - Android：在搜索搜索建议上，每次点击它打开新的活动，我们可以打开相同的活动不同的数据

> ID：15491242
> 
> 赞同：0
> 
> 时间：2013-03-19T04:00:24.087
> 
> 标签：android, search, onitemclick

我已经实现了自定义搜索建议，在建议点击我开始详细活动并显示数据很好时，问题是每当我点击建议为每个建议打开新活动时。例如：我有建议苹果球猫

当我点击 Apple 打开一个带有 Apple 数据的详细活动时，我现在再次点击了搜索点击了 Ball 并打开了带有 Ball 数据的详细活动

当我单击后退按钮时，它会导航回 Apple 详细信息活动，那么如何避免为每个建议打开新的详细信息活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:26:48.670

你想控制你的后台堆栈。[这是一个应该有帮助的答案。](https://stackoverflow.com/questions/5794506/android-clear-the-back-stack)

基本上，当你启动你的意图时，你可以添加一些应该有帮助的标志。

```
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

查看[Android 文档](http://developer.android.com/reference/android/content/Intent.html#setFlags%28int%29)以获取有关您可以根据意图发送的标志的更多信息。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:21:12.280

这应该适合你。

设置`android:noHistory=true`在`detail activity`您的`AndroidManifest.xml`.

注意：这只能在按下返回按钮时解决，它不会返回您的 Apple 详细信息活动。不过，它仍在开启新的细节活动。

# c# - 以递归方式将 XML 导入对象

> ID：15491244
> 
> 赞同：0
> 
> 时间：2013-03-19T04:00:33.757
> 
> 标签：c#, asp.net, xml

我正在尝试编写一个使用反射的方法，以便在遍历 XElement 时获取属性并设置它们的值：

假设我有一个像这样的类，它只为我提供要解析的 XML 值：

```
class XMLController
{
    public string XML
    {
        get{
            return @"<FieldGroup name='People' count='20'>
                <Fields>
                    <Field Name='Jon' LastName='McFly'/>
                    <Field Name='Michael' LastName='Jackson'/>
                </Fields>
            </FieldGroup>";
        }
    }
} 
```

这就是我的对象的样子：

```
class FieldGroup
{
    public string Name {get;set;}
    public string Count {get;set;}
    public IEnumerable<Field> Fields {get;set;}
}

class Field
{
    public string Name {get;set;}
    public string LastName {get;set;}
} 
```

映射器方法遍历`XElement`并且由于节点名称与对象名称匹配，我认为这有助于更多，但我还没有想出真正有用的东西。我不想传递类型，而是该方法适用于几乎所有以相同格式传入的 XML。

它只知道 XML 节点和属性是匹配名称这一事实。

这是我所做的，但并没有真正奏效：

```
class XMLObjectMapper
{
    public T Map<T>(XElement element) where T: class, new()
    {
        T entity = (T) Activator.CreateInstance(typeof(T));
        if(element.HasAttributes)
        {
            MapXMLAttributesToObject<T>(element,entity);
        }
        if(element.HasElements)
        {
            foreach (var childElement in element.Elements())
            {
                //if the child element has child elements as well, we know this is a collection.
                if(childElement.HasElements)
                {
                    var property = GetProperty<T>(childElement.Name.LocalName);
                    property.SetValue(entity,new List<property.PropertyType>());
                    Map<T>(childElement);

                }
                else
                {
                    var property = GetProperty<T>(childElement.Name.LocalName);
                    var type = Activator.CreateInstance(property.PropertyType);
                    type.Dump();
                }
            }
        }
        return entity;
    }

    private void MapXMLAttributesToObject<T>(XElement element, T entity)
    {
        foreach(XAttribute attribute in element.Attributes())
        {
            var property = GetProperty<T>(attribute.Name.LocalName);
            property.SetValue(entity,attribute.Value);
        }
    }

    private PropertyInfo GetProperty<T>(string propertyName)
    {
        return typeof(T).GetProperty(propertyName,BindingFlags.IgnoreCase | BindingFlags.Public | BindingFlags.Instance);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T05:58:07.687

你走在正确的轨道上，但正如你所注意到的，你有一些错误。

以下代码无法编译，因为您不能使用值 ( `property.PropertyType`) 代替类型名称。C# 是一种静态类型语言，因此必须在编译时知道类型，而不是在变量中：

```
new List<property.PropertyType>() 
```

但是，如果使用反射，则可以在运行时选择类型。我们可以这样做：

```
Activator.CreateInstance(typeof(List<>).MakeGenericType(collectionElementType)) 
```

您遇到的另一个问题是您不能只调用`Map<T>(childElement)`. 首先，T 不是正确的类型——它是父元素的类型，而不是子元素的类型。其次，child其实是一个集合，`Map<T>`不知道怎么处理集合，只知道单个对象。我们必须遍历子元素，映射到每个单独`Map<T>`的元素（使用集合中元素的类型调用 - 在您的示例中，`Map<Field`），然后将它们全部添加到集合中。我已经制作了一个`Map<T>`有效的新版本：

```
public T Map<T>(XElement element) where T : class, new()
{
    T entity = (T)Activator.CreateInstance(typeof(T));
    if (element.HasAttributes)
    {
        MapXMLAttributesToObject<T>(element, entity);
    }
    if (element.HasElements)
    {
        foreach (var childElement in element.Elements())
        {
            var property = GetProperty<T>(childElement.Name.LocalName);
            // If the child element has child elements as well, we know this is a collection.
            if (childElement.HasElements)
            {
                // Assume collections are of type IEnumerable<T> or List<T>
                var collectionElementType = property.PropertyType.GetGenericArguments()[0];
                // var collectionValue = new List<collectionElementType>()
                var collectionValue = Activator.CreateInstance(typeof(List<>).MakeGenericType(collectionElementType));
                foreach (var grandchildElement in childElement.Elements())
                {
                    // var collectionElement = this.Map<collectionElementType>(grandchildElement);
                    var collectionElement = this.GetType().GetMethod("Map").MakeGenericMethod(collectionElementType).Invoke(this, new object[] { grandchildElement });
                    collectionValue.GetType().GetMethod("Add").Invoke(collectionValue, new object[] { collectionElement });
                }
                property.SetValue(entity, collectionValue, null);
            }
            else
            {
                // I'm not sure what this should do -- this case doesn't happen in your example.
                throw new NotImplementedException();
            }
        }
    }
    return entity;
} 
```

它当然需要更多的错误处理，我假设你想在我抛出`NotImplementedException`. 但是，它适用于您的样本。

# ios - AFJSONRequestOperation 崩溃数据参数为零

> ID：15491252
> 
> 赞同：0
> 
> 时间：2013-03-19T04:01:11.110
> 
> 标签：ios, objective-c, afnetworking

我遇到了一个奇怪的问题，只有在我运行我的应用程序时才会间歇性发生。我正在尝试使用 AFNetworking 从两个不同的来源提取 JSON。有时，当操作运行时，应用程序会在`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'data parameter is nil'`登陆时崩溃`json_request_operation_processing_queue`。

我希望这不是 AFNetworking 的问题，我只是做错了一些事情。以下是我认为相关的方法（JSONManager 扩展了 AFHTTPClient）：

```
+ (JSONManager *) sharedJSONManager {
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        _sharedJSONManagerInsance = [[JSONManager alloc] initWithBaseURL:[NSURL URLWithString:sourceUrl1]];
    });
    return _sharedJSONManagerInsance;
}

- (void) loadOperations {
    _sharedJSONManagerInsance.operations = [NSMutableArray arrayWithCapacity:2];
    [_sharedJSONManagerInsance.operations addObject:[self fetchJSON:sourceUrl1]];
    [_sharedJSONManagerInsance.operations addObject:[self fetchJSON:sourceUrl2]];
}

- (void) executeOperations {
    [_sharedJSONManagerInsance loadOperations];
    _sharedJSONManagerInsance.fetchedStories = [[NSMutableArray alloc] init];
    [self enqueueBatchOfHTTPRequestOperations:operations
                                progressBlock:^(NSUInteger numberOfFinishedOperations, NSUInteger totalNumberOfOperations) {
                                    NSLog(@"Finished %d of %d", numberOfFinishedOperations, totalNumberOfOperations);
                                }
                              completionBlock:^(NSArray *operations) {
                                  [[CoreDataManager sharedManager] persistFetchedStories:_sharedJSONManagerInsance.fetchedStories];
                                  _sharedJSONManagerInsance.operations = nil;
                                  NSLog(@"All operations finished");
                              }];
}

- (AFHTTPRequestOperation *)fetchJSON:(NSString*)requestUrl {

    NSURL* jsonUrl = [NSURL URLWithString:requestUrl];
    NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:jsonUrl];
    AFJSONRequestOperation *operation = nil;

    operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        if([requestUrl isEqualToString:sourceUrl1]) {

            NSArray* arr = [[JSON valueForKeyPath:@"data"] valueForKey:@"children"];
            for (NSDictionary *item in arr) {
                FetchedStory* fs = [[FetchedStory alloc] init];
                fs.title = [[item valueForKey:@"data"]valueForKey:@"title"];
                fs.url = [[item valueForKey:@"data"]valueForKey:@"url"];
                fs.score = [[item valueForKey:@"data"]valueForKey:@"score"];
                fs.source = @"source1";
                [self.fetchedStories addObject:fs];
            }
        }
        else if([requestUrl isEqualToString:sourceUrl2]) {
            NSArray* arr = [JSON valueForKeyPath:@"items"];
            for (NSDictionary *item in arr) {
                FetchedStory* fs = [[FetchedStory alloc] init];
                fs.title = [item valueForKey:@"title"];
                fs.url = [item valueForKey:@"url"];
                NSString* scoreString = [item valueForKey:@"score"];
                if(scoreString != nil && [scoreString length]!=0) {
                    NSRange spaceRange = [scoreString rangeOfString:@" "];
                    scoreString = [scoreString substringToIndex:spaceRange.location];
                    fs.score = [NSDecimalNumber decimalNumberWithString:scoreString];
                    fs.source = @"source2";
                    [self.fetchedStories addObject:fs];
                }
            }
        }
    } failure:nil];

    return operation;
} 
```

崩溃发生在“所有操作完成”记录到控制台之前。同样，这只会在某些时候发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:47:54.690

看起来这是 AFJSONRequestOperation 的 responseJSON 方法的错误。我添加了一个零检查，这似乎是一个很好的创可贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T16:20:15.093

实际上你忘记设置 HTTP 方法参数它应该是这样的：

```
[request setHTTPMethod:@"get"]; // post, patch .... 
```

# php - 从 Javascript 访问 base64 编码数据

> ID：15491255
> 
> 赞同：0
> 
> 时间：2013-03-19T04:01:36.557
> 
> 标签：php, javascript, canvas, base64, raphael

我有一些代码允许用户在图像上注释/绘制。然后有一个保存按钮，它将带有注释的图像作为 base64 编码字符串发送到服务器。我需要能够“访问”该数据并将编辑后的图像基本上保存回服务器。

按钮代码：

```
<input id="clickMe" value="Save Image" onclick="ExportOpenImage();" type="button"> 
```

调用的函数：

```
function ExportOpenImage(){
  window.open(sp.exportAsCanvas().toDataURL('image/png') )
} 
```

所以，我的问题是，如何将`base64 encoded`字符串传递给服务器进行处理，而不是将其发送给浏览器进行显示？

我在这个中使用拉斐尔和画布。如果您需要更多代码，请告诉我。

# ruby-on-rails - 测试用户是否刚刚使用 Devise 登录

> ID：15491256
> 
> 赞同：1
> 
> 时间：2013-03-19T04:01:40.247
> 
> 标签：ruby-on-rails, devise, active-model-serializers

如果他们刚刚登录，我想`authentication_token`在我的 JSON 响应中包含一个用户，以便我的 API 的使用者可以跟踪它并验证未来的请求。但我不想包含令牌。我正在使用 Active Model Serializers 来自定义我的 JSON 输出：

```
class UserSerializer < ActiveModel::Serializer
  attributes :id, :email, :authentication_token

  def include_authentication_token?
    # what to put here?
  end
end 
```

Devise 会话控制器使用`respond_with resource`where 资源是登录用户，因此默认情况下它将使用 UserSerializer。我可以自定义设计控制器，但我更愿意使用`include_authentication_token?`. Devise 中是否有一些方法会在用户刚登录时返回 true（即响应来自 Devise::SessionsController）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:14:48.330

虽然当前 Request 在您的子类中不会自动可用`ActiveModel::Serializer`，但您可以通过将其`options`包含在对`UserSerializer.new`.

**如果您显式创建序列化程序**，例如：

```
UserSerializer.new(@user, scope: current_user) 
```

这意味着您可以简单地传递第二个选项，称为`request`：

```
UserSerializer.new(@user, scope: current_user, request: request) 
```

从那时起，您可以通过调用来访问序列化程序中的当前请求`options[:request]`。例如，要检查内部的当前控制器`UserSerializer`，只需检查

```
options[:request].params[:controller] 
```

如果它显示为`"devise/sessions"`，则可以包含令牌。否则，**如果您使用标准的 Devise 控制器**来处理登录，您可能必须将`Devise::SessionsController`登录子类化并重新路由到新控制器：

```
# app/controllers/sessions_controller.rb
class SessionsController < Devise::SessionsController
  def create
    self.resource = warden.authenticate!(auth_options)
    set_flash_message(:notice, :signed_in) if is_navigational_format?
    sign_in(resource_name, resource)
    respond_with resource, location: after_sign_in_path_for(resource), request: request
  end
end

# config/routes.rb
devise_scope :user do
  post "sign_in" => "sessions#create", as: :user_session
end 
```

请注意，我尚未对此进行测试。在阅读[的源代码](https://github.com/rails/rails/blob/master/actionpack/lib/action_controller/metal/mime_responds.rb#L323)时`ActionController::MimeResponds#respond_with`，似乎给出的任何选项`#respond_with`都将向下传递给响应者，该响应者被劫持，`ActionController::Serialization`并且看起来[选项一直传递](https://github.com/rails-api/active_model_serializers/blob/master/lib/action_controller/serialization.rb#L54)到`resource`的序列化器中。

祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T04:15:59.587

也许这会对你有所帮助。

[- （布尔）signed_in？（范围=无）](http://rubydoc.info/github/plataformatec/devise/master/Devise/Controllers/Helpers#signed_in?-instance_method)

并在stackoverflow上 [设计如何在自定义会话控制器中添加登录检查](https://stackoverflow.com/questions/9844983/devise-how-to-add-signed-in-check-in-custom-session-controller)

# c# - 从 html 字符串中拆分段落并删除空段落

> ID：15491259
> 
> 赞同：0
> 
> 时间：2013-03-19T04:01:52.090
> 
> 标签：c#, html, regex

我有一串html。我想将所有段落拆分为一个数组列表。但拆分后的段落不应为空。分割后的段落应该包含一些普通文本，如果它只包含 html 文本并且里面没有普通文本，例如：`<htmltag>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</htmltag>`，那么它应该被销毁或不分割。

这是如何在 html 字符串中拆分段落的示例：

```
System.Text.RegularExpressions.Match m = System.Text.RegularExpressions.Regex.Match(htmlString, @"<p>\s*(.+?)\s*</p>");
ArrayList groupCollection = new ArrayList();
while (m.Success)
{
   groupCollection.Add(m.Value);
   m = m.NextMatch();
}
ArrayList paragraphs = new ArrayList();
if (groupCollection.Count > 0)
{
   foreach (object item in groupCollection)
   {
      paragraphs.Add(item);
   }
} 
```

上面的代码可以拆分所有段落，但它无法识别哪个段落是空的，就像我上面所说的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:57:42.847

我有我自己的问题的答案。这是我自己版本的代码：

```
System.Text.RegularExpressions.Match m = System.Text.RegularExpressions.Regex.Match(htmlString, @"<p>\s*(.+?)\s*</p>");
    ArrayList groupCollection = new ArrayList();
    while (m.Success)
    {
        groupCollection.Add(m.Value);
        m = m.NextMatch();
    }
    ArrayList paragraphs = new ArrayList();
    if (groupCollection.Count > 0)
    {
        foreach (object item in groupCollection)
        {
            try
            {
                System.Text.RegularExpressions.Regex rx = new System.Text.RegularExpressions.Regex("<[^>]*>");
                // replace all matches with empty string
                string str = rx.Replace(item.ToString(), "");
                string str1 = str.Replace("&nbsp;", "");
                if (!String.IsNullOrEmpty(str1))
                {
                    paragraphs.Add(item.ToString());
                }
            }
            catch
            {
                //This try-catch just prevent future error.
            }
        }
    } 
```

在上面的代码中。你可以看到我先删除了段落中的所有html标签，然后替换了html字符串中的所有空。这将帮助我识别一个空段落。

# r - 在 R 中添加图例文本和行图例

> ID：15491264
> 
> 赞同：0
> 
> 时间：2013-03-19T04:02:19.937
> 
> 标签：r, legend

我在 R 中有一个由基本图形制作的情节，我想添加一些图例。图例的前两行只是文本：例如

```
Data is from xx
Model is yy 
```

我想添加到图例并**与前两行正确对齐的**第三行是带有 legend的**蓝色虚线**`y=0.05`。因此，我最终想要的是

```
Data is from xx
Model is yy
---- y = 0.05 
```

有没有方便的方法来做到这一点？谢谢！

# mysql - 使用limit和where子句进行分页

> ID：15491267
> 
> 赞同：1
> 
> 时间：2013-03-19T04:02:54.847
> 
> 标签：mysql

大家。请帮我。现在我正在处理分页。我想根据 tblcategory.cat_id 每页显示 5 条记录。但我的查询字符串有问题..

1.  表 tblcategory

    如果不存在则创建表`tblcategory`( `cat_id`int(11) NOT NULL AUTO_INCREMENT, `cat_name`char(50) NOT NULL, PRIMARY KEY ( `cat_id`)) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=11;

2.  表 tbl 内容

    如果不存在则创建表`tblcontent`( `con_id`int(11) NOT NULL AUTO_INCREMENT, `title`char(100) NOT NULL, `description`text NOT NULL, `date_posted`date NOT NULL, `author`char(50) NOT NULL, `cat_id`int(11) NOT NULL, PRIMARY KEY ( `con_id`), KEY `cat_id`( `cat_id`) ) ENGINE=InnoDB 默认字符集=latin1 AUTO_INCREMENT=78 ;

3.  表 tblimage

    如果不存在则创建表`tblimage`（ `img_id`int(11) NOT NULL AUTO_INCREMENT, `con_id`int(11) NOT NULL, `img_name`varchar(250) NOT NULL, `img_thum`varchar(250) NOT NULL, PRIMARY KEY ( `img_id`), KEY `con_id`( `con_id`) ） ENGINE=InnoDB DEFAULT CHARSET= latin1 AUTO_INCREMENT=9 ;

这是我的查询字符串，所以我的 sql 语句有什么问题。

```
SELECT * FROM tblcontent LEFT JOIN tblcategory
    ON (tblcontent.cat_id = tblcategory.cat_id)
    LEFT JOIN tblimage ON (tblimage.con_id = tblcontent.con_id)
    ORDER BY tblcontent.date_posted DESC
    LIMIT 0,5 WHERE tblcategory.cat_id=1 
```

结果是：错误代码：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的“WHERE tblcategory.cat_id=1”附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:07:23.323

试试这个

```
SELECT * FROM tblcontent LEFT JOIN tblcategory
    ON (tblcontent.cat_id = tblcategory.cat_id)
    LEFT JOIN tblimage ON (tblimage.con_id = tblcontent.con_id)
  WHERE tblcategory.cat_id=1
    ORDER BY tblcontent.date_posted DESC
    LIMIT 0,5 
```

首先需要指定where条件，然后指定顺序

[语法](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)见这里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:05:30.693

放错了`WHERE`位置 - 它需要在`ORDER BY`.

IE

```
SELECT * FROM tblcontent
LEFT JOIN tblcategory ON (tblcontent.cat_id = tblcategory.cat_id)
LEFT JOIN tblimage ON (tblimage.con_id = tblcontent.con_id)
WHERE tblcategory.cat_id=1
ORDER BY tblcontent.date_posted DESC
LIMIT 0,5 
```

# unit-testing - 单元测试是负担吗？

> ID：15491270
> 
> 赞同：-3
> 
> 时间：2013-03-19T04:03:39.150
> 
> 标签：unit-testing, design-patterns

我没有做过太多的单元测试（从来没有做过 TDD），但我正在做一个项目，我希望至少业务层是可单元测试的，而且有几件事我似乎无法做到理解。

假设我有一个功能：

*   提示用户输入 Excel 工作簿文件名
*   将工作簿的内容加载到网格中
*   在表单上向用户显示该网格，该表单还接受用户的几个输入
*   显示带有进度条的模态表单，该进度条在功能异步更新时...
    *   执行这样或这样的操作（基于现在关闭的表单上的用户输入）并且 - 粗略地说，最终将网格内容导入数据库表。

我*想*我在这里设法正确分离了业务、数据和表示关注点：表单仅包含与表示相关的代码，数据操作是在 DAL（Linq to SQL）上进行的方法调用，一切都在业务逻辑层进行协调。依赖注入到构造函数中；例如，表单需要一个`DataTable`，而不是 Excel 工作簿文件名。

如果我想到我可以（或*应该*）编写的测试，我......除了验证`Foreach`循环执行预期迭代次数的琐碎（无用的？）测试之外，我想不出任何测试，`GetMilimeterDimensions`函数确实做到了将英寸转换为毫米（例如，`GetMilimeterDimensions(new SizeF(1f,1f))`确实返回 a 的测试`SizeF { Width = 25.4, Height = 25.4 }`。好吧，现在阅读此内容，似乎函数的名称应该更像*ConvertInchToMilimeter*之类的东西，而且，这感觉就像一个属于某个*BusinessMath*类的静态方法的函数。不好我猜的例子。

重点是，我想要测试的所有这些函数和方法`private`，最终都由类的 COM 可见`Execute()`方法调用。这是否意味着我必须制作它们`public` *只是为了测试*？或者，什么，将我的功能的*行为*嵌入到某些公开其方法的*FunctionalityImplementation*类中，并让我的功能调用这些方法？感觉有点矫枉过正...

然后是 DAL 调用；我需要实现一些存储库模式来模拟 CRUD 操作并能够编写测试来验证是否插入了预期的记录数量......但这超出了我猜的业务层可测试性。

尽管如此，**似乎需要做很多工作才能在一些 VS 插件中获得一堆绿点**。我意识到一旦编写了测试，破坏测试的代码更改会让你感谢测试是首先编写的，但我认为我完全错过了单元测试的重点，如果我写的测试将毫无意义完全有用；请在这里帮助我，我想得越多，在我看来，单元测试只是强加其设计模式的额外工作。

不要误解我的意思（我猜是问题的标题），我确实看到了 TDD 的好处，我读过单元测试爱好者写的 ASP.NET MVC 书籍，但我似乎无法理解如何将这些原则应用于一个简单的功能，更不用说应用于整个 COM 可见的库项目......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:17:44.200

单元测试不是负担；它可以节省大量时间、防止错误并促进重构，从而保持代码的可维护性和可塑性。

但是你可能不需要这个项目的单元测试。

最紧迫的单元测试将确保您的业务逻辑按照您的想法执行。这在业务逻辑很复杂、有很多移动部件并且随着时间的推移可能会变得更加复杂的情况下非常有用：

```
 Person *p = ...sample person....;
 LoanRequest loan(p, $1,000,000);
 Assert(loan.CanBeApproved(bankPolicy,region,market,term),true); 
```

但是，如果底层逻辑简单且明显正确，这并不重要

```
 Price=Total+Shipping; 
```

同样，如果您正在编写一个快速的小部件以立即短期使用，那么长期维护不是您首先关心的问题，并且测试作为未来合作者的文档的作用可能是无关紧要的。但是，如果您正在构建产品，您将需要这些测试。

* * *

一般来说，单元测试应该主要关注公共行为。但有时您可能会发现验证通常是私有的中间结果要容易得多。公开一个方法，或者提供一个特殊的测试钩子，可能是一个合理的代价，可以让你相信软件会按照你的想法去做，并且即使在其他人开始改变它之后也会继续按照你的想法去做。

# css - 在另一个 div 上放置和对齐 div

> ID：15491271
> 
> 赞同：1
> 
> 时间：2013-03-19T04:03:52.733
> 
> 标签：css, html, alignment

我一直在疯狂地试图将一个 div 应用到另一个包含图像的 div 上。div 应该包含一个简单的 HTML 链接，就像这张图片中一样：

[https://dl.dropbox.com/u/39682698/Fraud-Fighter2.png](https://dl.dropbox.com/u/39682698/Fraud-Fighter2.png)

不幸的是，当页面呈现图像时，URL 并没有以图像为中心，如下面的现场站点所示：

[http://us.aktive.me/maintenance/](http://us.aktive.me/maintenance/)

HTML：

```
<html>
<head>
<meta charset="utf-8">
<title>ThreatMetrix Maintenance Page</title>
<link href="main.css" rel="stylesheet" type="text/css">
</head>

<body>
<div id="container">
    <div id="apDiv1"><a href="http://threatmetrix.com/support">http://threatmetrix.com/support</a></div>
    <div id="image"><img src="fraud-fighter.png" width="977" height="750" alt="ThreatMetrix Maintenance Page" /></div>
</div>

</body>
</html> 
```

CSS：

```
@charset "utf-8";
/* CSS Document */

body {
    background-color: #3fa9f5;
    /*background-image:url(fraud-fighter.png);*/
    background-repeat:no-repeat;
    background-position:center;
    background-position:top;
    font-size : 1.5em;
    font-family : Frutiger, "Frutiger Linotype", Univers, Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans Condensed", "Liberation Sans", "Nimbus Sans L", Tahoma, Geneva, "Helvetica Neue", Helvetica, Arial, sans-serif;
}

a:link     { background-color: transparent; color:#f28a1a}
a:visited  { background-color: transparent; color:#f28a1a}
a:active   { background-color: transparent; position:relative}
a:hover    { background-color: transparent; color:#cb7518}
a.noformat { text-decoration: none; color: #121212}

#container {
    width: 1000px;
    height: 800px;
    position: relative;
    display: block;
    margin-left: auto;
    margin-right: auto; 
}

#apDiv1 {
    margin-top: 240px;
    text-align: center;
    position:absolute;
}

#image {
    z-index: 10;
} 
```

一百万提前感谢任何可以帮助我的人:) -Dean

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:11:26.950

#apDiv1 需要与容器 div 的宽度相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:11:42.900

现在根据您的设计定义您的`ID` `#apDiv1` `left 50%`和`margin-left`

**像这样**

```
#apDiv1 {
left: 50%;
margin-left: -185px;
} 
```

///////////////////////////////////////// //////////////////////////////////

**第二种方法是这个**

**现在定义**你的`ID` `#apDiv1` `left:0`和`right:0;`

```
#apDiv1{
left:0;
right:0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T04:07:20.513

如下设置css。

```
#apDiv1 {
    position: absolute;
    right: 350px;
    text-align: center;
    top: 250px;
} 
```

如果你想进去`%`

```
#apDiv1 {
    position: absolute;
    left: 30%;
    text-align: center;
    top: 31%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T04:08:44.943

要使您的 DIV 居中，您可以执行以下操作：

```
width:400px; left:50%; margin-left: -200px; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T04:13:50.777

将 apDiv1 css 设置为以下

```
#apDiv1 {
margin-top: 242px;
text-align: center;
position: absolute;
width: 100%; } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T04:15:21.177

这应该工作

```
#apDiv1 {
        width:inherit;
        text-align: center;
        position:absolute;
        top:240px;
} 
```

# android - 如何使 intellij android 预览窗口保持打开状态？

> ID：15491277
> 
> 赞同：6
> 
> 时间：2013-03-19T04:04:17.220
> 
> 标签：android, intellij-idea

我知道必须有一个简单的方法来做到这一点，但还没有找到。我在文本 + 预览窗口中打开了一个 android 布局，并`styles.xml`在其下方进行了拆分。每次我在`styles.xml`窗口中单击时，预览窗口都会消失。在我编辑样式时有什么办法让它保持打开状态？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-11-03T16:00:47.320

在 Android Studio 3.0 上有点不同，但仍然很简单：

[![安卓工作室 3.0](../Images/5a6b97aaef322ca8f131c387e7567db5.png)](https://i.stack.imgur.com/7yxd3.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T04:37:19.483

此选项位于齿轮图标下方：

![齿轮](../Images/a461232383d27fc361d919082eef19a0.png)

# node.js - node-ffi - EnumWindows 的回调提取

> ID：15491279
> 
> 赞同：6
> 
> 时间：2013-03-19T04:04:27.300
> 
> 标签：node.js

要求是在当前桌面中打开所有窗口。我正在尝试从 node-ffi 调用 EnumWindows，它将处理程序长度设为 0。

节点参考链接：[node-ffi 模块](https://github.com/rbranson/node-ffi)

**我的代码片段：**

```
/**
@Name :Parthasarathy Balakrishnan
@Version : V0.1
@Date : 18/03/2013 */

var ffi = require('ffi'),
ref = require('ref'),
int = ref.types.int,
assert = require('assert'),
bindings = require('bindings'),
buffer = require('buffer')

var user32,Kernel32;
var lpEnumFunc;
var invokeCount=0;

/**EnumWindows API CALL
    BOOL WINAPI EnumWindows(_In_ WNDENUMPROC lpEnumFunc,_In_ LPARAM lParam);
    Parameters
    lpEnumFunc [in]
        Type: WNDENUMPROC
        A pointer to an application-defined callback function. For more information, see EnumWindowsProc.
    lParam [in]
        Type: LPARAM
        An application-defined value to be passed to the callback function.
**/
user32 = new ffi.Library('user32', {'EnumWindows':[ 'bool', ['pointer','int32'] ], // BOOL WINAPI EnumWindows(_In_ WNDENUMPROC lpEnumFunc,_In_ LPARAM lParam);
    'GetWindowTextW':[ 'int32', ['pointer','pointer','int32']]});

Kernel32 = new ffi.Library('kernel32', {'GetLastError':['bool', ['pointer','int32'] ]}); // Not required for this demo

lpEnumFunc = ffi.Callback('bool',['pointer','int32'],function (hwnd,lParam){ 
    console.log("------------------START---------------------") 
    console.log(hwnd);
    console.log(ref.getType(hwnd));
    console.log("Is Buffer/Pointer NULL :\t"+ref.isNull(hwnd));
    console.log("lParam :\t"+lParam)
    console.log("EnumWindows Callback handler : \t "+hwnd.length);
    //Pointer implementations-start
    var buf = new Buffer(ref.sizeof.pointer);
    ref.writePointer(buf, 0, hwnd);
    var out = ref.readPointer(buf, 0, hwnd.length)
    for (var i = 0, l = out.length; i < l; i++) {
        console.log(out[i])
    }
    //Pointer implementations-end
    console.log("ref address :\t"+ref.address(hwnd));
    console.log("------------------END---------------------")

    return true;
});

console.log("Calling EnumWindows init");
var bool = user32.EnumWindows(lpEnumFunc,0);
console.log("EnumWindows return value :\t"+bool);
// register the callback function

process.on('uncaughtException', function () {
    console.error('uncaught:', arguments);
}); 
```

输出：

```
Calling EnumWindows init

------------------START---------------------
         { size: 0,
            indirection: 1,
            get: [Function: get],
            set: [Function: set],
            name: 'void',
            ffi_type: }

            Is Buffer/Pointer NULL : false
            lParam : 0
            EnumWindows Callback handler : 0
            ref address : 197424

------------------END--------------------- 
```

从输出我得到处理程序大小为 0。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-09T23:33:07.520

我不相信任何这段代码，它只是这里的另一个答案，修复然后转换为常规 Javascript 而不是 Coffee Script

```
var ref = require('ref');
var ffi = require('ffi');

var voidPtr = ref.refType(ref.types.void);
var stringPtr = ref.refType(ref.types.CString);

var user32 = ffi.Library('user32.dll', {
    EnumWindows: ['bool', [voidPtr, 'int32']],
    GetWindowTextA : ['long', ['long', stringPtr, 'long']]
});

windowProc = ffi.Callback('bool', ['long', 'int32'], function(hwnd, lParam) {
  var buf, name, ret;
  buf = new Buffer(255);
  ret = user32.GetWindowTextA(hwnd, buf, 255);
  name = ref.readCString(buf, 0);
  console.log(name);
  return true;
});

user32.EnumWindows(windowProc, 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-24T15:28:22.317

您似乎将“hwnd”视为指针，认为您可以简单地使用 int 或 long。这对我有用（咖啡脚本）：

```
ref = require 'ref'
ffi = require 'ffi

voidPtr = ref.refType(ref.types.void)
stringPtr = ref.refType(ref.types.CString)

bindings =
    EnumWindows: ['bool', [voidPtr, 'int32']]
    GetWindowTextA : ['long', ['long', stringPtr, 'long']]

user32 = ffi.Library('user32.dll', bindings)

windowProc = ffi.Callback 'bool', ['long', 'int32'], (hwnd, lParam) ->
    buf = new Buffer 255
    ret = libm.GetWindowTextA hwnd, buf, 255
    name = ref.readCString(buf, 0)
    console.log name
    true

user32.EnumWindows windowProc, 0 
```

# javascript - Mootools - 销毁不在 DOM 中的对象内的节点

> ID：15491282
> 
> 赞同：0
> 
> 时间：2013-03-19T04:04:41.410
> 
> 标签：javascript, mootools

如果元素不在 DOM 中，Mootool 的 destroy 方法似乎不起作用：

```
var statics = $('statics').clone(true, true);

statics.destroy('.prototype');

statics.inject($('main')); 
```

在此示例中，我尝试从静态对象中删除所有具有类“原型”的元素。它失败。

有什么建议吗？

编辑：

相比之下，我可以使用 jQuery 使用类似的模式来实现这一点：

```
var statics = $('#statics').clone();

statics.remove('.prototype');

$('#main').html(statics); 
```

这可能就是为什么我要尝试以同样的方式使用 Mootools

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:42:34.067

mootools destroy 函数没有获取任何参数 - 它仅适用于目标元素及其子元素 - 所以你正在寻找的是：

```
var statics = $('statics').clone(true, true);

statics.getElements('.prototype').destroy();

statics.inject($('main')); 
```

# web-services - 如何在用户打开通行证时检查用户是否单击添加或取消按钮

> ID：15491284
> 
> 赞同：2
> 
> 时间：2013-03-19T04:04:47.403
> 
> 标签：web-services, ios6, passbook

我创建了一个通行证，用户可以通过单击链接或应用程序来添加它。当用户打开该通行证时，如何检查用户点击是否添加或取消？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:16:20.717

简短的回答 - 你不能！当前框架中没有提供此信息的挂钩、调用或事件。

更长的答案 - 您可以做出一些假设，具体取决于您是通过链接还是应用程序安装通行证。

示例 1 - 您将链接分发到在数据库中创建通行证记录并将 .pkpass 包发送到设备的脚本。通行证包含`webServiceURL`和`authenticationToken`键。如果您的 Web 服务随后收到此通行证的注册请求，则您知道用户单击了“添加”。如果没有，您假设他们点击了“取消”。

示例 2 - 您的应用程序创建通行证，并且 Passbook 向用户提供添加/取消选项。您的应用程序查询设备通行证数据库以查看它是否包含您创建的通行证`serialNumber`的`passTypeIdentifier`通行证 - 如果是，他们点击“添加”，如果没有，则假定他们点击了“取消”。如果您的通行证具有`webServiceURL`和`authenticationToken`键，您还可以使用示例 1 中的注册检查，因为所有通行证都将在您的 Web 服务中注册。

# ios - Paging UIScrollView - 如何一次轻弹多个页面

> ID：15491286
> 
> 赞同：0
> 
> 时间：2013-03-19T04:05:03.240
> 
> 标签：ios, objective-c, uiscrollview, uipickerviewcontroller

我有一个分页滚动视图，很像[Apple 的 Page Control 示例项目](http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)，我已将其改编为水平选择器。我真的希望能够通过每个轻弹手势滚动多个页面，而不是一次一个，就像 UIPickerViews 的工作方式一样。寻找有关如何解决此问题的一些指导。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:34:28.717

**首先这里最好的** [源代码](https://github.com/nicklockwood/iCarousel)

`contentOffset`可能是无论在那里设置这些数字，你都不会因为你把它放在它的手上而留下深刻的印象。所以它只是继续设置它认为应该是下一瞬间的 contentOffset - 而不验证 contentOffset 在此期间是否发生了变化。

我将子类`UIScrollView`化并将魔法放入`setContentOffset`方法中。根据我的经验，所有内容偏移更改都通过该方法，即使是内部滚动引起的内容偏移更改。只需在某个时候执行 [super `setContentOffset`:..] 即可将消息传递给真正的`UIScrollView`.

也许如果你把你的换档动作放在那里，它会更好地工作。您至少可以检测 3000-off 设置`contentOffset`，并在传递消息之前对其进行修复。如果您还要覆盖 contentOffset 方法，您可以尝试查看是否可以制作虚拟无限内容大小，并将其减少到“引擎盖下”的真实比例。

[这对你也有帮助..!!!](https://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)

# windows-7 - 从命令行获取所有打开窗口的列表

> ID：15491288
> 
> 赞同：22
> 
> 时间：2013-03-19T04:05:13.277
> 
> 标签：windows-7

在 Windows 7 中，是否可以从命令行获取所有打开的桌面窗口的列表？我知道可以从命令行获取[所有正在运行的进程的列表，但我想知道是否也可以获取打开的窗口列表。](https://stackoverflow.com/questions/53489/how-do-you-list-all-processes-on-the-command-line-in-windows)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-06-13T16:41:59.040

“/v”选项在最后一列列出窗口名称。如“任务列表 /v”。您还可以将其通过管道传输到另一个应用程序或查找进行过滤。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-07T10:58:18.427

利用

```
tasklist /fi "windowtitle eq <Title of window*>" 
```

例如：

```
tasklist /fi "windowtitle eq Notepad*" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-22T13:18:18.013

如果您只使用以下命令，它将列出所有活动进程

> 任务列表

或者按会话名称过滤会限制更多以通过控制台启动进程：

> tasklist /FI "SESSIONNAME eq 控制台"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-22T19:15:38.047

[NirSoft](http://www.nirsoft.net)的WinLister列出机器上所有活动的窗口以及相关信息（标题、路径、句柄、类、位置、进程 ID、线程 ID 等）。它有一个 GUI 界面而不是命令行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-09T17:22:44.843

使用电源外壳。命令是：Get-Process

你可以试试这个：

```
##Method 1: (Gives you all the processes)
Get-Process

## Method 2: Detailed Info On a specific named Process
$ProcessTerm="chrome"
#Run This:
$FindProcess = Get-Process | Where-Object {$_.MainWindowTitle -like "*$processterm*"}
Get-Process -ID $FindProcess.ID | Select-Object *

# FindProcess.ID will give you the ID of the above process

#Method 3: (if you know the process ID)
$ProcessID = "9068"
$FindProcess = Get-Process | Where-Object {$_.id -eq "$ProcessID"}
Get-Process -ID $FindProcess.Id | Select-Object * 
```

# c# - 如何将输入输出为每个辅音之间带有元音的字谜？

> ID：15491290
> 
> 赞同：1
> 
> 时间：2013-03-19T04:05:24.093
> 
> 标签：c#, algorithm, anagram

我对编码比较陌生，我想制作一个可以接受输入并将其输出为字谜的测试程序。但是字谜不能只是一堆乱七八糟的字母，它需要是某种可以理解的“词”（即，如果我输入“恐龙”，我想得到一些类似于“nisadoru”的东西作为回报，而不是一些东西像'dsrunsia'）。如果更进一步并不太费力，我也有兴趣让程序在输出中添加一个额外的字母（即，如果我输入'dinosaur'，我可以收到'nisadorux'）。

我不是在寻找要添加到单词中的额外字母的选择，我希望添加我选择的字母。如果重要的话，字母是 x。所以所有的字谜都会包含一个额外的 x。

我努力寻找，但没有找到任何有用的帮助。我没有任何代码可以关闭，但是对于那些说我不会从简单地给出代码中学习的人，我更喜欢查看一个完整的部分并解构它或弄清楚一切是如何工作的，而不是试图把各种各样的东西放在一起作为测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:20:32.140

这是一个可以满足您所有需求的解决方案：

```
static class Program
{
    static readonly char[] Vowels = new []{'a', 'e', 'i', 'o', 'u', 'y'};
    static readonly Random r = new Random();

    static bool IsVowel(char c) { return Vowels.Contains(c); }
    static bool IsConsonant(char c) { return !IsVowel(c); }

    static string Scramble(string inpt)
    {
        string input = inpt + "x";
        List<char> vowelList = input.Where(IsVowel).ToList();
        List<char> consonantList = input.Where(IsConsonant).ToList();
        StringBuilder output = new StringBuilder();
        bool needVowel = false; // Start with a consonant, if possible.

        while (vowelList.Count > 0 || consonantList.Count > 0)
        {
            IList<char> charList = consonantList;
            if (consonantList.Count == 0 || (needVowel && vowelList.Count > 0))
            {
                charList = vowelList;
            }
            int randomIndex = r.Next(0, charList.Count);
            output.Append(charList.ElementAt(randomIndex));
            charList.RemoveAt(randomIndex);
            needVowel = !needVowel;
        }

        return output.ToString();
    }

    static void Main(string[] args)
    {
        foreach (var s in Enumerable.Repeat("dinosaur", 20).Select(Scramble))
        {
            Debug.WriteLine(s);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T04:16:04.193

将你的字母数组分成两个数组，一个只有元音，另一个只有元音`[a,e,i,o,u,y]`，因为`dinosaur`你会收到`[d,n,r,s] - [a,i,o,u]`，将其添加到构造中的字谜中，然后从数组中删除。假设您的随机抛出 6（从 0 开始），第一个数组的长度为 4，取自位置 2 (=6-4) -> 'o' 的第二个数组。下一个 random(7) 抛出 2，从第一个数组中取 'r'，现在我们的 anagram 有`or`并且数组有`[d,n,s] - [a,i,u]`. 关于元音与辅音互换，跟踪你的字母最后被唤醒的数组，如果从一个数组中连续取两个字母，从另一个（随机）取一个字母，而不是从一组完整的剩余的字母。

现在，您必须自己将其编码到您的程序中。

# java - 展开和缩小按钮单击

> ID：15491292
> 
> 赞同：1
> 
> 时间：2013-03-19T04:05:33.843
> 
> 标签：java, swing

这是我需要完成的第二个学校作业。下面是任务信息。

创建一个带有两个按钮的框架，分别称为 Expand 和 Shrink。单击“扩展”按钮时，框架将扩展 10%。单击“缩小”按钮时，框架将缩小 10%。使用 setSize() 在 actionPerformed() 方法中执行此操作。使用两个 int 类型的实例变量来跟踪帧的当前大小。当您将它们增加或减少 10% 时，您将不得不使用整数算术或使用类型转换。

我已经设置了框架和按钮。当然来自在线研究，但我无法正确理解。前任。每次我单击收缩按钮时，内部框架都会收缩，扩展的也一样（在框架内扩展）。请看一下代码。顺便说一句，请告诉我一个更好的方法来用更少的代码创建框架和按钮。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Expandshrink extends JFrame implements ActionListener
{
JButton expand;
JButton shrink;
Double w = 300.0, l = 200.0;

Expandshrink(String title)
{  
expand = new JButton("Expand");
shrink = new JButton("Shrink");

expand.setActionCommand("expand");
shrink.setActionCommand("shrink");

expand.addActionListener(this);
shrink.addActionListener(this);

setLayout(new FlowLayout());

add(expand);
add(shrink);

setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );  
}

public void actionPerformed(ActionEvent evt)
{

try
{
  if (evt.getActionCommand().equals("expand"))
  {
    w = w*1.1;
    l = l*1.1;
  }
  else if (evt.getActionCommand().equals("shrink"))
  {
    w = w*0.9;
    l = l*0.9;
  }
  getContentPane().setSize(w.intValue(),l.intValue());
}
catch ( Exception ex )
{ 
} 
}

public static void main ( String[] args )
{
Expandshrink frm = new Expandshrink("Expand & Shrink");

frm.setSize( 300, 200 );    
frm.setVisible( true );
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T04:15:59.840

1.  我不知道你为什么需要使用`Double`这个，`double`会更好。
2.  在 Event Dispatching Thread 的上下文中创建你的框架（查看[Initial Threads](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)了解详细信息
3.  更改内容窗格的大小将没有效果，您实际上需要更改框架本身的大小
4.  由于您无论如何都从扩展`JFrame`，您应该努力在构造函数中初始化框架（例如设置它的初始大小）

你`main`的方法应该看起来更像......

```
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
            }

            Expandshrink frm = new Expandshrink("Expand & Shrink");
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T04:25:49.527

改变：

```
getContentPane().setSize(w.intValue(),l.intValue()); 
```

到：

```
// layout managers are more likely to honor the preferred size
//getContentPane().setSize(w.intValue(),l.intValue());
getContentPane().setPreferredSize(new Dimension(w.intValue(),l.intValue()));
Expandshrink.this.pack(); 
```

# web-services - 如何在 Netsuite 中检索银行账户的当前余额

> ID：15491294
> 
> 赞同：0
> 
> 时间：2013-03-19T04:06:19.780
> 
> 标签：web-services, netsuite

我需要使用 SuiteTalk(Netsuite Webservise) 检索 Netsuite 中银行账户的当前余额。在 Suite Talk API 中没有字段/参数来引用账户余额。但是有 UI 字段 Balance 显示账户的当前余额.对此的任何帮助/建议表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:31:10.270

如果 API 中没有引用该 UI 字段的字段/参数，则很可能该字段不受 API 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-21T02:03:55.500

这绝对不直观，但可以使用 API 提取这些数据。这是一个使用[netsuite ruby​​ bindings](https://github.com/netsweet/netsuite)的示例。

```
 def balance_for_account(ns_account)
    search = NetSuite::Records::Account.search(
      criteria: {
        basic: [
          {
            field: 'internalIdNumber',
            operator: 'equalTo',
            value: ns_account.internal_id
          }
        ]
      },

      columns: {
        'listAcct:basic' => {
          'platformCommon:internalId/' => {},
          'platformCommon:balance' => {}
        }
      }
    )

    search.results.first.attributes[:balance].to_f
  end 
```

# iphone - UITableViewCell 动画

> ID：15491295
> 
> 赞同：1
> 
> 时间：2013-03-19T04:06:19.933
> 
> 标签：iphone, uitableview

我被一个表格视图困住了，其中单元格以堆栈格式显示。来自专家的任何建议如何实现这种表格视图。

（即我需要在另一个单元格后面显示一个单元格。在点击任何单元格时，单元格应该动画并显示单元格的完整内容）

![在此处输入图像描述](../Images/ad9e676b5da9a490bf1f5a81da1fb150.png)

编辑：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
     int defaultCellHeight = 30;

     if(isSelected)
        defaultCellHeight = 60;

    return defaultCellHeight; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:38:43.693

您可以通过提供 UITableViewCell 的阴影来创建这种类型的 TableView。在这里，我给你一些可能对你的情况有帮助的链接。

[https://github.com/mystcolor/jtgesturebasedtableviewdemo](https://github.com/mystcolor/jtgesturebasedtableviewdemo)
[https://github.com/OliverLetterer/UIExpandableTableView](https://github.com/OliverLetterer/UIExpandableTableView)
[https://github.com/binho/TicketSaldo](https://github.com/binho/TicketSaldo)

[这是有史以来所有控制器的最佳站点。](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=UITableView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:00:32.433

[https://github.com/bobmccune/Core-Animation-Demos](https://github.com/bobmccune/Core-Animation-Demos)如果你正在寻找核心动画，那么希望这个演示对你有用。

# xml - 如何使用 forEach 循环在 AS3 中跟踪 XML 子项？

> ID：15491297
> 
> 赞同：0
> 
> 时间：2013-03-19T04:06:29.787
> 
> 标签：xml, actionscript-3, foreach

我正在尝试使用 forEach 循环操作来跟踪输出面板中的每个艺术家姓名，并且在使用语法时遇到了困难。我没有得到任何结果（甚至没有错误）。我已经加载了 XML，并且能够跟踪到孩子的直接路径，但希望它是动态的。

这是我的 XML：

```
<library>
  <artist title="DreamTheater">
        <album title="A Dramatic Turn of Events" art="images/bg.jpg" soundtrack="audio/soundtrack.mp3">
            <tracks>      
                <track>On the Backs of Angels</track>
            </tracks>
        </album>
    </artist>

    <artist title="Rush">
        <album title="2112" art="">
            <tracks>      
                <track>Something For Nothing</track>
            </tracks>
        </album>
    </artist>   
</library> 
```

这是我的 AS3 函数：

```
function artistListLoad():void{ 
    for each (var artist:XML in mainXML) { 
    trace(artist);                        
    } 
} 
```

我是 forEach 循环的初学者，但还不了解它，因此感谢您的评论！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:05:18.007

`mainXML.artist`首先，如果要遍历`artist`XML 中的节点，则需要 user ：

```
for each(var artist:XML in mainXML.artist) 
```

`artist`从那里，您可以访问XML中每个块内的子项、属性和子项的属性。快速示例：

```
function artistListLoad():void
{ 
    for each(var artist:XML in mainXML.artist)
    {
        trace(artist.@title);
        trace(artist.album.@title);
    } 
} 
```

请注意，该`@`符号用于选择节点的属性，而没有它，您将选择节点内的子节点。

# apache-poi - Apache POI excel 以 10% 粗体显示单元格

> ID：15491298
> 
> 赞同：0
> 
> 时间：2013-03-19T04:06:30.880
> 
> 标签：apache-poi

问题：1

我看到 Apache POI 的一个非常奇怪的行为，我使用 POI 3.9 编写了一个 excel 文件。在编写单元格时，我添加了 Arial 8 和 normal 的字体样式，并且单元格被合并。

查看报告时，所有单元格样式都很好，但我看到文本是粗体的。当我检查单元格属性时，它看起来很好。如果在 ms excel 中我取消合并并再次合并单元格，则粗体消失，但从 POI 写入时，它显示为粗体。

我今天发现的一件事是它只有在 100% 缩放时才显得粗体，即使我将其设为 99%，粗体也会消失。

谁能解释一下这种行为，让我知道我必须做些什么来解决这个问题。

问题 2：

我在页脚中添加了版权符号，但由于某种原因，我在页脚中看到了一个问号。知道我应该添加什么来获得版权符号吗？

# python - 从串行 TCP 连接创建假 TTY 设备

> ID：15491308
> 
> 赞同：1
> 
> 时间：2013-03-19T04:07:13.360
> 
> 标签：python, serial-port, tty, modbus

我有一个我想使用的库（PyModbus），它需要一个 tty 设备，因为它将使用串行连接与设备通信。但是，我要与之交谈的设备将位于支持基于 tcp 的串行的调制解调器后面（该设备插入调制解调器上的 com 端口）。

如果没有调制解调器，这将是微不足道的。我会将 USB 串行电缆连接到设备，另一端连接到计算机。使用调制解调器，服务器必须连接到调制解调器上的 tcp 端口并通过该端口泵送串行数据。调制解调器将接收到的数据传递给连接到 com 端口的设备。

在 linux 中，从“通过 tcp 连接的串行”创建假 tty 以供暂时使用然后被销毁的最佳方法是什么。这会定期发生，单个 linux 服务器可能在任何给定时间打开 10~500 个这些模拟设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:59:41.627

如果我明白，您需要以这种方式建立联系：

[pyModbus <-(假串口)->进程]<-(tcp/ip)->[调制解调器<-(串口)->设备]

我建议使用`socat`这个

# javascript - JSP页面中的表单未提交

> ID：15491312
> 
> 赞同：2
> 
> 时间：2013-03-19T04:07:23.330
> 
> 标签：javascript, html, forms, jsp, jakarta-ee

我有一个嵌入了表单的 jsp 页面，我正在通过 JavaScript 提交表单。

当页面显示大约 10-50 个项目时，提交工作正常，但如果页面有大约 500 个或更多项目，则不提交。

单击提交按钮后，页面仅停留在当前页面中，并且一直在加载。

我该如何解决这个问题。

示例代码如下所示：

```
<html>
<script type="text/javascript">
function submitChecked() {
   var approveStr="";
   var approveArr=new Array();
   if(document.frmReleaseDetail.checkBoxVer.length != undefined)
   {
      for(var i=0; i < document.frmReleaseDetail.checkBoxVer.length; i++) 
      {
         if(document.frmReleaseDetail.checkBoxVer[i].checked)
         {
            approveStr +=document.frmReleaseDetail.checkBoxVer[i].value + ",";
            approveArr.push(document.frmReleaseDetail.checkBoxVer[i].value); 
         }
      }
      if(approveStr=="")
          alert("Please make a selection by clicking atleast one checkbox");
      else 
      {

        document.getElementById("passCheckVerVal").value=approveArr;
        document.forms["newForm"].submit();
      }
   }   //end of if checking multiple checkboxes
else   //if the page has only one checkbox(version)
   {
       if(document.frmReleaseDetail.checkBoxVer.checked)
       {
           window.location = "process.jsp?passCheckVer="+document.frmReleaseDetail.checkBoxVer.value+'&u_trackingRequestID=<%=request.getParameter("u_trackingRequestID")%>';
       }
       else
         alert("Please make a selection by clicking atleast one checkbox");
   }
}
</script>
<body>
<%
String newTrackingReqId=request.getParameter("u_trackingRequestID");
%>
<form name=frmReleaseDetail>
//jdbc code
//100's checkbox named checkBoxVer
//button to invoke submitChecked javascript function
</form>
<form name=newForm" id="newForm" action="process.jsp" method="post">
<input type="hidden" name="passCheckVer" id="passCheckVerVal"/>
<input type="hidden" name="u_trackingRequestID" id="u_trackingRequestIDVal" value="<%=newTrackingReqId%>"/>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:43:05.627

您需要将表单方法更改为 POST。

```
<form name=frmReleaseDetail method="post"> 
```

默认情况下，该方法是 GET。更多信息[在这里](http://www.cs.tut.fi/~jkorpela/forms/methods.html)。您在 GET 中的数据限制数量要小得多。

**编辑 ：**

只有一种形式的代码建议：

```
<html>
<script type="text/javascript">
function submitChecked() {
   var checked = false;

   for(var i=0; i < document.frmReleaseDetail.checkBoxVer.length; i++) 
      {
         if(document.frmReleaseDetail.checkBoxVer[i].checked)
         {
            checked = true;
            break;
         }
      }

   if((document.frmReleaseDetail.checkBoxVer.length != undefined and checked) or (document.frmReleaseDetail.checkBoxVer.checked))
   {
      document.forms["frmReleaseDetail"].submit();
   }
else
   {
       alert("Please make a selection by clicking atleast one checkbox");
   }
</script>
<body>
<%
String newTrackingReqId=request.getParameter("u_trackingRequestID");
%>
<form id="frmReleaseDetail" name="frmReleaseDetail" action="process.jsp" method="post">
    <input type="hidden" name="u_trackingRequestID" id="u_trackingRequestIDVal" value="<%=newTrackingReqId%>"/>
//jdbc code
//100's checkbox named checkBoxVer
//button to invoke submitChecked javascript function
</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-14T17:36:13.277

对于任何犯**新手（新手）错误**的人：

* * *

**1：类型是“提交”而不是“按钮”**

**好/正确：** ----------------------------------------------

```
<input type="submit" value="some_button_label" /> 
```

**坏/不正确：** ----------------------------------------------------------

```
<input type="button" value="some_button_label" /> 
```

* * *

**2：提交按钮需要嵌套在表单内。**

**好/正确：** ----------------------------------------------

```
<form action="cookies-personalize-response.jsp">
    SEL_YOUR_FAV_PROG_LANG
    <select name="fav_lan">
        <option>LANG_01</option>
        <option>LANG_02</option>
        <option>LANG_03</option>
    </select>
    <input
        type ="submit"
        value="some_button_label"
    />
</form> 
```

**坏/不正确：** ---------------------------------------------------------- --

```
<form action="cookies-personalize-response.jsp">
    SEL_YOUR_FAV_PROG_LANG
    <select name="fav_lan">
        <option>LANG_01</option>
        <option>LANG_02</option>
        <option>LANG_03</option>
        <option>LANG_04</option>
    </select>  
</form>
<input
    type ="submit"
    value="some_button_label"
/> 
```

* * *

**3：修复后参考页面**，在浏览器中查看源代码以确保实际更改。尽管最后一个答案很愚蠢，但它实际上是我停留时间最长的一个。

# api - Sencha ExtJS API - 加载速度很慢

> ID：15491317
> 
> 赞同：1
> 
> 时间：2013-03-19T04:08:04.560
> 
> 标签：api, extjs

**我是 Sencha的**新手，我正在评估它。

每次我尝试打开浏览器并访问 docs.sencha.com/whatever 上的 API 页面时……加载需要很长时间。

我的意思是，它到底在后端做什么？加载所有必要的 extjs 应用程序文件需要那么长时间吗？还是在我只尝试查看一页时加载了整个 API 库？

到目前为止，我已经完成了几个例子，我非常喜欢 Sencha。但是，我担心生产中的加载速度，因为他们加载 API 的速度让我害怕。

如果你对煎茶有经验，你能告诉我后面发生了什么吗？请不要说“API 有 20MB 大，加载需要时间……”，因为我每次访问只想看到一个页面，我认为加载整个 API 来初始化页面是错误的。

![加载...](../Images/2a6a4185d52f68c2a6ebf5f97fc9e38a.png)

更新 - - - - - - - - - - - - - - - - - -

每次打开浏览器时，我都会面对这个加载屏幕**20-30 秒。**仅限 IE。Chrome 和 FF 都快？？

更新 2 ----------------------------------

![分析](../Images/9bff49a969fa7ef71c35734a9fc0f330.png)

我为 IE 做了一个分析。Btween`http://projects.sencha.com/auth/session?...` 和`/architect/2guides/intro/README.js?...`IE 休眠了 20 多秒空白无所事事（从图中两行之间突出显示的空白间隙中可以看到），然后突然回来并完成加载页面的其余部分！

我一一复制了这些链接并将它们加载到一个新的 IE 窗口中。它们都在几毫秒内单独出现，因此不存在速度问题。就是这样，IE 休眠了 20 多秒（CPU 监视器显示没有活动）奇怪！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T04:14:08.733

由于您正在启动，您绝对应该开始使用`sencha cmd`. 这允许您构建仅使用您使用的组件的 extjs 文件版本。

但作为旁注。我使用完整的 sencha api，加载整个 API 只需不到 2 秒。我使用生产版本 ext-all.js 和 ext-all.css 和 gzip 一切。压缩后，我得到的文件大小小于 500KB，实际上什么都没有。

**编辑：**

我检查了 API 文档页面。总下载大小小于 1 MB，这也是因为有很多图标没有组合成精灵。因此，浏览器在请求图标时会花费大量时间。这就是页面慢的原因。

对于 IE，sencha 也无能为力。浏览器本身很慢。您加载的任何网页都会遇到同样的问题。不只是煎茶的。如果您进行一些优化，页面速度将会提高。API 的大小不是问题。

# hyperlink - List<>.AddRange - where 子句

> ID：15491323
> 
> 赞同：0
> 
> 时间：2013-03-19T04:08:23.153
> 
> 标签：hyperlink, where-clause, addrange

嗨，我正在申请从 Sharepoint 列表中获取一些详细信息。我能够得到如下所示的结果：

```
sample.AddRange(queryResults.GetItemRows().Select(listItemRow => new CalendarEvents
                {
                    ItemId = listItemRow.ItemId,
                    Title = listItemRow.AttributeValueOrDefault("ows_Title", ""),
                    StartDate = listItemRow.AttributeValueOrDefault("ows_StartDate", ""),
                    EndDate = listItemRow.AttributeValueOrDefault("ows_EndDate",""),
                    Link = listItemRow.StrippedAttributeValueOrDefault("ows_Link", "")
                }).OrderBy(listItemRow => listItemRow.StartDate)); 
```

有一次让我感到震惊：-我想提取带有未来事件的列表行。我的意思是 StartDate 应该 >= 当前日期。我尝试了一些选择，但没有成功。我知道我需要在 AddRange 末尾使用 .where，但我如何检查日期的条件。

我尝试如下但没有用

```
}).where(listItemRow => listItemRow.StartDate >= dateTime.now) 
```

任何帮助都会很棒...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:47:46.733

你确定你有你的数据吗？有什么错误吗？

如果没有，请尝试使用：

```
}).Where(listItemRow => listItemRow.StartDate.After(DateTime.Now)); 
```

# javascript - 验证表中的动态元素

> ID：15491326
> 
> 赞同：0
> 
> 时间：2013-03-19T04:08:42.410
> 
> 标签：javascript, jquery, html, validation

我想验证动态创建的文本区域，在下面提到的代码中，我只能验证第一行，但无法验证第二行。如何验证/获取所有行值。

提前致谢。

要创建动态元素，请单击添加问题图像。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title> new document </title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
    <script type="text/javascript">
    $(document).ready(function ()
    {
        var i = 0;
        $("#AddQuestion").click(function ()
        {
            $("#NoQuestions").remove();
            ++i;
            var IdCount = i + ".)";
            var newRowContent = "<tr id='SQRow"+i+"'"+" ><td>" + IdCount + "</td>" + "<td><textarea id='txtQuestions" + i + "'" + "style='height: 45px;width: 420px'></textarea> </td>" + "<td><select id='ddlDataType" + i + "'" + " style='margin-left: 47px'><option value=''>Select Data Type</option><option value='int'>Numeric</option><option value='Varchar'>Alpha Numeric</option></select> </td>" + "<td><div ><a href='#'><img src='/Images/1363247672_document-edit.png' width='26' height='27' alt='EditButton'/> </a><a href='#'><img src='/Images/1363247321_Remove.png' alt='DeleteButton'/></a> </div> </br><div  style='display: none'><a href='#'><img src='/Images/Accept-iconSmall.png' width='26' height='27' alt='UpdateButton'/></a><a href='#'><img src='/Images/Button-Cancel-icon.png' width='26' height='27' alt='CancelButton'  /></a></td>" + "</tr>";

            $("#tblSecurityQuestions").append(newRowContent);
        });
        $("#btnUpdateQuestions").click(function ()
        {
            var txtAreaVal = $('textarea').val().length;
            var ddlDataType = $('#tblSecurityQuestions select').val().length;

            alert(txtAreaVal);
            alert(ddlDataType + "The ddl is " );
        if (txtAreaVal <= 0)
        {
            alert('Please add Questions');
            return;
        } else if (ddlDataType <= 0)
        {
            alert('Please select the data type');
            return;
        }
        });

    });
    </script>
</head>
 <body>
    <form id="SQPageForm" name="SQPageForm" method="post" action="">
            <div id="SecurityQuestions" style="height: auto;border-color: #f00;border: 1.5px;border-style: dotted">

               <h3>Configure Security Questions</h3>
                <div id="AddNewSecurityQuestions" style="">
                    <p style="float: left;margin-top: 11px">Add Question </p>

                   <img id="AddQuestion" src="/Images/document-add-icon.png" alt="Add Questions" width="35px" height="35px" style="cursor: pointer"/>
                </div>
                </br>
              &nbsp;Security  Questions?
                </br>

                <table border="1" id="tblSecurityQuestions">
                    <tr>
                        <th style="width: 25px">
                            ID
                        </th>
                        <th style="width: 424px">
                            Security Questions
                        </th>
                        <th style="width: 210px">
                            DataType
                        </th>
                        <th style="width   :65px">
                            Actions
                        </th>

                    </tr>
                      </table>
                     </div>
                </br>
                </br>
                <input type="button" id="btnUpdateQuestions" value="Set Security Question" style="margin-left: 300px" />
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:10:55.473

尝试迭代所有文本区域，然后检查相同的条件：

```
for(var i=0; i<NoOfquestions; i++){

    var txtAreaVal = $('#txtQuestions'+i).val().length;
    var ddlDataType = $('#tblSecurityQuestions select').val().length;

    alert(txtAreaVal);
    alert(ddlDataType + "The ddl is");

    if (txtAreaVal <= 0)
    {
        alert('Please add Questions');
        return;
    }
    else if (ddlDataType <= 0)
    {
        alert('Please select the data type');
        return;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:19:47.530

尝试

```
$("#btnUpdateQuestions").click(function() {
    $('#tblSecurityQuestions tr:gt(0)').each(function() {
        var $this = $(this);
        var txtAreaVal = $('textarea', $this).val().length;
        var ddlDataType = $('select', $this).val().length;

        alert(txtAreaVal);
        alert(ddlDataType + "The ddl is ");
        if (txtAreaVal <= 0) {
            alert('Please add Questions');
            return;
        } else if (ddlDataType <= 0) {
            alert('Please select the data type');
            return;
        }
    })
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:02:51.823

```
var textAreaSize = $('#tblSecurityQuestions tr:gt(1)').size();

        for (var j = 1; j <= textAreaSize; j++)
        {
            var txtAreaVal = $('#txtQuestions' + j).val();
            var ddlDataType = $('#ddlDataType' + j).val();  
           if (txtAreaVal <= 0)
            {
                alert('Please add Questions');
                return;
            } else if (ddlDataType <= 0)
            {
                alert('Please select the data type');
                return;
            }
        } 
```

我想出了一个解决方案，它现在对我有用

# amazon-ec2 - 如何在弹性 beantalk 实例上运行脚本/命令

> ID：15491332
> 
> 赞同：0
> 
> 时间：2013-03-19T04:09:46.647
> 
> 标签：amazon-ec2, amazon, amazon-cloudfront

我已经使用弹性豆茎创建了实例。我想运行一些命令/脚本来启动我的应用程序，因为它是简单的 java 应用程序。请让我知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:59:32.993

如果您是 linux 用户，则可以使用 putty 或终端 ssh 到 ec2 实例，然后在 ec2 实例中运行脚本。确保您的脚本具有适当的权限。

# c# - datagridview中的keyup事件？

> ID：15491333
> 
> 赞同：0
> 
> 时间：2013-03-19T04:10:08.720
> 
> 标签：c#, datagridview, keypress

我有一个datagridview，现在我的要求是当用户编辑单元格并单击回车键或tabg键时，新的单元格值应该更新到数据库中，我能够将新值更新到数据库中，我已经写了我在datagridview的keyup事件中的代码，现在在keyup事件中，当用户按下回车键时，控件移动到下一行，所以我将行索引值作为actualrowindex + 1，当我点击tab键时，控件正在移动下一列，所以我将列索引作为 columnindex+1，当我单击 enetr 或 tab 键时，我如何处理这些事件以获得确切的列索引或 rowindex？..下面是我写的事件我的代码..

```
 private void dataGridView1_KeyUp(object sender, KeyEventArgs e)
    {

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T04:18:38.367

当用户有很多其他方法可以提交对单元格值的更改时，处理 Enter 和 Tab 键是没有意义的。例如，他们可以单击另一个单元格。大概您希望在他们执行这些其他操作之一时更新数据库，而不仅仅是在他们按下某些键时。

因此，与其处理`KeyUp`事件，不如处理[`CellValueChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvaluechanged.aspx)事件。每当用户提交对单元格值所做的更改时都会引发此事件，这通常发生在焦点离开单元格时。

正如您所指出的，按 Enter 会导致焦点转移到列中的下一个单元格，而 Tab 会导致焦点转移到行中的下一个单元格，因此这在您的情况下可以正常工作。当用户使用鼠标单击另一个单元格，或者使用箭头键移动到另一个单元格时，它也可以工作，或者任何其他提交更改的方法。

处理此事件时，您将始终获得更改单元格的正确行索引和列索引。此信息包含在[`DataGridViewCellEventArgs`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcelleventargs.aspx)作为`e`参数传递给事件处理程序方法的对象中。

# c++ - C++ 数数

> ID：15491335
> 
> 赞同：-1
> 
> 时间：2013-03-19T04:10:30.590
> 
> 标签：c++

我有这个功能：

```
int calc (int day, int month , int year)
{
    int cal;
    cal=day+month+year;
    cout<<cal;
} 
```

假设结果`cal`是 2008。我想做的是分别计算每个数字。

### 例子：

```
2008=2+0+0+8=10 
```

但我不知道该怎么做。有任何想法吗？

谢谢

## 编辑：

### 另一个例子：

```
day=20
Month=03
Year=1993

20+03+1993=2016

And 2+0+1+6=9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:16:57.493

这是您获取任何数字的数字总和的方式。

模除 (%) 运算符用于提取最后一位数字。并保留一个运行总和以保持数字的总和。最后的除法操作会从数字中删除最后一个数字，以便在下一轮循环中，可以通过 % 提取倒数第​​二个数字。

请记住，number(num) 是整数类型。因此，当您将数字除以 10 时，它会保留整数部分并丢弃任何小数部分。因此，2008/10=200 而不是 200.8。还要澄清 % 运算符，2008%10=8 因为 8 是 2008 除以 10 的余数。

```
num=2008;    //put any number here
sum=0;
while(num>=0)
{
       digit=num%10;
       sum+=digit;
       num=num/10;
}
cout<<sum; 
```

# java - 按照说明操作后，AppEngine 上的 Google Cloud Storage 中缺少文件

> ID：15491337
> 
> 赞同：1
> 
> 时间：2013-03-19T04:10:40.467
> 
> 标签：java, google-app-engine, google-cloud-storage

我使用此处给出的说明向 Google Cloud Storage 写入了一个文件：

[https://developers.google.com/appengine/docs/java/googlestorage/overview](https://developers.google.com/appengine/docs/java/googlestorage/overview)

代码运行并成功执行，但是，登录到我的存储帐户后，我没有在我的存储桶中看到新写入的文件。

关于为什么的任何想法？

所以这是导出代码：

```
This is the code I am using:

        try {   
            // Get the file service
            FileService fileService = FileServiceFactory.getFileService();

            /**
             * Set up properties of your new object
             * After finalizing objects, they are accessible
             * through Cloud Storage with the URL:
             * http://storage.googleapis.com/my_bucket/my_object
             */
            GSFileOptionsBuilder optionsBuilder = new GSFileOptionsBuilder()
              .setBucket(bucket)
              .setKey(key)
              .setAcl("public-read");

            // Create your object
            AppEngineFile writableFile = fileService
                    .createNewGSFile(optionsBuilder.build());

            // Open a channel for writing
            boolean lockForWrite = false;
            FileWriteChannel writeChannel = fileService.openWriteChannel(
                    writableFile, lockForWrite);

            // For this example, we write to the object using the
            // PrintWriter
            PrintWriter out = new PrintWriter(Channels.newWriter(
                    writeChannel, "UTF8"));

            Iterator<String> it = spRes.iterator();

            while (it.hasNext()) {
                out.println(it.next());
            }

            // Close without finalizing and save the file path for writing
            // later
            out.close();

            String path = writableFile.getFullPath();

            // Write more to the file in a separate request:
            writableFile = new AppEngineFile(path);

            // Lock the file because we intend to finalize it and
            // no one else should be able to edit it
            lockForWrite = true;
            writeChannel = fileService.openWriteChannel(writableFile,
                    lockForWrite);

            // Now finalize
            writeChannel.closeFinally();
        } catch (IOException e) {
            result = "Failed to export";
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T06:54:55.510

我相信你没有添加你的应用程序的**电子邮件**，你可以在你的 appengine 应用程序的**应用程序设置下找到。**

然后，您需要将此电子邮件添加到具有**所有者**权限的[Google API 控制台](http://code.google.com/api/console)下的 Google Cloud Storage团队中。确保您使用的存储桶名称也与您在***UploadOptions***中的 Online Browser Tool for Cloud Storage 中创建的存储桶名称相同。

 **** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T03:21:39.670

看起来我在 Google Cloud Console 中设置了 2 个不同的项目。我正在更新错误的项目。

现在工作。

谢谢您的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T04:36:51.223

正如 Ankur 所说，您必须在 appengine 上部署代码才能写入云存储。否则，文件将仅存储在本地硬盘上。***

# java - Android 绘图、擦除和撤消操作

> ID：15491339
> 
> 赞同：2
> 
> 时间：2013-03-19T04:10:55.760
> 
> 标签：java, android, erase, undo-redo, paint

这是绘图和撤消的代码，但无法加入擦除。

它是绘图 + 擦除或绘图 + 撤消，但不能是其中三个。

```
public class Drawing extends View {
private Paint mPaint, mBitmapPaint;
private Bitmap mBitmap;
private Canvas mCanvas;
private Path mPath;

private float mX, mY;
private static final float TOUCH_TOLERANCE = 4;

private int color, size, state;

private ArrayList<Path> paths = new ArrayList<Path>();
private ArrayList<Path> undonePaths = new ArrayList<Path>();
private ArrayList<Integer> colors = new ArrayList<Integer>();
private ArrayList<Integer> sizes = new ArrayList<Integer>();

public Drawing(Context c) {
    super(c);
}

public Drawing(Context c,int width, int height, int size, int color, int state) {
    super(c);

    mBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    mCanvas = new Canvas(mBitmap);
    mPath = new Path();

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);

//      mBitmapPaint = new Paint(Paint.DITHER_FLAG);
//      mBitmapPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC));

    setColor(color);
    setSize(size);
    setState(state);
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
}

@Override
protected void onDraw(Canvas canvas) {
//      canvas.drawColor(Color.TRANSPARENT);
//      canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
//
//      if (state == 0)
//          mBitmap.eraseColor(Color.TRANSPARENT);

    for (int i = 0; i < paths.size(); i++) {
        mPaint.setColor(colors.get(i));
        mPaint.setStrokeWidth(sizes.get(i));
        canvas.drawPath(paths.get(i), mPaint);
    }
    mPaint.setColor(color);
    mPaint.setStrokeWidth(size);
    canvas.drawPath(mPath, mPaint);

}

public void setColor(int color) {
    this.color = color;
}

public void setSize(int size) {
    this.size = size;
}

public void setState(int state) {
    this.state = state;
    // if (state == 0)
    // mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
    // else
    // mPaint.setXfermode(null);
}

public void onClickUndo() {
    if (paths.size() > 0) {
        undonePaths.add(paths.remove(paths.size() - 1));
        sizes.remove(sizes.size() - 1);
        colors.remove(colors.size() - 1);
        invalidate();
    }
}

private void touch_start(float x, float y) {
    undonePaths.clear();
    mPath.reset();
    mPath.moveTo(x, y);
    mX = x;
    mY = y;
}

private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        mX = x;
        mY = y;
    }
}

private void touch_up() {
    mPath.lineTo(mX, mY);
    mCanvas.drawPath(mPath, mPaint);

    colors.add(color);
    sizes.add(size);
    paths.add(mPath);
    mPath = new Path();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        touch_start(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        touch_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        touch_up();
        invalidate();
        break;
    }
    return true;
}
} 
```

我试图使颜色透明，但这没有意义，因为不改变像素而是创建新路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:35:47.070

下面可用于绘制擦除、浮雕、保存到画廊、模糊。您可以使用代码添加撤消和重做功能。下面的代码工作正常。您可以从 grapics 文件夹中的 api demos 下的 adk 的示例文件夹中检查 FingerPaint.java。

[在 android 中为触摸绘制创建喷雾效果](https://stackoverflow.com/questions/11938632/creating-a-spray-effect-on-touch-draw-in-android)。此链接将帮助您通过喷涂点创建喷涂效果。

```
public class FingerPaintActivity extends GraphicsActivity
    implements ColorPickerDialog.OnColorChangedListener {

    private Paint       mPaint;
    private MaskFilter  mEmboss;
    private MaskFilter  mBlur;
    Button b;
    Dialog dialog;
    static MyView mv;
    File f;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    LinearLayout ll = (LinearLayout) findViewById(R.id.ll);
    mv= new MyView(this);
    mv.setDrawingCacheEnabled(true);
    ll.addView(mv);
    b= (Button) findViewById(R.id.button1);
    b.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            final CharSequence[] items = {"Pick Color", "Emboss", "Blur","Erase","SaveToGallery"};

            AlertDialog.Builder builder = new AlertDialog.Builder(FingerPaintActivity.this);
            builder.setTitle("Options");
            builder.setItems(items, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int item) {

                       if(item==0)
                       {
                           new ColorPickerDialog(FingerPaintActivity.this, FingerPaintActivity.this, mPaint.getColor()).show();
                       }
                       if(item==1)
                       {
                           if (mPaint.getMaskFilter() != mEmboss) {
                                mPaint.setMaskFilter(mEmboss);
                            } else {
                                mPaint.setMaskFilter(null);
                            }

                       }
                       if(item==2)
                       {
                           if (mPaint.getMaskFilter() != mBlur) {
                                mPaint.setMaskFilter(mBlur);
                            } else {
                                mPaint.setMaskFilter(null);
                            }
                       }
                       if(item==3)
                       {
                           mPaint.setXfermode(new PorterDuffXfermode(
                                   PorterDuff.Mode.CLEAR));
                       }
                       if(item==4)
                       {

                          saveImage();
                       }
                   }
               });

            builder.show();
        }

    });
    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(0xFFFF0000);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(20);

    mEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 },
                                   0.4f, 6, 3.5f);

    mBlur = new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL);
}

public void colorChanged(int color) {
    mPaint.setColor(color);
}

public class MyView extends View {

    private static final float MINP = 0.25f;
    private static final float MAXP = 0.75f;

    private Bitmap  mBitmap;
    private Canvas  mCanvas;
    private Path    mPath;
    private Paint   mBitmapPaint;
    Context mcontext;

    public MyView(Context c) {
        super(c);
        mcontext=c;
        mPath = new Path();
        mBitmapPaint = new Paint();
        mBitmapPaint.setColor(Color.RED);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(0xFFAAAAAA);
        Display display = ( (Activity) mcontext).getWindowManager().getDefaultDisplay();  
        float w = display.getWidth(); 
        float h = display.getHeight();
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        canvas.drawLine(0, 0, w, 0,mBitmapPaint);
        canvas.drawLine(0, 0, 0, h,mBitmapPaint);
        canvas.drawLine(w,h,w,0,mBitmapPaint);
        canvas.drawLine(w, h, 0,h , mBitmapPaint);
        canvas.drawPath(mPath, mPaint);
    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }
    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }
    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);
        mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SCREEN));
        // kill this so we don't double draw
        mPath.reset();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                touch_start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE:
                touch_move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP:
                touch_up();
                invalidate();
                break;
        }
        return true;
    }
}
    public void saveImage()
    {
    AlertDialog.Builder editalert = new AlertDialog.Builder(FingerPaintActivity.this);
    editalert.setTitle("Please Enter the name with which you want to Save");
    final EditText input = new EditText(FingerPaintActivity.this);
    LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.FILL_PARENT,
            LinearLayout.LayoutParams.FILL_PARENT);
    input.setLayoutParams(lp);
    editalert.setView(input);
    editalert.setPositiveButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
        mv.setDrawingCacheEnabled(true);
        String name= input.getText().toString();
        Bitmap bitmap = mv.getDrawingCache();
     String root = Environment.getExternalStorageDirectory().toString();
        File myDir = new File(root + "/MapleBearDraw");    
        myDir.mkdirs();
        File file = new File (myDir, name+".jpg");
        if (file.exists ()) file.delete ();         
        try 
        {
            if(!file.exists())
        {
            file.createNewFile();
        }
            FileOutputStream ostream = new FileOutputStream(file);
            bitmap.compress(CompressFormat.JPEG, 50, ostream);
            ostream.flush();
            ostream.close();  
            mv.invalidate();                            
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }finally
        {

            mv.setDrawingCacheEnabled(false);                           
        }
        }
    });

    editalert.show();   
 }
private static final int COLOR_MENU_ID = Menu.FIRST;
private static final int EMBOSS_MENU_ID = Menu.FIRST + 1;
private static final int BLUR_MENU_ID = Menu.FIRST + 2;
private static final int ERASE_MENU_ID = Menu.FIRST + 3;
private static final int SRCATOP_MENU_ID = Menu.FIRST + 4;

public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    menu.add(0, COLOR_MENU_ID, 0, "Color").setShortcut('3', 'c');
    menu.add(0, EMBOSS_MENU_ID, 0, "Emboss").setShortcut('4', 's');
    menu.add(0, BLUR_MENU_ID, 0, "Blur").setShortcut('5', 'z');
    menu.add(0, ERASE_MENU_ID, 0, "Erase").setShortcut('5', 'z');
    menu.add(0, SRCATOP_MENU_ID, 0, "SrcATop").setShortcut('5', 'z');

    /****   Is this the mechanism to extend with filter effects?
    Intent intent = new Intent(null, getIntent().getData());
    intent.addCategory(Intent.CATEGORY_ALTERNATIVE);
    menu.addIntentOptions(
                          Menu.ALTERNATIVE, 0,
                          new ComponentName(this, NotesList.class),
                          null, intent, 0, null);
    *****/
    return true;
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    mPaint.setXfermode(null);
    mPaint.setAlpha(0xFF);

    switch (item.getItemId()) {
        case COLOR_MENU_ID:
            new ColorPickerDialog(FingerPaintActivity.this, this, mPaint.getColor()).show();
            return true;
        case EMBOSS_MENU_ID:
            if (mPaint.getMaskFilter() != mEmboss) {
                mPaint.setMaskFilter(mEmboss);
            } else {
                mPaint.setMaskFilter(null);
            }
            return true;
        case BLUR_MENU_ID:
            if (mPaint.getMaskFilter() != mBlur) {
                mPaint.setMaskFilter(mBlur);
            } else {
                mPaint.setMaskFilter(null);
            }
            return true;
        case ERASE_MENU_ID:
            mPaint.setXfermode(new PorterDuffXfermode(
                                                    PorterDuff.Mode.CLEAR));
            return true;
        case SRCATOP_MENU_ID:
            mPaint.setXfermode(new PorterDuffXfermode(
                                                PorterDuff.Mode.SRC_ATOP));
            mPaint.setAlpha(0x80);
            return true;
    }
    return super.onOptionsItemSelected(item);
}

} 
```

# jquery - 滚动画廊如何使其无限循环而不是回到第一个

> ID：15491340
> 
> 赞同：1
> 
> 时间：2013-03-19T04:11:02.440
> 
> 标签：jquery

..大家好，我对 jquery 真的很陌生，我很难解决这个问题。问题是......我想要一个无限循环，而不是回到第一个内容的效果。

```
function initCarousel() {
jQuery('.link-block').scrollGallery({
    mask: 'div.mask',
    slider: 'div.slideset',
    slides: 'div.slide',
    btnPrev: 'a.prev',
    btnNext: 'a.next',
    autoRotation: true,
//displayTime: 5000,
    circularRotation: true,
    switchTime: 3000,
    animSpeed: 500 
```

…………

```
 // jquery plugin
$.fn.scrollGallery = function(opt){
    return this.each(function(){
        $(this).data('ScrollGallery', new ScrollGallery($.extend(opt,{holder:this})));
    });
};
}(jQuery)); 
```

希望这里有人可以提供帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-27T16:21:36.763

尽管提供 jsfiddle 有助于确认这一点，但我感觉您使用的插件不支持您所追求的“无限循环”效果。

以下插件具有“无限循环”效果，并且**似乎**旨在“插入”到与 ScrollGallery 插件工作相同的 HTML 结构。再次查看原始 HTML 和 JS 的其余部分会有所帮助。

```
function initCycleCarousel() {
    jQuery('.link-block').scrollAbsoluteGallery({
        mask: 'div.mask',
        slider: 'div.slideset',
        slides: 'div.slide',
        btnPrev: 'a.prev',
        btnNext: 'a.next',
        pauseOnHover: true,
        maskAutoSize: true,
        autoRotation: true,
        switchTime: 3000,
        animSpeed: 500
    });
} 
```

插件本身可以在[这里](http://pastebin.com/Mue6k8A4)找到。您还需要将它包含在您的 javascript 中。

# c# - 如何遍历 HashSet 当它作为对象提供并且 T 可以是任何东西时？

> ID：15491341
> 
> 赞同：3
> 
> 时间：2013-03-19T04:11:06.103
> 
> 标签：c#, reflection, valueinjecter

我正在使用 Value Injecters 使用 LoopValueInjection 将一种类型映射到另一种类型，并使用一些自定义逻辑覆盖 SetValue(object v) 方法。我试图检测何时传入 HashSet 并通过 HashSet 并对其中的每个项目应用一种方法以进行一些清理。我遇到的问题是因为参数只是一个对象，我不知道 HashSet 中的项目类型是什么。例如，它可以是 HashSet 或 HashSet。

这是我目前拥有的代码，但我收到了 InvalidCastException。

```
 protected override object SetValue(object v)
    {
        if (type.Name == "HashSet`1")
        {
            var genericType = type.GetGenericArguments()[0];

            // this line throws the InvalidCastException 
            var cleanHashSet = (HashSet<object>)Activator.CreateInstance(type);

            foreach (var item in (HashSet<object>)v)  // I'm sure this cast will throw as well
            {
                cleanHashSet.Add(Clean(item));
            }

            return cleanHashSet;
        }

        return base.SetValue(v);
    } 
```

我想主要的问题是，一旦我确定它实际上是某种 HashSet，如何循环遍历作为对象传入的 HashSet？我还认为我还需要创建一个新的特定类型的空 HashSet，以便我可以将每个被清理的项目放入其中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T04:15:06.550

在 .NET 中，只有接口和委托类型可以是协变和反变的。所以不可能投射`HashSet<SomeType>`到`HashSet<object>`.

您想将您的接口`v`转换为非通用版本`IEnumerable`

```
dynamic cleanHashSet = Activator.CreateInstance(type);
foreach (object item in (IEnumerable)v)
{
    cleanHashSet.Add(Clean(item)); 
} 
```

如果您不想使用`dynamic`关键字，则需要`Add`使用反射调用方法

```
object cleanHashSet = Activator.CreateInstance(type);
var method = type.GetMethod("Add");
foreach (object item in (IEnumerable)v)
{
    method.Invoke(cleanHashSet, new object[] { Clean(item) });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:16:21.073

采用：

```
bool isHashSet = typeof(HashSet<object>).IsAssignableFrom(type); 
```

或者

```
object x = ...
HashSet<object> hs = x as HashSet<object>;
if (hs != null)
{
    // use hs
} 
```

如果您确实已`<T>`指定，请使用它而不是`object`.

* * *

`HashSet<T>` [实现](http://msdn.microsoft.com/en-us/library/bb359438.aspx) `ICollection<T>`, `IEnumerabel<T>`, `IEnumerable`. 如果您知道`T`可以枚举和添加，这意味着什么。否则枚举只枚举。

# android - Twilio 使用 android 应用程序发送图像

> ID：15491343
> 
> 赞同：0
> 
> 时间：2013-03-19T04:11:26.847
> 
> 标签：android, twilio

我希望我的应用程序的用户能够相互发送图片和视频。我可以使用 Twilio api 做到这一点吗？我正在寻找一个不仅可以发送图片而且还可以存储它们的地方，这样我就不必将它们存放在我自己的后端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:44:19.723

You can use Mogreet API to do that. You will have to upload your image first with media.upload and then send it via MMS with the transaction.send. You can find the documentation at [http://dev.mogreet.com](http://dev.mogreet.com)

# php - pdo->query() 返回每个结果中的两个？

> ID：15491350
> 
> 赞同：4
> 
> 时间：2013-03-19T04:11:44.367
> 
> 标签：php, sql, sqlite, pdo

```
function readDB($db,$event)
{
    try {
        $rows = array();
        $sql = "SELECT \"Red Score\", \"Blue Score\", red1, red2, red3, blu1, blu2, blu3 FROM Matches WHERE Event='$event' AND Type='Q' ORDER BY Number;";
        foreach($db->query($sql) as $row)
        {
            $rows[] = $row;
            echo count($row) . "<br/>";
        }
        printArray($rows);
    } catch(PDOException $e) {
        $rows = 'aids';
        echo $e->getMessage();
    }

    $db = null;
} 
```

这是相关的功能。它运行查询并将结果放入二维数组。将查询更改为仅选择一个没有条件的字段仍会返回两件事。

代码返回正确的数据，只是每条记录重复，即一行8 变成一行16。在SQLite3 控制台中运行的查询返回每件事一次。
示例：
PHP：

```
51    51    27    27    836    836    435    435    1102    1102    245    245    88    88    1293    1293  
33    33    30    30    401    401    3489   3489   415     415     3475   3475   4722  4722  2655    2655 
```

SQLite3：

```
51    27    836    435    1102    245    88    1293  
33    30    401    3489   415     3475   4722  2655 
```

谁能解释为什么会这样？

编辑：我很抱歉。我已经用嵌入式代码替换了粘贴。应该想到这样做。

编辑编辑：解决方案：使用 PDOStatement::setAttribute(); 设置默认获取模式 它默认为导致此问题的 FETCH_BOTH。我在错误的地方寻找解决方案。
文档在这里，更多信息：[http ://www.php.net/manual/en/pdostatement.fetch.php](http://www.php.net/manual/en/pdostatement.fetch.php)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T13:46:49.837

'默认情况下，PDO 将获取由列名和列号索引的结果数组（即，来自 DB 的值在数组中出现两次，具有两个不同的键）。因此，如果您使用的是默认获取模式，您可能会在结果集的这两种表示中循环。谢谢你，丽芙，这个解释很有帮助。

解决方案：使用 PDOStatement::setAttribute(); 设置默认的获取模式；它默认为导致此问题的 FETCH_BOTH。我在错误的地方寻找解决方案。文档在这里，更多信息：[http ://www.php.net/manual/en/pdostatement.fetch.php](http://www.php.net/manual/en/pdostatement.fetch.php)

# android - 在android中模拟箭头键按下

> ID：15491353
> 
> 赞同：2
> 
> 时间：2013-03-19T04:12:07.623
> 
> 标签：android, key, inject, arrow-keys

我目前正在开发一个模拟 d-pad（上、下、左和右）的应用程序。问题是我不知道如何将这些按键发送到其他应用程序。

目前，我正在使用 Instrumentation，它在我的应用程序的活动中运行良好。这是箭头键左代码的片段：

```
new Thread(new Runnable() {         
                    @Override
                    public void run() {                 
                        new Instrumentation().sendKeyDownUpSync(KeyEvent.KEYCODE_DPAD_LEFT);
                    }   
                }).start(); 
```

此实现的问题在于，由于 android 安全功能，我无法将按键发送到其他应用程序。在搜索了注入按键的不同方法后，我遇到了这篇[文章](http://www.pocketmagic.net/2012/04/injecting-events-programatically-on-android/#.UUfRUReOR8E)。但是，在尝试了示例代码之后，它似乎不起作用。我四处寻找，发现android似乎没有键盘输入设备。当我扫描不同的输入设备时，我会得到诸如方向传感器之类的东西。这是我手机（T-959 Galaxy S）上所有输入设备的图片。

![输入设备](../Images/82fec55429df85f4e67e74927bc10e60.png)

如您所见，这些设备都不是键盘。我有一种感觉，这是因为我的手机没有物理键盘。（cypress 是电容键，aries 是音量键，mxt224 是触屏控制器）

经过一番研究，我发现android中的accessibility api对注入事件有限制，但这些只是非常基本的东西，比如切换视图焦点等（[AccessibilityNodeInfo](http://developer.android.com/reference/android/view/accessibility/AccessibilityNodeInfo.html)）。但是，我有一种感觉，我可以扩展它以支持箭头键按下。

所以目前，我很困惑去哪里。有没有人做过这样的事情？由于 Android 中的安全功能，简单的箭头键注入（仅此而已）似乎非常令人沮丧。欢迎所有建议。

编辑：我可能不是很清楚，但我可以只为有根手机构建这个。唯一的要求是此应用程序必须在手机上独立运行，而无需通过 otg 或通过 adb 连接到任何外部键盘。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T05:20:20.093

几天前我想模拟 DPAD 按键事件，我确实找到了一个有其自身局限性的解决方案。

可以使用**adb**命令模拟箭头键按下`input keyevent <keycode>`。因此，如果您想模拟 DPAD LEFT 按键，请使用 adb 命令`adb input keyevent 21`。

为了重用这段代码并将其向前扩展，我创建了一个独立的 Swing 应用程序，在其中我选择了我需要向其发送按键事件的设备，并且我可以使用计算机的现有键盘来输入按键。[我映射键盘键码到 android 键码]。

我通过包含远程和游戏手柄按钮进一步扩展应用程序，一旦完成，我将在 git 上上传项目。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:32:21.147

如果您打算创建一个适用于无根手机的应用程序，那么您最好的选择是使用[http://developer.android.com/reference/android/inputmethodservice/InputMethodService.html实现一个新的 InputMethod](http://developer.android.com/reference/android/inputmethodservice/InputMethodService.html)

# jquery - Spring MVC 和 Ajax 验证

> ID：15491354
> 
> 赞同：0
> 
> 时间：2013-03-19T04:12:16.190
> 
> 标签：jquery, spring-mvc

我有以下ajax。每当指定的输入元素发生变化时，该函数将尝试重新计算总数。

```
$('[name^=quantities]').change(function() {
      calculate();
});
function collectFormData(fields) {
    var data = {};
    for (var i = 0; i < fields.length; i++) {
        var $item = $(fields[i]);
        data[$item.attr('name')] = $item.val();
    }
    return data;
}

function calculate(){
    var $form = $('#purchase-form');
    var $inputs = $form.find('[name]');
    var data = collectFormData($inputs);
    $.ajax({
        url: '${validateUrl}',
        type: 'POST',
        data: data,
        contentType: 'application/json; charset=utf-8',
        success: function (response) {
            alert(response.status);
        },
        error: function () {
            alert("error");
        }
    });
} 
```

HTML：

```
<form id="purchase-form" action="/MyNewApp/purchase" method="post">
...
...
<input id="quantities[0]_id" name="quantities[0]" type="number">
<input id="quantities[1]_id" name="quantities[1]" type="number">
</form> 
```

我在春天的处理程序

```
@RequestMapping(value = "/purchaseValidation.json", method = RequestMethod.POST)
    @ResponseBody
    public ValidationResponse validate(
            @ModelAttribute(value = "form") @Valid PurchaseForm form,
            BindingResult result, Locale locale) {
        ValidationResponse res = new ValidationResponse();
        // value of form.getQuantities.get(0) == 0
        // value of form.getQuantities.get(1) == 0
        return res;
    } 
```

采购表格.java

```
public class PurchaseForm {

    private List<Item> itemList;

    private List<Integer> quantities;

    private boolean starterPackageRequired;

    public PurchaseForm() {

    }
        ...
        ...
} 
```

在我的 ajax 帖子中，我可以看到数量的值是 2 和 0，但是在我的 spring 处理程序上，这两个值都是 0。任何指针可能导致这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:14:35.300

将输入元素的名称从`name="quantities[0]"`和更改`name="quantities[1]"`为`name="quantities"`。

注意：出于性能原因，还要将选择器`$('[name^=quantities]')`更改为`$('input[name^=quantities]')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:47:19.833

我通过将 ajax 调用函数更改为此来修复它：

```
 $.post('${validateUrl}', data, function(response) {
        $('#ajaxResult').text(response);
    }, 'json'); 
```

`$.post`我想和之间一定有一些区别`$.ajax`

# canvas - 画布图像和 svg 叠加

> ID：15491356
> 
> 赞同：4
> 
> 时间：2013-03-19T04:12:36.497
> 
> 标签：canvas, svg, d3.js, overlay, fits

我使用 astrojs 库（确切地说[是 webfits](https://github.com/astrojs/webfits)和[fitjs](https://github.com/astrojs/fitsjs)）在画布中加载 FITS 文件。我想添加一个覆盖来环绕星星、跟踪路径等，我决定用[d3.js 来做](https://github.com/mbostock/d3/wiki/Gallery)

这是我目前的测试（下载 1MB FITS 图像需要一段时间）： [http ://bl.ocks.org/vertighel/raw/5193613/](http://bl.ocks.org/vertighel/raw/5193613/)

![适合覆盖](../Images/770e518cd48d75fef45bea2fcd25e295.png)

拖动行为效果很好，但缩放行为有问题。有人知道如何解决吗？

# ios - 为什么 sem_open 在 iOS 中返回无效指针？

> ID：15491359
> 
> 赞同：4
> 
> 时间：2013-03-19T04:12:52.243
> 
> 标签：ios, ios-simulator, semaphore, errno

我已经被困了很长一段时间了。有一个适用于某些 linux 风格的遗留代码 [in C]。我正在尝试将其移植到 iOS。我在 iPhone 6.1 模拟器上运行该应用程序

我正在尝试使用信号量，将其打开为：-

```
sem_t * ptr_sem = NULL;

ptr_sem = sem_open("robin", O_CREAT , S_IXUSR | S_IRGRP, 0);

if (ptr_sem == SEM_FAILED) {
    printf("\nerror number:%d", errno);

    return -1;
} else {
    printf("\n semaphore creation errno: %d", errno);
    return 0;
} 
```

此代码每次运行时都返回 0。值得注意的是，对于每个新的信号量名称，errno 第一次为 22 [EINVAL]，并且对于所有后续的 sem_open 尝试[即使在关闭模拟器后]，errno 都设置为 13[EACCES]。此外，返回的指针的返回值是无效的内存地址 [0x000..5]。我已经检查了上面的一些类似问题 - 尝试在打开之前进行取消链接，但它也对我不起作用。

谁能让我知道上面代码中的问题是什么。

# dojo - dojo1.8 - tried to register but . . . already registered - building select widget

> ID：15491362
> 
> 赞同：0
> 
> 时间：2013-03-19T04:13:04.100
> 
> 标签：dojo

Hi I had a trouble figuring out where select's id is registered at attempted once more. Possible causes:- 1) ParseOnload and Parser.parse() on the same page 2) Giving the same id to another new select 3) Registering the same select with new id

I could not figure what cause the select to registered twice.

```
...
...
<div id='main_bContainer' data-dojo-type='dijit/layout/BorderContainer' data-dojo-props='design:"sidebar"'>
        <div id='paneA' class='cP_Left' data-dojo-type='dijit/layout/ContentPane' data-dojo-props='region:"left"'>  
            <div id='surfaceElement1' style='border:1px solid #ccc; margin-bottom:5px; width:317px; height:55px;'><!--these dimensions here in this line override the dimensions as set by createSurface function-->
            <div id='node_meterSelect'></div>   
            </div>

            <div id='surfaceElement2' style='border:1px solid #ccc; width:317px; height:200px;'><!--these dimensions here in this line override the dimensions as set by createSurface function-->
            <div id='node_cardSelect'></div>    
            </div>
        </div>
        <div id='paneB' class='cP_Right' data-dojo-type='dijit/layout/ContentPane'data-dojo-props='region:"center"'>
            <!--<div id='surfaceElement3' style='border:1px solid #ccc;'> <!--width:520px; height:400px;'><!--it's the size-->

            <!--</div>-->
        </div>
    </div>
...
...
...
var meter_Select = new Select
            ({store:memoStore1,
              style:{width:'140px'},
            }, "node_meterSelect");
            meter_Select.startup();

            on(meter_Select, 'change', function(evt)
            {
                    console.debug('Selected Card = '+ meter_Select.value);
                    request.post('listofcards.php',{data:{cardX : meter_Select.value},
                    handleAs:"json"}).then(function(response)
...
... 
```

The error is "

Error: Tried to register widget with id==node_meterSelect but that id is already registered" What could be the problem? please advise.. Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:59:56.827

Here is a working jsfiddle based on your code:

[http://jsfiddle.net/JxpRC/2/](http://jsfiddle.net/JxpRC/2/)

Maybe you used the id somewhere else in your code ?

```
require(["dijit/form/Select",
  "dojo/data/ObjectStore",
  "dojo/store/Memory","dojo/domReady!"
], function(Select, ObjectStore, Memory){

     var store1 = new Memory({
    data: [
      { id: "foo", label: "Foo" },
      { id: "bar", label: "Bar" }
    ]
  });
    var os = new ObjectStore({ objectStore: store1 });

var meter_Select = new Select
            ({store:os,
              style:{width:'140px'},
            }, "node_meterSelect");
            meter_Select.startup();
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T07:25:12.573

i found your solution. You do not map all the require values to the right variables ! So registry and combobox are not mapped right ! you map "combobox" on "on".

Take a look at this jsfiddle:

[http://jsfiddle.net/ejEGr/7/](http://jsfiddle.net/ejEGr/7/)

Your function head with missing parameters:

```
function (parser, ready, dom, domConstruct, gfx, declare, 
_WidgetBase, Memory, Select, ObjectStore, request, on) 
```

After correction:

```
function (parser, ready, dom, domConstruct, gfx, declare, 
_WidgetBase, Memory, Select, ObjectStore, request,box,registry, on) 
```

So i had to add box & registry and now everything should work fine.

# html - 粗体和斜体在 Firefox 或 Chrome 中不起作用

> ID：15491364
> 
> 赞同：6
> 
> 时间：2013-03-19T04:13:15.753
> 
> 标签：html, css

粗体`<b></b>`和斜体`<i></i>`标签在 iPhone 和 Internet Explorer 上正确呈现，但在 Firefox 或 Chrome 中没有格式。

这是 .css 文件。我还尝试`i { font-style:italic; }`在重置和样式中单独添加。

```
Color.css:

body {
    color: #fff;
    background-image: url(../img/background-red.png);
}

Reset.css:

/* http://meyerweb.com/eric/tools/css/reset/
   v2.0 | 20110126
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
input, textarea, button
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}

/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure,
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul, dl {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}

Style.css:

html, body {
    height: 100%;
}

body {
    margin: 0;
    overflow: hidden;  

    font: normal 18px/1.4 'Open Sans', Arial, Helvetica, sans-serif;

    background-position: left top;
    background-repeat: no-repeat;
}

.panel {
    position: absolute;
    z-index: 0;
    background: #fff;

    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
    opacity: 0;

    -moz-box-shadow: 0 0 10px #fff;
    -webkit-box-shadow: 0 0 10px #fff;
    box-shadow: 0 0 10px #fff;
}

.content {
    max-width: 45%;
    margin: 100px;

    float: left;

    position: relative;
    z-index: 1;    
}

h1 {
    font-size: 72px;
    line-height: 56px;
    font-weight: 300;    
}

h2 {
    margin: 15px 0 50px;    

    font-size: 30px;
    line-height: 30px;    
    font-weight: 300;    
} 
```

**这是 HTML，我尝试使用`<strong>asdf</strong>`它来查看它是否会使文本变为粗体，但事实并非如此。**

```
<div class="content">
    <h1>adssda</h1>
    <h2>dasdasdsa</h2>

<p><i><strong>sadsad</strong>asdsad</i></p><br>
sadasddsa<br><br>
<strong>asdasd</strong><br><br>
    <p><strong>asdasd</strong></p><br>
</div> 
```

为什么粗体文本看起来和普通文本一样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-28T07:43:46.647

由于某种原因， Firefox 在某些标签（如`<b>`,`<strong>`和标签）上存在问题。`<i>`这是firefox浏览器本身的一个错误。尝试不同版本的 Firefox，情况会有所不同。

这是适用于所有人的解决方法，将其添加到您的 CSS 文件中：

```
strong, b {
    font-weight: bold;
} 
```

这是一个 CSS 覆盖。**现在 Firefox像这样**呈现粗体文本，而不是像这样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T04:33:02.743

您的`font: inherit`主重置块（重置标题下的第一个）导致页面上的所有字体都被重置。确实，[即使将无效的 html 修复为有效，也不能解决这个问题](http://jsfiddle.net/GSySV/1/)，请记住您的 css。

注释掉这个属性会[修复你的文本](http://jsfiddle.net/GSySV/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T04:17:58.157

现在替换成这段代码

```
<p><strong><i>sadsad</strong>asdsad</i></p><br>
sadasddsa<br><br>
<strong>asdasd</strong><br><br>
    <p><strong>asdasd</strong></p><br> 
```

**进入这个**

```
<p><strong><i>sadsad</i></strong><i>asdsad</i></p><br>
sadasddsa<br><br>
<strong>asdasd</strong><br><br>
    <p><strong>asdasd</strong></p><br> 
```

**[现场演示](http://tinkerbin.com/qXuy0Een)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T04:19:15.887

这是因为您的 HTML 格式不正确。

你正在关闭`</strong>`之前`</i>`

应该

```
<div class="content">
     <h1>adssda</h1>
     <h2>dasdasdsa</h2>
    <p><i><strong>sadsad</strong>asdsad</i></p>
    <br>
    sadasddsa
    <br>
    <br>
    <strong>asdasd</strong>
    <br>
    <br>
    <p><strong>asdasd</strong></p>
    <br>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T04:20:09.287

我认为它的标签关闭错误，在 HTML

```
<p><strong><i>sadsad</strong>asdsad</i></p><br> 
```

这应该是这样的

```
<p><i><strong>sadsad</strong>asdsad</i></p><br /> 
```

打开标签必须在同一个标​​签中关闭以避免错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-14T10:15:59.710

HTML 元素采用树形结构。您的元素没有关闭，因为它们是打开的。例如-

```
<div>
<p>
<i>
<strong> sadsad
</strong>
</i>
</p>
</div> 
```

# machine-learning - 人工神经网络在姿态估计中的适用性

> ID：15491365
> 
> 赞同：1
> 
> 时间：2013-03-19T04:13:19.373
> 
> 标签：machine-learning, neural-network, feature-detection, pose-estimation

我正在为一个需要无标记相对姿势估计的 uni 项目工作。为此，我拍摄了两张图像并匹配图片某些位置的 n 个特征。从这些点我可以找到这些点之间的向量，当包含在距离中时，可以用来估计相机的新位置。

该项目需要可在移动设备上部署，因此算法需要高效。我必须使它更有效的一个想法是获取这些向量并将它们放入神经网络中，该神经网络可以获取向量并根据输入输出对 xyz 运动向量的估计。

我的问题是，如果训练有素，NN 是否适合这种情况？如果是这样，我将如何计算我需要的隐藏单元的数量以及最好的激活函数是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:03:02.580

为您的应用程序使用神经网络可以很好地工作，但是，我觉得您需要大量的训练样本才能使网络泛化。当然，这也取决于您要处理的姿势的类型和数量。在我看来，通过一些巧妙的数学运算，可以直接从输入向量中导出运动向量——如果你有机会想出一种方法（或提供更多信息以便其他人可以考虑）也），这将是非常可取的，因为在这种情况下，您将包含有关该任务的先验知识，而不是依靠 NN 从数据中学习它。

如果您决定继续使用 NN 方法，请记住以下几点：

1.  将您的数据划分为训练集和验证集。这使您可以确保网络不会过拟合。您使用训练集进行训练，并使用验证集上的错误来确定特定网络的质量。训练/验证的比率取决于您拥有的数据量。大型验证集（例如，50% 的数据）将允许更准确地得出关于训练网络质量的结论，但通常您的数据太少而无法承受。但是，无论如何，我建议至少使用 10% 的数据进行验证。
2.  至于隐藏单元的数量，经验法则是每个自由参数（即每个权重）至少有 10 个训练样例。因此，假设您有一个具有 4 个输入、10 个隐藏单元和 3 个输出单元的 3 层网络，其中每个隐藏单元和输出单元还有一个偏置权重，您将有 (4+1) * 10 + (10+ 1) * 3 = 83 个自由参数/权重。一般来说，您应该尝试隐藏单元的数量以及隐藏层的数量。根据我的经验，4 层网络（即 2 个隐藏层）比 3 层网络工作得更好，但这取决于问题。由于您还拥有验证集，因此您可以找出有效的网络架构和规模，而不必担心过度拟合。
3.  对于激活函数，您应该使用一些[sigmoid 函数](http://en.wikipedia.org/wiki/Sigmoid_function)来允许非线性行为。我喜欢双曲正切的对称性，但根据我的经验，您也可以使用逻辑函数。

# jquery - jQuery Datepicker 将默认日期设置为“当前月份，当前日期，（当前年份-18）”

> ID：15491367
> 
> 赞同：2
> 
> 时间：2013-03-19T04:13:31.380
> 
> 标签：jquery, datepicker

我有一个 jQuery 日期选择器。我想将默认日期设置为“当前月份，当前日期，（当前年份-18）”，但是在设置 defaultDate 属性时出现问题。显示的默认年份是 1920 年，据说是 1995 年。有人可以帮忙吗？

我的代码：

**HTML**

```
<input type="text" class="datepicker minimumSize" name="BirthDate" id="BirthDate"  readonly="readonly"/> 
```

**JavaScript**

```
var d = new Date();
var year = d.getFullYear() - 18;
$('#BirthDate').datepicker({ changeYear: true, changeMonth: true, yearRange: '1920:' + year + '', defaultDate: d.getMonth()+d.getDay()+year}); 
```

**JSFiddle** [http://jsfiddle.net/jobzky/zg8Le/](http://jsfiddle.net/jobzky/zg8Le/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T04:26:08.073

尝试

```
var d = new Date();
var year = d.getFullYear() - 18;
d.setFullYear(year);
$('#BirthDate').datepicker({ changeYear: true, changeMonth: true, yearRange: '1920:' + year + '', defaultDate: d}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/zg8Le/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T04:24:10.973

在你的小提琴中，你有`defaultYear`这不是一个有效的选择。在这里，您有`defaultDate`，顺便说一句，您将日期月份和年份加在一起（也不太可能是您的意思），您似乎想将其设为日期。

我怀疑你想要这个：

```
$('#BirthDate').datepicker({ 
   changeYear: true, 
   changeMonth: true, 
   yearRange: '1920:' + year, 
   defaultDate: new Date(year,d.getMonth(),d.getDay())
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T04:18:17.480

试试这个。这将解决你的问题

```
var d = new Date();
var year = d.getFullYear() - 18 ;

$('#BirthDate').datepicker({ 
    changeYear: true,
    changeMonth: true,
    yearRange: '1920:' + year, 
   defaultDate: new Date(year, d.getMonth(), d.getDate())
   }); 
```

# java - 如何从共享库中调用函数

> ID：15491369
> 
> 赞同：0
> 
> 时间：2013-03-19T04:13:49.217
> 
> 标签：java, c++, c, linux, java-native-interface

我的系统（Java + Linux）中有一个共享库加载。

```
System.loadLibrary("mylib"); 
```

我想从 mylib 中调用一个 java 函数，例如：

```
JNIEXPORT void JNICALL Java_absoluta_web_AW_10001_Funcao3(JNIEnv *env, jobject obj) {
    javaFUnction();
printf("Here...\n");
    return;
} 
```

这是可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:23:10.737

你会用

`env->CallVoidMethod(obj, methodID)`

你在哪里获得类似的方法ID

`jmethodID = env->GetMethodID(classID, "javaFuntion", signature)`

其中 classID 是类的 id，signature 是函数的签名。您可以使用 javap 获取签名。这一切都有据可查。你应该可以从那里拿走它。

# c++ - 如何使用逗号将字符串拆分为两个字符串并存储字符串？(C++)

> ID：15491372
> 
> 赞同：4
> 
> 时间：2013-03-19T04:14:02.873
> 
> 标签：c++

我想看看以前是否有人问过这个问题，但我得到的只是 Java 的答案。我必须以（姓氏，名字）的格式从文件中读取名字和姓氏。该程序要求我们（除其他事项外）以 (firstname lastname) 的格式显示名称，使用空格而不是逗号。我认为最简单的做法是将字符串拆分为两个较小的字符串，然后按顺序显示它们。我该怎么做呢？我看到了一些 BOOST 令牌的东西，但我不能使用它，因为程序必须能够在 vanilla CodeBlocks 上运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T04:18:34.723

当然更紧凑，如果不是更优雅的解决方案是可能的，但这确实 -

```
#include <string>

//... read input_str from the file

int pos = input_str.find_first_of(',');
std::string firstname = input_str.substr(pos+1),
      lastname = input_str.substr(0, pos);

std::string output_str = firstname + " " + lastname; 
```

# jquery - 正则表达式：在文件类型扩展名后插入文本

> ID：15491375
> 
> 赞同：0
> 
> 时间：2013-03-19T04:14:31.277
> 
> 标签：jquery, regex, string

我有一个这样的字符串，即文件名列表；

```
mouse.gifcat.jpgdog.pngwolf.tga... 
```

它没有空格，它们是不同的文件格式。我可以保证扩展名总是 3 个字符长。

我想在此文本行中的文件之间插入“|”以获取 mouse.gif | 猫.jpg...

我可以对我期望的每个不同的扩展名使用 replace(/.ext/g, ".ext | ") ，但我想要一些多用途的东西。

正则表达式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:31:39.357

或者

```
.replace(/(\....)(.)/g, '$1|$2') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T04:16:04.913

像这样的东西：

```
.replace(/(\....)/g,"$1|") 
```

也就是说，将文字`.`与匹配`\.`，后跟任意三个字符与`...`，用括号捕获该组，以便您可以在替换字符串中将其用作`$1`。

编辑：或者实际上你不需要括号，如果你使用`$&`而不是`$1`：

```
x.replace(/\..../g,"$&|") 
```

虽然无论哪种方式它都会`|`在字符串的末尾添加一个，所以也许：

```
.replace(/\..../g,"$&|").slice(0,-1) 
```

# python - 如何从网页中查找和提取链接？

> ID：15491379
> 
> 赞同：0
> 
> 时间：2013-03-19T04:14:55.580
> 
> 标签：python

我有网站，例如`http://site.com`

我想获取主页并仅提取与正则表达式匹配的链接，例如`.*somepage.*`

html代码中链接的格式可以是：

```
<a href="http://site.com/my-somepage">url</a> 
<a href="/my-somepage.html">url</a> 
<a href="my-somepage.htm">url</a> 
```

我需要输出格式：

```
http://site.com/my-somepage
http://site.com/my-somepage.html
http://site.com/my-somepage.htm 
```

输出 url 必须始终包含域名。

什么是快速的python解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:26:48.760

你可以使用[`lxml.html`](http://lxml.de/lxmlhtml.html#working-with-links)：

```
from lxml import html

url = "http://site.com"
doc = html.parse(url).getroot() # download & parse webpage
doc.make_links_absolute(url)
for element, attribute, link, _ in doc.iterlinks():
    if (attribute == 'href' and element.tag == 'a' and
        'somepage' in link): # or e.g., re.search('somepage', link)
        print(link) 
```

或同样使用[`beautifulsoup4`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)：

```
import re
try:
    from urllib2 import urlopen
    from urlparse import urljoin
except ImportError: # Python 3
    from urllib.parse import urljoin
    from urllib.request import urlopen

from bs4 import BeautifulSoup, SoupStrainer # pip install beautifulsoup4

url = "http://site.com"
only_links = SoupStrainer('a', href=re.compile('somepage'))
soup = BeautifulSoup(urlopen(url), parse_only=only_links)
urls = [urljoin(url, a['href']) for a in soup(only_links)]
print("\n".join(urls)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:06:18.483

使用 HTML Parsing 模块，例如[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。
一些代码（只有一些）：

```
from bs4 import BeautifulSoup
import re

html = '''<a href="http://site.com/my-somepage">url</a> 
<a href="/my-somepage.html">url</a> 
<a href="my-somepage.htm">url</a>'''
soup = BeautifulSoup(html)
links = soup.find_all('a',{'href':re.compile('.*somepage.*')})
for link in links:
    print link['href'] 
```

输出：

```
http://site.com/my-somepage
/my-somepage.html
my-somepage.htm 
```

你应该能够从这么多数据中得到你想要的格式......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T07:30:12.350

[Scrapy](http://scrapy.org/)是做你想做的最简单的方法。实际上[内置了](https://scrapy.readthedocs.org/en/latest/topics/link-extractors.html?highlight=link%20extractor#link-extractors)链接提取机制。

如果您在编写蜘蛛以抓取链接方面需要帮助，请告诉我。

另请参阅：

*   [如何使用 Python Scrapy 模块列出我网站上的所有 URL？](https://stackoverflow.com/questions/9561020/how-do-i-use-the-python-scrapy-module-to-list-all-the-urls-from-my-website)
*   [Scrapy教程](http://doc.scrapy.org/en/latest/intro/tutorial.html)

# paypal - 在 PayPal 上预填充“发送付款”数据？

> ID：15491382
> 
> 赞同：0
> 
> 时间：2013-03-19T04:15:15.563
> 
> 标签：paypal

有没有办法在 PayPal 上预先填充“发送付款”数据？我不想现在付款按钮，我只想能够有一个按钮供我自己内部使用，它可以启动 Paypal 网站并预先填充字段以向某人发送付款。那可能吗？

我尝试使用将数据提交到贝宝的表单，但我有一个问题，AMOUNT 字段没有填充，我不知道我做错了什么！

这是我到目前为止所拥有的：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target = "paypal">
<input type="hidden" name="cmd" value="_send-money">
<INPUT TYPE="hidden" name="charset" value="utf-8">
<INPUT TYPE="hidden" NAME="email" VALUE="someone@gmail.com">
<INPUT TYPE="hidden" NAME="currency_code" VALUE="USD">
<input type="hidden" name="amount" value="15.00">
<input type="submit" value="Open Paypal">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-25T06:10:08.750

您可以尝试重定向到 paypal.me/accountname/moneyamount（例如：paypal.me/johnsmith/50），让它将您带到一个页面，该页面向 john smith 帐户支付了 50 美元的预填金额。此功能是默认设置的。 [https://www.paypal-community.com/t5/Products-and-Services/Can-the-PayPal-me-URL-be-modified-to-pre-fill-the-quot-Note-quot/td- p/1509015](https://www.paypal-community.com/t5/Products-and-Services/Can-the-PayPal-me-URL-be-modified-to-pre-fill-the-quot-Note-quot/td-p/1509015)

# arrays - Matlab，找到最小值的索引，条件是它必须为负

> ID：15491384
> 
> 赞同：3
> 
> 时间：2013-03-19T04:15:34.163
> 
> 标签：arrays, matlab, find, min

在给定的数组中，我需要找到数组中最小值的索引，但前提是它是负数。

例如：`[1, 2, 3, 4]`将不返回任何索引

并且`[1, 4, -7, -2]`会回来`3`

我在想命令一定很简单`find()`，但我不知道如何在这种特定情况下使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T04:40:59.467

假设输入矩阵是`A`，这应该可以解决问题：

```
find(A==min(A) & A<0) 
```

例如：

```
>> A = [1, 2, 3, 4];
>> B = [1, 4, -7, -2];
>> find(A==min(A) & A<0)

ans =

   Empty matrix: 1-by-0

>> find(B==min(B) & B<0)

ans =

     3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T05:45:31.470

有时，将所有内容都放入一个复杂的向量表达式中并不是最优的。

在这种情况下，我希望避免调用`find`.

```
function [i] = most_negative_index(x)
   [mn, i] = min(x);
   if mn >= 0
       i = [];
   end
end 
```

# ios - NSLinguisticTagger - enumerateLinguisticTagsInRange 块不限制范围

> ID：15491385
> 
> 赞同：0
> 
> 时间：2013-03-19T04:15:34.503
> 
> 标签：ios, objective-c, xcode, objective-c-blocks

我`enumerateLinguisticTagsInRange`在这样的方法中使用：

```
[nonAttributedString enumerateLinguisticTagsInRange:stringRange
                                           scheme:NSLinguisticTagSchemeTokenType
                                          options:NSLinguisticTaggerOmitWhitespace | NSLinguisticTaggerOmitPunctuation | NSLinguisticTaggerJoinNames
                                      orthography:[NSOrthography orthographyWithDominantScript:@"Latn" languageMap:languageMap]
                                       usingBlock:^(NSString *tag, NSRange tokenRange, NSRange sentenceRange, BOOL *stop) {

       // If the token is a word...
       if ([tag isEqualToString:@"Word"])
       {
           // (And add to the tracking dictionary)
           NSMutableDictionary *wordAndRange = [[NSMutableDictionary alloc] init];
           [wordAndRange setObject:[NSNumber numberWithInt:(tokenRange.location + tokenRange.length)] forKey:[nonAttributedString substringWithRange:tokenRange]];

           [typedWordsAndRanges addObject:wordAndRange];
       }
   }]; 
```

标记器工作正常，但不将范围限制为`stringRange`. 它完整​​地列举`nonAttributedString`了一遍。

如果我在此块上方包含以下日志：

```
 NSLog(@"########### stringRange.location = %d", stringRange.location);
 NSLog(@"########### stringRange.length = %d", stringRange.length);
 NSLog(@"########### substring = %@", [nonAttributedString substringWithRange:stringRange]); 
```

我得到以下输出：

```
2013-03-18 21:06:27.744 WEJ[13231:c07] ########### stringRange.location = 10
2013-03-18 21:06:27.745 WEJ[13231:c07] ########### stringRange.length = 4
2013-03-18 21:06:27.805 WEJ[13231:c07] ########### substring =  de 
```

所以`stringRange`是正确的。但是，它仍然在完整地列举`nonAttributedString`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:01:46.313

状态的[文档`enumerateTagsInRange:scheme:options:usingBlock:`](http://developer.apple.com/library/ios/documentation/cocoa/reference/NSLinguisticTagger_Class/Reference/Reference.html#//apple_ref/occ/instm/NSLinguisticTagger/enumerateTagsInRange%3ascheme%3aoptions%3ausingBlock%3a)：

> 需要注意的是，此方法将返回与给定范围相交的所有标记的范围。

如果您只想考虑那些*完全*在 中的标记，则`stringRange`必须`nonAttributedString`在调用之前检索该子字符串`enumerateTagsInRange::::`。

# iis - IIS applicationHost 'setEnvironment' 属性

> ID：15491388
> 
> 赞同：2
> 
> 时间：2013-03-19T04:15:41.537
> 
> 标签：iis, localdb

```
<add name="ASP.NET v4.0" autoStart="true" managedRuntimeVersion="v4.0" managedPipelineMode="Integrated">
<processModel identityType="ApplicationPoolIdentity" loadUserProfile="true" setProfileEnvironment="true" />
</add> 
```

我在 IIS 的 appliationHost 配置中添加了它，以解决我在本文中看到的 IIS 中的 localDb 问题

> [http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-1-user-profile.aspx](http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-1-user-profile.aspx)

你们能帮我避免这个错误吗？

> 无法识别的属性“setProfileEnvironment”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-11T21:38:02.123

看起来您正试图将值放在实际的应用程序池中。该属性位于定义的应用程序池之外，并且位于 appicationpooldefaults 中。

```
<applicationPoolDefaults>
<processModel identityType="ApplicationPoolIdentity" loadUserProfile="true" setProfileEnvironment="true" />
<applicationPoolDefaults> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:47:45.750

[快速搜索](http://forums.iis.net/t/1178788.aspx/1)您提供的错误指向过时或损坏的 IIS（实现`setProfileEnvironment`属性的程序集或其依赖项之一丢失或损坏）。至少这是基于提供的数据的最佳猜测。

# c# - 在 Facebook 集成中，我必须访问给出访问令牌的 url，但我在 asp.net 中获取了我发布的 url

> ID：15491397
> 
> 赞同：1
> 
> 时间：2013-03-19T04:16:25.413
> 
> 标签：c#, asp.net

我在 asp.net Web 应用程序的 facebook_login 页面的 Page_Load 上使用以下代码。重定向此 url 后，我在 url 中获得了 accesstoken，但是当我尝试通过 HttpContext.Current.Request.Url.AbsoluteUri 访问此当前 url 时，它给出了发布它的应用程序的 url，而不是当前在窗口中的 url。

如何访问此访问令牌或用户详细信息？

```
var uriParams = new Dictionary<string, string>() {
                    {"client_id", facebookAppId},
                    {"response_type", "token"},
                    {"scope", "user_about_me, read_stream, email"},
                    {"redirect_uri", "http://apps.facebook.com/appNameHere/"}
                }; 
        StringBuilder urlBuilder = new StringBuilder();
        foreach (var current in uriParams)
        {
            if (urlBuilder.Length > 0)
            {
                urlBuilder.Append("&");
            }
            var encoded = HttpUtility.UrlEncode(current.Value);
            urlBuilder.AppendFormat("{0}={1}", current.Key, encoded);
        }
        var loginUrl = "http://www.facebook.com/dialog/oauth?" + urlBuilder.ToString();
        Response.Redirect(loginUrl); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:51:44.107

在 Facebook 中，您可以设置**回调 url**值，该值应指向您的 Web 应用程序。因此，一旦您向 Facebook 发出请求`http://www.facebook.com/dialog/oauth`并在成功登录后重定向到 Callback Url（这是您的 Web 应用程序）。

然后你必须调用 url ：`https://graph.facebook.com/oauth/access_token` 像这样：

```
 StringBuilder uri = new StringBuilder();
        uri.Append("https://graph.facebook.com/oauth/access_token?");
        uri.Append("client_id=" + ClientKey + "&");
        uri.Append("redirect_uri=" + Curl + "&");
        uri.Append("scope=offline_access&");
        uri.Append("client_secret=" + ClientSecret + "&");
        uri.Append("code=" + OAuthCode);

        HttpWebRequest req = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(uri);
        req.Headers.Add("Authorization", String.Empty);            
        req.Method = "POST";
        req.ServicePoint.Expect100Continue = false;
        req.ContentLength = 0;
        req.ContentType = "application/x-www-form-urlencoded";

        HttpWebResponse resp;
        try
        {
            resp = (HttpWebResponse)req.GetResponse();
            System.IO.StreamReader sr = new System.IO.StreamReader(resp.GetResponseStream());
            string result = sr.ReadToEnd().Trim();
            string[] resultCollection = Regex.Split(result, "&");
            string access_token = Regex.Split(resultCollection[0], "=")[1];//This is the access token
            //which you want and you can save it to database or some  where for further use.
        }
        catch (WebException ex)
        {
            resp = (HttpWebResponse)ex.Response;

            //pass on the exception
            throw ex;
        } 
```

**更新 ：**

OAuthCode你可以这样得到，成功登录后FB重定向到你的web应用页面后可用

```
OAuthCode = Request.Params["code"]; 
```

标题你可以像空一样传递`String.Empty`

# google-app-engine - AppEngine：无法更新应用程序：无法编译jsp文件

> ID：15491398
> 
> 赞同：2
> 
> 时间：2013-03-19T04:16:45.673
> 
> 标签：google-app-engine

由于与在全文搜索 API 中添加文档相关的问题，我刚刚将我的 AppEngine SDK 从 1.7.0 更新到 1.7.5。

但现在，我无法上传应用程序。

以下是错误：

```
Deploying to Google' has encountered a problem
Unable to update app: Failed to compile jsp files. 
```

在日志文件中：

```
Unable to update:
com.google.appengine.tools.admin.JspCompilationException: Failed to compile jsp files.
    at com.google.appengine.tools.admin.Application.compileJsps(Application.java:756)
    at com.google.appengine.tools.admin.Application.createStagingDirectory(Application.java:592)
    at com.google.appengine.tools.admin.AppAdminImpl.doUpdate(AppAdminImpl.java:370)
    at com.google.appengine.tools.admin.AppAdminImpl.update(AppAdminImpl.java:53)
    at com.google.appengine.eclipse.core.proxy.AppEngineBridgeImpl.deploy(AppEngineBridgeImpl.java:433)
    at com.google.appengine.eclipse.core.deploy.DeployProjectJob.runInWorkspace(DeployProjectJob.java:148)
    at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T06:46:22.450

那么你需要让JDK指向你的Eclipse构建路径。

![构建路径](../Images/5ebe4b4106a902c6b846853a96a371e6.png)

![JDK 位置](../Images/c29f8fe4b41b0277f32120b6cc13b259.png)

**单击 Installed JREs 并将其指向您的 JDK 安装位置。**

![安装的 JDK 路径](../Images/8690910d5fd4b03d6af3d44c7eafada2.png)

如果这甚至不起作用，请转到eclipse 目录中的**eclipse.ini**文件。添加以下参数。

```
-vm
C:\Program Files\Java\jdk_1.6.30\bin\javaw.exe 
```

然后重新启动你的eclipse，一切都会开始工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T07:06:30.900

在本地开发服务器上运行应用程序，您会发现 JSP 文件有错误，您需要在编译之前对其进行整理。

# linux - 为什么我不能在这里使用注册？

> ID：15491400
> 
> 赞同：2
> 
> 时间：2013-03-19T04:17:05.003
> 
> 标签：linux, assembly, x86, 32-bit

如果我使用寄存器而不是内存，为什么它不打印字符？

这是代码：

```
mov eax,97
mov ebp,eax
call print_char

print_char:
pusha          
mov eax,4       
mov ebx,1       
mov ecx,ebp 
mov edx,1       
int 80h         
popa            
ret 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T04:19:48.537

并不是您不能使用寄存器……而是您没有提供地址字符串（特别是 C 字符串，一个以空字符结尾的¹个字符数组）。

对于那些不熟悉linux[`int 80h`系统调用](http://int80h.org/)的人来说，快速的背景信息，这里是x86 上的[调用约定：](https://stackoverflow.com/questions/2535989/what-are-the-calling-conventions-for-unix-linux-system-calls-on-x86-64)

```
System call #  - eax
Parameters     - ebx, ecx, edx, esi, edi, ebp 
```

因此，[您正在调用系统调用 4](http://asm.sourceforge.net/syscall.html)，即`sys_write`. C签名是：

```
ssize_t sys_write(unsigned int fd, const char * buf, size_t count) 
```

您可以看到第二个参数 ( `ecx`) 应该是 a `const char* buf`，它是一个指向字符串的指针。您正在通过`97`，这肯定不是一个有效的地址，并且您可能存在段错误。

您的示例的一种快速而简单的方法，它使用堆栈来存储该单字符字符串：

```
print_char:    # Takes char in ebp
    pusha
    mov    eax, 4     # sys_write
    mov    ebx, 1     # stdout

    push   ebp
    mov    ecx, esp   # buf  (char on stack)

    mov    edx, 1     # just one character
    int    80h        # linux syscall
    pop    ebp
    popa
    ret 
```

这应该将字母“a”（ASCII 97）打印到标准输出。如果你想打印一个十进制的 97，那么就像在 C 中一样，你会从`printf`家族中调用一些东西，你需要在尝试将它写入之前将该十进制数字转换为字符串`stdout`。

* * *

[1 - 从技术上讲，这里的字符串不需要以空值结尾，因为您可以指定只打印一个字符。]

# python - 如何在 Python 中覆盖文件？

> ID：15491417
> 
> 赞同：7
> 
> 时间：2013-03-19T04:19:27.733
> 
> 标签：python, file

我正在尝试覆盖文件。我的答案基于这个[Read and overwrite a file in Python](https://stackoverflow.com/questions/2424000/read-and-overwrite-a-file-in-python)

**要完成我的代码：**

```
<select class="select compact expandable-list check-list" 
    ONCHANGE="location = this.options[this.selectedIndex].value;">
    <option value="{% url envelopes:auto_sort %}?sort_by=custom">
        Custom order
    </option>
    <optgroup label="Category">
        <option value="{% url envelopes:auto_sort %}?sort_by=cat_asc">
            Ascending order
        </option>
        <option value="{% url envelopes:auto_sort %}?sort_by=cat_desc">
            Descending order
        </option>
    </optgroup>
</select>

def auto_sort(request):
    sort_by = request.GET.get('sort_by', None)
    if sort_by:
        temp_path = "{0}/file.txt".format(settings.SITE_ROOT) 

        f=open(temp_path,'r+')
        text = f.read()
        text = re.sub('cat_asc', 'cat_desc', text)
        f.seek(0)
        f.write(text)
        f.truncate()
        f.close();

        handle=open(temp_path,'w+')
        handle.write(sort_by)
        handle.close();

    return HttpResponseRedirect(reverse('envelopes:editor')) 
```

我当前代码的输出：

该文件包含`cat_desc`当我再次尝试重写为`custom`. 它重写为`customc`. 注意`c`最后的，它必须是`custom`唯一的。

**这是我想要实现的目标：**

1.  我写在文件上，例如，`cat_desc`
2.  如果我想再次写，例如`custom`，`cat_desc`必须删除并替换为`custom`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T04:26:11.907

新答案...

您`text`作为`re.sub`. 这应该是一个`int`

```
Help on function sub in module re:

sub(pattern, repl, string, count=0, flags=0)
    Return the string obtained by replacing the leftmost
    non-overlapping occurrences of the pattern in string by the
    replacement repl.  repl can be either a string or a callable;
    if a string, backslash escapes in it are processed.  If it is
    a callable, it's passed the match object and must return
    a replacement string to be used. 
```

* * *

老答案...

也许你正在做

```
from os import open 
```

那是一个不同的（较低级别）打开，你只想使用内置打开（你不需要导入任何东西来使用它）

这是一个做错并收到错误消息的示例

```
>>> from os import open
>>> open("some_path", "r+")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: an integer is required 
```

同样要覆盖文件，您需要用“w+”打开。“r”代表读

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T05:13:35.293

对于您的新问题：

尝试就地覆盖文件基本上是不可能的，除非您用完全相同长度的新字节字符串替换字节字符串。如果你用 替换`'cat_desc'`，`'cat_asc'`你最终会得到`'cat_ascc'`。

你正在做的事情——以`'r+'`模式打开它，读取整个内容，处理它，`seek`设置为 0，然后写入整个内容——确实有效。但这不是做事的最佳方式。

无论如何，您的问题是，在您执行此操作后，您立即在`'w+'`模式下打开完全相同的路径（这会截断文件）并写一些不同的东西。所以，你写的东西现在都不见了。

解决方案是……不要那样做。我不确定您要做什么，但可能不是。

同时，重写文件的最佳方法是“原子写入临时和重命名”习语。这保证了您永远不会损坏文件，您要么获得新文件，要么仍然拥有旧文件。这也意味着您不必将整个文件保存在内存中。你可以一点一点地去。这很简单……如果您不关心 Windows。它是这样工作的：

```
with tempfile.NamedTemporaryFile(delete=False) as outfile:
    with open(inpath) as infile:
        # copy from infile to outfile, changing things as you go
    os.rename(outfile.name, inpath) 
```

不幸的是，在 Windows 上进行这项工作非常痛苦。你不能`outfile`在它仍然打开的时候移动，你不能在`with`语句之外访问它，最重要的是你不能`infile`用`outfile`;覆盖它。你必须做一个复杂的洗牌。而且它永远不会是完全原子的，除非您愿意要求 Vista/2008 并直接调用 Win32 API。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-19T05:14:08.137

根据您修改后的问题，也许这样的事情会更简单

```
def auto_sort(request):
    sort_by = request.GET.get('sort_by', None)
    if sort_by:
        temp_path = "{0}/file.txt".format(settings.SITE_ROOT) 
        #Set new_text to whatever you want based on your logic
        new_text = 'custom' 
        f=open(temp_path,'w')
        f.write(new_text)
        f.close();

        handle=open(temp_path,'w+')
        handle.write(sort_by)
        handle.close();

    return HttpResponseRedirect(reverse('envelopes:editor')) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T04:45:25.100

您的问题与写入文件无关。

回溯告诉你这条线是罪魁祸首：

```
File "/home/cath/src/envelopebudget/envelopebudget/settings/../apps/envelopes/views.py" in auto_sort
  357\.         text = re.sub('cat_desc', 'cat_asc', 'custom', text) 
```

如果你看这个[`re.sub`](http://docs.python.org/2/library/re.html#re.sub)方法，你就错了：

```
re.sub(pattern, repl, string, count=0, flags=0) 
```

你`'cat_desc'`作为`pattern`、`'cat_asc'`作为`repl`、`'custom'`作为`string`和`text`作为传递`count`。这没有任何意义。`re.sub`期望`count`是一个整数，并且你给了它一个字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T04:25:42.083

您可以将完整的错误复制并粘贴回去吗

尝试：

```
def auto_sort(request):
    sort_by = request.GET.get('sort_by', None)
    if sort_by:
        temp_path = "{0}/file.txt".format(settings.SITE_ROOT) 
        f=open(temp_path,'r')
        text = f.read()
        text = re.sub('custom', 'cat_asc', 'cat_desc', text)
        f.close();
        handle=open(temp_path,'w')
        handle.write(sort_by)
        handle.close();
    return HttpResponseRedirect(reverse('envelopes:editor')) 
```

# c - 简单计算的问题

> ID：15491418
> 
> 赞同：0
> 
> 时间：2013-03-19T04:19:27.523
> 
> 标签：c

好吧，伙计们只是想弄清楚为什么这不会像预期的那样吐出 0.00003 答案。较大项目的一部分，如果此修复不适用于整个项目，将发布。

```
#include <stdio.h>

#define INPUT_C 0.003
#define H_FORWARD_CURRENT  100

int main(void) {
   float ib;
   ib = INPUT_C / H_FORWARD_CURRENT;
   printf("ib = %.5f", &ib);
   return (0);
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T04:22:23.700

因为您试图将地址打印`ib`为浮点数：

```
 printf("ib = %.5f", &ib); 
```

应该

```
printf("ib = %.5f", ib); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T04:22:27.390

您不需要 在 printf`&`之前添加 & 操作符`ib`

```
printf("ib = %.5f", &ib);
                    ^ wrong 
```

纠正它，如：

```
printf("ib = %.5f", ib); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T04:22:49.047

从 printf() 中的 &ib 中删除 &。

```
printf("ib = %.5f", ib); 
```

# android - 获取文件中位置的纬度和经度

> ID：15491420
> 
> 赞同：0
> 
> 时间：2013-03-19T04:19:38.360
> 
> 标签：android, geolocation, maps

我有一个 900-1200 左右的地方列表

我想将它们的每个纬度和经度都保存在 csv 之类的文件或任何其他合适的格式中，因为我需要将其推送到数据库中。

是否有任何可能的代码来做到这一点..任何可以使它变得简单的方法，因为逐个查找每个地方的信息将是一项非常繁琐的任务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:25:37.477

使用[谷歌地理编码 API](https://developers.google.com/maps/documentation/geocoding/)

其格式为 Geocoding API 请求必须采用以下格式：

```
http://maps.googleapis.com/maps/api/geocode/output?parameters 
```

其中输出可以是以下值之一：

json（推荐）表示以 JavaScript Object Notation (JSON) 输出 xml 表示输出为 XML

```
Eg... 
http://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=true_or_false 
```

对于您的问题，您可以创建一个 Javascript 地点数组并在循环中调用此 Google Geocoder，然后[解析 JSON](https://developers.google.com/maps/documentation/webservices/index#ParsingJSON)并用地点名称填充另一个数组，然后将它们推送到数据库。

如果您想用 Java 解析它，请使用[Jackson JSON](http://jackson.codehaus.org/)或[Google GSON](https://code.google.com/p/google-gson/)，两者都可以正常工作并且很受欢迎。

# ruby - Ruby undefined method `each'

> ID：15491424
> 
> 赞同：0
> 
> 时间：2013-03-19T04:20:03.790
> 
> 标签：ruby, arrays, list, set, each

i can't figure out what's wrong with my code, can you help me please?

this is constructor of my class:

```
def initialize(hash_table_size)
  @size = hash_table_size
  @table = Array.new(hash_table_size) { LinkedList.new }
end 
```

this is method in that class:

```
def to_a
  arr = Array.new
  @table.each { |list| list.each { |o| arr << o } }
  arr
end 
```

this is my "each" method in LinkedList class:

```
def each
  if @length > 0
    item = @head
    begin
      yield item.object
      item = item.next
    end until item.nil?
  end
end 
```

and this is what i get from unittest:

```
1) Error:
test_initial_size_3(HashSetTest):
NoMethodError: undefined method `each' for 3:Fixnum
    C:/Users/Ajax/My Documents/Aptana Studio 3 Workspace/alg_du1_jan_svec/hash_set.rb:34:in `block in to_a'
    C:/Users/Ajax/My Documents/Aptana Studio 3 Workspace/alg_du1_jan_svec/hash_set.rb:34:in `each'
    C:/Users/Ajax/My Documents/Aptana Studio 3 Workspace/alg_du1_jan_svec/hash_set.rb:34:in `to_a'
    C:/Users/Ajax/My Documents/Aptana Studio 3 Workspace/alg_du1_jan_svec/hash_set_test.rb:14:in `test_initial_size_3'

1 tests, 3 assertions, 0 failures, 1 errors, 0 skips 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:37:47.763

It means that `LinkedList.new` in the method `initialize` is returning `3`, which becomes an element of `@table`, and is substituted into the block variable `list` of the method `to_a`.

# c - 在c中每次出现之前解析url或ip地址并计算字长？

> ID：15491430
> 
> 赞同：-5
> 
> 时间：2013-03-19T04:21:01.220
> 
> 标签：c, url, dns, ip

需要通过分隔符 '.' 解析 url 或 ip 并计算 C 中每个分隔符之前的字长。换句话说，www.google.com 将返回 www -3 google -6 com -3

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:25:50.653

看看string.h中的*strtok*和*strlen*

```
#include <stdio.h>
#include <string.h>

int main(void) {
    char url[] = "www.google.com";
    char *token;
    token = strtok(url, ".");
    while(token != NULL) {
        printf("%s -%d\n", token, (int)strlen(token));
        token = strtok(NULL, ".");
    }
    return 0;
} 
```

# ios - 如何获得相对于滚动视图超级视图的滚动视图子视图的中心点？

> ID：15491432
> 
> 赞同：1
> 
> 时间：2013-03-19T04:21:11.587
> 
> 标签：ios, objective-c

我有一个包含 20 个子视图（白色视图）的 scollView（下图中显示的蓝色视图）。![在此处输入图像描述](../Images/cbb34e00db3c7d395b941287d6c44fcd.png)

scrollView 的 superView 称为 pView，例如白色 view1 相对于 pView 的中心点是 (10,10)，view6 的中心点是 (496,10)，我滚动后视图如下： ![在此处输入图像描述](../Images/25cb3ab495b68d9dca381f881b7c4a9d.png)

观点6的中心点是（10,10），但我不知道如何得到它。

也许我应该使用类似的代码

```
 CGPoint centerPoint = [view6 convertPoint:view6.center toView:pView]; 
```

但我没有得到正确的观点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T04:47:18.997

view6.center 位于 view6 的父视图（即 UIScrollView）的坐标系中。尝试

`CGPoint centerPoint = [scrollView convertPoint:view6.center toView:pView];`

# linux - 找到所有拥有超过 N 个进程的用户并在 shell 中回显它们

> ID：15491436
> 
> 赞同：0
> 
> 时间：2013-03-19T04:21:21.197
> 
> 标签：linux, shell, unix, ksh

我写的脚本是ksh。需要找到所有拥有超过 N 个进程的用户并在 shell 中回显它们。N 从 ksh 读取。

我知道我应该使用什么`ps -elf`，但是如何解析它，找到具有 >N 进程的用户并用他们创建数组。ksh 中数组的小麻烦。请帮忙。也许简单的解决方案可以帮助我而不是创建数组。

```
s162103@helios:/home/s162103$ ps -elf 
     0 S  s153308  4804     1   0  40 20        ?  17666        ? 11:03:08 ?           0:00 /usr/lib/gnome-settings-daemon --oa
     0 S     root  6546  1327   0  40 20        ?   3584        ? 11:14:06 ?           0:00 /usr/dt/bin/dtlogin -daemon -udpPor
     0 S webservd 15646   485   0  40 20        ?   2823        ?     п╪п╟я─я ?           0:23 /opt/csw/sbin/nginx
     0 S  s153246  6746  6741   0  40 20        ?  18103        ? 11:14:21 ?           0:00 iiim-panel --disable-crash-dialog
     0 S  s153246 23512     1   0  40 20        ?  17903        ? 09:34:08 ?           0:00 /usr/bin/metacity --sm-client-id=de
     0 S     root   933   861   0  40 20        ?   5234        ? 10:26:59 ?           0:00 dtgreet -display :14
     ... 
```

当我输入

```
ps -elf | awk '{a[$3]++;}END{for(i in a)if (a[i]>N)print i, a[i];}' N=1

s162103@helios:/home/s162103$ ps -elf | awk '{a[$3]++;}END{for(i in a)if (a[i]>N)print i, a[i];}' N=1
root 118
/usr/sadm/lib/smc/bin/smcboot 3
/usr/lib/autofs/automountd 2
/opt/SUNWut/lib/utsessiond 2
nasty 31
dima 22
/opt/oracle/product/Oracle_WT1/ohs/ 7
/usr/lib/ssh/sshd 5
/usr/bin/bash 11 
```

那不是用户 /usr/sadm/lib/smc/bin/smcboot 有最后一个字段 ps -elf ，不是用户

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:31:14.053

像这样的东西（假设你的 ps 命令的第三个字段给出了用户 ID）：

```
 ps -elf | 
   awk '{a[$3]++;}
   END {
     for(i in a)
       if (a[i]>N)
         print i, a[i];
   }' N=3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:04:16.200

```
read number    
ps -elfo user= | sort | uniq -c | while read count user
do 
    if (( $count > $number )) 
    then 
      echo $user  
    fi  
done 
```

这是最好的解决方案，它的工作原理！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:28:47.107

`ps`您要在此处使用的最小命令是`ps -eo user=`. 这只会打印每个进程的用户名，仅此而已。其余的可以用 awk 完成：

```
ps -eo user= |
  awk  -v max=3 '{ n[$1]++ }
    END {
      for (user in n)
        if (n[user]>max)
          print n[user], user
  }' 
```

为了便于阅读，我建议将计数放在第一列。

# perl - 更适合弦乐；substr() 或 split()

> ID：15491439
> 
> 赞同：0
> 
> 时间：2013-03-19T04:21:48.817
> 
> 标签：perl

好的，这是我认为已经得到充分回答的第一个问题的后续。无论如何，在我项目的这一部分，我有一个字符串数组。这些字符串的独特之处在于没有明显的模式。我在一个大数组的单个字符串元素中有一个作者列表。有些元素有两个作者，有些元素有更多。这是一个例子：

> Artem Chebotko 和 Shiyong Lu
> Artem Chebotko、Shiyong Lu、Farshad Fotouhi 和 Anthony Aristar
> Craig Franke、Samuel Morin、Artem Chebotko、John Abraham 和 Pearl Brazier
> Wang Liqiang Wang、Shiyong Lu、Xubo Fei、Artem Chebotko、H. Victoria Bryant 和Jeffrey L. Ram
> Daniel Rebollar、Peter J. Vasquez Sr. 和 Artem Chebotko

因此，虽然很高兴摆脱所有使我的初始字符串混乱的 HTML 爵士乐，但我想 1）将每个作者放入自己的数组中的字符串中，以及 2）制作它以便我可以对作者按姓氏。我想知道的是，由于数组没有模式，因此更适合此任务，substr 还是 split？以下是关于我的阵列的一些注意事项：

*   每行都有一个作者姓名，名字和姓氏，有时还有中间名首字母或 Sr./Jr。
*   如果该行只有两个作者，则用空格和“and”一词分隔。（参见上面的示例）
*   如果该行有两个以上，则每个元素用逗号分隔，最后一个元素前面有单词“and”。
*   如果该行只有一位作者，则不需要标点符号或“和”一词。

我想指出，我对 Perl 还是很陌生，但我来自 C++，所以我对计算机逻辑有所了解。话虽如此，我想我知道两者是如何工作的，但我只是想得到一个更熟悉的人的意见，即其中一个是否会比另一个更好。我知道计算机代码适用于这实际上没有的模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T04:31:55.953

我不确定您将如何使用 substr ？

似乎有三种不同的可能分隔符要拆分，因此将它们全部加入正则表达式以进行拆分`|`：

```
@authors = split /, and |, | and /, $authors 
```

一般来说，分裂姓氏的问题是无法解决的，给定多字姓氏（例如冯诺依曼），以及“姓氏”在前的名字。启发式地，[Lingua::EN::NameParse](https://metacpan.org/module/Lingua%3a%3aEN%3a%3aNameParse)将进行尝试。（类似的模块可用于其他一些语言。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T04:45:16.707

只是为了一些见解：

```
#!/usr/bin/perl
use strict;
use warnings;
my $re_and=qr/,? *and */;
my $re_com=qr/, */;
while(<DATA>) {
  chomp;
  my @authors = split /$re_and|$re_com/;
  for (@authors) {
    my ($n, $l, $m, $t);
    s/\s*$t\s*// if (($t) = /([JS]r\.)/);
    my @n = split;
    ($n, $m, $l) = @n if @n > 2;
    ($n, $l) = @n if @n == 2;
    print join ("::", grep {$_} ($n, $l, $m, $t)), "\n";
  }
}
__DATA__
Artem Chebotko and Shiyong Lu
Artem Chebotko, Shiyong Lu, Farshad Fotouhi, and Anthony Aristar
Craig Franke, Samuel Morin, Artem Chebotko, John Abraham, and Pearl Brazier
Liqiang Wang, Shiyong Lu, Xubo Fei, Artem Chebotko, H. Victoria Bryant, and Jeffrey L. Ram
Daniel Rebollar, Peter J. Vasquez Sr., and Artem Chebotko 
```

**输出**

```
Artem::Chebotko
Shiyong::Lu
Artem::Chebotko
Shiyong::Lu
Farshad::Fotouhi
Anthony::Aristar
Craig::Franke
Samuel::Morin
Artem::Chebotko
John::Abraham
Pearl::Brazier
Liqiang::Wang
Shiyong::Lu
Xubo::Fei
Artem::Chebotko
H.::Bryant::Victoria
Jeffrey::Ram::L.
Daniel::Rebollar
Peter::Vasquez::J.::Sr.
Artem::Chebotko 
```

# ios - NSFetchedResultsController 不会在 reloadData 上改变

> ID：15491441
> 
> 赞同：2
> 
> 时间：2013-03-19T04:21:52.087
> 
> 标签：ios, objective-c, core-data, nsfetchedresultscontroller

我有一个主从形式的 iOS 应用程序，用户发布的帖子显示在主视图中，评论显示在详细信息中。当我选择一个帖子时，我可以很好地看到所有评论，但是当我返回并选择另一个帖子时，数据不会更改为下一个帖子的评论。

我称之为`viewDidLoad`

```
 self.fetchedResultsController = nil;
 [self.tableView reloadData]; 
```

但什么也没有发生。

这是我的代码`fetchedResultsController`

```
- (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Comment" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"question == %@", self.detailItem];
    [fetchRequest setPredicate:predicate];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    // Edit the sort key as appropriate.
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"creator" ascending:YES];
    NSArray *sortDescriptors = @[sortDescriptor];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        // Replace this implementation with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
        NSLog(@"Unresolved error in detail %@, %@", error, [error userInfo]);
        abort();
    }

    return _fetchedResultsController;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T13:33:41.340

您的 fetched-results-controller 不刷新的原因是您设置了缓存。您要么需要`nil`作为缓存名称传递，要么在刷新 FRC 之前删除缓存：

```
 [NSFetchedResultsController deleteCacheWithName:@"Master"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T13:07:28.040

您是否尝试过调用您的重置代码`viewDidAppear`？`viewDidLoad`通常不会在视图的生命周期中多次调用。`viewWillAppear`/`viewDidAppear`当视图实际出现在屏幕上时调用。

您是否尝试过对表重新加载方法设置断点以确保它实际上被调用？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T06:05:06.703

试试这个代码：

在调用这个方法之前不要忘记写`self.fetchedResultsController = nil;`

```
- (NSFetchedResultsController *)fetchedResultsController // attaches an NSFetchRequest to this UITableViewController
{
    if (_fetchedResultsController != nil )
    {
        return _fetchedResultsController;
    }

    NSLog(@"Length:: %d",[[_fetchedResultsController mutableCopy] length]);

    NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Comment"];
    [fetchRequest setIncludesSubentities:YES];

    // Sort by Application name
    NSSortDescriptor* sortDescriptor1 = [[NSSortDescriptor alloc] initWithKey:@"creator" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)];
    //Sort by CommandNameloca
    NSArray* sortDescriptors = [[NSArray alloc] initWithObjects: sortDescriptor1, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];

    [fetchRequest setFetchBatchSize:100];

    ordersArr=[[NSMutableArray alloc]initWithArray:sortDescriptors];

    NSLog(@"----- ordersArr Count == %d",[ordersArr count]);

    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"creator" cacheName:@"Master"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;

    if (![self.fetchedResultsController performFetch:&error])
    {
        // Replace this implementation with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
    return _fetchedResultsController;
} 
```

# javascript - 如何将按钮置于向下状态？

> ID：15491445
> 
> 赞同：14
> 
> 时间：2013-03-19T04:22:06.250
> 
> 标签：javascript, html

假设我有一个按钮，当有人单击它时，但在释放鼠标之前，它会进入向下状态。

现在假设有人按下“a”键，我希望按钮进入向下状态，直到释放该键，此时它被触发。这可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-19T07:02:38.983

在这里做一些研究后，我得到的最终答案是：

您可以使用按钮元素触发`mousedown`或事件， 如果您的按钮被编程为根据这些事件更改其样式，那么您就可以使用了。`mouseup``keyup``keydown`

请参阅此小提琴示例：http: [//jsfiddle.net/FwKEQ/15/](http://jsfiddle.net/FwKEQ/15/)

请注意，如果您使用 jQuery 的 UI 组件，它会起作用。但是对于标准按钮，您无法使用 javascript 将它们移动到按下状态

html:

```
<button id="jQbutton">Press 'A' to move me to pressed state</button> 
```

Javascript：

```
<script>
    $( "#jQbutton" ).button();

    $(document).keydown(function(event) {
        if ((event.keyCode === 97)||(event.keyCode === 65))
            $("#jQbutton").mousedown();
    });

    $(document).keyup(function(event) {
        if ((event.keyCode === 97)||(event.keyCode === 65))
            $("#jQbutton").mouseup();
    });
</script> 
```

**编辑：**

可能有一个我们可以利用的技巧：使用`accesskey`按钮元素，然后尝试模拟 accesskey 按下（我不确定是否可能）这是我目前所处的位置[http://jsfiddle.net/FwKEQ /28/](http://jsfiddle.net/FwKEQ/28/)

**编辑2：** 所以进一步研究这个话题我发现了以下内容：

1.  默认按钮（无样式）由操作系统呈现，我无法找到正式的证明，但如果您尝试使用 mac OS 加载同一页面，您将获得 mac OS 样式按钮，而在 Windows 中您将获得“丑陋”的灰色按钮。

2.  因为默认按钮是由操作系统呈现的，所以它们符合操作系统事件，这意味着由浏览器发送并受信任的事件。

3.  这不适用于自定义样式按钮，因为它们符合 CSS 和 JS 以更改其在按下时的外观，这就是 JQ 按钮受 JS 影响的原因。

所以总而言之，您需要一个受信任的按下事件来触发默认按钮以更改其样式，并且由于安全限制而无法完成。

在此处阅读有关受信任事件的更多信息：http: [//www.w3.org/TR/DOM-Level-3-Events/#trusted-events](http://www.w3.org/TR/DOM-Level-3-Events/#trusted-events)

如果有人可以找到有关操作系统呈现的默认按钮的正式参考，请评论或编辑此答案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-19T14:27:35.937

> 不幸的是，在默认按钮上呈现活动状态既不是简单的 css 样式问题，也不能通过应用 javascript 轻松更改。

在默认按钮上执行此操作的一个选项是使用**热键 jquery 插件**：[https](https://github.com/jeresig/jquery.hotkeys) ://github.com/jeresig/jquery.hotkeys或为不同的浏览器实现替代键代码。

并在按下时对默认按钮**应用 50% 的不透明度**（以指示按下键）。

（对我来说，这似乎几乎是完美的 ;-) 它可能与使用默认按钮轻松跨平台和浏览器工作一样好。

[jsfiddle 演示](http://jsfiddle.net/XuU6V/2/embedded/result/)

和代码...

**html:**

```
<button id="test">Test Button</button>
Selected: <span class="selected" id="out"></span> 
```

**javascript:**

```
$('#test').click(function () {
    fn_up();
});
fn_down = function(event){
    $('#test').css("opacity", 0.5);
    $('#test').focus();
    event.preventDefault();
}
fn_up = function(event){
    $('#test').css("opacity", 1);
    $('#out').append(" test");
    event.preventDefault();
}

//to bind the event to the 'a' key
$(document).bind('keydown','a', fn_down); 
$(document).bind('keyup','a', fn_up);

//to get the same effect with the 'space' key
$(document).bind('keydown','space', fn);
$(document).bind('keyup','space', fn2); 
```

在小提琴中，我将它应用于空格键和 mousedown/up 以对所有事件实现相同的效果（但您可以将它与 'a' 键一起使用......这是一个口味问题）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T06:59:31.230

这是一个 jsfiddel，它显示了它是如何使用 jQuery 完成的：http: [//jsfiddle.net/KHhvm/2/](http://jsfiddle.net/KHhvm/2/)

重要的部分：

```
$("#textInput").keydown(function(event) {
    var charCodeFor_a = 65;
    if ( event.which == charCodeFor_a ) {

        // "click" on the button
        $('#button').mousedown();
        // make the button look "clicked"
        $('#button').addClass('fakeButtonDown');

        // do some stuff here...

        // release the button later using $('#button').mousedown();
    }
}); 
```

在输入字段中输入“a”时触发按钮事件。但是正如 Mark 指出的那样，您需要伪造单击按钮的样式，因为浏览器不会这样做。

**编辑：**我不确定您是否在项目中使用 jQuery。我只是想证明这是可能的。如果它可以用 jQuery 库来完成，那么还有一种方法可以用纯 JavaScript 来完成。;)

# wordpress - 通过仪表板更改 WordPress header.php

> ID：15491446
> 
> 赞同：1
> 
> 时间：2013-03-19T04:22:11.117
> 
> 标签：wordpress

首先，我在进行更改之前复制了 header.php。

在我通过仪表板对标题进行更改后，例如默认图像和标题文本

我重新打开了 header.php 并发现那里没有任何变化。

我的假设是当通过仪表板进行更改时，相应的 php 文件将动态更新。不？

如果没有，仪表板中的更改将如何反映在 php 文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T04:49:25.360

如果您通过**外观**>>**编辑器**>> **Header.php** ... 对 header.php 文件进行更改...那么您当然是在更改 header.php 文件。

您也可以通过 FTP 文件或使用服务器的控制面板来完成此操作。

但在您对核心 WordPress 文件进行所有这些更改之前，我不得不问——“为什么”？从不（推荐）更改您的核心 WordPress 文件。这是因为当您在下次更新时去更新您的 WordPress 时，您将**丢失所有更改**......所以您必须保留您的编辑的更改日志，或者最终使用恐龙版本的 WP未来。

如果您的主题没有给您机会以其他方式更改标题，那么**插件**可能是更好的解决方案。或者，如果符合您的需要，也许使用**自定义 CSS是一个更好的解决方案。**你想达到什么目的？为什么需要审核 WP 核心文件？最有可能的是，还有其他方法可以实现您的目标。

# tfs - 获取链接到 TFS 中工作项的错误列表

> ID：15491450
> 
> 赞同：0
> 
> 时间：2013-03-19T04:22:23.607
> 
> 标签：tfs

获取与 TFS 2012 中特定工作项相关联的所有错误列表的查询是什么？或任何其他方式来获取列表？

过程模板是 MSF for Agile Software Development v6.0。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:38:37.207

下面是一个示例，用于查找与它们相关联的错误的工作项：

![带有相关错误的工作项](../Images/af3e8faca47a347af74ba274e6bfb422.png)

确保将查询类型更改为*工作项和直接链接*。您可以过滤主查询或链接的工作项。

# actionscript-3 - 获取按钮以在动画交互式影片剪辑中工作

> ID：15491453
> 
> 赞同：0
> 
> 时间：2013-03-19T04:22:39.137
> 
> 标签：actionscript-3, flash

我有一个幻灯片动画，其中包含 5 个图像（意味着获取 url 的按钮）在幻灯片影片剪辑中。到目前为止，我只创建了第一个图像的按钮。它不在影片剪辑中时有效；但是，一旦创建了包含该按钮的影片剪辑，它就不再起作用。

此外，这些按钮具有在影片剪辑内部或外部工作的翻转效果。如果按钮可以检测到影片剪辑内的鼠标悬停，为什么它不能检测到鼠标点击？

非常感谢任何建议。我不太精通 AS，所以你可能想把它弄得更笨一点。

动作脚本

```
var count = 1;
rtBtn.addEventListener(MouseEvent.CLICK, rightScroll);
lftBtn.addEventListener(MouseEvent.CLICK, leftScroll);

function panelOver() {
//  this.onEnterFrame = scrollPanel;
//  delete this.onRollOver;
}

function rightScroll(e:Event){

    if (count < 5){
    count++;
panel.x += 150;
    }else{
        count = 5;
    }
    //addEventListener(Event.ENTER_FRAME,rightAnimate);
    //function rightAnimate(event:Event) {
    //panel.x -= 140; //Math.round(140/7);
//}
}
function leftScroll(e:Event){
    if (count > 1){
        count --;
        panel.x -= 150;
    }else{
        count=1;
    }

    //addEventListener(Event.ENTER_FRAME,leftAnimate);
    //function leftAnimate(event:Event) {
    //panel.x += 140;// - Math.round(.5);
//}

}

/* Click to Go to Web Page
Clicking on the specified symbol instance loads the URL in a new browser window.

Instructions:
1\. Replace http://www.adobe.com with the desired URL address.
   Keep the quotation marks ("").
*/

snowbtn.addEventListener(MouseEvent.CLICK, fl_ClickToGoToWebPage_3);

function fl_ClickToGoToWebPage_3(event:MouseEvent):void
{
    navigateToURL(new URLRequest("http://www.adobe.com"), "_blank");
} 
```

# mysql - Mysql -- 一次查询2次计数，第二次计数结果错误

> ID：15491454
> 
> 赞同：3
> 
> 时间：2013-03-19T04:22:39.887
> 
> 标签：mysql, sql

我刚刚继承了一个代码库，并且存在一个不正确的现有查询。它看起来像（这里的通用表和列）：

```
select p.user_id, p.photo_id, p.date, count(p.photo_id) as 'Photos', count(v.photo_id) as 'Views'
from photos p
LEFT OUTER JOIN userviews v on v.user_id = p.user_id and v.photo_id = p.photo_id
where p.photo_id in ( 1,2,3 [...] )
GROUP BY photo_id, user_id
ORDER BY user_id, photo_id 
```

结果集接近于正确，如此接近以至于暂时没有人注意到它是错误的。

如果表 2（用户视图）中没有数据，则结果行是正确的。

但是，如果那里有数据，则结果集会复制表 1 中的计数值，即：

```
1082    3381    2012-05-25 08:50:20 3   3 <--WRONG, should be 1
1082    3387    2012-07-26 15:02:36 2   2 <--WRONG, should be 4
1117    3381    2012-05-23 03:46:02 1   0 <--CORRECT
1117    3382    2012-05-23 03:45:54 1   0 <--CORRECT
1117    3383    2012-05-23 03:45:09 1   0 <--CORRECT 
```

现在，如果这是 SQL 服务器，我只会使用 CTE 重写该死的东西，但 Mysql 不支持 WITH 子句，而且我认为我不能对它们进行子查询，因为它们返回多个值。

那么如何在 Mysql 中解决这个问题呢？在此先感谢，我被这个难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:08:59.027

试试这个查询

```
SELECT p.user_id, p.photo_id, p.Photos, ph.date, v.Views
FROM photos ph,
      (SELECT p.user_id, p.photo_id, count(p.photo_id) as 'Photos'
      FROM photos p
      WHERE p.photo_id in ( 1,2,3 [...] )
      GROUP BY p.photo_id, p.user_id ) p,
     (SELECT v.user_id, v.photo_id, count(v.photo_id) as 'Views'
      FROM  userviews v
      WHERE v.photo_id in ( 1,2,3 [...] )
      GROUP BY v.photo_id, v.user_id 
      ) v
WHERE p.user_id = v.user_id AND 
      p.photo_id = v.photo_id AND
      ph.photo_id = p.photo_id AND
      ph.user_id = p.user_id
ORDER BY p.user_id, p.photo_id 
```

编辑使用左连接

```
SELECT p.user_id, p.photo_id, p.Photos, ph.date, v.Views
FROM (SELECT v.user_id, v.photo_id, count(v.photo_id) as 'Views'
      FROM  userviews v
      WHERE v.photo_id in ( 1,2,3 [...] )
      GROUP BY v.photo_id, v.user_id 
      ) v left join (SELECT p.user_id, p.photo_id, count(p.photo_id) as 'Photos'
      FROM photos p
      WHERE p.photo_id in ( 1,2,3 [...] )
      GROUP BY p.photo_id, p.user_id ) p     
ON p.user_id = v.user_id AND p.photo_id = v.photo_id
      left join photos ph 
On ph.photo_id = p.photo_id AND
      ph.user_id = p.user_id
ORDER BY p.user_id, p.photo_id 
```

当您不 GROUP BY 或聚合 SELECT 列表中的所有项目时，MySQL 会选择其他列的值，您可能会得到意想不到的结果。( [REFER](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html) ) 这就是你得到错误结果的原因

# php - 设置关系杂货杂货错误

> ID：15491457
> 
> 赞同：3
> 
> 时间：2013-03-19T04:22:59.157
> 
> 标签：php, mysql, codeigniter, join, grocery-crud

我有 2 张桌子

```
CREATE TABLE `tbl_patient` (
    id_patient      INTEGER     NOT NULL PRIMARY KEY AUTO_INCREMENT,
    name            VARCHAR(25) NOT NULL DEFAULT "not available",
    att1            VARCHAR(5 ) NOT NULL DEFAULT "att1",
    att2            VARCHAR(25) NOT NULL DEFAULT "att2",
    att3            VARCHAR(25) NOT NULL DEFAULT "att3",
    CONSTRAINT `uc_Info_patient` UNIQUE (`id_patient`)           
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1; 
```

和

```
CREATE TABLE `tbl_patient_medicine` ( 
    id_patient_medicine INTEGER     NOT NULL PRIMARY KEY AUTO_INCREMENT,
    id_patient          INTEGER     NOT NULL,
    name_medicine       VARCHAR(50) NOT NULL DEFAULT "", 
    dosis               VARCHAR(50) NOT NULL DEFAULT "",         
    start_date          timestamp   NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, 
    treatment            VARCHAR(50) NOT NULL DEFAULT "", 
    times_per_day       VARCHAR(50) NOT NULL DEFAULT "",    
    CONSTRAINT fk_ID_Patient_Medicine  FOREIGN KEY (id_patient)   REFERENCES `tbl_patient`(id_patient)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1; 
```

如您所见，table patient_medicine 是 tbla_medicines 和 table patient 之间的中间表。

[现在我想用这个 sqlfiddle 中](http://sqlfiddle.com/#!2/5960f/4)的杂货杂货查询来自 tbl_patient_medicine 的所有数据

假设我在 uri 中传递了 id（在示例中为 id_patient=1）我有

```
public function details_medication($my_id = 0)
{   
  try{
    $crud = new grocery_CRUD();
    $crud->where('id_patient',$my_id);
    $crud->set_table('tbl_patient_medicine');

        //HOW TO DO IT? 
        $crud->set_relation('id_patient', 'tbl_patient', 'id_patient');

    $output = $crud->render();
        $this->_output($output); 

     }catch(Exception $e){
    show_error($e->getMessage().' --- '.$e->getTraceAsString());
     }      
} 
```

所以我尝试了不同的方法，但得到了这样的错误：

```
A Database Error Occurred

Error Number: 1052

Column 'id_patient' in where clause is ambiguous

SELECT `tbl_patient_medicine`.*, j7a675883.id_patient AS s7a675883 
FROM (`tbl_patient_medicine`) 
LEFT JOIN `tbl_patient` as j7a675883 
ON `j7a675883`.`id_patient` = `tbl_patient_medicine`.`id_patient` WHERE `id_patient` = '1' LIMIT 25 
```

行号：87

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:15:04.290

我做了你的例子：

控制器：

```
function medicine() 

{
     $crud = new grocery_CRUD();

     $crud->set_table('tbl_patient_medicine');
     $crud->required_fields('id_patient','name_medicine','dosis','start_date','treatment','time_per_day');
     $crud->columns('id_patient','name_medicine','dosis','start_date','treatment','time_per_day');
     $crud->fields('id_patient','name_medicine','dosis','start_date','treatment','time_per_day');

     $crud->set_relation('id_patient','tbl_patient','name');

     $output = $crud->render();  

     $this->_example_output($output); 
} 
```

有用！

**编辑：**

```
$crud->set_relation('id_patient','tbl_patient','{name},  {att1},  {att2},  {att3}'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T04:39:17.143

尝试更改 WHERE j7a675883。`id_patient`

# android - Android Span 或非中断空间导致换行和文本重复 (4.0 ICS)

> ID：15491462
> 
> 赞同：8
> 
> 时间：2013-03-19T04:23:48.193
> 
> 标签：android

我正在使用几个文本视图，大量使用跨度。

**问题：**有时在我的应用程序中（特别是在冰淇淋三明治上）我会看到一个不在文本字符串中的换行符，以及文本重复。有关示例，请参见下图。注意第三个句子是如何开始的，然后是一个换行符，然后文本被复制，句子结束。

![在此处输入图像描述](../Images/8544cfcfb42f38559897f7bc2fa8b954.png)

**代码：**

```
tv = (TextView) inflater.inflate(R.layout.fragment_reader_list_item, parent, false);
SpannableStringBuilder ssb = ssbList.get(position);
tv.setText(ssb, BufferType.SPANNABLE); 
```

当我调试代码时，变量'ssb'正确地只包含文本......“3不是霸道你负责的人，而是作为羊群的例子。4当酋长”......

**我在玩了几个小时后注意到了一些细节：** 导致错误的条件似乎与渲染文本的整体宽度有关。例如，对于上图中的文本，如果我关闭数字上的粗体跨度，图中的文本将正确显示，但是如果我离开粗体跨度，并关闭数字上的颜色更改跨度（这不会改变宽度），问题仍然存在。

还值得注意的是，在每个数字之后，我都使用了一个不间断的空格。如果我用中断空间交换非中断空间，我不再看到问题，但这或多或少可能是因为呈现的字符串发生了变化。这个问题可能与跨度无关，但它似乎是一个太大的错误，无法通过任何旧文本传递。

任何帮助是极大的赞赏！

**编辑：** 这个错误似乎与粗体跨度的使用密切相关。将其从数字中删除可以解决问题。这就是我目前采取的解决方法。如果有更好的选择就好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:06:24.273

据我了解您的问题，只需使用另一个 SpannableSrinBuilder sb 并在 sb 中设置文本，如下定义。我正在删除标签和新行。

```
SpannableStringBuilder sb = new SpannableStringBuilder();
for(int loop=0 ; loop<(str.length() -1); loop++)
{
  if(!(str.subSequence(loop, loop+1).equals("\t") || 
       str.subSequence(loop, loop+1).equals("\n"))
    )
  {
  sb.append(str.charAt(loop));
  }
} 
```

# javascript - 为什么我找不到我用 jQuery 附加到正文的这个 DIV

> ID：15491466
> 
> 赞同：1
> 
> 时间：2013-03-19T04:24:11.070
> 
> 标签：javascript, jquery

这段代码应该说够了：http: [//jsfiddle.net/dimadima/fLCCK/3/](http://jsfiddle.net/dimadima/fLCCK/3/)

```
// Append and return a newly created `div` element
$el = $('<div id="#test"></div>').appendTo($('body'));

// Now, try to find it:

// Nothing
var attempt1 = $('#test');

// Also nothing
var attempt2 = $('body').find('#test');

// Also nothing
var attempt3 = $('div#test');

// Returns both the pre-existing and dynamically appended divs.
var attempt4 = $('div'); 
```

不明白为什么我不能像前 3 次尝试中那样检索这个 div。第四次尝试检索它，但不是令人满意的方式。我觉得我已经成功完成了一百万次。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T04:26:09.647

该`#`标志用于引用 div。当你定义它时，你需要省略它：

```
$el = $('<div id="test"></div>').appendTo($('body')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T04:52:10.010

`#`当你想调用一个对象时应该使用。

```
$el = $('<div id="test"></div>').appendTo('body');
var length_test = $('#test').length;
console.log(length_test);
//outputs 1 
```

# android - 为什么我们这样访问 getActivity().findViewById()

> ID：15491467
> 
> 赞同：4
> 
> 时间：2013-03-19T04:24:16.007
> 
> 标签：android

当为 a 定义`Fragment`并在内部`setContentView()`方法中使用的布局时，它与`Activity`. 那么为什么我们需要`Activity`参考来访问它。

所以我想`ListView`在`Fragment`. 比我必须在`Activity`布局或内部`Fragment`布局中创建它。

嘿，尼尔，我有一个问题，因为每次我都犯了错误，因为，我正在执行这个

```
TextView txt = ( TextView ) getActivity().findViewById(R.id.txt);
txt.setText("nayak nahi , khalnayak hun mein"); 
```

在里面`oncreateView()`所以它正在制造问题但是当我在里面实现 它时`onActivityCreated()`，它正在工作，所以你能告诉我为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-12T10:16:40.540

如果你想通过 getActivity() 找到视图，你应该在调用 onCreateView 之后这样做，因为在调用 onCreateView 之前，片段的视图是空的。所以你可以这样做：

```
@Override
public void onResume() {
    super.onResume();
    TextView txt = ( TextView ) getActivity().findViewById(R.id.txt);
    txt.setText("nayak nahi , khalnayak hun mein");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:02:03.927

您**可以**在布局`ListView`中为您的`Fragment`. 在您的片段中尝试这样的事情来定义替代布局

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
         Bundle savedInstanceState) {
    _baseView = inflater.inflate(R.layout.yourlayout, null); //where base view is your upper most parent in your layout
    return _baseView;
} 
```

然后在你的`onActivityCreated`你可以使用`_baseView.findViewById('yourListView')`来设置你的`ListView`. 我不知道这是否是最佳做法，但它对我来说非常有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T19:26:40.077

在 Fragment 中，您应该使用它的 View 但 getActivity：

```
public View onCreateView(…){
View rootView = inflater.inflate(R.layout.listview_xml_file, container, false);
ListView ListNewsBelarus = (ListView) rootView.findViewById(R.id.listViewId);
return rootView;
} 
```

# linux - Linux 上的 ns-3：克隆 ns-3 分支时出错

> ID：15491472
> 
> 赞同：1
> 
> 时间：2013-03-19T04:25:28.400
> 
> 标签：linux, mercurial, ns-3

我正在尝试通过以下方式获得 ns-3-dev 版本：

```
[root@localhost ns-3-allinone]# ./download.py -n ns-3-dev

#
# Get NS-3
#

Cloning ns-3 branch
=> hg clone http://code.nsnam.org/ns-3-dev ns-3-dev
requesting all changes
adding changesets
adding manifests
transaction abort!
rollback completed
abort: consistency error in delta!
Traceback (most recent call last):
File "./download.py", line 316, in
sys.exit(main())
File "./download.py", line 261, in main
ns3_dir = get_ns3(options.ns3_branch)
File "./download.py", line 26, in get_ns3
run_command(['hg', 'clone', ns3_branch_url, ns3_dir])
File "/mercurial/mercurial-2.5.1/mercurial/repos/ns-3-allinone/util.py", line 24, in run_command
raise CommandError("Command %r exited with code %i" % (argv, retval))
util.CommandError: Command ['hg', 'clone', 'http://code.nsnam.org/ns-3-dev', 'ns-3-dev'] exited with code 255 
```

但是，我可以克隆目录 ns-3-allinone：

```
[root@localhost repos]# hg clone http://code.nsnam.org/ns-3-allinone
destination directory: ns-3-allinone
requesting all changes
adding changesets
adding manifests
adding file changes
added 55 changesets with 78 changes to 7 files
updating to branch default
7 files updated, 0 files merged, 0 files removed, 0 files unresolved 
```

为什么我无法获得 ns-3-dev 的副本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:24:13.880

看起来上游 ns-3-dev 存储库可能已损坏。无论谁运行它，都应该确保运行`hg verify`它。

# android - 如何在Android中实现XML解析？

> ID：15491489
> 
> 赞同：0
> 
> 时间：2013-03-19T04:26:39.817
> 
> 标签：android, xml-parsing

目前我正在使用 Android 中的 XML 解析。我不知道它是如何工作的。我正在使用以下代码：

```
HttpClient httpClient = new DefaultHttpClient();
HttpPost postRequest = new HttpPost(MobileServiceConst.URL);
MultipartEntity reqEntity = new MultipartEntity(
HttpMultipartMode.BROWSER_COMPATIBLE);
reqEntity.addPart("method", new StringBody(MobileServiceConst.UPLOAD_CONTACTS));
reqEntity.addPart("user_id", new StringBody(String.valueOf(Constants.userData.getUserInfo().getuserId())));
reqEntity.addPart("accesstoken", new StringBody(Constants.userData.getMYToken()));
reqEntity.addPart("data",new StringBody(jsnConts.toString()));
reqEntity.addPart("device_id",new StringBody(regId));
postRequest.setEntity(reqEntity);

HttpResponse response = httpClient.execute(postRequest);
BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));

StringBuilder s = new StringBuilder();

    while ((sResponse = reader.readLine()) != null) {

           s = s.append(sResponse);

    }

sResponse = s.toString();

System.out.println("responseeeeeeeeeeeeeee"+sResponse); 
```

**sResponse**采用以下格式：

```
<CS_Mservice_Main generator="check" version="1.0">
<getContacts>
<mycnt>
<key_0>
<id>1</id>
<user_id>22434</user_id>
<device_id>121212,</device_id>
<contact_id></contact_id>
<firstname></firstname>
<lastname></lastname>
<email></email>
<email1></email1>
<email2></email2>
<contact1>9809788201</contact1>
<contact2></contact2>
<contact3></contact3>
<contact4></contact4>
<created_at>2013-03-18 13:29:12</created_at>
</key_0>
<key_1>
<id>16</id>
<user_id>17025</user_id>
<device_id>APA91bGRyoeOlxZjhfjkdshjsdfsdsdf9kICZFsveU_QonqbNIbYONWLtiHpT4CmPe1aJg3rZ86noqj2HKshgZRlk1dc0Em7AVte2usHaP-qRzVBcP8BWzJuXa8ozA</device_id>
<contact_id></contact_id>
<firstname>Rahul</firstname>
<lastname>Jain</lastname>
<email>rahul.jain@abc.in</email>
<email1></email1>
<email2></email2>
<contact1></contact1>
<contact2></contact2>
<contact3></contact3>
<contact4></contact4>
<created_at>2013-03-18 13:30:04</created_at>
</key_1>
</mycnt>
<email/>
<sms/>
<status>success</status>
</getContacts>
</CS_Mservice_Main> 
```

如何解析这种格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:32:26.603

像这样定义一个新的解析器类，并在需要 XML 解析的地方实现这个类 public class XMLParser {

```
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return xml;
}

public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(xml));
        doc = db.parse(is);

    } catch (ParserConfigurationException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    } catch (SAXException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    } catch (IOException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    }

    return doc;
}

public String getValue(Element item, String str) {
    NodeList n = item.getElementsByTagName(str);
    return this.getElementValue(n.item(0));
}

public final String getElementValue( Node elem ) {
    Node child;
    if( elem != null){
        if (elem.hasChildNodes()){
            for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                if( child.getNodeType() == Node.TEXT_NODE  ){
                    return child.getNodeValue();
                }
            }
        }
    }
    return "";
} 

} 
```

现在你需要调用这个解析类，它会接受 URL 作为输入并返回文档对象作为结果

如果 XML 资源是静态的，则必须将 XMl 放在 Res 文件夹中，否则您可以遵循此结构

像这样创建一个 XMLParser 类的对象

```
parser = new XMLParser();
xml = parser.getXmlFromUrl(URL);
doc = parser.getDomElement(xml); 
```

比取一个哈希图并存储来自各个标签的输出

```
NodeList nl = doc.getElementsByTagName(KEY_ITEM);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value

            map.put(KEY_ID, "ID id:" +parser.getValue( e, KEY_ID));
            map.put(KEY_NAME, "Name" + parser.getValue( e, KEY_NAME));
            map.put(KEY_COST, "Rs." + parser.getValue( e, KEY_COST));
            map.put(KEY_DESC, "Desc:  "+ parser.getValue( e, KEY_DESC));

            // adding HashList to ArrayList
            menuItems.add(map);

        }
        getXML(); 
```

您还可以从本教程[Source中获取帮助](http://sumitsharma1900.blogspot.in/2013/03/xml-parsing-in-android.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:28:15.077

```
import java.io.IOException;
 import java.io.StringReader;

 import org.xmlpull.v1.XmlPullParser;
 import org.xmlpull.v1.XmlPullParserException;
 import org.xmlpull.v1.XmlPullParserFactory;

 public class SimpleXmlPullApp
 {

     public static void main (String args[])
         throws XmlPullParserException, IOException
     {
         XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
         factory.setNamespaceAware(true);
         XmlPullParser xpp = factory.newPullParser();

         xpp.setInput( new StringReader ( "<foo>Hello World!</foo>" ) );
         int eventType = xpp.getEventType();
         while (eventType != XmlPullParser.END_DOCUMENT) {
          if(eventType == XmlPullParser.START_DOCUMENT) {
              System.out.println("Start document");
          } else if(eventType == XmlPullParser.START_TAG) {
              System.out.println("Start tag "+xpp.getName());
          } else if(eventType == XmlPullParser.END_TAG) {
              System.out.println("End tag "+xpp.getName());
          } else if(eventType == XmlPullParser.TEXT) {
              System.out.println("Text "+xpp.getText());
          }
          eventType = xpp.next();
         }
         System.out.println("End document");
     }
 } 
```

试试这个在 android.for xml 解析更多检查这个链接

> [http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T04:30:37.797

解析 XML 内容并获取 Dom Element。

```
public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is);

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }
                // return DOM
            return doc;
    } 
```

# wpf - 附加到视图模型的命令太多导致 WPF 应用程序变慢

> ID：15491491
> 
> 赞同：0
> 
> 时间：2013-03-19T04:26:51.250
> 
> 标签：wpf, performance, mvvm, datagrid

我有一个视图模型，它显示在`DataGrid`. 视图模型有 11 `ICommand`。

因此，如果我们加载的`DataGrid`元素超过 100 个。总共创建了 11*100 个命令。

加载整个文件大约需要 1 分钟`DataGrid`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T05:56:32.340

您不会通过*为每个 item*实例化 11 个命令来将您的命令与您的项目相关联。无论您有多少项目，您都应该有一个命令（或在您的情况下为 11 个）。该命令通过使用[命令参数](http://msdn.microsoft.com/de-de/library/system.windows.input.icommandsource.commandparameter.aspx)知道要对哪个项目进行操作。

将 11 个命令放入数据网格或窗口视图模型中，然后从项目视图模型中删除它们。将每个命令的 CommandParameter 绑定到您将调用该命令的项目，例如 Datagrid 中的选定项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:55:51.413

WPF 动态上下文菜单解决了我的问题.. 您可以在数据网格行上使用 ContextMenu.ContextMenuOpening 事件来创建命令，同时右键单击该行。[有关更多信息，请参阅此链接](http://stevemdev.wordpress.com/2010/02/07/wpf-dynamic-context-menu/)

上面的链接用于列表..您也可以以相同的方式使用 DataGrid

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T04:59:26.683

如果从调试器运行它通常需要很长时间。试试exe。

# c++ - img.at 是什么意思 (i,j)？

> ID：15491492
> 
> 赞同：4
> 
> 时间：2013-03-19T04:26:53.147
> 
> 标签：c++, opencv, mat

这是一个基本的问题。不知道这是什么结构。

```
img.at<uchar>(i,j) 
```

是什么意思？我试图找到 的定义**`at`**，但无法理解。这个语法是什么意思？

```
<uchar> 
```

同样，什么意思

```
img.at<cv::Vec3b>(row,col)[channel] 
```

是的，`Mat`是矩阵类来操作矩阵数据。我理解上述行为的行为，但无法理解它们背后的理论？

这个语法是什么意思？

```
img.at<cv::Vec3b> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T04:49:19.230

`at`是类的重载 C++ 模板函数`cv::Mat`。

这`< >`是调用 C++ 模板的语法。

```
img.at<uchar>(i,j) 
```

上面这行意味着，我们正在访问像素`(i,j)`并将其数据类型指定为`unsigned char`。

用简单的英语，从索引中获取 1 个像素，`(i, j)`即行号**i**和列号**j**。

```
img.at<cv::Vec3b> 
```

以上用于3通道图像。与第一个相同，但获取所有三个通道的像素值。返回的值是一个`Vec3b`包含 3 个值的结构，每个通道一个。

# ios - JayData / Phonegap 适用于 iPad 模拟器但不适用于 iPad 设备

> ID：15491498
> 
> 赞同：1
> 
> 时间：2013-03-19T04:27:42.790
> 
> 标签：ios, ipad, cordova, jaydata

我正在使用以下博客作为代码库进行概念验证应用程序。

[http://jaydata.org/blog/how-to-check-if-your-websql-environment-is-working](http://jaydata.org/blog/how-to-check-if-your-websql-environment-is-working)

当我使用 XCode 4.6.1 在 iPad 6.1 Simulator 中运行以下命令时，我可以看到预期的输出。

```
[LOG] Received Event: deviceready
[LOG] begin testing
[LOG] define Department Entity
[LOG] define Employee Entity
[LOG] saving Entity done. 
```

但是当我通过 USB 将以下内容运行到实际的 iPad 设备时，它的输出以“定义部门实体”结束。我没有看到任何错误；这是 console.log 输出：

```
[LOG] Received Event: deviceready
[LOG] begin testing
[LOG] define Department Entity 
```

任何帮助将非常感激。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="format-detection" content="telephone=no" />
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
<link rel="stylesheet" type="text/css" href="css/index.css" />
<title>Hello World</title>

<!--jQuery-->
<script type="text/javascript" src="jquery/jquery-1.7.2.js"></script>
<script type="text/javascript" src="jquery/jquery.mobile-1.1.1.js"></script>

<!--jayData and the different providers used-->
<script type="text/javascript" src="js/JayData-1.2.7.1/JayData.js"></script>
<script type="text/javascript" src="js/JayData-1.2.7.1/jaydataproviders/SqLiteProvider.js"></script>

<!--PhoneGap-->
<script type="text/javascript" src="cordova-2.5.0.js"></script>
</head>
<body>
<div class="app">
    <h1>Apache Cordova</h1>
    <div id="deviceready" class="blink">
        <p class="event listening">Connecting to Device</p>
        <p class="event received">Device is Ready</p>
    </div>
</div>
<script type="text/javascript" src="cordova-2.5.0.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript">
    app.initialize();
    </script>
<script type="text/javascript">
    var jqmReady = $.Deferred(),
        pgReady = $.Deferred();

    // mobileinit does not work. pageinit works.
    // jqm ready
    $(document).bind("pageinit", jqmReady.resolve);

    // phonegap ready
    document.addEventListener("deviceready", pgReady.resolve, false);

    // all ready :)
    $.when(jqmReady, pgReady).then(function () {
        console.log('begin testing');

console.log('define Department Entity');
$data.Entity.extend("$org.types.Department",
{
    Id: { type: "int", key: true, computed: true },
    Name: { type: "string", required: true },
    Employees: {
        type: Array,
        elementType: "$org.types.Employee",
        inverseProperty: "Department"
    }
});
console.log('define Employee Entity');
$data.Entity.extend("$org.types.Employee",
{
    Id: { type: "int", key: true, computed: true },
    Name: { type: "string", required: true },
    Department: { type: $org.types.Department, inverseProperty: 'Employees' }
});

$data.EntityContext.extend("$org.types.OrgContext", {
    Department: { type: $data.EntitySet, elementType: $org.types.Department },
    Employee: { type: $data.EntitySet, elementType: $org.types.Employee }
});

$org.context = new $org.types.OrgContext({
    name: "webSql", databaseName: "OrgDatabase",
    dbCreation: $data.storageProviders.DbCreationType.DropTableIfChanged
});

var department = new $org.types.Department({ Name: 'Department1' });
var employee = new $org.types.Employee({ Name: 'John Smith' });
department.Employees = [employee];

$org.context.onReady(function () {
    $org.context.Department.add(department);
    $org.context.saveChanges();
});

console.log('saving Entity done.');

    });
        </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:03:16.557

在 jaydata 论坛上回答，但我在这里复制，也许其他人会搜索这个

重点：1.使用jquery 1.8+，不支持1.7。如果您必须使用 1.7，那么请使用 q promise，如果您有任何问题，请告诉我们 2\. 不幸的是，您只能在 onload 事件之后订阅 deviceready 事件....

此代码适用于我们的 ipad 6.1

```
(function main() {
var jqmReady = $.Deferred();
var pgReady = $.Deferred();

// mobileinit does not work. pageinit works.
// jqm ready
$(document).bind("pageinit", jqmReady.resolve);

// phonegap ready
$.when($.ready)
.then(function(){
    document.addEventListener("deviceready", pgReady.resolve, false);
});

var Employee = $data.define('Employee', {
   Id: { type: "int", key: true, computed: true },
   Name: { type: "string", required: true },
   Department: { type: "Department", inverseProperty: 'Employees' }
});

var Department = $data.define('Department', {
   Id: { type: "int", key: true, computed: true },
   Name: { type: "string", required: true },
   Employees: { type: Array, elementType: "Employee", inverseProperty: 'Department' }
});

var OrgDatabase = $data.EntityContext.extend('OrgDatabase', {
   Departments: { type: $data.EntitySet, elementType: Department },
   Employees: { type: $data.EntitySet, elementType: Employee }
});

var context = new OrgDatabase({name: 'webSql', databaseName: 'OrgDatabase', dbCreation: $data.storageProviders.DbCreationType.DropTableIfChanged});            

// all ready :)
$.when(jqmReady, pgReady, context.onReady()).then(function () {

   var employee = new Employee({ Name: 'John Smith' });
   var department = new Department({ Name: 'Department1' });
   department.Employees = [employee];

   context.Departments.add(department);
   context.saveChanges(function() {
      alert('saving Entity done.');
    });
});
})() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:13:47.337

我使用 Web Inspector 发现 iPad 上的应用程序无法加载“JayData.js”。

事实证明，实际的 js 文件有一个全小写字符的文件名。因此，解决方法是将“JayData.js”更改为“jaydata.js”，该应用程序可以在 iPad 上运行。

[http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/DebuggingSafarioniPhoneContent/DebuggingSafarioniPhoneContent.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/DebuggingSafarioniPhoneContent/DebuggingSafarioniPhoneContent.html)

# ios - 打开后无法立即写入 NSOutputStream？

> ID：15491499
> 
> 赞同：3
> 
> 时间：2013-03-19T04:27:52.813
> 
> 标签：ios, objective-c, network-programming

我正在从[本](http://maniacdev.com/2011/06/tutorial-building-a-simple-ios-tcp-socket-based-app-client-and-server/)教程中学习 iOS 网络编程。我尝试修改代码，以便在连接成功后立即向服务器发送响应。我更改的代码的唯一部分是在这个函数中。问题是应用程序停止并且行上没有任何反应`[outputStream write:[data bytes] maxLength:[data length]];`因此`NSLog(@"sent test");`没有被执行。我究竟做错了什么？

```
- (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent {       
    NSLog(@"stream event %i", streamEvent);
    switch (streamEvent) {
        case NSStreamEventOpenCompleted:
            NSLog(@"Stream opened");

            //my code
            if (theStream == outputStream) {
                NSLog(@"outputStream");                                
                NSData* data = [NSData dataWithBytes:@"test" length:4];
                [outputStream write:[data bytes] maxLength:[data length]];
                NSLog(@"sent test");
            } //end my code

            break;
        case NSStreamEventHasBytesAvailable:
            if (theStream == inputStream) {
                uint8_t buffer[1024];
                int len;
                while ([inputStream hasBytesAvailable]) {
                    len = [inputStream read:buffer maxLength:sizeof(buffer)];
                    //...
                }
            }
            break;
        case NSStreamEventErrorOccurred:
            NSLog(@"Can not connect to the host!");
            break;
        case NSStreamEventEndEncountered:
            [theStream close];
            [theStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
            [theStream release];
            theStream = nil;
            break;
        default:
            NSLog(@"Unknown event");
    }
} 
```

编辑：在此处找到解决方案 [如何使用 NSOutputStream 的写入消息？](https://stackoverflow.com/questions/703729/how-to-use-nsoutputstreams-write-message)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:35:19.750

好的，当我使用原始套接字连接时，我使用该代码将数据发送到服务器。可能对你有帮助

```
if (theStream == outputStream) {
        NSData* data = [str dataUsingEncoding:NSUTF8StringEncoding];//str is my string to send
        int byteIndex = 0;
        uint8_t *readBytes = (uint8_t *)[data bytes];
        readBytes += byteIndex; // instance variable to move pointer
        int data_len = [data length];
       // NSLog(@"%i",[data length]);
        unsigned int len = ((data_len - byteIndex >= 1024) ?
                            1024 : (data_len-byteIndex));
        uint8_t buf[len];
        (void)memcpy(buf, readBytes, len);
        len = [outputStream write:(const uint8_t *)buf maxLength:len];
        byteIndex += len;

} 
```

# javascript - Ember.js 需要关于简单 Todo 示例的集合处理程序的帮助

> ID：15491500
> 
> 赞同：0
> 
> 时间：2013-03-19T04:28:11.600
> 
> 标签：javascript, ember.js

我是 Ember.js 的新手，我在 Ember.js 上尝试了一个简单的示例，到目前为止还不错，但我坚持使用这个示例。

在这里，我粘贴了我创建的 Todo 示例。

JS：-

```
 App = Ember.Application.create();

    App.ApplicationController = Ember.Controller.extend({
     });

     App.ApplicationView = Ember.View.extend({
       templateName:"appTemp"
     });

    App.Todo = Ember.Object.extend({
      title:null
    });

     App.TodoController =Ember.ArrayProxy.create({
       content: [],
      addItem: function(title){
            var todo = App.Todo.create({title: title})  ;
            this.pushObject(todo);
           }
     });

      App.TodoController.addItem("hello");
      App.TodoController.addItem("world");

    App.TodoAddView = Ember.View.extend({
       createTodo: function(name){
         App.TodoController.addItem(document.getElementById("todoName").value);
     }
   });

   App.TodoView = Ember.View.extend();

   App.TodosListView = Ember.CollectionView.extend({
     itemViewClass: Ember.View.extend({
    })
   }); 
```

Html：打印待办事项脚本

```
<script type="text/x-handlebars" data-template-name="appTemp">
  {{#collection App.TodosListView contentBinding = "App.TodoController" }}
  {{#view App.TodoView contentBinding="content"}}
  <label>TODO - {{content.title}}</label>
  {{/view}}
  {{/collection}}
</script> 
```

所以问题是

我显示了所有添加的待办事项，如下所示

TODO - [todoName]

**但它没有正确打印 todoName**

所以我无法识别，我在这里犯了什么错误。

```
 <label>TODO - {{content.title}}</label> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:05:45.637

是否有充分的理由使用 CollectionView？使用 {{#each}} 帮助器可能更容易（恕我直言更具可读性）。因此替代建议：

**使用 each 助手和内联模板：**

```
<script type="text/x-handlebars" data-template-name="appTemp">
  {{#each todo in App.TodoController }}
  {{#view App.TodoView contextBinding="todo"}}
   <label>TODO - {{title}}</label>
  {{/view}}
  {{/each}}
</script> 
```

**在没有内联模板的情况下使用 each 助手：**

```
<script type="text/x-handlebars" data-template-name="appTemp">
  {{#each todo in App.TodoController }}
  {{view App.TodoView contextBinding="todo"}}
  {{/each}}
</script>
<script type="text/x-handlebars" data-template-name="todoView">
  <label>TODO - {{title}}</label>
</script/> 
```

如您所见，我还建议**为您的 View 使用 contextBinding**。控制器应该始终使用**content 属性**，而**视图应该始终使用 context 属性**。这是做这件事的更添油加醋的方式。正如您在本例中看到的，您不需要在属性路径之前指定前缀（{{title}} 而不是 {{context.title}}）。这种方法使 View 更具可重用性，因为 if 在与控制器一起使用时也可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:56:01.997

只需将您的模板更改为：

```
<script type="text/x-handlebars" data-template-name="appTemp">
  {{#collection App.TodosListView contentBinding="App.TodoController"}}
    {{#view App.TodoView}}
      <label>TODO - {{title}}</label>
    {{/view}}
  {{/collection}}
</script> 
```

见[http://jsbin.com/iriwow/1/edit](http://jsbin.com/iriwow/1/edit)

# android - 隐藏系统弹出窗口，如最近的任务，通知栏如由 android 4.0 中的surelock 应用程序完成

> ID：15491501
> 
> 赞同：2
> 
> 时间：2013-03-19T04:28:21.517
> 
> 标签：android, dialog, system, statusbar

我正在为运行 android 4.0.3 的平板电脑开发一个独立的应用程序（kiosk 模式），我的问题是用户可以使用系统状态栏的通知区域进入设置并强制停止我的应用程序并使用平板电脑。

我需要一个surelock应用程序如何处理这种情况的提示，我在无根设备上下载了他们的应用程序，在启动应用程序并设置为默认主屏幕后，当我按下通知或最近的应用程序按钮时，窗口会立即弹出并隐藏，所以用户不能与之交互，这是我在应用程序中需要的相同功能。

我已经尝试使用服务覆盖系统，它隐藏了它背后的所有内容（全屏），但问题是我如何只允许我的活动并隐藏其他活动（就像 Surelock 应用程序一样）。

```
 WindowManager.LayoutParams params = new WindowManager.LayoutParams(
        WindowManager.LayoutParams.FLAG_FULLSCREEN, 
        WindowManager.LayoutParams.FLAG_FULLSCREEN,  
        WindowManager.LayoutParams.TYPE_SYSTEM_ALERT,
        WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN,
        PixelFormat.OPAQUE);
params.gravity = Gravity.RIGHT | Gravity.TOP;
params.setTitle("Load Average");
WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);
wm.addView(view, params); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:12:23.230

你不能隐藏它，但你可以简单地禁用它，除了家。试试[这个链接。](https://stackoverflow.com/questions/14801928/is-it-possible-to-hide-the-system-bar/15652646#15652646). 使用 SYSTEM_UI_FLAG_LOW_PROFILE 您可以使系统栏变暗，并使用`onWindowFocusChanged()`可以获取焦点并折叠它。如果您使用的是独立应用程序，只需将您的应用程序作为默认主页，请选中该框。使用此用户将无法退出应用程序。

捕获点击事件的代码

```
int count;
public boolean dispatchTouchEvent(MotionEvent event) {
    // Check the event and do magic here, such as...
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        count = count + 1;

        if (count == 1) {
            new CountDownTimer(5000, 1000) {

                public void onTick(long millisUntilFinished) {

                }

                public void onFinish() {
                    count = 0;
                }
            }.start();
        }

        if (count == 15) {

            exitDialog();
        }

    }

    // Be careful not to override the return unless necessary
    return super.dispatchTouchEvent(event);
}

private void exitDialog() {

    new AlertDialog.Builder(ctw)
            .setView(textEntryView)
            .setIcon(android.R.drawable.ic_dialog_alert)
            .setTitle("Exit")
            .setCancelable(false)
            .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    // if the password is correct we can exit!
                    if (((EditText) textEntryView
                            .findViewById(R.id.exitpassword)).getText()
                            .toString()
                            .compareTo(getString(R.string.exitpassword)) == 0) {

                        // clear everything and call finish.

                    }
                }
            })
            .setNegativeButton("CANCEL",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {

                        }
                    }).show();

} 
```

# ravendb - 为什么我在家可以轻松获得 RavenDB UI 管理员权限，但不能在工作中使用？

> ID：15491503
> 
> 赞同：0
> 
> 时间：2013-03-19T04:28:26.130
> 
> 标签：ravendb

我已经看到一些关于如何在 RavenDB Web UI 上获得管理员权限的讨论。当我第一次尝试时，我实际上没有遇到任何问题。我在家。有人提示我输入用户名和密码。我提供了它们，没有遇到任何麻烦。

今天我在办公室尝试了同样的事情，但完全不成功。我一次又一次地被提示，每次都被拒绝。在家和在办公室之间的主要区别在于，在办公室我在域中。在家里，它看不到域或 Active Directory 或任何东西。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:07:22.097

RavenDB 将以下用户视为管理员：

*   运行 ravendb 进程的用户
*   域管理员
*   本地管理员

# vba - 删除行循环优化 VBA

> ID：15491505
> 
> 赞同：3
> 
> 时间：2013-03-19T04:29:08.997
> 
> 标签：vba, loops, optimization, excel

下面的代码是作为随机样本生成器的一部分编写的。根据发生的总数，它计算样本量并将总体减少到样本量。现在我通过删除总数和样本量之间的差异来做到这一点。我想看看是否有更好的方法来解决这个问题。我在用户定义的列中获取每个值的样本并使用大型数据集，因此采样最终需要几分钟。

有没有办法一次删除我需要的行数，而不是像下面的循环中看到的那样一次删除一个，或者有更好的方法来解决这个问题？谢谢！

```
x = (Population - SampleSize)

    If Population > SampleSize Then
        Do Until x = 0
            Workbooks(SourceBook).Sheets(SampleSheet).Columns(StratCol) _
            .Find(What:=SubPop, After:=Cells(SampRows, StratCol), LookIn:=xlValues, _
                SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False).EntireRow.Delete

        x = x - 1

        Loop

    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:48:36.707

您可以构建一个包含多个非连续行的范围，然后一次删除所有行。这可能会加快速度。

```
x = (Population - SampleSize)

dim MyRange as Range

If Population > SampleSize Then
    Do Until x = 0
        if MyRange Is Nothing Then
            Set MyRange = Workbooks(SourceBook).Sheets(SampleSheet).Columns(StratCol) _
                .Find(What:=SubPop, After:=Cells(SampRows, StratCol), LookIn:=xlValues, _
                SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False).EntireRow
        Else
            Set MyRange = Application.Union(MyRange, Workbooks(SourceBook).Sheets(SampleSheet).Columns(StratCol) _
                .Find(What:=SubPop, After:=Cells(SampRows, StratCol), LookIn:=xlValues, _
                SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False).EntireRow)
        End If
        x = x - 1
    Loop
    MyRange.Delete
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:41:46.417

**对于此解决方案，可以避免**循环。

只需添加一个额外的列，创建一个可以使用**SpecialCells**找到的错误，如下所示：

```
Range("IA1:IA" & Range("A65536").End(xlUp).Row).Formula = "=IF(A:A = """ & SubPop & """,NA(),"""") " 
```

然后你使用 SpecialCells 来识别匹配 SupPop 的行，并删除整行！

```
Range("IA1:IA" & Range("A65536").end(xlup).row).specialcells(xlCellTypeFormulas, xlErrors).EntireRow.Delete shift:=xlup 
```

最后，清理/删除我们在开头添加的额外公式列：

```
Range("IA1:IA" & Range("A65536").end(xlup).row).clear 
```

这是对该技术的正确解释：[How to delete multiple rows without a loop in Excel VBA](https://stackoverflow.com/questions/15431801/how-to-delete-multiple-rows-without-a-loop-in-excel-vba)

我希望这有助于你开始

这是*急切*要求的上述代码在一个功能中的全部功能：

```
Sub deleteRows(ByVal strSubPop As String)
' pass in the string to match (SubPop)
'
    Range("IA1:IA" & Range("A65536").End(xlUp).Row).Formula = "=IF(A:A = """ & strSubPop & """,NA(),"""") "
'    
    ' for debugging and testing just select the rows where a match is found
    Range("IA1:IA" & Range("A65536").End(xlUp).Row).SpecialCells(xlCellTypeFormulas, xlErrors).EntireRow.Select
 '   
    ' when ready, UNCOMMENT the below line
   ' Selection.Delete shift:=xlUp
  '  
    ' after testing just use this line to select the rows and delete in one step:
    ' Range("IA1:IA" & Range("A65536").End(xlUp).Row).SpecialCells(xlCellTypeFormulas, xlErrors).EntireRow.Delete shift:=xlUp
   '  
    ' now clean up Column IA
    Range("IA1:IA" & Range("A65536").End(xlUp).Row).Clear
    Range("A1").Select
'
End Sub 
```

那么该代码在做什么呢？

首先，您的要求是删除匹配**SubPop的行**

1.  第一行在 IA 列中添加了一个与 A 列中找到的 SubPop 匹配的公式
2.  下一行找到所有这些行然后删除它们
3.  最后一行清理

菲利普

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T07:05:27.733

对于这种情况，循环是无法避免的。试试下面的代码。

```
 Dim rng As Range
    x = (Population - SampleSize)

    If Population > SampleSize Then
        Do Until x = 0

            With Workbooks(SourceBook).Sheets(SampleSheet)
                Set rng = .Columns(StratCol).Find(What:=SubPop, After:=Cells(SampRows, StratCol))
                If Not rng Is Nothing Then
                    rng.EntireRow.Delete
                End If
            End With

            x = x - 1
        Loop
    End If 
```

# silverlight - Silverlight 应用程序崩溃浏览器刷新

> ID：15491507
> 
> 赞同：1
> 
> 时间：2013-03-19T04:29:31.073
> 
> 标签：silverlight, crash

我刚刚将应用程序升级到 VS2012。同样的 SL5，只是升级到 async/await。

一切似乎都正常，但我无法通过刷新浏览器重新启动应用程序。它变成白屏，我认为这表明它崩溃了。但是我如何弄清楚它为什么这样做呢？

编辑：非常非常奇怪。我只是注意到如果我在 IE10 中单击地址行并按 Enter 键 - 它会刷新得很好。如果我点击刷新按钮（圆形箭头） - 它会变为空白。

我认为这是 IE 中不同的“刷新类型”？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T00:33:36.267

这是IE和silverlight插件中的一个bug你可以参考这个网站：（[https://connect.microsoft.com/VisualStudio/feedback/details/789004/ie10-shows-blank-page-upon-refreshing-silverlight-app](https://connect.microsoft.com/VisualStudio/feedback/details/789004/ie10-shows-blank-page-upon-refreshing-silverlight-app) )

干杯

# php - 触发时未定义ajax错误日期

> ID：15491516
> 
> 赞同：0
> 
> 时间：2013-03-19T04:30:18.170
> 
> 标签：php, ajax, undefined

我有一个像这样的表格：

```
<form method="post" action="functions/updateWeek.php">
    <label for="dateStart">View From</label>
    <input type="date" name="dateStart" required>
    <label for="dateEnd">Until</label>
    <input type="date" name="dateEnd" required>
    <input type="submit" id="submitWeek" value="Go"/>
</form> 
```

还有一些像这样的javascript：

```
$(document).ready(function() {
     //if submit button is clicked
    $('#submitWeek').click(function () {              
        //Get the data from the field
        var dateStart = $('date[name=dateStart]');
        var dateEnd = $('date[name=dateEnd]');
        //organize the data properly
        var data = 'dateStart='  + dateStart.val() + '&dateEnd=' + dateEnd.val();
        //start the ajax
        $.ajax({
            //this is the php file that processes the data and send mail
            url: "functions/updateWeek.php", 
            //GET method is used
            type: "POST",
            //pass the data         
            data: data,     
            //Do not cache the page
            cache: false,
            success: function() {
             alert("done");
            }
        });     
        //cancel the submit button default behaviours
        return false;
    }); 
}); 
```

发送到这个 php 文件：

```
//Start sessions
session_start();
//include config file
include_once 'config.php';
include_once 'accountFunctions.php';
//get start date from form
$dateStart = $_POST['dateStart'];
//get end date from form
$dateEnd = $_POST['dateEnd'];
//collect the start week
$startWeek = getStartWeek($dateStart);
//collect the end week
$endWeek = getEndWeek($dateEnd); 
```

我没有包括其余的功能。

然而，我遇到的问题是经过检查（因为查询不起作用），我的 post 方法中的 dateStart 和 dateEnd 似乎都是“未定义的”。

至于为什么，我一无所知。我错过了一些明显的东西吗？我怀疑这一定是我的 jquery 选择器的问题，但如果是这样，它可能是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T04:37:11.843

你必须使用这样的选择器，

```
var dateStart = $('input[name="dateStart"]');
var dateEnd = $('input[name="dateEnd"]'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T04:36:49.017

在 jQuery 中，输入名称的选择器是这样的（在您的情况下）：

```
var dateStart = $('input[name="dateStart"]');
var dateEnd = $('input[name="dateEnd"]'); 
```

这也适用于元素中的任何属性：

[jQuery 前缀选择器文档](http://api.jquery.com/attribute-contains-prefix-selector/)

[所以问题](https://stackoverflow.com/questions/4854816/jquery-reference-input-by-name)

[小提琴示例](http://jsfiddle.net/9MFXg/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T04:41:51.920

试试这个代码

```
var dateStart = $('input[name="dateStart"]').val();
var dateEnd = $('input[name="dateEnd"]').val();

var data = 'dateStart='  + dateStart+ '&dateEnd=' + dateEnd; 
```

# android - 使用 KSOAP 将文件从 android 应用程序传输到 Web 服务

> ID：15491518
> 
> 赞同：0
> 
> 时间：2013-03-19T04:30:29.613
> 
> 标签：android, ksoap

我已将数据从 android 应用程序发送到 web 服务，该服务将使用 KSOAP 进一步将其传输到浏览器。现在我打算将文件从应用程序传输到网络服务。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:34:04.997

```
InputStream is = null;
try{
    is = new BufferedInputStream(new FileInputStream(Environment.getExternalStorageDirectory().getAbsolutePath() +"/Filename"));
}   
catch (FileNotFoundException e1) {
    e1.printStackTrace();
}   

ByteArrayOutputStream bos = new ByteArrayOutputStream();

try {
    while (is.available() > 0) {
        bos.write(is.read());
    }
} 
catch (IOException e1) {
    e1.printStackTrace();
}

byte[] byteArray = bos.toByteArray();               
String base64= Base64.encodeToString(byteArray, Base64.DEFAULT); 
```

第一步：从 SD 卡中获取文件并在**INPUTSTREAM**中分配该文件。

第二步：将文件写入**BYTEARRAYOUTPUTSTREAM**

第三步：将该流转换为**BYTEARRAY**

第 4 步：将 Bytearray 转换为**BASE64STRING**

# django - 在模板中使用带有全局搜索栏的 django haystack 搜索

> ID：15491524
> 
> 赞同：2
> 
> 时间：2013-03-19T04:30:48.943
> 
> 标签：django, search, django-haystack

我有一个 django 项目，需要搜索 2 个不同的模型，其中一个模型有 3 种类型，我需要根据这些类型进行过滤。我已经安装了 haystack 并在基本意义上工作（使用我的模型的默认 url conf 和 SearchView 以及入门文档中的模板返回结果很好）。

问题是我只能通过使用基本 search.html 模板中的搜索表单来获得结果，并且我正在尝试使全局搜索栏与 haystack 一起使用，但我似乎无法正确处理，我我对 haystack 文档不太满意。我在这里发现了另一个问题，导致我在搜索应用程序中采用了以下方法。

我的 urls.py 将“/search”定向到我的 search.views 中的这个视图：

```
def search_posts(request):
    post_type = str(request.GET.get('type')).lower()
    sqs = SearchQuerySet().all().filter(type=post_type)
    view = search_view_factory(
        view_class=SearchView,
        template='search/search.html',
        searchqueryset=sqs,
        form_class=HighlightedSearchForm
        )
    return view(request) 
```

进来的 url 字符串看起来像：

[http://example.com/search/?q=test&type=blog](http://example.com/search/?q=test&type=blog)

这将从我的全局搜索栏中获取查询字符串，但不返回任何结果，但是如果我从 sqs 行中删除 .filter(type=post_type) 部分，我将再次获得搜索结果（尽管未按帖子类型过滤）。有任何想法吗？我想我错过了一些相当明显的东西，但我似乎无法弄清楚这一点。

谢谢，-肖恩

编辑：

原来我只是个白痴。我按类型对 SQS 进行过滤没有返回任何结果的原因是因为我的 PostIndex 类中没有包含 type 字段。我将我的 PostIndex 更改为：

```
class PostIndex(indexes.SearchIndex, indexes.Indexable):
      ...
      type = indexes.CharField(model_attr='type') 
```

并重建，现在一切正常。

不过感谢您的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:04:00.010

```
def search_posts(request):
    post_type = str(request.GET.get('type')).lower()
    sqs = SearchQuerySet().filter(type=post_type)
    clean_query = sqs.query.clean(post_type)
    result = sqs.filter(content=clean_query)
    view = search_view_factory(
        view_class=SearchView,
        template='search/search.html',
        searchqueryset=result,
        form_class=HighlightedSearchForm
        )
    return view(request) 
```

# php - 循环通过 $_POST 并添加到数据库

> ID：15491529
> 
> 赞同：5
> 
> 时间：2013-03-19T04:31:23.740
> 
> 标签：php, mysql, foreach

我试图做的是循环通过用户输入博客文章标签的文本输入。如果每个标签尚不存在，我想将其添加到数据库中。

当我在数据库中进行测试时，下面的实际查询字符串有效。

但是我认为我的循环语法可能不太正确，因为我没有将任何内容添加到数据库中。

谁能在我的循环中发现一个错误导致我的“添加到数据库”失败？

在此先感谢您的帮助！

```
foreach ($_POST['__tags'] as $key=>$ls_value) {

        $value = strtolower(mysql_real_escape_string($ls_value));

        mysql_query("INSERT INTO `table` (`field`)
                SELECT * FROM (SELECT '$value') as tmp
                WHERE NOT EXISTS (
                        SELECT `field` FROM `table` WHERE `field` = '$value')
                LIMIT 1") or trigger_error(mysql_error(), E_USER_ERROR);            

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:41:39.377

尝试使用以下代码：

```
if(is_array($_POST['__tags']))
{
    foreach ($_POST['__tags'] as $key=>$ls_value) {

        $value = strtolower(mysql_real_escape_string($ls_value));

        mysql_query("INSERT INTO table (field)
            SELECT * FROM (SELECT '".$value."') as tmp
            WHERE NOT EXISTS (SELECT field FROM table WHERE field = '".$value."') LIMIT 1") or trigger_error(mysql_error(), E_USER_ERROR);            

    }
} 
```

请使用正确的 PDO 或准备好的语句，并且不推荐使用 mysql_query，而是使用 mysqli 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:49:33.367

**只需尝试以下内容：**

**PHP部分：**

```
<?php 

$tags = $_POST['tags'];

foreach ($tags as $tag){
$value = strtolower(mysql_real_escape_string($tag));
$sel_tag = mysql_query("select * from `table` where `field`='$value'")or die(mysql_error());
$num_rows = mysql_num_rows($sel_tag);
if($num_rows > 0){
echo "Tag Already Exists";
}
else {
$ins_tag = mysql_query("insert into `table` (`field`) values ('$value');")or die(mysql_error());
echo "Tag Successfully Inserted";
}
}

?> 
```

**HTML部分：**

```
<form action="" name="tags" method="post">
<p>Please select the tags names : </p>
<p>
<input type="checkbox" name="tags[]" value="tag1"> Tag1
<input type="checkbox" name="tags[]" value="tag2"> Tag2
<input type="checkbox" name="tags[]" value="tag3"> Tag3
</p>
<p><input type="submit" name="tag_submit" value="Submit"></p>
</form> 
```

我认为这可以帮助您解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T05:12:17.713

我已经提示您获取数组值和键形式名称应该等于数据库字段检查这个

post.php

```
 <?php  
        $keys=array();
        $values=array();    
        foreach ($_POST as $key=>$ls_value) {
            $keys[]=$key;
            $values[]="'".mysql_real_escape_string($ls_value)."'";      
        }
        echo $fileds=implode(",", $keys);
        echo $values=implode(",", $values);
  ?> 
```

表单.html

```
<form action="post.php" method="post">
  <input type="text" value="123" name="number"/>
  <input type="text" value="firstname" name="name"/>
  <input type="submit" value="submit"/>
</form> 
```

# python - 使用 while 语句对连续整数求和

> ID：15491538
> 
> 赞同：-2
> 
> 时间：2013-03-19T04:33:04.793
> 
> 标签：python, loops, while-loop

```
def sum_from_to(start, end):
    """Return the sum of the integers from start up to but not including end.

    sum_from_to(int, int) -> int
    """

    while 
```

## 例子：

*   sum_from_to(3, 7) 应计算为 18（即 3+4+5+6）。
*   sum_from_to(3, 3) 应评估为 0。

我将如何处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T04:42:55.223

只是为了好玩，您可以使用欧拉求和公式纯数学地解决这个问题：

```
def sum_from_to(start,stop):
    return ((stop-1)*stop-(start-1)*start)/2

sum_from_to(3,7) #18 
```

这具有计算成本非常低的好处。没有循环，没有范围，数组，你有什么。相比之下，其他功能很昂贵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T04:36:43.697

有更简单的解决方案。

```
sum(range(3, 7)) 
```

这将不包括最终值。所以你会得到你所需要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T04:37:33.407

首先，如果这不是家庭作业问题，答案很简单：

```
def sum_from_to(start, end):
    return sum(range(start, end)) 
```

在 Python 2.x 中，使用`xrange`而不是`range`. 就是这样。

如果这是一个家庭作业程序，并且您不允许使用`sum`甚至`range`是`for`循环（此时我不得不想知道为什么他们甚至假装教您 Python，但无论如何......），这里有一个骨架：

```
def sum_from_to(start, end):
    total = 0
    value = start
    while ???:
        total = ???
        value = ???
    return total 
```

需要填写“？？？” 部分。你如何`value`不断计数，一次 1，直到它达到`end`？你怎么做才能`total`让它保持流动的总和？这就是它的全部。

作为进一步的提示：

您可以使用变量的旧值来生成新值。例如：

```
i = 1
i = i * 2 # now it's 2
i = i * 2 # now it's 4 
```

# nhibernate - xml文件中的Nhibernate存储过程映射说明

> ID：15491543
> 
> 赞同：0
> 
> 时间：2013-03-19T04:33:32.823
> 
> 标签：nhibernate, nhibernate-mapping

谁能告诉在 Nhibernate 中准确映射存储过程的位置。

在类 hbm.xml 文件或新声明的文件（hbm.xml）中，特别是对于存储过程？？？

你能说出理由吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T11:45:25.380

我创建了一个包含所有存储过程调用的 XML 文件，例如

```
<?xml version="1.0" encoding="utf-8" ?>  
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">  
  <sql-query name="SummaryReport">  
    exec getSummaryReport  :productId  
  </sql-query>  
  <sql-query name="FullReport">  
    exec getFullReport  :productId  
  </sql-query>  
</hibernate-mapping> 
```

并将其标记为嵌入式资源。然后我可以这样称呼我 SP：-

```
var results = Session
  .GetNamedQuery("SummaryReport")
  .SetInt32("productId", productId);
  .SetResultTransformer(
    new AliasToBeanResultTransformer(typeof(SummaryReport)));
return results.List<SummaryReport>(); 
```

这对我来说很好，但确实没有推荐的方法，它总是取决于你觉得适合你的方法。

# sencha-touch-2 - 如何使单页仅以横向模式打开..不是整个应用程序？

> ID：15491555
> 
> 赞同：2
> 
> 时间：2013-03-19T04:34:36.543
> 
> 标签：sencha-touch-2

我的清单有问题。有按钮命名列表..点击它我显示列表叠加，但由于更多的列，我必须让用户只能在横向模式下看到它..我将如何实现它？我已将我的整个项目定位为 Portrait 。我只想在横向中显示此页面...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T02:22:17.033

我唯一能想到的就是为该视图创建横向和纵向配置文件，并根据方向更改的侦听器切换它们。

我有一种感觉，虽然那会更喜欢这种工作方式。您最好一起重新考虑该布局。

祝你好运，布拉德

# sql - MongoDB：如何检索新构建的数据而不是集合中的原始文档？

> ID：15491556
> 
> 赞同：1
> 
> 时间：2013-03-19T04:34:40.827
> 
> 标签：sql, mongodb, database

我有一个集合，其中的文档都采用这种格式：

```
{"user_id": ObjectId, "book_id": ObjectId} 
```

它代表了用户和书籍之间的关系，也是一对多的，也就是说，一个用户可以拥有多本书。

现在我得到了三个`book_id`，例如：

```
["507f191e810c19729de860ea", "507f191e810c19729de345ez", "507f191e810c19729de860efr"] 
```

我想查询出拥有这三本书的用户，因为我想要的结果不是这个集合中的文档，而是一个新构建的数组`user_id`，看起来很复杂，我不知道如何查询，请帮助我。

**笔记：**

我不使用结构的原因如下：

```
{"user_id": ObjectId, "book_ids": [ObjectId, ...]} 
```

是因为在我的系统中，书籍增加频繁，数量没有限制，也就是说用户可能阅读了上千本书，所以我觉得还是用传统的方式存储比较好。

这个问题不受MongoDB的限制，可以用关系数据库的思路来回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:35:39.290

使用常规`find`您无法取回拥有所有 book_id 的所有 user_id 字段，因为您对集合进行了规范化（将其展平）。

如果您使用聚合框架，您可以这样做：

```
db.collection.aggregate([
    {
        $match: {
            book_id: {
                $in: ["507f191e810c19729de860ea",
                      "507f191e810c19729de345ez",
                      "507f191e810c19729de860efr" ]
            }
        }
    },
    {
        $group: {
            _id: "$user_id",
            count: { $sum: 1 }
        }
    },
    {
        $match: {
            count: 3
        }
    },
    {
        $group: {
            _id: null,
            users: { $addToSet: "$_id" }
        }
    }
]); 
```

它的作用是仅通过管道过滤与三个 book_id 值之一匹配的文档，然后按 user_id 分组并计算该用户获得的匹配数。如果他们得到三个，他们将传递到下一个管道操作，该操作将它们分组到一个 user_ids 数组中。此解决方案假定每个 'user_id,book_id' 记录只能在原始集合中出现一次。

# html - 带有水平子菜单的水平菜单栏在 IE 中不起作用

> ID：15491557
> 
> 赞同：1
> 
> 时间：2013-03-19T04:34:44.170
> 
> 标签：html, css, internet-explorer, google-chrome, firefox

我使用以下 HTML 程序创建带有水平子菜单的水平菜单栏。它在 Fire Fox 和 Chrome 中运行良好，**但在 IE 中不起作用**。**那么这个程序需要更改哪些更改？**

```
<html>    
<head>          
<style>       
    /* Targeting both first and second level menus */

#nav li {
    list-style:none;
    float: left;
    position: relative;
}
#nav li a {
    display: block;
    padding: 8px 12px;
    text-decoration: none;
}
#nav li a:hover {

    background-color:red;
    color:#FFF;
    opacity:1;
}

/* Targeting the first level menu */
#nav {  
    top:150px;
    min-width:850px;
    background:#fff;
    opacity:0.5;
    display: block;
    height: 34px;
    z-index: 100;
    position: absolute;
}
#nav > li > a {
}

/* Targeting the second level menu */
#nav li ul {
    color: #333;
    display: none;
    position: absolute; 
    width:850px;
}
#nav li ul li {
    display: inline;
}
#nav li ul li a {
    background: #fff;
    border: none;
    line-height: 34px;
    margin: 0;
    padding: 0 8px 0 10px;
}
#nav li ul li a:hover {
    background-color:red;
    color:#FFF;
    opacity:1;
}

/* Third level menu */
#nav li ul li ul{
    top: 0;
}
ul.child {
background-color:#FFF;  
}
/* A class of current will be added via jQuery */
#nav li.current > a {
    background: #f7f7f7;
    float:left;
}
/* CSS fallback */
#nav li:hover > ul.child {
    left:0;
    top:34px;
    display:inline;
    position:absolute;
    text-align:left;
}
#nav li:hover > ul.grandchild  {
    display:block;
}       

</style>        
</head>       
<body>

 <ul id="nav">
    <li><a href="#">Home</a></li>
    <li>
        <a href="#">Products</a>
        <ul class="child">
            <li><a href="#">Hard Drives</a></li>
            <li><a href="#">Monitors</a></li>
            <li><a href="#">Speakers</a>
                <ul class="child">
                    <li><a href="#">10 watt</a></li>
                    <li><a href="#">20 watt</a></li>
                    <li><a href="#">30 watt</a></li>
                </ul>
            </li>
            <li><a href="#">Random Equipment</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Services</a>
        <ul class="child">
            <li><a href="#">Repairs</a></li>
            <li><a href="#">Installations</a></li>
            <li><a href="#">Setups</a></li>
        </ul>
    </li>
    <li><a href="#">About</a></li>
    <li><a href="#">Contact</a></li>
</ul>         
</body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:56:04.437

好吧，由于某种原因，我什至无法让小提琴网站在 IE8 中工作......？但是我在您的 CSS 中注意到的一个问题是不透明度。IE8 不支持 opacity 属性。要更改旧 IE 中元素的不透明度，请使用`filter:alpha(opacity=75);`注意，值 75 是从 1 到 100 的整数，而不是像 opacity 属性那样的小数。我希望我能提供更多帮助，但我什至看不出问题出在哪里......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:22:03.907

你用modernizr吗？或者有旧版 IE 浏览器的可用类？您可能想尝试为 IE 处理单独的样式和/或样式表。

或者

您可以将您的导航从浮动块切换到“内联”元素，旧版浏览器（例如 IE6）不能很好地处理浮动块，可以识别这些元素。

或者

如果您想坚持使用浮动，请确保为任何浮动元素设置“宽度”。

Chris Coyier 有一篇关于浮点数的好文章，其中包含一个标记为：“浮点数问题” [http://css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)

# android - ZipResourceFile 无法解析为类型

> ID：15491559
> 
> 赞同：3
> 
> 时间：2013-03-19T04:34:51.110
> 
> 标签：android, zipfile, apk

我正在尝试重写我的应用程序以使用 APK 扩展文件。我一直在关注这里的文档[http://developer.android.com/google/play/expansion-files.html](http://developer.android.com/google/play/expansion-files.html)。我已经下载了...

![在此处输入图像描述](../Images/d4376fb478752ad8de99a08c3d849139.png)

...但是当我添加此代码时...

```
public static Uri getTrackUriFromZipFile ( int track ) {
    // Get a ZipResourceFile representing a specific expansion file
    ZipResourceFile expansionFile = new ZipResourceFile(filePathToMyZip);
} 
```

...我收到错误消息`ZipResourceFile cannot be resolved to a type`:(哭泣哭泣

已编辑......嗯，也许我必须做一些像这样可怕的事情......

如果您使用的是 Eclipse，请为每个库创建一个项目并将其添加到您的应用程序中：

为许可证验证库和下载器库创建一个新的库项目。对于每个库：开始一个新的 Android 项目。选择 Create project from existing source 并从 /extras/google/ 目录中选择库（market_licensing/ 用于许可证验证库或 market_apk_expansion/downloader_library/ 用于下载器库）。指定项目名称，例如“Google Play License Library”和“Google Play Downloader Library”。单击 Finish。注意：下载程序库依赖于许可证验证库。确保将许可证验证库添加到下载器库的项目属性中（与下面的步骤 2 和 3 相同）。右键单击要在其中使用 APK 扩展文件的 Android 项目，然后选择属性。在库面板中，

[http://developer.android.com/google/play/expansion-files.html#AboutLibraries](http://developer.android.com/google/play/expansion-files.html#AboutLibraries)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:53:27.283

您需要使用 Android SDK 管理器额外安装 Google Play APK 扩展库。它将安装在`<sdk>/extras/google/play_apk_expansion/`文件夹中。（如果您还没有安装，您还需要额外的 Google Market Licensing。）

该文件夹包含几个库项目：`downloader_library`和`zip_file`. 它还包含一个示例项目，`downloader_sample`设置为使用这些库。您可以将其用作设置自己项目的模式。

`ZipResourceFile`您询问的类是在`zip_file`库项目中定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:11:07.400

如果您使用的是 Eclipse，请为每个库创建一个项目并将其添加到您的应用程序中：

为许可证验证库和下载器库创建一个新的库项目。对于每个库：开始一个新的 Android 项目。选择 Create project from existing source 并从 /extras/google/ 目录中选择库（market_licensing/ 用于许可证验证库或 market_apk_expansion/downloader_library/ 用于下载器库）。指定项目名称，例如“Google Play License Library”和“Google Play Downloader Library”。单击 Finish。注意：下载程序库依赖于许可证验证库。确保将许可证验证库添加到下载器库的项目属性中（与下面的步骤 2 和 3 相同）。右键单击要在其中使用 APK 扩展文件的 Android 项目，然后选择属性。在库面板中，

[http://developer.android.com/google/play/expansion-files.html#AboutLibraries](http://developer.android.com/google/play/expansion-files.html#AboutLibraries)

实际上，我只是忽略了有关“指定项目名称，例如...”的内容，我只是使用了 gui 提出的默认名称。

# arrays - SML 中的数组函数

> ID：15491563
> 
> 赞同：0
> 
> 时间：2013-03-19T04:35:15.873
> 
> 标签：arrays, sml

我正在使用持久数组创建联合查找算法。以下是我可以使用的一些功能：

```
Array.sub : 'a array * int -> 'a
Array.update: 'a array * int * 'a -> unit 
```

我需要建一张桌子

```
 datatype 'a table = Array of 'a Array.array | Change of int * 'a * 'a table ref 
```

使用 Change 构造函数和库，从一个在恒定时间内只不同一个槽的现有槽

```
Array.tabulate : int * (int-> 'a)-> 'a array 
```

实现返回对大小为 n 的表的引用的函数，其中每个元素都是它自己的分区。

```
newTable : int -> int table ref 
```

这是我的尝试，但任何帮助将不胜感激，因为我真的很困惑：

```
fun newTable n = 
        if 0 = Array.sub(Array.tabulate (n,fn i => i), 0) 
            then () 
        else 
           ref(Change(Array.array(n))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:25:55.527

我不确定我是否正确理解了你的问题，但我会尝试从我认为你的问题想要你做的事情来回答。

如果您查看`newTable`签名，您可以看到它接受一个`int`on 输入，并返回一个`int table ref`. 您的解决方案返回`unit`，因此不会进行类型检查。

的目标`newTable`是在彼此不同的整数表上返回一个引用。您已经了解可以使用`Array.tabulate`. 但是您必须重新运行 a `table`，而不是`array`. 数据类型的定义`table`告诉我们如何使用 生成它`array`，所以你所要做的就是像这样包装你生成的数组：

```
fun newTable n = 
    ref (Array (Array.tabulate (n,fn i => i))) 
```

该`newTable`功能等效于[Union Find WP 文章中描述的](http://en.wikipedia.org/wiki/Union-Find)*MakeSet*操作，经过改进以生成整个集合而不是单例。

# ios - 在 iOS 设备上未收到但已发送的 APNS 消息

> ID：15491567
> 
> 赞同：4
> 
> 时间：2013-03-19T04:36:13.763
> 
> 标签：ios, xcode, push-notification, apple-push-notifications

我已经构建了一个应用程序，它有推送通知。我使用 WordPress 插件发送通知，通知已成功发送，但我的 iOS 设备未收到。

我有一个 VPS 服务器，带有端口、、`2195`和打开TCP 输入和输出。我还允许Apple 用于通知的整个 IP 地址块。`2196``5223``443``17.0.0.0/8`

我可以从我的服务器远程登录到 Apple 并在端口上成功连接`2195`：

```
telnet gateway.sandbox.push.apple.com 2195
Trying 17.172.233.65...
Connected to gateway.sandbox.push.apple.com.
Escape character is '^]'. 
```

我已经多次尝试使用`.pem`证书等......但我无法让它工作。这是我使用的第一个应用程序，所以我不太了解。

我已将该应用程序与 wp 插件一起发送给德国的一位朋友，他对其进行了测试并收到了与他的主机和 iPhone 配合使用的通知。

有什么我想念的吗？

# javascript - YouTube API onYouTubePlayerReady 未在 Chrome 中触发

> ID：15491574
> 
> 赞同：2
> 
> 时间：2013-03-19T04:36:49.890
> 
> 标签：javascript, google-chrome, youtube-api, swfobject

在我的网站上，我正在尝试制作一个带有多个链接的 youtube 视频播放器，以便在点击时加载不同的视频。到目前为止，它适用于 IE 和 Firefox，但我无法让它在 Chrome 中运行。我没有收到任何 JS 错误，但是通过使用警报进行测试，我发现`onYouTubePlayerReady`没有触发。这是我的代码：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2/swfobject.js"></script>
            <a name="ytplayer"></a>
            <div id="ytplayer_div">You need Flash player 8+ and JavaScript enabled to view this video.</div>
            <script type="text/javascript">
              swfobject.embedSWF(
                'http://www.youtube.com/v/vlArwl2EoDc&enablejsapi=1&rel=0&fs=1&hd=1',
                'ytplayer_div',
                '720',
                '400',
                '11',
                null,
                null,
                {
                  allowScriptAccess: 'always',
                  allowFullScreen: 'true'
                },
                {
                  id: 'ytplayer_object'
                }
              );
                              var myytplayer;
                              function onYouTubePlayerReady(playerId) {
                    myytplayer = document.getElementById("ytplayer_object");
                  }

              function ytplayer_loadvideo( id ) {
                if (myytplayer) {
                                  myytplayer.loadVideoById(id);
                                }
              }
            </script>
            <div>
            <a href="#ytplayer" onClick="ytplayer_loadvideo( 'vlArwl2EoDc' );"><img src="http://img.youtube.com/vi/vlArwl2EoDc/default.jpg" /></a> <a href="#ytplayer" onClick="ytplayer_loadvideo( 'G4EIgIEngKY' );"><img src="http://img.youtube.com/vi/G4EIgIEngKY/default.jpg" /></a> <a href="#ytplayer" onClick="ytplayer_loadvideo( 'wxXnf_oCRI4' );"><img src="http://img.youtube.com/vi/wxXnf_oCRI4/default.jpg" /></a>
            </div> 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:46:09.410

我测试了此页面中的代码：

[http://losmejoresavances.appspot.com/index2.html](http://losmejoresavances.appspot.com/index2.html)

.. Chrome 完美运行

我使用控制台检测到对函数 onYouTubePlayerReady 的调用

# windows - Windos Store App的音频频谱分析仪

> ID：15491576
> 
> 赞同：0
> 
> 时间：2013-03-19T04:37:09.283
> 
> 标签：windows, audio, windows-store-apps, analyzer, spectrum

我想将频谱分析仪添加到我的 Windows 应用商店应用程序中。有没有允许这样做的库？我使用 C#/XAML 编写我的应用程序。

PS不一定是频谱分析仪。它可以让我可视化音频流。例如，这个库可以获取每一刻的音频流频率或幅度。

# ms-access - 折叠表单中的类似记录

> ID：15491580
> 
> 赞同：0
> 
> 时间：2013-03-19T04:37:35.850
> 
> 标签：ms-access

我有以下数据：

```
Campus Edit Variable
A      1    Y
A      2    Y
B      1    N
B      2    N
C      1    Y
C      2    N 
```

我们正在审查校园正在使用的不同编辑变量。父表单是编辑。我想让子表单动态显示可能的变量（在本例中为 Y 或 N）以及使用该变量的校园数量，然后能够有一个列出校园的下拉列表。

例子：

```
Edit 1
  Variable Y: Count 2 -
    Campus A
    Campus C
  Variable N: Count 1 -
    Campus B 
```

有没有一种简单的方法可以做到这一点？我知道我可以使用很多子表单来完成此操作，但我需要构建此设置的十几种不同类型的变量。

# android - android wrt Orientation有问题吗

> ID：15491582
> 
> 赞同：0
> 
> 时间：2013-03-19T04:37:50.090
> 
> 标签：android, orientation, android-orientation

似乎至少在设备上的 android 中存在方向更改问题。当我导航到设置 - 应用程序 - 正在运行并选择 - 显示缓存的进程然后翻转它更改回的方向 - 显示正在运行的进程。我在我的应用程序中有一个用例，在其中我采用设备方向来显示一些选项，但这似乎并没有得到尊重。对此有任何建议，这可能是因为我提到的示例流程吗？我用它来获得方向：

```
getResources().getConfiguration().orientation 
```

这用于旋转：

```
Display display = ((WindowManager) context.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
int rotation = display.getRotation(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:01:33.653

您使用的是正确的，我使用两个的组合

```
int orientation = getResources().getConfiguration().orientation;
int rotation = getWindowManager().getDefaultDisplay().getOrientation(); 
```

现在使用它们来确定正确的方向

```
 if (rotation == Surface.ROTATION_0 || rotation == Surface.ROTATION_90) {
            if (orientation == Configuration.ORIENTATION_PORTRAIT) {
                // Portrait 
            }
            else if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
                // Landscape
            }
        }
        else if (rotation == Surface.ROTATION_180 || rotation == Surface.ROTATION_270) {
            if (orientation == Configuration.ORIENTATION_PORTRAIT) {
                //Mainly for tablets
            }
            else if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
               //Mainly for tablets
            }
        } 
```

# jquery - jquery在表单中分支

> ID：15491589
> 
> 赞同：1
> 
> 时间：2013-03-19T04:38:38.340
> 
> 标签：jquery

几个月前，我想我会“尝试”创建一个注册表单，除了复制和粘贴可以正常工作的代码到我的网页之外，完全没有使用 jquery 或 java 的经验。我做了一个非常漂亮的表格，但它不适用于验证。我有几个分支，即 2 个标记为业务和私人的单选按钮。如果您单击业务，它会询问一组问题，如果您单击私人另一组。我很难找到任何解释我如何“关闭”未使用的问题或如何做一个单独路径的分支的东西。如果有人可以将我引导到一个教程，该教程会给我一个很好的线索，或者任何其他帮助将不胜感激。这是我到目前为止的代码。

```
<HTML><HEAD><TITLE>Plans</TITLE>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Join Now</title>
<script type="text/javascript" src="js/jquery-1.5.2.min.js"></script>
<script type="text/javascript" src="js/jquery.validate.min.js"></script>
<script type="text/javascript" src="js/additional-methods.min.js"></script>

<script type="text/javascript">
    $(document).ready(function()
//1
    {
                $('.newp').hide();                  //hide all div 
                $('.tranp').hide();
                $('.bushom').hide();
                $('.diffadd').hide();
                $('.tac').hide();
                $('.conadd').hide();
                $('.subbut').hide();
                $('#newp').click(function()
                {
                        $('.tranp').slideUp('slow');        //where there is an alternate use slide
                        $('.newp').slideDown('slow');
            $('.bushom').show('slow');      //if no alternate use show. if it should not be shown in another sequence use hide
                });
                $('#tranp').click(function()
                {
                        $('.newp').slideUp('slow');
                        $('.tranp').slideDown('slow');
                        $('.bushom').show('slow');
                });     
//2
                $('.busu').hide();
                $('.homeu').hide();
                $('.tac').hide();
                $('.conadd').hide();
                $('.subbut').hide();
                $('#busu').click(function()
                {
        //        $('.newp').hide();
        //        $('.tranp').hide();
                        $('.homeu').slideUp('slow');
                        $('.busu').slideDown('slow');
            $('.diffadd').show('slow');
                });
                $('#homeu').click(function()
                {
        //        $('.newp').hide();                //an example of how we can hide completed pages so there is not to much on the screen
        //        $('.tranp').hide();
                        $('.busu').slideUp('slow');
                        $('.homeu').slideDown('slow');
            $('.diffadd').show('slow');
                });     
//3
                $('.addsame').hide();
                $('.adddif').hide();
                $('.conadd').hide();
                $('.tac').hide();
                $('.subbut').hide();
                $('#addsame').click(function()
                {
                        $('.conadd').hide('slow');          //here is an example where a page has to hide in one sequence but be shown in another
                        $('.tac').show('slow');
                });
                $('#adddif').click(function()
                {
                        $('.conadd').show('slow');
                        $('.tac').show('slow');
                });     

                $('.addsame').hide();
                $('.adddif').hide();
                $('.conadd').hide();
                $('.tac').hide();
                $('.agree').hide();
                $('.subbut').hide();
                $('#agree').click(function()
        {
                        $('.subbut').show('slow');
                });

/*
       $("#signupForm").validate({
                rules: {
                        stnantr: "required",
                        subtr: "required",
                        citytr: "required",
                        stnannw: "required",
                        suburbnw: "required",
                        citynw: "required"

newtran:
{
    required: function(){
        if($("select[name=newtran]").val() == 1){
            return true;
        }
        else
        {
            return false;
        }
    }
}

        $("#bushom").validate({
        if(newtran=='trans') {
                rules: {
            stnantr: "required",
            subtr: "required",
            citytr: "required"
                        }
                }
        else {
                rules: {
                        stnannw: "required",
                        suburbnw: "required",
                        citynw: "required"
                        }       

                },
                messages: {
            stnantr: "required",
                        subtr: "required",
                        citytr: "required",
            stnannw: "required",
                        suburbnw: "required",
                        citynw: "required"
                }
        });

*/
    });

</script>
<style type="text/css">
    #content { 
    width: 600px; 
    margin: 1px auto; 
    padding: 25px;
    color: #fff;
    border: 10px solid #666699;
    font-family: Helvetica, Arial, sans-serif; 
    font-size: 10px; 
    }
    h2 { 
        color: #666;
        font-family: Arial, Helvetica, sans-serif;
    font-size: 12px; 
        font-weight: bold;
    }
    .option {
    color: #555; 
    font-family: Helvetica, Arial, sans-serif; 
    font-weight: bold; 
    font-size: 10px; 
    margin-right: 20px; 
    }
    .detail {       
    width: 500px;  
    margin-bottom: 15px; 
    color: #333; 
    font-family: Helvetica, Arial, sans-serif; 
    font-size: 10px; 
    }
    a { 
    color: #3399CC; 
    text-decoration: none; 
    font-weight: bold; 
    }
    a:hover { 
    text-decoration: underline; 
    }
    label { 
        color: #666;
        font-family: Arial, Helvetica, sans-serif;
    font-weight: bold; 
    font-size: 10px; 
    }
    label.error {
        float: none;
        color: red;
        padding-left: .5em;
        vertical-align: top;
    }   

        legend {
        color: #666;
        font-family: Arial, Helvetica, sans-serif;
        font-weight: bold;

    font-size: 10px; 
    font-family: Helvetica, Arial, sans-serif; 
        }
    .input { 
    color: #666; 
    font-family: Arial, Helvetica, sans-serif; 
    border: 1px solid #336666;
    padding: 3px;
    margin-bottom: 5px;
    }
    input.button {
    background: #000;
    border: 1px solid #666;
    color: #fff;
    padding: 3px;
    font-size: 10px; 
        font-family: Arial, Helvetica, sans-serif;
    }

</style>

<META content="MSHTML 6.00.2462.0" name=GENERATOR></HEAD>
<BODY text=#666666 vLink=#800080 link=#0000FF bgColor=#006699 topMargin=0 marginwidth="0" marginheight="0">
<div style="background-image:url(images/bg.jpg);
    background-repeat:no-repeat;
    background-position:center;
    width:100%;
    height:100%;">
<TABLE bgColor=#ffffff cellSpacing=0 cellPadding=0 width=700 border=0 ALIGN="center">
      <TR> 
    <!--MAIN AD AREA--> 
    <TD vAlign=top align=top width=370 height="293"> 
        <div align="top"></div>

        <p align="top">
    <style='mso-bidi-font-weight:bold'><span style='font-size:18pt;font-family:Arial;mso-bidi-font-family:"Arial, Helvetica, sans-serif";color:blue'>Join Now
        <o:p></o:p></span></p>

        <div align="top"></div>
<div id="content">
    <form id="signupForm" method="POST" action="processform.php">
        <div>
             <fieldset>
        <legend>Question 1</legend><br />
                <div class="detail">Do you want to TRANSFER an EXISTING phone number <br />OR<br />
        Do you want to INSTALL a NEW Service</div><br />
                <input type="radio" name="newtran" value="tranp" id="tranp" /> <span class="option"> Transfer EXISTING Service</span>
        <input type="radio" name="newtran" value="newp" id="newp" /><span class="option"> Install a NEW Service</span>
        <br /><br />
            </fieldset>
        </div>

        <div class="tranp"><br />
            <fieldset>
                        <legend>TRANSFER an EXISTING Service</legend><br />
                        <label for="tranphtr">Existing Phone Number</label><br />
                        <input type="text" name="tranphtr" class="input" id="tranphtr"/><br />
                        <label for="cprovtr">Current Provider</label><br />
                        <input type="text" name="cprovtr" class="input" id="cprovtr"/><br />
                        <label for="anumtr">Account Number</label><br />
                        <input type="text" name="anumtr" class="input" id="anumtr"/><br />
            </fieldset>
            <br />
            <fieldset>
                        <legend>ADDRESS of EXISTING Service</legend><br />
                        <label for="stnantr">Street Number and Name</label><br />
                        <input type="text" name="stnantr" class="input" id="stnantr"/><br />
                        <label for="suburbtr">Suburb</label><br />
                        <input type="text" name="suburbtr" class="input" id="suburbtr"/><br />
                        <label for="citytr">City</label><br />
                        <input type="text" name="citytr" class="input" id="citytr" /><br />
                        <label for="pcodetr">Post Code</label><br />
                        <input type="text" name="pcodetr" class="input" id="pcodetr"/><br />
            </fieldset>
        </div>

        <div class="newp"><br />
                            <fieldset>
            <legend>Customer Service Agreement</legend><br />
            <div class="detail">
            When ordering a NEW phone service there is a right to recourse if the installation is delayed for any reason under the telecommunications act 
            called the CUSTOMER SERVICE AGREEMENT.<br /><br />
            If you require this protection against delays in connecting your new service please check the box labelled REQUIRE.<br /> <br />
            If you decide to waive your protection under the act please check the box labelled WAIVE.<br /> <br />
            There is a substantial difference in the price if you WAIVE your rights under the telecommunications act.<br /><br />
            It will take the same time to install the phone if you are covered or waive your rights the difference is you have a right to 
            recourse if there is an unforseen delay.</div><br /><br />
            <h2>WAIVE</h2>
                    <input type="radio" name="waivereq" value="waive" id="wav" /> <span class="option">
            I WAIVE the CUSTOMER SERVICE AGREEMENT and will pay an installation fee of $70</span><br /><br />
            <h2>REQUIRE</h2>
                    <input type="radio" name="waivereq" value="require" id="req" /><span class="option">
            I REQUIRE the CUSTOMER SERVICE AGREEMENT and will pay an installation fee of $200</span>
                            </fieldset>
                    <fieldset>
                        <legend>Enter the ADDRESS where the NEW phone service is LOCATED</legend><br />
                        <label>Street Number and Name</label><br />
                        <input type="text" name="stnannw" class="input" id="stnannw"/><br />
                        <label>Suburb</label><br />
                        <input type="text" name="suburbnw" class="input" id="suburbnw"/><br />
                        <label>City</label><br />
                        <input type="text" name="citynw" class="input" id="citynw" /><br />
                        <label>Post Code</label><br />
                        <input type="text" name="pcodenw" class="input" id="pcodenw"/><br />
                    </fieldset>
        </div>

            <br />
        <div class="bushom">
            <fieldset>
                        <legend>Question 2</legend><br />
            <div class="detail">Is this Phone Service for Home or Business Use <br /></div>
                    <input type="radio" name="hombus" value="homeuse" id="homeu" /> <span class="option">For Home Use</span>
            <input type="radio" name="hombus" value="bususe" id="busu" /><span class="option">For Business Use</span>
            <br />
            </fieldset>
        </div>
                <div class="homeu"><br />
                            <fieldset>
                                <legend>HOME Use</legend><br />
                    <label for="firstnamehm">Firstname:</label><br />
                                <input type="text" id="firstnamehm" class="input" name="firstnamehm" /> *<br />
                                <label for="lastnamehm">Lastname:</label><br />
                                <input type="text" id="lastnamehm" class="input" name="lastnamehm" /> *<br />
                                <label for="emailhm">Email:</label><br />
                                <input type="text" id="emailhm" class="input" name="emailhm" /><br />
                                <label for="phonehm">Contact Phone:</label><br />
                                <input type="text" id="phonehm" class="input" name="phonehm" /> *<br />     
                            </fieldset>
                </div>
                        <div class="busu"><br />
                                    <fieldset>
                                        <legend>BUSINESS Use</legend><br />
                        <div class="detail">
                        <fieldset>1\. For Business use the cost of the service is $6 extra per month
                        <br />This fee is for a standard entry in Yellow Pages<br /><br />
                        2\. The contact person should be the person responsible for making decisions and billing for this service.<br />
                        Usually the proprietor or a director of the business<br /> 
                        </fieldset>
                        <div><br />
                                        <label for="busnamebs">Business Name:</label><br />
                                        <input type="text" id="busnamebs" class="input" name="busnamebs" /> *<br />
                                        <label for="abnnbs">ABN:</label><br />
                                        <input type="text" id="abnnbs" class="input" name="abnnbs" /> *<br />
                                        <label for="firstnamebs">Firstname:</label><br />
                                        <input type="text" id="firstnamebs" class="input" name="firstnamebs" /> *<br />
                                        <label for="lastnamebs">Lastname:</label><br />
                                        <input type="text" id="lastnamebs" class="input" name="lastnamebs" /> *<br />
                                        <label for="emailbs">Email:</label><br />
                                        <input type="text" id="emailbs" class="input" name="emailbs" /><br />
                                        <label for="phonebs">Contact Phone:</label><br />
                                        <input type="text" id="phonebs" class="input" name="phonebs" /> *<br />
                                    </fieldset>
                        </div>
                        <br />
                <div class="diffadd">
                    <fieldset>
                <legend>Contact Address</legend><br />
                     <div class="detail">
                                           <fieldset>Is the SERVICE ADDRESS (above) the same as your CONTACT ADDRESS<br />
                                           </fieldset>
                                            <div><br />
                <input type="radio" name="adiff" value="addsame" id="addsame" /> <span class="option">YES</span>
                <input type="radio" name="adiff" value="adddif" id="adddif" /><span class="option">NO</span>
                <br />
               </fieldset>
           </div>
        <div class="conadd"><br />
                    <fieldset>
                        <legend>Contact Address</legend><br />
                        <label>Street Number and Name</label><br />
                        <input type="text" name="constreetnan" class="input" id="constreetnan"/><br />
                        <label>Suburb</label><br />
                        <input type="text" name="consuburb" class="input" id="consuburb"/><br />
                        <label>City</label><br />
                        <input type="text" name="concity" class="input" id="concity" /><br />
                        <label>Post Code</label><br />
                        <input type="text" name="conpcode" class="input" id="conpcode"/><br />
                    </fieldset>
        </div>

    <div class="tac"><br />
        <div class="detail">
                <fieldset>
                <legend>Customer Authority.</legend><br /><br />
            <textarea rows="15" cols="65" readonly>
Customer Authority.
AN AUTHORITY TO SUPPLY A NEW TELEPHONE SERVICE OR TRANSFER AN EXISTING SERVICE.

        </textarea><br /><br />
        <h2><input type="checkbox" name="agree" value="agree" id="agree">I agree to the Terms & Conditions.</h2><br /><br />
        </fieldset>
                </div>
        </div>
          <div class="subbut"><br />
                        <fieldset>
                        <input class="button" type="submit" value="Submit"/>
                        </fieldset>
          </div>

    </form>
</div> 
```

~结束剪辑

# php - CodeIgniter 中的会话处理

> ID：15491593
> 
> 赞同：0
> 
> 时间：2013-03-19T04:38:48.373
> 
> 标签：php, codeigniter, session, web-applications

您如何在 CodeIgniter 中登录应用程序的多用户（管理员、用户）中维护会话（设置会话 ID、获取会话 ID）？

我正在使用这个`if($this->session->userdata('logged_in') == '')`。但这不起作用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T06:05:08.047

尝试这个

```
 if ($this->session->userdata('logged_in')!=FALSE) {

        print_r($this->session->all_userdata());
    } 
```

所以你可以找到当前的用户数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:54:03.780

如果您之前已经定义了会话，

```
$this->session->set_userdata('logged_in', 'value'); 
```

然后检查会话是否设置正确，

```
if(isset($this->session->userdata('logged_in')) {

      if($this->session->userdata('logged_in') == '') {
           // Your Code
      }
} 
```

如果上面`isset()`返回**false**，那么您的会话设置不正确。检查那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T05:27:05.983

请加载**会话库**

根据您是否自动加载会话库，我们需要包括：

```
 $this->load->library('session'); 
```

然后你应该能够使用：

```
 $this->session->set_userdata('logged_in', 'some_value'); 
```

并检查是否设置了会话，只需使用

```
 if($this->session->userdata('logged_in')){
      //code for logged in 
   } 
```

如果还是不行，请**尝试清除浏览器缓存**

我希望它会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-15T11:17:33.717

首先，您必须检查您尝试检索的会话项目是否存在，然后将其与您想要的值进行比较。尝试这个：

```
if( $this->session->userdata("logged_in") !== FALSE ){
    if( $this->session->userdata("logged_in") == "admin" ){
        //logged in as admin
    }elseif( $this->session->userdata("logged_in") == "user" ){
        //logged in as user
    }
} 
```

还有一件事，

```
parent::__constructor(); 
```

line 应该始终是构造函数中的第一行代码，否则，您稍后会在代码中遇到很多错误

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T04:48:55.290

首先检查天气你已经加载了会话库..

如果您验证空白值那么您错了，请使用此

```
// to set the session data
$this->session->set_userdata('name', 'value');  // note u can also pass array

if(isset($this->session->userdata('name'))){

   //to read session data
   $this->session->userdata('name'); // note u can also pass array

   //to unset or delete
   $this->session->unset_userdata('name'); 
```

}

# r - R中的事件检测

> ID：15491594
> 
> 赞同：1
> 
> 时间：2013-03-19T04:38:51.150
> 
> 标签：r, detection

我有一个非常大的数据框，大约有 1000 行和 10000 列，每一列都是一个 ID，每一行代表一个日期。并且数据框中的每个单元格都可以作为截至该日期的特定问题到该 ID 的累积发生次数。

一个简化的数据如下：

```
Date       id1 id2 id3 id4 id5
2012-01-01   0   1   0   2   1
2012-01-02   0   2   0   2   2
2012-01-03   2   2   0   8   3
2012-01-04   2   2   1   8   4
2012-01-05   2   2   1   8   5
2012-01-06   4   3   1   8   6
2012-01-07   4   5   1  14   7
2012-01-08   5   8   1  16   8
2012-01-09   5   8   1  20   9
2012-01-10   5   9   1  20  10 
```

因此，对于单元格（“2012-01-05”，“id5”），这可能意味着从开始到该日期，id5 已售出 5 件商品，或者错误 id5 已发生 5 次，类似这样。

我将编写一个程序来检测任何异常事件并记录事件的 id、开始日期和结束日期。例如，id2 在 2012-01-08 发生了异常事件（2012-01-10 不计算，因为 id2 从 8 增加到 9 并不异常）；id4有两个异常事件，一个是在2012-01-03，另一个是从2012-01-07到2012-01-09

输出数据如下：

```
Event IDs Start_Date    End_Date  number_Unusual
    1 id2 2012-01-08  2012-01-08               5
    2 id4 2012-01-03  2012-01-03               6
    2 id4 2012-01-07  2012-01-09              12
    .... 
```

number_Unusual：在异常时间范围内发生的次数。

我正在使用以下方法： 1\. 计算累积百分比变化：

```
Date    id1 id2 id3 id4 id5
1/1/2012    0.00    0.11    0.00    0.10    0.10
1/2/2012    0.00    0.22    0.00    0.10    0.20
1/3/2012    0.40    0.22    0.00    0.40    0.30
1/4/2012    0.40    0.22    1.00    0.40    0.40
1/5/2012    0.40    0.22    1.00    0.40    0.50
1/6/2012    0.80    0.33    1.00    0.40    0.60
1/7/2012    0.80    0.56    1.00    0.70    0.70
1/8/2012    1.00    0.89    1.00    0.80    0.80
1/9/2012    1.00    0.89    1.00    1.00    0.90
1/10/2012   1.00    1.00    1.00    1.00    1.00 
```

2\. 找出固定时间范围内的差异，比如 3 天的差异：

```
Date    id1 id2 id3 id4 id5
1/4/2012    0.40    0.11    1.00    0.30    0.30
1/5/2012    0.40    0.00    1.00    0.30    0.30
1/6/2012    0.40    0.11    1.00    0.00    0.30
1/7/2012    0.40    0.33    0.00    0.30    0.30
1/8/2012    0.60    0.67    0.00    0.40    0.30
1/9/2012    0.20    0.56    0.00    0.60    0.30
1/10/2012   0.20    0.44    0.00    0.30    0.30 
```

3.到目前为止，我已经到了这里，下一步我将找出任何不寻常的大值，这样就有可能发生不寻常的事件。我知道我可以使用一些 for 循环来完成我的任务，例如，对于 id2，我知道它的增量大于 0.2 是不常见的，所以：

```
event <- c(0)
ids   <- c(0)
start <- c("")
end   <- c("")
for (id in c(id1:id5))
  for (date in 2012-01-04:2012-01-10)
    if value[date, id] > 0.2
      event <- event + 1 
      ids[event] <- id
      start[event] <- date
      end[event]   <- 2012-01-10
      for (date2 in date:2012-01-10)
         if value[date2, id] <= 0.2 {
            end[event]   <- date2
            skip
         } 
```

对不起，如果上面的伪代码有任何错误，我只是想表明我的想法。

现在我的问题是，除了使用这个愚蠢的 for 循环之外，您能否建议任何智能算法，以便我可以完成相同的任务，即在数据集中找到所有不寻常的事件。

另外，我知道我使用累积百分比的方法不是很好，如果您有其他建议，我也愿意倾听和学习。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:20:28.097

您可以通过将数据转换为 a 来简化代码`matrix`，然后使用`apply()`它来获取运行分数并`diff()`计算差异。

重新创建您的数据：

```
x <- read.table(tex='
Date       id1 id2 id3 id4 id5
2012-01-01   0   1   0   2   1
2012-01-02   0   2   0   2   2
2012-01-03   2   2   0   8   3
2012-01-04   2   2   1   8   4
2012-01-05   2   2   1   8   5
2012-01-06   4   3   1   8   6
2012-01-07   4   5   1  14   7
2012-01-08   5   8   1  16   8
2012-01-09   5   8   1  20   9
2012-01-10   5   9   1  20  10
', header=TRUE) 
```

然后设置一个函数来进行差分：

```
foo <- function(x, periods=3, exception=0.1){
  xm <- as.matrix(x)
  xp <- apply(xm, 2, function(z)z/tail(z, 1))
  diff2 <- diff(diff(xp, periods), 1)
  NAs <- matrix(NA, ncol=ncol(x), nrow=3)
  rbind(NAs, abs(diff2) > exception)
} 
```

你得到：

```
foo(x[, -1], periods=3, exception=0.2)

        id1   id2   id3   id4   id5
 [1,]    NA    NA    NA    NA    NA
 [2,]    NA    NA    NA    NA    NA
 [3,]    NA    NA    NA    NA    NA
 [4,] FALSE FALSE FALSE FALSE FALSE
 [5,] FALSE FALSE FALSE  TRUE FALSE
 [6,] FALSE  TRUE  TRUE  TRUE FALSE
 [7,] FALSE  TRUE FALSE FALSE FALSE
 [8,]  TRUE FALSE FALSE FALSE FALSE
 [9,] FALSE FALSE FALSE  TRUE FALSE 
```

**编辑**

要找出元素是否为真，请使用and`which`将结果包装在另一个`apply()`中：`paste()``which()`

```
z <- foo(x[, -1], periods=3, exception=0.2)
apply(z, 2, function(x)paste(which(x), collapse="_"))

    id1     id2     id3     id4     id5 
    "8"   "6_7"     "6" "5_6_9"      "" 
```

# java - 在简单的 Java Calculator 中将 * 作为命令行参数传入

> ID：15491596
> 
> 赞同：2
> 
> 时间：2013-03-19T04:39:25.533
> 
> 标签：java

所以，这个问题是基本的。在下面的代码中，当我传递命令行参数时`java CommandLineDemo 3 5 *`，我当前目录中的文件名被列出。在谷歌做一些研究我发现我们应该在命令行中`*`提供。`'*'`

我的问题是，如何修改我的代码以使其`'*'`在命令行中接受并执行`operand1`和`operand2`

```
class CommandLineDemo {
    public static void main(String[] args) {
        int operand1 = Integer.parseInt(args[0]);
        int operand2 = Integer.parseInt(args[1]);
        char theOperator = args[2].charAt(0);
        System.out.print(args[0] + args[2] + args[1] + " = ");
        switch(theOperator) {
            case ('+'):
                System.out.println(operand1 + operand2); break;
            case ('-'):
                System.out.println(operand1 - operand2); break;
            case ('*'):
                System.out.println(operand1 * operand2); break;
            case ('/'):
                System.out.println(operand1 / operand2); break;
            default:
                System.out.println("Invalid Operator selected");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:44:18.877

您可以尝试使用以下修改后的代码将命令行参数作为单个字符串（例如：“2 3 +”）传递。

```
import java.util.Arrays;

class CommandLineDemo {

    public static void main(String[] args) {

        String strArray = Arrays.toString(args);
        strArray = strArray.replace("[", "").replace("]", "").replaceAll("[, ]", "");
        String[] splits = strArray.split("");

        int operand1 = Integer.parseInt(splits[1]);
        int operand2 = Integer.parseInt(splits[2]);
        char theOperator = splits[3].charAt(0);

        System.out.print(splits[1] + " " + splits[3] + " " + splits[2] + " = ");

        switch(theOperator) {
            case ('+'):
                System.out.println(operand1 + operand2); break;
            case ('-'):
                System.out.println(operand1 - operand2); break;
            case ('*'):
                System.out.println(operand1 * operand2); break;
            case ('/'):
                System.out.println(operand1 / operand2); break;
            default:
                System.out.println("Invalid Operator selected");
        }
    }
} 
```

**用法和输出如下所示：**

```
C:\Users\sarath_sivan\Desktop>java CommandLineDemo "2 3 +"
2 + 3 = 5

C:\Users\sarath_sivan\Desktop>java CommandLineDemo "2 3 -"
2 - 3 = -1

C:\Users\sarath_sivan\Desktop>java CommandLineDemo "2 3 *"
2 * 3 = 6

C:\Users\sarath_sivan\Desktop>java CommandLineDemo "2 3 /"
2 / 3 = 0

C:\Users\sarath_sivan\Desktop>java CommandLineDemo "2 3 a"
2 a 3 = Invalid Operator selected

C:\Users\sarath_sivan\Desktop> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:45:54.987

`*`是 shell 中的元字符，这意味着它具有特殊含义。`\`因此，您需要使用No need to modify code来转义它，而只需键入`\*`意味着`*`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T04:46:52.930

你不需要扩展你的程序。`*`原样传递`'*'`是因为shell（或者更准确地说是Linux shell，对windows cmd :p 知之甚少）会进行[文件名扩展](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_04.html)，如果`*`直接传递，它将被扩展为当前目录下的所有文件。`'*'`防止这种情况并`*`作为命令行参数传递给您的程序。

# ruby-on-rails - 为什么我得到# 作为 Rspec 测试中的路径？

> ID：15491597
> 
> 赞同：0
> 
> 时间：2013-03-19T04:39:31.570
> 
> 标签：ruby-on-rails, rspec, capybara

我正在尝试测试当前路径，并检查它是否打开`post_path(post)`。我很确定测试应该通过。但我越来越`got: #<Capybara::Session> (using ==)`。我真的不明白这是什么。

这是测试代码

```
require 'spec_helper'

describe PostsController do
  subject { page }

  let(:first_user_is_admin) { FactoryGirl.create(:user) }

  describe "Not signed in user cannot see any kind of edit view for a post:" do

    describe "Post is anonymous without user_id" do
      let(:post) {FactoryGirl.create(:anonymous_post)}
      before do
        visit edit_post_path(post)
      end
      it { should == post_path(post) }
    end

  end
end 
```

这是测试结果。

```
1) PostsController Not signed in user cannot see any kind of edit view for a post: Post is anonymous without user_id 
   Failure/Error: it { should == post_path(post) }
     expected: "/posts/1"
          got: #<Capybara::Session> (using ==)
     Diff:
     @@ -1,2 +1,2 @@
     -"/posts/1"
     +#<Capybara::Session> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:13:24.570

您正在对本节中的页面运行测试

```
subject { page } 
```

您需要在本节中专门引用您正在测试的变量

```
it { should == post_path(post) } 
```

IE

```
it { variable.should == post_path(post) } 
```

当前的测试正在做的就是这个

```
it { page.should == post_path(post) } 
```

所以你需要明确说明你想要测试的对象。Capybara 支持以下（取决于您使用的版本）

```
it { current_path.should == post_past(post) } 
```

或者

```
 it { current_url.should == post_past(post) } 
```

# xslt-1.0 - XProc: XD0001 如果非 XML 资源在步骤输出中生成或到达步骤输入，则为动态错误

> ID：15491601
> 
> 赞同：1
> 
> 时间：2013-03-19T04:39:39.007
> 
> 标签：xslt-1.0, xproc

**要求：** 是在输出xml上添加正确的Doctype声明【输入xml的根元素可以是*chample*或*section*元素】

*输入 XML：chapter.xml*

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "docbookx.dtd">
<chapter>
    <title>Chapter Template Title</title>
    <para>Text</para>
    <section>
        <title>Section Title</title>
        <para>Section text</para>
    </section>
</chapter> 
```

*XSLT 文件：test.xsl：*

1.  样式表只是将输入 xml 复制到输出并在所有元素上添加 @sec
2.  样式表将正确的 doctype 声明添加到输出 xml，因为输入 xml 根元素可以是 <chapter> 或 <section> 元素

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

    <xsl:template name="add-doctype-declaration">
        <xsl:choose>
            <xsl:when test="/chapter">
                <xsl:text disable-output-escaping="yes">
    &lt;!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "docbookx.dtd"&gt;
    </xsl:text>
            </xsl:when>
            <xsl:when test="/section">
                <xsl:text disable-output-escaping="yes">
    &lt;!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "docbookx.dtd"&gt;
    </xsl:text>
            </xsl:when>
        </xsl:choose>
    </xsl:template>

    <xsl:template match="/">
        <xsl:call-template name="add-doctype-declaration"/>
        <xsl:apply-templates/>
    </xsl:template>

    <!-- Identity Template -->
    <xsl:template match="@*|*|processing-instruction()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="section">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
            <xsl:attribute name="sec">
                <xsl:number/>
            </xsl:attribute>
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>

    </xsl:stylesheet> 
    ```

# 预期输出.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "docbookx.dtd">
<chapter>
    <title>Chapter Template Title</title>
    <para>Text</para>
    <section sec="1">
        <title>Section Title</title>
        <para>Section text</para>
    </section>
</chapter> 
```

**使用任何 XSLT 引擎，转换工作都非常好，并且能够获得预期的输出**

但是，如果转换是通过 XProc 完成的，我最终会出现以下错误。有人可以帮助解决此错误吗

> err:XD0001 : XD0001 如果非 XML 资源在步骤输出中生成或到达步骤输入，则为动态错误。

*XProc 文件：test.xpl*

```
<?xml version="1.0" encoding="UTF-8"?>
<p:declare-step xmlns:p="http://www.w3.org/ns/xproc"
    xmlns:c="http://www.w3.org/ns/xproc-step" version="1.0" name="testing">
    <p:input port="source">
       <p:document href="chapter.xml"/>
    </p:input>
    <p:output port="result">
        <p:empty/>
    </p:output>

    <p:xslt version="1.0" name="transform">
        <p:input port="stylesheet">
            <p:document href="test.xsl"/>
        </p:input>
        <p:input port="parameters">
            <p:empty/>
        </p:input>
    </p:xslt>

    <p:store omit-xml-declaration="false" encoding="utf-8" name="serialize">
        <p:with-option name="href" select="output.xml"/>
    </p:store>

</p:declare-step> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T00:01:20.940

这是两个简单的示例，表明您不需要将 Doctype 生成上下文化

第 [http://www.sharexml.com/x/get?k=uWn0KA7RThnt](http://www.sharexml.com/x/get?k=uWn0KA7RThnt)

章节[http://www.sharexml.com/x/get?k=wAJlbUJfzIYQ](http://www.sharexml.com/x/get?k=wAJlbUJfzIYQ)

希望这可以帮助

[回答后更新]

如果您希望该文档类型动态更改

第[http://www.sharexml.com/x/get?k=pBAwCds86RnQ](http://www.sharexml.com/x/get?k=pBAwCds86RnQ)

第[http://www.sharexml.com/x/get?k=JHEWghzgWIq1](http://www.sharexml.com/x/get?k=JHEWghzgWIq1)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:29:19.127

这里的问题是您在此处创建的文档类型作为 XSLT 步骤结果的一部分传递给 XProc 引擎。但是，它是作为根元素***之外的字符数据传递的。***XProc 不允许这样做。

方法实际上有两个问题：

*   不要使用 disable-output-escaping 除非你不能做任何其他事情。该`xsl:output`指令具有创建所需文档类型的完美方法，只需为其添加一个 public-doctype 和 system-doctype 属性。
*   XSLT 的输出选项将被忽略，因为结果实际上不是由 XSLT 引擎序列化，而是由 XPRoc。因此，您必须将这些 doctype 属性放在`p:store`步骤上，以使其在 XProc 中工作。

！

# css - 显示具有 css 渐变效果的图像

> ID：15491604
> 
> 赞同：1
> 
> 时间：2013-03-19T04:39:55.917
> 
> 标签：css, linear-gradients

我正在将 css 渐变效果应用于表格的“th”列，如下所示，

```
 background: -moz-linear-gradient(top,white 5%,#D6DFE3);
    background: linear-gradient(top,white 5%,#D6DFE3); 
```

后来我必须附加一个类，其css类似于我想在其中显示图像的东西

```
.Img
{
  background-image:url(../images/asc.png);
  background-color:Green;
} 
```

我将**.Img 类**附加到**th**。但是由于渐变效果，图像没有显示。我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:41:57.447

您可以使用`<img>`标签中的标签`<th>`或任何其他标签，如`<span>`或`<button>`并为其提供所需的背景样式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T06:52:51.647

我解决了这个问题

```
th{
    background: -moz-linear-gradient(top,white 5%,#D6DFE3);
    background: linear-gradient(top,white 5%,#D6DFE3);
}

.Img
{
  background :url(../images/asc.png),  -moz-linear-gradient(top,gray 5%,#D6DFE3) !important;
  background: url(../images/asc.png), linear-gradient(top,gray 5%,#D6DFE3) !important;

  background-position:right center !important;
  background-repeat:no-repeat !important;
} 
```

**!important**标签对我有用。我能够用 !important 覆盖这些行为

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T04:53:37.727

尝试这个：

```
th{
    background: -moz-linear-gradient(top,white 5%,#D6DFE3);
    background: linear-gradient(top,white 5%,#D6DFE3);
    z-index:-1;
}
.Img
{
    background-image:url(../images/asc.png);
    background-color:Green;
    z-index:1;position:absolute;
} 
```

# c# - 转换数据绑定值类型

> ID：15491605
> 
> 赞同：0
> 
> 时间：2013-03-19T04:40:15.530
> 
> 标签：c#, wpf, data-binding, casting

我有一个`Slider`控件和一个`TextBlock`显示`Slider`通过数据绑定的值的控件。

问题是它显示一个浮点数，我对一个整数感兴趣。

我想将浮点数转换为整数，所以我不会在 中看到`45.25139664804483`，`TextBlock`我只会看到`45`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T05:27:16.870

您可以`StringFormat`在`TextBlock`绑定上使用来格式化小数位

```
<StackPanel>
    <TextBlock Text="{Binding Value, ElementName=slider/>
    <TextBlock Text="{Binding Value, ElementName=slider, StringFormat={}{0:0}}" />
    <Slider x:Name="slider" />
</StackPanel> 
```

结果：

![在此处输入图像描述](../Images/ddba49ccce2bc11fe4696183259cb7d8.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T04:45:03.140

试试这个`Slider_ValueChanged`

```
textBox.Value = (int)Math.Ceiling(45.25139664804483); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T04:44:14.240

```
 private void Slider_ValueChanged_1(object sender, RoutedPropertyChangedEventArgs<double> e)
 {
      myTextBlock.Text = Convert.ToInt32(Math.Floor(e.NewValue));
 } 
```

希望这可以帮助。带绑定：

```
int _myValue;
public int MyValue{get{return _myValue;}set{_myValue = value; NotifyPropertyChanged("MyValue");}}

  private void Slider_ValueChanged_1(object sender, RoutedPropertyChangedEventArgs<double> e)
     {
          MyValue = Convert.ToInt32(Math.Floor(e.NewValue));
     }

        public event PropertyChangedEventHandler PropertyChanged;

        private void NotifyPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        } 
```

在这种情况下，您的类需要实现`INotifyPropertyChanged`接口

# sql - 查找不包含特定日期的行数？

> ID：15491613
> 
> 赞同：0
> 
> 时间：2013-03-19T04:40:53.983
> 
> 标签：sql

我正在尝试计算在特定日期（例如 13 年 10 月 25 日）没有借出视频的人数。我有一个**dateout**和**datein**字段，但我一生无法确定要采取哪些步骤继续，因为我没有可使用的范围，只有特定的日期。

我想如果我能找出那天有多少物品出来，那么我就不能查询了，但我仍然坚持原来的问题。

最简单的检查方法是什么？

我正在使用 SQL 开发人员 该表由 ItemNo、CardNo、DateOut、DateIn 组成。

我在想一个 BETWEEN 但仅适用于一个范围并且使用相同日期的 AFAIK 似乎不起作用。我不太了解日期如何工作 TBH。

理想情况下，最终结果将是在特定日期没有 ItemNo 的所有唯一 CardNo 的计数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:57:46.397

只是基于猜测你可能需要什么，我当然不完全理解你的问题。

```
 select count(distinct people) 
    from tableName 
    where '25-OCT-2013' not between DateOut and DateIN
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:08:18.963

要查找在特定日期没有借出视频的人数，您需要知道有多少人拥有一张卡，以及有多少人在特定日期有借出视频。

你似乎有两张桌子：

*   持卡人：卡号，...
*   LoanItem: CardNo, ItemNo, DateIn, DateOut, ...

所以，持卡人的数量是：

```
SELECT COUNT(*) FROM CardHolder 
```

2013 年 10 月 25 日有一件或多件物品被借出的人数为：

```
SELECT COUNT(DISTINCT CardNo)
  FROM LoanItem
 WHERE DATE '2013-10-25' BETWEEN DateOut AND DateIn 
```

所以，你需要：

```
SELECT (SELECT COUNT(*) FROM CardHolder) -
       (SELECT COUNT(DISTINCT CardNo)
          FROM LoanItem
         WHERE DATE '2013-10-25' BETWEEN DateOut AND DateIn
       ) 
```

您可能需要为 SELECT 提供一个表——这取决于您的 DBMS。

```
SELECT (SELECT COUNT(*) FROM CardHolder) -
       (SELECT COUNT(DISTINCT CardNo)
          FROM LoanItem
         WHERE DATE '2013-10-25' BETWEEN DateOut AND DateIn
       )
  FROM Dual; 
```

或任何其他 1 行表。

# java - 对多项式求导（无效版本）

> ID：15491617
> 
> 赞同：0
> 
> 时间：2013-03-19T04:41:05.173
> 
> 标签：java, linked-list

我需要编写一个通过修改当前多项式来求导的方法。我可以写一个与返回类型一起工作的。这是代码：

```
public PolynomialSortedList differentiate() {

    PolynomialSortedList res = new PolynomialSortedList();

       for(PolyNode tmp = poly; tmp != null; tmp = tmp.next)
        {
           if(tmp.exp != 0)
              res.addTerm(tmp.coef * tmp.exp, tmp.exp - 1 );

        }
       return res;
} 
```

如何使用代码的上半部分将其变为 void：

```
public class PolynomialSortedList implements Polynomial {
    private PolyNode poly;
    private double TOLERANCE = 0.00000001;

    public PolynomialSortedList() { 
        poly = null;
     }

    private static class PolyNode {
        int coef;
        int exp;
        PolyNode next;

        PolyNode(int coef, int exp,PolyNode next) {
            this.coef = coef;
            this.exp  = exp;
            this.next = next;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:52:29.870

假设您通过说来区分，那么您可以尝试与`myPolyList.differentiate();`交换。唯一的问题是，现在这不太行得通，因为你无法从 polyList 中获取第一个 poly。`return res;``this.poly = res.poly;``poly``private`

编辑：有关如何设置程序的更多信息将帮助我给出更具体的答案。

# jsp - 在 jsp 页面中显示错误消息时需要帮助

> ID：15491622
> 
> 赞同：1
> 
> 时间：2013-03-19T04:41:34.783
> 
> 标签：jsp, validation, struts2, jsp-tags

我是 struts 2 的新手。我只是尝试使用 validation.xml 文件验证表单，它工作正常。

但错误消息显示在文本字段的顶部。需要在测试字段的右侧用红色字体显示这些错误消息。

我的jsp代码（index.jsp）

```
<s:form action="addEmp" method="post">
      <s:textfield name="name" label="Name" size="20" />
      <s:textfield name="age" label="Age" size="20" />
      <s:select name="gender" headerKey="0" headerValue="Select Gender"
     label="gender" list="#{'1':'Male','2':'Female'}" />

      <s:textfield name="email" label="Email" size="20" />
      <s:textfield name="phone" label="Phone_Number" size="20" />
      <s:textfield name="address" label="Address" size="20" />
      <s:submit name="submit" label="Login" align="center" />  
   </s:form> 
```

我的动作类（Employee.java）：

```
package com.tutorialspoint.struts2;
import com.opensymphony.xwork2.ActionSupport;

public class Employee extends ActionSupport{

   public String addEmployee()
   {
       return SUCCESS;
   }

} 
```

struts.xml 文件：

```
<action name="addEmp" 
   class="com.tutorialspoint.struts2.Employee"
  method="addEmployee"  >
   <result name="input">/index.jsp</result>
  <result name="success">/success.jsp</result>
</action> 
```

和 Employee-validation.xml 文件：

```
 <validators>
       <field name="name">
          <field-validator type="requiredstring">
             <message>
                The name is required.
             </message>
          </field-validator>
       </field>

       <field name="gender">
         <field-validator type="int">
         <param name="min">1</param>
             <message>
                Please select a value
             </message>
          </field-validator>
       </field>

       <field name="email">
          <field-validator type="requiredstring">
             <message>
                The email is required.
             </message>
          </field-validator>
         <field-validator type="email">
             <message>
                Please enter a valid email ID
             </message>
          </field-validator>
       </field> 
```

请帮我这样做..提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:57:07.963

这是由于 Struts2 使用了默认主题。请记住，struts2 使用主题布局根据您使用的标签生成 HTML，并将为您创建默认布局。

默认情况下 Struts2 使用`xhtml theme`这意味着它将创建某种`table, tr and td`. 只需查看生成的源代码，您就可以看到发生了什么。

我建议切换`simple theme`，它可以让您使用自定义 CSS 控制布局。

看看[主题](http://struts.apache.org/development/2.x/docs/themes-and-templates.html)以及它们是如何工作的，我相信它会帮助你获得一个想法

# php - php正则表达式匹配短标签

> ID：15491623
> 
> 赞同：3
> 
> 时间：2013-03-19T04:41:39.010
> 
> 标签：php, regex

这很接近，但无法匹配连续的“属性”：

```
$string = "single attribute [include file=\"bob.txt\"] multiple attributes [another prop=\"val\" attr=\"one\"] no attributes [tag] etc";
preg_match_all('/\[((\w+)((\s(\w+)="([^"]+)"))*)\]/', $string, $matches, PREG_SET_ORDER);
print '<pre>' . print_r($matches, TRUE) . '</pre>'; 
```

回馈以下内容：

```
Array
(
    [0] => Array
        (
            [0] => [include file="bob.txt"]
            [1] => include file="bob.txt"
            [2] => include
            [3] =>  file="bob.txt"
            [4] =>  file="bob.txt"
            [5] => file
            [6] => bob.txt
        )

    [1] => Array
        (
            [0] => [another prop="val" attr="one"]
            [1] => another prop="val" attr="one"
            [2] => another
            [3] =>  attr="one"
            [4] =>  attr="one"
            [5] => attr
            [6] => one
        )

    [2] => Array
        (
            [0] => [tag]
            [1] => tag
            [2] => tag
        )

) 
```

其中[2]是标签名，[5]是属性名，[6]是属性值。

故障发生在第二个节点上 - 它捕获`attr="one"`但没有`prop="val"`

蒂亚。

（这仅用于有限的、受控的使用——不是广泛分布——所以我不需要担心单引号或转义的双引号）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:49:21.607

不幸的是，没有办法重复这样的捕获组。就个人而言，我会使用`preg_match`匹配标签本身（即删除正则表达式中的所有额外括号），然后 foreach 匹配您可以提取属性。像这样的东西：

```
$string = "single attribute [include file=\"bob.txt\"] multiple attributes [another prop=\"val\" attr=\"one\"] no attributes [tag] etc";
preg_match_all('/\[\w+(?:\s\w+="[^"]+")*\]/', $string, $matches);
foreach($matches[0] as $m) {
    preg_match('/^\w+/', $m, $tagname); $tagname = $tagname[0];
    preg_match_all('/\s(\w+)="([^"]+)"/', $m, $attrs, PREG_SET_ORDER);
    // do something with $tagname and $attrs
} 
```

请注意，如果您打算用一些内容*替换*标签，您应该`preg_replace_callback`像这样使用：

```
$string = "single attribute [include file=\"bob.txt\"] multiple attributes [another prop=\"val\" attr=\"one\"] no attributes [tag] etc";
$output = preg_replace_callback('/\[\w+(?:\s\w+="[^"]+")*\]/', $string, function($match) {
    preg_match('/^\w+/', $m, $tagname); $tagname = $tagname[0];
    preg_match_all('/\s(\w+)="([^"]+)"/', $m, $attrs, PREG_SET_ORDER);
    $result = // do something with $tagname and $attrs
    return $result;
}); 
```

# cordova - Phonegap 和 Jquery Mobile 输入带有文本占位符的数字

> ID：15491626
> 
> 赞同：2
> 
> 时间：2013-03-19T04:41:44.040
> 
> 标签：cordova, jquery-mobile

我有一个输入类型“数字”，我需要占位符：DD 代表日，MM 代表月，YYYY 代表年。在 Chrome 中，它确实显示了占位符，但如果我尝试 input="number" 和 placeholder="DD"，当我在我的 Android 设备上运行它时，它会显示该字段为空。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:56:43.313

较旧的 WebKit 不支持 type=number 的占位符。

# extjs - Sencha Touch Select Field (selectfield) 设置默认选择值，而该值不在商店中

> ID：15491627
> 
> 赞同：2
> 
> 时间：2013-03-19T04:41:48.237
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我有一个包含以下数据的性别商店：

```
data: [
    {
        Value: 'Male',
        Display: 'Male',
        DisplayOrder: 1
    },
    {
        Value: 'Female',
        Display: 'Female',
        DisplayOrder: 2
    }
] 
```

我希望能够拥有一个具有默认选定值/占位符为“选择性别”的性别选择字段，而不必将“选择性别”添加到性别商店，因为我不希望它成为可选值。我试过使用`value`但`placeholder`无济于事。有没有一种简单的方法可以做到这一点？

```
{
    xtype: 'selectfield',
    label: 'Gender',
    name: 'Gender',
    displayField: 'Display',
    valueField: 'Value',
    store: 'GenderStore',
    value: 'Select a value', // no effect
    placeHolder: 'Select a value' // no effect
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T04:47:06.773

我在发布后不久就找到了答案。希望对其他人有帮助：

```
{
    xtype: 'selectfield',
    label: 'Gender',
    name: 'Gender',
    displayField: 'Display',
    valueField: 'Value',
    store: 'GenderStore',
    autoSelect: false,
    placeHolder: 'Select a gender'
} 
```

# jquery - 如何等待来自 Web 服务的响应并在 Jquery 中调用另一个 Web 服务

> ID：15491630
> 
> 赞同：0
> 
> 时间：2013-03-19T04:42:08.137
> 
> 标签：jquery, asp.net

我正在创建一个 Web 应用程序，并且我有 4 个 Web 服务。

1.  拨打电话
2.  获取振铃状态
3.  已回答状态
4.  挂断

我希望当我从 jquery 执行第一个 Web 服务时，它应该等待响应，然后检查另一个 Web 服务并异步获取状态。

目前我正在使用 .

```
function InfoByDate(){
    var divToBeWorkedOn = "#AjaxPlaceHolder";
    var webMethod = "http://MyWebService/Web.asmx/GetInfoByDates";
    var parameters = "{}";

    $.ajax({
        type: "POST",
        url: webMethod,
        data: parameters,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function(msg) {    
            $(divToBeWorkedOn).html(msg.d);
        },
        error: function(e){
            $(divToBeWorkedOn).html("Unavailable");              
        }
    });
} 
```

你能建议点什么吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:40:45.840

“我怎样才能**继续检查**”的术语是轮询。如果你想轮询网络服务，你可以使用[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval?redirectlocale=en-US&redirectslug=window.setInterval)如下。

```
setInterval(function() {
  //call your webservice here
}, 5000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:46:39.067

在 jQuery 中使用以下内容

```
async: false, 
```

作为

```
 $.ajax({
    type: "POST",
    url: webMethod,
    data: parameters,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    async: false,
    success: function(msg) {    
        $(divToBeWorkedOn).html(msg.d);
    },
    error: function(e){
        $(divToBeWorkedOn).html("Unavailable");     
        //call you second function here
    }
}); 
```

更多细节
[jQuery.ajax() 中的“async: false”有什么作用？](https://stackoverflow.com/questions/1478295/what-does-async-false-do-in-jquery-ajax)
[$.ajax( { async : false } ) 请求仍在异步触发？](https://stackoverflow.com/questions/1531693/ajax-async-false-request-is-still-firing-asynchronously)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:36:54.733

调用 Web 服务并在其成功处理程序中调用其他 Web 服务完全是同步调用。无论第一个服务是否成功，调用第二个 Web 服务都是异步调用。

```
 $.ajax({
    type: "POST",
    url: webMethod,
    data: parameters,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    async: false,
    success: function(msg) {    
        $(divToBeWorkedOn).html(msg.d);
     //**call to second service**
    },
    error: function(e){
        $(divToBeWorkedOn).html("Unavailable");     
        //call you second function here
    }
}); 
```

用于所有服务调用的同步调用集和jquery ajax 内`Async:false`的异步调用集`Async:true`

# asp.net-mvc - Telerik ASP.NET MVC 4 有免费版本吗？

> ID：15491633
> 
> 赞同：1
> 
> 时间：2013-03-19T04:42:39.140
> 
> 标签：asp.net-mvc, telerik, telerik-mvc

我将使用 VS2012 开发 ASP.NET MVC 4。我听说 Telerik 发布了一些 Telerik MVC 4 的免费版本。我到处搜索，但我找不到。有人有经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:41:20.413

没有适用于 ASP.NET MVC 4 的 Telerik Extensions 版本。但是，您可以毫无问题地使用 ASP.NET MVC 3 版本。您需要将以下绑定重定向添加到您的 web.config：

```
<configuration>
  <!--... elements deleted for clarity ...-->
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

# sammy.js - sammy.js ：骆驼案网址

> ID：15491634
> 
> 赞同：4
> 
> 时间：2013-03-19T04:42:44.930
> 
> 标签：sammy.js

如何强制 sammy.js 将 url 识别为与 url`/Brief`相同`/brief`？

```
this.get('/brief', function(context) {
    console.log("BRIEF");
}); 
```

我有我的 CMS 设置来生成小写 url，但是如果用户输入一个骆驼大小写格式的 url，我会收到错误：

```
Tue Mar 19 2013 15:39:31 GMT+1100 (AUS Eastern Daylight Time)] body 404 Not Found get /Brief  Error {message: "404 Not Found get /Brief "} 
```

该页面仍然可以正常加载，但 Sammy.js 不会激活该路由的模块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-02T17:30:11.393

您可以使用不区分大小写的正则表达式来匹配任何大小写的字母字符：

```
this.get(/\/brief/i, function(context) {
    console.log("BRIEF");
}); 
```

# geolocation - Firefox OS 设备 GPS

> ID：15491636
> 
> 赞同：1
> 
> 时间：2013-03-19T04:42:52.460
> 
> 标签：geolocation, gps, firefox-os

我目前正在寻找一种使用 firefox OS 与设备的 gps 通信的设备的方法，因此它可以获得准确的位置定位，而不是不如 gps realtime 准确的 w3c geolocation api。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T22:10:14.340

简单的答案：无法直接访问“设备的 GPS”。您只有已知的[Geolocation API 。](http://www.w3.org/TR/geolocation-API/)

长答案：我的经验一点也不差。所以，我认为只有两种可能无法获得“准确的位置定位”，正如你所说的：

1.  也许您没有使用正确的选项来获得精确的位置。在这种情况下，您可以稍微调整选项以获得更好的结果；
2.  也许您不会等到底层软件可以使用您的 GPS 而不是一些不太准确的仪器/估计（如 Wi-Fi 定位估计）。
3.  它可以是两者的组合 =P

在第一种情况下，您可以验证您是否正在使用`enableHighAccuracy`，如下所示：

```
navigator.geolocation.watchPosition(
  successCallback,
  errorCallback,
  { enableHighAccuracy: true }
); 
```

[正如标准](http://www.w3.org/TR/geolocation-API/)所示，这将要求浏览器获得更好的结果。请注意，这可能会使用更多电池，而且这可能无论如何都无法使用。这也可能需要更多时间，这与我的其他观察有关。

在第二种情况下，您可能使用的值`timeout`太小，并且可能与可能太高的值结合使用`maximumAge`。

如果`maximumAge`高且`timeout`小，您将获得过时的职位，因为没有足够的时间获得新职位并且您接受旧职位。

如果两者都很小，您将开始收到很多`TIMEOUT`错误（值为 3），因为您将没有职位。

您需要在所有 3 个选项之间找到适当的平衡，以获得最佳位置。有时你必须要有耐心。

玩所有 3 个选项，看看你得到的错误。他们会告诉你很多关于获得精确坐标的问题。

position 对象有一些属性可以方便地分析正在发生的事情：

*   该`position.timestamp`属性将告诉您该位置对象的年龄。如果这是旧的，你知道你应该调整选项
*   该`position.coords.accuracy`属性将告诉您纬度/经度坐标的准确度。如果它太大（以米为单位），你知道你应该调整选项

如果您在 GPS 应该可以正常工作的地方（例如，户外、干净的场地）一直等待，而您不断得到不准确的结果，也许您无论如何都无法做得更好。我想说无论如何都是不可能的，用你的软件+硬件=（

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T06:54:24.337

截至目前，Firefox OS 仅支持 GPS 定位（最新添加了 A-GPS）。这导致了这样一个事实，即在大多数情况下，您至少需要等待 1 到几分钟才能让 GPS 模块锁定您的位置，并且您需要清楚地观察天空才能获得锁定。

也就是说，在获得锁定后，通过在调用本身中使用正确的设置（例如将`enableHighAccuracy`标志设置为`true`），*GPS 应该提供与任何其他设备一样准确的位置*。

目前，当前版本的操作系统（1.0.1 或 1.1.0）中不提供基于单元格和基于 wifi 的地理定位，但正在筹备中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:11:06.533

您可以使用 Geolocation API [Firefox OS](https://developer.mozilla.org/en-US/docs/Using_geolocation)或 Google Maps（我不记得我从哪里得到的）

# c# - 无法从 fileUpload 控件 asp.net 获取完整路径

> ID：15491639
> 
> 赞同：0
> 
> 时间：2013-03-19T04:43:29.157
> 
> 标签：c#, asp.net, html, code-behind

我在 aspx 文件中有一个 fileUpload 和隐藏字段。

```
<asp:FileUpload ID="fuID" runat="server" ToolTip="Select Only Excel File"  />

<asp:Button runat="server" ID="btnUl" OnClientClick="document.getElementById('myHiddenInput').value =
document.getElementById('fuID').value" OnClick="btnUlClick" Text="Upload" />

<asp:HiddenField id="myHiddenInput" runat="server" /> 
```

当我使用此代码获取完整路径时：

```
string abc = myHiddenInput.Value;//Show fullpath
string filepath =null;
if(fuID.HasFile)
filepath = fuID.PostedFile.FileName.ToString();//Show fullpath 
```

当我使用 IE 时，所有这些代码都显示 fullPath。但是当我使用 FF 时，它没有显示 fullPath，只显示 FileUpload 中的 FileName。有人帮我吗？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:59:55.910

尝试这个

```
string filename = Path.GetFileName(fuID.PostedFile.FileName);
fuID.SaveAs(Server.MapPath("Files/"+filename));
string filepath = "Files/"+filename; 
```

# graphics - 使用 Fireworks 导出透明背景

> ID：15491641
> 
> 赞同：0
> 
> 时间：2013-03-19T04:43:41.627
> 
> 标签：graphics, transparency, fireworks

我对 Fireworks 很陌生。我画了一个橙色的矩形，让它半透明。我的网页有一个带图案的背景，我希望能够通过我的 div 看到它，但我无法更改 CSS 中 div 的不透明度，因为 div 包含其他 div，当我不使用此 CSS 时，这些 div 也变得透明不想让他们！

我已经尝试了很多我在 Google 上找到的东西，但都无济于事。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T07:30:34.597

如果您想知道如何从 Fireworks 导出半透明矩形以使其保持这种状态，只需确保您的画布颜色设置为无（带有红色对角线的框），然后将其导出为 PNG- 32.

我不确定我理解你所说的 DIV 在使用 CSS 时变得透明是什么意思。你能详细说明一下吗？

# java - Mozilla Rhino 1_7R4 扩展抽象类（JS）

> ID：15491642
> 
> 赞同：1
> 
> 时间：2013-03-19T04:43:48.120
> 
> 标签：java, scripting, mozilla, rhino, jsr233

我正在使用 Mozilla 的 Rhino 实现（不是与 JDK 捆绑的那个）。阅读此主题后：[如何在 Rhino 中子类化内部（静态）类？](https://stackoverflow.com/questions/4572803/how-to-subclass-an-inner-static-class-in-rhino)- 我认为我在正确的轨道上，但以下实现失败：

```
Exception in thread "main" org.mozilla.javascript.EvaluatorException: Access to Java class "adapter1" is prohibited. (test#2)
at org.mozilla.javascript.DefaultErrorReporter.runtimeError(DefaultErrorReporter.java:77)
at org.mozilla.javascript.Context.reportRuntimeError(Context.java:913)
at org.mozilla.javascript.Context.reportRuntimeError(Context.java:969)
at org.mozilla.javascript.Context.reportRuntimeError1(Context.java:932)
at org.mozilla.javascript.JavaMembers.<init>(JavaMembers.java:35)
at org.mozilla.javascript.JavaMembers.lookupClass(JavaMembers.java:807)
at org.mozilla.javascript.NativeJavaObject.initMembers(NativeJavaObject.java:54)
at org.mozilla.javascript.NativeJavaObject.<init>(NativeJavaObject.java:44)
at org.mozilla.javascript.JavaAdapter.createAdapterWrapper(JavaAdapter.java:107)
at adapter1.<init>(<adapter>)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at org.mozilla.javascript.JavaAdapter.js_createAdapter(JavaAdapter.java:205)
at org.mozilla.javascript.JavaAdapter.execIdCall(JavaAdapter.java:86)
at org.mozilla.javascript.IdFunctionObject.call(IdFunctionObject.java:97)
at org.mozilla.javascript.BaseFunction.construct(BaseFunction.java:343)
at org.mozilla.javascript.ScriptRuntime.newObject(ScriptRuntime.java:2349)
at org.mozilla.javascript.gen.test_1._c_script_0(test:2)
at org.mozilla.javascript.gen.test_1.call(test)
at org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:394)
at org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3091)
at org.mozilla.javascript.gen.test_1.call(test)
at org.mozilla.javascript.gen.test_1.exec(test) 
```

爪哇：

```
package com.rebelstudios.scripting;

public abstract class Test
{
    public abstract void x();

public static void main(String[] _) throws Throwable
{
    Context cx = Context.enter();
    ScriptableObject prototype = cx.initStandardObjects();
    Scriptable topLevel = new ImporterTopLevel(cx);
    prototype.setParentScope(topLevel);
    Scriptable scope = cx.newObject(prototype);
    scope.setPrototype(prototype);
    Reader reader = new FileReader("test.js");
    org.mozilla.javascript.Script script = cx.compileReader(reader, "test", 0, null);
    script.exec(cx,  scope);
}

} 
```

JS：

```
var derived = new JavaAdapter(
    Packages.com.rebelstudios.scripting.Test, 
    {
        x: function() { }
    }
); 
```

已经很晚了，我可能会遗漏一些明显的东西，但是有人可以提供一些提示吗？谢谢！

PS 我也非常感谢任何关于使用 Mozilla Rhino 的优秀文档、示例和教程的链接。从我从搜索中收集到的信息中，似乎没有太多连贯的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:23:19.360

不需要使用 JavaAdaper。你可以显式地声明一个你将要实例化的类，但是这个类必须能够通过反射来实例化，因为 Rhino 不会像代码编织之类的那样做任何魔法。

您可以在此处阅读有关 Rhino 中的子类化/扩展的相关文章：[使用 rhino 的 JavaAdapter 的示例](https://stackoverflow.com/questions/3427344/example-using-rhinos-javaadapter)

您还可以考虑在以下来自 MongoDB 的 Rhino 适配器中将Scriptable 对象（在 js-script 执行期间创建）与 Java 对象包装成更简单的*BSON.from*和*BSON.to：http://code.google* [。 com/p/mongodb-rhino/](http://code.google.com/p/mongodb-rhino/)

# c# - 通过引用将接口传递给基类

> ID：15491643
> 
> 赞同：0
> 
> 时间：2013-03-19T04:43:50.700
> 
> 标签：c#, inheritance, business-logic-layer

我正在创建一个具有众多业务实体的应用程序。我想确保每次修改时，我都会相应地为记录添加时间戳并放置创建/修改用户。我有一组实体和这些实体的服务类。所有实体都实现了 IBaseEntity 并继承了 BaseService。

```
public interface IBaseEntity
{
    int Id { get; set; }
    DateTime CreatedOn{ get; set; }
    DateTime LastModifiedOn { get; set; }
    Employee CreatedBy { get; set; }
    Employee LastModifiedBy { get; set; }    
}

public abstract class BaseService
{
    public void Create(IBaseEntity entity)
    {
        entity.CreatedBy = new Employee { Id = entity.Id };
        entity.CreatedOn = DateTime.UtcNow;
        entity.LastModifiedBy = new Employee { Id = entity.Id };
        entity.LastModifiedOn = DateTime.UtcNow;
    }
} 
```

在我的 EmployeeService 中，我会在添加或附加实体之前调用我的基本 Update 和 Create 方法。

```
public Employee Create(Employee employee)
{
        // Create User
        base.Create(employee);
        context.Employees.Add(employee);            
        context.SaveChanges();
} 
```

理想情况下，我想通过引用传递实体，但我知道这是不可能的。我的问题是，我怎样才能做到这一点，以便我可以集中这些代码，而不必在我的每个服务类中实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:33:29.940

伊戈尔是对的！我得到了“将 datetime2 数据类型转换为 datetime 数据类型导致超出范围的值。” 并假设没有设置这些值。这实际上是由于一个完全不同的问题。感谢您为我指明正确的方向。

# cloud - openstack nova api

> ID：15491644
> 
> 赞同：0
> 
> 时间：2013-03-19T04:44:13.157
> 
> 标签：cloud, openstack, libvirt, openstack-nova

我想在 OpenStack 中为我的项目添加**热内存添加/删除功能。**我如何在 openstack 中做到这一点。也有人可以建议我如何**从 openstack 调用 libvirt setmem**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T12:55:10.217

你的意思是向openstack添加一些新的api？你应该遵循一些步骤，首先，在python-xxxclient的项目中添加api，其次，如果你在nova项目中添加这个api，你应该在nova-api模块中添加相同的api。你可以阅读[这个博客](https://www.ibm.com/developerworks/community/blogs/e93514d3-c4f0-4aa0-8844-497f370090f5/entry/openstack_nova_api?lang=zh)。

```
grizzly/src/python-novaclient/novaclient/v1_1/shell.py 
```

这个文件已经定义了所有的api，你可以添加你需要的。

```
nova/api/openstack/compute/contrib 
```

这个目录包含了 nova api 的大部分文件。

# sql - 在 postgresql 中舍入列值

> ID：15491647
> 
> 赞同：4
> 
> 时间：2013-03-19T04:44:36.437
> 
> 标签：sql, database, postgresql, rdbms

我正在尝试用 2 个小数位四舍五入列值。

```
create table ABC("NUM" real);----------created table

insert into ABC values(22.567333335555555); ---------inserted values 
```

但是我尝试了这个查询

```
select ROUND("NUM:,2) from ABC; 
```

并收到以下错误消息

```
ERROR:  function round(real, integer) does not exist
LINE 1:  select ROUND("NUM",2) from ABC; 
```

我想显示答案应该是两个十进制值，如

```
NUM
-----
22.56 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T04:51:51.333

试试这个它对我有用

```
 SELECT round( CAST("NUM" as numeric), 2) FROM ABC; 
```

# python - 创建具有特定平均值的随机数组

> ID：15491648
> 
> 赞同：3
> 
> 时间：2013-03-19T04:44:41.780
> 
> 标签：python, arrays, random, numpy, scipy

我正在使用 scipy 并想创建一个具有特定平均值的长度 n 数组。

假设我想要一个长度为 3 且平均值为 2.5 的随机数组，因此可能的选项可能是：[1.5, 3.5, 2.5] [.25, 7.2, .05] 等等……

我需要为每个数组创建许多具有不同长度和不同平均值（指定）的数组，因此欢迎使用通用解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T05:05:15.770

只需在您想要的范围内生成数字（在这种情况下为 0...10）

```
>>> import random
>>> nums = [10*random.random() for x in range(5)] 
```

算出平均值

```
>>> sum(nums)/len(nums)
4.2315222659844824 
```

将平均值移动到您想要的位置

```
>>> nums = [x - 4.2315222659844824 + 2.5 for x in nums]
>>> nums
[-0.628013346633133, 4.628537956666447, -1.7219257458163257, 7.617565127420011, 2.6038360083629986]
>>> sum(nums)/len(nums)
2.4999999999999996 
```

您可以使用您喜欢的任何分布/范围。通过以这种方式移动平均值，它总是会让你的平均值为 2.5（或非常接近）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T04:50:49.667

你还没有指定你想要的分布。

也不清楚您是否希望实际数组的平均值为 2.5，或者所有数组的摊销平均值为 2.5。

最简单的解决方案——从 0 到 2*avg 的均匀分布中的三个随机数——是这样的：

```
return 2*avg * np.random.rand(3) 
```

如果你想保证数组的平均值是 2.5，这是一个非常简单的约束，但是有很多不同的方法可以满足它，你需要描述你想要的方法。例如：

```
n0 = random.random() * 2*avg
n1 = random.random() * (2*avg - n0)
n2 = random.random() * (2*avg - n0 - n1)
return np.array((n0, n1, n2)) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-19T04:56:01.590

我找到了解决问题的方法。

numpy.random.triangular（左，模式，右，大小=无）

访问：[http ://docs.scipy.org/doc/numpy/reference/generated/numpy.random.triangular.html#numpy.random.triangular](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.triangular.html#numpy.random.triangular)

然而，小问题是它强制样本上的三角形分布。

# hadoop - 如何将 MapReduce 作业从 DataNode 提交到 JobTracker？

> ID：15491651
> 
> 赞同：0
> 
> 时间：2013-03-19T04:45:03.657
> 
> 标签：hadoop

我怀疑我在哪里运行具有单独 NameNode 和 JobTracker 的 12 节点集群。我可以从 JobTracker 执行 MapReduce 作业，但我想从我的 10 个 DataNode 中的任何一个将作业提交给 JobTracker。是否有可能，如果可以，该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:54:35.263

是的，只要 hadoop 在路径上（在每个节点上），并且集群的配置已正确分发到每个数据节点。

事实上，您不一定需要正确分配配置，您只需要相应地配置 jobtracker 和 hdfs url（查看 GenericOptionsParser 选项`-jt`和`-fs`选项）。

有关通用选项的更多信息，请参阅此页面：http: [//hadoop.apache.org/docs/r1.0.4/commands_manual.html#Generic+Options](http://hadoop.apache.org/docs/r1.0.4/commands_manual.html#Generic+Options)

# assembly - 在 x86 汇编语言中获取变量的位置

> ID：15491652
> 
> 赞同：2
> 
> 时间：2013-03-19T04:45:05.507
> 
> 标签：assembly, x86

在 x86 汇编语言中，是否可以确定变量在内存中的位置？

在这里，我试图找到 X 在内存中的位置，以便我可以找到存储在紧随其后的地址中的值。

```
.686p
.model flat,stdcall
.stack 2048

.data
X   byte         "1234"

ExitProcess proto, exitcode:dword
.code
start:

mov ah, X;
;now how can I obtain the location of X in memory?

invoke  ExitProcess, 0
end start ;what does the end statement do? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T04:46:28.637

使用`lea`指令，例如：

```
lea edx, byte ptr x 
```

# javascript - AngularJS：在控制器接收到所有数据后加载templateUrl

> ID：15491653
> 
> 赞同：0
> 
> 时间：2013-03-19T04:45:12.070
> 
> 标签：javascript, templates, angularjs

我想在加载来自我的服务器的数据时显示我的模板。

我创建了一个名为 Services 的模块，其中包含一些服务来加载我的数据，我使用 HomeService 作为示例。

```
var app = angular.module('MyApp', ['Services']);

app.config(['$routeProvider', function($routeProvider) {
    $routeProvider
        .when('/', 
        {
            templateUrl: 'home.html',
            controller: 'Home_Ctrl',
            resolve: {
                loadData: //??
            }
        });
}]);

app.controller('Home_Ctrl', ['$scope', 'HomeService', function($scope, HomeService) {

    $scope.data = HomeService.getData();

} 
```

我想我需要做出一个承诺来做到这一点。是否可以将此功能放在我的控制器中？

我的意思是，我不想要这样的东西：

```
var ctrl = app.controller('Home_Ctrl', ['$scope', 'HomeService', function($scope, HomeService) {
    //Do something
}

//Promise
ctrl.fct = function($q) {
} 
```

我想要这样的东西：

```
app.controller('Home_Ctrl', ['$scope', '$q', 'HomeService', function($scope, $q, HomeService) {

    //Do something

    //Promise
    this.fct = function() {}
} 
```

任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:02:04.210

您可以使用控制器的解析属性。您可以创建一个对象，该对象将返回承诺并分配给控制器解析函数并在控制器定义中注入相同的内容，请参见非常简单的示例

```
$routeProvider.when('/ExitPoll', {
        templateUrl: '/partials/ExitPoll.html', controller: exitpollController, resolve: {
            responseData: ['$http', function ($http) {
                return $http.get('/Candidate/GetExitPolls/hissar').then(function (response) {
                    return response.data;
                });
            }],

        }
    });

var exitpollController = ['$scope', '$http','responseData','$rootScope',
function ($scope, $http, responseData, $rootScope) {
}]; 
```

# objective-c - 在 Objective C 中将属性标记为已弃用

> ID：15491656
> 
> 赞同：41
> 
> 时间：2013-03-19T04:45:33.763
> 
> 标签：objective-c

如何将 Objective C 中的 @property 标记为已弃用？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-19T05:11:40.777

除非你真的想基于 iOS 版本弃用，我怀疑你不想这样做，你可以使用`DEPRECATED_ATTRIBUTE`

```
@property (strong) NSObject *object DEPRECATED_ATTRIBUTE; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-19T05:00:37.713

从`NSObjCRuntime.h`

```
#define NS_AVAILABLE(_mac, _ios)
#define NS_AVAILABLE_MAC(_mac)
#define NS_AVAILABLE_IOS(_ios)
#define NS_DEPRECATED(_macIntro, _macDep, _iosIntro, _iosDep)
#define NS_DEPRECATED_MAC(_macIntro, _macDep)
#define NS_DEPRECATED_IOS(_iosIntro, _iosDep) 
```

你可以使用这些宏

这是一个例子`UITableViewCell.h`

```
@property(nonatomic,copy)   NSString *text NS_DEPRECATED_IOS(2_0, 3_0);                        // default is nil 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-02-07T22:51:39.543

您还可以使用 DEPRECATED_MSG_ATTRIBUTE("Use anotherProperty instead.") 并提供有意义的消息，提示用户使用什么来代替已弃用的属性。Xcode 会在使用该属性时显示警告。

例子：

```
@property (nonatomic) NSString *someProperty DEPRECATED_MSG_ATTRIBUTE("Use anotherProperty instead."); 
```

[![在此处输入图像描述](../Images/2f89eb030319098b8deec844bc9f0af4.png)](https://i.stack.imgur.com/ya0a5.jpg)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-29T06:26:14.627

您可以在 .pch 的下方键入这样的宏，以便为所有应用程序设置全局

```
 #define DEPRECATED_ATTRIBUTE     __attribute__((deprecated)) 
```

将方法标记为以下示例

```
 -(void) exmapleMethodName DEPRECATED_ATTRIBUTE{
          // code
    } 
```

# iphone - xcode：我想模拟一个应用程序的删除功能，但不知道怎么做？

> ID：15491659
> 
> 赞同：-3
> 
> 时间：2013-03-19T04:45:59.607
> 
> 标签：iphone, ios, xcode

正如我们在这张图片中看到的： ![在此处输入图像描述](../Images/55dfb04a95bde415c321a4c63388c1ea.png)

我们如何以编程方式模拟相同的功能？

请提供一些代码的任何链接来激活它。

* * *

## 编辑：

抱歉：如果我不清楚，实际上我正在开发一个带有背景图像的按钮很少的应用程序。有一个添加书签的功能，每当用户点击添加书签时，新按钮就会在屏幕上创建。现在我必须从屏幕上删除书签并执行向上滑动以删除书签标记，但这不会为该按钮设置动画，并且要求只是按住屏幕而不向上滑动以删除。

向上滑动检测的代码是：

```
- (void) handleSwipe:(UISwipeGestureRecognizer *)swipe {
    NSLog(@"swiping up..");
    //some code here.. to display Deletion Icon on the corner of the button
} 
```

但我不知道如何识别触摸按下事件，就像在 Iphone 中删除应用程序一样。

谢谢阿什什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:52:11.537

如果你的意思是你想以编程方式删除你的应用程序，让我告诉你，**不，你不能**。苹果提供了一种默认的方式来做。所以你不需要添加一个新的方法来自己做。

有两种方法可以做到这一点。

1.*如何直接从您的 iDevice 中删除应用程序。*

如果您想从 iPhone、iPod Touch 或 iPad 上删除应用程序，完成此任务的过程很简单。

~找到您要删除的应用程序

~双击该项目，但将手指放在屏幕上。您将在此处发出提示音，VoiceOver 将宣布，“移动应用程序名称

~再次双击该项目。

**和**

2.*如何在 iTunes 中为您的 iDevice 删除应用程序*

如果您不想直接从您的 iPhone、iPad 或 iPod Touch 中删除应用程序，您可以在 iTunes 中进行。只需执行以下操作；

~ 打开 iTunes 并与源表交互

~转到应用程序并停止与表格交互

~转到实际应用程序列表并导航到要删除的应用程序

〜点击键盘上的删除键，然后点击删除按钮上的VO键和空格键，当确认对话框出现时

~然后，决定是要永久删除文件还是只从 iTunes 资料库中删除文件

然后将询问您是否确定是否要删除该应用程序。只需双击“删除”按钮以确认您的决定，或者如果您改变主意，请点击“取消”按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:51:53.713

**rob mayoff**的大力帮助引导我朝着正确的方向前进。

**- - - - - - - - - 编辑： - - - - - - -**

**注意：** *在删除任何应用程序时，这不会像在 iPhone 中那样精确显示，但仍然可以很容易地实现，因为它以不同的方式制作动画。*

**------------------**

我通过以下方式为我的代码实现了删除功能：

```
-(void)handleLongPress:(UILongPressGestureRecognizer *)swipe
{
   if (swipe.state == UIGestureRecognizerStateBegan)
   {
    NSLog(@"long pressed up..");
    @try {
        UIButton *btnDelete = (UIButton *)[self.view viewWithTag:977];
        [btnDelete removeFromSuperview];

        if(self.btnIDToDelete == swipe.view.tag)
        {
            self.btnIDToDelete = -1;
            UIButton *btnToDelete = (UIButton *)[self.view viewWithTag:swipe.view.tag];
            CALayer *layer = btnToDelete.layer;
            [layer removeAnimationForKey:@"DeleteAnimation"];
            return;
        }
    }
    @catch (NSException *exception) {

    }
    @finally {

    }

    NSInteger tag = swipe.view.tag;
    NSLog(@"id is = %d", tag);
    self.btnIDToDelete = tag;
    UIButton *btnToDelete = (UIButton *)[self.view viewWithTag:tag];
    UIButton *btnDelete = [[UIButton alloc] initWithFrame:CGRectMake(btnToDelete.frame.origin.x - 1, btnToDelete.frame.origin.y + 45, 50, 49)];
    [btnDelete addTarget:self action:@selector(deleteFavButton:) forControlEvents:UIControlEventTouchUpInside];
    btnDelete.tag = 977;
    UIImage *imgBack = [UIImage imageNamed:@"crossIpad.png"];
    [btnDelete setBackgroundImage:imgBack forState:UIControlStateNormal];

    [self.view addSubview:btnDelete];
    [btnDelete release];

    CABasicAnimation *pulseAnimation = [CABasicAnimation animationWithKeyPath:@"transform.scale"];
    pulseAnimation.duration = .5;
    pulseAnimation.toValue = [NSNumber numberWithFloat:1.1];
    pulseAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    pulseAnimation.autoreverses = YES;
    pulseAnimation.repeatCount = FLT_MAX;
    //pulseAnimation.repeatCount = 5;
    //pulseAnimation.fillMode = kCAFillModeForwards;
    //pulseAnimation.removedOnCompletion = NO;
    pulseAnimation.fillMode = kCAFillModeBackwards;
    pulseAnimation.removedOnCompletion = YES;

    float xVal = btnToDelete.frame.origin.x;
    float yVal =btnToDelete.frame.origin.y;
    float widthVal = btnToDelete.frame.size.width;
    float heightVal = btnToDelete.frame.size.height;

    NSLog(@"-- xVal=%f -- yVal=%f -- widthVal=%f -- heightVal=%f -- ",xVal, yVal, widthVal, heightVal);

    if(xVal < 48)
        xVal = 48;
    else if (xVal > 250 && xVal < 278)
        xVal = 278;
    else if (xVal > 480 && xVal < 508)
        xVal = 508;

    if(yVal < 95)
        yVal = 95;
    else if(yVal > 250 && yVal < 310)
        yVal = 310;
    else if(yVal > 500 && yVal < 525)
        yVal = 525;

    [btnToDelete setFrame:CGRectMake(xVal, yVal, widthVal, heightVal)];
    CALayer *layer = btnToDelete.layer;
    [layer addAnimation:pulseAnimation forKey:@"DeleteAnimation"];

   }
} 
```

你应该这样称呼它：

```
UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc]initWithTarget:self action:@selector(handleLongPress:)];
    longPress.numberOfTouchesRequired = 1;
    [btn addGestureRecognizer:longPress];
    [longPress release]; 
```

注意：在**“deleteFavButton”**方法中显示适当的消息并在那里处理删除代码。

# php - 带有直接链接的 PHP 帖子

> ID：15491660
> 
> 赞同：2
> 
> 时间：2013-03-19T04:46:04.593
> 
> 标签：php, post

我有一个玩家页面，它返回玩家列表并为您提供一些选项。一个是编辑，另一个是统计。可以预见，编辑页面会将您带到一个表单，您可以在其中编辑球员信息，如姓名，而统计数据页面仅显示主要来自其他表格的与该球员有关的统计数据（例如玩过的游戏）。目前这是用于获取统计信息的代码片段：

```
if (isset($_POST['action']) and $_POST['action'] == 'Stats')
{
include $_SERVER['DOCUMENT_ROOT'] . '/statsite/includes/db.inc.php';

try
{
$sql = 'SELECT id, user.usertitle as name, role, aggression, position, bowlstyle, cricket_players.username, link FROM cricket_players INNER JOIN user ON cricket_players.username = user.userid WHERE id = :id';
$s = $pdo->prepare($sql);
$s->bindValue(':id', $_POST['id']);
$s->execute();
}
catch (PDOExecption $e)
{
  $error = 'Error retrieving player details';
  include 'players.html.php';
  exit();
}

$row = $s->fetch();

$pageTitle = 'View Stats';
$name = $row['name'];
$aggression = $row['aggression'];
$position = $row['position'];
$role = $row['role'];
$bowlstyle = $row['bowlstyle'];
$link = $row['link'];
$username = $row['username'];
$id = $row['id'];

include 'stats.html.php';
exit();
} 
```

如果我点击统计按钮一切正常，但地址栏只有 /? 在玩家页面地址的末尾。有什么方法可以让它显示诸如 /stats?id=1 之类的东西，以便可以直接链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T04:49:38.327

是的，可以直接传值`/stats?id=1`

`id`并通过使用**OR**获得价值`$_REQUEST['id']` **`$_GET['id']`**

 ****不要使用**：`$s->bindValue(':id', $_POST['id']);`

**使用**：`$s->bindValue(':id', $_GET['id']);`

**或者**

```
$s->bindValue(':id', $_REQUEST['id']); 
```**

# sql - oracle sql中的动态数据透视

> ID：15491661
> 
> 赞同：19
> 
> 时间：2013-03-19T04:46:16.020
> 
> 标签：sql, oracle, pivot, dynamic-pivot

...枢轴（总和（A）为（X）中的B）

现在 B 是数据类型 varchar2 而 X 是一个用逗号分隔的 varchar2 值字符串。
X 的值是从同一表的列（例如 CL）中选择不同的值。这种方式枢轴查询工作。

但问题是，每当 CL 列中有新值时，我必须手动将其添加到字符串 X 中。

我尝试用从 CL 中选择的不同值替换 X。但是查询没有运行。
我觉得的原因是因为要替换 X 我们需要用逗号分隔的值。
然后我创建了一个函数来返回与字符串 X 匹配的精确输出。但是查询仍然没有运行。
显示的错误消息类似于“缺少正确的括号”、“文件通信通道结束”等。
我尝试了枢轴 xml 而不是枢轴，查询运行但给出了像 oraxxx 等根本没有值的值。

也许我没有正确使用它。
你能告诉我一些方法来创建具有动态值的枢轴吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-05-16T15:16:49.817

您不能在不使用 PIVOT XML 的情况下将动态语句放入 PIVOT 的 IN 语句中，它会输出一些不太理想的输出。但是，您可以创建一个 IN 字符串并将其输入到您的语句中。

首先，这是我的示例表；

```
 myNumber    myValue myLetter
---------- ---------- --------
         1          2 A        
         1          4 B        
         2          6 C        
         2          8 A        
         2         10 B        
         3         12 C        
         3         14 A 
```

首先设置要在 IN 语句中使用的字符串。在这里，您将字符串放入“str_in_statement”。我们使用[COLUMN NEW_VALUE](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12013.htm)和[LISTAGG](http://docs.oracle.com/cd/E11882_01/server.112/e10592/functions089.htm)来设置字符串。

```
clear columns
COLUMN temp_in_statement new_value str_in_statement
SELECT DISTINCT 
    LISTAGG('''' || myLetter || ''' AS ' || myLetter,',')
        WITHIN GROUP (ORDER BY myLetter) AS temp_in_statement 
    FROM (SELECT DISTINCT myLetter FROM myTable); 
```

您的字符串将如下所示：

```
'A' AS A,'B' AS B,'C' AS C 
```

现在在您的 PIVOT 查询中使用 String 语句。

```
SELECT * FROM 
    (SELECT myNumber, myLetter, myValue FROM myTable)
    PIVOT (Sum(myValue) AS val FOR myLetter IN (&str_in_statement)); 
```

这是输出：

```
 MYNUMBER      A_VAL      B_VAL      C_VAL
---------- ---------- ---------- ----------
         1          2          4            
         2          8         10          6 
         3         14                    12 
```

**不过也有限制。**您只能连接最多 4000 个字节的字符串。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-19T05:49:01.217

您不能`IN`在枢轴子句的子句中放置非常量字符串。
您可以为此使用 Pivot XML。

从[文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#CHDCEJJE)：

> 子查询 子查询仅与 XML 关键字结合使用。指定子查询时，子查询找到的所有值都用于透视

它应该如下所示：

```
select xmlserialize(content t.B_XML) from t_aa
pivot xml(
sum(A) for B in(any)
) t; 
```

您还可以使用子查询代替`ANY`关键字：

```
select xmlserialize(content t.B_XML) from t_aa
pivot xml(
sum(A) for B in (select cl from t_bb)
) t; 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/c39a7/2)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-15T02:27:54.000

对于以后的读者，这里是另一个解决方案 [https://technology.amis.nl/2006/05/24/dynamic-sql-pivoting-stealing-antons-thunder/](https://technology.amis.nl/2006/05/24/dynamic-sql-pivoting-stealing-antons-thunder/)

允许查询

```
select * from table( pivot(  'select deptno,  job, count(*) c from scott.emp group by deptno,job' ) ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-24T13:35:29.907

**使用动态查询**

测试代码如下

* * *

```
--  DDL for Table TMP_TEST
--------------------------------------------------------

  CREATE TABLE "TMP_TEST" 
   (    "NAME" VARCHAR2(20), 
    "APP" VARCHAR2(20)
   );
/
SET DEFINE OFF;
Insert into TMP_TEST (NAME,APP) values ('suhaib','2');
Insert into TMP_TEST (NAME,APP) values ('suhaib','1');
Insert into TMP_TEST (NAME,APP) values ('shahzad','3');
Insert into TMP_TEST (NAME,APP) values ('shahzad','2');
Insert into TMP_TEST (NAME,APP) values ('shahzad','5');
Insert into TMP_TEST (NAME,APP) values ('tariq','1');
Insert into TMP_TEST (NAME,APP) values ('tariq','2');
Insert into TMP_TEST (NAME,APP) values ('tariq','6');
Insert into TMP_TEST (NAME,APP) values ('tariq','4');
/
  CREATE TABLE "TMP_TESTAPP" 
   (    "APP" VARCHAR2(20)
   );

SET DEFINE OFF;
Insert into TMP_TESTAPP (APP) values ('1');
Insert into TMP_TESTAPP (APP) values ('2');
Insert into TMP_TESTAPP (APP) values ('3');
Insert into TMP_TESTAPP (APP) values ('4');
Insert into TMP_TESTAPP (APP) values ('5');
Insert into TMP_TESTAPP (APP) values ('6');
/
create or replace PROCEDURE temp_test(
  pcursor out sys_refcursor,
    PRESULT                   OUT VARCHAR2
    )
AS
V_VALUES VARCHAR2(4000);
V_QUERY VARCHAR2(4000);
BEGIN
 PRESULT := 'Nothing';

-- concating activities name using comma, replace "'" with "''" because we will use it in dynamic query so "'" can effect query.
  SELECT DISTINCT 
         LISTAGG('''' || REPLACE(APP,'''','''''') || '''',',')
         WITHIN GROUP (ORDER BY APP) AS temp_in_statement 
    INTO V_VALUES
    FROM (SELECT DISTINCT APP 
            FROM TMP_TESTAPP);

-- designing dynamic query  

  V_QUERY := 'select * 
                from (  select NAME,APP 
                          from TMP_TEST   )   
               pivot (count(*) for APP in 
                     (' ||V_VALUES|| '))  
           order  by NAME' ;

    OPEN PCURSOR
     FOR V_QUERY;

 PRESULT := 'Success';

Exception
WHEN OTHERS THEN
 PRESULT := SQLcode || ' - ' || SQLERRM;
END temp_test; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-11T02:39:21.880

我使用了上述方法（Anton PL/SQL 自定义函数 pivot()），它完成了工作！由于我不是专业的 Oracle 开发人员，因此这些是我完成的简单步骤：

1) 下载 zip 包，在其中找到 pivotFun.sql。2) 运行一次pivotFun.sql 以创建一个新函数 3) 在普通SQL 中使用该函数。

请注意动态列名称。在我的环境中，我发现列名限制为 30 个字符，并且不能包含单引号。所以，我的查询现在是这样的：

```
SELECT 
  *
FROM   
  table( 
        pivot('
                SELECT DISTINCT
                    P.proj_id,
                    REPLACE(substr(T.UDF_TYPE_LABEL, 1, 30), '''''''','','') as Attribute,
                    CASE
                      WHEN V.udf_text is null     and V.udf_date is null and      V.udf_number is NOT null  THEN to_char(V.udf_number)
                      WHEN V.udf_text is null     and V.udf_date is NOT null and  V.udf_number is null      THEN to_char(V.udf_date)
                      WHEN V.udf_text is NOT null and V.udf_date is null and      V.udf_number is null      THEN V.udf_text
                      ELSE NULL END
                    AS VALUE
                FROM
                    project   P
                LEFT JOIN UDFVALUE V ON P.proj_id     = V.proj_id 
                LEFT JOIN UDFTYPE  T ON V.UDF_TYPE_ID = T.UDF_TYPE_ID
                WHERE 
                    P.delete_session_id  IS NULL AND
                    T.TABLE_NAME = ''PROJECT''
    ')
) 
```

适用于多达 1m 条记录。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-23T09:45:14.897

对于 OP 提出的问题，我不会完全给出答案，相反，我将仅描述如何完成动态枢轴。

在这里，我们必须使用动态 sql，首先将列值检索到变量中，然后在动态 sql 中传递变量。

**例子**

考虑我们有一个如下表。

[![在此处输入图像描述](../Images/4c057277429c6b4eb44841395bfc1047.png)](https://i.stack.imgur.com/UOUcR.jpg)

如果我们需要将列中的值显示`YR`为列名以及这些列中的值`QTY`，那么我们可以使用下面的代码。

```
declare
  sqlqry clob;
  cols clob;
begin
  select listagg('''' || YR || ''' as "' || YR || '"', ',') within group (order by YR)
  into   cols
  from   (select distinct YR from EMPLOYEE);

  sqlqry :=
  '      
  select * from
  (
      select *
      from EMPLOYEE
  )
  pivot
  (
    MIN(QTY) for YR in (' || cols  || ')
  )';

  execute immediate sqlqry;
end;
/ 
```

**结果**

[![在此处输入图像描述](../Images/913d3a5856d3d16f3a666dba4cf506dc.png)](https://i.stack.imgur.com/v7mgh.jpg)

如果需要，您还可以创建一个临时表并在该临时表中执行选择查询以查看结果。很简单，只需`CREATE TABLE TABLENAME AS`在上面的代码中添加即可。

```
sqlqry :=
'    
  CREATE TABLE TABLENAME AS
  select * from 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-12T18:13:49.830

**不使用 PIVOT XML就不能**在 PIVOT 的 IN 语句中放入动态语句，但是***可以使用小的 Technic***在 PIVOT 中使用动态语句。在 PL/SQL 中，在一个字符串值内，两个撇号等于一个撇号。

```
declare
  sqlqry clob;   
  search_ids  varchar(256) := '''2016'',''2017'',''2018'',''2019''';
begin
  search_ids := concat( search_ids,'''2020''' ); -- you can append new search id dynamically as you wanted
  sqlqry :=
  '      
  select * from
  (
      select *
      from EMPLOYEE
  )
  pivot
  (
    MIN(QTY) for YR in (' || search_ids   || ')
  )';

  execute immediate sqlqry;
end; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-28T22:39:28.243

Oracle 的 SQL 中没有直接的动态透视方法，除非它返回 XML 类型的结果。对于非 XML 结果，可以通过创建`SYS_REFCURSOR`返回类型的函数来使用 PL/SQL

*   使用**条件聚合**

    ```
    CREATE OR REPLACE FUNCTION Get_Jobs_ByYear RETURN SYS_REFCURSOR IS
      v_recordset SYS_REFCURSOR;
      v_sql       VARCHAR2(32767);
      v_cols      VARCHAR2(32767); 
    BEGIN
      SELECT LISTAGG( 'SUM(  CASE  WHEN job_title =  '''||job_title||'''  THEN  1  ELSE  0  END )  AS  "'||job_title||'"' , ',' )
                     WITHIN GROUP ( ORDER BY job_title )
        INTO v_cols
        FROM ( SELECT DISTINCT job_title
                 FROM jobs j );

      v_sql :=
      'SELECT "HIRE YEAR",'|| v_cols ||
      '  FROM
         (
          SELECT TO_NUMBER(TO_CHAR(hire_date,''YYYY'')) AS "HIRE YEAR", job_title
            FROM employees e
            JOIN jobs j
              ON j.job_id = e.job_id
         )
        GROUP BY "HIRE YEAR"
        ORDER BY "HIRE YEAR"';

      OPEN v_recordset FOR v_sql;
      DBMS_OUTPUT.PUT_LINE(v_sql);
      RETURN v_recordset;
    END;
    / 
    ```

*   带有**PIVOT**条款

    ```
    CREATE OR REPLACE FUNCTION Get_Jobs_ByYear RETURN SYS_REFCURSOR IS
      v_recordset SYS_REFCURSOR;
      v_sql       VARCHAR2(32767);
      v_cols      VARCHAR2(32767);
    BEGIN
      SELECT LISTAGG( ''''||job_title||''' AS "'||job_title||'"' , ',' )
                     WITHIN GROUP ( ORDER BY job_title )
        INTO v_cols
        FROM ( SELECT DISTINCT job_title
                 FROM jobs j  );

      v_sql :=
      'SELECT *
         FROM
         (
          SELECT TO_NUMBER(TO_CHAR(hire_date,''YYYY'')) AS "HIRE YEAR", job_title
            FROM employees e
            JOIN jobs j
              ON j.job_id = e.job_id  
         )
        PIVOT
        (
         COUNT(*) FOR job_title IN ( '|| v_cols ||' )
        )
        ORDER BY "HIRE YEAR"';

      OPEN v_recordset FOR v_sql;
      DBMS_OUTPUT.PUT_LINE(v_sql);
      RETURN v_recordset;
    END;
    / 
    ```

但是使用 ORA-01489 编码有一个缺点**：**当*第*一个参数中的连接字符串超过*4000 个字符的长度时**，字符串连接的结果太长*就会引发。在这种情况下，返回变量值的查询可能会替换为嵌套在其中的函数，例如`LISTAGG()` ****`v_cols``XMLELEMENT()``XMLAGG()`****

 ****```
CREATE OR REPLACE FUNCTION Get_Jobs_ByYear RETURN SYS_REFCURSOR IS
  v_recordset SYS_REFCURSOR;
  v_sql       VARCHAR2(32767);
  v_cols      VARCHAR2(32767); 
BEGIN
  SELECT RTRIM(DBMS_XMLGEN.CONVERT(
         XMLAGG(
                XMLELEMENT(e, 'SUM(  CASE  WHEN job_title =  '''||job_title||
                            '''  THEN  1  ELSE  0  END )  AS  "'||job_title||'",')
               ).EXTRACT('//text()').GETCLOBVAL() ,1),',') AS "v_cols"
    FROM ( SELECT DISTINCT job_title
               FROM jobs j);

  v_sql :=
  'SELECT "HIRE YEAR",'|| v_cols ||
  '  FROM
     (
      SELECT TO_NUMBER(TO_CHAR(hire_date,''YYYY'')) AS "HIRE YEAR", job_title
        FROM employees e
        JOIN jobs j
          ON j.job_id = e.job_id
     )
    GROUP BY "HIRE YEAR"
    ORDER BY "HIRE YEAR"';
  DBMS_OUTPUT.put_line(LENGTH(v_sql));
  OPEN v_recordset FOR v_sql;
  RETURN v_recordset;
END;
/ 
```

*除非超过VARCHAR2*类型的上限*32767*。最后一种方法也可能适用于*Oracle 11g 第 2版***之前**版本的数据库，因为它们不包含函数。 ****`LISTAGG()`****

 ****顺便说一句，如果数据库的版本是 12.2+，`LISTAGG()`则可以在检查`v_cols`生成的非常长的连接字符串时使用函数，而不会出现*ORA-01489*错误，而如果数据库的版本是*12.2+ ，则通过使用**ON OVERFLOW TRUNCATE*子句截断字符串的尾随部分如

 *```
LISTAGG( <concatenated string>,',' ON OVERFLOW TRUNCATE 'THE REST IS TRUNCATED' WITHOUT COUNT ) 
```

> 该函数可以调用为
> 
> ```
> VAR rc REFCURSOR
> EXEC :rc := Get_Jobs_ByYear;
> PRINT rc 
> ```
> 
> 从*SQL Developer*的命令行
> 
> *或者*
> 
> ```
> BEGIN
>   :result := Get_Jobs_ByYear;
> END; 
> ```
> 
> 从*PL/SQL Developer的**测试*窗口中获取结果集。

 *`[Demo for generated queries](https://dbfiddle.uk/?rdbms=oracle_18&fiddle=b6048cf29aad0b9c4bcf0130166fac15)`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-22T22:13:01.033

您可以使用开源程序[Method4.Pivot](https://github.com/method5/method4)在单个 SQL 语句中动态透视数据。

安装包后，调用该函数并将 SQL 语句作为字符串传入。SQL 语句的最后一列定义值，倒数第二列定义列名。默认聚合函数是 MAX，它适用于常见的实体属性值查询，例如：

```
select * from table(method4.pivot(
    q'[
        select 'A' name, 1 value from dual union all
        select 'B' name, 2 value from dual union all
        select 'C' name, 3 value from dual
    ]'
));

A   B   C
-   -   -
1   2   3 
```

该程序还通过参数 P_AGGREGATE_FUNCTION 支持不同的聚合函数，如果添加名为 PIVOT_COLUMN_ID 的列，则允许自定义列名顺序。

该软件包使用类似于 Anton 的 pivot 的 Oracle Data Cartridge 方法，但 Method4.Pivot 具有几个重要优点：

1.  带有 repo、安装说明、许可证、单元测试、文档和评论的常规开源程序 - 而不仅仅是博客上的 Zip 文件。
2.  处理不寻常的列名。
3.  处理不寻常的数据类型，如浮点数。
4.  最多可处理 1000 列。
5.  为常见错误提供有意义的错误消息。
6.  处理 NULL 列名。
7.  处理 128 个字符的列名。
8.  防止误导性的隐式转换。
9.  每次硬解析语句以捕获基础表更改。

但大多数用户最好还是在应用层创建一个动态透视或使用透视 XML 选项。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-26T13:25:15.910

[`SQL_MACRO`](https://docs.oracle.com/en/database/oracle/oracle-database/21/lnpls/sql_macro-clause.html#GUID-292C3A17-2A4B-4EFB-AD38-68DF6380E5F7)自从 Oracle 19c 引入（可能还有我还没有使用的[多态表函数](https://docs.oracle.com/en/database/oracle/oracle-database/18/arpls/DBMS_TF.html)）以来，看起来无需额外的开发工作就可以实现。

> ```
> create table t as
> select
>   trunc(level/5) as id
>   , chr(65+mod(level, 5)) as code
>   , level as val
> from dual
> connect by level < 10 
> ```

> ```
> create function f_pivot
> return varchar2 SQL_MACRO(TABLE)
> is
>   l_codes varchar2(1000);
> begin
>   select listagg(
>     distinct '''' || code
>     || ''' as ' || code, ',')
>     into l_codes
>   from t;
>   
>   return
>     'select *
>     from t
>     pivot (
>       max(val) for code in (
>       ' || l_codes || '))';
> end;
> / 
> ```

> ```
> select *
> from f_pivot() 
> ```
> 
> ```
> 身份证 | 乙| C | D | E | 一种
> -: | -: | -: | -: | -: | ---:
>  0 | 1 | 2 | 3 | 4 | *空值*
>  1 | 6 | 7 | 8 | 9 | 5
> 
> ```

唯一的问题（在`SQL_MACRO`方法的情况下）是结果集在一个会话期间不会改变其结构：

> ```
> insert into t
> values(1, 'Q', 100);
> 
> commit;
> 
> select *
> from f_pivot() 
> ```
> 
> ```
> 身份证 | 乙| C | D | E | 一种
> -: | -: | -: | -: | -: | ---:
>  0 | 1 | 2 | 3 | 4 | *空值*
>  1 | 6 | 7 | 8 | 9 | 5
> 
> ```

但在单独的会话中它工作正常：

> ```
> select dbms_xmlgen.getxml('select * from f_pivot()') as v
> from dual 
> ```

| 五 |
| --- |
|  
```
<?xml version="1.0"?> 
<ROWSET> 
<ROW> 
  <ID>0</ID> 
  <B>1</B> 
  <C>2</C> 
  <D>3</D> 
  <E >4</E> 
</ROW> 
<ROW> 
  <ID>1</ID> 
  <B>6</B> 
  <C>7</C> 
  <D>8</D> 
  <E>9< /E> 
  <A>5</A> 
  <Q>100</Q>
 </ROW> 
</ROWSET>

```

 |

使用`with function`特征动态枢轴可以在没有预定义函数的情况下就地使用：

> ```
> with function f_pivot1
> return varchar2 SQL_MACRO(TABLE)
> is
>   l_codes varchar2(1000);
> begin
>   select listagg(distinct '''' || code || ''' as ' || code, ',')
>     into l_codes
>   from t;
>   
>   return
>     'select *
>     from t
>     pivot (
>       max(val) for code in (
>       ' || l_codes || '))';
> end;
> 
> select *
> from f_pivot1() 
> ```
> 
> ```
> 身份证 | 乙| C | D | E | 一个 | 问
> -: | -: | -: | -: | -: | ---: | ---:
>  0 | 1 | 2 | 3 | 4 | *空*| *空值*
>  1 | 6 | 7 | 8 | 9 | 5 | 100
> 
> ```

*db<>[在这里摆弄](https://dbfiddle.uk/?rdbms=oracle_21&fiddle=baa314af5b1ab763e819ab06e0a47927)***********

# gwt - GXT ScrollBar 重叠内容

> ID：15491662
> 
> 赞同：1
> 
> 时间：2013-03-19T04:46:18.457
> 
> 标签：gwt, layout, scrollbar, gxt

我正在使用`setScrollMode(ScrollMode.AUTOY)`在 VerticalLayoutContainer 上必要时启用垂直滚动。但是，滚动条与容器的内容重叠。我见过的唯一解决方法是调用`setAdjustForScroll(true)`. 这样做的问题是，即使没有滚动条，面板也会*始终为滚动条保留空间。*

有没有办法告诉 GXT 只在存在滚动条时调整滚动条？或者也许使用事件处理程序（例如 ResizeHandler）并检查滚动条当前是否可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:00:52.173

如果滚动条可见，而不是尝试签入处理程序，在 VerticalLayoutContainer 中没有内容不是更容易吗？

例如我有：

```
VerticalLayoutContainer vp = new VerticalLayoutContainer();

vp.setScrollMode(ScrollMode.AUTO);

vp.add(layer1, new VerticalLayoutData(1, -1));
vp.add(layer2, new VerticalLayoutData(1, -1));
vp.add(layer3, new VerticalLayoutData(1, -1)); 
```

层（1-3）包含实际内容并且是不同的类型。VBoxLayoutContainer、容器、VerticalLayoutContainer。

这个对我有用。我认为这无关紧要，但我将 vp 添加到添加到根面板的 CenterLayoutContainer 中。

# javascript - JavaScript 匹配随机数和文本输入

> ID：15491663
> 
> 赞同：1
> 
> 时间：2013-03-19T04:46:23.397
> 
> 标签：javascript, forms, validation, random, innerhtml

我正在尝试制作一个非常基本的反垃圾邮件功能，其中脚本生成一个随机数，然后用户必须在文本字段中键入它才能验证表单。我的问题是获取生成的数字的值以将其与输入相匹配。这是我生成随机数的方法：

```
window.onload=function randomNumberGenerator()
  {
    var x=document.getElementById("number");
    var randomNumber=Math.floor((Math.random()*100)+1);
    x.innerHTML=randomNumber;
            } 
```

我试图在验证时获得这样的号码：

```
var x=document.forms["contactForm"]["realPerson"].value;
var correct=document.getElementById("number").value;

if (x != correct)
  {
  alert("Please write in the correct number");
  return false;
  } 
```

但过了一会儿，我意识到 innerHTML 并没有在 DOM 中放置任何可以读取的内容（至少这似乎是交易）。那么如何在提交表单时检索该数字以进行比较呢？我曾考虑过使用 cookie，但这似乎有点吓人......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:03:56.263

如果您可以从客户端访问生成的号码，我认为您失去了目的。最好在服务器端生成随机数，并在表单提交后进行验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T05:03:25.460

您将再次使用innerHTML，可能使用 parseInt

```
var correct=parseInt(document.getElementById("number").innerHTML); 
```

# ruby-on-rails-3 - puma 热重启 on_restart 功能：Rails 应用程序需要吗？

> ID：15491664
> 
> 赞同：0
> 
> 时间：2013-03-19T04:46:26.663
> 
> 标签：ruby-on-rails-3, puma

在 Puma 的配置文件示例中，它为 on_restart 函数说明了以下内容：

> 在重新启动之前运行的代码。此代码应关闭日志文件、数据库连接等。

我是否需要为 Rails 应用程序实现此功能，以关闭与数据库和日志文件的连接，还是自动处理？如果没有，我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T09:11:36.217

不，你不需要，Rails 会自动重新加载你的代码。但是这个代码重载支持是有限的。例如，对 application.rb 的更改在您重新启动应用服务器之前不会应用。

但我会推荐[Phusion Passenger](https://www.phusionpassenger.com)而不是 Puma。Phusion Passenger 设置起来要容易得多，尤其是在您投入生产时。Phusion Passenger 直接集成到 Apache 和 Nginx 中，并提供动态工作者管理等高级功能。Phusion Passenger 非常成熟、稳定和高性能，被纽约时报、赛门铁克、AirBnB 等公司使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T03:00:31.053

我发现每次我的 Rails/Puma 服务器重新启动时，使用 Redis 作为我的 Rails.cache 提供程序都会在第一次请求时导致错误页面。我得到的错误是：

> Redis::InheritedError（试图使用来自子进程的连接而不重新连接。您需要在fork后重新连接到Redis。）

为了解决这个错误，我没有向**on_restart**添加任何内容，但确实必须向**on_worker_boot**添加代码 （我正在使用 workers=4 运行 Puma）：

**puma-config.rb**

```
on_worker_boot do
    puts "Reconnecting Rails.cache"
    Rails.cache.reconnect
end 
```

# c++ - cocos2dx中解除分配的最佳方法

> ID：15491670
> 
> 赞同：0
> 
> 时间：2013-03-19T04:47:01.600
> 
> 标签：c++, ios, cocos2d-x

在 Cocos2dx 中，哪种释放方式最好？

1.  覆盖 ccObject 的 @"release()" 方法。
2.  创建一个析构函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:13:10.230

您可以使用 cocos2d-x 中已经定义的宏。

```
#define CC_SYNTHESIZE_RETAIN(varType, varName, funName)    \
private: varType varName; \
public: virtual varType get##funName(void) const { return varName; } \
public: virtual void set##funName(varType var)   \
{ \
    if (varName != var) \
    { \
        CC_SAFE_RETAIN(var); \
        CC_SAFE_RELEASE(varName); \
        varName = var; \
    } \
}

#define CC_SAFE_DELETE(p)            do { if(p) { delete (p); (p) = 0; } } while(0)
#define CC_SAFE_RELEASE(p)            do { if(p) { (p)->release(); } } while(0)
#define CC_SAFE_RETAIN(p)            do { if(p) { (p)->retain(); } } while(0) 
```

例如：

```
CC_SYNTHESIZE_RETAIN(CCLayer*, m_layer, Layer); 
```

然后你可以用 分配`m_layer`，用`setLayer(new_layer);`得到它`getLayer()`。

而且这个宏只适用于对象扩展`CCObject`。

# linux - Bash - 交换列中的值

> ID：15491672
> 
> 赞同：6
> 
> 时间：2013-03-19T04:47:07.727
> 
> 标签：linux, bash, sed, awk, grep

我在一个文件中有一些 CSV/表格数据，如下所示：

```
1,7,3,2
8,3,8,0
4,9,5,3
8,5,7,3
5,6,1,9 
```

（它们并不总是数字，只是随机的逗号分隔值。但是，单个数字更容易作为示例。）

我想随机洗牌任何列的 40%。例如，说第三个。所以也许 3 和 1 互相交换。现在第三列是：

```
1 << Came from the last position
8
5
7
3 << Came from the first position 
```

我正在尝试在`bash`我正在处理的脚本中的文件中执行此操作，但我运气不佳。我一直在一些非常疯狂和徒劳的兔子洞里徘徊，`grep`这让我觉得我走错了路（不断的失败是我的罪魁祸首）。

我用一连串的东西标记了这个问题，因为我不完全确定我什至应该使用哪种工具。

**编辑：**我可能最终会接受鲁本斯的回答，无论它多么古怪，因为它直接包含交换概念（我想我本可以在原始问题中更加强调），它允许我指定一个百分比用于交换的列。它也恰好起作用，这总是一个优点。

对于不需要这个，只想要一个基本的洗牌的人，吉姆加里森的答案也有效（我测试过）。

然而，对鲁本斯的解决方案提出警告。我拿了这个：

```
for (i = 1; i <= NF; ++i) {
  delim = (i != NF) ? "," : "";
  ...
}
printf "\n"; 
```

删除`printf "\n";`并将换行符向上移动，如下所示：

```
for (i = 1; i <= NF; ++i) {
  delim = (i != NF) ? "," : "\n";
  ...
} 
```

因为只是`""`在 else 情况下会导致`awk`在每行的末尾写入损坏的字符（`\00`）。在某一时刻，它甚至设法用汉字替换了我的整个文件。虽然，老实说，这可能让我在这个问题之上做了一些更愚蠢的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T05:46:59.827

这将适用于专门指定的列，但应该足以为您指明正确的方向。这适用于包括 Cygwin 在内的现代 bash shell：

```
paste -d, <(cut -d, -f1-2 test.dat) <(cut -d, -f3 test.dat|shuf) <(cut -d, -f4- test.dat) 
```

操作特征是“[过程替代](http://www.gnu.org/software/bash/manual/bashref.html#Process-Substitution)”。

该`paste`命令水平连接文件，三个部分通过 与原始文件分开`cut`，第二部分（要随机化的列）通过`shuf`命令运行以重新排序行。这是运行它几次的输出：

```
$ cat test.dat
1,7,3,2
8,3,8,0
4,9,5,3
8,5,7,3
5,6,1,9

$ paste -d, <(cut -d, -f1-2 test.dat) <(cut -d, -f3 test.dat|shuf) <(cut -d, -f4- test.dat)
1,7,1,2
8,3,8,0
4,9,7,3
8,5,3,3
5,6,5,9

$ paste -d, <(cut -d, -f1-2 test.dat) <(cut -d, -f3 test.dat|shuf) <(cut -d, -f4- test.dat)
1,7,8,2
8,3,1,0
4,9,3,3
8,5,7,3
5,6,5,9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:38:59.430

**算法**：

*   创建一个向量`n`对，从`1`to`number of lines`和行中的相应值（对于选定的列），然后随机排序；
*   找出应该随机化多少行：`num_random = percentage * num_lines / 100`;
*   `num_random`从您的随机向量中选择第一个条目；
*   您可以对选定的行进行随机排序，但它应该已经随机排序；
*   打印输出：

    ```
    i = 0
    for num_line, value in column; do
        if num_line not in random_vector:
            print value; # printing non-randomized value
        else:
            print random_vector[i]; # randomized entry
            i++;
    done 
    ```

**实施**：

```
#! /bin/bash

infile=$1
col=$2
n_lines=$(wc -l < ${infile})
prob=$(bc <<< "$3 * ${n_lines} / 100")

# Selected lines
tmp=$(tempfile)
paste -d ',' <(seq 1 ${n_lines}) <(cut -d ',' -f ${col} ${infile}) \
    | sort -R | head -n ${prob} > ${tmp}

# Rewriting file
awk -v "col=$col" -F "," '
(NR == FNR) {id[$1] = $2; next}
(FNR == 1) {
    i = c = 1;
    for (v in id) {value[i] = id[v]; ++i;}
}
{
    for (i = 1; i <= NF; ++i) {
        delim = (i != NF) ? "," : "";
        if (i != col) {printf "%s%c", $i, delim; continue;}
        if (FNR in id) {printf "%s%c", value[c], delim; c++;}
        else {printf "%s%c", $i, delim;}
    }
    printf "\n";
}
' ${tmp} ${infile}

rm ${tmp} 
```

如果您想要更接近的就地方法*，*您可以使用[海绵将输出](http://linux.die.net/man/1/sponge)*传回*输入文件。

**执行**：

要执行，只需使用：

```
$ ./script.sh <inpath> <column> <percentage> 
```

如：

```
$ ./script.sh infile 3 40
1,7,3,2
8,3,8,0
4,9,1,3
8,5,7,3
5,6,5,9 
```

**结论**：

这允许您选择列，随机排序该列中的条目百分比，并*替换*原始文件中的新列。

这个脚本与众不同，不仅证明 shell 脚本非常有趣，而且在某些情况下绝对**不**应该使用它。（：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:26:19.650

我将使用 2-pass 方法，首先计算行数并将文件读入数组，然后使用 awk 的 rand() 函数生成随机数以识别您将更改的行，然后再进行 rand () 再次确定将交换哪些行对，然后在打印之前交换数组元素。像这样的伪代码，粗略的算法：

```
awk -F, -v pct=40 -v col=3 '
NR == FNR {
    array[++totNumLines] = $0
    next
}

FNR == 1{
    pctNumLines = totNumLines * pct / 100

    srand()

    for (i=1; i<=(pctNumLines / 2); i++) {
        oldLineNr = rand() * some factor to produce a line number that's in the 1 to totNumLines range but is not already recorded as processed in the "swapped" array.
        newLineNr = ditto plus must not equal oldLineNr

        swap field $col between array[oldLineNr] and array[newLineNr]

        swapped[oldLineNr]
        swapped[newLineNr]
    }
    next
}

{ print array[FNR] }

' "$file" "$file" > tmp &&
mv tmp "$file" 
```

# c# - 尝试遍历 ListBox，错误：指定的强制转换无效

> ID：15491674
> 
> 赞同：0
> 
> 时间：2013-03-19T04:47:22.107
> 
> 标签：c#, asp.net, listbox, loops

我在另一个类中有一个方法，用于将数据发送到数据库。这个方法[也在这里](http://pastebin.com/0e0D5GTd)。

```
public Int32 AddOrder(clsStock NewItem)
{
    //this function takes the data passed via NewItem
    //and passes it to the parameters for the stored procedure
    //
    //create an instance of the data dictionary
    clsDataDictionary DD = new clsDataDictionary();
    //create an instance of the object class
    Int32 ReturnValue;
    //create an instance of the data conduit
    clsDataConduit Items = new clsDataConduit();
    //pass the data for this address
    Items.AddParameter(DD.sproc_tblOrders_Add_AuthId, NewItem.AuthId);
    Items.AddParameter(DD.sproc_tblOrders_Add_ItemId, NewItem.ItemId);
    Items.AddParameter(DD.sproc_tblOrders_Add_DateOrdered, NewItem.DateOrdered);
    Items.AddParameter(DD.sproc_tblOrders_Add_Cancel, NewItem.Cancel);
    //execute the stored procedure
    ReturnValue = Items.Execute(DD.sproc_tblOrders_Add);
    //return the primary key value
    return ReturnValue;
} 
```

我用来遍历列表框并为列表框中的每个项目执行该方法的 aspx 页面上的方法也在[这里](http://pastebin.com/WKSBev2P)。

```
protected void btnSubmit_Click1(object sender, EventArgs e)
{
    //create an instance of the collection class
    clsStockCollection Items = new clsStockCollection();

    foreach(int id in lstAdded.Items)
    {
        TheItem.AuthId = 5;
        TheItem.ItemId = Convert.ToInt32(lstAdded.Items[id].Value);
        TheItem.Cancel = "false";
        Items.AddOrder(TheItem);
    }
    Response.Redirect("Order.aspx");
} 
```

当我运行我的网站并点击 btnSubmit 时，它给出了以下错误：

`"Specified cast is not valid"`这是页面上的方法`aspx`（第二个 pastebin 文件）

知道这是为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:00:08.567

应该是这样的

```
foreach(ListItem item in lstAdded.Items)
{
    TheItem = new clsStock();
    TheItem.AuthId = 5;
    TheItem.ItemId = Convert.ToInt32(item.Value);
    TheItem.Cancel = "false";
    Items.AddOrder(TheItem);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:56:57.953

您正在通过类型字段迭代[ListBox.Items 。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.items.aspx)`int`ListBox.Items 是一个`ListItemCollection`，您可以做的是使用`var`关键字使用隐式类型变量，例如：

```
foreach(var id in lstAdded.Items)
{
    TheItem.AuthId = 5;
    TheItem.ItemId = Convert.ToInt32(id.Text); //Change here
    TheItem.Cancel = "false";
    Items.AddOrder(TheItem);
} 
```

目前看来您正在将其视为`foreach`循环中的索引，而不是它的单个项目`lstAdded`

# matlab - 如何在等高线图上设置任意方向以在 Matlab 中执行操作

> ID：15491675
> 
> 赞同：1
> 
> 时间：2013-03-19T04:47:24.553
> 
> 标签：matlab, contour

我正在为我的特定问题寻求帮助。

我有一个从 XYZ 数据创建的等高线图。该图包含 2 个宽峰，其中一个比另一个更强烈。

当最强峰与 Y 轴对齐时，我可以在每个 X 值处对每个 YZ 曲线进行拟合。我通常做一个高斯拟合来在同一张图上绘制峰值中心。

在某些情况下，我需要执行相同的拟合，但不需要沿 Y 轴方向（在这种情况下，我只是在每个不同的 X 值处绘制 YZ 扫描），而是沿另一个任意方向。

目前我发现的唯一方法如下： - 绘制等高线图并找到最强烈峰的位置 - 如果该位置未与 Y 轴对齐，则旋转所有数据并再次绘制等高线 -对每个 X 值执行 YZ 高斯拟合 - 旋转生成的 XY 位置以返回原始图 - 将 XY 位置绘制为原始等高线图上的一条线

这很长，需要大量内存。我想知道是否有更优雅/更快的方式。

谢谢你的帮助

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:18:31.280

我认为您想沿任意线从 (x,y,z) 数据中提取数据以进行拟合。等高线图将仅显示部分数据，`z(x,y)`可以显示完整数据`imagesc`等。假设您想要沿由两个点定义的线的数据`(x1,y1) -> (x2,y2)`。根据直线的 eq，直线`y=a*x+b`的斜率`a`为`(y2-y1)/(x2-x1)`和`b=y1-a*x1`。例如，我将在以下轮廓中选择 (x,y) 坐标：

创建数据和端点：

```
m=peaks(100);
x1=11 ; x2=97;
y1=66; y2=40; 
```

因此行参数为：

```
a=(y2-y1)/(x2-x1);
b=y1-a*x1; 
```

这条线是：

```
x=x1:x2;
y=round(a*x+b); 
```

使用线性索引选择正确的 (x,y) 元素：

```
ind=sub2ind(size(m),y,x) 
```

阴谋：

```
subplot(2,1,1)
contour(m,10); hold on
line([x1 x2],[y1 y2],'Color',[1 0 0]);

subplot(2,1,2)
plot(m(ind)) 
```

![在此处输入图像描述](../Images/41b46f931994a3d5f552b011183df127.png)

您现在可以使用`vec=m(ind)`来适应您的功能。

# android - 如何仅从 json 解析直接 json 对象

> ID：15491676
> 
> 赞同：2
> 
> 时间：2013-03-19T04:47:26.180
> 
> 标签：android, json, parsing

[这](http://rate-exchange.appspot.com/currency?from=USD&to=CAD&q=5)是我的 JSON 链接，以及它的外观：

```
{
"to": "CAD", 
"rate": 1.0223997600000001, 
"from": "USD", 
"v": 5.1119988000000003
} 
```

我试过这个语法：

```
JSONObject o = new JSONObject(sourceString);
String from = o.getString("from"); 
```

但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:30:56.963

你可以创建一个类

```
public class Abc {
String to;
String rate;
String from;
String v;
} 
```

然后可以使用下面的代码进行解析

```
JsonObject obj= gson.fromJson(DATA,Abc.class); 
```

其中 DATA 将是您的 gson 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T05:34:36.340

你是在模拟器上运行的吗？或者，如果您在设备上运行它，然后在您的互联网连接上关闭它，它会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T05:54:57.183

你好检查这个代码它给你的结果是日志（错误）

```
protected void getJSONFromURL(String string) {
        // TODO Auto-generated method stub
        string = "http://rate-exchange.appspot.com/currency?from=USD&to=CAD&q=5";
        String is = null;
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpGet Get = new HttpGet(string);

            HttpResponse responce = httpclient.execute(Get);
            HttpEntity entity = responce.getEntity();
            is = EntityUtils.toString(entity, "UTF-8");
            Log.e("responce-->", "" + is.toString());

            if (!is.toString().equalsIgnoreCase("")) {
                JSONObject ob = new JSONObject(is.toString());
                String to = ob.getString("to");
                Log.e("to", "" + to);
                String from = ob.getString("from");
                Log.e("from", "" + from);
                double rate = ob.getDouble("rate");
                Log.e("rate", "" + rate);
                double v = ob.getDouble("v");
                Log.e("v", "" + v);
            }
        } catch (Exception e) {
            // TODO: handle exception
            Log.d("call http :", e.getMessage().toString());
            is = null;
        }

    } 
```

如果您在 3.0 以上操作系统，则还包括此代码；

```
int SDK_INT = android.os.Build.VERSION.SDK_INT;

if (SDK_INT>8){

StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

StrictMode.setThreadPolicy(policy); 

} 
```

你的结果在这里：

```
03-19 11:23:22.745: E/responce-->(811): {"to": "CAD", "rate": 1.0220998400000001, "from": "USD", "v": 5.1104992000000005}
03-19 11:23:22.745: E/to(811): CAD
03-19 11:23:22.776: E/from(811): USD
03-19 11:23:22.776: E/rate(811): 1.02209984
03-19 11:23:22.791: E/v(811): 5.1104992000000005 
```

# c# - 在 C# 中构造树算法的最佳方法

> ID：15491678
> 
> 赞同：0
> 
> 时间：2013-03-19T04:47:37.807
> 
> 标签：c#, sql, algorithm, sorting

我在**寻找最有效的**解决方案时遇到了一个小问题。*我有一个学生编号*，例如 10 。其中一些 id 彼此是相对的（兄弟姐妹）。对于那些是兄弟姐妹的人来说，只留下一个来识别，不管哪个，第一个就可以了。

例如，学生证

*   原来的

    1、2、3、4、5、6、7、8、9、10

`1, 2, 3`一个家庭兄弟姐妹在哪里，`8, 9`另一个在哪里。最后我应该有：

*   预期的

    **1、4、5、6、7、8、10** _ **_** _

我是通过循环来做的。

* * *

**更新：**

我只是停下来实施它，因为它变得越来越大。这是我脑海中的大图。我只是逐行收集每个给定 id 的所有兄弟 id，然后我将逐个迭代。但就像我说的那样，这是在浪费时间。

*   代码（概念上）

    ```
    static string Trimsiblings(string ppl) {
        string[] pids=ppl.Split(',');
        Stack<string> personid=new Stack<string>();

        foreach(string pid in pids) {
            // access database and check for all sibling 
            // is for each individual pid 
            // such as in example above 
            // row 1: field 1=1, field2=2, field3=3 
            // row 2: field 1=8, field2=9 

            query = Select..where ..id = pid; // this line is pesudo code

            for(int i=0; i<query.Length; i++) {
                foreach(string pid in pids) {
                    if(query.field1==pid) {
                        personid.Push(pid); 
    ```

    ```
     }
                }
            }
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:28:18.343

对于有效的代码，必须注意每个兄弟家庭的一个成员（例如，第一个）是不相关的，因为它将保留在输出中。也就是说，我们只需要

1.  创建一个不能出现在输出中的项目列表
2.  实际上删除它们

当然，这仅在每个兄弟实际上都出现在原始 id 列表中的假设下才有效。

在代码中：

```
int[] ids = new int[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
int families = new int[2][] {
    new int [] {1, 2, 3},
    new int [] {8, 9}
};
var itemsToOmit = siblings.
    Select(family => family.Skip(1)).
    Aggregate((family1, family2) => family1.Concat(family2));
var cleanedIds = ids.Except(itemsToOmit); 
```

编辑：既然你提到你对语法不太熟悉，我会做一些进一步的解释

*   我使用的表达式是属于[System.LINQ](http://msdn.microsoft.com/de-de/library/vstudio/system.linq.aspx)命名空间的[扩展方法](http://msdn.microsoft.com/de-de/library/vstudio/bb383977.aspx)
*   [Select](http://msdn.microsoft.com/de-de/library/system.linq.enumerable.select.aspx)方法将一个序列转换为另一个序列。由于`families`是*序列的序列*，`family`将是同一家庭中的兄弟姐妹序列（即，`1, 2, 3`在`8, 9`这种特殊情况下）
*   [Skip](http://msdn.microsoft.com/de-de/library/vstudio/bb358985.aspx)方法跳过序列中的许多元素。在这里，我决定总是跳过第一个元素（原因见上文）
*   [Aggregate](http://msdn.microsoft.com/de-de/library/system.linq.enumerable.aggregate.aspx)方法将序列的元素组合成单个元素。在这里，所有兄弟姐妹的家庭只是相互连接（除了每个家庭的第一个兄弟姐妹，已通过 Skip 省略）
*   [except方法返回序列中](http://msdn.microsoft.com/de-de/library/vstudio/bb300779.aspx)**不在**作为参数给出的序列中的所有元素。

我希望这能澄清一些事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T07:55:23.470

**方法**如下

 **```
public static String Trimsiblings(String ppl) {
    var table=GetSiblingTable();
    var pids=ppl.Split(',');

    return
        String.Join(", ", (
            from id in pids.Select(x => int.Parse(x))
            where (
                from row in table.AsEnumerable()
                select
                    from DataColumn column in table.Columns
                    let data=row[column.ColumnName]
                    where DBNull.Value!=data
                    select int.Parse((String)data)
                ).All(x => false==x.Contains(id)||x.First()==id)
            select id.ToString()).ToArray()
            );
} 
```

```
// emulation of getting table from database
public static DataTable GetSiblingTable() {
    var dt=new DataTable();

    // define field1, ..., fieldn
    for(int n=3, i=1+n; i-->1; dt.Columns.Add("field"+i))
        ;

    dt.Rows.Add(new object[] { 1, 2, 3 });
    dt.Rows.Add(new object[] { 8, 9 });
    return dt;
}

public static void TestMethod() {
    Console.WriteLine("{0}", Trimsiblings("1, 2, 3, 4, 5, 6, 7, 8, 9, 10"));
} 
```

评论以询问**原因**（如果需要）。**

# c# - 如何获得完整的查询字符串？

> ID：15491680
> 
> 赞同：2
> 
> 时间：2013-03-19T04:47:42.350
> 
> 标签：c#, asp.net

如何在 asp.net 中获取完整的查询字符串？假设像这样的 QueryString 传递给我的登录页面。

```
login.aspx?redirect=cart.aspx&p=1&q=2&r=3 
```

我必须将参数 p、q 和 r 传递给 Cart.aspx，其中包含除重定向之外的所有参数。Login.aspx 可以处理不同的查询字符串，但除重定向之外的所有参数都将传递给重定向页面。（实际上，我知道会有一个参数'redirect'，但不能为 p、q 和 r bcoz 编写代码可能会在不同的情况下改变）

***除了'redirect'之外的参数在不同的上下文中会有所不同。p,q,r 是 cart.aspx 的必需参数。如果重定向到另一个页面，则参数可能不是 p,q,r 而是其他类似 l,m,n***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T05:07:10.253

您可以使用获取参数

```
string _url=Request.RawUrl.toString();

and

For path ... 

string _path = Request.Path.ToString();

string _url = Request.ServerVariables["URL"].ToString();

O/P = /Home/About/ 
```

RawURl 返回整个查询字符串....

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T05:11:38.760

你可以这样使用

```
Request.Url.Query 
```

像这样输入

```
Input: http://localhost:96/Cambia3/Temp/Test.aspx?q=item#fragment 
```

输出

# android - 如果通话处于摘机状态，则停止 tts

> ID：15491681
> 
> 赞同：0
> 
> 时间：2013-03-19T04:47:43.540
> 
> 标签：android

我正在做一个应用程序，它会在铃声响起 4 秒后说出来电者姓名。问题是它会在两三声响铃后说出来电者姓名。问题是即使呼叫处于摘机或空闲状态，它也会一直说出呼叫者的姓名，我不希望这样。

广播接收器的 onreceive 代码是

```
 state = bundle.getString(TelephonyManager.EXTRA_STATE);
         if(state.equals( TelephonyManager.CALL_STATE_OFFHOOK))   
         {
            System.out.println("fjkerj"); 
         }
         else if(state.equals( TelephonyManager.CALL_STATE_IDLE))   
         {

         }

         else if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING))
         {
             System.out.println("Entered Receiver");
                 final String phonenumber = bundle.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);   
   //                     String info = "Detect Calls sample application\nIncoming number: " + phonenumber;
                 AudioManager amanager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
             switch (amanager.getRingerMode()) {
             case AudioManager.RINGER_MODE_SILENT:
             System.out.println("Silent");
                 break;
             case AudioManager.RINGER_MODE_VIBRATE:
                 System.out.println("Vibrate");
                 break;
             case AudioManager.RINGER_MODE_NORMAL:

                 amanager.setStreamVolume(AudioManager.STREAM_RING,1, 0);    
                 Handler handler=new Handler();
                  Runnable r=new Runnable()
                  {
                      public void run() 
                      {

                          if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING))
                          {
                              Intent IncomingNumberIntent = new Intent(context1,SpeakOut.class);  
                              IncomingNumberIntent.putExtra("PhoneNumber", phonenumber);
                              context1.startService(IncomingNumberIntent); 
                          }

                      }
                  };
                  handler.postDelayed(r, 3000); 
```

如果呼叫在响铃并且配置文件正常，它会转到服务并说出名称，但即使呼叫摘机，应用程序也会说出名称的麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:58:28.697

将您的代码更改为

```
int state = bundle.getInt(TelephonyManager.EXTRA_STATE);
switch (state)
{
    case TelephonyManager.CALL_STATE_OFFHOOK:
        System.out.println("fjkerj"); 
        break;

    case TelephonyManager.CALL_STATE_IDLE:
        break;

    case TelephonyManager.CALL_STATE_RINGING:
        // Your code goes here
} 
```

从 run() 方法中删除 if 语句

```
if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING)) 
```

# ruby-on-rails - 抓取 Ruby on Rails 文件并安装在本地机器上

> ID：15491684
> 
> 赞同：2
> 
> 时间：2013-03-19T04:48:23.803
> 
> 标签：ruby-on-rails, ruby, rails-migrations

可以在许多不同情况下使用的一般问题，所以我认为问这个问题会很有趣。

我对 Ruby 不熟悉，正在向 Treehouse 学习。我正在做社交媒体网站项目，并且大约完成了一半。

我希望从他们给你的源文件中建立一个单独的安装，对完整的站点进行简单的比较和对比，我真的很好奇最终产品会是什么样子。

我的问题是，有没有一种简单的方法来获取他们的文件、安装所有的 gem 和依赖项并运行 rails 服务器。如果我只是尝试在文件夹上运行服务器，我会收到一堆关于未安装 Gems 的错误，这是意料之中的。

如果有人在执行将整个环境从一个位置迁移到另一个位置等操作时使用了一个流程，我们将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T06:18:35.707

1.  进入项目目录。

2.  通过执行安装所有必需的 Gems

    `bundle install`

3.  通过执行创建数据库

    `rake db:create`

4.  然后通过执行迁移数据库

    `rake db:migrate`

5.  最后使用

    `rails s`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T05:08:23.250

如果您克隆了他们的存储库，或将文件复制到文件夹，请尝试运行

```
bundle install 
```

从命令行

# php - 如何找到所需的唯一结果

> ID：15491685
> 
> 赞同：3
> 
> 时间：2013-03-19T04:48:26.290
> 
> 标签：php, mysql, sql

我有两个表“主题”和“子类别”

我正在使用这个查询——

```
Select * from `subcategory` as s 
Inner join `topic` as f
WHERE s.`Subcategory_id` = f.`Subcategory_id 
```

我的结果显示像

**Category_id Subcategory_id Post_id 时间**

```
 2        2.3         4    2012-12-01
    1        1.5         5    2013-01-20
    1        1.3         6    2013-03-18 
```

还有其他列......但我想要的只是选择一个 Category_id 的最新 Post_id 和 Subcategory_id ...这意味着这里的 Category 1 有两个 Subcategory 它只会选择最新的（这里是 1.3）和相同的结果数据库将变大时的所有类别。下一个查询是什么，或者我如何更改现有查询以获得我想要的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T04:59:29.033

```
SELECT TOP 1 ... ORDER BY whatever column determines "the latest" 
```

例如

```
SELECT TOP 1 ... ORDER BY TIME DESCENDING 
```

或者在mysql的情况下：

```
SELECT ... ORDER BY TIME DESCENDING LIMIT 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T05:10:40.630

```
SELECT Post_Id, Subcategory_Id from subcategory as s, topic as t where 
   s.Subcategory_id = t.Subcategory_id and time = (
      SELECT Max(time) from subcategory as s1, topic as t1 where 
         s1.Subcategory_id = t1.Subcategory_id and s1.Category_id = s.Category_id
   ); 
```

我认为，这样的事情会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T05:21:50.117

使用以下查询加入您的主题表：

```
SELECT s.* FROM subcategory s
    Inner JOIN (SELECT s1.Category_id,
                 MAX(s1.time1) AS max_time
                 FROM subcategory s1
                 GROUP BY s1.Category_id) y 
ON y.Category_id = s.Category_id AND y.max_time = s.time1 
```

# javafx - 在 javafx 的初始屏幕期间加载 jar 文件

> ID：15491687
> 
> 赞同：1
> 
> 时间：2013-03-19T04:48:35.133
> 
> 标签：javafx, splash-screen, jarsigner

我有一个引用 4 - 5 个外部 jar (lib) 的应用程序。但是当我在 netbeans 上运行我的应用程序时，netbeans 首先加载 jar 文件，然后出现我的应用程序场景。我正在尝试将 javafx 预加载器用于启动画面。但是预加载器场景也会在 jar 文件加载后加载。但是我想在我的预加载器场景显示期间加载 jar，即我希望加载 jar 作为启动屏幕的进度，然后我的主应用程序场景应该开始。请帮忙

我的 JNLP 文件

```
 <?xml version="1.0" encoding="utf-8"?>
<jnlp spec="1.0" xmlns:jfx="http://javafx.com" href="Black.jnlp">
  <information>
    <title>Black</title>
    <vendor>RATTAN</vendor>
    <description>Sample JavaFX 2.0 application.</description>
    <offline-allowed/>
  </information>
  <resources os="Windows">
    <jfx:javafx-runtime version="2.0+" href="http://javadl.sun.com/webapps/download/GetFile/javafx-latest/windows-i586/javafx2.jnlp"/>
  </resources>
  <resources>
    <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se"/>
    <jar href="Black.jar" size="2407915" download="eager" />
    <jar href="lib/commons-codec-1.6.jar" size="253494" download="eager" />
    <jar href="lib/commons-io-1.3.2.jar" size="95657" download="eager" />
    <jar href="lib/commons-lang-2.0.jar" size="179419" download="eager" />
    <jar href="lib/newlink.jar" size="6161" download="eager" />
    <jar href="lib/scribe-1.3.0.jar" size="74544" download="eager" />
  </resources>
<security>
  <all-permissions/>
</security>
  <applet-desc  width="800" height="600" main-class="com.javafx.main.NoJavaFXFallback"  name="Black" />
  <jfx:javafx-desc  width="800" height="600" main-class="test.Test"  name="Black" />
  <update check="always"/>
</jnlp> 
```

我使用了另一个预加载器项目，我已将其配置为我在 netbeans 中的主项目的预加载器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:31:48.997

遵循[使用 Preloader 打包应用程序](http://docs.oracle.com/javafx/2/deployment/preloaders.htm#BABJDJDJ)的文档。

检查您生成的 jnlp 文件，它应该包含类似于以下内容的值：

```
<resources>
  <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se"/>
  <jar href="lib/FirstPreloader.jar" size="2801" download="progress" />
  <jar href="AnimatedCircles.jar" size="13729" download="always" />
</resources>
<applet-desc  width="800" height="600"
    main-class="com.javafx.main.NoJavaFXFallback"  name="AnimatedCircles" />
<jfx:javafx-desc  width="800" height="600"
  main-class="animatedcircles.AnimatedCircles"  name="AnimatedCircles"  
  preloader-class="firstpreloader.FirstPreloader"/>
<update check="background"/> 
```

`download="progress"`注意Preloader jar 上的一些重要标签，`preloader-class`以及`update check="background"`.

`download=lazy`如果您愿意，您还可以在一些依赖 jar 上设置一个值（请参阅[jnlp 规范](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html)）。如果您有预加载器，则可能不需要延迟下载，但它被定义为：

> 这意味着在启动应用程序之前不必将资源下载到客户端系统上。

请注意，一旦打开更新检查并使用延迟下载，在开发过程中准确调试应用程序可能会非常困难，因为在执行时，应用程序可能使用缓存版本的代码而不是最新版本的代码。所以这类交换机最好只用于最终部署。

另请阅读 JavaFX 部署指南的[性能提示](http://docs.oracle.com/javafx/2/deployment/preloaders.htm#BABIJCII)部分。

# php - 在 php 函数中使用 pow

> ID：15491691
> 
> 赞同：0
> 
> 时间：2013-03-19T04:49:00.263
> 
> 标签：php, function, variables, pow

我对 PHP 还很陌生，我似乎在作业上遇到了障碍。我正在尝试创建一个函数来计算单利贷款的每月付款。这是我的代码。

```
function calc_payment($price, $months, $interest){
    $number = (1+($interest/12));
    $exp = pow($number, $months);
    return ($price($interest/12))/(1-$exp);
} 
```

但是，当我尝试执行时遇到如下错误：

> 致命错误：函数名称必须是第 5 行（文件路径）中的字符串

我不确定问题是什么，因为 pow 是一个预定义的函数。奇怪的是，这将在函数内部起作用：

```
echo pow($number, months); 
```

并给我正确的数据，但是如果我尝试将其分配给变量或在计算内部，它似乎会中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:51:10.317

错误所在的行是这样的：

```
($price($interest/12))/(1-$exp); 
```

我想你的意思是：

```
return $price*$interest/12/(1-$exp); 
```

# php - 循环生成的 HTML 问题

> ID：15491694
> 
> 赞同：1
> 
> 时间：2013-03-19T04:49:10.073
> 
> 标签：php, html, loops

我在创建可折叠元素列表时遇到了一些问题。[JSFiddle](http://jsfiddle.net/for3v3rforgott3n/Q63Dx/2/)

我的代码如下所示：

```
<div class="projectscontainer">
    <span class="item destproject" title="ID: 384">Kaoweuzax-Xrjamjhxteaq</span><br>
    <div class="srcprojects">
        <div class="arrow-right"></div>
            <span class="item srcproject" title="ID: 1991">Eovwurxmpgmz 6.b</span><br>
    </div>
</div>
<div class="projectscontainer">
    <span class="item destproject" title="ID: 383">Uxiuhbgbt0.5-Rdsopvxc Fucxbhivs</span><br>
    <div class="srcprojects">
        <div class="arrow-right"></div>
        <span class="item srcproject" title="ID: 1990">Zekgyfrmc-Tpuduwzr Idkudowbi</span><br>
    </div>
</div>
<div class="projectscontainer">
    <span class="item destproject" title="ID: 394">Lyxiyp</span><br>
    <div class="srcprojects">
        <div class="arrow-right"></div>
        <span class="item srcproject" title="ID: 2108">Kdvdz</span><br>
    </div>
</div>
    <div class="srcprojects">
        <div class="arrow-right"></div>
        <span class="item srcproject" title="ID: 2109">Derqi-AA_Boejbvr</span><br>
    </div>
    <div class="srcprojects">
        <div class="arrow-right"></div>
        <span class="item srcproject" title="ID: 2110">Yhdju-SkneLxiyuz</span><br>
    </div> 
```

jQuery在这里：

```
$(document).ready(function(){
    $(".projectscontainer").click(function(){
      $(this).children('.srcprojects').toggle();
    });
}); 
```

PHP：

```
<?php
$result_rules = $db->query("SELECT rules.source_id, rules.destination_id, dest.project AS dest_project, src.project AS src_project, src.    pk_id as src_id
        FROM dbo.FFC_Rules rules
        INNER JOIN dbo.FFC_Destination dest
            ON dest.pk_id=rules.destination_id
        LEFT JOIN dbo.FFC_Source src
            ON src.pk_id=rules.source_id
        ORDER BY dest.project ASC");

$last_dest = false;
$last_src = false;
while($row = sqlsrv_fetch_array($result_rules)){  
    if ($row['destination_id'] !== $last_dest) {
        $last_dest=$row['destination_id'];
        echo "<div class='projectscontainer'>";
        echo    "-<span class='item destproject' title='ID: ".$row['destination_id']."'>".$row['dest_project']."</span>";
        echo    "<br>";
    }
        echo    "<div class='srcprojects'>";
        echo        "<div class='arrow-right'></div>";
    if ($row['src_id'] === null) {
        echo        " Source ID for Destination ID ".$row['destination_id']." is NULL ";
    } else {
        echo        "<span class='item srcproject' title='ID: ".$row['src_id']."'>".$row['src_project']."</span>";
    }
    echo            "<br>";
    echo        "</div>";
    echo    "</div>";
}
?> 
```

现在，如果 destproject 下只有 1 个 srcproject，它就可以工作，但是我希望在单击 destproject 时隐藏 destproject 的所有子项（srcproject）。

在第三个projectscontainer div中，在打印出所有srcprojects之前添加了结束div标签。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:59:00.407

你的循环中有一些奇怪的东西。你在打开

```
<div class='projectscontainer'> 
```

在这种情况下

```
if ($row['destination_id'] !== $last_dest) { 
```

但是您不是`<div>`在相同的条件下关闭，而是在`<div>`没有任何条件的情况下关闭。我认为生成的 HTML 格式不正确，您的浏览器会尽力修复它（徒劳无功）。

尝试：

```
// Initialize the last dest
$last_dest = false;

// Loop on each result
while($row = sqlsrv_fetch_array($result_rules)) {

    // Check if the section is changing or if we are at the begining
    if ($row['destination_id'] !== $last_dest || $last_dest === false) {

        // Close the previous projectscontainer tag if we are not at the begining of the process
        if ($last_dest !== false)
            echo "</div>";

        // Update the last dest
        $last_dest = $row['destination_id'];

        // Open the new projectscontainer 
        echo "<div class='projectscontainer'>";
        echo    "-<span class='item destproject' title='ID: ".$row['destination_id']."'>".$row['dest_project']."</span>";
        echo    "<br>";
    }

    // Print the sub block
    echo "<div class='srcprojects'>";
    echo "    <div class='arrow-right'></div>";

    if ($row['src_id'] === null) {
        echo "Source ID for Destination ID ".$row['destination_id']." is NULL ";
    } else {
        echo        "<span class='item srcproject' title='ID: ".$row['src_id']."'>".$row['src_project']."</span>";
    }

    echo "<br />";
    echo "</div>";
}

// At the end at the process, close the last projectscontainer
echo "</div>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:16:48.923

我认为您希望隐藏最后一个项目的所有子项，在这种情况下，您必须将 HTML 内容更改为此

```
 <div class="projectscontainer"> <span class="item destproject" title="ID: 394">Lyxiyp</span>
<br>
<div class="srcprojects">
    <div class="arrow-right"></div> <span class="item srcproject" title="ID: 2108">Kdvdz</span>
    <br>
</div>
<div class="srcprojects">
    <div class="arrow-right"></div> <span class="item srcproject" title="ID: 2109">Derqi-AA_Boejbvr</span>
    <br>
</div>
<div class="srcprojects">
    <div class="arrow-right"></div> <span class="item srcproject" title="ID: 2110">Yhdju-SkneLxiyuz</span>
    <br>
</div>
<div class="srcprojects">
    <div class="arrow-right"></div> <span class="item srcproject" title="ID: 2110">Fcnlw-YTR-Orzqksr</span>
    <br>
</div>

<div class="srcprojects">
    <div class="arrow-right"></div> <span class="item srcproject" title="ID: 2110">Awhsa-DT</span>
    <br>
</div>

<div class="srcprojects">
    <div class="arrow-right"></div> <span class="item srcproject" title="ID: 2110">Kxqda-WuxkorctkwmWlioamud</span>
    <br>
</div>
<div class="srcprojects">
    <div class="arrow-right"></div> <span class="item srcproject" title="ID: 2110">Jnlps-NcsgfdlbpzaAhdthi</span>
    <br>

</div> 
```

# c# - 在 c# 中实现策略模式有什么问题

> ID：15491700
> 
> 赞同：0
> 
> 时间：2013-03-19T04:49:33.713
> 
> 标签：c#, strategy-pattern

我正在尝试使用嵌套类实现策略模式。

```
public class Restriction
{
    protected SpecificRestriction _specificRestriction;

    public void SetGreaterRestriction(decimal value)
    {
        Greater greaterRestriction = new Greater();
        greaterRestriction.GreaterValue = value;
        _specificRestriction = greaterRestriction;
    }

    public void SetLessRestriction(decimal value)
    {
        Less lessRestriction = new Less();
        lessRestriction.LessValue = value;
        _specificRestriction = lessRestriction;
    }

    public void SetRangeRestriction(decimal lessValue, decimal greaterValue)
    {
        Range r = new Range();
        r.GreaterValue= greaterValue;
        r.LessValue= lessValue;
        _specificRestriction = r;
    }

    public bool Eval(decimal Value2)
    { 
        return _specificRestriction.Eval(Value2);
    }

    /* Nested strategies classes */

    protected abstract class SpecificRestriction
    {     
        public abstract bool Eval(decimal Value);
    }

    protected class Less : SpecificRestriction
    {
        public decimal LessValue { get; set; }
        public override bool Eval(decimal lessValue)
        {
            return lessValue < LessValue ;
        }
    }

    protected class Greater : SpecificRestriction
    {
        public decimal GreaterValue { get; set; }
        public override bool Eval(decimal greaterValue)
        {
            return greaterValue > GreaterValue;
        }
    }

    protected class Range : SpecificRestriction
    {
        public decimal LessValue { get; set; }
        public decimal GreaterValue { get; set; }

        public override bool Eval(decimal mediumValue)
        {
            return LessValue <= mediumValue && mediumValue <= GreaterValue;
        }
    }
} 
```

测试：

```
 Restriction r = new Restriction();

        r.SetLessRestriction(12);
        r.Eval(13)  // Return false   <- Works!
        r.Eval(11)  // Return True    <- Works!

        r.SetGreaterRestriction(12);
        r.Eval(13)     // Return True    <- Works!
        r.Eval(11)     // Return False   <- Works!

        r.SetRangeRestriction(12, 15);
        r.Eval(13)  // Return false     <- It does not works
        r.Eval(11)  // Return false     <- Works!
        r.Eval(16)  // Return false     <- Works! 
```

为什么 Range 它不起作用？我在 Range 课上做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:13:10.173

限制类需要进行一些更改，并且可以正常工作

> 公共类限制 { 受保护的具体限制 _specificRestriction;
> 
> ```
>  public void SetGreaterRestriction(decimal value)
>     {
>         Greater greaterRestriction = new Greater();
>         greaterRestriction.GreaterValue = value;
>         _specificRestriction = greaterRestriction;
>     }
> 
>     public void SetLessRestriction(decimal value)
>     {
>         Less lessRestriction = new Less();
>         lessRestriction.LessValue = value;
>         _specificRestriction = lessRestriction;
>     }
> 
>     public void SetRangeRestriction(decimal lessValue, decimal greaterValue)
>     {
>         Range r = new Range();
>         r.GreaterValue = greaterValue;
>         r.LessValue = lessValue;
>         _specificRestriction = r;
>     }
> 
>     public bool Eval(decimal Value2)
>     {
>         return _specificRestriction.Eval(Value2);
>     }
> 
>     /* Nested strategies classes */
> 
>     protected abstract class SpecificRestriction
>     {
>         public abstract bool Eval(decimal Value);
>     }
> 
>     protected class Less : SpecificRestriction
>     {
>         public decimal LessValue { get; set; }
>         public override bool Eval(decimal lessValue)
>         {
>             return lessValue < LessValue;
>         }
>     }
> 
>     protected class Greater : SpecificRestriction
>     {
>         public decimal GreaterValue { get; set; }
>         public override bool Eval(decimal greaterValue)
>         {
>             return greaterValue > GreaterValue;
>         }
>     }
> 
>     protected class Range : SpecificRestriction
>     {
>         public decimal LessValue { get; set; }
>         public decimal GreaterValue { get; set; }
> 
>         public override bool Eval(decimal mediumValue)
>         {
>             return LessValue <= mediumValue && mediumValue <= GreaterValue;
>         }
>     }
> } 
> ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T05:14:55.730

您的 Range 类不会覆盖 Eval 方法，它会覆盖 Evaluar 方法。

# c# - .net 远程处理，如果连接丢失如何重新连接？

> ID：15491702
> 
> 赞同：2
> 
> 时间：2013-03-19T04:49:39.730
> 
> 标签：c#, .net-remoting

我有这个工作，但我不明白如何预测连接何时断开并需要重新连接到服务器。

我想要做的是让客户端立即连接到 .net 远程服务器，如果它退出，有点像继续尝试连接并忽略它是否不需要。

帮助表示赞赏。

这是我的代码：

```
namespace TaskClient
{
    using System;
    using System.Reflection;
    using System.Runtime.Remoting.Channels;
    using System.Runtime.Remoting.Channels.Tcp;
    using System.Threading;
    using TaskShared;

    class Program
    {
        static void Main(string[] args)
        {
            TcpChannel chan = new TcpChannel();
            ChannelServices.RegisterChannel(chan, false);
            Connections remObject = (Connections)Activator.GetObject(typeof(Connections), "tcp://localhost:8085/TaskServer");

            if (remObject == null)
            {
                Console.WriteLine("Could not connect to TaskServer. (tcp://localhost:8085/TaskServer)");
            }
            else
            {
                Console.WriteLine("Connected to Task Server.");

                var rt = new TestTask() 
                {
                    ApplicationName = Assembly.GetExecutingAssembly().FullName,
                    ComputerName = Environment.MachineName,
                    VersionInfo = "1.0.0",
                    JobRunning = "None"
                };

                remObject.Add(rt);
            }

            while (true)
            {
                //TODO:
                //Check if connected.. how?
                //Re-create the connection... how?

                //doing this simple won't work:
                if (remObject == null)
                    remObject = (Connections)Activator.GetObject(typeof(Connections), "tcp://localhost:8085/TaskServer");

                remObject.Invalidate(remObject[rt]);

                Thread.Sleep(1000);
            }
        }
    }
} 
```

# php - 你能“扩展”表单类吗？

> ID：15491703
> 
> 赞同：0
> 
> 时间：2013-03-19T04:49:46.673
> 
> 标签：php, symfony

我正在为我的表单[创建表单类](http://symfony.com/doc/2.1/book/forms.html#creating-form-classes)，但无法弄清楚如何“扩展”它们。

例如，我有一个`CustomerType`表单类和一个`EmailType`表单类。我可以`EmailType`直接添加到我的`CustomerType`

```
$builder->add('emails', 'collection', array(
    'type'         => new EmailType(),
    'allow_add'    => true,
    'by_reference' => false
)); 
```

但我更喜欢在控制器中执行此操作，以便我的`CustomerType`表单类仅包含客户信息。我觉得这更加模块化和可重用，因为有时我希望我的用户能够只编辑`Customer`详细信息，而其他人既可以编辑详细信息，也可以编辑与该客户关联的对象`Customer`。`Email`（例如，第一种情况是查看客户的工单，第二种情况是创建新客户）。

这可能吗？我在想一些事情

```
$form = $this->createForm(new CustomerType(), $customer);
$form->add('emails', 'collection', ...) 
```

在我的控制器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:45:25.570

您可以在创建表单时将一个选项（例如“with_email_edition”）传递给您的表单，以判断表单是否应该嵌入集合。

**在控制器中：**

```
$form = $this->createForm( new CustomerType(), $customerEntity, array('with_email_edition' => true) ); 
```

**在表格中：**

只需在 setDefaultOptions 中添加选项：

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
     $resolver->setDefaults(array(
                'with_email_edition' => null,
            ))
            ->setAllowedValues(array(
                'with_email_edition' => array(true, false),
            ));
} 
```

然后在“buildForm”中检查这个选项的值，并根据它添加一个字段：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
     if( array_key_exists("with_email_edition", $options) && $options['with_email_edition'] === true )
     {
          //Add a specific field with  $builder->add for example
     }
} 
```

# java - 如何使用url解析jquery中的json

> ID：15491705
> 
> 赞同：-1
> 
> 时间：2013-03-19T04:50:32.700
> 
> 标签：java, jquery, html

我对**jquery**完全陌生，无法解析以下**json**。我正在使用 icenium 并已将此功能包含在我的 js 文件夹中。这不起作用。

```
$(document).ready(function () {
            $.ajax({ 
                type: 'GET', 
                url: 'http://young-wildwood-2240.herokuapp.com/api/v4/options.json', 
                data: { get_param: 'value' }, 
                success: function (data) { 
                                    var names = data
                    $('#body').html(data);
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:00:23.127

您必须将标签 dataType 归因于 json。如果数组中有前缀，请使用它们来获取值。

```
 $.ajax({ 
                type: 'GET', 
                url: 'http://young-wildwood-2240.herokuapp.com/api/v4/options.json', 
                dataType: 'json',
                data: { get_param: 'value' }, 
                success: function (data) { 
                    var names = data;
                    console.log(data.id);
                    console.log(data.question_id);
                    $('#body').html(data);
                }
            }); 
```

对不起我的英语不好，我不是美国人。

# haskell - 无法推断 (Eq a)，将 Eq 添加到类型类

> ID：15491707
> 
> 赞同：4
> 
> 时间：2013-03-19T04:50:44.440
> 
> 标签：haskell

我对 Haskell 很陌生，在尝试编译[Frag](http://www.haskell.org/haskellwiki/Frag)时遇到了这个错误。

```
src/AFRPVectorSpace.hs:51:25:
    Could not deduce (Eq a) arising from a use of `/='
    from the context (VectorSpace v a)
      bound by the class declaration for `VectorSpace'
      at src/AFRPVectorSpace.hs:(32,1)-(53,23)
    Possible fix:
      add (Eq a) to the context of
        the class declaration for `VectorSpace'
    In the expression: nv /= 0
    In the expression:
      if nv /= 0 then v ^/ nv else error "normalize: zero vector"
    In an equation for `normalize':
        normalize v
          = if nv /= 0 then v ^/ nv else error "normalize: zero vector"
          where
              nv = norm v 
```

相关代码：

```
class Floating a => VectorSpace v a | v -> a where
    zeroVector   :: v
    (*^)         :: a -> v -> v
    (^/)         :: v -> a -> v
    negateVector :: v -> v
    (^+^)        :: v -> v -> v
    (^-^)        :: v -> v -> v
    dot          :: v -> v -> a
    norm     :: v -> a
    normalize    :: v -> v

    v ^/ a = (1/a) *^ v

    negateVector v = (-1) *^ v

    v1 ^-^ _ = v1 ^+^ v1 -- (negateVector v2)

    norm v = sqrt (v `dot` v)

    normalize v = if nv /= 0 then v ^/ nv else error "normalize: zero vector"
        where
        nv = norm v 
```

我的第一个猜测是我需要添加一个`Deriving Eq`或类似的东西，但我不确定我到底需要做什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T05:55:02.400

`class (Eq a,Floating a) => VectorSpace v a | v -> a`如果你想在你的默认实现中使用`/=`，我猜你需要拥有。`a`

第二种选择是`normalize`从类中删除并使其成为普通函数。

第三种选择是将约束添加到 的类型`normalize`，使其成为`Eq a => v -> v`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T07:24:42.330

在 ghc 7.4.1 之前，`Num a`类有`Eq a`约束，所以 any`Num a`也有`Eq a`. `Floating a`有约束`Num a`，所以什么`Floating a`也有`Eq a`。

但是，这在 7.4.1 中发生了变化，其中`Eq a`约束（以及`Show a`约束）已从`Num`类中删除。这就是代码不再工作的原因。

所以问题的解决方案正是 aleator 给出的：将`Eq a`约束显式添加到`VectorSpace`类中。

或者，您可能想要下载旧版本的 ghc（例如，基于 wiki 注释的 6.8）。该版本应该编译程序而不做任何更改。然后，如果您愿意，可以更新代码以使其与较新版本的 ghc 一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T11:33:32.380

*This isn't an answer to your question (which has already been answered), but since it's not easy to paste blocks of code into comments, I'll add it as an "answer".*

You might prefer to use type families instead of functional dependencies. Type families allow you to do everything you can do with functional dependencies, plus a whole lot more. Here's one way to write your code using type families. It looks very similar to your original code, except that your type variable `a` has been replaced with a "call" to a *type function* `Metric v` (the best name I could think of offhand.)

```
{-# LANGUAGE TypeFamilies, FlexibleContexts #-}

class Floating (Metric v) => VectorSpace v where
    type Metric v
    zeroVector   :: v
    (*^)         :: Metric v -> v -> v
    (^/)         :: v -> Metric v -> v
    negateVector :: v -> v
    (^+^)        :: v -> v -> v
    (^-^)        :: v -> v -> v
    dot          :: v -> v -> Metric v
    norm     :: v -> Metric v
    normalize    :: Eq (Metric v) => v -> v

    v ^/ a = (1/a) *^ v

    negateVector v = (-1) *^ v

    v1 ^-^ _ = v1 ^+^ v1 -- (negateVector v2)

    norm v = sqrt (v `dot` v)

    normalize v = if nv /= 0 then v ^/ nv else error "normalize: zero vector"
        where
        nv = norm v 
```

Here are some useful links:

*   [http://www.haskell.org/haskellwiki/GHC/Type_families](http://www.haskell.org/haskellwiki/GHC/Type_families)
*   [http://nattermorphisms.blogspot.ie/2008/10/2-minute-intro-to-associated-types-type.html](http://nattermorphisms.blogspot.ie/2008/10/2-minute-intro-to-associated-types-type.html)
*   [http://www.haskell.org/pipermail/haskell-cafe/2009-February/055890.html](http://www.haskell.org/pipermail/haskell-cafe/2009-February/055890.html)

# vb.net - SqlDataReader 将字节转换为整数 vb.net

> ID：15491710
> 
> 赞同：0
> 
> 时间：2013-03-19T04:50:55.367
> 
> 标签：vb.net, gridview, sqldatareader

我正在尝试使用 SqlDataReader 从数据库表中检索信息。我有两列，一个是字符串，另一列是位。该字符串将被填充到一个文本框中。但是当我想将它填充到单选按钮列表时，它的问题并没有发生。它一直给我这个错误`Specified cast is not valid.`这是我的vb服务器端代码：

```
Dim dt As DataTable = New DataTable()
        Dim command As New SqlCommand(query2, conn)
        Dim param As New SqlParameter()
        param.ParameterName = "@cUserName"
        param.Value = Session("Edit")
        command.Parameters.Add(param)

        Dim dr As SqlDataReader = command.ExecuteReader()
        If dr.HasRows Then
            dr.Read()
            tbUsername.Text = dr.GetString(0)
            rblDept.SelectedIndex = dr.GetByte(1)
        End If 
```

我试过`dr.GetByte(1)`了，但它不起作用。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:06:50.483

我做了一些愚蠢的事情并且它有效。代码是：

```
If dr.HasRows Then
            dr.Read()
            tbUsername.Text = dr.GetString(0)
            Dim deptid As Integer = CInt(dr(1))
            If deptid = -1 Then
                rblDept.SelectedIndex = 1
            Else
                rblDept.SelectedIndex = 0
            End If
        End If 
```

它工作完美。

谢谢大家。

# javascript - Facebook“喜欢”框 html5 代码不起作用

> ID：15491721
> 
> 赞同：1
> 
> 时间：2013-03-19T04:52:13.607
> 
> 标签：javascript, facebook, facebook-likebox

我目前正在尝试使用 Likebox 的 HTML5 版本，但它没有按预期工作。它在本地站点中不起作用，并且它也不会按应有的方式显示页面中的帖子。

这是代码：

[http://jsfiddle.net/qp4qr/1/](http://jsfiddle.net/qp4qr/1/)

***标记：***

```
<div style="text-align: center;">
    <div class="fb-like-box" data-href="http://facebook.com/nbglive" data-width="234" data-show-faces="true" data-stream="false" data-border-               <div class="well blackwell">color="#007Db7" data-header="false"></div>
  </div> 
```

***Javascript代码：***

```
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "http://connect.facebook.net/en_US/all.js#xfbml=1&appId=136619623172579";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk')); 
```

如您所见，它在 jsfiddle 上工作——很好——部分。它在本地文件中不起作用，当从 Web 提供时，它会执行它在 jsfiddle 中所做的操作，这将被破坏。

（在这一点上，我即将在 Facebook 上大放异彩）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:06:36.467

认为您忘记导入 Jquery

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=136619623172579";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:26:19.157

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>The HTML5</title>
  <meta name="description" content="The HTML5 FB TEST">
  <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
</head>
<body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/es_LA/all.js#xfbml=1&appId=136619623172579";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-like-box" data-href="http://www.facebook.com/platform" data-width="292" data-show-faces="true" data-stream="true" data-header="true"></div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-08T09:18:02.070

请参考我的回答这个
[Facebook 新的 Like Box（页面插件）不起作用](https://stackoverflow.com/questions/33710826/facebook-new-like-box-page-plugin-not-working/36494431#36494431)

我花了几个小时后使它工作，现在它也可以处理本地 html 文件。

# javascript - 最小的 jQuery 模板

> ID：15491724
> 
> 赞同：1
> 
> 时间：2013-03-19T04:52:38.620
> 
> 标签：javascript, jquery, html

我正在创建一个 UI，用户可以在其中添加/删除项目（类似布局）。

它从一项开始，您可以单击“添加”以添加更多。UI 由几种不同类型的项目组成。

我目前正在做的是填充单个项目`item 1`（每种类型），并且在`add`事件中，我克隆`item 1`，替换用户所做的更改`item 1`并将克隆附加到`container`. 简单来说，我不是使用 jQuery 动态创建 html，而是克隆`div`. 但是在这种方法中，我不得不改变很多东西来保持新项目的初始状态。

所以，我想避免替换用户所做的编辑，所以我想像下面这样，

```
<script type="text/template" id="item_type1">
  <div>
    <div>Box</div>
  </div>
</script>

<script type="text/template" id="item_type2">
  <div>
    <div>Box2</div>
  </div>
</script> 
```

在`add`活动中，我想做一些类似的事情`$('#item_type1').html()`并`$('#item_type2')`创建新项目。

我知道有一些复杂的库，比如把手和小胡子，下划线有自己的实现模板的方式。

但我还没有使用任何这些，因此不想仅仅为了复制内容而包含它们。我不想要任何特别的东西。我没有传递变量。我只是在克隆一些标记以便一次又一次地使用。

这种插入标签的方式是否适用于所有浏览器`html`？`script`这是一个好方法吗？

**编辑：**

它用于 wp 插件，我假设 js 已打开，否则插件无论如何都无法工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T04:57:11.913

关于什么：

例如，您的 HTML 应该是：

```
<script type="text/template" id="item_type1">
  <div>
    <h1>Box1</h1>
    <p>
    </p>
  </div>
</script> 
```

你的代码是：

```
var templateHtml = $('#item_type1').html();

var $item = $(templateHtml);
$('body').append($item);
$item.on('click', function() {}); 
```

这是一种适用于所有浏览器的简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:01:47.480

*   第 1 步：创建一个 HTML 文件，其中包含您的模板
*   第 2 步：使用 jQuery 的`load()`方法，将您的 HTML 模板调用到`div`主 HTML 文件中的一个元素中：

    `$("#main-div").load("yourtemplate.html")`

*   第 3 步：感到惊讶

**这是一个好主意吗？*这取决于：***

如果它是一个在已知环境中的自包含应用程序，具有确定的受支持浏览器和同样确定的设置（例如 JavaScript 是否打开），那么是的，当然。为什么不？

如果它在每个可能具有许多不同配置的浏览器中向公众开放，那么不，这是一个可怕的想法。如果您的用户没有启用 JavaScript，那么您的内容就不会显示。此外，如果您的某个脚本在生产中中断，那么您将再次没有内容。[你可以从Gawker 犯同样的错误](http://blogs.wsj.com/digits/2011/02/07/gawker-outage-causing-twitter-stir/)时吸取教训

# javascript - 在我的 django 模板中包含 CSS 和 Javascript

> ID：15491727
> 
> 赞同：30
> 
> 时间：2013-03-19T04:52:57.560
> 
> 标签：javascript, css, django

我是 Django 1.5 的新手，我已经了解了一些关于它的基本知识。我的问题是，我无法在我的模板中包含 css 和 javascript。我已经阅读了有关它的文档，但正如我所说。我是新手，看不懂。请帮助我了解在我的 base.djhtml 模板中包含 css 和 javascript 的分步过程。谢谢。

这是我的 settings.py

```
 # Django settings for myweblab project.

    DEBUG = True
    TEMPLATE_DEBUG = DEBUG

    import os.path
    PROJECT_DIR = os.path.dirname(__file__)

    ADMINS = (
        # ('Your Name', 'your_email@example.com'),
    )

    MANAGERS = ADMINS

    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
            'NAME': 'myweblabdev',                      # Or path to database file if using sqlite3.
            # The following settings are not used with sqlite3:
            'USER': '',
            'PASSWORD': '',
            'HOST': '',                      # Empty for localhost through domain sockets or '127.0.0.1' for localhost through TCP.
            'PORT': '',                      # Set to empty string for default.
        }
    }

    # Hosts/domain names that are valid for this site; required if DEBUG is False
    # See https://docs.djangoproject.com/en/1.5/ref/settings/#allowed-hosts
    ALLOWED_HOSTS = []

    # Local time zone for this installation. Choices can be found here:
    # http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
    # although not all choices may be available on all operating systems.
    # In a Windows environment this must be set to your system time zone.
    TIME_ZONE = 'America/Chicago'

    # Language code for this installation. All choices can be found here:
    # http://www.i18nguy.com/unicode/language-identifiers.html
    LANGUAGE_CODE = 'en-us'

    SITE_ID = 1

    # If you set this to False, Django will make some optimizations so as not
    # to load the internationalization machinery.
    USE_I18N = True

    # If you set this to False, Django will not format dates, numbers and
    # calendars according to the current locale.
    USE_L10N = True

    # If you set this to False, Django will not use timezone-aware datetimes.
    USE_TZ = True

    # Absolute filesystem path to the directory that will hold user-uploaded files.
    # Example: "/var/www/example.com/media/"
    MEDIA_ROOT = os.path.join(PROJECT_DIR, 'media')

    # URL that handles the media served from MEDIA_ROOT. Make sure to use a
    # trailing slash.
    # Examples: "http://example.com/media/", "http://media.example.com/"
    MEDIA_URL = 'http://localhost:8000/media/'

    # Absolute path to the directory static files should be collected to.
    # Don't put anything in this directory yourself; store your static files
    # in apps' "static/" subdirectories and in STATICFILES_DIRS.
    # Example: "/var/www/example.com/static/"
    STATIC_ROOT = ''

    # URL prefix for static files.
    # Example: "http://example.com/static/", "http://static.example.com/"
    STATIC_URL = '/static/'

    # Additional locations of static files
    CURRENT_PATH = os.path.abspath(os.path.dirname(os.path.dirname(__file__)).decode('utf-8'))

    STATICFILES_DIRS = (
        os.path.join(CURRENT_PATH, 'media'),
        # Put strings here, like "/home/html/static" or "C:/www/django/static".
        # Always use forward slashes, even on Windows.
        # Don't forget to use absolute paths, not relative paths.
    )

    # List of finder classes that know how to find static files in
    # various locations.
    STATICFILES_FINDERS = (
        'django.contrib.staticfiles.finders.FileSystemFinder',
        'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    #    'django.contrib.staticfiles.finders.DefaultStorageFinder',
    )

    # Make this unique, and don't share it with anybody.
    SECRET_KEY = '1k38*$@ig616^xg#hy=n+yz-e9))s@_x-uq1pp%6xh!89m_r9('

    # List of callables that know how to import templates from various sources.
    TEMPLATE_LOADERS = (
        'django.template.loaders.filesystem.Loader',
        'django.template.loaders.app_directories.Loader',
    #     'django.template.loaders.eggs.Loader',
    )

    MIDDLEWARE_CLASSES = (
        'django.middleware.common.CommonMiddleware',
        'django.contrib.sessions.middleware.SessionMiddleware',
        'django.middleware.csrf.CsrfViewMiddleware',
        'django.contrib.auth.middleware.AuthenticationMiddleware',
        'django.contrib.messages.middleware.MessageMiddleware',
        # Uncomment the next line for simple clickjacking protection:
        # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
    )

    ROOT_URLCONF = 'myweblab.urls'

    # Python dotted path to the WSGI application used by Django's runserver.
    WSGI_APPLICATION = 'myweblab.wsgi.application'

    TEMPLATE_DIRS = (
        os.path.join(PROJECT_DIR, 'templates')
        # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
        # Always use forward slashes, even on Windows.
        # Don't forget to use absolute paths, not relative paths.
    )

    INSTALLED_APPS = (
        'django.contrib.auth',
        'django.contrib.contenttypes',
        'django.contrib.sessions',
        'django.contrib.sites',
        'django.contrib.messages',
        'django.contrib.staticfiles',
        # Uncomment the next line to enable the admin:
         'django.contrib.admin',
        # Uncomment the next line to enable admin documentation:
        # 'django.contrib.admindocs',
    )

    # A sample logging configuration. The only tangible logging
    # performed by this configuration is to send an email to
    # the site admins on every HTTP 500 error when DEBUG=False.
    # See http://docs.djangoproject.com/en/dev/topics/logging for
    # more details on how to customize your logging configuration.
    LOGGING = {
        'version': 1,
        'disable_existing_loggers': False,
        'filters': {
            'require_debug_false': {
                '()': 'django.utils.log.RequireDebugFalse'
            }
        },
        'handlers': {
            'mail_admins': {
                'level': 'ERROR',
                'filters': ['require_debug_false'],
                'class': 'django.utils.log.AdminEmailHandler'
            }
        },
        'loggers': {
            'django.request': {
                'handlers': ['mail_admins'],
                'level': 'ERROR',
                'propagate': True,
            },
        }
    } 
```

这是我的 url.py

```
 from django.conf.urls import patterns, include, url
    from django.conf import settings
    from myweblab.views import index

    # Uncomment the next two lines to enable the admin:
    from django.contrib import admin
    admin.autodiscover()

    urlpatterns = patterns('',
        # Examples:
        # url(r'^$', 'myweblab.views.home', name='home'),
        # url(r'^myweblab/', include('myweblab.foo.urls')),

        # Uncomment the admin/doc line below to enable admin documentation:
        # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

        # Uncomment the next line to enable the admin:
         url(r'^admin/', include(admin.site.urls)),
         url(r'^$', index, name="index"),

    )

    urlpatterns += patterns('',
        url(r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_URL, 'show_indexes': True}),
    ) 
```

和我的 base.djhtml

```
 <!DOCTYPE >
    <html>
        <head>
            <!-- css and javascript template should be here -->
            <title>
                {% block title %}
                {% endblock %}
            </title>
            <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/style.css" />
            <script type="text/javascript" src="{{ STATIC_URL }}js/jquery-1.8.3.min.js"></script>
        </head>
        <body>
            {% block content %}
            {% endblock %}
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-03-19T06:13:02.553

首先，创建**staticfiles**文件夹。在该文件夹中创建 css、js 和 img 文件夹。

**设置.py**

```
import os

PROJECT_DIR = os.path.dirname(__file__)

DATABASES = {
    'default': {
         'ENGINE': 'django.db.backends.sqlite3', 
         'NAME': os.path.join(PROJECT_DIR, 'myweblabdev.sqlite'),                        
         'USER': '',
         'PASSWORD': '',
         'HOST': '',                      
         'PORT': '',                     
    }
}

MEDIA_ROOT = os.path.join(PROJECT_DIR, 'media')

MEDIA_URL = '/media/'

STATIC_ROOT = os.path.join(PROJECT_DIR, 'static')

STATIC_URL = '/static/'

STATICFILES_DIRS = (
    os.path.join(PROJECT_DIR, 'staticfiles'),
) 
```

主要**网址.py**

```
from django.conf.urls import patterns, include, url
from django.conf.urls.static import static
from django.contrib import admin
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
from myweblab import settings

admin.autodiscover()

urlpatterns = patterns('',
    .......
) + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

urlpatterns += staticfiles_urlpatterns() 
```

**模板**

```
{% load static %}

<link rel="stylesheet" href="{% static 'css/style.css' %}"> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-19T05:01:51.243

请参阅[有关静态文件的 django 文档](https://docs.djangoproject.com/en/dev/howto/static-files/)。

在**settings.py 中**：

```
import os
CURRENT_PATH = os.path.abspath(os.path.dirname(__file__).decode('utf-8'))

MEDIA_ROOT = os.path.join(CURRENT_PATH, 'media')

MEDIA_URL = '/media/'

STATIC_ROOT = 'static/'

STATIC_URL = '/static/'

STATICFILES_DIRS = (
                    os.path.join(CURRENT_PATH, 'static'),
) 
```

然后将您的**js**和**css**文件**静态**文件夹放在您的项目中。**不在媒体文件夹中。**

在**view.py**中：

```
from django.shortcuts import render_to_response, RequestContext

def view_name(request):
    #your stuff goes here
    return render_to_response('template.html', locals(), context_instance = RequestContext(request)) 
```

在**template.html**中：

```
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/style.css" />
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery-1.8.3.min.js"></script> 
```

在**urls.py**中：

```
from django.conf import settings
urlpatterns += patterns('',
    url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT, 'show_indexes': True}),
) 
```

项目文件结构可以[在 imgbin 中](http://imgbin.org/index.php?page=image&id=12245)找到。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T06:01:13.580

阅读此[https://docs.djangoproject.com/en/dev/howto/static-files/](https://docs.djangoproject.com/en/dev/howto/static-files/)：

> 对于本地开发，如果您使用 runserver 或将 staticfiles_urlpatterns 添加到您的 URLconf，则您已完成设置 - 您的静态文件将**自动**以 /static/ 的默认（对于新创建的项目）STATIC_URL 提供。

并尝试：

```
~/tmp$ django-admin.py startproject myprj
~/tmp$ cd myprj/
~/tmp/myprj$ chmod a+x manage.py
~/tmp/myprj$ ./manage.py startapp myapp 
```

然后添加`'myapp'`到`INSTALLED_APPS`( `myprj/settings.py`)。

```
~/tmp/myprj$ cd myapp/
~/tmp/myprj/myapp$ mkdir static
~/tmp/myprj/myapp$ echo 'alert("hello!");' > static/hello.js
~/tmp/myprj/myapp$ mkdir templates
~/tmp/myprj/myapp$ echo '<script src="{{ STATIC_URL }}hello.js"></script>' > templates/hello.html 
```

编辑`myprj/urls.py`：

```
from django.conf.urls import patterns, include, url
from django.views.generic import TemplateView

class HelloView(TemplateView):
    template_name = "hello.html"

urlpatterns = patterns('',
    url(r'^$', HelloView.as_view(), name='hello'),
) 
```

并运行它：

```
~/tmp/myprj/myapp$ cd ..
~/tmp/myprj$ ./manage.py runserver 
```

有用！

# sql - 用于查找两个数字之间的范围的 SQL 查询，以阻止重复输入

> ID：15491729
> 
> 赞同：-1
> 
> 时间：2013-03-19T04:53:13.640
> 
> 标签：sql

`from`我在一个包含两列的表中有一个数据`to`，例如：`5-9`.

如果我插入一个新行`1-6`，它不应该被接受，因为`6`它位于 和`5`之间`9`。

`1-3`- 应该接受（没有重叠），`10-13`- 也应该接受。

我需要一个查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:51:30.770

尝试这个

```
DECLARE @from INT
DECLARE @to INT

SET @from = 14
SET @to = 16

IF NOT EXISTS (SELECT 1 FROM Table1 WHERE @from BETWEEN [from] AND [to]
                                OR @to BETWEEN [from] AND [to]
                                OR @from <= [from] AND @to >= [to])
BEGIN
  INSERT INTO Table1([from], [to]) VALUES(@from, @to)
END
ELSE
BEGIN
  --Already Exists
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:18:41.040

尝试这个：

```
 if not exist (select * from table where @from between [from] and [to])
begin 
  if not exist (select * from table where @to between [from] and [to])
    begin 
    if not exist(select * from table where [from] between @from and @to)
       begin 
          insert into table 
                select @from, @to
       end
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T05:24:36.600

根据 SQL 供应商的不同，实现会有所不同，但想法是相同的：您需要创建一个`TRIGGER`on`INSERT`或`UPDATE`.

这是 PostgreSQL 的解决方案：

```
CREATE TABLE mytable (
    id SERIAL, 
    m1 INTEGER, 
    m2 INTEGER
);

CREATE OR REPLACE FUNCTION mytable_fn()
RETURNS trigger AS
$body$
DECLARE cnt INTEGER;
BEGIN
    SELECT count(*) INTO cnt
    FROM mytable
    WHERE numrange(NEW.m1, NEW.m2)
       && numrange(    m1,     m2);
    IF cnt > 0 THEN RAISE EXCEPTION 'Constraint violation';
               ELSE RETURN NEW;
    END IF;
END;
$body$
LANGUAGE 'plpgsql';

CREATE TRIGGER mytable_tr
BEFORE INSERT OR UPDATE 
ON mytable FOR EACH ROW 
EXECUTE PROCEDURE mytable_fn(); 
```

# iphone - 在我的 iPhone 应用程序中集成 Passbook 应用程序

> ID：15491732
> 
> 赞同：0
> 
> 时间：2013-03-19T04:53:41.183
> 
> 标签：iphone, ios, passbook

在我的 iPhone 应用程序中有一个礼品券列表。我需要将优惠券添加到存折中。我怎样才能做到这一点 ？！

如何为每张优惠券生成通行证？！

有没有办法动态生成这个通行证？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:47:47.490

我将假设“动态”是指在应用程序中即时进行。最简洁的答案是不。

通行证必须包含一个签名，该签名是由苹果提供的证书的组合，该证书使用您的私钥签名。从安全的角度来看，将这些信息包含在您的应用程序中是一个糟糕的主意，因此，如果 Apple 认为您是从应用程序内部签署通行证，他们可能会从应用程序商店拒绝它。

在这种情况下，通行证必须由服务器创建和分发。

您应该查看[Passbook Programming Guide](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/PassKit_PG/PassKit_PG.pdf)。这是一个密集的文档，因此从[Passbook 生态系统设计开始可能会很有用](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/PassKit_PG/Chapters/Ecosystem.html#//apple_ref/doc/uid/TP40012195-CH3-SW1)

# java - 自动调用fuse esb

> ID：15491737
> 
> 赞同：1
> 
> 时间：2013-03-19T04:54:39.473
> 
> 标签：java, fuseesb, jbossfuse

我需要编写一个自动脚本来调用 fuse esb 然后它应该调用 osgi:install 命令来部署一个包.. 最好的方法是什么？高度赞赏任何输入/指针。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:40:58.440

您可以使用 SSH 或 Karaf 客户端来执行安装包等的脚本。在此处查看一些详细信息：http: [//karaf.apache.org/manual/latest-2.3.x/users-guide/remote-console.html](http://karaf.apache.org/manual/latest-2.3.x/users-guide/remote-console.html)

# php - 根据会话 ID 将 MySQL 表记录传递给变量

> ID：15491738
> 
> 赞同：2
> 
> 时间：2013-03-19T04:54:42.387
> 
> 标签：php, mysql, session, session-variables

我有以下 PHP 代码（有效），用于根据他们的 $_SESSION clientid 变量从我们的 MySQL 数据库中提取客户电子邮件地址并将其存储在 $myemail 上：

```
mysql_select_db($dn) or die(mysql_error());

$clientid = ($_SESSION['clientid']);

$result = mysql_query("SELECT emailaddress FROM clients WHERE clientid = '" . $clientid . "'");

while ($row = mysql_fetch_array($result)) {

$myemail = $row[0];

}

mysql_close($con); 
```

但是想知道是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T04:59:39.740

首先不要使用 mysql_* 函数，因为它们已被弃用。最好使用 PDO 或 mysqli。关于你的问题，我会写

```
$clientId = $_SESSION['clientid'];

$res = mysql_fetch_object(mysql_query("SELECT emailaddress FROM clients WHERE clientid = '{$clientId}'"));

$email = $res->emailaddress; 
```

还有一件事为什么你需要while循环？While 循环根本没有必要，因为我们正在获取单个记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T04:58:32.747

您的代码似乎容易受到 sql 注入的攻击。使用`prepare statement`或使用`mysql_real_escape_string`。这是代码...

```
mysql_select_db($dn) or die(mysql_error());

$clientid = ($_SESSION['clientid']);

$result = mysql_query("SELECT emailaddress FROM clients WHERE clientid = '" . $clientid . "'");
while ($row = mysql_fetch_array($result)) {
    $myemail = mysql_real_escape_string($row['emailaddress']);
}

mysql_close($con); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T04:56:35.780

**代替**

```
$myemail = $row[0]; 
```

**和**

```
$myemail = $row['emailaddress']; 
```

# oracle - ORA-01427 过程中使用了表别名

> ID：15491740
> 
> 赞同：2
> 
> 时间：2013-03-19T04:54:46.297
> 
> 标签：oracle, stored-procedures, subquery, ora-01427

我在存储过程中有以下代码段：

（注意，这不是原始代码片段，但与它完全相同，只是表和列名称已替换为更通用的名称，以便更好地理解并防止泄露客户端代码。）

```
UPDATE table_Orders c SET order_type = 
(
SELECT 'PE' FROM 
table_Orders A, 
table_Orders b, 
(SELECT DISTINCT order_id, cust_id, order_date FROM table_Orders WHERE shipment_type = 'T' AND order_availability = 'P' AND order_amt > 500 
AND cust_category = 'PREMIUM' ) d 
WHERE
A.order_id = d.order_id AND A.order_date = d.order_date AND A.cust_id= d.cust_id
AND A.order_id = b.order_id AND A.order_date = b.order_date AND A.cust_id= b.cust_id
AND A.shipment_type = b.shipment_type AND A.order_availability = b.order_availability AND A.product_id <> b.product_id
AND ((A.order_amt > 500 AND b.shipment_amt > 50) OR (A.shipment_amt > 50 AND b.order_amt > 500))
AND A.order_id = c.order_id AND A.order_date = c.order_date AND A.cust_id = c.cust_id 
AND A.shipment_type = c.shipment_type AND  A.order_availability = c.order_availability AND A.product_id = c.product_id 
);
COMMIT; 
```

现在，我的问题是我`ORA-01427 single-row subquery returns more than one row`在执行该过程时遇到了错误。我尝试使用如下子句将子查询放在语句的末尾`IN`，但即使这样也不起作用：

```
UPDATE table_Orders c SET order_type =
(
SELECT 'PE' FROM 
table_Orders A, 
table_Orders b
WHERE
A.order_id = d.order_id AND A.order_date = d.order_date AND A.cust_id= d.cust_id
AND A.order_id = b.order_id AND A.order_date = b.order_date AND A.cust_id= b.cust_id
AND A.shipment_type = b.shipment_type AND A.order_availability = b.order_availability AND A.product_id <> b.product_id
AND ((A.order_amt > 500 AND b.shipment_amt > 50) OR (A.shipment_amt > 50 AND b.order_amt > 500))
AND A.order_id = c.order_id AND A.order_date = c.order_date AND A.cust_id = c.cust_id 
AND A.shipment_type = c.shipment_type AND  A.order_availability = c.order_availability AND A.product_id = c.product_id 
AND (A.order_id, A.cust_id, A.order_date) IN
(SELECT DISTINCT order_id, cust_id, order_date FROM table_Orders 
    WHERE shipment_type = 'T' AND order_availability = 'P' AND order_amt > 500 AND cust_category = 'PREMIUM')
);
COMMIT; 
```

有人可以指导我正确的方向，至于我在哪里搞砸了，或者子查询已经搞砸了吗？

带有 JOIN 的代码 --> 这在“JOIN”语句之前的 c.product_Id 处缺少右括号

```
UPDATE table_Orders c SET order_type =
(
 SELECT 'PE' FROM 
table_Orders A, 
table_Orders b
WHERE
A.order_id = d.order_id AND A.order_date = d.order_date AND A.cust_id= d.cust_id
AND A.order_id = b.order_id AND A.order_date = b.order_date AND A.cust_id= b.cust_id
AND A.shipment_type = b.shipment_type AND A.order_availability = b.order_availability AND A.product_id <> b.product_id
AND ((A.order_amt > 500 AND b.shipment_amt > 50) OR (A.shipment_amt > 50 AND b.order_amt > 500))
AND A.order_id = c.order_id AND A.order_date = c.order_date AND A.cust_id = c.cust_id 
AND A.shipment_type = c.shipment_type AND  A.order_availability = c.order_availability AND A.product_id = c.product_id 
JOIN
SELECT DISTINCT order_id, cust_id, order_date FROM table_Orders 
WHERE shipment_type = 'T' AND order_availability = 'P' AND order_amt > 500 AND cust_category = 'PREMIUM' d
ON A.order_id = d.order_id AND A.order_date = d.order_date AND A.cust_id= d.cust_id
COMMIT; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:22:33.957

子查询可能为某些返回不止一行`c.order_id, c.order_date, c.cust_id, c.shipment_type, c.order_availability, c.product_id`

在不知道您的表结构和数据的情况下，我们很难判断。

但你可以这样做：

```
UPDATE table_Orders c SET order_type = 'PE'
WHERE (c.order_id, c.order_date, c.cust_id, c.shipment_type, c.order_availability, c.product_id) IN 
(
SELECT A.order_id, A.order_date, A.cust_id, A.shipment_type, A.order_availability, A.product_id 
FROM 
table_Orders A, 
table_Orders b, 
(SELECT DISTINCT order_id, cust_id, order_date FROM table_Orders WHERE shipment_type = 'T' AND order_availability = 'P' AND order_amt > 500 
AND cust_category = 'PREMIUM' ) d 
WHERE
A.order_id = d.order_id AND A.order_date = d.order_date AND A.cust_id= d.cust_id
AND A.order_id = b.order_id AND A.order_date = b.order_date AND A.cust_id= b.cust_id
AND A.shipment_type = b.shipment_type AND A.order_availability = b.order_availability AND A.product_id <> b.product_id
AND ((A.order_amt > 500 AND b.shipment_amt > 50) OR (A.shipment_amt > 50 AND b.order_amt > 500))
);

COMMIT; 
```

顺便说一句，你为什么不使用“JOIN 语法”？

* * *

**更新**相同的解决方案，但使用 ANSI 连接语法：

```
UPDATE table_Orders c 
   SET order_type = 'PE'
 WHERE (c.order_id, c.order_date, c.cust_id, c.shipment_type, c.order_availability, c.product_id) IN 
(
SELECT A.order_id, A.order_date, A.cust_id, A.shipment_type, A.order_availability, A.product_id 
FROM 
table_Orders A 
JOIN 
table_Orders b ON A.order_id = b.order_id AND A.order_date = b.order_date AND A.cust_id= b.cust_id AND A.shipment_type = b.shipment_type AND A.order_availability = b.order_availability AND A.product_id <> b.product_id 
JOIN 
(SELECT DISTINCT order_id, cust_id, order_date FROM table_Orders WHERE shipment_type = 'T' AND order_availability = 'P' AND order_amt > 500 
AND cust_category = 'PREMIUM' ) d ON A.order_id = d.order_id AND A.order_date = d.order_date AND A.cust_id= d.cust_id
WHERE ((A.order_amt > 500 AND b.shipment_amt > 50) OR (A.shipment_amt > 50 AND b.order_amt > 500))
); 
```

# c++ - 在 C++ 中向数组结构添加元素

> ID：15491742
> 
> 赞同：1
> 
> 时间：2013-03-19T04:54:58.703
> 
> 标签：c++, arrays, pointers, struct

我在 C++ 上做作业，我坚持如何使用用户定义的 numShares 和 pricePerShare 向我的工作添加新事务。

我有一个看起来像这样的事务结构：

```
struct Transaction
{
string stockSymbol;     // String containing the stock symbol, e.g. "AAPL"
string buyerName;       // String containing the buyer's name e.g. "Mr Brown"
int buyerAccount;       // Integer containing an eight digit account code
int numShares;          // Integer containing the number of sold shares
int pricePerShare;      // Integer containing the buy price per share
}; 
```

这是 buildTransaction 类：

```
static Transaction* buildTransactions(int numTransactions)
{
    int maxShareVolume = 100000;
    int maxSharePrice = 1000;

    Transaction *transactions = new Transaction[numTransactions];

        for(int idx = 0; idx < numTransactions; idx++)
        {
            transactions[idx].stockSymbol = pickRandomStockSymbol();

            std::string buyerName = pickRandomBuyer();
            transactions[idx].buyerName = buyerName;
            transactions[idx].buyerAccount = lookupBuyerAccount(buyerName);

            transactions[idx].numShares = 1 + rand() % maxShareVolume;
            transactions[idx].pricePerShare = 1 + rand() % maxSharePrice;       
        }

        return transactions;
    } 
```

我将如何使用它来将数据添加到事务数组中：

```
void Analyser::addTransactions(Transaction* transactions, int numTransactions) 
```

我会由此假设，作为用户输入，我真正需要的只是股票数量和每股价格，但其他信息会自动填充，从数组中选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:00:00.830

而不是使用数组，你应该使用向量.. buildTransactions 会这样写：

```
std::vector<Transaction> buildTransactions(int numTransactions)
{
    int maxShareVolume = 100000;
    int maxSharePrice = 1000;
    std::vector<Transaction> transactions;

    for(int idx = 0; idx < numTransactions; idx++)
    {
        Transaction t;
        t.stockSymbol = pickRandomStockSymbol();
        std::string buyerName = pickRandomBuyer();
        t.buyerName = buyerName;
        t.buyerAccount = lookupBuyerAccount(buyerName);
        t.numShares = 1 + rand() % maxShareVolume;
        t.pricePerShare = 1 + rand() % maxSharePrice;

        transactions.push_back(t);
    }

    return transactions;
} 
```

通过编辑 buildTransactions 函数，您可以轻松地将更多数据添加到您的 addTransactions 函数中：

```
void Analyser::addTransactions(std::vector<Transaction> &transactions, int numTransactions)
{
    for(int idx = 0; idx < numTransactions; idx++)
    {
        Transaction t;
        t.stockSymbol = pickRandomStockSymbol();
        std::string buyerName = pickRandomBuyer();
        t.buyerName = buyerName;
        t.buyerAccount = lookupBuyerAccount(buyerName);

        std::cout << "Enter number of shares for transaction: ";
        std::cin >> t.numShares;
        std::cout << "Enter price per share for transaction: ";
        std::cin >> t.pricePerShare;

        transactions.push_back(t);
    }
} 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:24:58.667

您可以在 addTransactions() 方法的循环中获取股份数量和每股价格作为输入，如下所示：

```
for(int idx = 0; idx < numTransactions; idx++)
    {
        transactions[idx].stockSymbol = pickRandomStockSymbol();

        std::string buyerName = pickRandomBuyer();
        transactions[idx].buyerName = buyerName;
        transactions[idx].buyerAccount = lookupBuyerAccount(buyerName);

        ctd::cout<<"Enter number of shares for transaction "<<idx+1<<std::endl;
        std::cin>>transactions[idx].numShares;
        ctd::cout<<"Enter price per share for transaction "<<idx+1<<std::endl;
        std::cin>>transactions[idx].pricePerShare;    
    } 
```

# android - Android 使用支持的 v4 jar 文件在片段之间翻转动画

> ID：15491743
> 
> 赞同：4
> 
> 时间：2013-03-19T04:55:08.053
> 
> 标签：android, android-fragments, android-animation, android-fragmentactivity

嗨，我将使用支持的 jar 文件在 android 中开发片段事务之间的翻转动画。因为我想为较低版本实现片段。我找到了翻转动画的 android[开发者教程](http://developer.android.com/training/animation/cardflip.html)。但是支持的库不支持**Objactor 动画**。搜索互联网后我发现我需要将 objacter 动画更改为[Tween 动画.](http://developer.android.com/guide/topics/resources/animation-resource.html) .如何将这些 xml 文件更改为像下面这样的补间动画。

card_flip_left_in.xml

```
 <!-- Before rotating, immediately set the alpha to 0\. -->
 <alpha
    android:valueFrom="1.0"
    android:valueTo="0.0"
    android:propertyName="alpha"
    android:duration="0" />

 <!-- Rotate. -->
 <rotate
    android:valueFrom="-180"
    android:valueTo="0"
    android:propertyName="rotationY"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    android:duration="@integer/card_flip_time_full"/>

<!-- Half-way through the rotation (see startOffset), set the alpha to 1\. -->
<alpha
    android:valueFrom="0.0"
    android:valueTo="1.0"
    android:propertyName="alpha"
    android:startOffset="@integer/card_flip_time_half"
    android:duration="1" /> 
```

card_flip_left_out.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <set xmlns:android="http://schemas.android.com/apk/res/android" >

   <!-- Rotate. -->
   <rotate
    android:duration="@integer/card_flip_time_full"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    android:propertyName="rotationY"
    android:valueFrom="0"
    android:valueTo="180" />

<!-- Half-way through the rotation (see startOffset), set the alpha to 0\. -->
<alpha
    android:duration="1"
    android:propertyName="alpha"
    android:startOffset="@integer/card_flip_time_half"
    android:valueFrom="1.0"
    android:valueTo="0.0" />

 </set> 
```

card_flip_right_in.xml

```
<!-- Before rotating, immediately set the alpha to 0\. -->
<alpha
    android:duration="0"
    android:propertyName="alpha"
    android:valueFrom="1.0"
    android:valueTo="0.0" />

<!-- Rotate. -->
<rotate
    android:duration="@integer/card_flip_time_full"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    android:propertyName="rotationY"
    android:valueFrom="180"
    android:valueTo="0" />

<!-- Half-way through the rotation (see startOffset), set the alpha to 1\. -->
<alpha
    android:duration="1"
    android:propertyName="alpha"
    android:startOffset="@integer/card_flip_time_half"
    android:valueFrom="0.0"
    android:valueTo="1.0" />
  </set> 
```

card_flip_right_out.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <set xmlns:android="http://schemas.android.com/apk/res/android" >

<!-- Rotate. -->
<rotate
    android:duration="@integer/card_flip_time_full"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    android:propertyName="rotationY"
    android:valueFrom="0"
    android:valueTo="-180" />

<!-- Half-way through the rotation (see startOffset), set the alpha to 0\. -->
<alpha
    android:duration="1"
    android:propertyName="alpha"
    android:startOffset="@integer/card_flip_time_half"
    android:valueFrom="1.0"
    android:valueTo="0.0" />

 </set> 
```

我更改了那些 xml 文件，但它对我们不起作用..任何人都可以解释我做错了什么。请帮助我分享使用完整教程和其他资源..任何人都可以为我提供正确的补间动画对于那些 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T22:46:13.313

如果“Objacter Animation”是指 ObjectAnimator，那么兼容性库不支持它。相反，您应该看看 NineOldAndroid 库，它为旧平台带来了 Honeycomb+ 动画 API：http: [//nineoldandroids.com/](http://nineoldandroids.com/)

# mysql - 将临时排名查询合并到单个查询中？

> ID：15491747
> 
> 赞同：0
> 
> 时间：2013-03-19T04:55:23.033
> 
> 标签：mysql, sql, join

我正在尝试将以下查询合并为一个，但是无论我尝试过什么似乎都无法正常工作。它的想法是将排序列表插入到具有自动递增字段的临时表中，然后获取新列表，然后使用更新的值更新原始表。

```
INSERT INTO `TempRank` (`id`, `power`) 
SELECT `Rankable`.`id`, `Rankable`.`SA` AS `power` 
FROM `Rankable` 
INNER JOIN `Accounts` ON `Accounts`.`id` = `Rankable`.`id`
WHERE `Accounts`.`active` = '1' 
ORDER BY `power` DESC;

UPDATE `Rankable`, `TempRank`
SET `Rankable`.`id` = `TempRank`.`id`, 
    `Rankable`.`Rank` = `TempRank`.`Rank`
WHERE `Rankable`.`id` = `TempRank`.`id` 
```

非常感谢您提供任何信息，我将在等待您的回答的同时继续努力，并将更新您的发现。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:50:33.783

```
UPDATE rankable r INNER JOIN temprank t ON r.id=t.id SET r.rank=t.rank 
```

# node.js - 保存实例时的flatiron resourcefuljs回调

> ID：15491748
> 
> 赞同：3
> 
> 时间：2013-03-19T04:55:29.540
> 
> 标签：node.js, flatiron.js

假设我有：

```
var resourceful = require("resourceful");

BaseTopic = function () {
    this.string("name");
    this.string("slug");
}

slugify = function (someString) {
    // do some things here
}

Topic = resourceful.define("topic", BaseTopic); 
```

现在，我想要的是每次保存`Topic`slug 字段的新实例时都会更新，如下所示：

```
jsTopic = new Topic({name : "javascript"});

jsTopic.save(function (err, result) {
   // in here slug field is defined
   // so the slug field is saved to the db
   console.log(result);
}) 
```

所以每次我创建一个新实例或保存它时，slug 字段都会自动填充。那可能吗 ？

# ios - 我应该使用哪个编码器来使用 NSCoder 对长属性进行编码？

> ID：15491749
> 
> 赞同：2
> 
> 时间：2013-03-19T04:55:39.027
> 
> 标签：ios, objective-c, nscoder

我有一个对象，我必须使用 encodewithcoder 进行编码，但它是一个“长”数字，我不确定是否必须像简单的 int、int32 或 int64 一样对其进行编码。Apple的文档似乎对我没有用处，因为它从不指代“长”类型。

哪个编码器是正确的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T05:00:03.980

对于 iOS，a`long`是 32 位的，与`int`. `long long`给你64位。

```
long someVar = 42l;
[someEncoder encodeInt32:someVar forKey:@"someKey"]; 
```

# arm - ARM 中屏障（DSB、DMB、ISB）的实际用例

> ID：15491751
> 
> 赞同：31
> 
> 时间：2013-03-19T04:56:08.120
> 
> 标签：arm, barrier

我了解 DSB、DMB 和 ISB 是防止指令重新排序的障碍。我也可以为它们中的每一个找到很多非常好的解释，但是很难想象我必须使用它们的情况。

另外，从开源代码中，我不时看到这些障碍，但很难理解为什么要使用它们。举个例子，在Linux kernel 3.7 tcp_rcv_synsent_state_process函数中，有如下一行：

```
 if (unlikely(po->origdev))
            sll->sll_ifindex = orig_dev->ifindex;
    else
            sll->sll_ifindex = dev->ifindex;

    smp_mb();

    if (po->tp_version <= TPACKET_V2)
            __packet_set_status(po, h.raw, status); 
```

其中 smp_mb() 基本上是 DMB。你能给我一些你在现实生活中的例子吗？这将有助于更多地了解障碍。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-19T07:39:43.623

抱歉，不会像你问的那样给你一个直截了当的例子，因为你已经在查看 Linux 源代码，你有很多可以去的地方，而且它们似乎没有帮助。没有什么可耻的——每个理智的人至少最初都会被内存访问顺序问题弄糊涂:)

如果您主要是应用程序开发人员，那么您很有可能无需过多担心 - 您使用的任何并发框架都会为您解决它。

如果您主要是设备驱动程序开发人员，那么示例很容易找到 - 只要您的代码中存在对先前访问的依赖关系，该访问在执行其他一些访问之前已经产生了影响（清除了中断源，写入了 DMA 描述符） （重新启用中断，启动 DMA 事务）。

如果您正在开发一个并发框架（或调试一个），您可能需要更多地阅读该主题 - 但您的问题表明一种肤浅的好奇心，而不是迫切的需要？如果您正在开发自己的在线程之间传递数据的方法，而不是基于并发框架提供的原语，那么这就是并发框架的所有意图和目的。

Paul McKenney 写了一篇关于内存屏障的必要性以及它们对处理器的实际影响的优秀论文：[内存屏障：软件黑客的硬件视图](http://www.rdrop.com/users/paulmck/scalability/paper/whymb.2010.07.23a.pdf)

如果这有点太硬核，我写了一个由 3 部分组成的博客系列，它更轻量级，并以特定于 ARM 的视图结束。第一部分是[内存访问排序 - 介绍](https://community.arm.com/groups/processors/blog/2011/03/22/memory-access-ordering--an-introduction)。

但是，如果它是您所追求的具体示例列表，特别是对于 ARM 架构，您可能会比[Barrier Litmus Tests 和 Cookbook](http://infocenter.arm.com/help/topic/com.arm.doc.genc007826/Barrier_Litmus_Tests_and_Cookbook_A08.pdf)做得更糟。

超轻程序员的观点和不完全架构正确的版本是：

*   DMB - 每当内存访问需要对另一个内存访问进行排序时。
*   DSB - 每当需要在程序执行之前完成内存访问时。
*   ISB - 每当指令提取需要在程序中的某个点之后显式发生时，例如在内存映射更新之后或在编写要执行的代码之后。（实际上，这意味着“此时丢弃任何预取指令”。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-19T07:26:06.190

通常，在您必须确保内存访问以特定顺序发生的情况下，您需要使用内存屏障。这可能出于多种原因需要，通常当两个或多个进程/线程或硬件组件访问必须保持一致的相同内存结构时需要它。

它在 DMA 传输中经常使用。一个简单的 DMA 控制结构可能如下所示：

```
struct dma_control {
  u32 owner;
  void * data;
  u32 len;
}; 
```

所有者通常会设置为类似 OWNER_CPU 或 OWNER_HARDWARE，以指示允许两个参与者中的谁使用该结构。

改变它的代码通常会像这样

```
dma->data = data;
dma->len  = length;
smp_mb();
dma->owner = OWNER_HARDWARE; 
```

因此，数据 len 总是在所有权转移到 DMA 硬件之前设置。否则引擎可能会得到陈旧的数据，例如未更新的指针或长度，因为 CPU 重新排序了内存访问。

对于在不同内核上运行的进程或线程也是如此。可以以类似的方式进行通信。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-31T06:31:16.713

屏障要求的一个简单示例是自旋锁。如果您使用比较和交换（或 ARM 上的 LDREX/STREX）实现自旋锁并且没有障碍，则允许处理器推测性地从内存中加载值并将计算值延迟存储到内存中，并且这些都不需要发生按照指令流中的加载/存储顺序。

DMB 尤其可以防止内存访问围绕 DMB 重新排序。如果没有 DMB，处理器可以在自旋锁释放后重新排序存储到受自旋锁保护的内存。或者，处理器可以在自旋锁实际锁定之前或在它被不同的上下文锁定时读取受自旋锁保护的内存。

unixsmurf 已经指出了这一点，但我也会向您指出[Barrier Litmus Tests 和 Cookbook](http://infocenter.arm.com/help/topic/com.arm.doc.genc007826/Barrier_Litmus_Tests_and_Cookbook_A08.pdf)。它有一些很好的例子来说明你应该在哪里以及为什么应该使用障碍。

# android - 在 Android 中实现农历

> ID：15491753
> 
> 赞同：2
> 
> 时间：2013-03-19T04:56:25.690
> 
> 标签：android, calendar

我正在开发一个应用程序，在该应用程序中我必须同时实现`Gregorian calendar`和`Lunar Calendar`。我找到了足够的关于公历的数据，但没有找到足够的关于. 的数据`Lunar Calendar`。有人可以帮我找到如何在 android 中实现农历。每一个帮助将不胜感激。

# java - 当前类方法的 Eclipse Java 自动完成

> ID：15491764
> 
> 赞同：0
> 
> 时间：2013-03-19T04:57:15.977
> 
> 标签：java, eclipse, autocomplete, eclipse-juno

使用最新版本的 Eclipse Juno，除非使用关键字，否则使用 Java 方法调用的自动完成功能将`Ctrl+Space`无法正常工作。`this`

我相信这是非默认行为；我确定`this`上次使用 IDE 时不需要使用 。

有人知道修复吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:01:04.570

我在[这里](https://stackoverflow.com/questions/1959946/ctrl-space-in-eclipse-without-pressing-ctrl-space)找到了解决方案。

如链接线程中的几个答案中所述更改激活触发器可以解决问题。

# c++ - 类模板已经定义

> ID：15491766
> 
> 赞同：0
> 
> 时间：2013-03-19T04:57:25.777
> 
> 标签：c++, templates, inheritance

我正在尝试创建一个继承一个类的类，该类继承自另一个类。在这个基类中是一个模板。

两个类从这个基类继承，然后另外两个类分别从一个或另一个类继承。当我尝试将创建的按钮合并到菜单中时，出现“已定义类模板”编译错误。如果我只包含其中一种按钮类型，它将编译，但如果我同时包含两个文件进行编译，则会出现错误。

所有按钮的基类

```
#pragma once

#include <SFML/Graphics.hpp>

namespace eng
{
namespace UI
{
    template<class EventTemplate> 
    class ButtonBase
    {

    protected:

        bool hasBeenClicked;

        typename EventTemplate myEvent;

        sf::Sprite mySprite;

    public:

        ButtonBase();

        virtual bool CheckIfUsed(int mouseX, int mouseY, bool mouseClicked, bool mouseReleased) = 0;

        EventTemplate GetButtonEvent();

        sf::Sprite *GetSprite();

    };
};
}; 
```

单选按钮的基类

```
#pragma once

#include "Button Base.h"

namespace eng
{
namespace UI
{
    template<class EventTemplate>
    class RadioButton : public ButtonBase<EventTemplate>
    {

    protected:

        enum ButtonState {MouseOutside, MouseOver, On, Off} myState;

    public:

        RadioButton();

        virtual bool CheckIfUsed(int mouseX, int mouseY, bool mouseClicked, bool mouseReleased) = 0;

        void TurnOff();

    };
};
}; 
```

打算用作实例的两个类。

```
#pragma once

#include "Radio Button.h"

namespace eng
{
namespace UI
{

    template<class EventType>
    class RoundRadioButton : public RadioButton<EventType>
    {

    private:

        sf::Rect myArea; 

    public:

        RoundRadioButton(double setx, double sety, double setRadius, sf::Image &setImage, EventType setEvent);

        bool CheckIfUsed(int mouseX, int mouseY, bool mouseClicked, bool mouseReleased);
    };
};
};

#pragma once

#include "Radio Button.h"

namespace eng
{
namespace UI
{
    template<class EventType>
    class RoundRadioButton : public RadioButton<EventType>
    {

    private:

        double myCenterX;
        double myCenterY;

        double myRadius;

    public:

        RoundRadioButton(double setx, double sety, double setRadius, sf::Image &setImage, EventType setEvent);

        bool CheckIfUsed(int mouseX, int mouseY, bool mouseClicked, bool mouseReleased);
    };
};
}; 
```

包含两种单选按钮类型的类。

```
#pragma once

#include <vector>

#include "Round Radio Button.h"
#include "Rectangular Radio Button.h"

namespace eng
{
namespace UI
{
    template<class EventType>
    class RadioButtonMenu
    {

    private:

        RadioButton<EventType> *myCurrentChoice;

        std::vector< RadioButton<EventType>* > myButtons;

    public:

        RadioButtonMenu();
        ~RadioButtonMenu();

        void SetParameters(std::vector< RadioButton<EventType> > *setButtons, RadioButton<EventType> *defaultSelection);

        void CheckMouseAction(double mousex, double mousey, bool mouseClicked, bool mouseReleased);

        EventType GetSelection();
    };
};
}; 
```

如果我遗漏了其中一个单选按钮，错误就会消失。我在搜索中查找了这个，它已经使用 #pragma once 或 #ifndef 解决了，但我已经在这样做了。我一直在阅读有关模板的更多内容，因为这是我第一次真正尝试使用它们，但我很难理解它。任何解决此问题或一般模板的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:02:50.597

当您创建两个具有不同定义的同名模板 (RadioButtonMenu) 时，您违反了一个定义规则 (ODR)。给它们不同的名称或将它们合并到一个模板中，因为它们似乎仅在私有（实现）部分不同并且具有相同的界面。

# java - 如何在一个操作中在多个文本区域中获取 jquery 文本编辑器

> ID：15491771
> 
> 赞同：0
> 
> 时间：2013-03-19T04:58:11.913
> 
> 标签：java, jquery, jsp, textarea, text-editor

我有一个 jquery 文本编辑器并有一个多文本区域我想在一个操作中在每个文本区域中显示 jquery 文本编辑器，但只有第一个文本区域我能够显示文本编辑器

**这是我的jQuery代码**

```
<script type="text/javascript" id="themeUIPhysicalFinding">
  $(document).ready(function () {
      var options = {
          width: 962,
          height: 230,
          controls: "bold italic underline strikethrough subscript superscript | font size " +
                  "style | color highlight removeformat | bullets numbering | outdent " +
                  "indent | alignleft center alignright justify | undo redo | " +
                  "rule link image unlink | cut copy paste pastetext | print source"
      };

      var editor = $("#editor").cleditor(options)[0];

     // $("#editor").kendoEditor({
         // encoded: false
        // });
      //alert("asdfasdf");
      $("#Generate").click(function () {

          alert($("#editor").value());
          //$("#editor").val("");
      });

  });
</script> 
```

**我的 Java 脚本动作代码是**

```
function getPatientInformationTest(){
    var admissionNo=document.getElementById("apnNo").value;

    var url = "getPatientDemographyActionTestIPDPatientInfo.do?patientAdmissionNo="+admissionNo;
    makeRequestNoImage(url,"patientDischargeDiv" ,"themeUIPhysicalFinding"); 
```

**这是我的 HTML 代码**

```
<%@taglib prefix="s" uri="/struts-tags"%>
<!-- 

-->
<div>

<table border="0" class="" width="100%">
<tr>
<td><fieldset><legend>Patient Demography </legend><table width="100%" style="border:0px solid #FFFFFF"  cellpadding="0" cellspacing="0">

      <tr>
        <td>HN</td>
        <td><s:property value='deschargeInfo.patientRegistrationNo'/></td>
      </tr>

      <tr>
        <td>Age</td>
        <td><s:property value='deschargeInfo.patientAge'/></td>
      </tr>
      <tr>
        <td>Name</td>
        <td><s:property value='deschargeInfo.patientName'/></td>
      </tr>
      <tr>
        <td>Gender</td>
        <td><s:property value='deschargeInfo.patientGender'/></td>
      </tr>

      <tr>
        <td>Contact Info</td>
        <td><s:property value='deschargeInfo.patientContactNo'/></td>
      </tr>

    </table></fieldset></td>
<td><fieldset><legend>Doctor's Info</legend><table width="100%" border="0" style="border:0px solid #FFFFFF"  cellpadding="0" cellspacing="0">
   <tr>
        <td>Admitted Under</td>
        <td><s:property value='deschargeInfo.patientAdmittingUnder'/></td>
      </tr>
      <tr>
        <td>Admitted By</td>
        <td><s:property value='deschargeInfo.patientAdmittingDoctor'/></td>
      </tr>
       <tr>
        <td>Department Name</td>
        <td><s:property value='deschargeInfo.departmentName'/></td>
      </tr>

</table></fieldset></td>
<td><fieldset><legend>Admission Information</legend><table width="99%" border="0" style="border:0px solid #FFFFFF"  cellpadding="0" cellspacing="0">

      <tr>
        <td>Date Of Admission</td>
        <td><s:property value='deschargeInfo.patientDateOfAdmission'/></td>
      </tr>
      <tr>
        <td>Date Of Discharge</td>
        <td><s:property value='deschargeInfo.patientDateOfDischarge'/></td>
      </tr>
        <tr>
        <td>Length of LOS</td>
        <td><s:property value=''/></td>
      </tr>
      <tr>
        <td>Ward No</td>
        <td><s:property value='deschargeInfo.patientWordNo'/></td>
      </tr>
      <tr>
        <td>Bed/Cabin No</td>
        <td><s:property value='deschargeInfo.patientBedNo'/></td>
      </tr>

    </table></fieldset></td>
</tr>

<tr>

<td height="265" colspan="3"><div id="headerRemoveDiv">

 <table class="subTableCC" width="100%">
    <tr>

        <th width="100%">Header Name</th>
        <!--  <th width="42">Remove</th>-->
    </tr>
    <s:iterator status="stat" value="deschargeList">
    <tr>

        <td width="100%">
        <s:property value="headerName" />
        </td>

    </tr>
     <tr>

    <td width="100%" height="211" colspan="8" style="padding:0px;">
    <textarea name="textarea" cols="150" rows="13" id="<s:property value='headerNo'/>" ></textarea></td>
  </tr>
    </s:iterator>
</table></div></td>
</tr>

</table>
</div> 
```

**这是我的 Java 动作类代码**

```
public String getPatientDemographyActionTest(){

    PatientDischargeInfo patientDischargeInfo = new PatientDischargeInfo();
    deschargeInfo=patientDischargeInfo.getPatientInfoForDescharge(patientAdmissionNo);
    DepartmentHeaderInfo departmentHeaderInfo = new DepartmentHeaderInfo();
    deschargeList=departmentHeaderInfo.getDepartmentHeader(patientAdmissionNo);
    ActionContext.getContext().getSession().put(sessionVariable.getHeaderInfo(), deschargeList);

    return "getPatientDemographyActionTest";
} 
```

这是我的 SQL 代码

```
 public PatientDeschargeInfo getPatientInfoForDescharge(
                String p_admission_no) {

            //String vDAY_PK_NO = "";
            if (dbConnection == null) {
                dbConnection = new DatabaseConnection();
            }

            String strProcedure = "{call pkg_discharge.prc_dispatinfo(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)}";
            try {
                connection = dbConnection.connectDB();
                cs = connection.prepareCall(strProcedure);

                cs.setString(1, p_admission_no);
                cs.registerOutParameter(2, java.sql.Types.DATE);
                cs.registerOutParameter(3, java.sql.Types.DATE);
                cs.registerOutParameter(4, java.sql.Types.VARCHAR);
                cs.registerOutParameter(5, java.sql.Types.VARCHAR);
                cs.registerOutParameter(6, java.sql.Types.VARCHAR);
                cs.registerOutParameter(7, java.sql.Types.VARCHAR);
                cs.registerOutParameter(8, java.sql.Types.VARCHAR);
                cs.registerOutParameter(9, java.sql.Types.VARCHAR);
                cs.registerOutParameter(10, java.sql.Types.VARCHAR);
                cs.registerOutParameter(11, java.sql.Types.VARCHAR);
                cs.registerOutParameter(12, java.sql.Types.VARCHAR);
                cs.registerOutParameter(13, java.sql.Types.VARCHAR);
                cs.registerOutParameter(14, java.sql.Types.VARCHAR);
                cs.registerOutParameter(15, java.sql.Types.VARCHAR);
                cs.registerOutParameter(16, java.sql.Types.VARCHAR);
                cs.registerOutParameter(17, java.sql.Types.VARCHAR);

                cs.execute();
                //deschargeInfo = new PatientDeschargeInfo();
                deschargeInfo.setPatientDateOfAdmission(cs.getDate(2));
                deschargeInfo.setPatientDateOfDischarge(cs.getDate(3));
                deschargeInfo.setPatientRegistrationNo(cs.getString(4));
                deschargeInfo.setPatientName(cs.getString(5));
                deschargeInfo.setPatientNationalId(cs.getString(6));
                deschargeInfo.setPatientGender(cs.getString(7));
                deschargeInfo.setPatientBloodGroup(cs.getString(8));
                deschargeInfo.setPatientContactNo(cs.getString(9));
                deschargeInfo.setPatientAge(cs.getString(10));
                deschargeInfo.setPatientAdmittingDoctor(cs.getString(11));
                deschargeInfo.setPatientAdmittingUnder(cs.getString(12));
                deschargeInfo.setPatientBedNo(cs.getString(13));
                deschargeInfo.setPatientWordNo(cs.getString(14));
                deschargeInfo.setPatientAddress(cs.getString(15));
                deschargeInfo.setDepartmentId(cs.getString(16));
                deschargeInfo.setDepartmentName(cs.getString(17));

               // vDAY_PK_NO = cs.getString(9);

            } catch (Exception ex) {
                ex.printStackTrace();
            } finally {
                try {
                    cs.close();
                    connection.close();
                } catch (SQLException ex) {
                    ex.printStackTrace();
                }
            }
//          System.out.println("pkStrring " + vDAY_PK_NO);
            return deschargeInfo;
        } 
```

SQL代码是..

```
public List<PatientDeschargeInfo> getDepartmentHeader(String ADMISSION_NO){
    List<PatientDeschargeInfo> deschargeInfo = new ArrayList<PatientDeschargeInfo>() ;
    boolean fg = true;
    con = dbc.connectDB();

    if (con == null) {
        fg = false;
    }
    if(fg){
        try{
            st=con.createStatement();

                    String qty ="select LKP_ID , (select lkp_name " +
                            "from   m00_lkp " +
                            "where  grp_id =10 " +
                            "and    rsta   = 0 " +
                            "and    lkp_id = a.lkp_id) head_name " +
                            "from   eh_discheadmap a " +
                            "where  dept_no = ( select parent_dept " +
                            "from   hr_dept " +
                            "where  dept_no = (select dept_no  " +
                            "from   ip_admission " +
                            "where  admission_no = '"+ADMISSION_NO+"'))";

            System.out.println("Qry :"+qty);

            rs = st.executeQuery(qty);
            while (rs.next()) {
                //deschargeInfo.setPatientAddress(rs.getString(""));
                //deschargeInfo.setPatientAdmissionNo(rs.getString(""));
                PatientDeschargeInfo patientDeschargeInfo = new PatientDeschargeInfo();
                patientDeschargeInfo.setHeaderName(rs.getString("head_name"));
                patientDeschargeInfo.setHeaderNo(rs.getInt("LKP_ID"));
                deschargeInfo.add(patientDeschargeInfo);

                //resultList.add(deschargeInfo);
            }
            } catch (SQLException sq) {
            sq.printStackTrace();
        } finally {
            try {
                if (rs != null) {
                    rs.close();
                }
                con.close();
            } catch (SQLException ex) {
                ex.printStackTrace();
            }
        }
    }
    return deschargeInfo;
} 
```

# matlab - Matlab 运算符

> ID：15491776
> 
> 赞同：1
> 
> 时间：2013-03-19T04:58:49.050
> 
> 标签：matlab

我正在为明天的累积考试而学习，我在之前的考试中答错了以下问题。我希望有人可以向我解释这个问题？(~m) 是什么意思？

问题是：
执行以下脚本后，m的值是多少？

```
a=1; b=2; m=0;  
if (~m)  
    m = m+1;  
    if (a-b > 0)  
        m = m+1;  
    else  
        m = m -1;  
    end  
elseif (m > 1)  
    m = m + 2;  
else  
    m = m - 2;  
end 
```

正确答案是 0，但为什么呢？我会猜到 m = -2

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T05:18:26.137

`~`手段`NOT`。_ `TRUE`但是，除非它们完全等于 ，否则都会考虑数值`0`。

所以，这个逻辑实际执行的命令是：

```
m = m+1;  %Following if (~m)
m = m-1;  $Following else 
```

此外，代码中有一个嵌套`if`语句。如果您使用多级缩进，它将更容易阅读。

# php - 使用 FOSRestBundle 时导入 routing.yml

> ID：15491778
> 
> 赞同：1
> 
> 时间：2013-03-19T04:59:01.660
> 
> 标签：php, fosrestbundle

我按照这里的教程 ( [http://npmasters.com/2012/11/25/Symfony2-Rest-FOSRestBundle.html](http://npmasters.com/2012/11/25/Symfony2-Rest-FOSRestBundle.html) ) 关于使用 FOSRestBundle。

设置路线时，出现错误：

```
Cannot import resource "D:\xampp\htdocs\SymRestTestApp\src\Per\RestBundle/Resources/config/routing.yml" from "D:/xampp/htdocs/SymRestTestApp/app/config\routing.yml". 
```

我的 app/config/routing.yml

```
per_rest:
    resource: "@PerRestBundle/Controller"
    type: annotation
    prefix: /

per:
    type: rest
    resource: "@PerRestBundle/Resources/config/routing.yml" 
```

我的 Per/RestBundle/Resources/config/routing.yml：

```
organisation:
    type: rest
    resource: Per\RestBundle\Controller\OrganisationController

user:
    type: rest
    parent: organisation
    resource: Per\RestBundle\Controller\UserController 
```

有人遇到过这个问题吗？如何修复此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:10:25.890

我刚刚将提交推送到应该可以解决此问题的存储库。见：[https ://github.com/nmpolo/Symfony2Rest/commit/d381b0a4652e76d5a4c1576d1afd8fa0e00eb0c1](https://github.com/nmpolo/Symfony2Rest/commit/d381b0a4652e76d5a4c1576d1afd8fa0e00eb0c1)

这是因为 FOSRestBundle 现在要求您在控制器中实现 ClassResourceInterface 以使用隐式路由。请参阅：[https ://github.com/FriendsOfSymfony/FOSRestBundle/blob/master/Resources/doc/5-automatic-route-generation_single-restful-controller.md#implicit-resource-name-definition](https://github.com/FriendsOfSymfony/FOSRestBundle/blob/master/Resources/doc/5-automatic-route-generation_single-restful-controller.md#implicit-resource-name-definition)

# php - 使用 MySQL 数据库中的表数据通过 javascript 动态编辑 HTML 字段

> ID：15491784
> 
> 赞同：0
> 
> 时间：2013-03-19T04:59:28.810
> 
> 标签：php, javascript, mysql, dynamic, editing

我在试图弄清楚如何使用数据库字段动态填充表单字段时遇到问题。我正在使用的代码如下：

```
<form id="notes" name="notes" method="post" action="<?php $_SERVER['PHP_SELF']; ?>">
<table width="700" border="0.5" align="center">
  <tr>
    <td colspan="6" style="text-align:center">
        <select name="noteselect" id="noteselect" onchange="<?php ?>">
            <option value="new">
                Add new...
            </option>
            <?php
                if(isset($_COOKIE['deceasedID']))
                {
                    $SqlStatement = "SELECT PK_Notes, Note_Title, Date_Entered FROM Notes WHERE FK_Deceased = '".$_COOKIE['deceasedID']."'";

                    $res = ExecuteSQL($SqlStatement, true);
                    while($row = mysqli_fetch_array($res))
                    {
                        echo "<option value='".$row['PK_Notes']."'>".$row['Note_Title']." - ".$row['Date_Entered']."</option>";
                    }
                    $error = " ";
                } 
```

在这个片段中，ExecuteSQL 函数运行 mysqli_connect/query/close 函数，然后返回一个结果集

我想做的是使用选择标记的 onchange 事件来运行一个 php 脚本，该脚本运行一个 mysqli 函数，该函数用数据填充字段。我想我必须使用 javascript 使用结果集中的数据动态编辑字段的 innerHTML，但是如何将 javascript 嵌入到 php 函数中？我尝试过执行以下操作，请记住，$SqlStatement 变量包含 sql 语句，并且该语句确实有效，我直接在 db 上运行它并且它有效：

```
$res = ExecuteSQL($SqlStatement, true)
$row = mysqli_fetch_array($res)
<script type="text/javascript">document.getElementById(*fieldname*).value = $row['db_row_name']</script> 
```

然而这没有任何作用，所以我不知道这里有什么问题。难道不能使用php函数来运行javascript并动态更新字段吗？还是仅使用 100% javascript 来执行此操作并通过 javascript 中的嵌入式 php 运行任何 sql 会更好吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:42:46.690

我试图在这里提供一个示例来解决此类问题。

这将使您了解如何使用 AJAX 从 PHP 填充动态内容。

** HTML 文件 ** $(document).ready(function() { $('#select1').change(function() {

```
 //Get current item's value
                    var select1 = $(this).val();

                    $.ajax({
                        url : "getOptions.php?select1=" + select1,
                        success : function(data) {
                            var result, opts = "";

                            //We get comma separated data
                            result = data.split(',');
                            //Prepare options
                            for(var i = 0; i < result.length; i++) {
                                opts += "<option value='" + result[i] + "'>" + result[i] + "</option>";
                            }
                            //Populate second select
                            $('#select2').html(opts);
                        },
                        error : function() {
                            alert("Error");
                        }
                    });
                });

                //By default populate options for currently selected item
                $('#select1').trigger('change');
            });
        </script>
    </head>
    <body>
        <form>
            <p>
                Select 1
                <select id='select1'>
                    <option  value="1">1</option>
                    <option  value="2">2</option>
                    <option  value="3">3</option>
                    <option  value="4">4</option>
                </select>
            </p>
            <p>
                Select 2
                <select id='select2'>
                </select>
            </p>
        </form>
    </body>
</html> 
```

** PHP 文件 (getOptions.php) **

```
<?php
    $select1 = $_GET['select1'];
    $result = "";

    /*
        Here fetch data and return to front-end
    */

    //following is used to generate some dummy code.

    for ($i=1; $i<=5; $i++) {
        if($result != "") $result .= ",";
        $result .= $select1.$i;
    }
    echo $result;
?> 
```

我只是从后端发送逗号分隔的值。你可以试试 JSON。

我还从后端发送了一些虚拟代码。您可以使用您的数据库来获取结果并发送到前端。

# ruby-on-rails - Rails Activeadmin - 自定义关联选择框

> ID：15491789
> 
> 赞同：42
> 
> 时间：2013-03-19T04:59:52.233
> 
> 标签：ruby-on-rails, ruby, activeadmin

在我的 Rails 应用程序中，我有以下模型：

```
class Idea < ActiveRecord::Base
  belongs_to :user
end

class User < ActiveRecord::Base
  has_many :ideas
end 
```

我正在使用看起来像这样的自定义表单为我的模型创建[ActiveAdmin](http://www.activeadmin.info/) CRUD ：`Idea`

```
form do |f|
  f.inputs do
    f.input :member
    f.input :description
  end
end 
```

要求是具有成员关联内容的自定义文本，即`"#{last_name}, #{first_name}"`. 是否可以自定义我的会员选择框来实现？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-03-19T05:06:50.540

是的，这是可能的。我假设您想使用下拉列表框从模型`members`中选择用户。`User`

```
form do |f|
  f.inputs do
    f.input :user_id, :label => 'Member', :as => :select, :collection => User.all.map{|u| ["#{u.last_name}, #{u.first_name}", u.id]}
    f.input :description
  end
end 
```

# jquery - 我需要一个链接来使用jquery在悬停时缓慢动画，这不起作用

> ID：15491805
> 
> 赞同：4
> 
> 时间：2013-03-19T05:01:18.303
> 
> 标签：jquery

```
$("#link").hover(function() {
    $(this).animate({color: "black"}, "slow");
}, function() {
    $(this).animate({color: "white"}, "slow");
}); 
```

有什么建议么？我希望链接缓慢而不是立即使用 css hover 属性进行动画处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:15:00.607

**您甚至可以使用“慢”-**

```
$("#link").hover(function(){
  $(this).animate({ color: '#fed900'}, "slow");
}, function() {
  $(this).animate({ color: '#000000'}, "slow"); 
}); 
```

[演示](http://jsfiddle.net/stackmanoz/ANUT3/591/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:03:43.260

```
 $("#link").hover(function(){
  $(this).animate({ color: '#3d3d3d'}, 4000);
}, function() {
  $(this).animate({ color: '#000000'}, 4000); 
}); 
```

在那里使用毫秒..

这是动画的语法

> $(selector).animate({params},speed,callback);

速度可以是：慢/快/毫秒

# python - 使用 pip 安装 Django

> ID：15491806
> 
> 赞同：18
> 
> 时间：2013-03-19T05:01:27.900
> 
> 标签：python, django

尝试使用 pip 从 cmd 安装 Django。

```
Python 2.7.3, Windows 7

Env var(...C:\Python27;C:\Python27\Lib\site-packages\;C:\Python27\Scripts\;)

    help("pip")
    .
    .
    .
    .
    VERSION
        1.3.1

    pip install Django
    File "<stdin>", line 1
    pip install Django
          ^
    SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-19T05:13:31.457

`pip install django`从 windows 命令提示符而不是 python shell运行。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-08T02:16:19.373

在文件夹`C:\Python27\Scripts`（或您安装的文件夹`pip`）下，按***SHIFT 并右键单击***空白处，然后选择在此处打开命令窗口，运行

```
pip install Django 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-04T04:22:22.850

```
pip install django==1.4 
```

或者

```
pip install django==1.6 
```

或者

```
pip install  django 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-19T05:15:34.917

`pip`不是从`Python shell`. 从`Command prompt`.

```
pip install Django 
```

它将安装最新的 Django 1.5。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-04T04:50:42.923

除了**user2032220 的回答和 arulmr 的回答之外**，尝试在**虚拟环境中安装****Django**。从长远来看，它将对您有所帮助。

 **这是这样做的方法：

[http://simononsoftware.com/virtualenv-tutorial/](http://simononsoftware.com/virtualenv-tutorial/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-04T00:40:08.043

运行`Python34`你应该去`c:Python34`，文件夹 Scripts，然后输入

```
 pip install django. 
```**

# php - Ajax+PHP实现级联选择

> ID：15491814
> 
> 赞同：0
> 
> 时间：2013-03-19T05:02:06.600
> 
> 标签：php, javascript, ajax, xmlhttprequest

我有一个 demo.html 页面，其中包含两个选择，第一个是“Type”，第二个是“Config”，当我在第一个选择中选择某个类型时，我想使用 ajax 来更新值在第二个选择中。例如，Type 可能有值：VM、Server、DCA 和 VM 只有配置“单节点”，但 DCA 有配置“d0”-“d48”。所以如果我在第一个选项中选择 DCA，我应该在第二个选项中有 49 个选项。

我在网上搜索并确实找到了一些解决方案，然后我自己编写了一些代码。现在的问题是，无论我在第一个选择中选择什么，第二个都不会更新，它总是返回 null。

不确定问题在哪里，代码看起来不错:(感谢您的帮助。

演示页面

```
<html>
  <head>
    <meta charset="utf-8">
  <title>Reservation System</title>

      <link href="jquery/ui/css/sunny/jquery-ui-1.8.16.custom.css" rel="stylesheet" type="text/css">

    <link href="jquery/datatables/css/mrbs-page.css" rel="stylesheet" type="text/css">
    <link href="jquery/datatables/css/mrbs-table.css" rel="stylesheet" type="text/css">
    <link href="jquery/datatables/css/ColReorder.css" rel="stylesheet" type="text/css">
    <link href="jquery/datatables/css/ColVis.css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="css/mrbs.css.php" type="text/css">
        <link rel="stylesheet" media="print" href="css/mrbs-print.css.php" type="text/css">
    <meta name="robots" content="noindex">

<script type="text/javascript" src="jquery/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="jquery/ui/jquery-ui-1.8.22.custom.min.js"></script>
<script type="text/javascript" src="jquery/ui/jquery-ui-i18n.js"></script>
<script type="text/javascript" src="jquery/ui/jquery-ui-datepicker-en.js"></script>
<script type="text/javascript" src="jquery/ui/jquery-ui-datepicker-en-US.js"></script>

  <script type="text/javascript" src="jquery/datatables/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="jquery/datatables/js/ColReorder.min.js"></script>

<script type="text/javascript">
       var xmlhttp;
       var url;
       function createXMLHttpRequest() {
          if (window.XMLHttpRequest)
             xmlhttp = new XMLHttpRequest();
          else
             xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
       }

       function showConfig(str) {
          url = "getOptions.php?type="+str;
          createXMLHttpRequest();
          xmlhttp.open("GET",url,true);
          xmlhttp.send(null);

          xmlhttp.onreadystatechange = function() {handleStateChange()};
        }

       function handleStateChange() {
          if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
          {
                var str = xmlhttp.responseText;
                alert (url);
                createConfig(str);
           }
        }

       function createConfig(str) {
          var configs = str;
          var config = configs.split(",");
          while (document.getElementById("config").options.lengt>0)
                 document.getElementById("config").options.remove(0);
          for (var i=0; i<config.length; i++)
          {
                var ooption = document.createElement("option");
                ooption.value = config[i];
                ooption.text = config[i];
                document.getElementById("config").add(ooption);
           }
        }
</script>

<form id="add_room" class="form_admin" action="add.php" method="post">
      <fieldset>
      <legend>Add DCA</legend>
        <input type="hidden" name="type" value="room">
        <input type="hidden" name="area" value="2">

        <div>
          <label for="room_name">Name:</label>
          <input type="text" id="room_name" name="name" maxlength="50">
        </div>

        <div>
          <label for="room_description">Description:</label>
          <input type="text" id="room_description" name="description" maxlength="100">
        </div>

        <div>
          <label for="room_type">Type:</label>
          <select class="room_area_select" id="type_select" name="area" onchange="showConfig(this.value)"><option  value="VM">VM</option><option  value="Server">Server</option><option  value="DCA-V1">DCA-V1</option><option  value="DCA-V2">DCA-V2</option></select>
        </div>    

       <div>
        <label for = "config">config:</label>
        <select id="config" ></select>
       </div>

      </fieldset>
    </form> 
```

获取选项.php 文件

```
<?php
$type = $_GET['type'];
echo $type;
$result = "";
if ($type == "DCA-V1") {
       for ($i=0;$i<47;$++)
          $result .= $i.",";
       $result .= "48";
}

else if ($type == "Server")
       $result .= "single node";

else if ($type == "VM") {
       $result .= "single host";
}
echo $result;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:19:48.160

由于您已经在页面中使用 jQuery，我建议使用 jQuery 的 ajax 选项。

以下应该工作。相应地更新它。

**获取选项.php**

```
<?php
    $type = $_GET['type'];
    $result = "";
    if ($type == "DCA-V1") {
        for ($i=0;$i<47;$i++)
            $result .= $i.",";
        $result .= "48";
    } else if ($type == "Server") {
        $result .= "single node";
    } else if ($type == "VM") {
        $result .= "single host";
    }
    echo $result;
?> 
```

**演示页面**

```
<html>
    <head>
        <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
        <script type="text/javascript">

            $(document).ready(function() {
                $('#type_select').change(function() {

                    //Get current item's value
                    var type = $(this).val();

                    $.ajax({
                        url : "getOptions.php?type=" + type,
                        success : function(data) {
                            var result, opts = "";

                            //We get comma separated data
                            result = data.split(',');
                            //Prepare options
                            for(var i = 0; i < result.length; i++) {
                                opts += "<option value='" + result[i] + "'>" + result[i] + "</option>";
                            }
                            //Populate second select
                            $('#config').html(opts);
                        },
                        error : function() {
                            alert("Error");
                        }
                    });
                });

                //By default populate options for currently selected item
                $('#type_select').trigger('change');
            });
        </script>
    </head>
    <body>
        <form id="add_room" class="form_admin" action="add.php" method="post">
            <fieldset>
                <legend>Add DCA</legend>
                <input type="hidden" name="type" value="room">
                <input type="hidden" name="area" value="2">

                <div>
                    <label for="room_name">Name:</label>
                    <input type="text" id="room_name" name="name" maxlength="50">
                </div>

                <div>
                    <label for="room_description">Description:</label>
                    <input type="text" id="room_description" name="description" maxlength="100">
                </div>

                <div>
                    <label for="room_type">Type:</label>
                    <select class="room_area_select" id="type_select" name="area">
                        <option  value="VM">VM</option>
                        <option  value="Server">Server</option>
                        <option  value="DCA-V1">DCA-V1</option>
                        <option  value="DCA-V2">DCA-V2</option>
                    </select>
                </div>    

                <div>
                    <label for = "config">config:</label>
                    <select id="config" ></select>
                </div>
            </fieldset>
        </form>
    </body>
</html> 
```

尝试提供一些评论。

如果您需要任何帮助，请告诉我们。

# magento - Magento 管理员登录在 chrome 中不起作用，但在 Firefox 中可以正常工作

> ID：15491819
> 
> 赞同：36
> 
> 时间：2013-03-19T05:02:51.730
> 
> 标签：magento, google-chrome

我只是magento的新手。我已经在我的本地主机上安装了 magento。完成所有设置后，当我使用管理页面登录时，即使使用正确的用户名和密码，我也无法登录 chrome 浏览器。但是当我尝试登录firefox时没有问题。那么有人真的可以在这里帮助我解决问题吗？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-03-19T05:07:49.337

我认为`session cookie`chrome浏览器有问题。因此，只需浏览此目录 `/app/code/core/Mage/Core/Model/Session/Abstract/Varien.php`文件并在 magento 中注释掉从 85 到 92 的行（我的情况是 1.7.2）。像这样

```
 // session cookie params
   /* $cookieParams = array(
        'lifetime' => $cookie->getLifetime(),
        'path'     => $cookie->getPath(),
        'domain'   => $cookie->getConfigDomain(),
        'secure'   => $cookie->isSecure(),
        'httponly' => $cookie->getHttponly()
    );
  */ 
```

之后尝试从您的后端登录。希望您可以使用 chrome 登录。这肯定会对你有所帮助。如果您仍然面临问题，请回复我。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-19T05:16:27.573

在 localhost 中设置 magento 时尝试使用 127.0.0.1。我也遇到了同样的问题，这是a已经提出的解决方案，它工作正常。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-18T10:32:41.983

从`System -> Configuration -> General -> Web`中，使用 IP 地址设置不安全和安全的基本 URL。并尝试再次登录。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-26T10:58:35.750

转到此位置的文件：- app\code\core\Mage\Core\Model\Session\Abstract\Varien.php

并注释掉以下内容（第 85 到 102 行）；

```
// session cookie params
$cookieParams = array(
    'lifetime' => $cookie->getLifetime(),
    'path'     => $cookie->getPath()//,
    //'domain'   => $cookie->getConfigDomain(),
    //'secure'   => $cookie->isSecure(),
    //'httponly' => $cookie->getHttponly()
);

//if (!$cookieParams['httponly']) {
//    unset($cookieParams['httponly']);
//    if (!$cookieParams['secure']) {
//        unset($cookieParams['secure']);
//        if (!$cookieParams['domain']) {
//            unset($cookieParams['domain']);
//        }
//    }
//} 
```

并使用您的凭据登录。希望这对您有用！！！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-13T08:54:36.393

当您尝试登录时，Magento会`cookie_domain`在桌面上看到。`core_config_data`如果它与您的域不同，则无法进入管理面板，只需刷新页面即可，不会出现错误。

从您的数据库中打开`core_config_data`表并搜索或过滤`path`列`web/cookie/cookie_domain`并将其更改为 null 或您的域。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-03T20:00:27.150

当它发生在我身上时，问题是因为我移动了一个目录，但主要内容的 .HTACCESS 文件没有移动到新路径。

检查您的 .htaccess 文件是否在主要内容中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-25T11:39:02.343

只需在此处应用注释...文件位置：\app\code\core\Mage\Core\Model\Session\Abstract\Varien.php

```
/*
// session cookie params
    $cookieParams = array(
        'lifetime' => $cookie->getLifetime(),
        'path'     => $cookie->getPath(),
        'domain'   => $cookie->getConfigDomain(),
        'secure'   => $cookie->isSecure(),
        'httponly' => $cookie->getHttponly()
    );
  */ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-09T22:15:36.573

使用 Internet Explorer 或其他浏览器以管理员身份登录。刷新所有缓存..您将能够使用 chrome 登录。无需修改任何代码即可登录

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-17T22:34:42.033

如果您使用的是 Magento 1.9，文件必须略有不同：/app/code/core/Mage/Core/Model/Session/Abstract/Varien.php

```
 $cookieParams = array(
        'lifetime' => $cookie->getLifetime(),
        'path'     => $cookie->getPath()/*,
        'domain'   => $cookie->getConfigDomain(),
        'secure'   => $cookie->isSecure(),
        'httponly' => $cookie->getHttponly()*/
    );

    /*if (!$cookieParams['httponly']) {
        unset($cookieParams['httponly']);
        if (!$cookieParams['secure']) {
            unset($cookieParams['secure']);
            if (!$cookieParams['domain']) {
                unset($cookieParams['domain']);
            }
        }
    }*/ 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-27T19:35:15.123

提供表单密钥也很重要，否则您的表单将不会得到处理。

```
<?php echo $this->getBlockHtml('formkey'); ?> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-12T13:26:17.277

这是我在相同情况下帮助我的**简单解决方案。**尝试*60 秒*。

在**Google Chrome**中，在**Developer Tools**中（右键单击任何页面元素并选择 Inspect Element），转到**Resources -> Cookies 选项卡**。**删除**原始域的额外 cookie。或将您的基本 url 域设置为其他内容，或更改端口。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-08-14T07:59:07.540

正如公认的答案所指出的那样，在本地主机上访问 Magento 时，问题出在 chrome 上。使用以下代码段将代码包装在 中`app/code/core/Mage/Core/Model/Session/Abstract/Varien.php`，只有在本地主机（IP'127.0.0.1' 或 '::1'）上时才会重置会话参数数组。

```
// SNIPPET Part 1: add this before the original array definition
// -----------------------------------------------------------

if(in_array($_SERVER['REMOTE_ADDR'], array('127.0.0.1', '::1'))) {
    $cookieParams = array();
} else {

    // here comes the original code, thats what you should
    // look for but not touch
    // -------------------------------------------------------

    // session cookie params
    $cookieParams = array(
        'lifetime' => $cookie->getLifetime(),
        'path' => $cookie->getPath(),
        'domain' => $cookie->getConfigDomain(),
        'secure' => $cookie->isSecure(),
        'httponly' => $cookie->getHttponly()
    );

// SNIPPET Part 2: add the closing bracket
// ------------------------------------------

} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-01-22T19:21:17.050

我有 Magento 版本。`1.14.2.1`

更改 varien.php 并没有解决我的问题。

输入`127.0.0.1`而不是`localhost`在仪表板配置 Web Base URL 中解决了我的问题。

我仍然可以在 url 中输入 localhost，它会自动将其重定向到 ip 格式的 url。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-08-12T10:16:02.840

对于 Magento 2

[请使用http://127.0.0.1](http://127.0.0.1)而不是 WAMP 上的 localhost

> {文件夹路径}\magento2\vendor\magento\zendframework1\library\Zend\Session.php

如前所述，前往并发表评论

```
 public static function rememberUntil($seconds = 0)
    {
        if (self::$_unitTestEnabled) {
            self::regenerateId();
            return;
        }

        $cookieParams = session_get_cookie_params();

        session_set_cookie_params(
            $seconds,
            //$cookieParams['path'],
            //$cookieParams['domain'],
            //$cookieParams['secure']
            );

        // normally "rememberMe()" represents a security context change, so should use new session id
        self::regenerateId();
    } 
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2015-10-08T12:54:59.940

# php - t_string php错误

> ID：15491820
> 
> 赞同：-3
> 
> 时间：2013-03-19T05:02:59.233
> 
> 标签：php

```
<?php
$meta_keys = explode(',' stripslashes($row['meta_keys'])); // split into individual keys at commas

foreach ($meta_keys as $key) // loop through all keys
{
    echo '<a href="#">' . trim($key) . '</a> '; // output each key link remove any leading/trailing spaces as well
}

?> 
```

我认为这与我如何使用括号有关，但它给我的错误是：

解析错误：语法错误，第 91 行 /post.php 中的意外“stripslashes”（T_STRING）

91 是： $meta_keys = explode(',' stripslashes($row['meta_keys']));

你们知道它是什么吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T05:06:37.460

您在第一个参数后缺少逗号：

```
explode(',', stripslashes($row['meta_keys'])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:04:39.317

`explode(',' stripslashes($row['meta_keys']));`将其更改为：

`explode(',', $row['meta_keys']);`

参考： http: [//php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

参考：[http ://www.php.net/manual/en/function.stripslashes.php](http://www.php.net/manual/en/function.stripslashes.php)

# linux - 尾随所选规则匹配的最新文件

> ID：15491821
> 
> 赞同：1
> 
> 时间：2013-03-19T05:03:00.803
> 
> 标签：linux, bash

有一个多个进程登录的目录，我想跟踪选定进程的最新文件。

在 ~/bashrc 我添加了以下内容

```
function __taillog {

        tail -f $(find $1 -maxdepth 1 -type f -printf "%T@ %p\n" | sort -n | tail -n 1 | cut -d' ' -f 2-)
}

alias taillog='__taillog' 
```

取自：[https ://superuser.com/questions/117596/how-to-tail-the-latest-file-in-a-directory](https://superuser.com/questions/117596/how-to-tail-the-latest-file-in-a-directory)

日志文件目录示例

```
-rw-r--r-- 1 genesys genesys   2284 Mar 19 16:34 gdalog.20130319_163436_906.log
-rw-r--r-- 1 genesys genesys 131072 Mar 19 16:34 gdalog.20130319_163436_906.snapshot.log
-rw-r--r-- 1 genesys genesys  10517 Mar 19 16:54 lcalog.20130319_163332_719.log
-rw-r--r-- 1 genesys genesys 131072 Mar 19 16:54 lcalog.20130319_163332_719.snapshot.log
-rw-r--r-- 1 genesys genesys   3792 Mar 19 16:37 StatServer_TLSTest.20130319_163700_703.log
-rw-r--r-- 1 genesys genesys 160562 Mar 19 16:52 StatServer_TLSTest.20130319_163712_045.log
-rw-r--r-- 1 genesys genesys  49730 Mar 19 16:54 StatServer_TLSTest.20130319_165217_402.log
-rw-r--r-- 1 genesys genesys  53960 Mar 20 09:55 StatServer_TLSTest.20130319_165423_702.log
-rw-r--r-- 1 genesys genesys 131072 Mar 20 09:56 StatServer_TLSTest.20130319_165423_702.snapshot.log 
```

因此，要跟踪所有 StatServer，命令将是

```
taillog /home/user/logs/StatServer* 
```

它会在给定路径中跟踪该应用程序的最新文件

**问题是**尾部显示一些文件输出，但在附加日志文件时不显示任何更新。如果运行以下命令，则日志正确尾随

```
tail -f $(find /home/user/logs/StatServer*  -maxdepth 1 -type f -printf "%T@ %p\n" | sort -n | tail -n 1 | cut -d' ' -f 2-) 
```

一些如何将此命令添加为 bash 函数然后从别名调用它会导致它无法按预期运行。

欢迎任何关于更好方法的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:20:03.367

我相信你应该运行这个命令：

```
taillog /home/user/logs 
```

当您说`/home/user/logs/this_app*`您将所有与模式匹配的文件作为参数传递给`taillog`并且仅使用第一个参数 ie`$1`时，该命令最终会转换为`tail -f $1`.

相反`$1`，应该是`find`在该目录级别（即`/home/user/logs`在您的情况下）查找文件的目录，然后将结果通过管道传输到`sort`,`tail`和`cut`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T00:30:44.113

我在 linux/bash 上运行你的 taillog 函数没有任何问题。也许日志输出正在被缓冲，所以没有立即写入更改？您可以尝试关闭此 StatServer 的 [log] 缓冲选项。

# jquery - 为什么 jquery .on() 选择器中的“：first”并不总是有效？

> ID：15491823
> 
> 赞同：1
> 
> 时间：2013-03-19T05:03:17.230
> 
> 标签：jquery, event-handling

我有一个特殊的场景需要在具有特定类的第一个子元素上动态绑定事件。例如我有一个 div：

```
<div></div> 
```

然后我在它的第一个“.button”子元素上绑定点击事件：

```
$('div').on('click', '.button:first', function (event) {
    alert($(event.target).text());
}); 
```

稍后将创建子元素：

```
$('div').append(
    "<span class='button'>Button1</span>" +
    "<span class='button'>Button2</span>"); 
```

在这种情况下，当 Button1 被点击时，它会弹出警告窗口。Button2 不会。这是正确的，...直到我在 div 顶部放置一个“.button”元素。

```
<span class='button'>Outer Button</span>
<div></div> 
```

然后单击 Button1 将永远不会触发警报窗口。代码在这里：http: [//jsfiddle.net/D2H92/](http://jsfiddle.net/D2H92/)

知道为什么这并不总是有效，以及如何解决它？干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T05:08:09.157

`:first`只获取与当前选择器匹配的第一个元素 - 在本例中，第一个元素匹配`.button`. 即使事件绑定到`<div>`元素，这也不会使选择器只查看`div`目标。

尝试`:first-child`改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T05:17:16.527

更高版本的 jQuery 将处理这个问题。 **[在此处查看已修复的错误](http://bugs.jquery.com/ticket/11315)**。

***[检查它](http://jsfiddle.net/D2H92/2/)***（*将 jQuery 版本更改为 1.8.3*）。

```
// ..same code 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T05:20:44.657

如果你使用 :first 或 :last 伪属性，那么它只适用于 jQuery 1.8.3 或更高版本。如果你想要你的 div 中的所有按钮（通过省略按钮类之后的 :first），那么它适用于早期版本的 jQuery。因此，在您的 jsfiddle 示例中，您选择了 jQuery 1.7.2，但您必须至少切换到 1.8.3 版本

希望能回答你的问题。

# javascript - 无法在 cordova 2.4 中创建 phonegap ios 插件

> ID：15491824
> 
> 赞同：0
> 
> 时间：2013-03-19T05:03:18.027
> 
> 标签：javascript, ios, objective-c, cordova, phonegap-plugins

我正在尝试安装[这个](https://github.com/jfpsf/flurry-phonegap-plugin) phonegap ios 插件，但它给出了一个错误“错误：找不到插件，或者不是 CDVPlugin。检查 config.xml 中的插件映射。” 在我的 config.xml

```
 <plugin name="Flurry" value="FlurryPhoneGapPlugin" /> 
```

在 plugin.js 中

```
cordova.exec(successCallback, successCallback, 'Flurry', 'startSession', [key]); 
```

, 和插件 .h 文件

```
#import <Foundation/Foundation.h>
#import <Cordova/CDV.h>

@interface FlurryPhoneGapPlugin : CDVPlugin 
```

FlurryPhoneGapPlugin.m 文件

```
 #import "FlurryPhoneGapPlugin.h"
   #import <Cordova/CDV.h>

   @implementation FlurryPhoneGapPlugin 
```

服务名称和动作名称，Objective c Classname 在 config.xml 中相同，

收到此错误后，我尝试根据[此创建自己的简单回声插件](http://docs.phonegap.com/en/2.1.0/guide_plugin-development_index.md.html)

```
#import <Foundation/Foundation.h>
#import <Cordova/CDV.h>

@interface FlurryPhoneGapPlugin : CDVPlugin

 - (void)myMethod:(CDVInvokedUrlCommand*)command;
@end 
```

和 .m 文件

```
#import "FlurryPhoneGapPlugin.h"
#import <Cordova/CDV.h>

@implementation FlurryPhoneGapPlugin

(void)myMethod:(CDVInvokedUrlCommand*)command{

  NSLog(@"hi");
  CDVPluginResult* pluginResult = nil;
  NSString* echo = [command.arguments objectAtIndex:0];

  if (echo != nil && [echo length] > 0) {
    pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsString:echo];
  } else {
    pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_ERROR];
  }

  [self.commandDelegate sendPluginResult:pluginResult callbackId:command.callbackId];

}
@end 
```

我的 plugin.js 文件

```
cordova.exec(success, error , 'Flurry', 'myMethod', ['19']); 
```

我的 config.xml

```
 <plugin name="Flurry" value="FlurryPhoneGapPlugin" /> 
```

但是这次我也出错了

```
 2013-03-19 10:30:46.349 artra[15560:707] ERROR: Plugin 'Flurry' not found, or is not a CDVPlugin. Check your plugin mapping in config.xml.
2013-03-19 10:30:46.354 artra[15560:707] -[CDVCommandQueue executePending] [Line 103] FAILED pluginJSON = [
  null,
  "",
  "success",
  [
    "error",
    "Flurry",
    "myMethod",
    [
      "19"
    ]
  ]
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:21:30.070

在 Xcode 中确保您的 config.xml 不是“灰色”。如果文件是灰色的，则表示它尚未保存。失败，尝试清洁。

如果您设法解决了问题，请告诉我们:)

# iphone - 如何在 Xcode 4 中创建项目模板

> ID：15491826
> 
> 赞同：35
> 
> 时间：2013-03-19T05:03:37.697
> 
> 标签：iphone, ios, xcode, templates, xcode4.5

由于大多数信息都与 Xcode 3 相关，因此很难找到教程来完成此操作。下面的答案可能会对某些人有所帮助。

我从以下网站获取了大部分信息以获取以下答案：

*   [http://meandmark.com/blog/2011/12/creating-custom-xcode-4-project-templates/](http://meandmark.com/blog/2011/12/creating-custom-xcode-4-project-templates/)
*   [http://www.bobmccune.com/2012/03/04/creating-custom-xcode-4-file-templates/](http://www.bobmccune.com/2012/03/04/creating-custom-xcode-4-file-templates/)

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-03-19T05:03:37.697

我花了几个小时在网上搜索有关执行此操作的信息。为 Xcode4.5 设置项目模板实际上并不难，但很难在网络上找到将它们组合在一起的信息！希望以下步骤将帮助您创建自己的。

**配置**

1.  让我们首先获取现有 Xcode 项目模板的副本以用作基础。打开 finder，转到 Applications 并右键单击 Xcode 以显示包内容。导航到 Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Templates/Project Templates/Application/

[编辑] 在 Xcode 5 中，PATH 如下：~/Library/Developer/Xcode/Templates/Application/Project Templates。如果模板/应用程序/项目模板不存在，您也应该创建它。尽管我自己没有尝试过，但在下面的评论中感谢 seufagner 的更新。[/编辑]

2.  **复制**（不要剪切/粘贴！）列出的模板之一。
3.  打开另一个查找器窗口并导航到以下目录（要取消隐藏您的库文件夹，在终端中键入此 cmd：chflags nohidden ~/Library/ 或在单击 Finder/Go 时选择按 alt/option 键）/Library/Developer/Xcode/模板（如果尚未存在，您可能需要创建此文件夹）/Project Templates/
4.  在这里创建一个文件夹。随便称呼它，建议是您的公司名称。此名称出现在 Xcode 中新项目对话框的左侧菜单中。例如，在我称之为我的Appscore 的附加图像中，cocoas2d 还有另一个。 ![在此处输入图像描述](../Images/0f5b3f79794a36fecc47850e3b9c0ef0.png)
5.  将项目模板粘贴到此处并将其文件夹名称更改为您希望的任何名称，例如 MySuperProjectTemplate.xctemplate。我们还没有完成，因为我们需要更改模板的标识符。否则它不会出现在 Xcode 新项目对话窗口中。
6.  在 TextEdit 中打开 TemplateInfo.plist 文件。搜索标识符键。您应该会看到类似于“com.apple.dt.unit.XXXXXX”的字符串值。只要它是独一无二的，就可以用你想要的任何东西替换它。我再次建议添加您的公司名称和描述模板的名称。
7.  如果您现在打开 Xcode，您应该会在新项目对话框中看到项目模板出现在您的公司名称下。

**定制**

目前，您拥有一个不是很有用的现有项目模板的副本。我猜你有很多类可以在几乎所有项目中重用？我们如何将它们包含在此模板中？

1.  复制您想要的文件，并将它们粘贴到您的新项目模板中，即导航到 /Library/Developer/Xcode/Templates/Project Templates//MySuperProjectTemplate.xctemplate/
2.  再次在 TextEdit 中打开 TemplateInfo.plist 文件。我们要做的第一件事是告诉项目模板包含新文件，因此搜索一个名为“Nodes”的键，该键具有一组值。添加以下两行：

    <string> **_VARIABLE_classPrefix:identifier_.h** </string> <string> **_VARIABLE_classPrefix:identifier_.m** </string>

例如，如果您的控制器被称为 BaseViewController 行将如下所示：

> <string>___VARIABLE_classPrefix:identifier___BaseViewController.h</string> <string>___VARIABLE_classPrefix:identifier___BaseViewController.m</string>

![第2步](../Images/f2cce74c9dc183b57e8aaf81f7e8d9ea.png)

3.  接下来找到 Definitions 键，你应该看到一个字典作为它的值。在这里，我们必须添加对包含文件的引用。创建一个新键并将其命名为 ___VARIABLE_classPrefix:identifier___BaseViewController.h（再次以 BaseViewController 为例）。

![第 3 步](../Images/e43c9804aa72b69ee72261f3d3540f78.png)

4.  这个键的值又是一个字典。它包含一个名为 Path 的键和一个字符串值，它是文件的名称，例如 BaseViewController.h
5.  我附上了以下图片来说明我的意思，因为我认为我的描述不够。您可能会注意到其中有一个名为“Group”的键，您可以猜到它允许您直接创建组和输入文件：D

希望这对某人实际上有用:) 任何问题在下面发表评论，我会尽力回答。几周前我这样做了，所以我的记忆有点模糊。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-27T08:45:23.013

您还可以从检查现有项目模板中学到很多东西，您可以在以下位置找到：

```
/Xcode.app/Contents/Developer/Library/Xcode/Templates/Project Templates/ 
```

对于**Mac**和

```
/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Templates/Project Templates/ 
```

对于**iOS**。

*Reid Main*的**[GitHub和](https://github.com/reidmain/Xcode-5-Project-Templates)****[Acani](https://github.com/acani/custom-xcode-templates)**的另一个示例模板也很少。还有由*Mattt Thompson创建的***[AFNetworking](https://github.com/AFNetworking/Xcode-Project-Templates)**模板。查看所有示例，包括 Apple 构建的示例，然后您可以开始创建自己的示例。

 *** * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-29T04:31:30.530

可以在这里找到 plist 文件中使用的所有变量的一个很好的概述：[https ://gist.github.com/shazron/943736](https://gist.github.com/shazron/943736)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-09T05:05:35.953

@bennythemink 您的回答确实很有帮助，但我想在您的回答中添加更多内容。当我们复制 xcode 预定义模板时，此键包含

```
<key>Ancestors</key>
<array>
<string>com.apple.dt.unit.storyboardApplication</string>
</array> 
```

这个值。当我们在 xcode 的自定义模板中使用这个键值时，它会默认创建 AppDelegate 类。我们不能移动到文件夹，只有我们可以将它移动到组中。所以我建议添加这个：

```
<key>Ancestors</key>
<array>
<string>com.apple.dt.unit.objectiveCApplication</string>
<string>com.apple.dt.unit.iPhoneBase</string>
<string>com.apple.dt.unit.prefixable</string>
</array> 
```

自定义模板中的值，以便我们将拥有完全空的模板，我们可以在其中执行任何自定义内容。**

# javascript - 注册设备上的 Pushwoosh 回调

> ID：15491831
> 
> 赞同：2
> 
> 时间：2013-03-19T05:03:59.753
> 
> 标签：javascript, cordova, push-notification, android-notifications, pushwoosh

我一直在尝试使用 phonegap（适用于 Android）将 pushwoosh 实现到我的基于 javascript 的应用程序中。

我已经浏览了他们的教程和示例，我还可以将设备注册到 GCM 服务器以获取通知。但不知何故，我没有收到注册设备的回调。

代码在这里：

```
function initPushwoosh()
{
var pushNotification = window.plugins.pushNotification;
pushNotification.onDeviceReady();

//projectid: "581719621125", appid : " EB8C9-89549"
pushNotification.registerDevice({
    projectid: CONFIG.projectID, 
    appid : CONFIG.appId
},
function(token) {
    console.warn('Push token onPushwooshInitialized : ' + pushToken);
    onPushwooshInitialized(token);
},
function(status) {
    console.warn(JSON.stringify(['failed to register ', status]));
});

document.addEventListener('push-notification', function(event) {
    var title = event.notification.title;
    var userData = event.notification.userdata;

    if(typeof(userData) != "undefined") {
        console.warn('user data: ' + JSON.stringify(userData));
    }

    navigator.notification.alert(title);

    pushNotification.stopGeoPushes();
}); 
```

}

如您所见，registerDevice 采用的第一个函数用于成功回调，另一个用于失败/错误。

我在 eclipse Log Cat ( Console ) 中看到的是这样的

```
03-19 10:23:35.339: V/GCMRegistrar(548): 在服务器上注册: true
03-19 10:23:35.369: W/dalvikvm(548): 异常 Ljava/lang/RuntimeException; 在 Landroid/os/AsyncTask 期间抛出；。
03-19 10:23:35.399: W/PushWoosh DeviceFeature2_5(548): 尝试发送 AppOpen
03-19 10:23:36.669: I/global(548): BufferedInputStream 构造函数中使用的默认缓冲区大小。如果需要 8k 缓冲区，最好是明确的。
03-19 10:23:36.669: W/PushWoosh: NetworkUtils(548): PushWooshResult: {"status_code":200,"status_message":"OK","re​​sponse":null}
03-19 10:23:36.679: W/PushWoosh DeviceFeature2_5(548): 发送 AppOpen 成功
03-19 10:23:36.749: I/dalvikvm(548): 在先前失败的类 Lcom/arellomobile/android/push/utils/WorkerTask 上拒绝重新初始化；v=0x0
03-19 10:23:36.749: W/DeviceRegistrar(548): 尝试注册推送
03-19 10:23:37.569: I/global(548): BufferedInputStream 构造函数中使用的默认缓冲区大小。如果需要 8k 缓冲区，最好是明确的。
03-19 10:23:37.580: W/PushWoosh: NetworkUtils(548): PushWooshResult: {"status_code":200,"status_message":"OK","re​​sponse":null}
03-19 10:23:37.590: V/GCMRegistrar(548): 设置在服务器上注册状态为: true
03-19 10:23:38.039：W/PushEventsTransmitter(548)：没有 android.permission.BROADCAST_STICKY。恢复为简单广播
03-19 10:23:38.120: W/DeviceRegistrar(548): Registered for pushes: APA91bFK0pv-d1gorQOs2lY_CJMYlNCkoLPWlHsO7oZyLa4gLzQqHnKGKW0mUyiW-llXpoWGpPpLPJAm1vY-Bxi_jnG462NIg2r7gvszqJBQt3wY69WsKnhq-_dgsqXRJ_m_KhoP4uS-2k7FM68LEs3cnCLZqjXHiA
如您所见，最后一行表示设备已成功注册，并且有从服务器获取的 Token/Registration Id，但由于它没有调用我的回调函数，我无法处理这些事情。你已经用谷歌搜索并没有找到解决方案，我不确定他们在我这边的代码中是否有任何逻辑问题。非常感谢任何有用的链接和支持。

            回答 #1

赞同：0

时间：2013-03-27T15:36:48.250

请从以下网址获取新的 Pushwoosh.jar：
 [https ://github.com/shaders/phonegap-cordova-push-notifications/tree/master/Android/lib](https://github.com/shaders/phonegap-cordova-push-notifications/tree/master/Android/lib)

或在这里：
 [https ://github.com/shaders/push-notifications-sdk/tree/master/SDK/Android](https://github.com/shaders/push-notifications-sdk/tree/master/SDK/Android)

（他们是一样的）

您看到的行为是由于这一行：03-19 10:23:38.039: W/PushEventsTransmitter(548): No android.permission.BROADCAST_STICKY。恢复为简单广播

有两种方法可以将注册传输到应用程序，Phonegap Pushwoosh 插件尚不支持这种方式（广播）。不知何故，这种变化设法摆脱了......

更新到新的 Pushwoosh.jar 应该会有所帮助。请让我知道进展如何。

```

# php - 数组不会保存到 SESSION PHP

> ID：15491835
> 
> 赞同：2
> 
> 时间：2013-03-19T05:04:30.033
> 
> 标签：php

我有以下代码。

```
$getPoetry['poet'] = $_SESSION[$member]['filters']['newspaper'] = array(
    '$in' => $allFollowing
); 
```

`$getPoetry['poet']` 里面有完整的数组，而 `$_SESSION[$member]['filters']['newspaper']` 没有。

可能是什么问题？

当我打印数组 `$_SESSION[$member]` 存在但它是一个空数组的键

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:49:13.010

**试试这个**

```
<?php   
    session_start();

    // create an array
    $my_array=array('cat', 'dog', 'mouse', 'bird', 'crocodile', 'wombat', 'koala', 'kangaroo');

    // put the array in a session variable
    $_SESSION['animals']=$my_array;

    // a little message to say we have done it
    echo 'Putting array into a session variable';

    // loop through the session array with foreach
    foreach($_SESSION['animals'] as $key=>$value)
        {
        // and print out the values
        echo 'The value of $_SESSION['."'".$key."'".'] is '."'".$value."'".' <br />';
        }
    ?> 
```

**您的示例我为您使用过的变量赋予了一些价值**

```
<?php
session_start();
$member = 'new';
$allFollowing = 'follower';
$getPoetry['poet'] = $_SESSION[$member]['filters']['newspaper'] = array('$in' => $allFollowing);
print_r($_SESSION[$member]['filters']['newspaper']);
print_r($getPoetry);
?> 
```

**@Yogesh Suthar 情况下，他错过了密钥，并且 0 也不应该出现在会话中的第一个密钥检查中**

```
<?php   
session_start();
$abcd = $_SESSION['test']['filters']['newspaper'] = array('test'=>"abcd");
print_r($_SESSION['test']['filters']['newspaper']);
print_r($abcd);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:13:59.267

它工作正常。我认为您尚未`session_start();`在页面顶部开始会话使用

```
session_start();

$abcd = $_SESSION[0]['filters']['newspaper'] = array("abcd");

print_r($_SESSION[0]['filters']['newspaper']);
print_r($abcd); 
```

输出如下

```
Array ( [0] => abcd ) Array ( [0] => abcd ) 
```

# ios - mupdf不在xcode中构建

> ID：15491836
> 
> 赞同：2
> 
> 时间：2013-03-19T05:04:33.170
> 
> 标签：ios, xcode, mupdf

无法构建 mupdf。我收到以下错误：Generating cmap and font files Apple 再次破坏了 Xcode 外部目标，我懒得修复它。从现在开始手动运行“make generate”命令！如果您在运行 GEN 时看到错误，那么您已经忘记了。为 i386 构建库。GEN generated/cmap_cns.h /bin/sh: ./build/debug-ios-i386/cmapdump: No such file or directory make: *** [generated/cmap_cns.h] 错误127

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:54:22.380

执行错误消息告诉您的操作。

打开终端，cd 到 mupdf 目录，然后运行“make generate”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T10:21:03.843

同样的问题。在“make generate”之后，我重新启动了Xcode，然后构建成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-29T09:22:34.137

我能够在不使用任何`make generate`脚本或 shell 脚本的情况下生成 MuPDF 库。[我在这篇文章](https://stackoverflow.com/questions/7324014/develop-an-ebook-reader-on-iphone-ipad-using-mupdf-library/31111924#31111924)上写了一个小的分步教程。

干杯

# ruby-on-rails - 按排序顺序获取哈希的键值

> ID：15491844
> 
> 赞同：-3
> 
> 时间：2013-03-19T05:05:32.657
> 
> 标签：ruby-on-rails, hash

这是我的代码

```
{"wow"=>["wow"], "you"=>["you", "you"], "are"=>["are"], "a"=>["a"], "good"=>["good"], "guy"=>["guy"], "but"=>["but"], "sometime"=>["sometime"], "take"=>["take"], "very"=>["very"], "wrong"=>["wrong"], "decision"=>["decision"]} 
```

我想得到结果

```
{"you"=>2, "are"=>1, "a"=>1, "good"=>1, "guy"=>1, "but"=>1, "sometime"=>1, "take"=>1, "very"=>1, "wrong"=>1, "decision"=>1,"wow" =>1} 
```

我该怎么做请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T05:19:51.763

尝试

```
old_hash = {"wow"=>["wow"], "you"=>["you", "you"], "are"=>["are"], "a"=>["a"], "good"=>["good"], "guy"=>["guy"], "but"=>["but"], "sometime"=>["sometime"], "take"=>["take"], "very"=>["very"], "wrong"=>["wrong"], "decision"=>["decision"]}

new_hash = Hash.new
old_hash.each {|k,v| new_hash.merge!(k=>v.size) } 
```

# ruby - Ruby 中的内存使用率意外高：空哈希正常为 500B？

> ID：15491845
> 
> 赞同：1
> 
> 时间：2013-03-19T05:05:45.457
> 
> 标签：ruby, memory, memory-management, memory-leaks

我们的程序创建了一个主哈希，其中每个键都是一个代表 ID 的符号（大约 10-20 个字符）。每个值都是一个空哈希。

主哈希有大约 80 万条记录。

然而，我们看到 ruby​​ 内存达到了近 400MB。

这表明每个键/值对（符号 + 空哈希）每个消耗约 500B。

这对红宝石来说正常吗？

下面的代码：

```
def load_app_ids
      cols   = get_columns AppFile
      id_col = cols[:application_id]

      each_record AppFile do |r|
        @apps[r[id_col].intern] = {}
      end
end

    # Takes a line, strips the record seperator, and return
    # an array of fields
    def split_line(line)
      line.gsub(RecordSeperator, "").split(FieldSeperator)
    end

    # Run a block on each record in a file, up to 
    # @limit records
    def each_record(filename, &block)
      i = 0

      path = File.join(@dir, filename)
      File.open(path, "r").each_line(RecordSeperator) do |line|
        # Get the line split into columns unless it is
        # a comment
        block.call split_line(line) unless line =~ /^#/

        # This import can take a loooong time.
        print "\r#{i}" if (i+=1) % 1000 == 0
        break if @limit and i >= @limit
      end
      print "\n" if i > 1000
    end

    # Return map of column name symbols to column number
    def get_columns(filename)
      path = File.join(@dir, filename)
      description = split_line(File.open(path, &:readline))

      # Strip the leading comment character
      description[0].gsub!(/^#/, "")

      # Return map of symbol to column number
      Hash[ description.map { |str| [ str.intern, description.index(str) ] } ]
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:51:23.073

我会说这对 Ruby 来说是正常的。我没有每个数据结构使用的空间的度量标准，但一般来说，*基本*的Ruby 在这种大型结构上效果不佳。它必须考虑到键和值可以是任何类型的对象的事实，尽管这对于高级编码非常灵活，但当您不需要这种任意控制时效率低下。

如果我在 irb 中这样做

```
h = {}
800000.times { |x| h[("test" + x.to_s).to_sym] = {} } 
```

我得到一个使用 197 Mb 的进程。

您的进程占用了更多空间，因为它在处理过程中创建了大量哈希 - 每行一个。Ruby 最终会清理掉——但这不会立即发生，内存也不会立即返回给操作系统。

编辑：我应该补充一点，我一直在使用 Ruby 中的各种大型数据结构 - 如果您需要它们，一般方法是找到在本机扩展（或 ffi）中编码的东西，其中代码可以利用在例如一个数组。gem`narray`是数值数组、向量、矩阵等的一个很好的例子。

# error-handling - 如何处理这个错误？

> ID：15491847
> 
> 赞同：0
> 
> 时间：2013-03-19T05:06:11.117
> 
> 标签：error-handling, functional-programming, ocaml, overflow, large-data

我正在处理很长的列表和大树。
有时我会发现这个错误：

```
surgery a;;
Characters 8-9:
  surgery a;;
          ^
Error: This expression has type int t/1044
       but an expression was expected of type 'a t/1810
# type 'a t = | Leaf of ('a -> 'a -> int)
            | Node of 'a * 'a t * 'a t * ('a -> 'a -> int) 
```

我不确定这种错误是什么类型，但我想这是某种溢出。类型正确匹配，但类型后面的反斜杠后有大量数字。在本例中为 1044 和 1810。
这次我之前运行了一些代码`surgery a`。如果我杀死当前的顶级并重新开始，`surgery a`就会运行。

我的问题是：
1.这个错误到底是什么？
2\. 它何时以及如何发生？
3\. 为什么从新的顶层重新运行它会使其工作？
4\. 我应该如何处理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T05:56:55.530

这是一个类型错误，而不是运行时错误。它不会“花费”任何东西，并且与您在内存中拥有的结构的大小没有任何关系。

如果您在顶层不小心，并且混合了具有*相同名称*的两种不同类型，则会发生这种情况。比较：

```
type t = int;;
let f (x : t) = ();;
type u = bool;;
let g (y : u) = f y;;
                  ^
  Error: This expression has type u = bool
         but an expression was expected of type t = int 
```

和

```
type t = int;;
let f (x : t) = ();;
type t = bool;;
let g (y : t) = f y;;
                  ^
  Error: This expression has type t/1047 = bool
         but an expression was expected of type t/1044 = int 
```

这是在两种情况下发生的完全相同的输入错误：您混合了不同的类型。但在第二种情况下，两者都具有相同的名称`t`。类型系统试图提供帮助，并告诉您它在内部分配给名称的唯一整数，以确保在整个程序中确实是唯一的。

这种错误不会发生在顶层之外（以通常的方式编译程序时），因为不可能在完全相同的路径上定义两个具有相同名称的类型。

如何修复它：如果您使用与前一个不等效的新定义重新定义了一个类型，则必须小心重新定义先前记录在顶层中的此先前类型的操作。实际上，它们仍然按预期的旧类型键入，并且将它们与新类型一起使用会导致此类错误。

# java - htmlunit setTimeOut 以一种奇怪的方式工作

> ID：15491848
> 
> 赞同：0
> 
> 时间：2013-03-19T05:06:20.153
> 
> 标签：java, timeout, htmlunit

我已经使用 htmlunit 一段时间了。现在我正在尝试向它引入超时功能。
它的工作方式如下：

```
WebClient webClient = new WebClient(BrowserVersion.INTERNET_EXPLORER_8);
//To disable throwing exception for script errors
webClient.setThrowExceptionOnScriptError(false);
//To disable java scripts
webClient.setJavaScriptEnabled(false);
//To disable the loading of CSS
webClient.setCssEnabled(false);
int timeout = 300;
// Add timeout for ETA
webClient.setTimeout(timeout);
try{
    webClient.setUseInsecureSSL(true);
}catch(GeneralSecurityException e){
    log.info("General Security Exception occured");
    log.error("",e);
}
HtmlPage loginPage = (HtmlPage) webClient.getPage("myurl"); 
```

如果我减少超时，它会给我一个`ConnectionTimeOutException`. 但是现在如果我更改设置顺序`setTimeout`并且`setUseInsecureSSL`它不起作用。我想说的是下面的代码不会让我连接超时。

```
WebClient webClient = new WebClient(BrowserVersion.INTERNET_EXPLORER_8);
//To disable throwing exception for script errors
webClient.setThrowExceptionOnScriptError(false);
//To disable java scripts
webClient.setJavaScriptEnabled(false);
//To disable the loading of CSS
webClient.setCssEnabled(false);
try{
    webClient.setUseInsecureSSL(true);
}catch(GeneralSecurityException e){
    log.info("General Security Exception occured");
    log.error("",e);
} 
//Setting it after setting "setUseInsecureSSL"
int timeout = 300;
// Add timeout for ETA
webClient.setTimeout(timeout); 
```

谁能解释一下这是什么原因？？
设置属性的顺序重要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:02:51.123

有了这些问题，人们应该始终指定他们正在使用哪个版本的软件，在这种情况下是库，否则这个问题可能变得毫无意义......而不是浪费时间来谴责那些臭名昭著的人（“以个人经验为后盾”）蜥蜴、龙或任何他的名字都应该强制执行（“提供详细信息”）。话虽如此，我确认 HTMLUnit 2.7 到 2.9 至少具有如上所示的代码安排，因为第二个非工作示例不会引发任何与连接超时相关的异常（“回答问题”）。现在，我将使用 HTMLUnit 在我们的大型程序中反转有问题的 2 条候选行，并就此回复您（“分享您的研究”），但是，尽管如此，该图书馆深处的某个人对为什么会在地球上发生这种现象的解释将不胜感激！增强现实

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-13T19:19:16.893

我很惊讶你试图在这个地方使用 try-catch，因为你的 try-catch 永远不会工作。

您只是在初始化`WebClient`和设置功能。删除 try-catch 语句并在调用时使用它们`webClient.getPage(...)`。

如果您针对一些非静态页面，300 毫秒也非常短。根据您的需要更改以下内容，并且在调用之前不要使用 try-catch `webClient.getPage(...)`。

```
WebClient webClient = new WebClient();
webClient.getOptions().setUseInsecureSSL(true);
webClient.getOptions().setRedirectEnabled(true);
webClient.getOptions().setJavaScriptEnabled(false);
webClient.getOptions().setCssEnabled(false);
webClient.getOptions().setThrowExceptionOnScriptError(false);
webClient.getOptions().setThrowExceptionOnFailingStatusCode(false);
webClient.getCookieManager().setCookiesEnabled(false);
webClient.getOptions().setTimeout(8000);
webClient.getOptions().setDownloadImages(false);
webClient.getOptions().setGeolocationEnabled(false);
webClient.getOptions().setAppletEnabled(false); 
```

# web-applications - 我如何以 http:\\www.example.com 运行 TOMCAT，因为它在 http:\\www.example.com:8080 上运行

> ID：15491849
> 
> 赞同：0
> 
> 时间：2013-03-19T05:06:21.763
> 
> 标签：web-applications, tomcat7, openjdk

我如何以 http:\www.example.com 运行 TOMCAT 站点，因为它在 http:\www.example.com:8080 上运行

我也有一些 PHP 文件

有人指导我如何完成这项任务。

在 http:\www.example.com 和 php 页面上运行 JAVA 站点

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:11:56.320

您需要在端口 80 上运行 tomcat。查看此链接

[在端口 80 上安装并运行 Tomcat 作为我唯一的 Web 服务器](https://serverfault.com/questions/127110/how-do-i-install-and-run-tomcat-on-port-80-as-my-only-web-server-rooted-ubuntu)

# regex - 正则表达式限制输入逗号和@

> ID：15491854
> 
> 赞同：2
> 
> 时间：2013-03-19T05:06:46.677
> 
> 标签：regex

我希望 reg 限制用户`,`和`@`

我试过`[^,@]`了，它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:07:05.907

您应该使用`[^,@]+`而不是，`[^,@]`因为这`+`将允许正则表达式搜索整个字符串，而不仅仅是第一个值。

# android - 读/写偏好是一项昂贵的操作吗？

> ID：15491858
> 
> 赞同：6
> 
> 时间：2013-03-19T05:07:06.930
> 
> 标签：android, io, preferences, changelistener

我有一个偏好，可以控制我的应用程序是否在用户单击按钮时播放声音（这很常见，想想计算器）。每次用户单击按钮时，都会调用以下方法：

```
private void playButtonClickSound() {
    SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(parentActivity);
    boolean sounds = sharedPrefs.getBoolean("prefSounds", false);
    if (sounds) {
        // blah
    }
} 
```

我在想读取首选项可能是一项*昂贵*的操作（类似于 I/O 操作，因为首选项是持久的）并且由于用户经常单击按钮，因此这样做可能不是一个好主意。

一般来说，经常读/写首选项是一个坏主意吗？如果是这样，是否还有另一种方法，例如注册*偏好更改侦听*器以在偏好更改时收到通知？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T05:25:04.823

坦率地说，我在 UI 线程上完成了所有工作，无论我是否应该这样做，而且即使在速度较慢的设备上，我也从未注意到有轻微的犹豫。这该死的快。也就是说，它*是*I/O，所以异步执行肯定不是一件*坏事*。对于写入，如果您的目标是 API 9 及更高版本，您可以使用它`apply()`来代替`commit()`为您异步执行它。

至于您关于偏好更改侦听器的问题，是的，您也可以这样做：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);
prefs.registerOnSharedPreferenceChangeListener(new OnSharedPreferenceChangeListener() {
    @Override
    public void onSharedPreferenceChanged(SharedPreferences preferences, String key) {
        if("my_preference_key".equals(key) {
            //Handle it here
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:22:00.013

您可以使用 Java 引用在内存缓存中实现。您可以执行以下操作

```
public boolean getMySound(){
     boolean sound=getFromMemory();
     if (!sound){//if not available 
          //lets load from shared preferences
     sound=getSoundFromPreference();
         // update memory cache so next time i will load from memory
    addToMemory(sound);
    }
    return sound;
} 
```

这将最大限度地减少 I/O 操作的数量。

# python - 按 SORTED 顺序在字典中添加键

> ID：15491861
> 
> 赞同：8
> 
> 时间：2013-03-19T05:07:16.013
> 
> 标签：python, dictionary, key, sorted

假设我有一本字典

```
{1:5, 2:5, 4:5} 
```

是否有这样的数据结构，如果我添加键值对`3:5`，将其输入到字典中，以便键按排序顺序排列？IE

```
{1:5, 2:5, 3:5, 4:5} 
```

我知道`collections.OrderedDict()`，但这只会使键保持添加顺序（目前这对我来说还不够）。

我不想必须使用普通字典`dic = {}`，然后必须使用`sorted(dic)[0]`抓取最小的键。我宁愿有`sorted_dict[0]`类型功能。
这样做的原因是，如果我使用普通字典，我将不得不多次调用排序，因为我不断地将对添加到我的字典中。

编辑：我应该提到，这不仅是我关心的最小和最大键，我还需要定期打印这本字典......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T05:29:59.227

如果您打算连续地从字典中添加和删除键，那么您确实需要使用适当的数据结构来解决问题的东西——不是哈希表（或哈希表加列表，如`SortedOrderedDict`-type 配方），而是平衡树（或等价物，如跳过列表）。

如果您环顾一下 PyPI，您会发现许多选项。我的建议是[`blist`](https://pypi.python.org/pypi/blist/)。尽管它的数据结构可能不如其他一些结构那么优化（因为 B+Tree 比二叉树宽得多），但对于您遇到的几乎所有用例来说，它可能已经足够好了。并且它具有完整且经过良好测试的界面，包括经过良好测试的性能保证。它被其他严肃的项目大量使用。

如果您正在处理树性能确实很关键的罕见情况之一，您可能应该查看各种红黑树、展开树、跳过列表等实现。我以前用过[`bintrees`](https://pypi.python.org/pypi/bintrees/1.0.1)，它有一个很棒的接口（例如，您可以通过索引访问键和值，甚至可以对树进行切片，以及将其视为 a `dict`，并且作者已经考虑并避免了所有潜在的歧义)，但我还没有认真地测试过它。

或者，如果您的键和值确实都是较小的整数，您可能需要考虑使用 Cython 将 C++ 包装`map<int, int>`在 Pythonic 接口中。（在 C++ 之上提供一个*完整*的接口是不太可能的`map`，但无论如何您通常都不需要它。）或者，或者，修改其中一个实现，例如`bintrees.FastRBTree`存储和比较`long`而不是`PyObject*`.

另一方面，如果您只是要一次创建所有字典然后使用它，则有一个更简单的答案。对其进行排序，并将其粘贴在`OrderedDict`. 那么你不需要标准库之外的任何东西。

```
sorted_dict = collections.OrderedDict(sorted(d.iteritems())) 
```

* * *

从对另一个答案的评论中，您说“我无权安装新模块......”

首先，确保这是真的。您可能*确实*有权在用户站点包目录中安装模块。或者，如果`virtualenv`已安装和/或您使用 3.3 和 built-in `venv`，更好的是，您可能有权创建 venv 并将模块安装到其中。

但如果是这样，您需要做的就是将文件从`blist`/ `bintrees`/whatever 复制到您的项目中。

您可能遇到的问题是这些包中的大多数都包含 C 扩展模块，这意味着您必须能够构建它们（嗯，`build_ext -i`它们）。如果您的系统没有安装 Python 开发文件和编译器工具链，则不能这样做。在这种情况下，您正在寻找最好的纯 Python 解决方案。`bintrees`带有一个纯 Python 实现，它与普通的 C 扩展实现相同，但速度较慢。当然，它仍然是 O(log N)，只是常数因子要高得多。如果 N 足够大，它仍然是一个巨大的胜利；如果不是，它可能不是。

如果这听起来很合理，但是您需要帮助设置每个用户的站点包或虚拟环境，或者将模块复制到您的项目中，或者就地构建扩展等，您可能应该搜索对于现有问题，如果找不到问题，请提出新问题（如果没有其他原因，只是因为那些擅长安装问题的人不一定是数据结构方面的专家，甚至可能不会阅读本文问题）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T05:23:35.880

试试这个食谱——http: [//code.activestate.com/recipes/576998-sorted-dictionary/](http://code.activestate.com/recipes/576998-sorted-dictionary/)

它使用 stdlib [bisect](http://docs.python.org/2/library/bisect.html)模块对键进行排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-23T06:36:45.323

晚了一年多，但我想推荐[sortedcontainers](http://www.grantjenks.com/docs/sortedcontainers/)模块。像 blist 和 bintrees 一样，它提供了一个[SortedDict](http://www.grantjenks.com/docs/sortedcontainers/sorteddict.html)数据类型，以排序顺序维护键。与那些模块不同，它是用纯 Python 编写的，实际上速度更快。SortedDict 还支持索引。查找最小值/最大值实际上发生在 O(1) 时间内。

因为它是纯 Python，所以使用 pip 安装应该是轻而易举的事：

```
pip install sortedcontainers 
```

然后你可以简单地导入 SortedDict

```
In [1]: from sortedcontainers import SortedDict

In [2]: d = SortedDict({1:5, 2:5, 4:5})

In [3]: d
Out[3]: SortedDict({1: 5, 2: 5, 4: 5})

In [4]: d[3] = 5

In [5]: d
Out[5]: SortedDict({1: 5, 2: 5, 3: 5, 4: 5}) 
```

如果您在使用 pip 安装东西时遇到困难或无法复制需要编译的文件，那么您可以将 sortedlist.py 和 sorteddict.py 文件从软件仓库中拉出。所有代码[在 github 上都是开源的](https://github.com/grantjenks/sorted_containers)。

sortedcontainers 模块还提供了与最流行的建议进行[性能比较的基准测试。](http://www.grantjenks.com/docs/sortedcontainers/performance.html)

# for-loop - 批处理文件在文件中查找整数

> ID：15491867
> 
> 赞同：0
> 
> 时间：2013-03-19T05:08:11.543
> 
> 标签：for-loop, batch-file, cmd

我有一个文本文件，它将有一个字符串 CommSessionMgr，然后是空格，然后是数字（如下所示）

它将只有一行 CommSessionMgr 0 CommSessionMgr 1 CommSessionMgr 2

示例：test.txt

* * *

srvrmgr:sibsrvmqint2> 列出 comp CommSessionMgr 显示 CC_ALIAS、CP_NUM_RUN_TASKS

CC_ALIAS CP_NUM_RUN_

* * *

CommSessionMgr 0

返回 1 行。

* * *

从上面的示例中，我想找出我们在 CommSessionMgr 字符串旁边的值（在上面的示例中为 0）。这必须通过批处理文件完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:28:18.653

尝试这个：

```
@echo off &setlocal
for /f "tokens=2" %%i in ('type test.txt ^| find "CommSessionMgr"') do set "integer=%%i"
echo %integer%
endlocal
pause 
```

# ios - iPhone 音乐流媒体

> ID：15491872
> 
> 赞同：1
> 
> 时间：2013-03-19T05:08:26.887
> 
> 标签：ios, objective-c, streaming, core-audio, audio

我正在尝试通过蓝牙将音乐从一台 iOS 设备发送到另一台设备。我一直在使用[它](https://github.com/abbood/audioSamplingToAudioQueue)来构建数据包，就像在 Ray Wenderlich 的 SNAP 教程中一样，但是我在重建接收电话上的数据包信息时遇到了麻烦。我曾尝试使用[https://github.com/abbood/iphoneAudioSyncer](https://github.com/abbood/iphoneAudioSyncer)但我认为这对我的需求来说太复杂了（因为我不需要同步播放）。解决丢失/乱序数据包等问题的最简单的缓冲方法是什么？我已经阅读了很多 CoreAudio 的东西，但它非常密集，所以我希望得到解决这类问题的人的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T06:41:25.557

当您谈论丢失/乱序数据包时..您正在谈论[数据包丢失隐藏](http://en.wikipedia.org/wiki/Packet_loss_concealment)的主题..这是一个非常密集的话题（我的意思是，如果您认为核心音频很密集..等到您深入了解PLC） .

简而言之，有很多方法可以处理数据包丢失。但最简单的方法（我建议您这样做）是用静音替换丢失的数据包（无序数据包也是如此。如果数据包丢失按顺序..只是丢弃它）。

话虽如此..您正在处理流式传输给您的音频（即通过蓝牙/wifi网络发送）..这意味着几乎100％的时间它是您获得的压缩音频（即可变比特率音频VBR ).. 如果您只是尝试用静音替换丢失的 VBR 数据包.. 您会遇到[这个](https://stackoverflow.com/questions/13565904/core-audio-is-zero-equivalent-to-silence-only-for-pcm-audio)问题。您必须插入与您正在处理的 VBR 音频相同压缩格式的静音数据包，或者您必须将 VBR 压缩音频转换为非压缩音频（无损 PCM），然后插入零代替丢失的数据包。

# ios - 如何从 ipad 中的 tableView 中搜索数据并在同一个表中显示该数据。

> ID：15491873
> 
> 赞同：0
> 
> 时间：2013-03-19T05:08:31.940
> 
> 标签：ios, iphone, objective-c, uitableview, full-text-search

我有一个文本字段，我希望如果用户输入任何数据并且它与 tableView 中的任何单元格匹配，那么它必须显示。我使用文本字段从表中搜索数据。

这就是我在 tableView 中填充数据的方式，如下所示：

```
 - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
  {

    NSLog(@"Number of Sections");
    if(section == 0)
    return @"Sales";
    if(section == 1)
    return @"Soft Skills";
   }

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

       if (section==0)
    {
    appDelegate = (MultipleDetailViewsWithNavigatorAppDelegate *)[[UIApplication sharedApplication] delegate];

    int count=[resultArray count];

    NSLog(@"resultArry Row Counts is %d",count);

    return [resultArray count];
    }

       else{
    appDelegate = (MultipleDetailViewsWithNavigatorAppDelegate *)[[UIApplication sharedApplication] delegate];

    int count=[resultArrayOne count];

    NSLog(@"resultArry Row Counts is %d",count);

    return [resultArrayOne count];
      }
         }

        - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath     

      {

     NSLog(@"Table Cell Data");
     static NSString *CellIdentifier = @"Cell";

         UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

         if (cell == nil) {
         cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

       }

   cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

   if (indexPath.section==0) {

    appDelegate = (MultipleDetailViewsWithNavigatorAppDelegate *)[[UIApplication sharedApplication] delegate];

    ObjectData *theCellData = [resultArray objectAtIndex:indexPath.row];
    NSString *cellValue =theCellData.sub_Category;
    NSLog(@"Cell Values %@",cellValue);
    cell.textLabel.text = cellValue;

    return cell;

       }

      else {

    appDelegate = (MultipleDetailViewsWithNavigatorAppDelegate *)[[UIApplication sharedApplication] delegate];
    ObjectData *theCellData = [resultArrayOne objectAtIndex:indexPath.row];
    NSString *cellValue =theCellData.sub_Category;
    NSLog(@"Cell Values %@",cellValue);
    cell.textLabel.text = cellValue;
    return cell;

    }
          }

      -(void)textFieldTextDidChange:(UITextField*)tf{

   NSString*test  = searchTextField.text ;

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:29:47.147

搜索数据`UITableview`，您可以使用`SearchBar`。您可以在许多 Denmo 项目或示例中看到都可以`SearchBar`在 Searching Data 中使用`Tableview`。下面的代码`SearchBar`。

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{

    searchName = [[NSMutableArray alloc]init] ;
    for(NSString *name in yourArraySeaching)
    {
        NSRange r = [name rangeOfString:searchText options:NSCaseInsensitiveSearch];

        if(r.location != NSNotFound)
        {
            [searchName addObject:name];
            tempSearch=1;
        }
    }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:30:25.430

首先，您需要一个与**主数组**相同的**临时数组**用于搜索目的，一个数组维护**搜索数组的 ID**。

 ****搜索的布尔值 ::`bool searching;`

代码 ：：

```
-(void)textFieldTextDidChange:(UITextField*)tf {

    int len = [[tf.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] length];

    if (len < [mainArray count]) {

        [tempArray removeAllObjects];
        [tempArrayIds removeAllObjects];

        for(NSString *curString in tempArray)
        {
            NSString *substringRange = [curString substringWithRange:NSMakeRange(0, tf.length)];

            // Converting SearchChar and Firstchar of contestname into lower case

            NSString *searchChar = [tf lowercaseString];
            NSString *FirstChar = [substringRange lowercaseString];

            //NSLog(@"values is %@",substringRange);

            if ([FirstChar isEqualToString:searchChar]) {

                if ([tf isEqualToString:@""]) {

                    searching = false;
                    [tf resignFirstResponder];
                }
                else
                {
                    searching = true;
                    [tempArray addObject:curString];

                    indexVal = [tempArray indexOfObject:curString];

                    NSString *s = [NSString stringWithFormat:@"%d", indexVal];
                    [tempArrayIds addObject:s];
                }
           }
       }
       [tblView reloadData];
    } 
```

表方法::

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

     if (searching)
        return [tempArray count];
    else
        return [mainArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    if(searching)
    {
        int k = [[tempArrayIds objectAtIndex:indexPath.row] intValue];
        cell.title.text = [mainArray objectAtIndex:k];
    }
    else
    {
        cell.title.text = [mainArray objectAtIndex:indexPath.row];
    }
    return cell;
} 
```

希望它会帮助你。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T05:33:28.293

我通常更喜欢使用免费提供的 Sensible TableView 框架来做到这一点。该框架将自动获取数据并为您提供所有搜索功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T05:16:01.067

试试这样可能对你有帮助，

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF beginswith[c] %@",  txtSearch.text];
    NSArray *ResultArray = [yourArray filteredArrayUsingPredicate:predicate];
    [table reloadData];
    return YES;
} 
```

在上面的代码中替换你的数组。

如果要显示具有文本字段子字符串的表数据，请使用以下代码。

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF contains[c] %@",  txtSearch.text]; 
```****

# java - 如何使用 adapter.notifyDataSetChanged(); 我必须在哪里使用这些行来解决我的错误

> ID：15491876
> 
> 赞同：0
> 
> 时间：2013-03-19T05:08:52.643
> 
> 标签：java, android, android-adapter

ItemListBaseAdapter.java

```
public class ItemListBaseAdapter extends BaseAdapter {
private static ArrayList<Recipedetails> itemDetailsrrayList;

private Integer[] imgid = {
        R.drawable.vegeterian,
        R.drawable.nonveg,
        R.drawable.pickels,
        R.drawable.soup,
        R.drawable.sweets,
        R.drawable.cakes,
        R.drawable.icecreams,
        R.drawable.chinesevegdishes,
        R.drawable.chinesenonveg,
        R.drawable.chinesenoodles,
        R.drawable.chinesesoup,
        R.drawable.godhumaivegadai,
        R.drawable.soyamorekoozh,
        R.drawable.tomatokulambu,
        R.drawable.tomatoupma,
        R.drawable.vadanavratrispecial,
        R.drawable.eggkurma,
        R.drawable.milagu,
        R.drawable.rasam,
        R.drawable.vegetablekootu,
        R.drawable.avial,
        R.drawable.kothavarangaicurry,
        R.drawable.allepeyfishcurry,
        R.drawable.spicymadraschicken,
        R.drawable.prawns,
        R.drawable.keralachickenstew,
        R.drawable.nilgirichickenkorma,
        R.drawable.pepperchickencurry,
        R.drawable.chettiandchicken,
        R.drawable.prawnmasala,
        R.drawable.beeffry,
        R.drawable.crispyfish,
        R.drawable.amlapickle,
        R.drawable.avakaipickle,
        R.drawable.capsicumpickle,
        R.drawable.lemonpickle,
        R.drawable.onionpickle,
        R.drawable.mangopickle,
        R.drawable.tendermangopickle,
        R.drawable.tomatopickle,
        R.drawable.chillipickles,
        R.drawable.gingerpickle,
        R.drawable.garlicsoup,
        R.drawable.mixedvegsoup,
        R.drawable.chickenmanchowsoup,
        R.drawable.cleartomatosoup,
        R.drawable.sweetcornvegetablesoup,
        R.drawable.prawnandnoodlesoup,
        R.drawable.beetrootsoup,
        R.drawable.capsicumsoup,
        R.drawable.muttonsoup,
        R.drawable.spinachsoup,
        R.drawable.vegcurry,
        R.drawable.mushroommutter,
        R.drawable.alooparatha,
        R.drawable.daltadka,
        R.drawable.aloomethi,
        R.drawable.rajma,
        R.drawable.paneerbhujri,
        R.drawable.alooghobi,
        R.drawable.aloosabzi,
        R.drawable.kadhaipaneer,
        R.drawable.chickenwithbellpeppers,
        R.drawable.butterchicken,
        R.drawable.fishkorma,
        R.drawable.prawnfry,
        R.drawable.tandoorichicken,
        R.drawable.maccherjholfish,
        R.drawable.shamikabab,
        R.drawable.saagmeat,
        R.drawable.sindhichickenbiryani,
        R.drawable.punjabichickencurry,
        R.drawable.gulabjamun,
        R.drawable.basundi,
        R.drawable.peda,
        R.drawable.badhamhalwa,
        R.drawable.coconutburfi,
        R.drawable.kulfi,
        R.drawable.ladoo,
        R.drawable.mysorepak,
        R.drawable.ricekheer,
        R.drawable.badam,
        R.drawable.cauliflowersoup,
        R.drawable.cucumbersoup,
        R.drawable.tomatosoup,
        R.drawable.mulligatawnysoup,
        R.drawable.greenpeassoup,
        R.drawable.northindianmuttonsoup,
        R.drawable.chickennoodlesoup,
        R.drawable.spicybeansoup,
        R.drawable.eggdropsoup,
        R.drawable.springvegsoup,
        R.drawable.mushroomandseitan,
        R.drawable.tofuwith3spices,
        R.drawable.creamyvegpie,
        R.drawable.grilledvegmedley,
        R.drawable.bakedsquash,
        R.drawable.africanchickenstew,
        R.drawable.westafricanchicken,
        R.drawable.africanyamsoup,
        R.drawable.chickenchilliroast,
        R.drawable.chilliblackbeans,
        R.drawable.williecake,
        R.drawable.pumpkingingercupcakes,
        R.drawable.doublelayerpumpkincheesecake,
        R.drawable.carrotcake,
        R.drawable.sexcake,
        R.drawable.chocolatechipicecream,
        R.drawable.cookieicecream,
        R.drawable.cinnamonicecream,
        R.drawable.appleicecream,
        R.drawable.walnut,
        R.drawable.chineseaubergins,
        R.drawable.spicycucumber,
        R.drawable.chinesemushrooms,
        R.drawable.chinesegobi,
        R.drawable.spicytofu,
        R.drawable.chinesetilchicken,
        R.drawable.chickenmoongali,
        R.drawable.sweetsourchicken,
        R.drawable.cherrychicken,
        R.drawable.mymasalachicken,
        R.drawable.coldseasamenoodles,
        R.drawable.sobanoodles,
        R.drawable.noodleswithtofu,
        R.drawable.chinesevegandbeef,
        R.drawable.noodleswithpepper,
        R.drawable.jhingasoup,
        R.drawable.masalachickensoup,
        R.drawable.cabbagesoup,
        R.drawable.chinesepumpkinsoup,
        R.drawable.baconsoup,

        };

private LayoutInflater l_Inflater;

public ItemListBaseAdapter(Context context, ArrayList<Recipedetails> results) {
    itemDetailsrrayList = results;
    l_Inflater = LayoutInflater.from(context);
}

public int getCount() {
    return itemDetailsrrayList.size();
}

public Object getItem(int position) {
    return itemDetailsrrayList.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = l_Inflater.inflate(R.layout.item_details_view, null);
        holder = new ViewHolder();
        holder.txt_itemName = (TextView) convertView.findViewById(R.id.name);
        holder.txt_itemDescription = (TextView) convertView.findViewById(R.id.itemDescription);
        holder.itemImage = (ImageView) convertView.findViewById(R.id.photo);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.txt_itemName.setText(itemDetailsrrayList.get(position).getName());
    holder.txt_itemDescription.setText(itemDetailsrrayList.get(position).getItemDescription());
    holder.itemImage.setImageResource(imgid[itemDetailsrrayList.get(position).getImageNumber() - 1]);
    return convertView;
}
public synchronized   void refreshAdapter(ArrayList<Recipedetails> items) {
    itemDetailsrrayList.clear();
    itemDetailsrrayList.addAll(items);
    notifyDataSetChanged();
}

static class ViewHolder {
    TextView txt_itemName;
    TextView txt_itemDescription;
    ImageView itemImage;
}

} 
```

食谱详情.java

```
public class Recipedetails {

public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getItemDescription() {
    return itemDescription;
}
public void setItemDescription(String itemDescription) {
    this.itemDescription = itemDescription;
}

public int getImageNumber() {
    return imageNumber;
}
public void setImageNumber(int imageNumber) {
    this.imageNumber = imageNumber;
}

private String name ;
private String itemDescription;
private int imageNumber;
} 
```

列表视图.java

```
public class SouthIndian  extends Activity {
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final ArrayList<Recipedetails> image_details = GetSearchResults();

        final ListView lv1 = (ListView) findViewById(R.id.listV_main);
        lv1.setAdapter(new ItemListBaseAdapter(this, image_details));

        lv1.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                Object o = lv1.getItemAtPosition(position);
                Recipedetails obj_itemDetails = (Recipedetails)o;
                Toast.makeText(SouthIndian.this, "You have chosen : " + " " + obj_itemDetails.getName(), Toast.LENGTH_LONG).show();

                 //final ArrayList<Recipedetails> act = GetSearchResults(); 
                //if (act != null)

                switch(obj_itemDetails.getImageNumber())
                {
                    case 1:
                         Intent newActivity = new Intent(SouthIndian.this, 
                                 AndroidTabLayoutActivity.class);     
                         startActivity(newActivity);
                        break;

                    case 2:
                        Intent new1Activity = new Intent(SouthIndian.this, 
                                AndroidTabLayoutActivity1.class);     
                        startActivity(new1Activity);
                        break;

                    case 3:
                        Intent new2Activity = new Intent(SouthIndian.this, 
                                AndroidTabLayoutActivity2.class);     
                        startActivity(new2Activity);
                        break; 

                    case 4:
                        Intent new3Activity = new Intent(SouthIndian.this, 
                                AndroidTabLayoutActivity3.class);     
                        startActivity(new3Activity);
                        break;      

                   default:
                       Toast.makeText(SouthIndian.this, "Wrong Input", Toast.LENGTH_LONG).show();
                }

            } 
        });
        runOnUiThread(new Runnable() {
                public void run() {

                    ItemListBaseAdapter.refreshAdapter(item);
                    //ItemListBaseAdapter.notifyDataSetChanged();
                }
            });

    }

    private ArrayList<Recipedetails> GetSearchResults(){
        ArrayList<Recipedetails> results = new ArrayList<Recipedetails>();

        Recipedetails item_details = new Recipedetails();
        item_details.setName("Vegterian");
        item_details.setItemDescription("Recipes made by raw materials");
        item_details.setImageNumber(1);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Non-Vegterian");
        item_details.setItemDescription("Flesh of sweet animals");
        item_details.setImageNumber(2);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Pickels");
        item_details.setItemDescription("Touchable dish  by Homemade");
        item_details.setImageNumber(3);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Soups");
        item_details.setItemDescription("Startup for our food");
        item_details.setImageNumber(4);
        results.add(item_details);

        return results;
    }
} 
```

我的日志猫错误是

```
03-19 05:04:35.103: E/AndroidRuntime(1110): FATAL EXCEPTION: main
03-19 05:04:35.103: E/AndroidRuntime(1110): java.lang.IllegalStateException: The content of the adapter has changed 
but ListView did not receive a notification. Make sure the content of your adapter is not modified from a 
background thread, but only from the UI thread. [in ListView(2131165193, class android.widget.ListView) 
with Adapter(class com.example.recipestutors.ItemListBaseAdapter)]

03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.widget.ListView.layoutChildren(ListView.java:1544)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.widget.AbsListView.onTouchEvent(AbsListView.java:3403)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.View.dispatchTouchEvent(View.java:7239)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2168)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1903)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1953)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1405)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.app.Activity.dispatchTouchEvent(Activity.java:2410)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1901)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.View.dispatchPointerEvent(View.java:7419)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3220)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3165)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4292)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4271)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4363)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:179)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.os.MessageQueue.nativePollOnce(Native Method)
03-19 05:04:35.103: E/AndroidRuntime(1110):     at android.os.MessageQueue.next(MessageQueue.java:125) 
```

在我的代码中，如何以及在何处使用`adapter.notifyDataSetChanged()` **单击列表视图中的第二项，应用程序已停止并显示像我在 logcat 中提到的这样的错误**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T05:33:02.790

将此方法添加到您的适配器

```
public synchronized void refresAdapter(ArrayList<Recipedetails> items) {
    itemDetailsrrayList.clear();
    itemDetailsrrayList.addAll(items);
    notifyDataSetChanged();
} 
```

然后从您要刷新适配器的位置进行此调用

```
final Activity act = getActivity(); //only neccessary if you use fragments
if (act != null)
    act.runOnUiThread(new Runnable() {
        public void run() {
            yourAdapter.refreshAdapter(item);
        }
    }); 
```

这应该可以解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:33:31.877

没有`itemDetailsrrayList`as `static`。

# android - 从不同类调用活动时出现空指针异常

> ID：15491877
> 
> 赞同：0
> 
> 时间：2013-03-19T05:09:05.363
> 
> 标签：android

我有一个活动类 MainActivity2.java，它有一个方法 displaySongData(); 其中代码如下：

```
 if(searchsong.serverErrors.size() > 0) 
        Toast.makeText(this.context, searchsong.serverErrors.get(0) ,
    Toast.LENGTH_LONG).show();
  else if(searchsong.errorMsg != "" || searchsong.result == null) 
       {
        intent = new Intent(context,ErrorDisplayActivity.class);
        bundle.putString("error",searchsong.errorMsg == "" ? "No such songs could be found." : searchsong.errorMsg);
        intent.putExtras(bundle);
        context.startActivity(intent);
       } 
  else ////// 3 rd part of if else ***********
       {
        intent = new Intent(this,DisplaysongDetails.class);
        song result = searchsong.result;
        bundle.putString("tune", result.tune);
        bundle.putString("lyrics", result.lyrics);
        bundle.putString("meaning", result.meaning);
        intent.putExtras(bundle);
        this.startActivity(intent);
      } 
```

到目前为止一切正常，MainActivity2 正在调用其他活动。我将此代码移至另一个非活动类，并将 if 和 else 语句中的逻辑拆分为不同的方法。对于新类的构造函数，我从 MainActivity2 类中传递了 MainActivity2 实例和 searchSong 对象。但是，当执行包含 if else 的第三部分的方法时，我得到一个空指针异常。

```
03-18 04:21:44.939: E/AndroidRuntime(1163): FATAL EXCEPTION: main
03-18 04:21:44.939: E/AndroidRuntime(1163): java.lang.IllegalStateException: Could not execute method of the activity
03-18 04:21:44.939: E/AndroidRuntime(1163):     at android.view.View$1.onClick(View.java:3591)
03-18 04:21:44.939: E/AndroidRuntime(1163):     at android.view.View.performClick(View.java:4084)
03-18 04:21:44.939: E/AndroidRuntime(1163):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-18 04:21:44.939: E/AndroidRuntime(1163):     at dalvik.system.NativeStart.main(Native Method)
03-18 04:21:44.939: E/AndroidRuntime(1163): Caused by: java.lang.reflect.InvocationTargetException
03-18 04:21:44.939: E/AndroidRuntime(1163):     at java.lang.reflect.Method.invokeNative(Native Method)
03-18 04:21:44.939: E/AndroidRuntime(1163):     at java.lang.reflect.Method.invoke(Method.java:511)
03-18 04:21:44.939: E/AndroidRuntime(1163):     at android.view.View$1.onClick(View.java:3586)
03-18 04:21:44.939: E/AndroidRuntime(1163):     ... 11 more
03-18 04:21:44.939: E/AndroidRuntime(1163): Caused by: java.lang.NullPointerException
03-18 04:21:44.939: E/AndroidRuntime(1163):     at com.song.display.songDetails.navigateToDisplayActivity(songDetails.java:53)
03-18 04:21:44.939: E/AndroidRuntime(1163):     at com.song.display.songDetails.processErrorsOrDisplay(songDetails.java:29)
03-18 04:21:44.939: E/AndroidRuntime(1163):     at com.song.MainActivity2.displaysongData(MainActivity2.java:221)
03-18 04:21:44.939: E/AndroidRuntime(1163):     at com.song.MainActivity2.onClick(MainActivity2.java:170)
03-18 04:21:44.939: E/AndroidRuntime(1163):     ... 14 more 
```

songActivity.java 包 com.songs.display 的代码；

```
import com.songs.MainActivity2;
import com.songs.model.song;
import com.songs.search.Searchsong;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Toast;

public class songDetails implements IDisplayResults {

public Context context;
public Searchsong searchsong;
public Bundle bundle = null;
    public Intent intent = null;

public songDetails(Searchsong search, MainActivity2 context){
    this.searchsong = search;
    this.context = context;
}

public SongDetails(Searchsong search, MainActivity2 context){
    this.searchSong = search;
    this.context = context;
}

public void processErrorsOrDisplay()
{
  if(searchSong.serverErrors.size() > 0) processServerErrors();
  else if(searchsong.errorMsg != "" || searchsong.result == null) processResultErrors();
  else navigateToDisplayActivity();  /////////LINE 29
}

public void processServerErrors() {
     if(searchsong.serverErrors.size() > 0)
       {
        System.out.println("Number of errors is" + searchsong.serverErrors.size());
        Toast.makeText(this.context, searchsong.serverErrors.get(0) ,
        Toast.LENGTH_LONG).show();
       }        
}

public void processResultErrors() {
    System.out.println("the error message is NOTT empty here");
    intent = new Intent(context,ErrorDisplayActivity.class);
    bundle.putString("error",searchsong.errorMsg == "" ? "No such songs could be found." : searchsong.errorMsg);
    intent.putExtras(bundle);
    context.startActivity(intent);
}

public void navigateToDisplayActivity() {
     intent = new Intent(context,DisplaysongDetails.class);
     song result = searchsong.result;
     System.out.println("tune in method is " + result.tune);
     bundle.putString("tune", result.tune); //////////*********** LINE 53
     bundle.putString("lyrics", result.lyrics);
     bundle.putString("meaning", result.meaning);
     intent.putExtras(bundle);
     context.startActivity(intent);
}
} 
```

在 Android 中这样做是否违法？有没有办法让我可以在 MainActivity2 以外的单独类中拥有这个逻辑，因为它很混乱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T05:25:13.647

这里

```
public Bundle bundle = null; <<</// null 
```

您需要先初始化`bundle`实例，然后再将其用作：

```
public songDetails(Searchsong search, MainActivity2 context){
    this.searchsong = search;
    this.context = context;
    bundle=new Bundle();   //<<< here initialize bundle
 } 
```

# installation - NSIS 安装程序创建随机文件

> ID：15491878
> 
> 赞同：0
> 
> 时间：2013-03-19T05:09:09.347
> 
> 标签：installation, nsis

当我的 NSIS 安装程序运行时，它会在安装程序所在的同一目录中创建这些随机文件。

这些文件没有扩展名类型（不是 .txt 等），并且有一个随机数作为名称，例如 526310。 ![在此处输入图像描述](../Images/866a39cf48290259e8d3eebb22ef9206.png)

有没有其他人遇到过这个问题？我已经调试了我的安装程序（这相当复杂），并发现它发生在我写入文件时（不是复制/提取文件而是写入）。它仍然可能是我的安装程序代码在做它，但我已经调试了几个小时并且无法在我自己的代码中找到原因。

任何想法可能导致这种情况以及如何解决它？

# sql - sql 在带有连接的子查询中使用 select

> ID：15491881
> 
> 赞同：0
> 
> 时间：2013-03-19T05:09:31.617
> 
> 标签：sql, select, join

我正在尝试回答 SQLZoo.net 网站上的问题 #8。链接在这里。这应该很简单，但我认为我只是在想自己。链接在这里：

[http://sqlzoo.net/wiki/SELECT_from_Nobel_Tutorial](http://sqlzoo.net/wiki/SELECT_from_Nobel_Tutorial)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:19:56.123

子查询并不是真正需要的，而是一个简单的自联接。通过使用 将表格与自身连接`LEFT JOIN`，您可以获得所需的结果，但在表格连接期间，您需要在`ON`子句中过滤化学主题的那些年份。

```
SELECT  DISTINCT a.yr
FROM    nobel a
        LEFT JOIN nobel b
            ON a.yr = b.yr AND b.subject = 'Chemistry'
WHERE   b.yr IS NULL AND
        a.subject = 'Physics' 
```

[单击此处获取屏幕截图](http://i.stack.imgur.com/F53ND.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:37:57.030

```
select distinct yr 
from nobel 
where subject='Physics' 
    and yr not in ( select yr from nobel where subject='Chemistry') 
```

# java - 如何解密文件并将其添加到字符串列表中

> ID：15491884
> 
> 赞同：0
> 
> 时间：2013-03-19T05:09:43.550
> 
> 标签：java

在我 out.write(buffer, 0, rumRead) 的行中，如何将其添加到定义的列表而不是写入文件？我尝试将其添加到对象列表中，但这不起作用。这是我的解密方法：

```
public static void decrypt(String file) {
    try {
        File output = new File(file.replace(encryptedFileType, initialFileType));
        if (!(output.exists())) {
            output.createNewFile();
        }
        InputStream in = new FileInputStream(file.replace(initialFileType, encryptedFileType));
        OutputStream out = new FileOutputStream(output);
        in = new CipherInputStream(in, dcipher);
        int numRead = 0;
        while ((numRead = in.read(buffer)) >= 0) {
            out.write(buffer, 0, numRead);
        }
        out.close();
        new File(file.replace(initialFileType, encryptedFileType)).delete();
        } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:15:14.197

假设您想将文件中的内容作为 String 读取并将其添加到 String 列表中，您可以先将刚刚读取的缓冲区解析为 String 并添加它。

```
List<String> strList = new LinkedList<String>();
strList.add(new String(buffer, 0, numRead)); 
```

请注意，此代码从文件中读取固定长度作为字符串（不由换行符分隔）。固定长度由缓冲区大小决定。还要考虑 LinkedList 数据结构是否适合您

您可以使用 BufferedReader 从文件中读取换行符分隔的数据：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream("file.txt")));
List<String> strList = new LinkedList<String>();
String line = reader.readLine(); // will return null if reached end of stream
while(line != null) {
   strList.add(line); // add into string list
   line = reader.readLine(); // read next line
}
reader.close(); 
```

# ruby - 什么是 ruby 中的类变量

> ID：15491885
> 
> 赞同：1
> 
> 时间：2013-03-19T05:09:46.187
> 
> 标签：ruby

我正在阅读 Programming Ruby 这本书，但无法理解类变量 @@var 是什么。谁能给我一些解释？这本书什么也没说，只是提到了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T05:15:44.470

类变量类似于实例变量 ( `@some_var`)，但它的值对于类和类的任何实例都是全局的。

一个例子

```
class Test
  @@test_var = 0
  def show_test
    puts @@test_var
    @@test_var += 1
  end
end

a = Test.new
b = Test.new

a.show_test # prints 0
b.show_test # prints 1 
```

# django - Ajax、Django、Jquery 模型表单

> ID：15491887
> 
> 赞同：0
> 
> 时间：2013-03-19T05:10:18.710
> 
> 标签：django, jquery, django-forms, validation, modelform

构建了一个成功的工作 ModelForm 及其功能齐全。

我的下一步是在其中添加 Ajax，而且效果也很好。我使用的 Jquery 是 1.3.2 版本，虽然很旧，但可以正常工作。

当我尝试添加[引导程序 2 DATE 字段](http://www.eyecon.ro/bootstrap-datepicker/)时出现了问题。

使用我添加到表单中的 CHECKIN 和 CHECKOUT 值并且它有效。

它需要更高版本的 jquery，所以我使用了最近的 1.9.1。

但是当我使用它时，我的表单正在工作，除了我提交表单时出现的 1 个小问题

并且没有填写必填字段，它会向我显示这些字段，但提交按钮是

禁用。当我使用 jquery 1.3.2 时，除了 Bootstrap 的 2 个字段外，所有的工作都 100%

需要更高 jquery 版本的 DATEPICKER。

表单中的输入字段：出发和返回是日期选择器字段

我没有包含与 Bootsrap 站点相同的 Bootstrap 脚本。

当我使用：

```
<script src="/media/js/jquery/1.9.1.jquery.min.js" type="text/javascript"></script> 
```

出发和返回是日期选择器字段正在工作，但在提交后为空

其他字段 - 它会显示哪些字段是必填的，但提交按钮被禁用。

如果我使用：

```
<script src="/media/js/jquery/1.3.2.jquery.min.js" type="text/javascript"></script> 
```

表单正在使用 ajax 100% 但我不能使用出发和返回是日期选择器字段

（这让我可以选择日期 - 我必须手动输入）。

作为参考，我使用[了本教程](https://pype.its.utexas.edu/docs/tutorial/unit6.html)。

查看类别 ModelForm Ajax

**我的问题**是我可以实现此表单以使用日期为 1.9.1 Jquery 版本

我可以从日历中选择的字段。

在底部我包括截图。

这是代码：

模型.PY

```
TRIP_TYPES = (
('one way', 'One Way'),
('round trip', 'Round Trip'),
('multi-leg', 'Multi-Leg'),
)

class Request_Quote(models.Model):
    trip_type = models.CharField(max_length=10, choices=TRIP_TYPES, default='one way')
    company_name = models.CharField(max_length=200)
    individual_name = models.CharField(max_length=200)
    phone = models.CharField(max_length=200)
    email = models.CharField(max_length=200)
    from_country = models.CharField(max_length=200)
    to_country = models.CharField(max_length=200)
    from_city = models.CharField(max_length=200)
    to_city = models.CharField(max_length=200)
    departure_date = models.CharField(max_length=200)
    return_date = models.CharField(max_length=200)
    number_of_passengers = models.CharField(max_length=200) 
```

意见.PY

```
 def quote(request):
    if request.method == "POST":
        form = Request_QuoteForm(request.POST)

        ## Handle AJAX  ##
        if request.is_ajax():
            if form.is_valid():
                form.save()
                # Get a list of Categories to return
                quotes = Request_Quote.objects.all().order_by('individual_name')
                # Create a dictionary for our response data
                data = {
                    'error': False,
                    'message': 'Request Quote Added Successfully',
                    # Pass a list of the 'name' attribute from each Category.
                    # Django model instances are not serializable
                    'quotes': [q.individual_name for q in quotes],
                }
            else:
                # Form was not valid, get the errors from the form and
                # create a dictionary for our error response.
                data = {
                    'error': True,
                    'message': "Please try again!",
                    'trip_type_error': str(form.errors.get('trip_type', '')),
                    'company_name_error': str(form.errors.get('company_name', '')),
                    'individual_name_error': str(form.errors.get('individual_name', '')),
                    'phone_error': str(form.errors.get('phone', '')),
                    'email_error': str(form.errors.get('email', '')),
                    'from_country_error': str(form.errors.get('from_country', '')),
                    'to_country_error': str(form.errors.get('to_country', '')),
                    'from_city_error': str(form.errors.get('from_city', '')),
                    'to_city_error': str(form.errors.get('to_city', '')),
                    'departure_date_error': str(form.errors.get('departure_date', '')),
                    'return_date_error': str(form.errors.get('return_date', '')),
                    'number_of_passengers_error': str(form.errors.get('number_of_passengers', '')),
                }
            # encode the data as a json object and return it
            return http.HttpResponse(json.dumps(data))

        if form.is_valid():
            form.save()
            return http.HttpResponseRedirect('/request-quote/')
    else:
        form = Request_QuoteForm()
    quotes = Request_Quote.objects.all().order_by('individual_name')
    return render_to_response('quote.html', {'title': 'Request Quote', 'form': form, 'quotes': quotes}, context_instance=RequestContext(request)) 
```

模板：

```
<script type="text/javascript">
    // prepare the form when the DOM is ready
    $(document).ready(function() {
        $("#add_cat").ajaxStart(function() {
            // Remove any errors/messages and fade the form.
            $(".form_row").removeClass('errors');
            $(".form_row_errors").html('');
            $("#add_cat").fadeTo('slow', 0.33);
            $("#add_cat_btn").attr('disabled', 'disabled');
            $("#message").addClass('hide');
        });

        // Submit the form with ajax.
        $("#add_cat").submit(function(){
            $.post(
                // Grab the action url from the form.
                "#add_cat.getAttribute('action')",

                // Serialize the form data to send.
                $("#add_cat").serialize(),

                // Callback function to handle the response from view.
                function(resp, testStatus) {
                    if (resp.error) {
                        // check for field errors
                        if (resp.trip_type_error != '') {
                            $("#trip_type_row").addClass('errors');
                            $("#trip_type_errors").html(resp.trip_type_error);
                        }
                        if (resp.company_name_error != '') {
                            $("#company_name_row").addClass('errors');
                            $("#company_name_errors").html(resp.company_name_error);
                        }
                        if (resp.individual_name_error != '') {
                            $("#individual_name_row").addClass('errors');
                            $("#individual_name_errors").html(resp.individual_name_error);
                        }
                        if (resp.phone_error != '') {
                            $("#phone_row").addClass('errors');
                            $("#phone_errors").html(resp.phone_error);
                        }
                        if (resp.email_error != '') {
                            $("#email_row").addClass('errors');
                            $("#email_errors").html(resp.email_error);
                        }
                        if (resp.from_country_error != '') {
                            $("#from_country_row").addClass('errors');
                            $("#from_country_errors").html(resp.from_country_error);
                        }
                        if (resp.to_country_error != '') {
                            $("#to_country_row").addClass('errors');
                            $("#to_country_errors").html(resp.to_country_error);
                        }
                        if (resp.from_city_error != '') {
                            $("#from_city_row").addClass('errors');
                            $("#from_city_errors").html(resp.from_city_error);
                        }
                        if (resp.to_city_error != '') {
                            $("#to_city_row").addClass('errors');
                            $("#to_city_errors").html(resp.to_city_error);
                        }
                        if (resp.departure_date_error != '') {
                            $("#departure_date_row").addClass('errors');
                            $("#departure_date_errors").html(resp.departure_date_error);
                        }
                        if (resp.return_date_error != '') {
                            $("#return_date_row").addClass('errors');
                            $("#return_date_errors").html(resp.return_date_error);
                        }
                        if (resp.number_of_passengers_error != '') {
                            $("#number_of_passengers_row").addClass('errors');
                            $("#number_of_passengers_errors").html(resp.number_of_passengers_error);
                        }

                         $("#add_cat").fadeTo('slow', 1);
                         $("#add_cat_btn").attr('disabled', false);

                    } else {
                        // No errors. Rewrite the category list.
                        $("#categories").fadeTo('fast', 0);
                        var text = new String();
                        for(i=0; i<resp.quotes.length ;i++){
                            var m = resp.quotes[i]
                            text += "<li>" + m + "</li>"
                        }
                        $("#categories").html(text);
                        $("#categories").fadeTo('slow', 1);
                        $("#id_trip_type").attr('value', '');
                        $("#id_company_name").attr('value', '');
                        $("#id_individual_name").attr('value', '');
                        $("#id_phone").attr('value', '');
                        $("#id_email").attr('value', '');
                        $("#id_from_country").attr('value', '');
                        $("#id_to_country").attr('value', '');
                        $("#id_from_city").attr('value', '');
                        $("#id_to_city").attr('value', '');
                        $("#id_departure_date").attr('value', '');
                        $("#id_return_date").attr('value', '');
                        $("#id_number_of_passengers").attr('value', '');
                    }
                    // Always show the message and re-enable the form.
                    $("#message").html(resp.message);
                    $("#message").removeClass('hide');
                    $("#add_cat").fadeTo('slow', 1);
                    $("#add_cat_btn").attr('disabled', '');

            // Set the Return data type to "json".
            }, "json");
            return false;
        });

    });
    </script>

<div id="content" class="span9" style="">

                            <h1>Request Quote</h1>
                               <div id='message'></div>
                               <form id='add_cat' method='post' action='.'><input type='hidden' name='csrfmiddlewaretoken' value='KblPqgczzMK7skak162xe4aOL6bLot2A' />

                                       <div class='form_row' id='trip_type_row'>

                                            <div class="span2">

                                                  <label for="id_trip_type">Trip type</label>

                                           </div>                               

                                           <div class="span4">

                                                <select id="id_trip_type" name="trip_type">
<option value="one way" selected="selected">One Way</option>
<option value="round trip">Round Trip</option>
<option value="multi-leg">Multi-Leg</option>
</select>

                                           </div>

                                            <div class="span6">

                                                 <p id='trip_type_errors' class="form_row_errors"></p>

                                           </div>

                                       </div>

                                       <div class='form_row' id='company_name_row'>

                                           <div class="span2">

                                               <label for="id_company_name">Company name</label>

                                           </div>                               

                                           <div class="span4">

                                                <input id="id_company_name" maxlength="200" name="company_name" type="text" />

                                           </div>

                                           <div class="span6">

                                                <p id='company_name_errors' class="form_row_errors" style="color: red;"></p>

                                           </div>

                                       </div>

                                       <div class='form_row' id='individual_name_row'>

                                            <div class="span2">

                                               <label for="id_individual_name">Individual name</label>

                                            </div>

                                            <div class="span4">

                                                <input id="id_individual_name" maxlength="200" name="individual_name" type="text" />

                                            </div>

                                            <div class="span6">

                                                <p id='individual_name_errors' class="form_row_errors"></p>

                                           </div>

                                       </div>

                                       <div class='form_row' id='phone_row'>

                                            <div class="span2">

                                               <label for="id_phone">Phone</label>

                                            </div>

                                            <div class="span4">

                                               <input id="id_phone" maxlength="200" name="phone" type="text" />

                                            </div>

                                            <div class="span6">

                                                <p id='phone_errors' class="form_row_errors"></p>

                                           </div>

                                       </div>

                                       <div class='form_row' id='email_row'>

                                            <div class="span2">

                                               <label for="id_email">Email</label>

                                            </div>

                                            <div class="span4">

                                               <input id="id_email" maxlength="200" name="email" type="text" />

                                            </div>

                                            <div class="span6">

                                                <p id='email_errors' class="form_row_errors"></p>

                                           </div>                                   

                                       </div>

                                       <div class='form_row' id='from_country_row'>

                                            <div class="span2">

                                               <label for="id_from_country">From country</label>

                                            </div>

                                            <div class="span4">

                                               <input id="id_from_country" maxlength="200" name="from_country" type="text" />

                                            </div>

                                            <div class="span6">

                                                <p id='from_country_errors' class="form_row_errors"></p>

                                           </div>

                                       </div>

                                       <div class='form_row' id='to_country_row'>

                                            <div class="span2">

                                               <label for="id_to_country">To country</label>

                                            </div>

                                            <div class="span4">

                                               <input id="id_to_country" maxlength="200" name="to_country" type="text" />

                                            </div>

                                            <div class="span6">

                                                 <p id='to_country_errors' class="form_row_errors"></p>

                                           </div>

                                       </div>

                                        <div class='form_row' id='from_city_row'>

                                            <div class="span2">

                                               <label for="id_from_city">From city</label>

                                            </div>

                                            <div class="span4">

                                               <input id="id_from_city" maxlength="200" name="from_city" type="text" />

                                            </div>

                                            <div class="span6">

                                                <p id='from_city_errors' class="form_row_errors"></p>

                                           </div>

                                       </div>

                                       <div class='form_row' id='to_city_row'>

                                            <div class="span2">

                                               <label for="id_to_city">To city</label>

                                            </div>

                                            <div class="span4">

                                               <input id="id_to_city" maxlength="200" name="to_city" type="text" />

                                            </div>

                                            <div class="span6">

                                                <p id='to_city_errors' class="form_row_errors"></p>

                                           </div>

                                       </div>

                                       <div class='form_row' id='departure_date_row'>

                                            <div class="span2">

                                               <label for="id_departure_date">Departure date</label>

                                            </div>

                                            <div class="span4">

                                               <input id="id_departure_date" maxlength="200" name="departure_date" type="text" />

                                            </div>

                                            <div class="span6">

                                                <p id='departure_date_errors' class="form_row_errors"></p>

                                           </div>

                                       </div>

                                       <div class='form_row' id='return_date_row'>

                                            <div class="span2">

                                               <label for="id_return_date">Return date</label>

                                            </div>

                                            <div class="span4">

                                               <input id="id_return_date" maxlength="200" name="return_date" type="text" />

                                            </div>

                                            <div class="span6">

                                                <p id='return_date_errors' class="form_row_errors"></p>

                                           </div>

                                       </div>

                                       <div class='form_row' id='number_of_passengers_row'>

                                            <div class="span2">

                                               <label for="id_number_of_passengers">Number of passengers</label>

                                            </div>

                                            <div class="span4">

                                               <input id="id_number_of_passengers" maxlength="200" name="number_of_passengers" type="text" />

                                            </div>

                                            <div class="span6">

                                                <p id='number_of_passengers_errors' class="form_row_errors"></p>

                                           </div>

                                       </div>

                                   <input id="add_cat_btn" type='submit' value="save">
                               </form>

                    </div><!-- End content --> 
```

**截图：**

这些是在提交表单提交按钮后没有功能但日期选择器的图像

由于使用了 Jquery 1.9.1，因此字段正在工作：屏幕 1： ![图像1](../Images/3ade8fdbab965385e339139b92bb9d6d.png)

屏幕 2：

![图2](../Images/d79fa2ac6468ec56b5c05d55c18d1209.png)

这是一张没有功能日期选择器的图像，因为使用了 Jquery 1.3.2 并提交

提交后按钮启用：

![在此处输入图像描述](../Images/3c9ca986e7c86874e2b3d3f0fd165bfd.png)

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:43:54.437

我设法解决了这个问题，问题在于使用不同变量的最新 jquery。用答案更新了上面的代码。

这是代码：

模板：

```
<script type="text/javascript">
    // prepare the form when the DOM is ready
    $(document).ready(function() {
        $("#add_cat").ajaxStart(function() {
            // Remove any errors/messages and fade the form.
            $(".form_row").removeClass("errors");
            $(".form_row_errors").html('');
            $("#add_cat").fadeTo('slow', 0.33);
            $("#add_cat_btn").attr("disabled", "disabled");
            $("#message").addClass('hide');
        });

        // Submit the form with ajax.
        $("#add_cat").submit(function(){
            $.post(
                // Grab the action url from the form.
                "#add_cat.getAttribute('action')",

                // Serialize the form data to send.
                $("#add_cat").serialize(),

                // Callback function to handle the response from view.
                function(resp, testStatus) {
                    $(".form_row").removeClass("errors");

                    $("#trip_type_errors").html("");
                    $("#company_name_errors").html("");
                    $("#individual_name_errors").html("");
                    $("#phone_errors").html("");
                    $("#email_errors").html("");
                    $("#from_country_errors").html("");
                    $("#to_country_errors").html("");
                    $("#from_city_errors").html("");
                    $("#to_city_errors").html("");
                    $("#departure_date_errors").html("");
                    $("#return_date_errors").html("");
                    $("#number_of_passengers_errors").html("");

                    if (resp.error) {
                        // check for field errors
                        if (resp.trip_type_error != '') {
                            $("#trip_type_row").addClass('errors');
                            $("#trip_type_errors").html(resp.trip_type_error);
                        }
                        if (resp.company_name_error != '') {
                            $("#company_name_row").addClass('errors');
                            $("#company_name_errors").html(resp.company_name_error);
                        }
                        if (resp.individual_name_error != '') {
                            $("#individual_name_row").addClass('errors');
                            $("#individual_name_errors").html(resp.individual_name_error);
                        }
                        if (resp.phone_error != '') {
                            $("#phone_row").addClass('errors');
                            $("#phone_errors").html(resp.phone_error);
                        }
                        if (resp.email_error != '') {
                            $("#email_row").addClass('errors');
                            $("#email_errors").html(resp.email_error);
                        }
                        if (resp.from_country_error != '') {
                            $("#from_country_row").addClass('errors');
                            $("#from_country_errors").html(resp.from_country_error);
                        }
                        if (resp.to_country_error != '') {
                            $("#to_country_row").addClass('errors');
                            $("#to_country_errors").html(resp.to_country_error);
                        }
                        if (resp.from_city_error != '') {
                            $("#from_city_row").addClass('errors');
                            $("#from_city_errors").html(resp.from_city_error);
                        }
                        if (resp.to_city_error != '') {
                            $("#to_city_row").addClass('errors');
                            $("#to_city_errors").html(resp.to_city_error);
                        }
                        if (resp.departure_date_error != '') {
                            $("#departure_date_row").addClass('errors');
                            $("#departure_date_errors").html(resp.departure_date_error);
                        }
                        if (resp.return_date_error != '') {
                            $("#return_date_row").addClass('errors');
                            $("#return_date_errors").html(resp.return_date_error);
                        }
                        if (resp.number_of_passengers_error != '') {
                            $("#number_of_passengers_row").addClass('errors');
                            $("#number_of_passengers_errors").html(resp.number_of_passengers_error);
                        }
                    } else {
                        // No errors. Rewrite the category list.
                        $("#categories").fadeTo('fast', 0);
                        var text = new String();
                        for(i=0; i<resp.quotes.length ;i++){
                            var m = resp.quotes[i]
                            text += "<li>" + m + "</li>"
                        }
                        $("#categories").html(text);
                        $("#categories").fadeTo('slow', 1);
                        $("#id_trip_type").val("");
                        $("#id_company_name").val("");
                        $("#id_individual_name").val("");
                        $("#id_phone").val("");
                        $("#id_email").val("");
                        $("#id_from_country").val("");
                        $("#id_to_country").val("");
                        $("#id_from_city").val("");
                        $("#id_to_city").val("");
                        $("#id_departure_date").val("");
                        $("#id_return_date").val("");
                        $("#id_number_of_passengers").val("");
                    }
                    // Always show the message and re-enable the form.
                    $("#message").html(resp.message);
                    $("#message").removeClass('hide');
                    $("#add_cat").fadeTo('slow', 1);
                    $("#add_cat_btn").removeAttr("disabled");//attr('disabled', '');

            // Set the Return data type to "json".
            }, "json");
            return false;
        });

    });
    </script> 
```

# wordpress - wordpress 复制自定义帖子类型

> ID：15491888
> 
> 赞同：0
> 
> 时间：2013-03-19T05:10:22.097
> 
> 标签：wordpress

我制作了一个带有自定义字段的模板自定义类型。我需要做的是复制该帖子，以便可以将所有数据和自定义字段复制到新的自定义帖子类型。这样我就可以更改该项目的某些部分。可能是我正在寻找的一些插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:12:47.120

有一个用于复制帖子类型的插件，请查看插件[http://wordpress.org/extend/plugins/duplicate-post/](http://wordpress.org/extend/plugins/duplicate-post/)此处的链接。它在快速编辑所在的列表上提供了一个克隆选项

# c# - 如何在 C# 中将 Null 值分配给 Non-Nullable 类型变量？

> ID：15491889
> 
> 赞同：14
> 
> 时间：2013-03-19T05:10:40.663
> 
> 标签：c#

正如我所声明的，

双x;

现在我想分配

x=NULL 我该怎么做？我已经看到了它的一些其他答案，但无法理解它们，这就是为什么打开这个线程。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-19T05:13:14.523

您必须将其声明为可为空的类型：

```
double? x;
x = null; 
```

像 double 这样的不可为空的类型不能为空

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-19T05:16:10.240

您不能将 null 分配给不可为空的类型

您可以将`NaN`（不是数字）用于不可为空的`double`

```
double x;
x = double.NaN; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T05:16:53.937

可空类型是 System.Nullable(Of T) 结构的实例。可空类型可以表示其基础值类型的正确值范围，以及额外的空值。例如，一个 Nullable，发音为“Nullable of Int32”，可以分配从 -2147483648 到 2147483647 的任何值，也可以分配 null 值。可以为 Nullable 分配值 true false 或 null。当您处理包含可能未分配值的元素的数据库和其他数据类型时，将 null 分配给数字和布尔类型的能力特别有用。例如，数据库中的布尔字段可以存储值 true 或 false，或者它可能是未定义的。

> 双倍的？金额=空；
> 
> [http://msdn.microsoft.com/en-us/library/vstudio/2cf62fcy.aspx](http://msdn.microsoft.com/en-us/library/vstudio/2cf62fcy.aspx)

**可能的重复：**

**[为什么我不能在三元 if 语句中将可为空的 int 设置为空？](https://stackoverflow.com/questions/2766932/why-cant-i-set-a-nullable-int-to-null-in-a-ternary-if-statement)
[可空类型和三元运算符：为什么是`？10：null`禁止？](https://stackoverflow.com/questions/858080/nullable-types-and-the-ternary-operator-why-wont-this-work)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T05:13:26.340

简短的回答：你不能。

A`double`只能包含有效的双精度浮点值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T05:15:18.433

```
use 
double? x; 
```

并将空值分配给 x 变量，例如

```
x = null; 
```

# regex - 正则表达式验证日期格式 dd/mm/YYYY、dd-mm-YYYY、dd.mm.YYYY、dd mmm YYYY、dd-mmm-YYYY、dd/mmm/YYYY、dd.mmm.YYYY 支持闰年

> ID：15491894
> 
> 赞同：225
> 
> 时间：2013-03-19T05:11:08.383
> 
> 标签：regex

我需要`dd/mm/yyyy`使用正则表达式验证格式的日期字符串。

此正则表达式验证`dd/mm/yyyy`，但不验证无效日期，例如`31/02/4500`：

```
^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$ 
```

什么是有效的正则表达式来验证`dd/mm/yyyy`具有闰年支持的格式？

* * *

## 回答 #1

> 赞同：403
> 
> 时间：2013-03-19T16:19:55.663

您粘贴的正则表达式没有正确验证闰年，但[在同](https://stackoverflow.com/a/8768241/1537042)一篇文章中有一个。我将其修改为`dd/mm/yyyy`,`dd-mm-yyyy`或`dd.mm.yyyy`.

`^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[13-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$`

我在 Arun 在他的答案和[这里](http://regexr.com?346hf)提供的链接中对其进行了一些测试，它似乎有效。

编辑 2019 年 2 月 14 日：我删除了正则表达式中的逗号，它允许日期如下`29-0,-11`

* * *

## 回答 #2

> 赞同：280
> 
> 时间：2014-11-17T11:56:10.270

我已经根据我的要求扩展了@Ofir Luzon 为 dd-mmm-YYYY、dd/mmm/YYYY、dd.mmm.YYYY 格式提供的正则表达式。其他有相同要求的可以参考这个

```
^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]|(?:Jan|Mar|May|Jul|Aug|Oct|Dec)))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2]|(?:Jan|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec))\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)(?:0?2|(?:Feb))\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9]|(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep))|(?:1[0-2]|(?:Oct|Nov|Dec)))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$ 
```

并在这里测试了一些测试用例[https://regexr.com/39tr1](https://regexr.com/39tr1)。

为了更好地理解此正则表达式，请参阅此图像：

![在此处输入图像描述](../Images/160509b82c0e51c1389abb89991ba4e2.png)

## 编辑

为 yyyy/mm/dd、yyyy-mm-dd 或 yyyy.mm.dd 扩展一些测试用例[https://regex101.com/r/3TZfyU/1](https://regex101.com/r/3TZfyU/1)

```
^(?:(?:1[6-9]|[2-9]\d)?\d{2})(?:(?:(\/|-|\.)(?:0?[13578]|1[02])\1(?:31))|(?:(\/|-|\.)(?:0?[13-9]|1[0-2])\2(?:29|30)))$|
^(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00)))(\/|-|\.)0?2\3(?:29)$|
^(?:(?:1[6-9]|[2-9]\d)?\d{2})(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:0?[1-9]|1\d|2[0-8])$ 
```

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2013-12-25T13:47:43.650

注意：

> 您的正则表达式在“是 4 和 100 的倍数，但不是 400 的倍数”的年份中不起作用。通过该测试的年份不是闰年。例如：1900, 2100, 2200, 2300, 2500 等。换句话说，它将所有格式为 \d\d​​00 的年份放在同一类闰年中，这是不正确的。– 多学习

所以它只适用于 [1901 - 2099] (Whew)

日/月/年：

检查是否闰年。从 1900 年到 9999 年有效。仅 dd/MM/yyyy

```
(^(((0[1-9]|1[0-9]|2[0-8])[\/](0[1-9]|1[012]))|((29|30|31)[\/](0[13578]|1[02]))|((29|30)[\/](0[4,6,9]|11)))[\/](19|[2-9][0-9])\d\d$)|(^29[\/]02[\/](19|[2-9][0-9])(00|04|08|12|16|20|24|28|32|36|40|44|48|52|56|60|64|68|72|76|80|84|88|92|96)$) 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2013-03-19T05:16:58.920

试试这个。

```
^(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d$ 
```

[您可以在http://www.regular-expressions.info/javascriptexample.html](http://www.regular-expressions.info/javascriptexample.html)轻松测试正则表达式。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-03-28T17:08:48.227

对于那些看到这些并完全困惑的人，这里是我脚本的摘录。不幸的是，它所做的只是匹配日期时间输入中的有效数字，并且 2 月 31 日将被标记为有效，但正如许多人所说，正则表达式确实不是进行此测试的最佳工具。

匹配格式为 'yyyy-MM-dd hh:mm' 的日期（或者实际上以您喜欢的任何顺序）

```
var dateerrors = false;
var yearReg = '(201[4-9]|202[0-9])';            ///< Allows a number between 2014 and 2029
var monthReg = '(0[1-9]|1[0-2])';               ///< Allows a number between 00 and 12
var dayReg = '(0[1-9]|1[0-9]|2[0-9]|3[0-1])';   ///< Allows a number between 00 and 31
var hourReg = '([0-1][0-9]|2[0-3])';            ///< Allows a number between 00 and 24
var minReg = '([0-5][0-9])';                    ///< Allows a number between 00 and 59
var reg = new RegExp('^' + yearReg + '-' + monthReg + '-' + dayReg + ' ' + hourReg + ':' + minReg + '$', 'g');
$('input').filter(function () {return this.id.match(/myhtml_element_with_id_\d+_datetime/);}).each(function (e) {
    if (e > 0) {
        // Don't test the first input. This will use the default
        var val = $(this).val();
        if (val && !val.trim().match(reg)) {
            dateerrors = true;
            return false;
        }
    }
});
if (dateerrors) {
    alert('You must enter a validate date in the format "yyyy-mm-dd HH:MM", e.g. 2019-12-31 19:30');
    return false;
} 
```

上面的脚本从构建一个正则表达式对象开始。然后它会找到所有 id 与某个模式匹配的输入，然后遍历这些输入。我不测试我找到的第一个输入 ( `if (e > 0)`)。

一点解释：

```
var reg = new RegExp('^' + yearReg + '-' + monthReg + '-' + dayReg + ' ' + hourReg + ':' + minReg + '$', 'g'); 
```

`^`表示比赛开始，而`$`表示比赛结束。

```
return this.id.match(/myhtml_element_with_id_\d+_datetime/); 
```

`\d+`表示匹配单个或连续的整数序列，因此`myhtml_element_with_id_56_datetime`和`myhtml_element_with_id_2_datetime`将匹配，但`myhtml_element_with_id_5a_datetime`不会

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2015-07-23T19:38:31.570

我怀疑以下内容与预期的一样准确，但不知道用户的语言环境何时从儒略历切换到公历。

无论顺序如何，它都接受“-”、“/”或不接受任何东西作为年、月和日之间的分隔符。

MMddyyyy：

```
^(((0[13-9]|1[012])[-/]?(0[1-9]|[12][0-9]|30)|(0[13578]|1[02])[-/]?31|02[-/]?(0[1-9]|1[0-9]|2[0-8]))[-/]?[0-9]{4}|02[-/]?29[-/]?([0-9]{2}(([2468][048]|[02468][48])|[13579][26])|([13579][26]|[02468][048]|0[0-9]|1[0-6])00))$ 
```

ddMMyyyy：

```
^(((0[1-9]|[12][0-9]|30)[-/]?(0[13-9]|1[012])|31[-/]?(0[13578]|1[02])|(0[1-9]|1[0-9]|2[0-8])[-/]?02)[-/]?[0-9]{4}|29[-/]?02[-/]?([0-9]{2}(([2468][048]|[02468][48])|[13579][26])|([13579][26]|[02468][048]|0[0-9]|1[0-6])00))$ 
```

yyyyMMdd:

```
^([0-9]{4}[-/]?((0[13-9]|1[012])[-/]?(0[1-9]|[12][0-9]|30)|(0[13578]|1[02])[-/]?31|02[-/]?(0[1-9]|1[0-9]|2[0-8]))|([0-9]{2}(([2468][048]|[02468][48])|[13579][26])|([13579][26]|[02468][048]|0[0-9]|1[0-6])00)[-/]?02[-/]?29)$ 
```

除了顺序之外，这些都准确到儒略历（每四年闰年），直到 1700 年公历与儒略历不同。它有两个问题：

1.  它接受 0000 年，这在许多（但不是全部）标准中并不存在。请注意，ISO 8601 确实接受 0000 年（相当于 1 BCE）。
2.  它不会跳过公历开始使用时丢失的 10-13 天。不过，这因地区而异。例如，罗马天主教会跳过了 10 天，即 1582 年 10 月 5 日至 10 月 14 日，但希腊（最后一个转换）跳过了 1923 年 2 月 16 日至 28 日，即 13 天，必须考虑到 1700 年的闰年， 1800 年和 1900 年。

这已经针对从 0001 年到 9999 年的 Java 日历实现进行了测试，唯一的差异是上述 1582 年的 10 天。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-04-15T11:14:14.040

这是另一个版本的正则表达式，用于匹配以下任何日期格式并允许省略前导零：

**正则表达式：** `^[0-3]?[0-9].[0-3]?[0-9].(?:[0-9]{2})?[0-9]{2}$`

**火柴：**

`1/1/11 or 1.1.11 or 1-1-11 : true 01/01/11 or 01.01.11 or 01-01-11 : true 01/01/2011 or 01.01.2011 or 01-01-2011 : true 01/1/2011 or 01.1.2011 or 01-1-2011 : true 1/11/2011 or 1.11.2011 or 1-11-2011 : true 1/11/11 or 1.11.11 or 1-11-11 : true 11/1/11 or 11.1.11 or 11-1-11 : true`

![正则表达式可视化](../Images/5a757fc2afc35de5c0bbb82f0ded6e36.png)

[调试演示](https://www.debuggex.com/r/PMgoUzVGioUJs2Ef)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2014-09-13T13:38:24.323

在这里，我为`dd/mm/yyyy`where separator 可以是`-.,/`year range之一写了一个`0000-9999`。

它处理[闰年](http://en.wikipedia.org/wiki/Leap_year)，专为正则表达式风格而设计[，支持](http://www.regular-expressions.info/refcapture.html)前瞻、捕获组和反向引用。不适用于`d/m/yyyy`. 如果需要，添加更多分隔符`[-.,/]`

```
^(?=\d{2}([-.,\/])\d{2}\1\d{4}$)(?:0[1-9]|1\d|[2][0-8]|29(?!.02.(?!(?!(?:[02468][1-35-79]|[13579][0-13-57-9])00)\d{2}(?:[02468][048]|[13579][26])))|30(?!.02)|31(?=.(?:0[13578]|10|12))).(?:0[1-9]|1[012]).\d{4}$ 
```

[在 regex101 进行测试](http://regex101.com/r/pD4tK3/5)；作为 Java 字符串：

```
"^(?=\\d{2}([-.,\\/])\\d{2}\\1\\d{4}$)(?:0[1-9]|1\\d|[2][0-8]|29(?!.02.(?!(?!(?:[02468][1-35-79]|[13579][0-13-57-9])00)\\d{2}(?:[02468][048]|[13579][26])))|30(?!.02)|31(?=.(?:0[13578]|10|12))).(?:0[1-9]|1[012]).\\d{4}$" 
```

*解释：*

```
(?x) # modifier x: free spacing mode (for comments)
     # verify date dd/mm/yyyy; possible separators: -.,/
     # valid year range: 0000-9999

^    # start anchor

# precheck xx-xx-xxxx,... add new separators here
(?=\d{2}([-.,\/])\d{2}\1\d{4}$)

(?:  # day-check: non caturing group

  # days 01-28
  0[1-9]|1\d|[2][0-8]| 

  # february 29d check for leap year: all 4y / 00 years: only each 400
  # 0400,0800,1200,1600,2000,...
  29
  (?!.02\. # not if feb: if not ...
    (?!
      # 00 years: exclude !0 %400 years
      (?!(?:[02468][1-35-79]|[13579][0-13-57-9])00)

      # 00,04,08,12,... 
      \d{2}(?:[02468][048]|[13579][26])
    )
  )|

  # d30 negative lookahead: february cannot have 30 days
  30(?!.02)|

  # d31 positive lookahead: month up to 31 days
  31(?=.(?:0[13578]|10|12))

) # eof day-check

# month 01-12
.(?:0[1-9]|1[012])

# year 0000-9999
.\d{4}

$ # end anchor 
```

另请参阅[SO 正则表达式常见问题解答](https://stackoverflow.com/a/22944075/3110638)；请让我知道，如果它失败了。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2013-03-19T15:46:29.197

[在这里](http://forums.asp.net/t/1410702.aspx/1)找到这个 reg ex

```
^(((0[1-9]|[12]\d|3[01])\/(0[13578]|1[02])\/((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)\/(0[13456789]|1[012])\/((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])\/02\/((19|[2-9]\d)\d{2}))|(29\/02\/((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$ 
```

这会正确验证格式`mm/dd/yyyy`和有效日期（但不是`m/d/yyyy`）。

[一些测试](http://regexr.com?346fm)

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2014-05-09T12:17:02.923

```
"^(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.]((19|20)\\d\\d)$" 
```

将验证之间的任何日期`1900-2099`

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2014-06-02T11:21:04.970

以下表达式很好且易于操作：

```
((((0[13578]|1[02])(\/|-|.)(0[1-9]|1[0-9]|2[0-9]|3[01]))|((0[469]|11)(\/|-|.)(0[1-9]|1[0-9]|2[0-9]|3[0]))|((02)((\/|-|.)(0[1-9]|1[0-9]|2[0-8]))))(\/|-|.)(19([6-9][0-9])|20(0[0-9]|1[0-4])))|((02)(\/|-|.)(29)(\/|-|.)(19(6[048]|7[26]|8[048]|9[26])|20(0[048]|1[26]))) 
```

它根据 MM/dd/YYYY 格式进行验证，并允许从 1960 年到 2016 年的闰年支持。如果您需要扩展闰年支持，您只需操作表达式的这一部分：

```
(19(6[048]|7[26]|8[048]|9[26])|20(0[048]|1[26])) 
```

希望这对你有很大帮助

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2014-03-21T09:14:06.307

另一个答案根据月份 (mm) 和年份 (yyyy) 验证日 (dd)（即，也验证闰年的 2 月 29 日），并允许从 0001 到 9999 的年份（根据公历，在无效年份中为 0000日历）

```
^(?:(?:(?:0[1-9]|[12]\d|3[01])/(?:0[13578]|1[02])|(?:0[1-9]|[12]\d|30)/(?:0[469]|11)|(?:0[1-9]|1\d|2[0-8])/02)/(?!0000)\d{4}|(?:(?:0[1-9]|[12]\d)/02/(?:(?!0000)(?:[02468][048]|[13579][26])00|(?!..00)\d{2}(?:[02468][048]|[13579][26]))))$ 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-08-18T16:44:10.290

根据我的说法，最好的方法是通过指定格式并使用严格解析来使用 Moment.js isValid() 方法。

正如 moment.js 文档所说

> 从 2.3.0 版本开始，您可以为最后一个参数指定一个布尔值，以使 Moment 使用严格解析。严格解析要求格式和输入完全匹配，包括分隔符。

```
value = '2020-05-25';
format = 'YYYY-MM-DD';
moment(value, format, true).isValid() // true 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-07-24T14:42:26.303

我正在使用*只*接受 MM/DD/YYYY 格式的 API。我找不到任何其他能像[Ofir 的回答](https://stackoverflow.com/questions/15491894/regex-to-validate-date-format-dd-mm-yyyy#answer-15504877)一样闰年的帖子，所以我对其进行了调整，并在此处重新发布给任何可能需要它的人。

```
/^(?:(?:(?:0[13578]|1[02])(\/)31)\1|(?:(?:0[1,3-9]|1[0-2])(\/)(?:29|30)\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:02(\/)29\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:(?:0?[1-9])|(?:1[0-2]))(\/)(?:0[1-9]|1\d|2[0-8])\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/ 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-11-06T13:36:27.000

```
import re
expression = "Nov 05 20:10:09 2020"
reg_ex = r'((Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ([0-2][0-9]|(3)[0-1]) (([0-1][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])) (\d{4}))'
assert re.fullmatch(reg_ex, expression), True 
```

> 关于给定示例的解释

*   **十一月**=`A group of possible months i.e. (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)`
*   **05** =`A group of valid days i.e. ([0-2][0-9]|(3)[0-1])`
*   **20:10:09** =`A group for getting valid Hours : ([0-1][0-9]|2[0-3]), Minutes : ([0-5][0-9]) and Seconds : ([0-5][0-9])`
*   **2020** =`A group for getting year i.e (\d{4}))`

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-11-28T11:45:47.600

请关注表情

```
Regex regex = new Regex(@"(((0|1)[0-9]|2[0-9]|3[0-1])\/(0[1-9]|1[0-2])\/((19|20)\d\d))$"); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-02-01T20:10:10.017

## 进一步扩展了@AlokChaudhary 给出的正则表达式以支持：

**1\. `dd mmm YYYY`（除了`dd-mmm-YYYY`, `dd/mmm/YYYY`, `dd.mmm.YYYY`）。**

**2.所有大写字母格式的mmm（除了标题格式）**

`dd mmm YYYY`例如`30 Apr 2026`或`24 DEC 2028`很受欢迎。

*扩展正则表达式：*

```
(^(?:(?:(?:31(?:(?:([-.\/])(?:0?[13578]|1[02])\1)|(?:([-.\/ ])(?:Jan|JAN|Mar|MAR|May|MAY|Jul|JUL|Aug|AUG|Oct|OCT|Dec|DEC)\2)))|(?:(?:29|30)(?:(?:([-.\/])(?:0?[13-9]|1[0-2])\3)|(?:([-.\/ ])(?:Jan|JAN|Mar|MAR|Apr|APR|May|MAY|Jun|JUN|Jul|JUL|Aug|AUG|Sep|SEP|Oct|OCT|Nov|NOV|Dec|DEC)\4))))(?:(?:1[6-9]|[2-9]\d)?\d{2}))$|^(?:29(?:(?:([-.\/])(?:0?2)\5)|(?:([-.\/ ])(?:Feb|FEB)\6))(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00)))$|^(?:(?:0?[1-9]|1\d|2[0-8])(?:(?:([-.\/])(?:(?:0?[1-9]|(?:1[0-2])))\7)|(?:([-.\/ ])(?:Jan|JAN|Feb|FEB|Mar|MAR|May|MAY|Jul|JUL|Aug|AUG|Oct|OCT|Dec|DEC)\8))(?:(?:1[6-9]|[2-9]\d)?\d{2}))$) 
```

[正则表达式演示](https://regex101.com/r/IuYz9V/1)中包含的测试用例

特征（保留）：

*   闰年检查（2 月 29 日验证）包括逻辑：（可被 4 整除但不能被 100 整除）或（可被 400 整除）
*   支持年份 1600 ~ 9999
*   支持`dd/mm/YYYY`, `dd-mm-YYYY`, `dd.mm.YYYY`（但不支持`dd mm YYYY`）
*   支持`dd mmm YYYY`, `dd-mmm-YYYY`, `dd/mmm/YYYY`, `dd.mmm.YYYY`（`dd mmm YYYY`新增。mmm 可以是大写，例如 DEC 或标题格式，例如 Dec）

一些额外的小修饰如下：

1.  包括 Ofir Luzon 在 2019 年 2 月 14 日的修复，以删除正则表达式中的逗号，该逗号允许日期为 29-0,-11 [错误复制到 Alok Chaudhary 的正则表达式]

2.  替换`(\/|-|\.)`为`([-.\/])`以尽量减少反斜杠的使用。`\/`仍然用于支持某些正则表达式风格，例如 PCRE(PHP)，尽管其他一些正则表达式风格，例如 Python 可以简单地`/`在字符类 []中使用

3.  在整个正则表达式周围添加了一对括号 ()，以使其成为整个匹配字符串的捕获组。这对于使用 findAll 类型的函数来获取匹配项列表的人很有用（例如`re.findall`在 Python 中）。这使我们能够使用以下代码捕获多行字符串中的所有匹配字符串：

`re.findall`示例代码：

```
match_list = re.findall(regex, source_string)
for item in match_list:
    print(item[0]) 
```

扩展正则表达式图像： [![在此处输入图像描述](../Images/ce92e588cb583ae8252ec70292d9eab2.png)](https://i.stack.imgur.com/y6yHw.png)

应该归功于 Ofir Luzon 和 Alok Chaudhary，他们为我们所有人创造了如此出色的正则表达式！

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2022-02-05T11:30:06.077

```
year  = ((20[012]\d|19\d\d)|(1\d|2[0123])) 
month = ((0[0-9])|(1[012]))
day   = ((0[1-9])|([12][0-9])|(3[01]))

year-month-day = (((20[012]\d|19\d\d)|(1\d|2[0123]))-((0[0-9])|(1[012]))-((0[1-9])|([12][0-9])|(3[01])))
day-month-year = (((0[1-9])|([12][0-9])|(3[01]))-((0[0-9])|(1[012]))-((20[012]\d|19\d\d)|(1\d|2[0123])))
year/month/day = (((20[012]\d|19\d\d)|(1\d|2[0123]))\/((0[0-9])|(1[012]))\/((0[1-9])|([12][0-9])|(3[01])))
month/day/year = (((0[0-9])|(1[012]))\/((0[1-9])|([12][0-9])|(3[01]))\/((20[012]\d|19\d\d)|(1\d|2[0123])))
day/month/year = (((0[1-9])|([12][0-9])|(3[01]))\/((0[0-9])|(1[012]))\/((20[012]\d|19\d\d)|(1\d|2[0123])))
day.month.year = (((0[1-9])|([12][0-9])|(3[01]))\.((0[0-9])|(1[012]))\.((20[012]\d|19\d\d)|(1\d|2[0123])))
year.month.day = (((20[012]\d|19\d\d)|(1\d|2[0123]))\.((0[0-9])|(1[012]))\.((0[1-9])|([12][0-9])|(3[01])))

all = (((20[012]\d|19\d\d)|(1\d|2[0123]))-((0[0-9])|(1[012]))-((0[1-9])|([12][0-9])|(3[01])))|(((0[1-9])|([12][0-9])|(3[01]))-((0[0-9])|(1[012]))-((20[012]\d|19\d\d)|(1\d|2[0123])))|(((20[012]\d|19\d\d)|(1\d|2[0123]))\/((0[0-9])|(1[012]))\/((0[1-9])|([12][0-9])|(3[01])))|(((0[0-9])|(1[012]))\/((0[1-9])|([12][0-9])|(3[01]))\/((20[012]\d|19\d\d)|(1\d|2[0123])))|(((0[1-9])|([12][0-9])|(3[01]))\/((0[0-9])|(1[012]))\/((20[012]\d|19\d\d)|(1\d|2[0123])))|(((0[1-9])|([12][0-9])|(3[01]))\.((0[0-9])|(1[012]))\.((20[012]\d|19\d\d)|(1\d|2[0123])))|(((20[012]\d|19\d\d)|(1\d|2[0123]))\.((0[0-9])|(1[012]))\.((0[1-9])|([12][0-9])|(3[01]))) 
```

它的工作

```
yyyy-mm-dd
dd-mm-yyyy
yyyy/mm/dd
mm/dd/yyyy
dd/mm/yyyy
dd.mm.yyyy
yyyy.mm.dd

yy-mm-dd
dd-mm-yy
yyyy/mm/dd
mm/dd/yy
dd/mm/yy
dd.mm.yy
yy.mm.dd 
```

但不适用于 day =`d`或 month = `m`，例如 dmyyyy

所有示例 -[在此处输入链接描述](https://regex101.com/r/jfQFAb/1)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-06-28T13:58:58.097

```
((((0[13578]|1[02])\/(0[1-9]|1[0-9]|2[0-9]|3[01]))|((0[469]|11)\/(0[1-9]|1[0-9]|2[0-9]|3[0]))|((02)(\/(0[1-9]|1[0-9]|2[0-8]))))\/(19([6-9][0-9])|20([0-9][0-9])))|((02)\/(29)\/(19(6[048]|7[26]|8[048]|9[26])|20(0[048]|1[26]|2[048]))) 
```

将使用to验证`MM/DD/YYYY`格式`1960``2028`

如果您需要延长闰年支持，请添加

```
19(6[048]|7[26]|8[048]|9[26])|20(0[048]|1[26]|2[048]|3[26]|4[048]))) 
```

这也是工作

```
^((((0[13578]|1[02])[/](0[1-9]|1[0-9]|2[0-9]|3[01]))|((0[469]|11)[/](0[1-9]|1[0-9]|2[0-9]|3[0]))|((02)([/](0[1-9]|1[0-9]|2[0-8]))))[/](19([6-9][0-9])|20([0-9][0-9])))|((02)[/](29)[/](19(6[048]|7[26]|8[048]|9[26])|20(0[048]|1[26]|2[048]))) 
```

如果您可以更改格式`mm-dd-yyyy`而不是替换`[/]`，`[-]` 还可以在线查看[http://regexr.com/](http://regexr.com/)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-10-21T12:18:10.840

对于日期 MM/DD/YYYY，您可以使用

```
^((((0[13578])|([13578])|(1[02]))[\/](([1-9])|([0-2][0-9])|(3[01])))|(((0[469])|([469])|(11))[\/](([1-9])|([0-2][0-9])|(30)))|((2|02)[\/](([1-9])|([0-2][0-9]))))[\/]\d{4}$|^\d{4}$ 
```

它验证正确的日期和飞蛾。

请记住，您可以在以下位置检查您的正则表达式

[正则表达式101](https://regex101.com/)

我推荐:)

玩得开心！

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-11-02T18:17:38.550

```
^(((([13578]|0[13578]|1[02])[-](0[1-9]|[1-9]|1[0-9]|2[0-9]|3[01]))|(([469]|0[469]|11)[-]([1-9]|1[0-9]|2[0-9]|3[0]))|((2|02)([-](0[1-9]|1[0-9]|2[0-8]))))[-](19([6-9][0-9])|20([0-9][0-9])))|((02)[-](29)[-](19(6[048]|7[26]|8[048]|9[26])|20(0[048]|1[26]|2[048]))) 
```

此正则表达式将验证以下格式的日期：

12-30-2016 (mm-dd-yyyy) 或 12-3-2016 (mm-d-yyyy) 或 1-3-2016 (md-yyyy) 或 1-30-2016 (m-dd-yyyy)

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-02-27T12:20:26.953

我知道这是对这个问题的切题答案，但如果问题的**目的**是“我如何验证日期？”，那么为什么不尝试让编程语言完成所有艰苦的工作（如果你使用的语言是能够）？

例如在php中

```
$this_date_object = date_create($this_date);

if ($this_date_object == false )
    {

        // process the error

    } 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-07-26T13:48:12.870

仅供当天使用：

```
<input placeholder="day" maxlength="2" minlength="1" formControlName="birthDay" 
   name="birthDay"pattern="(0[1-9]|1[0-9]|2[0-9]|3[0-1])" >/ 
```

仅供当月使用：

```
 <input placeholder="month" maxlength="2" minlength="1" 
  formControlName="month" name="month" formControlName="month" name="month" pattern="(0[1- 
  9]|1[0-2])">/ 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-09-03T08:12:46.323

如果您正在寻找特定格式，这适用于“dd/MM/yyyy”和“dd/MMM/yyyy”日期格式，仅基于 Alok 答案。

```
function isValidDateFormatDDMMYYYY(inputDate) {
    var date_regex = /^(?:(?:31(\/)(?:0?[13578]|1[02]|(?:Jan|Mar|May|Jul|Aug|Oct|Dec)))\1|(?:(?:29|30)(\/)(?:0?[1,3-9]|1[0-2]|(?:Jan|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec))\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/)(?:0?2|(?:Feb))\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/)(?:(?:0?[1-9]|(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep))|(?:1[0-2]|(?:Oct|Nov|Dec)))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/;
    return date_regex.test(inputDate);
} 
```

很少有通过此代码工作的示例-

*   isValidDateFormatDDMMYYYY("15/01/1999") // 返回 True
*   isValidDateFormatDDMMYYYY("15/Jan/1999") // 返回 True
*   isValidDateFormatDDMMYYYY("15/1/1999") // 返回 True
*   isValidDateFormatDDMMYYYY("1/15/1999") // 返回 False

谢谢

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-09-14T14:31:57.480

我知道已经很久没有回答这个问题了，但也许这可以帮助其他人。问题是我也想检查年份，并让过去的几年也匹配。此正则表达式匹配日期格式为**"DD-MM-YYYY"**。所以这个函数将返回一个**正则表达式**：

```
const check_year = "01-01-2021"

console.log(get_regex())
console.log(check_year.match(get_regex()))

function get_regex(){
    let actual_year = `${new Date().getFullYear()}`
    let regex = new RegExp()
    let split_year = actual_year.split("")
    let year_regex = `${split_year[0]}[0-${split_year[1]}][0-${split_year[2]}][0-${split_year[3]}]$`
    let day_month_regex = "^([1-2][0-9]|3[0-1]|0?[1-9])[-]([1][0-2]|0?[1-9])[-]"

    regex.compile(day_month_regex+year_regex, "g")

    return regex
}
```

# mysql - 带有 COUNT 个意外结果的 MySQL JOIN 查询

> ID：15491899
> 
> 赞同：0
> 
> 时间：2013-03-19T05:11:28.660
> 
> 标签：mysql, left-join

不确定我的逻辑在这个问题上是否正确。我有一个表`Documents`，其中每个项目都有一个唯一的 ID 和文档的名称。然后我有另一个表`DocVotes`存储用户对文档的投票（每条记录一个投票）有一个字段`Vote`是`BOOL`（1 表示是，0 表示否）。

我正在尝试检查特定用户`MemberID`之前是否对文档进行过投票，显然您不能对自己的文档进行投票（通过排除检查`AuthorID`）

这是我正在尝试的查询

```
SELECT d.ID, d.Name, COUNT(dv.MemberID) 
FROM Documents AS d
LEFT JOIN DocVotes AS dv ON dv.ItemID=d.ID
    AND dv.MemberID=32
WHERE d.Status =  'Proposed'
    AND d.AuthorID<>32 
```

我认为它应该做什么：获取`ID`, `Name`, 并计算投票的数量`MemberID`（在这种情况下为 32）然后简单地检查计数，如果计数为 0 那么这意味着用户还没有投票，如果1 然后他们有（您只能投票一次）。

但是，我得到了 6 的计数，但该用户仅在此特定文档上投了 1 票。所以很明显，这比那个条目更重要......（我只得到 1 行回来）

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:17:46.720

只是要注意评论中谈到的内容：

尝试使用`GROUP BY d.ID`：

```
SELECT d.ID, d.Name, COUNT(dv.MemberID) 
FROM Documents AS d
LEFT JOIN DocVotes AS dv ON dv.ItemID=d.ID
    AND dv.MemberID=32
WHERE d.Status =  'Proposed'
    AND d.AuthorID<>32
GROUP BY
    d.ID 
```

# jmeter - 如何在 Linux 上执行 RMI

> ID：15491904
> 
> 赞同：-1
> 
> 时间：2013-03-19T05:11:41.040
> 
> 标签：jmeter, rmi

```
Error in NonGUIDriver org.apache.jmeter.engine.JMeterEngineException: Error in rconfigure() method java.rmi.ConnectException: Connection refused to host: 10.143.3.49; nested exception is:
java.net.ConnectException: Connection timed out
2013/03/19 06:15:28 ERROR - jmeter.engine.ClientJMeterEngine: Error in rconfigure() method java.rmi.ConnectException: Connection refused to host: 46.137.221.11; nested exception is: 
        java.net.ConnectException: Connection timed out 
2013/03/19 06:15:28 ERROR - jmeter.JMeter: Error in NonGUIDriver org.apache.jmeter.engine.JMeterEngineException: Error in rconfigure() method java.rmi.ConnectException: Connection refused to host: 46.137.221.11; nested exception is: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:30:52.227

```
java.net.ConnectException: Connection timed out 
```

这是一个网络连接问题，而不是 RMI 或 Java 问题。你能从那个客户端ping那个主机吗？

# forms - 在 Rails 3.2 中使用 jQuery 动态添加 form_tag

> ID：15491908
> 
> 赞同：0
> 
> 时间：2013-03-19T05:12:03.073
> 
> 标签：forms, ruby-on-rails-3.2

我的应用程序有一个用户仪表板，其中列出了用户创建的规则。每个规则都可以添加到“规则集”。对于每个规则，我想显示一个按钮，单击该按钮会加载一个允许用户将该规则添加到规则集中的表单。

我的视图中有以下代码来显示每个规则：

```
<% @rules.each do |rule| %>
  <div class="rule-wrapper">

    <div class="rule-content row">
      <div class="span6">
        <strong>Rule:</strong> <%= rule.description %>
      </div>
      <div class="span2">           
        <div class="add-to-ruleset-form">

        </div>
      </div>
    </div>

  ...... 
```

我的规则控制器的相关部分如下：

```
class RulesController < ApplicationController
  before_filter :authenticate_user!

  def add_rule_to_ruleset
    @ruleset = Ruleset.find(params[:ruleset_id])
    @rule = Rule.find(params[:rule_id])

    @ruleset.rule << @rule

  end

  .... 
```

最后，这是我的 dashboard.js.erb 文件的样子：

```
$('.add-to-ruleset').click(function(e){
  e.preventDefault();
  $('.add-to-ruleset-form').html('<%= escape_javascript(link_to render :partial =>   "add_to_ruleset_form", :locals => {:rule => rule}) %>')
}); 
```

我希望在单击按钮（“添加到规则集”）时呈现部分内容。我尝试在我的 js.erb 文件中使用“escape_javascript”帮助程序，但它没有传递“规则”变量 corrent。我也尝试过使用 jQuery 的 load()，但我不知道如何使用 jQuery 将“规则”实例变量传递给部分。还有其他方法吗？

# lua - 自定义字体在安卓设备上不起作用

> ID：15491914
> 
> 赞同：0
> 
> 时间：2013-03-19T05:12:38.540
> 
> 标签：lua, coronasdk

按照[此处](http://www.coronalabs.com/blog/2011/07/13/custom-fonts-corona/)的说明，我正在尝试在我的游戏中使用自定义字体。自定义字体在 iOS 设备上可以正常工作，但在我正在测试的 android 设备上不行。我确保在我的项目文件夹中包含字体文件（.ttf），并且我正在使用它来设置字体：

```
if(system.getInfo("platformName") == "Android") then
    label = display.newText("text", 100, 100, customfonthere, 38)
end 
```

但是，当我在设备上运行游戏时，自定义字体不起作用。有什么我可能在这里遗漏的吗？我还尝试了带和不带文件扩展名的字体名称。

更新：实际上，没关系。我猜我的字体文件以某种方式损坏了。我刚刚在项目文件夹中删除了它，并从我的一个备份文件中复制了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:04:09.777

对于在 Corona 中使用自定义字体时遇到问题的其他所有人，请尝试删除字体文件并从您获得字体文件的任何位置重新下载，或者如果您在某处有字体文件的备份，只需将其复制回您的项目文件夹即可。我的字体文件已损坏，因此当我将其删除并再次添加时，它可以正常工作。

按照[此处](http://www.coronalabs.com/blog/2011/07/13/custom-fonts-corona/)的说明进行操作。如果您的模拟器上没有显示字体，请不要像我一样惊慌。这只是意味着该字体未安装在您的工作站中，但请放心，它将在设备上运行。

然后就像在电晕中使用任何系统字体一样使用字体。您不必为 android 设备输入文件扩展名（ttf 或 otf）。至少我的情况是这样。

# java - 在 Java 中实现 Apple 推送通知

> ID：15491917
> 
> 赞同：0
> 
> 时间：2013-03-19T05:12:47.807
> 
> 标签：java, apple-push-notifications

我正在寻找使用 java 为 iphone 实现推送通知。我的搜索告诉我我有两个选择 javapns 和 java-apns。

有人可以建议我，我应该为我的项目使用哪个库。似乎 javapns 在积极开发中并不多，并且在 google groups 项目页面上有一些未修复的错误。

谢谢拉维

# html - Html5拖放到拉斐尔画布上在Firefox中不起作用

> ID：15491929
> 
> 赞同：0
> 
> 时间：2013-03-19T05:13:42.317
> 
> 标签：html, drag-and-drop, raphael

所以我尝试在 Raphael 中使用 HTML 5 的拖放功能。Chrome 会触发 ondragstart 事件，但 firefox 不会。尽管如此，根据所有报告，ondragstart 受 Firefox 支持。

这是html

```
<li><a href="#" id = "symbol1"><img src ="img/symbol1.png" draggable="true" ondragstart="symbolone(event)"></img></a> 
```

这是 jquery/js

```
function symbolone(event){
    console.log("symbolonecalleddog");
    insertSymbols(1); 
};
function insertSymbols(symboltype){
//symbol 1
var x = 0;
var y = 0;
/* canvas is the html div that stores my raphael paper*/
$("#canvas").mouseup(function(e){
    console.log("mouseup");
    var eleoffset=$("#canvas").offset();
    x = e.pageX - eleoffset.left;
    y = e.pageY - eleoffset.top;
    console.log("x : "+x+" y : "+y);
    var foo = drawSymbol(x,y, symboltype);
    $("#canvas").unbind('mouseup');
    symbolcreated(foo);
    setxy(x,y);
});
}; 
```

我可以在 chrome 控制台中看到所有的 console.log 结果。但不在 Firefox/Firebug 控制台中。

# java - 这个程序的运行时复杂度是多少？（尤其是 retainAll() 方法）

> ID：15491934
> 
> 赞同：3
> 
> 时间：2013-03-19T05:14:22.837
> 
> 标签：java, list, set

```
public static List<Integer> returnIntersection(List<Integer> a,List<Integer> b){

    List<Integer> l1=new ArrayList<Integer>(a);
    List<Integer> l2=new ArrayList<Integer>(b);
    l1.retainAll(l2);//find intersection in l2
    l1=removeDuplicates(l1);
    return l1;}

public static List<Integer> removeDuplicates(List<Integer> l) {

Set<Integer> se=new HashSet<Integer>(l);
l.clear();
l=new ArrayList<Integer>(se);
return l;} 
```

上面的代码是返回一个包含 2 个没有重复的列表交集的列表。我的问题是它的时间复杂度是多少？retainAll() 方法的时间复杂度是多少？将列表转换为集合时是否有任何耗时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:20:10.280

一个有趣的话题是衡量单个方法的复杂性。有几件事会导致复杂性。

在这里查看[如何衡量复杂性](https://www.leepoint.net/principles_and_practices/complexity/complexity_measurement.html)

这是一个很好的网站如何计算复杂度

# android - 带有硒的 ANDROID 网络驱动程序

> ID：15491935
> 
> 赞同：2
> 
> 时间：2013-03-19T05:14:23.780
> 
> 标签：android, selenium, webdriver

我正在运行 android sdk for web driver 中给出的示例测试项目。代码是：

```
package simple.app.test;

import android.test.ActivityInstrumentationTestCase2;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.android.AndroidWebDriver;

import simple.app.SimpleAppActivity;

public class SimpleGoogleTest extends ActivityInstrumentationTestCase2<SimpleAppActivity> {
    private WebDriver driver;
    private WebDriver googledriver;

    public SimpleGoogleTest() {
        super("simple.app", SimpleAppActivity.class);
    }

    @Override
    protected void setUp() throws Exception {
      driver = new AndroidWebDriver(getActivity());
    }

    @Override
    protected void tearDown() {
       driver.quit();
    }

    public void testGoogleWorks() throws Exception {
        driver.get("http://www.google.com");
        Thread.sleep(10000);
        WebElement searchBox = driver.findElement(By.name("q"));
        searchBox.sendKeys("Android Rocks!");
        searchBox.submit();
        String title = driver.getTitle();
        assertTrue("Got title: " + title, title.contains("Google"));
       assertTrue(driver.findElements(By.partialLinkText("Android")).size() > 1);
    }
} 
```

我收到以下问题：

1.  Android2.2-NoSuchMethorError
2.  Android2.3.1-进程崩溃。

请帮我解决这些问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T18:07:42.837

内哈，

首先，您是否阅读过 Selenium 项目中 Android 驱动程序的相关 wiki 页面？[http://code.google.com/p/selenium/wiki/AndroidDriver](http://code.google.com/p/selenium/wiki/AndroidDriver)

正如它所说，支持 Android 2.2 的 Android WebDriver 的最后一个版本是 APK 的 2.16 版，[http://code.google.com/p/selenium/downloads/detail ?name=android-server-2.16.apk](http://code.google.com/p/selenium/downloads/detail?name=android-server-2.16.apk)

如果您希望使用当前版本的 Android 驱动程序，我建议您尝试使用较新版本的 Android。您可能知道，创建新的模拟器很容易，也就是众所周知的新 AVD。AndroidDriver wiki 页面解释说，由于 2.3 模拟器中的错误，WebDriver 将无法在其中工作。但是它可以在运行 2.3（或更高版本）的真实设备上运行

接下来要检查的是***目标应用程序***的 AndroidManifest.xml 是否具有 Internet 权限。[*注意：我在两个 AndroidManifest.xml 文件中都有这个权限，一个用于虚拟目标应用程序和 TestProject 是安全的，但是在我的测试中，我发现似乎重要的是应用程序的一个。*]

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

AFAIK Android 示例的应用程序称为 SimpleApp。

另一个技巧是尝试捕获 WebDriver 尝试获取 google 主页后加载的 WebView 内容的 HTML。这是一种简单的方法，我在现有的 driver.get(...) 之后添加了调用

```
driver.get("http://www.google.com");
Log.i("WebDriverDemo", driver.getPageSource()); 
```

这很简单，因为对 Log 结果的调用对它可以写入日志的数量有限制，因此可能会截断大型 HTML 源。但是，日志中的信息可能足以让您识别问题。

如果您尝试在 2.2 模拟器中使用 2.16 的 Android-WebDriver 或在具有更高版本的 Android（例如 4.x）的模拟器中使用当前版本的 Android-WebDriver 后仍然卡住，也许您可​​以添加堆栈在这里追踪。

祝你好运

朱利安。

*PS：我对 Neha 之前的一个平行问题提供了类似的答案。我建议 Neha 更新该问题，并提供指向此较新版本的链接。*

# asp.net-mvc - 删除 Json 字符串中的双引号 - 用于函数调用

> ID：15491937
> 
> 赞同：1
> 
> 时间：2013-03-19T05:14:32.850
> 
> 标签：asp.net-mvc, json, jqgrid

我正在使用此示例[jqGrid 和动态列绑定动态加载 ColName 和 ColModel 的 JQGrid](https://stackoverflow.com/questions/2277962/jqgrid-and-dynamic-column-binding)

一切看起来都很好。我在 Formatter 的列之一中使用 Formatter

```
function UrlFmatter(cellvalue, options, rowObject) {
} 
```

当我在 .JS 中编写 Columns 时，它看起来像这样

```
colmodel :[{ name: 'somenam', formatter: UrlFmatter, width: 95, align: "center", index: 'somenam'}] 
```

现在动态加载它不起作用，因为我想没有调用该函数。

我以为`formatter: "UrlFmatter"`它是这样加载的，并使它成为一个字符串。我如何进行这个函数调用？

还是有更好的方法可以处理这些情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:52:32.130

它似乎与您的旧问题完全相同。正如我之前回答的那样（请参见[此处](https://stackoverflow.com/a/15412370/315935)），您应该替换`UrlFmatter`from的定义

```
function UrlFmatter(cellvalue, options, rowObject) {
    return "<a href='DetailResult?airportname=" + options.rowId + "' >" +
        cellvalue + "</a>";
} 
```

到

```
(function ($) {
    "use strict";
    $.extend($.fn.fmatter, {
        urlFmatter: function (cellValue, options) {
            return "<a href='DetailResult?airportname=" + options.rowId + "' >" +
                cellvalue + "</a>";
        }
    });
}(jQuery)); 
```

您应该在之后（或之后）*直接* 包含上述代码。之后你可以修改`jquery.jqGrid.min.js``jquery.jqGrid.src.js`

```
{ name: 'somenam', formatter: UrlFmatter, width: 95, align: "center", index: 'somenam'} 
```

到

```
{ name: 'somenam', formatter: "urlFmatter", width: 95, align: "center"} 
```

# c# - C#中的字符串提取混淆

> ID：15491940
> 
> 赞同：1
> 
> 时间：2013-03-19T05:14:56.940
> 
> 标签：c#, .net, winforms

我正在开发一个 Windows 应用程序。

在那，我正在从计算机上的任何路径上传一个文件。

从那我想只得到文件名。

我`string name = openFileDialog1.FileName;`为此使用了>>。

我正在获取具有完整路径的文件名。表示结果如下>>

```
"C:\\Documents and Settings\\Administrator\\Desktop\\15030000.md" 
```

15030000.md 是我的文件名。我只想从中提取前 4 个字符。即1503 [因为它表示日期和月份]。

为此，我尝试了`substring`功能。但后来意识到完整路径可以是任何东西。`1503`我不能使用子字符串函数来提取`"C:\\Documents and Settings\\Administrator\\Desktop\\15030000.md"`

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T05:17:08.373

使用[Path.GetFileNameWithoutExtension](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)获取文件名，稍后您可以使用[string.Substring](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)或[Enumerable.Take](http://msdn.microsoft.com/en-us/library/bb503062.aspx)获取前 4 个字符。

```
string fileName = Path.GetFileNameWithoutExtension(path);
string firstFourCharacters = fileName.Take(4);
//Or 
//Check if the fileName.Length >= 4
string firstFourCharacters = fileName.Substring(0,4); 
```

# java - 如何仅使用是/否选项调用 JOptionPane？

> ID：15491942
> 
> 赞同：2
> 
> 时间：2013-03-19T05:15:09.327
> 
> 标签：java, swing, joptionpane

是否可以调用一个确认对话框，它只有`YES`和`NO`选项（没有 CANCEL 选项）？

```
JOptionPane.showConfirmDialog(null, "Are you sure?") 
```

提供三个选项，但我只需要两个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T05:23:24.280

是的。有可能的。

```
int result = JOptionPane.showConfirmDialog(null, 
   "Are you sure you wish to exit application?",null, JOptionPane.YES_NO_OPTION);
if(result == JOptionPane.YES_OPTION) {
    System.exit(0);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T05:21:52.697

尝试使用[JOption.showConfirmDialog](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html#showConfirmDialog%28java.awt.Component,%20java.lang.Object,%20java.lang.String,%20int%29)方法的其他重载方法。那需要`optionType`。您可以传递`YES_NO_OPTION`、`YES_NO_CANCEL_OPTION`或`OK_CANCEL_OPTION`选项类型。

```
JOptionPane.showConfirmDialog(null, "Are you sure?", "Message",
        JOptionPane.YES_NO_OPTION); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T05:18:33.710

您可以[`showConfirmDialog`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JOptionPane.html#showConfirmDialog%28java.awt.Component,%20java.lang.Object,%20java.lang.String,%20int%29)在可以指定`optionType`.

### 例如

```
JOptionPane.showConfirmDialog(null, "Test", "Test1", JOptionPane.YES_NO_OPTION); 
```

来自文档：-

> 弹出一个对话框，其中选项的数量由 optionType 参数确定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T05:27:13.877

您可以使用： int answer = JOptionPane.showConfirmDialog(null, "Are you sure question?", "titleToYouMessageBox", JOptionPane.YES_NO_OPTION);

# c# - 如何在 asp.net 中访问 sap wsdl 服务？

> ID：15491952
> 
> 赞同：0
> 
> 时间：2013-03-19T05:15:46.483
> 
> 标签：c#, asp.net, wsdl, sap

客户端给定基于 sap 的 wsdl 服务。在 wsdl 中我不知道方法、请求参数和响应是什么。请告诉我如何在 asp.net 中调用 wsdl？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T05:24:36.297

按着这些次序：

1.  选择项目 > 添加服务参考
2.  粘贴 WSDL 文件
3.  点击前往

用法：

```
var serviceClient = new ServiceReferenceName.ClassClient();
serviceClient.Do(); 
```

您还需要使用服务器 URL 更新配置文件：

```
<client>
  <endpoint address="http://UrlFromYourCustomerHere"
            binding="basicHttpBinding"
            bindingConfiguration="xxx"
            contract="MyServiceReference.xxx"
            name="xxx/>
</client> 
```

调用方法的示例：

```
[WebMethod]
public static List<string> GetFileListOnWebServer()
{
   DirectoryInfo dInfo = new DirectoryInfo(HostingEnvironment.MapPath("~/UploadedFiles/"));
   FileInfo[] fInfo = dInfo.GetFiles("*.*", SearchOption.TopDirectoryOnly);

   List<string> listFilenames = new List<string>(fInfo.Length);

   for(int i = 0; i < fInfo.Length; i++)
   {
        listFilenames.Add(fInfo[i].Name);
   }

   return listFilenames;
} 
```

这将返回列表中的文件名，该列表将转到文件夹。

当您添加 Web 引用时，它会在您的项目中创建一个代理类，该类具有与您的 Web 服务相同或相似的方法/参数。

# scheme - 在这种情况下如何写“eval”和“apply”？

> ID：15491953
> 
> 赞同：-1
> 
> 时间：2013-03-19T05:15:56.117
> 
> 标签：scheme

写出函数`eval1`和`apply1`。

`eval1`使用一个关联列表（其中键是*Symbol*值是*Num*）和一个算术表达式，将变量名与值匹配。

`apply1`使用一个符号（'+ 或 '）、一个表达式列表和一个关联列表，并计算将符号指定的函数应用于列表中的表达式所产生的数字。

例子：

```
(check-expect (eval1 '((x 2) (y 3) (z 4)) '(+ x (* y 2))) 8)
(check-expect (apply1 '* '(a (+ 3 b)) '((a 2) (b 1))) 8) 
```

PS：`eval1`而且`apply1`应该是相互递归的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:01:26.263

像这样：

```
(define (eval1 env exp)
  (cond ((number? exp) exp)
        ((symbol? exp)
         (cond ((assq exp env) => cadr)
               (else 'unbound-variable)))
        ((list? exp)
         (let ((operator (car exp))
               (operands (cdr exp)))
           (apply1 operator operands env)))))

(define (apply1 operator operands env)
  (case operator
    ((+) (+ (eval1 env (list-ref operands 0))
            (eval1 env (list-ref operands 1))))
    ((*) (* (eval1 env (list-ref operands 0))
            (eval1 env (list-ref operands 1))))
    (else 'unknown-operator))) 
```

要认识到的重要一点是，如何评估表达式取决于表达式的性质。如果是数字/文字，则只返回数字/文字；如果是符号，则在环境中查找值；如果是列表，则将运算符应用于评估的参数。

# ios6 - NSDictionary 和 NSUserDefaults 作为数据存储？

> ID：15491955
> 
> 赞同：0
> 
> 时间：2013-03-19T05:16:01.620
> 
> 标签：ios6, nsarray, nsdictionary, nsuserdefaults, data-storage

**应用概述：**

用户可以执行 Internet 速度测试和其他类型的测试，并获得不同的结果。通常，测试的结果存储在 NSArrays 和 NSStrings 中。

**目标：**

我正在尝试创建一个历史系统，允许用户返回并查看过去的结果。

**问题：**

我很难弄清楚要使用哪种存储介质以及如何将它们组合在一起。

**有没有办法使用字符串或整数值来命名 NSUserDefaults？**例如，我有一个名为“hisName”的字符串，其值为“history1”，是否可以将 NSUserDefaults 命名为 *hisName 但将其恢复为值 history1？每次测试的想法是增加数字并创建新的历史默认值（history2、history 3 等）。

在这个应用程序的 Android 版本中，这是可能的。因此，该应用程序只是根据允许的最大历史数量动态创建“History-X”。当达到最大值时，第一个被覆盖。

**更新：**

我会更加努力地解释我的意思。

用户完成一个测试，我将所有需要的数据存储在一个名为 History1 的 NSUserDefaults/NSDictionary 文件中。

然后我将一个名为 HistoryCount 的整数的值增加到 2。现在，当用户执行另一个测试时，我想调用 NSUserDefaults/NSDictionary“History2”，其中 2 来自 Integer HistoryCount。我找不到用 NSString 等命名 NSUserDefaults/NSDictionary 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:22:39.513

使用此方法保存字典；

```
-(void)saveDefaults:(int)historyCount{
    NSDictionary *history1 = [NSDictionary dictionary]; //You already have this dictionary
    NSString *historyKey = [NSString stringWithFormat:@"history%d",historyCount];
    [[NSUserDefaults standardUserDefaults] setObject:history1 forKey:historyKey];
} 
```

所以你的代码可能看起来像这样；

```
self.historyCount =1;

[user runTest]; //first run 
[user saveDefaults:self.historyCount];
self.historyCount++;

[user runTest];
[user saveDefaults:self.historyCount];
self.historyCount++; 
```

等等..

如果您想要同一用户的多个历史字典对象，那么您可以将一组历史对象存储为一个数组（使用索引来访问历史对象），或者您可以使用带有键`@"history1"`和值的字典，即`history1`字典。您可以生成如上所示的新密钥。

但是，如果您有多个用户并且每个用户有许多历史对象，则可能很难跟踪。相反，您可以使用核心数据进行对象持久性/管理。

# c# - PLINQ 或 TPL 能否扼杀 .net 线程池和 IIS 请求处理队列？

> ID：15491957
> 
> 赞同：5
> 
> 时间：2013-03-19T05:16:06.643
> 
> 标签：c#, .net, multithreading, plinq

这是一个场景。由 IIS 托管的网关。一个请求可能需要向另一个服务发出多个独立的其他请求，每个请求可能需要几秒钟。自然地，我认为它是并行化的一个很好的候选者。但是，如果我应该这样做，我有一个内部斗争，如果我这样做，那么我应该使用什么样的并行度。我担心的是应用程序中的所有线程通常都由 .net 线程池管理，所以如果我最终分配了太多线程（甚至等待），我可能最终会窒息其他网关功能和 API 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T05:31:42.253

[PLINQ](http://msdn.microsoft.com/en-us/library/dd997399.aspx)对于不是您的情况的计算绑定操作很有用。对您来说有意义的是异步 I/O。

在 .NET 中进行异步 I/O 有多种方法：普通的旧[APM](http://www.codeproject.com/Articles/60097/The-NET-Asynchronous-I-O-Design-Pattern)、[TPL](https://stackoverflow.com/a/5073816/55209)、[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609.aspx)、[C# 5 async/await](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)、[F# async workflows](http://msdn.microsoft.com/en-us/library/dd233250.aspx)。后三种技术允许您以各种方式组合多个 I/O 操作并减少样板代码的数量。

异步 I/O 不是以任何方式分配新线程。它使用[I/O 完成端口](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365198%28v=vs.85%29.aspx)来避免等待回复时的线程阻塞。

**我应该强调这一点**：当您在已经并发的环境 (IIS) 中创建多个*长时间运行的请求时，使用异步 I/O 您**肯定*会获得更好的吞吐量和线程池利用率。

考虑[以下](https://stackoverflow.com/q/5009181/55209)代码：

```
Task.Factory.StartNew( () => Parallel.ForEach<Item>(items, item => DoSomething(item))); 
```

当它用于客户端程序时，它可以让你不阻塞 UI 线程，同时不费心在内部进行`DoSomething`异步 I/O。

当您已经拥有并发服务并`DoSomething`同步执行 I/O 时，您最终会在繁忙的池中使用额外的*阻塞线程*。如果您对每个传入请求*并行*执行 3 个传出请求，则 10 个同时传入的请求将阻塞池中的 30 个线程。这不是非常可扩展的方法。

**当你有 I/O 绑定任务时，你的任务是否安排在新线程上并不重要，重要的是这个任务是否阻塞线程。**

因此，使用 TPL，我看到以下模式比上面的代码更好：

```
var tasks = new Task<System.Net.WebResponse>[2];
var urls = new string[] { "https://stackoverflow.com/", "http://google.com/" };
for (int i = 0; i < tasks.Length; i++)
{
    var wr = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(urls[i]);
    tasks[i] = Task.Factory.FromAsync<System.Net.WebResponse>(
                   wr.BeginGetResponse,
                   wr.EndGetResponse,
                   null);
}

var result = Task.Factory.ContinueWhenAll(
    tasks,
    results => {
        foreach (var result in results)
        {
            var resp = result.Result.GetResponseStream();
            // Process responses and combine them into single result
        }
    }); 
```

同样，上面 90% 的代码都是*样板*代码。关键特性是 WebRequest 的`BeginGetResponse`异步操作，无论您最终使用哪种高级技术（TPL、Rx 等），都应该使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T09:08:11.373

您的担忧在一定程度上是有效的。确实，线程池可能不堪重负。这就是为什么调用长时间运行的非计算 IO 函数的网关服务通常更喜欢异步的原因。异步并不意味着“一劳永逸”。尽管这种等待不再阻塞线程，但您仍然可以“等待”。

这需要大量的代码更改。

一个更简单的解决方案是将负载生成器放入您的服务并测量它是否是一个问题。如果是的话，一个快速的解决方法是大大增加线程池的大小（我有 500-1000 个线程的积极经验（默认 = 250））。这对于吞吐量来说不是最佳的，但它会起作用、可靠并且需要很少的开发时间。只要确保在负载下进行测试，这样您就不会在晚上收到任何讨厌的寻呼机呼叫。

请注意，尽管异步现在风靡一时，但在开发人员的生产力方面它也有其缺点。有时，产生 100 条线程的好旧解决方案就足够了，实际上是最好的工程权衡。如果您使用的是 C# 5.0，则可以更轻松地利用`async/await`和实现非阻塞 IO。

# css - 手机无法识别媒体查询

> ID：15491960
> 
> 赞同：7
> 
> 时间：2013-03-19T05:16:17.427
> 
> 标签：css, mobile, responsive-design, media-queries

所以我有一个有趣的困境，我在一个响应式网站上工作，当我调整浏览器大小时，一切正常，但是当我从我的 iphone 查看该网站时，它没有从适当的媒体查询中获取查询，我已定义为：

```
@media (max-width: 479px) {
  rules
} 
```

该站点是 ericbrockmanwebsites.com/dev2 想知道是否有人以前遇到过这个问题。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T12:14:12.987

您需要考虑`<meta name="viewport" content="width=device-width, initial-scale=1">`到让您的移动设备尊重您的媒体查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T16:16:59.170

在某些情况下，图像在移动设备中超出正文或页面包装的宽度，只需将

`<meta name="viewport" content="width=device-width, initial-scale=0">`

在头部可以调整身体居中。

# php - 错误的配置 PHP - AIR

> ID：15491962
> 
> 赞同：0
> 
> 时间：2013-03-19T05:16:21.433
> 
> 标签：php, air

航空代码：

```
for(var j:int=0;j&quote ContenedorListaArchivos.numChildren;j++) 
{ 

    var M:MovieClip = MovieClip(ContenedorListaArchivos.getChildAt(j)); 

    if(M.UploadedFile.Estado==1) 
    { 
    var file:File = File.desktopDirectory.resolvePath(M.FullPath);                     
    file.addEventListener(ProgressEvent.PROGRESS,M.ProgresoUpload);
    file.addEventListener(DataEvent.UPLOAD_COMPLETE_DATA,M.CompleteUpload);  ‌​ 
    file.upload(new URLRequest(_phpscript+"?Opcion=UploadFile&destination="+_destination));
    } 
} 
```

PHP代码：

```
<?php

tempFile = $_FILES['Filedata']['tmp_name'];
$fileName = $_FILES['Filedata']['name'];
$fileSize = $_FILES['Filedata']['size'];

$dir = ($_GET['destination']) ? $_GET['destination'] : 'images';

if (!file_exists($dir)) mkdir($dir, 0777);

$isMove =move_uploaded_file($tempFile, $dir .'/'. $fileName);

if($isMove)
echo "OK";
else
echo "NO";

?> 
```

当我上传一个文件时，PHP 返回 OK。但是，当上传多个文件时，只有第一个是“OK”，另一个返回“NO”。

为什么？代码有什么问题？我应该在文件 PHP.ini 中更改什么？

谢谢您最好的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:24:26.590

你松了作业？**上传多个文件**

```
<form action="file-upload.php" method="post" enctype="multipart/form-data">
  Send these files:<br />
  <input name="userfile[]" type="file" /><br />
  <input name="userfile[]" type="file" /><br />
  <input type="submit" value="Send files" />
</form> 
```

提交上述表单时，数组 $_FILES['userfile']、$_FILES['userfile']['name'] 和 $_FILES['userfile']['size'] 将被初始化（以及4.1.0 之前的 PHP 版本在 $HTTP_POST_FILES 中）。当 register_globals 打开时，上传文件的全局变量也会被初始化。这些中的每一个都将是提交文件的适当值的数字索引数组。

例如，假设文件名 /home/test/review.html 和 /home/test/xwp.out 已提交。在这种情况下，$_FILES['userfile']['name'][0] 将包含值 review.html，而 $_FILES['userfile']['name'][1] 将包含值 xwp.out . 同样，$_FILES['userfile']['size'][0] 将包含 review.html 的文件大小，依此类推。

$_FILES['userfile']['name'][0]、$_FILES['userfile']['tmp_name'][0]、$_FILES['userfile']['size'][0] 和 $ _FILES['userfile']['type'][0] 也被设置。

***如果你是初学者***

```
<?php

function reArrayFiles(&$file_post) {

$file_ary = array();
$file_count = count($file_post['name']);
$file_keys = array_keys($file_post);

for ($i=0; $i<$file_count; $i++) {
    foreach ($file_keys as $key) {
        $file_ary[$i][$key] = $file_post[$key][$i];
    }
 }

 return $file_ary;
}

    if ($_FILES['upload']) {
        $file_ary = reArrayFiles($_FILES['userfile']);

        foreach ($file_ary as $file) {
            print 'File Name: ' . $file['name'];
            print 'File Type: ' . $file['type'];
            print 'File Size: ' . $file['size'];
        }
    }

    ?> 
```

# c# - 删除动态计时器

> ID：15491968
> 
> 赞同：1
> 
> 时间：2013-03-19T05:17:02.283
> 
> 标签：c#, dictionary, timer

我试图在它结束之前删除一个计时器。如果我单击按钮 1，计时器将启动，但如果我在计时器结束之前单击按钮 2，我仍然会收到来自 tick 事件的消息。

我需要有多个计时器，其中日期作为字典中的键。

有人可以告诉我我在这里做错了什么。

```
private Dictionary<string, System.Timers.Timer> timers = new Dictionary<string, System.Timers.Timer>();

private void button1_Click(object sender, EventArgs e)
{
    string dateTimeString = "19/03/2013 05:11:23"
    var myTimer = new System.Timers.Timer();
    myTimer.Interval = 30000;
    myTimer.Elapsed += new ElapsedEventHandler(MyTimer_Tick);
    myTimer.Enabled = true;
    timers.Add(dateTimeString, myTimer);
}

private void button2_Click(object sender, EventArgs e)
{
    timers.Remove("19/03/2013 05:11:23");
}

public void MyTimer_Tick(object sender, EventArgs e)
{
    MessageBox.Show("Timer tick");
    ((System.Timers.Timer)sender).Dispose();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T05:24:13.553

试试这个：

```
 private void button2_Click(object sender, EventArgs e)
    {
      timers[launchTime].Enabled = false;
      timers.Remove(launchTime);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:23:40.213

您应该将计时器设置为空。

# mysql - SELECT 语句中可以使用 DESC 语句吗？

> ID：15491969
> 
> 赞同：0
> 
> 时间：2013-03-19T05:17:05.673
> 
> 标签：mysql, sql, oracle

谁能告诉我如何在 select 语句中使用 desc 语句？

我需要使用 select 语句显示表的结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:21:21.053

你可以通过说得到一个简单的列列表

```
SELECT * FROM MyTable WHERE 0=1 
```

但除此之外，您应该遵循 Manjunath 的建议并使用`user_tables`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:19:39.930

select 语句足以描述表结构，如果您在 oracle 上，请使用 user_tables 完成此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:06:16.443

您可能正在参考/考虑该`DESCRIBE`声明，如`DESCRIBE MYTABLE;`

如果是这样 - 答案是否定的。

```
SELECT * FROM (DESC MYTABLE); -- Is Invalid

DESC MYTABLE; -- Is Valid 
```

你需要的是`SELECT * FROM ALL_TAB_COLUMNS WHERE TABLE_NAME = 'MYTABLE'`

# python - Pickle 在 python 2.6 上没有考虑我注册的自定义类型 reduce 函数

> ID：15491972
> 
> 赞同：4
> 
> 时间：2013-03-19T05:17:09.640
> 
> 标签：python, pickle, python-2.6

给定以下代码：

```
import pickle
import copy_reg

class A(type):
    pass

class B(object):
    __metaclass__ = A

def _reduce_a(a):
    print('Hey there')
    return a.__name__

copy_reg.pickle(A, _reduce_a)

pickle.dumps(B) 
```

`_reduce_a`尝试腌制`B`它是一个`A`实例但在 2.7 上调用时，从未在 python 2.6 上调用注册函数。

这是一个已知的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T08:21:48.713

Python 2.7.3 添加了一个新功能，允许对*动态*创建的类进行腌制。请参阅[问题 7689](http://bugs.python.org/issue7689)：

> 目前，即使用户通过 copy_reg 请求不同的 pickle 机制，也无法使用通常的 pickle 机制来 pickle 动态创建的类。附加的补丁通过简单地转置两个代码块使这种定制成为可能。

和

> copy_reg 模块用于处理对象的自定义酸洗，这正是这里需要的。但是，~~[#494904](http://bugs.python.org/issue494904)~~中检查元类实例的代码*就在*之前*它查看 copy_reg 调度表。这些补丁只是在 pickle.py 和 cPickle.c 中重新排序这些测试，以便可以为元类的实例注册一个自定义pickler。

从[2.7.3 更新日志](http://hg.python.org/cpython/file/d46c1973d3c4/Misc/NEWS#l328)：

> 问题 #7689：当动态创建的类使用 copy_reg 注册时，允许对动态创建的类进行酸洗。Nicolas M. Thiéry 和 Craig Citro 的补丁。

对于 Python 2.6，解决此问题的唯一方法是将`pickle.py`模块移植到该版本。您可以尝试将 2.7.3`pickle.py`模块与 2.6 捆绑在一起，作为纯 Python 实现，它应该可以正常工作。

或者，猴子修补`pickle.Pickler.save`方法：

```
from copy_reg import dispatch_table
from types import TypeType, StringType, TupleType
from pickle import Pickler, PicklingError

def pickler_save(self, obj):
    # Check for persistent id (defined by a subclass)
    pid = self.persistent_id(obj)
    if pid:
        self.save_pers(pid)
        return

    # Check the memo
    x = self.memo.get(id(obj))
    if x:
        self.write(self.get(x[0]))
        return

    # Check the type dispatch table
    t = type(obj)
    f = self.dispatch.get(t)
    if f:
        f(self, obj) # Call unbound method with explicit self
        return

    # Check copy_reg.dispatch_table
    reduce = dispatch_table.get(t)
    if reduce:
        rv = reduce(obj)
    else:
        # Check for a class with a custom metaclass; treat as regular class
        try:
            issc = issubclass(t, TypeType)
        except TypeError: # t is not a class (old Boost; see SF #502085)
            issc = 0
        if issc:
            self.save_global(obj)
            return

        # Check for a __reduce_ex__ method, fall back to __reduce__
        reduce = getattr(obj, "__reduce_ex__", None)
        if reduce:
            rv = reduce(self.proto)
        else:
            reduce = getattr(obj, "__reduce__", None)
            if reduce:
                rv = reduce()
            else:
                raise PicklingError("Can't pickle %r object: %r" %
                                    (t.__name__, obj))

    # Check for string returned by reduce(), meaning "save as global"
    if type(rv) is StringType:
        self.save_global(obj, rv)
        return

    # Assert that reduce() returned a tuple
    if type(rv) is not TupleType:
        raise PicklingError("%s must return string or tuple" % reduce)

    # Assert that it returned an appropriately sized tuple
    l = len(rv)
    if not (2 <= l <= 5):
        raise PicklingError("Tuple returned by %s must have "
                            "two to five elements" % reduce)

    # Save the reduce() output and finally memoize the object
    self.save_reduce(obj=obj, *rv)

Pickler.save = pickler_save 
```

使用上面的猴子补丁，您的示例适用于 Python 2.6.8：

```
>>> pickle.dumps(B)
Hey there
'c__main__\nB\np0\n.' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:47:47.213

我认为这是一个 2.6 错误/限制。如果您调用，您可以看到您的函数*被*调用`copy.copy(B)`，但不是在您调用时调用`pickle.dumps(B)`

# java - 如何使用 Java 整合电子邮件？

> ID：15491979
> 
> 赞同：0
> 
> 时间：2013-03-19T05:18:18.873
> 
> 标签：java, spring, hibernate, jsp, email

实际上在我的 java 应用程序中注册是他们的，所以我正在向用户电子邮件发送邮件。

```
<bean id="activateAccountTemplate" class="org.springframework.mail.SimpleMailMessage">
    <property name="subject" value="Account activation" />
    <property name="text">
        <value>
        <![CDATA[
            <html><body><p>Dear %s</p><p>Click <a href="http://localhost:8080/EClass/reset.jsp?a=%s">here</a> to activate your account.</p></body></html>
        ]]>
        </value>
    </property>
</bean> 
```

所以这是完美的。点击链接后

```
http://localhost:8080/EClass/reset.jsp?a=tdpTA3Dz8DYSI+9F/DpMxmxGD/a1Kl+3oYqXc1NNH0U= 
```

听说我正在使用加密机制。

我的数据库有类似...的列`S_id, username, password, active(T/F)`。

我的要求是永远注册`Active`，`F(false)`但单击链接`active`后将是`true`（当活动为真时，仅允许登录）。

那么在reset.jsp中怎么做呢？其实我的想法是

1.  为此编写一个控制器，更新`Active`列是`True`（但是如何为此获取 sid）

2.  获取 SID，实际上会生成上面显示的加密密钥，因此该密钥将被解密并发送到控制器，并使用 DB Query 选择特定用户并将活动设置为 true。（但还要了解如何获取 url 密钥...... `request.getParameter(?)`）

请给我建议...我被卡住了如何做到这一点..

给出一些示例代码`reset.jsp`

**编辑**：实际上我遵循 MVC 原则，所以没有 reset.jsp 如何编写直接控制器类..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:48:18.870

您的 reset.jsp 可能是这样的：

```
<%
    String token = request.getParameter("a");

    // Connection to DB executing this query :
    // "UPDATE users SET active = true WHERE S_id = " + token
%> 
```

由于您可能已经编写了访问数据库的代码，因此我不会包含此示例部分，但它会让您走上正轨。如果有一行更新，如果它工作正常，如果没有更新行，则将信息返回给用户，以验证他们的 URL，这也是非常有用的。

希望这有帮助。

**编辑 ：**

与 Servlet 相同的方法：

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class Reset extends HttpServlet {

  public void doGet(HttpServletRequest request, HttpServletResponse response)
                               throws ServletException, IOException {
    String token = request.getParameter("a");

    // Connection to DB executing this query :
    // "UPDATE users SET active = true WHERE S_id = " + token

    response.setContentType("text/html");
    PrintWriter out = res.getWriter();

    out.println("<HTML><BODY>Your response to the user depending on rows updated from SQL</BODY></HTML>");
  }
} 
```

您还需要在 web.xml 中定义：

```
<servlet>
  <servlet-name>reset</servlet-name>
  <servlet-class>myservlets.reset</servlet-class>
</servlet>

<servlet-mapping>
  <servlet-name>reset</servlet-name>
  <url-pattern>/reset</url-pattern>
</servlet-mapping> 
```

并更改您的链接：

```
<a href="http://localhost:8080/EClass/reset?a=%s">here</a> 
```

**编辑 ：**

与 Spring Controler 相同的方法：

```
@Controller
@RequestMapping(value = "/activation"
public class AccountActivationController
{
    @RequestMapping(method = RequestMethod.GET)
    public String setupForm(@RequestParam("a") String token, ModelMap model) {
        // Connection to DB executing this query :
        // "UPDATE users SET active = true WHERE S_id = " + token

        return successful ? "activationSuccessful" : "activationError";
    }
} 
```

帮不上什么忙，因为我以前从未做过Spring...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T06:44:49.600

您应该将活动和其他内容放入单独的表格中。

```
table user

id   username   password

table activation

id active expired_time token user_id 
```

用户完成注册后，应将一条记录插入到激活表中。活动字段为假，过期时间为 2 小时后，等等。

然后使用令牌查表并做主动工作。

# c - 删除链表C时出现段错误

> ID：15491980
> 
> 赞同：0
> 
> 时间：2013-03-19T05:18:26.050
> 
> 标签：c, recursion, linked-list

当我遍历链表时，它会出现故障。我不知道为什么会这样。我的任务是递归（所有函数）按顺序插入整数，创建一个检查整数的函数，打印列表，向后打印列表，删除一个节点，并删除整个列表。我在最后一部分，现在已经被困了一段时间。非常感谢。

```
void deleteList(node* head)
{
    node* temp;

    if(head == NULL)
        printf("List is empty\n");

    else
    {
        temp = head->next;
        free(head);
    }

    deleteList(head->next);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T05:20:57.013

您首先释放 head 使用的内存，然后将 head 的成员作为参数传递给“deleteList”。

我认为应该先 deleteList 然后再释放：

```
if (head)
{
    deleteList(head->next);
    free(head);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T05:24:18.320

问问自己...为什么要存储变量`temp`。看起来你从来没有将它用于任何事情。

我认为您*打算*使用它，并且您可能*应该*使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T05:25:42.460

你已经解放了头脑，所以当你在做的时候

```
deleteList(head->next); 
```

您正在访问无效内存，请使用您的临时变量。

```
deleteList(temp); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T05:28:34.167

它应该是

```
 temp=head;
    head=head->next;
    free(temp);
    deleteList(head); 
```

# javascript - 这种“软着陆”效应怎么称呼？

> ID：15491988
> 
> 赞同：1
> 
> 时间：2013-03-19T05:18:51.523
> 
> 标签：javascript

请查看[www.myprovence.fr](http://www.myprovence.fr)。单击固定顶部的链接，您会看到页面不仅跳转到其锚点，而且会滑动最后几厘米，或者像我所说的那样轻柔地着陆。我想弄清楚这是如何完成的，但我不知道在（压缩/缩小和扩展的）源代码中寻找什么，或者谷歌搜索什么。Firebug 也没有说清楚。这怎么叫，我应该寻找什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:23:52.897

二次缓出功能应该可以实现您正在寻找的效果。[这个插件](http://gsgd.co.uk/sandbox/jquery/easing/)提供了这个和其他缓动函数（或者你可以自己编写）。[您可以在此处](http://easings.net/)检查库中包含的缓动函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:23:21.783

他们将 jQuery 与缓动函数结合使用。Chris Coyier 发布了类似的内容，您可以在此处查看代码和演示：[链接](http://css-tricks.com/snippets/jquery/smooth-scrolling/)

你只需要让导航链接变成这样：

```
<a href="#one">Scroll to Section One</a>
<a href="#two">Scroll to Section Two</a> 
```

您要滚动到的部分如下所示：

```
<div id="one">Section One</div>
<div id="two">Section Two</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:02:13.023

好的，它需要另一个重要的构建块，必须先修复它，但是有了这个和 Asad 递给我的构建块，我让它工作了——而且很漂亮，我可以补充一下。低至 IE7（6 未测试）！请参阅[http://bit.ly/XWbvZw](http://bit.ly/XWbvZw)。所有信息都在代码和注释中。

感谢您的加入！

# symfony - 如何在我的 Symfony 项目中组织 Javascript

> ID：15491990
> 
> 赞同：3
> 
> 时间：2013-03-19T05:19:17.937
> 
> 标签：symfony

我越来越沉迷于 Symfony 的关注点分离，我想将这种理念扩展到我的 Javascript。我发现我的项目中的视图层对于相关的 Javascript 功能来说是非常合理的划分。

组织和分离我的 Javascript 的最佳方式是什么？理想情况下，我希望能够添加特定于视图的 Javascript。我几乎可以肯定将 JS 直接嵌入到模板中是不好的做法。我也知道`script`在每个视图中添加一个新标签对客户来说成本很高。

这里的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:29:21.303

您可以找到一些有关[资产和资产管理](http://symfony.com/doc/master/cookbook/assetic/asset_management.html)的文档。如果您能够快速掌握模板结构，那么此文档绝对适合您。

# asp.net-mvc - ASP MVC 如何创建自定义 FormsAuthentication.SetAuthCookie？

> ID：15491991
> 
> 赞同：1
> 
> 时间：2013-03-19T05:19:30.023
> 
> 标签：asp.net-mvc, authentication, forms-authentication

当我像这样设置 AuthCookie

```
FormsAuthentication.SetAuthCookie(model.UserName, true); 
```

model.userName 实际上是用户的电子邮件，它唯一地标识了每个用户，然后在我使用时在我看来：

```
Welcome <strong> @User.Identity.Name</strong>! 
```

它显示“欢迎使用 user@mail.com！，但是我想使用 user.firstname。

所以，我的问题是，是否可以实现自定义 User.Identity 或自定义 Forms.SetAuthCookie ，这将允许我在我的视图中使用这样的东西：

```
Welcome <strong> @User.Identity.FirstName</strong>! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:29:47.740

您可以访问该[`MembershipUser`](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.aspx)课程提供的一些信息。但是，没有名字或姓氏的属性，这意味着您需要实现自定义成员身份用户/提供者。见[这篇文章](http://msdn.microsoft.com/en-us/library/ms366730%28v=vs.80%29.aspx)。