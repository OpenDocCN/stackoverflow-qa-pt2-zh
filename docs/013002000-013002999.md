# StackOverflow 问答 13002000-13002999

# android - 如何添加图标或更改日历视图的日期图标？

> ID：13002009
> 
> 赞同：7
> 
> 时间：2012-10-21T20:43:24.730
> 
> 标签：android, calendar, android-custom-view, android-calendar, calendarview

我正在开发一个日历应用程序，这就是我想做的；例如，我在一个月的不同日子有各种活动，在日历上，我想在有活动的日子（例如音乐会）添加一个图标。如果一天没有活动，这一天不会有图标。

注意：我使用 CalendarView 作为日历 UI。

这是我要解释的图像；

[http://postimage.org/image/kdejw72nb/](http://postimage.org/image/kdejw72nb/)

请帮我在这个特殊的日子里添加这个小图标。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T11:48:01.420

您必须创建您的自定义 gridView。它可能看起来像这样：

工作日布局

```
<GridView
    android:id="@+id/weekdays"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:clickable="false"
    android:numColumns="7" /> 
```

layout.xml 的日子

```
<GridView
    android:id="@+id/days"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:numColumns="7" /> 
```

显示工作日的java代码

```
GridView weekdays = (GridView) linearLayout.findViewById(R.id.weekdays);
weekdays.setAdapter(new Weekdays());

public class WeekDays extends BaseAdapter {
String[] weekdays = null;

public WeekDayAdapter() {
  DateFormatSymbols dateFormatSymbols= new DateFormatSymbols();

  weekdays = = dateFormatSymbols.getShortWeekdays();
}

public int getCount() {
  return 7;
}

public Object getItem(int position) {
  return weekdays[position];
}

public long getItemId(int position) {
  return GridView.INVALID_ROW_ID;
}

public View getView(int position, View convertView, ViewGroup parent) {
  View view = null;

  view = new LinearLayout(parent.getContext());
  view.setLayoutParams(new GridView.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
  view.setOrientation(Horizontal);

  LinearLayout linearLayout = new LinearLayout(parent.getContext());
  linearLayout.setOrientation(Vertical);

  TextView weekDays = new TextView(parent.getContext());
  weekDays.setText(weekdays[position + 1]);

  linearLayout.addView(weekDays);

  view.addView(linearLayout);

  return view;
}
} 
```

您可以执行类似的操作来设置月份中的日期。随意问任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:51:45.157

另一种选择是使用 CalendarProvider。你可以参考这个：http: [//developer.android.com/guide/topics/providers/calendar-provider.html](http://developer.android.com/guide/topics/providers/calendar-provider.html)

# delphi - TEmbeddedWB / TWebbrowser 鼠标滞后（对象拖放）

> ID：13002014
> 
> 赞同：0
> 
> 时间：2012-10-21T20:44:08.443
> 
> 标签：delphi, internet-explorer-9, mouse, lag, twebbrowser

我在 Delphi 项目中使用 TEmbeddedWB 来全屏显示 HTML5/CSS3/Javascript 游戏。它使用嵌入的 IE9 来呈现页面。这工作正常，但我发现与其他浏览器和 IE9 本身相比存在一些滞后和速度差异（当页面加载到浏览器本身中时）。在浏览器中没有延迟。

因为游戏使用拖放功能来移动物体并且可以在触摸屏上使用，所以移动的滞后有点烦人。

我尝试了几件事，禁用背景绘图，重新绘制，将 CPU 优先级提高到正常水平以上，禁用 TEmbeddedWB 功能等。我也尝试使用 TWebBrowser，但有同样的问题。

有人知道如何解决这个问题吗？在互联网上没有找到任何关于此的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:20:07.150

如前所述，检查您使用的是哪种 IE 模式。此外，检查您在 EmbeddedWB 事件中运行的代码，尤其是鼠标事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T23:50:40.707

23天后：

IE10 预发布版（今天）尚未发布（今天）适用于 Windows 7。下载并安装它，滞后问题消失了。

IE10的Javascript引擎比IE9快很多。我认为这就是问题所在。

虽然它不是一个真正的解决方案（IE9 Embedded 的滞后问题仍然存在），但在不久的将来看起来很有希望。我的要求至少是 IE9 才能运行，但是当你想要更快的速度和更多的 HTML5/CSS3 支持时，你必须升级到 IE10。但是，如果您将来找到 IE9 的解决方案，请告诉我。

要下载 IE10 的预发布版本，您可以访问此页面（我下载的是 64 位版本）。 [http://www.microsoft.com/en-us/download/details.aspx?id=35709](http://www.microsoft.com/en-us/download/details.aspx?id=35709)

# java - 如何修复 java.lang.RuntimeException？

> ID：13002018
> 
> 赞同：0
> 
> 时间：2012-10-21T20:44:27.317
> 
> 标签：java, android, logcat

这一次奏效了。我不知道我做了什么来杀死它。App Force 在任何事情发生之前关闭。下面是LogCat

> 10-21 15:34:14.503: E/AndroidRuntime(22129): java.lang.RuntimeException: 无法实例化活动 ComponentInfo{com.bigtexapps.android.DropBubble/com.bigtexapps.android.DropBubble.Menu}: java.lang .ClassNotFoundException: com.bigtexapps.android.DropBubble.Menu 在加载器 dalvik.system.PathClassLoader[/data/app/com.bigtexapps.android.DropBubble-2.apk]

以下是 Android 清单：

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.bigtexapps.android.DropBubble"
      android:versionCode="1"
      android:versionName="1.0" >

 <uses-sdk android:minSdkVersion="7" 
      android:targetSdkVersion="8"/>

<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WAKE_LOCK"/>

<application android:icon="@drawable/icon" 
         android:label="@string/app_name">
<activity    android:name=".Menu"
         android:label="@string/app_name">
         <intent-filter>
<action      android:name="android.intent.action.MAIN" />
<category    android:name="android.intent.category.LAUNCHER" />
         </intent-filter>
         </activity>

 <activity android:name=".DropBubble"> </activity>

  <activity android:name=".Help"> </activity>

 <activity android:name=".GameOver"> </activity>

  </application>

 </manifest> 
```

下面是 Menu.java 的第一部分：

```
package com.bigtexapps.android.DropBubble;

import org.anddev.andengine.engine.Engine;
import org.anddev.andengine.engine.camera.Camera;
import org.anddev.andengine.engine.options.EngineOptions;
import org.anddev.andengine.engine.options.EngineOptions.ScreenOrientation;
import org.anddev.andengine.engine.options.resolutionpolicy.RatioResolutionPolicy;
import org.anddev.andengine.entity.scene.Scene;
import org.anddev.andengine.entity.scene.menu.MenuScene;
import org.anddev.andengine.entity.scene.menu.MenuScene.IOnMenuItemClickListener;
import org.anddev.andengine.entity.scene.menu.item.IMenuItem;
import org.anddev.andengine.entity.scene.menu.item.SpriteMenuItem;
import org.anddev.andengine.entity.sprite.Sprite;
import org.anddev.andengine.opengl.texture.Texture;
import org.anddev.andengine.opengl.texture.TextureOptions;
import org.anddev.andengine.opengl.texture.region.TextureRegion;
import org.anddev.andengine.opengl.texture.region.TextureRegionFactory;
import org.anddev.andengine.ui.activity.BaseGameActivity;
import android.content.Intent;
/**
 * @author Roger Belk
 * 
*/
 public class Menu extends BaseGameActivity implements IOnMenuItemClickListener{

// ===========================================================
// Constants
// ===========================================================

private static final int CAMERA_WIDTH = 320;
private static final int CAMERA_HEIGHT = 480;
protected static final int MENU_START = 0;
protected static final int MENU_HELP = MENU_START +1;
protected static final int MENU_QUIT = MENU_HELP + 1;

// ===========================================================
// Fields
// ===========================================================
private Camera mCamera;
private MenuScene mMenuScene;
private Scene mMainScene;
private Texture mStartBackGroundTexture;
private TextureRegion mStartBackGroundTextureRegion;
private Texture mStartGameTexture;
private TextureRegion mStartGameTextureRegion;
private TextureRegion mHelpTextureRegion;
private TextureRegion mExitTextureRegion;

public Engine onLoadEngine() {
    this.mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
    return new Engine(new EngineOptions(true, ScreenOrientation.PORTRAIT, 
        new RatioResolutionPolicy(CAMERA_WIDTH,CAMERA_HEIGHT),this.mCamera));   
}

public void onLoadResources() {
    //To import background of resources
    this.mStartBackGroundTexture = new Texture(512, 512, TextureOptions.DEFAULT);
    this.mStartBackGroundTextureRegion = TextureRegionFactory.createFromAsset(this.mStartBackGroundTexture, this, "gfx/startbg.png", 0, 0);
    //Import to start the game resources
    this.mStartGameTexture = new Texture(256,256,TextureOptions.BILINEAR);
    this.mStartGameTextureRegion = TextureRegionFactory.createFromAsset(this.mStartGameTexture, this, "gfx/menu_start.png",0,0);
    this.mHelpTextureRegion = TextureRegionFactory.createFromAsset(this.mStartGameTexture, this, "gfx/menu_help.png",0,50);
    this.mExitTextureRegion = TextureRegionFactory.createFromAsset(this.mStartGameTexture, this, "gfx/menu_quit.png",0,100);

    this.mEngine.getTextureManager().loadTextures(this.mStartBackGroundTexture,this.mStartGameTexture);
}

public Scene onLoadScene() {
    this.createMenuScene();
    this.mMainScene = new Scene(1);
    final int centerX = (CAMERA_WIDTH - this.mStartBackGroundTextureRegion.getWidth()) / 2;
    final int centerY = (CAMERA_HEIGHT -      this.mStartBackGroundTextureRegion.getHeight()) / 2;
    final Sprite bg = new Sprite(centerX, centerY, this.mStartBackGroundTextureRegion); 
    this.mMainScene.setChildScene(this.mMenuScene, false, true, true);  
    this.mMainScene.getTopLayer().addEntity(bg);
    return this.mMainScene;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:46:27.210

看起来你的问题在这里：

```
java.lang.ClassNotFoundException: com.bigtexapps.android.DropBubble.Menu 
```

确保任何 3rd 方 jar 文件位于项目的 /libs 文件夹中。

在旧版本（r16 及更低版本）中，处理此问题的方法是将您的 3rd 方 jar 放入任何文件夹，然后将该文件夹添加到项目路径中。Google 在 r17 中对此进行了更改，以便将所有第 3 方 jar 文件放入 /libs。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:50:24.300

我认为您没有将 jar 与您的 apk 捆绑在一起。您需要做的只是配置您的构建路径设置并检查 eclipse 的导出选项以获取相应的 jar。

# c# - 以一种形式在多个用户控件之间导航

> ID：13002019
> 
> 赞同：0
> 
> 时间：2012-10-21T20:44:36.410
> 
> 标签：c#, .net, winforms, user-controls

我有一个表单和多个控件。

假设我有一个表单，它应该包含一些控件。

我正在尝试使用单个表单并根据某些用例添加和删除控件。

例如，这是我的表单类中的示例代码：

```
private void AddToControlPanel(UserControl control)
        {
            this.panelControl.Controls.Add(control);
            this.panelControl.Tag = control;
            this.panelControl.Size = control.Size;
            this.panelControl.Dock = DockStyle.Fill;
            control.Show();
        } 
```

上面的示例向某个面板添加了一个控件并显示它。

问题是我无法设法添加一些其他控件并删除当前控件。例如，如果某些登录控件验证成功，则删除登录控件本身并显示其他类似搜索框控件。

怎样才能做到这一点？

这是我迄今为止尝试过的：

```
if (LoginOK)
{
   //Add the next Control I want to load
   this.ParentForm.Controls.Add(new CtlPedirDevolucion());
   //Remove this actual control
   this.ParentForm.Controls.Remove(this);
} 
```

...所以稍后使用事件处理程序显示最新添加的控件：

```
private void FirstForm_ControlRemoved(object sender, ControlEventArgs e)
{
    this.Controls[this.Controls.Count - 1].Show();
} 
```

但这对我不起作用。另外我不喜欢我的方法。

你会建议我一个更好的方法来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:00:24.720

我已经尝试过类似的东西并且它有效。

表格中的代码：

```
public void SwitchControls(Control removeCtrl, Control addControl)
{
     panel1.Controls.Remove(removeCtrl);
     panel1.Controls.Add(addControl);
} 
```

控件中的代码：

```
MyForm frm = (MyForm)this.FindForm();
CtlPedirDevolucion newCtrl = new CtlPedirDevolucion();
newCtrl.Dosck = DockStyle.Fill;
frm.SwitchControls(this, newCtrl); 
```

**编辑：**我的错，在控制中创建将被删除的 CtlPedirDevolucion 毫无意义。它应该在您的表单中实例化，并且还应该有对它的引用。因此 SwitchControls 应该有一个更复杂的逻辑，也许还有更多的参数，但这是你可以使用的。也许您可以制作一个 switch-case 或其他可以在您的表单中创建控件的东西。我提醒您，这只是一个有效但非常糟糕的示例。

# mysql - 不检查数据类型的安全问题

> ID：13002027
> 
> 赞同：2
> 
> 时间：2012-10-21T20:45:23.820
> 
> 标签：mysql, security

[![](../Images/28b9ba208e5054a75d927a2cc35e0a7a.png)](https://i.stack.imgur.com/4yGVR.png)

它不检查密码类型。密码可以定义为 4 位无符号整数，如果用户尝试将他/她的密码更改为 4 位无符号整数以外的其他值，那么它可能会导致错误，对吗？

如果是这样，什么样的错误？只是一个简单的错误消息，或者这可能是一个主要的安全问题？有人可以对此进行缓冲区溢出攻击吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:53:35.930

考虑使用参数而不是字符串连接，可能会受到sql注入攻击

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T20:56:17.253

这里可能存在重大安全问题！不仅仅是一条错误消息。阅读有关 SQL 注入的更多信息。简单的规则是您应该始终清理任何字符串用户输入，以确保正确的类型，但更重要的是，它不会绕过您的意图并侵入您的数据库。

例如，一个简单的 Google 搜索会返回[这个站点](http://www.tizag.com/mysqlTutorial/mysql-php-sql-injection.php)。

对于 .NET，最好使用`SqlParameter`连接字符串来形成 SQL 查询。`SqlParameter`保护您免受 SQL 注入...

```
using (SqlCommand cmd = new SqlCommand("UPDATE tblUser SET Password = @password WHERE CustomerID=@custID", conn))
{
   cmd.Parameters.Add(new SqlParameter("password ", newPassword));
   cmd.Parameters.Add(new SqlParameter("custID", custID));
... 
```

# php - PHP 无法识别文件上传标签

> ID：13002036
> 
> 赞同：1
> 
> 时间：2012-10-21T20:46:14.570
> 
> 标签：php, html

我在这里先向您的帮助表示感谢！我对 PHP 很陌生，现在我正在尝试上传图片。当我提交表单时，我收到错误消息：注意：未定义索引：第 4 行 C:\wamp\www\register.php 中的文件

我猜它说它没有找到我的文件输入标签。

这是我提交的表格：

```
<form name="submitForm" action="register.php" method="POST">
    <input type="hidden" name="hidden"/>
    Profile Picture<input type="file" name="file" value="Browse"/> 
</form> 
```

这是我的 PHP 代码（我将测试正确的上传、类型等，但只是想让它首先实际上传）：

```
move_uploaded_file($_FILES["file"]["tmp_name"], "profilepics/" . $_FILES["file"]["name"]); 
```

请帮助这让我沮丧至死。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:03:22.750

您需要将下一个代码添加到您的表单`enctype= multipart/form-data`中。

# cookies - 通过 ajax 请求在子域上设置 cookie

> ID：13002038
> 
> 赞同：17
> 
> 时间：2012-10-21T20:46:24.137
> 
> 标签：cookies, subdomain

我在 www.example.com 上有一个 webapp，在 api.example.com 上有一个 API。

webapp 对 API 进行 ajax 调用。

我需要在 api.example.com 上放置一个 cookie 以跟踪会话。

为了跟踪我的问题，我在 webapp 和 api 的两个子域上设置了测试 cookie。webapp 在 .exemple.com 上设置了一个 cookie，而 api 在 .exemple.com 上设置了一个 cookie，在 api.exemple.com 上设置了另一个。Cookie 仅使用 Domain=.exemple.com 设置。没有路径，没有 HTTPOnly。

注意：最后我只需要 api.exemple.com 上的一个。但这些是为了测试。

使用我的浏览器 (Firefox 16) 直接查询可以正常工作。api上查询：设置并发送了两个cookie。在 www 上查询：cookie 已设置，api 中的两个也已发送。（当然，前提是我在 api 之后查询 www）。

现在，我清理浏览器 cookie 并仅查询 www。查询 www: 工作正常，和以前一样。来自 www 的 ajax 请求的 api 子查询：不发送 cookie。Set-Cookies 什么都不做。使用 Firebug，我在响应中看到了 cookie。但在后续请求或页面信息中没有它们的痕迹。

我试图在 Firefox 上启用 cookie 日志。绝对没有来自 api 的 cookie 的痕迹，甚至没有拒绝通知。

最后，我只需要一种在 api 上存储一个 cookie 的方法。为此，我很开放:)

信息：两台服务器都是NodeJS。我尝试在服务器端（Set-Cookie 标头）、客户端（document.cookies）上手动使用 firebug 设置 cookie。

我检查过的其他帖子没有解决方案（还有很多我不记得的帖子）：

[使用 javascript 设置跨子域 cookie](https://stackoverflow.com/questions/4713019/setting-cross-subdomain-cookie-with-javascript)

[Cookie 和子域](https://stackoverflow.com/questions/108558/cookies-and-subdomains)

[subdomain.example.com 可以设置一个可以被example.com读取的cookie吗？](https://stackoverflow.com/questions/3089199/can-subdomain-example-com-set-a-cookie-that-can-be-read-by-example-com)

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-22T06:57:51.963

### 在 api 上设置允许凭据标头

```
Access-Control-Allow-Credentials: true 
```

### 用于`withCredentials`请求

```
$.ajax({
    url: a_cross_domain_url,
    xhrFields: { 
        withCredentials: true 
    }
}); 
```

否则，无论标头如何，**都不会**`XMLHttpRequest`发送cookie 。**`Access-Control-Allow-Credentials`**

 **### 删除通配符`Access-Control-Allow-Origin`

```
Access-Control-Allow-Origin: http://www.example.com 
```

通配符`*`将不起作用。如果`withCredentials`已设置，浏览器将丢弃响应。

参考：

[http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/](http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/)

[https://developer.mozilla.org/en-US/docs/HTTP_access_control](https://developer.mozilla.org/en-US/docs/HTTP_access_control)

[http://arunranga.com/examples/access-control/credentialedRequest.html](http://arunranga.com/examples/access-control/credentialedRequest.html)

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-11T04:35:14.907

除了 Alexandre 的正确答案之外，这是我通过 .htaccess 进行的 CORS 设置。

添加到 api.example.com 上带有 phps（或更高版本）的目录中的 .htaccess 文件：

```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "https://www.example.com"
    Header set Access-Control-Allow-Headers "Origin, Content-Type, X-Auth-Token"
    Header set Access-Control-Allow-Credentials "true"
</IfModule> 
```

在[www.example.com](http://www.example.com)上，我添加了我的 AJAX 调用 xhrFields: {withCredentials: true}。以下是所有设置：

```
jQuery.ajax({
    url: myURL,
    type: "POST",
    xhrFields: {withCredentials: true},
    dataType: "text",
    contentType: "text/xml; charset=\"utf-8\"",
    cache: false,
    headers: "",
    data: myCallJSONStr,
    success: function(myResponse) { etc.... 
```

URL 在哪里调用 api.example.com 上的 php。

请注意，Alexandre 是对的，您必须指定一个确切的子域，不幸的是，任何通配符都不起作用。所以这不起作用：

```
Header set Access-Control-Allow-Origin "*" 
```

使用 Access-Control-Allow-Credentials“true”设置时，CORS 将阻止此设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-12T00:11:42.100

我后来添加了这篇文章，因为当我需要使用 AJAX 和 PHP 将 cookie 从多个子域传递到单个 API 域时遇到了我以前的解决方案的问题

这是挑战和解决方案：

1 - api.example.com 上的后端 PHP。

2 - 多个 JS 前端，例如 one.example.com、two.example.com 等。

3 - Cookie 需要双向传递。

4 - 从多个前端到 api.example.com 上的 PHP 后端的 AJAX 调用

5 - 在 PHP 中，我不喜欢使用 $_SERVER["HTTP_ORIGIN"]，在我看来并不总是可靠/安全的（我有一些浏览器 HTTP-ORIGIN 总是为空的）。

在具有单个前端域的 PHP 中执行此操作的正常方法是使用以下命令开始 PHP 代码：

```
header('Access-Control-Allow-Origin: https://one.example.com');  
header('Access-Control-Allow-Headers: Origin, Content-Type, X-Auth-Token');  
header('Access-Control-Allow-Credentials: true'); 
```

在 one.example.com 域的 JS 中：

```
jQuery.ajax({
    url: myURL,
    type: "POST",
    xhrFields: {withCredentials: true},
    dataType: "text",
    contentType: "text/xml; charset=\"utf-8\"",
    cache: false,
    headers: "",
    data: myCallJSONStr,
    success: function(myResponse) {.....} 
```

但是，这不可行，因为我使用多个子域来调用我的 API 域。

而且这个解决方案将**不起作用**，因为我想传递 cookie：

```
header('Access-Control-Allow-Origin: *'); 
```

它与 JS 站点上的 pass on cookie 设置冲突：

```
xhrFields: {withCredentials: true} 
```

这是我所做的：

1 - 使用 GET 参数传递子域。

2 - 在 PHP 中硬编码主域，因此只允许（所有）子域。

这是我的解决方案的 JS/JQuery AJAX 部分：

函数 getSubDomain(){

```
let mySubDomain = "";

let myDomain = window.location.host;
let myArrayParts = myDomain.split(".");
if (myArrayParts.length == 3){
    mySubDomain = myArrayParts[0];
}

return mySubDomain; 
```

}

在 AJAX 调用中：

```
let mySubDomain = getSubDomain();
if (mySubDomain != ""){
    myURL += "?source=" + mySubDomain + "&end"; //use & instead of ? if URL already has GET parameters
}

jQuery.ajax({
    url: myURL,
    type: "POST",
    xhrFields: {withCredentials: true},
    dataType: "text",
    contentType: "text/xml; charset=\"utf-8\"",
    cache: false,
    headers: "",
    data: myCallJSONStr,
    success: function(myResponse) {.....} 
```

最后，PHP部分：

```
<?php

$myDomain = "example.com";
$mySubdomain = "";

if (isset($_GET["source"])) {
    $mySubdomain = $_GET["source"].".";
}

$myDomainAllowOrigin = "https://".$mySubdomain.$myDomain;
$myAllowOrigin = "Access-Control-Allow-Origin: ".$myDomainAllowOrigin;

//echo $myAllowOrigin;

header($myAllowOrigin);  
header('Access-Control-Allow-Headers: Origin, Content-Type, X-Auth-Token');  
header('Access-Control-Allow-Credentials: true'); 
```

**重要**的是，不要忘记为所有子域设置 cookie，在这种情况下，cookie 的域将是：.example.com（所以在主域前面有一个点）：

```
<?php

    //////////////// GLOBALS /////////////////////////////////

    $gCookieDomain = ".example.com";
    $gCookieValidForDays = 90;

    //////////////// COOKIE FUNTIONS /////////////////////////////////

    function setAPCookie($myCookieName, $myCookieValue, $myHttponly){
        global $gCookieDomain;
        global $gCookieValidForDays;

        $myExpires = time()+60*60*24*$gCookieValidForDays;
        setcookie($myCookieName, $myCookieValue, $myExpires, "/", $gCookieDomain, true, $myHttponly);   

        return $myExpires;
    } 
```

此解决方案允许我从 example.com 上的任何子域调用 api.example.com 上的 API。

注意。对于只有一个调用子域的情况，我更喜欢使用 .htaccess 来设置 CORS 而不是 PHP。这是一个仅用于调用 api.example.com 的 one.example.com 的 .htaccess (linux/apache) 示例：

```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "https://one.example.com"
    Header set Access-Control-Allow-Headers "Origin, Content-Type, X-Auth-Token"
    Header set Access-Control-Allow-Credentials "true"
</IfModule> 
```

并将这个 .htaccess 放在 api.example.com 的根目录中。**

# subdomain - 为搜索引擎配置语言域 - SEO

> ID：13002042
> 
> 赞同：0
> 
> 时间：2012-10-21T20:46:37.720
> 
> 标签：subdomain, seo

我有一个使用不同语言的网站（*http://www.boletus-app.com*）。每种语言都显示在不同的子域中（*http://en.boletus-app.com*、*http://es.boletus-app.com*等）。主站点 ( *www* ) 显示用户在以前的条目中使用的语言或默认浏览器使用的语言。我应该使用哪种策略以便 Google 识别它？人们通常链接到*www*站点。

我目前所做的是添加备用标签：

`<link href="http://es.boletus-app.com" rel="alternate" hreflang="es"/>`

有什么我可以做的吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:32:34.920

您可以通过三种不同的方式向 Google 告知您网站的特定语言版本。其中之一是您当前使用`rel="alternate" hreflang="x"`注释的方式。请注意，此标记被视为信号之一，而不是 Google Crawler 的指令。

您可以在[此网站管理员工具链接下找到更多信息](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=189077&topic=2370587&ctx=topic)

此外，您应该通过 Google Webmaster Central 阅读这个[国际化常见问题解答](https://sites.google.com/site/webmasterhelpforum/en/faq-internationalisation)，其中明确提到 Google Crawler 基于每个 URL 检测语言，并且不需要使用任何特殊结构。但是，重要的是每个语言版本都在一个单独的 URL 上，并且 Googlebot 能够抓取所有版本。

因此，恕我直言，如上述链接中所述，您当前的风格处于舒适的位置。

# oracle - 对于一个表的每一行，计算另一个表中指向 Oracle 中每一行的条目

> ID：13002043
> 
> 赞同：0
> 
> 时间：2012-10-21T20:46:49.503
> 
> 标签：oracle, join, group-by

不确定标题是否能很好地解释问题；这就是我正在使用的，

我有以下表格，

```
-- table = kms_doc_ref_currnt_v
DOC_ID    VARCHAR2(19)
TO_DOC_ID    VARCHAR2(19)
BRANCH_ID    NUMBER(8)
REF_TYP_CD    VARCHAR2(20)

-- table = kms_fil_nm_t
DOC_ID    VARCHAR2(19)    PRIMARY KEY    UNIQUE 
```

例如，我可以使用这个查询来计算所有`kms_doc_ref_currnt_v`具有 a 的记录`to_doc_id = 59678`，其中 59678 是 中的一个值`kms_fil_nm_t`，

```
select 'doc_id 59678 has ' || count(to_doc_id) as cnt from kms_doc_ref_currnt_v where branch_id=1 and ref_typ_cd in ('CONREF', 'KBA') and to_doc_id=59678; 
```

`kms_doc_ref_currnt_v.to_doc_id`是具有其中一个`kms_fil_nm_t.doc_id`值的字段。`kms_doc_ref_currnt_v.doc_id`也是 中的值之一`kms_fil_nm_t`。

我正在寻找的单个查询将遍历每个查询`kms_fil_nm_t.doc_id`并计算其中所有`kms_doc_ref_currnt_v`具有相似`to_doc_id`. 返回的每一行看起来都像上面查询的输出。这是示例输出，

```
doc_id 1 has 32
doc_id 2 has 314
doc_id 3 has 2718
doc_id 4 has 42
doc_id 5 has 128
doc_id 6 has 11235
.
.
. 
```

可能很简单，但我就是想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:53:10.900

对两个表进行连接并添加一个`GROUP BY`子句，如下所示：

```
 SELECT 'doc_id 59678 has ' || count(to_doc_id) as cnt 
    FROM kms_doc_ref_currnt_v kv, kms_fil_nm_t kt
    WHERE kt.doc_id= kv.to_doc_id 
          AND kv.branch_id=1 
          AND kv.ref_typ_cd in ('CONREF', 'KBA') 
          AND kv.to_doc_id=59678
    GROUP BY kv.to_doc_id; 
```

**编辑：**

要从 和 中获取所有记录，`kms_doc_ref_currnt_v`而不考虑它们的参考可用性`kms_fil_nm_t`，`kv.to_doc_id=59678`请执行以下操作：

```
 SELECT 'doc_id 59678 has ' || count(to_doc_id) as cnt 
    FROM kms_doc_ref_currnt_v kv 
         LEFT JOIN kms_fil_nm_t kt
         ON (kt.doc_id= kv.to_doc_id )
    WHERE  kv.branch_id=1 
          AND kv.ref_typ_cd in ('CONREF', 'KBA') 
    GROUP BY kv.to_doc_id; 
```

要替换硬编码`59678`，您可能需要编写：

```
 SELECT 'doc_id ' || kt.doc_id || ` has ' || count(to_doc_id) as cnt 
    FROM kms_doc_ref_currnt_v kv 
         LEFT JOIN kms_fil_nm_t kt
         ON (kt.doc_id= kv.to_doc_id )
    WHERE  kv.branch_id=1 
          AND kv.ref_typ_cd in ('CONREF', 'KBA') 
    GROUP BY kv.to_doc_id, kt.doc_id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:12:17.657

您需要在具有所有值的驱动表和可能具有或不具有匹配条目的依赖表之间使用[外连接；](http://docs.oracle.com/cd/E11882_01/server.112/e26088/queries006.htm#sthref2252)`doc_id`和一个[`group by`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#sthref6776)子句来定义您的聚合函数 ( `count()`) 的操作对象。就像是：

```
select 'doc_id ' || t.doc_id || ' has ' || count(*)
from kms_fil_nm_t t
left join kms_doc_ref_currnt_v v
on v.to_doc_id = t.doc_id
and v.branch_id = 1
and v.ref_typ_cd in ('CONREF', 'KBA')
group by t.doc_id; 
```

这假设您想知道何时`doc_id`不使用 a，因此您需要类似`doc_id 1234 has 0`. 如果您不想看到那些，那么您可以使用内部连接而不是外部连接 - 基本上只是删除这个词`left`- 但如果是这种情况，那么您根本不需要加入，您可以这样做：

```
select 'doc_id ' || v.to_doc_id || ' has ' || count(*)
from kms_doc_ref_currnt_v v
where v.branch_id = 1
and v.ref_typ_cd in ('CONREF', 'KBA')
group by v.to_doc_id; 
```

除非存在*不在*`to_doc_id`另一个表中的值，这些值将包含在此查询的结果中，但如果表已连接，则将其排除。

# tsql - 这是什么 TSQL “..”

> ID：13002049
> 
> 赞同：2
> 
> 时间：2012-10-21T20:47:28.997
> 
> 标签：tsql

我用谷歌搜索并查看了 MSDN TSQL 参考，但无法找到关于“ **..** ”含义或作用的定义或解释。

***例子***

```
if OBJECT_ID('tempdb..#temp') is not null
drop table #temp 
```

您在解释或参考资源方面的帮助“..”以及如何使用它会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T20:50:05.257

它是告诉数据库使用默认模式名称 ( `dbo`) 的简写。

> 这只是意味着应该使用默认模式（dbo）。换句话说：
> 
> ```
> Customers..FirstName 
> ```
> 
> 是一样的
> 
> ```
> Customers.dbo.FirstName 
> ```

[http://www.sqlservercentral.com/Forums/Topic585446-338-1.aspx](http://www.sqlservercentral.com/Forums/Topic585446-338-1.aspx)

# c# - 文本框格式化为货币 C#.Net

> ID：13002050
> 
> 赞同：1
> 
> 时间：2012-10-21T20:47:30.650
> 
> 标签：c#, formatting, currency

我找不到适合我需要的答案。所以我想我可以向你们寻求帮助。

我有一个文本框，我想显示货币值`$0.00`或他们键入的任何值 ex: `$1,331.13`。我希望它更改选项卡索引事件的格式，还是在属性设置中以其他方式完成？

我应该在事件中放入什么？我在想它会是这样的：

```
string.Format("{0:c}", txtPaymentOwed.Text); 
```

我究竟做错了什么？任何建议的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T20:54:10.687

我猜这个问题与你传递给 String.Format 的对象类型有关

```
var s1 = string.Format("{0:c}", 3); //$3.00
var s2 = string.Format("{0:c}", "3"); //3 
```

尝试

```
var s = string.Format("{0:c}", Decimal.Parse(txtPaymentOwed.Text)); 
```

# javascript - 如何从 Dojo/Store 中检索所有记录？

> ID：13002051
> 
> 赞同：2
> 
> 时间：2012-10-21T20:47:36.680
> 
> 标签：javascript, dojo

有没有内置的方法来获取 dojo/store（尤其是 dojo/MemoryStore）中的所有记录？就像是：

```
store.query('*'); 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T01:55:39.387

解决方案很简单。调用 Store 实例的*查询*方法。

```
store.query(); 
```

这里是dojo/store/util/SimpleQueryEngine的源码。版本 Dojo 1.8。如您所见，如果*查询**未定义*，它将始终返回*True*。

 **```
 switch(typeof query){
    default:
        ...

    case "object": case "undefined":
        var queryObject = query;
        query = function(object){
            for(var key in queryObject){
                var required = queryObject[key];
                if(required && required.test){
                    // an object can provide a test method, which makes it work with regex
                    if(!required.test(object[key], object)){
                        return false;
                    }
                }else if(required != object[key]){
                    return false;
                }
            }
            return true;
        };
        break;
    case "string":
        ...

    case "function":
        ...
}   
function execute(array){
    // execute the whole query, first we filter
    var results = arrayUtil.filter(array, query);

    ...
    ...

    return results;
} 
```

如果文档混淆或丢失，则有必要阅读 dojo 源代码。希望答案会有所帮助。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:02:14.850

似乎答案非常简单。您只需直接访问 data 属性。

```
var allData = store.data; 
```

这适用于 MemoryStores。我不知道它是否适用于需要远程加载数据的商店。**

# actionscript-3 - 从打包的空气桌面应用程序中获取黑屏

> ID：13002056
> 
> 赞同：0
> 
> 时间：2012-10-21T20:48:04.253
> 
> 标签：actionscript-3, air, screen

我正在开发一个打算与 AIR 一起发布的 as3 应用程序。我使用 4.6 版的 Flex SDK 和 eclipse 的 flash builder 插件。我可以通过 eclipse 启动/调试我的应用程序，没有任何问题。我导出了应用程序的有效版本并获取了我的 air 安装程序。当我安装并启动我的应用程序时，我得到一个空白屏幕......我不知道如何调试它。似乎我错过了发布配置中的某些内容，但我不知道是什么。我已经在网上搜索了几个小时，但没有找到任何解决方案，希望有人可以在这里帮助我！

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:04:06.947

这只是一个真正的 as3 错误，在调试模式下没有出现......当在 AIR 应用程序上允许调试模式时，我了解到不能在 SimpleButton 上设置属性 mouseChildren。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:41:49.867

我的应用程序遇到了同样的问题，我终于找到了一种在包应用程序中显示错误的方法：

您只需将一个名为的文件添加`debug`到您的 app/META-INF/AIR 文件夹中。

有关详细信息，请参阅[Adob​​e 食谱](http://cookbooks.adobe.com/post_Show_debug_error_window_of_installed_AIR_applicati-13206.html)。

# php - .htaccess 使用多个参数时重写错误

> ID：13002058
> 
> 赞同：0
> 
> 时间：2012-10-21T20:48:10.650
> 
> 标签：php, .htaccess, mod-rewrite

我的 .htaccess 中有这个：

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule . /index.php 
```

这就是我使用参数的方式：

```
<?php
    $request = $_SERVER['REQUEST_URI'];
    $request = substr($request,1);
    $params = explode('/', $request);
    $safe_pages = array('page1','page2','page3');
    if(in_array($params[0],$safe_pages))
            {
                include($params[0].'.php');
            }else
            {
                include('404.php');
            }
?> 
```

假设我的网站是：www.site.com

www.site.com/page -> 完美运行

www.site.com/page/parameter -> 不加载任何 CSS 或图像，因为它在 root/page 而不是 root/ 中查找它们

我尝试对我的 css 和图像使用绝对链接，但它仍然不起作用，所以我猜问题出在 .htaccess 中，或者我遗漏了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:56:03.847

采用

```
<base href="http://absolute_path_here/"> 
```

在您的 HTML 之前关闭`</head>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T21:00:34.480

问题不在于 htaccess 重写规则，而在于您的 html - 指向静态内容（如 css、图像或脚本）的链接应该以斜杠开头，以便与域相关。所以而不是

```
<link href="css/style.css" />
<script src="js/script.js"><script> 
```

采用

```
<link href="/css/style.css" />
<script src="/js/script.js"><script> 
```

其他方法是使用`base`标签，但它会破坏页面上的命名锚点

# python - 打印一个列表，然后跨越

> ID：13002059
> 
> 赞同：2
> 
> 时间：2012-10-21T20:48:16.337
> 
> 标签：python, list-comprehension

你如何在 Python 中打印一个列表然后再打印？

```
l = [v1, v2, v3, v4, v5, v6, v7, v8, v9, v10, v11, v12, v13, v14]

v1 v4 v7 v10 v13  
v2 v5 v8 v11 v14  
v3 v6 v9 v12 
```

列表的长度可能会有所不同，但现在我想以 5 列格式打印。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T20:59:35.257

像这样的东西应该工作：

```
>>> def print_list_matrix(lst, row_num):
...     for i in range(row_num):
...         print ' '.join(lst[i::row_num])
... 
>>> print_list_matrix(lst, 3)
v1 v4 v7 v10 v13
v2 v5 v8 v11 v14
v3 v6 v9 v12
>>> print_list_matrix(lst, 4)
v1 v5 v9 v13
v2 v6 v10 v14
v3 v7 v11
v4 v8 v12 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T21:31:28.777

```
L = ['v1', 'v2', 'v3', 'v4', 'v5', 'v6', 'v7', 'v8', 'v9', 'v10', 'v11', 'v12', 'v13', 'v14']
numRows = 3
matrix = [L[numRows*i: numRows*(i+1)] for i in range((len(L)/numRows)+1)]
for row in itertools.izip_longest(*matrix):
    print ' '.join(str(i) for i in row if i is not None)

In [143]: L = ['v1', 'v2', 'v3', 'v4', 'v5', 'v6', 'v7', 'v8', 'v9', 'v10', 'v11', 'v12', 'v13', 'v14']

In [144]: numRows = 3

In [145]: matrix = [L[numRows*i: numRows*(i+1)] for i in range((len(L)/numRows)+1)]

In [146]: for row in itertools.izip_longest(*matrix):
   .....:     print ' '.join(str(i) for i in row if i is not None)
   .....:     
v1 v4 v7 v10 v13
v2 v5 v8 v11 v14
v3 v6 v9 v12 
```

# mysql - 如何选择一个表中的记录而不是另一个具有多个 PKID 的记录？

> ID：13002062
> 
> 赞同：1
> 
> 时间：2012-10-21T20:48:38.373
> 
> 标签：mysql, sql, join

这是我的设置：

表`records`包含多个（多于两个）PKID 列以及其他一些列。

表`cached_records`只有两列，与 的两个 PKID 相同`records`。

例如，假设`records`PKID 为“keyA”、“keyB”和“keyC”，并且`cached_records`只有“keyA”和“keyB”。

我需要从`records`表中提取相应的 PKID（因此，'keyA' 和 'keyB'）不在`cached_records`表中的行。

如果我只使用一个 PKID，我知道这项任务会多么简单：

```
SELECT
    pkid
FROM
    records
WHERE
    pkid NOT IN (SELECT pkid FROM cached_records) 
```

但是，有两个 PKID 的事实意味着我不能使用简单的`NOT IN`. 这是我目前拥有的：

```
SELECT
    `keys`.`keyA` AS `keyA`,
    `keys`.`keyB` AS `keyB`
FROM
    (
        SELECT DISTINCT
            `keyA`,
            `keyB`
        FROM
            `records`
    ) AS `keys`
        LEFT JOIN
                `cached_records` AS `cached`
            ON
                    `keys`.`keyA` = `cached`.`keyA`
                AND
                    `keys`.`keyB` = `cached`.`keyB`
WHERE
    (
            `cached`.`keyA` IS NULL
        AND
            `cached`.`keyB` IS NULL
    ) 
```

（这`DISTINCT`是需要的，因为我只从`records`表中获取多个 PKID 中的两个，因此可能存在重复，我真的不需要重复；未使用“keyC”，它有助于确定记录的唯一性）。

上面的这个查询工作得很好，但是，随着`cached_records`表的增长，查询需要越来越长的时间来处理（我们现在正在谈论几分钟，有时需要足够长的时间以至于我的代码挂起和崩溃）。

所以，我想知道最有效的方法是使用多个 PKIDS 而不是一个...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:23:39.493

这应该更快：

```
SELECT  DISTINCT
    `records`.`keyA` AS `keyA`,
    `records`.`keyB` AS `keyB`
FROM
    `records`
        LEFT JOIN
                `cached_records` AS `cached`
            ON
                    `records`.`keyA` = `cached`.`keyA`
                AND
                    `records`.`keyB` = `cached`.`keyB`
WHERE
            `cached`.`keyA` IS NULL -- one is enough here 
```

笔记：

*   将查询用作表，您会损失很多性能。您可以在最外面的 SELECT 中执行不同的操作。
*   检查两个键之一是否为空就足够了，因为没有一个可以为空
*   您应该验证`keyA`和`keyB`列是否属于同一类型，并且不会发生转换（在工作实时代码中可以看到......）
*   您应该在表上有适当的索引。此查询的分钟数表明正在发生可怕的事情......（或疯狂的数据量）

# iphone - UITableView 滚动 UINavigationBar

> ID：13002064
> 
> 赞同：2
> 
> 时间：2012-10-21T20:48:52.963
> 
> 标签：iphone, ios, xcode, uitableview, uinavigationbar

如何根据 UITableView 滚动滚动我的 UINavigationBar，我的意思是：

*   当用户向下滚动 UITableView 时，UINavigationBar 应该随着 UITableView 滚动并消失；
*   当用户向上滚动 UITableView 时，UINavigationBar 应该固定在视图的顶部。

我想要与这个[问题](https://stackoverflow.com/questions/4955974/uisearchbar-on-the-top-of-uitableview-which-can-hide-but-stay-close-to-uinavigat)类似的效果，但我需要对 UINavigationBar 做同样的效果，而不是 UISearchBar，我已经尝试了链接中的代码。请任何代码或源代码将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-09T17:03:49.237

您可以签出[此库](https://github.com/andreamazz/AMScrollingNavbar)的代码。它的行为略有不同（它模仿了 Chrome ios7 应用程序），但您可以轻松地修改导航栏处理以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:15:49.453

我发现了一个有趣的帖子，可能会有所帮助。 [http://horseshoe7.wordpress.com/2012/05/18/uinavigationbar-that-scrolls-away/](http://horseshoe7.wordpress.com/2012/05/18/uinavigationbar-that-scrolls-away/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T21:54:25.443

我会通过隐藏`navigationBar`的`ViewController`并`UINavigationBar`在`tableView`.

# android - HttpServlet 在 doPost() 中从 Android 客户端接收 Null

> ID：13002065
> 
> 赞同：-1
> 
> 时间：2012-10-21T20:48:52.560
> 
> 标签：android, jakarta-ee, servlets

我正在尝试将一些数据从 Android 客户端发送到 HttpServlet。我的Servlet代码如下

```
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class DBServlet extends HttpServlet {
private static final long serialVersionUID = 1L;
Connection connection= null;   

/**
 * @see HttpServlet#HttpServlet()
 */
public DBServlet() {
        super();
}

/**
 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
 */
protected void doGet(HttpServletRequest request, HttpServletResponse response) 
        throws ServletException, IOException {

    doPost(request, response);
}

/**
 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
 */
protected void doPost(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {

    if(request.getParameterNames().hasMoreElements()){
                insertRecord(request, getDbConnection());
            }
            else{ System.out.println("Servlet Started First Time"); }

}

/**
 * Return database connection
 * @return
 */
private Connection getDbConnection(){
        String connectionURL = "jdbc:mysql://127.0.0.1:3306/testDB";

        try {

            Class.forName("com.mysql.jdbc.Driver");
            connection = DriverManager.getConnection(connectionURL, "root", "");

        } catch (SQLException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return connection;  
}

/**
 * Insert record in database
 * @param request
 * @param connection
 */
private void insertRecord(HttpServletRequest request, Connection connection){   

            System.out.println("===== Received Record =====");

            PreparedStatement stmt;

            try {
                stmt = connection.prepareStatement("insert into users(Name,email,password) values(?,?,?)");
                stmt.setString(1, request.getParameter("name"));
                stmt.setString(2, request.getParameter("e-mail"));
                stmt.setString(3, request.getParameter("password"));

                int i= stmt.executeUpdate();

                if(i != 0){
                    System.out.println("data inserted !!!");
                }
                else{
                    System.out.println("data failed to insert");
                }

            } catch (SQLException e) {
                e.printStackTrace();
            }

            finally{

                try {
                    connection.close();
                } catch (SQLException e) {

                    e.printStackTrace();
                }
            }
    }
} 
```

我的安卓代码是

```
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.ArrayList;

import org.apache.http.NameValuePair;

import org.apache.http.message.BasicNameValuePair;

import com.example.messenger.R;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class SignUp extends Activity {

Button register;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sign_up);

    register = (Button)findViewById(R.id.register);

    register.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Log.v("OnClick", "=== onClick ===");
            registerUser();

        }
    });
}

@SuppressLint({ "NewApi", "NewApi", "NewApi" })
private void registerUser(){

        String name= ((EditText)findViewById(R.id.name)).getText().toString();
        String email= ((EditText)findViewById(R.id.email)).getText().toString();
        String password= ((EditText)findViewById(R.id.password)).getText().toString();

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("name", name));
        nameValuePairs.add(new BasicNameValuePair("email", email));
        nameValuePairs.add(new BasicNameValuePair("password", password));

        try {

            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy);

            URL url=new URL("http://192.168.1.10:8080/DBservlet/DBServlet");
            HttpURLConnection con = (HttpURLConnection)url.openConnection();
            con.setDoOutput(true);
            con.setRequestMethod("POST");
            DataOutputStream dos=new DataOutputStream(con.getOutputStream());
            dos.writeBytes(name);
            dos.flush();
            dos.close();

}  catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

}

} 
```

问题是，当我运行“Servlet”时，我得到输出“Servlet Started First Time”，这没问题，但是当我运行我的 android 客户端并在 EditText 字段中写入一些数据并按下注册按钮时，没有任何反应。'Servlet' 什么也没收到。请让我知道如何解决这个问题。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:23:44.873

您的 servlet 在功能上看起来不错（设计技术上不是，但那是另一回事）。但是你的 Android 端看起来肯定不好。

这，

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("name", name));
nameValuePairs.add(new BasicNameValuePair("email", email));
nameValuePairs.add(new BasicNameValuePair("password", password)); 
```

`HttpClient`是在使用 Android 内置 Apache API发送 HTTP 请求之前准备请求参数的方式。

但在这儿，

```
URL url=new URL("http://192.168.1.10:8080/DBservlet/DBServlet");
HttpURLConnection con = (HttpURLConnection)url.openConnection();
con.setDoOutput(true);
con.setRequestMethod("POST");
DataOutputStream dos=new DataOutputStream(con.getOutputStream());
dos.writeBytes(name);
dos.flush();
dos.close(); 
```

但是，您正在使用 Java SE 内置`URLConnection`API 发送 HTTP 请求。然后实际上以一种糟糕的方式；您发送的不是正确的`application/x-www-form-urlendocded`查询字符串，而是平台默认编码中的单个字符串值。在`DataOutputStream`这种情况下，这完全没有意义，你根本没有创建`.dat`文件。这感觉太像“roseindia.net-snippet”了。如果您确实在阅读那个糟糕的网站，请从现在开始将其列入终生黑名单。

看起来您正在混合在 Android 中发送 HTTP POST 请求的*不同方法。*

1.  [使用`HttpClient`API](https://stackoverflow.com/questions/4543894/android-java-http-post-request/4544026#4544026)
2.  [使用`URLConnection`API](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)

您应该选择其中一个并坚持下去。上面的链接指向堆栈溢出答案风格的具体示例。

# probability - 我需要多少次选择随机数 [1,N] 才能得到特定的数字 k

> ID：13002068
> 
> 赞同：0
> 
> 时间：2012-10-21T20:49:04.707
> 
> 标签：probability

我正在努力证明一些关于概率和统计的东西。

我需要多少次从 [1,N] 中选择一个随机数来获得特定的数字 k，其中 k 在 [1,N]

```
start = random(1,N);
count = 1;
do
{
   end = random(1,N);
   count++;
}while (start!=end); 
```

我的实验得出的结论是，如果我对相同的 N 值重复上述程序 100 次，那么计数的平均值 ~ N。我不知道如何从理论上证明这一点。

任何人都可以帮助我证明这一点。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:55:36.040

每次你在`1`和之间选择一个随机数`N`，你就有一个得到等于的**概率**，和一个得到不同的等于的概率。`k``1/N``(N-1)/N`

一旦你知道了这一点，你就可以计算进入的概率`k`：

*   1个镜头：`P1 = 1/N`
*   2个镜头：`P2 = (N-1)/N * 1/N`
*   3个镜头：`P3 = (N-1/N * (N-1)/N * 1/N`
*   ...

您必须选择一个随机数才能获得的预期次数`k`是：

```
1 * P1 + 2 * P2 + 3 * P3 + 4 * P4... 
```

这是一个收敛到 value 的级数`N`。

# c# - 如何在 MVC3 禁止的 403 上返回正确的消息？

> ID：13002069
> 
> 赞同：3
> 
> 时间：2012-10-21T20:49:05.053
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我知道我可以填写使用 Web API 框架的`ReasonPhrase`属性。`HttpResponseMessage`但是我怎样才能对普通的“MVC”做同样的事情呢？

这是我当前的代码：

```
if (filterContext.Exception != null && filterContext.Exception is ArgumentException) 
{
    filterContext.HttpContext.Response.StatusCode = 403;
    filterContext.HttpContext.Response.StatusDescription = filterContext.Exception.Message;
    //filterContext.HttpContext.Response.Write(filterContext.Exception.Message);
    filterContext.ExceptionHandled = true;
    filterContext.Exception = null;
} 
```

我也知道注释行会在响应正文中向客户端提供错误消息。我不知道这是否是最佳做法。

我想做的和这个[链接](http://www.dotnetspeaks.com/DisplayArticle.aspx?ID=238)一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:11:35.553

如果您收到特定错误，请不要直接在您的 webcofig 中处理错误 webcofig 应该重定向到特定错误页面

```
 <customErrors defaultRedirect="GenericError.htm" mode="RemoteOnly">
  <error statusCode="403" redirect="pagenotfoundlError.htm"/>
</customErrors> 
```

# backbone.js - Chrome javascript 工具：全局、闭包和局部作用域

> ID：13002072
> 
> 赞同：2
> 
> 时间：2012-10-21T20:49:10.470
> 
> 标签：backbone.js, google-chrome-devtools

我在 Chrome javascript 控制台中使用了一个主干日历应用程序（它允许您在日历上发布事件），并在右侧（见图）它有一个显示本地、关闭和全局范围的面板。在这个特定的应用程序中，我在 EventsView 中设置了调试器，Chrome 告诉我 Event（一个模型）和 EventView（一个特定事件的视图）在 Closure 范围内。

我有点理解全局、封闭和局部。全局范围可以是全局命名空间中的任何内容。本地是当前范围内的所有变量。你能用实际的术语解释一下 Event 和 EventView 处于封闭范围内意味着什么，以及这将如何提高我对应用程序如何工作的理解......这能给我提供什么见解？此外，您会注意到在 Local 范围内，“this”被称为“child”。为什么？父母会是什么？

![在此处输入图像描述](../Images/1c172a9386c56ab44d151ee626fd3c14.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T21:01:25.587

在此处阅读有关闭包的内容：[JavaScript 闭包如何工作？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

但简短的回答，假设您在下面第 6 行的断点处暂停，变量“全局”将出现在调试工具的全局变量部分，“闭包”出现在“闭包”部分，“本地”出现在“局部”部分：

```
1 var global = 'foo';
2
3 function bar() {
4   var closure = 'baz';
5   function oof() {
6       var local = 'rab'; // stopped on a breakpoint on this line
7   }
8 } 
```

调试时，了解需要查看多少个闭包才能找到变量定义、它可能适用于多少其他上下文、在本地范围内更改它的后果等会很有帮助。

# javascript - 无法让 jQuery 在现场工作

> ID：13002073
> 
> 赞同：2
> 
> 时间：2012-10-21T20:49:22.333
> 
> 标签：javascript, jquery

好的，我已经在一个朋友的网站上工作了很长一段时间。我的编码技能是 .. 有问题的，而且我遇到了很多问题。

目前，我网站上的 jQuery 只是停止工作，我找不到原因，我已尽我所能尝试让它工作。（我在互联网上遵循了无数指南，用于故障排除等，但我仍然无法让它工作）

-编辑-我已将所有文件移至代码顶部。但问题仍然存在。

此致，马尔莫克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T20:55:52.040

您正在尝试在加载 jQuery.js 之前使用 jQuery 代码。

jQuery.js 必须在任何依赖代码或插件之前加载。使用浏览器控制台并查看页面加载时引发的错误。`"$" is not defined`错误是 jQuery 加载问题的快速指示

这样想吧。jQuery 库包含许多函数，包括定义“$”。如果这些函数或“$”在您调用它们时不可用，则它们是未定义的并且会引发错误并且您的代码将无法工作

一旦你在其他代码之前有 jQuery 脚本标签，如果你最近添加了也使用“$”别名的原型库，你可能仍然会遇到麻烦。这可能会导致冲突，但有一种解决方法`jQuery.noConflict()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T21:11:29.420

看起来你正在混合 mootools 和 jquery。`$`请解决 jquery 的命名空间和 mootools 的命名空间之间的冲突`$`。

谷歌“jquery 没有冲突”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T20:55:55.530

很奇怪，我建议您将源代码设置为 jQuery 到这里的网站：http: [//code.jquery.com/jquery-1.8.2.min.js](http://code.jquery.com/jquery-1.8.2.min.js) 似乎响应时间更快，并且在您的源代码中您似乎链接 jQuery 两次，这可能会导致一些问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T21:05:49.190

您`$`也被另一个脚本覆盖。最好的，你用`jQuery.noConflict()`这个

*   [http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

然后你可以把你的代码放在这样的闭包中：

```
(function(){

    var $ = jQuery;

    // jQuery code using $

})(this); 
```

# html - iPhone / Pad上令人讨厌的右白带

> ID：13002087
> 
> 赞同：0
> 
> 时间：2012-10-21T20:50:53.160
> 
> 标签：html, ios, css

[makepp](http://makepp.sf.net/)的网站有一个简单的 3 窗格布局，带有标题和窄导航，通常向左浮动（但可以通过单击其第一个 <li> 中的 ↔ 按钮向右浮动，或用 × 隐藏以适应窄屏幕）：

```
+------------------------------+
+ div id="_head"               |
+ width: 100%                  |
+-------------+----------------+
+ ul          | div id="_main" |
+ width: 10em | width: auto    |
+-------------+----------------+
+ clear: both                  |
+------------------------------+ 
```

这个页面验证（除了一些玩 schema.org 的人）。除 iPhone/Pad 外，所有浏览器都能正确显示。在那里，我在右边看到很小的文字和一个无用的白色带（可能和 ul 一样宽？？？）。

现在我发现有几个人被这个 iPhone 错误绊倒了，使用 min-width 100% 之类的解决方案，这似乎不起作用，或者一些特定于苹果的元标题，这很怪诞——就像设计网络一样荒谬IE6...

在一家 Apple 商店中，我发现 MacOS 上的 safari 也存在这种情况，但可以很好地将白色条带放在窗外——你必须横向滚动才能看到它。我设法下载了萤火虫，但不知何故它不知道这个白色区域，它似乎不属于任何 DOM 部分。

从那以后，我也发现 Android 也是如此：如果我向右滚动，我会得到这个空白区域。而且（只是现在？）Chromium 20 也是如此。这意味着我可以在本地进行调试，因此我在我的草图中的 4 个元素中的每一个上都设置了一个红色背景：没有一个伸入白色带。

但是，如果我添加`html{background-color:red;width:100%;min-width:100%;max-width:100%;}`了那个，则条带为红色，宽度将被忽略。

那么，让这个页面无处不在的干净解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T15:30:48.233

好吧，我找错地方了。并排的 _main 和 ul 可以向左或向右浮动或被按钮关闭，很难做到正确。我不知何故认为这是罪魁祸首。

但现在我发现了一个完全不同的问题：标题中的选项卡是 css sprites，而 iPhone/iPad 有一个 rect 剪辑错误。他们在光学上是正确的，但在幕后他们仍然使用未剪辑的图像来计算整体`<html>`尺寸。而且由于我的组合精灵比显示正确的部分更宽，所以有一个幻影伸出来。我已经将精灵重新排列成两行，现在很好！

（Webkit 是另外一个需要注册才能花时间解释他们的错误的网站——烦人！如果有人想从这里获取这个，可以通过下载并安装[makepp 到 2.0.98.2](http://sourceforge.net/projects/makepp/files/2.1/snapshots/)来复制它。）

# c++ - C++ 链表错误：需要左值作为赋值的左操作数

> ID：13002088
> 
> 赞同：0
> 
> 时间：2012-10-21T20:51:00.873
> 
> 标签：c++, linked-list

好吧，我正在尝试用 C++ 编写一个处理双链表的程序。具体来说，该列表包含一组艺术品对象作为其节点。在这个特定的函数中，我试图通过“sell”命令删除节点，但我在几行上收到了这个错误：

错误：需要左值作为赋值的左操作数

我已经完成了我的研究，我发现这种类型的错误通常会出现在您在实际想要比较它们时尝试分配值，或者如果您尝试将值分配给常量。但是，我不认为这是我的问题。这是问题代码：

```
// Sell At Function: This function sells the specified artwork.
void CR_ArtCollection::sell_at(string title, ostream& log)
{
    CR_ArtWorks* walker = first;

    while(walker != NULL)
    {
        if(title == walker->get_title())
        {
            walker->get_next()->get_prev() = walker->get_prev(); // Error
            walker->get_prev()->get_next() = walker->get_next(); // Error
            delete walker;
            walker = NULL;
        }
        else walker = walker->get_next();
    }
} 
```

如果有人能指出我正确的方向，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T20:53:56.370

这很明显 -`get_prev`并`get_next`返回**r-values**。这意味着您不能分配给他们。

检查您的界面是否有类似于`set_next`and的方法，`set_prev`并将其称为：

```
walker->get_next()->set_prev(walker->get_prev());
walker->get_prev()->set_next(walker->get_next()); 
```

顾名思义 - `get_xxxx`，这些方法在那里，所以你可以**获取**值，而不是设置它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:56:30.820

好吧，如果函数返回原始类型，例如整数或指针，则分配给函数的结果是不合法的。这就是你的错误。

一种可能性是更改您的 get_prev 和 get_next 函数以返回对指针的引用。

但我不建议你这样做。您的代码显然需要重新设计。您应该将擦除功能添加到您的链表类。这样，指针操作代码将位于它所属的 CR_ArtWorks 类中，而不是它不属于的 CR_ArtCollection 类中。

# node.js - IIS7：将请求重定向到内部端口

> ID：13002090
> 
> 赞同：0
> 
> 时间：2012-10-21T20:51:18.847
> 
> 标签：node.js, redirect, iis-7, port

我有一个 NodeJS 应用程序。我想为我的每个客户创建这个应用程序的不同实例。我最初的想法是让每个实例位于不同的端口，然后启动一个 Node 实例来监听这些端口：

客户端 1：[http://client1.myapp:81](http://client1.myapp:81) （我的 Node 应用程序监听端口 81 的实例）

客户端 2：[http://client2.myapp:82](http://client2.myapp:82) （我的 Node 应用程序监听端口 82 的实例）

...

我不想在外部打开这么多端口，所以我想知道我的客户是否可以通过端口 80 访问他们的应用程序：

客户端 1：[http://client1.myapp](http://client1.myapp)

客户端 2：[http://client2.myapp](http://client2.myapp)

...

然后让 IIS 将每个请求重定向到其相应的 INTERNAL 端口，特定的 NodeJS 应用程序实例将在该端口进行侦听。

这样我只需要在外部打开端口 80。

这可能吗？这是常见的做法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:33:21.587

您可以按照您在第二个示例（子域）中的建议进行操作。您需要的是一个有效的域和一个静态 IP 地址。您需要添加一条 A 记录（到您的 DNS 服务器）以将您的所有子域重定向到您的 IP（即 *.your_domain.com --> 您的 IP 地址）

然后，对于您的每个客户，您必须使用他的标题创建一个站点 - clientX.your_domain.com

这是常见的做法。我也使用这种方法向我的客户展示他们的网站。

# c# - CodeDom 编译类型或命名空间错误

> ID：13002091
> 
> 赞同：2
> 
> 时间：2012-10-21T20:51:35.370
> 
> 标签：c#, namespaces, codedom

我有一个在 C# 中使用 WPF 的程序，它使用 .NET 4 Framework（不是客户端配置文件），它编译了一个名为“Source.txt”的源文件。但是，无论何时编译它，我都会收到此错误“错误 CS02345：名称空间‘System’中不存在类型或名称空间名称‘Windows’（您是否缺少程序集引用？）”。没有创建文件。

当我检查 Source.txt 文件中的行时，这些是给出错误的行：

```
using System.Windows.Linq;
using System.Windows;
using System.Windows.Input;
using System.Windows.Forms;
using System.Management; 
```

这是我用来从主程序编译它的代码：

```
CompilerParameters Params = new CompilerParameters();
            Params.GenerateExecutable = true;
            Params.ReferencedAssemblies.Add("System.dll");
            Params.OutputAssembly = ServerNameBox.Text;
            Params.CompilerOptions = " /target:winexe";    

            string Source = compileSource;
            CompilerResults Results = new CSharpCodeProvider().CompileAssemblyFromSource(Params, Source);

            if (Results.Errors.Count > 0)
            {
                foreach (CompilerError err in Results.Errors)
                    System.Windows.Forms.MessageBox.Show(err.ToString());
            }
            else System.Windows.Forms.MessageBox.Show("Sucessfully Compiled Program!"); 
```

如代码所示，我希望将此程序编译为 Windows 窗体/GUI 应用程序（“/target:winexe”）；

如果这些信息不充分，请询问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T20:55:12.210

正如错误清楚地暗示的那样，您需要添加`System.Windows.Forms.dll`到`ReferencedAssemblies`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T21:04:56.533

You need to add at least the following references:

```
Params.ReferencedAssemblies.Add("PresentationFramework.dll");
Params.ReferencedAssemblies.Add("System.Windows.Forms.dll");
Params.ReferencedAssemblies.Add("System.Management.dll");
Params.ReferencedAssemblies.Add("PresentationCore.dll"); 
```

Also I don't believe **System.Windows.Linq** is an actual namespace. If you need LINQ it should be System.Linq and that is in System.Core.dll

# php - OOP 组合 - 将类作为单独的实例和循环对象处理

> ID：13002095
> 
> 赞同：1
> 
> 时间：2012-10-21T20:51:53.730
> 
> 标签：php, oop

我在 PHP 中有一个对象，它由以下对象组成：

```
// Settlement (DB Fields: id, name)
id = 1, name = 'Meep', jobs = array()
-
// Job (DB Fields: id, action, settlement_id)
id = 1, action = 'build' 
```

所以我可以做类似的事情：`$settlement->getJobs()`它会返回一个数组`jobs`

在处理这些工作时，虽然我也需要了解和解。所以我有点困惑它应该如何存在。

a 是否应该`Job`包含 a`Settlement`然后执行类似的操作：`$job->getSettlement()`或者是否存在嵌套/组合的无限循环？

或者当我从数据库中获取实例来处理作业时，我是否应该首先获取`Settlement`包含`Job`要处理的对象以便它与以前相同？

在我的数据库中，`Job`附加到`Settlement`通过外键`settlement_id`，所以在我的`Job`实体中，我不确定我是否应该只存储`settlement_id`或整个存储，`Settlement`但是还有嵌套/组合循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:54:24.837

节点相互链接是完全可以接受的。你可以有一个它在对象内部的`Settlement`实例。`Job``Job`

# php - 如何安全地存储 MySQL 数据？

> ID：13002096
> 
> 赞同：0
> 
> 时间：2012-10-21T20:51:54.117
> 
> 标签：php, mysql, password-protection

> **可能重复：**
> [在 PHP 中保持 MySQL 凭据私有的最佳方法是什么？](https://stackoverflow.com/questions/12492192/what-is-the-best-way-to-keep-your-mysql-credentials-private-in-php)

我有一个网站，其中包含许多连接到 mysql 数据库的 .php 文件，它们在不同的域下运行，所以我有一个**mysql_data.php**文件（每个域具有不同的值），例如：

```
define("MYSQL_HOST","localhost");
define("MYSQL_USERNAME","root");
define("MYSQL_PASSWORD","etc"); 
```

然后其他 .php 文件使用此信息，例如：

```
require_once("mysql_data.php");

$mysql_host = MYSQL_HOST;
$mysql_database = MYSQL_DATABASE;
$mysql_user = MYSQL_USERNAME;
$mysql_password = MYSQL_PASSWORD;

$connection = @mysql_connect($mysql_host, $mysql_user, $mysql_password) or die(mysql_error());
$db = @mysql_select_db($mysql_database, $connection) or die(mysql_error()); 
```

这工作正常，除了关于安全性。可以轻松访问这个 mysql_data.php 文件（我猜）。那么存储这些数据的更安全的方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:03:37.560

1.  不要将 MySQL root 帐户用于 Web 应用程序。

2.  如果您正确安装了 PHP 并且服务器上没有安全问题 - 无法从外部获取 PHP 文件内容。

3.  访问[The New Boston](http://thenewboston.org)网站并观看一些关于 php 和 mysql 的教程视频。

# c# - 我可以将字符串存储在 并绑定它？

> ID：13002097
> 
> 赞同：0
> 
> 时间：2012-10-21T20:51:55.673
> 
> 标签：c#, windows-phone-7, xaml

我在几个页面上使用 Microsoft 的 AdControl ......但为了简化它，我想存储一次 ApplicationId 并将其作为资源读取。

是否可以在 App.xaml 中使用，然后在控件中设置绑定？但是怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:06:53.837

`"{StaticResource name}"`像你一样使用`<Page.Resources>`

要存储资源，请创建一个新`<ResourceDictionary>`in`<ResourceDictionary.MergedDictionaries>`并将您的资源放入其中。

例如：

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>

            <!-- 
                Styles that define common aspects of the platform look and feel
                Required by Visual Studio project and item templates
             -->
            <ResourceDictionary Source="Common/StandardStyles.xaml"/>
            <ResourceDictionary>
                <x:String x:Key="Foo">Bar</x:String>
            </ResourceDictionary>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

# css - 由于 CSS 延迟渲染，GWT/GWTP PopupDialog 并不总是居中

> ID：13002099
> 
> 赞同：2
> 
> 时间：2012-10-21T20:52:37.773
> 
> 标签：css, gwt, centering, gwt-platform, gwtp

我正在使用 GWT 2.4、GWTP 和 Chrome 22.0.1229.94 进行测试。我已经为这个问题苦苦挣扎了好几天。

在启动时，我使用扩展了 PopupViewImpl 的视图呈现自定义 PopupDialog。在重写的 onReveal() 方法中，我将对话框居中。GWTP 代码中心同步并使用 scheduleDeferred。

在开发模式下并在本地服务器上运行，一切都按预期工作：弹出对话框始终正确呈现和居中。我也在IE中测试过。

但是，当部署到 Internet 上的实时 Web 服务器时，我注意到当我使用 F5 刷新时，有时在脚本尝试使对话框居中之前未应用 CSS。这会导致测量错误，并且对话框未放置在中心。有趣的是，这似乎只是偶尔发生，通常是当浏览器在调用预定的延迟命令之前渲染所有 (CSS) 资源的速度不够快时。

所以，我已经尝试了以下方法：

1.  使用不同的技术加载 CSS（HTML 文件中的引用，GWT 模块中的引用，放入 CssResouce）
2.  使用 Scheduler.get().scheduleDeferred 作为默认代码的中心也是如此。
3.  在 onReveal 中调用 RootLayoutPanel.get().onResize() 以尝试在居中延迟之前触发一些布局。

我注意到 Chrome 和 IE 中的行为相同，因此它可能不是浏览器问题。我的问题是在哪里放置我的“中心”调用以确保在正确应用所有 CSS 之后调用它，或者我可以做些什么来强制 CSS 呈现？

谢谢！

这是 Presenter 扩展 PresenterWidget 中的 onReveal 代码：

```
@Override
protected void onReveal() {
    super.onReveal();

    // Hide loading image
    fireEvent(new HideApplicationLoadingImageEvent());

    // Reset message
    getView().setStatusMessage(null);

    // Center the popup
    getView().center();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:47:25.307

有方法 addToPopupSlot(child, boolean center); 如果您为 center 参数发送 true，它会在 GWTP 示例中将弹出窗口居中：- addToPopupSlot(widget, true)

# jsf - 自定义导航处理程序 - 未由 h:link 调用 handleNavigation

> ID：13002101
> 
> 赞同：0
> 
> 时间：2012-10-21T20:52:45.900
> 
> 标签：jsf, navigation

`handleNavigation(final FacesContext context, final String fromAction, final String outcome)`我的 h:link 组件没有调用来自我的自定义导航处理程序的句柄导航方法？

```
<h:link value="text" outcome="./target.xhtml?faces-redirect=true">
    <f:param name="param" value="#{var.prop}"/>
</h:link> 
```

使用 commandbutton 调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:17:21.390

`<h:link>`解析目标 URL 后不会发送 POST 请求。相反，它会`<h:link>`生成一个 HTML`<a>`元素，其中目标 URL 已经在`href`属性中，该属性又用于发送 GET 请求。此 URL 由 获得[`ViewHandler#getBookmarkableURL()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ViewHandler.html#getBookmarkableURL%28javax.faces.context.FacesContext,%20java.lang.String,%20java.util.Map,%20boolean%29)，而后者又委托给[`ViewHandler#getActionURL()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ViewHandler.html#getActionURL%28javax.faces.context.FacesContext,%20java.lang.String%29)。

如果您使用的是 Mojarra，您可以在`OutcomeTargetLinkRenderer#renderAsActive()`.

您可以`ViewHandler`通过扩展[`ViewHandlerWrapper`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ViewHandlerWrapper.html)并将其注册为`<application><view-handler>`.

# ruby - 如何使用 Unicorn 运行基于 Rack 的应用程序（不是 Rails）

> ID：13002102
> 
> 赞同：4
> 
> 时间：2012-10-21T20:52:49.760
> 
> 标签：ruby, rack, unicorn

如何使用 unicorn 运行基于 Rack 的应用程序（不是 Rails）？假设我有一个名为 的“hello world”响应简单机架应用程序`server.ru`，并且在同一目录中的配置文件名为`unicorn.conf`，我应该如何运行它？例如，在 Thin 中，我会执行以下操作：

```
bundle exec rackup server.ru -s thin -E production -p 4001 
```

在独角兽下我将如何做同样的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T21:40:40.997

Unicorn 没有对 Rails 3+ 应用程序进行任何特殊处理，因此 Rails 3+ 应用程序和非 Rails Rack 应用程序的行为完全相同。赶紧跑

```
unicorn 
```

在您的应用程序的根目录中。要使用特定端口运行，请使用端口传递`-p/--port`：

```
unicorn -p 4001 
```

您还可以指定机架文件：

```
unicorn server.ru 
```

您可以通过运行查看所有选项`unicorn --help`。当然，您应该`bundle exec`根据设置的需要预先添加这些命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T06:39:58.613

您可以像这样为独角兽制作一个设置文件：

```
working_directory "/path/to/your/app"
listen 4001
pid "/tmp/unicorn.pid" 
```

然后使用以下命令启动 unicorn：

```
unicorn -c /path/to/your/setting/file.rb 
```

# c# - C#.Net Interview 从一个类中创建一个对象

> ID：13002103
> 
> 赞同：1
> 
> 时间：2012-10-21T20:52:52.023
> 
> 标签：c#, oop

刚刚完成我学校教育的第一部分，我正在找工作。我参加了一个 C#.net 开发人员的面试。在面试期间，我被要求创建一个具有两个属性的类。然后以 asp.net 形式从该类创建一个对象。所以我创建了一个带有两个字符串的构造函数的类，设置对象的属性。在 asp.net 页面中，我添加了两个文本框和一个按钮。在按钮的单击方法中，我输入了该行`Class whatever = new Class(textbox1.text, textbox2.text)`

所以在我完成后，我看着正在采访我的先生们，想知道他们为什么看着我，就像我疯了一样。所以我问，“你不认为这行得通吗？” 他们回答说：“运行它，我们会看到”。好的，所以我运行了程序，在文本框中输入了一些文本并单击了按钮。你猜怎么着，什么都没发生，哈哈。这时我说：“如果你愿意，我可以将对象输出到一些标签或其他东西上。” 他们看着我，好像我做错了什么一样说：“不，只要在这一行上放一个断点，然后再次运行程序。” 所以我们再次运行程序，断点显示对象是用文本创建的。然后我听到“嗯，这有效。” 那时我调到他们那里说：“ 有谁知道这些家伙想从我这里得到什么？也许在下一次采访中，我不会再被这样难住了。有谁知道这些家伙想从我这里得到什么？也许在下一次采访中，我不会再被这样难住了。

谢谢你的帮助，

克雷格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T20:57:50.757

请注意，构造函数是实例化对象的唯一方法。有不同的方法可以得到它，但最终构造函数总是被调用。你实例化它很好。

这对我提出了两个问题：

1.  您是否误解了问题并在此处错误地转述了问题？
2.  面试官真的傻吗？

如果是第一名，那就倒霉了。
如果它是第 2 位，如果我是你，如果你被提供，我不会接受这份工作！

构造对象的几种方法：

```
// Default constructor:
MyClass instance = new MyClass();

// overloaded constructor:
MyClass instance = new MyClass(val1, val2, valN);

// object initialiser constructor:
MyClass instance = new MyClass
{
    Val1 = val1,
    Val2 = val2
};

// runtime with given type
Type myClassType = typeof(MyClass); // this would be more dynamic (unknown at design time)
MyClass instance = Activator.CreateInstance(myClassType) as MyClass;

// runtime with reflection
Type myClassType = typeof(MyClass);
ConstructorInfo cstr = type.GetConstructor(Type.EmptyTypes);
MyClass instance = cstr.Invoke(new object[]()) as MyClass; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T20:57:40.530

可以以不同的方式创建对象，但我认为它们应该让您有机会在判断您之前以您知道的多种方式创建对象

这是一个

```
SomeClass whatever = new SomeClass
{
   property1 = textbox1.Text,
   property2 = textbox2.Text
} 
```

或者

```
SomeClass whatever = new SomeClass();
whatever.property1 = textbox1.Text;
whatever.property2 = textbox2.Text; 
```

第一个例子是最近的

# opencv - 面部表情变化

> ID：13002105
> 
> 赞同：0
> 
> 时间：2012-10-21T20:53:06.230
> 
> 标签：opencv, emgucv

我已经看过许多用于检测人脸情绪的示例和示例代码。我迫切需要一些算法来改变表达式。我是一个新的 OpenCV 学习者。如果可以使用 opencv 完成此图像处理，我也感到困惑？可以为此使用诸如 warpaffine() 之类的函数吗？如果有人可以指导我如何执行此操作，我将不胜感激。输入中性的面部表情并将其转换为微笑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:14:22.230

尝试使用[FaceAPI](http://www.seeingmachines.com/product/faceapi/)，它可以免费用于非商业目的，并且效果很好。它有据可查且易于使用。

# php - 将 $_SESSION 变量传递给包含的文件

> ID：13002110
> 
> 赞同：0
> 
> 时间：2012-10-21T20:53:40.223
> 
> 标签：php, file, session, include

我有第一个 PHP 文件：/home/www/subdomain1.domain.tld/file.php

```
<?php
    session_start();
    $_SESSION['foo']='bar';   
    include "/home/www/subdomain2.domain.tld/foo2.php";
 ?> 
```

和 /home/www/subdomain2.domain.tld/foo2.php：

```
<?php 
    session_start();
    echo $_SESSION['foo'];
?> 
```

第一个文件中的“包含”会生成“500 内部服务器错误”，我认为这是因为会话变量没有传递给包含的文件，我该如何解决？

谢谢亚历克斯

编辑：我**必须**使用会话变量才能在 subdomain2 上的每个 php 文件上使用这些变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:56:45.003

包含文件时不需要使用会话。这是具有相同命名空间的所有相同请求。

文件.php：

```
$foo = 'bar';

include 'foo2.php'; 
```

foo2.php

```
echo $foo; // returns 'bar' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:57:30.993

您不应该在第二个文件中开始会话。由于会话是在 file.php 中启动的，因此 foo2.php 已经可以使用它。

该错误可能是因为 PHP 输出了会话已启动的警告。

对于调试，添加`error_reporting(E_ALL); ini_set('display_errors', 1);`到您的第一个 PHP 脚本的开头。

你应该能够做到：

**文件.php**

```
<?php
    session_start();
    $_SESSION['foo']='bar';   
    include "/home/www/subdomain2.domain.tld/foo2.php"; 
```

**foo2.php**

我有第一个 PHP 文件：/home/www/subdomain1.domain.tld/file.php

和 /home/www/subdomain2.domain.tld/foo2.php：

```
<?php 
// session_start();  // remove, do not need this here
echo $_SESSION['foo']; 
```

# php - 将方法调用链接在一起

> ID：13002114
> 
> 赞同：1
> 
> 时间：2012-10-21T20:54:00.353
> 
> 标签：php, methods, method-chaining

例如这样的记录：`property3->property2->property1`对我来说是理解的，这意味着类的属性，是另一个类的对象，例如：

```
class a {
        public $property1 = "some";
}

class b {
    function __construct () {
        $this->property2 = new a();
    }           
}

$obj = new b();
echo $obj->property2->property1; 
```

这明白了。但我无法理解这样的记录：`method1()->method2()->method3()`

你能发布简单的例子，谁使用这些记录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T20:57:10.547

这意味着这些函数**返回**对象。例如，以下是可能的（假设 $pdo 是一个有效的 PDO 对象）：

```
$result = $pdo->query("SELECT * FROM `table`")->fetchAll(); 
```

这可能并不总是有利的，因为您：

1.  失去可读性。
2.  失去使用中间物体的能力。
3.  失去检查错误的能力，您指望返回您认为的方法。

    在此示例中，您只能以 an 的形式获取结果集`array`，但您无法访问`PDOStatement`由 . 返回的结果集`PDO::query()`。在这种情况下，它可能无关紧要，在某些情况下可能。

    此外，如果出现错误，`PDO::query()`可能会返回**BOOLEAN`false`**，这将给出无法解释的“`fetchAll()`在非对象上使用的方法”错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T20:58:28.133

一个简单的例子：

```
class A {

  function fooA() {
    echo "a...";
    return $this;
  }

  function fooB() {
    echo "b...";
    return $this;
  }

  function fooC() {
   echo "c...";
  }
}

$a = new A();
$a->fooA()->fooB()->fooC(); 
```

或者有几个类：

```
class A
{
  private $b;

  public function __construct()
  {
    $this->b = new B();
  }

  public function fooA()
  {
    echo "A...";
    return $this->b;
  }

}

class B
{

  public function fooB()
  {
    echo "B...";
  }

}

$a = new A();
$a->fooA()->fooB(); 
```

# javascript - 如何截取变量值

> ID：13002120
> 
> 赞同：2
> 
> 时间：2012-10-21T20:54:28.307
> 
> 标签：javascript, google-chrome-extension

我正在尝试创建一个 chrome 扩展来计算某个网页上显示的一些数字的平均值。网页使用此功能显示它们：

```
function MakeBody(Property, dValue, Color){
    document.write ("<tr>")
    document.write ("<td width='16'> &nbsp;</td>");
    document.write ("<td width='10'>&nbsp;</td>");
    document.write ("<td><p class='NormalText'>&nbsp;&nbsp;<font color='"+Color+"'>"+Property+"</font></p></td>");
    document.write ("<td><p class='NormalText'>&nbsp;&nbsp;<font color='"+Color+"'><b>"+dValue+"</font></b></p></td>");
    document.write ("<td width='16'>&nbsp;</td>");
    document.write ("</tr>");
} 
```

我需要截取并计算它们的平均值的值来自“dValue”变量。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:57:28.323

仅当您可以用`MakeBody`执行操作的新函数替换该函数，然后调用原始函数：

```
 // cache the original
var __MakeBody__ = MakeBody;

   // replace it with yours
MakeBody = function(Property, dValue, Color) {
    // manipulate 'dValue' here

        // invoke the original
    return __MakeBody__.call(this, Property, dValue, Color);
}; 
```

# vb.net - 无法将“System.Windows.Forms.Button”类型的对象转换为类型 >“System.Windows.Forms.TextBox”

> ID：13002128
> 
> 赞同：1
> 
> 时间：2012-10-21T20:55:38.703
> 
> 标签：vb.net

我写了一个函数来清空我表单中的所有文本框：

```
Private Sub effacer()
        For Each t As TextBox In Me.Controls
            t.Text = Nothing
        Next
    End Sub 
```

但我有这个问题：

> 无法将“System.Windows.Forms.Button”类型的对象转换为“System.Windows.Forms.TextBox”类型。

我试图添加这个`If TypeOf t Is TextBox Then` ，但我遇到了同样的问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T20:58:28.133

该[`Controls`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controls%28v=vs.110%29.aspx)集合不仅包含TextBoxes，还包含表单的所有控件。

相反，您可以使用[`Enumerable.OfType`](http://Enumerable.OfType)find 和 cast all `TextBoxes`：

```
For Each txt As TextBox In Me.Controls.OfType(Of TextBox)()
    txt.Text = ""
Next 
```

如果你想以“老派”的方式做同样的事情：

```
For Each ctrl As Object In Me.Controls
    If TypeOf ctrl Is TextBox
        DirectCast(ctrl, TextBox).Text = ""
    End If
Next 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T20:57:33.990

```
For Each t As TextBox In Me.Controls 
```

此处的这一行尝试将每个控件强制转换为`TextBox`.
您需要将其更改为`As Control`，或用于`Me.Controls.OfType(Of TextBox)()`在迭代之前过滤集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-03T22:23:10.067

这是一行代码，它将清除 groupBox 中的所有 radioButtons，它附加到 button_click：

```
groupBoxName.Controls.OfType<RadioButton>().ToList().ForEach(p => p.Checked = false); 
```

使用适当的更改使其适应您的需求。

# c++ - 在 OpenGL 中添加阴影

> ID：13002130
> 
> 赞同：0
> 
> 时间：2012-10-21T20:55:52.590
> 
> 标签：c++, opengl, graphics, shadow

我有一个非常简单的代码，它只是绘制了一个建筑物，我想添加建筑物的阴影。我尝试了许多代码示例，但要么它们太复杂，要么绘制了很多对象。或者只是太模糊了。我怎样才能得到我的建筑物的阴影？

```
#include "GLee/GLee.h" //GL header file, including extensions
#include "glut.h"
#include <stdio.h>
#include <conio.h>
#include <math.h>
#include "tga.h"
#define WIN32_LEAN_AND_MEAN
#include <windows.h>
#include <stdio.h>
char  g_SelectedColor = 'w';
int   g_Width;
int   g_Height;
int a=0.0 ,b=0.0, c=500, d=0.0, e=0.0, f=0.0,g=0.0,h=1.0,i=0.0;

static int rotationAngle=0;
void init();
void myMouseFunction( int button, int state, int mouseX, int mouseY );
void myKeyboardFunction( unsigned char key, int mouseX, int mouseY );
void Reshape( int width, int height );
void timer( int val );
void display();
void drawBuilding();
void menu(int);
// Assign a default value
float light_diffuse[]   = { 0.8, 0.8, 0.8, 1.0 };
float light_ambient[]   = { 0.1, 1.1, 0.0, 0.0 };
float light_specular[]  = { 0.5, 0.5, 0.9, 1.0 };
float light_position[]  = { 0.0, 10.0, 0.0, 1.0 };
void selectMessage( int val )
{
    if(val==2)
    {
    glBegin(GL_POLYGON);
        glVertex3f(0.0,0.0,0.0);
        glVertex3f(0.0,200.0,0.0);
        glVertex3f(200.0,200.0,0.0);
        glVertex3f(200.0,0.0,0.0);
        glVertex3f(0.0,0.0,0.0);
    glEnd();
    }
}
int main(int argc, char** argv)
{
    glutCreateMenu(menu);
        glutAddMenuEntry("View1", 1);
        glutAddMenuEntry("View2", 2);
        glutAttachMenu(GLUT_RIGHT_BUTTON);

    g_Width =1200; g_Height = 600;
    glutInitDisplayMode( GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
   // glutInitWindowSize( g_Width, g_Height ); 
    //glutFullScreen();
    glutInitWindowPosition( 50, 50 );
    glutCreateWindow( "CHECK" );
    init();
    glutMouseFunc( myMouseFunction );
    glutKeyboardFunc( myKeyboardFunction );

    glutReshapeFunc( Reshape );
    glutDisplayFunc( display ); 
    glutMainLoop();
    return 0;
}
void init(void) 
{

   glutAttachMenu(GLUT_RIGHT_BUTTON);
    glClearColor( 1.0, 1.0, 1.0, 1.0 );
    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    gluPerspective( 50.0, 1.0, 200, 1000 );
    //glOrtho( -5.0, +5.0, -5.0, +5.0, +5.0, -5.0 );
    glLightfv(GL_LIGHT0, GL_DIFFUSE,  light_diffuse);
    glLightfv(GL_LIGHT0, GL_AMBIENT,  light_ambient );
    glLightfv(GL_LIGHT0, GL_SPECULAR, light_specular );
    glLightfv(GL_LIGHT0, GL_POSITION, light_position);
    glShadeModel(GL_SMOOTH);
    //glShadeModel(GL_FLAT);
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glEnable(GL_DEPTH_TEST);
    //glCullFace(GL_FRONT_AND_BACK );
    glDisable(GL_CULL_FACE );
    glMatrixMode( GL_MODELVIEW );
    if ( loadTGA ("im1.tga", 10 ) == false )
        printf ("\nError: File myQuakeTexture.tga not found!");

    if ( loadTGA ("im2.tga", 11 ) == false )
        printf ("\nError: File myQuakeTexture.tga not found!");
}
void myMouseFunction( int button, int state, int mouseX, int mouseY ) 
{
}
void myKeyboardFunction( unsigned char key, int mouseX, int mouseY )
{

    switch( key )
    {
    case 'r':
        {

        glClearColor( 0.0, 0.0, 1.0, 1.0 );
        glRotatef( rotationAngle++, 0.0, 1.0, 0.0 );
    //  drawBuilding();
        //display();

        }
    case 'R':
    case 'g':

    case 'G':
    case 'b':

    case 'B':
    case 'w':
    case 'W':
        g_SelectedColor = key;
        break;
    case '1':

    case '2':
    case '3':
    case '4':
    case '5':
        break;
    case 27:  // Esc key
        exit(0);
        break;  // redundant
    default:
        break;
    }
}
void Reshape( int width, int height )
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    g_Width  = width; 
    g_Height = height;
    glViewport (0, 0, g_Width, g_Height);
    glMatrixMode (GL_PROJECTION);
    glLoadIdentity ();
    gluPerspective( 50.0, 1.0, 200, 1000 );
    //glOrtho( -5.0, +5.0, -5.0, +5.0, +5.0, -5.0 );;
}
void timer( int val )
{
    display();
}
static float firstAngle=0;
void drawBuilding()
{
    float DoorMaterial[4] = { 0.5, 0.2, 1.3, 1.0 };
    //

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D ,10);
    glTranslatef(30,-180,0);
    //Building 1
    //Front
    glBegin(GL_POLYGON);
        glVertex3f(0.0,0.0,0.0);
        glTexCoord2d(1,1);
        glVertex3f(0.0,400.0,0.0);
        glTexCoord2d(0,1);
        glVertex3f(70.0,400.0,0.0);
        glTexCoord2d(0,0);
        glVertex3f(70.0,0.0,0.0);
        glTexCoord2d(1,0);
        glVertex3f(0.0,0.0,0.0);
    glEnd();
    //Back
        glBegin(GL_POLYGON);
        glVertex3f(0.0,0.0,-50.0);
        glTexCoord2d(1,1);
        glVertex3f(0.0,400.0,-50.0);
        glTexCoord2d(0,1);
        glVertex3f(70.0,400.0,-50.0);
        glTexCoord2d(0,0);
        glVertex3f(70.0,0.0,-50.0);
        glTexCoord2d(1,0);
        glVertex3f(0.0,0.0,-50.0);
    glEnd();
    //Left
        glBegin(GL_POLYGON);
        glVertex3f(0.0,0.0,0.0);
        glTexCoord2d(1,1);
        glVertex3f(0.0,400.0,0.0);
        glTexCoord2d(0,1);
        glVertex3f(0.0,400.0,-50.0);
        glTexCoord2d(0,0);
        glVertex3f(0.0,0.0,-50.0);
        glTexCoord2d(1,0);
        glVertex3f(0.0,0.0,0.0);
    glEnd();
    //Right
        glBegin(GL_POLYGON);
        glVertex3f(70.0,0.0,0.0);
        glTexCoord2d(1,1);
        glVertex3f(70.0,400.0,0.0);
        glTexCoord2d(0,1);
        glVertex3f(70.0,400.0,-50.0);
        glTexCoord2d(0,0);
        glVertex3f(70.0,0.0,-50.0);
        glTexCoord2d(1,0);
        glVertex3f(70.0,0.0,0.0);
    glEnd();
    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D ,11);

}
void menu(int item)
{
        switch (item)
        {
        case 1:
            {

                a=-500, b=0, c=300,d=0,e=0,f=0,g=0,h=1,i=0;

            }

                break;

        case 2:
            {
                a=0, b=300, c=500,d=0,e=0,f=0,g=0,h=1,i=0;
          drawBuilding();
            }
        }
}
void display()
{
    glRotatef( rotationAngle++, 0.0, 1.0, 0.0 );
    glutFullScreen();
    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt( a, b, c, 
               d, e,  f, 
               g, h, i );

    glRotatef( rotationAngle++, 0.0, 1.0, 0.0 );
    //
    drawBuilding();
    glDisable(GL_TEXTURE_2D);

    // this tells glut to call the 'timer' function in 33 milliseconds
    // i.e. this way we will draw 1000/33 = 30 times a second
    glutTimerFunc( 33, timer, 0 ); 
    glutSwapBuffers();
    printf(".");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T21:15:34.463

在 OpenGL 渲染的场景中拥有阴影并不是简单地启用某些功能的问题。OpenGL 本身只绘制点、线和三角形。一次一个，它们之间没有任何上下文。由用户提供上下文。

绘制阴影可以通过多种方式实现，但最常用的是

*   模板体积阴影

和

*   阴影贴图

在这里解释它们将在很大程度上超出 StackOverflow 问题的限制。因此，我向您推荐有关它们的 Wikipedia 文章（以及这些文章链接的资源）

*   [http://en.wikipedia.org/wiki/Shadow_volume](http://en.wikipedia.org/wiki/Shadow_volume)

*   [http://en.wikipedia.org/wiki/Shadow_mapping](http://en.wikipedia.org/wiki/Shadow_mapping)

# python - 不可重现的 ImportError

> ID：13002132
> 
> 赞同：0
> 
> 时间：2012-10-21T20:55:58.270
> 
> 标签：python, importerror

当我运行无法在 Python 解释器中重现的脚本时，我收到 ImportError。

```
$ head -6 bin/taglint
#!/usr/bin/env python
#

import re
from lsaf.lsaf import file_info, error, exit

$ taglint
Traceback (most recent call last):
  File "/home/ernest/bin/taglint", line 5, in <module>
    from lsaf.lsaf import file_info, error, exit
ImportError: No module named lsaf 
```

但是，导入在解释器中工作正常：

```
$ /usr/bin/env python
Python 2.7.3rc2 (default, Apr 22 2012, 22:30:17) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from lsaf.lsaf import file_info, error, exit
>>> 
```

这里发生了什么？

*附加信息：*

```
Python 2.7.3rc2 (default, Apr 22 2012, 22:30:17) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import lsaf; print(lsaf)
<module 'lsaf' from '/home/ernest/lib/python/lsaf/__init__.pyc'> 
```

PYTHONPATH 环境变量设置为 PYTHONPATH=/home/ernest/lib/python。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-02T15:01:55.383

`sys.path` 检查你的可能有问题`lsaf`

可能是你没有给你的脚本命名`lsaf.py`

重命名它并且它将起作用，您的脚本尝试导入自身，但`lsaf`您自己的脚本中没有包。进口感受

# ios - 两行标签

> ID：13002134
> 
> 赞同：0
> 
> 时间：2012-10-21T20:56:06.477
> 
> 标签：ios, cocoa-touch, uilabel

我的应用程序中有两行标签，但第一行中的最后一个单词分成两行。例如，如果最后一个词是“家”，我在第一行有 h，在第二行有 ome。我该如何解决？

**更新**：

把 IB 和代码换行，但没有成功。

![在此处输入图像描述](../Images/ab7f64c73fcaaa460424abe8de1dab72.png)

代码部分：

```
...
cell.leftArticleTitleLabel.lineBreakMode = NSLineBreakByWordWrapping;

        [cell.leftArticleTitleLabel setLineBreakMode:TRUE];
        cell.leftArticleTitleView.frame = CGRectMake(cell.leftArticleTitleView.frame.origin.x, 40, 159, 40);
        cell.leftArticleTitleLabel.frame = CGRectMake(cell.leftArticleTitleLabel.frame.origin.x, cell.leftArticleTitleLabel.frame.origin.y, 149, 40);
... 
```

**更新 2**：已解决

我应该把“setLineBreakMode:TRUE”放在第一位:-)

```
...
[cell.leftArticleTitleLabel setLineBreakMode:TRUE];
cell.leftArticleTitleLabel.lineBreakMode = NSLineBreakByWordWrapping;
cell.leftArticleTitleView.frame = CGRectMake(cell.leftArticleTitleView.frame.origin.x, 40, 159, 40);
cell.leftArticleTitleLabel.frame = CGRectMake(cell.leftArticleTitleLabel.frame.origin.x, cell.leftArticleTitleLabel.frame.origin.y, 149, 40);
 ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:39:49.110

将标签的换行模式更改为自动换行。

以图形方式：

![在此处输入图像描述](../Images/4a896d0cadbf33cf6ab6a52c4846b094.png)

在代码中：

```
label.lineBreakMode = NSLineBreakByWordWrapping; 
```

# java - 在 Java 中使用 Azure 服务总线

> ID：13002135
> 
> 赞同：4
> 
> 时间：2012-10-21T20:56:11.147
> 
> 标签：java, service, azure, bus

我正在尝试在 java 中订阅 Azure 服务总线主题。为此，我需要创建一个 ServiceBusContract 实例。在我发现的每个例子中，他们都是这样做的：

```
String issuer = "<obtained from portal>";
String key = "<obtained from portal>";
Configuration config = 
ServiceBusConfiguration.configureWithWrapAuthentication(
    “HowToSample”,
    issuer,
    key);  
ServiceBusContract service = ServiceBusService.create(config); 
```

来自：[链接](https://www.windowsazure.com/en-us/develop/java/how-to-guides/service-bus-topics/)

但是，如果您查看[javadoc](http://dl.windowsazure.com/javadoc/com/microsoft/windowsazure/services/serviceBus/ServiceBusConfiguration.html)，则没有带有 3 个字符串参数的 configureWithWrapAuthentication 方法！

我正在使用 azure api 的 0.3.1 版本 jar。

如何使用这些新的（？） configureWithWrapAuthentication 方法创建 ServiceBusContract？还是我忽略了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T17:22:49.217

这是我们在配置方法中包含的参数。

String namespace，namespace是你的服务总线订阅的名字，比如johndoeservicebus。String authenticationName，authentication name是WRAP的登录名，一般称为owner。字符串 authenticationPassword，身份验证密码是您可以从 Azure 门户获取的密钥。String serviceBusRootUri，服务总线根URI是服务总线服务的根，对于美国来说是“.servicebus.windows.net”。String wrapRootUri, WRAP root Uri是WRAP认证服务的根，在美国是“-sb.accesscontrol.windows.net/WRAPv0.9”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-10T17:12:50.067

显然上面有问题，试过了，它不再起作用了。根据github，现在有一个未解决的问题：

[https://github.com/Azure/azure-sdk-for-java/issues/437](https://github.com/Azure/azure-sdk-for-java/issues/437)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-17T06:36:15.167

团队已经对这个问题进行了分类并着手解决。我们还就从 ACS 到 SAS 的变化联系了服务总线团队，并联系了我们的文档团队，以便我们有一个完整的计划来处理这个变化，因为这不仅仅是一个代码问题，而是一个沟通问题。

根据我从团队中听到的所有内容，此修复程序将在 Java SDK 的下一个版本中发布。

# matlab - 如何在 Matlab 中使用 fittype 的多个参数

> ID：13002137
> 
> 赞同：1
> 
> 时间：2012-10-21T20:56:18.807
> 
> 标签：matlab, parameters

我有一个用于解决此问题的 1000x2 数据文件。

我应该用 Acos(wt + phi) 拟合数据。t 为时间，即数据文件中的第一列，即自变量。我需要找到拟合参数（A、f 和 phi）及其不确定性。

我的代码如下：

```
%load initial data file
data = load('hw_fit_cos_problem.dat');
t = data(:,1); %1st column is t (time)
x = t;
y = data(:,2); %2nd column is y (signal strength)

%define fitting function
f = fittype('A*cos(w*x + p)','coefficients','A','problem',{'w','p'});

% check fit parameters
coeffs = coeffnames(f);

%fit data
[A] = fit(x,y,f)

disp('confidence interval/errorbars');
ci = confint(A) 
```

这会产生 4 条我不理解的不同错误消息。

错误信息：

使用 fit>iAssertNumProblemParameters 时出错（第 1113 行）缺少问题参数。将值指定为一个元胞数组，其中 fittype 中的每个问题参数都有一个元素。

拟合错误>iFit (line 198) iAssertNumProblemParameters(probparams, probnames(model));

拟合错误（第 109 行）[fitobj, goodness, output, convmsg] = iFit(xdatain, ydatain, fittypeobj, ...

问题 2 中的错误（第 14 行）[A] = fit(x,y,f)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:01:53.533

代码行

```
f = fittype('A*cos(w*x + p)','coefficients','A','problem',{'w','p'}); 
```

指定`A`为模型中的“系数”，并将值`w`指定`p`为“问题”参数。

因此，拟合工具箱希望您提供更多关于`w`and的信息`p`，然后它会有所不同`A`。如果没有向拟合工具提供有关`w`和`p`的更多信息，则会导致错误。

我不确定这个项目的目标，或者为什么`w`被`p`指定为问题参数。但是，一种简单的解决方案是允许工具箱将`A`、`w`和 `p`视为“系数”，如下所示：

```
f = fittype('A*cos(w*x + p)','coefficients', {'A', 'w', 'p'}); 
```

在这种情况下，代码不会抛出错误，并且会返回 、 和 的 95%`A`置信`w`区间`p`。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T18:53:12.190

您的问题的直接答案是生成错误“缺少问题参数”，因为您已将 w 和 p 标识为特定于问题的固定参数，但您没有告诉 fit 函数这些固定值是什么。

您可以通过更改线路来做到这一点

[A] = 拟合(x,y,f)

到

[A]=fit(x,y,f,'问题',{100,0.1})

它在拟合中提供值 w=100 和 p=0.1。这应该可以解决您指定的错误（所有 4 条错误消息都来自此错误）

通常，将拟合方程中的一些量指定为特定于问题的固定参数可能是一件有效的事情——例如，如果您已经独立确定了它们并且有充分的理由相信您获得的值是可靠的。在这种情况下，您可能以这种方式知道频率 w，但您很可能不知道相位 p，因此这应该是一个拟合系数。

希望有帮助。

# haskell - 在 OS X 上运行 Haskell 程序时不允许操作

> ID：13002145
> 
> 赞同：4
> 
> 时间：2012-10-21T20:57:17.700
> 
> 标签：haskell, runtime-error, osx-mountain-lion

我正在编写我的第一个 Haskell 程序，这是一个基于 Yesod 框架的 Web 应用程序。

我使用`cabal configure && cabal build`. 当我尝试运行可执行文件时，出现以下错误：

```
-bash: dist/build/MyApp/MyApp: Operation not permitted 
```

我在 OS X Mountain Lion 上安装了 64 位 Haskell 平台（2012.2.0.0）。我原本安装的是32位的版本，但遇到同样的错误，所以我卸载了它并尝试了64位版本。

应用程序编译和链接没有错误或警告。

我什至尝试了[http://reviews.cnet.com/8301-13727_7-57374676-263/workarounds-for-quarantine-bug-in-os-x-lion/](http://reviews.cnet.com/8301-13727_7-57374676-263/workarounds-for-quarantine-bug-in-os-x-lion/)中描述的修复方法，但没有任何区别。

**更新：**情节变厚了。源代码树实际上是在一个加密的稀疏包上（我所有的源代码都是）。当我将树复制到我的主目录时，它会编译**并运行**.

mount 命令不显示*noexec*选项：

```
/dev/disk2s9 on /Volumes/Personal (hfs, local, nodev, nosuid, journaled, noowners, quarantine, mounted by grk) 
```

我不确定*隔离*选项，但我怀疑它来自 Symantec Endpoint Protection（我的雇主要求）。我会尝试为稀疏捆绑禁用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:52:08.793

我在姐妹网站 apple.stackexchange.com 上找到了答案：[https ://apple.stackexchange.com/questions/64456/mount-is-adding-a-quarantine-flag-causing-bin-bash-bad-interpreter-操作](https://apple.stackexchange.com/questions/64456/mount-is-adding-a-quarantine-flag-causing-bin-bash-bad-interpreter-operatio)

稀疏包实际上标有*隔离*标志。我使用以下命令卸载了卷并删除了隔离区：

```
xattr -d com.apple.quarantine Personal.sparsebundle 
```

然后重新安装。问题解决了。

# java - 苹果最近的Java更新去掉了Java Preferences，怎么从shell改？

> ID：13002155
> 
> 赞同：4
> 
> 时间：2012-10-21T20:58:15.650
> 
> 标签：java, macos, bash, shell, zsh

Apple 本周的 Java 更新从 Utilities 中删除了 Java Preferences.app。当在不同的开发环境中使用不同版本的 Java 时，似乎不再像以前那样容易地从 Java 6 更改为 Sun 的 1.7。

我相信仍然应该有一个外壳机制来实现这一点，但是我不容易找到它。 ***在 shell 会话中如何正确更改 Java 的当前活动版本？***

（我说正确是因为我想确保所有环境变量都设置得当，例如 JAVA_HOME、它的路径等）

此外，我想，几年前，我偶然发现了一个脚本，它可以通过简单地列出选项然后定义切换到哪个选项来为您更改 Java 环境。可能是我对 Ubuntu 中的工具感到困惑，但我几乎可以肯定它适用于 OS X ......知道这是什么或者我们应该编写一个快速脚本会很有帮助，如果有人不知道的话'不存在，这将满足这种需求；也许将其插入 Homebrew 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:31:12.820

首先，谢谢你的问题，我需要自己解决这个问题。

这是我学到的。。

*   `whereis java`指着`/usr/bin/java`
*   `/usr/bin/java`是一个符号链接`/System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java`
*   在我的 Mac 上，`/System/Library/Frameworks/JavaVM.framework/Versions/Current`是指向 的符号链接`/System/Library/Frameworks/JavaVM.framework/Versions/A`，目前是 Java 1.7.0._07-b10

我们需要做的是重定向`Current`到我们想要使用的 JVM。

在我的系统上，Java 1.6.0_37 安装在 中`/System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK`，这是指向的符号链接`/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents`

我所做的是...

备份`Current`

```
sudo mv Current Current.bak 
```

创建一个新的符号链接到`CurrentJDK`

```
sudo ln -s CurrentJDK Current 
```

然后在命令行，我做`java -version`了并得到了

```
Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-11M3909)
Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode) 
```

现在，要将其移回，我只需将`Current`

```
sudo mv Current Current.1.6 
```

然后重新链接`Current`到`A`

```
sudo ln -s A Current 
```

然后在命令行，我做`java -version`了并得到了

```
java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b10)
Java HotSpot(TM) 64-Bit Server VM (build 23.3-b01, mixed mode) 
```

现在我需要做的就是向后移动`sudo mv Current Current.1.7`并`sudo mv Current.1.6 Current`反转它以向前移动。

该解决方案的灵感来自[https://discussions.apple.com/thread/4444438?start=0&tstart=0](https://discussions.apple.com/thread/4444438?start=0&tstart=0)，但我不得不尝试使用它来确保 ;)

**更新**

在玩了一些之后，我创建了一个`java6`符号链接，它位于`/usr/bin/java6`并指向`/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Commands/java`，这基本上允许我`java6`从命令行执行而无需切换版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:29:32.280

感谢最初回答这个问题的@MadProgrammer。我进一步探索了一些东西，并找到了一些示例，这些示例帮助我使用了以下脚本，我现在使用这些脚本来执行当前无法在 Java 1.7 中运行的 Java 应用程序：

```
#!/usr/bin/env bash
# Or plug in `zsh` instead of `bash` above if that is your preferred shell

DIR=$(pwd)
cd "$DIR"
APPLICATION_NAME="App Name"

echo -n "Locating Java ... "

PLATFORM=$(uname)
JAVA_PATH="java"
JAVA_VER=$($JAVA_PATH -version 2>&1 | sed 's/java version "\(.*\)\.\(.*\)\..*"/\1\2/; 1q')

if [[ "$JAVA_VER" == *"command not found"* ]]; then
    echo "Java not found."
else
    JAVA_VER_FULL=$($JAVA_PATH -version 2>&1 | awk -F '"' '/version/ {print $2}')

    if [[ $JAVA_VER -eq 17 ]]; then
        echo "v1.7 found."

        if [[ $PLATFORM -eq "Darwin" ]]; then
            echo "[!!!] WARNING: Java v1.7 on OS X is known to have problems with ${APPLICATION_NAME}."
            echo -n "Looking for compatible version of Java ... "

            JAVA_PATH="/System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/bin/java"
            if [[ -f "$JAVA_PATH" ]]; then
                JAVA_VER=$($JAVA_PATH -version 2>&1 | sed 's/java version "\(.*\)\.\(.*\)\..*"/\1\2/; 1q')
                JAVA_VER_FULL=$($JAVA_PATH -version 2>&1 | awk -F '"' '/version/ {print $2}')
                if [[ $JAVA_VER -eq 16 ]]; then
                    echo "$JAVA_VER_FULL found. Using this version."
                else
                    echo "No known compatible versions of Java could be found. ${APPLICATION_NAME} may not run properly, or at all."
                fi
            fi
        else
            echo "$JAVA_VER_FULL found."
        fi
    else
        echo "$JAVA_VER_FULL found."
    fi
fi

echo ""

echo "Starting ${APPLICATION_NAME}..."

# Insert the java application or jar that you wish to execute here prepended by `$JAVA_PATH` instead of simply `java`
# For example:
#
# $JAVA_PATH -jar /path/to/the/application.jar 
```

*对此可能有用的一种情况是创建一个脚本来运行在 1.7 版本场景中存在问题的 Minecraft。显然，还有其他类似的应用程序存在不同程度的问题，这对于控制您希望使用的 Java 版本同样有用，而不仅仅是使用默认方法或试图破解符号链接。*

# entity-framework - Asp.net MVC 4 Code First 从导航属性返回特定字段

> ID：13002166
> 
> 赞同：1
> 
> 时间：2012-10-21T20:59:37.600
> 
> 标签：entity-framework, asp.net-mvc-4

一直坚持这个，所以我想我会问。我确信我在这里缺少一些简单的东西。尝试通过构建一个简单的应用程序来自学 Asp.net mvc 4。

这是模型：

```
public class Category
{
    public int Id { get; set; }
    [Required]
    [StringLength(32)]
    public string Name { get; set; }
    //public virtual ICollection<Note> Notes { get; set; }
    private ICollection<Note> notes;
    public ICollection<Note> Notes
    {
        get
        {
            return this.notes ?? (this.notes = new List<Note>());
        }
    }
}

public class Note
{
    public int Id { get; set; }
    [Required]
    public string Content { get; set; }
    [Required]
    [StringLength(128)]
    public string Topic { get; set; }
    public int CategoryId { get; set; }
    public virtual Category Category { get; set; }
    public virtual IEnumerable<Comment> Comments { get; set; }
    public virtual ICollection<Tag> Tags {get; set;}

    public Note()
    {
        Tags = new HashSet<Tag>();
    }
}
public class Tag
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Note> Notes { get; set; }

    public Tag()
    {
        Notes = new HashSet<Note>();
    }
} 
```

我从控制器的存储库中调用此方法：

```
 public IQueryable<Note> GetAll()
    {
        var query = _db.Notes.Include(x => x.Category).Include(y => y.Tags);
        return query;
    } 
```

在家庭控制器上，我试图返回所有笔记的列表，并希望包括它所属的类别名称以及笔记附带的标签。起初没有出现，所以我阅读了一些关于急切加载的教程并想出了如何让它们显示。

但是，我的方法不是那么有效。由于类别和标签的导航属性再次发送对笔记的查询，迷你分析器向我咆哮重复查询。有没有办法只返回我需要的类别和标签对象的属性？

我尝试了几种方法都没有运气。我希望我能做这样的事情：

```
var query = _db.Notes.Include(x => x.Category.Name).Include(y => y.Tags.Name); 
```

但我收到一个错误：无法将 lambda 表达式转换为类型“字符串”，因为它不是委托类型

在此之前我已经看到该错误是由一些缺少 using 语句引起的，所以我已经仔细检查过。

有什么建议么？谢谢您的帮助

# audio - ActionScript 3.0 中缺少 Sound.position 属性

> ID：13002167
> 
> 赞同：0
> 
> 时间：2012-10-21T20:59:57.370
> 
> 标签：audio, actionscript, mp3

我正在 Flash 中开发一个简单的 mp3 播放器应用程序，并试图实现一个时间计数器，以跟踪从当前播放的曲目过去了多少时间。我在网上看到了这个代码片段：

```
var music:Sound = new Sound();
music.loadSound("audio.mp3", true);
var minutes:Number = 0;
var seconds:Number = 0;
this.onEnterFrame = function() {
  minutes = Math.floor(music.position / 1000 / 60);
  seconds = Math.floor(music.position / 1000) % 60;
  output.text = minutes + ":" + seconds;
} 
```

但是，位置属性似乎不再是 Sound 类的一部分。我是 ActionScript 的新手，此属性是否已移至其他地方？或者有人对如何为 mp3 进度实施计时器有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:06:26.330

Sound 中的[play 方法返回一个](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#play())[SoundChannel](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/SoundChannel.html)，它具有您要查找的[position 属性。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/SoundChannel.html#position)

# c - C：分配结构的二维数组

> ID：13002168
> 
> 赞同：2
> 
> 时间：2012-10-21T21:00:07.173
> 
> 标签：c, arrays

### 背景

我有一个带有两个二维数组的结构......

```
typedef struct v
{
    int *b;
    int *a;
} v; 
```

在我的主要功能中，我有......

```
int A [M][K] = {{2,2},{2,2}, {3,2} };
int B [K][N] = {{2,2,2},{2,2,2}};
struct v *data= (struct v *) malloc(sizeof(struct v));
data.a->A;
data.b->B;
pthread_create(&multiplicationWorker, NULL, (void *) &alterAarrays,  data); 
```

...和一个私人功能...

```
void alterArrays ( v* coords)
{
    ...
} 
```

* * *

### 问题：

我想传递对内部二维数组的引用`alterArrays`。它也不会让我像这样分配二维数组的值。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:07:31.947

定义尺寸：

```
#define K 2
#define M 3
#define N 3 
```

* * *

如果要在结构中使用数组：

定义 struct （您的意思是调用这些`a`和`b`吗？您在代码中将它们称为 this 。此外，维度最初与代码中的数组不同：

```
typedef struct v
{
    int a [M][K];
    int b [K][N];
} v; 
```

然后是副本：

```
int A [M][K] = {{2,2},{2,2}, {3,2} };
int B [K][N] = {{2,2,2},{2,2,2}};
struct v *data= (struct v *) malloc(sizeof(struct v));

memcpy(data->a, A, M * K * sizeof(int));
memcpy(data->b, B, K * N * sizeof(int)); 
```

* * *

如果要在结构中使用指针：

定义结构：

```
typedef struct v
{
    int (*a)[K];
    int (*b)[N];
} v; 
```

而且您需要 make`A`和`B`global，因此它们不在堆栈中。所以在源文件的顶部定义它们：

```
int A [M][K] = {{2,2},{2,2}, {3,2} };
int B [K][N] = {{2,2,2},{2,2,2}}; 
```

然后是作业：

```
struct v *data= (struct v *) malloc(sizeof(struct v));

data->a = A;
data->b = B; 
```

# javascript - JAVASCRIPT - 动态 Createt Div 不会采用给定的样式（宽度和高度）

> ID：13002169
> 
> 赞同：1
> 
> 时间：2012-10-21T21:00:12.110
> 
> 标签：javascript, css, html, dynamic

我正在尝试使用用户输入值（如数量和大小）创建一些 div。

在我的情况下，现在 div 已创建，但在输出 html （ firefox -> show selected source ）中，它们没有采用给定的属性，如 '.style.top' 、 '.style.left' 、 '.width' （或 .style.width ）和 '.height' （或 .style.height ）。

第一个创建 div 有 -> style="top:0px; left:0px; . . ." 第二个只有 -> style="top:0px; . . " // 'left' 属性不再出现，并且所有以下 div 都没有顶部或左侧。

也没有任何创建的 div 被采用宽度和高度。

这是我的代码，它非常简单和基本，但我无法找出问题所在：

```
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Container Pattern Generator</title>
    <style type="text/css">
        body {

        }

        .div_container {
            position:absolute;
            border:solid 1px #000;
        }
    </style>
    <script type="text/javascript">
        function generate() {
            var boxSize = document.getElementById("txt_boxSize").value;
            var width = document.getElementById("txt_width").value;
            var height = document.getElementById("txt_height").value;
            for( var i = 1; i <= height; i++ ) {
                for( var ii = 1; ii <= width; ii++ ) {
                    var newDiv = document.createElement("div");
                    newDiv.setAttribute("id", "div_container_" + i + "_" + ii);
                    newDiv.setAttribute("class", "div_container");
                    newDiv.width = boxSize + "px";
                    newDiv.height = boxSize + "px";
                    newDiv.style.top = ( i - 1 ) * boxSize;
                    newDiv.style.left = ( ii - 1 ) * boxSize;
                    newDiv.style.backgroundColor = getRandColor();
                    document.getElementById("div_main").appendChild( newDiv );
                    alert("ok");
                }
            }
        }

        function getRandColor() {
            var array = new Array( "#FF0000", "#FF8000", "#FF0000", "#01DF01", "#FF0000", "#0404B4", "#FF8000", "#F2F2F2" );
            return array[ randNum( 0, array.length ) ];
        }

        function randNum( min, max ) {
            var num = Math.floor( Math.random() * ( 1 + max - min ) ) + min;
            return num;
        }
    </script>
</head>

<body>
    <p>Width : <input type="text" value="2" id="txt_width" style="width:50px;"/> - Height : <input type="text" value="2" id="txt_height" style="width:50px;"/> - Box Size : <input type="text" value="40" id="txt_boxSize" style="width:50px;"/> - <input type="button" value="Generate" onClick="generate();"/></p>
    <div id="div_main" style="position:absolute; width:100%; height:100%; background-color:#999;">
    </div>
</body> 
```

您可以将 cote 复制到一个空白的 html 文件中，然后看看我的意思。

谢谢你的帮助。优雅

**编辑：**

问题是 100% 在循环内部，其中创建了 div。

在第一个版本中，我只是硬编码了 div 的数量（空白 div），但现在它应该是动态的......问题就开始了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:13:08.597

如前所述，问题出在您的循环中。主要问题是您应该使用`setAttribute`. 此外，您的顶部和左侧定义需要在它们上面有“px”，并且您的宽度和高度没有使用右钩子。如果您尝试`newDiv.style.width`或`newDiv.style.width`. 但是，我认为坚持使用`setAttribute`. 看这个例子：

所有这些：

```
newDiv.width = boxSize + "px";
newDiv.height = boxSize + "px";
newDiv.style.top = ( i - 1 ) * boxSize;
newDiv.style.left = ( ii - 1 ) * boxSize;
newDiv.style.backgroundColor = getRandColor(); 
```

可以变成这样：

```
var divTop = parseInt((i - 1)*boxSize) + "px;";
var divLeft = parseInt((ii - 1)*boxSize) + "px;";
newDiv.setAttribute("style",
  "top: " + divTop + 
  "left: " + divLeft + 
  "width: " + boxSize + 
  "px;height: " + boxSize + "px;background-color:"+getRandColor()+ ";"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T21:15:18.603

您提供了无效的属性值。这是因为您将**newDiv.height**和**newDiv.width**而不是**newDiv.style.height**和**newDiv.style.width**设置为非数字值。将值填充到样式属性中，就足够了，它会起作用。

此外，如果您尝试将代码模块化一点，调试/维护可能更容易，其他人也更容易理解。

**编辑**

意思是我会尝试这个（不重构）：

```
newDiv.style.width = boxSize + "px";
newDiv.style.height = boxSize + "px";
newDiv.style.top = (( i - 1 ) * boxSize) + "px";
newDiv.style.left = (( ii - 1 ) * boxSize) + "px"; 
```

# objective-c - 模态控制器中的小数点和关闭栏按钮项：如何在 MainViewController 中传递值？

> ID：13002181
> 
> 赞同：0
> 
> 时间：2012-10-21T21:01:38.940
> 
> 标签：objective-c

我在模态视图控制器中有一个小数点，它使用以下方式自动显示：

```
 [self.TextField becomeFirstResponder]; 
```

我在此模式中有一个从 TextField 获取值的操作：

```
- (IBAction)Text:(UITextField
                   *)sender {
self.SendText =  self.TextField.text;
NSLog(@"1 Triggered: %@", self.SendText);
} 
```

我需要在 FirstViewController 中传递该值 SendText。我添加了一个条形按钮项并连接到 FirstViewController 中的 segue unwind。在 FirstViewController 中：

```
- (IBAction)close:(UIStoryboardSegue *) sender { 
 if ([sender.identifier isEqualToString: @"Segue"]) {
   self.ViewModal = sender.sourceViewController ;
   self.LabelTextPassed.text = self.ViewModal.SendText;
   NSLog(@"2 Triggered: %@", self.ViewModal.SendText); 
 }
} 
```

执行该代码时，为什么我收到 2 Triggered null 和 1 Triggered 的确切值？并以相反的顺序？该值在之后触发并且不会传递给 FirstViewController ..

# c++ - random_ints(a,N) 做什么以及如何在我的代码中使用它？

> ID：13002182
> 
> 赞同：9
> 
> 时间：2012-10-21T21:01:43.847
> 
> 标签：c++, cuda

[http://developer.download.nvidia.com/CUDA/training/GTC_Express_Sarah_Tariq_June2011.pdf](http://developer.download.nvidia.com/CUDA/training/GTC_Express_Sarah_Tariq_June2011.pdf)

在上面的教程（幻灯片 29）中，他们启动了 3 个指向 int 的指针：

```
int *a, *b, *c; 
```

显然这是类型（int *），但它们以某种方式使内核可以使用语法访问其索引`a[index]`

他们还使用一些（对我而言）未知的命令来初始化他们的值：

```
a = (int *)malloc(size); random_ints(a, N); 
```

那么这个命令有什么作用呢？首先它将指针 *a 转换为指向一个 int （但后来`a`神奇地变成了一个向量）。我找不到任何有关 random_ints 确切作用的来源（而且我的编译器也无法识别它，因为它可能需要一些包含）。我猜它`a`用随机整数创建了一个长度为 N 的向量（尽管`a`是 type `int`）。

我尝试通过对 etc 等做同样的事情来解决这个问题，`vector <int> * a;`但我仍然无法将它传递给我的内核（无论我尝试什么它都不会添加元素）。

我正在使用 C++。提前致谢。

编辑：这可能是伪代码吗？因为显式 C++ 示例以不同的方式（可理解的方式）执行此操作

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T22:27:07.390

*   您可以像普通数组一样在 C/C++ 中使用指针。看：

例子

```
int* p = new int[2];
p[1] = 2;  
*(p + 1) = 2; // same as line above - just other syntax
*(1 + p) = 2; // and other way
 1[p] = 2; // don't use it - but still valid 
```

*   您可以在 C++ 中通过 malloc 分配内存（它源自 C 方式）但仅适用于 POD 类型，例如`int`

例子

```
int* p = (int*)malloc(12 * sizeof(int)); // C way equivalent to C++: new int [12] 
```

请注意，您必须释放此指针 by `free(p)`，而不是 by `delete [] p`。

*   我猜这个函数的实现只是将 N 个随机数分配给由指针表示的 int 数组：

例子：

```
void random_ints(int* a, int N)
{
   int i;
   for (i = 0; i < N; ++i)
    a[i] = rand();
} 
```

# windows - 在这种情况下如何找到java？

> ID：13002183
> 
> 赞同：1
> 
> 时间：2012-10-21T21:01:53.600
> 
> 标签：windows, windows-7, 64-bit, java

我在这里感到困惑：
如果我从那里运行`java`，`cmd`则命令成功运行。
但是我既没有设置`JAVA_HOME`也`%JRE_HOME%`没有添加 java/jre 安装目录在我的`PATH`.
所以当我这样做的时候

```
echo %JAVA_HOME% 
```

没有显示 JAVA_HOME（预计因为我没有设置它）

如果我做：

回声%JRE_HOME%`

没有显示 JRE_HOME（预计因为我没有设置它）

当我这样做的时候

```
echo %PATH% 
```

PATH 中没有目录指向 java 安装。预期，因为我没有修改 PATH 来添加 java.util.

路径是：

```
C:\Program Files\Common Files\Microsoft Shared\Windows Live;  
C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;  
C:\Program Files (x86)\AMD APP\bin\x86_64;  
C:\Program Files (x86)\AMD APP\bin\x86;
C:\Windows\system32;C:\Windows;  
C:\Windows\System32\Wbem;  
C:\Windows\System32\WindowsPowerShell\v1.0\;  
C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;  
C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;   
C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;  
C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;  
C:\Program Files (x86)\IDM Computer Solutions\UltraEdit-32;  
C:\Program Files (x86)\Windows Live\Shared 
```

那么我为什么不`Bad Command`继续运行java呢？
![在此处输入图像描述](../Images/68b5c798625e74a42aa1cede1b62bf41.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T21:11:48.733

根据对“Windows 上是否有相当于 'which' 的[答案？”的答案，最新版本的 Windows 包含一个 'where' 命令。](https://stackoverflow.com/a/304447/611182)

所以你可以尝试：`where java.exe`

我现在无法检查，但我感觉 Windows 下某处有一个 java.exe `C:\Windows\System32\`……</p>

# visual-studio - 为什么我们需要像 Nuget 这样的包管理器？

> ID：13002185
> 
> 赞同：8
> 
> 时间：2012-10-21T21:02:11.123
> 
> 标签：visual-studio, nuget, package-managers

我知道当我们想使用第三方组件时，像 NuGet 这样的包管理器会帮助我们。

从 Nuget Codeplex 页面：

> NuGet 是一个免费的、开源的、专注于开发人员的包管理系统，用于 .NET 平台，旨在简化在开发过程中将第三方库合并到 .NET 应用程序中的过程。
> 
> .NET 平台上有大量有用的第 3 方开源库，但对于那些不熟悉 OSS 生态系统的人来说，将这些库拉到一个项目中可能会很痛苦。
> 
> 让我们以ELMAH为例。这是一个很好的错误记录实用程序，它不依赖于其他库，但集成到项目中仍然是一个挑战。这些是它采取的步骤：
> 
> ```
> Find ELMAH
> Download the correct zip package.
> “Unblock” the package.
> Verify its hash against the one provided by the hosting environment.
> Unzip the package contents into a specific location in the solution.
> Add an assembly reference to the assembly.
> Update web.config with the correct settings which a developer needs to search for. 
> ```
> 
> 这是一个没有依赖关系的库。想象一下为 NHibernate.Linq 这样做，它有多个依赖项，每个依赖项都需要类似的步骤。我们可以做得更好！
> 
> NuGet 自动执行包及其依赖项的所有这些常见且繁琐的任务。它消除了将第三方开源库合并到项目源代码树中的几乎所有挑战

这些步骤是我们要设置项目时执行的简单任务。它仅用于自动添加 3rd 方组件并确定配置文件中出错的机会？或者它有更多的责任！？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-22T05:13:30.677

它的价值隐藏在公开之中：像 NuGet 这样的包**管理器**可以帮助您使用自动化处理软件依赖关系。许多人假设它仅适用于开源或第三方组件，但您同样可以将其用于您自己的内部包。

NuGet 的优点是（仅举几例）：

*   NuGet 鼓励重用组件，因为您隐式依赖实际的“发布”（即使是预发布），而不是分支源
*   您可以摆脱使 VCS 存储库膨胀的二进制文件（包还原功能）
*   它迫使包创建者考虑使用包的方式，并让他们在包安装期间处理组件的配置（谁比包创建者最了解如何配置包？）。以 ELMAH 为例。
*   有效地在包存储库上自动创建和发布包是持续交付的一种形式（对于软件组件）。OctopusDeploy 甚至更进一步，可以打包整个网站以供部署。
*   NuGet 鼓励并且有时会强制您遵循一些 ALM 最佳实践。例如，一个包有一个版本，所以你必须考虑你的版本控制策略（例如 SemVer.org）
*   NuGet 与 SymbolSource.org 集成（它也有一个社区版来设置你自己的）：这允许人们轻松调试已发布的包，而无需一直发送此信息
*   拥有一个或多个包存储库使组织可以轻松维护依赖关系矩阵，甚至构建多个项目正在使用的 OSS 许可证清单
*   NuGet 通知你可用的包更新
*   创建包让人思考组件架构（所有依赖项也应该打包）
*   包的依赖关系会自动解析（所以你不能忘记任何）
*   NuGet 足够聪明，可以在需要时添加程序集绑定重定向

上面的列表并不详尽，但我希望我涵盖了这个答案中的主要好处。我敢肯定还有更多。

干杯，泽维尔

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-13T09:33:43.073

使用**NuGet**的原因是您不必交付项目中的所有库，从而减少项目大小。使用 NuGet Power Tools，通过在**Packages.config**文件中指定包版本，您将能够在首次运行项目时下载所有必需的库。

> **Live Exapmle：**在部署项目时减少项目大小很重要。就像解决方案有 500Mb 的代码和 200Mb 的包大小，那么每次上传项目的额外费用为 200mb。我们只需在包中设置它们的引用，而不是上传具体的 dll 文件.config 文件。

# asp.net-mvc - MVC4视图模型int属性为1但HTML呈现为0？

> ID：13002187
> 
> 赞同：1
> 
> 时间：2012-10-21T21:02:16.540
> 
> 标签：asp.net-mvc, asp.net-mvc-4, viewmodel

我有一个控制器设置为 1 的模型属性，但在我看来，我将其视为 0 和 1，具体取决于我如何访问它。

查看片段（这些行也是绝对连续的！）

```
@Html.DisplayFor(model => model.resumeStage)    
@Html.HiddenFor(model => model.resumeStage)
@Html.EditorFor(model => model.resumeStage) 
```

渲染的 HTML（`value=`为了便于阅读，我移动了标签前面的 ）

```
1
<input value="0" data-val="true" data-val-number="The field resumeStage must be a number." data-val-required="The resumeStage field is required." id="resumeStage" name="resumeStage" type="hidden" />
<input value="0" class="text-box single-line" id="resumeStage" name="resumeStage" type="number" /> 
```

值不应该总是1吗？当我在文本框中显示该属性时，我似乎失去了它的状态！视图控制器受模型类的严格约束，模型类定义为

```
public class CreateUserModel
{
    [Required]
    public int resumeStage { get; set; } // <== problem

    public LocalProfile newLocalUser { get; set; }
    public ExtProfile newExtUser { get; set; }

    public CreateUserModel()
    {
        resumeStage = 0;
        newLocalUser = new LocalProfile();
        newExtUser = new ExtProfile();
        preFillWithTestData();
    }

    private void preFillWithTestData()
    {
        // prefill the newLocalUser
        // and newExtUser classes with dummy data
    }
} 
```

接收表单 POST 的控制器方法（我将 int 从 0 => 1 翻转）是：

```
[HttpPost]
public ActionResult UserRegistration(CreateUserModel newUser)
{
    try
    {
        //stage 0, setup local account
        if (newUser.resumeStage <= 0)
        {
            // do stuff
            newUser.resumeStage = 1;
        }

        // stage 1, setup external account
        if (newUser.resumeStage <= 1)
        {
            // test an exception
            Exception ex = new Exception("TEST: External service provider offline");
            throw ex;
            newUser.resumeStage = 2;
        }

        return RedirectToAction("Index");
    }
    catch (Exception ex)
    {
        return View(newUser); // newUser.resumeStage is 1 here but 
                              // view will disagree
    }
} 
```

创建和呈现表单的控制器方法是：

```
public ActionResult UserRegistration()
{
    // Constructor prefills with test data, nothing more to do
    CreateUserModel newUser = new CreateUserModel();

    return View(newUser);
} 
```

**问题**：有谁知道为什么我似乎无法在 HTML 呈现的文本框中将 resumeStage 显示为 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:04:00.537

您应该添加`ModelState.Remove("resumeStage");`或添加调用到`ModelState.Clear();`

```
catch (Exception ex)
{
    ModelState.Remove("resumeStage");
    return View(newUser); // newUser.resumeStage is 1 here but 
                          // view will disagree
} 
```

# python - Google App Engine Python：从数据库查询中检索到的图像在生产中加载缓慢

> ID：13002194
> 
> 赞同：0
> 
> 时间：2012-10-21T21:03:34.110
> 
> 标签：python, google-app-engine, google-cloud-datastore

我有一个应用程序，用户可以在其中从磁盘上传图像。只要用户登录，该图像就会显示在应用程序的每个页面中。

这是将图像加载到页面的模板部分：

```
{% if currentService.image %}
    <img src='img?img_id={{ currentService.key() }}'></img>
{% else %}
    <img src='static/no_image.jpeg' />
{% endif %} 
```

这就是我在控制器中进行重定向的方式：

```
def main():
    app = webapp2.WSGIApplication([
                                   ('/img', ImageHandler),
                                   ('/.*', MainPage)
                                   ],debug=True)
    wsgiref.handlers.CGIHandler().run(app) 
```

这是相应的处理程序类：

```
class ImageHandler(webapp2.RequestHandler):
    def get(self):
        try:
            rsRequest = db.get(self.request.get("img_id"))
            if rsRequest.image:
                self.response.headers['Content-Type'] = "image/png"
                self.response.out.write(str(rsRequest.image))
            else:
                self.response.out.write("No Image")
        except:
            tb = traceback.format_exc()
            ErrorLog(descripcion = str(tb)).put()
            self.doRender('error_page.html', {'mensaje':tb}) 
```

这是模型类：

```
class Service(db.Model):
    name = db.StringProperty(required = True)
    image = db.BlobProperty() 
```

一切正常。图像始终加载成功。

但是当我在生产中测试我的应用程序时，图像加载速度非常缓慢，而且是渐进式的。

我不知道我做错了什么，因为当我在 localhost 中测试应用程序时，图像加载速度很快（如缓存图像）。

我应该怎么做才能避免缓慢的图像加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:03:22.563

尝试从[Blobstore](https://developers.google.com/appengine/docs/python/blobstore/overview)提供图像，它旨在快速提供大型静态有效负载。它在本地主机上可能很快，因为 dev_appserver 将数据存储保存在内存中，但在生产中它要慢得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T22:02:33.220

可能有很多原因。你用过chrome开发者工具吗？

但是有一个聪明的解决方案。Google 可以为您提供图片。几乎免费而且速度非常快。查看 GAE Python 图像 API 的 get_serving_url。这是一个示例（或在没有 https 的情况下使用它）：

```
https://lh6.ggpht.com/lOghqU2JrYk8M-Aoio8WjMM6mstgZcTP0VzJk79HteVLhnwZy0kqbgVGQZYP8YsoqVNzsu0EBysX16qMJe7H2BsOAr4j=s70 
```

# c++ - Eclipse CDT 不为新项目生成符号

> ID：13002197
> 
> 赞同：1
> 
> 时间：2012-10-21T21:03:43.500
> 
> 标签：c++, eclipse, symbols, eclipse-cdt

我在 Eclipse 中创建的所有新项目都缺少任何自动包含（例如标准库）或任何通常自动生成的默认路径和符号。我可以让我的新项目工作的唯一方法是将路径和符号以及包含手动复制到另一个项目。这是非常乏味且不实用的。有没有办法将这些路径和符号以及包含的内容恢复为默认值？

编辑：这是创建的导出文件（没有数据）：

```
<?xml version="1.0" encoding="UTF-8"?>
<cdtprojectproperties>
<section name="org.eclipse.cdt.internal.ui.wizards.settingswizards.IncludePaths">
<language name="Object File">

</language>
<language name="Assembly Source File">

</language>
<language name="C++ Source File">

</language>
<language name="C Source File">

</language>
</section>
<section name="org.eclipse.cdt.internal.ui.wizards.settingswizards.Macros">
<language name="Object File">

</language>
<language name="Assembly Source File">

</language>
<language name="C++ Source File">

</language>
<language name="C Source File">

</language>
</section>
</cdtprojectproperties> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T00:59:23.637

`Export/Import Settings`这是我在调查您遇到的导出问题时偶然发现的按钮的替代方案。这实际上是一个我想从现在开始使用的过程，所以如果没有别的，我从回答你的问题中学到了一些东西。可能有一种更清洁或更快的方法来做同样的事情，但这至少有效。

*   打开 Eclipse 首选项并导航到`C/C++`→ `Property Pages Settings`。检查`Display "Export Settings" tab`。
*   创建一个新`C++ Project`的代表您的设置。`Empty Project`与您喜欢的工具链一起工作，但我怀疑您选择什么是否重要。
*   打开此设置项目的属性并导航到`C/C++ General`→ `Export Settings`。
*   在此处添加常用的包含文件夹和文件、符号、库和库路径。
*   打开普通 C++ 项目的属性并导航到`Paths and Symbols`→ `References`。选中新设置项目名称旁边的框。
*   在您的设置项目中分配的导出设置现在出现在您的正常项目中。

现在，当您再次需要这些设置时，只需将该设置项目导入您的工作区并让其他项目引用它。

让我知道这是否适合您。我仍在摆弄它（有很多可用的新选项可以通过这种方法打开），所以任何反馈都会很棒。

* * *

*编辑*：[此答案](https://stackoverflow.com/a/1942562/1201210)描述了在项目之间共享设置的另一种方法。如果您不喜欢我在这里描述的“项目作为设置”，它可能对您更有效。

# r - S4 类：每个插槽多种类型

> ID：13002200
> 
> 赞同：21
> 
> 时间：2012-10-21T21:04:30.237
> 
> 标签：r, s4

是否可以创建一个 S4 类，其中一个或多个插槽可以属于多个类？例如。假设您遇到数据可以是向量或 data.frame 的情况。

```
exampleClass <- setClass("exampleClass",
    representation(raw=c("data.frame","numeric","character"),
    anotherSlot=c("data.frame","numeric")) 
```

或者，这是需要定义子类/超类的情况吗？

PS：搜索有关 S4 课程的有用教程会产生有限的结果。链接到一个关于 S4 类创建/使用/文档的好教程将不胜感激。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-22T00:17:19.587

R有“阶级联合”，所以

```
setOldClass("data.frame")
setClassUnion("data.frameORvector", c("data.frame", "vector")) 
```

该类`data.frameORvector`是虚拟的，因此不能被实例化，但可以在其他槽（`representation=`）中使用，作为包含的类（`contains=`），并用于调度

```
A = setClass("A", 
        representation=representation(x="data.frameORvector"))

> A(x=1:3)
An object of class "A"
Slot "x":
[1] 1 2 3

> A(x=data.frame(x=1:3, y=3:1))
An object of class "A"
Slot "x":
  x y
1 1 3
2 2 2
3 3 1 
```

方法可能很难实现，因为您所知道的是槽包含类联合的父类型之一。

```
setGeneric("hasa", function(object) standardGeneric("hasa"))
setMethod("hasa", "data.frameORvector", function(object) typeof(object@x))

> hasa(A(x=1:5))
[1] "integer"
> hasa(A(x=data.frame(y=1:5)))
[1] "list" 
```

实际上，我发现关于`?Classes`、`?Methods`、`?setClass`和朋友的文档很有帮助。Hadley Wickham 有一个[教程](http://adv-r.had.co.nz/S4.html)（此页面上的示例不是那么强大，它实例化了`Person`，而从概念上讲，人们会编写一个`People`来利用 R 的矢量化优势）并且最近的[Bioconductor 课程](http://bioconductor.org/help/course-materials/2012/Seattle-Oct-2012/)中有一个部分。我认为两者都没有详细介绍阶级工会。

# ember.js - 管理交易和关系

> ID：13002201
> 
> 赞同：3
> 
> 时间：2012-10-21T21:04:45.213
> 
> 标签：ember.js, ember-data

我正在尝试在具有两个 belongsTo 关系的模型上管理 ember-data 事务（创建和提交记录）。最初，我只是使用（在 Coffeescript 中）将新记录添加到交易中： `@transaction.createRecord(App.Book, {author: App.router.authorController.get('content')})`

这将作者属性（这是一个 DS.belongsTo 关系）设置为当前作者，然后用户在一个表单中设置书籍的其他属性，包括来自选择元素（假设是出版商）的另一个 belongsTo 关系。这工作正常，但如果用户去创建第二条新记录，我会得到以下断言：

`Ember.assert("All records in a changed relationship must be in the same transaction. You tried to change the relationship between records when one is in " + t + " and the other is in " + prev, t === prev);`

这是来自[Ember Data 中 one_to_many_change.js 文件的第 203 行](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/associations/one_to_many_change.js)

我认为这意味着我必须手动将所有相关模型对象添加到事务中。因此，我可以使用以下方式将作者模型添加到事务中：

```
author = App.router.authorController.get('content')
@transaction.add(author) 
```

然后对事务中可能受影响的任何发布者模型执行相同的操作（我在控制台中执行这些操作）。但是，当我这样做时，我会收到以下错误：

`Error: assertion failed: Once a record has changed, you cannot move it into a different transaction`

即使先前的（原始）事务已提交，也会发生这种情况。只是想知道其他人是如何处理这个问题的。我想在交易中分配这种关系必须是 Ember Data 应用程序中的常见过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:08:42.217

看起来您的`author`对象已被修改并附加到默认事务。然后，您创建一个新事务并为此创建一本书。

然后，您有 2 条记录需要保留，它们都通过关联链接，但它们位于不同的事务中。

一种方法是使用`author`交易来创建您的书

```
var book = author.get('transaction').createRecord(App.Book, {author: author}); 
```

# java - url 收割机字符串操作

> ID：13002202
> 
> 赞同：0
> 
> 时间：2012-10-21T21:04:46.363
> 
> 标签：java, string, substring

我正在做一个递归 url 收获..当我在源中找到一个不以“http”开头的链接时，我将它附加到当前 url。问题是当我遇到动态站点时，没有 http 的链接通常是当前 url 的新参数。例如，如果当前 url 类似于[http://www.somewebapp.com/default.aspx?pageid=4088](http://www.somewebapp.com/default.aspx?pageid=4088)并且在该页面的源中有一个链接是 default.aspx?pageid=2111。在这种情况下，我需要做一些字符串操作；这是我需要帮助的地方。
伪代码：

```
if part of the link found is a contains a substring of the current url
      save the substring            
      save the unique part of the link found
replace whatever is after the substring in the current url with the unique saved part 
```

这在java中会是什么样子？有什么不同的想法吗？谢谢。

根据评论，这是我尝试过的：

```
if (!matched.startsWith("http")) {
    String[] splitted = url.toString().split("/");
    java.lang.String endOfURL = splitted[splitted.length-1];
    boolean b = false;
    while (!b && endOfURL.length() > 5) { // f.bar shortest val
        endOfURL = endOfURL.substring(0, endOfURL.length()-2);
        if (matched.contains(endOfURL)) {
            matched = matched.substring(endOfURL.length()-1);
            matched = url.toString().substring(url.toString().length() - matched.length()) + matched;
            b = true;
        }
    } 
```

效果不好。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:19:42.270

我认为你这样做是错误的。Java 有两个类`URL`，`URI`它们能够比“string bashing”解决方案更准确地解析 URL/URL 字符串。例如，URL 构造函数[`URL(URL, String)`](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html#URL%28java.net.URL,%20java.lang.String%29)将在现有对象的上下文中创建一个新`URL`对象，而无需担心 String 是绝对 URL 还是相对 URL。你会像这样使用它：

```
URL currentPageUrl = ...
String linkUrlString = ...

// (Exception handling not included ...)
URL linkUrl = new URL(currentPageUrl, linkUrlString); 
```

# actionscript-3 - 响应者对象 - 如何获取函数名称 AS3

> ID：13002210
> 
> 赞同：0
> 
> 时间：2012-10-21T21:05:49.547
> 
> 标签：actionscript-3, apache-flex, netconnection

我正在使用 NetConnection 对象从 AS3 进行 PHP 调用。call() 方法接收一个 Responder 对象以知道哪个函数将处理来自 PHP 的响应。我想知道的是是否有可能知道函数的名称和该函数所在的类/文件（假设我有 Responder 对象的引用）。

# objective-c - 不使用固定值计算像元高度

> ID：13002211
> 
> 赞同：2
> 
> 时间：2012-10-21T21:06:03.227
> 
> 标签：objective-c, uitableview

我需要计算包含多行环绕文本的 UITableViewCell 的高度。到目前为止，我找不到 100% 准确的方法来做到这一点。此外，我目前使用的技术在很大程度上依赖于固定值：

```
NSString *cellText;    
cellText = @"Very long multi line text in this String ...";
UIFont *cellFont = [UIFont fontWithName:@"Helvetica" size:14.0];
CGSize constraintSize = CGSizeMake(280.0f, MAXFLOAT);
CGSize labelSize = [cellText sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:NSLineBreakByWordWrapping];
return labelSize.height + 32; 
```

仅在这几行中使用的固定值：

*   字体大小 (14)
*   字体类型（Helvetica）
*   CGSize, 宽度 (280.0f)
*   我发现需要随机填充值 (32)

**有没有一种很好的方法可以以动态获取和计算所有这些固定值的方式重写它？**

这将有助于使布局更具响应性和代码可重用。我很欣赏任何最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:53:52.597

您的代码看起来不错，但您错过了适合单元格的计算。您需要在单元格（父视图）中添加标签的最顶部位置和标签的最底部位置。

就这样计算

```
 return labelSize.height + 2*yourLabelInCell.frame.origin.y  //here label's topmost postion and label's bottommost postion in cell added 
```

标签将在单元格中适当调整。

# html - HTML：如何仅为特定类设置链接颜色

> ID：13002212
> 
> 赞同：4
> 
> 时间：2012-10-21T21:06:16.050
> 
> 标签：html, css, hyperlink

我刚刚看到这个问题[单击链接时不要更改链接颜色](https://stackoverflow.com/questions/4383460/dont-change-link-color-when-a-link-is-clicked)，现在我被卡住了。

我的页面上有多个链接，其中一些带有`class="menuLink"`. 现在仅适用于那些我想将颜色设置为正常链接的人。如果我只是使用

```
a:link { color:green}
a:hover { color:red }
... 
```

这将适用于所有链接。但两者都没有

```
.menuLink:link {color:green} 
//I think because the css "doesn't know" that this class is used for links 
```

也不

```
.menuLink a:link {color:green} 
```

工作。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-21T21:08:54.040

你很亲密。

```
a.menuLink:link { color: green; } 
```

是你想要达到的目标。但是试试这个：

```
a.menuLink { color: green; } 
```

意味着 a*`a`的类名是`menuLink`*，`:link`是多余的。

* * *

```
.menuLink a:link 
```

意味着*`a` **在**类名为 的元素`menuLink`*内部。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T21:09:20.890

你有没有尝试过：

```
 .menuLink {color: green;} 
```

# jquery - Fadein AJAX 在页面中加载

> ID：13002214
> 
> 赞同：0
> 
> 时间：2012-10-21T21:06:42.107
> 
> 标签：jquery

我有一个历史 API 脚本，它使用 jQuery 从页面加载新内容。如何淡入新加载的名为 div 的 div `#load`？

```
$.ajax({
    url: url,
    type: 'GET',

    dataType: "html",
    success: function (responseData) {

        $("#main").html($("#load", responseData).html());
        if (url =='Home'){

            $.get("phpscripts/getFeed.php",function(result){
                $("#newsFeed").html(result);
            }); 
        }

    },
    error: function (jqXHR, textStatus, errorThrown) {
        alert(jqXHR.status + " : " + errorThrown);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:13:51.617

这条线需要改变

```
 $("#main").html($("#load", responseData).html()); 
```

它说获取 html INSIDE`#load`但不会包含`#load`自身

尝试：

```
 $(responseData).find('#load').appendTo( "#main").fadeIn(); 
```

另外，请确保您没有在页面中重复 ID。从之前的帖子我相信你可能是。ID 必须是唯一的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:20:25.917

Found answer, was trying to fadeIn `#load` when should have been `#main`. Thanks to @charlieftl for pointing me in the right direction!

# google-apps-script - JDBC 从数据库中读取... TypeError：无法调用 null 的方法“getRange”。（第 9 行）

> ID：13002218
> 
> 赞同：2
> 
> 时间：2012-10-21T21:06:53.093
> 
> 标签：google-apps-script

我希望有人可以帮助我从此处的数据库示例中读取 JDBC 脚本... [https://developers.google.com/apps-script/jdbc](https://developers.google.com/apps-script/jdbc) ...与我的数据库一起使用。

```
 function foo() {
      var conn = Jdbc.getConnection("jdbc:mysql://<host>:3306/<instance>", "user", "password");
      var stmt = conn.createStatement();
      stmt.setMaxRows(100);
      var start = new Date();
      var rs = stmt.executeQuery("select * from clients");

      var doc = SpreadsheetApp.getActiveSpreadsheet();
      var cell = doc.getRange('a1');
      var row = 0;
      while(rs.next()) {
        cell.offset(row, 0).setValue(rs.getString(1));
        cell.offset(row, 1).setValue(rs.getString(2));
        cell.offset(row, 2).setValue(rs.getString(3));
        cell.offset(row, 3).setValue(rs.getString(4));
        row++;
      }
      rs.close();
      stmt.close();
      conn.close();
      var end = new Date();
      Logger.log("time took: " + (end.getTime() - start.getTime()));
    } 
```

我插入了我的服务器和用户信息，并将 select * 语句更改为我的数据库中的表“clients”。连接成功，但出现以下错误...

**TypeError：无法调用 null 的方法“getRange”。（第 9 行）**

我的数据库中的“客户”表具有以下列...

```
 id, clientname, clientcontact, clientphone, clientnote 
```

有人可以帮助我了解示例脚本中需要更改哪些内容才能与我的客户表一起使用吗？到目前为止，我还不是程序员......但我想让它工作并将其用作模板，将数据从 mysql 获取到谷歌电子表格中，这样我就可以在我的谷歌网站上发布表格。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:27:23.430

该脚本应该从电子表格容器中运行，或者至少可以访问电子表格以写入其结果。

所以你有两种可能性：

1.  在电子表格脚本编辑器中复制/粘贴您的脚本并从那里运行它。

2.  用 openbyId(spreadsheet id) 替换电子表格App.getActive （有关更多信息，请参阅[其他帖子](https://stackoverflow.com/questions/12990637/accessing-spreadsheet-in-google-script/12990713#12990713)）您确实处于几乎相同的情况，因为您的脚本与其使用的电子表格没有直接关系。

# php - 需要对 cookie 中的电子邮件地址进行编码或加密

> ID：13002219
> 
> 赞同：1
> 
> 时间：2012-10-21T21:06:54.167
> 
> 标签：php, cookies, encryption, encoding

在某个地方，但我不记得在哪里，我读到在 cookie 中存储敏感信息时，您应该加密或至少对数据进行编码。

到目前为止，我只使用了一个 cookie，它只是为了在登录页面上记住我的电子邮件功能。加密似乎有点矫枉过正，但我​​想知道至少对存储在 cookie 中的电子邮件地址进行编码是否是一种好的做法？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:14:45.243

它是一种更好的用户隐私保护策略来加密其数据。所以我认为你应该加密用户电子邮件。

阅读[这篇](http://blog.teamtreehouse.com/encrypting-cookies-in-the-browser)文章，因为它可能对你有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T21:16:06.500

我的回答：**不疼**

老实说，如果他们将电子邮件放入网络表单中，我不会太在意加密它。我可能会或多或少地对它进行base64编码，所以我不必担心unicode字符。但是全盘加密呢？一般网站可能不需要。

但是，就像我说的，它不疼。虽然我认为没有必要，但如果您不喜欢将人们的电子邮件留在 cookie 中，一个简单的[crypt](http://us3.php.net/crypt)调用可以让您高枕无忧。

任何类型的会话劫持都不能仅通过电子邮件地址完成，但是让某人能够将他们的电子邮件与您的网站相关联*是一个隐私问题。*

# android - 在 Android 中通过 Wi-Fi 传输文件

> ID：13002222
> 
> 赞同：2
> 
> 时间：2012-10-21T21:07:44.433
> 
> 标签：android, file, wifi, file-transfer, android-wifi

我想制作一个 Android 应用程序，它可以通过 Wi-Fi 将文件从一部手机传输到另一部手机。在 Android 4.0 中，它可以通过 Wi-Fi direct 来完成，但是对于不支持 Wi-Fi direct 的较低版本，这怎么可能呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T21:48:25.990

您可以通过打开网络连接来执行此操作。这将通过 Wifi 或设备具有的任何连接工作。假设设备 A 想要向设备 B 发送一个文件。

1.  B 打开一个监听端口
2.  A 打开文件作为输入流
3.  A连接到B的监听端口
4.  A 通过套接字发送文件
5.  A 关闭套接字
6.  B 将其缓冲区写入新文件

检查[此参考](http://developer.android.com/reference/java/net/Socket.html)并询问您是否有任何问题。

# javascript - jquery淡入淡出问题

> ID：13002223
> 
> 赞同：-1
> 
> 时间：2012-10-21T21:07:47.807
> 
> 标签：javascript, jquery, css, nivo-slider

我在这里有一段代码可以工作，但不确定为什么我的淡入淡出对身体不起作用，如果您认为我遇到了什么问题，请告诉我谢谢

```
 <script type="text/javascript">
$(window).load(function() {
    var lastSlide = "";
    $('#slider').nivoSlider({
        effect: 'random',
        directionNavHide : true,
        slices : 15,
        animSpeed : 500,
        pauseTime : 6000,
        controlNav : false,
        pauseOnHover : true,
        directionNav:true, //Next & Prev
        directionNavHide:true, //Only show on hover
        beforeChange: function(){
            if(lastSlide == "images/header_used.jpg") {  //use the bg image of the slide that comes before the newslide
                $("body").attr("style","background: #000 url(images/bg.jpg) top center no-repeat;").fadeIn("slow");
            } else {
                $("body").attr("style","background: #ADADAD url(images/bgnd_grad.jpg) repeat-x;").fadeOut("slow");
            }
        },
        afterChange: function() {
            t = $(this).children("a:visible");
            lastSlide = $("img", t).attr("src");
        }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:00:57.757

这是因为“lastSlide”变量可以存储多个对象（一个来自img，一个来自可见链接）。

```
 t = $(this).children("a:visible");
 lastSlide = $("img", t).attr("src");  //could store multiple source. 
```

这使比较有点棘手，并且可能会产生错误。

再加上你用最糟糕的方式来塑造你的身体。正如其他人所说，使用类或 .css jQuery 函数 (http://api.jquery.com/css/)。

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:48:24.780

淡入淡出对身体有效，绝对。正如Reflective所说， `$("body").css("background","#000 url(images/bg.jpg) top center no-repeat;").fadeOut("slow")` 如果仍然不起作用，您应该查看您的nivoSlider函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T21:18:59.473

虽然它可以用身体背景解决你的任务。相反，我会使用 addClass 和 removeClass。您正在操作也显示/隐藏使用它的样式属性。

我无法测试它，但如果你将淡入淡出切换到 show() 和 hide() 会发生什么，只是为了确定延迟是否是一个因素.. :)

# c++ - 错误调用函数无法转换类型

> ID：13002226
> 
> 赞同：0
> 
> 时间：2012-10-21T21:08:06.023
> 
> 标签：c++, templates, compiler-errors, comparable

为类编写程序并尝试调用函数“build”我一直收到错误消息，说不能将参数 1 从 'TreeNode *' 转换为 'std::string' Tree 和 TreeNode 的类写在其他头文件中文件，但包括在内 函数构建应该从排序的中序和预排序创建一棵树。主要部分是以我们应该编写函数的方式提供给我们的。不需要帮助来找出功能，但需要帮助来修复此错误。

```
template <class Comparable>
TreeNode<Comparable> *build(Comparable prefix[], Comparable infix[] , int Pi , int Pj , int   Ii , int Ij);

int main()
{

    string in[] = {"Apr", "Aug" ,"Dec", "Feb", "Jul", "Jun",  "Mar", "May", "Nov", "Oct",      "Sep"} ;
    string pre[] = {"Jul", "Feb", "Apr", "Aug", "Dec", "Mar", "Jun", "May", "Sep", "Oct", "Nov"} ;
    Tree<string> *tree = new Tree<string>(build(pre,in,0,10,0,10)) ;
}

TreeNode<Comparable> *build(Comparable prefix[], Comparable infix[] , int Pi , int Pj , int Ii , int Ij)
{
    int preIndex = 0;
    TreeNode<Comparable> rNode = new TreeNode<Comparable>(prefix[preIndex]);
    if(Ii > Ij)
    {
        return NULL;
    }
    if(preIndex>=Pj)
    {
        return NULL;
    }
    int i =0;
    for (i=Ii; i<Ij;i++)
    {
        if(infix[i]==rNode.item)
        {
            break;
        }
    }
    rNode.left=build(Comparable prefix[], Comparable infix[] , int Pi , int Pj , int Ii , int Ij-1);
    rNode.right=build(Comparable prefix[], Comparable infix[] , int Pi , int Pj , int Ii+1, int Ij);*/
} 
```

树节点类

```
#ifndef _TREENODE_H
#define _TREENODE_H

#include <iostream>
using namespace std;
template <class Comparable>

class TreeNode {

public:     
    Comparable  item;         // The data in this node.
    TreeNode *left;   // Pointer to the left subtree.
    TreeNode *right;  // Pointer to the right subtree.

    TreeNode  (Comparable value) 
    {
        item=value;
        left=NULL;
        right=NULL;
    };     // Constructor.  Make a node containing value.
    TreeNode  (Comparable value, TreeNode *leftTree, TreeNode *rightTree) 
    {
        item=value;
        left=leftTree;
        right=rightTree;
    };// Constructor. 
    template <class Comparable>
    friend class Tree ;
 };
 #endif 
```

树类（未明确完成）

```
#ifndef _TREE_H
#define _TREE_H

#include <iostream>
#include "TreeNode.h"
using namespace std;

template <class Comparable>
class Tree{
public :
    TreeNode< Comparable> *root ;

    Tree () 
    {    // dedault constructor 
        root = NULL ;
    }

    Tree  (Comparable value)  // constructor ;create a single node tree
    {
        root = new TreeNode<Comparable>(value);
    };  // constructor        

    Tree(Comparable value , Tree left, Tree right) 
    {
        root = new TreeNode<Comparable>(value, left, right);
    };
    Tree build(Comparable prefix[], Comparable infix[] , int Pi , int Pj , int Ii , int Ij)
    {
    }
    Tree (Tree  &other)    // copy constructor
    {
        copyTree(other.root, root);
    };

    /*Tree(TreeNode *r )   //  constructor taking a pointer to a tree node
    {
        root=new TreeNode<Comparable>(r->item,r->left,r->right);
    };*/
    Tree & operator = (const Tree &rhs)         // overload assignment operator
    {
        copyTree(rhs.root,root);
    };

    ~Tree()  // destructor
    {
        delete left;
        delete right;
    }

    void preorder()
    {
        if(root != NULL)
        {
            leftTemp = new TreeNode<Comparable>(root->item,root->left,root->right);
            rightTemp = new TreeNode<Comparable>(root->item,root->left,root->right);
            cout<<root->item<<” “;
            leftTemp=leftTemp->left;
            preorder();
            rightTemp = rightTemp->right;
            preorder();
        }

    }
    void postorder()
    {
        if(root != NULL)
        {
            leftTemp = new TreeNode<Comparable>(root->item,root->left,root->right);
            rightTemp = new TreeNode<Comparable>(root->item,root->left,root->right);
            leftTemp=leftTemp->left;
            postorder(root->left);
            rightTemp = rightTemp->right;
            postorder(root->right);
            cout<<root->item<<” “;
        } 

    }
    void inorder()
    {
        if(root != NULL)
        {
            leftTemp = new TreeNode<Comparable>(root->item,root->left,root->right);
            rightTemp = new TreeNode<Comparable>(root->item,root->left,root->right);
            leftTemp=leftTemp->left;
            inorder();
            cout<<root->item<<” “;
            rightTemp = rightTemp->right;
            inorder();
        }
    }

       // the following recursive functions that print the tree node and its level #

    void preorder(int level) 
    {
        if(root != NULL)
        {
            leftTemp = new TreeNode<Comparable>(root->item,root->left,root->right);
            rightTemp = new TreeNode<Comparable>(root->item,root->left,root->right);
            cout<<root->item<<” “&lt;<level<<” “;
            leftTemp=leftTemp->left;
            preorder(level+1);
            rightTemp = rightTemp->right;
            preorder(level+1);
        }
    }
    void postorder(int level)
    {
        if(root != NULL)
        {
            leftTemp = new TreeNode<Comparable>(root->item,root->left,root->right);
            rightTemp = new TreeNode<Comparable>(root->item,root->left,root->right);
            leftTemp=leftTemp->left;
            postorder(level+1);
            rightTemp = rightTemp->right;
            postorder(level+1);
            cout<<root->item<<” “&lt;<level<<” “;
        } 
    }
    void inorder(int level )
    {
        if(root != NULL)
        {
            leftTemp = new TreeNode<Comparable>(root->item,root->left,root->right);
            rightTemp = new TreeNode<Comparable>(root->item,root->left,root->right);
            leftTemp=leftTemp->left;
            inorder(level+1);
            cout<<root->item<<” “&lt;<level<<” “;
            rightTemp = rightTemp->right;
            inorder(level+1);
        }
    }

    // the following recursive function prints the  tree node with its parent and level number 

    /*void preorder(TreeNode< Comparable> *p , int level) ;  // recursive preorder with level #

    void postorder(TreeNode< Comparable> *p , int level) ;  // recursive postorder with level #

    void inorder(TreeNode< Comparable> *p , int level) ;  // recursive inorder with level #

    void byLevel();  // print the tree by level , use of STL queue class

    /*int weight() ;   // returns the total number of nodes in the tree

    int height();    //  returns the height of the tree

    // the following three are non-recursive version use of STL stack class

    /*void pre() ;        // non-recursive preorder   
    void in() ;         // non-recursive inorder() 
    void post() ;       // non-recursive postorder() 

    // static function build2Tree build a nearly perfect balanced binary tree: detail will discuss in class
    static Tree *build2Tree( Comparable arr [] , int n);  */
    void copyTree(TreeNode<Comparable>* &copiedTreeRoot, TreeNode<Comparable>* otherTreeRoot)
    {
        if(otherTreeRoot == NULL)
        {
            copiedTreeRoot = NULL;
        }
        else
        {
            copiedTreeRoot = new nodeType<Comparable>;
            copiedTreeRoot->info = otherTreeRoot->info;
            copyTree(copiedTreeRoot->llink, otherTreeRoot->llink);
            copyTree(copiedTreeRoot->rlink, otherTreeRoot->rlink);
        }
    }//end copyTree

} ;
#endif 
```

编辑：添加树/树节点类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:25:27.670

你的错误在这里：

```
TreeNode<Comparable> rNode = new TreeNode<Comparable>(prefix[preIndex]); 
```

这应该是

```
TreeNode<Comparable> * rNode = ...
                     ^
                     note star 
```

现在让我们解释错误：

在这一行中，您尝试从 type 的表达式*构造* ，但它似乎有构造函数，未标记为，接受。喜欢`TreeNode<Comparable>``TreeNode<Comparable>*``TreeNode<Comparable>``explicit``std::string`

```
template <typename T>
struct TreeNode
{
TreeNode(const std::string&) {}
}; 
```

编译器解释代码的唯一可能方法是强制`TreeNode<Comparable>`转换`std::string`为调用该构造函数。但它不能。所以你会得到这样的错误。

现在，你必须`rNode`使用`->`insread of进行评估`.`，因为它变成了一个*指针*。

* * *

另外，这段代码

```
rNode.left=build(Comparable prefix[], Comparable infix[] , int Pi , int Pj , int Ii , int Ij-1);
    rNode.right=build(Comparable prefix[], Comparable infix[] , int Pi , int Pj , int Ii+1, int Ij);*/ 
```

看起来无效。它应该是

```
rNode->left=build(prefix, infix, Pi, Pj, Ii, Ij-1);
rNode->right=build(prefix, infix, Pi, Pj, Ii+1, Ij); 
```

（我认为这是错字）

* * *

当您尝试在`Tree`此处创建时，会发生与第一点相同的事情：

```
Tree<string> *tree = new Tree<string>(build(pre,in,0,10,0,10)) ; 
```

`build`返回你`TreeNoed<std::string>`，但你`Tree<std::string>`有一个构造函数接受`std::string`（即`Comparable`）

您可能需要将新的构造函数添加到`Tree`：

```
Tree(TreeNode< Comparable>* r):root(r){} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T21:48:53.977

```
Tree  (Comparable value)  // constructor ;create a single node tree
    {
        root = new TreeNode<Comparable>(value);
    } 
```

这是你的错误。它期待一个“字符串”，你传递了一个指向它的指针。

和这里

```
TreeNode  (Comparable value) 
    {
        item=value;
        left=NULL;
        right=NULL;
    } 
```

同样的事情，期待一个 Comparable（这是一个字符串）并得到一个 TreeNode *

还有一些函数后面的分号是怎么回事？是的，那个接受 TreeNode * 的注释块。取消注释以了解:-)

# javascript - Javascript string.slice() 只工作一次

> ID：13002227
> 
> 赞同：1
> 
> 时间：2012-10-21T21:08:19.563
> 
> 标签：javascript, slice

这让我发疯了好几个小时，我确定我错过了一些简单的东西，或者可能没有。

我正在使用 Javascript 将我的个人主页变成类似应用程序的控制台。你可以在这里查看：www.fort-hub.com

我正在映射击键并使用退格键（键码 8）来更改调用`innerHTML`的控制台输入的属性，以减少一个结束字符，如下所示：`div``#in``slice()`

HTML：

```
<!doctype html>

<html lang='en-gb'>

<head>

<meta charset="UTF-8">
<title>FortHUB</title>
<link href="ss.css" rel="stylesheet" type="text/css">   
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;"> 

</head>

<body>

<div id="console">
    <div id="out"><h1>Welcome to fort-hub console</h1></div>

    <div id="in">
        <span id="text"></span><span id="cursor"><</span>
    </div>
</div>

<script src="fH.js"></script>

</body>

</html> 
```

Javascript：

```
/* Globals */
var _NL_ = '>';
var consoleIn = document.getElementById('text');
var consoleOut = document.getElementById('out');

/* Func in question */
function keyPress(event)
{
    event.preventDefault();
    event.stopPropagation();

    var e = event || window.event;
    var key = e.which || e.keyCode;
    var keyChar;

    var allowedChars = new Array();
    allowedChars[0] = 8; /* backspace */
    allowedChars[1] = 13; /* return */
    allowedChars[2] = 32; /* space */

    /* Alphanumeric range only */
    if(key > 46 && key < 90 || inArray(allowedChars, key) === true)
    {
        keyChar = String.fromCharCode(key);
        var input = trim(consoleIn.innerHTML);
        /* Map backspace */
        if(key === 8)
        {
               consoleIn.innerHTML = input.slice(0, -1);
        }
        ...
        consoleIn.innerHTML += keyChar.toLowerCase();
    }
    ...
} 
```

因此，请通过转到 URL、输入内容并按退格键来测试这一点。将删除一个字符，但重复退格不会删除字符串的其余字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T21:18:26.770

删除最后一个字符后，您将实际的退格字符代码 ( ) 附加`0x08`到您的元素。它不是由浏览器呈现的，但是下次您尝试再次删除最后一个字符时，实际上是删除了该退格符，并立即添加了一个新的退格符。

您不应将已处理的控制字符附加到元素的`innerHTML`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T21:19:06.923

如果按下的键是退格键，则从 中删除最后一个字符`input`（并将 innerHTML 设置为`remain`），但仍将 添加`keyChar`到`innerHTML`. 这个附加`\x08`（根据字体和浏览器不显示，不被 Stackoverflow 接受为输入）。

在 之后添加一条`return`语句`consoleIn.innerHTML = input.slice(0, -1);`以中止按键处理程序。

# c++ - 在 c++ 中将 x 和 y 速度缩放到 -MAX 和 MAX 之间

> ID：13002230
> 
> 赞同：1
> 
> 时间：2012-10-21T21:08:39.737
> 
> 标签：c++, coordinates, velocity, max

我正在尝试将一些 x 和 y 速度值缩放到 -MAX 和 MAX 之间并保持它们的比例。这些数字可以是负数、零或正数。这被用来对 x 和 y 速度实施速度限制。这是我所拥有的：

```
if(abs(velocities.x) <= MAX_TRANSLATIONAL_VELOCITY && abs(velocities.y) <= MAX_TRANSLATIONAL_VELOCITY)
    return;

float higher = max(abs(velocities.x), abs(velocities.y));

velocities.x = (velocities.x / higher) * MAX_TRANSLATIONAL_VELOCITY;
velocities.y = (velocities.y / higher) * MAX_TRANSLATIONAL_VELOCITY; 
```

这并没有真正起作用，而且我正在应用它的机器人有点令人眼花缭乱。有没有标准的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:15:17.843

要对向量进行归一化，您不应将其分量除以其中任何一个的最大值，而应除以它们的大小，即向量的[欧几里德范数。](http://en.wikipedia.org/wiki/Norm_%28mathematics%29#Euclidean_norm)

实际上，您不应该检查单个分量，首先计算幅度，然后如果超过 MAX_MAGNITUDE，则对向量进行归一化并将其乘以 MAX_MAGNITUDE。

```
float magnitude = sqrt(v.x*v.x + v.y*v.y);

if (magnitude > MAX_MAGNITUDE)
{
  v /= magnitude; // I'm assuming overloaded operators here
  v *= MAX_MAGNITUDE;
} 
```

# ruby-on-rails - 使用 Capistrano 部署 Rails 应用程序

> ID：13002232
> 
> 赞同：1
> 
> 时间：2012-10-21T21:08:53.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capistrano, mediatemple

我刚刚获得了一个 Media Temple (dv) 4.0 服务器来部署我通过 git 存储库创建的 Rails 应用程序。我是 Rails 新手，但 Capistrano 部署似乎很简单。尽管如此，我整天都在努力部署我的第一个 Rails 项目。这是我在设置和检查后执行“cap production deploy -v”时遇到的错误：

```
** [out :: 64.207.184.51] rake aborted!
** [out :: 64.207.184.51] no such file to load -- rubygems 
```

我整天都在服务器上安装 gems，所以我认为没有安装 ruby​​gems。这是经过数小时的调试，为什么它告诉我我的公钥无效。

这是我的配置文件：

帽文件：

```
require 'capistrano/ext/multistage'

load 'deploy'
load 'deploy/assets'
load 'config/deploy'
set :application, 'snippet'
set :domain, '[server IP address]'
set :user, 'root' 
```

配置/部署.rb

```
require 'capistrano/ext/multistage'
default_run_options[:pty] = true
set :stages, ["production"]
set :default_stage, "production"
set :application, "[app name]"
set :scm, :git
set :repository, "git@github.com:[github.com repository]"
set :branch, "master"
set :user, "root"
set :use_sudo, false
set :deploy_via, :remote_cache
set :scm_passphrase, "[public ssh key passphrase]" 
```

配置/部署/production.rb

```
server "[server IP]", :app, :web, :db, :primary => true
set :deploy_to, "/var/www/vhosts/[domain]/httpdocs" 
```

错误输出：

```
vespertine:snippet nporteschaikin$ cap production deploy -v
** transaction: start
/Users/nporteschaikin/.rvm/gems/ruby-1.9.2-p320/gems/capistrano-2.13.4/lib/capistrano/recipes/deploy.rb:107: warning: Insecure world writable dir /Users/nporteschaikin/.rvm/gems/ruby-1.9.2-p320/bin in PATH, mode 040777
Password: 
** [IP-ADDRESS :: out] Enter passphrase for key '/root/.ssh/id_rsa':
** [IP-ADDRESS :: out]
** [IP-ADDRESS :: out] Enter passphrase for key '/root/.ssh/id_rsa':
** [IP-ADDRESS :: out]
** [out :: IP-ADDRESS] (in /var/www/vhosts/[domain.com]/httpdocs/releases/20121021210706)
** [out :: IP-ADDRESS] rake aborted!
** [out :: IP-ADDRESS] no such file to load -- rubygems
** [out :: IP-ADDRESS] /var/www/vhosts/[domain.com]/httpdocs/releases/20121021210706/Rakefile:5:in `require'
** [out :: IP-ADDRESS] (See full trace by running task with --trace)
*** [deploy:update_code] rolling back
failed: "sh -c 'cd /var/www/vhosts/[domain.com]/httpdocs/releases/20121021210706 && rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile'" on IP-ADDRESS 
```

请帮忙！我在服务器上安装了 RVM、Ruby、Passenger 和 Rails。

# database - 快速聚合大量数据的替代方案

> ID：13002237
> 
> 赞同：0
> 
> 时间：2012-10-21T21:09:21.840
> 
> 标签：database, nosql, aggregate-functions, infinidb

我正在使用 InfiniDB 将大量行（大约 100-5 亿）聚合到大约不到 5000 个组。（在大多数查询中，过滤了 100-5 亿行，因此聚合将在更少的行上起作用）

它被用作网站旅行搜索引擎的原型，您可以将其视为“为特定人数的所有房间组合提供最优惠的每间住宿价格”。

它工作正常，直到我必须多次自我加入表格，才能找到最优惠的价格组合（它已经通过逻辑过滤器减少了，因此每个连接的组合数量也减少了）

我可以将表的内容拆分到不同的表中，并且它的性能可以接受，但是现在我问自己 infinidb（或一般的面向列的数据库）是否是解决这个问题的最佳解决方案。

什么是替代品？我认为每个 map/reduce 机制（mongodb、hadoop）都会慢得多，还是我想念它？

它不应该需要超过 2-5 台服务器。

说清楚：我不指望“这将是完美的！” 答案，但对替代品的良好提示。我也认为 infinidb 对我的场景来说是一个糟糕的解决方案。

感谢您的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:31:58.463

我在 9 台机器上使用了 infinidb 3，其表的行数超过 300 亿行，即使使用自联接也没有任何问题。

给我一个例子 ddl + dql。也许我可以帮助您改进查询。

在 Infinidb 之前，我们尝试了 hbase / cassandra / mongodb 和技术，但我们不喜欢它。对于 5 亿行，如果您需要每天执行不超过 2-3 次，则可以使用简单的 Mysql。

# java - 检查一个方法没有被调用

> ID：13002238
> 
> 赞同：5
> 
> 时间：2012-10-21T21:09:36.570
> 
> 标签：java, jmockit

我想检查一个方法是否没有运行并尝试使用 Expectation setting 来执行它`times = 0;`，但是我没有得到预期的行为。

比如下面的测试通过了，虽然`Session#stop`方法被调用了，并且期望有一个`times = 0;`条件：

```
public static class Session {
    public void stop() {}
}

public static class Whatever {
    Session s = new Session();
    public synchronized void method() {
        s.stop();
    }
}

@Test
public void testWhatever () throws Exception {
    new Expectations(Session.class) {
        @Mocked Session s;
        { s.stop(); times = 0; } //Session#stop must not be called
    };
    final Whatever w = new Whatever();
    w.method(); // this method calls Session#stop => the test should fail...
                // ... but it passes
} 
```

注意：如果我用 替换代码`{ s.stop(); times = 1; }`，测试也通过了：我必须在这里遗漏一些明显的东西......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T10:58:46.707

意外模拟行为的原因是您无意中对严格模拟的类型使用了*部分模拟。*在这种情况下，记录期望`times = <n>`意味着第一个`n`匹配的调用将被模拟，之后任何其他调用将执行原始的“未模拟”方法。相反，使用*常规*模拟，您将获得预期的行为（即，调用`UnexpectedInvocation`后抛出异常）。`n`

编写测试的正确方法是：

```
public static class Session { public void stop() {} }
public static class Whatever {
    Session s = new Session();
    public synchronized void method() { s.stop(); }
}

@Test
public void testWhatever ()
{
    new Expectations() {
        @Mocked Session s;
        { s.stop(); times = 0; }
    };

    final Whatever w = new Whatever();
    w.method();
} 
```

或者，也可以使用*验证*块来编写，这通常更适合以下情况：

```
@Test
public void testWhatever (@Mocked final Session s)
{
    final Whatever w = new Whatever();
    w.method();

    new Verifications() {{ s.stop(); times = 0; }};
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-07T15:00:24.517

与此相关，我在使用 JMockit、times = 0 和 @Tested 注释时遇到了麻烦。

使用@Tested 注释，您仍然有一个“真实”类，因此当在这个真实类上注册期望或验证（即使时间 = 0）时，JMockit 会尝试执行该方法。解决方案是部分模拟期望中的类：

```
@Tested
Session s;

new Expectations(Session.class) {{ 
   s.stop(); times = 0; } //Session#stop must not be called
}; 
```

这是我发现在 @Tested 类的方法上使用 times=0 的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T22:24:33.083

我找到了`MockUp`该类的解决方法 - 下面的测试按预期失败 -**我仍然想了解为什么原来的方法不起作用**。

```
@Test
public void testWhatever () throws Exception {
    new MockUp<Session>() {
        @Mock
        public void stop() {
            fail("stop should not have been called");
        }
    };
    final Whatever w = new Whatever();
    w.method();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-26T12:46:12.247

尝试使用 maxTimes ，您也可以以静态方式引用 stop() ：

```
@Test
public void test(@Mocked Session mockSession){

  final Whatever w = new Whatever();
  w.method();

  new Verifications(){
    {
       Session.stop();
       maxTimes = 0;
    }
  };
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-21T21:25:00.070

从记忆中，类似于

```
verify( s  , times(0) ).stop(); 
```

将工作。麻烦的是，`Session`in`Whatever`不是你`@Mock`的，而是另一个对象，所以插入一个

```
w.s = s; 
```

就在之前`w.method()`。

干杯，

# ruby-on-rails - 如何在数据存储中存储 RDF 图？

> ID：13002240
> 
> 赞同：5
> 
> 时间：2012-10-21T21:10:20.420
> 
> 标签：ruby-on-rails, activerecord, rdf, allegrograph, 4store

我想用 Rails 编写一个 Web 应用程序，它使用 RDF 来表示链接数据。但我真的不知道在数据库中存储 RDF 图以进行持久存储的最佳方法是什么。此外，我想使用类似 paper_trail 的东西来提供版本控制数据库对象。

我阅读了有关 RDF.rb 和 activeRDF 的信息。但是 RDF.rb 不包括在数据库中存储数据的层。那么activeRDF呢？

我是 RDF 的新手。使用 rails 处理大型 RDF 图的最佳方法是什么？

**编辑：**

我发现[4Store](http://4store.org)和[AllegroGraph](http://www.franz.com/agraph/allegrograph/)适合 Ruby on Rails。我读到 4Store 是完全免费的，而 AllegroGraph 在免费版本中限制为 5000 万个三元组。它们各自的优点是什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T12:04:02.837

您的数据库调查非常不完整。还有由[Jena提供的](http://jena.apache.org)[BigData](http://www.systap.com/bigdata.htm)、[OWLIM](http://www.ontotext.com/owlim)、[Stardog](http://stardog.com)、[Virtuoso](http://virtuoso.openlinksw.com/)、[Sesame](http://openrdf.org)、[Mulgara](http://mulgara.org)和 TDB 或 SDB 。

澄清一下，Fuseki 只是一个支持 Jena API 的后端服务器组件，以提供对 SPARQL 协议的支持。通常，由于您使用的是 Ruby，这就是您与数据库交互的方式——通过 HTTP 使用 SPARQL 协议。可能每个单独的数据库都支持 SPARQL HTTP 协议进行查询，并且许多数据库将支持 SPARQL 更新协议、图形存储协议或类似的自定义 HTTP 协议来处理更新。

因此，如果您打算使用 Rails，那么最好的选择是选择一个数据库，为 HTTP 协议设计一个简单的包装器，如果现有的 Ruby 库存在，也许可以在它的支持中分叉，并基于该支持构建您的应用程序.

版本控制是很多系统都不容易支持的东西。我认为对于如何在 RDF 数据库中正确执行此操作仍有很多想法。很可能，如果您想在应用程序中进行版本控制，您将不得不做一些自定义的事情。

# .htaccess - 如何将文件夹及其页面重定向到单个页面

> ID：13002241
> 
> 赞同：0
> 
> 时间：2012-10-21T21:10:23.723
> 
> 标签：.htaccess, redirect

我正在尝试重定向一些文件，但我很困惑。在“每页一页”的基础上做其中一些的方式太多了，所以我需要一种快速的方法，因为这些页面微不足道，但目前返回 404。

我有一个类似“/old-blog/tag/page”的页面，我之前将“old-blog”重定向到“new-blog”，所以我得到“/new-blog/tag/page”，但现在我想要“标记”以及在此之后的所有页面都将发送到“新博客”。我希望这个例子有意义，请问我是否遗漏了什么。

我正在使用我的 .htaccess 文件进行重定向，所以我想要一种可以考虑到这一点的方法。

谢谢，丹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:53:46.093

您可能已经有重写规则，如果有规则执行某种类型的路由，那么 mod_rewrite 和 mod_alias 就会发生冲突（`RedirectMatch`是 mod_alias）。因此，请尝试仅使用 mod_rewrite。尝试在文档根目录的 htaccess 文件中添加这些规则，高于任何其他规则：

```
RewriteEngine On
RewriteRule ^/?old-blog/tag /new-blog/ [L,R=301] 
```

# javascript - 通过触摸事件关闭悬停/活动

> ID：13002245
> 
> 赞同：1
> 
> 时间：2012-10-21T21:11:00.530
> 
> 标签：javascript, jquery, mobile, browser, touch

在平板电脑上有 HTML 文档，当`div`元素接收`touchstart`事件时，`:hover`状态`:active`似乎被激活，即使手指移出元素并且`touchend`不调用事件，它们也保持活动状态。一旦手指离开元素，如何关闭悬停/活动状态？

# sql-server-2008 - 尽管 web.config 中有连接字符串，但使用 VS2012 调试器运行 ASP.NET 应用程序仍使用 LocalDB

> ID：13002250
> 
> 赞同：1
> 
> 时间：2012-10-21T21:11:48.793
> 
> 标签：sql-server-2008, visual-studio-2012, connection-string, localdb

我想在运行 VS 2012 的服务器上使用 SQL 2008 R2，所以我创建了“会员”数据库（使用 Aspnet_regsql 工具）并将其配置为与 IIS7 一起使用）。然后我创建了 ASP.NET 应用程序并修改了 web.config 以便连接字符串指向这个数据库。

使用 VS 2012 调试器运行此应用程序会导致我的应用程序在 app_data 文件夹中创建 LocalDB ASPNETDB.MDF 实例。从 VS 工具菜单调用 VS ASP.NET 配置工具时，会显示基于 LocalDB 的数据，并且正在运行的应用程序访问此数据库，而不是 SQL Server 2008 R2 服务器 - 它在同一台服务器上运行。

我相信这是 VS 生成的 web.config 文件的一些副作用，但尽管努力寻找，我没有发现任何可疑之处。

注意：如果我使用 Visual Studio 2010 自己生成的 web.config 文件，同样的场景也可以正常工作。

我不想为此解雇 VS 2012，因为我很确定我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:51:50.473

我遇到了与此相同的问题，需要更改的不仅仅是连接字符串。我的目标是 .NET 4.0 框架而不是 4.5，不确定这有多大的不同。我查看了 MSDN [http://msdn.microsoft.com/en-us/library/6e9y4s5t(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/6e9y4s5t(v=vs.100).aspx)

您不仅需要更改连接字符串，还需要更改成员资格 defaultProvider，使其成为 SqlProvider

# c# - 将值传递给事件处理程序

> ID：13002251
> 
> 赞同：2
> 
> 时间：2012-10-21T21:11:49.137
> 
> 标签：c#, winforms, event-handling, menustrip

我已将一些项目动态添加到我的菜单条中，并为添加到条中的每个项目触发和事件（项目是从 XML 文件添加的）。我接下来要做的是将每个项目的文本传递给事件处理程序，以便我可以在线程中使用它们。这有可能吗？任何人都可以帮我解决问题吗？

这是我的代码：

```
private void historyMenuItem_Click(object sender, EventArgs e){
    XmlDocument doc = new XmlDocument();  // create new xml document
    doc.Load("..\\history.xml");  // load the xml
    // create a new node list
    // and select nodes from BookItems/Book
    XmlNodeList nodeList = doc.SelectNodes("URLs/http"); 

    historyMenuItem.DropDownItems.Clear();
    foreach (XmlNode node in nodeList) {
        string page = node.Attributes["page"].Value;
        //http://msdn.microsoft.com/en-us/library/ms160990.aspx
        ToolStripMenuItem windowNewMenu = new ToolStripMenuItem(page, null, new EventHandler(MenuItemClickHandler));
        historyMenuItem.DropDownItems.Add(windowNewMenu);
    }
}

private void MenuItemClickHandler(object sender, EventArgs e){
    ToolStripMenuItem clickedItem = (ToolStripMenuItem)sender;
    ## HERE IS WHERE I NEED HELP:
    UrlTextBox = (I need value of page here!);
    this.thread = new Thread(new ThreadStart(this.httpRequestMultiThread));
    this.thread.Start();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T21:15:51.990

我建议你使用标签属性。它是对象，因此您需要知道在要使用它时将其转换为哪种类型。像这样的东西

```
private void historyMenuItem_Click(object sender, EventArgs e)
    {
        XmlDocument doc = new XmlDocument();  // create new xml document
        doc.Load("..\\history.xml");  // load the xml
        XmlNodeList nodeList = doc.SelectNodes("URLs/http");  // create a new node list
                                                              // and select nodes from BookItems/Book
        historyMenuItem.DropDownItems.Clear();
        foreach (XmlNode node in nodeList)   // for each node in the node list
        {
            string page = node.Attributes["page"].Value;

            ToolStripMenuItem windowNewMenu = new ToolStripMenuItem(page, null, new EventHandler(MenuItemClickHandler));
            windowMenuItem.Tag = page;
            historyMenuItem.DropDownItems.Add(windowNewMenu);
        }
    }
private void MenuItemClickHandler(object sender, EventArgs e)
{
    ToolStripMenuItem clickedItem = (ToolStripMenuItem)sender;

    UrlTextBox.Text = (string)clickedItem.Tag;
    this.thread = new Thread(new ThreadStart(this.httpRequestMultiThread));
    this.thread.Start();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T21:14:25.917

您可以使用[`Tag`](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripitem.tag.aspx)属性`ToolStripMenuItem`来存储有关项目的任何附加数据（例如页面值）：

```
windowNewMenu.Tag = node.Attributes["page"].Value; 
```

Tag 的类型为`object`，因此您需要在检索值期间对其进行转换：

```
ToolStripMenuItem clickedItem = (ToolStripMenuItem)sender;
string page = clickedItem.Tag as string; 
```

但是在您当前的解决方案中，页面的值被分配给`Text`菜单项的属性（当您创建项目时）。因此，您可以从该属性中检索值：

```
string page = clickedItem.Text; 
```

# php - 如何在php的文本框中显示会话变量的值

> ID：13002254
> 
> 赞同：0
> 
> 时间：2012-10-21T21:12:13.130
> 
> 标签：php

在我的项目中，我需要将所选链接的值从一页带到另一页，它应该显示在文本框中。

为此，我使用了会话变量代码如下：

在 caledar.php 中

这不是整个脚本......有一个生成日历代码的类。下面是功能。

```
function getDateLink($day, $month, $year)
        {
            // Only link the first day of every month
            $link = "";
            if ($day)
            {
                $selectedDate = $day.$month.$year;
                var_dump($selectedDate);die;
                //session_register("$selectedDate");
                //session_start();

                if (isset($_GET["selectedDate"]))
                $_SESSION['date'] = $selectedDate;

                //("location:login_sucessful.php");

                $link = "Leave_app.php";
            }
            return $link;
    } 
```

在 application.php 中

```
<input type="text" id="Editbox1" name="strt_date" value="<?PHP
if(isset($_SESSION['date'])){echo $selectedDate;}?>"> 
```

它不工作。也没有收到任何错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:14:44.907

您没有回显实际的 $_SESSION 变量，它需要像这样完成：

```
<input type="text" id="Editbox1" name="strt_date" value="<?PHP if(isset($_SESSION['date'])){echo $_SESSION['date'];}?>"> 
```

# python - URL Dispatch 中路由的多个路径

> ID：13002255
> 
> 赞同：2
> 
> 时间：2012-10-21T21:12:15.757
> 
> 标签：python, url, web, routes, pyramid

我在 Pyramid 框架中使用 URL Dispatch。据我所知，要求每条路线都有一个唯一的名称。有没有办法将多条路径与一条路径相关联？特别是，我想让两个不同的地址显示相同的内容。注意：我不想执行重定向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T21:17:36.817

你的意思是，两个不同的路径要由单个控制器/视图处理？你正在寻找这样的东西吗？

```
 config.add_route('idea', 'path/{id}')
 config.add_route('newidea', 'newpath/{id}')
 config.add_view('mypackage.views.site_view', route_name='idea')
 config.add_view('mypackage.views.site_view', route_name='newidea') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T21:56:45.033

你的意思是这样的吗...

在您的配置中：

```
config.add_route('path::a', 'path/a')
config.add_route('path::b', 'path/b') 
```

在您看来：

```
class ViewClass(handlerClass):
    @view_config(renderer="/path.mako",route_name="path::a")
    @view_config(renderer="/path.mako",route_name="path::b")
    def path(self):
        return {'project':'MyApp'} 
```

# android - Android OnTouchEvent 触发 3 次

> ID：13002262
> 
> 赞同：1
> 
> 时间：2012-10-21T21:13:22.820
> 
> 标签：android, touch-event

我正在尝试在 MapView 上实现 onTouchEvent 以更新地理点，但是当我触摸仅捕获 ACTION_UP 的屏幕时，它会触发 3 次。在这种情况下如何执行我的代码一次？

```
@Override
public boolean onTouchEvent(MotionEvent event, MapView mapView) {
    int action = event.getAction();
    if (action == MotionEvent.ACTION_UP) {
        Log.e("Touch", Integer.toString(event.getAction()));
        //All 3 fires has index 1 that concern to ACTION_UP
        //Below will be AsyncTask call
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:48:13.180

从方法签名中，我认为您的示例来自被覆盖的`Overlay`? 如果是这样，它的[文档](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/Overlay#onTouchEvent%28android.view.MotionEvent,%20com.google.android.maps.MapView%29)说明：

> **返回**：**如果点击**由此叠加层处理，则为真。

这是几乎所有事件（onTouch、onKey 等）的标准 android 行为。如果事件已处理（在您的情况下，您启动了 AsyncTask），您应该 return `true`，以便 Android 知道它已被处理。

由于您总是返回`false`，因此框架不知道它是否已被处理，并在事件处理链的下游进一步分派 Action。我不知道为什么它正好是三倍。

因此，如果您成功处理了该事件，请返回`true`.

# vb.net - vb.net winforms 如何将自定义事件引发到不同的控件

> ID：13002264
> 
> 赞同：0
> 
> 时间：2012-10-21T21:13:42.743
> 
> 标签：vb.net, winforms, events, datagridview, user-controls

我用自定义列对象制作了一个自定义 datagridview。编辑按钮列中的列之一，该列具有一个文本框和一个位于其右侧的按钮。这是一个用户控件。我遇到的问题是当用户按下控件上的按钮时，我希望在包含此列的 datagridview 上引发一个事件。我在 winforms 和 vb.net 中这样做。如果有人知道如何从具有按钮的用户控件列到包含该列的 datagridview 引发事件，那么将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T22:00:25.000

在您的自定义控件中，只需声明控件将引发的事件：

```
Public Class MyUserControl

    Public Event MyEvent as EventHandler

...

   'Somewhere in you user control code, you want to raise the event
    RaiseEvent MyEvent(Me, EventArgs.Empty) 'using empty args for demo purposes

End Class 
```

然后，在您的表单中，您只需像往常一样声明一个事件处理程序：

```
Private Sub MyUserControl_MyEvent(sender as Object, e as EventArgs) Handles MyUserControl.MyEvent

... 'Whatever you need to do in reaction to the event

End Sub 
```

希望这可以帮助

# c++ - 如何在openGL中制作一步一步的显示动画？

> ID：13002267
> 
> 赞同：2
> 
> 时间：2012-10-21T21:13:59.437
> 
> 标签：c++, opengl, animation

如何在openGL中制作一步一步的显示动画？

我正在做一个 reprap 打印机项目来读取 GCode 文件并将其解释为图形。现在我很难一步一步地绘制整个对象的动画。我需要画很多短线来组成一个完整的对象。例如：

```
|-----|
|     |
|     |
|-----| 
```

正方形由许多短线组成，每条线由如下代码生成：

```
glPushMatrix();
.....
for(int i=0; i< instruction[i].size(),i++)
{  ....
   glBegin(GL_LINES);
     glVertex3f(oldx, oldy, oldz);
     glVertex3f(x, y, z);
   glEnd();
}
glPopMatrix(); 
```

现在我想制作一个步进动画来展示这个正方形是如何制作的。每次绘制新线时我都尝试刷新屏幕，但它不起作用，整个正方形立即出现。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:32:59.287

如果您只希望线条一个接一个地出现，并且您不必对效率或良好的编程风格挑剔，请尝试以下操作：

（在你的绘图程序中）

> `if (timer > 100)` `{`
> 
> `//draw the next line`
> 
> `timer = 0;`
> 
> `}`
> 
> `else`
> 
> `timer++;`
> 
> `//draw all the other lines (you have to remember wich one already appeared)`
> 
> `//for example using a boolean array "lineDrawn[10]"`

计时器是一个整数，它告诉您绘制场景的频率。如果你把它变大，当你运行你的程序时，屏幕上的东西会变得更慢。

当然，这仅在您有绘图例程时才有效。如果没有，我强烈建议使用一个。

->到处都有很多教程，例如

[http://nehe.gamedev.net/tutorial/creating_an_opengl_window_%28win32%29/13001/](http://nehe.gamedev.net/tutorial/creating_an_opengl_window_%28win32%29/13001/)

祝你好运！

PS：我认为你做了几乎相同的事情，但没有计时器。这就是为什么所有东西都画得如此之快，以至于你认为它同时出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T21:23:06.953

您应该在每次绘制调用后调用 SwapBuffer 方法。确保你没有搞砸矩阵堆栈，你可能需要一些东西来“暂停”渲染，比如断点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T23:00:58.717

典型的 OpenGL 实现会将大量调用排队，以将它们批处理成活动突发，以最佳利用可用的通信带宽和 GPU 时间资源。

您要做的基本上与双缓冲渲染相反，即在每个绘图步骤立即可见的地方进行渲染。一种方法是渲染到单个缓冲窗口并`glFinish()`在每一步之后调用。主要缺点：它可能无法在使用合成窗口管理器等的现代系统上运行良好。

我推荐的另一种方法是使用单独的缓冲区进行增量绘图，并不断刷新主帧缓冲区。关键主题是*Frame Buffer Object*和*Render To Texture*。

首先，您创建一个 FBO（大量教程以及 StackOverflow 上的答案）。FBO 基本上是一种抽象，您可以将目标缓冲区（如纹理或渲染缓冲区）连接到它，并且可以将其绑定为绘图调用的目的地。

那么如何解决你的问题呢？首先，您不应该通过延迟绘图循环来制作动画。这有几个原因，但主要问题是，您因此失去了程序的交互性。相反，您在动画中的哪一步维护一个（全局）计数器。让我们称之为`step`：

```
int step = 0; 
```

然后在您的绘图功能中，您必须分阶段：1）纹理更新 2）屏幕刷新

第一阶段包括将帧缓冲区对象绑定为渲染目标。为此，目标纹理必须是未绑定的

```
glBindTexture(GL_TEXTURE_2D, 0);
glBindFramebuffer(GL_FRAMEBUFFER, animFBO);
glViewport(0, 0, fbo.width, fbo.height);
set_animFBO_projection(); 
```

现在的诀窍是，您只清除一次 animFBO，即在创建之后，然后再也不清除。现在您根据动画步骤绘制线条

```
draw_lines_for_step(step); 
```

并增加计步器（可以作为复合语句执行此操作，但这更明确）

```
step++; 
```

更新动画 FBO 后，是时候更新屏幕了。首先解绑animFBO

```
glBindFramebuffer(GL_FRAMEBUFFER, 0); 
```

我们现在在主要的屏幕帧缓冲区上

```
glViewport(0, 0, window.width, window.height);
set_window_projection(); //most likely a glMatrixMode(GL_PROJECTION); glOrtho(0, 1, 0, 1, -1, 1); 
```

现在绑定 FBO 附加纹理并将其绘制到一个完整的视口四边形

```
glBindTexture(GL_TEXTURE_2D, animFBOTexture);
draw_full_viewport_textured_quad(); 
```

最后做缓冲区交换以显示动画步骤迭代

```
SwapBuffers(); 
```

# php - &$变量和&函数的含义？

> ID：13002271
> 
> 赞同：8
> 
> 时间：2012-10-21T21:14:37.110
> 
> 标签：php

> **可能重复：**
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

函数的含义`&$variable`
和含义是什么

```
function &SelectLimit( $sql, $nrows=-1, $offset=-1, $inputarr=false, $secs2cache=0 )
{
    $rs =& $this->do_query( $sql, $offset, $nrows, $inputarr);
    return $rs;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T21:19:24.007

像这样传递参数：`myFunc(&$var);`意味着变量是通过引用传递的（而不是通过值传递）。因此，对函数中的变量所做的任何修改都会修改进行调用的变量。

放在`&`函数名之前意味着“通过引用返回”。这有点违反直觉。如果可能的话，我会避免使用它。[用 & 符号启动 PHP 函数是什么意思？](https://stackoverflow.com/questions/1676897/what-does-it-mean-to-start-a-php-function-with-an-ampersand)

注意不要与`&=`or`&`运算符混淆，这是[完全不同的](https://stackoverflow.com/questions/1367454/what-do-operators-in-php-mean)。

通过引用快速测试：

```
<?php
class myClass {
    public $var;
}

function incrementVar($a) {
    $a++;
}
function incrementVarRef(&$a) { // not deprecated
    $a++;
}
function incrementObj($obj) {
    $obj->var++;
}

$c = new myClass();
$c->var = 1;

$a = 1; incrementVar($a);    echo "test1 $a\n";
$a = 1; incrementVar(&$a);   echo "test2 $a\n"; // deprecated
$a = 1; incrementVarRef($a); echo "test3 $a\n";
        incrementObj($c);    echo "test4 $c->var\n";// notice that objects are
                                                    // always passed by reference 
```

输出：

```
Deprecated: Call-time pass-by-reference has been deprecated; If you would like
to pass it by reference, modify the declaration of incrementVar(). [...]
test1 1
test2 2
test3 2
test4 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T21:19:35.157

与号 - “&” - 用于指定变量的*地址，而不是它的**值*。我们称之为“通过引用传递”。

所以，“&$variable”是对变量的引用，而不是它的值。而 "function &func(..." 告诉函数返回返回变量的*引用*，而不是变量的副本。

也可以看看：

*   [函数和&函数的区别](https://stackoverflow.com/questions/4355300/difference-between-function-and-function)
*   [http://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_reference](http://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_reference)
*   [http://www.php.net/manual/en/language.references.pass.php](http://www.php.net/manual/en/language.references.pass.php)
*   [http://www.adp-gmbh.ch/php/pass_by_reference.html](http://www.adp-gmbh.ch/php/pass_by_reference.html)

# c# - 使用 htmlagilitypack/requests 从网页中提取所有“href”

> ID：13002274
> 
> 赞同：0
> 
> 时间：2012-10-21T21:14:46.483
> 
> 标签：c#, httpwebrequest, html-agility-pack

我有这个网页来源：

```
<a href="/StefaniStoikova"><img alt="" class="head" id="face_6306494" src="http://img0.ask.fm/assets/054/771/271/thumb_tiny/sam_7082.jpg" /></a>
<a href="/devos"><img alt="" class="head" id="face_18603180" src="http://img7.ask.fm/assets/043/424/871/thumb_tiny/devos.jpg" /></a>
<a href="/frenop"><img alt="" class="head" id="face_4953081" src="http://img1.ask.fm/assets/029/163/760/thumb_tiny/dsci0744.jpg" /></a> 
```

我想在`<a href-"`. 但我的主要问题是这些字符串是不同的，我似乎没有找到办法。既没有 agilitypack 也没有 webrequests。

也许有人对正则表达式有想法？分享它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T21:29:19.477

使用 HtmlAgilityPack 获得所需的内容应该非常简单。假设您将文档加载到`HtmlDocument`名为的对象中`doc`：

```
HtmlNodeCollection collection = doc.DocumentNode.SelectNodes("//a[@href]");

foreach (HtmlNode node in collection)
{
    // Do what you want with the href value in here. As an example, this just
    //  just prints the value to the console.
    Console.WriteLine(node.GetAttributeValue("href", "default"));
} 
```

# javascript - Javascript正则表达式替换：无效的量词

> ID：13002281
> 
> 赞同：1
> 
> 时间：2012-10-21T21:16:04.367
> 
> 标签：javascript, regex

我不能让这个正则表达式在 javascript 中工作：

```
pat = new RegExp("Lorem(?=([^<]*($|<a|<[^/]|</[^a]))*($|(?<=a)))", "g");
test = test.replace(pat, '<a href="#">Lorem</a>'); 
```

我得到错误：`invalid quantifier`。

但这里工作：[http ://gskinner.com/RegExr/?2va0g](http://gskinner.com/RegExr/?2va0g)

谢谢你的帮助 ：）

## 编辑

我需要用链接替换每次出现的“字符串”，但前提是“字符串”还不是链接。

埃斯。

```
This is a <a href="#">String</a>. This is another String. 
```

=>

```
This is a <a href="#">String</a>. This is another <a href="#">String</a>. 
```

如果还可以检查链接 es 的 url，那就更好了：

```
This is a <a href="http://www.test.com/String">link</a> 
```

=>

```
This is a <a href="http://www.test.com/String">link</a> 
```

可能足以替换所有不在内部的 String `<a ... </a>`（第一个 TAG 不是故意关闭的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:37:48.950

[在此处](http://jsfiddle.net/atiruz/kuhAK/1/)查看此示例

```
var toreplace = "String"; // Text to find
var rx = new RegExp ("((?!\/)" + toreplace + "(?!\"))(?!<(.*?)>)", "g");
var txt = "This is a <a href=\"#\">String</a>. This is another String."; // Text to replace.
var newtxt = txt.replace (rx, '<a href="#">$1</a>'); // New Text 
```

结果是：

```
This is a <a href="#">String</a>. This is another String. 
```

=>

```
This is a <a href="#">String</a>. This is another <a href="#">String</a>. 
```

# java - 会话 - 超时 - 空闲处理 Java 中的多线程

> ID：13002283
> 
> 赞同：1
> 
> 时间：2012-10-21T21:16:12.223
> 
> 标签：java, multithreading, session, timeout

我正试图了解会话-超时-空闲处理Java中的多线程。

我有一个服务器和客户端应用程序通过 telnet 进行通信，我需要检查用户是否在一段时间内输入（任何内容）、单击（任何地方）或移动鼠标。

如果没有，用户将收到一个对话框提示，询问他是否要继续会话。...（如果没有，用户将在下一分钟左右自动注销。）

我的应用程序有多个线程。（ - 每个线程一个用户）。所以我不确定如何以最好的（**也是最简单**的）方式来解决这个问题？

我知道这是一个广泛而牵强的问题，但我希望你们中的一些人能给我一个正确方向的指针或提示...... :)

我有点希望有一个简单的方法可以检查：（有点伪代码：）

```
if (idle = true){
timer.start();
if (timer > 120sec)
displayWaringJFrame("Continue Session?  - YES or NO ?)
displayTimer.start();
if (displayTimer > 30sec)
application.user.closeSession() 
```

...或类似的东西！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:02:43.320

最简单的解决方案是类 java.lang.Thread。

您可以创建类并实现接口 Runnable

```
public class Session implements Runnable{
    public void run(){
        //your code
    }
} 
```

在主函数中创建类 Thread 并作为 Session 类的构造参数集实例，在此重要的是调用方法 .start()

```
public static void main(String args[]){
    new Thread(new Session()).start();
} 
```

使用线程更方便的方法是 java.util.concurrent.ExecutorService 和 java.util.concurrent.Executors

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:16:31.153

一些想法：
1\. 如果您想要一个持久计时器，您可以使用[Quartz](http://quartz-scheduler.org/)之类的库，然后您可以在一段时间后运行您编写的作业类。您可以取消预定的作业，重新安排等...
2\. 您不一定需要每个用户都有一个线程才能工作。计时器对象通常具有处理工作负载的内部线程，可以使用 Quartz 或仅内存的 Java 计时器。

# javascript - AngularJS 绑定属性存在

> ID：13002286
> 
> 赞同：2
> 
> 时间：2012-10-21T21:16:43.053
> 
> 标签：javascript, angularjs

我想将属性的*存在*绑定到 AngularJS 中的变量。具体来说，`sandbox`对于一个`iframe`. 假设我有`$myCtrl.allowJavascript`一个变量，我想做：

```
<iframe src="..." sandbox /> 
```

当`sandbox`属性出现在哪里`allowJavascript == false`，我希望沙盒属性在什么时候消失`allowJavascript == true`。

AngularJS 有这个机制吗？

我能找到的最接近的东西是[here](https://groups.google.com/forum/#!msg/angular/bxobHiebfq0/3cXJ_9xjz94J)，它基本上说“它只适用于某些属性”——但不适用于沙盒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T22:56:23.587

如果你愿意，你可以为此创建一个自定义指令。

```
app.directive('sandboxIf', function() {
  return {
        restrict: 'A',
        link: function(scope, elem, attr, ctrl) {
            /* eval whatever was passed to sandbox-if="" 
               to see if it's true or false. */
            if(scope.$eval(attr.sandboxIf)) {
                elem.attr('sandbox','sandbox'); //sandbox="sandbox"
            }else{
                elem.removeAttr('sandbox');
            }
        }
    };
}); 
```

使用就像：

```
<iframe sandbox-if="foo"></iframe> 
```

甚至

```
<iframe sandbox-if="test()"></iframe> 
```

控制器的位置

```
app.controller('MyCtrl', function($scope) {
   $scope.foo = true;

   $scope.test = function() {
       return true;
   };
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T12:06:13.193

为了可重用性，您可以按照以下方式使其通用：

```
app.directive("addAttr", function() {
  return function(scope, element, attrs) {
    scope.$watch(attrs.addAttr, function(addAttr) {
      for (var key in addAttr) {
        if (addAttr[key]) element.attr(key, true);
        else element.removeAttr(key);
      }
    }
  }
} 
```

你会像这样使用它：

```
<iframe add-attr="{sandbox: allowJavaScript, someOtherAttr: someOtherVar}"> 
```

# android - Android默认点击声音（音频文件）

> ID：13002287
> 
> 赞同：3
> 
> 时间：2012-10-21T21:16:44.307
> 
> 标签：android

我想在我的应用程序中播放默认的 Android 点击声音，即使在非 Android 系统上也是如此。我在哪里可以在我的设备（Samsung Galaxy Tab2 7.0）上获得这个音频文件，或者我可以从哪里下载这个音频文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T21:35:20.707

I *think* its this file:

[https://github.com/android/platform_frameworks_base/blob/master/data/sounds/effects/Effect_Tick.ogg](https://github.com/android/platform_frameworks_base/blob/master/data/sounds/effects/Effect_Tick.ogg)

But I can't check right now. But it should be in this directory for sure: [https://github.com/android/platform_frameworks_base/blob/master/data/sounds/](https://github.com/android/platform_frameworks_base/blob/master/data/sounds/)

# dll - 将 MediaInfo.dll 与 lua 一起使用？

> ID：13002288
> 
> 赞同：2
> 
> 时间：2012-10-21T21:16:46.217
> 
> 标签：dll, lua, mediainfo

是否有任何代码可以在 lua 编程中使用 mediainfo.dll 获取媒体标签，如果有办法调用 dll，你将如何返回它的 args？

# java - Java：如何在arraylist中写入计算数据？

> ID：13002289
> 
> 赞同：1
> 
> 时间：2012-10-21T21:16:55.537
> 
> 标签：java, arrays, arraylist

大家好，我是 Java 的初学者，我遇到了一些关于数组和数组列表的问题。我的主要问题是如何将计算、动态数据写入数组以及以后如何读取它？这是我奇怪的代码：

```
 public static void main(String[] args) {

    int yil, bolum = 0, kalan;
    Scanner klavye = new Scanner(System.in);
    ArrayList liste = new ArrayList();

    //or shall i use this? >> int[] liste = new int[10];

    System.out.println("Yıl Girin: "); // enter the 1453
    yil = klavye.nextInt();

    do{ // process makes 1453 separate then write in the array or arraylist. [1, 4, 5, 3]

    kalan = yil % 10;
    liste.add(kalan); //my problem starts in here. How can i add "kalan" into the "liste".
    bolum = yil / 10;
    yil = bolum;

    }while( bolum == 0 );

    System.out.println("Sayının Basamak Sayısı: " + liste.size()); //in here read the number of elements of the "liste" 
    klavye.close();
} 
```

编辑：

```
 //needs to be like that
    while( bolum != 0 ); 
    System.out.println("Sayının Basamak Sayısı: " + liste); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T21:29:32.307

我认为您很可能希望您的循环停止条件为：

```
while( bolum != 0) 
```

因为`bolum`只有`0`当您的号码中没有更多数字需要处理时才会出现。此外，正如上面提到的那样，可能是用户`0`在提示输入数字时输入的情况，因此您应该考虑到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T21:28:25.327

要获得您的字符串表示形式`ArrayList`（通过字符串表示形式显示它包含的元素），您可以使用

```
System.out.println("Sayının Basamak Sayısı: " + liste); 
```

无需转换为数组。这是有效的，因为它会导致`liste`'[`toString`](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractCollection.html#toString%28%29)方法被调用（这就是我们不需要显式调用它的原因）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T21:31:45.890

You must change this line:

```
}while( bolum == 0 ); 
```

To this:

```
}while( bolum > 0 ); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-21T21:25:38.453

如果要在 ArrayList 中打印元素，请将最后一条语句更新为打印如下：

```
 System.out.println("Sayının Basamak Sayısı: " + liste); 
```

或者您可以迭代您的列表并打印为：

```
 for(Object i: liste){
    System.out.println(i);
 } 
```

这将在单独的行中打印您的各个列表项。

**另外请修复您的 while 条件，`while(bolum != 0);`**因为它可能在第一次迭代后终止，`bolum`即非零 `1, 2...(!= 0)`。

# c# - 我的 Levels 课有一些困难。怎么了？

> ID：13002292
> 
> 赞同：0
> 
> 时间：2012-10-21T21:17:18.030
> 
> 标签：c#, xna

我编写了 Levels 类来存储每个级别的敌人数量。Levels 类在开始一个新的关卡之前被调用一次。例如，如果玩家在游戏菜单中选择 1 级，则应绘制 5 个僵尸、3 个蜘蛛和 1 个狼人（在另一个类中）。但是目前，我总是收到此错误消息：方法必须具有返回类型。
怎么了 ？

```
public class Levels
{
    int currentLevel, Zombies, Spiders, Werewolfs;

    public Levels(int Level)
    {
        this.currentLevel = Level;
    }

     public Level1()
    {
        Zombies = 5;
        Spiders = 3;
        Werewolfs = 1;
    }

     public Level2()
    {
        Zombies = 8;
        Spiders = 4;
        Werewolfs = 2;
    }

     public Level3()
    {
        Zombies = 12;
        Spiders = 4;
        Werewolfs = 3;
    }

    public void Load(ContentManager content)
    {
     if (currentLevel == 1)
       Level1();

     if (currentLevel == 2)
       Level2();

     if (currentLevel == 3)
       Level3();   
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T21:19:03.687

您的 Level1()、Level2() 等必须有返回类型，如 void。它们是方法而不是构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T21:25:14.240

你没有从你的函数中返回任何东西。请注意您的`Load()`函数，它被声明为`public void`这意味着该函数没有返回任何内容或“void”。如果您不打算从这些函数中返回任何内容，请`void`在它们的声明中包含。如果是，请执行以下操作：

```
public int Level1()
{
    int Zombies = 5;
    return Zombies;
} 
```

注意：函数只能返回一个对象。

我不知道正确的 c# 语法，所以这可能是错误的，但概念是一样的。

如果您不想从这些函数中返回某些内容，请将它们声明为`void`，为您的“敌人”设置全局变量，然后使用方法（函数）来更改全局变量。

# erlang - 从 makefile 启动 erlang otp 应用程序

> ID：13002300
> 
> 赞同：1
> 
> 时间：2012-10-21T21:18:08.080
> 
> 标签：erlang

我创建了一个 erlang 应用程序，我可以在其中使用 application:start(Name) 成功启动应用程序。

我尝试创建一个使用 rebar 编译的 makefile 步骤，然后手动启动应用程序。但这似乎不起作用。这是我现在拥有的：

```
all: compile start

compile:
    ./rebar compile

start:
    erl -s application load shoutcast -s application start shoutcast 
```

所有这一切都是加载一个交互式 erlang shell

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:17:49.550

```
Aplication:start(Name) 
```

来电

```
Name:start/2 
```

而 -s 标志调用

```
Name:start() or Name:start([arg1, arg2, ...]). 
```

因此，我认为您不能以这种方式成功调用 Application。假设您不想创建发布和启动文件，您可以（我认为）向您的应用程序模块添加一个方法 start/0

```
-module(shoutcast).

-behaviour(application).

%% Application callbacks
-export([start/2, stop/1]).

%% Allow for erl -s invocation 
-export([start/0]).

 ... Snip ...

start() ->
    application:start(shoutcast).

... Snip ... 
```

然后在你的makefile中

```
erl -s shoutcast 
```

我不确定这是否违反了最佳实践，但它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-13T08:40:22.343

将有用的东西放在共同的 Makefile 中可能会更好 [https://github.com/virtan/erlang-makefile](https://github.com/virtan/erlang-makefile)

# apache-flex - 弹出视图时恢复搜索字符串和可见列表索引

> ID：13002301
> 
> 赞同：0
> 
> 时间：2012-10-21T21:18:15.847
> 
> 标签：apache-flex, flex4, flex4.5, flex-mobile, flex4.6

在[一个移动 Flex 游戏中](https://play.google.com/store/apps/details?id=air.de.preferans)，我有一个 View 列出了每周排名最高的玩家。

它工作得很好:-) 在顶部我有一个搜索字段。此外，当您单击列表中的玩家名称时，会推送另一个视图 - 显示该用户的更多信息：

![在此处输入图像描述](../Images/a72316a8576d52e1898df4e119aba126.png)

我有 2 个烦恼：当我弹出播放器详细信息视图并返回到上面屏幕截图中显示的视图时 -

1.  搜索字段为空
2.  列表再次向上滚动

请就如何最好地保存/恢复这两个值提供任何建议？

**更新：**我现在将这些值保存为静态变量......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:47:17.570

我还为此使用了静态变量，另一种方法是为您的视图创建一个值对象。我主要做的是：

*   假设我的视图称为 ScoreListView，我创建了一个名为 ScoreListViewData 的 VO，它包含一个 viewData 属性（对象类型），然后我为与视图相关的其他事物创建属性，而不是它的数据。您可以将 cachedListPosition 和 currentSearchString 添加到其中，并且在停用视图之前（在 viewDeactivate 事件中）您可以保存这些值，以便在再次激活视图时将它们保存在视图的数据对象中。

为我工作;-)

# php - 需要在数据库中存储复选框数组

> ID：13002306
> 
> 赞同：-1
> 
> 时间：2012-10-21T21:18:46.487
> 
> 标签：php, mysql, phpmyadmin

我试图将数组数据（即复选框值）插入 Mysql db（使用 Phpmyadmin）

当我尝试存储时，我在 db..

请有人告诉我我必须对以下代码进行哪些更改，以便我可以存储所有数组值（在我的数据库中用逗号分隔）

这是代码：

```
if(isset($_POST['forms']) && $_POST['forms']!=''){
        $table = $wpdb->prefix . "eshop_orders";
        $forms=$wpdb->escape($_POST['forms']);

        $query1=$wpdb->query("UPDATE $table SET forms='$forms' where checkid='$checkid' limit 1");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:24:27.533

您可以使用逗号分隔符将数组值更改为字符串并将其存储到 db。

在 PHP 中有一个`implode`函数可以使用分隔符将数组值转换为字符串。

```
 $value = implode(",", $forms);         
 echo $value; 
```

[http://php.net/manual/en/function.implode.php](http://php.net/manual/en/function.implode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T21:25:11.910

在插入值之前对数组使用[序列化](http://us1.php.net/serialize)，并在从内存中调用值时反[序列化。](http://us1.php.net/manual/en/function.unserialize.php)

例如：

```
$data = serialize($_POST['forms']); 
```

# php - PHP，simplexml，删除：请告诉我为什么第一个变体不起作用

> ID：13002313
> 
> 赞同：1
> 
> 时间：2012-10-21T21:19:29.300
> 
> 标签：php, xpath, simplexml, unset

我希望你能帮我解决这个问题：

我想通过 unset 删除一个 xml 节点。我有两种方法可以做到这一点，但只有一种有效。请**告诉我有什么区别**或**为什么**只有第二个变体有效。

因此，当使用第一个变体时，print_r() 函数会返回整个 xml 文件，其中包含应该删除的图像“Hansio”。但是当使用第二个变体时，图像被删除了！

（实际上，您可以将整个 php 代码以及 xml 文件文本复制到一个文件中 - 并立即对其进行测试 - 无需更改 - 当然除了注释一个变体。）

**PHP 文件：**

```
<?php

$galleries = new SimpleXMLElement('galleries.xml', NULL, TRUE);

/*Variant 1: NOT WORKING_____________________________________________________________*/

$image = $galleries->xpath("//galleries/gallery[@name='gallery']/image[@name='Hansio']");
unset($image[0]);

/*Variant 2: WORKING BUT NOT SO CONVENIENT___________________________________________*/

foreach($galleries->xpath("//galleries/gallery[@name='gallery']/image[@name='Hansio']") as $image)
{
    unset($image[0]);
}

print_r($galleries);

?> 
```

**XML 文件：**

```
<?xml version="1.0" encoding="utf-8"?>

<galleries>
    <gallery name="gallery">
        <image name="image name 1"/>
        <image name="image name 2"/>
        <image name="Hansio"/>
        <image name="image name 4"/>
    </gallery>
</galleries> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:46:32.330

第一个变体不起作用，因为您要取消设置新创建数组的元素，根本没有触及 SimpleXML 元素。尝试

```
unset($image[0][0]); 
```

# c# - Dapper 的 SQL 查询生成器

> ID：13002317
> 
> 赞同：1
> 
> 时间：2012-10-21T21:19:55.223
> 
> 标签：c#, sql, orm, dapper

嗨，他试图找到性能最好的 ORM，以便在我们的新项目中使用。我的最终选择变成了 Dapper。我们还需要让我们的应用程序包含以下功能（至少），这些功能可以防止我们对 SQL 查询进行硬编码以传递给 Dapper

1.  独立于数据库
2.  运行时实体定义

我想过为 Dapper 编写一个 SQL 生成器，但我不确定我遵循的方法是最好的：

1.  声明一个带有方法签名的接口。该实现对应于要使用的数据库系统（SQL Server/ MySQL/ PostgreSql/ DB2/ Oracle/ 等...）。
2.  使用以下格式创建数据库 XML 模式：

    ```
    <sqltable name="Foo">
        <sqlfield name="ID" primarykey="1" />
        <sqlfield name="Name" />
        <sqlfield name="Surname />
        <sqlfield name="etc" />
        <sqlreference name"KooID" table="Koo" field="ID" />
    </sqltable> 
    ```

3.  使用上面提供的 XML 生成类/实体（允许在运行时扩展模式）。创建的对象是 POCO。

4.  实现在当前实体的属性上循环的方法（使用反射）并生成属性不为空的 SQL 语句：

    ```
    String GetInsert(object currentEntity)
    return:
    "INSERT INTO Foo (ID, Name) VALUES (1, 'BooBoo')" 
    ```

5.  实施将至少包括

    ```
    SELECT
    INSERT INTO
    UPDATE
    DELETE
    JOIN /*(using references like the KooID above)*/
    WHERE /*(using filter expressions)*/ 
    ```

你能想到这种方法的任何倒退/缺点吗？你能推荐一些改进吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:21:41.787

## 使用 MEF 代替配置

如果您取消所有这些配置，只对这些*提供程序*进行硬编码，并使用 MEF 来发现您的应用程序中包含哪一个并使用那个会怎样？然后，当您要连接到不同的数据库时，您会编写一个新的提供程序并替换提供程序的程序集吗？然后 MEF 将完成剩下的工作。

## 在生产过程中添加新实体而无需重新编译

但是，当您在评论中添加了更多详细信息时，我想说的是，您尝试这样做的方式是可行的，除了我要引入一些更改：

1.  仍然可以使用 MEF 实现数据库提供程序的可发现性，因此您只需将提供程序程序集放到您的 bin 文件夹中，您的应用程序就会使用它。这当然也可以通过配置来完成。由您决定如何实例化正确的提供程序。

2.  您的示例数据库模式似乎具有您自己定义的语法。也许宁愿使用已经证明并允许标准化并且可能也更复杂的定义的东西。

3.  您的 UI（视图或您使用的任何内容）实际上将是可以使用 shcema XML 而不是 POCO 的模板。POCO 对象只会*将*数据传递给 UI。

4.  由于您将在您的应用程序中广泛使用反射，它可能会大大减慢它。我建议您使用更好（=更快）的方法。查看Mark Gravell[在 NuGet 上的这个库。](http://nuget.org/packages/FastMember)

## 生成和使用设计时未知实体

在设计期间（从编译代码的角度来看）数据实体将是未知的，因为这些 POCO 将在运行时从 XML 模式生成。除非您的应用程序纯粹是面向数据库的（如直接操作数据库中的表），否则我看不出您将如何使用硬编码 UI 来使用这些实体？

正如您提到的，您的 UI 实际上将能够读取相同的数据模式 UI 并根据从数据库读取的 POCO 实例填充它。只要您的应用程序完全面向数据而不需要额外的业务规则或用户界面流程，这一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T13:13:24.553

我提出我的解决方案，以返回最终文本：

```
 createPROCEDURE [dbo].[Helper_CreatePocoFromTableName]    
    @tableName varchar(100)
AS
BEGIN
SET NOCOUNT ON;
declare @codeLines table (lineId int, lineText varchar(4000))

insert into @codeLines
Select  rowNr = ROW_NUMBER() over(order by rowNr), PropertyColumn from (
    SELECT 1 as rowNr, 'public class ' + @tableName + ' {' as PropertyColumn
    UNION
    SELECT  rowNr =2 , 'public ' + a1.NewType + ' ' + a1.COLUMN_NAME + ' {get;set;}' as PropertyColumn
    -- ,* comment added so that i get copy pasteable output
     FROM 
    (
        /*using top because i'm putting an order by ordinal_position on it. 
        putting a top on it is the only way for a subquery to be ordered*/
        SELECT TOP 100 PERCENT
        COLUMN_NAME,
        DATA_TYPE,
        IS_NULLABLE,
        CASE 
            WHEN DATA_TYPE = 'varchar' THEN 'string'
            WHEN DATA_TYPE = 'nvarchar' THEN 'string' 
            WHEN DATA_TYPE = 'char' THEN 'string'
            WHEN DATA_TYPE = 'nchar' THEN 'string'
            WHEN DATA_TYPE = 'datetime' AND IS_NULLABLE = 'NO' THEN 'DateTime'
            WHEN DATA_TYPE = 'datetime' AND IS_NULLABLE = 'YES' THEN 'DateTime?'
            WHEN DATA_TYPE = 'smalldatetime' AND IS_NULLABLE = 'NO' THEN 'DateTime'
            WHEN DATA_TYPE = 'datetime2' AND IS_NULLABLE = 'NO' THEN 'DateTime'
            WHEN DATA_TYPE = 'smalldatetime' AND IS_NULLABLE = 'YES' THEN 'DateTime?'
            WHEN DATA_TYPE = 'datetime2' AND IS_NULLABLE = 'YES' THEN 'DateTime?'
            WHEN DATA_TYPE = 'int' AND IS_NULLABLE = 'YES' THEN 'int?'
            WHEN DATA_TYPE = 'int' AND IS_NULLABLE = 'NO' THEN 'int'
            WHEN DATA_TYPE = 'smallint' AND IS_NULLABLE = 'NO' THEN 'Int16'
            WHEN DATA_TYPE = 'smallint' AND IS_NULLABLE = 'YES' THEN 'Int16?'
            WHEN DATA_TYPE = 'decimal' AND IS_NULLABLE = 'NO' THEN 'decimal'
            WHEN DATA_TYPE = 'decimal' AND IS_NULLABLE = 'YES' THEN 'decimal?'
            WHEN DATA_TYPE = 'numeric' AND IS_NULLABLE = 'NO' THEN 'decimal'
            WHEN DATA_TYPE = 'numeric' AND IS_NULLABLE = 'YES' THEN 'decimal?'
            WHEN DATA_TYPE = 'money' AND IS_NULLABLE = 'NO' THEN 'decimal'
            WHEN DATA_TYPE = 'money' AND IS_NULLABLE = 'YES' THEN 'decimal?'
            WHEN DATA_TYPE = 'bigint' AND IS_NULLABLE = 'NO' THEN 'long'
            WHEN DATA_TYPE = 'bigint' AND IS_NULLABLE = 'YES' THEN 'long?'
            WHEN DATA_TYPE = 'tinyint' AND IS_NULLABLE = 'NO' THEN 'byte'
            WHEN DATA_TYPE = 'tinyint' AND IS_NULLABLE = 'YES' THEN 'byte?'
            WHEN DATA_TYPE = 'char' THEN 'string'                       
            WHEN DATA_TYPE = 'timestamp' THEN 'byte[]'
            WHEN DATA_TYPE = 'varbinary' THEN 'byte[]'
            WHEN DATA_TYPE = 'bit' AND IS_NULLABLE = 'NO' THEN 'bool'
            WHEN DATA_TYPE = 'bit' AND IS_NULLABLE = 'YES' THEN 'bool?'
            WHEN DATA_TYPE = 'xml' THEN 'string'
        END AS NewType
        FROM INFORMATION_SCHEMA.COLUMNS 
        WHERE TABLE_NAME = @tableName
        ORDER BY ORDINAL_POSITION
        ) AS a1 
    UNION 
    SELECT 1000 as rowNr,  '} // class ' + @tableName
    ) as t Order By rowNr asc

declare @max int=(select max(lineId) from @codeLines)

-- assembly result 
declare @i int=1
declare @res nvarchar(max)=''

while(@i<=@max)
begin
  set @res = @res +(select lineText +'
  ' from @codeLines l where l.lineId=@i )

  set @i=@i+1
end

select classCode=@res
END 
```

# jquery - 如何获取div元素的title属性？

> ID：13002318
> 
> 赞同：6
> 
> 时间：2012-10-21T21:19:59.090
> 
> 标签：jquery, greasemonkey

我正在尝试编写一个 Greasemonkey 脚本。网页中有这样的东西：

```
<div id="div1" class="..." title="
  asdsadsadasd&nbsp;&lte;...
">...</div> 
```

我想使用 jQuery`attr`方法获得它的标题。但它返回一个空值。我的js代码是这样的：

```
$("#div1").attr("title"); 
```

我已经以许多不同的方式尝试了警报，并且我确定正确选择了所需的元素并且所有其他属性都很好！只是这个返回空字符串！( '' ) 它与多行有关吗？

**更多细节：** 我使用的是最新的 jQuery (1.8.2)，我的浏览器是 Firefox 16.0.1。我看到了[这个链接](http://jsfiddle.net/FNJEu/)，它在那里工作！所以也许是因为别的原因。实际上，我正在编写一个 Greasemonkey 脚本，该脚本正在更改一个不属于我的网页以进行编辑。因此无法编辑 HTML 代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T21:22:55.903

`title`不是 div 的有效属性，但仍应有效。如果您可以轻松更改 html，则可以使用：

```
<div id="div1" class="..." data-title="
  asdsadsadasd&nbsp;&lte;...
">...</div> 
```

JS

```
alert( $("#div1").data("title")); 
```

还要确保`document.ready`在代码触发时将代码包装在元素中。我怀疑这可能是你的问题

```
$(function(){
/* your code*/

}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-20T14:52:28.500

我有一个类似的问题，但似乎是 jquery ui 工具提示功能导致了这个问题。我最终向与 jquery ui 无关的元素添加了另一个属性。我使用了 alt 元素，但如果你已经在使用它，你可以使用类似 data-alt 的东西。

```
<a class="tooltip" 
    title="this will show up in the tooltip and may cause trouble using title later on" 
    data-alt="Grab this attribute instead of the title to bypass jqui showing the title attr as an empty string"
/>
<script>
    $(".tooltip").tooltip();
    a.click(function(){
        var title = $(this).attr('title'); // this showed up as an empty string
        title = $(this).attr('data-alt'); // this showed up as the text I was expecting
    });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T22:00:40.303

`title`是空白的，因为它（或很可能是`<div>`）是在 Greasemonkey 脚本触发后通过 AJAX 添加的。

使用[waitForKeyElements() 实用程序](https://gist.github.com/2625891)来处理这种情况。

这是一个使用 jQuery 并获取该标题的***完整脚本：***`waitForKeyElements`

```
// ==UserScript==
// @name     _Grab element's title, when it is added by AJAX
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js
// @require  https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant    GM_addStyle   
// ==/UserScript==
/*- The @grant directive is needed to work around a design change introduced
    in GM 1.0\.   It restores the sandbox.
*/

function grabDivTitle (jNode) {
    //***** YOUR CODE HERE *****
    var titleStr    = jNode.attr ("title");
    console.log ("Title is:", titleStr);
}

waitForKeyElements ("#div1", grabDivTitle); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T21:27:22.613

问题可能与 jQuery 版本有关。

它与 JQuery 1.8.2 一起成功运行。我用 Chrome 和 IE9 试了一下。

```
<div id="div1" class="..." title="      
asdsadsadasd&nbsp;&lte;...^+%:&/^+%6732045623459^+%?^+%)=1234114     asdfhj asklhdjflasdjfkasjdfasdk nf asdf as
 fsa
df sadf asd
f asdf 
sadf asdf sadf as
df 
sdfas 
f
asdf asdf        
">...</div> 
```

[https://jsfiddle.net/LgkhW/2/](https://jsfiddle.net/LgkhW/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-22T12:01:04.810

看起来像一个错误：

```
$("<div>").attr("tilte","dyanmic").addClass("test").appendTo("body");
alert($("#div1").attr("title"));
alert($(".test").attr("title"));
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="div1" class="..." title="static">...</div>
```

# javascript - 使用 jQuery 读取 JSON 的客户端 Ajax

> ID：13002319
> 
> 赞同：0
> 
> 时间：2012-10-21T21:20:09.310
> 
> 标签：javascript, ajax, jquery, javascript-events

我正在尝试制作一个 Javascript，它正在获取一个 json（IP 数据）并使用 AJAX 从中检索数据（GEO IP），这就是我到目前为止所拥有的

```
$(document).ready(function(){
    var path_to_the_webservice = "http://www.pathtothescript.com/check.php";
    $.ajax({
        url: path_to_the_webservice,
        success: function(html)
        {
            if(html)
            {
                alert('3');
                $('#content').append(html);                         
            }
            else
            {
                alert('4');
            }
        }
    });
}); 
```

我得到警报（4），为什么？

基本上，当您`http://www.pathtothescript.com/check.php`从浏览器访问时，会检索我必须解析的 JSON

```
$.getJSON(path_to_the_json,
function(data) 
{
    $.each(data, function(i,item)
    {

    });
} 
```

但我不知道怎么做。

json看起来像这样`http://j.maxmind.com/app/geoip.js`

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:25:31.603

它可能是由[同源策略](http://www.w3.org/Security/wiki/Same_Origin_Policy)引起的。

尝试使用 JSONP 请求：

```
$.getJSON('http://example.com?callback=?', function(data) {
    console.log(data);
}); 
```

* * *

**[处理来自http://j.maxmind.com/app/geoip.js](http://j.maxmind.com/app/geoip.js)的响应**

```
// Actually we can send regular AJAX request to this domain
// since it sends header Access-Control-Allow-Origin:*
// which allows cross-domain AJAX calls.
$.get('http://j.maxmind.com/app/geoip.js', function(data) {

    console.log('Retrieved data:',
                data,
                'is type of', typeof data);

    // Now we have some functions to use:
    console.info('Some info:', geoip_country_name(),
                geoip_latitude(),
                geoip_longitude());
});​ 
```

[小提琴](http://jsfiddle.net/f0t0n/LYgTU/)

* * *

**更新：**

在聊天中，我们发现我之前的示例在 Google Chrome 中运行良好，但在 Mozilla Firefox 中无法运行。虽然我玩了一点并找到了解决方案：

```
// Actually we can send regular AJAX request to this domain
// since it sends header Access-Control-Allow-Origin:*
// which allows cross-domain AJAX calls.
$.ajax({
    url: 'http://j.maxmind.com/app/geoip.js',
    type: 'GET',
    success: function(data) {
        // Now we have some functions to use:
        alert(geoip_country_name() + ': (' 
              + geoip_latitude() + '; ' 
              + geoip_longitude() + ')');
    },
    error: function(e) {
        console.log('Error:', e);
    },
    contentType: 'application/javascript; charset=ISO-8859-1',
    dataType: 'script'
}); 
```

​</p>

[Fiddle](http://jsfiddle.net/f0t0n/Yyuvu/)
我还根据服务[文档](http://dev.maxmind.com/geoip/javascript)设置了一个字符集。

# c# - 使用 IDataReader 或 SqlDataReader

> ID：13002321
> 
> 赞同：1
> 
> 时间：2012-10-21T21:20:45.530
> 
> 标签：c#, .net, ado.net

我参加过的几个团队（不，我不记得我们所做的一切，已经有一段时间了）在编写数据层 CRUD 方法时使用 IDataReader 而不是 SqlDataReader。

有人能告诉我为什么我们的架构师总是喜欢 IDataReader 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T21:23:46.347

原因与对接口的编码有关：如果编码为`IDataReader`，则可以更好地保证以后可以切换到不同品牌的 RDBMS，如果需要的话。`SqlDataReader`另一方面，如果您编写代码，您的代码可能仍然很容易移植到 Oracle，但您对此的信心会降低（而且您也必须进行移植）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T21:24:40.807

`IDataReader`是抽象，不强制执行任何具体类型，而是合同（即*执行 CRUD 操作*）。出于可扩展性和可测试性的目的，**[对接口进行编程](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)**是首选。

使用接口表示的依赖关系可以让您更轻松地更改它们，无论是在*单元测试*中（当提供模拟对象而不是实际实现时）还是在*非生产环境中*（例如使用不同的实现）。

对于其他研究，我建议看一下[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)和其他与[SOLID 原则](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)相关的概念。

### 为什么要更改数据层或完全替换数据库？

这是荒谬的。您需要更改整个数据层的可能性相对较低（因为这是相当大的成本），但您需要**支持其他**数据层的可能性相当大。考虑以下场景：

*   客户想要在 Oracle 机器上运行的软件，因为这就是他们所拥有的，而且他们不希望*在服务器上运行任何额外的数据库*。务实，您永远不会暴露 DAL 之后的 Oracle 位，而是保持它的清洁并针对接口进行编程。
*   项目结果足以吸引另一个客户。然而，他没有那么富有并且正在运行 MySQL 机器——整个 DAL 现在必须在 MySQL 上工作，结果证明它在实现方面并不是特别困难（撇开 Oracle-MySQL 的差异不谈）。大多数代码库被重用。
*   最后，作为负载平衡工作的一部分，Oracle 客户端决定将一些计算委托给不同的机器，它们都以主从模式工作（主机是原始软件，调整为主从模式）。从机本质上是在旧的和慢速机器上运行的主机的*小版本*。他们必须使用 SQLite 作为数据存储。

所以你去。这实际上发生在我一直在从事的一个项目中，在不到 10 个月的时间里，这一切都从*Oracle 变成了我们所需要*的 Oracle、MySQL 和 SQLite。当然，这些转换总是需要一些额外的工作（主要是由于数据库差异），但**大多数**DAL 代码都被重用了。如果我们的 DAL 与 Oracle 紧密耦合，这不是可能的吗？我相信它会，但我同样肯定它会花费更多的时间和精力。

经验教训 -**始终为成功做好计划**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T21:29:07.923

我认为 IDataReader 是一个接口。实现和处理许多处理数据库访问的类，而如果您使用 SqlDataReader 是一个实现的类，它实际上使用 IDataReader 接口，但不限于类 IDataReader 允许您实现并轻松更改数据库提供程序（如果您决定这样做）因此，将来如果要切换数据库引擎，可以避免重写引用

# c - 在 C 中使用 bash 系统调用来编写进行 bash 系统调用的 C

> ID：13002325
> 
> 赞同：1
> 
> 时间：2012-10-21T21:21:46.933
> 
> 标签：c, bash, escaping, echo, system-calls

我正在玩一个小应用程序（在 C 中），它在运行时会创建一个目录树，并用文件填充该目录树。它通过使用一系列形式的行来做到这一点

`system("echo \"lump = \" >> ./newdirectory/newfile.c");`

这工作正常，除了当我尝试让它将一行 C 写入本身包含`system("echo");`调用的新文件时。

具体来说，

`system("echo \"system(\"echo hello world\");\" >> ./newdirectory/newfile.c");`

写成

`system(echo hello world);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T21:28:06.793

由于您希望转义字符按原样显示，因此您也需要对它们进行转义。是的，您可以转义转义字符。就像是：

```
"\\\"" 
```

这导致输出 a`\`后跟 an `"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T21:40:43.997

这是一场疯狂的比赛。但我认为，这种疯狂的正确方法是编写 C 函数来转义字符串。

内部字符串必须进行双重转义。

```
system("echo \"system(\\\"echo hello world\\\");\" >> ./newdirectory/newfile.c"); 
```

否则首先 C unescape 文字字符串和 shell 获取

```
echo "system("echo hello world");" >> ./newdirectory/newfile.c 
```

回声中的错误引号没有逃脱。

# android - 将 classes.jar 重命名为 .jar 在 android ant 中构建库项目时

> ID：13002326
> 
> 赞同：4
> 
> 时间：2012-10-21T21:21:51.873
> 
> 标签：android, ant

我有一个依赖于 Android 库项目 B 的 android 应用程序项目 A。当我在 Eclipse 中导入这两个项目时，我注意到 Eclipse Builder（可能是由于 ADT 插件），库项目被编译和构建为`b.jar`并存储在`bin\`项目B的文件夹中。它在A的类路径中被引用为b.jar。

但是，在使用 ant 命令构建它时，`ant debug`库项目 B 被编译为`classes.jar`.

有没有办法将此文件重命名为.jar？我尝试在SDK build.xml中重命名它，但是项目A似乎没有解析B中定义的类。另外，B的测试项目失败，因为Android dex编译器试图在里面搜索文件classes.jar库项目的`bin\`文件夹。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-21T19:47:25.637

在您的项目主管中创建一个 custom_rules.xml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="custom_rules">
    <target name="-post-compile">
    <echo level="info">Renaming jar filename</echo>
    <move file="${out.library.jar.file}"tofile="${out.absolute.dir}/${ant.project.name}.jar"/>
    </target>
</project> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T08:51:54.650

重命名`jar`文件的一种方法是将文件添加`custom_rules.xml`到项目中，并覆盖正确的属性：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="custom_rules">

  <property name="out.library.jar.file" location="bin/b.jar" />

</project> 
```

如果您在 SDK 的 中查找此属性名称`build.xml`，您就会明白为什么会这样。

注意：我没有检查`custom_rules.xml`Android 支持哪个 API 级别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T14:58:19.193

我在库项目中添加了一个额外的构建器：/bin/cp bin/classes.jar bin/${project_name}.jar

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-21T09:36:43.330

最简单的方法是在 ant.properties 中添加一行：

```
out.library.jar.file=bin/b.jar 
```

但是，如果项目 B 被项目 A 在 project-A/ant.properties 中引用，例如：

```
android.library.reference.1=/path/to/project-B 
```

那么编译器可能会抱怨它找不到项目 B 中定义的符号。

# php - 使用递归构建导航

> ID：13002327
> 
> 赞同：5
> 
> 时间：2012-10-21T21:22:02.527
> 
> 标签：php, mysql, recursion

我正在为一个网站构建导航，而对于我的生活，我无法弄清楚递归。我使用这种设计通过 MySQL 存储了所有数据：

![在此处输入图像描述](../Images/640be83f25b787b70db230fbd7b3f2f7.png)

我已经阅读了几个关于递归如何工作的链接，我一定很慢，因为我很难掌握。我试图写一些东西，但我知道它甚至不接近我真正需要的东西，但这是一个开始：

PDO

```
public function viewCategories()
{
    $viewSQL = "SELECT * FROM categories";  
    try
    {
        $pdo = new PDO('mysql:host=localhost;dbname=store','root','');
        $pdo->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);
        $categoryVIEW = $pdo->prepare($viewSQL);
        $categoryVIEW->execute();
        $array = $categoryVIEW->fetchAll(PDO::FETCH_ASSOC);
        $categoryVIEW->closeCursor();
        $json = json_encode($array);
        return $json;
    }
    catch(PDOexception $e)
    {
        return $e->getMessage();
        exit();
    }
} 
```

递归

```
$return = json_decode($category->viewCategories(),true);

function buildNavigation($json)
{
    foreach($json as $item)
    {
        if($item['category_id'] === $item['parent'])
        {
            print('<li>'.$item['category_name'].'</li>');
            if($item['category_id'] === $item['parent'])
            {
                print('<li>match'.$item['category_name'].'</li>');
                buildNavigation($json);
            }
        }
}
buildNavigation($return); 
```

正如预期的那样，这永远不会进入条件。我确实尝试过自己解决这个问题，因为了解这是一件好事，但我想这超出了我的心理承受能力:(

谢谢你看:)

**更新**

我知道这已经得到了回答，但是有没有办法我可以这样做来构建一个关联数组？我一直在玩一个我从**[HERE](https://stackoverflow.com/questions/3776798/php-array-recursion)**获得的几乎对我有用的函数，但它添加了一个我不想要的额外数组。

**方法**

```
private function buildCategories($array,$parent)
{
    $result = array();
    foreach($array as $row)
    {
        if($row['parent'] == $parent)
        {
            $result[$row['category_name']] = $this->buildCategories($array,$row['category_id']);
        }
    }
    return $result;
}
$json = json_encode($this->buildCategories($array,NULL));
return $json; 
```

我要这个：

```
{"reloading":{"components","presses and dies","tumblers & scales","tools & accessories","shotshell reloading"} 
```

但我得到的是：

```
{"reloading":{"components":[],"presses and dies":[],"tumblers & scales":[],"tools & accessories":[],"shotshell reloading":[]} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-21T22:09:30.673

这是一个递归的例子。

```
function buildNavigation($items, $parent = NULL)
{
    $hasChildren = false;
    $outputHtml = '<ul>%s</ul>';
    $childrenHtml = '';

    foreach($items as $item)
    {
        if ($item['parent'] == $parent) {
            $hasChildren = true;
            $childrenHtml .= '<li>'.$item['category_name'];         
            $childrenHtml .= buildNavigation($items, $item['category_id']);         
            $childrenHtml .= '</li>';           
        }
    }

    // Without children, we do not need the <ul> tag.
    if (!$hasChildren) {
        $outputHtml = '';
    }

    // Returns the HTML
    return sprintf($outputHtml, $childrenHtml);
}

print buildNavigation($items); 
```

该脚本产生以下输出：

```
<ul>
    <li>Menu 1</li>
    <li>Menu 2
        <ul>
            <li>Sub Menu 2.1</li>
            <li>Sub Menu 2.2</li>
            <li>Sub Menu 2.3
                <ul>
                    <li>Sub Menu 2.2.1</li>
                    <li>Sub Menu 2.2.2</li>
                    <li>Sub Menu 2.2.3</li>
                </ul>
            </li>
        </ul>
    </li>
    <li>Menu 3</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T22:47:04.577

我对上面的代码进行了一些修改，以便用户可以在每一级菜单上应用不同的 css，现在它在第一个子菜单中显示子菜单的类，如 child-class1，它会显示 child-class2当它在第二个子菜单等等......

```
 <?php
 function buildNavigation($items, $parent = NULL, $n=NULL)
    {
$hasChildren = false;
if ($parent == NULL)
{
    $level=0;
    $outputHtml = '<ul class="parent-class">%s</ul>';
}
else
{
    if($n==NULL)
    {
        $level=1;
    }
    else
    {
        $level=$n;
    }
    $outputHtml = '<ul class="child-class'.$level.'">%s</ul>';  
} 
$childrenHtml = '';
foreach($items as $item)
{
    if ($item['parent'] == $parent) {
        $hasChildren = true;
        $childrenHtml .= '<li><a href="/'.$item['slug'].'">'.$item['ptitle'].'</a>';
        $next = ++$level;
        $childrenHtml .= buildNavigation($items, $item['pageid'],$next);         
        $childrenHtml .= '</li>';           
    }
}

// Without children, we do not need the <ul> tag.
if (!$hasChildren) {
    $outputHtml = '';
}

// Returns the HTML
return sprintf($outputHtml, $childrenHtml);
}
echo  buildNavigation($ppages);
?> 
```

它会像这样显示

```
 <ul class="parent-class">
      <li>
        <a href="http://example.com/page-1">page 1</a>
           <ul class="child-class1">
              <li>
                 <a href="http://example.com/this-is-child-page">this is child page</a>
                  <ul class="child-class2">
                     <li>
                        <a href="http://example.com/child-of-child">child of child</a>                 </li>
                  </ul>
              </li>
          </ul>
      </li>
 </ul> 
```

我要感谢@Maxime Morin 先生。

# mysql - 我正在尝试获取最后一个表数据行。我有以下代码：

> ID：13002330
> 
> 赞同：1
> 
> 时间：2012-10-21T21:22:35.720
> 
> 标签：mysql, limit

我正在尝试获取最后一个表数据行。我有这个代码：

```
// Connects to your Database 

 mysql_connect("*", "*", "*") or die(mysql_error()); 
 mysql_select_db("*") or die(mysql_error()); 

 // Collects data from table 
 $data = mysql_query("SELECT * FROM ps_product_lang JOIN ps_image ON ps_image.id_product = ps_product_lang.id_product WHERE id_lang = '1' ORDER BY ps_product_lang.id_product DESC LIMIT 16") 
 or die(mysql_error());

// puts the info into the $info array 
 $info = mysql_fetch_array( $data );

define('COLS', 6); // number of columns
$col = 0; // number of the last column filled

echo '<tr>'; // start first row

while($info = mysql_fetch_array( $data )) 
{ $col++;
  if ($col == COLS) // have filled the last row
  { $col = 1;
    echo '</tr><tr>'; // start a new one
  }

 echo '<td width="150" height="150" align="center" class="newprod">'; 
 Print  (strtolower (str_replace(" ","-","<a/href='/shop/".$info['id_product'] . "-".$info['link_rewrite'] . ".html'><img/src='http://wearitnewear.com/shop/".$info['id_image'] . "-medium/".$info['link_rewrite'] . ".jpg'></a>")));
 echo '<br/>';
 Print " ".$info['name'] . " "; 
 echo '</td>';
 } 

echo '</tr>'; // end last row 
```

我已将限制设置为 16，但它只从表中提取 15 个条目；最后一个它不会拉出和显示。

所以如果我说有

```
1
2
3
4
5 
```

它只会显示

```
1
2
3
4 
```

但我的限制必须设置为 5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:23:51.380

```
// Connects to your Database 

mysql_connect("*", "*", "*") or die(mysql_error()); 
mysql_select_db("*") or die(mysql_error()); 

// Collects data from table 
$data = mysql_query("SELECT * FROM ps_product_lang JOIN ps_image ON ps_image.id_product = ps_product_lang.id_product WHERE id_lang = '1' ORDER BY ps_product_lang.id_product DESC LIMIT 16") or die(mysql_error());

if ( $data ) {
    echo '<tr>'; // start a new one
    $column = -1 ;
    $column_count = 6 ;
    while($info = mysql_fetch_array( $data )) 
    {
        $column++ ;
        if ( $column == $column_count ) {
            echo '</tr><tr>' ;
            $column = 0 ;
        }
        echo '<td width="150" height="150" align="center" class="newprod">'; 
        Print  (strtolower (str_replace(" ","-","<a/href='/shop/".$info['id_product'] . "-".$info['link_rewrite'] . ".html'><img/src='http://wearitnewear.com/shop/".$info['id_image'] . "-medium/".$info['link_rewrite'] . ".jpg'></a>")));
        echo '<br/>';
        Print " ".$info['name'] . " "; 
        echo '</td>';
    }
    echo '</tr>' ;
}
mysql_free_result($data); 
```

# tomcat - 圣杯 2.1.1。退出错误“坏”

> ID：13002336
> 
> 赞同：1
> 
> 时间：2012-10-21T21:23:15.110
> 
> 标签：tomcat, grails, groovy, jetty

我在 debian 服务器上运行 grails 应用程序（grails 2.1.1）。该应用程序启动并运行良好，直到它在终端上仅显示“坏”一词而停止。没有错误，没有堆栈跟踪报告。有没有人遇到过这个问题？这是什么意思？

服务器相当大（32gb 内存和 128gb 加密 SSD，8 个核心），所以我怀疑应用程序的资源不足。

至于插件，我只使用预打包的插件并使用缓存（控制器的标准 RAM 缓存 + ehcache）。

我已经尝试了“grails prod run-app”、“grails prod run-war”，所以它分别发生在 Jetty 和 Tomcat 上。

我非常感谢帮助或提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:28:52.503

您的意思是您正在使用“grails”命令在生产环境中运行应用程序吗？您应该部署到 Tomcat（或 Jetty 或其他一些“应用服务器”）

这可能是从以下位置打印“坏”的地方： [https ://github.com/grails/grails-core/blob/master/grails-plugin-tomcat/src/main/groovy/org/grails/plugins/tomcat/隔离WarTomcatServer.groovy#L92](https://github.com/grails/grails-core/blob/master/grails-plugin-tomcat/src/main/groovy/org/grails/plugins/tomcat/IsolatedWarTomcatServer.groovy#L92)

也许默认端口是保留的。尝试在另一个端口上运行 grails。将“grails.server.port.http=8181”添加到 BuildConfig.groovy 以在端口 8181 上启动 http。

# php - Laravel 包含一个使用 autoload.php 的库

> ID：13002337
> 
> 赞同：0
> 
> 时间：2012-10-21T21:23:30.513
> 
> 标签：php, laravel

我正在尝试在我的家庭控制器中使用[Faker](https://github.com/fzaninotto/Faker)库，但我不知道如何包含它。图书馆的文档使用这个：

```
require_once '/path/to/Faker/src/autoload.php';
$faker = Faker\Factory::create(); 
```

但是 Laravel 有不同的[加载类](http://laravel.com/docs/loading)的方式，但是我没有找到这样的库的示例。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:28:26.480

我猜你是用作曲家添加的？[我使用了一个带有 composer ( Imagine](https://github.com/avalanche123/Imagine) )安装程序的库，并且我想使用 composer 加载脚本，所以我在 start.php 中执行了此操作：

```
// Composer package
require_once  $GLOBALS['laravel_paths']['base'] . 'vendor' . DS . 'autoload.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T03:07:16.680

你应该看看[注册一个命名空间](http://laravel.com/docs/loading#namespaces)，它应该照顾你需要的东西。Faker 遵循 PSR0 命名空间标准，因此您需要告诉 laravel 如何找到这些文件。在您的`application/start.php`文件中放置这些指令：

```
Autoloader::namespaces(array(
    'Faker' => path('libraries').'path/to/Faker/src/Faker',
)); 
```

希望有帮助！

编辑：

此外，我意识到如果您将 src/Faker 文件夹移动到`application/libraries`它`application/libraries/Faker`应该会自动加载的位置。

# php - Symfony2 登录 - 错误的凭据

> ID：13002342
> 
> 赞同：0
> 
> 时间：2012-10-21T21:23:42.207
> 
> 标签：php, mysql, symfony

我一直在尝试让数据库登录系统与 Symfony2 一起工作。我已经阅读了文档，但我现在完全不知道该怎么做......

每次我尝试登录时，我都会得到“坏凭据”。

实现 UserInterface 的“用户”类在这里：

[http://pastebin.com/9uzbwM9v](http://pastebin.com/9uzbwM9v)

'UserRepository' 类在这里：

[http://pastebin.com/Gn0AbZb4](http://pastebin.com/Gn0AbZb4)

“security.yml”文件在这里：

[http://pastebin.com/50FUNnbq](http://pastebin.com/50FUNnbq)

数据库方案是这样的：

[http://pastebin.com/5nj0rXhs](http://pastebin.com/5nj0rXhs)

我只是不知道从这里去哪里......：L我一直在环顾四周，但我只是没有在教程中得到一些其他的东西，也许这只是一天中的时间！这是漫长的一周……

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:07:58.090

乍一看，您的`loadUserByUsername`方法中有一个小错字：

```
->where('u.account_name = :usefdgdfgfrname OR u.account_email = :email') 
```

应该：

```
->where('u.account_name = :username OR u.account_email = :email') 
```

# sql - 树结构查询中逻辑或的全外连接的替代方案

> ID：13002344
> 
> 赞同：6
> 
> 时间：2012-10-21T21:23:49.123
> 
> 标签：sql, postgresql, tree, hierarchy

我希望标题足够清楚。我一直在使用简单的节点和父子关联表为保存在数据库中的树结构实现逻辑 AND/OR。示例树具有如下结构：

![节点及其子节点](../Images/8be0daa811d4303f53fed1f26db77ff7.png)

示例树结构查询如下：

![A 包含某些类型的子节点，这些子节点又包含其他节点](../Images/c2bcfde8b6f1f2f36aec3b4221da1866.png)

查询模式中的双线表示 A 具有 B 类型的子节点（在其子节点下方的某个位置）或 C。我已经实现了 A -> HASCHILD -> C -> HASCHILD -> E 与内部连接，并且 A - > HASCHILD -> B -> HASCHILD -> E 是这样实现的。诀窍是在 A 上连接这两个分支。由于这是 OR 操作，因此 B 分支或 C 分支可能不存在。如果使用 A 的 node_id 作为键的两个分支的完全外部连接，我能想到的唯一方法。为了避免细节，让我从我的 SQL 查询中给出这个简化的片段：

```
 WITH A as (....),
    B as (....),
    C as (....),
    ......

SELECT * 
      from
          A
          INNER JOIN A_CONTAINS_B ON  A.NODE_ID = A_CONTAINS_B.parent
          INNER JOIN B ON A_CONTAINS_B.children @> ARRAY[B.NODE_ID]
          INNER JOIN .....

          full OUTER JOIN -- THIS IS WHERE TWO As ARE JOINED
          (select
          A2.NODE_ID AS A2_NODE_ID
          from
          A2
          INNER JOIN A_CONTAINS_C ON A2.NODE_ID = C_CONTAINS_C.parent
          INNER JOIN C ON A_CONTAINS_C.children @> ARRAY[C.NODE_ID]
          INNER JOIN ....) 
          as other_branch
          ON other_branch.A2_NODE_ID = A.NODE_ID 
```

此查询使用 node_id 链接两个实际表示相同 A 的 As，如果 B 或 C 不存在，则不会中断。结果集当然有重复，但我可以忍受。但是，我想不出在这种情况下实现 OR 的另一种方法。AND 很简单，它们是内连接，但左外连接是让我连接 As 的唯一方法。两个分支都带有虚拟列的 UNION ALL 不是一个选项，因为在这种情况下我无法连接 As。

你有什么替代我在这里做的事情吗？

**更新**

TokenMacGuy 的建议给了我一条比目前更干净的路线。我应该记得UNION。使用他建议的第一种方法，我可以应用查询模式分解，这将是使用逻辑运算符分解查询的一致方式。以下是我将要执行的操作的可视化表示，以防万一它有助于其他人可视化该过程：

![树查询分解](../Images/ed069e776ac991684d5da42f6ed8997b.png)

这有助于我做很多好事，包括创建一个很好的结果集，其中查询模式组件链接到结果。我故意避免表或其他上下文的细节，因为我的问题是关于如何连接查询结果。我如何处理 DB 中的层次结构是我想避免的另一个主题。我会在评论中添加更多细节。这基本上是一个 EAV 表，伴随着一个层次结构表。以防万一有人想看到它，在遵循 TokenMacGuy 的建议之后，这是我正在运行的查询，没有任何简化：

```
WITH
    COMPOSITION1 as (select comp1.* from temp_eav_table_global as comp1
                      WHERE
                      comp1.actualrmtypename = 'COMPOSITION'),
    composition_contains_observation as (select * from parent_child_arr_based),
    OBSERVATION as (select obs.* from temp_eav_table_global as obs
                        WHERE
                        obs.actualrmtypename = 'OBSERVATION'),
    observation_cnt_element as (select * from parent_child_arr_based),
    OBS_ELM as (select obs_elm.* from temp_eav_table_global as obs_elm
                        WHERE
                        obs_elm.actualrmtypename= 'ELEMENT'),

     COMPOSITION2 as (select comp_node_tbl2.* from temp_eav_table_global as comp_node_tbl2
                          where
                          comp_node_tbl2.actualrmtypename = 'COMPOSITION'),
    composition_contains_evaluation as (select * from parent_child_arr_based),
    EVALUATION as (select eva_node_tbl.* from temp_eav_table_global as eva_node_tbl
                            where
                            eva_node_tbl.actualrmtypename = 'EVALUATION'),
    eval_contains_element as (select * from parent_child_arr_based),
    ELEMENT as (select el_node_tbl.* from temp_eav_table_global as el_node_tbl
                            where
                            el_node_tbl.actualrmtypename = 'ELEMENT')

select
                      'branch1' as branchid,
                      COMPOSITION1.featuremappingid as comprootid,
                      OBSERVATION.featuremappingid as obs_ftid,
                      OBSERVATION.actualrmtypename as obs_tn,
                      null as ev_ftid,
                      null as ev_tn,
                      OBS_ELM.featuremappingid as obs_elm_fid,
                      OBS_ELm.actualrmtypename as obs_elm_tn,
                      null as ev_el_ftid,
                      null as ev_el_tn

                      from
                      COMPOSITION1
                      INNER JOIN composition_contains_observation ON COMPOSITION1.featuremappingid = composition_contains_observation.parent
                      INNER JOIN OBSERVATION ON composition_contains_observation.children @> ARRAY[OBSERVATION.featuremappingid]
                      INNER JOIN observation_cnt_element on observation_cnt_element.parent = OBSERVATION.featuremappingid
                      INNER JOIN OBS_ELM ON observation_cnt_element.children @> ARRAY[obs_elm.featuremappingid]

UNION

SELECT                  
                        'branch2' as branchid,
                        COMPOSITION2.featuremappingid as comprootid,
                        null as obs_ftid,
                        null as obs_tn,
                        EVALUATION.featuremappingid as ev_ftid,
                        EVALUATION.actualrmtypename as ev_tn,
                        null as obs_elm_fid,
                        null as obs_elm_tn,
                        ELEMENT.featuremappingid as ev_el_ftid,
                        ELEMENT.actualrmtypename as ev_el_tn                       
                  from
                      COMPOSITION2
                      INNER JOIN composition_contains_evaluation ON  COMPOSITION2.featuremappingid = composition_contains_evaluation.parent
                      INNER JOIN EVALUATION ON composition_contains_evaluation.children @> ARRAY[EVALUATION.featuremappingid]
                      INNER JOIN eval_contains_element ON EVALUATION.featuremappingid = eval_contains_element.parent
                      INNER JOIN ELEMENT on eval_contains_element.children @> ARRAY[ELEMENT.featuremappingid] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T21:30:18.813

∨ 的关系等价物是 ⋃。您可以使用`union`to combine `a JOIN b JOIN e`with`a JOIN c JOIN e`或仅使用 b 和 c 的并集并加入生成的组合关系，例如`a JOIN (b UNION c) JOIN e`

更完整：

```
SELECT *
FROM a
JOIN (
    SELECT
        'B' source_relation,
        parent,
        b.child,
        b_thing row_from_b,
        NULL row_from_c
    FROM a_contains_b JOIN b ON a_contains_b.child = b.node_id

    UNION
    SELECT
        'C',
        parent
        c.child,
        NULL,
        c_thing
    FROM a_contains_c JOIN c ON a_contains_c.child = c.node_id
) a_c ON A.NODE_ID = a_e.parent
JOIN e ON a_c.child = e.node_id; 
```

# javascript - 拆分字符串后获取单词

> ID：13002346
> 
> 赞同：1
> 
> 时间：2012-10-21T21:23:52.630
> 
> 标签：javascript

所以我有一段字符串，需要按句点分隔。我如何得到前2句话？

这是我所拥有的：

```
var text="Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus."

text.split(".");
for (i=0;i <2;i++) {
   //i dont know what to put here to get the sentence
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:39:19.710

`split`不要与 jQuery 混淆，它实际上是一个返回字符串数组的 JavaScript 函数——你可以在这里看到它的介绍：http: [//www.w3schools.com/jsref/jsref_split.asp](http://www.w3schools.com/jsref/jsref_split.asp)

这是使您的示例工作的代码：

```
var text="Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus."

// Note the trailing space after the full stop.
// This will ensure that your strings don't start with whitespace.
var sentences = text.split(". ");

// This stores the first two sentences in an array
var first_sentences = sentences.slice(0, 2);

// This loops through all of the sentences
for (var i = 0; i < sentences.length; i++) {
  var sentence = sentences[i]; // Stores the current sentence in a variable.
  alert(sentence); // Will display an alert with your sentence in it.
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T21:27:28.313

Split 返回一个数组，因此您需要将其分配给一个变量。然后，您可以使用数组访问器语法`array[0]`来获取该位置的值：

```
var text="Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus."

var sentences = text.split(".");
for (var i = 0; i < 2; i++) {
    var currentSentence  = sentences[i];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T21:27:38.123

它返回一个数组，所以：

```
var myarray = text.split(".");

for (i=0;i <myarray.length;i++) {
    alert( myarray[i] );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T21:29:24.250

前两句应该是：

```
 text.split('.').slice(0,2).join('. '); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/yfRyE/)。

参考：

*   [`join()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join).
*   [`slice()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice).
*   [`split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split).

# php - 有没有办法在 windows 和 linux 上使用 php 检测文件夹中的更改？

> ID：13002348
> 
> 赞同：6
> 
> 时间：2012-10-21T21:23:58.763
> 
> 标签：php, shell, notifications, directory, multiplatform

我正在寻找使用**php**检测文件夹更改的解决方案。该应用程序可以在两个平台（*linux*和*windows*）上运行。只要结果相同，我可以为每个平台使用不同的方法。我想要的是：

1.  如果将文件/文件夹添加到目录中，我希望我的应用程序检测到这个新文件并读取其属性（`size,filetime`等）
2.  如果现有文件/文件夹已保存/内容更改/删除，我需要检测此文件已更改
3.  如果我可以监视*apache*的webroot之外的基本文件夹会更好（例如`c:\tmp`，或`d:\music`在windows或`/home/ertunc`linux上）

我读了一些东西，`inotify`但我不确定它是否满足我的需求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T21:29:43.663

监视文件系统的更改是一项应该在 PHP 之外解决的任务。它并不是真正为做这样的事情而设计的。

两个平台上都有现成的工具可以监控文件更改，这些更改可以调用 PHP 文件进行进一步处理。

对于 Linux：

*   [如何有效地监控 linux 上的目录更改？](https://stackoverflow.com/questions/6788541/how-to-efficiently-monitor-a-directory-for-changes-on-linux)（一目了然最好看）
*   [监控目录的变化](https://stackoverflow.com/questions/511463/monitor-directory-for-changes)

对于 Windows：

*   [如何在 Windows 上监视文件夹的更改，如果有，则执行命令？](https://superuser.com/questions/468662/how-to-monitor-a-folder-for-changes-and-execute-a-command-if-it-does-on-window)
*   [如何监视 Windows 目录的更改](https://stackoverflow.com/questions/760904/how-can-i-monitor-a-windows-directory-for-changes)中的第二个答案？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T21:30:26.480

因此，如果您正在检查与上次检查相比，而不是在更改后立即更新，您可以执行以下操作。

您可以创建目录的 MD5，存储此 MD5，然后将新的 MD5 与旧的 MD5 进行比较，以查看是否发生了变化。

以下取自[http://php.net/manual/en/function.md5-file.php](http://php.net/manual/en/function.md5-file.php)的函数将为您执行此操作。

```
function MD5_DIR($dir)
{
    if (!is_dir($dir))
    {
        return false;
    }

    $filemd5s = array();
    $d = dir($dir);

    while (false !== ($entry = $d->read()))
    {
        if ($entry != '.' && $entry != '..')
        {
             if (is_dir($dir.'/'.$entry))
             {
                 $filemd5s[] = MD5_DIR($dir.'/'.$entry);
             }
             else
             {
                 $filemd5s[] = md5_file($dir.'/'.$entry);
             }
         }
    }
    $d->close();
    return md5(implode('', $filemd5s));
} 
```

但是，这相当低效，因为您可能知道，如果第一位不同，则检查目录的全部内容是没有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T21:31:37.540

I would

1.  scan all folders/files and create an array of them,
2.  save this somewhere
3.  run this scan again later [to check if the array still looks the same].

As you have the entire data structure from "time 1" and "now", you can clearly see what has changed. To crawl through the directories, check this: [http://www.evoluted.net/thinktank/web-development/php-directory-listing-script](http://www.evoluted.net/thinktank/web-development/php-directory-listing-script) and this [http://phpmaster.com/list-files-and-directories-with-php/](http://phpmaster.com/list-files-and-directories-with-php/)

# php - 循环通过 php 表不起作用 [警告：mysql_fetch_assoc() 期望参数 1 是资源，给定的布尔值]

> ID：13002362
> 
> 赞同：0
> 
> 时间：2012-10-21T21:25:45.283
> 
> 标签：php, mysql, database

我在 index.php 页面上收到此错误，其中还包含了代码

```
<?pho
require 'connect.php';
?> 
```

警告：mysql_fetch_assoc() 期望参数 1 是资源，给定的布尔值

```
<?php
$sql = "SELECT * FROM 'menulinks'";

$result = mysql_query($sql);

while ($row = mysql_fetch_assoc($result)) {
    echo '<li>', $row['linktitle'], '<li>';

}
    ?> 
```

这是我的连接功能

```
<?php

$con = mysql_connect('localhost', 'root', '') or die('Sorry, we could not connect');
mysql_select_db('philipsnewsite', $con) or die('Sorry, we could not connect');

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:28:33.727

您已经用单引号字符引用了表名，MySQL 将其解释为字符串文字。您应该使用反引号，或者根本不使用引号字符：

```
$sql = "SELECT * FROM `menulinks`"; 
```

这个语法错误导致`mysql_query()`函数返回false，你可以测试如下：

```
$result = mysql_query($sql) or die(mysql_error()); 
```

另请注意，如手册页顶部的**大红色框中**[`mysql_query()`](http://php.net/manual/en/function.mysql-query.php)所述：

> ### 建议的替代品
> 
> 不鼓励使用此扩展程序。相反，应该使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://www.php.net/manual/en/ref.pdo-mysql.php)另请参阅[MySQL：选择 API](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)指南和[相关的常见问题解答](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)以获取更多信息。此功能的替代方案包括：
> 
> *   [`mysqli_query()`](http://www.php.net/manual/en/mysqli.query.php)
> *   [`PDO::query()`](http://www.php.net/manual/en/pdo.query.php)

# javascript - 递归，Sigma 表示法 (html/javascript)

> ID：13002363
> 
> 赞同：0
> 
> 时间：2012-10-21T21:25:54.427
> 
> 标签：javascript, function, recursion

我的目标是使用递归来使 sigma 表示法工作。上限为 n(输入变量) 下限为 i=1，函数为 (-i)^(i-1)。我让它与迭代一起工作，但我无法让递归工作。

```
<!DOCTYPE html>
<head><title>Recursion</title></head>
<body>
<h1>Recursion</h1>
<script = "text/javascript">
var num
var i;
var n;
var total;
total = 0;
i=0;
var b;
b=0;
function formula(n)
{
(Math.pow((-i),(i-1)))
}

function recursion(n)
{
i=i+1;
if ((n-i) == 0)
{
document.writeln("done");
}
else
{
total = total + recursion(formula(n-i));
return total;

//total = total + (Math.pow((-i),(i-1)) + recursion(n-i));
}
}
num = window.prompt("pick a number");
recursion(num);
document.writeln(recursion(num));
//document.writeln(total);

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:35:07.850

Please avoid any global variables, that makes it very hard to read. Also, indent your code properly; and don't mix the output (`document.write`) into the computation. If you don't understand the recursion, just use a loop:

```
var total = 0;
for (var i=1; i<=n; i++)
    total += formula(i);
return total; // the result 
```

The same thing, done with recursion:

```
function sumFormulaUpTo (n) {
    if (n <= 0) // the abort condition
        return 0;
    else
        return sumFormulaUpTo(n-1) + formula(n);
}
sumFormulaUpTo(100); 
```

You notice: there is no `total` variable, only the result of the recursively called function is used.

With an end recursion (more like the loop), it would look like this:

```
function sumFormulaFromTo(total, i, n) {
    if ( i > n )
        return total;
    else {
        var newtotal = total + formula(i);
        return sumFormulaFromTo(newtotal, i+1, n);
    }
}
sumFormulaFromTo(0, 1, 100); 
```

If you had `total` and `n` declared statically outside the function, it would look more like yours. Yet, you forgot to return the result once the end condition is met (you just output something, but return `undefined`), and you somehow called the recursion with the result of `formula` - no idea where you got that from. This causes an infinite loop, according to @cbayram.

# android - 在 libGDX 中启动 android 应用程序时出现 java.lang.NoClassDefFoundError

> ID：13002364
> 
> 赞同：1
> 
> 时间：2012-10-21T21:26:03.650
> 
> 标签：android, libgdx

伙计们，当我试图通过桌面应用程序运行 android 应用程序时，这个运行时错误会一次又一次地弹出。桌面应用程序工作得很好，但是当我尝试通过 android 应用程序运行时，它为`noclassdeffounderror`桌面应用程序中的类提供了 ！已经四五个小时了！这到底是怎么回事？它可能有什么问题？

请提出建议！PS我没有使用ADT 17 ver。帮助伙计们！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T16:52:52.287

右键单击您的 Android 项目-> 属性-> Java 构建路径-> 订购和导出 导出您正在使用的**所有 jar****以及带有 android 项目的桌面项目**，如图所示，这将使您的应用程序在 android 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T01:48:50.133

右键单击您的 Android 项目->属性->Java 构建路径->订购和导出检查您正在使用的库（例如 Gdx.jar）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-29T21:19:24.047

如果每件事都链接得很好......（使用Java构建路径和顺序和导出......）并且仍然在android上运行项目时遇到问题，请检查JRE是否设置为1.6。

将主 Java 项目中的 JRE 从 1.7 更改为 1.6，并尝试在 android 上运行它。

Eclipse-> main-java-project-->展开目录-->右击JRE System library-->勾选“Execution environment”-->选择JavaES 1.6 jre6->点击Ok

# wpf - 如何在绑定的动态集合中的每个项目之间插入 GridSplitter 行

> ID：13002365
> 
> 赞同：3
> 
> 时间：2012-10-21T21:26:05.657
> 
> 标签：wpf, binding, itemscontrol, gridsplitter

我有一个单列网格，在 WPF 应用程序中具有不同高度的行。网格中的项目是动态生成的，将在运行时添加和删除。

对于添加的每一行，我希望在每个元素之间插入一个 GridSplitter 行。

我目前通过 ItemControl 绑定模型数据，并使用 AttachedProperties 来获取元素行数（显然最终的解决方案将有更多的行数来包含 GridSplitters）：

```
<ItemsControl ItemsSource="{Binding MyModel}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Grid local:GridHelpers.RowCount="{Binding MyModel.RowCount}" local:GridHelpers.ColumnCount="1"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
</ItemsControl> 
```

MyModel 变量是一个包含 ViewModel 对象的 ObservableCollection。RowCount 是一个成员变量，它返回集合中元素的数量。

如何在每行之间插入 GridSplitter？

我希望从模板生成每个元素和 GridSplitter。但是，如果 GridSplitter 包含在模板中，则由于存在 ContentPresenter 作为其父级而不是 Grid，因此它不起作用。除了创建自己的 UI 元素之外，我的想法已经用完了，它有自己的拆分器组件是从头开始编写的。肯定还有别的办法！

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:39:17.250

我假设定义属性的`GridHelpers`静态类负责为.`RowCount``RowDefinition``ItemsSource`

对于第二个项目和所有后续项目，`RowDefinition`您的代码应该添加两个行定义，而不是添加一个行定义 - 一个用于项目，一个用于拆分器。然后代码还应该添加一个gridsplitter，其Grid.Row 值是您动态添加的两个RowDefinition 中的第一个。总是很奇怪。

```
 var gs = new GridSplitter();
    gs.SetValue(Grid.RowProperty, x); //x = the RowDefinition you are generating
    gs.ResizeBehavior = GridResizeBehavior.PreviousAndNext;
    gs.HorizontalAlignment = System.Windows.HorizontalAlignment.Stretch;
    gs.VerticalAlignment = System.Windows.VerticalAlignment.Top;
    gs.Height = 3; //or whatever other height you desire. 
```

然后为项目本身添加另一个 RowDefinition。不要忘记将项目的 Grid.Row 属性设置为偶数行定义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:21:55.600

好吧，经过大量阅读，我想我已经找到了最好的解决方案，对于那些可能希望做同样事情的人。

我实现了类似于 ColumnResizerAdorner 在核心 WPF 库中的工作方式。还可能值得查看 MSDN 的 WPF 示例中的 ResizingAdorner 示例。

我有一个装饰类，它将拇指添加到 VisualCollection。用于处理拇指拖动事件的类。此类知道 Grid 行定义，并相应地调整它们的大小。

# ruby-on-rails - 使用 Ruby on Rails/括号上传 JQuery 文件

> ID：13002366
> 
> 赞同：2
> 
> 时间：2012-10-21T21:26:19.153
> 
> 标签：ruby-on-rails

我对 Ruby on Rails 上的 JQuery File Uploader 很感兴趣，并尝试使用[这个应用程序](https://github.com/banditj/fily/tree/no-asset-pipeline#readme)m 和[这个](https://github.com/jalagrange/bootstrap_uploader)

我用“rails new fily”制作了一个新的 rails 项目，并将所有文件复制并粘贴到我的 fily 文件夹中这个应用程序。我跑了`bundle install`，`rake db:migrate`但打开`localhost:3000/picture`我看到的唯一东西是：`[]`，括号，仅此而已。可能是什么原因？

在终端中，我看到以下内容：

```
Started GET "/pictures" for 127.0.0.1 at 2012-10-21 23:21:13 +0200
  Processing by PicturesController#index as HTML
  Picture Load (0.2ms)  SELECT "pictures".* FROM "pictures" 
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.2ms)
[2012-10-21 23:21:14] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

如果有人帮助我，我将不胜感激

PS。我在那里也发现了一些非常奇怪的隐藏文件：

```
 .rvmrc 
```

内容：

```
rvm use ruby-1.9.3-p194@fily 
```

那应该是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:08:17.300

.rvmrc 文件由 RVM（Ruby 版本管理器）使用，它允许 Ruby 的多个版本在一台机器上共存，并允许您指定要使用的版本。.rvmrc 告诉 RVm 使用指定版本的 ruby​​，尽管在我看来，制作该 git repo 的人使用了他自己从源代码编译的版本。我认为删除它不会带来任何伤害。

查看代码，（这台机器上还没有 ruby​​，所以我无法确定），好像你不应该访问 /pictures。相反，只需访问 / （它调用并呈现图片#new 控制器）。

# c - 使用 fwrite() 在 C 中逐字节写入文件

> ID：13002367
> 
> 赞同：6
> 
> 时间：2012-10-21T21:26:42.880
> 
> 标签：c, linux

我正在尝试逐字节读取文件并将其写入另一个文件。我有这个代码：

```
if((file_to_write = fopen(file_to_read, "ab+")) != NULL){

  for(i=0; i<int_file_size; i++){
    curr_char = fgetc(arch_file);

    fwrite(curr_char, 1, sizeof(curr_char), file_to_write);
  }
} 
```

其中`int_file_size`是我要读取的字节数，`arch_file`是我正在读取的文件，并且`curr_char`是一个 char 指针。

但是，这不起作用。我在循环的第一次迭代中收到分段错误（核心转储）错误。我很确定我的 fwrite() 语句有问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T21:28:18.267

您应该传递 的*地址*，`curr_char`而不是其`curr_char`本身：

```
fwrite(&curr_char, 1, sizeof(curr_char), file_to_write);
//     ^------ Here 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T21:35:54.223

> `curr_char` is a char pointer.

In that case,

```
curr_char = fgetc(arch_file); 
```

is wrong. You're implicitly converting the `int` returned by `fgetc` to a `char*`, and then in `fwrite`, that value is interpreted as an address, from which the `sizeof(char*)` bytes are tried to be read and written to the file.

If `curr_char` points to memory allocated for a `char`,

```
*curr_char = fgetc(arch_file);
fwrite(curr_char, 1, sizeof *curr_char, file_to_write); 
```

would be closer to correctness. But `fgetc` returns an `int` and not a `char` for a reason, it may fail, in which case it returns `EOF`. So you should have

```
int chr = fgetc(arch_file);
if (chr == EOF) {
    break;  // exit perhaps?
}
char c = chr;  // valid character, convert to `char` for writing
fwrite(&c, 1, sizeof c, file_to_write); 
```

to react to file reading errors.

# c++ - 类模板中的模板构造函数 - 如何为第二个参数显式指定模板参数？

> ID：13002368
> 
> 赞同：13
> 
> 时间：2012-10-21T21:26:45.547
> 
> 标签：c++, templates

类模板中的模板构造函数 - 如何为第二个参数显式指定模板参数？

尝试为构造函数 2 显式指定模板参数时出现编译错误。如果我真的想显式调用构造函数 2，我应该怎么做？

请注意，当您想显式指定删除器类型时，这与 boost::shared_ptr 的情况相同。

注意对于**非**构造函数 foo()，明确指定可以正常工作。

注意我知道它可以正常工作**，而无需**为构造函数 2 显式指定第二个，因为模板参数推导通常工作正常，我只是好奇如何显式指定它。

```
template<class T> class TestTemplate {
public:
    //constructor 1
    template<class Y> TestTemplate(T * p) {
        cout << "c1" << endl;
    }

    //constructor 2
    template<class Y, class D> TestTemplate(Y * p, D d) {
        cout << "c2" << endl;
    }

    template<class T, class B>
    void foo(T a, B b) {
        cout << "foo" << endl;
    }
};

int main() {
    TestTemplate<int> tp(new int());//this one works ok call constructor 1
    //explicit template argument works ok
    tp.foo<int*, string>(new int(), "hello");

    TestTemplate<int> tp2(new int(),2);//this one works ok call constructor 2

    //compile error when tried to explicit specify template argument for constructor 2
    //How should I do it if I really want to explicit call constructor 2?
    //TestTemplate<int*, int> tp3(new int(), 2); //wrong
    //TestTemplate<int*> tp3<int*,int>(new int(), 2); //wrong again

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-21T22:01:09.603

修复您的代码，以下将起作用：

```
template<class T> class TestTemplate {
public:
    //constructor 1
    template<class Y> TestTemplate(Y * p) {
        cout << "c1" << endl;
    }

    //constructor 2
    template<class Y, class D> TestTemplate(Y * p, D d) {
        cout << "c2" << endl;
    }

    template<class A, class B>
    void foo(A a, B b) {
        cout << "foo" << endl;
    }
};

int main() {
    TestTemplate<int> tp(new int());

    tp.foo<int*, string>(new int(), "hello");

    TestTemplate<int> tp2(new int(),2);
} 
```

您不能`T`用于类模板参数**和**构造函数模板参数。但是，要回答您的问题，来自 [14.5.2p5]：

> 因为显式模板实参列表跟在函数模板名之后，并且因为转换成员函数模板和构造函数成员函数模板在调用时不使用函数名，所以无法为这些函数模板提供显式模板实参列表。

因此，您不能为构造函数显式指定模板参数。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-21T22:11:25.843

您不能为构造函数显式指定模板参数，因为构造函数本身没有名称，因此没有语法。

*但是，您可以确保推断出*正确的模板参数，方法是

*   铸造实际参数，和/或

*   如有必要，引入“人工”额外参数只是为了携带类型信息，和/或

*   使用工厂函数。

例如，您可以定义

```
template< class Type > struct TypeCarrier{ typedef Type T; };

struct MyClass
{
    template< class Type >
    MyClass( TypeCarrier< Type > ) { ... }
};

...
MyClass o( TypeCarrier<int>() ); 
```

但不要被这些技术冲昏了头脑。

相反，如果出现明显需要显式指定构造函数模板参数的情况，请考虑设计是否真的合理？

如果您考虑一下它的用途，也许您可​​以使用一些更简单的*设计*？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-21T21:56:14.153

您可以为调用显式指定模板参数，`foo`因为这些成员函数`foo`具有名称——并且模板参数是该名称的一部分。

这不适用于构造函数，因为构造函数没有名称。您不能（直接）调用构造函数。创建对象时当然会调用构造函数，但调用是生成的代码。

# sql-server-2005 - 执行返回“已成功完成”线索的存储过程

> ID：13002375
> 
> 赞同：0
> 
> 时间：2012-10-21T21:27:51.103
> 
> 标签：sql-server-2005, c#-4.0, return-value, asp.net-4.0

我有一个存储过程

```
UPDATE tblTime
SET TimeOut = DATEADD(HOUR,8,TimeIn)
WHERE tId =
( 
   SELECT MAX(tId)
   FROM tblTime
   WHERE UserId = 3571
) 
```

尽管确实没有问题，但在这种情况下，如果它确实在此查询中成功

导致即使该字段为空或有值，在这种情况下它也会成功

但我确实需要它用于将来的其他查询......而且，在这种情况下，我希望 C# 代码不仅报告它正在请求执行查询——这意味着它确实发生了，

但要从 sql server 获得**实际答案**作为 c# 可以使用或变成的返回值`Boolean`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:24:28.460

我已经设法对此做了一些事情，所以我可以在 sql server 存储过程中指定一个条件

然后声明一个`OUTPUT`变量（PARAMETER）

如果满足条件，则将其值设置为 1，如果不满足，则设置为 -1

然后在c#中设置一个函数，在这个例子中输出参数命名如下`ERROR`

```
 public static int UpdateTblViaStoredPRoc(string SPname, int UserID)
        {
            int message = 0;
            using (SqlConnection con = new SqlConnection("server=(local);Initial Catalog=****DBNAME HERE***;Integrated Security=True"))
            {

                con.Open();

                SqlCommand cmd = new SqlCommand(SPname, con);

                cmd.CommandType = CommandType.StoredProcedure;

                cmd.Parameters.AddWithValue("@Uid", UserID);

                cmd.Parameters.Add("@ERROR", SqlDbType.Int);

                cmd.Parameters["@ERROR"].Direction = ParameterDirection.Output;

                cmd.ExecuteNonQuery();

                 message =(int) cmd.Parameters["@ERROR"].Value;

                con.Close();
            }
            return message;
        } 
```

然后存储过程总是遵循相同的模式

声明`ERROR` 参数，设置条件以相应地输出错误：

```
ALTER PROCEDURE [dbo].[nameofProc]
@UId Int, @ERROR int OUT
AS

BEGIN    

SET NOCOUNT ON;

DECLARE @TimeOtVal varchar(50)
set @TimeOtVal = (SELECT CASE WHEN [TimeOut] IS NULL THEN '' ELSE CONVERT(NVARCHAR,[TimeOut]) END FROM tblTime WHERE tId = ( SELECT MAX(tId) FROM tblTime WHERE UserId = @UId))

IF (@TimeOtVal = '') -- condition for the update 

BEGIN -- now action is taken if condition is met

    SET NOCOUNT ON;
    UPDATE tblTime  SET TimeOut = DATEADD(HOUR,8,TimeIn) WHERE tId = ( SELECT MAX(tId) FROM tblTime WHERE UserId = @UId)        
         SET  @ERROR = 1
END
 else

     BEGIN -- Other wise , if condition isnot met 

         SET  @ERROR = -1

     END

END 
```

因此，只有在条件允许时它才会执行您想要的操作，然后报告操作，以便您可以在后面的程序代码中处理它。

# cordova - 使用 Trigger.IO/PhoneGap 在 UIWebView 中使用 focus() 事件自动显示键盘

> ID：13002376
> 
> 赞同：3
> 
> 时间：2012-10-21T21:27:51.973
> 
> 标签：cordova, uiwebview, phonegap-plugins, trigger.io, becomefirstresponder

据说，自 iOS 6 以来，您可以设置 UIWebView 的keyboardDisplayRequiresUserAction = NO，这是不可能的。

我正在使用 html 5 webview (Trigger.IO) 并构建本机插件，但很难抓住 UIWebView 实例。

我如何抓住 webview 以便我可以简单地执行以下操作：

```
mywebview.keyboardDisplayRequiresUserAction = NO; 
```

可能真的很简单..我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:20:53.417

访问 UIWebView 不是我们在当前版本的插件中正确公开的东西（但我们很快就会支持）。现在，如果您想尝试一下，可以添加

```
extern UIWebView *webView; 
```

到插件文件的顶部，这将使变量 webView 在您的 API 方法中可用。不过这很快就会停止工作，所以我建议你现在只用它来测试一下。

**2012 年 10 月更新**：

该应用程序的 Web 视图现在通过以下方式公开：http `ForgeApp`: [//docs.trigger.io/en/v1.4/_static/native/ios/Classes/ForgeApp.html#//api/name/webView](http://docs.trigger.io/en/v1.4/_static/native/ios/Classes/ForgeApp.html#//api/name/webView)

例如：

```
[ForgeApp sharedApp].webView 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T23:16:06.733

如此[处所述](https://stackoverflow.com/questions/12140484/programmatically-show-soft-keyboard-on-iphone-in-a-phonegap-application/13809533#13809533)，您现在可以添加属性

```
KeyboardDisplayRequiresUserAction=NO; 
```

到您的**Cordova.plist**文件，然后**调用**

```
$(el).focus(); 
```

# actionscript-3 - 如何在 AS3 中访问另一个影片剪辑中的影片剪辑？

> ID：13002384
> 
> 赞同：1
> 
> 时间：2012-10-21T21:28:48.337
> 
> 标签：actionscript-3

我目前正在制作一个音频播放器，其中包括一个滚动曲目列表。

曲目列表的名称是“内容”，在“内容”中我有多个影片剪辑，从 track1-track10 命名。

我目前正在尝试访问“内容”电影剪辑中的单个电影剪辑，但我没有运气。

对不起，如果这不是很清楚。

这是我的一些代码：

```
 var trackName: String;

function playTrack(e: MouseEvent) :void{
    switch(e.target.name){
        case "track1":
        trackName = "These Days";
        trace ("track 1");
        break;

        case "track2":
        trackName = "Walking After You";
        trace ("track 2");
        break;
    }
}

content.track1.addEventListener(MouseEvent.CLICK, playTrack);
content.track2.addEventListener(MouseEvent.CLICK, playTrack); 
```

任何帮助都会得到帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:08:36.593

尝试使用 e.currentTarget 而不是 e.target。

顺便说一句，由于 MovieClip 是动态的，因此您可以跳过开关的使用。这是代码：

```
content.track1.trackName =  "These Days";
content.track2.trackName =  "Walking After You";
content.track1.addEventListener(MouseEvent.CLICK, playTrack);
content.track2.addEventListener(MouseEvent.CLICK, playTrack);

function playTrack(e: MouseEvent) :void{
     trackName = e.currentTarget.trackName;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:08:23.960

发现问题出在我在列表中使用的文本上。

将其从 TLF 文本更改为经典文本后，它可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T21:54:45.267

请记住，DisplayObject.name 指的是实例名称，因此如果您在 Flash IDE 中工作，请确保已填写“属性”面板中的实例名称。

另外，尝试在切换之前将名称存储在字符串 var 中：

```
var obj_name:String = e.target.name;
switch(obj_name){
} 
```

由于 e.target 是 Object 类型，因此不会键入名称属性，并且 Switch 似乎特别讨厌它。

# java - 需要可靠/持久的出站套接字，选项？

> ID：13002391
> 
> 赞同：6
> 
> 时间：2012-10-21T21:29:34.193
> 
> 标签：java, sockets, scala, netty, nio

我有一个 Scala 应用程序，它一次维护（或尝试）与各种服务器的 TCP 连接数小时（可能 > 24）。每台服务器大约每秒发送两次约 30 个字符的短消息。这些消息被送入一个迭代器，在那里它们被解析并最终对数据库进行状态更改。

如果这些连接中的任何一个由于任何原因失败，我的应用程序需要不断尝试重新连接，直到我另行指定。任何丢失的消息都是不好的。我无法控制我连接的服务器或使用的协议。

可以想象一次会有多达 300 个这样的连接。不完全是高负载场​​景，所以我认为不需要 NIO，尽管拥有它可能会很好？该应用程序的其他部分是高负载的。

我正在寻找某种可以使这些连接尽可能可靠的套接字控制器/管理器。我现在正在运行自己的阻塞控制器，但由于我对套接字编码（以及所有各种设置、选项、超时等）缺乏经验，我怀疑它能否实现最佳的正常运行时间。另外，我可能在某些时候需要 SSL 支持。

NIO 会提供任何真正的优势吗？

Netty 会是这里的最佳选择吗？我在[这里](http://static.netty.io/3.5/xref/org/jboss/netty/example/uptime/package-summary.html)看到了 Uptime 示例，并且正在考虑简单地复制它，但是对于较低级别的网络来说，我不确定是否有更好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:21:01.620

> However I'm uncertain of the best strategies for ensuring as few packets are lost as possible, and assumed this would be a "solved" problem in one library or another.

Yup. JMS is an example.

> I suppose a lot of it would come down to a timeout guessing strategy? Close and re-open a socket too early and you've lost whatever packets were en-route.

That is correct. That approach is not going to be reliable, especially if connections go up and down regularly.

A real solution involves having the other end keep track of what it has received, and letting the sender know when then connection is re-established. If that can't be done, you have no real way of controlling how much gets lost. (This is what the reliable messaging services do ...)

> I have no control over the servers I connect to. So unless there's another way to adapt JMS to a generic TCP stream I don't think it will work.

Yup. And the same applies if you try to implement this by hand. The other end has to cooperate.

I guess you could construct something where you run (say) a JMS end point on each of the remote servers, and have the endpoint use UNIX domain sockets or loopback (i.e. 127.0.0.1) to talk to the server. But you still have potential for message loss.

# sql-server - 如何从数据库流式传输视频以在 Asp.Net MVC3 中使用 Html5 显示？

> ID：13002394
> 
> 赞同：2
> 
> 时间：2012-10-21T21:29:49.777
> 
> 标签：sql-server, asp.net-mvc-3, video-streaming

我正在开发用于显示视频，我需要将视频保存在 Sql Server 上并在我的视图中使用 Html5 显示它们，是否可以这样做？它与下载文件有什么不同吗？它会在我的服务器上造成很多开销吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:45:57.797

如果您决定使用 SQL 来存储它，那么您可能需要考虑 SQL Server FileStream 存储选项（仅在 SQL 2008+ 中可用）。不过，在 Entity Framework 中对此的支持很少，因此您可能希望在 .NET 中使用类似 SqlFileStream 对象的东西（假设您使用的是 .net）

这是一篇关于这个主题的不错的文章。但同样，我强烈建议不要将其存储在数据库中。

[http://lennilobel.wordpress.com/2011/08/22/using-sqlfilestream-in-c-to-access-sql-server-filestream-data/](http://lennilobel.wordpress.com/2011/08/22/using-sqlfilestream-in-c-to-access-sql-server-filestream-data/)

# python - 如何确定字段是否存在于同一表中的任何其他行的另一个字段中

> ID：13002395
> 
> 赞同：0
> 
> 时间：2012-10-21T21:29:53.110
> 
> 标签：python, sqlite, csv

我很难确定我是否可以做到这一点。基本上，我有一个如下所示的 csv 文件：

```
1111,804442232,1
1112,312908721,1
1113,A*2434,1
1114,A*512343128760987,1
1115,3512748,1
1116,1111,1
1117,1234,1 
```

这被导入到内存中的 sqlite 数据库中进行操作。经过一些操作后，我将把多个文件导入到这个数据库中。Sqlite 允许我保留对表的约束并在需要时接收错误，而无需创建额外的函数来检查每个约束，同时在 python 中使用数组。我想做一些事情，但首先是在 field2 前面添加所有`field2`字符串与`field1`.

例如，在上面`field2`条目 6 中的数据与条目 1 匹配。在这种情况下，我想`field2`在条目 6 中添加`'555'`

如果这是不可能的，我相信我可以使用正则表达式并在每一行上用 4 位数字执行此操作`field2`......虽然......我还没有成功地让 REGEX 使用 python/sqlite 工作，因为它总是抛出我一个错误。

我正在使用 Sqlite3 在 Python 中连接/操作我的 sqlite 数据库。

编辑：我正在寻找一种方法来操作驻留在 sqlite 数据库中的结果表，而不是仅操作 csv 数据。上面的数据只是我正在使用的文件中包含的内容的简单表示。使用包含来自 csv 文件的数据的数组会更好吗？这些文件有 10,000 多个条目和大约 20-30 列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T00:15:15.707

如果您必须在 SQLite 中执行此操作，该怎么做：

首先，通过运行以下命令并解析结果来获取表的列名

```
def get_columns(table_name, cursor):
    cursor.execute('pragma table_info(%s)' % table_name)
    return [row[1] for row in cursor]

conn = sqlite3.connect('test.db')
columns = get_columns('test_table',conn.cursor()) 
```

对于这些列中的每一列，运行以下更新，它会执行您的前置

```
def prepend(column, reference, prefix, cursor):
    query = '''
        UPDATE %s
        SET %s = 'prefix' || %s
        WHERE %s IN (SELECT %s FROM %s)
    ''' % (table, column, column, column, reference, table)
    cursor.execute(query)

reference = 'field1'
[prepend('test_table', column, reference, '555', conn.cursor()) 
    for column in columns 
    if column != reference] 
```

请注意，这很昂贵：O(n^2) 对于您要为其执行的每一列。

根据您的编辑和 Nathan 的回答，最好简单地使用 python 的内置数据结构。之后您始终可以将其插入 SQLite。

10,000 个条目并不算多，因此最终可能无关紧要。这完全取决于您要求它在 SQLite 中完成的原因（我们没有太多可见性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T03:30:28.233

所以......经过我自己的大量搜索和反复试验，我找到了自己问题的答案。当我尝试各种疯狂的事情时，我对 SQL 的不熟悉让我很困惑。最后......这是我正在寻找的简单类型的解决方案：

```
prefix="555"
cur.execute("UPDATE table SET field2 = %s || field2 WHERE field2 IN (SELECT field1 FROM table)"% (prefix)) 
```

我在那里保留了少量的 python，但我正在寻找的是 SQL 语句。不知道为什么没有人想出这么简单的东西=/。到目前为止，对答案不满意，我一直在寻找这条简单的线>_<。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T21:36:48.853

无需使用正则表达式来执行此操作，只需将第一列的内容放入 a 中`set`，然后遍历行并更新第二个字段。

```
first_col_values = set(row[0] for row in rows)
for row in rows:
    if row[1] in first_col_values:
        row[1] = '555' + row[1] 
```

# jquery - JQuery 验证插件 EqualTo

> ID：13002399
> 
> 赞同：-1
> 
> 时间：2012-10-21T21:30:21.867
> 
> 标签：jquery, html, validation, jquery-validate

所以这是我的问题的工作演示：[bin](http://jsbin.com/welcome/37548/edit)。首先单击要查看的内容的按钮。接下来，导航到第二个选项卡，密码。这就是问题所在。验证插件中的 EqualTo 调用未正确返回。即使`New Password`和`Verify Password`是正确的，equalTo 也会返回 false。我不明白为什么，希望有人能弄清楚。

注意：
* 我将插件初始化放在点击回调内的 if 语句中，因为在所有这些之外时滑块显示非常奇怪。这与 hide 事件搞砸了定位有关。所以我只是把它放在回调中，并确保它只初始化一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:26:16.643

~~根源~~（一个问题）是当插件已经包含自己的函数时，您正在添加一个独立的`submit`处理程序函数。 **编辑：** 根本问题是插件甚至没有初始化，直到你点击.`validate()``submitHandler:`**`validate()``submit`**

 **`validate()`在 中初始化`document.ready`并让`validate()`插件`submit`按预期处理事件...

```
$("#change_Pass").validate({
    onkeyup: false,
    errorClass: "password_messages",
    debug: true, // remove this for production code
    rules: {
        change_password: {
            required: true
        },
        new_password: {
            required: true,
            passw: true
        },
        verify_password: {
            required: true,
            equalTo: ".coda-slider-wrapper .coda-nav .current #new_password"
        }
    },
    messages: {
        change_password: {
            required: "Please enter your current password"
        },
        new_password: {
            required: "Please enter a new password"
        },
        verify_password: {
            required: "Please verify your new password",
            equalTo: "Your passwords did not match"
        }
    },
    submitHandler: function(form) {
        alert($('#new_password').val());
        if ($(form).valid()) {
            alert("Success");
        }
        return false;
    }
}); 
```

去掉了无关代码的 jsFiddle Demo：

[http://jsfiddle.net/9SYr5/3/](http://jsfiddle.net/9SYr5/3/)

* * *

**编辑：**

此外，`validate()`插件需要在页面加载时初始化**一次**，而不是每次单击提交按钮时。

不正确地初始化插件似乎是一件很流行的事情；请参阅这些 SO 链接，了解由这种不当做法引起的所有各种问题。所有这些 SO 问题都有一个共同点，即通过将其放置在或处理程序`validate()`中来不正确地初始化。`submit()``click()`

1） [https://stackoverflow.com/a/9936025/594235](https://stackoverflow.com/a/9936025/594235) （需要多次提交点击）

> 由于您包含`.validate()`在 内`.submit()`，因此在您点击提交之前，验证功能甚至不会加载。由于点击提交时它尚未加载，因此不会进行验证。然后，当您第二次点击提交时，该功能现在已加载，因此它似乎可以正常工作。
> 
> 当您包含`.validate()`在 中`document.ready`时，验证插件会在 DOM 完成加载后立即加载。因此，它已准备好等待您与表单进行交互，并且它在第一次提交时表现正确。

更多的...

2） [https://stackoverflow.com/a/11068130/594235](https://stackoverflow.com/a/11068130/594235)（在点击处理程序内部时不会验证）

3） [https://stackoverflow.com/a/10825498/594235](https://stackoverflow.com/a/10825498/594235)（在第二次提交时不起作用）

4） [https://stackoverflow.com/a/10609871/594235](https://stackoverflow.com/a/10609871/594235)（验证不会运行第二次）

5） [https://stackoverflow.com/a/10987058/594235](https://stackoverflow.com/a/10987058/594235)（在提交时初始化新表单不起作用）

6） [https://stackoverflow.com/a/9460920/594235](https://stackoverflow.com/a/9460920/594235)（忽略验证）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:26:22.413

您遇到的问题是 codaSlider 和 jQuery Validate 之间的一些交互。如果您取出 codaSlider 脚本和代码，您的验证脚本就可以工作（如果您将 equalTo 更改为`equalTo: '#new_password'`）。

这是您在没有 codaSlider 的情况下编辑的 bin：http: [//jsbin.com/welcome/37927/edit](http://jsbin.com/welcome/37927/edit)

**编辑**：我查看了 codaSlider 的源代码，在它的事件处理的某个深处，它对滑块元素内发生的点击的处理很差。我认为它覆盖了 jQuery Validate 处理提交点击的方式，可能还有其他事情。如果您将选项添加`continuous:false`到您的 codaSlider，我认为这将解决此交互，而不会破坏您使用的 codaSlider。这是实际使用的版本：http: [//jsbin.com/welcome/37989/edit](http://jsbin.com/welcome/37989/edit)**

# javascript - 将javascript放入外部文件并从中调用函数

> ID：13002404
> 
> 赞同：1
> 
> 时间：2012-10-21T21:30:59.230
> 
> 标签：javascript

我已经制作了一个工作网页，但是当我尝试将 jscript 放入外部文件时，它不再被调用。我已经在我的标题中输入了代码以包含文件名，但仍然无法调用它。这是我的 jscript 请顺便帮我快速编辑一下我从这里获得了 isMobile 功能[http://www.abeautifulsite.net/blog/2011/11/detecting-mobile-devices-with-javascript/](http://www.abeautifulsite.net/blog/2011/11/detecting-mobile-devices-with-javascript/)

```
<script>        
    var isMobile = {
      Android: function() {
        return navigator.userAgent.match(/Android/i);
      },
      BlackBerry: function() {
        return navigator.userAgent.match(/BlackBerry/i);
      },
      iOS: function() {
        return navigator.userAgent.match(/iPhone|iPad|iPod/i);
      },
      Opera: function() {
        return navigator.userAgent.match(/Opera Mini/i);
      },
      Windows: function() {
        return navigator.userAgent.match(/IEMobile/i);
      },
      any: function() {
        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
      }
    };
    function load()
    {
      var w=((screen.availWidth)/50)*49;
      var h=(w/4)*3;
      if( isMobile.any() ){
        var t=w;
        w=h;
        h=t;

      }
      var a=document.getElementById('banner');
      a.style.width=w+'px';
      a.style.height=(h/4)+'px';
      var b=document.getElementById('main');
      b.style.width=w+'px';
      b.style.height=Math.round((h/7)*4)+'px';
    }
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:36:28.170

When referencing an external JavaScript file, its contents should not be surrounded by a `<script>` tag. The `<script>` tag in the main file is what informs the browser that the contents should be parsed as JavaScript. Remove the surrounding `<script>` tag from the external file.

Proper reference in the main file:

```
<script type='text/javascript' src='path/to/external.js'></script> 
```

The `language='JavaScript'` attribute [has been deprecated](http://www.w3.org/TR/html4/interact/scripts.html) and is unnecessary. You may include `type='text/javascript'`.

The contents of the external file should contain *only* JavaScript code, not surrounding `<script>` tags as in:

```
// File external.js
alert('Look, no script tag!'); 
```

# android - Android mouse input via uinput is being accelerated

> ID：13002407
> 
> 赞同：1
> 
> 时间：2012-10-21T21:31:31.990
> 
> 标签：android, linux, input

I'm using a `uinput` to control an Android phone from my PCs mouse and keyboard.

The problem I'm having is that I can't get the cursor position to match up to what's being sent from the PC as Android is accelerating/smoothing them (which is an absolute requirement for this project).

I've tried relative mouse movements using `EV_REL`. I've also tried absolute positioning using `EV_ABS` and `BTN_TOUCH` to simulate a touchscreen but, strangely, this too has acceleration.

Is there a way of either disabling acceleration or sending absolute positioned click events?

# php - Why php PDO uses a different from hostname to the one used by mysql_connect() when connecting to a remotely hosted mysql database?

> ID：13002409
> 
> 赞同：4
> 
> 时间：2012-10-21T21:31:37.660
> 
> 标签：php, mysql, pdo, hostname

I've mysql database and php/apache on two different servers: let's say hostphp.domain.com and hostmysql.domain.com.

On the mysql server I've set a user "my_user" with permissions to connect to "my_database" db from the specific host "hostphp.domain.com".

When I connect to it using mysql_connect it does right. But when I do it via php PDO I get this error:

```
SQLSTATE[42000] [1044] Access denied for user 'my_user'@'%' to database 'my_database' 
```

I've done some tests and I found the problem is ...@'%', mysql is refusing that connection because "my_user" does not have permission to connect from any host.

Also I've tried to connect using mysql_connect with a wrong password to see the error and I get this:

```
Could not connect: Access denied for user 'my_user'@'hostphp.domain.com' (using password: YES). 
```

The difference is in ..@'%' and ...@'hostphp.domain.com'.

So that's my question, why php pdo do not declare hostname when connecting to a remote host? (or is doing that wrong).

Thanks and sorry for my english.

Edit. Some code example, this does not work:

```
try {
    $pdo = new PDO(
        'mysql:host=hostmysql.domain.com;port=3306;dbname=my_database',
        'my_user',
        'my_pass'
    );
} catch (PDOException $e) {
    die($e->getMessage());
} 
```

but this works ok:

```
$conn = mysql_connect('hostmysql.domain.com', 'my_user', 'my_pass');
if (!$conn) {
    die('Could not connect: ' . mysql_error());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:46:41.557

您已使用 mysql_connect 成功连接到主机，但没有出现任何错误，因为您没有尝试选择数据库。

您的用户可能无权访问您的数据库。

尝试运行 mysql_select_db("my_database"); 连接到主机后，您应该会收到相同的错误。

# jquery-mobile - 动态点击事件未触发

> ID：13002414
> 
> 赞同：0
> 
> 时间：2012-10-21T21:32:07.093
> 
> 标签：jquery-mobile, dynamic, onclick

我有一个 jQuery 移动页面，其中包含许多用作按钮的图像。

当页面最初加载时，所有图像都有一个“非活动”类。如果我单击其中一个按钮，它的类将更改为“活动”，并且所有其他按钮都从“非活动”更改为“禁用”。如果我离开页面并直接向后导航，则 1 个图像仍然具有“活动”类，其余图像仍然具有“禁用”类。

当我单击活动按钮时，它将类从“活动”更改为“非活动”，所有其他按钮将类从“禁用”更改为“非活动”。这使我可以选择另一个按钮作为活动按钮。

当我单击以前禁用但现在处于非活动状态的按钮之一时，单击事件不会触发。就好像它认为该类仍然像最初加载页面时那样被禁用。我已经检查了在 Firefox 中使用 Firebug 并且该类被正确设置为非活动状态，但它的行为仍然好像该类被禁用。

这是我的 jQuery：

```
$(document).ready(function() {

  $('.inactive, .active').on("click", function(){
    // Toggle active/inactive class
    $(this).toggleClass("active inactive");

    // Disable if 1 active button, else inactive
    if($('.active').length == 1) {
      $('.inactive').toggleClass("inactive disabled");
    } else {
      $('.disabled').toggleClass("disabled inactive");
    }
  });

}); 
```

和 HTML 按钮：

```
<a class="button inactive"></a><br />
<a class="button inactive"></a><br />
<a class="button inactive"></a><br />
<a class="button inactive"></a><br />
<a class="button inactive"></a><br />
<a class="button inactive"></a> 
```

和课程：

```
.button {
  background:url("../images/compare.png") no-repeat;
  width: 18px;
  height:18px
}
.active {
  background-position: 0 -18px;
  cursor:pointer
}
.inactive {
  background-position: 0 0;
  cursor:pointer
}
.disabled {
  background-position: 0 -36px;
  cursor:default
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:14:59.857

好的，伙计们，我已经想通了。

当我将类从禁用更改为非活动时，单击处理程序不会自动附加到“新”非活动按钮。

我为所有按钮添加了一个新类“mybutton”（例如，活动按钮将是 class="mybutton active"），然后在单击处理程序中查找该类，因此即使禁用的按钮也将通过代码运行.

这是我的新代码：

```
$(document).ready(function() {

  $('.mybutton').on("click", function(){
    if($(this).hasClass("inactive") || $(this).hasClass("active")) {
      $(this).toggleClass("active inactive");
    }

    // Disable if 1 active button, else inactive
    if($('.active').length == 1) {
      $('.inactive').toggleClass("inactive disabled");
    } else {
      $('.disabled').toggleClass("disabled inactive");
    }
  });

}); 
```

我不得不包装 $(this).toggleClass("active inactive"); if 语句中的语句让我感到困惑。

如果没有 if 语句，单击禁用的按钮会将其变为活动状态。为什么会发生这种情况？当它只是检查与切换相同的类时，为什么将按钮包装在 if 语句中修复它？

# objective-c - Programmatically move Mac menu bar between displays

> ID：13002415
> 
> 赞同：1
> 
> 时间：2012-10-21T21:32:09.847
> 
> 标签：objective-c, macos, cocoa, applescript, nsuserdefaults

I'm looking for a way to programmatically move the menu bar on a multi-display setup from one display to another. Ideally I would do this in Objective C, but I'm open to shell scripts, AppleScript, etc.

In Objective C, I can get a pointer to the screen with the menu bar by using `[[NSScreen screens] objectAtIndex: 0]`. However, I obviously cannot write to that array.

Is there an NSUserDefaults preference I can switch? I ran `defaults read > defaults.txt` in Terminal to try to find the correct one, but it's like finding a needle in a haystack :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T21:35:12.353

You can use a command line tool I created to do that [here](http://www.hamsoftengineering.com/codeSharing/hmscreens/hmscreens.html). You'll also find the source code to the tool on the web page so you can see how I did it programmatically and use that as an example for your code. Good luck.

# android - Uncaught handler error returning an image from a gridview as an activity result

> ID：13002417
> 
> 赞同：0
> 
> 时间：2012-10-21T21:33:00.690
> 
> 标签：android, android-intent, android-activity, android-gridview

Im currently using this tutorial [http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/](http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/) for a gridview. What I'm attempting is to manipulate it so that it returns the selected picture as an activity result to my main activity so I can set it to an imageview and then be able to use the selected image later in some other task.

The problem I'm having is getting the result back to my main activity, I'm getting Uncaught handler errors. Yes I'm a noob so by all means point out my mistakes and any explanations as to where I went wrong are always helpful in learning.

My original call for startActivityForResult

```
Button.OnClickListener buttonClickListener4 = new Button.OnClickListener() {
  public void onClick(View ChoosePictureButton) {
    Intent intent = new Intent(PictureActivity.this, PicPicker2.class);
    startActivityForResult(intent, 2);

      } 

    }; 
```

The activity that should return the result on clicking of the image

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid_layout);

    GridView gridView = (GridView) findViewById(R.id.grid_view);

    // Instance of ImageAdapter Class
    gridView.setAdapter(new ImageAdapter(this));

    /**
     * On Click event for Single Gridview Item
     * */
    gridView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {

            // Sending image id to PictureActivity
            Intent i = new Intent();
            // passing array index
            i.putExtra("id", position);
            setResult(Activity.RESULT_OK, i);
            finish();
        }
    });
} 
```

}

Where I want my original activity to catch the result

```
 public void onActivityResult(int reqCode, int resultCode, Intent data) {
    super.onActivityResult(reqCode, resultCode, data);

        if (resultCode == Activity.RESULT_OK) {

             if(reqCode == 1) { for another activity result.... }           

              else if (reqCode == 2) {
                Intent i = getIntent();

                // Selected image id
                int position = i.getExtras().getInt("id");
                ImageAdapter imageAdapter = new ImageAdapter(this);
                ChosenImageView.setImageResource(imageAdapter.mThumbIds[position]);
              }
            }
        } 
```

Yes I probably butchered it, but it should give an idea of what I'm trying. My logcat is below.

```
10-21 16:41:30.839: E/AndroidRuntime(4978): Uncaught handler: thread main exiting due to uncaught exception
10-21 16:41:30.869: E/AndroidRuntime(4978): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=2, result=-1, data=Intent { (has extras) }} to activity {jtek.industries.com/jtek.industries.com.PictureActivity}: java.lang.NullPointerException
10-21 16:41:30.869: E/AndroidRuntime(4978):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3329)
10-21 16:41:30.869: E/AndroidRuntime(4978):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3371)
10-21 16:41:30.869: E/AndroidRuntime(4978):     at android.app.ActivityThread.access$2700(ActivityThread.java:119)
10-21 16:41:30.869: E/AndroidRuntime(4978):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1893)
10-21 16:41:30.869: E/AndroidRuntime(4978):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-21 16:41:30.869: E/AndroidRuntime(4978):     at android.os.Looper.loop(Looper.java:123)
10-21 16:41:30.869: E/AndroidRuntime(4978):     at android.app.ActivityThread.main(ActivityThread.java:4363)
10-21 16:41:30.869: E/AndroidRuntime(4978):     at java.lang.reflect.Method.invokeNative(Native Method)
10-21 16:41:30.869: E/AndroidRuntime(4978):     at java.lang.reflect.Method.invoke(Method.java:521)
10-21 16:41:30.869: E/AndroidRuntime(4978):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
10-21 16:41:30.869: E/AndroidRuntime(4978):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
10-21 16:41:30.869: E/AndroidRuntime(4978):     at dalvik.system.NativeStart.main(Native Method)
10-21 16:41:30.869: E/AndroidRuntime(4978): Caused by: java.lang.NullPointerException
10-21 16:41:30.869: E/AndroidRuntime(4978):     at jtek.industries.com.PictureActivity.onActivityResult(PictureActivity.java:138)
10-21 16:41:30.869: E/AndroidRuntime(4978):     at android.app.Activity.dispatchActivityResult(Activity.java:3828)
10-21 16:41:30.869: E/AndroidRuntime(4978):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3325) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:24:58.730

在你的`onActivityResult()`- 方法中，你有什么理由用 - 方法获得意图`getIntent()`？

我认为您得到的意图不包含结果数据，而是启动活动的意图（可能是`null`）。因此，在 , 行`int position = i.getExtras().getInt("id")`中，`i`将为 null 并抛出 NPE。

看看使用提供的 Intent 数据参数是否可以解决您的问题。

# java - 转换字符串；java中的键盘输入

> ID：13002419
> 
> 赞同：0
> 
> 时间：2012-10-21T21:33:11.693
> 
> 标签：java, keyboard, markdown

我有此代码用于将降价字符串转换为 html：

```
public static String convert(String str) {
    if (str.equals("# "))
        return " ";

    if (str.matches("#+.+")) {
        int n = str.length() - str.replaceFirst("#+", "").length();
        return "<h" + n + ">" + str.substring(n) + "<h" + n + ">";
    }

    return str;
} 
```

我想知道的是如何让这个类从键盘输入中获取它的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:40:08.183

你可以使用`Scanner.nextLine()`：

```
String stringToConvert = new Scanner(System.in).nextLine();
System.out.println("Converted string is: " + convert(stringToConvert)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T21:36:01.003

只是为了简单起见，您可以通过[`Console.readLine()`](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html#readLine%28%29)。

# google-maps-api-3 - 中心地图和缩放以适应屏幕上的标记

> ID：13002424
> 
> 赞同：1
> 
> 时间：2012-10-21T21:34:26.190
> 
> 标签：google-maps-api-3, fitbounds

我有以下代码来检测访问者的 GPS 位置并将其显示在 Google Maps JavaScript v3 地图上。一切都按我的意愿工作，但代码不会按我的意愿居中或缩放 - 它简单地使用标准位置（就在亚洲）！我希望它适合地图上的标记。

```
var rendererOptions = {
    draggable: false
};

if(navigator.geolocation) {
    var timeoutVal = 10 * 1000 * 1000;

    navigator.geolocation.watchPosition(
        displayPosition,
        displayError,
        { enableHighAccuracy: true, timeout: timeoutVal, maximumAge: 0 }
    );
} else {
    alert('Din webbläsare stödjer inte någon geologisk lokalisering med hjälp av HTML5');
}

var directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);
var directionsService = new google.maps.DirectionsService();
var marker_gps;
var map_gps;
var options_gps;

function displayPosition(position) {

    /***********************
    **    GPS-POSITION    **
    ************************/

    directionsDisplay = new google.maps.DirectionsRenderer();
    localStorage.coor = position.coords.latitude.toFixed(6) + ',' + position.coords.longitude.toFixed(6);

    var gps_coor = new google.maps.LatLng(position.coords.latitude.toFixed(6), position.coords.longitude.toFixed(6));

    if(typeof(marker) != 'undefined') marker.setMap(null);

    localStorage.accuracy = position.coords.accuracy;
    document.getElementById('accuracy').innerHTML = number_format(localStorage.accuracy) + ' meter';

    directionsDisplay.setMap(map_gps);
    directionsDisplay.setPanel(document.getElementById('directions-panel'));

    marker_gps = new google.maps.Marker({
        position: gps_coor,
        draggable: false,
        map: map_gps
    });

    var circle_gps = new google.maps.Circle({
        center: gps_coor,
        radius: position.coords.accuracy,
        map: map_gps,
        fillColor: '#3333ff',
        fillOpacity: 0.2,
        strokeColor: '#3333ff',
        strokeOpacity: 0.5,
        strokeWeight: 1
    });

    /*****************************
    **    FÄRDSÄTT (DISTANS)    **
    ******************************/

    var start = new google.maps.LatLng(position.coords.latitude.toFixed(6), position.coords.longitude.toFixed(6));
    var stop = new google.maps.LatLng(<?php echo $photo['coordinates_latitude'].','.$photo['coordinates_longitude']; ?>);

    var request = {
        origin: start,
        destination: stop,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };

    directionsService.route(request, function(response, status) {
        if(status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
        }
    });

    directionsService.route(request, function(response, status) {
        if(status == google.maps.DirectionsStatus.OK) {
            var distance = (response.routes[0].legs[0].distance.value / 1000).toFixed(0);
            var duration = secondsToString(response.routes[0].legs[0].duration.value);

            document.getElementById('distance').innerHTML = 'Cirka ' + distance + ' kilometer';
            document.getElementById('duration').innerHTML = 'Cirka ' + duration;

            directionsDisplay.setDirections(response);
        }
    });

}

function initialize_gps() {
    var coor = new google.maps.LatLng(localStorage.coor);
    var bounds = new google.maps.LatLngBounds();

    options_gps = {
        zoom: 8,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: google.maps.LatLng(localStorage.coor),
        streetViewControl: false
    }

    map_gps = new google.maps.Map(document.getElementById('map-distance'), options_gps);
    map_gps.fitBounds(bounds);
}

function secondsToString(seconds) {
    var numdays = Math.floor(seconds / 86400);
    var numhours = Math.floor((seconds % 86400) / 3600);
    var numminutes = Math.floor(((seconds % 86400) % 3600) / 60);

    return (numdays != 0 ? (numdays == 1 ? '1 dag' : numdays + ' dagar') + ', ' : '')
         + (numhours != 0 ? (numhours == 1 ? '1 timme' : numhours + ' timmar') + (numdays != 0 ? ', ' : ' och ') : '')
         + (numminutes != 0 ? (numminutes == 1 ? '1 minut' : numminutes + ' minuter') : '');
}

function displayError(error) {
    var errors = {
        1: 'Permission denied',
        2: 'Position unavailable',
        3: 'Request timeout'
    };

    alert('Error: ' + errors[error.code]);
} 
```

我怎样才能使它工作？

提前致谢。

**编辑**

`initialize_gps`这是函数的编辑部分。这部分不起作用 - 没有发生任何新情况。它只是像以前一样将地图集中在亚洲。

```
function initialize_gps() {
    var coor = new google.maps.LatLng(localStorage.coor);
    var bounds = new google.maps.LatLngBounds();

    options_gps = {
        zoom: 8,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: google.maps.LatLng(localStorage.coor),
        streetViewControl: false
    }

    map_gps = new google.maps.Map(document.getElementById('map-distance'), options_gps);
    map_gps.fitBounds(bounds);
} 
```

**编辑**

我已将整个代码复制粘贴到 jsFiddle。链接：http: [//jsfiddle.net/edgren/WRxt4/](http://jsfiddle.net/edgren/WRxt4/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T22:27:44.217

将地图显示拟合到一组标记的一般解决方案是将它们添加到空的[google.maps.LatLngBounds 对象](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)（通过调用 bounds.extend），然后使用该边界调用[map.fitBounds](https://developers.google.com/maps/documentation/javascript/reference#Map)。

```
function setMarkers(map) {
  var bounds = new google.maps.LatLngBounds();
  // Adds markers to the map.
  for (let i = 0; i < beaches.length; i++) {
    const beach = beaches[i];
    var marker = new google.maps.Marker({
      position: { lat: beach[1], lng: beach[2] },
      map,
      title: beach[0],
    });
    bounds.extend(marker.getPosition());
  }
  map.fitBounds(bounds);
} 
```

```
// The following example creates complex markers to indicate beaches near
// Sydney, NSW, Australia. Note that the anchor is set to (0,32) to correspond
// to the base of the flagpole.
function initMap() {
  const map = new google.maps.Map(document.getElementById("map"), {
    zoom: 10,
    center: { lat: 0, lng: 0 },
  });
  setMarkers(map);
}
// Data for the markers consisting of a name, a LatLng and a zIndex for the
// order in which these markers should display on top of each other.
const beaches = [
  ["Bondi Beach", -33.890542, 151.274856, 4],
  ["Coogee Beach", -33.923036, 151.259052, 5],
  ["Cronulla Beach", -34.028249, 151.157507, 3],
  ["Manly Beach", -33.80010128657071, 151.28747820854187, 2],
  ["Maroubra Beach", -33.950198, 151.259302, 1],
];

function setMarkers(map) {
  var bounds = new google.maps.LatLngBounds();
  // Adds markers to the map.
  for (let i = 0; i < beaches.length; i++) {
    const beach = beaches[i];
    var marker = new google.maps.Marker({
      position: { lat: beach[1], lng: beach[2] },
      map,
      title: beach[0],
    });
    bounds.extend(marker.getPosition());
  }
  map.fitBounds(bounds);
}
```

```
/* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
#map {
  height: 100%;
}

/* Optional: Makes the sample page fill the window. */
html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
}
```

```
<!DOCTYPE html>
<html>
  <head>
    <title>Complex Marker Icons</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <!-- jsFiddle will insert css and js -->
  </head>
  <body>
    <div id="map"></div>

    <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk&callback=initMap&libraries=&v=weekly"
      async
    ></script>
  </body>
</html>
```

# vba - VBA Loop through multiple folders

> ID：13002427
> 
> 赞同：0
> 
> 时间：2012-10-21T21:34:52.907
> 
> 标签：vba, loops, excel

> **Possible Duplicate:**
> [get list of subdirs in vba](https://stackoverflow.com/questions/9827715/get-list-of-subdirs-in-vba)

I'm trying to apply the following code, which applies to running this VBA loop through all files in a folder, to make it run through all folders within one folder.

Is there any way that this is possible?

I have about 50 folders, each with the same named workbook, so I'd need to try and make it more efficient.

Thanks!

```
Sub LoopFiles()

    Application.DisplayAlerts = False    
    Dim strDir As String, strFileName As String
    Dim wbCopyBook As Workbook
    Dim wbNewBook As Workbook

    strDir = "C:\Documents and Settings\mburke\Desktop\Occupancy 2013\"
    strFileName = Dir(strDir & "*.xlsm")

    Set wbNewBook = Workbooks.Add

    Do While strFileName <> ""
        Set wbCopyBook = Workbooks.Open(strDir & strFileName)
        wbCopyBook.Sheets(1).Copy Before:=wbNewBook.Sheets(1)
        wbCopyBook.Close False
        strFileName = Dir
    Loop

    Application.DisplayAlerts = True
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:52:23.397

你当然可以！只需添加另一个为文件夹执行 DIR 的 LoopDirectories 方法。

将 LoopF​​iles 方法更改为接受目录参数：

```
Sub LoopFiles(directory As String)

    Application.DisplayAlerts = False

    Dim strDir As String, strFileName As String
    Dim wbCopyBook As Workbook
    Dim wbNewBook As Workbook

    strFileName = Dir(directory & "*.xlsm")

    Set wbNewBook = Workbooks.Add

    Do While strFileName <> ""
        Set wbCopyBook = Workbooks.Open(directory & strFileName)
        wbCopyBook.Sheets(1).Copy Before:=wbNewBook.Sheets(1)
        wbCopyBook.Close False
        strFileName = Dir
    Loop

    Application.DisplayAlerts = True
End Sub 
```

然后在 LoopDirecotries 方法中为每个文件夹调用 LoopF​​iles 方法。

# hibernate - HQL - join with only one subclasses

> ID：13002430
> 
> 赞同：4
> 
> 时间：2012-10-21T21:35:01.427
> 
> 标签：hibernate, inheritance, hql

My model (InheritanceType.JOINED):

> ```
> class Parent{...} 
> class Child1 extends Parent{...}   
> class Child2 extends Parent{...}
> class Child3 extends Parent{...}
> class Child4 extends Parent{...}
> class Agg{
>   List<Parent> l;
> } 
> ```

Agg is connected with parent via join table. Parent don't have Agg object.

I am doing some filtering on Child2 i.e: " From Child2 ch2 WHERE ch2.field1 =... ch2.field2 =... etc."

How can I now join Child2 with Agg, without causing join with all subclasses tables. I simple want to join only with Child2 table (without joining with Child2, Child3, Child4)

I was trying to use 'class' property (i.e. ch2.class =...) the result is correct, but generated query contains join to every subclasses ;/

HQL "From Agg a Join a.l" also join with all sub-classes (even with ch2.class)

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-12T19:11:24.907

您可以使用交叉连接来解决此问题，因为 DBMS 无论如何都会将其优化为内部连接。像这样的东西`SELECT ch2, agg FROM Child2 ch2, Agg agg WHERE ch2.joinField = agg.id AND ch2.field1 =... AND ch2.field2 =...`

# iphone - Label refuses to disappear with [label setHidden:YES]; command in a if-method?

> ID：13002435
> 
> 赞同：0
> 
> 时间：2012-10-21T21:35:20.343
> 
> 标签：iphone, ios, uitableview, uilabel

I am trying to customize my tableView in my IOS app. When my tableView(or rather array) is empty, I want to display a customized label instead of the items in the tableView. The label I am referring to is "label0". But something is terribly wrong, my [label0 setHidden:YES]; or [label0 setHidden:NO]; only works in the first block of the if "method"? In the second block (if else) nothing happens no matter what I try to set the label as (hidden or shown).

What have I missed? I cannot see my own fault?

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
UIView *headerView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0,     tableView.bounds.size.width, 30)] autorelease];
UILabel *label0 = [[[UILabel alloc] initWithFrame:CGRectMake(0, 25,  tableView.bounds.size.width - 0, 100)] autorelease];

if ([self.searchResults count] == 0){

headerView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"lista2.png"]];

UILabel *label = [[[UILabel alloc] initWithFrame:CGRectMake(5, 3, tableView.bounds.size.width - 5, 18)] autorelease];
label.text = @"Information";
label.textColor = [UIColor whiteColor];
label.backgroundColor = [UIColor clearColor];
[headerView addSubview:label];

 label0.text = @"Test test test";
  label0.textColor = [UIColor blackColor];
 label0.backgroundColor = [UIColor whiteColor];
 [tableView addSubview:label0];
  [label0 setHidden:NO];

 }

 else {

headerView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"lista2.png"]];

UILabel *label2 = [[[UILabel alloc] initWithFrame:CGRectMake(5, 3, tableView.bounds.size.width - 5, 18)] autorelease];
label2.text = @"Search results";
label2.textColor = [UIColor whiteColor];
label2.backgroundColor = [UIColor clearColor];
[headerView addSubview:label2];
[label0 setHidden:YES];       

}

 return headerView;
} 
```

**EDIT**

I have moved the code to viewDidLoad and set the property for the UILabel. This have unfortunately not solved my problem....

```
UILabel *label0 = [[[UILabel alloc] initWithFrame:CGRectMake(0, 25,    tableView.bounds.size.width - 0, 100)] autorelease];
[tableView addSubview:label0];

   if ([self.searchResults count] == 0){

       label0.text = @"Test test test";
       label0.textColor = [UIColor blackColor];
       label0.backgroundColor = [UIColor whiteColor];
       [label0 setHidden:NO];
   }
   else {
      [label0 setHidden:YES];
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:44:43.697

您忘记添加`label0`为子视图请将此行放在 else 语句中

```
 [tableView addSubview:label0]; 
```

我也看不出这样做有什么好处。我相信您可以隐藏表格视图并显示另一个具有标签的视图。但是以这种方式嵌套视图并不好，当您在 1 个月后回来调试此代码时，您将很难理解它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T21:37:56.043

这是因为每次调用此方法时都会创建您的 label0，因此在“其他”中您指的是完全不同的对象（不是您在数组为空时添加到 tableView 的对象）。

您不应该从此方法向 tableView 添加子视图。考虑使用 viewDidLoad。这样，您将只添加一次 label0 。要实现这一点，请将 label0 添加为 viewController 的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T23:56:07.283

您在编辑中说您为 UILabel 设置了属性（我假设您的意思是您有一个名为 label0 的属性？）。如果是这样，那么当你分配初始化你的标签时，它应该是 self.label0 = ..... 而不是 UILabel *label0 = .....

# facebook-graph-api - Searching public comments containing a word during a period of time (range of date)

> ID：13002436
> 
> 赞同：1
> 
> 时间：2012-10-21T21:35:44.077
> 
> 标签：facebook-graph-api

I am trying to retrieve all public comments with a/or more given words in the text during a specific period of time. My query is like the following: [https://graph.facebook.com/search?q=%22Hello%22&since=2012-08-01&until=2012-08-20&access_token=MYACCESSTOKEN](https://graph.facebook.com/search?q=%22Hello%22&since=2012-08-01&until=2012-08-20&access_token=MYACCESSTOKEN) If you do not have an access token you can use the following link, without access_token: [https://graph.facebook.com/search?q=%22Hello%22&since=2012-08-01&until=2012-08-20](https://graph.facebook.com/search?q=%22Hello%22&since=2012-08-01&until=2012-08-20)

I can not get any results. If I omit the period of time, searching for a specific word, I get only few of the newest posts.

I read that I can only retrieve a period of max 35 days. My query is in that range.

Any suggestions?

Regards,

Mauro

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:54:39.070

公开帖子搜索 API 仅保留几天的公开帖子，并且无法按时间搜索。

文档中唯一支持的搜索选项是`q`参数中的查询。

# javascript - 使用 location() 传递参数或变量

> ID：13002443
> 
> 赞同：-1
> 
> 时间：2012-10-21T21:36:55.350
> 
> 标签：javascript

我正在尝试使用 JavaScript 中的 location() 重新加载页面，并且还想传递一个变量值。下面的步骤对我不起作用。让我知道正确的程序。

```
 location='success.jsp'+<%=ID%>; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:39:37.610

您需要执行以下操作：

```
window.location='success.jsp?VARIABLE_NAME='+<%=ID%>; 
```

# multithreading - 列出当前进程中的所有线程？

> ID：13002444
> 
> 赞同：3
> 
> 时间：2012-10-21T21:36:57.020
> 
> 标签：multithreading, linux-kernel

我正在尝试实现一个系统调用，它允许我获取当前进程的线程数。我是 Linux 内核的新手，所以我对它的理解有限。

目前，我正在尝试遍历所有`task_struct`s，并将其线程组组长的 PID 与当前线程组组长的 PID 进行比较：

```
// ...
int nthreads = 0;
struct task_struct *task_it;
for_each_process(task_it) {
    if (task_it->group_leader->pid == current->group_leader->pid) {
        nthreads++;
    }
}
// ... 
```

但是，这似乎不起作用（产生一些 pthread 的快速测试仍然给出`1`。`group_leader`同一进程中所有线程的共同点呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T06:34:54.350

您的代码的问题在于，内核所称的 PID（ 的`pid`字段`task_struct`）是用户空间所称的 TID（即，它是由`sys_gettid()`每个线程返回的并且是唯一的）。用户空间调用的 PID 在内核中称为 TGID（用于“任务组 ID”）——这就是`sys_getpid()`系统调用返回的内容。

不过，您不需要实际检查 TGID - 只需比较`struct task_struct *`指针就足够了：

```
if (task_it->group_leader == current->group_leader) { 
```

顺便说一句，您可以只迭代作为 (with ) 成员的`thread_group`列表，那么您根本不需要任何测试。甚至更好，只需使用.`current``while_each_thread()``get_nr_threads(current)`

请注意，所有遍历任务列表的方法都需要包含在`rcu_read_lock();`/`rcu_read_unlock();`中才能正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T21:42:22.293

这段代码是一个很好的演示。

> 以下 C 程序在节点的进程表中创建所有进程的列表，并在一列中显示任何单个进程的线程数。使用此工具，可以在发生网络问题时识别出网络守护程序创建了一个新线程。严重的网络问题是造成登录问题的原因。

```
#include "sys/param.h"
#include "sys/pstat.h"

int main ( void )
{

  struct pst_status * psa = NULL;   
  struct pst_status * prc = NULL;    
  struct pst_dynamic  psd;
  long                nproc = 0;      
  long                thsum = 0;       
  long                i;                

  if ( pstat_getdynamic(&psd, sizeof(psd), 1, 0) == -1 )
    (void)perror("pstat_getdynamic failed");

  // Get the number of active processes from pst_dynamic 
  nproc  = psd.psd_activeprocs;  
  psa    = (struct pst_status *)malloc(nproc * sizeof(struct pst_status));

  // Read the info about the active processes into the array 'psa' 
  if ( pstat_getproc(psa, sizeof(struct pst_status), nproc, 0) == -1 )
    (void)perror("pstat_getproc failed");

  (void)printf("\n\n------------------------------------------------------------------------------");
  (void)printf("\n %5s | %5s |%7s| %5s | %s", "PID", "UID", "Threads", "RSS", "Command");
  (void)printf("\n------------------------------------------------------------------------------");

  // Report the process info as required
  prc = (struct pst_status *)psa;       
  for (i=0; i < nproc; i++) 
  {
    (void)printf("\n %5ld | ", prc->pst_pid);
    (void)printf("%5ld | ", prc->pst_uid);
    (void)printf("%5ld | ", prc->pst_nlwps);
    (void)printf("%5ld | ", prc->pst_rssize);
    (void)printf("%s ", prc->pst_cmd);
    thsum += prc->pst_nlwps;
    ++prc;         
  } 

  (void)printf("\n\n*** %ld processes, %ld threads running\n\n", nproc, thsum);
  (void)free(psa);       
  (void)exit(0);
} 
```

在这里找到： [http ://h21007.www2.hp.com/portal/site/dspp/menuitem.863c3e4cbcdc3f3515b49c108973a801?ciid=060818f70fe0211018f70fe02110275d6e10RCRD](http://h21007.www2.hp.com/portal/site/dspp/menuitem.863c3e4cbcdc3f3515b49c108973a801?ciid=060818f70fe0211018f70fe02110275d6e10RCRD)

这是另一个使用 task_struct 的链接：http: [//tuxthink.blogspot.com/2011/03/using-foreachprocess-in-proc-entry.html](http://tuxthink.blogspot.com/2011/03/using-foreachprocess-in-proc-entry.html)

# vim - 根据 putty 会话设置 vim 颜色方案

> ID：13002446
> 
> 赞同：0
> 
> 时间：2012-10-21T21:37:30.697
> 
> 标签：vim, putty, gnu-screen

根据我是否通过 PuTTY ssh 会话连接，如何使 vim 以不同的配色方案启动？我有一个无法通过 putty 正确显示的首选配色方案，但是当我通过公共终端连接时，有时我需要使用 putty。

PuTTY 是否设置任何环境变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:07:36.780

Puty 似乎可以通过 Configuration->connection->data 设置环境变量。

之后，您可以在`.vimrc`：

```
if !empty($VARIABLE_PUTTY)
    colorscheme my_putty_color_scheme
else
    colorscheme my_default_color_scheme
endif 
```

# c++ - 有一个函数指针类型是什么意思？

> ID：13002447
> 
> 赞同：1
> 
> 时间：2012-10-21T21:37:42.603
> 
> 标签：c++, function-pointers

我有一个班级作业说：

> 为接受两个 int 参数并返回一个 int 的函数编写声明，并声明其元素具有此函数指针类型的向量。

由于函数和向量都是 int 这是正确的吗？我对指针仍然很模糊。这就是我所拥有的：

```
#include <iostream>
#include <vector>
using std::cin; using std::cout; using std::endl; using std::vector;

// This is my function that take two ints and returns and int
int AddFunc ( int a, int b) { int addResult; addResult = a + b; return (addResult);}

int main()
{
    vector <int> v1; // Declare a vector whose elements have this functions pointer types
    int add1, add2, add3 = 0;
        cout << "Enter two numbers to be added with my AddFunc function: ";
        cin >> add1 >> add2;
        add3 = AddFunc (add1, add2);
        cout << "The numbers added equal: " << add3 << endl;
        v1.push_back(add3);
        cout << "The first element in the vector v1 is: " << v1 [0] << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T21:44:03.250

函数指针类型为`int (*)(int, int)`. 你要这个：

```
typedef int (*fptr)(int, int);

std::vector<fptr> v; 
```

例子：

```
int add(int a, int b) { return a + b; }
int mul(int a, int b) { return a * b; }

v.push_back(&add);
v.push_back(&mul); 
```

然后是这样的：

```
for (f : v) { std::cout << "f(5, 7) = " << f(5, 7) << std::endl; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T21:48:20.653

在 C++ 中，您可以定义函数指针，如下所示：

```
int (*pfunc) (int, int); 
```

这是一个变量，您可以将函数的地址分配给该变量，只要它具有指定的签名，如下所示：

```
pfunc = AddFunc; // Assign the adress of a function
pfunc(1,2) // Now call the function through the pointer 
```

现在，请注意这`pfunc`是变量名，它的“官方”类型是`int (*) (int,int)` 自然的，这一切都会变得非常混乱，所以你可能想要 typedef 它：

```
typedef int (*AdderFunc)(int, int);
AdderFunc pfunc = AddFunc;
pfunc(1,2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T22:06:21.127

该作业需要一个函数指针向量用于您的函数。如果你不习惯函数指针，阅读起来会有点困难。这是一种可用于编写函数指针类型的方法。

首先，编写函数的参数列表。`AddFunc()`接受两个`int`参数，所以首先你有：

```
(int, int) 
```

要使其成为函数指针，请在其前面加上`(*)`：

```
(*)(int, int) 
```

最后，你在整个事情前面加上函数的返回类型。在这种情况下，`int`：

```
int (*)(int, int) 
```

您可以按原样使用它作为向量的类型：

```
std::vector<int (*)(int, int)> v; 
```

这将起作用。但是，实际上为函数指针定义自己的类型通常更清楚（使用`typedef`）。起初，这样做似乎很棘手，但很容易。您已经使用上述方法记下了类型。唯一缺少的是给它一个名字。你可以通过在`*`in后面写名字来做到这一点`(*)`。例如`(*func_ptr)`，所以你有：

```
int (*func_ptr)(int, int) 
```

这就是你所需要的`typedef`：

```
typedef int (*func_ptr)(int, int); 
```

现在，每当您需要特定的函数指针类型时，而不是：

```
int (*)(int, int) 
```

你可以写：

```
func_ptr 
```

反而。所以你的向量声明变成：

```
std::vector<func_ptr> v; 
```

就向量而言，`func_ptr`它和其他任何类型一样都是指针类型。

函数指针与“常规”指针的不同之处在于“取消引用”它们意味着调用它们指向的函数。您实际上并没有取消引用函数指针。相反，您`()`对它们使用运算符。这样做会调用他们指向的函数。

分配给函数指针意味着为其分配函数的地址。例如，如果您有一个类型的变量`func_ptr`（您`typedef`在上面编辑过）：

```
func_ptr AddFunc_p; 
```

您可以为其分配地址`AddFunc()`：

```
AddFunc_p = AddFunc; 
```

注意 中缺少的括号`AddFunc`。您只需编写函数的名称，因为您不想实际调用该函数，而是想要它的地址，以便您可以将其分配给`AddFunc_p`. 现在您可以`AddFunc()`通过以下方式拨打电话`AddFunc_p`：

```
AddFunc_p(some_int, another_int); 
```

您现在应该能够推断出如何将函数指针放入向量中以及如何将`()`运算符应用于其元素。记住向量只包含 type 的元素会有所帮助`func_ptr`。

# c# - 使用 AudioQueue 和 Monotouch 静态声音录制

> ID：13002449
> 
> 赞同：4
> 
> 时间：2012-10-21T21:38:11.000
> 
> 标签：c#, iphone, xamarin.ios, recording, audioqueue

我在 MonoTouch 中编写了一个小程序，使用 InputAudioQueue 从我的 iPhone 4s 的麦克风中录制声音。

我将记录的数据保存在一个数组中，并将这个缓冲区提供给我的音频播放器进行播放（使用 OutputAudioQueue）。

播放时只是一些口吃的垃圾/静态声音。我曾尝试在播放前用正弦波填充缓冲区，然后听起来不错，所以我猜问题出在录音中，而不是播放。谁能帮我看看有什么问题？（代码如下）

```
public class AQRecorder
{
    private const int CountAudioBuffers = 3;
    private const int AudioBufferLength = 22050;
    private const int SampleRate = 44100;
    private const int BitsPerChannel = 16;
    private const int Channels = 1;
    private const int MaxRecordingTime = 5;
    private AudioStreamBasicDescription audioStreamDescription;
    private InputAudioQueue inputQueue;
    private short[] rawData;
    private int indexNextRawData;

    public AQRecorder ()
    {
        this.audioStreamDescription.Format = AudioFormatType.LinearPCM;
        this.audioStreamDescription.FormatFlags = AudioFormatFlags.LinearPCMIsSignedInteger | 
                                                  AudioFormatFlags.LinearPCMIsPacked;
        this.audioStreamDescription.SampleRate = AQRecorder.SampleRate;
        this.audioStreamDescription.BitsPerChannel = AQRecorder.BitsPerChannel;
        this.audioStreamDescription.ChannelsPerFrame = AQRecorder.Channels;
        this.audioStreamDescription.BytesPerFrame = (AQRecorder.BitsPerChannel / 8) * AQRecorder.Channels;
        this.audioStreamDescription.FramesPerPacket = 1;
        this.audioStreamDescription.BytesPerPacket = audioStreamDescription.BytesPerFrame * audioStreamDescription.FramesPerPacket;
        this.audioStreamDescription.Reserved = 0;
    }

    public void Start ()
    {
        int totalBytesToRecord = this.audioStreamDescription.BytesPerFrame * AQRecorder.SampleRate * AQRecorder.MaxRecordingTime;
        this.rawData = new short[totalBytesToRecord / sizeof(short)];
        this.indexNextRawData = 0;
        this.inputQueue = SetupInputQueue (this.audioStreamDescription);
        this.inputQueue.Start ();
    }

    public void Stop ()
    {
        if (this.inputQueue.IsRunning)
        {
            this.inputQueue.Stop (true);
        }
    }

    public short[] GetData ()
    {
        return this.rawData;;
    }

    private InputAudioQueue SetupInputQueue (AudioStreamBasicDescription audioStreamDescription)
    {
        InputAudioQueue inputQueue = new InputAudioQueue (audioStreamDescription);

        for (int count = 0; count < AQRecorder.CountAudioBuffers; count++)
        {
            IntPtr bufferPointer;
            inputQueue.AllocateBuffer(AQRecorder.AudioBufferLength, out bufferPointer);
            inputQueue.EnqueueBuffer(bufferPointer, AQRecorder.AudioBufferLength, null);
        }
        inputQueue.InputCompleted += HandleInputCompleted;
        return inputQueue;
    }

    private void HandleInputCompleted (object sender, InputCompletedEventArgs e)
    {
        unsafe
        {
            short* shortPtr = (short*)e.IntPtrBuffer;

            for (int count = 0; count < AQRecorder.AudioBufferLength; count += sizeof(short))
            {
                if (indexNextRawData >= this.rawData.Length)
                {
                    this.inputQueue.Stop (true);
                    return;
                }
                this.rawData [indexNextRawData] = *shortPtr;
                indexNextRawData++;
                shortPtr++;
            }
        }
        this.inputQueue.EnqueueBuffer(e.IntPtrBuffer, AQRecorder.AudioBufferLength, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-17T10:17:34.563

好的，这可能为时已晚，但我也遇到了同样的问题，只听到垃圾声音并找到了解决方案。

您不能直接从 e.IntPtrBuffer 读取音频数据。此指针是指向 AudioQueueBuffer 对象的指针，而不是指向音频数据本身的指针。因此，要读取音频数据，您可以使用 e.UnsafeBuffer 来访问该对象并使用其 AudioData 指针。这是一个 IntPtr，您可以将其（在不安全的上下文中）转换为 byte* 或 short* 并且您拥有音频数据。

此致

亚历克斯

# ruby - 如何使用 Twitter RubyGem 检索 100 多个搜索结果

> ID：13002454
> 
> 赞同：0
> 
> 时间：2012-10-21T21:38:39.663
> 
> 标签：ruby, api, twitter, gem

我正在使用 Twitter ruby​​gem，我的目标是检索一次搜索的所有 1500 个搜索结果。目前：

```
Twitter.search("test", :count => 1500).results.map do |status|
    i = i+1
end
puts i 
```

:count 似乎无关紧要，它最多只能检索 100 条推文。这本身对我来说很奇怪，因为一页推特结果应该只返回 20 条推文。我找不到官方文档（叹气~）并且深入研究规范并没有帮助。任何人都知道如何用这个东西“翻页”，或者告诉它自己做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:14:24.107

Twitter 的 API 可能是这里的限制因素，而不是宝石。——安德鲁·马歇尔

我弄错了，我在 Twitter API 中将“用户/搜索”与“搜索/推文”混为一谈，后者的限制似乎是 100 个，而第一个的限制是 1000 个。它按预期工作=）

# iphone - JSON如何调用不同列表中的对象

> ID：13002455
> 
> 赞同：2
> 
> 时间：2012-10-21T21:38:46.593
> 
> 标签：iphone, objective-c, ios, json

我目前有一个如下所示的 JSON API：

```
{
  "posts": [
    {
      "id": 277,
      "title": "test title",
      "content": "test content",
      "attachments": [
        {
          "url": "http:\/\/www.example.com\/bar-icon-help@2x.png"
        }
    }
} 
```

我正在尝试使用“附件”下的“url”。请看看我做错了什么：

```
-(void)dataRequestCompletedWithJsonObject.(id)jsonObject
{
    NSDictionary *recipeDictionary = (NSDictionary*)jsonObject;

    NSArray* recipeArray = (NSArray*)[recipeDictionary objectForKey:@"posts"];

    self.recipes = [[NSMutableArray alloc] init];

    for (NSDictionary* dic in recipeArray) {

        Recipe *recipe = [[Recipe alloc] init];

        recipe.name = [dic objectForKey:@"title"];
        recipe.thumbNail = [[dic objectForKey:@"attachements"]objectForKey:@"url"];
        recipe.twitterShareCount = [[dic objectForKey:@"id"] intValue];

        [recipes addObject:recipe];
    } 
```

主要是想弄清楚我应该使用什么来代替这一行：

```
recipe.thumbNail = [[dic objectForKey:@"attachements"]objectForKey:@"url"]; 
```

感谢任何帮助的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:43:20.443

您在附件对象中有一组字典。

```
[[[dic objectForKey:@"attachements"] objectAtIndex:0] objectForKey:@"url"] 
```

# php - 使用 composer 安装包

> ID：13002456
> 
> 赞同：2
> 
> 时间：2012-10-21T21:38:57.393
> 
> 标签：php, installation, package, composer-php

我正在尝试从 github 安装 gitlist。在文档中，我被告知安装为依赖项：一些包为 phpcpd、phploc。所以我安装了composer并在composer.json中添加了以下条目“phpcpd/phpcpd”：“1.4\. *”，“phploc/phploc”：“1.7.* ”。当我尝试使用 ant 构建项目时，我收到以下消息：

```
Your requirements could not be resolved to an installable set of packages.
     [exec] 
     [exec]   Problem 1
     [exec]     - The requested package phpcpd/phpcpd * could not be found.
     [exec]   Problem 2
     [exec]     - The requested package phploc/phploc * could not be found. 
```

所以我下载了 phpcpd.phar 和 phploc.phar 文件，但我不知道我能用它做什么。我可以直接从存档中提取文件并将其放在供应商文件夹中吗？顺便说一句，为什么作曲家找不到包

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:05:17.290

Composer 有一个 PEAR 类型的存储库，您需要使用它来从 PEAR 安装包。

```
{
    "repositories": [
        {
            "type": "pear",
            "url": "http://pear2.php.net"
        }
    ],
    "require": {
        "pear-pear2.php.net/PEAR2_Text_Markdown": "*",
        "pear-pear2/PEAR2_HTTP_Request": "*"
    }
} 
```

来自： http: [//getcomposer.org/doc/05-repositories.md#pear](http://getcomposer.org/doc/05-repositories.md#pear)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T22:54:33.647

我认为这些工具中的任何一个都不是作曲家包。你刚刚猜到了吗？

[phpcpd 的 github 页面](https://github.com/sebastianbergmann/phpcpd)没有 composer.json，并且在 packagist 上找不到该包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:52:10.033

对于像我这样的谷歌用户...

```
"repositories": [
    {
        "type": "pear",
        "url": "http://pear.phpunit.de"
    }
],
"require-dev": {
    "pear-pear.phpunit.de/phpcpd": "*",
    "pear-pear.phpunit.de/phploc": "*",
    "pear-pear.phpunit.de/PHP_CodeBrowser": "*"
} 
```

# c# - 是否可以将固定字节数组转换为结构，以便在 C# 中进行双向更改？

> ID：13002457
> 
> 赞同：2
> 
> 时间：2012-10-21T21:39:06.890
> 
> 标签：c#, casting, struct, bytearray

我已经看到了许多将 byte[] 复制到结构的方法，反之亦然。但是，我想知道是否可以将 byte[] 指针转换为结构（就像你在 C 中所做的那样）..

我希望能够将 byte[] 转换为 struct，对 struct 进行更改，并让更改自动出现在 byte[] 中。

谢谢，礼萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:15:16.783

您只需投射指针（有时您需要`void*`在中间经过）：

```
struct Foo
{
    public int Bar;
}
static unsafe void Main()
{
    byte[] buffer = new byte[10];
    fixed (byte* untyped = buffer)
    {
        var typed = (Foo*)untyped;
        typed[0].Bar = 123;
    }
    // buffer has the changes
} 
```

如果您需要偏移到缓冲区中，请使用`byte* untyped = &buffer[offset]`.

如果你想要一个原始结构指针，那么：

```
fixed (byte* ptr = buffer)
{
    var typed = (Foo*)ptr;
    Foo* foo = &typed[0];
    foo->Bar = 123;
} 
```

但是，请注意，您不能将 a 传递`Foo*`给期望 a`Foo`或的方法`ref Foo`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:27:20.543

我发现这种方法是实现我想要的最简单的方法。如果您定义结构以使 byte[] 与元素重叠，则副本在 struct 和 byte[] 之间是有效透明的（假设字节序是您的期望；在我的情况下，它是）。

```
[StructLayout(LayoutKind.Explicit)]
    public unsafe struct ListEntry {
        [System.Runtime.InteropServices.FieldOffset(0)] public fixed byte raw[512];
        [System.Runtime.InteropServices.FieldOffset(0)] public byte version;
        [System.Runtime.InteropServices.FieldOffset(1)] public UInt16 magic;
        [System.Runtime.InteropServices.FieldOffset(3)] public UInt32 start_time;
        [System.Runtime.InteropServices.FieldOffset(7)] public UInt16 run_id;
        [System.Runtime.InteropServices.FieldOffset(9)] public UInt16 channels;
        [System.Runtime.InteropServices.FieldOffset(11)] public UInt16 sampling_rate;
        [System.Runtime.InteropServices.FieldOffset(13)] public UInt32 start_sector;
        [System.Runtime.InteropServices.FieldOffset(510)] public UInt16 checksum;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:02:19.303

我建议你最好的选择，如果速度不是关键，可能是将数据存储在 a 中`byte[]`，并有一个类，该类包含对该数据的不可变引用，`byte[]`并具有其 get/set 方法访问数组的属性。属性获取/设置将始终反映并反映在数组的状态中，因为数组本身将保存对象的状态。不需要“不安全”代码。

方法可能看起来像：

```
public static class IntPack
{  // All methods ssume unchecked arithmetic
    public static Int16 FetchI16LE(this byte[] dat, int offset)
    {
        return (Int16)(dat[offset] + (dat[offset + 1] << 8));
    }
    public static Int32 FetchI32LE(this byte[] dat, int offset)
    {
        return dat[offset] + (dat[offset + 1] << 8) +
               (dat[offset + 2] << 16) + (dat[offset + 3] << 24);
    }
    public static void StuffI16LE(this byte[] dat, int offset, int value)
    {
        dat[offset] = (byte)(value); 
        dat[offset+1] = (byte)(value >> 8);
    }
    public static void StuffI32LE(this byte[] dat, int offset, int value)
    {
        dat[offset] = (byte)(value);
        dat[offset + 1] = (byte)(value >> 8);
        dat[offset + 2] = (byte)(value >> 16);
        dat[offset + 3] = (byte)(value >> 24);
    }
} 
```

指示的方法假定小端顺序。可以很容易地为大端编写相应的 __BE 方法方法。

# c# - UpdatePanel 停止 CommandArgument 更新

> ID：13002458
> 
> 赞同：0
> 
> 时间：2012-10-21T21:39:10.417
> 
> 标签：c#, asp.net, forms, web

我有一个嵌套在更新面板内的按钮，该面板绑定了一个 CommandArgument。这会调用一个方法来更新 UpdatePanel 中不包含的区域中的一些标签和文本。如果我注释掉更新面板，按钮可以正常工作，所以我知道它来自更新面板。有谁知道我怎么能通过这个？

protected void Button_Command(object sender, System.Web.UI.WebControls.CommandEventArgs e) { //在此处更新文本框和标签 }

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>
    <div>

                                    <asp:DataList ID="dListItems" runat="server" DataKeyField="PRODUCT_ID" RepeatColumns="4"
                                        RepeatDirection="Horizontal"  ShowFooter="False" ShowHeader="False" CellPadding="4">
                                        <HeaderTemplate>
                                            No Record Found....!
                                        </HeaderTemplate>
                                        <ItemTemplate>

                                                            <asp:Button ID="Button" runat="server" Text="Add to Cart" 
                                                            CommandArgument='<%# Eval("Id") %>'  CausesValidation="False"  
                                                            CssClass="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" 
                                                            OnCommand="Button_Command"   
                                                            /></span></span></p>

                                        </ItemTemplate>
                                    </asp:DataList>

                    </div>

                </td>
            </tr>
        </table>
    </div>
</ContentTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:47:02.427

> 它会更新 UpdatePanel 中不包含的区域中的一些标签和文本

那就是问题所在。UpdatePanel 只会更新里面的内容，而不是外面的内容。尝试将这些控件也放入 UpdatePanel 并查看它们是否有效

# android - 从另一个活动错误中添加列表视图中的数据

> ID：13002462
> 
> 赞同：0
> 
> 时间：2012-10-21T21:39:35.767
> 
> 标签：android, listview

我想问..我有 2 个表格，说它是表格 1 和表格 2，我在表格 1 上有列表视图，我想从表格 2 设置数据..所以我只是创建一些虚拟项目来尝试它，我想知道为什么不能工作..

所以这是我在**form2**上的代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.form2);             

    ArrayList<MyClass> searchResults = GetSearchResults();                
      form1.listview.setAdapter(new MyAdapter(this, searchResults));
}

private ArrayList<MyClass> GetSearchResults(){
         ArrayList<MyClass> results = new ArrayList<MyClass>();

         MyClass sr = new MyClass();
         sr.setJumlah_menu("Justin Schultz");
         sr.setNama_menu("San Francisco, CA");

         results.add(sr);          

         return results;
  } 
```

这是**我的适配器**代码：

```
public class AdapterListPemesananMenu extends BaseAdapter {
    private static ArrayList<MenuInputClass> searchArrayList;

    private LayoutInflater mInflater;

    public AdapterListPemesananMenu(Context context, ArrayList<MenuInputClass> results) {
        searchArrayList = results;
        mInflater = LayoutInflater.from(context);
    }

    public AdapterListPemesananMenu(OnClickListener onClickListener,
            ArrayList<MenuInputClass> searchResults) {
        // TODO Auto-generated constructor stub
    }

    public int getCount() {
        return searchArrayList.size();
    }

    public Object getItem(int position) {
        return searchArrayList.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.list_pemesananmenu_row, null);
            holder = new ViewHolder();
            holder.txtName = (TextView) convertView.findViewById(R.id.txtNamaMasuk);
            holder.txtCityState = (TextView) convertView
                    .findViewById(R.id.txtJumlahMasuk);
            //holder.txtPhone = (TextView) convertView.findViewById(R.id.phone);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.txtName.setText(searchArrayList.get(position).getNama_menu());
        holder.txtCityState.setText(searchArrayList.get(position)
                .getJumlah_menu());

        return convertView;
    }

    static class ViewHolder {
        TextView txtName;
        TextView txtCityState;

    } 
} 
```

当我从form1转到form2时，它总是强制关闭..

我的代码有什么问题？

当我在form1上尝试代码（来自form2）时，它运行良好..

这是来自 logcat ：

```
10-22 04:33:30.647: E/AndroidRuntime(15247): FATAL EXCEPTION: main
10-22 04:33:30.647: E/AndroidRuntime(15247): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.aplikasipemesananmenu/list_pemesananmenu_view.SingleListView_Activity}: java.lang.NullPointerException
10-22 04:33:30.647: E/AndroidRuntime(15247):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
10-22 04:33:30.647: E/AndroidRuntime(15247):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
10-22 04:33:30.647: E/AndroidRuntime(15247):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-22 04:33:30.647: E/AndroidRuntime(15247):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
10-22 04:33:30.647: E/AndroidRuntime(15247):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-22 04:33:30.647: E/AndroidRuntime(15247):    at android.os.Looper.loop(Looper.java:130)
10-22 04:33:30.647: E/AndroidRuntime(15247):    at android.app.ActivityThread.main(ActivityThread.java:3693)
10-22 04:33:30.647: E/AndroidRuntime(15247):    at java.lang.reflect.Method.invokeNative(Native Method)
10-22 04:33:30.647: E/AndroidRuntime(15247):    at java.lang.reflect.Method.invoke(Method.java:507)
10-22 04:33:30.647: E/AndroidRuntime(15247):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
10-22 04:33:30.647: E/AndroidRuntime(15247):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
10-22 04:33:30.647: E/AndroidRuntime(15247):    at dalvik.system.NativeStart.main(Native Method)
10-22 04:33:30.647: E/AndroidRuntime(15247): Caused by: java.lang.NullPointerException
10-22 04:33:30.647: E/AndroidRuntime(15247):    at list_pemesananmenu_view.SingleListView_Activity.onCreate(SingleListView_Activity.java:67)
10-22 04:33:30.647: E/AndroidRuntime(15247):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-22 04:33:30.647: E/AndroidRuntime(15247):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
10-22 04:33:30.647: E/AndroidRuntime(15247):    ... 11 more
10-22 04:33:31.958: E/DataRouter(125): smd_file_fd = 16 and external_file_fd = 24
10-22 04:33:31.958: E/DataRouter(125): ==KDW(3)== smd_new_status = (358)
10-22 04:33:31.958: E/DataRouter(125): ==KDW(4)== smd_new_status = (320)
10-22 04:33:31.958: E/DataRouter(125): DCD pinstatus is ON 
```

任何帮助将不胜感激谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:14:17.870

如何在 form2.onCreate() 方法上设置 form1？似乎 NPE 在 form1.listview.setAdapter(new MyAdapter(this, searchResults)); 像。

我认为您不应该在另一个活动对象中使用活动对象，因为系统可以随时杀死使用过的对象。查看[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)和[http://developer.android.com/training/basics/activity-lifecycle/index.html](http://developer.android.com/training/basics/activity-lifecycle/index.html)上的 Activity 生命周期。

使用自定义应用程序类在活动之间传递数据，并使用 Activity.onResume() 方法在被调用活动的列表视图上使用新数据。

如果您不知道如何制作，请询问相同的示例代码。

已编辑（下面的代码）

创建您的自定义应用程序对象：

```
public class MyApplication extends Application {
    Object mData;

    public Object getData() {
        return mData;
    }
    public void setData(Object data) {
        mData = data;
    }

} 
```

在清单中使用它：

```
 <application
        android:name="my.apppkg.MyApplication"

   ...
 </application> 
```

并创建两个活动。Form1 作为“消费者”：

```
public class Form1 extends Activity {
    MyApplication mApp;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mApp = (MyApplication)getApplication();

    }

    @Override
    protected void onResume() {
        super.onResume();

        Object data = mApp.getData();
        if (data != null) {

            // Do whatever you want with the data

        } else {
            // No data
        }

    }
    ...
} 
```

和 Form2 作为“生产者”：

```
public class Form2 extends Activity {
    MyApplication mApp;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mApp = (MyApplication)getApplication();

    }

    ...
    /**
     * Data generation method. Calls to Form1 once the data is set.
     * Call it here or from wherever you need it to (Buttons onClick events, ListViews onItemListClick, etc)
     */
    private void processAndSendData() {
        Object newData = ...; // Get the data from your sources

        mApp.setData(newData);

        Intent intent = new Intent(this, Form1.class);
        this.startActivity(intent);
    }
} 
```

Of course, change the type of mData in MyApplication class (Object in the example) for whatever you need.

# google-maps - navigator.geolocation.watchPosition 如果用户拒绝地理定位访问，我如何在预设坐标上打开和居中地图

> ID：13002465
> 
> 赞同：0
> 
> 时间：2012-10-21T21:39:40.590
> 
> 标签：google-maps, jquery-mobile, google-maps-api-3, geolocation

[http://rickgutierrez.bol.ucla.edu/map_mobile6.htm](http://rickgutierrez.bol.ucla.edu/map_mobile6.htm)

地图设置为以用户当前位置为中心加载。如果用户拒绝地理定位请求，则地图不会打开。如何让地图打开

中心：新的 google.maps.LatLng（34.05221496568917，-118.24334979057312），

如果用户拒绝地理定位器访问他们的位置？现在我有一个错误函数，当地理定位被拒绝或失败时，它会打开一个带有错误消息的提示。我猜我应该用具有上述坐标的函数替换该函数，但是如何将这些函数提供给创建地图并将其以这些坐标为中心的函数？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:28:41.180

从所需坐标创建自定义位置对象：

```
{coords:{latitude:34.05221496568917,longitude: -118.24334979057312}} 
```

您现在可以使用该对象作为参数调用 displayLocation，例如：

```
navigator.geolocation.getCurrentPosition(  
      displayLocation, 
      function(){displayLocation({coords:{latitude:34.05221496568917,
                                          longitude: -118.24334979057312}})
      }
); 
```

您还应该看看这个：[如何检测对地理位置的负面用户响应](https://stackoverflow.com/questions/6380195/how-to-detect-negative-user-response-for-geolocation)

# c++ - OpenCV+cvBlobsLib：blob 在 x 轴上“拉伸”出来

> ID：13002466
> 
> 赞同：1
> 
> 时间：2012-10-21T21:39:46.560
> 
> 标签：c++, opencv, blob, cvblobslib

使用 OpenCV 和 cvBlobsLib 制作通常的 blob 跟踪器，我遇到了这个问题，似乎没有其他人遇到过，这让我很难过。我得到了 RGB/BGR 框架，选择要隔离的颜色，将其设置为黑白，找到斑点并在每个斑点上添加边界矩形，但是当我显示最终图像时，框在 x 轴上拉伸：当对象在左侧时，盒子靠近它（虽然大约大 2.5 倍），并且当它向右移动时，盒子移动得更快（= 离对象越来越远）直到它到达右端对象还不到一半时的窗口。这不会发生在 y 轴上，一切都很好。这不是矩形的问题，当我使用 fillBlob 时也会发生这种情况，blob 形状会拉伸且未对齐。还有，它' 与图像捕获无关，因为我尝试过使用 kinect (OpenNI)、网络摄像头甚至使用单个图像 (imread())，并且我验证了使用的每个 ImageGenerator、Mat、IplImage 都是 640x480、8 位深度，为此，我对 namedWindow 使用了 AUTOSIZE （放大到全屏窗口也无济于事）。显示 BGR 帧和阈值图像没有问题，它们都适合窗口，但是当我将检测到的斑点与原始图像合并时，它们似乎属于不同的分辨率空间。这是代码，与网上随处可见的常见示例没有太大变化：为此，我对 namedWindow 使用了 AUTOSIZE （放大到全屏窗口也无济于事）。显示 BGR 帧和阈值图像没有问题，它们都适合窗口，但是当我将检测到的斑点与原始图像合并时，它们似乎属于不同的分辨率空间。这是代码，与网上随处可见的常见示例没有太大变化：为此，我对 namedWindow 使用了 AUTOSIZE （放大到全屏窗口也无济于事）。显示 BGR 帧和阈值图像没有问题，它们都适合窗口，但是当我将检测到的斑点与原始图像合并时，它们似乎属于不同的分辨率空间。这是代码，与网上随处可见的常见示例没有太大变化：

```
//[...]
namedWindow("Color Image", CV_WINDOW_AUTOSIZE);
namedWindow("Color Tracking", CV_WINDOW_AUTOSIZE);
//[...] I already got the two cv::Mat I need, imgBGR and imgTresh
CBlobResult blobs;
CBlob *currentBlob;
Point pt1, pt2;
Rect rect;

//had to do Mat to IplImage conversion, since cvBlobsLib doesn't like mats
IplImage iplTresh = imgTresh;
IplImage iplBGR = imgBGR;

blobs = CBlobResult(&iplTresh, NULL, 0);
blobs.Filter(blobs, B_EXCLUDE, CBlobGetArea(), B_LESS, 100);
int nBlobs = blobs.GetNumBlobs();
for (int i = 0; i < nBlobs; i++)
{
    currentBlob = blobs.GetBlob(i);
    rect = currentBlob->GetBoundingBox();
    pt1.x = rect.x;
    pt1.y = rect.y;
    pt2.x = rect.x + rect.width;
    pt2.y = rect.y + rect.height;
    cvRectangle(&iplBGR, pt1, pt2, cvScalar(255, 255, 255, 0), 3, 8, 0);
}
//[...]
imshow("Color Image", imgBGR);
imshow("Color Tracking", imgTresh); 
```

“[...]”是与此问题无关的代码，但如果您需要有关我如何处理图像的更多信息，请告诉我，我会发布它。

基于这样一个事实，即我捕获图像的方式没有改变任何东西，BGR 帧和黑白图像显示得很好，并且在获得 blob 后，任何显示它们的方式都会给出相同（错误）的结果，问题必须介于 CBlobResult() 和 matrix2ipl 转换之间，但我真的不知道如何找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:44:28.880

哦，天哪，我花了很长时间来写整个问题，第二天我几乎随便找到了答案。当我为阈值创建 B/W 矩阵时，我没有将其设为单通道；我复制了 BGR 矩阵类型，因此有一个具有 3 个通道的阈值图像，这导致 widthStep 是帧宽度的 3 倍。解决了以 CV_8UC1 作为类型创建 cv::Mat imgTresh。

# c# - 寻找此阵列解决方案的替代方案

> ID：13002469
> 
> 赞同：0
> 
> 时间：2012-10-21T21:40:04.123
> 
> 标签：c#, arrays

我有 int [10000] 的数组。

我需要将每个 int 与其他 int 相加，并仅显示总和 > N 的结果。

Sum，可以是任意数组元素，也可以是 5,6,7...10000 个 > N 的数组元素的总和。

我可以像 a[1] + a[2] + a[3] 一样写下（所有组合，但这太疯狂了）...但是可能还有其他解决方案吗？

我需要所有组合的结果，这给了我 >N 的总和

好的。如果它是 int[10] 的数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:07:30.840

您的问题类似于[子集和](http://en.wikipedia.org/wiki/Subset_sum_problem)问题。[在这里](https://stackoverflow.com/questions/2708436/subset-sum-problem)，您可以找到该算法的两种解决方案。唯一的变化是您必须跟踪总和大于 N 的数字，并且您需要针对所有可能性重复它，而不仅仅是找到真/假结果。

# iphone - iOS：在旋转 iphone 后，直接从仅支持纵向模式的视图控制器呈现横向视图控制器

> ID：13002477
> 
> 赞同：2
> 
> 时间：2012-10-21T21:40:44.983
> 
> 标签：iphone, ios, uiviewcontroller

我有一个始终以纵向模式呈现的应用程序（在 Xcode 项目的摘要中，仅支持纵向）。

现在我想要做的是当我使用应用程序时，从应用程序的任何视图控制器中，如果我以横向方式旋转设备，应用程序会在右侧显示一个视图控制器（ARViewController.m），实际上向右横向旋转是呈现 ARViewController.m 的触发器。但我所经历的是，由于第一个视图控制器只支持纵向，即使我将设备定向为横向，我想从第一个呈现的视图控制器（ARViewController.m）也是纵向的，而不是在横向权利。

即使我在第二个视图控制器（ARViewController.m）中写了这个，它也不会自动旋转（这个视图控制器可以在每个方向上呈现）：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{ 
  return YES;
} 
```

在第二个视图控制器 (ARViewController.m) 出现后，我必须旋转 iphone 一次以使所有内容井井有条。

下面是我如何从第一个视图控制器调用第二个视图控制器 (ARViewController.m)：

```
ARViewController *arVC = [[ARViewController alloc] initWithNibName:@"ARViewController" bundle:nil];
[self presentModalViewController:arVC animated:YES]; 
```

我从“ViewController.m”中调用它，这个`rootViewController`在 AppDelegate.m 中定义。

这是我第一次做这样的事情，我一直在寻找解决方案，但仍然是同样的问题。对此有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T10:47:23.223

我终于解决了这个问题，我想还有其他选择，但这个工作正常：

事实上，我在方向限制中只保留了肖像。然后，当我将手机横向向右或向左转动时，我以模态方式调用我的 ARViewController，但在加载它之前，我通过如下所示进行适当的旋转来强制此视图控制器横向（在 viewWillAppear 中）：

```
- (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];
[self transformView2ToLandscape];}

-(void) transformView2ToLandscape {

NSInteger rotationDirection;
UIDeviceOrientation currentOrientation = [[UIDevice currentDevice] orientation];

if(currentOrientation == UIDeviceOrientationLandscapeLeft){
    rotationDirection = 1;
}else {
    rotationDirection = -1;
}

CGAffineTransform transform = [arController.viewController.view transform];
transform = CGAffineTransformRotate(transform, degreesToRadians(rotationDirection * 90));
[arController.viewController.view setTransform: transform];} 
```

**编辑：在斯威夫特 4**

```
override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)
    transformViewToLansdcape()
}

func transformViewToLansdcape(){
    var rotationDir : Int
    if(UIDeviceOrientationIsLandscape(UIDevice.current.orientation)){
        rotationDir = 1
    }else{
        rotationDir = -1
    }
    var transform = self.view.transform
    //90 for landscapeLeft and 270 for landscapeRight
    transform = transform.rotated(by: (rotationDir*270).degreesToRadians)
    self.view.transform = transform
}

extension BinaryInteger {
    var degreesToRadians: CGFloat {
        return CGFloat(Int(self)) * .pi / 180
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T00:57:27.630

我发现首先，阻止整个应用程序旋转的是项目摘要表。您应该做的是取消选择项目摘要表中的限制，只需像您希望的那样在每个 UIViewController 中放置一个方法。在您拥有的 UIViewController 中，使该方法可用于横向并实现该方法

`[UIViewControllerSubclass willRotateToInterfaceOrientation:<interfaceOrientation> duration:<NSTimeInterval>]`

苹果怎么说：

## willRotateToInterfaceOrientation：持续时间：

在用户界面开始旋转之前发送到视图控制器。

*   (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 持续时间:(NSTimeInterval)duration

**参数**

*到接口方向*

用户界面的新方向。UIInterfaceOrientation 中描述了可能的值。

*期间*

挂起轮换的持续时间，以秒为单位。

**讨论**

子类可以重写此方法以在轮换之前立即执行其他操作。例如，您可以使用此方法禁用视图交互、停止媒体播放或暂时关闭昂贵的绘图或实时更新。您也可以使用它来将当前视图交换为反映新界面方向的视图。调用此方法时，interfaceOrientation 属性仍包含视图的原始方向。

无论您的代码是执行一步还是两步旋转，都会调用此方法。

* * *

所以，这似乎是您正在寻找的方法。只需实现这一点，并将您的视图调用代码放入其中，它应该可以工作。（另外，将其中之一放在呈现的视图中以在旋转回来时返回）

此外，您应该考虑不要以模态方式呈现视图控制器，因为它无论如何都在旋转，并且很明显显示正在发生变化。

# performance - 嵌套for循环运行时间计算

> ID：13002478
> 
> 赞同：2
> 
> 时间：2012-10-21T21:41:02.217
> 
> 标签：performance, big-o

如何计算此循环的最坏情况运行时间？

```
for(int i=1 ; i * i < n ; i*=2)

{
     //do something
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:43:03.363

因为`i = 0`，`i*=2`将仍然`= 0`，这将永远持续下去`n > 0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T21:50:10.757

让我们建立起来——

第一的：

```
for (int i = 1; i < n; i *= 2) --> log(n) 
```

然后：

```
for (int i = 1; i * i < n; i ++) --> sqrt(n) 
```

所以，看起来你的循环会影响 log(sqrt(n))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-05T00:52:57.260

形式上，您可以使用 Sigma 表示法进行如下操作：

![在此处输入图像描述](../Images/580563f6398c34d0c2e3a92854c6bc5d.png)

# git - Git：队友覆盖了我们远程源存储库中的文件，因此它们不再包含我们的最新更改。使固定？

> ID：13002480
> 
> 赞同：0
> 
> 时间：2012-10-21T21:41:58.570
> 
> 标签：git, github

我通过执行以下操作将最后一个“好”提交带到我的本地存储库：

```
git checkout the_SHA_I_wanted
git reset --hard 
```

我现在错过了队友的更改，只影响了 4 个文件（幸运的是）。如何从远程存储库中获取她的四个文件的最新版本并使用它们来“替换”（覆盖）我本地存储库中的这 4 个文件？（*或者，这个程序叫什么，我可以研究一下？*）之后，我打算不拉就推到遥控器上。

我们不是 git-savvy，所以手动将她的文件直接复制到我的 xCode 项目中会更容易吗，正如我之前所说，做一个推而不拉？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:49:13.013

如果只是四个文件，并且通过复制它们解决了问题，那么您已经回答了自己的问题。假设您确实想从远程存储库中提取这四个文件。你有几个选择。

1.  在本地克隆远程存储库，然后将文件从该本地副本复制到您的存储库。

2.  运行`git fetch`以更新您的遥控器。然后你可以做一些事情，比如`git origin/master:show path/to/file.ext > path/to/file.ext`在本地获取单个文件。

然后您可以添加文件并按您提到的那样推送。（您必须提供 push`-f`选项，因为您正在更改远程历史记录。）您可能希望保留远程分支的备份以防万一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:16:37.133

您可以让您的队友将她的更改推送到新分支，然后您可以拉取和合并。

# emacs - 如何在 emacs nrepl 会话中自动获取 paredit？

> ID：13002482
> 
> 赞同：6
> 
> 时间：2012-10-21T21:42:01.783
> 
> 标签：emacs, clojurescript

我的 emacs 初始化文件中有以下行。

```
(setq auto-mode-alist (cons `("\*nrepl\*" . paredit-mode) auto-mode-alist)) 
```

我通过创建一个名为 *nrepl* 的新缓冲区来检查它是否有效`Ctrl-x-f *nrepl*`。是的，*nrepl* 缓冲区激活了 Paredit，启用了 paredit 模式。

我关闭 *nrepl* 缓冲区而不保存它。

我通过键入启动一个 nrepl 会话`M-x nrepl-jack-in`。nrepl 服务器启动，我看到了 nrepl repl。nrepl repl 也称为 *nrepl*，但 Paredit**未**启用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T23:14:49.767

您混淆了缓冲区和文件：`auto-mode-alist`将文件名与正则表达式匹配以决定在编辑这些文件时使用哪种模式。但是 *nrepl* 是一个不包含文件的缓冲区，所以`auto-mode-alist`对它没有影响。相反，您可能想弄清楚 *nrepl* 使用哪个主要模式，然后使用`(add-hook '<the-major-mode>-hook 'paredit-mode)`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T06:10:35.817

简单地说 - 您需要以下代码：

```
(add-hook 'nrepl-mode-hook 'paredit-mode) ; for nrepl.el <= 0.1.8
(add-hook 'nrepl-repl-mode-hook 'paredit-mode) ; for nrepl.el > 0.1.8 
```

这相当于更长的形式：

```
(add-hook 'nrepl-mode-hook (lambda () (paredit-mode +1))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T01:48:58.263

```
(add-hook 'nrepl-mode-hook 'paredit-mode) 
```

是他们在[nrepl github 页面上的建议](https://github.com/kingtim/nrepl.el)

# lilypond - 在这些 Lilypond diads 和 triads 中，为什么最后的和弦在低音中包含错误的音符？

> ID：13002483
> 
> 赞同：4
> 
> 时间：2012-10-21T21:42:03.743
> 
> 标签：lilypond

为什么以下两个 \score 块中的最后一个和弦都没有在低音中显示正确的音符？在二重奏中，最后一个和弦的低音应该有 D。在三和弦中，最后一个和弦的低音应该有 F。相反，两个和弦都显示为与各自 \score 块中的第一个和弦相同。

![二重奏和三重奏](../Images/71e7e72416a6f603ed64ddec662affea.png)

```
\version "2.14.2"
\book {
\header {
  title = \markup \center-column {"Dyad, Triad Permutations"}
  arranger =  \markup \center-column { "Sean O'Donnell" }
}
  \score {
    \relative {
      <bes d>1
      <d bes>
    } 
  }
  \score {
    \relative {
      <bes d f>1
      <bes f d>
      <d bes f>
      <d f bes>
      <f bes d>
      <f d bes>
    }

  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T03:54:08.340

您必须指定相对于当前音符的八度音阶。您可以通过使用逗号 (,)（降低）和撇号 (')（提高）来做到这一点。因此，在第一个示例中，相对于和弦，您需要将 D 降低一个八度（然后将 Bb 拉回）。同样，在另一个和弦中，放下 F 并将 D 拉回。请参阅以下代码以实现您想要的...

![在此处输入图像描述](../Images/e8a3be3aa5f2626cc9e2eec79aff3f71.png)

```
\version "2.14.2"
\book {
\header {
  title = \markup \center-column {"Dyad, Triad Permutations"}
  arranger =  \markup \center-column { "Sean O'Donnell" }
}
  \score {
    \relative {
      <bes d>1
      <d, bes'>
    } 
  }
  \score {
    \relative {
      <bes d f>1
      <bes f d>
      <d bes f>
      <d f bes>
      <f bes d>
      <f, d' bes>
    }

  }
} 
```

要完全了解音符定位在 \relative 模式下的工作原理，请参阅此处手册的音高部分：

[http://lilypond.org/doc/v2.12/Documentation/user/lilypond-learning/Simple-notation#Simple-notation](http://lilypond.org/doc/v2.12/Documentation/user/lilypond-learning/Simple-notation#Simple-notation)

其中指出：

> 输入笔记最简单的方法是使用 \relative 模式。在这种模式下，通过假设后面的音符总是被放置在最靠近前一个音符的位置，即它被放置在前一个音符的三个五线谱空间内的八度音阶中，来自动选择八度音阶。
> 
> [...]
> 
> 通过在 \relative c' { 命令中添加（或删除）引号 ' 或逗号，我们可以更改起始八度
> 
> [...]
> 
> 相对模式最初可能会令人困惑，但它是输入大多数旋律的最简单方法。

手册页还显示了在 \relative 模式下工作的代码示例。

# objective-c - 执行同步任务的最常见和正确的模式，异步任务创建复合操作

> ID：13002484
> 
> 赞同：0
> 
> 时间：2012-10-21T21:42:03.773
> 
> 标签：objective-c, design-patterns, asynchronous

我对 iOS 和 Objective-C 比较陌生。

我正在开发一个项目，旨在使复杂（或“复合”）操作的组合尽可能简单：[https ://github.com/stanislaw/SACompositeOperations](https://github.com/stanislaw/SACompositeOperations)

我在那里有四种操作：两种单一操作（同步和异步）和两种复杂操作（级联和“事务”）。单个操作被用作复杂操作的“原子”，所以我想让它们尽可能好，以符合 Objective-C 的最佳实践。

我感兴趣的是：*我应该为这些单一操作选择什么代码*？

通过调用两个单一操作中的第一个“同步”，我的意思是：运行可能与完成处理程序异步的东西并锁定流程等待它完成。“异步”意味着真正的异步操作 - 只需以异步方式运行操作块。

这是我目前使用的单一操作代码：

同步操作

```
- (void)run:(syncOperationBlock)block {
    self.semaphore = dispatch_semaphore_create(0);

    block(self);

    while (dispatch_semaphore_wait(self.semaphore, DISPATCH_TIME_NOW))
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode
                                                       beforeDate:[NSDate dateWithTimeIntervalSinceNow:10]];
}

- (void)finish {
    dispatch_semaphore_signal(self.semaphore);
}

@end 
```

异步操作

```
- (void)run:(asyncOperationBlock)block {
    dispatch_queue_t queue = dispatch_queue_create("async_operation.queue", 0);

    dispatch_async(queue, ^{
        block(self);
    });
} 
```

如果有人可以为这些单一的同步和异步操作建议任何解决方案，我将不胜感激：*更通用*，*更常见*，对于我描述的情况*更好*

很快：对于异步操作，强制同步操作的最佳代码是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:08:12.933

自从我问了这个问题后，我的项目确实有了很大的发展。

从结构的角度来看，异步操作我不能说太多有趣：在我的项目中，它们都是基于 dispatch_async 的，并且最有价值的功能是通过大量使用块来实现的（主要是：将操作本身让给它们执行的块，允许控制这些操作的流程）。

这里要注意的更有趣的事情是我目前用于同步（或“强制同步”）操作的代码 - 虽然在实际应用程序中应该避免使用它们，但它们仍然适用于单元测试：一个例子是需要理顺在单元测试用例的上下文中，异步网络请求的卷曲异步流测试其结果。

尽管我将其发布为对我的非特定问题的回答，但我仍然非常希望看到任何关于我的 SASyncOperation 是否足以用于强制同步操作的权威答案（从某种意义上说，我已经在这个问题中描述了它）或也许它可以进一步改进。

当前编写的[SASyncOperation](https://github.com/stanislaw/SACompositeOperations/blob/master/SACompositeOperations/SASyncOperation.m)

*   如果它在主线程上运行，则不会阻塞主线程。
*   *不会像使用while(!completed){}*的简单方法那样产生过多的 CPU 轮询；做。

这是代码中最重要的部分：

```
#import "SASyncOperation.h"

@interface SASyncOperation () {
    BOOL _isOnMainThread;
    dispatch_semaphore_t _semaphore;
}
@end

@implementation SASyncOperation

// …

- (void)start {
    _semaphore = dispatch_semaphore_create(0);

    _operation(self);

    if (_finished) return;

    if ((_isOnMainThread = [NSThread isMainThread])) {
        while (dispatch_semaphore_wait(_semaphore, DISPATCH_TIME_NOW)) {
            CFRunLoopRunInMode(kCFRunLoopDefaultMode, [[NSDate distantFuture] timeIntervalSinceNow], NO);
        }
    } else {
        dispatch_semaphore_wait(_semaphore, DISPATCH_TIME_FOREVER);
    }

    _finished = YES;
}

- (void)run:(^(void)(SASyncOperation *)block {
    _operation = [block copy];

    [self start];
}

- (void)finish {
    _finished = YES;

    dispatch_semaphore_signal(_semaphore);

    if (_isOnMainThread) {
        dispatch_async(dispatch_get_main_queue(), ^{
            CFRunLoopStop(CFRunLoopGetMain());
        });
    }
}

// …
@end 
```

这就是 SASyncOperation 的使用方式：

```
SASyncOperation *syncOperation = [[SASyncOperation alloc] init];

[syncOperation run:^(SASyncOperation *so) {
    doSomeThingMultiQueuedPossiblyMultiblockedAndAsynchronous(^{
        soOver = YES;
        [so finish];
    });
}]; // <- (*)

// (*) The flow will be stopped at this point waiting when 'so' operation will finish itself 
```

# php - 如何创建 Apache 虚拟主机？

> ID：13002486
> 
> 赞同：2
> 
> 时间：2012-10-21T21:42:14.320
> 
> 标签：php, apache, windows-7, wamp, document-root

我使用的是 Windows 7，在那里我安装了 apache 服务器`c:\wamp\apache\`，PHP 位于`c:\wamp\php\`，并作为模块加载。

因此，假设我正在构建测试项目，并且该项目中只有 index.php。该项目的文件夹将位于`c:\wamp\apache\htdocs\test\index.php`其中，我可以通过浏览器访问它：`localhost\test`

这一切都很好，但是当我包含图像、css 和 js 文件时我遇到了问题。假设我想包含 css 样式，我必须使用这个：

```
<link rel="stylesheet" href="/test/images/image.jpg" /> 
```

我想用这个作为一个href：

```
<link rel="stylesheet" href="/images/image.jpg" /> 
```

所以这`/`是根目录，从那里我可以在我的项目文件夹中搜索文件。

我该怎么办？我应该为每个项目创建虚拟服务器，还是有一种方法可以让我的 htdocs 文件夹中的每个文件夹都像在实时服务器上一样，在哪里`/`转换为文档根目录？

我应该如何设置 Apache 服务器，以便我的 htdocs 文件夹中的每个文件夹都充当自己的服务器？当我使用 XAMPP 时，它就是这样工作的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T21:51:47.530

如果你想避免这些令人头疼的问题，你应该为每个项目都有一个虚拟主机。

您可以只输入您的 httpd.conf（使用 wamp：左键单击 wamp > apache > httpd.conf）

```
# To access your old projects under C:\wamp\www
NameVirtualHost localhost:80
<VirtualHost localhost:80>
ServerName localhost
ServerAlias localhost
DocumentRoot C:\wamp\www
<Directory "C:\wamp\www">
    Options Indexes FollowSymLinks
    AllowOverride All
    Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1
</Directory>
</VirtualHost>

# each virtualhost should look like that
NameVirtualHost localhost.yourproject.com:80
<VirtualHost localhost.yourproject.com:80>
ServerName localhost.yourproject.com
ServerAlias localhost.yourproject.com
DocumentRoot C:\path\to\yourproject
<Directory "C:\path\to\yourproject">
    Options Indexes FollowSymLinks
    AllowOverride All
    Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1
</Directory>
</VirtualHost> 
```

不要忘记重新启动 wamp，并将其包含在您的主机文件中（C:\Windows\System32\drivers\etc\hosts）：

```
127.0.0.1       localhost.yourproject.com 
```

# c# - 从已启动的进程中获取逐行输出

> ID：13002490
> 
> 赞同：1
> 
> 时间：2012-10-21T21:42:29.380
> 
> 标签：c#

我正在尝试检索由我启动的进程生成的输出行，这是代码

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    foreach (myData singleJob in e.Argument as List<myData>)
    {
        ProcessStartInfo psi = new ProcessStartInfo("myCommandLineProgram.exe");
        psi.Arguments = "\"" + singleJob.row + "\"";
        psi.CreateNoWindow = true;
        psi.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
        psi.RedirectStandardInput = true;
        psi.RedirectStandardOutput = true;
        psi.RedirectStandardError = true;
        psi.UseShellExecute = false;
        Process p = new Process();
        p.StartInfo = psi;
        p.Start();
        StreamReader sr = p.StandardOutput ;
        string line;
        while ((line = sr.ReadLine()) != null )
        {
            this.Invoke((MethodInvoker)delegate
            {
                    richTextBox1.AppendText(sr.ReadLine() + Environment.NewLine);
                    richTextBox1.ScrollToCaret();   

            });
        }

        //StreamReader streamOutput = p.StandardOutput;
        //string content = streamOutput.ReadToEnd();   
        //this.Invoke((MethodInvoker)delegate
        //{
        //    richTextBox1.AppendText(content + Environment.NewLine);
        //});

        p.WaitForExit();
    }
} 
```

虽然注释掉的代码始终有效（但它不会逐行解析），但上面的代码有些错误，确实有些行未能出现在 Richtextbox 中，而另一些则为空白。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T21:48:58.563

那不应该是这样的吗

```
richTextBox1.AppendText(line + Environment.NewLine); 
```

（`line`而不是`sr.ReadLine()`）？

调用`readLine()`两次将丢弃每一行。

此外，由于您正在调用`ReadLine`委托，因此您无法控制读取发生的时间。可能有几个`ReadLines()`（从`while`线）介于两者之间。

请注意，您也不应该使用该`line`变量：该变量始终引用循环中的同一行变量，该变量在`AppendText`执行时可能包含新内容。您应该在循环中引入一个新的局部变量，例如

```
 while ((line = sr.ReadLine()) != null )
 {
   var theLine = line;
   this.Invoke((MethodInvoker)delegate
   {
       richTextBox1.AppendText(theLine + Environment.NewLine);
       richTextBox1.ScrollToCaret();   
   });
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T21:46:47.963

只需在此处更改而不是`ReadLine()`, put `line`。您已经阅读了 while 循环中的行

```
string appendingLine = line;
this.Invoke((MethodInvoker)delegate
{
          richTextBox1.AppendText(appendingLine + Environment.NewLine);
          richTextBox1.ScrollToCaret();   

}); 
```

**编辑：** MartinStettner 给出的答案更好。可能存在在`line`执行委托之前发生更改的情况，因此某些行可能会丢失，而另一些行可能会重复。因此，我将根据马丁的答案更改我的答案，并且我想指出他应该是这个答案的功劳。

# jquery - Onclick 和 Onload 之间的不同行为

> ID：13002491
> 
> 赞同：0
> 
> 时间：2012-10-21T21:42:53.160
> 
> 标签：jquery, onclick, onload

我有一个索引网页，上面有一个提交按钮。当我单击该按钮时，我想运行一个将字符串添加到 div 的函数（使用 onclick()）。但是，它只是闪烁然后消失。但是当我使用 window.onload 时，它会按照我的意图停留在页面上。这是代码：

```
<div>
  <form>
    <input type="submit" onclick="test();" value="Add Text">
  </form>
  <div id="holder"></div>
</div> 
```

我在我的页面中包含以下带有“脚本”标签的内容。

当我使用它时，它会留在页面上（应该如此）：

```
window.onload = function(){
  $('#holder').html("Hello <b>world</b>!");
} 
```

但这在加载后立即消失：

```
function test(){
  $('#holder').html("Hello <b>world</b>!");
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:46:42.180

您使用的按钮是表单提交按钮，它将提交表单并重新加载页面。

而是使用`<button>`按钮

利用

```
<button onclick="test();">Add Text</button> 
```

代替

```
 <form>
    <input type="submit" onclick="test();" value="Add Text">
  </form> 
```

# c# - Windows Phone 按钮对齐

> ID：13002493
> 
> 赞同：1
> 
> 时间：2012-10-21T21:43:05.070
> 
> 标签：c#, image, windows-phone-7, button, grid

我想通过代码将基于图像的按钮添加到我的 Windows Phone 页面。我创建了一个网格并将按钮添加到其中。

我写了以下内容：

```
 Grid grd = new Grid();
 grd.Height = 92;
 grd.Width = 271;
 grd.Margin = new Thickness(0);
 Button btn = new Button();
 btn.Name ="Name1";
 btn.Margin = new Thickness(0);
 btn.HorizontalAlignment = System.Windows.HorizontalAlignment.Stretch;
 btn.VerticalAlignment = System.Windows.VerticalAlignment.Stretch;
 ImageBrush imb = new ImageBrush();
 imb.ImageSource = new BitmapImage(new Uri("my_picture.jpg", UriKind.Relative));
 btn.Background = imb;
 btn.BorderThickness = new Thickness(0.0);
 btn.Click += new RoutedEventHandler(btn_Click);
 grd.Children.Add(btn);
 wrapPanel1.Children.Add(grd); 
```

问题是网格边界（271*92）和按钮本身之间仍然存在一些空间。按钮没有填满整个网格（或者按钮的主体没有填满为按钮分配的空间）。我该如何解决这些问题并删除那些不需要的边距

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:33:40.187

如果你想制作一个没有任何边框的按钮。按钮有一个网格环绕内容控件。

您可以编辑其模板，设置外部网格的背景画笔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:08:01.847

尝试将 Button Padding 设置为零。

# imagemagick - 安装 imagemagick 的问题

> ID：13002494
> 
> 赞同：17
> 
> 时间：2012-10-21T21:43:14.523
> 
> 标签：imagemagick, homebrew, refinerycms

我正在尝试开始我的第一个炼油厂 cms 项目，但已经遇到了麻烦。我正在尝试让 imagemagick 运行，但遇到了错误。我在stackoverflow上查看了关于更改我的个人资料或有问题的目录的权限，还卸载和重新安装，但到目前为止还没有运气。我希望也许有人可以指导我解决这个问题。非常感谢。

```
 Mac-Pro:local user$ brew install imagemagick
 Error: You must `brew link jpeg' before imagemagick can be installed
 Mac-Pro:local user$ brew link jpeg
 Linking /usr/local/Cellar/jpeg/8d... 
 Error: Could not symlink file: /usr/local/Cellar/jpeg/8d/bin/wrjpgcom
 /usr/local/bin is not writable. You should change its permissions. 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-05-02T11:32:28.007

在鼓励之后，这是我对[这个问题](https://stackoverflow.com/q/13002494/596068)的评论作为答案。

问题是 Homebrew 试图使用的目录对于运行`brew`. 要解决此问题，请使该目录可由该用户写入。

```
sudo chown -R yourusename:admin /usr/local/bin 
```

这递归地将目录内所有对象的所有权更改为`/usr/local/bin`名为`yourusername`. 它假定您的用户在 OS X 管理员组中。

如果您不确定用户的用户名，可以运行命令`whoami`。

# java - 为什么 Nbody.java 中的行星不会旋转？

> ID：13002503
> 
> 赞同：0
> 
> 时间：2012-10-21T21:44:43.600
> 
> 标签：java, physics

我正在尝试解决我的 java 类中的 Nbody 示例（这是我在 java 中的第一个学期）。

节目详情如下：

编写一个程序 Nbody.java，它使用 Scanner 从标准输入中读取宇宙，使用上述的跳蛙方案模拟其动态，并使用我们的 StdDraw 对其进行动画处理。维护几个数组来存储数据。要进行计算机模拟，请编写一个无限循环，反复更新粒子的位置和速度。绘图时，考虑使用 StdDraw.setXscale(-R, +R) 和 StdDraw.setYscale(-R, +R) 将物理坐标缩放到屏幕坐标。

我编写了以下代码来编译和加载背景图像、歌曲和正确放置的行星。但是，我无法让植物按应有的方式旋转。

这是我的代码：

```
import java.util.Scanner;

public class Nbody {

// method dist calculates distance between two points
// it accepts four double values (x1, y1, x2, y2)
// it returns a double value
private static double dist(double x1, double y1, double x2, double y2)

{

     double r;
     r = Math.sqrt((x1-x2)*(x1-x2) + (y1-y2)*(y1-y2));
     return r;
} 

public static void main(String[] args) {

    final double G = 6.67e-11; // constant value G

    final double deltaT = 25000.0; // constant value delta T, which determines animation interval

    // ax and ay are accerlations on x axis and y axis
    double ax;
    double ay;

    Scanner scan = new Scanner (System.in); // define a keyboard object: scan

    int bodyNum = scan.nextInt(); // read in the first integer, which specify how many particles
    double radius = scan.nextDouble(); // read in radius of universe

    // define arrays to save x values and y values of each particle
    double[] x = new double[bodyNum];
    double[] y = new double[bodyNum];

    // define arrays to save velocity of each particle
    double[] vx = new double[bodyNum];
    double[] vy = new double[bodyNum];

    double[] m = new double[bodyNum];  // array stores mass of each particle
    String[] name = new String[bodyNum]; // array stores file name of each particles
    double[] Fx = new double[bodyNum]; // force on X axis
    double[] Fy = new double[bodyNum]; // force on Y axis

    StdDraw.setXscale(-radius, radius); // Set the X scale
    StdDraw.setYscale(-radius, radius); // Set the Y scale
    StdDraw.picture(0, 0, "starfield.jpg"); // Display background pic centered at (0,0)

    // read in inital location values and velocity values for each particle

    for (int i = 0; i < bodyNum; i++)

    {
       x[i] = scan.nextDouble();
       y[i] = scan.nextDouble();
       vx[i] = scan.nextDouble();
       vy[i] = scan.nextDouble();
       m[i] = scan.nextDouble();
       name[i] = scan.next();
       StdDraw.picture(x[i], y[i], name[i]); // display particle pic on screen
    }

    // This following line play background music, uncomment it in lab
    // If you work from a remote location via VNC, comment it
    StdAudio.play("2001.mid");

    // main animation loop
    while(true){

        // array Fx and Fy store net force acting on each body
        // initialize these two arrays to zeros

        for (int n = 0; n<bodyNum; n++)

        {
           Fx[n] = 0.0;
           Fy[n] = 0.0;
        }

         //  for loop to process all bodies
         for(int body = 0; body<bodyNum; body++)

            {

            // calculate the gravitational attraction between current body
            // and all other bodies

            Fx[body] = (m[body] * m[body+1])  / (x[body+1] -x[body])*G;

            Fy[body] = (m[body] * m[body+1]) / (y[body+1] -y[body])*G;

                for (int j = 0; j < bodyNum; j++)

                {

                 // calculate only when two bodies are different
                 // Please fill out the following if statement body                 

                 if(body != j)

                 {

                 Fx[j] = (m[j] * m[j+1]) / (y[j+1] -y[j])*G;
                 Fy[j] = (m[j] * m[j+1]) / (y[j+1] -y[j])*G;

                 }

                }
            }

         // update vleocity value and location value for each particle
         // please fill out the for loop
         for (int j = 0; j < bodyNum; j++)

            {

             // calculate accleration rate
             ax = Fx[j] / m[j];
             ay = Fy[j] / m[j];

             // update vleocity value 

            vx[j] = vx[j] + deltaT * ax;
            vy[j] = vy[j] + deltaT * ay;

            // update location value

            x[j] = x[j] + deltaT * vx[j];
            y[j] = y[j] + deltaT * vy[j];

            } 

         // redraw background
         StdDraw.setXscale(-radius, radius);
         StdDraw.setYscale(-radius, radius);
         StdDraw.picture(0, 0, "starfield.jpg");

         for (int i = 0; i < bodyNum; i++){
             // display the particle           
             StdDraw.picture(x[i], y[i], name[i]);
         }

         // display and pause for 30ms      
         StdDraw.show(30);        
    }
}
} 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:04:52.680

你的力计算对我来说似乎有点不对劲。我会这样做：

```
Arrays.fill(Fx, 0.0);
Arrays.fill(Fy, 0.0);
for (int body = 0; body < bodyNum - 1; body++) {
    for (int body2 = body + 1; body2 < bodyNum; body2++) {
        double dx = x[body2] - x[body];
        double dy = y[body2] - y[body];
        double d2 = dx * dx + dy * dy;
        double d = Math.sqrt(d2);
        double f = G * m[body] * m[body2] / d2;
        double fx = f * dx / d;
        double fy = f * dy / d;
        Fx[body] += fx;
        Fy[body] += fy;
        Fx[body2] -= fx;
        Fy[body2] -= fy;
    }
}
// then update positions and velocities based on Fx and Fy arrays 
```

这将计算作用于的力的 x 和 y 分量，`body`然后`body2`将其添加到 x 和 y 力分量中，`body`然后从 中减去它们`body2`。通过从 开始索引`body + 1`，我们可以在同一个内循环通道中计算两个物体上的相等和相反的力，从而将计算次数减少一半。

对于更新位置，您使用的是时间增量结束时的速度，就好像物体以增量结束时的速度移动整个增量一样。进行某种插值可能更准确，但这应该是二阶效应。

# javascript - 使用 innerHTML 向表中添加行

> ID：13002504
> 
> 赞同：4
> 
> 时间：2012-10-21T21:44:50.667
> 
> 标签：javascript, html, css

我正在从 php mysql 服务器中提取搜索数据，并希望将其显示在表格中。这是我到目前为止编写的代码。

```
function getrows(page, parameters, element_id)
{
if (parameters.length==0)
{ 
    document.getElementById(element_id).innerHTML="";
    return;
}
xmlhttp=new XMLHttpRequest();
xmlhttp.onreadystatechange=function()
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById(element_id).innerHTML=xmlhttp.responseText;
    }
}
xmlhttp.open("GET",page + "?" + parameters,true);
xmlhttp.send();
}

<table style="text-align: left; width: 0%; margin-left: auto; margin-right: auto;" border="1" cellpadding="2" cellspacing="0">
<tbody>
<tr style="background-color:#d0e4fe;">
    <td>First Name:</td>
    <td>Last Name:</td>
    <td>Date of Birth:</td>
    <td>Phone Number:</td>
    <td>Action:</td>
</tr>
<tr>
    <td><input onkeyup="getrows('actions/search_member.php', 'first_name=' + getvalue('first_name') + '&last_name=' + getvalue('last_name') + '&birth_date=' + getvalue('birth_date') + '&home_phone=' + getvalue('home_phone'), 'search');" name="first_name"></td>
    <td><input onkeyup="getrows('actions/search_member.php', 'first_name=' + getvalue('first_name') + '&last_name=' + getvalue('last_name') + '&birth_date=' + getvalue('birth_date') + '&home_phone=' + getvalue('home_phone'), 'search');" name="last_name"></td>
    <td><input onkeyup="getrows('actions/search_member.php', 'first_name=' + getvalue('first_name') + '&last_name=' + getvalue('last_name') + '&birth_date=' + getvalue('birth_date') + '&home_phone=' + getvalue('home_phone'), 'search');" name="birth_date"></td>
    <td><input onkeyup="getrows('actions/search_member.php', 'first_name=' + getvalue('first_name') + '&last_name=' + getvalue('last_name') + '&birth_date=' + getvalue('birth_date') + '&home_phone=' + getvalue('home_phone'), 'search');" name="home_phone"></td>
    <td></td>
</tr>
<div id="search"></div>
</tbody> 
```

search_member.php 根据以这种格式输入到输入中的内容返回 5 个成员的列表：

```
 <tr>
    <td>data</td>
    <td>data</td>
    <td>data</td>
    <td>data</td>
    <td>data</td>
 </tr> 
```

search_member.php 作品我已经测试过了。正如您所看到的，我试图将这些数据内部 HTML 到具有“搜索”ID 的 div 中。我认为它不起作用，因为 div 不能进入表格。我使用了 js insertRow 和 jquery，但是当您键入从 search_member.php 返回的数据时，每次都不同，并且 js insertRow 和 jquery 只是不断添加行，您会得到 500 行。我只需要一种方法，它在我的表中的最后一个 < /tr> 之后插入为 search_member.php 返回的数据。

感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:59:02.673

评论几乎暗示了这一点，但无论如何：我看不出为什么第一行在搜索之间不应该完好无损。它看起来也是使用 a 添加语义的完美案例`thead`：

```
<thead>
  <tr style="background-color:#d0e4fe;">
    <td>First Name:</td>
    <td>Last Name:</td>
    <td>Date of Birth:</td>
    <td>Phone Number:</td>
    <td>Action:</td>
  </tr>
</thead>
<tbody id="result-rows">
  <!-- the area which is populated by rows -->
</tbody> 
```

使用超过 1 个`tbody`元素是有效的 HTML5/XHTML，但恕我直言，在这种情况下没有必要。`element_id`当设置为“结果行”时，这将正常工作（注意`+=`）：

```
document.getElementById(element_id).innerHTML += xmlhttp.responseText; 
```

# unit-testing - 我可以做些什么来改进我的测试？

> ID：13002506
> 
> 赞同：2
> 
> 时间：2012-10-21T21:45:01.213
> 
> 标签：unit-testing, node.js, testing, tdd, mongoose

最近，我试图用 Mongoose 作为 MongoDB 包装器在 Node JS 中进行良好的测试驱动开发。

我的问题是我做得对吗。我是否在测试正确的东西，我是否应该做更多的测试来覆盖空值等。你认为我可以改进什么？随意批评，只要你喜欢。

**测试：**

```
var assert = require("assert"),
    mongoose = require("mongoose"),
    sugar = require("sugar"),
    Factory = require("factory-lady"),
    Timekeeper = require("timekeeper"),
    Link = require("./../app/models/link");

mongoose.connect("mongodb://localhost/link_test");

Factory.define("link", Link, {
  createdAt: new Date("2012-04-04"),
  title: "Example",
  updatedAt: new Date("2012-04-05"),
  url: "http://www.example.com"
});

describe("Link", function() {

  describe("validation for", function() {

    ["url", "title"].forEach(function(property) {
      it("must have a " + property, function(done) {
        Factory.build("link", function(link) {
          link[property] = null;
          link.validate(function(err) {
            assert.notEqual(err, null);
            assert.notEqual(err.errors[property], null);
            done();
          });
        });
      });
    });

    it("should default the title to url if missing", function(done) {
      Factory.build("link", function(link) {
        link.title = undefined;
        link.validate(function(err) {
          assert.equal(link.title, link.url);
          done();
        });
      });
    });

    describe("url", function() {

      ["http://example.com", "http://www.example.com",
       "http://nodejs.org/api/assert.html#assert_assert_deepequal_actual_expected_message"].forEach(function(url) {
        it(url + " should be valid url", function(done) {
          Factory.build("link", { url: url }, function(link) {
            link.validate(function(err) {
              assert.equal(err, null);
              done();
            });
          });
        });
      });

      ["Invalid url", "example.com"].forEach(function(url) {
        it(url + " should be invalid url", function(done) {
          Factory.build("link", { url: url }, function(link) {
            link.validate(function(err) {
              assert.notEqual(err, null);
              assert.notEqual(err.errors.url, null);
              done();
            });
          });
        });
      });

    });

    describe("missing createdAt or updatedAt", function() {

      beforeEach(function() {
        Timekeeper.freeze(new Date());
      });

      afterEach(function() {
        Timekeeper.reset();
      });

      ["createdAt", "updatedAt"].forEach(function(property) {
        it("should default the " + property + " to now if missing", function(done) {
          Factory.build("link", function(link) {
            link[property] = undefined;
            link.validate(function(err) {
              assert.deepEqual(link[property], new Date());
              done();
            });
          });
        });
      });

      ["createdAt", "updatedAt"].forEach(function(property) {
        it("should leave the " + property + " unchanged if it's given", function(done) {
          Factory.build("link", function(link) {
            var date = new Date("2012-01-01");
            link[property] = date;
            link.validate(function(err) {
              assert.deepEqual(link[property], date);
              done();
            });
          });
        });
      });

      it("should default the updatedAt to now if missing when performing an update", function(done) {
        Factory("link", function(link) {
          link.validate(function(err) {
            assert.equal(link.updatedAt, new Date());
            done();
          });
        });
      });

      it("should leave the updatedAt unchanged if it's given when performing an update", function(done) {
        Factory("link", function(link) {
          var date = new Date("2012-01-01");
          link.updatedAt = date;
          link.validate(function(err) {
            assert.deepEqual(link.updatedAt, date);
            done();
          });
        });
      });

    });

  });

}); 
```

**模型：**

```
var mongoose = require("mongoose"),
    Schema = mongoose.Schema;

var linkSchema = new Schema({
  createdAt: { type: Date, required: true },
  title: { type: String, required: true },
  updatedAt: { type: Date, required: true },
  url: { type: String, required: true, validate: [validUrl, "invalid url"] }
});

function validUrl(url) {
  if ((url instanceof String || typeof url == 'string') && url.length) {
    return url.match(/^\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))$/i); 
  }
}

linkSchema.pre("validate", function (next) {
  if (typeof this.title === "undefined" && typeof this.url !== "undefined") {
    this.title = this.url;
  }
  if (typeof this.createdAt === "undefined") {
    this.createdAt = new Date();
  }
  if (typeof this.updatedAt === "undefined" || !this.isModified("updatedAt")) {
    this.updatedAt = new Date();
  }
  next();
});

module.exports = mongoose.model("Link", linkSchema); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:20:20.767

总而言之，您的测试似乎涵盖了代码。也许您可以添加更多 URL 来更好地测试*validUrl*函数。

通常，要完成的测试量取决于您的需求。是否需要更多测试取决于很多因素，例如：您对代码的信心、可能接触并“破坏”代码的人数、整个系统的大小和复杂性、代码的用户（他们是您团队的成员还是外部人员？）、数据来源（在到达您的代码之前是否经过验证？）以及您的偏执程度。没有万能的答案。

# c# - 如何在 Main 中调用异步方法？

> ID：13002507
> 
> 赞同：102
> 
> 时间：2012-10-21T21:45:03.310
> 
> 标签：c#, asynchronous, async-await, task

```
public class test
{
    public async Task Go()
    {
        await PrintAnswerToLife();
        Console.WriteLine("done");
    }

    public async Task PrintAnswerToLife()
    {
        int answer = await GetAnswerToLife();
        Console.WriteLine(answer);
    }

    public async Task<int> GetAnswerToLife()
    {
        await Task.Delay(5000);
        int answer = 21 * 2;
        return answer;
    }
} 
```

如果我想在 main() 方法中调用 Go，我该怎么做？我正在尝试 c# 的新功能，我知道我可以将异步方法挂钩到一个事件，并通过触发该事件，可以调用异步方法。

但是如果我想直接在 main 方法中调用它呢？我怎样才能做到这一点？

我做了类似的事情

```
class Program
{
    static void Main(string[] args)
    {
        test t = new test();
        t.Go().GetAwaiter().OnCompleted(() =>
        {
            Console.WriteLine("finished");
        });
        Console.ReadKey();
    }

} 
```

但似乎这是一个死锁，屏幕上没有打印任何内容。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-10-22T00:07:51.587

你的`Main`方法可以简化。对于 C# 7.1 和更新版本：

```
static async Task Main(string[] args)
{
    test t = new test();
    await t.Go();
    Console.WriteLine("finished");
    Console.ReadKey();
} 
```

对于 C# 的早期版本：

```
static void Main(string[] args)
{
    test t = new test();
    t.Go().Wait();
    Console.WriteLine("finished");
    Console.ReadKey();
} 
```

这是`async`关键字（和相关功能）之美的一部分：回调的使用和混淆性质大大减少或消除。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-03-08T11:01:00.233

最好不要使用 Wait， `new test().Go().GetAwaiter().GetResult()` 因为这样可以避免将异常包装到 AggregateExceptions 中，因此您可以像往常一样用 try catch(Exception ex) 块包围您的 Go() 方法。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2017-07-28T08:49:57.537

由于 C# v7.1`async` `main`方法的发布已经可以使用，这避免了对已经发布的答案中的变通方法的需要。添加了以下签名：

```
public static Task Main();
public static Task<int> Main();
public static Task Main(string[] args);
public static Task<int> Main(string[] args); 
```

这使您可以像这样编写代码：

```
static async Task Main(string[] args)
{
    await DoSomethingAsync();
}

static async Task DoSomethingAsync()
{
    //...
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-12-06T01:19:42.360

```
class Program
{
    static void Main(string[] args)
    {
       test t = new test();
       Task.Run(async () => await t.Go());
    }
} 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2017-06-26T19:55:38.663

只要您从返回的任务中访问结果对象，就根本不需要使用 GetAwaiter（仅在您访问结果的情况下）。

```
static async Task<String> sayHelloAsync(){

       await Task.Delay(1000);
       return "hello world";

}

static void main(string[] args){

      var data = sayHelloAsync();
      //implicitly waits for the result and makes synchronous call. 
      //no need for Console.ReadKey()
      Console.Write(data.Result);
      //synchronous call .. same as previous one
      Console.Write(sayHelloAsync().GetAwaiter().GetResult());

} 
```

如果您想等待任务完成并进行进一步处理：

```
sayHelloAsyn().GetAwaiter().OnCompleted(() => {
   Console.Write("done" );
});
Console.ReadLine(); 
```

如果您有兴趣从 sayHelloAsync 获取结果并对其进行进一步处理：

```
sayHelloAsync().ContinueWith(prev => {
   //prev.Result should have "hello world"
   Console.Write("done do further processing here .. here is the result from sayHelloAsync" + prev.Result);
});
Console.ReadLine(); 
```

等待函数的最后一种简单方法：

```
static void main(string[] args){
  sayHelloAsync().Wait();
  Console.Read();
}

static async Task sayHelloAsync(){          
  await Task.Delay(1000);
  Console.Write( "hello world");

} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-04-07T15:09:33.590

```
public static void Main(string[] args)
{
    var t = new test();
    Task.Run(async () => { await t.Go();}).Wait();
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-07-20T14:35:05.837

**使用 .Wait()**

```
static void Main(string[] args){
   SomeTaskManager someTaskManager  = new SomeTaskManager();
   Task<List<String>> task = Task.Run(() => marginaleNotesGenerationTask.Execute());
   task.Wait();
   List<String> r = task.Result;
} 

public class SomeTaskManager
{
    public async Task<List<String>> Execute() {
        HttpClient client = new HttpClient();
        client.BaseAddress = new Uri("http://localhost:4000/");     
        client.DefaultRequestHeaders.Accept.Clear();           
        HttpContent httpContent = new StringContent(jsonEnvellope, Encoding.UTF8, "application/json");
        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
        HttpResponseMessage httpResponse = await client.PostAsync("", httpContent);
        if (httpResponse.Content != null)
        {
            string responseContent = await httpResponse.Content.ReadAsStringAsync();
            dynamic answer = JsonConvert.DeserializeObject(responseContent);
            summaries = answer[0].ToObject<List<String>>();
        }
    } 
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-21T21:29:38.980

**C# 9 顶级语句**进一步简化了事情，现在你甚至不需要做任何额外的事情来调用`async`你的方法`Main`，你可以这样做：

```
using System;
using System.Threading.Tasks;

await Task.Delay(1000);
Console.WriteLine("Hello World!"); 
```

有关更多信息，请参阅[C# 9.0 中的新增功能，顶级语句](https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-9#top-level-statements)：

> 顶级语句可能包含异步表达式。在这种情况下，综合入口点返回 a`Task`或`Task<int>`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-13T05:16:30.050

尝试“结果”属性

```
class Program
{
    static void Main(string[] args)
    {
        test t = new test();
        t.Go().Result;
        Console.ReadKey();
    }
} 
```

# salesforce - salesforce 电子邮件服务/顶点限制

> ID：13002514
> 
> 赞同：0
> 
> 时间：2012-10-21T21:46:01.217
> 
> 标签：salesforce, apex-code

我们的订单数据库正在尝试通过电子邮件服务向客户对象发送到顺丰的订单。由于我们组织的 SF 每日限制为 5,000 个，并且某些日子的订单数量超过 5,000 个，我们将代码调整为我们可以在一封电子邮件中获得超过 1 个订单的位置。

问题是一封电子邮件中的 1-10 个订单可以正常工作。如果 > 10，则不快乐。在代码中找不到会发生这种情况的任何地方。

代码块相当大，所以这里是文件的 .txt。..这是与电子邮件服务关联的顶级类。

[https://www.dropbox.com/s/rz5zbhf7q7yku0w/apex.txt](https://www.dropbox.com/s/rz5zbhf7q7yku0w/apex.txt)

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:49:25.250

虽然我不能在不运行您的代码的情况下具体说明，但我倾向于认为您正在达到州长限制，要么

1) 运行查询数量的限制——主循环中有很多 SOQL 查询

2）执行的脚本语句的总数——不太可能，但你正在对字段等进行大量处理。

我会从执行匿名运行此代码，并为其提供虚拟数据，这样如果您达到上述限制之一，您应该会看到一条错误消息。

# android - 如何读取 JSON 提要以填充一维数组？

> ID：13002522
> 
> 赞同：0
> 
> 时间：2012-10-21T21:46:51.053
> 
> 标签：android, json, arraylist

我正在尝试将 JSON 提要中包含的值读入一维数组 - 数组元素将 ShowProgress、Orange、Blue 和 Target 的值存储到 Progress 类数组中。然后我想用这些来更新进度条（见第三个代码部分）。我无法提取这些值（也许它们没有被设置？）：

这是提要的样子（它通过 JSONlint）：

```
{
"ShowProgress": {
"ShowProgress": "TRUE",
"Orange": "0",
"Blue": "0",
"Target": "18"
 }
 } 
```

这个例程是我似乎无法正确读取数组值的地方，rem 语句表明我怀疑的地方：

```
public class FetchProgress extends AsyncTask<OpportunityActivity, Void, ArrayList<String>> {
private OpportunityActivity opportunityActivity;

@Override
protected ArrayList doInBackground(OpportunityActivity... activity) {

    // This may be incorrect - I don't want a two dimensional
    // just a one dimensional array
opportunityActivity = activity[0];

    ArrayList<Progress> progresses = new ArrayList<Progress>();
    String readFeed = readFeed();

    try {           
    JSONObject json = new JSONObject(readFeed);            
    JSONArray jsonArray = new JSONArray(json.optString("ShowProgress"));              
Progress progress = new Progress();                    
progress.setTarget(jsonArray.optInt("Target"));            
    } catch (Exception e) {
      e.printStackTrace();
    } 
```

此例程读取 JSON：

```
 public String readFeed() {
    StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();      

    SharedPreferences settings =     
    PreferenceManager.getDefaultSharedPreferences(opportunityActivity);        
    HttpGet httpGet = new HttpGet("https://www.webfeedurl.com/stuff.php");
    try 
 {
      HttpResponse response = client.execute(httpGet);
      StatusLine statusLine = response.getStatusLine();
      int statusCode = statusLine.getStatusCode();
      if (statusCode == 200) {
        HttpEntity entity = response.getEntity();
        InputStream content = entity.getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(content));
        String line;

        int a=0;
        while ((line = reader.readLine()) != null) {
          builder.append(line);
        a++;
        }
      } else {
        Log.e(MainActivity.class.toString(), "Failed to download file");
      }
    } catch (ClientProtocolException e) {
      e.printStackTrace();
    } catch (IOException e)
 {
      e.printStackTrace();
    }
    return builder.toString();
  } 
```

最后回到 OpportunityActivity 我想使用数组中的值来设置我的 ProgressBar：

```
public void updateProgress(ArrayList<Progress> progress) {
    ProgressBar progressHours  = (ProgressBar)findViewById(R.id.progressHours);      
    // How do I get the array list variables out to set my progress bar....
    // The next line is wrong 
    progressHours.setProgress(progress.getTarget());
} 
```

这是类文件：（我试图读取的变量不仅仅是目标，因此我使用的是数组）。

```
public class Progress {

private int target;

public int getTarget() {
    return target;
}

public void setTarget(int target) {
    this.target = target;
} 
```

}

# winapi - Visual Studio 2012 - 我想摆脱的一些“继承值”

> ID：13002524
> 
> 赞同：1
> 
> 时间：2012-10-21T21:46:58.710
> 
> 标签：winapi, visual-c++, visual-studio-2012

我想知道如何在 Visual Studio 2012 的属性页中处理“继承值”。在我的项目中，我决定要使用预编译的头文件，所以很自然地，我尝试从扩展列表中删除 *.pch 以在 Clean 上删除。但是，事实证明，当我尝试编辑此属性时，它在许多其他扩展名中被列在只读的“继承值”框下。

“从父级或项目默认值继承”未勾选，但没有区别。尽管如此，当我清理解决方案时，我的 .pch 文件被删除了。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:54:42.100

如果您使用传统的 PCH 语义设置 PCH，则使用一个文件来生成 PCH（通常为 stdafx.cpp），其余的源文件将从该创建中受益。如果是这种情况，那么您遇到的是删除“创建者”源的 .obj 强制重建“生成器”.cpp 文件，这意味着 PCH 也将被重建。PCH 是隐式的添加到“生成器”源的输出目标中，并且根据定义，当给定源目标被“清理”时，所有输出目标都将被删除

换句话说，PCH 正在重建，因为生成它的源文件也在重建，并且因为 Clean 删除了生成 .obj 的源文件。

顺便说一下，这是干净的预期行为。

# php - Mysql 事务，在第二个和第三个查询中都使用 LAST_INSERT_ID()？

> ID：13002526
> 
> 赞同：1
> 
> 时间：2012-10-21T21:47:11.560
> 
> 标签：php, mysql, transactions

我正在使用此查询将数据插入两个不同的表中：

```
 $query1="INSERT INTO node (cid, title) VALUES('$cid','$title')";
    $query2="INSERT INTO location (nid, street, city, state) VALUES(LAST_INSERT_ID(),'$address', '$city','$state')";
    $result = FALSE;
    if (mysql_query('BEGIN')) {
        if (mysql_query($query1) &&
        mysql_query($query2))
        $result = mysql_query('COMMIT'); // both queries looked OK, save
        else
        mysql_query('ROLLBACK'); // problems with queries, no changes
    } 
```

基本上，第一个查询将数据扔到节点表中，节点表又增加了一个 NID 字段。此 NID 用于第二个查询（我的位置表）。

现在我稍微改变了我的网站，我还想将相同的 NID 插入到第三个表中。问题是第二个查询（位置表）也有一个自动增量的 ID 列（LID），所以如果我尝试使用 last_insert_ID，它只会给我 LID 而不是 NID。

我在想我可以在事务之外进行第三次查询，在那里我将查询数据库并获取正确的 nid，但我想将其保留在事务中以防止任何混淆。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:05:22.287

该功能`LAST_INSERT_ID()`只保证工作一次。

最佳做法是使用`SELECT LAST_INSERT_ID()`或使用`mysqli_insert_id()`. 然后，您可以将其插入到以后的查询中而不受惩罚。

# c# - 在 Silverlight 中引用 CLR 类库

> ID：13002527
> 
> 赞同：1
> 
> 时间：2012-10-21T21:47:24.517
> 
> 标签：c#, silverlight, clr, class-library

我有一个 Silverlight 项目和一个 C# CLR 类库项目。问题是我无法将类库的引用添加到 Silverlight 项目（因为它不是 silverlight 程序集）。有什么办法可以在我的 silverlight 应用程序中使用类库吗？有没有办法将类库编译成 silverlight 程序集，或者我可以添加一个中间项目...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T00:05:27.357

只要您的目标至少是 Silverlight 4，就可以让您的类库成为[Portable Class Library](http://msdn.microsoft.com/en-us/library/gg597391%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:43:02.757

您可以创建 Silverlight 项目，并将文件链接添加到您的原始项目。如果 .NET4 中的某些功能在 Silverlight 中不可用，您可以使用 #if SILVERLIGHT 对其进行测试并将其注释掉。

# asp.net - 您无权使用批量加载语句

> ID：13002529
> 
> 赞同：28
> 
> 时间：2012-10-21T21:47:37.040
> 
> 标签：asp.net, sql-server

嗨，我收到了错误

> 您没有使用批量加载语句的权限。

当我尝试执行存储过程时。

我看到一些网站提到了这个`bulkadmin`角色，但我没有看到。

我正在使用 SQL Server 2008。

有任何想法吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-21T22:13:19.900

*   启动 SQL Server 管理工作室
*   展开安全->登录
*   找到您的用户，右键单击它并选择属性
*   打开服务器角色选项卡
*   确保`bulkadmin`已选中。
*   如果`bulkadmin`不适合您，您可以在那里尝试其他角色。
*   点击确定:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-05T09:37:03.843

Aleksandr 回答的查询版本：

```
EXEC master..sp_addsrvrolemember @loginame = N'%userName%', @rolename = N'bulkadmin'
GO 
```

只需替换`%userName%`为所需的用户。此外，您需要以 Sys-Admin ( `sa`) 或其他具有`EXEC`权限并`bulkadmin`授予权限的用户身份登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-20T07:09:17.173

您可以向用户提供解决此问题的权限。

1.  转到 MS SQL 服务器管理并连接到 db。
2.  在对象资源管理器中，转到安全性，然后登录。
3.  查找您的用户并右键单击它。
4.  “登录属性”弹出窗口将打开
5.  单击“服务器角色”并选中“bulkadmin”。现在，如果您再次尝试执行，您一定不会收到错误消息。

来源：[http ://sforsuresh.in/asp-net-mvc-4-not-permission-use-bulk-load-statement](http://sforsuresh.in/asp-net-mvc-4-not-permission-use-bulk-load-statement)

# python - Python 3：将字符串转换为变量

> ID：13002530
> 
> 赞同：2
> 
> 时间：2012-10-21T21:47:37.673
> 
> 标签：python, string, class, variables, python-3.x

我正在从 .txt 文件中读取文本，并且需要使用我读取的数据之一作为类实例的变量。

```
 class Sports:
        def __init__(self,players=0,location='',name=''):
            self.players = players
            self.location = location
            self.name = name
        def __str__(self):
            return  str(self.name) + "is played with " + str(self.players) + " players per team on a/an " + self.location + "."

    def makeList(filename):
        """
        filename -- string
        """
        sportsList = []
        myInputFile = open(filename,'r')
        for line in myInputFile:
            record = myInputFile.readline()
            datalist = record.split()
            sportsList.append(datalist[0])
            datalist[0] = Sports(int(datalist[1]),datalist[2],datalist[3])        
        myInputFile.close()
        print(football.players)

    makeList('num7.txt') 
```

我需要将 datalist[0]（它是一个字符串）转换为一个变量名（基本上没有引号），以便它可以用来创建该名称的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T00:32:30.977

在开始之前，我必须说创建这样的变量是一种非常糟糕（并且有潜在危险）的编码实践。很多事情都可能出错，而且很容易忘记您自发创建的名称。此外，这样的代码很难维护。

但是，对于*必须*从字符串创建变量的千载难逢的情况，您可以执行以下操作：

```
>>> a="b"
>>> exec(a+"=1")
>>> print(b)
1
>>> 
```

因此，在您的代码中，您可以执行以下操作：

```
exec(datalist[0]+"= Sports(int(datalist[1]),datalist[2],datalist[3])") 
```

再一次，这是一个非常 hackish 的解决方案，不应该在 99% 的时间内使用。但是，为了 1% 完全不正常的场景，我想证明它是*可以*做到的。

# directx - 无法在 Visual Studio 中加载 Windows 8 SDK 示例？

> ID：13002533
> 
> 赞同：2
> 
> 时间：2012-10-21T21:47:46.490
> 
> 标签：directx, visual-studio-2012, winapi

我正在尝试加载 Windows 8 sdk 示例附带的 directx 示例。起初 VS2010 告诉我解决方案是用较新版本的 Visual Studio 创建的，所以我安装了 VS2012 Express。现在，当我尝试在 VS2012 中加载示例时，我收到以下错误，它不会加载项目。

[http://i.imgur.com/dEWSI.png](http://i.imgur.com/dEWSI.png)

我正在尝试加载凹凸贴图示例，但它发生在所有示例上，这不是我从中加载它们的目录，我只是从项目文件夹或桌面加载它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-27T19:19:19.030

您没有说明您使用的是哪个操作系统，但我怀疑问题是您正试图在 Windows 7 上安装的 VS 2012 上加载 Windows Store 应用程序示例。您必须拥有 Windows 8.x 才能构建 Windows Store 应用程序。

实际上，您可以使用 VS 2012 和 Windows 8.0 SDK（以及 VS 2013 和 Windows 8.1 SDK）来构建 Win32 桌面。请记住几件事：

*   您需要 VS 2012 或 VS 2013 Express for Windows Desktop 或更高版本（即不是仅支持 Windows 8.x 上的 Windows Store 应用程序的“for Windows”版本
*   您需要在预处理器定义中将 _WIN32_WINNT 设置为 0x0601（Windows 7 或更高版本）或 0x0600（Windows Vista 或更高版本）。否则，您构建的应用程序可能正在使用 Windows 8.x 或更高版本的 API。请参阅[使用 Windows 标头](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383745%28v=vs.85%29.aspx)
*   如果您在 VS 2012/2013 中使用旧版 DirectX SDK，则需要确保使用正确的 include/lib 路径顺序。请参阅[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663275.aspx)。
*   如果您需要 Windows XP 支持，则不能使用 Windows 8.0 SDK。当您在 VS 2012/2013 中使用“v110_xp”或“v120_xp”平台工具集设置时，您实际上使用的是 Windows 7.1 SDK。使用 XP 工具集时，您必须使用旧的 DirectX SDK。请参阅此[博客](http://blogs.msdn.com/b/chuckw/archive/2012/11/26/visual-studio-2012-update-1.aspx)文章。

理想情况下，您应该完全停止使用旧版 DirectX SDK。如果您使用 Direct3D 11 并针对 Windows Vista 或更高版本，您有很多选择：[D3DX 替换](http://blogs.msdn.com/b/chuckw/archive/2013/08/21/living-without-d3dx.aspx)、[Win32 桌面示例](http://blogs.msdn.com/b/chuckw/archive/2013/09/20/directx-sdk-samples-catalog.aspx)、[DXUT](http://blogs.msdn.com/b/chuckw/archive/2013/09/14/dxut-for-win32-desktop-update.aspx)和[FX11](http://blogs.msdn.com/b/chuckw/archive/2012/10/24/effects-for-direct3d-11-update.aspx)更新等。需要旧版 Direct SDK 的两个地方是 Windows Vista 上的 XAudio2 或Windows 7 和 D3DX9。

# ruby-on-rails-3 - 复杂的查找 SQL 使用活动记录将来自两个不同表的记录与 has_many 关系相关联

> ID：13002537
> 
> 赞同：0
> 
> 时间：2012-10-21T21:48:18.720
> 
> 标签：ruby-on-rails-3, activerecord, model, associations, single-table-inheritance

我一直在网上寻找解决方案，但无济于事。我正在解决一个问题，我们在 has_many 关联中有两个表，这里是模型名称

```
 class Employee < ActiveRecord::Base     # main table stores all the employee details
       has_many :work_orders
       attributes :id, :name

 class WorkOrder < ActiveRecord::Base   # Work Orders are created by a form
       belongs_to :employee
       attributes :id, :work_details, :employee_id 
```

软件规范是为 WorkOrders 创建一个表单，由一个单独的实体提及所有工作细节（假设一个客户**，因此在保存表单细节时，employee_id 为 nil** ）。此时，在数据库中保存 WorkOrder 的详细信息后，我们需要触发一个自动调度系统，该系统将自动分配具有最少 work_orders 数量的员工，并按以下顺序提供优先权；

### 没有关联 WorkOrders 的员工（第一个条件，如果未找到，则为下一个）

### 他正在工作的关联 WorkOrder 数量最少的员工（或第二个条件）

我正在尝试使用活动记录将上述条件耦合到一个 FIND SQL 中，该活动记录将返回一个**只有一个员工记录**的集合，以便我们可以将 employee.id 与这个新工作订单的 work_orders.employee_id 相关联。

我编写了一个管理面板来查找所有没有关联employee_id 的work_orders，并且可以通过手动提供employee.id（使用上述首选项）来使用下一个可用员工更新work_orders 记录，但我想在某种程度上自动执行此操作。

任何建议或伪代码会有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:37:52.103

select a.id, count(b.employee_id) from employees a left join work_orders b on a.id = b.employee_id group by a.id, b.employee_id order by count(a.id), a.id

此查询将为您提供最少使用的员工。

简单的翻译是：（根据您的要求添加您自己的订单） Employee.joins("left join work_orders on work_orders.employee_id = employees.id").group("employees.id, work_orders.employee_id")

# c - 串行代码比在 C 中只使用一个线程慢得多？

> ID：13002540
> 
> 赞同：6
> 
> 时间：2012-10-21T21:48:25.333
> 
> 标签：c, multithreading, parallel-processing

所以，我正在用线程做一些基准测试，我写了这些代码：

resp_threadless[] 和 resp_threaded[] 是全局 int 数组，它们的大小为 n；

```
int n = 100000;

void function() {
  for (long j = 0; j < n; ++j) {
    int count = 0;
    double x = vetor[j];
      while (x > 1.0) {
      x = sqrt(x);
      ++count;
    }
   resp_threadless[j] = count;
  }
}

DWORD WINAPI function_th( LPVOID lpParam ) {
for (long j = 0; j < n; ++j) {
    int count = 0;
    double x = vetor[j];
      while (x > 1.0) {
      x = sqrt(x);
      ++count;
    }
   resp_threadless[j] = count;
  }
} 
```

我只打电话给她就对第一个函数进行了基准测试：

```
function(); 
```

第二个是这样的：

```
HANDLE hThreadArray[1];
DWORD dwThreads[1];
hThreadArray[0] = CreateThread(NULL, 0, function_th, NULL , 0, &(dwThreads[0]));
WaitForMultipleObjects(1, hThreadArray, TRUE, INFINITE);
CloseHandle(hThreadArray[0]); 
```

请记住，我知道使用 function_th() 调用多个线程不会并行化它，这只是一个测试，因为我得到了非常奇怪的结果，所以我决定看看使用相同代码的一个线程和一个函数会发生什么.

我在 Intel Atom N270 和 NUMPROC = 1 的 windows XP 中对此进行了测试。

结果：序列号：1485 毫秒一个线程：425 毫秒

我使用多处理器机器得到了类似的结果，甚至使用信号量来并行化线程完成的工作的代码也是如此。

有谁知道会发生什么？

**编辑**

颠倒顺序，每次运行多次，等等... -> 没有变化

更高的 N -> 线程一按比例更快

使用 QueryPerformanceCounter() -> 没有变化

线程创建开销 -> 应该使线程更慢，而不是更快

原代码： http: [//pastebin.com/tgmp5p1G](http://pastebin.com/tgmp5p1G)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:56:03.650

这是一个`cache hit`问题。我怀疑您按照您在问题中描述的顺序进行了基准测试。首先调用函数，然后调用线程。当您更详细地对其进行基准测试时，您将观察到原因：数据（sqrt）在缓存中可用，因此代码将执行得更快。 **测试证明：**

1.  在调用线程之前运行`function()`两次甚至更多次。第二次调用函数将给出更快的结果。
2.  在函数之前调用线程，您的结果将显示相反的结果。该功能将显示更好的结果。

原因：所有 sqrt 计算（或至少其中很多）都在缓存中可用，不必重新计算。这要快得多。

# reporting-services - 如何在 SSRS 中构建带有嵌套子报表的报表

> ID：13002545
> 
> 赞同：1
> 
> 时间：2012-10-21T21:49:15.000
> 
> 标签：reporting-services, subreport

我正在寻找使用报表生成器构建 SSRS 2008 R2 报表，这样如果单击报表行中的单元格，它会导致迄今为止隐藏的子报表变得可见，并填充从使用参数的查询中检索到的数据单击的单元格行中的值。

为了进一步解释，在单击之前报告应该如下所示：

```
|  Column 1  |  Column 2  |  Column 3  |  Column 4  |
|Row 1 Col 1 |Row 1 Col 2 |Row 1 Col 3 |Row 1 Col 4 |
|Row 2 Col 1 |Row 2 Col 2 |Row 2 Col 3 |Row 2 Col 4 |
|Row 3 Col 1 |Row 3 Col 2 |Row 3 Col 3 |Row 3 Col 4 |
|Row 4 Col 1 |Row 4 Col 2 |Row 4 Col 3 |Row 4 Col 4 | 
```

然后点击 后，应该会出现数据 from to`Row 1 Col 1`的子报表，如下所示：`Row A Col A``Row D Col D`

```
|  Column 1  |  Column 2  |  Column 3  |  Column 4  |
|Row 1 Col 1 |Row 1 Col 2 |Row 1 Col 3 |Row 1 Col 4 |
    |  Column A  |  Column B  |  Column C  |  Column D  |
    |Row A Col A |Row A Col B |Row A Col C |Row A Col D |
    |Row B Col A |Row B Col B |Row B Col C |Row B Col D |
    |Row C Col A |Row C Col B |Row C Col C |Row C Col D |
    |Row D Col A |Row D Col B |Row D Col C |Row D Col D |
|Row 2 Col 1 |Row 2 Col 2 |Row 2 Col 3 |Row 2 Col 4 |
|Row 3 Col 1 |Row 3 Col 2 |Row 3 Col 3 |Row 3 Col 4 |
|Row 4 Col 1 |Row 4 Col 2 |Row 4 Col 3 |Row 4 Col 4 | 
```

子报表中的数据将根据 中的值从查询中填充`Row 1`。

谁能指出我在哪里可以找到如何做到这一点，或者建议我如何做到这一点？在SSRS中甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:25:26.303

此[CodeProject 示例](http://www.codeproject.com/Articles/195017/SSRS-Series-Part-II-Working-with-Subreports-DrillD)展示了如何设置子报表。我认为您想要的示例是下[钻](http://www.codeproject.com/Articles/195017/SSRS-Series-Part-II-Working-with-Subreports-DrillD#5)报告。

# javascript - 在表格单元格中拖动图像并跟踪其位置

> ID：13002546
> 
> 赞同：1
> 
> 时间：2012-10-21T21:49:46.563
> 
> 标签：javascript, jquery, ajax, html

我想拖动表格单元格中的图像。如何修改以下内容，以便可以将一个图像拖到另一个图像之上：

```
function drag(ob) {
ob.dataTransfer.setData("Text",ob.target.id); }

function drop(ob) {
var id = ob.dataTransfer.getData("Text");
if (!$(ob.currentTarget).find("img")[0])
    ob.target.appendChild(document.getElementById(id));
ob.preventDefault();    
}

function allowDrop(ob) {
  ob.preventDefault();
} 
```

[jsfiddle](http://jsfiddle.net/blueberrymuffin/qgp7N/2/)上的完整代码

另外，是否有可能在 drop 函数中有一些代码显示所有图像的文件名（从第 1 行到第 3 行），以便我可以将其传递给 php 进行处理？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:10:18.467

我不完全确定您要达到的目标。但这将允许图像相互拖动并删除替换的图像。还有一个小 div 显示如何跟踪图像名称。

我添加了一个 div 来跟踪名称。您可以轻松地将其设为隐藏字段。

```
<div id="images"></div> 
```

然后将 drop 更改为：

```
function drop(ob)
{
    var id = ob.dataTransfer.getData("Text");
    var t = ob.target;

    if (ob.target.nodeName == "IMG")
        t = ob.target.parentNode;

    t.innerHTML = "";
    var img = document.getElementById(id);
    t.appendChild(img);

    $('#images').append(img.src + "; " )

    ob.preventDefault();    
} 
```

[http://jsfiddle.net/qgp7N/3/](http://jsfiddle.net/qgp7N/3/)

# android - Android httpPost 带参数和文件

> ID：13002547
> 
> 赞同：28
> 
> 时间：2012-10-21T21:49:49.023
> 
> 标签：android, file, post, parameters

我需要将一些数据上传到 PHP 服务器。我可以使用参数发布：

```
String url = "http://yourserver";

HttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(url);
nameValuePairs.add(new BasicNameValuePair("user", "username"));
nameValuePairs.add(new BasicNameValuePair("password", "password"));
try {
    httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    httpClient.execute(httpPost);
} 
```

我还可以上传文件：

```
String url = "http://yourserver";
File file = new File(Environment.getExternalStorageDirectory(),
        "yourfile");
try {
    HttpClient httpclient = new DefaultHttpClient();

    HttpPost httppost = new HttpPost(url);

    InputStreamEntity reqEntity = new InputStreamEntity(
            new FileInputStream(file), -1);
    reqEntity.setContentType("binary/octet-stream");
    reqEntity.setChunked(true); // Send in multiple parts if needed
    httppost.setEntity(reqEntity);
    HttpResponse response = httpclient.execute(httppost);
    //Do something with response...
} 
```

但是我怎么能把它放在一起呢？我需要在一篇文章中上传图片和参数。谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-21T22:21:40.810

您必须使用 MultipartEntity。在线查找并下载这两个库：**httpmime-4.0.jar**和**apache-mime4j-0.4.jar**，然后您可以根据需要附加任意数量的内容。以下是如何使用它的示例：

```
HttpPost httpost = new HttpPost("URL_WHERE_TO_UPLOAD");
MultipartEntity entity = new MultipartEntity();
entity.addPart("myString", new StringBody("STRING_VALUE"));
entity.addPart("myImageFile", new FileBody(imageFile));
entity.addPart("myAudioFile", new FileBody(audioFile));
httpost.setEntity(entity);
HttpResponse response;
response = httpclient.execute(httpost); 
```

对于服务器端，您可以使用这些实体标识符名称`myImageFile`和.`myString``myAudioFile`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-21T22:22:31.613

您必须使用多部分 http 帖子，就像在 HTML 表单中一样。这可以通过一个额外的库来完成。有关完整示例，请参阅[使用 Http Post 发送图像一文。](https://stackoverflow.com/questions/2935946/sending-images-using-http-post)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-30T10:23:21.787

这对我来说就像魅力：

```
public int uploadFile(String sourceFileUri) {  

    String fileName=sourceFileUri;
    HttpURLConnection conn = null;
    DataOutputStream dos = null;  
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary = "------hellojosh";
    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 1 * 1024 * 1024; 
    File sourceFile = new File(fileName); 
    Log.e("joshtag", "Uploading: sourcefileURI, "+fileName);

    if (!sourceFile.isFile()) {                                
         Log.e("uploadFile", "Source File not exist :"+appSingleton.getInstance().photouri);//FullPath);                
         runOnUiThread(new Runnable() {
            public void run() {             
                //messageText.setText("Source File not exist :"
                }
            });          
         return 0;  //RETURN #1
         }
    else{
        try{                

             FileInputStream fileInputStream = new FileInputStream(sourceFile);           
             URL url = new URL(upLoadServerUri);
             Log.v("joshtag",url.toString());

             // Open a HTTP  connection to  the URL
             conn = (HttpURLConnection) url.openConnection(); 
             conn.setDoInput(true); // Allow Inputs
             conn.setDoOutput(true); // Allow Outputs
             conn.setUseCaches(false); // Don't use a Cached Copy            s       
             conn.setRequestMethod("POST");                     
             conn.setRequestProperty("Connection", "Keep-Alive");
             conn.setRequestProperty("ENCTYPE", "multipart/form-data");
             conn.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);     
             conn.setRequestProperty("file", fileName);                     
             conn.setRequestProperty("user", user_id));

             dos = new DataOutputStream(conn.getOutputStream());  
             //ADD Some -F Form parameters, helping method
             //... is declared down below
             addFormField(dos, "someParameter", "someValue");

             dos.writeBytes(twoHyphens + boundary + lineEnd); 
             dos.writeBytes("Content-Disposition: form-data; name=\"file\";filename=\"" + fileName + "\"" + lineEnd);                    
             dos.writeBytes(lineEnd);      

             // create a buffer of  maximum size
             bytesAvailable = fileInputStream.available();           
             bufferSize = Math.min(bytesAvailable, maxBufferSize);
             buffer = new byte[bufferSize];         
             // read file and write it into form...
             bytesRead = fileInputStream.read(buffer, 0, bufferSize);   

             while (bytesRead > 0) {                        
                    dos.write(buffer, 0, bufferSize);
                    bytesAvailable = fileInputStream.available();
                    bufferSize = Math.min(bytesAvailable, maxBufferSize);
                    bytesRead = fileInputStream.read(buffer, 0, bufferSize);
                    Log.i("joshtag","->");
                    }

             // send multipart form data necesssary after file data...
             dos.writeBytes(lineEnd);
             dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

             // Responses from the server (code and message)
             serverResponseCode = conn.getResponseCode();
             String serverResponseMessage = conn.getResponseMessage().toString();              
             Log.i("joshtag", "HTTP Response is : "  + serverResponseMessage + ": " + serverResponseCode);  

             // ------------------ read the SERVER RESPONSE
             DataInputStream inStream;
             try {
                 inStream = new DataInputStream(conn.getInputStream());
                 String str;
                 while ((str = inStream.readLine()) != null) {
                     Log.e("joshtag", "SOF Server Response" + str);
                    }
                 inStream.close();
                }
             catch (IOException ioex) {
                Log.e("joshtag", "SOF error: " + ioex.getMessage(), ioex);
                }

             //close the streams //
             fileInputStream.close();
             dos.flush();
             dos.close();    

             if(serverResponseCode == 200){ 
                //Do something                       
                }//END IF Response code 200  

            dialog.dismiss();
            }//END TRY - FILE READ      
        catch (MalformedURLException ex) {
            ex.printStackTrace();     
            Log.e("joshtag", "UL error: " + ex.getMessage(), ex);  
            } //CATCH - URL Exception

         catch (Exception e) {           
            e.printStackTrace();             
            Log.e("Upload file to server Exception", "Exception : "+ e.getMessage(), e);
            } //

        return serverResponseCode; //after try       
        }//END ELSE, if file exists.
    }

public static String lineEnd = "\r\n";
public static String twoHyphens = "--";
public static String boundary = "------------------------afb19f4aeefb356c";
public static void addFormField(DataOutputStream dos, String parameter, String value){
    try {
        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\""+parameter+"\"" + lineEnd);
        dos.writeBytes(lineEnd);
        dos.writeBytes(value);
        dos.writeBytes(lineEnd);
    }
    catch(Exception e){

    }
} 
```

更新：如果您需要与文件一起发送参数，请使用：

```
conn.setRequestProperty("someParameter","someValue")
//or
addFormField(DataOutputStream dos, String parameter, String value) 
```

...如上面的代码所示。如果您不完全了解您尝试连接的服务器，则其中一个应该可以工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-27T21:44:51.510

**当心**

`MultiPartEntity`并且`BasicNameValuePair`被**弃用**。

所以这是新的方法！您只需`httpcore.jar(latest)`要从`httpmime.jar(latest)`Apache[站点](http://hc.apache.org/downloads.cgi)下载它们。

```
try
{
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(URL);

    MultipartEntityBuilder entityBuilder = MultipartEntityBuilder.create();
    entityBuilder.setMode(HttpMultipartMode.BROWSER_COMPATIBLE);

    entityBuilder.addTextBody(USER_ID, userId);
    entityBuilder.addTextBody(NAME, name);
    entityBuilder.addTextBody(TYPE, type);
    entityBuilder.addTextBody(COMMENT, comment);
    entityBuilder.addTextBody(LATITUDE, String.valueOf(User.Latitude));
    entityBuilder.addTextBody(LONGITUDE, String.valueOf(User.Longitude));

    if(file != null)
    {
        entityBuilder.addBinaryBody(IMAGE, file);
    }

    HttpEntity entity = entityBuilder.build();
    post.setEntity(entity);
    HttpResponse response = client.execute(post);
    HttpEntity httpEntity = response.getEntity();
    result = EntityUtils.toString(httpEntity);
    Log.v("result", result);
}
catch(Exception e)
{
    e.printStackTrace();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-30T09:32:58.097

使用这个异步任务。

```
 class httpUploader2 extends AsyncTask<Void, Void, Void> {
    private final static String boundary =  "*****M9J_cfALt*****";
    private final static String multiPartFormData = "multipart/form-data;boundary=" + boundary;
    @Override
    protected Void doInBackground(Void... params) {
        HttpURLConnection urlConnection = null;
        try {
            URL url = new URL("http://192.168.43.20/test.php");
            urlConnection = (HttpURLConnection) url.openConnection();
            urlConnection.setRequestMethod("POST");
            urlConnection.setDoOutput(true);
            urlConnection.setDoInput(true);
            urlConnection.setConnectTimeout(5000);
            urlConnection.setRequestProperty("Connection", "Keep-Alive");
            urlConnection.setRequestProperty("Cache-Control", "no-cache");
            urlConnection.setRequestProperty("Content-Type", multiPartFormData);
            urlConnection.setUseCaches( false );
            urlConnection.setChunkedStreamingMode(0);

            DataOutputStream request = new DataOutputStream(urlConnection.getOutputStream());
            writeField(request,"hellow","world");
            writeFile(request,"file1","testfilename.txt","this is file content as string".getBytes(StandardCharsets.UTF_8));
            writeField(request,"testtt","valueeee");
            writeFile(request,"file2","testfilename2222.txt","this is file content as string".getBytes(StandardCharsets.UTF_8));
            request.flush();
            request.close();

            int code = urlConnection.getResponseCode();
            if (code ==  HTTP_OK) {
                //Log.d("@#$","Connected");
                BufferedReader rd = new BufferedReader(new InputStreamReader(urlConnection.getInputStream()));
                String line;
                while ((line = rd.readLine()) != null) {
                    Log.i("@#$", line);
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (urlConnection != null) {
                urlConnection.disconnect();
            }
        }

        return null;
    }
    private void writeField(DataOutputStream request,String name,String value){
        String out = "\r\n--" + boundary + "\r\n" + "Content-Disposition: form-data; name=\"" + name +"\"";
        out += "\r\n\r\n" + value;
        try {
            request.write(out.getBytes(StandardCharsets.UTF_8));
        } catch (IOException ignored) {}
    }
    private void writeFile(DataOutputStream request,String name,String value,byte[] filedata){
        String out = "\r\n--" + boundary + "\r\n" + "Content-Disposition: form-data; name=\"" + name +"\"; filename=\"" + value + "\"";
        out += "\r\n\r\n";
        try {
            request.write(out.getBytes(StandardCharsets.UTF_8));
            request.write(filedata);
        } catch (IOException ignored) {}
    }
} 
```

使用这个 php 进行测试（test.php） -

```
<?php
var_dump($_REQUEST);
echo "--------UPLOADED FILES--------\n";
var_dump($_FILES);
?> 
```

我在真实测试设备上使用 Android Pie，所以需要在清单中声明，否则无法连接-

```
<application
        android:usesCleartextTraffic="true"
.
.
/></application> 
```

使用 xampp 测试 php 服务器。但您不能直接在手机上访问它（真正的测试设备）。为此，首先将您的 PC 连接到设备热点。然后在 apache 的 httpd.txt 中添加 Require all grant。

然后要获取该热点网络的 xampp 的 IP 地址，请编写 ipconfig 并查找 ipv4 地址。

# php - 如何选择具有相同值的所有行？

> ID：13002550
> 
> 赞同：0
> 
> 时间：2012-10-21T21:49:52.910
> 
> 标签：php, mysql, select

> **可能重复：**
> [MySQL 只返回一行](https://stackoverflow.com/questions/4372197/mysql-returns-only-one-row)

我想知道如何选择具有单个值的所有行。EG 列用户名是某个用户名的所有行。这是我此刻的代码：

```
$result = mysql_query("select * from `order` WHERE username='$user'");
$row = mysql_fetch_array($result); 
echo $row['username'];
echo $row['amount']; 
```

这仅回显第一行中的值。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:53:28.987

mysql_fetch_array 一次只从 $result 中提取一行。

尝试：

```
while($row = mysql_fetch_array($result)
{
    echo $row['username'];
    echo $row['amount'];

} 
```

# f# - 在 F# 和/或 OCaml 中表示时间序列的最标准和最有效的方法是什么

> ID：13002551
> 
> 赞同：2
> 
> 时间：2012-10-21T21:50:06.123
> 
> 标签：f#, ocaml, time-series

我想知道在 F# 中为时间序列表示时间序列的最标准和最有效的方法是什么，包括稀疏/非稀疏情况和定期间隔/非定期间隔情况。

有没有人有使用这种语言或 OCaml 表示这些的标准方法的经验？

我首先用数组表示它们，但意识到数组不能包含诸如采样频率之类的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T13:41:54.730

这取决于您最有可能在这些时间序列中使用哪些常见操作。

*   如果您只进行顺序访问，那么将时间序列公开为时间值序列可能会很好。

像这样

```
type TimedValue<'T> = { ts : DateTime; value: 'T}
type TimeSerie<'T> = TimedValue<'T> seq 
```

*   如果你打算进行一些精确的搜索，你可以用 Map 包装它

像这样

```
type TimeSerie (vals : TimedValue<double> seq) = 
   let mdata = Map.ofSeq (vals |> Seq.map(fun x -> x.ts, x ))

   static member inline LinearReturn vb  ve = ve / vb - 1.
   static member inline LogReturn vb ve = log ve - log vb

   member x.toReturns(times : TimeCollection, f) =
         times |> Seq.pairwise |> Seq.map(fun (l,n) -> {tfrom = l; tto= n; value= f (mdata.[l].value) (mdata.[n].value) } )

   member x.toLinReturns(times : TimeCollection) = x.toReturns(times, TimeSerie.LinearReturn)
   member x.toLogReturns(times : TimeCollection) = x.toReturns(times, TimeSerie.LogReturn) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T23:48:39.123

也许函数响应式编程就是答案：它是一种范式，您将事件绑定到函数并定义“行为”和一直在发展的信号。

时间和事件以精心设计的方式表示。

一些链接开始： http: [//erratique.ch/talks/react-ocamlum-2010.pdf](http://erratique.ch/talks/react-ocamlum-2010.pdf) http://erratique.ch/software/react

另一个库：[https ://github.com/jaked/froc](https://github.com/jaked/froc)

# ios - 'NSUnknownKeyException'

> ID：13002553
> 
> 赞同：0
> 
> 时间：2012-10-21T21:50:30.230
> 
> 标签：ios, xcode

我尝试为 ios 做非常简单的应用程序。在视图之间切换。当它在日志中开始出现此错误时：

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<UIApplication 0x712d520> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key goToAuthorizeView.'
*** First throw call stack:
(0x1c8c012 0x10c9e7e 0x1d14fb1 0xb76711 0xaf7ec8 0xaf79b7 0xb22428 0x22e0cc 0x10dd663 0x1c8745a 0x22cbcf 0x22e98d 0x10ceb 0x11002 0xfed6 0x21315 0x2224b 0x13cf8 0x1be7df9 0x1be7ad0 0x1c01bf5 0x1c01962 0x1c32bb6 0x1c31f44 0x1c31e1b 0xf7da 0x1165c 0x1b6d 0x1a95)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:00:07.293

看起来您`UIButton`在 XIB 中定义了某种控制（很可能是 a ），存在幻象连接。检查您的 XIB 并确保任何命名的插座`goToAuthorizeView`都已断开连接。

当 NIB 取消存档程序解冻您的 UI 时，它开始调用`-setValue:ForKey`存档中定义的元素。当遇到未定义的键或值时，它会抛出一个通用异常，因为将随机未定义的内存空间设置为新值是不安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T05:41:37.997

只需转到 iOS 模拟器 > 重置内容和设置。清理并运行您的应用程序。它会起作用的。

# javascript - javascript MATH.PI MATH.SQRT 真正做了什么？

> ID：13002556
> 
> 赞同：-4
> 
> 时间：2012-10-21T21:51:05.223
> 
> 标签：javascript

```
var a=Math.sqrt(0);
var b=Math.sqrt(1);
var c=Math.sqrt(9);
var d=Math.sqrt(64);
var e=Math.sqrt(-9); 
```

我不太明白究竟是`Math.PI`什么`Math.sqrt`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:53:05.387

[Math.PI](http://ecma-international.org/ecma-262/5.1/#sec-15.8.1.6)访问代表值 3.141 的变量...

[Math.sqrt(x)](http://ecma-international.org/ecma-262/5.1/#sec-15.8.2.17)求 x 的平方根

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T21:54:12.803

这些名称有点不言自明。`Math.PI`是一个常数，它保存[pi](http://en.wikipedia.org/wiki/Pi)的值（即`3.14...`）。`Math.sqrt`确定其参数的[平方根](http://en.wikipedia.org/wiki/Square_root)。

取负值的平方根（`-9`例如 ）将导致，[`NaN`](http://ecma-international.org/ecma-262/5.1/#sec-4.3.23)因为实际上，您无法用实数表示负数的平方根。

# paypal - Paypal 测试订阅按钮

> ID：13002563
> 
> 赞同：1
> 
> 时间：2012-10-21T21:51:53.570
> 
> 标签：paypal, paypal-ipn, paypal-subscriptions, recurring-billing

我需要使用贝宝提供的沙箱测试订阅按钮。我有一个带有以下代码的按钮：

```
 <form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
  <input type="image" src="https://www.paypal.com/es_XC/i/btn/x-click-but6.gif" border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
   <input type="hidden" name="cmd" value="_xclick-subscriptions">
  <input type="hidden" name="business" value="cda.1_1350317871_biz@mymail.es"> 
  <input type="hidden" name="item_name" value="Anuncio Premium"> 
  <input type="hidden" name="item_number" value="SS-001"> 
  <input type="hidden" name="no_note" value="1"> 
  <input type="hidden" name="currency_code" value="EUR"> 
  <input type="hidden" name="a3" value="3.00"> 
  <input type="hidden" name="p3" value="1"> 
  <input type="hidden" name="t3" value="D"> 
  <input type="hidden" name="src" value="1"> 
  <input type="hidden" name="sra" value="1"> 
  <input type="hidden" name="no_shipping" value="1">
  <input type="hidden" name="custom" value="<?php print $user->uid; ?>"> 
```

如您所见，我设置 t3=D 和 p3=1 以强制贝宝每分钟发送定期付款作为贝宝的具体说明： [https ://www.paypalobjects.com/en_US/ebook/PP_Sandbox_UserGuide/testing_recurringpayments.html](https://www.paypalobjects.com/en_US/ebook/PP_Sandbox_UserGuide/testing_recurringpayments.html)

一切正常。我收到了第一笔付款及其对应的 IPN，并且在我的测试帐户中创建了一个定期付款配置文件。但是没有收到更多的经常性付款，所以我的问题是我是否做错了什么。我想在短时间内收到定期付款，这样我就不必等待 1 天来测试我的网络。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:37:43.020

不幸的是，这个功能已经有很长一段时间没有工作了，他们也意识到了这一点，但它的优先级还不够高，无法修复它。

如果您需要根据定期付款测试 IPN，我建议您设置一个简单的 HTML 表单，并将操作设置为您的 IPN 侦听器 URL，然后添加一堆与您期望的名称和值匹配的隐藏字段从 IPN 获取。

这样，您可以在浏览器中直接提交给您的 IPN 侦听器并在屏幕上查看错误。这也有助于故障排除。

请记住，执行此操作时，IPN 验证系统将失败，因为数据不是来自实际的 PayPal 系统。不过，您可以出于测试目的进行相应处理。

# php - DOMDocument saveHTML() 返回空字符串

> ID：13002574
> 
> 赞同：0
> 
> 时间：2012-10-21T21:54:14.507
> 
> 标签：php, domdocument

我正在尝试使用 PHP DOMDocument 类来修改我的页面内容的内容，但效果并不好。

```
<?php
$d = new DOMDocument();
$c = get_the_content();
$d->loadXML($c);
echo $d->saveHTML();
?> 
```

如果我 echo `$c`，该页面将正常打印，但如上所述，它根本不打印任何内容。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-11T16:18:19.063

您应该使用`loadHTML()`而不是`loadXML()`. 带有选项，以防止不需要的标签。

```
<?php
$d = new DOMDocument();
$c = get_the_content();
$d->loadHTML($c, LIBXML_HTML_NOIMPLIED | LIBXML_HTML_NODEFDTD);
echo $d->saveHTML();
?> 
```

一个重要的区别`the_content()`是`get_the_content()`不通过'the_content'传递内容。这意味着它`get_the_content()`不会自动嵌入视频或扩展短代码等。

它也不会*autop*。但是您可以轻松应用过滤器：

```
$c = apply_filters('the_content', get_the_content()); 
```

Care 选项`loadHTML()`仅适用于 Libxml >= 2.7.7（从 PHP >= 5.4.0 开始）。

# html - 如何在胡佛上展开链接？在链接周围添加“<”>“符号？

> ID：13002576
> 
> 赞同：0
> 
> 时间：2012-10-21T21:54:33.780
> 
> 标签：html, css

如何在鼠标悬停时让一些符号出现在我的链接周围？例如我有一些链接：

```
<ul>
    <li><a href="#"><span>&LT;</span>Home<span>&GT;</span></a></li>
    <li><a href="#">Photos</a></li>
    <li><a href="#">Paintings</a></li>
</ul> 
```

我的意思是我希望这些“< >”从链接后面慢慢扩展，然后将其悬停。并在我将鼠标移开后返回并隐藏。我知道 CSS 过渡和动画。我尝试了很多方法，但它不起作用。最好的结果是当我使用小图像和不透明度时。但这不是我想要的。我想从链接后面进行一些漂亮的平滑运动。

**编辑：好吧，在谷歌一段时间后，我在**[这里](http://geryit.com/) 遇到了这个网站。我尝试制作与他的菜单链接类似的东西。我不是要完整的代码，只是指出我正确的方向:) 也许它只用 JavaScript 完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:02:59.993

1）首先在您生成链接的模板中的每个链接周围添加符号

```
 <li>
     <span class="slide">&lt;</span>
     <a href ....>
     <span class="sldie">&gt;</span>
 </li> 
```

2）默认隐藏，悬停可见

```
 .slide { 
      display: none;
 }

 li:hover .slide { 
      display: inline;
 } 
```

3) 添加 CSS3 过渡代码以滑动可见的隐藏 div，如下所示[http://atomicrobotdesign.com/blog/htmlcss/slide-up-captions-using-css3-transitions/](http://atomicrobotdesign.com/blog/htmlcss/slide-up-captions-using-css3-transitions/)

该代码仅用于示例目的，并非来自实际工作的产品。但是使用这些指针，您应该能够一起解析效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:36:37.603

一种变体是使用“可见性”代替“显示”

```
.slide { 
      visibility: none;
 }

 li:hover .slide { 
      visibility: inline;
 } 
```

这样，添加符号时文本不会移动。根据您的情况，这可能看起来不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T23:47:58.063

只要你现在对 Firefox 中的转换没问题，并且可以等待 Webkit 团队在生成的内容上启用转换，我的建议是：

```
body { background: #000; } 
ul li a { text-decoration: none; color: #fff; font-size: 2rem;
font-family: Avenir, sans-serif; text-transform: uppercase; }

ul li a:after, ul li a:before { opacity: 0; font-size: 1.5rem; position: relative; 
top: -.25rem; color: #f00; z-index: -2; } 

ul li a:before { content: "<"; right: -2rem; } 
ul li a:after { content: ">"; left: -2rem; }
ul li a:hover:before, ul li a:hover:after { opacity: 1; transition: .7s all linear; } 
ul li a:hover:before { right: 0; } 
ul li a:hover:after { left: 0; } 

<ul>
<li><a href="#">Home</a></li>
<li><a href="#">Photos</a></li>
<li><a href="#">Paintings</a></li>
</ul> 
```

[Dabblet 中的代码](http://dabblet.com/gist/3928942)。我希望这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T06:13:49.410

在 CSS 中使用 :after 和 :before

**HTML**

```
<ul>
    <li><a href="#">Home</a></li>
    <li><a href="#">Photos</a></li>
    <li><a href="#">Paintings</a></li>
</ul>​ 
```

**CSS**

```
body{background:black}
li a{
    white-space: nowrap;
    color: transparent;
    display: block;
    text-transform: uppercase;
    text-align: center;
    text-shadow: 0px 0px 0px #fff;
    letter-spacing: 1px;
    -moz-transform: scale(0.5); 
    -ms-transform: scale(0.5); 
    -o-transform: scale(0.5); 
    -webkit-transform: scale(0.5); 
    transform: scale(0.5); 
    -webkit-transition: all 0.6s linear;
    -moz-transition: all 0.6s linear;
    -o-transition: all 0.6s linear;
    -ms-transition: all 0.6s linear;
    transition: all 0.6s linear;  text-decoration:none
}
li a:hover{
    text-shadow: 0px 0px 1px #fff;
    -moz-transform: scale(1); 
    -ms-transform: scale(1); 
    -o-transform: scale(1); 
    -webkit-transform: scale(1); 
    transform: scale(1); 
    text-decoration:none
}
li a:hover:before{content:"<"}
li a:hover:after{content:">"}​ 
```

**[演示](http://jsfiddle.net/XDHXt/1/)**

但这不支持 IE，但适用于现代浏览器。

* * *

**答案 2**

好吧，我浏览了您所指的网站，发现它是由纯 css 制成的（css 中使用了 2 个图像）。找到下面的 Demo（CSS 很长，这里就不贴了）

**[现场演示 2](http://jsfiddle.net/XDHXt/2/)**

# asp.net - 将数据库图像绑定到 .ascx 中的 ItemTemplate

> ID：13002578
> 
> 赞同：0
> 
> 时间：2012-10-21T21:54:43.847
> 
> 标签：asp.net, database, listview, data-binding, itemtemplate

我正在为从数据库填充的 ListView 使用动态 ItemTemplate。当我需要显示字符串列“Parametr”（或其他一些数据类型）时，我会这样做：

```
 //my .ascx file
     <li><%# Eval("Parametr") %> </li> 
```

如何显示存储图像的 varbinary 列？谢谢。

**编辑：**

如果有人需要，这里还有一些代码：

```
<asp:ListView ...  DataSourceID="database"   ></asp:ListView>
<asp:SqlDataSource ... ID="database" SelectCommand="SELECT image FROM image_table"></asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:35:35.650

您可以使用“内联图像”。例如，该技术[在 html 中嵌入的 Base64 编码图像](http://www.sweeting.org/mark/blog/2005/07/12/base64-encoded-images-embedded-in-html)进行了描述（搜索 base64 图像 html 以获取其他资源）。

获取图像数据字节的 base64 编码字符串，例如使用[Convert.ToBase64String](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)，然后使用`<img src=data:image/gif;base64,`并附加图像数据。

所以你可以使用类似这样的东西来绑定它

```
<img src='<%# string.Format("data:image/gif;base64,{0}",
 Convert.ToBase64String((byte[])Eval("ImageDataBase64")))%>'/> 
```

当然，这只建议用于小图像。另请注意，您应该将“gif”更改为图像的实际格式。

# php - 如何设置远程服务器以使用 Zend 类在网站上验证和上传文件？

> ID：13002580
> 
> 赞同：0
> 
> 时间：2012-10-21T21:55:29.670
> 
> 标签：php, zend-framework

我在网站上实现 Zend 框架时遇到问题。它不是一个花哨的应用程序，只是使用 Zend 的一些验证类和 Zend_File_Transfer_Adapter_Http 将文件上传到服务器。它们都不起作用。问题是这样的：我读过我应该编写一个 htaccess 文件来指示站点的文件夹结构，并且应该启用 mod_rewrite。我不知道如何检查 mod_rewrite，因为我的提供商的控制面板信息量非常少。

无论如何，我认为像这样包含 Zend 库就足够了：

```
$libreria = $_SERVER['DOCUMENT_ROOT'];
$libreria.='Zend/ZendFramework/library';
set_include_path(get_include_path().PATH_SEPARATOR.$libreria);
require_once('Zend/Loader/Autoloader.php');
Zend_Loader_Autoloader::getInstance(); 
```

但显然不是。所以我的另一个问题是：¿我是否应该以不同的方式实例化 Autoloader，我是否应该指定一个命名空间，就像`$loader = Zend_Loader_Autoloader::getInstance(); $loader->registerNamespace(something);`我不这么认为的那样，因为正如我所说，我只是试图将验证类和文件上传类包含到网络中页。

最后，我在一些脚本上设置了类 PHPMailer 来处理用户输入，每当我似乎正确地包含 Zend Framework 的路径时，页面就会抛出 500 Internal Server 错误，而如果我写的路径不正确，则不会发生这种情况（这是另一个问题，我认为如果我设置相对于文档的路径它不起作用，例如 do `$libreria='Zend/ZendFramework/library';`不起作用，因为无论我写什么，我都看到我为验证输入设置的所有条件都失败了。

那么最后一个问题是：PHPMailer 与 Zend Framework 是否有些不兼容？对不起，我是个新手，虽然我检查了 PHPMailer 类并且没有发现任何不兼容的东西，但我必须问。

如果有人愿意提供帮助，请提前致谢

我还应该补充一点，我已经在本地服务器上测试了这个网站，它工作正常，问题出在远程服务器上。

另外，我在[这里阅读了这篇文章](https://stackoverflow.com/questions/1466252/zend-framework-1-9-how-to-use-autoloading-without-mvc/1468737#1468737)，这正是我正在寻找的，根据它我应该能够使用 new 运算符引用 Zend 的标准类。但是在远程服务器上我不能这样做，只能在本地。

[再搜索一下，我在同一站点上](https://stackoverflow.com/questions/4744288/zend-framework-not-working-after-files-are-uploaded-into-a-remote-server)阅读了有关 Zend 安装失败的可能原因，这使我能够澄清我的问题：首先，我认为这些条件都可能没有失败，尽管正如我所说的我没有'无法在我的提供者的远程服务器上检查 mod_rewrite，其次，我的 htaccess 文件是空的，所以没有重定向规则（应该丢弃 Zend Framework 与不正确的 htaccess 交互的问题，如果我错了，请纠正我），第三，我无权访问 php.ini 文件。那么我能做什么呢？任何建议都被接受，因为我整个早上都在努力解决这个问题，并且不知道出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:30:55.017

您必须区分 Zend Framework 作为 MVC 应用程序和独立库。您所追求的是独立库，不幸的是，很多文档都是关于 ZF 作为 MVC 应用程序的。htaccess 是启动 MVC 应用程序所必需的。

对于作为独立库的 ZF，您基本上只需要一件事：正确的路径。如果你愿意，你可以在上面添加自动加载器，但对于 ZF 1.x，这不是必需的，因为你有所有的 require_once。

现在您只需测试您的路径是否有效。如果您的`require_once('Zend/Loader/Autoloader.php');`语句没有引发错误，那么您基本上已经设置好了，因为包含路径扩展了您的 require_once 语句中的路径。

对于自动装载机。如果这没有显示错误，那么您也应该在此处进行设置。不过，您可能与主应用程序有冲突。在 Zend_Loader_Autoloader 之后，您应该能够实例化 Zend 类。尝试在下一行加载一个验证器。如果这在您的应用程序中有效但不能在以后使用，您可能在该应用程序中有另一个自动加载器覆盖了 Zend 加载器。

# sip - 将freeswitch转换为星号

> ID：13002582
> 
> 赞同：0
> 
> 时间：2012-10-21T21:55:44.437
> 
> 标签：sip, asterisk, freeswitch, sip-server

我在freeswitch中有以下代码。我们决定改用星号。

我已经设置，如果您拨打 8XXXX，您将拨打另一台服务器。

```
sip1:/usr/local/freeswitch/conf/autoload_configs/acl.conf.xml
   <node type="allow" cidr="192.168.0.2/32"/>
sip1:/usr/local/freeswitch/conf/dialplan/default.xml
redirect numbers 8XXXX to sip2
  <extension name="Dial to sip2">
    <condition field="destination_number" expression="^8(\d\d\d\d)$">
      <action application="bridge" data="sofia/internal/$1@192.168.0.2"/>
    </condition>
  </extension>
sip1:/usr/local/freeswitch/conf/dialplan/public.xml
route foreign calls to the the extension
   <extension name="Calls from sip2">
     <condition field="destination_number" expression="^(\d\d\d\d)$">
     <action application="transfer" data="$1 XML default"/>
     </condition>
   </extension>

sip2:/usr/local/freeswitch/conf/autoload_configs/acl.conf.xml
   <node type="allow" cidr="192.168.0.1/32"/>
sip2:/usr/local/freeswitch/conf/dialplan/default.xml
redirect numbers 8XXXX to sip1
  <extension name="Dial to sip1">
    <condition field="destination_number" expression="^8(\d\d\d\d)$">
      <action application="bridge" data="sofia/internal/$1@192.168.0.1"/>
    </condition>
  </extension>
sip2:/usr/local/freeswitch/conf/dialplan/public.xml
route foriegn calls to the extension
   <extension name="Calls from sip1">
     <condition field="destination_number" expression="^(\d\d\d\d)$">
     <action application="transfer" data="$1 XML default"/>
     </condition>
   </extension> 
```

在自由切换代码中，我看到文件 acl.conf.xml 已配置？星号中对应的文件是什么？以及如何在该文件中实现相同的配置？

我在下面创建了 extensions.conf 文件。仅此文件就足够了吗？我是否缺少一些将这些绑定在一起的胶水逻辑？我是 SIP 配置的新手。

```
[incoming]
exten => 123,1,Answer()
 same => n(menuprompt),Background(main-menu)

exten => 1,1,Playback(digits/1)
 same => n,Goto(incoming,menuprompt,123)

exten => 2,1,Playback(digits/2)
 same => n,Goto(incoming,menuprompt,123)

exten => 9,1,Hangup()

[main-menu]
exten => n(menuprompt),Background(main-menu)

exten => 3,1,Playback(digits/3)
 same => n,Goto(main-menu,menuprompt,n)

exten => 4,1,Playback(digits/4)
 same => n,Goto(main-menu,menuprompt,n)

exten => 9,1,Hangup() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:10:08.223

请问您为什么离开 FreeSWITCH？恕我直言，它比 Asterisk 更容易处理，性能也很好

# php - 为什么服务器不能将其识别为 PHP 代码？

> ID：13002584
> 
> 赞同：-1
> 
> 时间：2012-10-21T21:55:54.613
> 
> 标签：php

当加载到服务器[http://letsplays.uni.me/addchannel.html](http://letsplays.uni.me/addchannel.html)代码从这部分出现，因为这就是语法高亮停止的地方！$value) { if (empty($value) && in_array($key, $required_fields) === true) { $errors[] = '标有 * 的字段是必填的'; 休息1；} } } ?>

看起来很突然，似乎没有任何问题！

```
<?php
if(empty($_Post) === false) {
    $required_fields = array('email', 'password', 'repeatpassword', 'channelurl', 'chanelname', 'embedd1', 'keywords');
    foreach($_POST as $key=>$value) {
        if (empty($value) && in_array($key, $required_fields) === true) {
            $errors[] = 'Fields marked with * are required';
            break 1;
        }
    }
}
?>

<?php require_once('Connections/connecttotable.php'); ?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) {
  $insertSQL = sprintf("INSERT INTO Userchannel (chanelID, firstname, lastname, email, password, channelurl, chanelname, `description`, embedd1, game1, Embedd2, game2) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)",
                       GetSQLValueString($_POST['chanelID'], "int"),
                       GetSQLValueString($_POST['firstname'], "text"),
                       GetSQLValueString($_POST['lastname'], "text"),
                       GetSQLValueString($_POST['email'], "text"),
                       GetSQLValueString($_POST['password'], "text"),
                       GetSQLValueString($_POST['channelurl'], "text"),
                       GetSQLValueString($_POST['chanelname'], "text"),
                       GetSQLValueString($_POST['description'], "text"),
                       GetSQLValueString($_POST['embedd1'], "text"),
                       GetSQLValueString($_POST['game1'], "text"),
                       GetSQLValueString($_POST['Embedd2'], "text"),
                       GetSQLValueString($_POST['game2'], "text"));

  mysql_select_db($database_connecttotable, $connecttotable);
  $Result1 = mysql_query($insertSQL, $connecttotable) or die(mysql_error());

  $insertGoTo = "mychanel.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";
    $insertGoTo .= $_SERVER['QUERY_STRING'];
  }
  header(sprintf("Location: %s", $insertGoTo));
}

mysql_select_db($database_connecttotable, $connecttotable);
$query_Recordset1 = "SELECT * FROM Userchannel";
$Recordset1 = mysql_query($query_Recordset1, $connecttotable) or die(mysql_error());
$row_Recordset1 = mysql_fetch_assoc($Recordset1);
$totalRows_Recordset1 = mysql_num_rows($Recordset1);
?>
<style type="text/css">
#wrapper .pretag #main h1 {
    text-align: center;
}
</style>
<!-- InstanceBegin template="/Templates/header.dwt" codeOutsideHTMLIsLocked="false" -->
        <style type="text/css">
        .links {
    font-size: 24px;
    color: #FFF;
}
        #main {
    height: auto;
    width: 1024px;
}
        #main {
    height: auto;
    width: 1024px;
}
        #footer {
    height: auto;
    width: 1024px;
}
        #navbar2 {
    height: auto;
    width: 512px;
    float: left;
}
        #advertisement {
    background-color: #039;
    height: 150px;
    width: 512px;
    float: left;
}
        </style>
<!-- InstanceBeginEditable name="head" -->
<!-- InstanceEndEditable -->
<script type="text/javascript">
function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
<body onLoad="MM_preloadImages('images/homerollover.jpg','images/ChannelSearchrlo.jpg','images/Channelcreaterlo.jpg','images/Newsrlo.jpg','images/about.jpg','images/Aboutrlo.jpg')">
<!-- InstanceBeginEditable name="mainarea" -->
<div id="wrapper">
  <style type="text/css">
#wrapper {
    height: auto;
    width: 1024px;
    margin-right: auto;
    margin-left: auto;
}
#header {
    background-image: url(images/heading2.jpg);
    height: 200px;
    width: 1024px;
}
  </style>
  <div id="header">
    <pre>
    <p class="pretag"><span class="links"></span></p>
    <pre class="pretag"><span class="links">           

               <a href="http://letsplays.uni.me/" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image1','','images/homerollover.jpg',1)"><img src="images/Home.jpg" alt="Go Home" name="Image1" width="150" height="30" border="0"></a><a href="http://letsplays.uni.me/" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('home','','images/homerollover.jpg',1)"></a></span>  <a href="ChannelSearch.php.txt" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Channelsearch','','images/ChannelSearchrlo.jpg',1)"><img src="images/channelsearch.jpg" alt="Channel Search" name="Channelsearch" width="150" height="30" border="0"></a>  <a href="CreateChannel.php" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Create Channel','','images/Channelcreaterlo.jpg',1)"><img src="images/channeladd.jpg" alt="Create Channel" name="Create Channel" width="150" height="30" border="0"></a>  <a href="ign.com" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('News','','images/Newsrlo.jpg',1)"><img src="images/News.jpg" alt="News" name="News" width="150" height="30" border="0"></a> <a href="About.html.txt" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('About','','images/Aboutrlo.jpg',1)"><img src="images/about.jpg" alt="About this page" name="About" width="150" height="30" border="0"></a><a href="About.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('About ','','images/about.jpg',1)"></a></pre>
  </div>
  <span class="pretag">
  <div id="main"><h1>Add Your Channel</h1>
  <?php
<?php
if(empty($_POS) === false) {
    $required_fields = array('email', 'password', 'repeatpassword', 'channelurl', 'chanelname', 'embedd1', 'keywords')
    foreach($_POST as $key=>$value) {
        if (empty($value) && in_array($key, $required_fields) === true) {
            $errors[] = 'Fields marked with * are required';
            break 1;
        }
    }
}
print_r($errors);
?>

  </h1>
    <p>&nbsp;</p>
    <form method="post" name="form1" action="<?php echo $editFormAction; ?>">
      <table align="center">
        <tr valign="baseline">
          <td nowrap align="right">First name:</td>
          <td><input type="text" name="firstname" value="" size="32"></td>
        </tr>
        <tr valign="baseline">
          <td nowrap align="right">Last name:</td>
          <td><input type="text" name="lastname" value="" size="32"></td>
        </tr>
        <tr valign="baseline">
          <td nowrap align="right">Email:*</td>
          <td><input type="text" name="email" value="" size="32"></td>
        </tr>
        <tr valign="baseline">
          <td nowrap align="right">Password:*</td>
          <td><input type="password" name="password" value="" size="32"></td>
        </tr>
         <tr valign="baseline">
          <td nowrap align="right">Repeat Password:*</td>
          <td><input type="password" name="repeatpassword" value="" size="32"></td>
        </tr>
        <tr valign="baseline">
          <td nowrap align="right" valign="top">Channel url:*</td>
          <td><textarea name="channelurl" cols="50" rows="1"></textarea></td>
        </tr>
        <tr valign="baseline">
          <td nowrap align="right">Channel name:*</td>
          <td><input type="text" name="chanelname" value="" size="32"></td>
        </tr>
        <tr valign="baseline">
          <td nowrap align="right">Description:</td>
          <td><textarea name="description" cols="32" rows="6"></textarea></td>
        </tr>
        <tr valign="baseline">
          <td nowrap align="right">Video 1:* </td>
          <td><input type="text" name="embedd1" value="" size="32"></td>
        </tr>
        <tr valign="baseline">
          <td nowrap align="right">What game is it?</td>
          <td><input type="text" name="game1" value="" size="32"></td>
        </tr>
        <tr valign="baseline">
          <td nowrap align="right">Video 2:</td>
          <td><input type="text" name="Embedd2" value="" size="32"></td>
        </tr>
        <tr valign="baseline">
          <td nowrap align="right">What game is it?</td>
          <td><input type="text" name="game2" value="" size="32"></td>
          </tr>
         <tr valign="baseline">
          <td nowrap align="right">Keywords to describe and find your channel*</td>
          <td><input type="text" name="keywords" value="" size="32"></td>  
        </tr>
        <tr valign="baseline">
          <td nowrap align="right">&nbsp;</td>
          <td><input type="submit" value="Channel Create"></td>
        </tr>
      </table>
      <input type="hidden" name="chanelID" value="">
      <input type="hidden" name="MM_insert" value="form1">
    </form>
    <p>&nbsp;</p>
  </div>
  </span>
  <div id="footer">
    <div id="navbar2">
      <ul>
        <li>
          <url src="http://letsplays.uni.me">
          Home</li>
        <li>
          <url src="http://letsplays.uni.me/addchannel">
          Cnannel Add</li>
        <li>
          <url src="http://letsplays.uni.me/channelsearch">
          Channel Search</li>
        <li>
          <url src="http://letsplays.uni.me/news">
          News</li>
        <li>
          <url src="http://letsplays.uni.me/about">
          About and Contact</li>
      </ul>
    </div>
    <div id="advertisement"></div>
  </div>
</div>
<!-- InstanceEndEditable -->
</body>
<!-- InstanceEnd -->
<?php
mysql_free_result($Recordset1);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:54:33.617

您的服务器未配置为运行 php/没有安装 php/**没有将`html`文件识别为 php**。

如果您在浏览器中查看页面的源代码，您会看到它以：

```
<?php require_once('Connections/connecttotable.php'); ?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
// ........ 
```

我认为那是您文件的顶部。

您可能只需要将文件的扩展名更改为`.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:03:23.753

我没有看到任何语法问题。（黄色警告是关于未初始化的变量）。此外，第一个 $_Post 应该是 $_POST imo。

![在此处输入图像描述](../Images/433b46e20fe8648b75e3c6158992f876.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T23:10:38.987

这是你的问题：

```
$required_fields = array('email', 'password', 'repeatpassword', 'channelurl', 'chanelname', 'embedd1', 'keywords')
                                                                                                                //^ No semi-colon. 
```

您必须以分号结束所有 php 语句。

# gcc - 我的命令、gcc 或其他东西有什么问题吗？

> ID：13002585
> 
> 赞同：0
> 
> 时间：2012-10-21T21:56:03.130
> 
> 标签：gcc

在 gcc 中编译 C 文件期间，我输入了

> gcc -c kernal.c -o kernal.o

但结果表明

> gcc：错误：CreateProcess：没有这样的文件或目录

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:08:46.510

在环境变量中设置 GCC 的路径

# jquery - 带有 animate.enhanced 插件的歌剧没有回调函数

> ID：13002586
> 
> 赞同：1
> 
> 时间：2012-10-21T21:56:11.227
> 
> 标签：jquery, animation, opera

所以，这是我在 $(document).ready 中调用的简单函数

```
function animateDiv(object){
   var newq=makeNewPosition();
   var oldq=object.offset();
   var speed=calcSpeed([oldq.top, oldq.left], newq);
   object.animate({top:newq[0],left:newq[1], opacity:randomOpacity()},speed, function(){
     console.log("LOL");
     animateDiv(object);
   });
}; 
```

我的问题是，animate 函数的回调永远不会在 Opera 中触发，但它在其他所有浏览器中都有效。如果我不使用 animate.enhanced 插件，它可以正常工作，但该插件使我的动画更加流畅，所以我不想放弃它。

感谢您的回答！

# php - 在剧透中转换行内的文本值？（PHP，MySQL）

> ID：13002589
> 
> 赞同：2
> 
> 时间：2012-10-21T21:56:35.973
> 
> 标签：php, mysql

我有一个像这样用 PHP 生成的简单表，内容是从 MySQL 中获取的。

```
echo "<tr>";
        echo "<td width='auto' bgcolor=”#FF0000 &#8243;>" . "&nbsp;". "<b>"  . $i . "&nbsp;". "<b/>". "</td>";
        echo "<td width='auto'>" . "&nbsp;" . $row[1] . "&nbsp;" . "</td>";
        echo "<td width='auto'>". $row[2] . "</td>"; 
```

![在此处输入图像描述](../Images/00e1550ce96c74bc4578070e207477b5.png)

我们可以看到行：**Genere**，**Download**
在行里面我有相关的***文本***值，

```
Industrial Black Metal
Black Metal
Grindcore 
```

我想用内部文本转换***扰流板***中单元格内的*文本*值。*我能怎么做？*

 **![在此处输入图像描述](../Images/46d11e243c3702da9acca1e59aa26105.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:38:14.393

您需要使用 JavaScript。例如，您可以使用名为 jQuery 的 JavaScript 库。

将此代码放置在页面上的某个位置一次：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
$(function() {
    $(".spoiler-label").click(function() {
        $(this).parent().find(".spoiler-content").toggle();
    });
});
</script> 
```

现在，在你的循环中，如果你想有一个剧透，而不是只有 $row[2] 等，使用以下代码（当然是在 PHP 标记内）：

```
echo '<div>
    <span class="spoiler-label">'.$row[2].'</span>
    <div class="spoiler-content" style="display: none">Spoiler content</div>
</div>'; 
```

您在这里所做的是隐藏带有 display: none 的扰流板，然后在单击标签时使用 jquery 切换它。**

# sql - SQL“不是一个有效的月份”

> ID：13002590
> 
> 赞同：10
> 
> 时间：2012-10-21T21:56:42.977
> 
> 标签：sql, oracle

我在sql中有一个表如下：

```
CREATE TABLE Reserves(
    sid INTEGER,
    bid INTEGER,
    day DATE,
    PRIMARY KEY (sid, bid, day),
    FOREIGN KEY (sid) REFERENCES Sailors,
    FOREIGN KEY (bid) REFERENCES Boats
); 
```

我正在尝试插入它：

```
INSERT INTO Reserves VALUES(22, 101, '01-01-1998'); 
```

但我收到错误：ORA-01843: not a valid month

这是一个 Oracle 数据库。我不确定我的日期格式有什么问题。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-21T21:59:08.650

您想要哪个并不完全清楚，因此您可以尝试：

*   对于月-日-年格式：

    `INSERT INTO Reserves VALUES(22, 101, TO_DATE('01-01-1998','MM-DD-YYYY'));`

*   对于日-月-年格式：

    `INSERT INTO Reserves VALUES(22, 101, TO_DATE('01-01-1998','DD-MM-YYYY'));`

另外，推荐阅读：[Oracle 函数：TO_DATE](http://www.techonthenet.com/oracle/functions/to_date.php)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-21T22:21:50.710

您可以使用`date`关键字来指定 ANSI 标准的日期字符串：

```
INSERT INTO Reserves VALUES(22, 101, date '1998-01-01'); 
```

在本例中，格式为 YYYY-MM-DD，即 1998 年 1 月 1 日。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-03-01T21:10:34.657

正如@Jody 还提到的，
您可以通过在之前执行此代码一次来更改会话的默认值`INSERT`：

`ALTER SESSION SET NLS_DATE_FORMAT = 'DD-MM-YYYY';`

您可以按您喜欢的任何顺序更改格式。

**资料来源：** [dba-oracle.com](http://www.dba-oracle.com/t_nls_date_format.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T22:02:31.703

试试“1998-01-01”。

我相信 oracle 的默认日期格式是 yyyy-mm-dd。您可以使用 alter session set nls_date_format='mm-dd-yyyy' 更改会话的默认值

请记住，大多数客户都允许您将其永久设置为您喜欢的任何内容

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-19T12:12:11.960

您也可以尝试以下查询格式：

`INSERT INTO Reserves VALUES(22, 101, DATE '01-01-1998');`

`DATE`关键字将以下字符串解释为日期。

# php - 用相应变量的值替换变量名

> ID：13002592
> 
> 赞同：0
> 
> 时间：2012-10-21T21:56:50.323
> 
> 标签：php, regex, function

我正在尝试用它的值替换变量名，这里是示例：

```
<?php
$string = "value";
$$string = "value2";
?> 
```

所以实际上 $$string 必须是 $value 对吗？我想要做的是将$$string 设为$value，我尝试用正则表达式做一些事情，但它不起作用这是我的代码：

```
<?php

function var_replaced($code)
{
}
$code = htmlspecialchars(file_get_contents("file.php"));
$code = preg_replace_callback("/$$ (.+?) /i",'var_replaced', $code);
echo $code;
?> 
```

关键是在我使用此函数 var_replaced 后，我的代码将变为：

```
<?php
$value = "value2";
?> 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:22:26.117

你需要考虑两件事。回调将使用另一个局部变量上下文执行。它不会有外面`$string`的东西。因此，这是您需要`preg_replace`with `/e`val 开关的情况之一。

您的正则表达式也很遥远。你那里有一些空间，并且`.+?`不知道在哪里停下来。它只会看一个字符。

您必须在此处约束占位符。最好寻找字母数字字符。

第三，你必须逃脱`$`，因为那代表着线或主题结束。

因此，您所描述的方法是：

```
$code = preg_replace("/[$][$](\w+)/e", '$$$1', $code); 
```

但是，`_callback`如果可以的话，通过将替换变量存储在数组中来使用。然后在回调中进行数组查找：

```
function var_replaced($match)
{
    list(, $varname) = $match;
    $reference = $GLOBALS["yourvars"][$varname];
    $value = $GLOBALS["yourvars"][$reference];
    return $value;
} 
```

这会手动查找要解释为另一个变量名的第一个键，然后获取重写后的变量名的值。

如果那是你所要求的，我完全不知道。

# javascript - 如何从 HTML 选择框返回数组？

> ID：13002593
> 
> 赞同：0
> 
> 时间：2012-10-21T21:57:26.220
> 
> 标签：javascript, jquery

> **可能重复：**
> [在 JavaScipt 数组中存储选择选项和 optgroup](https://stackoverflow.com/questions/12992582/storing-select-options-and-optgroups-in-a-javascipt-array)

这是我的 HTML：

```
<select name="select">
   <option value='xxx'> xXx </option>    
   <optgroup label="Letters">
       <option value='a'> A </option>
       <option value='b'> B </option>
       <option value='c'> C </option>
       <option value='d'> D </option>
   </optgroup>
   <option value='zzz'> zZz </option>
</select> 
```

我现在正在尝试从选择框的子项中获取数组，如下所示：

```
[{"xxx":"xXx"},{"letters":{"a":"A","b":"B","c":"C","d":"D"}},{"zzz":"zZz"}] 
```

取决于选择框选项和选项组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T00:09:33.737

以下是您要求的代码。

```
$(document).ready(function () {
var mtest = "[";
var i = 0;
var j = 0;

$("select").children().each(function() { 
 if (i==0) i+=1; else  mtest += ','; 
 j = 0;
if ($(this).children().length ==0) { 
     mtest += '{"' + $(this).attr('value') + '":"' +  $.trim($(this).html()) + '"}';
} else {
    mtest += '{"' + $(this).attr('label') + '":{';
    $(this).children().each(function() { 
        if (j==0) j+=1; else  mtest += ','; 
        mtest += '"' + $(this).attr('value') + '":"' + $.trim($(this).html()) + '"';

    });
  mtest += '}';
}

;})
mtest += ']';
document.write(mtest);

});​ 
```

这里[http://jsfiddle.net/salih0vicX/WkaNv/](http://jsfiddle.net/salih0vicX/WkaNv/)可以测试一下；我添加了一些额外的 HTML 用于测试目的......

如果您有任何问题或疑虑，请告诉我。

# ruby - 处理哈希数组

> ID：13002594
> 
> 赞同：1
> 
> 时间：2012-10-21T21:57:28.397
> 
> 标签：ruby, arrays, hash

给定一个像这样的 Ruby 哈希数组：

```
[{"lib1"=>"30"}, {"lib2"=>"30"}, {"lib9"=>"31"}, {"lib2"=>"31"}, {"lib3"=>"31"}, {"lib1"=>"32"}, {"lib2"=>"32"}, {"lib1"=>"33"}, {"lib3"=>"36"}, {"lib2"=>"36"}, {"lib1"=>"37"}] 
```

我如何得到这样的哈希：

```
{"lib1"=>[30,32,33,37], lib2=>[30,31,32,36], lib3=>[31,36], lib9=>[31]} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T22:01:09.077

```
a = [{"lib1"=>"30"}, {"lib2"=>"30"}, {"lib9"=>"31"}, {"lib2"=>"31"}, {"lib3"=>"31"}, {"lib1"=>"32"}, {"lib2"=>"32"}, {"lib1"=>"33"}, {"lib3"=>"36"}, {"lib2"=>"36"}, {"lib1"=>"37"}]

a.map(&:to_a).flatten(1).each_with_object({}) do |(k, v), h|
  h[k] ||= []
  h[k] << v
end
#=> {"lib1"=>["30", "32", "33", "37"],
#    "lib2"=>["30", "31", "32", "36"],
#    "lib9"=>["31"],
#    "lib3"=>["31", "36"]} 
```

或者：

```
Hash[a.map(&:to_a).flatten(1).group_by(&:first).map { |k, v| [k, v.map(&:last)] }] 
```

如果您愿意使用[Facets](http://rubyworks.github.com/facets/)，那么这将变得非常简单[`collate`](http://rubyworks.github.com/rubyfaux/?doc=http://rubyworks.github.com/facets/docs/facets-2.9.3/core.json#api-class-Hash/api-method-Hash-h-collate)：

```
a.inject(:collate) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T22:28:37.840

```
t = [{"lib1"=>"30"}, {"lib2"=>"30"}, {"lib9"=>"31"}, {"lib2"=>"31"},
  {"lib3"=>"31"}, {"lib1"=>"32"}, {"lib2"=>"32"}, {"lib1"=>"33"},
  {"lib3"=>"36"}, {"lib2"=>"36"}, {"lib1"=>"37"}]
result = {}

t.group_by { |x| x.keys.first }.each_pair do |k, v|
  result[k] = v.map { |e| e.values.first }
end 
```

或者，对于一个更纯粹的功能版本和合适的，在最重要的一行上（毕竟是 Ruby）......

```
Hash[t.group_by { |x| x.keys[0] }.map { |k, v| [k, v.map { |e| e.values[0] }]}] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T22:37:29.563

替代 Andrew's，避免 flatten 和 to_a，只是嵌套迭代。如果存在，将从源数组中的元素哈希中收集多个键。

```
a.each_with_object({}) do |element,result|
  element.each do |k,v|
    (result[k] ||= []) << v.to_i
  end
end 
```

打到单线：

```
a.each_with_object({}) {|e,r| e.each {|k,v| (r[k] ||= []) << v.to_i } } 
```

我会注意到这个版本只检查每个源元素一次，而 to_a/flatten 和 group_by 答案涉及对源的多次迭代或源的转换。

Andrew 提出了一个很好的观点，即 big-O 算法复杂性中的常数因素在现实中通常是一种洗牌。我对迄今为止提供的答案进行了[快速基准测试（如 OP 示例所暗示的那样，将它们全部纠正为将值转换为 fixnum）。](https://gist.github.com/3929357)使用 OP 示例源数据，我的嵌套迭代方法确实更快（23-45%）：

```
ruby 1.9.2p318 (2012-02-14 revision 34678) [x86_64-linux]
Rehearsal ------------------------------------------------------------
to_a_flat                  3.100000   0.000000   3.100000 (  3.105873)
to_a_flat_construct        4.060000   0.000000   4.060000 (  4.076938)
group_by_each              3.010000   0.000000   3.010000 (  3.015367)
group_by_each_construct    3.040000   0.000000   3.040000 (  3.050500)
nested_iter                2.300000   0.000000   2.300000 (  2.307776)
-------------------------------------------------- total: 15.510000sec

                               user     system      total        real
to_a_flat                  3.080000   0.000000   3.080000 (  3.096301)
to_a_flat_construct        4.050000   0.000000   4.050000 (  4.059409)
group_by_each              2.980000   0.000000   2.980000 (  2.997074)
group_by_each_construct    3.050000   0.000000   3.050000 (  3.057770)
nested_iter                2.300000   0.000000   2.300000 (  2.311855) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-25T16:02:56.027

只是为了增加频谱；您可以通过预先定义生成的 Hash 并使用常规的 .each 循环来避免 each_with_object。我发现它比前一种方法更容易阅读。

```
grouped = {}
hashes.each do |hash|
  hash.each do |key, value|
    (grouped[key] ||= []) << value.to_i
  end
end 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-21T22:56:18.060

类似于 DigitalRoss 的，但我会在原地做：

```
array.group_by{|h| h.keys.first}.each{|_, a| a.map!{|h| h.values.first}} 
```

# php - PHP trait：是否有适当的方法来确保使用 trait 的类扩展包含特定方法的超类？

> ID：13002598
> 
> 赞同：18
> 
> 时间：2012-10-21T21:58:22.340
> 
> 标签：php, class, inheritance, superclass, traits

示例#2 来自 PHP 手册[http://php.net/manual/en/language.oop5.traits.php](http://php.net/manual/en/language.oop5.traits.php)状态

```
<?php
class Base {
    public function sayHello() {
        echo 'Hello ';
    }
}

trait SayWorld {
    public function sayHello() {
        parent::sayHello();
        echo 'World!';
    }
}

class MyHelloWorld extends Base {
    use SayWorld;
}

$o = new MyHelloWorld();
$o->sayHello();
?> 
```

这是正确的代码，但在这种情况下使用是不安全的`parent::`。假设我编写了自己的“hello world”类，它不继承任何其他类：

```
<?php
class MyOwnHelloWorld
{
    use SayWorld;
}
?> 
```

`sayHello()`在我调用该方法之前，此代码不会产生任何错误。这是不好的。

另一方面，如果 trait 需要使用某种方法**，我可以将此方法编写为 abstract**，这很好，因为它可以确保在编译时正确使用 trait。但这不适用于父类：

```
<?php
trait SayWorld
{
    public function sayHelloWorld()
    {
        $this->sayHello();
        echo 'World!';
    }

    public abstract function sayHello(); // compile-time safety

} 
```

所以我的问题是：有没有办法确保（在编译时，而不是在运行时）使用某种特征的类将具有`parent::sayHello()`方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-27T16:26:28.880

您可以检查 $this 是否扩展了特定的类或实现了特定的接口：

```
interface SayHelloInterface {
    public function sayHello();
}

trait SayWorldTrait {
    public function sayHello() {
        if (!in_array('SayHello', class_parents($this))) {
            throw new \LogicException('SayWorldTrait may be used only in classes that extends SayHello.');
        }
        if (!$this instanceof SayHelloInterface) {
            throw new \LogicException('SayWorldTrait may be used only in classes that implements SayHelloInterface.');
        }
        parent::sayHello();
        echo 'World!';
    }
}

class SayHello {
    public function sayHello() {
        echo 'Hello ';
    }
}

class First extends SayHello {
    use SayWorldTrait;
}

class Second implements SayHelloInterface {
    use SayWorldTrait;
}

try {
    $test = new First();
    $test->sayHello(); // throws logic exception because the First class does not implements SayHelloInterface
} catch(\Exception $e) {
    echo $e->getMessage();
}

try {
    $test = new Second();
    $test->sayHello(); // throws logic exception because the Second class does not extends SayHello
} catch(\Exception $e) {
    echo $e->getMessage();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T22:14:18.903

不，那里没有。其实这个例子很糟糕，因为引入trait的目的是在不依赖继承的情况下，给多个类引入相同的功能，而且使用`parent`不仅要求类有父类，还需要有特定的方法。

附带说明`parent`一下，在编译时不会检查调用，您可以定义简单的类，该类不会在其方法中使用父调用扩展任何内容，它会一直工作，直到调用其中一个方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-24T21:00:46.713

PHP 编译阶段仅创建字节码。其他一切都是在运行时完成的，包括多态决策。因此，如下代码编译：

```
class A {}
class B extends A {
    public function __construct() {
        parent::__construct();
    }
} 
```

但[运行](https://3v4l.org/6kmXV)时会爆炸：

```
$b = new B; 
```

因此，您严格不能`parent`在编译时进行检查。您能做的最好的事情就是尽早将其推迟到运行时。正如其他答案所示，可以在 trait 方法中使用`instanceof`. 当我知道 trait 方法需要特定契约时，我个人更喜欢使用类型提示。

所有这些都归结为特征的基本目的：编译时复制和粘贴。而已。Traits 对合同一无所知。对多态一无所知。它们只是提供了一种重用机制。当与接口结合使用时，它们非常强大，虽然有些冗长。

事实上，关于特质的[第一次学术讨论](http://scg.unibe.ch/archive/papers/Scha03aTraits.pdf)揭示了特质意味着“纯粹”的想法，因为它们对周围的对象一无所知：

> trait 本质上是一组纯方法，它们充当类的构建块，是代码重用的基本单元。在这个模型中，类由一组特征组成，通过指定将特征连接在一起并访问必要状态的粘合代码。

[“如果特质不邪恶，它们会很有趣”](https://eliasvo.wordpress.com/2015/06/07/php-traits-if-they-werent-evil-theyd-be-funny/)很好地总结了要点、陷阱和选项。我不会分享作者对特征的刻薄：我会在有意义的时候使用它们，并且总是与`interface`. 不幸的是，PHP 文档中的示例鼓励了不良行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-28T16:41:03.567

我认为有一种完全没有特征的方法：

```
class BaseClass 
{
    public function sayHello() {
            echo 'Hello ';
    }
}

class SayWorld
{
    protected $parent = null;

    function __construct(BaseClass $base) {
        $this->parent = $base;
    }

    public function sayHelloWorld()
    {
        $this->parent->sayHello();
        echo 'World!';
    }
}

class MyHelloWorld extends Base {
    protected $SayWorld = null;

    function __construct() {
        $this->SayWorld = new SayWorld($this);
    }

    public function __call ( string $name , array $arguments ) {
        if(method_exists($this->SayWorld, $name)) {
            $this->SayWorld->$name();
        }
    }
} 
```

# c++ - 如何修复无限运行的嵌套 while 循环？

> ID：13002599
> 
> 赞同：0
> 
> 时间：2012-10-21T21:58:27.777
> 
> 标签：c++, infinite-loop

所以我遇到了另一个问题。我一直试图解决这个问题大约一个小时，但没有运气。我无法让这个嵌套的 while 循环工作。代码应该根据输入放入行中，但目前它会一直持续下去。

```
#include <iostream>
using namespace std;
void PrintLines(char characterValue, int characterCount, int lineCount);

// I'm going to have to change char characterValue to int characterValue
// will this still work if they are in seperate files?

void PrintLines(char characterValue, int characterCount, int lineCount)
    {
        while (lineCount--)                 //This is the problem
        {
            while (characterCount--)
            {
                cout << characterValue;
            }
            cout << "\n";
        }

    }

int main()
{

    char Letter;
    int Times;
    int Lines;

    cout << "Enter a capital letter: ";
    cin >> Letter;
    cout << "\nEnter the number of times the letter should be repeated: ";
    cin >> Times;
    cout << "\nEnter the number of Lines: ";
    cin >> Lines;

    PrintLines(Letter, Times, Lines);

    return 0; 
```

当我这样做以检查它是否正常工作时。我看到它确实...

```
 while (lineCount--)                 //This is to check
        cout << "\n%%%";
        {
            while (characterCount--)
            {
                cout << characterValue;
            }
        } 
```

它打印 :(如果 Lines = 4 and Times = 3 and Letter = A)

```
%%%
%%%
%%%
%%%AAA 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:03:37.040

```
 while (lineCount--)                 //This is the problem
    {
        while (characterCount--)
        {
            cout << characterValue;
        }
        cout << "\n";
    } 
```

在 lineCount 的第一次迭代之后，characterCount 为负数。你不断递减它，它永远不会再次达到零，直到它溢出。

做：

```
 while (lineCount--)                 //This is the problem
    {
        int tmpCount = characterCount;
        while (tmpCount--)
        {
            cout << characterValue;
        }
        cout << "\n";
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T22:04:02.070

问题是您似乎期望`characterCount`循环的每次迭代都会获得其原始值。但是，由于您在内部循环中更改它，它会到达`-1`并且需要很长时间才能回到`0`. 您需要保留原件`characterCount`，例如，使用专门为每个循环使用的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T22:00:12.723

代替“%%%”，打印一些有用的东西，比如`characterCount`and的值`lineCount`。然后你会看到你的循环在做什么，最终你做错了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T22:04:00.290

这应该可以修复您的代码。你`characterCount`的减到零以下，我阻止了这一点：

```
void PrintLines(char characterValue, int characterCount, int lineCount)
{   
    while (lineCount--)                 
    {   
        int cCount = characterCount;//This was the problem

        while (cCount--) // and this fixes it
        {   
            cout << characterValue;
        }   

        cout << "\n";
        cCount = characterCount ; 
    }   

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T22:22:59.877

除非您被限制使用嵌套循环，否则执行以下操作可能更简单：

```
// Beware: untested in the hopes that if you use it, you'll need to debug first
std::string line(Times, Letter);

std::fill_n(std::ostream_iterator<std::string>(std::cout, "\n"), 
            lineCount,
            line); 
```

# json - MongoDB 集合格式

> ID：13002601
> 
> 赞同：1
> 
> 时间：2012-10-21T21:58:54.383
> 
> 标签：json, node.js, mongodb

我需要用相应的菜单项来存储餐馆，所以我做了这样的事情

```
{ name: 'Foo',
  menu: 
 [ { item: 'foo',
   description: '...',
   price: 20 },
 { item: 'bar',
   description: '...',
   price: 30 } ]
} 
```

问题是我有时需要访问这些项目，但这样做并不容易，我应该改用这样的东西吗？

```
{ name: 'Foo',
menu: 
{ "0": { item: 'foo',
   description: '...',
   price: 20 },
 "1": { item: 'bar',
   description: '...',
   price: 30 } }
} 
```

我认为找到一个特定的项目更便宜。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:15:47.360

使用可通过编号键访问的嵌入式对象很少是正确的方法。MongoDB 有操作符来方便访问数组中的项目，从而提供更好的灵活性。

有关仅提取所需数组元素的方法，请参阅[`$elemMatch`](http://docs.mongodb.org/manual/reference/projection/elemMatch/)和投影运算符。[`$`](http://docs.mongodb.org/manual/reference/operator/positional/)

例如，`'foo'`要从您的第一个示例文档中获取菜单项：

```
db.restaurants.findOne({name: 'Foo'}, {menu: {$elemMatch: {item: 'foo'}}}); 
```

# algorithm - 了解速度并实施 Boids 算法？

> ID：13002603
> 
> 赞同：3
> 
> 时间：2012-10-21T21:59:01.600
> 
> 标签：algorithm, data-structures, vector, vectormath, boids

因此，我正在根据[此处的伪代码](http://www.kfish.org/boids/pseudocode.html)将 Boids 移植到 Brightscript 。

我试图了解所涉及的数据结构，例如 Velocity 是单个值，还是 3D 值？（即`velocity={x,y,z}`）

似乎伪代码似乎混淆了这一点，有时它有一个包含向量和单值项的方程：

```
v1 = rule1(b)
v2 = rule2(b)
v3 = rule3(b)

b.velocity = b.velocity + v1 + v2 + v3 
```

如果 Velocity 是一个三方值，那么这是有道理的，但我不确定。

所以，我的第一个问题：基于上面的伪代码，这是单个 boid 的正确数据结构吗？

```
boid={position:{px:0,py:0,pz:0},velocity:{x:0,y:0,z:0},vector:{x:0,y:0,z:0},pc:{x:0,y:0,z:0},pv:{x:0,y:0,z:0}) 
```

其中`pc`= 感知中心，和`pv`= 感知速度。

我已经实现了一个`vector_add`、、、`vector_sub`和`vector_div`向量布尔函数。

我从这个伪代码开始的原因是我找不到任何其他可读的东西，但它仍然给我留下了很多问题，因为没有为每个变量明确定义数据结构。

**（编辑）**这是我正在谈论的一个很好的例子：

```
IF |b.position - bJ.position| < 100 THEN 
```

如果`b.position - b[j].position`都是 3D 坐标，除非它们是 3D 坐标，否则它们如何被视为“小于 100” `< {100,100,100}`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T22:38:19.903

## 速度

如果您查看[他们的向量加减伪代码](http://www.kfish.org/boids/pseudocode.html#ref1)，他们会明确地对三维向量执行这些操作，例如

```
PROCEDURE Vector_Add(Vector v1, Vector v2)
    Vector v
    v.x = v1.x + v2.x
    v.y = v1.y + v2.y
    v.z = v1.z + v2.z
    RETURN v
END PROCEDURE 
```

在*辅助功能*部分，它还说：

> ...上述伪代码中的所有加减法都是向量运算

所以我们可以假设`b.velocity = b.velocity + v1 + v2 + v3 + ...`是 3D 向量的向量加法。

## 矢量幅度

两个向量相减称为向量之间的差，并产生一个新向量。在你的情况下，让`diffB = b.position - bJ.position`.

Now`|b.position - bJ.position|`等价于`|diffB|`，并且取差分向量 的大小，而不是*“单个值”*`diffB` （称为标量）的绝对值。大小也称为向量长度或范数。

 *可能令人困惑的是，向量的大小用与绝对值相同的符号表示。差分向量也是如此`diffB`，并且`|diffB|`是该向量的大小。`v`量级由 为欧几里得空间中的向量定义`|v| = sqrt(x1^2 + ... + xn^2)`。

因此，对于您的 3D 矢量`diffB`：

```
|diffB| = sqrt(x1^2 + x2^2 + x3^2) = sqrt(x^2 + y^2 + z^2) 
```

由于平方根的结果是一个标量，它可以清楚地满足`< 100`。

* * *

所以是的，我相信速度是一个 3D 矢量`velocity = {x1, x2, x3}`，虽然我还没有彻底审查过 boid 伪代码，但您的数据结构似乎是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T22:29:44.043

这里的表达是什么：

```
|b.position - bJ.position| 
```

实际上是两个向量之差的标量。

此标量是单个值，因此可以小于 100。*

# dart - 如何在 Dart 中创建复合组件？

> ID：13002606
> 
> 赞同：1
> 
> 时间：2012-10-21T21:59:11.107
> 
> 标签：dart

你如何在 Dart 中创建复合组件？

我想创建一些带有结构化输入字段的业务表单：标签、输入文本、特定字段错误消息的位置？所有表单都将使用数据驱动的方法创建，因此需要以编程方式完成。

是否像子类化 DivElement 然后添加应用了某些样式的组件一样简单？

我一直在使用 dart 编辑器尝试构建一些可以做到这一点的类，但运气不佳。所有样本都非常独特，与业务数据输入等没有太大关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:22:06.963

DivElement 只是 DOM div 元素的包装器，因此您不能直接扩展它。然而，新的网络技术正在很好地帮助您解决这个问题。查看 Dart 的[Web 组件库](https://github.com/dart-lang/dart-web-components)。还有一些提供此功能的社区 UI 库。你可以在[这里](http://blog.dartwatch.com/p/community-dart-packages-and-examples.html)找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:15:54.260

不幸的是，您还不能从 DOM 中继承元素……。（这不是 Dart 问题，而是一般 Web 开发的问题。）但是，正在构建一个名为“Web 组件”的新系统来解决这个（和其他）问题。

Dart 支持 Web 组件，您可以将 Web 组件编译成普通的 HTML/JavaScript/CSS 并在现代浏览器中运行。您可以使用 Web 组件封装样式、结构和行为。这为您提供了您要求的基本嵌套/合成。

这是具有行为的表单的示例组件：

```
<!DOCTYPE html>
<!--
Copyright (c) 2012, the Dart project authors.  Please see the AUTHORS file
for details. All rights reserved. Use of this source code is governed by a
BSD-style license that can be found in the LICENSE file.
-->
<html lang="en">
<body>
<element name="x-todo-form" extends="div" constructor="FormComponent"
         apply-author-styles>
  <template>
    <!-- Note: <form> is to make "enter" work on Opera/IE. -->
    <form data-action="submit:addTodo">
      <input id="new-todo" placeholder="What needs to be done?" autofocus
             data-action="change:addTodo">
    </form>
  </template>
  <script type="application/dart">
  import 'model.dart';
  import 'package:web_components/web_component.dart';

  class FormComponent extends WebComponent {
    void addTodo(e) {
      e.preventDefault(); // don't submit the form
      if (_newTodo.value == '') return;
      app.todos.add(new Todo(_newTodo.value));
      _newTodo.value = '';
    }
  }
  </script>
</element>
</body>
</html> 
```

您可以像这样使用这个自定义元素：

```
<!DOCTYPE html>
<!--
Copyright (c) 2012, the Dart project authors.  Please see the AUTHORS file
for details. All rights reserved. Use of this source code is governed by a
BSD-style license that can be found in the LICENSE file.
-->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <link rel="components" href="newform.html">
  <title>dart - TodoMVC</title>
</head>
<body>
  <section id="todoapp">
    <header id="header">
      <h1 class='title'>todos</h1>
      <x-todo-form></x-todo-form>
    </header> 
```

请注意该部分中的`<link>`标签，该标签`<head>`会拉入组件。然后注意`<x-todo-form>`自定义标签，这是您在第一个示例中构建的自定义组件。

多田！自定义和复合元素！:)

[开源 Dart + Web Components 项目](https://github.com/dart-lang/dart-web-components)可用。还提供了一个[带有 Dart + Web 组件的 TODOMVC 运行示例](http://dart-lang.github.com/dart-web-components/example/todomvc/index.html)。观看[有关 Web 组件的精彩视频](http://www.youtube.com/watch?v=2txPYQOWBtg)。

# c++ - 如何在 cuda 内核中添加矢量元素？

> ID：13002610
> 
> 赞同：3
> 
> 时间：2012-10-21T21:59:59.130
> 
> 标签：c++, cuda

```
#include <cuda.h>
#include <cuda_runtime.h>
#include <iostream>
#include <vector>
using namespace std;

__global__ void kernel(vector <int> *a,vector <int> *b, vector <int> *c)
{
    int index=threadIdx.x;
    c[index]=a[index]+b[index];
};

int main ()
{
    //Paar constanten initializeren
    int N=3;
    vector <int> a (3,1);
    vector <int> b (3,1);
    vector <int> c (3,0);
    int size=N*sizeof(vector <int>);
    //Device variabelen
    vector <int> d_a;
    vector <int> d_b;
    vector <int> d_c;

    //<size> bytes device-geheugen vrijmaken op locatie &a
    cudaMalloc( (void **) &a, size);
    cudaMalloc ( (void **) &b, size);
    cudaMalloc ( (void **) &c, size);

    //Kopieer inputs van &a naar &d_a
    cudaMemcpy(&d_a,&a,size,cudaMemcpyHostToDevice);
    cudaMemcpy(&d_b,&b,size,cudaMemcpyHostToDevice);

    printf( (char *) a[1]);
    printf( (char *) c[1]);
    //Voer kernel uit

    kernel<<<N,1>>>(&d_a,&d_b,&d_c);

    //Kopieer resultaat terug naar host 
    cudaMemcpy(&c,&d_c,size,cudaMemcpyDeviceToHost);

    printf( (char *) c[1]);

    return 0;
}; 
```

所以这是我的基本 C++ 向量加法程序，虽然它不会编译，因为它不知道在添加索引时如何处理“+”（“无运算符”+“匹配这些操作数”）。任何人都知道为什么这在内核中不起作用？我认为这可能与它是一个**主机**功能或类似的东西有关，尽管我不知道如何解决这个问题。

提前问候和感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T22:03:06.713

您不能在设备代码中使用 STL ...您将不得不使用数组或其他一些 CUDA 构造，例如[Thrust Library](http://code.google.com/p/thrust/)。

# ios - 在 Xcode 中强制 3.5" 屏幕模式

> ID：13002613
> 
> 赞同：2
> 
> 时间：2012-10-21T22:00:17.507
> 
> 标签：ios, xcode, ios6

如何强制我在 Xcode 4.5 中的新构建以 3.5" 屏幕模式运行？我没有包含 Default-568@2x.png 但在使用这种类型进行测试时应用程序仍以全 4" 屏幕模式运行模拟器中的设备。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T22:34:43.420

在模拟器中，选择 Hardware > Device > iPhone (Retina 3.5-inch) *，然后再*运行您的应用程序。

或者在 Xcode 中，选择 Product > Edit Scheme。然后选择选项选项卡。从 iPhone Simulator Display 弹出菜单中，选择“Retina (3.5-inch)”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T22:17:54.063

从模拟器中删除应用程序，并在 Xcode 中执行项目菜单 Option-Clean，在从目标中删除高默认 png 之后，以及在（重新）构建之前。

# c# - 如何将新对象添加到数据库？

> ID：13002616
> 
> 赞同：1
> 
> 时间：2012-10-21T22:00:43.303
> 
> 标签：c#, entity-framework, ado.net, ado.net-entity-data-model, savechanges

我想在我的数据库中添加一本新书，但它不起作用。

```
class Program
    {
        static void Main(string[] args)
        {
            Knigi_DataEntities entities = new Knigi_DataEntities();
                Books newBook = new Books();
                newBook.Name = "C# 4 How-to";
                newBook.Published = 2010;
                newBook.Book_ID = 4;
                entities.AddToBooks(newBook);
                entities.SaveChanges();

            Knigi_DataEntities ent = new Knigi_DataEntities(); 
                  foreach (var book in ent.Books)
                {
                    Console.WriteLine("{0}, {1} {2}  ",
                    book.Book_ID, book.Name, book.Published);
                }
              }
            } 
```

但是当我关闭时`//entities.SaveChanges();`，控制台会显示我的数据库中已经存在的对象。因此问题是由`entities.SaveChanges();`
请告诉我，如何添加新对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:03:51.370

你可以试试这个

```
 entities.Books.AddObject(newBook);
 entities.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:28:19.573

您确定 Id 不是主键，因此它想自动生成一个并且您不必输入它吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T22:52:18.487

这里的一个问题可能是您有一个 int 类型的主键，但在您的数据库中没有设置为 AutoIncrement。创建新`Books`的时会出现的问题是 int 的默认值是`0`并且该 ID 已经存在于您的数据库中。

一个解决方案是在您的数据库中将其设置为 AutoIncrement 或检查最高 ID，添加 1，将其分配给您的 Books 对象并插入它。

在这种情况下，我会选择 AutoIncrement，因为它是最简单的，而且您不必考虑并发性。

# wordpress - 带有子域漂亮永久链接的 wordpress 多站点

> ID：13002621
> 
> 赞同：0
> 
> 时间：2012-10-21T22:01:22.143
> 
> 标签：wordpress, apache, .htaccess, mod-rewrite

我正在尝试建立一个 wordpress (3.4.2) 多站点。当前站点已经应用了以下 apache 规则，*我没有编辑权限*

```
<VirtualHost xx.xx.xx.xxx:80>
  ServerName foo.example.nl
  ServerAlias www.foo.example.nl
  DocumentRoot /web/sites/example.nl/foo/www
  RewriteEngine On
<Location />
  Allow from all
</Location>
</VirtualHost> 
```

这很好用，但是我发现尝试使用“帖子名称”选项设置永久链接总是会给我一个 404 重定向。 [http://foo.example.nl/post1](http://foo.example.nl/post1) = 404 未找到

目前我已经卸载了多站点，只是为了尝试让漂亮的 url 与子域一起使用，但是在尝试了我的 .htaccess 的许多不同变体之后，但似乎没有任何效果。这是当前的 .htaccess wordpress 生成：

```
<IfModule mod_rewrite.c>
 RewriteEngine On
 RewriteBase /
 RewriteRule ^index\.php$ - [L]
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule . /index.php [L]
 </IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:42:04.717

不幸的是，您可能无法使用`.htaccess`来配置`RewriteRules`. 如果您参考有关[使用“漂亮”永久链接](http://codex.wordpress.org/Using_Permalinks#Using_.22Pretty.22_permalinks)的 Wordpress 文档，您将看到您需要`Options FollowSymLinks`启用以及`AllowOverride Fileinfo`或`AllowOverride All`能够使用`.htaccess`. 由于这些似乎没有设置为您的`<VirtualHost>`，因此很可能是您的问题，因为它们通常*不会*在 Apache 配置中设置在更高级别。

# asp.net-mvc - ASP.NET MVC 4 Web API & Knockout.js

> ID：13002622
> 
> 赞同：2
> 
> 时间：2012-10-21T22:01:38.997
> 
> 标签：asp.net-mvc, mvvm, knockout.js, asp.net-web-api

我正在使用新的 Web API 和 Knockout 开始一个概念验证 SPA，到目前为止，我已经设法创建 API 控制器，使用 Knockout 使用它，并使用 Knockout 映射映射实体和数组。

我现在正在尝试创建一个简单的 CRUD，但我无法理解如何实现 ViewModel。

到目前为止，我提出了 2 个选项，如下所示：

*   我可以在服务器上定义一个 ViewModel，它包含实体的属性，以及相同实体的数组。当我输入 CRUD 功能时，我调用服务器并检索该 ViewModel，其中包含实体列表和用于创建新条目的属性。

*   我可以定义 2 个 ViewModel，一个带有网格数据，另一个带有实体的属性。当我调用 CRUD 功能时，我得到了网格数据，当我想编辑/创建一个新条目时，我调用服务器并为此检索 ViewModel。

在这两个选项中，我使用一个视图，其中包含网格定义和编辑/创建表单格式，我在 JQuery 弹出窗口中显示。

我不知道哪个是最好的选择，我开始倾向于第二个，但我们将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:45:00.440

您真的需要在启动“创建/编辑”对话框时调用服务器吗？难道你不能有一个 EntityVM 的 ObservableArray（一个 Knockout 视图模型）作为你的网格的绑定源，当你单击 Add New 或单击现有项目时，创建/编辑对话框可见（可能是也完成了绑定）使用空 EntityVM 作为其数据源或从网格源的项目复制的填充 EntityVM？然后当您单击保存时，将实体作为 JSON 发送到服务器并返回表示更新的网格数据的 JSON 响应？或者这不是对您的上下文的正确理解？

# php - 如何在 Laravel Blade 模板中设置变量

> ID：13002626
> 
> 赞同：311
> 
> 时间：2012-10-21T22:02:08.483
> 
> 标签：php, laravel, laravel-blade

我正在阅读 Laravel Blade[文档](https://laravel.com/docs/master/blade)，但我不知道如何在模板中分配变量以供以后使用。我不能这样做`{{ $old_section = "whatever" }}`，因为那会呼应“随便”，我不希望那样。

我知道我可以做到`<?php $old_section = "whatever"; ?>`，但这并不优雅。

在 Blade 模板中是否有更好、更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：444
> 
> 时间：2014-09-02T08:19:27.817

**Laravel 5.5 及更高版本**

使用刀片指令的完整形式：

```
@php
$i = 1
@endphp 
```

**拉拉维尔 5.2 - 5.4**

您可以使用内联标签：

```
@php ($i = 1) 
```

或者您可以在块语句中使用它：

```
@php
$i = 1
@endphp 
```

**添加“定义”标签**

如果您想使用自定义标签并使用@define 而不是@php，请像这样扩展 Blade：

```
/*
|--------------------------------------------------------------------------
| Extend blade so we can define a variable
| <code>
| @define $variable = "whatever"
| </code>
|--------------------------------------------------------------------------
*/

\Blade::extend(function($value) {
    return preg_replace('/\@define(.+)/', '<?php ${1}; ?>', $value);
}); 
```

然后执行以下操作之一：

快速解决方案：如果你比较懒，只需将代码放在 AppServiceProvider.php 的 boot() 函数中即可。

更好的解决方案：创建自己的服务提供商。有关如何在 Laravel 5 中扩展刀片的信息，请参阅[https://stackoverflow.com/a/28641054/2169147](https://stackoverflow.com/a/28641054/2169147)。这种方式需要更多的工作，但是关于如何使用提供者的一个很好的练习:)

**拉拉维尔 4**

你可以把上面的代码放在*app/start/global.php*的底部（或者任何你觉得更好的地方）。

* * *

进行上述更改后，您可以使用：

```
@define $i = 1 
```

定义一个变量。

* * *

## 回答 #2

> 赞同：136
> 
> 时间：2012-10-22T20:32:18.267

不鼓励在视图中这样做，因此没有刀片标签。如果您确实想在刀片视图中执行此操作，您可以在编写时打开一个 php 标签或注册一个新刀片标签。只是一个例子：

```
<?php
/**
 * <code>
 * {? $old_section = "whatever" ?}
 * </code>
 */
Blade::extend(function($value) {
    return preg_replace('/\{\?(.+)\?\}/', '<?php ${1} ?>', $value);
}); 
```

* * *

## 回答 #3

> 赞同：118
> 
> 时间：2013-06-18T19:05:11.337

在[laravel-4](/questions/tagged/laravel-4 "显示标记为“laravel-4”的问题")中，您可以使用模板注释语法来定义/设置变量。

注释语法是 `{{-- anything here is comment --}}`，它由[刀片](/questions/tagged/blade "显示标记为“刀片”的问题")引擎呈现为

`<?php /* anything here is comment */ ?>`

所以我们可以用它来定义变量，例如

```
{{-- */$i=0;/* --}} 
```

将由[刀片](/questions/tagged/blade "显示标记为“刀片”的问题")渲染为 `<?php /* */$i=0;/* */ ?>`我们设置变量。无需更改任何代码行。

* * *

## 回答 #4

> 赞同：58
> 
> 时间：2013-05-30T13:06:22.970

有一个简单的解决方法，不需要您更改任何代码，它也适用于 Laravel 4。

`=`您只需在传递给语句的表达式中使用赋值运算符 ( ) `@if`，而不是（例如）诸如`==`.

```
@if ($variable = 'any data, be it string, variable or OOP') @endif 
```

然后你可以在任何你可以使用任何其他变量的地方使用它

```
{{ $variable }} 
```

唯一的缺点是，对于不知道您正在将其作为一种解决方法的人来说，您的分配*看起来像是一个错误。*

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2015-05-26T13:16:38.410

你们会让事情变得太复杂。

只需使用普通的php

```
<?php $i = 1; ?>
{{$i}} 
```

甜品。

（或[https://github.com/alexdover/blade-set](https://github.com/alexdover/blade-set)看起来也很简单）

我们都在通过在视图中设置变量来“破解”系统，那么为什么要让“破解”变得更加复杂呢？

在 Laravel 4 中测试。

另一个好处是语法突出显示可以正常工作（我之前使用过评论黑客，阅读起来很糟糕）

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2016-07-21T09:21:21.803

从 Laravel 5.2.23 开始，你有了[@php Blade 指令](http://themsaid.com/laravel-5-2-23-20160305/)，你可以使用内联或块语句：

```
@php($old_section = "whatever") 
```

或者

```
@php
    $old_section = "whatever"
@endphp 
```

* * *

## 回答 #7

> 赞同：23
> 
> 时间：2018-05-13T05:59:23.990

您可以在 Blade 模板引擎中通过以下方式设置变量：

**1\. 通用 PHP 块**
**设置变量：** `<?php $hello = "Hello World!"; ?>`
**输出：** `{{$hello}}`

**2\. Blade PHP 块**
**设置变量：** `@php $hello = "Hello World!"; @endphp`
**输出：** `{{$hello}}`

* * *

## 回答 #8

> 赞同：20
> 
> 时间：2013-05-10T16:19:45.137

您可以在视图文件中设置一个变量，但它会像您设置的一样被打印出来。无论如何，有一个解决方法。您可以在未使用的部分中设置变量。例子：

```
@section('someSection')
  {{ $yourVar = 'Your value' }}
@endsection 
```

然后`{{ $yourVar }}`将在您想要的任何地方打印`Your value`，但是在保存变量时您不会得到输出。

**编辑：**需要命名该部分，否则将引发异常。

* * *

## 回答 #9

> 赞同：19
> 
> 时间：2020-03-07T11:35:58.267

在 laravel 文档[https://laravel.com/docs/5.8/blade#php](https://laravel.com/docs/5.8/blade#php) 你可以这样做：

```
@php
     $my_variable = 123;
@endphp 
```

* * *

## 回答 #10

> 赞同：16
> 
> 时间：2014-02-06T19:55:31.227

**在 Laravel 4 中：**

如果您希望变量可以在所有视图中访问，而不仅仅是您的模板，`View::share`这是一个很好的方法（[有关此博客的更多信息](https://web.archive.org/web/20150315064629/http://atomicplayboy.net/blog/2013/06/25/global-view-variables-in-laravel/)）。

*只需在app/controllers/BaseController.php*中添加以下内容

 *```
class BaseController extends Controller
{
  public function __construct()
  {                   
    // Share a var with all views
    View::share('myvar', 'some value');
  }
} 
```

现在`$myvar`将可用于您的所有视图 - 包括您的模板。

我用它来为我的图像设置环境特定的资产 URL。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2013-03-27T15:53:49.460

And suddenly nothing will appear. From my experience, if you have to do something like this prepare the html in a model's method or do some reorganizing of your code in to arrays or something.

There is never just 1 way.

```
{{ $x = 1 ? '' : '' }} 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2016-05-02T11:25:35.193

我将扩展@Pim 给出的答案。

将此添加到 AppServiceProvider 的启动方法中

```
<?php
/*
|--------------------------------------------------------------------------
| Extend blade so we can define a variable
| <code>
| @set(name, value)
| </code>
|--------------------------------------------------------------------------
*/

Blade::directive('set', function($expression) {
    list($name, $val) = explode(',', $expression);
    return "<?php {$name} = {$val}; ?>";
}); 
```

这样您就不会暴露编写任何 php 表达式的能力。

你可以像这样使用这个指令：

```
@set($var, 10)
@set($var2, 'some string') 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2021-06-02T12:36:15.393

**Laravel 7：**

```
{{ $solution = "Laravel 7 is awesome and easy to use !!" }} 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2016-04-21T21:02:34.060

**在 Laravel 5.1、5.2 中**：

[https://laravel.com/docs/5.2/views#sharing-data-with-all-views](https://laravel.com/docs/5.2/views#sharing-data-with-all-views)

> 您可能需要与应用程序呈现的**所有视图**共享一条数据。您可以使用视图工厂的 share 方法来执行此操作。通常，您应该在服务提供者的引导方法中调用共享。您可以随意将它们添加到 AppServiceProvider 或生成单独的服务提供者来容纳它们。

编辑文件：`/app/Providers/AppServiceProvider.php`

```
<?php

namespace App\Providers;

class AppServiceProvider extends ServiceProvider
{        
    public function boot()
    {
        view()->share('key', 'value');
    }

    public function register()
    {
        // ...
    }
} 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2016-10-11T12:29:10.050

你可以使用我发布的包：[https ://github.com/sineld/bladeset](https://github.com/sineld/bladeset)

然后你很容易设置你的变量：

```
@set('myVariable', $existing_variable)

// or

@set("myVariable", "Hello, World!") 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2014-10-17T04:30:43.980

至于我的优雅方式如下

```
{{ ''; $old_section = "whatever"; }} 
```

只是回显你的`$old_section`变量。

```
{{ $old_section }} 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2016-10-24T12:56:13.743

为刀片模板分配变量，这是解决方案

我们可以`<?php ?>`在刀片页面中使用标签

```
<?php $var = 'test'; ?>
{{ $var } 
```

或者

我们可以使用特殊语法的刀片注释

```
{{--*/ $var = 'test' /*--}}
{{ $var }} 
```

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2016-06-15T22:38:18.573

**如果您有**PHP 7.0：

**最简单有效的方法是*在括号内***赋值。

规则很简单：你是否多次使用你的变量？然后在第一次使用时在括号内声明它，保持冷静并继续。

```
@if(($users = User::all())->count())
  @foreach($users as $user)
    {{ $user->name }}
  @endforeach
@else
  There are no users.
@endif 
```

是的，我知道`@forelse`，这只是一个演示。

由于您的变量现在在使用时声明，因此不需要任何刀片解决方法。

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2020-09-27T10:16:50.643

我也为同样的问题而苦苦挣扎。但是我能够通过使用以下代码段来解决这个问题。在刀片模板中使用它。

```
<input type="hidden" value="{{$old_section = "whatever" }}">

{{$old_section }} 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2012-10-21T22:18:32.293

我不认为你可以 - 但话又说回来，这种逻辑可能应该在你的控制器中处理并传递到已经设置的视图中。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2016-04-22T22:15:59.123

我一直在寻找一种方法来为键分配值并在我看来多次使用它。对于这种情况，您可以`@section{"key", "value"}`首先使用，然后调用`@yield{"key"}`以在视图或其子视图的其他位置输出值。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2014-12-11T06:46:07.030

黑客评论不是一种非常易读的方法。此外，编辑器会将其着色为注释，并且在查看代码时可能有人会错过它。

尝试这样的事情：

```
{{ ''; $hello = 'world' }} 
```

它将编译为：

```
<?php echo ''; $hello = 'world'; ?> 
```

...并完成任务而不是回显任何内容。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2015-07-05T12:02:21.283

最好练习在 Controller 中定义变量，然后使用`compact()`or`->with()`方法传递给视图。

否则#TLGreg 给出了最佳答案。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2015-12-09T13:04:15.870

[Blade radic/blade-extensions](https://packagist.org/packages/radic/blade-extensions)有一个很好的扩展。添加后，您可以使用 @set(variable_name, variable_value)

```
@set(var, 33)
{{$var}} 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2014-08-18T07:12:50.463

[我有一个类似的问题，并通过View Composers](http://laravel.com/docs/responses#view-composers)找到了我认为正确的解决方案

View Composer 允许您在每次调用某个视图时设置变量，它们可以是特定视图或整个视图模板。无论如何，我知道这不是问题的直接答案（而且为时已晚 2 年），但它似乎是一个比使用刀片在视图中设置变量更优雅的解决方案。

```
View::composer(array('AdminViewPath', 'LoginView/subview'), function($view) {
    $view->with(array('bodyClass' => 'admin'));
}); 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2013-08-15T16:37:54.240

在我看来，最好将逻辑保留在控制器中并将其传递给视图以使用。这可以使用 'View::make' 方法的两种方法之一来完成。我目前正在使用 Laravel 3，但我很确定它在 Laravel 4 中是一样的。

```
public function action_hello($userName)
{
    return View::make('hello')->with('name', $userName);
} 
```

或者

```
public function action_hello($first, $last)
{
    $data = array(
        'forename'  => $first,
        'surname' => $last
    );
    return View::make('hello', $data);
} 
```

'with' 方法是可链接的。然后你会像这样使用上面的：

```
<p>Hello {{$name}}</p> 
```

更多信息在这里：

[http://three.laravel.com/docs/views](http://three.laravel.com/docs/views)

[http://codehappy.daylerees.com/using-controllers](http://codehappy.daylerees.com/using-controllers)

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-04-19T16:59:26.293

您可以使用如下所示的 extend 方法来扩展刀片。

```
Blade::extend(function($value) {
    return preg_replace('/\@var(.+)/', '<?php ${1}; ?>', $value);
}); 
```

之后初始化变量如下。

```
@var $var = "var" 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-09-14T10:18:44.873

在刀片文件中，您可以使用这种格式

```
@php
  $i++
@endphp 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2016-03-12T09:19:12.357

laravel 5 你可以轻松做到这一点。见下文

```
{{--*/ @$variable_name = 'value'  /*--}} 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2022-01-30T05:32:41.453

在 laravel8

```
@php

 $name="Abdul mateen";

{{ echo $name; }}

@endphp 
```

* * *

## 回答 #31

> 赞同：-2
> 
> 时间：2016-10-06T07:05:31.333

适用于所有版本的刀片。

```
{{--*/  $optionsArray = ['A', 'B', 'C', 'D','E','F','G','H','J','K'] /*--}} 
```*

# c# - 将标准输入发送到 Arduino C#

> ID：13002627
> 
> 赞同：1
> 
> 时间：2012-10-21T22:02:24.677
> 
> 标签：c#, arduino

我正在尝试从控制台获取标准输入并将其作为纯[ASCII发送到我的](http://en.wikipedia.org/wiki/ASCII)[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)。

`\r\n`我使用以下代码获取输入并从中剥离：

```
String Input = Console.Read().ToString().Replace("\r",string.Empty).Replace("\n",string.Empty); 
```

当我执行`doConsole.WriteLine(Input);`时，它输出正确的“72”，但是当我执行时`serialPort.Write(Input);`，Arduino 返回“55”，它对所有内容都有效。

我究竟做错了什么？

我的 C# 端（主机/PC）代码：

```
String Input = Console.Read().ToString().Replace("\r", string.Empty).Replace("\n",string.Empty);

//Console.WriteLine(Input);
//serialPort.Write(Input);

char[] InputChar = Input.ToCharArray();
serialPort.Write(InputChar,0,1);

//byte[] InputByte = Encoding.ASCII.GetBytes(Input);
//Console.WriteLine(Input);
//serialPort.WriteLine(Input);

Thread.Sleep(25);  //Wait 0.025 second.

//***************************************************************//
// Read anything from the serial port.                           //
//***************************************************************//

numBytes = serialPort.BytesToRead;
for (int i = 0; i < numBytes; i++)
    rxPacket[i] = (byte)serialPort.ReadByte();

result = new char[numBytes];
for (int i = 0; i < numBytes; i++)
    result[i] = (char)rxPacket[i];

Console.Write("Read this from Arduino:");
Console.WriteLine(result);

Console.WriteLine("press Enter to continue");
Console.ReadKey();                                   //Read nothing. 
```

还有我的 Arduino 草图：

```
const int ledPin = 13; // The pin that the LED is attached to.
int incomingByte;      // A variable to read incoming serial data into.

void setup() {
    // Initialize serial communication:
    Serial.begin(9600);
    // Initialize the LED pin as an output:
    pinMode(ledPin, OUTPUT);
}

void loop() {
    // see if there's incoming serial data:
    if (Serial.available() > 0) {
        // Read the oldest byte in the serial buffer:
        incomingByte = Serial.read();
        // If it's a capital H (ASCII 72), turn on the LED:
        if (incomingByte == 'H') {
            digitalWrite(ledPin, HIGH);
            Serial.print(incomingByte);
        }
        // If it's an L (ASCII 76), turn off the LED:
        else if (incomingByte == 'L') {
            digitalWrite(ledPin, LOW);
            Serial.print(incomingByte);
        }
        else{
            Serial.print(incomingByte);
       }
    }
} 
```

编辑：将代码更改为以下。仍然没有运气；我得到同样的答复。

```
String Input = Console.Read().ToString().Replace("\r",string.Empty).Replace("\n",string.Empty);
Console.Write(Input,0,1);
//serialPort.Write(Input);
byte[] inputByte = Encoding.ASCII.GetBytes(Input);
serialPort.Write(inputByte,0,1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:31:37.480

好吧，我查了一下……结果，ASCII 码 55 = `7`.

7是72的第一位。

嗯，所以也许你在这里向 Arduino 发送十进制数字，而 Arduino 会看到`7`第一个。我可以建议转换你的字节并将其作为一个字节发送（一个字节只能包含 0..255），但它是一个单一的 ASCII 码。

也许对于 Arduino 来说，可以考虑，但也许与此无关。代替

```
int incomingByte;  // ints are made of 2 bytes an int isn't an incomming byte 
```

尝试

```
Byte incomingByte; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:08:43.273

所以我设法让它工作

基本上，将其转换为字节需要我一段时间才能解决。

这是我最终得到的代码

```
 String Input = Console.Read().ToString().Replace("\r", string.Empty).Replace("\n",string.Empty);
        Console.Write(Input,0,1);
        byte[] inputByte = new byte[1];
        inputByte[0] = Convert.ToByte(Input);
        serialPort.Write(inputByte, 0, 1);
        //byte[] inputByte = Encoding.ASCII.GetBytes(Input);
        //serialPort.Write(inputByte,0,2);
        //String num = inputByte.ToString();
        //serialPort.WriteLine(num);
       //Console.WriteLine(Input);
        //serialPort.Write(InputByte,0,1);
        Thread.Sleep(25);  //Wait 0.025 second.

        //***************************************************************//
        // Read anything from the serial port.                           //
        //***************************************************************//

        numBytes = serialPort.BytesToRead;
        for (int i = 0; i < numBytes; i++)
            rxPacket[i] = (byte)serialPort.ReadByte();

        result = new char[numBytes];
        for (int i = 0; i < numBytes; i++)
            result[i] = (char)rxPacket[i];

        Console.Write("Read this from Arduino:");
        Console.WriteLine(result);

        Console.WriteLine("press Enter to continue");
        Console.ReadKey();                                   //Read nothing.

Seems to work Perfectly now. 
```

# c - 如何运行c程序并在同一行输入

> ID：13002628
> 
> 赞同：3
> 
> 时间：2012-10-21T22:02:28.780
> 
> 标签：c

我是 C 新手，我想问一下如何运行 C 程序并同时提供输入。

我想做的是运行一个程序（例如fileOpener）并说明要打开哪个文件

```
./fileOpener < filename1 
```

我已经尝试过了，它工作正常，但是我用什么来知道 filename1 是什么？这样我就可以打开文件

```
fp = fopen(filename1, "r") 
```

谢谢。

编辑：好的，我会尝试解释更多。如果没有“<”，那么我可以像以前一样使用命令行参数，但是当我用 < 尝试它时，它不起作用

具体来说：fileOpener代码：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[]){
printf("%s", argv[1]);
} 
```

当我使用`./fileOpener < filename1`输出是`./fileOpener`

我用作`gcc -o fileOpener fileOpener.c`编译器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T22:05:50.803

```
int main(int argc, char *argv[]) 
```

您可以随意命名它们，但这些是正常名称。

`argc`是非负的。它给出了 中有用元素的数量`argv`。

如果 argc 是正数，则`argv[0]`包含程序名称。然后`argv[1]`通过`argv[argc - 1]`指向包含程序命令行参数的字符数组。

例如，如果我在命令行运行一个程序，例如

```
unzip filename.zip 
```

`argc`将等于 2；并将`argv[0]`比较等于`"unzip"`; 并将`argv[1]`比较等于`"filename.zip"`。

[资源](http://www.daniweb.com/software-development/c/threads/30460/can-anyone-please-brief-me-on-argc-and-argv-in-c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T22:10:51.977

你不能这样做，如果你使用重定向（即“<文件名”）文件被系统打开。你*可以*找到这个名字，但它是不可移植的，而且无论如何都没用，因为文件已经打开了。只需使用`stdin`而不是`fp`，您无需使用`fopen()`(nor `fclose()`)：

```
int main()
{
   char buffer[1024];

   // fgets() reads at most 1024 characters unless it hits a newline first
   // STDIN has been already opened by the system, and assigned to data flowing
   // in from our file ( < inputFile ).
   fgets(buffer, 1024, stdin);

   printf("The first line of input was: %s", buffer);
} 
```

另一种方法是使用参数：

```
int main(int argc, char **argv)
{
   FILE *fp = NULL;
   char buffer[1024];

   if (argc != 2)
   {
       fprintf(stderr, "You need to specify one argument, and only one\n");
       fprintf(stderr, "Example: %s filename\n", argv[0]);
       // Except that argv[0], this program's name, counts.
       // So 1 argument in command line means argc = 2.
       return -1;
   }
   printf("I am %s. You wanted to open %s\n", argv[0], argv[1]);

   fp = fopen(argv[1], "r");

   fgets(buffer, 1024, stdin);

   printf("The first line of input was: %s", buffer);

   fclose(fp); fp = NULL; // paranoid check

   return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T22:04:48.130

您需要设置程序以获取命令行参数。这是一个很好的教程，可以解决您的确切问题：

[http://www.cprogramming.com/tutorial/c/lesson14.html](http://www.cprogramming.com/tutorial/c/lesson14.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T22:11:05.730

C 中程序的`main`函数有两个参数：

```
int main(int nArgs, char *pszArgs[]) {} 
```

第一个参数告诉程序当你运行它时有多少参数被传递给程序。通常，这只是 1，因为它包含程序的名称。

第二个参数是一个字符串表，可以这样访问（下面的程序打印给它的参数）：

```
int main(int nArgs, char *pszArgs[])
{
   int i = 0;
   while (i < nArgs)
   {
      printf("param %d: %s\n", i, pszArgs[i]);
      i++;
   }
   return 0;
} 
```

# java - 使用 JSTL 调用对象方法

> ID：13002633
> 
> 赞同：1
> 
> 时间：2012-10-21T22:02:40.870
> 
> 标签：java, jstl

如何使用 JSTL 访问某些对象方法？

假设我的对象是 Person 类的一个实例，并且我有一个`getName()`方法，我想使用 JSTL 在 JSP 页面中调用该方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:10:50.283

另一种显示名称的方法是`<c:out value="${person.name}"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:03:58.277

您将使用以下语法：

```
${person.name} 
```

# php - 使用我自己的密钥文件进行 RSP 加密

> ID：13002636
> 
> 赞同：0
> 
> 时间：2012-10-21T22:02:55.410
> 
> 标签：php, encryption, rsa

好的，所以我对密码学很陌生

我想使用 RSA 加密字符串。我找到了很多示例，但其中大多数都生成自己的公钥/私钥，或者他们使用其他一些密钥格式，如 pem/crt 等

我有自己的 .key 格式的公钥和私钥文件

```
Public key -> http://pastebin.com/hPT9LRCT 
Private key-> http://pastebin.com/UYgJp8K7 
```

如何在 php 中使用我的公钥加密字符串（“hello world”）？

你能给我举个例子或指出我正确的方向吗？

谢谢， 维杜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:43:56.677

试试这个（使用[phpseclib，一个纯 PHP RSA 实现](http://phpseclib.sourceforge.net/)）：

```
<?php
include('Crypt/RSA.php');

$rsa = new Crypt_RSA();
$rsa->loadKey('MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArd+uKDi7g6cpmbotPre9KpFK4U1rM/FlEtHszIrMBmArLID4/uImes2L6K5sbKHbo3sIVdzFgrtB/ZdHTN11bM26OLpovCMs/HF3tqz93RMobdNv63IyOau4YgKZa+U2sW+1fGT1HtBesqGjlVlLZNJVR9ZETj4fuLKjNzOgegdbYFV9jIyP6JDi/9c6oyFRUI1anSWZcDFL+74Y4h4okAcbDgooczxBf3QlIJQdFVs9GOPCoIwmZ29c4VmBvESlRnjtXho/6sNQXlnLsG4v4GCzL7P1YOOf9FqV8XZuXJrEsTVJjDdYJdia6F3G/GRe+lRhReM42qlHqLKZpzjSFwIDAQAB'); // public key

$plaintext = 'hello world';

$rsa->setEncryptionMode(CRYPT_RSA_ENCRYPTION_PKCS1);
$ciphertext = $rsa->encrypt($plaintext); 
```

# java - 将 int 变量的名称存储在 String 中

> ID：13002637
> 
> 赞同：4
> 
> 时间：2012-10-21T22:02:55.470
> 
> 标签：java, string, variables, int

是否可以将`int`变量的名称存储在字符串中并使用该字符串作为参数来更新`int`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T22:04:06.050

是的，这叫做[反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)。

您对[Field](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Field.html)类感兴趣。

**例子：**

```
static class A { 
    public int x = 0;
}

public static void main(String[] args) throws Exception {
    A a = new A();
    Field f = A.class.getField("x");
    f.set(a, 5);
    System.out.println(a.x);
} 
```

请注意，尽管这是可能的——除了极少数情况，不建议使用反射，但它有一些主要缺点（可维护性、安全性、性能......）——这使得替代方案*通常是*更好的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T22:06:17.663

在这种情况下使用反射将是矫枉过正。您可以通过简单地使用来获得预期的行为`Map`：

```
Map<String, Integer> variables = new HashMap<String, Integer>(); 
```

然后映射的键将是变量名，值是实际值：

```
variables.put("var1", 10);
variables.put("var2", 20); 
```

稍后，您将检索如下值：

```
Integer n1 = variables.get("var1"); // n1 == 10
Integer n2 = variables.get("var2"); // n2 == 20 
```

如果您需要更新值：

```
variables.put("var1", variables.get("var1") + 32);
Integer n3 = variables.get("var1"); // n3 == 42 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T22:06:12.490

您的问题的上下文尚不清楚- a`Map<String, Integer>`可能会满足您的需要：

```
Map<String, Integer> map = new HashMap<String, Integer> ();
map.put("int1", 1);
map.put("int2", 2);

//now retrieve the ints based on their name
int int1 = map.get("int1"); 
```

# winapi - win32 等待事件（同步）

> ID：13002639
> 
> 赞同：0
> 
> 时间：2012-10-21T22:03:03.440
> 
> 标签：winapi, events, synchronization

我有 3 个窗口必须使用事件相互交互。窗口 1 和 2 相同；每个只有一个按钮。

基本上，在单击其他两个窗口按钮**之一**之前，我的主窗口（程序 3）不会显示；这是它在实验室中的描述：

您需要使用同步来控制进程（通过 Program1 或 2 启动 Program3，通过关闭 Program3 结束 Program1 或 2）。注意：Program1 和 Program2 必须点击按钮才能接收到死亡信号

到目前为止，我一直在环顾四周，并得到了这个代码：

**主窗口（程序 3）：**

```
#include <windows.h>
#include<string.h>

#include <stdio.h>
#include <tchar.h>
#include <conio.h>
#pragma comment(lib, "winmm.lib")

LRESULT CALLBACK WndProc (HWND, UINT, WPARAM, LPARAM) ;

int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance,
                    PSTR szCmdLine, int iCmdShow)
{
     static TCHAR szAppName[] = TEXT ("RACE") ;
     HWND         hwnd ;
     MSG          msg ;
     WNDCLASS     wndclass ;
     HANDLE hEvents[2];
     hEvents[0] = "btn2";
     hEvents[1] = "btn3";
     DWORD count = 2;

     HBRUSH brush;
     brush = CreateSolidBrush(RGB(255,0,0));

     wndclass.style         = CS_HREDRAW | CS_VREDRAW ;
     wndclass.lpfnWndProc   = WndProc ;
     wndclass.cbClsExtra    = 0;
     wndclass.cbWndExtra    = 0;
     wndclass.hInstance     = hInstance ;
     wndclass.hIcon         = LoadIcon (NULL, IDI_APPLICATION) ;
     wndclass.hCursor       = LoadCursor (NULL, IDC_ARROW) ;
     wndclass.hbrBackground = brush;
     wndclass.lpszMenuName  = NULL ;
     wndclass.lpszClassName = szAppName ;

     if (!RegisterClass (&wndclass))
     {
          MessageBox (NULL, TEXT ("This program requires Windows NT!"), 
                      szAppName, MB_ICONERROR) ;
          return 0 ;
     }
     TCHAR* name;

     //WAIT FOR SIGNAL
     DWORD result = WaitForMultipleObjects(count,hEvents,FALSE,INFINITE);//work on this
     if(result == WAIT_OBJECT_0)
     {
        name = TEXT("Program 1");       
     }
     else if(result == WAIT_OBJECT_0 + 1)
     {
        name = TEXT("Program 2");
     }

    hwnd = CreateWindow (szAppName,                  // window class name
                          name, // window caption
                          WS_OVERLAPPEDWINDOW,        // window style
                          0,              // initial x position
                          0,              // initial y position
                          600,              // initial x size
                          600,              // initial y size
                          NULL,                       // parent window handle
                          NULL,                       // window menu handle
                          hInstance,                  // program instance handle
                          NULL);                     // creation parameters

     ShowWindow (hwnd, iCmdShow) ;//DON'T SHOW UNTIL ANOTHER WINDOW'S BUTTON IS PUSHED.
     UpdateWindow (hwnd) ;

     while (GetMessage (&msg, NULL, 0, 0))
     {
          TranslateMessage (&msg) ;
          DispatchMessage (&msg) ;
     }
     return msg.wParam ;
}

LRESULT CALLBACK WndProc (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{
     HDC         hdc ;
     PAINTSTRUCT ps ;

     TCHAR* carNames[5] = {TEXT("Red Car"), TEXT("Blue Car"), TEXT("Black Car"), TEXT("Green Car"), TEXT("Orange Car")};
     switch (message)
     {
     case WM_CREATE:
         HWND hwndButton;

         for(int i = 0; i < 5; i++)
         {
         hwndButton = CreateWindow ( TEXT("button"),//type of child window 
                                   carNames[i],//text displayed on button
                                   WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON,//type of button
                                   20, (20*i*5+10),
                                   85, 25,
                                   hwnd, //parent handle i.e. main window handle
                                    (HMENU) i,//child ID – any number
                                   ((LPCREATESTRUCT) lParam)->hInstance, NULL);
         }

         break;

          return 0 ;

     case WM_PAINT:
          hdc = BeginPaint (hwnd, &ps) ;

          EndPaint (hwnd, &ps) ;
          return 0 ;

    /* case WM_CLOSE:

          c--;
          DestroyWindow(hwnd);
          return 0 ;*/

     case WM_DESTROY:

          PostQuitMessage (0) ;
          return 0 ;
     }
     return DefWindowProc (hwnd, message, wParam, lParam) ;
} 
```

**窗口 2（程序 2）：**

```
 #include <windows.h>
    #include<string.h>
    #pragma comment(lib, "winmm.lib")

    LRESULT CALLBACK WndProc (HWND, UINT, WPARAM, LPARAM) ;

    int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance,
                        PSTR szCmdLine, int iCmdShow)
    {
         static TCHAR szAppName[] = TEXT ("Part 2") ;
         HWND         hwnd ;
         MSG          msg ;
         WNDCLASS     wndclass ;

         wndclass.style         = CS_HREDRAW | CS_VREDRAW ;
         wndclass.lpfnWndProc   = WndProc ;
         wndclass.cbClsExtra    = 0;
         wndclass.cbWndExtra    = 0;
         wndclass.hInstance     = hInstance ;
         wndclass.hIcon         = LoadIcon (NULL, IDI_APPLICATION) ;
         wndclass.hCursor       = LoadCursor (NULL, IDC_ARROW) ;
         wndclass.hbrBackground = (HBRUSH) GetStockObject (WHITE_BRUSH) ;
         wndclass.lpszMenuName  = NULL ;
         wndclass.lpszClassName = szAppName ;

         if (!RegisterClass (&wndclass))
         {
              MessageBox (NULL, TEXT ("This program requires Windows NT!"), 
                          szAppName, MB_ICONERROR) ;
              return 0 ;
         }

         hwnd = CreateWindow (szAppName,                  // window class name
                              TEXT ("Part 2"), // window caption
                              WS_OVERLAPPEDWINDOW,        // window style
                              0,              // initial x position
                              0,              // initial y position
                              300,              // initial x size
                              200,              // initial y size
                              NULL,                       // parent window handle
                              NULL,                       // window menu handle
                              hInstance,                  // program instance handle
                             NULL) ;                     // creation parameters

         ShowWindow (hwnd, iCmdShow) ;
         UpdateWindow (hwnd) ;

         while (GetMessage (&msg, NULL, 0, 0))
         {
              TranslateMessage (&msg) ;
              DispatchMessage (&msg) ;
         }
         return msg.wParam ;
    }

    LRESULT CALLBACK WndProc (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
    {
         HDC         hdc ;
         PAINTSTRUCT ps ;
         HANDLE hEvent;

         switch (message)
         {
         case WM_CREATE:
             HWND hwndButton2;
               hwndButton2 = CreateWindow ( TEXT("button"),//type of child window 
                                       TEXT("PRESS ME!"),//text displayed on button
                                       WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON,//type of button
                                       20, 20,
                                       200, 25,
                                       hwnd, //parent handle i.e. main window handle
                                        (HMENU) 45,//child ID – any number
                                       ((LPCREATESTRUCT) lParam)->hInstance, NULL);

               hEvent = CreateEvent(NULL, //no security attributes
                FALSE, //auto-reset event object
                FALSE, //initial state is nonsignaled
                L"btn2"); //unnamed object

              return 0 ;

         case WM_PAINT:
              hdc = BeginPaint (hwnd, &ps) ;

              EndPaint (hwnd, &ps) ;
              return 0 ;

         case WM_COMMAND:

             SetEvent("btn2");

             return 0;

         case WM_DESTROY:

              PostQuitMessage (0) ;
              return 0 ;
         }
         return DefWindowProc (hwnd, message, wParam, lParam) ;
    } 
```

和**窗口 3（程序 3）：**与窗口 2 几乎相同

```
#include <windows.h>
#include<string.h>
#pragma comment(lib, "winmm.lib")

LRESULT CALLBACK WndProc (HWND, UINT, WPARAM, LPARAM) ;

int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance,
                    PSTR szCmdLine, int iCmdShow)
{
     static TCHAR szAppName[] = TEXT ("Part 3") ;
     HWND         hwnd ;
     MSG          msg ;
     WNDCLASS     wndclass ;

     wndclass.style         = CS_HREDRAW | CS_VREDRAW ;
     wndclass.lpfnWndProc   = WndProc ;
     wndclass.cbClsExtra    = 0;
     wndclass.cbWndExtra    = 0;
     wndclass.hInstance     = hInstance ;
     wndclass.hIcon         = LoadIcon (NULL, IDI_APPLICATION) ;
     wndclass.hCursor       = LoadCursor (NULL, IDC_ARROW) ;
     wndclass.hbrBackground = (HBRUSH) GetStockObject (WHITE_BRUSH) ;
     wndclass.lpszMenuName  = NULL ;
     wndclass.lpszClassName = szAppName ;

     if (!RegisterClass (&wndclass))
     {
          MessageBox (NULL, TEXT ("This program requires Windows NT!"), 
                      szAppName, MB_ICONERROR) ;
          return 0 ;
     }

     hwnd = CreateWindow (szAppName,                  // window class name
                          TEXT ("Part 3"), // window caption
                          WS_OVERLAPPEDWINDOW,        // window style
                          0,              // initial x position
                          0,              // initial y position
                          300,              // initial x size
                          200,              // initial y size
                          NULL,                       // parent window handle
                          NULL,                       // window menu handle
                          hInstance,                  // program instance handle
                         NULL) ;                     // creation parameters

     ShowWindow (hwnd, iCmdShow) ;
     UpdateWindow (hwnd) ;

     while (GetMessage (&msg, NULL, 0, 0))
     {
          TranslateMessage (&msg) ;
          DispatchMessage (&msg) ;
     }
     return msg.wParam ;
}

LRESULT CALLBACK WndProc (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{
     HDC         hdc ;
     PAINTSTRUCT ps ;
     HANDLE hEvent1;

     switch (message)
     {
     case WM_CREATE:
           HWND hwndButton3;
           hwndButton3 = CreateWindow ( TEXT("button"),//type of child window 
                                   TEXT("PRESS ME!"),//text displayed on button
                                   WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON,//type of button
                                   20, 20,
                                   200, 25,
                                   hwnd, //parent handle i.e. main window handle
                                    (HMENU) 95,//child ID – any number
                                   ((LPCREATESTRUCT) lParam)->hInstance, NULL);

           hEvent1 = CreateEvent(NULL, //no security attributes
            FALSE, //auto-reset event object
            FALSE, //initial state is nonsignaled
            L"btn3"); //unnamed object

          return 0 ;

     case WM_PAINT:
          hdc = BeginPaint (hwnd, &ps) ;

          EndPaint (hwnd, &ps) ;
          return 0 ;

          case WM_COMMAND:

         SetEvent("btn3");

         return 0;

     case WM_DESTROY:

          PostQuitMessage (0) ;
          return 0 ;
     }
     return DefWindowProc (hwnd, message, wParam, lParam) ;
} 
```

这些都在同一个解决方案中；但在不同的项目中（一个解决方案中的多个项目）。

现在的问题是，当我单击任一按钮时，我似乎无法打开主窗口。我尝试了很多不同的东西，但似乎都没有奏效。

任何和所有的帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:21:47.253

```
 HANDLE hEvents[2];
 hEvents[0] = "btn2";
 hEvents[1] = "btn3"; 
```

那是不对的。您必须`CreateEvent`像在其他两个程序中一样调用该函数。

# html - HTML：同侧文本溢出和对齐

> ID：13002641
> 
> 赞同：0
> 
> 时间：2012-10-21T22:03:08.773
> 
> 标签：html, css, layout

我有一个 HTML（从左到右）文本元素，如果它比视口宽，但如果它比左对齐的视口窄，我想向左溢出，切断文本的开头。

这是我的意思的快速ASCII艺术图：

```
+---------------------------+
|Long string of text        |
|                           | 
```

对比

```
+-----------+
|ing of text|
|           | 
```

我不知道这是否可能，更不用说如果它是如何做到的。

我*真的*不在乎使用什么技术来实现这一点，只要它可以在没有插件的现代版本的 Firefox 和 Chrome 中工作。如果可能的话，我希望*它*保留为 HTML 和 CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:39:41.193

我想我自己想通了：

```
<div style="position:absolute; right:0px; min-width:100%">
  <span style="text-align:right; white-space:nowrap">Long string of text</span>
</div> 
```

这似乎创建了一个与视口宽度相同的框，其中包含一个包含文本的框。文本与框的右侧对齐，这意味着溢出在左侧，但框本身默认为左对齐，因此如果它小于 contains `div`，它就位于左侧。

这看起来有什么问题吗？

# minimum-spanning-tree - 在线性时间内重新生成最小生成树？

> ID：13002645
> 
> 赞同：2
> 
> 时间：2012-10-21T22:03:20.980
> 
> 标签：minimum-spanning-tree, minimum-size

如果有一个图 G 有 V 个顶点和 E 个边，并且我已经知道 G 的最小生成树 T，然后如果从 E 中取出一些边并且它们的权重增加了 50，那么这些边可能会也可能不会在最小生成树中。牢记上述情况，有没有办法在线性时间内重新生成新的最小生成树？注意：权重被修改的边数只有 5 个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:16:22.127

您可能想在[此处](https://stackoverflow.com/questions/9811863/dynamic-minimum-spanning-tree)查看 SO 问题。[我相信 Szpira & Pan 在这篇](http://citeseer.uark.edu:8080/citeseerx/showciting;jsessionid=B7CD4862DA3CE36F74A9E8DB352F1711?cid=183881)论文中直接解决了这个问题，并且可以在 O(n) 时间内完成。

# php - Codeigniter，在视图中加载视图，变量不会每次都重置

> ID：13002651
> 
> 赞同：0
> 
> 时间：2012-10-21T22:03:59.240
> 
> 标签：php, codeigniter

我正在使用 Codeigniter 的最新稳定版本。

这是控制器的一部分：

```
$data = array(
    'tracks' => $this->tracks_model->get(NULL, 'start_date'),
    'longest_distance' => $this->tracks_model->get(10, 'distance'),
    'longest_time' => $this->tracks_model->get(10, 'moving_time') 
);

$this->load->view('statistics_view', $data); 
```

这是文件statistics_view.php中的部分代码：

```
<section>

    <h3>Section 1</h3>

    <?php $this->load->view('podium_view', array('tracks' => $longest_time, 'unit' => 'ore', 'function' => 'minutes_to_hours')) ?>

</section>

<section>

    <h3>Section 2</h3>

    <?php $this->load->view('podium_view', array('tracks' => $longest_distance, 'unit' => 'km')) ?>

</section> 
```

我注意到在第二个加载的视图中（在第 2 节内），变量 $function 仍然是从第 1 节设置的，而其他值（traks、unit）是我传递的值。

为什么变量函数仍然设置在第二个视图中？不应该重置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-20T07:09:04.480

在 Codeigniter 3 中，您还可以使用方法重置视图中的变量

```
$this->load->clear_vars(); 
```

[在文档中查看](http://www.codeigniter.com/user_guide/libraries/loader.html?highlight=clear_vars#CI_Loader::clear_vars)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T22:35:04.983

Codeigniter 使用 extract 来转换您传递的变量数组，请参阅[http://php.net/manual/en/function.extract.php](http://php.net/manual/en/function.extract.php) Extract 不断将变量添加到符号表中，并且视图仅作为 PHP 文件包含在内. 因此变量范围是相同的，您将可以访问早期定义的所有变量。extract 的默认行为是在发现冲突时覆盖。如果要重置，则必须传递一些值。

```
<?php $this->load->view('podium_view', array('tracks' => $longest_distance, 'unit' => 'km', 'function'=>'')) ?> 
```

# tsql - 是否可以对 LIKE / NOT LIKE 使用参数

> ID：13002656
> 
> 赞同：0
> 
> 时间：2012-10-21T22:04:35.683
> 
> 标签：tsql, select, stored-procedures, sql-like

我正在尝试传递 LIKE / NOT LIKE 的参数和 % 符号以进行基于从应用程序传递的内容运行的动态查询。我收到一个错误，因为 TSQL 对 like/not like 的参数感到困惑，因为它不是布尔值。是否可以这样做，或者我将不得不编写多个 if 语句来检查正在传递的参数。

```
@fullName varchar(100), @SrchCriteria1 varchar(15), @SrchCriteria2 varchar(15), 
@fullName1 varchar(100), @SrchCriteria3 varchar(15), @SrchCriteria4 varchar(15),
@fullName2 varchar(100), @SrchCriteria5 varchar(15), @SrchCriteria6 varchar(15),
@qualifer varchar(10), @qualifer1 varchar(10), @qualifer2 varchar(10)

SELECT d.*
FROM   defendants_ALL d, #tmpFullname t1, #tmpFullname1 t2, #tmpFullname2 t3
WHERE  d.combined_name + @qualifer + @SrchCriteria1 + t1.Item + @SrchCriteria2
and  d.combined_name + @qualifer + @SrchCriteria3 + t2.Item + @SrchCriteria4
and  d.combined_name + @qualifer + @SrchCriteria5 + t3.Item + @SrchCriteria6

EXEC uspJudgments @qualifier = 'LIKE', @qualifier1 = 'LIKE', @qualifier = 'NOT LIKE', @fullName = 'johns', @fullName1 = 'jim,j.', @SrchCriteria1 = '%', @SrchCriteria2 = '%',  @SrchCriteria3 = '%', @SrchCriteria4 = '%', @fullName2 = 'johnson', @SrchCriteria5 = '%', @SrchCriteria6 = '%' 
```

所以这应该返回 jim johns 和 j 的所有组合。johns 但不包括 jim johnson 和 j。约翰逊。我知道这是一种罕见的组合，但我想不出更好的更常见的 ATM。

动态 SQL：

```
DECLARE @Query NVarChar(1024)
SET @Query = 'SELECT d.* FROM defendants_ALL d, #tmpFullname t1, #tmpFullname1 t2, #tmpFullname2 t3'  +
'WHERE d.combined_name' + @qualifier + @SrchCriteria1 + 't1.Item' + @SrchCriteria2 +
' and d.combined_name' + @qualifier + @SrchCriteria3 + 't2.Item' + @SrchCriteria4 +
' and d.combined_name' + @qualifier + @SrchCriteria5 + 't3.Item' + @SrchCriteria6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:32:29.163

`LIKE`接受模式的表达式，例如`d.combined_name LIKE @SrchCriteria`.

您正在尝试组合动态查询。为此，您需要在字符串中创建整个查询，然后使用`EXECUTE`：

```
declare @Query as NVarChar(1024) = 'SELECT d.* FROM ...' +
  'WHERE d.combined_name ' + @qualifer + @SrchCriteria1 + t1.Item + @SrchCriteria2 +
  '...' 
```

在传递给`EXECUTE`.

# ajax - Grails：Ajax 响应为空

> ID：13002664
> 
> 赞同：0
> 
> 时间：2012-10-21T22:05:43.563
> 
> 标签：ajax, grails

当有 ajax 请求时，我想更改布局。所以我为此设置了一个过滤器：

```
class AjaxFilters {

def filters = {
    ajaxify(controller: '*', action: '*') {
        after = { Map model ->

    if(model==null) {
        model = new HashMap()
    }

    // only intercept AJAX requests
    if (!request.xhr) {
        model.put("layout", "mainUsers")
        return true 
    }

    // find our controller to see if the action is ajaxified
    def artefact = grailsApplication
        .getArtefactByLogicalPropertyName("Controller", controllerName)
    if (!artefact) { return true }

    // check if our action is ajaxified
    def isAjaxified = artefact.clazz.declaredFields.find {
        it.name == 'ajaxify'
    } != null

    def ajaxified = isAjaxified ? artefact.clazz?.ajaxify : []
    if (actionName in ajaxified || '*' in ajaxified) {
        model.put("layout", "ajax")
        return false
    }
    return true
        }
    }
}
} 
```

这将创建一个名为“layout”的视图模型，它应该定义要使用的布局。

这是一个使用布局模型的示例视图：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<meta name="layout" content="${layout}"/>
<title>Profile</title>
</head>
<body>
<h3>Edit Profile</h3>
</body>
</html> 
```

这是控制器：

```
class SettingsController {
def springSecurityService
static ajaxify = ["profile", "account"]

def profile() {
    User user = springSecurityService.currentUser

    UserProfile profile = UserProfile.findByUser(user)

    if(profile == null) {
        flash.error="Profile not found."
        return
    }

    [profile: profile, user: user]
}
} 
```

正常请求按预期工作，但是当我尝试使用 ajax 时，响应完全为空。仅发送标头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:18:24.023

对于将返回空白的 ajax 请求，您将返回 true 或 false。您应该使用渲染函数将模型对象转换为 JSON，或者将模型对象转换为 JSON 并返回。你不需要检查动作是否被 ajaxified；只需返回 JSON 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T13:26:41.807

在你之后，你`model.put("layout", "ajax")`不想回来`false`，而是`true`。返回`false`表示过滤器以某种方式失败并停止所有进一步的处理，这将导致向浏览器返回一个空响应。如果您返回`true`，更新后的模型将继续通过处理链并在您的 gsp 中呈现。

# javascript - jquery each() 传递 self 时的索引

> ID：13002674
> 
> 赞同：1
> 
> 时间：2012-10-21T22:06:32.053
> 
> 标签：javascript, jquery

我试图在此循环的每次迭代期间访问元素索引。

```
$('.slide').hide().repeat().each($).fadeIn($).wait(1000, function(){
    //do stuff
}).wait(noHover).fadeOut($); 
```

我尝试做类似的事情：

```
$('.slide').hide().repeat().each(i, $).fadeIn($).wait(1000, function(){
    alert(i);
}).wait(noHover).fadeOut($); 
```

显然，我不明白这样做的正确方法。

*我使用的插件扩展：*
[http ://creativecouple.github.com/jquery-timing/examples/pause-cycle-on-hover.html](http://creativecouple.github.com/jquery-timing/examples/pause-cycle-on-hover.html)

这是一个可以更好地分解这个的小提琴：http:
[//jsfiddle.net/zGd8a/](http://jsfiddle.net/zGd8a/)

一个解决方案：http:
[//jsfiddle.net/zGd8a/8/](http://jsfiddle.net/zGd8a/8/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:23:41.253

**[jsFiddle 演示](http://jsfiddle.net/zGd8a/1/)**

```
$('.slide').hide().repeat().each($).fadeIn($).wait(1000, function(){
    var idx = $(this).index();  // here you go!
    $('body').append(idx); //here i need access to index number of element
}).wait(noHover).fadeOut($); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:18:04.460

在这种情况下`each`，函数采用第二个参数（回调函数） -`$`并且不**使用**它。您应该将警报放在回调函数的主体中，该函数是 的第二个参数`each`，而不是`wait`函数。像这样：

```
$('.slide').hide().repeat().each(function(i, element) {
    alert(i);
}).fadeIn($).wait(1000, function(){
    //do stuff
}).wait(noHover).fadeOut($); 
```

更多信息在这里：[http ://api.jquery.com/each/](http://api.jquery.com/each/)

# python - Python：使用cherrypy通过POST发送和接收大文件

> ID：13002676
> 
> 赞同：3
> 
> 时间：2012-10-21T22:07:27.727
> 
> 标签：python, http, post, upload, cherrypy

我有一个cherrypy web 服务器，它需要能够通过http post 接收大文件。我目前有一些工作，但是一旦发送的文件变得太大（大约 200mb），它就会失败。我正在使用 curl 发送测试发布请求，当我尝试发送一个太大的文件时，curl 会吐出“与请求一起发送的实体超出了允许的最大字节数。” 环顾四周，这似乎是cherrypy的错误。

所以我猜测正在发送的文件需要分块发送？我用 mmap 尝试了一些东西，但我无法让它太有效。处理文件上传的方法是否也需要能够接受块数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-10T12:26:57.707

我以此[`DirectToDiskFileUpload`](http://tools.cherrypy.org/wiki/DirectToDiskFileUpload)为起点。它为处理大型上传所做的更改是：

1.  `server.max_request_body_size`到`0`（默认 100MB），
2.  `server.socket_timeout`到`60`（默认 10 秒），
3.  `response.timeout`到`3600`（默认 300 秒），
4.  通过使用避免双重复制`tempfile.NamedTemporaryFile`。

还采取了一些无用的操作来避免将上传保存在内存中，这会禁用标准的 CherryPy 主体处理并`cgi.FieldStorage`改为手动使用。它是无用的，因为有`cherrypy._cpreqbody.Part.maxrambytes`。

> 在此之后的字节阈值`Part`会将其数据存储在文件而不是字符串中。默认为 1000，就像`cgi`Python 标准库中的模块一样。

我已经尝试过以下代码（由 Python 2.7.4、CherryPy 3.6 运行）和 1.4GB 文件。内存使用量（在*gnome-system-monitor*中）从未达到 10MiB。根据实际写入磁盘的字节数，`cat /proc/PID/io`'s`write_bytes`几乎是文件的大小。有了标准`cherrypy._cpreqbody.Part`，`shutil.copyfileobj`它显然是翻了一番。

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import os
import tempfile

import cherrypy

config = {
  'global' : {
    'server.socket_host' : '127.0.0.1',
    'server.socket_port' : 8080,
    'server.thread_pool' : 8,
    # remove any limit on the request body size; cherrypy's default is 100MB
    'server.max_request_body_size' : 0,
    # increase server socket timeout to 60s; cherrypy's defult is 10s
    'server.socket_timeout' : 60
  }
}

class NamedPart(cherrypy._cpreqbody.Part):

  def make_file(self):
    return tempfile.NamedTemporaryFile()

cherrypy._cpreqbody.Entity.part_class = NamedPart

class App:

  @cherrypy.expose
  def index(self):
    return '''<!DOCTYPE html>
      <html>
      <body>
        <form action='upload' method='post' enctype='multipart/form-data'>
          File: <input type='file' name='videoFile'/> <br/>
          <input type='submit' value='Upload'/>
        </form>
      </body>
      </html>
    '''

  @cherrypy.config(**{'response.timeout': 3600}) # default is 300s
  @cherrypy.expose()
  def upload(self, videoFile):
    assert isinstance(videoFile, cherrypy._cpreqbody.Part)

    destination = os.path.join('/home/user/', videoFile.filename)

    # Note that original link will be deleted by tempfile.NamedTemporaryFile
    os.link(videoFile.file.name, destination)

    # Double copy with standard ``cherrypy._cpreqbody.Part``
    #import shutil
    #with open(destination, 'wb') as f:
    #  shutil.copyfileobj(videoFile.file, f)

    return 'Okay'

if __name__ == '__main__':
  cherrypy.quickstart(App(), '/', config) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-10T12:31:03.240

巨大的文件上传总是有问题的。如果在上传过程中连接关闭，您会怎么做？改用分块文件上传方法。

# linux - 将我的模块的 printk 打印到我自己的日志文件中

> ID：13002683
> 
> 赞同：2
> 
> 时间：2012-10-21T22:08:29.297
> 
> 标签：linux, module, linux-kernel, printk

我正在做一些 Linux 模块编程。我通常打印一些错误消息和调试用的东西——然后我退出我的模块并使用“dmesg”来查看发生了什么。

这种调试方法已经不够用了。我想将我的“printk”文本通过管道传输到我自己的日志文件中——最好是本地的，但我知道这是否不可能，我需要将它放在 var/log/*.log 之类的地方。

我已经研究过编辑 syslog.conf - 但我不确定在那里做什么。我只想要我的模块的 printk 在它自己的文件中。有没有一种简单的方法可以让我的 Google-fu 无法捕捉到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:49:16.720

您需要从`printk's`模块的唯一令牌开始：

```
printk("MyModule: ....", ....); 
```

1.  使用`syslog-ng`（例如）匹配规则来捕获所有模块的输出
2.  使用 `tail -f /var/log/messages | grep MyModule 查看实时内核的输出

# winforms - 用户控件不会更新它的样式

> ID：13002684
> 
> 赞同：0
> 
> 时间：2012-10-21T22:08:34.127
> 
> 标签：winforms, user-controls

我正在使用用户控件在 Winform 中构建一个应用程序。

问题是当我更新我的用户控件（指样式）时，使用它的表单并没有意识到这一点。如果我在其背后添加一些代码，但不是样式。

这是我的 UC 的最后一个版本。 ![在此处输入图像描述](../Images/fb291c1ebc4b40f8213bbb8f025b192a.png)

这就是它在表格中的显示方式 ![在此处输入图像描述](../Images/f342f64a86ad6a6d3e1ad400ba1175e1.png)

真正的问题是标签和文本框之间的空间！我需要删除它。我尝试清洁建筑物，更新控制面板，但没有任何效果。

# emacs - 在调用 nrepl-jack-in 时杀死以前的 nrepl 会话？

> ID：13002685
> 
> 赞同：7
> 
> 时间：2012-10-21T22:08:34.137
> 
> 标签：emacs, clojurescript

目前，我主要使用 nrepl 与 Clojurescript 应用程序对话。我喜欢在 emacs 中使用 nrepl。我通过键入开始 nrepl `M-x nrepl-jack-in`。

不幸的是，我的 nrepl 会话经常被完全挂起。发生这种情况时，我尽职尽责地杀死了与 nrepl 相关的 3 个缓冲区。这些缓冲区是：

1.  `*nrepl*`
2.  `*nrepl-connection*`
3.  `*nrepl-server*`

`*nrepl-server*`还有一个活动进程，它问我是否要关闭它，我说是。

然后我`M-x nrepl-jack-in`再次输入。

**这是一种痛苦。**

我想重载`nrepl-jack-in`，以便它自动检查这三个缓冲区中的任何一个是否存在。如果它们中的任何一个确实存在，它将终止这些缓冲区以及与这些缓冲区关联的任何活动进程。完成此操作后，重载`nrepl-jack-in`将照常进行。我想要这个，因为那时，每当我检测到 nrepl 决定再次挂起时，我就可以输入`M-X nrepl-jack-in`并重新开始我正在做的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T13:29:24.483

选择的答案对我来说不太适用...... nrepl 进程哨兵引发错误，阻止它重新启动。我玩了一下，想出了以下（也提供了一个单独的`kill-nrepl`功能）

```
;; Disable prompt on killing buffer with a process
(setq kill-buffer-query-functions
      (remq 'process-kill-buffer-query-function
            kill-buffer-query-functions))

(defun nrepl-kill ()
  "Kill all nrepl buffers and processes"
  (interactive)
  (when (get-process "nrepl-server")
    (set-process-sentinel (get-process "nrepl-server")
                          (lambda (proc evt) t)))
  (dolist (buffer (buffer-list))
    (when (string-prefix-p "*nrepl" (buffer-name buffer))
      (kill-buffer buffer))))

(defun nrepl-me ()
  (interactive)
  (nrepl-kill)
  (nrepl-jack-in nil)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T06:29:14.547

这应该可以完成工作：

```
(defun my-nrepl-jack-in ()
  (interactive)
  (dolist (buffer (buffer-list))
    (when (string-prefix-p "*nrepl" (buffer-name buffer))
      (kill-buffer buffer)))
  (nrepl-jack-in nil)) 
```

# php - 在 js 中推送数组看起来无法正常工作

> ID：13002686
> 
> 赞同：1
> 
> 时间：2012-10-21T22:08:36.050
> 
> 标签：php, javascript, twig

```
 $Flight = array
            (
            '1' => array
                (
                '5' => array
                    (
                    'LFID' => '6684',
                    'DepartureDate' => '2012-10-22T12:30:00',
                    'ArrivalDate' => '2012-10-22T14:00:00',
                    'BaseFareAmtInclTax' => '343.50',
                    'ReturnFlightSegmentDetails' =>
                    array
                        (
                        '87' => array
                            (
                            'LFID' => '6647',
                            'DepartureDate' => '2012-10-24T12:25:00',
                            'FareTypeName' => 'Change',
                            'FareTypeID' => '22',
                            'BaseFareAmtInclTax' => '198',
                        )
                    )
                ),
                '10' => array
                    (
                    'LFID' => '6684',
                    'DepartureDate' => '2012-10-23T12:30:00',
                    'ArrivalDate' => '2012-10-23T14:00:00',
                    'BaseFareAmtInclTax' => '243.50',
                    'ReturnFlightSegmentDetails' =>
                    array
                        (
                        '150' => array
                            (
                            'LFID' => '6647',
                            'DepartureDate' => '2012-10-24T12:25:00',
                            'FareTypeName' => 'Change',
                            'FareTypeID' => '22',
                            'BaseFareAmtInclTax' => '198',
                        ),
                        '153' => Array
                            (
                            'LFID' => '6647',
                            'DepartureDate' => '2012-10-26T12:25:00',
                            'FareTypeName' => 'Change',
                            'FareTypeID' => '22',
                            'BaseFareAmtInclTax' => '198',
                        )
                    )
                )
            ),
        ); 
```

我有这个来自我的控制器的数组，它被传递给我的树枝，在那里我执行下面的代码将它解析成一个 js 数组：

```
{% for flight in flights%}
                   var $FlightSegment = new Array();
                  $flight.push({
                        key:"{{ flight.key }}",
                        DepartureDate:"{{flight.DepartureDate}}",
                        ArrivalDate:"{{flight.ArrivalDate}}",
                        Amount:"{{flight.BaseFareAmtInclTax}}",

                     });
                     {% for ReturnFlightSegmentDetails in flight.ReturnFlightSegmentDetails %}
                          $FlightSegment.push({
                                LFID :"{{ReturnFlightSegmentDetails.LFID}}", 
                                DepartureDate:"{{ReturnFlightSegmentDetails.DepartureDate}}",
                                ArrivalDate:"{{ReturnFlightSegmentDetails.BaseFareAmtInclTax}}",
                                Class:"{{ReturnFlightSegmentDetails.FareTypeName}}",
                           });
                      {% endfor %}
                      console.info($FlightSegment);
                    $flight.push({
                        ReturnFlightSegmentDetails :$FlightSegment,
                    });
                {% endfor %} 
```

问题是 $flight.length 返回 4 而不是 2，ReturnFlightSegmentDetails 被认为是一个对象，而不是一个航班的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:16:19.460

您需要以不同的方式构建“飞行”对象；真的不需要“$FlightSegment”变量。

```
{% for flight in flights%}
    $flight.push({
        key: "{{ flight.key }}",
        DepartureDate: "{{flight.DepartureDate}}",
        ArrivalDate: "{{flight.ArrivalDate}}",
        Amount: "{{flight.BaseFareAmtInclTax}}",
        ReturnFlighSegmentDetails: [
           {% for ReturnFlightSegmentDetails in flight.ReturnFlightSegmentDetails %}
             {
                LFID :"{{ReturnFlightSegmentDetails.LFID}}", 
                DepartureDate:"{{ReturnFlightSegmentDetails.DepartureDate}}",
                ArrivalDate:"{{ReturnFlightSegmentDetails.BaseFareAmtInclTax}}",
                Class:"{{ReturnFlightSegmentDetails.FareTypeName}}"
              }
               {% if not loop.last } , {% endif }
           {% endfor %}
        ]
       });
 {% endfor %} 
```

# php - JavaScript 中的聊天室刷新

> ID：13002689
> 
> 赞同：0
> 
> 时间：2012-10-21T22:08:53.187
> 
> 标签：php, javascript, refresh, chatroom

我正在开发一个聊天室类型的东西，用户输入文本并按回车键，然后它会被发布到主页。我用 PHP 构建了它。我有一个工作模型，但是要查看新帖子，您必须单击浏览器中的刷新按钮。有没有办法在 JavaScript 中自动刷新它？我确定有，但似乎如果它每两秒刷新一次，它会非常缓慢且资源密集。那么有解决方法吗？如果不是很好，我猜我们可以每隔几秒钟刷新一次。

我现在是高级 JavaScript 用户，所以请评论您的代码并解释我需要更改的内容。太感谢了！！

哦，PS，所有评论都保存在MySQL数据库中，并通过PHP自动生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:21:13.827

是的，您可以每 X 秒刷新一次窗口，但正如您所提到的，在这种情况下无需重新加载整个页面。正如您所说，所有新的文本评论都在 sql 中，您可以做的是使用 AJAX 调用 php 函数在屏幕上实时更新它们，而无需重新加载页面。

```
setTimeout("updateChatAJAx()",2000); 
```

此 javascript 行将每 2 秒调用一次“updatechatAJAx”javascript 函数。

```
 //Load the message View
    function updateChatAJAx(){
        var ajaxRequest;  // The variable that makes Ajax possible!
        ajaxRequest = new XMLHttpRequest();
        // Create a function that will receive data sent from the server
        ajaxRequest.onreadystatechange = function(){
                if(ajaxRequest.readyState == 4){
                        //The response
                        document.getElementById('MoreID').innerHTML = ajaxRequest.responseText;
                }
        }
        ajaxRequest.open("GET", "getMessages.php", true);
        ajaxRequest.send(null);
} 
```

上面的这个函数将是 ajax 函数，它将调用 getMessages.php 的输出 pf 并将消息放入“MoreID”div 元素

# delphi - 如何在 VCL 表单中无缝嵌入 FireMonkey 表单？

> ID：13002691
> 
> 赞同：4
> 
> 时间：2012-10-21T22:09:07.303
> 
> 标签：delphi, delphi-xe2, vcl, firemonkey

我使用[此问题](https://stackoverflow.com/questions/7315050/delphi-xe2-possible-to-instantiate-a-firemonkey-form-in-vcl-application "Delphi XE2：可以在 VCL 应用程序中实例化 FireMonkey 表单吗？")中描述的技巧在 VCL 应用程序的 TPanel 上显示 FireMonkey 表单。我的问题是单击（控制）嵌入式表单会导致 VCL 表单（包含该 TPanel）被停用。最明显的后果是窗口边框一直在改变颜色。

在另一个的 TPanel 上显示 VCL 表单时，不会发生这种情况；这些表格显然是“合并”的。我应该怎么做才能用 FireMonkey 达到类似的结果？我希望 FireMonkey 表单上的控件可用，但保持父表单处于激活状态。

# 更新 1

## VCL

```
unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants,
  System.Classes, Vcl.Graphics, Vcl.Controls, FMX.Forms, Vcl.Forms,
  Vcl.Dialogs, Vcl.StdCtrls, Vcl.ExtCtrls, FMX.Platform.Win;

type
  TMainForm = class(TForm)
    Panel1: TPanel;
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  MainForm: TMainForm;

implementation

{$R *.dfm}

uses FireMonkeyForms;

procedure TMainForm.Button1Click(Sender: TObject);
var
  LFMForm: FireMonkeyForms.TForm1;
  LFMHWnd: HWND;
begin
  LFMForm := FireMonkeyForms.TForm1.Create(nil);
  LFMForm.Left := 0;
  LFMForm.Top := 0;
  LFMForm.Height := Panel1.ClientHeight;
  LFMForm.Width := Panel1.ClientWidth;
  LFMForm.BorderStyle := TFmxFormBorderStyle.bsNone;
  LFMForm.BorderIcons := [];
  LFMHWnd := FmxHandleToHWND(LFMForm.Handle);
  SetWindowLong(LFMHWnd, GWL_STYLE, GetWindowLong(LFMHwnd, GWL_STYLE) or WS_CHILD);
  Winapi.Windows.SetParent(LFMHWnd, Panel1.Handle);
  LFMForm.Visible := True;
end;

end. 
```

## 火猴

```
unit FireMonkeyForms;

interface

uses
  System.SysUtils, System.Types, System.UITypes, System.Classes, System.Variants,
  FMX.Types, FMX.Controls, FMX.Forms, FMX.Dialogs, FMX.Layouts, FMX.Memo;

type
  TForm1 = class(TForm)
    Label1: TLabel;
    Memo1: TMemo;
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.fmx}

end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T22:49:33.967

该行为的原因是窗口管理器不知道您已将 firemonkey 窗口设为子窗口，因此当您激活 firemonkey 窗口时，它会停用先前活动的窗口。如中所述，[`SetParent function`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633541%28v=vs.85%29.aspx)您必须手动设置*子*标志。一个示例用法可能是：

```
var
  FMForm: TFMForm1;
  FMHWnd: HWND;
begin
  FMForm := TFMForm1.Create(nil);
  FMForm.Left := 0;
  FMForm.Top := 0;

  FMHWnd := FmxHandleToHWND(FMForm.Handle);
  SetWindowLong(FMHWnd, GWL_STYLE, GetWindowLong(FMHwnd, GWL_STYLE) or WS_CHILD);
  winapi.windows.SetParent(FMHWnd, Panel1.Handle);
  FMForm.Visible := True; 
```

**更新：** 如果您必须删除 fmx 表单的边框，设置会`BorderStyle`设置`WS_POPUP`您不能与`WS_CHILD`. 在这种情况下，明确设置您需要的样式，而不是获取和“或”它们。Fi

```
 ..
  LFMForm.BorderIcons := [];
  LFMForm.BorderStyle := TFmxFormBorderStyle.bsNone;
  LFMHWnd := FmxHandleToHWND(LFMForm.Handle);
  SetWindowLong(LFMHWnd, GWL_STYLE, WS_CHILDWINDOW or WS_BORDER);
  .. 
```

# php - 上传文件到系统的安全问题

> ID：13002692
> 
> 赞同：0
> 
> 时间：2012-10-21T22:09:07.710
> 
> 标签：php, security, file-upload

我知道安全问题通常来自用户输入，这就是为什么我假设 $eFlag!=1 的 else 部分存在安全漏洞。
我不熟悉 php，所以我不能 100% 确定这里发生了什么。

我假设正在上传的文件本身可能是一些恶意可执行文件并且没有被检查？？？如果是这样，有没有办法阻止上传可执行文件或只上传 .doc 文件（看起来这是程序想要的文件）？

***这是张贴在我上学的一个俱乐部上，并要求找出一个安全漏洞（换句话说，肯定有一个）。

![](../Images/8bd8f5d3b67efb0e24f91c4771a12f7e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:24:21.390

您应该检查上传文件的 mime 类型：

```
strcmp(substr(mime_content_type($_FILES['userfile']['tmp_name']),0,4),"doc" 
```

php.net 上用于检查 mime 类型的完整示例：http: [//php.net/manual/en/function.mime-content-type.php](http://php.net/manual/en/function.mime-content-type.php)

添加了文件名和长度过滤器的完整代码（这基于文件名）：

```
$match = preg_match_all("/^[a-zA-Z0-9]/$", $_FILES['userfile']['name'], $matchif);

if (!$matchif)
{
    die('not allowed filename');
}

if (strlen($_FILES['userfile']['name']) > 255 || strlen($_FILES['userfile']['name'] == 0))
{
    die('Filename length not allowed');
}

if (strcmp(substr(mime_content_type($_FILES['userfile']['name']),0,4),"doc")==0) 
{ 

    if (move_uploaded_file($_FILES['userfile']['tmp_name']))
    {
        // upload file
    }
    else die('not upload');

}
else die('support only doc'); 
```

您可以转储并使用条件来检查 mimetypes 作为示例：

```
var_dump($_FILES['userfile']['type']);

if ($_FILES['userfile']['type'] == 'application/msword') { ... move uploaded files ...  } 
```

注意：mime 类型可以伪造，所以我将通过文件名、通过 $_FILES 的类型、文件名的长度进行检查，并读取第一行代码以检查是否为 DOC 或其他内容。在记事本中打开它 doc，看看你可以通过读取文件在 PHP 中检查什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:26:20.653

通常，可以通过两种方式调用上传的文件：直接或间接。

直接的方法是通过它的 URL 调用它。在这种情况下，文件扩展名会提示 Web 服务器如何处理它。因此，您需要确保该文件未使用可执行的文件扩展名（即 not `.php`）存储，或者文件存储在无法通过 HTTP 访问的位置。

间接的方法是让另一个调用的文件包含使用`include`等上传的文件。因此，您需要确保如果`include`等的参数被参数化，则该参数不能被用户输入操作，否则您很容易受到[远程攻击/本地文件包含](http://cwe.mitre.org/data/definitions/98.html)。

# android-activity - 模拟器启动未声明为正在启动的活动

> ID：13002699
> 
> 赞同：0
> 
> 时间：2012-10-21T22:10:48.957
> 
> 标签：android-activity, android-manifest

这是我的清单片段：

```
<activity android:name=".EntranceView" >
      <intent-filter>
           <action android:name="android.intent.action.MAIN" />
           <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
</activity >
<activity android:name=".MainView">
</activity> 
```

问题是在应用程序启动时启动 .MainView 活动，而不是声明为启动活动的 .EntranceView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T17:01:39.937

我已将 .MainView 更改为 .GeneralView。很奇怪，但它对我有用。

# android - AndEngine - 改变场景不起作用

> ID：13002704
> 
> 赞同：0
> 
> 时间：2012-10-21T22:11:05.447
> 
> 标签：android, andengine, scene

在`onAreaTouch()`方法中我有一些修饰符。在延迟修改器中有一个`onModifierFinished()`方法，我想改变场景，如：

```
Scene scene = new Scene();    
Game_Screen.this.getEngine().setScene(scene); 
```

但什么也没有发生。我确信它涉及到这条线，但场景并没有改变。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:02:24.723

确保您在 AndEngine 更新线程上进行这些更改：

```
runOnUpdateThread(new Runnable() {
    @Override
    public void run() {
        // TODO Auto-generated method stub
        Scene scene = new Scene();
        Game_Screen.this.getEngine().setScene(scene);
    }
}); 
```

# android - ContentProvider.delete 与相关表

> ID：13002705
> 
> 赞同：0
> 
> 时间：2012-10-21T22:11:17.927
> 
> 标签：android, android-contentprovider

我正在编写一个 ContentProvider 来处理数据库。在这个数据库中，我有一个“trip”表和一个“day”表。行程表中的每条记录与天表中的多条记录相关联，即每次行程跨越多天，但任何一天记录只能属于一次行程。如果行程被删除，与之相关的所有日期也必须删除。

我的问题是，删除时从 ContentProvider 处理此表关系的标准或普遍接受的方法是什么？当我的 delete 方法获取 URI 以删除特定行程时，它是否应该也删除相关的日期，还是应该只删除行程并要求使用 ContentProvider 的程序也执行删除日期的必要逻辑？

一次全部删除，来自应用程序的一个调用，其中包含要删除的行程 ID：

```
@Override
public int delete( Uri uri, String selection, String[] selectionArgs )
{
    SQLiteDatabase db;
    int count;

    db = _dbHelper.getWritableDatabase();
    switch( uriMatcher.match( uri ) )
    {
        case TRIP_ID:
            count = db.delete( TRIP_TABLE, KEY_TRIP_ID + "=?", new String[]{ uri.getLastPathSegment() } );
            count += db.delete( DAY_TABLE, KEY_TRIP_ID + "=?", new String[]{ uri.getLastPathSegment() } );
            return count;
    }
} 
```

或仅删除确切要求的内容，应用程序中的多个呼叫以及旅行和所需的天数：

```
@Override
public int delete( Uri uri, String selection, String[] selectionArgs )
{
    SQLiteDatabase db;
    int count;

    db = _dbHelper.getWritableDatabase();
    switch( uriMatcher.match( uri ) )
    {
        case TRIP_ID:
            count = db.delete( TRIP_TABLE, KEY_TRIP_ID + "=?", new String[]{ uri.getLastPathSegment() } );
            return count;
        case Day_ID:
            count = db.delete( DAY_TABLE, KEY_DAY_ID + "=?", new String[]{ uri.getLastPathSegment() } );
            return count;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:18:29.860

> 当我的 delete 方法获取 URI 以删除特定行程时，它是否应该也删除相关的日期，还是应该只删除行程并要求使用 ContentProvider 的程序也执行删除日期的必要逻辑？

我会投票给前者，也许是使用[SQLite中](http://www.sqlite.org/foreignkeys.html)[的`FOREIGN KEY`](http://www.sqlite.org/foreignkeys.html)关系而不是自己手动完成。由于日记录在行程之外没有生命，删除行程应该删除那些依赖记录。

# javascript - JavaScript 倒计时程序

> ID：13002707
> 
> 赞同：-3
> 
> 时间：2012-10-21T22:11:25.587
> 
> 标签：javascript

我正在尝试用 JavaScript 编写一个满足此提示的程序

编写一个 JavaScript 函数 countDown(i)，它接受一个整数参数并返回一个从 i 到 0 的 \countdown"，每个数字之间有一个空格。例如，countDown(5) 应该返回字符串 "5 4 3 2 1 0 “。至于第一个问题，您可能想在计算机上测试您的解决方案。

到目前为止我有这个

```
var i= "";

function countdown(i)

{

    while( i > 0)

    {
        console.log(integer);
        i--;
    }
}
countdown(); 
```

有人可以帮我吗，我对编程很陌生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:27:07.673

Hopefully this makes enough sense:

```
function countdown(i) {
    //initialize the variable to be returned with the initial i
    var ret = i;
    //in each iteration, assigns i to i-1 then checks if i >= 0
    while (--i >= 0) {
        //concatenates a space and the current i value to the return string
        ret += ' ' + i;
    }
    //returns the string
    return ret;
} 
```

[**Fiddle**](http://jsfiddle.net/ult_combo/9FeRn/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T22:27:23.967

我希望您阅读我在代码中的注释并学习。

```
// you write comments in JavaScript with two forward slashes
// i is the integer parameter of your countdown function
// i is passed to countdown when called, i.e. countdown(9)
function countdown(i)    
{
    // this is an ret string variable that is private to the countdown function
    // you can't access ret from outside of this function
    var ret = "";   

    // your loop should include 0 according to your requirements
    while( i >= 0)
    {
        // here you are appending i to your ret string which you'll return at the end of this function      
        ret += i;// += is a short hand form of saying ret = ret + i

        // you want to append an empty space for every i except the last one (0)
        if(i > 0) {
            ret += " "; 
        }
        i--;    // here you are decrementing i
    }
    return ret;
}
// here you are making the actual call to the function with integer 5 
// you are assigning the returned value of your function call to result variable
var result = countdown(5);  

// here you are printing your result string variable to the log
console.log(result); 
```

这里使用递归的另一个解决方案（更高级），替代函数调用自身的 for/while 循环：

```
// here is an implementation using recursion
function countdown(i)    
{
    if(i<=0)    
        return i;
    return i + " " + countdown(--i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T22:13:42.763

你想包括`0`在你的倒计时中，所以你想要

```
while (i >= 0) 
```

相反`while (i > 0)`，它在最后排除`0`。

* * *

此外，正如提到的一些评论，`var i = ""`定义`i`为*string*，所以你不能执行像`i--`. 您应该定义`i`为整数，例如`var i = 5`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T22:25:38.823

Here is the answer:

```
 function countdown(i) {
   answer = '';
   while( i >= 0) {
      answer = answer + i.toString() + ' ';
      i--;
   }
   return answer;
 }

 countdown(5); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T22:47:54.883

递归方式；）

```
​var countdown=function(i) {
    console.log(i);
    i>0 && countdown(i-1);
}
    countdown(10); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-21T22:27:43.673

这是一种使用递归的方法：

```
//define countdown function
var countdown = function countdown(i) {
    //loop while the passed in parameter "i" is >= 0
    while (i >= 0) {
        //return a space concatenated with the value of i
        //and call the countdown function again (by
        //concatenating the result) to continue counting down
        return ' ' + i + countdown(i -= 1);
    }
    return ''; //out of loop, return an empty string
};
console.log(countdown(5)); 
```

# xcode - dequeueReusableCellWithReuseIdentifier crash '不能出列同类视图' UICollectionElementKindCell'

> ID：13002711
> 
> 赞同：14
> 
> 时间：2012-10-21T22:12:17.277
> 
> 标签：xcode, collections, deque

我遇到以下崩溃：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法使类型视图出列：带有标识符 Cell 的 UICollectionElementKindCell - 必须为标识符注册一个 nib 或一个类或连接故事板中的原型单元格”

我的 ViewDidLoad 中有以下内容：

```
[self.collectionView registerClass:[UICollectionViewCell class] 
        forCellWithReuseIdentifier:@"Cell"]; 
```

崩溃的行在 cellForItemAtIndexPath 回调中：

```
UICollectionViewCell *cell = [collectionView 
    dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath]; 
```

我一直在寻找几个小时，但找不到任何解决方案。我尝试对 UICollectionViewCell 进行子类化，但得到了同样的错误。

通过断点，我确定 registerClass 行在执行 dequeueReusableCellWithReuseIdentifier 回调之前正在执行。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-26T10:20:15.610

我遇到了这个问题，因为我在实例化表视图对象**之前**调用了 registerClass 。工作代码：

```
self.tableView = [[UITableView alloc] initWithFrame:self.view.frame];
[self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"Cell"];
[self.view addSubview:self.tableView];
self.tableView.delegate = self;
self.tableView.dataSource = self;
[self.tableView reloadData]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-05T16:12:08.700

另外，不要忘记单元格（注册... forCellWithReuseIdentifier）和补充视图（注册... forSupplementaryViewOfKind）之间的区别。

我用补充（页眉/页脚）类型正确地将它出队，但我不小心*将它**注册*为单元格类型。呃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-07T01:06:31.873

如果您碰巧在`UICollectionViewController`or中遇到这种情况`UITableViewController`，请按照 rob mayoff 所说的进行操作，并确保您的`Collection View`or`Table View`与您的 Storyboard 中的属性相关联。

另一个常见的错误是在情节提要中您忘记赋予正确的`CollectionID`或`CellID`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-26T19:11:56.117

有一次我在处理集合视图单元格时，我写道：

```
static NSString *identifier = @"cell "; 
```

仔细看，您会在标识符字符串的末尾看到一个额外的空格。意识到我的错误后，我希望这对某人有所帮助。

参考：

[无法出列同类视图：带有标识符的 UICollectionElementKindCell](https://stackoverflow.com/questions/23148918/could-not-dequeue-a-view-of-kind-uicollectionelementkindcell-with-identifier)

# assembly - 如何从 mips 到机器码？

> ID：13002714
> 
> 赞同：0
> 
> 时间：2012-10-21T22:12:33.120
> 
> 标签：assembly, mips

例如，如果给我 j 标签，标签在哪里，`0x004000b0`我将如何将其转换为机器码？

的操作码`x02`和目标地址为 26 位。我试图模拟并得到机器代码，`0810002c`但我无法手动计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:39:08.250

从[MIPS 指令参考](http://courses.engr.illinois.edu/cs426//fa2012/Resources/MIPS32BIS-AFP-03.02.pdf)，第 129 页：

> 这是一个 PC 区域分支（不是 PC 相关的）；有效目标地址位于“当前”256 MB 对齐区域中。目标地址的低 28 位是 instr_index 字段左移 2 位。剩余的高位是延迟槽中指令地址的对应位（不是分支本身）。

因此，如果您要跳转到 0x4000B0，则将其向右移动两位，得到 0x10002C。这形成了跳转指令的低 26 位，高 6 位为 0b000010，整体操作码为 0x810002C。

# wpf - 添加我的用户控件时 XAML 预输入消失

> ID：13002715
> 
> 赞同：0
> 
> 时间：2012-10-21T22:12:40.357
> 
> 标签：wpf, visual-studio, user-controls, visual-studio-2012, winrt-xaml

当我将用户控件添加到 XAML 页面中的代码时，提示输入元素和属性的预先输入在该页面中停止工作。在运行时一切正常，我可以根据需要显示和使用用户控件，但在设计时有些东西被破坏了。

如果我使用预先输入注释掉用户控件`<!-- -->`，它将再次开始工作。因此，在编辑 XML 时，我将其保留为注释，但每次我想编辑然后构建和运行时注释/取消注释有点不方便。

定义的`local`命名空间在项目中的所有类之间共享。

```
<local:MySettings Visibility="Collapsed" x:Name="MySettings" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:24:42.717

这通常意味着您的控件正在做一些让设计者感到不安的事情。检查输出选项卡/窗口以查看是否有任何输出？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:26:25.750

突然间，我注意到 typeahead 又开始工作了……

据我所知，我做了两件事：

1.  我进行了重建（而不是构建）以查看是否有任何警告消息
2.  我关闭了VS做其他事情，刚刚重新打开。

不知道其中哪一种是解决问题的方法，但至少它消失了！

# windows-phone-7 - 当我尝试加载填充了 DataTemplates 的合并 ResourceDictionary 时收到 XamlParseException

> ID：13002716
> 
> 赞同：-1
> 
> 时间：2012-10-21T22:12:44.777
> 
> 标签：windows-phone-7, xaml, resourcedictionary, datatemplate, mergeddictionaries

在我的 Windows Phone 7.5 应用程序中，我想要一个合并的 ResourceDictionary，里面填充了 DataTemplates。为此，我创建了一个名为“DataTemplates.xaml”的文件，并用如下所示的 DataTemplates 填充它：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <DataTemplate x:Key="ItemTemplate">
         <!-- xaml -->
    </DataTemplate>

    <DataTemplate x:Key="GroupHeaderTemplate">
        <!-- xaml -->
    </DataTemplate>

    <DataTemplate x:Key="GroupItemTemplate" >
         <!-- xaml -->
    </DataTemplate>
</ResourceDictionary> 
```

在我想使用该 DataTemplates 的页面中，我编写了以下代码：

```
 <phone:PhoneApplicationPage.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/myAssemblyName;component/Resources/DataTemplates.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </phone:PhoneApplicationPage.Resources> 
```

但是，当我调试并尝试导航到包含 ResourceDictionary 的页面时，我得到了 XamlParseException: Failed to assign to property 'System.Windows.ResourceDictionary.Source'

我能怎么做？：（ 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:12:44.777

好的，我花了大约 20 分钟写问题，重读后我找到了解决方案，所以我回答自己：我不小心写了解决方案的名称空间而不是它的程序集名称！就是这样，现在 ResourceDictionary 正确加载了:)

# git - Windows Server 2003 上的 Git 或 svn

> ID：13002719
> 
> 赞同：2
> 
> 时间：2012-10-21T22:13:12.750
> 
> 标签：git, svn, version-control

我想知道是否有人有让 git 服务器在 windows server 2003 上运行的经验？是否有一个简单的解决方案来启动和运行它？如果没有，有什么好的选择吗？

理想情况下，它必须是免费的，但愿意付费。它仅适用于一个小团队（3 个用户），但我们迫切需要源代码控制！

我们需要将它托管在我们的 Windows 服务器上，因为这是保存站点/代码的地方！

我以前有 git 的经验，但没有设置我自己的服务器，所以朝着正确的方向前进会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T00:51:45.450

根据我的经验，在 Windows 机器上获取 Git 服务器的最简单方法是运行虚拟 Linux 服务器，然后使用 Gitolite 之类的东西。GitStack是一个专有软件包，允许两个用户免费使用，但收费不止[于此。](http://gitstack.com/pricing/)

我更熟悉 Windows 的 Subversion 服务器。也许更熟悉 Git 的人可以解释一下 Windows 服务器上的 Git 选项。

同时，这里只是一些 Subversion on Windows 选项：

*   SVNSERVE
    *   Subversion 附带`svnserve`一个轻量级服务器，使用它自己的协议。作为[Windows 服务](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-serversetup-svnserve.html)在 Windows 上安装它既快速又容易。
*   HTTP
    *   有两个众所周知的 GUI Windows Subversion 服务器：[VisualSVN](http://www.visualsvn.com)和[UberSVN](http://www.wandisco.com/ubersvn/download)。这两个都是专有服务器，但只要您不使用任何*高级功能*（例如将您的存储库绑定到 LDAP），它们都是免费的。两者都有 GUI 界面，可以快速轻松地进行设置。
    *   如果您比较勇敢，您可以获得完全开源的 CollabNet 的[Subversion Edge包。](http://www.open.collab.net/nonav/go/csvne2_r2a/faq.html)这需要更多的工作，但它是完全开源的。CollabNet 为您提供了一个 Apache httpd 服务器，该服务器经过编译可用作具有所有必需模块的 Subversion 服务器。设置比其他设置要复杂一些，但这并不是开发人员无法轻松完成的事情。最大的优势是您可以执行诸如集成 LDAP 或 Active Directory 或使用安全证书 (https) 之类的操作，因此您的 Subversion 提交和更新不会通过网络发送纯文本而无需支付额外费用。只需准备打开后盖并[四处寻找用户可维修的零件](http://blog.makezine.com/2005/08/23/no-user-serviceable-parts/)。

再说一次，您甚至可以在没有服务器的情况下相互共享 Git 存储库。您可以使用[电子邮件和 Dropbox](https://stackoverflow.com/q/2175961/368630)等工具相互共享存储库的更新。这是 Git 的一大优势，因为它是一个分布式版本控制系统。

# php - 获取 HH:MM 格式 php 的时间差异

> ID：13002723
> 
> 赞同：5
> 
> 时间：2012-10-21T22:13:24.337
> 
> 标签：php, time, datediff

我怎样才能得到这个输出

HH:MM 格式？

```
 $to_time = strtotime("2008-12-13 10:42:00");  <--AM
 $from_time = strtotime("2008-12-14 8:21:00");  <-- PM
 $stat = round(abs($to_time - $from_time) / 60,2). "min"; 
```

我从中得到的是 1299 分钟

但我不知道如何让它输出

21h:41m

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T22:27:36.650

首先，`8:21:00`将被解释为 8AM，除非您使用`DateTime::createFromFormat()`.

要计算时差，请使用`DateTime::diff()`：

```
$to = new DateTime("2008-12-13 10:42:00");
$from = new DateTime("2008-12-14 8:21:00");

$stat = $to->diff($from); // DateInterval object

echo $stat->format('%Hh:%Im'); 
```

这将显示两次之间的小时/分钟差异，但最多只能显示 24 小时。

如果您需要超过 24 小时，您应该执行以下操作：

```
$hours   = $stat->days * 24 + $stat->h;
$minutes = $stat->i;

printf('%02sh:%sm', $hours, $minutes); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T22:57:33.823

首先，您需要在日期字符串中包含 AM 和 PM，否则`2008-12-14 8:21:00`将被解释为`8:21 AM`

现在两个日期之间的区别`2019`是 33h:19m，你不能使用标准日期格式，因为它们只支持 24h 时钟。你应该保持`$stat`整数，并`sprintf`像这样显示它：

```
echo sprintf('%02dh:%02dm', $stat/60, $stat%60); 
```

# java - Markdown 算法：字符串难点

> ID：13002729
> 
> 赞同：0
> 
> 时间：2012-10-21T22:14:18.520
> 
> 标签：java, string, markdown

我开始写这个算法：

```
public static String convert(String str) {
    if (str.equals("# "))
        return " ";

    if (str.matches("#+.+")) {
        int n = str.length() - str.replaceFirst("#+", "").length();
        return "<h" + n + ">" + str.substring(n) + "<h" + n + ">";
    }

    return str;
}
} 
```

所以当我输入 ####title 时，它​​会返回 <h4>title</h4>

我的问题是当我写####title###title时，我希望它返回<h4>title</h4><h3>title</h3>但它只返回<h4>title</h4 >...我做错了什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:23:44.697

那是因为您使用的是模式： - `#+.+`。

现在，因为`.`匹配正则表达式中的所有内容，所以在上面的模式中，它匹配`everything`一个`initial set`of之后`#'s`。

因此，对于您的输入：- **####title###title**，您的模式将匹配：-

*   `#+`将匹配`####`
*   `.+`将匹配`title###title`

您需要将您的正则表达式更改为 : - `(#+[^#]+)`，并且可能需要在此处使用[Pattern](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)类来获得所需的输出，因为您希望将`every`部分字符串与给定的`pattern`.

`#+[^#]+`-> 将匹配第一组，`#`然后匹配之后的所有内容，除了`#`. 所以它停在下一组`#'s`开始的地方。

以下是如何使用它：-

```
 String str = "####title###title";  // str is the method parameter
    if (str.equals("# "))
        System.out.println(" ");

    Pattern pattern = Pattern.compile("(#+[^#]+)");
    Matcher matcher = pattern.matcher(str);

    while (matcher.find()) {
        String str1 = matcher.group(1);
        int n = str1.length() - str1.replaceFirst("#+", "").length();
        System.out.println("<h" + n + ">" + str1.substring(n) + "</h" + n + ">");
    } 
```

**输出**： -

```
<h4>title</h4>
<h3>title</h3> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:24:08.483

您只替换第一次出现的#+。尝试用一段时间替换 if，而不是在 if 中返回，而是将结果附加到 StringBuilder 中。
就像是：

```
String str = "####title###title2"; 
    StringBuilder sb = new StringBuilder();
    while (str.matches("#+.+")) {          
        int n = str.length() - str.replaceFirst("#+", "").length();
         str = str.replaceFirst("#+", "");
        int y = str.length();
        if(str.matches(".+#+.+")) {
            y = str.indexOf("#");
            sb.append( "<h" + n + ">" + str.substring(0,y) + "<h" + n + ">");
            str = str.substring(y, str.length());
        } else {
            sb.append( "<h" + n + ">" + str.substring(0,y) + "<h" + n + ">");
        }

    }
    System.out.println(sb.toString());

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T22:24:23.720

您匹配错误的字符串，试试这个：

```
#+[^#]+ 
```

当然，您希望递归或循环调用它

# css - 响应式设计 - 媒体查询在 iPhone 上不起作用？

> ID：13002731
> 
> 赞同：34
> 
> 时间：2012-10-21T22:15:26.103
> 
> 标签：css, mobile, responsive-design, media-queries

我正在尝试创建我的网站的移动友好版本，以使我的网站响应更小的屏幕尺寸并相应地缩放。

我创建了一些媒体查询，当在桌面上调整大小时，它们在浏览器中的行为正确。

在我的 iPhone 上，Safari 只是缩小了整个网站，但仍保持全尺寸网站的纵横比。如何让媒体查询被观察？我错过了什么吗？

这是一个沙盒的链接，我正在尝试使其正常工作 - 感谢您提供任何帮助或建议：

[http://www.preview.brencecoghill.com/](http://www.preview.brencecoghill.com/)

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-10-22T00:09:42.040

您的 html 中是否有用于查看端口的元数据？

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

更多信息在这里： [http ://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/quick-tip-dont-forget-the-viewport-meta-tag/](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/quick-tip-dont-forget-the-viewport-meta-tag/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-08-21T13:07:21.257

我想你会在 Chrome 中找到一个警告：而不是 , 这应该可以正常工作：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-03T23:16:34.897

在解决同样的问题一天后，我刚刚经历了最奇怪的事情。如果一切都失败了，可以尝试一下……

在开发过程中，我的页面在我的笔记本电脑上完全响应，但在我的 iPhone、iPad 或三星上却没有。我终于发现我必须在 DOCTYPE 语句之后和 html lang 语句之前放置一个注释行，如下所示：

```
<!DOCTYPE html>
<!-- This comment line needed for bootstrap to work on mobile devices -->
<html lang="en"> 
```

最后，我的页面可以在移动设备上响应。奇怪的！

# php - 递增计数器 onclick

> ID：13002733
> 
> 赞同：1
> 
> 时间：2012-10-21T22:15:41.820
> 
> 标签：php, javascript, jquery

我已将数字 X 设置为 5。单击按钮时，将运行脚本以更新数据库而不刷新 - 效果很好。现在我希望页面上的数字更新为 6，也无需刷新页面。我尝试了 JS，但最终在一个看起来很糟糕的输入字段中输入了数字。有没有其他方法，也许是 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:17:45.870

这将让您通过其 id 获取元素并更新其值。

```
 document.getElementById('theId').innerHTML = newValue; 
```

如果您当前没有使用 jQuery，请不要仅仅为此使用它。如果您使用的是 jQuery，您可以执行以下操作。

```
 $('#theId').html(newValue); 
```

或者

```
 $('#theId').text(newValue); 
```

取决于 newValue 中是否包含 html。

jquery 和直接 javascript 示例都是等效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:18:55.023

使用 jquery`$("your containerselector").html(parseInt($("your containerselector").html()) + 1)`虽然你需要确保你的容器只包含 int。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T22:22:11.733

您不必使用 jQuery。

您可以通过纯 JavaScript 更新页面上的所有内容，而无需 jQuery。

[tizag.com 上](http://www.tizag.com/javascriptT/javascript-innerHTML.php)的Javascript 教程示例：

```
<script type="text/javascript">
    function changeText()
    {
    document.getElementById('boldStuff').innerHTML = 'Fred Flinstone';
    }
</script>

<p>
    Welcome to the site <b id='boldStuff'>dude</b>
</p> 

<input type='button' onclick='changeText()' value='Change Text'/> 
```

# c - 优化 C 代码防止 while 循环

> ID：13002739
> 
> 赞同：0
> 
> 时间：2012-10-21T22:16:26.713
> 
> 标签：c, math, data-structures, robot

> **可能重复：**
> [C：如何将浮点数包装到区间 [-pi, pi)](https://stackoverflow.com/questions/4633177/c-how-to-wrap-a-float-to-the-interval-pi-pi)

我有以下代码，我想优化它以防止当第二个参数很大时旋转函数中的while循环。代码是：

```
#include <math.h>
#include <stdio.h>
#include <string.h>

typedef struct {
   double x;
   double y;
} pos_t;

typedef struct {
   double a;
} ori_t;

typedef struct {
   pos_t pos;
   ori_t ori;
} pose_t;

void forward(pose_t *pose, double dist_units) {
   pose->pos.x += cos(pose->ori.a)*dist_units;
   pose->pos.y += sin(pose->ori.a)*dist_units;
}

inline double deg_to_rad(double angle_deg) {
   return angle_deg*M_PI/180.0;
}

inline double rad_to_deg(double angle_rad) {
   return 180.0*angle_rad/M_PI;
}

void rotate(pose_t *pose, double angle_deg) {
   pose->ori.a += deg_to_rad(angle_deg);
   while (pose->ori.a<0.0) pose->ori.a += 2.0*M_PI;
   while (pose->ori.a>=2.0*M_PI) pose->ori.a -= 2.0*M_PI;
}

int main() {
pose_t pose;
pose.pos.x = 0.0;
pose.pos.y = 0.0;
pose.ori.a = 0.0;
char command[3];
double parameter;
printf("robot:");
while (scanf("%2s %lf",command,&parameter)==2) {
    if (strcmp(command,"fw")==0) {
        forward(&pose, parameter);
        printf("Moved to (%.1f,%.1f,%.0f)!\n",pose.pos.x,pose.pos.y,rad_to_deg(pose.ori.a));
    } else if (strcmp(command,"rt")==0) {
        rotate(&pose, parameter);
        printf("Turned to (%.1f,%.1f,%.0f)!\n",pose.pos.x,pose.pos.y,rad_to_deg(pose.ori.a));
    } else {
        printf("Command '%s' not recognized!\n",command);
    }
    printf("robot:");
}
return 0;
} 
```

关于旋转功能发生什么变化的任何想法？

# c++ - Qt http get请求在多线程模式请求中总是返回状态码0

> ID：13002747
> 
> 赞同：0
> 
> 时间：2012-10-21T22:17:23.670
> 
> 标签：c++, http, request, qthread

我在简单的 http 客户端中有简单的请求方法，QRunnble 工作人员正在调用请求的所有返回者状态为 0，经过几次测试后我发现的更多是，当我让应用程序使用 1 个
只有 1 个 url 的线程运行时处理它的工作正常，我得到状态 200 。我怀疑我的http客户端代码中的某些东西已经磨损并且不支持多线程模式这是我完整的httpclient代码：

这是请求的代码：

```
 #ifndef _HttpClient_
#define _HttpClient_
#include <QNetworkAccessManager>
#include <QtNetwork>
#include <QUrl>

QT_BEGIN_NAMESPACE
class QSslError;
class QAuthenticator;
class QNetworkReply;
QT_END_NAMESPACE

class HttpClient : public QObject
{
     Q_OBJECT   
    public:
        HttpClient(QFile* file,QMutex* mutex);
        ~HttpClient();
         void startRequest(QString& url);
    public slots:
    #ifndef QT_NO_OPENSSL
        void sslErrors(QNetworkReply*,const QList<QSslError> &errors);
    #endif
    private:
        QString m_sUrl;
        QUrl m_url;
        QNetworkAccessManager* m_networkManager;
        QNetworkReply *reply;
        int httpGetId;      
        void HandleNetworkError(QNetworkReply::NetworkError& networkError,
                                QNetworkReply *networkReply);   
};

#endif

------------------------------------

#include "HttpClient.h"
#include <QMutexLocker>
#include <QTextStream>

HttpClient::HttpClient()
{
     m_networkManager = new QNetworkAccessManager(this);
}
HttpClient::~HttpClient()
{
;
}

void HttpClient::startRequest(QString& url)
{
     QNetworkRequest request;
     request.setUrl(QUrl(url));
     QEventLoop loop;
     reply = m_networkManager->get(request);
     connect(reply, SIGNAL(finished()), &loop, SLOT(quit()));
     loop.exec();
     LOG_MSG("Is UrlAlive?:"+url.toStdString())
     QString ApiResponse;
     QByteArray data=reply->readAll();
     ApiResponse.append(QString::fromUtf8(data));
     int iStatusCodeV =  reply->attribute(QNetworkRequest::HttpStatusCodeAttribute).toInt();
     if (reply->error()) {
        QNetworkReply::NetworkError networkError = reply->error();
        HandleNetworkError(networkError,reply); 
     }
    QString s = QString::number(iStatusCodeV);
    reply->deleteLater();
    reply = 0;

}
void HttpClient::HandleNetworkError(QNetworkReply::NetworkError& networkError,QNetworkReply *networkReply)
{
        if(networkError != QNetworkReply::NoError)
        {
            QString err = networkReply->errorString();
            LOG_MSG("HttpClient::HandleNetworkError:"+err.toStdString());
        }
}
#ifndef QT_NO_OPENSSL
void HttpClient::sslErrors(QNetworkReply*,const QList<QSslError> &errors)
{

        reply->ignoreSslErrors();   
}
#endif 
```

所有这些都是从 QRunnble 方法调用的，如下所示：

```
void ThreadWorker::run()
{
    QMutexLocker lock(_m);
    startwork();
    lock.unlock();

}

void ThreadWorker::startwork()
{
    m_pHttpClient = new HttpClient();
    //each thread gets unique url
    m_pHttpClient->startRequest(m_url);

} 
```

为什么它总是失败？

# git - 如何镜像 GitHub 存储库？

> ID：13002750
> 
> 赞同：0
> 
> 时间：2012-10-21T22:17:44.530
> 
> 标签：git, github, repository, mirror

> **可能重复：**
> [创建官方 github 镜像](https://stackoverflow.com/questions/11370239/creating-an-official-github-mirror)

如何以这种方式镜像要在我的页面上显示的 git 存储库 - [https://github.com/ghc](https://github.com/ghc)？我试过这个：[https](https://help.github.com/articles/importing-an-external-git-repo) ://help.github.com/articles/importing-an-external-git-repo但它创建了通常的存储库，而不是镜像。

# php - 使用 preg_replace 函数将 ('a - b') 转换为 ('a - c')

> ID：13002763
> 
> 赞同：-1
> 
> 时间：2012-10-21T22:19:00.883
> 
> 标签：php

我有一个问题，我尝试解决它，但我无法解决它，因为我不熟悉正则表达式，所以我想做的就是转换`'A - B'`为`'A - C'`使用该[`preg_replace`](http://php.net/preg_replace)函数。

例如：

```
'Mon ~ Tue' => 'Mon ~ Wed' 
```

我该如何使用`preg_replace`这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:23:54.347

这不需要正则表达式。

```
str_replace('Mon ~ Tue', 'Tue', 'Wed'); 
```

似乎工作得很好。

除非我在这里遗漏了什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T22:25:46.823

The code bellow seems to do the job, but it's hard to guess what exactly are you trying to do.

`$x = "Mon ~ Tue"; preg_replace("/(Mon ~ )Tue/", "\$1Wed", $x);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T22:42:03.403

The basic replacement of a string with another you can do with `str_replace`, you need no regexp at all:

```
$string = str_replace('Tue', 'Wed', $string); 
```

If you have a series of strings, for example,

```
$weekdays = array('Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'); 
```

To replace every day with the following one, we could first generate the "rotated" array

```
$week_one = $weekdays;
$week_one[] = array_shift($week_one); 
```

But due to the way `str_replace` works, **we cannot use str_replace($weekdays, $week_one, $string)** (it would replace Mon with Tue, then *that* Tue with Wed, then *that* Wed with Thu... and we'd end with all 'Mon'.

So we have to do it in two steps. In the first step we replace all strings with strings that surely aren't in the source set, nor in the target string. For example we replace Mon with {{{1}}}. In the second step we replace {{{1}}} with Tue.

```
$weekdays = array('Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun');
$replace  = array();
foreach($weekdays as $i => $day)
    $replace[] = '{{{'.$i.'}}}';

$string = str_replace($weekdays, $replace, $string);
// Then we rotate $replace in the opposite direction.
array_unshift($replace, array_pop($replace));
// And we reverse the replace.
$string = str_replace($replace, $weekdays, $string); 
```

You can use a similar approach to replace only the second occurrence of a weekday in a string with the next weekday.

# haskell - Haskell，如何将 ADT 转换为字符串？

> ID：13002764
> 
> 赞同：-3
> 
> 时间：2012-10-21T22:19:09.797
> 
> 标签：haskell, functional-programming

这是我的 ADT：

```
data Tree a = Val Integer
            |Tree a
            |Variable a 
```

我有两个问题：

问题一：用*Tree String*类型来表示一些树？

问题2：定义一个函数，用于将树，数据类型*Tree String*的元素转换为字符串：*showTree::Tree String -> String*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T22:59:34.847

关于您的第二个问题，将树转换为字符串，只需派生`Show`并使用该`show`函数：

```
data Tree a = Val Integer
            | Tree a
            | Variable a
    deriving (Eq, Ord, Show)

showTree :: (Show a) => Tree a -> String
showTree = show 
```

我不明白你的第一个问题，所以我只想谈谈，希望我所说的对你有所帮助。

了解您的“树”数据类型根本不是真正的树，它只是一个 sum 数据类型，可以通过整数或与类型变量匹配的某种类型来实例化，`a`. 第二个构造函数，`Tree`实际上并没有使您的数据类型递归 - 它只是一个构造函数名称，就像构造函数`Variable`名称一样。我认为您可能想要拥有子树（通过`Tree`用作类型，而不是构造函数） - 所以让我们将您的类型定义为：

```
data Tree a = Val Integer
            | Branch (Tree a) (Tree a)
            | Variable a 
```

现在你有一个名为的构造函数`Branch`，它有一个左子树和一个右子树。如果你的变量应该是`String`s 那么你当然可以用它`Tree String`来表示：

```
myTree :: Tree String
myTree =
    let leftBranch = Variable "x"
        rightBranch = Branch (Val 3) (Variable "y")
    in Branch leftBranch rightBranch 
```

# android - 专门查找 Android 版本 - 怎么了？

> ID：13002767
> 
> 赞同：-3
> 
> 时间：2012-10-21T22:19:55.990
> 
> 标签：android, android-emulator, version

好的，所以当我打开我的应用程序时，它应该检查手机的特定版本以使其正常运行。我不想要单独的应用程序，因为这会惹恼用户。我试过这个：

```
if(Build.VERSION.SDK_INT >= 2.2.3 && Build.VERSION.SDK_INT >= 2.1){
        //Stuff goes here
        } 
```

现在，这是 Eclipse 中的一个基本错误。现在，我可以试试这个：

```
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.GINGERBREAD) {
 //Stuff goes here
 } 
```

但是，如果用户拥有带有自定义 ROM 的 root 手机，它可能会显示不同，因此可能会显示不同，另一件事是这只会给出手机操作系统的名称，而不是特定版本。我试着在 Eclipse 中写这个：

```
if(Build.VERSION.RELEASE >= 2.2.3 && Build.VERSION.RELEASE >= 2.1){
        //Stuff goes here
    } 
```

它在 Eclipse 中返回一个错误。还有什么好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T22:24:31.790

> 现在，这是 Eclipse 中的一个基本错误

那是因为`SDK_INT`是一个`int`，而不是一个`float`。您可以通过阅读[文档](http://developer.android.com/reference/android/os/Build.VERSION.html#SDK_INT)来了解这一点。

此外，`2.2.3`在任何编程语言 AFAIK 中都不是有效数字。

> 但是，如果用户拥有带有自定义 ROM 的 root 手机，它可能会显示不同，因此可能会显示不同，另一件事是这只会给出手机操作系统的名称，而不是特定版本。

不，`Build.VERSION_CODES.GINGERBREAD`是一个`int`. 您可以通过阅读[文档](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#GINGERBREAD)来了解这一点。

> 它在 Eclipse 中返回错误

那是因为`RELEASE`是一个字符串，而不是一个`float`. 您可以通过阅读[文档](http://developer.android.com/reference/android/os/Build.VERSION.html#RELEASE)来了解这一点。

> 还有什么好的方法吗？

您的第二种方法是正确的使用方法。

# jquery - Soundcloud 小部件不工作

> ID：13002768
> 
> 赞同：0
> 
> 时间：2012-10-21T22:20:14.027
> 
> 标签：jquery, soundcloud

我已经有一段时间了，我没有进一步了解，我正在使用 Soundclouds 开发人员的 API 在页面上包含一个小部件：

页面： http: [//www.projectmusicfestival.com.au/-artists/sam_idols](http://www.projectmusicfestival.com.au/-artists/sam_idols)（请点击“查看曲目”）

资源：[https ://github.com/soundcloud/soundcloud-custom-player/downloads](https://github.com/soundcloud/soundcloud-custom-player/downloads)

问题是它没有找到轨道的 ID，在 sc.player.js 的第 640 行它调用了这个：

```
trackId = $track.data('sc-track').id, 
```

但是数据源不存在...

有没有人遇到过这个问题？

香农

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:08:55.427

您正在查看自定义播放器的文档（旧的 Flash 小部件）。要获取此类信息并能够控制小部件，请使用[小部件 API](http://developers.soundcloud.com/docs/api/html5-widget)。

# c++ - Qt Release 版本给出 MSVC++ 运行时库错误

> ID：13002769
> 
> 赞同：4
> 
> 时间：2012-10-21T22:20:26.130
> 
> 标签：c++, qt, build, mingw, runtime-error

在调试模式下构建时，我有一个完美运行的应用程序（带有大约 16 个 DLL 的 exe）。但是，一旦我切换到 Release，构建 exe 和所有 DLL，所有必需的 DLL 从 QtSDK bin 复制过来，我就会遇到运行时错误。

我究竟应该如何解决正在发生的事情？这是一个常见问题吗？我没有任何入口点等，甚至从......开始只是一个通用的运行时错误。

我发现的唯一类似问题是[here](https://stackoverflow.com/questions/4361584/error-while-trying-to-run-a-release-build-of-a-qt-application-on-windows)，但这是来自更旧版本的Qt。4.7.4 只有一个 bin 文件夹。

**编辑 1** - 除了创建 MainWindow 对象和 MainWindow 构造函数之外的所有内容之外，我已经在 main.cpp 中注释了所有内容，因此它应该只是打开一个空窗口 - 仍然是运行时库问题。

![在此处输入图像描述](../Images/7d325b63103c5f5e4e6e939f54b0e9d6.png)

注意 - 将其保持在发布模式并启动调试器可以正常启动应用程序。调试 -> 启动和调试外部应用程序也会导致此运行时库错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:08:39.190

还要添加 libEGL.dll。

有关详细信息，请参阅此错误：[https ://bugreports.qt-project.org/browse/QTBUG-28766](https://bugreports.qt-project.org/browse/QTBUG-28766)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:06:21.833

我向大家道歉。QtSingleApplication 库似乎无法正常工作。我已经实现了这一点，以强制我打开的任何文件都打开到一个实例中。我重新编译了它，但它仍然无法正常工作，但只是使用 QApplication 似乎已经解决了运行时库。我将不得不更多地研究 QtSingleApplication，看看它为什么会很痛苦。

感谢您的快速评论，无论如何:)

# html - 如何在 contentEditable 中将 HTML 标签（例如：<）转换为正确的标签（例如：<）？

> ID：13002770
> 
> 赞同：1
> 
> 时间：2012-10-21T22:20:46.323
> 
> 标签：html, contenteditable

如何在 ContentEditable div 中转换标签，以便用户可以写入 div，一旦完成，他们可以单击按钮并显示代码

例如：用户输入：`<li>lol</li>`它输出`&lt;li&gt;lol&lt;/li&gt;`我可以让它输出正确的 HTML 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:24:39.287

实际上，如果您使用 .text() 来检索 div 的内容，您会保留 html 标记。

演示：[http ://codepen.io/anon/pen/pzFEa](http://codepen.io/anon/pen/pzFEa)

```
(function(){
  $('button').on('click', function(){
    var value = $('div').text();
    alert(value);
  });
})(); 
```

还是您的意思是您在服务器端获得 HTML 实体？如果是这样，请澄清。

无论如何，我建议您不要让您的用户键入 HTML。相反，让他们使用[Markdown](http://daringfireball.net/projects/markdown/syntax)。

# grails - Grails GSP - 无法使用参数调用正文

> ID：13002771
> 
> 赞同：0
> 
> 时间：2012-10-21T22:21:06.593
> 
> 标签：grails, gsp, taglib

我已经定义了一个这样的标签库：

```
class FooTagLib {
    static namespace = "foo"

    def bar = { attrs, body ->
        out << render(template: "/taglib/foo/bar", model: [body: body])
    }
} 
```

body 闭包有两个参数，baz 和 qux，为什么我不能在我的 /taglib/foo/_bar.gsp 中这样做：

```
${body(baz: 'Hello', qux: 'world!')} 
```

?

这就是我在 gsp 视图中使用此标签的方式：

```
<foo:bar>
    ${baz} ${qux}
</foo:bar 
```

它打印正文的内容，但参数都是`null`：

```
null null 
```

这是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:40:47.863

在 taglib 中，您从不指定任何参数，它不会自动完成，因为 taglib 不知道映射键的名称。您必须在模型中指定映射键和值。

```
class FooTagLib {
    static namespace = "foo"

    def bar = { attrs, body ->
        def s = body()
        def tokens = s.tokenize()
        out << render(template: "/taglib/foo/bar", model: [body: [baz:tokens[0], qux:tokens[1]] ])
    }
} 
```

也许 body-tokenize 并不是你真正应该做的，但它只是为了让事情变得清晰。

使用它会更容易`attrs`，而不是使用参数构建主体闭包。

# javascript - 从跨度中获取价值

> ID：13002784
> 
> 赞同：0
> 
> 时间：2012-10-21T22:22:57.787
> 
> 标签：javascript, html, calculator

查看我的代码

它有效，但 jsfiddle 出于某种原因讨厌它。但是当它在浏览器中运行时，我得到`NaN`了计算

出于某种原因，无论解析如何，它都不会返回一个`integer`来执行计算。

有人知道为什么吗？还

```
// JavaScript Document
var payment

/* requirement #2* Each input (years, loan amount, interest rate)
   will have its own number pad for entry */
function getNum(id,span) {
    var a;
    a = parseInt(document.getElementById(id).value);
    document.getElementById(span).innerHTML += a;
}

function clear1(span) {
    document.getElementById(span).innerHTML = "";
}

/* requirment #7 Mortgage object with three variables:  years, amount, rate */
function Mortgage(years, amount, rate) {
    this.years = years;
    this.amount = amount;
    this.rate = rate;
    /*Requirment #8\. Object must have an internal function that resets all
      values/variables to default and clears amounts displayed to user */
    this.clearAll = function() {
        document.getElementById(years).innerHTML = "";
        document.getElementById(amount).innerHTML = "";
        document.getElementById(rate).innerHTML = "";
    }
    /*gets the mortgage from spans*/                        
    this.getCalc = function() {
        /*Requirment # 9 Object must call at least 1 external function */
        get();
    }
}

function test() {          
    /*uses the params to call the spans id*/                     
    var c = new Mortgage('yInput','lInput','rInput');
    c.clearAll();
}

/* an external cunction to calculate mortgage*/
function get() {
    var m = new Mortgage(parseInt(document.getElementById('yInput').innerHTML),
                         parseInt(document.getElementById('lInput').innerHTML),
                         parseInt(document.getElementById('rInput').innerHTML)
    );

    /* this is NaN?*/
    document.write(m.years-m.rate);
}

function calculate() {
    var c = new Mortgage();
    c.getCalc();
} 
```

[http://jsfiddle.net/5qf7f/6/#run](http://jsfiddle.net/5qf7f/6/#run)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:35:44.537

在部分：

```
> /* this is NaN?*/
> document.write(m.years-m.rate); 
```

请注意，如果文档已完成加载，`document.write`将首先调用[`document.open`](https://developer.mozilla.org/en-US/docs/DOM/document.open)，这将清除文档的全部内容（包括所有脚本和 HTML 元素本身）。

> [http://jsfiddle.net/5qf7f/6/#run](http://jsfiddle.net/5qf7f/6/#run)

那个“小提琴”对我根本不起作用。最好将您的代码减少到显示问题并发布的绝对最小值。该练习可能会导致您遇到问题。

知道`parseInt('')`返回可能有助于您的调查`NaN`。

# asp.net - 到 PhoneGap 的 Asp.net MVC Web 应用程序

> ID：13002786
> 
> 赞同：1
> 
> 时间：2012-10-21T22:23:17.150
> 
> 标签：asp.net, html, asp.net-mvc, cordova

我有一个 asp.net mvc web 应用程序。我想使用 phoneGap 将其转换为 ios 应用程序。我正在阅读 PhoneGap 网站上的入门文档，其中说该网站需要在 Apache Cordova 中提供服务，我看不出它能够为 asp.net 网站提供服务。

关于如何在 asp.net mvc 站点上使用 phoneGap 的任何想法？

谢谢

# vector - 将 3D 矢量平移到另一个平面

> ID：13002787
> 
> 赞同：1
> 
> 时间：2012-10-21T22:23:21.553
> 
> 标签：vector, 3d, plane

我有使用法线定义的平面（点总是零（0,0,0））。平面法线实际上是少数需要转换到另一个平面的向量的向上向量。

我试图找到一种方法如何将这几个向量从第一平面转换到第二平面。

# java - 私有静态变量错误

> ID：13002791
> 
> 赞同：0
> 
> 时间：2012-10-21T22:23:46.380
> 
> 标签：java

我有一个具有私有静态变量的类，

```
private static counter = 0; 
```

但是当我编译它时它给出了一个错误：

Car.java:3: <标识符> 预期

```
private static counter = 0;
                      ^ 
```

有谁知道它为什么这样做？我不明白它有什么问题。

这是整个代码：

```
public class Car
{
    private static counter = 0;
    private String name;

    public Car()
    {
    name = "car" +counter;
    counter++;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T22:24:25.593

您需要指定变量的类型

```
private static int counter = 0; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T22:24:53.473

你忘记了类型。看来你的意思

`private static int count = 0;`

# grails - 如何在 grails 中使用 findAllBy 列出对象

> ID：13002793
> 
> 赞同：1
> 
> 时间：2012-10-21T22:23:57.670
> 
> 标签：grails

我有我的课

```
 class  user{
    .
    .
    .
    Service service
    } 
```

我想显示具有 service="direction" 的用户列表。在我看来，我尝试这样做：

```
 Employe.findAllByService("direction") 
```

错误是

```
"Employe.findAllByService() is applicable for argument types: (java.lang.String)" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:36:51.607

你需要给它一个服务对象

```
Employee.findAllByService( Service.load( id ) ) 
```

其中 id 是您感兴趣的服务的 id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:37:01.607

您必须使用实际对象，因为 Service 是一个对象：

```
Service direction = Service.findByName("direction")
Employe.findAllByService(direction) 
```

或类似的规定。

# asp.net-mvc - 表 + 搜索的布尔值

> ID：13002800
> 
> 赞同：0
> 
> 时间：2012-10-21T22:24:25.437
> 
> 标签：asp.net-mvc, asp.net-mvc-3, crud

尝试使用数据库驱动的网站进行视频租赁

所以我的数据库中有两个表（电影和出租），我在每个表“OnHire”中设置了一个列，该列的数据值为“位”，并选择了 NULL 值。

所以我有所有的 CRUD 功能，但是......

当用户在出租表中创建新的出租记录并将“OnHire”变为真时，我正在尝试使用一个布尔值，然后将电影中的“OnHire”变为真。

允许用户通过查看电影表来知道它是否在租用它告诉我我不能转换类型 bool？布尔，存在转换（你错过了一只猫）？

```
HttpPost]
    public ActionResult Create(Rental rentals)
    {
        try
        {
            // TODO: Add insert logic here
            _entities.AddToRentals(rentals);
            _entities.SaveChanges();

            Movie mov = new Movie();

            if (rentals.OnHire)
            {
                mov.OnHire = true;
            }
            else
            {
                mov.OnHire = false;
            }

            return RedirectToAction("Index");
        }
        catch
        {
            return View();
        }
    } 
```

然后我可能会在这里碰碰运气，但如果成功了，我会做相反的事情，如果用户试图租用已经租用的视频，我会抛出错误消息

```
 if (mov.OnHire)
            {
                //error message
            } 
```

有什么建议么？

在完成数据库的 CRUD 后，我还希望实现搜索功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:47:09.427

您应该使用rentals.OnHire == true 而不是rentals.OnHire。

```
if (rentals.OnHire == true)
{
    mov.OnHire = true;
}
else
{
    mov.OnHire = false;
} 
```

# zend-framework - ZendFramework - 如何获取页面 ID 名称

> ID：13002802
> 
> 赞同：0
> 
> 时间：2012-10-21T22:24:28.540
> 
> 标签：zend-framework, zend-form, zend-db-table

我有一个表***sitepage_manageadmins***，其中包含：“ user_id, page_id ”。还有另一个表***sitepage_pages***包含“ page_id, title ”。

我试图在 Zend_Form 中将作为相关 page_id 管理员的用户呈现为下拉列表（选择列表）。

这是我的代码：

```
$this->view->owner_id = $viewer_id = $viewer->getIdentity();  // get $viewer
$adminpages = Engine_Api::_()->getDbtable('manageadmins', 'sitepage')->getManageAdminPages($viewer_id); // get viewer page_id's where is admin 
```

获取 page_id 作为下拉列表：

```
$ids = array ( 0 => '-- Select --');
    foreach ($adminpages as $adminpage) {
        $ids[] = $adminpage->page_id;
    } 
```

渲染下拉菜单

```
$this->addElement('select', 'page_id', array (
                'label' => 'Page where I'm Admin',
                'multioptions' => $ids,
)); 
```

目前，我只将 Page_ID 数字呈现为下拉列表。我想从特定的 Page_ID 呈现标题。

欢迎任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:57:13.590

这是因为您只将 ids`$ids[]`放入数组中。在这种情况下，多选项数组应该是键值对，page_id 作为键，page_title 作为值。
`foreach ($adminpages as $adminpage) {
$ids[$adminpage->page_id] = $adminpage->page_title;
}`

# xhtml - HTML表格制作

> ID：13002805
> 
> 赞同：-2
> 
> 时间：2012-10-21T22:24:34.720
> 
> 标签：xhtml, html-table

对于一个坚固的 guid，我必须编写一个包含 3 行的表格的 XHTML 片段。第一行有两个元素 1 和 2。第二行有两个元素 3 和 4。最后一行有一个元素跨越两列并包含值 5。最后一句话（最后一行）你会怎么做？

```
<table border="1">
  <tr>
  <td>1, 2</td>
  </tr>
  <tr>
    <td>3,4</td>
  </tr>
  <tr>
    <span><td>5</td></span>
      </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:31:48.133

```
<table border="1">
   <tr>
     <td>1, 2</td>
   </tr>
   <tr>
    <td>3,4</td>
   </tr>

   <tr>
     <td colspan="2">5</td>
   </tr>
  </table> 
```

您的代码只有一列用于 1,2 和 3,4，因此您的最后一行值不能跨越两列。为此，您必须对其进行一些修改

```
 <tr>
    <td>1 </td><td> 2</td>
  </tr>
  <tr>
   <td>3</td><td>4</td>
  </tr>
  <tr>
 <td colspan="2">5</td>
 </tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:37:12.750

我认为您希望使用 colspan 属性。假设您希望第一行中的 1 和 2 在 2 个不同的列中（您的代码不这样做），您需要的是这样的：

```
<table border="1">
    <tr>
        <td>1</td>
        <td>2</td>
    </tr>
  <tr>
        <td>3</td>
        <td>4</td>
  </tr>
  <tr>
        <td colspan = "2">5</td>
  </tr>
</table> 
```

如果你不明白这一点，请在评论中再次问我。

# javascript - Fancybox 链接和选择不工作

> ID：13002806
> 
> 赞同：0
> 
> 时间：2012-10-21T22:24:42.820
> 
> 标签：javascript, jquery, fancybox, fancybox-2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:57:42.100

You are getting confuse about the use of fancybox.

First, you need to set the `class="fancybox"` to the anchor `<a>`, not to the `<div>` parent container of both, the anchor and the target (`select`).

Second, the target should be a different element, not the root (this `href="/"` doesn't make sense in your case), which contains the launcher and the target.

Third, it would be a good idea to set the proper html structure to the `select` element, which is inside of a `form` tag.

See [this forked fiddle](http://jsfiddle.net/DmaUf/) for a working sample.

# objective-c - Cocoa 和 AppleScript / Apple 事件

> ID：13002810
> 
> 赞同：0
> 
> 时间：2012-10-21T22:24:54.253
> 
> 标签：objective-c, cocoa, applescript, appleevents

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:45:53.070

这不起作用，因为此命令适用于**Acrobat**。

`Processes suite`当您想模拟（单击或键盘）、获取或设置（值、属性或属性）过程的“GUI”元素时，必须使用命令（“系统事件”）。

这是使用命令的语法`do script`

```
tell application id "process.id.here" to do script "this.preflight(Preflight.getProfileByName('Magazine Ads'),false,false);" 
```

* * *

编辑：我认为这是捆绑标识符。不可能`do script`通过“**系统事件**”执行。但这是可能的，如果您在应用程序的菜单中有此脚本。您需要找到正确的应用程序 ID，尝试`unix ID`.

做你想做的事，把应用程序放在前台并运行脚本

```
using terms from application "Adobe Acrobat"
    tell application (path to frontmost application)
        do script "this.preflight(Preflight.getProfileByName('Magazine Ads'),false,false);"
    end tell
end using terms from 
```

**Processes 套件**：这是一个单击菜单的示例脚本。

```
tell application "System Events"
    tell (first process whose unix id is (processIdHere as integer))
        set frontmost to true
        click menu item "Crop to TrimBox*" of menu "Document" of menu bar 1
    end tell
end tell 
```

# android - 我需要 SVN 来下载这个项目吗？

> ID：13002827
> 
> 赞同：-2
> 
> 时间：2012-10-21T22:27:56.663
> 
> 标签：android, svn, version-control, versioning

Android 新手在这里，想使用[AndriodPlot](http://androidplot.com/wiki/Quickstart)库创建一个基本应用程序。

下载说明如下：

```
svn checkout https://androidplot.jira.com/svn/ANDROIDPLOT/  
trunk/Examples/Quickstart Quickstart 
```

有没有办法在没有 SVN 的情况下下载，这样我就可以开始了？

如果没有，什么 SVN 以及如何使用它？

我认为它是某种版本的 vcontrol，但在 Google SVN 之后，我得到了很多不同的答案，目前还不清楚我应该做什么......

非常感谢您下载正确方向的任何一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:33:29.310

是的，你需要 SVN 来下载这个项目。

SVN 的ment 是Subversion。

根据您使用的平台，您必须安装 Subversion 客户端。在 linux 发行版下，只需在存储库中搜索 subversion。

在 Windows 和 Mac OS X 下，您会找到适合您需要的图形客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T22:39:27.120

您可以手动下载所有文件或处理单个文件，例如[https://androidplot.jira.com/svn/ANDROIDPLOT/trunk/Examples/Quickstart/src/com/example/MainActivity.java](https://androidplot.jira.com/svn/ANDROIDPLOT/trunk/Examples/Quickstart/src/com/example/MainActivity.java)

但是安装 svn 然后检查存储库并在您的机器上获取文件的副本会更容易。

红豆在我学习的时候做了很好的介绍和指导[http://svnbook.red-bean.com/en/1.1/ch01.html](http://svnbook.red-bean.com/en/1.1/ch01.html)

和 PS。学习 GIT（更好，现在被广泛使用）

# php - 如何将 PHP 查询结果放入数组中？

> ID：13002829
> 
> 赞同：0
> 
> 时间：2012-10-21T22:28:10.740
> 
> 标签：php, arrays

我知道这非常容易，但我是一个菜鸟，不确定我在这里做错了什么：

```
1: $mysqli = new mysqli('test', 'test', 'test', 'test');
2: if ($stmt = $mysqli->prepare($query)) {
3:     if (!$stmt->execute()) {
4:        $out .= "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
5:    }
6:    $out = $stmt->fetch_array();
7: } else {
8:   $out .= $mysqli->error;
9: } 
```

我在第 6 行收到`Fatal error: Call to undefined method mysqli_stmt::fetch_array()`错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:32:58.733

[`mysqli_stmt::get_result()`](http://www.php.net/manual/en/mysqli-stmt.get-result.php)如果您有 PHP 5.3 或更高版本，则可以使用，然后使用[`mysql_result::fetch_array()`](http://www.php.net/manual/en/mysqli-result.fetch-array.php)：

```
$mysqli = new mysqli('test', 'test', 'test', 'test');
if ($stmt = $mysqli->prepare($query)) {
    if (!$stmt->execute()) {
        $out .= "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
    }
    $res = $stmt->get_result();
    while ($out = $res->fetch_array()) {
    }
else {
    $out .= $mysqli->error;
} 
```

此外，您可能想查看所有[MySQL-Improved 文档](http://php.net/manual/en/book.mysqli.php)。

您还可以使用 一次获取所有行[`mysqli_result::fetch_all()`](http://www.php.net/manual/en/mysqli-result.fetch-all.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:11:06.740

好的，在重新组合并尝试完全不同的代码之后（因为 fetch 不起作用，不知道为什么）我能够使用以下方法完成我的查询功能：

```
function run_query($query)
{    
  $out = '';
  $db = new PDO("mysql:host=test;dbname=test","test","test");
  $out = $db->query("$query")->fetchAll(PDO::FETCH_OBJ);
  return $out;
} 
```

感谢大家的帮助。

# java - 用于填充多个表的复选框和 sql 命令的对象名称

> ID：13002831
> 
> 赞同：0
> 
> 时间：2012-10-21T22:28:24.420
> 
> 标签：java, sql, netbeans, checkbox

我有一个包含 3 个表的数据库，我想在我的 java 应用程序中添加数据...

```
String command1 = "INSERT INTO Drivers (IDNumber, FirstName, LastName) VALUES" + drivID + FName + LName; 
```

我可以使用此命令在所有 3 个表中输入数据还是必须创建 3 个这样的命令才能在以下准备好的语句中使用

```
PreparedStatement p = conn.getStatement(command1); 
```

Allso 在我的表格中，我有复选框和字符串，我将字符串变量设置如下

```
String drivID = txtid.getText(); 
```

有人能告诉我复选框的对象名称是什么吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:40:10.257

```
String command1 = String.format("INSERT INTO %s (IDNumber, FirstName, LastName) VALUES (%s, %s, %s)", tableName, ID, fName, lName);
PreparedStatement p = conn.getStatement(command1); 
```

尽管对于您的示例，我认为您没有理由不能使用 java.sql.Statement 而不是 PreparedStatement。

# wix - Wf4 中标准工作流活动的自定义库

> ID：13002832
> 
> 赞同：2
> 
> 时间：2012-10-21T22:28:31.347
> 
> 标签：wix, custom-controls, add-in, workflow-foundation-4

我们开发了几个 wf4 自定义活动，希望提供给客户在他们的解决方案中使用。

我们正在考虑一个工作流扩展 SDK，它可以引用客户解决方案中的库以及查看工作流设计器工具箱中的活动。

实现该目标的最佳方法是什么？蜡？VS2K10 插件解决方案？任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T12:20:43.553

以防万一它仍然可以帮助任何人，

最后，我们开发了一个 2K12 .Visx 包，它可以读取项目的库。如果其中任何一个是活动库，我们会将这些活动放入工具箱中。

毫无疑问，visx 包与 EnvDTE 参考相结合是一个强大的组合，即使那里没有太多文档。

# django - 使用 Django 中的现有 ORM 数据生成选择字段

> ID：13002833
> 
> 赞同：0
> 
> 时间：2012-10-21T22:28:30.983
> 
> 标签：django, django-forms

我在 Ubuntu 12.04 上使用 Django 1.4 和 Python 2.7。

随着我的进步，我将继续更新这个问题。

更新 2：

我正在尝试使用现有模型中的信息在表单中生成 2 个选择字段。

```
class AssignProject(forms.Form):

    def __init__(self, devs, *args, **kwargs):
        """
        ..  method:: __init__()

            Class constructor

            :param devs: Tuple with which developer
        """
        super(AssignProject, self).__init__(*args, **kwargs)
        self.dev = forms.ChoiceField(widget = forms.Select(), choices = devs, required = True)
        self.designer = forms.ChoiceField(widget = forms.Select(), choices = devs, required = True) 
```

在这一点上，我似乎还无法访问`dev`和`designer` `ChoiceField`在我的模板中。

这是视图：

```
@login_required
def view_all_projects(request):
    """
    ..  function:: view_projects()

        Show the projects

        :param request: Django Request object
    """
    data = { 'user' : request.user }
    if (request.user.is_authenticated() and request.user.is_superuser):
        all_projects = Projects.objects.filter(active = True)
        dev_info = User.objects.filter(is_staff = True, is_superuser = False)

        dev_dict = {}
        for dev in dev_info:
            dev_dict[dev.id] = '{0} {1}'.format(dev.first_name, dev.last_name)

        devs = tuple(dev_dict.items())

        form = AssignProject(devs)
        data.update({ 'form' : form })
        data.update({ 'projects'  : all_projects })
        data.update(csrf(request))
        return render_to_response("view_all_projects.html", data)

    return render_to_response("index.html", data) 
```

我已经验证开发人员/设计人员在`devs` `tuple`.

...以及来自的模板`view_all_projects.html`：

```
<form action="/assignProject/" method="post">{% csrf_token %}
    <table>
        <td>
            <input type="hidden" name="project_id" value={{ project.id }}>
            <tr>
                <td align="right"><label class="formlabel">Assign Developer:<br /></label></td><td>{{ form.dev }}</td>
            </tr>
            <tr>
                <td align="right"><label class="formlabel">Assign Designer:<br /></label></td><td>{{ form.designer }}</td>
            </tr>
                <tr>
                    <td align="right"><label class="formlabel">&nbsp;</label></td><td><input type="submit" value="Submit  &#9658;"></td>
                </tr>
        </td>    
    </table>
</form> 
```

我没有看到任何错误，但我确实看到一个奇怪的对象引用代替`ChoiceField`了模板中的 。

```
<django.forms.fields.ChoiceField object at 0x7ffdbc054190>
<django.forms.fields.ChoiceField object at 0x7ffdbc0542d0> 
```

我看到了这些。我知道我很接近......只是无法完全理解我哪里出错了。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:43:42.617

问题完全在于形式`__init__`。

我应该分配如下字段：

```
class AssignProject(forms.Form):

    def __init__(self, devs, *args, **kwargs):
        """
        ..  method:: __init__()

            Class constructor

            :param devs: Tuple with developers
        """
        super(AssignProject, self).__init__(*args, **kwargs)
        self.fields['dev'] = forms.ChoiceField(widget = forms.Select(), choices = devs, required = True)
        self.fields['designer'] = forms.ChoiceField(widget = forms.Select(), choices = devs, required = True) 
```

注意`self.fields['dev']`不是`self.dev`。修复了一切。

# html - 什么是适当的 html 标签来防止搜索引擎在搜索结果中显示网站的正文？

> ID：13002840
> 
> 赞同：0
> 
> 时间：2012-10-21T22:29:55.180
> 
> 标签：html, seo, meta-tags

我有一个在谷歌上被索引的网站。但是因为我的描述太短了，所以正文中的内容会显示在省略号之后`...`......

```
title for www.mysite.com
www.mysite.com
Brief description ... some body contents 
```

这是我网站中使用的一些示例 html

```
<meta name="description" content="Brief description" />
<body>some body contents</body> 
```

如何确保搜索引擎只显示上述标签内的简要描述，而不是在正文中显示信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:30:41.217

如此简短的描述很难满足谷歌提供信息/准确片段的愿望：

> “谷歌有时会在搜索结果片段中使用页面的元描述，如果我们认为它为用户提供的描述比纯粹来自页面内容的描述更准确。” - [http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35624](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35624)

SEOMoz 对如何避免 Google 覆盖它们进行了更广泛的评论：[http ://www.seomoz.org/blog/why-wont-google-use-my-meta-description](http://www.seomoz.org/blog/why-wont-google-use-my-meta-description)

所以简短的回答是你不能“让”搜索引擎显示你的“弱”描述，但你可以[按照@kabaros的评论](https://stackoverflow.com/questions/13002840/what-is-the-appropriate-html-tag-to-prevent-search-engines-from-displaying-a-web#comment17642626_13002840)完全阻止它们......

# java - 使用 post 请求从页面下载文件（需要 cookie）

> ID：13002841
> 
> 赞同：0
> 
> 时间：2012-10-21T22:30:00.493
> 
> 标签：java, cookies, httpurlconnection

我已经测试了第一步（登录页面）并且它有效。我输入了所有参数（用户、密码等），然后可以打印结果（包含我的数据的页面）。问题是当我尝试从该网站下载文件时。我需要第一步的饼干。在我下载的文件中，我有消息：“会话过期”。这是我的代码：

```
URL login = new URL("..."); 
URL download_page = new URL("..."); 
URL document_link new URL("..."); 

//String for request
String data_post = "username=name&password=1234&other_data=..."; 

//Login page
HttpURLConnection conn = (HttpURLConnection)login.openConnection(); 
conn.setDoOutput(true);
OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream()); 
wr.write(data_post); 
wr.close(); 
conn.connect(); 

//Download page
HttpURLConnection connDownload = (HttpURLConnection)download_page.openConnection(); 
connDownload.connect(); 

//Link to the file 
HttpURLConnection connFile = (HttpURLConnection)document_link.openConnection(); 
connFile.connect(); 

BufferedInputStream in = new BufferedInputStream(connFile.getInputStream()); 

File saveFile = new File("myfile.txt"); 
OutputStream out = new BufferedOutputStream(new FileOutputStream(saveFile)); 
byte[] buf = new byte[256]; 
int n = 0; 
while ((n=in.read(buf))>=0) { 
   out.write(buf, 0, n); 
} 
out.flush(); 
out.close(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T04:17:30.830

您是否尝试在关闭连接之前检查第一页上的 cookie 标题？我会尝试类似的东西：

`String cookies = conn.getHeaderField("Set-Cookie");`

然后在以下连接中设置 cookie，在执行 connect() 之前，使用：

`connDownload.setRequestProperty("Cookie", cookies);`

...看看这是否有效...

# python - AttributeError：“NoneType”对象没有“删除”属性

> ID：13002843
> 
> 赞同：3
> 
> 时间：2012-10-21T22:31:09.487
> 
> 标签：python, tkinter, nonetype

我遇到了这个问题，我不明白为什么。

我从我的应用程序中获取了我的代码并制作了这个测试代码，这样你就不必经历一堆垃圾来看看我在问什么。

我有这个在其他代码中工作。但是在比较了两者之后，我一生都无法弄清楚这一点。

在此应用程序中，我收到错误“AttributeError: 'NoneType' object has no attribute 'delete'”。

```
import Tkinter as tk

def main():
    mainWindow = tk.Tk()
    v = tk.StringVar()
    entryBox = tk.Entry(mainWindow, textvariable=v).grid(column=0, row=1)
    def test():
        entryBox.delete(0,20)
    testButton = tk.Button(mainWindow, text='Go!', command=test, padx=10).grid(row=2, column=0) 
    tk.mainloop()
main() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T22:36:45.497

在这一行：

```
entryBox = tk.Entry(mainWindow, textvariable=v).grid(column=0, row=1) 
```

grid 不返回任何东西，所以 entryBox 是`None`，它没有 delete 方法。您必须设置`entryBox`为`tk.Entry(mainWindow, textvariable=v)`然后调用该`grid`方法`entryBox`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T22:35:49.947

发生这种情况的原因是因为您将其网格化在同一个变量中。如果您将代码更改为以下内容，它应该可以工作：

```
import Tkinter as tk
def main():
    mainWindow = tk.Tk()
    v = tk.StringVar()
    entryBox = tk.Entry(mainWindow, textvariable=v)
    def test():
        entryBox.delete(0,20)
    testButton = tk.Button(mainWindow, text='Go!', command=test, padx=10)
    testButton.grid(row=2, column=0) 
    entryBox.grid(column=0, row=1)
    tk.mainloop()
main() 
```

之所以有效，是因为`grid()`它不返回任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T22:35:08.277

当`entryBox`您尝试调用它时，尚未获得您在此处声明`delete`的那个。如果您想要一种简单的方法来重现错误。

```
In [1]: x = None
In [2]: x.delete
AttributeError: 'NoneType' object has no attribute 'delete' 
```

要解决此问题，您可以包装 entryBox 或确保获得它。

```
if entryBox:
   entryBox.delete(0, 20) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-04T16:27:39.767

`entryBox = tk.Entry(mainWindow, textvariable=v).grid(column=0, row=1)`

#而不是在同一行中使用，你可以这样做

`entryBox = tk.Entry(mainWindow, textvariable=v) entryBox.grid(column=0, row=1)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-20T14:20:10.663

如果要清除 Entry 小部件，而不是删除小部件内容，请清除 text 变量。

```
text_variable.set("") or v.set("") 
```

# ruby-on-rails - Rails 3.2.8 - 如何进行递归 has_one 检查？

> ID：13002847
> 
> 赞同：0
> 
> 时间：2012-10-21T22:31:39.963
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有以下模型：

```
class Point < ActiveRecord::Base
 ...

 has_one :next_point, class_name: "Point", foreign_key: "next_point_id"
 belongs_to :previous_point, class_name: "Point", foreign_key: "next_point_id"

 # It should return an array with the next remaining points
 def next_remaining_points
 end

end 
```

如何执行返回 next_point 直到 next_point 为零的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:44:14.060

在您的 Ruby 代码中有一个简单的递归解决方案，但请注意，这可以为每个调用执行数据库查询。使用自定义 SQL 查询可能会更好。

```
class Point < ActiveRecord::Base
  ...
  def last_point  # Or some better name
    next_point.try(:last_point) || self
  end 
```

# python - 如何使用 jinja 模板引擎将数组转换为字符串？

> ID：13002848
> 
> 赞同：26
> 
> 时间：2012-10-21T22:31:40.407
> 
> 标签：python, flask, jinja2

我有一个名为“标签”的数组元素，并希望将标签数组转换为由空格分隔的字符串。但是你在 Jinja 是怎么做到的呢？

我努力了：

```
{{ tags|join }} 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-22T01:13:10.227

其实你快到了，为了加入空间，就这样说吧：

```
{{ tags|join(' ') }} 
```

有关更多详细信息，请参阅[jinja 文档](http://jinja.pocoo.org/docs/templates/#join)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T22:41:52.810

You can use regular python in jinja tags. an obvious choice for some simple cases is `str.join`:

```
>>> jinja2.Template(r'{{ " ".join(bar) }}').render(bar='baz')
u'b a z'. 
```

You can also iterate over sequences in jinja with a `for` block:

```
>>> jinja2.Template(r'{% for quux in bar %}{{ quux }} {% endfor %}').render(bar='baz')
u'b a z ' 
```

# python - Python Pandas：矢量化操作错误？

> ID：13002850
> 
> 赞同：1
> 
> 时间：2012-10-21T22:32:02.580
> 
> 标签：python, numpy, python-3.x, pandas

日期系列看起来像这样。

```
In [89]:
db.close[:5]

Out[89]:
datetime
2012-06-28 23:58:00    1.243925
2012-06-28 23:59:00    1.244125
2012-06-29 00:00:00    1.244065
2012-06-29 00:01:00    1.243875
2012-06-29 00:02:00    1.243865
Name: close 
```

我想从每个元素中减去前一个元素。

```
In [93]:
db.close[1:5] - db.close[:4]

Out[93]:
datetime
2012-06-28 23:58:00   NaN
2012-06-28 23:59:00     0
2012-06-29 00:00:00     0
2012-06-29 00:01:00     0
2012-06-29 00:02:00   NaN
Name: close 
```

数组被减去而没有偏移。

但是当我比较数组元素时......

[94]：

```
db.close[1:5] == db.close[:4]
Out[94]:
datetime
2012-06-28 23:59:00    False
2012-06-29 00:00:00    False
2012-06-29 00:01:00    False
2012-06-29 00:02:00    False
Name: close 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T22:51:15.883

这其实是故意的。算术运算会进行数据对齐，但比较不会。过去我考虑过更改它，但发现它导致了太多问题（尤其是在将 Series 传递给期望 NumPy 数组的函数时，例如`numpy.diff`）。

编辑：要对齐，您可以手动对齐：

```
In [10]: numpy.equal(*a.align(b))
Out[10]: 
2000-01-03    False
2000-01-04     True
2000-01-05     True
2000-01-06     True
2000-01-07     True
2000-01-10    False
Freq: B 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:21:32.390

我找到了自己问题的答案。它可能对某人有用。

```
In [38]:
db.close.shift(periods=1).head() - db.close.head()

Out[38]:
datetime
2012-06-28 23:58:00        NaN
2012-06-28 23:59:00   -0.00020
2012-06-29 00:00:00    0.00006
2012-06-29 00:01:00    0.00019
2012-06-29 00:02:00    0.00001
Freq: T, Name: close 
```

不幸的是，它比普通算术运算慢 2-3 倍。

```
In [40]:

%timeit db.close.shift(periods=1) - db.close
1000 loops, best of 3: 1.64 ms per loop

%timeit db.close - db.open
1000 loops, best of 3: 700 us per loop 
```

# php - PHP将数据传递给特定的类？（数据封装）

> ID：13002851
> 
> 赞同：2
> 
> 时间：2012-10-21T22:32:23.987
> 
> 标签：php

我了解到 OOP 都是关于数据封装的，但是在彼此无关的类之间传递数据呢（下面的示例是否值得使用`extends`）？

```
class Dog {
    private $secretVar;

    public function getSecretVar() {
        $this->secretVar = 'psst... only for rainbow!';
        return $this->secretVar;
    }
}

class Rainbow {
    public function __construct(Dog $Dog) {
        print_r($Dog->getSecretVar());
    }
}

$Dog = new Dog();
$Rainbow = new Rainbow($Dog);

// ... classes that don't need the $secretVar 
```

您将如何`$secretVar`仅封装类`Dog`和`Rainbow`？截至目前，任何人都可以调用`getSecretVar()`，我很难让这种情况发生，因为它似乎破坏了封装的全部意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:45:15.650

在您的情况下，您可以这样使用`protected`：（每个扩展 hasSecret 的类都可以访问它。）

```
<?php
class HasSecret {
    protected $secretVar = 'psst... only for rainbow!';
}

class Dog extends HasSecret {
    public function getSecretVar() {
        return $this->secretVar;
    }
}

class Rainbow extends HasSecret {
    public function __construct(Dog $Dog) {
        print_r($Dog->getSecretVar());
    }
}

$Dog = new Dog();
$Rainbow = new Rainbow($Dog); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:41:08.380

It wouldn't make sense for a Dog to extend Rainbow or vice versa just to share a variable.

What you are asking of may be possible but I don't know. If it was C++ using the `friend` visibility, it is certainly possible.

In this case, you have to make it `public` or use a getter and setter.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T22:41:24.810

Encapsulation is not ment to hide the value of the variable from the rest of the program but to have full control of how the rest of your program can access the variable.

By declaring the variable private you can check what values it can be set to and you can make changes to it before anybody reads it.

There is no real point in trying to let only some of the classes read the variable.

What you are trying to do could be achieved by using reflection to check which class and method calls the getSecretVar() method, but it's hardly ever useful.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T22:50:45.553

这是一个解决方案，尽管它很难看。

```
class Dog {
    private $secretVar = 'psst... only for rainbow!';    

    public function getSecretVar($caller == NULL) {

        // Here's the trick...
        if (get_class($caller) == 'Rainbow') {
            return $this->secretVar;
        } else {
            return '';
        }
    }
}

class Rainbow {
    public function __construct(Dog $Dog) {
        print_r($Dog->getSecretVar($this));
    }
}

$Dog = new Dog();
$Rainbow = new Rainbow($Dog);

// ... classes that don't need the $secretVar 
```

它很丑，因为它难以维护且不直观。如果您真的需要这样做，那么您的设计中很可能存在缺陷。

# javascript - jQuery.Validate - 输入后验证

> ID：13002854
> 
> 赞同：1
> 
> 时间：2012-10-21T22:33:02.677
> 
> 标签：javascript, jquery, jquery-validate

我正在使用 jQuery 验证插件。如何使其仅在用户完成输入后才验证输入？

从第一个键入的字母返回错误的默认行为似乎不是非常用户友好的 IMO。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T23:11:05.677

插件 API 中有许多可用的选项。

尝试设置`onkeyup: false` 默认为`true`

参考：http : [//docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:54:48.970

尽管感觉很奇怪，但我会使用“更改”。

[为方便起见，这是我在 jsFiddle 上的示例代码](http://jsfiddle.net/seanmcmills/nFPep/)。

```
<!DOCTYPE html>
<html>
  <head>  
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      $(document).ready(function() {

        $("#the_text").live("change", function() {
          alert("the value has changed")
        })

      })
    </script>
  </head>
  <body>
    <input type="text" value="original_value" id="the_text">
  </body>
</html> 
```

# android - 禁用 API 级别 < 14 的主页按钮

> ID：13002858
> 
> 赞同：1
> 
> 时间：2012-10-21T22:34:23.153
> 
> 标签：android

[ActionBar#setHomeButtonEnabled(true)](http://developer.android.com/reference/android/app/ActionBar.html#setHomeButtonEnabled%28boolean%29)是为 api 级别 > 14 定义的。

医生说，“ `This defaults to true for packages targeting < API 14`”。如何禁用早期版本的主页按钮。目前，如果我按下操作栏中的主页按钮，屏幕会刷新。

我喜欢支持版本 13，所以我的配置是。

```
 android:minSdkVersion="13"
 android:targetSdkVersion="15"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:18:57.873

我建议使用流行的开源库[ActionBarSherlock](http://actionbarsherlock.com/)。它支持使用来自 ICS（API 级别 14）的 ActionBar API 的 ActionBar，但一直向后移植到 API 级别 7（又名 2.1）。

这将允许您使用 setHomeButtonEnabled() 和从 API 级别 7 到最新的 ActionBar API 的其余部分，目前是 API 级别 16。

# php - .load php 后.click 事件不起作用

> ID：13002859
> 
> 赞同：2
> 
> 时间：2012-10-21T22:34:23.110
> 
> 标签：php, javascript, jquery, html, css

我有一些 html 和 jQuery 代码如下：

```
$(function(){
    $("#button").click(function(e){
    $('.imgdiv').load('images3.php');
    e.preventDefault();
    });
});

<img id="preview">
<div class="imgdiv">
//PHP inserted images
<img id="image1" class="t" src="/images/image1.png">
</div>

$(".imgdiv img").click(function(e) {
e.preventDefault();
$("#preview").attr("src","images/image"+this.id.substr(5,6) + ".png");
}); 
```

但是，一旦 php 更改了图像，点击事件就不再起作用。标签完全相同，它们包含的 div 结构也是如此。我不知道是什么导致了这个问题。任何人？

请注意，阻止默认值也不起作用 - 它会跳转到页面顶部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T22:36:03.480

由于您更新了`.imgdiv`块内的元素，因此绑定到更新元素的所有事件也会*消失*。要解决此问题，您可以使用[委托事件方法](http://api.jquery.com/on/)：

```
$(".imgdiv").on("click", "img", function(e) {
   $("#preview").attr("src","images/image" + this.id.substring(5) + ".png");
   e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:45:55.117

更改元素后，可能会更改点击影响它们的方式，支持后厄运元素选择

jQuery 1.8 或 1.7

```
$("body").on("click", ".imgdiv img", function(e){
    e.preventDefault();
    $("#preview").attr("src","images/image"+this.id.substr(5,6) + ".png");
}); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

jQuery < 1.7

```
$(".imgdiv img").live("click", function(e){
    e.preventDefault();
    $("#preview").attr("src","images/image"+this.id.substr(5,6) + ".png");
}); 
```

[http://api.jquery.com/live/](http://api.jquery.com/live/)

关于 dom 更改后的“.on”函数的讨论：[.on() 未检测到 dom 更改](https://stackoverflow.com/questions/11551696/on-not-detecting-dom-change?rq=1)

希望这有帮助

# jquery - 供 jQuery 使用的 WCF 服务：适用于 VS 开发服务器，但不适用于 IIS

> ID：13002866
> 
> 赞同：1
> 
> 时间：2012-10-21T22:34:55.633
> 
> 标签：jquery, asp.net, json, wcf, web-services

这让我今天发疯了。希望这里有人可以帮助我破解它。

基本上，我创建了一个带有 WCF 服务的测试站点，供 jQuery 使用。它具有三种方法，其中两种方法完美。

该服务返回 JSON。它具有三种方法，其中两种方法完美。第三个没有 - 我不明白为什么。

这是我所知道的。

如果我从 Visual Studio 启动站点，我可以浏览到服务并查看格式化的 JSON。如果我尝试在浏览器（即 IIS 版本）中执行相同操作，则会收到 400 错误。但仅适用于一种方法 - 其他方法都很好。

正是这种不一致让我感到困惑。

我已将其设置为 IIS 中的网站，而不是虚拟目录。要浏览到它，URL 的格式为[http://mytestsite.local](http://mytestsite.local)

经过演练（我已经有一段时间没有完成任何 WCF 工作了！），我采取了从 web.config 中删除与服务相关的配置信息的方法。相反，我有一个引用 .svc 文件中的类 WebServiceHostFactory 的 Factory 属性。

以下是方法：

```
 [OperationContract]
    [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json)]
    public UserDTO[] GetUsers()
    {
        using (var dbContext = new GSChallengeContext())
        {
            var results = from u in dbContext.Users
                          select new UserDTO()
                          {
                              UserId = u.UserId,
                              Forename = u.Forename,
                              Surname = u.Surname,
                          };
            return results.ToArray();
        }
    }

    [OperationContract]
    [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json)]
    public UserDTO[] GetUserById(int userId)
    {
        using (var dbContext = new GSChallengeContext())
        {
            var results = from u in dbContext.Users
                          where u.UserId == userId
                          select new UserDTO()
                          {
                              UserId = u.UserId,
                              Forename = u.Forename,
                              Surname = u.Surname,
                              DateOfBirth = (DateTime)u.DateOfBirth
                          };
            return results.ToArray();
        }
    }

    [OperationContract]
    [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json)]
    public VehicleDTO[] GetVehiclesByUserId(int userId)
    {
        using (var dbContext = new GSChallengeContext())
        {
            var results = from v in dbContext.Vehicles
                          where v.UserId == userId
                          select new VehicleDTO()
                          {
                              VehicleId = v.VehicleId,
                              UserId = v.UserId,
                              Registration = v.Registration,
                              Alias = v.Alias,
                              Disabled = v.Disabled
                          };
            return results.ToArray();
        }
    } 
```

这是进行调用的代码：

```
 function ShowUserVehicleInfo()
    {
        var userId = $("#users").val();
        var outStr = "";
        $.getJSON('Services/GSChallenge.svc/GetVehiclesByUserId?userId=' + userId,
            function (data) {
                $.each(data, function (index, elem) {
                    outStr += "<div class=\"vehicleData\">" +
                            "<p>Registration: " + elem.Registration + "</p>" +
                            "<p>Alias: " + elem.Alias + "</p>" +
                            "<p>Disabled: " + elem.Disabled + "</p>" +
                            "</div>"
                });
            }
        );
    } 
```

我在发布之前进行了搜索，但还没有找到任何解决问题的方法——甚至没有帮助。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:30:46.310

这给了我类似情况的结果......

网页配置

```
<system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <standardEndpoints>
      <webHttpEndpoint>
         <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true" defaultOutgoingResponseFormat="Json" />
      </webHttpEndpoint>
    </standardEndpoints>
  </system.serviceModel> 
```

GS挑战定义

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
 public class GSChallenge 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:10:00.280

看起来我可能偶然发现了原因；我将数据库中的一个字段从 nchar(10) 更改为 nvarchar(10)。嘿 presto：不再出现 400 错误请求错误！

我不完全确定为什么这解决了问题 - 但我很高兴它解决了！

# asp.net-mvc - ASP.NET MVC 模型绑定优先级与 RESTful 资源

> ID：13002869
> 
> 赞同：2
> 
> 时间：2012-10-21T22:35:05.040
> 
> 标签：asp.net-mvc, rest, model-binding, restful-url, restful-architecture

ASP.NET MVC 在为传入请求绑定模型时使用的优​​先顺序在 REST 上下文中困扰着我。本质上，MVC 使用以下优先顺序的值绑定模型：

*   帖子正文
*   路线（网址）
*   查询字符串值

困扰我的是，它是如何用消息正文中的值胜过资源的 Uri 的。

例如，我可以公开一个 RESTful 资源，如下所示：

```
/dogs/ 
```

...返回：

```
[{
    'name': 'Fido',
    'color': 'brown',
    '_links': {
        'self': { 'href': '/dogs/7' }
    }
},
{
    'name': 'Spot',
    'color': 'spotted',
    '_links': {
        'self': { 'href': '/dogs/5' }
    }
}] 
```

请注意，使用“self”链接（[HAL](http://stateless.co/hal_specification.html)样式），我拥有修改狗所需的一切，方法是将这些资源放回服务器而不需要它们的“id”值。

```
PUT /dogs/7
{
    'name': 'Super Fido',
    'color': 'rainbow'
} 
```

服务器拥有更新狗所需的一切，没有混乱。MVC 会将所有内容很好地模型绑定到我的模型中，包括 id（来自路由）。

但是，我看到的一些 API 样式在消息正文中包含“id”，因此它看起来像这样：

```
GET /dogs/7
{
    'id': 7,
    'name': 'Super Fido',
    'color': 'rainbow'
} 
```

但从根本上最困扰我的是，如果我有一个定义为“{controller}/{id}”的路由，并且客户端执行以下操作：

```
PUT /dogs/7
{
    'id': 5,
    'name': 'Snowy',
    'color': 'white'
} 
```

...然后 MVC 会将“id”模型绑定到 5（来自消息正文），而不是 7（来自路由），但基于我的客户端提供的资源 URI，他们应该已经更新 Fido 的信息。这类似于尝试将文档保存到某个位置的硬盘驱动器，并且由于文档中的某些内容，它会自动保存在其他位置。

如何更改 ASP.NET MVC 中的开箱即用模型绑定优先级以优先于消息正文（当存在冲突时）的路由值，在这种情况下这样做是一件好事吗？

# php - 不正确的字符串值：列的“\xCC_a”

> ID：13002872
> 
> 赞同：0
> 
> 时间：2012-10-21T22:35:08.477
> 
> 标签：php, mysql

收到错误：

> 错误号：1366
> 
> 不正确的字符串值：第 1 行的列 'last_name' 的 '\xCC_a'
> 
> 更新`phppos_people`集`first_name`= 'Juan Gordon', `last_name`= 'Garc�_a', `email`= 'EMAIL@email.com', `phone_number`= '', `address_1`= '', `address_2`= '', `city`= '', `state`= '', `zip`= '', `country`= ' ', `comments`= '' 哪里`person_id`= '238'
> 
> 文件名：/Library/WebServer/Documents/PHP-Point-Of-Sale/models/person.php
> 
> 行号：85

代码：

```
//Skip first row
fgetcsv($handle);
while (($data = fgetcsv($handle)) !== FALSE) 
{
    $person_data = array(
    'first_name'=>$data[0],
    'last_name'=>$data[1],
    'email'=>$data[2],
    'phone_number'=>$data[3],
    'address_1'=>$data[4],
    'address_2'=>$data[5],
    'city'=>$data[6],
    'state'=>$data[7],
    'zip'=>$data[8],
    'country'=>$data[9],
    'comments'=>$data[10]
    );

    $customer_data=array(
    'account_number'=>$data[11]=='' ? null:$data[11],
    'taxable'=>$data[12]=='' ? 0:1,
    'company_name' => $data[13],
    );
    if($this->Customer->exists($data[14]))
    {
        $this->Customer->save($person_data,$customer_data,$data[14]);
    }
    else if(!$this->Customer->save($person_data,$customer_data))
    {   
        echo json_encode( array('success'=>false,'message'=>lang('customers_duplicate_account_id')));
        return;
    }
} 
```

数据库列使用 utf8_unicode_ci 编码

我尝试使用 utf8_encode，但没有奏效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:20:41.510

你的编码有问题。为了解决这个问题，您应该在存储之前对值调用函数 utf8_encode，就像这样。

```
$person_data = array(
'first_name' => $data[0],
'last_name'  => utf8_encode($data[1]),
... 
```

我也使用 CodeIgniter，数据库配置是：

```
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci'; 
```

# node.js - sequelize 在 find (1.6) 上获取关联

> ID：13002873
> 
> 赞同：13
> 
> 时间：2012-10-21T22:35:20.453
> 
> 标签：node.js, sequelize.js

sequelize 1.6 在更新日志中有以下内容：

> [FEATURE] 为 find 和 findAll 添加关联预取

问题是如何？

我定义了以下模型：

```
var self = {
    Medium: client.define("Medium", {
        name: Sequelize.STRING,
        description: Sequelize.TEXT
    },

    User: client.define("User", {
        firstName: Sequelize.STRING,
        lastName: Sequelize.STRING,
        email: Sequelize.STRING,
        aboutArt: Sequelize.TEXT,
        bio: Sequelize.TEXT,
        password: Sequelize.STRING,
        description: Sequelize.TEXT
    }
};
self.User.hasMany(self.Medium, { as: 'Media' });
self.Medium.hasMany(self.User);

for(var key in self){
    var model = self[key];
    model.sync();
} 
```

稍后当我获取这样的用户时：

```
 User.find(id)
    .success(function(record) {
        //record has no media!
    }) 
```

User 实例没有列表媒体。我如何自动获取关联？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-05T20:11:51.457

顺便说一句：现在 Sequelize 1.6.0 已经发布，预加载的语法略有变化：

```
User.find({ where: {id: id}, include: [Media] }).success(function(user){ 
  console.log(user.media)
}) 
```

因此，您必须将模型而不是模型的名称传递给 include 语句。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-29T05:48:16.890

sdepold 实际上编写了代码，但我相信他为 include 确定的语法是：

```
User.find({ where: {id: id}, include: ['Media'] }).success(function(user){ 
  console.log(user.media)
}) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-22T06:07:52.770

答案目前仅在代码、测试和......我的头脑中可用：D

```
User.find({ where: {id: id}, include: ['Media'] }).success(function(user){ 
  console.log(user.media)
}) 
```

尚未提供文档的原因 iiiiii 是该版本目前是 alpha 版本。

# android - 客户端/服务器 Android 应用程序：两个 AsyncTask。问题

> ID：13002875
> 
> 赞同：1
> 
> 时间：2012-10-21T22:35:36.303
> 
> 标签：android, sockets, android-asynctask

这是我的应用程序：1 个 Activity，2 个 AsyncTask（一次发送请求，一次等待响应）。

```
1) onCreate()
    AsyncTask1.execute() 
    - AsyncTask1.doInBackground() wait for incomng connection. Works!
2) onClick()
    AsyncTask2.execute()
    - AsyncTask2.doInBackground() never executed. 
```

如何解决这个问题？为什么 AsyncTask2.doInBackground() 不起作用？

有更好的模式来创建 C/S 应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:40:34.623

阅读 AsyncTask 类的文档，它说自从 android 3.0 AsyncTasks 被序列化：

“从 HONEYCOMB 开始，任务在单线程上执行，避免了并行执行导致的常见应用错误。”

所以基本上 AsyncTask2 正在等待 AsyncTask1 结束，这不会发生，因为它正在等待连接。您可以使用 executeOnExecutor 方法并行运行 AsyncTask - 但它从 API 11 开始可用。

您应该考虑使用 Services 或 ExecutorService：

[http://developer.android.com/reference/java/util/concurrent/ExecutorService.html](http://developer.android.com/reference/java/util/concurrent/ExecutorService.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:51:36.170

解决方案是这样的：

```
task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR); 
```

代替

```
task.execute(); 
```

[Android SDK 链接 - 执行器](http://developer.android.com/reference/android/os/AsyncTask.html#executeOnExecutor%28java.util.concurrent.Executor,%20Params...%29)

# python - 列出索引错误

> ID：13002877
> 
> 赞同：0
> 
> 时间：2012-10-21T22:35:42.210
> 
> 标签：python, django-orm

我有一个 for 循环，例如：

```
staff = Staff.objects.all().order_by('person__full_name')
for k in staff:
    categ = k.staff_job_categories.all()[1]
    if categ.name == unicode("xxx","utf-8"):
        t = categ.name 
```

但是因为`categ = k.staff_job_categories.all()[1]` 我从索引错误中得到了一个列表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:39:09.350

似乎`print len(k.staff_job_categories.all())`会输出`0`，或者`1`因为该项目没有人员工作类别，或者只存在一个类别（具有 index`0`而不是`1`）。

因此，如果您对第二类感兴趣，如果它存在，您的代码可以更改为

```
staff = Staff.objects.all().order_by('person__full_name')
for k in staff:
    categories = k.staff_job_categories.all()
    if len(categories) < 2:
        continue
    categ = categories[1]
    if categ.name == unicode("xxx","utf-8"):
        t = categ.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:38:50.290

它可能`k.staff_job_categories.all()`是空的或只有一个项目。

您可以按照这些思路进行测试和尝试。

```
all_categ = k.staff_job_categories.all()
if all_categ:
   categ = all_categ[0] 
```

# matrix - 如何定义对比度系数矩阵？

> ID：13002880
> 
> 赞同：1
> 
> 时间：2012-10-21T22:36:10.817
> 
> 标签：matrix, anova, contrast

我有这个数据

```
y x1 x2 pre
1  16  1  1  14
2  15  1  1  13
3  14  1  2  14
4  13  1  2  13
5  12  2  1  12
6  11  2  1  12
7  11  2  2  13
8  13  2  2  13
9  10  3  1  10
10 11  3  1  11
11 11  3  2  11
12  9  3  2  10 
```

我安装了以下模型

```
lm(y ~ x1 + x2 + x1*x2) 
```

我的设计矩阵是

```
 [,1] [,2] [,3] [,4] [,5] [,6] [,7]
 [1,]    1   14    1    0    1    1    0
 [2,]    1   13    1    0    1    1    0
 [3,]    1   14    1    0    0    0    0
 [4,]    1   13    1    0    0    0    0
 [5,]    1   12    0    1    1    0    1
 [6,]    1   12    0    1    1    0    1
 [7,]    1   13    0    1    0    0    0
 [8,]    1   13    0    1    0    0    0
 [9,]    1   10    0    0    1    0    0
[10,]    1   11    0    0    1    0    0
[11,]    1   11    0    0    0    0    0
[12,]    1   10    0    0    0    0    0 
```

我正在尝试使用此设计来重现下表：

```
Source DF Squares Mean Square F Value Pr > F
Model 6 44.79166667 7.46527778 12.98 0.0064
Error 5 2.87500000 0.57500000
Corrected Total 11 47.66666667

Source DF Type III SS Mean Square F Value Pr > F
pre 1 3.12500000 3.12500000 5.43 0.0671
x1 2 4.58064516 2.29032258 3.98 0.0923
x2 1 3.01785714 3.01785714 5.25 0.0706
x1*x2 2 1.25000000 0.62500000 1.09 0.4055 
```

第一部分很好

```
XtX <- t(x) %*% x
XtXinv <- solve(XtX)
betahat <- XtXinv %*% t(x) %*% y

H <- x %*% XtXinv %*% t(x) 
IH <- (diag(1,12) - H)
yhat <- H %*% y 
e <- IH %*% y
ybar <- mean(y)

MSS <- t(betahat) %*% t(x) %*% y - length(y)*(ybar^2) 
ESS <- t(e) %*% e 
TSS <- MSS + ESS 

dfM <- sum(diag(H)) - 1 
dfE <- sum(diag(IH)) 
dfT <- dfM + dfE 

MSM <- MSS/dfM 
MSE <- ESS/dfE 

Ftest <- MSM / MSE
pr <- 1 - pf(Ftest, dfM, dfE) 
```

'pre' 的对比度系数矩阵似乎是正确的。

```
L <- matrix(c(0,1,0,0,0,0,0), 1, 7, byrow=T)
Lb <- L %*% betahat 
LXtXinvLt <- round(L %*% XtXinv %*% t(L), digits=4) 
SSpre <- t(Lb) %*% solve(LXtXinvLt) %*% (Lb) 
MSpre <- SSpre / 1 
Fpre <- MSpre / MSE 
PRpre <- 1 - pf(Fpre, 1, 12-7) 
```

但我不明白如何定义 x1、x2 和 x1*x2 的对比度系数矩阵。我的其余代码有什么问题？下面是我认为应该如何计算 x1 的示例

```
L <- matrix(c(0,0,1,1,0,0,0), 1, 7, byrow=T)
Lb <- L %*% betahat 
LXtXinvLt <- round(L %*% XtXinv %*% t(L), digits=4) 
SSX1 <- t(Lb) %*% solve(LXtXinvLt) %*% (Lb) 
MSX1 <- SSX1 / 1 
FX1 <- MSX1 / MSE 
PRX1 <- 1 - pf(FX1, 1, 12-7) 
```

谢谢！

# events - 使用点击事件时没有填充主干历史记录

> ID：13002884
> 
> 赞同：1
> 
> 时间：2012-10-21T22:36:48.617
> 
> 标签：events, mobile, backbone.js, router, tap

我正在将骨干用于移动应用程序开发项目（已编译 phonegap），但路由器历史记录存在问题。我正在触发点击事件以在移动平台上获得额外的响应，但是通过触发点击访问的页面似乎并未包含在路由器的历史记录中。当点击后退按钮时，这些总是被跳过。

有什么方法可以使主干路由器的历史记录与点击事件一起使用？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:45:25.403

您必须调用使用 navigate 方法才能将页面添加到 Backbone 历史记录。您可以按如下方式以编程方式执行此操作：

```
var MyApp = new Backbone.Router();
MyApp.navigate('newPage', {trigger: true}); 
```

基本上，每当您触发点击事件时，您都可以根据点击事件参数导航到特定事件。

# ruby-on-rails - 向 rails respond_to 发送查询字符串

> ID：13002886
> 
> 赞同：0
> 
> 时间：2012-10-21T22:37:00.240
> 
> 标签：ruby-on-rails, ruby, json

我对 ruby​​ 和 rails 开发相当陌生。在过去的一段时间里，我一直在试图弄清楚如何将参数/查询字符串传递给 rails respond_to 块。我专注于json响应。

说我有以下

```
def index
   @employees = Employee.all

   respond_to do |format|
      format.html
      format.json { render json: @employees }
   end
end 
```

我希望只得到一个 json 响应，其中包含 id 大于 500 的员工。解决这个问题的最佳方法是什么。

我一直在尝试使用 jQuery.ajax() 发出 json 请求，我知道您可以将数据传递到格式化为查询的服务器，但不知道如何使其工作。

上面的例子只是假设的。我只是在寻找一种在需要 json 响应时能够使用查询字符串的方法。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:50:32.213

随请求发送的任何参数（在查询字符串中）都应该在您的控制器中可用（检查`params`变量）。这是获取 id 大于等于 500 的员工的一种方法：

代替

```
@employees = Employee.all 
```

和

```
@employees = Employee.find(:all, conditions: ["id >= ?", 500]) 
```

请注意，除了格式之外，您不需要将任何内容传递给该`respond_to`块。

# asp.net-mvc - Mvc4 默认模型绑定器 - 字典

> ID：13002889
> 
> 赞同：0
> 
> 时间：2012-10-21T22:37:15.960
> 
> 标签：asp.net-mvc, dictionary, default, model-binding

我有一个发布这些值的表格：

调查[0].Key 75

调查[0].值 4

调查[1].Key 76

调查[1].Value 4

我正在尝试使用默认模型绑定器将其映射到 Dictionary 类型：

```
[HttpPost]
public ActionResult CompleteSurvey(Dictionary<int, int> answers)
{
...
} 
```

但我得到 InvalidCastException: Specified cast is not valid。

为什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:04:17.193

我只是在这里猜测，但我认为这是因为您的论点被称为“答案”而不是“调查”。您应该通过查看在 firebug 或 chrome 中易于执行的帖子标题来查看发布到您的方法的内容。当您检查“通过电线”传输的内容时，这更有意义

强制转换无效的事情可能是因为在您的场景中，当模型绑定器想要完成其工作时，答案为空。如果您使用 formscollection 而不是字典，您会发现您发布的所有内容都在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:23:26.860

出于某种奇怪的原因，当我删除“调查”并自行离开迭代（即 [0].Key）时，绑定工作正常。

我的知识基于这篇文章： [http](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx) ://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx 这似乎是错误的？？？还是指以前版本的MVC？？？

# java - Java：有没有一种方法可以有效地从 LinkedList 中间插入或删除许多元素？

> ID：13002890
> 
> 赞同：3
> 
> 时间：2012-10-21T22:37:26.917
> 
> 标签：java, data-structures, linked-list

我期待在 Java 的 LinkedList 中找到它，因为链表的目的是能够在任何地方有效地插入（和删除）（假设您有某种指向要插入或删除的位置的指针）。我在 API 中没有找到任何东西。我忽略了什么吗？

我能找到的最接近的是 ListIterator 中的 add 和 remove 方法。不过，这有一些限制。特别是，根据 API，一旦底层的 LinkedList 通过 remove 被修改，其他迭代器就会变得无效。这也出现在我的测试中；以下程序导致 IllegalStateException：

```
import java.util.*;
public class RemoveFromLinkedList {
    public static void main(String[] args) {
        LinkedList<Integer> myList= new LinkedList<Integer>();
        for (int i = 0; i < 10; ++i) {
            myList.add(i);
        }

        ListIterator<Integer> i1 = myList.listIterator();
        ListIterator<Integer> i2 = myList.listIterator();
        for (int i = 0; i < 3; ++i) {
            i1.next();
            i2.next();
        }

        System.out.println("i1.next() should be 3: " + i1.next());
        i1.remove();
        i1.remove();

        // Exception!
        System.out.println("i2.next() should be 5: " + i2.next());
    }
} 
```

理想情况下，我期待的是这样的：

```
// In my imagination only. This is the way Java actually works, afaict.

// Construct two insertion/deletion points in LinkedList myLinkedList.
myIterator = myLinkedList.iterator();
for (...) {
 myIterator.next();
}
start = myIterator.clone();
for (...) {
 myIterator.next();
}

// Later...

after = myLinkedList.spliceAfter(myIterator, someOtherLinkedList);
// start, myIterator, and after are still all valid; thus, I can do this:
// Removes everything I just spliced in, as well as some other stuff before that.
myLinkedList.remove(start, after);
// Now, myIterator is invalid, but not start, nor after. 
```

[C++ 的列表](http://cplusplus.com/reference/stl/list/splice/)类（模板）有类似的东西。只有指向移动元素的迭代器才会失效，而不是所有的迭代器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:44:49.967

如果您使用迭代器删除某些内容，您仍然不能继续使用相同的迭代器。这是可能的

```
iterator.remove();
iterator.next();
iterator.remove();
iterator.next(); 
```

据我所知，这是最接近的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T22:57:32.250

你可以用`List.subList(startIndex, endIndex)`. 有了这个，您可以清除“源”列表中的整个范围。您还可以使用`addAll`at 子列表将新内容插入源列表。

如果`LinkedList`对此有有效的实施 - 我不知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T23:27:39.247

使用 java.util.LinkedList，引用列表中的位置以便以后有效操作的唯一方法是迭代器，如果底层列表被此迭代器以外的其他东西修改，则迭代器无效。

如果您确实需要该功能，则必须超越 Java API，或者自己编写。

# java - NIO 非阻塞 socketChannel。对方没有收到数据

> ID：13002892
> 
> 赞同：1
> 
> 时间：2012-10-21T22:37:30.263
> 
> 标签：java, android, nio

在写入 NIO 套接字期间，我有一个非常奇怪的行为。在我的移动客户端中，我使用了一个配置如下的 NIO socketChannel：

```
InetSocketAddress address = new InetSocketAddress(host, port);
socketChannel = SocketChannel.open();
socketChannel.socket().connect(address, 10000); 
socketChannel.configureBlocking(false); 
```

然后定期（每 60 秒）我向这个 socketChannel 写入一些数据（这里的代码稍微简化了一点）：

```
ByteBuffer readBuffer = ByteBuffer.allocate(DEFAULT_BUFFER_SIZE);

readBuffer.clear();

int numRead = -1;
numRead = socketChannel.read(readBuffer);
Log.write("Read " + numRead + " bytes" );

if(numRead > 0)
{
    processServerResponse(readBuffer);
}
else if(numRead < 0)
{
    // ... re-connect etc.
}

// ...
byte[] msg = getNextMessage();

ByteBuffer buffer = ByteBuffer.wrap(msg);
int numOfBytes = 0;
while(buffer.hasRemaining())
{
    numOfBytes += socketChannel.write(buffer);
}

Log.write("Written " + numOfBytes + " bytes of " + msg.length ); 
```

它有效。但是...有时（非常罕见，可能每天 1 或 2 次）我的服务器不接收数据。我的客户日志如下所示：

```
Written 10 bytes of 10 
Written 20 bytes of 20 
Written 30 bytes of 30 
Written 40 bytes of 40 
Written 50 bytes of 50 
```

等等。但在服务器端它看起来像：

```
Received 10 bytes of 10 
Received 50 bytes of 50 
```

没有收到 20、30 和 40 字节的数据记录，尽管事实上在客户端看起来所有数据都毫无例外地发送了！（实际上服务器日志比这个简化版本好一点。所以我可以看到发送了哪些数据（我发送的记录包含时间戳等））

这样的差距可能很小（2-3 分钟），这不是很糟糕，但有时它们可​​能非常大（1-2 小时 = 60-120 个周期），这对我的客户来说确实是个问题。

我真的不知道有什么问题。数据似乎是由客户端发送的，但它从未到达服务器端。我也用代理检查过它。

我将非常感谢任何想法和提示。

PS也许它起到了一些作用：客户端代码在移动的Android移动设备上运行（它在汽车中）。互联网连接是通过 GPRS 建立的。

# iphone - 检查照片库的授权状态

> ID：13002895
> 
> 赞同：2
> 
> 时间：2012-10-21T22:38:00.140
> 
> 标签：iphone, ios, ipad, ios6, uiimagepickercontroller

有没有办法在新的 iOS 6 授权方案下检查您的应用对设备照片库的授权级别？

换句话说，是否存在与照片库相反的 ABAddressBookGetAuthorizationStatus 等效项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T23:11:55.357

```
ALAuthorizationStatus status = [ALAssetsLibrary authorizationStatus]; 
```

`ALAuthorizationStatus`用于显示可能值的文档。此 API 仅适用于 iOS 6.0 或更高版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T22:41:28.117

我正在使用这个结构：

```
[assetsLibrary enumerateGroupsWithTypes:ALAssetsGroupAll usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
        if (*stop) {
            return ;
        }
// TODO : access granted
    *stop = TRUE;
    } failureBlock:^(NSError *error) {
        // TODO: User denied access. Tell them we can't do anything.
    }]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-24T08:56:36.670

对于`PHPhotoLibrary`Swift 中的 ，您应该获得以下值`PHAuthorizationStatus`：

```
 let authorizationStatus = PHPhotoLibrary.authorizationStatus() 
```

返回值为：

```
public enum PHAuthorizationStatus : Int {  

    case notDetermined // User has not yet made a choice with regards to this application

    case restricted // This application is not authorized to access photo data.

// The user cannot change this application’s status, possibly due to active restrictions
//   such as parental controls being in place.
    case denied // User has explicitly denied this application access to photos data.

    case authorized // User has authorized this application to access photos data.
} 
```

# json - nodejs json-schema 无法读取架构

> ID：13002898
> 
> 赞同：1
> 
> 时间：2012-10-21T22:38:14.920
> 
> 标签：json, node.js, rest, express, jsonschema

我有一个快递应用程序，它有一个 post 方法（post 是 json 类型）：

server.js（简化版）：

```
 app.post('/listener/v1/event/', function(req, res) {
            .
            .
            var event = req.body;
            var validator = require("./validator");
            validator.validate(event);
    } 
```

validator.js 包含对 json 的验证：

```
var jsonschemavalidate = require("json-schema");
var basicSchema = require('fs').readFileSync('./schema.json', 'utf8');

exports.validate = function (event) {
    console.log(jsonschemavalidate.validate(event, basicSchema).errors);
} 
```

schema.json：

```
{ 
    name : "test",
    type : 'object', 
    properties : { 
        event_id : { type : 'string' }, 
        timestamp : { type : 'string' } 
    }
} 
```

对于我使用 curl 的输入：

```
curl -i -X POST -H 'Content-Type: application/json' -d '{"event_id": "NedaleGassss", "timestamp": "a2009321"}' http://localhost:3000/listener/v1/event/ 
```

输出如下：

```
[ { property: '',
    message: 'Invalid schema/property definition {\n    name : "test",\n    type : "object",\n    additionalProperties : false,\n    properties :\n    {\n        event_id            : { type : "string" },\n        timestamp        \t: { type : "string" }\n    }\n}' } ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T20:23:30.990

正如错误所说，您的架构无效。架构也应该是有效的 JSON，所以属性和字符串应该用双引号引起来：

```
{ 
  "name" : "test",
  "type" : "object", 
  "properties"  : { 
    "event_id"  : { "type" : "string" }, 
    "timestamp" : { "type" : "string" } 
  }
} 
```

这应该可以解决问题，（除非您在过去一年中已经弄清楚了）

并且：

```
var basicSchema = require('fs').readFileSync('./schema.json', 'utf8'); 
```

可能会被替换为：

```
var basicSchema = require('./schema'); 
```

# html5-canvas - Javascript 3D 桌子和桌布

> ID：13002902
> 
> 赞同：1
> 
> 时间：2012-10-21T22:38:44.873
> 
> 标签：html5-canvas, webgl, three.js, gravity, textile

您将如何制作一个落在较小立方体（代表餐厅餐桌）顶部的网格/平面（代表桌布），以便当桌布就位时，它的边缘会悬挂并真实地折叠在桌子上。用物理和重力为这种下落制作动画会很酷，所以它看起来非常整洁和真实。我还想为桌布使用平铺纹理（桌布图案）。

我打算用 Three.js 来做这个，但我想任何其他的 javascript 库或工具也可以。在这一点上，即使是场景的静态渲染也是一个很好的起点。

任何提示如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:50:13.487

你很幸运——它实际上已经为你完成了。:-)

[http://mrdoob.github.com/three.js/examples/webgl_animation_cloth.html](http://mrdoob.github.com/three.js/examples/webgl_animation_cloth.html)

# python - 如何将 tweepy 输出到 Excel 中？

> ID：13002903
> 
> 赞同：1
> 
> 时间：2012-10-21T22:38:49.210
> 
> 标签：python, excel, twitter, tweepy

我是编程新手，但我希望你能帮助我解决我的问题。我正在尝试使用 tweepy/python/stream.api 和 R（统计程序）分析推文。

知道流监听器正在工作，但我不能使用输出......

这是我正在运行的脚本：

```
import tweepy

consumer_key="..."
consumer_secret="..."
access_key = "..."
access_secret = "..."

auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_key, access_secret)
api = tweepy.API(auth)

class CustomStreamListener(tweepy.StreamListener):
    def on_status(self, status):
        print status.text

    def on_error(self, status_code):
        print >> sys.stderr, 'Encountered error with status code:', status_code
        return True # Don't kill the stream

    def on_timeout(self):
        print >> sys.stderr, 'Timeout...'
        return True # Don't kill the stream

sapi = tweepy.streaming.Stream(auth, CustomStreamListener())
sapi.filter(track=['...']) 
```

结果，我没有得到完整的推文（只有前 50 个字符），而且我看不到推文的发布时间。我该如何解决这个问题，是否可以以某种方式将输出“打印”到 Excel 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:35:00.617

更改您`print status.text`以使用 xlwt 直接写入 Excel 工作表中的单元格。我已经破解了它并且没关系，但是您的代码往往会变得非常冗长。

[http://pypi.python.org/pypi/xlwt](http://pypi.python.org/pypi/xlwt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:27:23.740

将输出写入 .csv 文件或使用 xlrd 包。至于50个字符，我不知道。看起来这与图书馆有关。

# c# - 无法将值 NULL 插入列 - 具有 2 个父项的 NHibernate 实体

> ID：13002908
> 
> 赞同：4
> 
> 时间：2012-10-21T22:39:08.910
> 
> 标签：c#, nhibernate, fluent-nhibernate

{"无法将值 NULL 插入到列 'RootID'、表 'Legacy.dbo.Middle'；列不允许空值。INSERT 失败。\r\n语句已终止。"}

我有一个 Root 类、Middle 类和“底层”类。根类为“中间”作为子级，然后中间有“底部”作为子级。但是，在这个设计不佳的遗留数据库中，“底部”还引用了“根”。

根表

```
 CREATE TABLE [dbo].[Root](
    [RootID] [int] IDENTITY(1,1) NOT NULL,
    [RootName] [varchar](max) NOT NULL,
 CONSTRAINT [PK_Root] PRIMARY KEY CLUSTERED 
(
    [RootID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

中桌

```
 CREATE TABLE [dbo].[Middle](
        [MiddleID] [int] IDENTITY(1,1) NOT NULL,
        [MiddleName] [varchar](max) NOT NULL,
        [RootID] [int] NOT NULL,
     CONSTRAINT [PK_Middle] PRIMARY KEY CLUSTERED 
    (
        [MiddleID] ASC
    )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
    ) ON [PRIMARY] 
```

底桌

```
 CREATE TABLE [dbo].[Bottom](
        [BottomID] [int] IDENTITY(1,1) NOT NULL,
        [BottomName] [varchar](max) NOT NULL,
        [MiddleID] [int] NOT NULL,
        [RootID] [int] NOT NULL,
     CONSTRAINT [PK_Bottom] PRIMARY KEY CLUSTERED 
    (
        [BottomID] ASC
    )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
    ) ON [PRIMARY] 
```

外键

```
 ALTER TABLE [dbo].[Middle]  WITH CHECK ADD  CONSTRAINT [FK_Middle_Root] FOREIGN KEY([RootID])
    REFERENCES [dbo].[Root] ([RootID])
    GO

    ALTER TABLE [dbo].[Middle] CHECK CONSTRAINT [FK_Middle_Root]

    ALTER TABLE [dbo].[Bottom]  WITH CHECK ADD  CONSTRAINT [FK_Bottom_Middle] FOREIGN KEY([MiddleID])
    REFERENCES [dbo].[Middle] ([MiddleID])
    GO

    ALTER TABLE [dbo].[Bottom] CHECK CONSTRAINT [FK_Bottom_Middle]
    GO

ALTER TABLE [dbo].[Bottom]  WITH CHECK ADD  CONSTRAINT [FK_Bottom_Root] FOREIGN KEY([RootID])
REFERENCES [dbo].[Root] ([RootID])
GO

ALTER TABLE [dbo].[Bottom] CHECK CONSTRAINT [FK_Bottom_Root] 
```

c#实体

```
 public class Root
    {
        public Root()
        {
            Middles = new SortedSet<Middle>();
        }

        public int RootID { get; set; }
        public string RootName { get; set; }
        public ISet<Middle> Middles { get; set; }
    }

    public class Middle
    {
        public Middle()
        {
            Bottoms = new SortedSet<Bottom>();
        }

        public int MiddleID { get; set; }
        public Root Root
        {
            get;
            set;
        }

        public string MiddleName { get; set; }
        public ISet<Bottom> Bottoms { get; set; }
    }

    public class Bottom
    {
        public int BottomID { get; set; }
        public Root Root { get; set; }
        public Middle Middle { get; set; }
        public string BottomName { get; set; }
    } 
```

我通过 FluentNHibernate 使用以下映射，但我尝试了很多变化，但无法让它以任何方式工作。

```
public class RootMap : IAutoMappingOverride<Root>
{
    public void Override(AutoMapping<Root> mapping)
    {
        mapping.Not.LazyLoad();
        mapping.Id(x => x.RootID);
        mapping.HasMany(x => x.Middles).KeyColumn("RootID").Cascade.AllDeleteOrphan().Inverse();
    }
}

public class MiddleMap : IAutoMappingOverride<Middle>
{
    public void Override(AutoMapping<Middle> mapping)
    {
        mapping.Not.LazyLoad();
        mapping.Id(x => x.MiddleID);
        mapping.References(x => x.Root);
        mapping.HasMany(x => x.Bottoms).KeyColumn("MiddleID").Cascade.AllDeleteOrphan();
    }
}

public class BottomMap : IAutoMappingOverride<Bottom>
{
    public void Override(AutoMapping<Bottom> mapping)
    {
        mapping.Not.LazyLoad();
        mapping.Id(x => x.BottomID);
        mapping.References(x => x.Root);
        mapping.References(x => x.Middle);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T12:12:11.973

您需要将关系的多值方声明为“逆”。请参阅第 6.4 节的最后一段：http: [//nhibernate.info/doc/nh/en/index.html#collections-onetomany](http://nhibernate.info/doc/nh/en/index.html#collections-onetomany)

# twitter-bootstrap - Bootstrap Tooltip triggers class alert?

> ID：13002912
> 
> 赞同：1
> 
> 时间：2012-10-21T22:39:36.183
> 
> 标签：twitter-bootstrap, tooltip

I get a strange background when I enable a tooltip. It might be the alert class, but I tried to delete it and it didn't help. Here's a picture:

![enter image description here](../Images/c116af003d30230a07329e57874abcc8.png)

HTML:

```
<a href="#Top" rel="tooltip" data-placement="top" data-title="Upp"><i class="icon-circle-arrow-up"></i></a> 
```

JavaScript:

```
$(document).ready(function () {
    if ($("[rel=tooltip]").length) {
        $("[rel=tooltip]").tooltip();
    }
}); 
```

What am I doing wrong?

# macos - Vim zenburn doesn't work under screen in mac

> ID：13002913
> 
> 赞同：7
> 
> 时间：2012-10-21T22:40:03.577
> 
> 标签：macos, vim, terminal, gnu-screen

I'm trying to use zenburn on OSX under vim. However, whenever I use vim under screen, the background is black instead of grey. Are there color settings I need to set in screen?

Here's my screenrc:

```
vbell off
vbell_msg "Ring"

# detach on hangup
autodetach on

# don't display copyright page
startup_message off

# scroll back
defscrollback 10000

# setup the caption
hardstatus alwayslastline "%{-b gk}%-w%{+b kg}%50>%n %t%{-b gk}%+w %=%C%<"

# right/left bindings
bindkey "^[[c" next
bindkey "^[[d" prev
bindkey "^[[b" focus

# screen 256 color support
attrcolor b ".I"
termcapinfo xterm 'Co#256:AB=\E[48;5;%dm:AF=\E[38;5;%dm'
defbce "on"

# Make terminal scrolling work properly with screen
termcapinfo xterm-256color|xterm-color|xterm|xterms|xs|rxvt ti@:te@

shell -${SHELL} 
```

# javascript - Ability of External Javascript to Determine Referer?

> ID：13002916
> 
> 赞同：0
> 
> 时间：2012-10-21T22:40:33.670
> 
> 标签：javascript

Simple scenario:

1) User is on Page A and clicks a link to Page B. 2) User arrives to Page B. 3) An external (hosted on another domain C) Javascript is called when the user is on Page B in this or similar fashion:

```
<script src="http://www.domainC.com/script.js" type="text/javascript"></script> 
```

4) Is there any way for script.js to tell that the user came to Page B from Page A?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:50:40.660

远程脚本在 Page B 的上下文中执行，因此它可以访问其全局范围。

```
document.referrer 
```

# vba - 如何使用 vba 在用户窗体中声明自定义事件

> ID：13002918
> 
> 赞同：1
> 
> 时间：2012-10-21T22:40:34.577
> 
> 标签：vba, ms-word

我有收集一些用户输入的用户表单。现在我正在尝试做的是在单击“确定”按钮时声明一些要从用户窗体中抛出的事件。我是 vba 新手，所以我不知道该怎么做。任何代码或教程链接将不胜感激。

```
Load UserForm1
UserForm1.Show
//here I want to capture UserForm1 OK button's click event and read the data 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T12:17:50.700

*   在子表单中声明事件并在特定时刻引发它：

> Public **Event** clickOnChild(ByVal inputText As String)
> 
> **RaiseEvent** clickOnChild(Me.TextBox1.Value)

*   In a custom class module, worksheet class module or other user form you can catch the event. However you can't catch event in standard module because WithEvents variable are valid in object module only. To catch your event in e.g. other user form declare WithEvents variable of type childUserForm and add event-handler where the event will be catched and handled:

> Private **WithEvents** childForm As childUserForm
> 
> Private Sub **childForm_clickOnChild**(ByVal inputText As String)

* * *

**Complete example:**

*Child user form:*

```
Option Explicit

Public Event clickOnChild(ByVal inputText As String)

Private Sub CommandButton1_Click()
  RaiseEvent clickOnChild(Me.TextBox1.Value)
End Sub 
```

*Parent user form:*

```
Option Explicit

Private WithEvents childForm As childUserForm

Private Sub CommandButton1_Click()
  childForm.Show
End Sub

Private Sub childForm_clickOnChild(ByVal inputText As String)
  MsgBox "Input in child form was: " & inputText
End Sub

Private Sub UserForm_Initialize()
  Set childForm = New childUserForm
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:41:34.363

正如我在评论中所说，我认为您想要做的事情是不可能的，但我想到了以下解决方法：

1.  如果您的用户输入非常简单，例如只输入一个字符串，则消息框可以工作：

    ```
    Dim sUserInput As Variant

    sUserInput = InputBox("Please enter something useful.", "Title", "Default")

    Debug.Print "sUserInput=" & sUserInput 
    ```

2.  如果您需要表单来捕获用户输入，则将其设为模态然后通过公共方法公开一个值可能会起作用。

    在表格中：

    ```
    Option Explicit

    Private msFormString As String

    Private Sub CommandButton1_Click()
        msFormString = "Someone clicked on Button 1!"

        '***** Note: if you use Unload Me, the string
        '***** is unloaded with the form...
        Me.Hide
    End Sub

    Public Function GetFormString() As String
        GetFormString = msFormString
    End Function 
    ```

    调用代码：

    ```
    Load UserForm1
    Call UserForm1.Show(vbModal)
    Debug.Print "Value from UserForm1: " & UserForm1.GetFormString 
    ```

    注意：如果您需要传回更多数据，该函数可以返回一个对象、类或数组。

# django - django regroup and than dictsort by list length

> ID：13002919
> 
> 赞同：1
> 
> 时间：2012-10-21T22:40:54.253
> 
> 标签：django, django-templates

I need to regroup a list, than to show the results ordered by the number of items per result's list.

something like this:

```
{%  regroup car_models by make as car_models_by_make %}

{% for make in car_models_by_make|dictsort:"???" --> the problem %}
    {{ make.grouper }}  ({{ make.list|length }}) <br>
{% endfor %} 
```

so if the data is:

```
[
('panda','fiat'),
('500','fiat'),
('focus','ford')
] 
```

the result should be:

```
fiat 2
ford 1 
```

I tried: dictsort:"make.list.count","make.list.length","make.list|length" .. none did the work..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:24:18.240

我觉得`dictsort`这里不适合。

```
>>> l = [('panda', 'fiat'), ('500', 'fiat'), ('focus', 'ford')]
>>> values = [i[1] for i in l]
>>> from collections import Counter
>>> c = Counter(values)
>>> c.most_common()
[('fiat', 2), ('ford', 1)] 
```

您可以定义自己的[模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)，

```
from django import template
from collections import Counter

register = template.Library()

@register.filter
def my_sort(l):
    values = [i[1] for i in l]
    c = Counter(values)
    return c.most_common() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:01:56.760

Using this template tags I've made:

```
@register.filter()
def groups_sort(groups):

    groups.sort(key=lambda group: len(group['list']))
    return groups

@register.filter()
def groups_sort_reversed(groups):
    groups.sort(key=lambda group: len(group['list']), reverse=True)
    return groups 
```

It is possible to do this:

```
{% load custom_templatetags %}
{%  regroup car_models by make as car_models_by_make %}

{% for make in car_models_by_make|groups_sort_reversed %}
    {{ make.grouper }}  ({{ make.list|length }}) <br>
{% endfor %} 
```

will give you

```
fiat 2
ford 1 
```

Using groups_sort will give you:

```
ford 1
fiat 2 
```

this of course works on Django Models too

Enjoy

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T11:15:01.263

您应该将数据作为字典的排序列表传递给模板：

```
>>> data = [ ('panda','fiat'),
... ('500','fiat'),
... ('focus','ford') ]
>>> 
>>> from itertools import groupby

# note that we need to sort data before using groupby
>>> groups = groupby(sorted(data, key=lambda x: x[1]), key=lambda x:x[1])

# make the generators into lists
>>> group_list = [(make, list(record)) for make, record in groups]

# sort the group by the number of car records it has
>>> sorted_group_list = sorted(group_list, key=lambda x: len(x[1]), reverse=True)

# build the final dict to send to the template
>>> sorted_car_model = [{'make': make, "model": r[0]} for (make, records) in sorted_group_list for r in records]
>>> sorted_car_model
[{'make': 'fiat', 'model': 'panda'}, {'make': 'fiat', 'model': '500'}, {'make': 'ford', 'model': 'focus'}] 
```

此处的目标是对列表进行排序，以便汽车制造商按照他们生产的车型数量进行排名。

然后，使用：

```
{% regroup car_models by make as make_list %}

{% for item in make_list %}
    {{ item.grouper }} ({{ item.list|length }}) <br>
{% endfor %} 
```

要得到：

```
fiat 2
ford 1 
```

* * *

参考：[`regroup`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#regroup)

* * *

如果您的数据看起来像您在评论中的数据：

```
>>> car_models = [ 
...     {'make': 'ford', 'model': 'focus'},
...     {'make': 'fiat', 'model': 'panda'},
...     {'make': 'ford', 'model': '500'},
...     {'make': 'fiat', 'model': '500'},
...     {'make': 'opel', 'model': '500'},
...     {'make': 'opel', 'model': '500'},
...     {'make': 'opel', 'model': '500'},
... ] 
>>> 
>>> groups = groupby(sorted(car_models, key=lambda x:x['make']), key=lambda x:x['make'])
>>> groups = [(make, list(x)) for make, x in groups]
>>> sorted_group_list = sorted(groups, key=lambda x:len(x[1]), reverse=True)
>>> sorted_car_model = [{'make': make, 'model': r['model']} for (make, records) in sorted_group_list for r in records]

>>> sorted_car_model
[{'make': 'opel', 'model': '500'}, {'make': 'opel', 'model': '500'}, {'make': 'opel', 'model': '500'}, {'make': 'fiat', 'model': 'panda'}, {'make': 'fiat', 'model': '500'}, {'make': 'ford', 'model': 'fo
cus'}, {'make': 'ford', 'model': '500'}] 
```

* * *

或者，您可以将结果传递给模板，如下所示：

```
>>> from collections import Counter
>>> l = [r['make'] for r in car_models]
>>> c = Counter(l)
>>> result = [{k: v} for k,v in dict(c).iteritems()]
>>> result = sorted(result, key=lambda x: x.values(), reverse=True)
[{'opel': 3}, {'fiat': 2}, {'ford': 2}] 
```

然后，将此结果传递给模板并简单地渲染结果：

```
{% for r in result %}
    {% for k,v in r.items %}
        {{ k }} {{ v }}
    {% endfor %}j
{% endfor %} 
```

然后你会得到：

```
opel 3
fiat 2
ford 2 
```

# javascript - Sticky on state for current page for javascript menu effect

> ID：13002925
> 
> 赞同：0
> 
> 时间：2012-10-21T22:41:49.750
> 
> 标签：javascript, css, jquery-animate, menuitem

I've created a hover effect for my website navigation. [http://www.preview.brencecoghill.com/](http://www.preview.brencecoghill.com/)

I have got the effect to work as desired for all aspects accept one - **I can't get the orange square to stay down for the currently selected page**

*   for example if I click on "Contact", I am navigated to that page and initially the orange block stays down behind the contact link - however, if I hover over the "contact" link again it causes the block to hide itself again.

How can I make this effect sticky for the current page that I am on? I'm fairly new to javascript - so I'm sure this is something fairly straight forwards - but I can't figure out how to make this work.

The website is based in Wordpress, and is outputting a class **".current_page_item"** on the menu - so I am sure that this could be used to identify the menu item and stop the javascript firing if this item is hovered over?

I based the technique on the details available here: [http://line25.com/tutorials/how-to-create-a-cool-animated-menu-with-jquery](http://line25.com/tutorials/how-to-create-a-cool-animated-menu-with-jquery)

I've pasted the javascript I have used on my website here to help you see what I'm doing:

```
jQuery(document).ready(function () {
    jQuery("#main-nav > li > a").addClass("js");
    jQuery("#main-nav > li > a").hover(
      function () {
          jQuery(this).stop(true, true).animate({ backgroundPosition: "(0 -20)" }, 200);
          jQuery(this).animate({ backgroundPosition: "(0 -5px)" }, 150);
      },
      function () {     
        jQuery(this).animate({ backgroundPosition: "(0 -100px)" }, 200);
      }
    );
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:02:36.677

从选择器中排除当前菜单项类：

```
jQuery(document).ready(function () {
    var nav=jQuery("#main-nav > li:not(.current-menu-item) > a");
    nav.addClass("js");
    nav.hover(
      function () {
          jQuery(this).stop(true, true).animate({ backgroundPosition: "(0 -20)" }, 200);
          jQuery(this).animate({ backgroundPosition: "(0 -5px)" }, 150);
      },
      function () {   
        jQuery(this).animate({ backgroundPosition: "(0 -100px)" }, 200);
      }
    );
}); 
```

# c++ - Loading in large text file (50,000+ lines, ~8MB) causes my program to stop?

> ID：13002927
> 
> 赞同：0
> 
> 时间：2012-10-21T22:42:02.250
> 
> 标签：c++, file, ifstream, getline, outofrangeexception

Answered:

changing

```
while (tracefile->good()){
    getline(*tracefile,line);
.... 
```

to

```
while(getline(*tracefile, line)){
.... 
```

did the trick. Thank you, @pmr.

Original:

I made a cache simulator for my computer architecture class which is supposed to read in a trace file that contains memory instructions for my cache.

I used a test trace file with only 1000 lines when making the program, but the actual trace files are 50k+ lines. With the test trace, the program runs perfectly. With the actual trace, the program continues until it tries to use .substr() on a line, which causes an out_of_range exception and stops my program prematurely. I investigated and found that getline() is giving empty strings when the trace is too big. Remember, this does not happen on traces <= ~5000 lines.

Does anyone know why this is happening? I am using an ifstream if that matters.

EDIT: sorry here is the code. It doesn't get past the "...."

main:

```
cout << "Program started.\n";
string str[6];
int i = 0;
/* check for the correct number of arguments */
if(argc != 3){
    cout<<"usage: "<< argv[0] <<" <configfile> <tracefile>\n";
    exit(0);
}
string confname = argv[1];
string tracename = argv[2];
/* open the files and check if it worked */
ifstream confile;
ifstream tracefile;

confile.open (argv[1], ios::in);
if (!confile.is_open()){
    cout<<"Could not open config file.\n";
    exit(0);
}
if (confile.is_open()) cout << "Config file loaded.\n";
tracefile.open (argv[2], ios::in);
if (!tracefile.is_open()){
    cout<<"Could not open trace file.\n";
    exit(0);
}
if (tracefile.is_open()) cout << "Trace file loaded.\n";
/* read in the data from the config file */
if (confile.is_open()){
    i = 0;
    while(confile.good() && i != 6){
        getline(confile, str[i]);
        i++;
    }
}

/* create the cache simulator */
cache csim(atoi(str[0].c_str()), atoi(str[1].c_str()), 
                atoi(str[2].c_str()), atoi(str[3].c_str()), 
                atoi(str[4].c_str()), atoi(str[5].c_str()));
cout << "Simulator started.\n";

/* send the simulator the trace */
csim.trace(&tracefile); 
```

csim.trace:

```
cout << "Going through trace...";
int i;
string line;
string tag, index, offset;
this->IC = 0;
/* loop until there is no more lines */

while (tracefile->good()){
    /* get the next line and increment the instruction counter */
    getline(*tracefile,line);
    this->IC++;

    /* convert hex address to a binary address */
    string address = "";
    for (i = 0; i < line.substr(4,8).length (); i++)
    {
.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:09:12.700

看起来你的一根弦可能不够长。

```
while (getline(*tracefile,line);){
    /* get the next line and increment the instruction counter */

    this->IC++;

    /* convert hex address to a binary address */

    //be sure to check length of string
    if (line.size() < 12)
    {
        cerr << "line is too small" << endl;
        continue;
    }

    string address = "";

    string tmp_str = line.substr(4,8);

    for (i = 0; i < tmp_str.size(); i++) //tmp_str.size() will always be 8
    {
    }
} 
```

# jquery - Alert() call in jQuery not displaying, called from within a JsTree

> ID：13002930
> 
> 赞同：0
> 
> 时间：2012-10-21T22:42:20.250
> 
> 标签：jquery

I don't see the alert in this code. It is possibly a typo because i traced the code as it was executing and I receive the correct "nodeInfo" the alert just doesn't come up.

```
 function loadTree(jsonData){
        var treeInfo = attachTree(stageTreeData(getJson(jsonData)));
        $("#apple_tree").jstree({                           
        "json_data": {"data": treeInfo},    
        "plugins" : [ "themes", "json_data", "ui" ]
        }).bind("select_node.jstree", function (event, data) {
           // `data.rslt.obj` is the jquery extended node that was clicked
           var nodeInfo = data.rslt.obj.attr("id");
           alert(nodeInfo);
       });
    } 
```

Thanks for any and all help!!

EDIT #1 Changed the code structure:

```
function loadTree(jsonData){
    var treeInfo = attachTree(stageTreeData(getJson(jsonData)));
    $("#apple_tree").jstree({                           
        "json_data": {"data": treeInfo},    
        "plugins" : [ "themes", "json_data", "ui" ]
    });
    $("#apple_tree").bind("select_node.jstree", function (event, data) {
        // `data.rslt.obj` is the jquery extended node that was clicked
        var nodeInfo = data.rslt.obj.attr("id");
        alert(nodeInfo);
    });
} 
```

Still no luck on the alert() showing up.

# php - displaying images in php/html

> ID：13002931
> 
> 赞同：-2
> 
> 时间：2012-10-21T22:42:39.703
> 
> 标签：php, html, image

I'm trying to set the `src` of an image to a value in a database but it doesnt seem to be working.. here's the lines in question,

```
<?php
echo "  $date<br/>"?>
        <img src="<?phpecho $image;?>"/><br/>
        <?php echo"$text

    ";   
?> 
```

and the error:
`Parse error: syntax error, unexpected T_VARIABLE in /home/a6349675/public_html/Blog.php on line 54`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:45:06.957

phpecho之间需要一个空格：

```
<img src="<?php echo $image;?>"/><br/> 
```

还要从最后一个回声中删除引号：

```
<?php echo $text; ?> 
```

大声笑，还有第一个回声。

```
echo  $date; ?><\br> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T22:49:33.550

你应该发现自己是一个很好的编辑器，然后它会在你的代码中显示语法错误。

此外，99% 的时间拥有整洁的代码会更容易发现错误。

```
<?php echo $date."<br/>"; ?>
<img src="<?php echo $image;?>"/><br/>
<?php echo $text; ?> 
```

或者干脆

```
<?php 
echo $date.'<br/>',
     '<img src="'.$image.'"/><br/>',
     $text;
?> 
```

# html - 正文背景图像不使用 CSS 显示，仅在 HTML 中显示

> ID：13002933
> 
> 赞同：3
> 
> 时间：2012-10-21T22:43:05.103
> 
> 标签：html, css

我有一个非常奇怪的问题。我曾尝试使用 CSS 来设置正文的背景，但它不允许我这样做。当我在标签中使用简单的 HTML 标签时

```
<body background="images/bg.jpg"> 
```

它的工作！但是当我在 CSS 中使用它时：

```
body { 
    background-image: url(../images/bg.jpg);
} 
```

它不显示 BG 图像。

一切都是正确的，如果我检查文件夹，一切都在它的位置。我已经在 Chrome 和 Mozilla 中尝试过，但它们都不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:51:12.407

如果您的 CSS 是内联的：

```
<style>
    body { background-image: url('images/bg.jpg'); }
</style> 
```

如果您使用的是文件，请说`css/main.css`：

```
body { background-image: url('../images/bg.jpg'); } 
```

或者，您可以使用绝对路径：

```
body { background-image: url('/images/bg.jpg'); } 
```

此示例要求图像目录位于 Web 根目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T22:46:39.007

尝试`url("./images/bg.jpg")`或`url("/images/bg.jpg")`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-21T16:59:18.883

我在这里遇到了完全相同的麻烦。我以为我什么都试过了，但是……还有一件事。

首先，我的css路径如下：

```
assets/css/custom/main.css 
```

我的图像文件夹如下：

```
assets/img/bodyBackround.jpg 
```

为了使用 css 在页面上显示我的背景，我必须返回 2 个文件夹。我页面中的示例：

```
body{
  background: url(../../img/bodyBackround.jpg) repeat;
} 
```

其中`../../`意味着返回 2 个文件夹。希望这可以帮助。

更多信息可以在这里找到[http://jeffreybarke.net/2013/06/paths-and-urls-relative-and-absolute/](http://jeffreybarke.net/2013/06/paths-and-urls-relative-and-absolute/)

# javascript - HTML5 音频重新开始

> ID：13002935
> 
> 赞同：22
> 
> 时间：2012-10-21T22:43:45.700
> 
> 标签：javascript, jquery, html, audio, browser

有

```
var audio = new Audio("click.ogg") 
```

我在需要时播放咔哒声

```
audio.play() 
```

但是，有时用户速度如此之快，以至于浏览器根本不播放音频（可能还在播放之前的`play`请求时）。这个问题与**预加载**有关吗？

如何强制浏览器停止播放并重新开始？没有`stop`，只是`pause`在 HTML5 音频组件中，对吗？这里可以使用什么解决方法？

* * *

**更新**- 附加说明：

我有多个`div`带有`touchend`事件的类似复选框的元素。当此类事件被触发时，元素会在视觉上发生变化，会播放声音并相应地设置内部变量。如果用户慢慢点击这些元素，一切都会很好。如果快速敲击，声音通常会被完全跳过......

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2014-04-03T12:30:58.960

你可以试试这段代码：

```
audio.currentTime = 0;
audio.play(); 
```

看起来这是最简单的解决方案。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-15T09:54:52.373

这是我一直在使用的代码，它对我有用：

```
 if(audioSupport.duration > 0 && !audioSupport.paused){

                //already playing
                audioSupport.pause();
                audioSupport.currentTime = 0;
                audioSupport.play();

            }else{

                //not playing

                audioSupport.play();    

            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-07T00:30:20.457

我注意到在 Firefox 上，一次又一次地快速播放声音（如短促的滴答声）会经常跳过节拍。我得到的最佳解决方案就是以`cloneNode`这种方式简单地调用和播放每个声音。它并不完美（与听起来完美无瑕的 Chrome 相比）：

```
var audio = document.getElementById('myaudio');
setInterval(function() {
    audio.cloneNode().play();
}, 100); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-02T15:52:05.343

我发现如何快速播放短声音的唯一方法（如此之快以至于第二个声音在第一个结束之前开始）是实际加载 5 或 10，如果您必须再次播放但已经在播放，只需转到下一个，没有播放：

```
 var soundEls = [];//load 10 audios instead of 1
    for(var i=0;i<10;i++){
        var soundEl = document.createElement('audio');
        soundEl.src = url;
        soundEl.preload = 'auto';
        $(this._soundEl).append(soundEl);
        soundEls.push(soundEl);
    }

    var soundElIndex = 0;

    return {play:function(){
        var soundEl = soundEls[soundElIndex];

        if(soundEl.duration > 0 && !soundEl.paused){

            //already playing, switch to next soundEl
            soundElIndex++;
            if(!soundEls[soundElIndex]) soundElIndex=0;
            soundEls[soundElIndex].play();

        }else{

            //not playing
            soundEl.play();    

        }

    }}; 
```

这样做的结果是您实际上可以在其自身上播放相同的声音。

可能不是正确的方法。

# actionscript-3 - ActionScript 3 Flash 错误 1009 和 2025 组合框

> ID：13002938
> 
> 赞同：-2
> 
> 时间：2012-10-21T22:44:06.347
> 
> 标签：actionscript-3, combobox, runtime-error

我试图使用组件资产中的组合框插入音乐。昨天工作正常，但今天突然停止工作，它给了我这个错误：

*TypeError：错误 #1009：无法访问空对象引用的属性或方法。*

*ArgumentError：错误 #2025：提供的 DisplayObject 必须是调用者的子对象。*

每次我单击组合框时都会出现这些错误，奇怪的是昨天它工作正常。这是第一帧的代码：

```
import flash.events.Event;
import flash.events.MouseEvent;
import flash.system.fscommand;
import flash.media.Sound;
import flash.media.SoundChannel;
import flash.net.URLRequest;
import flash.events.Event;
import flash.media.SoundTransform;
import flash.events.MouseEvent;

//Declare MUSIC Variables
var musicSelection:Sound;
var musicChannel:SoundChannel;
var musicTrack:String = "music/dearly_beloved.mp3";
var musicVolume:Number=0.2;
/*var isMuted = false;*/

loadMusic();
function loadMusic():void 
{
 //first stop old sound playing
  SoundMixer.stopAll();
  musicSelection = new Sound();
  musicChannel = new SoundChannel();
 //create and load the required soun
 musicSelection.load(new URLRequest(musicTrack));
      //when loaded - play it
      musicSelection.addEventListener(Event.COMPLETE, musicLoaded);
     }

      function musicLoaded(evt:Event):void
     {
      //finished with this listener
      musicSelection.removeEventListener(Event.COMPLETE, musicLoaded);
      //play music
      playMusic();
      }

        function playMusic():void
     {
     //play the random or selected music
     musicChannel = musicSelection.play();
     //setting the volume control property to the music channel
     musicChannel.soundTransform = new SoundTransform(musicVolume, 0);
     //but add this one to make repeats
      musicChannel.addEventListener(Event.SOUND_COMPLETE, playAgain);
   }
   function playAgain(evt:Event):void {
     // remove this listener and repeat
     musicChannel.removeEventListener(Event.SOUND_COMPLETE, playAgain);
     playMusic();
     } 
```

这是第二帧的代码：

```
import flash.events.Event;
menuBtn.addEventListener(MouseEvent.CLICK, goToMenu)
function goToMenu(evt:Event):void
 {
gotoAndPlay(2);
 }
 // BUTTON EVENT LISTENERS
 musicCombo.addEventListener(Event.CHANGE, updateMusic);
 volumeSL.addEventListener(Event.CHANGE, setSlider);

 //process COMBO BOX changes
 function updateMusic(evt:Event):void
 {
if (musicCombo.selectedItem.data == "none")
{
    //no music is required so stop sound playing
    SoundMixer.stopAll();
}
else
{
    //otherwise load in the selected music
    musicTrack = "music/" + musicCombo.selectedItem.data;
    loadMusic();
}
  }

   function setSlider(evt:Event):void
   {
//identify the button clicked
var mySlider:Object = (evt.target);
//adjusting to volume of the music channel
musicVolume = mySlider.value;
musicChannel.soundTransform = new SoundTransform(musicVolume, 0);
    } 
```

每当我单击组合框并且尝试插入另一个组合框而不放置任何数据时都会发生错误，也会发生相同的错误。希望你们能尽快帮助我，因为这是本周星期五到期的 xD

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:36:59.903

好吧，找到答案了。看来我需要输入这 3 行代码：

```
import fl.events.ComponentEvent; 
import fl.controls.ComboBox;
import fl.data.DataProvider; 
```

# html - WP 21 标题图片

> ID：13002941
> 
> 赞同：0
> 
> 时间：2012-10-21T22:44:26.560
> 
> 标签：html, css, wordpress, wordpress-theming

我最近下载了最新版本的 Wordpress，并且正在开发新的[Twenty Twelve](http://theme.wordpress.com/themes/twentytwelve/)的儿童主题。

当用户上传一个标题图片时，它的默认样式是在它周围放置一个 1px 实心 #d2d2d2 边框，给它一个 3px 边框半径，一个盒子阴影并将其对齐到左边。

听起来很简单，我想保留它，但是将标题图像居中对齐，并在其下方放置一条 1px 实线 #ededed 线 32px（这条线应该延伸到网站宽度的 100%，所以即使标题图像很小，该行将继续将上传的图像传递到包装器的每一侧）。

出于某种原因，我无法针对正确的 HTML 和 CSS 规则来实现这一点。

我已经尝试了很多东西，从使用 header.php 和 /inc/custom-header.php 文件，修改属性和放置在我的 style.css 文档的最底部：
`header img, header img a, header a img, .header-image {`
`text-align: center; margin: inherit auto; padding-bottom: 32px; border-bottom: 1px solid #ededed;`
`}`

`header img:after, header img a:after, header a img:after, .header-image:after {`
`border-bottom: 4px solid red; padding-bottom: 32px;`
`}`

当用户上传标题图像时，我将如何实现这种预期效果？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:25:41.573

更改 style.css 的第 442 行：

```
.header-image {
    display block;
    margin: 0 auto 2em;
} 
```

# php - 如何在 PHP 脚本中遍历多个 MySQL 数据库

> ID：13002949
> 
> 赞同：2
> 
> 时间：2012-10-21T22:45:18.633
> 
> 标签：php, mysql, loops

我继承了以下代码，它为 MySQL 数据库创建了一个 Web 界面，该数据库`'database_name'`由变量 命名和定义`$database`。

我想在这个脚本中添加一个额外的数据库，以便可以在第二个数据库中创建相同的界面（它的设置方式与第一个数据库完全相同，具有相同的表名等，但包含不同的数据） . 有没有办法制作`$database`一个字符串数组，我可以循环访问多个数据库名称？

```
<?php

class DatabaseInterface {

    public $host = "localhost"; //(name or ip address)
    public $userName = "aksfhah";
    public $passWord = "**********";
    public $database = 'database_name';
    public $tableData = "measurements";
    public $tableMinbins = "minbins";
    public $tableHourbins = "hourbins";
    public $tableDaybins = "daybins";
    public $tableDescriptions = "measurementDescriptions";
    public $tableSpecs = "experimentDescriptions";
    public $connection;

    public function __construct($databaseName = "database_name") {
        $this->database = $databaseName;
        $this->connect();
    }

     public function connect($databaseName = null) {
        $dbh = mysql_connect($this->host, $this->userName, $this->passWord);
        if (is_null($databaseName)) {
            mysql_select_db($this->database);
        } else {
            mysql_select_db($databaseName);
        }
        $this->connection = $dbh;
        return $dbh;
    }

    public function initializeDatabase() {

        $this->createDataTable($this->tableData);

        $query = "create table if not exists $this->tableDescriptions (id int auto_increment primary key,type varchar(255),
    description varchar(255), experimentname varchar(255), unique Key(description,experimentname)) engine=myisam";
        mysql_query($query); //create a table if it does not exist
        echo mysql_error(); //report error if one occurred
    }

    private function createDataTable($tableName) {

        $query = "CREATE TABLE IF NOT EXISTS $tableName (
                 id smallint(5) unsigned NOT NULL,
                 time datetime NOT NULL,
                  measurement float DEFAULT NULL,
                  rebinned tinyint(4) DEFAULT '0',
                  PRIMARY KEY (id,time),
                  KEY (rebinned,id)
                    ) ENGINE=MyISAM";
        mysql_query($query); //create a table if it does not exist
        echo mysql_error(); //report error if one occurred
    }

    public function insertByDescription($time, $value, $channelDescription, $experimentDescription, $type = "other") {

        $sensorID = $this->createIdFromDescription($channelDescription, $experimentDescription, $type);
        return $this->insertById($time, $value, $sensorID);
    }

      public function insertMultipleById($timeArray, $valueArray, $sensorID,$tableName=null) {
        if(is_null($tableName)){
            $tableName=  $this->tableData;
        }
        if (count($timeArray) == 0)
            return 0;
        $query = "insert ignore into $tableName (id,time,measurement)
            VALUES ";
        for ($index = 0; $index < count($timeArray); $index++) {
            $timeString = $timeArray[$index]->format("Y-m-d H:i:s");
            $value = $valueArray[$index];
            $query = $query . "('$sensorID','$timeString','$value'),";
        }
        $query = substr($query, 0, strlen($query) - 1); //trim final comma
        $result = mysql_query($query);
        if (mysql_error()) {
            echo mysql_error();
            return false;
        } else
            return mysql_affected_rows();
    }

    public function insertMultipleByDescription($timeArray, $valueArray, $channelDescription, $experimentDescription, $type = "other",$tableName=null) {
        $sensorID = $this->createIdFromDescription($channelDescription, $experimentDescription, $type);
        return $this->insertMultipleById($timeArray, $valueArray, $sensorID,$tableName);
    }

    public function insertById(DateTime $time, $value, $sensorID) {
        $timeString = $time->format("Y-m-d H:i:s");
        $query = "insert ignore into $this->tableData (id,time,measurement)
            VALUES ('$sensorID','$timeString','$value')";
        $result = mysql_query($query);
        if (mysql_error()) {
            echo mysql_error();
            return false;
        } else if (mysql_affected_rows() == 0) {
            return false;
        } else {
            return true;
        }
    }

    public function createIdFromDescription($channelDescription, $experimentDescription, $type) {
        $sensorId = $this->getIdFromDescription($channelDescription, $experimentDescription);
        if (!$sensorId) {
            $query = "insert ignore into $this->tableDescriptions (description,experimentname,type)
            VALUES ('$channelDescription','$experimentDescription','$type')";
            $result = mysql_query($query);
            $sensorId = mysql_insert_id();
        }
        return $sensorId;
    }

    public function getIdFromDescription($measurementDescription, $experimentDescription) {
        $sensorId = false;
        $query = "select id from $this->tableDescriptions where description like '$measurementDescription'
    && experimentname like '$experimentDescription'";
        $result = mysql_query($query);
        if (mysql_error()) {
            echo mysql_error(); //report error if one occurred
            return false;
        }
        if (mysql_num_rows($result) > 0) {
            $row = mysql_fetch_array($result);
            $sensorId = $row['id'];
        }
        return $sensorId;
    }

    function getDataById($id, $startDate, $endDate, $interval = "") {
        $data = array();
        $startDateString = $startDate->format("Y-m-d H:i:s");
        $endDateString = $endDate->format("Y-m-d H:i:s");
        $query = "select time,measurement from $this->tableData where id='$id' && time>='$startDateString'  && time <='$endDateString' order by time asc " . $interval = "" ? "" : "group by $interval";
        $result = mysql_query($query);
        if (mysql_error()) {
            echo mysql_error(); //report error if one occurred
            return false;
        }
        while ($row = mysql_fetch_array($result)) {
            //$time = new DateTime($row['time']);
            $data[] = array($row['time'], $row['measurement'] * 1);
        }
        return $data;
    }

    public function getMostRecentData($id, $table) {
        $query = "select date(max(time)) as time,measurement from $table where id='$id'";
        $result = mysql_query($query);
        if (mysql_error()) {
            echo mysql_error(); //report error if one occurred
            return false;
        } elseif (mysql_num_rows($result) > 0) {
            $row = mysql_fetch_array($result);
            return $row;
        } else {
            return false;
        }
    }

    public function getExperimentList() {
        $list = array();
        $query = "select distinct experimentname from $this->tableDescriptions";
        $result = mysql_query($query);
        if (mysql_error()) {
            echo mysql_error(); //report error if one occurred
            return false;
        }
        while ($row = mysql_fetch_array($result)) {
            $list[] = $row['experimentname'];
        }
        return $list;
    }

    public function getChannelList($experimentDescription) {
        $list = array();
        $query = "select id,description,type from $this->tableDescriptions where experimentname='$experimentDescription'";
        $result = mysql_query($query);
        if (mysql_error()) {
            echo mysql_error(); //report error if one occurred
            return false;
        }
        while ($row = mysql_fetch_array($result)) {
            $list[$row['description']] = array("id" => $row['id'], "type" => $row['type']);
        }
        return $list;
    }

    public function getDescriptionFromId($id) {

        $query = "select * from $this->tableDescriptions where id='$id'";
        $result = mysql_query($query);
        if (mysql_error()) {
            echo mysql_error(); //report error if one occurred
            return false;
        }
        if (mysql_num_fields($result) > 0) {
            $row = mysql_fetch_array($result);
            return array($row['type'], $row['description'], $row['experimentname']);
        } else {
            return false;
        }
    }

    public function getDisplayName($experimentName) {
        $query = "select displayName from $this->tableSpecs where experimentName='$experimentName'";
        $result = mysql_query($query);
        echo mysql_error();
        $row = mysql_fetch_array($result);
        if ($row) {
            return $row['displayName'];
        } else {
            return false;
        }
    }

    public function simpleQuery($query) {
        $result = mysql_query($query);
        echo mysql_error();
        if ($result) {
            $row = mysql_fetch_array($result);
            if ($row) {
                return $row[0];
            } else {

                return FALSE;
            }
        } else {
            return FALSE;
        }
    }

    public function rebin($tableSource, $tableTarget, $numSeconds, $sum = false) {

        $this->createDataTable($tableTarget);

        echo "Updating $tableSource to set rebinned from 0 to 2...";
        $query = "update $tableSource set rebinned=2 where rebinned =0;";
        mysql_query($query);
        echo mysql_error();
        echo "Done.\n";

        $numRows = mysql_affected_rows();
        echo "Found $numRows records in $tableSource that need rebinning...\n";

        $query = "select id,from_unixtime(floor(unix_timestamp(min(time))/$numSeconds)*$numSeconds) as mintime from $tableSource where rebinned=2 group by id;";
        $result = mysql_query($query);
        echo mysql_error();

        if ($result) {
            while ($row = mysql_fetch_array($result)) {
                $id = $row['id'];
                $mintime = $row['mintime'];
                echo $id . "...";

                $query = "INSERT INTO $tableTarget (id,time,measurement,rebinned)
                    SELECT id,from_unixtime(floor(unix_timestamp(time)/$numSeconds)*$numSeconds)," . ($sum ? "sum" : "avg") . "(measurement) as measurement,0
                    FROM $tableSource WHERE id=$id && time>='$mintime' 
                    GROUP BY id,floor(unix_timestamp(time)/$numSeconds)
                    ON DUPLICATE KEY UPDATE measurement=values(measurement), rebinned=0;";
                mysql_query($query);
                //echo $query;
                echo mysql_error();
                echo "Done.\n";
            }
            echo "Updating $tableSource to set rebinned from 2 to 1...";
            $query = "update $tableSource set rebinned=1 where rebinned =2;";
            mysql_query($query);
            echo mysql_error();
            echo "Done.\n";
        }
    }

    public function getDCPower($experimentName, $startDate, $endDate) {
        $out = array();
        $query = $this->buildDCPowerQuery($experimentName, $this->tableMinbins);
        if ($query) {
            if ($startDate != "") {
                $query = $query . " && m0.time>='$startDate' ";
            }
            if ($endDate != "") {
                $query = $query . " && m0.time<='$endDate' ";
            }

            echo $query;
            $result = mysql_query($query);
            echo mysql_error();
            while ($row = mysql_fetch_array($result)) {
                // echo $row['time'].", ".$row['power']."\n";
                $out[] = array($row['time'], $row['power'] + 0);
            }

            return $out;
        } else {
            return FALSE;
        }
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:22:01.373

> 有没有办法让 $database 成为一个字符串数组，我可以循环访问多个数据库名称？

不，它不是那样工作的。您拥有的脚本定义了一个类。您必须查看*使用*该类的文件，其中会有类似

```
$interface = new DatabaseInterface("database1"); 
```

在那里你可以做一些事情，比如

```
$interface = array();
$interface[0] = new DatabaseInterface("database1");
$interface[1] = new DatabaseInterface("database2"); 
```

并对两个数据库使用接口的两个实例。

# php - 在 foreach 循环 (PHP) 中内爆数组以构建 SQL 查询：无效参数错误

> ID：13002953
> 
> 赞同：1
> 
> 时间：2012-10-21T22:46:06.740
> 
> 标签：php, mysql, sql, loops, implode

我正在尝试通过使用 2 个数组（其中一个是数组数组）在 PHP 中循环来构建 SQL 查询：

```
 //build array of arrays using predefined arrays
$regions = array_filter(array($EAPRO, $WCARO, $ROSA, $TACRO, $MENA, $ESARO));

//just a normal array
$regionnames = array('EAPRO', 'WCARO', 'ROSA', 'TACRO', 'MENA', 'ESARO');

$sql = "";

foreach(array_combine($regions, $regionnames) as $region => $regionname)
{
$sql .="UPDATE `database`.`table` SET `region`='$regionname' 
WHERE `countryname` IN (" . implode(",",$region) . ");";
}
echo $sql; 
```

但是，在 ideone 中调试它给了我：

```
Warning: implode(): Invalid arguments passed on line:
UPDATE `database`.`table` SET `region`='ESARO' WHERE `countryname` IN (); 
```

这告诉我每个循环上的数组没有正确内爆。我定义数组数组的方式有问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:20:28.537

来自[PHP 文档](http://php.net/manual/en/function.array-combine.php)：`array_combine ( array $keys , array $values )`

所以问题是变量在错误的地方`array_combine($regions, $regionnames)`（一个键永远不能是一个数组）。

所以这应该可以解决问题：

```
 //build array of arrays using predefined arrays
$regions = array_filter(array($EAPRO, $WCARO, $ROSA, $TACRO, $MENA, $ESARO));

//just a normal array
$regionnames = array('EAPRO', 'WCARO', 'ROSA', 'TACRO', 'MENA', 'ESARO');

$sql = "";

foreach(array_combine($regionnames, $regions) as $region => $regionname)
{
$sql .="UPDATE `database`.`table` SET `region`='$regionname' 
WHERE `countryname` IN (" . implode(",",$region) . ");";
}
echo $sql; 
```

# php - PHP Google Drive API 安装和文件上传

> ID：13002955
> 
> 赞同：1
> 
> 时间：2012-10-21T22:46:11.987
> 
> 标签：php, api, codeigniter, google-drive-api

大家好，我正在尝试通过 G 驱动器 API 上传文件。

无法找出它返回错误的原因：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Gdrive{

function initialize(){
$credentials = $this->GetOAuth2Credentials($_GET['code']);
$_SESSION['credentials'] = $credentials;

}
/**
 * Exchange an authorization code for OAuth 2.0 credentials.
 *
 * @param String $authorizationCode Authorization code to exchange for an
 *     access token and refresh token.  The refresh token is only returned by
 *     Google on the very first exchange- when a user explicitly approves
 *     the authorization request.
 * @return OauthCredentials OAuth 2.0 credentials object
 */
function GetOAuth2Credentials($authorizationCode) {
  $client = new apiClient();
  $client->setClientId(Config::5112+++++.apps.****5971157@developer.gserviceaccount.com);
  $client->setRedirectUri(Config::site_url());

  /**
   * Ordinarily we wouldn't set the $_GET variable.  However, the API library's
   * authenticate() function looks for authorization code in the query string,
   * so we want to make sure it is set to the correct value passed into the
   * function arguments.
   */
  $_GET['code'] = $authorizationCode;

  $jsonCredentials = json_decode($client->authenticate());

  $oauthCredentials = new OauthCredentials(
      $jsonCredentials->access_token,
      isset($jsonCredentials->refresh_token)?($jsonCredentials->refresh_token):null,
      $jsonCredentials->created,
      $jsonCredentials->expires_in,
      Config::CLIENT_ID,
      Config::CLIENT_SECRET
  );

  return $oauthCredentials;
}
function SaveNewFile($inputFile) {
  try {
    $mimeType = 'text/plain';
    $file = new Google_DriveFile();
    $file->setTitle($inputFile->title);
    $file->setDescription($inputFile->description);
    $file->setMimeType($mimeType);
    // Set the parent folder.
    if ($inputFile->parentId != null) {
      $parentsCollectionData = new DriveFileParentsCollection();
      $parentsCollectionData->setId($inputFile->parentId);
      $file->setParentsCollection(array($parentsCollectionData));
    }
    $createdFile = $this->service->files->insert($file, array(
        'data' => $inputFile->content,
        'mimeType' => $mimeType,
    ));
    return $createdFile;
  } catch (apiServiceException $e) {
    /*
     * Log error and re-throw
     */
    error_log('Error saving new file to Drive: ' . $e->getMessage(), 0);
    throw $e;
  }
}

} 
```

当我调用 initialize() 方法时，它返回错误：

```
Message: Undefined index: code

Fatal error: Class 'apiClient' not found 
```

应该是什么？我在我的代码中做得对吗？我需要更多代码才能使其工作吗？我在 google api 控制台上创建了 Web 应用程序项目。

我需要包含谷歌 php sdk 吗？在谷歌文档中没有提到谷歌驱动器API：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T00:48:24.420

您可能正在使用旧版本的 PHP 客户端库。确保您拥有最新的源代码并按照 Google Drive SDK 快速入门页面中的说明学习如何编写完整的 PHP 应用程序以将文件上传到 Drive：

[https://developers.google.com/drive/quickstart](https://developers.google.com/drive/quickstart)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:43:04.300

```
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';
$client = new Google_Client(); 
```

请使用那些需要文件和 Google_Client()。

# grails - Grails为一对多关系添加属性

> ID：13002956
> 
> 赞同：0
> 
> 时间：2012-10-21T22:46:13.437
> 
> 标签：grails

我在我的脚手架 Grails 应用程序中建立了一对多的关系：

```
class Course {
    County county
    Date date
    int maxAttendance

    static hasMany = [ persons:Person ]
}

class Person {
    String firstName
    String lastName
    String email

    Course course

    boolean attended
    boolean paid

    static belongsTo = [ class:Course ]
} 
```

因此，当用户查看 CourseController 时，他们能够看到 Person 在所选课程中注册。

我的问题是，我如何更改应用程序，以便当用户查看给定课程中的人员时，他们还可以查看/修改“布尔出席”和“布尔付费”的复选框，它们也在 Person 域中？这是一个屏幕截图：

![在此处输入图像描述](../Images/24799bdc9f6b5675fa7a43a30bbe4340.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T23:16:07.237

问题是您使用的是脚手架视图，因此您几乎被默认设计所困扰。

您可以通过安装和修改 grails 用于生成这些视图的模板来修改行为：

```
grails install-templates 
```

这将在 中创建模板`src/templates/scaffolding`，尽管我不推荐这种方法。也许是时候开始开发自己的控制器和视图了，因为脚手架主要用于测试和管理用途。

# jquery - 传单不同的悬停和点击事件

> ID：13002961
> 
> 赞同：3
> 
> 时间：2012-10-21T22:46:40.543
> 
> 标签：jquery, mouseevent, bind, mouseover, leaflet

我试图为**鼠标悬停**事件提供一个弹出窗口，*而不是单击*标记，并**在它被单击时***做一些**其他**的事情*（例如 func）。

 **我不相信我的半成功代码会帮助您朝那个方向思考：

（我只是在点击事件上添加悬停）

```
marker[i].on('mouseover', marker[i].bindPopup('hi').openPopup.bind(marker[i])); 
```

[i] 只是代表一个循环

* * *

Leaflet 的 API： http: [//leaflet.cloudmade.com/reference.html#map-openpopup](http://leaflet.cloudmade.com/reference.html#map-openpopup)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T14:27:47.733

以下代码在鼠标悬停时显示一个弹出窗口，并在单击标记时执行其他操作：

```
marker[i].on('mouseover', function(evt) {
  //evt.target is the marker that is being moused over 
  //bindPopup() does not need to be called here if it was already called
  //somewhere else for this marker.
  evt.target.bindPopup('hi').openPopup();
});
marker[i].on('click', function(evt) {
  //again, evt.target will contain the marker that was clicked
  console.log('you clicked a marker');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T22:55:46.677

您没有为 mouseover 事件提供回调。

```
marker[i].on('mouseover', function () {
    marker[i].bindPopup('hi').openPopup.bind(marker[i])
}); 
```

传入一个匿名函数作为你的回调，当它被调用时，它会做你想做的事。

我对传单 api 不是很熟悉（几个月前才开始使用它），所以也可能存在问题`marker[i].bindPopup('hi').openPopup.bind(marker[i])`。**

# c# - NullReferenceException 将输入发送到 TextBox

> ID：13002962
> 
> 赞同：2
> 
> 时间：2012-10-21T22:46:40.547
> 
> 标签：c#, textbox

我正在尝试将一个字符串从 form2 发送到 form3 以预加载包含信息的表单。我在 form3 上调用一个方法，该方法接受启动 linq 查询以在表单上设置控件的字符串。我得到 NullReferenceException 在 recipeNameTextBox.Text = a.RecipeName; 的第一个 foreach 中未处理 我可以看到查询运行并且信息在 a.RecipName 中。我想我可能会收到此错误，因为尚未绘制控件。任何想法如何解决这个问题？Form2代码在这里：

```
 private void updateButton_Click(object sender, EventArgs e)
 {
     Form3 Frm3 = new Form3();
     Frm3.Show();

     this.Hide();
     Frm3.takeInputFromForm2(recipeLabel.Text);
} 
```

form3代码在这里：

```
 public void takeInputFromForm2(string incommingUpdateRecipe)
 {
     Query updateRecipe = new Query();
     IEnumerable<Recipe> newrecipe = updateRecipe.getRecipeInfo(incommingUpdateRecipe);
     foreach (var a in newrecipe)
     {
         recipeNameTextBox.Text = a.RecipeName;
         nationalityTextBox.Text = a.Nationality;
         eventTextBox.Text = a.Event;
         sourceTextBox.Text = a.Source;
         typeTextBox.Text = a.Type;
         ServingsTextBox.Text = a.Servings;
    }
    foreach (var b in newrecipe)
    {
        userRatingTextBox.Text = Convert.ToString(b.UserRating);
        familyRatingTextBox.Text = Convert.ToString(b.FamilyRating);
        healthRatingTextBox.Text = Convert.ToString(b.HealthRating);
        easeOfCookingTextBox.Text = Convert.ToString(b.CookingTime);
        cookingTimeTextBox.Text = Convert.ToString(b.CookingTime);
    }
    foreach (var c in newrecipe)
    {
        ingredientComboBox.Items.Add(c.RecipeIngredient);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T23:04:35.117

您可能缺少`InitializeComponent`Form3 构造函数中的 。

# web - PayPal 网站服务付款

> ID：13002963
> 
> 赞同：0
> 
> 时间：2012-10-21T22:46:55.757
> 
> 标签：web, paypal, payment

我正在尝试在我的网站上设置 PayPal 的网站支付系统，我在该网站上销售没有运费的服务！

我想指定 PayPal Checkout 为我发送付款，而不是为 Good，而是为 Services，所以我不会被约束运送实物！

我现在的代码：（现在是沙箱）

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="lc" value="en">
<input type="hidden" name="page_style" value="primary">
<input type="hidden" name="business" value="pp_1350857585_biz@zgmail.us">
<!-- <input type="hidden" name="notify_url" value=""> -->
<input type="hidden" name="item_name" value="TEST">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="amount" value="100">
<input type="hidden" name="no_note" value="0">
<input type="hidden" name="no_shipping" value="1">
<!-- <input type="hidden" name="return" value=""> -->
<!-- <input type="hidden" name="cancel_return" value=""> -->
<!-- <input type="hidden" name="custom" value=""> -->
<input type="image" style="width: 144px;" src="https://www.paypalobjects.com/en_US/i/btn/btn_paynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1"> 
```

我应该改变什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:11:18.187

您需要添加此设置 `L_PAYMENTREQUEST_n_ITEMCATEGORYm`

来自贝宝文档：

> 指示项目是数字的还是物理的。对于数字商品，此字段为必填项且必须设置为数字。您最多可以指定 10 次付款，其中 n 是 0 到 9 之间的数字，包括 0 和 9，m 指定付款中的列表项；数字商品除外，它只支持单笔支付。这些参数必须从 0 开始按顺序排列（例如 L_PAYMENTREQUEST_n_ITEMCATEGORY0、L_PAYMENTREQUEST_n_ITEMCATEGORY1）。它是以下值之一：

数字物理 此字段从 65.1 版开始可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-28T08:30:08.830

根据 PayPal，**无法**在 PayPal 网站标准 API 中将项目标记为服务（或数字）。正如斯科特上面提到的，这在 Paypal Express Checkout 中是可能的。

以下是 PayPal 代表对此事的评论：

> 不幸的是，PayPal 网站标准版不支持数字商品。您必须使用 Express Checkout 才能使用 L_PAYMENTREQUEST_n_ITEMCATEGORY='Digital' 将其设置为数字商品。

# python - Python中的类变量[set()]

> ID：13002966
> 
> 赞同：0
> 
> 时间：2012-10-21T22:47:38.520
> 
> 标签：python

为什么 set 的行为与 python 中类变量的字典不同。例如，

```
class Test1:
   x=set()
   y={}

hamster=Test1()
chinchilla=Test1()
hamster.x.add('hi')  # now both sets in both instances have 'hi'
hamster.y['key']=5   # only the hamster instance will contain 5 
```

谢谢你的帮助 ：）

编辑：我还注意到，如果你在**init** () 中定义 self.x=set()，你可以避免添加到两个实例的问题。**删除了错别字**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T22:56:03.590

不，你错了，两者都有`key:5`：

```
In [56]: class Test1:
   ....:        x=set()
   ....:    y={}
   ....: 

In [57]: hamster=Test1()

In [58]: chinchilla=Test1()

In [59]: hamster.x.add('hi')  # now both sets in both instances have 'hi'

In [60]: hamster.y['key']=5

In [62]: hamster.x,chinchilla.x
Out[62]: (set(['hi']), set(['hi']))

In [63]: hamster.y,chinchilla.y
Out[63]: ({'key': 5}, {'key': 5}) 
```

实际上，在您的代码中，您不是在更改实例变量，而是在更改类变量：

```
In [65]: Test1.x
Out[65]: set(['hi'])

In [66]: Test1.y
Out[66]: {'key': 5} 
```

你需要在这里使用实例变量：

```
In [71]: class Test1():
    def __init__(self):
        self.x=set()
        self.y={}
   ....:         
   ....:         

In [75]: hamster=Test1()

In [76]: chinchilla=Test1()

In [77]: hamster.x.add('hi')

In [78]: chinchilla.x.add('bye')

In [79]: hamster.x
Out[79]: set(['hi'])

In [81]: chinchilla.x
Out[81]: set(['bye'])

In [82]: hamster.y['key']=5

In [83]: hamster.y,chinchilla.y
Out[83]: ({'key': 5}, {}) 
```

# python - 在基于文本的 rpg 中基于玩家统计的敌人统计的问题

> ID：13002967
> 
> 赞同：1
> 
> 时间：2012-10-21T22:47:42.483
> 
> 标签：python, python-2.7, text-based

所以我正在制作一个基于文本的 rpg，我想出了一个奇怪的语法错误，我似乎无法在线修复：

```
max_hp = randint((player.level * 0.75) * 50, player.level * 50) 
```

在类敌人。任何帮助将不胜感激 ：）。

```
from random import randint
import math

class Character(object):

    def __init__(self,hp,max_hp,strength,level,exp):
            self.level = level
            self.exp = exp
            self.hp = hp
            self.max_hp = max_hp
            self.strength = strength

class Player(Character):

    def __init__(self):
            exp = 0
            level = 1
            max_hp = 100
            hp = max_hp
            strength = level * 0.5 
            print max_hp, hp, strength

    def Level(level, current_exp):
            if current_exp >= level * 100:
                    level += 1
            else:
                    pass

class Enemy(Character):

    def __init__(self):
            player = Player()
            level = randint(player.level, math.ciel((player.level * .75) + 1)
            max_hp = randint((player.level * 0.75) * 50, player.level * 50)
            hp = max_hp
            strength = randint(player.level + 1, player.level + 3)
            print max_hp, strength

player = Player()
enemy = Enemy() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T23:03:11.773

您在上面的行中缺少右括号

# php - php 睡眠功能，在原始睡眠完成之前，没有其他对网络服务器的调用起作用？如何绕过

> ID：13002972
> 
> 赞同：0
> 
> 时间：2012-10-21T22:48:47.210
> 
> 标签：php, multithreading, web, sleep

我有一个远程服务器调用的 api，用于在我们的本地服务器上执行一系列功能，即添加新用户/帐户。

在这个脚本中，有一个“sleep(180)”设置为等待 3 分钟，然后通过电子邮件将响应发送到远程服务器。

延迟是必需的，但是我们发现在第一个对服务器的请求之后的任何请求似乎都没有得到处理，就好像“睡眠（180）”正在停止对服务器的其他调用。

它不能基于连接工作吗？所以每个连接都应该只受到影响，而不是对那个 api.php 的*每个远程调用？*

我已经研究但没有找到上述行为的答案，我猜如果是这种情况，唯一的解决方案是记录传入的新帐户请求并将它们放入 mysql 的“调度程序”数据库表中。也许有一个每 1-2 分钟运行一次的 cron 并检查新记录，然后发出响应。这样就不会停止其他呼叫。

我真的很感谢您对此事的任何意见，因为我似乎找不到任何可以证明/反驳正在发生的事情的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:20:26.847

根据“Lawrence Cherone”的评论，最好的方法是设置一个调度程序/队列系统，并让 cron 或其他进程通过它工作。

# php - PHP权限错误 - 我需要执行权限？

> ID：13002973
> 
> 赞同：2
> 
> 时间：2012-10-21T22:48:52.117
> 
> 标签：php, linux, upload, chmod

我为文件上传和测试编写了一个 PHP 脚本，我给了我的上传目录 777 权限。该脚本工作正常。

现在，出于明显的原因，我想删除执行权限，但是一旦这样做，就会出现以下错误：

move_uploaded_file([filepath]) [function.move-uploaded-file]：打开流失败：权限被拒绝

当我尝试上传文件时，只需将权限从 777 降低到 776 就会导致出现此错误。我不明白为什么拥有执行权限应该与此有关 - 有人可以解释一下吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T22:52:52.840

目录必须具有执行权限才能在 Unix 和 Linux 中访问。

[从这里](http://www.tuxfiles.org/linuxhelp/filepermissions.html)引用：

> 在目录上，执行权限（也称为“搜索位”）允许您访问目录中的文件并将其输入，例如使用 cd 命令。但是，请注意，尽管执行位允许您进入目录，但您不能列出其内容，除非您还具有对该目录的读取权限。

我同意 lserni 的观点，即撤销 O（第三位数字）对目录的执行权限会导致问题，因为这表明 Web 服务器既不是作为所有者也不是作为组成员访问目录。你应该解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:02:22.223

> 只是将权限从 777 降低到 776 会导致出现此错误

这不应该发生。您应该能够以 770 权限运行，即该目录应该由网站用户 ID 拥有，并具有 web 服务器组。

这样，所有者和网络服务器都能够操纵目录和数据。理想情况下，为您的网站提供服务的 Web 服务器应该假定与网站所有者相同的用户 ID，这样您就可以保持目录模式 700 并使其只能由您读写和列出。

如果权限的最后一位数字对您不利，则意味着服务器正在以“每个人”的权限运行，这对于开发站点可能没问题，但在共享站点上不太好（想象您的密码可以通过以下方式读取）机器中的任何其他网站所有者）。

但是，如果您在测试机器上运行，则 777 权限是可以的。目录可执行位并不意味着可执行（无论如何都不能执行目录），而仅仅是“可列出的”。没有那个位，您可以创建和删除文件，但您无法知道它们是否真的存在，并且`move_uploaded_files`反对这种情况。

还有其他解决方案（例如[chrooting Apache 中的每个虚拟主机](http://www.php.net/manual/en/security.apache.php#24152)）；另请参阅[Apache 可写目录权限的最佳实践是什么？](https://stackoverflow.com/questions/635363/what-are-best-practices-for-permissions-on-apache-writable-directories)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T16:27:18.683

要删除执行权限，您需要执行以下命令..

```
chown -R nobody upload_directory
chmod -R 755 upload_directory 
```

第一个命令将您的upload_directory 及其下文件的所有者更改为“nobody”，这是php 在其下运行的。第二个更改 upload_directory 和 files 以仅允许用户访问写入。`-R`用于递归..

# regex - 删除所有没有@textmate 正则表达式的行

> ID：13002974
> 
> 赞同：0
> 
> 时间：2012-10-21T22:49:08.607
> 
> 标签：regex, textmate

我有一个巨大的文件，我需要过滤掉所有不包含电子邮件地址的行（逗号分隔文件）（由 @ 字符确定）。

现在我所拥有的是找到所有包含@符号的行：

```
.*,.*,.*@.*,.*$ 
```

基本上你有 4 个值，第三个值有电子邮件地址。

替换为：值将为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T06:35:53.537

在 TextMate 中，您有大约 10 种不同的方法来执行此操作，甚至可以通过命令行执行此操作。这里有一些更简单的方法......

**来自 TextMate：**

1.  Command-control-t，开始输入命令的某些部分“将不匹配的行复制到新文档中”，使用@（没有别的）作为模式。
2.  与上面相同，除了您要查找的命令是“Distill Document / Selection”
3.  查找并选择 @ 符号。然后执行与上述相同的操作，但搜索命令“带状线匹配选择/剪贴板”。你可能没有它，因为我可能自己开发了这个。

**从命令行：**

键入以下命令之一，将 FILE 替换为文件名，包括文件路径（如果它不在当前工作目录中）。过滤后的内容可以在 FILE-new 中找到。

1.  *使用 egrep：* `egrep -v '@' FILE > FILE-new`
2.  *使用 sed：* `cat FILE | sed -e "/@/D" > FILE-new`

对于以上两种情况，使用`diff`来查看您完成了什么：`diff FILE{,-new}`

应该可以吧，我猜...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T23:04:43.093

尝试`^[^@]*$`用任何东西替换。或者，`grep`使用您的正则表达式的文件并将结果重定向到一个新文件中。

# javascript - Firefox 和 chrome 上的画布弧渲染差异

> ID：13002976
> 
> 赞同：1
> 
> 时间：2012-10-21T22:49:25.147
> 
> 标签：javascript, html, firefox, canvas, cross-browser

我正在尝试沿着矩形的四个边绘制一个由小圆圈组成的矩形。这是我的代码：

```
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");

var x = 0;
var y = 0;
var w = 200;
var h = 100;

ctx.beginPath();
ctx.fillStyle = "#000000";

// top and bottom
for(var i = x, len = x+w ; i < len ; i = i+4) {
ctx.arc(i, y, 0.5, 0, 2 * Math.PI, false);
ctx.arc(i, y+h, 0.5, 0, 2 * Math.PI, false);
}

// right and left
for(var i = y, len = y+h ; i < len ; i = i+4) {
ctx.arc(x, i, 0.5, 0, 2 * Math.PI, false);
ctx.arc(x+w, i, 0.5, 0, 2 * Math.PI, false);
}   

ctx.fill(); 
```

尽管此代码在 Chrome 上可以正常工作，但 Firefox 16.0.1 上的渲染是错误的（或不同的）。我注意到当我在每个 arc 方法之前和之后添加 beginPath 和 stroke 时，代码可以在 Firefox 上正常工作。

PS：问题似乎发生在填充上，而不是描边。所以我在示例代码中对其进行了更改。这是示例的链接：http: [//jsfiddle.net/GACsh/](http://jsfiddle.net/GACsh/)

我在这里想念什么？任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:07:08.113

此代码在此处的 Firefox 和 Chrome 上看起来相同。

[http://jsfiddle.net/X7GYg/](http://jsfiddle.net/X7GYg/)

`"#000000CC"`不是有效的填充样式，它不是有效的十六进制 RGB 值。如果您需要 alpha，则需要使用`"rgba(0,0,0,150)"`等。

# javascript - 如何从矩形点计算旋转角度？

> ID：13002979
> 
> 赞同：26
> 
> 时间：2012-10-21T22:49:35.323
> 
> 标签：javascript, math, css, geometry

我有 4 个点`1`, `2`, `3`,`4`闭合一个矩形。

这些点按以下方式排列在数组中：`x1` `y1` `x2` `y2` `x3` `y3` `x4` `y4`

我遇到的问题是矩形可以旋转一个角度。

如何计算原始点（灰色轮廓）和角度？

![在此处输入图像描述](../Images/8b4bb51566a685fc4b4540fa72c51109.png)

我试图在 javascript+css3-transform 中重现这种效果，所以我需要先知道直线尺寸，然后用 css 旋转。

我只是通过比较点来知道矩形是否是直的，例如`y1==y2`

```
if(x1==x4 && x2==x3 && y1==y2 && y4==y3){

    rectangle.style.top = y1;
    rectangle.style.left = x1;
    rectangle.style.width = x2-x1;
    rectangle.style.height = y4-y1;
    rectangle.style.transform = "rotate(?deg)";

} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-22T01:01:10.953

您可以使用同一侧的任何坐标对来计算旋转角度。请注意，数学角度通常假设 +ve X 轴长度为 0，并通过逆时针旋转增加（因此沿 +ve Y 轴为 90°，-ve X 轴为 180°，依此类推）。

此外，javascript 三角函数以弧度返回值，在用于 CSS 转换之前必须将其转换为度数。

如果形状不旋转超过 90°，那么生活相当简单，您可以使用直角三角形的切线比：

```
tan(angle) = length of opposite side / length of adjacent side 
```

对于 OP，最好使用的角是 1 和 4，以便将旋转保持在第一象限和顺时针方向（根据[CSS3 规范草案](http://www.w3.org/TR/css3-transforms/#two-d-transform-functions)）。用javascript术语：

```
var rotationRadians = Math.atan((x1 - x4) / (y1 - y4)); 
```

要转换为度数：

```
var RAD2DEG = 180 / Math.PI;
var rotationDegrees = rotationRadians * RAD2DEG; 
```

如果旋转超过 90°，则需要调整角度。例如，如果角度大于 90° 但小于 180°，您将从上面得到 -ve 结果并需要添加 180°：

```
 rotationDegrees += 180; 
```

此外，如果您使用页面尺寸，y 坐标沿页面向下增加，这与正常的数学意义相反，因此您需要反转`y1 - y4`上面的意义。

### 编辑

基于 OP 中点的方向，以下是返回矩形中心和顺时针旋转度数的通用函数。这就是您所需要的，但如果您愿意，您可以自己旋转角落以使其“水平”。您可以应用三角函数来计算新角或只做一些平均值（类似于 Ian 的回答）。

```
/** General case solution for a rectangle
 *
 *  Given coordinages of [x1, y1, x2, y2, x3, y3, x4, y4]
 *  where the corners are:
 *            top left    : x1, y1
 *            top right   : x2, y2
 *            bottom right: x3, y3
 *            bottom left : x4, y4
 *
 *  The centre is the average top left and bottom right coords:
 *  center: (x1 + x3) / 2 and (y1 + y3) / 2
 *
 *  Clockwise rotation: Math.atan((x1 - x4)/(y1 - y4)) with
 *  adjustment for the quadrant the angle is in.
 *
 *  Note that if using page coordinates, y is +ve down the page which
 *  is the reverse of the mathematic sense so y page coordinages
 *  should be multiplied by -1 before being given to the function.
 *  (e.g. a page y of 400 should be -400).
 *
 * @see https://stackoverflow.com/a/13003782/938822
 */
function getRotation(coords) {
    // Get center as average of top left and bottom right
    var center = [(coords[0] + coords[4]) / 2,
                  (coords[1] + coords[5]) / 2];

    // Get differences top left minus bottom left
    var diffs = [coords[0] - coords[6], coords[1] - coords[7]];

    // Get rotation in degrees
    var rotation = Math.atan(diffs[0]/diffs[1]) * 180 / Math.PI;

    // Adjust for 2nd & 3rd quadrants, i.e. diff y is -ve.
    if (diffs[1] < 0) {
        rotation += 180;

    // Adjust for 4th quadrant
    // i.e. diff x is -ve, diff y is +ve
    } else if (diffs[0] < 0) {
        rotation += 360;
    }
    // return array of [[centerX, centerY], rotation];
    return [center, rotation];
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-21T23:04:31.217

矩形的中心正好在两个对角之间：

```
cx = (x1 + x3) / 2
cy = (y1 + y3) / 2 
```

矩形的大小是两点之间的距离：

```
w = sqrt(pow(x2-x1, 2) + pow(y2-y1, 2))
h = sqrt(pow(x3-x2, 2) + pow(y3-y2, 2)) 
```

灰色矩形的角可以通过中心和大小来计算，例如左上角：

```
x = cx - w / 2
y = cy - h / 2 
```

角是正方形边的反正切：

```
a = arctan2(y4 - y1, x4 - x1) 
```

（我不确定它返回的确切角度，或者你期望的角度，所以你可以测试一下。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-21T22:56:47.820

这是从粉红色线交叉点开始获得垂直粉红色线和黑线之间角度的方法：

```
var deg = 90 - Math.arctan((x2-x1) / (y2-y1)); 
```

可以借助毕达哥拉斯定理计算尺寸：

```
var width = Math.sqrt((x2-x1)^2 / (y2-y1)^2));
var height = Math.sqrt((x1-x4)^2) / (y4-y1)^2)); 
```

位置坐标（左和上）分别是 x1 和 x3 以及 y1 和 y3 的平均值。

```
var left = Math.floor((x1 + x3) / 2);
var top = Math.floor((y1 + y3) / 2); 
```

您想使用负边距技巧。

```
var marginLeft = -Math.ceil(width / 2);
var marginTop = -Math.ceil(height / 2); 
```

# actionscript-3 - 碰撞检查

> ID：13002980
> 
> 赞同：-1
> 
> 时间：2012-10-21T22:49:38.970
> 
> 标签：actionscript-3

我正在尝试测试向量中的子弹与另一个向量中的敌人之间的碰撞。我可以很好地访问数据，但问题在于碰撞的实际检测。有趣的是，当我使用 hitTestObject 时它工作得很好，所以我不明白为什么这不应该工作。我可能会忽略某些东西，但我很难找到它。

代码：

```
for each(var i in eManager.enemyArray)
{
    for each(var j in gManager.gunVector)
    {
        for each (var k in j.bManager.bulletVector)
        {

            // Basically using Pythagorean's theorem but with both sides squared
            // to minimize any process-heavy operations
            if(((i.x - k.x)*(i.x - k.x))+((i.y - k.y)*(i.y - k.y)) <= 4)
            { 
                // Note that when this happens, the enemy dies
                i.kill = true;
            }       

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T00:28:16.520

哎呀。原来我正在测试 2 个点之间的碰撞，而不是一个点和一个形状之间的碰撞。我的错。

# php - Doctrine2 获取每条记录的 5 个副本

> ID：13002981
> 
> 赞同：1
> 
> 时间：2012-10-21T22:49:42.933
> 
> 标签：php, doctrine-orm

我有一个非常基本的表，只有几列。它`15 records`在里面。

现在，如果我使用这个`query`：

```
SELECT * FROM excursions WHERE lang_id = 1 
```

**它按我的预期**返回`5`记录。

 **但是，当我使用教义2时，它会创建一个这样的查询：

```
SELECT
e0_.idx AS idx0,
e0_.place_id AS place_id1,
e0_.lang_id AS lang_id2,
e0_.excursion_name AS excursion_name3,
e0_.excursion_type AS excursion_type4,
e0_.excursion_text_short AS excursion_text_short5,
e0_.start_date AS start_date6,
e0_.end_date AS end_date7,
e0_.override_place AS override_place8,
e0_.languages AS languages9,
e0_.meeting_place AS meeting_place10,
e0_.excursion_text AS excursion_text11,
e0_.starts_at AS starts_at12,
e0_.category_id AS category_id13,
e0_.map_link AS map_link14,
e0_.capacity AS capacity15,
e0_.pick_up_time AS pick_up_time16,
e0_.is_activity AS is_activity17
FROM excursions e1_, excursions e0_
WHERE e0_.lang_id = 1 
```

现在，当我执行此操作时，它会返回`25 records`！`5 copy for each record`. 它们完全相同，但不是`5`返回`25`记录。（**5x5**）

哦，是的，如果我将其删除，`excursions e1_`则总共返回 5 条记录。但为什么？

谁能看看那个查询，我在这里错过了什么吗？

我用过`QueryBuilder()`。

```
$qb = $this->getRepository()->createQueryBuilder('Excursions');
$qb->select('e')->from('Web\Bundle\ExcursionBundle\Entity\Excursions', 'e');
$qb->andWhere("e.langId = 1"); 
```

**注意**：我做了其他样式有或没有`QueryBuilder()`。结果总是一样的。PHP 得到`1`了每个的副本。我在服务器端执行的查询获取`5`每条记录的副本。

我问这个是因为，如果学说多次获得，如果我像`500`记录一样获取整个表格怎么办？它可能会抓住`500x5`. **不会减慢进程吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:45:16.577

不需要线。正确的代码是：

```
$qb = $this->getRepository()->createQueryBuilder('e');
$qb->andWhere("e.langId = 1"); 
```

您在代码中所做的是将“ `from`”部分添加两次。一旦你执行“ `createQueryBuilder`”方法时由 Doctrine 完成（它添加“ `select`”和“ `from`”本身）。`Excursions`您传递了从未使用过的别名“ ”。然后添加第二个“ `from`”，别名为“ `e`”。**

# eclipse - 如何在 Eclipse 中关闭 Tab 和 New Line 标记？

> ID：13002983
> 
> 赞同：6
> 
> 时间：2012-10-21T22:50:07.620
> 
> 标签：eclipse, aptana, coldfusionbuilder

我正在使用 Adob​​e 的 ColdFusion Builder，这是一个构建在 Aptana 之上的基于 Eclipse 的 IDE。

突然之间，我的 Eclipse 编辑器中出现了一种空白标记。我一定是不小心按了一个组合键。

这是一个屏幕转储。

![我看到的标记的屏幕转储](../Images/0f73c1d9f1b0573c105d80d2dad29023.png)

我已经尝试过“常规 > 编辑器 > 文本编辑器 > 显示空白字符”，但不是这个。 **我已经关闭了显示空白字符**。如果我打开它，那么空白字符会显示在我已经看到的内容的顶部。

![在此处输入图像描述](../Images/c80f6c83176c650bc965afd449e181d3.png)

谁能告诉我如何关闭它？最烦人。

非常感谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-21T22:56:07.583

它位于首选项 -> 常规 -> 编辑器 -> 文本编辑器下

只需取消选中“显示空白字符”：

![在此处输入图像描述](../Images/118dd6d56821830b4b4ac516a8bb00b2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T23:49:55.890

您是否尝试过重新启动 Eclipse？如果这不起作用，您可以试试这个[http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka11640.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka11640.html)它解释了要删除哪个文件以强制 Eclipse恢复为使用默认设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-23T15:34:37.983

我已经通过不小心敲击了一些键来完成了几次。

如果您转到 Windows/Preferences/General/Keys，您将看到您拥有的所有键盘快捷键。

我的设置为 Control + 。（顺便说一句）我不得不将光标放在文档中并执行几次以使其工作，因为还有一个键盘快捷键 Control +

在 Mac 上是 Cmd +。

希望有帮助。

# tomcat - 为maven添加一个jar到码头插件

> ID：13002995
> 
> 赞同：6
> 
> 时间：2012-10-21T22:52:36.240
> 
> 标签：tomcat, maven, embedded-jetty, maven-jetty-plugin

我曾经在本地 tomcat 服务器上部署我的 WAR，并且在`lib`tomcat 的文件夹中有一个 jackson-core.jar。现在，我已经切换到 maven 并且正在使用 jetty 插件。

一切正常，除了`406 error - The server responded with 406 error (Not acceptable)`我知道错误即将到来，因为应用程序服务器（jetty）中没有jackson-core.jar。

**问题：**

如何像我为独立的 tomcat 服务器所做的那样在嵌入式码头的 lib 文件夹中放置一个 jar。这可能吗？

我尝试了以下方法：

```
<configuration>
  <scanIntervalSeconds>5</scanIntervalSeconds>
  <webAppConfig>
  <contextPath>/myapp</contextPath>
  <extraClasspath>/Users/myuser/Downloads/jackson-core-2.1.0.jar</extraClasspath>
  </webAppConfig> 
</configuration> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-22T08:36:25.323

`<dependencies>`您可以通过在插件定义中添加一个部分来修改插件的类路径（而不是项目的类路径） 。例如

```
<project>
  ...
  <build>
    ...
    <plugins>
      ...
      <plugin>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty-maven-plugin</artifactId>
        <version>8.0.4.v20111024</version><!-- or whatever version you specified -->
        <configuration>
          ...
        </configuration>
        ...
        <dependencies>
          <dependency>
            <groupId>com.fasterxml.jackson.core</groupId>
            <artifactId>jackson-core</artifactId>
            <version>2.1.0</version>
          </dependency>
        </dependencies>
        ...
      </plugin>
      ...
    </plugins>
    ...
  </build>
  ...
</project> 
```

现在您可能使用的是较旧版本的 Jackson，甚至是较旧的 API（它存在于不同的 GroupId:ArtifactId 中，因为它破坏了向后兼容性），因此您需要进行自己的研究以确保您选择了正确的 API。

`<plugin>`大多数更高级的插件都使用添加作用域依赖项的一般原则。有一个或两个小问题，即您要覆盖插件本身的依赖项，即您添加的依赖项的 groupId:artifactId 与插件 pom 中声明的依赖项的 groupId:artifactId 匹配，您的条目将采用谨慎，如果您将版本拉低，您可能会破坏插件......但码头和杰克逊的情况并非如此。

jetty 的另一个特殊问题是，当您引入 slf4j-api 依赖项时，jetty 将尝试使用它进行日志记录，并且考虑到 slf4j API 的一小部分区域中的一些破坏性 API 更改（特别是与编写日志适配器有关 -哪个码头做）如果您不使用属于您正在使用的码头版本旨在使用的 slf4j 版本的 slf4j-_jar*套件，您可能会遇到问题。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T01:20:06.523

只需将依赖项添加到`<dependencies/>`插件的部分。那应该这样做。

# asp.net-mvc-3 - 自定义客户端模板 Telerik Grid

> ID：13002997
> 
> 赞同：0
> 
> 时间：2012-10-21T22:52:54.070
> 
> 标签：asp.net-mvc-3, razor, telerik, telerik-grid

我是使用 Telerik Grid 的新手，基本上我在这里想要完成的是以下场景，我有一个包含一些字段的表单，并通过 ajax 在我的控制器上调用另一个操作以将模型生成为部分视图有以下网格，我的问题是我需要根据一些业务逻辑创建一些操作，我知道我可以使用列模板来做到这一点，问题是因为我使用 ajax 绑定它“松散”我的模板，环顾四周在互联网上，我发现你可以使用 js 函数生成链接，我的问题是不是那种混乱吗？我在服务器和客户端上复制相同的业务逻辑，必须有更好的方法来完成这个吗？

```
 Html.Telerik().Grid(Model)
      .Name("Grid")
      .DataBinding(binding => binding.Ajax().OperationMode(GridOperationMode.Client))
      .Columns(column =>
      {
          column.Bound(c => c.Id).Title("Id").Width(30);
          column.Bound(c => c.Status);
          column.Bound(c => c.DateReg);
          column.Template(
              @<text>
                   <div class="ActionsProvGrid">
                       <a href="@Url.Action("SomeAction", "Controller", new {id = item.id})">
                           <img src="../../Content/icons/ViewMore.png" alt="ViewMore" />
                       </a>
                       @if (@item.Status.Equals("ACT"))
                       {
                           <a href="@Url.Action("SomeOtherAction", "Controller", new {idOportunidad = item.id})">
                               <img src="../../Content/icons/invoice.png" alt="invoice"/>
                           </a>
                       }

                   </div>                                                      
               </text>
              ).ClientTemplate("<#= GenearteIcons(data)  #>");
      })
    .Sortable() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:28:15.140

作为一种解决方案，您可以在模型上定义封装业务逻辑结果的属性：

```
public bool DoesStatusEqualToAct {
  get
  {
    return (code that determines if it's true);
  }
} 
```

在生成链接 html 的 JavaScript 函数中，您可以访问此属性：

```
function GenerateIcons(data){
    var html = '';
    if(data.DoesStatusEqualToAct){
       html = 'version 1';
    }
    else{
       html = 'version 2';
    }
   return html;
} 
```