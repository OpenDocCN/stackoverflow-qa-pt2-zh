# StackOverflow 问答 12576000-12576999

# php - CodeIgniter 查询结果返回数组为 $user['0']->name。我怎样才能将其作为 $user->name 获取？

> ID：12576005
> 
> 赞同：1
> 
> 时间：2012-09-25T03:59:09.333
> 
> 标签：php, codeigniter

模型功能

```
public function getUserByID($id) 
    {
        $q = $this->db->get_where('users', array('id' => $id), 1);
        $user= $q->result();
        if($user) {
        return $user;
        } else {
        return false;
        }
    } 
```

控制器代码

```
$data['user'] = $this->users_model->getUserByID($id); 
```

查看文件代码

```
<pre><?php print_r($user); ?></pre>

Array
(
    [0] => stdClass Object
        (
            [id] => 1
            [name] => Saleem
            [city] => Kuala Lumput
            [state] => WP
            [postal_code] => 58100
            [country] => Malaysia
            [phone] => 0123456789

        )
) 
```

我怎样才能得到如下结果。

```
Array
(
            [id] => 1
            [name] => Saleem
            [city] => Kuala Lumput
            [state] => WP
            [postal_code] => 58100
            [country] => Malaysia
            [phone] => 0123456789
) 
```

现在我需要将它用作 $user['0']->name; 我想将其用作 $user->name; 请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:01:34.683

尝试

```
$data['user'][0] = $this->users_model->getUserByID($id); 
```

您可以直接从控制器本身获取

或从模型中您可以通过

```
public function getUserByID($id) 
{
    $q = $this->db->get_where('users', array('id' => $id), 1);
    $user= $q->result();
    if(count($user) == 1) {
    return $user[0];
    } else {
    return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T05:02:47.880

在 CI 中执行此操作的正确方法是使用以下`$result->row()`方法：

```
public function getUserByID($id) 
{ 
  $q = $this->db->get_where('users', array('id' => $id), 1); 
  if( $q->num_rows() > 0 )
  {
    return $q->row();
  }

  return FALSE;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T04:01:08.570

让函数`getUserByID`返回第一个用户

它应该解决问题

```
 public function getUserByID($id) 
    {
        $q = $this->db->get_where('users', array('id' => $id), 1);
        $user= $q->result();
        if(count($user) == 1) {
        return $user[0];
        } else {
        return false;
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T04:20:43.993

**控制器**：

```
$data['user'] = $this->users_model->getUserByID($id);
foreach($data['user'] as $user)
{
$result = $user;
}
print_r($result); 
```

会给你

```
Array
(
        [id] => 1
        [name] => Saleem
        [city] => Kuala Lumput
        [state] => WP
        [postal_code] => 58100
        [country] => Malaysia
        [phone] => 0123456789
 ) 
```

**编辑：**

或者您可以在模型中执行此操作

```
public function getUserByID($id) 
{
    $q = $this->db->get_where('users', array('id' => $id), 1);
    $user= $q->result();
    if(count($user) > 0) 
    {
      foreach($user as $out)
      {
       $blah = $out;
      }
    return $blah;
    } 
    else
    {
    return false;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T15:40:02.473

修改你的模型函数，让它像这样

```
public function getUserByID($id) 
{
    $q = $this->db->get_where('users', array('id' => $id), 1);
    $user= $q->result_array();
    if($user) {
    return $user;
    } else {
    return false;
    }
} 
```

# c++ - 如何在 gtest 中的 ASSERT_TRUE 之后释放内存

> ID：12576006
> 
> 赞同：3
> 
> 时间：2012-09-25T03:59:33.863
> 
> 标签：c++, googletest

我有用例场景。

```
List* pList = new List();    
for (...)
{

 Integer* pInt = new Integer();
 ASSERT_TRUE(pInt != NULL);
 pList->Add(*pInt);

} 
```

现在，`pInt`在任何迭代中都应该为空，然后这个测试用例将停止并且`pList`不会被释放。

`pList`执行时有什么方法可以释放`ASSERT_TRUE`吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T21:24:31.167

> 现在，`pInt`在任何迭代中都应该为空，然后这个测试用例将停止并且`pList`不会被释放。

假设您没有覆盖`new`运算符（如果您这样做了，您可能不会问这个问题），并且假设您的编译器没有错误，`pInt`则永远不会为空。失败时，`new`抛出`std::bad_alloc`异常，它不返回 null。

此外，断言适用于无论如何都*应该始终成立*的事物（就像这种情况一样）。断言失败是*一个错误*。在断言失败后添加代码进行清理是没有意义的：只需修复错误即可。

现在释放......提供的示例代码可以[忘记`new`并使用自动对象](https://stackoverflow.com/questions/8839943/why-does-the-use-of-new-cause-memory-leaks/8840302#8840302)：

```
List pList;
for (...)
{

 Integer pInt = Integer();
 pList.Add(pInt);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:49:39.723

如果你可以使用 lambdas，你可以这样做：

```
ASSERT_TRUE(pInt != nullptr)
    << [pList]()->std::string { delete pList; return "Your error message."; }(); 
```

仅当断言失败时才会执行 lambda。

但是，最好的选择可能是使用`std::unique_ptr`或类似的智能指针而不是原始指针，并完全避免担心。

# iphone - 如何在返回值之前通过插件打开ios原生控制器？

> ID：12576007
> 
> 赞同：1
> 
> 时间：2012-09-25T03:59:35.377
> 
> 标签：iphone, cordova

我通过使用为 iPhone 创建了一个插件类，`phonegap` 当插件从电话间隙接收消息时，我想添加一个本机视图控制器

```
[self.viewController show:json]; 
```

MainViewController 中的功能显示：

```
-(void)show:(NSDictionary*)options{
    NSLog(@"show");
    [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:YES];
    [self.view addSubview:cView];
} 
```

但是问题是屏幕只显示“show”却没有出现`[self writeJavascript:javaScript]`Subview，回到phonegap window.plugins后才显示。收到成功消息。

我的问题是如何在子视图结束后将消息返回到 phonegap。

我能怎么做？

# objective-c - Objective C中的`add target`和`implements a delegate`有什么区别？

> ID：12576011
> 
> 赞同：0
> 
> 时间：2012-09-25T04:00:35.797
> 
> 标签：objective-c, ios

比如我做了一个`MyUIElement`，我可以接受用户点击它。当用户单击它时，用户可以在我单击它时为我定义一个方法。例如，当我单击它时，它们可以将计数增加 1。

所以，如果我正在考虑如何实现这个逻辑......我可以制作一个`MyUIElementDelegate`，并回调`MyUIElementDelegate`的`onMyUIElementIsClicked:`函数，或者我可以允许用户`addTarget: action: forEvents:`. 这两种方式也有效。但是他们之间有什么不同呢？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:13:49.857

好吧，如果要调用的方法在同一个类上，那么**addTarget**会更容易，但如果该方法是在另一个类中定义的，那么**实现委托**将是调用该方法的更好主意。通过一些额外的编码，委托协议将为您提供更大的灵活性，因为它有两种类型的方法：@required 和 @optional。

# php - 如何在不获取所有数据的情况下获取当前添加到表中

> ID：12576017
> 
> 赞同：1
> 
> 时间：2012-09-25T04:01:41.223
> 
> 标签：php, jquery, ajax

伙计们，我正在尝试制作一个简单的评论系统，当我单击提交时，字段将自动保存在数据库中，然后使用 ajax 获取它。但是我重复获取所有数据而不是获取数据库中最近添加的数据，这里是代码：

```
 <div id="wrap-body">    
  <form action="" method="post">
  <input type="text" name="username" id="username">
  <input type="text" name="msg" id="msg">
  <input type="button" id="submit" value="Send">
 </form>
 <div id="info">
 </div>
 </div> 
<script>
 $(document).ready(function (){
$('#submit').click(function (){
 var username = $('#username').val();
  var msg = $('#msg').val();
  if(username != "" && msg != ""){
       $.ajax({
                  type: 'POST',
                  url: 'get.php',
                  dataType: 'json',
                  data:{ 'username' : username , 'msg' : msg},
                  success: function (data){
                    var ilan=data[0].counter;
                    var i = 0;
                      for(i=0;i<=ilan;i++){
                       $('#info').append("<p> you are:"+data[i].username+"</p> <p> your message  is:"+data[i].mesg);
                     }
                  }
              });
     }
     else{
      alert("some fields are required");
     }
 });
});
</script> 
```

PHP：

```
 <?php
   $host='localhost';
   $username='root';
   $password='12345';
   $db = 'feeds';

    $connect = mysql_connect($host,$username,$password) or die("cant connect");
    mysql_select_db($db) or die("cant select the".$db);

    $username = $_POST['username'];
    $msg = $_POST['msg'];

    $insert = "INSERT INTO info(user_name,message) VALUES('$username','$msg')";
    if(@!mysql_query($insert)){
      die('error insertion'.mysql_error());
  }
    $get = "SELECT * FROM info ";
    $result=mysql_query($get)or die(mysql_error()); 
    $inside_counter =   mysql_num_rows($result);
    $data=array();
    while ($row = mysql_fetch_array($result))
   {
  $data[] = array(
    'username'=>$row['user_name'],
    'mesg'=>$row['message'],
    'counter'=>$inside_counter
   );
   }
    echo json_encode($data);
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:55:50.533

```
SELECT * 
FROM "table_name" 
ORDER BY "id" desc 
LIMIT 1 
```

这是从表中获取最后一条记录的 SQL 查询。它返回最后插入的根据`id`。`id`应该是一个自动增量字段。我认为这对你会有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:13:25.880

这是因为您通过再次将表中的所有行返回给 ajax 调用

```
$get = "SELECT * FROM info "; 
```

如果您确实再次返回所有这些，则必须在使用 jQuery 附加它们之前测试它们是否已经存在，也许只返回新插入的行。

或者

jQuery已经知道它发送给服务器的数据，只需返回成功true或false，然后将它附加到jQuery中，无需再次将数据返回给客户端

编辑

我不会为您编写代码，但也许这些建议可能会有所帮助

```
mysql_query($insert) 
```

此处链接以供参考 - [http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

将根据插入语句是否成功返回 true 或 false

您还可以通过调用来检查它是否确实插入了一行

```
mysql_affected_rows() 
```

此处链接以供参考 - [http://php.net/manual/en/function.mysql-affected-rows.php](http://php.net/manual/en/function.mysql-affected-rows.php)

然后假设插入成功（即来自 mysql_query($insert) 或 mysql_affected_rows() > 0 的为真）简单地返回成功（即类似于

```
 echo json_encode(true); 
```

然后在客户端，您可以执行以下操作：

（仅限 jQuery Ajax 成功函数：）

```
 success: function (data){
        if (data) {
            $('#info').append("<p> you are:"+username +"</p> <p> your message  is:"+msg);
        }
        else
        {
             alert('There has been an error saving your message');
        }
    } 
```

使用您刚刚用于发送请求的变量

（请注意此处提供的代码示例仅作为示例，不打算逐字使用）

不过有几点。您是否打算仅通过 ajax 发布数据？（即没有页面刷新）好像是这种情况，您需要从表单提交事件处理程序返回 false 以停止页面完整发布。此外，您似乎没有任何逻辑，或者不担心输入完整的重复项（即相同的用户名，相同的消息） - 不确定您是否要担心这一点。

我也可能会考虑通过 id 跟踪所有消息（尽管我不知道您的数据库结构），也许使用

```
mysql_insert_id() 
```

链接在这里仅供参考 - [http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

这样每条消息都可以有一个唯一的 id，即使用户名和消息相同，也可能更容易建立重复

有很多方法可以解决这个问题。

无论如何希望有帮助

PS - 这些天通常不鼓励使用 mysql_ - 命令组，而是使用 mysqli_ 函数范围

# android - 将数据从当前活动传递到不同apk中的暂停活动？

> ID：12576022
> 
> 赞同：2
> 
> 时间：2012-09-25T04:02:04.050
> 
> 标签：android

我有一个定制的语音指令器来控制我的应用程序。它们位于两个不同的 apk 和活动中。

当我的应用程序未创建时，语音指挥官会创建它并通过 Bundle 传递数据。但是当我的应用程序已经创建时，语音指挥官只会把我的应用程序放在前面。Bundle中的数据取不到！

我试图覆盖“onNewIntent（）”，但它没有触发。

我的应用程序将运行如下：

我的应用程序开启：**onCreate -> onResume**
语音指令开启：**onPause -> onStop**
语音指令发送包到 startActivity 我的应用程序：**onRestart -> onResume**

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:08:38.060

查看[onNewIntent(Intent)](http://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29)的文档。您的应用程序清单必须声明一个特定`launchMode`的或 Intent`startActivity(Intent)`必须使用该`FLAG_ACTIVITY_SINGLE_TOP`标志。

# encoding - 经典 ASP 和 Access 之间的编码不正确

> ID：12576026
> 
> 赞同：0
> 
> 时间：2012-09-25T04:02:30.710
> 
> 标签：encoding, asp-classic

我有一个用 classic-asp 编写的用户搜索并挂接到 Access 数据库中。客户希望它不区分重音，因此搜索 LeLievre 之类的名称将返回条目 LeLièvre。

由于无法在访问中执行此操作，因此我编写了一个快速函数，用于修改搜索查询以包含重音的所有选项，如下所示：

```
 strOutput = ""
    For i = 1 to Len(input)
        curLetter = Mid(input, i, 1)
        Select Case curLetter
            case "e", "é", "è", "ê", "ë", "E", "É", "È", "Ê", "Ë"
                strOutput = strOutput & "[eéèêëEÉÈÊË]"
            case "a", "à", "â", "ä", "A", "À", "Â", "Ä"
                strOutput = strOutput & "[aàâäAÀÂÄ]"
            Case "i", "ì", "ï", "î", "I", "Ì", "Ï", "Î"
                strOutput = strOutput & "[iïîìIÏÎÌ]"
            Case "o", "ô", "ö", "ò", "O", "Ô", "Ö", "Ò"
                strOutput = strOutput & "[oôöòOÔÖÒ]"
            Case "u", "ù", "û", "ü", "U", "Ù", "Û", "Ü"
                strOutput = strOutput & "[uûüùUÛÜÙ]"
            Case "c", "ç", "C", "Ç"
                strOutput = strOutput & "[cçCÇ]"
            Case Else           
                strOutput = strOutput & curLetter
        End Select
    Next 
```

现在，我的问题。我将页面设置为使用“ISO-8859-1”以及 asp CodePage/CharSet 集（我也尝试过 UTF-8），但看起来我的页面使用了两种不同的编码。

我的意思是如果我搜索“LeLièvre”然后打印出生成的查询，它不会找到“è”并将其替换为“[eéèêëEÉÈÊË]”。此外，如果我将查询打印到页面上，一切都是一团糟，并且编码错误，除了找不到和替换的“è”。这是查询的一部分，
`AND LastName LIKE '%L[eÃ©Ã¨ÃªÃ«EÃ‰ÃˆÃŠÃ‹]L[iÃ¯Ã®Ã¬IÃÃŽÃŒ]èvr[eÃ©Ã¨ÃªÃ«EÃ‰ÃˆÃŠÃ‹]%'`

然后，生成的这个错误编码的查询会导致在数据库中找不到任何东西。

不幸的是，我在处理编码方面没有太多经验，在最后一次摆弄这个之后，我完全被难住了，我不得不来这里寻求帮助。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:57:33.977

尝试使用 UTF-8 编码保存您的经典 asp。

我不知道您使用哪个编辑器，但大多数编辑器（Notepad++、Textpad、...）可以另外指定应该保存它本身的 asp 页面的编码。

# php - 一个循环打印两个数组

> ID：12576030
> 
> 赞同：0
> 
> 时间：2012-09-25T04:02:40.243
> 
> 标签：php

我想用一个循环打印两个具有不同值的不同数组。

我已经尝试过了，但它不起作用：

```
 $a=array('a','s','d');
    $b=array('z','x','c','v');

    foreach(($a as $c) && ($b as $bb)){
        echo $c.$bb;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:06:31.010

假设数组可能是不同的长度，并以大多数索引计数进行迭代。

```
$a=array('a','s','d');
$b=array('z','x','c','v');

// iterate with most index count
$cnt = max(count($a), count($b));

for($i=0 ; $i < $cnt ; $i++) {
  // check array $a
  if(isset($a[$i]))
     echo $a[$i];

  // if may print separator here

  // check array $b
  iF(isset($b[$i]))
     echo $b[$i];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T04:35:59.550

v呢？

```
<?php
$a = array('a','s','d');
$b = array('z','x','c','v');

function iter($a, $b) {
 return $a.$b;
};

echo implode(array_map("iter", $a, $b));

// Or use a closure PHP 5.3
echo implode(array_map(function($a, $b){ return $a.$b;}, $a, $b)); 
```

# spring - Spring responseBody 不适用于 IE

> ID：12576031
> 
> 赞同：0
> 
> 时间：2012-09-25T04:02:50.373
> 
> 标签：spring, spring-mvc, internet-explorer, response

我正在尝试使用 responseBody 注释在控制器中返回 xml。除了 IE（我在 Windows 7 x64 中使用 IE 9）之外，每个浏览器都可以正常工作。我发现它会请求几次，然后请求失败。希望你们中的一些人遇到这个并提供一些帮助。我的代码如下：UserController.java。这只是一个简单的控制器，返回一个代表用户的对象。

```
package com.spring;

import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
public class UserController
{

    @RequestMapping("/user")
    public @ResponseBody
    User getUser()
    {
        User user = new User();
        user.setName("shun");
        user.setPassword("123123");
        return user;
    }

}

@XmlRootElement(name = "user")
class User
{
    private String name;
    private String password;

    @XmlElement
    public String getName()
    {
        return name;
    }

    public void setName(String name)
    {
        this.name = name;
    }

    @XmlElement
    public String getPassword()
    {
        return password;
    }

    public void setPassword(String password)
    {
        this.password = password;
    }
} 
```

网页.xml：

```
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee    
        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">
    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

我使用 spring-servlet.xml 作为我的 spring 配置文件。如下：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

    <mvc:annotation-driven />
    <context:annotation-config />
    <context:component-scan base-package="com.spring" />

    <bean
        class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
        <property name="mediaTypes">
            <map>
                <entry key="xml" value="application/xml" />
                <entry key="json" value="application/json" />
                <entry key="jsonp" value="application/javascript" />
            </map>
        </property>
        <property name="defaultContentType" value="text/html" />
        <property name="ignoreAcceptHeader" value="true" />
        <property name="favorPathExtension" value="true" />
        <property name="favorParameter" value="true" />
        <property name="parameterName" value="return_fmt"></property>
        <property name="viewResolvers">
            <list>
                <bean
                    class="org.springframework.web.servlet.view.BeanNameViewResolver" />
            </list>
        </property>
        <property name="defaultViews">
            <list>
                <bean
                    class="org.springframework.web.servlet.view.xml.MarshallingView">
                    <property name="marshaller">
                        <ref bean="castorMarshaller" />
                    </property>
                </bean>
                <bean
                    class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
            </list>
        </property>
    </bean>
    <bean id="castorMarshaller" class="org.springframework.oxm.castor.CastorMarshaller" />

</beans> 
```

顺便说一句，我的spring版本是3.1.0。我也用3.0.7进行测试，结果是一样的。在我开始我的项目后，我使用 chrome，firefox 访问它，一切都很好。但是当我尝试在 IE 9 中访问它时，它显示了这个结果。

谁能告诉我发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:44:14.410

我认为问题不在于您的控制器。我认为问题只是 IE 不显示 XML 内容。

在 IE 中：发送请求并获得响应后，打开上下文菜单并单击“显示源代码”（*或类似的东西，我只有一个德语 IE*）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:06:21.487

最后，我使用requestMapping 上的produces 选项解决了它。这会强制 spring 返回 application/xml 格式的结果，然后 IE 可能会显示它。

# c++ - 判断一个lib文件是否为2010 Build

> ID：12576032
> 
> 赞同：3
> 
> 时间：2012-09-25T04:02:50.180
> 
> 标签：c++, visual-studio-2010, visual-studio-2008, visual-c++

我们正在将 C++ 源代码从 VS2008 迁移到 VS 2010。由于 lib 文件不正确，我们遇到了问题。

有什么方法可以确定 lib 文件是使用 VS 2010 还是 VS 2008 构建的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:16:26.260

严格来说，您将无法直接从 lib 文件中获取它，因为它们只是 .obj 文件（或在导入库的情况下为“伪目标文件”）的容器。可以有一个包含由不同编译器创建的目标文件的库，尽管我怀疑你会经常看到这种情况，如果有的话。

但是，您可以从库中包含*的目标文件中获取信息。*

我不知道这些信息有多可靠，但似乎 MSVC 生成的目标文件包含有关用于构建它们的编译器的版本信息。目标文件包含一个名为“.debug$S”的部分，其中将包含调试信息。但是，即使您在没有调试信息的情况下构建了目标文件，仍然会有一个小的“.debug$S”部分，对于使用 VS 2008 SP1（编译器）编译的简单“hello world”程序，它可能如下所示版本 15.00.30729.01）：

```
RAW DATA #2
  00000000: 04 00 00 00 F1 00 00 00 56 00 00 00 18 00 01 11  ....ñ...V.......
  00000010: 00 00 00 00 63 3A 5C 74 65 6D 70 5C 68 65 6C 6C  ....c:\temp\hell
  00000020: 6F 2E 6F 62 6A 00 3A 00 3C 11 00 22 00 00 07 00  o.obj.:.<.."....
  00000030: 0F 00 00 00 09 78 01 00 0F 00 00 00 09 78 01 00  .....x.......x..
  00000040: 4D 69 63 72 6F 73 6F 66 74 20 28 52 29 20 4F 70  Microsoft (R) Op
  00000050: 74 69 6D 69 7A 69 6E 67 20 43 6F 6D 70 69 6C 65  timizing Compile
  00000060: 72 00 00 00                                      r... 
```

请注意，如果您将编译器版本 15.00.30729.01 的组件转换为 16 位十六进制数字，您将得到（以小端显示）：

```
0f 00 00 00 09 78 01 00 
```

您会注意到这是一个字符串，它在“.debug$S”部分的偏移量 0x30 和 0x38 处出现了两次。

对于 VS 2010 SP1（编译器版本 16.00.40219.01）产生以下“.debug$S”：

```
RAW DATA #2
  00000000: 04 00 00 00 F1 00 00 00 56 00 00 00 18 00 01 11  ....ñ...V.......
  00000010: 00 00 00 00 43 3A 5C 74 65 6D 70 5C 68 65 6C 6C  ....C:\temp\hell
  00000020: 6F 2E 6F 62 6A 00 3A 00 3C 11 00 22 00 00 07 00  o.obj.:.<.."....
  00000030: 10 00 00 00 1B 9D 01 00 10 00 00 00 1B 9D 01 00  ................
  00000040: 4D 69 63 72 6F 73 6F 66 74 20 28 52 29 20 4F 70  Microsoft (R) Op
  00000050: 74 69 6D 69 7A 69 6E 67 20 43 6F 6D 70 69 6C 65  timizing Compile
  00000060: 72 00 00 00                                      r... 
```

您将在其中记录编译器版本数据`10 00 00 00 1B 9D 01 00`。

VS 2003 通过 VS 2012 编译器生成了类似的签名（VC6 不生成“.debug$S”部分，我没有办法测试 VS 2002）。但是，信息的偏移量有时会有所不同（根据使用的实际选项和正在编译的文件，即使对于相同的编译器也可能不同）。

我不知道有一个工具可以轻松提取此信息，但是一些将`lib`工具串在一起的脚本和/或`dumpbin`可能很容易拼凑在一起。 如果您想自己拆分库和目标文件，[Microsoft 的“PE 和 COFF 规范”文档](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463119.aspx)`.debug$S`可能会有所帮助，尽管该文档除了它存在并包含调试信息之外没有关于该部分的真实信息。

请注意，据我所知，这些信息是无证的，我的逆向工程至少可以说是粗略的，并且可能会在所有情况下发生变化或不成立。我*真的*不确定这些信息的可靠性，但如果没有其他更好的信息出现，这只是一个开始。

# java - WEB-INF/lib 和 CLASSPATH 中包含相同 Jar 时的类转换异常

> ID：12576035
> 
> 赞同：1
> 
> 时间：2012-09-25T04:03:19.977
> 
> 标签：java, servlets, jboss, classcastexception

我在 JBoss 5 启动 (run.bat/run.sh) 文件的 CLASSPATH 中添加了一个 .jar 文件。这是一个从基于 servlet 的应用程序中引用的依赖 jar。如果我使用此设置，则 servlet 可以正常加载并按预期工作。但是，我注意到如果我在 servlet 的 WEB-INF/lib 目录中有相同的 jar，我会得到一个类转换异常，如下所示：

```
ERROR [STDERR] ERROR: com.idoox.wasp.ProtocolRepositoryImpl - Exception in protocolHandler soap, protocolHandler com.server.saaj.soap.SOAP11ProtocolHandler, class space root.wasp-impl.SOAP : 
ERROR [STDERR] EXCEPTION: 
ERROR [STDERR] com.systinet.saaj.soap.SOAP11ProtocolHandler cannot be cast to org.idoox.wasp.ProtocolHandler 
ERROR [STDERR] java.lang.ClassCastException: com.server.saaj.soap.SOAP11ProtocolHandler cannot be cast to org.idoox.wasp.ProtocolHandler 
```

这不是问题，因为我不会在两个地方都有罐子，但我只是想知道为什么会这样。这是一个类加载问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:33:28.303

您提到的 jar 文件已经可以使用`JBoss`. 当你把它放在`WEB-INF/lib`; JBoss 已经从 JBoss 可用的类中加载了该类，并且与文件夹`jar`中的类存在冲突。`web-inf`即使类相同，由不同类加载器加载的类也被视为不同。
当您放弃时`run.bat`，只会`jar`加载一个文件。JBoss 加载这个并且没有冲突的 jars。

# php - 多个表单输入，如何提交并保存到mysql

> ID：12576036
> 
> 赞同：0
> 
> 时间：2012-09-25T04:03:22.753
> 
> 标签：php, jquery, mysql, database, forms

我有一个照片上传系统，允许用户上传他们想要的任意数量的照片，然后我允许他们为每张照片添加描述，然后发布照片。我有这个，部分。我也用 jQuery 提交表单。现在我很难弄清楚如何做是将每个表单元素发送到我的 php 文件，然后更新每张照片以获取描述。

```
<form class="upload-results-form" rel="<?php echo $albumID?>" action="javascript:return false;">
<textarea class="description" name="photoID1"></textarea>
<textarea class="description" name="photoID2"></textarea>
</form> 
```

现在这就是我如何设置它的想法，除了可能有一个 textarea 或其中的 20 个。

为了尝试保存和发布这些，我使用 jQuery，如下所示：

```
$("body").on("submit", ".upload-results-form", function(){

    $.ajax({
    type: "POST",
    url: "ajax/add/photos_publish.php",
    cache: false,
    success: function(html){

    }
    });

}); 
```

那么如何让我的 php 遍历每个 texarea 表单并保存该 photoID 的描述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:01:44.400

问题是 JQuery Ajax 不会自动为您构建 POST 数据。因此，您必须自己构建它。您可以创建一个 JSON 对象并提交它（然后`json_decode`在 PHP 中使用），或者您可以创建*urlencoded*表单数据并在 PHP 中获取常规`_POST`数组。

```
var _photoID1 = $('#my_form_id').find('input[name="photoID1"]').val();
var _photoID2 = $('#my_form_id').find('input[name="photoID2"]').val(); 
```

## JSON方法：

```
var data = { photoID1 : _photoID1, photoID2 : _photoID2 };

$("body").on("submit", ".upload-results-form", function(){
   $.ajax({
     type: "POST",
     data: data,
     url: "ajax/add/photos_publish.php",
     cache: false,
     success: function(html){  }
   });
}); 
```

对于此方法，您可能需要添加一个标头以设置`Content-Type`为`application/json`.

## 表单 POST 方法：

```
var post_data = "photoID=" + encodeURIComponent(_photoID1)
                + "&photoID2=" + encodeURIComponent(_photoID2);

$("body").on("submit", ".upload-results-form", function(){
   $.ajax({
     type: "POST",
     data: post_data,
     url: "ajax/add/photos_publish.php",
     cache: false,
     success: function(html){  }
   });
}); 
```

这两种方式都会将您的数据发送到服务器。

（以上代码未完全调试，但基本正确。）

# jquery - 带有 jQ uery("#someIdName") 元素引用的无法识别的表达式

> ID：12576040
> 
> 赞同：0
> 
> 时间：2012-09-25T04:03:40.837
> 
> 标签：jquery, jquery-ui, prototype, tag-it

抱歉，我在发帖之前确实寻找过答案。但我找不到我要找的东西。

我正在尝试使用 jQuery UI 的 tag-it 小部件。我正在尝试将该`.tagit()`方法应用于元素，如下所示：

```
jQuery("#myTags:.5aedf589").tagit(); 
```

我试图应用该`tagit()`方法的页面上的实际元素是这样的：

```
<ul id="myTags:.5aedf589"> 
```

这应该是一个合法的 id 名称，但以防万一我也试过了，只是遇到`"#myTags"`了同样的问题。

我使用 jQuery 而不是 $ 别名，因为我的脚本同时包含 Prototype 和 jQuery。首先加载 jQuery，从文档中它说我应该能够使用 jQuery 而不是`$`甚至不使用`noConflict()`. 我也尝试过使用 noConflict，但没有帮助。

问题是上面的 jQuery 表达式会导致以下 JavaScript 错误：

```
Syntax error, unrecognized expression: "#myTags:.5aedf589" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:09:24.333

`:`并且`.`在查询中有特殊含义，句号是类选择器，冒号是伪选择器。如果您想将它们用于其他用途，则必须使用 转义它们`\`，并转义`\`JS 字符串；因此，在它们之前插入`\\`。[http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_select_an_element_by_an_ID_that_has_characters_used_in_CSS_notation.3F](http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_select_an_element_by_an_ID_that_has_characters_used_in_CSS_notation.3F)

```
jQuery("#myTags\\:\\.5aedf589").tagit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:09:16.657

你为什么不试试这个选择器，看看它是否有效

```
jQuery("[id*=5aedf589]").tagit(); 
```

它将选择具有 5aedf589 的 id 并选择该选择器。这只是为了检查选择器是否是实际问题。

如果您遇到多个选择器可能匹配 escape 的问题**。**和**：** 与\

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:00:08.077

错误是由于元素的 id。是的，它是 HTML 元素的有效 id，但对于使用基于类的选择器的 jquery ':' 指的是伪选择器和 '.' 请参阅类，这就是它抛出无法识别的表达式错误的原因。对于伪选择器，您不要在伪选择器之前使用类

要么你像@Juan Mendes 说的那样逃避它。或者改变元素的id。

# javascript - D3 中的最近邻搜索

> ID：12576042
> 
> 赞同：9
> 
> 时间：2012-09-25T04:04:33.440
> 
> 标签：javascript, d3.js, nearest-neighbor, quadtree

我已经在 J​​avascript 中实现了一个二维[kd 树](http://en.wikipedia.org/wiki/Kdtree)（[在 GitHub 上查看](https://github.com/jacobmarble/Lechosa)），并且我将它与[D3](http://d3js.org/)一起用于最近邻搜索。

我了解到 D3 中有[一个四叉树实现](https://github.com/mbostock/d3/wiki/Quadtree-geom)，但也发现 API 文档稀少，谷歌搜索没有成果。如果可能的话，我宁愿使用一个广为人知的图书馆，也不愿使用我自己重新发明的轮子。

**如何*使用 D3 的四叉树***执行最近邻搜索？通过最近的邻居，我的意思是：

*   用二维点填充四叉树
*   搜索最接近四叉树中不一定存在的新点的四叉树包含点

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-07T22:50:03.763

刷牙演示实际上并没有找到最近的邻居，而是找到了包含在给定矩形中的四叉树点。（尝试刷一个空矩形，它不一定会访问最近的邻居。）

我创建了一个示例，可以有效地在四叉树中找到任意点的最近邻居 - 请参阅[http://bl.ocks.org/patricksurry/6478178](http://bl.ocks.org/patricksurry/6478178)

# android - 流式音频延迟

> ID：12576045
> 
> 赞同：13
> 
> 时间：2012-09-25T04:04:45.073
> 
> 标签：android, audio-streaming, audio-recording, android-mediaplayer, audio-player

我正在尝试通过服务器流式传输音频。我已经设置了所有内容，并且可以正常录制和播放静态音频，但是**当我尝试流式传输音频时，播放端会出现延迟。**

我做了谷歌搜索，但找不到正确的方法。我正在使用 AudioRecord 和 Audiotrack Android 媒体 API 来发送和接收音频数据。谁能告诉我**如何处理这种延迟？**

我已经在[GOOGLE GROUP 上添加了我的代码以获得清晰的图片](http://productforums.google.com/forum/#!topic/gmail/lgj1P5ufe4E)。

我曾尝试过这种方式，将 5 块音频数据保存在一个缓冲区中，该缓冲区来自服务器并在填充 5 块数据时播放，然后再次获取下 5 块音频数据并像这样填充它直到 1024 字节数据（它写入音轨并调用播放方法）。这也有延迟，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:03:27.553

如果您真的想无缓冲地执行此操作，请确保您使用的任何播放工具都试图在没有缓冲的情况下播放它。您将很难没有延迟。电视、广播等上没有什么是真正“直播”的——总会有某种延迟。使用互联网流，您会不断地发送大量数据。即使除了传输时间之外，所有这些数据都必须按特定顺序保存，并且在最终用户的计算机尝试播放时，没有人希望播放断断续续。我有用于主要网络的闪存播放器在处理播放时在我的计算机上保留大量缓存文件，但它们的播放器不会跳过/等待缓冲/等。（如果您加载某些内容并注意到使用了 100 MB 的额外内存，在播放期间甚至可能更多，那就是这样。）

使用 VLC，您可能能够摆脱非常小的缓冲区（过去的标准是 30-60 秒，许多玩家仍然默认使用此）。我已经能够将其缓冲区设置得非常低，但它在质量非常低的流/视频上。虽然我猜你遇到的最大问题是你的播放设置缓冲区，如果你的播放设置为 60 秒缓冲区，那么你在服务器端做什么都没关系......客户端会等到它有那么多块，然后开始播放。

# php - PHP MySQL Web 服务器和 phpmyadmin 上的查询结果不同

> ID：12576055
> 
> 赞同：1
> 
> 时间：2012-09-25T04:05:41.450
> 
> 标签：php, mysql, phpmyadmin

我有一个看起来像这样的字段：

> 智力：0/75

我有一个表单，用户可以搜索此字符串的值。在我的实时网络服务器上，这是查询：

```
SELECT * FROM `test` WHERE `id` IS NOT NULL AND `file` REGEXP CONCAT('Intelligence(: | : )([', :var2, '-9]|[0-9]{2,3})[ ]{0,1}/[ ]{0,1}([', :var2, '-9]|[0-9]{1,3})')
$var2 = $_POST['int'];
$stmt->bindValue(':var2', $var2); 
```

`:var2`是 $_POST 值。我一直在使用`4`. 这是插入 4 时的文字正则表达式：

```
Intelligence(: | : )([4-9]|[0-9]{2,3})[ ]{0,1}/[ ]{0,1}([4-9]|[0-9]{1,3}) 
```

由于我的数据库中的字段是`Intelligence: 0/75`这个查询不应该产生任何结果。但它确实在我的实时网络服务器上。它返回字段`Intelligence: 0/75`。

如果我在 phpmyadmin 中运行这个 EXACT 查询，我不会得到任何结果。我已经在我的文本编辑器中排列了来自 phpmyadmin 和我的服务器的查询，它们是相同的。就这样我没疯，这是从 phpmyadmin 复制/粘贴的查询：

```
SELECT *
FROM `test`
WHERE `id` IS NOT NULL
AND `file`
REGEXP CONCAT( 'Intelligence(: | : )([4-9]|[0-9]{2,3})[ ]{0,1}/[ ]{0,1}([4-9]|[0-9]{1,3})' ) 
```

谁能明白为什么这会产生两个差异。结果？

**更新：**

我想我已经把它缩小到PHP。如果我将绑定到的值更改`:var2`为喜欢

```
$stmt->bindValue(':var2', '6284'); 
```

结果是一样的。返回所有带有`Intelligence: 0/75`的行。

如果我删除`bindValue`代码，那么:var2就没有绑定任何东西了，结果还是一样的！

print_r($stmt) =

```
SELECT * FROM `test` WHERE `id` IS NOT NULL AND `file` REGEXP
                    CONCAT('(INT:[  ]{1,2}([', :var2, '-9]|[0-9]{2,3})[  ]{1,2}/[  ]{1,2}([', :var2, '-9]|[0-9]{1,3})|Intelligence(: | : )([', :var2, '-9]|[0-9]{2,3})[ ]{0,1}/[ ]{0,1}([', :var2, '-9]|[0-9]{1,3}))') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:48:33.737

挪威语，

当您说“在我的实时 Web 服务器上”时，您是指在您的由 PHP 或 SQL 命令行实用程序呈现的网页上吗？

让**sql 恶魔记录查询**。您将能够比较执行了哪些*确切的*查询！ [日志查询（MySQL 文档）](http://dev.mysql.com/doc/refman/5.1/en/query-log.html)

您似乎在文件列中有更多的数据单元。一般来说，尝试在每一列中包含一个数据单元，并尽可能尊重范式（[Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)）。您将获得更快、更简单的查询，而无需正则表达式。但是，在您的情况下，这可能是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:02:08.493

我认为，查询是不同的。

执行 a`print_r()`或`var_dump()`on`$stmt`以获得通过 php 执行的确切查询，以确保 regex 部分按原样运行，并且不会被任何其他操作（如`bind`.

# html - 生成多级嵌套内容的 HTML 的首选输出结构是什么？

> ID：12576056
> 
> 赞同：0
> 
> 时间：2012-09-25T04:05:46.840
> 
> 标签：html, windows

我需要生成许多表示多级内容的父子相关 HTML 文件（在本例中来自节点图），但我不知道要创建的最佳输出结构。

我可以想象下一个选项：

1.  将所有节点（HTML 文件）生成到单个 MHTML 文件中。问题：我读到这种格式不是很“标准”，需要对浏览器进行扩展。

2.  生成一个目录结构，其中每个目录将包含其节点 HTML 文件以及带有子节点的目录。问题：可能会创建很多目录，并且可能会给用户造成混乱。

3.  生成一个目录结构，就像第 2 点一样，但在一个 .ZIP 文件中。问题：无法通过网络浏览器直接查看。

4.  生成一个包含同一级别的所有 HTML 文件的单个目录，但重命名以避免同名冲突（如“node15atlevel1.node38atlevel2.node74atlevel3.html”）。问题：文件名可能由于深度嵌套包含而变得太长。

5.  在同一目录中生成文件，如第 4 点，但使用短编码文件名（如“n015038074.html”而不是“node15atlevel1.node38atlevel2.node74atlevel3.html”。

所以你怎么看？将嵌套内容输出为 HTML 的最实用和可行的方法是什么？

谢谢！

# iphone - 连接失败时出现 IOS JSON 错误

> ID：12576059
> 
> 赞同：-1
> 
> 时间：2012-09-25T04:06:49.390
> 
> 标签：iphone, ios, json, ipad

[http://imasters.com.br/artigo/22804/ios/trabalhando-com-json-em-aplicacoes-iphone](http://imasters.com.br/artigo/22804/ios/trabalhando-com-json-em-aplicacoes-iphone)按照本教程阅读`JSON`我的应用程序中的一个，并且工作正常，除非没有连接到互联网.

如果您在应用它的过程中出现故障及时阅读`JSON`，有时当连接到`WIFI`iPhone 时需要一段时间才能获取`IP`如果我此时访问应用程序也会破坏应用程序。

如何识别它以修复错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:54:50.103

您可以使用[Reacability](https://github.com/tonymillion/Reachability)类来确保在对 JSON 发出任何请求之前能够连接到网站。

您还可以使用[AFJSONRequestOperation](http://afnetworking.github.com/AFNetworking/Classes/AFJSONRequestOperation.html)，它是 AFNetworking 的一部分，[非常](http://afnetworking.com/)适合错误检查并且不会解析无效的 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:36:23.153

有多种方法可以解决此问题：

1：在解析数据之前检查数据是否是有效的 JSON。

2：在客户端设置一个 JSON 用于处理错误，即当您收到来自网络连接的错误时创建一个 json。& 加载该 JSON 以解析并返回该 JSON。所以如果你没有得到服务器响应，你可以给你的 JSON 解析。

希望能帮助到你。

# javascript - JQuery document.ready vs Phonegap deviceready

> ID：12576062
> 
> 赞同：67
> 
> 时间：2012-09-25T04:07:07.390
> 
> 标签：javascript, jquery, cordova

我正在用 jquery 制作一个 phonegap 应用程序。我很困惑是否应该将整个代码包装在 JQuery`$(document).ready()`中

```
$(document).ready(function(){
    //mycode
}); 
```

或在 phonegap 的 deviceready 事件中，例如

```
document.addEventListener("deviceready", function(){
    //mycode
}); 
```

我目前正在使用`document.ready`，但我想如果我尝试访问其中的一些 Phonegap API 方法可能会遇到问题`document.ready`。

哪个是包装我的代码的最佳事件，document.ready 还是 deviceready？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-01-01T08:29:04.953

答案中的一个关键点是事件[文档](http://docs.phonegap.com/en/2.2.0/cordova_events_events.md.html#deviceready)中的这一行。`deviceready`

> 此事件的行为与其他事件不同，因为在事件触发后注册的任何事件处理程序都将立即调用其回调函数。

这意味着如果在事件触发后添加侦听器，您将不会“错过”该事件。

因此，首先将所有初始化代码移至 onDeviceReady 函数。然后先处理document.ready。在 document.ready 中如果你确定你在浏览器中运行，只需调用 onDeviceReady 函数，否则添加 deviceready 监听器。这样，当您在 onDeviceReady 函数中时，您可以确定所有需要的“准备就绪”已经发生。

```
$(document).ready(function() {
    // are we running in native app or in a browser?
    window.isphone = false;
    if(document.URL.indexOf("http://") === -1 
        && document.URL.indexOf("https://") === -1) {
        window.isphone = true;
    }

    if( window.isphone ) {
        document.addEventListener("deviceready", onDeviceReady, false);
    } else {
        onDeviceReady();
    }
});

function onDeviceReady() {
    // do everything here.
} 
```

isphone 检查有效，因为在 phonegap 中，index.html 是使用`file:///`url 加载的。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-09-25T04:11:06.553

您应该使用 deviceready 事件来避免发生有趣的事情。

文档状态：

> 这是每个 PhoneGap 应用程序都应该使用的非常重要的事件。
> 
> PhoneGap 由两个代码库组成：native 和 JavaScript。在加载本机代码时，会显示自定义加载图像。但是，只有在 DOM 加载后才会加载 JavaScript。这意味着您的 Web 应用程序可能会在加载之前调用 PhoneGap JavaScript 函数。
> 
> 一旦 PhoneGap 完全加载，PhoneGap deviceready 事件就会触发。设备触发后，您可以安全地调用 PhoneGap 功能。

通常，您需要`document.addEventListener`在 HTML 文档的 DOM 加载后附加一个事件侦听器。

在此处阅读文档：http: [//docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-07T09:58:05.977

它们是不相同的。

jQuery.ready() 正在使用：

```
document.addEventListener("DOMContentLoaded", yourCallbackFunction, false); 
```

来源：[https ://code.jquery.com/jquery-3.1.1.js](https://code.jquery.com/jquery-3.1.1.js)

Cordova/PhoneGap 指导您使用：

```
document.addEventListener("deviceready", yourCallbackFunction, false); 
```

来源：[https ://cordova.apache.org/docs/en/latest/cordova/events/events.html](https://cordova.apache.org/docs/en/latest/cordova/events/events.html)

我的建议是，您将 Cordova/PhoneGap 插件的所有初始化代码放在`deviceready`事件发生时触发的回调函数中。例子：

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    // Now safe to use device APIs
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-09T10:54:00.617

@Kinjal 的回答确实帮助我走上了正轨，但我不得不解决很多时间问题。

我使用 Cordova 设备就绪事件来读取我的应用程序的数据文件，一些驱动接口构建的 JSON 数据包，默认情况下加载到 www 文件夹中，但最终可能会从服务器下载，以升级应用程序数据库。

我发现了很多问题，因为在路由开始之前应用程序数据结构没有足够的时间来初始化。

我总结了这个解决方案：首先初始化jQuery，在jQuery初始化结束时调用Cordova的事件处理程序，在Cordova初始化的最后一个处理结束时调用应用程序启动例程。

所有这些噩梦都开始了，因为我需要一种方法来读取 Hogan.js 的模板文件，并且无法使用文件协议和简单的 XHR 来读取它们。

像这样：

```
$(document).ready(function () {

    ...

    // are we running in native app or in a browser?
    window.isphone = false;
    if (document.URL.indexOf('http://') === -1 && document.URL.indexOf('https://') === -1) {
        window.isphone = true;
    }

    if (window.isphone) {
        document.addEventListener('deviceready', onDeviceReady, false);
    } else {
        onDeviceReady();
    }
});

function onDeviceReady() {
    function readFromFile(fileName, cb) {
        // see (https://www.neontribe.co.uk/cordova-file-plugin-examples/)
    }

    ...

    readFromFile(cordova.file.applicationDirectory + 'www/views/tappa.html', function (data) {
        app.views.lastview = data;
        app.start();
    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-05T14:29:13.110

我正在使用 PhoneGap Build cli-6.2.0，当我测试您建议的程序时，它在 function 内没有做任何事情`onDeviceReady()`。

使用旧版本的 PGB 它可以工作！

```
 $(document).ready(function() { 
		window.isphone = false;
		if (document.URL.indexOf("http://") === -1 && document.URL.indexOf("https://") === -1) { window.isphone = true }
		if (window.isphone) { document.addEventListener("deviceready", this.onDeviceReady, false); } else { onDeviceReady(); }
	});
	function onDeviceReady() {
		alert( window.isphone ); 		
	}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-26T19:17:41.023

一个不必排除另一个。一个简单的例子：

```
$(document).on('deviceready', function() {
    console.log('event: device ready');
    $(document).on('pause', function() {
        console.log('event: pause');
    });
    $(document).on('resume', function() {
        console.log('event: resume');
    });
}); 
```

# iphone - 使用 Google 的 OAuth 时 iOS 6 抛出错误

> ID：12576064
> 
> 赞同：4
> 
> 时间：2012-09-25T04:07:32.410
> 
> 标签：iphone, types, oauth, ios6, xcode4.5

周末我将我的 xcode 版本升级到最新版本和最新的 SDK (iOS 6.0)。今天早上，当我进入它查看我们的应用程序在过渡过程中的表现时，我发现了一些奇怪的东西。我收到以下错误：

`'GDataOAuthentication'`未知类型

```
@property (nonatomic, retain, readonly) GDataOAuthAuthentication *authentication; 
```

在`GDataOAuthViewControllerTouch.h`

这在最后一个版本下工作得很好。关于需要改变什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:50:32.817

尝试将有效架构从 arm7s 更改为 arm7。Arm7s 是 iPhone 5 的新架构，可能是导致 GData 以及其他库的问题。

这也是在模拟器或手机上运行的吗？我的在手机上编译而不是在模拟器上，所以仍然是一个问题。

# ruby-on-rails - 为什么这在 Rspec 僵尸.should_not be_valid 中不起作用

> ID：12576065
> 
> 赞同：0
> 
> 时间：2012-09-25T04:07:43.957
> 
> 标签：ruby-on-rails, rspec

## 应用程序/模型/zombie.rb

```
class Zombie < ActiveRecord::Base
    attr_accessible :name
    validates :name, presence: true
end 
```

## 规格/模型/zombie_spec.rb

```
require 'spec_helper'

describe Zombie do

    it "is invalid without a name" do
        zombie = Zombie.new
        zombie.should_not be_valid
    end
end 
```

## 错误

> 没有名字的僵尸是无效的（失败 - 1）失败：
> 
> ```
>  1) Zombie is invalid without a name
>     Failure/Error: zombie.should_not be_valid
>     ActiveRecord::StatementInvalid:
>       Could not find table 'zombies'
>     # ./spec/models/zombie_spec.rb:5:in `new'
>     # ./spec/models/zombie_spec.rb:5:in `block (2 levels) in <top (required)>' 
> ```
> 
> 在 0.02912 秒内完成 7 个示例，1 个失败
> 
> 失败的例子：
> 
> rspec ./spec/models/zombie_spec.rb:4 # 没有名字的僵尸无效
> 
> 随机种子 12906

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:24:21.777

您不应该`initialize`在 ActiveRecord 类中定义方法。

当我定义了初始化方法时，出现了这个错误：

```
 Failure/Error: zombie = Zombie.new
 NoMethodError:
   undefined method `delete' for nil:NilClass 
```

没有它，它会如你所愿地通过。

因此，将您的模型更改为以下，您的规格将通过。

```
class Zombie < ActiveRecord::Base
  attr_accessible :name
  validates :name, presence: true
end 
```

或者......如果你觉得你必须这样做，请确保你`super`先打电话

```
def initialize(options={})
  super
  self.name = options[:name]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:42:18.143

您是否运行了 rake db:test:load 以便将数据库的模式加载到测试数据库上？

您的测试也不正确，您正在测试您的模型无效但您没有测试您的模型无效，因为它的名称不存在，您应该执行类似的操作

```
it "is invalid without a name" do
    zombie = Zombie.new
    zombie.should_not be_valid
    zombie.errors[:name].should_not be_blank
end 
```

这样你就真的知道 name 属性有错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T00:40:09.097

谢谢大家，我没有运行迁移，所以运行 rake db:migrate 修复了它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T04:15:01.567

我也在学习本教程并且遇到了同样的问题。我进行了迁移，但仍然没有得到想要的结果。正如 arieljuod 提到的，跑步 `$ rake db:test:load`解决了这个问题。

# image - 如何使用 servlet 将图像上传到绝对路径

> ID：12576067
> 
> 赞同：1
> 
> 时间：2012-09-25T04:07:55.523
> 
> 标签：image, jsp, servlets, apache-commons

我想将文件上传到我的项目文件夹。我的代码如下：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    File savedFile;
    String destination;

    List<FileItem> items = null;
    try {
        items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);
    } catch (FileUploadException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    for (FileItem item : items) {
        if (item.isFormField()) {
            // Process regular form field (input type="text|radio|checkbox|etc", select, etc).
        } else {
            // Process form file field (input type="file").
            String fieldName = item.getFieldName();
            String fileName = FilenameUtils.getName(item.getName());
            InputStream fileContent = item.getInputStream();

            String userName = (String) session.getAttribute("newUser");

            destination = getServletConfig().getServletContext().getContextPath() + "\\" + userName + ".jpeg";
            savedFile = new File(destination);

            //Check if file exists
            if(!savedFile.exists()) 
                savedFile.createNewFile();

            BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(savedFile));
            byte[] buffer = new byte[1024];
            int len;

            //Read from file and write to new file destination
            while((len = fileContent.read(buffer)) >= 0) {
                bos.write(buffer, 0, len);
            }

            //Closing the streams
            fileContent.close();
            bos.close();

        }
    }

} 
```

当我运行 jsp 文件并浏览并选择所需的图像并提交表单时，servlet 运行但它抛出 IOException。**异常是由我使用savedFile.createNewFile()**创建新路径的行引发的。在我使用该代码之前，它引发了另一个 FileNotFoundException。我不确定我提供的路径是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:43:09.483

尝试使用`getRealPath()`方法。

```
 String fileName="/" + userName + ".jpeg";
 destination = getServletContext().getRealPath(fileName);
 savedFile = new File(destination); 
```

# c# - 在 IsolatedStorage 中保存和获取 ObservableCollection 时出错

> ID：12576068
> 
> 赞同：0
> 
> 时间：2012-09-25T04:08:27.733
> 
> 标签：c#, windows-phone-7, isolatedstorage

我一直在使用一个辅助类，它使用键值对从隔离存储中保存和检索值。这适用于在我的应用程序中更改的单个值，但我现在尝试将它用于 ObservableCollection，其中将在运行时添加和删除项目。出于某种原因，当应用程序关闭并重新打开时，我的 ObservableCollection 不会从 IsolatedStorage 中存储和/或检索。我不确定我做错了什么，因为这适用于个人价值观吗？

设置.cs

```
public class Setting<T>
{
    string name;
    T value;
    T defaultValue;
    bool hasValue;

    public Setting(string name, T defaultValue)
    {
        this.name = name;
        this.defaultValue = defaultValue;
    }

    public T Value
    {
        get
        {
            //Check for the cached value
            if (!this.hasValue)
            {
                //Try to get the value from Isolated Storage
                if (!IsolatedStorageSettings.ApplicationSettings.TryGetValue(this.name, out this.value))
                {
                    //It hasn't been set yet
                    this.value = this.defaultValue;
                    IsolatedStorageSettings.ApplicationSettings[this.name] = this.value;
                }
                this.hasValue = true;
            }
            return this.value;
        }

        set
        {
            //Save the value to Isolated Storage
            IsolatedStorageSettings.ApplicationSettings[this.name] = value;
            this.value = value;
            this.hasValue = true;
        }
    }

    public T DefaultValue
    {
        get { return this.defaultValue; }
    }

    // Clear cached value
    public void ForceRefresh()
    {
        this.hasValue = false;
    }
} 
```

上面的 Setting.cs 类用于存储和检索值，我正在使用另一个名为 Settings.cs 的类作为使用这些存储值的机制。

设置.cs

```
public static Setting<ObservableCollection<BrowserItem>> BrowserList = new Setting<ObservableCollection<BrowserItem>>("Browsers", new ObservableCollection<BrowserItem>());
    public static Setting<string> InitialUri = new Setting<string>("InitialUri", "http://www.bing.com"); 
```

在上面，`InitialUri`可以更改并且正确保存和检索值。另一方面，`BrowserList`（BrowserItem 类型的 ObservableCollection（自定义类））没有存储或保存？以下显示了我如何尝试使用`BrowserList`

浏览器项.cs

```
[DataContract]
public class BrowserItem

{
    [DataMember]
    public FullWebBrowser Browser
    {
        get;
        set;
    }
    [DataMember]
    public string Url
    {
        get;
        set;
    }
    [DataMember]
    public BitmapImage ImageUri
    {
        get;
        set;
    }
    [DataMember]
    public string Title
    {
        get;
        set;
    }
    [DataMember]
    public string Notification
    {
        get;
        set;
    }
    [DataMember]
    public bool DisplayNotification
    {
        get
        {
            return !string.IsNullOrEmpty(this.Notification);
        }
    }
    [DataMember]
    public string Message
    {
        get;
        set;
    }
    [DataMember]
    public string GroupTag
    {
        get;
        set;
    }
    [DataMember]
    //for translation purposes (bound to HubTile Title on MainPage) 
    public string TileName
    {
        get;
        set;
    }
} 
```

TabsPage.xaml.cs

```
void addNew_Click(object sender, EventArgs e)
    {
        BitmapImage newTileImage = new BitmapImage();

        var newItem = new BrowserItem() { Browser = new FullWebBrowser(), Url = "http://www.bing.com", ImageUri = newTileImage, Title = "new", /*Notification = "",*/ Message = "new browser", GroupTag = "TileGroup", TileName = "new" };
        newItem.Browser.InitialUri = Settings.InitialUri.Value; //set the initial uri when created
        Settings.BrowserList.Value.Add(newItem); //update saved BrowserList
    } 
```

在`addNew_Click`偶数处理程序中，成功添加了新的`BrowserItem`命名。`newItem`但是，当应用程序关闭或重新打开时，我会检查`BrowserList`项目是否存在，如果存在，我想根据 ObservableCollection 中的项目索引值加载特定的项目。每次我执行检查，`BrowserList`有没有保存的项目？如何正确地将这些值保存在集合中，以便它们持续存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:25:27.240

这可能是由于可观察集合中包含的类型的序列化失败。首先，您的 BrowserItem 类型需要通过实现序列化接口的继承或应用 [Serializable] 属性来标记为可序列化：

```
[Serializable]
public class BrowserItem
{

} 
```

事实上，如果 BrowserItem（或您尝试保存到设置的任何其他类型）是可序列化的，那么[此 Q/A](https://stackoverflow.com/questions/7681957/trouble-saving-a-collection-of-objects-in-application-settings)可能会为您提供帮助。

同样，如果您的类型已经是可序列化的，您可能希望将集合的样本序列化到 xml 文件中的磁盘，以便您可以手动/直观地检查当您的类型被序列化时可能导致问题的原因/反序列化

# c - C 随机，有问题

> ID：12576078
> 
> 赞同：0
> 
> 时间：2012-09-25T04:09:34.320
> 
> 标签：c, function, text, methods, random

```
void getS(char *fileName){
    FILE *src;
    if((src = fopen(fileName, "r")) == NULL){
        printf("%s %s %s", "Cannot open file ", fileName, ". The program is now ending.");
        exit(-1);
    }
    //char *get = " ";      

    int c = 1;
    char ch = 'x';
    while(ch!=EOF) {
        ch = fgetc(src);
        if(ch == '\n')  c++;
    }
    fseek(src, 0, SEEK_SET);
    int random = rand() % c;
    int i = 0;
    for(i = 0; i < random; i++){
        while(ch != '\n'){
            ch = fgetc(src);
        }
    }
    do{
        ch = fgetc(src);
        if(ch != '\n' && ch != EOF){
            printf("%c", ch);
        }
    }while(ch != '\n' && ch != EOF);
    printf("%c", '\n');
    fclose(src);
} 
```

所以这是我的函数，它抓取一个文件并打印出文件中的一个随机单词，如果每个单词都由一个新行分隔。

问题 1：为什么 random 优先选择前 2 个词？

问题2：我将如何做到这一点，以便我可以多次使用此功能而无需执行 printf("%c", '\n'); 因为如果我最后没有那个，前一个函数调用只会覆盖旧的。

在此先感谢，我今天一直在问一些问题，感谢stackoverflow的所有帮助！:)

PS 使用 srand(time(NULL));

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:15:16.397

看看这里的逻辑：

```
 for(i = 0; i < random; i++){
        while(ch != '\n'){
            ch = fgetc(src);
        }
    } 
```

一旦你打了一个换行符，你就不会再读任何字符了，所以你总是要打印第一行或第二行。

你可以像这样修复它：

```
 for(i = 0; i < random; i++){
        ch = fgetc(src); // start by reading the first character on the line
        while(ch != '\n'){
            ch = fgetc(src);
        }
    } 
```

Jim Balter 还指出，最好将 ch 声明为 int。这是因为 EOF 不被视为常规字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:06:18.140

最后没有`printf("%c","\n");`线它工作正常......

# php - Mac 上的 PHP Zend 向浏览器提供原始 PHP

> ID：12576082
> 
> 赞同：0
> 
> 时间：2012-09-25T04:10:10.387
> 
> 标签：php, zend-framework

我已经在基于 Linux 的托管服务提供商上使用 Zend 框架开发了一个 PHP 应用程序，并且它或多或少地顺利进行。

是时候在我的 Mac 上进行本地开发了，所以我将 Apache 配置为运行 PHP，获取源代码，并将 /Library/WebServer/Documents 符号链接到我的 Zend Web 应用程序中的 public/ 文件夹。

那很好。控制器正在执行和加载正确的脚本，这些脚本似乎可以正确解析和呈现。除了，我无法连接到我的本地 MySQL 数据库。我意识到我没有将 /etc/php.ini.default 复制到 /etc/php.ini，所以我继续这样做。然后我更新了这一行： pdo_mysql.default_socket=/tmp/mysql.sock 并重新启动了 Apache。现在，突然之间，没有一个 PHP 执行。相反，原始 PHP 被发送回浏览器。

效果或多或少与我尝试使用无法识别 .php 文件扩展名的 Apache 实例直接加载 .php 文件相同。根据我的经验，我猜可能在 php.ini 中的某个地方存在导致这种情况发生的设置（当我重命名 php.ini 并重新启动 Apache 时，脚本再次正确解析和呈现，但是再次我无法访问数据库）但我不确定在哪里看。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:00:49.470

如果有人正在阅读本文，这是我最终发现的答案：

short_open_tag = 开启

以上需要在 php.ini 中设置，特别是因为我的所有控制器、模型、助手等都使用短标签（例如 ），这在 Zend 应用程序中很常见。

# javascript - 获取元素的真实背景颜色？

> ID：12576084
> 
> 赞同：15
> 
> 时间：2012-09-25T04:10:31.397
> 
> 标签：javascript, jquery, html, css

目前我想获取指定对象的**真实背景颜色，在这里，****真实的**意思是人们看到的，例如，给定以下代码：

```
<div id="foo" style="background-color: red">
    I am red
    <span id="bar">
         I have no background, but I am red
    </span>
</div> 
```

的真实背景颜色`#bar`应该是`rbg(255,0,0)`.

这是我到目前为止所拥有的：

```
function color_visible(color_str) {
  return color_str && !(color_str.substr(0, 4) == "rgba" && color_str.substr(-2, 2) == "0)");
}

function get_bgcolor (obj) {
  var ret = $(obj).css("background-color");
  if (!color_visible(ret)) ret = $(obj).css("bgcolor");
  if (color_visible(ret)) return ret;
  if (!$(obj).is("body")) return get_bgcolor($(obj).parent());
  return "rgb(255, 255, 255)";
} 
```

但是有没有更好的方法呢？

### Stack Snippet 和[jsFiddle中的演示](http://jsfiddle.net/bRPQU/)

```
function color_visible(color_str) {
  return color_str && !(color_str.substr(0, 4) == "rgba" && color_str.substr(-2, 2) == "0)");
}

function get_bgcolor (obj) {
  var ret = $(obj).css("background-color");
  if (!color_visible(ret)) ret = $(obj).css("bgcolor");
  if (color_visible(ret)) return ret;
  if (!$(obj).is("body")) return get_bgcolor($(obj).parent());
  return "rgb(255, 255, 255)";
}

console.log(get_bgcolor($("#bar")));
console.log(get_bgcolor($("#baz")));
console.log(get_bgcolor($("#foo")));
console.log(get_bgcolor($("body")));
```

```
body {
  background-color: yellow;
}

.bg_white {
  background-color: #FFF;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div>
  <div id="foo" style="background-color: red">
    I am red
    <span id="bar">
      I have no background
    </span>

    <span id="baz" class="bg_white">
      I am white
    </span>
  </div>
  I am yellow
</div>
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-01-15T17:05:34.557

仅 Javascript 版本：

```
function realBackgroundColor(elem) {
    var transparent = 'rgba(0, 0, 0, 0)';
    var transparentIE11 = 'transparent';
    if (!elem) return transparent;

    var bg = getComputedStyle(elem).backgroundColor;
    if (bg === transparent || bg === transparentIE11) {
        return realBackgroundColor(elem.parentElement);
    } else {
        return bg;
    }
}
realBackgroundColor(document.querySelector('#element')); // rgb(255, 255, 255) 
```

[http://jsfiddle.net/qnLwsr7y/](http://jsfiddle.net/qnLwsr7y/)

请注意，它不考虑不透明度或背景图像。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T04:14:54.123

尝试这个：

```
var get_bgcolor = function(obj) {
    var real = obj.css('background-color');
    var none = 'rgba(0, 0, 0, 0)';
    if (real === none) {
        return obj.parents().filter(function() {
            return $(this).css('background-color') != none
        }).first().css('background-color');
    } else {
        return real
    }
} 
```

[http://jsfiddle.net/bqkwN/](http://jsfiddle.net/bqkwN/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-16T15:21:18.357

尝试[`window.getComputedStyle`](https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle)：

```
window.getComputedStyle(element, null).getPropertyValue("background-color") 
```

这种方法简单原生，但[不支持 IE8](https://caniuse.com/#feat=getcomputedstyle)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-09-07T22:10:43.603

这是一件很难做到的事情:(而且我相信在所有情况下都不可能得到 100% 正确的结果。

背景颜色不被继承。getComputedStyle 仅返回 elem.style.backgroundColor 中的内容（如果存在），否则返回从加载的 css 样式表派生的内容。如果这两个仍然没有返回值，它会返回`rgba(0, 0, 0, 0)`，在这种情况下你需要爬上 DOM 来查看父元素有什么。这在框架的情况下更加复杂，这些框架可以从它们后面的（即顶部）框架中获得它们的背景。

这是一个尝试：

```
const getCbgcolor = (elem) => {
  if (!getCbgcolor.top) getCbgcolor.top= (() => { 
    try { return window.top.document.documentElement; } catch(e) { return null; /* CORS */}})()
  });

  while (true) {
    let cbg=window.getComputedStyle(elem).getPropertyValue('background-color');
    if (cbg && cbg!='rgba(0, 0, 0, 0)' && cbg!='transparent') return cbg;
    if (elem===getCbgcolor.top) return 'initial';
    elem = elem.parentElement;
    if (!elem) return '';
  }
} 
```

（一个问题是，如果有人明确地将元素的背景设置为`rgba(0, 0, 0, 0)`元素的样式或 css 样式表，您可能需要该值而不是计算的值，该值不适用于此代码。）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-25T04:18:15.333

尝试这个：

```
function hexc(colorval) {
    var parts = colorval.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
    delete(parts[0]);
    for (var i = 1; i <= 3; ++i) {
        parts[i] = parseInt(parts[i]).toString(16);
        if (parts[i].length == 1) parts[i] = '0' + parts[i];
    }
    color = '#' + parts.join('');
}

var color = '';
$('div#foo').click(function() {
    var x = $(this).css('backgroundColor');
    hexc(x);
    alert(color);
}) 
```

# ios6 - iPhone 5 下的简历上短暂显示的默认图片

> ID：12576087
> 
> 赞同：2
> 
> 时间：2012-09-25T04:11:07.347
> 
> 标签：ios6, xcode4.5, iphone-5, default.png

我正在 Xcode 4.5 中准备我的应用程序的新版本，以解决 iOS 6 引入的一些问题，但我还不支持新的屏幕分辨率。我在 iPhone 5 上看到的一个问题是，在恢复应用程序时，默认图像会在恢复状态出现之前显示十分之几秒。通常，恢复状态会立即显示。过渡不是动画的，所以它很刺耳，我想修复它。我没有看到以下任何问题：

1.  iPhone 5 以外的设备
2.  Xcode 4.3 中构建的相同代码库
3.  包含 Default-568h@2x.png 的相同构建

所以它似乎特定于 iOS 6 + iPhone 5 + 没有 Default-568h@2x.png。有谁知道解决这个问题？

# jquery - 更新 jquery fullcalendar(arshaw's) 中的事件

> ID：12576088
> 
> 赞同：0
> 
> 时间：2012-09-25T04:11:10.793
> 
> 标签：jquery, ruby-on-rails-3.1, fullcalendar

我通过做一个项目管理系统来学习 ROR。如果项目经理通过从日期选择器中选择截止日期将任务分配给团队成员，并且一旦保存，它应该会在 arshaw fullcalendar 中自动更新。我能够保存分配的任务。如何在 jquery 日历中更新它。？对此的任何投入将不胜感激。

# database - Boyce-Codd 范式解释

> ID：12576092
> 
> 赞同：0
> 
> 时间：2012-09-25T04:11:37.777
> 
> 标签：database, set, rdbms, database-normalization, bcnf

根据 Boyce-Codd 范式定义，

如果对于 F+ 中的所有 X -> A -A 是 X 的子集（称为平凡 FD），或者 -X 是 R 的超键，则具有 FD F 的 Reln R 在 BCNF 中。

```
 “R is in BCNF if the only non-trivial FDs over R are key constraints.”

 If R in BCNF, then every field of every tuple records information that 
 cannot be inferred using FDs alone. 
```

我不明白的是上面关于范式的两个陈述，

有人可以给我一个例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-12T09:23:35.700

在我尝试解释之前的一些先决条件：

• ***非关键属性***：不属于任何候选关键的属性称为非关键/非主要属性。

• **Superkey**：表中的一组属性，其值可用于唯一标识一个元组。候选键是识别元组所必需的最小属性集；这也称为最小超级密钥。

现在，BCNF 是 3NF 的高级版本，比 3NF 更严格。

如果每个函数依赖 X → Y，则表在 BCNF 中，**X**是表的**超键**。

```
Consider a relation : R(A,B,C,D)

The dependencies are:

A->BCD

BC->AD

D->B

So, Candidate keys(or minimal super keys) are A and BC.

But in dependency: D->B, D is not a superkey.

Hence it violates BCNF form.

We can break this relation into R1 and R2 as:
R1(A,D,C) and R2(D,B) to get BCNF. 
```

# java - Azure SDK + Java 库 + Eclipse 插件 = 一个迷茫的灵魂

> ID：12576096
> 
> 赞同：2
> 
> 时间：2012-09-25T04:11:58.983
> 
> 标签：java, azure, azure-storage-emulator

我遵循了这些步骤，希望让本地主机上的存储模拟器正常工作。

我正在使用 Windows 8 RTM。

1.  下载[Eclipse](http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/junor)并将其复制到 Program Files。
2.  安装 Java [JDK](http://www.oracle.com/technetwork/java/javase/downloads/jdk7u7-downloads-1836413.html) 7。
3.  已安装 Azure [SDK](http://go.microsoft.com/fwlink/?LinkID=252838&clcid=0x409)。
4.  为 Eclipse安装了 Azure[插件](https://www.windowsazure.com/en-us/develop/java/java-home/download-for-windows/)。
5.  从“开始”屏幕启动存储模拟器。
6.  创建了一个Java项目。
7.  在此项目的 Azure 构建路径中添加了外部[jar 。](http://dl.msopentech.com/lib/PackageForWindowsAzureLibrariesForJava.html)
8.  写了这个简单的示例代码：

    ```
    import com.microsoft.windowsazure.services.blob.client.CloudBlobClient;
    import com.microsoft.windowsazure.services.blob.client.CloudBlobContainer;
    import com.microsoft.windowsazure.services.core.storage.CloudStorageAccount;

    public class AzureStore {
        public static final String storageConnectionString = "DefaultEndpointsProtocol=http;"
                + "UseDevelopmentStorage=true;"
                + "AccountName=devstoreaccount1;"
                + "BlobEndpoint=http://127.0.0.1:10000;"
                + "AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==";

        public static void main(String[] args) throws Exception {
            // Retrieve storage account from connection-string
            CloudStorageAccount storageAccount = CloudStorageAccount
                    .parse(storageConnectionString);

            // Create the blob client
            CloudBlobClient blobClient = storageAccount.createCloudBlobClient();
            // Get a reference to a container
            // The container name must be lower case
            CloudBlobContainer container = blobClient
                    .getContainerReference("tweet");

            try {
                // Create the container if it does not exist
                System.out.println(container.createIfNotExist());
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    } 
    ```

它给出了以下例外：

```
com.microsoft.windowsazure.services.core.storage.StorageException: The value for one of the HTTP headers is not in the correct format.
at com.microsoft.windowsazure.services.core.storage.StorageException.translateException(StorageException.java:104)
at com.microsoft.windowsazure.services.blob.client.CloudBlobContainer$2.execute(CloudBlobContainer.java:334)
at com.microsoft.windowsazure.services.blob.client.CloudBlobContainer$2.execute(CloudBlobContainer.java:291)
at com.microsoft.windowsazure.services.core.storage.utils.implementation.ExecutionEngine.executeWithRetry(ExecutionEngine.java:110)
at com.microsoft.windowsazure.services.blob.client.CloudBlobContainer.createIfNotExist(CloudBlobContainer.java:339)
at com.microsoft.windowsazure.services.blob.client.CloudBlobContainer.createIfNotExist(CloudBlobContainer.java:257)
at AzureStore.main(AzureStore.java:26) 
```

在这一点上我很困惑，因为可能是错的。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:25:10.887

更多关于[URI](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URI.html)类

看看下面是否适合你。

```
URI BlobEndPoint = new URI("http://127.0.0.1:10000/devstoreaccount1");

CloudBlobClient bClient = new CloudBlobClient(BlobEndPoint, new StorageCredentialsAccountAndKey(AccountName,
                AccountSecurityKey)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:29:39.777

我认为错误是由于 API 中的存储服务版本不正确而发生的。在您的代码中，您尝试在开发存储中创建一个 blob 容器。“x-ms-version”请求标头值作为“2012-02-12”发送，虽然是最新的，但仍不受开发存储支持。开发存储仍支持“2011-08-18”。

如果您针对云存储尝试您的代码，您应该能够创建该 blob 容器。

如果您只是针对开发存储进行开发，您可以做的一件事是从 GitHub (https://github.com/WindowsAzure/azure-sdk-for-java/downloads) 下载源代码并修改以下行Constants.java 中的代码

```
public static final String TARGET_STORAGE_VERSION = "2012-02-12"; 
```

到

```
public static final String TARGET_STORAGE_VERSION = "2011-08-18"; 
```

and compile the source code again. This may break some new functionality introduced in the latest service release (like asynchronous copy blobs etc.)

Other alternative is to wait out for the new SDK to come out and hope that the emulator in that version support the latest storage service version.

# c++ - 从整数数组初始化向量的程序。Cout 出错了？

> ID：12576100
> 
> 赞同：1
> 
> 时间：2012-09-25T04:12:19.150
> 
> 标签：c++, arrays, vector

是添加的第一个元素`arr1`吗？ `cout`给我一个错误。我究竟做错了什么？

```
#include <iostream>
using std::cin; using std::cout; using std::endl;

#include <string>
using std::string;

#include <vector>
using std::vector;

#include <cstddef>
using std::size_t;

int main ()
{
    vector <int> ivec1; //defines a vector named ivec1 to hold values not yet defined
    int arr1 [5] = {10, 20, 30 , 40, 50}; // defines array named arr1 with 5 values
    ivec1.push_back (arr1 [0]);
    cout << ivec1 << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:25:48.673

答案很简单：您调用的操作根本没有定义。IO 流库完全不知道 C++ 标准库容器（除了`std::string`），也不知道如何打印它们。你需要自己做。

```
std::vector<int> v;
for(auto& x : v)
  std::cout << v << " "; // print each element
std::cout << std::endl; // and a linebreak 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:44:32.423

我猜 cout 不能使用向量。我会实现这样的东西（我为我的 C++ 感到抱歉，我自 2006 年以来就没有用 C++ 编写过......

```
#include "stdafx.h"

#include <iostream>
using std::cin; using std::cout; using std::endl;

#include <string>
using std::string;

#include <vector>
using std::vector;

#include <cstddef>
using std::size_t;

void fillVector(int output[], vector<int>& input, int size)
{
    for(int i=0;i<size; i++)
    {
        input.push_back(output[i]);
    }
}

void printVector(vector<int>& input)
{
    for(int i=0; i<input.size(); i++)
    {
        cout << input.at(i);
        if(i!=input.size()-1)
        {
            cout << ",";
        }
    }
    cout << endl;
}

int main ()
{
    vector <int> ivec1; //defines a vector named ivec1 to hold values not yet defined
    int arr1 [5] = {10, 20, 30 , 40, 50}; // defines array named arr1 with 5 values
    int sz = sizeof(arr1) / sizeof(int);

    fillVector(arr1, ivec1, sz);

    printVector(ivec1);

    return 0;
} 
```

# atl - 为什么在 ATL 中永远不会调用 OnFinalMessage？

> ID：12576102
> 
> 赞同：0
> 
> 时间：2012-09-25T04:12:55.303
> 
> 标签：atl, assert

我正在使用 ATL 构建我的软件。我创建了一个包含多个子窗口的主框架窗口。其中一个子窗口也包含一些 chinden 窗口。

现在，我的应用程序总是会出现断言失败：

```
 virtual ~CWindowImplRoot()
    {
#ifdef _DEBUG
        if(m_hWnd != NULL)  // should be cleared in WindowProc
        {
            ATLTRACE(atlTraceWindowing, 0, _T("ERROR - Object deleted before window was destroyed\n"));
            ATLASSERT(FALSE);
        }
#endif //_DEBUG
    } 
```

我为任何窗口定义了 WM_NCDESTROY 处理程序并设置 bHanded=FALSE，代码可以到达那里。

此外，我添加了 OnFinalMessage 覆盖功能。不幸的是，不能调用所有函数。实际上，顶层窗口的 OnFinalMessage 会被调用，中层窗口的 OnFinalMessage 可能不会被调用，底层窗口的 OnFinalMessage 永远不会被调用。

我观察ATL的源代码：

```
template <class TBase, class TWinTraits>
LRESULT CALLBACK CWindowImplBaseT< TBase, TWinTraits >::WindowProc(
    _In_ HWND hWnd,
    _In_ UINT uMsg,
    _In_ WPARAM wParam,
    _In_ LPARAM lParam)
{
    CWindowImplBaseT< TBase, TWinTraits >* pThis = (CWindowImplBaseT< TBase, TWinTraits >*)hWnd;
    // set a ptr to this message and save the old value
    _ATL_MSG msg(pThis->m_hWnd, uMsg, wParam, lParam);
    const _ATL_MSG* pOldMsg = pThis->m_pCurrentMsg;
    pThis->m_pCurrentMsg = &msg;
    // pass to the message map to process
    LRESULT lRes = 0;
    BOOL bRet = pThis->ProcessWindowMessage(pThis->m_hWnd, uMsg, wParam, lParam, lRes, 0);
    // restore saved value for the current message
    ATLASSERT(pThis->m_pCurrentMsg == &msg);

    // do the default processing if message was not handled
    if(!bRet)
    {
        if(uMsg != WM_NCDESTROY)
            lRes = pThis->DefWindowProc(uMsg, wParam, lParam);
        else
        {
            // unsubclass, if needed
            LONG_PTR pfnWndProc = ::GetWindowLongPtr(pThis->m_hWnd, GWLP_WNDPROC);
            lRes = pThis->DefWindowProc(uMsg, wParam, lParam);
            if(pThis->m_pfnSuperWindowProc != ::DefWindowProc && ::GetWindowLongPtr(pThis->m_hWnd, GWLP_WNDPROC) == pfnWndProc)
                ::SetWindowLongPtr(pThis->m_hWnd, GWLP_WNDPROC, (LONG_PTR)pThis->m_pfnSuperWindowProc);
            // mark window as destryed
            pThis->m_dwState |= WINSTATE_DESTROYED;
        }
    }
    if((pThis->m_dwState & WINSTATE_DESTROYED) && pOldMsg== NULL)
    {
        // clear out window handle
        HWND hWndThis = pThis->m_hWnd;
        pThis->m_hWnd = NULL;
        pThis->m_dwState &= ~WINSTATE_DESTROYED;
        // clean up after window is destroyed
        pThis->m_pCurrentMsg = pOldMsg;
        pThis->OnFinalMessage(hWndThis);
    }else {
        pThis->m_pCurrentMsg = pOldMsg;
    }
    return lRes;
} 
```

在上面的代码中，变量“pOldMsg”的目的是指示调用堆栈级别。如果“pOldMsg”不等于NULL，则表示不返回调用堆栈。当它为NULL时，表示调用栈在最外层，此时我们可以调用OnFinalMessage函数了。

就我而言，有时“pOldMsg”似乎永远不会等于 NULL。

聊天：

```
 MainFrame                         V
     |----- ViewDevices              V
     |----- ViewContainer            X
              |----- ViewBooks       X
              |----- ViewFiles       V 
```

经过多次测试，我发现，如果我没有在 ViewBooks(ListView) 窗口中添加任何内容，则一切正常。一旦我只添加一行，这个问题就会重现。我不知道跨线程发送消息是否会导致问题。

有人可以给我一些建议吗？

# java - 如何按位置设置列表视图中特定项目的背景颜色？

> ID：12576103
> 
> 赞同：5
> 
> 时间：2012-09-25T04:12:57.660
> 
> 标签：java, android, mobile

我想在列表视图中设置特定项目的背景颜色。

我的列表视图是由 ArrayAdapter 使用 ArrayList 生成的。

我计划更改背景颜色的列表视图中有一个特定项目。

我知道该项目在列表中的位置。

这是我生成列表视图的代码。

```
respondMessageListView = (ListView) findViewById(R.id.respondMessageListView);
respondMessageListView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, autoRespondMessages.getMessages())); 
```

谢谢！

[编辑]

根据[这篇文章](https://github.com/johannilsson/android-pulltorefresh/issues/26)，如果在 onCreate() 中使用 setSelection，则使用 setSelection 无效，解决方法是“删除中的方法`onAttachedToWindow`” `PullToRefreshListView`。我不太了解解决方案。请问我应该如何做到这一点？我是 的子类`Activity`，所以我不能再将任何其他类子类化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:16:34.047

您必须继承`ArrayAdapter`并覆盖[getView(...)](http://developer.android.com/reference/android/widget/ArrayAdapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)方法。为简单起见，您可以直接调用基类实现并为返回的`View`.

编辑：以下示例将项目的背景颜色交替为黑色和白色。

```
private class MyAdapter extends ArrayAdapter {

    ...

    public View getView(int position, View convertView, ViewGroup parent) {
        View v = super.getView(position, convertView, parent);
        v.setBackgroundColor(position % 2 == 0 : 0xff000000, 0xffffffff);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:21:26.867

此代码适用于您选择列表项时。

试试这个代码...

```
listview.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> myAdapter, View myView, int pos, long mylng) {

             if( pos == 1) {
                   // to change the listview background
                   listview.setBackgroundColor(getResources().getColor(R.color.your_color_id));

                   // to change the selected item background color
                   myView.setBackgroundColor(getResources().getColor(R.color.your_color_id));
             }
            }
          }); 
```

祝你好运。

# jquery - 我应该在我的 jQuery 语句的末尾放置一个分号吗？

> ID：12576106
> 
> 赞同：1
> 
> 时间：2012-09-25T04:13:27.637
> 
> 标签：jquery

> **可能重复：**
> [您是否建议在 JavaScript 中的每个语句后使用分号？](https://stackoverflow.com/questions/444080/do-you-recommend-using-semicolons-after-every-statement-in-javascript)

我有这样的代码：

```
$("#delete_" + row)
   .attr('data-href', '/Admin/' + tab + 's/Delete' + params)
   .attr('title', 'Delete ' + id); 
```

这是我在应用程序中随处可见的典型代码。我注意到的是，它似乎可以在末尾使用或不使用分号。格式化有什么好处吗？或者我应该在最后加上分号的任何其他原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T04:17:25.707

***总是***放分号。它不仅更兼容跨浏览器，而且更容易缩小（删除换行符是其中的一部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T04:17:08.943

Javascript 中不需要分号，但是，强烈建议将分号放入其中，而不是依赖解析器在某些情况下做正确的事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T04:19:05.000

JavaScript 支持[自动插入分号](http://es5.github.com/#x7.9)，但一般[建议避免使用](http://benalman.com/news/2012/04/semicolons-required-in-javascript/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T04:19:19.577

分号虽然在 JavaScript 中不是必需的，但表示语句的结尾。因此，以分号结尾的语句是一个好习惯。还有一点，爆丸已经提到了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T04:19:48.907

是的，您应该在 JavaScript 中的每条语句后使用分号。

它们不是必需的，但我个人使用它们，因为大多数缩小技术都依赖于分号

这个答案和[它的反面](https://stackoverflow.com/questions/444080/do-you-recommend-using-semicolons-after-every-statement-in-javascript#444084)旨在作为一项民意调查。投票给你同意的那个，然后如果你愿意，可以发布一个带有你理由的答案。

# ios - NSMutableDictionary 缓存和/或大小限制

> ID：12576108
> 
> 赞同：1
> 
> 时间：2012-09-25T04:13:30.187
> 
> 标签：ios, caching, limit, game-center

我正在使用 NSMutableDictionary 来缓存我从 Game Center 中提取的高分（按 GC 排名存储分数作为键）。只要用户在 tableview 中查看该行，就会发生拉动。如果有一百万行并且用户查看了所有行，这意味着缓存会填满一百万行......好吧，实际上我想如果有一百万人玩我的游戏但仍然继续玩我会很高兴为了安全起见，我想限制进入 NSMutableDictionary 的行数。

有人在这里有一个简单的方法吗？也许字典以外的另一种结构会很有用。我的想法是从字典中删除最旧的条目，并且从当前的 tableview 中删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:34:24.090

看了看`NSCache`？*･゜ﾟ･* :.｡..｡.:*･'(*ﾟ▽ﾟ</em>)'･<em>:.｡. .｡.:*･゜ﾟ･*

# php - 遍历数组中已知数量的元素并获取关键 PHP

> ID：12576111
> 
> 赞同：2
> 
> 时间：2012-09-25T04:13:57.817
> 
> 标签：php, arrays, for-loop

我有一个网站，我正在使用 php 从数组中打印键和值

```
$array = array(
    "gfo"   => "Fondant",
    "gdo"   => "Domino",
    "ges"   => "Espir",
    "gam"   => "Amara",
    "gsa"   => "Sandwich",
    "gme"   => "Merme",
    "cza"   => "Zarza",
    "cor"   => "Oreo",
    "cal"   => "Almen",
    "cca"   => "eche",
    "cch"   => "Chocolate"
); 
```

但我只想在菜单中显示前 6 个元素

```
<li>
<a href="product1.php" style="padding:8px 30px;">Product 1</a>
  <ul>                
     <?php foreach($array as $key=>$val):?>
    <li><a href="http://www.site.com.mx/products.php?id=<?=$key?>"><?=$val?></a></li>
     <?php endforeach;?>
  </ul>
</li> 
```

然后是其他菜单中的其他 5 个元素

```
<li>
<a href="product2.php" style="padding:8px 30px;">Product 2</a>
  <ul>                
     <?php foreach($array as $key=>$val):?>
    <li><a href="http://www.site.com.mx/products.php?id=<?=$key?>"><?=$val?></a></li>
     <?php endforeach;?>
  </ul>
</li> 
```

我知道我可以使用

```
for ($i = 1; $i <= 6; $i++) {
    echo $i;
} 
```

和

```
for ($i = 6; $i <= sizeof($array); $i++) {
    echo $i;
} 
```

但是如何在两个 for 循环中获取键和值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:16:16.517

您可以使用`array_chunk`将数组拆分为两个单独的块，然后遍历每个块：

```
$chunked = array_chunk($array, 6); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T04:19:17.163

尝试使用 slice()

```
$first_array = slice_array($array,0,6);
$second_array = slice_array($array,6,10); 
```

然后做你的行为，你也可以使用

```
$first_array = array_chunk($array,6);
$second_array = array_chunk($array,6,10); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T04:51:52.440

您可以`each`为此使用：

```
$i = 1; reset($array);
// get the first 6
while ($i <= 6 && list($key, $val) = each($array)) {
        echo "$key = $val\n";
        ++$i;
}

// get the rest    
while (list($key, $val) = each($array)) {
        echo "$key = $val\n";
} 
```

或者，您可以使用`array_slice()`但确保保留密钥：

```
$first_six = array_slice($array, 0, 6, true);
$rest = array_slice($array, 6, null, true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T05:17:43.227

使用 array_keys() 和 array_values() 函数

```
$array = array(
    "gfo"   => "Fondant",
    "gdo"   => "Domino",
    "ges"   => "Espir",
    "gam"   => "Amara",
    "gsa"   => "Sandwich",
    "gme"   => "Merme",
    "cza"   => "Zarza",
    "cor"   => "Oreo",
    "cal"   => "Almen",
    "cca"   => "eche",
    "cch"   => "Chocolate"
);
$keys = array_keys($array);
$values = array_values($array);

for ($i = 0; $i < 6; $i++) {
    <li><a href="http://www.site.com.mx/products.php?id=<?=$keys[$i]?>"><?=$values[$i]?></a></li>
} 
```

和

```
for ($i = 6; $i <= sizeof($array); $i++) {
    <li><a href="http://www.site.com.mx/products.php?id=<?=$keys[$i]?>"><?=$values[$i]?></a></li>
} 
```

放入必要的打开/关闭 php 标签

# mysql - 左连接过滤更新行？

> ID：12576113
> 
> 赞同：0
> 
> 时间：2012-09-25T04:14:06.657
> 
> 标签：mysql, sql

我正在尝试更新表，但我需要进行左连接以确定要选择哪些行。

这是我一直在尝试的两个例子，我认为通过看到它们中的任何一个我想很清楚我想要做什么：

```
 UPDATE `User_Likes` 
      SET `Status` = 'read'
LEFT JOIN Posts ON User_Likes.PID = Posts.ID
    WHERE Posts.UID = '1' 
```

在这里我尝试另一种方式：

```
UPDATE `User_Likes` 
   SET `Status` = 'read' 
 WHERE `ID` IN (SELECT Posts.ID
                  FROM `User_Likes`
             LEFT JOIN Posts ON User_Likes.PID = Posts.ID
                 WHERE Posts.UID = '$userID') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:22:21.543

看看这个例子

```
UPDATE User_Likes
LEFT JOIN
Posts ON User_Likes.PID = Posts.ID 
SET Status='read'
WHERE Posts.UID = '1' ; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/38a399/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:31:19.430

您的查询的问题是 Id 只需要一个 Id，而您的 select 语句返回多个 ID。所以：

```
UPDATE `User_Likes` 
   SET `Status` = 'read'
FROM `User_Likes`
LEFT JOIN Posts ON User_Likes.PID = Posts.ID
WHERE Posts.UID = '$userID' 
```

像这样的东西。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:26:32.403

```
UPDATE `User_Likes` u LEFT JOIN Posts p 
ON u.User_Likes.PID = p.Posts.ID
SET `Status` = 'read'
WHERE p.Posts.UID = '1' 
```

# django - Django/Postgres：LIMIT 查询集的性能问题

> ID：12576115
> 
> 赞同：1
> 
> 时间：2012-09-25T04:14:19.967
> 
> 标签：django, performance, limit, django-queryset

我遇到了一个奇怪的查询性能问题，我很难理解。

以下是我所拥有的模型结构的简化版本，希望足以说明问题：

```
class Note(models.Model):
   ...
   name = models.CharField(max_length=50)
   parentNote = models.ForeignKey('self', null=True)
   form = models.ForeignKey('NoteForm', null=True)
   ...

class Event(Note):
   ...
   startDate = models.DateField()
   ...

class Activity(Event):
   ... 
```

该`Activity`模型是我面临的问题的根源。它具有广泛的继承层次结构，其中没有一个是抽象的。我不知道这是否会导致问题。`Activity`有大约 280000 条记录，显然，它的父母至少有这么多，如果不是更多的话。

NoteForm 模型在上面没有描述——只需要知道它在`Activity`模型的层次结构之外并且包含少于 100 条记录。

我正在使用 Django 1.3 版。

查询某个父 Activity 的最新“子”Activity 时会出现问题。查询按字段过滤`parentNote`，按“startDate”字段（降序）排序，并使用 Python 的索引表示法选择第一个结果（据我了解，它只是添加`LIMIT 1`到生成的 SQL 中）。请参阅下面的代码。

*未找到结果时，*此查询运行异常缓慢- 10 多秒。如果找到结果，它将按预期运行 - 不到 1 秒。

进一步调查发现：

*   这是导致问题的限制。只做过滤，不限于第一个结果，并不慢——不管结果是否找到。
*   订购部分是罪魁祸首。删除排序消除了问题。
*   过滤器`parentNote`部分是罪魁祸首。更改过滤器以使用`form`or`name`字段可以消除问题。

在代码中：

```
# Original - SLOW
try:
    latest = Activity.objects.filter(
        parentNote=activity.pk
    ).order_by('-startDate')[0]
except IndexError:
    latest = None

# FAST

# No limit
Activity.objects.filter(
    parentNote=activity.pk
).order_by('-startDate')

# No ordering
try:
    latest = Activity.objects.filter(
        parentNote=activity.pk
    )[0]
except IndexError:
    latest = None

# Different filter
try:
    latest = Activity.objects.filter(
        form=activity.pk
    ).order_by('-startDate')[0]
except IndexError:
    latest = None

# Different filter
try:
    latest = Activity.objects.filter(
        name=activity.pk
    ).order_by('-startDate')[0]
except IndexError:
    latest = None 
```

如果问题出在数据库级别，我看不到它。`django-debug-toolbar`我已经在's 中运行了上面的“原始”和“无限制”示例 `debugsqlshell`。“Original”耗时 16 秒，“No Limit”耗时 59ms。我复制了由 pgAdmin 打印的两个查询 `debugsqlshell` 并在 pgAdmin 中运行它们。“原始”耗时 1375 毫秒，“无限制”耗时 94 毫秒。所以它更慢，但不是我使用 ORM 看到的数量。`EXPLAIN ANALYZE` 绝对显示查询分析器采用不同的路径，我完全理解。但我无法直接使用 SQL 重现 16 秒查询。

所以，总结一下：

*   我看到 LIMIT 查询的运行速度比没有 LIMIT 的相同查询慢得多，但只有在没有找到结果的情况下。
*   返回结果的查询不会运行缓慢 - 除了过滤器的值之外，它们是相同的。
*   它似乎是过滤器中包含哪些字段以及查询集是否已排序的函数。
*   它似乎不是数据库级别的问题，因为直接运行 SQL 不会运行缓慢。

**更新：**

在尝试评论中提出的建议时，上述示例突然不再受此问题的困扰 - 在我找到任何有关原因的证据之前，更不用说实施修复了。我仍然不知道问题是什么，但现在我没有办法重现它以便进一步调查。

# javascript - 事件冒泡/捕获 - 它从哪里开始/结束？

> ID：12576116
> 
> 赞同：7
> 
> 时间：2012-09-25T04:14:25.990
> 
> 标签：javascript, dom-events, event-bubbling

我知道一个事件有两种模式——冒泡和捕获。

当事件设置为冒泡时，Javascript 是否会检查“文档”？

当事件设置为捕获时，Javascript 是否总是从“文档”开始？

Javascript 如何知道在哪里停止/开始？

假设我的正文标签中有以下代码。

```
<div id='outer'>
    <div id='inner'></div>
</div> 
```

当我将事件设置`#inner`为冒泡时，Javascript 是检查文档还是停止`#outer`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T05:31:21.237

来自 W3C[文档对象模型事件](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-flow)

我知道我在吹毛求疵，但处理您描述的事件的不是 javascript，而是 DOM 引擎（文档对象模型）。在浏览器中，javascript 和 DOM 引擎之间存在绑定，因此可以将事件传播到 javascript，但不限于 javascript。例如 MSIE 支持 BASIC。

> 当事件设置为冒泡时，Javascript 是否会检查“文档”？

[1.2.3](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-flow-bubbling) “这种向上传播将持续到并包括文档”

“任何事件处理程序都可以选择通过调用 Event 接口的 stopPropagation 方法来阻止进一步的事件传播。如果任何 EventListener 调用此方法，当前 EventTarget 上的所有其他 EventListener 都将被触发，但在该级别将停止冒泡”

> 当事件设置为捕获时，Javascript 是否总是从“文档”开始？

[1.2.2](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-flow-capture) “捕获从树的顶部操作，通常是文档，”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T04:44:53.093

~~**事件冒泡**~~

JavaScript 一直检查到文档。如果您在文档上添加一个侦听器，在内部添加一个侦听器，则两个侦听器都会触发。

**事件捕获**

~~JavaScript 从文档开始，一直到内部。如果您在文档上添加一个侦听器，在内部添加一个侦听器，则两个侦听器都会触发。~~

**我的发现**

事实证明，浏览器做了某种智能处理，所以它

a) 不必遍历整个父层次结构

和

b) 不必遍历所有事件。

**证明**

a) 当点击内部 div 时，浏览器没有时间触发两个点击事件：

[小提琴](http://jsfiddle.net/2rVnh/)

b) 当存在许多附加到不在父层次结构中的其他 DOM 元素的其他事件时，当点击内部 div 时，浏览器没有时间触发两个点击事件：

[小提琴](http://jsfiddle.net/wsSZt/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T05:07:08.213

部分回答..

1 - 当事件设置为冒泡时，Javascript 是否检查“文档”？

如果层次结构中的元素之一决定通过调用 stopPropagation() 来停止冒泡，则不会

# java - html文件的lucene索引

> ID：12576119
> 
> 赞同：4
> 
> 时间：2012-09-25T04:14:53.690
> 
> 标签：java, search, indexing, lucene

亲爱的用户我正在使用 apache lucene 进行索引和搜索。我必须索引存储在计算机本地磁盘上的 html 文件。我必须对 html 文件的文件名和内容进行索引。我能够将文件名存储在 lucene 索引中，但不能存储 html 文件内容，它不仅应该索引数据，还应该索引包含图像链接和 url 的整个页面，以及如何从这些索引文件中访问内容以进行索引我正在使用以下代码：

```
 File indexDir = new File(indexpath);
    File dataDir = new File(datapath);
    String suffix = ".htm";
    IndexWriter indexWriter = new IndexWriter(
            FSDirectory.open(indexDir),
            new SimpleAnalyzer(),
            true,
            IndexWriter.MaxFieldLength.LIMITED);
    indexWriter.setUseCompoundFile(false);
    indexDirectory(indexWriter, dataDir, suffix);

    numIndexed = indexWriter.maxDoc();
    indexWriter.optimize();
    indexWriter.close();

private void indexDirectory(IndexWriter indexWriter, File dataDir, String suffix) throws IOException {
    try {
        for (File f : dataDir.listFiles()) {
            if (f.isDirectory()) {
                indexDirectory(indexWriter, f, suffix);
            } else {
                indexFileWithIndexWriter(indexWriter, f, suffix);
            }
        }
    } catch (Exception ex) {
        System.out.println("exception 2 is" + ex);
    }
}

private void indexFileWithIndexWriter(IndexWriter indexWriter, File f,
    String suffix) throws IOException {
    try {
        if (f.isHidden() || f.isDirectory() || !f.canRead() || !f.exists()) {
            return;
        }
        if (suffix != null && !f.getName().endsWith(suffix)) {
            return;
        }
        Document doc = new Document();
        doc.add(new Field("contents", new FileReader(f)));
        doc.add(new Field("filename", f.getFileName(),
                Field.Store.YES, Field.Index.ANALYZED));
        indexWriter.addDocument(doc);
    } catch (Exception ex) {
        System.out.println("exception 4 is" + ex);
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T05:00:07.230

这行代码是您的内容未被存储的原因：

```
doc.add(new Field("contents", new FileReader(f))); 
```

此方法不存储被索引的内容。

如果您尝试索引 HTML 文件，请尝试使用[JTidy](http://jtidy.sourceforge.net/)。这将使该过程变得更加容易。

示例代码：

```
public class JTidyHTMLHandler {

    public org.apache.lucene.document.Document getDocument(InputStream is) throws DocumentHandlerException {
        Tidy tidy = new Tidy();
        tidy.setQuiet(true);
        tidy.setShowWarnings(false);
        org.w3c.dom.Document root = tidy.parseDOM(is, null);
        Element rawDoc = root.getDocumentElement();

        org.apache.lucene.document.Document doc =
                new org.apache.lucene.document.Document();

        String body = getBody(rawDoc);

        if ((body != null) && (!body.equals(""))) {
            doc.add(new Field("contents", body, Field.Store.NO, Field.Index.ANALYZED));
        }

        return doc;
    }

    protected String getTitle(Element rawDoc) {
        if (rawDoc == null) {
            return null;
        }

        String title = "";

        NodeList children = rawDoc.getElementsByTagName("title");
        if (children.getLength() > 0) {
            Element titleElement = ((Element) children.item(0));
            Text text = (Text) titleElement.getFirstChild();
            if (text != null) {
                title = text.getData();
            }
        }
        return title;
    }

    protected String getBody(Element rawDoc) {
        if (rawDoc == null) {
            return null;
        }

        String body = "";
        NodeList children = rawDoc.getElementsByTagName("body");
        if (children.getLength() > 0) {
            body = getText(children.item(0));
        }
        return body;
    }

    protected String getText(Node node) {
        NodeList children = node.getChildNodes();
        StringBuffer sb = new StringBuffer();
        for (int i = 0; i < children.getLength(); i++) {
            Node child = children.item(i);
            switch (child.getNodeType()) {
                case Node.ELEMENT_NODE:
                    sb.append(getText(child));
                    sb.append(" ");
                    break;
                case Node.TEXT_NODE:
                    sb.append(((Text) child).getData());
                    break;
            }
        }
        return sb.toString();
    }
} 
```

从 URL 获取 InputStream：

```
URL url = new URL(htmlURLlocation);
URLConnection connection = url.openConnection();
InputStream stream = connection.getInputStream(); 
```

要从文件中获取 InputStream：

```
InputStream stream = new FileInputStream(new File (htmlFile)); 
```

# mysql - Mysql FULLTEXT 使用 GROUP BY 搜索，保留得分最高的行值

> ID：12576128
> 
> 赞同：2
> 
> 时间：2012-09-25T04:15:59.577
> 
> 标签：mysql, group-by, left-join, inner-join, full-text-search

在两次 FULLTEXT 搜索中，我在书名和标签中查找搜索词，得到以下结果：

```
rScore tScore ID
...
1.235689725827653 0 406
0.928482055664062 2.37063312530518 406
0.928482055664062 0 406
0.453363467548853 0 520
...

```

**我想拥有什么，所有重复的 ID 都已连接并获得最高分：**

```
rScore tScore ID
...
1.235689725827653 2.37063312530518 406
0.453363467548853 0 520
...

```

，但在 GROUP BY 之后，ID 406 被分组在此行列中：

```
...
MATCH_SCORE_TITLE MATCH_SCORE_TAGS ID
0.928482055664062 0 406
0.453363467548853 0 520
...

```

如何对所有这些结果进行分组并保持每个 MATCH 的最大值？我知道这已经被问过并且可以通过 JOIN 来完成，但是我没有找到两行的组合，而且我的查询中已经有 JOINS，因为 TITLE 和 TAGS 位于两个不同的表中。

**更新：** 我有 3 个表，“registrants”（带有要搜索的标题的左表）、“registrants_tags”（左右表之间的关系表）和“tags”（带有要搜索的标签的右表。这是 SQL 查询的简化版本：

```
 SELECT
 tags.tag,    (Also tried (GROUP_CONCAT(`tags`.`tag`) AS tags)
 MAX(MATCH(registrants.story_title) AGAINST('bob')) as rScore,
 MAX(MATCH(tags.tag) AGAINST('bob')) as tScore,
 registrants.id, registrants.story_title
FROM registrants 
LEFT JOIN registrants_tags ON registrants.id = registrants_tags.registrant 
LEFT JOIN tags ON registrants_tags.tag = tags.id
WHERE MATCH(registrants.story_title) AGAINST('bob')
 OR MATCH(tags.tag) AGAINST('bob')
GROUP BY registrants.id
ORDER BY (rScore + tScore) DESC 
```

这给了我错误消息：“#1247 - 不支持引用'tscore'（引用组函数）”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:25:18.857

您可以按分数排序，并`max`在子查询上使用 a 来获取最终的首选行。

例如：

```
SELECT  id, story_title,
    max(match_score_title) as titleScore,
    max(match_score_tags) as as tagScore
FROM (
    SELECT
        MATCH(registrants.story_title) AGAINST('bob') as rScore,
        MATCH(tags.tag) AGAINST('bob') as tScore,
        registrants.id, registrants.story_title
    FROM
    registrants 
    LEFT JOIN registrant_tags on registrant_tags.registrant=registrant.id
    LEFT JOIN tags on tags.id=registrant_tags.tag
    WHERE rScore > 0 or tScore > 0
) AS score_matcher
group by ID
ORDER BY (rScore + tScore) DESC 
```

那应该对你有用。它可能不是宇宙中最快的查询，因为它依赖于子查询，根据我的经验，在 MySQL 中这些子查询并没有得到很好的优化，但它应该可以得到你的结果。

您还可以将其重新设计为不同的子查询，以利用以下优势`group_concat`：

```
SELECT
    MATCH(registrants.story_title) AGAINST('bob') as rScore,
    MATCH(tags.tag) AGAINST('bob') as tScore,
    registrants.id, registrants.story_title
FROM
registrants 
LEFT JOIN (
    FROM rtags.registrant, GROUP_CONCACT(DISTINCT tags.tag SEPARATOR ',') as tags
    FROM registrants_tags AS rtags
    INNER JOIN tags on tags.id=registrants_tags.id
    GROUP BY rtags.registrant
) AS grouped_tags ON registrants.id = grouped_tags.registrant 
WHERE rScore > 0 or tScore > 0
ORDER BY (rScore + tScore) DESC 
```

如果在您的数据库中，您将“grouped_tags”字段添加到您的注册人表中，这将有所帮助，然后可以在其中添加一个全文索引 - 这将消除对 grouped_tags 子查询的需要。然后，每当有人更新特定注册人的标签时，grouped_tags 字段就会使用当前正确标签列表进行更新。

如果你按照我的建议添加一个 grouped_tags 字段（在界面中填充），你可以用这个替换整个查询，使用全文索引会非常快（但是全文索引需要使用 MyISAM，这是不太好）。

如果你这样做了，那么这肯定是我在这里列出的最快的查询。

```
SELECT
    MATCH(story_title) AGAINST('bob') as rScore,
    MATCH(grouped_tags) AGAINST('bob') as tScore,
    id, story_title
FROM
registrants 
WHERE rScore > 0 or tScore > 0
GROUP BY ID
ORDER BY (rScore + tScore) DESC 
```

因此，有很多建议可以帮助您进行此查询，您使用哪种解决方案在很大程度上取决于您的数据集的大小以及查询需要多快。我建议做一些基准测试来找到最适合你的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T04:25:32.460

```
SELECT MATCH_SCORE_TITLE, MAX(MATCH_SCORE_TAGS), ID FROM <tablename>........GROUP BY ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T04:18:57.923

您可以将 SELECT DISTINCT ID 与 ORDER BY MATCH_SCORE_TITLE 和 MATCH_SCORE_TAGS 一起使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T14:48:12.023

试试这个模式：

```
SELECT
    *
FROM registrants r1
LEFT JOIN registrants t2 ON r1.id = r2.id AND r1.MATCH_SCORE_TITLE > r2.MATCH_SCORE_TITLE
LEFT JOIN registrants_tags ON r1.registrants.id = registrants_tags.registrant 
LEFT JOIN tags ON registrants_tags.tag = tags.id
WHERE
    r2.id IS NULL AND
    (MATCH(r1.registrants.full_name) AGAINST('bob')
    OR MATCH(tags.tag) AGAINST('bob'))
ORDER BY (tscore + ascore) DESC 
```

[请参阅另一个答案](https://stackoverflow.com/questions/11131237/mysql-can-i-do-a-left-join-and-pull-only-one-row-from-the-join-table/11134161#11134161)`LEFT JOIN`中对技巧的快速解释。

**编辑：**删除了不必要的 GROUP BY 子句。

# jaxb - 用于防止默认值反序列化的 JSONView 示例

> ID：12576130
> 
> 赞同：0
> 
> 时间：2012-09-25T04:16:19.357
> 
> 标签：jaxb, jersey, jax-ws

我有一个简单的类来给出计数和数据库游标信息。

```
public class Cursor
{
    public String cursor = null;
    public int count = -1;
} 
```

如果默认设置为 null 或 -1，我不希望发送计数和光标（在序列化时）。

研究时，我发现我应该使用视图，但我无法弄清楚如何使用它以及视图实现以避免默认值。

此类不需要反序列化。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:03:33.893

如果你使用`Jackson`你可以给

```
@JsonInclude(Include.NON_NULL) 
public class Cursor
{
     public String cursor = null;
     public Integer count = null;
} 
```

当您为该字段提供-1 值时，我已将其更改`int`为。 你也可以查看这篇[文章](https://stackoverflow.com/questions/11449211/how-to-prevent-null-values-inside-a-map-and-null-fields-inside-a-bean-from-getti)。`Integer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:44:23.153

如果您使用的是 2.x，上面的答案是最好的。使用 JSONInclude 注释。

但是，如果您使用的是较小的版本，我认为没有任何注释。我们必须自定义 ObjectMapper。

```
public ObjectMapperProvider()
    {
    mapper = new ObjectMapper();

    mapper.configure(SerializationConfig.Feature.WRITE_NULL_PROPERTIES,
        false);
    mapper.configure(SerializationConfig.Feature.WRITE_NULL_MAP_VALUES,
        false);

    } 
```

在 Web.xml 中

```
 <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
         <init-param>
                <param-name>com.sun.jersey.config.property.packages</param-name>
                <param-value>com.your.package; org.codehaus.jackson.jaxrs</param-value>
            </init-param>
         <load-on-startup>1</load-on-startup>
      </servlet> 
```

com.your.package 应该包含您的新自定义 objectmapper 类。

# mysql - MySQL LOAD XML“SET”参数的语法？

> ID：12576132
> 
> 赞同：0
> 
> 时间：2012-09-25T04:16:25.523
> 
> 标签：mysql, xml

我正在尝试将包含“20120924 22:12”格式的时间戳条目的 xml 文件加载到 MySql 中。

我正在使用 LOAD XML 功能。当然它不起作用，因为 MySQL 期待“2012-09-24 22:12”。如果我使用的是 LOAD FILE 我会添加

```
SET tmstmp = str_to_date(@var3, '%Y%m%d %h:i%')} 
```

到我的命令，其中 tmstmp 数据位于磁贴的第 3 列。所以对于 XML 我想使用

```
SET tmstmp = str_to_date(@tmstmp, '%Y%m%d %h:i%')} 
```

其中 tmstmp 是包含我的时间戳数据的标签。但这不起作用。@tmstmp 为空。如何在 LOAD XML 下访问 SET 语句中的标签？MySQL 文档只是遵循 LOAD FILE 文档，但它当然不存在。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:27:00.893

格式错误（`i%`必须是`%i`）。因此，更改`'%Y%m%d %h:i%'`并`'%Y%m%d %h:%i'`尝试再次加载数据。

也`%h`应该是`%H`因为你使用 24 小时制。

# windows - Windows 无法使用现代显卡/驱动程序进入极低分辨率视频模式

> ID：12576136
> 
> 赞同：0
> 
> 时间：2012-09-25T04:16:39.503
> 
> 标签：windows, video, directx, fullscreen, drivers

我有一堆为 Windows XP 时代编译的 Windows 32 位全屏 EXE，并使用某些版本的 DirectX 来设置图形模式：320x240x8。它是硬编码的、原生的（不以任何方式伪造），并且无法以任何方式触摸、重新编译或修改二进制文件（不要问）。

我试图让这些在 Windows 7 及更高版本上运行（如果没有正确的卡和驱动程序，它甚至无法在 XP 上运行，只是为了消除任何混乱）。它们仅在显卡及其驱动程序特别支持此模式时才会运行，无论是在 XP 还是 7 上运行，这种情况都极为罕见。

这个问题我研究了很久，无数次向专家寻求帮助，得到了各种可能的解决方案，我都一一尝试过。他们每个人都失败并出现相同的错误：无法设置视频模式。问题始终是它无法设置视频模式。显而易见的解决方案是它无法尝试设置视频模式，因为它不受支持。所以我需要一些可以与这些 EXE 捆绑在一起的小型 EXE，并且可以设置为“环绕”它并欺骗它认为它实际上是在设置模式，而它实际上是在某种模拟视频窗口中运行.

我尝试过“Windows 上的 Wine”、“更改分辨率”的各种实用程序、在 VM 中运行它、兼容性设置等。几乎所有您立即想到的东西。根本没有任何作用。但是即使虚拟机确实有效，它也不会很好，因为它也必须是“可分发的”。

谁能帮我？这甚至有可能解决吗？这似乎很奇怪，以至于不可能“欺骗”程序认为它们确实可以设置视频模式。

我希望真正的专家能够提出一些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:28:10.087

我的驱动程序经验不在视频中，但我认为您应该能够编写一个驱动程序，以您想要的内容响应/拦截 Directx 调用。据我了解，视频堆栈没有[过滤器驱动程序](http://en.wikipedia.org/wiki/Filter_driver)。

但是，这种模拟模式将需要支持我怀疑的大量直接 ex API。当然，除非通话次数非常少。

[显示驱动程序模型 (XDDM) 设计指南](http://msdn.microsoft.com/en-us/library/windows/hardware/ff570584%28v=vs.85%29.aspx)应该是您的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:28:28.323

您可能想尝试一下：http: [//www.makeuseof.com/tag/2-ways-force-directx-applications-launch-windowed-fullscreen-windows/](http://www.makeuseof.com/tag/2-ways-force-directx-applications-launch-windowed-fullscreen-windows/)

**概括**

1.  [DXWIN](http://sourceforge.net/projects/dxwnd/) - 强制 DirectX 程序在窗口中运行。
2.  [D3DWindower](http://www.fileplanet.com/198137/190000/fileinfo/D3DWindower-English-version) -- 非常相似的程序。日本程序的英语端口。

过去我曾使用 DXWIN 来让程序脱离我的硬件无法很好处理的全屏模式。不利的一面是，您会得到一个小窗口。

编辑：两个程序都没有提到在 Windows 7 中运行，当然也没有提到 64 位操作系统。如果其中任何一个有效，请发布解决方案，我会为您投票。

# iphone - 移除对 armv7s 架构的支持是否仍然适用于 iPhone 5 屏幕？

> ID：12576144
> 
> 赞同：4
> 
> 时间：2012-09-25T04:17:43.363
> 
> 标签：iphone, ios, ios6, xcode4.5, iphone-5

我正在使用 Xcode 4.5 并使用基本 SDK、iOS6 并将我的应用程序移植到 iPhone 5。我用于我的应用程序的一些库仍然不是为 armv7s 架构构建的。

移除对 armv7s 架构的支持是否仍然适用于 iPhone 5 屏幕？或者，我会看到黑色信箱吗？不过，它在模拟器上运行良好。想知道是否有人有机会测试这个案例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T05:38:22.080

是的，它应该可以正常工作。您的代码是否会出现信箱的决定因素是`Default-568h@2x.png`图像文件的存在，而不是构建代码的体系结构。

# sql - 选择语句中的sqlite foreach？

> ID：12576148
> 
> 赞同：2
> 
> 时间：2012-09-25T04:18:07.050
> 
> 标签：sql, sqlite

我遇到了 SQLite 选择问题。

有表格“kategorie”、“lv”、“majetok”、“parcela”。

每个人都有关于他在“majetok”表中拥有什么的信息。样本记录：

```
id      idpodfk idlvfk  podiel  podield cislozlv datum1         datum2
1       31      1       1/10000 0,0001  789      16\. 9\. 2012    16\. 9\. 2012 
```

idpodfk-fk 人 id
idlvfk-fk 土地记录 id

还有表LV（土地记录表），样本记录：

```
idlv    lvnazov katuzemie
1       1830    Plavecký Mikuláš 
```

我还使用了“parcela”表，我在其中存储了土地记录中有关地块的信息

```
pnazov  rozloha idlvfk  idkategoriafk typ
5432    692312  1       1             C 
```

和表类别

```
idkategoria  meno 
1            Lesné pozemky 
```

* * *

我需要什么：此选择中的 foreach 记录

```
SELECT   SUM(podield) AS sum1, idlvfk
FROM     majetok a
WHERE    idpodfk = 1
GROUP BY idlvfk 
```

我需要选择这个

```
SELECT     SUM(par.rozloha)*sum1 AS m2, kat.meno --sum1 from statement above
FROM       Parcela par 
INNER JOIN kategorie kat ON par.IDkategoriaFK = kat.IDkategoria
WHERE      par.IDLVFK = 1 --IDLVFK from statement above
GROUP BY   kat.meno 
```

（第二个）查询输出应如下所示

```
m2     kat.meno
123.23 Lesne pozemky    --FOR FIRST IDLVFK
324.52 Ostatne pozemky  --FOR FIRST IDLVFK   
235    Pasienky         --FOR FIRST IDLVFK 
144.23 Lesne pozemky    --FOR NEXT IDLVFK
543.52 Ostatne pozemky  --FOR NEXT IDLVFK
756    Pasienky         --FOR NEXT IDLVFK
.
.
. 
```

然后我需要按 kat.meno 分组，因此最终输出应如下所示：

```
m2     kat.meno
267,46 Lesne pozemky
868,04 Ostatne pozemky
991    Pasienky
.                         --other kat.meno if there is
.                         --other kat.meno if there is 
```

这是否可以在一个查询中进行，还是我需要在前端处理它？

表格和查询背景：

土地记录中有一些地块（每个地块都有自己的类别，例如森林地块等）。人拥有土地记录的一部分（保存在 majetok 表中，例如：1/1000）。这意味着他拥有该土地记录中每个地块的 1/1000。我想为每个类别（SUM(par.rozloha)*sum1 AS m2）选择他拥有的区域（parcela 表中的“rozloha”列）。因此，我们必须计算该土地记录上该类别中所有地块的总和，并乘以拥有该人的部分。但是他可以在一个土地记录上拥有 1/1000，在第二个土地记录上拥有 3/3456（另一个土地记录=另一个地块），所以我们必须为每个土地记录做，总结你可以在最后的代码中看到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:58:41.023

对所有四个表的联接将没有正确数量的总和记录数。

您可以做的是使用子查询代替视图：

```
SELECT SUM(step2.area_sum),
       step2.meno
FROM (SELECT SUM(rozloha) * sum(podield_sum) AS area_sum,
             par.idlvfk,
             meno
      FROM parcela par
      JOIN kategorie kat ON par.idkategoriafk = kat.idkategoria
      JOIN (SELECT SUM(podield) AS podield_sum,
                   idlvfk
            FROM majetok
            GROUP BY idlvfk) AS ps ON ps.idlvfk = par.idlvfk
      GROUP BY idlvfk,
               meno) AS step2
GROUP BY step2.meno 
```

我用 SQL Fiddle 上的示例数据进行了测试：[http ://sqlfiddle.com/#!2/626e6/9](http://sqlfiddle.com/#!2/626e6/9)

# list - Haskell：列表和折叠

> ID：12576149
> 
> 赞同：2
> 
> 时间：2012-09-25T04:18:14.573
> 
> 标签：list, haskell, fold

我有一系列数字：0、1、3、6、10、15，...基本上，你加 1，然后加 2，然后加 3，等等。

我必须创建一个函数，将列表中的这一系列数字返回给定数字 n。我想使用折叠。

所以，系列 5 应该返回 [0, 1, 3, 6, 10, 15]

这是我到目前为止所拥有的：

```
eachElem n = foldl (+) 0 [0..n]

series n = [x | x <- [(eachElem 0), (eachElem 1)..(eachElem n)]] 
```

基本上，我认为列表中的每个元素都是一个 foldl 操作，因此我制作了一个单独的辅助函数 (eachElem) 来完成此操作。

但是，它返回的列表比我想要的要大得多。

例如。系列 3 => [0,1,2,3,4,5,6] 它应该真正返回 [0,1,3,6]

任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T04:23:21.437

[`scanl`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:scanl)更适合您正在做的事情。

它的类型是`scanl :: (a -> b -> a) -> a -> [b] -> [a]`——它的类型签名与`foldl`'s 相同，但它返回一个增量值列表，而不仅仅是最终结果。

我会把剩下的留给你做练习，因为这看起来像是家庭作业。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T05:27:17.290

如果你如此坚持使用`foldl`，你可以做类似的事情

```
series n  = reverse $ foldl f [0] [1..n]
    where f xs@(x:_) y = x+y:xs 
```

在 ghci

```
> series 5
[0,1,3,6,10,15] 
```

但问题`foldl`是你不能创建无限系列。

你可以有无限的系列像

```
series = 0:zipWith (+) series [1..] 
```

然后你可以做类似的事情

```
> take (5+1) series
[0,1,3,6,10,15] 
```

我没有尝试过，但您也可以使用`unfoldr`或类似的概念来构建您的列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T08:13:00.847

scanl 是这里最好的，但如果你必须使用 fold 试试这个

```
 testso :: Integral a => a -> [a]
testso n = reverse $ foldl (\acc x -> head acc + x:acc ) [0] [1,2..n] 

```

输出为 testo 10 [0,1,3,6,10,15,21,28,36,45,55]。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T04:35:36.663

当你写[a,b..c]时，a是第一个元素，c是最后一个元素，b是步长，它是列表中每个元素之间的间隔，如果你省略它，它将默认为1 .

所以让我们看看你的代码，你这样做：

```
 [x | x <- [(eachElem 0), (eachElem 1)..(eachElem n)]] 
```

*   在您的列表理解中， x 将首先取值 (eachElem 0) = 0
*   那么下一个元素将是 (eachElem 0) + (eachElem 1) = 1
*   那么第 i 个元素将是 (eachElem 0) + i*(eachElem 1 - eachElem 0) 只要值 <= (eachElem n)

因此，您的结果： [0,1..(eachElem n)] 产生 [0,1,2,3... 显然不是您所期望的。

正如 amindfv 所建议的，你应该看看 scanl。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T09:33:25.463

你可以作弊:-)

```
series x = foldl (\xs n -> (n*(n+1) `div` 2):xs) [] [x,(x-1)..0] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T05:27:37.803

你的定义`series`是错误的。

`[(eachElem 0), (eachElem 1)..(eachElem n)]`变成`[0, 1, eachElem n]`这实际上是每个数字`eachElem n`。

你实际上想要这样做：

```
series n = [eachElem x | x <- [0..n]] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T13:28:43.213

定义

```
series n = [ x | x <- [(eachElem 0)..(eachElem n)]] 
```

是错的！

例如：

因为

```
eachElem 0 -> 0
eachElem 3 -> 6 
```

系列 3 评估为

```
series 3 -> [(eachElem 0)..(eachElem 3)] -> [0..6] -> [0,1,2,3,4,5,6] 
```

你需要这样的东西

```
series' n = [ eachElem x | x <- [0..n]] 
```

测试：

```
> let series' n = [ eachElem x | x <- [0..n]]
> let series n = [ x | x <- [(eachElem 0)..(eachElem n)]]

> series' 3
> [0,1,3,6]

> series 3
> [0,1,2,3,4,5,6]

> eachElem 0
> 0

> eachElem 3
> 6 
```

# python - Python 模式的 RestrictingWrapper 与元类

> ID：12576151
> 
> 赞同：0
> 
> 时间：2012-09-25T04:18:30.497
> 
> 标签：python, design-patterns, numpy, pandas, metaclass

我正在尝试创建一个阻止某些方法执行的包装器。经典的解决方案是使用这种模式：

```
class RestrictingWrapper(object):
    def __init__(self, w, block):
        self._w = w
        self._block = block
    def __getattr__(self, n):
        if n in self._block:
            raise AttributeError, n
        return getattr(self._w, n) 
```

这个解决方案的问题是每次调用都会引入开销，所以我尝试使用 MetaClass 来完成相同的任务。这是我的解决方案：

```
class RestrictingMetaWrapper(type):
    def __new__(cls, name, bases, dic):
        wrapped = dic['_w']
        block = dic.get('_block', [])

        new_class_dict = {}
        new_class_dict.update(wrapped.__dict__)
        for attr_to_block in block:
            del new_class_dict[attr_to_block]
        new_class_dict.update(dic)

        return type.__new__(cls, name, bases, new_class_dict) 
```

与简单的类完美配合：

```
class A(object):
    def __init__(self, i):
        self.i = i
    def blocked(self):
        return 'BAD: executed'
    def no_blocked(self):
        return 'OK: executed'
class B(object):
    __metaclass__ = RestrictingMetaWrapper
    _w = A
    _block = ['blocked']

b= B('something')
b.no_blocked  # 'OK: executed'
b.blocked     # OK: AttributeError: 'B' object has no attribute 'blocked' 
```

`ndarray`问题来自numpy等“更复杂”的类：

```
class NArray(object):
    __metaclass__ = RestrictingMetaWrapper
    _w = np.ndarray
    _block = ['max']

na = NArray()        # OK
na.max()             # OK: AttributeError: 'NArray' object has no attribute 'max'
na = NArray([3,3])   # TypeError: object.__new__() takes no parameters
na.min()             # TypeError: descriptor 'min' for 'numpy.ndarray' objects doesn't apply to 'NArray' object 
```

我假设我的元类定义不明确，因为其他类（例如：pandas.Series）会遇到奇怪的错误，比如没有阻止指定的方法。

你能找到错误在哪里吗？还有其他想法可以解决这个问题吗？

**更新：** nneonneo 的解决方案效果很好，但似乎包装类可以通过类定义中的一些黑魔法来打破阻塞器。

使用 nneonneo 的解决方案：

```
import pandas

@restrict_methods('max')
class Row(pandas.Series):
    pass

r = Row([1,2,3])
r.max()        # BAD: 3      AttributeError expected 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:29:28.557

`TypeError`正如它在, （和相关功能）中所说的那样，`min`仅适用于 ; 的实例`np.ndarray`。因此，新的子类必须从您要包装的类继承。

然后，由于您扩展了基类，您必须用合适的描述符替换方法：

```
class RestrictedMethod(object):
    def __get__(self, obj, objtype):
        raise AttributeError("Access denied.")

class RestrictingMetaWrapper(type):
    def __new__(cls, name, bases, dic):
        block = dic.get('_block', [])

        for attr in block:
            dic[attr] = RestrictedMethod()

        return type.__new__(cls, name, bases, dic) # note we inject the base class here

class NArray(np.ndarray):
    __metaclass__ = RestrictingMetaWrapper
    _block = ['max'] 
```

注意：企业应用程序仍然可以通过基类方法（例如 ）访问“受限”功能`np.ndarray.max(na)`。

编辑：简化包装器并使其透明地可子类化。

请注意，这一切都可以使用*类装饰器*以更简单的方式完成：

```
class RestrictedMethod(object):
    def __get__(self, obj, objtype):
        raise AttributeError("Access denied.")

def restrict_methods(*args):
    def wrap(cls):
        for attr in args:
            setattr(cls, attr, RestrictedMethod())
        return cls
    return wrap

@restrict_methods('max', 'abs')
class NArray(np.ndarray):
    pass 
```

# java - JPEG 格式的原始数据 - JAVA

> ID：12576152
> 
> 赞同：10
> 
> 时间：2012-09-25T04:18:38.393
> 
> 标签：java, image, apache-flex, jpeg, flex-mobile

我尝试使用 JPEGEncoder 将原始数据 ByteArray 转换为 JPEG 格式，但它在移动设备上速度太慢（我已经在移动设备上测试过）。我怎样才能在java中做同样的事情？我会将原始数据字节发送到 java 并使用 java 将其编码为 JPEG - 我尝试了其中一些作为 com.sun.* 下的 JpegImageEncoder 但它在 jdk7 中已被贬值。我如何在 java 中做到这一点，或者来自做过这样事情的 Flex 移动开发人员的任何建议？

更新：我尝试了以下代码，但得到了一个奇怪的结果：

```
public void rawToJpeg(byte[] rawBytes, int width, int height, File outputFile){

        try{

            BufferedImage bi = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);

            int count = 0; 
            for(int h=0;h<height;h++){
                for(int w=0;w<width;w++){
                    bi.setRGB(w, h, rawBytes[count++]);
                }
            }

            Graphics2D ig2 = bi.createGraphics();

            Iterator imageWriters = ImageIO.getImageWritersByFormatName("jpeg");
            ImageWriter imageWriter = (ImageWriter) imageWriters.next(); 

            ImageOutputStream ios = ImageIO.createImageOutputStream(outputFile);
            imageWriter.setOutput(ios);
            imageWriter.write(bi);

        }catch(Exception ex){
            ex.printStackTrace();
        }

    } 
```

结果：![在此处输入图像描述](../Images/f91cd6a5ff69cc63b2fe4a8f49987feb.png)

PS这应该是我的照片顺便说一句:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T19:48:42.633

为什么不使用`ByteArrayInputStream`with `ImageIO`？

[您可以在API](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html)中找到有关 ImageIO 的更多信息。

```
public static void rawToJpeg(byte[] bytes, File outputFile) {
    try {
        BufferedImage img = ImageIO.read(new ByteArrayInputStream(bytes));
        ImageIO.write(img, "jpg", outputFile);
    } catch (IOException e) {
        // Handle exception
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-03T00:23:16.363

你可以尝试用这个替换你的for循环

```
for(int w = 0; w < width; w++)
{
    for(int h = 0; h < height; h++)
    {
            //alpha should be eiter 0 or 255
            //if you use the wrong value your image will be transparent

            int alpha = 0 << 8*3;
            int red = rawBytes[count*3 + 0] << 8*2;
            int green = rawBytes[count*3 + 1] << 8*1;
            int blue = rawBytes[count*3 + 2] << 8*0;

            int color = alpha + red + green + blue;

            //color is an int with the format of TYPE_INT_ARGB (0xAARRGGBB)

            bi.setRGB(w, h, color);
            count += 3;
    }
} 
```

您的代码可能出错的地方：

1.  您通常逐行而不是逐行编写

2.  您需要读取 3 个字节并构建一个 int，而不是直接在 Pixel (TYPE_INT_ARGB) 中写入字节

此链接解释 TYPE_INT_ARGB： TYPE_INT_RGB 和 TYPE_INT_ARGB 的格式

我希望这会有所帮助并且不会太令人困惑=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-02T12:39:20.503

嗨，我遇到了同样的问题，我将宽度和高度值设置为硬编码让我们说 (300,300) 导致类似的输出。然后我引用了这个链接。 [原始字节 [] 到 jpeg 图像](https://stackoverflow.com/questions/14269148/unable-to-clearly-convert-camera-to-bitmap)，您可以忽略其中的位图部分。我假设您也在硬编码宽度和高度值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T21:38:08.113

`bi.setRGB`采用 4 字节“int”值，即 ARGB 0xAARRGGBB

然后将字节偏移计数器增加 1，因此下一个像素将获得 0xRRGGBBAA，然后是 0xGGBBAARR，依此类推。

假设您传递的 byte[] 是正确的 4 字节格式，您需要每次将 4 添加到“count”，或者更改传递给 int[] 的内容（这实际上更正确，因为它确实包含 int 值）。

# java - 从属性文件中读取列表并使用弹簧注释@Value 加载

> ID：12576156
> 
> 赞同：298
> 
> 时间：2012-09-25T04:19:00.350
> 
> 标签：java, spring, spring-properties

我想在 .properties 文件中有一个值列表，即：

```
my.list.of.strings=ABC,CDE,EFG 
```

并直接将其加载到我的班级中，即：

```
@Value("${my.list.of.strings}")
private List<String> myList; 
```

据我了解，这样做的另一种方法是将它放在 spring 配置文件中，并将其作为 bean 引用加载（如果我错了，请纠正我），即

```
<bean name="list">
 <list>
  <value>ABC</value>
  <value>CDE</value>
  <value>EFG</value>
 </list>
</bean> 
```

但是有没有办法做到这一点？使用 .properties 文件？ps：如果可能的话，我想在没有任何自定义代码的情况下做到这一点。

* * *

## 回答 #1

> 赞同：559
> 
> 时间：2012-09-25T09:41:10.403

使用 Spring EL：

```
@Value("#{'${my.list.of.strings}'.split(',')}") 
private List<String> myList; 
```

假设您的属性文件已正确加载以下内容：

```
my.list.of.strings=ABC,CDE,EFG 
```

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2015-04-30T14:23:15.617

从 Spring 3.0 开始，您可以添加如下行

```
<bean id="conversionService" 
    class="org.springframework.context.support.ConversionServiceFactoryBean" /> 
```

到你的`applicationContext.xml`（或你配置东西的地方）。正如 Dmitry Chornyi 在评论中指出的那样，基于 Java 的配置如下所示：

```
@Bean public ConversionService conversionService() {
    return new DefaultConversionService();
} 
```

这将激活支持转换`String`为`Collection`类型的新配置服务。如果您不激活此配置服务，Spring 将使用其遗留的属性编辑器作为配置服务，不支持这种转换。

转换为其他类型的集合也可以：

```
@Value("${my.list.of.ints}")
private List<Integer> myList 
```

将使用类似的线

```
 my.list.of.ints= 1, 2, 3, 4 
```

那里的空白没有问题，`ConversionServiceFactoryBean`它会照顾它。

见[http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#core-convert-Spring-config](http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#core-convert-Spring-config)

> 在 Spring 应用程序中，您通常为每个 Spring 容器（或 ApplicationContext）配置一个 ConversionService 实例。该 ConversionService 将被 Spring 拾取，然后在框架需要执行类型转换时使用。[...] 如果没有在 Spring 中注册 ConversionService，则使用原始的基于 PropertyEditor 的系统。

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2017-12-01T03:23:55.420

如果您正在阅读本文并且正在使用**Spring Boot**，那么您还有 1 个选项可用于此功能

通常逗号分隔的列表对于现实世界的用例来说非常笨拙（有时甚至不可行，如果你想在你的配置中使用逗号）：

```
email.sendTo=somebody@example.com,somebody2@example.com,somebody3@example.com,..... 
```

使用**Spring Boot**，您可以这样编写（索引从 0 开始）：

```
email.sendTo[0]=somebody@example.com
email.sendTo[1]=somebody2@example.com
email.sendTo[2]=somebody3@example.com 
```

并像这样使用它：

```
@Component
@ConfigurationProperties("email")
public class EmailProperties {

    private List<String> sendTo;

    public List<String> getSendTo() {
        return sendTo;
    }

    public void setSendTo(List<String> sendTo) {
        this.sendTo = sendTo;
    }

}

@Component
public class EmailModel {

  @Autowired
  private EmailProperties emailProperties;

  //Use the sendTo List by 
  //emailProperties.getSendTo()

}

@Configuration
public class YourConfiguration {
    @Bean
  public EmailProperties emailProperties(){
        return new EmailProperties();
  }

}

#Put this in src/main/resource/META-INF/spring.factories
  org.springframework.boot.autoconfigure.EnableAutoConfiguration=example.compackage.YourConfiguration 
```

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2012-09-25T04:57:15.077

通过指定`my.list.of.strings=ABC,CDE,EFG`in .properties 文件并使用

`@Value("${my.list.of.strings}")` `private String[] myString;`

您可以获得字符串数组。并使用`CollectionUtils.addAll(myList, myString)`，您可以获得字符串列表。

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2018-12-05T18:53:59.387

如果您使用的是 Spring Boot 2，它可以按原样工作，无需任何额外配置。

```
my.list.of.strings=ABC,CDE,EFG

@Value("${my.list.of.strings}")
private List<String> myList; 
```

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2012-09-25T04:42:53.137

您是否考虑过在正文中`@Autowired`使用构造函数或设置器和`String.split()`ing？

```
class MyClass {
    private List<String> myList;

    @Autowired
    public MyClass(@Value("${my.list.of.strings}") final String strs) {
        myList = Arrays.asList(strs.split(","));
    }

    //or

    @Autowired
    public void setMyList(@Value("${my.list.of.strings}") final String strs) {
        myList = Arrays.asList(strs.split(","));
    }
} 
```

我倾向于以其中一种方式进行自动装配，以增强代码的可测试性。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2012-09-25T06:57:18.640

以上所有答案都是正确的。但是你可以在一行中实现这一点。请尝试以下声明，您将在字符串列表中获得所有逗号分隔的值。

```
private @Value("#{T(java.util.Arrays).asList(projectProperties['my.list.of.strings'])}") List<String> myList; 
```

您还需要在 xml 配置中定义以下行。

```
<util:properties id="projectProperties" location="/project.properties"/> 
```

只需替换属性文件的路径和文件名。你很高兴。:)

希望这对您有所帮助。干杯。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2018-11-16T04:08:37.083

如果您使用的是最新的 Spring 框架版本（我相信是 Spring 3.1+），则不需要在 SpringEL 中进行字符串拆分，

只需在 Spring 的 Configuration 类中添加 PropertySourcesPlaceholderConfigurer 和 DefaultConversionService （带有注释的 Configuration ），例如，

```
@Configuration
public class AppConfiguration {

    @Bean
    public static PropertySourcesPlaceholderConfigurer propertyPlaceholderConfigurer() {
        return new PropertySourcesPlaceholderConfigurer();
    }

    @Bean public ConversionService conversionService() {
        return new DefaultConversionService();
    }
} 
```

在你的课堂上

```
@Value("${list}")
private List<String> list; 
```

并在属性文件中

```
list=A,B,C,D,E 
```

如果没有 DefaultConversionService，当您将值注入字段时，您只能将逗号分隔的字符串放入字符串数组中，但是 DefaultConversionService 为您做了一些方便的魔术，并将它们添加到 Collection、Array 等中（如果您愿意，请检查实现想了解更多）

有了这两个，它甚至可以处理所有多余的空格，包括换行符，所以你不需要添加额外的逻辑来修剪它们。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2020-04-20T06:31:34.387

我正在使用 Spring Boot 2.2.6

我的财产文件：

```
usa.big.banks= JP Morgan, Wells Fargo, Citigroup, Morgan Stanley, Goldman Sachs 
```

我的代码：

```
@Value("${usa.big.banks}")
    private List<String> bigBanks;

@RequestMapping("/bigbanks")
    public String getBanks() {
        System.out.println("bigBanks = " + bigBanks);
        return bigBanks.toString();
    } 
```

它工作正常

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-09-09T20:58:38.020

你可以用这样的注释来做到这一点

```
 @Value("#{T(java.util.Arrays).asList('${my.list.of.strings:a,b,c}')}") 
    private List<String> mylist; 
```

这里 my.list.of.strings 将从属性文件中选择，如果不存在，则将使用默认值 a,b,c

在你的属性文件中，你可以有这样的东西

my.list.of.strings=d,e,f

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-11-04T10:22:54.363

*注意值中的空格。*我可能是错的，但我认为逗号分隔列表中的空格不会使用@Value 和 Spel 截断。名单

```
foobar=a, b, c 
```

将作为字符串列表读入

```
"a", " b", " c" 
```

在大多数情况下，您可能不想要空格！

表达方式

```
@Value("#{'${foobar}'.trim().replaceAll(\"\\s*(?=,)|(?<=,)\\s*\", \"\").split(',')}")
private List<String> foobarList; 
```

会给你一个字符串列表：

```
"a", "b", "c". 
```

正则表达式会删除逗号前后的所有空格。值内的空格不会被删除。所以

```
foobar = AA, B B, CCC 
```

应该产生值

```
"AA", "B B", "CCC". 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-10-02T13:40:51.570

我认为这对于抓取数组和剥离空间更简单：

```
@Value("#{'${my.array}'.replace(' ', '').split(',')}")
private List<String> array; 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-10-01T09:35:38.407

在我的整数列表的情况下，这是这样的：

```
@Value("#{${my.list.of.integers}}")
private List<Integer> listOfIntegers; 
```

属性文件：

```
my.list.of.integers={100,200,300,400,999} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-10-01T05:39:58.943

考虑使用公共配置。它具有将属性文件中的条目分解为数组/列表的内置功能。结合 SpEL 和 @Value 应该可以满足您的需求

* * *

根据要求，这是您需要的（还没有真正尝试过代码，可能有一些错字，请多多包涵）：

在 Apache Commons Configuration 中，有 PropertiesConfiguration。它支持将分隔字符串转换为数组/列表的功能。

例如，如果您有一个属性文件

```
#Foo.properties
foo=bar1, bar2, bar3 
```

使用以下代码：

```
PropertiesConfiguration config = new PropertiesConfiguration("Foo.properties");
String[] values = config.getStringArray("foo"); 
```

会给你一个字符串数组`["bar1", "bar2", "bar3"]`

要与 Spring 一起使用，请在您的应用程序上下文 xml 中包含以下内容：

```
<bean id="fooConfig" class="org.apache.commons.configuration.PropertiesConfiguration">
    <constructor-arg type="java.lang.String" value="classpath:/Foo.properties"/>
</bean> 
```

并在你的春豆里有这个：

```
public class SomeBean {

    @Value("fooConfig.getStringArray('foo')")
    private String[] fooArray;
} 
```

我相信这应该可行：P

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-01-29T15:06:52.970

我的首选方式（特别是对于字符串）是以下一种：

```
admin.user={'Doe, John','Headroom, Max','Mouse, Micky'} 
```

并使用

```
@Value("#{${admin.user}}")
private List<String> userList; 
```

这样，您还可以在参数中包含逗号。它也适用于套装。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-12-06T09:44:57.917

如果使用属性占位符，则 ser1702544 示例将变为

```
@Value("#{myConfigProperties['myproperty'].trim().replaceAll(\"\\s*(?=,)|(?<=,)\\s*\", \"\").split(',')}") 
```

使用占位符 xml：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">   
    <property name="properties" ref="myConfigProperties" />
    <property name="placeholderPrefix"><value>$myConfigProperties{</value></property>
</bean>    

<bean id="myConfigProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
     <property name="locations">
         <list>
                <value>classpath:myprops.properties</value>
         </list>
     </property>
</bean> 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-05-12T17:26:42.847

答案

```
@Value("#{'${my.list.of.strings}'.split(',')}") 
private List<String> myList; 
```

对逗号分隔值按预期工作。要处理 null（未指定属性时），将默认值（`': '`在属性名称之后）添加为空字符串，如下所示：

```
@Value("#{'${my.list.of.strings: }'.split(',')}") 
```

# cocoa - 调用 SMJobBless 后启动失败

> ID：12576162
> 
> 赞同：0
> 
> 时间：2012-09-25T04:19:22.167
> 
> 标签：cocoa

我正在开发一个将更新 /etc/hosts 的应用程序。为此，我发现评估权限的首选方法是通过 SMJobBless 安装帮助工具。以下代码类型的作品：

```
 BOOL result = NO;

AuthorizationItem authItem      = { kSMRightBlessPrivilegedHelper, 0, NULL, 0 };
AuthorizationRights authRights  = { 1, &authItem };
AuthorizationFlags flags        =   kAuthorizationFlagDefaults              |
                                    kAuthorizationFlagInteractionAllowed    |
                                    kAuthorizationFlagPreAuthorize          |
                                    kAuthorizationFlagExtendRights;

AuthorizationRef authRef = NULL;
CFErrorRef error = NULL;

OSStatus status = AuthorizationCreate(&authRights, kAuthorizationEmptyEnvironment, flags, &authRef);
if (status == errAuthorizationSuccess) {
    result = SMJobBless(kSMDomainSystemLaunchd, (CFStringRef)@"com.fictitiousnonsense.MeddoHelper", authRef, &error);
} else {
    NSLog(@"Failed to authorize");
}

if (error != NULL) {
    NSLog(@"Error: %@", error);
} else {
    NSLog(@"I think it worked");
} 
```

根据文档，我的帮助工具 com.fictitiousnonsense.MeddoHelper 安装到 /Library/PrivilegedHelperTools/com.fictitiousnonsense.MeddoHelper 并且它的 plist 文件安装到 /Library/LaunchDaemons。问题是这会出现在我的控制台中：

```
9/24/12 11:04:41.237 PM launchdadd[9082]: Could not open /Library/PrivilegedHelperTools/com.fictitiousnonsense.MeddoHelper (open() error 2: No such file or directory)
9/24/12 11:04:41.237 PM launchdadd[9082]: FAILURE: The path /Library/PrivilegedHelperTools/com.fictitiousnonsense.MeddoHelper does not exist on-disk. 
```

我可以从终端手动运行助手并且它可以工作。为什么launchd不运行它？我已经运行了 Apple 提供的 SMJobBlessApp 示例应用程序，它运行良好，但我不会，而且我找不到不同的。

作为参考，整个代码在这里：[https](https://github.com/varikin/meddo) ://github.com/varikin/meddo 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:22:34.950

您可以`dtruss`在命令行上使用来跟踪 launchd。它将向您显示由 launchd 执行的所有系统调用，其中一个应该尝试访问您的特权助手。跟踪应该显示哪些系统调用准确地失败了，这使得 launchd 认为助手不在那里。我猜这是某种许可问题，顺便说一句。

# extjs4 - Exts4 MVC，如何在控制器中 grep 文本字段

> ID：12576170
> 
> 赞同：1
> 
> 时间：2012-09-25T04:20:14.117
> 
> 标签：extjs4

鉴于，

```
{
   xtype: 'textfield',
   fieldLabel: 'Test Field',
   name: 'testField'
} 
```

我想 grep 控制器中的文本字段来挂钩 Keyup 事件。

我试过，

```
this.control({
  'input[name='testfield']' : {
     afterrender : function(c){
        console.log(c); // nothing happened.
        c.getEl().on('keyup', function (evt, el) {
                console.log(evt.getKey());
        });
     }
  }
}); 
```

但它不起作用，

如何在控制器中 grep 文本框并挂钩 keyup 事件？

有谁知道，请指教。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:28:51.507

它应该是

```
this.control({
  'textfield[name='testfield']' : {
     afterrender : function(c){
        console.log(c); // nothing happened.
        c.getEl().on('keyup', function (evt, el) {
                console.log(evt.getKey());
        });
     }
  }
}); 
```

您已指定`input`而不是`textfield`.

您在函数中指定的选择器`this.control`应符合`Ext.ComponentQuery`. 检查[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-control)

# windows - WiX Bootstrapper 在退出时运行可执行文件

> ID：12576172
> 
> 赞同：3
> 
> 时间：2012-09-25T04:20:28.290
> 
> 标签：windows, wix, installation, bootstrapper, burn

我正在使用 WiX (3.6) Burn 引导程序将必备组件 (Bonjour) 与我的程序设置捆绑在一起。它工作得很好，但是：

我想在退出时从我的 INSTALLDIR 运行可执行文件的末尾添加一个步骤。我很难弄清楚这一点。

我试过了：

```
<CustomAction Id="LaunchApp"  Directory="INSTALLDIR"
              ExeCommand="[INSTALLDIR]my app name.exe"/> 
```

但是不知道把它放在我的 Burn 的 bundle wxs 文件中的哪个位置。任何指针？谢谢！

编辑：

我也试过把以下内容：

```
<CustomAction Id="LaunchApp"  Directory="INSTALLDIR"
              ExeCommand="[INSTALLDIR]Any Send.exe"/> 
```

在我的应用程序安装程序 MSI 的末尾，但是当它集成到 Burn bootstrapper 安装时，似乎没有执行此行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T08:54:14.317

回答：

将以下内容添加到您的元素中（我在之后`BootstrapApplicationRef`和之前添加了它`Chain`）：

```
 <Variable Name="LaunchTarget" 
           Value="[ProgramFiles64Folder]Folder\Exe Name.exe"/> 
```

完全对我有用！

# php - 如何在php文件中隐藏mysql数据库名称

> ID：12576175
> 
> 赞同：-9
> 
> 时间：2012-09-25T04:21:19.703
> 
> 标签：php, mysql

我使用以下方法包含 PHP 文件数据库连接：

```
$con=mysql_connect('localhost','root','tam');
mysql_selectdb("student",$con); 
```

或者

```
include('dbconn.php') 
```

与这种类型的连接。

这里，`student`是数据库名称。出现了一个问题，我以这种类型的编码开发了我的页面，但是第三方或其他查看者可以查看 PHP 文件中显示的数据库名称。我不必在 PHP 文件中显示数据库名称，那么如何解决此类问题，或者如何在我的 MySQL 设置中隐藏数据库名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:31:40.627

您的 PHP 代码不会发送给用户（它不像 javascript），因此唯一可以读取您的数据库名称和密码的人是那些已经可以访问服务器上所有文件的人。如果他们能做到这一点，那么您已经受到了很大的损害，并且不必担心隐藏名称。

但是，您可以做的是在一个单独的 PHP 文件中将您的数据库名称和密码声明为常量，并将该文件包含在您使用数据库的所有页面中。这使得将您的代码分发给其他人变得更加容易，而不必担心在您可能使用过的任何地方取出数据库连接信息。如果您更改密码或数据库名称，它也会使事情变得更容易。

# database - 关系数据库管理系统 (RDBMS) 中的 MapReduce

> ID：12576178
> 
> 赞同：1
> 
> 时间：2012-09-25T04:22:16.830
> 
> 标签：database, nosql, mapreduce, relational-database

为什么我在使用关系数据库 (RDBMS) 时从未听说过[MapReduce一词？](http://en.wikipedia.org/wiki/MapReduce)现在突然之间，[NoSQL](http://en.wikipedia.org/wiki/NoSQL) MapReduce 无处不在。我只是想从一般意义上理解为什么关系数据库中没有 MapReduce 概念以及为什么 NoSQL 需要它。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:25:53.390

从您链接到的 Wiki 文章的内容来看，MapReduce 是一种实现技术。许多可能的其他人之一。

精确地发明了关系模型，以便可以从用户那里**抽象**出实现技术。

很明显，某些人现在开始“运动”，推动再次向用户**展示**实现技术，而他们称之为“进步”则更能说明问题。

了解和理解关系模型的人也明白，在真正的关系 DBMS 中，在处理“BigRelations”时，没有什么可以阻止引擎**在**幕后应用完全相同的 MapReduce 技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:59:42.570

[https://www.coursera.org/#course/bigdata](https://www.coursera.org/#course/bigdata)

# java - 玩！2+ 以 RESTfull 方式添加 JSON 支持

> ID：12576179
> 
> 赞同：1
> 
> 时间：2012-09-25T04:22:16.860
> 
> 标签：java, ruby-on-rails, rest, playframework

我习惯做 ROR，但我需要在 Java 环境中创建一个 RESTfull WebService。所以我决定用 Play 试试看！因为它看起来真的是个好主意。

所以我试图找到一种方法将 JSON 添加到我已经存在的 firstapp 中，按照这些说明完成：[http ://www.playframework.org/documentation/2.0.3/JavaTodoList](http://www.playframework.org/documentation/2.0.3/JavaTodoList)

我想要的是与 ROR 类似的东西。至少，我希望能够通过以下方式请求 JSON 支持：

*   调用 .json URL
*   使用“接受：应用程序/json”标题

* * *

所以我尝试了一些像这样的脏东西：

```
 JsonNode json = request().body().asJson();
    if(json != null) {
        return ok(Json.toJson(Task.all()));
    }

    return ok(
            views.html.index.render(Task.all(), taskForm)
    ); 
```

而且它现在显然不起作用......

* * *

我需要检测客户需要的那种类型。我看到有些人正在添加这样的肮脏路线：

```
 POST    /bars                                       BarController.index()
    GET     /bars.json                                  BarController.indexJSON() 
```

但它显然不支持客户端使用标头指定 json 请求...

* * *

所以，我需要的是某种方式来找出是否有任何 Header 指定内容类型或接受应用程序/json。如果是这样，BarController.index() 将返回 BarController.indexJSON()...

总而言之，它与 ROR 非常相似：

```
respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @bars }
end 
```

* * *

总而言之 ：

有没有人经历过和我一样的推理并走到了尽头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:05:49.083

所以我通过在控制器中使用来解决我的问题，如下所示：

```
public static Result index()
public static Result indexJSON() 
```

然后我添加了路线：

```
GET     /tasks                      controllers.TaskController.index()
GET     /tasks/json                 controllers.TaskController.indexJSON() 
```

我会更喜欢 task.json 但它不会允许 /tasks/:id.json ...

对于 Header 支持，如果没有 header ，您需要检查您的经典函数：

```
public static Result index() {
    if (request().getHeader(play.mvc.Http.HeaderNames.ACCEPT).equalsIgnoreCase("application/json") || request().getHeader(Http.HeaderNames.CONTENT_TYPE).equalsIgnoreCase("application/json")) {
        return indexJSON();
    }
    else {
        return ok(
                views.html.index.render(Task.all(), taskForm)
        );
    }
} 
```

结束这就是所有的人！

有人有更好的解决方案吗？我不是很喜欢这个...因为我要重复很多代码...

# jquery - 自动完成和可编辑

> ID：12576182
> 
> 赞同：1
> 
> 时间：2012-09-25T04:22:58.670
> 
> 标签：jquery, autocomplete, jeditable

我使用 Jeditable 和自动完成，但在提交时我需要传递 ID 而不是名称。

我使用以下代码：

```
var data = [ 
    { text: 'PC Service 1', id: '46' }, 
    { text: 'PC Service 2', id: '48' }, 
    { text: 'PC Service 3', id: '49' }, 
    { text: 'Serviciu 1', id: '47' } 
];

jQuery.editable.addInputType('autocomplete', {
    element: jQuery.editable.types.text.element,
    plugin: function(settings, original) {
        jQuery('input', this).autocomplete(data, {
            dataType: 'json',
            parse: function(data) {                                        
                return jQuery.map(data, function(item) {
                    return {
                        data:   item,
                        value:  item.id,
                        result: item.name
                    };
                });
            },
            formatItem: function(item) {    
                return item.text;
            }
        }).result(function(event, item) {
            console.log ("Item: "  + item.id);
            nameId = item.id;
        });
    }
});

jQuery(".editableFieldAutocomplete").editable("index.cgi?action=plugin", { 
    indicator: "<img src='/$instance/images/loaders/loader2.gif'>",
    tooltip:   "Editeaza",
    type:      "autocomplete",
    event:     "mouseover",
    style:     "inherit",
    id:        'fieldId',
    name:      'fieldValue',
    submitdata: function ( value, settings ) {
        var nameId = nameId;
        console.log ("nameId: "  + nameId);
        return {
            invoiceId: "$fact",
            mode: "api",
            sec: "updateInvoiceJeditable_fct",
            nameId: nameId
        };
    }, 
    style: 'display: inline',
    autocomplete: {
        minLength  : 2,
        data : [ 
            { label: "Aberdeen", value:"1"}, 
            { label: "Ada", value: "2"}, 
            { label: "Adamsville", value: "3"}, 
            { label: "Addyston", value: "3"}, 
            { label: "Adelphi", value: "3"}, 
            { label: "Adena", value: "3"}, 
            { label: "Adrian", value: "3"}, 
            { label: "Akron", value: "3"}
        ]
    }
}); 
```

# jquery - Jquery UI：可拖动：停止事件：不允许拖动重启

> ID：12576184
> 
> 赞同：0
> 
> 时间：2012-09-25T04:23:09.393
> 
> 标签：jquery, jquery-ui

我已经设置了一些jqueryUI拖动，但是当我使用`stop`事件时，就像示例一样，它不会让我再次移动它

```
$( ".selector" ).draggable({
   stop: function(event, ui) { ... }
}); 
```

[http://jqueryui.com/demos/draggable/#event-stop](http://jqueryui.com/demos/draggable/#event-stop)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:36:19.613

停止功能执行后似乎工作正常。

检查这个[小提琴](http://jsfiddle.net/3MQZW/)

# android - 无法以编程方式将 android 联系人插入 android 设备

> ID：12576185
> 
> 赞同：8
> 
> 时间：2012-09-25T04:23:19.187
> 
> 标签：android, android-contacts, contactscontract

```
ArrayList<ContentProviderOperation> ops =new ArrayList<ContentProviderOperation>();
         ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                  .withValue(Data.RAW_CONTACT_ID, 3)
                  .withValue(Data.MIMETYPE, Phone.CONTENT_ITEM_TYPE)
                  .withValue(Phone.NUMBER, "999999999")
                  .withValue(Phone.TYPE, Phone.TYPE_CUSTOM)
                  .withValue(Phone.DISPLAY_NAME, "hhhhhhh")
                  .withValue(ContactsContract.CommonDataKinds.Email.DATA, "abcd@gmail.com")
                  .build());
         ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                  .withValue(Data.RAW_CONTACT_ID, 4)
                  .withValue(Data.MIMETYPE, Phone.CONTENT_ITEM_TYPE)
                  .withValue(Phone.NUMBER, "999999999")
                  .withValue(Phone.TYPE, Phone.TYPE_CUSTOM)
                  .withValue(Phone.DISPLAY_NAME, "hhhlllllllllll")
                  .withValue(ContactsContract.CommonDataKinds.Email.DATA, "efgh@gmail.com")
                  .build());

         try {
             cr.applyBatch(ContactsContract.AUTHORITY, ops);
        } catch (RemoteException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (OperationApplicationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

我已添加 `<uses-permission android:name="android.permission.WRITE_CONTACTS"/>`权限。

我收到以下错误：

```
09-25 09:30:41.365: W/System.err(1057): android.content.OperationApplicationException: insert failed
09-25 09:30:41.375: W/System.err(1057):     at android.database.DatabaseUtils.readExceptionWithOperationApplicationExceptionFromParcel(DatabaseUtils.java:161)
09-25 09:30:41.375: W/System.err(1057):     at android.content.ContentProviderProxy.applyBatch(ContentProviderNative.java:461)
09-25 09:30:41.375: W/System.err(1057):     at android.content.ContentProviderClient.applyBatch(ContentProviderClient.java:225)
09-25 09:30:41.375: W/System.err(1057):     at android.content.ContentResolver.applyBatch(ContentResolver.java:901)
09-25 09:30:41.375: W/System.err(1057):     at com.example.projdemo.MainActivity.onCreate(MainActivity.java:136)
09-25 09:30:41.375: W/System.err(1057):     at android.app.Activity.performCreate(Activity.java:5008)
09-25 09:30:41.385: W/System.err(1057):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
09-25 09:30:41.385: W/System.err(1057):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
09-25 09:30:41.385: W/System.err(1057):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-25 09:30:41.385: W/System.err(1057):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-25 09:30:41.385: W/System.err(1057):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-25 09:30:41.395: W/System.err(1057):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-25 09:30:41.395: W/System.err(1057):     at android.os.Looper.loop(Looper.java:137)
09-25 09:30:41.395: W/System.err(1057):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-25 09:30:41.395: W/System.err(1057):     at java.lang.reflect.Method.invokeNative(Native Method)
09-25 09:30:41.395: W/System.err(1057):     at java.lang.reflect.Method.invoke(Method.java:511)
09-25 09:30:41.395: W/System.err(1057):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-25 09:30:41.395: W/System.err(1057):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-25 09:30:41.405: W/System.err(1057):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-25T04:37:38.570

尝试如下：

```
private void addContact() {
    ArrayList<ContentProviderOperation> op_list = new ArrayList<ContentProviderOperation>(); 
    op_list.add(ContentProviderOperation.newInsert(ContactsContract.RawContacts.CONTENT_URI) 
            .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, null) 
            .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, null) 
            //.withValue(RawContacts.AGGREGATION_MODE, RawContacts.AGGREGATION_MODE_DEFAULT) 
            .build()); 

    // first and last names 
    op_list.add(ContentProviderOperation.newInsert(Data.CONTENT_URI) 
            .withValueBackReference(Data.RAW_CONTACT_ID, 0) 
            .withValue(Data.MIMETYPE, StructuredName.CONTENT_ITEM_TYPE) 
            .withValue(StructuredName.GIVEN_NAME, "Second Name") 
            .withValue(StructuredName.FAMILY_NAME, "First Name") 
            .build()); 

    op_list.add(ContentProviderOperation.newInsert(Data.CONTENT_URI) 
            .withValueBackReference(Data.RAW_CONTACT_ID, 0) 
            .withValue(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
            .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, "09876543210")
            .withValue(ContactsContract.CommonDataKinds.Phone.TYPE, Phone.TYPE_HOME)
            .build());
    op_list.add(ContentProviderOperation.newInsert(Data.CONTENT_URI) 
            .withValueBackReference(Data.RAW_CONTACT_ID, 0)

            .withValue(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)
            .withValue(ContactsContract.CommonDataKinds.Email.DATA, "abc@xyz.com")
            .withValue(ContactsContract.CommonDataKinds.Email.TYPE, Email.TYPE_WORK)
            .build());

    try{ 
        ContentProviderResult[] results = getContentResolver().applyBatch(ContactsContract.AUTHORITY, op_list); 
    }catch(Exception e){ 
        e.printStackTrace(); 
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-27T08:23:11.050

嗨，我知道它有点晚了，但它可以帮助你。首先，您必须**在清单**文件中注册使用权限，如下所示：

> `<uses-permission android:name="android.permission.WRITE_CONTACTS" />`

那么您可以尝试以下方法：

```
private void addContact(String name, String phone) {

        ContentValues values = new ContentValues();
        values.put(Contacts.People.NUMBER, phone);
        values.put(Contacts.People.TYPE, ContactsContract.CommonDataKinds.Phone.TYPE_CUSTOM);
        values.put(Contacts.People.LABEL, name);
        values.put(Contacts.People.NAME, name);
        Uri dataUri = getContentResolver().insert(Contacts.People.CONTENT_URI, values);
        Uri updateUri = Uri.withAppendedPath(dataUri, Contacts.People.Phones.CONTENT_DIRECTORY);
        values.clear();
        values.put(Contacts.People.Phones.TYPE, Contacts.People.TYPE_MOBILE);
        values.put(Contacts.People.NUMBER, phone);
        updateUri = getContentResolver().insert(updateUri, values);
        Log.d("CONTACT", ""+updateUri);
    } 
```

# .htaccess - .htaccess 在 mediatemple 上重写

> ID：12576194
> 
> 赞同：1
> 
> 时间：2012-09-25T04:24:24.923
> 
> 标签：.htaccess, mod-rewrite, rewrite, mediatemple

我托管在 mediatemple DV 4.0 服务器上，并在我的 htaccess 文件中使用以下行（重写 CMS 规则）

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule /?([A-Za-z0-9_-]+)/?$ index.php?id=$1 [QSA,L] 
```

它运行良好，但是当我尝试执行 301 重定向以将旧页面指向新地址时，它会在 url 中添加一些不必要的内容，例如：

```
?id=locations-maryland 
```

我如何修改重写规则以保持相同的功能，但删除最后一部分，这基本上使 301 重定向毫无意义，因为 CMS 找不到任何带有这个垃圾网址的页面。

它只发生在 mediatemple 我听说过在某处添加/删除额外问号但没有足够的知识来自己解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:29:18.020

`?`在重定向目标的末尾添加一个。例子：

```
Redirect /something/ /something/else/? 
```

或者如果您使用的是 mod_rewrite：

```
RewriteRule ^/?something/(.*)$ /something/else/$1? [L,R=301] 
```

# iphone - 在后台获取数据

> ID：12576195
> 
> 赞同：-1
> 
> 时间：2012-09-25T04:24:44.407
> 
> 标签：iphone, objective-c, ios, fetch

是否存在允许应用程序“获取”数据的 iOS 功能，即使应用程序当前未运行？我正在寻找类似于电子邮件设置的内容，您可以在其中选择“获取”和频率（例如每 15 或 30 分钟）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T00:40:41.077

在 iOS 7 中，Apple 引入了一项名为“Background App Refresh”的功能，允许应用程序在后台刷新其内容。

下面是一个很好的教程：http: [//mobile.tutsplus.com/tutorials/iphone/ios-7-sdk-working-with-background-fetch/](http://mobile.tutsplus.com/tutorials/iphone/ios-7-sdk-working-with-background-fetch/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:29:45.373

没有电子邮件是苹果的默认应用程序。所以是支持的。我不认为这是可能的。您需要为此应用一些技巧，但没有用户交互，不，这违反了苹果的隐私政策

# python - Django objects.filter 问题

> ID：12576196
> 
> 赞同：0
> 
> 时间：2012-09-25T04:24:53.120
> 
> 标签：python, django, object, django-models

我得到这个错误：**`Cannot assign "[<Response: Response object>, <Response: Response object>]": "Comment.response" must be a "Response" instance`。**如何通过匹配申请人和面试 ID 为实例分配响应？另外，我只想要 objects.filter() 的所有可能结果中的第一个响应

```
def post_comment(request, interview_id, applicant_id):
  if request.POST:
    text = str(request.POST['add_comment'])
    interview = Interview.objects.get(id = interview_id)
    applicant = Applicant.objects.get(id = applicant_id)
    response = Response.objects.filter(interview = interview, applicant = applicant)
    date = datetime.datetime.now()
comment = Comment(
  user = request.user,
  applicant = applicant,
  interview = interview,
  response = response,
  comment = text,
  created_at = date,
) 
```

我的模型如下：

```
class Response(models.Model):
  video_guid = models.CharField(max_length=32)
  interview = models.ForeignKey(Interview)
  applicant = models.ForeignKey(Applicant)
  question = models.ForeignKey(Question)

class Comment(models.Model):
  user = models.ForeignKey(User)
  applicant = models.ForeignKey(Applicant)
  interview = models.ForeignKey(Interview)
  response = models.ForeignKey(Response)
  comment = models.TextField(default='')
  created_at = models.DateTimeField(default=datetime.datetime.now()) 
```

我是 Django 的新手 :( 非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:01:25.300

您遇到的问题是您的过滤器返回多个结果；不仅仅是“第一个”或“最后一个”（因为您没有指定这样的条件）。

第二个问题是您的模型不允许对每个评论进行多个回复。

你有几个选择：

1.  调整您的模型以允许对每个评论进行多个响应。为此，请更改`response = models.ForeignKey(Response)`为`response = models.ManyToMany(Response)`（参见[`ManyToMany`](https://docs.djangoproject.com/en/1.4/topics/db/examples/many_to_many/)），然后调整您的视图。首先创建一个`Comment`对象，然后`comment.response.add()`每个响应。

2.  `comment`为每个响应条目创建多个对象。这可能并不理想；但它无需迁移数据库模式即可工作。

这是它的外观：

```
for i in response:
    Comment.objects.create(
           user = request.user,
           applicant = applicant,
           interview = interview,
           response = i,
           comment = text,
           created_at = date) 
```

您的模型具有您不需要的冗余字段。由于`Comment`与 有关系`Response`，因此您无需`Response`在`Comment`模型中复制字段。您可以[关注关系](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)并获取相关字段：

```
c = Comment.objects.get(pk=1)
c.response.interview # interview object

# Get all the comments for where the interview objects primary key is 1
c = Comment.objects.filter(response__interview__pk=1)

r = Response.objects.get(pk=1)
r.comment_set.all() # all comments for this response 
```

在您坐下来编写模型之前，请写下您需要对数据库执行哪些类型的查询。这将帮助您决定需要哪些字段（以及哪些关系）。例如，目前无法获得特定采访的“第一个”或“最后一个”响应（因为 中没有日期字段`Response`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T04:49:11.937

由于您的查询`Response.objects.filter(interview = interview, applicant = applicant)`返回`list`其中包含两个响应对象，因此无法将其分配给 Comment.response ，这是对响应的 FK。

ForeignKey 只能存储对其他表/模型的单个记录的引用（id）。

# android - 将 TableRow 动态添加到 TableLayout 中的空指针异常

> ID：12576197
> 
> 赞同：2
> 
> 时间：2012-09-25T04:25:10.417
> 
> 标签：android, android-tablelayout

我在浏览创建动态表格行并向其中添加内容时遇到了一个概念。代码下方描述 此代码抛出 NullPointerException。

**布局：**

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:stretchColumns="0,1"
                android:id="@+id/tabledisplay" android:layout_weight="1" android:layout_height="wrap_content" android:layout_width="match_parent">
        </TableLayout> 
```

**代码**

```
public void display_table(){
    try{
    TableLayout tl = (TableLayout)findViewById(R.id.tabledisplay);

    DBConnection db= new DBConnection();
    Connection con=db.getConnection();
    Statement st=con.createStatement();
    ResultSet rs=st.executeQuery("select report_name,report_createddate,user_name from reports");
    TableRow tr_head = new TableRow(this);
    tr_head.setId(10);
    tr_head.setBackgroundColor(Color.GRAY);
    tr_head.setLayoutParams(new LayoutParams(
    LayoutParams.FILL_PARENT,
    LayoutParams.WRAP_CONTENT));
    TextView label_date = new TextView(this);
    label_date.setId(20);
    label_date.setText("DATE");
    label_date.setTextColor(Color.WHITE);
    label_date.setPadding(5, 5, 5, 5);
    tr_head.addView(label_date);// add the column to the table row here

    TextView label_weight_kg = new TextView(this);
    label_weight_kg.setId(21);// define id that must be unique
    label_weight_kg.setText("Wt(Kg.)"); // set the text for the header 
    label_weight_kg.setTextColor(Color.WHITE); // set the color
    label_weight_kg.setPadding(5, 5, 5, 5); // set the padding (if required)
    tr_head.addView(label_weight_kg); // add the column to the table row here
    tl.addView(tr_head, new TableLayout.LayoutParams(
            LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));
    Integer count=0;
    while (rs.next()) {
   String date = (rs.getString(1));// get the first variable
   String weight_kg = (rs.getString(2));// get the second variable
   // Create the table row
   TableRow tr = new TableRow(this);
   if(count%2!=0) tr.setBackgroundColor(Color.GRAY);
   tr.setId(100+count);
   tr.setLayoutParams(new LayoutParams(
   LayoutParams.FILL_PARENT,
   LayoutParams.WRAP_CONTENT));

   //Create two columns to add as table data
    // Create a TextView to add date
   TextView labelDATE = new TextView(this);
   labelDATE.setId(200+count); 
   labelDATE.setText(date);
   labelDATE.setPadding(2, 0, 5, 0);
   labelDATE.setTextColor(Color.WHITE);
   tr.addView(labelDATE);
   TextView labelWEIGHT = new TextView(this);
   labelWEIGHT.setId(200+count);
   labelWEIGHT.setText(weight_kg.toString());
   labelWEIGHT.setTextColor(Color.WHITE);
   tr.addView(labelWEIGHT);

   // finally add this to the table row
   tl.addView(tr, new TableLayout.LayoutParams(
                        LayoutParams.FILL_PARENT,
                        LayoutParams.WRAP_CONTENT));
               count++;
            }   

    }catch (Exception e) {
        // TODO: handle exception
        Toast.makeText(getApplicationContext(),e.toString(),Toast.LENGTH_LONG).show();
    }

} 
```

请让我知道我的代码出了什么问题？

日志错误

```
09-25 10:02:58.125: I/System.out(560): java.lang.NullPointerException 09-25
10:02:58.154: I/System.out(560):    at  
android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:100) 09-25  
10:02:58.154: I/System.out(560):    at
co.analuo.app.HorzScrollWithListMenu.display_table(HorzScrollWithListMenu.java:189) 
09-25 10:02:58.164: I/System.out(560):  at 
co.analuo.app.HorzScrollWithListMenu$1.onItemClick(HorzScrollWithListMenu.java:111)   
09-25 10:02:58.164: I/System.out(560):  at 
android.widget.AdapterView.performItemClick(AdapterView.java:284) 09-25 10:02:58.164:  
I/System.out(560):  at android.widget.ListView.performItemClick(ListView.java:3513) 
09-25 10:02:58.164: I/System.out(560):  at 
android.widget.AbsListView$PerformClick.run(AbsListView.java:1812) 09-25 10:02:58.175: 
I/System.out(560):  at android.os.Handler.handleCallback(Handler.java
:587)
09-25 10:02:58.185: I/System.out(560):  at   
android.os.Handler.dispatchMessage(Handler.java:92)
09-25 10:02:58.185: I/System.out(560):  at android.os.Looper.loop(Looper.java:123)
09-25 10:02:58.185: I/System.out(560):  at 
android.app.ActivityThread.main(ActivityThread.java:3683)
09-25 10:02:58.204: I/System.out(560):  at 
java.lang.reflect.Method.invokeNative(Native Method)
09-25 10:02:58.204: I/System.out(560):  at 
 java.lang.reflect.Method.invoke(Method.java:507)
 09-25 10:02:58.204: I/System.out(560):     at 
 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-25 10:02:58.204: I/System.out(560):  at 
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-25 10:02:58.204: I/System.out(560):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:40:41.373

我遇到了同样的问题，所以这是您的解决方案。不要将 Tablelayout 作为根布局，例如

```
`<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<TableLayout
    android:id="@+id/tlayoutID"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />
</LinearLayout>` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:59:30.637

最后我得到了解决方案

如果`findViewById()`返回 NPE，请尝试其中一些：

*   通过 Project -> Clean... 清理项目 -> 检查您的项目 -> OK
*   确保您的 ID 中绝对没有拼写错误
*   `TableLayout`确保 contentView 在存在的地方显示正确的布局
*   确保你`setContentView`之前`findViewById`

我假设我列出的第三个选项很可能是您的问题。

在这些步骤中的每一个之后，重新清理项目也可能会有所帮助。

引用自[https://stackoverflow.com/a/11671533/1602230](https://stackoverflow.com/a/11671533/1602230)

# highcharts - 没有缩放的Highchart选择

> ID：12576204
> 
> 赞同：2
> 
> 时间：2012-09-25T04:25:40.323
> 
> 标签：highcharts

是否有任何选项可以通过在 Highchart 中选择而不放大来选择坐标（即最小值和最大值）值。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T09:06:56.883

试试这个：http: [//jsfiddle.net/8LBFp/](http://jsfiddle.net/8LBFp/)

# linux - 删除文件名开头带有数字的文件

> ID：12576205
> 
> 赞同：0
> 
> 时间：2012-09-25T04:25:40.820
> 
> 标签：linux, unix, ubuntu

我最近正在使用 Ubuntu，我被要求删除开头带有数字的文件。

如何从当前目录中删除前三个字符为数字的普通文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T05:58:29.510

由于没有其他人费心发布此信息，

```
rm [0-9][0-9][0-9]* 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T04:30:36.340

首先：尝试此类删除命令时**要小心！**尝试在包含测试文件或备份良好的文件的目录中运行。

你可以从 shell 尝试这样的事情：

```
find . -regex './[0-9]{3}.*' -exec 'rm {}' \; 
```

要进行调试，请先尝试在不使用 - 命令的情况下运行它`rm`，列出将被删除的文件：

```
find . -regex './[0-9]{3}.*' 
```

您可能必须转义花括号 - 至少我必须在 FreeBSD 中使用 zsh-shell：

```
find . -regex './[0-9]\{3\}.*' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T05:44:48.510

像这样的东西怎么样

```
ls | egrep '^[0-9]{3}' | xargs rm 
```

`ls`列出所有文件，`egrep`过滤列表以使其仅包含以三位数字开头的文件名，并且适用`xargs`于允许通过`rm`的每个文件名。`egrep`

# c++ - unix 中的分段错误，但在 Windows 中工作正常

> ID：12576208
> 
> 赞同：1
> 
> 时间：2012-09-25T04:26:21.713
> 
> 标签：c++, unix, static

```
classa classa::_var

classa::classa() {

} 
```

`_var`是一个静态对象`classa`。在加载dll时，控件进入静态对象初始化。此时控件转到构造函数，在构造函数内部执行代码后，它因分段错误而中断。这在 Windows 中运行良好，仅在 unix 中我遇到了这个问题。

从 dbx 调试器检查使用 print 命令的值时，`_var`它会进入无限循环。

# html - 通过源页面的href导航到jsp后启用jsp按钮

> ID：12576212
> 
> 赞同：0
> 
> 时间：2012-09-25T04:27:03.223
> 
> 标签：html, jsp

我在服务器操作时调用 JSP 并显示我需要的所有内容。现在，我有一个特殊的场景，我将通过单击使用来自其他 JSP 的 href 的链接来调用页面。当我通过单击链接导航到我的 JSP 时，我希望启用一个按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:18:07.100

传递附加参数`<a href="some.jsp?enable=false">link</a>`。在 jsp 中检查参数并将按钮状态设置为禁用。

```
<button <%=("false".equals(request.getPrameter("enable"))?"disabled":""%> > OK </button> 
```

# php - 如何在没有链接数据库的情况下创建搜索功能

> ID：12576216
> 
> 赞同：0
> 
> 时间：2012-09-25T04:27:35.643
> 
> 标签：php, codeigniter

实际上我试图创建没有链接到数据库的搜索功能。所以我刚刚放在模型上的东西。现在我不知道如何在控制器中调用该数据。希望任何人都可以解决我的问题。

这是我的视图页面：

```
<li>Category:
<div>
<? echo form_dropdown('fcategory', $content_category); ?> </div></li>

<li> Channel:<div>
<? echo form_dropdown('fchannel', $content_channel); ?></div> </li>

<li> Language<div>
<? echo form_dropdown('flanguage', $content_language); ?></div> </li>

<input type="submit" class="btn" name="search" value="Search" /> <span class="lightfont"></span> 
```

这是我的模型：

```
function general(){

    $data['content_category'] = array(
        "Dramas"=>"Dramas",
        "Movies"=>"Movies",
        "News"=>"News",
        "Anime"=>"Anime",
        "Popular Selection"=>"Popular Selection"
    );

    $data['content_channel'] = array(
        "China"=>"China",
        "Hong Kong"=>"Hong Kong",
        "Taiwan"=>"Taiwan",
        "Japan"=>"Japan",
        "Korea"=>"Korea",
        "UK"=>"UK",
        "US"=>"US",
        "Indonesia"=>"Indonesia"
    );

    $data['content_language'] = array(
        "English"=>"English",
        "Chinese"=>"Chinese",
        "Others"=>"Others"
    );

    return $data;
}

function sample_data(){

    $TVContent ['China']['Chinese']['Movies'][1]= array ('title'=>'Gooddrama','home-index-china movies', 'English', 'Grey');
    $TVContent ['China']['Chinese']['Drama'][2]= array ('title'=>'Gooddrama','home-index-china drama', 'English', 'Grey');
    $TVContent ['China']['English']['Sport'][3]= array ('title'=>'ABO','', 'English', 'Grey');
    $TVContent ['China']['Chinese']['News'][4]= array ('title'=>'KTD','', 'Chinese', 'Grey');

    $TVContent ['China']['Chinese']['Movies'][1]['title'];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:11:21.173

使用数据库存储数据将是最好的实现

这就是你可以从控制器调用模型函数的方式

//加载你的模型

$this->load->model('product_model');

//调用模型函数

$this->product_model->your_function();

欲了解更多信息， [http://codeigniter.com/user_guide/general/models.html](http://codeigniter.com/user_guide/general/models.html)

# php - 未找到：在此服务器上未找到请求的 URL /viewprofile.php

> ID：12576220
> 
> 赞同：-3
> 
> 时间：2012-09-25T04:28:04.333
> 
> 标签：php, .htaccess, wampserver

我的网站有问题，我无法查看`viewprofile.php`.

这是我的`.htaccess`文件。

```
RewriteEngine on
RewriteRule (.*)-(.*).htm$ viewprofile.php?id=$1
RewriteRule (.*).htm$ viewprofile.php?id=$2
RewriteRule viewads(.*)\.htm$ viewads.php?id=$1
RewriteRule (.*)&(.*)\.htm$ homeads.php?id=$2
RewriteRule (.*).htm$ profile_city.php?id=$1
RewriteRule (.*).htm$ profile_cast.php?id=$1

RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php
ErrorDocument 404 /viewprofile.php

RewriteEngine on
RewriteCond %{HTTP_HOST} ^waytonikah.com [NC]
RewriteRule ^(.*)$ http://waytonikah.com/$1 [L,R=301] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:34:48.397

这是一个重定向循环：

```
RewriteCond %{HTTP_HOST} ^waytonikah.com [NC]
RewriteRule ^(.*)$ http://waytonikah.com/$1 [L,R=301] 
```

此规则执行此操作：

1.  URL 是`http://waytonikah.com/`，发出请求
2.  是主机**`waytonikah.com`**吗？
3.  如果是，请重定向到**`http://waytonikah.com/`**,
4.  URL 是`http://waytonikah.com/`，发出请求
5.  是主机**`waytonikah.com`**吗？
6.  如果是，请重定向到**`http://waytonikah.com/`**,

等等

# dapper - Dapper.Net 和 Dapper.Net 扩展是否有等效于“NotMapped”的方法？

> ID：12576225
> 
> 赞同：2
> 
> 时间：2012-09-25T04:28:48.260
> 
> 标签：dapper, micro-orm

我已经开始使用 Dapper.Net，并且到目前为止我真的很喜欢它 - 但是，我遇到了一个问题。

假设我有一个 POCO 类，例如：

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string FullName { get { return FirstName + " " + LastName; } }
} 
```

现在，使用 Dapper.Net 和 Dapper.Net 扩展，我想通过执行以下操作从数据库中加载该数据类型的所有实例：

```
string connectionString = CloudConfigurationManager.GetSetting("DBConnection");
using (SqlConnection cn = new SqlConnection(connectionString))
{
    cn.Open();

    IEnumerable<Types.Person> entities = cn.GetList<Types.Person>();
    var forceMe = entities.ToList();
} 
```

这在 Linq 设置中可以正常工作，但是当它使用 .ToList() 来强制评估时，它会在 FullName 上显示“无效的列名”。考虑到它可能尊重 NotMapped 的实体框架 DataAnnotations 内容，我尝试添加一个 NotMapped 属性（在将 EF 5 添加到项目之后）。这没有用。

所以，问题是，我如何告诉 Dapper.Net 不希望从数据库中获得一列？这是扩展的问题吗，试图为它在模型 POCO 中看到的所有内容映射一个 DB 列？我是否需要恢复编写 SQL，并明确询问我只想要的列，或者有没有办法在列上获得与 NotMapped 等效的列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T16:56:19.957

我认为忽略某些属性被映射的唯一方法是实现一个[自动类映射器](https://github.com/tmsmith/Dapper-Extensions/wiki/AutoClassMapper)，您可以在其中指定您的自定义字段映射。例如：

```
public class CustomMapper : ClassMapper<Foo>
{
    public CustomMapper()
    {
        Table("FooTable");
        Map(f => f.Id).Column("FooId").Key(KeyType.Identity);
        Map(f => f.DateOfBirth).Column("BirthDate");
        Map(f => f.FirstName).Column("First");
        Map(f => f.LastName).Column("Last");
        Map(f => f.FullName).Ignore();
        Map(f => f.Calculated).ReadOnly();
    }
}

public class Foo
{
    public int Id { get; set; }
    public DateTime DateOfBirth { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string FullName
    {
        get { return string.Format("{0} {1}", FirstName, LastName); }
    }
} 
```

在上面的示例中，FullName 被忽略。

自动映射器还允许您调整表名，以防您的 POCO 类名与表名不匹配。

另外，请记住，您必须将自定义地图与 POCO 类放在同一个程序集中。该库使用反射来查找自定义地图，它只扫描一个程序集。

希望这有帮助，祝你好运

# c++ - Visual C++ express 2010 程序入口点??1task_group_context@tbb@@QAE@XZ在动态链接库tbb.dll中找不到

> ID：12576231
> 
> 赞同：0
> 
> 时间：2012-09-25T04:30:22.077
> 
> 标签：c++, procedure, tbb

有人可以帮我解决这个错误吗？

我尝试在互联网上进行研究并尝试了不同的方法来解决问题（例如：卸载其他版本的 Visual c++、添加代码等），但它们似乎都不起作用:(

我做了什么：

```
under c/c++-->general-->additional include directories-->C:\OpenCV2.3\build\include;C:\OpenCV2.3\build\include\opencv2;C:\OpenCV2.3\build\include\opencv;C:\OpenCV2.3\opencv\data\haarcascades

under linker-->general-->additional library directories-->C:\OpenCV2.3\build\x86\vc9\lib;C:\OpenCV2.3\opencv\data\haarcascades;%(AdditionalLibraryDirectories)

under linker-->input-->additional dependencies--> added opencv_core230.lib;opencv_highgui230.lib;opencv_objdetect230.lib

under debugging-->command arguments -->added --cascade="C:/Program Files/OpenCV/data/haarcascades/haarcascade_frontalface_alt.xml"testimg.jpg 
```

编码：

```
#include <cv.h> 
#include <highgui.h> 
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <assert.h>
#include <math.h>
#include <float.h>
#include <limits.h>
#include <time.h>
#include <ctype.h>

// Create memory for calculations
static CvMemStorage* storage = 0;

// Create a new Haar classifier
static CvHaarClassifierCascade* cascade = 0;

// Function prototype for detecting and drawing an object from an image
void detect_and_draw( IplImage* image );

// Create a string that contains the cascade name
const char* cascade_name = "haarcascade_frontalface_alt.xml";
/*    "haarcascade_profileface.xml";*/

// Main function, defines the entry point for the program.
int main( int argc, char** argv )
{
    // Structure for getting video from camera or avi
    CvCapture* capture = 0;

    // Images to capture the frame from video or camera or from file
    IplImage *frame, *frame_copy = 0;
    /*  IplImage* img = cvLoadImage( "testimg.jpg" ); 
    cvNamedWindow( "MyJPG", CV_WINDOW_AUTOSIZE ); 
    cvShowImage("MyJPG", img); 
    cvWaitKey(0); 
    cvReleaseImage( &img ); 
    cvDestroyWindow( "MyJPG" ); 
    */
    // Used for calculations
    int optlen = strlen("--cascade=");

    // Input file name for avi or image file.
    const char* input_name;

    // Check for the correct usage of the command line
    if( argc > 1 && strncmp( argv[1], "--cascade=", optlen ) == 0 )
    {
        cascade_name = argv[1] + optlen;
        input_name = argc > 2 ? argv[2] : 0;
    }
    else
    {
        fprintf( stderr,
        "Usage: facedetect --cascade=\"<cascade_path>\" [filename|camera_index]\n" );
        return -1;
        /*input_name = argc > 1 ? argv[1] : 0;*/
    }

    // Load the HaarClassifierCascade
    cascade = (CvHaarClassifierCascade*)cvLoad( cascade_name, 0, 0, 0 );

    // Check whether the cascade has loaded successfully. Else report and error and quit
    if( !cascade )
    {
        fprintf( stderr, "ERROR: Could not load classifier cascade\n" );
        return -1;
    }

    // Allocate the memory storage
    storage = cvCreateMemStorage(0);

    // Find whether to detect the object from file or from camera.
    if( !input_name || (isdigit(input_name[0]) && input_name[1] == '\0') )
        capture = cvCaptureFromCAM( !input_name ? 0 : input_name[0] - '0' );
    else
        capture = cvCaptureFromAVI( input_name ); 

    // Create a new named window with title: result
    cvNamedWindow( "result", 1 );

    // Find if the capture is loaded successfully or not.

    // If loaded succesfully, then:
    if( capture )
    {
        // Capture from the camera.
        for(;;)
        {
            // Capture the frame and load it in IplImage
            if( !cvGrabFrame( capture ))
                break;
            frame = cvRetrieveFrame( capture );

            // If the frame does not exist, quit the loop
            if( !frame )
                break;

            // Allocate framecopy as the same size of the frame
            if( !frame_copy )
                frame_copy = cvCreateImage( cvSize(frame->width,frame->height),
                                            IPL_DEPTH_8U, frame->nChannels );

            // Check the origin of image. If top left, copy the image frame to frame_copy. 
            if( frame->origin == IPL_ORIGIN_TL )
                cvCopy( frame, frame_copy, 0 );
            // Else flip and copy the image
            else
                cvFlip( frame, frame_copy, 0 );

            // Call the function to detect and draw the face
            detect_and_draw( frame_copy );

            // Wait for a while before proceeding to the next frame
            if( cvWaitKey( 10 ) >= 0 )
                break;
        }

        // Release the images, and capture memory
        cvReleaseImage( &frame_copy );
        cvReleaseCapture( &capture );
    }

    // If the capture is not loaded succesfully, then:
    else
    {
        // Assume the image to be lena.jpg, or the input_name specified
        const char* filename = input_name ? input_name : (char*)"testimg.jpg";

        // Load the image from that filename
        IplImage* image = cvLoadImage( filename, 1 );

        // If Image is loaded succesfully, then:
        if( image )
        {
            // Detect and draw the face
            detect_and_draw( image );

            // Wait for user input
            cvWaitKey(0);

            // Release the image memory
            cvReleaseImage( &image );
        }
        else
        {
            /* assume it is a text file containing the
               list of the image filenames to be processed - one per line */
            FILE* f = fopen( filename, "rt" );
            if( f )
            {
                char buf[1000+1];

                // Get the line from the file
                while( fgets( buf, 1000, f ) )
                {

                    // Remove the spaces if any, and clean up the name
                    int len = (int)strlen(buf);
                    while( len > 0 && isspace(buf[len-1]) )
                        len--;
                    buf[len] = '\0';

                    // Load the image from the filename present in the buffer
                    image = cvLoadImage( buf, 1 );

                    // If the image was loaded succesfully, then:
                    if( image )
                    {
                        // Detect and draw the face from the image
                        detect_and_draw( image );

                        // Wait for the user input, and release the memory
                        cvWaitKey(0);
                        cvReleaseImage( &image );
                    }
                }
                // Close the file
                fclose(f);
            }
        }    
    }

    // Destroy the window previously created with filename: "result"
    cvDestroyWindow("result");

    // return 0 to indicate successfull execution of the program
    return 0;
}

// Function to detect and draw any faces that is present in an image
void detect_and_draw( IplImage* img )
{
    int scale = 1;

    // Create a new image based on the input image
    IplImage* temp = cvCreateImage( cvSize(img->width/scale,img->height/scale), 8, 3 );

    // Create two points to represent the face locations
    CvPoint pt1, pt2;
    int i;

    // Clear the memory storage which was used before
    cvClearMemStorage( storage );

    // Find whether the cascade is loaded, to find the faces. If yes, then:
    if( cascade )
    {    
        // There can be more than one face in an image. So create a growable sequence of faces.
        // Detect the objects and store them in the sequence
        CvSeq* faces = cvHaarDetectObjects( img, cascade, storage,
                                            1.1, 2, CV_HAAR_DO_CANNY_PRUNING,
                                            cvSize(40, 40) );

        // Loop the number of faces found.
        for( i = 0; i < (faces ? faces->total : 0); i++ )
        {
            // Create a new rectangle for drawing the face
            CvRect* r = (CvRect*)cvGetSeqElem( faces, i );

            // Find the dimensions of the face,and scale it if necessary
            pt1.x = r->x*scale;
            pt2.x = (r->x+r->width)*scale;
            pt1.y = r->y*scale;
            pt2.y = (r->y+r->height)*scale;

            // Draw the rectangle in the input image
            cvRectangle( img, pt1, pt2, CV_RGB(255,0,0), 3, 8, 0 );
        }
    }

    // Show the image in the window named "result"
    cvShowImage( "result", img );

    // Release the temp image created.
    cvReleaseImage( &temp );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:21:37.727

错误消息说，在外部库 tbb.dll 中找不到某个符号。似乎找到了库（dll）本身。

该库是[线程构建块](http://threadingbuildingblocks.org/)，并且您的错误消息提示标头和使用的 dll 之间不匹配，例如由于安装了多个版本等。您应该找出在运行时是否使用了正确的 dll（检查 VS 中的模块窗口，或为此使用[Dependency Walker](http://www.dependencywalker.com/)）。要将运行时应用程序指向 tbb.dll 的正确路径，您可以将该目录放在 PATH 环境变量中，或者将 tbb.dll 与可执行文件并排放置。

# java - 无法在 OSX Mountain Lion 中运行 java，出现错误

> ID：12576233
> 
> 赞同：0
> 
> 时间：2012-09-25T04:30:48.680
> 
> 标签：java, macos, osx-mountain-lion

我需要在运行 Mountain Lion 的 macbook pro 中运行 jar 文件。但我无法从命令行运行 java。当我尝试检查 java 版本或帮助命令时出现错误

`Ashfaqur-Rahmans-MacBook-Pro:~ inganious$ java help`

```
Exception in thread "main" java.lang.NoClassDefFoundError: help
Caused by: java.lang.ClassNotFoundException: help
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

请任何人帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:37:19.240

[java](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/java.html)将类文件名作为其参数。当你输入`java help`时，JVM 认为`help`是一个类文件名，它会抛出`NoClassDefFoundError`异常，因为它没有找到它。

您要做的是使用帮助选项。

```
java -help 
```

# javascript - Android：在 webview 中加载 URL 之前注入 JavaScript

> ID：12576236
> 
> 赞同：2
> 
> 时间：2012-09-25T04:31:05.123
> 
> 标签：javascript, android, android-webview, android-websettings

我正在开发一个应用程序，其中在应用程序的 web 视图中加载了一个 URL。通过 JavaScript，我切出了网页的页眉和页脚，并在 webview 中显示内容。我的问题是，切出网页的页眉和页脚需要一些时间，大约 1-2 秒，页眉可见并立即隐藏。我正在附加我的 WebViewClient 类：

```
private class CustomWebClient extends WebViewClient {
    @Override
    public void onPageFinished(WebView view, String url) {
        progress.setVisibility(View.GONE);
        super.onPageFinished(view, url);
    }

    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        super.onPageStarted(view, url, favicon);
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        doGet(url);
        return true; // super.shouldOverrideUrlLoading(view, url);
    }

    public void onLoadResource(WebView view, String url) {
        webview.loadUrl("javascript:(function() { "
                + "document.getElementsByTagName('header')[0].style.display = 'none'; "
                + "})()");

        webview.loadUrl("javascript:(function() { "
                + "document.getElementsByTagName('footer')[0].style.display = 'none'; "
                + "})()");

        webview.loadUrl("javascript:(function() { "
                + "document.getElementsByTagName('section').search_again.style.display = 'none'; "
                + "})()");
    }

} 
```

在`onLoadResource()`方法上我正在注入 JS。

任何人都对我面临的问题有所了解，请帮助我克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:43:55.663

您可以使用带有 android 媒体查询的 css 文件来隐藏 css 上的页眉/页脚

# javascript - 任何人都可以修复与大量数字进行 javascript 比较的方法吗？

> ID：12576240
> 
> 赞同：1
> 
> 时间：2012-09-25T04:31:30.007
> 
> 标签：javascript, svg, comparison

我一直在搞乱 HTML 和操纵 SVG。作为实践，我创建了一个页面，该页面使用 javascript 来解决勾股定理并在 300h x 300w 区域中显示三角形。`a`我认为我的问题是，当变量“ ”和变量“ ”之间的差异太大时，`b`比较“ `if(a>b)`”不能正常工作。所以它非常适合`a=55`and`b=32`甚至`a=5555`and`b=5000`但是如果我这样做`a=1001`并且`b=55`它似乎运行它就好像`b`大于`a`.

```
<h2>Pythagorean theorem</h2>
<p>Enter Variable "a"<input id="vara" type="text"></p>
<p>Enter Variable "b"<input id="varb" type="text"></p>
<p><span id="a">a</span><sup>2</sup> + 
<span id="b">b</span><sup>2</sup> = 
<span id="c">c</span><sup>2</sup></p>

<script>
function pythagorean(){
var a=document.getElementById("vara").value;
var b=document.getElementById("varb").value;
var x=a * a + b * b;
var c=Math.sqrt(x);

if(a>b){
    ay=0
bx=b/a*300
}
else{
ay=300-(a/b*300)
bx=300
}

document.getElementById("a").innerHTML=a;
document.getElementById("b").innerHTML=b;
document.getElementById("c").innerHTML=c;
document.getElementById('trianglepoints').setAttribute("points",bx+",300 0,300 0,"+ay);
}

</script>

<svg id="triangle xmlns="http://www.w3.org/2000/svg" version="1.1" height="300" width="300">
<polygon id="trianglepoints" points=""
style="fill:red;stroke:black;stroke-width:1;">
</svg>
<br />

<button type="button" onclick="pythagorean()">calculate</button> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T04:36:33.870

确保将返回的*String*值`element.value`转换为*Number*：

```
a = document.getElementById('vara').value;
a = +a;
-or-
a = Number(a); 
```

否则，当您比较`a > b`时，它将进行字符串比较，并且`'1001'`小于`'55'`（首先比较的第一个字符）。

# r - 用另一个向量替换向量中的值

> ID：12576241
> 
> 赞同：0
> 
> 时间：2012-09-25T04:31:30.733
> 
> 标签：r, vector

我有两个向量`x`和`y`。我想得到一个新的向量`z`，它是一个向量。在第一次迭代中，第一个元素是向量形式`y`，其余是第三个元素，直到向量结束`x`，在第二次迭代中，第二个元素来自向量`y`，其余来自向量`x`（第一个，第四个，第五个，.. . of vector `x`), ... 例如，这些向量如下：

```
 x = c(1, 3, 5, 6, 8)
  y = c(2, 4, 56, 77)

 > z
      [,1] [,2] [,3] [,4]
[1,]    2    5    6    8
[2,]    1    4    6    8
[3,]    1    3   56    8
[4,]    1    3    5   77 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:58:33.323

编写一个可以执行的函数

```
foo <- function(x,y,i){ x[i] <- y; x <- x[-(i+1)];x}
do_foo <- function(x,y){
 if(length(y) > length(x)) {stop('y is longer than x')}
 t(mapply(foo, i = as.list(seq_along(y)), y = as.list(y), MoreArgs =list(x =x)))
} 
```

例如

```
x <- 10:1
y <- 1:5

do_foo(x,y)
##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]
## [1,]    1    8    7    6    5    4    3    2    1
## [2,]   10    2    7    6    5    4    3    2    1
## [3,]   10    9    3    6    5    4    3    2    1
## [4,]   10    9    8    4    5    4    3    2    1
## [5,]   10    9    8    7    5    4    3    2    1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:55:07.510

```
> foo <- sapply(y, function(X) c(X, x[-c((which(y == X)+1), (which(y == X)))]))
> foo
     [,1] [,2] [,3] [,4]
[1,]  1.5  2.5  3.5  4.5
[2,]  3.0  1.0  1.0  1.0
[3,]  4.0  4.0  2.0  2.0
[4,]  5.0  5.0  5.0  3.0

> foo[, 1]
[1] 1.5 3.0 4.0 5.0
> foo[, 2]
[1] 2.5 1.0 4.0 5.0
> foo[, 3]
[1] 3.5 1.0 2.0 5.0
> 
If you need them sorted:

> foo[order(foo[, 2]) ,2]
[1] 1.0 2.5 4.0 5.0

> foo[order(foo[, 3]) ,3]
[1] 1.0 2.0 3.5 5.0 
```

# vim - vim 从当前光标位置放一行到下一行

> ID：12576244
> 
> 赞同：3
> 
> 时间：2012-09-25T04:31:44.623
> 
> 标签：vim

您可以在当前行使用 Shift + j 在 vi​​m 中拉出一行。你如何做相反的事情，即将光标后面的所有单词放在当前行的下方？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T05:20:04.853

我去了我想剪线的空白处并点击`r<CR>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T04:36:51.253

这样做非常简单，大多数人只需进入插入模式，在其中插入换行符并像这样返回正常模式`i<entr><esc>`没有更快的方法可以做到这一点，但是如果你真的想要，你可以将它映射到一个键在你的 vimrc 中。

# android - 使用 AlarmManager (Android) 设置和取消闹钟

> ID：12576245
> 
> 赞同：1
> 
> 时间：2012-09-25T04:31:45.717
> 
> 标签：android, alarmmanager

这是一篇要求确认（或反驳）我认为在 Android 中发生的警报的帖子。这个主题在博客和 StackOverflow 帖子中经常出现，但我还没有找到对这两点的明确解释（下）。

下面的代码旨在设置和报警，然后取消设置。这没用。

```
 Intent intent = new Intent(context, AlarmReceiver.class);
    intent.setAction(AlarmReceiver.ALERT_GUARD_CHECKIN);
    PendingIntent sender = PendingIntent.getBroadcast(context, _id, intent,
            PendingIntent.FLAG_ONE_SHOT);

    AlarmManager am = (AlarmManager) context
            .getSystemService(Context.ALARM_SERVICE);
    am.set(AlarmManager.RTC_WAKEUP, now.getTime().getTime(), sender);

    Intent toCancel = new Intent(context, AlarmReceiver.class);
    toCancel.setAction(AlarmReceiver.ALERT_GUARD_CHECKIN);
    PendingIntent pendingToCancel = PendingIntent.getBroadcast(context,
            _id, toCancel, PendingIntent.FLAG_CANCEL_CURRENT);
    am.cancel(pendingToCancel); 
```

如果不是将 PendingIntent.FLAG_ONE_SHOT 传递给 PendingIntent.getBroadast() 的第一次调用，而是传递零，它确实有效。我不相信这种行为被记录在案。

如果 PendingIntent.getBroadast() 的第二个参数（上图，_id）不相同，该代码也不起作用。我不相信这是记录在案的。在 Android 文档中，第二个参数记录为“发件人的私人请求代码（当前未使用）”。

问题是我是否正确地描述了这种行为，或者这些概括是否是表象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T05:07:03.547

你必须传递一个`PendingIntent`相当于`cancel()`你用来注册警报的那个。这意味着使用相同的意图、标志和请求代码。与文档可能让您相信的相反，它实际上也检查了请求代码值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:01:45.650

您是否有 Android 清单中定义的警报接收器？

# windows-7 - 无法在 Windows 7 中使用来自 Adob e Air SDK 的 adt、adl 命令

> ID：12576246
> 
> 赞同：0
> 
> 时间：2012-09-25T04:31:50.680
> 
> 标签：windows-7, air, path, adobe, adt

我是一个完整的初学者，如果有人可以帮助我，我将非常感激。

我刚刚在我的 64 位 Windows 7 中安装了 Adob​​e AIR 运行时和 Adob​​e Air SDK。

根据“Adobe Air for Dummies”和其他有关安装 SDK 的各种文章的说明，我`C:\airsdk\bin`通过“系统属性”设置了路径。

我用作参考的一些：http: [//help.adobe.com/en_US/air/build/WSfffb011ac560372f-71994050128cca87097-8000.html#WS2d929364fa0b8137-78b25bdf12a498897d1-7fff](http://help.adobe.com/en_US/air/build/WSfffb011ac560372f-71994050128cca87097-8000.html#WS2d929364fa0b8137-78b25bdf12a498897d1-7fff) 和 A [​​dt，Adl 命令没有被 Windows 识别](https://stackoverflow.com/questions/7359274/adt-adl-command-is-not-getting-recognized-by-windows)

当我`set path`在 cmd 输入时，它列出了所有路径，我可以`...; C:\airsdk\bin`清楚地看到那里列出。

但是，当我输入cmd 进行检查时，如果我只是按照“Adobe Air for Dummies”输入`adt -version`，它会给出相同的结果。`'adt' is not recognized as an internal or external command, operable program or batch file.``adt`

我已重新启动计算机；在其他地方创建了另一个 airsdk 文件夹并链接到这个新 airsdk 的 bin 文件夹的路径，根据[http://www.youtube.com/watch?v=kRVSMJFTx94&feature=relmfu](http://www.youtube.com/watch?v=kRVSMJFTx94&feature=relmfu)创建了“新系统变量” （变量名称：airsdk，变量值： ) ，`C:\airsdk\bin\adl.exe`直接在环境变量中创建路径；没有任何效果。它仍然是。`C:\airsdk\bin\adt.bat``C:\airsdk\bin\adl.exe``'adt' is not recognized as an internal or external command, operable program or batch file.`

我的东西和想法都用完了，我迫切需要使用 Adob​​e Air。所以，如果有人有任何想法我可以尝试，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:57:04.010

```
Variable name: airsdk, Variable Value: C:\airsdk\bin\adl.exe 
```

当然不会识别 adt 或 adl，您将变量命名为“airsdk” :) 尝试输入

```
airsdk -help 
```

这应该会为 adl.exe 带来帮助（因为这是您重视的地方）。然而，最简单的方法，我将列出几个简单易行的步骤：

```
 - Click start >  right-click Computer > Properties > Advanced system settings
  - In System Variables, scroll down to the one named "Path" and click "edit" 
  - bring your cursor to the end of the variable value (it should end with a ; ) 
  - Add the path to the bin folder of the Air SDK. ( in your case C:\airsdk\bin)
  - click ok, ok, then voila!  no need to even restart. 
```

我确实意识到您在帖子中首先提到您尝试过这样的事情，因为这就是“Adobe for Dummies”中所说的，但如果您遵循这些确切的步骤，您应该没有问题。

如果不是这种情况，请发表评论，我会再看看。

# html - 从 Google Chrome 中的 Inspect Element 复制代码

> ID：12576247
> 
> 赞同：32
> 
> 时间：2012-09-25T04:32:17.637
> 
> 标签：html, google-chrome, inspect-element

我目前正在开发一个 HTML 网站，我想从其他网站复制一些代码。但是，当我进入检查元素功能并尝试仅复制部分代码时，它最终会复制整个脚本。有什么方法可以从检查元素中获取部分代码，而不必复制整个内容并删除我在 Dreamweaver 中不需要的部分？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-25T04:41:28.017

右键单击特定元素（例如`div`, `table`）`td`并选择**副本为 html**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-17T11:51:39.977

在早期版本的 Chrome 中，我们可以简单地选择和复制一个元素（使用 Ctrl+C 或 Cmd+C），然后通过选择它然后粘贴（使用 Ctrl+V 或 Cmd+V）将其粘贴到元素中。不过，在最新版本中这是不可能的（我正在运行 Chrome 58.0.3029.110），从那时起它已经让我多次设置。

我们现在必须右键单击元素 -> 复制 -> 复制元素，而不是使用复制和粘贴命令，然后右键单击要将复制的元素附加到的元素 -> 复制 -> 粘贴元素。

我不明白为什么短命令被停用，但至少仍然可以以更不方便的方式进行操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-04T17:48:51.200

单击要复制的行或元素。复制到剪贴板。粘贴。

唯一棘手的事情是，如果您单击一条线，您将获得该线包含的所有内容（如果它被折叠）。例如，如果您单击一个 div 并进行复制，您将获得该 div 包含的所有内容。

您也可以通过右键单击获得所需的内容，然后选择“编辑为 HTML”。这将使该部分本质上是文本，而不会激活任何折叠。然后，您可以选择、复制和粘贴相关位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-19T05:52:56.800

您可以通过检查元素复制并定位要复制的 div。只需按 ctrl+c，然后您的 div 将被复制并粘贴到您的代码中，它将轻松运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-11T09:04:31.517

如果您需要复制整个页面，

1.  到了页面的html标签。
2.  右键单击它。
3.  选择“复制->复制元素”选项

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-03-03T15:30:41.670

最好的解决方案不是打开检查元素 -> 右键单击​​ -> 查看页面源 -> 然后复制整个代码。

此解决方案适用于 Chrome。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-10-03T08:06:07.783

(eg: div,footer,table) **右键 -> Edit as HTML**

然后，您可以在任何需要的地方复制和粘贴...

这就是享受你的编码......

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-08-09T09:21:05.930

你不必在谷歌浏览器中这样做。使用 Internet Explorer，它提供了复制相关 css 的选项，在复制和粘贴后选择样式并将其放入另一个文件 .css 以调用您创建的那个 html。希望这能解决您的问题而不是其他任何事情:)

# varnish - 如何在 varnish 中调试 VCL？

> ID：12576248
> 
> 赞同：22
> 
> 时间：2012-09-25T04:32:23.690
> 
> 标签：varnish, varnish-vcl

我如何`print a log`在 VCL 中？

我可以在屏幕上打印日志信息吗？

我可以这样做吗？

```
sub vcl_recv {
  ....
  log.info(req.http.host); // can i write a log here?
  ....
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-25T11:05:45.947

您可以使用请求的 URL varnishlog 实用程序查看 URL（它能够写入日志文件）

```
varnishlog -i RxURL 
```

~~或者使用Varnish 3.x [https://www.varnish-cache.org/docs/trunk/reference/vmod_std.html#syslog](https://www.varnish-cache.org/docs/trunk/reference/vmod_std.html#syslog)~~ Varnish 5.1 [https://varnish-cache](https://varnish-cache.org/docs/5.1/reference/vmod_std.generated.html#func-syslog)的 vmod std 和 syslog 函数向 syslog 输出一些信息。 [org/docs/5.1/reference/vmod_std.generated.html#func-syslog](https://varnish-cache.org/docs/5.1/reference/vmod_std.generated.html#func-syslog)

例子：

```
import std;

sub vcl_recv {
  ...
  std.syslog(180, "RECV: " + req.http.host + req.url);
  ...
} 
```

或者在 Varnish 2.x 上使用 C-snippet [https://www.varnish-cache.org/trac/wiki/VCLExampleSyslog](https://www.varnish-cache.org/trac/wiki/VCLExampleSyslog)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-01-27T08:07:16.313

使用[vcl 配置文件](https://www.varnish-software.com/static/book/VCL_Basics.html)，导入附加的“标准库”，其中包括一堆实用功能：

```
import std;

# To 'varnishlog'
std.log("varnish log info:" + req.host);

# To syslog
std.syslog( LOG_USER|LOG_ALERT, "There is serious trouble"); 
```

v6.x - [https://varnish-cache.org/docs/6.0/reference/vmod_generated.html#void-log-string-s](https://varnish-cache.org/docs/6.0/reference/vmod_generated.html#void-log-string-s)

v5.x - [https://varnish-cache.org/docs/5.0/reference/vmod_std.generated.html?#func-log](https://varnish-cache.org/docs/5.0/reference/vmod_std.generated.html?#func-log)

v4.x - [https://varnish-cache.org/docs/4.0/reference/vmod_std.generated.html?#func-log](https://varnish-cache.org/docs/4.0/reference/vmod_std.generated.html?#func-log)

v3.x - [https://varnish-cache.org/docs/3.0/reference/vmod_std.html#log](https://varnish-cache.org/docs/3.0/reference/vmod_std.html#log)

也可以看看`man varnishlog`

# php - 具有多个查询字符串的 PHP 请求

> ID：12576249
> 
> 赞同：7
> 
> 时间：2012-09-25T04:32:27.320
> 
> 标签：php, url

我总是可以对此进行测试，但我想要一个 PHP 专家的官方回答（我肯定不是）。

如果有人提出这样的请求：

```
http://www.somedomain.com/a.php?param1=value1&param2=value2&param3=value3?param1=value4&param2=value5&param3=value6 
```

例如，当我尝试访问时会有什么样的后果`_GET['param2']`？看起来我只是得到了第一个值。在这种情况下，它将返回`value2`. 这是预期的行为吗？

第二个问号有什么影响吗？例如，会有错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T04:41:13.480

它只是定义了最后一个。在查询字符串中多次定义一个参数只会冒着获得潜在混淆结果的风险。最好在这些情况下验证您的查询字符串，至少*我*就是这样做的。

第二个问号将被视为其前一个参数*值的一部分。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T04:44:25.327

正式地，您不应该`?`在查询字符串中包含两个。如果你这样做，结果是不确定的。某些平台（例如 PHP）会将后续`?`字符视为与字符相同`&`，并允许这些值/对。其他人只会将值视为`param3`to be `value3?param1=value4`。

简短的回答：不要这样做。它变得不稳定。而且，作为服务器作者，应该始终仔细验证参数值，以确保这些值有意义。

# c# - 将 JavaScript RegEx 转换为 C# RegEx 以进行电子邮件验证

> ID：12576252
> 
> 赞同：-2
> 
> 时间：2012-09-25T04:32:57.183
> 
> 标签：c#, javascript, regex

如何将以下 javascript 正则表达式转换为 c# 正则表达式？

```
 function isValidEmailAddress(emailAddress) {
               var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
               return pattern.test(emailAddress);
 } 
```

简单地将字符串传递到 C# Regex 类并返回 Match 是行不通的。我认为字符串需要编辑，但我不是正则表达式专家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:38:59.467

在使用 C# 时，您应该能够使用[System.Net.Mail.MailAddress](http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddress.aspx)类验证电子邮件地址。你可以像这样使用它：

```
public bool IsValidEmailAddress(string emailAddress)
{
    try
    {
        MailAddress m = new MailAddress(emailAddress);
        return true;
    }
    catch (FormatException)
    {
        return false;
    }
} 
```

有时你可以不用正则表达式，特别是如果你不是专家的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T04:46:31.847

@Mark13426：这似乎是由于那里使用了 unicode 和八进制符号 beig 。

相反，你绝对可以选择这个正则表达式：

```
^(?("")("".+?""@)|(([0-9a-zA-Z]((\.(?!\.))|[-!#\$%&'\*\+/=\?\^`\{\}\|~\w])*)(?<=[0-9a-zA-Z])@))(?(\[)(\[(\d{1,3}\.){3}\d{1,3}\])|(([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,6}))$ 
```

有关更多信息，请参阅：

[http://msdn.microsoft.com/en-us/library/ff650303.aspx](http://msdn.microsoft.com/en-us/library/01escwtf.aspx)

[http://msdn.microsoft.com/en-us/library/01escwtf.aspx](http://msdn.microsoft.com/en-us/library/01escwtf.aspx)

# javascript - 通过 jQuery ajax 将 jQuery 构造的数组发送到 PHP

> ID：12576263
> 
> 赞同：0
> 
> 时间：2012-09-25T04:35:26.337
> 
> 标签：javascript, jquery, ajax, arrays, object

我似乎无法让这个对象通过 jQuery 的 ajax 传递给我的 PHP 文件。

```
$("body").on("submit", ".upload-results-form", function(){

        var photosJSON = [];

$(".upload-result-wrapper .upload-results .photos li").each(function(){

    var photoID = $(this).attr("rel");
    var description = $(".photo-upload-description", this).val();
    var source = $("img", this).attr("src");

    photosJSON.push({photoID: photoID, description: description, source: source});

});

var jsonData = JSON.stringify(photosJSON);

    $.ajax({
    type: "POST",
    url: "ajax/add/albums/photos_publish.php",
data: "photosJSON="+jsonData,
    cache: false,
    success: function(html){
        alert(html);        
    }
    });

}); 
```

我的 jsonData 看起来像这样：

```
[{"photoID":"47","description":"","source":"photos/50611a8725cca_224.jpg"},
{"photoID":"48","description":"","source":"photos/50611a8764881_224.jpg"},
{"photoID":"49","description":"","source":"photos/50611a87aa508_224.jpg"},
{"photoID":"50","description":"","source":"photos/50611a88dd34b_224.jpg"}] 
```

和我的 php 文件：

```
$photosJSON = json_decode($_POST['photosJSON']);
echo $photosJSON['photoID']; 
```

但是什么都没有返回，似乎没有任何东西被发送到php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:38:37.383

您必须将 javascript 对象转换为 JSON：

```
data: {photoDescriptions: JSON.stringify(photoDescriptions)}, 
```

然后，在您的 PHP 代码中：

```
$photoDescriptions = json_decode($_POST['photoDescriptions']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:11:40.420

首先要做的事情是：AJAX 调用的“数据”属性需要是一个对象，就像 timidboy 说的那样。

两个快速的健全性检查：

```
console.log(photosJSON); 
```

在 .each() 结束之后，并且

```
var_dump($_POST); 
```

在您的 PHP 页面中的某个位置。我怀疑，假设您遵循 timidboy 的更正，问题不在于您的 AJAX。例如，您确定 each() 迭代的标识符实际上与页面上的 DOM 元素匹配吗？

# ruby-on-rails - Rails 3 中的急切加载和映射

> ID：12576266
> 
> 赞同：0
> 
> 时间：2012-09-25T04:35:51.127
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

如果我想在 rails 中急切地加载一个集合并在 json 中呈现它，我将不得不做这样的事情。

```
@photos = @event.photos.to_json(:include => 
  {:appearances => {:include => :person}}
) 
```

如果我想映射这个集合怎么办？如您所见，它不再是一个集合，而是一个 json 字符串。在此必要的急切加载之前，我正在执行以下操作：

```
@photos = @event.photos.map{|photo| 
  photo['some_funky_stuff'] = photo.funky_calculation
  photo 
} 
```

但是，我似乎无法同时做这两件事：

```
@event.photos.map{|photo| 
  photo['some_funky_stuff'] = photo.funky_calculation
  photo 
}.to_json(:include => 
  {:appearances => {:include => :person}}
) 
```

上面没有显示“外观”（急切加载的加入记录）......我该如何一起做这两个？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:51:08.717

您可能将“急切加载”一词混为一谈。正如之前的答案所提到的，您需要在关联上使用它才能急切加载它。但是，当您`:include`在 to_json 调用中使用时，无论是否急切，您仍然会得到相同的结果。

但是要回答您的问题，对于 to_json 方法既包括外观又包括 funky_calculation 您可以将其结合起来`:methods`。试试这样：

```
@photos = @event.photos.to_json(
  :include => {:appearances => {:include => :person}},
  :methods => [: funky_calculation]
) 
```

如果您想要提高性能（急切加载），那么也可以在关联上使用 include：

```
@photos = @event.photos.includes(:appearances => :person).to_json(
  :include => {:appearances => {:include => :person}},
  :methods => [: funky_calculation]
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:39:29.877

`includes`您可以在 has_many 关联之后使用预加载

```
@photos = @event.photos.includes(:appearances => [:person]).to_json 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T06:39:47.797

您可能想尝试在照片上使用`joins()`或`includes()`，而不是作为`to_json()`.

[http://guides.rubyonrails.org/active_record_querying.html#using-array-hash-of-named-associations](http://guides.rubyonrails.org/active_record_querying.html#using-array-hash-of-named-associations)

# android - android环境变量::用户配置文件什么的？

> ID：12576267
> 
> 赞同：2
> 
> 时间：2012-09-25T04:35:51.220
> 
> 标签：android

我想更改应用程序用户的环境变量（假设我有 root 权限）。“应用程序用户”（如 app_0、app_1 ...）如何加载他们的环境变量？例如，在 ubuntu 中，我可以通过 .bashrc 或 /etc/profile 等更改环境变量。app_X 用户的 .bashrc 等用户配置文件在哪里？

```
# su app_0
$ export
ANDROID_ASSETS
ANDROID_BOOTLOGO
ANDROID_DATA
ANDROID_PROPERTY_WORKSPACE
ANDROID_ROOT
ASEC_MOUNTPOINT
BOOTCLASSPATH
EXTERNAL_STORAGE
LD_LIBRARY_PATH
LOOP_MOUNTPOINT
PATH
PWD
$ echo ~
~
$ echo $PATH
/sbin:/vendor/bin:/system/sbin:/system/bin:/system/xbin
$ echo $PWD
/data/data
$ echo $LD_LIBRARY_PATH
/vendor/lib:/system/lib
$ cd ~
cd: can't cd to ~
$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:04:39.757

Android 中没有每个用户的变量。您可以通过修改引导脚本来更改全局脚本，但这可能会产生不良影响，除非您只是添加一个新脚本。 `init*`文件一般在`/`.

# jboss - 如何在 Eclipsce juno 中开发 Liferay 项目并在 Jboss 上构建它

> ID：12576268
> 
> 赞同：2
> 
> 时间：2012-09-25T04:35:52.567
> 
> 标签：jboss, liferay, liferay-ide

我已经下载了带有 jboss 7.1.1 Bundle 和 Liferay IDE(Eclipsce Juno) 的 Liferay 6.1。我所要做的就是开发 Liferay 项目并在 Jboss 服务器上运行它。

我可以在 localhost:8080/ 中运行和打开 liferay 门户

我在开发 Liferay 门户项目时遇到问题。由于 IDE 中 Liferay 的默认服务器适配器是 Tomcat 7.0，我无法找到 Jboss 服务器适配器。我尝试在 Tomcat 上运行和部署它并通过独立运行来运行 Jboss 服务器.bat 文件。

请在 Jboss 上开发和运行 Liferay 项目提供建议和帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:10:31.513

[Liferay Wiki 中](http://www.liferay.com/community/wiki/-/wiki/Main/Liferay+IDE+Non-Tomcat+Server+Bundles)有关于使用非 Tomcat Liferay 包进行开发的指南。在那里，您可以了解这种开发的缺点以及如果您仍然需要如何做。

但我同意，使用 Tomcat 开发绝对是更好的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:12:34.197

Liferay IDE 在tomcat 启动的时候就只适合用Tomcat 开发，其简单的结构和相对容易的配置使其成为开发环境的理想选择。

如果您是开发插件项目，如主题、portlet、钩子、布局等，那么如果它在 tomcat 上工作，那么它可以在运行 Liferay 的任何其他服务器上工作，因此在开发期间您可以使用 tomcat，然后当您完成开发迭代（即当您的项目准备好部署以进行测试或用于舞台环境时）您可以将 WAR 部署到 Jboss 进行测试，并且可以进行一些测试以查看它是否正常工作。

由于插件是以独立于底层服务器的方式制作的，因此在 Tomcat 上开发它们然后在 Jboss 上运行它们应该没有任何问题。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T16:40:53.840

我通过解决方法实现了它，提到的步骤@ [https://www.liferay.com/community/forums/-/message_boards/message/17864836](https://www.liferay.com/community/forums/-/message_boards/message/17864836)

Liferay IDE 插件+ JBoss 作为 IDE 中配置的运行时的好处。唯一的问题是您需要使用任何其他支持 JBoss AS 7.1.1 的基于 Eclipse 的 IDE 作为普通服务器/运行时（如 JBoss Developer Studio）。

# net-snmp - net-snmp agentx 重新启用

> ID：12576275
> 
> 赞同：0
> 
> 时间：2012-09-25T04:36:45.993
> 
> 标签：net-snmp

我在 Ubuntu Linux 上的 c++ 应用程序代码中嵌入了一个 net-snmp agentx 子代理。我想在 agentx 子代理工作后禁用它，然后再次重新启用它。我成功地设置了代理，从命令行使用 snmpget 轮询 mib 并使用 snmp_shutdown 禁用 agentx 套接字连接，但是一旦禁用它，我就无法再次重新启用套接字连接。

感谢任何帮助/指针。

我使用以下代码初始化 SNMP 库和 agentx 套接字连接。

一开始，初始化 AgentX 子代理 -

```
netsnmp_ds_set_boolean(NETSNMP_DS_APPLICATION_ID, NETSNMP_DS_AGENT_ROLE, 1);
        netsnmp_ds_set_int(NETSNMP_DS_APPLICATION_ID, NETSNMP_DS_AGENT_AGENTX_PING_INTERVAL, 120);
        netsnmp_ds_set_string(NETSNMP_DS_APPLICATION_ID, NETSNMP_DS_AGENT_X_SOCKET, m_agentx_socket.c_str());

/* initialize the agent library */
init_agent("MyApp");
// initialise MIB module
init_snmp("MyApp"); 
```

使用 snmpget 轮询 MIB 并使用以下功能禁用连接 -

```
snmp_shutdown("MyApp");
SOCK_CLEANUP; 
```

到目前为止工作正常。

然后我使用下面的代码重新启用连接，但这不起作用。

```
netsnmp_ds_set_boolean(NETSNMP_DS_APPLICATION_ID, NETSNMP_DS_AGENT_ROLE, 1);
        netsnmp_ds_set_int(NETSNMP_DS_APPLICATION_ID, NETSNMP_DS_AGENT_AGENTX_PING_INTERVAL, 120);
        netsnmp_ds_set_string(NETSNMP_DS_APPLICATION_ID, NETSNMP_DS_AGENT_X_SOCKET, m_agentx_socket.c_str());

/* initialize the agent library */
init_agent("MyApp");
init_snmp("MyApp"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:12:42.640

我认为您必须在关闭二进制文件后重新运行它。您还没有在这里澄清为什么要重新启动agentx。如果您这样做是为了经常获取一些数据。比我猜你可以在代码中使用时间跨度的睡眠命令尝试无限循环。这将是更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T17:13:26.837

我在 net-snmp-5.7.2 的 README.agentx 文件中找到了以下信息（目前在[http://www.net-snmp.org/docs/README.agentx.html](http://www.net-snmp.org/docs/README.agentx.html)可见：

> 类似地，在主代理收到三个对死连接的请求（并因此取消注册）之前，子代理将无法代替已失效的同事重新注册。

因此，尽管您尝试完全关闭，但主服务器似乎仍然注册了您的子代理。也许您可以尝试在您的子代理被禁用时发出三个或更多请求，然后继续您的重新注册。

# ubuntu - VMware Player 已安装，但我无法在我的机器上找到它

> ID：12576281
> 
> 赞同：-2
> 
> 时间：2012-09-25T04:37:26.930
> 
> 标签：ubuntu, vmware

我正在运行 ubuntu 11.10 并按照[本](http://debianhelp.wordpress.com/2011/11/22/how-to-install-vmware-player-in-ubuntu/)教程安装了 VMware Player，最后我得到了一个成功的安装窗口，但是当我关闭它并尝试在我的机器上找到 VMware 时它不存在......我到底是什么失踪？有没有人遇到过这个？

![这是我收到的成功安装消息](../Images/31ee5b3c4c7a381a8d0b47d02884b68e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:43:07.683

我下载了 VIX 而不是 Player。乌普兹 ：/

# mysql - “SQL_NO_CACHE”指令是否阻止查询使用缓存，或者只是阻止查询？

> ID：12576288
> 
> 赞同：1
> 
> 时间：2012-09-25T04:38:39.567
> 
> 标签：mysql, caching

该手册指出“SQL_NO_CACHE”会阻止将查询**添加**到缓存中。但我可以看到，它没有说明使用缓存的任何内容。

我正在尝试对查询的两个版本进行基准测试，但它们已经在没有“SQL_NO_CACHE”的情况下运行。所以我不知道我的测试是否使用了查询缓存。

“SQL_NO_CACHE”指令是否阻止查询使用缓存，或者只是阻止查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T05:33:23.623

MySQL 查询缓存是基于查询的完整文本索引的，因此在功能上没有区别：即使忽略该指令，查询的结果`SQL_NO_CACHE`也会存储在与查询不同的缓存“槽”中没有`SQL_NO_CACHE`。（事实上​​，简单地在某处的查询中添加一个空格，或者将“SELECT”更改为“select”——例如——也会“破坏”查询缓存，使其再次运行。MySQL 查询缓存并不是特别复杂。 )

话虽如此，通过运行查询`SQL_NO_CACHE`并观察`QCACHE_QUERIES_IN_CACHE`状态的快速测试确认`SQL_NO_CACHE`确实阻止了变量存储在缓存中，并且查看[源代码](https://github.com/twitter/mysql/blob/master/sql/sql_cache.cc#L1499)看起来好像`SQL_NO_CACHE`也会阻止 MySQL 检查缓存为结果。

# javascript - window.open 在新的弹出窗口中打开而不是在新标签中

> ID：12576290
> 
> 赞同：1
> 
> 时间：2012-09-25T04:39:22.860
> 
> 标签：javascript, jquery

这是我的ajax请求

```
 $.ajax({
        type: "POST",
        url: "Performance.aspx/GenerateMatrix",
        data: '{OrgId: ' + $('#hidOrgId').val() + ',SurveyFormId: ' + $('#divMatrixInfo .FeedbackForm').val() + ',GoalId: ' + $('#divMatrixInfo .FeedbackGoal').val() + ',StartDate: ' + "'" + StartDateTime + "'" + ',EndDate: ' + "'" + EndDateTime + "'" + ',EmployeeId: ' + "'" + $('#divMatrixInfo .FeedbackEmployee').val() + "'" + ',QuestionId: ' + "'" + $('#divMatrixInfo .FeedbackQuestion').val() + "'" + '}',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (response) {
                        CloseModelOverLay('divMatrixInfo');
                        window.open('GenerateMatrix.aspx', '_blank');
                        $('#ddlPDPView').val('Goals');
                        $('#ddlPDPView').change();
        },
        failure: function (response) {
                        alert(response.d);
        }
      }); 
```

我想通过这个打开 GenerateMatrix.aspx 在新选项卡中打开

```
window.open('GenerateMatrix.aspx', '_blank'); 
```

但它会在新的弹出窗口中打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:57:05.680

尝试这个：

```
var newWindow = window.open('http://www.example.com','_blank');

$.ajax({
    type: "POST",
    url: "Performance.aspx/GenerateMatrix",
    data: '{OrgId: ' + $('#hidOrgId').val() + ',SurveyFormId: ' + $('#divMatrixInfo .FeedbackForm').val() + ',GoalId: ' + $('#divMatrixInfo .FeedbackGoal').val() + ',StartDate: ' + "'" + StartDateTime + "'" + ',EndDate: ' + "'" + EndDateTime + "'" + ',EmployeeId: ' + "'" + $('#divMatrixInfo .FeedbackEmployee').val() + "'" + ',QuestionId: ' + "'" + $('#divMatrixInfo .FeedbackQuestion').val() + "'" + '}',
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (response) {
                    CloseModelOverLay('divMatrixInfo');
                    newWindow.focus();
                    $('#ddlPDPView').val('Goals');
                    $('#ddlPDPView').change();
    },
    failure: function (response) {
                    alert(response.d);
    }
  }); 
```

# .net - .NET：从串口读取数据

> ID：12576292
> 
> 赞同：3
> 
> 时间：2012-09-25T04:40:02.843
> 
> 标签：.net, serial-port, arduino, .net-gadgeteer

我正在使用如下代码读取发送到串行端口（即 COM3）的数据：

```
_serialPort.PortName = "COM3";
_serialPort.BaudRate = 9600;
_serialPort.Parity = Parity.None;
_serialPort.DataBits = 8;
_serialPort.StopBits = StopBits.One;
_serialPort.ReadTimeout = 500;
_serialPort.WriteTimeout = 500;
_serialPort.DataReceived += new SerialDataReceivedEventHandler(_serialPort_DataReceived);
_serialPort.Open(); 
```

来自该串行端口的数据是命令，可以是以“\0”结尾的任意长度的字符串。我正在寻找有关如何有效读取此类数据的最佳实践。我认为生产者/消费者模式可能是最好的，其中：

1.  每次触发 DataReceived 事件时，我都会从端口读取字符串并附加到字符串缓冲区或其他结构
2.  然后我有另一个线程不断检查 char '\0' 的字符串缓冲区或结构，如果找到，则解析并删除命令字符串。

这会是处理这个问题的最有效方法吗？是否有任何不依赖于 dataReceived 事件的阻塞串行读取功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T17:18:12.817

我发现该`dataReceieved`事件可能会过于频繁地触发并且确实会阻止`SerialPort`代码在事件中运行的时间。你说你可能想要这个功能，但这里有更多可能有用也可能没用的信息。

我使用 a `Timer`，通常为 10  [Hz](http://en.wikipedia.org/wiki/Hertz)。在中`Timer`，我检查`SerialPort.BytesToRead > 0`。然后我使用`SerialPort.ReadLine`which 读取一行文本并保存大量代码来处理入站缓冲区。

如果您使用`Loop`until `BytesToRead == 0`，则将每一行读入缓冲区以供以后处理或在读取后直接处理。

如果`ReadTimeout`您知道 Arduino 构建一行文本需要多长时间，并且`Exception`如果仅在`ReadTimeout`.

# java - 使用 Java 录制系统声音

> ID：12576295
> 
> 赞同：0
> 
> 时间：2012-09-25T04:40:17.023
> 
> 标签：java, audio, system, record

如何获取系统声音（哔哔声等），然后录制并输出到声音文件？我可以从线路中获得声音 - 在麦克风中，但我无法弄清楚如何获得实际的系统声音。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-27T18:23:58.967

这是一个长期没有答案的问题，也让我感到沮丧。

我找到了一种捕获/记录 Windows 音频输出的方法，但它更像是一项黑客工作，而不是一个实际的解决方案。[免责声明：这是我的博客。](http://learningthroughfailure.blogspot.com/2014/08/i-have-done-something-no-one-else-has.html)我这样说是因为我发现 Java 没有从指定的音频设备捕获数据 [参见官方访问音频系统资源 Java 教程（尽管您可以列出所有音频 I/O 设备/音频端口，[参见: Programming JavaSound](http://www.developerfusion.com/article/84314/wired-for-sound/) )，而是只使用默认设备（这就是我“解决”问题的方式）。

然而，这引入了一个问题，因为默认录音设备不再是麦克风，您不能再从麦克风作为另一个输入进行录音；虽然，使用 Port.Info 类来捕获麦克风可能是解决此副作用的一种可能方法。

我希望这将有所帮助。

# dotnetnuke - Dotnetnuke 更新显示名称未立即显示

> ID：12576296
> 
> 赞同：0
> 
> 时间：2012-09-25T04:41:06.557
> 
> 标签：dotnetnuke

在每个皮肤的 dnn 中，我都放置了一个`<dnn:User`控件。该应用程序允许用户更新他们的显示名称（除了电子邮件）。

当用户更新电子邮件地址并单击页面刷新时的更新时，它不会反映在皮肤上。新电子邮件不会显示在皮肤上。

当我注销并登录时，它显示正确。

我正在使用 DotnetNuke 会员资格

如果我观察到 clearcache 没有清除当前用户信息，则成功调用 UpdateUser 后。

**如果我看到 httpcontext.Current.Items["UserInfo"] 我仍然可以看到旧电子邮件等。**

在我注销并再次登录后，我可以看到更新的新配置文件。

有什么解决方法吗

如何解决这个问题呢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T10:31:02.150

用户将被缓存 - 因此请确保您使用 API 更新显示名称。

```
 this.UserInfo.DisplayName = "New Name";
                UserController.UpdateUser(PortalId, this.UserInfo); 
```

# php - WAMP中的PHP无法访问映射驱动器

> ID：12576301
> 
> 赞同：3
> 
> 时间：2012-09-25T04:41:56.843
> 
> 标签：php, wamp, mapped-drive

相对的：

[映射网络驱动器](https://stackoverflow.com/questions/2592910/mapped-network-drives)

[服务无法访问映射的驱动器](https://stackoverflow.com/questions/2763271/service-not-able-to-access-a-mapped-drive)

[PHP is_dir 和 mkdir 在映射的网络驱动器上不起作用](https://stackoverflow.com/questions/11872803/php-is-dir-and-mkdir-not-working-on-mapped-network-drive)

我知道这是很老派的，但我就是想不通...

在带有 wamp（apache 2.2、PHP 5.3.10）的 Windows 2003 上作为服务运行。按照上面的链接，我已经让它运行`Administrator`而不是`SYSTEM`. 但仍然没有运气。

我做了一个`.bat`文件来说明清楚：

```
@echo off
whoami
net use
php -r "var_dump(scandir('Z:\\'));"
php -r "var_dump(scandir('\\\\192.168.211.86\\voice'));"
php -r "var_dump(scandir('//192.168.211.86/voice'));" 
```

如果我运行它`cmd`，结果是：

```
serv2003\administrator
New connections will be remembered.

Status       Local     Remote                    Network
-------------------------------------------------------------------------------
OK           R:        \\192.168.211.86\voice    Microsoft Windows Network
OK           Z:        \\192.168.211.86\voice    Microsoft Windows Network
The command completed successfully.

array(5) {
  [0]=>
  string(1) "."
  [1]=>
  string(2) ".."
  [2]=>
  string(6) "Folder"
}
array(5) {
  [0]=>
  string(1) "."
  [1]=>
  string(2) ".."
  [2]=>
  string(6) "Folder"
}
array(5) {
  [0]=>
  string(1) "."
  [1]=>
  string(2) ".."
  [2]=>
  string(6) "Folder"
} 
```

但如果我在 Apache 中运行它：

```
<body><pre>
<?php
echo `C:\path\to\test.bat`;
?>
</pre></body> 
```

它输出：

```
serv2003\administrator
New connections will be remembered.

Status       Local     Remote                    Network
-------------------------------------------------------------------------------
Unavailable  Z:        \\192.168.211.86\voice    Microsoft Windows Network
The command completed successfully.

Warning: scandir(Z:\): failed to open dir: No such file or directory in Command line code on line 1

Warning: scandir(): (errno 2): No such file or directory in Command line code on line 1
bool(false)

Warning: scandir(\\192.168.211.86\voice): failed to open dir: No such file or directory in Command line code on line 1

Warning: scandir(): (errno 2): No such file or directory in Command line code on line 1
bool(false)

Warning: scandir(//192.168.211.86/voice): failed to open dir: No such file or directory in Command line code on line 1

Warning: scandir(): (errno 2): No such file or directory in Command line code on line 1
bool(false) 
```

请注意，是的`R:`，Apache 模块中缺少驱动程序，但由于我正在访问`Z:`，我认为这不是问题。

我无权访问远程文件夹，也无法将所有文件复制到本地系统。我所需要的只是能够在 PHP 中阅读它们。我能做些什么？

提前致谢！

**编辑 1**：

不确定这是否重要，但我正在通过远程桌面访问此服务器（它在地理位置上离我很远）。

并且`\\192.168.211.86\voice`使用用户名/密码进行映射。

以上所有练习都是在同一个登录会话中运行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:33:43.803

尝试手动安装 Apache、PHP 和 MySQL。有一次，当我尝试使用 Curl（在 PHP CLI 模式下）运行代码时，我对 WAMP 感到非常头疼，并且花了好几天的时间来调查问题所在，因为那天我从未将预捆绑包安装到任何测试环境中。

此链接将指导您：[http ://docs.joomla.org/Setting_up_Apache,_PHP_and_MySQL_manually](http://docs.joomla.org/Setting_up_Apache,_PHP_and_MySQL_manually)

还要检查服务器防火墙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T21:44:33.957

设置所有服务是不必要的。问题出在 wamp 和 apache 上，当您使用网络驱动器时，apache 无法启动，在这种情况下 wamp 的颜色通常为黄色，或者 apache 出现错误。确保使用 cmd 行打开 httpd.exe。您会看到一个错误“驱动器找不到，apache 无法启动等”。毕竟，您可能意识到问题是 wamp 上的 apache 无法作为服务启动。本文档将为您提供帮助。

[Apache 网络驱动器别名](https://stackoverflow.com/questions/7431658/apache-network-drive-alias/15569986#15569986)

# c# - 发送消息在 Chrome 中工作正常，在 Firefox 和 IE 中失败

> ID：12576303
> 
> 赞同：2
> 
> 时间：2012-09-25T04:42:17.857
> 
> 标签：c#, asp.net-mvc-3, signalr

我正在使用 SignalR 向我的客户发送实时更新的消息。

**在 Chrome、Firefox 和 IE 中**接收消息工作正常。**意思是，我可以从我的服务器从我的集线器发送一些东西，它可以毫无问题地到达客户端。**

 **```
public void Receive(string whatever)
{
    // This correctly invokes a function on the clients end.
    Client.sayHello("Test");     
} 
```

**从客户端向服务器发送**消息在 Firefox 和 IE 中都不起作用，但在 Google Chrome 21 上可以正常工作。

在 Firefox 上，使用 Firebug 的控制台，这些是页面加载后立即触发的事件序列：

```
GET http://localhost:12962/signalr/signalr/negotiate?_=1348547579430 200 OK 12ms
POST http://localhost:12962/signalr/signalr/send?transport=serverSentEvents&connectionId=b6fdd67f-6a71-4e5f-80cf-9e2b90cc7fe3 200 OK 
```

在 Google Chrome 上，该 POST 永远不会被调用，也许这就是它在那里工作的原因。我所看到的只是一个 POST`negotiate`和`connect`. 这是我在学习完教程之后所期待的，自从[SignalR 出现以来，我一直期待着](http://lostinthegc.wordpress.com/2011/09/01/signalr-with-mvc3-chat-app-build-asynchronous-real-time-persistant-connection-websites/)！

在 Firefox 上，每次我单击应该向服务器发送消息的按钮时，都会在控制台中记录：

```
$(document).ready(function() {
     var chat = $.connection.chat;

    /* Actions when someone clicks the Bid button. */
    $(".pujar").click(function () {
        chat.receive($(this).siblings('.auction-id').text());
        $(this).parent().siblings('.seconds').text('15');
    });

    chat.updateAuction = function (message) {
        var result = $.parseJSON(message);

        var divId = "#" + result.AuctionId;
        $(divId + " .seconds").text("15");
        $(divId + " .stat .amount").html("$" + result.LanceCost);
        $(divId + " .stat .latestbidder").html(result.LatestBidder);
        $(divId + " .stat").fadeOut().fadeIn();
    };

    $.connection.hub.start();
});

POST http://localhost:12962/signalr/signalr/send?transport=serverSentEvents&connectionId=b6fdd67f-6a71-4e5f-80cf-9e2b90cc7fe3 200 OK 16ms

Params
connectionId    b6fdd67f-6a71-4e5f-80cf-9e2b90cc7fe3
transport   serverSentEvents

Post
data    {"hub":"chat","method":"Receive","args":["1"],"state":{},"id":1}

Response
{"State":{},"Result":null,"Id":"1","Error":null,"StackTrace":null} 
```

任何想法是什么导致了这个非常奇怪的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:07:14.370

您可能会在连接开始之前触发“发送”到服务器。

试试这个：

```
$(document).ready(function() {
     var chat = $.connection.chat;    

    chat.updateAuction = function (message) {
        var result = $.parseJSON(message);

        var divId = "#" + result.AuctionId;
        $(divId + " .seconds").text("15");
        $(divId + " .stat .amount").html("$" + result.LanceCost);
        $(divId + " .stat .latestbidder").html(result.LatestBidder);
        $(divId + " .stat").fadeOut().fadeIn();
    };

    $.connection.hub.start().done(function() {
        /* Wire up click event after the connection has been started */
        $(".pujar").click(function () {
            chat.receive($(this).siblings('.auction-id').text());
            $(this).parent().siblings('.seconds').text('15');
        });
    });
}); 
```

请注意，对于您的服务器端代码，您没有在客户端上提供“sayHello”功能，因此我假设您只是没有将其包含在您的代码段中。客户也应该是客户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-31T02:16:51.713

我今天有同样的问题。我的问题原来是我在 jquery click 事件上向集线器传递了一个更新（数据库更改），然后将 click 事件设置为恢复它的默认操作（这改变了当前页面）。在一位同事的一些好的建议之后，我将这些事件移到了接收页面上的 document.ready 中，它解决了我看到的问题。Chrome 必须等待这些请求完成，而 Firefox 和 IE 会在它们花费太长时间时将其杀死。**

# android - 使用 NFC 标签连接到 802.1x WiFi

> ID：12576304
> 
> 赞同：5
> 
> 时间：2012-09-25T04:42:32.013
> 
> 标签：android, nfc, wifi

我正在尝试编写 NFC 标签，以便能够将 Android 设备自动连接到具有 802.1x 基于网络的安全性的 WiFi 网络。我可以使用 WEP、WPA 和 WPA2 保护的 WiFi 网络轻松做到这一点，但是否可以为 802.1x 做到这一点？如果是这样，我该怎么做？另外，我很确定我完全误解了 802.1x。

# iphone - 如何将加密数据插入到 sqlite。插入加密数据时出错

> ID：12576312
> 
> 赞同：0
> 
> 时间：2012-09-25T04:43:58.767
> 
> 标签：iphone, objective-c, ios, sqlite, ios5

如何将加密数据插入到 sqlite。插入加密数据时出现错误。bcos 加密了这么多单引号和双引号，所以在创建我的 sql 时，字符串正在中断。有没有其他方法可以插入数据而不会丢失数据。我也害怕使用添加斜杠方法 bsoc 它可能会改变我的实际加密数据。谁能给我一个建议.. 另外请在下面找到我的插入查询功能

```
-(BOOL) insertItemData:(NSString *)encryptedData folderId:(NSString *)folderId
{
   bool giveBackValue = 0;

   database = [[[DBConnection alloc] init] autorelease];

  if(sqlite3_open([[database filePath] UTF8String], &db) == SQLITE_OK)
  {
    NSString *sql = [[[NSString alloc] initWithFormat:@"INSERT INTO tbl_content (FolderId, Content) VALUES ('%@', '%@');", folderId, encryptedData] autorelease];
    NSLog(@"%@",sql);
    char *sqlError;
    if(sqlite3_exec(db, [sql UTF8String], nil, nil, &sqlError) == SQLITE_OK)
    {
        giveBackValue = 1;
    }
    else
    {
        //Query exec failed

    }
}
else
{
    //DB Open failed
}

return giveBackValue;
} 
```

我的选择查询功能

```
-(void)getFirstJsonListInFolder:(NSString *)folderId listCarrier:(NSMutableArray **)listCarrier
{
    database = [[[DBConnection alloc] init] autorelease];
    NSMutableArray *dummyListCarrier = [[[NSMutableArray alloc] init] autorelease];

    if (sqlite3_open([[database filePath] UTF8String], &db) ==SQLITE_OK)
    {
        NSString *sql = [[NSString alloc] initWithFormat:@"SELECT Content from tbl_content WHERE FolderId = '%@'", folderId];

    sqlite3_stmt *result;
    if(sqlite3_prepare_v2(db, [sql UTF8String], -1, &result, nil) == SQLITE_OK)
    {
        while (sqlite3_step(result) == SQLITE_ROW)
        {
            char *contentList = (char *)sqlite3_column_text(result, 0);
            NSString *contentListString = [[NSString alloc] initWithUTF8String:contentList];
            [dummyListCarrier addObject:contentListString];
            [contentListString release];
        }
    }
    else 
    {
        //Query exec failed
    }
}
else
{
    //DB Open failed
}
*listCarrier = dummyListCarrier;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:53:57.920

您应该避免直接为 sql 语句中的列赋值。相反，您应该使用准备好的语句并将值绑定到它。

```
NSString *sql = @"INSERT INTO tbl_content (FolderId, Content) VALUES ('?', '?');";
char *sql = (char *) [sql UTF8String];
sqlite3_bind_text(stmt, 1, [Content UTF8String], -1, SQLITE_TRANSIENT); 
```

*这不是完整的代码

# python - 将 excel 或 csv 文件转换为 pandas 多级数据框

> ID：12576313
> 
> 赞同：5
> 
> 时间：2012-09-25T04:44:02.750
> 
> 标签：python, excel, csv, dataframe, pandas

我得到了一个相当大的 Excel 文件（5k 行），也是一个 CSV，我想把它做成一个 pandas 多级 DataFame。该文件的结构如下：

```
SampleID    OtherInfo    Measurements    Error    Notes
sample1     stuff                                 more stuff
                         36              6
                         26              7
                         37              8
sample2     newstuff                              lots of stuff
                         25              6
                         27              7 
```

其中测量次数是可变的（有时为零）。任何信息之间都没有完整的空白行，并且在具有其他（字符串）数据的行上，“测量”和“错误”列是空的；这可能会使解析变得更加困难（？）。有没有一种简单的方法可以自动进行这种转换？我最初的想法是先用 Python 解析文件，然后在循环中将内容输入 DataFrame 插槽，但我不知道如何实现它，或者它是否是最好的做法。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T06:52:35.440

看起来您的文件具有固定宽度的列，可以使用 read_fwf() 。

```
In [145]: data = """\
SampleID    OtherInfo    Measurements    Error    Notes                   
sample1     stuff                                 more stuff              
                         36              6
                         26              7
                         37              8
sample2     newstuff                              lots of stuff           
                         25              6
                         27              7
"""

In [146]: df = pandas.read_fwf(StringIO(data), widths=[12, 13, 14, 9, 15]) 
```

好的，现在我们有了数据，只需做一些额外的工作，您就有了一个框架，您可以在该框架上使用 set_index() 创建一个多级索引。

```
In [147]: df[['Measurements', 'Error']] = df[['Measurements', 'Error']].shift(-1)

In [148]: df[['SampleID', 'OtherInfo', 'Notes']] = df[['SampleID', 'OtherInfo', 'Notes']].fillna()

In [150]: df = df.dropna()

In [151]: df
Out[151]:
  SampleID OtherInfo  Measurements  Error          Notes
0  sample1     stuff            36      6     more stuff
1  sample1     stuff            26      7     more stuff
2  sample1     stuff            37      8     more stuff
4  sample2  newstuff            25      6  lots of stuff
5  sample2  newstuff            27      7  lots of stuff 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:35:09.753

这至少会清理它以进行额外的处理。

```
import csv
reader = csv.Reader(open(<csv_file_name>)
data = []
keys = reader.next()
for row in reader():
    r = dict(zip(keys,row))
    if not r['measurements'] or not r['Error']:
        continue
    for key in ['SampleID', 'OtherInfo', 'Notes']:
        if not r[key]:
            index = -1
            while True:
                if data[index][key]:
                    r[key] = data[index][key]
                    break
                index -= 1
    data.append(r) 
```

# ruby-on-rails - 将 Ajax 参数传递给 Rails 控制器

> ID：12576318
> 
> 赞同：1
> 
> 时间：2012-09-25T04:44:46.430
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

我正在尝试通过 AJAX 调用将我的视图中的一些参数传递给我的照片控制器中的自定义方法 fetch_info。我的控制器似乎没有收到参数。当我单击图像以启动 AJAX 调用时，我在终端中看到以下内容：

```
Processing by PhotosController#fetch_info as JSON
  Parameters: {"id"=>"", "secret"=>""}
Completed 500 Internal Server Error in 267ms

FlickRaw::FailedResponse ('flickr.photos.getInfo' - Photo not found):
  app/controllers/photos_controller.rb:38:in `fetch_info' 
```

看起来正在调用 fetch_info 方法，但参数为空。我应该如何通过 AJAX 传递我的参数？

这是我的看法。我也有我的 javascript 在视图中，只是为了让它工作。

index.html.erb

```
<div class="body_container">

    <div id="photos_container">
    <% @photos_array.each do |p| %>

     <%= link_to '#' do %>
       <div class='each_photo_container', id='<%="#{p[:id]}"%>' >
         <%= image_tag p[:s_url] %>
       </div>
     <% end %>

    <!-- Load Modal onClick -->
    <script type="text/javascript">
    jQuery(function() {
     $('#<%=p[:id]%>').click(function (e) {

        //ajax call to fetch photo info
        var fetch_id = '<%=p[:id]%>';
        var fetch_secret = '<%=p[:secret]%>';

        $.ajax({
          type: 'GET',
          url: '/photos/fetch_info',
          dataType: 'json',
          data: { 'id' : fetch_id.val(), 'secret' : fetch_secret.val() } 
        });

        return false;
      });
    });

    </script>

    <% end %>

    <div class="basic_modal">
    </div>

 </div>
</div> 
```

这是我的photos_controller.rb：

```
 def fetch_info
    puts params[:id]
    puts params[:secret]

    info = flickr.photos.getInfo(:photo_id => params[:id], :secret=> params[:secret])

  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-05T03:33:03.160

您可以使用以下代码：

```
$('##{p[:id]}').click(function (e) {

    //ajax call to fetch photo info
    var fetch_id = '#{p[:id]}';
    var fetch_secret = '#{p[:secret]}';

    $.ajax({
      type: 'GET',
      url: '/photos/fetch_info',
      dataType: 'json',
      data: { 'id' : fetch_id, 'secret' : fetch_secret } 
    });

    return false;
  }) 
```

# c++ - C ++继承，是否可能只有一个共享祖父母类的副本

> ID：12576320
> 
> 赞同：2
> 
> 时间：2012-09-25T04:44:52.527
> 
> 标签：c++, class, inheritance, multiple-inheritance

我有一个项目，其中包含一些非常小的类，它们充当较大类的最小接口。有时我的对象需要其中的几个接口。有时这些接口共享相同的派生基类。无论如何我可以构造我的代码，以便我只有一个所有接口共享的派生基类的副本？

这是一个代码示例：

```
class A {
public:
  virtual void f(int a)=0;
  virtual int g() const {
    return m_inner;
  }
protected:
  int m_inner;
};

class B : public A {
public:
  virtual void f(int a)=0;
  virtual void h(int b) {
    m_stuff = b;
    m_inner = 0;
  }
protected:
  int m_stuff;
};

class C : public A {
public:
  virtual void f(int a)=0;
  virtual int i() const {
    return m_otherstuff;
  }
protected:
  int m_otherstuff;
};

class D : public B, public C {
public:
  void f(int a) { //do stuff }
  //fill in the rest of a big actual class.
}; 
```

D 有两个副本 A 并且引用 A:: 是不明确的。构建课程的最佳方式是什么，以便我在一天结束时只获得一份 A 副本？我愿意以任何方式重组 A、B 和 C。这甚至可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T04:50:57.270

虚拟继承是您所需要的。您的案例是典型的钻石问题。在 google 或任何 c++ 书籍上进行简短搜索应该会给你很多相关信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T04:51:23.140

我不太喜欢 C++，但我知道这叫做[Diamond Problem](http://en.wikipedia.org/wiki/Multiple_inheritance)。

而且，[这](http://www.cprogramming.com/tutorial/virtual_inheritance.html)是您的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T04:53:23.757

虚拟继承将解决您的直接问题（已[在此处](https://stackoverflow.com/questions/419943/virtual-inheritance)回答）。但是，我强烈建议您重新考虑层次结构。除了在学术论文和某些极端重构的情况下，我从未见过使用虚拟继承。也许，您可以通过使用聚合而不是继承来摆脱困境。

# c# - 如何获取主要的重复视频 ID

> ID：12576321
> 
> 赞同：0
> 
> 时间：2012-09-25T04:45:18.450
> 
> 标签：c#, youtube-api

我开发了使用 Youtube API 将视频上传到 youtube 的应用程序，我知道 youtube 不接受多次上传相同的视频。所以我检查视频状态并检查它是否处理成功。但是如果状态是 Rejected 并且原因代码等于重复，我想获取主视频 id，有没有办法获取源重复视频 ID？

（我知道我可以获取所有上传视频的列表并与一些属性进行比较，但我正在寻找 Google API）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:33:25.170

当视频被标记为重复时，无法在 API 响应中检索“原始”视频的 id。这是一个相当常见的功能请求，但工程团队认为实施它是不可行的。

# delphi - 大于 2 GB 的文件出现 TReadOnlyCachedFileStream 错误

> ID：12576325
> 
> 赞同：9
> 
> 时间：2012-09-25T04:45:41.893
> 
> 标签：delphi, delphi-7, filestream

David Heffernan 在这里发布了一个自定义文件流： [缓冲文件（用于更快的磁盘访问）](https://stackoverflow.com/questions/5639531/buffered-files-for-faster-disk-access)

它可以毫无问题地处理小于 2 GB 的文件，而且速度非常快。在大于 2GB 的文件上，它始终在 1.90 GB 左右失败。错误是：

`Project1.exe raised exception class EStreamError with message 'SetFilePointerEx failed for C:\Projects\Huge.txt. An Attempt was made to move the file pointer before the beginning of the file'. Process stopped.`

`

```
const
 bufsz = 65536; //64K
var
  strTmp : AnsiString;
  bufStreamIN  : TReadOnlyCachedFileStream;
  bufStreamOut : TWriteCachedFileStream;
  strmsize, BytesRead, M, NumberOfBytes, J : LongWord;
  Buffer: PByte;

      J := bufStreamIn.Size; 
try
      while (bufStreamIN.Position < J)  do
      begin
        BytesRead := bfStreamIN.Read(Buffer^, bufsz);
        NumberOfBytes := NumberOfBytes + BytesRead;
        SetLength(strTmp, BytesRead);
        strTmp := Copy(PAnsiChar(Buffer), 1, BytesRead);
        bufStreamOut.WriteBuffer(Pointer(strTmp)^, Length(strTmp));
        StrTmp := '';
        strmsize := j - NumberOfBytes;
        if strmsize > BytesRead then
          bfStreamIN.Position := bfStreamIN.Seek(BytesRead, soFromCurrent)
        else bfStreamIN.Position := bfStreamIN.Seek(strmsize, soFromCurrent);
        ProgressBar1.Position := 100*bfStreamIN.Position div J;
        Application.ProcessMessages;
      end;
    finally
      Memo1.Lines.Add('Done');
    end;
  finally
    FreeMem(Buffer);
    bufStreamIN.Free;
    bufStreamOut.Free;
  end;` 
```

这适用于小于 2GB 的文件而不会出现问题，甚至可以在不检查此处读取的流大小的情况下工作：

```
if strmsize > BytesRead then
      bfStreamIN.Position := bfStreamIN.Seek(BytesRead, soFromCurrent)
    else bfStreamIN.Position := bfStreamIN.Seek(strmsize, soFromCurrent); 
```

例如适用于小于 2GB 的文件：

```
bufStreamIN.Position := bufStreamIN.Seek(NumberOfBytes, soFromBeginning); 
```

我使用 Delphi 7 32 位，我的操作系统是 Win 7 64 位和 4GB RAM 我使用了 JCL 的 TJclBufferedStream，它在那个巨大的文件上运行良好，没有问题。唯一的问题是它要慢得多。

在我的 DPR 中，我按照我阅读的另一篇文章的建议使用了这个，以便使用更高的内存，但在这里我认为这不是内存问题： `{$SetPEFlags $0020}`

在另一篇文章中建议进行一些更改的完整单元：

```
interface

uses
  Classes,
  Windows,
  SysUtils,
  Math;

type
  IStreamErrorHandler = interface
    ['{B2A95D51-DD0D-49C2-9511-638EE4F911C8}']
    procedure HandleError(const Msg: string='');
  end;

  TBaseCachedFileStream = class(TStream, IStreamErrorHandler)
  private
    function QueryInterface(const IID: TGUID; out Obj): HResult; stdcall;
    function _AddRef: Integer; stdcall;
    function _Release: Integer; stdcall;
  protected
    FHandle: THandle;
    FOwnsHandle: Boolean;
    FCache: PByte;
    FCacheSize: Integer;
    FPosition: Int64;//the current position in the file (relative to the beginning of the file)
    FCacheStart: Int64;//the postion in the file of the start of the cache (relative to the beginning of the file)
    FCacheEnd: Int64;//the postion in the file of the end of the cache (relative to the beginning of the file)
    FFileName: string;
    FLastError: DWORD;
    procedure HandleError(const Msg: string);
    procedure RaiseSystemError(const Msg: string; LastError: DWORD); overload;
    procedure RaiseSystemError(const Msg: string); overload;
    procedure RaiseSystemErrorFmt(const Msg: string; const Args: array of const);
    function CreateHandle(FlagsAndAttributes: DWORD): THandle; virtual; abstract;
    function GetFileSize: Int64; virtual;
    procedure SetSize(NewSize: LongInt); override;
    procedure SetSize(const NewSize: Int64); override;
    function FileRead(var Buffer; Count: Longword): Integer;
    function FileWrite(const Buffer; Count: Longword): Integer;
    function FileSeek(const Offset: Int64; Origin: TSeekOrigin): Int64;
  public
    constructor Create(const FileName: string); overload;
    constructor Create(const FileName: string; CacheSize: Integer); overload;
    constructor Create(const FileName: string; CacheSize: Integer; Handle: THandle); overload; virtual;
    destructor Destroy; override;
    property CacheSize: Integer read FCacheSize;
    function Read(var Buffer; Count: Longint): Longint; override;
    function Write(const Buffer; Count: Longint): Longint; override;
    function Seek(const Offset: Int64; Origin: TSeekOrigin): Int64; override;
  end;
  TBaseCachedFileStreamClass = class of TBaseCachedFileStream;

  IDisableStreamReadCache = interface
    ['{0B6D0004-88D1-42D5-BC0F-447911C0FC21}']
    procedure DisableStreamReadCache;
    procedure EnableStreamReadCache;
  end;

  TReadOnlyCachedFileStream = class(TBaseCachedFileStream, IDisableStreamReadCache)
  (* This class works by filling the cache each time a call to Read is made and
     FPosition is outside the existing cache.  By filling the cache we mean
     reading from the file into the temporary cache.  Calls to Read when
     FPosition is in the existing cache are then dealt with by filling the
     buffer with bytes from the cache.
  *)
  private
    FUseAlignedCache: Boolean;
    FViewStart: Int64;
    FViewLength: Int64;
    FDisableStreamReadCacheRefCount: Integer;
    procedure DisableStreamReadCache;
    procedure EnableStreamReadCache;
    procedure FlushCache;
  protected
    function CreateHandle(FlagsAndAttributes: DWORD): THandle; override;
    function GetFileSize: Int64; override;
  public
    constructor Create(const FileName: string; CacheSize: Integer; Handle: THandle); overload; override;
    property UseAlignedCache: Boolean read FUseAlignedCache write FUseAlignedCache;
    function Read(var Buffer; Count: Longint): Longint; override;
    procedure SetViewWindow(const ViewStart, ViewLength: Int64);
  end;

  TWriteCachedFileStream = class(TBaseCachedFileStream, IDisableStreamReadCache)
  (* This class works by caching calls to Write.  By this we mean temporarily
     storing the bytes to be written in the cache.  As each call to Write is
     processed the cache grows.  The cache is written to file when:
       1\.  A call to Write is made when the cache is full.
       2\.  A call to Write is made and FPosition is outside the cache (this
           must be as a result of a call to Seek).
       3\.  The class is destroyed.

     Note that data can be read from these streams but the reading is not
     cached and in fact a read operation will flush the cache before
     attempting to read the data.
  *)
  private
    FFileSize: Int64;
    FReadStream: TReadOnlyCachedFileStream;
    FReadStreamCacheSize: Integer;
    FReadStreamUseAlignedCache: Boolean;
    procedure DisableStreamReadCache;
    procedure EnableStreamReadCache;
    procedure CreateReadStream;
    procedure FlushCache;
  protected
    function CreateHandle(FlagsAndAttributes: DWORD): THandle; override;
    function GetFileSize: Int64; override;
  public
    constructor Create(const FileName: string; CacheSize, ReadStreamCacheSize: Integer; ReadStreamUseAlignedCache: Boolean); overload;
    destructor Destroy; override;
    function Read(var Buffer; Count: Longint): Longint; override;
    function Write(const Buffer; Count: Longint): Longint; override;
  end;

    function GetFileSizeEx(hFile: THandle; var lpFileSize: Int64): BOOL;
      stdcall; external 'kernel32.dll';
    function SetFilePointerEx(hFile: THandle; liDistanceToMove: Int64;
      lpNewFilePointer: PInt64; dwMoveMethod: DWORD): BOOL;
      stdcall; external 'kernel32.dll';

implementation

{ TBaseCachedFileStream }

constructor TBaseCachedFileStream.Create(const FileName: string);
begin
  Create(FileName, 0);
end;

constructor TBaseCachedFileStream.Create(const FileName: string; CacheSize: Integer);
begin
  Create(FileName, CacheSize, 0);
end;

constructor TBaseCachedFileStream.Create(const FileName: string; CacheSize: Integer; Handle: THandle);
const
  DefaultCacheSize = 16*1024;
  //16kb - this was chosen empirically - don't make it too large otherwise the progress report is 'jerky'
begin
  inherited Create;
  FFileName := FileName;
  FOwnsHandle := Handle=0;
  if FOwnsHandle then begin
    FHandle := CreateHandle(FILE_ATTRIBUTE_NORMAL);
  end else begin
    FHandle := Handle;
  end;
  FCacheSize := CacheSize;
  if FCacheSize<=0 then begin
    FCacheSize := DefaultCacheSize;
  end;
  GetMem(FCache, FCacheSize);
end;

destructor TBaseCachedFileStream.Destroy;
begin
  FreeMem(FCache);
  if FOwnsHandle and (FHandle<>0) then begin
    CloseHandle(FHandle);
  end;
  inherited;
end;

function TBaseCachedFileStream.QueryInterface(const IID: TGUID; out Obj): HResult;
begin
  if GetInterface(IID, Obj) then begin
    Result := S_OK;
  end else begin
    Result := E_NOINTERFACE;
  end;
end;

function TBaseCachedFileStream._AddRef: Integer;
begin
  Result := -1;
end;

function TBaseCachedFileStream._Release: Integer;
begin
  Result := -1;
end;

procedure TBaseCachedFileStream.HandleError(const Msg: string);
begin
  if FLastError<>0 then begin
    RaiseSystemError(Msg, FLastError);
  end;
end;

procedure TBaseCachedFileStream.RaiseSystemError(const Msg: string; LastError: DWORD);
begin
  raise EStreamError.Create(Trim(Msg+'  '+ SysErrorMessage(GetLastError)));
  //raise EStreamError.Create(Trim(Msg+'  '+GetSystemErrorString(LastError)));
end;

procedure TBaseCachedFileStream.RaiseSystemError(const Msg: string);
begin
  RaiseSystemError(Msg, GetLastError);
end;

procedure TBaseCachedFileStream.RaiseSystemErrorFmt(const Msg: string; const Args: array of const);
begin
  RaiseSystemError(Format(Msg, Args));
end;

function TBaseCachedFileStream.GetFileSize: Int64;
begin
  if not GetFileSizeEx(FHandle, Result) then begin
    RaiseSystemErrorFmt('GetFileSizeEx failed for %s.', [FFileName]);
  end;
end;

procedure TBaseCachedFileStream.SetSize(NewSize: LongInt);
begin
  SetSize(Int64(NewSize));
end;

procedure TBaseCachedFileStream.SetSize(const NewSize: Int64);
begin
  Seek(NewSize, soBeginning);
  if not Windows.SetEndOfFile(FHandle) then begin
    RaiseSystemErrorFmt('SetEndOfFile for %s.', [FFileName]);
  end;
end;

function TBaseCachedFileStream.FileRead(var Buffer; Count: Longword): Integer;
begin
  if Windows.ReadFile(FHandle, Buffer, Count, LongWord(Result), nil) then begin
    FLastError := 0;
  end else begin
    FLastError := GetLastError;
    Result := -1;
  end;
end;

function TBaseCachedFileStream.FileWrite(const Buffer; Count: Longword): Integer;
begin
  if Windows.WriteFile(FHandle, Buffer, Count, LongWord(Result), nil) then begin
    FLastError := 0;
  end else begin
    FLastError := GetLastError;
    Result := -1;
  end;
end;

function TBaseCachedFileStream.FileSeek(const Offset: Int64; Origin: TSeekOrigin): Int64;
begin
  if not SetFilePointerEx(FHandle, Offset, @Result, ord(Origin)) then begin
    RaiseSystemErrorFmt('SetFilePointerEx failed for %s.', [FFileName]);
  end;
end;

function TBaseCachedFileStream.Read(var Buffer; Count: Integer): Longint;
begin
  Assert(False);
  //raise EAssertionFailed.create; //RaiseAssertionFailed(Result);
end;

function TBaseCachedFileStream.Write(const Buffer; Count: Integer): Longint;
begin
  Assert(False);
  //raise EAssertionFailed.Create; //RaiseAssertionFailed(Result);
end;

function TBaseCachedFileStream.Seek(const Offset: Int64; Origin: TSeekOrigin): Int64;
//Set FPosition to the value specified - if this has implications for the
//cache then overriden Write and Read methods must deal with those.
begin
  case Origin of
  soBeginning:
    FPosition := Offset;
  soEnd:
    FPosition := GetFileSize+Offset;
  soCurrent:
    inc(FPosition, Offset);
  else
    Assert(False); //RaiseAssertionFailed;
  end;
  Result := FPosition;
end;

{ TReadOnlyCachedFileStream }

constructor TReadOnlyCachedFileStream.Create(const FileName: string; CacheSize: Integer; Handle: THandle);
begin
  inherited;
  SetViewWindow(0, inherited GetFileSize);
end;

function TReadOnlyCachedFileStream.CreateHandle(FlagsAndAttributes: DWORD): THandle;
begin
  Result := Windows.CreateFile(
    PChar(FFileName),
    GENERIC_READ,
    FILE_SHARE_READ,
    nil,
    OPEN_EXISTING,
    FlagsAndAttributes,
    0
  );
  if Result=INVALID_HANDLE_VALUE then begin
    RaiseSystemErrorFmt('Cannot open %s.', [FFileName]);
  end;
end;

procedure TReadOnlyCachedFileStream.DisableStreamReadCache;
begin
  inc(FDisableStreamReadCacheRefCount);
end;

procedure TReadOnlyCachedFileStream.EnableStreamReadCache;
begin
  dec(FDisableStreamReadCacheRefCount);
end;

procedure TReadOnlyCachedFileStream.FlushCache;
begin
  FCacheStart := 0;
  FCacheEnd := 0;
end;

function TReadOnlyCachedFileStream.GetFileSize: Int64;
begin
  Result := FViewLength;
end;

procedure TReadOnlyCachedFileStream.SetViewWindow(const ViewStart, ViewLength: Int64);
begin
  if ViewStart<0 then begin
    Assert(False); //raise EAssertionFailed.Create(); //RaiseAssertionFailed;
  end;
  if (ViewStart+ViewLength)>inherited GetFileSize then begin
    Assert(False); //raise EAssertionFailed.Create(); //RaiseAssertionFailed;
  end;
  FViewStart := ViewStart;
  FViewLength := ViewLength;
  FPosition := 0;
  FCacheStart := 0;
  FCacheEnd := 0;
end;

function TReadOnlyCachedFileStream.Read(var Buffer; Count: Longint): Longint;
var
  NumOfBytesToCopy, NumOfBytesLeft, NumOfBytesRead: Longint;
  CachePtr, BufferPtr: PByte;
begin
  if FDisableStreamReadCacheRefCount>0 then begin
    FileSeek(FPosition+FViewStart, soBeginning);
    Result := FileRead(Buffer, Count);
    if Result=-1 then begin
      Result := 0;//contract is to return number of bytes that were read
    end;
    inc(FPosition, Result);
  end else begin
    Result := 0;
    NumOfBytesLeft := Count;
    BufferPtr := @Buffer;
    while NumOfBytesLeft>0 do begin
      if (FPosition<FCacheStart) or (FPosition>=FCacheEnd) then begin
        //the current position is not available in the cache so we need to re-fill the cache
        FCacheStart := FPosition;
        if UseAlignedCache then begin
          FCacheStart := FCacheStart - (FCacheStart mod CacheSize);
        end;
        FileSeek(FCacheStart+FViewStart, soBeginning);
        NumOfBytesRead := FileRead(FCache^, CacheSize);
        if NumOfBytesRead=-1 then begin
          exit;
        end;
        Assert(NumOfBytesRead>=0);
        FCacheEnd := FCacheStart+NumOfBytesRead;
        if NumOfBytesRead=0 then begin
          FLastError := ERROR_HANDLE_EOF;//must be at the end of the file
          break;
        end;
      end;

      //read from cache to Buffer
      NumOfBytesToCopy := Min(FCacheEnd-FPosition, NumOfBytesLeft);
      CachePtr := FCache;
      inc(CachePtr, FPosition-FCacheStart);
      Move(CachePtr^, BufferPtr^, NumOfBytesToCopy);
      inc(Result, NumOfBytesToCopy);
      inc(FPosition, NumOfBytesToCopy);
      inc(BufferPtr, NumOfBytesToCopy);
      dec(NumOfBytesLeft, NumOfBytesToCopy);
    end;
  end;
end;

{ TWriteCachedFileStream }

constructor TWriteCachedFileStream.Create(const FileName: string; CacheSize, ReadStreamCacheSize: Integer; ReadStreamUseAlignedCache: Boolean);
begin
  inherited Create(FileName, CacheSize);
  FReadStreamCacheSize := ReadStreamCacheSize;
  FReadStreamUseAlignedCache := ReadStreamUseAlignedCache;
end;

destructor TWriteCachedFileStream.Destroy;
begin
  FlushCache;//make sure that the final calls to Write get recorded in the file
  FreeAndNil(FReadStream);
  inherited;
end;

function TWriteCachedFileStream.CreateHandle(FlagsAndAttributes: DWORD): THandle;
begin
  Result := Windows.CreateFile(
    PChar(FFileName),
    GENERIC_READ or GENERIC_WRITE,
    0,
    nil,
    CREATE_ALWAYS,
    FlagsAndAttributes,
    0
  );
  if Result=INVALID_HANDLE_VALUE then begin
    RaiseSystemErrorFmt('Cannot create %s.', [FFileName]);
  end;
end;

procedure TWriteCachedFileStream.DisableStreamReadCache;
begin
  CreateReadStream;
  FReadStream.DisableStreamReadCache;
end;

procedure TWriteCachedFileStream.EnableStreamReadCache;
begin
  Assert(Assigned(FReadStream));
  FReadStream.EnableStreamReadCache;
end;

function TWriteCachedFileStream.GetFileSize: Int64;
begin
  Result := FFileSize;
end;

procedure TWriteCachedFileStream.CreateReadStream;
begin
  if not Assigned(FReadStream) then begin
    FReadStream := TReadOnlyCachedFileStream.Create(FFileName, FReadStreamCacheSize, FHandle);
    FReadStream.UseAlignedCache := FReadStreamUseAlignedCache;
  end;
end;

procedure TWriteCachedFileStream.FlushCache;
var
  NumOfBytesToWrite: Longint;
begin
  if Assigned(FCache) then begin
    NumOfBytesToWrite := FCacheEnd-FCacheStart;
    if NumOfBytesToWrite>0 then begin
      FileSeek(FCacheStart, soBeginning);
      if FileWrite(FCache^, NumOfBytesToWrite)<>NumOfBytesToWrite then begin
        RaiseSystemErrorFmt('FileWrite failed for %s.', [FFileName]);
      end;
      if Assigned(FReadStream) then begin
        FReadStream.FlushCache;
      end;
    end;
    FCacheStart := FPosition;
    FCacheEnd := FPosition;
  end;
end;

function TWriteCachedFileStream.Read(var Buffer; Count: Integer): Longint;
begin
  FlushCache;
  CreateReadStream;
  Assert(FReadStream.FViewStart=0);
  if FReadStream.FViewLength<>FFileSize then begin
    FReadStream.SetViewWindow(0, FFileSize);
  end;
  FReadStream.Position := FPosition;
  Result := FReadStream.Read(Buffer, Count);
  inc(FPosition, Result);
end;

function TWriteCachedFileStream.Write(const Buffer; Count: Longint): Longint;
var
  NumOfBytesToCopy, NumOfBytesLeft: Longint;
  CachePtr, BufferPtr: PByte;
begin
  Result := 0;
  NumOfBytesLeft := Count;
  BufferPtr := @Buffer;
  while NumOfBytesLeft>0 do begin
    if ((FPosition<FCacheStart) or (FPosition>FCacheEnd))//the current position is outside the cache
    or (FPosition-FCacheStart=FCacheSize)//the cache is full
    then begin
      FlushCache;
      Assert(FCacheStart=FPosition);
    end;

    //write from Buffer to the cache
    NumOfBytesToCopy := Min(FCacheSize-(FPosition-FCacheStart), NumOfBytesLeft);
    CachePtr := FCache;
    inc(CachePtr, FPosition-FCacheStart);
    Move(BufferPtr^, CachePtr^, NumOfBytesToCopy);
    inc(Result, NumOfBytesToCopy);
    inc(FPosition, NumOfBytesToCopy);
    FCacheEnd := Max(FCacheEnd, FPosition);
    inc(BufferPtr, NumOfBytesToCopy);
    dec(NumOfBytesLeft, NumOfBytesToCopy);
  end;
  FFileSize := Max(FFileSize, FPosition);
end;
end. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T05:25:10.187

您正在使用 32 位`Seek`重载；尝试

```
bfStreamIN.Position := bfStreamIN.Seek(BytesRead, soCurrent)
                                                  --------- 
```

而是调用 64-bit `Seek`。

# android - Android 如何在 WebView 的外部 HTML 页面上加载自定义 CSS

> ID：12576330
> 
> 赞同：1
> 
> 时间：2012-09-25T04:46:53.017
> 
> 标签：android, css

我想在我尝试过这种方式的 HTML 页面上应用我的自定义 CSS，但它不起作用。

```
 wv.loadUrl("<style>.featured {"+
        "   background-image: -ms-linear-gradient(bottom, #F9F6F9 0%, #ECE4F4 100%);"+
        "   background-image: -moz-linear-gradient(bottom, #F9F6F9 0%, #ECE4F4 100%);"+
        "   background-image: -o-linear-gradient(bottom, #F9F6F9 0%, #ECE4F4 100%);"+
        "background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #F9F6F9), color-stop(1, #ECE4F4));"+
        "   background-image: -webkit-linear-gradient(bottom, #F9F6F9 0%, #ECE4F4 100%);"+
        "   background-image: linear-gradient(to top, #F9F6F9 0%, #ECE4F4 100%);"+
        "}"); 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:20:18.000

谢谢你们的回答，但我得到了我的解决方案。

这是我的解决方案。

```
wv.loadUrl("javascript:(function() { " +                        
    "var divs = document.getElementsByClassName('free');"+
     "for(var i=0; i<divs.length; i++)"+
     "{"+
        "divs[i].style.backgroundImage='-webkit-gradient(linear, left bottom, left top, color-stop(0, #FFFFFF), color-stop(1, #EFD2E4))';"+
      "}"+
     "})()"); 
```

使用它，您可以将自定义 CSS 应用于 Android 中 HTML 的任何标签或元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:12:42.250

将您的 html 和 css 文件放入 Assets 文件夹中。并使用以下代码。

主.java

```
WebView webview = (WebView) findViewById(R.id.abtus_webView);
webview.loadUrl("file:///android_asset/index.html"); 
```

如果您想在 html 页面中使用图像，则将以下代码添加到 html 页面中。

htmltest.html

```
<img src="file:///android_asset/images/abc.png"> 
```

我已将图像放入 Assets 文件夹中的图像文件夹中。这对我有用，希望对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-16T01:12:30.287

您可以使用`javascript:`URL 功能注入自定义 JS。

以下是如何从 Java 中使用它添加 CSS 规则：

```
/**
 * Creates a CSS element in the <head> section of the Web page and assigns it
 * to a `customSheet` JS variable
 */
private final static String CREATE_CUSTOM_SHEET =
    "if (typeof(document.head) != 'undefined' && typeof(customSheet) == 'undefined') {"
        + "var customSheet = (function() {"
            + "var style = document.createElement(\"style\");"
            + "style.appendChild(document.createTextNode(\"\"));"
            + "document.head.appendChild(style);"
            + "return style.sheet;"
        + "})();"
    + "}";

/**
 * Adds CSS properties to the loaded Web page. A <head> section should exist when this method is called.
 * The Web view should be configured with `.getSettings().setJavaScriptEnabled(true);`
 *
 * @param webView Web view to inject into
 * @param cssRules CSS rules to inject
 */
void injectCssIntoWebView(WebView webView, String... cssRules) {
    StringBuilder jsUrl = new StringBuilder("javascript:");
    jsUrl
        .append(CREATE_CUSTOM_SHEET)
        .append("if (typeof(customSheet) != 'undefined') {");
    int cnt = 0;
    for (String cssRule : cssRules) {
        jsUrl
            .append("customSheet.insertRule('")
            .append(cssRule)
            .append("', ")
            .append(cnt++)
            .append(");");
    }
    jsUrl.append("}");

    webView.loadUrl(jsUrl.toString());
} 
```

这是上述方法的使用示例：

```
@Override
public void onPageFinished(WebView webView, String url) {
    // Several people probably worked hard on the design of this Web page, let's hope they won't see what's next
    injectCssIntoWebView(
        webView,
        "div { border: 4px solid yellow; }",
        "p { border: 4px solid green; }",
        "a { border: 4px solid black; }",
        "img { border: 4px solid blue; }"
    );
} 
```

# c++ - Qt::如何识别/检测系统是否被Linux中的其他系统远程访问

> ID：12576334
> 
> 赞同：1
> 
> 时间：2012-09-25T04:47:44.340
> 
> 标签：c++, c, linux, qt, remote-access

我正在 ubuntu 中开发一个应用程序来通过 QT 远程访问其他系统。两个系统都在运行一些 Qt 应用程序。我想使用 Qt 编程远程检查/更改另一个系统。

我想在远程系统上添加一个**按钮**（作为退出屏幕），它应该是**“仅当系统被远程访问时才启用”**，以便我可以使用它来关闭远程访问屏幕。

有没有什么方法可以通过编程来获取远程访问时的状态？？？

我在论坛上找到了一些解决方案，但它们特别适用于 Windows。**我正在寻找 Linux 中的一些解决方案。**

请提供建议/链接，以便我可以克服这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:15:03.227

如果您使用[X11](http://en.wikipedia.org/wiki/X_Window_System)协议的远程显示功能，您可以检查`DISPLAY`变量的值。对于本地连接，它通常以`:0`;开头 对于远程连接，它包含显示服务器的主机名。对于通过`ssh -X`它的连接，它可能是`localhost:10`并且`ssh`也是设置`SSH_CLIENT`和`SSH_CONNECTION`环境变量。

否则，您应该更好地为您定义什么是远程访问（即更多地解释您的应用程序）。您的 Qt 应用程序也可能是一些 TCP/IP 服务器。也许[getpeername(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/getpeername.2.html)系统调用可能是相关的。

如果您只是对流入您的盒子（独立于特定应用程序）的远程连接感兴趣，您可以阅读（例如使用`popen`）命令的输出`netstat -a -n`或使用某个`/proc/net/`目录。

# git - gitolite gitlist：无法将 HEAD 解析为有效的参考

> ID：12576337
> 
> 赞同：4
> 
> 时间：2012-09-25T04:48:04.153
> 
> 标签：git, gitolite

我目前在我的私人服务器上切换到 gitolite + gitlist。虽然 gitolite 工作正常，但 gitlist 和 gitweb 却不行。在 gitlist 中我可以看到 testrepo 和我自己的，gitlist 告诉我

```
Oops! fatal: Failed to resolve HEAD as a valid ref. 
```

配置看起来有效...

```
[git]
client = '/usr/bin/git' ; Your git executable path
repositories = '/var/www/gitolite/repositories/' ; Path to your repositories

; You can hide repositories from GitList, just copy this for each repository you want to hide
; hidden[] = '/var/www/projects/BetaTest'
hidden[] = /var/www/gitolite/repositories/gitolite-admin.git

[app]
debug = false

; If you need to specify custom filetypes for certain extensions, do this here
[filetypes]
; extension = type
; dist = xml 
```

...以及存储库

```
drwxr-xr-x   7 git git 4096 Sep 23 11:53 .
drwxr-xr-x   5 git git 4096 Sep 23 00:19 ..
-rwxr-xr-x   1 git git   23 Sep 23 00:19 HEAD
drwxr-xr-x   2 git git 4096 Sep 23 00:19 branches
-rwxr-xr-x   1 git git   66 Sep 23 00:19 config
-rwxr-xr-x   1 git git  386 Sep 24 17:27 gl-conf
drwxr-xr-x   2 git git 4096 Sep 23 00:19 hooks
drwxr-xr-x   2 git git 4096 Sep 23 00:19 info
drwxr-xr-x 109 git git 4096 Sep 25 00:24 objects
drwxr-xr-x   4 git git 4096 Sep 23 00:19 refs 
```

和头

```
cat HEAD
ref: refs/heads/master 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:56:56.233

检查您的标签和分支。

如果你有一个名为的*标签*`master`，[`git clone`](http://git-scm.com/docs/git-clone)带有该`-b master`选项的 git repo 也可以工作！（`-b`采用分支名称*或*标签）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:15:40.963

我也遇到了这个问题。

在一个裸存储库“repoName.git”中可能有这个文件： `-rw-r--r-- 1 git git 23 Sep 19 11:37 HEAD` 内容： `ref: refs/heads/master`。类似的帖子建议检查此文件的访问权限。

但是当我检查文件时`repoName.git/refs/heads/master`，它拥有这些权利 `-rw------- 1 git git 41 Mar 13 15:22 refs/heads/master`。

因此，我也可以通过更改此文件的权限来解决此问题（实际上我授予了更多权限，您可以尝试授予更少的权限）：

**`chmod go+r repositories`**

其中 'repositories' 是 gitolite 的存储库目录。

# facebook - 将参数传递给 Facebook 时如何设置换行符

> ID：12576341
> 
> 赞同：-1
> 
> 时间：2012-09-25T04:48:37.287
> 
> 标签：facebook, facebook-javascript-sdk

我正在使用 JSON 概念将参数传递给 Facebook。我正在传递位置名称和日期。在位置名称之后，我想在新行中显示日期。任何人都可以帮助我如何换行。这是我的代码。提前致谢。

```
NSString *att=[NSString stringWithFormat:@"{\"name\":\"%@\","
                   "\"href\":\"%@\","
                   "\"media\":[{\"type\":\"image\","
                   "\"src\":\"%@\","
                   "\"href\":\"%@\"}],"
                   "\"properties\":{\"Location\":\"%@\"\"&nbsp;&nbsp;&nbsp;Date\":\"%@\"}}",eventTitle.text,href,imageSource,imageHref,eventLocation.text,eventDate.text]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:13:08.707

不是真正的 Facebook 问题。但当然 HTML 转义的空格是行不通的。

您可能正在寻找转义的换行符，\n

实际上，您需要对其进行两次转义：一次用于 NSString，一次用于 JSON，在您的代码中以 \n 结尾

# c++ - 打开名称中包含空格的文件

> ID：12576342
> 
> 赞同：-1
> 
> 时间：2012-09-25T04:48:55.547
> 
> 标签：c++, string, stream, long-filenames

我在打开名称中有空格的 C++ 文件时遇到问题。例如，打开文件`read me.txt`.

这是我到目前为止的代码，涉及一个读取文件并将字数输出到控制台的命令：

```
string choice, word, fname;
ifstream input;
int l, count = 0;

if(choice == "wc" || choice == "WC" || choice == "Wc")
{
    getline(cin, fname);
    input.open(fname.c_str());
    cout << fname << endl;
    if(input.fail())
    {
        cerr << " Error: failed to open the file: " << fname << endl;
        input.clear();
    }
    else
    {
        w = 0;
        while (input >> word)
           w++;
        input.close();
        count = w;
        cout << fname << " has a Word Count of: " << count << " words \n" << endl;
    }
} 
```

我知道流函数`c_str()`在空格后不能读取多个字符串。我正在考虑使用子字符串，但我不完全确定如何进行。你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:03:49.313

你试过这个吗（[http://www.cplusplus.com/forum/beginner/39687](http://www.cplusplus.com/forum/beginner/39687)）：

在文字字符串中，该`\`字符被解释为转义码，以允许您嵌入否则无法输入或不可打印的字符。例如，要在文字字符串中嵌入换行符，您不能在键入文字字符串时只按 Enter 键，因为编辑器会通过实际开始一个新行来响应。因此，您键入“ `\n`”，即“ `This is on the first line \n This is on the second line`”。要输入 ' `\`' 字符，您需要通过输入两个斜杠来转义它。第一个斜线是转义字符，第二个斜线是嵌入的斜线字符。

例子：`C:\\Program Files\\filename.txt`

编辑：用户不输入转义字符只是文件名。然后程序必须处理空格和路径反斜杠。`\n`指定新行，但它由转义字符后跟 n 字符组成。

# titanium - 用于开发的三星 Galaxy s2 兼容的钛应用加速器模拟器是什么？

> ID：12576346
> 
> 赞同：0
> 
> 时间：2012-09-25T04:49:28.027
> 
> 标签：titanium, appcelerator, avd

我正在使用钛加速器开发一个 iphone/android 应用程序，我需要为三星 Galaxy s2 设备测试这个应用程序。那么我应该使用什么模拟器进行测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:29:00.397

您应该创建一个 AVD [Android 虚拟设备] 或使用真正的三星设备。

要创建 AVD，您可以在此处找到操作视频[Samsung Galaxy S2 AVD](http://www.youtube.com/watch?v=r4ixHNotk_4)

# android - 移动时如何绘制根路径？

> ID：12576348
> 
> 赞同：2
> 
> 时间：2012-09-25T04:49:42.260
> 
> 标签：android, google-maps

我正在使用谷歌地图实现一个应用程序。当应用程序进入前台时，我会在地图上获得当前位置 lat、long 和 push pin。但是我要求当我移动时，我想根据我的移动绘制一条根路径。如果有人知道解决方案，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:51:37.203

您是否尝试过创建一个扩展类`Overlay`？

```
class MyOverlay extends Overlay{

public MyOverlay(){

}   

public void draw(Canvas canvas, MapView mapv, boolean shadow){
    super.draw(canvas, mapv, shadow);

    Paint   mPaint = new Paint();
    mPaint.setDither(true);
    mPaint.setColor(Color.RED);
    mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(2);

    GeoPoint gP1 = new GeoPoint(19240000,-99120000);
    GeoPoint gP2 = new GeoPoint(37423157, -122085008);

    Point p1 = new Point();
    Point p2 = new Point();
    Path path = new Path();

    projection.toPixels(gP1, p1);
    projection.toPixels(gP2, p2);

    path.moveTo(p2.x, p2.y);
    path.lineTo(p1.x,p1.y);

    canvas.drawPath(path, mPaint);
} 
```

以这种方式使用它：

```
private List<Overlay> mapOverlays;
private Projection projection;  

mapOverlays = mapView.getOverlays();        
projection = mapView.getProjection();
mapOverlays.add(new MyOverlay()); 
```

希望这可以帮助！

# ios - 如何重新创建 xcdatamodeld

> ID：12576349
> 
> 赞同：0
> 
> 时间：2012-09-25T04:50:01.887
> 
> 标签：ios, xcode, core-data, xcdatamodel

我正在维护一个已经在 AppStore 上运行了几个月的应用程序。*我的应用程序使用 Core Data，但不知何故，我设法丢失了所有以前版本的 xcdatamodel。*

我希望执行轻量级迁移。我需要做的就是为我的一个实体添加一个属性。因此，我遵循了创建模型版本的正确步骤。

显然，我修改了原来的 xcdatamodel。因此，当我测试迁移时，它失败并显示错误代码 = 134130“找不到源存储模型”。由于在设备/模拟器上没有 sqlite 文件时应用程序运行良好，因此我得出的结论是*原始 xcdatamodel 已修改*。

假设到目前为止我的逻辑成立，我如何创建一个 xcdatamodel 来匹配我用户设备上的 sqlite 文件。他们不能接受丢失数据。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:01:04.627

根据 Apple 的 Core Data[版本控制指南](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmUnderstandingVersions.html#//apple_ref/doc/uid/TP40004399-CH2-SW1)，以下两个版本的 Core Data 被视为相同：

*   对于每个实体，以下属性必须相同：名称、父级、isAbstract 和属性。不比较 className、userInfo 和验证谓词。

*   对于每个实体中的每个属性，以下属性必须相等：name、isOptional、isTransient、isReadOnly，对于属性 attributeType，以及对于关系 destinationEntity、minCount、maxCount、deleteRule 和 inverseRelationship。

如果您当前的 xcdatamodel 是一个全新的文件，我认为您所做的任何事情都不会使原始版本和当前版本匹配。但是，如果当前版本只是不小心修改的原始版本，您可以查看旧生成的模型文件并尝试找出更改的内容。

例如：在模型上，您有一个“NSString *age”属性，但在您当前的 xcdatamodel 上，该属性是“NSNumber *age”。

另外，请记住，您看到的错误可能是由生成的模型文件与数据库不同步引起的，因此请尝试重新创建它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:24:18.083

打开 Core Data 模型文件（例如一个空白文件），选择`Editor -> Import`，然后`.mom`从您的应用程序的先前版本中找到该文件。

看到[这个答案](https://stackoverflow.com/questions/4645685/reverse-engineer-core-data-mom-file)。

# c# - 我试图了解这个变量赋值中发生了什么

> ID：12576351
> 
> 赞同：-5
> 
> 时间：2012-09-25T04:50:46.693
> 
> 标签：c#

我试图了解这个变量赋值中发生了什么。

```
num = forward.Data.Key >= key ? 1 : 0; 
```

特别是这部分 `>= key ? 1 : 0`

帮助前进是一个`LinkedListCell<KeyValuePair<int, double>> forward = _data.Next;`

`key`是传递给方法的 int 参数。

它也是一个用 C# 编写的程序

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T04:52:33.093

这就是三元运算符。它接受一个布尔表达式，并根据该表达式的结果返回两个值之一。您可以使用多种语言获得它。

它相当于：

```
if( forward.Data.Key >= key ) {
    num = 1;
}
else {
    num = 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T04:51:50.763

它被称为`ternary conditional operator`。（*或简短的`If-Else`陈述*）

```
value = condition ? truePart : falsePart; 
```

三元运算符测试条件。它比较两个值。它产生取决于比较结果的第三个值。

来自 MSDN，

```
int input = Convert.ToInt32(Console.ReadLine());
string classify;

// if-else construction.
if (input < 0)
    classify = "negative";
else
    classify = "positive";

// ?: conditional operator.
classify = (input < 0) ? "negative" : "positive"; 
```

# java - 如何在 webapp 中调试 jar

> ID：12576352
> 
> 赞同：0
> 
> 时间：2012-09-25T04:50:51.950
> 
> 标签：java, apache-flex

我有一个使用一些 adobe blazeds jar 的 webapp，即。flex-messaging-core.jar。我想介入这个 jar (AMFConnection.java) 中包含的方法。我从源代码运行一个 ant 脚本重新编译这个 jar，并将它放在 WEB-INF\lib 文件夹中。调试这个 jar 的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:04:19.000

从概念上调试驻留在 jar 中并由战争加载的源代码并没有什么特别之处。它应该很容易用 IDE 完成。

唯一的要求是您的 IDE 将在项目中配置相应的源文件。

您的项目甚至不必包含所有源代码——它足以拥有相关的源代码，并且您将能够远程调试您的代码。

就应用程序服务器/Web 服务器/任何容器而言，它归结为在调试模式下运行应用程序。从技术上讲，您向 JVM 提供一些参数并运行它，以便启用您最喜欢的调试器的连接 - 实际上非常灵活。

您应该确保的唯一一件事（至少我会为此查看 ant 脚本 :)）-您不使用“-d”选项编译源代码。

这个选项，当给 java 编译器时，使它编译不包含调试信息的字节码。这样您可以获得更优化的类，但无法调试它。例如，默认情况下，JRE 附带的类（java.lang. *. java.util.*​​等）以这种方式编译。

希望这可以帮助

# javascript - 验证在 Firefox 中不起作用，但在 IE、Chrome 中有效

> ID：12576355
> 
> 赞同：0
> 
> 时间：2012-09-25T04:51:16.697
> 
> 标签：javascript, jquery, internet-explorer, firefox, google-chrome

我使用以下 java 脚本函数进行整数验证，这意味着文本框可以只允许单独输入整数值。****它在 Internet Explorer 和 google chrome 中运行良好****。但我在 FireFox 中使用相同的功能，文本框不允许在其中输入任何字符，这意味着它不允许字符、数字、空格和其他任何内容。 。如何解决这个问题呢？

**javascript函数**

```
$('.intValidate').live('keypress', function(event) {
                var integervalidate = intValidate(event);
                if (integervalidate == false)
                    return false;
            });

function intValidate(event) {
    if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 ||(event.keyCode == 65 && event.ctrlKey === true) ||(event.keyCode >= 35 && event.keyCode <= 39))
        {
            return;
        }
    else 
    {
        if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 ))
        {
            event.preventDefault(); 
        } 
```

**我使用这个类**，

```
 <input type="text" id="abcd" style="width:30px" maxlength="2"class="intValidate""/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:18:32.257

您正在检查`keypress`事件中的键码。您应该`charCode`改为查看值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:17:54.790

您的问题是浏览器使用 keypress 事件的方式不一致。阅读[这篇](https://stackoverflow.com/questions/1444477/keycode-and-charcode)文章以获得一个很好的解释，其中包含一个解决方法的例子。

# ios - iphone应用pop3服务器api？

> ID：12576363
> 
> 赞同：0
> 
> 时间：2012-09-25T04:52:56.893
> 
> 标签：ios, xcode, api, pop3

我正在开发一个应该阅读和发送邮件的 iphone 应用程序。用于发送我使用过的邮件

```
MFMailComposeViewController 
```

类和 IMAP 服务器我使用了 MailCore API。现在主要的问题是与 POP3 服务器的连接。我正在寻找允许我与 POP3 服务器通信的 API。[我搜索了很多，但除了Chilkat Soft](http://www.chilkatsoft.com/downloads_ios.asp)，它有 30 天的试用版，一无所获。欢迎任何建议。我正在使用 Xcode。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:21:39.407

我没有找到任何有用的 API 并通过维护服务器解决了 PHP 的问题:(

# windows-runtime - 从 WinRT 的 PointeWheelChanged 事件中获取增量值

> ID：12576364
> 
> 赞同：2
> 
> 时间：2012-09-25T04:52:57.660
> 
> 标签：windows-runtime, mouseevent, winrt-xaml, mousewheel

有没有办法从 WinRT 中的 PointeWheelChanged 事件中获取增量值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-04T17:51:15.030

以下工作在 Windows 运行时的 RTM 中，它将结果记录到调试窗口。正值向上（远离您），负值向下滚动（朝向您）。重要的是设置handled 为true，这样该事件就不会在UI 元素中进一步冒泡。

```
private void ZoomPointerWheelChanged(object sender, PointerRoutedEventArgs e)
{
  System.Diagnostics.Debug.WriteLine(e.GetCurrentPoint(this).Properties.MouseWheelDelta);
  e.Handled = true;      
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T03:16:58.643

以下代码运行良好，

```
private void PointerWheelChanged(Windows.UI.Core.CoreWindow sender, Windows.UI.Core.PointerEventArgs args)
{
    var wheelDelta = args.CurrentPoint.Properties.MouseWheelDelta;
    // do something with the delta
} 
```

# javascript - 无法将工具提示与语法荧光笔一起使用

> ID：12576365
> 
> 赞同：-1
> 
> 时间：2012-09-25T04:53:00.800
> 
> 标签：javascript, jquery, html

工具提示和语法高亮是自己工作的，但是当我将要高亮的代码放在 pre 标记中时。只有语法突出显示有效，工具提示无效。我尝试了[SyntaxHighlighter](http://alexgorbatchev.com/SyntaxHighlighter/) [js.Highlighter](http://softwaremaniacs.org/soft/highlight/en/description/) .Tooltip 仍然不起作用。我正在使用来自[simpletooltip](http://www.javascriptf1.com/product/javascript-tooltip.html)的工具提示 有人可以指导我做什么吗？我应该更改工具提示还是更改语法突出显示。我应该使用哪个工具提示或语法突出显示？

```
<pre><code class = "python"> 
<p id = "filecontents" class="word_split">False None True False go the way False</p>
</code></pre>

$(document).ready(function(){
$(".word_split").lettering('words');
$('.word_split').mouseover(function(event) {
var word=event.target.innerHTML;
if (word == "False")
   showToolTip('False','False keyword',event);
$('.word_split').mouseout(function(event) {
var word=event.target.innerHTML;
if (word == "False")
   hideToolTip();
});
});
}); 
```

我正在使用[letteringplugin](http://letteringjs.com/)来检测单词。每次鼠标悬停在单词 False 上时，它应该是一个描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:29:53.217

听起来像是命名冲突。请继续阅读`.noConflict()`。[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)这是因为两者都使用 $ 符号。您需要使用 jQuery 之类的别名或其他任何库，这样一个库就不会与另一个库发生冲突。当大量使用库时，这必然会发生。熟悉 noConflict 与仅仅切换 lib 是一个好主意。

**编辑**

大量的代码错误和建议的改进。

首先 Your `})`for Mouseover 位于代码块的末尾，而不是鼠标悬停的末尾。基本上你的鼠标在你的鼠标中。

其次，当您拆分创建子`span`标签的单词时，您的鼠标悬停选择器需要检查这些。

第三，您的 if 语句没有`{}`. 这意味着如果您在 if 中使用了超过 1 行代码，它就会中断（没有错，只是不是最佳实践）。

第四，既然您使用的是 Jquery，为什么不使用这个词`$(this)`呢？

最后，在比较字符串时，您可能不知道它是“false”还是“False”，并且大小写很重要，因此要隐藏为小写并比较以获得最佳结果，除非您故意只想要 False。

```
$(document).ready(function(){

    $("#demo2 h1").lettering('words');

    $('.word_split span').mouseover(function(event) {
        var word = $(this).text().toLowerCase();
        if (word == "False".toLowerCase()){
           showToolTip('False','False keyword',event);
        }
    });
    $('.word_split span').mouseout(function(event) {
      var word=$(this).text().toLowerCase();
      if (word == "False".toLowerCase()){
         hideToolTip();
      }
   });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:21:41.400

我使用了不同的工具提示（Qtip）来解决问题。

# javascript - 使用Javascript在html表中动态添加多行

> ID：12576366
> 
> 赞同：-3
> 
> 时间：2012-09-25T04:53:04.067
> 
> 标签：javascript, jquery, html-table

使用 JavaScript 在表 (html) 中添加单行并删除它很简单。*但是，是否可以通过仅调用一次addrow*函数来添加多行，例如 2 行或更多行？添加的行将具有不同的元素，例如第一行将具有文本字段，另一行将具有文本区域，就像那样...

*html中还有其他选择吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:18:54.340

我通过编写类似的代码自己解决了这个问题**：**

添加三行，第一行带有文本字段，第二行带有文本区域，第三行带有按钮

```
function addRow(tableId)
 {
  var addrow=1;
  var table=document.getElementById(tableId);
  var rowCount=table.rows.length;
  for(var i=1;i<=3;i++)
   {
    if(addrow==1)
    {
      var newRow=table.insertRow(rowCount);
      var cell0=newRow1.insertCell(0);
      var element0=document.createElement("input");
      element0.type="text";
      cell0.appendChild(element0);
    }
    if(addrow==2)
    {
      var newRow2=table.insertRow(rowCount);
      var cell0=newRow1.insertCell(0);
      var element0=document.createElement("textarea");
      cell0.appendChild(element0);
    }
    if(addrow==3)
    {
      var newRow3=table.insertRow(rowCount);
      var cell0=newRow1.insertCell(0);
      var element0=document.createElement("input");
      element0.type="button";
      cell0.appendChild(element0);
    }
addrow++;
   }
 } 
```

每次***for***循环运行时，都会在表中添加一个新的 html 元素，因此我动态添加了三行，每行都有一个*不同*的元素**。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:57:31.487

您可以按如下方式定义您的方法：

```
addRow(var rowCount)
{
    for(var i=0; i<rowCount; i++)
    {
        // Your current implementation to add a row
    }
} 
```

同样，`deleteRow(var rowCount)`可以定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-23T19:08:46.700

```
function gen_textbox(tr, id, name, type, value){
	td = document.createElement("td");
	tr.appendChild(td);
	var input = document.createElement("input");
	input.setAttribute("id", id);
	input.setAttribute("name", name);

	if(type == "text"){
		input.setAttribute("type", "text");
	}
	else if (type == "hidden") {
		input.setAttribute("type", "hidden");
	}
	else{
		input.setAttribute("type", "pass");
	}

	input.setAttribute("value", value);
	td.appendChild(input); 
}

function gen_hiddenbox(node, id, name, value){

	var input = document.createElement("input");
	input.setAttribute("id", id);
	input.setAttribute("name", name);
	input.setAttribute("type", "hidden");
	input.setAttribute("value", value);
	node.appendChild(input); 
}

function gen_label(tr, id, text){
	td = document.createElement("td");
	tr.appendChild(td);
	var input = document.createElement("label");
	input.setAttribute("id", id);
	var rtext = document.createTextNode(text); 
	input.appendChild(rtext);
	td.appendChild(input);	
}

function gen_label(tr, id, text, td_class){
	td = document.createElement("td");
	td.setAttribute("class", td_class);
	tr.appendChild(td);
	var input = document.createElement("label");
	input.setAttribute("id", id);
	var rtext = document.createTextNode(text); 
	input.appendChild(rtext);
	td.appendChild(input);	
}

function getKeyValueFromJSON(jsonObj, valueNames) {

	var value, text = "", temp="";
	obj= '{ "ValueText": [';

	for(var i=0; i<jsonObj.length; i++) {

	   text = "";
	   for(var j=0; j<valueNames.length; j++) {
		   temp="jsonObj[i]."+valueNames[j];

		   text = text+eval(temp)+" <b>|</b> ";
	   }
	   value = jsonObj[i].id;
	   if(i<jsonObj.length-1)
		   obj = obj+'{ "value": "'+value+'", "text": "'+text+'" },';
		else
		   obj = obj+'{ "value": "'+value+'", "text": "'+text+'" }';
	}

	obj=obj+"]}";

	return obj;
}

function gen_select(tr, DrdId, Drdname, multiple, Drdsize, Drdnode, jsonObj) {
	td = document.createElement("td");
	tr.appendChild(td);
	var select = document.createElement("select");
	select.setAttribute("id", DrdId);
	select.setAttribute("name", Drdname);

	if(multiple == true){
		select.setAttribute("multiple", "multiple");
	}

	select.setAttribute("size", Drdsize);
	var option;
	option = document.createElement("option");
	option.setAttribute("value", "Select "+Drdnode);
	option.innerHTML = "Select "+Drdnode;			
	select.appendChild(option);

	for(var i=0; i<jsonObj.length; i++){

		option = document.createElement("option");
		option.setAttribute("value", jsonObj[i].value);
		option.innerHTML = jsonObj[i].value+" : "+jsonObj[i].text;	
		select.appendChild(option);
	}

	td.appendChild(select); 
}

function gen_button(tr, id, value, onclk_fun) {
	td = document.createElement("td");
	tr.appendChild(td);
	var button = document.createElement("input");
	button.setAttribute("type", "button");
	button.setAttribute("id", id);
	button.setAttribute("value", value);
	button.setAttribute("onclick", onclk_fun);
	td.appendChild(button); 	
}

function gen_button(tr, id, value, onclk_fun, Class) {
	td = document.createElement("td");
	tr.appendChild(td);
	var button = document.createElement("input");
	button.setAttribute("type", "button");
	button.setAttribute("id", id);
	button.setAttribute("value", value);
	button.setAttribute("onclick", onclk_fun);
	button.setAttribute("class", Class);
	td.appendChild(button); 	
}

function clearSelected(sel_id) {
    var elements = document.getElementById(sel_id).options;

    for(var i = 0; i < elements.length; i++){
      elements[i].selected = false;
    }
  }
```

首先创建通用函数以动态添加按钮、文本框等

```
function create_hiddenBox() {

    /*
      This is only for Spring form
      In jsp and spring suppose <form:select path="evp_veh_id.veh_id" size="1" >

      var sel_veh = document.getElementById("evp_veh_id.veh_id");
	  var veh_name = sel_veh.options[sel_veh.selectedIndex].text;
    */

    var node = document.getElementById("evp_footer");

	gen_hiddenbox(node, "evp_veh_name", "evp_veh_name", veh_name);
}
```

这被称为调用通用的动态方式来使用 JavaScript 制作 html 组件

# php - LogicException：控制器必须返回响应（给定 null）。您是否忘记在控制器的某处添加 return 语句？

> ID：12576370
> 
> 赞同：2
> 
> 时间：2012-09-25T04:53:53.993
> 
> 标签：php, symfony, fosuserbundle

注销后我想重定向到索引页面，但在 FOSUserBundle 中出现错误

在 SecurityController.php 中

```
 <?php
      namespace ispg\Bundle\ChatBundle\Controller;
      namespace FOS\UserBundle\Controller;

      use Symfony\Bundle\FrameworkBundle\Controller\Controller;
      use Symfony\Component\DependencyInjection\ContainerAware;
      use Symfony\Component\Security\Core\SecurityContext;
      use Symfony\Component\Security\Core\Exception\AuthenticationException;

 class SecurityController extends ContainerAware
 {
     public function loginAction()
     {        
          $request = $this->container->get('request');
          /* @var $request \Symfony\Component\HttpFoundation\Request */
          $session = $request->getSession();
          /* @var $session \Symfony\Component\HttpFoundation\Session */
          $network = $request->get("network");

          // get the error if any (works with forward and redirect -- see below)
          if ($request->attributes->has(SecurityContext::AUTHENTICATION_ERROR)) {
             $error = $request->attributes->get(SecurityContext::AUTHENTICATION_ERROR);
          } elseif (null !== $session && $session->has(SecurityContext::AUTHENTICATION_ERROR)) {
             $error = $session->get(SecurityContext::AUTHENTICATION_ERROR);
             $session->remove(SecurityContext::AUTHENTICATION_ERROR);
          } else {
             $error = '';
          }

          if ($error) {
              // TODO: this is a potential security risk (see http://trac.symfony-project.org/ticket/9523)
              $error = $error->getMessage();
          }

          // last username entered by the user
          $lastUsername = (null === $session) ? '' : $session->get(SecurityContext::LAST_USERNAME);

          //create the select tag for network selection
          require 'mnoNetworks.php';
          $selectHtml = "<select id=\"networks\">
                         <option value=\"\"> -- Select -- </option>";

          foreach($networks as $network){
             $selectHtml .= "<option value=\"".$network."\">".$network."</option>";
          }
          $selectHtml .="</select>";

          return $this->container->get('templating')->renderResponse('FOSUserBundle:Security:login.html.'.$this->container->getParameter('fos_user.template.engine'), array(
               'last_username' => $lastUsername,
               'error'         => $error,
               'network'        => $network,
               'networkSelector' => $selectHtml
           ));
      }

      public function checkAction()
      {
           throw new \RuntimeException('You must configure the check path to be handled by the firewall using form_login in your security firewall configuration.');
      }

      public function logoutAction()
      {
           $bundle2 = new \ispg\Bundle\ChatBundle\Controller\DefaultController();
           $bundle2->setContainer($this->container);
           $returned_data = $bundle2->san();
       }
 } 
```

在 logoutAction 会话之后，我想重定向到索引页面
如何重定向到它。

有没有人可以解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:27:29.683

Jaitsu 是对的，只是您的 Controller 扩展了 ContainerAware 而不是为基本控制器操作提供快捷方式的 Controller 类......

```
return new Symfony\Component\HttpFoundation\RedirectResponse($this->generateUrl('name_of_route')); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T07:42:15.947

您需要在您的`logoutAction()`...

```
return $this->redirect($this->generateUrl('name_of_route')); 
```

# ios - 下载 NKIssue - Newsstand 应用程序时遇到的问题

> ID：12576375
> 
> 赞同：2
> 
> 时间：2012-09-25T04:54:20.583
> 
> 标签：ios, newsstand-kit

我正在 iOS 中开发报亭应用程序。当我在模拟器上使用开发的应用程序时，一切似乎都很好。但是当我在设备上安装该应用程序并运行时，有时 NKIssue 的下载似乎无法正常工作，尤其是当应用程序在下载时进入后台时。我正在显示下载百分比。因此，当应用程序进入后台并再次返回前台时，下载百分比不会更新。这意味着下载没有发生。

我怀疑的问题是网络可用性。在 mac 机器上我使用的是高速网络连接，所以一切看起来都很好，尤其是 NKIssue 的下载。但是在设备上，连接速度很慢。所以我尝试通过wifi从mac共享互联网，然后我在我的设备上使用了那个wifi。之后，设备上的一切似乎也都很好。NKIssue 的后台下载似乎也很好。我非常怀疑问题出在网络连接的带宽上。

即使我想知道如何在低带宽互联网连接上处理 NKIssue 的后台下载。任何人都可以给我一些建议来解决这个问题。还有一件事我想让你知道，当我下载另一个报亭应用程序以供参考时，它要求我使用 wifi 下载 NKIssue。因此，是否必须限制仅使用 wifi 或高速网络下载 NKIssue。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T06:16:19.893

报亭后台下载仅在设备连接到 Wi-Fi 网络时发生

# node.js - 从 node.js 访问远程服务器

> ID：12576381
> 
> 赞同：0
> 
> 时间：2012-09-25T04:55:19.097
> 
> 标签：node.js

我有一个访问 node.js 的登录页面，该页面又访问另一台服务器以向我的登录页面提供身份验证！我如何实现 dat？请帮助我对node.js完全陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:18:16.330

您可以使用 http.request

[http://nodejs.org/api/http.html#http_http_request_options_callback](http://nodejs.org/api/http.html#http_http_request_options_callback)

# python - 使用子类查找几何对象周长和面积

> ID：12576382
> 
> 赞同：0
> 
> 时间：2012-09-25T04:55:29.100
> 
> 标签：python, class, object, methods, subclass

我在 Python 编程课上有一个实验作业，但遇到了一些麻烦。我们的导师给了我们源代码 GeometricObject.py 作为参考。

```
class GeometricObject(object):
  def __init__(self, color = "white", filled = True):
    self.color = color
    self.filled = filled

  def getColor(self):
    return self.color

  def setColor(self, color):
    self.color = color

  def isFilled(self):
    return self.filled

  def setFilled(self, filled):
    self.filled = filled

  def __str__(self):
    return "color: " + self.color + \
        " and filled: " + str(self.filled) 
```

现在我应该使用这个类来创建一个将这些信息应用于不同对象的子类。我必须创建一个类来计算圆形和三角形的面积和周长。

我无法理解何时需要从源代码复制和粘贴或不需要。这是我制作的第一节课，涉及一个圆圈。简单的问题：它的命名是否正确？该类是否应称为 GeometricObject(circle):???

```
import math

class GeometricObject(object):
  '''Class using a Circle'''
  def __init__(self, color = "white", filled = True):
    self.radius = 1
    self.color = color
    self.filled = filled

  def getColor(self):
    return self.Color

  def setColor(self, color):
    self.color = color

  def isFilled(self):
    return self.filled

  def setFilled(self, filled):
    self.filled = filled

  def getArea(self):
    self.area = math.pi(self.radius)**2
    return self.area

  def getPerimeter(self):
    r = radius
    self.perimeter = 2(math.pi)(r)
    return self.perimeter

  def __str__(self):
    return "color: " + self.color + \
        " and filled: " + str(self.filled) 
```

注意：在 def_str_*方法*中，它应该打印 Circle: radius = 3 color: red andfilled: True" 尽管它之前声明将默认值设置为 1，颜色：白色。我很困惑这个。

这就是它的要点。我希望我的编码到目前为止是正确的！

然后我必须为 Triangle 类做同样的事情，但我很确定它是相似的。

```
class GeometricObject(object):
  '''Class using a Triangle'''
  def __init__(self, color = "white", filled = True):
    self.side1 = 1
    self.side2 = 1
    self.side3 = 1

  def getArea(self):
    s = (self.side1 + self.side2 + self.side3)/2
    area = math.sqrt(s(s - self.side1)(s - self.side2)(s - self.side3))
    return area

  def getPerimeter(self)
    perimeter = self.side1 +self.side2 + self.side3
    return perimeter

  def __str__(self):
    return "color: " + self.color + \
        " and filled: " + str(self.filled)

  def getColor(self):
    return self.Color

  def setColor(self, color):
    self.color = color

  def isFilled(self):
    return self.filled

  def setFilled(self, filled):
    self.filled = filled 
```

所以我想我的主要问题是：+我应该一遍又一遍地从 GeometricObject() 复制粘贴源代码，还是已经存在？+字符串方法让我感到困惑，因为它要求的值与以前指定的不同。+代码。我想我正确地实现了每个的面积和周长公式？

提前致谢。任何帮助是极大的赞赏！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:04:01.630

我想你想这样做：

```
class Circle(GeometricObject):
  .
  .
  .

class Triangle(GeometricObject):
  .
  .
  . 
```

您只需要在与 GeometricObject 类不同的 Circle 和 Triangle 类中实现那些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T02:54:12.520

In order to use the GeometricObject.py file you're going to want to import the file so that you can access it's methods, make sure that both files are in the same directory:

```
import GeometricObject from GeometricObject 
```

Put that at the top of your current file if you wish to keep it separate. You can also simply copy-paste the source code from that file as well if you wish. Next, you're going to want to create the class of GeometricObject. In Python, it is implied that any class that does not have a specified inheritance has **object** as it's superclass. The cleanest way to write out this problem would be simply:

```
class GeometricObject: 
```

instead of

```
class GeometricObject(object): 
```

All following classes that wish to inherit the methods in the GeometricObject class would be written like this. You must include

```
super().__init__() 
```

in your initializer for your subclass in order to initialize all the data fields in the GeometricObject superclass so that you can use them. That way you can delete the isFilled and getColor and setColor methods out of your Triangle class and keep them in your GeometricObject class.

```
class Triangle(GeometricObject):
    def __init__(self, color = "white", filled = True):
        super().__init__()
    -
    -
    -
class Circle(GeometricObject):
    -
    -
    - 
```

Also, keep an eye out for

```
area = math.sqrt(s(s - self.side1)(s - self.side2)(s - self.side3)) 
```

This will return an error. In Python (x)(x) does not mean x * x. This instead will need to be written out like:

```
area = math.sqrt(s*(s - self.side1)*(s - self.side2)*(s - self.side3)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T05:20:17.633

Vaughn 对几何对象的子类化有正确的想法，但请检查您在 getArea 函数上的工作：

```
s(s - self.side1) 
```

将引发以下回溯：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'int' object is not callable 
```

# git - Github for Mac 是如何同步的？

> ID：12576384
> 
> 赞同：4
> 
> 时间：2012-09-25T04:55:55.500
> 
> 标签：git, github

根据[Github for Mac 博客公告](https://github.com/blog/878-announcing-github-for-mac)，

> 一旦你准备好分享你的提交，或拉入远程提交——只需按下同步分支按钮。我们将执行一个更智能的版本，`pull --rebase && push`它可以减少合并提交，但不会重写您的合并。

什么是“更智能的版本” `pull --rebase && push`？他们到底在做什么？是否有可能在命令行上做这个“更聪明”的事情？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T05:57:15.440

博客文章“ [Rebase Merge Commits in Git](http://notes.envato.com/developers/rebasing-merge-commits-in-git/) ”（来自**[Glen Maddern](https://github.com/geelen)**）说明了`git pull --rebase` **进行本地合并时**的危险：

![本地合并](../Images/ea4fea388671906c8df4748726ba98c4.png)

如果您在 now之上执行 a `git pull --rebase`of ，您将**删除您的本地 merge**。 请参阅 rebase 后的下一张图片：不再合并提交。`master``origin/master`

 **![不再合并提交](../Images/cf7ecb4edd58fac3d36a67bb62279165.png)

> 由于很多原因，这很糟糕。
> 
> *   一方面，功能提交实际上是重复的，而实际上我只想重新合并合并。如果您稍后再次合并功能分支，则两个提交都将在`master`.
> *   并且`origin/feature`，应该完成并在 中`master`，被悬空。
>     与遵循良好的分支/合并模型所获得的令人敬畏的历史不同，您实际上得到了*误导性*的历史。
>     例如，如果有人查看 上的分支`origin`，它会显示为`origin/feature` *尚未*合并到 master 中，即使它已合并！如果那个人然后进行部署，这可能会导致各种问题。这只是全面的坏消息。

这就是 Github for (Mac|Windows) 会检测和避免的。

如果你没有及时发现，同一篇博文中提到了以下恢复：

```
[master] git reset --hard origin/master
HEAD is now at 9f3e34d sneaky extra commit
[master] git merge --no-ff feature 
```

实际解决方案：

您可以达到预期的效果：

![期望的结果](../Images/370ebf1a816ce61283ef500b44f8c197.png)

> 而不是使用`git pull --rebase`，**使用一个`git fetch origin`和`git rebase -p origin/master`**

我想“更智能的版本”`pull --rebase`是“fetch + rebase 保留合并”的组合。

[Glen](https://github.com/geelen)还提出了[以下别名](https://gist.github.com/590895)来应对这样一个事实，即该命令序列将不再使用与本地分支关联的跟踪信息。

```
function git_current_branch() {
  git symbolic-ref HEAD 2> /dev/null | sed -e 's/refs\/heads\///'
}

alias gpthis='git push origin HEAD:$(git_current_branch)'
alias grb='git rebase -p'
alias gup='git fetch origin && grb origin/$(git_current_branch)' 
```

[Jason Weathered](https://stackoverflow.com/users/3736/jason-weathered)发布了“ [http://jasoncodes.com/posts/gup-git-rebase](http://jasoncodes.com/posts/gup-git-rebase) ”，但现在指的是**[git-up](https://github.com/aanand/git-up)**，来自[Aanand Prasad](https://github.com/aanand)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-30T12:43:08.790

尽管@VonC 的答案非常有用，但我想提一下较新的[legit](http://www.git-legit.org)。基本上`legit`所做的是[智能合并](https://github.com/kennethreitz/legit/blob/dba168103ea2980126c55bea5256e043f7da20dd/legit/scm.py#L124)（与 GitHub for Mac 所做的非常相似，如果不相等的话）：

1.  检查日志以查看合并提交`git log --merges branch..from_branch`
2.  如果有的话，就照常`merge`做，否则做`rebase`

`git pull --rebase`不能按照@VonC 的回答工作，虽然`git rebase --preserve-merges`更好，但是如果您合并了其他分支，则会创建重复提交；所以你需要在某个时候决定“rebase”是否真的有意义，或者你应该“合并”，这`legit`正是这样做的（再次：就像 GitHub for Mac）。**

# json - 如何在 PostgreSQL 9.2 中索引 JSON 数据？

> ID：12576385
> 
> 赞同：6
> 
> 时间：2012-09-25T04:56:02.693
> 
> 标签：json, postgresql, indexing, postgresql-9.2

有谁知道如何在 PostgreSQL 9.2 中为 JSON 数据创建索引？

示例数据：

```
[
  {"key" : "k1", "value" : "v1"},
  {"key" : "k2", "value" : "v2"}
] 
```

说如果我想索引所有键怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T00:56:38.913

至少现在，将 hstore 用于索引字段要好得多。

```
CREATE INDEX table_name_gin_data ON table_name USING GIN(data); 
```

如果您对全文搜索感兴趣，还可以创建 GIST 索引。更多信息在这里：[http ://www.postgresql.org/docs/9.0/static/textsearch-indexes.html](http://www.postgresql.org/docs/9.0/static/textsearch-indexes.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T06:02:34.660

目前没有直接索引 JSON 的内置函数。但是您可以使用基于函数的索引来实现，其中函数是用 JavaScript 编写的。

有关详细信息，请参阅此博客文章：[http ://people.planetpostgresql.org/andrew/index.php?/archives/249-Using-PLV8-to-index-JSON.html](http://people.planetpostgresql.org/andrew/index.php?/archives/249-Using-PLV8-to-index-JSON.html)

还有另一篇博客文章讨论了 JSON 以及它如何与 JavaScript 一起使用：[http ://www.postgresonline.com/journal/archives/272-Using-PLV8-to-build-JSON-selectors.html](http://www.postgresonline.com/journal/archives/272-Using-PLV8-to-build-JSON-selectors.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-25T13:50:03.710

这个问题有点老了，但我认为选择的答案并不是理想的答案。要索引 json（json 文本中的属性值），我们可以使用带有 PLV8 的表达式索引（由 @a_horse_with_no_name 建议）。

Craig Kerstein 在解释/演示方面做得很好：

[http://www.craigkerstiens.com/2013/05/29/postgres-indexes-expression-or-functional-indexes/](http://www.craigkerstiens.com/2013/05/29/postgres-indexes-expression-or-functional-indexes/)

# html - 如何将变量传递给 ASP 查询

> ID：12576386
> 
> 赞同：0
> 
> 时间：2012-09-25T04:56:23.977
> 
> 标签：html, asp-classic

我是一个 ASP 初学者，试图制作一个非常简单的页面。该功能是接受来自用户的两个输入并根据下一页上的输入显示报告。报表的数据是通过 ASP 页面上的 SQL 查询获取的。

这是我到目前为止所做的：

```
Set objConn = Server.CreateObject("ADODB.Connection")
objConn.Open "Provider=MSDAORA;
                       Data Source=şemam;
                       User Id=xyz;
                       Password=xyz;"
aranan = Request("aranan")

Set objRs = objConn.Execute("select * from my_department where user_id = <input from user>")
if objRs.BOF and objRs.eof then
  response.end
end if 
```

我面临的问题是我找不到如何在查询中正确传递用户输入。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:36:10.707

`?`用作占位符，然后将参数传递给Execute[方法](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681559%28v=vs.85%29.aspx)。

```
dim paramArray(0)
paramArray(0) = 123
Set objRs = objConn.Execute("select * from my_department where user_id = ?", paramArray) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:19:43.640

要将参数发送到数据库查询，您需要使用命令对象。

```
Set objConn = Server.CreateObject("ADODB.Connection")
objConn.Open "Provider=MSDAORA;" & _
             "Data Source=şemam;" & _
             "User Id=xyz;" & _
             "Password=xyz;"
aranan = Request("aranan")

Set objCmd = Server.CreateObject("ADODB.Command")
Set objCmd.ActiveConnection = objConn
objCmd.CommandText = "SELECT * FROM my_department WHERE user_id = ?"
objCmd.CommandType = 1

Set objRs = objCmd.Execute(, array(aranan))
if not objRs.EOF then
' Do whatever you need to with the result...
end if
objRs.Close
objConn.Close 
```

在关闭连接之前不要结束响应，否则最终会耗尽连接池。

# android - 需要将图像从 res 文件夹复制到画廊/文件夹

> ID：12576390
> 
> 赞同：2
> 
> 时间：2012-09-25T04:56:58.920
> 
> 标签：android, image, copy, gallery, drawable

好的，所以我有画廊应用程序，里面有很多图像（res/drawable）。

在选择时，您可以设置为墙纸按钮，您将拥有它。

现在我想用按钮保存到手机或 SD 卡这个选择的图像。我该如何管理。从应用程序文件夹的 res 复制到手机或 SD 卡。不想从 ImageView 中获取它，而只是将原件从 res 复制到 Phone。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:22:40.713

试试这个代码：

```
 String root = Environment.getExternalStorageDirectory().toString();
  File myDir = new File(root + "/saved_images");    
  myDir.mkdirs();
  Random generator = new Random();
  int n = 10000;
  n = generator.nextInt(n);
  String fname = "Image-"+ n +".jpg";
  File file = new File (myDir, fname);
  if (file.exists ()) file.delete (); 
  try {
       FileOutputStream out = new FileOutputStream(file);
       finalBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out);
       out.flush();
       out.close();

} catch (Exception e) {
       e.printStackTrace();
} 
```

并在清单文件中添加：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T05:08:06.933

按照步骤 ：-

*   `Bitmap`使用 [BitmapFactory.decodeResource](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeResource%28android.content.res.Resources,%20int%29)创建
*   `OutputStream`使用[Bitmap.compress](http://developer.android.com/reference/android/graphics/Bitmap.html#compress%28android.graphics.Bitmap.CompressFormat,%20int,%20java.io.OutputStream%29)将 Bitmap 的内容写入
*   将文件保存到您想要的任何位置。

代码：

```
String path = Environment.getExternalStorageDirectory().toString();
OutputStream fOut = null;
file = new File(path, "image.jpg");
fOut = new FileOutputStream(file);
Bitmap bitmap = BitmapFactory.decodeResource (getResources(), R.drawable.xyz);
bitmap.compress(Bitmap.CompressFormat.JPEG, 85, fOut);
fOut.flush();
fOut.close();
MediaStore.Images.Media.insertImage(getContentResolver(),file.getAbsolutePath(),file.getName(),file.getName()); 
```

# c# - 在不使用 If-else 的情况下将 int 数字替换为相应的月份（字符串）

> ID：12576391
> 
> 赞同：3
> 
> 时间：2012-09-25T04:56:59.230
> 
> 标签：c#, if-statement

在不使用 if-else 子句 12 次的情况下完成此任务的最佳方法是什么？任务是这样的：

```
if(mon=="1")
{
 month="JAN";
}
else if(mon=="2")
{
 month="FEB";
} 
```

等等..

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T05:04:58.280

尝试使用此代码

```
using System.Globalization;

var month = 7;
var dtf = CultureInfo.CurrentCulture.DateTimeFormat;
string monthName = dtf.GetMonthName(month);
string abbreviatedMonthName = dtf.GetAbbreviatedMonthName(month); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T04:58:40.550

替代方法是使用数组。

```
string[] months = new string[]{"JAN", "FEB", "MAR",..., "DEC"};
string month = months[value - 1]; 
```

`-1`因为索引从零开始。

或者

```
System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T05:13:35.963

```
using System.Globalization;
CultureInfo.CurrentCulture.DateTimeFormat.AbbreviatedMonthNames[int.Parse(mon)-1]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T05:00:24.687

使用[开关盒](http://msdn.microsoft.com/en-us/library/06tc147t(v=vs.71).aspx)：

```
switch(mon)
{
    case "1":
            month = "JAN";
            break;
    case "2":
            month = "FEB";
            break;
    default:
            month = string.Empty; // OR throw exception
            break;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T05:00:54.143

另外的选择：

```
switch (int.parse(mon))
{
    case 1: return "JAN";
    case 2: return "FEB";
    //...
    case 12: return "DEC";
    default: return "???";
}

// Azodious notes that switches work on strings too, so you can also do:
switch (mon)
{
    case "1": return "JAN";
    case "2": return "FEB";
    //...
    case "12": return "DEC";
    default: return "???";
} 
```

`mon`或作为数组的索引，类似于 John Woo 展示的内容（但您必须首先解析`int`）。

# ruby - 正则表达式匹配所有字母数字主题标签，无符号

> ID：12576392
> 
> 赞同：5
> 
> 时间：2012-09-25T04:57:04.443
> 
> 标签：ruby, regex, hashtag

我正在为 facebook 编写一个主题标签抓取工具，我遇到的每个获取主题标签的正则表达式似乎都包含标点符号和字母数字字符。这是我想要的一个例子：

你好世界！我是#m4king 一个#fac_book 刮刀，想要一个不错的正则#expression。

我希望它匹配`world`, `m4king`, `fac`and `expression`（请注意，如果它到达标点符号，我希望它被切断，包括空格）。如果它不包含井号就好了，但这并不是非常重要。

以防万一它很重要，我将使用 ruby​​ 的字符串扫描方法来抓取可能多个标签。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T05:01:33.473

像这样的正则表达式：`#([A-Za-z0-9]+)`应该匹配您需要的内容并将其放在捕获组中。然后您可以稍后访问该组。也许[这](http://strugglingwithruby.blogspot.com/2009/05/regular-expressions-in-ruby.html)将有助于阐明正则表达式（来自 Ruby 上下文）。

上面的正则表达式将在找到`#`标签时开始匹配，并将后面的任何字母或数字扔到捕获组中。一旦它找到任何不是字母或数字的东西，它就会停止匹配。最后，您将得到一个包含您所追求的内容的组。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T09:29:21.823

```
str = 'Hello #world! I am #m4king a #fac_book scraper and would like a nice regular #expression'
str.scan(/#([A-Za-z0-9]+)/).flatten #=> ["world", "m4king", "fac", "expression"] 
```

需要调用#flatten，因为每个捕获组都在其自己的数组中。

或者，您可以使用后视匹配，它仅在“#”之后匹配字母数字字符：

```
str.scan /(?<=#)[[:alnum:]]+/ #=> ["world", "m4king", "fac", "expression"] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-05T21:23:23.233

这是一个更简单的正则表达式`#[[:alnum:]_]/`。请注意，它包括下划线，因为 Facebook 目前将下划线作为主题标签的一部分（就像 twitter 一样）。

```
str = 'Hello #world! I am #m4king a #fac_book scraper and would like a nice regular #expression'
str.scan(/#[[:alnum:]_]+/) 
```

以下是关于 Rubular 的观点： [http: //rubular.com/r/XPPqwtVGN9](http://rubular.com/r/XPPqwtVGN9)

# uiscrollview - 滚动 UIScrollView 时崩溃

> ID：12576397
> 
> 赞同：1
> 
> 时间：2012-09-25T04:57:44.270
> 
> 标签：uiscrollview

当我使用 iOS 5.1 滚动 UIScrollView 时。它工作正常，但是当使用 iOS 6.0 滚动时，应用程序崩溃了。但我没有错误行代码。这是异常触发：

```
2012-09-25 11:47:36.255 Attack[4515:c07] Stack Trace: (
    0   CoreFoundation                      0x0061802e __exceptionPreprocess + 206
    1   libobjc.A.dylib                     0x02c8de7e objc_exception_throw + 44
    2   CoreFoundation                      0x00617deb +[NSException raise:format:] + 139
    3   QuartzCore                          0x00a31a75 _ZN2CA5Layer10set_boundsERKNS_4RectEb + 213
    4   QuartzCore                          0x00a31d1e -[CALayer setBounds:] + 154
    5   UIKit                               0x0190e7a1 -[UIView(Geometry) setBounds:] + 336
    6   UIKit                               0x01920748 -[UIScrollView setBounds:] + 5493
    7   UIKit                               0x01920c9d -[UIScrollView setContentOffset:] + 728
    8   UIKit                               0x019275ec -[UIScrollView _updatePanGesture] + 2873
    9   UIKit                               0x0192b0e7 -[UIScrollView handlePan:] + 305
    10  UIKit                               0x01b9389a _UIGestureRecognizerSendActions + 139
    11  UIKit                               0x01b929db -[UIGestureRecognizer _updateGestureWithEvent:] + 333
    12  UIKit                               0x01b9411f -[UIGestureRecognizer _delayedUpdateGesture] + 46
    13  UIKit                               0x01b96d6d ___UIGestureRecognizerUpdate_block_invoke_0543 + 57
    14  UIKit                               0x01b96cec _UIGestureRecognizerRemoveObjectsFromArrayAndApplyBlocks + 331
    15  UIKit                               0x01b8ea68 _UIGestureRecognizerUpdate + 1348
    16  UIKit                               0x018fbfc2 -[UIWindow _sendGesturesForEvent:] + 1283
    17  UIKit                               0x018fc4a3 -[UIWindow sendEvent:] + 98
    18  UIKit                               0x018da3aa -[UIApplication sendEvent:] + 436
    19  UIKit                               0x018cbcf8 _UIApplicationHandleEvent + 9874
    20  GraphicsServices                    0x03045df9 _PurpleEventCallback + 339
    21  GraphicsServices                    0x03045ad0 PurpleEventCallback + 46
    22  CoreFoundation                      0x0058dbf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
    23  CoreFoundation                      0x0058d962 __CFRunLoopDoSource1 + 146
    24  CoreFoundation                      0x005bebb6 __CFRunLoopRun + 2118
    25  CoreFoundation                      0x005bdf44 CFRunLoopRunSpecific + 276
    26  CoreFoundation                      0x005bde1b CFRunLoopRunInMode + 123
    27  GraphicsServices                    0x030447e3 GSEventRunModal + 88
    28  GraphicsServices                    0x03044668 GSEventRun + 104
    29  UIKit                               0x018c965c UIApplicationMain + 1211
    30  Attack                              0x00002e7a main + 170
    31  Attack                              0x00002d85 start + 53
)
2012-09-25 11:47:36.256 Attack[4515:c07] *** Terminating app due to uncaught exception 'CALayerInvalidGeometry', reason: 'CALayer bounds contains NaN: [nan 0; 640 480]'
*** First throw call stack: 
```

有谁知道行代码是什么意思？: `-[UIScrollView setBounds:] + 5493`.

# c# - 为什么 DBNull.Value 在这里不起作用？

> ID：12576399
> 
> 赞同：1
> 
> 时间：2012-09-25T04:58:00.430
> 
> 标签：c#

```
EnumType = reader["EnumTypeId"] == DBNull.Value ? EnumType.None : (EnumType)(int)reader["EnumTypeId"]; 
```

我认为如果`reader["EnumTypeId"]`为 null，它应该分配`EnumType.None`值，但它仍在尝试将 null 值强制转换为 int，这显然会导致异常。

我尝试了以下，它也没有工作：

```
EnumType = reader["EnumTypeId"] == null ? EnumType.None : (EnumType)(int)reader["EnumTypeId"]; 
```

我没有使用`Enums`，而是继续并决定使用 nullable `int`，所以现在我的代码略有不同，但它仍然不适用于`DBNull.Value`,`null`或`GetOrdinal...`

```
intType= reader["intType"] == DBNull.Value ? null : (int?)reader["intType"]; 
```

另外，为什么我必须做`(int?)`演员而不是`(int)`演员？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:09:00.433

不要使用 DBNull，只需使用普通的 old `null`。

```
EnumType = reader["EnumTypeId"] == null ? EnumType.None : (EnumType)(int)reader["EnumTypeId"]; 
```

* * *

**编辑**

问题可能是数据库类型`EnumTypeId`不是 int/Int32。如果是这样，那么读取为字符串然后解析应该可以解决问题。

```
EnumType? enumVal = null;
if (reader["EnumTypeId"] != null)
{
    int intVal;
    enumVal = (int.TryParse(reader["EnumTypeId"].ToString(), out intVal)) ? (EnumType)intVal : null;
}
EnumType =  ? EnumType.None : (EnumType)(int)reader["EnumTypeId"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T05:13:50.487

您可以使用的另一种方法是`IsDBNull`方法：

```
int index = reader.GetOrdinal("EnumTypeId");
EnumType = reader.IsDBNull(index) ? EnumType.None : 
                                    (EnumType)reader.GetInt32(index); 
```

# android - Android JPG 文件转 gif

> ID：12576401
> 
> 赞同：2
> 
> 时间：2012-09-25T04:58:10.900
> 
> 标签：android, camera, gif, jpeg

在从 android 捕获帧后，有什么方法可以将 jpgs/pngs 转换为 gif 图像？我正在寻找一个简短的想法或任何教程链接。

# apache - Apache 配置中的不同术语是什么意思？

> ID：12576403
> 
> 赞同：1
> 
> 时间：2012-09-25T04:58:19.443
> 
> 标签：apache, http, client-server

我不断遇到 Apache 设置中使用的某些术语。在尝试理解各种讨论和[Apache 的文档](http://httpd.apache.org/docs/1.3/mod/core.html#maxclients)时，我需要一些帮助来弄清楚其中一些术语的含义：

1.  什么是客户？
2.  客户端和子进程有什么区别？他们是一样的吗？
3.  如果`MaxClient = 255`是，这是否意味着 Apache 将并行处理多达 255 个页面加载，而其余的则排队？
4.  什么时候使用`KeepAlive`请求？
5.  一个子进程和这个子进程的请求是什么关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:11:11.817

首先，我希望您了解 apache 1.3 非常古老，因此文档通常比较新的文档更难理解（即，如果您有选择的话，也许您应该升级）。

1.  我不确定在 apache 文档中“客户端”本身在哪里被引用，我认为它指的是任何连接到开放端口并进行通信的东西。

2.  同样，不确定“孩子”本身在哪里被提及，所以我无法帮助你。

3.  MaxClient 是 apache 将开始处理请求的进程数。对于 Apache 1.3，您所说的是准确的，Apache 只会并行处理 MaxClient 请求（将其余请求排队到队列的其他最大值）。

4.  KeepAlive 并不是真正的请求。它在请求头中发送，告诉服务器浏览器支持 KeepAlive。它与 HTTP 的一项功能有关，该功能允许一个连接用于多个访问。如果您允许 KeepAlive，您的服务器可能会获得更少的 TCP 连接。

5.  我什至不确定你在这里问什么，所以你需要更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:31:09.020

首先，请注意，这些答案仅在使用 prefork 模式时适用于 Apache 1.x 或 Apache 2.x。

1.  打开 HTTP 连接并发送请求的机器。

2.  不，它们不一样。一个 Apache 孩子一次可以处理一个请求/客户端，但是当那个完成后，同一个孩子可以处理一个新的。

3.  是的。

4.  它用于在客户端想要发出另一个请求时保持 HTTP 连接打开。客户端可以保持连接，例如，下载与网页相关联的图像等。KeepAlive On 可以提高客户端（用户）的性能，但关闭它会减少服务器的内存使用量。这是一个权衡。

5.  Apache 进程启动了一堆子进程。当请求进来时，父（根）进程选择一个空闲的子进程来处理该请求。当该请求完成时，孩子现在处于空闲状态，可以处理新请求。

# c# - 如何在用户控件中访问 .aspx 的属性？

> ID：12576405
> 
> 赞同：0
> 
> 时间：2012-09-25T04:58:23.813
> 
> 标签：c#, asp.net

我有一个 .aspx 页面，其中有一个属性。现在我创建一个用户控件并将其放在页面上。现在我如何在用户控件后面的代码中访问该属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T05:04:40.800

最好的方法是在 UserControl 中公开一个公共属性并从 ASPX 页面分配该属性：

通过代码：

```
var uc = this.myUserControl as MyCuserControlType;

uc.CustomUserControlProperty = this.MyPageProperty; 
```

声明式地

```
<uc:MyUserControlType1 runat="server= ID="myUserControl" CustomUserControlProperty="<%# this.MyPageProperty %>" /> 
```

注意：如果你想使用声明性标记，你需要调用`this.DataBind();`代码来强制绑定

### 编辑 1

如果您想做相反的事情（将值从控件传递到页面以响应事件），您可以在用户控件中声明自己的自定义事件并在需要时触发它。

例子：

**后面的用户控制代码***

```
public event Action<string> MyCustomEvent = delegate{};

....
// somewhere in your code
this.MyCustomEvent("some vlaue to pass to the page"); 
```

**页面标记**

```
<uc:MyUserControl1 runat="server" onMyCustomEvent="handleCustomEvent" /> 
```

**后面的页面代码**

```
public void handleCustomEvent(string value)
{
    // here on the page handle the value passed from the user control
    this.myLabel.Text = value;
    // which prints: "some vlaue to pass to the page"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T05:03:22.927

如果用户控件需要访问父页面上的某些内容，那么该用户控件可能应该将其作为自己的属性包含在内，该属性可以从父页面设置。理想情况下，用户控件应该独立于页面上的任何父上下文或其他用户控件，否则它们实际上是不可重用的。它们需要在它们暴露的所有属性中是自包含和可配置的。

# geospatial - ShapeFile 指向经度/纬度

> ID：12576407
> 
> 赞同：0
> 
> 时间：2012-09-25T04:58:30.623
> 
> 标签：geospatial, spatial, shapefile, dbase

我已经用以下列加载了我的 shapefile。[NumberOfParts],[ContentLength],[NumberOfPoints],[Points],[RecordNumber],[ShapeType],[XMax],XMin],[YMax],[YMin],[AU12],[NAME]。

我成功地从公式geometry::STGeomFromText(Points,4326) 导出了地理空间列。现在的问题是我需要从 Shapefile 中获取经度/纬度。Shapefile 包含新西兰的详细信息。请帮我推导出纬度/经度。我也有一个投影文件，但我不知道如何使用该文件来导出纬度/经度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:25:56.943

首先，您可能想要创建一个 Centroid 列并使用 STCentroid() 来填充它。

接下来，您可以使用 STX 和 STY 导出纬度/经度。对于美国，我使用它来导出纬度/经度坐标： CAST(centroid.STY AS decimal(8,6)) 和 CAST(centroid.STX AS decimal(9,6)) 因为经度最多可以是 3 位在小数点的左边，纬度只有 2。新西兰会有所不同。

# session - Struts2 会话超时拦截器不工作

> ID：12576408
> 
> 赞同：0
> 
> 时间：2012-09-25T04:58:33.767
> 
> 标签：session, timeout, interceptor

嗨朋友们，我是 struts2 中的新蜜蜂，我正在开发应用程序，其中我使用了会话超时拦截器，我的问题是超时没有发生下面是我引用代码的链接 [http://knowledge-serve.blogspot.in/2011 /10/session-timeout-interceptor-in-struts-2.html](http://knowledge-serve.blogspot.in/2011/10/session-timeout-interceptor-in-struts-2.html)

这个问题可能是因为我有一些 javascript 不断运行以刷新列表。或者可能是我错了，但这个会话没有过期

请帮帮我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:44:31.350

```
<interceptors>
       <interceptor name="SessionCheckInterceptor"  class="com.vicwalks.web.interceptor.SessionCheckInterceptor"/>        
      <interceptor-stack name="testSessionValidationStack">
                <interceptor-ref name="defaultStack" />               
                <interceptor-ref name="SessionCheckInterceptor" />
      </interceptor-stack> 

</interceptors> 
```

`struts.xml`拦截器的顺序很重要。尝试更改 . 的顺序。因为在`defaultStack and SessionCheckInterceptor`您的代码中`defaultstack`不会首先调用。因为您不会`sessionMap`在`sessionCheckInterceptor`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:52:13.307

正如 MayurB 正确指出的那样，您只需要交换堆栈。你也可以使用

```
HttpServletRequest request = (HttpServletRequest) context.get(HTTP_REQUEST);
HttpSession httpSession = request.getSession(false); 
```

这将在 defaultStack 之前可用

# perforce - 有没有办法撤消 Perforce 客户端中的记住编码？

> ID：12576410
> 
> 赞同：0
> 
> 时间：2012-09-25T04:58:47.187
> 
> 标签：perforce, perforce-client-spec

我不小心将编码设置为西欧并单击了 Perforce 客户端中的不再询问我框。我现在无法检查我对代码库的任何更改。有没有办法撤消这个？

谷歌说将 p4charset 设置回无（服务器是 Unicode），所以这就是我想要的，但即使在运行 cmd 行命令 p4 -C none 之后，它仍然设置为西方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:28:41.793

现在无法访问 P4 客户端，以下是来自 google 的答案。高温高压

你试过这个解决方案吗？[https://stackoverflow.com/a/5332788/705315](https://stackoverflow.com/a/5332788/705315)

P4CHARSET 也可以使用配置文件进行设置：[http ://www.perforce.com/perforce/doc.current/manuals/p4guide/02_config.html](http://www.perforce.com/perforce/doc.current/manuals/p4guide/02_config.html)

# java - 使用 gradle 在构建时在项目中包含本地 jar 文件

> ID：12576413
> 
> 赞同：32
> 
> 时间：2012-09-25T04:58:57.900
> 
> 标签：java, salesforce, gradle

我想在构建时使用 gradle 在我的项目中包含 salesforce 的 enterprise.jar 文件谁能帮我解决如何在我的项目中包含 src/main/resources 文件夹中的本地 jar 文件。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-09-25T05:58:29.963

这在[文档](http://www.gradle.org/docs/current/userguide/userguide_single.html#sub:file_dependencies)中进行了解释。以下应该做：

```
dependencies {
    compile files('./src/main/resources/enterprise.jar')
} 
```

不过我不会把罐子放进去`src/main/resources`。它不是您项目的资源，而是编译依赖项。我会把它放在一个lib目录中。

# jquery - 删除 jQuery 中的下拉值

> ID：12576414
> 
> 赞同：0
> 
> 时间：2012-09-25T04:59:02.337
> 
> 标签：jquery, radio-button, show-hide

每当勾选单选按钮 3 时，我都试图摆脱选项值 2，这是我根据我在类似问题中看到的内容得到的，但它似乎对我不起作用。

有什么建议么？

```
<input name="options" type="radio" value="1" id="option1">
<input name="options" type="radio" value="2" id="option2">
<input name="options" type="radio" value="3" id="option3">

<select name="number" id="number">
<option value=""></option>
<option value="0">0</option>
<option value="1">1</option>
<option value="2">2</option></select>

<script type="text/javascript">

    $(function(){
    $('#option3 input[type=radio][value=3]').attr('checked',true); 
        $("#number option[value='2']").remove()
});

</script> 
```

非常感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:03:18.387

您应该收听更改事件，目前您正尝试检查第三个单选按钮并删除 DOMReady 上的选项。

```
$(function(){
   $('input[name=options]').change(function(){
       if (this.id == 'option3') {
           $("#number option[value='2']").remove()
       }
   })
})​ 
```

[http://jsfiddle.net/rDp24/](http://jsfiddle.net/rDp24/)

在某些浏览器中，您无法隐藏选项元素，您可以删除该选项并再次附加它，试试这个：

```
var option = '<option value="2">2</option>';
$('input[name=options]').change(function() {
    var $select = $("#number");
    if (this.id == 'option3') {
        $select.find("option[value='2']").remove()
    } else if (!$select.find("option[value='2']").length) {
        $select.append(option)
    }
}) 
```

[http://jsfiddle.net/zszqs/](http://jsfiddle.net/zszqs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T05:01:44.837

您可以使用

```
$('#option3').change(function(){
     if ($(this).is(':checked')) {
                $("#number option[value='2']").remove();
            }
   });
}); 
```

它将删除该值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T05:03:15.737

它会为你工作

```
$("#number option[value='2']").val(''); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T05:23:09.470

[http://jsfiddle.net/m3K2c/](http://jsfiddle.net/m3K2c/)

这里有一个变体版本。

选择单选按钮`option3`将`hide`选项

选中其他单选按钮 ( `option1`& `option2`) 将`show`再次选择该选项。

# ssrs-2008 - SSRS 2008 R2 - “复杂”分组

> ID：12576415
> 
> 赞同：0
> 
> 时间：2012-09-25T04:59:29.573
> 
> 标签：ssrs-2008

我必须创建一个需要分组的报告，这在 SSRS 中似乎并不直接。

```
COL_ID   |    COL_FIELD1|  COL_FIELD2   | COL_FIELD 3
---------------------------------------------------------------------------
         |      ABC     |       |     CBA        
    1    |      DEF     |   5   |     LOT        
         |      GHI     |       |     JKH        
---------------------------------------------------------------------------
    2    |      UIO     |   7   |     JHG       
---------------------------------------------------------------------------
    6    |      PLK     |   6   |     HHJ        
         |      GTR     |       |           
--------------------------------------------------------------------------- 
```

列 COL_ID 是 ID，用于标识所有“案例”。如果一个 ID 下的多个案例，在一个列中具有相同的值，则单元格应垂直合并，并且该值应仅显示一次。

我希望示例表说明了它的外观。

有什么建议么？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:06:56.277

我认为您想做的事情在 SSRS 中是不可能的。

我正在尝试这种方法，但它不适用于您的示例..但它可能会给您更多想法：

*   创建 4 个组（每列一个）：G1、G2、G3、G4
*   在第二组，文本框上的表达式应该是`IIF(RowNumber("G1") = 1, Fields!Field1.Value,"")`
*   在第三组，文本框上的表达式应该是`IIF(RowNumber("G1") = 1 AND RowNumber("G2") = 1, Fields!Field1.Value,"")`（通过这样做，我们只显示组中的第一次出现）
*   在第 4 组添加 G3 条件..

要修复现在具有空文本的每个单元格的顶部和底部边框，您需要在顶部和底部属性上设置表达式，具体取决于您选择的组单元格：

*   最佳：`IIF(RowNumber("G1") = 1 AND RowNumber("G2") = 1, "Default", "None")`
*   底部：`IIF(RowNumber("G1") = CountRows("G1") AND RowNumber("G2") = CountRows("G2"), "Default", "None")`

# sql - 如何限制特定用户的访问或登录 sql server

> ID：12576417
> 
> 赞同：-2
> 
> 时间：2012-09-25T04:59:48.493
> 
> 标签：sql, sql-server, sql-server-2008

如何将 CREATE、ALTER、DROP 语句的访问权限限制为 SQL Server 2008 中的特定用户/登录名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:35:43.177

您可以使用此触发器，如果​​您只想使用 1 个数据库，请使用注释代码 @event 数据并编写您的逻辑

```
 CREATE TRIGGER [permissions]
    ON ALL SERVER
    FOR CREATE_Table,DROP_Table,ALTER_Table,
        CREATE_View,ALTER_View,Drop_View,
        CREATE_Trigger,ALTER_Trigger,Drop_Trigger,
        CREATE_DATABASE,DROP_DATABASE,ALTER_DATABASE,
        CREATE_USER,DROP_USER,ALTER_USER,
        CREATE_FUNCTION,ALTER_FUNCTION,DROP_FUNCTION,
        CREATE_Procedure,ALTER_Procedure,DROP_Procedure,
        CREATE_ASSEMBLY,ALTER_ASSEMBLY,DROP_ASSEMBLY,
        CREATE_ROLE,ALTER_ROLE,DROP_ROLE

AS

BEGIN   

 --   DECLARE @Eventdata XML,@ActionType varchar(100),@DataBase varchar(100)
    --SET @Eventdata = EVENTDATA()
        --SET @ActionType=@Eventdata.value('(/EVENT_INSTANCE/EventType)[1]',    'nvarchar(100)')
 --   SET @DataBase=@Eventdata.value('(/EVENT_INSTANCE/DatabaseName)[1]', 'nvarchar(100)')

   IF  SYSTEM_USER  IN ('user')
                BEGIN 
                RAISERROR ('not allowed.', 16, 1 );
                ROLLBACK;   
    END

  END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:37:34.760

SQL 权限层次结构从实例级别的登录开始，然后是数据库级别的用户，它们映射到实例的登录。

除非您通过服务器角色和数据库角色（这些是简化权限管理的原则和安全对象的集合）或通过直接授予对象权限，否则用户及其关联的登录名将没有任何权限。

在 SQL Server 中，DENY 会覆盖 GRANT，因此如果您的用户已经处于授予他们针对相关对象发出 DDL 权限的角色中，那么您可以拒绝他们对相关特定对象的权限。基于拒绝更改表权限的语法示例如下：

```
DENY ALTER ON OBJECT::dbo.MyTable TO MyUser 
```

当然，您也可以通过 GUI 来实现这一点。在 SSMS 中，钻取 Databases>MyDatabase>Security>Users，然后打开相关用户的属性并在此处更改其分配。

数据库世界中的安全性非常重要，我强烈建议您调查使用 Windows 组服务器角色和数据库角色来管理您的权限，而不是以临时方式设置权限。我还推荐一份完整记录的安全政策和例外文件，其中详细说明了您组织中的精确安全结构。保留这些工作文档将使您能够轻松跟踪谁可以做什么。这有助于避免不可否认性问题并使审计变得容易。

我希望这有帮助。

# python - 如何在 Python 字符串中包含反斜杠和引号

> ID：12576418
> 
> 赞同：1
> 
> 时间：2012-09-25T04:59:53.893
> 
> 标签：python

我有一组看起来像这样的特殊字符。

```
specialCharList=['`','~','!','@','#','$','%','^',
             '&','*','(',')','-','_','+','=',
             '|','','{','}','[',']',';',':',
             '"',',','.','<','>','/','?'] 
```

问题是，我想包含 ' 和 \ 字符但不能，因为它们用于字符串和转义。我将如何包含这些角色？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T05:01:11.163

反斜杠`\`字符用于转义具有特殊含义的字符，例如换行符、反斜杠本身或引号字符。

例子：

```
\\  Backslash (\)    
\'  Single quote (')     
\"  Double quote (") 
```

转义字符记录在 Python 语言参考手册中。如果他们对你来说是新的，你会发现他们有一段时间令人不安，但你会逐渐理解他们的力量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T05:02:45.700

您可以使用单引号、双引号或三引号来分隔字符串。

因此`"'"`，`'"'`有一些方法可以在您的字符串中使用引号字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:48:07.910

通过将特殊字符放入字符串中，可以大大提高列表的可读性：

```
>>> SCL = "`~!@#$%^&*()_-+=|{}[],;:'.><?/" + '"\\'
>>> specialCharacters = list(SCL) 
```

我们正在组合两个字符串，一个由`"`我们放置的位置和`'`分隔，第二个由`'`我们放置的位置和位置`"`分隔`\\`（我们必须转义，所以我们必须放置`'\\'`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-13T15:02:03.040

`string`Python中有一个内置模块。这个可以用。

```
>>>
>>> import string
>>> string.punctuation
'!"#$%&\'()*+,-./:;<=>?@[\\]^_`{|}~'
>>>
>>> list(string.punctuation)
['!', '"', '#', '$', '%', '&', "'", '(', ')', '*', '+', ',', '-', '.', '/', ':', ';', '<', '=', '>', '?', '@', '[', '\\', ']', '^', '_', '`', '{', '|', '}', '~']
>>> 
```

# mysql - MySQL在查询中获取当前行之前和之后的行

> ID：12576423
> 
> 赞同：2
> 
> 时间：2012-09-25T05:00:37.920
> 
> 标签：mysql, sql, database

我在 MySQL 中有五个表，我从中生成一些报告。出于显示目的，我将稍微抽象一下表名。假设我正在使用的表如下所述：

```
History  (id, serial, date, time) : Stores historic data, this is the main
                                    column we query.
Serial   (id, serial)             : Stores serial numbers used in the next
                                    3 tables.
Employee (id, serial_id, name)
Event    (id, serial_id, name)
Location (id, serial_id, name) 
```

**编辑：**重写了整个问题，希望它更清晰，更容易理解......

我需要查询事件，如果在历史记录中直接在与事件匹配的行之前找到员工序列，则**该**员工将与该事件相关联，同样，如果在历史记录中直接找到位置**之后**与事件匹配的序列的行，该位置将与该事件相关联。

样本数据：

```
History:
+------+------------+------------+----------+
| id   | serial     | date       | time     |
+------+------------+------------+----------+
| 1    | 00001234   | 2012-09-25 | 09:00:00 |
+------+------------+------------+----------+
| 2    | 00001235   | 2012-09-25 | 09:01:00 |
+------+------------+------------+----------+
| 3    | 00001236   | 2012-09-25 | 09:02:00 |
+------+------------+------------+----------+
| 4    | 00001235   | 2012-09-25 | 09:05:00 |
+------+------------+------------+----------+
| 5    | 00001236   | 2012-09-25 | 09:07:00 |
+------+------------+------------+----------+
| 6    | 00001235   | 2012-09-25 | 09:10:00 |
+------+------------+------------+----------+
| 7    | 00001235   | 2012-09-25 | 09:11:00 |
+------+------------+------------+----------+
| 8    | 00001235   | 2012-09-25 | 09:12:00 |
+------+------------+------------+----------+
| 9    | 00001236   | 2012-09-25 | 09:15:00 |
+------+------------+------------+----------+
| 10   | 00001234   | 2012-09-25 | 09:20:00 |
+------+------------+------------+----------+
| 11   | 00001236   | 2012-09-25 | 09:25:00 |
+------+------------+------------+----------+

Serial:
+----------+------------+
| id       | serial     |
+----------+------------+
| 1        | 00001234   |
+----------+------------+
| 2        | 00001235   |
+----------+------------+
| 3        | 00001236   |
+----------+------------+

Employee:
+----------+------------+-------------+
| id       | serial_id  | name        |
+----------+------------+-------------+
| 1        | 1          | John Smith  |
+----------+------------+-------------+

Event:
+----------+------------+-------------+
| id       | serial_id  | name        |
+----------+------------+-------------+
| 1        | 2          | Event 1     |
+----------+------------+-------------+

Location:
+----------+------------+-------------+
| id       | serial_id  | name        |
+----------+------------+-------------+
| 1        | 3          | Location 1  |
+----------+------------+-------------+ 
```

如果我要使用以下查询进行普通的 LEFT JOIN 查询（​​只是为了清楚起见作为结果的差异），结果将是：

```
SELECT
    history.id,
    history.serial,
    history.date,
    history.time,
    employee.name as 'employee',
    event.name as 'event',
    location.name as 'location'
FROM history
LEFT JOIN serial ON history.serial = serial.serial
LEFT JOIN employee ON serial.id = employee.serial_id
LEFT JOIN event ON serial.id = event.serial_id
LEFT JOIN location ON location.id = location.serial_id
ORDER BY date, time 
```

正常 LEFT JOIN 的结果是（为了清楚起见，我不需要这个结果集）：

```
+----+----------+------------+----------+------------+----------+------------+
| id | serial   | date       | time     | employee   | event    | location   |
+----+----------+------------+----------+------------+----------+------------+
| 1  | 00001234 | 2012-09-25 | 09:00:00 | John Smith | NULL     | NULL       |
+----+----------+------------+----------+------------+----------+------------+
| 2  | 00001235 | 2012-09-25 | 09:01:00 | NULL       | Event 1  | NULL       |
+----+----------+------------+----------+------------+----------+------------+
| 3  | 00001236 | 2012-09-25 | 09:02:00 | NULL       | NULL     | Location 1 |
+----+----------+------------+----------+------------+----------+------------+
| 4  | 00001235 | 2012-09-25 | 09:05:00 | NULL       | Event 1  | NULL       |
+----+----------+------------+----------+------------+----------+------------+
| 5  | 00001236 | 2012-09-25 | 09:07:00 | NULL       | NULL     | Location 1 |
+----+----------+------------+----------+------------+----------+------------+
| 6  | 00001235 | 2012-09-25 | 09:10:00 | NULL       | Event 1  | NULL       |
+----+----------+------------+----------+------------+----------+------------+
| 7  | 00001235 | 2012-09-25 | 09:11:00 | NULL       | Event 1  | NULL       |
+----+----------+------------+----------+------------+----------+------------+
| 8  | 00001235 | 2012-09-25 | 09:12:00 | NULL       | Event 1  | NULL       |
+----+----------+------------+----------+------------+----------+------------+
| 9  | 00001236 | 2012-09-25 | 09:15:00 | NULL       | NULL     | Location 1 |
+-----+---------+------------+----------+------------+----------+------------+
| 10 | 00001234 | 2012-09-25 | 09:20:00 | John Smith | NULL     | NULL       |
+----+----------+------------+----------+------------+----------+------------+
| 11 | 00001236 | 2012-09-25 | 09:25:00 | NULL       | NULL     | Location 1 |
+----+----------+------------+----------+------------+----------+------------+ 
```

查询应该基于事件，事件永远不应该为 NULL。它应该查看**PRIOR**行并将其标记为员工（如果不匹配，则为 null），它应该查看**AFTER**行并将其标记为位置（如果不匹配，则为 null）。使用上述数据的结果示例：

```
Result should be:
+----------+------------+------------+------------+----------+------------+
| e_serial | date       | time       | employee   | event    | location   |
+----------+------------+------------+------------+----------+------------+
| 00001235 | 2012-09-25 | 09:01:00   | John Smith | Event 1  | Location 1 |
+----------+------------+------------+------------+----------+------------+
| 00001235 | 2012-09-25 | 09:05:00   | NULL       | Event 1  | Location 1 |
+----------+------------+------------+------------+----------+------------+
| 00001235 | 2012-09-25 | 09:10:00   | NULL       | Event 1  | NULL       |
+----------+------------+------------+------------+----------+------------+
| 00001235 | 2012-09-25 | 09:11:00   | NULL       | Event 1  | NULL       |
+----------+------------+------------+------------+----------+------------+
| 00001235 | 2012-09-25 | 09:12:00   | NULL       | Event 1  | Location 1 |
+----------+------------+------------+------------+----------+------------+ 
```

我不确定这是否可以通过一些子选择或其他东西来实现，我认为这已经超出了我与 SQL 的联盟。目前我正在使用应用程序逻辑，但认为仅使用 SQL 处理它可能会更干净、更快捷。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:28:58.193

```
SELECT serial_id AS `serial`,
(SELECT `date` FROM History WHERE serial_id= event2.serial_id ) AS `date`,
(SELECT `time` FROM History WHERE serial_id= event2.serial_id ) AS `time`,
(SELECT `name` FROM event1 WHERE serial_id= event2.serial_id ) AS `event1`,`name` AS event2,
(SELECT `name` FROM event3 WHERE serial_id= event2.serial_id ) AS `event1`
FROM event2 
```

你的历史表应该是`History (id, serial_id, date, time)`，必须包含`serial_id`而不是`serial name`

对于您的情况，希望它可以正常工作

```
SELECT serial_id AS `serial`,
(SELECT `date` FROM History WHERE `serial` = (SELECT `serial` FROM `serial` WHERE id = event2.serial_id LIMIT 0,1)) AS `date`,
(SELECT `time` FROM History WHERE `serial`= (SELECT `serial` FROM `serial` WHERE id = event2.serial_id LIMIT 0,1)) AS `time`,
(SELECT `name` FROM event1 WHERE serial_id= event2.serial_id ) AS `event1`,
`name` AS event2,
(SELECT `name` FROM event3 WHERE serial_id= event2.serial_id ) AS `event1`
FROM event2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T01:12:56.353

如果其他人遇到问题，请在此处发布解决方案。感谢 dianuj 引导我朝着正确的方向前进。

```
SELECT
    serial.serial as 'e_serial',
    @dt:=TIMESTAMP(history.date, history.time) as 'date_time',
    history.date,
    history.time,
    (SELECT
        employee.name
    FROM
        history
        LEFT JOIN serial ON history.serial = serial.serial
        LEFT JOIN employee ON employee.serial_id = serial.id
    WHERE
        TIMESTAMP(history.date, history.time) = (
            SELECT
                max(TIMESTAMP(history.date, history.time))
            FROM
                history
            WHERE TIMESTAMP(history.date, history.time) < @dt
        )
    ) as 'employee',
    event.name as 'event',
    (SELECT
        location.name
    FROM
        history
        LEFT JOIN serial ON history.serial = serial.serial
        LEFT JOIN location ON location.serial_id = serial.id
    WHERE
        TIMESTAMP(history.date, history.time) > @dt
    LIMIT 1
    ) as 'location'
FROM history
LEFT JOIN serial ON history.serial = serial.serial
LEFT JOIN event ON serial.id = event.serial_id
WHERE event.name IS NOT NULL
ORDER BY history.date, history.time 
```

和结果

```
+----------+---------------------+------------+----------+------------+---------+------------+
| e_serial | date_time           | date       | time     | employee   | event   | location   |
+----------+---------------------+------------+----------+------------+---------+------------+
| 00001235 | 2012-09-25 09:01:00 | 2012-09-25 | 09:01:00 | John Smith | Event 1 | Location 1 |
| 00001235 | 2012-09-25 09:05:00 | 2012-09-25 | 09:05:00 | NULL       | Event 1 | Location 1 |
| 00001235 | 2012-09-25 09:10:00 | 2012-09-25 | 09:10:00 | NULL       | Event 1 | NULL       |
| 00001235 | 2012-09-25 09:11:00 | 2012-09-25 | 09:11:00 | NULL       | Event 1 | NULL       |
| 00001235 | 2012-09-25 09:12:00 | 2012-09-25 | 09:12:00 | NULL       | Event 1 | Location 1 |
+----------+---------------------+------------+----------+------------+---------+------------+
5 rows in set (0.01 sec) 
```

# iphone - 单击按钮即可锁定 iPad 方向

> ID：12576438
> 
> 赞同：3
> 
> 时间：2012-09-25T05:02:39.090
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ipad

在我`iPad`的基础应用程序中，单击按钮会初始化照片拍摄。

我正在背靠背拍摄五张照片。一旦我触摸按钮，**我需要锁定当前方向，五张照片应该在这个特定方向上拍摄。**

比如说，如果目前我处于横向模式，并且如果我触摸按钮，那么这五张照片应该是在这种横向模式下拍摄的。

**我目前正在使用以下代码。**

它有效，但对核心并不完美，存在滞后时间。只有在按下按钮几秒钟后，它才会被锁定。

```
// End notifying the orientation change
[[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications];

// Begin notifying the orientation change
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

您能否为此提出任何解决方案？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:10:16.713

覆盖 shouldAutorotate 方法（我在 iOS6 上测试它并且它有效）：

```
- (BOOL)shouldAutorotate
{
    return !self.isLocked;
}

- (IBAction)buttonClicked:(id)sender
{
    self.isLocked = !self.isLocked;
}
@end 
```

# java - Java 限制 KeyListener 更新

> ID：12576445
> 
> 赞同：4
> 
> 时间：2012-09-25T05:03:25.220
> 
> 标签：java, swing, keylistener

所以，我在我的 JFrame 中添加了一个 KeyListener，在我的 JPanel 中添加了一个线程，该线程被添加到我的 JFrame 中。问题是线程重绘的速度比 keylistener 的通知慢……有没有办法可以将 keylistener 限制为每秒 4 个键（或其他）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T05:54:36.487

您可以在 中使用 a `Timer`，`KeyListener`或者简单地跟踪最后一次按下某个键的时间并将其与当前时间进行比较。

`KeyListener`这使您可以在达到任何逻辑之前提前退出。但是，您无法阻止`KeyListener`触发，除非您不断删除它并在 250 毫秒后再次添加它。

另请注意，在 Swing 中，您通常会使用[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)而不是 a `KeyListener`，尽管它们会遇到完全相同的问题。

# sql-server - 如何从来自另一个查询的记录中减去来自一个查询的记录？

> ID：12576446
> 
> 赞同：2
> 
> 时间：2012-09-25T05:03:38.120
> 
> 标签：sql-server

这是两个查询，返回多条记录，那么有什么解决方案可以从另一个结果中减去一个结果的每一行数据？

查询1：

```
SELECT COUNT(*) As AbhidayNotPaidSansthan
 FROM PanjikaranMaster GROUP BY Zila 
```

查询2：

```
SELECT COUNT(*) as anps FROM AbhidayMaster,PanjikaranMaster
    WHERE PanjikaranMaster.OfficeRegId=AbhidayMaster.OfficeRegId AND
    AbhidayMaster.DipositDate Between ('2012-09-19') AND ('2012-09-24')
GROUP BY PanjikaranMaster.Zila 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:52:50.297

试试这个查询，它会解决你的问题：

```
SELECT ISNULL(a.cnt,0) -  ISNULL(b.cnt,0) AS CNT,a.Zila
FROM
    (SELECT Zila,COUNT(*) as cnt As AbhidayNotPaidSansthan
    FROM PanjikaranMaster GROUP BY Zila) a
    LEFT JOIN 
    (SELECT Zila,COUNT(*) as cnt FROM AbhidayMaster,PanjikaranMaster
    WHERE PanjikaranMaster.OfficeRegId=AbhidayMaster.OfficeRegId AND
    AbhidayMaster.DipositDate Between ('2012-09-19') AND ('2012-09-24')
    GROUP BY PanjikaranMaster.Zila) b 
    ON a.Zila = b.Zila 
```

我在**[SQLFIDDLE中做过类似的测试](http://sqlfiddle.com/#!3/2ae18/4)**

# javascript - 修改 DOM 时点击事件丢失

> ID：12576447
> 
> 赞同：3
> 
> 时间：2012-09-25T05:03:43.443
> 
> 标签：javascript, html

有两个`input`元素隐藏在模糊中。问题是，如果单击是在元素被隐藏在 DOM 之后的元素上，则导致模糊的单击事件会丢失。

如果单击的元素在模糊元素*之前，它会按预期工作*

这个简单的片段演示了：

```
<html>
<script src="./jquery.min.js" ></script>
<script type="text/javascript">
$(document).ready(function() {
        $('input').blur(function(e) {
            console.log('blurred');
            $(this).hide();
        });

        $('.a').click(function() {
            console.log('div clicked');
        });

        $(document).click(function() {
            console.log('doc clicked');
        });
    });
</script>
<body>
<div id="div1">
<div class="a"><input /></div>
<div class="a"><input /></div>
</div>
</body>
</html> 
```

如果单击底部输入，然后单击顶部，它会按预期工作 - “模糊”打印，然后“div clicked”，然后“doc clicked”，底部输入被隐藏。

如果单击顶部输入，则隐藏顶部输入的底部，仅“模糊”打印，并且无法在任何地方处理单击事件。

如果调用 to`hide`被注释掉，它也可以按预期工作。

使用`.live`并没有什么不同。

我可以想办法解决这个问题，但没有一个很好。关于为什么`input`s 的顺序很重要或更好的解决方案的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:51:58.910

好的好的好的，这只是我们一起愚蠢。

看看当你从上到下点击时发生了什么。

顶部有焦点。当您单击位于其下方的第二个输入时，会在单击事件在第二个 div 上注册*之前触发模糊事件。*

发生的事情是您*单击*第二个输入以使其获得焦点。由于事件从单击的目标（第二个输入）冒泡，因此它获得焦点。但是由于第一个输入模糊事件首先触发，它会将顶部 div 的高度降低到 0，并*立即*将第二个 div 向上移动到当前鼠标位置范围之外。因此，第二个 div 上的点击事件*永远不会发生*，因为在此之前 div 已经被移开。

您可以在这个 jsfiddle 中看到原因。[http://jsfiddle.net/Z884F/](http://jsfiddle.net/Z884F/)我添加了
元素来保持 div 的高度，即使它们的输入被隐藏。如果您查看控制台，您会发现它按预期工作。

Firefox 工作的原因是它处理事件的时间略有不同。

忽略我下面的原始答案：

这是非常奇怪的行为。我已经在 Mac OS 10.7 上的 Chrome 和 Safari 中验证了您的结果。但是，Firefox 12.0 可以按预期工作。

如果您在 500 毫秒 setTimeout 内进行模糊处理，它会按预期工作。虽然我认为父 div 上的事件仍在被删除。

我在这里有一个 jsfiddle，[http://jsfiddle.net/gsuTw/](http://jsfiddle.net/gsuTw/)

我强烈建议在 jQuery 开发网站上将此作为错误提交。这看起来像 blur() 的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:22:50.720

事件对象的*srcElement*属性是 IE 事件模型特有的。`e.target`jQuery 通过添加where exists but not来“规范化”事件对象`e.srcElement`：

```
 // Fix target property, if necessary (#1925, IE 6/7/8 & Safari2)
    if ( !event.target ) {
        event.target = originalEvent.srcElement || document;
    } 
```

所以在这一行：

```
>  $(e.srcElement).hide(); 
```

'e.srcElement` 返回 undefined 并且该语句什么也不做。

解决方法是更改`e.srcElement`​​为`e.target`或`this`改为使用。

请注意，在侦听器中，`this`是调用侦听`target`器的元素，而 是调度原始事件的元素。因此，它们可能会或可能不会引用相同的元素。

在模糊侦听器中`this === event.target`，但不在点击侦听器中。

顺便说一句，将调用链接在一起被认为是一种不好的做法，因为它会使错误（像这样的错误）难以找到和调试。拥有一个默默地忽略此类错误的库会使它变得更加困难，请考虑：

```
 $('input').blur(function(e) {

        if (e.srcElement) {
          $(e.srcElement).hide();

        } else {
          // No e.srcElement? what now!!
        }
    }); 
```

防御性编码实践对 Web 开发人员来说是通行证，但它们更可靠且更易于调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:32:17.737

我不认为这可以回答为什么事件被吞下。但如果输入的位置不是问题，您可以改为更改可见性。

```
$('input').blur(function(e) {
    console.log('blurred');
    $(this).css('visibility', 'hidden');
}); 
```

# xaml - C#/XAML Metro 应用程序中的 DatePicker 控件？

> ID：12576452
> 
> 赞同：2
> 
> 时间：2012-09-25T05:04:05.693
> 
> 标签：xaml, microsoft-metro, winrt-xaml

我想在我的 Metro 应用程序中使用 DATEPICKER 控件，但在 c#/xaml Metro 应用程序中似乎没有可用的 datepicker 控件，

那么你们有没有人找到解决这个问题的方法？

请告诉我 ，

感谢和问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:11:38.483

我从 codeplex 上的一个私人解决方案中找到了这个，我真诚地向拥有该链接的人道歉……但您可以使用以下代码创建一个控件：

Xaml 文件：

```
<UserControl x:Class="MyNamespace.Controls.DatePicker"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid x:Name="LayoutRoot" Background="Transparent">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <ComboBox x:Name="Day" Grid.Column="0" SelectionChanged="Day_SelectionChanged" Width="70" Margin="0,0,10,0" />
            <ComboBox x:Name="Month" Grid.Column="1" SelectionChanged="Day_SelectionChanged" Width="70" Margin="0,0,10,0" />
            <ComboBox x:Name="Year" Grid.Column="2" SelectionChanged="Day_SelectionChanged" Width="100" />
        </Grid>
    </Grid>
</UserControl> 
```

及其背后的代码：

```
using System;
using System.Collections.Generic;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;

namespace MyNamespace.Controls
{
    public sealed partial class DatePicker
    {
        private bool initializing = true; 
        public DatePicker()
        {
            InitializeComponent();

            UpdateValues(0, 0);
            Day.SelectedIndex = 0;
            Month.SelectedIndex = 0;
            Year.SelectedIndex = 0;
            initializing = false; 
        }

        public static readonly DependencyProperty AllowNullProperty =
            DependencyProperty.Register("AllowNull", typeof(bool), typeof(DatePicker), new PropertyMetadata(true));

        public bool AllowNull
        {
            get { return (bool)GetValue(AllowNullProperty); }
            set { SetValue(AllowNullProperty, value); }
        }

        public static readonly DependencyProperty SelectedDateProperty =
            DependencyProperty.Register("SelectedDate", typeof(DateTime?), typeof(DatePicker), new PropertyMetadata(null, OnSelectedItemChanged));

        public DateTime? SelectedDate
        {
            get { return (DateTime?)GetValue(SelectedDateProperty); }
            set { SetValue(SelectedDateProperty, value); }
        }

        public event RoutedEventHandler SelectedItemChanged; 

        private static void OnSelectedItemChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var ctrl = (DatePicker)d;
            if (ctrl.initializing)
                return;

            ctrl.initializing = true;
            ctrl.UpdateDate();
            ctrl.initializing = false; 

            if (ctrl.SelectedItemChanged != null)
                ctrl.SelectedItemChanged(ctrl, new RoutedEventArgs());
        }

        public void UpdateDate()
        {
            if (SelectedDate.HasValue)
            {
                UpdateValues(SelectedDate.Value.Year, SelectedDate.Value.Month);

                if (AllowNull)
                {
                    Day.SelectedIndex = SelectedDate.Value.Day;
                    Month.SelectedIndex = SelectedDate.Value.Month;
                    Year.SelectedIndex = SelectedDate.Value.Year - 2000 + 1;
                }
                else
                {
                    Day.SelectedIndex = SelectedDate.Value.Day - 1;
                    Month.SelectedIndex = SelectedDate.Value.Month - 1;
                    Year.SelectedIndex = SelectedDate.Value.Year - 2000;
                }
            }
            else
            {
                UpdateValues(0, 0);
                Day.SelectedIndex = 0;
                Month.SelectedIndex = 0;
                Year.SelectedIndex = 0;
            }
        }

        public void UpdateValues(int year, int month)
        {
            var days = new List<string>();
            if (AllowNull)
                days.Add(" ");
            for (var i = 1; i <= 31; i++)//(year != 0 && month != 0 ? DateTime.DaysInMonth(year, month) : 31); i++)
                days.Add(i.ToString());

            var months = new List<string>();
            if (AllowNull)
                months.Add(" ");
            for (var i = 1; i <= 12; i++)
                months.Add(i.ToString());

            var years = new List<string>();
            if (AllowNull)
                years.Add(" ");
            for (var i = 2000; i <= 2020; i++)
                years.Add(i.ToString());

            if (Month.SelectedIndex > months.Count - 1)
                Month.SelectedIndex = months.Count - 1; 

            Day.ItemsSource = days;
            Month.ItemsSource = months;
            Year.ItemsSource = years; 
        }

        private void Day_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            if (initializing)
                return;

            var hour = SelectedDate != null ? SelectedDate.Value.Hour : 0;
            var minute = SelectedDate != null ? SelectedDate.Value.Minute : 0;
            var second = SelectedDate != null ? SelectedDate.Value.Second : 0;

            initializing = true;
            if (AllowNull && (Day.SelectedIndex == 0 || Month.SelectedIndex == 0 || Year.SelectedIndex == 0))
                SelectedDate = null;
            else
            {
                if (AllowNull)
                    SelectedDate = new DateTime(Year.SelectedIndex + 2000 - 1, Month.SelectedIndex, Day.SelectedIndex, hour, minute, second);
                else
                    SelectedDate = new DateTime(Year.SelectedIndex + 2000, Month.SelectedIndex + 1, Day.SelectedIndex + 1, hour, minute, second);
            }

            //if (SelectedItem.HasValue)
            //  UpdateValues(SelectedItem.Value.Year, SelectedItem.Value.Month);
            //else
            //  UpdateValues(0, 0);

            initializing = false; 
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T09:52:56.973

现在微软提供了一个用于windwos商店应用程序的DatePicker控件。它带有Windows 8.1。

在此处查看其他新控件：http: [//msdn.microsoft.com/en-us/library/windows/apps/bg182878.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/bg182878.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T05:54:03.227

[Telerik](http://www.telerik.com/products/windows-metro/controls/date-picker.aspx)提供了一个 DatePicker 。但它不是免费的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T05:58:41.337

通过这个[链接](http://www.telerik.com/help/metro-xaml/common-create-application-and-adding-control.html)，我认为这就是你要找的。

在此之前你应该安装[Telerik](http://www.telerik.com/products/windows-metro/overview.aspx) free windows8 rc

# python - Python 和 Matplotlib 以及鼠标悬停注释

> ID：12576454
> 
> 赞同：6
> 
> 时间：2012-09-25T05:04:35.717
> 
> 标签：python, annotations, matplotlib, wxpython, matplotlib-basemap

当我单击 Basemap Matplotlib Plot 中的一个点时，我目前正在使用此代码在地图上弹出注释。

```
dcc = DataCursor(self.figure.gca())
self.figure.canvas.mpl_connect('pick_event',dcc)
plot_handle.set_picker(5)
self.figure.canvas.draw()

class DataCursor(object):

    import matplotlib.pyplot as plt

    text_template = 'x: %0.2f\ny: %0.2f' 
    x, y = 0.0, 0.0 
    xoffset, yoffset = -20 , 20
    text_template = 'A: %s\nB: %s\nC: %s'

    def __init__(self, ax): 
        self.ax = ax 
        self.annotation = ax.annotate(self.text_template,  
                xy=(self.x, self.y), xytext=(0,0),
                textcoords='axes fraction', ha='left', va='bottom', fontsize=10,
                bbox=dict(boxstyle='round,pad=0.5', fc='yellow', alpha=1), 
                arrowprops=dict(arrowstyle='->', connectionstyle='arc3,rad=0') 
                ) 
        self.annotation.set_visible(False)
        self.annotation.draggable()

    def __call__(self, event):

        self.event = event 
        self.x, self.y = event.mouseevent.xdata, event.mouseevent.ydata

        if self.x is not None:
            glim = pickle.load(open("ListA.py","rb"))
            tlim = pickle.load(open("ListB.py","rb"))
            vlim = pickle.load(open("ListC.py","rb"))
            a = glim[event.ind[0]] # ['Name'][event.ind[0]]
            b = tlim[event.ind[0]]
            c = vlim[event.ind[0]]
            temp_temp=self.text_template % (a, b, c)
            if temp_temp == self.annotation.get_text() and self.annotation.get_visible(): 
                self.annotation.set_visible(False) 
                event.canvas.draw() 
                return 
            self.annotation.xy = self.x, self.y
            self.annotation.set_text(self.text_template % (a, b, c))
            self.annotation.set_visible(True)

            event.canvas.draw() 
```

我想知道的是如何使用鼠标悬停而不是单击一个点来显示注释？

我见过“motion_notify_event”，但是当我在绘图区域周围移动鼠标时，代码似乎出错了。有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T06:12:39.423

看看[这个问题](https://stackoverflow.com/questions/7908636/possible-to-make-labels-appear-when-hovering-over-a-point-in-matplotlib)和[演示](http://matplotlib.org/examples/event_handling/pick_event_demo.html)：

```
from matplotlib.pyplot import figure, show
import numpy as npy
from numpy.random import rand

if 1: # picking on a scatter plot (matplotlib.collections.RegularPolyCollection)

    x, y, c, s = rand(4, 100)
    def onpick3(event):
        ind = event.ind
        print 'onpick3 scatter:', ind, npy.take(x, ind), npy.take(y, ind)

    fig = figure()
    ax1 = fig.add_subplot(111)
    col = ax1.scatter(x, y, 100*s, c, picker=True)
    #fig.savefig('pscoll.eps')
    fig.canvas.mpl_connect('pick_event', onpick3)

show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-27T09:58:56.187

```
from mpl_toolkits.basemap import Basemap
import matplotlib.pyplot as plt

lat = 20.5937
lon = 78.9629
points_with_annotation = list()

#Event is set for any movement and annotations are set to visible when on points with anotation
def on_move(event):
    visibility_changed = False
    for point, annotation in points_with_annotation:
        should_be_visible = (point.contains(event)[0] == True)

        if should_be_visible != annotation.get_visible():
            visibility_changed = True
            annotation.set_visible(should_be_visible)

    if visibility_changed:        
        plt.draw()

fig = plt.figure()
ax = plt.axes()

m = Basemap(projection='mill', llcrnrlat=-90, llcrnrlon=-180, urcrnrlat=90, urcrnrlon=180, resolution='c')
m.fillcontinents(color='white', lake_color='white')
m.drawcoastlines(linewidth=0.5, color='k')
m.drawcountries(linewidth=0.5, color='k')
m.drawmapboundary(fill_color='white')

xpt, ypt = m(lon,lat)
point, = m.plot(xpt, ypt, marker='o', markersize=5, alpha=0.85, visible=True)
annotation = ax.annotate("Lat: %s Lon: %s" % (lat,lon), 
    xy=(xpt, ypt), xycoords='data',
    xytext=(xpt + 1, ypt), textcoords='data',
    horizontalalignment="left",
    arrowprops=dict(arrowstyle="simple",
    connectionstyle="arc3,rad=-0.2"),
    bbox=dict(boxstyle="round", facecolor="w", 
    edgecolor="0.5", alpha=0.9)
        )

annotation.set_visible(False)
points_with_annotation.append([point, annotation])
on_move_id = fig.canvas.mpl_connect('motion_notify_event', on_move)
plt.show() 
```

这是在地图上绘制坐标并在悬停期间启用弹出窗口的代码。`on_move`我从这个问题的答案中得到了事件的代码： [Matplotlib 底图：弹出框](https://stackoverflow.com/questions/11537374/matplotlib-basemap-popup-box) 希望这会有所帮助。

# android - 有人可以帮我缩放相对布局吗？

> ID：12576455
> 
> 赞同：0
> 
> 时间：2012-09-25T05:04:38.170
> 
> 标签：android, zooming, android-relativelayout

实际上，我想创建以 excel 结构表示的数据的 RelativeLayout。所以我想放大这些数据。我研究了很多。但找不到缩放相对布局的正确方法。任何人都可以帮我找出这个解决方案，所以我有缩放 relativeLayout。我的主要目标是缩放数据。所以任何支持缩放的容器，我都会接受。

我也尝试过webview。但在 4.0.4 和 4.0.3 中刷新数据时。我们的缩放功能重置其原始位置..

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:12:21.303

我希望它可以帮助你一段时间，.. 参考这里[http://myandroidnote.blogspot.in/2011/03/zooming-view-completely.html](http://myandroidnote.blogspot.in/2011/03/zooming-view-completely.html)

# c# - 寻找边缘情况并解决循环队列和循环排列

> ID：12576458
> 
> 赞同：0
> 
> 时间：2012-09-25T05:04:41.580
> 
> 标签：c#, algorithm

我有一个循环队列，例如 {1,2,3,4,5,6} 现在给了我一个模式，所以我必须找出它是否从循环队列中分离出来。例如，如果给我一个模式，如 {4,5,6,1,2,3} 那么是的，它从循环队列中分离出来。

如果给我另一个模式，例如 {4,3,2,1,6,5}，那么是的，它从循环队列中分离出来。这里我展示了我能想到的两个可能的测试用例。

另一个例子是如果我得到一个 {4,5,6,2,3,4} 或 {7,6,5,3,4,5} ，它们都没有从循环队列中拆分出来。

只是想如果有人能找到更多可能的测试用例来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:28:52.780

将模式“从循环队列中拆分”不是标准术语，但假设您的意思是队列中有一系列条目与该模式匹配，这里还有三种情况可供尝试：
• 任何队列，空模式 - 应该匹配
• 空队列，非空模式 - 不应该匹配
• With queue={1,2,3}，模式 {1,2,3,1,2} - 应该匹配

# javascript - 如何在延迟（）之后使用 jQuery 重定向？

> ID：12576460
> 
> 赞同：5
> 
> 时间：2012-09-25T05:04:57.073
> 
> 标签：javascript, jquery, html

我正在使用 jQuery`delay()`函数来延迟`show()`事件，但之后我想更改页面的 location.href。我怎样才能做到这一点？

```
$('#error').delay(800).show();
location.href = '/profile' 
```

抱歉，我忘了提到我也想延迟重定向。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T05:07:01.163

为 show() 提供回调

```
$('#error').delay(800).show(0, function () {
    setTimeout(function () {
        location.href = '/profile'
    }, 8000);
}); 
```

.show() 上的文档[http://api.jquery.com/show/](http://api.jquery.com/show/)

“显示”将在 800 毫秒后发生，然后在元素显示后，重定向将在 8 秒后发生。可以这么说，使用此代码，您将有 2 个“延迟”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T05:08:57.540

改为使用`window.setTimeout()`，`.delay`只能用于 jQuery 动画。

```
$('#error').show();
setTimeout(function() {
  location.href = '/profile';
}, 800); 
```

# android - 共享公钥的问题

> ID：12576463
> 
> 赞同：1
> 
> 时间：2012-09-25T05:05:39.510
> 
> 标签：android, security, aes, public-key-encryption

我正在使用客户端/服务器，我在应用程序本身中为每个客户端提供了一个公钥，并且在客户端和服务器之间的任何对话开始时，他们使用这个公钥/私钥对共享一个 AES 密钥，然后每件事都被加密使用这个键....

我想知道这个模型会出现什么问题......一个是服务器无法验证谁实际发送数据。数字签名......但用户稍后会发送它的凭据......

MIM 攻击在这里可以做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:08:50.707

总之，这很复杂，不要试图重新发明它，只需使用 SSL。有多种方法可以解决这个问题，除非这是出于学术目的，否则不要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:19:58.440

是的，你在这里冒险。一个（攻击者）可以接受这一点`public key`并充当受信任的角色`client`。我猜你是`public key`用`ssh-keygen`.

# asp.net - 对此的 URL 重写规则是什么？

> ID：12576464
> 
> 赞同：0
> 
> 时间：2012-09-25T05:05:39.817
> 
> 标签：asp.net, url-rewriting

我在 Godaddy 的 Windows 主机上有一个静态 Web 应用程序。

在我的应用程序中，我有如下 URL：

```
http://MyDomain.com/?page_id=18
http://MyDomain.com/?page_id=19
http://MyDomain.com/?page_id=20 
```

我希望重写的 URL 是这样的：

```
http://MyDomain.com/microsoft-cloud-crm-for-small-business
http://MyDomain.com/online-development
http://MyDomain.com/small-development 
```

那么 web.config 文件中的 URL 重写规则是什么？

**编辑：**

```
<configuration>
<system.webServer>
<httpErrors errorMode="Detailed" />
<asp scriptErrorSentToBrowser="true"/>
<rewrite>
    <rules>
    <rule name="Rewrite url" stopProcessing="true">
        <match url="^\?page_id=18" />
                    <action type="Rewrite" url="microsoft-cloud-crm-for-small-business" />
    </rule>
    <rule name="Rewrite url1">
        <match url="^\?page_id=21" />
                    <action type="Rewrite" url="Implementation" />
    </rule>
    </rules>
</rewrite>
</system.webServer>
<system.web>
    <customErrors mode="Off"/>
    <compilation debug="true"/>
</system.web>
</configuration> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:14:33.773

嗨，实际上我没有使用 .html 扩展 url 重写。我正在使用一个不带扩展名的 url 重写，你说的是哪个 url 我在我的项目中为该 url 创建了一个规则，它在下面

```
<add name="test"  virtualUrl="^~/test-page/([0-9,a-z,A-Z,_,-]*)"
  rewriteUrlParameter="ExcludeFromClientQueryString"
  destinationUrl="~/test.aspx?cid=$1"
  ignoreCase="true" /> 
```

我想这会帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:21:10.310

好吧，如果您将 asp.net 与 .Net 4.0 版一起使用，您也可以在 Web 表单项目中获得 RouteCollection 的好处。

使用它，您可以轻松地将您的 URL 映射到特定的导航规则。

例如，在您的情况下，如果“microsoft-cloud-crm-for-small-business”与任何表中的名称相同，您可以将以下代码放入 global.asax ...

```
 routes.MapPageRoute(
               "ViewPageDetail",               // Route name
               "/{*CategoryName}",  // Route URL
               "~/PageDetail.aspx"      // Web page to handle route
            ); 
```

然后在您的页面加载中，您可以拥有类似以下的内容。

```
string productName = Page.RouteData.Values["CategoryName"] as string; 
```

并使用产品名称获取产品详细信息。

通过这种方式，您可以使用正在呈现的逻辑和页面实现更好的代码完整性。这是用于 SEO 的 asp.net 4.0 中的新内容之一。

您[可以检查](http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx)以获得更好的理解。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T05:38:04.793

```
<rewrite>
<rules>
<rule name="Rewrite url">
    <match url="^?page_id=18" />
    <action type="Rewrite" url="custom-development.html" />
    </rule>
</rules>
</rewrite> 
```

# http - 在节点js中如何在提交表单时连接post方法

> ID：12576466
> 
> 赞同：0
> 
> 时间：2012-09-25T05:06:04.690
> 
> 标签：http, node.js

这是我的表单如何与节点 js 连接。提交此表单时

```
<form id="fileupload" action="/file-upload" method="POST" enctype="multipart/form-data"> 
<input id="fileToBeUploaded" type="file" name="thumbnail">
<input type="submit" value="upload"> 
</form> 
```

服务器端

```
var http = require("http");
var url = require("url");

http.createServer(function(req, res) {
  switch (url.parse(req.url).pathname)
  { 
    case '/': console.log('server side methodcalled'); 
      break;
    case '/file-upload': console.log('server side method called');
      break; 
    default: 
      console.log('server side method called');
      break;
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:27:25.227

在您的 nodejs 服务器程序中，您可以检查请求方法和操作。

```
if((request.method == 'POST') && (request.url == '/file-upload') {
  .......
} 
```

更新 -

```
var http = require("http");
var url = require("url");
var fs = require("fs");

http.createServer(function(req, res) {
  switch (url.parse(req.url).pathname)
  { 
    case '/': 
      console.log('server side methodcalled'); 
        fs.readFile(__dirname + '/index.html',
          function (err, data) {    
            res.writeHead(200);
            res.end(data);
          });
        break;
    case '/file-upload': 
      console.log('server side method called');
      break; 
    default: 
      console.log('server side method called');
      break;
  }
}).listen(3000); 
```

现在您可以连接到 localhost:3000

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:51:01.107

为了实现文件上传，您需要阅读请求的主体并解析出多个部分。这可能很棘手，所以我强烈建议您使用现有的模块，如强大的，或在幕后调用它的东西，如 connect.bodyParser() 或 express.bodyParser()。

# xpath - 选择其祖先节点包含特定子节点的以下同级文本

> ID：12576468
> 
> 赞同：0
> 
> 时间：2012-09-25T05:06:21.253
> 
> 标签：xpath

我想选择其祖先为 td 的节点的文本，并将输入标记作为子节点：

输入是：

```
<tr>
    <td width="1"><input type="checkbox" name="marketCodes" value="AE01" onclick="facetCheckboxClicked(this)"></td>
    <td style="padding-left:5px;padding-right:5px;">Defense &amp; Security&nbsp;(1028)</td>
    <td width="1"><input type="checkbox" name="marketCodes" value="AE02" onclick="facetCheckboxClicked(this)"></td>
    <td style="padding-left:5px;padding-right:5px;">Geotechnologies (96)</td>
    <td style="padding-left:5px;padding-right:5px;">Aircraft Products & Services (594)</td>
</tr> 
```

预期输出为：

```
 Defense &amp; Security&nbsp;(1028)
 Geotechnologies (96) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:52:26.867

这个怎么样：

```
//td[preceding-sibling::td[1]/input]/text() 
```

# ubuntu - 在 ubuntu 上安装 apache2

> ID：12576476
> 
> 赞同：1
> 
> 时间：2012-09-25T05:07:28.137
> 
> 标签：ubuntu, apache2, ubuntu-12.04

我的 apache2 在 ubuntu 上工作正常。但是现在当我重新启动它时它显示以下错误。

*   重新启动 Web 服务器 apache2 apache2：无法可靠地确定服务器的完全限定域名，使用 127.0.1.1 作为 ServerName apache2：无法可靠地确定服务器的完全限定域名，使用 127.0.1.1 作为 ServerName

我试过卸载然后重新安装它..

我编辑我的配置文件并添加了 ServerName localhost

虽然错误消失了，但我仍然无法在浏览器上运行 localhost

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T05:30:24.973

编辑 /etc/apache2/httpd.conf 并添加以下行

```
ServerName localhost 
```

现在重新启动apache

```
sudo /etc/init.d/apache2 restart 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T17:54:51.517

您需要确保您的 FQDN 设置正确。

尝试以下

1.  编辑 /etc/hostname，例如 localhost
2.  运行：主机名 -F /etc/主机名
3.  相应地编辑 /etc/hosts
4.  /etc/init.d/apache2 重启

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-06T22:55:58.480

```
Open Terminal (Ctrl + Alt + t)
sudo gedit /etc/apache2/httpd.conf
(you can also use any editor like nano vi )
(By default httpd.conf file will be blank. Now, simply add the following line to the file)
ServerName localhost
(Save the file and close gedit)
sudo /etc/init.d/apache2 restart 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-01T17:55:19.823

需要修改httpd.conf文件

> 须藤 vim /etc/apache2/httpd.conf

这是空白文件，您需要添加：

> 服务器名称本地主机

到 httpd.conf。然后重启apache。

> apache2ctl 重启

# c++ - 链表数据访问

> ID：12576479
> 
> 赞同：0
> 
> 时间：2012-09-25T05:07:51.260
> 
> 标签：c++, linked-list, binary-search-tree, singly-linked-list

在 C++ 中，如果我有以下形式的二叉搜索树 (BST)

```
Struct node{ 
 node leftChild; 
 node rightChild; 
 int data;} 
```

像这样访问 leftChild 数据是否合法：

```
foo (node head)
    {
    std::cout << head.leftChild.data; 
    } 
```

此外，有时我看到链表节点对子节点使用 *node，而其他时候他们只使用节点。何时/为什么要使用其中任何一个。对不起，字符串问题只是好奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T05:11:27.423

不，因为你不能有这样的结构。它将是无限大的（a`node`有两个孩子`node`，每个孩子都有两个孩子`node`，等等）。这就是为什么人们在创建具有相同类型子节点的节点时会使用指针的原因。

例如，如何**不**这样做：

```
/* This is a problem because of the recursive nature of the structure. leftChild also
contains a leftChild itself, which also contains a leftChild, etc. forever. */
struct node
{ 
    node leftChild; // how big is leftChild? infinitely large!
    node rightChild; // how big is rightChild? infinitely large!
    int data;
} 
```

**正确**的方法是：

```
/* This is not a problem because the size of a pointer is always 4 bytes (assuming 32-
bit system). You can allocate room for the child nodes without recursively requiring an
infinite amount of memory. */
struct node
{ 
    node* leftChild; // how big is leftChild? 4 bytes (assuming 32-bit system)
    node* rightChild; // how big is rightChild? 4 bytes (assuming 32-bit system)
    int data;
} 
```

一旦您以正确的方式进行操作，就可以完全合法地说：

```
void foo(node head)
{
    std::cout << head.leftChild->data; // assuming leftChild points to a valid object!
} 
```

# java - 如何使用 java 或 PHP 制作服务器以向多个 Java 客户端发送信息？

> ID：12576485
> 
> 赞同：-1
> 
> 时间：2012-09-25T05:08:05.627
> 
> 标签：java, php, multithreading, sockets, client

我希望我的 PHP 服务器向一个或多个 java 客户端发送信息。每个 Java 客户端都有一个 ID，服务器如何不检查所有客户端的 ID 就知道哪个客户端将接收此信息。

我做了一些研究，我认为我需要使用套接字和多线程，但我是 Java、PHP 和网络的初学者，我需要一些指导。

那么，服务器如何在不询问每个客户端的 ID 的情况下知道哪个客户端将接收此信息。

服务器将在没有请求的情况下发送给 java(android)clients。

我通过使用推送通知服务解决了这个问题...谢谢大家的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:28:11.267

`CRON JOB`在服务器端使用。

它将在特定时间执行 php 脚本，无需客户端调用。

[http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)

试试这个教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:11:33.967

一般来说，服务器会监听并响应请求。来自您的客户的请求将包括他们的 ID，因此服务器会知道谁在响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T05:12:08.380

通常，在这种情况下，您会使用[发布-订阅](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)机制，发布者（在这种情况下是您的 PHP 程序）会将打算由客户端使用的数据发布到通道。订阅者（在您的情况下为 java 程序）将订阅此表示使用主题/id 的频道并使用数据。这个[SO question 讨论了 PHP/JAVA 的类似场景](https://stackoverflow.com/questions/3070869/communicating-between-php-and-java-using-activemq-stomp)。

# android - 将访问数据库存储在云中

> ID：12576497
> 
> 赞同：1
> 
> 时间：2012-09-25T05:09:33.687
> 
> 标签：android, web-services, ms-access, cloud

我有一个大型访问数据库，它有 500-750 条记录。我每天都用它来添加日常事务。我想创建一个 android 应用程序，以便我可以在途中将记录添加到数据库中。我可以通过什么方式实现这一目标？在创建 Web 服务以从云访问数据库方面的任何帮助也将很有用......

# ios - 使用相同的重新排序对多个 NSArray 对象进行排序

> ID：12576498
> 
> 赞同：1
> 
> 时间：2012-09-25T05:09:42.690
> 
> 标签：ios, sqlite, sorting, nsarray

我有几个`NSArray`对象，它们有效地代表了可能考虑数据库表的内容。我想对其中一个进行排序，并让所有其他人按照相同的顺序进行排序。

这方面的一个例子是拥有`NSArray`“name”、“address”和“phone_number”的对象，并按名称对它们进行排序。

当前的方法是一个自定义的 shell 排序例程，它只对“名称”运行比较，但在所有受影响的数组上移动数据。这很有效，而且相对干净。当然，由于`NSObjects` **vs** C 数组的开销，您会受到打击。

有没有更快、更干净、更“iOS”的方式来做到这一点？

将其全部放入 SQLite 表中并这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:16:53.110

一种干净的方法是将数据存储在单个对象中`NSArray`。`NSDictionary`然后你可以像这样对数组进行排序：

```
NSSortDescriptor *sortName = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES]; 
NSArray *sortedArray = [originalArray sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortName]] 
```

我能想到的唯一其他方法是：

*   创建一个索引，即一个包含数字 0、1、...、N-1 的数组。
*   根据`name`数组的内容对索引进行排序。
*   对于每个数组，根据原始数组和排序索引创建一个排序数组。

# c# - JSON.NET 和 nHibernate，序列化时忽略延迟加载的对象

> ID：12576502
> 
> 赞同：3
> 
> 时间：2012-09-25T05:10:11.800
> 
> 标签：c#, nhibernate, json.net

我有一个汽车历史数据库。每个汽车历史都有多个与之关联的图像。我正在使用 NHibernate 2.2 来设置关系，并且 CarHistory 映射包含一个图像包：

```
<bag name="Photos" table="DetailPhoto" cascade="all" lazy="true">
  <key column="CAR_DETAIL_ID"/>
  <one-to-many class="DetailPhoto"/>
</bag> 
```

我有一个 iPad 应用程序，它使用 JSON 与服务器通信。我想将所有汽车历史记录项加载到 iPad 上的列表中，并且我不想在加载列表时包含照片，因为它会减慢数据检索速度，这就是我让照片变得懒惰的原因。

当我尝试使用 JsonConvert.SerializeObject 序列化我的汽车历史列表时，我得到一个延迟初始化异常，这是因为我已经加载了我的对象并关闭了会话，因为我不需要照片并且 JsonSerializer 正在触及所有对象上的属性。

我想在没有照片的情况下将 Json 数据返回给客户端，但我不能在我的对象上使用忽略 JsonProperty，因为我想在其他情况下加载此集合。

我已经尝试过了，但它只是做了同样的事情给了我延迟初始化异常： [http ://www.royjacobs.org/2011/07/27/using-json-net-to-serialize-proxied-nhibernate-objects/](http://www.royjacobs.org/2011/07/27/using-json-net-to-serialize-proxied-nhibernate-objects/)

这是我的 CarHistory (CarDetail) 课程

```
 public class CarDetail
{
    [JsonProperty("id")]
    public virtual int Id { get; set; }

    [JsonProperty("carId")]
    public virtual int CarId { get; set; }

    [JsonProperty("date")]
    public virtual DateTime ? Date { get; set; }

    [JsonProperty("details")]
    public virtual string Details { get; set; }

    [JsonProperty("photos")]
    public virtual IList<DetailPhoto> Photos { get; set; }
} 
```

所以我的问题是如何在某些情况下而不是其他情况下检索没有关联照片的 CarHistories 列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:14:55.647

对于这种情况，您通常希望在“连接”域对象和序列化格式之间提供一层。我通常创建一个数据传输对象，它类似于域模型对象，但通常没有直接关联，而是只有 ID 列表。然后我使用[Automapper](http://automapper.codeplex.com/)在数据传输对象和域对象之间进行映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-02T10:05:14.507

默认的 contract-serializer 尝试序列化所有内容，当它遇到尚未加载的事物时，它无法识别它并尝试对其进行序列化。这反过来又迫使代理尝试加载数据，这会导致性能问题（1 + n + n^2 + .. 查询）或直接抛出异常（当会话已经关闭时） - 这就是您在第一名。

使用自定义的合同解析器，您将能够**指示序列化程序不序列化**未加载的集合和属性。或者更好地抛出一个异常，或者记录它，无论你想要什么。

查看类似的问题：[NHibernate Proxies (NH 3.3.2.4000) 的 JSON.Net Serialization](https://stackoverflow.com/questions/18208357/json-net-serialization-of-nhibernate-proxies-nh-3-3-2-4000) - 您可以在那里找到自定义 ContractResolver 的示例。

但是，由于您的问题不同，它并不完全满足您的需求，因此在编写自己的 ContractResolver 时，您应该在其中过滤要序列化的属性，例如：

```
var propertyInfo = (PropertyInfo)member;
var value = propertyInfo.GetValue(target);
var shouldSerialize = NH.NHibernateUtil.IsInitialized(value); 
```

`false`当属性包含已代理但尚未加载的集合或对象引用时产生。

# java - 异常和线程安全沙箱

> ID：12576504
> 
> 赞同：1
> 
> 时间：2012-09-25T05:10:35.327
> 
> 标签：java, exception-handling, thread-safety

我有一些插件类型类，我无法保证它们的线程安全和异常处理（假设将来由某个第三人编码）。主应用程序只通过“插件”接口知道这些，并不关心它们在内部做什么。除了由于这些插件类中的一些异常抛出或线程锁定，应用程序无法承受崩溃或冻结。插件类不依赖于主应用程序，只执行主应用程序的一些命令。只有另外两个交互是：

1.  当异步任务完成时，调用接口的方法（由主应用程序作为方法 arg 提供）。
2.  提供用于配置的 GUI。（主应用程序只是询问并从容器中添加/删除它，仅此`JPanel`而已。）

有什么好的方法可以实现这一目标？我正在考虑一个包装器，其中包含对实际插件方法的同步、try-catch 调用。可以在这里使用 AOP 拦截器吗？在 Java 中对类进行沙箱化的任何其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:53:34.943

事实证明你可以保护你的大部分进程，但是当你同意在你的 UI 线程上显示一个插件的 UI 时，它肯定会导致你的应用程序崩溃。

# android - 你如何改变eclipse空白活动？

> ID：12576508
> 
> 赞同：1
> 
> 时间：2012-09-25T05:11:09.710
> 
> 标签：android, eclipse, android-activity

我尝试搜索，但找不到答案。我想配置eclipse提供的blankActivity。它总是将 relativeLayout 作为默认值，我希望它是 LinearLayout。不得不一直改变它只是一种痛苦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T05:13:23.420

您可以使用最新的 ADT编写自己的[模板。](https://dl.dropbox.com/u/231329/android/templatedocs/index.html)有人已经创建了一些：[https ://github.com/jgilfelt/android-adt-templates](https://github.com/jgilfelt/android-adt-templates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:19:45.287

您可以通过更改 activity_simple.xml.ftl 文件来更改它。它应该在如下路径中

```
D:\android-sdk-windows\tools\templates\activities\BlankActivity\root\res\layout 
```

我没试过这个。但它值得一试。完成任何更改后还要重新启动 eclipse。

# javascript - 在同一页面中使用图表和小部件

> ID：12576512
> 
> 赞同：0
> 
> 时间：2012-09-25T05:11:35.090
> 
> 标签：javascript, charts, fusioncharts

我是融合图表的新手，我在同一页面中同时使用图表和小部件。我使用的是 Javascript 图表而不是 swf 文件。由于它们都具有相同的函数名称来生成图表，但其中包含不同的代码，因此我能够获得其中任何一个关于我使用的 js 文件的选择。

**代码：**

```
var myChart1 = new FusionCharts( "Thermometer", "ChId2", "130", "280", "0", "1" );
myChart1.setDataURL("xml/thermo.xml");
myChart1.render("thermo");

var chart = new FusionCharts("Line", "ChartId", "300", "300", "0", "1");
chart.setDataURL("xml/line.xml");      
chart.render("chartdiv"); 
```

我如何在同一页面中同时使用两者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:46:55.440

请确保您已将“FusionCharts.HC.js”、“jquery.min.js”、“ **FusionCharts.HC.Charts.js** ”和“ **FusionCharts.HC.Widgets.js** ”保存在与“FusionCharts.js”相同的文件夹中" 同时在同一页面中呈现 JavaScript 版本的图表和小部件。

您可以使用最新的 FusionCharts XT Service Release 4 包中的“FusionCharts.js”、“FusionCharts.HC.js”和“jquery.min.js”三个常用文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T08:28:19.153

从 XT 开始，FusionCharts 提出了一个统一的 JavaScript 框架来渲染 FusionCharts Suite XT 的 4 个核心包（FusionCharts XT、FusionWidgets XT、FusionMaps XT 和 PowerCharts XT）中的任何一个中的图表、仪表和地图。

这个统一的框架称为 FusionCharts JavaScript 类，JavaScript 模块基于包分布到各种文件中（有些是所有包通用的，有些是特定于包的），如下所述：

A. **FusionCharts XT**：

1.  `FusionCharts.js`
2.  `FusionCharts.HC.js`
3.  `FusionCharts.HC.Charts.js`
4.  `jquery.min.js`

B. **FusionWidgets XT**：

1.  `FusionCharts.js`
2.  `FusionCharts.HC.js`
3.  `FusionCharts.HC.Widgets.js`
4.  `jquery.min.js`

C. **PowerCharts XT**：

1.  `FusionCharts.js`
2.  `FusionCharts.HC.js`
3.  `FusionCharts.HC.PowerCharts.js`
4.  `jquery.min.js`

D. **FusionMaps XT**：

1.  `FusionCharts.js`
2.  `FusionCharts.HC.js`
3.  `FusionCharts.HC.Maps.js`
4.  `jquery.min.js`
5.  和单独的地图定义 JavaScript 文件，例如，对于世界地图，文件的名称是`FusionCharts.HC.world.js`

i) 正如您从上面的列表中发现的那样`FusionCharts.js`，`FusionCharts.HC.js`（和`jquery.min.js`）对于所有四个包都是通用的，您可以安全地使用四个包中的任何一个包中的这些文件。但是，FusionCharts 团队建议使用最新的`FusionCharts.js`和`FusionCharts.HC.js`.

ii) 要知道哪个是最新的，您可以从每个文件顶部的版本字符串跟踪内部版本号。通过内部版本号，我指的是版本字符串的最后一部分。例如，如果您有一个版本字符串，如`@version fusioncharts/3.2.4-release.8565`,**`8565`**是内部版本号。内部版本号越大，更新和最新的越多。

iii) 这 3 个文件对于渲染来自 4 个核心包中的任何一个的 JavaScript 图表/仪表/地图都是必不可少的。您需要将这些文件最好放在一个文件夹中。

iv) 需要包特定文件`FusionCharts.HC.Charts.js`来渲染 FusionCharts XT Pack 中存在的 JavaScript 图表（如 Column2D、Scatter、Pareto2D、Pie3D 等）。因此，如果你想渲染一个折线图（它是 FusionCharts XT 包的一部分），你需要把这个文件和上面提到的（在第 iii 点）文件一起放置。

v) 需要包特定文件`FusionCharts.HC.Widgets.js`来渲染 FusionWidgets XT Pack 中存在的 JavaScript 图表和仪表（如 SparkLine、温度计、HBullet、漏斗等）。因此，如果你想渲染一个温度计（它是 FusionWidgets XT 包的一部分），你需要把这个文件和上面提到的（在第 iii 点）文件一起放置。

vi) 需要包特定文件`FusionCharts.HC.PowerCharts.js`来呈现 PowerCharts XT Pack 中存在的 JavaScript 图表（如 Spline、DragColumn、LogMSColumn2D、DragNode、SelectScatter 等）。因此，如果要渲染样条图（PowerChats XT 包的一部分），则需要将此文件与上述（在第 iii 点中）文件一起放置。

vi) 需要包特定文件`FusionCharts.HC.Maps.js`来呈现 JavaScript 地图。如果您想渲染任何地图，您也需要将此文件与上述（在第 iii 点中）文件一起放置。此外，对于每张地图（如世界、美国、欧洲、德克萨斯等），都有一个单独的 JavaScript 文件，其中包含地图区域定义数据。您还需要将这些单独的地图定义文件（如`FusionCharts.HC.world.js`或`FusionCharts.HC.texas.js`）与上述（在第 iii 点中）文件一起放置。

* * *

因此，第一件事是根据要求正确放置文件。

现在，另一个重要的事情：

**您不需要通过`<script>`标签在 HTML 中加载所有这些 JavaScript 文件。**您只需`FusionCharts.js`在 HTML 中加载，其余文件将根据`FusionCharts.js`您要呈现的图表/地图类型自动/动态加载。

但是，我重申：**所有**JavaScript 文件都应实际存在于文件夹中，以便`FusionCharts.js`可以动态访问并加载它们。

* * *

完成这些步骤后，您可以使用相同的构造函数来呈现图表、仪表或地图。您现在需要注意的是您指定的图表/仪表/地图类型以及您是否为图表/仪表/地图提供了正确的数据。

# php - 使用用户名身份验证从 PHP 调用 wcf

> ID：12576515
> 
> 赞同：2
> 
> 时间：2012-09-25T05:11:39.190
> 
> 标签：php, wcf, web-services, web

我正在开发 WCF 项目。当自定义（用户名）身份验证关闭时，从 PHP 调用 WCF 服务可以正常工作，但是当我打开身份验证时，我似乎无法访问 WCF 服务。但我可以通过自定义身份验证从 .NET 项目访问 WCF 服务。它只是PHP。我正在使用 SSL。下面是我在 web.config 中的绑定设置

```
 <basicHttpBinding>
            <binding name="MypBinding" allowCookies="true">
              <security mode="TransportWithMessageCredential">
                <transport clientCredentialType="None"/>
              </security>
            </binding>
     </basicHttpBinding>

<serviceCredentials>
            <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="ApiService.UAuth, ApiService"/>
          </serviceCredentials> 
```

以下是我的示例 php 代码：

```
 <?php 
 header('Content-Type: text/plain');
    echo "start -> ";

    echo " set wsdl var11111 -> ";

    $soapclient = new SoapClient('https://api.address.com/Apii.svc?wsdl', array('login' => "username",'password' => "pwd",'default_socket_timeout' => 120, 'trace' => true));

    echo " created soapclient ->";
    echo $soapclient->GetData()->GetDataResult;
    echo " end ";

    print ' caught exception:'. $e->getMessage(). "\n";
    return;
?> 
```

任何建议将不胜感激！

# vb.net - 从 vb.net 将模式写入 excel 单元格

> ID：12576519
> 
> 赞同：0
> 
> 时间：2012-09-25T05:12:16.010
> 
> 标签：vb.net, excel, design-patterns, vba

我在 excel 中录制了一个宏，以向 excel 单元格添加模式。以下是我得到的，但是当我尝试在 VB.NET 中实现此代码时，它不接受它。我对 VB.NET 的理解 = 初级/中级

```
oSt2.Cells(20,i).Select()
oSt2.Cells(21,i).Select()
With Selection.Interior
 .Pattern = xlSolid
 .PatternColorIndex = xlAutomatic
 .ThemeColor = xlThemeColorAccent1
 .TintAndShade = 0.599963377788629
 .PatternTintAndShade = 0
End With 
```

我在这里错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:10:46.827

这些代码是 VBA，而不是 VB.NET，如果您想深入挖掘，这里有一些信息可以帮助您从 VBA 转换为 VB.net [http://msdn.microsoft.com/en-us/library/office/aa192490% 28v=office.11​​%29.aspx](http://msdn.microsoft.com/en-us/library/office/aa192490%28v=office.11%29.aspx)。

这并不难，相信我。VB.net 是一种很酷的语言。

# c# - 重构这个 Lambda 表达式

> ID：12576524
> 
> 赞同：3
> 
> 时间：2012-09-25T05:12:50.380
> 
> 标签：c#, lambda

我需要重构此代码，以便数据服务不会查询每个行项的两个工作类型。提前致谢。

```
 _attributeGroups = attributeGroups.Select(attributeGroupRowModel =>
            new AttributeGroupRowModel()
        {
            Name = attributeGroupRowModel.Name,               
            WorkType = workTypes.First(wt => wt.Id == attributeGroupRowModel.WorkTypeId).Description,
            IsExpired = workTypes.First(wt => wt.Id == attributeGroupRowModel.WorkTypeId).IsExpired, //todo: not efficient, to be refactored
        }).ToList(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T05:16:21.357

```
_attributeGroups = attributeGroups.Select(attributeGroupRowModel => 
{
    var wt = workTypes.First(x => x.Id == attributeGroupRowModel.WorkTypeId);
    return new AttributeGroupRowModel()
    {
        Name = attributeGroupRowModel.Name,               
        WorkType = wt.Description,
        IsExpired = wt.IsExpired,
    };
}).ToList(); 
```

或者如果您更喜欢 LINQ：

```
_attributeGroups = 
    (from attributeGroupRowModel in attributeGroups
     let wt = workTypes.First(x => x.Id == attributeGroupRowModel.WorkTypeId)
     select new AttributeGroupRowModel()
     {
         Name = attributeGroupRowModel.Name,               
         WorkType = wt.Description,
         IsExpired = wt.IsExpired,
     }).ToList(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T05:16:14.353

您可以使用[语句 lambda](http://msdn.microsoft.com/en-us/library/bb397687.aspx)而不是表达式 lambda。语句 lambda 允许您定义变量，除此之外：

```
_attributeGroups = attributeGroups.Select(attributeGroupRowModel => 
{
    var w = workTypes.First(wt => wt.Id == attributeGroupRowModel.WorkTypeId);
    return new AttributeGroupRowModel()
    {
        Name = attributeGroupRowModel.Name,               
        WorkType = w.Description,
        IsExpired = w.IsExpired,
    };
}).ToList(); 
```

# javascript - 使用 css 显示属性来控制不同级别的用户可以访问一个好主意吗？

> ID：12576525
> 
> 赞同：1
> 
> 时间：2012-09-25T05:12:54.170
> 
> 标签：javascript, css, security

我的网站要求用户登录，我希望允许某些用户访问比其他用户更多的信息。我使用 css display none 属性将选项卡菜单上的某些项目设置为不显示，具体取决于用户是谁。这样，他们就无法单击选项卡来显示信息。这是限制访问网站上某些材料的好方法吗？有没有更好的办法？我正在使用 javascript 和 php。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T05:17:39.863

这是一个糟糕的想法，原因有很多，其中一些原因是：

- 像我这样的任何用户都会经常查看您的页面源并点击。

-人们使用不显示样式表的浏览器或设置怎么样？

- 用户在 Facebook 等上发送或分享链接怎么样？他们可以直接进入该页面而无需登录或拥有这些权限？

- 网络爬虫是否对这些页面进行索引并将它们放入搜索结果中？

您需要在后端执行此操作并禁止用户，而不仅仅是隐藏内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T05:19:04.947

这不是一个好主意。您应该使用 PHP 或其他后端和会话变量和/或 cookie 来限制人们看到的内容。因为如果按照你刚才解释的方式去做，任何人都可以进入页面的源头，访问隐藏的内容。我的个人建议，如果不需要，请尽量不要通过用户注册重新发明轮子。大多数现代内容管理系统将满足您的大部分需求。

**编辑：**

看看这些内容管理系统：

*   [PyroCMS](http://pyrocms.com)
*   [德鲁巴](http://drupal.org)
*   [Joomla](http://joomla.org)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T05:24:42.450

简短的回答：不，这不是一个好主意。为什么？：任何了解浏览器开发工具的用户都可以在他们知道信息的情况下使信息可见，或者开始四处窥探。一旦他们意识到开发人员犯了一个错误，他们就会很高兴看到您试图隐藏的所有内容......再加上您跨行发送不必要的数据会减慢您的页面加载速度，并耗尽带宽等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T05:20:36.237

通过 CSS 隐藏这些信息是一个糟糕的想法，更好的解决方案是使用 javascript，最好的解决方案是在后端使用 php。

# android - Android：如何将十字图标放在自动完成 textView 的顶部

> ID：12576529
> 
> 赞同：7
> 
> 时间：2012-09-25T05:13:20.907
> 
> 标签：android, android-linearlayout, android-xml

我在将十字按钮放在文本视图顶部时遇到问题。我正在使用 LinearLayout 并没有出现，而在 Framelayout 上它可以工作，但这并不能解决我的目的。我附上我的 XML 以供参考，请帮助我克服这个问题。

```
<LinearLayout
        android:id="@+id/top"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/phone_toolbar"
        android:baselineAligned="true"
        android:gravity="center_horizontal"
        android:paddingBottom="2dp"
        android:paddingTop="2dp" >

        <ImageView
            android:id="@+id/search_icon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="10dp"
            android:background="@drawable/toolbar_search_icon_phone" >
        </ImageView>

        <AutoCompleteTextView
            android:id="@+id/text"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginRight="10dp"
            android:layout_weight="2"
            android:background="@drawable/toolbar_phone_textfield"
            android:dropDownVerticalOffset="5dp"
            android:ems="10"
            android:focusable="true"
            android:hint="@string/hint"
            android:imeOptions="actionSearch"
            android:paddingLeft="10dp"
            android:paddingRight="20dp"
            android:singleLine="true"
            android:textColor="#000000"
            android:textSize="14sp" />

        <Button
            android:id="@+id/clear_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right|center_vertical"
            android:layout_marginRight="10dip"
            android:background="@drawable/text_clear" />
    </LinearLayout> 
```

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-25T05:32:28.477

使用 EditText 上的 android:drawableLeft 属性。

```
<EditText
 ...     
android:drawableLeft="@drawable/my_icon" /> 
```

如果要动态添加图标，请使用：

```
EditText et = (EditText) findViewById(R.id.myET);
et.setCompoundDrawablesWithIntrinsicBounds(R.drawable.my_icon, 0, 0, 0); 
```

处理点击事件：

```
String value = "";//any text you are pre-filling in the EditText

final EditText et = new EditText(this);
et.setText(value);
final Drawable x = getResources().getDrawable(R.drawable.presence_offline);//your x image, this one from standard android images looks pretty good actually
x.setBounds(0, 0, x.getIntrinsicWidth(), x.getIntrinsicHeight());
et.setCompoundDrawables(null, null, value.equals("") ? null : x, null);
et.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (et.getCompoundDrawables()[2] == null) {
            return false;
        }
        if (event.getAction() != MotionEvent.ACTION_UP) {
            return false;
        }
        if (event.getX() > et.getWidth() - et.getPaddingRight() - x.getIntrinsicWidth()) {
            et.setText("");
            et.setCompoundDrawables(null, null, null, null);
        }
        return false;
    }
});
et.addTextChangedListener(new TextWatcher() {
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        et.setCompoundDrawables(null, null, et.getText().toString().equals("") ? null : x, null);
    }

    @Override
    public void afterTextChanged(Editable arg0) {
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }
}); 
```

这也可以使用自定义 EditText 来完成：

[处理 EditText 中可绘制对象的点击事件](https://stackoverflow.com/questions/3554377/handling-click-events-on-a-drawable-within-an-edittext)

# mysql - 无法在 joomla 2.5 中声明外键

> ID：12576534
> 
> 赞同：0
> 
> 时间：2012-09-25T05:13:39.567
> 
> 标签：mysql, joomla, joomla2.5

```
CREATE TABLE IF NOT EXISTS `#__web_projects` 
(
`id` int(11) NOT NULL AUTO_INCREMENT,
`type_website` varchar(30) COLLATE utf8_polish_ci NOT NULL,
`web_color` varchar(255) COLLATE utf8_polish_ci NOT NULL,
`web_fonts` varchar(255) COLLATE utf8_polish_ci NOT NULL,
`web_layout` text COLLATE utf8_polish_ci NOT NULL,
`web_menu` text COLLATE utf8_polish_ci NOT NULL,
`similar_web_sites` text COLLATE utf8_polish_ci NOT NULL,
`additional_info` text COLLATE utf8_polish_ci,
`about_company` text COLLATE utf8_polish_ci,
`offer` text COLLATE utf8_polish_ci,
`logo` varchar(255) COLLATE utf8_polish_ci NOT NULL,
`user_id` int(11) NOT NULL,
PRIMARY KEY(id),
FOREIGN KEY (`user_id`) REFERENCES `#__users`(id) ON DELETE CASCADE) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci 
```

这是我在 joomla 中的表声明，我总是收到无法创建该表的错误。是什么原因造成的？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:03:20.570

**我想提一下，你应该让你的 user_id UNSIGNED！**

我已经在 J​​oomla 中测试了你的 SQL！2.5，它完美无瑕（我认为你的 MySQL 引擎是 InnoDB）。如果没有 SQL 错误，恐怕没有人可以帮助您。

# java - 开源文档管理系统

> ID：12576535
> 
> 赞同：7
> 
> 时间：2012-09-25T05:13:46.743
> 
> 标签：java, open-source, document-management, dms

我已经评估了几个开源文档管理系统，似乎这些都是过去的，例如[opendocman](http://www.opendocman.com/)，[quotero](http://www.quotero.com/)

我正在寻找一个为我提供以下功能的开源文档管理系统。

*   应该将数据保存在同一台机器上，因为我正在寻找更多的内部用途。
*   也应该允许上传 Zip 文件。如果它提取 Zip 这将是一个很棒的 +
*   应该允许向预配置的电子邮件地址发送电子邮件
*   应该允许一次上传大小约为 100MB 的数据
*   应该维护文件的历史记录也删除文件
*   应该允许基于角色的文档访问。
*   **应该是免费的:)**
*   它不应该对数据进行任何欺骗。文件是机密的。
*   应该支持 32 位 Linux 版本。[Alfresco：仅限 64 位]

请让我知道您是否有使用任何人的经验以及我是否可以使用它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T05:23:28.303

你有考虑过使用**[Alfresco](http://www.alfresco.com/)**吗？

*   它是开源文档管理系统，即使您可以在云中使用它。
*   它可以提供 10GB 用于在云中使用。
*   它也应该允许上传 Zip 文件。
*   它应该允许向预配置的电子邮件地址发送电子邮件。
*   但我不确定是否维护历史删除的文档，但它会维护文档历史。
*   还具有角色基础文档访问权限。
*   **免费**使用露天软件。

# css - Microsoft 过滤器的 sizingMethod='scale' - 它只能水平缩放图像吗？

> ID：12576536
> 
> 赞同：1
> 
> 时间：2012-09-25T05:13:48.710
> 
> 标签：css, internet-explorer-8

我试图通过使用 CSS3 属性连续应用阴影背景，`background-size`它在现代浏览器中以例外方式工作，接受**下面的 IE8**。

然后我得到了这篇文章中提到的**IE解决方案**[（**让背景大小在 IE 中工作？**）](https://stackoverflow.com/questions/2991623/make-background-size-work-in-ie)

上面的解决方案也适用于**下面的 IE8**，但它会按比例缩放图像（水平和垂直）。

**但是我只需要水平缩放它，就像我使用下面提到的 CSS3 属性实现的那样：**

```
background-size: 100% 25%;

/*
    100% for horizontally
    25% for vertically
*/ 
```

**我的问题：**是否只有水平或垂直缩放图像的任何值`sizingMethod`（或任何其他解决方法**^([^ jQuery/Javascript ^])**）以获得所需的结果，因为我使用`background-size`现代浏览器的 CSS3 属性获得了所需的结果？

这是我使用过的代码：

**CSS：**

```
 .row-shad {
     background:url(../images/cat-bot-shad.png) center bottom no-repeat;

    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
    src='http://full-path-to-images/images/cat-bot-shad.png',
    sizingMethod='scale'); /*For IE 8 and less*/

    background-size: 100% 25%; /* for good browsers*/
} 
```

---**这是[*实时结果*](https://i.imgur.com/kxdOC.png)，在良好的浏览器和 IE8 中，看看区别。**---

真的应该感谢这方面的任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T13:06:01.327

## 方法一：固定背景色

如果您的背景始终具有相同的颜色，您可以使用这样的图像替换：

![示例 1](../Images/3306829064f6fc6924838ea7894243ae.png)

当它被缩放时，比例将得到尊重。

**[演示](http://jsfiddle.net/gionaf/86ehG/)**（经过测试并使用 IE8）

* * *

## 方法二：透明背景

如果您需要透明背景（使用上述方法），则必须添加多个过滤器来解决 IE 的 PNG 透明度问题：

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
    src='http://full-path-to-images/images/cat-bot-shad-ie.png',
    sizingMethod='scale')
    alpha(opacity = 100); /*For IE 8 and less */ 
```

以及覆盖原始`background`声明的条件注释样式：

```
<!--[if lt IE 9 ]> 
<style>
.row-shad { background:none; }
</style>
<![endif]--> 
```

**[演示](http://jsfiddle.net/gionaf/WqJRs/)**（经过测试并使用 IE8）

顺便说一句，如果您在[标签中使用](http://kaioa.com/node/107)[条件注释`<html>`](http://kaioa.com/node/107)，您可以通过这种方式轻松定位 IE8 及以下：

HTML标签：

```
<!--[if lt IE 9]> <html class="ielt9"> <![endif]-->
<!--[if !IE]>--> <html> <!--<![endif]--> 
```

CSS：

```
.ielt9 .row-shad { background:none; } 
```

* * *

## IE7 问题

您的方法不适用于 IE7。

您可以通过为 IE7 添加 CSS hack 和自定义背景图像（全球不到 2% 的用户）以优雅的退化方式来处理它：

```
*background:url(../images/cat-bot-shad-ie7.png) center bottom repeat-x; 
```

`*property`仅针对 IE7 及以下版本。或者，您可以使用有条件的注释轻松地做到这一点。

**[演示](http://jsfiddle.net/gionaf/6UefS/)**（测试并使用 IE7-8）

* * *

## 将方法 2 和 IE7 hack 放在一起

最终，要同时使用 IE8 的透明 png 和 IE7 的自定义图像，您必须使用多个条件注释：

```
<!--[if IE 8 ]> 
<style>
#row { background:none; }
</style>
<![endif]-->
<!--[if lt IE 8 ]> 
<style>
#row { background:url(../images/cat-bot-shad-ie7.png) center bottom no-repeat; }
</style>
<![endif]--> 
```

**[演示](http://jsfiddle.net/gionaf/ULsmT/)**（在 IE7-8 上测试和工作）

或者，条件 html 标记：

```
<!--[if lt IE 8]> <html class="ielt8"> <![endif]-->
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if !IE]>--> <html> <!--<![endif]--> 
```

CSS：

```
.ie8 .row-shad { background:none; }
.ielt8 .row-shad { background:url(../images/cat-bot-shad-ie7.png) center bottom no-repeat; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:40:14.403

不幸的是，没有办法使 IE 8 及以下的缩放比例不同于 100%/100%。这意味着您需要以其他方式执行此操作。

一种方法是使图像适合元素。

由于您的元素是元素高度的 25%，因此将图像提高 4 倍并用透明或背景色填充空白空间，然后将缩放高度更改为，`100%`而不是`25%`使用 CSS3 属性的浏览器。

```
background-size: 100%; 
```

由于您使用的是运行长度编码的 PNG，因此这将为图像添加极少量的数据，并且可以在所有浏览器中正常工作。

唯一的另一种方法是添加一个高度为 25% 的虚拟元素，并将其显示在元素的正常内容后面，这是非语义的，应尽可能避免。

# c# - 在 nHibernate 中映射复杂连接

> ID：12576538
> 
> 赞同：1
> 
> 时间：2012-09-25T05:13:53.453
> 
> 标签：c#, .net, nhibernate, nhibernate-mapping

我在我的最新项目中使用了 nHibernate，并成功映射了所有基本关系，其中值存在于我正在使用的主表中或通过像复合这样的简单关系。

我遇到困难的地方是如何映射复杂的连接？

例如，我有一个名为`Contact`each的实体`contact`，它具有您常用的属性，例如 Name、DOB、Phone.... 但我还需要它有一个名为的属性`AccreditationList`，即`List<Accreditation>`.

以下是 Contact XML 声明的示例。

```
<class name="Contact" table="Contact" lazy="true">

    <id name="ID" column="ContactID" type="guid">
      <generator class="guid" />
    </id>

    <property name="FirstName">
      <column name="FirstName" sql-type="nvarchar(500)" not-null="true" />
    </property>

    <property name="LastName">
      <column name="LastName" sql-type="nvarchar(500)" not-null="true" />
    </property>

    <bag name="AccreditationList" lazy="true">    
        //How do I express the relationship here? 
    </bag>

</class> 
```

`List<Accreditation>`只能通过这样的一系列连接来确定。

```
SELECT Accreditation.* FROM CourseEnrolment 
INNER JOIN Course ON Course.CourseID = CourseEnrolment.CourseID
INNER JOIN CourseType ON CourseType.CourseTypeID = Course.CourseTypeID
INNER JOIN Accreditation ON Accreditation.AccreditationID = CourseType.AccreditationID
WHERE CourseEnrolment.ContactID = :ContactID 
```

是通过 nHibernate 在代码中手动调用 SQL 来完成此操作的唯一方法，`CreateSQLQuery`或者我可以使用命名查询之类的东西来表达这种关系吗？什么是正确的方法？任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:37:22.233

我看到了几个选项：

1.  您可以使用`SqlSelect`, `SqlUpdate`etc.. 来指定用于选择/更新等的任意 SQL 语句。（[按代码映射](http://notherdev.blogspot.co.il/2012/01/mapping-by-code-set-and-bag.html)示例；我确定有一个 XML 等效项）

2.  您可以将您的 SQL 查询映射到一个`QueryOver`查询，并使用它来初始化您的`Accreditation`集合。类似于以下内容：

    `public Contact GetContact(int id) { var contact = _session.Get(id); contact.AccreditationList = _session.QueryOver<Accreditation>() /* your query here */; return contact; }`
    然而！！这种方法有几个缺点——

    *   如果您不使用该`GetContact`方法，您的集合将无法正确填充。
    *   它不支持查询联系人很容易（首先您必须查询联系人，然后您必须初始化每个联系人的认证列表）。
3.  您可以将中间实体 ( `Course`) 映射到您的`Contact`实体（如果您不想公开它们，您可以将其作为私有成员），然后您的`AccreditationList`财产将是

`public IEnumerable<Accreditaion> AccreditationList { get { return _courses.SelectMany(course => course.Accreditations); } }` 但是，您将无法直接操作`Contact`'s `AccreditationList`。

最好的解决方案是`QueryOverSelect`在映射中有类似的选项，但 AFAIK 没有......
我个人会选择第 3 个选项，因为它对我来说似乎是最干净的。

# c++ - QUrl toPercentEncoding() 小写十六进制

> ID：12576545
> 
> 赞同：3
> 
> 时间：2012-09-25T05:14:51.357
> 
> 标签：c++, qt, encoding, url-encoding, qstring

我有一个字符串成为 url 的查询字符串部分，并且必须进行 url 编码。

```
QString queryStringParam = "J1mOEfg/TC"; 
```

所以，我尝试像这样使用[QUrl::toPercentEncoding()](http://doc.qt.digia.com/qt-maemo/qurl.html#toPercentEncoding)

```
QString encodedQueryString = QUrl::toPercentEncoding(queryStringParam); 
```

这导致`"J1mOEfg%2FT"`但我正在调用的 web 服务期望`"J1mOEfg%2fT"`[注意在 '/' 到 '%20f' 的编码中的小写 'f'] 并因此拒绝该参数。服务方面可能很糟糕，但我对此无能为力。如何在保持参数其余部分的大小写的同时获得小写编码十六进制字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:36:06.257

我不认为你可以用标准函数来做到这一点，但你可以很容易地编写自己的。在百分比编码的字符串中，特殊字符用一个`%`符号编码，后跟一对十六进制数字。知道了这一点，您可以编写如下函数：

```
QString lowerPercentEncoding( QString str )
{
    int index = str.indexOf("%");
    while( index != -1 )
    {
        QString tmp = str.mid(index, 3);
        str.replace(index,3,tmp.toLower());
        index = str.indexOf("%", index + 1);
    }
    return str;
} 
```

# java - 无论如何要加快打印速度？

> ID：12576552
> 
> 赞同：4
> 
> 时间：2012-09-25T05:15:19.343
> 
> 标签：java, printwriter

我有超过 20 个 5000x30 双数组，每个数组都将使用以下命令写入文本文件：

```
PrintWriter test = new PrintWriter(new BufferedWriter(new FileWriter("test.txt"))); 
```

处理过程花了我 10 多分钟，我想看看是否有其他方法可以加快处理速度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T05:17:31.157

不要在大量缓冲区上处理所有内容，而是在绝对必要之前避免刷新缓冲区。

实际上，这意味着不要使用`println printf flush format`或任何其他会刷新缓冲区的方法。通过避免这种情况，您可以延迟并结合消耗运行时间的昂贵系统调用。

或者，在 PrintWriter 的构造函数中将 autoFlush 设置为 false。查看[此](https://stackoverflow.com/questions/5492405/printwriter-autoflush-puzzling-logic?rq=1)问题以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:08:26.960

我建议为此使用[java nio](http://tutorials.jenkov.com/java-nio/nio-vs-io.html)。它们本质上比传统的 java io 更快。请参考这些（[1、2](http://www.java2s.com/Code/Java/File-Input-Output/UseNewJavaIOtowritestringintoafile.htm) [）](http://tutorials.jenkov.com/java-nio/file-channel.html)示例开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:35:06.733

将 PrintWriter 的 autoFlush 变量设置为 false。

```
PrintWriter test = new PrintWriter(new BufferedWriter(
                                   new FileWriter("test.txt")), **false**); 
```

完成整个写入（ println ）后，调用 test.flush()

这样可以避免中间冲洗时间。

# arrays - 数组搜索的伪代码

> ID：12576557
> 
> 赞同：3
> 
> 时间：2012-09-25T05:16:11.013
> 
> 标签：arrays, algorithm, pseudocode

问题：

“编写一个算法，给定一个数组 A 和一个整数值 k，如果 A 中有两个不同的整数之和为 k，它返回值 true，否则返回 false。”

我的伪代码：

输入：大小为 n 且值为 k 的数组 A

输出：如果 A 中的两个不同整数等于 k，则为 true，否则为 false

```
Algorithm ArraySum(A, n, k)
for (i=0, i<n, i++)
    for (j=i+1, j<n, j++)
        if (A[i]+A[j]=k)
            return true
return false 
```

我是否正确编写了此算法？有没有我没有看到的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:29:41.717

关于这个问题，我有两种解决方案

**第一个解决方案**

1.制作一个空哈希
2.在哈希中标记数组中的所有数字

```
 for each i (Array A){
        hash[i] = 1;
    } 
```

3.只需运行一个`O(n)`循环

```
for each i (Array A)
    if(  hash[ k - i ] ) 
        print "solution i and k-i" 
```

这会给你带来`O(n)`复杂性

**第二种解决方案**

1.排序数组
2.在排序后的数组上运行一个`O(n)`循环

```
for each i (Array A)
    binary_search( Array, k - i); [log n operation] 
```

这会给你带来`O(n logn)`复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:19:19.550

这看起来像是[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)的一些案例。

对于您的情况（只有两个数字），对数组进行排序以减少比较次数（A[i]+A[j]=k）可能会更好。

例如：

```
you have sorted array [1 3 5 8 10 12 14 20 50 60 100]
sum of two numbers must be equal to 30 
```

然后你可以写

```
 while(a[i] <= 30) {
   while(a[i] + a[j] <= 30) {
    // ...
    i++;
    j++;
   } 
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T05:20:13.803

如果两个不同的整数表示`A[i], A[j]`where`i != j`而不是`A[i] != A[j]`，则您的伪代码是正确的。

# javascript - 使用 url 加载 div 时避免 css 重叠

> ID：12576560
> 
> 赞同：0
> 
> 时间：2012-09-25T05:16:30.520
> 
> 标签：javascript, jquery, css, drag-and-drop, loading

我在 div 中加载 url，因为 div 加载了 url，它包含 css 文件，这会干扰我的父页面布局。我想将 css 限制为仅加载 div，因此它可能不会干扰页面上的其他内容。我不想使用 iframe，因为 jquery 有一些拖放功能，并且它不支持将元素从父页面拖动到 iframe 的好方法。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:02:54.803

假设您正在使用`load`类似于以下内容的 jQuery 函数：

```
$('#mydiv').load(myUrl); 
```

您可以通过将选择器附加到 url 来从加载的页面中仅选择您感兴趣的 HTML（请参阅[加载页面片段](http://api.jquery.com/load/#loading-page-fragments)的 jQuery 文档）：

```
$('#mydiv').load(myUrl + ' #content'); 
```

如果您需要使用自己的 CSS 呈现 url 处的完整页面，那么从您自己的页面进行沙盒处理的唯一可靠方法是使用 iframe。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T05:48:19.050

给你父母的元素一个特定的类/id名称，并在你的css中使用该类/id名称作为特定的选择器

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T06:29:03.353

在该 css 文件中仅添加 div 特定 css 代码。

# android - 仅删除已删除警报的警报管理器警报

> ID：12576563
> 
> 赞同：1
> 
> 时间：2012-09-25T05:17:16.090
> 
> 标签：android, android-alarms

我的应用程序将同时设置多个警报。不幸的是，每个警报都是使用相同的 PendingIntent 对象设置的。这是我用来设置闹钟的代码：

```
//Use AlarmManager to trigger the notification/alarm.
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

//PendingIntent to launch activity when the alarm triggers.                    
Intent i = new Intent("com.testapp.DisplayNotification");

//Assign the reminder's primary key as the notification ID.
i.putExtra("Reminder_Name", editRemindMeTo.getText().toString());
i.putExtra("Reminder_Primary_Key", reminderPrimaryKey);

PendingIntent displayIntent = PendingIntent.getActivity(
getBaseContext(), 0, i, 0);               

//Set the alarm to trigger.
alarmManager.set(AlarmManager.RTC_WAKEUP, 
c.getTimeInMillis(), displayIntent); 
```

我知道我可以使用以下代码删除警报：

```
AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE); 

Intent i = new Intent(context, MyPendingIntentService.class);
PendingIntent displayIntent = PendingIntent.getService(context, 0, i, 0);

alarmManager.cancel(displyIntent); 
```

但是，使用此代码将删除我的所有警报（如果我在这里错了，请纠正我）。有没有办法只删除*用户*从数据库中删除的警报？在用户删除我的应用程序数据库中的警报条目后，应立即从我的应用程序中删除警报。我猜想使用不同的 PendingIntent 名称将是可行的方法，但我不知道如何为用户创建的每个新警报执行此操作。关于如何做到这一点的想法？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T05:33:09.517

看到我以前在这里遇到的同样的问题......所以解决方案是将唯一的待处理意图传递给警报服务......所以我在这里是如何完成的

> PendingIntent pIntent = PendingIntent.getBroadcast(context, **(int) alarm_id** , intent, PendingIntent.FLAG_CANCEL_CURRENT);

在未决意图中，我已将唯一请求 ID 传递给未决意图。取消闹钟时您必须记住这一点。因此，在我的情况下，我为生成唯一 ID 所做的工作是将其放入数据库中，我已检索表行的 ID 并传递给待处理的 Intent。
因此，如果您想取消特定警报，则必须使用相同的表条目记住待处理意图的相同请求 ID...

我相信它会工作..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T05:23:58.083

`requestCode`注册每个警报时使用不同的。这是 的第二个参数`PendingIntent.getActivity/Service()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T05:26:16.363

在 Android 文档中，cancel() 将取消所有具有相同 pendingIntent 的警报。所以唯一的出路是创建不同的pendingIntents。或者您也可以求助于安排重复警报，这样您就可以使用相同的pendingIntents。

# iphone - 有什么方法可以让 iPhone 4S 中的 wifi 永远不会休眠。那是我可以通过编码做的事情吗？

> ID：12576572
> 
> 赞同：0
> 
> 时间：2012-09-25T05:18:22.807
> 
> 标签：iphone, objective-c, ios, xcode

我的应用程序在后台持续运行，每 10 分钟发送一次用户位置。我正在 iPhone 4S 中测试我的应用程序。应用程序在后台运行良好，但问题是一段时间后我的 wifi 进入睡眠状态，应用程序开始通过 sim 网络发送用户位置。

有什么方法可以让 iPhone 4S 中的 wifi 永远不会休眠。那是我可以通过编码做的事情吗？

# javascript - Dust.js 模板渲染与 Backbone.LayoutManager

> ID：12576573
> 
> 赞同：4
> 
> 时间：2012-09-25T05:18:23.367
> 
> 标签：javascript, backbone.js, coffeescript

让我详细说明一下我的设置：我已经预编译了我想与 Backbone.LayoutManager 一起使用的dust.js 模板。

Backbone.LayoutManager 使用以下配置：

```
Backbone.LayoutManager.configure
  manage: true
  fetch: (name) ->
    name 
```

所以模板的名称通过 fetch 直接传递给渲染，我想像这样覆盖渲染：

```
render: (template, context) ->
  done = @async
  dust.render @template, context, (err, out) ->
    throw err if err
    done(out) 
```

但是我不能用渲染来做到这一点（大概是因为 LayoutManager 作者假设模板渲染是同步的）。

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T19:07:30.473

您需要修改 LayoutManger 以处理模板的异步呈现。

执行此操作的方法之一是使用 jQuery Deferred 对象，其中调用`render`返回对象的实例，然后您在对库`Deferred`的调用中解析该实例。`Dust`

然后，修改 Backbone.LayoutManager 以不继续使用模板做它想做的事情，直到该 Deferred 对象被解析。

在`render`：

```
render: (template, context) ->
    dfd = $.Deferred()

    dust.render @template, context, (err, out) ->
        throw err if err
        done(out)
        dfd.resolve()

    return dfd; 
```

然后，您采用 Backbone.LayoutManager 中调用渲染的方法，而不是对渲染的返回做某事，而是将该“某事”附加到`done`您传回的延迟的处理程序。

```
 dfd = render(template, context)
    dfd.done(do_something_with_this_template); 
```

我正在使用 Marionette.js（以及它的异步变体）和灰尘，这就是我的核心`render`方法的样子：

```
 render: function(){
        var dfd = $.Deferred();

        var template_context = this.model;
        if(_.isUndefined(template_context) || _.isFunction(template_context)){
            template_context = new (Backbone.Model.extend({}));
        }

        if(this.id) this.$el.attr('id', this.id);

        var that = this;
        dust.stream(this.tpl_name, template_context.toJSON())
            .on('data', function(data){
                that.$el.html(data);
            })
            .on('end', function(){
                dfd.resolve();
                that.enable_menus();
                that.trigger('template:rendered');
            })
            .on('error', function(err){
                dfd.reject();
                window.le(err.message, err);
                that.trigger('template:error');
            });

        return dfd;
    } 
```

（显然也不使用咖啡脚本......）

# git - Git Flow：如何保持主日志干净？

> ID：12576579
> 
> 赞同：3
> 
> 时间：2012-09-25T05:19:42.813
> 
> 标签：git, git-flow

我已经开始使用 git flow 并喜欢它，原因有很多。但是，我们的主要目标之一是保持主分支日志非常干净。我们只想在 master 分支中查看每个发布的日志（这意味着当我们完成发布时，提交日志应该在 master 中）。

请查看master 分支`git log`的输出`git log master`

> ```
> Merge branch 'release/r1'
> 
> release bug fixed
> 
> feature 3 done
> 
> feature 2 done
> 
> feature 1 done
> 
> Initial commit ~ 
> ```

我们希望在这里看到的是：'initial commit' 和 'merge branch release/r1'。我们不想看到在功能或发布分支中完成的提交日志。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:42:20.217

最简单的方法是添加一个框架，允许您在提交上插入所有类型的控件，以便您在主分支上完成所述提交时强制执行策略。

如果你有一个“祝福”的 repo，你可以在该 repo 的服务器上添加**[gitolite](https://github.com/sitaramc/gitolite)** [，并添加VREFs](http://sitaramc.github.com/gitolite/vref.html)：每次推送都会触发的小钩子。

# python - NotImplementedError('%s' % settings.DATABASE_ENGINE 不存在地理后端)

> ID：12576584
> 
> 赞同：0
> 
> 时间：2012-09-25T05:19:59.207
> 
> 标签：python, django

我正在尝试复制已经在我的本地计算机上在线运行（由其他人开发）但面临以下困难的网站的设置

```
File "/usr/lib/pymodules/python2.6/django/contrib/gis/db/backend/__init__.py", line 20, in <module>
    raise NotImplementedError('No Geographic Backend exists for %s' % settings.DATABASE_ENGINE)
NotImplementedError: No Geographic Backend exists for dummy 
```

我试图安装 Geos 库，但我仍然面临这个问题。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:28:43.227

您需要定义一个支持 GIS 的数据库后端。我的建议是阅读[GIS 教程](https://docs.djangoproject.com/en/1.4/ref/contrib/gis/tutorial/)以加快速度。

# c - 二维数组的指针

> ID：12576591
> 
> 赞同：-1
> 
> 时间：2012-09-25T05:20:40.190
> 
> 标签：c, pointers

这是微软测试的一个问题：

```
 main()
    {
        int a[2][3]= { (1,2,3),(4,5,6)};
        int (*ptr)[3] = &a[0];
        printf("%d %d\n", (*ptr)[1],(*ptr)[2]);
        ptr+=1;
        printf("%d %d\n", (*ptr)[1],(*ptr)[2]);

    } 
```

给出的选项是：

1.  分段故障
2.  编译器错误
3.  总线错误
4.  运行时错误

我运行了这段代码，但没有得到任何结果。我得到以下答案：

```
6 0   
0 0 
```

你能帮我理解发生了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T05:27:28.983

主要问题是这一行：

```
 int a[2][3]= { (1,2,3),(4,5,6)}; 
```

它使用括号而不是大括号。(1,2,3) 的结果是 3，而 (4,5,6) 的结果是 6。所以这相当于：

```
 int a[2][3]= { 3,6 }; 
```

这又相当于

```
 int a[2][3] = { {3,6,0}, {0,0,0} }; 
```

此行使 ptr 指向 a[0]：

```
 int (*ptr)[3] = &a[0]; 
```

这条线

```
 printf("%d %d\n", (*ptr)[1],(*ptr)[2]); 
```

那么等价于

```
 printf("%d %d\n", (*&a[0])[1],(*&a[0])[2]); 
```

可以简化为

```
 printf("%d %d\n", (a[0])[1],(a[0])[2]); 
```

要不就

```
 printf("%d %d\n", a[0][1],a[0][2]); 
```

这条线

```
 ptr+=1; 
```

使 ptr 指向 a 的下一个元素，所以它等价于

```
 ptr=&a[1]; 
```

所以下一行简化为

```
 printf("%d %d\n", a[1][1],a[1][2]); 
```

该程序有效地打印 a[0][1]、a[0][2]、a[1][1] 和 a[1][2]，这就是为什么你得到 6,0,0,0。

Charles Baley 指出 main() 缺少返回类型。这可能就是他们的目的。编译器通常至少会对此发出警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T05:38:09.100

你确定你复制的文字正确吗？

`(1,2,3)`是具有两个序列或逗号 ( `,`) 运算符的表达式；它的值为 3。同样， 的值为`(4,5,6)`6。这是正在打印的 6 `a[0][1]`（因为 ptr 指向`a[0]`并且您打印`(*ptr)[1]`）；0 是`a[0][2]`，它的默认初始化为 0。然后你递增`ptr`，将它指向`a[1]`，所以你打印`a[1][1]`and `a[1][2]`，它的默认初始化也为 0。

# jquery - IE7 是否支持 HTML5 数据标签？

> ID：12576592
> 
> 赞同：3
> 
> 时间：2012-09-25T05:20:49.603
> 
> 标签：jquery, html, internet-explorer, internet-explorer-7

我愿意使用如下数据标签。

```
<div data-color="#1337c"></div> 
```

我使用 jquery 来**获取**（`$("div").data("color");`）和**存储**`($("div").data("color", "red");`）以及操作数据。

*   IE7 会支持上面的标签吗？
*   HTML5 的浏览器要求是什么？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T05:31:16.837

回答*真正的问题*：**`jQuery.data`在 IE7 .. 和 IE6 中按预期工作。**（不需要 HTML5 或官方“数据属性”支持。）

IE7 很乐意保留HTML 中提供的*任何*属性，并在 DOM 中公开它。`data-foo`它是否被称为或无关紧要`foo-data`。我相信这在技术上违反了 HTML4 规范，但这是我所知道的*每个主要浏览器的行为。*

但是，请注意这一点`data("foo")`并`attr("data-foo")`具有不同的语义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T12:36:09.000

据我了解，数据属性实际上并不是 HTML5 特性，而是它们的使用在 HTML5 中变得标准化。IE 5.5（据我记忆）实际上是第一个支持伪属性的浏览器，但不要引用我的话：v

# javascript - 如何使用闭包创建 javascript 库

> ID：12576594
> 
> 赞同：3
> 
> 时间：2012-09-25T05:20:58.060
> 
> 标签：javascript, oop, closures

我已经编写了一些 javascript，我将它们封装在一个闭包中，以便我可以在其他地方使用它。我想这样做类似于 jQuery 所做的那样。我希望能够将一个 id 传递给我的闭包并在其上调用一些函数，同时设置一些选项。与此类似：

```
<script type="text/javascript">
    _snr("#canvas").draw({
        imageSrc : someImage.png
    });
</script> 
```

我已经阅读了很多关于如何使用闭包来做到这一点的不同帖子，但仍在为这个概念而苦苦挣扎。这是我离开的地方：

```
_snr = {};
(function (_snr) {

    function merge(root){
        for ( var i = 1; i < arguments.length; i++ )
            for ( var key in arguments[i] )
                root[key] = arguments[i][key];
        return root;
    }

    _snr.draw = function (options) {

        var defaults = {
            canvasId : 'canvas',
            imageSrc : 'images/someimage.png'
        }

        var options = merge(defaults, options)

        return this.each(function() {
            //More functions here
        });
    };

    _snr.erase = function () {};

})(_snr); 
```

当我尝试像上面的第一个代码部分那样调用绘图函数时，我收到以下错误，“_snr 不是函数”。我在哪里错了？

**编辑** 这是我最终做的：

```
function _snr(id) {

    // About object is returned if there is no 'id' parameter
    var about = {
        Version: 0.2,
        Author: "ferics2",
        Created: "Summer 2011",
        Updated: "3 September 2012"
    };

    if (id) {

        if (window === this) {
            return new _snr(id);
        }

        this.e = document.getElementById(id);
        return this;
    } else {
        // No 'id' parameter was given, return the 'about' object
        return about;
    }
};

_snr.prototype = (function(){

    var merge = function(root) {
        for ( var i = 1; i < arguments.length; i++) {
            for ( var key in arguments[i] ) {
                root[key] = arguments[i][key];
            }
        }
        return root;
    };

    return {
        draw: function(options) {

            var defaults = {
                canvasId : 'canvas',
                imageSrc : 'images/someimage.png'
            };

            options = merge(defaults, options);

            return this;
        },

        erase: function() {
            return this;
        }
    };
})(); 
```

我现在可以打电话：

```
<script type="text/javascript">
    _snr("#canvas").draw({
        imageSrc : someImage.png
    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T05:29:00.637

因为您将 _snr 声明为对象而不是函数。函数可以具有属性和方法，因此有多种方法可以实现您想要的，例如其中一种可以说...

```
_snr = function(tag) {
this.tag = tag;
}

_snr.foo = function() {
//Code goes here
} 
```

您还可以将外部上下文传递到闭包中，以隐藏变量以免意外污染全局命名空间，例如...

```
(function(global) {
var _snr = function(tag) {
this.tag = tag;
}

_snr.foo = function() {
//Code goes here
}

//export the function to the window context:
global._snr = _snr;
})(window);

window._snr('#tag').foo('wat'); 
```

快乐编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T05:27:14.467

因为你`_snr`是一个对象，而不是一个函数。你必须这样称呼它：

```
_snr.draw({
    canvasId: '#canvas',
    imageSrc: 'someImage.png'
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T05:29:43.233

当你这样做`_snr('#canvas')`是一个函数调用，这就是你得到那个错误的原因。`_snr`是一个带有一些方法的对象，例如`draw()`和`erase()`。jQuery 能够将参数传递给 的原因`$`是因为它们将`$`作为函数对象返回，这就是为什么我们能够将各种选择器作为参数传递给它的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T05:29:50.003

你在第一行出错了`_snr = {}`

它需要是

```
_snr = function(){
    selector = arguments[0]||false;
    //snr init on dom object code
    return _snrChild;
} 
```

我在手机上，但当我在电脑上时，我可能会修复整个代码 c：

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T05:30:44.410

在这里，您有一个 snr 对象，它具有擦除和绘制方法。您打算做的是编写一个 _snr 函数，该函数将获取一个 id 并返回一个包装器对象。返回的对象应该有擦除和绘制方法。所以你可以做 var returnedObject = _snr("my_id"); 返回Object.draw("image.png");

# android - 如何在 Android 中使用 CheckBox 跟踪 ListView 中选中的行

> ID：12576597
> 
> 赞同：1
> 
> 时间：2012-09-25T05:21:37.460
> 
> 标签：android, listview, checkbox

目前，我参与了一个与在线食品订购相关的安卓应用程序开发。我有一个具有以下架构的 listView：

```
itemName1  itemPrice1  checkBox
itemName2  itemPrice2  checkBox
itemName3  itemPrice3  checkBox
             .
             .
             .

          GetYourCart[Button] 
```

我的任务是在用户按下按钮时跟踪每个选定的 itemNames 的价格和总价。我用过，`SparseBooleanArray sbArray = myMenulist.getCheckedItemPositions();`但没有显示任何结果。

我该如何实施？我已经经历了 stackoverflow 和其他在线教程中提出的几个问题，但无法得到它。

编辑：这是我用来检查结果的选定项目的代码：

```
btnyourCart.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                String selected = "";
                int cntChoice = myMenulist.getCount();
                SparseBooleanArray sbArray = myMenulist.getCheckedItemPositions();
                for(int i=0;i<cntChoice;i++){
                    if(sbArray.get(i)) {

                        selected += myMenulist.getItemAtPosition(i).toString() + "\n";

                    }

                }
                Log.e("menu","Items "+selected);
                Toast.makeText(getApplicationContext(), selected, Toast.LENGTH_SHORT).show();

            }
        }); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:44:43.177

```
int total=0;

btnyourCart.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            String selected = "";
            int cntChoice = myMenulist.getCount();
            SparseBooleanArray sbArray = myMenulist.getCheckedItemPositions();
            for(int i=0;i<cntChoice;i++){
                if(sbArray.get(i)) {

                    selected += myMenulist.getItemAtPosition(i).toString() + "\n";

                     total+=myMenulist.get(i).price;

                }

            }
            Log.e("menu","Items "+selected);
            Toast.makeText(getApplicationContext(), selected, Toast.LENGTH_SHORT).show();

        }
    }); 
```

现在在按钮单击事件上获取总数。

```
button.setOnClickListenernew View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            Toast.makeText(
                    this,
                    ""+total,
                    Toast.LENGTH_LONG).show();

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:37:02.193

您需要在 getView() 方法中的自定义适配器中将复选框值保留在列表位置并将该值存储在数组中。这将使复选框值与其位置保持一致。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;

        if(convertView == null){
            LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.list_layout, null);
            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.checkBox = (CheckBox) view.findViewById(R.id.del_many_task_chk);
            viewHolder.checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    Model element = (Model) viewHolder.checkBox.getTag();
                    element.isChecked = buttonView.isChecked();
                }
            });
            view.setTag(viewHolder);
            viewHolder.checkBox.setTag(list.get(position));
        }else{
            view = convertView;
            ((ViewHolder)view.getTag()).checkBox.setTag(list.get(position));
        }
        ViewHolder holder = (ViewHolder) view.getTag();
        holder.checkBox.setChecked(list.get(position).isChecked);
        return view;
    } 
```

现在，当需要知道是否选中了哪个复选框时，您需要使用迭代器浏览列表项。根据复选框值获取选中和未选中的项目。

```
for(int i=0;i<list.size();i++){
    if(all_task_list.get(i).isChecked){
         // to do things for checked item
    }else{
         // to do things for uncheck item
    }
} 
```

# c++ - 根 node_ptr 上的二叉搜索树访问冲突

> ID：12576599
> 
> 赞同：0
> 
> 时间：2012-09-25T05:21:41.177
> 
> 标签：c++, binary-search-tree

我收到“Trees.exe 中 0x00263ACB 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000000。” 在 remove_node 函数的第一个 if 语句中。谁能给我一个建议，我被难住了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:32:53.717

看起来错误可能隐藏在这里：在这两种情况下，您都转到左子节点并在某个时候接近叶子（并尝试删除其不存在的子节点）。尝试替换其中`remove_node(num, node_ptr->left);`之一`remove_node(num, node_ptr->right);`

另外，最好先检查一个节点是否存在。

# ftp - FTP 命令复制所有文本文件然后删除

> ID：12576602
> 
> 赞同：0
> 
> 时间：2012-09-25T05:22:44.620
> 
> 标签：ftp, batch-file, sftp, ftp-client

嗨，我创建了一个 ftp cmd 脚本，它将文本文件从本地源复制到 ftp 文件夹目标。复制成功。但我希望它更复杂，在成功复制后，复制到另一个本地文件夹（将作为文本文件的备份副本，当存在时将文件名增加 1）然后它将从源中删除复制的文本文件。

我的脚本如下：

```
 @ftp -i -s:"%~f0"&GOTO:EOF
      open [172.16.xx.xx]
      oracle
      mypassword

      cd /ftp_destination/
      mput D:/local_source_folder

      quit 
```

我知道要问的太多了，而且有点复杂，但是帮助新手将是一个很大的帮助。感谢您的提前帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:04:56.493

```
@ftp -i -s:"%~f0"&GOTO:EOF
open [172.16.xx.xx]
oracle
mypassword

cd /ftp_destination/
mput D:/local_source_folder
!del /q D:/local_source_folder

quit 
```

`!`是 FTP 的 shell 命令，它之后的任何内容都将在“dos”shell 中执行。

`!``ENTER`或者，您可以直接`FTP`打开一个“dos”外壳供您输入。`EXIT`将返回到`ftp`. 像这样：

```
@ftp -i -s:"%~f0"&GOTO:EOF
open [172.16.xx.xx]
oracle
mypassword

cd /ftp_destination/
mput D:/local_source_folder

!
del /q D:/local_source_folder
exit

quit 
```

# ruby-on-rails - Rails+Backbone.js - 小胡子的动态加载模板

> ID：12576604
> 
> 赞同：0
> 
> 时间：2012-09-25T05:22:54.517
> 
> 标签：ruby-on-rails, templates, backbone.js, mustache

**你好**

请任何人告诉我如何将**其他文件**中的小胡子模板加载到我的主干脚本中？我试过 Ajax，但他加载给我太晚了，视图已经准备好了......无论如何......如何将**assets/templates/single/index.html.mustache**加载到主干视图并将其重定向到**View** @el元素？

*非常感谢*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:30:09.300

实际上，还没有找到类似于 handlebars_assets 的 gem。可能与小胡子类似，因为车把是小胡子的延伸。

[https://github.com/leshill/handlebars_assets](https://github.com/leshill/handlebars_assets)

# php - 有没有人见过这样的php加密？

> ID：12576606
> 
> 赞同：4
> 
> 时间：2012-09-25T05:23:01.197
> 
> 标签：php

我见过 base64、mcrypt 和河豚，但我无法找出这段代码使用什么加密算法/方法。

有人见过这种 php 加密吗？

```
<?php include"\x6d\x79sql-\x63\x6f\x6e\x6eec\x74.p\x68\x70";${"\x47\x4c\x4f\x42A\x4c\x53"}["\x6c\x71wwi\x6b\x64\x64v"]="res\x63\x68\x6b\x62i\x6cl";${"\x47L\x4fB\x41\x4cS"}["\x70ve\x6b\x72\x71\x68"]="\x61\x64\x6d\x69n";${"\x47L\x4f\x42\x41\x4cS"}["\x73\x6b\x62\x64\x66\x6dn"]="\x72e\x73\x70\x65\x74\x74\x79";${"\x47\x4c\x4f\x42\x41L\x53"}["\x72\x76r\x61\x77q\x68\x74i\x67"]="d\x61\x74\x65";${"\x47\x4c\x4f\x42ALS"}["\x6d\x6e\x76\x6a\x72\x6c\x78\x70"]="\x73q\x6cp\x65\x74t\x79";include"s\x65ss\x69o\x6e\x2e\x70h\x70";${${"\x47\x4cOB\x41\x4c\x53"}["\x72v\x72\x61wqh\x74\x69\x67"]}=date("Y-m-d");echo "\n";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x6dd\x64\x6f\x71spgh"]="c\x6fu\x6e\x74p\x65\x74t\x79";  

 if(${${"\x47\x4cOB\x41\x4c\x53"}["p\x76\x65\x6b\x72\x71\x68"]}==1)
 {
   header("lo\x63at\x69\x6fn:\x6c\x6fg\x6f\x75\x74.\x70hp");
 }
 else
{
   $bbnimsb="c\x6fu\x6e\x74\x63\x68\x6b";
   $silucxpqku="r\x65\x73\x63\x68k\x62\x69\x6c\x6c";
   ${"G\x4cO\x42A\x4cS"}["zjx\x6c\x6d\x65\x73\x72\x67"]="\x63\x6fu\x6et\x63\x68\x6b";
   $wkozfoxln="sq\x6cc\x68kb\x69\x6cl";${$wkozfoxln}="s\x65l\x65\x63t\x20*\x20fro\x6d\x20m\x61s\x74e\x72\x6fut \x77\x68\x65\x72e sto\x72\x65i\x64\x3d\x27$storeid\x27\x20\x61n\x64 d\x61te='$date\x27\x20a\x6ed\x20(kot\x3d0 \x6fr\x20k\x6f\x74\x3d\x31\x20\x6f\x72\x20k\x6f\x74\x3d2)";
   ${"G\x4cO\x42AL\x53"}["\x71\x6dn\x69\x63sb\x6c\x69ct"]="s\x71l\x63\x68kb\x69\x6cl";
   ${$silucxpqku}=mysql_query(${${"\x47\x4cO\x42AL\x53"}["q\x6d\x6ei\x63\x73bl\x69\x63\x74"]});
   ${${"\x47\x4c\x4f\x42ALS"}["\x7a\x6a\x78\x6c\x6desrg"]}=mysql_num_rows(${${"\x47L\x4fB\x41L\x53"}["\x6cqw\x77\x69\x6b\x64d\x76"]});
   if(${$bbnimsb}>0)
   {
      header("l\x6fc\x61\x74i\x6f\x6e:\x65\x72\x72or.p\x68\x70?er\x72\x3d\x31");}
   else{
         ${"G\x4c\x4f\x42\x41\x4cS"}["z\x76\x71\x75\x63\x6c\x76\x66q\x69\x69"]="s\x71\x6cp\x65t\x74\x79";
         ${${"GLOBA\x4cS"}["z\x76q\x75\x63l\x76\x66qi\x69"]}="\x73e\x6c\x65c\x74\x20*\x20\x66r\x6fm\x20\x64\x61y\x63\x6c\x6fse \x77h\x65r\x65\x20s\x74\x6fr\x65\x69d=\x27$storeid'\x20\x61\x6ed\x20\x64\x61\x79clo\x73\x65=\x27$date\x27";
         ${${"\x47\x4c\x4f\x42\x41\x4cS"}["skb\x64fm\x6e"]}=mysql_query(${${"GL\x4f\x42\x41\x4cS"}["\x6dn\x76jrl\x78\x70"]});${${"GL\x4fB\x41LS"}["\x6dd\x64\x6f\x71sp\x67h"]}=mysql_num_rows(${${"GL\x4f\x42\x41\x4cS"}["\x73\x6b\x62\x64f\x6d\x6e"]});
     if(${${"\x47\x4c\x4f\x42\x41\x4cS"}["m\x64do\x71\x73pgh"]}==0)
    {
       header("l\x6f\x63a\x74\x69\x6fn:e\x72r\x6fr.\x70h\x70?err=\x32");
    }
    else{header("l\x6f\x63ati\x6fn:log\x6f\x75\x74\x2ep\x68\x70");}}}
?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T05:25:47.637

请参阅[http://php.net/manual/en/regexp.reference.escape.php](http://php.net/manual/en/regexp.reference.escape.php)：

> `\xhh`– 带有十六进制代码的字符`hh`

基本上它只是使用转义码看起来很花哨/很神秘。

## 解码：

```
<?php
include "mysql-connect.php";
${"GLOBALS"}["lqwwikddv"]  = "reschkbill";
${"GLOBALS"}["pvekrqh"]    = "admin";
${"GLOBALS"}["skbdfmn"]    = "respetty";
${"GLOBALS"}["rvrawqhtig"] = "date";
${"GLOBALS"}["mnvjrlxp"]   = "sqlpetty";
include "session.php";
${${"GLOBALS"}["rvrawqhtig"]} = date("Y-m-d");
echo "\n";
${"GLOBALS"}["mddoqspgh"] = "countpetty";
if (${${"GLOBALS"}["pvekrqh"]} == 1) {
    header("location:logout.php");
} else {
    $bbnimsb                     = "countchk";
    $silucxpqku                  = "reschkbill";
    ${"GLOBALS"}["zjxlmesrg"]    = "countchk";
    $wkozfoxln                   = "sqlchkbill";
    ${$wkozfoxln}                = "select * from masterout where storeid='$storeid' and date='$date' and (kot=0 or kot=1 or kot=2)";
    ${"GLOBALS"}["qmnicsblict"]  = "sqlchkbill";
    ${$silucxpqku}               = mysql_query(${${"GLOBALS"}["qmnicsblict"]});
    ${${"GLOBALS"}["zjxlmesrg"]} = mysql_num_rows(${${"GLOBALS"}["lqwwikddv"]});
    if (${$bbnimsb} > 0) {
        header("location:error.php?err=1");
    } else {
        ${"GLOBALS"}["zvquclvfqii"]    = "sqlpetty";
        ${${"GLOBALS"}["zvquclvfqii"]} = "select * from dayclose where storeid='$storeid' and dayclose='$date'";
        ${${"GLOBALS"}["skbdfmn"]}     = mysql_query(${${"GLOBALS"}["mnvjrlxp"]});
        ${${"GLOBALS"}["mddoqspgh"]}   = mysql_num_rows(${${"GLOBALS"}["skbdfmn"]});
        if (${${"GLOBALS"}["mddoqspgh"]} == 0) {
            header("location:error.php?err=2");
        } else {
            header("location:logout.php");
        }
    }
} 
```

我只是用javascript把它翻译成理智的东西。

```
var source  = '...';
var decoded = source.replace(/\\x([a-f0-9][a-f0-9])/g, function(a,b) {
    return String.fromCharCode(parseInt(b, 16));
}); 
```

然后，如果您想发疯，可以（手动）将其归结为：

```
<?php
include "mysql-connect.php";
include "session.php";
$date = date("Y-m-d");
echo "\n";
if ($admin) {
    header("location:logout.php");
} else {
    $sql   = "select * from masterout where storeid='$storeid' and date='$date' and (kot=0 or kot=1 or kot=2)";
    $count = mysql_num_rows(mysql_query($sql));
    if ($count > 0) {
        header("location:error.php?err=1");
    } else {
        $sql   = "select * from dayclose where storeid='$storeid' and dayclose='$date'";
        $count = mysql_num_rows(mysql_query($sql));
        if ($count == 0) {
            header("location:error.php?err=2");
        } else {
            header("location:logout.php");
        }
    }
} 
```

**PS**这是非常糟糕的代码：/为什么他们不使用`COUNT(*)`而不是获取所有结果超出了我的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T05:26:47.447

这只是字符的十六进制表示，几乎不能算作加密。你可以在这里找到一张好桌子

[http://web.cs.mun.ca/~michael/c/ascii-table.html](http://web.cs.mun.ca/~michael/c/ascii-table.html)

# objective-c - removeAllAnimations 不适用于连续调用的动画

> ID：12576610
> 
> 赞同：2
> 
> 时间：2012-09-25T05:23:19.547
> 
> 标签：objective-c, xcode, core-animation

我正在尝试设置一个图像库类型视图，其中图像几乎是全屏的，并且导航控制器、工具栏、按钮（在图像之间移动）和滑块（在图像之间快速移动）都在没有时间后淡出互动，然后点击返回。到目前为止我所拥有的（我敢肯定这甚至还没有接近正确的方法，我是一个初学者）是这样的：

```
-(void)fadeOutViews{

     [self fadeOutView:rightButton];
     [self fadeOutView:leftButton];
     [self fadeOutView:mySlider];
     mySlider.enabled = NO;
     [self fadeOutView:myToolbar];
     [self fadeOutView:self.navigationController.navigationBar];

}

-(void)fadeOutView:(UIView *)view{

    view.alpha = 1;

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseIn];

    [UIView setAnimationDelegate:self];

    [UIView setAnimationDuration:2];
    view.alpha = 0;

    [UIView commitAnimations];

}

-(void)stopFadeOut{

    [rightButton.layer removeAllAnimations];
    [leftButton.layer removeAllAnimations];
    [mySlider.layer removeAllAnimations];
    [myToolbar.layer removeAllAnimations];
    [self.navigationController.navigationBar.layer removeAllAnimations];

}

-(void)resetToInitialConfigurationWithDelay:(int)delay{

    if (buttonWasPressed){
        delay = 4;
        buttonWasPressed = NO;
    }

    rightButton.alpha = 1;
    leftButton.alpha = 1;
    mySlider.alpha = 1;
    myToolbar.alpha = 1;
    self.navigationController.navigationBar.alpha = 1;

    mySlider.enabled = YES;

    [self stopFadeOut];

    [self performSelector:@selector(fadeOutViews) withObject:nil afterDelay:delay];
} 
```

所以，理论上是，你重置到初始状态（延迟是因为使用按钮前进时图像淡入淡出，所以在按下按钮后淡入之前需要更多时间，否则淡出立即开始在新图像加载后。这会将所有内容重置为它的开始方式，并再次开始淡入淡出过程。如果发生应该停止淡入淡出过程的事情，stopFadeOut 会删除所有动画。因此，例如，如果发生点击：

```
- (IBAction)tapOccurs:(id)sender {
    [self stopFadeOut];
    [self resetToInitialConfigurationWithDelay:2];
} 
```

任何先前的动画都会停止，然后重新启动该过程。或者至少这是理论。在实践中，如果连续快速点击几次，淡出的视图将开始短暂淡出，然后一遍又一遍地重置，以使它们看起来像是在闪烁，直到它们最终完全淡出。我认为问题可能是动画被延迟了，但 removeAllAnimation 调用没有，所以我替换了 [self stopFadeOut]; with [self performSelector:@selector(stopFadeOut) withObject:nil afterDelay:2];

但结果是一样的。如果从不调用 stopFadeOut，则行为完全相同，所以我可以得出的唯一结论是，无论出于何种原因，removeAllAnimations 调用都不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:55:10.900

# 怎么了

在我看来，在上一次运行完成之前多次调用了 reset 方法。您可以通过在 tap 和 reset 方法中添加日志语句来轻松验证这一点，并计算每种方法的日志数量，并观察当您连续点击多次时会发生什么。

我试图用下图来说明问题。

```
T = tapOccurs:
O = fadeOutViews:
--- = wait between T & O

Normal single tap  
T-----O    T-----O      
---------------------> time

Multiple taps in a row
T-----O 
  T-----O
      T-----O
---------------------> time

What it sound like you are trying to do
T-
  T---
      T-----O
---------------------> time 
```

每次`fadeOutViews:`（`O`在插图中调用）被调用时，视图都会淡出。查看您的 fadeOutView: 实现，这意味着不透明度将跳转到 1，然后慢慢淡化到 0，因此看起来它们闪烁的次数与点击次数相同，直到最终重新开始。

# 如何防止这种情况

你可以做很多事情来阻止这种情况的发生。一件事是通过调用类似的东西来取消所有预定的重置方法 `cancelPerformSelectorsWithTarget:`or `cancelPreviousPerformRequestsWithTarget:selector:object:`。

# concurrency - 如何在 hive 中同时提交多个查询

> ID：12576612
> 
> 赞同：2
> 
> 时间：2012-09-25T05:23:30.017
> 
> 标签：concurrency, hadoop, hive

我正在尝试使用 CLI 提交多个 Hive 查询，并且我希望查询同时运行。但是，这些查询是按顺序运行的。

有人能告诉我如何调用一些 Hive 查询，以便它们实际上同时运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:35:38.210

这不是因为 Hive，而是与您的 Hadoop 配置有关。默认情况下，Hadoop 使用简单的 FIFO 队列来提交和执行作业。但是，您可以配置不同的策略，以便可以一次运行多个作业。

这是 Cloudera 早在 2008 年就此事发表的一篇不错的博客文章：[Hadoop 中的作业调度](http://www.cloudera.com/blog/2008/11/job-scheduling-in-hadoop/)

除了默认的调度器之外，几乎所有的调度器都支持并发作业，所以选择吧！

# magento - 以编程方式在 Magento 中添加面包屑路径？

> ID：12576614
> 
> 赞同：3
> 
> 时间：2012-09-25T05:23:38.393
> 
> 标签：magento

在 Magento 中，当用户直接访问产品页面时，例如来自 Google，面包屑只会是“主页”->“产品名称”。

[即使用户直接从 Google 访问该页面，如何在其中添加类别？](https://stackoverflow.com/questions/12417499/making-consistent-breadcrumbs-on-individual-product-pages-in-magento)

例如，在[此页面上](http://www.princessly.com/sexy-short-sheath-blooms-one-shoulder-backless-natural-waist-ruched-satin-bridal-dress.html)，我想在面包屑中添加类别“婚纱”和“婚纱”。除了硬编辑 breadcrumbs.phtml 之外，我想出了一个想法，但是有什么方法可以以编程方式在 template/catalog/product/view.phtml 中添加面包屑项？

我可以获取当前产品的类别（标题和链接），然后使用一些函数/方法以动态和编程方式将它们添加到面包屑中。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T17:40:11.277

这是强制 Magento 显示完整面包屑的代码，包括通过循环遍历当前产品的每个类别的类别：

©丹尼文斯

```
<?php
if ($product = Mage::registry('current_product')) {
    $categories = $product->getCategoryCollection()->load();

    if($categories) {
        foreach ($categories as $category)
        {
            if($category) {
            $category = Mage::getModel('catalog/category')->load($category->getId());
            break;
            }
        }
    }
    $lastCrumbName = $product->getName();
    $lastCategoryAdjust = 0;
}
else {
    if($category = Mage::registry('current_category')) {
    $lastCrumbName = $category->getName();
    }
    $lastCategoryAdjust = 1;
}

if($category) {
    if($path = $category->getPath()) {
        $path = explode('/', $path);
        $crumbs = array('home' => array('label' => 'Home',
        'title' => 'Home',
        'link' => Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB),
        'first' => true,
        'last' => false
        ));
        for($i = 2; $i < count($path) - $lastCategoryAdjust; $i++) {
            $cur_category = Mage::getModel('catalog/category')->load($path[$i]);
            if($cur_category && $cur_category->getIsActive()) {
                $crumbs['category' . $path[$i]] = array('label' => $cur_category->getName(),
                'title' => $cur_category->getName(),
                'link' => $cur_category->getUrl(),
                'first' => false,
                'last' => false
                );
            }
        }
        $crumbs['current'] = array('label' => $lastCrumbName,
        'title' => '',
        'link' => '',
        'first' => false,
        'last' => true
        );
    }
}
?> 
```

# php - 在 Twitter 中获取永久用户访问令牌

> ID：12576615
> 
> 赞同：0
> 
> 时间：2012-09-25T05:23:43.477
> 
> 标签：php

我正在使用这个 php 库与名为 tmhOAuth [https://github.com/themattharris/tmhOAuth](https://github.com/themattharris/tmhOAuth)的 twitter api 进行交互，但我无法获得永久用户访问令牌和令牌机密。我认为我目前获得的那个仅适用于当前的浏览器选项卡。在下面的代码中，我将用户令牌和用户密码分配给会话。

```
function access_token($tmhOAuth) {
  $tmhOAuth->config['user_token']  = $_SESSION['oauth']['oauth_token'];
  $tmhOAuth->config['user_secret'] = $_SESSION['oauth']['oauth_token_secret'];

  //store user token and secret to a session to be accessed on a different page
  $_SESSION['u_token'] =  $tmhOAuth->config['user_token'];
  $_SESSION['u_secret'] = $tmhOAuth->config['user_secret'];  

  $code = $tmhOAuth->request(
    'POST',
    $tmhOAuth->url('oauth/access_token', ''),
    array(
      'oauth_verifier' => $_REQUEST['oauth_verifier']
    )
  );

  if ($code == 200) {
    $_SESSION['access_token'] = $tmhOAuth->extract_params($tmhOAuth->response['response']);
    unset($_SESSION['oauth']);
    header('Location: ' . tmhUtilities::php_self());
  } else {
    outputError($tmhOAuth);
  }
} 
```

然后我只是从另一个页面访问用户令牌和秘密：

```
$tmhOAuth = new tmhOAuth(array(
  'consumer_key'    => 'xxx',
  'consumer_secret' => 'xxx',
  $_SESSION['u_token'],
 $_SESSION['u_secret']
));

$tweet = 'tweet';

$code = $tmhOAuth->request('POST', $tmhOAuth->url('1/statuses/update'), array(
  'status' => $tweet
));

echo json_encode($code); //I always get 401 here
?> 
```

问题是我总是得到 401 响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:27:21.237

您是否尝试添加

```
'oauth_token' => $_REQUEST['oauth_token'] 
```

对你的要求？

```
$code = $tmhOAuth->request(
    'POST',
    $tmhOAuth->url('oauth/access_token', ''),
    array(
      'oauth_verifier' => $_REQUEST['oauth_verifier'],
      'oauth_token' => $_REQUEST['oauth_token']
    )
); 
```

# qt - Qt：在没有 qml 的动画中移动 QListView 中的项目

> ID：12576619
> 
> 赞同：4
> 
> 时间：2012-09-25T05:24:05.577
> 
> 标签：qt, delegates, qlistview

我正在开发一个 QListView 以提供一个动画 listView 中项目的移动的功能。例如 ：

```
item1
item2
item3
item4
item5 
```

如果我单击 item4 并向上移动/拖动，那么每个项目都应该通过动画向下移动一个位置，并且当前位置应该是空的，直到项目被放下。

有没有办法在不使用 qml 的情况下实现这一点。我想用 QPropertyAnimation 或 QTimeLine 来实现它，但我需要列表中项目的特定坐标/位置。我还使用 QStyledItemDelegate 实现了一个委托，在paintEvent 中我可以使用 option.rect 获取每个项目的坐标。

# jquery - Jquery用一些字符串查找并替换Tag

> ID：12576620
> 
> 赞同：0
> 
> 时间：2012-09-25T05:24:06.060
> 
> 标签：jquery

我有 id 为“bar”的跨度。其中包含标签`<h3></h3>`，我想`<h3></h3>`用“一些字符串”替换。这是我的html

```
<span id="bar" >
<h3></h3>
</span> 
```

我期待的输出

```
<span id="bar" >
some string
</span> 
```

非常感谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T05:25:35.063

您可以使用`html`方法：

```
$('#bar').html('some string'); 
```

如果你只想替换 h3 元素，你可以使用`replaceWith`方法：

```
$('#bar h3').replaceWith('some string'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T05:26:02.010

如果您`some string`包含 html 标签使用`html`，否则`text`

```
var someString = "Some String";

$("span#bar:has(h3)").text(someString); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T05:25:40.763

```
$('#bar h3').replaceWith('some string'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T05:44:23.530

试试这个代码，

```
var someString = "Some String";

$("span#bar:has(h3)").replaceWith(someString); 
```

[演示](http://jsfiddle.net/sLT7f/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T05:27:13.883

```
var text = $('#bar').html();
    text = text.replace("<h3></h3>", "some string");
    $('#bar').html(text); 
```

# javascript - if (json.RowKey != json.NewRowKey) 有什么问题

> ID：12576621
> 
> 赞同：1
> 
> 时间：2012-09-25T05:24:35.153
> 
> 标签：javascript, jquery

我正在使用 lint 和以下内容：

```
if (json.RowKey != json.NewRowKey) 
```

它给了我一个信息：

```
Expected '!==' and instead saw '!='. 
```

有人可以解释这是什么意思吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:28:55.417

`==`将尝试在比较它们之前将两个操作数的类型转换为相同。因此`"2" == 2`是`true`。

`===`不会尝试转换两个操作数的类型，因此如果它们不是同一类型，则它们永远不会是`===`. 因此`"2" === 2`是`false`。

最好使用`===`and`!==`作为您的默认选择，并且仅在您明确希望允许类型转换时使用`==`or 。`!=`如果您不期望这两个操作数是不同的类型，那么`===`and`!==`更有可能做您所期望的。

当事情并不真正相等并且您的代码不打算让它们相等时，这可以避免编码错误。

一些奇怪的事情会发生`==`（并且不会发生`===`），您可能不会想到并可能导致麻烦。所有这些评估为`true`：

```
null == undefined
false == '0' 
0 == '0' 
0 == '' 
```

这里写了更多细节：[JavaScript 比较中应该使用哪个等号运算符（== vs ===）？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T05:41:00.700

!== 不相等（既不是值也不是类型） 例如： `var x = 5; x !== "5" returns true var x = 5; x !== 5 returns false`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T05:30:14.910

这是一个警告，告诉您应该考虑使用`!==`运算符而不是`!=`.

从表面上看，他们都在做同样的事情——比较这两个项目是否不相等。但是，`!==`首先要确保两个项目的类型相同（也就是说，如果要比较的一个项目是字符串而另一个项目是数字，它不会尝试将字符串转换为数字），所以它是通常使用起来更安全，可以帮助您避免比较错误。

有关更多详细信息，请参阅此处：[JavaScript 比较中应使用哪个等号运算符 (== vs ===)？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T05:34:03.493

是的，

```
if("1" == 1) //Returns true because it will convert the second 1 into a string to match 
```

但

```
"1" !== 1 //Returns false because the first 1 is a string and the second 1 is an integer. 
```

我们正在谈论变量**类型**；使用两个等号，javascript（和 php）将为您对变量进行类型转换（将整数 1 转换为字符串 1 以进行匹配并为真），但使用第二个语句，它不会。

```
1 === 1 //True
1 === "1" //False
1 == "1" //True
1 == 1 //True 
```

希望我的回答对你有意义。

# shell - 如何在 shell 脚本中链接共享库？

> ID：12576627
> 
> 赞同：2
> 
> 时间：2012-09-25T05:25:15.400
> 
> 标签：shell, command, shared-libraries

我写了一个简单的 shell 脚本，我只提到了以下行

> 导出 LD_LIBRARY_PATH=/home/lib/

我想运行一个我必须与这个库链接的程序，在运行程序之前我正在运行这个 shell 脚本，但是在此之后程序不工作它显示链接错误，当我执行以下行时它什么也没显示

> 回声 $LD_LIBRARY_PATH

但是，当我在 shell 中正常执行此操作时，它正在工作。

任何人都可以告诉为什么这个shell脚本不起作用。它背后的概念是什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:28:29.513

如果要运行脚本以修改环境变量，则需要获取脚本而不是运行脚本。运行脚本会启动一个新的 w/e shell 实例来运行脚本，当它返回时，所有环境变量都会恢复到运行它之前的状态。执行“source script.sh”实际上会在当前 shell 中运行脚本中的命令。

# php - 图像的正则表达式

> ID：12576640
> 
> 赞同：0
> 
> 时间：2012-09-25T05:26:34.243
> 
> 标签：php, regex

如果标签在标签内，我如何修改以下正则表达式以**不**执行（分别表示）`<img>``<script>``<script language="...">``<script*>`

**代码：**

```
function seo_friendly_images($content) {

return preg_replace_callback('/<img[^>]+/', 'seo_friendly_images_process', $content);

}

add_filter('the_content', 'seo_friendly_images', 100); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:51:54.347

这在一定程度上取决于您使用的语言。一些语言支持向前看或向后看（例如，仅在 bar 之后匹配 foo 或仅在 foo 之前匹配 bar）。

这对我来说看起来像 php，它报告有前瞻支持 (http://php.net/manual/en/regexp.reference.assertions.php)。

尝试使用正则表达式

```
 /<script[^>]+>(?=<img)/ or /<script[^>]+>(?!<img)/ 
```

?= 表示积极的展望，而 ?! 表示负面展望。正向向前表示“Foo 后面跟着 Bar”，负向向前表示“Foo 后面没有 Bar”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T05:57:23.007

你可能想试试这个：

```
return preg_replace_callback('<img[^<]+?>', 'seo_friendly_images_process', $content); 
```

虽然没有测试。

# integration - OpenERP OTRS 集成

> ID：12576642
> 
> 赞同：2
> 
> 时间：2012-09-25T05:26:43.713
> 
> 标签：integration, openerp, otrs

我正在尝试将 OTRS 与 OpenERP 集成，但我没有任何集成的想法。在网络服务的帮助下，我想从 otrs 获取所有用户记录。如果您对此有任何想法，请与我们分享。软件规范：OpenERP 6.1、OTRS otrs-3.1.10、MySQL 14.14 和 Apache2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:33:19.727

您对要从集成中实现的目标并不太具体。如果您需要将数据导入 OpenERP，该[`import_odbc`模块](http://openerpmanagementsystem.blogspot.pt/2012/09/import-odbc-modules-steps-up.html)可以帮助您将数据从 MySQL 集成到 OpenERP。对于 web 服务集成，您可以在标准模块中找到一个示例`import_sugarcrm`。

更新（2017-04-21）：

派生自`import_odbc`我们现在有[base_external_dbsource](https://github.com/OCA/server-tools/tree/10.0/base_external_dbsource)，一个可插入的基本连接器，以提供对其他系统的直接访问。可用的插件包括 MySQL、Firebird 和 SQLite。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:53:08.047

问题解决，借助otrs soap api，我们可以同步openerp和otrs的数据。

在这里，我们需要使用此位置中存在的所有 otrs 方法：/opt/otrs/kernel/system/...

一旦我们使用根登录 ID 和根密码与 localhost 创建了我们之间的连接。我可以继续执行我们想要执行的后续步骤。

因为我必须创建连接器，它可以将 openerp 中的所有票证消息作为 OTRS 进行维护。

:)

# c# - 检测项目是否正在为 windows 8 或 wp 编译

> ID：12576649
> 
> 赞同：4
> 
> 时间：2012-09-25T05:27:31.280
> 
> 标签：c#, windows-phone-7, windows-8, c-preprocessor

我有一个 windows phone 应用程序，我正在尝试将它移植到 windows 8。问题是这些项目中应该有几个类是通用的。但是 windows phone 的某些功能在 windows 8 上不起作用，反之亦然。所以我可能应该使用预处理器指令来检测操作系统。是否有任何已经定义的预处理器常量可以帮助我解决这个问题？或者你能建议一些更好的方法吗？

PS 这些类使用异步 ctp 库。其中一些还具有网络功能。由于 wp 和 win8 中的加载文件以不同的方式实现（我需要使用自定义标头和 POST 请求进行异步文件下载），因此我还必须考虑到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:43:18.327

您最好的选择是将所有通用代码放在[Portable Library](http://msdn.microsoft.com/en-us/library/gg597391.aspx)中。这将允许您定位多个平台。

我认为 Windows 8 没有预处理器指令，但您可以轻松地在构建配置中创建一个新指令（属性/条件编译符号）。

# django - 使用基本模型创建 OneToOneField

> ID：12576651
> 
> 赞同：0
> 
> 时间：2012-09-25T05:27:34.320
> 
> 标签：django, django-models, one-to-one

有时随着时间的推移模型变得太大。希望将其拆分为多个模型并将它们与`OneToOneField`. 最常使用的字段保留在主模型中，其他字段移动到其他模型中。

然而，这种方法在创建新的模型实例时变得很头疼。当您可以用一行初始化一个模型时：

```
MyModel.objects.create(foo=1, bar=2)

```

您至少需要两行来初始化两个模型：

```
实例 = MyModel.objects.create(foo=1, bar=2)
MyRelatedModel.objects.create(mymodel=instance, hello=3, world=4)

```

有没有办法在一行中*简单地创建两个模型，或者我应该为这些问题编写自己的辅助函数？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:47:44.870

我认为，由于以下原因，您不应该使用 onetooneField 拆分模型

*   正如您所说，将有一些额外的代码来管理它们。
*   每次查询它们时，您都必须进行两次查询而不是两次。

请不要忘记 django 模型有两个功能。保持数据相关的方法，它们保持应用程序的数据模型。一些业务模型的表包含数百个字段。这是完全正常的。如果你真的想拆分它们。您可能想查看抽象基类。这些是您的模型的基类，它们本身没有单独的表[https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes](https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes)

但是，如果您坚持使用 oneToOne 字段，则可以将对象创建代码包装在模型的方法之一中，例如

```
MyMode.create(attr_for_model_A=1, attr_for_model_B=2) 
```

或者您可以覆盖默认管理器的创建方法以创建两种方法而不是一种 [https://docs.djangoproject.com/en/dev/topics/db/managers/#modifying-initial-manager-querysets](https://docs.djangoproject.com/en/dev/topics/db/managers/#modifying-initial-manager-querysets)

在我看来，这些都不值得拥有小的模型代码。

# java - Number to words Mapping ，敬畏记忆心血来潮？

> ID：12576661
> 
> 赞同：1
> 
> 时间：2012-09-25T05:28:30.703
> 
> 标签：java, jakarta-ee, logic

我需要帮助来完成这个小项目

程序会将电话号码作为输入并将其转换为正确的英文单词。

说明：在文本文件的前十行中，有一些与 0-9 数字相关的字母，例如

```
1 akl
2 dgh
3 qnm
4 rtu
5 zx
6 cvf
7 eip
8 wjs
9 yb
0 o 
```

在第 11 行，出现总单词数，即 50000 之后，从第 12 行开始，所有 50000 个单词都存在；每行一个字。现在程序将数字作为输入表单用户，直到用户输入 -1

然后从这个文本文件中生成一个适当的英语匹配词。每个字母代表列表中的一个数字。

例如用户输入 6182703

输出将是：时尚

对于超过 1 个匹配的单词，系统将列出所有以连字符 '-' 分隔的单词。

我应该如何开始，我应该使用什么方法？如果有人提供伪代码或提示.. 那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:24:43.733

我会拿一本单词词典，并根据您的需要将其分类到一个文件中。

例如：

苹果 = 17717

樱桃 = 627449

然后使用搜索算法浏览文件。

编辑：或者您可以将数据存储在关系数据库中（http://hsqldb.org/ 很简单）以避免更大的内存占用。如果您喜欢该解决方案，您还可以调查一些键/值存储等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T06:27:17.103

您问题中的很多细节都与输入规范有关，这都是微不足道的。

解析输入后，您将获得“候选”单词（所有单词）的列表，以及数字到可以表示的字符集的映射。

```
List<String> words;
Map<Character, Set<Character>> digitMapping; 
```

为数字生成单词的最简单方法可能是：顺序过滤候选列表，测试它们是否与输入数字匹配，否则将其删除。像这样的东西可能会起作用（考虑这个伪代码 - 我还没有尝试编译它）：

```
List<String> getMatches(String inputDigits) {
    // Take a copy of the word list.  You don't want to ruin the list for the next caller
    List<String> candidates = new ArrayList<String>(words); 

    for (Iterator<String> it = candidates.iterator(); it.hasNext() && !candidats.isEmpty(); ) {
        String candidate = it.getNext();
        for (int i = 0; i < inputDigits.length; ++i) {
            Character c = new Character(candidate.charAt(i));
            Character d = new Character(inputDigits.charAt(i));
            if (!digitMapping.get(d).contains(c)) {   
                it.remove();
            }
         }
     }

     return candidates;
} 
```

它将返回所有匹配的单词，因此在您的示例中，“555”可能会返回一个空列表。“6182703”可能只返回一个单词“fashion”，而“202”可能会返回一个列表中的几个单词（“dog”、“hog”、“god”）。您需要决定如何处理零个案例和多个案例。

**编辑：有关填充 digitMapping 的详细信息**：

digitMapping 将类似于：

```
Map<Character, Set<Character>> digitMapping = new HashMap<Character, Set<Character>>(); 
```

然后你需要从输入中获取一个字符和一个字符串。对于输入行“1 akl”，您的 char 将为“1”，而您的 String 将为“akl”。您正在从字符映射到字符串中的字符集，因此需要构造一个空集，将其放入映射中，然后填充该集。类似的东西（同样，我什至没有尝试编译这个，所以用一粒盐来对待它）：

```
private void addDigitToMap(char digit, String chars) {
    Set<Character> set = new HashSet<Character>();
    digitMapping.put(set);
    for (char c : chars.toCharArray()) {
        set.add(new Character(c));
    }
 } 
```

所以现在地图将有一个条目指向一组可以表示的字符。

# visual-studio - 将 MSBuild PublishProfile 与 Visual Studio 2012 一起使用时，MSDeploy 跳过规则

> ID：12576662
> 
> 赞同：24
> 
> 时间：2012-09-25T05:28:31.970
> 
> 标签：visual-studio, msbuild, visual-studio-2012, msdeploy, webdeploy

我正在尝试使用 WebDeploy 使用自定义 MSDeploy 跳过规则和保存在 Visual Studio 2012 中的发布配置文件来发布网站。

我有从命令行运行的发布配置文件，但是跳过删除文件夹的跳过规则不起作用。

`ErrorLog`我的网络应用程序中有一个子文件夹，其中有一个`web.config`文件来设置正确的文件夹权限。没有任何跳过规则，`ErrorLog`文件夹和`web.config`文件正常发布，但服务器上文件夹中所有现有的错误日志文件在发布时被删除。

* * *

**错误`<SkipAction>Delete</SkipAction>`**

当我将自定义跳过规则添加到我的`wpp.targets`文件时，跳过规则不再接受`<SkipAction>`元素的值。如果我设置`<SkipAction>Delete</SkipAction>`，我会收到以下错误：

```
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets(4377,5): error : Web deployment task failed. (Unrecognized skip directive 'skipaction'. Must be one of the following: "objectName," "keyAttribute," "absolutePath," "xPath," "attributes.<name>.") [C:\inetpub\wwwroot\My.Website\My.Website\My.Website.csproj] 
```

如果我只是省略了该`<SkipAction>`元素，则该`ErrorLog`文件夹会在正常发布时被删除。

如果我`<SkipAction></SkipAction>`再次设置，该`ErrorLog`文件夹会在发布时被删除。

如果我设置了`<KeyAttribute>Delete</KeyAttribute>`，那么`ErrorLog`文件`web.config`就会正常发布。

我的理解是，为了使用自定义跳过规则，您需要从命令行调用 MSBuild，而不是从 VS 2012 中发布。但是，我仍然想使用我保存的发布配置文件，我知道现在可以VS 2012 年。

* * *

**我的 MSBuild 命令行：**

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe My.Website.sln /p:Configuration=Release;DeployOnBuild=true;PublishProfile="Test Server - Web Deploy" 
```

* * *

**My.Website.wpp.targets：**

```
<?xml version="1.0" encoding="utf-8" ?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <AfterAddIisSettingAndFileContentsToSourceManifest>AddCustomSkipRules</AfterAddIisSettingAndFileContentsToSourceManifest>
  </PropertyGroup>

  <Target Name="AddCustomSkipRules">
    <Message Text="Adding Custom Skip Rules" />
    <ItemGroup>
      <MsDeploySkipRules Include="SkipErrorLogFolder1">
        <SkipAction></SkipAction>
        <KeyAttribute>Delete</KeyAttribute>
        <ObjectName>dirPath</ObjectName>
        <AbsolutePath>$(_Escaped_WPPAllFilesInSingleFolder)\\ErrorLog$</AbsolutePath>
        <XPath></XPath>
      </MsDeploySkipRules>
    </ItemGroup>
  </Target>
</Project> 
```

* * *

**我的 MSBuild 输出显示自定义跳过规则，但仍删除文件：**

```
GenerateMsdeployManifestFiles:
  Generate source manifest file for Web Deploy package/publish ...
AddCustomSkipRules:
  Adding Custom Skip Rules
MSDeployPublish:
  Start Web Deploy Publish the Application/package to http://testserver.domain.com/MSDEPLOYAGENTSERVICE ...
  Starting Web deployment task from source: manifest(C:\inetpub\wwwroot\My.Website\My.Website\obj\Release\Package\My.Website.SourceManifest.xml) to Destination: auto().
  Deleting filePath (MyWeb/ErrorLog\test.txt).
  Updating setAcl (MyWeb/).
  Updating setAcl (MyWeb/).
  Updating filePath (MyWeb/ErrorLog\Web.config).
  Updating filePath (MyWeb/Web.config).
  Updating setAcl (MyWeb/).
  Updating setAcl (MyWeb/).
  Successfully executed Web deployment task.
  Publish is successfully deployed. 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-25T06:12:44.420

**编辑：**事实证明你是对的：从 Visual Studio 执行时忽略跳过指令。

幸运的是，有一种解决方法。

你想要的是这样的：

```
<!-- Skip the deletion of any file within the ErrorLog directory -->
<MsDeploySkipRules Include="SkipErrorLogFolder1">
  <SkipAction>Delete</SkipAction>
  <ObjectName>filePath</ObjectName>
  <AbsolutePath>ErrorLog</AbsolutePath>
</MsDeploySkipRules> 
```

此外，您需要阻止 VS 使用 UI 任务（这似乎包含有关跳过规则的错误）。您可以通过在 wpp.targets 或 pubxml 中声明以下内容来做到这一点：

```
<PropertyGroup>
  <UseMsDeployExe>true</UseMsDeployExe>
</PropertyGroup> 
```

我已经在本地对此进行了测试，并且可以确认它可以按预期工作：附加文件已更新，但目录中没有文件被删除。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-24T20:32:41.220

作为参考，这是我的完整`.wpp.targets`文件，其中包含工作跳过规则以跳过删除`ErrorLog`文件夹和自定义 ACL 以使`ErrorLog`文件夹在服务器上可写。

从 VS 2012 更新 3 开始，这仅适用于从命令行使用 MSBuild 发布，并将`DeployOnBuild=true;PublishProfile="Test Server - Web Deploy"`选项传递给 MSBuild。从 VS 中发布时，这**将不起作用。**

```
<?xml version="1.0" encoding="utf-8" ?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <UseMsdeployExe>true</UseMsdeployExe> <!-- Required for the MSDeploySkipRules to work -->
    <DeployManagedPipelineMode>Integrated</DeployManagedPipelineMode>
  </PropertyGroup>

  <PropertyGroup>
    <AfterAddIisSettingAndFileContentsToSourceManifest>
      $(AfterAddIisSettingAndFileContentsToSourceManifest);
      AddCustomSkipRules;
    </AfterAddIisSettingAndFileContentsToSourceManifest>
  </PropertyGroup>

  <Target Name="AddCustomSkipRules">
    <Message Text="Adding Custom Skip Rules" />
    <ItemGroup>
      <MsDeploySkipRules Include="SkipErrorLogFolder">
        <SkipAction>Delete</SkipAction>
        <ObjectName>filePath</ObjectName>
        <AbsolutePath>ErrorLog</AbsolutePath>
        <XPath></XPath>
      </MsDeploySkipRules>
    </ItemGroup>
  </Target>

  <PropertyGroup>
    <AfterAddIisSettingAndFileContentsToSourceManifest>
      $(AfterAddIisSettingAndFileContentsToSourceManifest);
      SetCustomACLs;
    </AfterAddIisSettingAndFileContentsToSourceManifest>
    <AfterAddDeclareParametersItemsForContentPath>
      $(AfterAddDeclareParametersItemsForContentPath);
      SetCustomAclParameters;
    </AfterAddDeclareParametersItemsForContentPath>
  </PropertyGroup>

  <Target Name="SetCustomACLs">
    <Message Text="Setting Custom ACLs" />
    <ItemGroup>
      <!--Make sure the application pool identity has write permission to the download folder--> 
      <MsDeploySourceManifest Include="setAcl"
        Condition="$(IncludeSetAclProviderOnDestination) And Exists('$(_MSDeployDirPath_FullPath)\ErrorLog')">
        <Path>$(_MSDeployDirPath_FullPath)\ErrorLog</Path>
        <setAclAccess>Write</setAclAccess>
        <setAclResourceType>Directory</setAclResourceType>
        <AdditionalProviderSettings>setAclResourceType;setAclAccess</AdditionalProviderSettings>
      </MsDeploySourceManifest>
    </ItemGroup>
  </Target>

  <Target Name="SetCustomAclParameters">
    <Message Text="Setting Custom ACL Parameters" />
    <EscapeTextForRegularExpressions Text="$(_MSDeployDirPath_FullPath)">
      <Output TaskParameter="Result" PropertyName="_EscapeRegEx_MSDeployDirPath" />
    </EscapeTextForRegularExpressions>
    <ItemGroup>
      <MsDeployDeclareParameters Include="Add write permission to ErrorLog folder"
        Condition="$(IncludeSetAclProviderOnDestination) and Exists('$(_MSDeployDirPath_FullPath)\ErrorLog')">
        <Kind>ProviderPath</Kind>
        <Scope>setAcl</Scope>
        <Match>^$(_EscapeRegEx_MSDeployDirPath)\\ErrorLog$</Match>
        <Description>Add write permission to ErrorLog folder</Description>
        <DefaultValue>Default Web Site/ErrorLog</DefaultValue>
        <Value>$(DeployIisAppPath)/ErrorLog</Value>
        <Tags>Hidden</Tags>
        <Priority>$(VsSetAclPriority)</Priority>
        <ExcludeFromSetParameter>True</ExcludeFromSetParameter>
      </MsDeployDeclareParameters>
    </ItemGroup>
  </Target>
</Project> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-26T13:15:11.500

另一种方法是避免使用`SkipAction`标签，我已经直接从 VS 2013 成功使用了这个设置：

```
<Target Name="AddCustomSkipRules"
        AfterTargets="AddIisSettingAndFileContentsToSourceManifest">
    <Message Text="Adding Custom Skip Rules" />
    <ItemGroup>
        <MsDeploySkipRules Include="SkipMedia">
            <objectName>dirPath</objectName>
            <absolutePath>media</absolutePath>
        </MsDeploySkipRules>
        <MsDeploySkipRules Include="SkipUpload">
            <objectName>dirPath</objectName>
            <absolutePath>upload</absolutePath>
        </MsDeploySkipRules>
    </ItemGroup>
</Target> 
```

据我所知，唯一需要注意的是，它将忽略更新、删除和添加操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-25T14:01:09.510

经过几个小时通过网络查看。我在站点根文件夹下将此文件创建为 {myprojectname}.wpp.targets。它在使用 Visual Studio 发布时有效。媒体文件夹被忽略。我正在使用 VS 2010。

```
<?xml version="1.0" encoding="utf-8" ?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <UseMsdeployExe>true</UseMsdeployExe>
        <!-- Required for the MSDeploySkipRules to work -->
        <DeployManagedPipelineMode>Integrated</DeployManagedPipelineMode>
    </PropertyGroup>

    <PropertyGroup>
        <AfterAddIisSettingAndFileContentsToSourceManifest>
            $(AfterAddIisSettingAndFileContentsToSourceManifest);
            AddCustomSkipRules;
        </AfterAddIisSettingAndFileContentsToSourceManifest>
    </PropertyGroup>

    <Target Name="AddCustomSkipRules">
        <Message Text="Adding Custom Skip Rules - WPP Targets 2" />
        <ItemGroup>
            <MsDeploySkipRules Include="SkipErrorLogFolder">
                <SkipAction>Delete</SkipAction>
                <ObjectName>dirPath</ObjectName>
                <AbsolutePath>media</AbsolutePath>
                <XPath></XPath>
                <Apply>Destination</Apply>
            </MsDeploySkipRules>
        </ItemGroup>
    </Target>
</Project> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-21T16:14:02.497

I think the problem is in incorrect AbsolutePath. It should be a regular expression to match file or folder. so it should be properly escaped. Below is the sample which worked for me (I wanted to skip removal of app_offline.htm to make delivery part of larger deployment)

```
<PropertyGroup>
    <PackageUsingManifestDependsOn>$(PackageUsingManifestDependsOn);AddCustomSkipRules</PackageUsingManifestDependsOn>
  </PropertyGroup>
  <Target Name="AddCustomSkipRules">
    <ItemGroup>
      <MsDeploySkipRules Include="SkipAppOfflineOnDeploy">
        <SkipAction></SkipAction>
        <ObjectName>filePath</ObjectName>
        <AbsolutePath>app_offline\.htm</AbsolutePath>
        <Apply>Destination</Apply>
        <XPath></XPath>
      </MsDeploySkipRules>
    </ItemGroup>
  </Target> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-23T17:32:01.250

对我有用：我的 Web 解决方案的 App_Data/PublishProfiles 文件夹中的完整 prepprod.pubxml 文件。Web Deploy 不再从 VS 2015 的 webdeploy 上的 cachefiles 文件夹中删除文件。第一个 PropertyGroup 是使用 Visual Studio 中的 Web 发布 gui 自动生成的。我添加了第二个 PropertyGroup，以及之前评论中的 Target 部分。

```
<?xml version="1.0" encoding="utf-8"?>
<!--
This file is used by the publish/package process of your Web project. You can customize the behavior of this process
by editing this MSBuild file. In order to learn more about this please visit http://go.microsoft.com/fwlink/?LinkID=208121\. 
-->
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <WebPublishMethod>MSDeploy</WebPublishMethod>
    <LastUsedBuildConfiguration>Production</LastUsedBuildConfiguration>
    <LastUsedPlatform>Any CPU</LastUsedPlatform>
    <SiteUrlToLaunchAfterPublish>{masked}</SiteUrlToLaunchAfterPublish>
    <LaunchSiteAfterPublish>True</LaunchSiteAfterPublish>
    <ExcludeApp_Data>False</ExcludeApp_Data>
    <MSDeployServiceURL>{masked}</MSDeployServiceURL>
    <DeployIisAppPath>{masked}</DeployIisAppPath>
    <RemoteSitePhysicalPath />
    <SkipExtraFilesOnServer>False</SkipExtraFilesOnServer>
    <MSDeployPublishMethod>WMSVC</MSDeployPublishMethod>
    <MSDeployUseChecksum>true</MSDeployUseChecksum>
    <EnableMSDeployBackup>True</EnableMSDeployBackup>
    <UserName>{masked}</UserName>
    <_SavePWD>True</_SavePWD>
    <PublishDatabaseSettings>
      <Objects xmlns="">
      </Objects>
    </PublishDatabaseSettings>
    <ExcludeFilesFromDeployment>packages.config;*.bat;*.sln;*.suo,*.p4ignore</ExcludeFilesFromDeployment>
    <ExcludeFoldersFromDeployment>packages;cachefiles;.ebextensions</ExcludeFoldersFromDeployment>
  </PropertyGroup>

  <PropertyGroup>
    <AfterAddIisSettingAndFileContentsToSourceManifest>
      $(AfterAddIisSettingAndFileContentsToSourceManifest);
      AddCustomSkipRules;
    </AfterAddIisSettingAndFileContentsToSourceManifest>
  </PropertyGroup>

  <Target Name="AddCustomSkipRules">
    <Message Text="Adding Custom Skip Rules" />
    <ItemGroup>
      <MsDeploySkipRules Include="SkipcachefilesFolder">
        <objectName>dirPath</objectName>
        <absolutePath>cachefiles</absolutePath>
      </MsDeploySkipRules>
    </ItemGroup>
  </Target>

</Project> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-05T09:34:58.157

这在 vs 2015 中对我有用，网站项目类型：

```
<!--Added inside existing <ProjectGroup> tag-->
<AfterAddIisSettingAndFileContentsToSourceManifest>AddCustomSkipRules</AfterAddIisSettingAndFileContentsToSourceManifest>

<!--Added new ProjectGroup tag inside <Project></Project>-->
<PropertyGroup>
   <WebPublishMethod>MSDeploy</WebPublishMethod>
</PropertyGroup>

<!--Added inside existing <Project> tag at the bottom-->
<Target Name="AddCustomSkipRules">
<Message Text="Adding Custom Skip Rules" />
 <ItemGroup>
  <MsDeploySkipRules Include="SkipConfigFolder">
    <SkipAction></SkipAction>
    <!--<KeyAttribute>Delete</KeyAttribute>-->
    <ObjectName>dirPath</ObjectName>
    <AbsolutePath>App_Data\\Composite\\Logfiles</AbsolutePath>
    <XPath>
    </XPath>
  </MsDeploySkipRules>
 </ItemGroup>
</Target> 
```

# javascript - JavaScript 将参数 this.value 传递给函数

> ID：12576669
> 
> 赞同：1
> 
> 时间：2012-09-25T05:29:08.767
> 
> 标签：javascript

这是我的 javascript 代码，我想将选项的当前选定值传递给我的 js 函数，在此代码中我使用了静态数字 6。

```
<select name='project_name' class='required input_field' id='project_name' onchange="sendRequest('GET','getClientName.jsp?ProjectId=6')">
<option value=''>-- Select --</option>
<option value="1">Project 1</option>
<option value="2">Project 2</option>
<option value="3">Project 3</option>
</select> 
```

帮我解决这个...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T05:33:01.700

将字符串更改`'getClientName.jsp?ProjectId=6'`为

```
'getClientName.jsp?ProjectId=' + this.options[this.selectedIndex].value) 
```

或者

```
'getClientName.jsp?ProjectId=' + this.value) 
```

但我认为第一个更兼容浏览器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T05:35:04.947

```
var selectBox = document.getElementById('project_name');
selectBox.addEventListener('change', function() { 
  sendRequest('GET', 'getClientName.jsp?ProjectId=' + this.value); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T05:45:46.670

它将帮助您获得选定的选项值。试试这个链接[http://jsfiddle.net/xyaaa/9/](http://jsfiddle.net/xyaaa/9/)。

```
<html>
     <head>
         <script>
          function getOption(t){
               var val;
                var options = t.options;
                for(var i=0,len=options.length;i<len;i++){
                     var option = options[i];
                     if(option.selected){
                         val = option.value;
                     }
                }
                return val;
            }
             function  sendRequest(method , url){
                   console.log(url);
             }
    </script>
    </head>
            <body>
                <select onchange="var x=getOption(this);sendRequest('GET','getClientName.jsp?ProjectId='+x)">
                    <option value="1">Project 1</option>
                    <option value="2">Project 2</option>
                    <option value="3">Project 3</option>
                </select>
    </body>
</html> 
```

# knockout.js - KnockoutJS：具有大量可观察对象的虚假回调

> ID：12576673
> 
> 赞同：0
> 
> 时间：2012-09-25T05:29:23.103
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0

我有一个使用 KnockoutJS 的页面，其中有相当多的 observables（这里有大约 35 个相关，总共大约 60 个）。我使用了 KO 映射插件，但我不知道这是否与我的问题有关。

大多数（不是全部）可观察对象都绑定到输入字段。

用户可以将当前输入集保存到命名集，或从先前保存的集重新加载。有 UI 指示当前输入集是来自已保存的集，还是已编辑（未保存）的输入。

为了在编辑任何输入时更新“保存/加载输入”UI（我不在乎哪一个），我订阅了所有相关的“输入”观察值。

这是我的奇怪问题：当订阅的 observables 的数量大约为 25 或更高时，我从调用的深处收到了对回调函数的虚假`ko.applyBindings(...)`调用。

*   当它发生时，只有一个虚假回调
*   被报告的输入通常是我订阅的最后一个。
*   如果我删除了足够多的订阅，以至于我订阅了大约 25 个或更少，虚假回调就会消失。
*   如果我通过了该限制并继续添加订阅，则调用会在我不断添加到列表中时重新出现在不同的字段中。
*   如果我订阅所有输入，那么回调声称是一个`__ko_mapping__`荒谬的回调。

我必须假设我没有正确绑定到订阅，或者 KO 或 KO 映射插件中存在一些错误，导致订阅列表混乱。到目前为止，我无法跟踪问题。

订阅代码大致如下：

```
// markSavedInputsDirty(name) defined elsewhere
function registerCallbacks() {
    var data = viewModel.inputs;
    var member;
    for(member in data) {
        if (data.hasOwnProperty(member) && ko.isObservable(data[member])) {
            if(member /* ... not certain observables which I need to ignore */ ) {
                data[member].subscribe(function() {return markSavedInputsDirty(member)}, data[member]);
            }
        }
    }
} 
```

（注意：上面的代码跟踪调用了哪个成员，但仅作为调试帮助。当我们最初看到问题出现时，代码过去只是对所有可观察对象使用相同的回调函数（没有柯里化））

有没有人见过这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:52:56.830

**解析度：**

正如@MichaelBest 在评论中指出的那样，电话会议的结束`subscribe(...)`被搞砸了。我虽然它会包含`member`调用点的值，但它包含`member`自身（对象，所有调用都相同）。我看到的是`member`来自循环的最终值，这让我误入歧途。我不应该在午夜这样做。

这是该行的正确实现：

```
data[member].subscribe(markSavedInputsDirty.bind(data[member], member)); 
```

一旦我进行了正确的诊断，一切都变得清晰起来：虚假调用来自页面中元素的`value`绑定。`<select>`Knockout 内部需要确保选中`<option>`的 's 值与 's 值完全相同`viewModel`（参见`ensureDropdownSelectionIsConsistentWithModelValue(...)`Knockout 的源代码）。

在我的例子中，可观察值有 3（数字），而选择的值`<option>`——自然——有“3”（字符串）。因此，Knockout 将 viewModel 设置为选项的值，从而触发了通知。

所以，最初的订阅（在我失败的currying尝试之前）是正确的，并且通知是合法的。我只需要交换一些东西，这样我的监控代码在绑定之前不会有任何影响。

# git - 列出具有多个遥控器的所有远程分支

> ID：12576674
> 
> 赞同：1
> 
> 时间：2012-09-25T05:29:29.003
> 
> 标签：git

我们有一个 gitolite 服务器设置并运行以供我们团队使用。我的本地 git 存储库的父级是一个中央 svn 存储库。gitolite 服务器已作为远程服务器添加，我可以从中进行推送和拉取。一切正常，除了我看不到在远程服务器上创建的分支，即使我这样做了

```
git remote update 
```

我检查了 .git/config 文件，发现跟踪设置为

```
[remote "origin"]
    url = git@server:project
    fetch = +refs/heads/master:refs/remotes/origin/master 
```

如果我手动将其更改为

```
[remote "origin"]
    url = git@server:project
    fetch = +refs/heads/*:refs/remotes/origin/* 
```

然后我可以在原点上看到所有远程分支。

我的问题是，当我添加它时，我是否可以要求 git 跟踪远程上的所有内容？如果不是，这些手动更改是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:37:36.073

是的，修改是安全的，您甚至可以添加更多这些规则：请参阅[设置 git 以拉取和推送所有分支](https://stackoverflow.com/questions/1914579/set-up-git-to-pull-and-push-all-branches)（用于标签和推送）。

如果您想从远程跟踪所有分支，您可以参考“将所有[远程 git 分支跟踪为本地分支”问题中的](https://stackoverflow.com/questions/379081/track-all-remote-git-branches-as-local-branches)[这一](https://stackoverflow.com/a/6300386/6309)行。 这将修改或创建每个本地分支的配置，以便它们跟踪其远程副本。

# iphone - 单击按钮播放声音

> ID：12576675
> 
> 赞同：-1
> 
> 时间：2012-09-25T05:29:29.903
> 
> 标签：iphone

我面临一个非常奇怪的问题，我的要求是在单击按钮时播放声音，这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];    
    NSString *path=[[NSBundle mainBundle] pathForResource:@"button-3" ofType:@"mp3"];
    tapSound=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL]];
    [tapSound prepareToPlay];
    tapSound.delegate=self;

    //creating the button in view did load and button is declared in .h
    btn=[UIButton buttonWithType:UIButtonTypeCustom];
    btn.frame=CGRectMake(x, y, 58,58);
    [btn addTarget:self action:@selector(btnClkd:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:btn];
}

//click method
-(void)btnClkd:(UIButton*)sender
{
[tapSound play];
} 
```

但是当我运行代码并单击按钮时，我的应用程序崩溃并出现此错误：“由于未捕获的异常 'NSInvalidArgumentException' 而终止应用程序，原因：'-[UIButton play]: unrecognized selector sent to instance 0x758c790'”

但是，如果我在其他任何地方播放声音而不是单击按钮，那么它会毫无问题地播放。我不知道为什么会这样？请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:34:00.673

做这个：

```
-(void)btnClkd:(UIButton*)sender
{
   NSString *path=[[NSBundle mainBundle] pathForResource:@"button-3" ofType:@"mp3"];
   tapSound = nil;
   tapSound=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL]];
   [tapSound prepareToPlay];
   tapSound.delegate=self;
   [tapSound play];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:47:47.883

试试这个。添加你的 .h 文件

```
 .h file 

         #import <AVFoundation/AVFoundation.h>
            #import <AudioUnit/AudioUnit.h>

        AVAudioPlayer *player1;

        @property(nonatomic ,retain)AVAudioPlayer *player1;

in your .m file 

@synthesize  player1;

    - (void)viewDidLoad
        {
            [super viewDidLoad];    

 NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];    
            NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:@"button-3" ofType:@"mp3"];    
            NSURL *fileURL = [[NSURL alloc] initFileURLWithPath:soundFilePath];    
            AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:fileURL error:nil];    
            [fileURL release]; 
            self.player1 = audioPlayer;    
            [audioPlayer release]; 
           [self.player1 prepareToPlay];
          [self.player1 setDelegate:self];
           [pool release]; 

            //creating the button in view did load and button is declared in .h
            btn=[UIButton buttonWithType:UIButtonTypeCustom];
            btn.frame=CGRectMake(x, y, 58,58);
            [btn addTarget:self action:@selector(btnClkd:) forControlEvents:UIControlEventTouchUpInside];
            [self.view addSubview:btn];
        }

    -(void)btnClkd:(UIButton*)sender {            

            [self.player1 play];

    } 
```

# php - 在 PHP 中将 MYSQL 表数据直接转换为 XML

> ID：12576676
> 
> 赞同：1
> 
> 时间：2012-09-25T05:29:36.307
> 
> 标签：php, mysql, xml

我想现在是否有一些内置函数可以在执行 SELECT 查询后直接从 MYSQL 结果集创建 XML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-24T22:39:14.587

我刚写了这个，然后想 id search 看看有没有其他人写过。它看起来比公认的答案教程更简单。我的 $results 来自 $result = mysql_query($query,$link);

```
$xmlDom = new DOMDocument();
$xmlDom->appendChild($xmlDom->createElement('results'));
$xmlRoot = $xmlDom->documentElement;

while ( $row = mysql_fetch_row($result) ) 
    {
      $xmlRowElementNode = $xmlDom->createElement('row');

      $i=0;
      for($i=0;$i<mysql_num_fields($result);$i++)
      {
          $xmlRowElement = $xmlDom->createElement(mysql_field_name($result,$i));
          $xmlText = $xmlDom->createTextNode($row[$i]);
            $xmlRowElement->appendChild($xmlText);

            $xmlRowElementNode->appendChild($xmlRowElement);
      }

      $xmlRoot->appendChild($xmlRowElementNode);
   }

    header('Content-type:  text/xml');
    echo $xmlDom->saveXML(); 
```

这将以以下形式生成 XML

```
<results>
    <row1>
         <fieldname1>value</fieldname1>
         <fieldname2>value</fieldname2>
         <fieldname3>value</fieldname3>
         <fieldname4...>value</fieldname4...>
    </row1>
    <row2>
         <fieldname1>value</fieldname1>
         <fieldname2>value</fieldname2>
         <fieldname3>value</fieldname3>
         <fieldname4...>value</fieldname4...>
    </row2>
    <row3...>
         <fieldname1>value</fieldname1>
         <fieldname2>value</fieldname2>
         <fieldname3>value</fieldname3>
         <fieldname4...>value</fieldname4...>
    </row3...>
</results> 
```

对于任何 SELECT 查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T05:37:33.937

没有内置函数可以在执行 SELECT 查询后直接从 MYSQL 结果集创建 XML。

你必须为此编写代码

一些不错的教程是这样的..

[http://www.codediesel.com/php/converting-mysql-queries-to-xml/](http://www.codediesel.com/php/converting-mysql-queries-to-xml/)

[http://www.mightywebdeveloper.com/coding/mysql-to-xml-php/](http://www.mightywebdeveloper.com/coding/mysql-to-xml-php/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T05:32:22.833

通常，您的 MySQL 结果将作为数组或对象返回，然后您可以将其转换为 XML 或其他格式。您可以使用 SimpleXML，此处已解释：[如何将数组转换为 SimpleXML](https://stackoverflow.com/questions/1397036/how-to-convert-array-to-simplexml)

# mkmapview - iOS6 - MKMapView 当前位置蓝点

> ID：12576678
> 
> 赞同：1
> 
> 时间：2012-09-25T05:29:49.013
> 
> 标签：mkmapview, ios6, currentlocation

在 iOS6（谷歌地图）中，我没有看到应该用蓝点标记的当前位置。

当我在 ios5.1 和以前的版本中运行相同的代码时，我在当前位置标记了蓝点。

当我在寻找解决方案时，我发现需要添加以下行以获得蓝点，我正在使用相同的，

```
mapInstance.showsUserLocation = YES; 
```

但我仍然没有得到蓝点。我的代码中有什么需要添加的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:31:13.030

尝试以下操作；切换到 Maps Attributes 检查器并单击 Shows User Location 复选框。

# javascript - 如何注销 Facebook - 在 Rails 应用程序中使用代码（Ruby on Rails Omniauth）

> ID：12576680
> 
> 赞同：11
> 
> 时间：2012-09-25T05:29:51.930
> 
> 标签：javascript, jquery, ruby-on-rails, session, omniauth

我试图通过 rails 中的 omniauth 从我的页面添加多个 twitter 和 facebook 帐户。

Twitter使用`force_login`参数工作正常。

但是，facebook 不支持这一点。

我只能使用添加一个 facebook 帐户`/auth/facebook`。在我尝试使用`/auth/facebook`路径添加新的 facebook 帐户后，它只返回到我的主页。

如果我在同一浏览器中浏览 www.facebook.com，则登录页面不会出现。最后添加的 facebook 帐户页面正在打开。

当我在浏览器中从 Facebook 注销时，我尝试了`/auth/facebook`路径。它工作正常。

所以，在我点击在我的页面中添加 facebook 链接之前，需要注销已经在浏览器选项卡中打开的 facebook 帐户。

任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T23:45:46.577

默认情况下，您不能在一个浏览器中登录多个 facebook 帐户，除非您有一种方法可以触发浏览器（如私人浏览-mozilla、隐身 Window-chrome ）让您的用户登录。网站使用 cookie 来跟踪其状态。

但是，facebook 确实提供了 auth_type=reauthenticate。文档在这里。 [https://developers.facebook.com/docs/howtos/login/client-side-re-auth/](https://developers.facebook.com/docs/howtos/login/client-side-re-auth/)

如果我错了，请纠正我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T13:02:57.860

观看此截屏视频，它有灵魂

> [http://railscasts.com/episodes/360-facebook-authentication](http://railscasts.com/episodes/360-facebook-authentication)

# html - 将默认光标样式更改为自定义光标

> ID：12576682
> 
> 赞同：0
> 
> 时间：2012-09-25T05:29:53.757
> 
> 标签：html, css

我正在制作一个网络应用程序。在我的 Web 应用程序中，我想将默认光标更改为自定义光标。为此，我在我的 XHTML 页面的 head 元素中应用了以下代码。

```
<html>
<head>
    <style type="text/css">
        body{
            cursor: url('images/normal.ani')
        }
    </style>
</head> 
<body>
    <p> Hello World</p> 
</body> 
```

现在，此代码工作正常，并将默认光标更改为我在 Internet Explorer 7.0 中的自定义光标。但是相同的代码在 Mozilla Firefox (15.0.1) 和 Google Chrome(21.0) 中不起作用。请帮帮我....提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:39:44.810

Firefox 需要第二个非 url 参数，例如

```
 cursor: url('images/normal.ani'), auto; 
```

[Quirksmode CSS2 - Cursor Styles](http://www.quirksmode.org/css/cursor.html)有一个很好的参考

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:43:26.063

我相信您只能在 IE 中使用文件类型 .ani 和动画光标 (.ani,.gif)。

Mozilla 开发人员关于光标 url 的页面

[https://developer.mozilla.org/en-US/docs/CSS/Using_URL_values_for_the_cursor_property](https://developer.mozilla.org/en-US/docs/CSS/Using_URL_values_for_the_cursor_property)

如果您对解决方法感兴趣，请在此处发布（虽然很丑）

[http://ye5.blogspot.co.nz/2011/01/animated-mouse-cursor-on-mozilla.html](http://ye5.blogspot.co.nz/2011/01/animated-mouse-cursor-on-mozilla.html)

# jsf-2 - EJB 方法不是从构造函数调用

> ID：12576689
> 
> 赞同：2
> 
> 时间：2012-09-25T05:30:27.927
> 
> 标签：jsf-2, ejb-3.0

我创建了一个ejb

```
@Stateless
@LocalBean   
public class BasitBean {

    public String helloBasit() {

        return "Basit";

    } //end of helloBasit()

} //end of class BasitBean 
```

我是从 JSF 调用它的

```
<h:body>

    <h:outputLabel value="#{helloBasit.callBasit()}" />

</h:body>

@ManagedBean
@SessionScoped
public class HelloBasit {

    @EJB
    private BasitBean basitBean;

    /** Creates a new instance of HelloBasit */
    public HelloBasit() {         

    }

    public String callBasit() {

        return basitBean.helloBasit();

    } //end of callBasit()

} //end of class HelloBasit 
```

这段代码工作正常。但是当我像这样更改代码时

```
<h:body>
    <h:outputLabel value="#{helloBasit.label}" />        
</h:body>

@ManagedBean
@SessionScoped
public class HelloBasit {

    @EJB
    private BasitBean basitBean;
    String label;

    /** Creates a new instance of HelloBasit */
    public HelloBasit() {

        System.out.println();
        String label = basitBean.helloBasit();
        System.out.println(label);

    }

    public BasitBean getBasitBean() {
        return basitBean;
    }

    public void setBasitBean(BasitBean basitBean) {
        this.basitBean = basitBean;
    }

    public String getLabel() {
        return label;
    }

    public void setLabel(String label) {
        this.label = label;
    }

} //end of class HelloBasit 
```

然后我得到了例外

```
SEVERE: Error Rendering View[/index.xhtml]
com.sun.faces.mgbean.ManagedBeanCreationException: Cant instantiate class: pk.mazars.basitMahmood.HelloBasit.
 at com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:193)
 at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:102)
 ...... 
```

为什么我得到这个例外？我理解的流程应该是当我的页面遇到`#{helloBasit.label}`然后我的构造函数被调用，实例变量被初始化，将bean实例注入basitBean，然后bean方法应该调用。但是在这种情况下，我在 bean 实例中得到了 null，为什么？为什么以前的代码可以工作，但不能？如何从构造函数调用 bean？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T05:46:55.030

尝试将构造函数的内容移动到后构造函数中...

像这样

```
@PostConstruct
private void init() {
    System.out.println();
    String label = basitBean.helloBasit();
    System.out.println(label);
} 
```

因为只有在托管 bean 启动后才应该注入 ejb bean

在`@PostConstruct`构造函数之后运行（在托管 bean 本身由 JSF 创建之后），然后才将 EJB 注入到 bean 中并且可以访问......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:10:40.363

您的想法是正确的，但我看到一些可能会解决的问题。

*   `@LocalBean`如果您的 EJB 不直接实现接口，则不需要注释。在这种情况下，无论有没有`@LocalBean`注释，您都具有相同的效果。如果你想让它明确，你可以离开它。看到[这个](https://stackoverflow.com/questions/10889563/ejb-3-1-localbean-vs-no-annotation)。

*   确保两者都从包中`@ManagedBean`导入`@SessionScoped`。`javax.faces.bean`

请参阅此工作示例：

***EJB***

```
import javax.ejb.Stateless;

@Stateless
public class PersonService { 

    public String getName() {
        return "Cloud Strife";
    }
} 
```

***托管豆***

```
import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean
@SessionScoped
public class PersonBean {

    @EJB
    private PersonService ps;

    private String name;

    @PostConstruct
    public void init() {
        name = ps.getName();
    }

    public String getName() {    
        return name;
    }
} 
```

***XHTML 页面***

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">

    <f:view contentType="text/html">
        <h:head>
            <title>Test</title>
        </h:head>
        <h:body>
            <h1>Welcome, #{personBean.name}</h1>
        </h:body>
    </f:view>

</html> 
```

如果你的值应该只加载一次，比如在你的 bean 构造中，总是更喜欢带有`@PostConstruct`注释的方法而不是构造函数。

此外，为了在渲染视图之前调用 bean 方法，您可以使用`f:event`标签，例如：

```
<f:event type="preRenderView" listener="#{personBean.init}" /> 
```

我希望它有帮助！

# android - 无法从模拟器传输文件 > 2 MB

> ID：12576691
> 
> 赞同：3
> 
> 时间：2012-09-25T05:30:35.533
> 
> 标签：android, http, android-emulator

我正在尝试将文件从我的 android 模拟器传输到我的服务器。我观察到大小约为 2MB 或更大的文件没有被传输。

是不是因为我提供给模拟器的内部存储器。如果是，我应该更改传输文件的方式吗？我的传输方法类似于这里唯一的： [Android:How to upload .mp3 file to http server?](https://stackoverflow.com/questions/4966910/androidhow-to-upload-mp3-file-to-http-server)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:23:26.240

是的，我找到了答案。我不得不更改 PHP ini 文件并将限制增加到我想要的大小:)

所以模拟器本身没有问题，这是我的网络服务器端的问题。

# ios - 动画 For 循环图像不显示

> ID：12576693
> 
> 赞同：2
> 
> 时间：2012-09-25T05:31:05.270
> 
> 标签：ios, xcode, loops, for-loop, jquery-animate

我从网上下载了动画篝火。我的图像序列是“*.png”，我无法让它工作。它一直循环到最后。它不显示图像。为什么我不能为这段代码制作动画？我做错了什么？

```
 UIImageView* campFireView = [[UIImageView alloc] initWithFrame:screenx.frame];
        int j;
        int i;

        for (j = 1, i = 0; i < 28; i =1)
        {
            NSLog( @"%i.png", i);
            campFireView.animationImages = [NSArray arrayWithObjects:
                                            [UIImage imageNamed:[NSString stringWithFormat:@"%i.png",i]], nil];
        }
        // all frames will execute in 1.75 seconds
        campFireView.animationDuration = .15;
        // repeat the annimation forever
        campFireView.animationRepeatCount = 1;
        // start animatinganimationRepeatCount:1];

        [campFireView startAnimating];

        // add the animation view to the main window 
        [self.view addSubview:campFireView]; 
        [campFireView release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:49:22.763

每次调用：

```
 campFireView.animationImages = [NSArray arrayWithObjects:
                                        [UIImage imageNamed:[NSString stringWithFormat:@"%i.png",i]], nil]; 
```

您正在将 设置为`animationImages`单项数组。您可能打算这样做：

```
 NSMutableArray *animationImages = [NSMutableArray array];

    for (i = 0; i < 28; i++)
    {
        [animationImages addObject:[UIImage imageNamed:[NSString stringWithFormat:@"%i.png",i]]];
    }

    campfireView.animationImages = animationImages; 
```

另外 - 我不知道你的`for`循环发生了什么，但我修复了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:51:28.050

当您循环时，每次向动画图像提供一张图像

```
NSMutableArray *arrImgs = [NSMutableArray array];

for (i = 0; i < 28; i++)
    {
        [arrImgs addObject:[UIImage imageNamed:[NSString stringWithFormat:@"%i.png",i]]];
    }

campfireView.animationImages  = [NSArray arrayWithArray:arrImgs]; 
```

# c# - 如何将图像读取到流

> ID：12576698
> 
> 赞同：0
> 
> 时间：2012-09-25T05:31:22.560
> 
> 标签：c#, asp.net, image-processing

> **可能重复：**
> [System.Drawing.Image 流式传输 C#](https://stackoverflow.com/questions/1668469/system-drawing-image-to-stream-c-sharp)

```
 public static void SendHTMLEmail(Page p, string to, string subject, string content, System.Drawing.Image img)
        {
            MailMessage message = new MailMessage(); 
            message.IsBodyHtml = true;
            message.From = new MailAddress("myemail@gmail.com");

            message.To.Add(new MailAddress(to));

            //message.CC.Add(new MailAddress("carboncopy@foo.bar.com"));
            message.Subject = subject;
            message.Body = content;

            AlternateView htmlBody = AlternateView.CreateAlternateViewFromString(content, Encoding.UTF8, "text/html");

            Stream s = new MemoryStream();

            //s.re

            LinkedResource pic = img; (Cannot assign an image to pic) 
```

由于图片需要流。我不知道如何将图像读取到流中。

请帮忙。

# seo - 如何使用谷歌分析跟踪子域的数据

> ID：12576699
> 
> 赞同：0
> 
> 时间：2012-09-25T05:31:52.387
> 
> 标签：seo

[我在这里](http://www.queenofthedesert.ca/)有我的网站，我想跟踪它的访问，但是我现在在那里的代码不起作用（我已经成功地“跟踪”了几天，但没有显示任何数据。

我购买了一个域名并将其指向我拥有的托管帐户的子域。我遵循教程并阅读文章，但几乎所有内容都已过时，甚至无法正常工作。为具有谷歌分析的新手可以遵循或理解的子域设置谷歌分析的好方法是什么？

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32557751-2']);
  _gaq.push(['_setDomainName', 'priscilla.ambergoodwin.com']);
  _gaq.push(['_addIgnoredRef', 'ambergoodwin.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

我有我的网站帐户，然后我在其中添加了一个名为“子域跟踪”的配置文件并给它一个过滤器。以下是我的帐户和个人资料以及过滤器设置的图像。

![在此处输入图像描述](../Images/43461cfbb275399a7a37236ab86ae5be.png)

![在此处输入图像描述](../Images/6a69ceee6d57c66bba2665aaae0e21a1.png)

所以我只是不明白我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:31:49.963

跟踪子域的最佳方法是在此帐户下添加新网站并仅为此子域生成新的分析代码。只需将新创建的代码插入该子域的所有页面，它肯定会开始正常工作。

关于同一账户；这将是一个复杂的过程，您必须遵循此处提供的不同步骤[https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:17:39.340

您在此处发布之前尝试过谷歌搜索吗？有很多关于如何跟踪子域的资源。这是一个：[http ://theanalyticsguru.wordpress.com/2008/03/01/tracking-subdomains-within-google-analytics/](http://theanalyticsguru.wordpress.com/2008/03/01/tracking-subdomains-within-google-analytics/)

简而言之 - 它不是您网站中的过滤器，它是一个全新的网站。

# bash - Shellscript 反斜杠和间隔参数

> ID：12576700
> 
> 赞同：0
> 
> 时间：2012-09-25T05:31:55.777
> 
> 标签：bash, shell, ubuntu

所以，我想要做的是，如果用户没有将路径作为参数传递给脚本，脚本将使用当前目录。如果通过了路径，请改用它。

```
instdir="$(pwd)/"
if [ -n "$1" ] ; then
  instdir="$1"
fi
cd $instdir 
```

错误

`./script.sh /path/to/a\ folder/`

*输出*：`cd: /path/to/a: File or folder not found`

`./script.sh "/path/to/a\ folder/"`

*输出*：`cd: /path/to/a\: File or folder not found`

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:36:14.373

更改`cd $instdir`为 `cd "$instdir"`应该可以解决该特定问题。如果没有引号，`a`和的`folder`部分将`a folder`被视为单独的参数。

请注意，不要使用三行`if`语句来设置 set `instdir`，而是编写：

```
[ "$1" ] && instdir="$1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:40:03.400

如果您将带有空格的路径作为参数传递，则会导致问题。如果不是现在，那么在未来。我建议您执行以下操作（前提是路径是唯一的参数）：

```
instdir="$(pwd)"

if [[ -d "$@" ]]; then
  instdir="$@"  
fi

cd "$instdir" 
```

# java - 如何以编程方式知道谁（其他 java 文件/类）正在使用我的 java 类？

> ID：12576701
> 
> 赞同：1
> 
> 时间：2012-09-25T05:31:56.983
> 
> 标签：java

我想获取依赖于我的类的所有 java 类的列表。是否有公开预期 API 的库？API 应该使用我的 java 类返回 java 类的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:42:20.637

您可能会使用[反射 API](http://docs.oracle.com/javase/tutorial/reflect/index.html) ..

它们是专门针对此类问题而设计的。它们允许在运行时获取有关类的信息。您可以获得：-

*   所有的方法
*   所有派生类
*   所有变量。
*   还有更多信息..

你可以看到[Class.getClasses()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getClasses%28%29)和[Class.getDeclaredClasses()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getDeclaredClasses%28%29)

查看[更多示例](http://tutorials.jenkov.com/java-reflection/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:40:46.290

反射可以告诉你一个特定的类是否扩展了你的类，使用你的类作为一个字段，把你的类作为参数，或者从一个方法中返回你的类。但是，如果您的类的使用受方法限制，那么反射将不起作用。

# c# - 在c#winform中用0（零）填充字符串的空字段？

> ID：12576702
> 
> 赞同：0
> 
> 时间：2012-09-25T05:32:00.893
> 
> 标签：c#, winforms, string

我有一个 winform，其中有一个最多可容纳 14 个数字的文本框。现在，如果用户输入少于 14，我必须用 0 填充其余字段。例如。如果用户有 10 个数字，我必须再包含 4 个 0 才能使其成为 14。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T05:35:31.913

将文本框的属性更改[`MaxLength`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.maxlength.aspx)为 14。获得[`Text`](http://msdn.microsoft.com/en-us/library/k6w057xy.aspx)属性后，使用类上的[`PadLeft`](http://msdn.microsoft.com/en-us/library/92h5dc07.aspx)、 或[`PadRight`](http://msdn.microsoft.com/en-us/library/36f2hz3a.aspx)方法[`String`](http://msdn.microsoft.com/en-us/library/s1wwdcbf.aspx)。

**例子**

```
void textBox_LostFocus(object sender, EventArgs e)
{
    var text = this.textBox.Text;
    text = text.PadLeft(14, '0');

    this.textBox.Text = text;
} 
```

**结果**

```
var value = "abcd";
var leftPadded = value.PadLeft(14, '0'); // <- "0000000000abcd"
var rightPadded = value.PadRight(14, '0'); // <- "abcd0000000000" 
```

您可能还想考虑使用[`MaskedTextBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:48:21.157

如果您使用数据绑定，并且只想在文本框的显示中添加数字，而不是在基础数据源中，则可以在创建自己的文本框衍生产品时使用标准 .net 格式，如此[处](https://stackoverflow.com/questions/7258562/winforms-format-textbox-to-currency)所述。可能会派上用场。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T05:35:11.090

```
textbox.TextChanged += new EventHandler( textbox_TextChanged );

private textbox_TextChanged(Object sender, EventArgs e) {
    textbox.Text = textbox.Text.PadLeft(14, '0');
} 
```

# cocoa - Frames and Bounds (调整大小) - Cocoa

> ID：12576708
> 
> 赞同：0
> 
> 时间：2012-09-25T05:32:29.703
> 
> 标签：cocoa, resize

我遇到了调整大小的问题，我认为这是因为我对框架和边界的了解不够。

我在滚动视图中有一个自定义视图，它填充了窗口。当我调整窗口大小时，我希望自定义视图保持原样，在鼠标拖动的地方慢慢被窗口覆盖/揭开。

真正发生的是自定义视图保持锚定在滚动视图的左下角，因此如果我使窗口变短，自定义视图会向上滑动以保持其左下角接触滚动视图角。

如何在不移动特定视图的情况下调整窗口大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:47:53.377

这`frame`是视图将在其父级中占据的区域。这`bounds`是将在其框架内绘制的视图部分。因此，在 99.99% 的情况下，两者完全不同，它们相同`size`，但边界的原点为零，而框架的原点为非零。

也就是说，这听起来更像是您对坐标系感到困惑。OS X 遵循坐标纸约定，原点位于屏幕的左下边缘。因此，您的滚动视图的原点位于窗口的左下角，这导致该点成为您调整大小时的锚点。滚动视图的框架和边界的大小会发生变化，但原点不会。

假设您希望左上角而不是左下角（？），可能最简单的事情是子类化`NSScrollView`并覆盖`- setFrame:`以进行适当的算术 - 获取 current `documentVisibleRect`，计算左上角的内容，允许`super`设置然后`scrollToPoint`适当地调用新框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T22:26:26.427

如果要将文档视图固定在左上角，可以`isFlipped`在文档视图中覆盖以 return `YES`。在这种情况下，y 坐标将被翻转，您可能需要执行一些计算调整。

```
- (BOOL)isFlipped
{
    return YES;
} 
```

# cakephp-2.0 - 如何在cakephp的多选列表框中设置选择

> ID：12576717
> 
> 赞同：1
> 
> 时间：2012-09-25T05:33:53.730
> 
> 标签：cakephp-2.0, multi-select

我想将多选设置为我的多列表框。

我的视图页面中有两个结果。

```
$inr1 = 0;
$arr1 = array();
$str_arr = '';
foreach ($result as $rows){
    $inr1 = $rows['Employees']['employee_id'];
    $arr1[$inr1] = $rows['Employees']['first_name'].' '.$rows['Employees']['last_name'];
    $str_arr = $str_arr.$inr1.',';
}
$str_arr = substr($str_arr,0,-1);
//print_r($arr1);

$inr = 0;
$arr = array();
foreach ($options as $option){
    $inr = $option['Employee']['employee_id'];
    $arr[$inr] = $option['Employee']['first_name'].' '.$option['Employee']['last_name'];
}

//print_r($arr);

echo $this->Form->input('emp_id_one', array(    'options' => array( $arr),
        'empty' => '(choose one)',
        'div'=>'formfield',
        'error' => array(   'wrap' => 'div',
                            'class' => 'formerror'
                        ),
        'label' => 'Team Members',
        'type' => 'select', 'multiple' => true,
        'selected' => $arr1,
        'style' => 'width:210px; height:125px;',

)); 
```

但是列表框中的值`$arr1`没有被选中。

具有选定的`$arr1`值。

`$arr`有列表的选项。

问题是选择不起作用..没有选择...

我怎样才能做到这一点？

如果我的代码有任何问题..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:15:42.243

最后我通过链接一些代码解决了我的问题：

在`$str_arr = substr($str_arr,0,-1);`'. 那是....

```
$str_arr = substr($str_arr,0,-1);
    $sel = explode(',',$str_arr); 
```

然后像这样更改变量的名称：

```
echo $this->Form->input('emp_id_one', array(    'options' => array( $arr),
        'empty' => '(choose one)',
        'div'=>'formfield',
        'error' => array(   'wrap' => 'div',
                            'class' => 'formerror'
                        ),
        'label' => 'Team Members',
        'type' => 'select', 'multiple' => true,
        'selected' => $sel,
        'style' => 'width:210px; height:125px;',

    )); 
```

现在在`$sel`多列表中选择了值

# python - 文件名与文件对象作为函数参数

> ID：12576724
> 
> 赞同：14
> 
> 时间：2012-09-25T05:34:48.330
> 
> 标签：python, unit-testing, python-3.x, arguments, software-design

如果一个函数将文本文件的名称作为输入，我可以将其重构为采用文件对象（我称之为“流”；有更好的词吗？）。优点是显而易见的 - 将流作为参数的函数是：

*   编写单元测试要容易得多，因为我不需要仅为测试创建临时文件
*   更灵活，因为我可以在我以某种方式已经在变量中拥有文件内容的情况下使用它

流有什么缺点吗？或者我应该总是将函数从文件名参数重构为流参数（当然，假设文件是​​纯文本的）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T21:50:34.203

...这是`xml.etree.ElementTree`模块实现该[`parse`](https://docs.python.org/2/library/xml.etree.elementtree.html#xml.etree.ElementTree.parse)功能的方式：

```
def parse(self, source, parser=None):
    close_source = False
    if not hasattr(source, "read"):
        source = open(source, "rb")
        close_source = True
    ... 
```

由于文件名是一个字符串，它没有`read()`方法（这里检查该名称的任何属性）；但是，打开的文件有它。这四行代码使其余代码通用。唯一的麻烦是您必须记住是否关闭文件对象（这里命名为`source`）。如果它在`open`里面，那么它必须被关闭。否则，不得关闭。

实际上，文件与 sreams 略有不同。流可能是无限的，而文件通常不是（除非某些设备像文件一样被映射）。处理时的重要区别是，您永远不能一次将流读入内存。您必须按块处理它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T05:38:38.540

python 标准库中有许多函数可以同时接受——作为文件名或打开文件对象的字符串（我假设这就是你所说的“流”）。创建一个装饰器真的不难，你可以用它来让你的函数接受任何一个。

使用“流”的一个严重缺点是你将它传递给你的函数，然后你的函数从中读取——有效地改变它的状态。根据您的程序，如果有必要，恢复该状态可能会很麻烦。（例如，您可能需要乱扔代码，`f.tell()`然后`f.seek()`.）

# c# - 如何在 WP7 中保存/加载自定义类类型的 ObservableCollection

> ID：12576725
> 
> 赞同：1
> 
> 时间：2012-09-25T05:34:49.590
> 
> 标签：c#, windows-phone-7, isolatedstorage

我创建了一个自定义类，命名为`BrowserItem`我在我的应用程序中使用，其中包含很多值。我在 ObservableCollection 中使用此类来存储项目集合。出于某种原因，尽管此实现在我的应用程序运行时有效，但当应用程序关闭然后重新打开时，我无法正确地使这些值保持不变。我不确定如何正确保存然后重新加载 BrowserItem 类型的 ObservableCollection。

浏览器项.cs

```
[DataContract]
public class BrowserItem

{
    [DataMember]
    public FullWebBrowser Browser
    {
        get;
        set;
    }
    [DataMember]
    public string Url
    {
        get;
        set;
    }
    [DataMember]
    public BitmapImage ImageUri
    {
        get;
        set;
    }
    [DataMember]
    public string Title
    {
        get;
        set;
    }
    [DataMember]
    public string Notification
    {
        get;
        set;
    }
    [DataMember]
    public bool DisplayNotification
    {
        get
        {
            return !string.IsNullOrEmpty(this.Notification);
        }
    }
    [DataMember]
    public string Message
    {
        get;
        set;
    }
    [DataMember]
    public string GroupTag
    {
        get;
        set;
    }
    [DataMember]
    //for translation purposes (bound to HubTile Title on MainPage) 
    public string TileName
    {
        get;
        set;
    }
} 
```

Setting.cs（我的类从隔离存储中保存和加载）

```
public class Setting<T>
{
    string name;
    T value;
    T defaultValue;
    bool hasValue;

    public Setting(string name, T defaultValue)
    {
        this.name = name;
        this.defaultValue = defaultValue;
    }

    public T Value
    {
        get
        {
            //Check for the cached value
            if (!this.hasValue)
            {
                //Try to get the value from Isolated Storage
                if (!IsolatedStorageSettings.ApplicationSettings.TryGetValue(this.name, out this.value))
                {
                    //It hasn't been set yet
                    this.value = this.defaultValue;
                    IsolatedStorageSettings.ApplicationSettings[this.name] = this.value;
                }
                this.hasValue = true;
            }
            return this.value;
        }

        set
        {
            //Save the value to Isolated Storage
            IsolatedStorageSettings.ApplicationSettings[this.name] = value;
            this.value = value;
            this.hasValue = true;
        }
    }

    public T DefaultValue
    {
        get { return this.defaultValue; }
    }

    // Clear cached value
    public void ForceRefresh()
    {
        this.hasValue = false;
    }
} 
```

Settings.cs（初始化 ObservableCollection 的地方）

```
public static Setting<ObservableCollection<BrowserItem>> BrowserList = new Setting<ObservableCollection<BrowserItem>>("Browsers", new ObservableCollection<BrowserItem>());
    public static Setting<string> InitialUri = new Setting<string>("InitialUri", "http://www.bing.com"); 
```

在上面的类中， InitialUri 在保存新值然后稍后使用时工作正常，但我相信 ObservableCollection 的问题是它的类型是`BrowserItem`. 我不知道如何制作它，以便`BrowserItem`能够在 ObservableCollection 中使用来保存和检索添加到 ObservableCollection 的项目。添加项目的示例如下

TabsPage.xaml.cs

```
void addNew_Click(object sender, EventArgs e)
    {
        BitmapImage newTileImage = new BitmapImage();

        var newItem = new BrowserItem() { Browser = new FullWebBrowser(), Url = "http://www.bing.com", ImageUri = newTileImage, Title = "new", /*Notification = "",*/ Message = "new browser", GroupTag = "TileGroup", TileName = "new" };

        newItem.Browser.InitialUri = Settings.InitialUri.Value;
        Settings.BrowserList.Value.Add(newItem);
    } 
```

ObservableCollection 中的项目可以在应用程序处于活动状态时使用，但不能在应用程序关闭后激活后使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:22:52.100

我在早期的项目中也有同样的要求

创建一个类来保存和读取 ObservableCollection 中的数据

```
public class SerializeHelper
    {

        public static void SaveData<T>(string fileName, T dataToSave)
        {
            using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication())
            {
                try
                {

                    if (store.FileExists(fileName))
                    {
                        store.DeleteFile(fileName);
                    }

                    using (IsolatedStorageFileStream stream = store.OpenFile(fileName, System.IO.FileMode.Create, System.IO.FileAccess.Write))
                    {
                        var serializer = new DataContractSerializer(typeof(T));
                        serializer.WriteObject(stream, dataToSave);
                    }
                }
                catch (Exception e)
                {
                    //MessageBox.Show(e.Message);
                    return;
                }

            }
        }

        public static T ReadData<T>(string fileName)
        {
            using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication())
            {

                if (store.FileExists(fileName))
                {
                    using (IsolatedStorageFileStream stream = store.OpenFile(fileName, FileMode.OpenOrCreate, FileAccess.Read))
                    {

                        try
                        {
                            var serializer = new DataContractSerializer(typeof(T));
                            return (T)serializer.ReadObject(stream);

                        }
                        catch (Exception)
                        {
                            return default(T);
                        }
                    }
                }
                return default(T);
            }
        }

    } 
```

## 在 ISO 存储中保存数据

```
public ObservableCollection<CustomClass> AllEvents = new public ObservableCollection<CustomClass>();

//AllEvents.Add(customclassref1);
//AllEvents.Add(customclassref2);
//AllEvents.Add(customclassref3);
SerializeHelper.SaveData<ObservableCollection<CustomClass>>("AllEvents", AllEvents); 
```

## 从 ISO 存储中检索数据

```
AllEvents = (ObservableCollection<CustomClass>)SerializeHelper.ReadData<ObservableCollection<CustomClass>>("AllEvents"); 
```

# java - UMLGraph - 如何为 Java 项目生成类图？

> ID：12576726
> 
> 赞同：2
> 
> 时间：2012-09-25T05:35:01.013
> 
> 标签：java, uml

使用 UMLGraph 我们可以为 java 文件生成类图。例如）

```
java -classpath '/usr/share/lib/UmlGraph.jar:/opt/Java-1.6/lib/tools.jar' \
org.umlgraph.doclet.UmlGraph -package Test.java 
```

有没有办法使用 UMLGraph 为整个复杂的 java 项目或单个 jar 文件生成类图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:40:30.187

不建议为整个项目使用单个类图。我认为创建视图更合适。

我喜欢使用我的类图实时导航来深入研究项目，甚至从包到分类器和方法的多个项目。我可以创建数百个实时视图。无需保存所有这些，只需擦除、移动、删除等...直接在图表中或从包资源管理器甚至模型中拖动类。使用实时视图时非常酷的 UML。

它记得我可以在其中提取业务信息的 Hyperion Olap 多维数据集，除了使用 UML 提取对象 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:32:20.647

根据文档，您可以为单个类或包含所有类的单个包生成图表：[http ://www.umlgraph.org/doc/cd-umldoc.html](http://www.umlgraph.org/doc/cd-umldoc.html)

也许这是您将整个项目展平（将所有文件复制到单个文件夹）并为此“包”生成图表的解决方案？

顺便说一句：对于一个“复杂”的项目，拥有一个单一的类图很可能不是很有帮助。

# python - 在 Python 中的 sorted() 函数中跳过换行符、小写和大写？

> ID：12576734
> 
> 赞同：0
> 
> 时间：2012-09-25T05:35:31.613
> 
> 标签：python, list

我有一个需要按字母顺序排列的列表（忽略大小写）并用空格和“+”分隔列表中的每个元素。这是我的代码：

```
#!/usr/bin/python3.2

fruit = ['A', 'banana', 'Watermelon', 'mango'] #list containing fruits name

for diet in sorted(fruit):
    print(diet) 
```

这会将每个水果打印在一行中。我希望我的结果是这样的：

```
A + banana + mango + Watermelon 
```

我怎样才能达到这个结果？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T05:36:53.567

```
In [10]: fruit = ['A', 'banana', 'Watermelon', 'mango']

In [11]: ' + '.join(sorted(fruit, key=str.lower))
Out[11]: 'A + banana + mango + Watermelon' 
```

有关更多详细信息，请访问：

[http://docs.python.org/library/stdtypes.html#str.join](http://docs.python.org/library/stdtypes.html#str.join)

[http://wiki.python.org/moin/HowTo/Sorting/](http://wiki.python.org/moin/HowTo/Sorting/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T05:37:09.530

```
print(" + ".join(sorted(fruit, key=str.lower))) 
```

# r - 矩阵的 bigmemory 和 rownames/dimnames

> ID：12576735
> 
> 赞同：1
> 
> 时间：2012-09-25T05:35:45.003
> 
> 标签：r, memory-management, matrix, dataframe

我有一些标准的、干净`csv`的文件，我`.bin`用 bigmemory 制作了一个文件。

```
require(bigmemory)
options(bigmemory.allow.dimnames=TRUE)
DR1 <- read.big.matrix("aord_0900_ret_d.csv",type="double",backingfile="DR1.bin",descriptorfile="DR1.desc",has.row.names=TRUE,header=TRUE) 
```

在这里，`rownames(DR1)`将返回行名，`dimnames(DR1)[[1]]`. 正是我想要的！！

但是，如果我退出`RGui.exe`并重新打开它，则输入以下内容：

```
require(bigmemory)
options(bigmemory.allow.dimnames=TRUE)
DR1 <- attach.big.matrix("DR1.desc") 
```

`rownames(DR1)`并且`dimnames(DR1)[[1]]`都会给我`NULL`。但是，`DR1`除了删除行名之外，这是完全正确的。甚至`colnames(DR1)`工作。

* * *

我想要`rownames(DR1)`工作。

# java - android中的直接代码与库

> ID：12576737
> 
> 赞同：4
> 
> 时间：2012-09-25T05:35:52.173
> 
> 标签：java, android, static-libraries

直接编码与库

与直接编写代码而不是调用库的情况相比，使用具有相同代码和功能的库会增加应用程序的大小

例如，考虑获取经度和纬度值的代码。如果我将它放在一个库中并将该库附加到项目并调用其中存在的方法来获取值而不是直接编写代码，那么这样做会增加应用程序的大小。如果这样做不会改变大小，那么制作这样的库并在需要时将它们附加到项目中会很有用。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T10:01:21.510

My understanding is that if you use Proguard as recommended by Google theoretically they should be the same sized APK. Proguard should only use the classes from the libraries which are referenced to build the APK.

On top of that Proguard has other functionality to shrink the APK size. It is not without it's drawbacks though.

[http://developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)

Note: Proguard is only used once you are ready for production.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:54:09.660

虽然这个问题需要更多的阐述，而且这样的比较不会给你 100% 的答案，但通常使用这些库会给你一个更小的应用程序占用空间。

没有 OOP 的纯 C 库应该给出最好的结果。

# mysql - 如何在单个mysql表中添加总计的总和

> ID：12576742
> 
> 赞同：0
> 
> 时间：2012-09-25T05:36:13.500
> 
> 标签：mysql, database

我有以下 MySQL 表：

*   Site_ID
    *   序列号
    *   cost_per_month
    *   cost_per_unit_A
    *   cost_per_unit_B
    *   开放单元_A
    *   关闭_unit_A
    *   开放单元B
    *   关闭_unit_B

    我执行以下 MySQL 查询：

    ```
    select 
    SITE_ID as 'Site', Serial Number,cost_per_month
    cost_per_unit_A, cost_per_unit_B,opening_unit_A, closing_unit_A, opening_unit_B, closing_unit_B
    format(cost_per_month+(closing_unit_A-opening_unit_A)*cost_per_unit_A+(closing_unit_B-opening_unit_B)*cost_per_unit_A,2) as 'Total Vat Ex',
    format((cost_per_month+(closing_unit_A-opening_unit_A)*cost_per_unit_A+(closing_unit_B-opening_unit_B)*cost_per_unit_A,*0.14,2)) as 'Vat',
    format((cost_per_month+(closing_unit_A-opening_unit_A)*cost_per_unit_A+(closing_unit_B-opening_unit_B)*cost_per_unit_A,*1.14,2)) as 'Total Vat inclusive'
    where SITE_ID ='Site Name' 
    ```

    我想更改此查询，以便总计最后一次添加查询的总和。

    我会使用 group by 语句吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:21:02.517

```
select 
SITE_ID as 'Site', 
Serial Number,
cost_per_month
cost_per_unit_A, 
cost_per_unit_B,
opening_unit_A,
closing_unit_A, 
opening_unit_B, 
closing_unit_B,
SUM(format(cost_per_month+(closing_unit_A-opening_unit_A)*cost_per_unit_A+(closing_unit_B-opening_unit_B)*cost_per_unit_A,2)) as 'Total Vat Ex',
SUM(format((cost_per_month+(closing_unit_A-opening_unit_A)*cost_per_unit_A+(closing_unit_B-opening_unit_B)*cost_per_unit_A,*0.14,2))) as 'Vat',
SUM(format((cost_per_month+(closing_unit_A-opening_unit_A)*cost_per_unit_A+(closing_unit_B-opening_unit_B)*cost_per_unit_A,*1.14,2))) as 'Total Vat inclusive'
From reading
where SITE_ID ='Site Name'
Group By 
SITE_ID, 
Serial Number,
cost_per_month
cost_per_unit_A, 
cost_per_unit_B,
opening_unit_A,
closing_unit_A, 
opening_unit_B, 
closing_unit_B 
```

# objective-c - 在 iOS5 中工作的 SHA1 代码在 iOS6 中不起作用

> ID：12576743
> 
> 赞同：0
> 
> 时间：2012-09-25T05:36:23.597
> 
> 标签：objective-c, ios6, commoncrypto

以下以 iOS5 作为基类工作得很好，但在 iOS6 上失败（SIGABRT）。它可能是操作系统的东西还是架构的东西？

还需要注意的重要一点是随附的 MD5 散列确实有效。

```
-(NSString *)SHA1Hash {
    const char *cStr = [self UTF8String];
    unsigned char digest[16];
    CC_SHA1( cStr, strlen(cStr), digest ); // This is the sha1 call

    NSMutableString *output = [NSMutableString stringWithCapacity:CC_SHA1_DIGEST_LENGTH * 2];

    for(int i = 0; i < CC_SHA1_DIGEST_LENGTH; i++)
        [output appendFormat:@"%02x", digest[i]];

    return output;
} 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:59:11.693

您可能在 iOS 5 上“走运”了。SHA-1 摘要是 20 个字节，而不是 16 个：

```
unsigned char digest[16]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T06:08:33.760

使用宏`CC_SHA1_DIGEST_LENGTH`来声明您的摘要长度。16 太短了，所以你正在浪费堆栈。

```
unsigned char digest[CC_SHA1_DIGEST_LENGTH]; 
```

从手册页`CC_SHA1`

> CC_SHA1() 计算数据中 len 字节的 SHA-1 消息摘要并将其放在 md 中（其中必须有空间用于 CC_SHA1_DIGEST_LENGTH == 20 字节的输出）。它返回 md 指针。

# yii - 如何将所有url转发到yii中的单个url

> ID：12576752
> 
> 赞同：2
> 
> 时间：2012-09-25T05:37:21.293
> 
> 标签：yii

我需要知道如何将**所有 url 转发**到 yii 中的单个 url 所有链接都转到单个 url 需要这个来显示维护消息

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T13:28:30.477

**更新**

旧代码示例自 Yii 1.1.16 起停止工作。感谢 JamesG（见[评论](https://stackoverflow.com/questions/12576752/how-to-forward-all-url-to-a-single-url-in-yii/12653088#comment45235781_12653088 "https://stackoverflow.com/questions/12576752/how-to-forward-all-url-to-a-single-url-in-yii/12653088#comment45235781_12653088")）的新解决方案。代码示例已更新。

* * *

正如您已经发现的那样，`catchAllRequest`从 yii 中执行此操作是最好的方法。[它是专门为此类情况制作的，从文档](http://www.yiiframework.com/doc/api/1.1/CWebApplication#catchAllRequest-detail "http://www.yiiframework.com/doc/api/1.1/CWebApplication#catchAllRequest-detail")中可以明显看出。使用它也可能会给你带来轻微的性能提升（超过`urlManager`），但我怀疑它会不会很明显。

另一方面，如果您想使用`urlManager`，您可以尝试使用（另请阅读代码示例中的注释）：

1.  1.1.16 及以上版本：

    ```
    '<url:(.*)>'=>'maintenance/index' 
    ```

2.  1.1.15 及以下版本：

    ```
    '<url:(.*)>'=>'maintenance/index'

    // '(.*)'=>'maintenance/index' // this used to work in previous versions ...
    // of Yii (below 1.1.16) mainly due to a bug, see notes 
    ```

注意：这必须是 urlManager`rules`数组配置中的第一条规则。

然而，正如 sl4mmer 已经提到的，htaccess 或服务器配置是最好的方法，因为服务器毕竟在将请求发送到 php 之前首先捕获请求。

* * *

[错误说明：在此处](https://github.com/yiisoft/yii/issues/2945 "https://github.com/yiisoft/yii/issues/2945")检查 github 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:55:59.657

您最后有两个选择：

*   使用`.htaccess`重写规则

*   使用 Yii 的`urlManager`规则与匹配任何 URL 的模式。

推荐第一个选项，因为它是由服务器自己处理的，它甚至不涉及 Yii 或 PHP，因此具有更好的性能，并且可以更好地防止可能的安全漏洞。

# magento - Magento：如何改变少数特定产品页面的设计？

> ID：12576758
> 
> 赞同：0
> 
> 时间：2012-09-25T05:37:43.200
> 
> 标签：magento

我想在几个产品页面中进行自定义更改，例如更改添加到购物车按钮、添加一些文本等。我​​知道我可以从后端更改产品页面的布局，我可以在产品页面中添加一些块但是如何像我在产品页面中提到的那样进行了更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:18:25.720

我自己得到了解决方案。

首先，创建新的模板文件。我复制了原件，并在与原件相同的目录中创建了 view-diff.phtml 和 media-diff.phtml。完成后，编辑产品，然后转到“设计”选项卡。在“自定义布局更新”文本区域中，您可以放置​​以下内容，这将重新定义它用于该产品的模板

```
<reference name="product.info">
    <action method="setTemplate"> <template>catalog/product/view-diff.phtml</template></action>
</reference>
<reference name="product.info.media">
    <action method="setTemplate"> <template>catalog/product/view/media-diff.phtml</template></action>
</reference> 
```

而已！

# c# - 如何编码和解码非 Ascii 字符？

> ID：12576762
> 
> 赞同：1
> 
> 时间：2012-09-25T05:38:00.087
> 
> 标签：c#, encoding, decoding, non-ascii-characters

我正在开发一个应用程序，我想在其中对西班牙语文本进行编码。但问题是，它不编码特殊字符，如**á, é, í, ó, ú, ü,Á, É, Í, Ó, Ú, Ü,Ñ,ñ**。我该怎么做？我想**对西班牙语文本进行编码解码**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T05:40:50.853

对于国际支持，对您的数据使用简单`UTF-8`编码就`encode/decode`足够了。

`Utf-8`有一个漂亮的能力，可以`ASCII` 用一个字节读取，如普通的 ASCII 和 2 个字节的 Unicode 字符。因此，它能够在必要时“缩小”。

有关完整的`C#`文档，请查看 [UTF-8](http://msdn.microsoft.com/en-us/library/system.text.encoding.utf8.aspx)

**编辑**

```
 Encoding enc = new UTF8Encoding(true, true);
  string value = " á, é, í, ó, ú, ü,Á, É, Í, Ó, Ú, Ü,Ñ,ñ "; 
  byte[] bytes= enc.GetBytes(value); //convert to BYTE array 

 //save in some file 

 //after can read  from the file like
 string decodedString = enc.GetString(byteArrayReadFromFile); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:11:58.567

好的，我正在回答我自己的问题，希望对某人有所帮助；在给定的字符串中打印西班牙语或任何其他非**ascii 字符用它们的 unicode 转义字符集替换所有非 ascii 字符例如用 \u00e1 repalce á** 然后简单地打印字符串。

IE

```
string str="árgrgrgrááhhttá";
str=str.Replace("á", "\u00e1"); 
```

# c++ - 如何使用 const getter 对 std::set 进行排序

> ID：12576763
> 
> 赞同：5
> 
> 时间：2012-09-25T05:38:01.607
> 
> 标签：c++, sorting, set

我有一个 std::set 容器，其元素是以下类的对象：

```
class LaneConnector {
public:

    const Lane* getLaneFrom() const {
        return From;
    }
    const Lane* getLaneTo() const {
        return To;
    }

private:

    Lane* From;
    Lane* To;
} 
```

我的比较器功能如下：

```
struct MyLaneConectorSorter {
  bool operator() (LaneConnector * c, LaneConnector * d)
  {
      Lane* a = const_cast<Lane*>(c->getLaneFrom());
      Lane* b = const_cast<Lane*>(d->getLaneFrom());
      return (a->getLaneID() < b->getLaneID());
  }
} myLaneConnectorSorter; 
```

现在，当我尝试使用以下命令对集合中的元素进行排序时：

```
//dont panic, the container just came through a const_iterator of a std::map :)
const std::set<LaneConnector*> & tempLC = (*it_cnn).second;
std::sort(tempLC.begin(), tempLC.end(), myLaneConnectorSorter); 
```

我从以下几行开始疯狂地出错，如果你帮我解决这个问题，我会很感激。谢谢：

```
/usr/include/c++/4.6/bits/stl_algo.h: In function ‘void std::sort(_RAIter, _RAIter, _Compare) [with _RAIter = std::_Rb_tree_const_iterator<LaneConnector*>, _Compare = {anonymous}::MyLaneConectorSorter]’:
/home/.../dev/Basic/shared/conf/simpleconf.cpp:1104:65:   instantiated from here
/usr/include/c++/4.6/bits/stl_algo.h:5368:4: error: no match for ‘operator-’ in ‘__last - __first’
/usr/include/c++/4.6/bits/stl_algo.h:5368:4: note: candidates are:
/usr/include/c++/4.6/bits/stl_iterator.h:321:5: note: template<class _Iterator> typename std::reverse_iterator::difference_type std::operator-(const std::reverse_iterator<_Iterator>&, const std::reverse_iterator<_Iterator>&)
/usr/include/c++/4.6/bits/stl_iterator.h:378:5: note: template<class _IteratorL, class _IteratorR> typename std::reverse_iterator<_IteratorL>::difference_type std::operator-(const std::reverse_iterator<_IteratorL>&, const std::reverse_iterator<_IteratorR>&)
/usr/include/c++/4.6/bits/stl_bvector.h:181:3: note: std::ptrdiff_t std::operator-(const std::_Bit_iterator_base&, const std::_Bit_iterator_base&)
/usr/include/c++/4.6/bits/stl_bvector.h:181:3: note:   no known conversion for argument 1 from ‘std::_Rb_tree_const_iterator<LaneConnector*>’ to ‘const std::_Bit_iterator_base&’ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T05:39:39.133

首先，您不能对[std::set](http://en.cppreference.com/w/cpp/container/set)进行排序。它是一个排序结构，排序发生在构造或插入时。

其次，您可以`std::set`使用自己的排序仿函数构造一个，并且可以`const_casts`通过使其采取来避免不必要的`const pointers`：

```
struct MyLaneConectorSorter {
  bool operator() (const LaneConnector* lhs, const LaneConnector* rhs) const
  {
    // you may want to put some null pointer checks in here
    const Lane* a = lhs->getLaneFrom();
    const Lane* b = rhs->getLaneFrom();
    return a->getLaneID() < b->getLaneID();
  }
}; 
```

并像这样实例化集合：

```
std::set<LaneConnector*, MyLaneConectorSorter> s(MyLaneConectorSorter()); 
```

或者，如果你想从不同的集合中构建它，具有不同的顺序，

```
std::set<LaneConnector*> orig = ..... ;
....
std::set<LaneConnector*, MyLaneConectorSorter> s(orig.begin(), orig.end(), MyLaneConectorSorter()); 
```

# java - 如何从打包为战争的项目的一部分创建一个 jar

> ID：12576767
> 
> 赞同：5
> 
> 时间：2012-09-25T05:38:15.367
> 
> 标签：java, maven, jar

我是 Maven 新手，所以如果这是微不足道的事情，我深表歉意。基本上，我正在开发一个 webapp，并且我正在使用 Maven 来管理项目。我`<packaging>war</packaging>`在我的 pom.xml 中，这样当我运行时`mvn package`，它会吐出一个 war 文件以部署在 Web 服务器上。

现在，作为这个应用程序的一部分，我们正在使用作为战争交付给我们的第 3 方库，它单独部署在 Web 服务器上。这场战争包括我们编写的一些自定义集成功能。对于持久性逻辑，我最初只是直接在此集成代码中编写了一个存储库。当我发现我需要更多的持久性逻辑（而不是基本的 SELECT）时，我发现我想要使用在我们的应用程序代码中找到的存储库和域对象。所以，理想情况下，我希望能够打包我们的核心包，然后将那个 jar 包含在这场 3rd 方战争中，这样我就可以在那里使用相同的功能。

我只是不知道如何设置 pom.xml 来告诉它我想要这个 jar 中的哪些包（或者如果需要，甚至只需要 1 个包），以及如何创建 jar 本身。有没有办法从项目中的特定包生成 jar，该项目设置为将整个项目打包为战争？

我找到了有关[Maven jar 插件](http://maven.apache.org/plugins/maven-jar-plugin/usage.html)的信息，但它说：“如果您的项目的打包设置为 'jar'，则只要通过“打包”阶段，就会执行此插件。” 我项目中的包装没有设置为 jar。还有什么方法可以使用这个插件吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T07:22:27.430

您可以创建一个多模块项目，其中一个模块包含您的域类，另一个模块是您的 Web 应用程序。通过这样做，您的外部第三方`war`可以使用您的域类，只需包含`jar`.

这是目录结构的简单概述：

```
.
├── pom.xml
├── 域名
| ├── pom.xml
| └── 源
| └── 主要
| └── java
| └── com
| └── 堆栈溢出
| └── 域名
| ├── SomeDao.java
| └── AnotherDao.java
└── 网络
    ├── pom.xml
    └── 源
        └── 主要
            ├── java
            | └── com
            | └── 堆栈溢出
            | └── 网络
            | └── SomeBackingBean.java
            └── 网页应用
                └── WEB-INF
                    └── web.xml

```

## pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.stackoverflow</groupId>
    <artifactId>Q12576767</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>pom</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <modules>
        <module>domain</module>
        <module>web</module>
    </modules>

    <dependencyManagement>
        <dependencies>
            <!-- Inter-Module dependencies -->
            <dependency>
                <groupId>com.stackoverflow</groupId>
                <artifactId>Q12576767-domain</artifactId>
                <version>${project.version}</version>
            </dependency>
        </dependencies>
    </dependencyManagement>
</project> 
```

## 域/pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.stackoverflow</groupId>
        <artifactId>Q12576767</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <artifactId>Q12576767-domain</artifactId>

    <name>${project.artifactId}-${project.version}</name>
</project> 
```

## 网页/pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.stackoverflow</groupId>
        <artifactId>Q12576767</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <artifactId>Q12576767-web</artifactId>
    <packaging>war</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <dependencies>
        <dependency>
            <groupId>com.stackoverflow</groupId>
            <artifactId>Q12576767-domain</artifactId>
        </dependency>
    </dependencies>
</project> 
```

通过这样做，您可以解耦一些依赖关系并可以重用模块中的`jar`文件`domain`。

* * *

最后，您还可以查看使用[Overlays](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)通过`war`将 3rd-party`war`与您自己的`war`. 我不知道这在您的设置中是否可行，但值得一看。我已经成功使用了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T06:20:45.863

我不认为你可以从一些包创建一个 jar 文件，因为 pom 文件属于一个 java/web 项目，而不是 java 项目中的单个包。您可以创建一个名为例如 xyz-common 的新 java 项目，该项目应包含将与其他 war 文件共享的代码。然后您可以简单地执行 mvn install 并且您的 xyz-common jar 将使用某个版本创建。然后更新需要你的公共 jar 及其依赖项的 war 文件的 pom 文件。

我假设你的java包在war文件中？如果是这样，最好创建一个新的 java 项目，并且不要将 java 代码与 war 文件紧密耦合。在您的war文件中，只需提及您的jar文件的依赖关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T05:42:00.917

使用 maven-jar-plugin，请参阅：

*   [http://maven.apache.org/plugins/maven-jar-plugin/usage.html](http://maven.apache.org/plugins/maven-jar-plugin/usage.html)

例子：

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
                    <configuration>
                        <includes>
                             <include>**/service/*</include>
                        </includes>
                    </configuration>
        <executions>
            <execution>
                <id>make-a-jar</id>
                <phase>compile</phase>
                <goals>
                    <goal>jar</goal>
                </goals>
            </execution>
        </executions>
    </plugin> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T05:53:21.990

您是否尝试过使用`mvn archetype:generate`命令生成项目？它为您构建了一个完整的带有战争包装的 webapps 项目结构：

```
mvn archetype:generate -DgroupId=com.mycompany.app -DartifactId=my-webapp -DarchetypeArtifactId=maven-archetype-webapp 
```

# mysql - rails - mysql加入多个表

> ID：12576769
> 
> 赞同：2
> 
> 时间：2012-09-25T05:38:24.830
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-2

我正在尝试在这里做一个基本报告

*   显示包含姓名、年龄等详细信息的用户列表。
*   还显示其他详细信息，如帖子数量、上次活动时间等。
*   所有这些其他细节都来自用户的 has_many 关系

这就是我现在正在做的事情：

```
User.find(
          :all, 
          :select => "users.id, users.name, count(distinct(posts.id)) as posts_count",
          :joins => "left outer join posts on posts.user_id = users.id",
          :group => "users.id",
          :limit => "100"
) 
```

已索引帖子表中的**user_id**列

我的问题是这样做需要很长时间，有时当我尝试做更多表格以及活动、评论等帖子时会挂起。

有没有办法单独加入计数或其他方式来实现这一目标？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:56:03.273

我认为其中之一可能有效，但与往常一样，在进行外部联接时，查询会变慢。

```
User.count(:include=>[:posts])

User.count(:select => "users.id, users.name, count(distinct(posts.id)) as posts_count",
          :joins => "left outer join posts on posts.user_id = users.id",
          :group => "users.id")

User.find(:all, :include => [:posts]) 
```

你也可以在初始化文件或 irbrc 文件中放入：

```
ActiveRecord::Base.logger = Logger.new(STDOUT)
ActiveRecord::Base.clear_active_connections! 
```

并在控制台中键入查询时检查它们。

对于帖子计数

```
User.all.posts.size 
```

至于以后报告每个帖子计数，您可以使用您已经拥有的用户记录来做到这一点。

```
@users = User.find(:all, :include=> [:posts]) 
```

之后 ...

```
<% @users.each do |user|
  Posts: <%= user.posts.size %>
<% end %> 
```

用户按帖子排序

```
@sorted_users = @users.sort_by{|user| user.posts.size } 
```

[https://stackoverflow.com/a/5739222/1354978](https://stackoverflow.com/a/5739222/1354978)

# c# - 将字符串转换为泛型

> ID：12576770
> 
> 赞同：2
> 
> 时间：2012-09-25T05:38:30.960
> 
> 标签：c#, generics, casting

我有这个方法：

```
public T GetInput<T>()
{
     T result;

     if( (typeof)T == Type.GetType("string"))
     {
           result = GetStringInput(); // returns a string
     }

      // Etc for a bunch of different types
} 
```

我得到的错误是我不能将字符串隐式转换为“T”。该函数的重点是能够获取任何指定类型的输入，并确保在返回之前对输入进行类型验证。想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T05:44:16.563

如果您确定它是正确的代码，则不能简单地将编译时类型**T上的未确定变量分配给字符串事件。**编译器不允许。要强制执行此操作，您可以执行以下操作：

```
result = (T)(object)GetStringInput(); 
```

这个双重转换将明确告诉编译器你对这一行负责。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T05:44:10.927

```
result = (T)(object)GetStringInput(); 
```

# python - Python的继承错误

> ID：12576778
> 
> 赞同：2
> 
> 时间：2012-09-25T05:39:30.870
> 
> 标签：python

我有以下 code.py 文件：

```
class Shape:
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def move(self, delta_x, delta_y):
        self.x += delta_x
        self.y += delta_y

class Square(Shape):
    def __init__(self, side=1, x=0, y=0):
        super().__init__(x, y)
        self.side = side

class Circle(Shape):
    def __init__(self, rad=1, x=0, y=0):
        super().__init__(x, y)
        self.radius = rad 
```

我在 Python 解释器中运行代码，如下所示：

`>>> import code`
`>>> c = code.Circle(1)`

我收到此错误：

```
Traceback (most recent call last):<br>
...<br>
File "code.py", line 18, in __init__<br>
super().__init__(x, y)<br>
TypeError: super() takes at least 1 argument (0 given)<br> 
```

我不明白为什么我会收到这个错误。我指定了 1 的 rad 值，我假设由于我没有指定 x 和 y 值，Circle 应该使用 x=0 和 y=0 的默认值，并通过 super() 将它们传递给 Shape功能。我错过了什么？

顺便说一句，我使用的是 Python 2.7.1。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T05:47:45.360

`super`需要一个参数，这正是错误消息所说的。在您的情况下，您需要使用`super(Circle, self)`and `super(Square, self)`。

对于血腥的细节，你可以看到[这个 SO question](https://stackoverflow.com/q/576169/320726)或者你可以查看官方文档。

请注意，除非您想做有趣的事情，否则代码可以简化为

```
Shape.__init__(self, x, y) 
```

在这两种情况下。在您了解`super`它以及为什么它有用之前，我建议您远离它。作为一个高效的 Python 程序员，你可以过上幸福的生活，而无需碰它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T05:42:31.833

改为使用`super(Shape, self)`，您可以`help(super)`在 python 中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T05:48:58.163

这是一些满足您需要的代码，您还需要使用“新样式类”，这意味着基类型需要从对象继承：

```
class Shape(object):
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def move(self, delta_x, delta_y):
        self.x += delta_x
        self.y += delta_y

class Square(Shape):
    def __init__(self, side=1, x=0, y=0):
        super().__init__(x, y)
        self.side = side

class Circle(Shape):
    def __init__(self, rad=1, x=0, y=0):
        super(Circle, self).__init__(x, y)
        self.radius = rad 
```

PS我只修复了Circle并留下了Square供您修复。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T06:02:52.970

终于修好了。:D 搜索 python 文档和旧的 Stackoverflow 帖子以获得胜利。

```
class Shape(object):
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def move(self, delta_x, delta_y):
        self.x += delta_x
        self.y += delta_y

class Square(Shape):
    def __init__(self, side=1, x=0, y=0):
        super(Square,self).__init__(x, y)
        self.side = side

class Circle(Shape):
    def __init__(self, rad=1, x=0, y=0):
        super(Circle,self).__init__(x, y)
        self.radius = rad

c = Circle(5) 
```

这行得通。您需要通过使顶级父级（Shape）继承自对象来使用新的样式类。

参考： [http ://docs.python.org/reference/datamodel.html#newstyle](http://docs.python.org/reference/datamodel.html#newstyle) [python中链调用父构造函数](https://stackoverflow.com/questions/904036/chain-calling-parent-constructors-in-python)

# objective-c - iOS 和可变 IBOutletCollections

> ID：12576780
> 
> 赞同：2
> 
> 时间：2012-09-25T05:39:36.613
> 
> 标签：objective-c, ios, iboutletcollection

我有财产：

```
@property(nonatomic, strong) IBOutletCollection(UIView) NSMutableArray *allOpposition; 
```

它在 IB 中连接到一堆子视图并合成。后来我有：

```
- (void)willRemoveSubview:(UIView *)subview
{
  [[self allOpposition] removeObject:subview]; // Crash occurs here.
  [super willRemoveSubview:subview];
} 
```

当需要删除表示对立实体的视图时，我收到以下错误消息：

`-[__NSArrayI removeObject:]: unrecognized selector sent to instance 0x88211c0`

该对象不是`nil`并且包含在集合中。为什么我的数组是不可变的？

`UIView`备注：在这种情况下，Apple 很可能要求集合中的每个对象都是 type 。如果数组是完全可变的，我可以添加外来类型。我在这里没有找到太多文档，所以这是我的猜测。

备注：如果返回的数组最终是不可变的，我看不到允许传入可变数组的价值。为什么不接受不可变数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T06:39:41.023

您可能已将该属性声明为可变数组，但我很确定当您的 nib 加载时，将为其分配一个不可变数组。

覆盖综合设置器`allOpposition`（我假设您使用的是 xcode4.4 或更高版本和 ARC）：

```
-(void)setAllOpposition:(NSMutableArray*)allOpposition
{
    _allOpposition = [allOpposition mutableCopy];
} 
```

您也可以通过将属性声明从 更改为 来实现这一点`strong`，`copy`但这是一个猜测。

# algorithm - 确定算法的时间复杂度

> ID：12576788
> 
> 赞同：0
> 
> 时间：2012-09-25T05:40:05.600
> 
> 标签：algorithm, complexity-theory

下面是我写的一些伪代码，给定一个数组 A 和一个整数值 k，如果 A 中有两个不同的整数之和为 k，则返回 true，否则返回 false。我正在尝试确定该算法的时间复杂度。

我猜这个算法在最坏情况下的复杂度是 O(n^2)。这是因为第一个 for 循环运行了 n 次，而这个循环中的 for 循环也运行了 n 次。if 语句进行一次比较，如果为真则返回一个值，这都是常数时间操作。最后的 return 语句也是一个常数时间的操作。

我的猜测正确吗？我是算法和复杂性的新手，所以如果我在任何地方出错，请纠正我！

```
Algorithm ArraySum(A, n, k)
for (i=0, i<n, i++)
    for (j=i+1, j<n, j++)
        if (A[i]+A[j]=k)
            return true
return false 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T08:36:22.443

Azodious 的推理是不正确的。内部循环不只是运行`n-1`时间。因此，您不应该使用`(outer iterations)*(inner iterations)`来计算复杂度。

需要注意的重要一点是，内循环的运行时间随着外循环的每次迭代而变化。

没错，循环第一次运行时，它会进行`n-1`迭代。但在那之后，迭代次数总是减一：

*   n - 1
*   n - 2
*   n - 3
*   …
*   2
*   1

我们可以使用[高斯的技巧（第二个公式）](https://stackoverflow.com/a/12530113/383124)对这个级数求和，得到`n(n-1)/2 = (n² - n)/2`. 这是在最坏情况下比较总共运行的次数。

由此，我们可以看出界限不能比 更紧`O(n²)`。如您所见，无需猜测。

请注意，您不能提供有意义的下限，因为算法可能在任何步骤之后完成。这意味着算法的最佳情况是`O(1)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:27:24.817

是的。在最坏的情况下，您的算法是 O(n ² )。

您的算法是 O(n ² )，因为每个输入实例都需要时间复杂度 O(n ² )。
您的算法是 Ω(1)，因为存在一个输入实例只需要时间复杂度 Ω(1)。

*以下出现在Cormen*、*Leiserson*、*Rivest*和*Stein*合着的*算法简介*的第 3 章“函数的*增长”中*。***当我们说算法的运行时间（无修饰符）为 Ω(g(n)) 时，我们的意思是无论为每个 n 值选择什么大小为 n 的特定输入，该输入的运行时间为对于足够大的 n，至少有一个恒定的时间 g(n)。***

***给定一个输入，其中前两个元素的总和等于 k，这个算法在返回 true 之前只需要一次加法和一次比较。因此，该输入花费了恒定的时间复杂度，并使该算法的运行时间为Ω(1)。*** 

***无论输入是什么，该算法在返回值之前最多需要 n(n-1)/2 次加法和 n(n-1)/2 次比较。因此，该算法的运行时间为 O(n ² )***

 ***总之，我们可以说该算法的运行时间介于 Ω(1) 和 O(n ² ) 之间。我们也可以说这个算法的最坏情况运行是 Θ(n ² )。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-25T05:47:18.800

你是对的，但让我解释一下：

> 这是因为第一个 for 循环运行了 n 次，而这个循环中的 for 循环也运行了 n 次。

实际上，第二个循环会运行**`(n-i-1)`**多次，但就复杂性而言，它将被视为`n`唯一。**（根据phant0m的评论更新）**

所以，在最坏的情况下，它会运行`n * (n-i-1) * 1 * 1`多次。这是`O(n^2)`。

在最好的情况下，它会运行`1 * 1 * 1 * 1`多次，`O(1)`即恒定。***

# c# - 按钮无法正常工作

> ID：12576791
> 
> 赞同：0
> 
> 时间：2012-09-25T05:40:37.393
> 
> 标签：c#, asp.net

我正在使用 SQL Server Management Studio 开发 Visual Studio 2010。

我制作了一个用于从表中删除选定行的按钮。

```
<asp:Button ID="btnDeleteSelectedMessages" runat="server" 
    Text="Verwijderen" Enabled="false" 
    OnClick="btnDeleteSelectedMessages_Click" /> 
```

当我第一次运行页面时，它第一次完美运行。

然后在按钮不能被第二次点击之后。

按钮点击事件的代码是这样的。

```
protected void btnDeleteSelectedMessages_Click(object sender, EventArgs e)
{
    if (currentGridView == null)
        setCurrentGridView();

    //controleer voor elke rij welke checkbox is geselecteerd
    foreach (GridViewRow row in currentGridView.Rows)
    {
        var cb = (HtmlInputCheckBox)row.FindControl("chkPaid");
        Guid messageID = (Guid)currentGridView.DataKeys[row.DataItemIndex].Value;

        //als de checkbox is geselecteerd het bericht verwijderen
        if (cb != null && cb.Checked)
        {
            if (currentGridView.ID.Equals("Messages"))
                b.BussinesMessageReceiver.DeleteMessageReceiver(messageID, MessageBoxPerson);
            else if (currentGridView.ID.Equals("MessagesSent"))
                b.BussinesMessage.DeleteMessageSender(messageID);
            else //MessagesDeleted
                b.BussinesMessage.DeleteMessage(messageID, (Page.Server.MapPath("~/Upload/") + messageID));
            continue;
        }
    }
    btnDeleteSelectedMessages.Enabled = false;
    selectLocation.Visible = false;
    clearSelectedMessageSession();

    //Update the GridView
    BindGridView();
} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:06:02.197

使用此代码：

```
btnDeleteSelectedMessages.Enabled = false; 
```

你禁用按钮。您是否可以在 Page_Load 中启用该按钮？Button_Click 处理程序在加载*后*触发，因此您最终会得到一个禁用的按钮。

所以你需要删除那条线（你为什么把它放在那里？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T05:47:58.993

按钮必须启用 (Enable="true") 才能工作，

```
<asp:Button ID="btnDeleteSelectedMessages" runat="server" Text= "Verwijderen" Enabled="true" OnClick="btnDeleteSelectedMessages_Click" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T05:43:43.450

尝试使用此代码

```
btnDeleteSelectedMessages.Enabled = false; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T06:40:40.743

您应该为您的按钮启用 PostBack..

# angularjs - AngularJS：如何观察服务变量？

> ID：12576798
> 
> 赞同：421
> 
> 时间：2012-09-25T05:41:06.763
> 
> 标签：angularjs, watch, angular-services

我有一个服务，说：

```
factory('aService', ['$rootScope', '$resource', function ($rootScope, $resource) {
  var service = {
    foo: []
  };

  return service;
}]); 
```

我想`foo`用来控制一个以 HTML 呈现的列表：

```
<div ng-controller="FooCtrl">
  <div ng-repeat="item in foo">{{ item }}</div>
</div> 
```

为了让控制器检测何时`aService.foo`更新，我拼凑了这个模式，我将 aService 添加到控制器`$scope`，然后使用`$scope.$watch()`：

```
function FooCtrl($scope, aService) {                                                                                                                              
  $scope.aService = aService;
  $scope.foo = aService.foo;

  $scope.$watch('aService.foo', function (newVal, oldVal, scope) {
    if(newVal) { 
      scope.foo = newVal;
    }
  });
} 
```

这感觉很牵强，我一直在每个使用服务变量的控制器中重复它。有没有更好的方法来完成观察共享变量？

* * *

## 回答 #1

> 赞同：280
> 
> 时间：2013-07-09T21:49:06.003

如果你想避免`$watch`.

在服务中：

```
factory('aService', function() {
  var observerCallbacks = [];

  //register an observer
  this.registerObserverCallback = function(callback){
    observerCallbacks.push(callback);
  };

  //call this when you know 'foo' has been changed
  var notifyObservers = function(){
    angular.forEach(observerCallbacks, function(callback){
      callback();
    });
  };

  //example of when you may want to notify observers
  this.foo = someNgResource.query().$then(function(){
    notifyObservers();
  });
}); 
```

在控制器中：

```
function FooCtrl($scope, aService){
  var updateFoo = function(){
    $scope.foo = aService.foo;
  };

  aService.registerObserverCallback(updateFoo);
  //service now in control of updating foo
}; 
```

* * *

## 回答 #2

> 赞同：232
> 
> 时间：2013-12-31T21:55:56.853

在这样的场景中，多个/未知对象可能对更改感兴趣，`$rootScope.$broadcast`请从正在更改的项目中使用。

而不是创建自己的监听器注册表（必须在各种 $destroy 上清理），您应该能够`$broadcast`从有问题的服务中获取。

您仍然必须`$on`在每个侦听器中编写处理程序，但该模式与多次调用分离`$digest`，从而避免了长时间运行的观察程序的风险。

这样，侦听器也可以从*DOM*和/或不同的子范围进出，而服务不会改变其行为。

** 更新：示例 **

广播在“全球”服务中最有意义，它可能会影响您应用程序中的无数其他事情。一个很好的例子是用户服务，其中可能发生许多事件，例如登录、注销、更新、空闲等。我相信这是广播最有意义的地方，因为任何范围都可以侦听事件，而无需甚至注入服务，它不需要评估任何表达式或缓存结果来检查更改。它只是触发并忘记（所以请确保它是触发后忘记通知，而不是需要采取行动的东西）

```
.factory('UserService', [ '$rootScope', function($rootScope) {
   var service = <whatever you do for the object>

   service.save = function(data) {
     .. validate data and update model ..
     // notify listeners and provide the data that changed [optional]
     $rootScope.$broadcast('user:updated',data);
   }

   // alternatively, create a callback function and $broadcast from there if making an ajax call

   return service;
}]); 
```

当 save() 函数完成并且数据有效时，上面的服务将向每个范围广播一条消息。或者，如果它是 $resource 或 ajax 提交，请将广播调用移动到回调中，以便在服务器响应时触发。广播特别适合这种模式，因为每个侦听器只是等待事件，而不需要检查每个 $digest 的范围。监听器看起来像：

```
.controller('UserCtrl', [ 'UserService', '$scope', function(UserService, $scope) {

  var user = UserService.getUser();

  // if you don't want to expose the actual object in your scope you could expose just the values, or derive a value for your purposes
   $scope.name = user.firstname + ' ' +user.lastname;

   $scope.$on('user:updated', function(event,data) {
     // you could inspect the data to see if what you care about changed, or just update your own scope
     $scope.name = user.firstname + ' ' + user.lastname;
   });

   // different event names let you group your code and logic by what happened
   $scope.$on('user:logout', function(event,data) {
     .. do something differently entirely ..
   });

 }]); 
```

这样做的好处之一是消除了多个手表。如果您像上面的示例那样组合字段或派生值，则必须同时查看 firstname 和 lastname 属性。观察 getUser() 函数只有在用户对象在更新时被替换时才会起作用，如果用户对象只是更新了它的属性，它就不会触发。在这种情况下，您必须进行深入观察，而且会更加密集。

$broadcast 将消息从它被调用的范围发送到任何子范围。因此，从 $rootScope 调用它会在每个范围内触发。例如，如果您要从控制器的作用域进行 $broadcast，它只会在从控制器作用域继承的作用域中触发。$emit 则相反，其行为类似于 DOM 事件，因为它在作用域链上冒泡。

请记住，在某些情况下 $broadcast 很有意义，并且在某些情况下 $watch 是更好的选择 - 特别是在具有非常具体的 watch 表达式的隔离范围内。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2014-04-11T10:55:57.793

我使用与@dtheodot 类似的方法，但使用角度承诺而不是传递回调

```
app.service('myService', function($q) {
    var self = this,
        defer = $q.defer();

    this.foo = 0;

    this.observeFoo = function() {
        return defer.promise;
    }

    this.setFoo = function(foo) {
        self.foo = foo;
        defer.notify(self.foo);
    }
}) 
```

然后在任何地方使用`myService.setFoo(foo)`方法来更新`foo`服务。在您的控制器中，您可以将其用作：

```
myService.observeFoo().then(null, null, function(foo){
    $scope.foo = foo;
}) 
```

的前两个参数`then`是成功和错误回调，第三个是通知回调。

[$q 的参考。](http://docs.angularjs.org/api/ng/service/$q)

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2015-03-05T08:59:05.050

没有手表或观察者回调（[http://jsfiddle.net/zymotik/853wvv7s/](http://jsfiddle.net/zymotik/853wvv7s/)）：

JavaScript：

```
angular.module("Demo", [])
    .factory("DemoService", function($timeout) {

        function DemoService() {
            var self = this;
            self.name = "Demo Service";

            self.count = 0;

            self.counter = function(){
                self.count++;
                $timeout(self.counter, 1000);
            }

            self.addOneHundred = function(){
                self.count+=100;
            }

            self.counter();
        }

        return new DemoService();

    })
    .controller("DemoController", function($scope, DemoService) {

        $scope.service = DemoService;

        $scope.minusOneHundred = function() {
            DemoService.count -= 100;
        }

    }); 
```

HTML

```
<div ng-app="Demo" ng-controller="DemoController">
    <div>
        <h4>{{service.name}}</h4>
        <p>Count: {{service.count}}</p>
    </div>
</div> 
```

当我们从服务传回一个对象而不是一个值时，这个 JavaScript 就起作用了。当从服务返回一个 JavaScript 对象时，Angular 会将监视添加到它的所有属性中。

另请注意，我使用 'var self = this' 因为我需要在 $timeout 执行时保留对原始对象的引用，否则 'this' 将引用窗口对象。

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2015-11-11T04:52:02.990

我偶然发现了这个问题，正在寻找类似的东西，但我认为它值得对正在发生的事情进行彻底的解释，以及一些额外的解决方案。

当一个 Angular 表达式（例如您使用的那个）出现在 HTML 中时，Angular 会自动设置一个`$watch`for `$scope.foo`，并在发生更改时更新 HTML `$scope.foo`。

```
<div ng-controller="FooCtrl">
  <div ng-repeat="item in foo">{{ item }}</div>
</div> 
```

这里未说明的问题是，有两件事之一正在影响`aService.foo` ，因此未检测到更改。这两种可能性是：

1.  `aService.foo`每次都设置为一个新数组，导致对它的引用已过时。
2.  `aService.foo`正在以更新时`$digest`不会触发循环的方式进行更新。

* * *

# 问题 1：过时的引用

考虑第一种可能性，假设`$digest`正在应用 a，如果`aService.foo`始终是同一个数组，则自动设置`$watch`将检测到更改，如下面的代码片段所示。

# 解决方案 1-a：确保数组或对象在每次更新时都是*同一个对象*

```
angular.module('myApp', [])
  .factory('aService', [
    '$interval',
    function($interval) {
      var service = {
        foo: []
      };

      // Create a new array on each update, appending the previous items and 
      // adding one new item each time
      $interval(function() {
        if (service.foo.length < 10) {
          var newArray = []
          Array.prototype.push.apply(newArray, service.foo);
          newArray.push(Math.random());
          service.foo = newArray;
        }
      }, 1000);

      return service;
    }
  ])
  .factory('aService2', [
    '$interval',
    function($interval) {
      var service = {
        foo: []
      };

      // Keep the same array, just add new items on each update
      $interval(function() {
        if (service.foo.length < 10) {
          service.foo.push(Math.random());
        }
      }, 1000);

      return service;
    }
  ])
  .controller('FooCtrl', [
    '$scope',
    'aService',
    'aService2',
    function FooCtrl($scope, aService, aService2) {
      $scope.foo = aService.foo;
      $scope.foo2 = aService2.foo;
    }
  ]);
```

```
<!DOCTYPE html>
<html>

<head>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
  <link rel="stylesheet" href="style.css" />
  <script src="script.js"></script>
</head>

<body ng-app="myApp">
  <div ng-controller="FooCtrl">
    <h1>Array changes on each update</h1>
    <div ng-repeat="item in foo">{{ item }}</div>
    <h1>Array is the same on each udpate</h1>
    <div ng-repeat="item in foo2">{{ item }}</div>
  </div>
</body>

</html>
```

如您所见，据说附加到的 ng-repeat在更改`aService.foo`时不会更新`aService.foo`，但附加到的 ng-repeat`aService2.foo` *会*更新。这是因为我们的引用`aService.foo`已经过时，但我们的引用`aService2.foo`没有。我们创建了对初始数组的引用，`$scope.foo = aService.foo;`然后在下一次更新时被服务丢弃，这意味着`$scope.foo`不再引用我们想要的数组。

然而，虽然有多种方法可以确保初始引用保持完整，但有时可能需要更改对象或数组。或者，如果服务属性引用像 a`String`或之类的原语`Number`怎么办？在这些情况下，我们不能简单地依赖参考。那么我们*能*做些什么呢？

之前给出的几个答案已经为该问题提供了一些解决方案。不过，我个人更赞成在评论中使用[Jin](https://stackoverflow.com/questions/12576798/angularjs-how-to-watch-service-variables/33644472#comment33451712_12576798)和[thetallweeks](https://stackoverflow.com/questions/12576798/angularjs-how-to-watch-service-variables/33644472#comment40958475_12576798)建议的简单方法：

> 只需在 html 标记中引用 aService.foo

# 解决方案 1-b：将服务附加到范围，并`{service}.{property}`在 HTML 中引用。

意思是，只需这样做：

HTML：

```
<div ng-controller="FooCtrl">
  <div ng-repeat="item in aService.foo">{{ item }}</div>
</div> 
```

JS：

```
function FooCtrl($scope, aService) {
    $scope.aService = aService;
} 
```

```
angular.module('myApp', [])
  .factory('aService', [
    '$interval',
    function($interval) {
      var service = {
        foo: []
      };

      // Create a new array on each update, appending the previous items and 
      // adding one new item each time
      $interval(function() {
        if (service.foo.length < 10) {
          var newArray = []
          Array.prototype.push.apply(newArray, service.foo);
          newArray.push(Math.random());
          service.foo = newArray;
        }
      }, 1000);

      return service;
    }
  ])
  .controller('FooCtrl', [
    '$scope',
    'aService',
    function FooCtrl($scope, aService) {
      $scope.aService = aService;
    }
  ]);
```

```
<!DOCTYPE html>
<html>

<head>
  <script data-require="angular.js@1.4.7" data-semver="1.4.7" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.js"></script>
  <link rel="stylesheet" href="style.css" />
  <script src="script.js"></script>
</head>

<body ng-app="myApp">
  <div ng-controller="FooCtrl">
    <h1>Array changes on each update</h1>
    <div ng-repeat="item in aService.foo">{{ item }}</div>
  </div>
</body>

</html>
```

这样，将在 each 上`$watch`解析，这将获得正确更新的值。`aService.foo``$digest`

这就是你试图用你的解决方法做的事情，但方式要少得多。`$watch`您在控制器中添加了一个不必要的，它`foo`在`$scope`更改时显式放置。`$watch`当您附加`aService`而不是附加`aService.foo`到, 并在标记中`$scope`显式绑定到时，您不需要额外的东西。`aService.foo`

* * *

现在假设`$digest`正在应用一个循环，这一切都很好。在上面的示例中，我使用 Angular 的[`$interval`](https://docs.angularjs.org/api/ng/service/$interval)服务来更新数组，每次更新后它都会自动启动一个`$digest`循环。但是，如果服务变量（无论出于何种原因）没有在“Angular 世界”中得到更新怎么办。换句话说，当服务属性发生变化时，我们不会自动激活一个循环*吗*？`$digest`

* * *

# 问题2：缺失[`$digest`](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$digest)

这里的许多解决方案都可以解决这个问题，但我同意[Code Whisperer](https://stackoverflow.com/questions/12576798/angularjs-how-to-watch-service-variables/33644472#comment38413763_17558885)：

> 我们使用像 Angular 这样的框架的原因是为了不编写我们自己的观察者模式

因此，我更愿意继续使用`aService.foo`HTML 标记中的引用，如上面第二个示例所示，而不必在 Controller 中注册额外的回调。

# 解决方案 2：使用 setter 和 getter`$rootScope.$apply()`

我很惊讶没有人建议使用[setter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/set)和[getter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get)。此功能是在 ECMAScript5 中引入的，因此已经存在多年。当然，这意味着无论出于何种原因，如果您需要支持非常旧的浏览器，那么这种方法将不起作用，但我觉得 getter 和 setter 在 JavaScript 中的使用严重不足。在这种特殊情况下，它们可能非常有用：

```
factory('aService', [
  '$rootScope',
  function($rootScope) {
    var realFoo = [];

    var service = {
      set foo(a) {
        realFoo = a;
        $rootScope.$apply();
      },
      get foo() {
        return realFoo;
      }
    };
  // ...
} 
```

```
angular.module('myApp', [])
  .factory('aService', [
    '$rootScope',
    function($rootScope) {
      var realFoo = [];

      var service = {
        set foo(a) {
          realFoo = a;
          $rootScope.$apply();
        },
        get foo() {
          return realFoo;
        }
      };

      // Create a new array on each update, appending the previous items and 
      // adding one new item each time
      setInterval(function() {
        if (service.foo.length < 10) {
          var newArray = [];
          Array.prototype.push.apply(newArray, service.foo);
          newArray.push(Math.random());
          service.foo = newArray;
        }
      }, 1000);

      return service;
    }
  ])
  .controller('FooCtrl', [
    '$scope',
    'aService',
    function FooCtrl($scope, aService) {
      $scope.aService = aService;
    }
  ]);
```

```
<!DOCTYPE html>
<html>

<head>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
  <link rel="stylesheet" href="style.css" />
  <script src="script.js"></script>
</head>

<body ng-app="myApp">
  <div ng-controller="FooCtrl">
    <h1>Using a Getter/Setter</h1>
    <div ng-repeat="item in aService.foo">{{ item }}</div>
  </div>
</body>

</html>
```

在这里，我在服务函数中添加了一个“私有”变量：`realFoo`. `get foo()`分别使用对象上的和`set foo()`函数更新和检索此 get `service`。

注意`$rootScope.$apply()`set 函数中的使用。这确保了 Angular 将知道对`service.foo`. 如果您收到“inprog”错误，请参阅[这个有用的参考页面](https://docs.angularjs.org/error/$rootScope/inprog)，或者如果您使用 Angular >= 1.3，您可以只使用`$rootScope.$applyAsync()`.

`aService.foo`如果更新非常频繁，也要注意这一点，因为这可能会显着影响性能。如果性能是一个问题，您可以使用 setter 设置类似于此处其他答案的观察者模式。

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2012-09-25T08:11:57.227

据我所知，您不必做那么精细的事情。您已经将服务中的 foo 分配给了您的范围，并且因为 foo 是一个数组（反过来，它是一个通过引用分配的对象！）。所以，你需要做的就是这样的：

```
function FooCtrl($scope, aService) {                                                                                                                              
  $scope.foo = aService.foo;

 } 
```

如果同一个 Ctrl 中的一些其他变量依赖于 foo 的变化，那么是的，您需要一个手表来观察 foo 并对该变量进行更改。但只要是简单的参考，观看是没有必要的。希望这可以帮助。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2014-09-13T15:24:41.773

您可以在 $rootScope 中插入服务并观看：

```
myApp.run(function($rootScope, aService){
    $rootScope.aService = aService;
    $rootScope.$watch('aService', function(){
        alert('Watch');
    }, true);
}); 
```

在您的控制器中：

```
myApp.controller('main', function($scope){
    $scope.aService.foo = 'change';
}); 
```

其他选择是使用外部库，例如：[https ://github.com/melanke/Watch.JS](https://github.com/melanke/Watch.JS)

适用于：IE 9+、FF 4+、SF 5+、WebKit、CH 7+、OP 12+、BESEN、Node.JS、Rhino 1.7+

您可以观察到一个、多个或所有对象属性的变化。

例子：

```
var ex3 = {
    attr1: 0,
    attr2: "initial value of attr2",
    attr3: ["a", 3, null]
};   
watch(ex3, function(){
    alert("some attribute of ex3 changes!");
});
ex3.attr3.push("new value");​ 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-11-24T05:54:45.633

您可以在工厂内部观看更改，然后广播更改

```
angular.module('MyApp').factory('aFactory', function ($rootScope) {
    // Define your factory content
    var result = {
        'key': value
    };

    // add a listener on a key        
    $rootScope.$watch(function () {
        return result.key;
    }, function (newValue, oldValue, scope) {
        // This is called after the key "key" has changed, a good idea is to broadcast a message that key has changed
        $rootScope.$broadcast('aFactory:keyChanged', newValue);
    }, true);

    return result;
}); 
```

然后在你的控制器中：

```
angular.module('MyApp').controller('aController', ['$rootScope', function ($rootScope) {

    $rootScope.$on('aFactory:keyChanged', function currentCityChanged(event, value) {
        // do something
    });
}]); 
```

通过这种方式，您将所有相关的工厂代码放在其描述中，然后您只能依赖来自外部的广播

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-10-23T09:33:15.203

**==更新==**

现在在 $watch 中非常简单。

[笔在这里](http://codepen.io/hayatbiralem/pen/LpQQrw)。

HTML：

```
<div class="container" data-ng-app="app">

  <div class="well" data-ng-controller="FooCtrl">
    <p><strong>FooController</strong></p>
    <div class="row">
      <div class="col-sm-6">
        <p><a href="" ng-click="setItems([ { name: 'I am single item' } ])">Send one item</a></p>
        <p><a href="" ng-click="setItems([ { name: 'Item 1 of 2' }, { name: 'Item 2 of 2' } ])">Send two items</a></p>
        <p><a href="" ng-click="setItems([ { name: 'Item 1 of 3' }, { name: 'Item 2 of 3' }, { name: 'Item 3 of 3' } ])">Send three items</a></p>
      </div>
      <div class="col-sm-6">
        <p><a href="" ng-click="setName('Sheldon')">Send name: Sheldon</a></p>
        <p><a href="" ng-click="setName('Leonard')">Send name: Leonard</a></p>
        <p><a href="" ng-click="setName('Penny')">Send name: Penny</a></p>
      </div>
    </div>
  </div>

  <div class="well" data-ng-controller="BarCtrl">
    <p><strong>BarController</strong></p>
    <p ng-if="name">Name is: {{ name }}</p>
    <div ng-repeat="item in items">{{ item.name }}</div>
  </div>

</div> 
```

JavaScript：

```
var app = angular.module('app', []);

app.factory('PostmanService', function() {
  var Postman = {};
  Postman.set = function(key, val) {
    Postman[key] = val;
  };
  Postman.get = function(key) {
    return Postman[key];
  };
  Postman.watch = function($scope, key, onChange) {
    return $scope.$watch(
      // This function returns the value being watched. It is called for each turn of the $digest loop
      function() {
        return Postman.get(key);
      },
      // This is the change listener, called when the value returned from the above function changes
      function(newValue, oldValue) {
        if (newValue !== oldValue) {
          // Only update if the value changed
          $scope[key] = newValue;
          // Run onChange if it is function
          if (angular.isFunction(onChange)) {
            onChange(newValue, oldValue);
          }
        }
      }
    );
  };
  return Postman;
});

app.controller('FooCtrl', ['$scope', 'PostmanService', function($scope, PostmanService) {
  $scope.setItems = function(items) {
    PostmanService.set('items', items);
  };
  $scope.setName = function(name) {
    PostmanService.set('name', name);
  };
}]);

app.controller('BarCtrl', ['$scope', 'PostmanService', function($scope, PostmanService) {
  $scope.items = [];
  $scope.name = '';
  PostmanService.watch($scope, 'items');
  PostmanService.watch($scope, 'name', function(newVal, oldVal) {
    alert('Hi, ' + newVal + '!');
  });
}]); 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-09-02T09:03:58.203

在**dtheodor 的**回答的基础上，您可以使用类似于下面的内容来确保您不会忘记取消注册回调......尽管有些人可能会反对将其传递`$scope`给服务。

```
factory('aService', function() {
  var observerCallbacks = [];

  /**
   * Registers a function that will be called when
   * any modifications are made.
   *
   * For convenience the callback is called immediately after registering
   * which can be prevented with `preventImmediate` param.
   *
   * Will also automatically unregister the callback upon scope destory.
   */
  this.registerObserver = function($scope, cb, preventImmediate){
    observerCallbacks.push(cb);

    if (preventImmediate !== true) {
      cb();
    }

    $scope.$on('$destroy', function () {
      observerCallbacks.remove(cb);
    });
  };

  function notifyObservers() {
    observerCallbacks.forEach(function (cb) {
      cb();
    });
  };

  this.foo = someNgResource.query().$then(function(){
    notifyObservers();
  });
}); 
```

Array.remove 是一个扩展方法，如下所示：

```
/**
 * Removes the given item the current array.
 *
 * @param  {Object}  item   The item to remove.
 * @return {Boolean}        True if the item is removed.
 */
Array.prototype.remove = function (item /*, thisp */) {
    var idx = this.indexOf(item);

    if (idx > -1) {
        this.splice(idx, 1);

        return true;
    }
    return false;
}; 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-09-29T09:26:18.547

对于像我这样只是在寻找简单解决方案的人来说，这几乎完全符合您在控制器中使用普通 $watch 的期望。唯一的区别是，它在它的 javascript 上下文中而不是在特定范围内评估字符串。您必须将 $rootScope 注入您的服务，尽管它仅用于正确连接到摘要周期。

```
function watch(target, callback, deep) {
    $rootScope.$watch(function () {return eval(target);}, callback, deep);
}; 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-02-18T01:02:36.307

我遇到了这个问题，但事实证明我的问题是我应该使用 angular $interval 提供程序时使用了 setInterval。这也是 setTimeout 的情况（使用 $timeout 代替）。我知道这不是 OP 问题的答案，但它可能对一些人有所帮助，因为它帮助了我。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-12-29T08:01:43.510

在面临一个非常相似的问题时，我在范围内观察了一个函数并让该函数返回服务变量。我创建了一个[js fiddle](http://jsfiddle.net/chandings/tLp2b47n/5/)。您可以在下面找到代码。

```
 var myApp = angular.module("myApp",[]);

myApp.factory("randomService", function($timeout){
    var retValue = {};
    var data = 0;

    retValue.startService = function(){
        updateData();
    }

    retValue.getData = function(){
        return data;
    }

    function updateData(){
        $timeout(function(){
            data = Math.floor(Math.random() * 100);
            updateData()
        }, 500);
    }

    return retValue;
});

myApp.controller("myController", function($scope, randomService){
    $scope.data = 0;
    $scope.dataUpdated = 0;
    $scope.watchCalled = 0;
    randomService.startService();

    $scope.getRandomData = function(){
        return randomService.getData();    
    }

    $scope.$watch("getRandomData()", function(newValue, oldValue){
        if(oldValue != newValue){
            $scope.data = newValue;
            $scope.dataUpdated++;
        }
            $scope.watchCalled++;
    });
}); 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2013-09-17T03:44:30.953

这是我的通用方法。

```
mainApp.service('aService',[function(){
        var self = this;
        var callbacks = {};

        this.foo = '';

        this.watch = function(variable, callback) {
            if (typeof(self[variable]) !== 'undefined') {
                if (!callbacks[variable]) {
                    callbacks[variable] = [];
                }
                callbacks[variable].push(callback);
            }
        }

        this.notifyWatchersOn = function(variable) {
            if (!self[variable]) return;
            if (!callbacks[variable]) return;

            angular.forEach(callbacks[variable], function(callback, key){
                callback(self[variable]);
            });
        }

        this.changeFoo = function(newValue) {
            self.foo = newValue;
            self.notifyWatchersOn('foo');
        }

    }]); 
```

在你的控制器中

```
function FooCtrl($scope, aService) {
    $scope.foo;

    $scope._initWatchers = function() {
        aService.watch('foo', $scope._onFooChange);
    }

    $scope._onFooChange = function(newValue) {
        $scope.foo = newValue;
    }

    $scope._initWatchers();

}

FooCtrl.$inject = ['$scope', 'aService']; 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-07-23T12:42:52.107

我在另一个有类似问题但方法完全不同的线程上找到了一个非常好的解决方案。资料来源：[AngularJS：当 $rootScope 值更改时，指令内的 $watch 不起作用](https://stackoverflow.com/questions/27265695/watch-within-directive-is-not-working-when-rootscope-value-is-changed)

**基本上**那里的解决方案告诉**不要**使用`$watch`，因为它是非常重的解决方案。**相反**，他们建议使用`$emit`and `$on`。

我的问题是在我的**服务中***观察*一个变量并在**指令**中做出反应。而且用上面的方法就很简单了！

 ****我的模块/服务示例：

```
angular.module('xxx').factory('example', function ($rootScope) {
    var user;

    return {
        setUser: function (aUser) {
            user = aUser;
            $rootScope.$emit('user:change');
        },
        getUser: function () {
            return (user) ? user : false;
        },
        ...
    };
}); 
```

所以基本上我*看*我的`user` - 每当它设置为新值时，我就是`$emit`一个`user:change`状态。

现在就我而言，在我使用的*指令*中：

```
angular.module('xxx').directive('directive', function (Auth, $rootScope) {
    return {
        ...
        link: function (scope, element, attrs) {
            ...
            $rootScope.$on('user:change', update);
        }
    };
}); 
```

现在在*指令*中，我听取了`$rootScope`和**给**定的变化——我分别做出反应。非常轻松优雅！

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-06-06T14:34:04.690

有点难看，但我已经在我的服务中添加了范围变量的注册以进行切换：

```
myApp.service('myService', function() {
    var self = this;
    self.value = false;
    self.c2 = function(){};
    self.callback = function(){
        self.value = !self.value; 
       self.c2();
    };

    self.on = function(){
        return self.value;
    };

    self.register = function(obj, key){ 
        self.c2 = function(){
            obj[key] = self.value; 
            obj.$apply();
        } 
    };

    return this;
}); 
```

然后在控制器中：

```
function MyCtrl($scope, myService) {
    $scope.name = 'Superhero';
    $scope.myVar = false;
    myService.register($scope, 'myVar');
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-09-07T11:44:37.557

看看这个 plunker:: 这是我能想到的最简单的例子

[http://jsfiddle.net/HEdJF/](http://jsfiddle.net/HEdJF/)

```
<div ng-app="myApp">
    <div ng-controller="FirstCtrl">
        <input type="text" ng-model="Data.FirstName"><!-- Input entered here -->
        <br>Input is : <strong>{{Data.FirstName}}</strong><!-- Successfully updates here -->
    </div>
    <hr>
    <div ng-controller="SecondCtrl">
        Input should also be here: {{Data.FirstName}}<!-- How do I automatically updated it here? -->
    </div>
</div>

// declare the app with no dependencies
var myApp = angular.module('myApp', []);
myApp.factory('Data', function(){
   return { FirstName: '' };
});

myApp.controller('FirstCtrl', function( $scope, Data ){
    $scope.Data = Data;
});

myApp.controller('SecondCtrl', function( $scope, Data ){
    $scope.Data = Data;
}); 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-05-13T18:54:11.330

// 服务：（这里没什么特别的）

```
myApp.service('myService', function() {
  return { someVariable:'abc123' };
}); 
```

// 控制：

```
myApp.controller('MyCtrl', function($scope, myService) {

  $scope.someVariable = myService.someVariable;

  // watch the service and update this ctrl...
  $scope.$watch(function(){
    return myService.someVariable;
  }, function(newValue){
    $scope.someVariable = newValue;
  });
}); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-12-26T12:35:25.093

我在这里看到了一些可怕的观察者模式，它们会导致大型应用程序出现内存泄漏。

我可能晚了一点，但就这么简单。

如果您想查看类似数组推送的内容，watch 函数会查看引用更改（原始类型），只需使用：

`someArray.push(someObj); someArray = someArray.splice(0);`

这将更新参考并从任何地方更新手表。包括一个服务获取方法。任何原始的东西都会自动更新。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-08-18T20:00:13.657

我迟到了，但我找到了比上面发布的答案更好的方法。我没有分配一个变量来保存服务变量的值，而是创建了一个附加到范围的函数，它返回服务变量。

**控制器**

```
$scope.foo = function(){
 return aService.foo;
} 
```

我认为这会做你想要的。我的控制器通过这个实现不断检查我的服务的价值。老实说，这比选择的答案要简单得多。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-08-25T10:51:50.017

我编写了两个简单的实用程序服务来帮助我跟踪服务属性的变化。

如果你想跳过冗长的解释，你可以去[jsfiddle](https://jsfiddle.net/maxkovalov/xcr5q70x/)

1.  观察对象

```
mod.service('WatchObj', ['$rootScope', WatchObjService]);

function WatchObjService($rootScope) {
  // returns watch function
  // obj: the object to watch for
  // fields: the array of fields to watch
  // target: where to assign changes (usually it's $scope or controller instance)
  // $scope: optional, if not provided $rootScope is use
  return function watch_obj(obj, fields, target, $scope) {
    $scope = $scope || $rootScope;
    //initialize watches and create an array of "unwatch functions"
    var watched = fields.map(function(field) {
      return $scope.$watch(
        function() {
          return obj[field];
        },
        function(new_val) {
          target[field] = new_val;
        }
      );
    });
    //unregister function will unregister all our watches
    var unregister = function unregister_watch_obj() {
      watched.map(function(unregister) {
        unregister();
      });
    };
    //automatically unregister when scope is destroyed
    $scope.$on('$destroy', unregister);
    return unregister;
  };
}
```

该服务在控制器中的使用方式如下：假设您有一个服务“testService”，其属性为“prop1”、“prop2”、“prop3”。您想观察并分配给范围“prop1”和“prop2”。使用 watch 服务，它看起来像这样：

```
app.controller('TestWatch', ['$scope', 'TestService', 'WatchObj', TestWatchCtrl]);

function TestWatchCtrl($scope, testService, watch) {
  $scope.prop1 = testService.prop1;
  $scope.prop2 = testService.prop2;
  $scope.prop3 = testService.prop3;
  watch(testService, ['prop1', 'prop2'], $scope, $scope);
}
```

2.  apply Watch obj 很棒，但如果您的服务中有异步代码，这还不够。对于这种情况，我使用第二个实用程序，如下所示：

```
mod.service('apply', ['$timeout', ApplyService]);

function ApplyService($timeout) {
  return function apply() {
    $timeout(function() {});
  };
}
```

我会在我的异步代码末尾触发它来触发 $digest 循环。像那样：

```
app.service('TestService', ['apply', TestService]);

function TestService(apply) {
  this.apply = apply;
}
TestService.prototype.test3 = function() {
  setTimeout(function() {
    this.prop1 = 'changed_test_2';
    this.prop2 = 'changed2_test_2';
    this.prop3 = 'changed3_test_2';
    this.apply(); //trigger $digest loop
  }.bind(this));
}
```

所以，所有这些看起来像这样（你可以运行它或[打开 fiddle](https://jsfiddle.net/maxkovalov/xcr5q70x/)）：

```
// TEST app code

var app = angular.module('app', ['watch_utils']);

app.controller('TestWatch', ['$scope', 'TestService', 'WatchObj', TestWatchCtrl]);

function TestWatchCtrl($scope, testService, watch) {
  $scope.prop1 = testService.prop1;
  $scope.prop2 = testService.prop2;
  $scope.prop3 = testService.prop3;
  watch(testService, ['prop1', 'prop2'], $scope, $scope);
  $scope.test1 = function() {
    testService.test1();
  };
  $scope.test2 = function() {
    testService.test2();
  };
  $scope.test3 = function() {
    testService.test3();
  };
}

app.service('TestService', ['apply', TestService]);

function TestService(apply) {
  this.apply = apply;
  this.reset();
}
TestService.prototype.reset = function() {
  this.prop1 = 'unchenged';
  this.prop2 = 'unchenged2';
  this.prop3 = 'unchenged3';
}
TestService.prototype.test1 = function() {
  this.prop1 = 'changed_test_1';
  this.prop2 = 'changed2_test_1';
  this.prop3 = 'changed3_test_1';
}
TestService.prototype.test2 = function() {
  setTimeout(function() {
    this.prop1 = 'changed_test_2';
    this.prop2 = 'changed2_test_2';
    this.prop3 = 'changed3_test_2';
  }.bind(this));
}
TestService.prototype.test3 = function() {
  setTimeout(function() {
    this.prop1 = 'changed_test_2';
    this.prop2 = 'changed2_test_2';
    this.prop3 = 'changed3_test_2';
    this.apply();
  }.bind(this));
}
//END TEST APP CODE

//WATCH UTILS
var mod = angular.module('watch_utils', []);

mod.service('apply', ['$timeout', ApplyService]);

function ApplyService($timeout) {
  return function apply() {
    $timeout(function() {});
  };
}

mod.service('WatchObj', ['$rootScope', WatchObjService]);

function WatchObjService($rootScope) {
  // target not always equals $scope, for example when using bindToController syntax in 
  //directives
  return function watch_obj(obj, fields, target, $scope) {
    // if $scope is not provided, $rootScope is used
    $scope = $scope || $rootScope;
    var watched = fields.map(function(field) {
      return $scope.$watch(
        function() {
          return obj[field];
        },
        function(new_val) {
          target[field] = new_val;
        }
      );
    });
    var unregister = function unregister_watch_obj() {
      watched.map(function(unregister) {
        unregister();
      });
    };
    $scope.$on('$destroy', unregister);
    return unregister;
  };
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
<div class='test' ng-app="app" ng-controller="TestWatch">
  prop1: {{prop1}}
  <br>prop2: {{prop2}}
  <br>prop3 (unwatched): {{prop3}}
  <br>
  <button ng-click="test1()">
    Simple props change
  </button>
  <button ng-click="test2()">
    Async props change
  </button>
  <button ng-click="test3()">
    Async props change with apply
  </button>
</div>
```****

# android - 应用程序启动时数据库不可用

> ID：12576799
> 
> 赞同：1
> 
> 时间：2012-09-25T05:41:11.300
> 
> 标签：android, database

我的应用程序的数据库有问题。数据库应该在我的应用程序启动时可用，但是目前数据库只会在我输入需要插入数据库的数据时出现在 ddms 上，这是不正确的。有人对解决我的问题有想法吗？任何帮助将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:54:44.100

在您的应用程序启动时，您需要检查数据库是否已经存在于 ddms 中。如果数据库存在，那么您必须对其进行配置，以便之后一切都会好起来

这是完整的代码..

```
package com.MyPackage;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.UUID;

import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class AnyDBAdapter {

private static final String TAG = "AnyDBAdapter";
private DatabaseHelper mDbHelper;
private static SQLiteDatabase mDb;

//make sure this matches the 
//package com.MyPackage;
//at the top of this file
private static String DB_PATH = "/data/data/com.MyPackage/databases/";

//make sure this matches your database name in your assets folder
// my database file does not have an extension on it 
// if yours does
// add the extention
private static final String DATABASE_NAME = "data";

//Im using an sqlite3 database, I have no clue if this makes a difference or not
private static final int DATABASE_VERSION = 3;

private final Context adapterContext;

public AnyDBAdapter(Context context) {
    this.adapterContext = context;
}

public AnyDBAdapter open() throws SQLException {
    mDbHelper = new DatabaseHelper(adapterContext);

    try {
        mDbHelper.createDataBase();
    } catch (IOException ioe) {
        throw new Error("Unable to create database");
    }

    try {
        mDbHelper.openDataBase();
    } catch (SQLException sqle) {
        throw sqle;
    }
    return this;
}
//Usage from outside
// AnyDBAdapter dba = new AnyDBAdapter(contextObject); //in my case contextObject is a  map
// dba.open();
// Cursor c = dba.ExampleSelect("Rawr!");
// contextObject.startManagingCursor(c);
// String s1 = "", s2 = "";
// if(c.moveToFirst())
// do {
//  s1 = c.getString(0);
//  s2 = c.getString(1);
//  } while (c.moveToNext());
// dba.close();
public Cursor ExampleSelect(string myVariable)
{
    String query = "SELECT locale, ? FROM android_metadata";
    return mDb.rawQuery(query, new String[]{myVariable});
}

//Usage
// AnyDBAdatper dba = new AnyDBAdapter(contextObjecT);
// dba.open();
// dba.ExampleCommand("en-CA", "en-GB");
// dba.close();
public void ExampleCommand(String myVariable1, String myVariable2)
{
    String command = "INSERT INTO android_metadata (locale) SELECT ? UNION ALL SELECT  ?";
    mDb.execSQL(command, new String[]{ myVariable1, myVariable2});
}

public void close() {
    mDbHelper.close();
}

private static class DatabaseHelper extends SQLiteOpenHelper {

    Context helperContext;

    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        helperContext = context;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(TAG, "Upgrading database!!!!!");
        //db.execSQL("");
        onCreate(db);
    }

    public void createDataBase() throws IOException {
        boolean dbExist = checkDataBase();
        if (dbExist) {
        } else {

            //make sure your database has this table already created in it
            //this does not actually work here
            /*
             * db.execSQL("CREATE TABLE IF NOT EXISTS \"android_metadata\" (\"locale\"     TEXT DEFAULT 'en_US')"
             * );
             * db.execSQL("INSERT INTO \"android_metadata\" VALUES ('en_US')"
             * );
             */
            this.getReadableDatabase();
            try {
                copyDataBase();
            } catch (IOException e) {
                throw new Error("Error copying database");
            }
        }
    }

    public SQLiteDatabase getDatabase() {
        String myPath = DB_PATH + DATABASE_NAME;
        return SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);
    }

    private boolean checkDataBase() {
        SQLiteDatabase checkDB = null;
        try {
            String myPath = DB_PATH + DATABASE_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null,
                    SQLiteDatabase.OPEN_READONLY);
        } catch (SQLiteException e) {
        }
        if (checkDB != null) {
            checkDB.close();
        }
        return checkDB != null ? true : false;
    }

    private void copyDataBase() throws IOException {

        // Open your local db as the input stream
        InputStream myInput = helperContext.getAssets().open(DATABASE_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DATABASE_NAME;

        // Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        // transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);
        }

        // Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();
    }

    public void openDataBase() throws SQLException {
        // Open the database
        String myPath = DB_PATH + DATABASE_NAME;
        mDb = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READWRITE);
    }

    @Override
    public synchronized void close() {

        if (mDb != null)
            mDb.close();

        super.close();

    }
}

} 
```

# javascript - 我可以停止行动吗？

> ID：12576803
> 
> 赞同：1
> 
> 时间：2012-09-25T05:41:21.670
> 
> 标签：javascript

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T05:44:03.570

采用

```
return false; 
```

在你的函数 someFunction() 中触发 onclick 事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T05:44:35.280

```
function someFunction() {
  return confirm("Do you agree?");
} 
```

确认函数返回用户的答案，而 someFunction 将其返回给`<a>`'s onclick。如果它为 false，它将停止链接到 href。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T05:47:21.093

或使用 preventDefault：

```
function someFunction(e) {
   if (!confirm('.. ')) e.preventDefault();

  // continue download
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T05:48:39.617

您可以将 false 返回到 onclick 事件。

```
function someFunction()
{
    if(confirm("Do you want to download now ?")) {
        return true;
    }
    else
    {
        return false;
    }
}

<a href="http://www.google.com" onclick="return someFunction()">Click here</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T05:48:40.947

```
function someFunction() {
 if(confirm("Do you want to download now ?") ) {
     // download file code goes here
 } else {
   return false;
 }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T05:59:15.520

```
<a href="" onclick="return someFunction();">Test</a>

function someFunction() {
  if (confirm("Do you agree?")) {
    /* some code if YES */
    return true;
  }
  else {
    /* some code if NO */
    return false;
  }
} 
```

或者：

```
<a href="" onclick="someFunction(event);">Test</a>

function someFunction(event) {
  if (confirm("Do you agree?")) {
    /* some code if YES */
  }
  else {
    /* some code if NO */
    if (event.preventDefault) event.preventDefault();
    else event.returnValue=false;
  }
} 
```

# jquery - 在 phonegap 应用程序中集成 DHTML 调度程序日历

> ID：12576805
> 
> 赞同：0
> 
> 时间：2012-09-25T05:41:42.767
> 
> 标签：jquery, mobile, cordova, dhtml

当我第一次尝试在我的 phonegap 应用程序中加载调度程序日历时，它会显示我真正想要的正确数据，但是当我回到其他页面并尝试加载不同的数据时，日历没有正确刷新。它根据旧 ID 显示旧数据。它不解析新 id 的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:41:42.043

也许你可以在你的javascript文件的“pageshow”方法上调用日历，比如：

`$page.on('pageshow', function(){`
`showCalendar();` `})`

# google-apps-script - 从该域的管理员帐户访问域用户的数据

> ID：12576806
> 
> 赞同：0
> 
> 时间：2012-09-25T05:41:48.430
> 
> 标签：google-apps-script

我是一个域的管理员，我想访问和下载
我的域用户的数据（文档、联系人、站点、日历、电子邮件）......这是否可能以及如何？请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:51:04.150

域管理员无法使用 Google Apps 脚本访问用户数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:47:52.363

我得到了我的答案。是的，我们可以通过谷歌脚本从管理员帐户访问域用户的文档、日历、站点和电子邮件，但我们无法从管理员帐户访问域用户的联系人

# wix - 如何从注册表项设置 TARGETDIR 或 INSTALLDIR？

> ID：12576807
> 
> 赞同：0
> 
> 时间：2012-09-25T05:41:48.407
> 
> 标签：wix

从我上次运行安装程序时设置的 Windows 注册表中的值设置安装目录时，我遇到了很大的问题。这可以正确默认路径。奇怪的是，我们总是让用户设置安装路径，即使在升级时，如果它与上次安装的文件夹不同，那么我们不会`RemoveExistingProducts`为了让用户运行应用程序的多个版本而这样做并排。

现在，我一直在网上搜索解决方案，并找到了很多建议，但这些建议都没有真正影响我`INSTALLDIR`，我可以在设置 UI 中看到这些建议，我可以在其中选择安装位置。

这是我目前得到的：

```
<Property Id="PREVINSTALLDIR">
   <RegistrySearch Id="PrevInstallDir" 
                   Root="HKCU" 
                   Key="Software\MyCompany\MyApp" 
                   Name="InstallDir" 
                   Type="raw" />
</Property>

<CustomAction Id="SetTargetDir" Property="TARGETDIR" 
              Value="[PREVINSTALLDIR]" 
              Execute="firstSequence" />

<InstallExecuteSequence>
   <Custom Action="SetTargetDir" Before="CostFinalize"></Custom>
   <RemoveExistingProducts After="InstallFinalize">PREVINSTALLDIR ~= INSTALLDIR</RemoveExistingProducts>
</InstallExecuteSequence> 
```

谁能发现我在这里做错了什么？

`PREVINSTALLDIR`请注意，已阅读RemoveExistingProducts 部分的工作原理。在设置日志中，我还可以看到：

```
Action start 13:50:27: AppSearch. 
AppSearch: Property: PREVINSTALLDIR, Signature: PrevInstallDir 
Action ended 13:50:27: AppSearch. Return value 1\. 
```

退出设置时，属性被转储到日志文件中，我看到：

```
Property(C): PREVINSTALLDIR = C:\Some\Path\MyApp 
Property(C): TARGETDIR = C:\ 
Property(C): MyAppDir = C:\ProgramData\Microsoft\Windows\Start Menu\Programs\MyApp\ 
Property(C): INSTALLDIR = C:\Program Files (x86)\MiTek\MyApp\ 
```

`INSTALLDIR`不受我上面的 wix 脚本的影响，我`TARGETDIR`认为也不会受到影响`C:\Some\Path\MyApp`。

我在这里尝试了很多东西，但无论如何我无法做出`TARGETDIR`或`INSTALLDIR`改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T07:49:07.150

这对我有用：

```
<!-- Existing install path -->
<Property Id="EXISTINGINSTALLDIR" Secure="yes">
    <RegistrySearch Id="Locate_EXISTINGINSTALLDIR" Root="HKCU" Key="Software\$(var.CompanyName)\$(var.ProductName)" Name="InstallDir" Type="directory" />
</Property>

<!-- custom action specification -->
<CustomAction Id="Set_INSTALLDIR" Execute="firstSequence" Property="INSTALLDIR" Value="[EXISTINGINSTALLDIR]" />

<InstallExecuteSequence>
    <Custom Action="Set_INSTALLDIR" After="FileCost"><![CDATA[NOT Installed AND (NOT INSTALLDIR) AND EXISTINGINSTALLDIR]]></Custom>
</InstallExecuteSequence>

<InstallUISequence>
  <Custom Action="Set_INSTALLDIR" After="FileCost"><![CDATA[NOT Installed AND (NOT INSTALLDIR) AND EXISTINGINSTALLDIR]]></Custom>
</InstallUISequence> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:46:10.363

嗨，我设法`INSTALLLOCATION`使用以下方法进行了更改：

```
<SetDirectory Id="INSTALLLOCATION" Value="[$(var.PlatformProgramFilesFolder)]\[$(var.Manufacturer)]\[ProductName]" Sequence="both"></SetDirectory> 
```

`Value`必须是完整路径..希望这有帮助..:)

# haskell - 使用 Codec.BMP 时出现“无法将预期类型与实际类型匹配”错误

> ID：12576817
> 
> 赞同：5
> 
> 时间：2012-09-25T05:43:02.190
> 
> 标签：haskell

我对 Haskell 的经验很少，我想写一个简单的光线追踪器来练习。因为我不想使用 wxHaskell 之类的 GUI 工具（我认为学习如何使用它们需要很多时间），所以我决定简单地将输出图像保存为 BMP 文件。但是我这里有个问题：

```
module Main where

import Codec.BMP
import qualified Data.ByteString as BS

main = do
  Right bmp <- readBMP "grass.bmp"
  BS.putStrLn $ BS.take 4 $ unpackBMPToRGBA32 bmp 
```

在这里，我只想获取图像的第一个像素并打印其 RGBA 值。但我得到一个错误说

```
Couldn't match expected type `BS.ByteString'
            with actual type `bytestring-0.9.2.1:Data.ByteString.Internal.ByteString'
In the return type of a call of `unpackBMPToRGBA32'
In the second argument of `($)', namely `unpackBMPToRGBA32 bmp'
In the second argument of `($)', namely
  `BS.take 4 $ unpackBMPToRGBA32 bmp' 
```

我究竟做错了什么？如何获取图像的像素并打印它们的值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T06:03:16.633

你安装了两个`bytestring`包，所以从, 并期望从其他版本`unpackBMPToRGBA32`返回。`ByteString``bytestring-0.9.2.1``BS.putStrLn``ByteString`

尝试`ghc-pkg list bytestring`列出所有`bytestring`已安装的版本。

解决方案可能是

*   注销其中一个`ghc-pkg unregister bytestring-<version>`
*   构建时隐藏其中一个：`ghc --make -hide-package bytestring-<version>`

# asp.net - 重命名 .aspx 文件不会更改继承属性（asp.net 4.0）

> ID：12576818
> 
> 赞同：0
> 
> 时间：2012-09-25T05:43:04.553
> 
> 标签：asp.net

我必须在解决方案资源管理器中重命名一个文件。
我做了以下步骤
右键单击该文件并将其更改为 Login.aspx 到 Default.aspx。
在页面指令中的 .aspx 中，***Inherits*** 属性不会自动更改。
这是否意味着当我重命名文件时，我将不得不手动更改 Inherits 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:49:29.127

是的。您将不得不手动更改继承属性。

# vb6 - 在VB6中等待进程退出后恢复窗口

> ID：12576821
> 
> 赞同：3
> 
> 时间：2012-09-25T05:43:23.477
> 
> 标签：vb6, window, process

我在 win7 64 位操作系统中使用 VB6。此应用程序是从 xp..

```
Me.WindowState = vbMinimized
WaitForProcess Shell(launchapp, vbNormalFocus)
Me.WindowState = vbNormal 
```

在启动启动应用程序之前，我的代码会最小化主应用程序并将启动一个 exe。用户关闭 exe 后，我的主应用程序必须从最小化状态恢复正常。这在 xp 中运行良好，但在 win 7 中，我最小化的主应用程序只是闪烁并再次回到最小化状态。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:01:34.060

[如文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633539%28v=vs.85%29.aspx)中所述，Windows 7 将不允许应用程序使用 SetForegroundWindow 获取焦点。见备注。

一种解决方法是暂时`AttachThreadInput`转到具有焦点的线程，给自己焦点，然后再次分离。Karl E Peterson 提供了一个[插入模块](http://vb.mvps.org/samples/ForceFore/)来执行此操作[，](http://vb.mvps.org/samples/ForceFore/)并附有[杂志文章](http://vb.mvps.org/articles/ap199902.pdf)。

免责声明：Windows 大师 Raymond Chen 指出，这种解决方法可能会导致您的程序在某些情况下[停止响应。](https://stackoverflow.com/a/8081858/15639)但是，我自己从未遇到过这些错误。YMMV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:01:45.803

我们正在使用 Win32 API 函数 SetForegroundWindow 来解决类似的问题（一些窗口，尤其是进程外窗口，将保留在 W7 上的主应用程序窗口之后）。

```
Declare Function SetForegroundWindow Lib "user32.dll" (ByVal hwnd As Long) As Long 
```

这是 API 声明，搜索 google 使用。这里有一些信息：[VBA 与 Internet Explorer 的交互](https://stackoverflow.com/questions/11652890/vba-interaction-with-internet-explorer)。如果您需要控制不同进程中的窗口，则还需要另一个 API - AllowSetForegroundWindow。

# c++ - cvLoadImage 函数中的内存泄漏

> ID：12576825
> 
> 赞同：1
> 
> 时间：2012-09-25T05:43:54.697
> 
> 标签：c++, c, winforms, visual-studio-2010, opencv

我在图片框中制作了一个强度计。为了制作这个强度计，我使用了一张图片作为拨号器（Dialer.bmp）并使用线制作针。我正在使用 openCV 执行此操作。并更改指针指针，我们在表单加载时创建了一个线程。代码如下

```
private: System::Void FocusExposure_Load(System::Object^  sender, System::EventArgs^  e) {
 if(ExposureThreadStatus)
                     th->Abort();
                 th = gcnew Thread(gcnew ThreadStart(this,&FocusExposure::UpdateIntensity)); 
                th->Start();
                ExposureThreadStatus = true;
                }

void UpdateIntensity()
{
Intensity_Values data;
 while(1)
 {

 data = ReadImage(focusBuffer);
    System::Drawing::Bitmap ^bmp=drawImageMeter(data.Max);
     this->pictureBox1->Image =this->pictureBox1->Image->FromHbitmap(bmp->GetHbitmap());
     delete bmp;
     Sleep(1000);                   
 }
}

 System::Drawing::Bitmap^ drawImageMeter(float intensity_value)
{
        IplImage  *Background =cvLoadImage("Dialer.bmp", 1);
        int width,height;
        if(counter==1)
        {
        width=Background->width;
           height=Background->height;
            counter++;
        needle_center.x=width/2;
        needle_center.y=height/2;
        needle_top.x=needle_center.x;
        needle_top.y=needle_center.y-140;
        }
            double const PI = 3.14159265358979323;
           int x1 = needle_top.x; 
           int y1 = needle_top.y;
           int x0=needle_center.x;
           int y0=needle_center.y;
           float angle;
            CurrIntensity = intensity_value;
            angle = CurrIntensity-PreIntensity;
            angle= 0.0703125f * angle;
           // degrees, not radians
           float radians = angle * (PI / 180.0f);   // convert degrees to radians

           if (current_max==1)
            {
                current_max++;
                int N1x1 = needle_top.x; 
                int N1y1 = needle_top.y;
                needle1_top.x = ((N1x1-x0) * cos(radians)) - ((N1y1-y0) * sin(radians)) + x0; 
                needle1_top.y = ((N1x1-x0) * sin(radians)) + ((N1y1-y0) * cos(radians)) + y0;
            }
           needle_top.x = ((x1-x0) * cos(radians)) - ((y1-y0) * sin(radians)) + x0; 
           needle_top.y = ((x1-x0) * sin(radians)) + ((y1-y0) * cos(radians)) + y0;

           cvLine(Background, needle_center, needle1_top, CV_RGB(0, 0, 255), 1, 4, 0);
           cvLine(Background, needle_center, needle_top, CV_RGB(255, 0, 0), 1, 4, 0);
         System::Drawing::Bitmap ^bmp = gcnew System::Drawing::Bitmap(Background->width,Background->height,Background->widthStep,System::Drawing::Imaging::PixelFormat::Format24bppRgb,(System::IntPtr)Background->imageData);
         PreIntensity = CurrIntensity;
         return bmp;

} 
```

此代码工作正常，并根据我的要求提供输出。但唯一的问题是，当我打开表单时，它会导致内存泄漏。我在任务管理器中看到过，也使用过 Intel Vtune 分析器。此分析器在以下行显示**不匹配的分配/解除分配**

**`IplImage *Background =cvLoadImage("Dialer.bmp", 1);`**

我们需要重新加载此图像，因为我们正在图像上绘制线条，并且当​​指针指针发生变化时，它需要没有指针的拨号器图像。

任何人都可以向我建议任何解决此内存泄漏问题的解决方案。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:52:47.347

似乎`drawImageMeter()`不止一次被调用。问题是每次`cvLoadImage()`执行时，它都会在 HEAP 上为像素分配空间。因此，在显示图像后，您应该释放它，`cvReleaseImage()`以便释放数据。

一个快速而肮脏（和可怕）的解决方法是[制作`variable`static](https://stackoverflow.com/questions/572547/what-does-static-mean-in-a-c-program)：

```
static IplImage* Background =cvLoadImage("Dialer.bmp", 1); 
```

但是你真的应该**改变你的应用程序的设计，**所以`Background`它只分配一次。为此，您可以将其设为全局变量并将其加载到`main()`方法中，或者将其设为以下参数`drawImageMeter()`：

```
System::Drawing::Bitmap^ drawImageMeter(IplImage* Background, float intensity_value)
{
   // code
} 
```

# html - sencha touch 2.0 与其他框架有何不同？

> ID：12576828
> 
> 赞同：0
> 
> 时间：2012-09-25T05:44:02.200
> 
> 标签：html, jquery-mobile, sencha-touch, sencha-touch-2

有更多的框架可用于开发 HTML5 应用程序，如 jQuery mobile、Sencha touch。

那么，sencha touch 与其他框架有何不同？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T06:01:46.493

如果是关于 jQuery mobile 与 Sencha touch 的对比，Miami coders 在[这里](http://miamicoder.com/2011/sencha-touch-or-jquery-mobile-read-this-before-you-make-a-decision/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:49:58.937

Sencha Touch 提供的一些功能是

```
1\. Sencha Architect IDE to code and visually create apps.
2\. Sencha Cmd which provides tools for building and deploying applications.
3\. Sencha provides some native apis for use.
4\. Rich UI out of the box.
5\. Built on top of the webkit engine. So supports only those browsers at the moment.
6\. Built in MVC structure
.... 
```

功能可以这样继续。还有其他可以使用的库，但您可能需要使用其他库（如骨干网等）来提供 Sencha Touch 中的一些功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:05:34.330

嗨，我有一个链接，您可以在其中找到 sencha touch 和其他框架工作之间的区别。此链接将向您介绍 Sencha、Phonegap 和 Rhomobile 框架。

希望它对你有用。

[http://www.smartsourcingglobal.com/2012/07/31/cross-device-mobile-application-development-comparison-phonegap-rhomobile-sencha-3/](http://www.smartsourcingglobal.com/2012/07/31/cross-device-mobile-application-development-comparison-phonegap-rhomobile-sencha-3/)

# .htaccess - 使用 .htaccess 进行 Gzip 压缩

> ID：12576841
> 
> 赞同：0
> 
> 时间：2012-09-25T05:44:51.463
> 
> 标签：.htaccess, optimization, compression, gzip

我正在使用 .htaccess 创建 GZip 压缩。我正在使用以下代码来压缩 te js、css 文件

```
<ifModule mod_gzip.c>
  mod_gzip_on Yes
  mod_gzip_dechunk Yes
  mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$
  mod_gzip_item_include handler ^cgi-script$
  mod_gzip_item_include mime ^text/.*
  mod_gzip_item_include mime ^application/x-javascript.*
  mod_gzip_item_exclude mime ^image/.*
  mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule> 
```

但它不能在服务器上压缩我的文件。请让我知道 gzip 压缩的代码

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T08:45:05.973

由于您使用的是 Apache 2.2，因此您可能没有安装 mod_gzip，他们已转而使用[mod_deflate](http://httpd.apache.org/docs/2.2/mod/mod_deflate.html)。

mod_deflate 文档为您提供了一些示例配置，但看起来您需要以下内容：

```
 <FilesMatch "\.(html?|txt|css|js|php|pl)$">
    SetOutputFilter DEFLATE
 </FilesMatch> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-30T14:07:24.187

对我有很大帮助的最新 Gzip

```
<IfModule mod_deflate.c>
  # Compress HTML, CSS, JavaScript, Text, XML and fonts
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/rss+xml
  AddOutputFilterByType DEFLATE application/vnd.ms-fontobject
  AddOutputFilterByType DEFLATE application/x-font
  AddOutputFilterByType DEFLATE application/x-font-opentype
  AddOutputFilterByType DEFLATE application/x-font-otf
  AddOutputFilterByType DEFLATE application/x-font-truetype
  AddOutputFilterByType DEFLATE application/x-font-ttf
  AddOutputFilterByType DEFLATE application/x-javascript
  AddOutputFilterByType DEFLATE application/xhtml+xml
  AddOutputFilterByType DEFLATE application/xml
  AddOutputFilterByType DEFLATE font/opentype
  AddOutputFilterByType DEFLATE font/otf
  AddOutputFilterByType DEFLATE font/ttf
  AddOutputFilterByType DEFLATE image/svg+xml
  AddOutputFilterByType DEFLATE image/x-icon
  AddOutputFilterByType DEFLATE text/css
  AddOutputFilterByType DEFLATE text/html
  AddOutputFilterByType DEFLATE text/javascript
  AddOutputFilterByType DEFLATE text/plain
  AddOutputFilterByType DEFLATE text/xml

  # Remove browser bugs (only needed for really old browsers)
  BrowserMatch ^Mozilla/4 gzip-only-text/html
  BrowserMatch ^Mozilla/4\.0[678] no-gzip
  BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
  Header append Vary User-Agent
</IfModule> 
```

# sql-update - 带有跳过主键重复项的 sql 更新命令

> ID：12576843
> 
> 赞同：0
> 
> 时间：2012-09-25T05:44:55.930
> 
> 标签：sql-update, primary-key

我有两个表 T1(col1,col2,col3) 和 T2(col4,col5,col6)

仅对于 T1 ， col1 是主键。

我需要更新 col1=col4, col2 = col5, col3=col6 where col1=col4 or col1=col5

主键有可能被重复......并且更新命令不起作用

基本上更新没有重复的主键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:53:29.063

您不需要更新 col1，因为您正在使用相同的主键更新行。col1 是 T1 的主键，所以不会重复。

查询应该是`UPDATE T1 SET col2=col5, col3=col6 WHERE col1=col4`

如果 col1 != col4 和 col1 = col5 请执行查询`SELECT * FROM T1 WHERE col1 = col4`

如果结果数组中的行数 > 0 则跳过

# php - 将标签文本与数组复选框值一起发布

> ID：12576845
> 
> 赞同：0
> 
> 时间：2012-09-25T05:44:56.843
> 
> 标签：php, javascript

我有以下 html 形式的复选框数组

```
<label><input name="columns[]" type="checkbox" value="pname" />Property Name</label>
<label><input name="columns[]" type="checkbox" value="2000" />Price</label>
<label><input name="columns[]" type="checkbox" value="New Road" />Location</label>
<label><input name="columns[]" type="checkbox" value="Joe Smith" />Owner</label> 
```

大约有 30 个这样的复选框。

我要做的就是在发布表单时发送文本及其复选框的值。可以说，如果我选中了第一个复选框，我想 `pname`与 text 一起发送`Property Name`。可以有多种解决方案，但不知道哪一种更容易。

我想的是那个。在通过复选框数组循环迭代的提交页面中，创建另一个数组并将文本手动推送到这个新数组。

或者我认为的其他选项是，在值属性中，我将发送具有这样值的文本，`pname^Property Name`在提交页面中，我遍历循环，分解值并将它们放入相应的数组中。

有没有其他解决方案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:51:26.040

**HTML**

```
<label><input name="columns['Property Name']" type="checkbox" value="pname" />Property Name</label>
<label><input name="columns['Price']" type="checkbox" value="2000" />Price</label>
<label><input name="columns['Location']" type="checkbox" value="New Road" />Location</label>
<label><input name="columns['Owner']" type="checkbox" value="Joe Smith" />Owner</label> 
```

**PHP**

```
$columns = $_GET["columns"]; // or $_POST

echo $columns["Property Name"] ;   // pname
echo $columns["Price"] ;           // 2000
echo $columns["Location"] ;        // New Orad
echo $columns["Owner"] ;           // Joe Smith 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T05:49:42.513

你可以这样使用

```
$posted_columns = implode(',',$_POST['columns']);
print_r($posted_columns); 
```

但你的代码应该是这样的

```
<label><input name="columns['Property Name']" type="checkbox" value="pname" />Property Name</label> 
```

# php - 如何验证表单中相互关联的文本字段

> ID：12576847
> 
> 赞同：0
> 
> 时间：2012-09-25T05:45:07.420
> 
> 标签：php, javascript, html

我有一个包含许多文本字段的表单。其中我对文本字段（座位区和价格）有疑问。他们可以根据用户的点击次数越来越多地添加。

**这是我的条件：**

**1 -**如果（其中任何一个）座位区文本字段为空或价格文本字段为空，则不应提交表单。

**2 -**我已经使用 jquery 插件来验证一些文本字段，但不是全部。

**3 -**由于字段（座位区和价格在我的情况下彼此相关，我使用它们的名称作为数组来发布数组中的所有值，例如：

```
<tr>
    <td>
        <input type="text" name="fldSeatingarea[]" id="fldSeatingarea[]">
    </td>
    <td>
        <input type="text" name="fldPrice[]" id="fldPrice[]">
    </td>
</tr>
<tr>
    <td>
        <input type="text" name="fldSeatingarea[]" id="fldSeatingarea[]">
    </td>
    <td>
        <input type="text" name="fldPrice[]" id="fldPrice[]">
    </td>
</tr>
<tr>
    <td>
        <input type="text" name="fldSeatingarea[]" id="fldSeatingarea[]">
    </td>
    <td>
        <input type="text" name="fldPrice[]" id="fldPrice[]">
    </td>
</tr> 
```

**4 -**每当用户点击添加更多表格行时插入字段

**5 -**我没有验证这些字段（`fldSeatingarea[]`和`fldPrice[]`）

**6 -**用户必须为同一行的两个字段或同一 tbl 行中的任何一个字段都输入值。

所以我的问题是：提交表单时，我如何才能找到同一表格行的两个字段（`fldSeatingarea[]`和`fldPrice[]`）中的任何一个都不为空？

如果同一表格行的任何一个字段为空，则不应提交表单。

我正在使用 html、php 和一点点 javascript 做这个小实验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-30T12:38:32.330

```
 <tr>
<td>
    <input type="text" name="fldSeatingarea[]" id="fldSeatingarea_1">
</td>
<td>
    <input type="text" name="fldPrice[]" id="fldPrice_2">
</td>
</tr>
<tr>
<td>
    <input type="text" name="fldSeatingarea[]" id="fldSeatingarea_2">
</td>
  <td>
    <input type="text" name="fldPrice" id="fldPrice_2">
  </td>
</tr> 
```

使用 Id's Like this 来引用字段进行验证.. 否则它将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:57:50.617

我并不特别同意您在表单上使用 ID 的方式。当您填充表单时，我会保留一个 JS 数组变量来指示选定的座位区。

然后，您可以将元素的 ID 更改为`fldSeatingarea_3`or`fldSeatingarea_5`并通过遍历数组来定位 area 和 price 元素`for (var n in selection) { //check the 'fldSeatingarea_'+n field }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T05:58:39.533

如果你想要一个概念而不是你可以通过 jquery 用父子概念来做

你必须做的是在表中找到所有 tr，而不是为每个 tr 找到他们的 fldSeatingarea[] 和 fldPrice[]

如果您发现两者都是空的，则在验证它之后返回 false 提交事件

这里有一些链接可以帮助你更多 [http://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/) [http://api.jquery.com/parent/](http://api.jquery.com/parent/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T09:15:54.880

**只是我的观点**

提交表单后，所有字段（fldSeatingarea[] 和 fldPrice[]）都在一个数组中传递。它们都..

您可以使用 count 来比较插入了多少值以及添加了多少字段，如果它们没有相同的值，表单将触发并且不提交，除非它们具有相同的值。

# image - .epub 书未在 ipad 上显示图像

> ID：12576848
> 
> 赞同：0
> 
> 时间：2012-09-25T05:45:08.827
> 
> 标签：image, ipad, xhtml, epub

我想使用图像创建一个 .epub 书。我在单个 xhtml 页面中使用了一个图像。但问题是这个 iPad 没有显示图像，只有蓝色问号被放置。

但这本书在三星标签上完美运行。我也减小了图像大小，但问题仍然相同。

请帮我找出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:21:59.263

我会检查区分大小写。某些设备不会将“sample.jpg”和“Sample.jpg”视为同一个文件。

# javascript - 我是否使用 bootstrap.js 或所有 14 个单独的 .js 文件是否重要？试图建立词缀行为

> ID：12576849
> 
> 赞同：2
> 
> 时间：2012-09-25T05:45:20.267
> 
> 标签：javascript, html, twitter-bootstrap

当我下载 Bootstrap 时，它包括 bootstrap.js 和 bootstrap.min.js -files。例如，我可以使用它们和 jQuery.js 来使导航栏崩溃。

但是，当我查看 bootstrap 网站中任何站点的源代码时，它总是有这些单独的 .js 文件：

```
 <!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
<script src="assets/js/jquery.js"></script>
<script src="assets/js/google-code-prettify/prettify.js"></script>
<script src="assets/js/bootstrap-transition.js"></script>
<script src="assets/js/bootstrap-alert.js"></script>
<script src="assets/js/bootstrap-modal.js"></script>
<script src="assets/js/bootstrap-dropdown.js"></script>
<script src="assets/js/bootstrap-scrollspy.js"></script>
<script src="assets/js/bootstrap-tab.js"></script>
<script src="assets/js/bootstrap-tooltip.js"></script>
<script src="assets/js/bootstrap-popover.js"></script>
<script src="assets/js/bootstrap-button.js"></script>
<script src="assets/js/bootstrap-collapse.js"></script>
<script src="assets/js/bootstrap-carousel.js"></script>
<script src="assets/js/bootstrap-typeahead.js"></script>
<script src="assets/js/bootstrap-affix.js"></script>
<script src="assets/js/application.js"></script> 
```

我正在尝试使用链接制作浮动侧边栏，例如左侧的[http://twitter.github.com/bootstrap/scaffolding.html 。](http://twitter.github.com/bootstrap/scaffolding.html)

[如果我从http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)复制源代码，并复制所有这些单独的 .js 文件，它可以工作，但如果我只是插入

```
<script type="text/javascript" src="bootstrap/js/jquery-1.8.1.min.js"></script>
<script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script> 
```

它不起作用。浮动侧边栏保持在顶部，向下滚动时不会跟随。

当我调查 bootstrap.js 时，它似乎包含了那些单独的 .js 文件（“bootstrap-transition.js”等）具有的所有内容，我认为 bootstrap.js 只是获取所有这些 javascript 功能的一种更简单的方法。

由于我对 html 很陌生，我可能在这里遗漏了一些非常基本的东西......但是：

1.  是否可以使用 affix.js 和 scrollSpy.js 仅使用 bootstrap.js 来制作浮动导航，或者我们是否需要像 bootstrap 网站那样包含这些单独的文件？

2.  为什么 bootstrap 网站使用这些单独的文件，为什么我下载 bootstrap 时不包含它们？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T07:04:33.177

可以在此处找到以下文件参考：

*   [Bootstrap Affix 演示 - HTML](http://pastebin.com/Tf81gdkt)
*   [Bootstrap Affix 演示 - bootstrap.customize.css](http://pastebin.com/VhwkNEEr)
*   [Bootstrap Affix 演示 - bootstrap.customize.js](http://pastebin.com/tXXrzu10)

这是我为使其工作所做的工作：

1.  下载[HTML5 Boilerplate Bootstrap 版本](http://www.initializr.com/builder?boot-hero&jquerydev&modernizrrespond&simplehtmltag&izr-emptyscript&boot-css&boot-scripts)，这是一个基本的起点。将这些文件放在服务器上的目录中。然后，
2.  转到[Bootstrap Customize](http://twitter.github.com/bootstrap/customize.html)，除非您确切*知道*自己需要什么，否则请检查所有内容。您可以随时重新访问这部分并配对您不使用的部分。

现在，解压下载的 Bootstrap Customize ...

```
bootstrap.js
bootstrap.css 
```

并重命名它们：

```
bootstrap.customize.js
bootstrap.customize.css 
```

然后将它们复制到它们匹配的文件旁边的 HTML5 Boilerplate 目录中。

然后打开`index.html`修改：

```
<link rel="stylesheet" href="css/bootstrap.min.css"> 
```

至：

```
<link rel="stylesheet" href="css/bootstrap.customize.css"> 
```

（和...）

```
<style>
body {
    padding-top: 60px;
    padding-bottom: 40px;
}
/* I do this so you can see the scroll spy on body */
li.active {
    background: #ddd;
}
</style> 
```

在最底部，修改：

```
<script src="js/vendor/bootstrap.min.js"></script> 
```

至：

```
<script src="js/vendor/bootstrap.customize.js"></script> 
```

然后：

```
<body data-spy="scroll" data-target=".lipsum-sidebar"> 
```

然后在`.container`：

```
<div class="container">

  <div class="row">
   <div class="span3 lipsum-sidebar">
    <ul class="nav nav-list bs-docs-sidenav" data-spy="affix">
     <li>
      <a href="#lipsum1"><i class="icon-chevron-right"></i> Lipsom 1</a>
     </li>
     ....
     <li>
      <a href="#lipsum9"><i class="icon-chevron-right"></i> Lipsom 9</a>
     </li>
    </ul>
   </div>
  </div> 
```

然后是内容：

```
 <div class="span9">

    <section id="lipsum1">
     <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis tempor dapibus justo id consequat. Pellentesque sem massa, tempus quis consequat quis, sodales eu tellus. Pellentesque id ullamcorper diam. Quisque rhoncus, diam ut lobortis auctor, risus libero vestibulum erat, in iaculis purus lacus a sem. Maecenas sodales nunc ac ipsum pulvinar sit amet ultrices risus consectetur. Proin vitae lorem nec quam semper pharetra in ut mauris. Nullam pulvinar lobortis libero eget luctus. Aliquam erat volutpat. In hac habitasse platea dictumst. Maecenas quis eros nulla. Vivamus nec metus eget metus aliquam cursus. Praesent semper tempus neque id bibendum. Curabitur blandit pulvinar leo in adipiscing.</p>
     ...
     <p>Suspendisse potenti. Morbi odio lorem, scelerisque eu eleifend eget, placerat eget metus. Nulla non elit et sapien tincidunt feugiat. Aliquam nec lacinia arcu. Donec in nisi et nibh aliquet varius. Nunc viverra sapien vitae nisl auctor vitae viverra risus sagittis. Aenean quis arcu ligula, ut gravida ante. Nunc egestas mi eget mi suscipit commodo. Cras id justo est. Nunc varius nunc imperdiet elit aliquam vitae cursus magna adipiscing. Vivamus suscipit justo tortor, eu tempus quam. Donec venenatis sollicitudin augue, sed pharetra erat vehicula vel. Donec in consectetur sem. Vivamus at lectus lorem. Praesent vestibulum leo sed metus egestas fermentum. Mauris tincidunt diam a turpis pellentesque aliquam.</p>
    </section>

   </div>

  </div> 
```

# jquery - 在 iPhone 中使用 Jquery 的日期选择器

> ID：12576852
> 
> 赞同：2
> 
> 时间：2012-09-25T05:45:33.843
> 
> 标签：jquery, iphone, ios, webview, datepicker

我想在 iphone 中使用 mobilscroll jQuery 加载日期选择器。所以我在 xcode 中删除了 mobiscroll 的那些文件。我在 webview 中调用了 index.html。但是在 Webview 中我什么也没得到。什么都没有显示。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:45:46.853

There are many ways to get empty screen. You should check all of the below items:

1.  Remove js,html and css files from the Compile Sources and add them to the Copy Bundle Resources
2.  You should be careful about the location of the JS and CSS files in the HTML files. Such as, when i develop UIWebView apps, I just copy the all of the js and css files to the documents directory in the AppDelegate file.

    ```
    NSString *jsFile2 = [documentDir stringByAppendingPathComponent:@"jquery-1.8.2.min.js"];
    NSString *jsFile2Path = [[NSBundle mainBundle] pathForResource:@"jquery-1.8.2.min" ofType:@"js"];
    [fileManager copyItemAtPath:jsFile2Path toPath:jsFile2 error:nil]; 
    ```

Then, you can directly add css and js files to your html like that; `<script type='text/javascript' src='jquery.min.js'></script>`

These are my concerns when I develop apps using UIWebView...

# magento - 从 Magento 中的链接 id 获取可下载的链接标题

> ID：12576858
> 
> 赞同：1
> 
> 时间：2012-09-25T05:46:25.407
> 
> 标签：magento

我创建了一个模块，其中有可下载的链接 ID，但我不知道如何在 magento 中获取链接标题。我正在使用 Magento 1.7+，我正在从 Quote 项目中获取下载 ID

如

```
 $productOptions = $item->getProduct()->getTypeInstance(true)->getOrderOptions($item->getProduct());

  foreach($productOptions['links'] as $option){
    ..
    ..
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-30T18:29:52.140

这是我用来获取链接标题的代码

```
$links=Mage::getModel('downloadable/link')
        ->getCollection()
        ->addTitleToResult()
        ->addFieldToFilter('product_id',array('eq'=>$_product->getId()));

foreach($links as $link){
    echo "<a href='" . $link->getLink_url() . "'>Download " . $link->getDefault_title() . "</a>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T06:00:54.433

此代码可以帮助您通过链接 ID 获取可下载的链接标题。

```
 $links=Mage::getModel('downloadable/link')
    ->getCollection()
    ->addTitleToResult()
   ->addFieldToFilter('main_table.link_id',array('eq'=>$link_id));
    return $links->getFirstItem()->getDefaultTitle(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T12:18:08.880

我已经通过以下代码解决了这个问题：

```
$options = $item->getProduct()->getTypeInstance(true)->getOrderOptions($item->getProduct());            

if (isset($options['options']) && is_array($options['options'])) 
{
    foreach ($options['options'] as $key=>$op) 
    {
        if (isset($op['label'])) $options['options'][$key]['label'] = htmlspecialchars_decode($op['label']);
        if (isset($op['value'])) $options['options'][$key]['value'] = htmlspecialchars_decode($op['value']);
    }
} 
```

# iphone - 创建 UITableView 后调用哪个协议方法

> ID：12576860
> 
> 赞同：2
> 
> 时间：2012-09-25T05:46:57.980
> 
> 标签：iphone, objective-c, ios, uitableview

**很抱歉在这里问这种简单的问题。**

但我是 iOS 开发的新手 :( 我也在尝试在谷歌上找到我的答案，但我不明白。

**`UITableView`我的问题是创建整个 TableView 后调用哪个协议方法？**

我的意思是当创建`UITableView`然后调用`UITableViewDataSource`方法时，例如，

**配置表视图**

```
– tableView:cellForRowAtIndexPath:  required method
– numberOfSectionsInTableView:
– tableView:numberOfRowsInSection:  required method
– sectionIndexTitlesForTableView:
– tableView:sectionForSectionIndexTitle:atIndex:
– tableView:titleForHeaderInSection:
– tableView:titleForFooterInSection: 
```

ETC...

但我想知道在没有任何 UITableView 交互的情况下创建整个 TableView（或调用上述方法）后调用 UITableView 的哪个方法？

所以，请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:13:36.550

要创建 UITable，必须调用所有必需的方法。IE

```
– tableView:cellForRowAtIndexPath:  
– tableView:numberOfRowsInSection: 
```

当然，这些是数据源方法。但是在创建表之后，在您重新加载表之前，不会调用此方法。如果您想要在创建 tableview 后调用的方法，您必须寻找委托方法，例如：

```
– tableView:willSelectRowAtIndexPath:
– tableView:didSelectRowAtIndexPath:
– tableView:willDeselectRowAtIndexPath:
– tableView:didDeselectRowAtIndexPath: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T05:57:37.473

由于 Apple 的文档中没有指定顺序，因此您不能安全地假设它们总是以相同的顺序被调用，并且在您的实现中做出这样的假设通常不是一个好主意。

例如，并非对所有行都调用 cellForRowAtIndexPath。它仅对可见行调用，然后在用户滚动到其他行时调用它们。旧行在离开屏幕时也会被销毁，如果用户向上滚动，它将再次请求单元格。

但总的来说，我们可以假设一些调用顺序：

```
– numberOfSectionsInTableView:        (...Optional method...)
– sectionIndexTitlesForTableView:     (...Optional method...)
– tableView:titleForHeaderInSection:  (...Optional method...)
– tableView:titleForFooterInSection:  (...Optional method...)
– tableView:numberOfRowsInSection:    (...Compulsory method...)
– tableView:cellForRowAtIndexPath:    (...Compulsory method...) 
```

# c# - 将 observablecollection 绑定到 Canvas

> ID：12576861
> 
> 赞同：0
> 
> 时间：2012-09-25T05:46:59.210
> 
> 标签：c#, .net, wpf, graphics, mvvm

我在将 ObservableCollection 绑定到画布时遇到了一些困难。

XAML：

```
<ScrollViewer HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Visible">
    <local:DesignerCanvas x:Name="designerCanvas"  AllowDrop="True">
        <ItemsControl ItemsSource="{Binding Circles}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
        <Button Canvas.Left="452" Canvas.Top="487" Content="Button" Height="23" Name="button1" Width="75" Click="button1_Click" />
    </local:DesignerCanvas>
</ScrollViewer> 
```

注意：DesignerCanvas 只是一个从 Canvas 派生的类。我已经覆盖了 MeasureOverride 函数以使其正确调整大小以显示滚动查看器。

代码背后：

```
public partial class LogicView : UserControl
{
    private ObservableCollection<Shape> circles;
    public ObservableCollection<Shape> Circles 
    {
        get { return circles; }
        set { circles = value; }
    }
    ...

    public void DrawCircle()
    {
        Ellipse ellipse = new Ellipse();

        SolidColorBrush brush = new SolidColorBrush(Brushes.Blue.Color);
        ellipse.Fill = brush;
        ellipse.StrokeThickness = 2;
        ellipse.Stroke = Brushes.Black;

        ellipse.Width = 100;
        ellipse.Height = 100;

        DesignerCanvas.SetLeft(ellipse, 100);
        Circles.Add(ellipse);
    }
} 
```

DrawCircle 函数向 ObservableCollection 添加了一个椭圆，但画布上没有显示任何内容。绑定似乎无法正常工作。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:10:28.240

如果您使用的是 Caliburn Micro，请更换

```
ItemsSource="{Binding Circles}" 
```

到

```
Name="Circles" 
```

会解决你的问题

# android - 获取支持的音频录制格式

> ID：12576862
> 
> 赞同：0
> 
> 时间：2012-09-25T05:47:08.777
> 
> 标签：android

我需要在我的应用程序中录制音频。我已将 AAC 音频编码器格式设置为 MediaRecorder。这仅受某些设备支持（取决于 API 级别）。在开始之前，如何获得支持的音频编码器格式以进行音频录制。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:28:59.843

如果我的猜测是正确的，您可以使用以下方法检查您的设备支持的音频格式

> android.media.AudioTrack

具有访问有关音频数据的信息的方法：

检查这个，

[http://developer.android.com/reference/android/media/AudioTrack.html](http://developer.android.com/reference/android/media/AudioTrack.html)

# asp.net - Web浏览器内的多点鼠标WPF？

> ID：12576865
> 
> 赞同：0
> 
> 时间：2012-09-25T05:47:23.313
> 
> 标签：asp.net, wpf, mouse, multipoint

我正在尝试使用 asp.net 在 Web 浏览器中注册多点鼠标 SDK 嵌入 WPF。我试图注册页面而不是窗口，但似乎只能注册到窗口。

我可以在 Web 浏览器中有一个宽度和高度有限的 WPF 窗口吗？

我在开发中仍然很新鲜，所以如果有任何相关信息或答案已经发布，谢谢和抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:32:42.450

**简短的回答：**

不，除非 Multipoint 1.6 或更高版本问世。

这是 Microsoft 在旧的 Multipoint 表单上发布的帖子。

“对于 1.6，我们打算在此版本中删除活动窗口依赖项。这不仅允许您像上面描述的那样使用它，还允许人们创建完全信任的 XBaps，这将允许您直接使用 WPF无需将其嵌入 Windows 窗体主机或 ClickOnce 安装程序（在幕后 XBap 只是 clickonce 主机中的 WPF 应用程序，具有更自动化的安装过程）。”

这篇文章是在 2010 年发布的，我没有看到除 1.5 到 1.5.1 之外的更新，所以我不确定是否有项目仍在积极开发中。 [http://social.msdn.microsoft.com/Forums/en-NZ/mptgen/thread/e0891d93-6ad1-4977-b59c-3a5d5963ef8c](http://social.msdn.microsoft.com/Forums/en-NZ/mptgen/thread/e0891d93-6ad1-4977-b59c-3a5d5963ef8c)

**长答案：**

Multipoint SDK 不是基于 Web 构建的。话虽如此，这就是我的做法。我创建了一个 com 公开的 winform，使其作为一个 activex 控件工作。如果我没记错的话，我在其中有本机 WPF 窗口。activex 控件通过 com 接口与带有客户鼠标事件的 JavaScript 进行通信。我遇到了很多问题，因为 Multipoint SDK 不是为此而设计的。首先，我用真正的鼠标做什么？我只是把它藏起来并锁定它，但是我该如何取回它。所以我有一个按钮来激活它和停用它。多点必须是活动窗口才能工作，这就是为什么我将它嵌入到同一页面上的 activex 控件中。当一个新页面加载时，真正的鼠标是空闲的，所有的鼠标都控制它，直到加载下一个页面。

Multipoint SDK 几乎可以完美运行，但我们只想要一些我们无法使用它的功能。这是我们不得不重新制作插件的时候，因为我们在当前的 Multipoint SDK 版本中遇到了限制。最主要的是能够在所有浏览器中工作以及对 Silverlight 的离线浏览器支持。ActiveX 不适用于这些。插件必须是单独的。问题是多点仅在它是活动窗口时才有效。此外，带有多点的 activex 解决方案有问题，而且对用户不友好。后来我们希望支持用一只鼠标而不是全部来控制真正的鼠标。在每种情况下，Multipoint 几乎都能完美运行，并且是最干净的解决方案。

所以简而言之，mymousegames.com 的当前版本不使用多点，而是使用客户构建的原始鼠标处理程序。该插件可在所有浏览器上运行。它现在的工作方式是过滤原始鼠标输入并通过套接字将其发送到 Silverlight。此解决方案比 activex 版本灵活得多。该插件使用 Click Once 部署，感觉更加基于 Web。在我看来，它不是完全基于网络的，因为它需要在他们的计算机上运行一个应用程序，但对于普通用户来说，它感觉非常基于网络，这一切都很重要。

我希望在下一个版本中有一个标志可以在不活动时接收鼠标输入。然后我可以提取我的自定义代码并为插件提供一个干净整洁的核心。为了构建一个自定义的原始鼠标处理程序，我查看了 Internet 上的示例。RawinputSharp 是一个非常有用的多点触控 Vista 模块，可以使用多个鼠标来模拟多点触控。

所以我的建议是等到下一个我相信很快就会发布的版本，然后构建一个插件，它可以通过套接字与 Silverlight 或 flash 对话，或者创建一个 activex 控件并通过 JavaScript 进行通信。或者只是创建一个 WPF 应用程序并使用 Click Once 进行部署，这感觉非常基于 Web。

这是 Microsoft 在旧的 Multipoint 表单上发布的帖子。
“对于 1.6，我们打算在此版本中删除活动窗口依赖项。这不仅允许您像上面描述的那样使用它，还允许人们创建完全信任的 XBaps，这将允许您直接使用 WPF无需将其嵌入 Windows 窗体主机或 ClickOnce 安装程序（在幕后 XBap 只是 clickonce 主机中的 WPF 应用程序，具有更自动化的安装过程）。” 这篇文章是在 2010 年发布的，我还没有看到除 1.5 到 1.5.1 之外的更新版本，所以我不确定是否有项目仍在积极开发中。 [http://social.msdn.microsoft.com/Forums/en-NZ/mptgen/thread/e0891d93-6ad1-4977-b59c-3a5d5963ef8c](http://social.msdn.microsoft.com/Forums/en-NZ/mptgen/thread/e0891d93-6ad1-4977-b59c-3a5d5963ef8c)

# coldfusion - HTML 表单正在发送有效内容，但 CF 脚本声称接收到未定义的值

> ID：12576874
> 
> 赞同：0
> 
> 时间：2012-09-25T05:47:58.097
> 
> 标签：coldfusion, forms

我有一个简单的电子邮件表单和支持它的 CF 脚本。这一切都应该是显而易见的，但是脚本抛出了有效的输入。我已经验证了预期值在标题中，并且我可以在脚本中输出值，但它不喜欢输出之外的任何值。

这是我的 HTML：

```
<form id="email" name="email" method="post" action="scripts/email.cfm">
  <fieldset>
    <legend>Email Student Government:</legend>

    <!-- PASS NAME (to query email) to the script -->
    <input type="hidden" name="who" id="who" value="Example User">

    <label for="from">Your Email:</label><br>
    <input type="email" id="from" name="from"><br>
    <label for="message">Message:</label><br>
    <textarea id="message" name="message" rows="4"></textarea>
    <input type="submit" name="send" id="send" value="Send Email">
  </fieldset>
</form> 
```

ColdFusion（包括顶部的调试脚本）：

```
<!--- member email addresses, hashed by name --->
<cfinclude template="emailHash.cfm">
    <cfoutput>
        #FORM.SEND#
        #FORM.WHO#
        #FORM.FROM#
        #FORM.MESSAGE#
    </cfoutput>

<cfif isdefined("FORM.SEND") and FORM.SEND eq "Send Email">
    <cfmail from="Example User <example@example.com>" 
            to="#FORM.WHO# <#emailHash['FORM.WHO']#>" 
            bcc="Example User <example@example.com>" 
            replyto="#FORM.FROM#"
            subject="Email Form Submission">
    Message: #FORM.MESSAGE#
    Date / Time Sent: #dateformat(now(), "yyyy/mm/dd")# at #timeformat(now(), "HH:mm:ss tt")#
    </cfmail>
</cfif> 
```

如果我运行脚本，则会打印逻辑输出，但是即使该`FORM.WHO`值已明确定义并且在之前的输出中打印得很好，也会出现此错误：

```
Element FORM.WHO is undefined in a CFML structure referenced as part of an expression. 
```

我对我认为是一个简单的项目感到非常恼火，所以任何朝着正确方向的轻推将不胜感激！

PS：我认为 HTML5 输入类型可能会导致问题，所以我尝试将它们换成普通`text`类型，但这没有任何好处。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T06:07:07.517

问题不在于您的表单变量，而在于：

`#emailHash['FORM.WHO']#`

您的错误是说*该*变量不存在（错误消息的其余部分应指向该代码所在的行号？您没有发布该位...）。从您发布的内容来看，没有证据表明确实如此。

里面发生了什么`emailHash.cfm`？

# android-layout - 在Android中的编辑文本中将光标位置设置为左侧

> ID：12576879
> 
> 赞同：0
> 
> 时间：2012-09-25T05:48:20.710
> 
> 标签：android-layout

我想将 **光标位置移动`EditText`到** 最左侧。现在光标在 的中心闪烁`EditText`。

```
 <EditText
            android:id="@+id/mytext"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginBottom="10dp"
            android:layout_marginTop="15dp"
            android:gravity="center"
            android:inputType="textMultiLine|textCapSentences"
            android:lines="5"
            android:textSize="12dp" > 
```

![在此处输入图像描述](../Images/d4e8a85834326c6e479730f9f8b79a7d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:53:10.390

你正在使用，`android:gravity="center"`而不是你必须使用`android:gravity="left"`

# c# - 完成 POST 是否需要 HttpWebRequest.GetResponse？

> ID：12576880
> 
> 赞同：9
> 
> 时间：2012-09-25T05:48:27.460
> 
> 标签：c#, .net, web, httpwebrequest

对于使用 HttpWebRequest 的 POST 请求，当我写入请求流时，数据会在什么时候发送？是在我关闭请求流时还是在我调用 GetResponse 时？是否需要 GetResponse 调用？

.net 文档似乎不太清楚到底发生了什么

这是我很好奇的代码：

```
HttpWebRequest request = HttpWebRequest.Create(url) as HttpWebRequest;
request.Method = "POST";
request.ContentLength = jsonData.Length;
request.ContentType = "application/json";

Stream requestStream = request.GetRequestStream();

requestStream.Write(jsonData, 0, jsonData.Length);

requestStream.Close();

var response = request.GetResponse() as HttpWebResponse; 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:02:57.800

是的，`GetResponse`调用是必须的，不仅对于 POST 请求，对于 GET、HEAD 请求也是如此。请求/数据在您调用时发送`GetResponse`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T06:02:33.183

启动嗅探器并在您的设备上设置断点，`requestStream.Close();`您将在调用时看到该请求正在发出`GetResponse()`。

# php - PHP 会话 - 随机不写入的值

> ID：12576886
> 
> 赞同：0
> 
> 时间：2012-09-25T05:48:42.737
> 
> 标签：php, jquery, ajax, session, session-variables

我正在构建一个结合 ajax 和 PHP 的站点，以创建在页面内加载/验证/提交的动态表单。我正在使用 PHP 会话变量与自定义处理程序、$.post 和 $().load 的组合来完成此操作。我在单独的 php 页面中构建表单（它们非常大），然后将它们加载到我的主页的一部分中。

在我的主页顶部，我开始一个这样的会话：

```
<?php 
require("inc/SecureSession.php"); // Custom handlers
session_save_path($_SERVER['TEMP']); session_start();
?> 
```

然后在每个表单页面中，我启动一个会话并生成一个令牌变量，如下所示：

```
<?php
require("inc/SecureSession.php"); // Custom handlers
session_save_path($_SERVER['TEMP']); session_start();
$_SESSION['token'] = rand();
?> 
```

此令牌变量作为隐藏字段插入表单页面底部，并应写入会话。

但是，我发现在动态加载（或发布）的页面中设置的会话变量似乎并没有始终保持设置。它们在表单页面的范围内工作，但并不总是返回到主页。我认为这可能是因为他们实际上并没有访问正确的会话，但似乎表单页面之外的所有会话变量都可以在表单页面中访问。

所以我很难过。我正在使用的 PHP 处理程序是这里的一个：[http ://www.zimuel.it/en/encrypt-php-session-data/](http://www.zimuel.it/en/encrypt-php-session-data/)

编辑：当我直接加载其中一个表单页面时，它会写入 100% 的时间。只有当我通过 jQuery 加载表单时，它才会变得不稳定。

Edit2：问题不在于我以错误的顺序声明代码。我做了一些研究，发现我应该在开始会话*之前声明保存路径和处理函数。*问题似乎是我用“

# android - 如何在 IntelliJ Idea 中使用 AirPush 构建 Android 项目？

> ID：12576888
> 
> 赞同：0
> 
> 时间：2012-09-25T05:48:52.203
> 
> 标签：android, intellij-idea

如何在 IntelliJ-Idea 中使用 AirPush 构建 Android 项目？在eclipse中一切正常！我将airpush jar文件插入“库”（在项目结构中）并检查“模块”中的“导出”（在项目结构中）。但这不起作用。:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T07:09:43.803

将 airpush jar 复制到 libs 文件夹，然后右键单击 jar 并选择添加为库。这个对我有用。

# excel - Excel删除空行

> ID：12576894
> 
> 赞同：0
> 
> 时间：2012-09-25T05:49:31.023
> 
> 标签：excel, excel-2007, vba

我想删除完全为空的行。例如，我有一张至少有 10 行和 5 列的工作表。有些行在 in 中没有值，`ColumnA`但在 in 中有值`ColumnB`。其他行在任何列中都没有值。如何删除那些根本没有值的行，但在至少一列中保留这些行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T06:12:18.737

我将继续回答您的示例。转到新列（第 6 列），使用`CONCATENATE`函数编写公式以连接第 1 到第 5 列的值。将公式拖到第 6 列的所有行。现在您可以看到，只有当第 1 到第 5 列是时，第 6 列才会有空白值空白的。现在您可以在`autofilter`第 6 列仅显示空白值并删除这些行。

# android - XML资源文件没有在Android中被复制

> ID：12576898
> 
> 赞同：2
> 
> 时间：2012-09-25T05:50:26.327
> 
> 标签：android, resources, drawable

我正在开发一个 android 项目，我想在 XML 文件中使用 <selector> 。我已将 <selector> 放在**res/drawable/default_item_background_selector.xml**下的文件中，并且使用 XML 属性引用它，例如

> <TextView android:background="@drawable/default_item_background_selector"/>

我从 Eclipse 的内容辅助中获得的 XML 属性内容，所以可以很好地看到它。但是，当我编译所有内容（并且编译得很好）并在模拟器或设备上对其进行调试时，应用程序崩溃，根异常为：

> 09-24 23:55:14.771: E/AndroidRuntime(22478): 由: android.content.res.Resources$NotFoundException: 来自可绘制资源 ID #0x7f020000 的文件 res/drawable/default_item_background_selector.xml

R.drawable.default_item_background_selector**生成**得很好，但在运行时，输出目录中似乎没有生成物理文件。以前有人经历过吗？是的，我已经清理并重新编译了（很多次）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:16:44.977

```
Created default_bg.xml in Drawable folder.

<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
  <item android:state_selected="true"
        android:drawable="@drawable/red" />
    <item android:state_pressed="true" android:state_selected="false"
        android:drawable="@drawable/blue" />
    <item android:state_selected="false"
          android:drawable="@drawable/yellow" />

</selector>

Create drawables in **strings.xml** is
     <drawable name="blue">#0000FF</drawable>
     <drawable name="red">#FF0000</drawable>
     <drawable name="yellow">#FFFF55</drawable>

And set background to textview
<TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world"
        android:background="@drawable/default_bg"
         /> 
```

# java - 使用sax解析器根据id和name动态返回xml文件的id和name到jsp页面

> ID：12576899
> 
> 赞同：1
> 
> 时间：2012-09-25T05:50:46.357
> 
> 标签：java, xml, sax

在我的 xml 文件中，我在子提示和音频中有一个`id`和一个`name`，我想根据 id 或 name 获取文本值

```
<prompt id="p1" name="salesMsg"> details of sold Product invoice </prompt> 
<prompt id="p1" name="stockMsg"> closing stock </prompt> 
<prompt id="p1" name="ackMsg"> details of purchased Product invoice </prompt> 
<audio id="a1" name="salesMsg">eng/salesMsg.wav</audio> 
<audio id="a1" name="stockMsg">eng/stockMsg.wav</audio> 
```

另外，我有一个类用于解析上面的 xml 文件，我想要的是将`id`and`name`动态返回到 jsp 文件。

那么，知道我怎么能做到这一点吗？

```
public class ClsPromptData {

    public static void main  (String argv[]) {

        try {
            SAXParserFactory factory = SAXParserFactory.newInstance();
            SAXParser saxParser = factory.newSAXParser();

            DefaultHandler handler = new DefaultHandler()  {

                boolean bprompt = false;
                boolean baudio = false;

                StringBuffer sb = new StringBuffer();
                String id;
                String name;
                String prompt;
                String audio;

                public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {

                    System.out.println("start element : " + qName);

                    if(qName.equalsIgnoreCase("prompt")) {

                        id = attributes.getValue("id");
                        name = attributes.getValue("name"); 

                        bprompt = true;
                    }

                    if(qName.equalsIgnoreCase("audio")){

                        id = attributes.getValue("id");
                        name = attributes.getValue("name");

                        baudio = true;
                    }
                }

                public void endElement (String uri, String localName, String qName) throws SAXException {   
                    System.out.println("End Element is :" + qName);
                }

                public void characters(char ch[], int start, int length) throws SAXException {

                    if (bprompt) {
                        System.out.println("valueof id :" + id);
                        System.out.println("valueof name :" + name);
                        System.out.println("value of prompt :" + id +" and "+ name + new String(ch, start, length));
                        bprompt = false;
                    }

                    if(baudio) {
                        System.out.println("valueof id :" + id);
                        System.out.println("valueof name :" + name);
                        System.out.println("value of Audio :" + id +" and "+ name+ new String(ch, start, length));
                        baudio = false;
                    }
                }
            };

            String fileName = "promptSelect/Resources/GetProducts_eng.xml";
            InputStream prompt_file = Thread.currentThread().getContextClassLoader().getResourceAsStream(fileName);

            saxParser.parse(prompt_file, handler);
        } catch (Exception e){
            e.printStackTrace();
        }
    }
} 
```

# linux - 从一个脚本中只运行一次命令，甚至多次执行脚本

> ID：12576900
> 
> 赞同：-1
> 
> 时间：2012-09-25T05:50:51.787
> 
> 标签：linux, shell

我需要帮助。我有一个脚本“脚本 1”，它将调用“脚本 2”在后台运行，它会定期检查某些内容。但我希望脚本 2 只启动一次，甚至多次调用脚本 1。有没有办法做到这一点？

如果有人建议一些命令来实现这一点，那将更有帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:53:06.630

当然，你可以把这样的东西放在顶部`Script2`：

```
if [[ -f /tmp/Script2HasRun ]] ; then
    exit
fi
touch /tmp/Script2HasRun 
```

这将通过使用哨兵文件停止`Script2`再次运行*，*除非该文件当然被删除，并且它可能会在某个时候因为它位于`/tmp`.

所以你可能想把它放在其他可以更好地保护它的地方。

如果您*不想*阻止它再次运行，则需要一些机制来删除哨兵文件。

例如，如果您的意图是一次只运行一个副本：

```
if [[ -f /tmp/Script2IsRunning ]] ; then
    exit
fi
touch /tmp/Script2IsRunning
# Do whatever you have to do.
rm -f /tmp/Script2IsRunning 
```

请记住，其中存在*可能*导致两个副本运行的竞争条件。有一些方法可以通过使用内容和存在来缓解这种情况，例如：

```
if [[ -f /tmp/Script2IsRunning ]] ; then
    exit
fi
echo $$ >/tmp/Script2IsRunning
sleep 1
if [[ "$(cat /tmp/Script2IsRunning 2>/dev/null)" != $$ ]] ; then
    exit
fi
# Do whatever you have to do.
rm -f /tmp/Script2IsRunning 
```

除此之外还有更多级别的保护，但它们变得复杂，我通常发现这对大多数事情来说就足够了。

# asp.net - 通过代理从 FTP 删除文件的 C# 代码

> ID：12576901
> 
> 赞同：0
> 
> 时间：2012-09-25T05:51:14.027
> 
> 标签：asp.net, c#-4.0, ftp

如何解决此错误

```
**The Requested FTP command is not supported when using HTTP Proxy** 
```

发生在以下代码上

```
ftpWebRequest.Method = WebRequestMethods.Ftp.DeleteFile. 
```

迫在眉睫。任何人都可以为这个问题提供建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:40:22.100

过滤请求时，您的代理可能会阻止 FTP 删除关键字。您能否检查您是否能够在不在代理中时执行此活动（尝试从您直接连接的不同网络）。如果是，我认为您从代理后面进行此活动并不简单。

另一个解决方案是尝试开源 ftps 库[http://ftps.codeplex.com/](http://ftps.codeplex.com/) 或 1\. 在 FTP 服务器上创建一个 WCF 服务，它允许您做任何您想做的事情。2\. 从客户端调用传递命令的 WCF 服务。

# c - 使用 libxml2 计算 XML 中具有相同名称的标签

> ID：12576902
> 
> 赞同：1
> 
> 时间：2012-09-25T05:51:16.553
> 
> 标签：c, libxml2

我想使用 libxml2 在完整的 xml 中计算具有相同名称的标签。请建议libxml2中是否有任何直接返回计数的内置函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:13:50.417

使用 XPath 很容易。请参阅[XPath 示例](http://www.xmlsoft.org/examples/index.html#XPath)。获得[xmlXPathEvalExpression](http://www.xmlsoft.org/html/libxml-xpath.html#xmlXPathEvalExpression)的结果后，您只需编写：

```
xpathObj->nodesetval->nodeNr 
```

这是给出的[XPath 语法](http://www.w3schools.com/xpath/xpath_syntax.asp)。例如`//elem`，要计算所有`elem`元素。

以及基于 xpath1.c 示例的完整功能：

```
int count(xmlDocPtr doc, const char* path)
{
    int count;
    xmlXPathContextPtr xpathCtx; 
    xmlXPathObjectPtr xpathObj; 

      /* Create xpath evaluation context */
    xpathCtx = xmlXPathNewContext(doc);
    if(xpathCtx == NULL) {
        fprintf(stderr,"Error: unable to create new XPath context\n");
        return(-1);
    }

    /* Evaluate xpath expression */
    xpathObj = xmlXPathEvalExpression(path, xpathCtx);
    if(xpathObj == NULL) {
        fprintf(stderr,"Error: unable to evaluate xpath expression \"%s\"\n", path);
        xmlXPathFreeContext(xpathCtx); 
        return(-1);
    }

    count = xpathObj->nodesetval->nodeNr;
    printf("count of %s: %d\n", path, count);

    xmlXPathFreeObject(xpathObj);
    xmlXPathFreeContext(xpathCtx); 

    return count;
} 
```

# c# - 拒绝 USB 到达

> ID：12576905
> 
> 赞同：0
> 
> 时间：2012-09-25T05:51:43.153
> 
> 标签：c#, usb

我正在使用 C# 开发 USB 监视器，我希望能够在系统驱动程序处理到达并启用到达设备后做出反应，但比应用程序级进程（资源管理器）更快。我想检查 autorun.inf 的设备，如果发现拒绝到达。我使用了 MSDN 上描述的 BROADCAST_QUERY_DENY 但没有成功。这是代码（假设 USB 作为“I”驱动器到达）：

```
 switch (msg.Msg)
        {
            case Win32CODES.WM_DEVICECHANGE:
            {
                if (msg.LParam != IntPtr.Zero)
                {
                    DEV_BROADCAST_HDR pHdr = (DEV_BROADCAST_HDR)Marshal.PtrToStructure(msg.LParam, typeof(DEV_BROADCAST_HDR));

                    switch ((int)msg.WParam)
                    {
                        case Win32CODES.DBT_DEVICEARRIVAL:
                        {
                            if (pHdr.dbch_devicetype == Win32CODES.DBT_DEVTYP_VOLUME)
                            {
                                DEV_BROADCAST_VOLUME pVol = (DEV_BROADCAST_VOLUME)Marshal.PtrToStructure(msg.LParam, typeof(DEV_BROADCAST_VOLUME));

                                Char c = GetDriveLetter(pVol.dbcv_unitmask);

                                if (c == 'I')
                                {
                                    msg.Result = new IntPtr(Win32CODES.BROADCAST_QUERY_DENY );

                                    base.WndProc(ref msg);

                                    return;
                                }

                            }

                            break;
                        }
                    }
                }
                break;
            }
        }
        base.WndProc(ref msg);
    } 
```

然后我尝试了另一种方法，但再次没有成功。

```
 switch (msg.Msg)
        {
            case Win32CODES.WM_DEVICECHANGE:
            {
                if (msg.LParam != IntPtr.Zero)
                {
                    DEV_BROADCAST_HDR pHdr = (DEV_BROADCAST_HDR)Marshal.PtrToStructure(msg.LParam, typeof(DEV_BROADCAST_HDR));

                    switch ((int)msg.WParam)
                    {
                        case Win32CODES.DBT_DEVICEARRIVAL:
                        {
                            if (pHdr.dbch_devicetype == Win32CODES.DBT_DEVTYP_VOLUME)
                            {
                                DEV_BROADCAST_VOLUME pVol = (DEV_BROADCAST_VOLUME)Marshal.PtrToStructure(msg.LParam, typeof(DEV_BROADCAST_VOLUME));

                                Char c = GetDriveLetter(pVol.dbcv_unitmask);

                                if (c == 'I')
                                {
                                    int bytesReturned = 0;

                                    IntPtr buffer = Marshal.AllocHGlobal(sizeof(int));

                                    SafeFileHandle _hdev = CreateFileR(c.ToString());

                                    bool result = DeviceIoControl(_hdev, CTL_CODE(0x00000033, 0x0400, 0, 1),
                                        IntPtr.Zero, 0, buffer, sizeof(int),
                                        out bytesReturned, IntPtr.Zero);

                                    int sessionId = Marshal.ReadInt32(buffer);

                                    Marshal.FreeHGlobal(buffer);
                                }

                            }

                            break;
                        }
                    }
                }
                break;
            }
        }
        base.WndProc(ref msg); 
```

有没有办法做到这一点？谢谢..

# html - 选择元素上的省略号在 IE9 和 Chrome 中不起作用

> ID：12576906
> 
> 赞同：4
> 
> 时间：2012-09-25T05:51:52.730
> 
> 标签：html, css

我有一个指定宽度的选择列表。文本溢出：省略号仅适用于 Firefox v15。它不适用于 IE7-IE9 和 Chrome。IE7- IE 9 和 chrome 是否支持 text-overflow : ellipsis ？如果是的话，我在这里错过了什么？有没有办法获得类似的效果？请帮忙。提前致谢。下面给出了HTML

```
 <!DOCTYPE html>
<html>
<body>

<select style="white-space: nowrap;overflow: hidden;
text-overflow: ellipsis;width:70px;
">
  <option>Volvooooooooooooo</option>
  <option>Saabbbbbbbbbbbb</option>
  <option>Mercedesaaaaaaaaaa</option>
  <option>Audiiiiiiiiiiiiiii</option>
</select>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:32:25.213

我认为当您将 text-overflow:ellipsis 放入选择元素时，Chrome 不支持它，您可以在此处查看示例：http: [//jsfiddle.net/t5eUe/](http://jsfiddle.net/t5eUe/)

你可以做这个编程。例如，如果你使用 Rails，你有函数“truncate”，如果你使用 php，你有函数“substr”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:53:25.993

我在网络上研究了`text-overflow:ellipsis`不适用于 IE，当容器是一个`div`或`width`未定义属性时。

我们也可以在 IE 中使用，但[MDN](https://developer.mozilla.org/en-US/docs/CSS/text-overflow#Internet_Explorer_notes)[`-ms-text-overflow:ellipsis`](http://msdn.microsoft.com/en-us/library/ie/ms531174%28v=vs.85%29.aspx)不推荐。并来到 chrome，我认为此[链接](https://stackoverflow.com/questions/4036250/android-webkit-text-overflow-ellipsis-not-working)将解决您的问题。

检查此[浏览器的 text-overflow 兼容性](https://developer.mozilla.org/en-US/docs/CSS/text-overflow#Browser_compatibility)。

如果这些都不起作用，那么通过[jQuery](https://stackoverflow.com/a/1022672)来实现这一点，它适用于所有浏览器。

```
.ellipsis {
    white-space: nowrap;
    overflow: hidden;
}

.ellipsis.multiline {
    white-space: normal;
}

<div class="ellipsis" style="width: 100px; border: 1px solid black;">Lorem ipsum dolor sit amet, consectetur adipisicing elit</div>
<div class="ellipsis multiline" style="width: 100px; height: 40px; border: 1px solid black; margin-bottom: 100px">Lorem ipsum dolor sit amet, consectetur adipisicing elit</div>

<script type="text/javascript" src="/js/jquery.ellipsis.js"></script>
<script type="text/javascript">
$(".ellipsis").ellipsis();
</script> 
```

**jquery.ellipsis.js**

```
(function($) {
    $.fn.ellipsis = function()
    {
            return this.each(function()
            {
                    var el = $(this);

                    if(el.css("overflow") == "hidden")
                    {
                            var text = el.html();
                            var multiline = el.hasClass('multiline');
                            var t = $(this.cloneNode(true))
                                    .hide()
                                    .css('position', 'absolute')
                                    .css('overflow', 'visible')
                                    .width(multiline ? el.width() : 'auto')
                                    .height(multiline ? 'auto' : el.height())
                                    ;

                            el.after(t);

                            function height() { return t.height() > el.height(); };
                            function width() { return t.width() > el.width(); };

                            var func = multiline ? height : width;

                            while (text.length > 0 && func())
                            {
                                    text = text.substr(0, text.length - 1);
                                    t.html(text + "...");
                            }

                            el.html(t.html());
                            t.remove();
                    }
            });
    };
})(jQuery); 
```

# excel - 将数字添加到 Excel 中列的值

> ID：12576910
> 
> 赞同：2
> 
> 时间：2012-09-25T05:52:28.550
> 
> 标签：excel

我在 Excel colA 中有列。我想在 colA 下的单元格中的所有值中添加一个数字，比如 2000 。我怎样才能做到这一点 ？SUM 函数最终将给出单元格范围和要添加的数量的所有值相加。

```
colA
----
8001
8002
8003
8004
8005 
```

我想要的是

```
colA
----
10000
10001
10002
10003
10004 
```

如何在选定的单元格上放置公式？请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T05:55:49.033

在任何单元格中输入 2000 并复制它，然后突出显示要添加和使用的列`Paste Special -> Add`。

# c# - linqpad中的oracle插入/删除问题

> ID：12576914
> 
> 赞同：2
> 
> 时间：2012-09-25T05:53:16.100
> 
> 标签：c#, oracle, linqpad

对不起，如果这个问题已经弹出，我还没有找到它。

我有一个非常简单的 oracle 表（如果重要，可以使用 11g 快递）：

```
desc exch_rate;
Name                           Null   Typ                                                                                                                                                                                           
------------------------------ -------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 
FROM_CURRENCY                           VARCHAR2(3)                                                                                                                                                                                   
TO_CURRENCY                             VARCHAR2(3)                                                                                                                                                                                   
EXCH_DATE                               DATE                                                                                                                                                                                          
EX_RATE                                 NUMBER(4)                                                                                                                                                                                         
ID                             NOT NULL NUMBER                                                                                                                                                                                        

5 rows selected 
```

我正在尝试使用 linqpad 删除此表的内容，因此代码通常是`ExchRates.DeleteOnSubmit(row)`和`SubmitChanges();`结尾的组合。

但我没有得到空表，而是得到一个错误：

```
InvalidOperationException  
Sequence contains no elements 

   at System.Linq.Enumerable.Aggregate[TSource](IEnumerable`1 source, Func`3 func)
   at IQToolkit.Data.Common.BasicMapper.GetIdentityCheck(Expression root, MappingEntity entity, Expression instance)
   at IQToolkit.Data.Common.BasicMapper.GetDeleteExpression(MappingEntity entity, Expression instance, LambdaExpression deleteCheck)
   at IQToolkit.Data.Common.AdvancedMapper.GetDeleteExpression(MappingEntity entity, Expression instance, LambdaExpression deleteCheck)
   at IQToolkit.Data.Common.QueryBinder.BindDelete(IEntityTable upd, Expression instance, LambdaExpression deleteCheck)
   at IQToolkit.Data.Common.QueryBinder.VisitMethodCall(MethodCallExpression m)
   at IQToolkit.ExpressionVisitor.Visit(Expression exp)
   at IQToolkit.Data.Common.DbExpressionVisitor.Visit(Expression exp)
   at IQToolkit.Data.Common.QueryBinder.Visit(Expression exp)
   at IQToolkit.Data.Common.QueryBinder.Bind(QueryMapper mapper, Expression expression)
   at IQToolkit.Data.Common.QueryMapper.Translate(Expression expression)
   at IQToolkit.Data.Common.QueryTranslator.Translate(Expression expression)
   at IQToolkit.Data.EntityProvider.GetExecutionPlan(Expression expression)
   at IQToolkit.Data.EntityProvider.Execute(Expression expression)
   at IQToolkit.Updatable.Delete[T](IUpdatable`1 collection, T instance, Expression`1 deleteCheck)
   at IQToolkit.Updatable.Delete[T](IUpdatable`1 collection, T instance)
   at IQToolkit.Data.EntityProvider.EntityTable`1.Delete(T instance)
   at IQToolkit.Data.EntityProvider.EntityTable`1.IQToolkit.IEntityTable.Delete(Object instance)
   at IQToolkit.Data.EntitySession.TrackedTable`1.SubmitChanges(TrackedItem item)
   at IQToolkit.Data.EntitySession.TrackedTable`1.IQToolkit.Data.EntitySession.ITrackedTable.SubmitChanges(TrackedItem item)
   at IQToolkit.Data.EntitySession.<SubmitChanges>b__0()
   at IQToolkit.Data.DbEntityProvider.DoTransacted(Action action)
   at IQToolkit.Data.EntitySession.SubmitChanges()
   at IQDriver.IQContextBase.SubmitChanges() 
```

我在这里一无所知。我正在使用最新版本的 IQ 驱动程序 (2.0.6.0) 和 4.42.01 版的 LinqPad。知道我在做什么错吗？我真的不想放弃 LinqPad 的任务；）

谢谢， 迈克尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:46:33.213

那张表上有主键吗？

除此之外，也许这是 IQ 库中的一个错误。您是否尝试过从其他表中删除行？

# iphone - 如何在 iphone 中将 C++ 代码转换为 Objective C 代码？

> ID：12576917
> 
> 赞同：1
> 
> 时间：2012-09-25T05:53:27.237
> 
> 标签：iphone, c++, objective-c, ios5, ios6

我有一些纯 C++ 代码，我想将代码更改为目标 C 代码格式。怎么能做到这一点有任何工具，否则我怎么能做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T05:56:44.277

您可以编译 C++ 代码以直接在 iphone 上工作。将您的核心保持为纯 C++，并将需要与 Objective-C 库通信的位编写为 Objective-C++（`.mm`而不是`.m`IIRC）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:13:20.363

根据您的要求，不可能自动将 C++ 转换为 Objective-C。随机选择一个较大的语义差异，C++ 允许多重继承，而 Objective-C 不允许。因此，您不能将 C++ 的继承图映射到 Objective-C 的继承图。

如果您手动转换，您会做的是切换到协议，您要建立的是一组已发布的允许通信和对象组合，您希望对象组合一些其他逻辑。在很多情况下，您可能会保留继承的主线。但是，您不会找到能够使该过程自动化的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:02:14.173

您可以参考以下问题：[here](https://stackoverflow.com/questions/5504559/writing-a-c-wrapper-around-objective-c)

您可以通过将 vc.m 更改为 vc.mm 来直接编译 c++ 代码

# list - Haskell：使用整数过滤列表

> ID：12576922
> 
> 赞同：0
> 
> 时间：2012-09-25T05:53:56.583
> 
> 标签：list, haskell, filter

我将如何过滤列表以便只返回整数列表？

例如，过滤一个类似的列表`[1, 1.2, 2, 2.2]`会返回`[1, 2]`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T06:47:27.813

考虑到您的列表是类型`[Double]`，因为您不能（以任何简单的方式）包含不同类型元素的列表。

一旦你有一个 double 列表，你就可以使用函数`ceiling`.

```
ceiling 2.1 = 3
ceiling 2.0 = 2 
```

所以检查一个数字是否没有小数部分的函数可以写成

```
nonFractional d = (fromIntegral $ ceiling d) == d 
```

现在您可以对此进行过滤

```
> filter nonFractional [1, 1.2, 2, 2.2]
[1.0,2.0] 
```

（编辑）上述比较相等性的方法不适用于大数，例如

```
> nonFractional  (12345678987654321.5)
True 
```

`nonFractional`如果您更改as的定义，请使用@David 的想法

```
nonFractional d = (fromIntegral $ ceiling d :: Rational) == d 
```

然后它似乎也适用于大部分

```
> nonFractional  (12345678987654321.5)
True 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T06:29:28.633

首先，您的列表应该是同质的，因此您不能拥有`Integer`s 和 的列表`Doubles`。

有一个很好的函数`properFraction`，它将一个数字分解成整数部分和小数部分：

```
properFraction :: (Fractional a, Integral b) => a -> (b,a) 
```

因此，我们可以定义一个函数来确定数字是否具有非零小数部分。

```
> let haveNoFractionalPart = (== 0.0) . snd . properFraction 
haveNoFractionalPart :: Double -> Bool 
```

不，我们可以使用该功能过滤您的列表：

```
> filter haveNoFractionalPart [1, 1.2, 2, 2.2]
[1.0,2.0] 
```

* * *

**更新**：

我应该承认，我的解决方案在现实世界中的某些情况下无效且不可行。因为类似的东西

```
> properFraction (11111111111111111111.1)
(11111111111111110656,0.0) 
```

无论如何，很难想象需要`Integer`从您拥有的某些值列表中过滤您调用的内容的情况。并且没有这样的方法可以定义任何具有浮点数的数字都以 100% 的概率具有零浮动部分。

也许一些包装纸`Integer`会`Double`有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T12:10:44.133

已经发布了许多解决方案`Rational`，实际上您只需要将分母与 1 进行比较：

```
hasFraction' :: Rational -> Bool
hasFraction' = (/= 1) . denominator 
```

这可以推广到任何情况`Real`，并且是检查数字是否有小数部分的最安全方法之一：

```
hasFraction :: (Real a) => a -> Bool
hasFraction = hasFraction' . toRational 
```

该函数不能解决舍入误差问题，但这是很自然的。当舍入错误困扰您时，您使用了错误的数据类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T11:11:50.373

那这个呢：

```
filterInt :: (RealFrac a) => [a] -> [Integer]
filterInt [] = []
filterInt (x:xs)
    | frac == 0 = a : filterInt xs
    | otherwise = filterInt xs
  where
      (a, frac) = properFraction x 
```

测试：

```
> let li = [1, 1.2, 2, 2.2]
> filterInt li
> [1,2] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T20:17:19.110

这取决于您从哪里获得数据。

Haskell 不允许您将纯整数与非整数混合，因此您的整数将受到数据类型固有的不准确性的影响，`Double`除非您使用更准确的数据类型`Rational`，但鉴于您不想要非整数，如果可以的话，在它们成为数字数据之前将它们从源头扔掉。

*   如果您从用户那里获取数据，请使用仅允许他们输入数字序列的输入表单，或使用`getInt`以下表单。
*   如果您从数据库或其他基于文本的源中获取数据，请`getInt`在下面使用。
*   如果您从某些您无法控制的代码（库或外部调用）中获取数据，是否有另一种方法可以只为您提供整数？
    如果是，请使用它，如果不是，请在其他答案中使用其他基于舍入的解决方案之一。

`getInt`将 String 转换为 Integer，巧妙地忽略任何不是 Integer 的内容：

```
import Data.Char (isDigit)

getInt :: String -> Maybe Integer
getInt xs | all isDigit xs = Just (read xs)
          | otherwise      = Nothing 
```

`getInt "12345"`也是，`Just 12345`而是。_ 我们可以使用它从某个列表中删除非整数输入：`getInt 12345678987654321.1``Nothing`

```
getInts :: [String] -> [Integer]
getInts xss = catMaybes $ map getInt xss 
```

或者更简洁地说，我们可以写
`getInts = catMaybes.map getInt`.

现在`catMaybes :: [Maybe a] -> [a]`，它摆脱了`Nothing`s 并展开了`Just`s。我们需要
`import Data.Maybe (catMaybes)`在顶部才能得到它。

如果您的数据以某种浮点数的形式出现，请记住浮点类型中没有真正的相等性，因此即使您在检查之前转换为更准确的表示形式，您在逻辑上也不可能知道原始data 表示一个精确的整数，或者只是一个非常接近于浮点表示在数据到达您之前四舍五入的整数的东西。例如：

```
Prelude> (12345678987654321.6 :: Double) == 12345678987654322.0
True 
```

然而

```
Prelude> (12345678987654321.6 :: Rational) == 12345678987654322.0
False 
```

但是，如果您可以选择数据类型，则您可以控制生成代码，因此请选择不包含非整数！

*总结：在将非整数转换为数值数据之前*，最容易摆脱它们，并且不会偶尔出现奇怪的舍入错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T15:53:12.307

您的列表必须是`[Double]`or类型`[Integer]`，或其他类型的数字。您不能混合类型。

也就是说，如果你有一个双精度列表并且你试图过滤掉那些不是整数的，你总是可以使用`round`, `floor`, 或`ceiling`检查数字的等价性。

例如：

```
isInt :: (RealFrac a) => a -> Bool
isInt x = x == (fromIntegral $ round x) 
```

然后你可以使用这个过滤你的数据，使用`filter`：

```
filter isInt [1, 1.2, 2, 2.2] -- [1.0, 2.0] 
```

# java - 重量分类（克、毫克、升、毫升）

> ID：12576923
> 
> 赞同：0
> 
> 时间：2012-09-25T05:54:01.417
> 
> 标签：java, compare, sorting

在“尺寸”列中，我的重量为 100mL、0.5mg、1L、2500cm2。我需要根据毫升、毫克、克、升、厘米等对其进行分类。请给我解决方案，我已经尝试过字符串比较，但它不值得，因为我们必须考虑重量。

```
 public static int safeCompareIgnoreCase(String name1, String name2) {
      if (name1 == name2) { 
        return 0; 
      } 
      if (name2 == null) { 
        return -1; 
      } 
      if (name1 == null) { 
        return 1; 
      } 
      return name1.compareToIgnoreCase(name2); 
    }

    public int compare(InventorySearchResultRecord r1, InventorySearchResultRecord r2) { 
      int result = safeCompareIgnoreCase(r1.getSize(), r2.getSize()); 
      if (result != 0) { 
        return result; 
      } 
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T05:58:18.663

提示： - 你不应该比较不同单位的两个值。想想你自己 -> 你将如何判断`1 Dollar`是更大还是`50 Rupees`？您需要将它们转换为相同的单位..

首先尝试在纸上完成..在没有计算机的情况下完成工作..如果您得到答案，请将其转换为代码..对您来说会更容易..

# php - preg_replace 仅替换中间（括号）

> ID：12576925
> 
> 赞同：1
> 
> 时间：2012-09-25T05:54:08.487
> 
> 标签：php, regex

我有以下字符串

```
someText 50-90% someText 
```

我只想在字符串是否采用这样的格式`%`之后添加`50`

```
someText 50%-90% someText 
```

我尝试了以下...

```
preg_replace('/(\d+)\-[\d]+%/','$0%',  'text 30-50% text')
//the output: text 30-50%% text
preg_match_all('/(\d+)\-[\d]+%/',  'text 30-50% text',$x)
/*$x = array(2) {
*  [0]=>
*  array(1) {
*    [0]=>
*    string(6) "30-50%"
*  }
*  [1]=>
*  array(1) {
*    [0]=>
*    string(2) "30"
*  }
*}
*/
preg_replace('/(\d+)\-[\d]+%/','$1%',  'text 30-50% text');
//the output: text 30% text 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T05:58:22.523

```
<?php
function normalizeRange($range) {
    return preg_replace('~(\d+)(-\d+%)~','$1%$2', $range);
}

var_dump(normalizeRange("5-6%")); // 5%-6%
var_dump(normalizeRange("5%-6%")); // 5%-6% 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T05:58:33.963

采用：

```
$str = "someText 50-90% someText";

$ret = preg_replace('/\d+(?=-)/', '$0%', $str);

// if you want to more specifically
$ret = preg_replace('/\d+(?=-\d+%)/', '$0%', $str); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T06:04:32.243

采用

```
$str    = 'text 30%-50% text';
echo preg_replace('/([\d]+)\-[\d]+%/','$1%',  $str); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T06:13:30.560

试试这个：

```
<?php
$text = 'someText 50-90% someText';
// match all text like 50-90%, 6-10% etc
preg_match( '/(^[^\d]*)(\d*\-\d*\%)(.*)/', $text, $matches );
$matches[2] = str_replace( '-', '%-', $matches[2] );
array_shift( $matches );
$text = implode( '', $matches );
?> 
```

希望这可以帮助。

# silverlight - 从 sharepoint2010 中的 silverlight webpart 下载图像

> ID：12576926
> 
> 赞同：0
> 
> 时间：2012-09-25T05:54:09.253
> 
> 标签：silverlight, sharepoint-2010

我想通过 Sharepoint 2010 中的 silverlight webpart 从任何 URL 下载图像。我能够从同一站点下载图像，但不能从其他站点（在同一服务器本身内）下载图像。

我正在使用 WebClient 类并异步打开图像文件。

请提出一些方法来实现这一点。

# jsf-1.2 - JSF 1.2 selectManyCheckbox：抛出异常不是数组或列表类型

> ID：12576932
> 
> 赞同：1
> 
> 时间：2012-09-25T05:55:15.100
> 
> 标签：jsf-1.2

我正在使用 JSF1.2 和 myfaces 实现。使用的对应 jar 是 jsf-api-1.2_04-p02.jar 和 myfaces-impl-1.2.9.jar。

```
<h:selectManyCheckbox value="#{restrictionMaintBean.selectedRestrictionTypeList}" layout="pageDirection" tabindex="5" onchange="setChangeFlag(true);">
                                    <f:selectItems value="#{restrictionMaintBean.restrictionTypeList}"/>
                                </h:selectManyCheckbox> 
```

此代码在 tomcat 6.0.20 上运行良好，但 tomcat 6.0.35 它给出以下异常：

> org.apache.myfaces.component.html.ext.HtmlPanelGrid,Id: a18][Class: javax.faces.component.html.HtmlSelectManyCheckbox,Id: j_id_jsp_1445681841_62]} 不是 org.apache.myfaces 中的数组或列表类型。 shared_impl.renderkit.RendererUtils.internalSubmittedOrSelectedValuesAsSet(RendererUtils.java:716) 在 org.apache.myfaces.shared_impl.renderkit.RendererUtils.getSelectedValuesAsSet(RendererUtils.java:615) 在 org.apache.myfaces.shared_impl.renderkit.html.HtmlCheckboxRendererBase。 renderCheckboxList(HtmlCheckboxRendererBase.java:112) at org.apache.myfaces.shared_impl.renderkit.html.HtmlCheckboxRendererBase.encodeEnd(HtmlCheckboxRendererBase.java:65)

# java - 将 Autoit 脚本与 Selenium Webdriver 集成

> ID：12576934
> 
> 赞同：4
> 
> 时间：2012-09-25T05:55:16.880
> 
> 标签：java, selenium, autoit, selenium-webdriver

任何人都可以指导如何将 Auto IT 脚本与 selenium web 驱动程序集成吗？

我正在使用嵌入在浏览器中的小程序窗口。
因此，使用 Auto IT 进行按键和鼠标操作。

我不想将 Auto It 脚本作为`.exe`selenium 中的文件运行。

我只想将脚本转换为 selenium 并运行以供将来增强。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:09:51.187

解决方案：AutoITx.jar。在 selenium 中导入 jar 并直接使用 selenium web 驱动程序中的 autoit 脚本。

# sql - 提高全文查询的性能

> ID：12576935
> 
> 赞同：1
> 
> 时间：2012-09-25T05:55:20.500
> 
> 标签：sql, sql-server

我有两个全文搜索查询

查询一：

```
Declare @KEYSEARCH nvarchar(4000)="string search here....".
SELECT * FROM TABLE1 WHERE CONTAINS(col1,@KEYSEARCH) 
```

执行此查询的时间：0.2 s

查询 2：

```
 Declare @KEYSEARCH nvarchar(4000)="string search here....".
 SELECT * FROM TABLE1 WHERE (CONTAINS(col1,@KEYSEARCH) or @KEYSEARCH='%%') 
```

执行此查询的时间：11s

为什么第二个查询这么慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:40:07.977

在这种情况下，我怀疑引擎不够聪明，无法知道您没有做任何可能在查询过程中修改 @keysearch 变量的事情（例如：某些技巧来执行聚合字符串连接），所以它必须对表中的每一行重新运行`='%%'`检查。它还可能使全文索引无效。

# android - 为同一个按钮获取不同的按钮高度

> ID：12576941
> 
> 赞同：1
> 
> 时间：2012-09-25T05:55:58.890
> 
> 标签：android, android-layout, android-button

我有一个`Button`内在`LinearLayout`，我想找回它的高度。

我用过`sample_button.getHeight()`，但它给出了不同的高度值。

即我正在根据`seekbar`进度修改按钮的高度，如下所示：

```
public void onProgressChanged(SeekBar seekBar, int progress,
            boolean fromTouch) {

LinearLayout.LayoutParams lp2 = new LinearLayout.LayoutParams(
                new ViewGroup.MarginLayoutParams(50, progress * 20));

        lp2.setMargins(200, 0, 0, 0);
        sample_button.setLayoutParams(lp2);

Log.i("Activity", "progress = " + progress);
Log.i("Activity",
                "sample_button.getHeight() = " + sample_button.getHeight());
} 
```

日志值如下：

```
progress = 1
sample_button.getHeight() = 60

progress = 2
sample_button.getHeight() = 20

progress = 3
sample_button.getHeight() = 40

progress = 2
sample_button.getHeight() = 60

progress = 3
sample_button.getHeight() = 40

progress = 4
sample_button.getHeight() = 60

progress = 3
sample_button.getHeight() = 80 
```

请注意，按钮正在正确显示，但是当 时`progress=2`，它`height=20`首先显示，然后显示`height=60`，以此类推，以显示其他进度值，如上所示。

我做错什么了吗。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:01:26.400

你有没有试过这样：

```
ViewGroup.LayoutParams params = sample_button.getLayoutParams();
params.height = progress * 20;
sample_button.setLayoutParams(params); 
```

# c# - 从 C++ DLL 在 C# 中触发事件

> ID：12576944
> 
> 赞同：7
> 
> 时间：2012-09-25T05:56:12.207
> 
> 标签：c#, c++, events, pinvoke

我有一个与 Cisco 服务器 (UCCX) 通信的非托管 C++ DLL。

它通过 TCP/IP 向该服务器发送和接收消息。现在它接收到一些类型的消息，其中包含一些需要发送到 C# GUI 的参数，C# GUI 将在屏幕上显示这些参数。

请告诉我从这个 DLL 触发 C# 事件的有效方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T05:59:44.303

[http://blogs.msdn.com/b/davidnotario/archive/2006/01/13/512436.aspx](http://blogs.msdn.com/b/davidnotario/archive/2006/01/13/512436.aspx)似乎回答了你的问题。您在 C# 端使用委托，在 C++ 端使用标准回调。

C++ 方面：

```
typedef void (__stdcall *PFN_MYCALLBACK)();
int __stdcall MyUnmanagedApi(PFN_ MYCALLBACK callback); 
```

C#端

```
public delegate void MyCallback();
[DllImport("MYDLL.DLL")] public static extern void MyUnmanagedApi(MyCallback callback);

public static void Main()
{
  MyUnmanagedApi(
    delegate()
    {
      Console.WriteLine("Called back by unmanaged side");
    }
   );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-12T06:02:43.020

注意 C++ 端应该是

```
typedef void (__stdcall *PFN_MYCALLBACK)();
extern "C" __declspec(dllexport) void __stdcall MyUnmanagedApi(PFN_ MYCALLBACK callback); 
```

另一种选择是在 C++ 端删除 __stdcall

```
typedef void (*PFN_MYCALLBACK)();
extern "C" __declspec(dllexport) void MyUnmanagedApi(PFN_ MYCALLBACK callback); 
```

在 C# 方面：

```
public delegate void MyCallback();
[DllImport("MYDLL.DLL", CallingConvention = CallingConvention.Cdecl))] 
public static extern void MyUnmanagedApi(MyCallback callback);

as above ... 
```

# iphone - 在 iPhone 崩溃应用中使用 GPS 跟踪位置

> ID：12576946
> 
> 赞同：1
> 
> 时间：2012-09-25T05:56:17.640
> 
> 标签：iphone, objective-c, map, core-location

对于那些对基于 GPS 的应用程序感兴趣的人来说，这可能很简单。在我的应用程序中，我试图跟踪用户的位置，并且必须在地图上绘制用户的路径。所以在每个更新点上，我必须填充一个数组，该数组是具有纬度，经度，高度，当前速度，该特定位置的行进距离等值。但是当我在设备上尝试它时，我的应用程序在获取这些值时崩溃。我认为这种方法每秒调用超过 10 次。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation*)newLocation fromLocation:(CLLocation *)oldLocation
{
} 
```

并且以非常快的速度获取所有这些批量值会导致问题。我尝试在此方法中实现一个条件，以便数组应以 5 秒的时间间隔更新。这就是我尝试过的。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation*)newLocation  fromLocation:(CLLocation *)oldLocation{

      CLLocation*  updatedLocation = [newLocation retain];
        NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
        NSDate *myDate = (NSDate *)[prefs objectForKey:@"myDateKey"];

        NSDate *lastDate = (NSDate *)newLocation.timestamp;
        NSTimeInterval theDiff = [lastDate timeIntervalSinceDate:myDate];

       if (theDiff > 5.0f || myDate == nil){
            //do your webservices stuff here

          if (newLocation.horizontalAccuracy < 0)
        {
            // No Signal
            if([self conformsToProtocol:@protocol(CoreLocationControllerDelegate)])
            {

                [self gpsSignalStatus:@"No Signal"];
            }

        }
        else if (newLocation.horizontalAccuracy > 65)
        {
            // Poor Signal
            if([self conformsToProtocol:@protocol(CoreLocationControllerDelegate)])
            {

                [self gpsSignalStatus:@"Poor Signal"];
            }
        }
        else if (newLocation.horizontalAccuracy <= 65.0)
        {
            // Fair
            if([self conformsToProtocol:@protocol(CoreLocationControllerDelegate)])
            {

                [self gpsSignalStatus:@"Fair"];
            }

        }
        else if (newLocation.horizontalAccuracy <= 20.0)
        {
            // Good
            if([self conformsToProtocol:@protocol(CoreLocationControllerDelegate)])
            {

                [self gpsSignalStatus:@" Good"];
            }

        }

        int degrees = newLocation.coordinate.latitude;
        double decimal = fabs(newLocation.coordinate.latitude - degrees);
        int minutes = decimal * 60;
        double seconds = decimal * 3600 - minutes * 60;
        NSString *lat = [NSString stringWithFormat:@"%d° %d' %1.4f\"",
                         degrees, minutes, seconds];
        latitudeLabel.text = lat;
        degrees = newLocation.coordinate.longitude;
        decimal = fabs(newLocation.coordinate.longitude - degrees);
        minutes = decimal * 60;
        seconds = decimal * 3600 - minutes * 60;
        NSString *longt = [NSString stringWithFormat:@"%d° %d' %1.4f\"",
                           degrees, minutes, seconds];
        longitudeLabel.text = longt;
        speedLabel.text = [NSString stringWithFormat:@"SPEED: %f", [newLocation speed]];
        altitudeLabel.text = [NSString stringWithFormat:@"ALTITUDE: %f", [newLocation altitude]];
        [mapView removeAnnotations:[mapView annotations]];
        MKPointAnnotation *pa = [[MKPointAnnotation alloc] init];
        pa.coordinate = newLocation.coordinate;
        pa.title = @"Current Location";
        [mapView addAnnotation:pa];
        [pa release];
        NSString *latlongString = [NSString stringWithFormat:@"%f,%f", newLocation.coordinate.latitude,newLocation.coordinate.longitude];
        [latLongArray addObject:latlongString];
        NSLog(@"%@",latLongArray);
        NSLog(@"Speed :: %g meters/sec",newLocation.speed);

        [points addObject:newLocation];
        NSInteger tot = [points count];
        MKMapPoint* pointsToUse=malloc(sizeof(CLLocationCoordinate2D) * tot);
        if(tot>1)
        {
            //i=tot-1;i<tot;i++
            for(int i=0;i<tot;i++)
            {

                CLLocation *Loc=[points objectAtIndex:i];
                CLLocationDegrees latitude = Loc.coordinate.latitude;
                //   [TravellingCoordinates addObject:location];
                CLLocationDegrees longitude = Loc.coordinate.longitude;
                CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake(latitude, longitude);
                MKMapPoint point = MKMapPointForCoordinate(coordinate);
                pointsToUse[i] = point;

                NSString *latitudestr = [[NSString alloc] initWithFormat:@"%g", newLocation.coordinate.latitude];
                NSLog(@"Latitude: %@", latitudestr);

                NSString *longitudestr = [[NSString alloc] initWithFormat:@"%g", newLocation.coordinate.longitude];
                NSLog(@"Longitude: %@", longitudestr);

                NSString *altitudestr = [[NSString alloc] initWithFormat:@"%g",newLocation.altitude];
                NSLog(@"altitude: %@", altitudestr);

                NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
                [formatter setDateFormat: @"HH:mm:ss"];
                NSString *LocationTime=[formatter stringFromDate:newLocation.timestamp];
                NSLog(@"LocationTime:%@",LocationTime);
                NSTimeInterval timeSinceLastLocation = [oldLocation.timestamp timeIntervalSinceDate:newLocation.timestamp];
                CGFloat speed = newLocation.speed;
                NSString *speedstr=[[NSString alloc]initWithFormat:@"%f",speed];
                NSLog(@"%@",speedstr);

                CLLocationDistance distance=0;;
                distance=distance+[newLocation distanceFromLocation:oldLocation];
                NSString *distancestr=[[NSString alloc]initWithFormat:@"%f",distance];

               // NSString *distancestr=[[NSString alloc]initWithFormat:@"%f",distance];

                [firstJsonDictionary setObject:latitudestr forKey:@"latitude"];
                [firstJsonDictionary setObject:longitudestr forKey:@"longitude"];
                [firstJsonDictionary setObject:altitudestr forKey:@"altitude"];
                [firstJsonDictionary setObject:LocationTime forKey:@"timestamp"];
                [firstJsonDictionary setObject:speedstr forKey:@"speed"];
                [firstJsonDictionary setObject:distancestr forKey:@"distance"];

                for(int i=0;i<10;i++){

                    [arr addObject:firstJsonDictionary];
                    // [firstJsonDictionary release];
                }
                NSError *error=nil;
                NSData *jsonData2 = [NSJSONSerialization dataWithJSONObject:arr options:NSJSONWritingPrettyPrinted error:&error];
                NSString *jsonString = [[NSString alloc] initWithData:jsonData2 encoding:NSUTF8StringEncoding];
              //  NSLog(@"jsonData as string:\n%@", jsonString);
                NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];
                [defaults setObject:jsonString forKey:@"jsonarraydata"];

                } 

            }

        // create the polyline based on the array of points.
        _routeLine = [MKPolyline polylineWithPoints:pointsToUse count:tot];
        [mapView addOverlay:_routeLine];
        free(pointsToUse);
           NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
           [prefs setObject:lastDate forKey:@"myDateKey"];
           [prefs synchronize];

           [self distanceTravelled:newLocation];
       [self loadRoute];

       }

    } 
```

任何想法都将是可观的。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:18:37.830

当你分配你的 locationManager 时，你应该设置一个距离过滤器：

```
CLLocationManager *locationManager = [[CLLocationManager alloc] init];
locationManager.desiredAccuracy = kCLLocationAccuracyBestForNavigation;
locationManager.distanceFilter = 100.0; 
```

如果您没有设置距离过滤器，它将采用默认值 kCLDistanceFilterNone 并且您将收到有关所有运动的通知（即方法 didUpdateLocation 将被非常频繁地调用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T07:21:19.857

除了接受的答案之外，您还需要添加以下代码以在 iOS 8 中获取 lat/long。

```
if ([locationManager respondsToSelector:@selector(requestWhenInUseAuthorization)])
    {
        [locationManager requestWhenInUseAuthorization];
    } 
```

并且您需要`NSLocationWhenInUseUsageDescription`在 plist 文件中添加密钥。

阅读[此链接](http://nevan.net/2014/09/core-location-manager-changes-in-ios-8/)了解更多详情。

# javascript - 如何在 HTML 文件中找到锚标记的总数？

> ID：12576947
> 
> 赞同：-3
> 
> 时间：2012-09-25T05:56:23.027
> 
> 标签：javascript, html, tags

我在struts2 中有一个Action 类。我向 Action 类提供了一个 HTML 文件。

如何找到`anchor`HTML 文件中的标签总数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T05:58:23.267

在 javascript 中，您可以这样做：

```
var totalAnchors = document.getElementsByTagName('a').length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:59:47.207

如果您只是在链接之后：

```
alert(document.links.length); 
```

# java - 查询 MongoDB 数组并使用最匹配的元素进行排序

> ID：12576948
> 
> 赞同：0
> 
> 时间：2012-09-25T05:56:27.093
> 
> 标签：java, mongodb

在以下情况下，我需要您的专业知识。

我有一个这样的集合：

```
"array" : {
    "item" : 1,
    "1" : [100, 130, 255],
}

"array" : {
    "item" : 2,
    "1" " [0, 70, 120],
}

"array" : {
    "item" : 3,
    "1" : [100, 90, 140],

} 
```

我正在查询这个集合：

```
 db.test.find(array.1 : {$in : [100, 80, 140]}); 
```

这将返回项目编号 1 和 3，因为它将提供的数组中的任何值与集合中的值匹配。但是我想对这个数组进行排序，以便给我更多相似数字的结果。结果应分别为第 3 项和第 1 项。

但是，我可以获取结果并使用 k 最近邻算法对数组进行排序。然而，处理庞大的数据集使得这非常不受欢迎（或者是吗？） MongoDB 中是否有任何功能可以提供这个？我正在使用Java，有什么算法可以足够快地实现这一目标吗？任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T07:08:40.573

您可以使用聚合框架来做到这一点，尽管这并不容易。`$in`问题在于聚合框架中没有运算符。因此，您必须以编程方式匹配数组中的每个项目，这会变得非常混乱。*编辑*：重新排序，以便首先匹配，以防`$in`有助于您过滤掉大部分。

```
db.test.aggregate(
  {$match:{"array.1":{$in:[100, 140,80]}}}, // filter to the ones that match
  {$unwind:"$array.1"}, // unwinds the array so we can match the items individually
  {$group: { // groups the array back, but adds a count for the number of matches
    _id:"$_id", 
    matches:{
      $sum:{
        $cond:[
          {$eq:["$array.1", 100]}, 
          1, 
          {$cond:[
            {$eq:["$array.1", 140]}, 
            1, 
            {$cond:[
              {$eq:["$array.1", 80]}, 
              1, 
              0
              ]
            }
            ]
          }
          ]
        }
      }, 
    item:{$first:"$array.item"}, 
    "1":{$push:"$array.1"}
    }
  }, 
  {$sort:{matches:-1}}, // sorts by the number of matches descending
  {$project:{matches:1, array:{item:"$item", 1:"$1"}}} // rebuilds the original structure
); 
```

输出：

```
{
"result" : [
    {
        "_id" : ObjectId("50614c02162d92b4fbfa4448"),
        "matches" : 2,
        "array" : {
            "item" : 3,
            "1" : [
                100,
                90,
                140
            ]
        }
    },
    {
        "_id" : ObjectId("50614bb2162d92b4fbfa4446"),
        "matches" : 1,
        "array" : {
            "item" : 1,
            "1" : [
                100,
                130,
                255
            ]
        }
    }
],
"ok" : 1
} 
```

如果您将`matches`字段排除在最后，则可以将其排除在结果之外`$project`。

# android - Android Grid View 水平滚动

> ID：12576952
> 
> 赞同：7
> 
> 时间：2012-09-25T05:56:38.410
> 
> 标签：android, gridview, horizontal-scrolling

我正在执行一项从服务器检索图像并在应用程序的 GridView 中显示的任务。此网格视图正在上下滚动。但我想在菜单屏幕滚动时从左到右滚动这个视图。网格视图可以吗？或者有没有更好的方法来做到这一点？请帮助我这样做。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T09:16:27.697

这对于现有的 Android GridView 来说并不容易。尝试使用这个库： [two-way-gridview](https://github.com/jess-anders/two-way-gridview)

（我在另一个答案中找到了这个库：[水平滚动网格视图](https://stackoverflow.com/questions/5725745/horizontal-scrolling-grid-view)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-03T00:54:55.070

> 有没有更好的方法来做到这一点？

**是**的，有。

您可以使用带有水平[GridLayoutManager的](http://developer.android.com/reference/android/support/v7/widget/GridLayoutManager.html)[RecyclerView](http://developer.android.com/reference/android/support/v7/widget/RecyclerView.html)在 3 行中实现此目的：

```
RecyclerView recyclerView = (RecyclerView) findViewById(R.id.rec1);
recyclerView.setLayoutManager(new GridLayoutManager(this, 2, GridLayoutManager.HORIZONTAL, false));
recyclerView.setAdapter(new CustomAdapter(arrayList)); 
```

[RecyclerView](http://developer.android.com/reference/android/support/v7/widget/RecyclerView.html)支持使用 SDK 7 或更高版本构建的应用程序。

如果您想让它更简单，如果您正在使用为 API 17 或更高版本构建的应用程序，请查看[Horizo​​ntalGridView类。](http://developer.android.com/reference/android/support/v17/leanback/widget/HorizontalGridView.html)

* * *

[这是](http://loopcupcakes.com/2017/01/30/minimal-recyclerview/)一个简单 RecyclerView 适配器示例的链接。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-09-25T07:00:49.230

尝试以下布局

```
 <HorizontalScrollView android="http://schemas.android.com/apk/res/android" 
        android:layout_width="wrap_content" android:layout_height="wrap_content">
        <GridView android:layout_width="wrap_content" android:layout_height="wrap_content" 
            android:id="@+id/gridview" android:columnWidth="50dp" android:padding="10dp" 
            android:horizontalSpacing="8dp" android:verticalSpacing="12dp" 
            android:numColumns="3" android:scrollbars="horizontal"/>
    </HorizontalScrollView> 
```

# javascript - 当点击 div 追加选择下拉菜单

> ID：12576964
> 
> 赞同：0
> 
> 时间：2012-09-25T05:57:59.760
> 
> 标签：javascript, list, select, onclick

天，

我知道这听起来可能很疯狂，但是当单击 div 时，将**所选**单词附加到下拉菜单中的最简单方法是什么。

你看我有 div，其中的图像充当模板视图。如果单击模板图像/ div，我需要将所选内容附加到选择模板布局的选项所在的下拉菜单中。我宁愿让人们选择单击模板，而不是仅仅从下拉菜单中选择它。但两者都会。

```
Do i do an onclick append? 
```

这将是 javascript / jquery 中将所选单词插入到

```
<option value="<?php echo $getlayouts;?>" ><?php echo $FileName;?></option> 
```

干杯。强尼像素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:13:05.367

您可以根据其值将选定属性插入选项标签

```
$('select').children('option[value=somevalue]').attr('selected',true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:06:25.677

要选择`option`不更改其`selected`属性的对象，请`selectedIndex`更改`select`.

例子：

```
window.onload = function(){
  document.getElementById('IdOfTheDiv').onclick = function(){
    document.getElementById('IdOfTheSelect').selectedIndex = 2;
  };
}; 
```

# c - 过早达到EOF

> ID：12576965
> 
> 赞同：1
> 
> 时间：2012-09-25T05:58:14.430
> 
> 标签：c, eof

读取代码为：

```
int Function(FILE fpi*, int *Ncols, int *Nrows) {
    if (fscanf(fpi, "%d", Nrows) > 0) {
        return fscanf(fpi, "%d", Ncols);
    } else {
        printf("%s\n", "EOF reached.");
        return -1;
    }
} 
```

（注意 - Function 只是一个替代名称）。该文件如下所示：

```
2 2
1 1
1 1
3 3
1 1 1
1 1 1
1 1 1 
```

它很好地迭代了第一组指令——也就是说，它需要 2 和 2 并将它们存储在 Ncols 和 Nrows 中，然后对以下 2 x 2 数据集（一组数据）进行操作；但是，在主程序中的 while 循环结束时：

```
int eof = Function(fpin1, &Rsize1, &Csize1);
while (eof > 0) {
    stuff

    eof = Function(fpin1, &Rsize1, &Csize1);
} 
```

它只是死了。

# java - 尝试使用 HttpClient 获取 DOMINO HTTP 会话——响应代码始终为 200

> ID：12576967
> 
> 赞同：0
> 
> 时间：2012-09-25T05:58:19.007
> 
> 标签：java, android, lotus-notes, lotus-domino, apache-httpcomponents

MY Domino Sever 已启用会话验证，并且 HTTP 端口号配置为 8080。

当我执行下面的程序来获得一个多米诺 HTTP 会话时，我总是得到下面的输出。

我知道 RESPONSE CODE 200 表示运行平稳。但我没有看到在服务器上创建任何 HTTP 会话。即使我向 UsernamePasswordCredentials("xxxxx", "xxxxx") 提供了错误的凭据，它仍然返回 200 作为其响应代码。对此有什么建议吗？

```
public class ClientAuthentication { 

  public static void main(String[] args) {

         DefaultHttpClient httpclient = new DefaultHttpClient();
            try {

                httpclient.getCredentialsProvider().setCredentials( new AuthScope("10.40.xx.xx", 8080), 
                                                                        new UsernamePasswordCredentials("xxxxx", "xxxxx"));
                HttpPost httppost = new HttpPost("http://10.40.xx.xx:8080/names.nsf?Login");
                System.out.println("executing request" + httppost.getRequestLine());
                HttpResponse response = httpclient.execute(httppost);

                HttpEntity entity = response.getEntity();

                if (response.getStatusLine().getStatusCode() == HttpURLConnection.HTTP_OK){ 
                    System.out.println("---------------OKAY OKAY-------------------------");
                     System.out.println("RESPONSE CODE " + response.getStatusLine().getStatusCode());
                }

                if (entity != null) {
                    System.out.println("Response content length: " + entity.getContentLength());
                }

            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

  }

} 
```

输出 ：

```
executing requestPOST http://10.40.xx.xx:8080/names.nsf?Login HTTP/1.1
---------------OKAY OKAY-------------------------
RESPONSE CODE 200
Response content length: 4256 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:08:00.607

您已设置会话身份验证。但您正尝试通过默认的 getCredentialsProvider 进行基本身份验证。您收到的 200 响应是您应该发布的实际会话身份验证登录表单。

正确的顺序是

*   使用您正在登录的数据库的 URL 执行 GET
*   以服务器的登录表单作为响应接收 200
*   填写表单数据的用户名和密码名称/值对并发布

从理论上讲，您应该编写自己的类来实现为 Domino 会话身份验证表单量身定制的 CredentialsProvider 接口，并将其与您自己的扩展 AbstractHttpClient 的 DominoHttpClient 类一起使用，以便干净地实现此序列；但我认为这真的不值得付出努力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:14:49.280

Narasimha，正如@Richard 所指出的，您的请求在发布时没有会话ID。服务器将其视为新请求，因此提供登录页面。

现在要解决这个问题，您需要在实际发布登录请求之前至少访问该站点一次。您可以为此请求登录页面。

将以下代码放在执行 post 请求**之前。**

```
HttpMethod method = new GetMethod("http://10.40.xx.xx:8080/names.nsf?Login");
httpclient.executeMethod(method); 
```

这将创建一个会话 ID，该 ID 将在后续请求中传递。

# ruby-on-rails - 在 Rails 中使用 CDN 时字体系列未加载

> ID：12576968
> 
> 赞同：-1
> 
> 时间：2012-09-25T05:58:20.530
> 
> 标签：ruby-on-rails

我使用了 CDN，除字体系列外，一切正常。

如果我删除了 <%= asset_path "font-family" %> 并且我从我的应用程序本身加载了字体系列，那么字体系列也不会加载。我仍然遇到同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:58:36.227

**步骤1：**

*   检查您的 CDN url 是否配置正确并且您的样式表是否具有类似的扩展名`styles.css.erb`（只有这样 <% %> 标记才能在 css 文件中使用）

**第2步：**

*   检查您是否已`Access-Control-Allow-Origin`在服务器中配置调用的属性以启用使用来自不同域的字体系列（CDN 域在这里被视为不同的域）

请参考以下链接以供参考

[链接 1](http://www.cssbakery.com/2010/07/fixing-firefox-font-face-cross-domain_25.html)

[链接 2](http://www.lowest-common-denominator.com/2010/01/http_access_control_to_multipl.php)

# c++ - 没有 if-else 语句的一维卷积（非 FFT）？

> ID：12576976
> 
> 赞同：2
> 
> 时间：2012-09-25T05:58:44.397
> 
> 标签：c++, optimization, image-processing, convolution

我写了一个简单的串行一维卷积函数（如下）。我也在试验 GPU 卷积实现。这主要是出于我自己的好奇心；我正在尝试学习各种非 FFT 实施策略之间的性能权衡。

避免分支对于我的 GPU 卷积实验很重要，因为在 Nvidia GPU 上分支很昂贵。我的一个朋友提到有一种方法可以在没有`if/else`语句的情况下实现下面的代码，但他不记得它是如何工作的。

***如何在不使用任何`if/else`语句的情况下进行正确的一维卷积实现？***

这是我在 C++ 中的基本一维串行代码：

```
vector<int> myConv1d(vector<int> vec, vector<int> kernel)
{
    int paddedLength = vec.size() + kernel.size() - 1;
    vector<int> convolved(paddedLength); //zeros
    reverse(kernel.begin(), kernel.end()); //flip the kernel (if we don't flip it, then we have correlation instead of convolution)
    for(int outputIdx=0; outputIdx<paddedLength; outputIdx++) //index into 'convolved' vector
    {
        int vecIdx = outputIdx - kernel.size() + 1; //aligns with leftmost element of kernel
        for(int kernelIdx=0; kernelIdx<kernel.size(); kernelIdx++)
        {
            if( (vecIdx+kernelIdx) >= 0  &&  (vecIdx+kernelIdx) < vec.size() ) //TODO: FIND A WAY TO REMOVE THIS
            {
                convolved[outputIdx] += kernel[kernelIdx]*vec[vecIdx+kernelIdx];
            }
        }
    }
    return convolved;
} 
```

几个快速说明：

*   我确实找到[了一些](https://stackoverflow.com/questions/10145452/cuda-small-kernel-2d-convolution-how-to-do-it?rq=1) [相关的](https://stackoverflow.com/questions/3886836/optimizing-1d-convolution) [帖子](https://stackoverflow.com/questions/7237907/1d-fast-convolution-without-fft)，但我不太了解避免条件语句的策略。
*   我还编写了一个 2D 卷积实现，我希望将这个 SO 帖子的结果也应用到 2D 版本中。
*   这不是家庭作业。它与我们的一项研究项目略有关联，但主要是为了学习。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:14:50.263

你为什么不做这样的事情？

```
int lowerBound = std::max( 0, -vecIdx );
int upperBound = std::min( kernel.size(), vec.size() - vecIdx );
for( int kernelIdx = lowerBound; kernelIdx < upperBound; kernelIdx++ ) 
```

对不起，如果我不明白这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:45:54.450

零扩展或边界扩展源向量以避免检查。如果源向量 V 的大小为 L，内核的大小为 K，则通过预先添加和附加 K-1 个元素来填充它。

让 L = 5 和 K = 3，你应该得到填充向量

ppvvvvvqq

其中 vs 是向量元素， ps 和 qs 是填充。请记住，GPU 工具包应该允许将源向量之外的元素钳制为 0 或边框值 - 有效地使上述填充无用。

# c# - 如何发送带有备用视图的电子邮件，无论是纯文本还是 HTml 模板。？

> ID：12576979
> 
> 赞同：4
> 
> 时间：2012-09-25T05:58:56.957
> 
> 标签：c#, asp.net, email, alternateview

我想发送带有纯文本或 html 模板的备用视图的电子邮件，我使用了以下链接 [aspnet-sending-email-both-in-html-and-plain-text 中的](http://www.search-this.com/2009/02/05/aspnet-sending-email-both-in-html-and-plain-text/)代码，但我不知道为什么它对我不起作用..我的代码是：。

```
 public void EmailSendingWithBothHTMLAndPlainText()
{
    // CREATE EMAIL
    // first we create a plain text version and set it to the AlternateView
    // then we create the HTML version
    System.Net.Mail.MailMessage msg = new System.Net.Mail.MailMessage();

    msg.From = new MailAddress("visionstask@gmail.com");
    msg.Subject = "Event: testing";
    msg.To.Add("ram@tsgdev.net");

    // create a string to hold all email addresses
    StringBuilder sbEmailTo = new StringBuilder();
    sbEmailTo.Append("visionstask@gmail.com");

    //if (!String.IsNullOrEmpty(TextBoxEmail2.Text)) { msg.To.Add(TextBoxEmail2.Text); sbEmailTo.Append(", " + TextBoxEmail2.Text); }
    //if (!String.IsNullOrEmpty(TextBoxEmail3.Text)) { msg.To.Add(TextBoxEmail3.Text); sbEmailTo.Append(", " + TextBoxEmail3.Text); }
    //if (!String.IsNullOrEmpty(TextBoxEmail4.Text)) { msg.To.Add(TextBoxEmail4.Text); sbEmailTo.Append(", " + TextBoxEmail4.Text); }
    //if (!String.IsNullOrEmpty(TextBoxEmail5.Text)) { msg.To.Add(TextBoxEmail5.Text); sbEmailTo.Append(", " + TextBoxEmail5.Text); }

    //now create the HTML version
    MailDefinition message = new MailDefinition();
    message.BodyFileName = "RegisterUser.html";
    message.IsBodyHtml = true;
    message.From = "visionstask@gmail.com";
    message.Subject = "Zoo Event: " + "testing for HTML";

    //embed images for the email
    //EmbeddedMailObject emo = new EmbeddedMailObject();
    //emo.Path = @"~\Images\email\hdr_roar.gif";
    //emo.Name = "hdr";

    //EmbeddedMailObject emo2 = new EmbeddedMailObject();
    ////emo2.Path = @"~\Images\email\box_top.gif";
    //emo2.Name = "box_top";

    //message.EmbeddedObjects.Add(emo);
    //message.EmbeddedObjects.Add(emo2);

    //Build replacement collection to replace fields in email.htm file
    ListDictionary replacements = new ListDictionary();
    replacements.Add("@Name", "Ram Singh");

    //now create mail message using the mail definition object
    //the CreateMailMessage object takes a source control object as the last parameter,
    //if the object you are working with is webcontrol then you can just pass "this",
    //otherwise create a dummy control as below.
    //System.Net.Mail.MailMessage msgHtml = message.CreateMailMessage(sbEmailTo.ToString(), replacements, new LiteralControl());

    //AlternateView htmlView = AlternateView.CreateAlternateViewFromString(msgHtml.Body, null, "text/html");

    // msg.AlternateViews.Add(htmlView);

    String plainEmail = "<table width='100%' border='0' cellspacing='0' cellpadding='0'><tr><td align='center'><table width='600' bgcolor='#f3f3f3' border='0' cellpadding='0' cellspacing='0'><tr><td><img src='http://localhost:4823/WishIsDone/Images/emaillogo.png' style='margin-left: 50px;'alt='' /></td></tr><tr><td><table bgcolor='#FFFFFF' border='0' width='500' align='center' style='margin: auto; border: 1px solid #999; padding: 5px;' cellpadding='0' cellpadding='0'><tr><td style='font-size: 18px; font-family: Verdana, Geneva, sans-serif; color: #008fbb;'>Registration</td></tr></table></td></tr><tr><td><table bgcolor='#FFFFFF' border='0' width='500' align='center' style='margin: auto; border: 1px solid #999; padding: 20px;'><tr><td>Hello @Name!</td></tr><tr><td style='font-size: 11px; font-family: Verdana, Geneva, sans-serif;'>Welcome to WishIsDone Website </td></tr><tr><td style='font-size: 12px; color: #008fbb; font-family: Verdana, Geneva, sans-serif;'> <p>You have successfully registrated.</p> </td> </tr><tr><td style='font-size: 11px; font-family: Verdana, Geneva, sans-serif; color: #999;'><p>Verify your e-mail address to complete your registration by clicking the link:</p> <p><a href='#'>@link</a></p><p><strong style='color: #000; font-size: 10px; font-weight: bold;'>Note:</strong><span style='color: #333;'>please change your password after login.</span></p><table style='border-top: 1px dotted #999; margin: auto;' width='450'><tr><td style='font-size: 10px; color: #333;'><p>Regards,<br /> Wish Is Done Team</p></td></tr></table></td></tr> </table> </td></tr> <tr> <td style='font-size: 10px; color: #333; padding: 10px 50px; font-family: Verdana, Geneva, sans-serif;'> <p> For any queries or difficulties Contact:<br /> Email:<a href='#'>info@wishisdone.com</a><br /> Toll free: XXX-XXX-XXXX<br /> <a href='#'>www.wishisdone.com</a></p> </td></tr><tr><td><table style='border-top: 1px dotted #999; width: 500px; color: #333; margin: auto; font-size: 9px; font-family: Verdana, Geneva, sans-serif;'> <tr><td>Copyright &copy; 2012 wishisdone</td></tr></table></td></tr></table></td> </tr></table>";

    //first we create the Plain Text part
    AlternateView plainView = AlternateView.CreateAlternateViewFromString(plainEmail, null, "text/plain");
    msg.AlternateViews.Add(plainView);
    msg.IsBodyHtml = true;
    SmtpClient emailClient = new SmtpClient("smtp.gmail.com");
    System.Net.NetworkCredential SMTPUserInfo = new System.Net.NetworkCredential("test@gmail.com", "test");
    emailClient.UseDefaultCredentials = false;
    emailClient.Credentials = SMTPUserInfo;
    emailClient.Port = 587;
    emailClient.EnableSsl = true;
    //SmtpClient emailClient = new SmtpClient(ConfigurationManager.AppSettings["SMTP"].ToString());
    //emailClient.UseDefaultCredentials = false;
    //emailClient.EnableSsl = true;

    emailClient.Send(msg);
} 
```

我在邮件中收到以下信息：

```
<table width='100%' border='0' cellspacing='0' cellpadding='0'><tr><td align='center'><table width='600' bgcolor='#f3f3f3' border='0' cellpadding='0' cellspacing='0'><tr><td><img src='http://localhost:4823/WishIsDone/Images/emaillogo.png' style='margin-left: 50px;'alt='' /></td></tr><tr><td><table bgcolor='#FFFFFF' border='0' width='500' align='center' style='margin: auto; border: 1px solid #999; padding: 5px;' cellpadding='0' cellpadding='0'><tr><td style='font-size: 18px; font-family: Verdana, Geneva, sans-serif; color: #008fbb;'>Registration</td></tr></table></td></tr><tr><td><table bgcolor='#FFFFFF' border='0' width='500' align='center' style='margin: auto; border: 1px solid #999; padding: 20px;'><tr><td>Hello @Name!</td></tr><tr><td style='font-size: 11px; font-family: Verdana, Geneva, sans-serif;'>Welcome to WishIsDone Website </td></tr><tr><td style='font-size: 12px; color: #008fbb; font-family: Verdana, Geneva, sans-serif;'> <p>You have successfully registrated.</p> </td> </tr><tr><td style='font-size: 11px; font-family: Verdana, Geneva, sans-serif; color: #999;'><p>Verify your e-mail address to complete your registration by clicking the link:</p> <p><a href='#'>@link</a></p><p><strong style='color: #000; font-size: 10px; font-weight: bold;'>Note:</strong><span style='color: #333;'>please change your password after login.</span></p><table style='border-top: 1px dotted #999; margin: auto;' width='450'><tr><td style='font-size: 10px; color: #333;'><p>Regards,<br /> Wish Is Done Team</p></td></tr></table></td></tr> </table> </td></tr> <tr> <td style='font-size: 10px; color: #333; padding: 10px 50px; font-family: Verdana, Geneva, sans-serif;'> <p> For any queries or difficulties Contact:<br /> Email:<a href='#'>info@wishisdone.com</a><br /> Toll free: XXX-XXX-XXXX<br /> <a href='#'>www.wishisdone.com</a></p> </td></tr><tr><td><table style='border-top: 1px dotted #999; width: 500px; color: #333; margin: auto; font-size: 9px; font-family: Verdana, Geneva, sans-serif;'> <tr><td>Copyright &copy; 2012 wishisdone</td></tr></table></td></tr></table></td> </tr></table> 
```

请帮助我..我想以格式良好的方式显示它，因为我想使用备用视图。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T06:30:48.983

在创建备用视图时尝试使用 text/html 作为 mime 类型：

```
AlternateView plainView = AlternateView.CreateAlternateViewFromString(plainEmail, null, "text/html"); 
```

就像在这个例子中所做的那样： [备用视图](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.alternateviews.aspx)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2014-01-08T16:36:46.693

请试试这个。因为您的文档中没有使用 html 正文

```
protected void btnSubmit_Click(object sender, EventArgs e)
{

    MailMessage mail = new MailMessage();
    mail.To.Add("you@gmail.com");
    mail.From = new MailAddress("you@gmail.com");
    mail.Subject = "PHR WORLD User Contacting You";

    string body = "<h1>Message from </h1><p>Simply awesome!</p>";
    body += "<HTML><HEAD></HEAD>";
    body += "<table width='100%' border='0' cellspacing='0' cellpadding='0'><tr><td align='center'><table width='600' bgcolor='#f3f3f3' border='0' cellpadding='0' cellspacing='0'><tr><td><img src='http://localhost:4823/WishIsDone/Images/emaillogo.png' style='margin-left: 50px;'alt='' /></td></tr><tr><td><table bgcolor='#FFFFFF' border='0' width='500' align='center' style='margin: auto; border: 1px solid #999; padding: 5px;' cellpadding='0' cellpadding='0'><tr><td style='font-size: 18px; font-family: Verdana, Geneva, sans-serif; color: #008fbb;'>Registration</td></tr></table></td></tr><tr><td><table bgcolor='#FFFFFF' border='0' width='500' align='center' style='margin: auto; border: 1px solid #999; padding: 20px;'><tr><td>Hello @Name!</td></tr><tr><td style='font-size: 11px; font-family: Verdana, Geneva, sans-serif;'>Welcome to WishIsDone Website </td></tr><tr><td style='font-size: 12px; color: #008fbb; font-family: Verdana, Geneva, sans-serif;'> <p>You have successfully registrated.</p> </td> </tr><tr><td style='font-size: 11px; font-family: Verdana, Geneva, sans-serif; color: #999;'><p>Verify your e-mail address to complete your registration by clicking the link:</p> <p><a href='#'>@link</a></p><p><strong style='color: #000; font-size: 10px; font-weight: bold;'>Note:</strong><span style='color: #333;'>please change your password after login.</span></p><table style='border-top: 1px dotted #999; margin: auto;' width='450'><tr><td style='font-size: 10px; color: #333;'><p>Regards,<br /> Wish Is Done Team</p></td></tr></table></td></tr> </table> </td></tr> <tr> <td style='font-size: 10px; color: #333; padding: 10px 50px; font-family: Verdana, Geneva, sans-serif;'> <p> For any queries or difficulties Contact:<br /> Email:<a href='#'>info@wishisdone.com</a><br /> Toll free: XXX-XXX-XXXX<br /> <a href='#'>www.wishisdone.com</a></p> </td></tr><tr><td><table style='border-top: 1px dotted #999; width: 500px; color: #333; margin: auto; font-size: 9px; font-family: Verdana, Geneva, sans-serif;'> <tr><td>Copyright &copy; 2012 wishisdone</td></tr></table></td></tr></table></td> </tr></table>";

    body += "</FONT></DIV></BODY></HTML>";
    body += " Sender Name: " + txtName.Text + "\n Sender Email: " + txtMail.Text + "\n Sender mobile: " + txtmobile.Text + "\n Subject:" + txtMessage.Text;
   mail.Body = body;
    mail.IsBodyHtml = true;
    SmtpClient smtp = new SmtpClient();
    smtp.Host = "smtp.gmail.com"; //Or Your SMTP Server Address
    smtp.Port = 587;
    smtp.EnableSsl = true;
    smtp.Credentials = new System.Net.NetworkCredential("you@gmail.com", "password");
    //Or your Smtp Email ID and Password
    smtp.Send(mail);
    ClearTextBoxes(Page);
    Label1.Text = "Thanks for contacting us";
} 
```

# java - 创建 Excel 文档时设置默认单元格大小

> ID：12576980
> 
> 赞同：0
> 
> 时间：2012-09-25T05:59:00.187
> 
> 标签：java, excel, apache-poi

我正在尝试使用 Java 创建一个 excel 表。通过创建 Workbook 对象并在其中创建 WritabeSheet 对象，我已将数据填充到 Excel 工作表中。我想为 WritableSheet 对象中的单元格设置默认大小。我怎么做？

这是代码片段：

```
 private static void writeDataSheet(WritableSheet s, String str, int i) 
                                                                throws Exception{
        //Format the font
        WritableFont wf = new WritableFont(WritableFont.ARIAL, 
                                                          10, WritableFont.BOLD);
        WritableCellFormat cf = new WritableCellFormat(wf);
        cf.setWrap(true);       
        //Create label and write data to one cell of sheet
        Label l = new Label(0,i,str,cf);

        s.addCell(l);
        // I want to set a default size to the columns in the excel sheet here
    } 
```

PS： sheet.autoSizeColumn() 不适用于 WritableSheet！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:16:14.047

注意：我不在 java 上工作，也没有使用过 jexcel。

`WriteableSheet`在界面上看一下这个方法

```
public void setColumnView(int col,
                          CellView view) 
```

参考：http: [//jexcelapi.sourceforge.net/resources/javadocs/2_6_10/docs/index.html](http://jexcelapi.sourceforge.net/resources/javadocs/2_6_10/docs/index.html)

这是我的想法，它应该工作

```
CellView columnAView = new CellView();
columnAView.setAutoSize(true);

s.setColumnView(1, columnAView); 
```

[`CellView`类参考](http://jexcelapi.sourceforge.net/resources/javadocs/2_6_10/docs/index.html)

# load-testing - 用于 ruby cas 服务器的负载测试工具

> ID：12576981
> 
> 赞同：-1
> 
> 时间：2012-09-25T05:59:04.420
> 
> 标签：load-testing, rubycas

我们已经使用[ruby​​cas 服务器](https://github.com/rubycas/rubycas-server)实现了 SSO ，我们想对此进行负载测试，并且我们正在寻找适合负载测试的开源工具。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-11-01T22:20:49.443

有一套非常好的用于负载测试的开源工具。你可以[在这里](http://www.opensourcetesting.org/performance.php)查看其中的一些。

选择合适的工具并不容易。一切都取决于具体情况，您想测试什么样的员工。如果您想做简单的吞吐量测试或只是测量系统的响应能力，我会推荐其中之一：

*   [阿帕奇长凳](https://httpd.apache.org/docs/2.4/programs/ab.html)
*   [httperf](http://www.hpl.hp.com/research/linux/httperf/)

但如果您想测试一些更高级的“用户故事”，那么我会建议：

*   [JMeter](http://jmeter.apache.org/)
*   [践踏](https://github.com/jumph4x/trample)

# linux - 将多行，带引号的字符串作为unix中的单个命令行参数传递？

> ID：12576982
> 
> 赞同：14
> 
> 时间：2012-09-25T05:59:06.177
> 
> 标签：linux, string, bash, unix

我只需要将任何 HTML 内容作为命令行参数传递，其中包括诸如 '、" 、` 之类的字符等等？如何在 unix 中将其作为单个参数传递？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T16:28:05.890

如果您在命令行键入，则可以使用以下 hack：

```
some_program -some_option some_argument "$(cat)"
any text you like with ` or " or $ or < or whatever
^D 
```

最后一件事是 control-D（文件结束）

要将其放入 bash 脚本中，您可以使用 Here 文档：

```
some_program -some_option some_argument "$(cat <<'EOF'
any text you like with ` or " or $ or < or whatever
EOF
)" 
```

只要文本不完全是 EOF 字符（如果是，您只需将两个地方的 EOF 都更改为其他内容），这将起作用。

但我认为这些都不是你想要做的。我认为您正试图从另一个程序（在 Lua 中）调用一个程序。不幸的是，开箱即用的 Lua 不提供任何可以做到这一点的功能。它只提供 os.execute，它使用 shell（/bin/sh，而不是 bash）来解释命令行。

Mark Edgar为 Lua`spawn`编写了一个很好的实现，但我不知道它是否仍然被维护。如果做不到这一点，您仍然可以使用第二个技巧：

```
require("os")

function call_with_arg(prog, rawtext)
  return os.execute(prog.." \"$(cat <<'EOF'\n"..rawtext.."\nEOF\n)\"")
end
local html =
  [=[<html><body><img src="image.png" onload='alert("loaded")'/></body></html>]=]

call_with_arg("echo >somefile.txt", html) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-14T22:28:37.360

我一直在寻找问题的答案，但我在这里并没有真正看到，所以这是我最终得到的解决方案（不是我没有传递 HTML 或类似的东西，而是类似的）

例如，这些`psql`工具接受可以是多行的命令，但它们需要在双引号字符串中传递。

我从推荐以下内容的其他答案开始：

```
CMD=$(cat << EOM
CREATE TABLE mytable
        (
          id bigint NOT NULL,
          sid bigint NOT NULL,
          obs timestamp without time zone NOT NULL,
          rcv timestamp without time zone NOT NULL,
          uid bigint NOT NULL,
          CONSTRAINT pkey PRIMARY KEY (id)
        )
EOM
)

sudo -u postgres psql db -c $CMD 
```

但这不起作用，因为该命令现在缺少引号，并且使用 "$CMD" 不会删除换行符，因此它仍然作为多行传递...

然而

`echo $CMD`将在一行中打印命令

所以最后使用：

```
CMD=$(echo $(cat << EOM
CREATE TABLE mytable
            (
              id bigint NOT NULL,
              sid bigint NOT NULL,
              obs timestamp without time zone NOT NULL,
              rcv timestamp without time zone NOT NULL,
              uid bigint NOT NULL,
              CONSTRAINT pkey PRIMARY KEY (id)
            )
EOM
))

sudo -u postgres psql db -c "$CMD" 
```

实际上将该行用双引号括起来，形成一个单行命令。

我希望这对其他人有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T06:02:33.983

如果我正确理解您的要求，您可以从命令行用双引号传递任何东西，即“”。它将被视为单个参数并在程序中作为字符串接收，可以根据需要进行解析。

这是交流程序

```
#include <stdio.h>

int main(int c, char *argv[])
{
        printf("argument is %s\n", argv[1]);
        return 0;
} 
```

在控制台上，我编译并运行它

```
$ gcc args.c
$ ./a.out "<img src=\"image.png\" onload='alert(/loaded/)' />" 
```

输出是

论据是

```
 <img src="image.png" onload='alert(/loaded/)' /> 
```

对于参数中的特殊字符，例如“”（双引号）、反斜杠 \ 等，只需在这些字符前面加上一个额外的转义序列 \

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-10T21:27:27.830

这对我有用。

这是文件 ( `setup.json`) 中的多行文本，例如带有内部双引号：

```
{
   "fieldA": "foo"
} 
```

以下是如何将其作为单个参数发送：

```
setup=$(cat setup.json)
./my_util "$setup" 
```

使用来自@fayyazkl 的 c 程序（其他答案）来测试它。

# eclipse - BPEL eclipse“分配”初始化

> ID：12576990
> 
> 赞同：2
> 
> 时间：2012-09-25T05:59:58.110
> 
> 标签：eclipse, web-services, bpel

我一直在为 WS-BPEL 流程开发 Eclipse。在一个基本的 helloworld.bpel 进程中，一个`assign`块（介于`receiveInput`和`replyOutput`块之间）需要输入和输出验证。但是，一旦我将输入变量设置为 input->payload->input 并将输出设置为 output->payload->result，我就会收到此错误

> eObject 不能为空`getNamespaceMap()`

谁能告诉我这意味着什么以及我该如何处理？

谢谢

```
<!-- helloworld BPEL Process [Generated by the Eclipse BPEL Designer] -->
<bpel:process name="helloworld"
     targetNamespace="http://helloworld"
     suppressJoinFailure="yes"
     xmlns:tns="http://helloworld"
     xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
     expressionLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116">

<!-- Import the client WSDL -->
<bpel:import location="helloworldArtifacts.wsdl" namespace="http://helloworld" 
        importType="http://schemas.xmlsoap.org/wsdl/" />

<!-- ================================================================= -->         
<!-- PARTNERLINKS                                                      -->
<!-- List of services participating in this BPEL process               -->
<!-- ================================================================= -->         
<bpel:partnerLinks>
    <!-- The 'client' role represents the requester of this service. -->
    <bpel:partnerLink name="client"
                 partnerLinkType="tns:helloworld"
                 myRole="helloworldProvider"
                 />
</bpel:partnerLinks>

<!-- ================================================================= -->         
<!-- VARIABLES                                                         -->
<!-- List of messages and XML documents used within this BPEL process  -->
<!-- ================================================================= -->         
<bpel:variables>
    <!-- Reference to the message passed as input during initiation -->
    <bpel:variable name="input"
              messageType="tns:helloworldRequestMessage"/>

    <!-- 
      Reference to the message that will be returned to the requester
      -->
    <bpel:variable name="output"
              messageType="tns:helloworldResponseMessage"/>
</bpel:variables>

<!-- ================================================================= -->         
<!-- ORCHESTRATION LOGIC                                               -->
<!-- Set of activities coordinating the flow of messages across the    -->
<!-- services integrated within this business process                  -->
<!-- ================================================================= -->         
<bpel:sequence name="main">

    <!-- Receive input from requester. 
         Note: This maps to operation defined in helloworld.wsdl 
         -->
    <bpel:receive name="receiveInput" partnerLink="client"
             portType="tns:helloworld"
             operation="process" variable="input"
             createInstance="yes"/>

    <!-- Generate reply to synchronous request -->

    <bpel:assign validate="no" name="Assign">

        <bpel:copy>
            <bpel:from part="payload" variable="input">
                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                    <![CDATA[tns:input]]>
                </bpel:query>
            </bpel:from>
            <bpel:to part="payload" variable="output">
                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                    <![CDATA[tns:result]]>
                </bpel:query>
            </bpel:to>
        </bpel:copy>
    </bpel:assign>
    <bpel:reply name="replyOutput" 
           partnerLink="client"
           portType="tns:helloworld"
           operation="process" 
           variable="output"
           />
</bpel:sequence> 
```

# javascript - 如何在具有 z-index 的 div 内的列表项上触发 mouseenter（或任何鼠标）事件？

> ID：12576991
> 
> 赞同：2
> 
> 时间：2012-09-25T06:00:00.737
> 
> 标签：javascript, jquery, html, mouseevent, z-index

每次我单击列表项时，只有 z-index 层会获得鼠标事件。CSS 可以毫无问题地检测鼠标悬停在列表项上，但我需要 jquery 在从列表项的 css 中检索背景图像后显示图像。

为了您的方便，我在 jsFiddle 重新创建了它：http: [//jsfiddle.net/VaDb6/](http://jsfiddle.net/VaDb6/)

我也试过这个： [jQuery hover problem due to z-index](https://stackoverflow.com/questions/3517427/jquery-hover-problem-due-to-z-index)

但这只是让后面的所有其他东西都可以点击，这正是我不想要的，也是我用 z-index 制作 div 的原因。

我也试过给每个孩子一个 z-index，但列表项仍然没有响应。

我将不胜感激任何建议或指导。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:16:17.787

这与 z-index 无关，发生的事情是在页面加载时绑定事件，并且新插入的 div 没有附加事件。以下是解决方法：

```
$('div.gallery_shots li').on('click', function () {
    // take the ancestor's html
    var html = $(this).parent().parent().next().html();

    $('div#layerZ').html(html + '<div id="debug"></div>').show();
});

$('div#layerZ').on('click', function () {
$('div#debug').append('layerZ...');
});

$('div#layerZ')
    .on("click", "li", function(e) {
        e.stopPropagation();
        alert('li clicked');
    })
    .on("mouseenter", "li", function(e) {
        e.stopPropagation();

    //$('div#layerZ div.gallery_pictures li.current').removeClass('current');
    //$(this).addClass('current');

    //var url = $(this).css('background-image');
    //url = url.replace('url(', '').replace('-thumb', '').replace(')', '');

    //$('div#layerZ div.large_gallery').html('<img src="'+url+'"></img>');

      $('div#debug').append('mouseenter event success!!!<br />');
}); 
```

随着`$('div#layerZ').on("click", "li", function(e) {...}`您告诉父母在`li`. 由于`#layerZ`在加载时存在，因此绑定事件没有问题。​</p>

[http://jsfiddle.net/LbqUC/](http://jsfiddle.net/LbqUC/)

# javascript - 闭包编译器正在修改 JSONP 发送参数

> ID：12576992
> 
> 赞同：0
> 
> 时间：2012-09-25T06:00:02.570
> 
> 标签：javascript, google-closure-library

我正在使用 Google Closure Library 构建一个大型应用程序。我通过 JSONP 从 MongoDB-PHP 环境中获取数据。请求经过负载均衡测试，确定最适合从中获取数据的服务器，然后返回相应的 JSON 数据。

问题是当我使用闭包构建器构建应用程序时，JSONP.send 方法的参数会修改，因此我发送的是随机参数，而不是发送我应该发送的内容。如何强制编译器在我编写它们时保留这些对象属性名称，而不进行任何更改？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T05:24:12.927

假设您正在使用 ADVANCED 优化，您会遇到属性重命名问题。你可以在这里读到它：

[https://developers.google.com/closure/compiler/docs/api-tutorial3](https://developers.google.com/closure/compiler/docs/api-tutorial3)

最简单的方法是使用 SIMPLE 优化，否则您需要使用带引号的属性构建参数：

```
var params = { 'aParam': 1 }; 
```

# php - php中的下载问题..返回无效文件？

> ID：12576998
> 
> 赞同：-2
> 
> 时间：2012-09-25T06:00:21.013
> 
> 标签：php

> **可能重复：**
> [尝试下载文件并在核心 php 中获取无效文件作为响应](https://stackoverflow.com/questions/12542203/try-to-download-file-and-getting-invalid-file-in-response-in-core-php)

```
$filename=gallery/downloads/poster/large/h.jpg 
```

下载文件的路径是正确的，但不知道为什么它会给出无效的文件作为回报......

```
 $filename = $_GET["filename"]; 
 $buffer = file_get_contents($filename);

    /* Force download dialog... */
    header("Content-Type: application/force-download");
    header("Content-Type: application/octet-stream");
    header("Content-Type: application/download");
    header('Content-Type: image/jpeg');

    /* Don't allow caching... */
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");

    /* Set data type, size and filename */
    header("Content-Type: application/octet-stream");
    header("Content-Transfer-Encoding: binary");
    header("Content-Length: " . strlen($buffer));
    header("Content-Disposition: attachment; filename=$filename");

    /* Send our file... */
   echo $buffer; 
```

如果你有更好的方法，请分享....提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:15:59.300

更好的解决方案是：

```
$filename = $_GET["filename"];
// Validate the filename (You so don't want people to be able to download
// EVERYTHING from your site...)

if (!file_exists($filename))
{
    header('HTTP/1.0 404 Not Found');
    die();
}
// A check of filemtime and IMS/304 management would be good here

// Be sure to disable buffer management if needed
while(ob_get_level()) {
   ob_end_clean();
}

// Do not send out full path.
$basename = basename($filename);

Header('Content-Type: application/download');
Header("Content-Disposition: attachment; filename=\"$basename\"");
header('Content-Transfer-Encoding: binary'); // Not really needed
Header('Content-Length: ' . filesize($filename));
Header("Cache-Control: must-revalidate, post-check=0, pre-check=0");

readfile($filename); 
```

也就是说，*“无效文件”*是什么意思？长度不好？零长度？文件名不好？MIME 类型错误？文件内容错误？眼下的一切，你的意思可能很清楚，但从我们的角度来看，这远非显而易见。