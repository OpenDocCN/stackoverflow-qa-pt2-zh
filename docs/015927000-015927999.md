# StackOverflow 问答 15927000-15927999

# haskell - Haskell 类型定义，=> 等

> ID：15927000
> 
> 赞同：3
> 
> 时间：2013-04-10T13:18:33.473
> 
> 标签：haskell

我正在使用 Learn You a Haskell 来学习 Haskell。在第 54 页是 take 的实现，如下所示：

```
take' :: (Num i, Ord i) => i -> [a] -> [a]
take' n _
    | n <= 0 = []
take' _ []   = []
take' n (x:xs) = x : take' (n-1) xs 
```

我理解除第一行之外的所有代码。

我理解的 :: 部分意味着这是一个类型定义？

(Num i, Ord i) 是一个元组。元组的第一个元素必须是数字，足够公平。第二个参数必须能够被订购。参数是相同的 - 都是 i。这意味着类型必须相同？

为什么不是 (Num i, Ord j)？第二个元组元素不是指列表吗？哪个可以是任何类型？

=> 表示什么？

i -> [a] -> [a] 表示第一个参数是数字？第二个参数是任何类型列表，第三个参数是任何类型列表。所以这是说第一个参数是数字，第二个参数是任何类型的列表，它返回任何类型的列表。好吧，我想这是可以理解的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T13:23:22.887

之前的东西`=>`是*约束*。`(Num i, Ord i)`不是通常意义上的元组。它指定了类型类实例存在于`i`您调用函数的任何特定类型的要求。

所以这个类型签名实际上是在说 is 的类型`take'`，但是必须有和实例`i -> [a] -> [a]`的额外限制，这相当于要求你可以做一些基本的算术（我想是“数字”的缩写）并比较哪个值更大（意味着该类型的值已定义排序，即您可以对它们进行排序等）。`i``Num``Ord``Num``Ord`

在这种特殊情况下，比较`n <= 0`是使用`Ord`，而减法和数字文字使用`Num`。

这在[LYAH 的第 3 章中有介绍](http://learnyouahaskell.com/types-and-typeclasses)，这些特定的类型类（以及其他）在[Typeclasses 101 部分](http://learnyouahaskell.com/types-and-typeclasses#typeclasses-101)中提到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:21:54.327

(Num i, Ord i) 并不意味着是一个元组。将类型签名读取为： take' 是类型的函数，`i -> [a] -> [a]`其中 i 必须是类型类 Num 和 Ord 的类型。

您可能想再次阅读“Typeclasses 101”一章。

# visual-studio-2008 - Visual Studio 2008 添加服务引用错误 - WSDL - 元数据包含无法解析的引用

> ID：15927003
> 
> 赞同：0
> 
> 时间：2013-04-10T13:18:48.083
> 
> 标签：visual-studio-2008, wsdl, soapui

我有一个在本地网络上的服务器上运行的 Web 服务。使用程序soapUI，我可以毫无问题地连接到服务。因此，当我使用soapUI 创建一个新项目并输入我的网址“ [http://xx.xx.xx.xx:9180/SOAOICCT/services/SessionService?wsdl](http://xx.xx.xx.xx:9180/SOAOICCT/services/SessionService?wsdl) ”时，它加载没有问题。

当我尝试使用相同的 URL 在 Visual Studio 2008 中添加服务引用时，我收到“添加服务引用错误”：

```
There was an error downloading 'http://xx.xx.xx.xx:9180/SOAOICCT/services/SessionService?wsdl'.
The request failed with HTTP status 504: Gateway Timeout.
Metadata contains a reference that cannot be resolved: 'http://47.166.94.33:9180/SOAOICCT/services/SessionService?wsdl'.
The remote server returned an error: (504) Gateway Timeout.
The remote server returned an error: (504) Gateway Timeout.
If the service is defined in the current solution, try building the solution and adding the service reference again. 
```

当我尝试从 Visual Studio 命令提示符使用 wsdl.exe 命令时，我收到错误消息： ![在此处输入图像描述](https://i.stack.imgur.com/l06V6.jpg)

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:41:13.417

我不是 100% 的问题是什么，但这里是修复的摘要。

问题出在主机名上。在服务器上，主机名是“cs1ktest”，但 Visual Studio 认为主机名是 47.166.94.33

所以，我更新了主机文件并添加了一行

```
47.166.94.33    cs1ktest 
```

我再次尝试了 wsdl.exe，将 IP 地址替换为“cs1ktest”和 BOOM ！！！

![在此处输入图像描述](https://i.stack.imgur.com/BD3Fa.jpg)

有效。

# jquery - 如何使用 JQuery 在图像的特定位置重叠 Div？

> ID：15927006
> 
> 赞同：0
> 
> 时间：2013-04-10T13:18:54.270
> 
> 标签：jquery, asp.net, image, html, overlapping

我在网页上有一张大图。和它下面的一个 div 包含数据。现在，当用户单击按钮时，包含数据的 Div 必须使用 JQuery 在特定位置的图像上重叠。

```
<div>
<img src="Images/FLRegions.png" usemap="#planetmap" style="height: 766px; width: 776px;z-index:1;" class="map" />
</div>

<div id="destination">
This div contains Data which must overlap on Image on specific Location using JQuery
</div> 
```

帮助赞赏！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:21:41.100

像这样将 div 放在另一个里面：

```
<div class="container">
    <img src="Images/FLRegions.png" usemap="#planetmap" style="height: 766px; width: 776px;z-index:1;" class="map" />
    <div id="destination">
        This div contains Data which must overlap on Image on specific Location using JQuery
    </div>
</div> 
```

然后像这样使用CSS：

```
.container{
    position: relative;
}
#destination{
    position: absolute;
    top: 0;
    left: 0;
} 
```

它可以像这样使用 jQuery 动态移动：

```
$('#button').click(function(){
    $('#destination').animate({
        left: 0, //enter your position
        top: 0  
    }, 500);
}); 
```

# sharepoint - SPService 获取用户信息时出错

> ID：15927010
> 
> 赞同：0
> 
> 时间：2013-04-10T13:18:58.060
> 
> 标签：sharepoint

我在 Jquery 和 sharepoint 中使用 spservice 来获取用户信息。在可视化 Web 部件中，我在 Web 部件源代码中编写过。

```
<%@ Assembly Name="$SharePoint.Project.AssemblyFullName$" %>
<%@ Assembly Name="Microsoft.Web.CommandUI, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
<%@ Register Tagprefix="SharePoint" Namespace="Microsoft.SharePoint.WebControls" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
<%@ Register Tagprefix="Utilities" Namespace="Microsoft.SharePoint.Utilities" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Register Tagprefix="asp" Namespace="System.Web.UI" Assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" %>
<%@ Import Namespace="Microsoft.SharePoint" %> 
<%@ Register Tagprefix="WebPartPages" Namespace="Microsoft.SharePoint.WebPartPages" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="User DataUserControl.ascx.cs" Inherits="UserProfileService.User_Data.User_DataUserControl" %>

   <script type="text/javascript" src="/sites/AMAC/_layouts/UserProfileService/jquery.SPServices-0.7.2.js" ></script>

   <script type="text/javascript" language="javascript">
       $(document).ready(function () {
           var curUserId;
           var curUserName;
           var curFullUserName;
           $().SPServices({
               operation: "GetUserInfo",
               async: false,
               userLoginName: $().SPServices.SPGetCurrentUser(),
               completefunc: function (xData, Status) {
                   $(xData.responseXML).find("User").each(function () {
                       curUserId = $(this).attr("ID");
                       curUserName = $(this).attr("Name");
                       curFullUserName = $(this).attr("ID") + ";#" + $(this).attr("Name");
                   });
               }
           });
       });          
</script> 
```

但我收到错误：as

'xData' 未定义

'jQuery' 未定义
请帮我纠正它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:20:08.153

您需要先加载 jQuery，因为 SPServices 需要它：http: [//jquery.com/](http://jquery.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-09T13:51:18.660

```
> <script
> src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> 
```

以上 spservices 使用 SPServices 链接用户信息

# java - 为什么我不能直接访问（并锁定）对象用于同步块的隐式锁定

> ID：15927011
> 
> 赞同：2
> 
> 时间：2013-04-10T13:18:58.867
> 
> 标签：java, synchronization, locking, blocking, synchronized

*为清楚起见重新措辞*

我希望能够通过在适当的时候直接调用 lock 和 release 方法来混合使用同步块和更明确的锁定。因此，当我可以摆脱它时，允许我使用 sychtronized(myObject) 的语法糖，但也能够在同步块不够灵活以执行我需要的时候直接调用 myObject.lock 和 myObject.unlock完毕。

我知道每个对象都隐含地内置了一个租用锁，供同步块使用。实际上，每次进入同步块时，都会在对象内部可重入锁上调用锁定方法，而当您离开同步块时，会在同一个可重入锁上调用解锁。我似乎很容易让一个人能够手动锁定/解锁这个隐式重入锁；因此允许混合同步块和显式锁定。

但是，据我所知，没有办法做到这一点。而且由于同步块的工作方式，我不相信有一种方便的方法可以将它们与显式锁定混合在一起。似乎这会很方便，并且可以通过扩展 Object api 来添加锁定/解锁方法来轻松添加。

我的问题是，为什么这不存在？我确定有一个原因，但我不知道它是什么。我认为问题可能与封装有关；同样的原因你不想做同步（这个）。但是，如果我已经在调用 sycnhronized(myObject) ，那么根据定义，任何了解 myObject 的人都可以在其上进行同步，如果愚蠢地执行会导致死锁。封装的问题归结为谁可以访问您同步的对象，无论您使用的是同步块还是手动锁定对象；至少在我看来。那么不允许手动锁定对象还有其他好处吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T17:09:26.163

某个对象的锁与实例本身高度相关。块和方法的结构`synchronized`非常严格。如果您作为程序员有可能干扰系统（虚拟机），则可能会导致严重问题。

*   您最终可以释放由`synchronized`块创建的锁
*   您创建一个锁，另一个`synchronized`块将释放
*   您创建的锁定条目多于退出
*   您创建的锁出口多于条目

甚至为`lock`and`release`操作定义了特定的字节码。如果您有此锁定/解锁操作的“方法”，则应将其编译为这些字节码。因此，它*实际上*是一个低级操作，与其他 Java 对象级实现有很大不同。

同步是一个非常强大的契约。我认为 JLS 的设计者不想让违约的可能性。

JLS的[第 17 章](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html)描述了更多关于预期行为的信息。

# google-app-engine - 如何在外部服务器上部署 GWT GAE 应用程序

> ID：15927013
> 
> 赞同：1
> 
> 时间：2013-04-10T13:19:00.647
> 
> 标签：google-app-engine, gwt, tomcat, jetty

我有一个带有 nosql 数据库的 GWT+GAE 应用程序，该应用程序在 Google App Engine 和 eclipse + gwt 插件中运行良好，开发环境中带有嵌入式码头服务器。现在在生产环境中，出于多种原因，我必须将此应用程序部署在外部自我管理的服务器上，如 Tomcat 或 JBoss。我没有运气地遵循许多教程和提示和技巧，例如：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#How_do_I_use_my_own_server_in_development_mode_instead_of_GWT%27s](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#How_do_I_use_my_own_server_in_development_mode_instead_of_GWT%27s)

[https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/LYySmvqdbO8](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/LYySmvqdbO8)

或[Link1](https://stackoverflow.com/questions/3231337/how-to-setup-gwt-for-tomcat) [Link2](https://stackoverflow.com/questions/4848198/debug-gwt-application-with-tomcat-eclipse) [Link3](http://blog.elitecoderz.net/gwt-and-tomcat-create-war-using-eclipse-to-deploy-war-on-tomcat/2009/12/) [Link4](https://stackoverflow.com/questions/4657947/place-gwt-application-on-jetty) [Link5](https://stackoverflow.com/questions/10076527/no-api-environment-is-registered-for-this-thread-error-when-persisting-object)

当我在外部服务器（即 tomcat 或 jetty）上部署我的应用程序时，它会正确启动，但是当我使用数据库连接进行调用时，会出现以下错误：

```
Caused by: java.lang.NullPointerException: No API environment is registered for this thread.
    at com.google.appengine.api.datastore.DatastoreApiHelper.getCurrentAppId(DatastoreApiHelper.java:86)
    at com.google.appengine.api.datastore.DatastoreApiHelper.getCurrentAppIdNamespace(DatastoreApiHelper.java:96)
    at com.google.appengine.api.datastore.Query.<init>(Query.java:171)
    at com.google.appengine.api.datastore.Query.<init>(Query.java:102)
    at com.googlecode.objectify.impl.QueryImpl.<init>(QueryImpl.java:69)
    at com.googlecode.objectify.impl.AsyncObjectifyImpl.query(AsyncObjectifyImpl.java:354)
    at com.googlecode.objectify.impl.ObjectifyImpl.query(ObjectifyImpl.java:207)
    at com.beoui.geocell.ObjectifyGeocellQueryEngine.query(ObjectifyGeocellQueryEngine.java:52)
    at com.beoui.geocell.GeocellManager.proximitySearch(GeocellManager.java:381) 
```

如何部署到 Tomcat、JBOSS 或 Jetty 等外部服务器？还是[根本不可能](https://stackoverflow.com/questions/1186947/how-to-configure-tomcat-to-run-an-google-app-engine-gwt-application-on-mac-os)？

我的看法是：应用程序是否在eclipse嵌入式jetty上正确运行，在某种程度上可以配置一个外部jetty分布来运行应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:43:44.107

GAE 附带一[组服务](https://developers.google.com/appengine/docs/java/apis)，这些服务基本上是隐藏在 API 后面的大型外部系统。本地开发服务器只是一个带有嵌入式数据库和模仿生产 GAE 的 API 层的 Jetty。您不能将开发服务器用于生产目的 - 它不是为此而设计的，并且没有生产系统的并发性和可靠性特性。

如果您想在其他地方运行 GAE 代码然后是生产 GAE 服务，请查看[AppScale](http://appscale.cs.ucsb.edu/)或[CapeDwarf](http://www.jboss.org/capedwarf)。

此外，您提供的大多数链接都涉及在 Tomcat/Jetty 上运行 GWT 应用程序，但您在使用 AppEngine 时遇到问题。[GWT](https://developers.google.com/web-toolkit/)和[AppEngine](https://developers.google.com/appengine/)是两种独立的技术（可以一起工作，但不是必需的）。

# java - 在java中将图像旋转90度

> ID：15927014
> 
> 赞同：10
> 
> 时间：2013-04-10T13:19:04.133
> 
> 标签：java, image, image-rotation

我已经设法旋转图像`180 degrees`，但希望旋转它`90 degrees` `clockwise`可以有人编辑我的代码，以便它通过解释来做到这一点。谢谢。

```
 private void rotateClockwise()
    {
        if(currentImage != null){
            int width = currentImage.getWidth();
            int height = currentImage.getHeight();
            OFImage newImage = new OFImage(width, height);
            for(int y = 0; y < height; y++) {
                for(int x = 0; x < width; x++) {
                    newImage.setPixel( x, height-y-1, currentImage.getPixel(x, y));
                }
        }
            currentImage = newImage;
            imagePanel.setImage(currentImage);
            frame.pack();
    }
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T13:31:41.300

使用此方法。

```
/**
 * Rotates an image. Actually rotates a new copy of the image.
 * 
 * @param img The image to be rotated
 * @param angle The angle in degrees
 * @return The rotated image
 */
public static Image rotate(Image img, double angle)
{
    double sin = Math.abs(Math.sin(Math.toRadians(angle))),
           cos = Math.abs(Math.cos(Math.toRadians(angle)));

    int w = img.getWidth(null), h = img.getHeight(null);

    int neww = (int) Math.floor(w*cos + h*sin),
        newh = (int) Math.floor(h*cos + w*sin);

    BufferedImage bimg = toBufferedImage(getEmptyImage(neww, newh));
    Graphics2D g = bimg.createGraphics();

    g.translate((neww-w)/2, (newh-h)/2);
    g.rotate(Math.toRadians(angle), w/2, h/2);
    g.drawRenderedImage(toBufferedImage(img), null);
    g.dispose();

    return toImage(bimg);
} 
```

取自我的[ImageTool](https://code.google.com/p/game-engine-for-java/source/browse/src/com/gej/util/ImageTool.java)类。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:28:21.563

看看[http://docs.oracle.com/javase/tutorial/2d/index.html](http://docs.oracle.com/javase/tutorial/2d/index.html)和[http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics2D.html# rotate%28double%29](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics2D.html#rotate%28double%29)以及这篇文章[Rotate an image in java](https://stackoverflow.com/questions/4156518/rotate-an-image-in-java)

# esapi - ESAPI 编码问题

> ID：15927015
> 
> 赞同：0
> 
> 时间：2013-04-10T13:19:06.300
> 
> 标签：esapi

我们正在尝试在我们的网络应用程序中使用 ESAPI。我们在 servlet 中有以下功能。

```
 protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {

        response.setContentType("text/html;charset=UTF-8");

        response.setHeader(SearchConstants.CACHE_CONTROL_HEADER,

                    SearchConstants.MAX_AGE_ZERO);

        response.setHeader(SearchConstants.CACHE_CONTROL_HEADER,

                    SearchConstants.NO_CACHE);

        response.setDateHeader(SearchConstants.EXPIRES_HEADER, 0);

        response.setHeader(SearchConstants.PRAGMA_HEADER, "no cache");

        result = processRequest(request, response);

        if (SearchConstants.XSLT_ERROR_MSG.equals(result)) {

              LOGGER.error("XSLT ERROR FOR QUERY STRING: "

                          + request.getQueryString());

              response.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);

        } else if (SearchConstants.SEARCH_PAGE_MISSING_MSG.equals(result)) {

              LOGGER.error("NOT FOUND ERROR FOR QUERY STRING: "

                          + request.getQueryString());

              response.sendError(HttpServletResponse.SC_NOT_FOUND);

        } else {

              final PrintWriter out = response.getWriter();
              out.println(result); // this works
              // out.println(ESAPI.encoder().encodeForHTML(result));

        }

  } 
```

在上面的代码中，如果我使用 `out.println(ESAPI.encoder().encodeForHTML(result));`，这实际上将 html 作为文本打印在浏览器上。即它像简单的文本一样显示`&lt;html&gt;`其他内容.. `&lt;/html&gt;`，而不是呈现 html 页面。`result`只不过是需要在客户端上渲染的 html 内容。我们在这里做错了什么。请提供一些指示。我们如何在这里实现编码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-22T06:07:16.803

您的问题的解决方案不是编码，而是渲染 Safe HTMl .. 下面是解决方案

```
import org.owasp.validator.html.*; // Import AntiSamy

String POLICY_FILE_LOCATION = "antisamy-1.4.1.xml"; // Path to policy file

String dirtyInput = "<div><script>alert(1);</script></div>"; // Your HTML RESPONSE

Policy policy = Policy.getInstance(POLICY_FILE_LOCATION); // Create Policy object

AntiSamy as = new AntiSamy(); // Create AntiSamy object
CleanResults cr = as.scan(dirtyInput, policy, AntiSamy.SAX); // Scan dirtyInput

System.out.println(cr.getCleanHTML()); // Do something with your clean output! 
```

在编写此代码之前，请确保您具有以下内容：`antisamy.jar`.

此 jar 需要以下依赖 jar：

1.  xercesImpl.jar
2.  蜡染罐
3.  nekohtml.jar

您还需要`policy.xml`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T02:59:28.780

抱歉，我没有时间详细说明，看来您已经有了一个不错的答案。

在 ESAPI 中有一种方法可以做到这一点。我建议调用[Validator.getValidSafeHTML()](http://owasp-esapi-java.googlecode.com/svn/trunk_doc/latest/org/owasp/esapi/Validator.html#getValidSafeHTML%28java.lang.String,%20java.lang.String,%20int,%20boolean%29)方法可能是一种方法。该方法实际上使用了 AntiSamy。查看 TestValidator.java JUnit 测试应该显示它是如何使用的。不幸的是，该领域的文档非常缺乏，这是我有机会或需要使用的代码。

如果您不想使用 ESAPI，另一种方法是使用[OWASP Java HTML Sanitizer Project](https://www.owasp.org/index.php/OWASP_Java_HTML_Sanitizer_Project#tab=Main)。它比 AntiSamy 更快，维护得更好，并且依赖关系最小（可能为零）。

希望有帮助，-凯文

# character - Facebook评论的最大字符数？

> ID：15927016
> 
> 赞同：1
> 
> 时间：2013-04-10T13:19:06.683
> 
> 标签：character, facebook-comments, reduce

是否可以减少最大字符数，以便您更早地获得“阅读更多”链接？我以这种方式在我的网站上添加了评论：

[https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

我不想让评论通过更大的评论来扩展我的网页......

# ios - TableHeader 视图上的 MonoTouch SIGSEGV 错误

> ID：15927019
> 
> 赞同：0
> 
> 时间：2013-04-10T13:19:14.060
> 
> 标签：ios, mono, xamarin.ios

在论坛上几个小时后，我仍然无法弄清楚这一点。

场景：我有一个带有可扩展列表的表格视图。当用户想要展开列表时，单击标题，表格会刷新新的计数值。表头视图是：

```
[MonoTouch.Foundation.Export("tableView:viewForHeaderInSection:")]
public override  UIView GetViewForHeader (UITableView tableView, int section)
{
    float headerHeight= ...;
    UIView headerView = new UIView (new RectangleF ...);

    UIButton button1=new UIButton(new RectangleF (...));

    //set label for button
    UILabel labelTextButton = new UILabel(new RectangleF ...);
    labelTextButton.Text=...;
    labelTextButton.Lines=2;

    button1.AddSubview(labelTextButton);

    button1.TouchUpInside+= (sender, e) =>{

        ...
        tableView.ReloadData();
    };

    headerView.AddSubview (button1);

    return headerView;
} 
```

*   在模拟器上运行时，它总是在第一次运行时给我这样的错误：

```
       堆栈跟踪：
     在（包装器托管到本机）MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr)
  在 MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x0004c] 在 /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
       在 XXX.Mobile.IOS.Application.Main (string[]) [0x00000] 在 ..../Main.cs:17
       在（包装器运行时调用）.runtime_invoke_void_object（对象，intptr，intptr，intptr）
    本机堆栈跟踪：
    0 XXXXXXXXX 0x000a4d6c mono_handle_native_sigsegv + 284
    1 XXXXXXXXX 0x00018668 mono_sigsegv_signal_handler + 248
    2 libsystem_c.dylib 0x96a028cb _sigtramp + 43
    3 ？？？0xffffffff 0x0 + 4294967295
    4 UIKit 0x018bf258-[UIApplication 发送操作：toTarget：fromSender：forEvent：] + 61
    5 UIKit 0x01980021-[UIControl sendAction:to:forEvent:] + 66
    6 UIKit 0x0198057f-[UIControl（内部）_sendActionsForEvents:withEvent:] + 578
    7 UIKit 0x0197f6e8-[UIControl touchesEnded:withEvent:] + 546
    8 UIKit 0x01b831d3 _UIGestureRecognizerUpdate + 7407
    9 核心基础 0x03ee2afe __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 30
    10 核心基础 0x03ee2a3d __CFRunLoopDoObservers + 381
    11 核心基础 0x03ec07c2 __CFRunLoopRun + 1106
    12 核心基础 0x03ebff44 CFRunLoopRunSpecific + 276
    13 核心基础 0x03ebfe1b CFRunLoopRunInMode + 123
    14 图形服务 0x04e8a7e3 GSEventRunModal + 88
    15 图形服务 0x04e8a668 GSEventRun + 104
    16 UIKit 0x018bbffc UIApplicationMain + 1211
    17 ？？？0x0eeb24ed 0x0 + 250291437
    18 ？？？0x0ec26f40 0x0 + 247623488
    19 ？？？0x0ec26b48 0x0 + 247622472
    20 ？？？0x0ec26c9e 0x0 + 247622814
    21 XXXXXXXXX 0x0001ca32 mono_jit_runtime_invoke + 722
    22 XXXXXXXXX 0x00180b0e mono_runtime_invoke + 126
    23 XXXXXXXXX 0x00184d04 mono_runtime_exec_main + 420
    24 XXXXXXXXX 0x0018a0f5 mono_runtime_run_main + 725
    25 XXXXXXXXX 0x0007a0c5 mono_jit_exec + 149
    26 XXXXXXXXX 0x00218ac4 主 + 1988
    27 XXXXXXXXX 0x000159cd 开始 + 53
    ==================================================== ================
    执行本机代码时获得 SIGSEGV。这通常表明
    单声道运行时或本机库之一中的致命错误
    由您的应用程序使用。
    ==================================================== ================

```

应用程序退出模拟器主页。如果我从模拟器界面（而不是 MonoTouch）再次启动应用程序，它每次都能完美运行。

*   将应用程序加载到设备时：

它在第一次运行时运行良好，但有时（每天 3 次）应用程序会以与模拟器相同的方式挂起，但出现不同的错误。

```
         2013-04-10 16:03:16.838 XXXXXXXXX[2480:907]-[CALayer BridgeSelector]：无法识别的选择器发送到实例 0x2101da0
         2013-04-10 16:03:24.294 XXXXXXXXX[2480:907] 未处理的托管异常：引发了 Objective-C 异常。名称：NSInvalidArgumentException 原因：-[CALayer BridgeSelector]：无法识别的选择器发送到实例 0x2101da0 (MonoTouch.Foundation.MonoTouchException)
          在 MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x0004c] 在 /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
      在 XXX.Mobile.IOS.Application.Main (System.String[] args) [0x00000] 在 ...../Main.cs:17
        堆栈跟踪：
        本机堆栈跟踪：
        0 XXXXXXXXX 0x007ff711 mono_handle_native_sigsegv + 244
        1 XXXXXXXXX 0x0083b8cd sigabrt_signal_handler + 112
        2 libsystem_c.dylib 0x3a847e93 _sigtramp + 42
        3 libsystem_c.dylib 0x3a83e123 pthread_kill + 58
        4 libsystem_c.dylib 0x3a87a973 中止 + 94
        5 XXXXXXXXX 0x0089a230 monotouch_throw_monotouch_exception + 0
        6 XXXXXXXXX 0x007fd0e9 mono_invoke_unhandled_exception_hook + 92
        7 XXXXXXXXX 0x007b55e3 mono_thread_abort + 46
        8 XXXXXXXXX 0x007ff3e7 mono_handle_exception_internal + 2138
        9 XXXXXXXXX 0x007ff4b5 mono_handle_exception + 12
        10 XXXXXXXXX 0x0083ab31 mono_arm_throw_exception + 132
        11 XXXXXXXXX 0x003ba468 throw_exception + 68
        12 XXXXXXXXX 0x0089a27c monotouch_exception_handler + 0
        13 XXXXXXXXX 0x0089a32c objc_skip_type + 0
        14 核心基础 0x3252557f + 614
        15 libobjc.A.dylib 0x3a3c9a65 + 128
        16 libc++abi.dylib 0x39e1607b + 78
        17 libc++abi.dylib 0x39e16114 + 19
        18 libc++abi.dylib 0x39e17599 cxa_current_exception_type + 0
        19 libobjc.A.dylib 0x3a3c99d1 objc_exception_rethrow + 12
        20 核心基础 0x3246bf21 CFRunLoopRunSpecific + 456
        21 核心基础 0x3246bd49 CFRunLoopRunInMode + 104
        22 图形服务 0x360202eb GSEventRunModal + 74
        23 UIKit 0x34381301 UIApplicationMain + 1120
        24 XXXXXXXXX 0x0013950c wrapper_managed_to_native_MonoTouch_UIKit_UIApplication_UIApplicationMain_int_string _intptr_intptr + 240
        25 XXXXXXXXX 0x00674f70 XXX_Mobile_IOS_Application_Main_string__ + 152
        26 XXXXXXXXX 0x00384db0 wrapper_runtime_invoke_object_runtime_invoke_dynamic_intptr_intptr_intptr_intptr + 200
        27 XXXXXXXXX 0x007b7b7f mono_jit_runtime_invoke + 1054
        28 XXXXXXXXX 0x008315ab mono_runtime_invoke + 90
        29 XXXXXXXXX 0x00834457 mono_runtime_exec_main + 306
        30 XXXXXXXXX 0x008346ab mono_runtime_run_main + 482
        31 XXXXXXXXX 0x007d35db mono_jit_exec + 94
        32 XXXXXXXXX 0x00888584 主 + 2220
        33 XXXXXXXXX 0x000143e4 开始 + 40
    ==================================================== ================
    执行本机代码时收到 SIGABRT。这通常表明
    单声道运行时或本机库之一中的致命错误
    由您的应用程序使用。
    ==================================================== ================

```

我不知道这是否是 Monotouch 上 GC 的错误，或者我做错了什么。我在某处读到发送到实例的无效选择器已解决。我试图在按钮事件处理程序中放置断点，但它从未到达那个点。

论坛的其他帖子建议将变量作为全局变量（不是一个好的编程习惯），但这也不起作用。

我的配置：

```
    Xamarin 工作室
    版本 4.0.3（构建 13）
    运行：
        单声道 2.10.12 (mono-2-10/c9b270d)
        GTK 2.24.16
        GTK# (2.12.0.0)
        包版本：210120000
    苹果开发者工具
    Xcode 4.6.1 (2067)
    构建 4H512
    Xamarin.Mac
    Xamarin.Mac：未安装
    Xamarin.iOS
    版本：6.2.2.8（商业版）
    构建日期：2013-02-04 17:10:37-0400
    构建信息
    发行编号：400030013
    Git 修订：fae7c2bde0e8d51943fbd6afa22d7d2bb7a1192f
    构建日期：2013-03-21 19:16:39+0000
    Xamarin 插件：906a1edff23bcfd0ab7518463620a8ee506eaea2
    操作系统
    Mac OS X 10.8.3

```

感谢您的时间

奥维迪乌

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:10:27.620

对于任何有同样问题的人：

我观察到，对于较新版本的 Xamarin.IOS，GC 更具侵略性。

我用上面的代码尝试了一切，但没有任何效果。

我认为 GC 不保留在 Table 委托方法中声明的变量。GC 过早地采取了任何声明在那里的按钮。表格单元格的出列可能有问题。

无论如何，我从项目选项中禁用了 SGEN 构建选项。据说那里是实验性的。

这解决了我的问题，我不知道这是否是最好的解决方案，但我没有任何想法。无法调试这些内存/分配问题令人沮丧。

我已经用 Instruments 检查了禁用 SGen 的内存分配，并且内存没有像以前那样被释放。

我没有将此标记为已解决，因为我的解决方案是一种解决方法。SGen 不应该这样工作。

此致，

奥维迪乌

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:45:19.470

我也遇到了这个问题，Ovidiu 为我节省了几个小时的调试时间；这对我来说也是一个 GC 问题。万一其他人遇到这个问题 - 我通过在类而不是函数中定义 UIBUtton 来避免 GC。

# ruby - 无法使用 RVM 安装 Ruby

> ID：15927020
> 
> 赞同：2
> 
> 时间：2013-04-10T13:19:14.663
> 
> 标签：ruby, rvm, debian

我正在`Debian Wheezy`使用 kernel运行`2.6.32-028stab101.1`。

我刚刚安装`Ruby`和`RVM`. 当前安装的版本是

`ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]`,

但是，我需要`1.8.7-p371`当前代码的版本。

我尝试运行`rvm install ruby-1.8.7-p371`，但只得到以下输出：

```
Searching for binary rubies, this might take some time.
No binary rubies available for: debian/7.0/x86_64/ruby-1.8.7-p371.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Installing requirements for debian, might require sudo password.
Hit http://plex.r.worldssl.net lucid Release.gpg
Hit http://plex.r.worldssl.net lucid Release
Hit http://www.plexapp.com lucid Release.gpg
Hit http://plex.r.worldssl.net lucid/main amd64 Packages
Hit http://www.plexapp.com lucid Release
Hit http://ftp.us.debian.org sid Release.gpg
Hit http://www.plexapp.com lucid/main amd64 Packages
Hit http://ftp.us.debian.org sid Release
Hit http://ftp.us.debian.org sid/main amd64 Packages/DiffIndex
Hit http://debian.intergenia.de squeeze Release.gpg
Hit http://debian.intergenia.de squeeze/updates Release.gpg
Ign http://plex.originet.eu stable Release.gpg
Hit http://ftp.us.debian.org sid/main Translation-en/DiffIndex
Hit http://debian.intergenia.de squeeze Release
Ign http://plex.originet.eu stable Release
Ign http://plex.originet.eu stable/main amd64 Packages/DiffIndex
Ign http://www.plexapp.com lucid/main Translation-en_US
Hit http://debian.intergenia.de squeeze/updates Release
Ign http://www.plexapp.com lucid/main Translation-en
Hit http://debian.intergenia.de squeeze/main Sources
Hit http://debian.intergenia.de squeeze/contrib Sources
Hit http://debian.intergenia.de squeeze/non-free Sources
Hit http://debian.intergenia.de squeeze/main amd64 Packages
Hit http://debian.intergenia.de squeeze/contrib amd64 Packages
Hit http://debian.intergenia.de squeeze/non-free amd64 Packages
Hit http://debian.intergenia.de squeeze/updates/main Sources
Hit http://debian.intergenia.de squeeze/updates/contrib Sources
Hit http://debian.intergenia.de squeeze/updates/non-free Sources
Hit http://debian.intergenia.de squeeze/updates/main amd64 Packages
Ign http://plex.r.worldssl.net lucid/main Translation-en_US
Ign http://plex.r.worldssl.net lucid/main Translation-en
Hit http://debian.intergenia.de squeeze/updates/contrib amd64 Packages
Ign http://plex.originet.eu stable/main Translation-en_US
Hit http://debian.intergenia.de squeeze/updates/non-free amd64 Packages
Ign http://plex.originet.eu stable/main Translation-en
Err http://plex.originet.eu stable/main amd64 Packages
  404  Not Found
Ign http://debian.intergenia.de squeeze/updates/contrib Translation-en_US
Ign http://debian.intergenia.de squeeze/updates/contrib Translation-en
Ign http://debian.intergenia.de squeeze/updates/main Translation-en_US
Ign http://debian.intergenia.de squeeze/updates/main Translation-en
Ign http://debian.intergenia.de squeeze/updates/non-free Translation-en_US
Ign http://debian.intergenia.de squeeze/updates/non-free Translation-en
W: Failed to fetch http://plex.originet.eu/dists/stable/main/binary-amd64/Packages  404  Not Found

E: Some index files failed to download. They have been ignored, or old ones used instead. 
```

我尝试安装[readline](http://anlek.com/2011/01/rvm-install-1-8-7-p330-fails/)，运行`rvm mount`，插入

`[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm"`

在我的`.zshrc`，但没有任何效果。

有什么我想念的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:55:48.760

问题出在您的 apt 主机列表中，而不是在 RVM 中。

从您的文件中删除损坏的主机，`/etc/apt/sources.list`您应该没问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:27:19.047

rvm -v 说什么？

运行`rvm get stable`以获取最新的稳定版本

从那里尝试只是简单`rvm install 1.8.7`

安装后，您可以运行`rvm default 1.8.7`将其设置为默认 ruby

# r - 排序数值 R

> ID：15927023
> 
> 赞同：5
> 
> 时间：2013-04-10T13:19:32.403
> 
> 标签：r

我有一个看起来像这样的表（out）：

```
V1    V2    V3
A     x     0
A     y     1
A     z     10
A     a     11
A     b     12
...   ...   ...
A     c     2
A     d     21
A     e     22
...   ...   ...
A     f     3 
```

我用这个函数根据 V3 对这个表进行了排序

```
sorted.out <- out[order(out$V3), ] 
```

但是我希望 V3 中的值按数字顺序排列，例如 1,2,3,4，...，10,11,12，...，而不是现在的 1,10,11,12，...

我怎样才能做到这一点？

当我使用 str(out) 时，我的 V3 会作为因子变量出现。我应该把它改成数字吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T13:24:18.707

尝试`sorted.out <- out[order(as.numeric(as.character(out$V3))), ]`

请注意，您必须先转换为`character`，然后再转换为`numeric`。否则，您可能会根据因素最终获得订单。

# c - 在 C 中，如果 || 的一侧，逻辑运算符是否结束 是真的？

> ID：15927024
> 
> 赞同：1
> 
> 时间：2013-04-10T13:19:33.643
> 
> 标签：c

在 C 中有以下内容：

```
return (abc(1) || abc(2)); 
```

如果`abc(1 == 1)`返回`true`将调用`abc(2)`?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T13:20:53.293

不，不会的。这称为[“短路”](http://en.wikipedia.org/wiki/Short-circuit_evaluation)，它是一种常见的流量控制机制：

与`a && b`,`b`仅在`a`为真时评估；如果`a`为假，则整个表达式必然为假。

With `a || b`,`b`仅在`a`为 false 时评估；如果`a`为假，则整个表达式*可能*仍然为真。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T13:20:51.040

不。它保证（由*标准*），如果`abc(1)`返回`true`，`abc(2)`将不会被调用。

如果`abc(1)`返回`false`，则可以保证，它将`abc(2)`被调用。

* * *

它与`&&`: 如果你有`abc(1) && abc(2)`,`abc(2)`只有在return 时才会被调用，如果 return`abc(1)`则`true`不会被调用。`abc(1)``false`

* * *

这背后的想法是：

```
true OR whatever -> true
false OR whatever -> whatever

false AND whatever -> false
true AND whatever -> whatever 
```

这来自[布尔代数](https://en.wikipedia.org/wiki/Boolean_algebra)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T13:22:08.063

> 如果 abc(1==1) 返回 true 将调用 abc(2) 吗？

不，不会的。这种行为称为*短路*。它由 C 和 C++ 标准保证。

> ### C11(n1570), § 6.5.13 逻辑与运算符
> 
> 与按位二元`&`运算符不同，运算`&&`符保证从左到右的求值；如果计算第二个操作数，则在第一个和第二个操作数的计算之间存在一个序列点。**如果第一个操作数比较等于 0，则不计算第二个操作数。**

（重点是我的。）

这同样适用于`||`操作员。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T13:21:36.980

`||`（逻辑比较）会中断进一步检查，而`|`（按位比较）则不会。

您可能还会阅读：[之间的区别 | 和 || 或 & 和 && 用于比较](https://stackoverflow.com/questions/1279217/difference-between-and-or-and-for-comparison)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T13:22:09.790

nop，`abc(2)`仅当 left 语句为`false`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-10T13:22:24.950

`abc(2)``abc(1)`仅当is时才会被调用`false`

根据 C99 规范，逻辑 OR 运算符表示

> || 运算符保证从左到右的评估；在计算第一个操作数之后有一个序列点。如果第一个操作数比较不等于 0，则不计算第二个操作数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-10T13:23:38.057

在 C 中`||`，保证从左到右测试逻辑运算符。要使整个陈述为真，任何一个条件都可以为真。所以`||`一直从左到右，直到一个条件为真，然后停止（或到达终点）。所以不，如果`abc(1)`返回 true 则`abc(2)`不会被调用。

与 相比`&&`，它一直从左到右，直到一个条件为*假*（或它到达最后）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-10T13:23:46.593

不，这实际上是不平凡的，并且在标准中定义逻辑运算符从左到右进行评估。当无需进一步评估操作数即可确定该值时停止评估。至少我 100% 确定`AND`和`OR`。

这是一个重要的问题，因为因此操作数的评估不能通过重新组织顺序来隐式并行化或优化，因为预期的结果可能不同。

例如，广泛用例中的运行时问题，例如`if (*ptr && (ptr->number > other_number) )`

# angularjs - 从外部事件（jquery函数）切换角度范围内的值

> ID：15927026
> 
> 赞同：0
> 
> 时间：2013-04-10T13:19:39.967
> 
> 标签：angularjs

我有一个 UI 元素，我需要在其上使用 jquery 捕获事件。（我不能在这里使用 angular 作为第三方库。）然后我想访问元素的范围，并在范围内切换一个值？

任何想法我怎么能做到以上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:28:38.080

您可以使用`angular.element()`到达范围。

看到这个小提琴：http: [//jsfiddle.net/vojtajina/ngZ6u/](http://jsfiddle.net/vojtajina/ngZ6u/)

# c# - 如何使用反射调用通用扩展方法？

> ID：15927028
> 
> 赞同：17
> 
> 时间：2013-04-10T13:19:42.063
> 
> 标签：c#, generics, extension-methods, methodinfo

我写了扩展方法`GenericExtension`。现在我想调用扩展方法`Extension`。但 的值`methodInfo`始终为空。

```
public static class MyClass
{
    public static void GenericExtension<T>(this Form a, string b) where T : Form
    {
        // code...
    }

    public static void Extension(this Form a, string b, Type c)
    {
        MethodInfo methodInfo = typeof(Form).GetMethod("GenericExtension", new[] { typeof(string) });
        MethodInfo methodInfoGeneric = methodInfo.MakeGenericMethod(new[] { c });
        methodInfoGeneric.Invoke(a, new object[] { a, b });
    }

    private static void Main(string[] args)
    {
        new Form().Extension("", typeof (int));
    }
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-10T13:24:13.283

扩展方法没有附加到 type `Form`，它附加到 type `MyClass`，所以从那个类型中获取它：

```
MethodInfo methodInfo = typeof(MyClass).GetMethod("GenericExtension",
    new[] { typeof(Form), typeof(string) }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-17T20:42:39.350

如果您有类似的扩展方法

```
public static class StringExtensions
{
    public static bool IsValidType<T>(this string value);
} 
```

你可以像这样调用它（例如在测试中）：

```
public class StringExtensionTests
{
    [Theory]
    [InlineData("Text", typeof(string), true)]
    [InlineData("", typeof(string), true)]
    [InlineData("Text", typeof(int), false)]
    [InlineData("128", typeof(int), true)]
    [InlineData("0", typeof(int), true)]
    public void ShouldCheckIsValidType(string value, Type type, bool expectedResult)
    {
        var methodInfo = 
            typeof(StringExtensions).GetMethod(nameof(StringExtensions.IsValidType),
            new[] { typeof(string) });
        var genericMethod = methodInfo.MakeGenericMethod(type);
        var result = genericMethod.Invoke(null, new[] { value });
        result.Should().Be(expectedResult);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-30T20:30:42.903

根据@Mike Perrenoud 的回答，我需要调用的泛型方法不限于与扩展方法的类相同的类型（即`T`不是 type `Form`）。

给定扩展方法：

```
public static class SqlExpressionExtensions
{
    public static string Table<T>(this IOrmLiteDialectProvider dialect)
} 
```

我使用以下代码来执行该方法：

```
private IEnumerable<string> GetTrackedTableNames(IOrmLiteDialectProvider dialectProvider)
{
    var method = typeof(SqlExpressionExtensions).GetMethod(nameof(SqlExpressionExtensions.Table), new[] { typeof(IOrmLiteDialectProvider) });

    if (method == null)
    {
        throw new MissingMethodException(nameof(SqlExpressionExtensions), nameof(SqlExpressionExtensions.Table));
    }

    foreach (var table in _trackChangesOnTables)
    {
        if (method.MakeGenericMethod(table).Invoke(null, new object[] { dialectProvider }) is string tableName)
        {
            yield return tableName;
        }
    }
} 
```

其中定义的类型`_trackChangesOnTables`仅在运行时已知。通过使用`nameof`运算符，如果在重构期间删除了方法或类，则可以防止运行时出现异常。

# java - 为一组输入切换案例？

> ID：15927032
> 
> 赞同：0
> 
> 时间：2013-04-10T13:19:47.713
> 
> 标签：java, switch-statement

鉴于我有以下决赛：

```
private static final char CLIPPING_LOWER = 'c';
private static final char CLIPPING_UPPER = 'C';
private static final char RESET_LOWER = 'r';
private static final char RESET_UPPER = 'R';
private static final char LOAD_LOWER = 'l';
private static final char LOAD_UPPER = 'L';
private static final char QUIT_LOWER = 'q';
private static final char QUIT_UPPER = 'Q'; 
```

并考虑开关盒：

```
 public void keyPressed(KeyEvent e) 
        {
            char usersChoice = e.getKeyChar();      // get the user's choice 
            switch(usersChoice)
            {
            case LOAD_UPPER:
                {
                    userPressedLoad();
                    break;
                }
            case LOAD_LOWER:
                {
                    userPressedLoad();
                    break;
                }                   

            case RESET_LOWER:
                {
                    userPressedReset();
                    break;
                }

            case RESET_UPPER:
                {
                    userPressedReset();
                    break;
                }

            case CLIPPING_LOWER:
                {
                    userPressedClipping();
                    break;
                }

            case CLIPPING_UPPER:
                {
                    userPressedClipping();
                    break;
                }

            case QUIT_UPPER:
                {
                    userPressedQuit();
                    break;
                }

            case QUIT_LOWER:
                {
                    userPressedQuit();
                    break;
                }                   

            default: 
                break;

            }

        } 
```

是否可以在一个块中（以及`c`和...等）编写一个案例，而不是为一个单独的案例和另一个案例编写一个案例？`C``r``R``c``C`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:23:33.153

将案例组合在一起的一种解决方案

```
case LOAD_UPPER:
case LOAD_LOWER:
    userPressedLoad();
    break; 
```

另一种解决方案是[将输入转换为大写](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#toUpperCase%28char%29)并在 switch 语句中仅使用大写

```
char usersChoice = Character.toUpperCase(e.getKeyChar());

case LOAD_UPPER:
    userPressedLoad();
    break; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:21:57.913

```
case CLIPPING_LOWER:
case CLIPPING_UPPER: {
                    userPressedClipping();
                    break;
                } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T13:24:19.343

您可以使用 usersChoice 使用 Character.toLowerCase，这样您就不必处理“R”、“C”等。

[http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#toLowerCase(char)](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#toLowerCase(char))

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T13:23:45.577

是的，例如：

```
case LOAD_UPPER: case LOAD_LOWER:
{
    userPressedLoad();
    break;
} 
```

# c++ - 使用 C++11 基于范围的正确方法是什么？

> ID：15927033
> 
> 赞同：232
> 
> 时间：2013-04-10T13:19:52.183
> 
> 标签：c++, c++11, foreach

使用 C++11 基于范围的正确方法是什么`for`？

应该使用什么语法？`for (auto elem : container)`, 或`for (auto& elem : container)`或`for (const auto& elem : container)`? 还是其他？

* * *

## 回答 #1

> 赞同：442
> 
> 时间：2013-04-10T13:20:04.763

# TL;DR：考虑以下准则：

1.  要**观察**元素，请使用以下语法：

    ```
    for (const auto& elem : container)    // capture by const reference 
    ```

    *   如果对象*复制起来很便宜*（如`int`s、`double`s 等），则可以使用稍微简化的形式：

        ```
         for (auto elem : container)    // capture by value 
        ```

2.  要**修改**就地元素，请使用：

    ```
    for (auto& elem : container)    // capture by (non-const) reference 
    ```

    *   如果容器使用*“代理迭代器”*（如`std::vector<bool>`），请使用：

        ```
         for (auto&& elem : container)    // capture by && 
        ```

当然，如果需要在循环体内制作元素的**本地副本，***按值*( `for (auto elem : container)`) 捕获是一个不错的选择。

* * *

# 详细讨论

让我们开始区分*观察*容器中的元素与就地*修改它们。*

# 观察元素

让我们考虑一个简单的例子：

```
vector<int> v = {1, 3, 5, 7, 9};

for (auto x : v)
    cout << x << ' '; 
```

上面的代码打印元素（`int`s）在`vector`：

> ```
> 1 3 5 7 9 
> ```

现在考虑另一种情况，其中向量元素不仅仅是简单的整数，而是更复杂类的实例，具有自定义复制构造函数等。

```
// A sample test class, with custom copy semantics.
class X
{
public:
    X() 
        : m_data(0) 
    {}

    X(int data)
        : m_data(data)
    {}

    ~X() 
    {}

    X(const X& other) 
        : m_data(other.m_data)
    { cout << "X copy ctor.\n"; }

    X& operator=(const X& other)
    {
        m_data = other.m_data;       
        cout << "X copy assign.\n";
        return *this;
    }

    int Get() const
    {
        return m_data;
    }

private:
    int m_data;
};

ostream& operator<<(ostream& os, const X& x)
{
    os << x.Get();
    return os;
} 
```

如果我们对这个新类使用上述`for (auto x : v) {...}`语法：

```
vector<X> v = {1, 3, 5, 7, 9};

cout << "\nElements:\n";
for (auto x : v)
{
    cout << x << ' ';
} 
```

输出类似于：

> ```
> [... copy constructor calls for vector<X> initialization ...]
> 
> Elements:
> X copy ctor.
> 1 X copy ctor.
> 3 X copy ctor.
> 5 X copy ctor.
> 7 X copy ctor.
> 9 
> ```

由于可以从输出中读取，**复制构造函数**调用是在基于范围的 for 循环迭代期间进行的。
这是因为我们正在**按值** （中的部分）从容器中*捕获*元素。**`auto x``for (auto x : v)`**

 **这是*低效*的代码，例如，如果这些元素是 的实例`std::string`，则可以完成堆内存分配，代价高昂地访问内存管理器等。如果我们只想*观察*容器中的元素，这是没有用的。

因此，可以使用更好的语法：**通过`const`引用**捕获，即**`const auto&`**：

```
vector<X> v = {1, 3, 5, 7, 9};

cout << "\nElements:\n";
for (const auto& x : v)
{ 
    cout << x << ' ';
} 
```

现在输出是：

> ```
>  [... copy constructor calls for vector<X> initialization ...]
> 
> Elements:
> 1 3 5 7 9 
> ```

没有任何虚假（并且可能很昂贵）的复制构造函数调用。

因此，当**观察**容器中的元素时（即只读访问），以下语法适用于简单*的复制成本低的*类型，如`int`,`double`等：

```
for (auto elem : container) 
```

*否则，在一般情况下*`const`，通过引用捕获更好，以避免无用（并且可能很昂贵）的复制构造函数调用：

 *```
for (const auto& elem : container) 
```

# 修改容器中的元素

如果我们想使用 range-based来*修改*`for`容器中的元素，上面的`for (auto elem : container)`和`for (const auto& elem : container)` 语法都是错误的。

事实上，在前一种情况下，`elem`存储原始元素的*副本*，因此对其所做的修改只是丢失并且不会永久存储在容器中，例如：

```
vector<int> v = {1, 3, 5, 7, 9};
for (auto x : v)  // <-- capture by value (copy)
    x *= 10;      // <-- a local temporary copy ("x") is modified,
                  //     *not* the original vector element.

for (auto x : v)
    cout << x << ' '; 
```

输出只是初始序列：

> ```
> 1 3 5 7 9 
> ```

相反，尝试使用`for (const auto& x : v)`just 无法编译。

g++ 输出如下错误消息：

> ```
> TestRangeFor.cpp:138:11: error: assignment of read-only reference 'x'
>           x *= 10;
>             ^ 
> ```

在这种情况下，正确的方法是通过非`const`引用捕获：

```
vector<int> v = {1, 3, 5, 7, 9};
for (auto& x : v)
    x *= 10;

for (auto x : v)
    cout << x << ' '; 
```

输出是（如预期的那样）：

> ```
> 10 30 50 70 90 
> ```

此`for (auto& elem : container)`语法也适用于更复杂的类型，例如考虑 a `vector<string>`：

```
vector<string> v = {"Bob", "Jeff", "Connie"};

// Modify elements in place: use "auto &"
for (auto& x : v)
    x = "Hi " + x + "!";

// Output elements (*observing* --> use "const auto&")
for (const auto& x : v)
    cout << x << ' '; 
```

输出是：

> ```
> Hi Bob! Hi Jeff! Hi Connie! 
> ```

## 代理迭代器的特例

假设我们有一个`vector<bool>`，并且我们想要反转其元素的逻辑布尔状态，使用上面的语法：

```
vector<bool> v = {true, false, false, true};
for (auto& x : v)
    x = !x; 
```

上面的代码编译失败。

g++ 输出类似于以下的错误消息：

> ```
> TestRangeFor.cpp:168:20: error: invalid initialization of non-const reference of
>  type 'std::_Bit_reference&' from an rvalue of type 'std::_Bit_iterator::referen
> ce {aka std::_Bit_reference}'
>      for (auto& x : v)
>                     ^ 
> ```

问题是`std::vector`模板*专门*用于`bool`，其实现将 s*打包*以`bool`优化空间（每个布尔值存储在一个位中，一个字节中有八个“布尔”位）。

正因为如此（因为不可能返回对单个位的引用）， `vector<bool>`所以使用所谓的**“代理迭代器”**模式。“代理迭代器”是一个迭代器，当被取消引用时，它*不会*产生一个普通的`bool &`，而是（按值）返回一个*临时对象*，它是一个[可转换为的](http://en.wikipedia.org/wiki/Sequence_container_%28C%2B%2B%29#Specialization_for_bool "维基百科上的 std::vector<bool> 专业化")[*代理类*`bool`](http://en.wikipedia.org/wiki/Sequence_container_%28C%2B%2B%29#Specialization_for_bool "维基百科上的 std::vector<bool> 专业化")。（另请参阅StackOverflow 上的[此问题和相关答案。）](https://stackoverflow.com/questions/8399417/why-vectorboolreference-doesnt-return-reference-to-bool "为什么 vector<bool>::reference 不返回对 bool 的引用？")

要修改 的元素，必须使用`vector<bool>`一种新的语法（using ）：`auto&&`

```
for (auto&& x : v)
    x = !x; 
```

以下代码工作正常：

```
vector<bool> v = {true, false, false, true};

// Invert boolean status
for (auto&& x : v)  // <-- note use of "auto&&" for proxy iterators
    x = !x;

// Print new element values
cout << boolalpha;        
for (const auto& x : v)
    cout << x << ' '; 
```

和输出：

> ```
> false true true false 
> ```

请注意，该**`for (auto&& elem : container)`**语法也适用于普通（非代理）迭代器的其他情况（例如，对于 a`vector<int>`或 a `vector<string>`）。

（作为旁注，前面提到的“观察”语法`for (const auto& elem : container)`也适用于代理迭代器情况。）

# 概括

上述讨论可以总结为以下指南：

1.  要**观察**元素，请使用以下语法：

    ```
    for (const auto& elem : container)    // capture by const reference 
    ```

    *   如果对象*复制起来很便宜*（如`int`s、`double`s 等），则可以使用稍微简化的形式：

        ```
         for (auto elem : container)    // capture by value 
        ```

2.  要**修改**就地元素，请使用：

    ```
    for (auto& elem : container)    // capture by (non-const) reference 
    ```

    *   如果容器使用*“代理迭代器”*（如`std::vector<bool>`），请使用：

        ```
         for (auto&& elem : container)    // capture by && 
        ```

当然，如果需要在循环体内制作元素的**本地副本，***按值*( `for (auto elem : container)`) 捕获是一个不错的选择。

* * *

## 泛型代码的附加说明

在*泛型代码*中，由于我们不能假设泛型类型`T`复制起来很便宜，因此在**观察**模式下，始终使用**`for (const auto& elem : container)`**.
（这不会触发潜在的昂贵的无用副本，对于复制成本低的类型（如 ）也可以正常工作`int`，也适用于使用代理迭代器的容器，如`std::vector<bool>`.）

此外，在**修改**模式下，如果我们希望*通用代码*在代理迭代器的情况下也能工作，最好的选择是**`for (auto&& elem : container)`**.
（这也适用于使用普通非代理迭代器的容器，比如`std::vector<int>`or `std::vector<string>`。）

因此，在*通用代码*中，可以提供以下准则：

1.  要**观察**元素，请使用：

    ```
    for (const auto& elem : container) 
    ```

2.  要**修改**就地元素，请使用：

    ```
    for (auto&& elem : container) 
    ```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-10T13:34:03.213

没有*正确*的使用方法`for (auto elem : container)`，`for (auto& elem : container)`或`for (const auto& elem : container)`。你只是表达你想要的。

让我详细说明一下。让我们散散步吧。

```
for (auto elem : container) ... 
```

这是语法糖：

```
for(auto it = container.begin(); it != container.end(); ++it) {

    // Observe that this is a copy by value.
    auto elem = *it;

} 
```

如果您的容器包含复制成本低的元素，您可以使用它。

```
for (auto& elem : container) ... 
```

这是语法糖：

```
for(auto it = container.begin(); it != container.end(); ++it) {

    // Now you're directly modifying the elements
    // because elem is an lvalue reference
    auto& elem = *it;

} 
```

例如，当您想直接写入容器中的元素时，请使用此选项。

```
for (const auto& elem : container) ... 
```

这是语法糖：

```
for(auto it = container.begin(); it != container.end(); ++it) {

    // You just want to read stuff, no modification
    const auto& elem = *it;

} 
```

正如评论所说，仅供阅读。就是这样，如果使用得当，一切都是“正确的”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-10T19:35:24.440

正确的手段永远是

```
for(auto&& elem : container) 
```

这将保证所有语义的保存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-12T07:10:20.990

虽然 range-for 循环的最初动机可能是易于迭代容器的元素，但语法足够通用，即使对于不是纯粹容器的对象也很有用。

for 循环的语法要求是`range_expression`支持`begin()`和`end()`作为任一函数——要么作为它评估的类型的成员函数，要么作为接受该类型实例的非成员函数。

作为一个人为的示例，可以生成一系列数字并使用以下类迭代该范围。

```
struct Range
{
   struct Iterator
   {
      Iterator(int v, int s) : val(v), step(s) {}

      int operator*() const
      {
         return val;
      }

      Iterator& operator++()
      {
         val += step;
         return *this;
      }

      bool operator!=(Iterator const& rhs) const
      {
         return (this->val < rhs.val);
      }

      int val;
      int step;
   };

   Range(int l, int h, int s=1) : low(l), high(h), step(s) {}

   Iterator begin() const
   {
      return Iterator(low, step);
   }

   Iterator end() const
   {
      return Iterator(high, 1);
   }

   int low, high, step;
}; 
```

通过以下`main`功能，

```
#include <iostream>

int main()
{
   Range r1(1, 10);
   for ( auto item : r1 )
   {
      std::cout << item << " ";
   }
   std::cout << std::endl;

   Range r2(1, 20, 2);
   for ( auto item : r2 )
   {
      std::cout << item << " ";
   }
   std::cout << std::endl;

   Range r3(1, 20, 3);
   for ( auto item : r3 )
   {
      std::cout << item << " ";
   }
   std::cout << std::endl;
} 
```

将得到以下输出。

```
1 2 3 4 5 6 7 8 9 
1 3 5 7 9 11 13 15 17 19 
1 4 7 10 13 16 19 
```***

# bash - Bash：将变量作为带引号的参数传递

> ID：15927034
> 
> 赞同：1
> 
> 时间：2013-04-10T13:19:57.383
> 
> 标签：bash, shell, emacs24

我正在尝试将一些论点传递给 ecb。但我认为引号的转义存在问题。下面的 $edir 变量尤其引起了很多问题。

```
#!/bin/bash

edir='"(open-project-ecb \"'`pwd`'\")"'

#edir=`pwd`

echo $edir

command=( -n --eval $edir)

emacsclient "${command[@]}" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T13:45:06.537

你只是引用得太早了。只要引用 的扩展`$edir`，就不需要在其值中嵌入额外的引号；它将被视为一个单词。

```
edir="(open-project-ecb \"$(pwd)\")"
command=( -n --eval "$edir" )
emacsclient "${command[@]}" 
```

# c# - OpenPop 的 Windows 服务从 GetMessage 代码退出，相同的代码可以赢取应用程序

> ID：15927042
> 
> 赞同：0
> 
> 时间：2013-04-10T13:20:22.947
> 
> 标签：c#, windows-services, openpop, gmail-pop

我们正在使用下载 Gmail AC 附件的代码

openpop3 命名空间。在此代码中，我们正在检查附件大小（如果有附件）

大小大于指定值（在配置文件中设置的值以 kb 为单位）。那么它必须

向发件人发送电子邮件....它在 Windows 应用程序中运行良好，但每当我实现代码时

在 Window 服务中出现问题。它从这行代码中退出函数

```
OpenPop.Mime.Message m = popClient.GetMessage(i); 
```

Framework:3.5 VS:2008 Language# Open POP namespace V2.0.4.369

```
This is my code

 OpenPop.Mime.Message m = popClient.GetMessage(i);

private void ReceiveMails()
    {

            Utility.Log = true;
            if (popClient.Connected)
            {
                popClient.Disconnect();
            }
            popClient.Connect(POPServer, port, ssl);
            popClient.Authenticate(username, password);
            int Count = popClient.GetMessageCount();
            writeToLogFile("Total Mail count is:" + Count.ToString());
            if (Count > 0)
            {
                for (int i = 1; i <= Count; i++)
                {
                    flag = false;

                    OpenPop.Mime.Message m = popClient.GetMessage(i);
                    Sub = m.Headers.Subject;
                   int size = popClient.GetMessageSize(i);
                    int mailsize = int.Parse(ConfigurationSettings.AppSettings

["emailSize"]) * 1024;

                    if (size < mailsize)
                    {
                    //we are checking the sub of Email
                    for (int j = 1; j < 30; j++)
                    {

                        strFranchisekey = ConfigurationSettings.AppSettings

["Franchise" + j];
                        if (strFranchisekey != "")
                        {
                            int inex = strFranchisekey.IndexOf("=");
                            strFranchiseshortvalue = strFranchisekey.Substring

(0, inex);

                            if (Sub.Contains(strFranchiseshortvalue))
                            {
                                flag = true;

                                foreach (OpenPop.Mime.MessagePart attachment in 

m.FindAllAttachments())
                                {
                                    writeToLogFile(attachment.FileName);
                                    file = attachment.FileName;
                                    index = strFranchisekey.IndexOf("=");
                                    string StrCity = strFranchisekey.Substring

(index + 1);
                                    strFolderPath = 

(ConfigurationSettings.AppSettings["FolderPath" +StrCity]);
                                    StrSubFolderPath = 

(ConfigurationSettings.AppSettings["SubPath" + StrCity]);
                                    if (Directory.Exists(strFolderPath))
                                    //we are checking folder exists or not ?
                                    {
                                        File.WriteAllBytes(strFolderPath + "\\" 

+ file, attachment.Body);
                                    }
                                    //
                                    else if (Directory.Exists

(StrSubFolderPath))
                                    {
                                        File.WriteAllBytes(StrSubFolderPath + 

"\\" + file, attachment.Body);
                                    }
                                    else
                                    {
                                        //we can give here invalid path.
                                        File.WriteAllBytes

(ConfigurationSettings.AppSettings["InvalidPath"] + "\\" + file, attachment.Body);
                                        sendEmail(i);

                                    }
                                }
                                break;
                            }

                        }
                    }
                    if (flag != true)
                    {
                        writeToLogFile("matching franchise name is not found");

                        foreach (OpenPop.Mime.MessagePart attachment in 

m.FindAllAttachments())
                        {
                            File.WriteAllBytes

(ConfigurationSettings.AppSettings["InvalidPath"] + "\\" + file, attachment.Body);

                        }
                        sendEmail(i);
                    }

                }
             }
    else
  {
     writeToLogFile("Please reduce the  email size");
   }

            }
            else
            {
                writeToLogFile("No New Attachment");
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:24:23.647

感谢@Antonio Bakula 我在我的 Windows 服务应用程序中编写了 try catch 块并记录它。然后我理解了我的错误并给出了异常，无法读取另一个实例已经在读取的消息。这是因为代码是基于计时器的，并且

我每 1 分钟触发一次事件。现在，我添加了代码以在开始电子邮件处理时立即停止计时器，并在完成电子邮件处理代码后启动计时器。

# version-control - 提交时没有任何变化（缺少文件，请参阅 hg 状态）

> ID：15927043
> 
> 赞同：1
> 
> 时间：2013-04-10T13:20:23.430
> 
> 标签：version-control, mercurial

我映射到一个 ftp 驱动器，我去做了`hg init`

然后添加了一个文件，`hg add`然后`hg commit -u username -m 'message'`

我收到消息`nothing changed (2 missing files, see hg status)`

hg 状态返回：

```
X:\public_html>hg status
A .htaccess
A index.html 
```

我似乎无法找到其他人远程接近我的问题，官方文档也没有帮助我。

我没有想法，每一点信息都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:07:28.540

这似乎不太可能在 FTP 映射驱动器上工作。版本控制系统依赖于连贯的文件系统原语（锁计数等），您的映射软件可能无法正确伪造这些原语。Mercurial 有自己的协议，用于将更改移入/移出计算机（通过 HTTP 或 SSH 推送和拉取），这是在运行 FTP 服务器的机器上获取内容的正确方法。

也就是说，你可能有一点运气：

```
hg commit -u username -m 'message' .htaccess index.html 
```

如果问题是提交未检测到已修改/添加的文件。

看起来您要通过 FTP 传输的服务器是一个 linux 机器，所以它已经在运行 sshd。这意味着您可以通过以下方式克隆到它：

```
hg clone c:\localclone ssh://you@there//full/path/to/repo 
```

并且也可以从该 URL 推/拉。

# php - 如何使用谷歌地图 api 库（codeigniter）在地图上显示自己的工厂？

> ID：15927056
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:21:06.823
> 
> 标签：php, codeigniter, google-maps-api-3, google-places-api, factories

我如何指定自己的地方？我正在一个网站上工作，人们可以使用自己的邮政编码搜索特定半径内的工厂。

现在我想添加这些工厂，以便人们可以设置他们的邮政编码和半径。该半径内的工厂将显示在地图上。

我还没有尝试任何东西，因为我仍在学习和发现用于 codeigniter 的 google maps api 库。我确实在我的图书馆里读过一些关于地理编码的东西。但是如何使用呢？我没有为地理编码创建数据库。

我正在使用的图书馆：http: [//biostall.com/codeigniter-google-maps-v3-api-library](http://biostall.com/codeigniter-google-maps-v3-api-library)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:17:14.720

感谢您使用我的图书馆。到目前为止，您的网站已经走了多远？我建议您在提问之前至少试一试，这样人们就可以看到您尝试使用的代码。

总之，您需要执行以下操作：

1.  将您的工厂存储在数据库中
2.  在您的控制器中，加载 googlemaps 库
3.  同样从控制器，调用返回工厂的模型
4.  循环从模型返回，并为每个工厂通过库添加一个标记（有关如何执行此操作，请参阅文档和演示）。

我希望这会有所帮助。如果您有任何问题，请随时给我发电子邮件，史蒂夫

# extjs - ExtJs 同一页面上的两个或多个网格

> ID：15927059
> 
> 赞同：3
> 
> 时间：2013-04-10T13:21:20.713
> 
> 标签：extjs, grid, webpage, extjs4.2

我是 ExtJS 的新手。

我在同一页面上有两个网格。第一个网格有 3 列。第二只。问题是当第二个被渲染时，它会覆盖第一个网格的属性。

例如，当我尝试在第一个网格中编辑行时，它会从第二个网格中获取行的宽度。

```
变量 $booleanArray = [
    ['拒绝'，'拒绝']，
    ['允许'，'允许']
];

var myPageSize = 10;

Ext.Loader.setConfig({ enabled: true });

分机要求（[
    'Ext.grid.*',
    'Ext.data.*',
    'Ext.util.*',
    'Ext.state.*'
]);

Ext.onReady（函数（）{

    Ext.define('CharacteristicModel', {
        扩展：'Ext.data.Model',
        字段：[{name：'name'}，{name：'value'}，{name：'order'}]，
        验证：[
            {
                类型：'长度'，
                字段：'名称'，
                分钟：1
            }
        ]
    });

    var featuresStore = new Ext.data.Store({
        代理人 ： {
            模型：'CharacteristicModel'，
            类型：“休息”，
            接口：{
                阅读：admin_path + '/getCharacteristics/1/',
                创建：admin_path + '/saveCharacteristics/1/',
                更新：admin_path + '/saveCharacteristics/1/',
                销毁：admin_path + '/destroyCharacteristic/1/'
            },
            读者：{
                类型：'json'，
                根：'数据'，
                总属性：'total_count'
            },
            作者：{
                类型：'json'，
                根：'数据'
            },
            缓冲：真
        },
        听众：{
            阅读：功能（响应）{
            },
            加载：函数（存储）{
            },
            写：函数（存储，操作）{
                存储.load();
            }
        },
        页面大小：我的页面大小，
        自动加载：{开始：0，限制：myPageSize}，
        自动同步：真
    });

    var rowEditing = Ext.create('Ext.grid.plugin.RowEditing');

    var featuresGrid = new Ext.grid.GridPanel({
        id : '特征网格',
        renderTo : 'characteristics_grid_div_1',
        商店：特性商店，
        宽度：480，
        有状态的：真，
        stateId : 'characteristicsGrid',
        标题：'网格“1”'，
        iconCls : '图标用户',
        听众：{
            itemdblclick: 函数 (dv, row, item, index, e) {
                dv.refresh();
                dv.getGridColumns()[0].setEditor({
                    禁用：真，
                    可编辑：假
                });

                if (row.data.id == 6 || row.data.id == 7) {
                    dv.getGridColumns()[1].setEditor({
                        xtype：'组合'，
                        存储：新的 Ext.data.ArrayStore({
                            字段：['abbr'，'action']，
                            数据：$布尔数组
                        }),
                        displayField : '动作',
                        值字段：'缩写'，
                        模式：'本地'，
                        预输入：假，
                        triggerAction: '全部',
                        惰性渲染：是的，
                        emptyText : '选择动作'
                    });
                }
                否则 if (row.data.id == 8 || row.data.id == 11) {
                    dv.getGridColumns()[1].setEditor({
                        禁用：真，
                        可编辑：假
                    });
                }
                别的 {
                    dv.getGridColumns()[1].setEditor({
                        xtype：'文本字段'
                    });
                }
            }
        },
        列 ： [
            {
                id : '名字',
                text : '账户特征',
                可排序：假，
                宽度：340，
                固定：真的，
                数据索引：'名称'
            },
            {
                id : '价值',
                文本：'值'，
                可排序：假，
                数据索引：'值'，
                宽度：70，
                固定：真的，
                编辑：{
                    xtype：'文本字段'
                },
                渲染器：函数（值，字段）{
                    if (field.record.data.id == 6 || field.record.data.id == 7) {

                        if ($booleanArray[0][0] != value) {
                            值 = $booleanArray[1][1];
                        }
                        别的 {
                            值 = $booleanArray[0][1];
                        }
                    }
                    返回值；
                }
            },
            {
                id : '订单',
                文本：'订单'，
                可排序：假，
                数据索引：'订单'，
                宽度：70，
                固定：真的，
                编辑：{
                    xtype：'文本字段'
                },
                渲染器：函数（值，字段）{
                    返回值；
                }
            }
        ],
        bbar : Ext.create('Ext.PagingToolbar', {
            商店：特性商店，
            显示信息：真，
            页面大小：我的页面大小，
            displayMsg : '显示 {0} - {1} из {2}',
            emptyMsg : "0 行"
        }),
        停靠项目：[
            {
                xtype: '工具栏',
                项目： [
                    {
                        文本：'添加'，
                        iconCls: '图标添加',
                        处理程序：函数（）{
                            var grid_colums = rowEditing.cmp.getSelectionModel().view.getGridColumns();
                            grid_colums[0].setEditor({
                                xtype：'组合'，
                                存储：新的 Ext.data.ArrayStore({
                                    字段：['id'，'name']，
                                    数据：$特征
                                }),
                                显示字段：'名称'，
                                值字段：'id'，
                                模式：'本地'，
                                预输入：假，
                                triggerAction: '全部',
                                惰性渲染：是的，
                                emptyText : '选择动作'
                            });
                            grid_colums[1].setEditor({
                                xtype：'文本字段'
                            });
                            // 空记录
                            //characteristicsStore.autoSync = false;
                            featuresStore.insert(0, new CharacteristicModel());
                            rowEditing.startEdit(0, 0);
                            //characteristicsStore.autoSync = true;
                        }
                    },
                    '-',
                    {
                        itemId : '删除',
                        文本：'删除'，
                        iconCls : '图标删除',
                        禁用：真，
                        处理程序：函数（）{
                            var selection = featuresGrid.getView().getSelectionModel().getSelection()[0];
                            如果（选择）{
                                特征Store.remove(选择);
                            }
                        }
                    }
                ]
            }
        ],
        插件：[行编辑]
    });

    featuresGrid.getSelectionModel().on('selectionchange', function (selModel, selections) {
        featuresGrid.down('#delete').setDisabled(selections.length === 0);
    });

});

Ext.onReady（函数（）{

    Ext.define('AdvantagesModel', {
        扩展：'Ext.data.Model',
        字段：[
            {名称：'名称'}
        ]
    });

    // 设置状态提供者，所有状态信息将被保存到 cookie
    //Ext.state.Manager.setProvider(Ext.create('Ext.state.CookieProvider'));

    var 优势存储 = 新的 Ext.data.Store({
        idProperty: 'AdvantagesModel',
        代理人 ： {
            模型：'AdvantagesModel'，
            类型：“休息”，
            接口：{
                阅读：admin_path + '/getAdvantages/1/',
                创建：admin_path + '/saveAdvantages/1/',
                销毁：admin_path + '/destroyAdvantages/1/'
            },
            读者：{
                类型：'json'，
                根：'数据'，
                总属性：'总计数'
            },
            作者：{
                类型：'json'，
                根：'数据'
            },
            缓冲：真
        },
        听众：{
            阅读：功能（响应）{
            },
            加载：函数（存储）{
            },
            写：函数（存储，操作）{
                存储.load();
            }
        },
        页面大小：我的页面大小，
        自动加载：{开始：0，限制：myPageSize}，
        自动同步：真
    });

    var rowEditing = Ext.create('Ext.grid.plugin.RowEditing');

    var 优势Grid = new Ext.grid.GridPanel({
        id : 'advantagesGrid',
        renderTo : 'advantages_grid_div_1',
        商店：优势商店，
        宽度：482，
        身高：355，
        有状态的：真，
        stateId : 'advantagesGrid',
        标题：'网格 2'，
        iconCls : '图标用户',
        听众：{
            beforeedit：功能（dv，行，项目）{
                //advantagesGrid.getView().refresh();
                如果（row.record.raw）
                {
                    返回假；
                }
            }
        },
        列 ： [
            {
                id : '名字',
                text : '优势',
                可排序：假，
                数据索引：'名称'，
                宽度：480
            }
        ],
        bbar : Ext.create('Ext.PagingToolbar', {
            商店：优势商店，
            显示信息：真，
            页面大小：我的页面大小，
            displayMsg : '显示 {0} - {1} из {2}',
            emptyMsg : "0 行"
        }),
        停靠项目：[
            {
                xtype: '工具栏',
                项目： [
                    {
                        文本：'添加'，
                        iconCls: '图标添加',
                        处理程序：函数（）{
                            var grid_colums = rowEditing.cmp.getSelectionModel().view.getGridColumns();
                            grid_colums[0].setEditor({
                                xtype：'组合'，
                                存储：新的 Ext.data.ArrayStore({
                                    字段：['id'，'name']，
                                    数据：$优势
                                }),
                                显示字段：'名称'，
                                值字段：'id'，
                                模式：'本地'，
                                预输入：假，
                                triggerAction: '全部',
                                惰性渲染：是的，
                                emptyText : '选择动作'
                            });
                            // 空记录
                            优势Store.autoSync = false;
                            优势商店.插入（0，新优势模型（））；
                            rowEditing.startEdit(0, 0);
                            优点Store.autoSync = true;
                        }
                    },
                    '-',
                    {
                        itemId : '删除',
                        文本：'删除'，
                        iconCls : '图标删除',
                        禁用：真，
                        处理程序：函数（）{
                            变种选择 = 优势Grid.getView().getSelectionModel().getSelection()[0];
                            如果（选择）{
                                优点Store.remove(selection);
                            }
                        }
                    }
                ]
            }
        ],
        插件：[行编辑]
    });

    优势Grid.getSelectionModel().on('selectionchange', function (selModel, selections) {
        优势Grid.down('#delete').setDisabled(selections.length === 0);
    });

});

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-07T07:17:33.023

如果您在同一页面上有两个可编辑的网格，则另一种方法是使用 Ext.grid.plugin.RowEditing 类的两个不同的实例/对象来标识两个网格 ID 列。很多时候，拥有相同的 id 很重要。

```
var rowEditing = Ext.create('Ext.grid.plugin.RowEditing');

var rowEditing2 = Ext.create('Ext.grid.plugin.RowEditing');

plugins    : [rowEditing]

plugins    : [rowEditing2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:22:32.190

发现了问题。

```
columns    : [
        {
            id       : 'name', 
```

列 ID 必须不同，即使它们位于不同的网格中

# java - 非零半径球体之间的碰撞检测

> ID：15927062
> 
> 赞同：-2
> 
> 时间：2013-04-10T13:21:26.687
> 
> 标签：java, algorithm, collision-detection, collision, java-3d

我正在制作一个 Java 3D 游戏，其中你是一个在其他球上跳跃的球。除了玩家球和敌人球之间的碰撞之外，我已经弄清楚了一切。我发现我可以检查球体中心之间的距离是否小于它们的半径之和，但问题是我不知道该怎么做；如果有人知道我如何检查球半径的总和，我将非常感谢你告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:04:31.503

假设您有一个包含有关它们的信息的球体的容器类：

```
private class Sphere{
        public float x;
        public float y;
        public float z;
        public float radius;
    } 
```

现在您必须对 3D 空间使用勾股定理来计算两个球体中心之间的距离：

```
public boolean areColiding(Sphere s1, Sphere s2){
        float dist = (float) Math.sqrt((s1.x - s2.x) * (s1.x - s2.x) +
                                       (s1.y - s2.y) * (s1.y - s2.y) +
                                       (s1.z - s2.z) * (s1.z - s2.z));
        if(dist <= s1.radius + s2.radius) 
            return true;
        else
            return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:28:31.303

见[http://mathworld.wolfram.com/Sphere-SphereIntersection.html](http://mathworld.wolfram.com/Sphere-SphereIntersection.html)

[在https://gamedev.stackexchange.com/questions/16976/sphere-collision-response#16978](https://gamedev.stackexchange.com/questions/16976/sphere-collision-response#16978)上查看 Will 的回答

# xna - XNA 2D windows phone 级别编辑器

> ID：15927063
> 
> 赞同：1
> 
> 时间：2013-04-10T13:21:29.620
> 
> 标签：xna, windows-phone

任何人都可以指出正确的方向，在 XNA for Windows Phone 中制作 2D 关卡编辑器的最佳方法是什么？

我有一个游戏几乎完成了，但我希望在未来创建具有不同级别和主题等的多个版本。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:44:16.407

[我建议不要制作一个，而是使用Tiled](http://www.mapeditor.org/)之类的东西。它将以相对简单的 XML 格式保存阶段，甚至还有一个[C# 库](https://github.com/marshallward/TiledSharp)来读取 Tiled 文件。

还有很多其他优秀的编辑器。我建议朝这个方向发展，因为坦率地说，您将花费太多时间自己制作。

要进一步扩展 Tiled，您可以使用[上述库](https://github.com/marshallward/TiledSharp)来解析 TMX 文件，该文件是通过使用 Tiled 并保存地图制成的。阅读github 页面上的**用法，看起来使用起来非常简单。**

当你解析一个 Tiled 元素时，比如一个特定的 tile 索引或一个 Tiled “对象”，你必须将它映射到游戏中有用的东西（图形精灵纹理、玩家可以与之交互的敌人或对象等）。对于瓦片，您可以通过`enum`s 管理它（为每种瓦片类型创建一个别名并为其分配瓦片表中的确切瓦片编号），甚至只是遵循相同映射的数组。对于对象，使用 Tiled 的对象属性来分配您定义的有意义的值，然后与 TMX 一起保存，您可以使用该库解析它们。

例如，您可以在名为“enemytype”的 Tiled 对象中定义一个属性，并为其赋予值“lizard”。解析时的代码可以查找此属性和值，并`Lizard`在解析时创建一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:02:05.427

如果你有一个快完成的游戏，那么我会假设某处有代码可以加载和显示你拥有的地图。提取该代码，您就成功了一半。然后你只需要添加一些方法来添加它正在读取的地图，并将其保存回相同的格式。

如果您的地图当前是在内存中创建的，那么您需要找出一种可以将它们保存为的文件格式（XML 或 JSON 可以使用，但是用于切片类型的大整数 CSV 也可以使用并且更简单）。然后，您将需要代码从该格式中读取并填充您当前的地图模型。

# paperclip - openshift 删除资产

> ID：15927066
> 
> 赞同：0
> 
> 时间：2013-04-10T13:21:35.160
> 
> 标签：paperclip, openshift

当我将新代码推送到 Openshift 时，如何配置我的模型以避免在重新编译资产时删除它们的资产？

目前我的模型看起来像这样：

```
class Slide < ActiveRecord::Base
  attr_accessible :caption, :position, :visible, :photo
  has_attached_file :photo, :styles => { :thumb => "190x90>" }
  ... 
```

我注意到当 Openshift 在推送新代码时重新编译我的资产时，上传的照片会从 /public 目录中删除。

我发现了一些看起来像这样的旧代码：

```
has_attached_file :attachment, :removable  => true,
  :url => "/attachments/:id/:style/:basename.:extension",
  :path => ":rails_root/tmp/attachments/:id/:style/:basename.:extension" 
```

我应该在上面的代码片段中尝试类似的东西，还是有一个选项可以在 Openshift 配置中更改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:25:22.403

$OPENSHIFT_REPO_DIR 结构将在每次 git push 时被您的本地 git repo 替换。

最佳做法是使用 $OPENSHIFT_DATA_DIR 而不是 $OPENSHIFT_REPO_DIR 来处理应用程序中的上传。

更多详情请查看：[https ://openshift.redhat.com/community/kb/kb-e1065-what-is-application-crud-and-how-should-i-handle-it-in-openshift](https://openshift.redhat.com/community/kb/kb-e1065-what-is-application-crud-and-how-should-i-handle-it-in-openshift)

# angularjs - 我如何从 $resource POST 请求中获得响应

> ID：15927073
> 
> 赞同：1
> 
> 时间：2013-04-10T13:21:46.203
> 
> 标签：angularjs

所以看起来我的要求：

```
angular.module('todoApp').factory('UsersService', ['$resource', 'paramsService', '$q', function($resource, paramsService, $q){
var server = paramsService.serverUrl;
return {
    'auth': function(username, password){
        var $response = {};
        $resource(server + '/api/account/auth', {}, {call: {method: 'POST', headers: {'Content-Type': 'application/json'}}}).call(
            {'username': username, 'password': password},
            function(data){
                console.log(data);
                $response = data;
            }
        );
        console.log($response);
        return $response;
     },
  }
}]); 
```

在成功函数中，我有数据响应，但变量 $response 为空。我知道但为什么会发生，但找不到等待响应返回它的方法。如何从 $resource 获得响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T19:13:49.050

正如 charliefl 所评论的，您需要使用从 $resource 请求返回的 promise 对象来等待函数的完成（$resource 是异步的）。

我用于处理 POST 请求的 PHP 代码返回了写入文件的字节数。我使用下面的代码从响应中解析回来。由于“资源”对象不是真正的数组（如“参数”），我不得不遍历可能的索引，直到返回“未定义”。

因此，底线是响应正文中的任何内容都将作为资源对象上的字节数组返回给您。

```
$resource(...POST REQUEST...)
        .$promise.then(function (resource) {
            var bytesSaved = '';
            var i = 0;
            while (resource[i] !== undefined) {
                bytesSaved += resource[i];
                i++;
            }
            $scope.lessonMsg = 'File saved, ' + bytesSaved + ' bytes'
        }
        function(error) {
            $scope.msg = 'An error occurred trying to save the file. ' + error;
        }
    ); 
```

这是生成 POST 响应的 PHP 代码：

```
case "POST":
    $params = explode("file/", $_SERVER['REQUEST_URI']);
    $filename = '../common/resources/fileContents' .  $params[1] . '.json';
    $data = file_get_contents("php://input");
    $data = json_decode(file_get_contents("php://input"),false);
    $fileJson = file_put_contents($filename, json_encode($data));
    echo $fileJson;
break; 
```

file_put_contents() 调用返回写入的字节数，如果出现错误，则返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-17T07:01:59.330

> 您好@falloff，请尝试使用下面的代码片段，我认为这对您有用。另外，让我知道它是否有效。

```
angular.module('todoApp').factory('UsersService', ['$resource', 'paramsService', '$q', function($resource, paramsService, $q){
  var server = paramsService.serverUrl;
  return {
    'auth': function(username, password){
      let resource = $resource(server + '/api/account/auth', {}, {
        save: {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
        },
      });
      resource.save(
        {'username': username, 'password': password}, (response) => {

          if (response.length !== 0 && response.length === 0) {
            // You will get respose here in 'response'
          }
          else {
            // If response is null
          }
          deferred.resolve('request successful');
        },
        (err) => {
          // Error
          deferred.reject(err);
        });
    },
  }
}]); 
```

# java - 如何通过 setProperty 代理使用 HttpsURLConnection？

> ID：15927079
> 
> 赞同：15
> 
> 时间：2013-04-10T13:21:55.740
> 
> 标签：java, networking, proxy, outputstream, httpsurlconnection

网络环境：

> Https客户端<=============>代理服务器<==============>Https服务器
>                                                   192.168.17.11<-----外网--- --->192.168.17.22
> 10.100.21.10<----内网----->10.100.21.11
> 
> ps: Http Client 没有默认网关，但是可以ping 10.100.21.11

描述：

> 操作系统：Ubuntu 12.04 on 3 hosts
> Https 客户端：使用 java(openjdk-6) 实现。有一个网络接口。
> 代理服务器：Apache2.2。有两个网络接口。
> Https Server：Tomcat6。有一个网络接口。

我使用两种方法通过代理实现*httpsurlconnection*
：（ 为了方便我不写关于检查*serverTrusted*和*hostnameVerifier*问题的ssl句柄功能。如果需要我会更新。）

# 1.代理类

```
InetSocketAddress proxyInet = new InetSocketAddress("10.100.21.11",80);
Proxy proxy = new Proxy(Proxy.Type.HTTP, proxyInet);
URL httpsUrl = new URL("https://192.168.17.22:8443/test");
HttpsURLConnection httpsCon = (HttpsURLConnection) httpsUrl.openConnection(proxy);

httpsCon.setDoOutput(true);
httpsCon.setDoInput(true);
httpsCon.setRequestMethod("POST");
OutputStream out = httpsCon.getOutputStream();
OutputStreamWriter owriter = new OutputStreamWriter(out);

owriter.write("<request>test</request>");
owriter.flush();
owriter.close();
... 
```

这种方法可行，我观察到数据包流也符合我的预期。
*HttpClient ---> 代理服务器 ---> HttpServer*

但是当我使用 set Property 方法时：

# 2.setProperty

```
System.setProperty("http.proxySet", "true");
System.setProperty("http.proxyHost",10.100.21.11);
System.setProperty("http.proxyPort","80");

URL httpsUrl = new URL("https://192.168.17.22:8443/test");
HttpsURLConnection httpsCon = (HttpsURLConnection)httpsUrl.openConnection();

httpsCon.setDoOutput(true);
httpsCon.setDoInput(true);
httpsCon.setRequestMethod("POST");
OutputStream out = httpsCon.getOutputStream();
OutputStreamWriter owriter = new OutputStreamWriter(out);

owriter.write("<request>test</request>");
owriter.flush();
owriter.close();
... 
```

我有一个`NoRouteToHostException: Network is unreachable`.
这让我很困惑。我没有看到 HttpClient 和 ProxyServer 之间的任何数据包。
但是 HttpClient 可以 ping 到 ProxyServer(10.100.12.10 ping 10.100.21.11)

所以我删除了代理设置（不使用代理）：
也得到了`NoRouteToHostException: Network is unreachable`.
我认为这是合理的。因为没有通往外联网的路线。

我想似乎是*setProperty*方法，*httpsUrlConnection*的内部函数将检查此 url 是否可以访问。

但这很奇怪。第一种方法可以成功。

有什么想法吗？或者第一种和第二种方法有什么不同？

++++++++++++++++++++++++++++++++++++++++++++++++++++++ +++++++++++++++++

# 更新

```
System.setProperty("https.proxyHost",10.100.21.11);
System.setProperty("https.proxyPort","80"); 
```

它可以工作并且数据包流是我期望的正确的。
但是设置 https.proxyPort=443 对我来说不可行

```
System.setProperty("https.proxyPort","443"); 
```

它将抛出一个异常，如下所示：

```
java.net.SocketException: Unexpected end of file from server 
at sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:770)
.... 
```

所以我认为 Apache Proxy 也必须修改为正确的配置。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-10T13:39:41.630

您的 URL 连接是 https，而您只设置 http 代理。

尝试设置 https 代理。

```
//System.setProperty("https.proxySet", "true"); 
 System.setProperty("https.proxyHost",10.100.21.11);
 System.setProperty("https.proxyPort","443"); 
```

**编辑** @EJP 是正确的。没有 https.proxySet ..我复制了您的原始问题并包含在答案中。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-11T08:08:10.973

您将需要`Proxy`为它创建一个对象。创建一个如下：

```
Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(proxyServer, Integer.parseInt(proxyPort))); 
```

现在使用这个代理来创建`HttpURLConnection`对象。

```
HttpURLConnection connection = (HttpURLConnection) new URL(url).openConnection(proxy); 
```

如果您必须为代理设置凭据，请设置`Proxy-Authorization`请求属性：

```
String uname_pwd = proxyUsername + ":" + proxyPassword
String authString = "Basic " + new sun.misc.BASE64Encoder().encode(uname_pwd.getBytes())
connection.setRequestProperty("Proxy-Authorization", authString); 
```

最后，您连接：

```
connection.connect(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-18T22:00:52.313

谢谢@divinedragon！

kotlin 上的相同代码：

```
 fun testProxy(login: String, pass: String, proxyData: ProxyData): String {
    val url = URL("http://api.ipify.org")
    val proxy = Proxy(Proxy.Type.HTTP, InetSocketAddress(proxyData.ip, proxyData.port))
    val connection = url.openConnection(proxy) as HttpURLConnection

    val loginPass = "$login:$pass"
    val encodedLoginPass = Base64.getEncoder().encodeToString(loginPass.toByteArray())
    val authString = "Basic $encodedLoginPass"
    connection.setRequestProperty("Proxy-Authorization", authString);
    with(connection) {
        requestMethod = "GET"  // optional default is GET
        connectTimeout = 2000
        readTimeout = 2000
        return inputStream.bufferedReader().readText()
    }
} 
```

# asp.net - 准备一个ajax网站的站点地图？

> ID：15927082
> 
> 赞同：0
> 
> 时间：2013-04-10T13:22:01.713
> 
> 标签：asp.net, sitemap, google-search-console

我编写了一个充满 ajax 的网站。

```
 www.example.com/#page1
 www.example.com/#page2 
```

这些是网站的链接示例。我添加了站点地图谷歌网站管理员工具。

```
 <url>
 <loc>http://www.example.com/#page1</loc>
 <priority>0.8</priority>
 </url> 
```

sitemap.xml 包含网站上的所有链接。但是 googlebot 不理解这些链接，也没有将它们编入索引。我必须将所有页面索引到谷歌。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:27:03.680

您必须在哈希后添加一个感叹号，然后修复您的网络服务器以处理这些 URL

[在此处](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)阅读文档

# c# - 如何在 ASP.NET 中使用 DropDownList 删除 GridView 中的一行

> ID：15927085
> 
> 赞同：0
> 
> 时间：2013-04-10T13:22:05.823
> 
> 标签：c#, asp.net

这是我的设计页面

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs"     Inherits="newsamplecomb._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>
 <asp:GridView ID="GridView1" runat="server" ShowFooter="true"   AutoGenerateColumns="False"
        BackColor="#DEBA84" BorderColor="#DEBA84" BorderStyle="None" BorderWidth="1px"
        CellPadding="3" CellSpacing="2"    OnSelectedIndexChanged="GridView1_SelectedIndexChanged1"
        Height="246px" onrowdatabound="GridView1_RowDataBound" Width="1017px">
        <RowStyle BackColor="#FFF7E7" ForeColor="#8C4510" />
        <Columns>
            <asp:BoundField />
            <asp:TemplateField>
                <HeaderTemplate>
                    Rollno<br />
                </HeaderTemplate>
                <ItemTemplate>
                    <asp:DropDownList ID="DropDownList1" runat="server" Height="23px"    Width="73px" 
                        AutoPostBack="True" 
                        onselectedindexchanged="DropDownList1_SelectedIndexChanged" >
                    </asp:DropDownList>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <HeaderTemplate>
                    Name
                </HeaderTemplate>
                <ItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Width="155px"    ReadOnly="True"></asp:TextBox>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <HeaderTemplate>
                    English<br />
                </HeaderTemplate>
                <ItemTemplate>
                    <asp:TextBox ID="TextBox2" runat="server" Height="17px" Width="103px"></asp:TextBox>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <HeaderTemplate>
                    Tamil<br />
                </HeaderTemplate>
                <ItemTemplate>
                    <asp:TextBox ID="TextBox3" runat="server" Height="16px" Width="103px"></asp:TextBox>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <HeaderTemplate>
                    Maths
                </HeaderTemplate>
                <ItemTemplate>
                    <asp:TextBox ID="TextBox4" runat="server" Height="16px" Width="103px"></asp:TextBox>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <HeaderTemplate>
                    Science
                </HeaderTemplate>
                <ItemTemplate>
                    <asp:TextBox ID="TextBox5" runat="server" Height="16px" Width="103px"></asp:TextBox>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <HeaderTemplate>
                    Total<br />
                </HeaderTemplate>
                <ItemTemplate>
                    <asp:TextBox ID="TextBox6" runat="server" Height="16px" Width="103px"></asp:TextBox>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <HeaderTemplate>
                    Grade
                </HeaderTemplate>
                <ItemTemplate>
                    <asp:TextBox ID="TextBox7" runat="server" Height="16px" Width="103px"></asp:TextBox>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:Button ID="ButtonAdd" runat="server" OnClick="ButtonAdd_Click1" Text="+" />
                    <asp:Button ID="Buttondel" runat="server" Text="Del"></asp:Button>
                   <asp:RequiredFieldValidator ID="rfv" runat="server" ErrorMessage="" ForeColor="White" ControlToValidate="TextBox1" Width="10" Display="None"></asp:RequiredFieldValidator>
                </ItemTemplate>
                <FooterStyle HorizontalAlign="Right" />
            </asp:TemplateField>
        </Columns>
        <FooterStyle BackColor="#F7DFB5" ForeColor="#8C4510" />
        <PagerStyle ForeColor="#8C4510" HorizontalAlign="Center" />
        <SelectedRowStyle BackColor="#738A9C" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#A55129" Font-Bold="True" ForeColor="White" />
    </asp:GridView>

</div>
<%-- //<asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server"        ErrorMessage="RequiredFieldValidator" ForeColor="White" ControlToValidate="TextBox1" Width="10"></asp:RequiredFieldValidator>--%> 
```

这是我的cs代码

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            var ddl = (DropDownList)e.Row.FindControl("DropDownList1");
            string connection_string = ConfigurationManager.ConnectionStrings["DBC"].ConnectionString;
            SqlConnection con = new SqlConnection(connection_string);
            con.Open();

            SqlCommand cmd = new SqlCommand("Select * from stud_table", con);
            SqlDataAdapter da = new SqlDataAdapter(cmd);
            DataSet ds = new DataSet();

            da.Fill(ds);
            //  con.Close();
            ddl.DataSource = ds;
            ddl.DataTextField = "Rollno";
            ddl.DataValueField = "Rollno";
            ddl.DataBind();
            ddl.Items.Insert(0, new ListItem("--Select--", "0"));
        }
    }

    protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        dpditemdesc( sender,e);
        DropDownList box1 = (DropDownList)GridView1.Rows[x].Cells[1].FindControl("DropDownList1");

        if (box1.Text != "")
        {
            for (int i = 0; i < GridView1.Rows.Count; i++)
            {
                GridView1.Rows[i].Cells[2].Enabled = false;
                GridView1.Rows[i].Cells[3].Enabled = false;
                GridView1.Rows[i].Cells[4].Enabled = false;
                GridView1.Rows[i].Cells[5].Enabled = false;
                GridView1.Rows[i].Cells[6].Enabled = false;
                GridView1.Rows[i].Cells[7].Enabled = false;
                GridView1.Rows[i].Cells[8].Enabled = false;
            }
        }
        else
        {
            for (int i = 0; i < GridView1.Rows.Count; i++)
            {
                GridView1.Rows[i].Cells[2].Enabled = true;
                GridView1.Rows[i].Cells[3].Enabled = true;
                GridView1.Rows[i].Cells[4].Enabled = true;
                GridView1.Rows[i].Cells[5].Enabled = true;
                GridView1.Rows[i].Cells[6].Enabled = true;
                GridView1.Rows[i].Cells[7].Enabled = true;
                GridView1.Rows[i].Cells[8].Enabled = true;
            }
        }
    }
    public void dpditemdesc(object sender, EventArgs e)
    {
        DropDownList ddl = (DropDownList)sender;
        GridViewRow row = (GridViewRow)ddl.NamingContainer;
        x = row.RowIndex;
        TextBox box = (TextBox)GridView1.Rows[x].Cells[2].FindControl("TextBox1");
        if (box.Text == "")
        {
            try
            {
                x = Convert.ToInt32(Session["ct"].ToString());
                x++;
                Session["ct"] = x.ToString();
            }
            catch
            {
                x = 0;
                Session["ct"] = x.ToString();
            }
        }
        if (ddl.SelectedIndex != 0)
        {
        string connection_string =     ConfigurationManager.ConnectionStrings["DBC"].ConnectionString;
        SqlConnection con = new SqlConnection(connection_string);

        DropDownList box1 =                                 (DropDownList)GridView1.Rows[x].Cells[1].FindControl("DropDownList1");
        TextBox box2 = (TextBox)GridView1.Rows[x].Cells[2].FindControl("TextBox1");
        TextBox box3 = (TextBox)GridView1.Rows[x].Cells[3].FindControl("TextBox2");
        TextBox box4 = (TextBox)GridView1.Rows[x].Cells[4].FindControl("TextBox3");
        TextBox box5 = (TextBox)GridView1.Rows[x].Cells[5].FindControl("TextBox4");
        TextBox box6 = (TextBox)GridView1.Rows[x].Cells[6].FindControl("TextBox5");
        TextBox box7 = (TextBox)GridView1.Rows[x].Cells[7].FindControl("TextBox6");
        TextBox box8 = (TextBox)GridView1.Rows[x].Cells[8].FindControl("TextBox7");

        SqlCommand cmd = new SqlCommand("select * from stud_table where Rollno='" + box1.Text + "'", con);
            SqlDataAdapter da = new SqlDataAdapter(cmd);
            DataSet ds = new DataSet();
            da.Fill(ds);
            box2.Text = ds.Tables[0].Rows[0][1].ToString();
            box3.Text = ds.Tables[0].Rows[0][2].ToString();
            box4.Text = ds.Tables[0].Rows[0][3].ToString();
            box5.Text = ds.Tables[0].Rows[0][4].ToString();
            box6.Text = ds.Tables[0].Rows[0][5].ToString();
            box7.Text = ds.Tables[0].Rows[0][6].ToString();
            box8.Text = ds.Tables[0].Rows[0][7].ToString();
        }
        else
        {
            // box.Text = "";
            Response.Write("<Script>alert('Please Select Item Description')</script>");
        }

    }
}
} 
```

我想选择一行，如果单击删除按钮，则应删除所选行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:00:04.997

检查此链接

[如何在行命令事件中从 gridview 中删除行？](https://stackoverflow.com/questions/11473226/how-to-remove-row-from-gridview-on-row-command-event)

正如 Rajpurohit 所说，使用 gridview rowcommand，然后使用`gvYourGrid.DeleteRow(index);`

# iphone - UILabel sizeToFit 和约束

> ID：15927086
> 
> 赞同：14
> 
> 时间：2013-04-10T13:22:06.217
> 
> 标签：iphone, cocoa, autolayout

有没有什么简单的方法可以帮助我使用它们的内容大小动态改变依赖视图的位置？

我想在列中显示几个视图，它们都有不同的内容。我希望它们一个接一个地放置（我使用约束创建了布局，看起来像这样）

![初始布局](https://i.stack.imgur.com/ehmMe.png)

但是每当我更改标签和调用的内容时`sizeToFit`，系统似乎都会忽略布局。

![尺寸适合通话后](https://i.stack.imgur.com/vub1F.png)

目前我只对 height 属性感兴趣，我知道也可以使用约束 rect 并且过去我在 UIView 上编写了许多类别来动态更改大小（我想每个人都这样做了）。但也许有一种我不知道的简单方法？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-10T13:35:13.243

`-sizeToFit`如果您使用自动布局，则不应调用。这是“旧”系统的一部分。

看起来 IB 已经在您的约束中插入了明确的高度（标签旁边的垂直条表示这一点）。尝试选择标签并点击 Cmd+= 来清除这些标签。

对于多行标签，您还需要在视图控制器中执行以下操作，以使旋转/调整视图大小时一切正常：

```
- (void)updateLabelPreferredMaxLayoutWidthToCurrentWidth:(UILabel *)label
{
    label.preferredMaxLayoutWidth =
        [label alignmentRectForFrame:label.frame].size.width;
}

- (void)viewDidLayoutSubviews
{
    [super viewDidLayoutSubviews];

    [self updateLabelPreferredMaxLayoutWidthToCurrentWidth:self.label1];
    [self updateLabelPreferredMaxLayoutWidthToCurrentWidth:self.label2];
    [self updateLabelPreferredMaxLayoutWidthToCurrentWidth:self.label3];

    [self.view layoutSubviews];
} 
```

多行标签暴露了自动布局的弱点之一。我们必须更新`preferredMaxLayoutWidth`以强制标签重排并调整其高度，否则如果视图被调整大小/旋转，自动布局不会意识到标签需要重排和调整大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-26T08:46:23.110

**如果您仍想为标签使用自动布局约束。这是一个解决方案：**

```
[self.lblBadgeValue sizeToFit];
self.constraintWidthBadgeLabel.constant =  self.lblBadgeValue.frame.size.width;
[self.lblBadgeValue needsUpdateConstraints];
[self.lblBadgeValue layoutIfNeeded]; 
```

*   解释更多：
*   sizeToFit -> 使标签适合其内容的高度、宽度。
*   所以在运行时你需要更新约束高度，或者标签的宽度
*   之后你需要告诉编译器知道什么需要更新约束。
*   最后，如果约束发生变化，您需要调用布局。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-11T13:13:23.737

这也有效。 [https://github.com/jszumski/auto-layout-table-cells/blob/master/DynamicCellHeights/JSLabel.m](https://github.com/jszumski/auto-layout-table-cells/blob/master/DynamicCellHeights/JSLabel.m)

```
@interface JSLabel : UILabel

@end

@implementation JSLabel

- (id)init {
    self = [super init];

    // required to prevent Auto Layout from compressing the label (by 1 point usually) for certain constraint solutions
    [self setContentCompressionResistancePriority:UILayoutPriorityRequired
                                          forAxis:UILayoutConstraintAxisVertical];

    return self;
}

- (void)layoutSubviews {
    [super layoutSubviews];

    self.preferredMaxLayoutWidth = CGRectGetWidth(self.bounds);

    [super layoutSubviews];
}

@end 
```

# android - 在 init.rc 中回显

> ID：15927087
> 
> 赞同：2
> 
> 时间：2013-04-10T13:22:06.533
> 
> 标签：android, kernel, init

嗨，我想将这些脚本添加到 init.rc，但我收到 init.rc 不支持回显的错误。

```
echo device > /sys/devices/platform/usbc.0/mode 
```

在 init.rc 中做这样的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T13:53:04.010

你可能会使用`write`它。就像是：

```
write /sys/devices/platform/usbc.0/mode ${device} 
```

或者如果你真的想写字符串“设备”：

```
write /sys/devices/platform/usbc.0/mode "device" 
```

# php - 为什么这会在 while 循环内外复制帖子 - PHP？

> ID：15927105
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:22:38.780
> 
> 标签：php, wordpress

以下在循环中生成 2 个帖子，其中包含周围的 div 行流体。然后它会在之后创建另外 2 个帖子。为什么是这样？编辑：上面的代码按要求：

```
<?php  get_header(); ?>
<section class="clearfix" id="home">

<div class="row-fluid">

<?php $count = 1; ?>
<?php if ( have_posts() ) : ?>
<?php while ( have_posts() ) : the_post(); ?>   
<div class="span4">
    <div class="wrap-title">
        <div class="position">
            <div class="title"><?php the_title();?></div>
            <div class="tags"><?php echo $cats; ?> </div>   
        </div>
    </div>  
</div>
<?php if($count == 2) {
    echo '</div>';
}?>
<?php $count++; ?>
<?php endwhile; ?> 
```

我在这里发布与 wordpress 相对，因为我预计它是一个 PHP 语法错误，可能是计数变量或 row-fluid div 所在的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:45:33.907

尽管我会以不同的方式创建代码，但我认为解决您的问题的方法是将您的代码修改为：

```
<?php  get_header(); ?>
<section class="clearfix" id="home">

<?php $count = 1; ?>
<?php if ( have_posts() ) : ?>
<?php while ( have_posts() ) : the_post(); ?>   
<?php if($count % 2 == 0) {
  <div class="row-fluid">
}?>
<div class="span4">
    <div class="wrap-title">
        <div class="position">
            <div class="title"><?php the_title();?></div>
            <div class="tags"><?php echo $cats; ?> </div>   
        </div>
    </div>  
</div>
<?php if($count % 2 == 0) {
    echo '</div>';
}?>
<?php $count++; ?>
<?php endwhile; ?> 
```

**编辑：**

您说它之后还会产生 2 个帖子 - 这就是为什么您将`</div>`在前两个帖子之后添加，然后您将继续打印。解决方案是使用上面的代码 - 使用`%` **或**打印只有两个帖子使用此代码：

```
<?php  get_header(); ?>
<section class="clearfix" id="home">

<div class="row-fluid">

<?php $count = 1; ?>
<?php if ( have_posts() ) : ?>
<?php while ( have_posts() ) : the_post(); ?>   
<div class="span4">
    <div class="wrap-title">
        <div class="position">
            <div class="title"><?php the_title();?></div>
            <div class="tags"><?php echo $cats; ?> </div>   
        </div>
    </div>  
</div>
<?php if($count == 2) {
    break;
}?>
<?php $count++; ?>
<?php endwhile; ?>
</div> 
```

但是上面的代码可以优化为不搜索所有帖子，但它应该可以按原样工作。

# c - 从函数返回 char * 的内容

> ID：15927107
> 
> 赞同：3
> 
> 时间：2013-04-10T13:22:48.357
> 
> 标签：c, pointers, return-value, string-literals

最近遇到了以下代码，它声明了一个 char *p，分配了诸如 p="GOOD" 之类的值并返回 return p。函数调用完成后返回值是否有效？

```
const char * get_state(int state)
{
    char *p;

    if (state) {
        p = "GOOD";
    }
    else
    {
        p = "BAD";
    }

    return p;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T13:28:10.653

是的，它是有效的。字符串字面量`"GOOD"`和保证在永久的静态存储中，并且即使在返回`"BAD"`后也将继续存在。`get_state()`

```
// Invalid
char str[] = "GOOD";
char *p = str;
return p;

// Valid
char *p = "GOOD";
return p; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T13:28:36.383

在这种特定情况下，返回值很好，因为它指向静态存储（在进程期间分配字符串文字的内存）。

如果返回的指针指向一个局部变量，那么就会出现问题，例如：

```
// BAD! You cannot use the return value of this function!
const char * get_state(int state)
{
    char c;
    return &c;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T13:45:19.537

> *   函数调用完成后返回值是否有效？

是的，因为`p`指向字符串文字，所以字符串文字具有静态存储持续时间，这意味着：

（C 规范的第 6.2.4 p3 节）

> 它的生命周期是程序的整个执行过程，它的存储值只在程序启动之前初始化一次。

因此，C 语言保证字符串在您的程序中随处可用，并且`"GOOD"`只会返回指向这些内存位置之一的指针。`"BAD"``get_state()`

# javascript - js removeChild 不起作用

> ID：15927108
> 
> 赞同：0
> 
> 时间：2013-04-10T13:22:50.433
> 
> 标签：javascript, removechild

我有一个有点棘手的想法来动态创建和删除元素。如果用户单击最后一个元素，则创建新元素。我他单击除最后一个元素之外的任何其他元素，然后删除所有具有较大 id 的元素。这是[示例](http://help.andreyputilov.ru/test/)。

在我删除一个元素之前，这段代码运行良好。它不取决于我删除元素的方式，如果我在 Firebug 中执行此操作或按最后一个元素，代码也会停止工作。但是当我通过 add_button() 函数添加元素时，代码再次开始工作。如果我再次删除任何元素，代码将停止如上所述工作。

这是示例代码

```
function add_or_remove( id ) {
    var el = document.getElementById('box');
    // let`s check if this is the last button or not
    var last = true;
    var els = el.childNodes;
    for( var i in els )
        if( (els[i].nodeType==1) && (els[i].className) && (els[i].className.indexOf('button')>=0) )
            last = last && (els[i].id<='button_'+id);
    if( last ) {
        add_button();
    } else {
        remove_buttons_after( id );
    };
};

function add_button() {
    var el = document.getElementById('box');
    var id = add_button.id_new;
    var add = document.createElement('a');
    add.className = 'button';
    add.id = 'button_'+id;
    add.href='javascript: add_or_remove(\''+id+'\');';
    add.innerHTML = 'click me!';
    el.appendChild(add);
    add_button.id_new++;
}

function remove_buttons_after( id ) {
    var el = document.getElementById('box');
    var els = el.childNodes;
    var dels = [];
    for( var i in els )
        if( (els[i].nodeType==1) && (els[i].className) && (els[i].className.indexOf('button')>=0) )
            if( els[i].id>'button_'+id )
                dels.push( els[i] );
    for( i=0; i<dels.length; i++ )
        el.removeChild( dels[i] );
}; 
```

我什至无法想象任何原因。

# c# - 如何清除 Cookie 上的 HttpOnly 标志？

> ID：15927109
> 
> 赞同：2
> 
> 时间：2013-04-10T13:22:54.240
> 
> 标签：c#, http, cookies, ormlite-servicestack

对很多人来说，我似乎遇到了相反的问题。许多问题都研究了为什么他们的 cookie 会丢失`HttpOnly`设置。我正在努力弄清楚为什么我的一直在闲逛。

我正在编写一个代理服务，`ServiceStack`以允许 jQuery ajax 调用与不实现 JSONP 或 CORS 的服务器跨域工作（别担心，这实际上是一个合法的项目）。当收到包含 cookie 的响应时，我将其复制到 Response 对象，如下所示：

传入的cookie：

```
Set-Cookie: MYAPI=8579...05B1; expires=Thu, 10-Apr-2014 13:08:18 GMT; path=/ 
```

如您所见，没有 HttpOnly 标志。然后我将 cookie 复制如下：

```
var cookies = client.CookieContainer.GetCookies(new Uri(apiUrl));
foreach (Cookie cookie in cookies)
{
    cookie.HttpOnly = false;
    cookie.Domain = "";
    Response.Cookies.AddCookie(cookie);
} 
```

然后返回响应。所有数据都正确通过，但 cookie 最终为：

```
Set-Cookie: MYAPI=8579...05B1; expires=Thu, 10-Apr-2014 13:08:18 GMT; path=/; HttpOnly 
```

我已将 web.config 设置为以下内容：

```
<httpCookies httpOnlyCookies="false"/> 
```

`HttpOnly`关于为什么设置标志以及如何绕过它的任何想法？我确实读过默认`ServiceStack`设置`HttpOnly`的地方，但看不到如何取消设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T22:43:46.500

ServiceStack 中添加了一个配置设置`AllowNonHttpOnlyCookies`来应对这种情况。该设置默认为`false`（强制执行`HttpOnly`cookie）。

# javascript - jquery/userscript 没有定义？

> ID：15927113
> 
> 赞同：1
> 
> 时间：2013-04-10T13:22:56.933
> 
> 标签：javascript, jquery, userscripts

在 chrome 中，我的用户脚本导致错误

```
ReferenceError: jQuery is not defined 
```

但是@require 行包含jquery。至少我知道它与greasemonkey（铬不支持吗？）

如果我删除一个函数调用的函数（这使得 $ = jQuery）我得到错误 $ 未定义。在 firefox/greasemonkey 中运行良好

```
// ==UserScript==
// @name        Detect Duplicate IDs
// @namespace   jkbfvsdjkzsvfshefsdvh
// @description Alerts you when more than one ID is on a page
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js
// @include     *
// @version     1
// @grant
// ==/UserScript==

//using localhost in @include doesn't seem to work
if(location.hostname!='localhost')
    return;

//Ignore above for console.
(function($){
$(function() {
var checkDupeIDs = function () {
    var dupes = [];
    var ids = [];
    $('[id]').each(function(i,e){ids.push(e.id)});
    var len = ids.length;
    for(i=0; i<len; ++i) {
        if(dupes.indexOf(ids[i])!=-1)
            continue;
        for(n=i+1; n<len; ++n) {
            if (ids[n]==ids[i]) {               
                dupes.push(ids[n]);
                break;
            }
        }
    }
    if (dupes.length!=0) { 
        for(i=0; i<dupes.length; ++i)
            console.warn('Multiple IDs #' + dupes[i]);
        alert(dupes.join('\n')); 
    }
}

var jHtml = $.html;
$.html = function () {
    checkDupeIDs();
    return jHtml.call(this, arguments);
}

checkDupeIDs();

})
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:59:18.577

开箱即用，Chrome 不能很好地支持 Greasemonkey 脚本（[Out-of-date table](https://github.com/scriptish/scriptish/wiki/Comparison-Table)，[Out-of-date page](http://www.chromium.org/developers/design-documents/user-scripts)）。例如，该`@require`指令不起作用。

要享受与 Firefox Greasemonkey 脚本几乎完全的兼容性，请安装[Tampermonkey Extension for Chrome](https://chrome.google.com/extensions/detail/dhdgffkkebhmkfjojejmpbldmpobfkfo)。您的脚本应该可以在 Tampermonkey 中运行。

此外，为避免 Firefox 出现问题，请勿`@grant`留空。使用`@grant  GM_addStyle`，如果没有别的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:28:54.640

检查两个最重要的事情：

1.  你已经在你的项目中包含了 jQuery
2.  您在使用 jQuery 的任何其他 js 文件之前包含了 jQuery 文件

# html - 导航栏，列表项之间的可见空间

> ID：15927114
> 
> 赞同：0
> 
> 时间：2013-04-10T13:22:58.073
> 
> 标签：html, css, list, navigation

我创建了一个传统的导航。在每个 li 之间，我放置了一个宽度为 1px 且高度略小于导航栏的 div。

基本上我打算这样看：

[http://subalee.com/nav.jpg](http://subalee.com/nav.jpg)

HTML：

```
<nav>
    <ul>
    <div></div>
    <li><a href="#">Domov</a></li>
    <div></div>
    <li><a href="#">Služby</a></li>
    <div></div>
    <li><a href="#">O nás</a></li>
    <div></div>
    <li><a href="#">Kontakt</a></li>
    <div></div>
    </ul>
</nav> 
```

CSS：

```
nav ul div {
    height:31px;
    width:1px;
    background-color:#34b9ff;
    display:inline-block;
}

nav ul li {
    display:inline;
}

nav ul li a {
    display:inline-block;
    padding:10px; 
```

当我将 div 更改为 display:inline; 文本工作正常，但那些可见的空间不知何故消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:33:14.737

在这些情况下的主要问题是你不能在`li`' 之间有任何空格，因为这会显示出来。

跟随 jsFiddle 准确显示您的代码，删除了空格会导致我认为您想要的结果。

[http://jsfiddle.net/jPF2p/](http://jsfiddle.net/jPF2p/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:28:20.350

我不认为你可以在 UL 中有一个 DIV。我敢肯定，通过添加适当的样式，您可以仅使用 LI 获得相同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:28:23.540

问题 1：您不允许将任何其他内容放入`ul`except`li`中。我会考虑另一种方法来跳过语法上无用的样式-div：

[JS-小提琴示例](http://jsfiddle.net/2uHXJ/3/)

```
nav ul li {
    font-size: 16px;
    display:inline;
    padding: 2px 0px;
    border-right: 1px solid blue;
} 
```

您可以通过设置`font-size`为 0 并在`li`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T13:28:30.850

如果您不希望在 html 中声明元素的方式发生任何变化，请使用

```
border-left:1px solid #34b9ff; 
```

而不是`background-color:` 和使用`display:inline;`

完整的 CSS 看起来像

```
nav ul div {
    height:31px;
    width:1px;
    border-left:1px solid #34b9ff;
    display:inline;
} 
```

[这是小提琴](http://jsfiddle.net/yPSUn/)

# php - 获取给定日期之前一周的开始和结束日期

> ID：15927116
> 
> 赞同：0
> 
> 时间：2013-04-10T13:23:03.080
> 
> 标签：php, date

我正在从 jquery datepicker 中选择一个日期，并且我想选择该日期之前一周的开始和结束日期。- 例如选择 2013 年 4 月 10 日应返回 2013 年 3 月 31 日和 2013 年 4 月 6 日。星期日是一周的第一天，星期六是最后一天。

下面是我的代码。

```
$weekday = $d->format('w');
$diff = 7 + ($weekday == 0 ? 6 : $weekday - 0); //to make week start from monday till     sunday add 1 to weekday -

$start1 = $d->modify("-$diff day");
$start_date = $d->format('Y-m-d');  

$end1 =  $d->modify('+6 day');
$stop_date = $d->format('Y-m-d'); 
```

代码工作正常，至少大部分情况下。但是，当我选择任何一个星期天时，我会得到一个错误的非预期结果，即前一周的前一周。例如，如果我选择 2013 年 3 月 31 日 - 我应该得到 3 月 24 日和 3 月 30 日，但我得到的是 3 月 28 日和 3 月 24 日。

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:33:51.170

试试这个，它应该可以解决你的问题：

```
$input = 'April 10, 2013'; // come from jquery

$dt = new DateTime($input . ' -1week');

$monday = clone $dt->modify(('Sunday' == $dt->format('l')) ? 'Monday last week' : 'Monday this week');
$sunday = clone $dt->modify('Sunday this week');

printf("You've selected a date in the week from %s to %s\n",
    $monday->format('Y-m-d'),
    $sunday->format('Y-m-d')
); 
```

# jquery - 焦点输入上的移动 Safari jQuery select() 不起作用

> ID：15927118
> 
> 赞同：5
> 
> 时间：2013-04-10T13:23:07.003
> 
> 标签：jquery, ios, ipad, select, focus

此问题出现在移动 Safari 中的 iPad IOS6 上。

我不想在用户单击输入时自动选择输入中的文本。

我有一个适用于普通浏览器的解决方案，比如 Chrome：

```
 $(document).ready(function() {
        //Select text on focus for input
        $("input:text").focus(focustext);
    });
    function focustext() {
        var input = $(this);
        setTimeout(function() { 
            input.select();
        },100);
    } 
```

但这在 Safari Mobile 中不起作用。

我已经阅读了几个关于此的主题，例如： [Webkit [Chrome/Safari] javascript select on focus bug (when using tab between fields)](https://stackoverflow.com/questions/5227691/workaround-to-webkitchrome-safari-javascript-select-on-focus-bug-when-using-t) [Selecting text on focus using jQuery not working in iPhone iPad Browsers](https://stackoverflow.com/questions/9924506/selecting-text-on-focus-using-jquery-not-working-in-iphone-ipad-browsers)

我已经在一个简单的假人中测试了建议的解决方案，但我无法让它们中的任何一个在 iPad 上工作。 [http://kraner.se/customers/test.html](http://kraner.se/customers/test.html)

我想为此获得一个可行的解决方案。任何人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-18T11:45:17.493

我将javascript更改为此（更改了文本选择的完成方式以及如何获取输入变量）：

```
 $(document).ready(function() {
        //Select text on focus for input
        $("input:text").focus(focustext);
    });
    function focustext() {
        var input = this;
        setTimeout(function () {
            input.selectionStart = 0;
            input.selectionEnd = input.val().length;
        },100);
    } 
```

现在它按预期工作。type=number 的输入似乎不起作用。

我已经在 iOS6 和 iOS7 上对此进行了测试，它也适用于 Windows 7 上的最新 Chrome 和 IE。不过，兼容模式下的 IE 不起作用。

# javascript - 如何使用 async.js 映射数组？

> ID：15927119
> 
> 赞同：0
> 
> 时间：2013-04-10T13:23:10.603
> 
> 标签：javascript, arrays, async.js

我想遍历一个对象列表并获取一个数组作为通过条件的项目的结果。像这样的东西：

```
var list = [{foo:"bar",id:0},{foo:"baz",id:1},{foo:"bar",id:2}];
  async.map(list, function(item, cb) {
    if (item.foo === "bar")
      cb(null, item.id);
    else
      cb(); // do nothing
  }, function(err, ids) {
    console.log(ids);
  }); 
```

如果条件未通过，我不想要任何错误回调。只有一个具有元素 ID 的数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:46:43.507

你不想要地图，你想要[过滤器](https://github.com/caolan/async#filter)：

```
var list = [{foo:"bar",id:0},{foo:"baz",id:1},{foo:"bar",id:2}];
  async.filter(list, function(item, cb) {
    if (item.foo === "bar")
      cb(true);  // include
    else
      cb(false); // do not include
  }, function(err, items) {
    console.log(items);
  }); 
```

但是，这会为您提供未更改（但已过滤）的项目，如果您还想映射它们（从完整项目切换到仅 ID），您将在最终回调中执行此操作。如果您真的想一步完成，我建议您使用 each 并手动构建数组，如果您需要维护顺序，请使用 eachSeries。

# openid - 是否有 WSO2 OpenID 中介？

> ID：15927120
> 
> 赞同：0
> 
> 时间：2013-04-10T13:23:10.590
> 
> 标签：openid, wso2, esb, mediator, authenticator

我从 WSO2 ESB 文档中知道有一个 OAuth 中介：

[http://docs.wso2.org/wiki/display/ESB450/OAuth+Mediator](http://docs.wso2.org/wiki/display/ESB450/OAuth+Mediator)

是否也可以在 ESB 中介序列中使用**OpenID中介？**我搜索了 WSO2 文档并用谷歌搜索，但只找到了这篇关于 Tomcat 的 OpenID**身份验证**器的博客文章，我认为它最好放在 WSO AppServer 中：

[http://blog.facilelogin.com/2008/11/openid-authenticator-for-tomcat.html](http://blog.facilelogin.com/2008/11/openid-authenticator-for-tomcat.html)

此博文中的下载链接已损坏，因此第二个问题是：

是否可以在 WSO2 AS 中使用 OpenID 身份验证器？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T06:06:55.277

第一个问题！

OpenID 是关于身份验证（即证明您是谁），OAuth 是关于授权（即授予对功能/数据/等的访问权限，而无需处理原始身份验证）。

OAuth 可用于外部合作伙伴站点，以允许访问受保护的数据，而无需重新对用户进行身份验证。

那么，您将 OpenID 作为中介者的用例是什么？

对于第二个问题！是的，有可能，Wso2 有 OpenID 作为 carbon 平台的验证器，请参考[这个](http://sureshatt.blogspot.com/2012/09/installing-identity-features-in-wso2-esb.html)！怎么安装！

如果您想知道如何在碳产品中使用 SSO 请参考[这里](http://sureshatt.blogspot.com/2012/11/how-to-enable-sso-for-wso2-server.html)

# java - Java 注释可以分布在多行上吗？

> ID：15927123
> 
> 赞同：3
> 
> 时间：2013-04-10T13:23:19.980
> 
> 标签：java, annotations

我使用 GWT I18N，它依赖于带有参数的消息的注释。
例子：

```
@DefaultMessage("Here is a message <br/> with a param:{0}")
String messageToLocalize(String param); 
```

如果没有本地化翻译，将使用默认消息。
我有一些很长的字符串要处理，我想输入几行代码以提高代码的可读性（我不谈论渲染消息的多行）。

我试过这个：

```
@DefaultMessage("Here is a long \
message <br/> with a \
param:{0}")
String messageToLocalize(String param); 
```

它失败（GWT PlugIn 4.2 和 SDK 2.5.1）并出现错误“无效的转义序列”。

我错过了什么 ？
它是对 Java 注释或 GWT 的约束吗？（恐怕是这样，但找不到任何东西）
有解决方法吗？
谢谢

* * *

编辑：给出第一个答案，必须改写问题：是否有可能，**我应该使用哪个字符来显示延续**（如果有）？
注释处理器显然需要告诉他一些事情。我尝试了“\”，因为它是在属性文件中使用的字符......
“+”也不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T13:27:56.740

Java 不支持 C 样式的字符串行表示，因此您不能在注释声明中使用这种多行样式，也不能在其他代码位置使用。

如果要多行单个字符串，则必须执行以下操作：

```
@DefaultMessage("Here is a long " +
        "message <br/> with a " +
        "param:{0}") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:38:48.533

正如 Andremoniy 所说，它必须使用 Java 风格进行剪切。

但除此之外，我建议你看看 i18nCreator。它允许您在属性文件中管理 i18n 并自动生成这些消息接口文件： [https ://developers.google.com/web-toolkit/doc/latest/RefCommandLineTools#i18nCreator](https://developers.google.com/web-toolkit/doc/latest/RefCommandLineTools#i18nCreator)

（还有一个maven插件：http: [//mojo.codehaus.org/gwt-maven-plugin/user-guide/i18n.html](http://mojo.codehaus.org/gwt-maven-plugin/user-guide/i18n.html)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:29:50.010

尝试在编译时完成的字符串连接，所以：

```
@DefaultMessage("Here is a long"+
"message <br/> with a " +
"param:{0}"") 
```

# magento - 设置可下载产品链接的到期时间

> ID：15927129
> 
> 赞同：1
> 
> 时间：2013-04-10T13:23:34.997
> 
> 标签：magento, magento-1.7

在 magento 管理面板中，我可以限制可下载产品的下载次数。

但我想设置可下载产品链接的到期时间。
以及购买产品后哪个用户在邮件中收到？

# facebook - 根据内容调整 Facebook 选项卡的大小

> ID：15927130
> 
> 赞同：0
> 
> 时间：2013-04-10T13:23:36.840
> 
> 标签：facebook

我在 head 标签之前使用此代码来设置选项卡上画布的大小：

```
<script type="text/javascript">
window.fbAsyncInit = function() {
FB.Canvas.setSize( {height: 1500} );
}
// Do things that will sometimes call sizeChangeCallback()
function sizeChangeCallback() {
FB.Canvas.setSize( {height: 1500} );
}
</script> 
```

然后在结束正文标签之前

```
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>
FB.init({
appId : '<<app id here>>', 
status : true, // check login status
cookie : true, // enable cookies to allow the server to access the session
xfbml : true // parse XFBML
});
</script> 
```

这工作得很好，但在不同的浏览器中让它恰到好处很麻烦。在这里找到了另外很多代码，如下所示：

```
<script type="text/javascript">
fb_root = document.createElement( 'div' );
fb_root.id = 'fb-root';
try
{
window.document.childNodes[0].appendChild( fb_root );
}
catch( error )
{
window.document.body.appendChild( fb_root );
}

window.fbAsyncInit = function() {
FB.init({
appId  : '561492603881225', //your app ID
status : true, // check login status
cookie : true // enable cookies to allow the server to access the session
});

//FB.Canvas.setSize({ width: 520, height: 1400 });

function getDocHeight() {
    var D = document;
    return Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
}

var mySetSize = function() {
    var height = getDocHeight();
    FB.Canvas.setSize({ width: 520, height: height });
    setTimeout( mySetSize, 200 );
};
setTimeout( mySetSize, 200 );
};

(function() {
var e = document.createElement('script'); e.async = true;
e.src = document.location.protocol +
  '//connect.facebook.net/en_US/all.js';
document.getElementById('fb-root').appendChild(e);
}());

var head = document.getElementsByTagName('head')[0],
style = document.createElement('style'),
rules = document.createTextNode('body { position: relative; max-width:      520px!important;width: 520px!important; overflow: hidden!important; margin: 0px!important;   }');

style.type = 'text/css';
if(style.styleSheet)
style.styleSheet.cssText = rules.nodeValue;
else style.appendChild(rules);
head.appendChild(style);

</script> 
```

现在，这在第一个标签[https://www.facebook.com/PaycoServices/app_547127248642465](https://www.facebook.com/PaycoServices/app_547127248642465)上无缝工作，但是在另一个像这样的标签 https://www.facebook.com/PaycoServices/app_561492603881225 上使用它会在[底部](https://www.facebook.com/PaycoServices/app_561492603881225)留下一个白色间隙，知道为什么吗？

# vb.net - 如何在 VB.Net 控制台应用程序中捕获 Soap Web 服务输出

> ID：15927137
> 
> 赞同：0
> 
> 时间：2013-04-10T13:23:53.610
> 
> 标签：vb.net, soap, service, web

我有一个包含 3 个 Web 服务（不需要输入参数）的 Web 服务项目，但我需要安排每晚调用一次。为了实现这一点，我做了一些谷歌搜索并创建了一个控制台应用程序来调用 Web 服务，我现在应该能够使用 Windows 任务计划程序进行计划。我在编写控制台应用程序方面完全是新手，并且对 VB.NET 只有一点点经验，但是通过输入对 Web 服务的 Web 引用，然后应用以下简单代码，我在控制台应用程序中实现了我需要的功能：

```
Sub Main()

Dim wscall As New EmployeeEmailWS

wscall.UpdateAbsenceTables()
wscall.GetThreePeriodsInAYear()
wscall.GetSixDaysInAYear()

End Sub 
```

这只是触发三个 Web 服务成功运行。

然而，到目前为止，我真的很想以某种方式读取 Soap Web 服务响应，以便我可以将它作为每个结果的日志写入数据库。

响应消息很简单（来自 SoapUI），但我只是不知道如何获取它：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
<UpdateAbsenceTablesResponse xmlns="http://www.ernspnamespace7.co.uk/EmployeeWS">
<UpdateAbsenceTablesResult>
<ResponseCode>00001</ResponseCode>
<ResponseDescription>Absence Tables Successfully Updated</ResponseDescription>
</UpdateAbsenceTablesResult>
</UpdateAbsenceTablesResponse>
</soap:Body>
</soap:Envelope> 
```

任何人都可以请我指出正确的方向，以了解如何在我的控制台应用程序中获得此响应。特别是如果我能以某种方式获得 ResponseCode 和 ResponseDescription 的值并将它们转换为字符串，那么我将回到熟悉的领域来了解我的基本知识。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:40:18.667

没关系。我突然想到，我可以在 Web 服务的末尾添加一些代码，以便在每次调用它们时将它们的输出写入数据库表。这完全避免了使用 XML 的麻烦。

# bash - 从 IPython 执行 Bash 命令

> ID：15927142
> 
> 赞同：25
> 
> 时间：2013-04-10T13:24:05.080
> 
> 标签：bash, ipython

我想在使用`!`运算符从 IPython 执行 bash 命令时获取我的 bash 环境，从而允许我访问我定义的 bash 函数：

```
In[2]: !<my_fancy_bash_function> <function_argument> 
```

目前 IPython 正在采购`sh`而不是`bash`：

```
In[3]: !declare -F
sh: 1: declare: not found 
```

如何`bash`从 IPython 获取和设置我的环境设置？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-07-02T22:21:24.850

IPython 的创建者 Fernando Perez[建议](https://twitter.com/fperez_org/status/352181845980479488)：

```
In [1]: %%bash
. ~/.bashrc
<my_fancy_bash_function> <function_argument> 
```

这适用于当前的稳定版本（0.13.2）。他承认这有点笨拙，并欢迎[拉取请求](https://github.com/ipython/ipython)。. .

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-10T13:55:42.267

如果`!`实现[`IPython.utils._process_posix.system`](https://github.com/ipython/ipython/blob/master/IPython/utils/_process_posix.py)在后台使用，那么它将使用`which sh`返回的任何内容作为处理 shell。这可能是 Bourne shell 的真正实现——它可能是在许多 Linux 上的某种兼容模式下的 Bash。在我的 MacBook Pro 上，它看起来像是一个原始的 Bash shell：

```
In [12]: !declare -F

In [13]: !echo $BASH
/bin/sh

In [14]: !echo $BASH_VERSION
3.2.48(1)-release

In [15]: import os

In [16]: os.environ['SHELL']
Out[16]: '/bin/zsh' 
```

我希望它会使用`$SHELL`环境变量，但今天似乎没有。您可能可以分支 github 存储库，修改`ProcessHandler.sh`属性实现以窥视`os.environ['SHELL']`并使用它，如果它被设置而不是调用`pexpect.which('sh')`. 然后发出拉取请求。

# objective-c - 设置 NSAttributed String 属性覆盖子字符串属性

> ID：15927143
> 
> 赞同：3
> 
> 时间：2013-04-10T13:24:06.910
> 
> 标签：objective-c, nsattributedstring

我创建了一个可变字符串，它看起来像 @" **testMeIn:greenColor:Different:greencolor:Colors** "

```
NSMutableAttributedString *mutableText = [[NSMutableAttributedString alloc] initWithAttributedString:myString];

UIColor *foregroundColor = [UIColor blackColor];
NSString *key = NSForegroundColorAttributeName;

[mutableText addAttribute:key value:foregroundColor range:NSMakeRange(0, myString.length)]; 
```

当我添加属性 foregroundColor 时，子字符串中现有的绿色被指定的黑色覆盖。虽然我可以更改代码以设置子字符串的绿色，但我想知道是否有任何其他方法可以将样式应用于没有样式而不覆盖现有样式的字符串部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T20:30:04.870

您可以枚举字符串中的每个属性跨度，并且仅在尚未设置属性时更改属性

```
 NSMutableAttributedString* aString = 
 [[NSMutableAttributedString alloc] initWithString:@"testMeIn DIFFERENT Colors"];

 [aString setAttributes:@{NSForegroundColorAttributeName:[UIColor greenColor]} 
                  range:(NSRange){9,9}];

 [aString enumerateAttributesInRange:(NSRange){0,aString.length}
                             options:nil
                          usingBlock:
     ^(NSDictionary* attrs, NSRange range, BOOL *stop) {

          //unspecific: don't change text color if ANY attributes are set
         if ([[attrs allKeys] count]==0)
             [aString addAttribute:NSForegroundColorAttributeName 
                             value:[UIColor redColor] 
                             range:range];

         //specific: don't change text color if text color attribute is already set
         if (![[attrs allKeys] containsObject:NSForegroundColorAttributeName])
             [aString addAttribute:NSForegroundColorAttributeName 
                             value:[UIColor redColor] 
                             range:range];
     }]; 
```

![在此处输入图像描述](https://i.stack.imgur.com/pF63J.png)

# c# - 将方法添加到内置类

> ID：15927144
> 
> 赞同：2
> 
> 时间：2013-04-10T13:24:12.837
> 
> 标签：c#, c#-4.0

我需要向现有类型添加一个额外的方法。

例如，我需要向 XmlDocument 类型添加一个附加方法“Transfer”，例如`doc.AppendChild()`：

![在此处输入图像描述](https://i.stack.imgur.com/ZK1jo.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T13:28:33.247

您不能将方法添加到现有类型（至少在不重写程序集的 IL 的情况下不能），但您可以提供一个[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)，该方法至少看起来像该类的方法。

# ruby-on-rails - 点击统计rails中的链接文章

> ID：15927149
> 
> 赞同：1
> 
> 时间：2013-04-10T13:24:24.593
> 
> 标签：ruby-on-rails, ruby, count, click

我有观点

```
 <% @r.each do |g|  %>
   <%= link_to g.title %>
 <% end %> 
```

当我点击链接时，我不会显示有多少人点击了这个链接。

像这样：

```
 <%= link_to g.title %> Click:<%= countclick %> 
```

标题点击：45

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:15:18.723

文章应该有 countclicks:integer 数据库列。

比在文章显示方法中（我认为您使用此方法显示文章）：

```
def show
@article = Article.find(params[:id])
count=@article.countclicks+1
@article.update_attributes(:countclicks=> count)
#other code
end 
```

而不是在索引视图中：

```
<% @articles.each do |article| %>
<%= link_to "#{article.name}", show_article_path(article)%>
<%=article.countclick %>
<% end %> 
```

或者，您可以通过模型回调来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:33:43.627

如果你想这样使用`link_to`，你必须给它一个块：

```
<% link_to g.title do %>
  Click <%= countclick %>
<% end %> 
```

# multithreading - 在春季批处理作业中使用多线程步骤

> ID：15927150
> 
> 赞同：2
> 
> 时间：2013-04-10T13:24:26.403
> 
> 标签：multithreading, file-io, spring-batch

我有一个春季批处理作业，它接收平面文件，处理记录并将输出写入另一个平面文件。我分别使用`FlatFileItemReader`和`FlatFileItemWriter`作为读者和作家。但是，当我尝试实现多线程步骤时，我的工作无法正常工作。我在日志文件中收到以下警告

```
WARN  ChunkMonitor:109 - No ItemReader set (must be concurrent step), so ignoring offset data.
WARN  ChunkMonitor:141 - ItemStream was opened in a different thread.  Restart data could be compromised. 
```

你能帮我实现多线程步骤吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:12:41.313

这是因为 FlatFileItemReader 正如文档所说的那样不是线程安全的：

```
/**
 * Abstract superclass for {@link ItemReader}s that supports restart by storing
 * item count in the {@link ExecutionContext} (therefore requires item ordering
 * to be preserved between runs).
 * 
 * Subclasses are inherently *not* thread-safe.
 * 
 * @author Robert Kasanicky
 */ 
```

要实现多线程阅读器，您必须编写一个自定义阅读器，以同步从 ItemStream 接口打开和更新的调用。否则，您的工作将无法安全重新启动。

希望能帮助到你

问候

# vb.net - 当文本框为空时，将空白文本框计为 0 值

> ID：15927155
> 
> 赞同：1
> 
> 时间：2013-04-10T13:24:31.173
> 
> 标签：vb.net

我已经编写了以下代码：

```
Dim i As Integer
Dim pos As Integer = 0
Dim neg As Integer = 0
Dim zer As Integer = 0
Dim TextBoxes() As String = {Val(TextBox1.Text), Val(TextBox2.Text),
                              Val(TextBox3.Text), Val(TextBox4.Text),
                              Val(TextBox5.Text), Val(TextBox6.Text),
                              Val(TextBox7.Text), Val(TextBox8.Text),
                              Val(TextBox9.Text), Val(TextBox10.Text)}
For i = 0 To 9
    If TextBoxes(i) > 0 Then
        pos += 1
    End If
    If TextBoxes(i) < 0 Then
        neg += 1
    End If
    If TextBoxes(i) = 0 Then
        zer += 1
    End If
Next i
Label4.Text = (pos)
Label5.Text = (neg)
Label6.Text = (zer) 
```

当程序执行并将一些值放入文本框中时，输出如下[所示](https://i.stack.imgur.com/Hfp4L.jpg)。第一个文本框包含`1`正数，另一个文本框包含`-1`负数。它运作良好。

问题出现在这里：程序将空框计数为`0`并显示`8`为零的总数。所有其他 8 个文本框都留空。如何解决此问题，使其不将空文本框计为`0`.

作为参考，这是我之前已经解决的相关问题：[Finding String of Substring in VB without using library function](https://stackoverflow.com/questions/15908084/finding-string-of-substring-in-vb-without-using-library-function)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:33:21.053

问题是您正在调用该`Val`函数以获取每个文本框中的值。 如果给定文本为空或非数字，则`Val`返回。`0`如果要检查，您应该将原始字符串存储在数组中，然后检查循环中的值，如下所示：

```
Dim i As Integer
Dim pos As Integer = 0
Dim neg As Integer = 0
Dim zer As Integer = 0
Dim TextBoxes() As String = {TextBox1.Text, TextBox2.Text,
                              TextBox3.Text, TextBox4.Text,
                              TextBox5.Text, TextBox6.Text,
                              TextBox7.Text, TextBox8.Text,
                              TextBox9.Text, TextBox10.Text}
For i = 0 To 9
    If TextBoxes(i) <> String.Empty Then
        If Val(TextBoxes(i)) > 0 Then
            pos += 1
        End If
        If Val(TextBoxes(i)) < 0 Then
            neg += 1
        End If
        If Val(TextBoxes(i)) = 0 Then
            zer += 1
        End If
    End If
Next i
Label4.Text = pos.ToString()
Label5.Text = neg.ToString()
Label6.Text = zer.ToString() 
```

但是，该`Val`功能主要是为了向后兼容 VB6 提供的。它会起作用，但我建议`Integer.TryParse`改用它。请注意，我还添加`ToString`了最后三行。正如其他人所提到的，您应该转向`Option Strict On`.

# c# - ajax 调用持续运行

> ID：15927158
> 
> 赞同：2
> 
> 时间：2013-04-10T13:24:42.647
> 
> 标签：c#, jquery, ajax, asp.net-mvc

我正在使用 ajax 来检查我的 sql 数据库中是否存储了新的警报。我已将其设置为每 30 秒运行一次，但它会继续调用每秒检查数据库的函数。这是我的代码。

这是视图中的代码。“_Tasks”是我的部分视图，它将是要更新的视图。我没有为成功返回做任何事情，因为它永远不会到达该代码。

```
 @Html.Action("_Tasks")
           <script type="text/javascript">
                (function poll() {

                    $.ajax({                       
                        type: 'GET',
                        cache: false,
                        url: '@Url.Action("TasksRefresh")',
                        dataType: "json", 
                        complete: poll, 
                        timeout: 30000,
                        success: function (data) {
                            if (data.success == true)
                                alert("Hello");

                        } 
                    });
                })();
        </script> 
```

这是在控制器中

```
public JsonResult TasksRefresh()
        {
            var alerts = getAlerts();
            var cache = HttpRuntime.Cache["Tasks"];
            if ( cache == alerts)
            {
                return Json(new
                                {
                                    success = false,
                                });
            }
            else
            {
                return Json(new
                {
                    success = true,
                   // View = this.Re
                });
            }

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:29:46.157

试试这个：

```
(function poll() {
  $.ajax({                       
    type: 'GET',
    cache: false,
    url: '@Url.Action("TasksRefresh")',
    dataType: "json", 
    complete: function () { setTimeout(poll, 30000); }, // Changed, call poll again when 30s has pasted
    timeout: 30000, // This just says it fails if the request takes more than 30s
    success: function (data) {
      if (data.success == true)
        alert("Hello");

    } 
  });
})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:29:38.763

超时不是延迟。超时是在考虑请求失败之前应该等待多长时间。通过设置`complete`为`poll`，您是在告诉它立即拨打另一个电话。您需要延迟您的`complete`功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T13:31:44.463

我能猜到的是，您在完成 ajax 调用后再次执行 poll 函数。完成该 ajax 调用可能只需要一秒钟。
您可以在 javascript 代码中使用计时器。尝试使用`settimeout`or `setInterval`。并在该计时器中进行 ajax 调用。看看有没有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T13:34:06.287

`timeout: 30000` 只是为了确保您的 ajax 调用将等待响应的最长时间。

一旦 ajax 调用完成，您就会执行 poll 函数，这就是为什么调用如此之快的原因。

# javascript - 将 Button 放置在具有 position:relative 的元素的右上角

> ID：15927160
> 
> 赞同：0
> 
> 时间：2013-04-10T13:24:44.797
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我写了这个脚本：

```
var HTML_BT = '<a class="helper" href="#"><i class="icon-wrench"></i></a>';

// Append button
$("my_selector").live('mouseenter', function(){
    var 
        bt = $(this).find('a.helper'),
        pos = $(this).position();

    // Check if the button exists and creates it
    if (bt.length==0){
        bt = $(HTML_BT);
        bt.css({
            position:'absolute',

            // Calculates coordinates
            top:pos.top + 15 + 'px', 
            left:pos.left + $(this).width() - 15 + 'px'

            // .. Some other css like border, bg, color and so on.
        });
        $(this).append(bt);
    }

    // Show the button
    bt.show();

}).live('mouseleave', function(){
    var 
        bt = $(this).find('a.helper');

    // Show the button if exists
    if (bt.length!=0){
        bt.hide();
    }
}); 
```

当鼠标光标移到特定项目上时，脚本会在右上角/右上角显示或附加链接。

它工作正常，但我在计算放置在容器内的元素的顶部和右侧坐标时遇到了一些麻烦，这些元素已将 css 位置指定为相对，因为链接坐标（正确地）计算为相对于他的容器。

```
.carousel-inner{
    position:relative;
} 
```

在这里我做了一个工作示例：http: [//jsfiddle.net/ucfKm/](http://jsfiddle.net/ucfKm/)

有人知道如何测试我是否必须使用绝对/相对坐标或如何获得右左位置？

非常感谢，戴维德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:32:08.833

不要计算左侧位置以将其放在右侧和顶部位置，只需记住相对定位元素内的绝对定位元素将在父级的左上角具有其 0,0，因此：

```
top:15 + 'px', 
right:15 + 'px', 
```

将您的 a 元素定位在距父级顶部 15 像素和距父级右侧 15 像素处。

小提琴更新：http: [//jsfiddle.net/ucfKm/5/](http://jsfiddle.net/ucfKm/5/)

编辑：另外，请注意，因为在这种情况下您不必计算位置，您可以将 css 直接分配给 css 文件上的类，并避免不必要的 javascript 逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:37:07.280

`position: relative;`不相对于父元素定位元素。它相对于该元素的原始位置定位元素。

如果您希望元素位于距父级顶部和右侧 15px 的位置（只要父级已将`position:`其自身设置为 、 或 的值`relative`）`absolute`，请`fixed`使用：

```
.carousel-inner{
    position: absolute;
    top: 15px;
    right: 15px;
} 
```

如果您希望元素位于距离整个页面的顶部和右侧 15px 的位置，请使用：

```
.carousel-inner{
    position: fixed;
    top: 15px;
    right: 15px;
} 
```

无论哪种情况，您都不需要进行 javascript 位置计算。

# php - 如何在（基本）html类中使用数据库中的值来显示结果？

> ID：15927161
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:24:46.477
> 
> 标签：php, html

我正在准备一个教程网站，用户在其中进行测验，答案将存储在数据库中。当管理员输入用户名或 id 时，用户的标记必须从数据库中获取并显示在条形图中。以下代码是图表，“25”是变量，必须从 db 中获取。

```
<section id="wrapper">
<ul id="chart">
    <li title="25" class="orange">
        <span class="bar"></span>
        <span class="percent"></span>
    </li>
    </ul>
</section> 
```

这是我在我的 php.ini 中使用的条件。

```
if ($name==NULL)
    echo"Please enter a name";
else{
    $mark = mysql_query("SELECT mark FROM lms.login WHERE name='$name'");
    $mark_num_rows = mysql_num_rows($mark);

if($mark_num_rows==0)
    echo "Name does not exist!";
else{
    $mark=mysql_result($mark,0);
    echo"$name's mark is $mark";
    }
} 
```

这段代码的结果是“富兰克林的分数是 50”。我希望在该课程中使用此标记。像这样，我有很多必须显示的标记。请帮忙！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:15:33.533

如果您想要 title 属性中的值，请尝试以下操作...

```
<li title="<?php echo htmlentities($mark); ?>" class="orange"> 
```

您也值得阅读有关安全性的信息，例如 sql 注入和跨站点脚本 (xss)，以确保您的工作不会受到损害（请参阅 htmlentities 的使用）。

# javascript - p:command button ajax="false" (with p:fileUpload) 仅适用于 IE 中的第二次点击

> ID：15927164
> 
> 赞同：2
> 
> 时间：2013-04-10T13:24:57.130
> 
> 标签：javascript, file-upload, jsf-2, commandbutton

我正在使用简单模式的primefacas fileUpload（由于其他一些原因不使用高级模式）。我使用 style="display:none" 使 fileUpload “隐藏”，然后添加一个带有命令按钮的 inputText 来表示 fileUpload（因为通过这种方式我可以更轻松地进行设计）。

当用户单击 p:commandbutton(Browse) 并将所选文件路径更新为 inputText 时，我使用 javascript 调用 p:fileUpload。

当我提交表单时，它在 Firefox 和 chrome 中运行良好，但需要按两次才能在 IE 中运行。有谁知道如何解决它？

xhtml页面

```
<h:form enctype="multipart/form-data" id="formUpload">
  <p:messages globalOnly="true" />
  <div style="display:none">
    <p:fileUpload value="#{testingBean.file}" mode="simple" id="file"/>
  </div>
  <p:inputText id="txtFile" />
  <p:commandButton type="button" value="Browse" onclick="browseAndUpdate()" />

  <p:remoteCommand name="browseAndUpdate" update="@form" onstart="document.getElementById('formUpload:file').click()" />

  <p:commandButton value="Submit" ajax="false" action="#{testingBean.upload}"/>
</h:form>

<script>
  $("input[name='formUpload:file']").change(function() {
    $("input[name='formUpload：txtFile']").val($(this).val());
  });
</script> 
```

后备豆

```
private UploadedFile file;
public UploadedFile getFile() {  
    return file;  
}  
public void setFile(UploadedFile file) {  
    this.file = file;  
}

public void upload() {
  UploadedFile f = this.getFile();
  if (null == f) {
    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("null", " null"));
  } else {
    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("Succesful", f.getFileName() + " uploaded."));
  }
} 
```

编辑：
我指的是 BalusC 的 post [commandButton/commandLink/ajax action/listener 方法未调用或输入值未更新](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)，并认为我的问题是他的第 7 点。
浏览器文件后，我尝试使用 p:remoteCommand 更新表单，表单已更新，并且可以通过第一次单击提交上传按钮，但所选文件已消失变为空。
我不知道如何更新 fileUpload viewState..任何人都可以帮忙吗？

除此之外，我参考了另一个 BalusC 的答案[h:commandButton/h:commandLink 在第一次点击时不起作用，只在第二次点击时起作用](https://stackoverflow.com/questions/11408130/jsf-commandbutton-works-on-second-click)，但我不知道需要把那些 javascript 放在哪里，@BalusC 你能指导我一下吗？多谢..

# excel - 如何在matlab中使用循环从excel文件中读取数据

> ID：15927165
> 
> 赞同：0
> 
> 时间：2013-04-10T13:24:58.037
> 
> 标签：excel, matlab

我想使用 Matlab 浏览 Excel 工作表的所有单元格，但我的代码中断了

```
s1 = 'A2';
s2 = 'F2';
x2 = xlsread('text.xlsx',[s1, ':', s2])
for i=1:3
  s1 = s1+1;
  s2 = s2+1;
  x2 = xlsread('text.xlsx',[s1, ':', s2])
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:35:39.603

你想增加行的索引：

```
for i=2:5
  s1=['A',num2str(i)];
  s2=['F',num2str(i)];
  x2 = xlsread('text.xlsx',[s1, ':', s2])
end 
```

# spring-mvc - Spring MVC - 如何在请求映射中传递 HashMap

> ID：15927167
> 
> 赞同：0
> 
> 时间：2013-04-10T13:24:59.147
> 
> 标签：spring-mvc

我正在使用带有 RESTFullWebService 的 Spring MVC。

我的客户端程序中的代码片段

```
RestTemplate restTemplate = new RestTemplate();

String startProcessURL = "http://"+hostAddress+":"+portNumber+"/jBPMSpring/process/startProcess/"+processId 
```

上面的代码工作正常，当我使用 RequestMapping.GET 方法时。

从我的客户端程序中，我需要在请求映射 (POST) 中传递 HashMap。

有什么变化，我需要做的是传递HashMap。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:12:25.463

有两个选项， postForLocation 或[postForObject](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html#postForLocation%28java.lang.String,%20java.lang.Object,%20java.lang.Object...%29)。

初始化后，您可以将哈希图包装在一个类中：

```
String result = rest.postForObject("http://whatever.com/whenever/", yourClass, String.class,); 
```

# validation - 在没有数据库的情况下验证 PostgreSQL 用户和密码

> ID：15927168
> 
> 赞同：3
> 
> 时间：2013-04-10T13:24:59.727
> 
> 标签：validation, postgresql, authentication, passwords

在不存在数据库的情况下，如何验证 postgresql 用户和密码是否有效？

我正在创建一个自动安装，它将创建一个数据库并运行 sql 脚本来创建表。安装需要在运行脚本之前验证用户和密码。自动安装调用 Windows 批处理文件。首先我设置密码，设置`PGPASSWORD=mypassword`。

设置密码后，什么命令可以验证用户和密码并返回错误代码或消息？

其他数据库程序（如 IBM 和 db2）有一个附加命令，允许用户附加到服务器或实例，而无需指定 db 名称。我找不到 PostgreSQL 的等价物。

如何在不指定数据库名称的情况下在命令行上登录 PostgreSQL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:35:05.600

**使用系统表 pg_roles**

Postgres 总是安装一个名为“postgres”的数据库。postgres 是您未连接到数据库时连接到的数据库。里面有一张桌子叫`pg_roles`。

使用这个命令：

```
psql -U pgadmin -d postgres -c 'select * from pg_roles' 
```

这会返回：

```
 rolname  | rolsuper | rolinherit | rolcreaterole | rolcreatedb | rolcatupdate | rolcanlogin | rolreplication | rolconnlimit | rolpassword | rolvaliduntil | rolconfig |  oid
----------+----------+------------+---------------+-------------+--------------+-------------+----------------+--------------+-------------+---------------+-----------+-------
 postgres | t        | t          | t             | t           | t            | t           | t              |           -1 | ********    |               |           |    10
 pgadmin  | t        | t          | t             | t           | t            | t           | t              |           -1 | ********    |               |           | 16384 
```

(2 行)

请参阅此答案：[如何检查 postgres 用户是否存在？](https://stackoverflow.com/questions/8546759/how-to-check-if-a-postgres-user-exists)

**通过登录测试它**

只需尝试使用提供的用户名/密码登录并用 try/catch 包围它，如果您可以登录，则它是有效的，否则它是无效的。

**改变用户**

如果您更改不存在的用户，您可能会收到错误消息：[http ://www.postgresql.org/docs/8.0/static/sql-alteruser.html](http://www.postgresql.org/docs/8.0/static/sql-alteruser.html)

```
ALTER USER postgres WITH PASSWORD 'tmppassword'; 
```

**删除并重新添加用户**

如果您尝试删除并重新添加用户，您可能会收到错误消息。因此，如果它无效，那么当您尝试删除非用户时它会引发错误。 [http://www.postgresql.org/docs/8.0/static/sql-createuser.html](http://www.postgresql.org/docs/8.0/static/sql-createuser.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T21:12:35.840

这是从命令行检查用户名/密码组合是否有效的便捷方法。这是从 puppetlabs-postgresql 模块中提取的：

```
su - username
env PGPASSWORD=somepass psql -h localhost -c 'select 1'
echo $? 
```

...其中“somepass”是被测试的密码，“用户名”是被测试的帐户（通常是 postgres 用户本身）。

如果 $? 为 0，用户/密码组合有效。如果 $? 为1，密码错误或用户不存在。无论哪种方式，都有问题。

这就是 Linux/bash 的方式。Windows 方式大致如下：

```
(run under the user account you're interested in)

set PGPASSWORD=somepass
psql -h localhost -c 'select 1'

if errorlevel 1 (
    echo Failure Reason Given is %errorlevel%
    exit /b %errorlevel%
) 
```

psql 上的 -h 强制建立基于 TCP 的本地连接，默认情况下（来自 pg_hba.conf）强制进行密码检查，无密码用户不可能绕过。

对于没有发布经过全面测试的 Windows 解决方案，我深表歉意，但上面的代码很有可能会直接运行，或者只需稍作修复即可。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-11-16T04:59:31.570

只需在终端中使用此命令：

```
psql postgres 
```

# php - 如何使用文档就绪功能从 php 填充组合框？

> ID：15927173
> 
> 赞同：0
> 
> 时间：2013-04-10T13:25:22.767
> 
> 标签：php, html, combobox, option, document-ready

这是 php 代码。在此代码中生成站名和 ids 和随机乘客。

```
<?php

include_once('RestUtils.php');
include_once('Passengers.php');

class Station implements JsonSerializable
{
private $id;
private $name;
private $passengers;

public function __construct($id, $name)
{
    $this->setId($id);
    $this->setName($name);
    $this->passengers = array();
}

//getters and setters
public function jsonSerialize()
{
    $data = array();
    $data['id'] = $this->id;
    $data['name'] = $this->name;
    $data['passengers'] = $this->passengers;
    return $data;
}
}

$stations = generateStations();

$data = RestUtils::processRequest();

switch($data->getMethod())
{
// Get item
case 'get':
    if(isset($data->getRequestVars()['stationId']))
    {
        // Prepare information for a specific station
        $station = getStationWithId($stations, $data->getRequestVars()    
['stationId']);
        if($station != null)
        {
            echo RestUtils::sendResponse(200, json_encode($station),    
'application/json');
        }
        else
        {
            echo RestUtils::sendResponse(404, 'Station not found!');
        }
    }
    else
    {
        // Prepare station list
        echo RestUtils::sendResponse(200, json_encode($stations),     
  'application/json');
    }

    break;
  }

 function generateStations()
 {
$stations = array();
for($i = 1; $i <= 5; $i++)
{ 
    $stations[] = new Station($i, 'İstasyon ' . $i);

    $passengerIds = array();
    foreach(generatePassengers() as $j)
    {
        $passengerIds[] = $j->getId();
    }
    $stations[$i - 1]->setPassengers($passengerIds);
}

return $stations;
 }

function generatePassengers()
{
$passengers = array();

$numberOfPassengers = rand(0, 20);

for($i = 0; $i < $numberOfPassengers; $i++)
{
    $from = rand(0, 5);

    $to = rand(0, 5);

    $arrivalTime = rand(0, 100);

    $waitingTime = rand(0, 100);

    $passengers[] = new Passenger($i, $from, $to, $arrivalTime, $waitingTime);
}

return $passengers;
 }

function getStationWithId($stations, $id)
 {
foreach ($stations as $i)
{
    if($i->getId() == $id)
    {
        return $i;
    }
}

return null;
 }

 ?> 
```

我想在使用文档准备功能加载页面时用生成的车站名称和车站 ID 填充组合框。之后，当用户选择一个带有名称和 ID 的车站时，他可以看到该车站有多少乘客以及乘客的 id 也应该从 Station.php 返回。通常我在 html 代码中有这个选择选项，它只是显示站在选择其中任何一个时没有做任何事情。

```
<select name="selectStation" id="selectStation" ></select> 
```

我尝试了以下方法；

```
 $(document).ready(function() {
      $.getJSON("Stations.php", function(jsonData){  

      $.each(jsonData, function(key,value) {   

      $('#selectStation')
     .append($("<option></option>")
     .attr("value",key)
     .text(value)); 

 });
}); 
```

});

我将组合框值作为对象 Object。为什么会发生这种情况？根据 Stations.php.Thanks，如何在页面加载时填充组合框。任何回复将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:25:10.777

好的，这里有一些示例代码可以满足我的要求。注意：您仍然需要添加一个事件侦听器来处理选择框的更改事件。我会把它留给你。

**文件 1**：*ajaxAfterLoad.html*

```
<!DOCTYPE html>
<html>
<head>
<script src="script/AjaxRequest.js"></script>
<script>
function byId(e){return document.getElementById(e);}
function newEl(tag){return document.createElement(tag);}
function newTxt(txt){return document.createTextNode(txt);}

window.addEventListener('load', mInit, false);

function mInit()
{
    AjaxRequest.get( { 'url':'makeJSON.php', 'onSuccess': onAjaxRequestDone } );
}

function makeSelectElementFromJSON(elemId, jsonText)
{
    var srcData = JSON.parse(jsonText);
    var result = newEl('select');
    result.setAttribute('id', elemId);
    var i, curOpt;
    for (i=0; i<srcData.length; i++)
    {
        curOpt = newEl('option');
        curOpt.setAttribute('value', srcData[i].value);
        curOpt.appendChild( newTxt( srcData[i].text ) );
        result.appendChild(curOpt);
    }
    return result;
}

function onAjaxRequestDone(req)
{
    var span = newEl('span');
    span.innerHTML = req.responseText;
    byId('rawOutput').innerHTML = req.responseText;

    byId('ajaxOutput').appendChild( makeSelectElementFromJSON('jsonSelectBox1', req.responseText) );
}
</script>
<style>
</style>
</head>
<body>
    <h2>Below will be loaded by ajax</h2>
    <div id='rawOutput'></div>
    <div id='ajaxOutput'></div>
</body>
</html> 
```

**文件 2**：*makeJSON.php*

```
<?php

    $resultList = null;

    for ($i=0; $i<10; $i++)
    {
        $curItem = null;
        $curItem->value = $i;
        $curItem->text = "Item " . ($i+1);
        $resultList[] = $curItem;
    }
    printf("%s", json_encode($resultList) );
?> 
```

**文件 3**：*AjaxRequest.js从*[http://ajaxtoolbox.com/request/source.php](http://ajaxtoolbox.com/request/source.php) 下载此文件

# android - TextViews Gravity 不能垂直工作

> ID：15927174
> 
> 赞同：0
> 
> 时间：2013-04-10T13:25:22.897
> 
> 标签：android, canvas, textview, gravity, drawingcache

当我将 TextView 的 DrawingCache 绘制到另一个 View 的 Canvas 时，TextView 的重力在垂直方向上没有影响。

这里的类绘制 TextViews 画布到自己的画布：

```
public class GravityDecorator extends View{
    private View view;
    private Paint paint= new Paint();

    public GravityDecorator(View view,Context context) {
        super(context);
        this.view = view;
        view.setDrawingCacheEnabled(true);
        view.layout(0, 0,600,500);
        this.layout(0, 0,600,500);
        invalidate();
    }

    @Override
    protected void onDraw(Canvas canvas) { 
        super.onDraw(canvas);
        view.buildDrawingCache();       
        canvas.drawBitmap(view.getDrawingCache(), 0, 0, paint);     
        view.destroyDrawingCache();
    }

} 
```

这是测试它的代码（onCreate）：

```
 ViewGroup root = (ViewGroup) findViewById(R.id.root); // is a linear_layout - width and height is match_parent
    TextView tv = new TextView(getApplicationContext());
    tv.setText("Hello World!");
    tv.setTextSize(40.0f);      
    tv.setLayoutParams(new LinearLayout.LayoutParams(300,200));     
    tv.setTextColor(Color.WHITE);
    tv.setBackgroundColor(Color.parseColor("#3131c5"));
    tv.setGravity(Gravity.CENTER);

    GravityDecorator gd = new GravityDecorator(tv, getApplicationContext());
    root.addView(gd); 
```

如您所见，TextViews 内容的 Gravity 仅在水平方向生效。

如果它是一个错误，是什么原因以及如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:42:57.970

```
root = (ViewGroup) findViewById(R.id.root); // is a linear_layout - width and height is match_parent
tv = new TextView(getApplicationContext());
tv.setText("Hello World!");
tv.setTextSize(40.0f);      
tv.setLayoutParams(new LinearLayout.LayoutParams(300,200));     
tv.setTextColor(Color.WHITE);
tv.setBackgroundColor(Color.parseColor("#3131c5"));
tv.setGravity(Gravity.CENTER);
tv.invalidate();
root.addView(tv);
GravityDecorator gd = new GravityDecorator(tv, getApplicationContext());
root.addView(gd); 
```

可能是因为`TextView`最初没有设置布局参数。尝试将视图添加到父级，然后获取`drawingCache`.

```
public class GravityDecorator extends View{
    private View view;
    private Paint paint= new Paint();

    public GravityDecorator(View view,Context context) {
        super(context);
        this.view = view;
        view.setDrawingCacheEnabled(true);
        view.layout(0, 0,600,500);
        this.layout(0, 0,600,500);
        invalidate();
    }

    @Override
    protected void onDraw(Canvas canvas) { 
        super.onDraw(canvas);
        view.buildDrawingCache();      

        Bitmap bmp = view.getDrawingCache();

        canvas.drawBitmap(bmp, 0, 0, paint);     
        view.destroyDrawingCache();
        if(root.indexOfChild(tv) != -1)
            root.removeView(tv);

    }

} 
```

# uiscrollview - 自动调整 UIScrollView 的“ContentSize”大小的最佳做法是什么？

> ID：15927175
> 
> 赞同：2
> 
> 时间：2013-04-10T13:25:30.847
> 
> 标签：uiscrollview, autoresize, objective-c-category, subviews, contentsize

我必须在 a 中显示一些视图，`UIScrollView`并且我希望它适合子视图。有什么方法可以帮助我吗？根据它的孩子调整自己的大小似乎并不难，`UIView`但我找不到任何方法来做这样的事情。在执行之前我不知道我所有子视图的宽度和高度以及我将拥有多少个子视图。

我的第一个想法是为`UIView`or创建一个类别`UIScrollView`，它将定义所有子视图高度和宽度的最大值，如下所示：

```
maxHeight = (subview.frame.origin.y + subview.frame.size.height) 
```

然后，当我拥有适合我所有子视图的宽度和高度时，我可以在我**的**`UIScrollView`. 我希望为此应该已经存在一种方法。

一个解法：

```
@implementation UIScrollView (autoResizeContent)

- (void) resizeContentFromSubviews{

    float maxWidth = 0;
    float maxHeigt = 0;

    float height, width;

    for (UIView* v in self.subviews) {
       height = (v.frame.size.height+v.frame.origin.y);
       if(height > maxHeigt ){
           maxHeigt = height;
       }
       width = (v.frame.size.width + v.frame.origin.x);
       if(width > maxWidth){
           maxWidth = width;
       }
    }

    [self setContentSize:CGSizeMake(maxWidth, maxHeigt)];
}
@end 
```

# php - CURL 返回空白页

> ID：15927177
> 
> 赞同：1
> 
> 时间：2013-04-10T13:25:34.507
> 
> 标签：php, curl

我已经编写了这段代码来从谷歌获取所有数据，但它返回空白。代码是

```
$page = "http://www.google.com";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $page);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$contents = curl_exec ($ch);
curl_close ($ch);
echo $contents; 
```

任何人都可以发现这段代码有什么问题吗？我检查了我的 curl 已启用的 php 信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:50:08.700

在我的情况下，谷歌 http 服务器的答案包含重定向到[http://www.google.ru/](http://www.google.ru/)：

```
HTTP/1.1 302 Found
Location: http://www.google.ru/ 
```

让 curl 跟随这个“位置：”标题：

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
```

# facebook-graph-api - 当某人更改他们在 facebook 中的共享设置以及他们的信息在图形 api 中显示时是否有延迟？

> ID：15927178
> 
> 赞同：0
> 
> 时间：2013-04-10T13:25:36.753
> 
> 标签：facebook-graph-api

我没有在图形 api 资源管理器中看到生日，但可以在 facebook Web UI 上看到它。

假设我已经请求并且用户已经接受了适当的权限，如果有人将他们的生日隐私设置为“只有我”，然后将其更改为“公开”，我应该等待多长时间才能显示该人的生日facebook-graph-api？

# cuda - CUDA 桌面版和笔记本版有什么区别？

> ID：15927181
> 
> 赞同：2
> 
> 时间：2013-04-10T13:25:43.480
> 
> 标签：cuda

我正在使用 CUDA 笔记本版本在笔记本上（目前）为 CUDA 开发。稍后我将要移动到桌面。我想了解这两个版本之间有什么区别？我在 Nvidia 网站上没有找到任何关于此的信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T13:43:58.040

不同之处在于捆绑的驱动程序 - 笔记本电脑使用的驱动程序与台式机驱动程序不同。CUDA 库应该是相同的。

# html - 如何在 html 中继续使用 datalist 元素时关闭自动完成功能

> ID：15927182
> 
> 赞同：42
> 
> 时间：2013-04-10T13:25:43.960
> 
> 标签：html, autocomplete, browser-history, html-datalist

我有一个使用 html5元素`input`显示列表的字段。`<datalist>`问题是`<datalist>`浏览器自动完成功能还会显示历史列表（这是以前键入的值的列表，不包含在 中`<datalist>`）。所以我只想摆脱`history-list`not `<datalist>`。

如果我使用该`autocomplete = "off"`功能，这也会阻止`<datalist>`.

简而言之，我只想要不是`<datalist>`历史的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-04-23T16:12:37.187

您是否可以使用`input`没有`id`or`name`属性的字段？没有它，浏览器实际上没有任何方法将历史记录与该元素相关联。

在我对 Firefox 的*真正快速*测试中，这似乎起到了作用：

```
<form>
  <!-- these will remember input -->
  With id: <input id="myInputId" list="myList" /><br />
  With name: <input name="myInputName" list="myList" /><br />

  <!-- these will NOT remember input -->
  No id, name, class: <input list="myList" /><br />
  With class: <input class="myInputClass" list="myList" />

  <datalist id="myList">
    <option value="Option 1"></option>
    <option value="Option 2"></option>
  </datalist>

  <br />

  <input type="submit" />
</form> 
```

在上面的代码中，`input`带有`id`or的 s`name`会记住过去的值，但`input`没有任何东西的 s 和只有 a 的输入`class`不会**记住**任何东西。

*不幸的是，如果您需要*使用or ，这确实会使使用`input`稍微困难一些。在这种情况下，我会尝试使用一个也是' ed的 'ed，然后使用一些 JavaScript 使其与不会记住过去值的同步。*`name``id``id``input``display: none``input`*

 ** * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-04-20T09:21:11.260

尝试使用 HTML 属性自动完成

```
<input name="q" type="text" autocomplete="off"/> 
```

源[关闭输入的自动完成](https://css-tricks.com/snippets/html/autocomplete-off/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-17T21:24:45.600

我使用这样的代码：

```
<input name="anrede" list="anrede" onmousedown="value = '';" />
<datalist id="anrede">
    <option value="Herr"></option>
    <option value="Frau"></option>
</datalist> 
```

**good** : 显示供选择的数据列表已完成

**bad**：输入字段为空，因此如果用户需要记住旧值，则未记录旧值

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-07-16T17:17:38.060

你可以使用自动完成=“新密码”。autocomplete = "off" 在我的情况下不起作用。

```
<input name="q" type="text" autocomplete="new-password"/> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-25T07:10:56.800

试试这个，我希望它有效。

```
<input id="datalisttestinput" list="stuff" autocomplete="off"></input>
<datalist id="stuff">
     <option id="1" value="Amy">
     <option id="2" value="Kristal">
     <option id="3" value="Collin">
     <option id="4" value="Carl">
</datalist> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-04-05T16:04:19.607

尝试这个：

```
<datalist id="datalist_id"> 
```

js：

```
dataList = $("#datalist_id")
dataList.empty() 
```

这将清除数据列表的历史记录。这在 chrome 上对我有用。然后，如果您想向列表中添加选项，请尝试：

```
dataList.append("<option>Some Option</option>") 
```

干杯！！！*

# r - 按列内的 ID 和 Day 计算平均值和 sd

> ID：15927193
> 
> 赞同：0
> 
> 时间：2013-04-10T13:26:30.047
> 
> 标签：r, identity-column

我是 R 新手，需要在一个新表中总结我的数据的均值和标准差：

原始数据如下所示：

```
ID    Day    pH
1      1      7
1      1      7.2
1      1      7.1
2      1      7.3
2      1      7.4
2      1      7.2
3      1      7
3      1      7.1
3      1      7.5
4      1      7.3
4      1      7.2
4      1      7.6
1      2      7
1      2      7.2
1      2      7.1
2      2      7.1
2      2      7.4
2      2      7.2
3      2      7.5
3      2      7.1
3      2      7.5
4      2      7.2
4      2      7.2
4      2      7.3
1      3      7.4
1      3      7.2
1      3      7.1
2      3      7.2
2      3      7.4
2      3      7.2
3      3      7.4
3      3      7.2
3      3      7.5
4      3      7.4
4      3      7.2
4      3      7.7 
```

我想要的表格应该是这样的：

```
ID    Day    pHmean   pHsd
1      1      7.1      0.10
2      1      7.3      0.10
3      1      7.2      0.26
4      1      7.4      0.21
1      2      7.1      0.10
2      2      7.2      0.15
3      2      7.4      0.23
4      2      7.2      0.06
1      3      7.2      0.15
2      3      7.3      0.12
3      3      7.4      0.15
4      3      7.4      0.25 
```

然后我想创建一个带有误差条的条形图，显示 y-achsis 上的 pH 值和 x-achsis 上的 ID，并以不同颜色的条形显示日期。

希望可以有人帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:56:18.623

发布为解决方案，因为有一些讨论是否可行（可能是 R 版本或其他东西）：

```
aggregate(pH~ID+Day, dat, function(x) round(c(mean=mean(x), sd=sd(x)), 2))

## > aggregate(pH~ID+Day, dat, function(x) round(c(mean=mean(x), sd=sd(x)), 2))
##    ID Day pH.mean pH.sd
## 1   1   1    7.10  0.10
## 2   2   1    7.30  0.10
## 3   3   1    7.20  0.26
## 4   4   1    7.37  0.21
## 5   1   2    7.10  0.10
## 6   2   2    7.23  0.15
## 7   3   2    7.37  0.23
## 8   4   2    7.23  0.06
## 9   1   3    7.23  0.15
## 10  2   3    7.27  0.12
## 11  3   3    7.37  0.15
## 12  4   3    7.43  0.25 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:47:11.180

我建议使用这样的`aggregate`功能......

```
pHmean <- aggregate( pH ~ Day + ID , data = dat , FUN = mean )[,3]

dat <- cbind( aggregate( pH ~ Day + ID , data = dat , FUN = sd ) , pHmean )
dat
   Day ID         pH   pHmean
1    1  1 0.10000000 7.100000
2    2  1 0.10000000 7.100000
3    3  1 0.15275252 7.233333
4    1  2 0.10000000 7.300000
5    2  2 0.15275252 7.233333
6    3  2 0.11547005 7.266667
7    1  3 0.26457513 7.200000
8    2  3 0.23094011 7.366667
9    3  3 0.15275252 7.366667
10   1  4 0.20816660 7.366667
11   2  4 0.05773503 7.233333
12   3  4         NA 7.400000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:11:21.160

感谢您的所有评论和回答，它非常有用！

我已经设法使用以下方法制作图表：

barplot(matrix(c(Rtest.dat$pH.mean),nr=3), 旁边=T, col=c("black","grey","white"), main="pH", names.arg =c("Green", "Yellow", "Blue", "Red"), ylab="pH") legend("topright", c("Day 1","Day 2","Day 3"), cex=0.6, bty="n", fill=c("黑色","灰色","白色"))

但我被卡住了，不知道如何添加错误栏？！？我在网上看，但无法弄清楚。希望你能帮我！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T13:56:14.063

对于您可以使用包 plyr 的值：

```
x
ID    Day    pH
1      1      7
1      1      7.2
1      1      7.1
2      1      7.3
2      1      7.4
2      1      7.2
3      1      7
3      1      7.1
3      1      7.5
4      1      7.3
4      1      7.2
4      1      7.6
1      2      7
1      2      7.2
1      2      7.1
2      2      7.1
2      2      7.4
2      2      7.2
3      2      7.5
3      2      7.1
3      2      7.5
4      2      7.2
4      2      7.2
4      2      7.3
1      3      7.4
1      3      7.2
1      3      7.1
2      3      7.2
2      3      7.4
2      3      7.2
3      3      7.4
3      3      7.2
3      3      7.5
4      3      7.4
4      3      7.2
4      3      7.7 
```

```
require(plyr)
d1 <- ddply(x, .(ID, Day), summarize, phMean=mean(pH), pHsd=sd(pH))
d2 <- reshape(d1, v.names=c("phMean", "pHsd"), idvar="ID",     timevar="Day",direction="wide")
rownames(d2) <- d2[,1]
d2 <- t(d2[,-1])

require(gplots)
barplot2(d2[(1:nrow(d2))%%2>0.5,], beside=T, plot.ci=T, 
ci.l=d2[(1:nrow(d2))%%2>0.5,]-d2[(1:nrow(d2))%%2<0.5,],
ci.u=d2[(1:nrow(d2))%%2>0.5,]+d2[(1:nrow(d2))%%2<0.5]) 
```

# c# - 将标题绑定到选定的组合框文本

> ID：15927203
> 
> 赞同：2
> 
> 时间：2013-04-10T13:26:54.007
> 
> 标签：c#, wpf, combobox, charts

如何将图表的标题绑定到 a 中选择的文本`ComboBox`？

这是我的代码：

`XAML`

```
<DVC:Chart.Axes>
    <DVC:LinearAxis Orientation="Y" Title="Ammount of calls" ShowGridLines="True" Interval="auto"/>
    <DVC:LinearAxis Orientation="X" Title="{Binding Path=combobox1}" ShowGridLines="True" Interval="1"/>
</DVC:Chart.Axes> 
```

如您所见，我试图将文本绑定`ComboBox1`到`x-axis`.

```
<ComboBox x:Name="combobox1" HorizontalAlignment="Left" Margin="16,90,0,0" VerticalAlignment="Top" Width="120" SelectionChanged="combobox1_SelectionChanged">
    <ComboBoxItem Content="Graph per Hour"/>
    <ComboBoxItem Content="Graph per Minute"/>
</ComboBox> 
```

上面是组合框。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:40:41.733

你可以试试这个：

```
Title="{Binding SelectedItem.Content, ElementName=combobox1}" 
```

# mysql - 由于 FK，Hibernate JPA 无法创建

> ID：15927205
> 
> 赞同：0
> 
> 时间：2013-04-10T13:27:03.673
> 
> 标签：mysql, hibernate, jpa, jpa-2.0, hibernate-mapping

当我尝试在我的应用程序中创建一个新类别时，我收到以下错误，它抱怨 FK 约束。但是，它抱怨的 FK 将类别描述映射到类别，因为两者都是同时创建的，我不确定为什么会出现问题。

我可以毫无问题地更新类别和类别描述。

错误

```
ERROR - Cannot add or update a child row: a foreign key constraint fails (`crcart3`.`categorydescription`, CONSTRAINT `FKC6C4CBFE6FD28044` FOREIGN KEY (`category_description_id`) REFERENCES `categorydescription` (`category_id`)) 
```

类别表

```
@Table(name = "Category")
public class Category {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "category_id")
    private int categoryId;

    @JoinTable(
            name = "ImageMapping",
            joinColumns = @JoinColumn(name = "category_id"),
            inverseJoinColumns = @JoinColumn(name = "image_id")
    )
    @OneToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    private Image categoryImageId;

    @JoinTable(
            name="CategoryDescription",
            joinColumns = @JoinColumn(name="category_id"),
            inverseJoinColumns = @JoinColumn(name="category_description_id")
    )
    @OneToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    private CategoryDescription categoryDescription;

    @JoinTable(
            name = "CategoryMapping",
            joinColumns = @JoinColumn(name = "category_id"),
            inverseJoinColumns = @JoinColumn(name = "parent_category_id")
    )
    @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    private Category parentCategory;

    @Column(name = "category_sort_order")
    private int sortOrder;

    @Column(name = "date_added")
    private Timestamp dateAdded;

    @Column(name = "last_modified")
    private Timestamp lastModified; 
```

类别描述表

```
@Table(name="CategoryDescription")
public class CategoryDescription {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "category_description_id")
    private int categoryDescriptionId;

    @Column(name="category_id")
    private int categoryId;

    @OneToOne
    @JoinColumn(name="language_id")
    private Language languageId;

    @Column(name="category_name")
    private String categoryName;

    @Column(name="category_text")
    private String categoryText; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:27:49.627

错误消息说：

```
(`crcart3`.`categorydescription`, 
 CONSTRAINT `FKC6C4CBFE6FD28044` FOREIGN KEY (`category_description_id`) 
 REFERENCES `categorydescription` (`category_id`)) 
```

这意味着在表中`categorydescription`，列是*同*一个表的列的`category_description_id`外键。`category_id`*`categorydescription`*

 *这对我来说不合适。`category_id`在此表中包含一列似乎也不正确。*

# mysql - MYSQL 3table 连接查询不起作用

> ID：15927206
> 
> 赞同：0
> 
> 时间：2013-04-10T13:27:04.847
> 
> 标签：mysql, phpmyadmin

我正在尝试执行一个简单的查询，其中三个表被连接以创建一个表。我一直在试图弄清楚为什么我没有得到任何结果。

这是我的查询：

```
"SELECT b.band_naam, p.pod_omschr"
+ " FROM bands b"
+ " JOIN bandsperfestival bf ON b.band_id = bf.band_id"
+ " JOIN podia p ON bf.pod_id = p.pod_id" 
```

我正在尝试在 Java 中执行此操作，因此引用了引号。

表格如下所示：

乐队

![乐队](https://i.stack.imgur.com/jbHBw.png)

Bandsperfestival（桥牌桌） ![Bandsperfestival（桥牌）](https://i.stack.imgur.com/qS6c4.png)

足底亚 ![足底亚](https://i.stack.imgur.com/8zSlv.png)

有人能发现我的错误吗？

这里有一些更多的代码要求：这是在 <% 和 %> 标记内

```
 //ResultSet aanmaken voor alle groepen van op het festival
        connectie.voerQueryUit("SELECT b.band_naam, p.pod_omschr"
            + " FROM bands b"
            + " JOIN bandsperfestival bf ON b.band_id = bf.band_id"
            + " JOIN podia p ON bf.pod_id = p.pod_id", lijstParams);
        ResultSet bands = connectie.haalResultSetOp(); 
```

与另一个查询相同的方法可以完美地像这样工作：

```
 //ResultSet aanmaken voor het gekozen festival
        connectie.voerQueryUit("SELECT f.fest_id, f.fest_naam, f.fest_locatie, f.fest_datum, f.fest_duur, f.fest_einddatum, f.fest_url"
                + " FROM festivals f"
                + " WHERE f.fest_naam = ?", lijstParams);
        ResultSet fest = connectie.haalResultSetOp();
        fest.first(); 
```

在我的 html 中，我这样做：

```
<ul>
    <% while (bands.next()) { %>
    <li><%= bands.getString("band_naam") %></li>
    <li>Podium: <%= bands.getString("pod_omschr") %></li>
    <% } %>
</ul> 
```

变量 connectie 是具有以下功能的类的实例：

```
public void voerQueryUit(String query, List<String> parameters)
{
    try
    {
        if(parameters.size() > 0)
        {
            //Reden preparedStatement: geen SQL-Injectie!
            prepStatement = connectie.prepareStatement(query);

            //Lijst met parameters uitlezen om de preparedStatement op te vullen
            for(int i=1; i<=parameters.size(); i++)
            {
               prepStatement.setString(i, parameters.get(i-1));
            }
            inhoudQuery = prepStatement.executeQuery();
        }
        else
        {
            statement = connectie.createStatement();
            inhoudQuery = statement.executeQuery(query);
        }
    }
    catch(Exception e)
    {}
}

public ResultSet haalResultSetOp()
{
    return inhoudQuery;
} 
```

我知道这很有效，因为它已被多次使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:35:24.677

没有问题`Query`。

我认为**错误**在于`Code.`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T13:35:24.973

这会起作用吗：

```
SELCT b.band_naam, p.pod_omschr
FROM  bands b, bandsperfestival bf, podia p
WHERE b.band_id = bf.band_id AND bf.pod_id = p.pod_id 
```

# iphone - iPhone以编程方式同时使用wifi和蓝牙？

> ID：15927208
> 
> 赞同：3
> 
> 时间：2013-04-10T13:27:05.703
> 
> 标签：iphone, bluetooth, streaming, wifi

我很感兴趣如果 iPhone/iPad 可以同时使用 wifi 和蓝牙进行视频流传输？我有一个通过 wifi 发送图片的相机应用程序，我正在考虑是否可以使用蓝牙同时镜像它。（从wifi获取图片，通过蓝牙重新发送）**wifi和蓝牙使用不同的天线**吗？还是一次一个，或者以某种形式共享同一个天线？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T23:50:14.170

Wifi 和蓝牙使用 2.4GHz ISM 频段中的重叠频率。一般来说，这意味着他们可以在空中发生冲突。智能手机使用单一的组合芯片，它同时支持蓝牙和 Wifi（可能还有 FM 收音机和 GPS）。这些芯片具有“共存”逻辑，基本上让每个模式将其活动信号发送给另一个模式，这样它们就可以避免相互干扰。例如，如果正在传输 BT 数据包，则 Wifi 数据包可能会延迟以等待 BT 完成。

这种共存是由硬件自动处理的，因此最终用户可能无法分辨出其中的区别，并且看起来 BT 和 Wifi 可以同时运行。但由于它们确实相互阻塞，因此如果您试图同时最大化 wifi 和 BT 连接，最大吞吐量将会有所下降。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-17T18:01:18.237

我尝试使用 iPhone 4 和 iOS 7.1.2 将 Netflix 音频流式传输到蓝牙扬声器，但没有成功。视频会播放一分钟，然后停止，而忙碌信号转来转去，这意味着缓冲区已被填满。运行时间与缓冲时间的比率大约是均匀的。仅流式传输音频和网上冲浪并不是什么大问题，但偶尔会听到点击声。流式传输 Netflix 与流式传输 Web 内容不同。wifi 扬声器和/或 AirPlay 是不进入 DIY 电子项目的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:38:51.243

我从来没有编程过同时使用这两种方法，但它们不应该相互冲突。我一直在通过车上的蓝牙打电话，同时使用 wifi 上网，所以我认为应该没问题。不是在开车的时候，那会很危险。

# macos - 本地主机别名不适用于 XAMPP

> ID：15927217
> 
> 赞同：0
> 
> 时间：2013-04-10T13:27:25.530
> 
> 标签：macos, apache, xampp, localhost, alias

我已经在 Mountain Lion 中安装了 XAMPP，并且正在尝试将 mysite.local 别名为 localhost/~user/mysite。

在 /etc/apache2/extra/httpd-vhosts.conf 我有：

```
<VirtualHost *:80>
    ServerAdmin webmaster@dummy-host2.example.com
    DocumentRoot "/Users/user/Sites/mysite"
    ServerName mysite.local
    ErrorLog "/private/var/log/apache2/dummy-host2.example.com-error_log"
    CustomLog "/private/var/log/apache2/dummy-host2.example.com-access_log" common
</VirtualHost> 
```

在 /etc/hosts 我有：

`127.0.0.1 localhost mysite.local`

当我访问[http://mysite.local](http://mysite.local)时，它只显示 XAMPP 起始页。

该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:40:05.673

这是您第一次这样做，那么首先确保它`httpd-vhosts.conf`包含在您的常规`httpd.conf`（或`apache.conf`）文件中。

通常这些都包含在`httpd.conf`文件中但被注释掉，只需删除注释即可。

还要确保在进行这些更改后重新启动了 apache。

# design-patterns - 有向实体的优化设计方法是什么？

> ID：15927219
> 
> 赞同：1
> 
> 时间：2013-04-10T13:27:28.360
> 
> 标签：design-patterns, game-physics

我的意思是我想在我的游戏中加入一些定向对象，比如激光束或面向某个地方的火箭。

您将如何存储这些对象以进行碰撞？（将它们视为圆形以使事情更容易）

我的假设是：

- 要么存储两个坐标向量

- 或者存储一个坐标向量和一个角度

每个都有其优点和缺点： - 存储更多数据意味着更多的内存负载 - 存储更少的数据意味着更多的计算负载

我只是不知道哪个会导致更优化的方式，哪个更普遍接受？

感谢您的反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:52:52.257

根据我的经验，两个坐标向量更好。

如果您查询并需要很多角度，您也可以存储角度。

同样根据我的经验，对于游戏来说，速度比内存更重要

> 过早优化是万恶之 [源 http://c2.com/cgi/wiki?PrematureOptimization](http://c2.com/cgi/wiki?PrematureOptimization)

# php - 内连接 & PHP

> ID：15927222
> 
> 赞同：0
> 
> 时间：2013-04-10T13:27:36.823
> 
> 标签：php, sql, inner-join

所以这是我第一次正确处理 INNER JOIN 语句，我一直在尝试它，不用说它进展不顺利。以下是我的页面代码：

```
<?php require_once('Connections/reps.php'); ?>
<?php

if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

mysql_select_db($database_reps, $reps);
$query_orders = "SELECT * FROM orders";
$orders = mysql_query($query_orders, $reps) or die(mysql_error());
$row_orders = mysql_fetch_assoc($orders);
$totalRows_orders = mysql_num_rows($orders);

mysql_select_db($database_reps, $reps);
$query_staff = "SELECT * FROM staff";
$staff = mysql_query($query_staff, $reps) or die(mysql_error());
$row_staff = mysql_fetch_assoc($staff);
$totalRows_staff = mysql_num_rows($staff);

mysql_select_db($database_reps, $reps);
$query_products = "SELECT * FROM products";
$products = mysql_query($query_products, $reps) or die(mysql_error());
$row_products = mysql_fetch_assoc($products);
$totalRows_products = mysql_num_rows($products);

mysql_select_db($database_reps, $reps);
$join = "SELECT
orders.ID AS id,
orders.CustomerName AS customerName,
orders.StaffMember AS staffMember,
orders.SalesPrice AS salesPrice,
orders.ListPrice AS listPrice,
orders.AgeOfPayment AS productAge,
orders.Product AS productName,
orders.Quantity AS orderQuantity,
orders.DateOfOrder AS orderDate,
staff.Bonus AS staffBonus,
products.Price AS productPrice
FROM
orders AS orders
INNER JOIN staff AS staff ON orders.StaffMember = staff.StaffName
INNER JOIN products AS products ON orders.Product = products.ProductName
ORDER BY
orderDate ASC";

$joinresult = mysql_query($join);

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<?php

require_once("models/config.php");
if (!securePage($_SERVER['PHP_SELF'])){die();}
require_once("models/header.php");

?>
</head>

<body>
<div id='wrapper'>
<div id='top'>
  <div id='logo'></div>
</div>
<div id='content'>
  <h1></h1>
  <h2>Change This</h2>
  <div id='left-nav'>
    <?php include("left-nav.php"); ?>
  </div>
  <div id='main'>
    <div id ="orderstable">
      <table border="1" cellpadding="1" cellspacing="3">
        <tr>
          <th>Order ID</th>
          <th>Customer Name</th>
          <th>Product</th>
          <th>Quantity</th>
          <th>Sales Price (€)</th>
          <th>Total Sale (€)</th>
          <th>List Price (€)</th>
          <th>Price Difference (€)</th>
          <th>% Difference</th>
          <th>Sold By</th>
          <th>Order Date</th>
          <th>Age of Payment</th>
          <th>Bonus %</th>
          <th>Bonus Amount</th>
        </tr>
        <?php do { ?>
        <?php do { ?>
          <tr>
            <td align="center" valign="middle"><?php echo $row_orders['ID']; ?></td>
            <td align="center" valign="middle"><?php echo $row_join['customerName']; ?></td>
            <td align="center" valign="middle"><?php echo $row_join['product']; ?></td>
            <td align="center" valign="middle"><?php echo $row_orders['Quantity']; ?></td>
            <td align="center" valign="middle"><?php echo $row_orders['SalesPrice']; ?></td>
            <td align="center" valign="middle"><?php $first_multiply = $row_orders['Quantity'];
                                               $second_multiply = $row_orders['SalesPrice'];
                                               $multiply_total = $first_multiply *  $second_multiply;
                                               echo ($multiply_total); ?></td>
            <td align="center" valign="middle"><?php echo $row_orders['Price']; ?></td>
            <td align="center" valign="middle"><?php $first_number = $row_orders['Price']; 
                                                $second_number = $row_orders['SalesPrice'];
                                                $sum_total = $first_number - $second_number;
                                                echo ($sum_total); ?></td>
            <td align="center" valign="middle">as</td>
            <td align="center" valign="middle"><?php echo $row_join['staffMember']; ?></td>
            <td align="center" valign="middle"><?php echo date('d/m/Y', $row_orders['orderDate']); ?></td>
            <td align="center" valign="middle"></td>
            <td align="center" valign="middle"><?php echo $row_orders['bonus']; ?>%</td>
            <td align="center" valign="middle">&nbsp;</td>
          </tr>
          <?php } while ($row_orders = mysql_fetch_assoc($orders));?>
          <?php } while ($row_join = mysql_fetch_array($join));?>
      </table>
    </div>
  </div>
  <div id='bottom'></div>
</div>
</body>
</html><?php
mysql_free_result($orders);

mysql_free_result($staff);

mysql_free_result($products);
?> 
```

我基本上想做的是以下几点：

*   从之前的页面提交订单。数据存储在数据库中的表上并回显。
*   有问题的三个表是员工、订单和产品表
*   我根据 ID 而不是值保存了表单。我已经用谷歌搜索并研究了 INNER JOIN，我尝试了以下方法，但没有成功。

谁能指出我做错了什么的正确方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:38:53.017

我会这样加入：

```
$join = "SELECT  o.ID id,
                 o.CustomerName customerName,
                 o.StaffMember staffMember,
                 o.SalesPrice salesPrice,
                 o.ListPrice listPrice,
                 o.AgeOfPayment productAge,
                 o.Product productName,
                 o.Quantity orderQuantity,
                 o.DateOfOrder orderDate,
                 s.Bonus staffBonus,
                 p.Price productPrice
         FROM    
                 orders o,
                 staff s,
                 products p
         WHERE
                 o.StaffMember = s.StaffName
         AND
                 o.Product = p.ProductName
         ORDER BY
                 orderDate"; 
```

since you have 2 conditions when joining 3 tables, you will get all results. You can put in another `AND` where you present something unique to the `orders` table and get this information about a specific order.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:41:12.407

One thing to note is that mysql_ functions are deprecated in PHP now. You may want to switch to mysqli_ (is very comparable to the mysql_ class) or PDO.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:44:04.747

```
SELECT
o.ID,
o.CustomerName,
o.StaffMember,
o.SalesPrice,
o.ListPrice,
o.AgeOfPayment,
o.Product,
o.Quantity,
o.DateOfOrder,
s.Bonus,
p.Price
FROM
`orders` o
INNER JOIN staff AS s ON o.StaffMember = s.StaffName
INNER JOIN products AS p ON o.Product = p.ProductName
WHERE o.StaffMember = s.StaffName 
AND o.Product = p.ProductName
ORDER BY
orderDate ASC"; 
```

However, I have a feeling that your tables are not constructed well. I would suggest using IDs instead of Product = ProductName etc.

# javascript - 防止 Colorbox 中输入元素上的 Enter Key (KeyCode 13) 关闭颜色框

> ID：15927223
> 
> 赞同：1
> 
> 时间：2013-04-10T13:27:40.903
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-9, colorbox

我在 IE9 中有一个奇怪的问题。

如果我将输入元素放在颜色框（内联 HTML）中，然后在所述输入元素具有焦点的情况下按 Enter - 颜色框会关闭吗？

这在 Chrome 中不会发生。

我设置了一个 jsfiddle 来演示这个问题：

*   打开小提琴：http: [//jsfiddle.net/rv74f/3/](http://jsfiddle.net/rv74f/3/)
*   单击**内联 HTML**链接
*   单击生成的文本框以使其获得焦点
*   按键盘上的 Enter - Colorbox 然后淡出？

我在选项中看不到任何阻止/解释这种行为的内容？

我怎样才能防止 Enter 关闭颜色框，而不是在我的所有输入元素上捕获按键事件？

我快速浏览了彩盒源代码并注意到了诸如`escKey: true,`但我看不到任何可以解释此 Enter Key 问题的参数？

**编辑：**

如果我将以下内容添加到`publicMethod.close()`

```
alert("caller is " + arguments.callee.caller.toString()); 
```

它告诉我 .close() 被调用`publicMethod.close()`

如果我添加以下内容（注意使用 caller.caller 进一步向上移动堆栈）：

```
alert("caller is " + arguments.callee.caller.caller.toString()); 
```

我得到以下信息：

```
---------------------------
Message from webpage
---------------------------
caller is 
function( event ) {

    // Make a writable jQuery.Event from the native event object
    event = jQuery.event.fix( event );

    var i, ret, handleObj, matched, j,
        handlerQueue = [],
        args = core_slice.call( arguments ),
        handlers = ( jQuery._data( this, "events" ) || {} )[ event.type ] || [],
        special = jQuery.event.special[ event.type ] || {};

    // Use the fix-ed jQuery.Event rather than the (read-only) native event
    args[0] = event;
    event.delegateTarget = this;

    // Call the preDispatch hook for the mapped type, and let it bail if desired
    if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
        return;
    }

    // Determine handlers
    handlerQueue = jQuery.event.handlers.call( this, event, handlers );

    // Run delegates first; they may want to stop propagation beneath us
    i = 0;
    while ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {
        event.currentTarget = matched.elem;

        j = 0;
        while ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {

            // Triggered event must either 1) have no namespace, or
            // 2) have namespace(s) a subset or equal to those in the bound event (both can have no namespace).
            if ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {

                event.handleObj = handleObj;
                event.data = handleObj.data;

                ret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )
                        .apply( matched.elem, args );

                if ( ret !== undefined ) {
                    if ( (event.result = ret) === false ) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                }
            }
        }
    }

    // Call the postDispatch hook for the mapped type
    if ( special.postDispatch ) {
        special.postDispatch.call( this, event );
    }

    return event.result;
}
---------------------------
OK   
--------------------------- 
```

**那么 colorbox.close() 方法是由 JQuery 函数调用的吗？现在我只需要弄清楚为什么......**

谜团越来越深......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T12:18:14.943

这似乎已得到修复 - 无法在 colorbox v1.4.33 (2013-10-31) 中重新创建问题

# javascript - 带有多个语句的 JavaScript `if`

> ID：15927226
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:27:56.897
> 
> 标签：javascript, if-statement

为什么上面的代码有效而下面的代码无效？

这个有效：

```
var i=1
function next() {
    document.getElementById("photo").src = "http://www.Example.com/images/" + jsArray[i];
    if (i<jsArray.length-2) 
        i++
    else
        i=0
} 
```

这个不起作用：

```
var i=1
function next() {
    if (i<jsArray.length-2) 
        i++
        document.getElementById("photo").src = "http://www.Example.com/images/" + jsArray[i];
    else
        i=0
        document.getElementById("photo").src = "http://www.Example.com/images/" + jsArray[i];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T13:29:35.447

`if`如果你想在一个or条件之后有多个语句`else`，你需要将它们包装在一个块中：

```
function next() {
    if (i<jsArray.length-2) {
        i++
        document.getElementById("photo").src = "http://www.Example.com/images/" + jsArray[i];
    }
    else {
        i=0
        document.getElementById("photo").src = "http://www.Example.com/images/" + jsArray[i];
    }
} 
```

请注意，这在语法上是等价的——该`if`语句后面仍然跟着一个语句（一个块语句）。

[语法](http://es5.github.com/#x12.5)给出了完整的细节：

> *IfStatement* :
>     `if (` *表达式* `)` *语句* `else` *语句*
>     `if (` *表达式* `)` *语句*

这表明一个`if`语句后面只能跟一个语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:31:04.227

如果条件为真，则必须在花括号中保留需要执行的代码块。

```
var i=1
function next() {
    if (i<jsArray.length-2)
    { 
        i++
        document.getElementById("photo").src = "http://www.Example.com/images/" + jsArray[i];
    }
    else
    {
        i=0
        document.getElementById("photo").src = "http://www.Example.com/images/" + jsArray[i];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:29:57.530

你需要大括号：

```
function next() {
    if (i<jsArray.length-2) {
        i++;
        document.getElementById("photo").src = "http://www.Example.com/images/" + jsArray[i];
    } else {
        i=0;
        document.getElementById("photo").src = "http://www.Example.com/images/" + jsArray[i];
    }
} 
```

我还选择了添加分号。

对于 JS 错误/警告，您可能会发现 JSLint 很有帮助： http: [//www.jslint.com](http://www.jslint.com)

# javascript - Angularjs多个highcharts

> ID：15927234
> 
> 赞同：0
> 
> 时间：2013-04-10T13:28:13.277
> 
> 标签：javascript, angularjs, highcharts

我正在尝试在 angularjs 应用程序中初始化多个 highchart。问题是只有第一个图表被初始化......有人可以帮助我吗？

这是我的指令：

```
app.directive('widget', function() {
return {
restrict: 'AC',
scope: { widgetModel: '=' },
replace: true,
template:
  '<li id="{{widgetModel.class}}" chartType="{{widgetModel.chartType}}" data-col="{{widgetModel.col}}" data-row="{{widgetModel.row}}" data-sizex="{{widgetModel.sizex}}" data-sizey="{{widgetModel.sizey}}" style="width:200px; height:100px;">'+
    '{{widgetModel.text}}, ({{widgetModel.row}},{{widgetModel.col}})'+
  '</li>',
link: function(scope, element, attrs) {

    var chart1 = new Highcharts.Chart({
      chart: {
        renderTo: attrs.id,
        type: attrs.chartType,
        height: attrs.chartheight,
        animation: false
      },
      xAxis: {
        categories: [12,13,14,15],
        labels: {
          step: attrs.chartStep

        }
      },
      yAxis: {
        title: {
          text: ''
        }
      },
      series: [{
        data: [1,2,3,4],
        name: "ciccio"
      }]
    });
}
  };
}); 
```

编辑：

我创建了一个小提琴：http: [//jsfiddle.net/Tropicalista/mtKJ8/33/](http://jsfiddle.net/Tropicalista/mtKJ8/33/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:34:58.470

[已解决]：我已经用我的解决方案更新了我的小提琴：http: [//jsfiddle.net/mtKJ8/59/](http://jsfiddle.net/mtKJ8/59/)

```
renderTo: element[0], 
```

# java - 无法通过 android 中的 JSON 将 base64 字符串图像发送到 asp.net Web 服务

> ID：15927235
> 
> 赞同：1
> 
> 时间：2013-04-10T13:28:18.190
> 
> 标签：java, android, json, base64, http-post

我在 ASP.net 中创建了一个 RESTful 的 Web 服务。我想从一个 Android 应用程序使用这些服务。基本上，我使用 Android 的默认库以 JSON 格式发送请求并获得响应。

这是我的代码：

```
public class PostImagesHandler {
    final static String TAG = "WebHandlerHttpPost";
    Context context;
    ImagesBean imageBean;

    public String postImagesRequest(String URL, Context context,
            ImagesBean imgBean) {
        this.context = context;
        String result = null;
        this.imageBean = imgBean;

        try {
            HttpPost request = new HttpPost(URL);
            System.out.println("WHAT IS URL :: " + URL);
            request.setHeader("Accept", "application/json");
            request.setHeader("Content-type", "application/json");
            request.addHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
            request.addHeader("Pragma", "no-cache"); // HTTP 1.0.
            request.addHeader("Expires", "0"); // Proxies.

                     Bitmap bm = BitmapFactory.decodeFile("sdcard/dotTest9.jpg");
             ByteArrayOutputStream baos = new ByteArrayOutputStream();
             bm.compress(Bitmap.CompressFormat.JPEG, 90, baos);
             byte[] bytes_ = baos.toByteArray();

            String image_str = Base64.encodeToString(readFile().getBytes(),
                    Base64.NO_WRAP);
            appendLog(image_str);

            JSONStringer userJson = new JSONStringer().object()
            .key("objPostSectionImages").object().key("ID")
            .value("1").key("SUB_ID").value("1").key("MainTaskId")
            .value("1").key("ImageBase64").value(image_str)
            .key("actualAuditDate").value(getCurrentDateTime()).endObject()
             endObject();

            Log.d(TAG, "SECTION IMAGE STRING :: " + userJson.toString());

            StringEntity entity = new StringEntity(userJson.toString(), "UTF-8");
            entity.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,
                    "application/json"));
            entity.setContentType("application/json");
            request.setEntity(entity);

            HttpParams params = new BasicHttpParams();
            HttpConnectionParams.setConnectionTimeout(params, 30000);
            HttpConnectionParams.setSoTimeout(params, 10000);

            // Send request to WCF service
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpResponse response = httpClient.execute(request);

            if (response != null) {
                StringBuilder sb = new StringBuilder();
                BufferedReader rd = new BufferedReader(new InputStreamReader(
                        response.getEntity().getContent()));

                String line;
                while ((line = rd.readLine()) != null) {
                    sb.append(line + "\n");
                }

                result = sb.toString();
                Log.d(TAG, "AUDIT SECTION IMAGES Response: " + result);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return result;
    }

    public void appendLog(String text) {
        File logFile = new File("sdcard/dotTest7.txt");
        if (!logFile.exists()) {
            try {
                logFile.createNewFile();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        try {
            // BufferedWriter for performance, true to set append to file flag
            BufferedWriter buf = new BufferedWriter(new FileWriter(logFile,
                    true));
            buf.append(text);
            // buf.newLine();
            buf.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    @SuppressLint("SimpleDateFormat")
    public static String getCurrentDateTime() {
        return new SimpleDateFormat("MM-dd-yyyy").format(Calendar.getInstance()
                .getTime());
    }
} 
```

我可以通过这种方式发送小图像，但是在发送大图像（超过 5 KB）时，我遇到了问题。有时我会收到“请求错误”，有时它会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T08:52:46.453

`base64`也许您的 ASP.NET Web 服务会转义字符串中的正斜杠？从普通应用程序的角度来看，这使得这些数据被破坏了。

在小图像中，转换后获得`/`符号的概率`base64`明显低于大图像，因此您会遇到这种随机错误情况。

您可以检查您的服务结果字符串中的`/\`符号并将它们替换为`/`并检查它是否有效。

# asp.net - Microsoft.Web.UI.WebControls Treeview 未在某些机器上呈现

> ID：15927236
> 
> 赞同：2
> 
> 时间：2013-04-10T13:28:19.500
> 
> 标签：asp.net, treeview, web-controls

我们有一个显示树视图的简单网页（ Microsoft.Web.UI.WebControls ）

![正确渲染](https://i.stack.imgur.com/pi7n6.jpg)

现在，在某些机器上（主要是客户端的 ;-)）树视图没有正确呈现：

![未正确渲染](https://i.stack.imgur.com/5vTGj.jpg)

我已经在我所有的机器上测试了这个，甚至是 linux，并且这里的一切都正确呈现。我可以通过删除或重命名“webctrl_client”文件夹来重现此错误。

我不明白这个问题可能是什么？'webctrl_client' 文件夹正确安装在根 www 文件夹中，.dll 也正确放置？我尝试清除浏览器缓存，但这似乎也没有任何效果......

有谁知道会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T21:28:26.450

`Microsoft.Web.UI.WebControls.Treeview`是一个过时的控件。

您的树控件中断的最可能原因是它在 Windows 8/IE10 上不起作用。

最好的选择是转换为`System.Web.UI.WebControl.TreeView`

**快速修复：**将以下代码添加到您的`Global.asax.vb.Application_EndRequest`. 这将强制 IE 以兼容模式加载您的应用程序。

```
Try

   Response.AddHeader("X-UA-Compatible", "IE=5")

Catch ex As Exception

End Try 
```

您还可以阅读这篇关于如何确保您的服务器识别 IE10 的文章： [http ://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

**更多解释：** 微软在 IE10 中删除了对 HTC 行为文件的支持（[https://msdn.microsoft.com/en-us/library/hh801216(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/hh801216(v=vs.85).aspx)）。HTC 是扩展浏览器功能的旧方式。Microsoft TreeView 使用 HTC（在`webctrl_client`文件夹中找到）没有回退。其他浏览器似乎仍然支持 HTC。

# jquery-ui-datepicker - 从日期选择器更新 jquery timepicker 插件

> ID：15927251
> 
> 赞同：0
> 
> 时间：2013-04-10T13:28:51.073
> 
> 标签：jquery-ui-datepicker, jquery-ui-timepicker

我有两个输入字段，一个带有日期选择器，一个带有时间选择器（仅显示时间滑块，没有日历）。如果在 datePicker 中选择了星期六，我想在时间选择器中显示不同的时间跨度。所以，html是这样的

```
<input id="datePicker" type="text" name="date"/>
<input id="timePicker" type="text" name="time"/> 
```

javascript看起来像这样

```
$("#datePicker").datepicker({
  dateFormat : "dd/mm/yy",
  onSelect: function(dateText, instance) {
    var date = $.datepicker.parseDate("dd/mm/yy",  dateText);
    var isWeekend = !$.datepicker.noWeekends(date)[0];
    if (isWeekend) {
      $("#timePicker").timepicker('options','hourMax', 15);
    }
    else {
      $("#timePicker").timepicker('options','hourMax', 22);
    }
  }
});
$("#timePicker").timepicker({
  hourMin : 8,
  hourMax : 22,
  stepMinute : 15,
  timeOnly: true,
  timeFormat : "HH:mm"
}); 
```

上面代码的问题是它没有更新时间选择器中的最大小时数，并且当我尝试选择新时间时它在控制台中显示某种错误（该错误不会影响时间跨度功能）：解析日期字符串时出错：位置 2 日期字符串的意外文字 = 22:00 日期格式 = dd/mm/yy 我正在使用

*   jquery-1.8.3.min.js
*   jquery-ui-1.9.2.custom.min.js
*   时间选择器 1.2.1 版 ( [http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/) )

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T14:41:11.640

尝试用下面的代码替换您发布的代码。.timepicker 构造函数查找 hasDatepicker 类，如果它没有找到它，它会重新绘制 ui timepicker div。 [提琴手](http://jsfiddle.net/wasiflhr/kztwZ/2/)

```
$("#datePicker").datepicker({
                        dateFormat: "dd/mm/yy",
                        onSelect: function (dateText, instance) {
                            var date = $.datepicker.parseDate("dd/mm/yy", dateText);
                            var isWeekend = !$.datepicker.noWeekends(date)[0];
                            alert(isWeekend);
                            if (isWeekend) {
                                $("#timePicker").removeClass("hasDatepicker");
                                $("#timePicker").timepicker({
                                    hourMin: 8,
                                    hourMax: 15,
                                    stepMinute: 15,
                                    timeOnly: true,
                                    timeFormat: "HH:mm"
                                });
                            } else {
                                 $("#timePicker").removeClass("hasDatepicker");
                                $("#timePicker").timepicker({
                                    hourMin: 8,
                                    hourMax: 22,
                                    stepMinute: 15,
                                    timeOnly: true,
                                    timeFormat: "HH:mm"
                                });
                            }
                        }
                    }); 
```

# c# - 线程在 form.Render（HtmlTextWriter writer）中被中止

> ID：15927255
> 
> 赞同：0
> 
> 时间：2013-04-10T13:29:02.570
> 
> 标签：c#, asp.net, response, render

我正在使用 form.Render 方法进行一些工作。有时它会出现错误。

## 信息

```
System.Threading.ThreadAbortException: Thread was being aborted.
at DTrnsForm.Render(HtmlTextWriter writer) 
```

我不知道哪条线给出了这个错误。我没有在我的代码中使用任何类型的 Response.Redirect。但我正在使用

## 使用的代码

```
Response.Write("");
Response.Flush(); 
```

谁能告诉我问题是什么，我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:06:54.143

如果您正在使用 Response.Redirect 并遇到此问题，那么只需

## 利用

```
Response.Redirect("",false); 
```

如果您没有使用 Response.Redirect 并且仍然面临这个问题。然后只需添加您的 web.config

## 代码

```
<system.web>
    <httpRuntime executionTimeout="110"/>
</system.web> 
```

通过更改 web.config 解决了我的问题

# scala - 可扩展且快速的 REST API 以公开 ORM 方法

> ID：15927258
> 
> 赞同：2
> 
> 时间：2013-04-10T13:29:04.947
> 
> 标签：scala, rest, orm, functional-programming

我需要开发 REST API 来将 CRUD 操作暴露给 DB 和一些业务逻辑。我更喜欢这个模块是独立的、快速的、可扩展的和灵活的（没有提供我不需要的功能的不必要的模块，以降低维护成本）。

开发偏好：
- 进行类型检查的框架/语言
- 具有良好的 ORM 映射
- 具有良好的 TDD/BDD 支持
- 函数式语言

我想知道像 squeryl 和 blue eyes 或 squeryl 和 spary 这样的 scala 模块的组合是否可以解决问题，但它不一定是 scala。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:00:04.183

对于 Web 前端，[**Play Framework**](http://www.playframework.com/)最近已成为默认选择。

对于 ORM，我推荐[**SORM 框架**](http://sorm-framework.org/)：

*   它是功能性的。
*   [与竞争对手不同](http://sorm-framework.org/SORM-vs-Slick.html)，它是高级且无样板的。
*   它[与 Play 很好地集成在一起](https://stackoverflow.com/questions/14908054/how-to-use-sorm-framework-with-play-framework)。
*   它还不是完全类型安全的，但将在下一个次要版本中。

以下是它可以做什么的完整示例。不需要额外的代码。

```
// Declare a model:
case class Artist( name : String, genres : Set[Genre] )
case class Genre( name : String ) 

// Initialize SORM, automatically generating schema:
import sorm._
object Db extends Instance(
  entities = Set( Entity[Artist](), Entity[Genre]() ),
  url = "jdbc:h2:mem:test"
)

// Store values in the db:
val metal = Db.save( Genre("Metal") )
val rock = Db.save( Genre("Rock") )
Db.save( Artist("Metallica", Set(metal, rock) ) )
Db.save( Artist("Dire Straits", Set(rock) ) )

// Retrieve values from the db:
// Option[Artist with Persisted]:
val metallica = Db.query[Artist].whereEqual("name", "Metallica").fetchOne() 
// Stream[Artist with Persisted]:
val rockArtists = Db.query[Artist].whereEqual("genres.item.name", "Rock").fetch() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:08:31.053

你所描述的当然是可能的。我没有任何使用 Spray 或 BlueEyes 的经验，但我肯定使用过 Squeryl + Play，它可以做你想做的事。它可能提供了您不需要的模块，但如果您不使用它们，它们不应该增加维护成本。

一个大问题是大多数（如果不是全部）Scala 框架都是围绕异步编程模型设计的（事实上，大多数其他高可扩展性框架也是如此，例如 Node.js）。另一方面，ORM 通常是围绕同步编程模型构建的。但是，您可以通过一些胶水代码、一些防御性编码和一些仔细的调整（这就是我们所做的）来解决这种不匹配问题。

一个更激进的替代方法是将 ORM 替换为 MongoDB 或 CouchDB 等文档数据库（文档数据库通常具有合理的异步驱动程序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T02:58:30.203

我认为[Lift web 框架](http://liftweb.net/)很可能是一个候选者，原因如下：

# 道具

1.  高度模块化。

    尽管 Lift 是一个完整的 Web 应用程序框架，但它是高度模块化的。它有自己的 ORM 库，但如果你不喜欢它，就不要将它包含在你的库依赖项中，而是使用 Squeryl 等其他库。类似地，它具有类型安全的 JSON 库，但它也是可选的。

2.  它只是一个普通的 Java Web Container 过滤器。

    这意味着您可以将它与运行在 Java Web Container 上的其他框架一起使用，并指定只有特定的 URL 将转到 Lift，而其他 URL 将仅用于您的旧框架或只是一个纯 JSP。

3.  它是类型安全的和功能性的。

    Lift 中的大多数操作都是强类型安全的，例如，您可以将会话变量存储在 SessionVar 中而不会丢失其类型信息。

    Lift 还利用了许多函数式编程技术，例如部分函数、模式匹配和基于转换的[纯 xHTML/HTML5 模板系统](https://www.assembla.com/wiki/show/liftweb/View_First)，而​​不是在模板中嵌入 scala 代码来生成动态内容。

4.  对有状态和无状态的超级简单的 REST 支持。

    [在 Lift 中](http://simply.liftweb.net/index-5.3.html#toc-Section-5.3)创建一个REST API 非常简单，它有一个非常好的和简单的 DSL。它同时支持有状态和无状态，有时以有状态的方式做事更容易，Lift 给了你。有状态和无状态都使用相同的 REST DSL，您只需要告诉 Lift 您想要什么样式，它就会为您处理所有事情（初始化会话...等）。

    例如，以下代码展示了如何创建支持 XML 和 JSON 的 REST API 来获取和发布博客文章。

    ```
    object BlogAPI extends RestHelper {

      def getPostXML(postID: String) = <article>{postID}</article>
      def getPostJSON(postID: String): JValue = ("postID" -> 1)
      def addPostJSON(jsonBody: JValue) = {
        // Extract from jsonBody and add post to DB 
        new OkResponse()
      }

      serve {
        // Read blog post API in XML and JSON
        case "api" :: "blog" :: "post" :: postID :: Nil XmlGet request => getPostXML(postID)
        case "api" :: "blog" :: "post" :: postID :: Nil JsonGet request => getPostJSON(postID)

        // Post blog post API in JSON
        case "api" :: "blog" :: "post" :: Nil JsonPost ((jsonBody, req)) => addPostJSON(jsonBody)
      }
    } 
    ```

    这几乎就是您在 Lift 中制作 REST API 所需的全部内容。它将 URL`GET /api/blog/1.xml`与 XML 响应匹配，并`GET /api/blog/1.json`返回 JSON 响应。

# 缺点

Lift 最大的缺点是文档比其他框架少，而且您可以在网络上找到的一些信息已经过时。

而且由于Lift使用了很多高级的Scala特性和一些函数式编程风格，所以如果你不熟悉Scala和函数式编程特性，有时候学习起来并不容易。

# ios - 将数据传递给目标视图控制器

> ID：15927259
> 
> 赞同：0
> 
> 时间：2013-04-10T13:29:08.447
> 
> 标签：ios, xcode, mapkit, core-location

我实际上正在使用核心位置和地图工具包框架来获取用户点击按钮的位置。我有两个视图控制器。第一个是带有地图视图的普通视图控制器，所有核心定位过程都在其中完成，以及反向地理编码。第二个是表格视图控制器，它显示从地理编码和位置的纬度和经度获得的数据。

我得到的问题是我无法将当前位置的信息传递给下一个视图。但是，我可以传递我的地理编码值。这对我来说似乎很奇怪，任何帮助将不胜感激。

```
mapViewController.m

#import "mapViewController.h"

@interface mapViewController ()
{
    CLLocationManager *locationManager;
    CLGeocoder *geoCoder;
    CLPlacemark *placemark;
    addressViewController *view;
}

@end

@implementation mapViewController
@synthesize mapView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    locationManager = [[CLLocationManager alloc]init];
    geoCoder = [[CLGeocoder alloc]init];
    self.addressOutlet.enabled = NO;
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"addressSegue"])
    {
        view= segue.destinationViewController;

         // assigning the addressPlacemark the same value as the current placemark
        view.addressPlacemark = placemark;

        NSLog(@"this is perfectly executed");

    }
}

-(void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
{
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(userLocation.coordinate, 600, 600);
    [self.mapView setRegion:region animated:YES];
}

-(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    CLLocation *newOne = [locations lastObject];

    [locationManager stopUpdatingLocation];
    NSLog(@"the new location is : %@", newOne);
    NSLog(@"the latitude is %f", newOne.coordinate.latitude);
    NSLog(@"the speed is %.2f mps", newOne.speed);
    NSLog(@"at time : %@",newOne.timestamp);

//These 4 NSLog statements are returning the outputs as expected

 [geoCoder reverseGeocodeLocation:newOne completionHandler:^(NSArray *placemarks, NSError *error) {
        placemark = [placemarks objectAtIndex:0];
        NSLog(@"the current city is %@",placemark.locality);

        self.addressOutlet.enabled = YES;
        // view.currentLocation = [[CLLocation alloc]init];

        view.currentLocation = newOne;  // assigning currentLocation the same location as the newOne

        NSLog(@"the currentLocation object has the location : \n %@",view.currentLocation);
        //problem : the output of this NSLog gives Null
    }];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:44:39.047

问题在于

```
view.currentLocation = newOne; 
```

在这种情况下，**视图**为零。**当prepareForSegue:**被调用时，视图被实例化。所以你能做的是

```
tempLocation = newOne; // Store newOne in a temporary variable 
```

并且在

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if([segue.identifier isEqualToString:@"addressSegue"])
{
    view= segue.destinationViewController;

     // assigning the addressPlacemark the same value as the current placemark
    view.addressPlacemark = placemark;
     view.currentLocation = tempLocation;
    NSLog(@"this is perfectly executed");

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:38:13.303

1.  您不应该保存`addressViewController`在当前控制器中，因为它会保留他直到您再次执行 segue。并且在某些执行点上，它至少是无用的，甚至是有害的。
2.  `view.currentLocation = newOne; // assigning currentLocation the same location as the newOne` 此时的视图可以包含 nill，因此对其属性的任何分配都不正确。您应该保存`currentLocation`在当前视图控制器的属性中，然后`prepareForSegue`将其设置为`destinationViewController`.
3.  我不想谈论您的代码命名约定，但是当我看到以小写字母开头的类名时，我感到很困惑=）

# c# - 将 DWORD 事件常量从 WinEventProc 转换为 C# 中的名称

> ID：15927262
> 
> 赞同：1
> 
> 时间：2013-04-10T13:29:19.383
> 
> 标签：c#

我正在使用`SetWinEventHook`并`WinEventProc`捕获窗口消息

在 WinEventProc 中有一个参数“DWORD 事件”，其中包含一个代表事件的数字

我想将此号码转换为姓名

是否有 ac# 功能可以做到这一点？

我的代码基于此处的答案 [在 Windows 消息上设置挂钩](https://stackoverflow.com/questions/9665579/setting-up-hook-on-windows-messages)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-05T13:25:05.953

```
public enum SystemEventContants : uint
{
    EVENT_SYSTEM_SOUND = 0x1,
    EVENT_SYSTEM_ALERT = 0x2,
    EVENT_SYSTEM_FOREGROUND = 0x3,
    EVENT_SYSTEM_MENUSTART = 0x4,
    EVENT_SYSTEM_MENUEND = 0x5,
    EVENT_SYSTEM_MENUPOPUPSTART = 0x6,
    EVENT_SYSTEM_MENUPOPUPEND = 0x7,
    EVENT_SYSTEM_CAPTURESTART = 0x8,
    EVENT_SYSTEM_CAPTUREEND = 0x9,
    EVENT_SYSTEM_MOVESIZESTART = 0xa,
    EVENT_SYSTEM_MOVESIZEEND = 0xb,
    EVENT_SYSTEM_CONTEXTHELPSTART = 0xc,
    EVENT_SYSTEM_CONTEXTHELPEND = 0xd,
    EVENT_SYSTEM_DRAGDROPSTART = 0xe,
    EVENT_SYSTEM_DRAGDROPEND = 0xf,
    EVENT_SYSTEM_DIALOGSTART = 0x10,
    EVENT_SYSTEM_DIALOGEND = 0x11,
    EVENT_SYSTEM_SCROLLINGSTART = 0x12,
    EVENT_SYSTEM_SCROLLINGEND = 0x13,
    EVENT_SYSTEM_SWITCHSTART = 0x14,
    EVENT_SYSTEM_SWITCHEND = 0x15,
    EVENT_SYSTEM_MINIMIZESTART = 0x16,
    EVENT_SYSTEM_MINIMIZEEND = 0x17
}

public enum ObjectEventContants : uint
{
    EVENT_OBJECT_CREATE = 0x8000,
    EVENT_OBJECT_DESTROY = 0x8001,
    EVENT_OBJECT_SHOW = 0x8002, 
    EVENT_OBJECT_HIDE = 0x8003,  
    EVENT_OBJECT_REORDER = 0x8004,
    EVENT_OBJECT_FOCUS = 0x8005,
    EVENT_OBJECT_SELECTION = 0x8006,
    EVENT_OBJECT_SELECTIONADD = 0x8007,
    EVENT_OBJECT_SELECTIONREMOVE = 0x8008,
    EVENT_OBJECT_SELECTIONWITHIN = 0x8009,
    EVENT_OBJECT_STATECHANGE = 0x800A,
    EVENT_OBJECT_LOCATIONCHANGE = 0x800B,
    EVENT_OBJECT_NAMECHANGE = 0x800C,
    EVENT_OBJECT_DESCRIPTIONCHANGE = 0x800D,  
    EVENT_OBJECT_VALUECHANGE = 0x800E,
    EVENT_OBJECT_PARENTCHANGE= 0x800F,  
    EVENT_OBJECT_HELPCHANGE= 0x8010,
    EVENT_OBJECT_DEFACTIONCHANGE = 0x8011, 
    EVENT_OBJECT_ACCELERATORCHANGE = 0x8012
}
// possible marshaling unmanaged type conflict/problem between 32/64 bit
public enum SystemObjectIDs 
{
    OBJID_WINDOW = 0x00000000,
    OBJID_SYSMENU = 0xFFFFFFFF,
    OBJID_TITLEBAR = 0xFFFFFFFE,
    OBJID_MENU = 0xFFFFFFFD,
    OBJID_CLIENT = 0xFFFFFFFC,
    OBJID_VSCROLL = 0xFFFFFFFB,
    OBJID_HSCROLL = 0xFFFFFFFA,
    OBJID_SIZEGRIP = 0xFFFFFFF9,
    OBJID_CARET = 0xFFFFFFF8,
    OBJID_CURSOR = 0xFFFFFFF7,
    OBJID_ALERT = 0xFFFFFFF6,
    OBJID_SOUND = 0xFFFFFFF5,
    OBJID_QUERYCLASSNAMEIDX = 0xFFFFFFF4,
    OBJID_NATIVEOM = 0xFFFFFFF0
}

public enum Flags
{
    WINEVENT_OUTOFCONTEXT = 0x0000,
    WINEVENT_SKIPOWNTHREAD = 0x0001,
    WINEVENT_SKIPOWNPROCESS = 0x0002,
    WINEVENT_INCONTEXT = 0x0004
} 
```

来源：在谷歌上找到的 winuser.h。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:34:20.150

这会有点痛苦，但您可以尝试创建一个 T4 模板来挖掘平台 sdk C 头文件，解析出值，然后为您创建枚举。如果您这样做，那么如果您获得具有新值的平台 SDK 更新，它们将自动包含到您的枚举中（假设您再次重新生成 T4 输出）。

# c# - JSTree在MVC4中从视图调用到控制器

> ID：15927263
> 
> 赞同：3
> 
> 时间：2013-04-10T13:29:22.010
> 
> 标签：c#, ajax, asp.net-mvc, jstree

我正在尝试在我的 MVC4 项目中创建一个动态 JSTree。但是，当谈到 Json 时，我是一个完整的初学者。我正在尝试从我的 _layout.cshtml 进行 ajax json 调用，代码如下：

```
 <script type="text/javascript">
$(document).ready(function () {
$("#demo1").jstree({
        "json_data": {
            "ajax": {
                "type": "POST",
                "dataType": "json",
                "contentType": "application/json;",
                "url": "Home/GetAllNodes",
                "data": function (node) {
                    return '{ "operation" : "get_children", "id" : 1 }';
                },
                "success": function (retval) {
                    return retval.d;
                }
            }
        },
        "plugins": ["themes", "json_data"]
    });
});
</script> 
```

我已从[该站点](http://simpledotnetsolutions.wordpress.com/2012/11/25/jstree-few-examples-with-asp-netc/)获取此代码并密切关注这些步骤，但是，此示例中使用的项目是一个 Web 表单项目，我不确定在使用 json 时这两个项目之间的翻译。

这是我在 HomeController 中的方法 - GetAllNodes：

```
[WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
        public static List<JSTreeTestMod> GetAllNodes(string id)
        {
            List<JSTreeTestMod> JSTreeArray = new List<JSTreeTestMod>();

            JSTreeTestMod treeItem = new JSTreeTestMod();
            treeItem.data = "x1";
            treeItem.state = "closed";
            treeItem.IdServerUse = 10;
            treeItem.children = null;
            treeItem.attr = new JSTreeAttribute { id = "10", selected = false };
            JSTreeArray.Add(treeItem);

            JSTreeTestMod treeItem2 = new JSTreeTestMod();
            var children =
                new JSTreeTestMod[]
        {
            new JSTreeTestMod { data = "x1-11", attr = new JSTreeAttribute { id = "201" } },
            new JSTreeTestMod { data = "x1-12", attr = new JSTreeAttribute { id = "202" } },
            new JSTreeTestMod { data = "x1-13", attr = new JSTreeAttribute { id = "203" } },
            new JSTreeTestMod { data = "x1-14", attr = new JSTreeAttribute { id = "204" } },
        };
            treeItem2.data = "x2";
            treeItem2.IdServerUse = 20;
            treeItem2.state = "closed";
            treeItem2.children = children;
            treeItem2.attr = new JSTreeAttribute { id = "20", selected = true };
            JSTreeArray.Add(treeItem2);

            JSTreeTestMod treeItem3 = new JSTreeTestMod();
            var children2 =
                new JSTreeTestMod[]
        {
            new JSTreeTestMod { data = "x2-11", attr = new JSTreeAttribute { id = "301" } },
            new JSTreeTestMod { data = "x2-12", attr = new JSTreeAttribute { id = "302" }, children= new JSTreeTestMod[]{new JSTreeTestMod{data = "x2-21", attr = new JSTreeAttribute { id = "3011" }}} },
            new JSTreeTestMod { data = "x2-13", attr = new JSTreeAttribute { id = "303" } },
            new JSTreeTestMod { data = "x2-14", attr = new JSTreeAttribute { id = "304" } },
        };
            treeItem3.data = "x3";
            treeItem3.state = "closed";
            treeItem3.IdServerUse = 30;
            treeItem3.children = children2;
            treeItem3.attr = new JSTreeAttribute { id = "30", selected = true };
            JSTreeArray.Add(treeItem3);
            return JSTreeArray;
        } 
```

有没有人有在 MVC4 中使用 jstree 的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T11:47:50.730

也许有点晚了，但我创建了一个 MVC HTML Helper，它可以帮助你使用最新的 JStree 插件设置树，你可以在这里找到它。

[https://jstreemvcwrapper.codeplex.com/](https://jstreemvcwrapper.codeplex.com/)

用法更简单：

```
@(Html.JSTreeView(Model.TreeNodes)
.ContrainerID("TreeContainer")
.Children(n => n.Childern)
.ItemID(n=>n.NodeID.ToString())
.ItemType(n=>n.NodeType.ToString())
.IsSelected(n=> n.NodeID == 1)
.OnNodeSelect("onTreeFolderSelected")
.Plugins("wholerow", "types")
.CoreConfig(new
{
      expand_selected_onload = true,
      multiple = false
})
.TypesConfig(new
{
      Root = new { icon = "../Content/jsTree/Root.png" },
      Folder = new { icon = "../Content/jsTree/Folder.png" },
      File = new { icon = "../Content/jsTree/File.png" },
      @default = new { icon = "../Content/jsTree/Folder.png" }
})
.ItemTemplate(@<text> <a href="#" >@item.NodeName</a> </text>)) 
```

您不必为 JSTree 创建特定模型。并将`IEnumrable`作为来源.. 只需使用以下方式指定子属性：

```
.Children(n => n.Childern) 
```

方法，其余的将完成..

它仍处于早期测试阶段.. 但将帮助您快速启动您的项目..

# iphone - 如何使用 Coredata 添加和使用现有的 SQLite 数据库（x.db）？

> ID：15927269
> 
> 赞同：2
> 
> 时间：2013-04-10T13:29:38.683
> 
> 标签：iphone, ios, sqlite, core-data

在我的项目中，我使用 CoreData 创建和使用数据库，它工作得非常好。现在我有一个 SQLite 数据库文件（.db），我想将它集成到我的项目中并使用它（使用 coredata）。

我已将 .db 文件添加到我的项目中，并使用以下代码在 Documents 目录中创建了它的可写副本 -

```
- (void)createEditableCopyOfDatabaseIfNeeded {
// First, test for existence.
BOOL success;
NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *writableDBPath = [documentsDirectory stringByAppendingPathComponent:@"wordlist1000.db"];
success = [fileManager fileExistsAtPath:writableDBPath];
if (success)
    return;
// The writable database does not exist, so copy the default to the appropriate location.
NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"wordlist1000.db"];
success = [fileManager copyItemAtPath:defaultDBPath toPath:writableDBPath error:&error];
if (!success) {
    NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
} 
```

}

现在，当我尝试从数据库中获取结果时，出现此错误

> SQLite 错误代码：1，'没有这样的表：Z_METADATA'，NSSQLiteErrorDomain=1}

请告诉我如何从这里开始。一些代码示例会很有帮助。

**总而言之，我只想导入一个外部数据库并使用 CoreData 在我的 xCode 项目中使用它。**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:33:37.317

你不能那样做。Core Data 不是 SQLite 的简单包装器。它提供了一个非常不同的 API，并使用自己的、未记录的 SQLite 模式。SQLite 是一个实现细节，而不是你可以通过 Core Data 直接使用的东西。

如果您想将 SQLite 数据导入 Core Data，您需要：

1.  将 Core Data 模型文件添加到您的项目并将其配置为包含适当的实体以匹配您的架构。
2.  使用 SQLite 自己的原生 API 或诸如 FMDB 或 PLDatabase 之类的 Objective-C 包装器之一从 SQLite 读取数据。
3.  使用 Core Data 的 API 将该数据写入新的 Core Data 存储文件。

您可能只想将数据留在 SQLite 中。FMDB 和 PLDatabase 提供了非常方便的包装器，让您可以继续在代码中使用 SQL 主义，而不是切换到 Core Data 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:38:55.223

核心数据在 sqlite 中存储数据的方式与您存储的方式不同。核心数据会创建额外的表格来保存有关您的实体的信息。所以你的sqlite db必须相同，这样操作就不会出现任何问题。

跟着[**`Ray Wenderlich's great Core Data Tutorial: How To Preload/Import Existing Data`**](http://www.raywenderlich.com/980/core-data-tutorial-how-to-preloadimport-existing-data)

# html - 扩大菜单栏的宽度

> ID：15927273
> 
> 赞同：0
> 
> 时间：2013-04-10T13:29:42.463
> 
> 标签：html, css, menu, navigation, uinavigationbar

我创建了一个菜单并将其放置在页面的中心，使用以下代码：

```
<div id="menucontainer">
    <ul>
        <li>One</li>
        <li>Two</li>
    </ul>
</div> 
```

[http://jsfiddle.net/isherwood/KLEx/](http://jsfiddle.net/isherwood/KLDex/)

菜单的主容器

```
#menucontainer {
    float:left;
    width:100% ;
    height:40px;
    margin:0;
    padding: 0;

} 
```

后跟（将菜单栏放在中间）

```
#menucontainer ul {
    width: 980px;
    list-style-type: none;
    padding: 0px;
    margin: 0 auto;
    position:relative;
} 
```

（菜单上列表的样式）

```
#menucontainer ul li {
    float: left;
    min-width: 74px;
    height: 23px;
    margin: 2px 4px 0 0;
    padding: 10px 15px 5px 15px;
    font-size: 13px;
    background-color:#f0f1f4;
    /*border-bottom:4px #cccccc  solid;*/
    color:#5c626c;
    cursor:pointer;
    text-transform:uppercase;
    text-align:center;
} 
```

我面临的问题是，我希望拉伸 2 个额外的，放置在两侧，“li”以在网站的每一侧一直拉伸，从而在顶部创建一个条形。怎么做到呢？

# windows-phone-7 - 在 Windows Phone 8 中使用 Google 地图

> ID：15927274
> 
> 赞同：4
> 
> 时间：2013-04-10T13:29:43.470
> 
> 标签：windows-phone-7, google-maps, windows-phone-8, bing-maps, here-api

可以在 Windows Phone 8 中使用 Google 地图吗？这个问题可能看起来很奇怪，因为互联网上有很多关于它的帖子。但在实践中，我面临着真正的问题。

[本文](http://www.codeproject.com/Articles/153467/Google-Maps-for-Windows-Phone-7-using-Bing-Map-Con)介绍了我知道使用 Google 地图（使用 MapTileLayer.TileSources）的唯一方法。但是在WP 8新地图控件中不能替换瓦片。当然我们可以使用旧地图控件插入相应的库。这就是我遇到问题的地方。

WP8 中的旧 Bing Map 控件存在内存泄漏，无法使用它们。也许更准确，但随着时间的推移会消耗巨大的内存。我不知道如何解决它。[我在此处](https://stackoverflow.com/questions/15876001/windows-phone-8-old-map-vs-new-map)和[Microsoft Connect](https://connect.microsoft.com/bingmaps/feedback/details/783257/windows-phone-8-bing-maps-memory-leak)中对此进行了介绍。最后，我看不到在自己的 WP8 应用程序中使用 Google 地图的方法。如果有人在 WP8 应用程序中成功使用谷歌地图，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-06T09:23:53.547

Even if you can use Google Maps tiles inside the control, you won't be authorize to do so.

Google Maps terms of use specify that you cannot direct access tiles or other resources out of the official control.

So technically it's possible but legally you cannot. So based on the terms of use, you can use the Google Maps control (JavaScript API) or use another mobile control (which won't be compatible with WP8).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T13:14:16.070

There is an app in the WP Store, called gMaps, that uses Google Maps. Do you think that it's made with the JavaScript API?

# c# - 在 ShinobiCharts 中显示分层数据

> ID：15927283
> 
> 赞同：0
> 
> 时间：2013-04-10T13:30:08.183
> 
> 标签：c#, xamarin.ios, shinobi

使用分层数据，我想让用户能够选择一个项目来查看其相应的子项目。

例子 ：

```
Item A
-> SubItem1
-> SubItem2
-> SubItem3
Item B
-> SubItem4
-> SubItem5 
```

PieChart 显示 Item A 和 Item B。如果单击 Item1，PieChart 会重新加载并显示 SubItem1、SubItem2 和 SubItem3。如果单击 Item2，则重新加载 PieChart 并显示 SubItem4 和 SubItem5。

如何加载我的数据源？我应该为项目 A（项目 A、子项目 1、子项目 2、子项目 3）和项目 B 创建一个系列，还是应该为第一级（项目 A、项目 B）和每个子项目组创建一个？

有没有办法选择当前显示的系列？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T14:58:54.823

我认为有多种方法可以做到这一点，但这是一种非常简洁的方法。

您可以创建一个“智能”数据源，其方法可以更改它将提供给图表的数据。然后，您可以调用这些方法来响应图表交互（在图表的委托内）并重新加载图表。您的数据源界面可能如下所示：

```
public interface SmartDataSource
{
   void SetToShowDataForItem(Item level);
} 
```

您可以实现方法`OnToggledSelection`方法，当用户点击切片时，您可以获得与他们点击的切片相对应的项目，调用“SetToShowDataForItem”，然后像这样重新加载图表：

```
protected override void OnToggledSelection (ShinobiChart chart, SChartRadialDataPoint dataPoint, SChartRadialSeries series, PointF pixelPoint)
{
    Item item = myItems[dataPoint.index];
    SmartDataSource sDataSource = chart.DataSource as SmartDataSource;

    if (sDataSource != NULL) {
        sDataSource.SetToShowDataForItem(item); 
        chart.ReloadData();
        chart.RedrawChart();
    }
} 
```

与框架一起打包的演示也可能对您有所帮助。如果您查看本机 iOS 饼图演示，它们会执行与您尝试执行的操作类似的操作，尽管它们有一个辅助饼图。

祝你好运！

# macos - Magick++ 在 OS X 10.8 中没有链接

> ID：15927287
> 
> 赞同：1
> 
> 时间：2013-04-10T13:30:15.927
> 
> 标签：macos, imagemagick, osx-mountain-lion, graphicsmagick

当我尝试将我的应用程序与 ImageMagick++ 链接时出现此错误。

```
Undefined symbols for architecture x86_64:
"Magick::Image::read(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&)", referenced from:
... 
```

我正在使用最新的 OSX SDK (10.8)...并编译到 x86_64

我的库是这样编译的：

```
./configure --disable-osx-universal-binary --without-perl --enable-shared --disable-static --without-pango --with-magick-plus-plus --with-quantum-depth=8 
```

我将库添加到链接器中，但它有点忽略了“-lMagick++-Q8”

我使用“lipo -info”来仔细检查架构，它与 x86_64 匹配......那还能是什么？

这是完整的链接器命令：

```
Ld /Users/MyUser/Library/Developer/Xcode/DerivedData/MyProject-cxtelbltlfqoftfcngpqxhiczxqs/Build/Products/Debug/libMyLib1.dylib normal x86_64
cd /Users/MyUser/Desktop/AllProject/Project1/MyLib1
setenv MACOSX_DEPLOYMENT_TARGET 10.8
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch x86_64 -dynamiclib -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -L/Users/MyUser/Library/Developer/Xcode/DerivedData/MyProject-cxtelbltlfqoftfcngpqxhiczxqs/Build/Products/Debug -L/usr/local/lib -L/opt/local/lib -L/Users/MyUser/Desktop/AllProject/Project1/MyLib1/../../../../Library/Developer/Xcode/DerivedData/MyProject-cxtelbltlfqoftfcngpqxhiczxqs/Build/Products/Debug -L/usr/local/Cellar/glfw/2.7.7/lib -L/usr/local/Cellar/glew/1.9.0/lib -L/usr/local/Cellar/freetype/2.4.11/lib -L/usr/local/Cellar/imagemagick/6.8.4/lib -L/usr/local/Cellar/jpeg/8d/lib -L/usr/local/Cellar/libpng/1.5.14/lib -L/usr/local/Cellar/libtool/2.4.2/lib -F/Users/MyUser/Library/Developer/Xcode/DerivedData/MyProject-cxtelbltlfqoftfcngpqxhiczxqs/Build/Products/Debug -filelist /Users/MyUser/Library/Developer/Xcode/DerivedData/MyProject-cxtelbltlfqoftfcngpqxhiczxqs/Build/Intermediates/MyLib1.build/Debug/MyLib1.build/Objects-normal/x86_64/MyLib1.LinkFileList -install_name /usr/local/lib/libMyLib1.dylib -mmacosx-version-min=10.8 -stdlib=libc++ -lstdc++ -liconv -lbz2 -lz -framework OpenGL -llib_json -lSFTools -lavcodec -lavdevice -lavfilter -lavformat -lavutil -lpostproc -lGLEW.1.9 -lGLEW -lx264 -lGLEWmx.1.9 -lGLEWmx -lglfw -lpng15 -lpng15 -lfreetype -lfreetype -lltdl -ljpeg -lltdl -lMagick++-6.Q8 -lMagickCore-6.Q8 -lMagickWand-6.Q8 -lglfw -lswresample -lswscale -single_module -compatibility_version 1 -current_version 1 -o /Users/MyUser/Library/Developer/Xcode/DerivedData/MyProject-cxtelbltlfqoftfcngpqxhiczxqs/Build/Products/Debug/libMyLib1.dylib 
```

# python - 无法将 python 脚本结果重定向到 Windows 中的文本文件

> ID：15927290
> 
> 赞同：0
> 
> 时间：2013-04-10T13:30:30.613
> 
> 标签：python, windows, redirect, elasticsearch, pyes

这是我的python代码。我正在尝试在python中进行弹性搜索。

```
from pyes import *
from pyes.mappings import *
conn = ES('http://search.twitter.com/search.json?q=poplio')
conn.indices.create_index("test-index") 
```

我正在尝试本[教程](http://pyes.readthedocs.org/en/latest/manual/usage.html)

问题是当我尝试在 Windows 中运行这个 python 脚本时，我在 msdos 提示符上收到一条详细消息，我不知道它是错误还是其他任何东西。

所以我试图将该消息重定向到一个文本文件，但我在该文件中看不到任何内容。

这是我重定向脚本输出的方式

```
python script.py > log.txt 
```

但是 log.txt 是空的。

出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:34:31.200

它可能会将这些消息打印到 STDERR。尝试执行以下操作：

> python script.py > log.txt 2>&1

这也会将 STDERR 重定向到 STDOUT。您应该会看到这些消息。

# regex - 如何通过逗号分割字符串，忽略双引号中的逗号

> ID：15927291
> 
> 赞同：6
> 
> 时间：2013-04-10T13:30:34.973
> 
> 标签：regex, powershell, split

之前有人问过这个问题，但我一直在尝试在**powershell**中找到解决方案，但没有得到预期的结果。

```
$line = '1,2,"N",09/04/13,"P09042013ZSD(1,0)","ZSD"'
[string[]] $splitColumns = $line.Split('(,)(?=(?:[^"]|"[^"]*")*$)', [StringSplitOptions]'RemoveEmptyEntries') 
```

当我遍历我期望的拆分值时

```
1
2
"N"
09/04/13
"P09042013ZSD(1,0)"
"ZSD" 
```

但我越来越

```
1
2
N
09/04/13
P09042013ZSD
1
0
ZSD 
```

我已经使用带有 ExplicitCapture 集的[http://regexhero.net/tester/](http://regexhero.net/tester/) (Split) 测试了正则表达式，它返回了所需的结果。

**工作解决方案**

```
$RegexOptions = [System.Text.RegularExpressions.RegexOptions]
$csvSplit = '(,)(?=(?:[^"]|"[^"]*")*$)'

$splitColumns = [regex]::Split("StringHere", $csvSplit, $RegexOptions::ExplicitCapture) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T13:39:06.150

`[string].split()`方法不接受`regex`拆分，但只接受`[char[]]`or `[string[]]`。

你可以这样尝试：

```
 $line -split ',(?=(?:[^"]|"[^"]*")*$)' 
```

powershell`-split`接受`regex`分割文本

使用 .net 你可以这样做：

```
[regex]::Split( $line , ',(?=(?:[^"]|"[^"]*")*$)' ) 
```

# c++ - 如何更新 CMFCRibbonBar 中的最近文件列表

> ID：15927293
> 
> 赞同：0
> 
> 时间：2013-04-10T13:30:47.507
> 
> 标签：c++, mfc, recent-file-list

我们已将 VC++ VS2010 菜单应用程序替换为 CMFCRibbonBar。在较旧的菜单驱动版本中，我们创建了从 CRecentFileList 派生的自己的用户定义类。我们覆盖了 UodateMenu 方法以从最近的文件列表中添加和删除文件。现在我们正在使用 CMFCRibbonBar，我们在更新功能区中的“最近文件”列表时遇到了问题。每次我们打开另一个文件时，MRU 列表都会正确更新，但功能区中的最近文件列表保持不变。如果我们关闭应用程序，然后重新打开它，最近的文件列表会正确更新。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:04:14.900

由于您使用了自己的派生类`CRecentFileList`，因此对 MFC 的更改可能会影响它的调用方式 - 特别是如果您更改了`WINVER`项目中的定义。

功能区栏除了通过 MFC 框架路由文件/打开和文件/保存的命令之外没有任何其他作用，并且在每种情况下，它们最终都在`CWinApp::AddToRecentFileList()`.

现在，在早期版本的 MFC（例如 VS2008）中，该函数定义如下：

```
void CWinApp::AddToRecentFileList(LPCTSTR lpszPathName)
{
    ASSERT_VALID(this);
    ENSURE_ARG(lpszPathName != NULL);
    ASSERT(AfxIsValidString(lpszPathName));

    if (m_pRecentFileList != NULL)
        m_pRecentFileList->Add(lpszPathName);
} 
```

但是，从（我认为）VS2010 开始——当然是在 VS2012 中——这个函数现在看起来像这样：

```
void CWinApp::AddToRecentFileList(LPCTSTR lpszPathName)
{
    ASSERT_VALID(this);
    ENSURE_ARG(lpszPathName != NULL);
    ASSERT(AfxIsValidString(lpszPathName));

    if (m_pRecentFileList != NULL)
    {
#if (WINVER >= 0x0601)
        m_pRecentFileList->Add(lpszPathName, m_pszAppID);
#else
        m_pRecentFileList->Add(lpszPathName);
#endif
    }
} 
```

您可以看到有一个新的重载`CRecentFileList::Add()`可能会影响派生类中的逻辑。如果您使用调试器进入该新代码，您可以看到它正在使用 Windows 7 shell API 调用将最近的文档添加到跳转列表（除其他外），您可能仍然想要这样做。

无论如何，正如您发现重新加载应用程序正确显示更新的列表一样，我认为只有在列表更改后才需要自己重新加载列表。为此，您可以`CWinApp::AddToRecentFileList()`按如下方式覆盖：

```
void CYourApp::AddToRecentFileList(LPCTSTR lpszPathName)
{
    CWinApp::AddToRecentFileList(lpszPathName);
    m_pRecentFileList->ReadList();
} 
```

看看是否有帮助。

# blackberry - BlackBerry 6 上的 Dojo Mobile 1.8 - 单击 dojox.mobile.ListItem 只会选择项目，不会触发 moveTo 属性

> ID：15927298
> 
> 赞同：1
> 
> 时间：2013-04-10T13:31:02.560
> 
> 标签：blackberry, dojo, dojox.mobile

我使用[http://dojotoolkit.org/documentation/tutorials/1.8/mobile/tweetview/getting_started/](http://dojotoolkit.org/documentation/tutorials/1.8/mobile/tweetview/getting_started/)作为源代码，使用 dojo mobile 1.8 构建了我的第一个移动 webapp，它在 iO 和 Android 上运行良好。

在 Blackberry 6（设备 9300 - v 6.0.0.448，平台 6.6.0.124）上，它在默认操作系统浏览器中的行为与预期不同。当我将鼠标指针移到 dojox.mobile.ListItem 上并通过按下触摸板单击它时，不会触发“moveTo”属性（使用 BlackBerry 9300 在 Web 浏览器中打开链接或按下按钮的标准行为）在任何其他网站上）。

[我尝试了http://dojotoolkit.org/documentation/tutorials/1.8/mobile/tweetview/getting_started/demo/](http://demos.dojotoolkit.org/demos/mobileFileBrowser/demo.html)下 dojo 网站上提供的演示应用程序和[http://demos.dojotoolkit.org/demos/mobileFileBrowser](http://dojotoolkit.org/documentation/tutorials/1.8/mobile/tweetview/getting_started/demo/)下的演示[/demo.html](http://demos.dojotoolkit.org/demos/mobileFileBrowser/demo.html)两者都显示了与 BlackBerry 9300 相同的问题：单击一个项目仅选择该项目；您必须在选择项目后按键盘上的回车键才能触发 moveTo 属性。

**这是带有 dojo 1.8 的 BlackBerry 设备上预期的正常行为吗？如何通过单击而不是选择它并按回车来触发 moveTo 属性？**

我的网络应用程序的结构：

*   dojox.mobile.View (id="home" data-dojo-props="selected: true")

    *   dojox.mobile.Heading
    *   dojox.mobile.RoundRectList *dojox.mobile.ListItem (data-dojo-props="moveTo: 'inbox'") *dojox.mobile.ListItem (data-dojo-props="moveTo: 'search'")
*   dojox.mobile.View (id="inbox")

    *   dojox.mobile.Heading (data-dojo-props="back:'Home', moveTo:'home'">
    *   dojox.mobile.RoundRectList *dojox.mobile.ListItem *dojox.mobile.ListItem

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:24:02.903

是的，不幸的是，这是 Dojo 1.8 的限制：Dojo Mobile 不能同时处理触摸和鼠标事件（BB 触摸板实际上发送鼠标事件）。这将在 Dojo 1.9 中修复（目前处于测试阶段，版本应该在 5 月初可用）。

# css - Flex-grow 没有按预期工作（弹性项目没有我期望的宽度）

> ID：15927302
> 
> 赞同：2
> 
> 时间：2013-04-10T13:31:05.760
> 
> 标签：css, google-chrome, internet-explorer-10, flexbox

[JSFiddle](http://jsfiddle.net/JTEhW/1/)

我正在尝试使用`flex`CSS 属性将一组元素放入一个整洁的小盒子中。

它看起来正是我在 IE10 中想要的样子，但 Chrome 显示它非常不同。我基本上有：

*   容器
    *   选择框 ( `flex:5`) 的宽度应该足以显示`D`，但不会宽太多。
    *   文本输入 ( `flex:10`)，应占包含宽度的一半多一点
    *   确认按钮 ( `flex:6`) 应该足够宽以包含其文本，但仅此而已。

它在 IE 中运行良好，但在 Chrome 中，前两个元素各占宽度的 50%，使确认按钮从末尾脱落。

是我的 Flex 逻辑错误，还是 Chrome 搞砸了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T15:09:25.537

属性的`flex-grow`一部分`flex`（第一个数字）决定了当它们的组合大小小于它们的弹性容器时，额外的空间应该如何在弹性元素之间分配。额外的空间是这样划分的：`[flex-grow value] / [sum of flex-grow values for all siblings]`

*   文字输入：`10 / 21`
*   选择框：`5 / 21`
*   确认按钮：`6 / 21`

这个额外的空间被添加到元素沿主轴的大小以确定其最终大小。它不用于确定元素相对于其 flex 容器的大小，这就是设置为百分比时的 flex-basis 和/或宽度/高度值的用途。

当 flex 元素的组合大小大于其容器时，属性的`flex-shrink`一部分`flex`（第二个无单位值）开始发挥作用。它基本上是相反的`flex-grow`：比率是相同的，但溢出大小是从弹性项目中减去而不是添加。

Opera 在其 Flexbox 基础文章中对此属性进行了很好的解释： [http ://dev.opera.com/articles/view/flexbox-basics/](http://dev.opera.com/articles/view/flexbox-basics/)

对于您的特定问题，我可以通过将输入元素的宽度设置为一个非常小的值在 Chrome 中解决它：

[http://jsfiddle.net/JTEhW/2/](http://jsfiddle.net/JTEhW/2/)

```
input {margin:0; width: 20px} 
```

如果您添加不带前缀的属性，此解决方案似乎在 Opera 中不起作用。它可能在 Firefox 中也不起作用。它还使元素太小而无法用于非 Flexbox 浏览器。

# wordpress - 仅在发布新帖子时采取行动

> ID：15927303
> 
> 赞同：0
> 
> 时间：2013-04-10T13:31:06.727
> 
> 标签：wordpress

我正在为自己编写插件，当新帖子发布时我需要一些功能来启动。到目前为止，我发现[http://codex.wordpress.org/Post_Status_Transitions](http://codex.wordpress.org/Post_Status_Transitions)说每对状态都有操作。我想知道应该触发哪个动作功能。我尝试`new_to_publish`了（没有触发）和`draft_to_publish`（按预期工作）和（按预期工作 ）和（按预期`auto-draft_to_publish`工作。能够从全局 post 变量获取 ID（通过 get_permalink() 获取链接）但标题（在 post 变量中）设置为 Auto草稿而不是实际标题。所以问题是，我应该实际使用什么动作？我认为它应该是两者`auto-draft_to_publish`，`draft_to_publish`但我想知道如何获得实际标题而不是自动草稿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:04:46.203

使用 publish_post 和 publish_future_post 操作。

如您所料，这些会在发布帖子时触发，并且如果设置为未来日期，则会触发发布。

编辑：

为确保帖子正在发布，请检查修改日期和发布日期。

```
function publishing_post( $post_id ) {
  $post = get_post( $post_id );

    if( $post->post_modified <> $post->post_date ) return;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:31:28.530

我决定使用`auto-draft_to_publish`and `draft_to_publish`。第一次发生在发布全新帖子时，第二次发生在发布草稿时。起初我没有注意到两者都传递了 $post 变量（我第一次使用全局 $post 导致“自动草稿”标题）。这样我的问题就解决了。

# c# - 如何摆脱 SQL Server 2005 和 C# 应用程序中的死锁？

> ID：15927307
> 
> 赞同：4
> 
> 时间：2013-04-10T13:31:16.063
> 
> 标签：c#, sql-server, sql-server-2005, deadlock

我有一个用于 Windows 服务的 C# 代码，主要负责更新数据库中表中的记录，但我的日志中总是出现很多错误，所有错误都与资源死锁有关，

这是错误：

> System.Data.SqlClient.SqlException (0x80131904)：事务（进程 ID 57）与另一个进程在锁资源上死锁，并已被选为死锁受害者。重新运行事务。在 System.Data.SqlClient.SqlConnection.OnError（SqlException 异常，布尔 breakConnection，操作`1 wrapCloseInAction) at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady) at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite) at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery（TaskCompletionSource`1 完成，String methodName，Boolean sendToPipe，Int32 timeout，Boolean asyncWrite）在 System.Data.SqlClient.SqlCommand.ExecuteNonQuery 的 1 完成，Int32 超时，Task& 任务，布尔 asyncWrite） () 在 WheelTrackListener.DataAccess.SQLDBA.ExecuteNQuery(SqlCommand cmd, Boolean isShowError, ConnectionStringType CountryCode, String deviceID, Int32 retry, String functionCallName) ClientConnectionId:e45e4cf1-a113-46b7-b9b5-dc5ee8111406

现在，我想问一下，我可以试一试或检查资源是否被锁定？如果被锁定如何等待更新直到它被释放？

这是我当前的代码：

```
public static int updateVehicleLastPosition(string UTCDate, string UTC_Time, 
              string NS_Indicator, string Latitude, string EWIndicator, 
              string Longtitude, string Speed, string Processed, 
              string Near_ByLocation, string Near_ByLocation_AR, 
              string Gis_dataID, string address, string ar_adress, string Device_ID)
{
        SQLMethods sql = new SQLMethods();
        SqlCommand cmd = sql.cmdUpdateVehicleLastPosition(UTCDate, UTC_Time, NS_Indicator, Latitude, EWIndicator, Longtitude, Speed, Processed, Near_ByLocation, Near_ByLocation_AR, Gis_dataID, address, ar_adress, Device_ID);
        SQLDBA sqlDBA = new SQLDBA();
        return sqlDBA.ExecuteNQuery(cmd, true, ConnectionStringType.OMN, Device_ID, 10, "updateVehicleLastPosition");
}

public SqlCommand cmdUpdateVehicleLastPosition(string UTCDate, string UTC_Time, 
                      string NS_Indicator, string Latitude, string EWIndicator, 
                      string Longtitude, string Speed, string Processed, 
                      string Near_ByLocation, string Near_ByLocation_AR, 
                      string Gis_dataID, string address, string ar_adress, 
                      string Device_ID)
 {
        string sql = "UPDATE CTS_VehicleLastPosition SET [UTCDate] = @UTCDate, [UTC_Time] = @UTC_Time, [NS_Indicator] = @NS_Indicator, [Latitude] = @Latitude, [EWIndicator] = @EWIndicator, [Longtitude] = @Longtitude, [Speed] = @Speed, [Processed] = @Processed, [Near_ByLocation] = @Near_ByLocation, [Near_ByLocation_AR] = @Near_ByLocation_AR, [Gis_dataID] = @Gis_dataID, [address] = @address, [ar_adress] = @ar_adress WHERE [Device_ID] = @Device_ID";

        SqlCommand cmd = new SqlCommand(sql);
        cmd.Parameters.AddWithValue("@UTCDate", UTCDate);
        cmd.Parameters.AddWithValue("@UTC_Time", UTC_Time);
        cmd.Parameters.AddWithValue("@NS_Indicator", NS_Indicator);
        cmd.Parameters.AddWithValue("@Latitude", Latitude);
        cmd.Parameters.AddWithValue("@EWIndicator", EWIndicator);
        cmd.Parameters.AddWithValue("@Longtitude", Longtitude);
        cmd.Parameters.AddWithValue("@Speed", Speed);
        cmd.Parameters.AddWithValue("@Processed", Processed);
        cmd.Parameters.AddWithValue("@Near_ByLocation", Near_ByLocation);
        cmd.Parameters.AddWithValue("@Near_ByLocation_AR", Near_ByLocation_AR);
        cmd.Parameters.AddWithValue("@Gis_dataID", Gis_dataID);
        cmd.Parameters.AddWithValue("@address", address);
        cmd.Parameters.AddWithValue("@ar_adress", ar_adress);
        cmd.Parameters.AddWithValue("@Device_ID", Device_ID);
        return cmd;
}

public int ExecuteNQuery(SqlCommand cmd, bool isShowError, 
                    DataAccess.ConnectionStringType CountryCode, string deviceID, 
                    int retry, string functionCallName)
{
        ConnectionManager Connection = new ConnectionManager();
        try
        {
            Connection.GetConnection(CountryCode);
            if ((Connection.con == null) || (Connection.con.State != ConnectionState.Open))
            {
                if (retry <= 0) return 0;
                else return ExecuteNQuery(cmd, isShowError, CountryCode, deviceID, retry - 1, functionCallName);
            }
            int rowsAffected = 0;
            cmd.Connection = Connection.con;
            rowsAffected = cmd.ExecuteNonQuery();
            return rowsAffected;
        }
        catch (SqlException sqlexception)
        {
            if (isShowError)
                LEAMRALogger.Logger.WriteByDate("Logs\\SQLDBA\\" + functionCallName + "\\" + String.Format("{0:dd-MM-yyyy}", DateTime.Now), "SQLDBA", "SQLDBA_ERROR", "ExecuteNQuery Function: [deviceID: " + deviceID + " | retry: " + retry + "] " + sqlexception.ToString());
        }
        catch (Exception ex)
        {
            if (isShowError)
                LEAMRALogger.Logger.WriteByDate("Logs\\SQLDBA\\" + functionCallName + "\\" + String.Format("{0:dd-MM-yyyy}", DateTime.Now), "SQLDBA", "SQLDBA_ERROR", "ExecuteNQuery Function: [deviceID: " + deviceID + " | retry: " + retry + "] " + ex.ToString());
        }
        finally
        {
            if ((Connection.con != null) && (Connection.con.State == ConnectionState.Open))
            {
                Connection.con.Close();
                Connection.con.Dispose();
            }

            GC.Collect();
        }
        if (retry <= 0) return 0;
        else return ExecuteNQuery(cmd, isShowError, CountryCode, deviceID, retry - 1, functionCallName);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T13:42:19.210

我在您的代码中看不到任何明确的事务范围，因此我不知道在您进行更新时已经存在哪些锁；也不清楚您使用的是什么隔离级别。但在这种情况下最常见的情况是，在同一事务的早期，您对稍后尝试更新的同一行发出了选择（读锁）。这将导致锁升级，如果两个事务试图做同样的事情，可能会导致死锁：

1.  事务 A：带读锁的选择
2.  事务 B：带读锁的选择
3.  事务 A：更新 - 想要将其读锁升级为写锁，但必须等待事务 B 释放其读锁
4.  事务 B：更新 - 想要将其读锁升级为写锁，但必须等待事务 A 释放其读锁。

答对了！死锁，因为 A 和 B 都在等待对方释放他们现有的读锁，然后才能进行更新。

为了防止这种情况，您需要在选择中添加更新锁定提示，例如，

```
select * from table with (updlock) where blah blah 
```

这将确保您的选择使用写锁而不是读锁，这将防止并发事务之间的锁升级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:53:48.723

尽管可以检查锁，但您不能保证在发出下一条语句时，其他进程尚未取出锁。按优先顺序排列的可能解决方案：

1) 在事务中始终以相同的顺序引用表。

2）@ShellShock 的回答

3) 捕获死锁错误并处理。

# ejb - 在无状态会话 Bean 中使用全局变量有什么意义？

> ID：15927309
> 
> 赞同：7
> 
> 时间：2013-04-10T13:31:22.550
> 
> 标签：ejb, stateless-session-bean

我们知道无状态会话 Bean 不以任何方式保持状态。那么在无状态会话 Bean 中拥有一个全局变量有什么意义呢？为什么它没有在规范中被阻止（以避免不必要的混淆）？

如果拥有全局变量有任何实际好处，请用一段代码片段进行解释。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-02T12:00:18.890

A quote from the [EJB 3.1 spec](http://jcp.org/aboutJava/communityprocess/final/jsr318/index.html)

> 4.7 Stateless Session Beans
> 
> Stateless session beans are session beans whose instances have **no conversational** state. This means that all bean instances are equivalent when they are not involved in servicing a client-invoked method.
> 
> The term **“stateless” signifies that an instance has no state for a specific client**. However, the instance variables of the instance can contain the state across client-invoked method calls.
> 
> Examples of such state include an open database connection and an object reference to an enterprise bean object.

The emphasis is on **no conversational state**. They can have "other" state.

* * *

For example, I have used it to check if the load was spread equally over all instances in a cluster node:

```
@Stateless(name = "DemoPingSb")
@Remote(DemoPingSbIfc.class)
public class DemoPingSb implements Serializable, DemoPingSbIfc {
    private final AtomicInteger instancePingCount = new AtomicInteger(0);
    private final static AtomicInteger classPingCount = new AtomicInteger(0);

    public DemoPingSb() {
        super();
    }

    public String ping(final String s) {
        final int local = this.instancePingCount.incrementAndGet();
        final int global = classPingCount.incrementAndGet();

        System.out.println("INFO: local " + local + ", global " + global
                + ", s " + s);

        return s.toUpperCase();
    }
} 
```

and if there is enough load:

> 13:13:21,769 INFO [stdout] (http-localhost-127.0.0.1-8080-1) INFO: local 22, global 22, s hello
> 13:13:21,936 INFO [stdout] (http-localhost-127.0.0.1-8080-1) INFO: local 1, global 23, s hello

So there are some special cases where this feature might be useful.

Remarks

*   The spec talks about *instance variables*; the usage of a *static variables* is not covered there. So the code might not be correct regarding `classPingCount`
*   The usage of an `AtomicInteger` for `instancePingCount` could by replaced with `volatile int`, because (4.10.13)

> The container must ensure that only one thread can be executing a stateless or stateful session bean instance at any time.

*   A stateless session bean is never passivated (4.2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T04:04:29.010

显然，任何答案都必须说明无状态会话 EJB 不得在对 EJB 上的方法的调用之间*保持状态。*

与其在 EJB 中通过禁止实例变量采取强硬方法，不如允许 EJB 开发人员定义它们以用于中间存储。也许有中间值，并且正在调用内部私有方法；开发人员（可以说是懒惰的）可能只使用实例变量，而不是传递参数和/或创建要在短期内传递的“即时状态对象”。

此处的关键（由规范解决）是*，EJB 开发人员在任何情况下都不应假定任何此类字段将跨 EJB 的调用维护有意义的信息*。

# c# - 如何在mysql数据库行中添加数字？

> ID：15927311
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:31:30.690
> 
> 标签：c#, mysql, sum, rows

我的 MySql 数据库行中有一个价格数字列表。我是数据库新手，到目前为止我已经在 MySql 中尝试过`SELECT`、和命令`INSERT`，我的程序运行良好，直到遇到这种情况，我必须在我的数据库中添加价格数字。`DELETE``UPDATE`

我已经在网上对此进行了研究，其中大部分都是 php、.net、sql 形式，到目前为止我找不到 C# 编程语言。我找到了这个 php 代码，但我在 php 编程语言方面的经验较少，而且我的程序不在 php 中。无论如何，我使用 Windows Form C#。

php 代码来自：[如何将表中行的所有值相加？](http://www.daniweb.com/web-development/php/threads/138937/how-do-i-add-up-all-values-of-rows-in-a-table)

```
$query="Select points from members2";
    $result=mysql_query($query);
    $total=0;
    while($row=mysql_fetch_array($result))
    {
    $total=$total + $row['points'];
    }
    echo "Total is:" . $total; 
```

**编辑**

嗨，感谢您的所有帮助，我得到了正确的输出。

```
 string conn = "server=localhost;user=root;password='';database=cashieringdb;";
    MySqlConnection myconn = new MySqlConnection(conn);
    string sql = "select sum(price) from sales";
    MySqlDataAdapter da = new MySqlDataAdapter(sql, myconn);
    DataTable dt = new DataTable();
    da.Fill(dt);
    txtSum.Text = dt.Rows[0][0] + ""; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:35:58.067

您可以直接从数据库中执行此操作，而不必担心 PHP 或 C#。以下查询将返回点的总和。

```
 $query="Select sum(points) from members2"; 
```

# java - 在 Java 中每秒重复访问数组项

> ID：15927318
> 
> 赞同：0
> 
> 时间：2013-04-10T13:31:51.120
> 
> 标签：java, algorithm

我对 Java 很陌生。假设我有一个`ArrayList`包含 10 个字符串的项目，我要归档的是

1.  每秒打印每个项目。

2.  打印完所有项目后，会回到开头，重复打印

你能给我一些Java的想法吗

```
ArrayList<String> testAL = new ArrayList<String>();
Timer tickerTimer = new Timer();
TimerTask sendMessageTask = new TimerTask() {
    public void run() {

    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:41:58.817

您可以尝试以下方法：

```
try {
   for (int i = 0; i < testAL.size(); i++) {
     System.out.println(testAL.get(i);
     Thread.sleep(1000);
   }
} catch (InterruptedException e) {
   e.printStackTrace();
} 
```

`TimerTask`并从主运行你......你也有一个`Timer`可以`TimerTask`每X秒执行一次运行......

# jquery - jQuery Select OnChange 也显示预选

> ID：15927323
> 
> 赞同：0
> 
> 时间：2013-04-10T13:32:00.787
> 
> 标签：jquery, toggle, show-hide, option

我正在使用以下代码根据下拉菜单中选择的选项显示/隐藏特定的 div。它工作正常，但是我也希望使用相同的显示/隐藏方法与预选选项一起使用。

```
<script type="text/javascript">
$(document).ready(function(){
$('.statecontent').hide();

$('#select').change(function() {
        $('.statecontent').hide();
        $('.' + $(this).val()).show();    
    });
});
</script>

<select id="select" class="cms_dropdown">
<option value="#">- Select One -</option>
<option value="2">Lead</option>
<option value="3">Quote</option>
<option value="4">Confirmed</option>
</select>

<div class="statecontent 2">
Something
</div>

<div class="statecontent 2 3">
Something
</div>

<div class="statecontent 3 4">
Something
</div> 
```

目前加载页面时所有的div都设置为隐藏，需要手动更改pulldown来更新视图。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:36:04.400

[您可以在使用.triggerHandler()](http://api.jquery.com/triggerHandler/)注册事件处理程序后手动触发更改事件。

```
$(document).ready(function() {
    $('.statecontent').hide();

    $('#select').change(function() {
        $('.statecontent').hide();
        $('.' + $(this).val()).show();
    }).triggerHandler('change');
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/aqURY/)

# cakephp - cakePHP Paginator 相关表格

> ID：15927325
> 
> 赞同：0
> 
> 时间：2013-04-10T13:32:04.170
> 
> 标签：cakephp, paginator

关于 Paginator 的新手问题。我有一个带表格的数据库；国家、地区和属性 [以及更多表格] 现在，当我查看区域以显示按区域排序的属性时：例如 domain.com/regions/view/33 分页器计数并显示与区域相关的信息[总共 60 个区域]，我想让 Paginator 显示/计算区域 33 中的属性 [3 个属性] 的数量，如何完成？

这是我在 RegionsController.php 中的代码

```
public function index() {
    $this->Region->recursive = 0;
    $this->paginate = array('limit' => 10,'order' => 'Region.id ASC');
    $this->set('regions', $this->paginate());
}

public function view($id = null) {
    if (!$this->Region->exists($id)) {
        throw new NotFoundException(__('Invalid region'));
    }
    $options = array('conditions' => array('Region.' .$this->Region->primaryKey => $id));
    $this->set('region', $this->Region->find('first', $options));
    $this->paginate = array('limit' => 10,'order' => 'Region.id ASC');
    $this->set('regions', $this->paginate());
} 
```

这是在我的 view.ctp 中显示分页器的代码

```
<br />
<div class="regions view">
<b><center><?php echo nl2br(h($region['Region']['titletag'])); ?></center></b>
<div class="paging">
<?php
    echo $this->Paginator->prev('< ' . __('previous'), array(), null, array('class' => 'prev disabled'));
    echo $this->Paginator->numbers(array('separator' => ''));
    echo $this->Paginator->next(__('next') . ' >', array(), null, array('class' => 'next disabled'));
?>
</div> 
```

这是 Region.php 模型中的代码。

```
class Region extends AppModel {

/**
 * Display field
*
* @var string
*/
public $displayField = 'regionname';

/**
* belongsTo associations
*
* @var array
*/
public $belongsTo = array(
    'Country' => array(
        'className' => 'Country',
        'foreignKey' => 'country_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
);

/**
* hasMany associations
*
* @var array
*/
public $hasMany = array(
    'Property' => array(
        'className' => 'Property',
        'foreignKey' => 'region_id',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    )
); 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:00:29.607

使用[CakePHP 的 counterCache](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#belongsto)来保持每个区域的属性数量的恒定计数。这非常简单，CakePHP 会为您完成所有跟踪工作。

然后，您的`regions`表中将只有一个“property_count”字段，瞧 - 您可以按它排序，按它过滤......等等等等。

每次添加或删除属性时，CakePHP 都会自动为您更新计数。

# jquery - 使用 JavaScript 快速自动完成

> ID：15927329
> 
> 赞同：2
> 
> 时间：2013-04-10T13:32:14.077
> 
> 标签：jquery, autocomplete, jquery-autocomplete

我正在使用 jQuery UI 自动完成。但是打字速度很慢。例如，当我在 Google 搜索框上键入时，建议会显示在框的底部，而且速度非常快。谷歌的自动完成调用正在大约。80 毫秒（根据 Firebug 请求分析）。

我的服务在 80-100 毫秒的同一时间范围内提供建议，但是 jQuery 自动完成的实现非常慢，以至于在我写完整个单词后结果就出现在框下。

有人有更好的自动完成解决方案，比如谷歌的速度，或者有没有办法优化 jQuery UI 自动完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T13:51:16.470

从他们的文档中：

```
$( ".selector" ).autocomplete({ delay: 300 }); // default 
```

尝试将其更改为：

```
$( ".selector" ).autocomplete({ delay: 100 }); 
```

# drools - 创建一个 drool 以列出其他 drool 中的所有规则

> ID：15927331
> 
> 赞同：0
> 
> 时间：2013-04-10T13:32:22.390
> 
> 标签：drools

基本上我想知道是否有一种方法可以运行某些东西，它会进入目录下的每个drools文件（在一个有50个文件夹的文件夹中，会进入每个文件夹。）并从这些文件中提取某些数据所以我运行它，它可以访问 10 个 .DRL，每个里面有 5 个规则，其中有一个名称规则“blah blah”和一个 logger.info 行。在规则的实际作用中。

是否可以编写一些东西来进入所有这些文件并创建每个文件名的列表，然后在所有规则名称和记录器行之下？

我们有大约 500 个 .drl 文件，每个文件中包含 1 到 100 条规则。手动创建一个我们为每个文件准备的列表，会花费很多时间:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T23:49:29.510

Drools 可以做到这一点，但我认为它不是您想要使用的工具。Drools 用于对业务逻辑进行建模。你在这里并没有真正这样做。您可以使用 notepad++、grep、emacs 或其他海量文本操作工具手动提取数据。我也不会真的推荐。

完成这项任务的最佳工具可能是用 python 或 ruby​​ 编写的脚本。Ruby 是我在本例中选择的，因为它可以更好地集成正则表达式。一旦你有了这个脚本，你就可以在将来随意提取这些数据。脚本是可重用和可扩展的。如果您希望定期需要此信息或类似的信息，这使它们成为比大量文本编辑器的黑客和斜线更好的选择。

如果您的要求之一是每当您的流口水触发时都会执行此任务，那么在 Java 中进行此文本处理可能会更容易。根据您的要求，您可能希望让 Java 在 fireAllRules 事件之前或之后完成工作。

最后，drools 确实对自己非常了解。可以想象，当它运行时，你可以向 drools 询问很多此类信息。我自己从来没有这样做过。当我不得不处理像你描述的那样的任务时，我使用了一个脚本。

# asp.net - IIS 使用哪个用户访问文件

> ID：15927340
> 
> 赞同：1
> 
> 时间：2013-04-10T13:33:02.307
> 
> 标签：asp.net, windows, iis, permissions

我有一个 ASP.NET 应用程序，它使用项目目录中的一些文件（许可证、日志等）。我需要检查文件权限的方法。我写了这个：

```
public static bool IsCurrentUserHaveAccessToFile(string filePath,
                                                 FileSystemRights accessType)
{
    WindowsIdentity currentUser = WindowsIdentity.GetCurrent();
    WindowsPrincipal principal = new WindowsPrincipal(currentUser); 
    FileSecurity security = File.GetAccessControl(filePath);
    var rights = security.GetAccessRules(true, true, typeof(NTAccount));
    foreach (FileSystemAccessRule right in rights)
    {
        NTAccount ntAccount = right.IdentityReference as NTAccount;
        if (principal.IsInRole(ntAccount.Value) && 
            right.AccessControlType == AccessControlType.Deny && 
            right.FileSystemRights.Contains(accessType))
        {
            log.Debug(string.Format("Checking user {0} for access permissions {1} to file {2} - DENY", currentUser.Name, accessType, filePath));
             return false;
        }
    }
    log.Debug(string.Format("Checking user {0} for access permissions {1} to file {2} - ALLOW", currentUser.Name, accessType, filePath));
    return true;
} 
```

此方法获取当前用户，并且.. 好吧，您可以看到它:)

问题是：真的是用来访问文件的用户吗？如果 IIS 使用与当前用户不同的其他用户，我如何以编程方式获取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:48:06.797

取决于您的代码托管在哪里。[这](http://imar.spaanjaars.com/287/how-do-i-determine-the-security-account-that-iis-uses-to-run-my-web-site)可能会有所帮助。

# .net - 为什么在写入 NetworkStream 时出现 IOException 和 SocketException？

> ID：15927341
> 
> 赞同：0
> 
> 时间：2013-04-10T13:33:02.983
> 
> 标签：.net, c++-cli, socket.io, ioexception, system.net.sockets

我有一个将我连接到软件的 dll，我们称之为 driver1。我有一个必须连接到 driver1 并查询其状态的 java 程序。dll 为我提供了连接和查询状态的功能。

我编写了一个 c++ 程序，我将 dll 作为参考，我可以从中使用 dll。我可以连接到 driver1 并查询它的状态。然后我创建了一个 TcpListener，我的 Java 程序可以作为客户端连接它。我只是接受 C++ 中的客户端并等待从 Java 程序接收数据。

我从 Java 端发送数据（例如表示 dll 的“连接”方法的命令）。该命令从 c++ 端很好地接收，它解析并调用 dll 的指定函数。但是，当我想将 dll 函数的返回值写入 NetworkStream 以将返回值发送到 Java 端时，我收到一个异常消息：

> System.IO.IOException：IOException：无法将数据写入传输连接。尝试对不是套接字的东西进行操作。

c++ 端代码类似于来自 msdn 站点的 TcpListener 示例：

```
#using <System.dll>

using namespace System;
using namespace System::IO;
using namespace System::Net;
using namespace System::Net::Sockets;
using namespace System::Text;
using namespace System::Threading;
void main()
{
    try
    {

        // Set the TcpListener on port 1124.
        Int32 port = 1124;
        IPAddress^ localAddr = IPAddress::Parse( "127.0.0.1" );

        // TcpListener* server = new TcpListener(port);
        TcpListener^ server = gcnew TcpListener( localAddr,port );

        // Start listening for client requests.
        server->Start();

        // Buffer for reading data
        array<Byte>^bytes = gcnew array<Byte>(256);
        String^ data = nullptr;

        Console::Write( "Waiting for a connection... " );

        // Perform a blocking call to accept requests.
        TcpClient^ client = server->AcceptTcpClient();
        Console::WriteLine( "Connected!" );
        data = nullptr;

        while(true) 
        {
            // Get a stream Object* for reading and writing
            NetworkStream^ stream = client->GetStream();
            Int32 i;

            // Loop to receive all the data sent by the client.
            while ( i = stream->Read( bytes, 0, bytes->Length ) )
            {

                // Translate data bytes to a ASCII String*.
                data = Text::Encoding::ASCII->GetString( bytes, 0, i );
                Console::WriteLine( "Received: {0}", data );

                // Process the data sent by the client.
                /*
                 *
                 * Here I parse the data, understand what method of the dll to call.
                 * Call it and make a String^ from the return value.
                 *
                 *
                 */
                array<Byte>^msg = Text::Encoding::ASCII->GetBytes( returnValue );

                // Send back a response.
                stream->Write( msg, 0, msg->Length );
                Console::WriteLine( "Sent: {0}", data );
            }
        }

        // Shutdown and end connection
        client->Close();
     }
     catch ( SocketException^ e ) 
     {
         Console::WriteLine( "SocketException: {0}", e );
     }

     Console::WriteLine( "\nHit enter to continue..." );
     Console::Read();
} 
```

我在我打电话的那一行得到了例外：

> 流->写（）

关于正在发生的事情有什么想法吗？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:38:42.350

我怀疑连接由于某种原因而终止。我认为如果您使用 DOS 命令检查连接的状态，`NETSTAT -A`您会发现连接已关闭或处于挂起状态。很难说是连接的哪一端（客户端或服务器）造成了问题。

`TCPSocket`此外，在发送数据之前尝试调试以检查其状态。可能是一端过早关闭连接....

# html - 在屏幕上隐藏列

> ID：15927342
> 
> 赞同：0
> 
> 时间：2013-04-10T13:33:03.360
> 
> 标签：html, asp.net-mvc, xhtml

```
<input id="SubmitCommentsForBOQ" type="button" value="Comments" onclick="ShowCommentBox('<%: detailItem.ItemId %>')" /> 
```

显示评论按钮...我想将其更改为图像，单击时会执行相同的操作...

就像是..`<img src="../Images/Bubble.png" />`

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:41:46.747

像这样？

```
<img src="../Images/Bubble.png" onclick="ShowCommentBox('<%: detailItem.ItemId %>')"/> 
```

还是我不明白？

# java - 按下按钮后，Android 模拟器屏幕变黑

> ID：15927348
> 
> 赞同：1
> 
> 时间：2013-04-10T13:33:15.073
> 
> 标签：java, android, xml, emulation, manifest

我在android中创建了一个小项目，在模拟器上加载我的应用程序后，我按下一个按钮，它只显示一个空白屏幕。我不知道它为什么这样做。欢迎任何帮助。

这是我的主要课程：

```
 import android.os.Bundle;
     import android.app.Activity;
     import android.content.Intent;
     import android.view.Menu;
     import android.view.View;
     import android.view.View.OnClickListener;
     import android.widget.Button;

    public class MainActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);         
          Button Button1=(Button)findViewById(R.id.Button1);
          Button1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                    Intent i = new Intent(MainActivity.this,ActivityList.class);
                    startActivity(i);
            }}
            );
          }
} 
```

这是我的 XML 清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.sportsfitnessapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity android:name=".ActivityList" />
        <activity
            android:name="com.example.sportsfitnessapp.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我真的需要帮助。谢谢。

这是主要的 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/widget35"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    tools:context=".Screen1Activity" >

    <TextView
        android:id="@+id/Menutxt"
        android:layout_width="300dp"
        android:layout_height="65dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:background="#ffffffff"
        android:gravity="center"
        android:text="@string/Menu"
        android:textColor="#ffff0033"
        android:textSize="50sp"
        android:textStyle="bold|italic"
        android:typeface="serif" />

    <Button
        android:id="@+id/Button1"
        android:layout_width="300dp"
        android:layout_height="55dp"
        android:layout_alignLeft="@+id/Menutxt"
        android:layout_below="@+id/Menutxt"
        android:layout_marginTop="20dp"
        android:gravity="center"
        android:text="@string/Choose_Activity"
        android:textColor="#ffffffff"
        android:textSize="25sp"
        android:typeface="serif"
        android:onClick="Button1"/>

    <Button
        android:id="@+id/Button5"
        android:layout_width="300dp"
        android:layout_height="55dp"
        android:layout_alignLeft="@+id/Button1"
        android:layout_below="@+id/Button1"
        android:gravity="center"
        android:text="@string/Graphical_Records"
        android:textColor="#ffffffff"
        android:textSize="25sp"
        android:typeface="serif" />

    <Button
        android:id="@+id/Button4"
        android:layout_width="300dp"
        android:layout_height="55dp"
        android:layout_alignLeft="@+id/Button5"
        android:layout_below="@+id/Button5"
        android:gravity="center"
        android:text="@string/Training_Schedule"
        android:textColor="#ffffffff"
        android:textSize="25sp"
        android:typeface="serif" />

    <Button
        android:id="@+id/Button2"
        android:layout_width="300dp"
        android:layout_height="55dp"
        android:layout_alignLeft="@+id/Button4"
        android:layout_below="@+id/Button4"
        android:gravity="center"
        android:text="@string/Weight_Tracker"
        android:textColor="#ffffffff"
        android:textSize="25sp"
        android:typeface="serif" />

    <Button
        android:id="@+id/Button3"
        android:layout_width="300dp"
        android:layout_height="55dp"
        android:layout_alignLeft="@+id/Button2"
        android:layout_below="@+id/Button2"
        android:gravity="center"
        android:text="@string/Heart_Rate_Monitor"
        android:textColor="#ffffffff"
        android:textSize="25sp"
        android:typeface="serif" />

</RelativeLayout> 
```

这是 ActivityList 类：

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class ActivityList extends Activity{

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }
                public void onClick(View v) {
                Intent i = new Intent();
                setContentView(R.layout.activities_list);
                startActivity(i); 
            }
        {;
    }

} 
```

这是活动列表 XML：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:id="@+id/widget0"
    android:background="@drawable/background" >

<Button
    android:id="@+id/Treadmill"
    android:layout_width="300dp"
    android:layout_height="45dp"
    android:layout_alignLeft="@+id/Weights"
    android:layout_below="@+id/ActTxt"
    android:gravity="center"
    android:text="@string/Treadmill"
    android:textColor="#ffffffff"
    android:textSize="25sp"
    android:typeface="serif" />

<Button
    android:id="@+id/Aerobics"
    android:layout_width="300dp"
    android:layout_height="45dp"
    android:layout_alignLeft="@+id/Treadmill"
    android:layout_below="@+id/Treadmill"
    android:gravity="center"
    android:text="@string/Aerobic_Steps"
    android:textColor="#ffffffff"
    android:textSize="25sp"
    android:typeface="serif" />

<Button
    android:id="@+id/Cycling"
    android:layout_width="300dp"
    android:layout_height="45dp"
    android:layout_alignLeft="@+id/Aerobics"
    android:layout_below="@+id/Aerobics"
    android:gravity="center"
    android:text="@string/Cycling"
    android:textColor="#ffffffff"
    android:textSize="25sp"
    android:typeface="serif" />

<Button
    android:id="@+id/Swimming"
    android:layout_width="300dp"
    android:layout_height="45dp"
    android:layout_alignLeft="@+id/Cycling"
    android:layout_below="@+id/Cycling"
    android:gravity="center"
    android:text="@string/Swimming"
    android:textColor="#ffffffff"
    android:textSize="25sp"
    android:typeface="serif" />

<Button
    android:id="@+id/Rowing"
    android:layout_width="300dp"
    android:layout_height="45dp"
    android:layout_alignLeft="@+id/Swimming"
    android:layout_below="@+id/Swimming"
    android:gravity="center"
    android:text="@string/Rowing"
    android:textColor="#ffffffff"
    android:textSize="25sp"
    android:typeface="serif" />

<TextView
    android:id="@+id/ActTxt"
    android:layout_width="300dp"
    android:layout_height="55dp"
    android:layout_alignLeft="@+id/Treadmill"
    android:layout_alignParentTop="true"
    android:layout_marginTop="16dp"
    android:background="#ffffffff"
    android:gravity="center"
    android:text="@string/Activities"
    android:textColor="#ffff0033"
    android:textSize="50sp"
    android:typeface="serif" />

<Button
    android:id="@+id/ETrainer"
    android:layout_width="300dp"
    android:layout_height="45dp"
    android:layout_alignLeft="@+id/Rowing"
    android:layout_below="@+id/Rowing"
    android:gravity="center"
    android:text="@string/Elliptical_Trainer"
    android:textColor="#ffffffff"
    android:textSize="25sp"
    android:typeface="serif" />

<Button
    android:id="@+id/Weights"
    android:layout_width="300dp"
    android:layout_height="45dp"
    android:layout_below="@+id/ETrainer"
    android:layout_centerHorizontal="true"
    android:gravity="center"
    android:text="@string/Free_Weights"
    android:textColor="#ffffffff"
    android:textSize="25sp"
    android:typeface="serif" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:38:10.550

你开始一个新的活动，`ActivityList`通过代码：

```
Intent i = new Intent(MainActivity.this,ActivityList.class);
startActivity(i); 
```

而且我很确定您还没有这样做：

```
setContentView(R.layout.layout_for_your_activity_list); 
```

在你的`onCreate(Bundle savedInstanceState)`.

例子：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_list); 
} 
```

* * *

实际上你有代码，但你需要移动这条线

```
setContentView(R.layout.activities_list); 
```

进入

```
onCreate(Bundle savedInstanceState) 
```

就像我给你的例子一样。

*请*遵守约定。

```
Button Button1=(Button)findViewById(R.id.Button1); 
```

应该：

```
Button buttonOne = (Button) findViewById(R.id.button_one); 
```

使用缩进。最丑的一个`ActivityList`：

```
{;
} 
```

立即将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:06:37.713

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
       setContentView(R.layout.activities_list);
} 
```

在 ActivityList 中使用上面的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-14T05:34:48.980

检查您是否正在使用任何权限。如果是，请将它们包含在清单文件中。例如 -

`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>`

我也有同样的问题。该解决方案修复了它。不仅添加所需的权限，还要检查您的 xml 文件中是否有任何严重的警告，这也是您问题的原因。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-10T13:42:07.727

Yuo 已为 button1.OnClick 分配了 onClick 侦听器，您正在开始新的活动，即“ActivityList.class”。因此，当您单击该按钮时，将创建新活动并显示该活动中的内容。如果“ActivityList”中没有内容，将显示空屏幕。

# log4net - 如何为 log4net 中的多行日志条目添加缩进？

> ID：15927351
> 
> 赞同：6
> 
> 时间：2013-04-10T13:33:28.113
> 
> 标签：log4net, multiline

我知道[这个问题](https://stackoverflow.com/questions/4669590/displaying-a-log-per-line-for-a-multiline-text)并且我同意答案，但是我可以使用 log4net 执行以下操作吗？

而不是：

```
2013-04-09 12:54:47.093 INFO Main: Line 1 Line 1 Line 1
Line 2 Line 2 Line 2 
Line 3 Line 3 Line 3
2013-04-09 12:54:47.093 INFO Main: Line 1 Line 1 Line 1
Line 2 Line 2 Line 2 
Line 3 Line 3 Line 3 
```

我能有......吗：

```
2013-04-09 12:54:47.093 INFO Main: Line 1 Line 1 Line 1
                                   Line 2 Line 2 Line 2 
                                   Line 3 Line 3 Line 3
2013-04-09 12:54:47.093 INFO Main: Line 1 Line 1 Line 1
                                   Line 2 Line 2 Line 2 
                                   Line 3 Line 3 Line 3 
```

是否已经支持或者我需要编写自定义附加程序或自定义布局？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T08:31:26.143

我讨厌回答我自己的问题，但由于我自己开发了答案，所以我想与你分享。

我扩展了 log4net。该解决方案继承自 PatternLayout，因此所有 PatternLayout 功能都可用。此外，还有一个新的模式**%indentation**可用。要获得上例中的日志记录，只需使用：

```
<conversionPattern value="%date - %indentation%message%newline%exception"/> 
```

当格式化异常时，log4net 代码很古怪（或者我不明白）。因此，在这种情况下，您应该始终将 %exception 放入模式中，因为我硬编码了“IgnoresException = false”。使用 IgnoresException = true，log4net 完全忽略任何格式，并且您会松动缩进。

使用下面的代码来扩展 log4net：

```
/// <summary>
/// Converts %indentation to string
/// </summary>
public class IndentationPatternConverter : PatternConverter
{
    protected override void Convert(TextWriter writer, object state)
    {
        // do nothing - %indentation is used for indentation, so nothing should be written
    }
}

public class IndentationPatternLayout : PatternLayout
{
    private PatternConverter m_head;

    public override void Format(TextWriter writer, LoggingEvent loggingEvent)
    {
        if (writer == null)
        {
            throw new ArgumentNullException("writer");
        }
        if (loggingEvent == null)
        {
            throw new ArgumentNullException("loggingEvent");
        }

        PatternConverter c = m_head;

        IndentationWriter indentationWriter = new IndentationWriter(writer);
        // loop through the chain of pattern converters
        while (c != null)
        {
            if (c is IndentationPatternConverter)
            {
                indentationWriter.SetIndentation();
            }
            c.Format(indentationWriter, loggingEvent);
            c = c.Next;
        }
        indentationWriter.Finish();
    }

    override public void ActivateOptions()
    {
        PatternParser patternParser = CreatePatternParser(ConversionPattern);

        ConverterInfo converterInfo = new ConverterInfo()
        {
            Name = "indentation",
            Type = typeof(IndentationPatternConverter)
        };

        patternParser.PatternConverters.Add("indentation", converterInfo);
        m_head = patternParser.Parse();

        PatternConverter curConverter = m_head;
        this.IgnoresException = false;
    }
}

public class IndentationWriter : TextWriter
{
    TextWriter writer;
    int indentation = 0;
    List<string> lines = new List<string>();

    public IndentationWriter(TextWriter writer)
    {
        this.writer = writer;
    }
    public override Encoding Encoding
    {
        get { return writer.Encoding; }
    }

    public override void Write(string value)
    {
        string[] values = value.Split(new string[] { Environment.NewLine }, StringSplitOptions.None);
        for (int i = 0; i < values.Length; i++)
        {
            if (i > 0) values[i] = Environment.NewLine + values[i];
        }
        lines.AddRange(values);
    }

    public void Finish()
    {
        for (int i = 0; i < lines.Count; i++)
        {
            string line = lines[i];
            if (i < lines.Count - 1) line = lines[i].Replace(Environment.NewLine, Environment.NewLine + new string(' ', indentation));
            writer.Write(line);
        }
        lines.Clear();
    }
    public override void WriteLine(string value)
    {
        this.Write(value + Environment.NewLine);
    }

    public void SetIndentation()
    {
        foreach (string line in lines)
        {
            indentation += line.Length;
        }
    }
} 
```

# ravendb - 单击 (+) 添加 SQL 复制表会引发异常

> ID：15927356
> 
> 赞同：0
> 
> 时间：2013-04-10T13:33:49.860
> 
> 标签：ravendb, database-replication

尝试添加 SQL 复制表或尝试保存 SQL 复制时出现以下异常：

```
Client side exception:
System.NullReferenceException: [Arg_NullReferenceException]
Arguments: 
Debugging resource strings are unavailable. Often the key and arguments provide       sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&Version=5.0.20125.00&File=mscorlib.dll&Key=Arg_NullReferenceException
   at Raven.Studio.Models.SqlReplicationSettingsSectionModel.<get_AddTable>b__e()
   at Microsoft.Expression.Interactivity.Core.ActionCommand.Execute(Object parameter)
   at System.Windows.Controls.Primitives.ButtonBase.ExecuteCommand()
   at System.Windows.Controls.Primitives.ButtonBase.OnClick()
   at System.Windows.Controls.Button.OnClick()
   at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(MouseButtonEventArgs e)
   at System.Windows.Controls.Control.OnMouseLeftButtonUp(Control ctrl, EventArgs e)
   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName, UInt32 flags) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:54:03.170

这似乎是RavenDB 问题跟踪器中的[问题 1002 ，该问题已在构建 2324 中修复。您应该使用最新的稳定构建，即 2330。](http://issues.hibernatingrhinos.com/issue/RavenDB-1002)

今后，如果您在使用 RavenDB 时遇到明显的错误，尤其是不稳定的构建，请直接向[问题跟踪系统](http://issues.hibernatingrhinos.com/)报告。

当然，如果是您自己的代码不确定是否是您正在寻求解决方法的错误的原因，那么这些类型的问题肯定适合 StackOverflow。

谢谢。

# php - 验证错误消息未正确显示

> ID：15927359
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:33:52.453
> 
> 标签：php, jquery, jquery-validate, charisma

我不知道该怎么解释。所以只要看看下面的图片。 ![Jquery 验证错误。](https://i.stack.imgur.com/K9IID.png)

我正在使用 charishma Admin 主题。从这里下载：[https ://github.com/usmanhalalit/charisma](https://github.com/usmanhalalit/charisma)

我正在使用 jquery.validate.1.11.1.js。您的任何努力将不胜感激。提前致谢..！！更新：

我已经看到添加的元素是标签。它似乎适用于文本框和选择，但对于复选框和单选来说，它像上面一样显示，因为这些元素的大小小于文本框和选择。看到下面的代码生成：

```
<div class="control-group">
  <label class="control-label">Checkboxes</label>
  <div class="controls">
    <label class="checkbox inline">
      <div class="checker" id="uniform-tnc">
        <span>
          <input type="checkbox" value="option1" name="tnc" id="tnc" style="opacity: 0;" class="alert-error">
          <label for="tnc" class="alert-error">Agree to our terms and conditions to register with us.</label>
        </span>
      </div> Option 1
    </label>
  </div>
</div> 
```

这适用于除复选框和单选之外的所有其他输入类型。对于这些它应该如下所示：

```
<div class="control-group">
  <label class="control-label">Checkboxes</label>
  <div class="controls">
    <label class="checkbox inline">
      <div class="checker" id="uniform-tnc">
        <span>
          <input type="checkbox" value="option1" name="tnc" id="tnc" style="opacity: 0;" class="alert-error">
        </span>
      </div> Option 1
      <label for="tnc" class="alert-error">Agree to our terms and conditions to register with us.</label>
    </label>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:18:58.713

我在您的 OP 中看不到任何 jQuery Validate 插件的代码。我建议您为您的问题创建一个*完整*而*简洁*的演示，并在您的 OP 中显示该演示。

默认情况下，jQuery Validate 插件只是在有错误的`label`元素之后立即插入一个元素`input`。在`radio`and`checkbox`类型的情况下，在组中的*第一个*`label`之后立即插入。

 *由于这`label`越来越拥挤，有三种方法可以解决这个问题......

1) 编辑布局的 HTML 和 CSS，以便为`label`.

`label`2) 编辑 jQuery Validate 插件的回调函数/选项以在元素为 a`radio`或时放置不同的位置`checkbox`。

3) 1 和 2 的某种组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T06:03:04.460

我通过添加`errorPlacement`参数来验证得到了解决方案。以下是解决方案：

```
errorPlacement: function(error, element) {
  if (element.attr("name") == "tnc")
    error.appendTo($('#lbl-tnc'));
  else
    error.insertAfter(element);
} 
```

我将 HTML 更改如下：

```
<label class="checkbox inline" for="tnc" id="lbl-tnc">
  <input type="checkbox" name="tnc" id="tnc">I Agree to <a href="#">Terms & Conditions</a>
</label> 
```*

# php - 作曲家更新是原子的吗？

> ID：15927361
> 
> 赞同：6
> 
> 时间：2013-04-10T13:33:56.560
> 
> 标签：php, composer-php

小故事：我可以`composer update`在运行的站点上运行而不必担心首先更新哪些依赖项吗？

更长的故事：我试图弄清楚 composer 的实际更新过程是否是原子的。

当所有内容都下载并检查OK时，依赖项是否一次更新/激活，或者每个依赖项在下载后立即更新？如果一个更新在中间失败了怎么办？

找不到相关的文档，所以我希望有人能帮忙！如果记录在案，我会很高兴有一个链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-12-18T14:13:24.227

不，`composer update`也不`composer install`是原子的。

对于每个依赖项`composer update`将：

*   删除过时的依赖项（使您的应用程序处于非工作状态）
*   下载新的依赖项（当应用程序仍然损坏时）
*   安装新版本

如果下载因任何原因（例如配额限制、连接失败等）失败，则应用程序将处于无法运行的状态。

### 更好的解决方案（易于设置，不是原子的，停机时间短）

一种解决方案是将供应商文件夹和作曲家文件复制到新目录中，运行`composer update`或`composer install`在此目录中，然后将旧供应商目录切换为新目录。

即使这个解决方案更快，它也不是原子的，并且可以/将导致失败的请求。确实： - 切换两个目录不能是原子的 - 由于 PHP 应用程序分布在多个文件中，请求可以从旧版本的文件开始，然后包含新版本，这可能会导致未定义的行为。

但是，这对于大多数 Web 应用程序来说是可以接受的。

### 解决方案 2 - 启动第二个实例（不是原子的，无停机时间）

唯一的解决方案是复制整个应用程序，对其进行更新，然后更改您的 Web 服务器配置以使用更新后的应用程序。Web 服务器可以以原子方式重新加载其配置。

这个解决方案并不完全是原子的，因为一些用户将使用旧版本完成他们的请求，而其他一些用户将使用新版本开始一个新请求。在短时间内，应用程序的两个版本将共存。

### 解决方案 3 - 堆栈连接（原子，小延迟）

第三种解决方案是使用第一种解决方案，并告诉您的 Web 服务器在短暂的停机时间内堆叠请求。

这意味着： - 告诉您的 Web 服务器堆叠连接 - 等待现有请求完成（< 200 毫秒） - 切换应用程序目录（< 10 毫秒） - 实现堆叠连接

停机期间的请求将延迟约 200 毫秒，这在大多数情况下是可以接受的。

您可以在此处找到有关堆叠请求的更多信息：[https ://serverfault.com/questions/654780/how-to-suspend-nginx-requests-during-backend-upgrades](https://serverfault.com/questions/654780/how-to-suspend-nginx-requests-during-backend-upgrades)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:36:42.453

我不知道它是否是原子的，但是，如果出现故障，作曲家通常会知道是什么。所以你至少可以验证。

还有：

```
composer update --dry-run 
```

但是你*永远不能*在一个正在运行`composer update`的站点上运行。您需要停止站点，进行更新，然后重新启动站点。

# windows-phone-8 - UserExtendedProperties ANID2 跨设备是否一致？

> ID：15927362
> 
> 赞同：2
> 
> 时间：2013-04-10T13:33:57.607
> 
> 标签：windows-phone-8, windows-phone, identity

我处于需要确定应用程序是否由同一用户使用但在不同的 Windows Phone 设备上的情况。换句话说，我需要某种与所有 WP8 设备上的应用程序一致的用户 ID。

ANID2 的属性是否`UserExtendedProperties`适合此目的？如果没有，我有什么选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-30T12:44:06.723

**ANID2 绑定到**Windows **Live Account Id**和**Publisher GUID**。因此，来自**不同发布者的应用程序将获得不同的 ANID2 值**。

此链接深入了解更多细节 - [ANID2](http://social.msdn.microsoft.com/Forums/wpapps/en-us/7e265aed-1719-4158-bc98-5d985e694c4c/userextendedproperties-anid-anid2-changes-in-wp8?forum=wpdevelop)

提炼 ：

**以下情况也适用于 Windows Phone 8。**

WP7 中的格式是这样的（我删掉了几个字符）：**`A=E32ACBXXXXXXXXX3B337B68CFFFFFFFF&E=d59&W=1`**

在 WP7 中，有必要解析 A= 到 &E= 之后的值，因为其他值可能会随着时间而变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T13:58:22.157

是的 ANID2 本质上是 Windows Live 帐户 ID，这将满足您的要求。这不会因设备而异，请注意 ANID2 仅在 WP8 和 WP8 应用程序中可用。

# gruntjs - gruntjs：在多任务配置中为所有目标使用具有动态映射的文件一次

> ID：15927368
> 
> 赞同：3
> 
> 时间：2013-04-10T13:34:04.843
> 
> 标签：gruntjs

在我的多任务中，我想对**文件**配置属性使用动态映射

```
files: [
    {
      expand: true,     // Enable dynamic expansion.
      cwd: 'lib/',      // Src matches are relative to this path.
      src: ['**/*.js'], // Actual pattern(s) to match.
      dest: 'build/',   // Destination path prefix.
    },
  ] 
```

是否可以为所有目标指定一次“文件”属性（并且它们将被扩展）以避免冗余？所有目标都使用相同的文件结构和相同的文件

就像是：

```
taskName: {
  target1: { prop1:1 },
  target2: { prop1:2 },
  files: [
    {
      expand: true,     // Enable dynamic expansion.
      cwd: 'li...
      ...
    }
  ]
} 
```

我可以在“选项”属性中写入文件，但随后我需要手动调用该文件的扩展函数。

谢谢

[编辑]

用于检测：

```
grunt.registerMultiTask('taskname', 'im looking for files', function () {
  grunt.log.writeflags(this.files, 'this.files');
  console.log('this.files'.yellow, this.files); //double check ;)
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:34:06.840

我发现的解决方案是使用**grunt.file.expandMapping**方法以编程方式生成**文件**数组

*咕噜声配置*

```
'taskname': {
    target1: { prop1:1 },
    target2: { prop1:2 },

    options: {
      defProperty: "defValue",
      dFiles: { //default files object
        cwd: 'lib/',      // Src matches are relative to this path.
        src: ['**/*.js'], // Actual pattern(s) to match.
        dest: 'build/'   // Destination path prefix.
        //any other property if you need (e.g. flatten, ext)
      }
} 
```

*任务名称.js*

```
grunt.registerMultiTask('taskname', 'im looking for files', function () {

    var curTask = this,
        opts = curTask.options();

    if (!curTask.files.length && 'dFiles' in opts) {
      var df = opts.dFiles;

      curTask.files = grunt.file.expandMapping(df.src, df.dest , df);
    }

    console.log('this.files: '.yellow, this.files);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:05:22.130

只需将`files`属性存储在**变量**中并在需要的地方使用它：

```
var myFiles = [
    {
      expand: true,     // Enable dynamic expansion.
      cwd: 'lib/',      // Src matches are relative to this path.
      src: ['**/*.js'], // Actual pattern(s) to match.
      dest: 'build/',   // Destination path prefix.
    }
  ]; 

taskName: {
  target1: { 
     prop1:1,
     files: myFiles
  },
  target2: { 
     prop1:2,
     files: myFiles
  }
} 
```

如果这仍然太多，您可以通过更改配置完全通过 javascript 完成：

```
var tasknameConfig = grunt.config('taskname');
var target;

for (target in tasknameConfig) {
  tasknameConfig[target].files = myFiles;
}
grunt.config('taskname', tasknameConfig); 
```

# javascript - _.debounce 有什么作用？

> ID：15927371
> 
> 赞同：67
> 
> 时间：2013-04-10T13:34:10.377
> 
> 标签：javascript, underscore.js

我一直在做的一个项目使用 _.debounce()。

[关于 debounce 的 Underscore JS 文档](http://underscorejs.org/#debounce)内容如下：

> **去抖** `_.debounce(function, wait, [immediate])`
> 
> 创建并返回传递函数的新去抖动版本，该版本将推迟其执行，直到自上次调用以来**等待毫秒过去后。**

**这显然假设任何想知道做什么的人`debounce()`都已经知道“去抖动”是什么意思。**

debounce实际上是做什么的？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-04-10T13:35:39.510

基本上它会限制调用，因此如果在短时间内多次调用它，则只会调用一个实例。

你为什么要使用它？

像 window.onresize 这样的事件会快速连续触发多次。如果您需要对新位置进行大量计算，则不希望多次触发计算。您只想在用户完成调整大小事件时触发它。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-10T13:36:48.060

underscore.js[源码](https://github.com/documentcloud/underscore/blob/7342e289aa9d91c5aacfb3662ea56e7a6d081200/underscore.js#L683)中的描述：

> 返回一个函数，只要它继续被调用，就不会被触发。该函数将在停止调用 N 毫秒后被调用。如果传递了 'immediate'，则在前沿触发函数，而不是在尾部触发。

自己编码：

```
_.debounce = function(func, wait, immediate) {
  var timeout, result;
  return function() {
    var context = this, args = arguments;
    var later = function() {
      timeout = null;
      if (!immediate) result = func.apply(context, args);
    };
    var callNow = immediate && !timeout;
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
    if (callNow) result = func.apply(context, args);
    return result;
  };
}; 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-06-29T01:33:48.127

我写了一篇名为*Demystifying Debounce in JavaScript*的文章，我在其中准确解释[了 debounce 函数的工作原理](http://john-dugan.com/javascript-debounce/)并包含一个演示。

debounce 函数提供了一种“限制”函数执行的方法。它们通常用于函数绑定到快速连续触发的事件的情况。通常会看到在窗口调整大小和滚动时使用 debounce 函数。

无论是 Underscores 还是其他 JavaScript 库，所有的 debounce 函数都建立在 JavaScript 的原生`setTimeout`方法之上。因此，在深入了解 debounce 函数的作用之前，最好彻底[了解`WindowTimers`](https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setTimeout)（链接到 MDN）。

此外，您需要对范围和闭包有一个很好的理解。尽管尺寸相对较小，但去抖动函数实际上采用了一些非常先进的 JavaScript 概念！

话虽如此，下面是我在上面引用的帖子中解释和演示的基本去抖动功能。

**成品**

```
// Create JD Object
// ----------------
var JD = {};

// Debounce Method
// ---------------
JD.debounce = function(func, wait, immediate) {
    var timeout;
    return function() {
        var context = this,
            args = arguments;
        var later = function() {
            timeout = null;
            if ( !immediate ) {
                func.apply(context, args);
            }
        };
        var callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait || 200);
        if ( callNow ) { 
            func.apply(context, args);
        }
    };
}; 
```

**说明**

```
// Create JD Object
// ----------------
/*
    It's a good idea to attach helper methods like `debounce` to your own 
    custom object. That way, you don't pollute the global space by 
    attaching methods to the `window` object and potentially run in to
    conflicts.
*/
var JD = {};

// Debounce Method
// ---------------
/*
    Return a function, that, as long as it continues to be invoked, will
    not be triggered. The function will be called after it stops being 
    called for `wait` milliseconds. If `immediate` is passed, trigger the 
    function on the leading edge, instead of the trailing.
*/
JD.debounce = function(func, wait, immediate) {
    /*
        Declare a variable named `timeout` variable that we will later use 
        to store the *timeout ID returned by the `setTimeout` function.

        *When setTimeout is called, it retuns a numeric ID. This unique ID
        can be used in conjunction with JavaScript's `clearTimeout` method 
        to prevent the code passed in the first argument of the `setTimout`
        function from being called. Note, this prevention will only occur
        if `clearTimeout` is called before the specified number of 
        milliseconds passed in the second argument of setTimeout have been
        met.
    */
    var timeout;

    /*
        Return an anomymous function that has access to the `func`
        argument of our `debounce` method through the process of closure.
    */
    return function() {

        /*
            1) Assign `this` to a variable named `context` so that the 
               `func` argument passed to our `debounce` method can be 
               called in the proper context.

            2) Assign all *arugments passed in the `func` argument of our
               `debounce` method to a variable named `args`.

            *JavaScript natively makes all arguments passed to a function
            accessible inside of the function in an array-like variable 
            named `arguments`. Assinging `arguments` to `args` combines 
            all arguments passed in the `func` argument of our `debounce` 
            method in a single variable.
        */
        var context = this,   /* 1 */
            args = arguments; /* 2 */

        /*
            Assign an anonymous function to a variable named `later`.
            This function will be passed in the first argument of the
            `setTimeout` function below.
        */
        var later = function() {

            /*      
                When the `later` function is called, remove the numeric ID 
                that was assigned to it by the `setTimeout` function.

                Note, by the time the `later` function is called, the
                `setTimeout` function will have returned a numeric ID to 
                the `timeout` variable. That numeric ID is removed by 
                assiging `null` to `timeout`.
            */
            timeout = null;

            /*
                If the boolean value passed in the `immediate` argument 
                of our `debouce` method is falsy, then invoke the 
                function passed in the `func` argument of our `debouce`
                method using JavaScript's *`apply` method.

                *The `apply` method allows you to call a function in an
                explicit context. The first argument defines what `this`
                should be. The second argument is passed as an array 
                containing all the arguments that should be passed to 
                `func` when it is called. Previously, we assigned `this` 
                to the `context` variable, and we assigned all arguments 
                passed in `func` to the `args` variable.
            */
            if ( !immediate ) {
                func.apply(context, args);
            }
        };

        /*
            If the value passed in the `immediate` argument of our 
            `debounce` method is truthy and the value assigned to `timeout`
            is falsy, then assign `true` to the `callNow` variable.
            Otherwise, assign `false` to the `callNow` variable.
        */
        var callNow = immediate && !timeout;

        /*
            As long as the event that our `debounce` method is bound to is 
            still firing within the `wait` period, remove the numerical ID  
            (returned to the `timeout` vaiable by `setTimeout`) from 
            JavaScript's execution queue. This prevents the function passed 
            in the `setTimeout` function from being invoked.

            Remember, the `debounce` method is intended for use on events
            that rapidly fire, ie: a window resize or scroll. The *first* 
            time the event fires, the `timeout` variable has been declared, 
            but no value has been assigned to it - it is `undefined`. 
            Therefore, nothing is removed from JavaScript's execution queue 
            because nothing has been placed in the queue - there is nothing 
            to clear.

            Below, the `timeout` variable is assigned the numerical ID 
            returned by the `setTimeout` function. So long as *subsequent* 
            events are fired before the `wait` is met, `timeout` will be 
            cleared, resulting in the function passed in the `setTimeout` 
            function being removed from the execution queue. As soon as the 
            `wait` is met, the function passed in the `setTimeout` function 
            will execute.
        */
        clearTimeout(timeout);

        /*
            Assign a `setTimout` function to the `timeout` variable we 
            previously declared. Pass the function assigned to the `later` 
            variable to the `setTimeout` function, along with the numerical 
            value assigned to the `wait` argument in our `debounce` method. 
            If no value is passed to the `wait` argument in our `debounce` 
            method, pass a value of 200 milliseconds to the `setTimeout` 
            function.  
        */
        timeout = setTimeout(later, wait || 200);

        /*
            Typically, you want the function passed in the `func` argument
            of our `debounce` method to execute once *after* the `wait` 
            period has been met for the event that our `debounce` method is 
            bound to (the trailing side). However, if you want the function 
            to execute once *before* the event has finished (on the leading 
            side), you can pass `true` in the `immediate` argument of our 
            `debounce` method.

            If `true` is passed in the `immediate` argument of our 
            `debounce` method, the value assigned to the `callNow` variable 
            declared above will be `true` only after the *first* time the 
            event that our `debounce` method is bound to has fired.

            After the first time the event is fired, the `timeout` variable
            will contain a falsey value. Therfore, the result of the 
            expression that gets assigned to the `callNow` variable is 
            `true` and the function passed in the `func` argument of our
            `debounce` method is exected in the line of code below.

            Every subsequent time the event that our `debounce` method is 
            bound to fires within the `wait` period, the `timeout` variable 
            holds the numerical ID returned from the `setTimout` function 
            assigned to it when the previous event was fired, and the 
            `debounce` method was executed.

            This means that for all subsequent events within the `wait`
            period, the `timeout` variable holds a truthy value, and the
            result of the expression that gets assigned to the `callNow`
            variable is `false`. Therefore, the function passed in the 
            `func` argument of our `debounce` method will not be executed.  

            Lastly, when the `wait` period is met and the `later` function
            that is passed in the `setTimeout` function executes, the 
            result is that it just assigns `null` to the `timeout` 
            variable. The `func` argument passed in our `debounce` method 
            will not be executed because the `if` condition inside the 
            `later` function fails. 
        */
        if ( callNow ) { 
            func.apply(context, args);
        }
    };
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-03T14:06:53.067

它保持函数的执行，直到超时到期。这是为了避免在不需要时连续执行功能。请注意，因为 underscore.debounce() 依赖于复杂的代码。大多数时候，函数内的简单“if”语句比去抖动要快得多。您可以实现一个计数器，仅在每 N 次迭代中执行方法，或者超时，检查是否至少经过了一定的毫秒数。

# java - 在android中一段时间 后直播冻结？

> ID：15927372
> 
> 赞同：2
> 
> 时间：2013-04-10T13:34:18.580
> 
> 标签：java, android, http-live-streaming, live-streaming

我正在使用 vitamio lib 在我的应用程序中播放在线视频。但是当我使用此链接播放时

```
path = "http://94.242.221.141/hls/a-lo/stream140.m3u8"; 
```

我可以正常工作一两分钟。在该视频sopts/freeze之后。

我的 logcat 输出是（当视频停止时）

```
04-10 18:57:11.972: I/Vitamio(7341): Info (901, 120)
04-10 18:57:11.972: D/Vitamio(7341): onInfo: (901, 120)
04-10 18:57:15.144: D/Vitamio[Player](7341): [http @ 0x5f233e80] HTTP error 404 Not Found
04-10 18:57:15.152: I/Vitamio(7341): Info (901, 38)
04-10 18:57:15.152: D/Vitamio(7341): onInfo: (901, 38)
04-10 18:57:16.066: D/Vitamio[Player](7341): [http @ 0x5f233e80] HTTP error 404 Not Found
04-10 18:57:18.808: D/Vitamio[Player](7341): playback complete (0, 0)
04-10 18:57:19.011: D/Vitamio(7341): onCompletion 
```

其他链接工作正常。任何人都可以告诉任何解决方案。提前致谢

编辑：

我找到了一个应用程序

```
 https://play.google.com/store/apps/details?id=com.livetv.russia&feature=related_apps#?t=W251bGwsMSwxLDEwOSwiY29tLmxpdmV0di5ydXNzaWEiXQ.. 
```

在这个应用程序俄罗斯今天直播电视正在播放。我在谷歌上搜索并找到了现场直播的链接

```
http://ixinji.com/iblog/2012/08/29/online-live-tv-list-for-apple-tv%EF%BC%8Ciphone-and-ipad/
http://livetvstreaming.ucoz.com/news/russian_complete/2013-03-23-5618
http://westsat.net.ua/archive/index.php/t-2894-p-2.html
http://www.tvdata.eu.pn/index.php/database/exportsimpletv
http://www.tvdata.eu.pn/index.php/database/exportvlc 
```

我在用

```
http://94.242.221.141/hls/a-lo/stream140.m3u8 
```

用于直播，但一两分钟后我的应用程序停止工作或视频冻结。

# jquery - 用于扩展细节问题的 jQuery 动画

> ID：15927380
> 
> 赞同：0
> 
> 时间：2013-04-10T13:34:44.250
> 
> 标签：jquery, animation

好的，所以我仍在尝试掌握 jQuery。

我几乎得到它！我需要关闭按钮开始关闭，但因为它在同一个容器中，它也会启动其他动画。有什么建议么？

到目前为止，这是我的代码的 jsfiddle 链接[http://jsfiddle.net/w39Bb/5/](http://jsfiddle.net/w39Bb/5/)

```
$('.outer-shell').click( function () {
    $(this).animate({
        height: '580px'
    }, 750).addClass('selected');
    $(this).find('.inner-shell').animate({
        height: '550px'
    }, 750);
    $(this).find('.details-click').animate({
        width: "0"
    }, 400).hide(100);
    $(this).find('.image-left-small , .image-right-small').animate({
        opacity: 0
    }).hide(400);
    $(this).find('.image-left-large, .image-right-large').animate({
        opacity: 1
    }).show(0);
    $(this).find('.close').animate({
        opacity: 1
    }, 1000).show();
});

$('h1.close').click(function () {
    $('.outer-shell').animate({
        height: '235px'
    }, 200).removeClass('selected');
    $('.inner-shell').animate({
        height: '229px'
    }, 200);
    $('.details-click').animate({
        width: '299px'
    }, 100).show();
    $('.image-left-small , .image-right-small').animate({
        opacity: 1
    }, 100).show();
    $('.image-left-large, .image-right-large').animate({
        opacity: 0
    }, 400).hide();
});

$('.outer-shell').hover( function () {
  $(this).toggleClass('hover');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:19:46.623

不确定这是否是您要实现的目标，但是..添加 stopPropagation ？

```
$('h1.close').click(function (e) {
    e.stopPropagation();
    // The rest is the same :) 
```

[http://jsfiddle.net/w39Bb/6/](http://jsfiddle.net/w39Bb/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:41:59.903

如果您隐藏不想使用的其他 div 是否对您有用`$('#div-to-hide').hide()`

# mysql - 表的 Mysql 不正确的密钥文件（在索引表上）

> ID：15927387
> 
> 赞同：0
> 
> 时间：2013-04-10T13:35:00.343
> 
> 标签：mysql, file, key

在一个位于服务器上的mysql数据库中，我每天做一个备份，压缩数据库的文件夹，位于“C:\xampp\mysql\data”。我通常在本地机器上解压数据库，用于开发和测试。我从来没有遇到过这样做的问题。

直到昨天我还不得不索引一些表，因为查询非常慢。然后，当我在本地机器上解压缩文件夹时，我使用 Navicat 浏览数据库，当我尝试打开任何索引表时，我收到此错误：

> “表的密钥文件不正确”。

已经尝试使用“修复”，但效果不佳。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:38:56.463

使用 sql dump 进行备份，而不是直接复制数据文件。它通常会阻止您出现诸如此类的问题...但是如果您的表中有太多记录，则从转储导入可能会更长。

# database - 数据库设计...如何表示多态类型

> ID：15927390
> 
> 赞同：0
> 
> 时间：2013-04-10T13:35:06.260
> 
> 标签：database, foreign-keys, polymorphism

作为对 ZZ-bb 的回应，我会尽力澄清，尽管我认为 ZZ 已经回答了这个问题（谢谢 ZZ-bb）......

我想在数据库中表示剪贴板内容。作为用户的想法可以将项目添加到剪贴板，稍后再回来，仍然可以访问他们的剪贴板。

用户可以将图像、文件、文本块等存储到剪贴板。

这就是我的想法

*   1 个用户到 1 个剪贴板
*   1 个剪贴板到多个`cb_items`

现在问题来了。我想`cb_item`描述从字符、一些文本到图像 url 或文件位置的任何内容，也许是 glob，不确定。

在这个阶段，我可以只描述一个`cb_item`包含条目可能需要的所有可能列的表格行，或者我可以以某种方式创建一个“多态”FK ...

要做到这一点，我想。

*   1`cb_item`比1`type`
*   1`cb_item`比1`typed_cb_item`

然后使用类型来确定要查找的表`typed_cb_item`。

例如

*   `cb_item #1 => { IMAGE_TYPE, 1 }`
*   `cb_item #2 => { FILE_GLOB, 1 }`

因为`item #1`我会`typed_cb_item` `id`在`cb_image_item`表格中查找并获取信息，因为`item #2`我会`typed_cb_item` `id`在`cb_fileglob_item`表格中查找并获取信息。

**编辑**- 表格可能看起来像....

```
cb_item_tbl
-----------
   item_id (PK)
   user_id (FK referenceing user)
   type_id
   typed_item_id >------------+ - - like "typed_cb_item" above 
                              |
cb_image_item_tbl             |
-----------------             |
   img_item_id (PK) <---------+  }
   url (string)               |  }
                              |  } OR based on type_id
cb_file_item_tbl              |  }
----------------              |  }
   file_item_id (PK) <--------+  }
   file_name       
   file_size etc etc
   maybe a glob 
```

就软件而言，这可以正常工作，但`typed_item_id`不能是数据库中的真正外键，所以我不能使用数据库的引用完整性 - 必须通过 s/w 强制执行（尽管 s/w obv不应该破坏它！）并使查询更加复杂。

有没有人有什么建议？我认为这种“多态”FK 的想法可能不是最好的方法，但我喜欢我可以使用它来处理只有与该项目相关的列的项目表。

提前为任何意见或建议干杯...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:20:42.480

我不太遵循您的表格结构或最终目标，但您可以消除中间人 aka `clipboard`。只需制作一个或多个`clipboard_item`表：每种类型一个或类似类型的一个通用表。

例如，您可以有一个`clipboard_item_text`表：

*   `id`, INT AUTO_INCREMENT
*   `user`, INT(?), FK 到`user`/`owner`
*   `item`， 文本

现在，您将始终在（任何剪贴板表）`item`和它的`owner`. （如果您只是将父表的`id`ish 值插入到子表中，就像您对任何子表一样。）

如果您需要根据 限制`items`每个用户的数量`item` `type`，您可以使用应用程序代码（或者可能使用数据库中的触发器）来执行此操作：`items`在插入新用户之前计算每个用户的数量。

每个用户`clipboard`现在都是一个虚拟用户：`item`任何表中具有相同`owner`值的每个用户都属于该`users`剪贴板。做`VIEW`或不做，这取决于你。

# c++ - OpenGL - 没有光 C++ 的平面着色

> ID：15927391
> 
> 赞同：0
> 
> 时间：2013-04-10T13:35:12.260
> 
> 标签：c++, opengl

我已经实现了一个网格。线框渲染（三角形）没问题，但现在我想应用平面着色渲染，我得到的是一个没有体积的纯白色图形。

这是我使用的：

```
for(int i=0; i<mesh->nt; i++) {
    glShadeModel(GL_FLAT);
    glBegin(GL_TRIANGLES);

    int i0 = mesh->triangles[i].vInds[0];
    int i1 = mesh->triangles[i].vInds[1];
    int i2 = mesh->triangles[i].vInds[2];

    Vector n1 = GetNormal(mesh->vertices[i0], mesh->vertices[i1], mesh-                  >vertices[i2]);

    glNormal3dv((double *)&n1);

    glVertex3dv((double *)&mesh->vertices[i0]);
    glVertex3dv((double *)&mesh->vertices[i1]);
    glVertex3dv((double *)&mesh->vertices[i2]);

    glEnd();
} 
```

我计算了三角形的法线，但没有任何效果。任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T13:38:49.600

如果您没有启用灯光/照明，三角形将不会被着色。就那么简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:35:38.547

也许这样更好？

```
glEnable(GL_LIGHTING);
glShadeModel(GL_FLAT);
glBegin(GL_TRIANGLES); // <-- start triangles before the loop, much faster

for(int i=0; i<mesh->nt; i++) 
{
    int i0 = mesh->triangles[i].vInds[0];
    int i1 = mesh->triangles[i].vInds[1];
    int i2 = mesh->triangles[i].vInds[2];

    Vector n1 = GetNormal(mesh->vertices[i0], 
                          mesh->vertices[i1], 
                          mesh->vertices[i2]);

    glNormal3dv((double *)&n1);

    glVertex3dv((double *)&mesh->vertices[i0]);
    glVertex3dv((double *)&mesh->vertices[i1]);
    glVertex3dv((double *)&mesh->vertices[i2]);
}   
glEnd(); 
```

# c# - 按钮内容与字符串的比较

> ID：15927399
> 
> 赞同：1
> 
> 时间：2013-04-10T13:35:30.397
> 
> 标签：c#, wpf, string

我正在做一个包含虚拟键盘的 wpf 应用程序，当我点击 CapsLock 按钮时，我有这个通知：

`Possibility of comparing references involuntary for a comparison of values​​, cast the left hand side to type 'string'`

在这一行：

```
if (btnVK_A.Content == "a")
     btnVK_A.Content = "A";
else
     btnVK_A.Content = "a"; 
```

我做了转换`btnVK_A.Content`为字符串，但通知仍然出现。那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T13:58:01.003

尝试这个 ：

```
if ((btnVK_A.Content as string) == "a") 
```

**`as`关键字和之间的区别`ToString()`：**

两者用于不同的目的。任何对象的`ToString`方法都应该返回该对象的字符串表示形式。转换是完全不同的，并且`as`关键字执行条件转换，如前所述。`as`关键字基本上是说“如果该对象是这种类型，请给我该对象的这种类型的引用”，而说`ToString`“给我该对象的字符串表示形式”。在某些情况下，结果可能是相同的，但不应将两者视为可互换的，因为正如我所说，它们的存在目的不同。如果您的意图是强制转换，那么您应该始终使用强制转换，而不是`ToString`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:44:44.250

尝试首先通过强制转换来接受使用 'var' 的密钥。然后检查你想要什么。

var b=(string)btnVK_A.Content;

if (b == "a") btnVK_A.Content = "A"; 否则 btnVK_A.Content = "a";

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:47:12.467

您是否尝试使用 btnVK_A.Content.ToString() 或（字符串）btnVK_A.Content？由于 Button Content 属性是对象类型，如果您在比较之前不强制转换或将其转换为字符串，编译器会给您一个警告。

# java - Retrotranslator Maven 插件无法识别另一个项目上的反向移植包

> ID：15927405
> 
> 赞同：1
> 
> 时间：2013-04-10T13:35:42.637
> 
> 标签：java, maven, plugins, backport

我正在尝试使用 Retrotranslator Maven 插件来促进在 JDK1.4 之前的环境中进行开发。我有一个名为 xyz-core 的 maven 模块，其中有我想用作通用后端包的包 br.com.company.xyz.core.backport。

问题是：插件找不到包。如果我将该包复制到这个项目，它就可以工作。但是我需要一个单独的工件上的 backport 包，因为它将在许多其他项目中使用。

这是pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>br.com.company.xyz</groupId>
        <artifactId>xyz-parent</artifactId>
        <version>0.0.1-SNAPSHOT</version>
    </parent>

    <artifactId>xyz-test</artifactId>

    <dependencies>

        <dependency>
            <groupId>br.com.company.xyz</groupId>
            <artifactId>xyz-core</artifactId>
            <version>${project.version}</version>
        </dependency>

    </dependencies>

    <build>
        <plugins>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>retrotranslator-maven-plugin</artifactId>
                <version>1.0-alpha-4</version>
                <configuration>
                    <classifier>ME</classifier>
                    <target>1.1</target>
                    <verbose>true</verbose>
                    <verify>true</verify>
                    <verifyClasspath>
                        <element>${basedir}/lib/rt.jar</element>
                    </verifyClasspath>
                    <backport>br.com.company.xyz.core.backport</backport>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>translate-project</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

        </plugins>
    </build>

</project> 
```

# c# - 如何传递两个参数参数 int 和 double 以便调用方法可以工作？

> ID：15927407
> 
> 赞同：1
> 
> 时间：2013-04-10T13:35:51.547
> 
> 标签：c#, reflection

我有一个关于升c反射的问题。这是我的问题

1) 定义`MyClass`具有不同访问器（私有、公共、受保护）的不同字段的类以及具有不同参数集和返回类型的方法

2）定义`MyTestClass`哪些包含方法，执行以下操作：打印指定类名的方法名，其中方法包含字符串参数，类名是字符串值。调用类的某个方法，并将参数放入方法，参数应从文本文件中读取（类名和方法名是方法的参数

我想在我的类中调用 method5，但它需要两个参数，当我尝试时，我得到一个不匹配计数参数错误，我怎样才能传递两个参数`int`，`double`以便调用方法起作用？

```
Inside params.txt there is

10 1.5 
```

我想从文本文件中读取，下面是我的完整代码任何想法或修改我将不胜感激

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using System.IO;

class MyClass
{
    private int i;
    public double d;
    private string s;
    public bool b;
    public MyClass()
    {
        i = 1;
        d = 0.1;
        s = "1";
        b = true;
    }
    public void Method0()
    {
        Console.WriteLine("Method with no arguments, no return value.");
    }
    private int Method1(int arg0)
    {
        Console.WriteLine("The method returns int, int gets.");
        return arg0;
    }
    private double Method2(int arg0, double arg1)
    {
        Console.WriteLine("Method returns a double, taking int and double.");
        return arg1 * arg0;
    }
    public bool Method3(string arg0)
    {
        Console.WriteLine("Method returns a bool, accepts string");
        return arg0.Length>10;
    }
    public bool Method3(string arg0,string arg1)
    {
        Console.WriteLine("The method takes two arguments string.");
        return arg0 == arg1;
    }
    public static char Method4(string arg0)
    {
        Console.WriteLine("Method returns a char, accepts string. .");
        Console.WriteLine(arg0);
        return arg0[1];
    }
    public void Method5(int arg0, double arg1)
    {
        Console.WriteLine("arg1 = {0} arg2 = {1}.",arg0,arg1);
    }
}

class MyTestClass
{
    public static string[] GetMethodsWithStrParams(string className)
    {
        var t = Type.GetType(className);
        List<string> res = new List<string>();
        foreach (var method in t.GetMethods())
        {
            foreach (var param in method.GetParameters())
            {
                if (param.ParameterType == typeof(string))
                {
                    res.Add(method.Name);
                    break;
                }
            }
        }
        return res.ToArray();
    }
    public static void InvokeMethod(string className, string methodName, string fileName)
    {
        var t = Type.GetType(className);
        using (StreamReader f = new StreamReader("params.txt"))
        {
            t.GetMethod(methodName).Invoke(t.GetConstructor(Type.EmptyTypes).Invoke(new object[] { }),
                                           new object[] { f.ReadLine(), f.ReadLine()+"1" });
        }
    }
}

class Program
{
    static void Main(string[] args)
    {
        string name = "MyClass";

        foreach (var x in MyTestClass.GetMethodsWithStrParams(name))
        {
            Console.WriteLine(x);
        }

        MyTestClass.InvokeMethod("MyClass", "Method5", "params.txt");

        Console.ReadKey(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:00:18.353

您需要将文件中的所有字符串转换为方法中使用的各自类型：

```
using System;
using System.Linq;
using System.IO;

class MyInvokedClass
{
  public void MyInvokedMethod(int arg0, double arg1)
  {
    Console.WriteLine("arg1 = {0} arg2 = {1}.", arg0, arg1);
  }
}

class Program
{
  public static void InvokeMethod(string className, string methodName, string fileName)
  {
    string[] contents = File.ReadAllLines(fileName);

    var t = Type.GetType(className);
    var m = t.GetMethod(methodName);

    var parametertypes = m.GetParameters().Select(p => p.ParameterType);

    var parameters = parametertypes.Select((type, index) => Convert.ChangeType(contents[index], type)).ToArray();
    var instance = Activator.CreateInstance(t);

    m.Invoke(instance, parameters);
  }

  static void Main()
  {
    InvokeMethod("MyInvokedClass", "MyInvokedMethod", "params.txt");

    Console.ReadKey(true);
  }
} 
```

文件内容如下：

```
42
12.34 
```

（请注意，您可能必须将 . 替换为程序文化使用的小数点才能正常工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:45:35.667

由于这是您上一个问题的延续，因此您需要解决以下几个问题：

1）我不认为你想让 params.txt 只包含参数`Method5`，否则当你尝试另一种方法时你的应用程序将失败

2）您需要将文件中的行解析为对象数组。

我会做类似的事情

参数.txt：

```
Method5: 1 1.5
Method4: some string
... 
```

我建议使用制表符之类的东西作为分隔符或竖线 (|) 或任何您不希望在有效参数中使用的东西，否则您将无法拥有包含空格的字符串。

现在您的代码需要找到被调用方法的行并将其拆分为多个部分以获取参数。例如，`method5`您现在将有 2 个字符串表示参数：“1”和“1.5”

接下来您要做的是将这些字符串转换为该方法调用的正确类型的对象（即 int 和 double）。

一种方法是将参数类型编码到 params.txt 中：

```
Method5L: 1:int 1.5:float 
```

但这很容易出错，并且当您更改方法时它很容易不同步，因此更好的方法是通过反射获取参数类型，即来自`MethodInfo`表示方法的对象：

```
var parameters = method.GetParameters(); 
```

最后一步是进行转换 - 您可以使用类之类的方法`int.Parse`，`double.Parse`甚至更好`Convert`，例如：`Convert.ChangeType("1.5", typeof(float))`

```
var args = new objects[parameters.Length]; 
var argStrings = {"1", "1.5"}; // obviously, you must get these from params.txt, not hardcode it
int idx = 0;
foreach (var param in parameters) {
    args[idx] = Convert.ChangeType(argStrings[idx], param.ParameterType);
    idx++;
} 
```

现在，您可以通过 将`args`数组作为参数列表提供给您的方法`Invoke`。

就是这样，现在您只需对其进行编码。

# java - 从 Java 运行导入数据库 DOS 命令

> ID：15927411
> 
> 赞同：0
> 
> 时间：2013-04-10T13:36:09.593
> 
> 标签：java, import, dos

我正在尝试从这样的 Java 程序运行数据库导入命令：

```
public class Test {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        String[] str = {"imp ASKUL/askul@ASKDB file=askdbinstall.dmp log=askul.log fromuser=askul touser=ASKUL full=N ignore=Y grants=Y indexes=Y;"};
        Process pro;
        try {
            pro = Runtime.getRuntime().exec(str);
        } catch (Exception e) {
            System.out.println(e);
        }
    }
} 
```

错误输出为：

```
java.io.IOException: Cannot run program "imp ASKUL/askul@ASKDB file=askdbinstall.dmp log=askul.log fromuser=askul touser=ASKUL full=N ignore=Y grants=Y indexes=Y;": CreateProcess error=2, The system cannot find the file specified 
```

文件 askdbinstall.dmp 存在，因为如果我在 CMD 中粘贴相同的命令，它正在导入数据库 Dump 很好。我的错误是什么？

补充：从 Reimius Suggestion 我也试过这个：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.InputStream;
public class Tes {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
      try {
          String [] cmd = {"imp", "ASKUL/askul@ASKDB file=askdbinstall.dmp", 
                "log=askul.log", "fromuser=askul", "touser=ASKUL", 
                "full=N ignore=Y grants=Y indexes=Y;"};
     Process process = Runtime.getRuntime().exec(cmd);
     InputStream in = process.getInputStream();
     InputStreamReader ins=new InputStreamReader(in);
     BufferedReader br = new BufferedReader(ins);
     String data = null;
     while ((data = br.readLine()) != null) {
        System.out.println(data);
     }
   } catch (Exception e) {
    System.out.println(e);
   }
   }
} 
```

输出

```
run:
BUILD SUCCESSFUL (total time: 3 seconds) 
```

没有进行导入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:43:58.437

您的导入命令`String`被视为一个命令。尝试分解令牌。还要检查输出的内容`Process#getErrorStream`：

```
String[] str = {"imp", "ASKUL/askul@ASKDB file=askdbinstall.dmp", 
                "log=askul.log", "fromuser=askul", "touser=ASKUL", 
                "full=N ignore=Y grants=Y indexes=Y;"};

process = Runtime.getRuntime().exec(str);
BufferedReader in = 
           new BufferedReader(new InputStreamReader(process.getErrorStream()));
String line = null;
while ((line = in.readLine()) != null) {
    System.err.println(line);
} 
```

另外：`ProcessBuilder`使参数传递的使用更容易。

# sql - SELECT * FROM Table 给出关于算术溢出的错误

> ID：15927419
> 
> 赞同：3
> 
> 时间：2013-04-10T13:36:41.450
> 
> 标签：sql, sql-server-2000

执行此 SELECT 语句时遇到问题：

```
SELECT *
FROM Table1
ORDER BY column1, column2 
```

我收到关于**算术溢出**的错误。我发现哪一列是问题，那`somecolumn`是 numeric(10, 0) 但在某些行中包含超过 10 个数字，并且不要问我是怎么发生的，因为我不知道 :)

我只是删除了足够的数字，使列最多有 10 位数字，这解决了该错误的错误，但问题是大约有 100 行这样的行。

问题是：什么会导致这样的问题，以及如何编写正确的 SQL 语句来选择这些行？

在我看来，问题最终可能是某种截断列中值的方式。这只是一个假设：可能第一个列是数字（20, 0），并且包含 10 或 11 位数字的值，但后来有人决定必须将此列更改为数字（10, 0），然后出现问题。这只是一些假设。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:59:08.863

为什么不只是 ALTER 这个专栏？
或者您也可以尝试像这样转换它：

```
SELECT CONVERT(bigint,(somecolumn))  
FROM Table1  
ORDER BY column1, column2 
```

# asp.net - ASP.NET 2.0 动态添加 OnSelectedIndexChanged

> ID：15927422
> 
> 赞同：0
> 
> 时间：2013-04-10T13:36:44.980
> 
> 标签：asp.net, vb.net

我有一个 DropDownList() 在我的代码隐藏中呈现并由 myView 填充

```
 Dim ddl As New DropDownList()
 ddl.ID = "ddlV_" & dtrw("col_id") & "_" & fixDisplayName(dtrw("display_name"))
 ddl.DataSource = myView
 ddl.DataTextField = "DDLTEXT"
 ddl.DataValueField = "DDLVALUE"
 ddl.AutoPostBack="true"

 ddl.DataBind() 
```

我想将`OnSelectedIndexChanged ="do_this_when_changed"`属性添加到上面的下拉列表中。

我知道 Web 服务器控件也是在服务器上创建的，它们需要 runat="server" 属性才能工作。

这个列表控件可以这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T13:41:29.080

您可以使用以下方式以编程方式添加事件处理程序[`AddHandler`](http://msdn.microsoft.com/en-us/library/7taxzxka%28v=vs.110%29.aspx)：

```
Dim ddl As New DropDownList()
' ... ' 
AddHandler ddl.SelectedIndexChanged, AddressOf do_this_when_changed 
```

在这堂课中：

```
Private Sub do_this_when_changed(sender As Object, e As EventArgs)
    Dim ddl = DirectCast(sender, DropDownList) ' here it is'
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:41:36.033

您可以使用此事件来做到这一点...

```
ddl.SelectedIndexChanged 
```

# windows-phone-7 - 在 windows phone 8 中将图像转换为灰度

> ID：15927425
> 
> 赞同：3
> 
> 时间：2013-04-10T13:36:48.713
> 
> 标签：windows-phone-7, windows-phone-8

我如何在 Windows Phone 8 中将普通图像转换为灰度图像。WritableBitmapEx 中是否有任何灰度转换的规定。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T14:00:43.833

```
try this extension method...

public static WriteableBitmap ToGrayScale(this WriteableBitmap bitmapImage)
{

    for (var y = 0; y < bitmapImage.PixelHeight; y++)
    {
        for (var x = 0; x < bitmapImage.PixelWidth; x++)
        {
            var pixelLocation = bitmapImage.PixelWidth * y + x;
            var pixel = bitmapImage.Pixels[pixelLocation];
            var pixelbytes = BitConverter.GetBytes(pixel);
            var bwPixel = (byte)(.299 * pixelbytes[2] + .587 * pixelbytes[1] + .114 * pixelbytes[0]);
            pixelbytes[0] = bwPixel;
            pixelbytes[1] = bwPixel;
            pixelbytes[2] = bwPixel;
            bitmapImage.Pixels[pixelLocation] = BitConverter.ToInt32(pixelbytes, 0);
        }
    }

    return bitmapImage;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:55:46.697

我不认为有一种方法，但你可以自己转换它。网上有很多关于如何做到这一点的资源。从阅读[本文](http://channel9.msdn.com/coding4fun/articles/PicFx--Windows-Phone-Picture-Effects-Application--Part-1)开始。一种更简单的方法可能是：

```
for (int i = 0; i < oldBitmap.Pixels.Length; i++)
{
    var c = oldBitmap.Pixels[i];
    var a = (byte)(c >> 24);
    var r = (byte)(c >> 16);
    var g = (byte)(c >> 8);
    var b = (byte)(c);

    byte gray = (byte)((r * 0.3) + (g * 0.59) + (b * 0.11));
    oldBitmap.Pixels[i] = (a << 24) | (gray << 16) | (gray << 8) | gray;
} 
```

它简单、快速，并且您可以就地转换它。

# c# - 如何从从实体框架模型检索的 linq 查询中调用方法

> ID：15927437
> 
> 赞同：1
> 
> 时间：2013-04-10T13:37:18.243
> 
> 标签：c#, linq, entity-framework, linq-to-entities, expression-trees

我有以下代码

```
return (_entities.Users.Select(profile => new ProfileUserListItemDto
                {
                    Email = profile.Email,
                    FirstName = profile.FirstName,
                    Id = profile.Id,
                    LastName = profile.LastName,
                    Role = DtoEntityLookups.EntityRoleToDtoRole(profile.Role),
                    TimeZone = profile.TimeZone
                })).ToList();

public static RoleTypeEnum EntityRoleToDtoRole(Role role)
        {
            if (role == null)
                throw new NoNullAllowedException("Null role supplied to EntityRoleToDtoRole method");

            if (role.Id.ToString() == RolesGuid.AdministratorGuid)
                return RoleTypeEnum.Administrator;
            if (role.Id.ToString() == RolesGuid.ClientGuid)
                return RoleTypeEnum.Client;

            throw new InvalidDataException("Unknown role supplied");
        } 
```

调用时出现以下错误

> LINQ to Entities 无法识别方法 RoleTypeEnum EntityRoleToDtoRole(User.Entities.Entities.Role)' 方法，并且此方法无法转换为存储表达式。

如何将`EntityRoleToDtoRole`Entity Framework 查询转换为可调用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:52:39.197

您需要使用 Users.AsEnumerable() 才能在 linq 中调用方法。

```
return (_entities.Users.AsEnumerable().Select(profile => new ProfileUserListItemDto
                {
                    Email = profile.Email,
                    FirstName = profile.FirstName,
                    Id = profile.Id,
                    LastName = profile.LastName,
                    Role = DtoEntityLookups.EntityRoleToDtoRole(profile.Role),
                    TimeZone = profile.TimeZone
                })).ToList(); 
```

# javascript - 用户单击时如何获取可下载的图像

> ID：15927444
> 
> 赞同：0
> 
> 时间：2013-04-10T13:37:50.663
> 
> 标签：javascript

当用户点击它时，任何人都可以帮助我想要获取下载图像，

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:44:25.690

好吧，它还不能使用纯 javascript 进行跨浏览器工作。如果您专注于新浏览器，您可以查看 HTML5 功能 ( [http://updates.html5rocks.com/2011/08/Downloading-resources-in-HTML5-a-download](http://updates.html5rocks.com/2011/08/Downloading-resources-in-HTML5-a-download) )

否则，您将需要使用服务器端语言来发送正确的标头以在客户端激活下载。（[http://www.w3schools.com/php/func_http_header.asp](http://www.w3schools.com/php/func_http_header.asp)示例 #2）

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:44:18.067

在纯 JS 中似乎是不可能的。您可以改用拖放操作。

# c# - 为什么 Dapper 在 CreateTableConstructor 中发出 IL 代码？

> ID：15927445
> 
> 赞同：3
> 
> 时间：2013-04-10T13:37:53.593
> 
> 标签：c#, .net, dapper, il

我正在查看优秀的 Dapper micro-orm，在[Dapper.Rainbow](https://github.com/SamSaffron/dapper-dot-net/tree/master/Dapper.Rainbow)项目中，有一些代码使用 IL 创建表 ctor。我希望有人可以向我解释这段代码在做什么 - 显然它是动态发出代码来创建构造函数（或者是调用构造函数的代码，或两者兼而有之），但是实际创建时发出的代码是什么，以及为什么需要这个吗？

这是代码

```
protected Action<TDatabase> CreateTableConstructor(Type tableType)
{
    var dm = new DynamicMethod("ConstructInstances", null, new Type[] { typeof(TDatabase) }, true);
    var il = dm.GetILGenerator();

    var setters = GetType().GetProperties()
        .Where(p => p.PropertyType.IsGenericType && p.PropertyType.GetGenericTypeDefinition() == tableType)
        .Select(p => Tuple.Create(
                p.GetSetMethod(true),
                p.PropertyType.GetConstructor(new Type[] { typeof(TDatabase), typeof(string) }),
                p.Name,
                p.DeclaringType
         ));

    foreach (var setter in setters)
    {
        il.Emit(OpCodes.Ldarg_0);
        // [db]

        il.Emit(OpCodes.Ldstr, setter.Item3);
        // [db, likelyname]

        il.Emit(OpCodes.Newobj, setter.Item2);
        // [table]

        var table = il.DeclareLocal(setter.Item2.DeclaringType);
        il.Emit(OpCodes.Stloc, table);
        // []

        il.Emit(OpCodes.Ldarg_0);
        // [db]

        il.Emit(OpCodes.Castclass, setter.Item4);
        // [db cast to container]

        il.Emit(OpCodes.Ldloc, table);
        // [db cast to container, table]

        il.Emit(OpCodes.Callvirt, setter.Item1);
        // []
    }

    il.Emit(OpCodes.Ret);
    return (Action<TDatabase>)dm.CreateDelegate(typeof(Action<TDatabase>));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:57:50.670

基本上，它采用当前类型（派生自`Database<T>`）的所有属性，如下所示：

```
public Table<SomeEntity> SomeTable { get; private set; } 
```

并为每个此类属性创建一个执行如下代码的委托：

```
var table = new Table<SomeEntity>(db, "SomeTable");
db.SomeTable = table; 
```

# java - java注解vs C++编译指示

> ID：15927446
> 
> 赞同：5
> 
> 时间：2013-04-10T13:37:57.070
> 
> 标签：java, c++

我能想到类似于 java 注释的 c++ prgamas 吗？我知道 pragma 是特定于编译器的，但我想知道它们的总体目的是否类似于 java 注释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-21T19:13:59.293

Pragma 指令与注释不同，因为它们是它们的名称所指定的编译器指令。正如之前的回复所表明的那样，可以并且通常是在预编译阶段进行处理。

但是，由于 Java 编译与 C++ 不同，因此存在差异的原因就在这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T05:52:20.833

在[http://codesynthesis.com/products/odb/](http://codesynthesis.com/products/odb/)中有一个类似于 Java 注释的 C++ 编译指示示例。事实上，它们类似于 Hibernate 的注解：

```
#pragma db object
class person
{
    ...
    private:
        friend class odb::access;
        person () {}

        #pragma db id
        string email_;

        string name_;
        unsigned short age_;
}; 
```

[在 C++ 中的类 Java 注释中](https://stackoverflow.com/questions/4689756/java-like-annotations-in-c)有更多信息。

# servicestack - ServiceStack.Interfaces：web 和 silverlight 的不同版本

> ID：15927450
> 
> 赞同：1
> 
> 时间：2013-04-10T13:38:10.077
> 
> 标签：servicestack

我卸载了所有的服务堆栈，然后重新安装，我得到了安装在 web 和 silverlight 应用程序中的 ServiceStack.Interfaces 库的不同版本。我注意到这是因为我想在 dtos 上使用 IReturn 来玩新的 api，但它在 silverlight 中不可用，因为它的安装方式。这是属性窗口显示的内容。此版本也不允许使用新的 API。例如 JsonServiceClient 仅公开需要提供 url 的 Async 方法。

```
Silverlight:

Runtime Version: v4.0.30319
Version:         1.0.0.0

Web:

RuntimeVersion: v2.0.50727
Version:        3.9.43.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:59:25.510

截至 6 天前，似乎有一个新版本 3.9.44 解决了这个问题，尽管 NuGet 仍然拉取 3.9.43 版本。

# pandas - 使用日期时间列过滤 Pandas DataFrame 会引发错误

> ID：15927451
> 
> 赞同：3
> 
> 时间：2013-04-10T13:38:10.337
> 
> 标签：pandas

我正在设置一个带有两个日期时间列的 DataFrame，如下所示：

```
range1 = Series(date_range('1/1/2011', periods=50, freq='D'))
range2 = Series(date_range('2/5/2011', periods=50, freq='D'))
df1    = DataFrame({'a': rng1, 'b': rng2}, dtype='datetime64[D]') 
```

奇怪的是，询问 df1 的 dtypes 给了我：

```
In [71]: df1.dtypes
Out[71]:
a    datetime64[ns]
b    datetime64[ns] 
```

更糟糕的是，当我尝试像这样过滤数据框时：

```
In [62]:

d = datetime(2011,1,14)
df1[df1 > d] 
```

我收到一个错误：

```
TypeError                                 Traceback (most recent call last)
<ipython-input-62-50b4b9735157> in <module>()
      1 d = datetime(2011,1,14)
----> 2 df1[df1 > d]

/usr/local/lib/python2.7/site-packages/pandas/core/frame.pyc in f(self, other)
    313             return self._combine_series_infer(other, func)
    314         else:
--> 315             return self._combine_const(other, func)
    316 
    317     f.__name__ = name

/usr/local/lib/python2.7/site-packages/pandas/core/frame.pyc in _combine_const(self, other, func)
   3677             return self
   3678 
-> 3679         result_values = func(self.values, other)
   3680 
   3681         if not isinstance(result_values, np.ndarray):

TypeError: can't compare datetime.datetime to long 
```

谁能告诉我为什么会这样？我正在使用 numpy 1.7 和 pandas 0.10.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:51:43.480

仅`datetime64[ns]`支持 dtype，尝试不使用 dtype

```
In [9]: df1    = DataFrame({'a': range1, 'b' : range2})

In [10]: df1
In [15]: df1.head()
Out[15]: 
                    a                   b
0 2011-01-01 00:00:00 2011-02-05 00:00:00
1 2011-01-02 00:00:00 2011-02-06 00:00:00
2 2011-01-03 00:00:00 2011-02-07 00:00:00
3 2011-01-04 00:00:00 2011-02-08 00:00:00
4 2011-01-05 00:00:00 2011-02-09 00:00:00

In [16]: df1[df1.a>datetime.datetime(2011,1,14)].head()
Out[16]: 
                     a                   b
14 2011-01-15 00:00:00 2011-02-19 00:00:00
15 2011-01-16 00:00:00 2011-02-20 00:00:00
16 2011-01-17 00:00:00 2011-02-21 00:00:00
17 2011-01-18 00:00:00 2011-02-22 00:00:00
18 2011-01-19 00:00:00 2011-02-23 00:00:00 
```

仅供参考，在此之后：[https://github.com/pydata/pandas/issues/3311](https://github.com/pydata/pandas/issues/3311)被合并，然后OP指示的操作，a`where`返回：

```
In [15]: df1[df1>datetime.datetime(2011,1,14)].head(20)
Out[15]: 
                     a                   b
0                  NaT 2011-02-05 00:00:00
1                  NaT 2011-02-06 00:00:00
2                  NaT 2011-02-07 00:00:00
3                  NaT 2011-02-08 00:00:00
4                  NaT 2011-02-09 00:00:00
5                  NaT 2011-02-10 00:00:00
6                  NaT 2011-02-11 00:00:00
7                  NaT 2011-02-12 00:00:00
8                  NaT 2011-02-13 00:00:00
9                  NaT 2011-02-14 00:00:00
10                 NaT 2011-02-15 00:00:00
11                 NaT 2011-02-16 00:00:00
12                 NaT 2011-02-17 00:00:00
13                 NaT 2011-02-18 00:00:00
14 2011-01-15 00:00:00 2011-02-19 00:00:00
15 2011-01-16 00:00:00 2011-02-20 00:00:00
16 2011-01-17 00:00:00 2011-02-21 00:00:00
17 2011-01-18 00:00:00 2011-02-22 00:00:00
18 2011-01-19 00:00:00 2011-02-23 00:00:00
19 2011-01-20 00:00:00 2011-02-24 00:00:00 
```

# asp.net - 如何获取复选框是检查gridview OnRowEditing

> ID：15927453
> 
> 赞同：0
> 
> 时间：2013-04-10T13:38:11.447
> 
> 标签：asp.net

如果有人可以帮助我，我在GridView上有问题，当我使用on Roweding和OnrowDeleting和Inside ASP：TemplateField，ItemTemplate内部时，我正在使用复选框，当在复选框中选中复选框时，Checkecked Value从来都不正确，下面是我的C＃脚本

```
<asp: Button ID = "Button1" runat = "server" BackColor = "# EFF1F1" BorderStyle = "None"
onclick = "Button1_Click" Text = "Submit Work Program" />
<asp: GridView ID = "GV_program" runat = "server" AutoGenerateColumns = "False"
Its DataKeyNames = "KD_BIDANG" Width = "100%" AutoGenerateEditButton = "True"
AutoGenerateDeleteButton = "true" OnRowEditing = "GV_program_RowEditing" 
OnRowDeleting = "GV_program_RowDeleting" OnRowDataBound = "GV_kegiatan_RowDataBound" 
BackColor = "White" EmptyDataText = "No Data Activity" AllowPaging = "True">
<EmptyDataRowStyle BackColor="#FF9900" />
<Columns> <asp:TemplateField HeaderStyle-Width="20px"> <ItemTemplate> 
<asp:CheckBox ID="cbSelect" runat="server" /> </ItemTemplate> </asp:TemplateField>
</ Columns> </ asp: GridView>

C #
protected void Button1_Click (object sender, EventArgs e)
{
  foreach (GridViewRow row in GV_program.Rows)
  {
     if (((CheckBox) row.FindControl ("cbSelect")). Checked)
     {
        // Delete something (never get here)
     }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:48:54.627

一步一步，直到你让它工作......

尝试这个：

```
/* put this value at the "class level" */
    public static readonly int GRID_VIEW_COLUMN_ORDINAL_chkBoxSELECT = 3; /* Your number may be different, its the ordinal column number.  A static readonly or const value makes your code more readable IMHO */

/*Then in your method */

if (null != this.GV_program)
{
    Control cntl = null;

    foreach (GridViewRow gvr in this.GV_program.Rows)
    {
        cntl = gvr.Cells[GRID_VIEW_COLUMN_ORDINAL_chkBoxSELECT].FindControl("cbSelect");
        CheckBox cbIsApproved = cntl as CheckBox;
        if (null != cbIsApproved)
        {
            bool myValue = cbIsApproved.Checked;
        }
    } 
} 
```

我刚刚运行了这段代码，它对我有用。

```
 protected void imgbutSave_Click(object sender, ImageClickEventArgs e)
    {

    if (null != this.gvMain)
    {
        Control cntl = null;
        string finalMsg = string.Empty;
        int counter = 0;
        StringBuilder sb = new StringBuilder();
        foreach (GridViewRow gvr in this.gvMain.Rows)
        {
            counter++;
            cntl = gvr.Cells[GRID_VIEW_COLUMN_ORDINAL_chkBoxIsApproved].FindControl("chkBoxIsApproved");
            CheckBox cbIsApproved = cntl as CheckBox;
            if (null != cbIsApproved)
            {
                sb.Append(string.Format("Row '{0}' (chkBoxIsApproved.Checked) = '{1}'", counter, cbIsApproved.Checked) + System.Environment.NewLine);
            }
        }

        finalMsg = sb.ToString();
    }
} 
```

和我的 aspx 代码

```
 <asp:TemplateField>
                    <ItemTemplate>
                        <asp:CheckBox ID="chkBoxIsApproved" runat="server" Checked='<%#Eval("IsApproved")%>'>
                        </asp:CheckBox>
                    </ItemTemplate>

                </asp:TemplateField> 
```

我的 StringBuilder 具有我页面上的所有复选框，并且具有正确的 .Checked 值。

# python - 使用 Python 对 csv 文档进行循环迭代和算术运算

> ID：15927455
> 
> 赞同：0
> 
> 时间：2013-04-10T13:38:23.850
> 
> 标签：python, list, csv, nested-loops

我已经为我即将提出的问题工作了一段时间，并试图通过邮件列表和其他在线资源解决它，但最终我的所有努力都没有成功，到目前为止。这就是为什么我要求您宝贵的时间来帮助我完成以下任务：

我正在处理存储为 sqlite 数据库的数据集，该数据库已转换为 csv 文档，以便使用 Python 2.7 更好地处理它。数据以逗号分隔的 csv 格式排列，并报告传感器的命中以及其他信息。它有 8 个不同数据类型的逗号分隔字段，即字符串、整数和浮点数。我只对第二个字段感兴趣，这是记录命中的日期时间以 UNIX 时间戳格式以毫秒为单位存储的位置。不幸的是，传感器的内置时钟无法保持最新​​状态，我只能通过其他方式恢复给定日期的近似校正时间戳。

以下是数据外观的示例：

```
sensor_ID,timestamp,z,w,k,j,n,human-readable_datetime
651,956684876150254,-0.1692345,0.623286,0.01442572,0.81455,-0.145732,"2000-01-01 00:01:16"
651,956684936161895,0.00526153,0.999893,0.00998516,0.898215,-0.155301,"2000-01-01 00:02:16"
651,956684996173593,0.00526153,0.999893,0.00988516,0.865215,-0.154301,"2000-01-01 00:03:16"
651,956685056185292,0.00526153,0.999893,0.00978676,0.883215,-0.159301,"2000-01-01 00:04:16"
651,956685116196912,0.00526153,0.999893,0.00922469,0.809862,-0.158607,"2000-01-01 00:05:16" 
```

我想要做的是以下内容：

1) 将第 2 列中的每个时间戳与对应于检索到的近似更正时间戳的值进行比较，该时间戳存储在单独的文件中。这意味着：对于第 2 列中的每个时间戳 'x' --> 将其减去正确的时间戳 'y' --> IF abs(yx) > 60 seconds THEN CONTINUE (to step 2) ELSE QUIT

2) 一旦找到一个匹配项并且减法运算输出一个 > 60 秒的值 --> 将给定的固定值（我将称之为“syncing_value”）添加到文件中的所有时间戳，无论是向后还是向前，然后执行只要它们保持一致，即只要时间戳是过时的，就可以这样做。这是因为某些传感器的时钟会停止同步，但会在软件更新后恢复正常工作。

3) 将文件写入输出并退出

为了简单起见，我将附上我使用的伪代码，至于实际代码，我有很多不同的几乎可以工作的替代方案，我不知道该介绍哪一个。我希望你明白。

这是我的伪代码，它缺少我上面提到的一些基本功能：

```
import csv

for row in data:

    for x in row[1]:

        if x <= y:

            for i in range(x,len(data)-1):

                i = i + syncing_value

        else:

            exit 
```

我真的希望我想要实现的目标对您来说很清楚，并且非常感谢您的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:21:15.893

```
import csv

filename = 'csv.txt'              #csv file to read/write to
timestamp = 956684876150324       #correct timestamp 
syncing_value = 90 

#read contents of csv file into list
data = list(csv.reader(open(filename)))  

#compare second column of every row after header (data[1:]) to correct timestamp
#if any differ more than 60 from correct timestamp, add syncing_value to all timestamps
#in file, and save changes.
if any(abs(int(row[1])-timestamp) > 60 for row in data[1:]):
    for row in data[1:]:
        row[1] = int(row[1]) + syncing_value
    csv_writer = csv.writer(open(filename,'w'))
    csv_writer.writerows(data) 
```

# jboss - 有想法的JBoss

> ID：15927456
> 
> 赞同：1
> 
> 时间：2013-04-10T13:38:24.253
> 
> 标签：jboss, intellij-idea

我正在尝试为 JSF 开发设置想法（我是 JSF 新手），我们正在使用 jBoss 作为服务器。我在idea中将jBoss添加为应用程序服务器，并尝试运行一个简单的“hello world”应用程序，但出现以下错误

```
Error occurred during initialization of VM
Could not reserve enough space for object heap
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit.
Disconnected from server 
```

但是当我从 bin\standalone.bat 运行 jboss 服务器时，服务器运行！为什么它给我的想法错误？

# c# - ServiceStack 请求 DTO 设计

> ID：15927475
> 
> 赞同：40
> 
> 时间：2013-04-10T13:39:04.233
> 
> 标签：c#, .net, servicestack

我是一名 .Net 开发人员，曾在 Microsoft Technologies 上开发 Web 应用程序。我正在尝试教育自己了解 Web 服务的 REST 方法。到目前为止，我很喜欢 ServiceStack 框架。

但有时我发现自己以我习惯使用 WCF 的方式编写服务。所以我有一个让我烦恼的问题。

我有 2 个请求 DTO，所以有 2 个这样的服务：

```
[Route("/bookinglimit", "GET")]
[Authenticate]
public class GetBookingLimit : IReturn<GetBookingLimitResponse>
{
    public int Id { get; set; }
}
public class GetBookingLimitResponse
{
    public int Id { get; set; }
    public int ShiftId { get; set; }
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
    public int Limit { get; set; }

    public ResponseStatus ResponseStatus { get; set; }
}

[Route("/bookinglimits", "GET")]
[Authenticate]
public class GetBookingLimits : IReturn<GetBookingLimitsResponse>
{      
    public DateTime Date { get; set; }
}
public class GetBookingLimitsResponse
{
    public List<GetBookingLimitResponse> BookingLimits { get; set; }
    public ResponseStatus ResponseStatus { get; set; }
} 
```

正如在这些请求 DTO 上所见，我几乎对每项服务都有类似的请求 DTO，这似乎不是 DRY。

我试图`GetBookingLimitResponse`在里面的列表中使用类`GetBookingLimitsResponse`，因为在我有服务错误的情况下，`ResponseStatus`里面的类被复制了。`GetBookingLimitResponse``GetBookingLimits`

我也有这些请求的服务实现，例如：

```
public class BookingLimitService : AppServiceBase
{
    public IValidator<AddBookingLimit> AddBookingLimitValidator { get; set; }

    public GetBookingLimitResponse Get(GetBookingLimit request)
    {
        BookingLimit bookingLimit = new BookingLimitRepository().Get(request.Id);
        return new GetBookingLimitResponse
        {
            Id = bookingLimit.Id,
            ShiftId = bookingLimit.ShiftId,
            Limit = bookingLimit.Limit,
            StartDate = bookingLimit.StartDate,
            EndDate = bookingLimit.EndDate,
        };
    }

    public GetBookingLimitsResponse Get(GetBookingLimits request)
    {
        List<BookingLimit> bookingLimits = new BookingLimitRepository().GetByRestaurantId(base.UserSession.RestaurantId);
        List<GetBookingLimitResponse> listResponse = new List<GetBookingLimitResponse>();

        foreach (BookingLimit bookingLimit in bookingLimits)
        {
            listResponse.Add(new GetBookingLimitResponse
                {
                    Id = bookingLimit.Id,
                    ShiftId = bookingLimit.ShiftId,
                    Limit = bookingLimit.Limit,
                    StartDate = bookingLimit.StartDate,
                    EndDate = bookingLimit.EndDate
                });
        }

        return new GetBookingLimitsResponse
        {
            BookingLimits = listResponse.Where(l => l.EndDate.ToShortDateString() == request.Date.ToShortDateString() && l.StartDate.ToShortDateString() == request.Date.ToShortDateString()).ToList()
        };
    }
} 
```

如您所见，我还想在这里使用验证功能，因此我必须为我拥有的每个请求 DTO 编写验证类。所以我有一种感觉，我应该通过将类似的服务分组到一个服务中来保持我的服务数量较低。

但是我想到的问题是我应该发送比客户对该请求所需的信息更多的信息吗？

我认为我的思维方式应该改变，因为我对我编写的当前代码不满意，我像 WCF 人一样思考。

有人可以告诉我正确的方向吗？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-04-11T05:15:14.350

[为了让您了解在ServiceStack](http://www.servicestack.net)中设计基于消息的服务时应该考虑的差异，我将提供一些比较 WCF/WebApi 与 ServiceStack 方法的示例：

## [WCF 与 ServiceStack API 设计](https://github.com/ServiceStack/ServiceStack/wiki/Why-Servicestack#difference-between-an-rpc-chatty-and-message-based-api)

WCF 鼓励您将 Web 服务视为普通的 C# 方法调用，例如：

```
public interface IWcfCustomerService
{
    Customer GetCustomerById(int id);
    List<Customer> GetCustomerByIds(int[] id);
    Customer GetCustomerByUserName(string userName);
    List<Customer> GetCustomerByUserNames(string[] userNames);
    Customer GetCustomerByEmail(string email);
    List<Customer> GetCustomerByEmails(string[] emails);
} 
```

[这就是在 ServiceStack 中使用New API](https://github.com/ServiceStack/ServiceStack/wiki/New-API)的相同服务合约的样子：

```
public class Customers : IReturn<List<Customer>> 
{
   public int[] Ids { get; set; }
   public string[] UserNames { get; set; }
   public string[] Emails { get; set; }
} 
```

要记住的重要概念是整个查询（又名请求）是在请求消息（即请求 DTO）中捕获的，而不是在服务器方法签名中。采用基于消息的设计的明显直接好处是，上述 RPC 调用的任何组合都可以通过单个服务实现在 1 个远程消息中完成。

## [WebApi 与 ServiceStack API 设计](https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/WebApi.ProductsExample)

同样，WebApi 促进了 WCF 所做的类似 C# 的 RPC Api：

```
public class ProductsController : ApiController 
{
    public IEnumerable<Product> GetAllProducts() {
        return products;
    }

    public Product GetProductById(int id) {
        var product = products.FirstOrDefault((p) => p.Id == id);
        if (product == null)
        {
            throw new HttpResponseException(HttpStatusCode.NotFound);
        }
        return product;
    }

    public Product GetProductByName(string categoryName) {
        var product = products.FirstOrDefault((p) => p.Name == categoryName);
        if (product == null)
        {
            throw new HttpResponseException(HttpStatusCode.NotFound);
        }
        return product;
    }

    public IEnumerable<Product> GetProductsByCategory(string category) {
        return products.Where(p => string.Equals(p.Category, category,
                StringComparison.OrdinalIgnoreCase));
    }

    public IEnumerable<Product> GetProductsByPriceGreaterThan(decimal price) {
        return products.Where((p) => p.Price > price);
    }
} 
```

### ServiceStack 基于消息的 API 设计

虽然 ServiceStack 鼓励您保留基于消息的设计：

```
public class FindProducts : IReturn<List<Product>> {
    public string Category { get; set; }
    public decimal? PriceGreaterThan { get; set; }
}

public class GetProduct : IReturn<Product> {
    public int? Id { get; set; }
    public string Name { get; set; }
}

public class ProductsService : Service 
{
    public object Get(FindProducts request) {
        var ret = products.AsQueryable();
        if (request.Category != null)
            ret = ret.Where(x => x.Category == request.Category);
        if (request.PriceGreaterThan.HasValue)
            ret = ret.Where(x => x.Price > request.PriceGreaterThan.Value);            
        return ret;
    }

    public Product Get(GetProduct request) {
        var product = request.Id.HasValue
            ? products.FirstOrDefault(x => x.Id == request.Id.Value)
            : products.FirstOrDefault(x => x.Name == request.Name);

        if (product == null)
            throw new HttpError(HttpStatusCode.NotFound, "Product does not exist");

        return product;
    }
} 
```

再次在 Request DTO 中捕捉到 Request 的本质。基于消息的设计还能够将 5 个独立的 RPC WebAPI 服务压缩为 2 个基于消息的 ServiceStack 服务。

## 按调用语义和响应类型分组

**在此示例中，它根据调用语义**和**响应类型**分为 2 个不同的服务：

每个请求 DTO 中的每个属性都具有相同的语义，`FindProducts`每个属性的作用类似于过滤器（例如 AND），而`GetProduct`其中的作用类似于组合器（例如 OR）。服务还返回`IEnumerable<Product>`和`Product`返回类型，这将需要在类型化 API 的调用站点中进行不同的处理。

在 WCF / WebAPI（和其他 RPC 服务框架）中，只要您有特定于客户端的要求，您就会在与该请求匹配的控制器上添加新的服务器签名。然而，在 ServiceStack 的基于消息的方法中，您应该始终考虑此功能属于何处以及您是否能够增强现有服务。您还应该考虑如何以**通用方式**支持特定于客户端的需求，以便相同的服务可以使其他未来的潜在用例受益。

# 重构 GetBooking 限制服务

有了上面的信息，我们就可以开始重构你的服务了。由于您有 2 种不同的服务返回不同的结果，例如`GetBookingLimit`返回 1 项并`GetBookingLimits`返回许多项，因此它们需要保存在不同的服务中。

### 区分服务操作与类型

但是，您应该在服务操作（例如请求 DTO）和它们返回的 DTO 类型之间有一个清晰的划分，每个服务都是唯一的，用于捕获服务的请求。请求 DTO 通常是动作，所以它们是动词，而 DTO 类型是实体/数据容器，所以它们是名词。

### 返回通用响应

在新 API 中，ServiceStack 响应[不再需要 ResponseStatus](https://github.com/ServiceStack/ServiceStack/wiki/New-Api#structured-error-handling)属性，因为如果它不存在，则通用`ErrorResponse`DTO 将被抛出并在客户端上序列化。这使您免于让您的响应包含`ResponseStatus`属性。话虽如此，我会将您的新服务合同重新考虑为：

```
[Route("/bookinglimits/{Id}")]
public class GetBookingLimit : IReturn<BookingLimit>
{
    public int Id { get; set; }
}

public class BookingLimit
{
    public int Id { get; set; }
    public int ShiftId { get; set; }
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
    public int Limit { get; set; }
}

[Route("/bookinglimits/search")]
public class FindBookingLimits : IReturn<List<BookingLimit>>
{      
    public DateTime BookedAfter { get; set; }
} 
```

对于 GET 请求，当它们没有歧义时，我倾向于将它们排除在 Route 定义之外，因为它的代码更少。

### 保持一致的命名法

您应该在查询唯一键或主键字段的服务上保留单词**Get**，即当提供的值与字段（例如 Id）匹配时，它只**获得**1 个结果。对于充当过滤器并返回多个匹配结果且在所需范围内的搜索服务，我使用**Find**或**Search**动词来表示情况就是这样。

### 以自我描述的服务合同为目标

还要尝试对您的每个字段名称进行描述，这些属性是您的**公共 API**的一部分，并且应该对它的作用进行自我描述。例如，仅通过查看服务合同（例如请求 DTO）我们不知道**Date**做了什么，我假设**BookedAfter** ，但如果它只返回当天进行的预订，它也可能是**BookedBefore**或**BookedOn 。**

这样做的好处是现在您的[类型化 .NET 客户端](https://github.com/ServiceStack/ServiceStack/wiki/C#-client)的调用站点变得更易于阅读：

```
Product product = client.Get(new GetProduct { Id = 1 });

List<Product> results = client.Get(
    new FindBookingLimits { BookedAfter = DateTime.Today }); 
```

## 服务实施

我已经`[Authenticate]`从您的请求 DTO 中删除了该属性，因为您可以在服务实现中指定一次，现在看起来像：

```
[Authenticate]
public class BookingLimitService : AppServiceBase 
{ 
    public BookingLimit Get(GetBookingLimit request) { ... }

    public List<BookingLimit> Get(FindBookingLimits request) { ... }
} 
```

## 错误处理和验证

有关如何添加验证的信息，您可以选择仅[抛出 C# 异常](https://github.com/ServiceStack/ServiceStack/wiki/Error-Handling)并将您自己的自定义应用到它们，否则您可以选择使用内置的[Fluent Validation](https://github.com/ServiceStack/ServiceStack/wiki/Validation)但您不需要将它们注入您的服务因为您可以在 AppHost 中用一条线将它们全部连接起来，例如：

```
container.RegisterValidators(typeof(CreateBookingValidator).Assembly); 
```

验证器是非接触式和无侵入性的，这意味着您可以使用分层方法添加它们并维护它们，而无需修改服务实现或 DTO 类。因为它们需要一个额外的类，所以我只会将它们用于具有副作用的操作（例如 POST/PUT），因为 GET 往往具有最少的验证，并且抛出 C# 异常需要更少的样板。因此，您可能拥有的验证器示例是首次创建预订时：

```
public class CreateBookingValidator : AbstractValidator<CreateBooking>
{
    public CreateBookingValidator()
    {
        RuleFor(r => r.StartDate).NotEmpty();
        RuleFor(r => r.ShiftId).GreaterThan(0);
        RuleFor(r => r.Limit).GreaterThan(0);
    }
} 
```

根据用例而不是拥有单独的`CreateBooking`DTO，`UpdateBooking`我会为两者重复使用相同的 Request DTO，在这种情况下，我将命名为`StoreBooking`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-11T04:49:13.280

'Reponse Dtos' 似乎没有必要，因为[不再需要 ResponseStatus 属性。](https://stackoverflow.com/questions/11750799/is-responsestatus-needed-in-servicestack). 不过，我认为如果您使用 SOAP，您可能仍需要匹配的 Response 类。如果您删除 Response Dtos，您不再需要将 BookLimit 推入 Response 对象。此外，ServiceStack 的 TranslateTo() 也可以提供帮助。

以下是我将如何尝试简化您发布的内容...YMMV。

为 BookingLimit 创建一个 DTO - 这将是 BookingLimit 对所有其他系统的表示。

```
public class BookingLimitDto
{
    public int Id { get; set; }
    public int ShiftId { get; set; }
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
    public int Limit { get; set; }
} 
```

请求和 Dtos[很重要](https://stackoverflow.com/questions/10750571/getting-servicestack-to-retain-type-information/10759250#10759250)

```
[Route("/bookinglimit", "GET")]
[Authenticate]
public class GetBookingLimit : IReturn<BookingLimitDto>
{
    public int Id { get; set; }
}

[Route("/bookinglimits", "GET")]
[Authenticate]
public class GetBookingLimits : IReturn<List<BookingLimitDto>>
{
    public DateTime Date { get; set; }
} 
```

不再返回 Reponse 对象......只是 BookingLimitDto

```
public class BookingLimitService : AppServiceBase 
{ 
    public IValidator AddBookingLimitValidator { get; set; }

    public BookingLimitDto Get(GetBookingLimit request)
    {
        BookingLimitDto bookingLimit = new BookingLimitRepository().Get(request.Id);
        //May need to bookingLimit.TranslateTo<BookingLimitDto>() if BookingLimitRepository can't return BookingLimitDto

        return bookingLimit; 
    }

    public List<BookingLimitDto> Get(GetBookingLimits request)
    {
        List<BookingLimitDto> bookingLimits = new BookingLimitRepository().GetByRestaurantId(base.UserSession.RestaurantId);
        return
            bookingLimits.Where(
                l =>
                l.EndDate.ToShortDateString() == request.Date.ToShortDateString() &&
                l.StartDate.ToShortDateString() == request.Date.ToShortDateString()).ToList();
    }
} 
```

# r - 与 S4 类相比，使用 setOldClass 时重载运算符无法正常工作

> ID：15927479
> 
> 赞同：10
> 
> 时间：2013-04-10T13:39:09.553
> 
> 标签：r, s4

有人可以解释为什么在注册的旧式 S3 类上重载运算符不能按预期工作，而在定义新类和重载运算符时确实有效。

如以下示例所示。

这不起作用。

```
require(ff) 
setOldClass(Classes=c("ff_vector")) 
setMethod( 
  f="*", 
  signature = signature(e1 = c("ff_vector"), e2 = c("ff_vector")), 
  definition = function (e1, e2){ 
        print("S3 setOldClass")
        e1[] * e2[] 
    } 
) 
ff(1:10) * ff(1:10) 
Error in ff(1:10) * ff(1:10) : non-numeric argument to binary operator 
```

但这有效。

```
setClass("myff_vector", representation(x="ff_vector"))
setMethod( 
  f="*", 
  signature = signature(e1 = c("myff_vector"), e2 = c("myff_vector")), 
  definition = function (e1, e2){ 
        print("S4 setOldClass")
        e1@x[] * e2@x[] 
    } 
) 
new("myff_vector", x = ff(1:10)) * new("myff_vector", x = ff(1:10))
[1] "S4 setOldClass"
[1]   1   4   9  16  25  36  49  64  81 100 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T12:48:00.380

尝试部分回答：在帮助（'方法'）中，在**通用函数**部分中，声明：

> 可以为大多数原语定义方法，并创建相应的元数据对象来存储它们。对原语的调用仍然直接转到 C 代码，有时会检查适用的方法。“有时”的定义是，对于会话中加载的某个包中的函数，必须检测到方法，并且 对于第一个参数（或对于二元运算符的情况下，对于第二个参数）， **isS4(x) 为 TRUE 。**

回到你的问题，`*`是一个原始的，并且：

```
library(ff)
setOldClass("ff_vector")
isS4(ff(1:10))
[1] FALSE 
```

因此，据我了解，即使您使用 setOldClass()，也无法在 S3 类上为原始函数定义方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-28T21:54:35.583

从这个是否算作答案的问题中并不清楚，但为了记录，运算符可以以简单的 S3 样式重载，没有任何`setOldClass`or `S4`：

```
`*.ff_vector` <- function(x, y) {
  print("hi")
  x[] * y[]
}

> ff(1:10) * ff(1:10)
[1] "hi"
[1]   1   4   9  16  25  36  49  64  81 100 
```

# c++ - 多线程记录器

> ID：15927481
> 
> 赞同：0
> 
> 时间：2013-04-10T13:39:11.563
> 
> 标签：c++, multithreading, boost-thread

我正在尝试使用 boost 为多线程 c++ 代码创建一个记录器。这是我的代码：

```
class logger
{
private:
    boost::mutex logMtx;
public:
    logger()
    {
    }
    ~logger()
    {
    }
    void logString(string z)
    {
        boost::mutex::scoped_lock lock(logMtx);
        std::cout<<z<<std::endl;
        std::cout.flush();      
    }
}; 
```

然后我与多个线程共享此实例（该实例在创建其他线程之前在主线程中创建）并调用 logString 函数进行日志记录。它似乎不起作用。一些行被截断（整个字符串不打印 - 即如果我通过“abcd”它有时会打印“bcd”）。

这种方法有问题吗？

# eclipse - .settings/org.eclipse.jdt.core.prefs 是项目的一部分吗？

> ID：15927484
> 
> 赞同：31
> 
> 时间：2013-04-10T13:39:35.033
> 
> 标签：eclipse, version-control

该文件`.settings/org.eclipse.jdt.core.prefs`是项目的一部分还是我个人 Eclipse 配置的一部分？

我应该将它添加到版本控制中吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-11T06:37:05.810

是的你应该。如果此文件不受版本控制，那么您无法创建同一项目的可重现构建，因为它不再是自包含的，而是取决于您的特定 Eclipse 安装及其设置。

如果您将此项目导入另一个工作区（在您或任何其他机器上），它的行为可能会完全不同，因为编译器合规性设置、编译器警告配置和许多其他东西突然丢失或不同。这样的项目很有可能突然在新工作区中显示警告/错误，而之前完全没问题。

注意：这还需要您在项目属性中*实际*配置所有与 Java 相关的设置。如果您想拥有自包含项目，切勿使用 Window -> Preferences 下的 Java 编译器设置。

举一个具体的例子：如果您将项目的编译器合规级别配置为 Java 6，因为您使用的是 Java 6 的特定功能（例如在接口上覆盖注释），那么该项目将在其他人的机器上[产生很多编译错误](https://stackoverflow.com/q/1678122/44089). 这是因为每个 Eclipse 工作区中的默认编译器合规级别是 Java 1.5，而在 Java 1.5 中，根本不允许 Override 注释。

如另一个答案所示，这与您是在开发封闭源代码还是开放源代码无关。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-10T14:00:48.100

与@nitind 的观点相反，不。您不应将任何特定于 IDE 的设置置于版本控制之下。除非您正在开发 IDE 功能或插件。

如果您确实有强制性的团队范围的 IDE 设置，将它们置于版本控制之下是一个好主意，但 IMO 具有强制性的团队范围的设置本身并不是一个好主意。

对于所有其他情况，共享 IDE 设置不利于可移植构建，即使使用相同的 IDE 也是如此，而且对于其他 IDE 的用户来说充其量也是无用的。

编辑：我应该区分，具体取决于您项目的目标群体。如果您正在使用 eclipse 的团队中开发一个封闭源代码产品，那么将这些偏好设置在版本控制之下是有帮助的，也是一个好主意。如果你正在开发一个库、封闭或开源，或者一个开源项目，我认为忽略偏好更合适和礼貌。

EDIT2：恐怕@Bananenweizen 误解了我想说的话。

我知道这些设置是eclipse编译器设置。它们仍然是特定于 IDE 的，因为它们不会对 Netbeans 或 IntelliJ 产生任何影响，因为它们不会对命令行中的 ant 或 maven 构建产生任何影响。

是的，将这些设置排除在版本控制之外可能会在不同机器上的 Eclipse 中为您带来许多红色波浪线。它不会，如果它是一个具有设置源级别的maven项目，我不确定ant。

Eclipse 不会自行构建项目——如果它是 eclispe 或 ant 项目，它会用 ant 构建它们，如果它是 maven 项目，它会用 maven 构建它们。ant 和 maven 都有不依赖于 IDE 的源版本的特定设置。

这就是这些设置应该在的地方 - 在构建文件中。并且构建文件应该在源代码控制之下。我之前提到的例外情况仍然适用。

**编辑 2020.03.15** @howlger 告诉我，这些以前的 eclipse 专有文件的可用性已经提高。它们可以在 VSCode 和 IntelliJ 中使用。这提高了它们在 IDE 中有用的机会，并且可能会改变您共享它们的决定。

IMO，这些文件令人担忧。虽然我支持将源代码级别和代码格式化作为构建的一部分，但我认为问题突出显示规则、保存操作和类似问题超出了范围。如果可能的话，我将它们分开，通过将它们放入构建定义来共享前者，而不是后者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-04T13:21:07.510

这是将其置于版本控制之下的问题....如果您导入并打开一个项目，Eclipse 坚持在*触摸*.settings 文件夹中的文件时*调用 IProject.open(...)* ......这是在您可以在 IProject 对象上注册团队提供者之前。这意味着 validateEdit*不会*触发，并且无论您在弹出窗口中单击“是”还是“否”都会出现烦人的错误，询问“你想让它可写吗？” 对于乐观的文件锁定提供者来说，这一切都很好，但对于“悲观”的提供者来说就没那么好了。对我们来说，这只是另一个日食烦恼。

 **如果由我决定，我*不可能*将这些放在源代码管理中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-21T13:15:57.480

答案是“是”，在这里您可以找到这样做的动机和正确的方法：[观看](https://www.youtube.com/watch?v=J5RzSbpNLM4)“提交 IDE 元文件：误解、误解和解决方案”讲座。或查看Aurélien Pupier [@apupier](https://twitter.com/apupier)（高级软件工程师，Eclipse 专家）在 2015年[EclipseCon Europe上的相应](https://www.eclipsecon.org/europe2015/comment/628.html)[幻灯片。](https://www.slideshare.net/AurelienPupier/committing-ide-meta-files-misconceptions-misunderstandings-and-solutions)**

# excel - 从 ADODB 查询返回日期（不是字符串）

> ID：15927485
> 
> 赞同：1
> 
> 时间：2013-04-10T13:39:35.790
> 
> 标签：excel, adodb, vba

下面的函数工作正常并输出正确的结果，除了它将日期输出为字符串而不是日期。我怎样才能让它输出日期呢？

```
Function GetExpiries_YieldX(TradeDate As Date, Code As String) As Variant

    'Create and open the connection
    Dim oConnection As Connection
    Set oConnection = New Connection
    oConnection.ConnectionString = strConnectionStringYieldX
    oConnection.Open

    'Create the command object
    Dim oCommand As Command
    Set oCommand = New Command
    oCommand.CommandType = adCmdText

    Dim SQLString As String

        SQLString = "SELECT DISTINCT Expiry" _
                 & " FROM MTM" _
                 & " WHERE TradeDate = ?" _
                 & "   and Code = ?"

    oCommand.CommandText = SQLString
    oCommand.ActiveConnection = oConnection

    oCommand.Parameters.Append oCommand.CreateParameter("Date", adDBTimeStamp, adParamInput)
    oCommand.Parameters.Append oCommand.CreateParameter("Code", adVarChar, adParamInput, 50)

    oCommand.Parameters.Item("Date").Value = TradeDate
    oCommand.Parameters.Item("Code").Value = Code

    Dim result As New ADODB.Recordset
    Set result = oCommand.Execute

    Dim resultA As Variant
    'GetExpiries_YieldX = WorksheetFunction.Transpose(result.GetRows)
    GetExpiries_YieldX = result.GetRows

    oConnection.Close

End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:04:14.390

2.8 之前的 ADODB 版本无法识别SQL Server 2008 中引入的新**日期数据类型。**

因此，请检查以下内容：

1.  确保您在连接字符串中使用本*机*SQL Server 提供程序（**不是 OLEDB SQL 提供程序**），因此它应该类似于*“Provider=SQLNCLI10.1;Data Source=MyServer;Initial Catalog=MyDatabase;Uid=MyUser;Pwd=MyPassword ;"*
2.  确保您已安装最新的 SQL Native Client（sqlncli2008.msi 或类似的东西，您可以从 SQL Server 2008 可再发行组件中窃取它）
3.  确保您的 VB 项目中引用的 ADO 版本为 2.8

[在ADODB 和 SQL 2008（MS 论坛）](http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/0669b633-94e0-4ee3-8785-3e53599bf09c/)上找到了所有内容

我希望这可以帮助您从数据库中的日期列中获取数组中的日期列！

# html - 我的 CSS 代码没有定位我的元素

> ID：15927489
> 
> 赞同：0
> 
> 时间：2013-04-10T13:39:42.653
> 
> 标签：html, css, internet-explorer

```
.styled-select select {
    margin-top:200px;
    margin-left:300px;
    background: transparent;
    width: 268px;
    padding: 5px;
    font-size: 16px;
    line-height: 1;
    border: 0;
    border-radius: 0;
    height: 34px;
    -webkit-appearance: none;
    display: block;
} 
```

HTML代码是

```
<!DOCTYPE HTML>

<html>

<head>
  <title>Untitled</title>
  <link rel="stylesheet" type="text/css" href="mycss.css">
</head>

<body>

<div class="styled-select">
 <select name="selectPrimaryLocation">
    <option selected="selected">City Hall</option>
    <option>Flower Store</option>
 </select>
 </div>

 <div class="styled-select">
 <select name="selectSecondaryLocation">
    <option>Building 5</option>
    <option>Building 6</option>
 </select>
 </div>

</body>

</html> 
```

选择框未定位在 IE9 中。我用于测试的浏览器是 IE6 到 IE9

# c# - 为 Windows 8 应用商店应用创建自定义 XAML 文本框

> ID：15927491
> 
> 赞同：1
> 
> 时间：2013-04-10T13:39:42.893
> 
> 标签：c#, xaml, windows-runtime, custom-controls

我试图在 Windows 8 XAML 中创建自定义文本框控件。

我已经右键单击我的项目 -> 添加 -> 新项目

然后我选择了模板化控件并输入了名称 MyTextBox

然后我让这个类派生自 TextBox 并添加了一个名为 Hello 的测试方法。所以它现在看起来像这样：

```
public sealed class MyTextBox : TextBox
{
    public MyTextBox()
    {
        this.DefaultStyleKey = typeof(MyTextBox);
    }

    public void Hello()
    {
        //Do something here!
    }
} 
```

在我的项目中，还添加了一个名为 Generic.xaml 的文件，其样式如下：

```
<Style TargetType="local:MyTextBox">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:MyTextBox">
                <Border
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}">
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

所以在这里我尝试使用 Style 标签添加 BasedOn="TextBox" ：

```
<Style TargetType="local:WatermarkTextBox" BasedOn="TextBox"> 
```

这行不通。

我需要做什么来创建这个自定义文本框，然后我如何在我的 XAML 中使用它

这适用于 Windows RT，因此 XAML 可能与 WPF 不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:58:44.893

最好的文章之一，也是我最喜欢的：[为 XAML Metro 风格应用构建可部署的自定义控件](http://timheuer.com/blog/archive/2012/03/07/creating-custom-controls-for-metro-style-apps.aspx)

这是 MSDN 示例应用程序：[XAML 用户和自定义控件示例](http://code.msdn.microsoft.com/windowsapps/XAML-user-and-custom-a8a9505e)

**更新 1：**

`<Style TargetType="local:WatermarkTextBox" BasedOn="TextBox">`

您不必指定`BasedOn`属性。如果您正在开发水印文本框，那么我建议您检查 Callisto 的水印文本框代码。

[通用的.xaml](https://github.com/timheuer/callisto/blob/master/src/Callisto/themes/Generic.xaml#L878)

[水印文本框.cs](https://github.com/timheuer/callisto/blob/master/src/Callisto/Controls/WatermarkTextBox/WatermarkTextBox.cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:57:58.363

BasedOn 值可以通过 StaticResources 来指向，例如`BasedOn={StaticResource DefaultTextBoxStyle}`

我有一个 NumericOnlyTextBox 实现。我没有将其设为 BasedOn 文本框，而是添加了一个文本框及其所有依赖项。

例如：

```
<Style TargetType="local:NumericOnlyTextBox">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:NumericOnlyTextBox">
                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                    <StackPanel>
                        <TextBox x:Name="TextBoxPart"
                             Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=EnteredText, Mode=TwoWay}"
                             MaxLength="{TemplateBinding MaxLength}">
                        </TextBox>                            
                    </StackPanel>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="IsTabStop" Value="False"></Setter>
</Style> 
```

# jquery - 在页面完全加载后执行代码或延迟代码的执行

> ID：15927492
> 
> 赞同：0
> 
> 时间：2013-04-10T13:39:45.020
> 
> 标签：jquery

```
$(document).ready(function() {
    if($('#upcomeEvent').length > 0)
        $('#upcomeEvent').insertAfter('#eventBanner');
}); 
```

> 在页面完全加载后执行代码或延迟代码的执行
> 
> 我需要`$('#upcomeEvent').insertAfter('#eventBanner');`在页面完全加载后执行另一个要求是延迟执行`$('#upcomeEvent').insertAfter('#eventBanner');`，比如大约 10 秒。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:41:22.347

您可以使用`setTimeout()`

```
setTimeout(function(){
    $('#upcomeEvent').insertAfter('#eventBanner');
},10000); // 10 second delay 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:44:02.770

试试下面的代码：

```
$(document).ready(function() {
    if($('#upcomeEvent').length > 0)

    var timer = setTimeout(function(){ 
    $('#upcomeEvent').insertAfter('#eventBanner');                  
    },10000);

}); 
```

# php - PHP和JSON：对象（stdClass）

> ID：15927495
> 
> 赞同：0
> 
> 时间：2013-04-10T13:39:52.673
> 
> 标签：php, json

我已将 JSON 文件解码为变量 ( `$tmp`)。`var_dump($tmp)`给出：

```
object(stdClass)#31 (3) {
    ["c"]=> int(2)
    ["r"]=> int(2)
    ["d"]=> object(stdClass)#32 (4) {
                ["1"]=> string(2) "un"
                ["2"]=> string(4) "deux"
                ["3"]=> string(5) "trois"
                ["4"]=> string(6) "quatre"
            }
} 
```

我想检索例如“un”，所以我这样做`$tmp->d["1"]`了，但它不起作用。我有以下错误：

```
Fatal error: Cannot use object of type stdClass as array in File.php on line 17 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:41:31.427

[json_decode](http://php.net/manual/en/function.json-decode.php)需要一个额外的参数，它将你的 json 字符串变成一个数组而不是一个对象

`json_decode($json_str, true)`

如评论所述，您`d`的 json 对象的属性是对象而不是数组，因此您无法使用数组表示法访问它（如您所见有错误）

我相信

```
$tmp->d->{'1'}
// "un" 
```

应该可以访问它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:48:05.057

php 有一个默认函数 json_encode 和 json_decode

```
$arrayOfValues = array();
$jsonString = json_encode($arrayOfValues); 
```

和

```
$arrayOfValues = json_decode($jsonString); 
```

使用此函数，您可以将变量与 json 一起使用。

# javascript - 使用 jQuery 管理复选框的功能

> ID：15927497
> 
> 赞同：0
> 
> 时间：2013-04-10T13:39:53.457
> 
> 标签：javascript, jquery, html

我有一个选择输入：

```
<select size="1" name="filter" style="width:90px;" id="priority_filter" onchange="filter_user_trainings();">
  <option value="all">All</option>
  <option value="optional">Optional</option>
  <option value="mandatory">Mandatory</option>
  <option value="essential">Essential</option>
  <option value="custom">Custom</option>
</select>

<div style="width: 50%; text-align: right; float: right">
  <input type="checkbox" id="opt_box" onchange="somestuff()">Optional
  <input type="checkbox" id="mand_box" onchange="somestuff()" checked="checked">Mandatory
  <input type="checkbox" id="ess_box" onchange="somestuff()">Essential                           
</div> 
```

和一个jQuery代码：

```
switch(priority_filter){
  case 'all':
    $("#opt_box").attr({checked: "checked"});
    $("#mand_box").attr({checked: "checked"});
    $("#ess_box").attr({checked: "checked"});
    break;

  case 'optional' :
    $("#opt_box").attr({checked: "checked"});
    $("#mand_box").removeAttr("checked");
    $("#ess_box").removeAttr("checked");
    break;

  case 'essential' :
    $("#ess_box").attr({checked: "checked"});
    $("#mand_box").removeAttr("checked");
    $("#opt_box").removeAttr("checked");
    break;

  case 'mandatory' :
    $("#mand_box").attr({checked: "checked"});
    $("#opt_box").removeAttr("checked");
    $("#ess_box").removeAttr("checked");

  case 'custom' :
    $("#mand_box").attr({checked: "checked"});
    $("#opt_box").removeAttr("checked");
    $("#ess_box").removeAttr("checked");
    break;    
} 
```

我想在“onchange”属性中调用该函数。当js切换复选框的值但它不起作用时。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:43:51.340

```
$("#opt_box").on('click',function(){
     if($(this).is(':checked')){
        // do your work here
     }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:49:00.807

尝试这个

```
<select size="1" name="filter" style="width:90px;" id="priority_filter" onchange="filter_user_trainings(this);"> 
```

JS

```
function filter_user_trainings(obj){
      var priority_filter=$(obj).val();
  switch(priority_filter){
     case 'all':
        $("#opt_box").attr({checked: "checked"});
        $("#mand_box").attr({checked: "checked"});
        $("#ess_box").attr({checked: "checked"});
    break;

    case 'optional' :
        $("#opt_box").attr({checked: "checked"});
        $("#mand_box").removeAttr("checked");
        $("#ess_box").removeAttr("checked");
    break;

    case 'essential' :
        $("#ess_box").attr({checked: "checked"});
        $("#mand_box").removeAttr("checked");
        $("#opt_box").removeAttr("checked");
    break;

    case 'mandatory' :
        $("#mand_box").attr({checked: "checked"});
        $("#opt_box").removeAttr("checked");
        $("#ess_box").removeAttr("checked");

    case 'custom' :
        $("#mand_box").attr({checked: "checked"});
        $("#opt_box").removeAttr("checked");
        $("#ess_box").removeAttr("checked");
    break;    
}
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:52:17.017

我认为应该是 `$("#opt_box").attr("checked", "checked")`；而不是 `$("#opt_box").attr({checked: "checked"});`。看看是不是这样。
您还需要将参数传递给您的方法`onchange="filter_user_trainings(<put selected option from dropdown here>);"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T14:17:17.813

看看[这个小提琴](http://jsfiddle.net/sTmTR/2/)。我稍微重构了您的代码，但这不是重要的部分。

1.  您应该[更改“已检查”**属性**而不是属性](https://stackoverflow.com/questions/5874652/prop-vs-attr)
2.  您必须自己触发更改事件，因为通过 JS 设置属性或属性时[不会触发该事件](https://stackoverflow.com/questions/9136000/set-prop-without-triggering-change)

因此，您必须在目标复选框上触发更改事件，然后**将**属性重新设置为您想要的值（就像在我的小提琴中一样），因为触发更改事件自然也会更改复选框的状态。

```
$checkboxes.prop('checked', true).trigger('change'); 
```

**更新：**好的，似乎用 JS 触发更改实际上不会更改复选框的属性，因此您可以在设置值后触发更改并获取正确的值（即当前状态）。更新了我的小提琴。

# ios - 如何制作iOS回调函数？

> ID：15927498
> 
> 赞同：4
> 
> 时间：2013-04-10T13:39:55.930
> 
> 标签：ios, objective-c, callback

我不知道如何制作一个函数，它会向父对象提供信息，它已经做了一些事情，所以我需要你的帮助。例如我想做的：

1.  `ViewController`类实例化类`BottomView`并将其添加为子视图。
2.  调用`BottomView`类的实例来启动动画。
3.  动画结束后，我想给`ViewController`类一个动画已经结束的标志，它可以`BottomView`从自身释放/删除一个实例。

我需要类似回调的东西。你能帮忙吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T14:00:39.437

你可以做这样的事情

```
@interface BottomView : UIView

@property (nonatomic, copy) void (^onCompletion)(void);

- (void)start;

@end

@implementation BottomView

- (void)start
{
  [UIView animateWithDuration:0.25f
                   animations:^{
                     // do some animation
                   } completion:^(BOOL finished){
                     if (self.onCompletion) {
                       self.onCompletion();
                     }
                   }];
}

@end 
```

你会用哪个

```
BottomView *bottomView = [[BottomView alloc] initWithFrame:...];
bottomView.onCompletion = ^{
  [bottomView removeFromSuperview];
  NSLog(@"So something when animation is finished and view is remove");
};
[self.view addSubview:bottomView];
[bottomView start]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T13:48:15.910

**1.你可以用积木来做！**

您可以将一些块传递给 BottomView。

**2\. 或者你可以用 target-action 来做。**

您可以将 BottomView 选择器`@selector(myMethod:)`作为操作传递，并将指向视图控制器的指针作为目标。动画结束后使用`performeSelector:`方法。

**3\. 或者你可以在你的viewController中定义代理@protocol并实现方法，** 并在BottomView中添加代理属性。@property (assign) id 委托人；

**如果你在底部视图中制作一些动画，你可以使用** [UIView](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/)方法

```
animateWithDuration:delay:options:animations:completion: 
```

使用块作为回调

```
[UIView animateWithDuration:1.0f animations:^{

    }]; 
```

**更新：**

在按钮视图.h

```
@class BottomView;

@protocol BottomViewDelegate <NSObject>

- (void)bottomViewAnimationDone:(BottomView *) bottomView;

@end

@interface BottomView : UIView

@property (nonatomic, assign) id <BottomViewDelegate> delegate;

.....
@end 
```

在按钮视图.m

```
- (void)notifyDelegateAboutAnimationDone {
   if ([self.delegate respondsToSelector:@selector(bottomViewAnimationDone:)]) {
      [self.delegate bottomViewAnimationDone:self];
   }
} 
```

在动画complit之后你应该调用`[self notifyDelegateAboutAnimationDone];`

您应该设置 ViewController 类以确认协议 BottomViewDelegate

在 MyViewController.h

```
 @interface MyViewController : UIViewController <BottomViewDelegate>
...
@end 
```

和 fe`viewDidLoad`你应该设置`bottomView.delegate = self;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T13:45:36.580

如果你特别想在动画发生后运行一个函数，你可以使用这个：

```
[UIView animateWithDuration:0.5 animations:^{
    //do animations
} completion:^(BOOL finished){
    //do something once completed
}]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T13:47:06.937

由于您正在使用动画，因此更具体的处理方法是使用动画代理。您可以将动画的委托设置为视图控制器，以便在动画结束后在您的视图控制器中调用下面的方法。

```
-(void) animationDidStop:(CAAnimation *)anim finished:(BOOL)flag 
```

要在您提到的第二步中做到这一点，您应该将 viewcontroller 作为额外参数传递，以便您可以在其中设置动画委托。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T20:51:18.807

非常感谢你们所有人。我尝试了两种方法，选择器和委托。这很酷，我想，我理解这些机制。我发现了一件奇怪的事情：

**视图控制器.h**

```
#import <UIKit/UIKit.h>
#import "BottomPanelView.h"

@interface ViewController : UIViewController <BottomPanelViewDelegate>

@property (nonatomic, assign) BottomPanelView* bottomPanelView;

@end 
```

**视图控制器.m**

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize bottomPanelView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    bottomPanelView = [[BottomPanelView alloc] initWithFrame:CGRectMake(0, 480, 320, 125)];
    [bottomPanelView setDelegate:self];
    [self.view addSubview: bottomPanelView];
    [bottomPanelView start];

}

//delegate function
- (void)bottomViewAnimationDone:(BottomPanelView *)_bottomPanelView
{
    NSLog(@"It Works!");
    [bottomPanelView removeFromSuperview]; //1) Does it clears memory?
    [bottomPanelView release];  //2) Strange is that if I have released it and set pointer to nil and use it below in touchesBegan it doesn't crashes. Why?
// but if I release it and don't set to nil, it will crash. Why reading from nil is okay and gives back 0 (myValue was set to 15)?
    bottomPanelView = nil;
}

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"Touched!");
    NSLog(@"Pointer: %p", bottomPanelView);
    NSUInteger val = [bottomPanelView myValue];
    NSLog(@"myValue: %d", val);
} 
```

我的问题在上面代码的注释中。请特别告诉我为什么从 nil 指针读取不会使应用程序崩溃？

# entity-framework - 鉴别器列类型

> ID：15927499
> 
> 赞同：1
> 
> 时间：2013-04-10T13:39:58.777
> 
> 标签：entity-framework

我一直在查看实体框架中 TPT（每种类型的表）的各种 Code First 示例。

我有一个具有 4 个具体实现的抽象基类，它们都共享完全相同的接口。这些使用 EF 存储在以抽象基类命名的单个表中。

我想做的是使用 EF Discriminator 列，但不使用 Code First 中的自动表创建，而是手动添加配置和映射。有谁知道这是否可行，如果可以，鉴别器列的类型是什么（名称、类型、长度、可为空等），以便我可以手动创建一个？

非常感谢。

# android - 如何在 GoogleMap 上添加按钮

> ID：15927504
> 
> 赞同：1
> 
> 时间：2013-04-10T13:40:21.217
> 
> 标签：android

我想在显示的 GoogleMap 上添加一个按钮。我的地图显示为

```
GoogleMap map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

我使用片段来显示地图，布局 xml 是

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          class="com.google.android.gms.maps.SupportMapFragment" /> 
```

我找到了一些将按钮加载到视图上的信息，但他们的只是普通视图，而不是 GoogleMap。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:54:33.100

您无法将按钮直接添加到 Google 地图对象中，因此您只有几个选项：

**1.**用您自己的实现覆盖 SupportMapFragment 对象并将按钮添加到其中。

**2.**简单的选项是在`fragment`里面设置a ，并直接使用a`FrameLayout`添加一个按钮，例如：`FrameLayout``LinearLayout`

```
 <FrameLayout 
     android:layout_width="match_parent"
     android:layout_height="match_parent">

   <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

        <Button
            android:id="@+id/bLocateMe"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/locate_me_button_selector"
            android:clickable="true"
            android:onClick="locateMeButtonOnClick"
            android:text="@string/locate_me"
            android:textColor="@color/my_white" />
     </LinearLayout>
    <fragment
        xmlns:map="http://schemas.android.com/apk/res-auto"
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</FrameLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:54:13.637

为什么要在地图上放置按钮？

我有一些解决方案：

1.  如果你想要静态按钮，你可以将地图片段放入RelativeView 并将按钮放置在RelativeView 中。
2.  否则，如果您想要按钮，它将与地图一起移动，您可以在地图上放置一些形状，例如使用 addCircle 方法的圆形，并使用 setOnMapClickListener 来处理地图上的点击。请参阅[GoogleMap API 参考](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap)

# python - 颜色编码 matplotlib 标记

> ID：15927512
> 
> 赞同：7
> 
> 时间：2013-04-10T13:40:45.167
> 
> 标签：python, colors, matplotlib

我正在尝试对我的情节标记进行颜色编码。

这个想法是有 x、y 和 z 值——x 和 y 包含坐标，z 包含对应于 0 到 150 之间的每个坐标（即 x,y 对）的数字。

现在，我需要为每个坐标绘制一个正方形，我可以使用 来完成`pyplot.plot(x,y, ls='s')`，我可以在其中分别设置标记边缘和面颜色。通常，所有这些正方形都有相同的颜色。

我正在尝试的是根据 z 值更改颜色，例如

z=0-30：黑色，30-60：蓝色，60-90：绿色，90-120：黄色，120-150：红色

我尝试将数据分箱到这些箱中，但我不知道如何将其映射到颜色并相应地绘制它。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:05:46.610

将这些 X、Y 坐标存储在单独的 X、Y 中（每个 Z 范围 1 对），然后用多条绘图线将它们全部绘制出来。

概念示例：

```
X1,Y1 = """store your Z0-30 here"""
X2,Y2 = """store your z30-60 here"""
X3,Y3 = """store your z60-z90 here"""
X4,Y4 = """store your z90-120 here"""
X5,Y5 = """store your z120-150 here"""
fig=plt.figure()
pyplot.plot(X1,Y1,color='black')
pyplot.plot(X2,Y2,color='blue')
pyplot.plot(X3,Y3,color='green')
pyplot.plot(X4,Y4,color='yellow')
pyplot.plot(X5,Y5,color='red')
plt.show() 
```

我建议使用[散点图](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.scatter)，这听起来更适合您的描述。在这种情况下，将 pyplot.plot 更改为 pyplot.scatter。您可以使用 cmap 按 Z 轴为它们着色。您还可以为每个组分配自定义标记，如[本](http://matplotlib.org/examples/pylab_examples/scatter_custom_symbol.html)示例中所示。

# c# - 如何在 iframe 中获取 html 代码

> ID：15927513
> 
> 赞同：2
> 
> 时间：2013-04-10T13:40:51.547
> 
> 标签：c#, asp.net

我有以下问题。我想从网站检索一些值。除非从已知来源检索到这些值，否则本网站不会回复。这个已知来源嵌入了一个 iframe 来显示这些值，并且是公开的。使用 iframe 将此站点嵌入我的站点是一种选择，但在此 iframe 中需要做出一些决定。是否可以编写一个类库来加载页面（返回单个 iframe）获取此 iframe 中的所有元素，发布一些值并获得正确的结果？

```
Site1/Page ==> Iframe ==>Site2/Page 
```

希望这个问题是可以理解的。

我认为因为它可能使用浏览器和一些鼠标点击，所以它一定是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:44:31.920

此[链接](http://www.codeproject.com/Articles/3858/How-to-get-the-HTML-source-code-from-an-editable-I)可能会对您有所帮助。简而言之，它设置了一个`Hidden`字段，然后在按钮 Submit Click 方法上从 iFrame 填充 HTML。

```
<%@ Page Language="vb" AutoEventWireup="false" Codebehind="test.aspx.vb" Inherits="test"%>
<form id=frmMain method=post runat="server">
    <iframe id=ifrHTML name=ifrHTML runat="server"></iframe>
    <asp:Button id=cmdSend runat="server" Text="Send"></asp:Button>
    <input type=hidden name=hidValue>
</form>
<script>
    //Set the IFRame to Desing Mode.
    ifrHTML.document.designMode = "on";            
</script>

// Code Behind
Private Sub Page_Load(ByVal sender As System.Object, _
        ByVal e As System.EventArgs) Handles MyBase.Load
    cmdSubmit.Attributes.Add("onClick", _
       "document.frmMain.hidValue.value = ifrHTML.document.body.innerHTML;")
End Sub

Private Sub cmdSubmit_Click(ByVal sender As System.Object,_
     ByVal e As System.EventArgs) Handles cmdSubmit.Click
    Dim strValue As String

    strValue = Request.Form("hidValue")
End Sub 
```

*   文章代码

# c# - 是否有充分的理由不依赖业务逻辑中的数据库密钥完整性？

> ID：15927515
> 
> 赞同：4
> 
> 时间：2013-04-10T13:41:03.593
> 
> 标签：c#, .net, sql, entity-framework, business-logic

我正在编写一个允许插入到我的数据库中的链接表的方法，我想知道我是否需要首先检查以确保指定的 PK 确实存在于链接表中。在我看来，我可以 100% 依赖数据库来为我强制执行这些 FK 约束，并通过表的 PK 防止重复的表条目，这似乎是合乎逻辑的。事实上，如果数据库无论如何都要检查它们，那么事先检查这些对我来说似乎是非常多余和浪费资源的。另外，请注意我在这里谈论的是非常基本的 RDBMS 概念；即使切换到另一种数据存储机制，我也希望它们同样得到执行。

那么在这种情况下，是否有充分的理由不完全依赖数据库来确保 FK 和 PK 的数据完整性？换句话说：

```
using (var context = new MyDbContext()) {
    try {
        context.LinkEntries.Add(new LinkEntry { key1 = x, key2 = y });
        return context.SaveChanges() > 0;
    }
    catch (DbUpdateException) {
        // Duplicate, or foreign key violation
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:51:58.783

关系数据库将强制引用完整性 - 假设您已正确设置外键。

1）这将确保`key1`并`key2`实际指向主表中的行。

2) 如果您还想确保链接表中只能存在具有特定外键对的一行，则必须在数据库中对这些列添加唯一约束。

如果你使用这对外键作为你的链接表主键，你应该没问题。

# c# - 如何检查 svn 上的文件是否与本地文件 C#(sharpsvn) 相同

> ID：15927516
> 
> 赞同：1
> 
> 时间：2013-04-10T13:41:09.720
> 
> 标签：c#, sharpsvn

我正在使用 SharpSvn 库。我想检查我在本地拥有的文件是否与颠覆服务器上的文件相同。有谁知道我是怎么做到的？目前这是我正在尝试做的，但它说“无法连接到 URL 上的存储库”

```
 public bool IsDirectoryTheSame(string folderpath)
    {
        var IsSameDirectory = false;
        var installfolderlocal = GetInstallationFolder(folderpath);
        using (SvnClient svnClient = new SvnClient())
        {
            SvnUriTarget target1 =
                new SvnUriTarget(
                    new Uri(string.Format("{0}{1}", svnclientpath, folderpath)));
            SvnUriTarget target2 =
                new SvnUriTarget(
                    new Uri(installfolderlocal));

            using(var stream = new MemoryStream())
            {
            IsSameDirectory =  svnClient.Diff(target1,target2,stream);
            }
        }
        return IsSameDirectory;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:06:09.047

我从您的问题中假设本地文件是受版本控制的，在这种情况下，您可以使用 GetInfo() 获取存储库中文件的最新修订号，并将其与本地文件的最新修订号进行比较。

[另一个建议](https://stackoverflow.com/a/13500552/1123294)是使用 GetUriFromWorkingCopy()。我个人没有亲自测试过，但值得一试。

无论如何，您应该将差异作为最后​​的手段，因为这可能是一个昂贵的调用。但是，如果文件不受版本控制，那可能是您唯一的选择。

# .net - 从单独的线程中绘画？

> ID：15927521
> 
> 赞同：1
> 
> 时间：2013-04-10T13:41:14.887
> 
> 标签：.net, vb.net, multithreading, winforms, graphics

我目前正在开发一个使用图形类来创建游戏中所有图片的游戏，我还试图从一个单独的线程中绘制图片以阻止我的主线程冻结。但是每次我尝试运行程序时，表格上什么都没有出现，我得到这个错误......

> System.NullReferenceException：对象引用未设置为对象的实例。
> 
> > 在 c:\users\samuel\documents\visual studio 2012\Projects\Single_Player\Single_Player\Form1.vb:line 12 中的 Single_Player.Form1.mainPaint(PaintEventArgs e)

如果我的代码确实有效，我希望它能在屏幕上移动一个椭圆，无论如何这是我的代码......

```
Private Sub Form1_Load(sender As Object, e As EventArgs) Handles Me.Load
    Dim paintT As New Threading.Thread(AddressOf mainPaint)
    paintT.Start()
End Sub

Private Sub mainPaint(e As PaintEventArgs)
    e.Graphics.SmoothingMode = Drawing2D.SmoothingMode.AntiAlias
    e.Graphics.CompositingQuality = Drawing2D.CompositingQuality.HighQuality
    Dim playerX As Integer = 0
    Dim playerY As Integer = 206
    Do While 0 / 0
        e.Graphics.DrawRectangle(New Pen(Color.FromArgb(128, Color.Black)), 0, 0, 884, 24)
        e.Graphics.FillRectangle(New SolidBrush(Color.FromArgb(128, Color.Black)), 0, 0, 884, 24)
        e.Graphics.DrawString("Life: 5", New Font("DigifaceWide", 20, GraphicsUnit.Pixel), New SolidBrush(Color.FromArgb(191, Color.Green)), 2, 0)
        e.Graphics.DrawString("Score: 0", New Font("DigifaceWide", 20, GraphicsUnit.Pixel), New SolidBrush(Color.FromArgb(191, Color.White)), 100, 0)
        e.Graphics.FillEllipse(New SolidBrush(Color.FromArgb(128, Color.Blue)), playerX, playerY, 24, 24)
        playerX = playerX + 1
        playerY = playerY + 1
        e.Graphics.Clear(Color.Transparent)
        Threading.Thread.Sleep(50)
    Loop
End Sub 
```

**更新（再次）** 我的代码到目前为止（这次我通过设计窗口添加了一个计时器）......

```
Private Sub Form1_Shown(sender As Object, e As EventArgs) Handles Me.Shown
    Timer1.Interval = 50
    Timer1.Start()
End Sub

Private Sub mainBackgroundPB_Paint(sender As Object, e As PaintEventArgs) Handles Timer1.Tick
    e.Graphics.SmoothingMode = Drawing2D.SmoothingMode.AntiAlias
    e.Graphics.CompositingQuality = Drawing2D.CompositingQuality.HighQuality
    e.Graphics.DrawRectangle(New Pen(Color.FromArgb(128, Color.Black)), 0, 0, 884, 24)
    e.Graphics.FillRectangle(New SolidBrush(Color.FromArgb(128, Color.Black)), 0, 0, 884, 24)
    e.Graphics.DrawString("Life: 5", New Font("DigifaceWide", 20, GraphicsUnit.Pixel), New SolidBrush(Color.FromArgb(191, Color.Green)), 2, 0)
    e.Graphics.DrawString("Score: 0", New Font("DigifaceWide", 20, GraphicsUnit.Pixel), New SolidBrush(Color.FromArgb(191, Color.White)), 100, 0)
    e.Graphics.FillEllipse(New SolidBrush(Color.FromArgb(128, Color.Blue)), playerX, playerY, 24, 24)
    playerX = playerX + 1
    playerY = playerY + 1
    e.Graphics.Clear(Color.Transparent)
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:12:55.560

您不能在工作线程中绘制，窗口基本上是线程不安全的。当计时器滴答时，您的计时器 Tick 事件处理程序将崩溃并烧毁。Tick 事件没有 PaintEventArgs 参数。

只有 Paint 事件具有这些参数，添加该事件并移动您的代码。您可以使用计时器触发绘制，使事件处理程序如下所示：

```
Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    Me.Invalidate()
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-12T21:01:10.107

上面的答案是不正确的。它可以*做到*，然后它可以*做得更好*。

计时器以预设的时间间隔运行，这对可预测性有好处，但对性能不利，因为它总是以相同的速度或更慢地运行。计时器在游戏中很昂贵，因此如果有的话，请相应地使用它们。

下面是我写的一个快速示例，展示了在线程中绘图，将其传递给委托并使用扫描层将图像写入主 UI。

改进的建议也会被评论。

```
Public Class Form1

Enum enumGameObjectTypes
    RedBox = 0
    BlueBox = 1
    YellowCircle = 2
End Enum

Structure structGameObjects
    Dim Type As enumGameObjectTypes
    Dim Location As Point
End Structure

' When you have global variables, they are accessible outside the thread.
' You cannot access them on the drawing thread however, without using SyncLock to lock
' the object.
Public GameObjects As New List(Of structGameObjects)
Public tDrawingThread As New System.Threading.Thread(AddressOf DrawingThread)

' We have to use delegates to pass the image
Delegate Sub DrawingDelegateSub(TheDrawnImage As Image)
Public DrawingDelegate As DrawingDelegateSub

' Set this to true when it's time to exit cleanly
Public _ExitThreadSafelyNow As Boolean = False

Public Sub Form1_Load(sender As Object, e As EventArgs) Handles Me.Load
    Dim rand As New Random

    For cnt = 1 To rand.Next(5, 20)
        ' Create some game objects
        Dim newObj As New structGameObjects
        With newObj
            .Type = rand.Next(0, 2)
            .Location = New Point(rand.Next(0, cnt * 100), rand.Next(0, cnt * 50))
        End With
    Next

    ' Set up a delegate (basically a worker that can "move data between threads" safely) 
    DrawingDelegate = AddressOf DrawImage

    ' Start the thread
    tDrawingThread.Start()
End Sub

Public Sub DrawImage(ByVal DrawnImage As Bitmap)

    Dim tmpImage As New Bitmap(1024, 768)

    ' Draw the image to the picture box using an intermediary layer...
    ' The reason we dont just say pb.Image = DrawnImage is because the bitmaps are passed by pointer references NOT just by the image
    ' So, passing it direct would be non-thread safe.
    '
    ' This also isn't the *right* way to do this, but it is just an example.
    '
    ' What we're doing is all the heavy lifting in the thread and then we're scanning pixel by pixel through the image drawn by the thread.
    ' 
    ' The performance here will be awful, so the fix; if you can understand how it works, is to use Bitmap.LockBits;
    ' Performance will ramp up 1000x right away. https://msdn.microsoft.com/en-us/library/5ey6h79d(v=vs.110).aspx
    For x = 1 To DrawnImage.Width - 1
        For y = 1 To DrawnImage.Height - 1
            tmpImage.SetPixel(x, y, DrawnImage.GetPixel(x, y))
        Next
    Next

    pb.Image = tmpImage
    Debug.Print("Wrote frame !")
End Sub

' Main drawing loop
Sub DrawingThread()
    Dim rectBounds As New Rectangle(0, 0, 1024, 768)

    '
    '
    Do Until _ExitThreadSafelyNow = True

        ' Set up the next frame
        Dim ImageBuffer As New Bitmap(rectBounds.Width, rectBounds.Height)
        Dim g As Graphics = Graphics.FromImage(ImageBuffer) ' Create the graphics object
        g.FillRectangle(Brushes.Black, rectBounds)

        ' Lock the gameobjects object until we're done using it.
        SyncLock GameObjects
            For Each obj In GameObjects
                Select Case obj.Type
                    Case enumGameObjectTypes.RedBox
                        g.FillRectangle(Brushes.Red, New Rectangle(obj.Location.X, obj.Location.Y, 15, 15))
                        '
                    Case enumGameObjectTypes.BlueBox
                        g.FillRectangle(Brushes.Blue, New Rectangle(obj.Location.X, obj.Location.Y, 20, 20))
                        '
                    Case enumGameObjectTypes.YellowCircle
                        g.FillEllipse(Brushes.Yellow, New Rectangle(obj.Location.X, obj.Location.Y, 15, 15))
                        '
                    Case Else
                        g.FillEllipse(Brushes.Pink, New Rectangle(obj.Location.X, obj.Location.Y, 15, 15))
                End Select
            Next
        End SyncLock

        '/// All done drawing by this point...

        'TODO: Eventually implement Bitmap.LockBits here!

        SyncLock ImageBuffer
            ' Send the image onto the main thread.
            Call DrawingDelegate(ImageBuffer)
        End SyncLock

    Loop
End Sub

Private Sub Form1_Closing(sender As Object, e As CancelEventArgs) Handles Me.Closing

    _ExitThreadSafelyNow = True
End Sub
End Class 
```

# .net - 相对源绑定 Silverlight

> ID：15927529
> 
> 赞同：1
> 
> 时间：2013-04-10T13:41:32.113
> 
> 标签：.net, silverlight

我正在尝试将相对源绑定与组合框一起使用，它自身的绑定正在工作并且数据被正确加载，但是对于有效的相对源绑定，我无法获得类似于 DisplayMemberBinding 的东西。

代码：

```
<ComboBox MinWidth="60" Margin="5,0,0,0" >
    <local:BindingHelper.Binding>
        <local:BindingList>
            <local:RelativeSourceBinding Path="IncPOCYesNo" TargetProperty="ItemsSource" BindingMode="TwoWay" RelativeMode="ParentDataContext" />
            <!--<local:RelativeSourceBinding Path="CurrentIncidentDetail.ExistingProcedure" TargetProperty="SelectedValue" BindingMode="TwoWay" RelativeMode="ParentDataContext" />-->
         </local:BindingList>
     </local:BindingHelper.Binding>
</ComboBox> 
```

IncYesNo 是一个具有 Name 和 Id 属性的类

当我按照 ComboBox Displays Namespace.IncYesNo 运行它时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:52:04.653

干得好，

为什么你把绑定路径作为你的类，它应该是集合。让我假设它是一个列表。

```
<ComboBox >
    <local:BindingHelper.Binding>
        <local:BindingList>
            <local:RelativeSourceBinding Path="List<IncPOCYesNo>" TargetProperty="ItemsSource"/>
        </local:BindingList>
    </local:BindingHelper.Binding>
</ComboBox> 
```

[相对源绑定](http://blog.thekieners.com/2010/09/08/relativesource-binding-with-findancestor-mode-in-silverlight/)

# jquery - jquery 选项卡的 Next-Prev 功能

> ID：15927534
> 
> 赞同：1
> 
> 时间：2013-04-10T13:41:39.597
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs, jquery-tabs

在单击 Next 和 Prev html 按钮时，我需要 jquery 选项卡的 Next、Previous 功能。我正在使用`jquery.1.9.1.js`和`jquery-ui-1.10.2.custom.js`归档。我已经实现了下面的代码，但对我不起作用。

```
<script language="javascript" type="text/javascript">
    $(function () {
        $("#ui-tabs").tabs();
        function GetSelectedTabIndex() {
            return $('#ui-tabs').tabs('option', 'selected');
        }

        function ShowTabs(stepNum) {
            var num = parseInt(stepNum);
            $('#ui-tabs').tabs('option', 'active', parseInt(GetSelectedTabIndex()) +  num);
        }

        $('#prev').click(function () {
            ShowTabs(-1);
        })

        $('#next').click(function () {
            ShowTabs(-1);
        })
    });
</script>

<div id="ui-tabs">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
        <li><a href="#tabs-3">Aenean lacinia</a></li>
    </ul>
    <div id="tabs-1">Tab1 content </div>
    <div id="tabs-2">Tab2 content </div>
    <div id="tabs-3">Tab3 content </div>
</div>
<a id="prev" class="button-style" href="#">Prev</a>
&nbsp;<a id="next" class="button-style" href="#">Next</a> 
```

但`GetSelectedTabIndex`返回 null。执行中有什么问题。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:03:17.203

这对我有用：

```
$( "#ui-tabs" ).tabs();

 function GetSelectedTabIndex() {
        return $('#ui-tabs').tabs('option', 'selected');
 }

function ShowTabs(stepNum) {
    var num = parseInt(stepNum);
    $('#ui-tabs').tabs('option', 'active', parseInt(GetSelectedTabIndex()) + num);
} 
```

在我看来，使用该`$tabs`变量没有意义，因为它是您的`GetSelectedTabIndex`函数的本地变量，并且每个函数调用只使用一次......

演示：http: [//jsfiddle.net/darkajax/A8ejN/](http://jsfiddle.net/darkajax/A8ejN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:36:29.023

```
<script src="jquery-1.5.1.min.js" type="text/javascript"></script>
<script src="jquery-ui.js" type="text/javascript"></script>
<link href="jquery-ui.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
    $(function () {
        $("#ui-tabs").tabs();
    });
    function GetSelectedTabIndex() {
        var $tabs = $('#ui-tabs').tabs();
        var selected = $tabs.tabs('option', 'selected');
        return selected;
    }

    function ShowTabs(stepNum) {
        var num = parseInt(stepNum);
        $('#ui-tabs').tabs('select', parseInt(GetSelectedTabIndex()) + num);
    }
</script>

<div id="ui-tabs">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
        <li><a href="#tabs-3">Aenean lacinia</a></li>
    </ul>
    <div id="tabs-1">
        Tab1 content
    </div>
    <div id="tabs-2" >
        Tab2 content
    </div>
    <div id="tabs-3">
        Tab3 content
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:42:14.227

此版本中没有`select`jQuery UI 选项卡的方法。要使您的功能正常工作，您需要将代码更改为

```
var i=$('#ui-tabs').tabs( "option", "active"); //get selected tab index
$('#ui-tabs').tabs( "option", "active", i+num ); // num is your tab choise (+1,-1) 
```

这对我有用。尝试这个。

# iphone - 使用 webclient 下载的应用程序无法在设备上运行，但可以在模拟器、monotouch iphone 上运行

> ID：15927535
> 
> 赞同：0
> 
> 时间：2013-04-10T13:41:41.047
> 
> 标签：iphone, xamarin.ios, webclient

我正在通过 webclient 在我的 monotouch iphone 应用程序中下载 json 数据。并使用 json.NET 4.0 R3 for MonoTouch 解析 json 数据。模拟器上的一切都是正确的，但是当我创建一个临时 api 文件并将其安装在 iphone 上时，它不起作用。我手头没有设备来调试它并找到错误。任何机构都可以帮助我解决模拟器和设备上的不同之处吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:13:00.510

如果没有更多信息，我不知道这是否是您的问题，但我知道我的应用程序遇到了问题，它在模拟器中运行良好但在设备上失败。我的问题是因为蹦床。在设备上运行时，我必须增加我的。这是此问题的一个示例：[MonoTouch SIGABRT "Ran out of trampolines of type 2" 错误](https://stackoverflow.com/questions/9354391/monotouch-sigabrt-ran-out-of-trampolines-of-type-2-error)

**编辑**
我的内部部署也遇到了这个问题（应用程序无法下载）。您是否使用正确的证书来签署应用程序以进行分发？您需要确保您使用的是分发证书。您需要确保在此处拥有证书：[https](https://developer.apple.com/account/ios/certificate/certificateList.action?type=distribution) ://developer.apple.com/account/ios/certificate/certificateList.action?type=distribution和此处的配置文件：[https ://developer.apple.com/ account/ios/profile/profileList.action?type=production](https://developer.apple.com/account/ios/profile/profileList.action?type=production)。

您是否连接了物理设备（为开发而准备）以进行调试并确保它在设备上正常工作？这需要是你的第一步。如果*这*可行，那么问题可能是证书/配置文件问题，与 MonoTouch 无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:01:05.607

它不是来自网络客户端。请考虑使用 json.NET 4.0 R3 for MonoTouch 解析 json 的代码。最好使用 xamrin 自己发布的 JSON.Net 组件。

# postgresql - 带有分隔符“|”的 CSV 中的 PostgreSQL COPY

> ID：15927536
> 
> 赞同：0
> 
> 时间：2013-04-10T13:41:41.190
> 
> 标签：postgresql

请问，谁能帮我解决这个问题？

我想在 Postgres 数据库中使用分隔符“|”的 CSV 文件中的数据创建一个表，在尝试使用命令 COPY（或 Import）时出现此错误：

```
ERROR:  extra data after last expected column
CONTEXT:  COPY twitter, line 2: ""Sono da Via Martignacco 
http://t.co/NUC6MP0z|"<a href=""http://foursquare.com"" rel=""nofollow"">f..." 
```

CSV 的前 2 行：

```
txt|"source"|"ulang"|"coords"|"tweettime_wtz"|"country"|"id"|"userid"|"in_reply_user_id"|"in_reply_status_id"|"uname"|"ucreationdate"|"utimezone"|"followers_count"|"friends_count"|"x_coords"|"y_coords"
Sono da Via Martignacco http://t.co/NUC6MP0z|"<a href=""http://foursquare.com"" rel=""nofollow"">foursquare</a>"|"it"|"0101000020E6100000191CA9E7726F2A4026C1E1269F094740"|"2012-05-13 10:00:45+02"|112|201582743333777411|35445264|""|""|"toffo93"|"2009-04-26 11:00:03"|"Rome"|1044|198|13.21767353|46.07516943 
```

对于这些数据，我在 Postgres 中创建了一个表“Twitter”

```
CREATE TABLE public.twitter
(
  txt character varying(255),
  source character varying(255),
  ulang character varying(255),
  coords geometry(Point,4326),
  tweettime_wtz character varying(255),
  country integer,
  userid integer NOT NULL,
  in_reply_user_id character varying(255),
  in_reply_status_id character varying(255),
  uname character varying(255),
  ucreationdate character varying(255),
  utimezone character varying(255),
  followers_count integer,
  friends_count integer,
  x_coords numeric,
  y_coords numeric,
  CONSTRAINT id PRIMARY KEY (userid)
)
WITH (
  OIDS=FALSE
);
ALTER TABLE public.twitter
  OWNER TO postgres; 
```

有什么想法吗，伙计们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:33:02.243

我的解决方案：

所以问题出在我的 CSV 文件中：它有不可见的引号符号。我在 Excel 中打开 CSV 时还没有看到它们，我是这样看到的：

```
txt|"source"|"ulang"|"coords"|"tweettime_wtz"|"country"|"id"|"userid"|"in_reply_user_id"|"in_reply_status_id"|"uname"|"ucreationdate"|"utimezone"|"followers_count"|"friends_count"|"x_coords"|"y_coords"
Sono da Via Martignacco http://t.co/NUC6MP0z|"<a href=""http://foursquare.com"" rel=""nofollow"">foursquare</a>"|"it"|"0101000020E6100000191CA9E7726F2A4026C1E1269F094740"|"2012-05-13 10:00:45+02"|112|201582743333777411|35445264|""|""|"toffo93"|"2009-04-26 11:00:03"|"Rome"|1044|198|13.21767353|46.07516943 
```

但是当我在记事本中打开 CSV 时，我看到的却不同：

```
"txt"|"source"|"ulang"|"coords"|"tweettime_wtz"|"country"|"id"|"userid"|"in_reply_user_id"|"in_reply_status_id"|"uname"|"ucreationdate"|"utimezone"|"followers_count"|"friends_count"|"x_coords"|"y_coords"
"Sono da Via Martignacco http://t.co/NUC6MP0z"|"<a href=""http://foursquare.com"" rel=""nofollow"">foursquare</a>"|"it"|"0101000020E6100000191CA9E7726F2A4026C1E1269F094740"|"2012-05-13 10:00:45+02"|112|201582743333777411|35445264|""|""|"toffo93"|"2009-04-26 11:00:03"|"Rome"|1044|198|13.21767353|46.07516943
" 
```

所以我应该删除所有引号（在记事本中并将文件保存为 CSV），以便文本变为：

```
txt|source|ulang|coords|tweettime_wtz|country|id|userid|in_reply_user_id|in_reply_status_id|uname|ucreationdate|utimezone|followers_count|friends_count|x_coords|y_coords
Sono da Via Martignacco http://t.co/NUC6MP0z|<a href=http://foursquare.com rel=nofollow>foursquare</a>|it|0101000020E6100000191CA9E7726F2A4026C1E1269F094740|2012-05-13 10:00:45+02|112|201582743333777411|35445264|||toffo93|2009-04-26 11:00:03|Rome|1044|198|13.21767353|46.07516943 
```

只有在此之后，我才能毫无问题地在 pgAdmin 中使用导入工具！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:29:53.977

目标表包含 16 列，但您的文件包含 17 列。

这似乎`id`是缺少的领域。

尝试将您的表设置为：

```
CREATE TABLE public.twitter
(
  txt character varying(255),
  source character varying(255),
  ulang character varying(255),
  coords geometry(Point,4326),
  tweettime_wtz character varying(255),
  country integer,
id character varying,
  userid integer NOT NULL,
  in_reply_user_id character varying(255),
  in_reply_status_id character varying(255),
  uname character varying(255),
  ucreationdate character varying(255),
  utimezone character varying(255),
  followers_count integer,
  friends_count integer,
  x_coords numeric,
  y_coords numeric,
  CONSTRAINT twitter_pk PRIMARY KEY (userid)
)
WITH (
  OIDS=FALSE
); 
```

根据需要更改`id`字段的数据类型。

# java - 在播放框架 2.1.0-java 上使用带有 -javaagent 的检测类时出错

> ID：15927538
> 
> 赞同：2
> 
> 时间：2013-04-10T13:41:43.963
> 
> 标签：java, playframework, instrumentation, playframework-2.1, javaagents

我一直在使用检测类“SizeOfAgent”来计算我的 play 2.0.4 环境的内存需求。为了做到这一点，我将“-javaagent:lib\sizeof.jar”放在文件 framework\build.bat 中的 java 命令行上。这个 jar 文件有一个清单文件，其中包含对 sizeof.agent 的预主类配置。 SizeOfAgent 这工作正常，我一直在我的应用程序的某些组件上使用 fullSizeOf 方法。

升级到play 2.1.0版本后，此功能不再起作用。我收到错误消息：play.api.UnexpectedException：意外异常 [IllegalStateException：无法访问检测环境。请检查是否在 java 的“-javaagent”命令行参数中指定了包含 SizeOfAgent 类的 jar 文件。]

生成此错误是因为“静态 Instrumentation inst”返回 null：

```
 public static long sizeOf(Object o, boolean print) {
            if(inst == null) {
                    throw new IllegalStateException("Can not access instrumentation environment.\n" +
                                    "Please check if jar file containing SizeOfAgent class is \n" +
                                    "specified in the java's \"-javaagent\" command line argument.");
            }
            if (print) {
                System.out.println(o.getClass().getName() + " : " + inst.getObjectSize(o));
            }
            return inst.getObjectSize(o);
    } 
```

有没有人尝试使用带有 play 2.1.0 的仪器类？

# twitter-bootstrap - Angular 元素包装器指令

> ID：15927539
> 
> 赞同：3
> 
> 时间：2013-04-10T13:41:45.187
> 
> 标签：twitter-bootstrap, angularjs, angularjs-directive

这是我们通常在 twitter boostrap 表单中看到的代码片段：

```
 <div class="control-group">
    <label class="control-label" for="email">Enter Email</label>
    <div class="controls">
       <input type="email" name="email" ng-model="member.email" required >
    </div>
 </div> 
```

表单代码中有很多字段会很吵，所以我想在我的 Angular 驱动的 html 中使用这样的东西：

```
<formy label-for="email" label-text="Enter Email">
      <input type="email" name="email" ng-model="member.email" required >
</formy> 
```

这可以通过Angular中的指令来完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:49:16.240

是的，可以做到

```
app.directive('formy', function() {
  return {
        restrict: 'E',
        transclude: true,
        scope: {
            labelText: "@",
      labelFor: '@'
        },
        template : '<div class="control-group">' +
        '<label for="{{labelFor}}" class="control-label">{{labelText}}</label>' +
        '<div class="controls" ng-transclude></div>' +
        '</div>', 
        replace: true
    };
}) 
```

演示：[Plunker](http://plnkr.co/edit/y8dynDl3njBq9zS89GXu?p=preview)

# c# - WPF：触发动画 - 沿 Y 轴向下移动控件

> ID：15927542
> 
> 赞同：2
> 
> 时间：2013-04-10T13:41:47.793
> 
> 标签：c#, .net, wpf, xaml, animation

我有一个要向下移动的控件`MouseOver`。不幸的是，当我将鼠标悬停时动画不会运行，但背景会改变颜色。

`Toolkit:Dialog`是一个自定义对话框控件继承`ContentControl`。此外，在最终实现中，我不会使用 MouseOver - 目前只是为了便于测试。

```
<Style x:Key="blah" TargetType="Toolkit:Dialog">
    <Trigger Property="IsMouseOver" Value="True">
        <Setter Property="Toolkit:CanvasControl.Background" Value="White" />
        <Trigger.EnterActions>
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)" From="0" To="100" Duration="00:00:01.000" />
                </Storyboard>
            </BeginStoryboard>
        </Trigger.EnterActions>
    </Trigger>
</Style> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T13:54:35.013

我认为您必须为`TranslateTransform`RenderTransform 提供一个空白，因为通常在`RenderTransform`. 因此，您正在尝试为不存在的东西制作动画。只需添加`TranslateTransform`并查看是否有效：

```
<Style x:Key="blah" TargetType="Toolkit:Dialog">
    <Setter Property="RenderTransform">
        <Setter.Value>
            <TranslateTransform/>
        </Setter.Value>
    </Setter>
    <Trigger Property="IsMouseOver" Value="True">
        <Setter Property="Toolkit:CanvasControl.Background" Value="White" />
        <Trigger.EnterActions>
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)" From="0" To="100" Duration="00:00:01.000" />
                </Storyboard>
            </BeginStoryboard>
        </Trigger.EnterActions>
    </Trigger>
</Style> 
```

# c# - 使数据对 FileSystemWatcher 事件处理程序可用

> ID：15927543
> 
> 赞同：1
> 
> 时间：2013-04-10T13:41:49.370
> 
> 标签：c#, .net, task-parallel-library, filesystemwatcher

我有 C# 5.0 应用程序，其中涉及`FileSystemWatcher`在多个不同目录上使用 a 。

此应用程序包含一个`List<>`对象。每个对象都描述了被监视的目录，以及许多其他需要`FileSystemWatcher`事件处理程序访问的数据。这些对象是 type `CustomDirectorySetting`。

这是一个服务器应用程序，我希望`FileSystemWatcher`经常调用 的事件处理程序。我必须确保他们能够跟上他们的工作，并且不会落后于对文件更改事件的响应。值得补充的是，被监控的目录对于运行应用程序的机器来说是本地的。

如何使`FileSystemWatcher`' 的`CustomDirectorySetting`对象快速可供每个 的事件处理程序`FileSystemWatcher`使用，我是否应该考虑使用任务并行库进行此实现？我是 TPL 的新手，所以我很感激你对哪些方面最合适的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:57:32.080

由于 FileSystemWatcher 似乎可用作基类，因此您可以从中派生自己的类并添加 CustomDirectorySetting 类型的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:56:29.580

与 nvoigt 所说的相反，我认为创建一个派生自的类型`FileSystemWatcher`是一种矫枉过正的做法。

更好的选择是在您的`CustomDirectorySetting`类型上使用事件处理程序，这意味着它将能够通过`this`.

```
class CustomDirectorySetting
{
    public string Directory { get; set; }

    public void OnChanged(object sender, FileSystemEventArgs e)
    {
        // your code here
    }
}

…

List<CustomDirectorySetting> list = …;
foreach (var setting in list)
{
    var fsw = new FileSystemWatcher(setting.Directory);
    fsw.Changed += setting.OnChanged;
    fsw.EnableRaisingEvents = true;
} 
```

另一种选择是使用 lambda：

```
private static void OnChanged(
    CustomDirectorySetting setting, FileSystemEventArgs eventArgs)
{
    // your code here
}

…

foreach (var setting in list)
{
    var fsw = new FileSystemWatcher(setting.Directory);
    CustomDirectorySetting settingCopy = setting;
    fsw.Changed += (sender, eventArgs) => OnChanged(settingCopy, eventArgs);
    fsw.EnableRaisingEvents = true;
} 
```

在这种情况下，最好不要直接在 lambda 中使用循环变量，因为它在旧版本的 C# 中无法正常工作。

# android - 指标元素之间的空间

> ID：15927546
> 
> 赞同：8
> 
> 时间：2013-04-10T13:41:55.200
> 
> 标签：android, android-viewpager, viewpagerindicator

如何增加/减少指标元素之间的空间`ViewPagerIndicator`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-08-21T21:02:40.217

我用过`CirclePageIndicator`。我能够通过以下步骤在两个指标之间留出更多空间：

1.  打开源代码，`CirclePageIndicator`找到变量`mRadius`

2.  在 235 附近的行号处，您会发现如下一行：

    ```
    final float threeRadius = mRadius * (some value here) 
    ```

3.  改变这个值，并使用它。我用于`5`我的案例，它给了我一个很好的结果。

希望它能解决你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-21T18:08:41.483

如果没有深入研究，没有记录的方法可以做到这一点。

我认为@Md_Omar 的回答是错误的，因为这会增加指标的大小，但不会增加它们的分离距离。

如果那是你想要的，你可以使用 app:radius="5dp" 代替。

在此处查看示例

[https://github.com/JakeWharton/ViewPagerIndicator/blob/master/sample/res/layout/themed_circles.xml](https://github.com/JakeWharton/ViewPagerIndicator/blob/master/sample/res/layout/themed_circles.xml)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-11T09:00:41.317

您可以通过 LayoutParams 设置空间：

```
int numOfIndicators = 5;
int space = 20;

tabLayout.setupWithViewPager(myViewPager, true);
ConstraintLayout.LayoutParams params = 
         (ConstraintLayout.LayoutParams)tabLayout.getLayoutParams();//ConstraintLayout is my layout manager
params.width = numOfIndicators * space;
tabLayout.setLayoutParams(params); 
```

（我在这个例子中使用了带有 ViewPager 的 tabLayout： [Android ViewPager with bottom dots](https://stackoverflow.com/questions/20586619/android-viewpager-with-bottom-dots)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-06T19:29:42.537

如果您使用的是矢量可绘制对象，则可以使用 viewportWidth 和 viewportHeight 来创建 TabLayout 指示器之间的间距（如果使用点样式）。

# sql - 最佳实践：Oracle SQL 连接

> ID：15927549
> 
> 赞同：3
> 
> 时间：2013-04-10T13:41:58.333
> 
> 标签：sql, oracle

下面哪个示例是内部连接的最佳实践？下面的示例非常简单，但是如果涉及多个表怎么办？你会选择哪种方法？

示例查询：

简单的

```
SELECT suppliers.supplier_id, suppliers.supplier_name, orders.order_date
FROM suppliers, orders
WHERE suppliers.supplier_id = orders.supplier_id; 
```

使用关键字 INNER JOIN

```
SELECT suppliers.supplier_id, suppliers.supplier_name, orders.order_date
FROM suppliers
INNER JOIN orders
ON suppliers.supplier_id = orders.supplier_id; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T13:46:09.320

自 1992 年以来[ANSI](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)推荐该`JOIN`符号，并且关于可读性，这是我推荐使用的。

关于这个主题的一切都已经说了，但我只想提醒一下，从逻辑的角度来看，将连接条件与值过滤器分开更有意义，原因有两个：

*   这根本不是一回事
*   Oracle 在内部（可能还有 mysql，即使我真的不知道）[首先计算中间记录集](http://www.centrexcc.com/Joins,%20Skew%20and%20Histograms.pdf)，然后应用`WHERE`过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:46:16.567

我建议明确说明 JOIN 类型并使用 ON 子句。 *但是你需要正确使用它。在您的示例中，您忘记包含 FROM 子句和供应商表。*

```
SELECT suppliers.supplier_id, 
       suppliers.supplier_name, 
       orders.order_date
  FROM suppliers s INNER JOIN 
       orders o ON s.supplier_id = o.supplier_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:48:00.027

就功能而言，WHERE 和 JOINS 是相同的..

# java - 如何动态地将侦听器添加到调用方法的 JLabel 的数组列表中

> ID：15927557
> 
> 赞同：0
> 
> 时间：2013-04-10T13:42:05.177
> 
> 标签：java, arraylist, mouseevent, actionlistener, jlabel

我有一个`JLabel`s 网格。我将它们全部添加到 ArrayList 中。如何`MouseClickListener`通过迭代将 s 添加到所有这些中。仅此而已：

```
 for (int i=0;i<145;i++)
    jLAL.get(i).addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            jLabelMouseClicked(evt, jLAL.get(i));
        }
    }); 
```

jLAL 是 jLabel `ArrayList`。当然，这里的坏事是它不能是最终的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:45:15.660

您可以循环遍历的大小`ArrayList`并添加每个，但我建议您制作一个自定义的 ADD 方法来为您完成它，因为它避免了以后的循环。

```
public void addLabel(JLabel label){
    label.addMouseListener(yourlistener);
    arraylist.add(label);
} 
```

因此，您无需调用`arraylist.add()`要添加的每个 JLabel，而是使用`addLabel()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:44:53.277

尝试：

```
for (int i=0;i<jLAL.size();i++)
final int temp = i;
jLAL.get(i).addMouseListener(new java.awt.event.MouseAdapter() {
    public void mouseClicked(java.awt.event.MouseEvent evt) {
        jLabelMouseClicked(evt, jLAL.get(temp ));
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:50:02.240

如果无法在您的代码中实现 BlackBox 解决方案，只需创建一个方法，将侦听器添加到`JLabel`最终的位置。

```
 for (int i=0;i<145;i++) {
      addListener(jLAL.get(i));
    }
  }

  private void addListener(final JLabel jLabel) {
    jLabel.addMouseListener(new java.awt.event.MouseAdapter() {
      public void mouseClicked(java.awt.event.MouseEvent evt) {
        jLabelMouseClicked(evt, jLabel);
      }
    });
  } 
```

# c# - C# Linq 或 Lambda 表达式 Group by Week IEnumerable 列表与日期字段

> ID：15927573
> 
> 赞同：4
> 
> 时间：2013-04-10T13:42:31.037
> 
> 标签：c#, linq, lambda

我正在尝试对`IEnumerable<Object>`按周分组的查询进行查询，例如：

```
Project(Name, DateStart,ID) 
```

我有`IEnumerable<Project>`并且我想做一份报告，按周分组。

例如：

```
Week 1
 Project1  8/4/2013 ID1
 Project2  9/4/2013 ID2
Week 2
 Project1  16/4/2013 ID3
 Project2  18/4/2013 ID5
Week 3
 Project1  24/4/2013 ID7
 Project2  26/4/2013 ID8 
```

如果有人可以帮我一把，我真的很感激！我试图做一个 lambda 表达式但没有成功。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T14:01:52.457

```
var weekGroups = projects
    .Select(p => new 
    { 
        Project = p, 
        Year = p.DateStart.Year, 
        Week =  CultureInfo.InvariantCulture.Calendar.GetWeekOfYear
                      (p.DateStart, CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday)
    })
    .GroupBy(x => new { x.Year, x.Week })
    .Select((g, i) => new 
    { 
        WeekGroup = g, 
        WeekNum = i + 1,
        Year = g.Key.Year,
        CalendarWeek = g.Key.Week
    });

foreach (var projGroup in weekGroups)
{
    Console.WriteLine("Week " + projGroup.WeekNum);
    foreach(var proj in projGroup.WeekGroup)
        Console.WriteLine("{0} {1} {2}", 
            proj.Project.Name, 
            proj.Project.DateStart.ToString("d"), 
            proj.Project.ID);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:46:57.770

您将需要定义一个函数来确定日期在哪一周：

```
int GetWeek(DateTime date) { ... } 
```

然后 LINQ 查询分组是：

```
IEnumerable<IGrouping<int, Project>> groupedProjects = 
         myListOfProjects.GroupBy(p => GetWeek(p.DateStart)); 
```

您可以遍历分组的项目列表：

```
foreach (var weekGroup in groupedProjects)
{
    int week = weekGroup.Key;
    foreach (var project in weekGroup)
    {
        Console.WriteLine("Week " + week + " | Project: " + project.ID);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:17:29.877

我认为只需一个简单的投影就足够了：

```
// we'll just use the existing settings on the box.
DateTimeFormatInfo dfi = DateTimeFormatInfo.CurrentInfo;
var cal = dfi.Calendar;

var Projects = GetProjectsFromSomewhere(); // assuming IEnumerable<Project>

int week = 1; // this *could* be changed and projected in the Select instead.
foreach (var wg in from p in Projects
    group p by cal.GetWeekOfYear(
        p.StartDate, dfi.CalendarWeekRule, dfi.FirstDayOfWeek))
{
    Console.WriteLine("Week {0}", week);

    foreach (var p in wg)
    {
        Console.WriteLine("    {0} {1} {2}", p.Name, p.StartDate, p.ID);
    }
    week++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T13:46:41.983

我认为为了简化此任务，您可以将 WeekNumber 属性添加到 Project 类中，并在您可以轻松按 WeekNumber 属性分组后在创建 Project 对象时填充它

```
Project(Name, DateStart,ID,WeekNumber) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T14:04:42.750

您可以使用[此处](https://stackoverflow.com/questions/2136487/calculate-week-of-month-in-net/2136549#2136549)`GetWeekOfMonth`发布的扩展：

然后执行以下操作：

```
 var groups = projects.GroupBy(p => p.Start.GetWeekOfMonth());

        foreach (var group in groups)
        {
            Console.WriteLine("Week {0}", group.Key);
            foreach (var project in group)
            {
                Console.WriteLine("\t{0} | {1:dd/MM/yyyy} | {2}", 
                     project.Name, project.Start, project.Id);
            }
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-11T16:25:13.173

除了**`Tim Schmelter's`**回答之外，您还可以获取一周中第一天的日期，然后按该日期分组。

获取一周中第一天的日期。您可以使用以下代码：

```
public static class DateTimeExtensions
{
    public static DateTime StartOfWeek(this DateTime dt, DayOfWeek startOfWeek)
    {
        int diff = dt.DayOfWeek - startOfWeek;
        if (diff < 0)
        {
            diff += 7;
        }
        return dt.AddDays(-1 * diff).Date;
    }
} 
```

然后你可以像这样按一周的第一个日期分组：

```
var weekGroups = projects
    .Select(p => new 
    { 
        Project = p
    })
    .GroupBy(x => x.Project.DateStart.StartOfWeek(DayOfWeek.Monday))
    .Select((g, i) => new 
    { 
        WeekGroup = g, 
        WeekNum = i + 1
    });

foreach (var projGroup in weekGroups)
{
    Console.WriteLine("Week " + projGroup.WeekNum);
    foreach(var proj in projGroup.WeekGroup)
        Console.WriteLine("{0} {1} {2}", 
            proj.Project.Name, 
            proj.Project.DateStart.ToString("d"), 
            proj.Project.ID);
} 
```

# django - Django Celerybeat PeriodicTask 运行远远超出预期

> ID：15927575
> 
> 赞同：0
> 
> 时间：2013-04-10T13:42:39.693
> 
> 标签：django, celery, celeryd, celerybeat, djcelery

我正在为 Django、Celery、djcelery 和 PeriodicTasks 苦苦挣扎。

我创建了一个任务来为 Adsense 提取报告以生成实时统计报告。这是我的任务：

```
import datetime
import httplib2
import logging

from apiclient.discovery import build
from celery.task import PeriodicTask
from django.contrib.auth.models import User
from oauth2client.django_orm import Storage

from .models import Credential, Revenue

logger = logging.getLogger(__name__)

class GetReportTask(PeriodicTask):
    run_every = datetime.timedelta(minutes=2)

    def run(self, *args, **kwargs):
        scraper = Scraper()
        scraper.get_report()

class Scraper(object):
    TODAY = datetime.date.today()
    YESTERDAY = TODAY - datetime.timedelta(days=1)

    def get_report(self, start_date=YESTERDAY, end_date=TODAY):
        logger.info('Scraping Adsense report from {0} to {1}.'.format(
            start_date, end_date))
        user = User.objects.get(pk=1)
        storage = Storage(Credential, 'id', user, 'credential')
        credential = storage.get()
        if not credential is None and credential.invalid is False:
            http = httplib2.Http()
            http = credential.authorize(http)
            service = build('adsense', 'v1.2', http=http)
            reports = service.reports()
            report = reports.generate(
                startDate=start_date.strftime('%Y-%m-%d'),
                endDate=end_date.strftime('%Y-%m-%d'),
                dimension='DATE',
                metric='EARNINGS',
            )
            data = report.execute()
            for row in data['rows']:
                date = row[0]
                revenue = row[1]

                try:
                    record = Revenue.objects.get(date=date)
                except Revenue.DoesNotExist:
                    record = Revenue()
                record.date = date
                record.revenue = revenue
                record.save()
        else:
            logger.error('Invalid Adsense Credentials') 
```

我正在使用 Celery 和 RabbitMQ。这是我的设置：

```
# Celery/RabbitMQ
BROKER_HOST = "localhost"
BROKER_PORT = 5672
BROKER_USER = "myuser"
BROKER_PASSWORD = "****"
BROKER_VHOST = "myvhost"
CELERYD_CONCURRENCY = 1
CELERYD_NODES = "w1"
CELERY_RESULT_BACKEND = "amqp"
CELERY_TIMEZONE = 'America/Denver'
CELERYBEAT_SCHEDULER = 'djcelery.schedulers.DatabaseScheduler'

import djcelery
djcelery.setup_loader() 
```

乍一看，一切似乎都正常，但在打开记录器并观察它运行后，我发现它至少连续四次运行该任务 - 有时更多。它似乎也每分钟运行一次，而不是每两分钟运行一次。我尝试将 run_every 更改为使用 crontab，但我得到了相同的结果。

我正在使用主管开始 celerybeat。这是我使用的命令：

```
python manage.py celeryd -B -E -c 1 
```

关于为什么它没有按预期工作的任何想法？

哦，还有一件事，在日期变化之后，它会继续使用它第一次运行的日期范围。因此，随着时间的推移，它会继续获取任务开始运行当天的统计信息 - 除非我在某个时候手动运行任务，否则它会更改为我上次手动运行它的日期。有人能告诉我为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:56:55.480

考虑为此类任务创建一个具有一个工作进程和固定速率的单独队列，并将任务添加到这个新队列中，而不是直接从 celerybeat 运行它们。我希望这可以帮助您弄清楚您的代码有什么问题，是 celerybeat 有问题还是您的任务运行时间比预期的要长。

```
@task(queue='create_report', rate_limit='0.5/m')
def create_report():
    scraper = Scraper()
    scraper.get_report()

class GetReportTask(PeriodicTask):
    run_every = datetime.timedelta(minutes=2)

    def run(self, *args, **kwargs):
        create_report.delay() 
```

在 settings.py

```
 CELERY_ROUTES = {
     'myapp.tasks.create_report': {'queue': 'create_report'},
   } 
```

启动额外的 celery worker 来处理队列中的任务

celery worker -c 1 -Q create_report -n create_report.local

问题 2。您的 YESTERDAY 和 TODAY 变量是在类级别设置的，因此在一个线程中它们只设置一次。

# linux - 当父进程和子进程读取同一个文件并写入另一个同一个文件时会发生什么？

> ID：15927578
> 
> 赞同：2
> 
> 时间：2013-04-10T13:42:55.947
> 
> 标签：linux, unix

```
#include <fcntl.h>
#include <stdlib.h>
int fdrd,fdwt;
char c;
void rdwrt();
main(int argc,char *argv[])
{
    if(argc!=3)
        exit(1);
    if((fdrd=open(argv[1],O_RDONLY))==-1)
        exit(1);
    if((fdwt=creat(argv[2],0666))==01)
        exit(1);
    fork();
    rdwrt();
    exit(0);
}
void rdwrt()
{
    for(;;)
    {
        if(read(fdrd,&c,1)!=1)
            return;
        write(fdwt,&c,1);
    }
} 
```

**该程序分叉一个子进程，然后父进程和子进程尝试读取相同的输入文件并写入相同的输出文件。**

像这样执行这个程序：

```
[root@localhost]./a.out input output 
```

其中输入文件的内容是：

```
abcdefghijklmnopqrstuvwxyz
abcdefghijklmnopqrstuvwxyz
abcdefghijklmnopqrstuvwxyz
abcdefghijklmnopqrstuvwxyz
abcdefghijklmnopqrstuvwxyz
abcdefghijklmnopqrstuvwxyz 
```

**我认为输出文件应该与输入文件具有相同数量的字符，尽管根据这两个进程的竞争，字符顺序可能不一样。**

原来输出文件是：

```
abcdefghijklmnonqbcdefghijklwxyczdefjklpqrstuvwxyz
abcefgklmvwxefgklmnopqrstuvw
qrstuyz
abcdhijxyz 
```

**实际上，这两个文件有不同的字符编号**：

```
[root@localhost]wc -m input output
162 input
98  output 
```

**现在我想知道为什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:48:48.677

输出文件的内容将难以预测，因为您的程序包含[*竞争条件*。](http://en.wikipedia.org/wiki/Race_condition)具体来说，它取决于进程调度。

*请求更新：*

这个问题实际上比乍一看更有趣。

我要做一些预测*（测试成功...）*

在类 Unix 系统¹ ... 那么，**是**的，字符数将始终相同，但顺序将难以预测。

您标记了您的问题`linux` `unix`，并且在这些系统中，所有系统¹都正确实现了 fork 模型，两个子项将为 的两个（分叉）实例`fdrd`共享一个文件位置，并且他们将为`fdwr`.

如果您可以放慢时间并观看程序运行，那么在任何时候都有您知道和不知道的事情。

您不知道哪个孩子将赢得下一次阅读的比赛，但您*确实*知道获胜者将阅读哪个字符，因为它们始终位于相同的文件位置。在获胜者获得下一个角色后，您仍然不知道谁会阅读下一个角色，因为比赛仍在进行。

事实上，同一个进程可能会一次又一次地赢得比赛，因为调度程序可能不希望在非常小的时间片内运行它。

在任何时候，您也知道下一个字符将在 EOF 写入，因为再次*共享写入位置。*

现在，您可能会问，那么，如果两个进程始终处于相同的输入和输出文件位置，那么文件是如何被破解的呢？

好吧，比赛不止一场，一场是阅读，另一场是写作。（或者一个，有点复杂的比赛。）一个孩子可能已经读过它的角色，但在时间切片时没有写出来。所以现在它开始输给*写语句*，然后可能输给几次读/写迭代。所以一个角色可以挂在一个孩子身上。

最后，在其他操作系统上运行的仅与 API 兼容的 C 环境中，任何事情都可能发生。OP 的系统似乎就是其中之一，或者测试可能存在缺陷。我的 OSX 系统按预期运行。

* * *

^(1\. “真正的” UNIX、*BSD、OSX 或 Linux。)

# gcc - 如何抑制“警告：控制到达非无效函数的结尾”

> ID：15927583
> 
> 赞同：5
> 
> 时间：2013-04-10T13:43:04.767
> 
> 标签：gcc, warnings, powerpc, eabi

我有一些 PowerPC 汇编代码用 gcc 交叉编译器和这个函数翻译：

```
uint32_t fill_cache(void)
{
    __asm__ ("addi 3, 0, 0\n");  /* R3 = 0 */
    /* More asm here modifying R3 and filling the cache lines. */
} 
```

在 PowerPC EABI 下，它返回在 R3 中计算的值。编译时我得到

```
foo.c:105: warning: control reaches end of non-void function 
```

有没有办法教 gcc 实际上返回了一个值？或者有没有办法抑制警告（不删除 -Wall 或添加 -Wno-*）？我想非常有选择地仅针对此功能抑制此警告，以使一般警告级别尽可能高。

由于调用者需要计算的值，因此不能使此函数返回 void。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T15:02:27.463

**解决方案 1**：使用[诊断编译指示](http://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html)，您可以在本地抑制某些诊断检查。抱怨在非空函数中没有返回的特定选项（也由*-Wall暗示）是**-Wreturn-type*。所以抑制警告的具体代码是：

```
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wreturn-type"
/* Your code here */
#pragma GCC diagnostic pop 
```

*您可以通过使用-fdiagnostics-show-option*进行编译来找出导致警告的选项。它只会将选项附加到警告消息中。

**解决方案2：**定义一个[寄存器变量](http://gcc.gnu.org/onlinedocs/gcc/Local-Reg-Vars.html)并将其放入所需的寄存器中。参考[内联汇编器模板](http://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html)中的变量，并使用生成的代码：

```
uint32_t fill_cache(void)
{
  register uint32_t cacheVal __asm__ ("r3");

  __asm__ __volatile__ ("addi %0, 0, 0" : "=r" (cacheVal));
  /* More code here */

  return cacheVal;
} 
```

*volatile*修饰符是为了确保指令不被删除或以其他方式受到优化策略的不利影响。

首选解决方案 2 至少有两个原因：

1.  就标准而言，不返回非 void 函数的值是未定义的。
2.  没有压制（新）诊断警告的风险，因为一开始就没有压制的意图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-06T23:49:22.160

函数可以声明为`naked`，在这种情况下，编译器不会生成序言和结语，并会假定程序员保留所有必要的寄存器并将输出值放入正确的寄存器中，然后再返回。

```
uint32_t fill_cache(void) __attribute__((naked)); // Declaration
// attribute should be specified in declaration not in implementation

uint32_t fill_cache(void) 
{
    __asm__ ("addi 3, 0, 0\n");  /* R3 = 0 */
    /* More asm here modifying R3 and filling the cache lines. */
} 
```

有点晚了，但也许有人也会介入:)

PS：据我所知`__asm__`，语法`__volatile__`也是如此。实际上，GNU GCC 中的&`std=c89`之间没有区别。但现代的做法是没有下划线的风格：.`__asm__``asm``asm volatile`

[asm_language](http://en.cppreference.com/w/cpp/language/asm)

# javascript - 加载页面 Firefox 时获取所有请求

> ID：15927585
> 
> 赞同：2
> 
> 时间：2013-04-10T13:43:11.290
> 
> 标签：javascript, firefox, firefox-addon

我想编写自己的 Firefox 插件，我的目标是向用户显示在加载的网站上收到了多少字节。

目前，我使用`XMLHttpRequest`. 然后我查看`responseText.length`. 这个长度只给了我一个文件的长度。例如，如果 URL 是[http://www.test.de/index.html](http://www.test.de/index.html)，我只得到 index.html 的大小。

但我想知道每个文件的大小，例如 CSS 文件、加载的图像等。类似于 FireBug 在他们的网络面板上使用它所做的事情。

我的问题是，如何获取每个 Javascript 特定网站的所有加载字节的大小！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:11:45.980

Just for jQuery ajax requests:

```
var count = 0;
$(document).ajaxComplete(function(event, xhr, settings) {
  count += xhr.getResponseHeader('Content-Length');
}); 
```

# security - Sitecore 6 是否可以在已登录时更改虚拟用户的角色？

> ID：15927589
> 
> 赞同：3
> 
> 时间：2013-04-10T13:43:15.480
> 
> 标签：security, sitecore, sitecore6

在**Sitecore 6**中，是否可以在已登录时更改虚拟用户的角色？

我想为已经登录系统的虚拟用户更改角色，但看起来 Sitecore 忽略了它。我可以清除角色并添加一个新角色，但所有旧角色仍然附加到用户。我想我应该重新登录用户，但对我来说不是这样。

```
virtualUser.RuntimeSettings.AddedRoles.Clear();
virtualUser.Roles.RemoveAll();
if (permissions != null && permissions.Any())
{
    foreach (var role in permissions.Where(d=>!string.IsNullOrEmpty(d.Type)))
    {
        string domainRole = string.Format("{0}\\{1}", "extranet", role.Type);
        if (SC.Security.Accounts.Role.Exists(domainRole))
        {
            virtualUser.RuntimeSettings.AddedRoles.Add(domainRole);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:42:17.327

似乎注销和重新登录将设置正确的角色，因为在登录期间`AuthenticationManager`将清除保存`UserProfile`和`Roles`. 我没有看到将新角色添加到当前经过身份验证的用户的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T15:31:17.167

你可以尝试使用

```
Sitecore.Caching.CacheManager.ClearSecurityCache(userName); 
```

此方法调用另一个方法：

```
CacheManager.ClearUserProfileCache(userName);
CacheManager.ClearIsInRoleCache(userName);
CacheManager.ClearAccessResultCache(userName); 
```

所以理论上它应该做你需要的，但我还没有在实践中证实它。

# python - 如何查看输出 HTML

> ID：15927591
> 
> 赞同：0
> 
> 时间：2013-04-10T13:43:17.647
> 
> 标签：python, mechanize

我在python中有这段代码：

```
resp = mechanize.Request(url, data)
cj.add_cookie_header(resp)
res1 = mechanize.urlopen(resp) 
```

如何查看输出 HTML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:46:00.053

只需打印您的回复：

```
resp = mechanize.Request(url, data)
cj.add_cookie_header(resp)
res1 = mechanize.urlopen(resp)
print res1.read() 
```

# python - 使用自定义比较器按任一元组值对元组的字典进行排序

> ID：15927596
> 
> 赞同：2
> 
> 时间：2013-04-10T13:43:35.637
> 
> 标签：python, sorting, tuples

我正在研究一些元组的python dicts。每个元组包含 2 个整数。元组中的第一个数字称为值，第二个数字称为工作。我有 3 个不同的比较器，我需要按降序对字典进行排序。此顺序应由调用哪个比较器来确定。即 dict 可以以 3 种不同的方式排序。我已经尝试了尽可能多的不同方法来让它发挥作用。我可以在不使用比较器的情况下做到这一点，只需将其分解为一个列表并通过切片元组进行排序，但如果有人可以阐明使用比较器进行排序的语法，将不胜感激。我的 cmpWork 似乎正确返回，但其他 2 没有反转。
如果我能得到按元组值排序的字典，那也很棒。我得到了一个排序

```
sortedSubjects = sorted(tmpSubjects.iteritems(), key = operator.itemgetter(1), reverse = True) 
```

但这不允许我对元组进行切片。
第一次发菜鸟，如有错误请见谅。

```
def cmpValue(subInfo1, subInfo2):  
    return cmp(subInfo2[0] , subInfo1[0])

def cmpWork(subInfo1, subInfo2):  
    return cmp(subInfo1[1] , subInfo2[1])  

def cmpRatio(subInfo1, subInfo2):  
    return cmp((float(subInfo2[0]) / subInfo2[1]) , (float(subInfo1[0]) / subInfo1[1]))  

def greedyAdvisor(subjects, comparator):  
    tmpSubjects = subjects.copy()  
    sortedSubjects = sorted(tmpSubjects.values(), comparator, reverse = True)   
    print sortedSubjects  

smallCatalog = {'6.00': (16, 8),'1.00': (7, 7),'6.01': (5, 3),'15.01': (9, 6)}  
greedyAdvisor(smallCatalog, cmpRatio)  
greedyAdvisor(smallCatalog, cmpValue)  
greedyAdvisor(smallCatalog, cmpWork)  

[(7, 7), (9, 6), (5, 3), (16, 8)]  
[(5, 3), (7, 7), (9, 6), (16, 8)]  
[(16, 8), (7, 7), (9, 6), (5, 3)] 
```

ps
线

```
sortedSubjects = sorted(tmpSubjects.iteritems(), key = operator.itemgetter(1), reverse = True) 
```

返回

```
[('6.00', (16, 8)), ('15.01', (9, 6)), ('1.00', (7, 7)), ('6.01', (5, 3))] 
```

这几乎正​​是我正在寻找的，除了我不能按元组中的第二个值排序，也不能按 cmpRatio 排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:52:24.263

> 但这不允许我切片元组

从你的例子开始：

```
sortedSubjects = sorted(tmpSubjects.iteritems(),
                        key=operator.itemgetter(1),
                        cmp=comparator,   # What about specifying the comparison?
                        reverse=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:53:58.007

如果您需要对字典进行排序 - 使用 collections.OrderedDict 例如，按元组的第一个元素排序

```
 OrderedDict(sorted(smallCatalog.items(), key=lambda e:e[1][0]))
Out[109]: OrderedDict([('6.01', (5, 3)), ('1.00', (7, 7)), ('15.01', (9, 6)), ('6.00', (16, 8))]) 
```

# php - php一个for循环机器

> ID：15927600
> 
> 赞同：-3
> 
> 时间：2013-04-10T13:43:48.323
> 
> 标签：php, for-loop

我有一个数组，它存储了我希望使用的几个整数 table 和 for 循环遍历数组因此，代码的详细信息可能如下所示：

```
for($i=0;$i<sizeof($array);$i++){
<table>
<tr><td>$array[$i]</td></tr>
</table> 
```

但是，我想添加一个功能：每个表格行指定为 2 列，

最后结果应该如下。

34 23

11 10

29 10 ......等等。

请帮助我，非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:00:44.403

我的建议：

```
<?php
function printRows($arr) {
    print '<tr>';
    for($i = 0; $i < count($arr); $i++) {
        print '<td>' . $arr[$i] . '</td>';
        if($i%2!=0&&$i!=count($arr)-1) print '</tr><tr>';
    }
    print '</tr>';
}
$arr = array(1,2,3,4,5,6);
?> 
```

用法：

```
<table>
    <?php printRows($arr); ?>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:51:23.493

```
<table>
<?php
$size = sizeof($array);              // Store the size to reduce computations
for($i=0;$i<$size;$i+=2)              // Loop through the array
{
    echo("<tr>");                    // Print row begin tag
    echo("<td>".$array[$i]."</td>"); // Print out first column value
    if ($i + 1 < $size)              // If we can, print out the second column value
        echo("<td>".$array[$i+1]."</td>");
    echo("</tr>");                   // Print row end tag
}
?>
</table> 
```

# javascript - 将此本地 js 变量作为参数传递给新函数

> ID：15927608
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:44:14.480
> 
> 标签：javascript, variables, scope, arguments

我已经阅读了几篇关于将局部函数变量传递给 javascript 中的新函数的文章，但在我自己的特殊情况下仍然遇到问题。

我正在尝试将给定的`term`参数传递给它下面`data: function (term, page)`的`generateUrl`函数。`this.term = term`并且`window.term = term`（我知道这是不好的做法）不起作用。我应该尝试在两个内部函数之外或之外声明一个`term`变量，还是应该将定义移动到函数内部？`$(document).ready(function)``generateUrl``$("#example").select2`

```
$(document).ready(function(){

  $("#example").select2({
      ajax: {
          url: generateUrl(),
          data: function (term, page) {
            this.term = term; // i want to pass this local variable to generateUrl
          }
      }
  });

  function generateUrl(term) {
    (function ($) {

    var args = 'keywords=' + term;
    return args;

    }
    (jQuery));
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:59:38.620

```
$(document).ready(function(){

 $("#example").select2({
  ajax: {
      url: generateUrl(), /* You are calling generateUrl without parameter, 
                               this will cause error
                             Did you actualy mean generateUrl(term) ? */
      data: function (term, page) {
        this.term = term; // i want to pass this local variable to generateUrl
        generateUrl( this.term ); /* Is this what you want to do?  */
      }
  }
});

function generateUrl(term) {
  (function ($) {

    var args = 'keywords=' + term;
    return args;

  }
(jQuery)); 
```

} });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:09:17.553

您应该查看[select2 文档](http://ivaynberg.github.io/select2/)，“加载远程数据”部分的示例似乎正是您正在寻找的。基于此，我相信您的代码应该是：

```
$(document).ready(function(){
  $("#example").select2({
      ajax: {
          url: "", // replace that empty string with your ajax base url 
                   // (without any parameters)
          data: function (term, page) {
              return { keywords : term };
          }
      }
  });
}); 
```

# networking - cudaMemcpy 设备到远程主机

> ID：15927616
> 
> 赞同：0
> 
> 时间：2013-04-10T13:44:22.443
> 
> 标签：networking, cuda, data-transfer

我正在研究在主机上运行并使用 GPU 进行计算的模拟。计算完成后，主机将内存从设备复制到自身，然后将计算的数据发送到远程主机。

基本上数据会做：GPU -> HOST -> NETWORK CARD

由于模拟是实时的，所以时间很重要，我想要这样的东西：GPU -> NETWORKCARD，以减少数据传输的延迟。

可能吗？如果不是，那是不是我们有一天会看到的东西？

编辑：远程主机=> CPU

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:54:08.623

是的，这在 CUDA 4.0 和更高版本中是可能的，在支持统一直接寻址的平台上使用[GPUDirect 工具](https://developer.nvidia.com/gpudirect)（我认为现阶段基本上是带有 Fermi 或 Kepler Telsa 卡的 linux）。您对“远程主机”的含义没有多说，但是如果您有一个 MPI 可行的网络，那么可能有一个现成的解决方案供您使用。

至少[mvapich2](http://mvapich.cse.ohio-state.edu/overview/mvapich2/)已经支持使用 Infiniband 或 TCP/IP 进行 GPU-GPU 传输，包括通过 PCI express 总线直接到 Infiniband 适配器的 RDMA。到目前为止，其他 MPI 实现可能也得到了支持，尽管我最近没有仔细研究过它，但无法确定。

# ruby-on-rails - Rails 国际化 - 有没有更好的方法来保存英文消息？

> ID：15927617
> 
> 赞同：0
> 
> 时间：2013-04-10T13:44:25.553
> 
> 标签：ruby-on-rails, internationalization, i18n-gem

我最近决定用[这里](http://guides.rubyonrails.org/i18n.html)描述的 I18n gem 翻译我的小 Rails 应用程序。
正如预期的那样，在进行测试时，我收到了来自 activerecord 的错误消息并设计：

> 缺少翻译：ru.devise.failure.user.not_found_in_database
> 缺少翻译：ru.activerecord.errors.models.user.attributes.name.taken

目前我只知道一种使用自定义语言环境设置按摩的方法 - 只需将包含消息的 en.yml 文件复制到我的自定义 ru.yml 中，但这是一种奇怪的方式。
也许我错过了什么？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:53:37.027

您可以使用该`default`选项（[相关问题](https://stackoverflow.com/a/4244177/919641)）

我还建议您查看[rails-18n](http://github.com/svenfuchs/rails-i18n) gem 以获得常见的翻译

[设计在他们的维基](http://github.com/plataformatec/devise/wiki/I18n)上提供通用翻译

您还可以设置后备语言环境以避免丢失翻译（[相关问题](https://stackoverflow.com/a/7621851/919641)）

# java - 用java计算扑克游戏出局的简单方法

> ID：15927619
> 
> 赞同：0
> 
> 时间：2013-04-10T13:44:29.157
> 
> 标签：java, statistics, calculator, poker, evaluator

我需要用 Java 计算一手牌的赔率。这是一个我没有太多时间的学校项目，我找不到任何好的和简单的方法或算法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:47:31.043

我将从这个线程中的一些答案开始：[Java 中的扑克手](https://stackoverflow.com/questions/5205949/poker-hands-in-java)

一旦你可以评估扑克牌，数数应该很容易。

# css - 背景颜色 css IE 8 问题

> ID：15927625
> 
> 赞同：0
> 
> 时间：2013-04-10T13:44:44.513
> 
> 标签：css

正如预期的那样，此代码在 IE 8 中不起作用

```
background-color: rgba(255, 255, 255, 1); 
```

IE 有什么修复方法吗？请告诉我。

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:48:50.910

尝试像这样设置后备背景颜色属性：

```
background-color: rgb(255, 255, 255);
background-color: rgba(255, 255, 255, 1); 
```

或者

```
background-color: #fff;
background-color: rgba(255, 255, 255, 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:50:04.153

尝试

```
background-color: rgba(255, 255, 255, 1);
*background-color: #FFF; 
```

另外，您使用的是 opacity 1，您真的需要在这里使用 rgba 吗？

一些帮助： [http ://caniuse.com/#search=rgba](http://caniuse.com/#search=rgba)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:05:13.660

对于 IE，如果你想要等效的 background-color:rgba(....) 使用这个：

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#7F000000,endColorstr=#7F000000); 
```

这是不透明的黑色（前两个数字）

这里有一个生成器：http: [//kilianvalkhof.com/2010/css-xhtml/how-to-use-rgba-in-ie/](http://kilianvalkhof.com/2010/css-xhtml/how-to-use-rgba-in-ie/)

# django - 如何比较模板中的日期？

> ID：15927631
> 
> 赞同：1
> 
> 时间：2013-04-10T13:44:53.623
> 
> 标签：django, django-templates

我有日期时间字段的模型：

```
class MyModel(models.Model):
    create_date = models.DateTimeField(default=datetime.now) 
```

我想将此日期的年份与数字进行比较：

```
{% for object in my_objects %}
    {% if object.create_date.year > "2011" %}
        ...
    {% endif %}
{% endfor %} 
```

这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:46:22.257

datetime 对象的 year 属性应该返回一个整数而不是字符串

`{% if object.create_date.year > 2011 %}`

# windows-phone-8 - 有没有办法将图像对象保存为 png 以保持透明颜色

> ID：15927632
> 
> 赞同：1
> 
> 时间：2013-04-10T13:44:58.837
> 
> 标签：windows-phone-8, isolatedstorage

到目前为止，我还没有找到将图像作为 png 保存到隔离存储中的方法。我发现的唯一保存的图像是`SaveJpeg()`，但这样我就失去了图像的透明度。有谁知道另一种方法可以让您将 .png 保存到`BitMapImage`.png`IsolatedStorage`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:10:13.563

[ImageTools 支持](http://imagetools.codeplex.com/)使用 PNG（编码和解码）

另外，它已被问过很多次......[在WP7上将位图保存为PNG](https://stackoverflow.com/questions/7378946/saving-bitmap-as-png-on-wp7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:00:12.390

我的逻辑不正确。我试图拍摄一个 jpeg，然后将其转换为 png，这最终导致我失去了透明度。我忽略了一个事实，即我使用的“截图”功能将流保存为 jpeg，然后重用它。我的错误，我需要弄清楚如何将截图截取为png

# git - 将第一个提交从 git 分支复制到空分支

> ID：15927633
> 
> 赞同：0
> 
> 时间：2013-04-10T13:44:59.873
> 
> 标签：git

我有一个带有`master`分支的 git 存储库，我想在其中创建一个`empty`包含分支的第一次提交的`master`分支，**具有相同的哈希**（最后一点非常重要）。我尝试了挑选，但这并没有给出具有相同哈希的提交：

```
$ git log  # we are on master
commit bfe76c82dace725e84e09dfa472b4ccef91495c6
Author: Name <email>
Date:   Wed Apr 10 15:40:45 2013 +0200

    Made some changes to README

commit 8b4c9dbcb4c5c0f966780f8b2f7ba356e3480fca
Author: Name <email>
Date:   Wed Apr 10 15:39:35 2013 +0200

    Added README

$ git checkout --orphan empty
Switched to a new branch 'empty'

$ git rm --cached *
rm 'README.rst'

$ git clean -fxd
Removing README.rst

$ git log
fatal: bad default revision 'HEAD'

$ git cherry-pick 8b4c9dbcb4c5c0f966780f8b2f7ba356e3480fca
[empty (root-commit) 1556211] Added README
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 README.rst

$ git log
commit 1556211343e404861ba9f7ec627b6d6f216217e0
Author: Name <email>
Date:   Wed Apr 10 15:39:35 2013 +0200

    Added README 
```

如您所见，第一次提交的哈希是不同的。实现我想要做的最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:48:03.857

主上，

```
git branch empty 8b4c9dbcb4c5c0f966780f8b2f7ba356e3480fca 
```

或者

```
git checkout -b empty 8b4c9dbcb4c5c0f966780f8b2f7ba356e3480fca 
```

# c++ - 为什么在 C++11 的基于范围的 for 中需要按值捕获

> ID：15927634
> 
> 赞同：0
> 
> 时间：2013-04-10T13:44:59.660
> 
> 标签：c++, c++11

这是一个基于 C++ 范围的循环的示例，它按值捕获元素

```
vector<int> v = {1, 3, 5, 7, 9};

for (auto x : v)
    cout << x << ' '; 
```

更多here [使用C ++ 11的基于范围的正确方法是什么？](https://stackoverflow.com/questions/15927033/what-is-the-correct-way-of-using-c11s-range-based-for/15927037#15927037)

* * *

# 我的问题

为什么甚至允许按价值捕获？它只是令人困惑且容易出错。如果犯了错误，您会付出很多代价。我无法想象仅通过显式创建副本而不是循环为您执行无法解决的任何问题。有什么具体原因吗？我在这里错过了什么吗？

编辑

是的，我知道函数允许按值传递，但这有一个明显的好处。我要问的是在**for 循环**中是否有任何按值捕获的用途。我现在可以看到，这可能是有用的 bool 和 char 序列。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T13:47:03.447

与我们可以按值传递参数的原因完全相同 - 如果您需要副本，请按值获取。

> 我无法想象仅通过显式创建副本而不是循环为您执行无法解决的任何问题。

我认为这是您遇到的主要问题。循环不是“为你做”。这*是*明确要求副本。还有什么比初始化一个非引用变量更明确的呢？

这实际上只是一个正常的声明。为什么，当它在其他任何地方都有效时，我们会让它`auto`自己在这里无效？事实上，这个声明的初始化被标准定义为：

```
auto x = *__begin; 
```

where`__begin`是为范围的第一个元素提供迭代器的表达式（在本例中`v.begin()`）。这与 C++ 中的任何其他复制没有什么不同。您认为以下是常见的错误吗？

```
int x = some_other_int; 
```

或者：

```
std::string str = some_other_string; 
```

不，当我们*想要*一个副本时，我们会写这样的声明。

这是一个示例用例：

```
void modify_argument(X&);
void use(X);

// ...

std::vector<X> v = /* ... */;
for (auto x : v) {
  // We want to modify the copy of x, but not the original:
  modify_argument(x);
  use(x);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:30:48.603

我认为部分混淆是由于使用`auto`，虽然不是强制性的，但很常见。基本上，基于范围的 for`for (type var : range)`意味着：迭代元素以`range`创建`var`使用. 这个结构在标准规定的常规 for 循环方面具有直接翻译：`type``range`

```
// for (for-range-declaration : range-init)
//    statement
{
  auto && __range = range-init;
  for ( auto __begin = begin-expr, __end = end-expr;
            __begin != __end; ++__begin ) {
     for-range-declaration = *__begin;
     statement
  }
} 
```

*range-init*和*for-range-declaration*可以是任何可以在扩展版本上替换并编译的东西。*对于 for-range-declaration*中的类型没有要求，它甚至可以与*range-init*所持有的不同：

```
// Convoluted example:
void printFloor(std::vector<double> const & v) {
   for (int i : v) {
       std::cout << ' ' << i;
   }
} 
```

因为可以使用允许扩展编译的*任何类型*`auto`，所以它具有与在任何其他上下文中完全相同的语义，并且行为与在所有其他情况下完全相同。

将基于范围的 for 的要求更改为仅允许通过引用进行迭代会不必要地使语言（标准措辞）和实现复杂化（编译器不能只是扩展，因为*for-range-declaration*不仅仅是一个声明，而是一个限制使用值的形式），实际上限制了在需要值时需要更复杂的用户代码的结构的使用（用户必须手动复制）。请记住，这个结构只是为了*简化*代码，它不是一个启用功能，没有它就不能用这个结构做任何事情（你总是可以手动生成上面的扩展）。

# php - 不同的utf8编码？

> ID：15927635
> 
> 赞同：0
> 
> 时间：2013-04-10T13:45:03.077
> 
> 标签：php, utf-8, character-encoding

我对 utf8 编码有一个小问题。我尝试编码的词是“kühl”。所以它有一个特殊的字符。

当我在第一个文件中用 utf8 编码这个字符串时，我得到：

科尔

当我在第二个文件中用 utf8 编码这个字符串时，我得到：

库尔

使用 php utf8_encode() 我总是将第一个 (kÃ¼hl) 作为输出，但我需要第二个作为输出 (kuÌ�hl)。

mb_detect_encoding 告诉我它是“UTF-8”，所以这并没有真正的帮助。

你有什么想法让第二个作为输出吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:10:04.060

只有一种编码称为 UTF-8，但有多种方法可以在 Unicode 中表示某些字形。 [U+00FC](http://www.fileformat.info/info/unicode/char/fc/index.htm)是拉丁语 1 兼容性单字形预组合 ü，在拉丁语 1 中显示为 kühl 而~~从我的头顶~~kuÌ�hl 看起来像是同一个字符的完全分解的表达式，即[U+0075](http://www.fileformat.info/info/unicode/char/75/index.htm) (u) 后跟[U+0308](http://www.fileformat.info/info/unicode/char/0308/index.htm)（组合分音符号）。另见[http://en.wikipedia.org/wiki/Unicode_equivalence#Normalization](http://en.wikipedia.org/wiki/Unicode_equivalence#Normalization)

```
vbvntv$ perl -CSD -le 'print "ku\x{0308}hl"' | iconv -f latin1 -t utf8
kuÌ�hl
vbvntv$ perl -CSD -le 'print "ku\x{0308}hl"' | xxd
0000000: 6b75 cc88 686c 0a                   ku..hl. 
```

0x88 不是 Latin-1 中的有效字符，因此（在我的浏览器中）它显示为“无效字符”占位符（带有白色问号的黑色菱形），而其他人可能会看到其他内容，或者什么也看不到。

显然，您可以使用[`class.normalize`](http://php.net/manual/en/class.normalizer.php)PHP 在这两种形式之间进行转换：

```
$normalized = Normalizer::normalize($input, Normalizer::FORM_D); 
```

顺便说一句，将 UTF8 视为 Latin-1 并复制/粘贴表示，就好像它是实际的真实文本一样，充其量是反复无常的。如果您有字符编码问题，实际字节（例如，十六进制）是表达您所拥有内容的唯一可移植、可理解的方式。在许多情况下，您的计算机如何呈现它是不可预测的，尤其是当编码有问题或未知时。我坚持您在问题中使用的演示文稿，但是如果您还有其他问题，请注意明确地阐明问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:57:49.673

utf8_encode，尽管它的名字，并没有神奇地编码成 UTF-8。

只有当您的来源是 ISO-8559-1（也称为 latin-1）时，它才会起作用。

如果您的源已经是 UTF-8 或任何其他编码，它将输出损坏的数据。

# php - php html中的查询字符串（中间有空格）

> ID：15927636
> 
> 赞同：0
> 
> 时间：2013-04-10T13:45:04.077
> 
> 标签：php, html

我正在尝试在 html 中执行查询字符串。我要传递的字符串是“Book Cover”。但我只设法得到书。我该怎么做呢？

下面是我的代码：

```
 <a href=book.php?category=Book Cover>Book Cover</a> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T13:46:33.180

您需要对所有查询字符串变量进行编码，例如使用[rawurlencode](http://php.net/rawurlencode) / [rawurldecode](http://php.net/rawurldecode)

```
<a href="book.php?category=<?=rawurlencode('Book Cover')?>">Book Cover</a> 
```

在 PHP 中：

```
$category = rawurldecode($_POST['category']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:49:37.877

在 HTML 中，值停在空格处：

```
<a href=book.php?category=Book Cover>Book Cover</a>
                              ^ 
```

如果要在 HTML 中的值内包含空格，则需要添加引号：

```
<a href="book.php?category=Book Cover">Book Cover</a> 
        ^                            ^ 
```

在 HTML 中，单引号和双引号都是允许的。

现在值本身也有问题：

```
book.php?category=Book Cover
                      `- URL stops here. 
```

这是一个*相对 HTTP URL*，对于任何 HTTP URL，空格字符都是一个特殊值。它通常不能成为 URL 的一部分，因此您需要对其进行编码。这可以与 HTTP URL 中的任何其他特殊字符一样使用*三元组编码*/*百分比编码*替换字符的二进制值与它们的十六进制数：

```
book.php?category=Book%20Cover 
```

对于您拥有的空间，历史上它甚至是一个特例，您也可以用加号对其进行编码。

后一个问题通常由用户代理处理，但 HTML 中的引号是必需的，否则价值会被削减。

将 HTML 中的属性值放在（双）引号内通常是一种很好的做法。所以我建议你这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T13:52:37.670

为什么不在编码前转换为 UTF-8？

```
urlencode(utf8_encode($string)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T13:46:28.057

看起来你缺少双引号

```
<a href="book.php?category=Book Cover">Book Cover</a> 
```

# asp.net - 在应用程序配置中找不到连接名称“DefaultConnection”或连接字符串为空

> ID：15927639
> 
> 赞同：1
> 
> 时间：2013-04-10T13:45:08.687
> 
> 标签：asp.net, asp.net-mvc, web-config, asp.net-membership, membership-provider

当我在内部开发服务器的 Visual Studio 2010 Professional 中以调试模式运行我的 ASP.NET MVC 4 应用程序时，我刚刚开始收到此消息。直到昨天它工作正常。它昨天才开始来。

此外，此错误仅出现在我的桌面上。该应用程序在所有其他开发人员的机器、我的笔记本电脑和所有服务器上运行良好，无论是在调试模式下还是在 IIS 上部署时。

我在黄屏死机中得到的实际错误如下：

**配置错误**

*说明：*处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

*解析器错误消息：*在应用程序配置中未找到连接名称“DefaultConnection”或连接字符串为空。

**源错误：**

```
Line 267:    <membership defaultProvider="DefaultMembershipProvider">
Line 268:      <providers>
Line 269:        <add name="DefaultMembershipProvider" 
                      type="System.Web.Providers.DefaultMembershipProvider,
                            System.Web.Providers, Version=1.0.0.0, Culture=neutral,
                            PublicKeyToken=31bf3856ad364e35" 
                      connectionStringName="DefaultConnection" 
                      enablePasswordRetrieval="false" enablePasswordReset="true"
                      requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
                      maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6"
                      minRequiredNonalphanumericCharacters="0" 
                      passwordAttemptWindow="10" applicationName="/" />
Line 270:      </providers>
Line 271:    </membership> 
```

我在 TFS 中检查了我的 web.config 的版本历史记录，没有，也*从来没有使用*过该名称的连接字符串`DefaultConnection`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:49:29.110

将此添加到您的 web.config 文件中

```
<connectionStrings><add name="DefaultConnection" connectionString="Data Source=YourServername;Initial Catalog=YourDBname;Integrated Security=True;MultipleActiveResultSets=True" providerName="System.Data.SqlClient" /></connectionStrings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:33:16.927

我能想到的唯一一件事是您可以在没有适当的会员连接字符串的情况下浏览公共页面。但是，一旦您浏览需要身份验证的页面，它就会失败。

如果将**DefaultConnection**替换为工作连接字符串，它应该可以工作。

# sql - 为什么在 ssrs 中使用 sql 语言而不是 mdx 语言？

> ID：15927640
> 
> 赞同：2
> 
> 时间：2013-04-10T13:45:09.127
> 
> 标签：sql, tsql, reporting-services, ssrs-2008, mdx

我正在查看复数视力的 SSRS 培训，他们使用常规 sql 将数据获取到数据集。我只是在学习 mdx，当我使用数据集时，到目前为止我只使用 mdx 来获取数据。我应该/可以混合这个，我应该使用 SQL 而不是 mdx？我不想，现在我开始享受 mdx..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T13:53:53.743

MDX 通常用于多维多维数据集，并且有一些专门用于此目的的命令，而 SQL 没有。如果您的数据源是数据库，而不是多维数据集，那么据我所知，最常用的是 SQL。

SQL 和 MDX 的比较：http: [//msdn.microsoft.com/en-us/library/aa216779%28v=sql.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa216779%28v=sql.80%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T16:51:04.160

MDX 语言 = OLAP 多维数据集 (SSAS)

SQL 语言 = 关系数据库。

OLAP 多维数据集用于报告和性能原因。当需要数据或信息并且涉及大量数据聚合或对来自关系数据库的大量数据进行计算时，可以创建 OALP 多维数据集以更好地处理数据需求的需求。MDX 是用于从多维数据集中提取数据的查询语言。

这是一个帮助的例子。您需要为报告提取一些数据。您可以为此数据使用 SQL 语句或多维数据集 (MDX)。您使用 SQL 语句进行测试，但查询需要 5 分钟才能运行。或者，对于多维数据集，您可以将等效的 SQL 语句添加到多维数据集设计中，从而使等效的 SQL 查询结果立即可用。这怎么可能？多维数据集是充满预运行计算和数据聚合的关系数据库。预运行，这意味着它们在较早的时间运行或处理，可能是在每个人都在家的晚上。

MDX 仅特定于一种报告程序，即 SQL Server Reporting Services (SSRS)。SQL 与多个不同的数据库程序相关联。通常了解 MDX 的人已经是专家或对 SQL 非常熟悉。我会先学习 SQL，因为它的应用程序比 MDX 多得多>

# r - 计算列总计，然后对 R 中的结果进行排序

> ID：15927641
> 
> 赞同：0
> 
> 时间：2013-04-10T13:45:12.093
> 
> 标签：r

请任何人提供有关如何操作的指导

1.  计算列总计，然后
2.  对 R 中的结果总数进行排序？

到目前为止，我尝试对列进行总计的所有内容，例如 (`colsums()`并将`sapply()`结果总计作为向量返回 (例如`ABOUT 4022`)，我找不到任何有关如何将其拆分为列标题`ABOUT`和列值`4022`然后对两者进行排序的信息列值上的标题和值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:52:32.123

请注意，该函数被调用`colSums`（不是 colsums）。

将此与`sort`. 或者，如果您想订购列，请使用`order`：

```
colSums(mtcars)
sort(colSums(mtcars))

mtcars[ ,order(colSums(mtcars))] 
```

# sql-server - 保护应用程序免受 SQL 注入

> ID：15927644
> 
> 赞同：1
> 
> 时间：2013-04-10T13:45:23.060
> 
> 标签：sql-server, tsql, sql-injection

我有一个大表单，当我尝试执行 SQL 查询以保存表单数据时，我得到一个`SqlException`（每个查询大约有 1200 个 SQL 参数）。

由于性能问题，通过几个少于 1200 个 SQL 参数的查询来展开查询并不是一个好主意，实际上也不容易做到。恐怕将原始值放在 SQL 查询中可能会产生 SQL 注入的安全问题。

那么我能做什么呢？如果我输入原始值，保护应用程序免受 SQL 注入攻击的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T02:19:11.487

创建参数值的 xml 并将 xml 作为单个参数传递。然后只需将 xml 解析为任意数量的变量（或临时表中的行）。例如，而不是：

```
SELECT ?, ?, ? 
```

并传入`'my first form value'`,`'my second form value'`和`'my third form value'`, 你可以这样做：

```
DECLARE @x XML SET @x = ?;
SELECT 
    T.x.value('@a1', 'NVARCHAR(50)')
  , T.x.value('@a2', 'NVARCHAR(50)')
  , T.x.value('@a3', 'NVARCHAR(50)')
FROM @x.nodes('/form/data') AS T(x) 
```

并只传递一个 xml 参数，`'<form><data a1="my first form value" a2="my second form value" a3="my third form value" /></form>'`. SQL Server 2005+ 有一个非常高效的 xml 解析器，所以我想这与直接传递参数一样快。

当然，您必须采取措施生成注入弹性的 xml，但如果我必须将这么多的信息传递给查询，我会这样做。

（也就是说，我很难想象一个人可能合法地需要那么多平面参数的情况。接受任意数据而不是显式参数对我来说更有意义，在这种情况下，上面的 xml 可能更像`'<form><data name="a1" value="my first form value" /><data name="a2" ... </form>'`，但同样的解决方案仍然有效。）

# javascript - Histyr.back() 不能在 IE 的新窗口中工作

> ID：15927650
> 
> 赞同：0
> 
> 时间：2013-04-10T13:45:36.120
> 
> 标签：javascript, html, window

我所拥有的是一个表格，当您按下下一步时，它会进入下一步。现在我想要的是当用户按下后退按钮时，它会将他们带到上一步。但保留表单字段中的数据。我让它在 chrome 中工作。但是当我在 IE 中使用它时，它在新的弹出窗口中不起作用；如果它在普通页面中，它确实可以工作，但不能在弹出窗口中。

谁能给我任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:50:08.933

您可以使用[JQuery](http://jquery.com/)之类的 javascript 库，[dojo](http://dojotoolkit.org/)将帮助解决这个问题而且您还需要查看这个 [答案](https://stackoverflow.com/a/754953/1862502)

# javascript - 三.js奇怪的灯光行为

> ID：15927656
> 
> 赞同：0
> 
> 时间：2013-04-10T13:45:52.607
> 
> 标签：javascript, three.js, webgl, light

我在我的 colladaLoader 中使用threejs，我的模型显示很好，除了环境光或相关的东西有时会使它变暗.. 光来来去去。使用以下代码，我如何禁用此行为并使照明恒定且明亮？

![车 1](https://i.stack.imgur.com/9F6xd.png) ![车 2](https://i.stack.imgur.com/43u0c.png)

代码：

```
if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

var container, stats;
var camera, scene, renderer, objects;
var particleLight, pointLight;
var skin;

function load_model(el,model_url,type) {

            window.loader = new THREE.ColladaLoader();
            window.loader.options.convertUpAxis = true;

            window.imageReplace = [{"name":"stock.jpg","new_image":"colors/generated_color.png"}];

            window.loader.load( model_url, imageReplace, function ( collada ) {
                //console.log(collada);
                dae = collada.scene;
                skin = collada.skins[ 0 ];

                dae.scale.x = dae.scale.y = dae.scale.z = 0.040;
                dae.updateMatrix();

                //setMaterial(dae, new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( "/media/images/stock.jpg") } ));
                window.init(el);
                window.animate();

            } );

            window.init = function(el) {

                container = document.createElement( 'div' );
                el.append( container );

                camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
                camera.position.set( 2, 2, 3 );

                scene = new THREE.Scene();

                // Add the COLLADA

                scene.add( dae );

                particleLight = new THREE.Mesh( new THREE.SphereGeometry( 4, 8, 8 ), new THREE.MeshBasicMaterial( { color: 0xffffff } ) );
                scene.add( particleLight );

                // Lights

              //  scene.add( new THREE.AmbientLight( 0xFFFFFF ) );

                var directionalLight = new THREE.DirectionalLight(/*Math.random() * 0xffffff*/0xeeeeee );
                directionalLight.position.x = Math.random() - 0.5;
                directionalLight.position.y = Math.random() - 0.5;
                directionalLight.position.z = Math.random() - 0.5;
                directionalLight.position.normalize();
                scene.add( directionalLight );

                // pointLight = new THREE.PointLight( 0xffffff, 4 );
                // pointLight.position = particleLight.position;
                // scene.add( pointLight );

                renderer = new THREE.WebGLRenderer();
                if ( type =='edit')
                    renderer.setSize( window.innerWidth/2, window.innerHeight/2 );
                else
                    renderer.setSize( window.innerWidth/3, window.innerHeight/3 );

                container.appendChild( renderer.domElement );

                // stats = new Stats();
                // stats.domElement.style.position = 'absolute';
                // stats.domElement.style.top = '0px';
                // container.appendChild( stats.domElement );

                window.addEventListener( 'resize', onWindowResize, false );

            }

            function onWindowResize() {

                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();

                if ( type =='edit')
                    renderer.setSize( window.innerWidth/2, window.innerHeight/2 );
                else
                    renderer.setSize( window.innerWidth/3, window.innerHeight/3 );

            }

            //

            var t = 0;
            var clock = new THREE.Clock();

            window.animate = function() {

                var delta = clock.getDelta();

                requestAnimationFrame( animate );

                if ( t > 1 ) t = 0;

                if ( skin ) {

                    // guess this can be done smarter...

                    // (Indeed, there are way more frames than needed and interpolation is not used at all
                    //  could be something like - one morph per each skinning pose keyframe, or even less,
                    //  animation could be resampled, morphing interpolation handles sparse keyframes quite well.
                    //  Simple animation cycles like this look ok with 10-15 frames instead of 100 ;)

                    for ( var i = 0; i < skin.morphTargetInfluences.length; i++ ) {

                        skin.morphTargetInfluences[ i ] = 0;

                    }

                    skin.morphTargetInfluences[ Math.floor( t * 30 ) ] = 1;

                    t += delta;

                }

                window.render();
                //stats.update();

            }

            window.render = function() {

                var timer = Date.now() * 0.0005;

                camera.position.x = Math.cos( timer ) * 10;
                camera.position.y = 2;
                camera.position.z = Math.sin( timer ) * 10;

                camera.lookAt( scene.position );

                particleLight.position.x = Math.sin( timer * 4 ) * 3009;
                particleLight.position.y = Math.cos( timer * 5 ) * 4000;
                particleLight.position.z = Math.cos( timer * 4 ) * 3009;

                renderer.render( scene, camera );

            }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:16:22.053

您的主要（？）灯光位置定义为随机的，如下所示：

```
 directionalLight.position.x = Math.random() - 0.5;
            directionalLight.position.y = Math.random() - 0.5;
            directionalLight.position.z = Math.random() - 0.5; 
```

只需在那里使用硬编码的恒定位置。

您也可以使用环境光，根本不需要位置。如果需要，您可以从代码中取消注释。

# jquery - jQuery: .is :last-child (或 first-child) 与特定类

> ID：15927663
> 
> 赞同：0
> 
> 时间：2013-04-10T13:46:01.630
> 
> 标签：jquery, css

我正在制作自行车目录，其中包括过滤器和用于详细信息的灯箱。

自行车概览由一个包含 li 的大 ul 组成，其中每个 li 代表一辆自行车。详细信息（用于过滤）通过数据属性设置和读取。如果一个`li`有类`.show`，它匹配过滤条件，因此显示在概览中。

导航灯箱（上一个/下一个箭头）时，用户应该只看到符合标准（has `.show`）的自行车，这就是我的工作。

最后一步（我要问这个问题）是：在灯箱中，当第一辆自行车处于活动状态时，我希望“上一个”箭头消失，而当最后一辆自行车处于活动状态时，“下一个”箭头应该消失。

我试过这个：

```
if ( info.is(":last-child") ) { 
    lightbox.find(".lightbox-nav-next").hide();
} else { 
    lightbox.find(".lightbox-nav-next").show();
}; 
```

在`info`那`li`一刻，灯箱中显示的内容在哪里。

我想知道为什么`info.is(":last-child")`不工作......我认为这是因为它选择了最后一个孩子而不考虑它是否有 class `.show`。

解决这个问题的最佳方法是什么？提前致谢！

编辑：我正在谈论的页面在线：[http](http://dev.onefinitystudios.com/rvs/verkoop.html) ://dev.onefinitystudios.com/rvs/verkoop.html 。javascript所在的文件是catalogus.js。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:53:51.073

您可以使用[:last](http://api.jquery.com/last-selector/)选择器。

您需要检查的是是否`info`与最后一项与class相同`show`，可以实现`$('.show:last').is(info)`。

```
if ( $('.show:last').is(info) ) { 
    lightbox.find(".lightbox-nav-next").hide();
} else { 
    lightbox.find(".lightbox-nav-next").show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:55:00.960

```
lightbox.find(".lightbox-nav-next").toggle(function () {
  return ! info.is(".show:last");
}); 
```

和

```
lightbox.find(".lightbox-nav-prev").toggle(function () {
  return ! info.is(".show:first");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:51:17.713

您还可以使用 jquery .last()

jquery .last() 无论如何都会选择最后一个孩子

所以你的代码会是这样的：

```
if ( info.last() ) { 
    lightbox.find(".lightbox-nav-next").hide();
} else { 
    lightbox.find(".lightbox-nav-next").show();
}; 
```

[http://api.jquery.com/last/](http://api.jquery.com/last/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T13:52:18.220

尝试使用`:last`（是的，它不是来自 CSS，而是 jQuery 添加）

IE

```
if ( info.is(":last") ) { 
   ... 
```

**[文档](http://api.jquery.com/last-selector/)**

# java - Java中的GPS计算

> ID：15927664
> 
> 赞同：4
> 
> 时间：2013-04-10T13:46:02.367
> 
> 标签：java, api, gps

我正在寻找**一个免费**的 java API，它提供了计算 GPS 坐标之间距离的基本功能。我需要两点之间的基本 getDistance，即围绕点的半径范围内的兴趣点。
我做了一些研究，一方面发现了一些选择。

一方面有 Apache SIS（[http://incubator.apache.org/sis/index.html](http://incubator.apache.org/sis/index.html)），但这仍在开发中，可能会改变一些。另一方面是 GeoTools ( [http://docs.geotools.org/](http://docs.geotools.org/) )，但这对我的需要来说相当复杂。

还有其他易于使用且更简单的 API 吗？

另一种选择是自己简单地实现所有这些，我已经看到了一些自己的实现示例，但它们都有一些类似的评论：“这实际上不起作用，它提供的距离相差 100米”。这样的实现有多可靠？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T15:00:41.850

使用 GeoTools 和 Maven，应该不会太难。Maven 将处理依赖项。幸运的是，您不需要整个 Geotools 套件来进行“无头”计算。

我希望这是你正在寻找的。

绒球：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>org.bar</groupId>
  <artifactId>geo</artifactId>
  <version>1.0-SNAPSHOT</version>

  <repositories>
    <repository>
      <id>maven2-repository.dev.java.net</id>
      <name>Java.net repository</name>
      <url>http://download.java.net/maven/2</url>
    </repository>
    <repository>
      <id>osgeo</id>
      <name>Open Source Geospatial Foundation Repository</name>
      <url>http://download.osgeo.org/webdav/geotools/</url>
    </repository>
    <repository>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
      <id>opengeo</id>
      <name>OpenGeo Maven Repository</name>
      <url>http://repo.opengeo.org</url>
    </repository>
  </repositories>

  <dependencies>
    <dependency>
      <groupId>org.geotools</groupId>
      <artifactId>gt-referencing</artifactId>
      <version>9.0</version>
    </dependency>
  </dependencies>
</project> 
```

编码：

```
package org.bar;

import org.geotools.referencing.GeodeticCalculator;
import java.awt.geom.Point2D;

/**
 * How far is NY from London ?
 */
public class DistanceTest {

  public final static void main(final String[] args) {
    final GeodeticCalculator calc = new GeodeticCalculator();

    final Point2D london = new Point2D.Double(-0.127512, 51.507222);
    final Point2D ny = new Point2D.Double(-73.94, 40.67 );
    calc.setStartingGeographicPoint(london);
    calc.setDestinationGeographicPoint(ny);

    System.out.println("Distance London-NY: " + calc.getOrthodromicDistance()/1000 + " kms");
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:52:00.753

你试过[http://www.dinopolis.org/gpsylon/](http://www.dinopolis.org/gpsylon/)吗？我提供以下功能：

*   测量距离。
*   位置标记

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-20T19:46:43.500

看看[Geocalc](https://github.com/grumlimited/geocalc)

```
//Kew
Coordinate lat = new DegreeCoordinate(51.4843774);
Coordinate lng = new DegreeCoordinate(-0.2912044);
Point kew = new Point(lat, lng);

//Richmond, London
lat = new DegreeCoordinate(51.4613418);
lng = new DegreeCoordinate(-0.3035466);
Point richmond = new Point(lat, lng);

double distance = EarthCalc.getVincentyDistance(richmond, kew); //in meters
double bearing = EarthCalc.getVincentyBearing(kew, richmond); //in decimal degrees 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T14:01:18.970

OpenStreetMaps ( [http://www.openstreetmap.us/](http://www.openstreetmap.us/) ) 有一些非常有用的免费且易于使用的 API。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T15:06:49.183

以下是您可能会发现有用的面向位置的 API 集合：

[https://www.temboo.com/library/keyword/location/](https://www.temboo.com/library/keyword/location/)

根据您的问题，最适合的是 Google Distance Matrix API。API 文档在这里：[https ://developers.google.com/maps/documentation/distancematrix/](https://developers.google.com/maps/documentation/distancematrix/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-10-14T11:37:37.887

我赞成[大地测量学](https://github.com/ndimiduk/geodesy)。

它仅由 7 个类组成。所以它完全易于使用。

# php - 在 datepicker 输入标记上调用 javascript 函数进行第二个操作

> ID：15927666
> 
> 赞同：0
> 
> 时间：2013-04-10T13:46:03.333
> 
> 标签：php, javascript

我正在使用为日期调用 datepicker 脚本的输入标签。现在在输入标记的 onblur 事件上，我正在调用一个正常工作的 javascript 函数，但第二次当我单击 datepicker 输入以选择值时。

当我第一次单击输入标签并从日期选择器中选择一个值时，没有任何反应。但是当我第二次点击输入标签并从 datepicker 中选择一个值时，我的 javascript 函数正在工作。

这是代码：

```
// HTML code for input tag using datepicker script

<div class="input-append">
    <input type="text" size="12"  id="inputField" name="event_fromdate" readonly Placeholder="From Date" onblur="show_hide_fromdate();" />  
</div>

 // javascript function

 function show_hide_fromdate()
 {
     var fromdate=$('#inputField').val();
     var current_date = new Date();
     var userdate = new Date(fromdate);

     if(fromdate=="")
     {
         document.getElementById('msgFromDate').innerHTML = 'Enter From Date.';
     }
     else
     { 
         if(current_date.getDate()>userdate.getDate() || 
            current_date.getMonth()>userdate.getMonth() || 
            current_date.getFullYear()>userdate.getFullYear())
         {
             document.getElementById('msgFromDate').innerHTML = 'Invalid event date';
         }
         else
         {
             $('#msgFromDate').html('');
         }
     }
 } 
```

没有得到这段代码的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:19:17.737

```
 function show_hide_fromdate()
             {
                 var fromdate=$('#inputField').val();
                 var current_date = new Date();

                 //comment this since first time this value of field is always empty
                 //I move it to validation part below

                 //var userdate = new Date(fromdate);

                 if(fromdate=="")
                 {
                    $('#msgFromDate').html('Enter From Date.');
                 }
                 else
                 { 
                    var userdate = new Date(fromdate);
                     if(current_date.getDate()>userdate.getDate() || 
                        current_date.getMonth()>userdate.getMonth() || 
                        current_date.getFullYear()>userdate.getFullYear())
                     {
                         $('#msgFromDate').html('Invalid event date'.');
                     }
                     else
                     {
                        // maybe you should echo something to know whether it worked well or not to debug
                         $('#msgFromDate').html('Valid');
                     }
                 }
             } 
```

如果上面的代码不起作用，你应该使用 firebug 来检测是否有 javascript 错误，也许你应该仔细检查 datetime picker 的输出。我建议您将“console.log('on blur')”添加到函数中以调试此事件行为的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:09:12.150

我认为你的问题是`onBlur`事件。我不知道你为什么`onBlur`在`readonly`textfield 上调用 JS 方法。你能解释一下吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:14:28.433

发生这种情况是因为您`onblur`的事件没有等待您的`datepicker`输入。我认为您需要的是可以告诉您您的文本`textfield`已更改的内容。像这样的东西：

```
$("input[type=text]").change(function() {
    alert("Text changed");
}); 
```

[您可以在此处找到一个工作示例。](http://jsfiddle.net/sUCkB/)

# android - 在 android 中标记我的应用程序中的特定设置

> ID：15927669
> 
> 赞同：0
> 
> 时间：2013-04-10T13:46:05.847
> 
> 标签：android, networking, settings

我在我的应用程序中遇到问题。我需要标记`Settings`我使用以下代码的特定位置：

```
startActivity(new Intent(android.provider.Settings.ACTION_WIRELESS_SETTINGS)); 
```

它打开了设置页面，但它没有标记特定的实体。我怎么能得到这个`automark`选项有人能帮帮我吗！@谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:30:50.110

如果您尝试执行的操作被允许，那么如果某些应用程序会打开他们的无线连接或者更糟糕的是 GPS 传感器，那么用户会非常生气。

此更改只能由用户自己更改。因此，如前所述，如果您需要 Internet 连接或可用的 GPS 传感器，您可以做的最多的事情就是向用户展示相关消息并触发一个意图，将他们带到设置屏幕以自行更改此设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:24:24.460

这是不可能的，除非您拥有权限并直接访问设置（不是有意，而是使用 Settings 类），尽管如此，我不确定您是否可以。

你能做的就是谷歌地图所做的。当您的应用程序启动时，检查是否启用了 gps，如果未启用，则显示通知用户的警报，并带有一个退出应用程序的按钮，以及一个转到设置屏幕的按钮。当用户从设置屏幕返回时，再次测试。

# d3.js - d3.js 中的可折叠/分层和力导向图

> ID：15927671
> 
> 赞同：15
> 
> 时间：2013-04-10T13:46:07.713
> 
> 标签：d3.js, force-layout

有很多力导向图（即节点和链接）和可折叠树（即父子节点）的例子，但我找不到这些组合的例子——除了像这样的一些 1 级集群网络[——http： //static.cybercommons.org/js/d3/examples/force/force-cluster.html](http://static.cybercommons.org/js/d3/examples/force/force-cluster.html)。

![在此处输入图像描述](https://i.stack.imgur.com/O3GPY.jpg)

那就是我需要一个完整的节点层次结构（具有任意数量的级别），并在整个层次结构中的各个节点之间建立链接。

有没有人有这方面的例子？

如果是这样，我最终希望看到层次结构是可折叠的，并且在折叠时，来自子级的任何链接都会“提升”到父级。

干杯，蒂姆

这类似于我期望 jsonData 的样子......

```
{
"nodes": [
    {
        "name": "Parent 1",
        "children": [
            {
                "name": "Child 1",
            },
    },
    {
        "name": "Parent 2",
        "children": [
            {
                "name": "Child 2",
            },
.
.
.
"links": [
    {
        source: "Child 1",
        target: "Child 2"
    },
.
. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-20T11:24:11.497

我尝试在这里合并这两个例子我的[小提琴](http://jsfiddle.net/waamit14/V6Qr8/)

```
// Toggle children on click.
function click(d) {
if (d.children) {
    d._children = d.children;
    d.children = null;
} else {
    d.children = d._children;
    d._children = null;
}
update();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-07T01:20:24.103

这是一个很好的例子，展示了这两个属性[http://bl.ocks.org/mbostock/1093130](http://bl.ocks.org/mbostock/1093130)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T14:31:42.647

我也对这个感兴趣。我找到了两个例子，我想结合起来。

[http://bl.ocks.org/mbostock/1062288](http://bl.ocks.org/mbostock/1062288) [http://graus.nu/d3/](http://graus.nu/d3/)

# mysql - mysql没有正确排序

> ID：15927672
> 
> 赞同：-2
> 
> 时间：2013-04-10T13:46:08.483
> 
> 标签：mysql, sql-order-by

我有下表的条目

```
+--------------------------------------------+----------+
| menu_entry                                 | position |
+--------------------------------------------+----------+
| ADMINISTRATION::USERMANAGEMENT::USER       |        2 |
| DEMO::CHART::EXAMPLE                       |        1 |
| PROJMGMT::PROJSTRG::LOP                    |        2 |
| ADMINISTRATION::USERMANAGEMENT::RIGHTSMMGT |        1 |
| PROJMGMT::PROJSTRG::MEETINGS               |        1 |
| DEMO::GRID::CELLEDIT                       |        1 |
| DEMO::GRID::ROWEDIT                        |        3 |
| DEMO::DATAMGMT::GROUPING                   |        1 |
| DEVELOPER::APPS::ADDAPP                    |        2 |
| DEVELOPER::APPS::APPTEST                   |        1 |
| DEMO::GRID::LOCKINGDEMO                    |        4 |
| DEMO::GRID::FILTERDEMO                     |        2 |
+--------------------------------------------+----------+ 
```

我想`menu_entry`按位置排序。我用以下语句做到这一点

```
 select menu_entry,position from app_names order by menu_entry, position; 
```

但它仅按 menu_entry 而不是按位置排序。这是我的声明的回报：

```
+--------------------------------------------+----------+
| menu_entry                                 | position |
+--------------------------------------------+----------+
| ADMINISTRATION::USERMANAGEMENT::RIGHTSMMGT |        1 |
| ADMINISTRATION::USERMANAGEMENT::USER       |        2 |
| DEMO::CHART::EXAMPLE                       |        1 |
| DEMO::DATAMGMT::GROUPING                   |        1 |
| DEMO::GRID::CELLEDIT                       |        1 |
| DEMO::GRID::FILTERDEMO                     |        2 |
| DEMO::GRID::LOCKINGDEMO                    |        4 |
| DEMO::GRID::ROWEDIT                        |        3 |
| DEVELOPER::APPS::ADDAPP                    |        2 |
| DEVELOPER::APPS::APPTEST                   |        1 |
| PROJMGMT::PROJSTRG::LOP                    |        2 |
| PROJMGMT::PROJSTRG::MEETINGS               |        1 |
+--------------------------------------------+----------+ 
```

如您所见， DEMO::GRID::... 没有正确排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T13:51:22.810

您可能应该 order by`SUBSTRING_INDEX(menu_entry, '::', 1)`提取第一个`::`或 by左侧的字符串部分`SUBSTRING_INDEX(menu_entry, '::', 2)`，具体取决于您所追求的：

```
select menu_entry, position
from app_names
order by
  SUBSTRING_INDEX(menu_entry, '::', 1), position; 
```

请[在此处](http://sqlfiddle.com/#!2/caf0f/2)查看小提琴。

# linq - EF 中的 MergeOption 使用示例

> ID：15927674
> 
> 赞同：0
> 
> 时间：2013-04-10T13:46:14.263
> 
> 标签：linq, entity-framework

我是 EF 的新手，我正在尝试了解更新的概念，因为我在 Google 中搜索时正在获取旧数据以使用 EFextensions 等。（主要是）。

我正在尝试使用执行 SQL 查询`ExecuteStoreQuery.`

我有一个东西叫`MergeOption`。它究竟是做什么的？

我已阅读[http://msdn.microsoft.com/en-us/library/system.data.objects.mergeoption.aspx](http://msdn.microsoft.com/en-us/library/system.data.objects.mergeoption.aspx)

但是我没有清楚地理解它。一些例子将带我完成。

谢谢，秘鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:48:41.543

指定`MergeOption`with`ExecuteStoreQuery`允许您确定如何将结果作为实体进行跟踪。正如您在所引用的文章中所读到的，有四个选项：

*   `AppendOnly`（默认）
*   `OverwriteChanges`
*   `PreserveChanges`
*   `NoTracking`

这里有几个链接（[基本示例](http://msmvps.com/blogs/kevinmcneish/archive/2010/02/16/setting-entity-framework-mergeoptions-what-works-what-doesn-t.aspx)，[详细示例](http://blogs.msdn.com/b/dsimmons/archive/2010/01/12/ef-merge-options-and-compiled-queries.aspx)），展示了 MergeOption 的一些深入使用示例，以及它对被跟踪对象的影响。

# ruby-on-rails - 使用表单构建器将字段的值显示到rails中的标签中

> ID：15927678
> 
> 赞同：5
> 
> 时间：2013-04-10T13:46:21.800
> 
> 标签：ruby-on-rails, label

我正在使用 Rails 3.2，并且需要使用表单构建器对象在标签中显示字段的值。在文本框中显示它是直截了当的，但我无法在标签中做到这一点。代码是这样的：

```
<%= f.label :key_name, "#{:key_name}"%>
<%= f.text_field :key_name %> 
```

在上面的 f 是我的表单构建器，我的模型有一个名为 key_name 的字段。第二行工作正常，我在文本字段中显示它，而第一行没有。我该怎么做。上面的行最终将“键名”显示为标签，而我希望将 key_name 的值设置为标签的值，例如。它应该生成一个 html， `<label>Description</label>`其中 'Description' 是`:key_name`. 然后我还必须在 key_name 上写一个 case 语句，这也不起作用，因为我不知道如何从`:keyname`字段中提取值。像这样的东西：

```
<% case :key_name %>
  <% when 'Description' %>
   ... do something 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-04-10T15:43:20.417

帮助任何会错过它的人。这是评论中OP的正确答案：

```
<%= f.label :key_name, f.object.key_name %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T14:32:38.103

`#{:key_name}`将评估为 string `':key_name'`，这就是正在打印的内容。您需要在模型实例上调用该*方法，例如：* `key_name`

```
<%= f.label :key_name, @model.key_name %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-02T11:00:36.710

用更少的代码也可以做到这一点：

`<%= f.object.key_name %>`

除非坚持使用 HTML 标签标签。

# blackberry - 如何将excel格式的联系人导入黑莓设备（可能是bbb格式）

> ID：15927686
> 
> 赞同：3
> 
> 时间：2013-04-10T13:46:35.413
> 
> 标签：blackberry

我在 Excel 文件中有联系人，我想将这些联系人导入 BlackBerry Bold 设备。我已经使用 Contacts to Excel s/w 来做同样的事情，但我没有得到正确的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:29:59.630

同步联系人（导入/导出）（到和从）Outlook 的步骤如下。

1.  准备联系人的 Excel 文件。
2.  将 Excel 文件（xls）转换为 csv 文件。
3.  将 csv 文件的标题映射到 Outlook 中可用的字段。
4.  从文件菜单中选择导入/导出选项。
5.  使用从另一个程序或文件导入导出到文件
6.  选择逗号分隔值 (Windows)。
7.  选择目标/源以导入/导出 csv 文件。
8.  现在打开**黑莓桌面软件**
9.  选择管理器 选择您的 IN - OUT 数据流 通过配置选择您的归档映射。您还可以通过配置更改源/目标字段映射。
10.  选中您的进程附近的复选框。
11.  点击同步管理器。

而已。您已完成同步。

注意：在执行第 9 步时请注意。

# sql - 如何按多个联合语句的结果排序？

> ID：15927687
> 
> 赞同：1
> 
> 时间：2013-04-10T13:46:37.787
> 
> 标签：sql, sql-server, sql-server-2008, sql-order-by, common-table-expression

我不能使用公用表表达式：

```
WITH    cte
          AS (SELECT    [StationID],
                        [LastDistribution]
              FROM      [DB1].[dbo].[ProcessingStations]
              UNION ALL
              SELECT    [StationID],
                        [LastDistribution]
              FROM      [DB2].[dbo].[ProcessingStations]
              UNION ALL
              SELECT    [StationID],
                        [LastDistribution]
              FROM      [DB3].[dbo].[ProcessingStations]
              UNION ALL
              SELECT    [StationID],
                        [LastDistribution]
              FROM      [DB4].[dbo].[ProcessingStations]
              UNION ALL
              SELECT    [StationID],
                        [LastDistribution]
              FROM      [DB5].[dbo].[ProcessingStations]
              ORDER BY  [StationID]
              UNION ALL
              SELECT    [StationID],
                        [LastDistribution]
              FROM      [DB6].[dbo].[ProcessingStations]
              UNION ALL
              SELECT    [StationID],
                        [LastDistribution]
              FROM      [DB7].[dbo].[ProcessingStations]
              UNION ALL
              SELECT    [StationID],
                        [LastDistribution]
              FROM      [DB8].[dbo].[ProcessingStations])
    SELECT  *
    FROM    cte
    ORDER BY StationID 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T13:55:20.563

只需将 the放在语句`ORDER BY`链的末尾：`SELECT ... FROM ... UNION ALL`

```
SELECT    [StationID],
          [LastDistribution]
          FROM      [DB1].[dbo].[ProcessingStations]
          UNION ALL
          SELECT    [StationID],
                    [LastDistribution]
          FROM      [DB2].[dbo].[ProcessingStations]
          UNION ALL
          SELECT    [StationID],
                    [LastDistribution]
          FROM      [DB3].[dbo].[ProcessingStations]
          UNION ALL
          SELECT    [StationID],
                    [LastDistribution]
          FROM      [DB4].[dbo].[ProcessingStations]
          UNION ALL
          SELECT    [StationID],
                    [LastDistribution]
          FROM      [DB5].[dbo].[ProcessingStations]
          ORDER BY  [StationID]
          UNION ALL
          SELECT    [StationID],
                    [LastDistribution]
          FROM      [DB6].[dbo].[ProcessingStations]
          UNION ALL
          SELECT    [StationID],
                    [LastDistribution]
          FROM      [DB7].[dbo].[ProcessingStations]
          UNION ALL
          SELECT    [StationID],
                    [LastDistribution]
          FROM      [DB8].[dbo].[ProcessingStations]
ORDER BY StationID 
```

这是我在 SSMS 中做的一个简单示例：

```
DECLARE @a table (x int)
DECLARE @b table (x int)
DECLARE @c table (x int)

insert into @a values (5)
insert into @a values (4)
insert into @a values (3)

insert into @b values (0)
insert into @b values (1)
insert into @b values (2)

insert into @c values (0)
insert into @c values (1)
insert into @c values (2)

select * from @a
union all
select * from @b
union all
select * from @c
order by x 
```

这是输出：

```
 x
-----
  0
  0
  1
  1
  2
  2
  3
  4
  5 
```

如您所见，即使`SELECT * FROM @a`排在第一位，它仍然将排在最后的排在结果集中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T13:48:31.630

为什么你不能用一个`CTE`？。无论如何，您仍然可以使用派生表执行相同操作：

```
SELECT *
FROM (  SELECT    [StationID],
                  [LastDistribution]
        FROM      [DB1].[dbo].[ProcessingStations]
        UNION ALL
        SELECT    [StationID],
                  [LastDistribution]
        FROM      [DB2].[dbo].[ProcessingStations]
        UNION ALL
        SELECT    [StationID],
                  [LastDistribution]
        FROM      [DB3].[dbo].[ProcessingStations]
        UNION ALL
        SELECT    [StationID],
                  [LastDistribution]
        FROM      [DB4].[dbo].[ProcessingStations]
        UNION ALL
        SELECT    [StationID],
                  [LastDistribution]
        FROM      [DB5].[dbo].[ProcessingStations]
        UNION ALL
        SELECT    [StationID],
                  [LastDistribution]
        FROM      [DB6].[dbo].[ProcessingStations]
        UNION ALL
        SELECT    [StationID],
                  [LastDistribution]
        FROM      [DB7].[dbo].[ProcessingStations]
        UNION ALL
        SELECT    [StationID],
                  [LastDistribution]
        FROM      [DB8].[dbo].[ProcessingStations]) A
ORDER BY StationID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:02:27.090

看[小提琴](http://sqlfiddle.com/#!3/924c6/1)，只需将`ORDER BY`最后一组设置为“联合”即可。它在没有 CTE 开销的情况下实现了相同的结果。

该命令将影响整个统一集。

```
SELECT
        [StationID],
        [LastDistribution]
    FROM 
        [dbo].[ProcessingStations]
UNION ALL
SELECT
        [StationID],
        [LastDistribution]
    FROM 
        [dbo].[ProcessingStations]
UNION ALL
SELECT
        [StationID],
        [LastDistribution]
    FROM 
        [dbo].[ProcessingStations]
    ORDER BY
        [StationID] 
```

# ios - heightForRowAtIndexPath 内的当前单元格高度？

> ID：15927693
> 
> 赞同：8
> 
> 时间：2013-04-10T13:46:43.663
> 
> 标签：ios, objective-c, uitableview

我有一张带有静态单元格的表格。对于一个单元格，我想根据标签的高度（在该单元格内）更改其高度，同时保持所有其他单元格的高度不变。如何获取当前单元格的高度？或者也许有更好的方法？

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if ([indexPath section] == 2) {
        return self.myLabel.frame.origin.y *2 + self.myLabel.frame.size.height;
    } else {
        return ...; // what should go here, so the cell doesn't change its height?
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T14:14:00.613

您可以致电：

```
[super tableView:tableView heightForRowAtIndexPath:indexPath] 
```

在 else 块中，因此您不必担心是否更改了默认高度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T13:55:39.977

您可以获取/设置默认高度`tableView.rowHeight`，或者您可以在更改单元格高度之前存储您的高度，这样您就可以从某个变量中获取默认高度；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T13:56:45.013

请做这个

```
if ([indexPath section] == 2)
{
    if(indexPath.row == 1)
         return self.myLabel.frame.origin.y *2 + self.myLabel.frame.size.height; 
    else 
         tableView.rowHeight
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-28T19:47:35.007

@talnicolas 很好的答案，这里是 Swift 3：

```
override func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -> CGFloat {
    if indexPath.section == 2 {
        let easy = self.myLabel.frame
        return easy.origin.y *2 + easy.size.height
    } else {
        return super.tableView(tableView, heightForRowAt: indexPath)
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T13:57:26.140

您可能想要计算受限宽度中的标签高度。在这种情况下，您可以创建这样的方法：

```
- (CGFloat)textHeightOfMyLabelText {
    CGFloat textHeight = [self.myLabel.text sizeWithFont:self.myLabel.font constrainedToSize:LABEL_MAX_SIZE lineBreakMode:self.myLabel.lineBreakMode].height;
    return textHeight;
} 
```

并使用结果`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`。不要忘记添加标签的边距值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T13:59:22.697

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == youSectionNumber)
    {
        if (indexPath.row == numberOfrow)
        {
            return self.myLabel.frame.origin.y *2 + self.myLabel.frame.size.height;
        }
    }

      return 44; // it is default height of cell;
} 
```

# batch-file - 随机分配新的虚拟网络适配器

> ID：15927694
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:46:45.827
> 
> 标签：batch-file, system

我有一个克隆虚拟机的设置，因此更改了它们的 mac 地址。当每台机器启动时，它被分配到一个`Local Area Connection x`接口。

然后我运行一个`batch`脚本来更改接口的 IP：

```
netsh interface ip set address name="Local Area Connection 1" static 192.168.1.50 255.255.255.0 192.168.1.254
netsh interface ip set address name="Local Area Connection 2" static 172.16.5.50 255.255.255.0 172.16.5.254 
```

问题是适配器是随机分配的——第一个 NIC 有时得到`Local Area Connection 1`，有时得到`Local Area Connection 2`。因此我无法分配 IP 地址。

NIC 按其 MAC 地址正确排序。我考虑过获取两个活动接口的 MAC 地址，对它们进行排序，并找出分配的适配器名称，然后才运行`netsh interface ip set`，但我不知道该怎么做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:30:14.883

我使用`getmac`util 获取 MAC 地址及其分配的连接名称：

```
getmac /V /FO LIST 
```

Powershell还有一个解决方案： [http ://www.ddls.net.au/blog/2012/08/renaming-network-connections-using-powershell-and-wmi/](http://www.ddls.net.au/blog/2012/08/renaming-network-connections-using-powershell-and-wmi/)

# auto-update - 有没有办法强制 install4j 自动更新程序更新当前版本？

> ID：15927696
> 
> 赞同：0
> 
> 时间：2013-04-10T13:46:54.093
> 
> 标签：auto-update, install4j

我一直在通过 beta 版迭代我的应用程序版本，并且 install4j 自动更新程序正在成功更新版本（2.1 -> 3.0b0 -> 3.0b1 -> 3.0b2）。现在我已经发布了 3.0 版并且自动更新程序拒绝识别新版本。现在，我知道有一个选项可以让您自定义更新方案，但现在为时已晚，因为我在发布旧版本时不知道这一点。我玩过它，它更新到 4.0 和 3.0b3，但无法识别 3.0、3.1。

那么，有没有办法通过操作新的 update.xml 文件来强制自动更新程序进行更新？

编辑：我安装了 install4j 的 4.2.8 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:18:06.680

不幸的是没有。install4j 5 将正确地从 3.0b2 更新到 3.0，但在 install4j 4 中，您必须修改更新程序逻辑，因此您首先必须发布 3.0b4 才能做到这一点。

# spring - 在单元测试中设置类的资源注释字段

> ID：15927701
> 
> 赞同：2
> 
> 时间：2013-04-10T13:47:05.447
> 
> 标签：spring

我有一堂课。

```
public class Definitions{
@Resource(name="schemas")
private Collection<String> schemas;
} 
```

这个类是通过spring初始化的。弹簧文件：test.xml

```
<util:list id="schemas">
    <value>"A"</value>
    <value>"b"</value>
</util:list

<bean id="Definitions" /> 
```

有没有什么方法可以在我的单元测试中将值插入私有字段模式（用资源注释）而不使用 spring。我尝试通过反射使用设置私有变量，但这也没有帮助（可能是由于安全限制）。

即使使用spring，ApplicationContext context = new ClassPathXmlApplicationContext("test.xml"); 它无法在定义 bean 中加载模式。访问模式时出现“NullPointerException”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:20:58.040

为它添加一个设置器：

```
public class Definitions{
    private Collection<String> schemas;

    @Resource(name="schemas")
    public void setSchemas(Collection<String> schemas) {
        this.schemas = schemas;
    }
} 
```

这就是依赖注入的原理：在单元测试中手动注入依赖，通过构造函数或 setter 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T14:46:48.273

尝试执行以下操作：

在 spring.xml 中插入列表：

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context" xmlns:util="http://www.springframework.org/schema/util" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd">
    <util:list id="listTest">
        <value>Valor 1</value>
        <value>Valor 2</value>
    </util:list>
</beans> 
```

引用代码中的列表：

```
@Resource(name = "listTest")
private List<String> listTest; 
```

我在这里测试过，它在 Spring 4 和 3 上运行良好，不需要实现 setter 方法。

# math - 在 three.js 中根据对象的旋转移动对象

> ID：15927708
> 
> 赞同：7
> 
> 时间：2013-04-10T13:47:21.477
> 
> 标签：math, three.js, webgl

我正在尝试根据它的旋转在three.js中移动一个立方体，但不确定如何去做。

到目前为止，我可以使用 A & D 键旋转立方体的 z 轴旋转。并且使用 W 键，我希望它相对于其旋转向前移动。

从 2D 开始，我会这样做：

```
float angle = GradToRad(obj.rotation);
obj.x = obj.x + cos(angle) * velocity;
obj.y = obj.y + sin(angle) * velocity; 
```

这是当前实现的图像。 ![3D立方体三.js](https://i.stack.imgur.com/s7dVU.png)

如何在 three.js 中应用类似的东西？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T14:17:49.640

可以认为对象面向其正 Z 轴。所以要向前移动一个对象，相对于它自己的坐标系，你可以使用

```
Object3D.translateZ( distance ); 
```

三.js r.57

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:16:43.933

在单个（同质投影）[4×4 矩阵](http://threejs.org/docs/57/#Reference/Math/Matrix4)中表达旋转和平移可能是最简单的。[`Object3D.matrix`](http://threejs.org/docs/57/#Reference/Core/Object3D)three.js 中的成员已经这样做了，尽管您可能必须设置`matrixAutoUpdate`为`false`直接使用它。然后您可以使用 move`translate`方法在其自己的参考框架中移动对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:59:06.727

您的 2D 方法正是我在 three.js 中所做的。对于 Y 位置，我使用的是地形碰撞技术（仍然需要工作）；

# opencl - OpenCL 强制寄存器数量

> ID：15927711
> 
> 赞同：1
> 
> 时间：2013-04-10T13:47:34.340
> 
> 标签：opencl, gpu, gpgpu

使用 CUDA，可以使用编译选项强制编译器每个线程不使用超过 N 个寄存器：

```
--maxrregcount=N 
```

**OpenCL可以吗？如何？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:01:49.083

我不确定这是否完全回答了你的问题，但它是我认为最接近的。

'可以通过为 clBuildProgram() 提供“-cl-nv-maxrregcount=n”选项来设置每个线程的最大寄存器使用量。'

来自： http: [//openvidia.sourceforge.net/index.php/OpenCL](http://openvidia.sourceforge.net/index.php/OpenCL)

# javascript - Soundcloud JS SDK 不适用于 IE9

> ID：15927712
> 
> 赞同：0
> 
> 时间：2013-04-10T13:47:40.373
> 
> 标签：javascript, internet-explorer, soundcloud

通过 soundcloud javascript SDK 查询曲目时，在 IE9 中不发送任何请求，例如

```
// initialize soundcloud app
SC.initialize({
  client_id: MY_USER_ID
});
SC.get("/groups/55517/tracks", {limit: 1}, function(tracks){
    console.log("Latest track: " + tracks[0].title);
}); 
```

它适用于所有其他浏览器和 IE10。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T07:51:17.180

解决方案是将 Adob​​e Flash 更新到 10.1 或更高版本。Soundcloud 在 IE9 中使用基于 Flash 的后备。通常会显示一个提示，但由于我在模态中使用它，所以模态位于提示之上！

# spring - 在网页上生成流量的免费工具

> ID：15927715
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:47:49.420
> 
> 标签：spring, statistics, vaadin, web-traffic

我使用 Spring 和 Vaadin。我需要测试我的应用程序以了解它在发布后将如何工作。我正在寻找一些可以产生一些虚假流量的免费工具，如果可能的话，请给我一些统计数据（如响应时间、一小时内处理的响应数量）。你知道有什么工具可以提供吗？他们是否提供任何控制将执行什么（单击哪个按钮，输入哪些页面）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T13:50:55.607

看看[JMeter](http://jmeter.apache.org/)是专门用来模拟静态和动态加载的。

# mysql - 在更新 MySQL 触发器之前将旧记录插入其他表

> ID：15927724
> 
> 赞同：2
> 
> 时间：2013-04-10T13:48:13.677
> 
> 标签：mysql, triggers, insert

我想在我的数据库中复制旧记录。我尝试使用触发器，但有问题。我正在使用 MySQL Workbench，所以我发布了以下代码：

```
USE `secus_21`;
DELIMITER $$

CREATE TRIGGER `tsm_tasks_BUPD` BEFORE UPDATE ON tsm_tasks FOR EACH ROW
INSERT INTO `tsm_tasks_history`
    ( `ID_task` , `ID_user` , `ID_project` , `name` , `add_time` , `comment` )
VALUES
    ( OLD.`ID` , OLD.`ID_user` , OLD.`ID_project` , OLD.`name` , NOW() , OLD.`comment` ); 
```

更新事件，添加新记录，并尝试更改某些内容。我没有收到任何错误，所以我确定添加已成功完成，但`tsm_tasks_history`表中仍然没有任何内容。

编辑：

这里是所有触发语句

```
-- Full Trigger DDL Statements
-- Note: Only CREATE TRIGGER statements are allowed
DELIMITER $$

USE `secus_21`$$

CREATE TRIGGER `tsm_tasks_BUPD` BEFORE UPDATE ON tsm_tasks FOR EACH ROW
-- Edit trigger body code below this line. Do not edit lines above this one
INSERT INTO `tsm_tasks_history`
    ( `ID_task` , `ID_user` , `ID_project` , `name` , `add_time` , `comment` )
VALUES
    ( OLD.`ID` , OLD.`ID_user` , OLD.`ID_project` , OLD.`name` , NOW() , OLD.`comment` )

$$

CREATE TRIGGER `tsm_tasks_BDEL` BEFORE DELETE ON tsm_tasks FOR EACH ROW
-- Edit trigger body code below this line. Do not edit lines above this one
INSERT INTO `tsm_tasks_history`
    ( `ID_task` , `ID_user` , `ID_project` , `name` , `add_time` , `comment` )
VALUES
    ( OLD.`ID` , OLD.`ID_user` , OLD.`ID_project` , OLD.`name` , NOW() , OLD.`comment` )

$$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:54:16.287

您将分隔符更改为`$$`但没有完成触发器的创建`$$`。所以声明没有完成。

```
USE `secus_21`;
DELIMITER $$

DROP TRIGGER IF EXISTS tsm_tasks_BUPD;
CREATE TRIGGER `tsm_tasks_BUPD` BEFORE UPDATE ON tsm_tasks FOR EACH ROW
BEGIN
INSERT INTO `tsm_tasks_history`
    ( `ID_task` , `ID_user` , `ID_project` , `name` , `add_time` , `comment` )
VALUES
    ( OLD.`ID` , OLD.`ID_user` , OLD.`ID_project` , OLD.`name` , NOW() , OLD.`comment` );
END $$

DROP TRIGGER IF EXISTS tsm_tasks_BDEL;
CREATE TRIGGER `tsm_tasks_BDEL` BEFORE DELETE ON tsm_tasks FOR EACH ROW
BEGIN
INSERT INTO `tsm_tasks_history`
    ( `ID_task` , `ID_user` , `ID_project` , `name` , `add_time` , `comment` )
VALUES
    ( OLD.`ID` , OLD.`ID_user` , OLD.`ID_project` , OLD.`name` , NOW() , OLD.`comment` );
END $$

DELIMITER ; 
```

# android - 如何在按钮的 onClick 方法中注册传感器侦听器？

> ID：15927726
> 
> 赞同：1
> 
> 时间：2013-04-10T13:48:25.577
> 
> 标签：android, button, overriding, listener, accelerometer

我有一个应用程序，我想在单击按钮时启动加速度计的侦听器，所以我尝试了这种方式：

```
private SensorManager sensorManager;

@Override
public void onCreate (Bundle savedInstanceState){

    super.onCreate(savedInstanceState);
    setContentView(R.layout.storing_act);

    Button start = (Button)findViewById(R.id.startl);

    start.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            sensorManager=(SensorManager)getSystemService(SENSOR_SERVICE);
            sensorManager.registerListener(this, 
                    sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                    SensorManager.SENSOR_DELAY_NORMAL);
        }
    }); 
```

但它出现了一条消息

> “ SensorManager 类型中的方法 registerListener(SensorEventListener, Sensor, int) 不适用于参数 (new View.OnClickListener(){}, Sensor, int)”

有没有办法轻松解决？我是否必须覆盖任何其他方法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:23:33.093

你需要使用`MyActivity.this`因为`this`引用`OnClickListener`和`registerListener`方法是期望的`SensorEventListener`。

```
public class MyActivity extends Activity implements SensorEventListener {
    @Override
    public void onCreate (Bundle savedInstanceState){

        super.onCreate(savedInstanceState);
        setContentView(R.layout.storing_act);

        Button start = (Button)findViewById(R.id.startl);

        start.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                sensorManager=(SensorManager)getSystemService(SENSOR_SERVICE);
                sensorManager.registerListener(MyActivity.this, 
                        sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                        SensorManager.SENSOR_DELAY_NORMAL);
            }
        });
} 
```

# php - 未收到 PayPal 快递交易 - PHP

> ID：15927734
> 
> 赞同：0
> 
> 时间：2013-04-10T13:48:50.390
> 
> 标签：php, paypal

抱歉，如果这个问题已经被问过。我已经四处寻找了几个小时，还没有找到我的问题的答案。

我在使用 PayPal api 方面还很陌生，所以如果我在这里公然遗漏了什么，请原谅我。

我正在设置一个测试环境，以了解如何使用 PHP 中的 Express Checkout 库构建 Web 结帐。我已经建立了买家和商家卖家账户，并使用了PHP SDK中的一些示例来帮助我构建一个基本的HTML输入页面，并最终成功地将资金从买家账户转移到商家账户。

我遇到的问题是，当我完成汇款后，然后我登录到买家的沙箱账户，我可以看到钱已发送给商家，但交易已被标记为“无人认领”。查看交易的详细信息，已将其发送到正确的商家沙盒帐户。但是，当我登录商家帐户时，没有交易迹象。

我正在使用“销售”付款方式。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:00:59.283

确保在卖家账户上验证了电子邮件地址。如果还是看不到，能否提供一下交易id，测试沙盒买家邮箱，测试沙盒卖家邮箱，我可以在我这边看一下。

# ruby-on-rails - 需要从 database.yml 文件中获取用户名和密码并传入 rake 任务中的方法

> ID：15927742
> 
> 赞同：1
> 
> 时间：2013-04-10T13:49:01.397
> 
> 标签：ruby-on-rails, ruby, activerecord, rake, pg

目前，我在我的 rails rake 任务中使用 pg gem，这非常适合我想做的事情。我创建了一个变量 pg_conn 并将连接详细信息传递给 PGconn.connect 方法。我只是不想在每次数据库用户名/密码更改时更改此 rake 任务。如何将 yaml 文件中的登录详细信息传递给 pg_conn 命令。看看我下面的代码：

```
namespace :update_table do
  task :import => :environment do

$pg_conn = PGconn.connect(host =  "samsi-postgres-90s", port = 6433, options = '', tty ='',      dbname = "installs", login = "reports_m", password = "password")

my_query = "select * from all_tables"

   conn.query(my_query) do |raw_row|
     puts raw_row
   end

  end
end 
```

理想情况下，我想将凭据详细信息的散列传递给 pg_conn 连接变量，如下所示：

```
$pg_conn = PGconn.connect(yamlfile[:host], yamlfile[:port], '', '', yamlfile[:database], yamlfile[:username], yamlfile[:password]) 
```

我怎样才能做到这一点？感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:11:47.363

对于 Rails3，您可以在 rake 任务中使用[Rails.configuration ：](http://api.rubyonrails.org/classes/Rails/Application/Configuration.html)

```
 config   = Rails.configuration.database_configuration
  host     = config[Rails.env]["host"]
  database = config[Rails.env]["database"]
  username = config[Rails.env]["username"]
  password = config[Rails.env]["password"] 
```

只需确保您在 rake 任务中继承环境，例如

```
task :users => :environment do 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:52:36.233

鉴于此 Yaml 文件：

```
:host: samsi-postgres-90s
:port: 6433
:database: installs
:username: reports_m
:password: password 
```

你可以这样加载它：

```
require 'yaml'
yamlfile = YAML.load(open('your_file_path')) 
```

然后你可以写：

```
yamlfile[:host] # => "samsi-postgres-90s" 
```

等等

# java - CodeName 一、Action 事件不起作用-需要解释

> ID：15927748
> 
> 赞同：0
> 
> 时间：2013-04-10T13:49:31.553
> 
> 标签：java, mobile, user-interface, codenameone

我正在尝试获取和操作事件以在我的 HelloWorld 上触发。我正在使用 GUI，当它自动创建时：

```
protected void onMain_Button1Action(Component c, ActionEvent event) {
    // If the resource file changes the names of components this call will break notifying you that you should fix the code
    super.onMain_Button1Action(c,event);    
} 
```

我知道它不会起作用，因为超类中没有相同类型的 void。

```
protected void onMain_Button1Action(Component c, ActionEvent event) {
    // If the resource file changes the names of components this call will break notifying you that you should fix the code
    Dialog.show("Test", "it works", "OK",null);
} 
```

我仍然一无所获。我已经寻找其他关于如何使用代号的教程，但我找不到任何。我没有得到作者制作的那个。如果有人可以给我一条线，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:12:25.867

您需要将资源文件保存在设计器中，而不是删除对 super 的调用。如果您使用的是 Eclipse，您应该在使用 F5 保存在设计器中后刷新项目。

# android - 没有点击按钮的Android SearchBar

> ID：15927753
> 
> 赞同：1
> 
> 时间：2013-04-10T13:49:46.863
> 
> 标签：android, searchview

我一直在试图找到答案，但也许我没有正确地询问谷歌，所以就这样吧：我的 android 应用程序中有一个搜索视图，它的顶部菜单项作为搜索输入等。我点击放大镜，然后文本字段变为可编辑的搜索词。如何跳过此步骤并使其在我的活动的 onCreate() 方法时，搜索字段自动获得焦点，而无需单击放大镜图标？

这是我的代码：

```
 MenuInflater inflater = new MenuInflater(SearchMedicineActivity.this);
    inflater.inflate(R.menu.search_view, menu);
    MenuItem searchItem = menu.findItem(R.id.action_search);
    searchItem.setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_IF_ROOM| MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);
    mSearchView = (SearchView) searchItem.getActionView();
    mSearchView.setOnQueryTextListener(this);
    mSearchView.setIconifiedByDefault(false);
    return true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:00:15.390

`setIconifiedByDefault(false)`在里面调用`public boolean onPrepareOptionsMenu(Menu menu)`应该会给你你想要的结果。如果您希望键盘可见，请尝试调用`requestFocus()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:53:32.807

来自[http://developer.android.com/reference/android/widget/SearchView.html](http://developer.android.com/reference/android/widget/SearchView.html)

> 当 SearchView 在 ActionBar 中用作可折叠菜单项的操作视图时，默认情况下需要使用`setIconifiedByDefault(true)`. 这是默认设置，因此无需执行任何操作。
> 
> 如果您希望搜索字段始终可见，请调用 `setIconifiedByDefault(false)`.

# python - 与 numpy.unwrap 相反

> ID：15927755
> 
> 赞同：35
> 
> 时间：2013-04-10T13:49:48.620
> 
> 标签：python, numpy

在 Python numpy 中，有一个[unwrap](http://docs.scipy.org/doc/numpy/reference/generated/numpy.unwrap.html)函数：

> 通过将大于不连续的绝对跳跃更改为沿给定轴的 2*pi 补码来展开弧度相位 p。

现在，我想做相反的功能。如何*包装*一系列阶段？例如，如何转换所有角度以将它们限制在 -π 和 π 之间？

显而易见的方法是执行以下操作：

```
for i, a in enumerate(phases):
    while a < pi:
        a += 2 * pi
    while a > pi:
        a -= 2 * pi
    phases[i] = a 
```

但是有没有更简单/更快的方法？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-10T13:56:43.220

```
phases = (phases + np.pi) % (2 * np.pi) - np.pi 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-03-24T16:11:57.587

```
import numpy as np
phases = np.arctan2(np.sin(phases), np.cos(phases)) 
```

这是因为 sin(phases)/cos(phases) == tan(phases)。我们使用反正切函数返回相位（模 2π）。在数学上，反正切函数是多值的，因此在编程语言中通常定义为以固定间隔返回相位。

双参数反正切函数，即`np.arctan2(numerator, denominator)`，与常规反正切函数相同，只是它跟踪分子和分母的符号，因此能够返回模 2π 的相位，而不是`np.arctan(numerator/denominator)`仅返回能够返回相位模 π。Numpy 的`arctan2`函数实现被定义为返回 [-π, +π] 范围内的相位，这是 OP 请求的范围。

附加说明：此 arctan2 方法直接来自复数表示，并且在数学上完全等价于：

```
phases = np.angle(np.exp(1j*phases)) 
```

这可能更直观。事实上，numpy 的`angle`函数`arctan2`在幕后使用来分离指数的虚部和实部，即正弦和余弦。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-08-28T08:03:00.800

此答案与 sega_sai 答案略有不同，即：

```
phases = ( phases + np.pi) % (2 * np.pi ) - np.pi 
```

这将阶段映射到 [-pi, pi) -> 这意味着 pi 映射到 -pi

此处显示：

```
In [27]: phases = np.pi

In [28]: phases = ( phases + np.pi) % (2 * np.pi ) - np.pi

In [29]: print phases
-3.14159265359 
```

这是完全合法的，但如果你想要 (-pi, pi] 的映射，那么

乘以购买操作的输入和输出 -1。像这样：

```
phases =  (( -phases + np.pi) % (2.0 * np.pi ) - np.pi) * -1.0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-18T11:49:07.297

[我已经在我的实用程序库haggis](https://haggis.readthedocs.io/en/stable/)中实现了类似于建议功能的功能。该功能[`haggis.math.ang_diff_min`](https://haggis.readthedocs.io/en/stable/api.html#haggis.math.ang_diff_min)完全符合您的要求。您可以手动设置一个完整圆的定义，如果您想使用度数或梯度或任何其他任意角度度量，这很好：

```
 ang_diff_min(phases, 0) 
```

# java - 如何获取选定复选框的值并使用保存对话框以 XML 格式保存它们

> ID：15927758
> 
> 赞同：0
> 
> 时间：2013-04-10T13:49:53.893
> 
> 标签：java, xml, checkbox, xml-parsing, savefiledialog

我有一个应用程序，其中放置了不同的复选框`JTable`。我想获取列的选定值以根据用户选择的值创建一个 xml 文件。

其中有不同的属性，我想使用复选框选择选定的数据。每当我点击保存按钮时，应该有一个对话框询问我在输入文件应该保存到的路径后将文件保存在哪里。

XML 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<data>
<Tab name="text123">
    <Test name="abcd">
        <affected url>http://www.a.com</url>
        <field-1 param="abc">value=text</field-1>
        <filed-2 param="xyz">value=text</field-2>
    </test>
    <test name="xyz">
        <affected url>http://www.b.com</url> 
        <field-1 param="mno">text</field-1>
        <filed-2 param="pqr">text</field-2>
    </test>
</tab>
</data> 
```

我在自定义选项卡中获取的数据是动态的，`JTable`无论何时放置复选框，参数和它们的值都会被存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:57:23.113

您是否必须保留 xml 文件的某些结构，还是完全由您决定？要将任何对象转换为 XML 字符串，您可以使用 rt.jar 中的 XmlDecoder 和 XmlEncoder。要将其保存到 XML 文件中，您可以使用 JFileChooser 或您设计的任何自定义对话框。我不记得确切的代码，但您也可以将支持的后缀设置为原生 JFileChooser。

# oauth - 如何为 Google OAuth 设置 Meteor requestOfflineToken

> ID：15927760
> 
> 赞同：1
> 
> 时间：2013-04-10T13:50:01.287
> 
> 标签：oauth, meteor

我无法弄清楚如何在我的流星应用程序中启用谷歌离线模式。

我目前正在使用 account-google 包进行用户身份验证，meteor 的文档指出使用 google auth 可以实现离线模式。

我还在客户端浏览器中使用 appcache 来本地存储应用程序。

一切正常，直到我断开与互联网的连接，然后谷歌身份验证过期，我无法使用我的应用程序。

[http://docs.meteor.com/#meteor_loginwithexternalservice](http://docs.meteor.com/#meteor_loginwithexternalservice)

我的问题是我无法弄清楚在哪里调用 Meteor.loginWithGoogle({requestOfflineToken: true});

任何帮助或见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:03:38.183

正如文档中提到的那样，您可以在**client**中调用它。文档中的方法会在方法名称的最右侧说明您可以在哪里使用它们。

也就是说，无论您之前在哪里调用它，当它工作时。

# c# - LINQ 外连接给出错误

> ID：15927764
> 
> 赞同：1
> 
> 时间：2013-04-10T13:50:08.850
> 
> 标签：c#, linq, linq-to-sql

C# 中的以下 LINQ 语句（一个简单的外连接）会引发异常：

```
var query = 
        from cs in db.scan
        join cp in db.patient on cc.pid equals cp.pid into cpGroup
        from cp2 in cpGroup.DefaultIfEmpty()
        select new 
        { 
            Name = ((cp2 == null) ? 
                String.Empty : 
                cp2.plastname + ", " + cp2.pfirstname), 
            DOB = ((cp2 == null) ? 
                DateTime.MinValue : 
                cp2.pdateofbirth) 
        }; 
```

例外：

> Auf die Variable "cp2" vom Typ "Core.patient" wird vom Bereich "" verwiesen, sie ist jedoch nicht definiert。

翻译：

> “Core.patient”类型的变量“cp2”由区域“”引用，但未定义。

这里有什么问题？顺便提一句。周围的 try catch 块无法捕获此错误...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-09T16:24:40.413

连接可能存在问题。这是完成同样事情的 linqish 方式。

```
 var query = 
    from cs in db.scan
    from cp in db.patient
    where cs.pid == cp.pid
    select new 
    { 
        Name = cp.plastname + ", " + cp.pfirstname), 
        DOB = cs.pdateofbirth
    }; 
```

# android - 列表视图中的图像加载过滤器 - Android

> ID：15927766
> 
> 赞同：0
> 
> 时间：2013-04-10T13:50:16.233
> 
> 标签：android

我有 getView 如下

```
 @Override
public View getView(final int position, View convertView, ViewGroup parent) {

    LayoutInflater tempinflator = ((Activity)mContext).getLayoutInflater();
    if (convertView == null) {
        convertView = tempinflator.inflate(R.layout.event_list_item, null);
    }

    img = (ImageView)convertView.findViewById(R.id.businessLogo);

    img.setImageResource(R.drawable.tour_default);

    int loader = R.drawable.tour_default;
    String image_url = event.getBusinessLogo();

    ImageLoader imgLoader = new ImageLoader(mContext);

    imgLoader.DisplayImage(image_url, loader, img);
    return convertView;
} 
```

image_url = 图片的互联网地址

和 ImageLoader 方法如下

```
 public void DisplayImage(String url, int loader, ImageView imageView)
{
    stub_id = loader;
    imageViews.put(imageView, url);
    Bitmap bitmap=memoryCache.get(url);
    if(bitmap!=null)
        imageView.setImageBitmap(bitmap);
    else
    {
        queuePhoto(url, imageView);
        imageView.setImageResource(loader);
    }
} 
```

我试图弄清楚为什么图像会闪烁。有没有办法在列表视图中从 URI 加载图像？没有闪烁？

# php - 操作 db 导致 codeigniter

> ID：15927770
> 
> 赞同：0
> 
> 时间：2013-04-10T13:50:28.603
> 
> 标签：php, sql, codeigniter

我的数据库中有一些信息，我希望在将它们传递给控制器​​和视图之前能够对其进行操作。例如，我有一个想要变成年龄的出生日期。

这是我到目前为止所拥有的：

```
$sql = ('SELECT username, birthdate, profile_text FROM users WHERE id = ?');

$q = $this->db->query($sql, $this->session->userdata('user_id'));

if ($q->num_rows() === 1) {
    return $q->row();
} 
```

所以在返回它之前，我想`birthdate`在对象中操作。

[在这里，我发现](http://ellislab.com/codeigniter/user-guide/database/results.html)如果我将字符串作为行的第二个参数传递，我可以使用一个类来完成它。但我不知道我将如何做到这一点以及我将把这门课放在哪里。

我也可以将结果作为数组得到，`row_array()`如果这会使工作更容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:18:39.673

制作一个将生日转换为年龄的函数：

```
public function convertToAge($birthdate){
         $birthDate = explode("/", $birthDate);

         $age = (date("md", date("U", mktime(0, 0, 0, $birthDate[0], $birthDate[1],
       $birthDate[2]))) > date("md") ? ((date("Y")-$birthDate[2])-1):(date("Y")-
$birthDate[2]));
return $age
} 
```

您可以设置自定义对象来解决您的问题，如下所示：

```
$sql = ('SELECT username, birthdate, profile_text FROM users WHERE id = ?');

$q = $this->db->query($sql, $this->session->userdata('user_id'));

if ($q->num_rows() === 1) {
    $userobject = $q->row();
}
$userobject->birthdate = $this)>convertToAge($userobject->birthdate);
return $userobject 
```

在您的应用程序的其他部分，您可以检索您的用户对象并像使用任何其他对象一样获取生日：

```
$userobject = $this->model->getuserobject()
$birthdate = $userobject->birthdate 
```

希望这会有所帮助，请随时提出更多问题=）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:21:58.983

我不确定这是否有帮助。我会在这样的模型中添加一个小函数：

```
public function datetoage()
 {
 $birthDate = $datetouse;
         //explode the date to get month, day and year
         $birthDate = explode("/", $birthDate);
         //get age from date or birthdate
         $age = (date("md", date("U", mktime(0, 0, 0, $birthDate[0], $birthDate[1],  $birthDate[2]))) > date("md") ? ((date("Y")-$birthDate[2])-1):(date("Y")-$birthDate[2]));
         return $age;
} 
```

然后只需将 if 应用于查询数据，例如 $age = datetoage($row[birthdate]);

# android - 检查是否安装了谷歌地图

> ID：15927771
> 
> 赞同：0
> 
> 时间：2013-04-10T13:50:29.507
> 
> 标签：android, cordova

我正在使用 phonegap 开发一个混合 android 应用程序。我想使用以下代码导航到地图：

```
<a href="geo:32.5558485,34.65522447"></a> 
```

如何发现设备中是否安装了谷歌地图应用程序。仅通过 HTML 和/或 javascript。

提前致谢

科比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:32:36.193

当您单击该链接时，您不需要这样做，Android 会为您提供可以处理 geo: url 类型的应用程序列表。

如果您真的想检查是否有可用于处理该 URI 方案的应用程序，您需要[编写一个插件](http://docs.phonegap.com/en/2.5.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)来调用一些 Java 代码：

```
public static boolean isIntentAvailable(Context context) {
    final PackageManager packageManager = context.getPackageManager();
    final Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
        Uri.parse("geo:32.5558485,34.65522447"););
    List<ResolveInfo> list =
        packageManager.queryIntentActivities(intent,
                PackageManager.MATCH_DEFAULT_ONLY);
    return list.size() > 0;
} 
```

# php - 按名称获取元素 - HTML DOM PHRASE

> ID：15927774
> 
> 赞同：4
> 
> 时间：2013-04-10T13:50:39.933
> 
> 标签：php, html, domdocument

我正在尝试使用 HTML DOM 短语来短语 html 源，我需要在输入标记中获取一个值，我尝试了这个：

```
foreach ($doc->getElementsByTagName('input') as $link)
{
    $links[] = array(
        'value' => $link->getAttribute('value'), 
        'text'  => $link->nodeValue,
    );
} 
```

这对我有用，但我的网页有多个输入标签，但我想获取指定输入标签的值。

比方说，

```
<input type="hidden" value="11111111" name="tele"> 
```

我尝试使用`getElementsByTagName`，但它给了我一个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T13:57:21.860

您也可以使用您现在拥有的代码，稍加修改

```
foreach ($doc->getElementsByTagName('input') as $link) 
{
    if ($link->getAttribute('name') == 'tele') {
        $links[] = array(
            'value' => $link->getAttribute('value'), 
            'text'  => $link->nodeValue,
        );
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:58:49.427

你可以使用`DomXpath`：

```
$xpath = new DomXpath($doc);
foreach ($xpath->query('//input[@name="tele"]') as $link) {
    $links[] = array('value' => $link->getAttribute('value'), 'text' => $link->nodeValue);
} 
```

# jquery - 使用 jQuery 在第一次按下时更改链接上的文本，然后在第二次按下时转到链接

> ID：15927784
> 
> 赞同：0
> 
> 时间：2013-04-10T13:51:10.667
> 
> 标签：jquery

我正在尝试使用 jQuery 来制作“你确定吗？” 删除链接上的功能。我当前的代码：

```
$('.confirm-delete').on('click', function(e) {
e.preventDefault();
$(this).removeClass("confirm-delete");
$(this).html("<i class='icon-remove icon-white'></i> Are you sure?");
$(this).attr("href", "?delete="+this.id.replace('id', ''));
}); 
```

我已经为链接提供了“确认删除”类，它可以很好地更改文本和 url，但它不会让我再按一次。什么都没发生。我怀疑这是因为preventDefault，这就是为什么我尝试删除该类，但没有效果。我希望有人可以帮助我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:55:31.780

您可以通过在第一次运行后*立即取消绑定 click 事件处理程序来做到这一点：*

```
$('.confirm-delete').on('click', function(e) {
    e.preventDefault();
    $(this).removeClass("confirm-delete");
    $(this).html("<i class='icon-remove icon-white'></i> Are you sure?");
    $(this).attr("href", "?delete="+this.id.replace('id', ''));

    // unbind
    $(this).off('click');
}); 
```

# android - 是否可以在网站上显示来自 Google Developer Console 的统计信息？

> ID：15927785
> 
> 赞同：0
> 
> 时间：2013-04-10T13:51:12.353
> 
> 标签：android, api, web, google-api

我想知道是否可以使用 Google API 在网站上显示来自开发者控制台统计数据的一些数据。有没有人做过类似的事情？

我真的很想在我的网站上显示我的应用程序安装。

提前感谢您的提示和技巧！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:52:18.570

抱歉，没有用于检索此数据的官方 API。

除此之外，众所周知，Google Play 的统计数据不准确，显示它们最终可能会产生误导。

# java - Actionscript Mobile 项目中的 Photon Cloud 获取 Java 编译错误

> ID：15927786
> 
> 赞同：1
> 
> 时间：2013-04-10T13:51:16.233
> 
> 标签：java, iphone, flash, flash-builder, photon

我在 Mac OSX Moutain Lion 上使用 Photon-Flash_v3-2-0-1-Beta_Cloud_SDK.zip [http://doc.exitgames.com/photon-cloud/SDKflash/](http://doc.exitgames.com/photon-cloud/SDKflash/)在 Flash Builder 4.7 和 adobe air 3.7 中构建了一个迷你游戏
完美编译：
* android 设备 (2.3 +)
* android 模拟器
* ios 模拟器 (iOS sdk 6)
* 空气模拟器

当尝试在 iPhone (3GS iOS 6.1.3) 中编译我的游戏时，我收到了这个错误：

> 安装的java版本可能有问题吗？还是 sdk flash photon cloud 中的 bug？

打包应用程序时出错：

```
AOT Compilation has failed while optimizing null exitgames.common:Logger::format0.
Exception in thread "main" java.lang.NullPointerException
    at adobe.abc.GlobalOptimizer.sccp_eval(GlobalOptimizer.java:7054)
    at adobe.abc.GlobalOptimizer.sccp_analyze(GlobalOptimizer.java:6019)
    at adobe.abc.GlobalOptimizer.sccp(GlobalOptimizer.java:4733)
    at adobe.abc.GlobalOptimizer.optimize(GlobalOptimizer.java:3615)
    at adobe.abc.GlobalOptimizer.optimize(GlobalOptimizer.java:2309)
    at adobe.abc.LLVMEmitter.optimizeABCs(LLVMEmitter.java:532)
    at adobe.abc.LLVMEmitter.generateBitcode(LLVMEmitter.java:341)
    at com.adobe.air.ipa.AOTCompiler.convertAbcToLlvmBitcodeImpl(AOTCompiler.java:611)
    at com.adobe.air.ipa.BitcodeGenerator.main(BitcodeGenerator.java:104)
Compilation failed while executing : ADT 
```

![打印](https://i.stack.imgur.com/NUUWq.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T08:13:21.240

这个问题看起来像 adobe 优化器错误，它在“format0”方法的稍微复杂（但仍然正确！）的 flash 代码上失败。我们将尝试将此方法重构为更简单的优化器。

# .htaccess - htaccess 陷入无限循环

> ID：15927789
> 
> 赞同：2
> 
> 时间：2013-04-10T13:51:22.057
> 
> 标签：.htaccess, http-status-code-301

我已经在网站上放置了一个 htaccess 文件，其中包含以下内容

```
<Files ~ "^\.(htaccess|htpasswd)$">
deny from all
</Files>

RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www\.ic-furniture\.com)(:80)? [NC]
RewriteRule ^(.*) http://ic-furniture.com/$1 [R=301,L]
order deny,allow

redirect 301    /index.php  http://ic-furniture.com/
redirect 301    /index.html http://ic-furniture.com/

ErrorDocument 404 http://ic-furniture.com/404.html 
```

我想做的是

*   删除 www。
*   删除 /index.html
*   如果有人单击指向 site/index.php 的链接，我希望他们转到主页
*   404 错误页面到 404.html

但是当我上传这个我得到一个错误

> **页面未正确重定向**
> 
> Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。

知道我在这里做错了什么，我一直想弄清楚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:30:45.407

您应该使用该`%{THE_REQUEST}`变量来检查实际请求是否针对索引文件，然后相应地重定向：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.(php|html)
RewriteRule ^ http://ic-furniture.com/ [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:49:18.780

我环顾四周，问题是由以下原因引起的：

> 从技术上讲，当您请求/您请求 index.html 时（给定 index.html 是 DirectoryIndex，通常是这种情况）因此确实会导致循环

所以你必须使用：

```
RewriteRule ^index\.html$ mysite.com [L,R=301] 
```

# android - 动态创建布局

> ID：15927791
> 
> 赞同：1
> 
> 时间：2013-04-10T13:51:23.420
> 
> 标签：android, android-layout

我已经用谷歌搜索了几个小时，但找不到解决方案……我发现了许多类似的问题和答案，但没有一个对我有用。

我想做的事：我有一个用来绘制我的应用程序的视图。现在我想在当前画布的“顶部”添加一个布局。布局应包含一个按钮，并且每边有 20 像素的边距。我找到了类似以下代码的代码片段，但屏幕上没有任何反应。没有按钮。没有什么。

这是我正在使用的代码：

```
LinearLayout bottomBar = new LinearLayout(this);
bottomBar.setOrientation(LinearLayout.VERTICAL);

LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
layoutParams.setMargins(20, 20, 20, 20);

Button button = new Button(this);
button.setText("text");
bottomBar.addView(button, layoutParams);
bottomBar.draw(canvas); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:19:34.650

您创建布局的事实`LinearLayout bottomBar = new LinearLayout(this);`并不意味着它已附加到屏幕上。

另外，不要在你的酒吧上画画。将其包含在屏幕中后，系统将呼叫您。

例如，假设您的 XML（使用 setContentView 膨胀）有一个 ID 为 R.id.frame 的 FrameLayout，那么您可以执行以下操作：

```
LinearLayout bottomBar = new LinearLayout(this);
bottomBar.setOrientation(LinearLayout.VERTICAL);

LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
layoutParams.setMargins(20, 20, 20, 20);

Button button = new Button(this);
button.setText("text");
bottomBar.addView(button, layoutParams);

FrameLayout frame = (FrameLayout) findViewById(R.id.frame);
frame.addView(bottomBar); 
```

你看......你必须在已经在屏幕上的视图组中调用“addView”。

或者，您可以调用：`setContentView(bottomBar);`将屏幕上的任何内容替换为`bottomBar`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:11:24.907

*您没有为您的LinearLayout*提供宽度/高度，也没有将其附加到您的视图中。

# java - 使用 SimpleDateFormat 在 Android 中解析长日期

> ID：15927794
> 
> 赞同：1
> 
> 时间：2013-04-10T13:51:30.450
> 
> 标签：java, android, datetime, simpledateformat

我应该如何配置 SimpleDateFormat 以便能够解析以下日期： *Thu, 4 Apr 2013 00:00:00 CET*

我试过了： `new SimpleDateFormat("EEE dd MMM yyyy HH:mm:ss z");` 但它得到了以下异常：

```
ERROR java.text.ParseException:
Unparseable date: "Thu, 4 Apr 2013 00:00:00 CET" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:09:34.670

你好像少了一个逗号。尝试：

```
SimpleDateFormat sf = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss z");
Date d = sf.parse("Thu, 4 Apr 2013 00:00:00 CET") 
```

# kendo-ui - 更新后 KendoUI Grid 保持编辑模式

> ID：15927795
> 
> 赞同：2
> 
> 时间：2013-04-10T13:51:35.737
> 
> 标签：kendo-ui, kendo-grid, kendo-asp.net-mvc

我正在使用 ASP.NET MVC Server Wrappers 为 KendoUI Grid 使用 AJAX 进行绑定（v2013.1.319），并且正在使用内联编辑。当我编辑一条记录并单击更新时，该帖子发生在服务器上并且记录已成功保存。我按照文档的建议返回 JSON 响应，但 KendoUI Grid 仍处于编辑模式。如果单击取消，则基础本地数据不会反映更改。如果我刷新，更改就会正确显示。我需要一些帮助来找出更新不起作用的原因。创建和删除功能工作正常。

```
<div style="width: 800px">
@(Html.Kendo().Grid<RoleGridModel>()
    .Name("grdRoles")
    .Columns(columns =>
    {
        columns.Bound(r => r.Name).Width(200);
        columns.Bound(r => r.Description).Width(300);
        columns.Command(command => { 
            if (security.CanAdd || security.CanUpdate) command.Edit(); 
            if (security.CanDelete) command.Destroy();
            command.Custom("Manage Access").Click("manageAccess");
        })
        .Width(300);
    })
    .Groupable(grouping => grouping
        .Enabled(false))
    .Events(events => { if (security.CanAdd && !security.CanUpdate) events.DataBound("function() { this.table.find('.k-grid-edit').hide(); }"); })
    .DataSource(dataSource => dataSource
        .Ajax()
        .Model(model => model.Id(r => r.RoleId))
        .Events(events => events.Error("error_handler"))
        .Read(read => read.Action("Index", "Roles", new { area = "Setup" }))
        .Create(create => create.Action("Create", "Roles", new { area = "Setup" }))
        .Update(update => update.Action("Edit", "Roles", new { area = "Setup" }))
        .Destroy(destroy => destroy.Action("Delete", "Roles", new { area = "Setup" }))
        .Sort(sort => sort.Add(r => r.Name).Ascending())
        .PageSize(10))
    .Filterable(filtering => filtering
        .Enabled(true))
    .Editable(editable => editable.Mode(GridEditMode.InLine))
    .Pageable(paging => paging
        .Enabled(true)
        .Info(true)
        .PageSizes(false)
        .Refresh(true))
    .Scrollable(scrolling => scrolling
        .Enabled(false)
        .Height(400)
        .Virtual(false))
    .Sortable(sorting => sorting
        .Enabled(true)
        .AllowUnsort(false)
        .SortMode(GridSortMode.SingleColumn))
    .ToolBar(toolbar => { if (security.CanAdd) toolbar.Create(); })
) 
```

```
 //
    // POST: /Setup/Roles/Edit

    [HttpPost]
    public ActionResult Edit([DataSourceRequest] DataSourceRequest request, RoleGridModel model)
    {
        if (ModelState.IsValid && model != null)
        {
            try
            {
                Role r = Mapper.Map<RoleGridModel, Role>(model);
                r.AppContext = this.AppContext;
                r.SubscriberId = this.AppContext.SelectedSubscription.SubscriberId;
                r.SubscriptionId = this.AppContext.SelectedSubscription.SubscriptionId;
                r.ModifyDate = DateTime.UtcNow;
                r.IsNew = false;
                r.IsMarkedForDelete = false;
                r.HasChanges = true;
                r.Save();
            }
            catch (Exception ex)
            {
                LogException(ex);
                ModelState.AddModelError("", "Unable to update role. " + ex.Message);
            }
        }

        return Json(ModelState.ToDataSourceResult());
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T13:34:13.113

显然，新版本的 jQuery 发生了[重大变化](http://jquery.com/upgrade-guide/1.9/#jquery-ajax-returning-a-json-result-of-an-empty-string)，影响了 Kendo Q1 2013 版本 2013.1.319。成功的更新和销毁请求从服务器返回一个空结果。这会触发错误，因为空结果不是有效的 JSON。

目前有 2 个解决方案：
1) 获取最新的 KendoUI 内部版本，因​​为它有一个修复程序。
2) 返回一个序列化为 JSON 的虚拟对象。

```
return Json(ModelState.IsValid ? new object() : ModelState.ToDataSourceResult()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-12T20:11:26.737

谢谢比尔，它对我有用。

我的更新函数返回
**return Json(ModelState.ToDataSourceResult());** 当我检查它实际上是无效的。现在我已经返回了一个像你建议的对象，它工作正常。

这工作 **返回 Json(ModelState.IsValid ? new object() : ModelState.ToDataSourceResult());**

# iphone - 应用程序加载器卡在“测试 tcp udp 连接”

> ID：15927796
> 
> 赞同：6
> 
> 时间：2013-04-10T13:51:37.083
> 
> 标签：iphone, xcode, app-store-connect

你不会相信我到目前为止所经历的，但简而言之：

*   这个mac是10.7.5
*   防火墙已关闭
*   我刚刚用 Application Loader 2.8 下载了 Xcode
*   没有安装java

上传 iphone 应用程序时，程序卡在“测试 tcp udp 连接”

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-12T03:57:03.820

[itunesconnect 使用防火墙后面的应用程序加载器](https://stackoverflow.com/questions/6069940/ituneconnect-using-application-loader-behind-a-firewall)的第二个解决方案对我有用。

以供参考：

> 转到首选项，高级，仅选择 DAV。
> 
> 这将使用端口 443（又名 HTTPS）进行上传。

然后使用应用程序加载器上传您的应用程序。

PS。对我来说，它在“将包上传到 iTunes Store 消息”中保持在 0 字节/秒整整五分钟，但在 50% 标记处和 100% 标记处有足够的时间更新。在退出之前让它运行 10/15 分钟（取决于您的应用程序大小）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T18:56:44.850

嗯，原来这家公司的网络端口被封锁了，回家就可以了。

# javascript - 聊天心跳减慢服务器

> ID：15927800
> 
> 赞同：1
> 
> 时间：2013-04-10T13:51:58.940
> 
> 标签：javascript, ajax, chat

我在一个拥有大约 100 个活跃用户的系统中使用聊天。聊天是用 JavaScript 构建的，每隔四秒运行一个 ajax 问题到一个从数据库中获取数据的 php 脚本。当服务器上有大约 100 个在线用户时，服务器会变得非常慢。

有没有比使用包含 ajax 问题的 javascript 间隔更好的方法来创建聊天？

亲切的问候/ H

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:01:05.273

对 ajax 通信使用超时可能是您能做的最糟糕的解决方案。

我建议您使用 Websockets 或 AJAX Longpolling。有一个适用于 websockets 的 jquery 插件（优雅降级）。也许您甚至可能想尝试将这一切组合成一个简洁的框架（node.js 服务器端）的[socket.io 。](http://socket.io/)

[这个答案](https://stackoverflow.com/questions/6398887/using-php-with-socket-io)为您提供了一些有关如何通过在服务器端安装 PHP 来实现这一点的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:56:47.577

这是使用单向请求的问题：客户端必须永久询问服务器以查看是否有一些新信息。结果，它给服务器增加了一些费用。请参阅wiki 上的[投票](http://en.wikipedia.org/wiki/Polling_%28computer_science%29)。

一种解决方案是使用双向请求系统。这将允许服务器自己向客户端发送数据，而不仅仅是等待传入的查询响应。这将消除轮询原则并从服务器中扣除一些费用。

我看到了三个解决方案：

*   一个 Java 小程序
*   闪存应用程序
*   用 websocket 连接替换 ajax 查询

也许第三种解决方案设置起来最简单，因为它在您当前的架构中不包含新技术。

# php - PHP: 爆炸(' ',$string); 重新插入删除的空格

> ID：15927801
> 
> 赞同：0
> 
> 时间：2013-04-10T13:51:59.907
> 
> 标签：php, get, preg-replace, explode

`$_GET['search']`导入以下字符串：“ `first second \ \ third`”（“second”和“third”之间的空格只是空格，添加斜线是因为 SO 的文本区域不允许多个连续的空格）。

然后以下脚本将处理导入的字符串：

```
$searchString = $_GET['search'];
$searchString = preg_replace('/(\W)(\S)(\s+)/', '', $searchString);
echo $searchString . ' ';
print_r( explode(' ', $searchString) ); 
```

奇怪的是，这会导致：

```
first second third Array ( [0] => first [1] => second [2] => [3] => [4] => third ) 
```

即，正如预期的那样，空格从`$searchString`when `echo`ing 中删除，但 PHP`explode`似乎“重新插入”了它们。怎么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T13:55:05.003

一个简单的解决方法是使用[`array_filter()`](http://www.php.net/manual/en/function.array-filter.php)删除空数组值：

```
$new_array = array_filter(explode(' ', $searchString)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T14:00:42.483

我认为您的正则表达式并没有按照您的想法做。或者也许你应该解释它应该做什么。如果要删除多个空格，请使用以下命令：

```
$searchString = preg_replace('/\s\s+/', ' ', $searchString); 
```

# visual-studio - 带有 Visual Studio 2012/2013 的 CMake 坏了？

> ID：15927803
> 
> 赞同：3
> 
> 时间：2013-04-10T13:52:01.423
> 
> 标签：visual-studio, cmake

CMake 2.8.10.2 for Windows 只是拒绝使用 Visual Studio 2012（在 Windows 7 下）为我配置项目

似乎 CMake 添加了一些 Microsoft 编译器不再支持的设置。 *链接：致命错误 LNK1117：选项“清单：嵌入”中的语法错误*

我尝试使用非常基本的 cmake 文件得到了相同的结果

```
cmake_minimum_required (VERSION 2.6)
add_executable(test test.cpp) 
```

有解决办法吗？

输出窗口显示：

```
The C compiler identification is MSVC 17.0.51106.1
The CXX compiler identification is MSVC 17.0.51106.1
Check for working C compiler using: Visual Studio 11
Check for working C compiler using: Visual Studio 11 -- broken
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CMakeTestCCompiler.cmake:61 (message):
  The C compiler "C:/Program Files (x86)/Microsoft Visual Studio
  11.0/VC/bin/cl.exe" is not able to compile a simple test program.

  It fails with the following output:

   Change Dir: C:/tmp/testCmake/build/CMakeFiles/CMakeTmp

  Run Build Command:C:\PROGRA~2\MICROS~2.0\Common7\IDE\devenv.com
  CMAKE_TRY_COMPILE.sln /build Debug /project cmTryCompileExec3122367237

  Microsoft (R) Microsoft Visual Studio 2012 Version 11.0.51106.1.

  Copyright (C) Microsoft Corp.  All rights reserved.

  1>------ Build started: Project: cmTryCompileExec3122367237, Configuration:
  Debug Win32 ------

  1> Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 15.00.30729.01
  for 80x86

  1> Copyright (C) Microsoft Corporation.  All rights reserved.

  1> 

  1> cl /c /Zi /W3 /WX- /Od /Ob0 /Oy- /D WIN32 /D _WINDOWS /D _DEBUG /D
  "CMAKE_INTDIR=\"Debug\"" /D _MBCS /Gm- /RTC1 /MDd /GS /fp:precise
  /Zc:wchar_t /Zc:forScope /Fo"cmTryCompileExec3122367237.dir\Debug\\"
  /Fd"C:/tmp/testCmake/build/CMakeFiles/CMakeTmp/Debug/cmTryCompileExec3122367237.pdb"
  /Gd /TC /analyze- /errorReport:prompt /Zm1000 testCCompiler.c

  1> 

  1> testCCompiler.c

  1>LINK : fatal error LNK1117: syntax error in option 'manifest:embed'

  ========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped
  ==========

  CMake will not be able to correctly generate this project.
Call Stack (most recent call first):

Configuring incomplete, errors occurred! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-13T08:48:05.903

CMake 2.8 works well with Visual Studio 2012.

In the log you provided, note that CMake invokes Visual Studio 2012, which in turn invokes **the compiler of Visual Studio 2008** (15.x; the compiler of VS2012 should be 17.x):

> Microsoft (R) Microsoft Visual Studio 2012 Version 11.0.51106.1\.
> 
> [...]
> 
> 1> Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 15.00.30729.01 for 80x86

This probably means your installation of VS2012 is configured to use the toolset of VS2008\. It probably means the same thing is happening when you build directly in Visual Studio and not only via CMake.

This may be caused by unintended changes to the property sheet `Microsoft.Cpp.Win32.user.props` (or `Microsoft.Cpp.x64.user.props`, if you are building for x64). These files reside in `%LOCALAPPDATA%\Microsoft\MSBuild\v4.0`. If you see the directories of VS2008 referenced in any of these property sheets, this is likely the source of your problems.

To fix this, you can either manually edit the said file (completely removing the XML elements that refer to VS2008 folders), or just follow the steps given in [this answer](https://stackoverflow.com/a/20531205/289770):

> 1.  Open any C++ project in Visual Studio 2012.
> 2.  Open **View -> Other Windows -> Property Manager**
> 3.  Double click on **Microsoft.Cpp.Win32.user**
> 4.  Go to **VC++ Directories**
> 5.  Rows which have been changed are bold. on all bold rows, click inside the text field, then on the Dropdown menu select **inherit from parent or Project Defaults**
> 6.  Click **Apply**, **save** and then close the dialog.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T23:57:07.910

这对我不起作用。但是我能够删除有问题的文件（C:\Users\\AppData\Local\Microsoft\MSBuild\v4.0\Microsoft.Cpp.Win32.user.props）并且 Visual Studio 刚刚重新创建了该文件。VS2012 和 2013 都解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-21T11:26:26.653

我也收到错误：

链接：致命错误 LNK1117：选项“清单：嵌入”中的语法错误

它发生在 Windows 7、Visual Studio 2013 社区下。

我尝试了许多解决方案，唯一有效的方法是从我的计算机中完全删除 Visial Studio 2010。没有其他工作。我找到了一个问题，在 VS2013 中，变量 $VCInstallDir 仍然指向 2010 安装。因此，这导致了错误的 LibarayPath 设置和使用了错误的工具链执行程序（即使我有正确的“PlatformToolset”设置）。

总结一下：

1.  您需要在您的项目中具有正确的“PlatformToolset”设置，并且在您依赖的所有库项目中具有相同的设置
2.  您需要通过检查 $LibraryPath 是否正确来确保使用了正确的库目录，除非您直接在项目设置中覆盖它，否则它将通过 Visual Studio 内部自动化依赖于 $VCInstallDir，因此还要检查该变量
3.  要解决问题 2，您可能必须删除 Visual Studio 2010，因为它会造成混乱，并且可能没有其他解决方案。

# css - css，使用@media 更改更少的变量

> ID：15927805
> 
> 赞同：12
> 
> 时间：2013-04-10T13:52:10.717
> 
> 标签：css, variables, less

我目前正在进行一个响应迅速的站点项目，而 less 确实有很大帮助。

但我希望一个大小变量根据窗口大小而改变。我已经尝试了以下代码，但它似乎不起作用。这是可能的，还是我应该尝试另一种方法？

```
@menu-width: 300px; // default size

@media only screen and (max-width: 400px) {
  @menu-width: 100px // smaller size
}

.menu {
  width: @menu-width;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T17:32:26.677

由于我似乎没有得到很多支持来关闭这个作为[这个问题](https://stackoverflow.com/questions/14139067/css-pre-processor-with-a-possibility-to-define-variables-in-a-media-query)的副本，我基本上会重复我的答案（有一些变化）。

## 记住`@media`是 CSS 查询，而不是 LESS 查询

查询是一种 CSS 功能，`@media`它允许当前加载的 CSS 响应它正在呈现的媒体（通常是某种类型的浏览器，但可以是打印等）。

LESS 是一个 CSS***预处理器，它在 CSS 加载到浏览器******之前***创建 CSS ，因此在媒体被检查之前（这是在 CSS 本身中完成的，在 LESS 生成之后）。

因此，LESS 的正确方法是使用与直接 CSS 相同类型的输出，这意味着您必须`.menu`在查询中重复选择器，`@media`以便其值随媒体类型而变化。

**最终的 CSS 输出应该是这样的**

```
@media only screen and (max-width: 400px) {
  .menu {
    width: 100px; 
  }
}

.menu {
  width: 300px;
} 
```

有多种方法可以用 LESS 生成类似的东西。严格按照上面的基本格式，有这样的：

```
@menu-width: 300px; // default size

@media only screen and (max-width: 400px) {
  .menu {
    width: @menu-width - 200px; /* assuming you want it dynamic to default */
  }
}

.menu {
  width: @menu-width;
} 
```

但也要看看：

*   对于 LESS 媒体查询的基本思想：[如何使用 LESS 更有效地使用媒体查询？](https://stackoverflow.com/questions/13419298/how-can-i-use-media-queries-more-efficiently-with-less)
*   有关将媒体查询分组并减少选择器代码重复的讨论，请参阅：[媒体查询分组而不是匹配的多个分散的媒体查询](https://stackoverflow.com/questions/13503862/media-query-grouping-instead-of-multiple-scattered-media-queries-that-match/)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-12-07T16:45:28.723

是的，但这样你必须重写所有

最好的方法应该是（但它不起作用）

```
@w : 10px

@media (min-width: 1440px) {

    @w:500px;

}
@media (min-width: 1024px) and (max-width: 1280px) {

@w:300px;

}

@media (min-width: 800px) and (max-width: 1020px) {

    @w:200px;
}

.any{
        width:@w;
    } 
```

# jenkins - Jenkins 没有从文件中输出 Junit 报告信息

> ID：15927809
> 
> 赞同：9
> 
> 时间：2013-04-10T13:52:20.513
> 
> 标签：jenkins, karma-runner

## 问题

Jenkins 未获取 junit 格式的报告，导致报告未列在项目的状态屏幕中。

## 细节

junit 格式的报告数据由名为 Karma-runner（以前称为 Testacular）的测试框架生成。被忽略的文件是在与创建`/target/surefire-reports`surefire 生成的报告的位置相同的位置创建的。报告数据看起来与 maven surefire 插件生成的数据几乎相同，只是它的父元素`<testsuites>`不是`<testsuite>`--`<testsuite>`是surefire 生成的报告作为报告文件的父元素所具有的内容。这是 karma 生成的 junit 格式报告的片段，名为`TEST-karma.resultsTest.xml`：

***Junit 格式的 Karma 生成的报告文件，`TEST-karma.resultsTest.xml`***

```
<?xml version="1.0"?>
<testsuites>
  <testsuite name="PhantomJS 1.9 (Mac)" package="karma.tests" timestamp="2013-04-10T13:32:26" id="0" hostname="jgmbp.local" tests="16" errors="0" failures="0" time="0.069">
    <properties>
      <property name="browser.fullName" value="Mozilla/5.0 (Macintosh; Intel Mac OS X) AppleWebKit/534.34 (KHTML, like Gecko) PhantomJS/1.9.0 Safari/534.34"/>
    </properties>
    <testcase name="successfully cancels a new member" time="0.006" classname="karma.tests PhantomJS 1.9 (Mac).Household Controller"/>
    <testcase name="should parse an existing re-eval create date, setting the data in scope" time="0.003" classname="karma.tests PhantomJS 1.9 (Mac).Re-Eval Controller"/>
    <system-out><![CDATA[
]]></system-out>
    <system-err/>
  </testsuite>
</testsuites> 
```

Karma 测试在我的 Maven 构建的测试阶段运行。我已经尝试创建只生成这个 junit-report 文件的项目以及运行构建，以便所有 junit 测试和业力测试生成报告文件。詹金斯总是会选择万无一失的测试，但绝不会选择业力测试。

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-18T17:24:39.240

**即使在构建 Maven 项目时**，你也可以在 Jenkins 中发布你的 Karma 测试结果，如果你用一点小技巧来欺骗 Jenkins：**在你运行 Karma 测试的 Javascript 模块中运行 Surefire 插件**。

Surefire 插件不会在您的 Javascript 模块中找到任何 JUnit 测试，但它会通知 Jenkins Surefire 测试结果可用。

下面是一个示例 pom.xml 和来自 Gruntfile.js 的片段，它运行 Karma 测试和 JSHint 代码分析，并导致 Jenkins 发布测试结果和代码分析结果。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.xxx.yyyy</groupId>
<artifactId>zzzzz</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>pom</packaging>
<name>Zzzzz</name>

<build>
    <plugins>
        <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>1.7</version>
            <executions>
                <execution>
                    <phase>generate-resources</phase>
                    <configuration>
                        <target>
                            <exec
                                dir="${basedir}"
                                executable="npm"
                                failonerror="true">
                                <arg value="install"/>
                            </exec>
                            <exec
                                dir="${basedir}"
                                executable="bower"
                                failonerror="true">
                                <arg value="install"/>
                            </exec>
                            <exec
                                    dir="${basedir}"
                                    executable="grunt"
                                    failonerror="true">
                                <arg value="--no-color"/>
                                <arg value="build"/>
                            </exec>
                        </target>
                    </configuration>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>

                <execution>
                    <id>jshint</id>
                    <phase>test</phase>
                    <configuration>
                        <target>
                            <exec
                                dir="${basedir}"
                                executable="grunt"
                                failonerror="false">
                                <arg value="--no-color"/>
                                <arg value="karma:run"/>
                            </exec>
                            <exec
                                dir="${basedir}"
                                executable="grunt"
                                failonerror="false">
                                <arg value="--no-color"/>
                                <arg value="jshint:jenkins"/>
                            </exec>
                        </target>
                    </configuration>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>

            </executions>
        </plugin>
        <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12.4</version>
            <executions>
                <!-- This is a hack to get Jenkins to publish Karma test results when running a Maven project: we run 0 surefire tests, so Jenkins publishes the report of the Karma tests. -->
                <execution>
                    <id>dummySureFire</id>
                    <phase>test</phase>
                    <goals>
                        <goal>test</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <artifactId>maven-checkstyle-plugin</artifactId>
            <version>2.12</version>
            <executions>
                <!-- This is a hack to get Jenkins to publish JSHint results when running a Maven project: we run checkstyle, so Jenkins publishes the report of the JSHint run. -->
                <execution>
                    <id>dummyCheckStyle</id>
                    <phase>test</phase>
                    <goals>
                        <goal>checkstyle</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
<reporting>
    <plugins>
        <plugin>
            <artifactId>maven-surefire-report-plugin</artifactId>
            <version>2.12.4</version>
        </plugin>
    </plugins>
</reporting>
</project> 
```

在 Gruntfile.js 中，我们有以下内容。输出文件名必须以 TEST- 开头才能发布：

```
karma: {
        run: { // produces reports for Jenkins
            configFile: 'karma.conf.js',
            singleRun: true,
            reporters : ['junit', 'coverage'],
            junitReporter : {
                outputFile: 'target/surefire-reports/TEST-results.xml'
            },
        ... 
```

对于 Gruntfile.js 中的 JSHint：

```
jshint: {
        all: [
            'Gruntfile.js',
            '<%= yeoman.app %>/scripts/{,*/}*.js'
        ],
        options: {
            jshintrc: '.jshintrc',
            reporter: require('jshint-stylish')
        },
        jenkins: {
            options: {
                reporter: 'checkstyle',
                reporterOutput: "target/checkstyle-result.xml"
            },
            src: [
                'Gruntfile.js',
                '<%= yeoman.app %>/scripts/{,*/}*.js'
            ]
        }
    } 
```

在您的 Jenkins 作业配置中，您只需选中“构建设置”部分中的“发布 Checkstyle 分析结果”框，以便让 Jenkins 发布 JSHint 结果。发布测试结果不需要额外的 Jenkins 作业配置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-15T16:34:52.623

多亏了amey 和Wouter 的意见，终于有时间弄清楚了。

关键是我正在构建一个 maven 项目，这不适用于显示业力测试。显示业力结果的唯一方法是为 Junit 测试添加构建后报告。出于某种原因，基于 maven 的作业不给您添加 junit 报告的选项。

**解决方案是创建一个自由形式的作业，而不是一个 Maven 作业**。您可以配置自由形式的作业来构建 maven 项目就好了。只要您按照上面 amey 的帖子添加发布 junit 任务，一切都很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-24T18:03:59.157

虽然这个问题很老：

有一个解决方案也适用于 Jenkins 中的 Maven 项目。问题是记录测试的 Jenkins 记录器直接在 surefire:test 目标之后运行。因此，为了让您的测试能够被接受，您用于运行业力的任何插件都**必须在`test`阶段**之前运行，例如在`process-test-classes`阶段中（因为您不能在现有插件之前的同一阶段中放置一些东西）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T15:41:33.633

1）您是否输入了Jenkins应该找到Junit报告的报告路径？这可以在构建后操作 -*发布 JUnit 测试结果报告中完成*

2) 或者您可以使用[性能插件](https://wiki.jenkins-ci.org/display/JENKINS/Performance+Plugin)来传递您的 Junit 结果。这又是一个后期构建操作。在该 Jenkins 作业的配置中选择该插件。

添加一个新报告 - Junit 并输入报告的路径`target/surefire-reports/*.xml`（注意 - 我删除了第一个斜杠，因为路径是相对于当前工作区的）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-15T09:41:26.350

我有同样的问题。测试结果包含在单个`<testsuites/>`标签中的事实不是问题。Jenkins 的 Maven 项目插件是问题所在。典型的 maven 项目使用这个，因为它使配置你的构建更容易，我们这样做了。我将 Karma 嵌入到我的 pom.xml 中，以便能够一次构建所有内容，使用`maven-exec-plugin`如下：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
            <executions>
                <execution>
                    <id>jsunit</id>
                    <phase>test</phase>
                    <goals>
                        <goal>exec</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <successCodes>
                    <successCode>0</successCode>
                    <successCode>1</successCode><!-- on failing test, don't get a build error -->
                </successCodes>
                <executable>${basedir}/src/test/javascript/test.bat</executable>
                <workingDirectory>${basedir}/src/test/javascript</workingDirectory>
            </configuration>
        </plugin> 
```

maven jenkins 插件确实拒绝接收生成的 XML。但是，如果您使用插件配置“基本”詹金斯作业而不是特定于 maven2 的作业，它将起作用。添加一个后期步骤，“发布 JUNIT 报告”并使用`target/surefire-reports/*.xml`. 作为正常的构建步骤，您仍然可以添加“执行 maven 任务”步骤。

它仍然不完美，因为使用本地构建`mvn test`似乎忽略了 XML（`maven-surefire-plugin`如果 JUnit 测试失败，只需生成 XML 并停止构建）。如果 javascript 测试失败，您可以使用中的成功代码停止构建，`exec-maven-plugin`但错误消息仍然不清楚...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-27T19:34:21.283

我在这场比赛中迟到了，但我遇到了同样的问题，我偶然发现了这个有一年历史的帖子。

无论如何，在我看来，通过利用`maven-karma-plugin`. 这使我可以继续使用**Maven Project**作业，而不是将它们切换到Jenkins 中的**Freestyle Project**作业。

详细的解决方案发布在[http://myshittycode.com/2014/10/23/jenkins-getting-karma-generated-test-results-to-appear-in-maven-project-job/](http://myshittycode.com/2014/10/23/jenkins-getting-karma-generated-test-results-to-appear-in-maven-project-job/)以防有人被卡住同样的问题。

谢谢。

# amazon-ec2 - 存储容量问题/错误 Datastax 自定义自动集群 EC2 AMI

> ID：15927810
> 
> 赞同：0
> 
> 时间：2013-04-10T13:52:22.143
> 
> 标签：amazon-ec2, cassandra, datastax-enterprise

我正在尝试创建一个自定义自动集群 AMI，以与 Datastax Enterprise 3.0 OpsCenter 创建集群向导一起使用。

我已经尝试了至少两种方法并且一直在同一个地方结束。当我使用标准 Datastax 自动集群 (AC) AMI 时，集群的大小以 TB 为单位。当我使用我的自定义 ami 时，集群的大小为 40GB。我为每次启动选择 4 个 m1.extra 大型实例。

方法 1：我采用标准 datastax AC AMI 使用此处的指令集进行了修改：[https](https://github.com/riptano/ComboAMI/blob/2.4/presetup/setup.md) ://github.com/riptano/ComboAMI/blob/2.4/presetup/setup.md （停在“# Setup credentials”）我然后使用以下内容捆绑并上传到 S3 ec2-bundle-vol -k -c -u -e ec2-upload-bundle -b -m -a -s 之后，我使用 EC2 管理控制台通过image.manifest.xml 文件。

方法 2：我使用 Ubuntu 12.04 LTS AMI 实例进行了修改，并使用了上面相同的指令集。

这两种方法都给了我一个 40GB 的集群。看起来自定义 AMI 没有正确或根本没有设置 RAID。

df -h 用于自定义 AMI

```
Filesystem      Size  Used Avail Use% Mounted on
/dev/xvda1      9.9G  2.6G  6.9G  28% /
udev            7.4G  8.0K  7.4G   1% /dev
tmpfs           3.0G  200K  3.0G   1% /run
none            5.0M     0  5.0M   0% /run/lock
none            7.4G     0  7.4G   0% /run/shm
/dev/xvdb       414G  199M  393G   1% /mnt 
```

df -h 默认 AMI

```
Filesystem      Size  Used Avail Use% Mounted on
/dev/xvda1      9.9G  2.2G  7.3G  23% /
udev            7.4G  8.0K  7.4G   1% /dev
tmpfs           3.0G  224K  3.0G   1% /run
none            5.0M     0  5.0M   0% /run/lock
none            7.4G     0  7.4G   0% /run/shm
/dev/md0        1.7T   34M  1.7T   1% /raid0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T23:13:56.893

我知道这已经很老了，但是如果您遵循确切的命令，它应该允许您毫无问题地捆绑 AMI，因为这与我们用来捆绑我们的 AMI 的脚本完全相同。

如果命令不是罪魁祸首，您应该查看 ~/datastax_ami/ami.log。如果有任何 ERROR 语句，它们可能会告诉你出了什么问题。一个典型的情况是一个小的语法问题导致只运行部分脚本。

从外观上看，由于您没有 /raid0 挂载点，而是有一个 /mnt 挂载点，因此您的脚本可能在有机会完全运行之前出现了问题。

# dart - 是否可以让 dartdoc 显示对属性的评论

> ID：15927819
> 
> 赞同：0
> 
> 时间：2013-04-10T13:52:40.547
> 
> 标签：dart

我正在使用 DartEditor 中的菜单项来生成文档。

以下工作正常：

```
dynamic _parent;
///   Reference to parent of this variable
dynamic get parent => _parent; 
```

函数注释也可以正常工作。

但是，如果它只是一个没有定义 getter 的公共属性：

```
///   True if the variable is static
bool isStatic = false; 
```

然后我没有得到任何文件。

从 DartEditor 发送到 dartdoc 的标志是否可配置（如果可以的话）？

我是否需要更改默认配置才能获得评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:53:54.017

这是最近修复的一个错误。它应该在下周的编辑器版本中推出。

# java - 如何延迟方法

> ID：15927820
> 
> 赞同：1
> 
> 时间：2013-04-10T13:52:42.237
> 
> 标签：java, netbeans

我正在做一个黑白棋游戏，我做了一个简单的代码 Ai。但是当我运行我的代码时，Ai 在我点击后立即运行，我想要一些延迟，我真的不知道该怎么做，正如我所说，它运行得很快，我希望 Ai 像之后一样运行2 秒。

```
board.artificialIntelligence(); 
```

我的方法 Ai 存储在板类中，我希望它在我的面板类中，顺便说一句，我正在使用 NetBeans。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T14:04:24.727

如果您这样做，`Thread.sleep(TIME_IN_MILLIS)`您的游戏将在 2 秒内无响应（除非此代码在另一个线程中运行）。

我能看到的最好的方法是[`ScheduledExecutorService`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)在你的班级中有一个并将 AI 任务提交给它。就像是：

```
public class AI {

    private final ScheduledExecutorService execService;

    public AI() {
        this.execService = Executors.newSingleThreadScheduledExecutor();
    }

    public void startBackgroundIntelligence() {
        this.execService.schedule(new Runnable() {
            @Override
            public void run() {
                // YOUR AI CODE
            }
        }, 2, TimeUnit.SECONDS);
    }
} 
```

希望这可以帮助。干杯。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T13:54:16.047

如果您使用的是 Swing，则可以使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)在预定义的延迟后调用该方法

```
Timer timer = new Timer(2000, new ActionListener() {
      public void actionPerformed(ActionEvent evt) {
         board.artificialIntelligence();
      }
   });
timer.setRepeats(false);
timer.start(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T14:01:49.393

```
int numberOfMillisecondsInTheFuture = 2000;
    Date timeToRun = new Date(System.currentTimeMillis()+numberOfMillisecondsInTheFuture);
    timer = new Timer();
    timer.schedule(new TimerTask() {
        public void run() {
                     board.artificialIntelligence();
        }
    }, timeToRun); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T13:58:29.933

如果您不希望主线程阻塞，请启动一个新线程，该线程等待 2 秒然后进行调用（然后终止），如下所示：

```
new Thread(new Runnable() {
    public void run() {
        try {
            Thread.sleep(2000);
        } (catch InterruptedException e) {}
        board.artificialIntelligence();
    }
}).start(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T13:54:07.927

> Thread.sleep 使当前线程暂停执行一段指定的时间。

在你的情况下：

```
Thread.sleep(2000); // will wait for 2 seconds 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T13:54:39.140

在您的代码调用之前

```
try {    
    Thread.sleep(2000);

} catch(InterruptedException e) {} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-10T13:53:53.893

使用`Thread.sleep(2000)`等待两秒钟

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-10T13:57:12.910

使用此代码等待 2 秒：

```
long t0,t1;
t0=System.currentTimeMillis();
do{
   t1=System.currentTimeMillis();
}while (t1-t0<2000); 
```

# android - 动画视图不会在 ViewPager 中保存其状态

> ID：15927821
> 
> 赞同：1
> 
> 时间：2013-04-10T13:52:44.343
> 
> 标签：android, animation, view, android-viewpager

我已经`PagerAdapter`从 v4 支持库扩展。我在页面中显示一些视图并为这些视图提供旋转动画。

现在我已经设置`viewPager.setOffscreenPageLimit(1);`

现在我已经为第一页的视图提供了旋转动画。我已将此视图的引用保存到我的列表中。因此，当我将转到第 3 页并再次来到第一页时，我将获取此已保存视图的引用，并将已保存的视图返回到第一页显示。

我面临的问题是，视图再次添加到第一页后**会失去其动画状态。**它发生在三星 Galaxy s3(android 版本 4.1.2) 上。但此代码在其他 android 设备上正常工作，如 motorola DroidX(android version 2.3.x)、HTC (android version 2.3.x)、samsung galaxy ACE(android version 2.2.x)。

我不知道问题出在哪里。如果我更改 offScreenPageLimit 那么它可以在所有设备上运行。

你能建议我解决这个问题吗？

# mysql - 触发器创建不起作用

> ID：15927826
> 
> 赞同：1
> 
> 时间：2013-04-10T13:53:06.720
> 
> 标签：mysql, triggers, phpmyadmin

我有一个与在 phpmyadmin 上创建触发器有关的问题。我有一个像下面这样的简单代码，当我提交代码时，在变量 x 声明的行中返回了一个 sintax 错误。我知道 SELECT 查询有效，因为我已经对其进行了测试，并返回了一个字符串。谁能帮我？提前致谢。

```
DELIMITER $$

CREATE TRIGGER `after_assigntags_insert` AFTER INSERT ON `assigntags`
FOR EACH ROW 
BEGIN
DECLARE x VARCHAR(10);
SET x = (SELECT UltLabel FROM assignlabels WHERE ALmessage=1);
INSERT INTO messages (Message) VALUES (x);
$$
END

DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:54:18.633

如何使用`user variables`？

```
DELIMITER $$

CREATE TRIGGER `after_assigntags_insert` AFTER INSERT ON `assigntags`
FOR EACH ROW 
BEGIN
   SET @x = (SELECT UltLabel FROM assignlabels WHERE ALmessage=1 LIMIT 1);
   INSERT INTO messages (Message) VALUES (@x);
$$
END

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:56:09.523

我认为`BEGIN`之后`DECLARE`

```
DELIMITER $$

CREATE TRIGGER `after_assigntags_insert` AFTER INSERT ON `assigntags`
FOR EACH ROW 

DECLARE 
  x VARCHAR(10);
BEGIN
  SET x = (SELECT UltLabel FROM assignlabels WHERE ALmessage=1);
  INSERT INTO messages (Message) VALUES (x);
  $$
END

DELIMITER ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:17:27.080

这是一个语法错误，

`END`应该在你的定界符之前`$$`。

尝试这样的事情：

```
DELIMITER $$

CREATE TRIGGER `after_assigntags_insert` AFTER INSERT ON `assigntags`
FOR EACH ROW 
BEGIN
DECLARE x VARCHAR(10);
SET x = (SELECT UltLabel FROM assignlabels WHERE ALmessage=1);
INSERT INTO messages (Message) VALUES (x);
END
$$

DELIMITER ; 
```

# heroku - Proximo HTTP 代理与 SOCKS 代理

> ID：15927827
> 
> 赞同：2
> 
> 时间：2013-04-10T13:53:15.660
> 
> 标签：heroku, squid, proximo

Proximo 是否同时提供 SOCKS 代理（使用 Dante）和 HTTP 代理（使用类似 Squid 的东西？）。

背景：我正在考虑使用 proximo 将我的 Heroku 应用程序列入白名单，以便与金融数据提供商建立 SOAP 连接。我知道 Proximo 可以通过 SOCKS 代理（使用 Dante 和 socksify）包装所有流量，但该服务是否对 HTTP/HTTPS 流量使用单独的代理（如 Squid HTTP 代理？）。如果我不需要的话，我不想让我所有的流量都变小。

# c# - 我应该如何定义一个可以在 EF 中采用各种数据类型的字段？

> ID：15927829
> 
> 赞同：2
> 
> 时间：2013-04-10T13:53:23.800
> 
> 标签：c#, .net, entity-framework, entity-framework-migrations

我的 poco 课程如下；

```
public class FilterParameter
{
    public int Id { get; set; }

    [Required]
    public virtual UserFeatureSetting UserFeatureSetting { get; set; }

     [Required]
    [MaxLength(450)]
    public String ParameterName { get; set; }

    public object ParameterValue { get; set; }

} 
```

但生成的迁移代码没有创建 ParameterValue 字段。

```
CreateTable("dbo.FilterParameters", c => new {
           Id = c.Int(nullable: false, identity: true),
           ParameterName = c.String(nullable: false, maxLength: 450),
           UserFeatureSetting_Id = c.Int(nullable: false),
   })
   .PrimaryKey(t => t.Id)
   .ForeignKey("dbo.UserFeatureSettings", t => t.UserFeatureSetting_Id, cascadeDelete: false)
   .Index(t => t.UserFeatureSetting_Id); 
```

是否有我应该使用的替代类型 - 或解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:08:31.943

Entity Framework 将 .Net 类型映射到 SQL 类型。您不应该使用`System.Object`，因为 EF 不知道将其映射到什么 SQL 类型。这并不理想，但如果您确实需要在数据库中拥有包含任何对象的列，请在`string ParameterValue`从数据库加载该值时使用并转换该值。如果需要，您还可以添加一个新字段`string ParameterValueType`，在其中保存值的类型以帮助您将其转换回来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:29:00.677

通常做的是例如

```
// define your 'real field' as string, byte[] and/or define column type ntext, binary etc.
public string Value {get;set;}

// and make a wrapper property
[NotMapped]
public object ValueWrapper
{
    get { return YourParser.Deserialize(this.Value); }
    set { this.Value = value.Serialize(); }
} 
```

...并使用一些解析器/格式化程序 - 某种序列化（取决于您所拥有的是否更好地由文本、blob、xml 等表示）。

如果价格昂贵等，您当然应该“缓存”反序列化的值。

此外，您可能需要也可能不需要存储`ParameterType`旁边 - 这基本上取决于您的对象和序列化格式。

例如，EF/code-first 使用二进制将 Edmx 模型存储到`__MigrationHistory`表中——并且它们使用相同的方法（只是较低级别）。

如果您每次只需要保存/加载不同的“原始类型”（比如一次是 int，另一次是文本等）

...then you may have some more options (inheritance maybe etc.) - but nothing I'd recommend much.
I prefer the first approach over any other as that kind of data is likely not usable in terms of relationships, so it doesn't matter how you store it most of the time.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:53:01.803

I think you can use a `Dictionary<string, string>` as the .NET data type to use in your domain model and de/serialize it on save/load time in json format which is clear text, and you can inspect the contents in Sql Server and even change it.

Glad to see you moving on :-)

# wcf - 如何在 1 个服务主机中托管 2 个 wcf 服务

> ID：15927833
> 
> 赞同：0
> 
> 时间：2013-04-10T13:53:35.757
> 
> 标签：wcf, service, host

我正在开发一个 wcf 项目我有 1 个服务和 2 个合同（2 个端点）和 1 个服务和 1 个合同（1 个端点）我想为我的两个服务制作 1 个单一的 ServiceHost。我可以为 2 项服务制作 2 台主机，但我只需要 1 台主机。

```
ServiceHost myService =
            new ServiceHost(typeof(CustomerOrder),
            new Uri("net.tcp://localhost:9191/T1Flondor_Antal"));

            ServiceHost myService2 =
            new ServiceHost(typeof(ReportServiceCO),
            new Uri("net.tcp://localhost:9191/T1Flondor_Antal")); 
```

和配置：

```
<system.web>
    <compilation debug="true" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="T1Flondor_Antal.CustomerOrder"
     behaviorConfiguration="T1Flondor_Antal.MessageBehavior">
        <endpoint address ="net.tcp://localhost:9191/T1Flondor_Antal/Customer"
       binding="netTcpBinding"
       contract="T1Flondor_Antal.ICustomer">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address ="net.tcp://localhost:9191/T1Flondor_Antal/Order"
       binding="netTcpBinding"
       contract="T1Flondor_Antal.IOrder">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex"
       binding="mexTcpBinding"
       contract="IMetadataExchange"/>
      </service>

      <service name="T1Flondor_Antal.ReportServiceCO"
     behaviorConfiguration="T1Flondor_Antal.MessageBehavior">
        <endpoint address ="net.tcp://localhost:9191/T1Flondor_Antal/Report"
       binding="netTcpBinding"
       contract="T1Flondor_Antal.IReport">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>   
        <endpoint address="mex"
       binding="mexTcpBinding"
       contract="IMetadataExchange"/>
      </service>

    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="T1Flondor_Antal.MessageBehavior">
          <serviceMetadata />
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:06:28.930

请参阅[使用多个合同运行 WCF ServiceHost](https://stackoverflow.com/questions/334472/run-wcf-servicehost-with-multiple-contracts)：

您需要在单个对象中实现这两个接口，并在构建 ServiceHost 时使用该对象。

否则：不，你不能那样做。

# java - Java for Android 中的多个移动精灵

> ID：15927843
> 
> 赞同：1
> 
> 时间：2013-04-10T13:53:57.677
> 
> 标签：java, android, eclipse

我目前正在 Eclipse 中使用 Java 为 android 制作游戏。我在屏幕上一次移动多个精灵时遇到问题。这是一些代码，向您展示我到目前为止所做的事情。

这是游戏中线程的运行方法。它调用 onDraw 方法在屏幕上绘制精灵。它们都在扩展 SurfaceView 并实现 Runnable 的类中。

```
public void run() {
        long ticksPS = 1000 / FPS;
                long startTime;
                long sleepTime;
        while (running) {
        Canvas c = null;
        startTime = System.currentTimeMillis();
        try {
        c = getHolder().lockCanvas();
        synchronized (getHolder()) {
        onDraw(c);

        }
        }  finally {
        if (c != null) {
        getHolder().unlockCanvasAndPost(c);
        }

}
        sleepTime = ticksPS-(System.currentTimeMillis() - startTime); 
        try {
               if (sleepTime > 0)
                      Thread.sleep(sleepTime);
               else
                      Thread.sleep(10);
        } catch (Exception e) {}
}

} 
```

这里说的是onDraw方法。左下角和右下角有 2 个品格按钮，就像在节奏游戏中一样。而我想要做的是创建一个“badfret”，它将出现在顶部并向下移动。其中一些代码是从其他程序修补在一起的，有些是我自己的。

```
@Override
protected void onDraw(Canvas canvas) {
    canvas.drawColor(Color.CYAN);
    badguy = true;

if(badguy == true){
    if(switch_sides = true){
        badfret1.move(canvas,30,40);
        badfret1.update(canvas);
    }
    if(switch_sides = false){
        badfret2.move(canvas,500,40);
        badfret2.update(canvas);
    }
}

    fret1.update(canvas);
    fret2.update(canvas);
} 
```

这是我认为最适合该问题的 badfretSprite 类的代码。badfretSprite 类继承自我制作的更高级别的 Sprite 类。

```
Bitmap bmp;
int xSpeed = 0;
int ySpeed = 5;

public badfretSprite(GameView gv, int x1, int y1) {
    super(gv, x1, y1);
    this.bmp = gv.getFret();
}

public void move(Canvas canvas,int xpos,int ypos) {
    x = xpos;
    y = ypos;
    x+=xSpeed;
    y+=ySpeed;
    canvas.drawBitmap(bmp, x,y, null);
    } 
```

所以目前只有一个精灵在顶部创建并且不移动，我设法让它移动但只有一个这样做了。

请询问您是否希望看到任何其他方法或代码片段。

```
public void update(Canvas canvas) {
    move(canvas,xSpeed,ySpeed);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:27:04.257

没有必要更新 badFretSprites。

你也应该真正分开你的绘图和更新逻辑，游戏循环应该是这样的

```
 synchronized (getHolder()) {
        update();
        onDraw(c);
    }

    update(){
        for every object
            object.update()
    }

    onDraw(){
        for every object
            object.draw()
    } 
```

所以你应该只在 update 方法中更新位置，只在 draw 方法中绘制，一旦你的应用程序变得更复杂，它会更容易管理、添加和调试。

# ruby - 红宝石，雷神宝石 ArgumentError

> ID：15927850
> 
> 赞同：2
> 
> 时间：2013-04-10T13:54:14.523
> 
> 标签：ruby, thor

我正在开发一个应该用作[CLI](http://en.wikipedia.org/wiki/Command-line_interface)实用程序的 Ruby gem。

我决定使用[Thor](http://whatisthor.com/)，它被`rails`命令使用并且似乎非常灵活（与`rake`: [link](https://stackoverflow.com/questions/3524296/rake-vs-thor-for-automation-scripts)的区别）。

问题是我找不到如何处理输入错误。例如，如果我输入了错误的选项，Thor 会自动返回一个很好的警告：

```
$ myawesomescript blabla
Could not find command "blabla". 
```

但是，如果我使用无法解决的命令，事情就会变得很糟糕。例如，有一个“帮助”默认命令，我已经定义了一个“hello”命令。如果我只输入“h”，这就是我得到的：

```
$ myawesomescript h
/Users/Tom/.rvm/gems/ruby-2.0.0-p0/gems/thor-0.18.1/lib/thor.rb:424:in `normalize_command_name': Ambiguous command h matches [hello, help] (ArgumentError)
    from /Users/Tom/.rvm/gems/ruby-2.0.0-p0/gems/thor-0.18.1/lib/thor.rb:340:in `dispatch'
    from /Users/Tom/.rvm/gems/ruby-2.0.0-p0/gems/thor-0.18.1/lib/thor/base.rb:439:in `start'
    from /Users/Tom/Documents/ruby/myawesomescript/bin/myawesomescript:9:in `<top (required)>'
    from /Users/Tom/.rvm/gems/ruby-2.0.0-p0/bin/myawesomescript:23:in `load'
    from /Users/Tom/.rvm/gems/ruby-2.0.0-p0/bin/myawesomescript:23:in `<main>'
    from /Users/Tom/.rvm/gems/ruby-2.0.0-p0/bin/ruby_noexec_wrapper:14:in `eval'
    from /Users/Tom/.rvm/gems/ruby-2.0.0-p0/bin/ruby_noexec_wrapper:14:in `<main>'
myawesomescript $ 
```

现在，我知道只输入“h”是愚蠢的，我可以重命名我的命令，但我不希望用户看到这类错误消息。

我试图用以下方法覆盖该方法：

```
def normalize_command_name(meth)
  super(meth)
rescue ArgumentError => e
  puts "print something useful"
end 
```

...但它不起作用

* * *

新细节：

好的，我注意到该方法是在类上声明的，而不是在实例上。我尝试了以下方法，似乎效果很好，但这并不理想，而且有点 hacky：

**文件：lib/myawesomescript/thor_overrides.rb**

```
require 'thor'

class Thor
  class << self

    protected
      def normalize_command_name(meth)
        return default_command.to_s.gsub('-', '_') unless meth

        possibilities = find_command_possibilities(meth)
        if possibilities.size > 1
          raise ArgumentError, "Ambiguous command #{meth} matches [#{possibilities.join(', ')}]"
        elsif possibilities.size < 1
          meth = meth || default_command
        elsif map[meth]
          meth = map[meth]
        else
          meth = possibilities.first
        end

        meth.to_s.gsub('-','_') # treat foo-bar as foo_bar
      rescue ArgumentError => e
        # do nothing
      end
      alias normalize_task_name normalize_command_name
  end
end 
```

在那里我添加了以下几行：

```
rescue ArgumentError => e
  # do nothing 
```

它可以解决问题，因为似乎在其他地方有一些代码负责处理错误消息：

```
$ myawesomescript h
Could not find command "h". 
```

无论如何，有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-27T04:20:50.650

如果您查看错误消息：

```
 Ambiguous command h matches [hello, help] 
```

上面的意思是， for `h`， thor 找到多个匹配项。这是由于`help`命令已经定义（内置）。

我建议您使用内置的帮助命令来显示有关 CLI 工具功能的帮助和选项，而不是尝试修补它。

**要使一个字母的命令快捷方式起作用**-您应该将命令命名为不以字母开头`h`，例如`foo`or `bar`，`yo`& 等等。

如果您想要从 letter 开始的命令`h`，请更具体。

# sql - 表复制（物化视图）Oracle

> ID：15927857
> 
> 赞同：2
> 
> 时间：2013-04-10T13:54:23.953
> 
> 标签：sql, oracle, replication, materialized-views

我正在尝试使用物化视图 (mw) 和数据库链接 (dblink) 配置位于远程数据库 (db) 上的表复制。有一点：

*   我正在第一个数据库（tb）上创建表
*   创建从第一个 db 到第二个和向后的 dblink
*   在第二个数据库上创建 mw 作为从 tb 中选择并设置刷新时间 2 分钟

但它不会刷新，如果我在第一个数据库上创建 mw 作为 select from tb 它会刷新

我应该怎么做才能配置 mw 的刷新？

* * *

**主站点：**

```
CREATE DATABASE LINK to_ora2_connected 
USING 'ora2';

drop table my_table
create table my_table
(
  field varchar(20) primary key,
  field2 number
);
CREATE MATERIALIZED VIEW LOG ON my_table; 
```

**快照网站：**

```
CREATE DATABASE LINK to_ora1_connected 
USING 'ora1';

select * from my_table@to_ora1_connected;

drop materialized view my_table_mw;
create materialized view my_table_mw
  build immediate
  refresh complete start with sysdate
  next sysdate  + 0.00175 
  as select * from my_table@to_ora1_connected; 
```

* * *

```
insert into my_table values ('note2', 2);
select * from my_table;
select * from my_table@to_ora1_connected;
select * from my_table_MW; 
```

* * *

警报日志：

```
Errors in file c:\app\ora1\diag\rdbms\ora2\ora2\trace\ora2_j000_3032.trc:
ORA-12012: ошибка при автоисполнении задания 63
ORA-04052: ошибка во время поиска удаленного объекта SYSTEM.SYS@TO_ORA1_CONNECTED
ORA-00604: ошибка на рекурсивном SQL-уровне 3
ORA-01017: invalid username/password; logon denied
ORA-02063: предшествующий line из TO_ORA1_CONNECTED
ORA-06512: на  "SYS.DBMS_SNAPSHOT", line 2558
ORA-06512: на  "SYS.DBMS_SNAPSHOT", line 2771
ORA-06512: на  "SYS.DBMS_IREFRESH", line 685
ORA-06512: на  "SYS.DBMS_REFRESH", line 195
ORA-06512: на  line 1 
```

并且失败每 10 秒发生一次：

```
OER 7451 in Load Indicator : Error Code = OSD-04500: задан недопустимый параметр
O/S-Error: (OS 1) Неверная функция. ! 
```

“задан недопустимый параметр” - 无效参数；
“Неверная функция” - 功能不正确；
“ошибка при автоисполнении задания” - 自动执行作业时出错
“ошибка во время поиска удаленного объекта” - 搜索远程对象时出错；
“ошибка на рекурсивном SQL-уровне 3” - 递归 SQL 级别 3 上的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:38:13.650

问题出在 dblink 中。我创建了 dblink（固定用户），现在它可以工作了。谢谢你的帮忙！

```
CREATE DATABASE LINK to_ora1_connected
connect to user identified by password
USING 'ora1'; 
```

# c# - 对依赖表使用 sql 批量复制

> ID：15927858
> 
> 赞同：0
> 
> 时间：2013-04-10T13:54:31.227
> 
> 标签：c#, .net, sql-server, bulkinsert

我有两个`DataTable`，`tblSoftware`设计`tblDeviceSoftware`如下：

`tblSoftware` -> `SoftwareID|SoftwareName|Version`

`tblDeviceSoftware` -> `DeviceSoftwareID|DeviceID|SoftwareID|SoftwareName|Version`

我有 300-500 条记录，我想在这种情况下使用[SQL BULK INSERT](http://msdn.microsoft.com/en-us/library/ms188365.aspx)。如果同样`softwareName`存在，则不要插入它。我正在使用 WCF 服务插入。我将`DeviceID`通过`DeviceName`. 除了逐行插入之外，将它插入数据库的最佳方式是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:32:03.363

使用.NET Framework 中提供的[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)类，我取得了相当大的成功。

但是，使用 SQL Bulk Insert 或 SqlBulkCopy，我不相信您可以有选择地确定将哪些记录添加到目标表中。相反，源中的所有内容都被添加（或根据密钥违规等尝试）。

您可以做的是在 SQL Server 中创建一个不同的目标表，将数据批量插入到该表中，然后执行插入查询以仅将必要的记录插入到目标表中。

否则，您需要执行测试，以便将源数据更改为仅包含您需要添加到目标表的记录。我的预感是，这种方法会比在 SQL Server 中作为插入语句的一部分执行此测试要慢。

# iphone - MKMapView 警报自定义

> ID：15927859
> 
> 赞同：2
> 
> 时间：2013-04-10T13:54:31.303
> 
> 标签：iphone, ios, google-maps, ios5, uialertview

当您第一次使用 MKMapView 启动应用程序时，应用程序会显示警报消息“想使用您当前的位置”，选项“不允许”和“确定”。

我需要**自定义此消息**。我还需要知道**用户选择了哪个选项**。我怎样才能做到这一点？

更新：我需要在 iOS 5+ 上实现这个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:56:16.627

在[CLLocationManager](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)上设置用途属性

来自这个问题：[Replacement for " purpose" property of CLLocationManager](https://stackoverflow.com/questions/12562152/replacement-for-purpose-property-of-cllocationmanager)

安娜卡列尼娜的回答

> 在 iOS 6 中替代 purpose 属性是一个名为 NSLocationUsageDescription 的新 Info.plist 键（又名“隐私 - 位置使用说明”）。
> 
> 该密钥记录在信息属性列表密钥参考中，但不幸的是，目的属性的弃用说明中没有提到它。
> 
> 但是， CLLocationManager.h 确实有这样的评论：
> 
> *   已弃用。使用键 NSLocationUsageDescription 在 Info.plist 中设置目的字符串。
> 
> 在您的代码中，您可以同时设置 key 和 purpose 属性（但您可能想检查位置管理器是否首先响应该选择器，如果/当该方法在未来被实际删除时）。
> 
> 如果在 iOS 6 下运行，位置管理器将使用密钥。在低于 iOS 6 下运行时，将忽略 key 并使用 purpose 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:07:01.847

### 用于自定义消息

对于消息，您可以像 Alex Terente 所说的那样使用 purpose 属性，但它在 iOS 6 中已被弃用

### 获得选择权

为了知道用户是否拒绝了权限，位置管理器提供了一个失败委托。mapview 使用它自己的位置管理器，所以：使用`MKMapView`函数 `didFailToLocateUserWithError`

```
- (void)mapView:(MKMapView *)mapView didFailToLocateUserWithError:(NSError *)error {
switch([error code]) {
                case kCLErrorDenied:{
                    //user denied
                }
                break;
            }
} 
```

注意：如果您直接使用 CLLocationManager 它会是`- (void)locationManager: (CLLocationManager *)manager didFailWithError: (NSError *)error;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:07:06.983

如果您正在为 iOS 6+ 构建，请[`NSLocationUsageDescription`](https://developer.apple.com/library/mac/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW18)在`Info.plist`文件中使用。插入此键并将其值设置为您将如何处理位置信息的描述。

# php - 更改表单提交的值？

> ID：15927860
> 
> 赞同：0
> 
> 时间：2013-04-10T13:54:32.513
> 
> 标签：php, jquery, html, forms

我有一个表格，表格中有两组不同的字段，一组是帐单地址，一组是送货地址。

我编写了一些 jQuery，以便您可以隐藏运输表格，并在帐单表格中填写详细信息（如果您要运送到同一个地址）。

这是我的 jQuery：

```
$('#reveal-shipping').click(function(){
    if( $('.wpsc_checkout_table.table-2').css('display') == 'none' ){

        $('.wpsc_checkout_table.table-2').slideToggle();
        $('.wpsc_checkout_table.table-2').find('input, select, textarea').val('');
        document.getElementById('reveal-shipping').innerHTML = 'Ship to my billing address &larr;';

    } else {

        //fields is an array containing an array of two selector strings, one for the billing form and one for the shipping.
        for ( i=0; i < fields.length; i++ ){
            thisval = $(fields[i][0]).val();
            $(fields[i][1]).val( thisval );
        }
        $('.wpsc_checkout_table.table-2').slideToggle();
        document.getElementById('reveal-shipping').innerHTML = 'Ship to a different address &rarr;';

    }
}); 
```

我想知道是否可以运行 for 循环，这是用值填充隐藏输入元素的部分，onClick 提交按钮，或者此时值是否已经提交。

如果没有，什么时候运行它以确保正确提交值？也许onunfocus？（请告诉我这个的实际名称）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:01:58.663

您可以`onClick`在提交按钮的事件上执行此操作，或者您可以`submit`在表单上注册一个事件。您的事件在提交的其余部分发生之前运行。这就是为什么您可以在表单上调用验证方法并通过返回值来中断提交`false`。

您正在考虑的“onunfocus”事件是`blur`

# c# - 让图形最初出现

> ID：15927862
> 
> 赞同：2
> 
> 时间：2013-04-10T13:54:33.383
> 
> 标签：c#, winforms, graphics, paint, picturebox

我正在尝试开发一个“PictureBox”，它显示一个小圆圈“环绕”一个大圆圈。关键方面是这个小圆圈的位置（以及整体情况）可以根据我每秒进行的半昂贵的硬件调用而改变。我用“AngleValueTextBox”调用来说明。

研究有关该主题的几篇文章，这*似乎*是正确的方法：

```
public partial class Form1 : Form
{
  public Form1()
  {
    InitializeComponent();

    AngleValueTextBox_TextChanged(null, null); // Why doesn't this make the box appear on program start?
    PictureBox.Invalidate();  // Or this?
  }

  public class CircleCenterClass { public double X; public double Y; 
    public CircleCenterClass(double X, double Y) { this.X = X; this.Y = Y; }
  }

  CircleCenterClass GetCenterOfOrbitCircle(CircleCenterClass OrbitCenter, double OrbitRadius, double Angle)
  {
    CircleCenterClass Result = new CircleCenterClass(0, 0);
    Result.X = OrbitCenter.X + OrbitRadius * Math.Sin(Angle * (3.141592654 / 180));
    Result.Y = OrbitCenter.Y - OrbitRadius * Math.Cos(Angle * (3.141592654 / 180));
    return Result;
  }

  private void drawPictureBox(Graphics graphics, bool ownGraphics)
  {
    double Angle= 0; 
    // Normally this is an expensive hardware call which I don't want to make more than 
    // once a second.
    try {
      Double.TryParse(AngleValueTextBox.Text, out Angle);
    } catch (Exception e) {
      MessageBox.Show("Could not parse Angle " + 
                       AngleValueTextBox.Text);
    }

    using (Bitmap bitmap = new Bitmap(PictureBox.Width, PictureBox.Height))
    {
      using (Graphics gx = Graphics.FromImage(bitmap))
      {
        double OrbitedCircleRadius = 40;
        CircleCenterClass OrbitedCircleCenter = new CircleCenterClass(60, 60);
        double OrbitingCircleRadius = 7;
        Pen MyRedPen = new Pen(Color.Red, 2f);
        Brush MyBlackBrush = new SolidBrush(Color.Black);

        gx.DrawEllipse(MyRedPen, (Int32)(OrbitedCircleCenter.X - OrbitedCircleRadius),
                                        (Int32)(OrbitedCircleCenter.Y - OrbitedCircleRadius),
                                        (Int32)(2 * OrbitedCircleRadius),
                                        (Int32)(2 * OrbitedCircleRadius));

        CircleCenterClass CircleCenter = GetCenterOfOrbitCircle(
                            OrbitedCircleCenter, OrbitedCircleRadius,
                            Angle);

        gx.FillEllipse(MyBlackBrush, (Int32)(CircleCenter.X - OrbitingCircleRadius),
                                     (Int32)(CircleCenter.Y - OrbitingCircleRadius),
                                     (Int32)(2 * OrbitingCircleRadius),
                                     (Int32)(2 * OrbitingCircleRadius));

        // Draw Electronics box. 
        Graphics g = PictureBox.CreateGraphics();
        g.Clear(BackColor);
        g.DrawImage(bitmap, 0, 0);  
      }
    }
  }

  private void PictureBox_Paint(object sender, PaintEventArgs e)
  {
    drawPictureBox(e.Graphics,false);
  }

  private void AngleValueTextBox_TextChanged(object sender, EventArgs e)
  {
    drawPictureBox(PictureBox.CreateGraphics(), true);
  }
} 
```

关键问题：

1.  我最初无法显示图片（即当 GUI 启动时）。我尝试将事件添加到我的 Form 构造函数（如您所见）但没有运气。什么是“正确”的方式？

2.  有没有更好的方法来绘制不断变化的图形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:07:50.397

将 draw 方法调用添加到 Form 的[Load](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.load.aspx)事件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:16:47.577

1.  使用 CreateGraphics 很少是更新显示的正确方法。只需让您的绘画方法完成所有绘画并调用控件 Invalidate() 方法来更新屏幕。

2.  确保绘制事件已连接（只是为了确保）。如果它没有在设计器中连接，请确保它在表单的构造函数中：

    `PictureBox.Paint += PictureBox_Paint;`

    另外，命名您的控件。PictureBox 的描述性不是很强。

3.  任何“半昂贵的硬件调用”都应该在 BackgroundWorker 中进行，这样 UI 就不会被冻结。

4.  如果只是不断尝试用新的绘图更新屏幕，请使用计时器。

5.  您不需要在每次绘制调用时都创建一个新位图。要么使用给定的图形对象，要么使用仅在调整控件大小时创建的位图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:33:47.657

用调用的 PictureBox替换`PictureBox`控件`Panel`

或将图片框的`Image`属性设置为创建的位图

请注意，这不是一种特别有效的方法。

如果图像仅每秒更新一次，那么您可能仅在值更改时才绘制图像，将位图保留为表单上的私有属性，并且仅在绘画中复制位图（就像您所做的那样，但取出所有绘制代码，并且仅在值更改时才执行）

![在此处输入图像描述](https://i.stack.imgur.com/ymeHN.png)

```
 Bitmap bitmap;
    public Form1()
    {
        InitializeComponent();
        bitmap = new Bitmap(PictureBox.Width, PictureBox.Height);
        AngleValueTextBox_TextChanged(null, null); // Why doesn't this make the box appear on program start?
        PictureBox.Invalidate();  // Or this?
    }

    public class CircleCenterClass
    {
        public double X; public double Y;
        public CircleCenterClass(double X, double Y) { this.X = X; this.Y = Y; }
    }

    CircleCenterClass GetCenterOfOrbitCircle(CircleCenterClass OrbitCenter, double OrbitRadius, double Angle)
    {
        CircleCenterClass Result = new CircleCenterClass(0, 0);
        Result.X = OrbitCenter.X + OrbitRadius * Math.Sin(Angle * (3.141592654 / 180));
        Result.Y = OrbitCenter.Y - OrbitRadius * Math.Cos(Angle * (3.141592654 / 180));
        return Result;
    }

    private void drawPictureBox(Graphics graphics, bool ownGraphics)
    {

    }

    private void DrawImage()
    {
        double Angle = 0;
        // Normally this is an expensive hardware call which I don't want to make more than 
        // once a second.
        try
        {
            Double.TryParse(AngleValueTextBox.Text, out Angle);
        }
        catch (Exception e)
        {
            MessageBox.Show("Could not parse Angle " +
                             AngleValueTextBox.Text);
        }

        using (Graphics gx = Graphics.FromImage(bitmap))
        {
            gx.Clear(BackColor);
            double OrbitedCircleRadius = 40;
            CircleCenterClass OrbitedCircleCenter = new CircleCenterClass(60, 60);
            double OrbitingCircleRadius = 7;
            Pen MyRedPen = new Pen(Color.Red, 2f);
            Brush MyBlackBrush = new SolidBrush(Color.Black);

            gx.DrawEllipse(MyRedPen, (Int32)(OrbitedCircleCenter.X - OrbitedCircleRadius),
                                            (Int32)(OrbitedCircleCenter.Y - OrbitedCircleRadius),
                                            (Int32)(2 * OrbitedCircleRadius),
                                            (Int32)(2 * OrbitedCircleRadius));

            CircleCenterClass CircleCenter = GetCenterOfOrbitCircle(
                                OrbitedCircleCenter, OrbitedCircleRadius,
                                Angle);

            gx.FillEllipse(MyBlackBrush, (Int32)(CircleCenter.X - OrbitingCircleRadius),
                                         (Int32)(CircleCenter.Y - OrbitingCircleRadius),
                                         (Int32)(2 * OrbitingCircleRadius),
                                         (Int32)(2 * OrbitingCircleRadius));
        }
    }

    private void PictureBox_Paint(object sender, PaintEventArgs e)
    {
        e.Graphics.DrawImage(bitmap, 0, 0);
    }

    private void AngleValueTextBox_TextChanged(object sender, EventArgs e)
    {
        DrawImage();
        PictureBox.Invalidate();
    } 
```

# c# - ContextStaticAttribute 到底是什么？

> ID：15927864
> 
> 赞同：12
> 
> 时间：2013-04-10T13:54:35.217
> 
> 标签：c#, .net

从[文档](http://msdn.microsoft.com/library/system.contextstaticattribute%28v=vs.110%29.aspx)中：

> **用ContextStaticAttribute**标记的静态字段不在上下文之间共享。如果在不同的上下文中访问指示的静态字段，它将包含不同的值。照原样使用此属性，不要从它派生。
> 
> 以下示例显示了此属性的语法：
> 
> ```
> [ContextStatic]
> static int f=7; 
> ```

不幸的是，在这种情况下，它没有阐明“上下文”的含义。有人可以举例说明何时使用此属性吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T15:56:35.800

该属性在您使用远程处理的情况下很重要，例如从 MarshalByRefObject 派生的类。然后，您的代码将使用客户端程序中的代理，这是一个看起来与原始类完全一样的假类对象，但其方法由 CLR 实现，并将方法参数序列化到在服务器上运行的实际对象。通常在另一台机器上。

字段在此类中是一个问题，它们不能用替代方法伪造。这是抖动处理的问题。当它检测到对 MRBO 对象中的字段的访问时，它不会生成直接读取/写入字段的代码，而是调用 CLR 中的辅助方法。它知道对象是代理还是真实对象，要么直接返回字段值，要么进行远程调用。

这当然会增加开销，这是一个可以非常频繁地访问的静态字段的问题。[ContextStatic] 属性表示您不关心实际的静态字段值，它的本地副本就足够了。或者，如果出于某种原因在本地跟踪状态很重要，则可以有意使用它。我想不出一个很好的例子。框架程序员也没有，它没有在框架代码中的任何地方使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:10:32.490

正如评论中所指出的，*另请参阅*部分中的文档确实指向**远程上下文**的文档，这使得以哪种方式进行挖掘更加清晰。

我自己能找到的关于该主题的最佳资源是[http://blogs.msdn.com/b/tilovell/archive/2011/02/07/contextboundobject-part-1-making-contexts.aspx](http://blogs.msdn.com/b/tilovell/archive/2011/02/07/contextboundobject-part-1-making-contexts.aspx)

简而言之 - 在 99% 的情况下，这个属性并不是乍一看。

# php - 强制下载后 Codeigniter 重定向

> ID：15927868
> 
> 赞同：0
> 
> 时间：2013-04-10T13:54:42.640
> 
> 标签：php, codeigniter

我有一个下载 JSON 文件的公共函数。我希望它`base_url`在下载完成后重定向到索引（）。我尝试使用`ob_start`和`ob_flush`PHP 函数，但没有这样做。这可能吗？

```
 $this->load->helper('url');
    $data['events'] = $this->events_model->get_events();

    ob_start();
    header("Content-Description: File Transfer"); 
    header("Content-Type: application/octet-stream"); 
    header("Content-Disposition: attachment; filename='EVENTS.json'"); 

    echo json_encode($data);
    ob_flush();

    redirect(base_url()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:09:40.843

'echo' 后函数 redirect() 不起作用；

**在**重定向之前，您无法在浏览器中回显任何内容

请评论这一行：

```
//echo json_encode($data); 
```

# java - 复选框值不保持 UTF-8 编码

> ID：15927869
> 
> 赞同：0
> 
> 时间：2013-04-10T13:54:44.510
> 
> 标签：java, servlets

我有一个 servlet，它创建一个 html 表单，其中包含一组在其名称属性中包含中文字符的复选框。当我提交表单时，我通过调用来检索这些：

`String[] values = request.getParameterValues("checkbox");`

但是，当我尝试查看各个值时，文本似乎出现了错误的编码。在我的两个 servlet 中，我将 contentType 字符集设置为 UTF-8，将字符编码设置为 UTF-8。所以我不确定为什么它似乎失去了它的编码。

代码：

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> 
```

然后是其他一些 html 的东西。

```
<form action="addVocab" method="get">

<% 
HashMap<String, servlets.Hanzi> hanziMap = Tester.getHanziMap();
HashSet<String> concordance = Tester.getConcordance();
HashSet<String> knownWords = Tester.getKnownWords();
Hanzi hanzi = new Hanzi();
String simp;
LinkedList<String> defList;
for(String s : concordance){
    if( !knownWords.contains(s) ){
        hanzi = hanziMap.get(s);
        simp = hanzi.getSimplified();           
        out.println("<input class=\"checkbox\" type=\"checkbox\" name = \"checkbox\" value="+simp+">");
    }
} 
```

%>

```
<input class = "submit" type="submit" value="Submit"> 
```

当我查看页面时，一切看起来都很好。我可以很好地看到角色。但是，当我提交时，字符会像使用不同的编码一样出现。在 servlet 中，我正在以这种方式检查它。

```
response.setContentType("text/html; charset=UTF-8");
    response.setCharacterEncoding("UTF-8");
    request.setCharacterEncoding("UTF-8");

    PrintWriter out = response.getWriter();
    out.println("In the server");
    String[] values = request.getParameterValues("checkbox");

    out.println(values.length);
    for(String s : values){
        out.println( s );
    } 
```

当它打印出来时，它会像这样打印出来。å¤§ å¤ç¬ èªå·± åå®¶ æ¶å 我不明白为什么，因为据我所知，一切都设置为 UTF-8。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2020-02-21T13:36:25.660

我在 PHP 中遇到了同样的问题，我用`utf8_decode`结果来获取值。

# html - 垂直分页和列

> ID：15927872
> 
> 赞同：2
> 
> 时间：2013-04-10T13:54:53.720
> 
> 标签：html, css, layout

HTML 和/或 CSS 中是否有办法自动将多列内容按高度分成页面？例如，如果您想在网页中显示电子书并使用多列，您可能希望在视口中一次显示 1 页 = 2 列，然后使用垂直分隔符来模拟分页符，并使用接下来的两栏页面。

例如，如果我想在一个 HTML 页面上以两列格式显示整个章节，如果我只是这样做`column-count:2`，那么每一列可能会很长，您必须一直滚动到底部才能阅读第一列，然后一路回到顶部继续到第二列。我正在寻找的是一种避免滚动回顶部但仍使用列的方法。

我意识到这可以用 Javascript 来完成，但我*不是在问关于使用 javascript*的问题。我只对纯 HTML/CSS 技术感兴趣。如果没有办法做到，我已经知道如何在 JS 中做到这一点。

**编辑：** 这是我正在寻找的简单说明：http: [//jsfiddle.net/xGqAC/7/embedded/result/](http://jsfiddle.net/xGqAC/7/embedded/result/)

需要明确的是，我没有专门的 Javascript 实现，我只知道可以在那里完成，我想已经有多列库可以做到这一点，但同样，这不是我想要的为了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-28T19:31:48.140

您仅通过 CSS 查找的内容是不可能的。

但是你可以为你的列设置一个高度和一个宽度，如果你没有设置任何列数，列将根据需要添加，这可以让你达到我能想到的最接近的妥协......如果列是在您的浏览器中支持

```
html, body {
  height:100%;
  margin:0;
  overflow:hidden;
}
body {
  width:940px;
  column-width:450px;
  column-gap:10px;
  column-rule:solid;
  box-shadow:inset 0 0 0 3px;
  overflow:auto;
  margin:auto;
} 
```

CSS（媒体网络/媒体打印）中的 PDF 没有什么比得上 :) [http://codepen.io/anon/pen/hxcIt](http://codepen.io/anon/pen/hxcIt)

# mpi - 调用从 MPI 进程调用 MPI 进程的脚本

> ID：15927875
> 
> 赞同：0
> 
> 时间：2013-04-10T13:55:02.993
> 
> 标签：mpi, openmp, mpich

我有一个 MPI 程序（Fortran，[MPICH](http://www.mpich.org/)），我需要将它转换成一个脚本，然后启动它自己的 MPI 程序（使用`mpirun`）。到目前为止，我已经将 shell out ( `system`) 命令封装在一个`if(system_num .eq. root_system_num)`东西中，因此只有一个 MPI 进程运行该脚本。但是，这会导致一系列`HYDU_create_process`错误。

我考虑过使用`MPI_Comm_spawn`，但有类似“MPI 没有说明如果您启动的程序是一个 shell 脚本并且那个 shell 脚本启动一个调用的程序会发生什么”的警告`MPI_INIT`，所以这似乎也不理想。

几点：

*   shell脚本中调用的程序根本不需要与调用程序交互。调用程序只需要等到该过程完成。
*   没有一种简单的方法可以将 shell 脚本转换为单独的可执行文件（大量的环境变量设置等）。
*   理想情况下，这应该适用于 MPICH 和[Open MPI](http://www.open-mpi.org/)。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:03:29.743

对于 MPICH `MPI_Comm_spawn`，不幸的是，您最好使用 . 您唯一的其他选择是在调用嵌套 MPI 程序之前找出所有依赖于实现、依赖于版本的环境变量，这些环境变量需要`unset`在您的 shell 脚本中。一些示例变量（对于 MPICH）将包括`PMI_RANK`和`PMI_PORT`：

```
% mpiexec -n 1 env | egrep '^PMI|^HYD'
HYDI_CONTROL_FD=8
PMI_RANK=0
PMI_FD=7
PMI_SIZE=1 
```

显然，对于 Open MPI 或不同版本的 MPICH2/MPICH，需要调整不同的变量。

# .net - 为什么此错误显示为“成员名称不能与封闭类型相同”？

> ID：15927876
> 
> 赞同：-3
> 
> 时间：2013-04-10T13:55:03.517
> 
> 标签：.net, xml, windows-phone-7, xna, xna-4.0

为什么此错误显示为“成员名称不能与封闭类型相同”。为什么 SpriteAnimationManager 在此代码中显示为错误？//ComplexSpriteSheetAnimationGame.cs

```
 public ComplexSpriteSheetAnimationGame()
            {
                float timer;
                float interval = 200;
                AnimationSet animationSet;
            }

    protected override void Initialize()
            {
             animationSet = SpriteAnimationManager.Read(@”Content\SpriteDescription.xml”);
             base.Initialize();
            }

    //SpriteAnimationManager.cs
    public static int AnimationCount;
                // Read the Sprite Sheet Description information from the
                // description xml file
                public static AnimationSet Read(string Filename)
                {
                    AnimationSet animationSet = new AnimationSet();
                    // Create an XML reader for the sprite sheet animation
                    // description file
                    using (System.Xml.XmlReader reader =
                    System.Xml.XmlReader.Create(Filename))
                    {
                        // Create an XMLSerializer for the AnimationSet
                        XmlSerializer serializer = new
                        XmlSerializer(typeof(AnimationSet));
                        // Deserialize the Animation Set from the
                        // XmlReader to the animation set object
                        animationSet =
                        (AnimationSet)serializer.Deserialize(reader);
                    }
                    // Count the animations to Animation Count
                    AnimationCount = animationSet.Animations.Length;
                    return animationSet;
                } 
```

![在此处输入图像描述](https://i.stack.imgur.com/j4rmz.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T13:57:27.173

显然，您正在尝试`SpriteAnimationManager`在其他*也*称为`SpriteAnimationManager`. 你不能那样做；正如它在错误消息中所说，类型成员的名称不能与类型本身相同（因为它与构造函数冲突，我认为）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:28:01.423

一些新的编程规则，让你的生活更简单；

1：一个类进入一个文件。（class-to-file-ratio 应该是 1）
2：这也适用于 interfaces/enums/etc
3：开始调试错误列表中的第一个错误。
4：只有在你真正知道为什么要这样做时才打破这些规则。

除此之外，您的问题很可能是由嵌套类引起的（在您的情况下，我怀疑您有另一个类“SpriteAnimationManager”的声明，突出显示的声明在其中。也许您不小心将声明复制到了类本身中, 身份证...

# c++ - C ++如何访问另一个类中的私有静态变量

> ID：15927879
> 
> 赞同：0
> 
> 时间：2013-04-10T13:55:10.310
> 
> 标签：c++, variables, static, private, member

我正在尝试从另一个类访问私有静态变量 (*PhysicsEngine:: **_world** ->setDebugDrawer(&debugDraw);*)。

一级：

```
namespace GameEngine
{
    class PhysicsEngine
    {
    private:
        // Pointer to Bullet's World simulation
        static btDynamicsWorld* _world; 
```

二等：

```
bool Game::initialise()
    {
        _device = irr::createDevice(irr::video::EDT_OPENGL,
                                    _dimensions,
                                    16,
                                    false,
                                    false,
                                    false,
                                    &inputHandler);

        if(!_device)
        {
            std::cerr << "Error creating device" << std::endl;
            return false;
        }
        _device->setWindowCaption(_caption.c_str());

    //////////////
    DebugDraw debugDraw(game._device);
    debugDraw.setDebugMode(
    btIDebugDraw::DBG_DrawWireframe |
    btIDebugDraw::DBG_DrawAabb |
    btIDebugDraw::DBG_DrawContactPoints |
    //btIDebugDraw::DBG_DrawText |
    //btIDebugDraw::DBG_DrawConstraintLimits |
    btIDebugDraw::DBG_DrawConstraints //|
    );
    PhysicsEngine::_world->setDebugDrawer(&debugDraw); 
```

如果我公开 _world，我会在 Bullet01.exe 中的 0x00EC6910 处得到未处理的异常：0xC0000005：访问冲突读取位置 0x00000000。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:58:29.310

在物理引擎类中公开一些静态函数，该函数返回指向私有静态变量 _world 的引用或指针，然后调用该静态函数。

```
PhysicsEngine::getWorld()->setDebugDrawer(&debugDraw); 
```

公开下面的方法

```
static btDynamicsWorld* getWorld() { return _world; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:57:07.843

在这个类中将该类声明为 Friend。然后该类的成员函数可以访问这个私有静态成员。

# jquery - jQuery 移动加载轮在某些浏览器中不起作用

> ID：15927881
> 
> 赞同：0
> 
> 时间：2013-04-10T13:55:22.667
> 
> 标签：jquery, jquery-ui, jquery-mobile, setinterval, clearinterval

我正在使用以下行：

```
$.mobile.loading('show'); 
```

和

```
$.mobile.loading('hide'); 
```

与`jquery.mobile-1.2.0.js`.

它适用于 Firefox，但不适用于 Windows 上的 Chrome（版本 26）和 Safari（5.1.7）。它是特定于浏览器的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:06:01.070

jQuery Moible 对 web-kit 浏览器有问题，所以如果使用任何页面事件（除了 pageshow），ajax 加载器只有在使用 setinterval 执行时才能工作：

这是一个工作示例：http: [//jsfiddle.net/LW7MU/](http://jsfiddle.net/LW7MU/)

```
$(document).on('pagebeforeshow', '#index', function(){  
    var loader = setInterval(function(){
        $.mobile.loading('show');
        clearInterval(loader);
    },1);       
}); 
```

正如我之前提到的，ajax loader 将在 Chrome 中成功显示，并且使用了 Safari ig pageshow 事件，例如：http: [//jsfiddle.net/8ay3W/1/](http://jsfiddle.net/8ay3W/1/)

此代码也可以在 Firefox 和移动浏览器中安全使用。

这在第一个 jQM 版本中是特定于 Chrome 和 Safari 的，无论是使用旧版本的 alax 加载程序触发还是这个带有**$.mobile.loading('show') 的**新版本。

很少有其他类似的问题。这也是 jQM 弹出窗口可以以编程方式打开/关闭的唯一方法。

# java - 具有 BindingResult 属性的 Spring Validation 从未命中目标控制器方法

> ID：15927884
> 
> 赞同：0
> 
> 时间：2013-04-10T13:55:35.233
> 
> 标签：java, spring-mvc, validation, spring-validator

我有一个提交上传文件的表格：

```
<form id="uploadForm" action="#" method="POST" enctype="multipart/form-data">
    <div class="instruction popup_inst">
        <span class="popup_logo">[@spring.message "pandaLogo"/]</span>

        <div class="float_right">
            <input type="button" id="cancelBtn" class="btn" onclick="closePopupFunctionality();" value="[@spring.message "cancelButton"/]" />

            <input class="btn" type="submit" id="submit" onclick="validateFileInput();" value="[@spring.message "uploadButton"/]" />
        </div>

    </div>
    <span class="popup_title">[@spring.message "uploadFile"/]</span>
    <div class="popup_container">
        [@spring.bind "assayAssessmentsRequestBean"/]
        [@spring.formInput path="assayAssessmentsRequestBean.designabilityFile.file" fieldType="file" attributes="title='path' class='upload' accept='.txt,.csv,.zip'" /]
        [@spring.formHiddenInput path="assayAssessmentsRequestBean.dateOfAssessment" attributes="" /]
        [@spring.formHiddenInput path="assayAssessmentsRequestBean.id" attributes="" /]
        [@spring.showErrors " " "error" /]
    </div>
    <input id="uploadfile" type="hidden" value="${uploadfile}"/>
</form> 
```

此表单在控制器中点击以下方法：

```
@RequestMapping(value = "/uploadFile",method= RequestMethod.POST)
    public ModelAndView uploadFile(@ModelAttribute(value = "assayAssessmentsRequestBean")AssayAssessmentsRequestBean assayAssessmentsRequestBean,HttpSession session,BindingResult result) throws PanDaApplicationException {
//mycode
} 
```

发生的事情是该方法从未被调用，当我删除 BindingResult 属性时，该方法被调用。

我尝试了另一种方法，它具有 BeanPropertyBindingResult 属性并传递要验证的目标对象，它可以工作但从不返回错误。

```
@RequestMapping(value = "/uploadFile",method= RequestMethod.POST)
    public ModelAndView uploadFile(@ModelAttribute(value = "assayAssessmentsRequestBean")AssayAssessmentsRequestBean assayAssessmentsRequestBean,HttpSession session/*,BindingResult result*/) throws PanDaApplicationException {
        logger.info(assayAssessmentsRequestBean.getDesignabilityFile().getFile());
        BindingResult result=new BeanPropertyBindingResult(assayAssessmentsRequestBean.getDesignabilityFile(),"designabilityFile"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:03:36.937

您应该在要验证的对象之前有 @Valid 注释，并且 BindingResult 必须紧跟在经过验证的对象之后

所以这应该做的工作

```
 public ModelAndView  uploadFile(@Valid @ModelAttribute(
    value = "assayAssessmentsRequestBean")AssayAssessmentsRequestBean   assayAssessmentsRequestBean,BindingResult result,
HttpSession session) {

 } 
```

那么您应该定义自己的验证器并将其设置为活页夹。验证器将被自动调用。但我不确定您是否可以通过这种方式对多部分进行验证。

# java - 是/否，布尔值或 if/else？

> ID：15927885
> 
> 赞同：2
> 
> 时间：2013-04-10T13:55:35.730
> 
> 标签：java, boolean

我在我的程序中创建是/否输入时遇到问题。我希望用户能够在最后一个打印语句之后输入 ay/n，但我不太确定如何实现它。我知道它很可能包含一个布尔值或 if/else 语句，但我不太确定。有什么帮助吗？

```
import java.util.*;
import java.io.*; 
import java.util.Scanner;

public class Person 
{
public static void main(String[]args) 
{

    int age;
    String name;

    Scanner scan = new Scanner(System.in);

    System.out.println("Enter in your age.");
    age = scan.nextInt();

        if (age >= 10 && age < 18) 
        {
            System.out.println("So you're a kid, huh?");
        } 

        else if (age < 10)
        {
            System.out.println("Nice try.");
            System.exit(0);
        }
        else if (age >= 18 && age <= 100)
        {
            System.out.println("So you're an adult, huh?");
        }
        else if (age > 100)
        {
            System.out.println("Nice try.");
            System.exit(0);
        }

        Scanner in = new Scanner(System.in);
        System.out.println("Enter in your name");
        name = in.nextLine();

        System.out.println("So you're " + age + " years old and your name is " + name + "?");

        System.out.println("y/n");
        }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T14:01:01.860

```
String answer;
boolean yn;

System.out.println("y/n");
while (true) {
  answer = in.nextLine().trim().toLowerCase();
  if (answer.equals("y")) {
    yn = true;
    break;
  } else if (answer.equals("n")) {
    yn = false;
    break;
  } else {
     System.out.println("Sorry, I didn't catch that. Please answer y/n");
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T14:05:52.400

这是你需要的吗？

```
String answer = in.nextLine()
Boolean yn = (answer.equalsIgnoreCase("Y") ? true : false); 
```

或者，您可以使用更短的形式：

```
Boolean yn = (answer.equalsIgnoreCase("Y")); 
```

如果你的意思是别的，请发表澄清。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T14:00:28.877

只需添加`boolean answer = in.nextLine().toLowerCase().startsWith("y");`

所以基本上，`answer`如果你输入任何以`y`. 否则为假。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T13:59:15.443

您将读取一个字符串并将其与文字“y”进行比较。比较产生一个布尔值。

您可以将其扩展为首先检查它是“y”还是“n”并抱怨它是否不是，或者将其缩小以接受其他等价物，如“yes”和“no”。

无论如何，您的布尔值是通过与文字进行比较来实现的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T14:01:41.603

尝试这个，

```
boolean answer = "y".equalsIgnoreCase(in.nextLine()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T14:02:03.003

你可以`do while loop`这样使用：

```
import java.util.Scanner;

public class Test {
    public static void main(String[] args) {

        int age;
        String name;
        String input = "y";
        do {
            Scanner scan = new Scanner(System.in);

            System.out.println("Enter in your age.");
            age = scan.nextInt();

            if (age >= 10 && age < 18) {
                System.out.println("So you're a kid, huh?");
            }

            else if (age < 10) {
                System.out.println("Nice try.");
                System.exit(0);
            } else if (age >= 18 && age <= 100) {
                System.out.println("So you're an adult, huh?");
            } else if (age > 100) {
                System.out.println("Nice try.");
                System.exit(0);
            }

            Scanner in = new Scanner(System.in);
            System.out.println("Enter in your name");
            name = in.nextLine();

            System.out.println("So you're " + age
                    + " years old and your name is " + name + "?");

            Scanner sc = new Scanner(System.in);
            System.out.println("y/n");
            input = sc.nextLine();
        } while (input.equalsIgnoreCase("y"));
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-16T21:31:15.133

我想通了。

```
import java.util.Scanner;

public class MuseumHours2 {
    public static void main(String[] args) {
        String day;
        boolean yn = true;
        boolean userContinue;
        String answer;

        Scanner stdIn = new Scanner(System.in);

        do {
            System.out.println("Hello, thank you for visiting the Museum 
    website. For what day would you like to check our hours of operation?");
            day = stdIn.nextLine();

            System.out.println("Is today a holiday? Enter y or n.");
            answer = stdIn.nextLine();
                if (answer.equals("y")) {
                    yn = true;
                } else if (answer.equals("n")) {
                    yn = false;
                } else { 
                    System.out.println("Sorry, I didn't understand. Please reply y or n.");
                }

            switch (day) {
            case "Monday":
                System.out.println("Closed.");
                break;

            case "Tuesday":
                if (yn) {
                    System.out.println("We are open from 1:00 to 4:00.");
                } else {
                    System.out.println("We are open from 12:00 to 5:00.");
                }
                break;
            case "Wednesday":
                if (yn) {
                    System.out.println("We are open from 2:00 to 5:00.");
                } else { 
                    System.out.println("We are open from 1:00 to 6:00.");
                    break;
                }
            case "Thursday":
                System.out.println("Closed.");
                break;
                }
            System.out.println("Do you want to re-run the program? Type y or n.");
        } while (userContinue = "y".equalsIgnoreCase(stdIn.nextLine()));
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-16T20:39:48.963

使用`org.apache.commons.lang3.BooleanUtils.toBooleanObject()`, 'Yes' & 'Y' 将返回 true

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-04T13:51:46.133

这是一个例子

```
 public static void main(String[] args) {

        Scanner sc = new Scanner(System.in);
        boolean yn;
        String ageq;

        System.out.println("Please enter your age: ");
        ageq = sc.next();

        System.out.println("You entered " + ageq + " is this correct?");
        System.out.println("y/n");
        OUTER:
        while (true) {
            ageq = sc.next().trim().toLowerCase();
            switch (ageq) {
                case "y":
                    yn = true;
                    break OUTER;
                case "n":
                    yn = false;
                    break OUTER;
                default:
                    System.out.println("Sorry, I didn't get that. Please enter y/n");
                    break;
            }
        }

  } 
```

# windows - IIS 中的 TLS 相互身份验证，无需重新协商

> ID：15927886
> 
> 赞同：3
> 
> 时间：2013-04-10T13:55:37.280
> 
> 标签：windows, iis, ssl

我正在托管一个 Web 应用程序，该应用程序使用 TLS 和双向（2 路）身份验证进行所有连接。我的 Web 应用程序在 Windows Server 2012 上使用 IIS 8 托管，并且在 IIS 中配置为需要 SSL 并且还需要客户端证书。当我从浏览器访问 Web 应用程序时，系统会提示我输入证书，一切似乎都很好。

但是，当我查看数据包捕获时，我看到 TLS 会话以单向身份验证会话开始，然后发送请求，然后将会话重新协商为 2 向身份验证会话，然后响应是在此 2 向身份验证会话中发送。

这是不可接受的，原因如下：

1.  请求不是通过 2-way 认证的 TLS 连接发送的。

2.  这无缘无故地增加了额外的 TLS 会话协商。

3.  验证是否使用了 2-way 身份验证很困难，因为 2-way 身份验证的握手消息在初始 1-way 身份验证会话中被加密

4.  除非您正确执行，否则 TLS 会话重新协商具有与之相关的安全漏洞。

我的猜测是 IIS 需要知道您正在尝试访问哪个站点才能应用适当的 SSL 设置，因此它以“默认”单向身份验证会话开始，并在收到请求后确定它需要使用 2 向身份验证。由于我在 IIS 上托管的所有内容都需要双向身份验证，因此我希望这是“默认”行为。是否有某种方法可以对 Web 应用程序进行编码或将 IIS（或 Windows Server 2012）配置为始终以 2 路身份验证的 TLS 会话开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-06T21:53:59.380

[在http://technet.microsoft.com/en-us/security/bulletin/MS10-049](http://technet.microsoft.com/en-us/security/bulletin/MS10-049)找到了答案。它没有列出 IIS 8，但 IIS 7 的修复似乎有效：

对于 IIS 7：

将以下文本保存到名为`Enable_SSL_Renegotiate_Workaround.js`

```
// replace 1 on this line with the number of the web site you wish to configure
var vdirObj=GetObject("IIS://localhost/W3svc/1");

WScript.Echo("Value of SSLAlwaysNegoClientCert Before: " + vdirObj.SSLAlwaysNegoClientCert);
vdirObj.Put("SSLAlwaysNegoClientCert", true);
vdirObj.SetInfo();
WScript.Echo("Value of SSLAlwaysNegoClientCert After: " + vdirObj.SSLAlwaysNegoClientCert); 
```

从提升的/管理员命令提示符运行以下命令：

`cscript.exe enable_ssl_renegotiate_workaround.js`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-10T13:55:27.667

juhraffe 的答案确实有效，但也让我发现了一个看起来更干净的以下解决方案。

在我们的部署过程中，我们使用网络配置实用程序将证书绑定到端口

```
netsh http add sslcert ipport=0.0.0.0:443 certhash=f882031933dc66a88993d5b5c326ed21b2ea8779 appid={4dc3e166-e14b-4a21-b022-59fc669b0914} 
```

显然，可以添加一个额外的标志，它可以达到与 juhraffe 解决方案中描述的相同的效果

所以这就是我们修改命令的方式

```
netsh http add sslcert ipport=0.0.0.0:443 certhash=f882031933dc66a88993d5b5c326ed21b2ea8779 appid={4dc3e166-e14b-4a21-b022-59fc669b0914} clientcertnegotiation=enable 
```

# cakephp - cakephp htmlhelper

> ID：15927891
> 
> 赞同：-5
> 
> 时间：2013-04-10T13:55:47.593
> 
> 标签：cakephp

我必须创建一个这样的表单：

姓名：输入您的姓名。

我在 cakephp 中使用“之前”、“之后”和“之间”表单选项，但它给了我一个错误。

下面是我在 cakephp 中的代码。

```
echo $this->Form->create('Post');
echo $this->Form->input('Post.title', 
    array( 
        'before' => array('label' => array(
                    'class' => 'thingy',
                    'text' => 'Title :'
                )
            ),
            'after' => array(
                'label' => array(
                    'class' => 'thingy',
                    'text' => 'Title :'
                )
            ),
            'between' => array(
                'id' => 'posttitle', 
                'size' => '50', 
                'maxlength' => '255', 
                'error' => false,
                'class'=>'field'
            )
    )
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:04:00.207

这是我用于相同目的的代码

```
$this->Form->input('Post.title', 
                        array(
                            'placeholder' => 'Place holder name',
                            'value' => '', 
                            'class' => 'required',
                            'after'=>'</div>', 
                            'error' => false,
                            'between' => '<div class="controls extend-controls">',
                            'label' => array('class' => 'control-label extend_label', 'text' =>  $type.' '.$label_name.'<span class="red">*</span>'),
                            'div' => array('class' => 'control-group')
                            )
                        ); 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-26T10:23:41.717

你不应该使用数组。它只是一个字符串参数

> $options['before']、$options['between']、$options['separator'] 和 $options['after']
> 
> 如果您需要在 input() 方法的输出中注入一些标记，请使用这些键：

```
echo $this->Form->input('field', array(
'before' => '--before--',
'after' => '--after--',
'between' => '--between---'
)); 
```

输出：

```
<div class="input">
--before--
<label for="UserField">Field</label>
--between---
<input name="data[User][field]" type="text" value="" id="UserField" />
--after--
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-16T13:41:51.413

```
$this->Form->input('name', 
                    array(
                        'placeholder' => 'Your name',
                        'class' => 'required',
                        'label'=>false, 
                        'div' => false,
                        )
                    ); 
```

你不需要 div 在数组中使用 div false 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-03T09:39:50.700

```
$this->Form->input('Post.title', array (
    'placeholder' => 'Enter Your Name',
    'class' => 'required',
    'label'=>false, 
    'div' => false
  )
); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-05-09T11:09:42.787

您必须使用 [] 而不是数组。

# zend-framework - _initAutoloader 数据库名称与类相同

> ID：15927892
> 
> 赞同：0
> 
> 时间：2013-04-10T13:55:50.970
> 
> 标签：zend-framework, autoloader

我是 Zend 的新手，我正在学习。我收到以下错误：

```
Message: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'cddb.model_dbtable_albums' doesn't exist 
```

但是测试表名是数据库中的专辑，如果我将其更改为 model_dbtable_albums 它可以工作。我只想将表命名为专辑而不是类名。

我做错了什么;-)

这是引导程序：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap{
    protected function _initAutoload(){
    $moduleloader = new Zend_Application_Module_Autoloader(array(
    'namespace'=> '',  
    'basePath'=> APPLICATION_PATH)); 
```

indexAction 控制器：

```
public function indexAction()
{
    $albums = new Model_DbTable_Albums();
    $this->view->albums = $albums->fetchAll();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:23:51.540

假设您的模型`Model_DbTable_Albums`扩展`Zend_Db_Table_Abstract`集：

```
protected $_name = 'albums'; 
```

请参阅[Zend_Db_table 文档](http://framework.zend.com/manual/1.12/en/zend.db.table.html)。

# solr - 如何检查两个 Solr 字段的相等性？

> ID：15927893
> 
> 赞同：4
> 
> 时间：2013-04-10T13:55:52.230
> 
> 标签：solr, indexing

我面临一种情况，我需要从 Solr 服务器获取所有这些记录，条件是`field_1.value != field_2.value`.

这是我的架构的 Solr 字段名称`field_1`。`field_2`

我试过`!(creation_date = last_edited_date)`了，但它不起作用。这将返回 Solr 服务器在执行查询时包含的所有 Solr 文档。

谁能分享如何从 Solr where 获取这些记录`!(creation_date = last_edited_date)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:22:43.593

AFAIK 日期比较不像其他领域那么直接。

有两种选择

*   拥有另一个计算字段（布尔值）`creation_date_equals_last_edited`并将其设置为 true，以便在索引时匹配它的文档。将此字段用作过滤条件。

*   使用`frange`,`incl`和`sub`在查询时间内计算。一个例子 -

    fq={!frange l=0 incl=false}sub(creation_date,last_edited_date)

如果您想要日期差异的容差（由于边缘时间戳差异），您可以使用`scale`函数查询。

参考：[Solr 函数查询](http://wiki.apache.org/solr/FunctionQuery)

# php - php随机访问

> ID：15927895
> 
> 赞同：0
> 
> 时间：2013-04-10T13:55:54.070
> 
> 标签：php, ms-access

我将 PHP 与 Access 数据库一起使用。此代码运行良好，并显示 34 个问题。我想随机化问题的显示顺序，但该`RAND()`功能不适用于 Access。我想对数组进行洗牌，但语法不正确。任何帮助，将不胜感激。

```
$info2 = "SELECT * FROM CCNAATQuestions";
$rs2=odbc_exec($conn1, $info2);

while ($row = odbc_fetch_array($rs2)) {

    echo "<strong>" . $row["Question"] . "</strong>";

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:58:41.880

```
SELECT * FROM [tableName] ORDER BY rnd(INT(NOW*id)-NOW*id) 
```

尝试上述方法，其中 id = 您的主键列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:58:31.767

```
$rows = array();
while ($row = odbc_fetch_array($rs2)) {

$rows[]="<strong>" . $row["Question"] . "</strong>";

}

shuffle($rows); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T14:00:42.873

```
$info2 = "SELECT * FROM CCNAATQuestions";
$rs2=odbc_exec($conn1, $info2);

$questions = array();

while ($row = odbc_fetch_array($rs2))
{
    $questions[] = $row;
}

shuffle($questions);

foreach ($questions as $row)
{
    echo "<strong>" . $row['Question'] . "</strong>";
} 
```

使用 PHP 的随机播放：http: [//php.net/manual/en/function.shuffle.php](http://php.net/manual/en/function.shuffle.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T13:58:51.893

您必须先获取所有行，然后才能对其进行洗牌：

```
$rows = array();
while ($row = odbc_fetch_array($rs2)) {
    $rows[]= $row;
}

shuffle($rows);
foreach ($rows as $row) {
    echo "<strong>" . $row["Question"] . "</strong>";
} 
```

您应该看看@Dave 的解决方案，因为它将使用 ACCESS 功能。不幸的是，我无法测试它，因为我手头没有 Windows 系统

# command-line - iexpress 控制台参数

> ID：15927900
> 
> 赞同：1
> 
> 时间：2013-04-10T13:56:08.647
> 
> 标签：command-line, parameters, iexpress

我需要从几个 dll 和 .exe 文件创建一个 .exe 文件。我用过iexpress。程序运行良好，但我无法在控制台中传输参数，因为程序从控制台运行。如何在控制台中传输参数并使用这些参数运行我的应用程序？

像这样：gm convert -size 100x100 a.jpg b.pdf

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T19:21:29.997

您可以使用`/c`开关来执行此操作，例如：

```
gm /c:"convert -size 100x100 a.jpg b.pdf" 
```

（假设这`convert.exe`是 IExpress 文件中可执行文件的名称`gm.exe`）

# log4j - 如何使用 Logger.getLogger(Class clazz)

> ID：15927902
> 
> 赞同：0
> 
> 时间：2013-04-10T13:56:10.313
> 
> 标签：log4j

我试图了解 Logger.getLogger(Class clazz) 方法的作用。

这是获取 ROOT LOGGER，然后使用传入的类名打印到日志，以便您可以跟踪日志调用的来源？

如何指定不同的日志名称但也使用类命名？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T22:05:21.920

Logger.getLogger(Class c) 只是 Logger.getLogger(c.getName()) 的简写

类 c.getName() 将此 Class 对象表示的实体的名称作为字符串返回。

它没有获取根记录器并将类的名称添加到输出中。Logger.getLogger(String s) 将返回一个根据 's' 的值命名的记录器（如果存在），或者它将创建一个新的记录器并将其与该名称相关联。

您可以将记录器配置为根据其名称进行不同的输出，并且您可以组成任何您想要的名称。如果你想指定一个包含类名的不同名称，比如 Foo::MyClassName，你可以使用 Logger.getLogger("Foo::"+c.getName())。

# razor - 从另一个 MVC 网站渲染视图

> ID：15927903
> 
> 赞同：0
> 
> 时间：2013-04-10T13:56:11.500
> 
> 标签：razor, asp.net-mvc-4, rendering, dynamic-compilation

mMy 的任务是创建一个动作，允许获取另一个 asp.net MVC 站点输出的可下载副本（让我们将其视为模板，结果应该是压缩的页面集合）。模板站点位于磁盘上的某个位置，但不在渲染器站点内。即我想加载另一个站点的视图并在当前上下文中动态构建它的输出。我已经通过创建自定义 VirtualPathProvider / VirtualFile 解决了定位视图的问题，最终路径被正确解析。但是，我在代码中有一个编译错误：

```
var engine = new EmbeddedViewEngine("My Custom Project", "Custom Site");
// Here goes the error.
ViewEngineResult viewResult = engine.FindView(this.ControllerContext, "Index", "", false); 
```

结果：

```
c:\Users\me\AppData\Local\Temp\Temporary ASP.NET Files\root\28ca69a5\2e195676\App_Web_index.cshtml.fb05bd29.4rma-j2y.0.cs(40)
: error CS0103: 
The name 'ViewBag' does not exist in the current context 
```

有任何想法吗？

# bash - 如何检查 dir 是否存在于 ssh 并将结果返回给主机

> ID：15927911
> 
> 赞同：29
> 
> 时间：2013-04-10T13:56:28.967
> 
> 标签：bash, shell, ssh

我正在尝试建立 SSH 连接并查看是否存在目录，如果该目录存在，我想在进行 SSH 调用的本地计算机上运行命令。

这是我尝试过的：

```
if [ ssh -t username@ssh_server -d /directory ]
then
{
    commands....
}
fi 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-10T13:58:54.940

你非常接近：

将 if 语句更改为

```
if ssh username@ssh_server '[ -d /directory ]' 
```

我假设您已经设置了基于密钥的身份验证。

# ruby-on-rails-3 - Rails 悲观锁定 + Mysql 的任何替代方案？

> ID：15927916
> 
> 赞同：0
> 
> 时间：2013-04-10T13:56:44.503
> 
> 标签：ruby-on-rails-3

我在 Rails 模型中有以下代码：

```
self.with_lock do
  # Lots of code
end 
```

这会生成一个 SELECT FOR UPDATE 查询。

我意识到它在我的生产环境中工作。在查看了mysql手册后，我发现了以下信息：

```
Locking of rows for update using SELECT FOR UPDATE only applies when autocommit is disabled 
```

正如预期的那样，自动提交在我的生产环境中是开启的。

我有什么选择？

我无法禁用自动提交，因为同一服务器中的 PHP 应用程序依赖于它。我还需要锁定此代码，因为它会导致并发连接出现问题。

我找不到任何宝石或可以帮助我的东西。就像锁定临时文件夹中的文件一样。我需要自己编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:04:32.607

是的，但是您从手册中复制的那句话的其余部分如下：

```
...(either by beginning transaction with START TRANSACTION or by setting autocommit to 0\. If autocommit is enabled, the rows matching the specification are not locked. 
```

因此，您需要做的就是启动一个事务，然后自动提交将被禁用。这正是您正在做的事情。

您找不到可以满足您需求的 gem，因为 Rails 已经在这样做了。

`SELECT FOR UPDATE`您可以通过跟踪日志并确保出现在事务块中来确认 Rails 正在做正确的事情。

# javascript - 将 div HTML 复制到 textarea 但保留换行符

> ID：15927918
> 
> 赞同：5
> 
> 时间：2013-04-10T13:56:56.920
> 
> 标签：javascript, jquery

我正在开发一个问卷应用程序，其中一个功能是用户可以单击一个问题并对其进行编辑。我遇到的问题是将`<br />`标签转换为我的 textarea 可以理解的换行符。

保存代码如下所示：

```
$('#questions').append("<div>"+$('textarea[name="question"]').val().replace(/\n/g, '<br />')+"</div"); 
```

这完美！将其转换回来的代码如下所示：

```
$('textarea[name="question"]').val($('#questions').eq(1).html().replace(/<br\s*\/?>/mg,"\n")); 
```

但由于某种原因，textarea 将不接受新行，而只是将所有文本捆绑在一起。

如何转换`<br />`回我的 textarea 可以理解的新换行符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T14:09:54.617

尝试

```
$('textarea[name="question"]').val($('#questions').eq(1).html().replace(/\s*<br\s*\/?>\s*/g,"\n")); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/Evrvz/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:03:14.747

您需要将 转换`<br>'s`为 HTML 编码的换行符。

`&#10;`换行和`&#13;`回车。这样，您实际上是在解析新行 ("\n")，而不是将其显示为文本。

[文本区域中的新行](https://stackoverflow.com/questions/8627902/new-line-in-text-area)

# unit-testing - 使用 ngMock 模拟服务单元测试中的 $http 调用

> ID：15927919
> 
> 赞同：5
> 
> 时间：2013-04-10T13:56:57.640
> 
> 标签：unit-testing, angularjs, jasmine

我已经看了好几个小时了。我已经尝试了一个又一个例子。我似乎无法让它发挥作用。请帮忙=)

我在 angular-seed repo (git://github.com/angular/angular-seed.git) 的干净克隆上做这一切。除了下面列出的之外，我没有进行任何更改。

## 问题：

当我运行以下命令时，测试有效。请注意，在此版本中，服务在执行任何类型的 $http 调用之前都会返回一个值。

*./app/js/services/services.js*

```
'use strict';
angular.module('myApp.services', [])
  .factory("exampleService", function ($http) {
    return {value:"goodValue"};

    $http.get("/exampleUrl")
      .success(function () {
        return {value:"goodValue"};
      })
      .error(function () {
        return {value:"badValue"};
      })
  }); 
```

*./test/unit/servicesSpec.js*

```
'use strict';
describe('service', function() {
  var $httpBackend;

  beforeEach(module('myApp.services'));

  beforeEach(inject(function ($injector) {
    $httpBackend = $injector.get("$httpBackend");
    $httpBackend.when("GET", "/exampleUrl")
      .respond({value:"goodValue"});
  }));

  afterEach(function () {
    $httpBackend.verifyNoOutstandingExpectation();
    $httpBackend.verifyNoOutstandingRequest();
  });

  describe('exampleService', function () {
    it('.value should be "goodValue"', inject(function (exampleService) {
      expect(exampleService.value).toEqual("goodValue");
    }));
  });
}); 
```

### 结果

```
info (watcher): Changed file "/home/username/mocktest/test/unit/servicesSpec.js".
Chrome 26.0: Executed 5 of 5 SUCCESS (0.136 secs / 0.035 secs) 
```

当我删除该行`return {value:"goodValue"};`并实际让它运行时`$http.get()`，整个事情会因以下错误而中断：

```
info (watcher): Changed file "/home/username/mocktest/app/js/services.js".
Chrome 26.0 service exampleService .value should be "goodValue" FAILED
  TypeError: Cannot read property 'value' of undefined
      at null.<anonymous> (/home/username/mocktest/test/unit/servicesSpec.js:22:28)
      at Object.invoke (/home/username/mocktest/app/lib/angular/angular.js:2864:28)
      at workFn (/home/username/mocktest/test/lib/angular/angular-mocks.js:1758:20)
  Error: Declaration Location
      at window.jasmine.window.inject.angular.mock.inject (/home/username/mocktest/test/lib/angular/angular-mocks.js:1744:25)
      at null.<anonymous> (/home/username/mocktest/test/unit/servicesSpec.js:21:40)
      at null.<anonymous> (/home/username/mocktest/test/unit/servicesSpec.js:20:3)
      at /home/username/mocktest/test/unit/servicesSpec.js:4:1
  Error: Unflushed requests: 1
      at Error (<anonymous>)
      at Function.$httpBackend.verifyNoOutstandingRequest (/home/username/mocktest/test/lib/angular/angular-mocks.js:1225:13)
      at null.<anonymous> (/home/username/mocktest/test/unit/servicesSpec.js:17:18)
Chrome 26.0: Executed 5 of 5 (1 FAILED) (0.14 secs / 0.043 secs) 
```

## 想法

我*怀疑*我需要在服务中返回某种承诺对象，然后再解决它，但我不知道那会是什么。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-29T14:14:42.023

您怀疑的解决方案是在正确的轨道上 - 承诺是修复错误/失败测试的关键。

使用您的原始`$http`服务有条件地返回工厂对象不起作用，因为您实际上*没有*从工厂函数返回任何内容（由于 的异步承诺解析`$http`）。

我考虑过把你原来的电话放在`return`前面。`$http.get()`但这不是我们想要的行为，因为 AngularJS`.factory`方法应该返回一个您定义的服务对象，而不仅仅是调用`$http`.

解决方案是在您的对象上公开一个`exampleService`可由您的应用程序调用的方法。该`getData()`方法返回一个承诺（通过`$http`），您的应用程序/测试可以使用`.success()`或异步处理该承诺`.error()`

*./app/js/services/services.js*

```
'use strict';
angular.module('myApp.services', [])
    .factory("exampleService", function ($http) {
        return {
            getData: function () {
                return $http.get("/exampleUrl");
            }
        }
  }); 
```

*./test/unit/servicesSpec.js*

```
'use strict';
describe('service', function() {
  var $httpBackend;

  beforeEach(module('myApp.services'));

  beforeEach(inject(function ($injector) {
    $httpBackend = $injector.get("$httpBackend");
    $httpBackend.when("GET", "/exampleUrl")
        .respond(200, {value:"goodValue"});
  }));

  afterEach(function () {
    $httpBackend.flush()
    $httpBackend.verifyNoOutstandingExpectation();
    $httpBackend.verifyNoOutstandingRequest();
  });

  describe('exampleService successful http request', function () {
    it('.value should be "goodValue"', inject(function (exampleService) {

        exampleService.getData().success(function(response) {
          expect(response.value).toEqual("goodValue");
        }).error( function(response) {
          //should not error with $httpBackend interceptor 200 status
          expect(false).toEqual(true);
        });

    }));
  });

}); 
```

请注意，Destron 的评论对于`$httpBackend.flush()`让模拟后端拦截`$http.get()`来自您的服务的请求也很重要。

希望有帮助。

# css - 居中 2 div 与文本

> ID：15927921
> 
> 赞同：2
> 
> 时间：2013-04-10T13:57:00.363
> 
> 标签：css

我尝试将 2 个 div 水平居中并在它们之间对齐这 2 个 div。当我在每个 div 中放置不同大小的文本时，问题就来了。这是示例：http: [//jsfiddle.net/DgEcs/1/](http://jsfiddle.net/DgEcs/1/)

为什么红色的div会下移，如何解决？
CSS：

```
.container{
    margin: 20px auto;
    height: 50px; line-height: 50px;
    text-align: center; /* to center red and blue */
    background: whiteSmoke;
}
.red{ 
    display:inline-block; /* to put it side by side */
    font-size: 10px;
    background:red;
}
.blue{ 
    display:inline-block; /* to put it side by side */
    font-size: 26px;
    background:blue;
} 
```

HTML：

```
<div class="container" >
    <div class="red"> aaaaaaa </div>
    <div class="blue"> bbbbbbb </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:00:32.313

添加`vertical-align: top;`到两者的 CSS`.red`和`.blue`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:00:57.437

只需添加`vertical-align:top`. 您还可以优化您的 css……</p>

[http://jsfiddle.net/DgEcs/4/](http://jsfiddle.net/DgEcs/4/)

```
.container div {
    vertical-align:top;
    display:inline-block;
}

.red{ 
    font-size: 10px;
    background:red;
}

.blue{ 
    font-size: 26px;
    background:blue;
} 
```

现在它应该是这样的： ![从 Chrome 26/OSX 截取的屏幕截图](https://i.stack.imgur.com/ulQJ6.png)

# java - 播放框架 1：标记只包含一次 javascript 文件

> ID：15927924
> 
> 赞同：0
> 
> 时间：2013-04-10T13:57:05.427
> 
> 标签：java, playframework

在`Play Framework 1`中，是否有一个标签在生成的页面中只包含一次 javascript 文件？

例子：

我想要以下代码：

```
#{press.script 'my.script.js'}
#{press.script 'my.script.js'} 
```

只将`my.script.js`声明注入结果页面一次，以便 Play 生成以下内容：

```
<script src="/path/to/my.script.js"></script> 
```

请注意，`press`模块应该是`version >= 1.0.22`.

到目前为止，除了不需要的东西之外的任何东西都被发现了：

*   `#{press.script 'my.script.js'}`当使用相同的 js 文件指定两次时简单地抛出异常
*   模块的版本添加了`1.0.11`标签属性，根据文档，它应该做需要做的事情，但在下一个版本中它被**神秘地删除了**......`press``ignoreDuplicates`
***   模块版本`1.0.12`增加`press`了添加`press.allowDuplicates`到配置的可能性，但在下一个版本中，它又被**神秘地删除**了......*   `#{press.single-script 'my.script.js'}`简单地压缩js文件并`<script>`在生成的文件中添加两次**

 **请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:36:27.900

我不认为有。我已经解决了类似的问题。

假设我有一个模板，`main.html`. 所有其他模板都扩展了这一模板。`Main.html`包括`scripts.html`. 基于当前 URL，Controller 渲染`form.html`extends `main.html`。在`form.html`我有一个需要`my.script.js`. 为确保它仅包含在此页面中（需要脚本），我设置了以下变量：

```
#{set useMyScript: true /} 
```

在`scripts.html`中，我将检查此变量并仅在需要时呈现此脚本：

```
#{if useMyScript}
    #{press.script 'my.script.js'}
#{/if} 
```

所以，这不完全是你的情况，但我很确定你可以使用这个解决方案多次将 useMyScript 设置为 true 并且只包含一次 Javascript。

我希望这有帮助！**

# mysql - 带有子查询的 MYSQL 中等查询优化

> ID：15927935
> 
> 赞同：0
> 
> 时间：2013-04-10T13:57:35.873
> 
> 标签：mysql, optimization, query-optimization

我有这个查询返回以下内容：

*   地区名称
*   区域编号
*   该区域的排名（位置），基于总票数
*   Nb 来自该地区的不同用户
*   Nb 来自该地区的不同照片

查询大约需要 7.5 秒才能完成......我想要一些建议来优化我的查询。

```
 select
            WrappedQuery.*,
            regions.name as region_name,
            regions.id as region_id,
            count(distinct users.id) as nb_users,
            count(distinct photos.id) as nb_photos
            from (
                select
                  @rownum := @rownum +1 as rank,
                  prequery.region_id,
                  prequery.VoteCount
                from
                  ( select @rownum := 0 ) sqlvars,
                  ( select region_id, count(id) VoteCount
                      from votes
                      where theme_id = '{$currentTheme}'
                      group by region_id
                      order by count(id) desc ) prequery
              ) WrappedQuery, regions, users, photos
              WHERE regions.id = WrappedQuery.region_id
              AND users.region_id = WrappedQuery.region_id
              AND photos.region_id = WrappedQuery.region_id
              GROUP BY WrappedQuery.region_id
              ORDER BY WrappedQuery.rank ASC
              LIMIT 0, 1 
```

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:15:28.680

您的查询对于您想要实现的目标有太多的开销。我已经为你重写了...

```
select 
/*you don't need that
@rownum := @rownum +1 as rank, 
*/
regions.name as region_name,
regions.id as region_id,
count(distinct users.id) as nb_users,
count(distinct photos.id) as nb_photos,
count(votes.id) as VoteCount
from votes
INNER JOIN regions ON votes.region_id = regions.id
INNER JOIN users ON users.region_id = regions.id
INNER JOIN photos ON photos.region_id = regions.id
/*you don't need that
, ( select @rownum := 0 ) sqlvars
*/
where theme_id = '{$currentTheme}'
group by regions.id
order by VoteCount DESC
LIMIT 1 
```

我用排名注释掉了部分，因为无论如何你只想要 1 行。

如果还是太慢，就得把 的结果贴出来`EXPLAIN SELECT .../*the query from above*/`，看看有没有用到索引。还要发布表创建脚本（带有`SHOW CREATE TABLE tableName`）。要么这样，要么您尝试自己创建缺少的索引。

**更新：**

再次重写您的查询，这样可能会更快：

```
select
WrappedQuery.*,
regions.name as region_name,
regions.id as region_id,
count(distinct users.id) as nb_users,
count(distinct photos.id) as nb_photos
from (
       select region_id, count(id) VoteCount
          from votes
          where theme_id = '{$currentTheme}'
          group by region_id
          ORDER BY VoteCount DESC
          LIMIT 1
  ) WrappedQuery, regions, users, photos
  WHERE regions.id = WrappedQuery.region_id
  AND users.region_id = WrappedQuery.region_id
  AND photos.region_id = WrappedQuery.region_id
  GROUP BY WrappedQuery.region_id 
```

# winapi - 获取字体的字符宽度

> ID：15927936
> 
> 赞同：1
> 
> 时间：2013-04-10T13:57:37.533
> 
> 标签：winapi

我需要从给定字体（例如 Arial）中获取字符的宽度。只有边界框的宽度，没有间距。

```
HFONT font = CreateFont(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, L"Arial"); 
```

使用创建的 HFONT，有没有办法提取这些信息？

```
int MyGetCharWidth(HFONT font, wchar_t wch)
{
    // How to implement this?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:20:51.533

有[`GetCharABCWidths`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144857%28v=vs.85%29.aspx)，但请注意，它不会告诉您有关字距调整的信息，因此它可能有用也可能没有用，具体取决于您打算如何处理这些信息。

如果您想要实际文本字符串的宽度，有几个函数可以为您测量它，例如[`GetTextExtentPoint32`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144938%28v=vs.85%29.aspx). 这些功能将包括任何字距更正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:02:18.473

这应该做的工作：

```
int MyGetCharWidth(HFONT font, wchar_t wch)
{
  HDC hDC = GetDC(NULL) ;
  HGDIOBJ oldfont = SelectObject(hDC, font) ;

  RECT rect ;
  DrawText(hDC, &wch, 1, &rect, DT_CALCRECT|DT_NOPREFIX) ;

  SelectObject(hDC, oldfont) ;
  return rect.right - rect.left ;
} 
```

顺便说一句，这没有意义：

```
HFONT font = CreateFont(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, L"Arial"); 
```

您必须为某些参数指定非空值，例如：

```
CreateFont(fontsize, 0, 0, 0, FW_NORMAL, 0, 0, 0,
                          DEFAULT_CHARSET, OUT_DEFAULT_PRECIS,
                          CLIP_DEFAULT_PRECIS, DEFAULT_QUALITY,
                          DEFAULT_PITCH, "Arial"); 
```

# javascript - 如何使用 jQuery 设置动态文本框的只读属性？

> ID：15927937
> 
> 赞同：2
> 
> 时间：2013-04-10T13:57:42.643
> 
> 标签：javascript, jquery, html, cordova

我正在尝试从数据库值填充文本框，并且我想将文本框值设置为只读。当用户单击 EDIT 选项时，将所有文本框设置为可编辑。我没能做到这一点。这是我的 HTML 代码：

```
<html>
  <head> 
    <script>
      $(document).ready(function() {  
        $('#contentid :input').each(function() {
          $(this).attr("disabled",true);
        });

      $('#edit').on('click',function() {
        $('#contentid :input').each(function() {
          $(this).attr('disabled',false);});
        });
     });
   </script>
</head>

<body>
  <div data-role="page" id="viewInformation" data-theme="d" data-add-back-btn="true" data-back-btn-text = "back">
    <div data-role="header" id="headerid" class="ui-bar ui-bar-b">
      <h3></h3> 
    </div>

    <div data-role="content" id="contentid">
      <a href="#" id="saveDBValue" data-role="button" data-mini="true" style="width:60px; height:40px; float:center;">SAVE</a>
      <a href="#" id="edit" data-role="button">EDIT</a>
    </div>
  </div>
</body> 
```

这是我的 JavaScript 代码：

```
 function getDataofSelectedListItem()
    {
        alert("getDataofSelectedListI");
        clickedListItem = window.localStorage.getItem("clickedValueofList");
        console.log("clicked list item"+clickedListItem);
        //db = window.openDatabase("loginintro", "1.0", "loginintro", 1000000);
        var sqlQuery = 'SELECT * FROM loginTable WHERE username=\''+window.localStorage.getItem("clickedValueofList").trim()+'\';';

        console.log("selected list query:"+sqlQuery);
        db.transaction(function(tx)
        {
          tx.executeSql(sqlQuery,[],successCBofListItem,errorCBofListItem);
        },errorCB,successCB);
    }
    function successCBofListItem(tx,results)
    {   alert("erer");
      if(results != null && results.rows != null && results.rows.length > 0) 
         {  $('#contentid').append('<label>UserName:</label><input content-editable="false" id="name" type="text"   value="'+results.rows.item(0).username+'"/>');
         $('#contentid').append('<label>EMAIL ID:</label><input type="text" value="'+results.rows.item(0).emailid+'"/>');
         $('#contentid').append('<label>Password:</label><input type="text" value="'+results.rows.item(0).password+'"/>');
    }   
    function errorCBofListItem()
    {
        alert("errorCBofListItem");
    } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T14:09:30.150

您必须使用 live 来捕获点击事件

```
$('#edit').live('click',function() 
```

我创建了一个[示例](http://jsfiddle.net/UhXe4/)

[动态](http://jsfiddle.net/UpNpa/)文本框示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:04:20.380

我相信你正在寻找的是这样的：

```
$('input').prop('readonly',true); 
```

[这里](https://stackoverflow.com/questions/1306708/add-readonly-to-input-jquery)已经回答了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:02:52.587

您禁用所有输入字段的代码在 DOMReady 执行，这是在您`successCBofListItem`执行之前，即在有任何输入要禁用之前。您需要确保它在之后执行。

从 jQuery 1.6 开始，使用`.prop('disabled', true)`而不是`.attr('disabled', true)`. 此外，您无需遍历选择并单独禁用每个输入，您可以为整个集合设置属性：

```
$('#contentid :input').prop('disabled', true) 
```

如果您在上面粘贴的代码与您的应用程序中的代码完全相同，那么您需要将您的 javascript 包装在`<script>...</script>`标签中的 head 中。

一个完整的解决方案可能如下所示：

```
function toggleForm(disabled) {
    $('#contentid :input').prop('disabled', disabled);
}

$(function() {
    $('#edit').on('click', function() { toggleForm(false); });
}); 
```

...

```
function successCBofListItem(tx,results)
{
     if(results != null && results.rows != null && results.rows.length > 0) 
     {
         $('#contentid').append('<label>UserName:</label><input content-editable="false" id="name" type="text"   value="'+results.rows.item(0).username+'"/>');
         $('#contentid').append('<label>EMAIL ID:</label><input type="text" value="'+results.rows.item(0).emailid+'"/>');
         $('#contentid').append('<label>Password:</label><input type="text" value="'+results.rows.item(0).password+'"/>');

         toggleForm(true);
     }
} 
```

在您的`successCBofListItem`上面，您似乎也缺少 a `}`，我在上面已对其进行了更正。我`content-editable`在上面的代码中保留了该属性，以防您在代码中的其他地方使用它，但出于此目的不需要它。`contenteditable`用于编辑不是表单元素的内容。

# linux - 如何查看文件夹中的txt文件列表？

> ID：15927939
> 
> 赞同：0
> 
> 时间：2013-04-10T13:57:46.133
> 
> 标签：linux, shell

我想在一个文件夹中只有 txt 文件。我试过`cd folder`了`ls *.txt`。我有好的结果。但现在我想只使用一个 linux 命令来获得结果。我试过 `ls *.txt folder` 了 `cd folder| ls *.txt`。
怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:59:15.413

```
ls folder/*.txt 
```

或者

```
cd folder; ls *.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:59:21.213

您可以执行以下操作：

```
ls folder/*.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T13:59:30.853

`ls folder/*.txt`应该做的伎俩。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T14:02:21.153

您也可以使用 grep ：

```
 ls -l folder/ | grep '\.txt'$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T13:59:00.997

您必须先 cd 到该文件夹​​，然后 ls *.txt

# c# - 如何根据 web 服务 url 获取定义的方法

> ID：15927941
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:57:49.063
> 
> 标签：c#, web-services, dynamic

如何仅根据他的 url 从 web 服务中动态获取所有声明的方法？

基本上我想要与 WCF 测试客户端完全相同的东西。包含所有方法和接口的列表。

**编辑**

使用 WSDL 来获取方法是个好主意，从来没有想过。

然而，这引发了下一个问题。当我只有它的名称和服务的 url 时，如何调用方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:05:41.283

答案是[WSDL](http://en.wikipedia.org/wiki/Web_Services_Description_Language)。Web 服务客户端也使用它。

很可能有一个可以从中获取 wsdl 的 url。对于 WCF 服务，它是服务的 url (www.somesite.com\folder\servicename.svc) 加上`?wsdl`参数：

> www.somesite.com\folder\servicename.svc?wsdl

# git - 没有根文件夹的 GIT 后接收结帐

> ID：15927943
> 
> 赞同：2
> 
> 时间：2013-04-10T13:57:52.567
> 
> 标签：git

我是 git 新手，试图通过对 web 根目录进行结帐来弄清楚如何在每次推送时更新网站。我搜索了stackoverflow，只找到了关于如何克隆的主题，这不是我想要的。到目前为止，我已经设置了我的本地和远程存储库，以及一个接收后挂钩：

```
#!/bin/sh
GIT_WORK_TREE=/path/to/website/httpdocs git checkout -f 
```

我的问题是项目根文件夹包含在结帐中......当我将内容推送到远程仓库时，我最终会得到类似

```
/path/to/website/httpdocs/project_root/index.php 
```

我想要实现的是

```
/path/to/website/httpdocs/index.php 
```

签出时如何省略项目根文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:30:03.617

如果：

*   /path/to/website/httpdocs 是一个 git repo
*   /path/to/project_root 是一个git repo（即有一个`.git`目录）

然后你可以在你的`post-receive`钩子中使用：

```
git --git-dir=/path/to/project_root/.git --work-tree=/path/to/website/httpdocs checkout -f 
```

但是，如果您要推送到`project_root`，它只是一个*裸*仓库，在这种情况下，应该调用它的根目录`/project_root.git`，并且`post-receive`钩子看起来像：

```
git --git-dir=/path/to/project_root.git --work-tree=/path/to/website/httpdocs checkout -f 
```

无论如何，`project_root`必须是 git repo 的根目录。

* * *

[OP](https://stackoverflow.com/users/1295865/choppingblock) 砧板[评论](https://stackoverflow.com/questions/15927943/git-post-receive-checkout-without-root-folder/15930178#comment22764885_15927943)：

> 看来问题是由eclipse git插件（EGit）引起的，它会自动创建一个带有项目名称的根文件夹。
> 我现在通过将路径更改为`webroot`from`/path/to/website/httpdocs`来解决它`/path/to/website/httpdocs/project_root`。

# couchdb - 为什么我的 couchapp 不能生成新的应用程序？

> ID：15927946
> 
> 赞同：0
> 
> 时间：2013-04-10T13:57:59.727
> 
> 标签：couchdb, couchapp

我安装了 couchapp 使用

```
$ env ARCHFLAGS="-arch i386 -arch x86_64" sudo pip install couchapp 
```

并且没有错误。但是如果我想创建一个应用程序，

```
$ couchapp generate helloworld
$ 
```

什么都没有发生……没有创建新文件夹，也没有来自终端的反馈。

另外，当我使用

```
$ help couchapp
-bash: help: no help topics match `couchapp'.  Try `help help' or `man -k couchapp' or `info couchapp'. 
```

“man -k couchapp”也会发生同样的事情。

这是否意味着我的 couchapp 没有正确安装？但可能发生了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:58:13.130

请注意，旧的 couchapp 工具已被弃用。

试试[erica](https://github.com/benoitc/erica)或[kanso](http://kan.so/)。

# ember.js - emberjs 嵌套动态路由段返回 null 并且无法更新子记录

> ID：15927948
> 
> 赞同：0
> 
> 时间：2013-04-10T13:58:16.917
> 
> 标签：ember.js, handlebars.js, ember-router

我正在尝试实现一个**评论功能**，以显示属于单个帖子的评论列表。然后单击编辑并从属于单个帖子的所有评论中编辑任何选定的评论。

**更新[了 jsfiddle](http://jsfiddle.net/VrR2T/1/)**。

我可以创建属于所选帖子的评论，如上面的小提琴所示。**但是我无法更新现有评论，评论编辑表单甚至不会显示任何评论。它始终为空白，并且不绑定到任何现有评论。

点击 editcomment 的 url 是**posts/2/comments/undefined/edit**。这是因为 EmBlog.PostCommentRoute 和 PostEditCommentRoute 仍然返回 null。

所有被注释掉的代码都是让它工作失败的不同尝试。我把它们留在这里，所以任何看到这个问题的人都会知道我到目前为止所做的尝试。

**始终返回 null 并且最有可能导致问题的两条路线**

```
 EmBlog.PostEditCommentRoute = Ember.Route.extend({
  model: function(params) {
   var commentEdit = this.modelFor('post').get('comments');
   return commentEdit.get(params.comment_id);

   //return EmBlog.Comment.find({post: post.get('id'), id: params.comment_id});

   //var comment = this.modelFor('post').get('comments');
   //return comment.filterProperty('id', params.comment_id);  
  },

  setupcontroller: function( controller, model) {
  controller.set('content', model);
  }
}); 
```

显示单个帖子的评论路线

```
EmBlog.PostCommentRoute = Ember.Route.extend({
  model: function(params){  
     comment = this.modelFor('post').get('comments');
    // comment = EmBlog.Comment.find(params.comment_id);

    return comment.get(params.comment_id);
    // return comment.filterProperty('body', params.comment_id);
  },

  setupController: function(controller, model) {
    //var comment = this.controllerFor('postComments').get('body');
    //controller.set('content', comment.filterProperty('body', model));

    controller.set('content', model);
  },

}); 
```

这是路由器。我已经尝试过其他的嵌套组合，但选择了这个，因为它是唯一允许添加评论的版本，这就是为什么这个问题只关注更新嵌套的动态段，否则我会问这两个：

```
 EmBlog.Router.map(function() {
    this.resource("posts", {path: '/posts'}, function(){
      this.route('new');

      this.resource('post', {path: '/:post_id/'}, function(){
        this.route('edit', {path: '/edit'});
        this.route('comments', {path:  '/comments'});
        this.route('newComment');
        this.route('comment', {path: '/comments/:comment_id'});    
        this.route('editComment', {path: '/comments/:comment_id/edit'});       
     }); 
   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:40:16.497

我从小提琴下载了你的代码，发现了一些问题。

**第一的**

你不小心用下面`Ember.Router`的代替了`Ember.Route`。

```
EmBlog.PostCommentsRoute = Ember.Router.extend({
// ...
EmBlog.PostCommentRoute = Ember.Router.extend({ 
```

应该

```
EmBlog.PostCommentsRoute = Ember.Route.extend({
// ...
EmBlog.PostCommentRoute = Ember.Route.extend({ 
```

**第二**

您不需要`model`在此路由中覆盖，默认的 Ember 行为很好。您还引用`params_id`了尚未声明该变量的时间。

```
EmBlog.PostRoute = Ember.Route.extend({
  model: function(params) {
     post = this.modelFor('posts');
     return post.get(params_id);
    //return EmBlog.Post.find(params.post_id);
    //return this.modelFor('post').filterProperty('id', params.post_id);
  }, 
```

**第三**

*回应您在下面的评论*

问题是您从帖子的上下文中链接到 editComment，而不是评论本身。修复后，我还将 TextArea 更改为`model.body`而不是`body`.

[更改在此 Gist](https://gist.github.com/mutewinter/5375921)中逐项列出。现在需要实施编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:48:33.563

修改了循环。在您没有传递上下文之前，因此您在路径中变得未定义。现在您将每条评论传递给 linkTo，以便它可以生成正确的路线。这是更新的小提琴[http://jsfiddle.net/VrR2T/4/的链接](http://jsfiddle.net/VrR2T/4/)

```
<script type="text/x-handlebars" data-template-name="post/comments">
  <h1> Yes Comments template</h1>

    <p> {{#linkTo "post.newComment"}} Add comment{{/linkTo}}</p>
    <br/>
    {{#each comment in content}}
        <br/>
          {{comment.body}} <br/> 
     <p>{{#linkTo "post.editComment" comment}} Edit Comment {{/linkTo}}</p>

    {{/each}}
  {{outlet}}
</script> 
```

这是更新的表格。需要绑定到 content.body

```
<script type="text/x-handlebars" data-template-name="post/_commentForm">
   <form {{action save on='submit'}}>
{{view Ember.TextArea valueBinding="content.body" placeholder="body"}}
<button type="submit"> save comment </button> 
 <button {{action 'cancel' content}}> Cancel</button>
</form>
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:14:05.923

问题 1：我认为如果您不更改路径并将其保留为 '/:post_id' 会有所帮助

问题 2：对不起，我想我在这里帮不上忙。

# android - Android - 在 XML 中设置元素的重力

> ID：15927950
> 
> 赞同：0
> 
> 时间：2013-04-10T13:58:19.540
> 
> 标签：android, layout, center, gravity

这是 XML 代码：

```
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
    android:layout_height="wrap_content">

<RelativeLayout
        android:id="@+id/relative_layout_main"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

    <com.adsdk.sdk.banner.AdView
        android:id="@+id/ad_1"
        android:layout_width="300dp"
        android:background="#000000"
        android:layout_height="50dp"
        request_url="http://my.mobfox.com/request.php"
        publisherId="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
        android:layout_centerHorizontal="true"
        android:gravity="center"
        location="true"
        animation="true" />

    <TextView
        android:textIsSelectable="true"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:textStyle="bold"
        android:id="@+id/error_view_2"
        android:layout_marginTop="20dp"
    android:layout_below="@id/ad_1"
        android:text="@string/gen_mess_err" />    

    <TextView
        android:textIsSelectable="true"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:layout_below="@id/error_view_2"
        android:id="@+id/error_view_1" />

    <com.adsdk.sdk.banner.AdView
        android:id="@+id/ad_2"
        android:layout_width="300dp"
        android:background="#000000"
        android:layout_height="50dp"
        request_url="http://my.mobfox.com/request.php"
        publisherId="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="20dp"
        android:layout_below="@id/error_view_1"
        android:gravity="bottom"
        location="true"
        animation="true" />

</RelativeLayout> 
```

我想要的是将广告设置为一个在顶部，一个在屏幕底部，而 textview 在屏幕中央，但这不起作用。我能怎么做？

提前谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:04:25.937

为什么集合的`layout_height`属性为？应该是为了填满整个屏幕，让广告被放置在顶部和底部。`ScrollView``wrap_content``match_parent`

此外，该属性`fill_parent`已过时并且`match_parent`是其较新的值:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:14:18.457

将您的 XML 代码更改为此

`android:fillViewport must be set to true`- 当设置为 true 时，如果需要，此属性会使滚动视图的子视图扩展到 ScrollView 的高度。当 child 高于 ScrollView 时，该属性不起作用。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:fillViewport="true" >
<RelativeLayout
    android:id="@+id/relative_layout_main"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
    <com.adsdk.sdk.banner.AdView
        android:id="@+id/ad_1"
        android:layout_width="300dp"
        android:layout_height="50dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        animation="true"
        location="true"
        publisherId="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
        request_url="http://my.mobfox.com/request.php"
        android:background="#000000"
        android:gravity="center" />
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:orientation="vertical" >
        <TextView
            android:id="@+id/error_view_2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:gravity="center"
            android:text="@string/gen_mess_err"
            android:textIsSelectable="true"
            android:textStyle="bold" />
        <TextView
            android:id="@+id/error_view_1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:textIsSelectable="true" />
    </LinearLayout>
    <com.adsdk.sdk.banner.AdView
        android:id="@+id/ad_2"
        android:layout_width="300dp"
        android:layout_height="50dp"
        android:layout_alignParentBottom="true"
        android:layout_below="@id/error_view_1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="20dp"
        animation="true"
        location="true"
        publisherId="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
        request_url="http://my.mobfox.com/request.php"
        android:background="#000000"
        android:gravity="bottom" />
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:09:52.233

你这个

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    >
    <com.adsdk.sdk.banner.AdView
            android:id="@+id/ad_1"
            android:layout_width="fill_parent"
            android:background="#000000"
            android:layout_height="wrap_content"
            request_url="http://my.mobfox.com/request.php"
            publisherId="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
            android:layout_centerHorizontal="true"
            android:gravity="center"
            location="true"
            animation="true"  />

    <ScrollView
            android:id="@+id/relative_layout_main"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical"
            >

    <TextView
            android:textIsSelectable="true"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:textStyle="bold"
            android:id="@+id/error_view_2"
            android:layout_marginTop="20dp"
            android:text="string/gen_mess_err" />

    <TextView
            android:textIsSelectable="true"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:id="@+id/error_view_1" />
    </ScrollView>

    <com.adsdk.sdk.banner.AdView
            android:id="@+id/ad_2"
            android:layout_width="fill_parent"
            android:background="#000000"
            android:layout_height="wrap_content"
            request_url="http://my.mobfox.com/request.php"
            publisherId="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
            android:layout_marginTop="-51dp"
            android:gravity="bottom"
            location="true"
            animation="true"
            /> 
```

希望它的帮助。

# java - 实体计数在实体获取之前不会更新

> ID：15927951
> 
> 赞同：0
> 
> 时间：2013-04-10T13:58:20.990
> 
> 标签：java, google-app-engine

我在 GAE 数据存储区实验中发现了一些相当奇怪的东西。我正在使用 GAE SDK 1.7.5。而且我不确定我的发现是否正确。

基本上，我发现将实体放入数据存储区并进行计数不会返回正确的值，直到执行数据存储区获取。

如果您想深入挖掘，这里是我之前的 SO 问题中的实际代码：

[高复制环境的持久性策略（Google App Engine）](https://stackoverflow.com/questions/15922277/persistence-strategies-for-high-replication-environment-google-app-engine)

我也尝试了一个类似的库：[https ://github.com/koher/Koherent-App-Engine-Library-for-Java](https://github.com/koher/Koherent-App-Engine-Library-for-Java)

我正在经历同样的发现。谁能帮我澄清一下我看到的这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:21:26.383

我假设您在启用最终一致性的本地开发服务器上获得此结果？

由于数据存储的最终一致性行为，您没有得到正确的计数。它就是这样儿的。

在开发服务器上，像 get() 这样的一致操作将导致后续查询显示一致的结果。这与生产服务器的行为不太一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:53:35.093

您遇到了 HRD 的最终一致性属性。

Count 使用索引来获取结果。新实体保存后，索引是异步建立的，导致`get`after`put`总是返回结果（强一致性），但`query`不`put`保证立即返回结果（最终一致性）。

文档在这个主题上有点含糊，但它确实提到`get`在`put`强制“应用”阶段之后，可能会导致索引也被应用：请参阅第 1 点。在“[数据存储写入的生命周期](https://developers.google.com/appengine/articles/life_of_write)”的“返回值”部分。

So `put`and then`query`不能保证给您预期的结果，但是`put`, `get`and`query`是（至少我是这样阅读文档的）。这可以解释你的发现。

# xquery - 如何订购刻面？

> ID：15927957
> 
> 赞同：0
> 
> 时间：2013-04-10T13:58:31.160
> 
> 标签：xquery, marklogic

我需要安排`facets`为（`fc=Type, Topic, Year, Editor`）

但是方面的顺序是基于命名概念为`Editor, Topic, Type, Year`（按名称升序排列）

我应该用什么方式订购它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:55:57.873

我找到了订购方面的解决方案：

```
declare variable $par as element() :=  <params xmlns="http://www.marklogic.com/apa/params">
<fc>Type,Topic,Year,Editor</fc>
<start>0</start>
<rows>10</rows>
<debug>false</debug>
<results>true</results>
<facet>true</facet> 
</params>;

let $data := "xml data in search:search format"
let $spans := xs:string($params/p:fc)              
let $value := fn:tokenize($spans,",")
let $fc := for $x in $value
           return $val
let $facet := $data/search:facet
let $facets := for $facetValue in $facet
               let $label := fn:string($facetValue/@name)
               let $value := fn:tokenize($label,"L")
               order by fn:index-of($fc, $value)
               return $facetValue
return $facets 
```

现在，`$spans`我们得到用户给出的分面值，并使用`$data`我们得到数据中的分面值。然后通过使用变量`$facets`，我们按指定的顺序排列它们。

# iphone - 裁剪的图像在 iPhone 中被放大？

> ID：15927961
> 
> 赞同：2
> 
> 时间：2013-04-10T13:58:34.210
> 
> 标签：iphone, ios, objective-c, ipad

我有一个应用程序，在其中我将（360,480）的图像缩放到（320,480），然后裁剪图像。它工作正常。但是当我们得到图像时，它会得到一点缩放类型的图像。投影到前面。这就是我的做法。

```
[self imageWithImage:(UIImage *)image scaledToSize:CGSizeMake(160.0f,240.0f)]; 
```

我的辩解是——

```
-(UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize {
    //UIGraphicsBeginImageContext(newSize);
    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();    
    UIGraphicsEndImageContext();

    [self cropimage:newImage];
    return newImage;
} 
```

在cropimage中我这样做 -

```
-(void)cropimage:(UIImage *)image
{

   CGRect cropRect = CGRectMake(20,100,280,200);
     CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], cropRect);
    UIImage* croppedImage = [UIImage imageWithCGImage:imageRef];
         CGImageRelease(imageRef);

    NSData *pictureData = [NSData dataWithData:UIImagePNGRepresentation(croppedImage)];
} 
```

任何人都可以找出我的方法有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T17:52:24.127

尝试为比例传递 image.scale 而不是 0.0 以强制它使用传入的图像比例。

```
-(UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize {
    //UIGraphicsBeginImageContext(newSize);
    UIGraphicsBeginImageContextWithOptions(newSize, NO, image.scale);
    [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();    
    UIGraphicsEndImageContext();

    [self cropimage:newImage];
    return newImage;
} 
```

# android - 用于下载 Android APK 扩展文件的应用程序语义

> ID：15927963
> 
> 赞同：1
> 
> 时间：2013-04-10T13:58:36.020
> 
> 标签：android, apk, apk-expansion-files

在“下载过程”部分下的[http://developer.android.com/google/play/expansion-files.html中，第 3 步显示](http://developer.android.com/google/play/expansion-files.html)

“当用户启动您的应用程序时，您的应用程序必须检查扩展文件是否已保存在设备上”

是否有任何理由（例如框架限制或线程）在启动时执行此检查？我可以延迟此检查/下载，直到我知道我需要 APK 扩展文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:16:13.787

如果您的应用需要这些文件，则您需要检查这些文件，但如果它们是您的应用的可选部分并且用户不需要立即查看扩展文件的内容，则不需要。

扩展文件是 Google 限制 APK 文件最大大小的一种解决方法。如果您有大型媒体文件等，您只需要使用扩展文件。在您引用的文档中，谷歌表示它不能保证扩展文件将与应用程序同时交付，并且应用程序因此，在使用它们之前必须检查任何所需的扩展文件。如果应用程序运行需要这些文件，则应用程序还必须能够启动这些文件的下载（通过 HTTP）。如果您的应用程序必须有这些文件才能运行，那么您需要在启动时检查它们、启动下载、告诉用户发生了什么等等。

# c# - 清理字符串以防止相对 URI 路径

> ID：15927972
> 
> 赞同：6
> 
> 时间：2013-04-10T13:59:02.037
> 
> 标签：c#, asp.net, security, httphandler, sanitize

我创建了这个 HTTP 处理程序来更新本地 SQL Express 数据库中的信息。

我意识到用户可以使用相对 URI 路径“/../../file.zip”作为查询字符串，并且能够在受限区域之外下载文件。

该站点尚未上线，因此现在不是安全问题，但我真的很想阻止这样的事情。

我添加了一个简单的 string.replace 行，从输入查询中删除任何“..”。

我还应该在这里做些什么来确保这一点？

```
public void ProcessRequest(HttpContext context)
{
    string filesPath = "C:/Downloads/";
    string fileName = context.Request.QueryString["filename"];
    fileName = fileName.Replace("'", "''").Replace("..", "").Replace("/", "").Replace("\\", "");

    if (!string.IsNullOrEmpty(fileName) && File.Exists(filesPath + fileName))
    {
        context.Response.ContentType = "application/octet-stream";
        context.Response.AddHeader("Content-Disposition", string.Format("attachment; filename=\"{0}\"", fileName));
        context.Response.WriteFile(filesPath + fileName);
        //Do work to update SQL database here
    }
    else
    {
        context.Response.ContentType = "text/plain";
        context.Response.Write(filesPath + fileName + " Invalid filename");
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T14:59:31.657

我通常使用这个简单的代码来检查这个问题：

（我直接输入，可能编译不出来，只是给你个思路）

```
private string getPath(string basePath, string fileName)
{
    var fullPath = System.IO.Path.GetFullPath(System.IO.Path.Combine(basePath, fileName));
    if (fullPath.StartsWith(basePath))
        return fullPath;
    return null;
} 
```

目标是使用`Path.GetFullPath`. 此方法会将任何 /../ 等转换为完整路径。然后检查返回的路径是否在允许的目录中。
请注意，此方法可能会返回与预期略有不同的路径，请阅读[MSDN](http://msdn.microsoft.com/en-us/library/system.io.path.getfullpath.aspx)了解详细说明

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:18:27.380

您`Request.QueryString["filename"]`实际上可能是代表文件的键。如果您不希望用户能够轻松猜测文件密钥，则密钥可以是数字或随机字符串。您可以将映射存储在数据库中，并使用密钥来检索本地文件名（如果您想让两者不同并真正隐藏您的实现细节，则可能是显示文件名）。

# html - 将较宽的 div 居中在较窄的 div 中

> ID：15927973
> 
> 赞同：4
> 
> 时间：2013-04-10T13:59:03.477
> 
> 标签：html, css

```
<div id="narrow">
   <div id="wide">
   </div>
</div> 
```

我有一个 div，里面还有一个比父级更宽的 div。

`#narrow`div 的宽度是可变的，div`#wide`的宽度是固定的。

如何在 div 中居中`#wide`div`#narrow`以便**在**`#narrow`给定时修剪 #wide div 的左侧和右侧`overflow:hidden`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:09:00.523

`position: absolute`您可以通过使用然后使用负数将其居中定位来居中宽 div `margin-left`。请注意，这仅在元素具有固定宽度时才有效。

[**JS-小提琴**](http://jsfiddle.net/Rwy5T/5/)

```
#narrow {
    position: relative;
    width: 200px; //may be variable
}

#wide {
    position: absolute;
    top: 0;
    left: 50%;
    margin-left: -150px; // half the width
    width: 300px; // must be fixed
} 
```

要隐藏在狭窄 div 上流动的部分，您可以使用`overflow: hidden`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T14:02:19.333

使用 css 很容易：

`#narrow {overflow: hidden;}`

# mysql - 如何通过拆分一个字段并重复其他字段来将记录解析为两个

> ID：15927975
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:59:09.977
> 
> 标签：mysql, sql, parsing

我有下表：

我有下表：

```
Patent      AssigneeName                        AssigneeUnparsed
-------     --------------                      ---------------
D452605     Louis Vuitton Malletier, S.A.       Paris_None_FR
D452606     Nike, Inc.                          Beaverton_OR_US
D452607     Salomon S.A.; First Technology      Metz-Tessy_None_FR 
```

在某些情况下，受让人名称字段中有两个受让人名称，它们用 ; 分隔。

有没有办法让 MySQL 在发生时将它们分开，然后重复新记录中其他字段的所有数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:04:31.033

如果您最多可以有两个受让人姓名，我会使用一个 INSERT 查询，然后是一个 UPDATE 查询，它使用[SUBSTRING_INDEX](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_substring-index)，如下所示：

```
INSERT INTO yourtable
SELECT Patent, TRIM(SUBSTRING_INDEX(AssigneeName, ';', -1)), AssigneeUnparsed
FROM yourtable
WHERE AssigneeName LIKE '%;%';

UPDATE yourtable
SET AssigneeName = TRIM(SUBSTRING_INDEX(AssigneeName, ';', -1))
WHERE AssigneeName LIKE '%;%'; 
```

请[在此处](http://sqlfiddle.com/#!2/a7001/1)查看小提琴。

# search - 如何使用 vim 的 'f' 命令（查找）来查找下一个选项卡

> ID：15927984
> 
> 赞同：11
> 
> 时间：2013-04-10T13:59:25.250
> 
> 标签：search, vim, find

我一直使用 vim 的 f 命令，但我不知道如何找到特殊字符（如制表符）。例如，点击`f\t`搜索`\`. 我知道您可以将二合字母与`f`命令结合使用，但我认为制表符没有二合字母。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-10T14:01:48.753

只需键入`f`，然后按一下`Tab`键。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T14:03:04.213

由于历史和技术原因，`<C-i>`您`<Tab>`可以使用`f<C-i>`.

# visual-studio-2010 - 将现有服务引用文件夹包含到 Visual Studio 2010 中的项目中

> ID：15927987
> 
> 赞同：5
> 
> 时间：2013-04-10T13:59:35.310
> 
> 标签：visual-studio-2010, wcf, visual-studio, msbuild

我的本地驱动器中有一堆服务引用，我想将它们包含在 Visual Studio 2010 项目中。

但是，当我选择“在项目中包含”命令时，它们会作为文件夹包含在内，并且我找不到告诉 Visual Studio 它们是服务引用的方法。

有没有办法做到这一点？诸如包含现有服务参考之类的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T14:09:29.310

我必须手动编辑项目 xml 并为每个服务器引用添加如下节点：

```
<ItemGroup>
 <WCFMetadataStorage Include="Service References\NameOfYourReference\" />
 <WCFMetadataStorage Include="Service References\NameOfYourOtherReference\" />
 //more services
</ItemGroup 
```

我还需要更改 Reference.cs 编译节点，因为当我在项目中包含该文件夹时，VS2010 似乎自动生成了一个 Reference1.cs 文件。所以我不得不从 xml 中删除 Reference1.cs 并确保以下 XML：

```
<Compile Include="Service References\NameOfYourReference\Reference.cs">
  <AutoGen>True</AutoGen>
  <DesignTime>True</DesignTime>
  <DependentUpon>Reference.svcmap</DependentUpon>
</Compile> 
```

这似乎需要大量的手动工作，但正如我所说的那样，有很多服务，所以对我来说，这比通过 VS 对话框再次添加所有引用要好

# javascript - 使用 Javascript 或 Jquery 将 html 标记或类添加到特定单词，而不针对图片的 Alts 和 Titles

> ID：15927989
> 
> 赞同：-2
> 
> 时间：2013-04-10T13:59:41.230
> 
> 标签：javascript, jquery, html, class, tags

前段时间，我请求帮助自动更改我网站的某些重复名称并使其变为斜体。在您的帮助下，我设法使用此脚本完成了我想做的事情：

```
function change() {
    var words = new Array("Nymphaea", "Nelumbo", "Iris", "Hemerocallis", "Hibiscus");
    var html = document.body.innerHTML;
    for(var i = 0; i < words.length; i++) {
        var reg = new RegExp(words[i], 'g');
        var html = html.replace(reg, "<i>"+words[i]+"</i>");
    }
    document.body.innerHTML = html;
}
change(); 
```

不幸的是，我刚刚意识到我仍然有问题，因为所有图片都显示带有标签的标题。例如，如果 html 是：

```
<a href="......../nymphaea-alba-var-rubra.jpg" title="&lt;i&gt;Nymphaea&lt;/i&gt; alba var. rubra"><img src="/wp-uploads/gallery/nursery/nymphaea-alba-var-rubra.th.jpg" alt="&lt;i&gt;Nymphaea...&lt;/i&gt; alba var. rubra" /> </a> 
```

图片显示一个标题，如<i> Nymphaea</i> alba var。鲁布拉。任何人都可以帮我完善代码，以免标题和替代品成为目标吗？我会很感激。

提前致谢

恩里科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:36:57.140

您可以在修改后的 HTML 上运行正则表达式以删除 title 和 alt 属性中的任何斜体标签，如下所示：

```
function change() {
    var words = new Array("Nymphaea", "Nelumbo", "Iris", "Hemerocallis", "Hibiscus");
    var html = document.body.innerHTML;
    for(var i = 0; i < words.length; i++) {
        var reg = new RegExp(words[i], 'g');
        var html = html.replace(reg, "<i>"+words[i]+"</i>");
    }
    html = html.replace(/([title|alt]=".*?)<i>(.*?)<\/i>(.*?")/gm, '$1$2$3');
    document.body.innerHTML = html;
}
change(); 
```

# c# - WPF：DataGrid排序数据时显示窗口

> ID：15927991
> 
> 赞同：0
> 
> 时间：2013-04-10T13:59:53.167
> 
> 标签：c#, wpf, datagridcolumnheader

客户端单击datagridcolumnheader时是否可以打开带有进度条的窗口？我有很多数据网格，所以这将是整个 dg 的一种方法，所以我创建了方法：

```
namespace myApp
{
    partial class ColumnClick 
    {
        void columnHeader_Click(object sender, RoutedEventArgs e)
        {
            MessageBox.Show("Colum Clicked");
        }
    }
} 
```

在资源文件中：

```
x:Class="myApp.ColumnClick" 
```

加

```
 <Style TargetType="{x:Type DataGridColumnHeader}"  >
        <EventSetter Event="DataGridColumnHeader.Click" Handler="columnHeader_Click"></EventSetter>
    </Style> 
```

但我仍然收到如下错误：

```
'Set property 'System.Windows.ResourceDictionary.DeferrableContent' threw an exception.' Line number '4' and line position '21'. 
```

Resources.xaml 中的错误点行“x:Class="myApp.ColumnClick"。

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:01:04.640

我建议您使用WPF Extended Toolkit 中的[BusyControl](http://wpftoolkit.codeplex.com/wikipage?title=BusyIndicator&referringTitle=Home)。

# jquery - jquery无法从js文件正常工作

> ID：15927993
> 
> 赞同：0
> 
> 时间：2013-04-10T13:59:53.533
> 
> 标签：jquery

我有以下 jquery 脚本来计算框中的字符

```
$('#myfield').keyup(function () {
    var left = 250 - $(this).val().length;
    if (left < 0) {
        left = 0;
    }
    $('#counter').text('put: ' + left);
}); 
```

如果我把这段代码放在它工作的字段之后，但我想把它外部化到一个 js 文件中。所以我把它复制到 myscript.js 中，然后这样做：

```
 <script language="JavaScript" type="text/javascript" src="script/myscript.js"></script> 
```

并且它有效...问题是这个对 myscript.js 的调用只有在我在字段之后的同一个位置（位于页面底部）声明它时才有效..但我想将它包含在顶部对于所有其他 js 调用，如果我这样做，这将不起作用，因为我会得到一个**"'null' is null or not an object"**。

所以我尝试将它包含在准备好的文档中，但即使我没有收到错误，也没有任何事情发生，因为......该函数似乎没有被执行。

```
$(document).ready(function(){
//function here
}); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:03:49.780

你的选择器应该是`$('#myfield')`，不是`$('$myfield')`。并将其保存在文档准备功能中。

* * *

***编辑：***

无论是在外部 JS 文件中还是在同一个文件中，都不应该有任何区别。包含该代码的位置*确实*有所不同。我通常将我所有的 JS 脚本包含在`<head>`. 它应该被包裹起来，`$(function() { ... });`这样它就不会在 DOM 加载之前执行。

看看[这个 jsFiddle](http://jsfiddle.net/Uw6jS/)。请注意，如果您在 onDomready/onLoad/No wrap - head/No wrap - body 之间更改左侧框架中的下拉菜单，则无论代码是否有效，都会改变。如果将其设置为 onDomready，则生成的代码如下所示，它可以工作：

```
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title> - jsFiddle demo</title>
        <script type="text/javascript" src="//code.jquery.com/jquery-1.9.1.js"></script>
        <link rel="stylesheet" type="text/css" href="/css/result-light.css">
        <script type="text/javascript">
        $(function(){
            $('#myfield').keyup(function () {
                var left = 250 - $(this).val().length;
                if (left < 0) {
                    left = 0;
                }
                $('#counter').text('put: ' + left);
            });
        });
        </script>
    </head>
    <body>
        <input type="text" id="myfield">
        <p id="counter">put: 246</p>
    </body>
</html> 
```

请记住，JS 代码直接在头部而不是在外部 JS 文件中这一事实对于本示例应该没有区别。如果您将该`<script>`标记替换为具有相同 JS 代码的外部包含，并将其留在同一个地方，它的工作原理是一样的。

如果这仍然对您不起作用，那么我建议您自己制作一个 jsFiddle 来展示您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:04:49.043

您面临的问题是，当代码位于 HTML 文件中时，它会在呈现字段后执行，但当代码位于文件中时，情况不再如此。

`keyup`因此，要解决此问题，您应该仅在确定该字段已插入 DOM 后设置您的事件。

通常这是通过将您的代码与`$(document).ready()`事件处理程序封装在一起来完成的，如下所示：

```
$(document).ready(function(){
    $('#myfield').keyup(function () { // note #myfield instead of $myfield
        var left = 250 - $(this).val().length;
        if (left < 0) {
            left = 0;
        }
        $('#counter').text('put: ' + left);
    });
}); 
```

这将确保您的代码在文档中的所有元素都呈现后运行并且您可以与它们进行交互。

您可能还想查看[ready()](http://api.jquery.com/ready/)的 jQuery 文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:05:33.193

1.  我猜是#myfield
2.  在底部加载javascript总是更好
3.  这是

    $(文档).ready(函数(){}

# c++ - .sln 文件未生成

> ID：15927994
> 
> 赞同：0
> 
> 时间：2013-04-10T13:59:56.480
> 
> 标签：c++, configuration, build, cmake

我有一个带有逻辑文件夹的 cpp 项目。现在我想在视觉工作室从事这个项目。所以我写了一个cmakelist，比如：

```
project(myapp)
cmake_minimum_required(VERSION 2.8)
file(GLOB myapp_SRC
    "*.h"
    "*.cpp"
)

add_executable(myapp ${myapp_SRC}) 
```

但是在构建目录配置后，只生成一个名为 CMakeCache 的文件和一个名为 CMakeFiles 的目录？出了什么问题？我是 CMake 的初学者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:13:56.937

可能 CMake 不了解您的 Visual Studio，请尝试以下操作：

```
cmake . -G "VisualStudioVersion" 
```

VisualStudioVersion 应替换为下面列出的版本之一（考虑到您使用的是最后一个 CMake 版本）：

```
 Visual Studio 10           
  Visual Studio 10 IA64      
  Visual Studio 10 Win64     
  Visual Studio 11           
  Visual Studio 11 ARM       
  Visual Studio 11 Win64     
  Visual Studio 6            
  Visual Studio 7            
  Visual Studio 7 .NET 2003  
  Visual Studio 8 2005       
  Visual Studio 8 2005 Win64 
  Visual Studio 9 2008       
  Visual Studio 9 2008 IA64         
  Visual Studio 9 2008 Win64 
```

...另外，不要忘记您应该打开 Visual Studio 命令提示符，而不是正常的 cmd.exe（或者您应该导出所有环境变量）。

# struts2 - 需要在动作类中设置的Javascript中使用列表

> ID：15927995
> 
> 赞同：0
> 
> 时间：2013-04-10T13:59:59.970
> 
> 标签：struts2, struts2-jquery

我在**struts2**中创建双选框，当我在第一个选择框中选择国家时，它会在第二个选择框中根据国家/地区获取城市。在我`onchange event`的第一个选择框的 JS 函数中，我通过使用 ajax 发送方法传递选定的值并发送数据到操作，基于我在我的操作类方法中创建一个城市列表的事实。那么如何访问 Javascript 中的列表，以便将其设置为第二个选择框？

这是我的代码：

```
<script>
function loadCity(str) {
  var xmlhttp;
  if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
  } else { // code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.open("GET", "loadcity.action?country=" + str, true);
  xmlhttp.send();
  var dat = document.getElementById("cityList").value.toString();
  window.alert(dat);
} 
</script>                                                                                      

<s:select name="country" id="country" list="countryList" label="country" onchange="loadCity(this.value)">
</s:select>
<s:select name="city" label="City" id="cityList" list="cityList">
</s:select> 
```

这是我的动作类方法：

```
public String loadcity() {
  cityList = new ArrayList();
  cityList.add("New Delhi");
  cityList.add("Mumbai");
  cityList.add("Moradabad");
  setCityList(cityList);
  return NONE;
} 
```

这里`cityList`有正确的值，但是当我在我的 JS 函数中使用它时，它显示为`null`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:13:45.567

您没有提供太多信息，但是：`NONE`从操作方法返回意味着不会发生进一步的处理，也不会返回任何结果。

您实际上也没有*做*任何会导致第二个选择框被修改的事情；如果您想滚动您自己的基于 Ajax 的双选，您需要编写 JavaScript 来实际对操作结果*执行*某些操作。如何做到这一点的例子不胜枚举。

顺便说一句，您可能希望使用 JSON 结果来使事情变得更容易一些。

更简单的是，使用[S2 jQuery 插件](https://code.google.com/p/struts2-jquery/)，其中包含一个[基于 Ajax 的双选示例](https://code.google.com/p/struts2-jquery/wiki/SelectTag#A_simple_Doubleselect_with_Topics)。

IMO 在原始 JS 中手动执行 Ajax 是徒劳的。

# mongodb - 现在缺少 Mongodb 升级集合

> ID：15927996
> 
> 赞同：1
> 
> 时间：2013-04-10T14:00:02.107
> 
> 标签：mongodb, homebrew

我对 Mongodb 非常陌生，如果这是一个愚蠢的问题，我深表歉意。

我安装了 Mongodb 并尝试创建一些集合等。然后我想尝试一些聚合函数，但发现我需要升级。

我用自制软件升级，升级似乎工作正常，但是当我启动 mongod 和 mongo 时，我再也看不到我的收藏了。我尝试使用 --upgrade 选项启动 mongod，但仍然没有乐趣。当我调用“show dbs”时，它表明我的测试数据库是空的。

很好奇这里发生了什么以及如何恢复这些收藏品。

# jsp - Firefox 调用 url

> ID：15927998
> 
> 赞同：2
> 
> 时间：2013-04-10T14:00:06.683
> 
> 标签：jsp, firefox, gwt, base

在一个客户的网站上，古时候有人在`<base>`超级父磁贴定义中放置了一个 -tag，这简直是奇怪的。它只是指自己，可以说它`basicTileLayout.jsp`正在发布一个标签：

```
<base href="http://site.com/layout/basicTileLayout.jsp" /> 
```

在头上。

该网站现在主要是 GWT。无论如何，由于某些奇怪的原因，Firefox 和只有 Firefox 有时会在例如单击 DOM 中看起来像这样的 GWT 生成的链接时对这个基本 URL 进行 ajax 调用：

```
<a class="gwt-Anchor" href="javascript:;">Read more</a> 
```

我的第一个想法是，它可能是一些在 FF 中工作方式不同的事件冒泡，并且可能有一些 href="" 在其他浏览器中的 GWT 事件处理阻止时被调用。但是，删除 base-tag 可能会产生一个 GET 到应用程序基本上下文路径（“/”），对吧？这不会发生。所以似乎这个基本标签的存在会触发 FF 进行调用。

我要问的原因是这是一个超级全局 chrome-tile，因此删除基本标签会改变整个网站上的每个相对 href。我很想这样做，但只是有点害怕:)

**更新：**

我做了一些 GWT 谷歌搜索，发现了这个与 IE 相关的东西：

[https://code.google.com/p/google-web-toolkit/issues/detail?id=5280](https://code.google.com/p/google-web-toolkit/issues/detail?id=5280)

我浏览了代码并注意到它似乎只发生在使用 GWT:s Anchor 生成的链接上，而没有从事件处理程序对事件调用 preventDefault。

猜测可能是 Firefox 可能会对 unloadEvent 上的 base-url 执行此 GET 操作，因为我们不会阻止默认设置。但是，为什么只有在我无法理解的基本标签时才会对 url 进行 ajax 调用。

**更新 2：**

我尝试在 click 事件上调用 preventDefault ，但这没有帮助。如果存在基本标签，则 FF 获取该 url，如果没有，则不会发生任何不好的事情。

任何指针高度赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:02:34.663

原来这是由空的 img-tags 引起的：

```
<img src="" class="gwt-Image"> 
```

显然，如果有一个`<base>`in head，Firefox 实际上只会使用它与这个空的 src-attribute 连接，因此对 base 中的 url 进行 GET。没有 webkit 浏览器，IE 也没有。

这可能是正确的做法。我将参考我在 FF 上读到的问题： [https ://bugzilla.mozilla.org/show_bug.cgi?id=444931](https://bugzilla.mozilla.org/show_bug.cgi?id=444931)