# StackOverflow 问答 15778000-15778999

# c++ - 如何在 Mac OS X 上使用 C++ 扫描 Wifi 接入点

> ID：15778000
> 
> 赞同：2
> 
> 时间：2013-04-03T02:43:21.657
> 
> 标签：c++, macos, network-programming, wifi, firebreath

**我需要在C++中的****Mac OS X** Linux 中扫描并收集有关本地**Wifi**接入点的信息。这可能使用或类似的东西。我有类似的代码在 Windows 中工作，不可能被翻译。****`Wlan``WlanScan`****

 ****此代码正在 FireBreath 开发项目中构​​建。

您有在 Mac 上用 C++ 扫描 Wifi 接入点的示例或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:13:34.373

你不能在普通的 C++ 中做到这一点，但你可以使用 Objective-C++（你的源文件只需要有 .mm 扩展名，你可以在你的 C++ 代码中使用 Objective-C）。看看[CoreWLAN](http://developer.apple.com/library/mac/#documentation/Networking/Reference/CoreWLANFrameworkRef/_index.html)框架。你应该这样写：

```
#import <CoreWLAN/CoreWLAN.h>

struct AccessPoint
{
    string ssid;
    string bssid;
    int rssi;
};

vector<AccessPoint> ScanAir(const string& interfaceName)
{
    NSString* ifName = [NSString stringWithUTF8String:interfaceName.c_str()];
    CWInterface* interface = [CWInterface interfaceWithName:ifName];

    NSError* error = nil;
    NSArray* scanResult = [[interface scanForNetworksWithSSID:nil error:&error] allObjects];
    if (error)
    {
        NSLog(@"%@ (%ld)", [error localizedDescription], [error code]);
    }

    vector<AccessPoint> result;
    for (CWNetwork* network in scanResult)
    {
        AccessPoint ap;
        ap.ssid  = string([[network ssid] UTF8String]);
        ap.bssid = string([[network bssid] UTF8String]);
        ap.rssi = [network rssiValue];
        result.push_back(ap);
    }

    return result;
} 
```

我没有测试这段代码，但我在我的项目中使用了类似的代码，所以它应该可以工作。另请注意，我在这里使用 ARC。如果您遇到一些错误 - 请随时在评论中提问。
苹果文档中也有[示例](http://developer.apple.com/library/mac/#samplecode/CoreWLANWirelessManager/Introduction/Intro.html)，但它有些过时（适用于 OS X 10.6）。OS X 10.7 有一些变化。

请注意，CoreWLAN 框架需要 OS X 10.6 或更高版本。****

# android - KeyEvent.KEYCODE_VOLUME_UP(DOWN) 记录双击

> ID：15778008
> 
> 赞同：3
> 
> 时间：2013-04-03T02:44:00.973
> 
> 标签：android, button, volume

我有一个简单的应用程序，我在其中执行以下操作：

```
public void onClick(View v){

    switch(v.getId()) {     
        case R.id.buttonup:
            onButtonUp();
            break;

        case R.id.buttondown:
            onButtonDown();
            break;
    }

}

public boolean dispatchKeyEvent(KeyEvent event){
        int keyCode = event.getKeyCode();
        switch (keyCode) {

        case KeyEvent.KEYCODE_VOLUME_UP:
             onButtonUp();
             return true;
        case KeyEvent.KEYCODE_VOLUME_DOWN:
            onButtonDown();
            return true;

        default:
            return super.dispatchKeyEvent(event);

        }

    }

void onButtonUp(){
    increment_some_static_class_variable;
}

void onButtonUp(){
    decrement_some_static_class_variable;
} 
```

问题是，每当我按下音量按钮时，onButtonUp 和 onButtondown 函数都会被调用两次。当我按下屏幕按钮（在 onClick(View) 中处理）时，不会发生这种情况。我没有发现有人有这个问题，所以我问这里的人。我是 Android 新手，这是我的第一个应用程序。使用 Log，我发现对 onButtonUp 和 onButtonDown 的调用都来自 dispatchKeyEvent 函数。这里有什么问题？我希望我能很好地解释这个问题。建议/解决方案是最受欢迎的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T02:59:52.860

KeyEvent 可以表示多个动作，特别是 ACTION_DOWN 和 ACTION_UP。由于您没有在 dispatchKeyEvent 回调中检查操作，因此您正在为音量按钮上的 DOWN 和 UP 事件调用按钮单击方法。试试这样：

```
public boolean dispatchKeyEvent(KeyEvent event){
    int keyCode = event.getKeyCode();
    if(event.getAction() == KeyEvent.ACTION_DOWN){
        switch (keyCode) {

            case KeyEvent.KEYCODE_VOLUME_UP:
                 onButtonUp();
                 return true;
            case KeyEvent.KEYCODE_VOLUME_DOWN:
                onButtonDown();
                return true;

            default:
                return super.dispatchKeyEvent(event);
        }
    }
} 
```

# python - Python 跟踪和分析

> ID：15778012
> 
> 赞同：1
> 
> 时间：2013-04-03T02:44:32.323
> 
> 标签：python, profile, trace

我正在寻找同时分析和跟踪 python 代码。我见过 python trace 和 traceback 类，也见过 python Cprofiler 和 profiler 类。

跟踪库不包含有关函数运行时间或内存量的信息，Cprofiler 库不显示每次调用该函数所花费的时间，也不显示应用程序的流路径，例如跟踪如何。我正在寻找类似于 xdebug for php 的东西。

蟒蛇 <= 2.6

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:42:42.383

你看过了吗，[这里](http://docs.python.org/2/library/profile.html#calibration)`profile`的文档

也看看[这里](http://wiki.python.org/moin/PythonSpeed/PerformanceTips#Visualizing_Profiling_Results)：

可视化分析结果

**RunSnakeRun**是 Mike Fletcher 的一个 GUI 工具，它使用方形地图可视化来自 cProfile 的配置文件转储。函数/方法调用可以根据各种标准进行排序，源代码可以显示在可视化和调用统计旁边。

一个示例用法：

```
runsnake some_profile_dump.prof 
```

**Gprof2Dot**是一个基于 python 的工具，可以将分析结果输出转换为可以转换为 PNG 图像或 SVG 的图形。

python 2.5 的典型分析会话如下所示（在旧平台上，您需要使用实际脚本而不是 -m 选项）：

```
python -m cProfile -o stat.prof MYSCRIPY.PY [ARGS...]
python -m pbp.scripts.gprof2dot -f pstats -o stat.dot stat.prof
dot -ostat.png -Tpng stat.dot 
```

**PyCallGraph** pycallgraph 是一个 Python 模块，它为 Python 程序创建调用图。它生成一个 PNG 文件，显示模块的函数调用及其与其他函数调用的链接、函数被调用的次数以及在该函数中花费的时间。

典型用法：

```
pycallgraph scriptname.py 
```

**PyProf2CallTree**是一个脚本，可帮助使用 kcachegrind 图形调用树分析器可视化使用 cProfile python 模块收集的分析数据。

典型用法：

```
python -m cProfile -o stat.prof MYSCRIPY.PY [ARGS...]
python pyprof2calltree.py -i stat.prof -k 
```

# java - 无法在 android Activity 布局 XML 文件中实例化自定义类

> ID：15778013
> 
> 赞同：0
> 
> 时间：2013-04-03T02:44:36.530
> 
> 标签：java, android, xml, eclipse, github

所以我的 XML 看起来像这样：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".Calendar" >

<com.fortysevendeg.android.swipelistview.SwipeListView
    xmlns:swipe="http://schemas.android.com/apk/res-auto"
    android:id="@+id/example_lv_list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:listSelector="#00000000"
    swipe:swipeActionLeft="reveal"
    swipe:swipeActionRight="reveal"
    swipe:swipeAnimationTime="10"
    swipe:swipeBackView="@+id/back"
    swipe:swipeCloseAllItemsWhenMoveList="true"
    swipe:swipeFrontView="@+id/front"
    swipe:swipeMode="right"
    swipe:swipeOffsetLeft="80dip"
    swipe:swipeOffsetRight="80dip"
    swipe:swipeOpenOnLongPress="false" />

</RelativeLayout> 
```

但是，当我在 Eclipse 中进入图形视图时，我收到此错误：

> 找不到以下类： - com.fortysevendeg.android.swipelistview.SwipeListView（修复构建路径、编辑 XML、创建类）

在 Eclipse 中，在我的包资源管理器窗口中，我有 3 个包。

*   android-swipelistview-master
*   我的应用程序
*   库（android-swipelistview-master 的依赖项）

它看起来像这样：[屏幕截图](http://i.imgur.com/0ipZmIA.png)

奇怪的是，我在 android-swipelist-view-master 和库包中都没有任何错误。唯一的警告是针对未使用的变量，如果在其他地方使用它，我会犹豫是否要删除它。我想我只是没有正确实例化它？我不知道。这个我想不通！

[这](http://i.imgur.com/Ad2kCdb.png)是 myApp 包属性 > Android 设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:00:48.703

正确引用所有库后，我将 XML 更改为引用 SwipeListView，如下所示：

```
<main.java.com.fortysevendeg.android.swipelistview.SwipeListView
    xmlns:swipe="http://schemas.android.com/apk/res-auto"
    android:id="@+id/example_lv_list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:listSelector="#00000000"
    swipe:swipeActionLeft="reveal"
    swipe:swipeActionRight="reveal"
    swipe:swipeAnimationTime="10"
    swipe:swipeBackView="@+id/back"
    swipe:swipeCloseAllItemsWhenMoveList="true"
    swipe:swipeFrontView="@+id/front"
    swipe:swipeMode="right"
    swipe:swipeOffsetLeft="80dip"
    swipe:swipeOffsetRight="80dip"
    swipe:swipeOpenOnLongPress="false" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:57:10.620

你说你有这三个包，在你自己的项目中？

如果您将源代码复制到 android-swipelistview-master 包中，那么您已经更改了 swipelistview 所在的包名。

尝试在您创建的新结构中找出它位于哪个包中。我对您的描述并不肯定，但请尝试以下操作：

```
<android-swipelistview-master.com.fortysevendeg.android.swipelistview.SwipeListView
xmlns:swipe="http://schemas.android.com/apk/res-auto"
android:id="@+id/example_lv_list"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:listSelector="#00000000"
swipe:swipeActionLeft="reveal"
swipe:swipeActionRight="reveal"
swipe:swipeAnimationTime="10"
swipe:swipeBackView="@+id/back"
swipe:swipeCloseAllItemsWhenMoveList="true"
swipe:swipeFrontView="@+id/front"
swipe:swipeMode="right"
swipe:swipeOffsetLeft="80dip"
swipe:swipeOffsetRight="80dip"
swipe:swipeOpenOnLongPress="false" /> 
```

也就是说，如果你真的意味着“android-swipelistview-master”是它自己的包。

如果您改为从 Github 中签出该库的整个项目目录，将其导入 Eclipse，并将其作为库项目引用，则可以以更简洁的方式获得所需的结果。如需更多阅读，请查看：[关于库项目的 Android 文档](http://developer.android.com/tools/projects/index.html#LibraryProjects)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T03:03:22.983

确保您的滑动项目看起来像这样（我必须将代码从 src/main/java 移动到 src）： ![在此处输入图像描述](https://i.stack.imgur.com/mwele.png)

然后将项目定义为库项目，将 NineOldAndroids 添加为库（git://github.com/JakeWharton/NineOldAndroids.git）以及 Android 支持库

![在此处输入图像描述](https://i.stack.imgur.com/uqH5N.png)

之后，您可以将 android-swipelistview 项目添加到您的主项目中，这应该可以工作（它对我有用）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T07:12:19.277

在 JellyBean 和 Eclipse Juno 上遇到了这个确切的问题。不过，Views 在模拟器/设备中正确显示，所以它是图形布局编辑器特有的。

确保 java 文件位置正确。另外，尝试更改此行：

```
xmlns:swipe="http://schemas.android.com/apk/res-auto" 
```

到

```
xmlns:swipe="http://schemas.android.com/apk/Location" 
```

其中 location 是自定义小部件的 .java 文件的完整位置（包括包）。此外，如果您在开始时声明命名空间（使用 android 和工具命名空间），则不必在每次使用自定义小部件时都重复它。

# objective-c - 字符串比较和文本字段操作

> ID：15778016
> 
> 赞同：0
> 
> 时间：2013-04-03T02:44:45.153
> 
> 标签：objective-c, xcode, cocoa, xcode4

我今天刚开始使用 Xcode 制作 Cocoa 应用程序。

我正在 YouTube 上观看视频，试图让我继续前进。现在我已经切换到 Mac 应用程序，我想开始构建 Mac 应用程序。我曾经在 Windows 上使用 .NET 进行编程。

好吧，我正在创建一个小的“登录”窗口开始。在 Xcode 中，我在这个 If 语句中遇到了某种类型的错误。这并不是真正的错误，而更像是一个警告。它工作正常，但我想确保我以正确的方式做这件事。基本上它所做的只是检查以确保用户名和密码字段中有一些内容。

请记住，这是我一生中写的第一个 Objective-C 代码。

```
#import "AppController.h"

@implementation AppController

NSString * quser = @"f";
NSString * qpass = @"f";

- (IBAction)checkforErrors:(id)sender {

        //the next couple of lines is where I'm getting the error msg...

        if (qpass == @"t") {
            if (qpass = @"t") {
            [label setStringValue:@"Username and Password are valid."];
            }
        }

}

- (IBAction)usernameEntered:(id)sender {

    quser = @"t";

}

- (IBAction)passwordEntered:(id)sender {

    qpass = @"t";

} 
```

我什至做变量的东西对吗？我正在尝试利用我的 JavaScript 和 PHP 知识来帮助我解决这个问题（即使它们是完全不同的语言！！：P）。

还有一点我想问。在 Xcode 中，它让我可以选择在文本输入后或输入时在文本字段上发送操作。问题是，如果您输入密码并向下单击按钮`checkforErrors`，它不起作用。您必须单击其他位置，然后单击该按钮。无论如何要发送动作“onTextChange”？

另外，如果你有很好的资源来学习 Objective-C/Cocoa，我很想拥有它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:51:59.900

好的，让我们从简单的开始：

```
 if (qpass == @"t") {
        if (qpass = @"t") {
        [label setStringValue:@"Username and Password are valid."];
        }
    } 
```

这些线路有两个问题。首先，Objective-C 中所有带有 a`*`的东西都是一个指针。当您比较时，`==`您是在比较指针的位置，而不是字符串的内容。你想`isEqualToString:`改用。

其次，在你的第二个`if`陈述中，你正在做一个作业。我还假设您不想检查`@"t"`两次？

> > 您必须单击其他位置，然后单击该按钮。无论如何要发送动作“onTextChange”？

你想看看[`UITextFieldDelegate`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)，`textField:shouldChangeCharactersInRange:replacementString:`特别是。此外，可以在[此处](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithProtocols/WorkingwithProtocols.html#//apple_ref/doc/uid/TP40011210-CH11-SW1)找到有关协议的一些信息。

最后，一些学习资源：
[Treehouse](http://blog.teamtreehouse.com/an-introduction-to-objective-c)
[Apple 入门指南上的Objective-C 简介](http://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/Introduction.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:51:02.350

这些是您正在使用的引用对象，因此任何直接比较都会尝试比较它们的逻辑地址......这**几乎可以保证不起作用。**说真的，唯一可行的方法是两个变量都未初始化。正如所建议的，是“isEqual”方法。

此外，即使支持直接比较，'qpass = @"t"' 也是一个赋值，它实际上可能评估为真，因为它会评估 qpass 的地址。

# objective-c - 无法让 UIMenuController 显示自定义项目

> ID：15778017
> 
> 赞同：5
> 
> 时间：2013-04-03T02:44:52.503
> 
> 标签：objective-c, uicollectionview, uimenucontroller, uimenuitem

所以，我不确定我是否在这里做错了，但我有一个 UIViewController 上面有一个 UICollectionView。在 UIViewController 的`viewDidLoad`方法中，我执行以下操作，它不会将任何自定义菜单项添加到显示的弹出窗口中。

```
UIMenuItem *removeItem = [[UIMenuItem alloc] initWithTitle:@"Remove" action:@selector(handleRemoveItem:)];
UIMenuItem *duplicateItem = [[UIMenuItem alloc] initWithTitle:@"Duplicate" action:@selector(handleDuplicateItem:)];

[[UIMenuController sharedMenuController] setMenuItems:@[removeItem, duplicateItem]];

[removeItem release];
[duplicateItem release]; 
```

我确实将`collectionView:shouldShowMenuForItemAtIndexPath:`和设置为在所有情况下都`collectionView:canPerformAction:forItemAtIndexPath:withSender:`返回`YES`，但无论如何，只会显示剪切、复制和粘贴。

我没有完全实现这一点，还是我做得不对？

PS-我确实在整个谷歌中查看了尽可能多的示例，但没有找到任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T00:24:54.343

通过遵循此链接 ( [https://stackoverflow.com/a/13618212/2313416](https://stackoverflow.com/a/13618212/2313416) ) 上的说明，我能够在 UICollectionViewCell 上实现自定义菜单，并进行了一些即兴创作。

在我的 UICollectionViewController 中，我通过将自定义菜单项添加到链接中的菜单控制器来实现它们。

然后我在 UICollectionViewController 中实现了以下内容：

```
- (BOOL)collectionView:(UICollectionView *)cv canPerformAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {
return NO;
}

- (BOOL)collectionView:(UICollectionView *)cv shouldShowMenuForItemAtIndexPath:(NSIndexPath *)indexPath {
return YES;
}

- (void)collectionView:(UICollectionView *)cv performAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {

NSLog(@"perform action:%@", NSStringFromSelector(action));
} 
```

在我的 UICollectionViewCell 中，我实现了类似于以下内容：

```
- (BOOL)canBecomeFirstResponder {
return YES;
}

- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {

if (action == @selector(onCustom1:)) {
    return YES;
}

if (action == @selector(onCustom2:)) {
    return YES;
} 
return NO;
} 
```

这些操作必须与 Collection Controller 中实现的操作相同。

如果想要包含复制或粘贴功能，请将它们添加到 canPerformAction: 然后更改 collectionView::canPerformAction: 以返回 YES。

这可能不是最好的方法，但对我有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T04:26:15.627

你是对的。当您长按表格视图单元格或集合视图单元格时，无法自定义出现的菜单。

我在书中讨论了这个问题：

[http://www.aeth.com/iOSBook/ch21.html#_table_view_menus](http://www.apeth.com/iOSBook/ch21.html#_table_view_menus)

正如我在那里所说，复制、剪切和粘贴是您唯一的选择。如果要自定义菜单，则必须使菜单源自其他内容。

**编辑：**在我的书的 iOS 7 版本中，我演示了一种方法来做到这一点。表格视图单元格和集合视图单元格也是如此，所以我将从表格视图单元格解决方案开始。诀窍是您必须*在单元子类中*实现 action 方法。例如，如果您的自定义操作选择器是`abbrev:`，则必须子类化单元格并实现`abbrev:`：

[https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/iOS7bookExamples/bk2ch08p454tableCellMenus2/ch21p718sections/MyCell.m](https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/iOS7bookExamples/bk2ch08p454tableCellMenus2/ch21p718sections/MyCell.m)

这是唯一棘手的部分。然后，回到您的控制器类中，您所做的`abbrev:`正是您对任何菜单所做的。在`shouldShowMenuForRowAtIndexPath:`中，将其添加到自定义菜单。然后像你期望的那样实现（一直滚动到底部）`canPerformAction:`：`performAction:`

[https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/iOS7bookExamples/bk2ch08p454tableCellMenus2/ch21p718sections/RootViewController.m](https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/iOS7bookExamples/bk2ch08p454tableCellMenus2/ch21p718sections/RootViewController.m)

这是集合视图单元格的并行实现：单元格子类：

[https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/iOS7bookExamples/bk2ch08p466collectionViewFlowLayout2/ch21p748collectionViewFlowLayout2/Cell.m](https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/iOS7bookExamples/bk2ch08p466collectionViewFlowLayout2/ch21p748collectionViewFlowLayout2/Cell.m)

和控制器（一直滚动到底部）：

[https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/iOS7bookExamples/bk2ch08p466collectionViewFlowLayout2/ch21p748collectionViewFlowLayout2/ViewController.m](https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/iOS7bookExamples/bk2ch08p466collectionViewFlowLayout2/ch21p748collectionViewFlowLayout2/ViewController.m)

在我的 iOS 8 版本中，这些方法也被翻译成 Swift（并非没有一些困难）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T04:06:05.900

第 1 步：创建菜单项

```
UIMenuItem* miCustom1 = [[UIMenuItem alloc] initWithTitle:@"Custom 1" action:@selector(onCustom1:)];
UIMenuItem* miCustom2 = [[UIMenuItem alloc] initWithTitle: @"Custom 2" action:@selector(onCustom2:)]; 
```

第 2 步：创建菜单控制器

```
UIMenuController* mc = [UIMenuController sharedMenuController]; 
```

第 3 步：将项目添加到菜单控制器

```
mc.menuItems = [NSArray arrayWithObjects: miCustom1, miCustom2, nil]; 
```

第 4 步：为项目创建操作方法

```
- (void) onCustom1: (UIMenuController*) sender
{
}

- (void) onCustom2: (UIMenuController*) sender
{
} 
```

第 5 步：可以选择为 Actions 设置 FirstResponder

```
- (BOOL) canPerformAction:(SEL)action withSender:(id)sender
{
    if ( action == @selector( onCustom1: ) )
    {
        return YES; // logic here for context menu show/hide
    }

    if ( action == @selector( onCustom2: ) )
    {
        return NO;  // logic here for context menu show/hide
    }

    if ( action == @selector( copy: ) )
    {
        // turn off copy: if you like:
        return NO;
    }

    return [super canPerformAction: action withSender: sender];
} 
```

第 6 步：最后在某些按钮操作上显示您的 MenuController

```
UIMenuController* mc = [UIMenuController sharedMenuController];

CGRect bounds = sender.view.bounds;

[mc setTargetRect: sender.view.frame inView:sender.view.superview];
[mc setMenuVisible:YES animated: YES]; 
```

# java - 为什么 UTF-8 作为 native2ascii 编码选项而不是 ISO-8859-1？

> ID：15778018
> 
> 赞同：0
> 
> 时间：2013-04-03T02:44:55.970
> 
> 标签：java

在 Java 中创建 Properties 类时，要求输入流必须以 ISO-8859-1 编码。但在实践中，我使用 UTF-8 通过 native2ascii 工具而不是 ISO-8859-1 转换非拉丁属性文件。

*   根据 JDK 文档，输入流应编码为 ISO-8859-1。也就是说，源文件采用 ISO-8859-1 编码。
*   根据解码和编码应该使用相同的 ISO-8859-1，Java 中的 Properties 类应该使用 ISO-8859-1 解码。
*   根据测试，实际上我们在 native2ascii 中使用 UTF-8 作为编码选项，而不是 ISO-8859-1。为什么？

测试如下：

*   创建 test.properties 文件，其中包含：“key=Ü”
*   生成的 ISO-8859-1 属性文件：key=\u00c3\u009c

    ```
     native2ascii -encoding ISO-8859-1 test.properties iso88591.propertie: 
    ```

*   生成的 UTF-8 属性文件：key=\u00dc

    ```
     native2ascii -encoding UTF-8 test.properties utf8.properties 
    ```

*   创建 Properties 以加载生成的两个属性文件：

    ```
    Properties p = new Properties();
    //InputStream inStream = new FileInputStream("src/test/java/com/active/translation/iso88591.properties");
    InputStream inStream = new FileInputStream("src/test/java/com/active/translation/utf8.properties");
    p.load(inStream);

    System.out.println(p.getProperty("key")); 
    ```

*   iso88591.propertie 结果是：Ã

*   utf8.properties 结果为：Ü

回答：

该 -encoding 需要与源文件中使用的实际编码相匹配。从外观上看，那是UTF-8。– 蒂洛 4 月 3 日 2:52

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:44:01.743

该 -encoding 需要与源文件中使用的实际编码相匹配。从外观上看，那是UTF-8。– 蒂洛 4 月 3 日 2:52

# c++ - boost::asio::deadline_timer 不断触发

> ID：15778021
> 
> 赞同：1
> 
> 时间：2013-04-03T02:45:23.863
> 
> 标签：c++, timer, boost-asio

我已经实现了一个 ios 对象，该对象在截止日期计时器到期时调用处理程序。我很确定这是正确完成的。

普塞多：

```
localScheduler(_localSchedulerIO)

_localSchedulerIO.poll()

while (1)
{
   _localSchedulerIO.reset()
   _localSchedulerIO.poll()
} 
```

好的......所以这适用于i686。截止时间计时器每 15 秒完成一次，一切都很好。

现在擦。当我第一次在嵌入式环境上编译和运行时，我启动了程序进程，我得到了持续的“就绪”run() 处理程序。这是不可取的。更奇怪的是……我运行该程序的第二次按预期工作（15 秒）！哼..

任何人都知道可以通过运行一次 boost::asio 来满足依赖关系吗？

开发文件丢失？

**更多详细信息：更新：**在这里使用 time_traits 派生有帮助吗？

```
Scheduler::Scheduler(ba::io_service& io) :

        ,timer_ (io, seconds(SCHEDULER_TIMER))

{
    timer_.async_wait(boost::bind(&Scheduler::run, this, _1));
}

void Scheduler::run(const boost::system::error_code& error)
{

    if (!error)
    {

    // DO SOMETHING

    // reset timer -- now a run loop

    timer_.expires_at(timer_.expires_at() + seconds(SCHEDULER_TIMER));

    //timer_.expires_at((pt::second_clock::local_time() + seconds(SCHEDULER_TIMER)));

    timer_.async_wait(boost::bind(&Scheduler::run, this, _1));

    } // timer error
}

Class Scheduler
{
    // timer run 
protected:
    ba::deadline_timer timer_;
}

// main process

MainProcess::MainProcess() :
    , _localScheduler(_localSchedulerIO)
{
}

// scheduler asio
DefaultLogSink().Info("Starting Scheduler server\n");
_localSchedulerIO.run_one();  // blocks until first timer expiry
DefaultLogSink().Info("Scheduler server started\n");

while (1)
{
    _localSchedulerIO.reset();
    _localSchedulerIO.poll_one();  
} 
```

# php - 在 php 中加载当前页面时加载另一个页面的问题

> ID：15778025
> 
> 赞同：0
> 
> 时间：2013-04-03T02:46:04.580
> 
> 标签：php, email, session

我无法在一个浏览器中同时加载两个页面。我有发送 10k 电子邮件的文件。但同时我想在系统中浏览。但是，在发送电子邮件的脚本完成之前，我什么也做不了。

任何建议。如何解决这个问题？如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:48:22.857

会话锁定新请求。因此，直到会话关闭，另一个请求才会等待。查看[session_write_close](http://php.net/manual/en/function.session-write-close.php)

或者，您可以在不同的浏览器中运行另一个实例。

# python - 矩阵 Python 的逆

> ID：15778026
> 
> 赞同：0
> 
> 时间：2013-04-03T02:46:23.337
> 
> 标签：python, geometry, interpolation, matrix-inverse

我试图在 Python 中取矩阵的逆并不断收到语法错误。我是 Python 新手。在进行了互联网搜索并尝试了多种方法之后，我仍然没有得到它。有人可以看看我的代码并指出我正确的方向吗？错误消息：python2.6 test.py 文件“test.py”，第 39 行 inverse = mat1.I*mat2 ^ SyntaxError: invalid syntax

谢谢！

```
#import all of the needed libraries
import math
import matplotlib.pyplot as plt
import numpy
import array
import itertools
from numpy import linalg as LA

#variables and defs
x = []
y = []
h1 = 1
h2 = 5
h3 = 10
x1 = .5
x2 = 9.5
x3 = 4.5
y1 = .5
y2 = 2.5
y3 = 9.5

#create a 10x10 grid
for i in range(10):
    for j in range(10):
        x.append(i)
        y.append(j)
    j=0

#Triangle Interpolation Method 3
for i in range(100):
    xp = x(i)
    yp = y(i)

    mat1 = ([[(x1-x3),(x2-x3)],[(y1-y3), (y2-y3)]])  
    mat2 = ([(xp-x3), (yp-y3)]
    inverse = (LA.inv(mat1))*mat2

    w1 = inverse(1)
    w2 = inverse(2)
    w3 = 1-w1-w2

#check to see if the points fall within the triangle
if((w1 <=1 && w1 >=0) && (w2 <=1 && w2 >=0) && (w3 <=1 && w3>=0))
    z = (h1*w1)+(h2*w2)+(h3*w3)
.
.
. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T03:09:04.663

除了`:`Nick Burns 指出的缺失之外，Python 不使用`&&`. 您应该`and`改用：

```
if((w1 <=1 and w1 >=0) and (w2 <=1 and w2 >=0) and (w3 <=1 and w3>=0)):
    z = (h1*w1)+(h2*w2)+(h3*w3) 
```

此外，Python 允许使用以下语法来稍微简化您的 if 条件：

```
if (0 <= w1 <= 1) and (0 <= w2 <= 1) and (0 <= w3 <=1):
    z = (h1*w1)+(h2*w2)+(h3*w3) 
```

**编辑：**

根据您的评论指出的实际错误是这一行的不平衡括号：

```
mat2 = ([(xp-x3), (yp-y3)] 
```

这应该是：

```
mat2 = [(xp-x3), (yp-y3)] 
```

你可以进一步写

```
mat2 = [xp-x3, yp-y3] 
```

为了更容易看到必要的分隔符匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:11:18.023

你缺少一个关闭的括号。

```
mat2 = ([(xp-x3), (yp-y3)] 
```

应该

```
mat2 = ([(xp-x3), (yp-y3)]) 
```

不过，在修复它之后，您会得到更多的语法错误。您可以查看 Ray 和 Nick Burns 的答案以了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T02:57:51.703

您的语法错误很可能来自`if`代码末尾的语句。当 IF 语句末尾没有 ':' 时，您将收到 syntaxError。

例如：

```
def hello(name):
    if name

SyntaxError: invalid syntax 
```

希望有帮助！

# c++ - QStyledItemDelegate::paint - 为什么我的文本没有正确对齐？

> ID：15778029
> 
> 赞同：4
> 
> 时间：2013-04-03T02:46:48.680
> 
> 标签：c++, qt

我正在尝试 Qt，并希望根据其值以自定义文本颜色显示模型。这是一个可选设置，可以用颜色渲染它，所以我想避免在我的模型中使用 Qt::ForegroundRole，而是在 QStyledItemDelegate 中实现它。在以下示例中，我调用`QStyledDelegate::paint`然后继续使用`painter->drawText`. 我的期望是它们应该完美覆盖，而实际上在使用`QStyledDelete::paint`.

这是一张图片的链接，可以更好地显示我在说什么：

[![在此处输入图像描述](https://i.stack.imgur.com/reCCU.png)](https://i.stack.imgur.com/reCCU.png)

现在获取一些相关的源代码。
`mainwindow.cpp`包含：

```
MainWindow::MainWindow(QWidget *parent) : QMainWindow(parent), ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    ui->treeView->setItemDelegate(new TestDelegate());

    QStandardItemModel *model = new QStandardItemModel(this);
    ui->treeView->setModel(model);

    QList<QStandardItem*> items;
    items << new QStandardItem("Moose")
          << new QStandardItem("Goat")
          << new QStandardItem("Llama");

    model->appendRow(items);
} 
```

`testdelegate.cpp`包含：

```
void TestDelegate::paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const
{
    QStyledItemDelegate::paint(painter, option, index);
    if (index.data().toString() == "Goat") {
        painter->save();
        painter->setPen(Qt::red);
        painter->drawText(option.rect, option.displayAlignment, index.data().toString());
        painter->restore();
    }
} 
```

上述行为发生在我运行 Qt 4.8.x 的 Windows 7 和 Linux Mint 测试盒下。两种系统下的文本边距似乎都是x+3，y+1；但是我担心这可能与字体有关，并且不希望对可能破坏事物的偏移进行硬编码。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T07:23:07.380

`option.rect`是项目视图单元格的边界矩形，因此它不包含边距。您需要的偏移量可以通过从当前查询子元素矩形来检索`QStyle`：

```
...
QStyle* style = QApplication::style();
QRect textRect = style->subElementRect(QStyle::SE_ItemViewItemText, &option);
...
painter->drawText(textRect, option.displayAlignment, index.data().toString()); 
```

*但是*`QStyle`......是否实现它完全取决于当前。当我尝试将它与 Qt v4.8 一起用于我在 Linux/Gnome 上的应用程序时，它是错误的，并且确实没有在 Qt 源代码中实现。所以我不得不硬编码偏移量，对我来说这并没有我打算自己写的那么糟糕`QStyle`——你可能没有那么“幸运”。

# yii - 即使在 777 缓存权限后也不显示 Blob 图像 (TCPD)

> ID：15778030
> 
> 赞同：0
> 
> 时间：2013-04-03T02:46:53.053
> 
> 标签：yii, blob, tcpdf

这是每当我尝试加载页面时显示的错误：

```
TCPDF ERROR: [Image] Unable to get image: /var/www/html/example/protected/extensions/tcpdf/cache/img_d41d8cd98f00b204e9800998ecf8427e 
```

这是导致错误的行（我认为）：

```
$pdf->Image('@',$logo); 
```

img_d41d... 甚至不在缓存文件夹中。请帮忙。这让我发疯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:27:29.543

尝试类似：

```
$pdf->Image('@'.$logo) 
```

（我假设 $logo 是您的 blob。） blob 数据需要附加到第一个参数中的“@”符号，而不是作为第二个参数发送。

# assembly - 如何在 x86 汇编代码中复制一个单词，at&t 语法

> ID：15778036
> 
> 赞同：0
> 
> 时间：2013-04-03T02:47:25.913
> 
> 标签：assembly, x86

所以我正在做一个项目来帮助我学习组装并遇到问题。我需要获取一个通过键盘输入的单词并复制它，以便我可以在之后对其进行操作，替换它的一部分。我知道我必须使用一个 for 循环，也许还有一个堆栈。我尝试了几种方法，但我所有的代码都是错误的并且没有编译。我得到了其余的代码，而不是这部分，任何关于这个问题的帮助将不胜感激，并且非常欢迎帮助学习汇编的好书或网站。谢谢你。

```
mov $0, $edi

Loop:
  cmp $4, %edi
  jg End

  mov $33, Text(%edi)
  add $1, %edi
  jmp Loop
End: 
```

我尝试使用此代码用！替换所有其他字母，我认为复制的过程是相同的，我是这个概念的新手。副本和！替换是我在其他部分遇到问题的最后两个部分。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:42:48.057

这与 GNU 组装为：

```
mov $0, %edi

Loop:
  cmp $4, %edi
  jg End

  movb $33, Text(%edi)
  add $1, %edi
  jmp Loop
End: 
```

# c - 求两个非常大的数与非常大的数的乘积模

> ID：15778038
> 
> 赞同：2
> 
> 时间：2013-04-03T02:47:44.733
> 
> 标签：c, algorithm, data-structures

在编程练习中，我需要找出一个非常大的数字的模数，例如 2 的幂 500000（输入中的最大数字），其中 1000000007 作为其他计算的一部分。

正如我可能不得不多次发现的那样，一种方法是创建一个包含 5,00,000 的数组。但它会阻塞大量内存，所以我想知道有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T02:57:17.233

[这是使用重复平方算法](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)的绝佳时机。您可以按如下方式计算 x ^y (mod `modulus`)：

```
int repeatedSquaring(int x, int y, int modulus) {
    if (y == 0) return 1;
    int val = repeatedSquaring(x, y / 2);
    val = (val * val) % modulus;

    if (y % 2 == 1) {
        val = (val * x) % modulus;
    }

    return val;
} 
```

该算法只需要 O(log y) 乘法和模数来计算。此外，每个中间值最多为`modulus`²，因此如果您的模数不是太大，您可以使用 plain `int`s 进行计算。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:05:34.227

像这样简单的东西怎么样？：

```
#include <stdio.h>

unsigned long PowMod(unsigned long p)
{
  unsigned long prod;

  if (p == 0)
    return 1;
  if (p == 1)
    return 2;

  prod = PowMod(p / 2);
  prod = (unsigned long long)prod * prod % 1000000007ULL;
  if (p % 2 != 0)
  {
    prod = prod * 2 % 1000000007ULL;
  }

  return prod;
}

int main(void)
{
  printf("%lu\n", PowMod(3));
  printf("%lu\n", PowMod(4));
  printf("%lu\n", PowMod(30));
  printf("%lu\n", PowMod(31));
  printf("%lu\n", PowMod(32));
  printf("%lu\n", PowMod(33));
  return 0;
} 
```

输出（[ideone](http://ideone.com/gjMsbP)）：

```
8
16
73741817
147483634
294967268
589934536 
```

# c - 在 C 中使用指针附加字符串

> ID：15778039
> 
> 赞同：2
> 
> 时间：2013-04-03T02:47:45.437
> 
> 标签：c, string, pointers, append

对于我的生活，我无法弄清楚为什么这个程序不起作用。我正在尝试使用指针连接两个字符串并不断收到此错误：

```
a.out(28095) malloc: *** error 
for object 0x101d36e9c: pointer being realloc'd was not allocated
*** set a breakpoint in malloc_error_break to debug 
```

我的 str_append.c：

```
#include <stdio.h>
#include <stdlib.h>
#include "stringlibrary.h"  /* Include the header (not strictly necessary here) */

//appends s to d
void str_append(char *d, char *s){
  int i=0, j=0;

  d = realloc(d, strlength(d)+strlength(s)+1);
  //find the end of d
  while(*(d+i)!='\0'){
    i++;
  }

  //append s to d
  while(*(s+j)!='\0'){
    *(d+i)=*(s+j);
    i++;
    j++;
  }
  *(d+i)='\0';

} 
```

我有自己的 strlength 函数，我 100% 确定它有效。

我的 main.c：

```
#include <stdio.h>
#include <stdlib.h>
#include "stringlibrary.h"

int main(int argc, char **argv)
{
 char* str = (char*)malloc(1000*sizeof(char));
 str = "Hello";
 char* str2 = (char*)malloc(1000*sizeof(char)); 
str2 = " World";

str_append(str, str2);

 printf("Original String: %d\n", strlength(str));
 printf("Appended String: %d\n", strlength(str));

return 0;
} 
```

我尝试重新分配给临时变量并收到相同的错误。任何帮助表示赞赏。

编辑：感谢所有的答案。这个网站很棒。我不仅知道我哪里出错了（我猜是简单的错误），而且我发现了一个我不知道的关于弦乐的大漏洞。因为我不能使用 strcpy 函数，所以我自己实现了。它基本上是 strcpy 的源代码。

```
char *string_copy(char *dest, const char *src)
{
 char *result = dest;
 while (*dest++ = *src++);
 return result;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T02:49:40.193

你的问题在这里

```
char* str = (char*)malloc(1000*sizeof(char));
str = "Hello"; 
```

首先，您为 1000 个字符分配空间并将指针指向该内存的开头。
然后在第二行中，将指针指向导致内存泄漏的字符串文字。
您的指针不再指向分配的内存。
稍后在您的函数中，您尝试更改只读的字符串文字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T02:50:13.977

您正在尝试重新分配指向静态变量的指针。当你设置

`str = "Hello";`

您正在静态分配该变量（即它将在​​编译时分配）。那么它就*不是*用于其他目的的有效指针，包括`realloc`. `malloc`通过丢弃指向该内存的唯一指针，您还浪费了您在上面一行中检索到的所有空间。

您需要做的是使用`strcpy`分配值：

`strcpy(str, "Hello");`

然后你仍然有一个动态分配的指针，你可以将它用于`realloc`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T02:51:30.360

```
char* str = (char*)malloc(1000*sizeof(char));
str = "Hello"; 
```

应该：

```
char* str = malloc (1000);
strcpy (str, "Hello"); 
```

前者分配一些内存并将该内存的地址存储到`str`指针中，然后将指针*更改*为`str`指向*不同*的（未分配的）内存。

这就是你看到的原因`pointer being realloc'd was not allocated`。

后一个代码段`str`指向分配的内存，只是将字符串复制到该内存中。

* * *

而且，顺便说一句，您永远不应该从`malloc`C 中转换返回值——它可以隐藏某些细微的错误，而且这是不必要的，因为 C 完全能够将`void*`返回的值隐式转换为任何其他指针类型。

此外，由于`sizeof(char)`始终是一，因此您永远不需要乘以它。它通常会不必要地使代码混乱。

最后，虽然在这种情况下可能不太重要，但 C 标准保留了以和开头`str`的标识符（每个后跟一个小写字母）以供将来的库方向使用，因此您可能需要重新考虑您对事物的使用，例如如果您想要未来的可移植性。`mem``wcs``strlength()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T03:16:45.807

字符串文字（例如 : `"MAMA" "MEME"`）是不可变的。但是，如果您使用字符指针（例如`char * s = (char*)malloc(sizeof(char) * LEN`）并分配它们，则无法重新分配它们，那么它们是可变的。

这里 ：

```
char* str = (char*)malloc(1000*sizeof(char));
str = "Hello"; //no error BUT wasted memory and cant be reallocated anymore (literal) 
```

您应该在字符串操作中使用内置函数...

# r - R中的箱线图平均值不正确

> ID：15778044
> 
> 赞同：3
> 
> 时间：2013-04-03T02:48:21.840
> 
> 标签：r

我`boxplot`对 R 中的函数有一个严重的问题。箱线图错误地标记了图中的中线。即使平均值是 7.2376，在箱线图中它显示在 4 左右，如下图所示（使用以下代码生成）

```
DATA <- c(0.59, 1.00, 1.00, 1.04, 1.22, 1.40, 1.72, 1.74, 1.98, 3.44, 
          3.48, 3.50, 3.53, 3.93, 4.00, 4.33, 4.72, 9.49, 10.80, 11.40,
          12.04, 16.98, 20.43, 27.27, 29.91)

> boxplot(DATA) 
> mean(DATA) = 7.2376 
```

![在此处输入图像描述](https://i.stack.imgur.com/k5oXs.png)

它快把我逼疯了。它只使用这个数据集。其他数据集，箱线图标记平均值就好了。

非常感谢任何见解。

谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T03:00:37.900

我的评论真的应该是一个答案......

您的困惑与其说是`boxplot`函数，不如说是箱形图。[箱线图](http://en.wikipedia.org/wiki/Box_plot)通常只显示五个值：最小值、第一个四分位数、中位数、第三个四分位数和最大值。（此外，大多数绘图算法会根据某些规则分离“异常值”。）

因此，箱形图中的中间线对应于中位数，而不是平均值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-03T03:55:14.703

**我必须为这个愚蠢的错误赎罪。对于那些希望标记平均值的人，您可以执行以下操作：**

```
> DATA_mean <- data.frame(Group ="A", Measure = DATA) #Make a data.frame first
> attach(DATA_mean)                                   #Attach the data
> boxplot( Measure ~ Group)                           #Draw your boxplot as above
> means <- by(Measure, Group, mean)                   #Calculate mean and assign
> points(1, means, pch = 21, cex =1.5, bg = "blue")   #Label mean on boxplot

#The default center is 1 for the boxplots, if you have more than one, it would be 1:2:3...etc 
```

![带有均值标记的箱线图](https://i.stack.imgur.com/9bc87.png)

希望这可以帮助某人。那对我来说是一个令人尴尬的错误。是时候睡觉了。

谢谢大家马上纠正我。

# lambda - Lambda 约简证明 SK = KI

> ID：15778046
> 
> 赞同：1
> 
> 时间：2013-04-03T02:48:23.557
> 
> 标签：lambda, lambda-calculus, proof-of-correctness, k-combinator, s-combinator

您好，我无法证明这些组合子 SK = KI

带括号 [] 的步骤只是告诉您我正在执行的步骤。例如，λyz.xz(yz) 中的 [λxy.x / x] 表示我将用 (λxy.x) 替换表达式 λyz.xz(yz) 中的每个 x

到目前为止，我尝试的是减少 SK，我得到了这个：

```
S K
(λxyz.x z(y z)) (λxy.x)
[λxy.x / x] in λyz.x z(y z) 
(λyz. (λxy.x) z(y z))
[z/x] in λy.x
(λyz. (λy.z) (y z))
[y/y] in λy.z
(λyz. z z) 
```

然后减少KI，我得到了这个：

```
K I
(λxy.x) (λx.x)
[λx.x / x] in λy.x
λy. λx.x 
```

虽然这两个答案似乎不等于我（λyz.zz）和λy。λx.x 有人可以向我解释我做错了什么吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:54:12.443

`(λy.z) (y z)`简化为 just `z`, not `z z`, so `(λyz. (λy.z) (y z))`is `λyz. z`, 与 相同`λy. λx. x`。

# amazon-web-services - Instagram如何命名文件

> ID：15778047
> 
> 赞同：5
> 
> 时间：2013-04-03T02:48:24.167
> 
> 标签：amazon-web-services, amazon-s3, filenames, instagram

Instagram如何命名文件，文件名是随机的吗？基于某种哈希？或者对他们有什么意义？例如

[http://distilleryimage2.instagram.com/21a9ca729bf511e2985c22000a1f9ad3_7.jpg](http://distilleryimage2.instagram.com/21a9ca729bf511e2985c22000a1f9ad3_7.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-26T15:24:57.340

很好的答案 - 博客文章现在已经过时了，因为它们的命名已经改变，但它可能仍然基于 MD5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T23:40:11.980

经过进一步检查，我认为它只是一个 MD5 散列或后跟 _# 的图像大小

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-25T19:28:12.750

[Instagram 使用 MD5 哈希作为基本名称](http://blog.carbocation.com/post/86819143477/instagram-uses-an-md5-hash)，后跟下划线和代表图像大小的数字。请注意，他们可能不只是在哈希中使用文件内容，因为上传相同的图像可能会产生文件名冲突，因此他们可能会在计算中添加一些熵。

# mysql - MySql LeftJoin 从三个表

> ID：15778050
> 
> 赞同：-1
> 
> 时间：2013-04-03T02:48:51.033
> 
> 标签：mysql, sql, join

我正在尝试从游戏表中获取数据以及是否所有玩家都已注册可用的比赛（是/否）可用的比赛是日期是当前或将来的比赛

**游戏玩家**

```
(PK)Gamer_Id
Gamer_firstName,
Gamer_lastName,
Gamer experience(Y/N) 
```

**Game_matches**

```
(PK)FK GamerId,
(PK)FK MatchId,
 Gamer_score 
```

**匹配**

```
(PK)Match_Id,
gameDate,
ExperiencedGamers_needed,
InExperiencedGamers_needed 
```

这是我尝试过的，我知道它不完整。我还需要使用 CASE 吗？

```
SELECT G.*, COUNT(M.`matchId`)
FROM game_matches GM
LEFT JOIN MATCHES M
ON M.`matchId` = GM.`matchId`
LEFT JOIN Gamers G ON G.`userId` = GM.`userId`
WHERE G.`gameDate` >= DATE(NOW())
GROUP BY G.`userId` 
```

除了使用 JW 的交叉连接解决方​​案之外，还有其他方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T03:00:47.977

```
SELECT  a.GamerID,
        a.Name,
        COUNT(*) = COUNT(c.GamerID)
FROM    Gamers a
        CROSS JOIN `Match` b
        LEFT JOIN GameMatches c
            ON  a.GamerID = c.GamerID AND
                b.MatchID = c.MatchID
WHERE   b.gameDate >= CURDATE()
GROUP   BY  a.GamerID,
            a.Name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/e48be/21)

查询的作用是首先获取所有玩家的笛卡尔积和从今天开始的所有比赛。之后，结果将`GameMatches`在两列的表上连接：`GamerID`和`MatchID`。

如果表的笛卡尔积的结果在 table 上没有匹配`GameMatches`项，则列的值为*NULL*。因此，它测试`COUNT(*)`哪个是记录的总数是否等于`COUNT(c.GamerID)`哪个只是已注册的游戏玩家总数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:51:41.080

您只选择未来有比赛的游戏。如果你想要未来匹配的计数，你需要一个条件聚合：

```
SELECT G.*, sum(case when g.gameDate >= date(now()) then 1 else 0 end) as FutureMatches
FROM game_matches GM
LEFT JOIN MATCHES M
ON M.`matchId` = GM.`matchId`
LEFT JOIN Gamers G ON G.`userId` = GM.`userId`
GROUP BY G.`userId` 
```

在实践中，您可能可以使用`inner join`而不是`left join`因为表之间的 id 应该匹配（除非您对根本没有匹配的用户感兴趣）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:48:47.640

```
WITH MATCHES AS
(
SELECT COUNT(*) AS TOTAL_MATCHES FROM MATCH WHERE gameDate >= CURR_DATE
)

GM AS
(SELECT G.GAMER_ID, COUNT(*) AS GAMER_MATCHES
GAMERS G, GAME_MATCHES GM
WHERE G.GAMER_ID = GM.GAMER_ID
GROUP BY G.GAMER_ID
)

SELECT GM.GAMER_ID
FROM GM, MATCH
WHERE GAMER_MATCHES = TOTAL_MATCHES 
```

# jquery - JQuery 在 $.ajax 方法中创建错误的 URL

> ID：15778053
> 
> 赞同：2
> 
> 时间：2013-04-03T02:49:09.277
> 
> 标签：jquery

我想知道是否有任何实用方法（可能类似于 c# `Path.Combine`）在 jquery 中创建 URL。我有一个网络应用程序。如果我通过`http://mymachine/myapp/`在我的 Web 浏览器中键入来访问它，然后使用 发出[$.ajax](http://api.jquery.com/jQuery.ajax/)请求`url='search'`，则请求将发送到`http://mymachine/myapp/search`. 到现在为止还挺好。

但是，如果我通过在我的网络浏览器中键入来访问我的`http://mymachine/myapp`网络应用程序，该应用程序将加载，但是如果我使用相同的 url 进行 $.ajax 调用，jquery 会发出一个请求`http://mymachine/search`- 这不是我想要的。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:53:19.420

使用您的服务器端语言在 js 中设置应用程序基本 url：

前任：

```
<script>

    var baseUrl = '<%=Server.ApplicationPath%>';

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T03:16:45.150

发出 Ajax 请求时无需计算基本 URL。

您应该提供的网址是 -

```
url = '/myapp/search'

Hence the request will goto - http://myhostname/myapp/search 
```

有关更多信息，请参阅 -

[AJAX 请求中的相对 URL](https://stackoverflow.com/questions/4765740/relative-urls-in-ajax-requests)

# apache - Nutch - 作业失败 - 错误 mapred.FileOutputCommitter - Mkdirs 未能创建文件

> ID：15778060
> 
> 赞同：3
> 
> 时间：2013-04-03T02:50:50.307
> 
> 标签：apache, nutch

我正在尝试遵循[Nutch 教程](http://wiki.apache.org/nutch/NutchTutorial#A3._Crawl_your_first_website)中的简单步骤。这是我第一次使用 Nutch。

一切顺利，直到我执行以下命令：

```
bin/nutch crawl bin/urls -dir crawl -depth 3 -topN 5 -threads 1 
```

这给了我以下错误

```
 log4j:ERROR setFile(null,true) call failed
java.io.FileNotFoundException: /usr/local/nutch/framework/apache-nutch-1.6/logs/hadoop.log (No such file or directory)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:136)
    at org.apache.log4j.FileAppender.setFile(FileAppender.java:290)
    at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:164)
    at org.apache.log4j.DailyRollingFileAppender.activateOptions(DailyRollingFileAppender.java:216)
    at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:257)
    at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:133)
    at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:97)
    at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:689)
    at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:647)
    at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:544)
    at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:440)
    at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:476)
    at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:471)
    at org.apache.log4j.LogManager.<clinit>(LogManager.java:125)
    at org.slf4j.impl.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:73)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:242)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:254)
    at org.apache.nutch.crawl.Crawl.<clinit>(Crawl.java:43)
log4j:ERROR Either File or DatePattern options are not set for appender [DRFA].
solrUrl is not set, indexing will be skipped...
crawl started in: crawl
rootUrlDir = bin/urls
threads = 1
depth = 3
solrUrl=null
topN = 5
Injector: starting at 2013-04-02 19:08:03
Injector: crawlDb: crawl/crawldb
Injector: urlDir: bin/urls
Injector: Converting injected urls to crawl db entries.
Injector: total number of urls rejected by filters: 0
Injector: total number of urls injected after normalization and filtering: 1
Injector: Merging injected urls into crawl db.
Exception in thread "main" java.io.IOException: Job failed!
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1265)
    at org.apache.nutch.crawl.Injector.inject(Injector.java:296)
    at org.apache.nutch.crawl.Crawl.run(Crawl.java:127)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.nutch.crawl.Crawl.main(Crawl.java:55) 
```

我的 bin 目录有：

1.  纳奇

2.  爬行

3.  网址/seeds.txt

不确定问题出在哪里。

`hadoop.log`有以下错误：

```
2013-04-03 17:33:18,370 ERROR mapred.FileOutputCommitter - Mkdirs failed to create file:/usr/local/nutch/framework/apache-nutch-1.6/bin/crawl/crawldb/1971189408/_temporary

2013-04-03 17:33:21,394 WARN  mapred.LocalJobRunner - job_local_0002

java.io.IOException: The temporary job-output directory file:/usr/local/nutch/framework/apache-nutch-1.6/bin/crawl/crawldb/1971189408/_temporary doesn't exist! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T22:44:10.063

问题在于`-dir crawl`.

您需要提及正确的目录`path/name`。

# jquery - Jquery 搜索 - 什么计算速度更快？

> ID：15778062
> 
> 赞同：0
> 
> 时间：2013-04-03T02:50:59.833
> 
> 标签：jquery, search

我试图总是让我的脚本逻辑尽可能快地计算。

```
$("ul").prepend( $("ul li:last") ); 
```

对比

```
$("ul").prepend( $(this).find("li:last") ); 
```

基本上，将最后一个列表元素带到列表前面的最快方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:57:09.840

我建议这样做。

```
var $list = $("ul");
$list.prepend($list.children().last()); 
```

否则，您最终会多次选择相同的元素，如果您担心性能，这是您想要避免的事情。

* * *

**编辑**：根据@Jack 下面的评论，他是对的。当页面上有多个`<ul>`元素时，这将无法正常工作。像这样的东西可能会更好。

```
$("ul").each(function(){
  var $thisList = $(this);
  $thisList.prepend($thisList.children().last());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T03:07:24.767

如果你想要快速，你不会使用 jQuery：

```
void function(lists) {
  for (var i = 0; i < lists.length; ++i) {
    var children = lists[i].children;

    if (children.length > 1) {
      lists[i].insertBefore(children[children.length - 1], children[0]);
    }
  }
}(document.getElementsByTagName('ul')); 
```

[**基准**](http://jsperf.com/which-computes-faster)

# c# - 如何找到最大成员变量A的List元素，然后输出其成员变量B？

> ID：15778081
> 
> 赞同：0
> 
> 时间：2013-04-03T02:52:32.037
> 
> 标签：c#, linq, max

我有一个包含 100 个元素的类对象列表。该类有 2 个成员变量，都是 Doubles。我想按 Class1.A 升序对列表进行排序，然后在此排序列表的指定子列表中（例如元素 5 到 60），为最大 Class1.B 输出 Class1.A。

我知道这在 LINQ 中应该是非常可行的，但是除了在 C# 中运行 SQL 查询之外，我对 LINQ 还是很陌生，而且我还没有找到真正帮助我完成这项工作的教程/问答。

非常感谢您提前。

```
public class Class1{
  public Double A;
  public Double B;

  public void CompareByA(Class1 C1, Class1 C2)
  { 
     return C1.A.CompareTo(C2.A);  
  }
}

public Double FindMaxAWithinSubset(List<Class1> L, int X, int Y)
{
  L.Sort(Class1.CompareByA);
  // Once L has been sorted by A, within the sublist of L with element         
  // indices between X and Y, find the element with maximum B, and output its A.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:56:01.963

我更喜欢使用 LINQ 扩展，所以我会这样做。不确定看起来 SQL 的 linq 表达式是什么。

```
Double maxAValueInSubSet = L.OrderBy(x => x.A).Skip(X).Take(Y-X).Max(x => x.B).Single().A; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:56:56.093

```
var result = myInstance.OrderBy(x => x.A).Skip(5).Take(55).Max(y => y.B).FirstOrDefault(); 
```

这样做是按双 A 排序，跳过前 5 个，取下一个 55，然后选择剩余 B 的最大值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T03:01:33.770

你可以使用 LINQ `OrderBy`，所以你不需要使用`Sort`. 首先`OrderBy`通过属性 A，然后您可以使用`Where`从 X 到 Y 的索引选择项目。

然后你`OrderByDescending`在属性B中。这样可以使最大B在列表顶部的项目。你只`First`需要得到结果。

```
 var result = list.OrderBy(x => x.A)
                    .Where((x, index) => index >= X && index <= Y)
                    .OrderByDescending(x => x.B)
                    .First().A; 
```

# c++ - 我的机器上的 std::promise 是否损坏（使用 g++-mp）？

> ID：15778085
> 
> 赞同：17
> 
> 时间：2013-04-03T02:53:16.990
> 
> 标签：c++, gcc, c++11, future

此代码是否有效，或者我的编译器是否损坏？

```
#include <future>
#include <iostream>

int main() {
   std::cout << "doing the test" << std::endl;
   std::promise<bool> mypromise;
   std::future<bool> myfuture = mypromise.get_future();
   mypromise.set_value(true);
   bool result = myfuture.get();
   std::cout << "success, result is " << result << std::endl;
   return 0;
} 
```

这是输出：

```
$ g++-mp-4.8 -std=c++11 test.cpp
$ ./a.out
doing the test
Segmentation fault: 11
$ 
```

我正在使用 g++-mp-4.8，它是来自 macports 的 gcc 4.8。

我要疯了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:30:54.937

动态链接器可能会将您的程序链接到旧版本`libstdc++`的`/opt/local/lib/libstdc++.6.dylib`

由于您使用 GCC 4.8 进行编译，因此您需要使用`libstdc++`GCC 4.8 附带的新版本，这可能是`/opt/local/lib/gcc48/libstdc++.6.dylib`

您应该检查是否`/opt/local/lib/libstdc++.6.dylib`是 GCC 4.8 附带的库，如果不是，请使用正确的库。

您可以通过各种方式控制它，最简单的（但不一定是最好的）将是运行：

```
export DYLD_LIBRARY_PATH=/opt/local/lib/gcc48/
./a.out 
```

请参阅[http://gcc.gnu.org/onlinedocs/libstdc++/faq.html#faq.how_to_set_paths](http://gcc.gnu.org/onlinedocs/libstdc++/faq.html#faq.how_to_set_paths)和[http://gcc.gnu.org/onlinedocs/libstdc++/manual/using_dynamic_or_shared.html#manual.intro.using.linkage .dynamic](http://gcc.gnu.org/onlinedocs/libstdc++/manual/using_dynamic_or_shared.html#manual.intro.using.linkage.dynamic)其他信息（不特定于 Mac OS X）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:53:47.707

这是一个 MacPorts 错误。MacPorts 上已经有错误报告。你可以在那里关注：

[https://trac.macports.org/ticket/38814](https://trac.macports.org/ticket/38814)（主要问题）
[https://trac.macports.org/ticket/38833](https://trac.macports.org/ticket/38833)（我的报告，目前标记为#38814的重复）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T11:43:54.217

您的代码在 Xcode 中编译并运行良好。输出是

测试成功，结果为1

编译器是 Apple LLVM 4.2

因此，我建议你有一个编译器配置问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T23:41:28.490

确认：您的代码在这里产生同样的问题：

编译器：`g++ -v`给出

```
 Using built-in specs.
 COLLECT_GCC=/opt/local/bin/g++-mp-4.8
 COLLECT_LTO_WRAPPER=/opt/local/libexec/gcc/x86_64-apple-darwin12/4.8.1/lto-wrapper
 Target: x86_64-apple-darwin12 
```

> 配置为：../gcc-4.8-20130328/configure --prefix=/opt/local --build=x86_64-apple-darwin12 --enable-languages=c,c++,objc,obj-c++,fortran,java - -libdir=/opt/local/lib/gcc48 --includedir=/opt/local/include/gcc48 --infodir=/opt/local/share/info --mandir=/opt/local/share/man --datarootdir =/opt/local/share/gcc-4.8 --with-local-prefix=/opt/local --with-system-zlib --disable-nls --program-suffix=-mp-4.8 --with-gxx -include-dir=/opt/local/include/gcc48/c++/ --with-gmp=/opt/local --with-mpfr=/opt/local --with-mpc=/opt/local --with- ppl=/opt/local --with-cloog=/opt/local --enable-cloog-backend=isl --disable-cloog-version-check --enable-stage1-checking --disable-multilib --enable- lto --enable-libstdcxx-time --with-as=/opt/local/bin/as --with-ld=/opt/local/bin/ld --with-ar=/opt/local/bin/ar --with-bugurl=[https://trac.macports.org/newticket](https://trac.macports.org/newticket) --with-pkgversion='MacPorts gcc48 4.8-20130328_0'

```
 Thread model: posix
 gcc version 4.8.1 20130328 (prerelease) (MacPorts gcc48 4.8-20130328_0) 
```

在 gdb 中运行它会给出：

```
doing the test

Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: 13 at address: 0x0000000000000000
0x0000000100081c30 in __once_proxy ()
(gdb) up
#1  0x00007fff8872fff0 in pthread_once ()
(gdb) up
#2  0x0000000100000fd2 in __gthread_once ()
(gdb) up
#3  0x00000001000020c9 in _ZSt9call_onceIMNSt13__future_base11_State_baseEFvRSt8functionIFSt10unique_ptrINS0_12_Result_baseENS4_8_DeleterEEvEERbEIKPS1_St17reference_wrapperIS8_ESF_IbEEEvRSt9once_flagOT_DpOT0_ ()
(gdb) up
#4  0x0000000100001886 in std::__future_base::_State_base::_M_set_result ()
(gdb) up
#5  0x00000001000025ef in std::promise<bool>::set_value ()
(gdb) up
#6  0x000000010000119f in main () 
```

所以这似乎是 libstdc++ 中的一些错误。顺便说一句，使用 clang 3.2（自制软件），它编译和运行良好（`result is 1`）。也许您应该使用 bugzilla 提交错误报告...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-26T01:41:18.847

如果您不必使用 GCC，则可以使用最新版本的 Apple 编译器。确保从 Xcode 中安装最新的 Xcode 以及“命令行工具”。

命令行应该是：

`clang++ -std=c++11 -stdlib=libc++ -pthread test.cpp`

# vim - :g 命令中可以使用哪个选项？

> ID：15778088
> 
> 赞同：0
> 
> 时间：2013-04-03T02:53:25.583
> 
> 标签：vim

我想看 :g 命令的文档，所以我输入 help :g，vim ![在此处输入图像描述](https://i.stack.imgur.com/ZP4A0.jpg) 然后显示下图，我想看看可以使用哪个命令（除了 p(print) 和 d(delete)），但是我不知道该怎么做，我尝试 :help :cmd，但 vim 显示执行 shell 命令的帮助，而不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:18:18.390

所有 ex 命令都列在`:command`输出（用户/插件定义的）和`:h ex-cmd-index`（内置）中。

# python - Python程序的帮助/反馈

> ID：15778089
> 
> 赞同：1
> 
> 时间：2013-04-03T02:53:33.577
> 
> 标签：python

我只是在练习 Python 并正在回答这个问题：

**信息：**有一个数的位数的平方反复求和得到的序列。如果序列在不到 15 步内收敛到 1，则该数字被认为是快乐数字。

**问题：**制作一个允许用户输入数字的程序，它会告诉他们输入的数字是否是快乐的数字。用户应该能够继续输入数字，直到输入 -1 以退出程序。

我试过这个问题，但有一个错误说

`File "string", line 43, in fragment`

`TypeError: 'int' object is unsubscriptable`

我知道错误是`sequence_num += int(num[i]) ** 2`我不明白为什么，因为在此之前，我将 num 转换为字符串，然后由于`(num[i])`在括号中，程序应该先运行，然后再将其转换为整数。知道为什么会发生这种情况和/或如何解决它。多谢你们。

```
#Constant to determine if number is happy
MAX_STEPS = 14
#Constants to signal end of sequences or program
END_SEQUENCE_NUM = 1
END_PROGRAM_NUM = -1
#Variable to count number of steps and digit number
steps = 0
i = 0
#Variable for sequence number
sequence_num = 0

#Loops until user inputs -1
while True:
#Gets values from user
    num = input("\nPlease input a number: ")

    #Checks if user entered -1 to end program
    if num == END_PROGRAM_NUM:

    #Ends program
    break

#Checks if user inputted a number besides -1
    else:

#Loops until the sequence converges to 1 or number of steps is greater than 15
        while num != END_SEQUENCE_NUM and steps < MAX_STEPS:
#Counts number of steps
            steps += 1
#Concatenates user's number into a string
            num = str(num)

#Gets number of digits of user's number
            num_digits = len(num) 

#Squares each digit and adds the product
        while i != num_digits:
            sequence_num += int(num[i]) ** 2
            i += 1

            num = sequence_num

#Checks if number is happy
if num == END_SEQUENCE_NUM:
    num_type = "happy"

else:
    num_type = "not happy"

print "This is a", num_type, "number." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:58:35.417

我的建议是：注意类型。

有时您希望该 num 变量是一个数字（例如，当您将其与那些常数进行比较时），有时是一个字符串（以便对其进行切片或获取它的长度）。[另请注意，假设您使用的是 python 2.x ( http://docs.python.org/2/library/functions.html#input](http://docs.python.org/2/library/functions.html#input) )，使用 input 会给您一个数字，通常建议使用 raw_input (您总是会得到一个字符串，没有 eval [http://docs.python.org/2/library/functions.html#raw_input](http://docs.python.org/2/library/functions.html#raw_input)）。

也许打印类型可以帮助您调试：

```
print type(num) 
```

快乐学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:05:24.060

您当前的方法有点复杂。将其分解为简单的函数并使用`for`循环。Python 允许您使用循环轻松地迭代列表和字符串`for`：

```
def squared_digit_sum(number):
    total = 0

    for digit in str(number):
        # `digit` is a string, so convert it into a number using `int()`

        ... 
```

从那里，您只需要循环 15 次并查看数字是否在这 15 次迭代中收敛：

```
def is_happy(number):
    for i in range(15):
        number = squared_digit_sum(number)

        if number == 1:
            return True

    # The loop ended and `number` isn't 1
    return False 
```

# html - div 里面的内容不展开..？

> ID：15778095
> 
> 赞同：0
> 
> 时间：2013-04-03T02:54:57.803
> 
> 标签：html, size

帮助！？？我正在创建一个站点，由于某种原因，包含所有内容的主 div 似乎不会在内容位于其中时自动扩展。

代码如下。

谢谢你！

html:

```
<!-- Content -->
<div class="content-wrapper clearfix">
  <div id="content">
  {% if template == 'list-collections' %}
    {% include 'collection-listing' %}
  {% else %}
    {{ content_for_layout }}
  {% endif %}

  {% unless template contains "customer" or template contains "cart" %}
    {% include 'col-widgets' %}
  {% endunless %}
  </div>
</div>
</div><!-- /.content --> 
```

CSS：

```
.wrapper{
  width: 810px;
  margin: 0 auto;
  padding: 0 20px;
  text-align: left;
  min-height:100%;
  }
.ie6 .wrapper{ height: 100%; } 

      #content {
      height:200px;
      width: 810px;
      background-color:#fff;
      position: absolute;
      } 

#col-main{
  -moz-box-sizing: border-box;
    margin-top:0px;
  line-height: 2;
    margin: 5px;
  padding: 30px;
  background-color: #FFFFFF;
  float: center;
  position: relative; z-index: 1;
  height: 200px;
  background-color: #FFFFFF;
  border: 1px solid #D5DCE1;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:00:07.687

添加`height:auto;`到`#col-main`应该修复它。

# c# - 从多个数据源绑定 Gridview

> ID：15778098
> 
> 赞同：0
> 
> 时间：2013-04-03T02:55:17.507
> 
> 标签：c#

我正在尝试将多个数据源绑定到一个网格视图。有可能这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:22:20.397

恐怕没有。您可能希望合并两个数据源的结果并将合并的结果绑定到 gridview。

# python - 为什么我必须做`sys.stdin = codecs.getreader(sys.stdin.encoding)(sys.stdin)`？

> ID：15778100
> 
> 赞同：6
> 
> 时间：2013-04-03T02:55:21.880
> 
> 标签：python, encoding, locale

我正在编写一个 python 程序，它将所有输入大写（替代 non-working `tr '[:lowers:]' '[:upper:]'`）。语言环境是`ru_RU.UTF-8`，我`PYTHONIOENCODING=UTF-8`用来设置 STDIN/STDOUT 编码。这正确设置了`sys.stdin.encoding`. **那么，如果已经知道编码****，为什么我还需要显式创建解码包装器？`sys.stdin`**如果我不创建包装阅读器，该`.upper()`函数将无法正常工作（对非 ASCII 字符没有任何作用）。

```
import sys, codecs
sys.stdin = codecs.getreader(sys.stdin.encoding)(sys.stdin) #Why do I need this?
for line in sys.stdin:
    sys.stdout.write(line.upper()) 
```

如果它不使用它为什么`stdin`会有？`.encoding`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-06T17:21:38.370

要回答“为什么”，我们需要了解 Python 2.x 的内置[`file`](http://docs.python.org/2/library/stdtypes.html#bltin-file-objects)类型[`file.encoding`](http://docs.python.org/2/library/stdtypes.html#file.encoding)，以及它们之间的关系。

内置`file`对象处理原始字节——总是读取和写入原始字节。

该`encoding`属性描述流中原始字节的编码。该属性可能存在也可能不存在，甚至可能不可靠（例如，我们`PYTHONIOENCODING`在标准流的情况下设置不正确）。

对象执行任何自动转换的唯一时间`file`是在将`unicode`对象写入该流时。在这种情况下，它将使用`file.encoding`if available 来执行转换。

在读取数据的情况下，文件对象不会进行任何转换，因为它返回的是原始字节。在这种情况下，该`encoding`属性是用户手动执行转换的提示。

`file.encoding`在您的情况下设置，因为您设置了`PYTHONIOENCODING`变量并且`sys.stdin`' 的`encoding`属性已相应设置。要获得文本流，我们必须像您在示例代码中所做的那样手动包装它。

换一种方式考虑，假设我们没有单独的文本类型（如 Python 2.x`unicode`或 Python 3 `str`）。我们仍然可以使用原始字节处理文本，但要跟踪使用的编码。这就是它的`file.encoding`用途（用于跟踪编码）。我们创建的阅读器包装器会自动为我们进行跟踪和转换。

当然，自动换行`sys.stdin`会更好（这就是 Python 3.x 所做的），但是更改`sys.stdin`Python 2.x 中的默认行为会破坏向后兼容性。

以下是`sys.stdin`Python 2.x 和 3.x 中的比较：

```
# Python 2.7.4
>>> import sys
>>> type(sys.stdin)
<type 'file'>
>>> sys.stdin.encoding
'UTF-8'
>>> w = sys.stdin.readline()
## ... type stuff - enter
>>> type(w)
<type 'str'>           # In Python 2.x str is just raw bytes
>>> import locale
>>> locale.getdefaultlocale()
('en_US', 'UTF-8') 
```

自 Python 2.6 以来，[`io.TextIOWrapper`该类](https://docs.python.org/3/library/io.html#io.TextIOWrapper)是标准库的一部分。此类具有`encoding`用于将原始字节与 Unicode 相互转换的属性。

```
# Python 3.3.1
>>> import sys
>>> type(sys.stdin)
<class '_io.TextIOWrapper'>
>>> sys.stdin.encoding
'UTF-8'
>>> w = sys.stdin.readline()
## ... type stuff - enter
>>> type(w)
<class 'str'>        # In Python 3.x str is Unicode
>>> import locale
>>> locale.getdefaultlocale()
('en_US', 'UTF-8') 
```

该`buffer`属性提供对原始字节流支持的访问`stdin`；这通常是一个`BufferedReader`. 请注意，它没有**属性**`encoding`。

```
# Python 3.3.1 again
>>> type(sys.stdin.buffer)
<class '_io.BufferedReader'>
>>> w = sys.stdin.buffer.readline()
## ... type stuff - enter
>>> type(w)
<class 'bytes'>      # bytes is (kind of) equivalent to Python 2 str
>>> sys.stdin.buffer.encoding
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: '_io.BufferedReader' object has no attribute 'encoding' 
```

在 Python 3 中，属性的存在与否`encoding`与所使用的流类型一致。

# ruby-on-rails - Ruby 将字符串分成几部分

> ID：15778101
> 
> 赞同：-1
> 
> 时间：2013-04-03T02:55:50.587
> 
> 标签：ruby-on-rails, ruby

我正在使用 ruby​​1.8.7

我想将“Hello World(...1234)”分成“Hello World”和“1234”两部分

提前感谢您花费时间和精力为我提供正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:05:32.083

尝试这个.......：

```
"Hello World(...1234)".split /\(\.{3}|\)/ 
```

**将导致**=> `"Hello World" and "1234"`

=D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:08:07.380

```
"Hello World(...1234)".tr(')', '').split('(...') 
```

使用`tr()`替换结束括号，然后拆分剩余的额外字符，以在数组中为您提供所需的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:41:24.923

你可以简单地做：

```
irb(main):001:0> "Hello World(...1234)".split(/\W+/) 
```

结果将是：

```
=> ["Hello", "World", "1234"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T03:01:45.037

如果它总是数字，您想将字符串拆分为：

```
@digits = @string.split(/\d/) 
```

完毕。

# java - 解析 JSON 数据时处理空值

> ID：15778102
> 
> 赞同：1
> 
> 时间：2013-04-03T02:55:50.663
> 
> 标签：java, android, json, event-handling

我想用JSON导入数据，但是有些数据是null，如图：

```
[
    {
        "atasan": "name ",
        "kode_agen": "number",
        "jenis": "Regional",
        "no_aaji": "number* ",
        "nama_agen": "name"
    },
    {
        "atasan": "name ",
        "kode_agen": "number"
    },
    {
        "atasan": "name ",
        "kode_agen": "number",
        "jenis": "Agency",
        "nama_agen": "name"
    }
] 
```

我的问题是处理这个空数据的正确方法是什么？这是我的源代码：

```
try {
    JSONParser j = new JSONParser();
    JSONArray jsonArray = j.takeJson(url);

    for (int i = 0; i < jsonArray.length(); i++) {

        JSONObject c = jsonArray.getJSONObject(i);
        HashMap<String, String> map = new HashMap<String, String>();

        map.put("atasan", c.get("atasan").toString());
        map.put("kode_agen", c.get("kode_agen").toString());
        map.put("jenis", c.get("jenis").toString());
        map.put("no_aaji", c.get("no_aaji").toString());
        map.put("nama_agen", c.get("nama_agen").toString());
        AgenList.add(map);
    }
} catch (JSONException e) {
    e.printStackTrace();
} 
```

我希望有人可以帮助我解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:02:52.400

您可以执行以下操作：

```
JSONObject c  = jsonArray.getJSONObject(i);

if (c.has("atasan")) 
    map.put("atasan", c.get("atasan").toString());
if (c.has("nama_agen")) 
    map.put("nama_agen", c.get("nama_agen").toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:13:00.777

如果存在空值，这取决于您期望发生的情况。但了解正在发生的事情也很重要。当您调用 c.get("atasan") 并且它返回 null 时，您无法继续 .toString() 调用。这就像说 null.toString()... 只是不能那样做。

所以只需检查 null 然后决定做什么。

如果您想在 json 对象中的字段/属性为 null 的情况下将 null 或 "" 放入地图中，您可以执行类似 Naveen 的操作，或者：

```
map.put("atasan", c.has("atasan") ? c.get("atasan").toString() : ""); 
```

或（如果你想要 null 代替）

```
map.put("atasan", c.has("atasan") ? c.get("atasan").toString() : null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-28T07:21:25.110

您想访问可能存在或不存在的参数，但这不应终止代码。因此，为此，我们需要使用 if 和 else 语句。

在 if 语句中，您可以使用 has() 来检查参数是否存在。
如果 has() 不起作用，那么您可以尝试使用 isNULL() 进行空检查，或者
`if(c!=null&&c.get("kode_agen")!=null) map.put("kode_agen",c.get("kode_agen").toString());`

检查该值是否为空。

可能有一种情况，当 JSON 存储了像这段代码这样的值时

`"kode_agen":null`

，你需要忽略这种值，因为这可能会抛出一个错误作为你可以写的空值，

`if (!c.get("kode_agen").toString().equalsIgnoreCase("null")`

所以你可以说，if 和 else 中的条件完全依赖 JSON

```
JSONObject c = jsonArray.getJSONObject(i);
        HashMap<String, String> map = new HashMap<String, String>();
       if(c.has("atasan"))
        map.put("atasan", c.get("atasan").toString());
       else
        map.put("atasan","null");
       if(c.has("kode_agen"))
        map.put("kode_agen", c.get("kode_agen").toString());
       else
        map.put("kode_agen","null");
       if(c.has("jenis"))
        map.put("jenis", c.get("jenis").toString());
       else
        map.put("jenis","null");
       if(c.has("no_aaji"))
        map.put("no_aaji", c.get("no_aaji").toString());
       else
        map.put("no_aaji","null");
       if(c.has("nama_agen"))
        map.put("nama_agen", c.get("nama_agen").toString());
       else
        map.put("nama_agen","null");        
        AgenList.add(map); 
```

# android - 如何更改 Android 应用中自定义按钮的字体颜色？

> ID：15778104
> 
> 赞同：0
> 
> 时间：2013-04-03T02:56:03.773
> 
> 标签：android, button, android-button, android-fonts

我正在使用自定义按钮类为我的应用程序中的所有按钮使用自定义字体。我也想换颜色，不知道怎么换。这可能很容易，但我无法弄清楚。

这是我使用的代码：

```
 public class CustomButton extends Button {

    public CustomButton(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    public CustomButton(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public CustomButton(Context context) {
        super(context);
        init();
    }

    private void init() {
        if (!isInEditMode()) {
            Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "MyCustomFont.otf");
            setTypeface(tf);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T03:02:14.250

在清单中

```
<application android:theme="@style/ApplicationStyle" android:icon="@drawable/icon" android:label="@string/app_name"> 
```

在 Mystyle.xml 中

```
<style name="ApplicationStyle" parent="android:Theme">
  <item name="android:buttonStyle">@style/CKButton</item>
</style>
 <style name="CKButton" parent="android:style/Widget.Button">
  <item name="android:textSize">19sp</item>
  <item name="android:layout_margin">0dip</item>
  <item name="android:background">#ff0000</item>
 </style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T03:04:50.347

尝试使用`setTextColor(Color.BLUE);`

```
private void init() {
        if (!isInEditMode()) {
            Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "MyCustomFont.otf");
            setTypeface(tf);
            setTextColor(Color.BLUE);
        }
    } 
```

# django - django-endless-pagination 似乎没有使用 AJAX

> ID：15778105
> 
> 赞同：2
> 
> 时间：2013-04-03T02:56:05.150
> 
> 标签：django, django-endless-pagination

我试图在我的项目中使用 django-endless-pagination，但结果似乎没有使用 AJAX。我的目标是类似于 twitter 的分页，您向下滚动并列出更多元素而无需刷新页面。

这是我的视图代码：

```
@page_template('ajax_test_page.htm')
def ajax_test(request, template='ajax_test.htm', extra_context=None):
    context = { 'dreams': Dream.objects.all() }
    if extra_context is not None:
        context.update(extra_context)
    return render_to_response(template, context, context_instance=RequestContext(request)) 
```

这是 ajax_test.html：

```
<!DOCTYPE html>
{% block js %}
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="{{ STATIC_URL }}endless_pagination/js/endless-pagination.js"></script>
<script>$.endlessPaginate({
    paginateOnScroll: true,
    paginateOnScrollMargin: 20
    });
</script>
{% endblock %}

<h2>Ajax Test</h2>
{% include page_template %} 
```

这是 ajax_test_page.htm：

```
{% load endless %}

{% paginate dreams %}
<div>
{% for dream in dreams %}
    Dream title: {{ dream.title }}<br>
{% endfor %}
</div>
{% show_more %} 
```

我得到的结果与使用 Django 的内置分页器没有什么不同。我看到一个包含十个条目的列表和一个“更多”链接；当我单击“更多”链接时，我被带到“/ajax_test/?page=2”，这涉及刷新整个页面（而不是附加一组新条目），这不是我想要做的。尽管设置了标志，滚动到底部也没有效果。

我什至在浏览器中完全禁用了 javascript，它并没有改变任何东西，这表明 javascript 出于某种原因完全被忽略了。Chrome 和 Firefox 中的结果相同。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T11:12:33.300

我遇到了同样的问题。你必须`endlessPaginate`用

```
$(document).ready(function() {
    $.endlessPaginate({
        paginateOnScroll: true,
        paginateOnScrollMargin: 20
    });
}); 
```

我们将尽快修复文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T14:01:58.990

我不确定，但不是

```
{{ STATIC_URL }}endless_pagination/js/endless-pagination.js 
```

尝试使用此表格

```
{% static "endless_pagination/js/endless-pagination.js" %} 
```

`python manage.py collectstatic`在重新启动服务器之前不要忘记运行。

# mysql - 导致“MySQL 服务器已消失”错误的查询

> ID：15778107
> 
> 赞同：0
> 
> 时间：2013-04-03T02:56:21.540
> 
> 标签：mysql

我收到此错误：

```
Error Number: 2006
MySQL server has gone away 
```

究竟是什么错误导致了这种错误？我尝试了一些建议，例如`max_allowed_packet`论坛中讨论的其他一些建议，但没有一个适合我的情况。这个查询有什么不标准甚至是错误的吗？

```
SELECT
    `st`.`stid`, 
    `st`.`shift`, 
    `start_date`, 
    `end_date`, 
    `off_date`, 
    `actual_off_date`, 
    `leave_type`, 
    `sd`.`off_day` 
FROM (`staff` as st) 
LEFT JOIN `staff_leave_period` as slp 
    ON `st`.`stid` = `slp`.`stid` 
    and start_date <= '2013-04-03' 
    and end_date >= '2013-04-03' 
LEFT JOIN `staff_off_dates` as sod 
    ON `st`.`stid` = `sod`.`stid` 
    and off_date = '2013-04-03' 
LEFT JOIN `staff_off_day` as sd 
    ON `st`.`stid` = `sd`.`stid` 
    and sd.off_day = 'Wed' 
JOIN `staff_leave_status` as sls 
    ON `sls`.`stid` = `st`.`stid` 
WHERE `st`.`stid` NOT IN (SELECT stid 
        FROM attendance 
        WHERE att_date = "2013-04-03" 
```

# sql-server - 当插入记录不为空时，如何将表中的记录插入临时表？

> ID：15778109
> 
> 赞同：0
> 
> 时间：2013-04-03T02:56:25.660
> 
> 标签：sql-server

有谁知道当插入记录不为空时如何将表中的记录插入临时表？

例子：

我有一个表调用 A，一个临时表属于 TempTable。A 表内部包含 1 行和 3 列：

```
columnA              columnB           columnC   
854111111            854254125 
```

我想将表 A 中的记录插入到 tempTable 中，其中 tempTable 仅包含一列

```
Column
854111111            
854254125 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:00:39.760

您可以`UNION`（或`UNION ALL`）将列放入`INSERT`语句中：

```
INSERT INTO TempTable
SELECT ColumnA
FROM TableA
WHERE ColumnA IS NOT NULL
UNION 
SELECT ColumnB
FROM TableA
WHERE ColumnB IS NOT NULL
UNION
SELECT ColumnC
FROM TableA
WHERE ColumnC IS NOT NULL 
```

或者您可以将您的移动`UNION`到子查询并且只有 1 个`WHERE`子句：

```
INSERT INTO TempTable
SELECT A
FROM (
    SELECT ColumnA A
    FROM TableA
    UNION 
    SELECT ColumnB
    FROM TableA
    UNION
    SELECT ColumnC
    FROM TableA
) t
WHERE A IS NOT NULL 
```

# c# - ZIP 下载、存档未知格式或损坏

> ID：15778114
> 
> 赞同：0
> 
> 时间：2013-04-03T02:56:51.020
> 
> 标签：c#, zip

当按下应用程序内的按钮时，以下代码会下载 ZIP 存档。该文件似乎在那里，但是当我尝试打开它或提取它时，我收到以下错误消息：`Archive Unknown Format or Damaged`.

```
private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        string url = @"http://dc659.4shared.com/download/eRPYQvPM/Medieval_Silver_for_PC.zip?tsid=20130403-023918-42de479a";
// Create an instance of WebClient
System.Net.WebClient client = new System.Net.WebClient();
// Hookup DownloadFileCompleted Event
client.DownloadFileCompleted +=    new AsyncCompletedEventHandler(client_DownloadFileCompleted);

// Start the download and copy the file to c:\temp
client.DownloadFileAsync(new Uri(url), 
@"Extract.zip");
 }

void client_DownloadFileCompleted(object sender, AsyncCompletedEventArgs e)
{
    MessageBox.Show("Thank you for downloading! To play extract the ZIP folder.");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:01:24.270

您在代码中嵌入的 URL 实际上并不对应于 ZIP 文件。当我尝试加载它时，我得到一个 HTML 页面，提示我下载文件。

您很可能需要将文件托管在其他地方。4Shared 几乎肯定对允许他们的服务用于这样的盲目下载不感兴趣。（毕竟，他们从下载页面上的广告中赚取了很多收入。）

# algorithm - 为什么要搜索链表？

> ID：15778119
> 
> 赞同：0
> 
> 时间：2013-04-03T02:57:13.247
> 
> 标签：algorithm, list, data-structures

我正在阅读“算法设计手册”，它说基本列表上的三个操作是*搜索*、*插入*和*删除*。然后它继续在 C 中描述一种算法，一旦找到它正在寻找的节点（通过将节点的数据与搜索的数据进行比较），它就会返回该节点（以及因此连接在它下面的任何节点）。如果它没有找到它正在寻找的东西，它会返回`NULL`.

所以我的问题是，如果我们知道我们在寻找什么，我们为什么要寻找它？如果原因只是为了查看它是否包含在列表中，那么为什么布尔函数不“包含”我们真正想要的东西呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:39:44.440

一个节点可能包含比您要搜索的值更多的信息。想象一个模拟文件系统的列表。您按名称搜索文件，但您返回的节点可能包含文件名、文件大小、上次修改时间、文件所有者、访问权限和其他数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T03:04:33.057

通常，人们会搜索一个节点以对其进行处理。也许您想在现有节点中设置一个新值，删除该节点之后的所有内容，或者在该节点之后插入一些内容。如果您在列表中保持特定顺序，则搜索功能的语义可能会扩展为查找大于某个值的第一项，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T03:01:45.997

有时，您需要该特定节点进行某些操作。请记住，节点本身及其内容是两个不同的逻辑实体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T03:02:27.960

一个布尔函数“包含”可能就是我们想要的。如果我们想搜索一些我们没有但我们确实有标识号的数据集怎么办？

尝试将教科书中的示例视为一般示例。搜索布尔值和搜索基于其他值的记录都执行相同的操作，只是输出不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T03:29:24.927

考虑一个简单的例子......

你编写了一个程序，询问人们的年龄（以年为单位）并将他们存储在一个列表中，然后显示一个直方图（每个年龄有多少人），或者它可能显示过去一年有多少人年满 21 .

在这样的程序中，您可能事先不知道列表中最终会出现什么。这就是你搜索它的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T03:40:26.647

链表结构的唯一入口是`head`节点。要到达列表中的特定节点，您必须遍历`head`节点到下一个节点，到下一个节点，......最后到目标节点，因此进行搜索。所以`contains`会做同样的事情 - 搜索`equals`你正在寻找的节点的节点。

# winforms - 如何在 C++/CLI 中处理事件

> ID：15778123
> 
> 赞同：-1
> 
> 时间：2013-04-03T02:57:34.267
> 
> 标签：winforms, c++-cli

有人可以帮我修复我的功能吗？我正在尝试制作一个事件处理程序，但我不知道我的代码有什么问题，所以这里是：

```
private: System::Void progressBar(System::Object^  sender, System::EventArgs^  e System::Windows::Forms::WebBrowserProgressChangedEventArgs) Handles WebBrowser->ProgressChanged
 {
     // code here....
 } 
```

我希望有人可以帮助我，因为我已经查看了网络和一些论坛，但是我没有运气，也找不到我的代码的好例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:13:05.503

您当前的事件处理函数定义有两个问题：

1.  您用于声明第二个参数的语法无效。你有这个：

    ```
    EventArgs^ e WebBrowserProgressChangedEventArgs 
    ```

    该`e`参数被声明为 type `EventArgs^`，然后在它之后添加了一个随机的其他类型 ( `WebBrowserProgressChangedEventArgs`)。这将导致编译器错误，因为编译器不知道该怎么做，因为它不属于那里。

    如果您想`e`成为类型`WebBrowserProgressChangedEventArgs`，则需要将其移至开头并删除`EventArgs`。

    请记住，它`WebBrowserProgressChangedEventArgs`是 的子类`EventArgs`（您可以知道它是因为它以相同的名称结尾，这是 WinForms 中的通用命名约定），所以一切`EventArgs`都有并且可以做，所以`WebBrowserProgressChangedEventArgs`. 编译器已经知道这一点，所以你不需要告诉它。

    那么，参数的正确声明`e`是这样的：

    ```
    WebBrowserProgressChangedEventArgs^ e 
    ```

2.  据我所知，`Handles`关键字（在定义事件处理程序方法之后添加）*仅存*在于 VB.NET 中。所以以下是无效的：

    ```
    Handles WebBrowser->ProgressChanged 
    ```

    在其他语言（如 C++/CLI 和 C#）中，您需要通过代码手动连接事件处理程序。看起来像这样：

    ```
    obj->Event += gcnew EventHandler(this, Obj_Event); 
    ```

因此，综上所述，事件处理程序方法的正确签名是：

```
Void progressBar(Object^ sender, WebBrowserProgressChangedEventArgs^ e)
{
    // code goes here...
} 
```

在其他地方，您需要将此事件处理程序方法连接到一个事件，如下所示：

```
WebBrowser->ProgressChanged += gcnew WebBrowserProgressChangedEventArgs(this, progressBar); 
```

# php - 通过 jquery ajax 创建的下拉列表：如何在第一个下拉列表中选择值的第二个下拉列表中获取相关项目

> ID：15778126
> 
> 赞同：1
> 
> 时间：2013-04-03T02:58:06.577
> 
> 标签：php, jquery, ajax

我正在尝试填写第二个下拉列表，但它没有填充过滤器数据，但它根据第一个下拉列表中选择的国家/地区获取所有州，而不是仅相关州请告诉我代码中有什么问题。找不到 id 的值，因此所有州名都已填写在下拉列表中。

```
 <script type="text/javascript" src="jquery-ajax/jquery.js"></script>
<script>
$(document).ready(function(){             

    $("#country").change(function(){            

        //var optionValue = $("select[name='country_select']").val();      
       var id=$("#country").val(); 
        //var dataString = 'id='+ id;          
          //alert("datastring"+dataString); 

        $.ajax({
            type: "POST",
            url: "getstate.php",
            data: {Country_Id:id},
            beforeSend: function(){ $("#ajaxLoader").show(); },
            complete: function(){ $("#ajaxLoader").hide(); },
            success: function(response){

                $("#stateAjax").html(response);
                $("#stateAjax").show();

        }

        });        
    });

});
</script>

</head>
<?php
include("connection.php");
?>
<body>
<form method="post">
Select Country:<select name="country_select" id="country">
    <option value="">Select Country</option>
<?php
$cntry = mysql_query("SELECT Country_Id, name FROM country ORDER BY name ASC");
while($row = mysql_fetch_array($cntry))
{
    $id=$row['Country_Id'];
    $name=$row['name'];
echo '<option value="'.$id.'">'.$name.'</option>';
}
?>
    </select>
 <span id="errmsg" style="display:none">There is no matching option</span>
  <div id="ajaxLoader" style="display:none"><img src="jquery-ajax/ajax-loader.gif" alt="loading..."></div>
  <div id="stateAjax" style="display:none">
  <select name="state_select" id="state" style="display:none">
  <option value="">Please Select</option></select></select>
  </div>
</form>   
</body>

        getstate.php

    <?php

    echo $_POST['id'];

    include("connection.php");

    $cntry = mysql_query("SELECT * FROM state where country_id=".$_POST['id']);
    ?>
     State: 
    <select name="state_select" id="state">
    <option value="">Please Select</option>
    <?php
    while($row = mysql_fetch_array($cntry))
    {
        $id=$row['State_id'];
        $name=$row['name'];
    echo '<option value="'.$id.'">'.$name.'</option>';

    }

    ?>
    </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:20:40.320

```
$.ajax({
                type: "POST",
                url: "getstate.php",
                data: {country_id:id},
                ... 
```

编辑1：也

```
var id=$('#country').val(); 
```

编辑 2：getstate.php

```
include("connection.php");

$country_Id = intval($_POST['Country_Id']);//if country_Id is integer...if not:$country_Id = $_POST['Country_Id'];
$cntry = mysql_query("SELECT * FROM state where country_id=".$country_Id); 
```

# process - java如何启动新的jdk环境？

> ID：15778127
> 
> 赞同：1
> 
> 时间：2013-04-03T02:58:10.317
> 
> 标签：process, java

我已经将一个单独的代码打包到一个新的 jar 中。我希望它在新的 jre 中运行（具有自己的堆内存），这段代码可以为我工作吗？还是有什么最佳做法？

```
Process p = Runtime.getRuntime().exec("java -classpath . com.company.Runner"); 
```

# php - 在 PHP 中加密敏感数据

> ID：15778128
> 
> 赞同：-3
> 
> 时间：2013-04-03T02:58:11.430
> 
> 标签：php, security

我正在研究不安全的加密存储。据我所知，为了防止这种情况，我必须加密我的数据。所有文件都说 MD5 很弱，所以你能建议我在 PHP 中进行一些强加密，还是我必须创建自己的加密逻辑/方案？

感谢所有帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:04:44.887

使用**Salt Hashing** + **Sha**

```
// define your encryption key

$encyption_key = 'IMHPU7GG3HI5FCMYCT354P7V8FEUPRFL'; //sample

// Appending salt to the password
$_POST['pword'] .= $encryption_key;

// then Return the SHA-1 encryption
$password = sha1($_POST['pword']); 
```

# python - Python 解释器如何将 int 转换为 long？

> ID：15778135
> 
> 赞同：3
> 
> 时间：2013-04-03T02:59:15.957
> 
> 标签：python, type-conversion

将 int 转换为 long 时究竟会发生什么？

例如：

```
a = sys.maxint-1
a = a+2 
```

的声明中发生了什么 `a = a + 2`？

Python 解释器如何处理溢出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T03:26:35.363

让我们[阅读源代码](http://hg.python.org/cpython/file/5d99042bd40f/Objects/intobject.c#l471)（我的机器上有 python2.7.3）：

这是添加的地方（据我所知）：

```
static PyObject *
int_add(PyIntObject *v, PyIntObject *w)
{
    register long a, b, x;
    CONVERT_TO_LONG(v, a);
    CONVERT_TO_LONG(w, b);
    /* casts in the line below avoid undefined behaviour on overflow */
    x = (long)((unsigned long)a + b);
    if ((x^a) >= 0 || (x^b) >= 0)
        return PyInt_FromLong(x);
    return PyLong_Type.tp_as_number->nb_add((PyObject *)v, (PyObject *)w);
} 
```

到目前为止，还不错——我们从宏`long`中的 python 整数类型中获得了 C 类型。`CONVERT_TO_LONG`然后他们做一个加法。请注意他们如何通过转换各种 long 来提取一些有趣的技巧以检测溢出。* 如果没有检测到溢出，他们将 C 转换`long`回 python 对象并返回它。如果出现溢出，您可以看到他们然后再次尝试添加——这一次，使用 python`long`类型 ( `PyLong_Type`)。

如果您查看`int_sub`，您会发现它几乎是同一件事（检测下溢的位技巧略有不同）。 `int_mul`似乎有点复杂，并带有一个很好的大块注释。确实，代码中充斥着关于它们如何在不同情况下处理上溢/下溢的评论。这是非常有用的。

*   我现在有点太累了，无法解开它，但如果你这样做了，请随时发表评论（或只是编辑）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T03:09:49.890

第一的，

> int 和 long 被“统一”了几个版本。在此之前，可以通过数学运算溢出 int。
> 
> 3.x 通过完全消除 int 并且只有 long 进一步推进了这一点。

基于此处的问题，[Python 如何管理 int 和 long？](https://stackoverflow.com/questions/2104884/how-does-python-manage-int-and-long)

`integers`此外，根据 [http://docs.python.org/3.1/whatsnew/3.0.html](http://docs.python.org/3.1/whatsnew/3.0.html)不再有限制

> sys.maxint 常量已被删除，因为整数值不再有限制。但是，sys.maxsize 可以用作大于任何实际列表或字符串索引的整数。它符合实现的“自然”整数大小，并且通常与同一平台上先前版本中的 sys.maxint 相同（假设相同的构建选项）。

**基本上**：

*Python 将对于整数变得太大的数字无缝转换为长整数。*

文档[在这里](http://docs.python.org/release/1.4/ref/ref5.html)

# python - tkinter：如何制作不使用 winico 的系统托盘应用程序？

> ID：15778137
> 
> 赞同：3
> 
> 时间：2013-04-03T02:59:27.103
> 
> 标签：python, tkinter, pywin32, system-tray

Question [Tkinter：如何制作系统托盘应用程序？](https://stackoverflow.com/questions/4385656/tkinter-how-to-make-a-system-tray-application)和其他搜索结果表明，这可以使用 winico 完成。但是winico不支持x64。由于现在大多数人（包括我）都使用 x64 PC，winico 不再工作。

必须有一些其他方法可以做到这一点，而不是使用 winico。我知道 PyWin32 有效，但我不知道如何。有人可以给我一个例子吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:15:13.903

我发现了这个，它工作正常（虽然需要更改一些代码）

[http://www.brunningonline.net/simon/blog/archives/SysTrayIcon.py.html](http://www.brunningonline.net/simon/blog/archives/SysTrayIcon.py.html)

# python - Python 类属性引用

> ID：15778138
> 
> 赞同：2
> 
> 时间：2013-04-03T02:59:30.497
> 
> 标签：python, class

这是我从一个 python 类教程中找到的示例代码。

```
class MyClass:
    i = 12345
    def f(self):
        return 'hello world'

print MyClass.f
print MyClass.i 
```

一旦我运行它，我期待“hello world”和“12345”的输出结果。但相反，我得到了这个

```
>>> 
<unbound method MyClass.f>
12345
>>> 
```

为什么它不给我“你好世界”？如何更改我的代码以打印出“hello world”？PS我对python类和方法一无所知，刚刚开始学习。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T03:17:31.850

首先创建一个 MyClass 的实例。

```
test = MyClass()
print test.f()
print MyClass.i 
```

您不需要为 i 创建 MyClass 的实例，因为它是类成员，而不是实例成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T03:08:14.767

一个函数总是由它的名字来调用的，这个名字用 . 来表示`()`。所以使用 `MyClass.f()`

# bash - 在 xargs 中监控进度

> ID：15778141
> 
> 赞同：3
> 
> 时间：2013-04-03T03:00:00.887
> 
> 标签：bash, shell, unix, xargs

有什么方法可以跟踪或监控进度`xargs`吗？

我正在用 for performance 替换`for`循环`find … | xargs`（特别是并行运行任务）。我读过它`parallel`有一个进度标志，但我想知道是否有办法严格使用`xargs`.

我也知道并行运行的任务`xargs`不一定会以正确的顺序完成，这增加了监控进度的复杂性。即使一个解决方案能让我大致了解进展情况，那也是一个很好的开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T21:02:22.850

If you just want to input how many lines you roughly already processed you may create simple shell function to do that

```
#!/bin/bash

#-----
##
## @function count
##
## @desc Write every n'th number (if n is 5 write 5, 10, 15, ...)
##
## @param $1 - number 
##
#-----
function count {
   typeset C=0
   while read L; do
      C=$(( C + 1 ))
      if [ $(( $C % $1 )) -eq 0 ]; then
         echo $C 1>&2
      fi
      echo "$L"
   done
}

find . | count 100 | xargs ... 
```

Small problem is that this prints number of lines passed to xargs, not number of lines already processed by the command invoked by xargs. Plus every pipe has some buffer, so it will show slightly higher number than it should. On my machine it showed ~500 lines in advance to real state but if you are processing sufficiently large number of lines 500 is negligible :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-23T03:54:24.553

如果您只是在寻找进度的一般指示，最简单的方法是在执行您想要执行的命令之前回显。

例子： `cat <someinput> | xargs -I{} sh -c 'echo {}; <somecmd>;'`

`-I{}`设置`{}`为当前正在处理的字符串

`sh -c`将允许您执行多个命令（注意：每个命令后都需要分号，*包括最后一个*.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:36:19.657

您可以使用`pv`来监视管道（虽然不是文件，因为它位于您的管道中）但是您必须告诉`pv`查找输出的大小，这看起来非常麻烦（请参阅[此答案](https://serverfault.com/a/343204)）。

我真的建议使用`parallel`，根据您要完成的任务……这正是它的设计目的。

否则，如果您安装了 Apple Developer Tools，您可以编写一个生成 Makefile 的小脚本来完成相同的任务，并确保它以您想要的方式打印进度。

# r - 使用带开关的 sapply

> ID：15778143
> 
> 赞同：4
> 
> 时间：2013-04-03T03:00:19.263
> 
> 标签：r

可以说我有以下情况：

我正在尝试将 switch 语句应用于测试中的每个术语 where`test = c("AA","bb")`和`mapping = c("AA"=5,"bb"=7)`

如果我做

```
sapply(test, switch, mapping ) 
```

我明白了

```
 AA bb
AA  5  5
bb  7  7 
```

而不是`c(5,7)`我想要的。有什么方法可以修改`sapply(test,switch,...)`前 2 个参数仍然是测试和切换，并且我能够传入一个向量进行映射？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T03:52:04.757

然后我会回答，你可以这样做：

```
mapping[test]
# AA bb 
# 5  7 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T03:15:29.350

这似乎适用于**将 sapply 与 switch 一起使用**。但坦率地说，弗洛德尔的反应是最简单的。

```
test<-c(test,test)
sapply(test,function(x) do.call("switch",as.list(c(x,mapping))))
# AA  bb  AA  bb 
#"5" "7" "5" "7" 
```

# bash - 使用 grep、sed 等来获取特定数据，但它不起作用

> ID：15778147
> 
> 赞同：1
> 
> 时间：2013-04-03T03:00:48.393
> 
> 标签：bash, shell, sed, grep

我正在使用这个命令：

```
pdftotext statement.pdf - | grep -m 1 "Provider" | sed -n "/Provider/,/Amount/p" 
```

该文件具有以下行：

```
Patient Jane Person Date 01/01/13 Provider John Q Doctor Amount $100 
```

我想要的是命令返回“John Q Doctor”——基本上是介于单词 Provider 和单词 Amount 之间的任何内容。

但是，当我运行该命令时，我得到的只是整行——而不仅仅是字符串“John Q Doctor”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:05:14.120

使用 sed：

```
sed 's/.*Provider\(.*\)Amount.*/\1/' 
```

使用 Grep（GNU）：

```
grep -oP '(?<=Provider).*(?=Amount.*)' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T03:05:14.943

sed range 命令适用于整个匹配行，如果它们在同一行上，请尝试以下操作：

```
pdftotext statement.pdf - | grep -m 1 "Provider" | 
     sed -n "s/Provider\(.*\)Amount/\1/p" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:56:00.863

```
 sed -n '/Provider/{s/.*Provider\(.*\)Amount.*/\1/p;q}' 
```

这应该工作+

# java - 在java中访问嵌套的elasticsearch字段

> ID：15778148
> 
> 赞同：3
> 
> 时间：2013-04-03T03:00:52.603
> 
> 标签：java, nested, elasticsearch

到目前为止，我按照[本指南](http://www.spacevatican.org/2012/5/12/elasticsearch-native-scripts-for-dummies/)获取了与 elasticsearch 一起使用的原生 java 脚本。使用 . 访问普通的非嵌套字段可以正常工作`doc().field("fieldname")`。

嵌套字段也一样吗？如何遍历它们并访问嵌套字段？

**编辑：**在阅读了下面 imotov 的答案后，我最终使用`include_in_root`or将嵌套字段包含在根文档中`include_in_parent`（参见[docs](http://www.elasticsearch.org/guide/reference/mapping/nested-type/)）。

```
GeoPoint[] locations = ((GeoPointDocFieldData)doc().field("places.location")).getValues();

for (GeoPoint location : locations) {
    // Do Stuff
    double lat = location.lat();
    double lon = location.lon();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T16:40:56.417

这是一个艰难的。嵌套对象在内部作为单独的文档进行索引，因此顶级 custom_filters_score 对根对象进行操作，并且无权访问嵌套对象。但是你可以做一些事情。

我认为最好的选择是将 custom_filters_score 移动到嵌套过滤器中，您的脚本将在嵌套对象上运行。请参阅[弹性搜索 - 标记强度（嵌套/子文档提升）](https://stackoverflow.com/questions/13095866/elastic-search-tagging-strength-nested-child-document-boosting)作为示例。

第二个选项是`include_in_root`在嵌套对象映射上将设置设置为 true。这样，您的所有嵌套对象字段也将在根对象中被索引，并且您将能够使用点表示法访问它们：`places.location`就好像没有嵌套一样。此选项的问题是您必须对字段进行两次索引，并且您将不知道哪个嵌套对象与您的嵌套查询匹配。

第三个选项是从源中检索嵌套对象字段。如果您的搜索产生大量结果，这将非常缓慢并且不真正适用。

# javascript - 无法让 jQuery 在本地工作

> ID：15778151
> 
> 赞同：2
> 
> 时间：2013-04-03T03:01:29.710
> 
> 标签：javascript, jquery, user-interface, load

嘿，我已经检查了比我想回忆的更多这样的 jQuery 问题，但我似乎真的无法弄清楚这一点。

以下代码将无法在本地工作。还没有机会在线测试它，但我应该能够在本地测试。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang='en' xml:lang='en' xmlns="http://www.w3.org/1999/xhtml">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>jQuery test</title>
    <link rel='stylesheet' type='text/css' href='/root/WebDev/jquery-ui-1.10.2.custom/css/ui-lightness/jquery-ui-1.10.2.custom.min.css'/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="/root/WebDev/jquery-ui-1.10.2.custom/js/jquery-1.9.1.js"></script>
  <script type="text/javascript" src="/root/WebDev/jquery-1.9.1.min.js"></script>
</head>
<body>

    <div style="height: 20px;width:20px;background-color:red;position:relative;top:50px;left:50px;"></div>
</body> 
```

和 jQuery 代码：

```
$(document).ready(function(){
$('div').click(function(){
    $('div').effect('explode');
});

}); 
```

只是作为一个说明，我在本地确实有这些 jquery 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T03:03:16.713

先放jQuery，而不是其他使用jQuery的插件、脚本、库**！**

```
 <script type="text/javascript" src="/root/WebDev/jquery-1.9.1.min.js"></script>
  <script type="text/javascript" src="/root/WebDev/jquery-ui-1.10.2.custom/js/jquery-1.9.1.js"></script>
  <script type="text/javascript" src="jquery.js"></script> 
```

对于最后一个，如果这是您拥有函数的文件，请确保路径也是正确的，

*   我不太确定您使用的这条路径：

    `/root/WebDev/jquery-ui-1.10.2.custom/js/jquery-1.9.1.js`

*   `jquery-ui-1.10.2.custom/js/`真的是您文件夹的名称吗？:)

*   以及为什么不使用`Google Hosted Libraries`和一些不错的`HTML5`标记：

```
<!DOCTYPE html>
<html>
<head>
<link  href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/smoothness/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
<script src="myfunctions.js"></script>
<meta charset=utf-8 />
<title>All you need</title>
</head>
<body>

   <div style="height: 20px;width:20px;background-color:red;position:relative;top:50px;left:50px;"></div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:04:49.883

尝试从 href 和 src 属性中删除前导斜杠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:27:09.120

原因是网络本身无法找到 jquery 文件。尝试使用 page.resolveurl

Page.ResolveUrl 始终将其 URL 作为应用程序绝对路径返回。

解析 URL 始终为您提供虚拟目录的根目录。

例如

```
<script type="text/javascript" src='<%=page.resolveurl("~/javascript/jquery-ui.js")%>'></script> 
```

# java - 为什么 dbcursor.count() 不符合 hasNext-then-next 迭代的次数？

> ID：15778154
> 
> 赞同：0
> 
> 时间：2013-04-03T03:01:34.083
> 
> 标签：java, mongodb

一个奇怪的问题：我使用 db.collectionName.count() 打印 dbcursor.count() ，它产生的数字与我从 mongo shell 得到的数字相同。

然而，当我这样做时，

```
DBCursor cursor = myCollection.find(someQuery);
int count = cursor.count();
int cnt = 0;
while (cursor.hasNext()) {
    cnt++;               
    DBObject dbObject = (DBObject) cursor.next();
} 
```

之后，count和cnt给出了冲突的结果：前者如我所料，而后者远不如前者。

然后我检查了 mongodb DBCursor API 文档。 [http://api.mongodb.org/java/2.0/com/mongodb/DBCursor.html](http://api.mongodb.org/java/2.0/com/mongodb/DBCursor.html)

而从 count() 和 hasNext() 的措辞

```
public int count()
    throws MongoException

Counts the number of elements in this cursor.  

Returns:
       the number of elements 
```

和

```
public boolean hasNext()

Checks if there is another element.

Returns:
    if there is another element 
```

这意味着 count 和 cnt 应该相同。并且只是为了记录，在这个过程中mongodb既没有插入也没有删除操作。（我在镜像数据库上测试只是为了测试）

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T02:57:42.483

正如@assylias 评论的那样，这可能是由于索引损坏。

# c - 更改 argv[0] 在 Ubuntu (C) 中不起作用

> ID：15778162
> 
> 赞同：2
> 
> 时间：2013-04-03T03:02:36.573
> 
> 标签：c, gcc, ubuntu

所以我有这个在C运行时更改进程名称的任务，我偶然发现了这个：[http ://www.uofr.net/~greg/processname.html](http://www.uofr.net/~greg/processname.html)

现在首先，我知道改变 argv[0] 的危险（但是关于 Linux 和 UNIX 的东西还有很长的路要走）所以请不要讲它，我只是想知道为什么它不是在 Ubuntu 上工作。

这是我使用的测试源：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void main(int argc, char *argv[]) {

    int argv0size = strlen(argv[0]);
    int onetwothree = 1;
    char* abc = (char *) malloc(sizeof(char) * (17 + 1));
    sprintf(abc,"ApplicationName%.3d",onetwothree); 
    strncpy(argv[0], abc ,argv0size);     
    getchar(); 
} 
```

我只在 Mac OS X 和 Ubuntu 上对其进行了测试，并且它在 Mac OS X 上运行。我不知道为什么它在 Ubuntu 上不起作用。它不起作用的可能原因是什么？

我使用 gcc 作为编译器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T04:03:11.017

> 所以我有这个在C运行时更改进程名称的任务，我偶然发现了这个： [http ://www.uofr.net/~greg/processname.html](http://www.uofr.net/~greg/processname.html)

我建议您使用的参考不是由操作系统或 C 专家编写的。也许它适用于*某些*操作系统，但它不需要在 C 中以这种方式工作。

> 现在首先，我知道改变 argv[0] 的危险（但是关于 Linux 和 UNIX 的东西还有很长的路要走）所以请不要讲它，我只是想知道为什么它不是在 Ubuntu 上工作。

正如 WhozCraig 在他的评论中所说，您当然可以修改 argv 数组以及它指向的数组。这并不意味着 Ubuntu 需要在其进程列表中使用该修改。

> 我只在 Mac OS X 和 Ubuntu 上对其进行了测试，并且它在 Mac OS X 上运行。我不知道为什么它在 Ubuntu 上不起作用。它不起作用的可能原因是什么？

如果您正在寻找理由，请考虑滥用的可能性。如果在进程列表中使用了您自己的副本`argv[0]`，诸如 kaiten 之类的木马将能够像以前一样伪造其进程名称，从而使它们更难以检测和删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T04:17:42.927

不幸的是，在 C 中不能保证 argv[0] 实际上是进程名称。在 Unix/Linux 中，它可以是父进程选择使用的任意值（参见 'execv/execve'）。这意味着它不一定映射到进程名称，尽管它可能基于实现。

对于 Ubuntu（可能还有 MacOS？），以下内容应该更通用：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#ifdef __linux__
#include <sys/prctl.h>
#endif

void main(int argc, char *argv[]) {

  int argv0size = strlen(argv[0]);
  int onetwothree = 1;
  char* abc = (char *) malloc(sizeof(char) * (17 + 1));
  sprintf(abc,"ApplicationName%.3d",argv0size); 
  #ifdef __linux__
    prctl(PR_SET_NAME, abc, 0, 0, 0);
  #else
    strncpy(argv[0], abc ,argv0size);     
  #endif
  getchar(); 
} 
```

编辑：删除了实际的应用程序名称。
EDIT_2： prctl 在 OS X 上不可用

# c# - CompilationRelaxations 属性不起作用

> ID：15778165
> 
> 赞同：0
> 
> 时间：2013-04-03T03:03:06.293
> 
> 标签：c#, .net

我在 .net 4.5 中有一个简单的控制台应用程序。

```
公开课程序
{
    公共静态无效 Main()
    {
        字符串 s1 = "s1";
        字符串 s2 = "s1";

        Console.WriteLine(ReferenceEquals(s1, s2));
    }
}

```

由于字符串实习，这是真的。但是，当我将 CompilationRelaxations 属性添加到 AssemblyInfo 文件时，我仍然看到输出为 true。

[程序集：CompilationRelaxations(CompilationRelaxations.NoStringInterning)]

即使将属性添加到我的 Program 类似乎也不会改变输出。[CompilationRelaxations(CompilationRelaxations.NoStringInterning)]

将其更改为 .net 4.0 应用程序也没有任何效果。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:18:08.983

这是[文档](http://msdn.microsoft.com/da-dk/library/system.runtime.compilerservices.compilationrelaxations.aspx)中的引用：

> 将程序集标记为不需要字符串文字实习。

它不会阻止编译器进行字符串实习，只是提供一个不需要它的提示。在 MSDN 和 CLI 规范中，它的文档都很差。另请参阅此[MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/c1c1d969-8d6b-4aaf-b7f4-3febedf3cd18/)。

# java - 我正在尝试让我的应用程序连接到我的服务器。但它会抛出这些错误。如何修复 MainThreadException？

> ID：15778166
> 
> 赞同：-2
> 
> 时间：2013-04-03T03:03:12.753
> 
> 标签：java, android, eclipse, networkonmainthread

```
04-02 21:59:03.086: E/log_tag(27382): Error in http connection android.os.NetworkOnMainThreadException
04-02 21:59:03.106: E/log_tag(27382): Error converting result java.lang.NullPointerException
04-02 21:59:03.106: E/log_tag(27382): Error parsing data org.json.JSONException: End of input at character 0 of 
```

从以下代码：

```
package net.example.glutefree;

import android.app.Activity;
import android.os.Bundle;
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.util.Log;
import android.widget.LinearLayout;
import android.widget.TextView;

public class Networking extends Activity {
    TextView txt;
    int request_Code = 1;
//called when activity is first created
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_networking);
         // Create a crude view - this should really be set via the layout resources 
        // but since its an example saves declaring them in the XML. 
        LinearLayout rootLayout = new LinearLayout(getApplicationContext()); 
        txt = new TextView(getApplicationContext()); 
        rootLayout.addView(txt); 
        setContentView(rootLayout); 
        // Set the text and call the connect function. 
        txt.setText("Connecting...");
      //call the method to run the data retreival
        txt.setText(getServerData(KEY_121));
    }

    public static final String KEY_121 = "http://WEBSITE/application_query.php";

    private String getServerData(String returnString) {
       String UPC = getIntent().getStringExtra("UPCA");
       InputStream is = null;
       String result = "";
        //the upc data to send
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

        nameValuePairs.add(new BasicNameValuePair("UPCA",UPC));

        //http post
        try{

                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(KEY_121);
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();

        } catch(Exception e) {
                Log.e("log_tag", "Error in http connection "+e.toString());
        }

        //convert response to string
        try {
                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                }
                is.close();
                result=sb.toString();
        } catch(Exception e) {
                Log.e("log_tag", "Error converting result "+e.toString());
        }
        //parse json data
        try {
                JSONArray jArray = new JSONArray(result);
                Log.e("log_tag", "Result "+result.toString()); 
                for(int i=0;i<jArray.length();i++) {
                        JSONObject json_data = jArray.getJSONObject(i);
                        Log.i("log_tag","UPCA: "+json_data.getString("UPCA")+
                                ", Product: "+json_data.getString("Product"));
                        //Get an output to the screen
                        returnString += "\n\t" + jArray.getJSONObject(i);
                }
        } catch(JSONException e) {
                Log.e("log_tag", "Error parsing data "+e.toString());
        }
        return returnString;
    }   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:37:38.013

采用

```
new Thread() {
    public void run() {
        final String data = getServerData(KEY_121);
        if (data != null)
            runOnUiThread(new Runnable()
            {
                public void run()
                {
                    txt.setText(data);
                }
            });
    }
}.start(); 
```

代替：

```
 //call the method to run the data retreival
 txt.setText(getServerData(KEY_121)); 
```

您不能在主线程上运行长任务。但是你必须使用 UI 线程来设置文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:08:54.433

问题是您正在尝试`getServerData()`从 UI 线程执行网络请求 ()。不允许这样做以避免 ANR（例如，在缺少网络连接或响应缓慢的情况下）。

有关如何为您的网络相关操作准备线程的信息，请参阅[无痛线程文章。](http://android-developers.blogspot.kr/2009/05/painless-threading.html)然后，将所有需要网络操作的代码移动到分离线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T03:09:07.223

Android 不允许您在主 (UI) 线程上执行长时间运行的网络操作，因为这样做会导致整个 UI 锁定。您需要创建一个新线程来处理您的网络操作。我建议创建一个 AsyncTask，您可以通过调用从主线程任务运行它

```
new AST(this).execute;  //assuming you've created an AsyncTask class called AST 
```

这是 AsyncTasks 的文档：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T03:09:33.810

问题是您正在 UI 线程上执行网络连接。为了性能和用户体验，Android 不允许这样做。尝试在线程中围绕 getServerData() 。

```
new Thread() {
    public void run() {
        getServerData();
    }
}.start(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T03:09:44.620

您不应该在 Android 应用程序的主线程上进行网络活动。你需要为它创建一个新线程。

看到[这个](http://developer.android.com/training/articles/perf-anr.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T03:12:55.337

在所有 Android 3.0 及以上版本中，如果您在 UI 线程（主线程）上进行任何网络调用，都会抛出该异常，应用程序将立即崩溃。

相反，您应该在 AsyncTask 上创建一个子类并从那里调用您的 getServerData 方法。

[这](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)是有关该主题的官方博客文章。

[在此处](http://developer.android.com/reference/android/os/AsyncTask.html)查看 AsyncTask

# javascript - 在空格处拆分句子并找到一个单词

> ID：15778170
> 
> 赞同：0
> 
> 时间：2013-04-03T03:03:48.553
> 
> 标签：javascript, html, anchor, hyperlink

好的，这是一个让我很困惑的微笑问题。我正在尝试制作一个 HTML 文本框，当提交时，文本会被扔进一个函数并检查是否有任何链接。如果有链接，则将其包裹在锚标记中并制成可点击的链接。

所以我让那部分工作，但我随后创建了一个编辑功能。因此，当在评论上按下编辑按钮时，会显示一个带有已创建评论的弹出窗口。注释的值（取自 XML 文件）放置在此编辑文本区域的值中。但是links的值还是有anchor标签的，所以看起来非常的乱。

我正在尝试创建一个运行此评论并删除任何锚标记的函数，并且仅在锚标记中保留剩余的文本。

简单的例子，当用户发表评论时，链接如 www.stackoverflow.com，它将被保存在我的 XML 文档中，如下所示：

```
<a href="www.stackoverflow.com">www.stackoverflow.com</a> 
```

如果用户在开头发布带有 http:// 的链接，它也适用。

我现在正试图将链接恢复为以前的普通文本。

这是我的两个功能。第一个，`convertLink`完美运行。`convertLinkEdit`正在尝试恢复该过程，但我没有运气。

```
function convertLink(text) {
  var words = text.split(' ');
  var newText = '';

  for (var i = 0; i < words.length; i++) {
    var word = words[i];
    if (word.indexOf('http://') === 0) {
      word = '<a href=" ' + word + ' ">' + word + '</a>';
    } else if (word.indexOf('www.') === 0) {
      word = '<a href=" http://' + word + '" >' + word + '</a>';
    }

    newText += word + ' ';
  }

  return newText;
}

function convertLinkEdit(text) {
  var words = text.split(' ');
  var newText = '';

  for (var i = 0; i < words.length; i++) {
    var word = words[i];
    if (word.indexOf('href=') === 0) {
      //if index of finds "href=", it means a link is coming up
      //Therefore, since everything is split at blank spaces,
      //after the next blank space will be the current text that needs saving
    }

    newText += word + ' ';
  }

  return newText;
} 
```

在我的非工作函数内部是关于我认为应该如何完成的评论，尽管我不确定如何实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:03:34.573

实际上，DOM 足够聪明，可以为您将链接解析为文本，因此您可以简单地使用[它（链接到 jsFiddle）](http://jsfiddle.net/2b8uz/)：

```
function convertLinkEdit(text) {
    // simply create an empty <p> element
    var dummy = document.createElement('p');

    // change it's HTML contents to the comment one
    dummy.innerHTML = text;

    // return the TEXT value of our <p>
    return dummy.textContent || dummy.innerText; // we first look up textContent* (newer browsers) and fall back to innerText (older browsers) if needed
} 
```

*****有关 textContent 的信息，请参见此处：[https ://developer.mozilla.org/en-US/docs/DOM/Node.textContent](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)

我不知道上面的浏览器兼容性，所以，[这里是（链接到 jsFiddle）](http://jsfiddle.net/2b8uz/1/) RobG 的变体应用于您的函数：

```
function convertLinkEdit(text) {
    var dummy = document.createElement('p');
    dummy.innerHTML = text;

    var links = dummy.getElementsByTagName('a');

    for (var i = 0, l = links.length; i < l; i++)
    {
        var link = links[i];
        var node = document.createTextNode(link.textContent || link.innerText);
        link.parentNode.replaceChild(node, link);
    }

    return dummy.textContent || dummy.innerText;
} 
```

**仅供参考：**您应该始终使用[DOM](https://developer.mozilla.org/en-US/docs/DOM)及其用于解析/操作 HTML 的 API。强烈建议不要将 Regex 用于 HTML 解析。
是的，它在某些情况下可能会起作用，但你无法控制它，因为它无法正确区分属性、元素和 DOM 附带的所有其他混乱。

## 更新：

[http://jsfiddle.net/2b8uz/5/](http://jsfiddle.net/2b8uz/5/)这里是更新版本。

问题是，正如 plaxl 已经指出的那样，那个`getElementsByTagName`和任何其他`getElement..`家庭成员都将返回一个 NodeList，它是一个 Live 对象。一旦 NodeList 中的元素发生更改，它就会自动更新。

[我添加了一个从这里借来](https://stackoverflow.com/questions/3199588/fastest-way-to-convert-javascript-nodelist-to-array)的小片段，它将在进入转换循环之前将 NodeList 转换为简单数组。

虽然，如果该函数的第一个版本适合您，请使用那个版本，它应该比循环 2 次要快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T03:26:31.037

这应该可行，但是可能有更有效的方法来做到这一点。我测试了性能，它似乎比公认的解决方案快得多，但我想它可能不那么可靠。这是测试[http://jsperf.com/replace-links](http://jsperf.com/replace-links)

```
 function convertLinkEdit(text) {
    var rx = /<a [^>]*?href="([^"]+)"[^>]*>[^<]*<\/a>/g;

    convertLinkEdit = function (text) {
        return text.replace(rx, '$1');
    };

    return convertLinkEdit(text);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T03:21:25.533

考虑查找链接，然后将链接元素替换为其内容的文本节点。以下内容将页面中的每个链接替换为其内容：

```
windowonload = function() {

  var links = document.links;
  var link, node;
  var i = links.length;

  while (i--) {
    link = links[i];
    node = document.createTextNode(link.textContent || link.innerText);
    link.parentNode.replaceChild(node, link);
  }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T04:03:15.593

您可以使用正则表达式来查找`href`. 因为你的话将是`href="someurl">`

```
var res = word.match(/^href="(.+)">/;
if (res && res.length == 2) 
{
     //res[1] will be your url, do whatever you want with it
} 
```

**假设**您的链接是按照我之前提到的那样创建的，并且您的 href 属性有`"`而不是`'`引号。

# django - Ubuntu 上的 Python ImportError：没有名为 app.urls 的模块

> ID：15778172
> 
> 赞同：1
> 
> 时间：2013-04-03T03:03:54.283
> 
> 标签：django, apache, python-2.7, ubuntu-12.04, importerror

我最近为一个学校项目安装了带有 Apache、Python 和 Django 的 Ubuntu。我在实际启动和运行它时遇到了问题。我跟着这个[教程](http://www.lennu.net/2012/05/14/django-deployement-installation-to-ubuntu-12-dot-04-server/)

一切都如图所示。我得到了默认的“它工作！” 页。当我开始为该项目实际添加我的应用程序时，我的问题就出现了。我收到以下错误：

```
[Tue Apr 02 18:20:27 2013] [error] Internal Server Error: /login
[Tue Apr 02 18:20:27 2013] [error] Traceback (most recent call last):
[Tue Apr 02 18:20:27 2013] [error]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/core/handlers/base.py", line 92, in get_response
[Tue Apr 02 18:20:27 2013] [error]     response = middleware_method(request)
[Tue Apr 02 18:20:27 2013] [error]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/middleware/common.py", line 69, in process_request
[Tue Apr 02 18:20:27 2013] [error]     if (not urlresolvers.is_valid_path(request.path_info, urlconf) and
[Tue Apr 02 18:20:27 2013] [error]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/core/urlresolvers.py", line 551, in is_valid_path
[Tue Apr 02 18:20:27 2013] [error]     resolve(path, urlconf)
[Tue Apr 02 18:20:27 2013] [error]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/core/urlresolvers.py", line 440, in resolve
[Tue Apr 02 18:20:27 2013] [error]     return get_resolver(urlconf).resolve(path)
[Tue Apr 02 18:20:27 2013] [error]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/core/urlresolvers.py", line 319, in resolve
[Tue Apr 02 18:20:27 2013] [error]     for pattern in self.url_patterns:
[Tue Apr 02 18:20:27 2013] [error]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/core/urlresolvers.py", line 347, in url_patterns
[Tue Apr 02 18:20:27 2013] [error]     patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
[Tue Apr 02 18:20:27 2013] [error]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/core/urlresolvers.py", line 342, in urlconf_module
[Tue Apr 02 18:20:27 2013] [error]     self._urlconf_module = import_module(self.urlconf_name)
[Tue Apr 02 18:20:27 2013] [error]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
[Tue Apr 02 18:20:27 2013] [error]     __import__(name)
[Tue Apr 02 18:20:27 2013] [error]   File "/srv/pumpit/pumpit2/pumpitproj/pumpitproj/urls.py", line 20, in <module>
[Tue Apr 02 18:20:27 2013] [error]     url(r'^login/', include('pumpitproj.loginhandler.urls')),
[Tue Apr 02 18:20:27 2013] [error]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/conf/urls/__init__.py", line 25, in include
[Tue Apr 02 18:20:27 2013] [error]     urlconf_module = import_module(urlconf_module)
[Tue Apr 02 18:20:27 2013] [error]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
[Tue Apr 02 18:20:27 2013] [error]     __import__(name)
[Tue Apr 02 18:20:27 2013] [error] ImportError: No module named loginhandler.urls
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx] mod_wsgi (pid=18637): Exception occurred processing WSGI script '/srv/pumpit/pumpit2/conf/apache/django.wsgi'.
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx] Traceback (most recent call last):
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 255, in __call__
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     response = self.get_response(request)
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/core/handlers/base.py", line 178, in get_response
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/core/handlers/base.py", line 217, in handle_uncaught_exception
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     return debug.technical_500_response(request, *exc_info)
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/views/debug.py", line 69, in technical_500_response
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     html = reporter.get_traceback_html()
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/views/debug.py", line 298, in get_traceback_html
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     return t.render(c)
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/template/base.py", line 140, in render
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     return self._render(context)
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/template/base.py", line 134, in _render
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     return self.nodelist.render(context)
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/template/base.py", line 830, in render
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     bit = self.render_node(node, context)
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/template/debug.py", line 74, in render_node
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     return node.render(context)
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/template/debug.py", line 84, in render
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     output = self.filter_expression.resolve(context)
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/template/base.py", line 606, in resolve
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     new_obj = func(obj, *arg_vals)
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/template/defaultfilters.py", line 715, in date
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     return format(value, arg)
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/utils/dateformat.py", line 312, in format
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     return df.format(format_string)
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/utils/dateformat.py", line 35, in format
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     pieces.append(force_text(getattr(self, piece)()))
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/utils/dateformat.py", line 216, in r
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     return self.format('D, j M Y H:i:s O')
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/utils/dateformat.py", line 35, in format
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     pieces.append(force_text(getattr(self, piece)()))
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/utils/encoding.py", line 99, in force_text
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     s = s.__unicode__()
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/utils/functional.py", line 130, in __text_cast
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     return func(*self.__args, **self.__kw)
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/utils/translation/__init__.py", line 71, in ugettext
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     return _trans.ugettext(message)
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/utils/translation/trans_real.py", line 276, in ugettext
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     return do_translate(message, 'ugettext')
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/utils/translation/trans_real.py", line 258, in do_translate
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     _default = translation(settings.LANGUAGE_CODE)
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/utils/translation/trans_real.py", line 172, in translation
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     default_translation = _fetch(settings.LANGUAGE_CODE)
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/utils/translation/trans_real.py", line 154, in _fetch
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     app = import_module(appname)
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]   File "/srv/pumpit/venv/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx]     __import__(name)
[Tue Apr 02 18:20:27 2013] [error] [client xx.xxx.xxx.xxx] ImportError: No module named loginhandler 
```

我的目录设置如下：

```
+ srv
---+ pumpit
------+ pumpit2
---------+ conf
------------+ apache
---------+ pumpitproj
------------+ loginhandler
------------+ main
------------+ memberplanhandler
------------+ pumpitproj
------------+ site_media 
```

我在 /srv/pumpit/pumpit2/pumpitproj/pumpitproj/settings.py 中的 INSTALLED_APPS 和 ROOT_URLCONF 如下所示：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'pumpitproj.loginhandler',
)

ROOT_URLCONF = 'pumpitproj.urls' 
```

我的 /srv/pumpit/pumpit2/pumpitproj/pumpitproj/urls.py 如下：

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
# admin.autodiscover()

urlpatterns = patterns('',
    url(r'^login/', include('pumpitproj.loginhandler.urls')),
) 
```

我的 /srv/pumpit/pumpit2/pumpitproj/loginhandler/urls.py 如下：

```
from django.conf.urls import patterns, url
from loginhandler import views

urlpatterns = patterns('pumpitproj.loginhandler.views',
    url(r'^$', 'index'),
) 
```

我的 /srv/pumpit/pumpit2/conf/apache/django.wsgi 如下：

```
import os
import sys

root_path = os.path.abspath(os.path.join(os.path.dirname(__file__), '..', '..',$
sys.path.insert(0, os.path.abspath(os.path.join(root_path, 'venv/lib/python2.7/$
sys.path.insert(0, os.path.abspath(os.path.join(root_path, 'pumpit2')))
sys.path.insert(0, os.path.abspath(os.path.join(root_path, 'pumpit2', 'pumpitpr$

os.environ['DJANGO_SETTINGS_MODULE'] = 'pumpitproj.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

我不确定在这方面可能还需要什么帮助。我确信这是我完全忽略的简单事情。

我花了很多时间寻找答案。我似乎发现很多其他人都有 ImportError 问题，但是我遇到的对其他人有用的答案都没有对我有用。我能得到的任何帮助将不胜感激。

**更新：**我最终只是删除了 loginhandler 文件夹并重新制作了应用程序并解决了问题。我不知道出了什么问题。

虽然，我显然不知道删除模块/应用程序的正确方法，因为当我尝试制作新模块/应用程序时，它表示已经存在具有该名称的模块。我最终不得不给它起个别的名字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:20:42.797

在已安装的应用程序中正确添加您的应用程序名称，此处添加了“pumpitproj.loginhandler”，请将其更改为“loginhandler”并正确设置您的ROOT_URLCONF。

如果您在应用程序之外创建 urls.py，则设置

```
ROOT_URLCONF = 'urls' 
```

如果您在模块 loginhandler 中创建 urls.py，则设置

```
ROOT_URLCONF = 'loginhandler.urls' 
```

也改变

```
 url(r'^login/', include('pumpitproj.loginhandler.urls')) 
```

至

```
 url(r'^login/', include('loginhandler.urls')) 
```

我的 /srv/pumpit/pumpit2/pumpitproj/loginhandler/urls.py 如下：

```
from django.conf.urls import patterns, url
from loginhandler import views

urlpatterns = patterns('loginhandler.views',
    url(r'^$', 'index'),
) 
```

试试这个改变。

# regex - 组合多个正则表达式模式

> ID：15778173
> 
> 赞同：6
> 
> 时间：2013-04-03T03:03:54.647
> 
> 标签：regex, groovy

多年来，我一直是一名正则表达式从业者，主要是在 perl 中，您可以在其中做一些方便的事情，例如：

```
my $delim  = qr#[-\:/]#;                       # basic enough
my $field1 = qr/(\d{8})/;                      # basic enough
my $field2 = qr/(?:one|two|three)(\d{8,10})/;  # basic enough
...
my $re = qr/$field1${delim}$field2/;      # beautiful magicks
while (<>) { 
  /$re/ and print "$1\n";
} 
```

关键不是你可以预编译它们，而是你可以在另一个正则表达式中使用一个作为变量来构建一个更大的复合正则表达式，它*实际上是可读*的。单独的部分可以使用简单的测试数据进行测试，并且复合可以是动态的（例如，$delim 可以作为参数传递给 sub）。

问题是，如何在 Java 中解决这个问题，模式/匹配器方法统治着这一天。

这是我的刺：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

Pattern delim  = Pattern.compile("[-\:/]");
Pattern field1 = Pattern.compile("(\d{8})");
Pattern field2 = Pattern.compile("(?:one|two|three)(\d{8,10})");
Pattern re_pat = Pattern.complle(
  field1.pattern() + delim.pattern() + field2.pattern();
)
...
Matcher re = re_pat.matcher(input); 
```

这是可靠的（有什么陷阱吗？），或者是最好的 Java 等价物吗？也可以随意回答与 Groovy 相关的问题，因为这是我编写此代码的最终目标（但似乎 Groovy 或多或少依赖于底层的 Java 正则表达式实现）。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T03:51:30.500

在您的示例中，我根本看不到任何预编译正则表达式的理由。如果我这样做，我只需定义`delim`、`field1`和`field2`as `String`s，并将它们组合起来。

除此之外，Groovy 在隐藏 Java 冗长正则表达式的丑陋方面做得很好。一个例子看起来像这样：

```
def delim  = /[-:\/]/
def field1 = /(\d{8})/
def field2 = /(?:one|two|three)(\d{8,10})/
def re_pat = /$field1${delim}$field2/

// optionally import Matcher and explicitly declare re
def re = input =~ re_pat 
```

您不必担心事先编译正则表达式，因为`Pattern`它会缓存它已经编译的任何正则表达式（如果我没记错的话）。如果你想预编译模式，使用这个：

```
def re_pat = ~/$field1${delim}$field2/ 
```

* * *

这里需要注意一件事：`/ /`Groovy 中的分隔符实际上只是`String`s（或者`GStrings`如果它们包含变量引用）。它们不是真正的正则表达式，但它们具有不需要双重转义所有内容的便利。

如果您想避免转义 even `/`，那么您可以在 Groovy 1.8 及更高版本中使用[美元斜线字符串：](http://groovy.codehaus.org/Groovy+1.8+release+notes#Groovy18releasenotes-Dollarslashystrings)

```
def delim = $/[-:/]/$ 
```

不过，我认为在您的示例中没有必要这样做。

# imagemagick - 使用 imagemagick 组合图块以创建图像

> ID：15778186
> 
> 赞同：3
> 
> 时间：2013-04-03T03:05:06.293
> 
> 标签：imagemagick, imagemagick-convert

我使用 imageMagick 将图像分割成图块。我使用以下命令：

```
convert -crop 100x100 source.png tile%d.png 
```

这会创建一堆平铺图像。有没有办法从瓷砖重新创建原始图像？

我正在为不同的 source.png 文件（不同尺寸）执行此操作，因此我并不总是知道每个图像会有多少个图块（即多少行/列）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T05:06:04.787

我认为您无法使用 a 执行此操作，`tile%d.png`因为您不知道有多少行和列。如果图像大小不是 100 的倍数，您最终会得到不同大小的图块。然后，您可以检查文件大小以查找非“全尺寸”图块。如果原始尺寸为 1000x2000，这将再次崩溃。

我认为您需要在文件名中包含行和列。您将需要 IM v6.4.8-4 及更高版本。

```
convert source.png -crop 100x100 -set filename:tile \
    "%[fx:page.y/100+1000]_%[fx:page.x/100+1000]" \
    +repage +adjoin "file_tiles_%[filename:tile].png" 
```

神奇的是`fx:page.x/100+1000`。`100`需要匹配您的裁剪大小对于 x 并且是`1000`使文件的所有行最多为 9999（因此最大为 8999 行和列）或 899，如果您不想进行数学运算以从数字中删除 1000 .

如果你需要`tile%d.png`，你总是可以创建两个集合。当您去恢复原件时，您需要执行以下操作：

```
montage -mode concatenate -tile 4x file_tiles_*.png rejoined.png 
```

您将需要计算出列数。这可以从第 1000 行中的最后一个解析...

```
ls -1 file_tiles_1000* | tail -1 | sed 's/.*_//g; s/\.png//g; s/^.000*//g' 
```

[§ 瓷砖裁剪](http://imagemagick.org/Usage/crop/#crop_tile)

# objective-c - 网页何时真正完成渲染？

> ID：15778198
> 
> 赞同：1
> 
> 时间：2013-04-03T03:05:59.903
> 
> 标签：objective-c, macos, webview, webkit

我有一个 WebView，我想知道 webview 何时完成渲染。我设置了 WebFrameLoad 委托并找到`webView:didFinishLoadForFrame:`被调用。在这个委托函数中，我的代码如下

```
if ([sender mainFrame] == frame) {
    NSLog(@"mainFrame");
}else{
    NSLog(@"frame");
} 
```

我希望在网页完成渲染时打印一次“mainFrame”，事实上这在大多数情况下效果很好。然而，一些网页需要重定向，因此“mainFrame”被打印了很多次。当需要重定向的网页完成渲染时，是否有真正调用一次的函数。

我尝试了名为“WebViewProgressFinishedNotification”的通知。但结果是一样的。有谁告诉我为什么？我怎么解决这个问题？

# c++ - QMainWindow 参数

> ID：15778199
> 
> 赞同：2
> 
> 时间：2013-04-03T03:06:07.497
> 
> 标签：c++, qt

你如何将第一个参数传递给 a `QMainWindow`？

我希望能够将多个不同的参数传递给 QMainWindow。我的问题是，即使我修改了构造函数以允许传递第二个/第三个/第四个参数，我仍然找不到实例化`QMainWindow`. 我不知道如何传递第一个参数（带有 的部分`QWidget *parent = 0`）。

例如，如果我想将一个整数传递给 my`QMainWindow`来实例化它，我会键入：`MainWindow( what_goes_here?, myInt )`吗？

**主文件**

```
#include "mainwindow.h"
#include <QApplication>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();

    return a.exec();
} 
```

**主窗口.h**

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>

namespace Ui {class MainWindow;}

class MainWindow : public QMainWindow {
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    Ui::MainWindow *ui;
};

#endif // MAINWINDOW_H 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T03:15:11.043

这是代码：

```
 explicit MainWindow(int a,QWidget *parent = 0);

MainWindow::MainWindow(int a,QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    qDebug()<<a;
    ui->setupUi(this);
}

MainWindow w(9);
    w.show(); 
```

帮你？

# ios - UILabel 上显示的 AFJSONRequestOperation 进度

> ID：15778203
> 
> 赞同：0
> 
> 时间：2013-04-03T03:06:45.687
> 
> 标签：ios, uilabel, afnetworking

给定以下代码，假设我连接到服务并获取一些项目，我需要更新标签以显示项目“处理”时的进度

问题是操作阻塞了主线程，并且 UILabel 只有在迭代所有项目后才会更新。

如何修复此代码，以便每次都会更新？

```
AFJSONRequestOperation *operation = 
[AFJSONRequestOperationJSONRequestOperationWithRequest:request 
success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
{
   datas = [JSON valueForKeyPath:@"data"];
   for(int i = 0; i < [datas count]; i ++)
   {
       //do stuff with the item

       NSMutableString *progressText = [[NSMutableString alloc] 
            initWithFormat:@"Done with %d out of  %@ items", i, [datas count]];
       self.progressLabel.text = progressText;
   }
 }];

 [operation start] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:05:54.150

This kind of http request for json data will get response only once, and you can get all the data in the "JSON" object. So there is no need to show progress. Only in case that a request will receive multiple responses , you need to show the progress .For example ,a request for a webview.

# ios - 防止在 iOS 的 Scrollview 中拉伸图像

> ID：15778205
> 
> 赞同：0
> 
> 时间：2013-04-03T03:07:02.570
> 
> 标签：ios, uiscrollview, uibutton, imageview, autoresizingmask

我在滚动视图中添加了一些按钮。我正在用图像设置按钮的背景。当您看到输出时，图像似乎被拉伸了。我想避免这种情况。

所以我试过这个：

创建了一个自定义视图，它处理图像并使该图像远离边缘固定。

为自动调整大小部分做了这个：

![在此处输入图像描述](https://i.stack.imgur.com/panyu.png)

我的代码如下所示：

```
for (int counter = 0; counter < imageCount; counter++) {

        NSString *imageName = [NSString stringWithFormat:@"%@_img0%d.jpg",mRoutePointId,counter+1];
        UIImage *infoImage = [UIImage imageNamed:imageName];

        GalleryImage *galleryItem = [[GalleryImage alloc] initWithImage:infoImage];

        UIButton *infoImageButton = [[UIButton alloc] initWithFrame:CGRectMake(xOffset, 0, infoImagesScrollView.frame.size.width, infoImagesScrollView.frame.size.height)];
        infoImageButton.tag = counter;
        [infoImageButton setImage:galleryItem.galleryImage forState:UIControlStateNormal];
        [infoImageButton setImage:galleryItem.galleryImage forState:UIControlStateHighlighted];
        [infoImageButton addTarget:self action:@selector(infoImageButtonClicked:) forControlEvents:UIControlEventTouchUpInside];
        [infoImageButton setTitle:[NSString stringWithFormat:@"%@_img0%d.jpg",mRoutePointId,counter+1] forState:UIControlStateApplication];
        [infoImagesScrollView addSubview:infoImageButton];
        xOffset+=infoImagesScrollView.frame.size.width;
    } 
```

自定义视图.m

```
#import "GalleryImage.h"

@implementation GalleryImage

@synthesize galleryImage;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}
- (id)initWithImage:(UIImage*) image
{
    self = [super init];
    if (self) {
//        galleryImageView = nil;
        galleryImage = image;
    }
    return self;
}

-(void)awakeFromNib
{
    [galleryImageView setImage:galleryImage];
} 
```

需要一些有关如何确保图像在添加到按钮时不会拉伸的指导。

也欢迎其他建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:09:02.993

这可能是图像视图的问题`contentMode`。

# ibm-midrange - WRKACTJOB 和在 AS400 中状态为 active 的 WRKJOB 有什么区别？

> ID：15778206
> 
> 赞同：2
> 
> 时间：2013-04-03T03:07:05.457
> 
> 标签：ibm-midrange

我想查看作业的状态，有时我可以通过命令 WRKACTJOB 或 WRKJOB 找到作业。但是，有时，我只能在状态为活动的 WRKJOB 中找到它。为什么没有出现在 WRKACTJOB 中，因为它是活动的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:45:17.370

尝试命令 wrkactjob job( *job name* ) 检查特定的作业状态（如果它正在运行）。除非您没有将作业提交到同一个子系统，否则您可能无法从 wrkactjob 始终在同一位置找到该作业。希望这个答案:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T00:14:41.333

WRKACTJOB 显示系统上当前运行的作业。如果一项工作运行得很快，你可能永远看不到它。它有助于观察作业将运行的子系统（提示 WRKACTJOB，您可以指定子系统）。还要确保使用 F10 而不是 F5 刷新。F10 重新开始数据收集，而 F5 通常刷新已收集的数据。

[WRKACTJOB](https://as400i.com/2019/11/14/wrkactjob/)

WRKJOB 允许您处理已在系统上运行的任何作业。通常，这对于查看作业日志或假脱机文件很有用。

# jsp - 使用 JSP 提交表单

> ID：15778215
> 
> 赞同：0
> 
> 时间：2013-04-03T03:08:35.010
> 
> 标签：jsp

我正在尝试制作一个将插入通过表单提交的记录的 JSP。但是，我试图确保它连接并通过使用 mySQL 选择语句来检索数据。我在下面发布了错误。我不确定为什么会收到此错误。到目前为止我有这个

```
<%@ page import ="java.sql.*" %>
<%
String url = "jdbc:mysql//sql.njit.edu:3306/user";
String user = "u";
String pass = "p";
String classPath = "com.mysql.jdbc.Driver";
Connection conn = null;
Statement stmt = null;
ResultSet rs = null;

try{
    Class.forName(classPath);
    conn = DriverManager.getConnection(url, user, pass);
} catch(Exception e){
    e.printStackTrace();
}

stmt = conn.createStatement();

String query = "SELECT * FROM Music";

try{
    rs = stmt.executeQuery(query);
    while(rs.next()){
        out.println(rs.getString("song"));
    }
}catch(SQLException e){
    e.printStackTrace();
}
finally {
    try {
        if (stmt != null)
            stmt.close();
        if (rs != null)
            rs.close();
        if (conn != null)
            conn.close();
    }catch (SQLException e) {
        e.printStackTrace();
    }
}
%> 
```

我收到以下错误

```
Stacktrace:
org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:451)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:373)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:321)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:257)
javax.servlet.http.HttpServlet.service(HttpServlet.java:729)

root cause

java.lang.NullPointerException
org.apache.jsp.insert_jsp._jspService(insert_jsp.java:64)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98)
javax.servlet.http.HttpServlet.service(HttpServlet.java:729)    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:331) org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:321)    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:257)
javax.servlet.http.HttpServlet.service(HttpServlet.java:729) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:15:08.253

您的 JDBC URL 格式错误。它应该像

```
jdbc:mysql//sql.school.edu:3306/user 
```

# c++ - 为什么 openCV Mat.at 与原始矩阵不匹配

> ID：15778216
> 
> 赞同：1
> 
> 时间：2013-04-03T03:08:48.753
> 
> 标签：c++, opencv

我有一个二维双类型矩阵。

双**结果；(8334*34尺寸)

这些值类似于：0.00211094, 0, 6.10098e-006.......

我使用代码 Mat m = Mat(ROW, COL, CV_64F, results),

但是当我检查元素时，我发现值不匹配，并且 m 中的值非常奇怪，类似于 5.325e-344（太小了！）

cout<(0,0) != 结果[0][0]

我测试了一个小矩阵，答案与矩阵相匹配。

```
double a = 0.00211094;
double b = 6.10098e-006;
double c=0;
double aa[3][3] = {{a, b, c}, {0.4, 0.5, 0.6}, {0.7, 0.8, 0.9}};
Mat m = Mat(3, 3, CV_64F, aa);

cout<<m.at<double>(0,1)<<endl; 
```

谁能告诉我为什么？这是我的 C++ 内存问题（结果矩阵太大？）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:32:35.877

只有小矩阵可以设置到 Mat 中。

所以我尝试将每个元素设置为mat。

```
for(i...){
for(j...){
    m.at<double>(i,j) =results[i][j];
}
} 
```

它有效。

有趣的！

# sorting - 用户输入 ipython

> ID：15778219
> 
> 赞同：0
> 
> 时间：2013-04-03T03:08:58.740
> 
> 标签：sorting, input, ipython

如果我想让用户输入一个数字，我可以

```
x = int(raw_input('Enter an integer: ')) 
```

如果我希望用户输入 10 个可以稍后排序的数字怎么办。如何提示用户输入 10 个整数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:12:33.383

您可以使用`.split()`拆分数字字符串，然后将每个数字转换为整数：

```
nums = [int(num) for num in raw_input('Enter some numbers: ').split(',')] 
```

或者您可以使用`ast.literal_eval()`并输入一个 Python 对象：

```
from ast import literal_eval

nums = literal_eval(raw_input('Enter some numbers: '))  # Type in [1, 2, 3] 
```

最不安全的方法是使用`input`，它将结果传递`raw_input()`到`eval()`：

```
nums = input('Enter some numbers: ')  # Type in [1, 2, 3] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:11:50.250

使用列表

```
a=[]
i=0
while i<10:
    c=int(raw_input('Enter an integer:'))
    a.append(c)
    i+=1 
```

这将向用户询问 10 个整数并将其存储在一个数组中。排序可以很容易地在 python 中使用`a.sort()`

# c - 寻找在 C 中读取音频的基础知识

> ID：15778233
> 
> 赞同：6
> 
> 时间：2013-04-03T03:10:30.767
> 
> 标签：c, signal-processing

我不想使用库——我想从头开始编写。我想为通过无线电传输的 WEFAX 制作解码器。不同的音频频率转换为不同的像素暗度。只有灰度 - 没有颜色。

每分钟有 120 行，每行超过 1000 像素。我想检测频率并将其转换为可能的 8 位值。硬件等效物类似于 LM567 频率电压转换器。

我不知道从哪里开始。这类似于 FIR 还是 IIR？谁能指出我可以学习的代码？我不是为 Windows 编写的，严格来说是 unix。

艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:48:00.883

你可以用定时器和过零来找出基频

[http://en.wikipedia.org/wiki/Zero_crossing](http://en.wikipedia.org/wiki/Zero_crossing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:51:13.167

假设您有 IQ 数据，您可以从使用相位微分器实现的简单 FM 解调器开始。频率是相位的导数，因此您可以简单地计算样本之间的相位差，从而得到原始 FM 信号的估计值。单个输出样本可以通过以下方式给出：

```
y[k] = arctan(imag(x[k]) / real(x[k])) - arctan(imag(x[k-1]) / real(x[k-1])) 
```

您可能还需要执行一些相位展开以避免输出中的`2*pi`. 有关更多详细信息，请参见[此处](http://en.wikipedia.org/wiki/Instantaneous_phase)的瞬时频率部分。

FM 解调器的输出基本上应该是您的图像，因为它会产生一个幅度变化的信号，其幅度与原始信号的频率变化方式相同。您必须将其重新采样到正确的像素网格并正确缩放/量化灰度级。

对 FM 解调器的输出进行低通滤波以降低噪声也可以提高图像质量。

# c++ - 反混淆 C++ 源代码

> ID：15778239
> 
> 赞同：1
> 
> 时间：2013-04-03T03:11:08.633
> 
> 标签：c++, parsing, math, optimization, obfuscation

在寻找 c++ 解析器时，我最近偶然发现了下面的项目。其中有一个解析器似乎非常适合我的需求，但是我相信作者故意混淆了一些核心代码，这使得检查代码有点困难。

[https://github.com/ArashPartow/math-parser-benchmark-project/blob/master/fparser/fpoptimizer.cc](https://github.com/ArashPartow/math-parser-benchmark-project/blob/master/fparser/fpoptimizer.cc)

在文件和作者的网站上有一个关于有一个简单的去混淆版本的描述，但是指示的站点似乎只有一个[死链接](http://warp.povusers.org/FunctionParser/fparser4.5_devel.tar.bz2)，并且尝试联系作者没有结果。

我想知道其他 SOers 是否会知道一种快速简便的方法来逆转上述文件中的混淆。

现在我不确定，因为我不是 C++ 专家，但可能有正当的理由使代码成为这样的方式，大概因为文件的名称表明它可能是出于性能原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T03:23:51.977

在这种特定情况下，您可以尝试[使用最新开发文件的此链接到项目页面](http://warp.povusers.org/FunctionParser)- 我刚刚发现它是版本错误 - 链接显示 4.5 并且当前版本为 4.5.2 在此修订版中。他们似乎没有保留旧版本，所以在那里获取最新版本

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T03:14:49.593

大多数编译器都可以选择只在代码上运行预处理器并生成预处理器输出。这将消除使用`#defines`.

例如在 MSVC 中，您可以运行`cl /P fpoptimizer.cc`. 这将创建一个名为 fpoptimizer.i 的文件，其中包含预处理文件。

您可以在执行此操作之前删除`#includes`程序中的 s - 这样只有`#define`程序中的 s 被预处理，而不是其他内容。

gcc 提供了`-E`执行类似操作的选项。

# ruby-on-rails - 在 Rails（和其他 MVC 框架）中拥有非常大的控制器是不好的做法吗？

> ID：15778246
> 
> 赞同：3
> 
> 时间：2013-04-03T03:11:45.187
> 
> 标签：ruby-on-rails, controller, refactoring

我是一名学生，一直在自己的时间学习rails。到目前为止，我能够开发只执行标准数据库操作的简单应用程序。目前，我正在尝试增加我的知识并了解如何制作真正“做事”的应用程序，而不仅仅是简单的数据库皮肤。

我决定看看一些开源的 Rails 应用程序，看看专业人士是如何做到的。该网站上推荐的其中之一是[Tracks](http://getontracks.org/)。我简要浏览了源代码，并对某些控制器的大小感到震惊。例如，[todos 控制器](https://github.com/TracksApp/tracks/blob/master/app/controllers/todos_controller.rb)超过 1400 行。这是正常的吗？这段代码是否应该被重构并放在其他地方？如果是这样，它应该放在哪里？或者，像这样拥有非常大的控制器是否正常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:13:43.287

你会遇到不同的看法和不同的看法，[“胖模型，瘦控制器”](http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model)是一种流行的方法，也是 Ruby on rails 社区中许多人订阅的一种方法。在某种程度上，当对象提供某些属性和特征有意义时，模型中应该有很多代码。

从测试开始（如进行 TDD）有助于实现控制器中的内容和模型中的内容，因为它在创建测试时提出了正确的问题，谁/什么应该以哪种方式运行。

@dhh 在[http://37signals.com/svn/posts/3372-put-chubby-models-on-a-diet-with-concerns中发表了一篇关于此的好帖子](http://37signals.com/svn/posts/3372-put-chubby-models-on-a-diet-with-concerns)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T03:17:16.293

一般来说，拥有这么大的控制器是不好的做法。

通常应尽可能将逻辑移至模型中。一篇很好的文章：[http](http://www.sitepoint.com/10-ruby-on-rails-best-practices/) ://www.sitepoint.com/10-ruby-on-rails-best-practices/ 。

有一个名为“rails 最佳实践”的优秀 gem，我发现它对改进我的代码风格非常有帮助，[https://github.com/railsbp/rails_best_practices](https://github.com/railsbp/rails_best_practices)。（相关页面，[http://rails-bestpractices.com/posts/7 -将模型逻辑移动到模型中](http://rails-bestpractices.com/posts/7-move-model-logic-into-the-model)）

# javascript - 数据绑定电子邮件到mailto链接json

> ID：15778250
> 
> 赞同：0
> 
> 时间：2013-04-03T03:12:18.557
> 
> 标签：javascript, asp.net-mvc, json, data-binding, knockout.js

在我的视图页面中，我试图放置一个使用 knockout.js 从数据绑定中获得的用户的电子邮件地址，但我无法让它正常工作。

**电子邮件代码**

```
<a class="icon-envelope icon-white" data-bind="attr:{href:'mailto:' + Email},text:Email"></a> 
```

这就是我所拥有的，当前的结果是：图标，然后是旁边的电子邮件地址，当我点击电子邮件时，什么也没有发生。任何有用的提示表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T04:43:59.950

在对属性进行绑定时，通常通过提供属性名称进行绑定，就像使用文本绑定一样：

```
data-bind="text:Email" 
```

但是需要注意的一点是，Email 是一个 observable，而 observable 实际上是一个方法，而不是一个字符串。因此，如果您想直接在绑定中开始执行一些 javascript，例如将“mailto:”与您的 Email observable 的值连接起来，您需要调用 observable 来获取它的值，如下所示：

```
data-bind="attr:{href:'mailto:' + Email()}" 
```

您可能要考虑的另一种方法是创建一个计算的 observable，以便您可以使用更简单的标记。在您的视图模型中计算出的 observable 可能如下所示：

```
self.EmailLink = ko.computed(function() {
    return 'mailto:' + self.Email();
}); 
```

然后标记可能如下所示：

```
<a data-bind="attr:{href:'mailto:' + EmailLink},text:Email"></a> 
```

使用这两个选项：http: [//jsfiddle.net/tlarson/tG7mg/](http://jsfiddle.net/tlarson/tG7mg/)

# mysql - 通配符搜索的Mysql性能

> ID：15778252
> 
> 赞同：-3
> 
> 时间：2013-04-03T03:12:30.767
> 
> 标签：mysql, sql

这两个查询之间是否存在性能差异？

1）从表中选择*；

2) Select * from table where column like '%';

这两个查询都返回了相同的结果集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:19:53.887

如果两者都返回相同的结果，那么`LIKE`查询几乎肯定效率较低，因为它必须从数据库中获取相同的结果*并*检查`LIKE`子句，即使它没有做任何事情。

也就是说，您应该自己对其进行基准测试，看看它是否有所作为。很难想到两者都是有效查询的情况。

# python - 期望忽略命令行运行时中的某些行

> ID：15778253
> 
> 赞同：2
> 
> 时间：2013-04-03T03:12:31.643
> 
> 标签：python, pexpect

所以我有一个自动重启设备的脚本：

> 在运行时：
> 
> 主>重启
> 
> 大师>
> 
> 您确定要重新启动（是|否）：
> 
> ！！！！！！！！！！！！
> 
> 大师>

我的代码：

```
child.expect('MASTER>')
child.sendline('reboot')

child.expect('MASTER>')
child.expect('Are you sure you want to reboot (YES|NO)')
child.sendline('YES') 
```

问题：

如何跳过垃圾字符“！！！！！！！！！” 介于两者之间并再次转到“MASTER>”？

现在我的代码在“是”后停止运行

编辑：

我实际上发现代码产生了一个新的重启过程。

谢谢

# c# - 如何过期/更新存储在 Web API SessionToken 中的 ClaimsIdentity 声明

> ID：15778259
> 
> 赞同：6
> 
> 时间：2013-04-03T03:13:06.817
> 
> 标签：c#, asp.net-web-api, claims-based-identity, thinktecture-ident-model

我正在使用出色的 Thinktecture.IdentityModel 库在 ASP.NET Web API 项目中执行身份验证/授权，该项目将从移动设备和可能的 Web 客户端使用。我正在使用基本身份验证来验证移动客户端以访问 Web api，并利用 Thinktecture.IdentityModel 提供的内置 SessionToken 生成。但是，我对如何撤销添加到 ClaimsIdentity 声明集合中的声明有一些担忧，然后（我认为）将这些声明编码到提供给客户端的 SessionToken 中......

这是我到目前为止所拥有的：

按照 IdentityModel 示例项目中的示例，我创建了以下类

```
public static class  SecurityConfig
{
  public static void ConfigureGlobal(HttpConfiguration globalConfig)
  {
      globalConfig.MessageHandlers.Add(new AuthenticationHandler(CreateConfiguration()));
  }

  public static AuthenticationConfiguration CreateConfiguration()
  {
      var authentication = new AuthenticationConfiguration()
          {
              ClaimsAuthenticationManager = new MyClaimsTransformer(),
              RequireSsl = false, //TODO:TESTING only
              EnableSessionToken = true,
              SessionToken = new SessionTokenConfiguration()
              {
                  EndpointAddress = "/Authenticate"
              }
          };
       authentication.AddBasicAuthentication(Membership.ValidateUser);

      return authentication;
   }
} 
```

像这样从我的 Global.asax 类中调用的

```
SecurityConfig.ConfigureGlobal(GlobalConfiguration.Configuration); 
```

移动设备从个人那里收集用户名和密码，并正确设置身份验证标头并将凭据提供给必要的 Web 端点`http://myhost/api/Authenticate`

在服务器上，使用用户名/密码调用我的 Membership.ValidatUser，如果验证通过，`MyClaimsTransformer`则调用 Authenticate 方法。

```
public class ClaimsTransformer : ClaimsAuthenticationManager
{
   public override ClaimsPrincipal Authenticate(string resourceName, ClaimsPrincipal incomingPrincipal)
   {
     if (!incomingPrincipal.Identity.IsAuthenticated)
     {
        return base.Authenticate(resourceName, incomingPrincipal);
     }
     return incomingPrincipal;
   }
} 
```

然后，移动客户端会收到一个令牌，它可以在任何后续请求的身份验证标头中传递该令牌。

这一切都很好。

现在我想做的是在 ClaimsTransformer 中添加一些代码，这些代码将执行类似于以下伪代码的操作。

```
var nameClaim = incomingPrincipal.Claims.First(c => c.Type == ClaimTypes.Name);

//Using value in nameClaim lookup roles or permissions for this user.
var someListofRoles = SomeMethodToGetRoles(nameClaim.Value);

//Add user roles to the Claims collection of the ClaimsPrincipal.
foreach(var role in someListOfRoles)
{
   incomingPrincipal.Identities.First().AddClaim(new Claim("Role", role.Name));
} 
```

我希望限制我需要从数据库请求给定用户的角色或权限列表的次数，并方便在自定义 AuthorizeAttribute 中检查这些角色/权限。

但是，当我开始添加此内容时，我开始考虑用户可能已登录并收到此令牌的场景，但通过系统的其他用户的某些操作，他们的角色将被更改或撤销。初始用户仍将拥有此令牌，其中包含现已过期的角色/权限列表，并且在令牌过期之前可以访问任何内容，或者将获得对某些内容的新访问权限，但在他们以某种方式注销之前实际上不会收到该访问权限。

是否有使以这种方式创建的 SessionToken 无效的机制？或者，如果我找到某种方式知道用户角色/权限已发生更改，我将如何修改声明并以无缝方式重新发布 SessionToken？

此外，如何完全撤销 SessionToken，即如果我想“注销”用户，那将如何工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T05:55:01.847

会话令牌工具没有该功能。我们希望保持简单，以解决“在每次应用程序启动时输入密码”问题。如果没有完整的数据存储后端（可以在网络农场等中工作），撤销是很难实现的。

您不应将可能随会话时间更改的数据存储在会话令牌中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:05:51.910

数据库更改通知设计完全取决于您。我的建议就像使用时间戳/行版本来检查数据（用户/角色）是否已过时。您可以将此数据时间戳/行版本存储在服务器上，例如用户会话或客户端的 cookie/标头。我推荐前一种方法。

如果已过时，我建议您可以重新执行您的 CreateConfiguration() 方法，该方法应重新创建反映与令牌相关的最新数据更改的所有必要信息。

# ios - iOS 中的安全文件存储

> ID：15778260
> 
> 赞同：2
> 
> 时间：2013-04-03T03:13:15.753
> 
> 标签：ios, security, file-security

我正在开发一个应用程序，其中包括从应用程序与之对话的服务器下载一些文件。所以我打算将下载的文件（安静敏感）存储在 aLibrary 目录中。最好我会创建一个子目录（标记为隐藏）并将其存储在它下面。但是这个隐藏的子目录可以在越狱设备上轻松访问。

有没有办法可以将它安全地存储在越狱设备上也无法访问的库目录中？

我们可以在受密码保护的子目录中创建和存储文件吗？我们如何密码保护子目录或文件？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T03:19:35.793

一种可能的选择是将 Coredata 中的文件存储为 NSData 外部记录文件，并使用某种负责加密和解密文件的 NSValueTransformer。这可能是一种更复杂的方法，但会为您提供很大的灵活性。

快速搜索`NSValueTransformer encrypt NSData`会产生一些有趣的结果，可能会让您入门。

希望这可以帮助！

# java - Java 如何知道要使用哪个接口实现？

> ID：15778263
> 
> 赞同：1
> 
> 时间：2013-04-03T03:13:49.957
> 
> 标签：java

我很好奇Java如何知道调用方法时将使用哪个接口实现。

所以下面是代码片段，我无法理解它是如何“神奇地”工作的：

接口“LotListener”：

```
public interface LotListener
{

    public void bidUpdate( Lot lot, Bid bid);
} 
```

“LotListener”的实现是 BidStatistics 和 Person。

现在这是我在将所有 BidStatistics 和 Person 更改为界面之前的代码：

```
public class Lot
{

    private HashSet<**Person**> bidders;

    private **BidStatistics** bidStats;

    public Lot(int number, String description, **BidStatistics** bidStats)
    {
        bidders = new HashSet<**Person**>();

        this.bidStats = bidStats;   

    }

    public boolean bidFor(Bid bid)
    {
        **Person** nextBidder;

        bidders.add( bid.getBidder() );
        Iterator iterateBids = bidders.iterator();

        if(highestBid == null) {
            // There is no previous bid.
            highestBid = bid;
            bidStats.bidUpdate( this, bid );
            return true;
        }
        else if(bid.getValue() > highestBid.getValue()) {
            // The bid is better than the previous one.
            highestBid = bid;
            while ( iterateBids.hasNext() )
            {
                nextBidder = (LotListener) iterateBids.next();
                nextBidder.bidUpdate( this, bid );
            }
            bidStats.bidUpdate( this, bid );
            return true;
        }
        else {
            // The bid is not better.
            return false;
        }
    } 
```

现在，当我将所有 Person 和 BidStatistics 更改为接口 LogListener 时：

```
public class Lot
{
    private HashSet<**LotListener**> bidders;

    private **LotListener** bidStats;

    public Lot(int number, String description, **LotListener** bidStats)
    {
        bidders = new HashSet<**LotListener**>();

        this.bidStats = bidStats;   

    }

    public boolean bidFor(Bid bid)
    {
        **LotListener** nextBidder;

        bidders.add( bid.getBidder() );
        Iterator iterateBids = bidders.iterator();

        if(highestBid == null) {
            // There is no previous bid.
            highestBid = bid;
            bidStats.**bidUpdate**( this, bid );
            return true;
        }
        else if(bid.getValue() > highestBid.getValue()) {
            // The bid is better than the previous one.
            highestBid = bid;
            while ( iterateBids.hasNext() )
            {
                nextBidder = (LotListener) iterateBids.next();
                nextBidder.**bidUpdate**( this, bid );
            }
            bidStats.**bidUpdate**( this, bid );
            return true;            
    } 
```

此代码仍然有效。我的问题是为什么？

它如何知道何时使用来自 Person 的 bidUpdate 的实现，以及何时使用来自 BidStatistics 的 bidUpdate 的实现？

编辑：对某些代码周围的 ** 感到非常抱歉。我试图将它们加粗以突出显示它，但我想这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T03:17:09.997

这称为*虚拟调度*。

*当您在声明为接口的变量上调用方法时，Java 将在实例的vtable*中查找要调用的方法，该方法是在您基于类创建实例时设置的。

因此，它实际上在运行时调用该对象作为实例的类的实现定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T03:17:21.177

**变量**的类型是`LotListener`，但变量指向的**对象**`Person`的类型仍然是 要么要么`BidStatistics`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T03:17:39.897

因为它指向类的实际实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T09:26:35.553

它不知道。您通过提供适当类型的对象来*告诉它。*

# java - GAE 从 gmail 帐户发送电子邮件

> ID：15778264
> 
> 赞同：2
> 
> 时间：2013-04-03T03:14:47.270
> 
> 标签：java, google-app-engine, email

如何使用 Google-App-Engine 从 Gmail 帐户发送电子邮件？发件人地址是问题所在，这是可以理解的，因为垃圾邮件的限制。（限制在这里：[https](https://developers.google.com/appengine/docs/java/mail/usingjavamail#Senders_and_Recipients) ://developers.google.com/appengine/docs/java/mail/usingjavamail#Senders_and_Recipients ）

目标：我希望用户来到网站，注册使用该服务（通过 OAuth）。并且该服务将能够发送将“发件人地址”设置为用户电子邮件地址的电子邮件。（服务：发送电子邮件的电子表格公式）

**相关问题：** [从 Google App Engine 访问 Gmail 帐户](https://stackoverflow.com/questions/9446972/accessing-gmail-account-from-google-app-engine)

选项：

1) 避免使用 JavaMail：通过 HTTP 发送电子邮件看起来需要支付少量费用。可以使用：Amazon SES aws.amazon.com/ses/

**不可能** 2) contextIO -[有些人](https://stackoverflow.com/questions/9446972/accessing-gmail-account-from-google-app-engine/9454450#9454450)建议使用 contextIO。更新：不发送电子邮件，见[http://context.io/docs/2.0](http://context.io/docs/2.0)

3) OAuth - 看起来您可以使用 OpenID 并以当前登录用户的身份发送电子邮件。因此，也许可以使用 OAuth 进行离线发送。（用户 API [https://developers.google.com/appengine/docs/java/users/](https://developers.google.com/appengine/docs/java/users/)）

4）发件人验证 - （仅可用于测试，而不是生产质量解决方案）App Engine 具有“邀请用户在此应用程序上进行协作”作为查看器。也许有一个用于添加协作者的 API。

**选择**5) Sockets/SMTP 试用 - （仅经过身份验证的 SMTP）谷歌于 2012 年 9 月发布[http://googleappengine.blogspot.com.au/2012_09_01_archive.html](http://googleappengine.blogspot.com.au/2012_09_01_archive.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:09:23.853

好消息是，随着 GAE SDK 1.7.7 的到来，可以直接与 IMAP 和 SMTP 通信，请参阅博客文章[http://googleappengine.blogspot.be/2013/04/app-engine-177-发布.html](http://googleappengine.blogspot.be/2013/04/app-engine-177-released.html)

关键的新功能（预览版）是**“出站套接字”**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:59:18.467

我没有在生产环境中尝试过，但我已经设置了 GAE 开发服务器以绕过谷歌的邮件系统并直接与 SMTP 服务器通信。请参阅我[对另一个问题的回答](https://stackoverflow.com/questions/3082297/testing-mail-with-appengine-development-server-java/15902114#15902114)。如果您可以在生产环境中执行此操作，那么您只需要一个 SMTP 服务器来发送您的电子邮件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T20:48:01.927

简而言之 - 您将无法通过 OAuth 做到这一点。主要原因是通常不可能（可靠地、连续地）代表随机用户（即不在您控制的域中的用户）发送大量邮件。

1.  如果您使用 OAuth，则需要在 OAuth 过程中请求访问用户个人资料/电子邮件。这因供应商而异。一些提供商从不提供电子邮件 (Twitter)。请参阅提供统一 API 的[pac4j库，以从不同的提供商检索用户的 OAuth 配置文件。](https://github.com/leleuj/pac4j)

2.  当（如果）您从 OAuth 获得电子邮件地址时，您将需要代表该用户发送电子邮件。由于您的 SMTP 服务器无权代表随机用户发送电子邮件（请参阅[SPF](http://en.wikipedia.org/wiki/Sender_Policy_Framework)和[DKIM](http://en.wikipedia.org/wiki/DomainKeys_Identified_Mail)），您将很快进入垃圾邮件列表并被阻止。如果这很容易，那么垃圾邮件发送者将过上轻松的生活。

3.  您可以从 AppEngine 代表用户发送电子邮件，但前提是用户通过[用户 Java API](https://developers.google.com/appengine/docs/java/users/overview)登录，该 API 仅适用于 Gmail 或 Google Apps 帐户。

4.  [在 GAE 上，您可以通过新的出站套接字 API](https://developers.google.com/appengine/docs/features#Trusted_Tester_Featureshttp://)轻松使用外部 SMPT 服务器（这只是在 sdk 1.7.7 中从受信任的测试器功能变为实验性功能）。我们有这个设置，它使用大型外部 SMTP 服务没有问题。但是，考虑到上面的第 2 点，这对您想要实现的目标没有多大帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T05:08:19.490

由于 Google 限制了我们，我们最终使用外部 Amazon SES 服务来处理电子邮件 - 在“发件人：”字段中只允许应用程序管理员电子邮件地址。我们试图切换 DKIM 或 SPF 记录，但这对我们没有帮助，谷歌在这方面非常严格。

# jquery - 在 jQuery 中循环而不使用使用 Tumult Hype 的类

> ID：15778267
> 
> 赞同：0
> 
> 时间：2013-04-03T03:15:09.510
> 
> 标签：jquery

我试图弄清楚如何将以下内容放入循环中，但我运气不佳。

```
 $('#start_01_trigger').mouseover(function() {
    $('#start_01').css( "color", "#FFF" );
    $('#start_01_trigger').fadeTo("100", 0.4);
  });
  $('#start_01_trigger').mouseout(function() {
    $('#start_01').css( "color", "#68C3AD" );
    $('#start_01_trigger').fadeTo("100", 0);
  }); 
```

这是针对日历应用程序的，因此必须迭代 31 次。

关键是我正在使用 Tumult Hype 来构建它，我无法为元素分配一个类。我只能分配 ID，每个 ID 都是唯一的。

这是上面循环的第一次迭代，第二次看起来像这样：

```
 $('#start_02_trigger').mouseover(function() {
    $('#start_02').css( "color", "#FFF" );
    $('#start_02_trigger').fadeTo("100", 0.4);
  });
  $('#start_02_trigger').mouseout(function() {
    $('#start_02').css( "color", "#68C3AD" );
    $('#start_02_trigger').fadeTo("100", 0);
  }); 
```

您可以看到，只有 ID 中的数字发生了变化，没有其他任何变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:18:40.157

您可以使用属性选择器来制作通用事件处理程序：

```
$('div[id^="start_"][id$="_trigger"]').mouseover(function() {
    var $elem = $('#' + this.id.replace('_trigger', ''));

    $elem.css('color', 'red');
    $(this).fadeTo('100', 0);
}); 
```

*   `[id^="start_"]`仅当`id`属性以 . 开头时才匹配`start_`。
*   `[id$="_trigger"]`仅当`id`属性以 . 结尾时才匹配`start_`。
*   所以最后，它匹配`id`属性以这两个值开始和结束的元素。

# python - 比较文件中的标记并生成通用标记/值

> ID：15778288
> 
> 赞同：3
> 
> 时间：2013-04-03T03:18:15.620
> 
> 标签：python

我有两个文件-

```
file1
token1=1234
token2=1245
token3=2345
token4=345

file2
token1=2345
token2=345
token4=4935 
```

我想生成一个新文件，其中包含来自 file1 的所有标记，这些标记也存在于 file2 中，并且我想保留标记，来自文件 2 的值。这是我的代码，但由于某种原因，我错过了随机的公共值。

例如：

在文件一中，该行是：

```
IA_ITD_Worst_V = 0y100010100 
```

在file2中是：

```
IA_ITD_WORST_V = 0y100010100 
```

我期望`IA_ITD_WORST_V = 0y100010100`在输出文件中，但它没有出现。

有谁知道我可能做错了什么？

```
f1=open("file1","r")
f2=open("file2","r")
f3=open("commonfile.txt","w")

line1=f1.readline()
line2=f2.readline()

for line2 in f2:
    tokenname=line2.split('=')[0].strip()
    for line1 in f1:
        if tokenname==line1.split('=')[0].strip():
               f3.write(line2)

    f1.seek(0) #reset to first line

f1.close()
f2.close()
f3.close() 
```

我相信有更有效的方法，但这是一种应该有效的简单方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:22:18.233

我会为此使用字典：

```
filenames = ['file1', 'file2']

mapping = {}

for filename in filenames:
    with open(filename, 'r') as handle:
        for line in handle:
            key, _, value = line.partition('=')
            mapping[key] = value 
```

然后，您可以`mapping`按键名排序，然后将结果写入输出文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T03:57:44.857

您没有得到预期输出的原因是因为您的令牌`IA_ITD_Worst_V`并不`IA_ITD_WORST_V`相同——它们有不同的情况。

如果您希望标记*不区分大小写*，请在比较它们之前将它们小写。例如`'IA_ITD_Worst_V'.lower() == 'IA_ITD_WORST_V'.lower()`。

但是，您的代码效率很低。更好的方法是将允许的标记保存在一组中，尽管它会强制您将它们保存在内存中。如果令牌列表太大而无法保存在内存中，请使用数据库。

替代实现：

```
def tokenize(line):
    return line.split('=', 1)[0].strip().lower()

with open('file1', 'r') as f1:
    f1.readline()
    f1tokens = frozenset(tokenize(line) for line in f1)

with open('file2', 'r') as f2, open('commonfile.txt', 'w') as out:
    f2.readline()
    out.writelines(line for line in f2 if tokenize(line) in f1tokens) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T04:01:22.033

这是另一种选择：

```
f1 = open('file1.txt', 'r')
f1_tokens = set(line1.split('=')[0].strip() for line1 in f1)

f2 = open('file2.txt', 'r')
for line2 in f2:
    if line2.split('=')[0].strip() in f1_tokens:
        print line2, 
```

用法：`python script.py >commonfile.txt`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T04:11:21.533

正如您所说，有更有效/更清洁的方法可以做到这一点，但要回答您的具体问题：首先删除以下行：

```
line1=f1.readline()
line2=f2.readline() 
```

你在那里跳线。

编辑：添加该数据示例后添加以下内容。

看来你想要一个不区分大小写的条件，这应该解决这个问题：

```
if tokenname.lower() == line1.split('=')[0].strip().lower(): 
```

# linux - 如何创建备份脚本来比较日期并删除最旧的文件

> ID：15778292
> 
> 赞同：0
> 
> 时间：2013-04-03T03:18:37.637
> 
> 标签：linux, bash, date, backup

我有一个我正在制作的 Minecraft 服务器的备份脚本。我已经到了可以将所有文件合并到 1 个文件夹中的地步，将其命名为当前日期和时间，然后将其压缩为 1 个 .zip 文件，以便 World Edit 将其识别为备份。问题是，我希望这个脚本能够识别出当它达到 4 个备份时，它将开始删除比较日期的最旧的一个。当还没有 4 个备份文件时，我还需要它不会出现故障。我该怎么做。这是我的脚本。

```
#!/bin/bash
DIR="$(dirname "$0")"
cd $DIR
clear
while [ true ]
do
# Set $DATE to current date and time
DATE="`date +%Yy-%mm-%dd_%Hh-%Mm`"
# Make directory with date and time
mkdir $DATE
# copy all files into 1 folder with date and time
cp ~/Desktop/Test.command ~/Desktop/Test2.command $DIR/$DATE
sleep 1
# compress folder into $DATE and remove previos files
zip $DATE -rm $DATE
# wait for round 2 in 1 hour
echo Waiting 1 hour
sleep 3600
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:00:12.310

这是我最近为 cron 工作所做的一个半相关的 bash 脚本。它查看存储自动生成的备份的某个目录，如果目录的大小超过用户指定的限制，则删除最旧的备份。同时维护一个 .log 文件。

```
#!/bin/bash

# IFS is needed for bash to recognize spaces
IFS=$'\n'

# Backup directory
BACKUPDIR="your directory here"

# Backup directory size limit (in kB)
DIRLIMIT=20971520

# Start logging
LOGFILE="where you want the log file stored"
echo -e "Cron job started at $(date +"%m/%d/%Y %r")\r" >> $LOGFILE
echo -e "Directory size limit: $DIRLIMIT [kB]\r" >> $LOGFILE

# If $BACKUPDIR exitsts, find its size
if [ -d "$BACKUPDIR" ]
then
    DIRSIZE=$(du -sk "$BACKUPDIR" | awk '{print $1}')
    echo -e "Current directory size: $DIRSIZE [kB]\r" >> $LOGFILE
else
    echo -e "$BACKUPDIR does not exist!\r" >> $LOGFILE

fi

# Check if $BACKUPDIR's size is greater than $DIRLIMIT. If so, delete
# old files. If not, exit.
if [ $DIRSIZE -gt $DIRLIMIT ]
then
    echo -e "Directory size over limit! Attempting to delete oldest log backups...\r" >> $LOGFILE
    LOOPSIZE=$DIRSIZE
    while  [ $LOOPSIZE -gt $DIRLIMIT ]
        do
        # This find command below finds files (-type f) in the $BACKUPDIR directory only 
        # (-maxdepth 1) and it prints their last modified time and filename followed by a new line (-printf "%T@ %p\n").
        # Then it sorts it based on time (sort -n) and selects the file which was modified the furthest in the past. The
        # awk command removes the timestamp (which is in field $1). Finally, xargs -I{} -f {} deletes the file even though spaces are
        # present in the full file name.    
        echo -e "Deleting file: $(find "$BACKUPDIR" -type f -maxdepth 1 -printf "%T@ %f\n" | sort -n | head -1 | awk '{ print substr($0, index($0,$2)) }')\r" >> $LOGFILE
        find "$BACKUPDIR" -type f -maxdepth 1 -printf "%T@ %p\n" | sort -n | head -1 | awk '{ print substr($0, index($0,$2)) }' | xargs -I{} rm -f {} 
        # This function calculates the $BACKUPDIR size again and is used in the loop to see when it is permissable to exit.
        LOOPSIZE=$(du -sk "$BACKUPDIR" | awk '{print $1}')
        echo -e "Directory size is now: $LOOPSIZE [kB]\r" >> $LOGFILE
        done
    echo -e "Operation completed successfully! Final directory size is: $LOOPSIZE [kB]\r" >> $LOGFILE
else
    echo -e "Directory size is less than limit. Exiting.\r" >> $LOGFILE
fi

# Finish logging
echo -e "\r" >> $LOGFILE
echo -e "Cron job exiting at $(date +"%m/%d/%Y %r")\r" >> $LOGFILE
echo -e "----------------------------------------------------------------------\r" >> $LOGFILE 
```

为了确保 .log 文件永远不会变得令人讨厌，我制作了一个 cron 脚本来修剪最上面的条目：

```
#!/bin/bash

# IFS is needed for bash to recognize spaces
IFS=$'\n'

# .log files directory
LOGFILESDIR="your directory here"

# .log file size limits (in KB)
LOGFILELIMIT=35

# Find .log files in $LOGFILESDIR and remove the earliest logs if
# the filesize is greater than $LOGFILELIMIT.
for FILE in "$LOGFILESDIR"/*.log
do
    LOGSIZE=$(du -sk "$FILE" | awk '{print $1}')
    while [ $LOGSIZE -gt $LOGFILELIMIT ]
    do
        # The sed command deletes the rows from the top
        # until it encounters a bunch of "-"'s in a row
        # (which separates the logs in the log files)
        sed -i '1,/----------/d' "$FILE"
        LOGSIZE=$(du -sk "$FILE" | awk '{print $1}')
    done    
done
exit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T11:09:26.013

```
rm -f `ls -t ????y-??m-??d_??h-??m.zip|sed 1,4d` 
```

或者

```
rm -f `ls -r ????y-??m-??d_??h-??m.zip|sed 1,4d` 
```

将删除除最新的四个 zip 文件之外的所有文件（分别基于修改时间或文件名）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T03:46:49.560

嗨，我很久以前写了一个脚本，它做了类似的事情，它删除了 7 天前的文件并将其从 AWS S3 中删除。希望这对你有用。

```
#!/bin/bash
NOWDATE=`date -I -d '7 days ago'`
BACKUPNAME="$NOWDATE.sql.gz"
/usr/local/bin/s3cmd del s3://path/to/bucket/$BACKUPNAME 
```

# sql-server - 表中所有列的所有数据的 SQL Server 大写

> ID：15778299
> 
> 赞同：1
> 
> 时间：2013-04-03T03:19:45.033
> 
> 标签：sql-server, tsql

我想知道如何将所有列名的所有数据以及表中的值都转换为大写。数据可能包含`int`但它会忽略它。我所做的事情是手动将第 1 列更新为 1，这很耗时。

有没有这样的说法：

```
UPDATE cust SET cust.* = UPPER(cust.*) 
```

谢谢~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T03:31:04.583

动态 SQL 可能是您唯一的选择。这样的事情应该使用`FOR XML`查询`INFORMATION_SCHEMA.COLUMNS`：

```
declare @query varchar(max)
set @query = ''

select @query =
  STUFF((
    select ';UPDATE ' + table_name + ' SET ' + column_name + ' = UPPER(' + column_name + ')'
    from INFORMATION_SCHEMA.COLUMNS
    order by table_name, column_name
    for xml path('')
        ), 1, 1, '')

execute(@query); 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/655e1/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T03:23:43.807

不幸的是，你不能直接这样做。您需要指定需要更新的每个列名称。例如

```
UPDATE tablename
SET    col = UPPER(col)
       colN = UPPER(colN) 
```

但是，这不是世界末日。您仍然可以这样做，但使用*Dynamic SQL*。

# jquery - 带有破折号和类名空格的 jQuery 选择器

> ID：15778302
> 
> 赞同：-1
> 
> 时间：2013-04-03T03:19:59.217
> 
> 标签：jquery

我知道如果我有一个类名（带空格），例如

```
my classname 
```

我可以创建一个类选择器：

```
.my.classname 
```

但是，如果我在这样的空格之间有破折号，我该如何创建一个类选择器：

```
My - Classname and Others 
```

或这个：

```
My - Clasname 
```

感谢您的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:27:26.740

为什么不简单地将标题转换`My - Classname`为`.my.classname`

`**[LIVE DEMO](http://jsbin.com/eratuk/1/edit)**`

```
var title   = "Properties Listing - 3 Per Page";
var toClass = '.'+ title.replace(/-/g, '').replace(/\s{1,}/g, '.').toLowerCase() ;

alert(toClass); // .properties.listing.3.per.page 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:30:51.613

与第一种情况没有区别，只是您的元素将具有 3 个类`My`：`-`和`Classname`. 所以你只需要做同样的选择器：

```
$(".my.-.classname") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T03:39:32.007

您可以为此目的使用[属性选择器。](http://api.jquery.com/attribute-equals-selector/)

```
$('[class="My - Clasname"]') 
```

注意：`My - Classname and Others`不是一个单一的类，它是 5 个类的混合`My`， `-`，`Classname`，`and`和`Others`。

# java - 显示带有点的窗口的最简单方法

> ID：15778303
> 
> 赞同：1
> 
> 时间：2013-04-03T03:19:59.440
> 
> 标签：java, swing, animation, jframe

我花了最后一个小时在互联网上仔细研究如何在我的程序中创建一个超级简单的显示。情况如下：

1.) 我有一个运行任意次数的 for 循环。每次迭代，它都会产生一个“城市”，即随机生成的 x 坐标和 y 坐标（均为整数）。

2.) 我想创建最简单的显示。没有什么花哨。也就是说，理想情况下，一个大小为 600x600 的窗口会在 for 循环的每次迭代中为每个城市绘制一个黑点。

这是我到目前为止所拥有的：

```
 f.setPreferredSize(new Dimension(600, 600));
    f.pack();
    f.setVisible(true);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    for (int i = 0; i <= nodeArray.length-1; i++)
    {
        nodeArray[i] = new Node();
        nodeArray[i].x = 0 + (600 - 0) * r.nextDouble();
        nodeArray[i].y = 0 + (600 - 0) * r.nextDouble();

        //DRAW DOT HERE?
    } 
```

对于这个 for 循环的每次迭代，我想在这个窗口中绘制一个带有 x 坐标 (int)nodeArray[i].x 和 y 坐标 (int)nodeArray[i].y 的黑点

我真的很感激任何帮助。这是一个有点高级的算法课程，我有点尴尬，我似乎无法弄清楚图形在 Java 中是如何工作的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:33:41.340

答案取决于您想要实现的目标，但基本上，您需要某种方式将结果绘制到屏幕上。

如果数据不经常更改，最好使用后备缓冲区，因为渲染器速度更快，而不必每次都循环遍历数据集。

查看[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

**动画**

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class Dotty {

    public static void main(String[] args) {
        new Dotty();
    }

    public Dotty() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private int count = 0;
        private int dotCount = 1000;
        private BufferedImage background;

        public TestPane() {
            background = new BufferedImage(600, 600, BufferedImage.TYPE_INT_ARGB);

            Timer timer;
            timer = new Timer(40, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    count++;
                    if (count < dotCount) {
                        int x = (int) Math.round((Math.random() * 600));
                        int y = (int) Math.round((Math.random() * 600));
                        Graphics2D g2d = background.createGraphics();
                        g2d.setColor(Color.BLACK);
                        g2d.drawRect(x, y, 1, 1);
                        g2d.dispose();
                        repaint();
                    } else {
                        ((Timer) e.getSource()).stop();
                    }
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(600, 600);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            int x = (getWidth() - background.getWidth()) / 2;
            int y = (getHeight() - background.getHeight()) / 2;
            g2d.drawImage(background, x, y, this);
            g2d.dispose();
        }
    }
} 
```

**直接渲染**

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class Dotty {

    public static void main(String[] args) {
        new Dotty();
    }

    public Dotty() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private int count = 0;
        private int dotCount = 1000;
        private BufferedImage background;

        public TestPane() {
            background = new BufferedImage(600, 600, BufferedImage.TYPE_INT_ARGB);

            for (int count = 0; count < dotCount; count++) {
                int x = (int) Math.round((Math.random() * 600));
                int y = (int) Math.round((Math.random() * 600));
                Graphics2D g2d = background.createGraphics();
                g2d.setColor(Color.BLACK);
                g2d.drawRect(x, y, 1, 1);
                g2d.dispose();
                repaint();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(600, 600);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            int x = (getWidth() - background.getWidth()) / 2;
            int y = (getHeight() - background.getHeight()) / 2;
            g2d.drawImage(background, x, y, this);
            g2d.dispose();
        }
    }
} 
```

# php - 来自同一个数组的不同链接？

> ID：15778304
> 
> 赞同：0
> 
> 时间：2013-04-03T03:20:05.813
> 
> 标签：php, html, mysql, arrays

这里的一位好心用户给了我这个代码：

```
$singles = valley_images();
$groups = valley_group_images();
$images = array_merge($singles, $groups);

$sortArray = array(); 

foreach($images as $image){ 
    foreach($image as $key=>$value){ 
        if(!isset($sortArray[$key])){ 
            $sortArray[$key] = array(); 
        } 
        $sortArray[$key][] = $value; 
    } 
} 

$orderby = "timestamp"; //change this to whatever key you want from the array 

array_multisort($sortArray[$orderby],SORT_DESC,$images); 

foreach($singles as $single) {
    echo '<img src="1/'.$image['album_id'].'/'.$image['code'].'.'.$image['ext'].'"/>';
}

foreach($groups as $group) {
    echo '<img src="groups/'.$image['group_id'].'/'.$image['code'].'.'.$image['ext'].'"/>';
} 
```

现在的问题是，我将从 2 个不同的表、图像和 group_images 中获取图像。但是图像存储在“1”文件夹中，而 group_images 存储在“groups”文件夹中。我将如何设法根据带有该代码的表更改链接，因为代码没有告诉表它来自哪里？

最后 2 个 foreach 语句是单独的，没有排序。我不确定如何像这样合并 foreach 并进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:55:05.933

假设这是数据的来源：

```
$stmt = $conn->prepare("SELECT images.*, group_images.* ORDER BY `timestamp` DESC"); 
```

我会把它改成

```
$stmt = $conn->prepare("(SELECT images.*, 'single' as db from images) UNION  (SELECT group_images.*, 'group' as db from group_images) ORDER BY `timestamp` DESC"); 
```

一切顺利，您应该在输出中使用“db”的数组键来确定链接。

# wordpress - 网址以数字结尾无法获得 404 页面？

> ID：15778305
> 
> 赞同：0
> 
> 时间：2013-04-03T03:20:07.393
> 
> 标签：wordpress

例如，

`www.myweb.com/page/subpage/subpagetwo/`是我的网址

如果我在末尾添加任何数字，例如

`www.myweb.com/page/subpage/subpagetwo/`**23423423** `www.myweb.com/page/subpage/subpagetwo/`**3453453113132**

我无法获得 404 错误页面，如果将这些数字替换为字母，则可以正常工作。可以请人给一些建议吗？谢谢

# java - 如何从不同的表单更新 jtable？

> ID：15778306
> 
> 赞同：0
> 
> 时间：2013-04-03T03:20:10.107
> 
> 标签：java, swing, jtable, jdialog

```
public class A extends JInternalFrame implements ActionListener
{
   private JTable table;
   private JButton button;

   public A()
   {
      button = new JButton("Load Dialog");
      button.addActionListener(this);

      initializeTable();
   }

   public void initializeTable()
   {

      table = new JTable();
      MyTableModel mymodel = new MyTableModel();

      table.setModel(mymodel);
   }

   public void changeModel(NewTableModel model)
   {
      table.setModel(model);
   }

   public void actionPerformed(ActionEvent e)
   {
      MyDialog dialog = new MyDialog(null,true);
      dialog.setVisible(true);
   }
}

public class MyDialog extends JDialog implements ActionListener
{

   private JButton button;

   public MyDialog(JFrame parent,bool modal)
   {
      button = new JButton("Change Model");
      button.addActionListener(this);

      super(parent,modal);
   }

   public void actionPerformed(ActionEvent e)
   {
      NewTableModel newModel = new NewTableModel();
      A a = new A();

      a.changeModel(newModel);
   }
} 
```

我想从第二种形式（MyDialog）中的第一种形式（A）更新表格。我想为其设置一个新模型，当我单击 MyDialog 中的更改模型按钮时，它将自动更新第一个表单（A）中的模型，并且其所有显示的值将被来自 MyDialog 的新模型替换。怎么可能做到这一点？希望有人可以指导我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:23:11.197

如果您想用 中的模型`A`完全替换模型`MyDialog`，为什么不提供一个`MyDialog`返回新模型的 getter 并`A`在对话框关闭后简单地替换（假设它是一个模态对话框），否则您将需要传递一个参考`A`到_`MyDialog`

# java - 访问列表节点的下一个字段会产生 NullPointerException。为什么？

> ID：15778308
> 
> 赞同：0
> 
> 时间：2013-04-03T03:20:20.913
> 
> 标签：java, list

我在名为“结构”的类中定义了一个嵌套节点类，并且

```
class HNode<T extends ArrayList> {
private T _datum;
private HNode<T> _prev;
private HNode<T> _next;

public HNode(T datum, HNode<T> prev, HNode<T> next) {
    _datum = datum;
    _prev = prev;
    _next = next;
}

public HNode<T> getNext() {
    return _next;
} 
```

当我创建这个 Node 类时，我手动指定了 _datum、_prev 和 _next 字段。

```
_r0 = new HNode<ArrayList<String>>(_al.get(3), _r0, _r1);
_r1 = new HNode<ArrayList<String>>(_al.get(4), _r0, _r2);
_r2 = new HNode<ArrayList<String>>(_al.get(5), _r1, _pos3);
_pos3 = new HNode<ArrayList<String>>(_al.get(6), _r2, _pos4);
_pos4 = new HNode<ArrayList<String>>(_al.get(7), _pos3, _pos5); 
```

（这是初始化的一部分。_al 是 ArrayList 的一个 ArrayList，我曾经为此调用 Collections.shuffle(_al) 方法。）

当我用 JUnit Test(@Test) 测试 getNext() 方法时

```
public void getNextTest() {
    Structure st = new Structure();
    HNode<ArrayList<String>> six = st.getSix(); 
    six.getNext().add("KKK");
    String actual = st.getSeven().getDatum().get(0); 
    String expected = "KKK";
    assertTrue(" ", actual == expected);
} 
```

getSix() 返回 _pos3，getSeven() 返回 _pos4（在 _pos3 旁边）（临时方法）。任何人都可以看到问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:37:19.023

我认为这里出了问题：

```
_pos4 = new HNode<ArrayList<String>>(_al.get(7), _pos3, _pos5); 
```

您已将**_pos5**指定为下一个元素，但我认为您从未初始化它。所以这个值默认为空。现在，如果您尝试访问空引用上的任何方法，您将获得 NullPointerException。

# javascript - D3乘以stackedAreaChart中的数据点

> ID：15778312
> 
> 赞同：1
> 
> 时间：2013-04-03T03:20:56.690
> 
> 标签：javascript, json, d3.js, nvd3.js

出于某种原因，我的 stackAreaChart 将我的每个 y 值乘以 10。这是我目前所拥有的：

```
 var data = [{"key":"New York","values":[["2000","47"],["2001","49"],["2002","49"],["2003","47"],["2004","48"],["2005","49"],["2006","50"],["2007","48"],["2008","48"],["2009","47"],["2010","50"],["2011","49"],["2012","51"]]},{"key":"Los Angeles","values":[["2000","56"],["2001","55"],["2002","55"],["2003","56"],["2004","57"],["2005","56"],["2006","57"],["2007","56"],["2008","57"],["2009","57"],["2010","57"],["2011","55"],["2012","56"]]}] ;

  var colors = d3.scale.category10();
  keyColor = function(d, i) {return colors(d.key)};

  var chart;
  nv.addGraph(function() {
    chart = nv.models.stackedAreaChart()
    .x(function(d) { return d[0] })
    .y(function(d) { return d[1] })
    .color(keyColor)

    chart.xAxis
    .showMaxMin(false)

    chart.yAxis
    .tickFormat(d3.format(',.2f'));

    d3.select('#chart1')
    .datum(data)
    .transition().duration(500).call(chart);

    nv.utils.windowResize(chart.update);

    chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

    return chart;
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:32:13.480

数组中的值`data`都是字符串。在 nvd3 世界的某个地方，这些被添加为字符串，而不是数字，然后你就会遇到你遇到的问题（例如`"47" + "49"`equals `"4749"`）。

修复它的快速方法是将访问器更改为`.y(function(d) { return +d[1] })`. add将`+`字符串强制转换为数字。

但更好的解决方法是在 JSON 中从数字而不是字符串开始。

# jquery - jQuery：在页面加载时取消选中/选中复选框

> ID：15778315
> 
> 赞同：0
> 
> 时间：2013-04-03T03:21:31.067
> 
> 标签：jquery

[http://jsfiddle.net/dmitryfil/4pYaW/1/](http://jsfiddle.net/dmitryfil/4pYaW/1/)

*   浏览器 - 铬
*   我有一系列复选框，其中一个默认选中。
*   我有一个带有 2 个选项的选择（其中一个选项的值链接到复选框）
*   当我尝试检查复选框时，基于一个选择（所以应该选择 2 个），只有 1 个复选框被选中，这就是我想要弄清楚的，为什么？

## HTML：

```
<input type="checkbox" name="item-a" checked="checked" />
<input type="checkbox" name="item-b" />
<input type="checkbox" name="item-c" />

<hr />

<select multiple>
    <option value="a">a</option>
    <option value="b">b</option>
</select> 
```

## JS：

```
$('input[type=checkbox]:checked').attr('checked', false);
//$('input[type=checkbox]:checked).removeAttr('checked');

$('select option').each(function(i, el){
    var val = $(this).attr('value');
    $('input[name=item-'+val+']').attr('checked', 'checked');
    //$('input[name=item-'+val+']').attr('checked', true);
}); 
```

## 笔记：

*   如果默认情况下未选中复选框，则可以正常工作。
*   当我取消选中： attr('checked', false) 和 removeAttr('checked') - 它们会产生不同的结果。

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:24:57.470

使用[.prop](http://api.jquery.com/prop/)更改 dom 元素的运行时属性，例如`checked`和`selected`。

这些属性的值是布尔值，例如 true/false，而不是选中/选中。

```
$('input[name=item-'+val+']').prop('checked', true); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/TkREQ/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T03:26:42.563

试试这个，

```
$('select option').each(function(i, el){
    var val = $(this).prop('value');
    $('input[name=item-'+val+']').prop('checked', 'checked');
    //$('input[name=item-'+val+']').attr('checked', true);
}); 
```

`[Demo](http://jsfiddle.net/Tc7Xe/1/)`

A`prop()`与 不同`attr()`。`prop()`更改元素的属性，其中 as`attr()`更改属性（用 html 元素编写的那个）

我强烈建议您在 [.prop() 与 .attr()上查看所有答案](https://stackoverflow.com/questions/5874652/prop-vs-attr)

# ruby-on-rails-3 - 具有多个模式的多租户 Rails 应用程序

> ID：15778316
> 
> 赞同：2
> 
> 时间：2013-04-03T03:21:33.713
> 
> 标签：ruby-on-rails-3, multi-tenant

所以我正在使用 rails 3.2.11 开发一个多租户 rails 应用程序。我们选择了模式方法，因此我们使用单个 Postgres 数据库。根据子域加载正确的架构。我们通过为每个模式创建一个数据库用户来增加数据库端的安全性，该用户只有权访问其自己的模式中的数据。

我用于检查子域和建立正确数据库连接的所有代码都`before_filter`在我的应用程序控制器内部的一个方法中。

我的方法只是更改了`search_path`，然后我使用以下内容`ActiveRecord::Base.establish_connection`更改数据库用户名和密码。

我已经编写了几个测试并浏览了该应用程序，以确保它一切正常并且数据保存在正确的模式中（即使同时使用多个子域），到目前为止一切都很好。

但我有两个大问题想问：

1.  我现在正在使用该`ActiveRecord::Base.establish_connection`调用来建立数据库连接。因此，我刚刚从我的 database.yml 文件中删除了所有代码，一切仍然正常。但是...我以前从来没有做过这样的事情，有没有更正确的方法呢？我担心这可能会导致一些错误..

2.  就像我之前说的，`before_filter`调用一个方法来建立正确的数据库连接。但是就像我说的那样，我使用的是`before_filter`，所以每次用户更改页面时，都会重新建立连接。我担心这可能会导致性能问题，尤其是随着应用程序的增长。而且我不确定我是否忽略了任何东西，这可能会导致一些无法预料的错误。有没有人有这方面的经验，可以就如何处理这个问题提供一些建议？也许有办法添加代码，说明如果建立了正确的初始数据库连接，那么除非子域发生变化，否则不要再次重新建立连接？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T06:39:48.590

这可能对您有用：[https ://github.com/influitive/apartment](https://github.com/influitive/apartment)

> Rails 3 和 ActiveRecord 的多租户
> 
> Apartment 提供了一些工具来帮助您处理 Rails 应用程序中的多个数据库。如果您需要基于帐户或公司隔离某些数据，但仍允许某些数据存在于公共数据库中，Apartment 可以提供帮助。

此外，这里有很多关于 SO 的多租户问题，请查看

# c++ - 在结构未排序的数组中向左移动索引

> ID：15778318
> 
> 赞同：0
> 
> 时间：2013-04-03T03:21:36.357
> 
> 标签：c++, arrays, struct

我有我整个程序的这个片段。在这个函数中，特别是这段程序中，用户输入一个 MLS# 来从阵列中删除一个家。第一个“for”语句搜索 MLS#，然后搜索 null 的所有数据。我在下一个“for”语句中遇到问题。索引清空后将所有数据向左移动。struct数组中存储的数据如下：

```
struct mlsListing { int mlsNum;           // Struct Array holds one line of the struct
                    double price;         // mlsListing 
                    int type; 
                    string zip; 
                    string company; 
                    string realty; 
                  }; 
 const int MAX_LISTINGS = 750;  
        mlsListing houseData[MAX_LISTINGS]; 
 const int NOT_FOUND = -1;
 int targetMLS; // Variable for target MLS
 int mlsDelete; // Variable for target MLS found
 int mlsCounter;// Counter for finding target MLS 
 int count;     // Array Counter

// Function 

void {

 cout << "Enter the MLS# you wish to delete: "; 
           cin >> targetMLS;                       // User input MLS#

        for (mlsCounter = 0; ((mlsCounter < count) && (mlsDelete == NOT_FOUND));
                                 mlsCounter++) {

                 if (houseData[mlsCounter].mlsNum == targetMLS) {

                    mlsDelete = houseData[mlsCounter].mlsNum; 

                    houseData[mlsCounter].mlsNum = 0; 
                    houseData[mlsCounter].price = 0;
                    houseData[mlsCounter].type = 0;
                    houseData[mlsCounter].zip.clear(); 
                    houseData[mlsCounter].company.clear();
                    houseData[mlsCounter].realty.clear(); 
                  }
          }

         // Shifting indices to the left after deletion?

          for (move = mlsCounter;move < count; move++){

              houseData[move].mlsNum = houseData[move+1].mlsNum; 
              houseData[move].price = houseData[move+1].price; 
              houseData[move].type = houseData[move+1].type; 
              houseData[move].zip = houseData[move+1].zip; 
              houseData[move].company = houseData[move+1].company;
              houseData[move].realty = houseData[move+1].realty;  
          } 

         count--; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:31:42.097

第二个 for 循环超出范围。一定是：

```
for (move = mlsCounter;move < count - 1; move++) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:25:50.397

这样做是通过遍历所有剩余的项目并将它们移近一点（然后最后减少计数），从数组中的位置删除该项目。

简化示例：

假设您有一个仅包含字符的简单数组。让我们有一个 10 个字符的数组：

```
Array position :   [0]  [1]  [2]  [3]  [4]  [5]  [6]  [7]  [8]  [9]
Values in array:    a    l    p    h    a    b    e    t    i    c 
```

您将如何删除位置 [5] 中的字母（即“b”）？你会把所有剩余的字母都移过来，所以它看起来像这样：

```
Array position :   [0]  [1]  [2]  [3]  [4]  [5]  [6]  [7]  [8]  [9]
Values in array:    a    l    p    h    a    e    t    i    c 
```

这正是您看到的 for 循环正在做的事情。它对结构的每个部分都这样做，有效地将下一个索引中结构的所有部分复制到前一个索引中。

如果我没记错的话，结构是不必要的。我相信你应该只能说`houseData[move] = houseData[move+1]`，它会简单地将后者按位复制到前者中。

### 编辑

根据评论/讨论，问题有所不同。你只需要在正确的时间跳出你的上层 for 循环。您还需要将第二个循环设置为不超出范围。

```
for (mlsCounter = 0; ((mlsCounter < count) && (mlsDelete == NOT_FOUND));
                             mlsCounter++) {

             if (houseData[mlsCounter].mlsNum == targetMLS) {

                mlsDelete = houseData[mlsCounter].mlsNum; 

                houseData[mlsCounter].mlsNum = 0; 
                houseData[mlsCounter].price = 0;
                houseData[mlsCounter].type = 0;
                houseData[mlsCounter].zip.clear(); 
                houseData[mlsCounter].company.clear();
                houseData[mlsCounter].realty.clear(); 

                break;
              }
      }

   for (move = mlsCounter;move < count - 1; move++){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:42:25.480

我认为列表将是更适合该任务的数据结构。另外，无论如何，如果可能，您应该考虑使用标准库提供的容器。

```
std::list<mlsListing> housedata; // so you can easily add stuff at the end, and remove stuff in the middle at low cost

std::remove_if( housedata.begin(), housedata.end(), 
                [&](mlsListing current) -> bool 
                {
                    if (current.mlsNum == targetMLS)
                    {
                        mlsDelete = current.mlsNum;
                        return true;
                    }
                    return false;
                }
              ) 
```

# php - 无法使用 gmail id 从本地主机发送电子邮件

> ID：15778320
> 
> 赞同：0
> 
> 时间：2013-04-03T03:21:58.653
> 
> 标签：php, email, gmail

我正在使用 Windows 7 和 xampp 1.8（水银邮件已打开）并尝试使用 gmail id 从本地主机发送电子邮件。但它不工作。这是我的 email.php：

```
<?php
$to="receiver.email@gmail.com";
$subject='the subject';
$message="dfdgh";
$headers='From:my.email@gmail.com'."\r\n".'Host:ssl://smtp.gmail.com'."\r\n".'Port:465'."\r\n".'Username:my.email@gmail.com'."\r\n".'Password:mypassword'."\r\n".'Reply-To:my.email@gmail.com'."\r\n".'X-Mailer:PHP/'.phpversion();
mail($to, $subject, $message, $headers);
?> 
```

这是我更改的本地主机 php smtp 配置

```
;SMTP = localhost
;smtp_port = 25
SMTP =ssl://smtp.gmail.com
smtp_port = 465
; For Win32 only.
;http://php.net/sendmail-from
;sendmail_from = postmaster@localhost
ssl://smtp.gmail.com
sendmail_from = my.email@gmail.com 
```

执行代码后，我没有收到任何错误消息，但没有收到任何电子邮件。

我做错了什么？

-谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:51:54.360

Gmail SMTP 已停止工作`465`，`SSL`因此请使用以下配置。

之前它工作得很好，但现在它在下面的配置上工作。

```
SMTP =tls://smtp.gmail.com
smtp_port = 587
tls://smtp.gmail.com 
```

使用`587` `SMTP_PORT`和使用`TLS`。

如果它不起作用，则将`SMTP = tls`行替换为`SMTP = aspmx.l.google.com`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:32:55.440

首先调试它

```
mail($to, $subject, $message, $headers); 
```

尝试写下条件以查看邮件是否正在发送

```
if(mail($to, $subject, $message, $headers)){
echo 'Success';
}
else{
echo 'Failed';
} 
```

# ninject - 我需要向 Ninject.Web.MVC 3.0 注册 Ninject.OnePerRequestModule 吗？

> ID：15778324
> 
> 赞同：8
> 
> 时间：2013-04-03T03:22:55.540
> 
> 标签：ninject, ninject.web.mvc

我在 MVC4 应用程序中使用 Ninject for DI 和 Ninject.MVC3 扩展，特别是版本 3.0.0.6。

阅读 Ninject wiki 上的[文档](https://github.com/ninject/Ninject.Web.Common/wiki/InRequestScope)，似乎使用创建的对象的生命周期`InRequestScope`实际上是由 ASP.NET 控制的，并且要正确清理一个应该注册`OnePerRequest`HttpModule。

`type="Ninject.OnePerRequestModule"/>`但是，由于找不到此文档，该文档似乎已过时。

另一方面，我最近阅读了一些[似乎](https://stackoverflow.com/questions/5018333/ninject-and-oneperrequestmodule)暗示`NinjectHttpApplication`已经处理`OnePerRequest`.

我的问题是 Ninject.Web.MVC 3.0 是否已经处理了这个问题，或者我是否仍然需要手动将 HttpModule 添加到我的“web.config”中。

我已将以下内容添加到我的配置中，并且一切似乎都在工作，尽管我完全不知道如何测试对象何时被销毁：

```
 <system.web>
    <httpModules>
      <add name="OnePerRequestModule" type="Ninject.Web.Common.OnePerRequestHttpModule"/>
    </httpModules>
    ... 
```

我需要手动添加`OnePerRequest`HttpModule 还是 Ninject.Web.MVC 会为我处理这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T12:04:52.307

执行摘要：不，您不需要在`web.config`.

您可以通过以下方式手动进行完整性检查：

*   绑定东西`IDisposable` `.InRequestScope()`
*   将其添加到 Controller 的 ctor
*   附加一个调试器，在里面放一个断点`void Dispose()`
*   手动触发`HttpRequest`

如果你击中`Dispose`，它是 Ninject 射杀了熊（你将有一个调用堆栈来证明这一点）。

用什么线呢？`Ninject.Web.Common`NuGet 包添加：

```
public static class NinjectWebCommon
{
    public static void Start()
    {
        ...
        DynamicModuleUtility.RegisterModule( typeof( OnePerRequestHttpModule ) ); 
```

`DynamicModuleUtility`来自`Microsoft.Web.Infrastructure`（并且对该`Start`方法的调用由以下驱动：

```
[assembly: WebActivator.PreApplicationStartMethod( typeof( App_Start.NinjectWebCommon ), "Start" )] 
```

（来自`WebActivator`NuGet 包）

* * *

[医生](https://github.com/ninject/Ninject.Web.Common/wiki/InRequestScope) 学究式地~~说道~~：

> 要获得更具确定性的行为，您可以执行以下任何操作：
> 
> 1.  ...
>     
>     
> 2.  使用为您注册 OnePerRequestModule 的 Ninject.Web.Common 扩展。

...

> 你*可以*注册

（我的重点）。我会更明确的...

* * *

顺便说一句，在回答这个问题的练习开始时，我没有特别的知识，只是`Ninject` `Ninject.Web.Common`我的一个应用程序的来源。

# java - 在 HTML (JSP) 按钮中获取字符串值

> ID：15778325
> 
> 赞同：0
> 
> 时间：2013-04-03T03:23:05.257
> 
> 标签：java, html, jsp

我有这个 HTML 标签

```
<button type="submit" name=<%=s %> value=<%=s %>><%=s%></button> 
```

<%=s %> 是存储在服务器中的带有空格的字符串，例如“文件一”。

我的问题是获取按钮名称。我正在使用以下代码：

```
String btnName = request.GetParameter(s); 
```

它正在工作，除非字符串显示像“文件一”这样的空格。在这种情况下，“一”部分被忽略。

我怎样才能得到整个字符串？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:31:07.343

像下面这样放。

```
<button type="submit" name='<%=s %>' value='<%=s %>'><%=s%></button> 
```

注意新的单引号。

# java - 有没有办法在 JLabel 中打印 AttributedString？

> ID：15778329
> 
> 赞同：2
> 
> 时间：2013-04-03T03:23:33.540
> 
> 标签：java, swing, jlabel, subscript

我有一个`AttributedString`常规文本和一些下标。我想把文本放在一个`JLabel`不丢失格式的地方。

这可能吗？如果没有，最好的选择是什么？

编辑：这是一些示例代码，可进一步解释我的问题：

```
import javax.swing.JLabel;
import javax.swing.JFrame;
import java.text.AttributedString;
import java.awt.font.TextAttribute;
public class LabelExample extends JFrame implements Runnable
{
  private JLabel label;
  private AttributedString as;
  public LabelExample()
  {
    as = new AttributedString("Ten to the fifth is 105");
    as.addAttribute(TextAttribute.SUPERSCRIPT, TextAttribute.SUPERSCRIPT_SUPER, 22, 23);
    label = new JLabel(as);
    //the above line doesn't accept AttributedString 
    //as a suitable constructor
    this.add(label);
  }
  public void run()
  {
    setSize(500, 500);
    setVisible(true);
  }
  public static void main(String[] args)
  {
    LabelExample e = new LabelExample();
    javax.swing.SwingUtilities.invokeLater(e);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:54:44.930

使用我的 AttributedLabel 类。

```
public class AttributedLabel extends JLabel {

    AttributedString str;

    public AttributedLabel(AttributedString s){
        super(s);
        str = s;
    }

    @Override
    public void paintComponent(Graphics g){
        // Render the string
        g.drawString(as.getIterator(), 0, 0);
    }

} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:41:32.493

通过覆盖`JLabel`so 它的行为就像`JPanel`or`JComponent`并使用它的`paint`方法。那显然不是一个好主意，`JPanel`直​​接用a就好了。`Graphics2D`上下文知道如何处理一个（`AttributedString`字符迭代器，具体来说）。

`JLabel`直接了解 HTML 渲染，也许这可以帮助您完成特定任务，因为您可以轻松构建带有上标标签的 HTML 字符串。我不知道将 a 转换`AttributedString`为 HTML 的舒适方法。

# ios - 我可以通过 presentFeedDialogModallyWithSession 传递给 FBWebDialogs 的全套合法参数是什么

> ID：15778332
> 
> 赞同：5
> 
> 时间：2013-04-03T03:24:09.053
> 
> 标签：ios, facebook, facebook-ios-sdk

*   我在这里查看了 Facebook 上的示例代码：[https ://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/](https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/)
*   并查看了类参考：[https ://developers.facebook.com/docs/reference/ios/3.2/class/FBWebDialogs/#presentDialogModallyWithSession%3Adialog%3Aparameters%3Ahandler%3A](https://developers.facebook.com/docs/reference/ios/3.2/class/FBWebDialogs/#presentDialogModallyWithSession%3Adialog%3Aparameters%3Ahandler%3A)

是否有关于我可以传递 FWWebDialogs 的全套参数的文档？我可以在“说点什么”文本中设置文本吗（我知道你可以设置标题和描述）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-30T04:30:58.197

[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)底部列出的参数都允许传入webdialog。不，您不能在say something 字段中设置文本。如果您使用本机 iOS 6 共享控件，您可以设置文本，但用户可以更改它。

# ios - 在核心数据中创建多对多关系，而无需“通过”另一个对象

> ID：15778333
> 
> 赞同：0
> 
> 时间：2013-04-03T03:24:10.403
> 
> 标签：ios, core-data, many-to-many

快速核心数据问题。

我正在尝试以多对多关系链接核心数据对象：

*   评论（有一个名为 commentHashTags 的属性）
*   Hashtags（有一个名为 hashTagComments 的属性）

在一对多的关系中，我会逃脱：

*   commentObject.commentHashTag = hashTagObject

有没有办法在多对多关系中做类似的事情，而不必在中间创建一类核心数据对象（commentHashTagRelationship）。

期待任何帮助，我非常不愿意更新我的核心数据模型，因为它会迫使我们现有的用户重新安装他们的客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:33:57.777

而不是使用：

```
commentObject.commentHashTag = hashTagObject 
```

当您使用多对多关系时，将对象添加到关系中将类似于：

```
NSMutableSet *tempRelationSet = commentObject.commentHashTags;
[tempRelationSet addObject:newHashTagObject];
commentObject.commentHashTags = tempRelationSet; 
```

# javascript - jQuery 获取 mousedown 和 mouseup 之间的所有 x 和 y

> ID：15778344
> 
> 赞同：1
> 
> 时间：2013-04-03T03:26:16.753
> 
> 标签：javascript, jquery, raphael, mouseevent

我正在使用 Raphael 制作一个简单的绘图应用程序。我目前正在尝试绘制波浪线（是否有更好的词），所以我想捕获 mousedown 和 mouseup 之间的所有 x 和 y。在这个 stackoverflow 问题[jQuery Continuous mousedown](https://stackoverflow.com/questions/4961072/jquery-continuous-mousedown)中，有一个解决方案可以在事件之间做一些事情，但我无法让 x 和 y 正常工作。我正在尝试使用 mousemove() 来获取它，但是当函数结束时 mousemove() 并没有停止。并且让 get 的 x 和 y 调用它的函数让我陷入无限循环。所以......两件事，如何连续获取x和y以及如何避免无限循环。我知道如何将它放入一个数组并在之后制作一条波浪线，而不是如何做鼠标监听器。我现在的代码是：

```
var paper = new Raphael($('#canvas')[0], 500, 500);
var canvas =$('#canvas');

var stillDown = false;
canvas.mousedown(function(){
    console.log("down");
    stillDown = true;
    whileDown();
});

function whileDown(){
    if(!stillDown){return;}else{
    console.log("Still in down.");
        canvas.mousemove(function(e){
        //console.log("X: " + e.offsetX + " Y: " + e.offsetY);
    });
    whileDown();
    }
}

canvas.mouseup(function(){
    stillDown = false;
}); 
```

我目前的目标是让它在控制台中显示它已关闭，所有 x 和 y 都在关闭，并且它已启动，之后什么都没有。然后我会处理这些信息。无论如何，任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:08:55.167

在 mousedown 上，只需设置布尔标志：

```
var stillDown = false;
canvas.mousedown(function(){
    console.log("down");
    stillDown = true;
}); 
```

在 mousemove 上，如果设置了标志，则将坐标推送到数组：

```
var coords = [];
canvas.mousemove(function(e){
    if(!stillDown) return;
    console.log("moving");
    coords.push({x: e.offsetX, y: e.offsetY});
    // and/or do whatever you need with the coordinates  
} 
```

在 mouseup 上，取消设置标志：

```
canvas.mouseup(function(){
    stillDown = false;
}); 
```

# php - 来自 jQuery ajax post 的 PHP 表单验证

> ID：15778345
> 
> 赞同：0
> 
> 时间：2013-04-03T03:26:21.447
> 
> 标签：php, jquery

[我有一个使用http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)验证器验证客户端的表单（名字、姓氏等）。然后我使用 ajax serialize() 将表单字段发布到服务器，但是我想知道是否有人可以共享一个类（或到类的链接）以进行服务器端验证。

我试过使用[http://www.html-form-guide.com/php-form/php-form-validation.html](http://www.html-form-guide.com/php-form/php-form-validation.html)但这看起来像这个类期望表单字段的名称来应用验证。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:52:56.653

该库不需要表单的名称。如果您查看他们给您的示例，他们只使用输入字段的名称。

```
<?PHP
require_once "formvalidator.php";
$show_form=true;
if(isset($_POST['Submit']))
{
    $validator = new FormValidator();
    $validator->addValidation("Name","req","Please fill in Name");
    $validator->addValidation("Email","email",
"The input for Email should be a valid email value");
    $validator->addValidation("Email","req","Please fill in Email");
    if($validator->ValidateForm())
    {
        echo "<h2>Validation Success!</h2>";
        $show_form=false;
    }
    else
    {
        echo "<B>Validation Errors:</B>";

        $error_hash = $validator->GetErrors();
        foreach($error_hash as $inpname => $inp_err)
        {
          echo "<p>$inpname : $inp_err</p>\n";
        }
    }
}

if(true == $show_form)
{
?>
<form name='test' method='POST' action='' accept-charset='UTF-8'>
Name: <input type='text' name='Name' size='20'>
Email: <input type='text' name='Email' size='20'>
<input type='submit' name='Submit' value='Submit'>
</form>
<?PHP
}//true == $show_form
?> 
```

表格的名称是“测试”。它没有被检查。请发布您的源代码，以便有人可以帮助您找到问题所在。

您还可以查看以下帖子以获取更多库 - [PHP 最简单的表单验证库？](https://stackoverflow.com/questions/737385/easiest-form-validation-library-for-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:53:45.923

...好的，如果您正在寻找清理传递的值以确保没有坏事通过，那么您可以在这里查看：http: [//php.net/manual/en/filter.filters.sanitize.php](http://php.net/manual/en/filter.filters.sanitize.php)

如果您正在寻找基于某些预设规则的“验证”，请指定。

如果您只需要基本字符，您也可以像这样对传递的值进行部分消毒。放：

```
function sterilize($input) {

$input = htmlentities($input);

$input = strip_tags($input);

    return $input;

} 
```

仅供参考，如下所述，对于电子邮件地址，您可以使用以下内容：

```
$email = isset($_POST['email']) ? filter_var($_POST['email'], FILTER_SANITIZE_EMAIL): ''; 
```

# ruby-on-rails - 在 Linux 中使用 Ruby on Rails 通过 Wine 运行 Windows 批处理文件

> ID：15778352
> 
> 赞同：0
> 
> 时间：2013-04-03T03:27:10.570
> 
> 标签：ruby-on-rails, ruby, ubuntu, command-line, wine

我正在使用 Ruby on Rails 开发一个 Web 应用程序，并在 Linux (ubuntu) 服务器上运行它。我的后端处理基于 Windows .bat 文件，该文件根据大约 5 个参数的列表调用其他 .bat 文件的网络。

所以基本上，我试图通过我的 Rails 应用程序中的 wine 调用带有命令行首选项的初始批处理文件。

例如，这类似于我用来在 ubuntu 终端中成功运行代码：

```
wine cmd.exe /C InitialCallFile.bat Directory/Input.xml Directory/Output.xml param1 param2 
```

我试图用 Ruby 中的 System 和 %x 命令来调用它。例如：

```
System "wine cmd.exe /C InitialCallFile.bat self.infile self.outfile self.param1 self.param2"
system wine cmd.exe InitialCallFile.bat [self.infile, self.outfile, self.param1, self.param2]
%x[wine cmd.exe /C InitialCallFile.bat self.infile self.outfile self.param1 self.param2] 
```

和其他类似的变体

但是，程序无法识别 cmd 并返回错误：未定义的局部变量或方法 `cmd'

我应该如何使用 Ruby on Rails 在 wine 中正确调用应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:46:40.970

您应该能够使用[`system`](https://ruby-doc.org/core/Kernel.html#method-i-system)（注意小写`s`），最好是多参数形式：

```
system 'wine', 'cmd.exe', '/C', 'InitialCallFile.bat', self.infile, self.outfile, self.param1, self.param2 
```

请注意，常量部分是字符串文字，而可变部分（例如`self.infile`）是方法调用，因此它们没有被引用。

您也可以使用字符串插值来构建命令，但这是一个非常糟糕的主意，我不会通过向您展示如何鼓励坏习惯。

# jquery - 有没有办法用 jQuery 包装以下文本节点？

> ID：15778357
> 
> 赞同：-1
> 
> 时间：2013-04-03T03:27:47.907
> 
> 标签：jquery

我有以下内容：

HTML：

```
<div class="WishListMember_LoginMergeCode">
Killer Idea
<br>
Outsource Course
<br>
App Development
<br>
</div> 
```

我想把它变成这样：

```
<div class="WishListMember_LoginMergeCode">
<a href="link1">Killer Idea</a>
<br>
<a href="link2">Outsource Course</a>
<br>
<a href="link3">App Development</a>
<br>
</div> 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:32:56.610

```
$('div.WishListMember_LoginMergeCode').contents().filter(function(){
   return this.nodeType === 3;
}).wrap('<a href="#"></a>'); 
```

[http://jsfiddle.net/wjS6F/](http://jsfiddle.net/wjS6F/)

更新：

```
$('div').contents().filter(function() {
   return this.nodeType === 3;
}).wrap(function(index) {
   return '<a href="link'+ ++index +'"></a>';
}); 
```

[http://jsfiddle.net/8P2gf/](http://jsfiddle.net/8P2gf/)

# string - 使用“Ñ”或“É”等特殊字符管理 string.toLowerCase() 中的“错误”

> ID：15778358
> 
> 赞同：0
> 
> 时间：2013-04-03T03:27:49.490
> 
> 标签：string, special-characters, translate, string-matching

我正在尝试用 Java 做一个翻译器，我在二叉树中管理字典，但是当我尝试管理像英语-西班牙语这样的翻译字典时，或者像“西班牙语”这样的反之词翻译成“español”时。我遇到的问题是我必须进行不区分大小写的翻译。为此，我选择了 string.toLowerCase() 方法，但它会删除“Ñ”、“ñ”等特殊字符或“é”等重音词。我稍后会像这样比较字符串

```
str.toLowerCase(new Locale("es", "ES")).equals(dictionaryword.toLowerCase(new Locale("es", "ES") 
```

例如，那段代码不会返回 true

```
str = Español;
dictionaryword = español; 
```

我的问题是，如果有人知道如何管理这个“错误”，或者我做错了什么。另外，我不知道我是否应该尝试

```
str.equalsIgnoreCase(dictionaryword) 
```

而不是我正在使用的 toLowerCase(Locale) 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:50:16.523

看看 RegexReplace 和 StringReplace。

```
str = Regex.Replace(str, "Ñ", "ñ");
str = Regex.Replace(str, "[A-Z]", "[a-z]"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:32:36.853

如果您的`toLowerCase(locale)`功能不起作用，我会认真建议您自己实现它。由于我们正在谈论的是西班牙语，因此您应该注意一些特殊字符。

# performance - 回归 n log(n) 排序

> ID：15778362
> 
> 赞同：3
> 
> 时间：2013-04-03T03:28:03.760
> 
> 标签：performance, algorithm, sorting

我有一个排序算法需要执行`n log n`排序`n`时间，每一步 n 减 1？换句话说：我期望的表现是`O(n log n + (n-1) log (n-1) + (n-2) log (n - 2) + ... )`. 这个问题绝对不会让我觉得以前没有遇到过，所以我必须问：

**`n log n`排序时间的数量级性能是`n`多少，每一步 n 减 1？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:29:24.623

N^2 对数(N)

您正在执行 NlogN 操作 N 次，因此 N 次 NlogN 是解决方案。

哦，经过您的编辑，情况完全不同。很难算出总和，但它的上限（所有大 O 都是）仍然是 N^2 log(N)。您可能能够找出更接近的上限，但我认为这将是一个可行的解决方案。

有关更精确的解决方案，请参阅[https://math.stackexchange.com/questions/135787/asymptotic-formula-for-the-logarithm-of-the-hyperfactorial 。](https://math.stackexchange.com/questions/135787/asymptotic-formula-for-the-logarithm-of-the-hyperfactorial)

更精确的解决方案仍然以 N^2 logN 为界（相当多），所以我认为它仍然是一个安全的上限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T03:44:59.660

大约是 0.5 * n ² * log(n)：

```
#include <stdio.h>
#include <math.h>

#define MAX 100
double sum[1 + MAX];

int main(void)
{
  int i;

  sum[0] = 0;

  for (i = 1; i <= MAX; i++)
  {
    sum[i] = sum[i - 1] + i * ceil(log2(i));
    printf("%i %.0f %.0f\n", i, sum[i], ceil(log2(i) * i * i / 2));
  }

  return 0;
} 
```

输出（[ideone](http://ideone.com/PRpX9r)）：

```
1 0 0
2 2 2
3 8 8
4 16 16
5 31 30
6 49 47
7 70 69
8 94 96
9 130 129
10 170 167
...
90 25871 26293
91 26508 26946
92 27152 27608
93 27803 28279
94 28461 28959
95 29126 29647
96 29798 30344
97 30477 31050
98 31163 31764
99 31856 32488
100 32556 33220 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T20:43:58.717

```
Time = SUM { k log k } for k: 1..n = log(H(n)) ~ Θ(log(H(n))) 
```

*H(n)：n 中的超因子函数*

**渐近近似：**

我将尝试通过推广 k 来推断 f(n) 作为上限的近似值。

```
f(n) = log n * SUM { k } for k: 1..n

f(n) = log n * 1/2 n (n+1)

f(n) = 1/2 n log n (n+1)

O(f(n)) = O(1/2 n^2 log n (n+1))

~ O(n^2 log n) 
```

我将尝试通过推广 log(k) 来推断 g(n) 作为下限的近似值。

```
g(n) = n * SUM { log(k) } for k: 1..n

g(n) = n * log(1/2 n(n+1))

g(n) = n * (log(1/2) + log(n) + log(n+1))

g(n) = n * (c + log(n) + log(n+1))

g(n) = n * (c + log(n(n+1)))

Ω(g(n)) = Ω(n * (c + log(n^2+n))) = Ω(n * log(n^2+n))

~ Ω(n log(n^2+n)) 
```

所以，我们有：

```
Ω(n log(n^2+n)) < Θ(log(H(n))) < O(n^2 log n) 
```

例子：

```
n = 100; Ω(922.02) < Θ(20,756.7) < O(46,051.7)

n = 1000; Ω(1.38 × 10^4) < Θ(3.2 × 10^6) < O(6.9 × 10^6) 
```

**注意**： f(n) 和 g(n) 是边界的渐近近似，它们不准确..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T18:55:21.907

是`Theta(N^2 log N)`。

很明显`O(N^2 log N)`。

为了证明它是`Omega(N^2 log N)`，只考虑序列的大半部分，其中 的每个值`k`至少是`N/2`。为简单起见，假设`N`是偶数。

```
Sum[k=1..N](k log k) >= Sum[k=N/2..N](k log k)           ; drop the small half
                     >= Sum[k=N/2..N]((N/2) log (N/2))   ; since each k >= N/2
                     >= N/2 * N/2 * log (N/2)
                      = N^2/4 * (log N - log 2)
                      = N^2/4 * logN - c
                      ∈ Omega(N^2 log N) 
```

# go - 在 Go 中运行 os/exec 命令后获取环境

> ID：15778363
> 
> 赞同：2
> 
> 时间：2013-04-03T03:28:28.277
> 
> 标签：go

我正在通过 os.exec 包运行外部命令。我可以使用 Cmd.Env 成员为外部命令指定环境。但是，该命令可能会修改该环境，我想为后续调用该命令捕获这些修改。

如何在命令终止后立即找出环境状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T04:08:30.570

我不相信有一个标准接口可以以独立于平台的方式完成您所追求的事情。

例如，在像 Linux 这样的系统上，进程的环境是通过`environ`进程地址空间中的全局变量来管理的。对本地环境的更改只会传播到新进程，因为此环境已传递给`execve`系统调用。

所以要做你想做的事，你真的需要你正在执行的过程的合作。也许你可以让它写出它的环境来响应一个信号？

# webdav - WebDAV 服务器上的并发传输任务限制

> ID：15778364
> 
> 赞同：1
> 
> 时间：2013-04-03T03:28:32.933
> 
> 标签：webdav

我已经建立了基于 ITHitWebDAVServerEngine 的 WebDAV 服务器，你能帮我告诉我如何获取并发传输任务的数量吗？并限制最大并发上传？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:15:18.630

如果您基于 IIS 构建服务器，那么您应该为此使用 IIS 工具。但是，如果您的服务器基于 HttpListener 类，那么请使用此类的可能性。

# postgresql - Heroku 上的 Postgres 并将单个表转储到转储文件

> ID：15778365
> 
> 赞同：30
> 
> 时间：2013-04-03T03:28:38.417
> 
> 标签：postgresql, heroku, heroku-toolbelt

我在 Heroku 上使用 Postgres，需要从我的生产数据库中转储一个表并将其转储到我的暂存数据库中。我安装了 heroku 工具带，但不知道如何转储单个数据库表以导入我的暂存数据库。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-04-22T16:00:28.937

您可以像这样转储单个数据表：

```
$ pg_dump --no-acl --no-owner -h [host ip].compute-1.amazonaws.com -U [user name] -t [table name] --data-only [database name] > table.dump 
```

您可以通过以下方式获得所需的所有值：

```
$ heroku pg:credentials:url [DATABASE] -a [app_name]
Connection info string:
   "dbname=[database name] host=[host ip].compute-1.amazonaws.com port=5432 user=[user name] password=[password] sslmode=require"
Connection URL:
    postgres://[username]:[password]@[host ip].compute-1.amazonaws.com:5432/[database name] 
```

这将提示您输入密码。输入它，然后您应该继续`table.dump`在本地驱动器上获取文件。

您可能希望在暂存时截断表：

```
$ echo "truncate [table];" | heroku pg:psql [DATABASE] -a staging_app 
```

使用该文件，您可以使用**对登台应用程序****的新调用** `psql`的`Connection URL:`输出并仅恢复该表。**`pg:credentials`**

```
$ psql "[pasted postgres:// from pg:credentials:url of staging app]" < table.dump
SET
SET
...
...
...
...
$ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-17T20:49:12.510

@catsbys 回答

我还需要添加端口

pg_dump --no-acl --no-owner -h [host ip].compute-1.amazonaws.com -p [port] -U [user name] -t [table name] --data-only [database name ] > table.dump

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T05:47:58.817

看看 taps ( ) ，我相信[这个已回答的问题](https://stackoverflow.com/questions/12484581/heroku-dump-and-load-single-table-to-shared-postgres-database)`db:pull`涵盖了您的用例。

# clojure - 如何在 Clojure 中解析和使用表？

> ID：15778367
> 
> 赞同：2
> 
> 时间：2013-04-03T03:29:07.310
> 
> 标签：clojure

我已经开始了使用 clojure 的旅程，并被我为自己设置的第一个问题所困扰。我有一个文本文件，基本上是一个 nXm 行/列的表格。第一行是列名，第一列是行名。我希望能够使用 clojure 解析此表，​​然后查询 table[row][column] 并获取该值。

```
 a  b  c
1 7  8  9
2 s  q  r
3 2  7  1 
```

那么，我将如何在 clojure 中使用上表？我不确定从哪里开始。有人可以让我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T06:30:35.800

@Hendekagon 的回答是完成工作的好方法，但我们可以看看从头开始的实现。虽然可能不是最好的解决方案，但希望示例设计可以帮助您开始。

如果您想查询您的结构，在 Clojure 中，您将考虑映射。让我们把看起来像这样的东西作为我们的目标：

```
{"1" {"a" "7", "b" "8", "c" "9"},
 "2" {"a" "s", "b" "q", "c" "r"},
 "3" {"a" "2", "b" "7", "c" "1"}} 
```

在这里，行名是将列名映射到表元素的键。使用这种结构，我们可以轻松地使用`get-in`.

```
(get-in table ["2" "b"]) ; => "q" 
```

好的。我们该怎么做呢？

让我们假设我们已经在我们的文件中读取了一秒钟并将它作为一个字符串。然后，我们需要将其转换为我们的地图地图。我们的函数看起来像这样：

```
(defn parse-table
  [raw-table-data]
  ...) 
```

第一步是提取所有重要的数据位——行名、列名和表格元素。然而，在我们抓住它们之前，我们需要将`raw-table-data`字符串解析成一个更容易遍历的结构。我们将在换行符上拆分字符串，然后使用辅助函数在空白处标记行`tokens`。

```
(use '[clojure.string :only [split split-lines trim]])

(defn tokens
  [s]
  (-> s trim (split #"\s+")))

(defn parse-table
  [raw-table-data]
  (let [table-data (map tokens (split-lines raw-table-data))]
    ...
) 
```

`table-data`看起来像这样：

```
 [["a", "b", "c"],
  ["1", "7", "8", "9"],
  ["2", "s", "q", "r"],
  ["3", "2", "7", "1"]] 
```

这使得获得好东西变得容易：

```
(defn parse-table
  [raw-table-data]
  (let [table-data (map tokens (split-lines raw-table-data))
        column-names (first table-data)
        row-names (map first (next table-data))
        contents (map next (next table-data))]
    ...
) 
```

整理出数据后，我们只需要将它们拼接在一起。一个简单的方法是构建我们所有的行到列到元素的单独映射，然后将它们组合起来。我会提到这不是最有效的方法，但它很干净。

创建一个`pairs`简单地将两个集合的元素并排放置的辅助函数，我们可以使用推导式获得一系列映射`for`。

```
(defn pairs
  [coll1 coll2]
  (map vector coll1 coll2))

(for [[row-name row-contents] (pairs row-names contents)
      [column-name element] (pairs column-names row-contents)]
  {row-name {column-name element}}) 
```

这给出了一系列映射到映射。我们只需要把它合并成一张大图，功能就完成了。

```
(defn parse-table
  [raw-table-data]
  (let [table-data (map tokens (split-lines raw-table-data))
        column-names (first table-data)
        row-names (map first (next table-data))
        contents (map next (next table-data))]
    (apply merge-with merge
      (for [[row-name row-contents] (pairs row-names contents)
            [column-name element] (pairs column-names row-contents)]
        {row-name {column-name element}})))) 
```

现在，我们可以抓取一个表格文件并对其进行解析。

```
(def table
  (->
    "file"
    slurp
    parse-table)) 
```

这使我们达到了我们的目标。

```
(println (get-in table ["2" "b"])) ; => "q" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T03:48:58.223

使用[https://github.com/clojure/data.csv](https://github.com/clojure/data.csv)，您的文件将成为一系列向量，每个向量都是一行，然后您可以使用如下函数解析行：

```
(defn parse-row [[a b c]]
 [(Integer/parseInt a) (Double/parseDouble b) (str c)]) 
```

（注意参数列表中的解构，这样更容易阅读列名）

然后`(map parse-row rows)`获取解析表

但是，另一种方法是使用[Incanter](https://github.com/liebke/incanter/wiki/datasets)，它将您的 csv 文件转换为更易于查询的矩阵。

# python-2.7 - read_csv 使用 Python 中的 pandas 将 3 列中的日期转换为 1 列日期格式，如 YYYY-MM-DD

> ID：15778371
> 
> 赞同：2
> 
> 时间：2013-04-03T03:29:26.030
> 
> 标签：python-2.7, numpy, pandas

使用以下代码：

```
import pandas as pd

date_spec = {'transdate': [[0, 1, 2]]}
df2 = pd.read_csv('fruit.csv', header=None, parse_dates=date_spec)

print df2 
```

我正在尝试读取如下所示的 csv 文件：

```
2011,1,10,Apple,Red,1500,
2011,1,13,Apple,Green,1500,
2011,1,13,Orange,Red,4000,
2011,1,26,Banana,Red,1000,
2011,2,2,Pear,Green,4000,
2011,2,10,Pear,Red,4000,
2011,3,3,Banana,Green,1000,
2011,3,3,Orange,Green,2200,
2011,6,3,Orange,Green,3300, 
```

进入一个如下所示的 Numpy 数组：

```
2011-01-10,Apple,Red,1500
2011-01-13,Apple,Blue,1500
2011-01-13,Orange,Red,4000
2011-01-26,Banana,Red,1000
2011-02-02,Pear,Blue,4000
2011-02-10,Pear,Red,4000
2011-03-03,Banana,Blue,1000
2011-03-03,Orange,Blue,2200
2011-06-03,Orange,Blue,3300 
```

但我的打印输出如下所示：

```
 X.1  X.2  X.3   X.4   X.5   X.6  X.7
0   2011    1   10  Apple  Red  1500  NaN
1   2011    1   13  Apple  Blue 1500  NaN
2   2011    1   13  Orange Red  4000  NaN
3   2011    1   26  Banana Red  1000  NaN
4   2011    2    2  Pear   Blue 4000  NaN
5   2011    2   10  Pear   Red  4000  NaN
6   2011    3    3  Banana Blue 1000  NaN
7   2011    3    3  Orange Blue 2200  NaN
8   2011    6    3  Orange Blue 3300  NaN 
```

我尝试了几种变体，但无法将 3 列中的日期转换为 1 列日期，格式为“YYYY-MM-DD”。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:52:06.760

阅读 csv 后，建立自己的`date`专栏：

```
In [59]: df['date'] = df.apply(lambda x:datetime.date(x[0],x[1], x[2]), axis=1)

In [60]: df
Out[60]: 
      0  1   2       3      4     5   6        date
0  2011  1  10   Apple    Red  1500 NaN  2011-01-10
1  2011  1  13   Apple  Green  1500 NaN  2011-01-13
2  2011  1  13  Orange    Red  4000 NaN  2011-01-13
3  2011  1  26  Banana    Red  1000 NaN  2011-01-26
4  2011  2   2    Pear  Green  4000 NaN  2011-02-02
5  2011  2  10    Pear    Red  4000 NaN  2011-02-10
6  2011  3   3  Banana  Green  1000 NaN  2011-03-03
7  2011  3   3  Orange  Green  2200 NaN  2011-03-03
8  2011  6   3  Orange  Green  3300 NaN  2011-06-03 
```

然后删除无用的列：

```
In [61]: del df[0], df[1], df[2]

In [62]: df
Out[62]: 
        3      4     5   6        date
0   Apple    Red  1500 NaN  2011-01-10
1   Apple  Green  1500 NaN  2011-01-13
2  Orange    Red  4000 NaN  2011-01-13
3  Banana    Red  1000 NaN  2011-01-26
4    Pear  Green  4000 NaN  2011-02-02
5    Pear    Red  4000 NaN  2011-02-10
6  Banana  Green  1000 NaN  2011-03-03
7  Orange  Green  2200 NaN  2011-03-03
8  Orange  Green  3300 NaN  2011-06-03 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:44:50.387

[`read_csv`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.parsers.read_csv.html)的`parse_dates`参数应该是列表中包含值的字典*（*不是列表列表）：

```
date_spec = {'transdate': [0, 1, 2]}  # a list

df2 = pd.read_csv('fruit.csv', header=None, parse_dates=date_spec)

In [3]: del df2[6]  # Note in 0.11 this may not be needed

In [4]: df2
Out[4]: 
                  foo       3      4     5
0 2011-01-10 00:00:00   Apple    Red  1500
1 2011-01-13 00:00:00   Apple  Green  1500
2 2011-01-13 00:00:00  Orange    Red  4000
3 2011-01-26 00:00:00  Banana    Red  1000
4 2011-02-02 00:00:00    Pear  Green  4000
5 2011-02-10 00:00:00    Pear    Red  4000
6 2011-03-03 00:00:00  Banana  Green  1000
7 2011-03-03 00:00:00  Orange  Green  2200
8 2011-06-03 00:00:00  Orange  Green  3300 
```

# php - Tinymce 编辑器从数据库问题中检索数据 [条带化反斜杠]

> ID：15778372
> 
> 赞同：0
> 
> 时间：2013-04-03T03:29:34.803
> 
> 标签：php, javascript, jquery

保存到数据库是好的。

```
var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/; 
```

从数据库中检索会去掉我的反斜杠。

```
var emailReg = /^([w-.]+@([w-]+.)+[w-]{2,4})?$/; 
```

我正在开发一个使用**CodeIgniter**的项目。我有一个验证电子邮件地址的表单，如果可以，则保存到数据库。我正在使用**Tinymce** textarea 编辑器，我将数据保存到这个数据库，我的页面显示正常。问题是当我将数据返回到 textarea 时，由于缺少反斜杠，验证不起作用。

我不确定它是来自**CodeIgniter**还是**Tinymce**的问题。

```
<script type="text/javascript">
window.addEvent('domready', function(){
    var submit = $('submit');
    var cancel = $('cancel');

    if(submit)
    {
        submit.addEvent('click', function(){

            $('loading').set('html', '<img src="/v5d/system/application/views/images/loading-green.gif" alt="" /> &nbsp; Processing. Please wait...');
            $('loading').set('styles', {'display': 'block'});

            var purl = $('purl').get('value');
            var formid = $('formid').get('value');

            var elementProperty = new Array();
            var elcount = 0;
            var elname='', elvalue='';
            var eldetail;
            var elreq = '';
            var valerror = 0;
            var valerror1 = 0;

            var formelements = $('survey').getChildren('input');

                            // BACKSLASH ISSUE
                           var emailReg = /^([w-.]+@([w-]+.)+[w-]{2,4})?$/;

            formelements.each(function(item, index){
                eldetail = formelements[index];
                elname = eldetail.get('name');
                if(eldetail.get('type') == 'text')
                {
                    elvalue = eldetail.get('value');
                    elreq = eldetail.get('class');
                    if(elreq == 'required' && elvalue == '')
                    {
                        valerror++;
                    } 
                    else if(elreq == 'required' && !emailReg.test(elvalue))
                    {
                        valerror1++;
                    } 
                }
                else if(eldetail.get('type') == 'radio')
                {
                    var radioLength = eldetail.length;
                    if (radioLength == undefined) {
                        if (eldetail.checked) {
                            elvalue = eldetail.value;
                        }
                    }
                    for(var i = 0; i < radioLength; i++) {
                        if(eldetail[i].checked) {
                            elvalue = eldetail[i].value;
                        }
                    }
                }
                else if(eldetail.get('type') == 'checkbox')
                {
                    elvalue = '';
                    var radioLength = eldetail.length;
                    if (radioLength == undefined) {
                        if (eldetail.checked) {
                            elvalue = eldetail.value;
                        }
                    }
                    for(var i = 0; i < radioLength; i++) {
                        if(eldetail[i].checked) {
                            elvalue += ',' + eldetail[i].value;
                        }
                    }
                }
                elementProperty[elcount] = new itemstruct(elname, elvalue);
                elcount++;
            });

            formelements = $('survey').getChildren('textarea');
            formelements.each(function(item, index){
                eldetail = formelements[index];
                elname = eldetail.get('name');
                elvalue = eldetail.value;
                elreq = eldetail.get('class');
                if(elreq == 'required' && elvalue == '')
                {
                    valerror++;
                }
                elementProperty[elcount] = new itemstruct(elname, elvalue);
                elcount++;
            });

            formelements = $('survey').getChildren('select');
            formelements.each(function(item, index){
                eldetail = formelements[index];
                elname = eldetail.get('name');
                elvalue = eldetail.get('value');
                elementProperty[elcount] = new itemstruct(elname, elvalue);
                elcount++;
            });

            var surveysubmit = new Request({
                url: '/v5d/index.php/ajax/submitSurvey',
                method: 'post',
                data:{
                    'elementproperty': elementProperty,
                    'formid': formid,
                    'purl': purl,
                    'state': 'final'
                },

                onComplete: function(responseText){
                    if (!responseText || responseText == '' || responseText == false || responseText == 'FALSE') 
                    {
                        $('loading').set('html', 'Error occured');
                    }
                    else
                    {
                        $('loading').set('html', 'Form successfully submitted');
                        //window.location.reload();
                    }
                }
            });

            if (valerror == 0) 
            {
                 if (valerror1 != 0) 
                 {
                 $('loading').set('html', 'Please right email.');
                 }
                 else 
                 {
                 surveysubmit.send();
                 }
            }

            else
            {
                $('loading').set('html', 'Please fillup all required fields.');
            }
        });
    }

    if(cancel)
    {
        cancel.addEvent('click', function(){
            var choice = confirm('Sure want to leave the survey?');
            if(choice)
            {
                var purl = $('purl').get('value');
                var formid = $('formid').get('value');

                var elementProperty = new Array();
                var elcount = 0;
                var elname='', elvalue='';
                var eldetail;
                var elreq = '';
                var valerror = 0;

                var formelements = $('survey').getChildren('input');

                formelements.each(function(item, index){
                    eldetail = formelements[index];
                    elname = eldetail.get('name');
                    if(eldetail.get('type') == 'text')
                    {
                        elvalue = eldetail.get('value');
                        elreq = eldetail.get('class'); 
                    }
                    else if(eldetail.get('type') == 'radio')
                    {
                        var radioLength = eldetail.length;
                        if (radioLength == undefined) {
                            if (eldetail.checked) {
                                elvalue = eldetail.value;
                            }
                        }
                        for(var i = 0; i < radioLength; i++) {
                            if(eldetail[i].checked) {
                                elvalue = eldetail[i].value;
                            }
                        }
                    }
                    else if(eldetail.get('type') == 'checkbox')
                    {
                        elvalue = '';
                        var radioLength = eldetail.length;
                        if (radioLength == undefined) {
                            if (eldetail.checked) {
                                elvalue = eldetail.value;
                            }
                        }
                        for(var i = 0; i < radioLength; i++) {
                            if(eldetail[i].checked) {
                                elvalue += ',' + eldetail[i].value;
                            }
                        }
                    }
                    elementProperty[elcount] = new itemstruct(elname, elvalue);
                    elcount++;
                });

                formelements = $('survey').getChildren('textarea');
                formelements.each(function(item, index){
                    eldetail = formelements[index];
                    elname = eldetail.get('name');
                    elvalue = eldetail.value;
                    elreq = eldetail.get('class');
                    elementProperty[elcount] = new itemstruct(elname, elvalue);
                    elcount++;
                });

                formelements = $('survey').getChildren('select');
                formelements.each(function(item, index){
                    eldetail = formelements[index];
                    elname = eldetail.get('name');
                    elvalue = eldetail.get('value');
                    elementProperty[elcount] = new itemstruct(elname, elvalue);
                    elcount++;
                });

                var surveysubmit = new Request({
                    url: '/v5d/index.php/ajax/submitSurvey',
                    method: 'post',
                    data:{
                        'elementproperty': elementProperty,
                        'formid': formid,
                        'purl': purl,
                        'state': 'final'
                    },

                    onComplete: function(responseText){
                        if (!responseText || responseText == '' || responseText == false || responseText == 'FALSE') 
                        {
                            $('loading').set('html', 'Error occured');
                        }
                        else
                        {
                            $('loading').set('html', 'Form successfully submitted');
                            //window.location.reload();
                        }
                    }
                });
                surveysubmit.send();

                window.location.href='/v5d/'+purl;
            }
        });
    }
});

var itemstruct = function(elname, elvalue)
{
    this.elname = elname;
    this.elvalue = elvalue;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-23T10:52:53.620

使用此方法，您可以将数据从数据库中检索回 tinymce 编辑器。

```
tinyMCE.activeEditor.setContent(data); 
```

# c++ - “int”类型的参数与“char”类型的参数不兼容

> ID：15778373
> 
> 赞同：2
> 
> 时间：2013-04-03T03:29:37.563
> 
> 标签：c++

我正在尝试使用 c++ 创建一个简单的井字游戏作为一些家庭作业的一部分，但在绘制棋盘时遇到了困难。我正在尝试使用连字符（破折号）绘制一个基本的板，例如：

```
- - -
- - -
- - - 
```

但我收到错误“'int' 类型的参数与'char' 类型的参数不兼容”。有人可以帮我指出正确的方向吗？

我的代码如下：

```
char empty = '-';

int size = 9;
int width = 3;

void showBoard(char board[]);

void showBoard(char board[])
{
    for (int i = 0; i < size; i++)
    {
        for (int j = 0; j < width; j++)
        {
            board[i] = empty;

          cout << board << endl;
        }

        cout << endl;
    }
}

int main()
{
    showBoard(10);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:32:23.037

你的函数是期待`char[]`的，但你正在传递`int`。这些类型显然是不兼容的。

这应该是兼容的：

```
char board[] = "123456789";
showBoard(board); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T04:22:32.617

您应该考虑将 showBoard 函数拆分为 2 个例程：initializeBoard 和 showBoard。

您的 initializeBoard 例程应如下所示：

```
void initializeBoard(char board[])
{
    for (int i = 0; i < size; i++)
    {
         board[i] = empty;
    }
 } 
```

showBoard 例程是：

```
void showBoard(char board[])
{
    for (int i = 0; i < size/width; i++)
    {
        for (int j = 0; j < width; j++)
        {

         cout << board[i*width +j] << ' ';
        }

        cout << endl;
    }
} 
```

最后你像这样设置顶部：

```
char board[9];

initializeBoard(board);
showBoard(board); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T03:38:01.340

您可能想要`char tiles[] = "---------"; showBoard(tiles);`而不是`showBoard(10)`.

还，

```
board[i] = empty; 
```

错位为`showBoard()`。它应该在其他地方（例如创建另一个函数）。否则`showBoard()`就会让那些阅读代码的人感到负担过重和困惑。更好的是，考虑一个`Board`带有`show()`方法的类。

# wpf - WPF MVVM 将控件绑定到在视图模型中设置的变量

> ID：15778374
> 
> 赞同：1
> 
> 时间：2013-04-03T03:29:40.353
> 
> 标签：wpf, mvvm

我有一个控件，在我的例子中是一个 SciChart:SciChartSurface DataSet 绑定到 ChartData，它是我的 viewModel 中的一个对象。

在这个控件中，我需要将 AxisTitle 绑定到我的 viemodel 中的变量。如何访问变量？我试过 AxisTitle="{Binding CharName}" 或 ="{Binding Source={x:Static ViewModels:ViewModelKeys.ChartViewModel}, Path=ChartName}" 但它不起作用。

```
<UserControl x:Class="UI.WPF.Views.ChartView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:SciChart="http://schemas.abtsoftware.co.uk/scichart"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300"
         xmlns:ViewModels="clr-namespace:UI.ViewModels;assembly=UI.ViewModels"
         xmlns:meffed="http:\\www.codeplex.com\MEFedMVVM"
         meffed:ViewModelLocator.ViewModel="{x:Static ViewModels:ViewModelKeys.ChartViewModel}">
<Grid>
    <SciChart:SciChartSurface x:Name="sciChartSurface" DataSet="{Binding ChartData}">
        <SciChart:SciChartSurface.RenderableSeries>
            <SciChart:FastLineRenderableSeries SeriesColor="Red"/>
        </SciChart:SciChartSurface.RenderableSeries>

        <!--  Declare Axes  -->
        <SciChart:SciChartSurface.YAxis >
            <SciChart:NumericAxis AxisTitle="{Binding ???}" AxisAlignment="Left">
                <SciChart:NumericAxis.GrowBy>
                    <SciChart:DoubleRange Min="0.1" Max="0.1"/>
                </SciChart:NumericAxis.GrowBy>
            </SciChart:NumericAxis>
        </SciChart:SciChartSurface.YAxis>
        <SciChart:SciChartSurface.XAxis>
            <SciChart:DateTimeAxis AxisTitle="Time"
                                   DrawMajorGridLines="True"
                                   DrawMinorGridLines="True" 
                                   TextFormatting="HH:mm MMM dd">
                <SciChart:DateTimeAxis.GrowBy>
                    <SciChart:DoubleRange Min="0.1" Max="0.1"/>
                </SciChart:DateTimeAxis.GrowBy>
            </SciChart:DateTimeAxis>
        </SciChart:SciChartSurface.XAxis>

        <!--  Declare ChartModifiers  -->
        <SciChart:SciChartSurface.ChartModifier>
            <SciChart:ModifierGroup>
                <SciChart:RolloverModifier x:Name="rolloverModifier"
                                           DrawVerticalLine="True"
                                           SourceMode="AllSeries" />
                <SciChart:SeriesSelectionModifier />
                <SciChart:RubberBandXyZoomModifier IsXAxisOnly="True" IsEnabled="True"/>
                <SciChart:ZoomExtentsModifier ExecuteOn="MouseDoubleClick" />
                <SciChart:ZoomPanModifier x:Name="panModifier" IsEnabled="False"/>
                <SciChart:XAxisDragModifier/>
                <SciChart:YAxisDragModifier/>
            </SciChart:ModifierGroup>
        </SciChart:SciChartSurface.ChartModifier>
    </SciChart:SciChartSurface>
  </Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:34:39.080

您不能将**变量/字段**绑定到 View 。您只能绑定**属性**，因为绑定系统使用反射并且只查找属性而不是 DataContext 中的字段。为该变量创建属性并将该属性绑定到视图。我希望这会给你一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:53:59.020

首先，对`data binding`. 请看以下文章。

[数据绑定概述](http://msdn.microsoft.com/en-us/library/ms752347.aspx)

[WPF/MVVM 快速入门教程](http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial)

在这里，我将向您展示`example`如何使用数据绑定的简单方法。

假设我们有一个如下图所示的视图。

![在此处输入图像描述](https://i.stack.imgur.com/qf1pZ.png)

我将此视图的视图模型命名为`AddPersonViewModel`. 这个视图模型是由类继承的`ViewModelBase`（它对任何视图模型都有一个共同的属性和方法）并使用另一个名为的类`RelayCommand`

这是`ViewModelBase`课程

```
/// <summary>
/// Base for the View Models.
/// </summary>
public class ViewModelBase : INotifyPropertyChanged
{

    /// <summary>
    /// Occurs when a property value changes.
    /// </summary>
    public event PropertyChangedEventHandler PropertyChanged;

    /// <summary>
    /// Notifies the property changed.
    /// </summary>
    /// <param name="propertyName">Name of the property.</param>
    protected void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));  
        }
    }
} 
```

这就是`RelayCommand`课堂

```
/// <summary>
/// Relay Command
/// </summary>
public class RelayCommand : ICommand
{
    /// <summary>
    /// Initializes a new instance of the <see cref="RelayCommand"/> class.
    /// </summary>
    /// <param name="execute">The execute.</param>
    public RelayCommand(Action<object> execute)
        : this(execute, null)
    {
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="RelayCommand"/> class.
    /// </summary>
    /// <param name="execute">The execute.</param>
    /// <param name="canExecute">The can execute.</param>
    public RelayCommand(Action<object> execute, Predicate<object> canExecute)
    {
        if (execute == null)
            throw new ArgumentNullException("execute");
        _execute = execute;
        _canExecute = canExecute;
    }

    /// <summary>
    /// Defines the method that determines whether the command can execute in its current state.
    /// </summary>
    /// <param name="parameter">Data used by the command.  If the command does not require data to be passed, this object can be set to null.</param>
    /// <returns>
    /// true if this command can be executed; otherwise, false.
    /// </returns>
    public bool CanExecute(object parameter)
    {
        return _canExecute == null ? true : _canExecute(parameter);
    }

    /// <summary>
    /// Occurs when changes occur that affect whether or not the command should execute.
    /// </summary>
    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    /// <summary>
    /// Defines the method to be called when the command is invoked.
    /// </summary>
    /// <param name="parameter">Data used by the command.  If the command does not require data to be passed, this object can be set to null.</param>
    public void Execute(object parameter)
    {
        _execute(parameter);
    }

    /// <summary>
    /// Action
    /// </summary>
    private readonly Action<object> _execute;

    /// <summary>
    /// Predicate
    /// </summary>
    private readonly Predicate<object> _canExecute;
} 
```

好的。这是我的`view model`。

```
public class AddPersonViewModel : ViewModelBase
{
    #region Declarations

    private string name;
    private int age;

    private ICommand addPersonCommand;

    #endregion

    #region Properties

    /// <summary>
    /// Gets or sets the name.
    /// </summary>
    /// <value>The name.</value>
    public string Name
    {
        get
        {
            return name;
        }
        set
        {
            name = value;
            NotifyPropertyChanged("Name");
        }
    }

    /// <summary>
    /// Gets or sets the age.
    /// </summary>
    /// <value>The age.</value>
    public int Age
    {
        get
        {
            return age;
        }
        set
        {
            age = value;
            NotifyPropertyChanged("Age");
        }
    }

    #endregion

    #region Commands

    /// <summary>
    /// Gets the add person command.
    /// </summary>
    /// <value>The add person command.</value>
    public ICommand AddPersonCommand
    {
        get
        {
            if (addPersonCommand == null)
            {
                addPersonCommand = new RelayCommand(param => this.AddPerson(),
                    null);
            }
            return addPersonCommand;
        }
    }

    #endregion

    #region Private Methods

    private void AddPerson()
    {
        // TODO: the logic to add a person
    }

    #endregion
} 
```

最后这是我的`view`.

```
<Page x:Class="PivotTest.AddPerson"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:viewmodel="clr-namespace:PivotTest.ViewModels"
      mc:Ignorable="d" 
      d:DesignHeight="300" d:DesignWidth="300"
    Title="AddPerson">

    <Grid>

        <Grid.DataContext>
            <viewmodel:AddPersonViewModel />
        </Grid.DataContext>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="30" />
            <RowDefinition Height="30" />
            <RowDefinition Height="30" />
            <RowDefinition Height="30" />
        </Grid.RowDefinitions>

        <Label Grid.Column="0" Grid.Row="0" Content="Add Person" FontWeight="Bold" FontSize="16" /> 

        <Label Grid.Column="0" Grid.Row="1" Content="name" />
        <TextBox Grid.Column="1" Grid.Row="1"  Text="{Binding Name}" 
                 Margin="5,5,50,5"/>

        <Label Grid.Column="0" Grid.Row="2" Content="Age" />
        <TextBox Grid.Column="1" Grid.Row="2"  Text="{Binding Age}" 
                 Margin="5,5,50,5"/>

        <Button Grid.Column="1" Grid.Row="3" Content="Add" Command="{Binding AddPersonCommand}" 
                Margin="5, 5, 130, 5"/>
    </Grid>
</Page> 
```

我认为这个简单的示例可能会对您有所帮助。

# c# - 实体框架上的延迟加载与急切加载性能

> ID：15778375
> 
> 赞同：9
> 
> 时间：2013-04-03T03:29:47.147
> 
> 标签：c#, asp.net-mvc, entity-framework, code-first, azure-sql-database

所以我的 DbContext 上有以下模型类：

![贷款](https://i.imgur.com/zdFBUHt.png)

每次我呈现 LoanApplication 对象列表时，我都会执行以下操作：

```
var context = new MyContext();
var applications = context.LoanApplications.Where(d => d.PropertyThatIWantToFilter = localVariable); 
```

这将返回一个 IQueryable，然后我在控制器方法调用中将其转换为这样的 ViewModel：

```
var vm = applications.Select(d => new LoanApplicationViewModel(d)); 
```

在`LoanApplicationViewModel`构造函数内部，我接受实体对象并进行相应的映射。问题是，由于 Solicitors 集合是一个导航属性，每次实例化一个新的视图模型时都会调用数据库。每个应用程序的平均律师数是两个，这意味着如果我呈现一个列出最后 10 个应用程序的表，那么该应用程序大约需要 18-20 次访问数据库。

我认为必须有更好的方法来获取这个集合，所以我改变了我的原始查询以像这样急切地加载集合：

```
var applications = context.LoanApplications.Include("Solicitors").Where... 
```

尽管这将对数据库的调用次数减少到只有一次，**但查询速度要慢得多，大约慢了 50%。**

数据库托管在 SQL Azure 上，我们已经实现了瞬态故障处理，但我想减少对数据库的调用数量，而不会降低响应时间性能。

这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-11-11T00:22:19.283

“这里的最佳做法是什么？”

最佳做法是

1.  设置！应用范围！绩效目标
2.  轮廓、基准和定位瓶颈
3.  查看并微调瓶颈，让您以最少的工作获得最大的性能胜利。（根据我的经验，90% 的时间不是 tsql）

现在这似乎有点无关紧要，但从这个角度来看，您在应用程序域中描述为最佳的加载模式是正确的方法。

没有急切/懒惰的“最佳实践”。这就是为什么这两个选项都可用的原因。此外，如果 tsql 是您的瓶颈，并且在急切/懒惰之间切换仍然没有达到您的性能目标，您将需要使用大量其他工具，例如 SSMS 中的查询分析器和查询计划分析器。

* * *

对于一些背景：

我在谷歌上搜索“渴望加载缓慢”并来到这里。这是我的结果：

```
var foo = _context.Foos
    //.Include("Answers")
    //.Include("Attachments")
    .FirstOrDefault(q => q.Id == key); 
```

急切加载：106ms

延迟加载：11ms + 5ms + 5ms

延迟加载获胜，故事结束。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T18:59:27.557

除了在使用 Eager 和 Lazy 时提供大量结果或大量调用的 SQL 语句之外，通过从结果中放入 ObjectContext/DbContext 并将其映射到 ObjectContext/DbContext 中会发生大量工作。这会导致巨大的性能损失，在检索大量数据时，我真的不推荐任何这些。

最好的解决方案是指定一个显式的 Select 调用。但是，在不知道您的视图模型对象是如何构建的情况下，给您一个如何执行此操作的示例有点困难。所以，我在这里做的是给你一个使用匿名对象作为查询结果的例子。

此示例为您提供联系人及其所属客户的信息。

```
var contacts = context.Contacts.Where(row => row.CategoryId == 1)
                      .Select(row => new {
                                             ContactId = row.Id,
                                             Name = row.Name,
                                             CustomerName = row.Customer.Name
                                         }).ToList(); 
```

此查询将生成一个 SQL SELECT，它使用内部连接将联系人与客户连接起来，然后仅选择 Contact.Id、Contact.Name 和 Customer.Name 列。

如果您不打算使用数据并将更改保存回相同的上下文，则此解决方案是从服务器检索数据的最有效方法。它既不使用急切也不使用延迟加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T10:30:26.873

急切加载会获取冗余的主数据。这将占用大量内存，尽管上下文中的对象图每个实体仅存储单个主数据，但 SQL 会在其盘中转储大量数据。我从[这里拍摄了以下图片](http://www.c-sharpcorner.com/UploadFile/b1df45/lazy-loading-vs-eager-loading/)

![在此处输入图像描述](https://i.stack.imgur.com/OvYuo.jpg)

如您所见，在 SQL 查询的结果集中，User 表的 Data 也与 UserDetails 表重复了一样多。这似乎是性能的差异化因素（在您的情况下，主列比详细表有更多的记录）。

如果性能是您主要关心的问题，我建议您在**分别**获取详细表的数据时使用具有相同 where 子句的**LINQ 连接** 所以在您的情况下：-

 ****步骤1**

```
 var context = new MyContext();
    var applications = context.LoanApplications.Where(d => d.PropertyThatIWantToFilter = localVariable); 
```

然后 **第2步**

```
var solicitors = from s in context.Solicitors
join loanApp in context.LoanApplications
select s.columns
where loanApp. <<Same condition as in step 1 where clause>> 
```

谢谢，你的问题让我回顾了我自己的代码:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T04:39:32.917

您是否考虑过使用 sql 视图？

我不太确定 Sql Azure。但是在 sql server 中，在没有正确索引的情况下连接 2 个表时可能会降低性能。也许这发生在您的查询中。

需要注意的是，您的之前查询正在使用 where 子句访问 1 个表，2 个调用。在后面的查询中，它使用 where 子句访问 2 个表，1 个调用。您的后查询中有连接，可能需要不同的索引。

您可以创建一个 sql 视图以确保使用正确的索引。然后让您的应用程序调用视图。存储过程也可以用于此目的，但不太适合此目的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T03:44:02.957

如果您可以以某种方式查询您的律师表并使用您已经获取的应用程序列表过滤查询，那么获取的实体将被缓存在您的上下文中，我相信它将用于导航属性而不是访问数据库。

我不确定如何编写获取查询的律师，但我在想这样的事情

```
int[] applicationIDs = applications.Select(x => x.ID).ToArray();
var solicitors = context.Solicitors.Where(x => x.Applications.Any(y => applicationIDs.Contains(y.ID))).ToArray(); // added toarray to cause execution cause im never sure when the LINQ actually runs 
```**

# view - Pouchdb 如何使用键来细化查询？

> ID：15778376
> 
> 赞同：3
> 
> 时间：2013-04-03T03:29:51.950
> 
> 标签：view, map, key, pouchdb

在 couchdb 中，我有一个非常简单的 map 函数，这样我就可以通过 triid 有效地查找列表：

```
// by_tripid.js
function (doc) {

    if (doc.type == "list") {

        for (var tripid in doc.tripids) {
            emit(doc.tripids[tripid], null)
        } 
    }
} 
```

目的是按 triid 索引列表。并且能够通过指定一个键（tripid）来通过tripid检索列表。

在 Pouchdb 中，我可以在 db.query 调用中使用大致相同的 map 函数。

但是，我不希望最终返回所有列表，然后通过 triid 过滤它们。这似乎效率很低。我不确定 Pouchdb 的视图技术。该视图是在查询时创建和使用的，所以我猜 Pouchdb 并没有真正应用地图来创建索引。我想这就像 Couchdb 中的临时视图，所以效率可能不存在。

一些专家意见将不胜感激。

谢谢，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:52:25.723

[github上](https://github.com/daleharvey/pouchdb/issues/99)有一个open issue来实现增量视图。

你是对的——现在 PouchDB 每次调用时都会在数据库中的每个文档上运行 map-reduce `query`，所以性能不是很好。对于小型数据库，这很好，但显然对于较大的数据库来说这是一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-31T22:10:00.507

PouchDB 的`query`接口[支持](https://github.com/daleharvey/pouchdb/blob/master/tests/test.views.js#L95)传递`options.key`. 下个版本的 API 文档中会[提到。](https://github.com/daleharvey/pouchdb/pull/1197)

*   如果您要连接到远程沙发，它会将参数传递给远程视图，从而由沙发本身进行优化。
*   对于本地数据库，[优化正在进行](https://github.com/daleharvey/pouchdb/issues/99)中，但在着陆时不会更改界面。道德：只要使用界面就不用担心它，除非你碰到性能墙。

量化“多大是太大”问题的另一个有趣之处是[性能套件问题](https://github.com/daleharvey/pouchdb/issues/113)。

# c++ - 获取由向量向量表示的矩阵的第一列

> ID：15778377
> 
> 赞同：11
> 
> 时间：2013-04-03T03:30:28.473
> 
> 标签：c++, vector, matrix, transpose, indices

假设我`foo`使用 表示值矩阵`std::vector`：

```
int rows = 5;
int cols = 10;    
auto foo = vector<vector<double>>(rows, vector<double>(cols)); 
```

是否有一种巧妙简单的方法让我获得包含 foo 的第一个“列”的`vector<int>`大小：`rows`

```
{foo[0][0], foo[0][1], foo[0][2], foo[0][3], foo[0][4] } 
```

换句话说，我可以“转置” foo 以使以下三件事为真：

```
foo_transpose.size() == cols
foo_transpose[0].size() == rows
foo_transpose[0] == {foo[0][0], foo[0][1], foo[0][2], foo[0][3], foo[0][4] } 
```

## 澄清说明

对于表示“矩阵”的替代方法，有一些很好的建议。当我使用术语“矩阵”时，我只是表示每个第二级`vector`的大小都相同。我并不是要建议我将这个数据结构用于线性代数类型的运算。实际上，我确实需要一个向量向量，或者一个可以从中“拉出”一维向量的数据结构，因为我有对向量进行操作的函数，例如：

```
double sum(vector<double> const & v); 
```

我打电话给：

```
sum(foo[0]); 
```

只是在一种特殊情况下，我遇到了需要做的情况：

```
sum({foo[0][0], foo[0][1], foo[0][2], foo[0][3], foo[0][4] }; 
```

## For循环解决方案

有一个明显的 for 循环解决方案，但我一直在寻找更强大和更高效的东西。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-03T22:44:40.967

正如我在评论中提到的，使用向量的向量表示矩阵是不切实际的，原因如下：

1.  设置很繁琐；
2.  很难改变；
3.  缓存位置不好。

这是我创建的一个非常简单的类，它将在单个向量中保存一个 2D 矩阵。这几乎就是 MATLAB 之类的软件的工作方式......尽管是一个巨大的简化。

```
template <class T>
class SimpleMatrix
{
public:
    SimpleMatrix( int rows, int cols, const T& initVal = T() );

    // Size and structure
    int NumRows() const                       { return m_rows; }
    int NumColumns() const                    { return m_cols; }
    int NumElements() const                   { return m_data.size(); }

    // Direct vector access and indexing
    operator const vector<T>& () const        { return m_data; }
    int Index( int row, int col ) const       { return row * m_cols + col; }

    // Get a single value
          T & Value( int row, int col )       { return m_data[Index(row,col)]; }
    const T & Value( int row, int col ) const { return m_data[Index(row,col)]; }
          T & operator[]( size_t idx )        { return m_data[idx]; }
    const T & operator[]( size_t idx ) const  { return m_data[idx]; }

    // Simple row or column slices
    vector<T> Row( int row, int colBegin = 0, int colEnd = -1 ) const;
    vector<T> Column( int row, int colBegin = 0, int colEnd = -1 ) const;

private:
    vector<T> StridedSlice( int start, int length, int stride ) const;

    int m_rows;
    int m_cols;

    vector<T> m_data;
}; 
```

这个类基本上是围绕一个单一功能的糖衣—— `StridedSlice`. 它的实现是：

```
template <class T>
vector<T> SimpleMatrix<T>::StridedSlice( int start, int length, int stride ) const
{
    vector<T> result;
    result.reserve( length );
    const T *pos = &m_data[start];
    for( int i = 0; i < length; i++ ) {
        result.push_back(*pos);
        pos += stride;
    }
    return result;
} 
```

其余的非常简单：

```
template <class T>
SimpleMatrix<T>::SimpleMatrix( int rows, int cols, const T& initVal )
    : m_data( rows * cols, initVal )
    , m_rows( rows )
    , m_cols( cols )
{    
}

template <class T>
vector<T> SimpleMatrix<T>::Row( int row, int colBegin, int colEnd ) const
{
    if( colEnd < 0 ) colEnd = m_cols-1;
    if( colBegin <= colEnd )
        return StridedSlice( Index(row,colBegin), colEnd-colBegin+1, 1 );
    else
        return StridedSlice( Index(row,colBegin), colBegin-colEnd+1, -1 );
}

template <class T>
vector<T> SimpleMatrix<T>::Column( int col, int rowBegin, int rowEnd ) const
{
    if( rowEnd < 0 ) rowEnd = m_rows-1;
    if( rowBegin <= rowEnd )
        return StridedSlice( Index(rowBegin,col), rowEnd-rowBegin+1, m_cols );
    else
        return StridedSlice( Index(rowBegin,col), rowBegin-rowEnd+1, -m_cols );
} 
```

请注意，`Row`and`Column`函数的设置方式使您可以轻松地请求整行或整列，但功能更强大一些，因为您可以通过传递一个或两个更多参数来分割范围。是的，您可以通过使起始值大于结束值来反向返回行/列。

这些函数中没有内置边界检查，但您可以轻松添加它。

您还可以添加一些东西以将区域切片作为另一个返回`SimpleMatrix<T>`。

玩得开心。

# magento - Magento 在下订单后访问发票属性

> ID：15778382
> 
> 赞同：0
> 
> 时间：2013-04-03T03:30:40.800
> 
> 标签：magento

我正在使用该事件`sales_order_save_after`来尝试访问发票小计并对其进行处理。

在我的observer.php中，我有：

```
public function peterParker($observer)
    {
    $order = $observer->getEvent()->getOrder();

    $orders = Mage::getModel('sales/order_invoice')->getCollection()
                    ->addAttributeToFilter('order_id', array('eq'=>$order->getId()));
    $orders->getSelect()->limit(1);

    $subTotal = $orders->getSubotal();

    Mage::log($subTotal);

} 
```

但是当我下订单时，我的 php 日志中出现了这个错误：

调用未定义的方法 Mage_Sales_Model_Resource_Order_Invoice_Collection::getSubotal()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:40:18.267

那里非常直接的错误消息

> 调用未定义的方法 Mage_Sales_Model_Resource_Order_Invoice_Collection::getSubotal()

您正在调用`getSubotal`集合对象。集合对象没有太多方法，集合也没有神奇的 getter 或 setter。

您需要从该集合中弹出第一个项目

```
$order = $orders->getFirstItem(); 
```

然后从第一个项目中获取数据

```
Mage::Log($order->getData());
Mage::Log($order->getSubTotal()); 
```

# visual-c++ - 如何在 64 位 Windows 7 上注册 64 位 COM dll？

> ID：15778383
> 
> 赞同：3
> 
> 时间：2013-04-03T03:30:40.713
> 
> 标签：visual-c++, com, atl, windows-7-x64, regsvr32

我正在尝试注册一个 x64 COM 服务器 dll，以便在 x64 windows 7 上的 x64 office 中使用。我已按照[此处](https://stackoverflow.com/questions/4897685/how-do-i-register-a-dll-on-windows-7-64-bit)的说明进行操作，但无法注册该 dll。当我尝试时，我收到以下错误：

![regsvr 错误信息](https://i.stack.imgur.com/SeMWI.png)

我使用的命令是`regsvr32 my_x64_com_server.dll`

为什么会发生这种情况，是否有解决方法？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T06:26:33.710

命令是如何运行的？从进程还是从命令行？

确保从 64 位进程（或 64 位 cmd.exe 控制台窗口）运行命令。否则，该`%windir%\System32\regsvr32.exe`命令将被重定向到`%windir%\SysWoW64\regsvr32.exe`并运行 32 位 regsrv32（无法注册 64 位 DLL）。

您也可以尝试使用`%windir%\sysnative\regsvr32.exe`which 将重定向到真实`%windir%\System32\`目录（但仅来自 32 位进程，因此如果您使用它，请注意确保没有人尝试从 64 位进程运行命令）。

有关详细信息，请参阅[MSDN 上的文件系统重定向器](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384187.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-05T16:16:21.137

当我将 windows 2003 升级到 windows 2012 服务器时，我遇到了类似的问题。以下解决方案帮助我解决了它。我必须将 dll 注册为 32 位。

**

**- 解决方案：**

**以管理员身份打开命令提示符

**键入要执行dll的目录执行regsvr32

# c++ - C++ 编译器错误“没有匹配的函数”

> ID：15778384
> 
> 赞同：1
> 
> 时间：2013-04-03T03:30:41.687
> 
> 标签：c++, compiler-errors

这是涉及的两个功能：

```
int FixedLengthRecordFile :: write (const int numRec, const FixedLengthFieldsRecord & rec)
{
    /*** some code ***/

    return rec.write(file); // FILE* file is an attribute of FixedLengthRecordFile
}

int FixedLengthFieldsRecord :: write (FILE* file) { /* ... code ... */ } 
```

我得到这个错误：

```
FixedLengthRecordFile.cpp: In member function ‘int FixedLengthRecordFile::write(int, const FixedLengthFieldsRecord&)’:
FixedLengthRecordFile.cpp:211:23: error: no matching function for call to ‘FixedLengthFieldsRecord::write(FILE*&) const’
FixedLengthRecordFile.cpp:211:23: note: candidate is:
FixedLengthFieldsRecord.h:35:7: note: int FixedLengthFieldsRecord::write(FILE*) <near match>
FixedLengthFieldsRecord.h:35:7: note:   no known conversion for implicit ‘this’ parameter from ‘const FixedLengthFieldsRecord*’ to ‘FixedLengthFieldsRecord*’
FixedLengthRecordFile.cpp:213:1: warning: control reaches end of non-void function [-Wreturn-type] 
```

错误的原因是什么？我在代码中没有看到任何错误。此外，我还有另外两个类似的功能（写），它工作得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T03:34:38.360

```
int FixedLengthRecordFile::write( const int numRec, 
                                  const FixedLengthFieldsRecord& rec)
{
   /*** some code ***/

    return rec.write(file); // FILE* file is an attribute of FixedLengthRecordFile
}

int FixedLengthFieldsRecord::write(FILE* file) 
```

您通过`const`和`const`引用传递参数，但是，`rec.write(file)`您调用的函数不是`const`函数，它可能会修改那些传入的对象，因此编译器会抱怨。

您应该执行以下操作：

```
 int FixedLengthFieldsRecord::write(FILE* file)  const  
       // add const both declaration and definition ^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:41:42.307

让我们看看错误信息：

```
FixedLengthFieldsRecord.h:35:7:note: int FixedLengthFieldsRecord::write(FILE*)<near match>
FixedLengthFieldsRecord.h:35:7:note:   no known conversion for implicit ‘this’ parameter
    from ‘const FixedLengthFieldsRecord*’ to ‘FixedLengthFieldsRecord*’ 
```

它说它不能进行从`const FixedLengthFieldsRecord*`到的转换`FixedLengthFieldsRecord*`

这是一个很好的提示。

在下面的行中，`rec`是 const 引用，

```
return rec.write(file); // FILE* file is an attribute of FixedLengthRecordFile 
```

但以下功能*不合格* `const`

```
int FixedLengthFieldsRecord :: write (FILE* file) { /* ... code ... */ } 
```

因此问题！

有（至少）两种解决方案：

1) 更改`rec`为非`const`参考

`write()`2) 更改要`const`限定的方法的签名

选项#2 是首选方法。

# php - PHP获取绝对路径而不遵循符号链接

> ID：15778391
> 
> 赞同：2
> 
> 时间：2013-04-03T03:32:03.920
> 
> 标签：php, filesystems, realpath

如何在不遵循符号链接的情况下获取文件的绝对路径。

例如

```
/path/to/some/file
/path/to/some/link -> /path/to/some/file
/path/to/some/directory/ 
```

我当前的工作目录是`/path/to/some/directory/`，我去`realpath('../link)`它返回`/path/to/some/file`。

*（我知道`realpath`应该这样工作）*

是否有一个函数而不是`realpath`那个会返回`/path/to/some/link`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T04:42:13.207

[David Beck](http://www.php.net/manual/en/function.realpath.php#71334)在 PHP 手册的注释部分中编写了一个解决方案，可以在不访问实际文件系统的情况下清理相对路径组件。唉，他忘记`return`在函数中添加一条语句，但如果这是你需要的，它似乎工作得很好。也适用于 URL。

```
function canonicalize($address)
{
    $address = explode('/', $address);
    $keys = array_keys($address, '..');

    foreach($keys AS $keypos => $key)
    {
        array_splice($address, $key - ($keypos * 2 + 1), 2);
    }

    $address = implode('/', $address);
    $address = str_replace('./', '', $address);

    return $address;
}

$url = '/path/to/some/weird/directory/../.././link';
echo canonicalize($url); // /path/to/some/link 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T04:26:28.577

还有`getcwd();`我经常使用的。语法上更简单。

# ruby-on-rails - 模型名称与控制器不同的 Form_for

> ID：15778395
> 
> 赞同：4
> 
> 时间：2013-04-03T03:32:47.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个名为 的模型`Person`，我想要一个名为 的资源`Employee`。我发现这会停止`form_for`魔法。

我需要传入`@person`对象本身，以便 form_for 可以选择正确的操作路径（创建或更新）。

但是，这意味着 form_for 在输出中使用`POST people_path`and`PUT person_path`而不是`employee_path`s。

当我的模型和控制器有不同的名称时，是否有可能拥有所有 Rails 约定的好东西？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T10:44:57.200

如果您想在路由/url 中使用“员工”，您可以在路由中使用“路径”，例如。将控制器创建为 people_controller 但在路由中

```
resources :people, path: "employees" 
```

所以路线会像

```
new_person GET    /employees/new
people GET    /employees 
```

ETC

所以以下将起作用

```
<%= form_for @people do |f| %>
  ...
<% end %> 
```

注意：为此，您必须使用 Person 模型

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T03:53:37.517

您可以添加一个选项： url: employee_path

例如

```
<%= form_for @people, :as => :post, :url => employee_path(@people) do |f| %>
  ...
<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-07T07:07:37.900

所以我有一个我已经构建的自定义 CRM，它使用 employees_controller 从 Devise 的用户模型中传递和检索值。我不希望 Devise 视图可以访问，但我想使用 Devise 进行用户身份验证，因为......让我们面对现实吧，他们已经很好地解决了这个问题。

好吧，事实证明，我在同样的问题上遇到了一些麻烦，我为表单嵌入了一个 Ruby 标签：

```
<%= form_for @employee, as: :user, url: employees_path do |f| %> 
```

这里的问题应该很明显（尽管我花了一个小时才找到）——如果我正在进行“新”操作，它会很好用。它将获取表单数据，将其传递给新的 User.new 对象，然后为我创建一个新用户。但是，如果我试图*编辑*我的员工的信息，比如通过更新他们的密码或在他们的描述中添加更多信息，它将失败 - 说没有“路径 /employees 的 [PATCH] 方法”，这是真的.

我想有点 hacky，但我的解决方案只是将 @path 实例变量放在“新建”和“编辑”操作中：

```
def new
  @path = employees_path
end

def edit
  @path = employee_path
end 
```

我测试了它，效果很好。如果有人对这种方法有任何批评，无论如何-我很想听听。

我的环境：

*   导轨 5.2.0
*   设计 4.4.3

# linux - 如何使用 ssh 和 bash 脚本将本地变量传递给远程？

> ID：15778403
> 
> 赞同：5
> 
> 时间：2013-04-03T03:34:18.577
> 
> 标签：linux, bash, unix, ssh, cluster-computing

```
ssh remotecluster 'bash -s' << EOF
> export TEST="sdfsd"
> echo $TEST
> EOF 
```

这不打印任何内容。

即使我将变量存储到文件中并将其复制到远程，它仍然不起作用。

```
TEST="sdfsdf"
echo $TEST > temp.par
scp temp.par remotecluster
ssh remotecluster 'bash -s' << EOF
> export test2=`cat temp.par`
> echo $test2
> EOF 
```

仍然没有打印任何内容。

所以我的问题是如何将局部变量作为变量传递给远程机器？

答案已在[此给出](https://stackoverflow.com/questions/15775911/how-to-properly-escaping-qsub-command-with-long-input-args-within-ssh-command#15776073)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-16T16:55:08.573

here文档中给出的变量赋值`TEST="sdfsd"`不是真正的变量赋值，即变量赋值实际上不会直接在here文档的声明/定义中执行（但稍后当here文档被shell评估时）。

此外，`$TEST`未转义或未引用的 here 文档中包含的变量将在本地 shell 执行命令之前由**本地 shell扩展。**`ssh`结果是，如果在命令或此处文档**之前**的`$TEST`本地 shell 中未分别定义它，它将被解析为空字符串。**`ssh`**

 **因此，`export TEST="sdfsd"`here文档中的变量赋值在本地shell中不会生效，而是先发送到远程主机的shell，然后才被扩展，因此你的*打印没有任何*经验。

解决方案是使用转义或单引号的此处文档，`<<\EOF`或`<<'EOF'`; 或仅转义`\$TEST`此处文档中的变量；或者只是`$TEST`在命令之前定义变量`ssh`（以及此处的文档）。

```
# prints sdfsd
export TEST="sdfsd"
ssh localhost 'bash -s' << EOF
echo $TEST
EOF

# prints sdfsd
ssh localhost 'bash -s' << EOF
export TEST="sdfsd"
echo \$TEST
EOF

# prints sdfsd
ssh localhost 'bash -s' <<'EOF'
export TEST="sdfsd"
echo $TEST
EOF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:04:51.610

导出变量，ssh 将导出的（环境）变量发送到服务器 export VAR=test ssh -v 127.0.0.1 echo $VAR test 以上命令并查看结果**

# c++ - 以编程方式检查我的机器是否可以访问互联网

> ID：15778404
> 
> 赞同：13
> 
> 时间：2013-04-03T03:34:22.373
> 
> 标签：c++, c, connectivity, nic

如何以编程方式检查我的机器是否可以使用 C/C++ 访问 Internet，这只是 ping IP 的问题吗？网卡是如何做到的？我的意思是：

![在此处输入图像描述](https://i.stack.imgur.com/zeVb1.png)

我正在使用 Windows 7。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T04:46:51.643

如果你在 Windows 上工作，试试这个

```
#include <iostream>
#include <windows.h> 
#include <wininet.h>
using namespace std;

int main(){

if(InternetCheckConnection(L"http://www.google.com",FLAG_ICC_FORCE_CONNECTION,0))
{
        cout << "connected to internet";
}

return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T03:40:26.267

我认为没有那种东西，但你可以试试这个：

最简单的方法是尝试连接到已知的外部 IP 地址。

如果在 Windows 中失败，connect 函数会返回`SOCKET_ERROR`，并且`WSAGetLastError`通常会返回`WSAEHOSTUNREACH`（意味着无法将数据包发送到主机）。

在 Linux 中，您将返回 a `-1`，而 errno 将是`ENETUNREACH`. 一些有用的链接：

[1\. Windows 套接字的链接](http://msdn.microsoft.com/en-us/library/ms740673(VS.85).aspx)

[2\. Linux/Unix 套接字的链接](http://www.tenouk.com/cnlinuxsockettutorials.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-02-07T02:37:52.823

除了 InternetCheckConnection() 函数之外，Win32 API 还具有一个函数 ( **InternetGetConnectedState()** )，它为某种形式的 Internet 连接（可用性）返回真/假：

[https://msdn.microsoft.com/en-us/library/windows/desktop/aa384702(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/aa384702(v=vs.85).aspx)

它还告诉您您拥有的互联网连接类型（LAN、调制解调器、代理等）——这通常很容易知道。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-23T12:25:52.843

实际上有一个非常聪明的方法，包括[这里](http://www.codeproject.com/Tips/67577/Check-for-an-active-Internet-connection)的代码片段。

它基本上使用**cmd**选项： While in CMD hit: `route print`.

这将使用数组映射路由表，并将查找 0.0.0.0 作为可用的 Internet 连接。

我用它和一个`while(true){//the code in here } //check for inet connection , else will sleep for 10 mins and check again`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-27T23:08:59.040

根据 Microsoft API 文档，不推荐使用**[InternetCheckConnection](https://docs.microsoft.com/en-us/windows/win32/api/wininet/nf-wininet-internetcheckconnectiona)**。

> [InternetCheckConnection 可用于“要求”部分中指定的操作系统。在后续版本中可能会更改或不可用。相反，请使用 NetworkInformation.GetInternetConnectionProfile 或 NLM 接口。]

除了这个 API，我们可以使用**[INetworkListManager](https://docs.microsoft.com/en-us/windows/win32/api/netlistmgr/nn-netlistmgr-inetworklistmanager)**接口来检查 Windows 平台是否连接了 Internet。

下面是win32代码库：

```
#include <iostream>
#include <ObjBase.h>      // include the base COM header
#include <Netlistmgr.h>

// Instruct linker to link to the required COM libraries
#pragma comment(lib, "ole32.lib")

using namespace std;

enum class INTERNET_STATUS
{
    CONNECTED,
    DISCONNECTED,
    CONNECTED_TO_LOCAL,
    CONNECTION_ERROR
};

INTERNET_STATUS IsConnectedToInternet();

int main()
{
    INTERNET_STATUS connectedStatus = INTERNET_STATUS::CONNECTION_ERROR;
    connectedStatus = IsConnectedToInternet();
    switch (connectedStatus)
    {
    case INTERNET_STATUS::CONNECTED:
        cout << "Connected to the internet" << endl;
        break;
    case INTERNET_STATUS::DISCONNECTED:
        cout << "Internet is not available" << endl;
        break;
    case INTERNET_STATUS::CONNECTED_TO_LOCAL:
        cout << "Connected to the local network." << endl;
        break;
    case INTERNET_STATUS::CONNECTION_ERROR:
    default:
        cout << "Unknown error has been occurred." << endl;
        break;
    }
}

INTERNET_STATUS IsConnectedToInternet()
{
    INTERNET_STATUS connectedStatus = INTERNET_STATUS::CONNECTION_ERROR;
    HRESULT hr = S_FALSE;

    try
    {
        hr = CoInitialize(NULL);
        if (SUCCEEDED(hr))
        {
            INetworkListManager* pNetworkListManager;
            hr = CoCreateInstance(CLSID_NetworkListManager, NULL, CLSCTX_ALL, __uuidof(INetworkListManager), (LPVOID*)&pNetworkListManager);
            if (SUCCEEDED(hr))
            {
                NLM_CONNECTIVITY nlmConnectivity = NLM_CONNECTIVITY::NLM_CONNECTIVITY_DISCONNECTED;
                VARIANT_BOOL isConnected = VARIANT_FALSE;
                hr = pNetworkListManager->get_IsConnectedToInternet(&isConnected);
                if (SUCCEEDED(hr))
                {
                    if (isConnected == VARIANT_TRUE)
                        connectedStatus = INTERNET_STATUS::CONNECTED;
                    else
                        connectedStatus = INTERNET_STATUS::DISCONNECTED;
                }

                if (isConnected == VARIANT_FALSE && SUCCEEDED(pNetworkListManager->GetConnectivity(&nlmConnectivity)))
                {
                    if (nlmConnectivity & (NLM_CONNECTIVITY_IPV4_LOCALNETWORK | NLM_CONNECTIVITY_IPV4_SUBNET | NLM_CONNECTIVITY_IPV6_LOCALNETWORK | NLM_CONNECTIVITY_IPV6_SUBNET))
                    {
                        connectedStatus = INTERNET_STATUS::CONNECTED_TO_LOCAL;
                    }
                }

                pNetworkListManager->Release();
            }
        }

        CoUninitialize();
    }
    catch (...)
    {
        connectedStatus = INTERNET_STATUS::CONNECTION_ERROR;
    }

    return connectedStatus;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-03-20T05:32:18.370

如果您在 Windows 上，以下代码将起作用：

```
#include <iostream>
#include <windows.h>

int main(){

  if (system("ping www.google.com")){
          std::cout<<"\nNot connnected to the internet\n\n";
  }
  else{
          std::cout<<"\nConnected to the internet\n\n";

  }
  system("pause");
  return 0;
} 
```

# xml - 获取完整的订单信息 - Wazala API

> ID：15778409
> 
> 赞同：0
> 
> 时间：2013-04-03T03:34:59.853
> 
> 标签：xml, api, e-commerce

我正在尝试使用 Wazala API 来获取商店所有订单（甚至一个）的完整订单信息。这是我需要[的格式。](http://www.wazala.com/api/docs/order-forward/)该页面提到使用该方法`OrderVerify('OrderID')`，但没有说明该方法如何与 API 一起使用。

[此页面](http://www.wazala.com/api/docs/admin/)上的“get_orders”方法效果很好，但它是一个非常简单的订单摘要列表，并且没有处理订单所需的所有信息（即帐单/送货地址、行项目等）。

是否有用于 Wazala 的 API 调用以此处[显示](http://www.wazala.com/api/docs/order-forward/)的 XML 格式检索完整的订单信息，如果有，它是如何调用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:17:57.363

今天收到了来自 Wazala 支持的回复：

> 返回商店订单列表的唯一 REST 请求是 get_orders 调用。

所以目前我的问题的答案是：不。

我仍然不确定 OrderVerify 方法可以用于什么，但显然它不能与 API 一起使用。作为旁注，我从他们那里收到了有关 API 的任何“更新”功能的信息：

> 虽然您可以使用我们的出站 API 从 Wazala 提取数据，但目前没有入站 API。

# sql - SQL 输入参数值

> ID：15778411
> 
> 赞同：2
> 
> 时间：2013-04-03T03:35:32.207
> 
> 标签：sql, ms-access

我是 sql 新手，我正在编写一个查询来显示分配给他们的员工的项目编号。

```
SELECT PROJ_NUM
FROM project
WHERE EMP_NUM IS NOT null; 
```

当我运行查询时，我被要求输入 EMP_NUM 的参数值。为什么我会被问到这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T03:46:42.107

通常这会提示拼写错误，并且您的`project`表不包含名为`EMP_NUM`. 但是，如果您已经确认该字段确实存在，则问题可能是由于表名`project`，它是[保留字](http://allenbrowne.com/AppIssueBadWord.html#P)。

在这种情况下，请尝试这样的查询...

```
SELECT p.PROJ_NUM
FROM [project] AS p
WHERE p.EMP_NUM IS NOT null; 
```

**事后**`EMP_NUM`分析：表中不存在已确认的 OP `project`。这就是数据库引擎将其解释为参数的原因。这种情况令人困惑，因为`project`在数据表视图中打开时，`EMP_NUM`会显示在相关表的子数据表中。通过检查他的数据库关系，OP 能够确定在他的查询 中包含哪个表`EMP_NUM`，然后确定该`INNER JOIN`表。`project`

# java - GUI 未正确更新

> ID：15778412
> 
> 赞同：1
> 
> 时间：2013-04-03T03:35:43.857
> 
> 标签：java, swing

我刚刚完成了一个项目，该项目涉及创建一个迷宫并为三个“机器人”编程以使用不同的策略通过它。我的实现中涉及的类是：

*   具有三个子类的抽象类 Robot
*   处理迷宫逻辑操作的 Maze 类
*   一个 JFrame 类，以图形方式显示迷宫并显示机器人在其中移动

最后，我有一个带有 main 方法的入口点，它只包含以下内容：

```
 Maze m = new Maze();
    MazeFrame mf = new MazeFrame(m);
    RightHandRobot mr = new RightHandRobot(m, mf);
    mr.go(m); 
```

这完美地工作 - 迷宫显示在 GUI 上，我可以看到机器人穿过它直到他到达终点 - 所需的效果。

我的问题是：在 JFrame 的顶部是三个按钮，每个按钮都有一个 ActionListener，它创建一个机器人类型的实例并调用它的 go 方法，这会导致它移动直到它位于“完成单元格”。当我单击其中一个按钮时，机器人被创建并开始移动（我可以通过每次移动时执行的 println 语句来验证），但我看不到机器人在 GUI 上移动。GUI 仅在机器人到达终点时更新（即当 go() 方法完成时），此时显示机器人所走的整个路径。

为什么通过 main 方法创建机器人时，GUI 可以正确更新，而在 JFrame 类创建时，不能正确更新？

我不确定您需要查看哪些代码来帮助我解决此问题，因此请告诉我您需要查看的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:44:58.567

使用 a`javax.swing.Timer`来调整动画的速度，如图所示[`FleetPanel`](https://stackoverflow.com/a/14887457/230513)。在每个滴答声中，计时器的侦听器应该只渲染正在运行的机器人。

![图片](https://i.stack.imgur.com/OuBzD.png)

# wordpress - 只需要电子邮件地址即可进入网站

> ID：15778413
> 
> 赞同：1
> 
> 时间：2013-04-03T03:35:44.097
> 
> 标签：wordpress, email, login, analytics

我有一个客户想要一个要求人们在每次进入之前提供他们的电子邮件地址的网站。有点像用户登录，但只有一个电子邮件地址。基本想法是能够查看每封电子邮件何时访问该站点以及它的去向，以便他可以根据他们在该站点上查看的内容将信息发送到该地址。

我正在使用 wordpress，并建议使该站点仅对注册用户可用，然后使用诸如 wp-activity 之类的插件跟踪该活动。然而，他不希望访问该网站的人必须记住密码。他只是希望能够通过电子邮件地址跟踪用户活动。

有没有什么方法可以做到这一点，而无需用户使用电子邮件地址和密码进行注册？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:19:27.200

像这样的东西应该可以工作，但我没有测试它：

```
function o99_my_email_login($user, $pass) {
    global $wpdb;
    if (is_email($user)) {
        $found = $wpdb->get_var($wpdb->prepare("SELECT user_login FROM $wpdb->users WHERE user_email = '%s'", $user));
        $user = $found ? $found : $user;
    } else {
        $user = 1; // or $username = 1; ??
    }
    return;
}
add_action('wp_authenticate', 'o99_my_email_login', 10, 2); 
```

这个类似的功能也有效，但我不确定它的安全性..

```
add_action('wp_authenticate','o99_smsa_allow_email_login');

function o99_smsa_allow_email_login($username) {
 $user = get_user_by_email($username);
 if(!empty($user->user_login))
 $username = $user->user_login;
 return $username;
} 
```

或者只使用像这样的现成插件[：点击](http://wordpress.org/extend/plugins/wp-email-login/)

# c# - 验证异常 Silverlight 验证

> ID：15778414
> 
> 赞同：1
> 
> 时间：2013-04-03T03:35:49.910
> 
> 标签：c#, silverlight, silverlight-4.0

我在验证网格的 DataTemplate 列中的文本框时遇到问题。文本框绑定的属性是“双”值。这是我的 TextBox 的 xaml 代码

```
 <TextBox  Text="{Binding SubTotalRawHours, Mode=TwoWay, ValidatesOnExceptions=True, NotifyOnValidationError=True}"  
                                                 MinHeight="24" VerticalAlignment="Top" BindingValidationError="ValidateTime" /> 
```

这是财产

```
 private double _SubTotalRawHours;
        public double SubTotalRawHours
        {
            get { return _SubTotalRawHours; }
            set
            {
                if (value < 0)
                {
                    throw new Exception("Value not allowed");
                }
                _SubTotalRawHours = value;
                NotifyPropertyChanged("SubTotalRawHours");
            }
        } 
```

现在奇怪的问题是，如果我输入字母，代码会显示一个带有错误消息“输入格式不正确”的工具提示，这是正确的。但是如果我输入一个负值，我会得到一个异常“代码没有处理异常”。这是发生在这里

```
 if (value < 0)
                {
                    throw new Exception("Value not allowed");
                } 
```

我已经尝试了一切，我什至尝试将文本框放在网格之外，但它不起作用。

真的很感激这里的一些投入。

**编辑 1**

好的，现在我对代码进行了一些更改，我有一个解决方法，而不是`"ValidatesOnExceptions=True"`，我有`"ValidatesOnDataErrors=True"`，我的 Model 类现在也继承自`IDataErrorInfo`并且我已经在我的类中实现了 IDataErrorInfo 成员

```
 private string _dataError = string.Empty;
        const string _ErrorsText = "Errors";
        string IDataErrorInfo.Error
        {
            get { return _dataError; }
        }
        public string this[string propertyName]
        {
            get
            {
                _dataError = null;
                switch (propertyName)
                {
                    case "OldHours":
                        if (OldHours < 0 || OldHours > 100)
                        {
                            return "Please enter a value between 0 - 100.";
                        }
                        break;
                }
                return null;
            }
        } 
```

这是有效的（除了工具提示显示在错误的位置，但这很好）。我仍然无法理解为什么我的代码没有捕获任何异常。有什么我必须添加到我的模型类中的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T00:15:55.003

如果 Visual Studio 设置为中断用户未处理的异常，它将在验证框架处理异常之前中断。您可以[告诉调试器在调试时忽略验证异常](http://www.johnpapa.net/tell-the-debugger-to-ignore-silverlight-validation-exceptions/)，这让验证框架可以在不中断执行的情况下处理异常。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-03T03:57:32.840

您的设置器代码抛出异常，您的调用/客户端代码是否处理/拦截了异常？

很可能不是，这就是为什么你得到一个“未处理异常”的原因。

一个简单的测试，把throw异常改成弹出一个消息框，unhandle异常就没有了。

# c# - 管理 2 对 DateTimePickers（从和到）的最佳方式？

> ID：15778415
> 
> 赞同：0
> 
> 时间：2013-04-03T03:35:52.820
> 
> 标签：c#, winforms, .net-4.0, datetimepicker

对 DateTimePickers 有很多不满...首先，让我解释一下我的设置。我有 2 对 DateTimePickers。1 是 From Date（格式为 MM/dd/yyyy），其对是 From Hour（格式为 HH 和 ShowUpDown = true）。另一对除了 To Date 和 To Hour 之外是相同的。他们需要遵守一些规则。

1.  From 选择器 MaxDates 永远不会超过 To 选择器 MaxDates
2.  如果 To pickers selected day (ToDatePicker) 是当前日期，则它们的 MaxDates 都需要为 DateTime.Now.AddHours(1)。这样，用户将能够搜索“当前”时间...例如：如果当前是 13 年 4 月 2 日晚上 10:18，则 To 选择器对的 MaxDate 需要是 13 年 4 月 2 日晚上 11:00 ，因此用户可以将 From picker pair 的 Value 设置为 4/2/13 10 PM 和 To picker pair 设置为 4/2/13 11 PM，允许他们搜索晚上 10 点的 18 分钟。

我确定还有更多，但我已经筋疲力尽了……我想你们明白了。我尝试使用一些棘手的 DataBindings 来完成此操作，例如：

**在构造函数中：**

```
FromDatePicker.DataBindings.Add(new Binding("MaxDate", ToHourPicker, "MaxDate"));
ToDatePicker.DataBindings.Add(new Binding("MaxDate", ToHourPicker, "MaxDate"));
FromHourPicker.DataBindings.Add(new Binding("Value", FromDatePicker, "Value"));
ToHourPicker.DataBindings.Add(new Binding("Value", ToDatePicker, "Value"));

DateTime dt = DateTime.Now.Subtract(new Timespan(0, 0, DateTime.Now.Minute, DateTime.Now.Second, DateTime.Now.Millisecond));
DateTime plusOne = dt.AddHours(1);

FromDatePicker.MaxDate = dt;
FromHourPicker.MaxDate = dt;
ToDatePicker.MaxDate = plusOne;
ToHourPicker.MaxDate = plusOne; 
```

**在 MainForm 加载事件中**

```
FromDatePicker.Value = FromDatePicker.MaxDate;
FromHourPicker.Value = FromDatePicker.MaxDate;
ToDatePicker.Value = ToDatePicker.MaxDate;
ToHourPicker.Value = ToHourPicker.MaxDate; 
```

使用该设置，它实际上`FromDatePicker.Value = FromDatePicker.MaxDate;`在错误消息的行上失败`Value of <current day & hour> is not valid. Value should be between MinDate and MaxDate`，除非我将鼠标悬停在 FromDatePicker 在那一行中，它说 MaxDate 是一样的`<current day & hour>`......

我非常困惑并且愿意改进我得到的东西，或者如果你们能想出一种更简单的方法来达到同样的效果，我显然也很想听到这些建议：P。让我知道您是否需要更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:49:11.843

> DateTime dt = DateTime.Now.Subtract(new Timespan(0, 0, DateTime.Now.Minute, DateTime.Now.Second, DateTime.Now.Millisecond));

`DateTime.Now`潜在的每一次唤起都是不同的价值。时间在前进。你需要这样做：

```
    现在日期时间 = 日期时间。现在；
    DateTime dt = now.Subtract(new Timespan(0, 0, now.Minute, now.Second, now.Millisecond));

```

接下来，忘记所有废话并使用该`Date`属性。

```
DateTime dt = now.Date;   // time component is set to 00:00:00
DateTime plusOne = now.AddHours(1); 
```

> **通过该设置，它实际上在**FromDatePicker.Value = FromDatePicker.MaxDate;上失败了。与 Value of is not valid 的错误信息一致。值应介于 MinDate 和 MaxDate 之间，

[这可能会解决问题](https://stackoverflow.com/questions/1620858/how-to-set-a-datetimepicker-value-to-datetime-maxvalue)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:55:22.137

所以我通过 eXtreme DataBinding 实现了我想要的东西，哈哈……它看起来很恶心，但很有效！

首先，我在名为 MasterMaxDate 的表单中创建了一个属性，如问题陈述中所述，该属性始终为 Now + 1 小时。

```
public DateTime MasterMaxDate { get; set; } 
```

然后，我将 ToDate 选择器对的 MaxDate 属性绑定到 MasterMaxDate：

```
ToDatePicker.DataBindings.Add(new Binding("MaxDate", this, "MasterMaxDate"));
ToHourPicker.DataBindings.Add(new Binding("MaxDate", this, "MasterMaxDate")); 
```

接下来，我将 FromDate 选择器对的 MaxDate 属性绑定到 ToHour 选择器的 Value 属性（因为 ToHour 选择器最准确）。这确保 FromDate 永远不会 > ToDate。

```
FromDatePicker.DataBindings.Add(new Binding("MaxDate", ToHourPicker, "Value"));
FromHourPicker.DataBindings.Add(new Binding("MaxDate", ToHourPicker, "Value")); 
```

接下来，（现在是奇怪的部分），我必须将一对 Value 中的每个选择器绑定到另一个，以确保它们始终同步：

```
FromDatePicker.DataBindings.Add(new Binding("Value", FromHourPicker, "Value"));
FromHourPicker.DataBindings.Add(new Binding("Value", FromDatePicker, "Value"));

ToDatePicker.DataBindings.Add(new Binding("Value", ToHourPicker, "Value"));
ToHourPicker.DataBindings.Add(new Binding("Value", ToDatePicker, "Value")); 
```

最后，设置 MasterMaxDate：

```
DateTime now = DateTime.Now;
DateTime dt = DateTime.Now.Subtract(new TimeSpan(0, 0, now.Minute, now.Second, now.Millisecond));

MasterMaxDate = dt.AddHours(1); 
```

它有效！这一切都会实时更新并保持同步！（例如：如果我将 ToDate 选择器更改为 FromDate 选择器之前的日期，FromDate 选择器也会自动更改以保持在 ToDate 选择器的“后面”。）

现在回想起来，让这对中的每个选择器“共享”一个 ValueChanged 事件并以这种方式处理它可能会更容易，但我很高兴我能做到这一点。

**更新** 我必须为 MasterMaxDate 实现 INotifyPropertyChanged，以便它将其新值报告给 DateTimePickers。[在这个](https://stackoverflow.com/questions/5883282/binding-property-to-control-in-winforms)例子中使用了接受的答案

# iphone - 从 App Store 更新应用程序时，保存在 NSDocumentDirectory 中的图像消失了

> ID：15778416
> 
> 赞同：3
> 
> 时间：2013-04-03T03:35:54.333
> 
> 标签：iphone, ios, file, nsdocumentdirectory

图像保存为以下代码：

```
-(NSString *)saveImage:(UIImage *)image withName:(NSString *)name{
    [self createDataPath];
    NSString *filePath = [dataPath stringByAppendingPathComponent:name];
    NSData *imageData = UIImageJPEGRepresentation(image, 1.0f);
    [imageData writeToFile:filePath atomically:YES];
    return filePath;
}

-(void)createDataPath{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    dataPath = [[[paths objectAtIndex:0]
                stringByAppendingPathComponent:@"MyPhotos"]
            stringByAppendingPathComponent:imageUniqueId];

    /* check for existence of cache directory */
    if ([[NSFileManager defaultManager] fileExistsAtPath:dataPath]) {
        return;
    }

    NSError *error;

    /* create a new cache directory */
    if (![[NSFileManager defaultManager] createDirectoryAtPath:dataPath
                               withIntermediateDirectories:YES
                                                attributes:nil
                                                     error:&error]) {
    //URLCacheAlertWithError(error);
    return;
    }
 } 
```

据我所知，当应用程序从 App Store 更新时，保存在 NSDocumentDirectory 中的图像不会被清除，但事实是这些图像已经消失了。这里发生了什么？

# registry - 如何在注册表运行键中为我的启动应用程序传递参数

> ID：15778419
> 
> 赞同：1
> 
> 时间：2013-04-03T03:36:18.140
> 
> 标签：registry

我开发了一个winform应用程序来自动备份我电脑上的文件。这个应用程序有一个启动参数“-autostart”，如果这个应用程序使用这个参数运行，它将加载最新的设置（如果运行这个应用程序没有这个参数，它会加载最新的设置（诅咒）参数，它只是运行并且不加载最新设置。）

当我通过添加“-autostart”参数为该应用程序创建快捷方式时，它运行良好并加载设置。但是我希望这个应用程序在我每次启动计算机时自动运行，所以我在注册表的 [HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run] 中创建了一个运行键，键值为“F:\Projects\ AutoBackup\AutoBackup\bin\Debug\AutoBackup.exe" -自动启动

但我没有得到我想要的，它只是没有加载设置，就像它在没有参数的情况下执行一样。我什至将它归咎于值中双引号的位置，所以我尝试了值“F： \Projects\AutoBackup\AutoBackup\bin\Debug\AutoBackup.exe -autostart" 和 F:\Projects\AutoBackup\AutoBackup\bin\Debug\AutoBackup.exe -autostart 。但还是一样。

**那么，我怎样才能正确地将参数传递给注册表中的应用程序？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T15:09:06.347

参数前面必须有一个百分号 (%)。

在您的情况下，注册表项值需要是：

F:\Projects\AutoBackup\AutoBackup\bin\Debug\AutoBackup.exe %autostart

# hibernate - JSF 更新实体无法正常工作

> ID：15778420
> 
> 赞同：0
> 
> 时间：2013-04-03T03:36:25.470
> 
> 标签：hibernate, jsf-2

我正在尝试使用 JSF 2、Hibernate 开发 Web 应用程序，而对于服务器，我正在使用 JBoss AS 7。我有一个实体 Slide 和一个 bean SliderAction。我可以成功地将实体添加到我的数据库并删除它们，但是在编辑实体时会引起麻烦。在编辑页面上，我填充我的实体并显示给用户进行编辑，当用户提交时，只有实体的最后一个属性得到更新。

这是 Slide.class

```
@Entity
public class Slide extends AbstractEntity<Integer>{

private static final long serialVersionUID = 1L;

private String title;
private String description;
private Image image;
private String link;
private Page page;
private boolean showOnFeed;
private boolean approved;
private boolean cropped;

public String getTitle() {
    return title;
}

public void setTitle(String title) {
    System.out.println( getId() + " = TITLE = " + title );
    this.title = title;
}   

public String getDescription() {
    return description;
}

public void setDescription(String description) {
    System.out.println( getId() + " = DESC = " + description );
    this.description = description;
}

@OneToOne
public Image getImage() {
    return image;
}

public void setImage(Image image) {
    this.image = image;
}

public String getLink() {
    return link;
}

public void setLink(String link) {
    this.link = link;
}

@OneToOne
public Page getPage() {
    return page;
}

public void setPage(Page page) {
    System.out.println( getId() + " = PAGE = " + page.getHeading() );
    this.page = page;
}
@Column(name="show_on_feed")
public boolean isShowOnFeed() {
    return showOnFeed;
}

public void setShowOnFeed(boolean showOnFeed) {
    this.showOnFeed = showOnFeed;
}

public boolean isApproved() {
    return approved;
}

public void setApproved(boolean approved) {
    this.approved = approved;
}

public boolean isCropped() {
    return cropped;
}

public void setCropped(boolean cropped) {
    this.cropped = cropped;
}
} 
```

SliderAction.class

```
@Named
@RequestScoped
public class SliderAction {

private EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory("db");
private EntityManager entityManager;

private int id;
private int pageId;
private Integer coordinates[] = new Integer[4];
private Image image;    
private Slide slide = new Slide();
private List<Slide> slides = new ArrayList<Slide>();
private List<Slide> publicSlides = new ArrayList<Slide>();
private UploadedFile uploadedFile;  
private boolean externalLink = false;
private boolean editable = true;

public String add() {
    return "add";
}

public String addSlide() {

    ImageAction imageAction = new ImageAction();                    
    imageAction.upload(uploadedFile, false);

    image = imageAction.getImage();
    slide.setImage( image );
    slide.setCropped( false );      

    startTransaction();
    if( !externalLink ) {
        slide.setPage(entityManager.find(Page.class, pageId));
    }
    entityManager.persist(image);
    entityManager.persist(slide);
    endTransaction();
    closeTransaction();

    setId(slide.getId());

    return "details";
}

public void editSlide() {

    System.out.println(slide);

    startTransaction(); 
    entityManager.merge(slide);
    endTransaction();
    closeTransaction();
}   
public void deleteSlide() {

    startTransaction();
    slide = (Slide)entityManager.find(Slide.class, id);
    entityManager.remove(slide);
    endTransaction();
    closeTransaction();

    slides.remove(slide);

    ImageAction imageAtion = new ImageAction();
    imageAtion.delete(slide.getImage().getUniqueName(), slide.getImage().getThumb());
}

public void makeEditable() {
    editable = true;
}

public void startTransaction() {
    entityManager = entityManagerFactory.createEntityManager();
    entityManager.getTransaction().begin();
}

public void endTransaction() {
    entityManager.getTransaction().commit();
}

public void closeTransaction() {
    entityManager.close();
}

public int getId() {
    return id;
}

public void setId(int id) {
    this.id = id;
}

public Slide getSlide() {
    if( id != 0 ){
        startTransaction();
        slide = entityManager.find(Slide.class, id);
        endTransaction();
        closeTransaction();
    }

    return slide;
}

public void setSlide(Slide slide) {
    this.slide = slide;
}

public UploadedFile getUploadedFile() {
    return uploadedFile;
}

public void setUploadedFile(UploadedFile uploadedFile) {
    this.uploadedFile = uploadedFile;
}

@SuppressWarnings("unchecked")
public List<Slide> getSlides() {
    startTransaction();
    slides = entityManager.createQuery("from Slide").getResultList();
    System.out.println(">>>>>>>>>>>>>>>>>>SLIDES");
    endTransaction();
    closeTransaction();

    return slides;
}

public void setSlides(List<Slide> slides) {
    this.slides = slides;
}

public Integer[] getCoordinates() {
    return coordinates;
}

public void setCoordinates(Integer[] coordinates) {
    this.coordinates = coordinates;
}

public Image getImage() {
    return image;
}

public void setImage(Image image) {
    this.image = image;
}

public boolean isExternalLink() {
    return externalLink;
}

public void setExternalLink(boolean externalLink) {
    this.externalLink = externalLink;
}

@SuppressWarnings("unchecked")
public List<Slide> getPublicSlides() {
    startTransaction();
    publicSlides = entityManager.createQuery("from Slide where showOnFeed = true").getResultList();
    return publicSlides;
}

public void setPublicSlides(List<Slide> publicSlides) {
    this.publicSlides = publicSlides;
}

public boolean isEditable() {
    return editable;
}

public void setEditable(boolean editable) {
    this.editable = editable;
}

public int getPageId() {
    return pageId;
}

public void setPageId(int pageId) {
    this.pageId = pageId;
}
} 
```

编辑页面：

```
<html>
<!-- DOCTYPE specification -->
    <f:metadata>
        <f:viewParam name="id" value="#{sliderAction.id}"/>
    </f:metadata>

<ui:composition template="/view/private/administration/administrator.xhtml">

<ui:define name="title">#{msgs.addingSlide}</ui:define>

<ui:define name="extra-head">
    <h:outputStylesheet library="css" name="jquery.jcrop.min.css"/>     
</ui:define>

<ui:define name="content">

    <div class="grid_14">

        <h4 class="page-heading"><h:outputText value="#{sliderAction.slide.title} #{msgs.details}" /></h4>

        <div class="line clear"></div>

        <h:panelGroup id="details">

            <h:form id="edit-slide">
                <h:panelGrid columns="2">

                    <h:outputText value="#{msgs.slideTitle}" styleClass="label"/>
                    <h:outputText value="#{sliderAction.slide.title}" rendered="#{not sliderAction.editable}"/>
                    <h:inputText id="title" value="#{sliderAction.slide.title}" required="true" rendered="#{sliderAction.editable}"/>
                    <p></p><h:message for="title" errorClass="error"/>

                    <h:outputText value="#{msgs.description}" styleClass="label"/>
                    <h:outputText value="#{sliderAction.edidSlide.description}" rendered="#{not sliderAction.editable}"/>
                    <h:inputTextarea id="description" value="#{sliderAction.slide.description}" required="true" rendered="#{sliderAction.editable}"/>                                                               
                    <p></p><h:message for="description" errorClass="error"/>

                    <h:outputText value="#{msgs.page}" styleClass="label" />
                    <h:link outcome="notset" rendered="#{not sliderAction.editable}">
                        <h:outputText value="#{sliderAction.slide.page.heading}"/>
                        <f:param name="id" value="#{sliderAction.slide.page.id}" />
                    </h:link>
                    <h:selectOneMenu id="page" value="#{sliderAction.pageId}" required="true" rendered="#{sliderAction.editable}">
                        <f:selectItems value="#{pageAction.pages}" var="page" itemLabel="#{page.heading}" itemValue="#{page.id}"/>
                    </h:selectOneMenu>                  
                    <p></p><h:message for="page" errorClass="error"/>               

                    <p></p>
                    <h:commandButton action="#{sliderAction.makeEditable}" value="#{msgs.edit}" styleClass="button" rendered="#{not sliderAction.editable}">
                        <f:ajax render="@form" execute="@this" />
                    </h:commandButton>
                    <h:commandButton action="#{sliderAction.editSlide}" value="#{msgs.saveChanges}" styleClass="button" rendered="#{sliderAction.editable}">
                        <f:ajax render="@form" execute="@form" />
                    </h:commandButton>

                    <h:message for="edit-slide"/>

                </h:panelGrid>
            </h:form>

        </h:panelGroup>

    </div>

</ui:define> 
```

这里当用户提交时，只有 slide.description 被更新。什么会导致这样的问题？如果代码还不够，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:10:53.770

对于那些可能有这种情况的人，请记住 getter 不是用于实现数据库逻辑的。就我而言，我懒惰地加载它

```
public String getSlide() {
    if(slide == null)
        slide = getFromDB();

    return slide;
} 
```

它解决了我的问题。感谢@johny 指出这个问题。

# python - Django Turil 4，修改views.py后，详细站点缺少投票动作？

> ID：15778422
> 
> 赞同：0
> 
> 时间：2013-04-03T03:36:43.017
> 
> 标签：python, django

最近我开始学习 Django，很早就遇到了一个问题：在本教程的第 4 部分中，我将代码修改为通用视图后，详细信息站点看起来与以前不同。

我找不到重点，也没有显示错误声明。

我已经发布了下面的代码。

**民意调查/urls.py：**

```
from polls.models import Poll

urlpatterns =patterns('',
    url(r'$',
        ListView.as_view(
            queryset=Poll.objects.order_by('-pub_date')[:5],
            context_object_name='latest_poll_list',
            template_name='polls/index.html'),
        name='index'),
    url(r'^(?P<pk>\d+)/$',
        DetailView.as_view(
            model=Poll,
            template_name='polls/detail.html'),
        name='detail'),
    url(r'^(?P<pk>\d+)/results/$',
        DetailView.as_view(
            model=Poll,
            template_name='polls/results.html'),
        name='results'),
    url(r'^(?P<poll_id>\d+)/vote/$', 'polls.views.vote', name='vote'),
    ) 
```

**索引.html**

```
{% if latest_poll_list %}
    <ul>
    {% for poll in latest_poll_list %}
        <li><a  href = "{% url 'polls:detail' poll.id %}">{{poll.question}}</a></li>
    {% endfor %}
{% else %}
        <p> No polls are available.</p>
{% endif %} 
```

**详细信息.html**

```
<h1>{{poll.question}}</h1>

{%if error_message %}<p><strong>{{error_message}}</strong></p>{%endif%}

<form action = '{% url 'polls:vote' poll.id %}' method = 'post'>
    {% csrf_token %}
    {% for choice in poll.choice_set.all %}
    <input type = 'radio' name = 'choice' id = 'choice{{forloop.counter}}' value = '{{choice.id}}'/>
    <lable for = 'choice{{forloop.counter}}'>{{choice.choice_text}}</lable><br/>
    {%endfor%}
<input type ='submit' value = 'Vote'/>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:05:45.593

**民意调查/urls.py**

第一个 url 的正则表达式匹配应该是`r'^$'`.

```
urlpatterns =patterns('',
    url(r'^$',
        ListView.as_view(.... 
```

# spring - 春季休眠手动提交

> ID：15778426
> 
> 赞同：7
> 
> 时间：2013-04-03T03:37:30.527
> 
> 标签：spring, hibernate, jpa, transactions, rollback

有人可以帮忙吗？

目前我遇到了一些问题，我正在使用 spring、jpa、hibernate。这是问题所在，当我尝试保存几个对象，然后像 solrj 返回​​ false 时手动回滚。

我尝试了以下方法：
1\. usertransaction（例外`Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException`：）

2\. `entitymanager.gettransaction().begin`（例外：共享管理器）

谢谢，如果你能帮我弄清楚。

标题：

```
@Service("jpaWallPostService")
@Repository
public class WallPostServiceImpl implements WallPostService {
    //........
    @PersistenceContext
    private EntityManager em; 
```

=======================================

```
 @Transactional(readOnly=false)
public boolean save(String solrURL,int userid,wall_post wallPost,List<String> groupsid,List<String> hashtag){

    try{
        em.getTransaction().begin();// ***error occur on here*** and stop here
        //...............proccess
        boolean ok = SolrJ.IndexingWallPost(solrURL,userid, wallPost.getTitle(), wallPost.getMessage(), hashtag,groupsid);
        if(!ok)
            em.getTransaction().rollback();

        em.getTransaction().commit();
        return true;
    }
    catch(Exception e)
    {
        em.getTransaction().rollback();
        return false;
    }
} 
```

这是错误日志

```
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/opscentral] threw exception [Request processing failed; nested exception is java.lang.IllegalStateException: Not allowed to create transaction on shared EntityManager - use Spring transactions or EJB CMT instead] with root cause
java.lang.IllegalStateException: Not allowed to create transaction on shared EntityManager - use Spring transactions or EJB CMT instead
    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:198)
    at $Proxy42.getTransaction(Unknown Source)
    at sg.com.innovax.opscentralv5.table.service.impl.WallPostServiceImpl.save(WallPostServiceImpl.java:230)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy49.save(Unknown Source)
    at sg.com.innovax.opscentralv5.UserHomeController.newWall_post(UserHomeController.java:171)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:146)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.security.config.debug.DebugFilter.doFilterInternal(DebugFilter.java:45)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:947)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1009)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1852)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T08:14:29.023

正确的方法是在使用@Transactional 时删除所有手动事务管理。在适当的 CMT 上下文中，您不应手动与事务交互，@transactional 确保您的方法将在事务中运行，将传播事务上下文以委托调用，并将在执行结束时提交或在抛出异常的情况下回滚. 您唯一可以做的就是`setRollbackOnly()`在`EJBContext`

请参阅：[有没有办法在不遇到异常的情况下强制事务回滚？](https://stackoverflow.com/questions/832375/is-there-a-way-to-force-a-transactional-rollback-without-encountering-an-excepti)

否则，如果您更喜欢手动管理事务：

使用你的 entityManagerFactory 在你的 spring 上下文中定义一个 transactionManager bean。

```
 <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
 </bean> 
```

并以这种方式使用它：

```
@Inject
JpaTransactionManager txManager;

DefaultTransactionDefinition def = new DefaultTransactionDefinition();
def.setName("rootTransaction");
def.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRED);
TransactionStatus status = txManager.getTransaction(def);
[...]
txManager.commit(status); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T08:29:56.410

问题是您的保存方法被注释为 Transactional，这意味着事务将由 Spring 处理，但在该方法中，您尝试使用 JPA API 以编程方式管理事务。

所以你**错误地混合**了两种方法。理想情况下，您应该只使用 Transactional 注释。

下面我添加了处理此问题的 Spring 辅助类的源代码。相关类是org.springframework.orm.jpa.SharedEntityManagerCreator。它有一个私有静态类SharedEntityManagerInvocationHandler，抛出错误的相关代码如下

```
public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
  .....
  .....
  else if (method.getName().equals("getTransaction")) {
      throw new IllegalStateException("Not allowed to create transaction on shared"
                             +" EntityManager - use Spring transactions or EJB CMT instead");
.....
.....
  } 
```

所以这就是我上面提到的。

您正在调用 getTransaction 方法并收到错误消息。

所以摆脱方法内部的事务处理，只坚持 Transactional 注释。

# numpy - Numpy 未转换为新版本

> ID：15778430
> 
> 赞同：0
> 
> 时间：2013-04-03T03:37:47.360
> 
> 标签：numpy

`tar.gz`我刚刚通过从[Sourceforge](http://sourceforge.net/projects/numpy/files/NumPy/1.7.1rc1/)下载文件在 Ubuntu 上安装了 Numpy 1.7.1 。我`tar zxvf`在 tar 文件上做了，然后`python setup.py build`和`sudo python setup.py install`.

但我的 Numpy 仍然是旧版本（1.3.0）。（我通过运行 Python 进行了检查并要求输入`numpy.version.version`.）这是为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:19:35.310

您可以稍微了解一下您的包的位置，并使用以下命令确保它们构建在正确的位置：

```
which python 
```

或者

```
file `which python` 
```

（那些是反引号）在命令行上，这会告诉你你的 python 安装在哪里。

然后，启动`python`（或`ipython`）并运行

```
import numpy
numpy.__file__ 
```

如果您安装了任何有效的软件包，请导入并查看它们的文件位置。您可能会注意到它`numpy.__file__`与您刚刚安装新 numpy 包的位置不同。确保这些匹配，或者将安装新 numpy 的位置添加到`PYTHONPATH`.

# jquery - jquery在div范围内动画滚动顶部

> ID：15778432
> 
> 赞同：1
> 
> 时间：2013-04-03T03:37:54.060
> 
> 标签：jquery, scroll, jquery-animate

我正在尝试创建一个 jquery 滚动功能。它目前使用窗口很好地工作，但我想将它保持在 div 的约束范围内，这样它就不能低于或高于 div。

例子：

```
var $scrollingDiv = $("span.top");
    $(window).scroll(function(){            
        $scrollingDiv
            .stop()
            .animate({"top": ($(window).scrollTop() + 0) + "px"}, "slow" );
    }); 
```

HTML

```
<div class="holder">
<span class="top">back to top</span>
<p>loads of text here</p> 
```

[http://jsfiddle.net/Jzz76/](http://jsfiddle.net/Jzz76/)

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:10:30.100

首先，将您的 CSS 更改为以下内容：

```
.holder span.top{
    display:block;
    z-index:999;
    right:0;
    float:right;
} 
```

如果你注意到了，我从上面的声明中删除了`position:absolute`和。`top:0`这样做是为了使元素仍然驻留在文档流中，并且不会超出其父级。为了让它走向极右，我简单地添加了`float:right`.

接下来，将您的 jQuery 更改为：

```
$('document').ready(function(){
    var spanOffset = $('.top').offset();
    $(window).scroll(function() {
        if($(window).scrollTop() < spanOffset.top) {
            $('.top').css({ 'position': 'static'}); 
        } else {
            $('.top').css({ 'position': 'fixed', 'top': '0px'}); 
        }   
    });
}); 
```

上述代码片段背后的逻辑非常简单：我们获取当前的 Y 偏移`.top`并将其存储在一个变量中。当窗口滚动时，我们检查 Y 偏移量与滚动的距离。如果窗口不滚动，则 的值`$(window).scrollTop()`本质上为 0，因此`.top`保持在父级中而没有改变；如果窗口滚动并且由 计算的滚动距离`$(window).scrollTop()`超过 的当前 Y 偏移量`.top`，则 CSS`.top`将被更改为将其“粘贴”到窗口顶部。

有关工作示例，请参阅[http://jsfiddle.net/Jzz76/20/ 。](http://jsfiddle.net/Jzz76/20/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-03T03:53:22.037

我建议使用插件 - 为您完成的所有辛勤工作！看看一个像这样的轻量级插件：[jQuery Scroll To](http://flesler.blogspot.com.au/2007/10/jqueryscrollto.html)

更多信息：[最佳 JQUERY 滚动到顶部插件](http://www.jquery4u.com/plugins/jquery-scroll-top-plugins/)

# opencl - 如何使以下顺序代码并行？

> ID：15778433
> 
> 赞同：-2
> 
> 时间：2013-04-03T03:37:59.797
> 
> 标签：opencl

我想让以下内核代码并行，在下面的代码中，a 的大小为 n，b 和 c 为 8*n，d 的值小于 n（例如：3*n/4）

```
j=0;
for(i=0;i<n;i++)
 {
  if (a[b[i]]!=a[c[i]])
  {
   d[j]=b[i];
   j++;
  }
 } 
```

**由于 a 和 d 的元素数量不同，我面临给出 i=get_global_id(0) 的问题，因为这样做，在 d 的某些元素中，如果“if”条件，则不会放置任何内容违反……！**那么我该如何做并行..？如果不是这样，如果我将值放置在 d 中的位置存储在不同的数组中，是否可以删除内核中 d 的“无值”位置..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:06:34.513

基本上这是基于谓词的并行数组压缩。

看看 [Parallel Prefix Sum (Scan) with CUDA](https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch39.html)或推力 [http://docs.nvidia.com/cuda/thrust/index.html中描述的技术](http://docs.nvidia.com/cuda/thrust/index.html)

# javascript - 事件 ID（全日历）

> ID：15778435
> 
> 赞同：11
> 
> 时间：2013-04-03T03:38:03.897
> 
> 标签：javascript, mysql, fullcalendar

我需要为来自 Fullcalendar 的每个事件添加一个 id，我找到了这个[http://arshaw.com/fullcalendar/docs/event_data/Event_Object/](http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)但我不知道如何，这个 id
对于每个事件都是唯一的，因为那时我将事件保存在 Mysql 数据库中。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-06T21:22:14.853

I found the solution! When you create any event, put your uniqe id here :

```
var shift = calendar.fullCalendar('renderEvent',
        {
            id: shift_id,
            title: current_name,
            start: new Date(y, m, d + current_day, current_start_time_h, current_start_time_m),
            end: new Date(y, m, d + current_day, current_end_time_h, current_end_time_m),
            allDay: false
        }, true // make the event "stick"
        ); 
```

After that this listener append ID in DOM structure:

```
 eventAfterRender:function( event, element, view ) { 
$(element).attr("id","event_id_"+event._id);
}, 
```

To get all your events on a field:

```
console.log(calendar.fullCalendar('clientEvents')); 
```

Now you have array of events, and all event are numbered in DOM structure!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-04T01:39:05.277

**明确的解决方案是**

当您使用 Ajax 获取事件时，还分配来自 DB 的“id”

**id:entry.id**

```
$.ajax({ 
    url: '/eventsJson', 
    type: 'GET', 
    data: { }, 
    error: function() {
        alert('there was an error while fetching events!');
    } 
}).done(function (doc) { 

    var event = Array();
    $.each(doc, function(i, entry) {
        event.push({id:entry.id, title: entry.title, start: entry.start});
    }); 
```

**事件点击**

```
eventClick: function(event, jsEvent, view) {
               var title = prompt('Event Title:', event.title, { buttons: { Ok: true, Cancel: false} });

           if (title){
           event.title = title;

           var data = {
                'title':title
            };

           $.ajax({
             url: '/events/'+event.id,
             data: data,
             type: 'POST',
             dataType: 'json',
             success: function(response){
               if(response.status == 'success')
               $('#calendar').fullCalendar('updateEvent',event);
             },
             error: function(e){
               alert('Error processing your request: '+e.responseText);
             }
           });
           }
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-02T13:52:56.970

正如 Fletch 所提到的，您必须为数据库中的每个新事件或使用数据库连接代码生成 ID 以允许并发。Bryan Villafañe 使用类似的方法，但这是我的解决方案。

对于 FC javascript：

```
select: function(start) { //executed when clicked on a day
    var title = prompt('Event title:');
    if (title) {
        $.ajax({
            url: '/events.php',
            data: 'title='+title+'&start='+moment(start).format('YYYY-MM-DD'),
            type: "POST",
            success: function(id) { 
                console.log(id); //used for debug
                if (!isNaN(id)){ //on success checks the result 
                    event = {    //and adds the event locally with the returned DB id.
                        title: title,
                        start: start,
                        team: team,
                        id: id
                    }//then renders the new event
                    $('#calendar').fullCalendar('renderEvent', event, true);
                }
            },
            error: function(error){
                console.log(error);
            }
        });
    } //unselects the clicked day
    $('#calendar').fullCalendar('unselect');
} 
```

这会将日期作为`YYYY-MM-DD`格式发送，因为我只使用 allDay 事件，但您可以适当地更新。发送`start`将导致纪元时间以毫秒为单位。

如果插入成功，则 DB 返回行的 ID，然后将其分配给本地创建的事件并呈现。这是数据库功能：

```
$result = "Wrong parameter combination!";
if ($_POST[title]&&$_POST[start]) {
    $result = $db->exec("INSERT INTO events (title, start) VALUES ('$_POST[title]','$_POST[start]')");
    if($result==1){
        $result = $db->lastInsertRowID();
    }
}
echo $result; 
```

在这里，我检查两个 POST 参数并进行插入。如果插入成功，我将获取最后一个插入行 ID 并将其返回给 JS。否则返回错误消息。

我正在为我的数据库使用 SQLite3，但可以检查最后插入的 MySQL 行，如此处[所示](https://stackoverflow.com/questions/1685860/how-do-i-get-the-last-inserted-id-of-a-mysql-table-in-php)。有人在您的插入和最后一行 ID 检查之间插入另一个事件的可能性很小，但除非您正在运行高流量事件，否则您会没事的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T03:56:51.440

Event 对象上的 ID 是可选字段。您可以返回并使用您想从服务器端脚本返回的任何内容。您可以从字段组合...“calendarName_eventID”创建复合 ID，或者仅使用数据库中的 eventID。不过，不确定您是否要像这样公开您的主键（这本身就是另一个问题）。长话短说……您可以创建自己的 ID 值。

您可能想看看这里：[https ://code.google.com/p/fullcalendar/issues/detail?id=713](https://code.google.com/p/fullcalendar/issues/detail?id=713)

该线程处理删除日历事件，但说明了原始发布者如何在他/她的保存事件的回调中设置 ID。

希望这会有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T20:08:46.450

好的，这是我的解决方法。首先，我从我的数据库中获取最后一个 id 事件，然后将 1 加到最后一个 id

```
<?php
$sql = mysql_query("SELECT id FROM calendar ORDER BY id DESC LIMIT 1");

$resul = mysql_fetch_row($sql);
$idActual = $resul[0];
$idActual = $idActual + 1;
?> 
```

然后我将 id 发送给 JS

```
var idActual = "<?php echo $idActual ?>"; 
```

就是这样。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-03T01:06:02.877

每个事件已经有自己的唯一 ID：

```
eventClick: function(event){
    alert(event._id);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-22T15:07:52.270

我建议您在与此类似的参数中设置参数 id：

```
$('#calendar').fullCalendar({
  id: 'calendar',
  eventReceive: function(event) {
    alert(this.calendar.options.id);
  },
  eventDrop: function(event) {
    alert(this.calendar.options.id);
  },
  eventClick: function(event) {
    alert(this.calendar.options.id);
  },
  eventRender: function(event) {
    alert(this.calendar.options.id);
  }
});
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-05T18:38:45.140

建议使用 setProp，因为 v5 希望这对其他人有所帮助，我意识到它正在更改 arg.event._def.id attr 中的 id。

我在我的ajax成功中使用了它；

```
 success: function (response_data) {
        arg.event.setProp("id", response_data['eventId'])} 
```

# hadoop - 使用 Yum 安装 Cloudera CDH4 失败

> ID：15778436
> 
> 赞同：3
> 
> 时间：2013-04-03T03:38:31.317
> 
> 标签：hadoop, installation, yum, cloudera

我正在尝试安装 datanode，它给出了错误“元数据文件与校验和不匹配”我在代理后面

我已经尝试了一切- yum clear all，yum clear metadata。我还编辑了 yum conf 并禁用了缓存。另外，我还手动删除了缓存目录。没有任何效果。没有什么。请帮忙。在另一台机器上，我能够成功安装名称节点

```
**[root@bi ~]# export http_proxy=   myproxy**               

**[root@bi ~]# sudo yum install hadoop-0.20-mapreduce-tasktracker hadoop-hdfs-datanode** 
```

[http://archive.cloudera.com/cdh4/redhat/5/x86_64/cdh/4/repodata/primary.xml.gz](http://archive.cloudera.com/cdh4/redhat/5/x86_64/cdh/4/repodata/primary.xml.gz)：[Errno -1] 元数据文件不匹配校验和尝试其他镜像。 [http://archive.cloudera.com/cdh4/redhat/5/x86_64/cdh/4/repodata/primary.xml.gz](http://archive.cloudera.com/cdh4/redhat/5/x86_64/cdh/4/repodata/primary.xml.gz)：[Errno -1] 元数据文件不匹配校验和尝试其他镜像。错误：失败：来自 cloudera-cdh4 的 repodata/primary.xml.gz：[Errno 256] 没有更多镜像可以尝试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T11:08:22.217

我有同样的问题，代理有问题。尝试其他代理或查看您的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T20:07:49.977

cloudera manager 在安装之前创建一个 .repo，如果有任何冲突，它会导致该错误。

为了避免这样的冲突，

1）使用任何稳定版本的cloudera manager创建一个/etc/yum.repos.d/cloudera-manager.repo文件。（5.2.1是我这样做时的版本）

我的 cloudera-manager.repo 文件如下所示：

```
[cloudera-manager]
name = Cloudera Manager, Version 5.2.1
baseurl = http://archive.cloudera.com/cm5/redhat/6/x86_64/cm/5.2.1/
gpgkey = http://archive.cloudera.com/redhat/cdh/RPM-GPG-KEY-cloudera
gpgcheck = 1 
```

2) 现在运行以下命令使安装程序使用本地 repo 文件。

```
./cloudera-manager-installer.bin --skip_repo_package=1 
```

# c - 找不到二进制文件 Eclipse

> ID：15778443
> 
> 赞同：1
> 
> 时间：2013-04-03T03:39:49.773
> 
> 标签：c, eclipse

问题：

```
No includes folder in the project folder.  
Error: "Launch failed. Binaries not found" 
```

我正在 Eclipse 上编写我的第一个 C 代码（Eclipse 的新手），但似乎无法运行它。当我在工具链中创建一个像这样的新项目`file->new->c project-> choose empty project`和 MinGW 并完成时。

我最终得到一个空文件夹，没有包含文件夹。从那里我创建一个新的 src 文件夹和一个 .cpp 文件，然后我首先“构建所有”代码然后运行它。毕竟我结束了`Launch failed. Binaries not found`。我还检查了 PE Windows Parser 是否已打开。这条线也有红色下划线：

```
 #include <iostream> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:26:19.087

正如[这个线程](http://www.eclipse.org/forums/index.php/m/719025/)中提到的：

> 如果工具链显示在“ `Create C++ project of selected type`”中，则 Eclipse 已正确检测到它们。
> 消息“ `Launch failed,binaries not found`”表示 Eclipse 找不到您要调试/启动的应用程序！大多数情况下，当您忘记在启动之前构建项目或发生构建错误时，就会出现此消息。这可能是代码中的编译器错误或缺少/错误安装的工具链。

因此，当您构建“ `hello world`”时，请检查 Eclipse 控制台窗口中可见的输出。

如果由于以下原因构建失败：

```
Error launching external scanner info generator (gcc -E -P -v -dD) 
```

，然后查看“[启动外部扫描仪信息生成器时出错 - MingGW 上的 gcc 链接问题](https://stackoverflow.com/a/6256909/6309)”。

# android - android - 如何将圆形图像适合另一个圆形图像

> ID：15778451
> 
> 赞同：0
> 
> 时间：2013-04-03T03:40:59.273
> 
> 标签：android

我有一个圆形图像（image1），我正在动态地获得一个圆形图像（image2）。现在我想将 image2 放入 image1 中。有可能吗？如果是，我们如何实施。

**图片1**

![在此处输入图像描述](https://i.stack.imgur.com/I4dix.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:07:40.520

您应该能够在图像的画布范围内绘制它。具体来说，您可以抓取第二张图像的宽度/高度，然后通过在画布上手动绘制位图来更改位图的绘制位置，然后在绘制过程中控制 X/Y 偏移。

## 像这样的东西

![在此处输入图像描述](https://i.stack.imgur.com/8LZY0.png)

这是如果您的源图像具有固定分辨率（理想）。这个概念是使用 Canvas 对象构建图像，然后将另一个图像叠加在它上面。并以此构建位图。

# c# - 如何使用名为 Configuration 的 MSBuild 命令行参数作为条件编译符号？

> ID：15778453
> 
> 赞同：5
> 
> 时间：2013-04-03T03:41:16.530
> 
> 标签：c#, visual-studio, msbuild

我想显示一个字符串，告诉用户使用哪个构建配置来构建应用程序。例如：

如果命令行类似这样：

```
msbuild project.sln /t:Build /p:Configuration=Release 
```

然后在源代码中，我想这样做：

```
Console.Writeline("You are running the " + <get the /p:Configuration value> + " version" ); 
```

用户会看到：

> 您正在运行发布版本

我知道我们可以在命令提示符下声明条件编译符号（#defines），比如[在这篇文章](https://stackoverflow.com/questions/2016697/msbuild-exe-not-accepting-either-pdefineconstants-nor-ppreprocessordefinitio)和[这篇](https://stackoverflow.com/questions/10714668/how-do-you-pass-conditional-compilation-symbols-defineconstants-to-msbuild)文章中是如何定义的。但我想使用名为`Configuration`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T06:09:55.530

没有办法做到这一点，除非你说=使用#if。MSBuild 配置名称只是项目文件中用于构建项目特定风格的一组配置的名称。默认情况下，您无法从代码中访问此配置名称。

我看到两种方法可以更改代码中的字符串：

a）正如你所说 - 你可以指定条件编译符号，所以你可以做类似的事情

```
#if DEBUG
const string Flavor = "Debug";
#else
const string Flavor = "Release";
#endif
...
Console.WriteLine("You are running the " + Flavor + " version" ); 
```

b）您可以使用您的项目文件并根据配置包含不同的文件集。如果您将卸载项目并将 csproj 作为文件打开 - 您将看到例如

```
<ItemGroup>
  <Compile Include="MyApp.cs" />
</ItemGroup> 
```

您可以更改为：

```
<ItemGroup>
  <Compile Include="MyApp.Release.cs" Condition="'$(Configuration)'=='Release'" />
  <Compile Include="MyApp.Debug.cs" Condition="'$(Configuration)'=='Debug'" />
</ItemGroup> 
```

因此，这就是您将为每个配置包含不同文件集的方式，您可以在其中指定用户现在拥有的配置。

# java - 如何在 Apache POI 公式中获取工作簿参考（例如公式 [CELL]）？

> ID：15778455
> 
> 赞同：0
> 
> 时间：2013-04-03T03:41:22.580
> 
> 标签：java, apache-poi

我想实现一个 Excel 公式，即[CELL 函数](http://www.techonthenet.com/excel/formulas/cell.php)使用 Apache POI。

当单元格 eval 表达式为 时，它将返回当前 Excel 工作簿文件名`=CELL("filename")`。

我可以在其他 eval 表达式中从 AreaEval 类型中找到单元格的工作表。除了`CELL`只有一个参数的表达式。

```
public class CELL implements  Function1Arg, Function2Arg {
    @Override
    public ValueEval evaluate(int srcRowIndex, int srcColumnIndex, ValueEval arg0) {

        return evaluate(srcRowIndex, srcColumnIndex, arg0);
    }

    @Override
    public ValueEval evaluate(int srcRowIndex, int srcColumnIndex, ValueEval arg0, ValueEval arg1) {
        return null;  //To change body of implemented methods use File | Settings | File Templates.
    }

    @Override
    public ValueEval evaluate(ValueEval[] args, int srcRowIndex, int srcColumnIndex) {
        switch (args.length) {
            case 1:
                return evaluate(srcRowIndex, srcColumnIndex, args[0]);
            case 2:
                return evaluate(srcRowIndex, srcColumnIndex, args[0], args[1]);
        }
        return ErrorEval.VALUE_INVALID;
    }
} 
```

有没有什么地方可以让我得到 Eval 表达式的工作簿参考？

# c++ - 制作“Q”关闭程序

> ID：15778459
> 
> 赞同：1
> 
> 时间：2013-04-03T03:41:50.300
> 
> 标签：c++

如果输入 Q 或 q，需要程序关闭。

但目前它并没有关闭并显示电话号码并关闭。

如果你能帮助我，请发帖谢谢！

到目前为止，我目前拥有此代码并且它可以工作，但是当返回 -5 时，我不会停止 while 循环。

```
#include <iostream>
#include <string>
#include <iomanip>

using namespace std;

int readDial ( char &d1, char &d2, char &d3, char &d4, char &d5, char &d6,  char &d7, char &d8);

char toDigit (char &d);

void acknowledgeCall (char d1, char d2, char d3, char d4, char d5, char d6, char d7, char d8);

int main ()
{
    char d1, d2, d3, d4 , d5, d6, d7, d8;

    int returnV = false;

    while (returnV != -5)
    {
        returnV = readDial (d1,d2,d3,d4,d5,d6,d7,d8);
        switch (returnV)
        {
        case -1: cout << "Error - An invalid Character was entered.\n";
        case -2: cout << "Error - Phone Number cannot begin with 0.\n";
        case -3: cout << "Error - Phone Number cannot begin with 555.\n";
        case -4: cout << "Error - Hyphen is not in the correct spot.\n";
        default: acknowledgeCall (d1, d2, d3,d4, d5,d6,d7,d8);
        }
    }

    system("pause");
    return 0;
}

int readDial ( char &d1, char &d2, char &d3, char &d4, char &d5, char &d6,  char &d7, char &d8)
{
    int returnV;

    cout << " Enter The Phone Number (Q to Quit): ";
    cin >> d1;
    if( d1 == 'Q' || d1 == 'q')
    return -5;
    cin >> d2 >> d3 >> d4 >> d5 >> d6 >> d7 >> d8;
    returnV = toDigit(d1);

    if (returnV == -1)
        return returnV;
    returnV = toDigit(d2);

    if (returnV == -1)
        return returnV;
    returnV = toDigit(d3);

    if(d4 != '-')
        return -4;

    returnV = toDigit(d5);

    if (returnV == -1)
        return returnV;
    returnV = toDigit(d6);

    if (returnV == -1)
        return returnV;
    returnV = toDigit(d7);

    if (returnV == -1)
        return returnV;
    returnV = toDigit(d8);

    if (returnV == -1)
        return returnV;
    if (d1 == '0')
        return -2;
    if (d1 == '5' && d2 == '5' && d3 == '5')
        return -3;
    return 0;
}

char toDigit (char &d)
{
    d = toupper (d);
    switch (d)
    {
    case '0': case '1' : case '2' : case '3': case '4' : case '5' : case '6' : case '7' : case '8' : case '9':
        break ;

    case 'A' : case 'B' : case 'C':
        d = '2';
        break;

    case 'D' : case 'E' : case 'F' :
        d = '3';
        break ;

    case 'G' : case 'H' : case 'I' :
        d = '4';
        break ;

    case 'J' : case 'K' : case 'L' :
        d = '5';
        break ;

    case 'M' : case 'N' : case 'O' :
        d = '6';
        break ;

    case 'P' : case 'Q' : case 'R' : case 'S' :
        d = '7' ;
        break ;

    case 'T' : case 'U' : case 'V' :
        d = '8' ;
        break ;

    case 'W' : case 'X' : case 'Y' : case 'Z' :
        d = '9' ;
        break;

    default: return -1;
    }
}

void acknowledgeCall (char d1, char d2, char d3, char d4, char d5, char d6, char d7, char d8)
{

    cout << " Phone Number Dialed: " << d1 << d2 << d3 << d4 << d5 << d6 << d7 <<d8 << " \n\n ";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:45:52.263

您`default`在 switch 案例中使用了案例，这意味着该案例适用于除上述值之外的所有其他值。因此，如果您不指定 for `returnV=5`，则执行默认情况。所以在默认情况之前添加这个语句：

```
case -5: exit(1) 
```

如果 returnV 为 -5，这将导致程序退出。并且在 switch 中的 case 之间使用 break 语句，会导致控件在执行单个 case 后离开 switch-case。如果您不使用，则执行所需的原始案例之后的所有案例。所以`break;`在每个案例的末尾添加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:44:43.633

您的 main() 中有一个主要的逻辑问题。

检查您的`switch:case`逻辑并为 Q/q 的输入添加必要的处理

# javascript - Windows 应用商店应用程序中的点对点连接 (HTML/JS)

> ID：15778462
> 
> 赞同：0
> 
> 时间：2013-04-03T03:43:03.417
> 
> 标签：javascript, html, windows-8, windows-store-apps, p2p

我想知道是否有人设法使用 HTML5 和 JavaScript 为 Windows 应用商店设置了点对点应用程序。基本上我希望应用程序客户端 A 能够通过 TCP 或 UDP 套接字连接并向应用程序客户端 B 发送数据（我面临的问题似乎与套接字类型无关）。

我的主要问题是我不确定如何获得其他客户端能够连接到的合适 IP/端口。路由器防火墙之类的似乎会有问题，但 MS 声称点对点是可能的。

任何提示将不胜感激，谢谢。

编辑：我不能使用第三方服务来传递数据，因为我希望我的应用程序能够与我正在编写的应用程序之外的其他应用程序连接。所以像 TCP 套接字这样的标准是必要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:16:17.563

看看使用 Web 技术进行桌面应用程序开发的[TideSDK](http://www.tidesdk.org/)。

我不知道 TideSDK 是否提供 API 来访问 TCP 或 UDP 通信，也许你可以尝试阅读[文档](http://tidesdk.multipart.net/docs/user-dev/generated/)。IMO 最好的是您需要创建一个服务器来处理客户端之间的 1:1 连接。

如果你不想弄乱服务器，你应该了解一下[PubNub](http://www.pubnub.com/solutions/how-pubnub-works)和[Pusher](http://pusher.com/)

# python - 使用 Python 请求：会话、Cookie 和 POST

> ID：15778466
> 
> 赞同：43
> 
> 时间：2013-04-03T03:43:54.910
> 
> 标签：python, python-3.x, python-requests, session-cookies

我正在尝试使用[StubHub API](https://developer.stubhub.com/store/)抓取一些销售数据。此处显示此数据的示例：

[https://sell.stubhub.com/sellapi/event/4236070/section/null/seatmapdata](https://sell.stubhub.com/sellapi/event/4236070/section/null/seatmapdata)

您会注意到，如果您尝试在不登录 stubhub.com 的情况下访问该 URL，它将无法正常工作。[您需要先登录](https://myaccount.stubhub.com/login/Signin)。

通过网络浏览器登录后，我会在新选项卡中打开要抓取的 URL，然后使用以下命令检索抓取的数据：

```
r = requests.get('https://sell.stubhub.com/sellapi/event/4236070/section/null/seatmapdata') 
```

但是，一旦浏览器会话在十分钟后过期，我就会收到此错误：

```
<FormErrors>
<FormField>User Auth Check</FormField>
<ErrorMessage>
Either is not active or the session might have expired. Please login again.
</ErrorMessage> 
```

我认为我需要通过 cookie 实现会话 ID 以保持我的身份验证有效。

Requests 库文档对于以前从未做过此类事情的人来说非常糟糕，所以我希望你们能够提供帮助。

Requests 提供的示例是：

```
s = requests.Session()

s.get('http://httpbin.org/cookies/set/sessioncookie/123456789')
r = s.get("http://httpbin.org/cookies")

print r.text
# '{"cookies": {"sessioncookie": "123456789"}}' 
```

老实说，我无法对此做出正面或反面。如何在 POST 请求之间保留 cookie？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-04-03T18:15:02.297

我不知道 stubhub 的 api 是如何工作的，但通常它应该是这样的：

```
s = requests.Session()
data = {"login":"my_login", "password":"my_password"}
url = "http://example.net/login"
r = s.post(url, data=data) 
```

现在您的会话包含登录表单提供的 cookie。要访问此会话的 cookie，只需使用

```
s.cookies 
```

任何进一步的操作，如另一个请求，都会有这个 cookie

# .net - 参考 system.web.cors

> ID：15778469
> 
> 赞同：33
> 
> 时间：2013-04-03T03:44:08.363
> 
> 标签：.net, web-services, rest, asp.net-web-api, cors

我正在尝试在我的 Web API 中实现 cors 支持。

我已阅读有关此主题的几篇博客文章，但似乎找不到 System.Web.Cors.dll 或 System.Web.Http.Cors.dll

有什么我需要安装的吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-02-14T05:29:35.303

创建一个**.NET 4.5** MVC 项目，安装 nuget 包“Microsoft ASP.NET Web API [version] Cross-Origin Support”（搜索“cors”，它将在列表中的第 1 或第 2 位）。就是这样。

PS 如果您遇到错误，请尝试安装“Microsoft ASP.NET Web API [版本]”包（搜索“WebApi”）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-16T21:53:55.530

System.Web.Cors 程序集现在在[Microsoft.AspNet.Cors](https://www.nuget.org/packages/Microsoft.AspNet.Cors/5.0.0-rc1)包中的 NuGet 上可用。目前这是一个预发布包，因此如果您使用 Visual Studio 包管理器，则需要包含预发布包。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T04:04:16.100

在本地使用 System.Web.Cors 的唯一方法是按照此讨论使用每晚构建。[http://aspnetwebstack.codeplex.com/discussions/436442](http://aspnetwebstack.codeplex.com/discussions/436442)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T04:04:29.533

根据[这个线程](http://aspnetwebstack.codeplex.com/discussions/436442)，您可以使用 nuget 使用 ASP.NET 的夜间构建来获取它（请参阅[此处](http://aspnetwebstack.codeplex.com/wikipage?title=Use%20Nightly%20Builds)的说明）。但听起来它只与 System.Web.Http 的 v5 兼容，所以你可能也需要得到它。这当然不是 RTM，所以你必须对此感到满意。

# mysql - MYSQL 替换问题

> ID：15778471
> 
> 赞同：0
> 
> 时间：2013-04-03T03:44:19.643
> 
> 标签：mysql, sql, sql-update, replace

我有一个 MYSQL 问题。

这与游戏服务器有关。

我想要做的是取 ITEM A 并将其替换为 ITEM B 下面是表的架构，我想从 sql 中排除 ID/NAME 并添加所有其他字段

基本上我想通过项目的唯一名称来做到这一点。

> 例如：传说中的希望石和希望石。本质上，我想让寓言希望石与希望石具有相同的价值。

我找到了一个替代解决方案，但这需要我在每个项目中包含 250 多个查询来更改每个字段。使用 633 行执行此操作将是 158,230 行 sql，我不想写。我想不出一种有效的方法来做到这一点。

**{替代解决方案}**

```
CREATE TABLE t
AS SELECT *
FROM items
WHERE name LIKE 'Hope Stone';

UPDATE items
SET hp = (
     SELECT hp
     FROM t
     WHERE name LIKE 'Hope Stone'
     )
WHERE name LIKE 'Fabled Hope Stone';

DROP TABLE t; 
```

 ````
`id` INT(11) NOT NULL DEFAULT '0',
`minstatus` SMALLINT(5) NOT NULL DEFAULT '0',
`Name` VARCHAR(64) NOT NULL DEFAULT '',
`aagi` INT(11) NOT NULL DEFAULT '0',
`ac` INT(11) NOT NULL DEFAULT '0',
`accuracy` INT(11) NOT NULL DEFAULT '0',
`acha` INT(11) NOT NULL DEFAULT '0',
`adex` INT(11) NOT NULL DEFAULT '0',
`aint` INT(11) NOT NULL DEFAULT '0',
`artifactflag` TINYINT(3) UNSIGNED NOT NULL DEFAULT '0',
`asta` INT(11) NOT NULL DEFAULT '0',
`astr` INT(11) NOT NULL DEFAULT '0',
`attack` INT(11) NOT NULL DEFAULT '0',
`augrestrict` INT(11) NOT NULL DEFAULT '0',
`augslot1type` TINYINT(3) NOT NULL DEFAULT '0',
`augslot1visible` TINYINT(3) NULL DEFAULT NULL,
`augslot2type` TINYINT(3) NOT NULL DEFAULT '0',
`augslot2visible` TINYINT(3) NULL DEFAULT NULL,
`augslot3type` TINYINT(3) NOT NULL DEFAULT '0',
`augslot3visible` TINYINT(3) NULL DEFAULT NULL,
`augslot4type` TINYINT(3) NOT NULL DEFAULT '0',
`augslot4visible` TINYINT(3) NULL DEFAULT NULL,
`augslot5type` TINYINT(3) NOT NULL DEFAULT '0',
`augslot5visible` TINYINT(3) NULL DEFAULT NULL,
`augtype` INT(11) NOT NULL DEFAULT '0',
`avoidance` INT(11) NOT NULL DEFAULT '0',
`awis` INT(11) NOT NULL DEFAULT '0',
`bagsize` INT(11) NOT NULL DEFAULT '0',
`bagslots` INT(11) NOT NULL DEFAULT '0',
`bagtype` INT(11) NOT NULL DEFAULT '0',
`bagwr` INT(11) NOT NULL DEFAULT '0',
`banedmgamt` INT(11) NOT NULL DEFAULT '0',
`banedmgraceamt` INT(11) NOT NULL DEFAULT '0',
`banedmgbody` INT(11) NOT NULL DEFAULT '0',
`banedmgrace` INT(11) NOT NULL DEFAULT '0',
`bardtype` INT(11) NOT NULL DEFAULT '0',
`bardvalue` INT(11) NOT NULL DEFAULT '0',
`book` INT(11) NOT NULL DEFAULT '0',
`casttime` INT(11) NOT NULL DEFAULT '0',
`casttime_` INT(11) NOT NULL DEFAULT '0',
`charmfile` VARCHAR(32) NOT NULL DEFAULT '',
`charmfileid` VARCHAR(32) NOT NULL DEFAULT '',
`classes` INT(11) NOT NULL DEFAULT '0',
`color` INT(10) UNSIGNED NOT NULL DEFAULT '0',
`combateffects` VARCHAR(10) NOT NULL DEFAULT '',
`extradmgskill` INT(11) NOT NULL DEFAULT '0',
`extradmgamt` INT(11) NOT NULL DEFAULT '0',
`price` INT(11) NOT NULL DEFAULT '0',
`cr` INT(11) NOT NULL DEFAULT '0',
`damage` INT(11) NOT NULL DEFAULT '0',
`damageshield` INT(11) NOT NULL DEFAULT '0',
`deity` INT(11) NOT NULL DEFAULT '0',
`delay` INT(11) NOT NULL DEFAULT '0',
`augdistiller` INT(11) NOT NULL DEFAULT '0',
`dotshielding` INT(11) NOT NULL DEFAULT '0',
`dr` INT(11) NOT NULL DEFAULT '0',
`clicktype` INT(11) NOT NULL DEFAULT '0',
`clicklevel2` INT(11) NOT NULL DEFAULT '0',
`elemdmgtype` INT(11) NOT NULL DEFAULT '0',
`elemdmgamt` INT(11) NOT NULL DEFAULT '0',
`endur` INT(11) NOT NULL DEFAULT '0',
`factionamt1` INT(11) NOT NULL DEFAULT '0',
`factionamt2` INT(11) NOT NULL DEFAULT '0',
`factionamt3` INT(11) NOT NULL DEFAULT '0',
`factionamt4` INT(11) NOT NULL DEFAULT '0',
`factionmod1` INT(11) NOT NULL DEFAULT '0',
`factionmod2` INT(11) NOT NULL DEFAULT '0',
`factionmod3` INT(11) NOT NULL DEFAULT '0',
`factionmod4` INT(11) NOT NULL DEFAULT '0',
`filename` VARCHAR(32) NOT NULL DEFAULT '',
`focuseffect` INT(11) NOT NULL DEFAULT '0',
`fr` INT(11) NOT NULL DEFAULT '0',
`fvnodrop` INT(11) NOT NULL DEFAULT '0',
`haste` INT(11) NOT NULL DEFAULT '0',
`clicklevel` INT(11) NOT NULL DEFAULT '0',
`hp` INT(11) NOT NULL DEFAULT '0',
`regen` INT(11) NOT NULL DEFAULT '0',
`icon` INT(11) NOT NULL DEFAULT '0',
`idfile` VARCHAR(30) NOT NULL DEFAULT '',
`itemclass` INT(11) NOT NULL DEFAULT '0',
`itemtype` INT(11) NOT NULL DEFAULT '0',
`ldonprice` INT(11) NOT NULL DEFAULT '0',
`ldontheme` INT(11) NOT NULL DEFAULT '0',
`ldonsold` INT(11) NOT NULL DEFAULT '0',
`light` INT(11) NOT NULL DEFAULT '0',
`lore` VARCHAR(80) NOT NULL DEFAULT '',
`loregroup` INT(11) NOT NULL DEFAULT '0',
`magic` INT(11) NOT NULL DEFAULT '0',
`mana` INT(11) NOT NULL DEFAULT '0',
`manaregen` INT(11) NOT NULL DEFAULT '0',
`enduranceregen` INT(11) NOT NULL DEFAULT '0',
`material` INT(11) NOT NULL DEFAULT '0',
`maxcharges` INT(11) NOT NULL DEFAULT '0',
`mr` INT(11) NOT NULL DEFAULT '0',
`nodrop` INT(11) NOT NULL DEFAULT '0',
`norent` INT(11) NOT NULL DEFAULT '0',
`pendingloreflag` TINYINT(3) UNSIGNED NOT NULL DEFAULT '0',
`pr` INT(11) NOT NULL DEFAULT '0',
`procrate` INT(11) NOT NULL DEFAULT '0',
`races` INT(11) NOT NULL DEFAULT '0',
`range` INT(11) NOT NULL DEFAULT '0',
`reclevel` INT(11) NOT NULL DEFAULT '0',
`recskill` INT(11) NOT NULL DEFAULT '0',
`reqlevel` INT(11) NOT NULL DEFAULT '0',
`sellrate` FLOAT NOT NULL DEFAULT '0',
`shielding` INT(11) NOT NULL DEFAULT '0',
`size` INT(11) NOT NULL DEFAULT '0',
`skillmodtype` INT(11) NOT NULL DEFAULT '0',
`skillmodvalue` INT(11) NOT NULL DEFAULT '0',
`slots` INT(11) NOT NULL DEFAULT '0',
`clickeffect` INT(11) NOT NULL DEFAULT '0',
`spellshield` INT(11) NOT NULL DEFAULT '0',
`strikethrough` INT(11) NOT NULL DEFAULT '0',
`stunresist` INT(11) NOT NULL DEFAULT '0',
`summonedflag` TINYINT(3) UNSIGNED NOT NULL DEFAULT '0',
`tradeskills` INT(11) NOT NULL DEFAULT '0',
`favor` INT(11) NOT NULL DEFAULT '0',
`weight` INT(11) NOT NULL DEFAULT '0',
`UNK012` INT(11) NOT NULL DEFAULT '0',
`UNK013` INT(11) NOT NULL DEFAULT '0',
`benefitflag` INT(11) NOT NULL DEFAULT '0',
`UNK054` INT(11) NOT NULL DEFAULT '0',
`UNK059` INT(11) NOT NULL DEFAULT '0',
`booktype` INT(11) NOT NULL DEFAULT '0',
`recastdelay` INT(11) NOT NULL DEFAULT '0',
`recasttype` INT(11) NOT NULL DEFAULT '0',
`guildfavor` INT(11) NOT NULL DEFAULT '0',
`UNK123` INT(11) NOT NULL DEFAULT '0',
`UNK124` INT(11) NOT NULL DEFAULT '0',
`attuneable` INT(11) NOT NULL DEFAULT '0',
`nopet` INT(11) NOT NULL DEFAULT '0',
`updated` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
`comment` VARCHAR(255) NOT NULL DEFAULT '',
`UNK127` INT(11) NOT NULL DEFAULT '0',
`pointtype` INT(11) NOT NULL DEFAULT '0',
`potionbelt` INT(11) NOT NULL DEFAULT '0',
`potionbeltslots` INT(11) NOT NULL DEFAULT '0',
`stacksize` INT(11) NOT NULL DEFAULT '0',
`notransfer` INT(11) NOT NULL DEFAULT '0',
`stackable` INT(11) NOT NULL DEFAULT '0',
`UNK134` VARCHAR(255) NOT NULL DEFAULT '',
`UNK137` INT(11) NOT NULL DEFAULT '0',
`proceffect` INT(11) NOT NULL DEFAULT '0',
`proctype` INT(11) NOT NULL DEFAULT '0',
`proclevel2` INT(11) NOT NULL DEFAULT '0',
`proclevel` INT(11) NOT NULL DEFAULT '0',
`UNK142` INT(11) NOT NULL DEFAULT '0',
`worneffect` INT(11) NOT NULL DEFAULT '0',
`worntype` INT(11) NOT NULL DEFAULT '0',
`wornlevel2` INT(11) NOT NULL DEFAULT '0',
`wornlevel` INT(11) NOT NULL DEFAULT '0',
`UNK147` INT(11) NOT NULL DEFAULT '0',
`focustype` INT(11) NOT NULL DEFAULT '0',
`focuslevel2` INT(11) NOT NULL DEFAULT '0',
`focuslevel` INT(11) NOT NULL DEFAULT '0',
`UNK152` INT(11) NOT NULL DEFAULT '0',
`scrolleffect` INT(11) NOT NULL DEFAULT '0',
`scrolltype` INT(11) NOT NULL DEFAULT '0',
`scrolllevel2` INT(11) NOT NULL DEFAULT '0',
`scrolllevel` INT(11) NOT NULL DEFAULT '0',
`UNK157` INT(11) NOT NULL DEFAULT '0',
`serialized` DATETIME NULL DEFAULT NULL,
`verified` DATETIME NULL DEFAULT NULL,
`serialization` TEXT NULL,
`source` VARCHAR(20) NOT NULL DEFAULT '',
`UNK033` INT(11) NOT NULL DEFAULT '0',
`lorefile` VARCHAR(32) NOT NULL DEFAULT '',
`UNK014` INT(11) NOT NULL DEFAULT '0',
`svcorruption` INT(11) NOT NULL DEFAULT '0',
`UNK038` INT(11) NOT NULL DEFAULT '0',
`UNK060` INT(11) NOT NULL DEFAULT '0',
`augslot1unk2` INT(11) NOT NULL DEFAULT '0',
`augslot2unk2` INT(11) NOT NULL DEFAULT '0',
`augslot3unk2` INT(11) NOT NULL DEFAULT '0',
`augslot4unk2` INT(11) NOT NULL DEFAULT '0',
`augslot5unk2` INT(11) NOT NULL DEFAULT '0',
`UNK120` INT(11) NOT NULL DEFAULT '0',
`UNK121` INT(11) NOT NULL DEFAULT '0',
`questitemflag` INT(11) NOT NULL DEFAULT '0',
`UNK132` TEXT NOT NULL,
`clickunk5` INT(11) NOT NULL DEFAULT '0',
`clickunk6` VARCHAR(32) NOT NULL DEFAULT '',
`clickunk7` INT(11) NOT NULL DEFAULT '0',
`procunk1` INT(11) NOT NULL DEFAULT '0',
`procunk2` INT(11) NOT NULL DEFAULT '0',
`procunk3` INT(11) NOT NULL DEFAULT '0',
`procunk4` INT(11) NOT NULL DEFAULT '0',
`procunk6` VARCHAR(32) NOT NULL DEFAULT '',
`procunk7` INT(11) NOT NULL DEFAULT '0',
`wornunk1` INT(11) NOT NULL DEFAULT '0',
`wornunk2` INT(11) NOT NULL DEFAULT '0',
`wornunk3` INT(11) NOT NULL DEFAULT '0',
`wornunk4` INT(11) NOT NULL DEFAULT '0',
`wornunk5` INT(11) NOT NULL DEFAULT '0',
`wornunk6` VARCHAR(32) NOT NULL DEFAULT '',
`wornunk7` INT(11) NOT NULL DEFAULT '0',
`focusunk1` INT(11) NOT NULL DEFAULT '0',
`focusunk2` INT(11) NOT NULL DEFAULT '0',
`focusunk3` INT(11) NOT NULL DEFAULT '0',
`focusunk4` INT(11) NOT NULL DEFAULT '0',
`focusunk5` INT(11) NOT NULL DEFAULT '0',
`focusunk6` VARCHAR(32) NOT NULL DEFAULT '',
`focusunk7` INT(11) NOT NULL DEFAULT '0',
`scrollunk1` INT(11) NOT NULL DEFAULT '0',
`scrollunk2` INT(11) NOT NULL DEFAULT '0',
`scrollunk3` INT(11) NOT NULL DEFAULT '0',
`scrollunk4` INT(11) NOT NULL DEFAULT '0',
`scrollunk5` INT(11) NOT NULL DEFAULT '0',
`scrollunk6` VARCHAR(32) NOT NULL DEFAULT '',
`scrollunk7` INT(11) NOT NULL DEFAULT '0',
`UNK193` INT(11) NOT NULL DEFAULT '0',
`purity` INT(11) NOT NULL DEFAULT '0',
`evolvinglevel` INT(11) NOT NULL DEFAULT '0',
`clickname` VARCHAR(64) NOT NULL DEFAULT '',
`procname` VARCHAR(64) NOT NULL DEFAULT '',
`wornname` VARCHAR(64) NOT NULL DEFAULT '',
`focusname` VARCHAR(64) NOT NULL DEFAULT '',
`scrollname` VARCHAR(64) NOT NULL DEFAULT '',
`dsmitigation` SMALLINT(6) NOT NULL DEFAULT '0',
`heroic_str` SMALLINT(6) NOT NULL DEFAULT '0',
`heroic_int` SMALLINT(6) NOT NULL DEFAULT '0',
`heroic_wis` SMALLINT(6) NOT NULL DEFAULT '0',
`heroic_agi` SMALLINT(6) NOT NULL DEFAULT '0',
`heroic_dex` SMALLINT(6) NOT NULL DEFAULT '0',
`heroic_sta` SMALLINT(6) NOT NULL DEFAULT '0',
`heroic_cha` SMALLINT(6) NOT NULL DEFAULT '0',
`heroic_pr` SMALLINT(6) NOT NULL DEFAULT '0',
`heroic_dr` SMALLINT(6) NOT NULL DEFAULT '0',
`heroic_fr` SMALLINT(6) NOT NULL DEFAULT '0',
`heroic_cr` SMALLINT(6) NOT NULL DEFAULT '0',
`heroic_mr` SMALLINT(6) NOT NULL DEFAULT '0',
`heroic_svcorrup` SMALLINT(6) NOT NULL DEFAULT '0',
`healamt` SMALLINT(6) NOT NULL DEFAULT '0',
`spelldmg` SMALLINT(6) NOT NULL DEFAULT '0',
`clairvoyance` SMALLINT(6) NOT NULL DEFAULT '0',
`backstabdmg` SMALLINT(6) NOT NULL DEFAULT '0',
`created` VARCHAR(64) NOT NULL DEFAULT '',
`elitematerial` SMALLINT(6) NOT NULL DEFAULT '0',
`ldonsellbackrate` SMALLINT(6) NOT NULL DEFAULT '0',
`scriptfileid` SMALLINT(6) NOT NULL DEFAULT '0',
`expendablearrow` SMALLINT(6) NOT NULL DEFAULT '0',
`powersourcecapacity` SMALLINT(6) NOT NULL DEFAULT '0',
`bardeffect` SMALLINT(6) NOT NULL DEFAULT '0',
`bardeffecttype` SMALLINT(6) NOT NULL DEFAULT '0',
`bardlevel2` SMALLINT(6) NOT NULL DEFAULT '0',
`bardlevel` SMALLINT(6) NOT NULL DEFAULT '0',
`bardunk1` SMALLINT(6) NOT NULL DEFAULT '0',
`bardunk2` SMALLINT(6) NOT NULL DEFAULT '0',
`bardunk3` SMALLINT(6) NOT NULL DEFAULT '0',
`bardunk4` SMALLINT(6) NOT NULL DEFAULT '0',
`bardunk5` SMALLINT(6) NOT NULL DEFAULT '0',
`bardname` VARCHAR(64) NOT NULL DEFAULT '',
`bardunk7` SMALLINT(6) NOT NULL DEFAULT '0',
`UNK214` SMALLINT(6) NOT NULL DEFAULT '0',
`UNK219` INT(11) NOT NULL DEFAULT '0',
`UNK220` INT(11) NOT NULL DEFAULT '0',
`UNK221` INT(11) NOT NULL DEFAULT '0',
`UNK222` INT(11) NOT NULL DEFAULT '0',
`UNK223` INT(11) NOT NULL DEFAULT '0',
`UNK224` INT(11) NOT NULL DEFAULT '0',
`UNK225` INT(11) NOT NULL DEFAULT '0',
`UNK226` INT(11) NOT NULL DEFAULT '0',
`UNK227` INT(11) NOT NULL DEFAULT '0',
`UNK228` INT(11) NOT NULL DEFAULT '0',
`UNK229` INT(11) NOT NULL DEFAULT '0',
`UNK230` INT(11) NOT NULL DEFAULT '0',
`UNK231` INT(11) NOT NULL DEFAULT '0',
`UNK232` INT(11) NOT NULL DEFAULT '0',
`UNK233` INT(11) NOT NULL DEFAULT '0',
`UNK234` INT(11) NOT NULL DEFAULT '0',
`UNK235` INT(11) NOT NULL DEFAULT '0',
`UNK236` INT(11) NOT NULL DEFAULT '0',
`UNK237` INT(11) NOT NULL DEFAULT '0',
`UNK238` INT(11) NOT NULL DEFAULT '0',
`UNK239` INT(11) NOT NULL DEFAULT '0',
`UNK240` INT(11) NOT NULL DEFAULT '0',
`UNK241` INT(11) NOT NULL DEFAULT '0',
`UNK242` INT(11) NOT NULL DEFAULT '0'

    "id"    "minstatus" "Name"  "aagi"  "ac"    "accuracy"  "acha"  "adex"  "aint"  "artifactflag"  "asta"  "astr"  "attack"    "augrestrict"   "augslot1type"  "augslot1visible"   "augslot2type"  "augslot2visible"   "augslot3type"  "augslot3visible"   "augslot4type"  "augslot4visible"   "augslot5type"  "augslot5visible"   "augtype"   "avoidance" "awis"  "bagsize"   "bagslots"  "bagtype"   "bagwr" "banedmgamt"    "banedmgraceamt"    "banedmgbody"   "banedmgrace"   "bardtype"  "bardvalue" "book"  "casttime"  "casttime_" "charmfile" "charmfileid"   "classes"   "color" "combateffects" "extradmgskill" "extradmgamt"   "price" "cr"    "damage"    "damageshield"  "deity" "delay" "augdistiller"  "dotshielding"  "dr"    "clicktype" "clicklevel2"   "elemdmgtype"   "elemdmgamt"    "endur" "factionamt1"   "factionamt2"   "factionamt3"   "factionamt4"   "factionmod1"   "factionmod2"   "factionmod3"   "factionmod4"   "filename"  "focuseffect"   "fr"    "fvnodrop"  "haste" "clicklevel"    "hp"    "regen" "icon"  "idfile"    "itemclass" "itemtype"  "ldonprice" "ldontheme" "ldonsold"  "light" "lore"  "loregroup" "magic" "mana"  "manaregen" "enduranceregen"    "material"  "maxcharges"    "mr"    "nodrop"    "norent"    "pendingloreflag"   "pr"    "procrate"  "races" "range" "reclevel"  "recskill"  "reqlevel"  "sellrate"  "shielding" "size"  "skillmodtype"  "skillmodvalue" "slots" "clickeffect"   "spellshield"   "strikethrough" "stunresist"    "summonedflag"  "tradeskills"   "favor" "weight"    "UNK012"    "UNK013"    "benefitflag"   "UNK054"    "UNK059"    "booktype"  "recastdelay"   "recasttype"    "guildfavor"    "UNK123"    "UNK124"    "attuneable"    "nopet" "updated"   "comment"   "UNK127"    "pointtype" "potionbelt"    "potionbeltslots"   "stacksize" "notransfer"    "stackable" "UNK134"    "UNK137"    "proceffect"    "proctype"  "proclevel2"    "proclevel" "UNK142"    "worneffect"    "worntype"  "wornlevel2"    "wornlevel" "UNK147"    "focustype" "focuslevel2"   "focuslevel"    "UNK152"    "scrolleffect"  "scrolltype"    "scrolllevel2"  "scrolllevel"   "UNK157"    "serialized"    "verified"  "serialization" "source"    "UNK033"    "lorefile"  "UNK014"    "svcorruption"  "UNK038"    "UNK060"    "augslot1unk2"  "augslot2unk2"  "augslot3unk2"  "augslot4unk2"  "augslot5unk2"  "UNK120"    "UNK121"    "questitemflag" "UNK132"    "clickunk5" "clickunk6" "clickunk7" "procunk1"  "procunk2"  "procunk3"  "procunk4"  "procunk6"  "procunk7"  "wornunk1"  "wornunk2"  "wornunk3"  "wornunk4"  "wornunk5"  "wornunk6"  "wornunk7"  "focusunk1" "focusunk2" "focusunk3" "focusunk4" "focusunk5" "focusunk6" "focusunk7" "scrollunk1"    "scrollunk2"    "scrollunk3"    "scrollunk4"    "scrollunk5"    "scrollunk6"    "scrollunk7"    "UNK193"    "purity"    "evolvinglevel" "clickname" "procname"  "wornname"  "focusname" "scrollname"    "dsmitigation"  "heroic_str"    "heroic_int"    "heroic_wis"    "heroic_agi"    "heroic_dex"    "heroic_sta"    "heroic_cha"    "heroic_pr" "heroic_dr" "heroic_fr" "heroic_cr" "heroic_mr" "heroic_svcorrup"   "healamt"   "spelldmg"  "clairvoyance"  "backstabdmg"   "created"   "elitematerial" "ldonsellbackrate"  "scriptfileid"  "expendablearrow"   "powersourcecapacity"   "bardeffect"    "bardeffecttype"    "bardlevel2"    "bardlevel" "bardunk1"  "bardunk2"  "bardunk3"  "bardunk4"  "bardunk5"  "bardname"  "bardunk7"  "UNK214"    "UNK219"    "UNK220"    "UNK221"    "UNK222"    "UNK223"    "UNK224"    "UNK225"    "UNK226"    "UNK227"    "UNK228"    "UNK229"    "UNK230"    "UNK231"    "UNK232"    "UNK233"    "UNK234"    "UNK235"    "UNK236"    "UNK237"    "UNK238"    "UNK239"    "UNK240"    "UNK241"    "UNK242"
    "11538" "0" "Forest Loop"   "3" "2" "0" "0" "3" "0" "0" "0" "0" "0" "0" "7" "1" "0" "1" "0" "1" "0" "1" "0" "1" "0" "0" "3" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" ""  "0" "65535" "4278190080"    "0" "0" "0" "300000"    "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" ""  "-1"    "0" "0" "0" "0" "0" "0" "757"   "IT63"  "0" "29"    "0" "0" "0" "0" "Forest Loop"   "0" "1" "0" "0" "0" "0" "0" "0" "1" "1" "0" "0" "0" "65535" "0" "0" "0" "0" "5" "0" "0" "-1"    "0" "18"    "-1"    "0" "0" "0" "0" "0" "300"   "1" "0" "1" "0" "0" "0" "0" "0" "0" "300"   "0" "0" "0" "0" "2011-12-17 08:40:28"   ""  "0" "0" "0" "0" "1" "0" "0" ""  "0" "-1"    "0" "0" "0" "0" "-1"    "0" "0" "0" "0" "0" "0" "0" "0" "-1"    "0" "0" "0" "0" NULL    "2011-03-21 20:37:12"   NULL    "13THFLOOR" "0" ""  "0" "0" "0" "0" "0" "0" "0" "0" "0" "-1"    "0" "0" "0000000000000000000"   "0" ""  "-1"    "0" "0" "0" "0" ""  "-1"    "0" "0" "0" "0" "0" ""  "-1"    "0" "0" "0" "0" "0" ""  "-1"    "0" "0" "0" "0" "0" ""  "-1"    "0" "0" "0" ""  ""  ""  ""  ""  "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "2003-10-09 14:09:29"   "0" "70"    "0" "0" "0" "-1"    "0" "0" "0" "0" "0" "0" "0" "0" ""  "-1"    "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "-1"    "0" "-256"  "255"   "0" "0" "0" "0" "0" "0" "0" "0"
    "82746" "0" "Fabled Forest Loop"    "7" "10"    "0" "0" "7" "0" "0" "7" "0" "0" "0" "7" "1" "0" "1" "0" "1" "0" "1" "0" "1" "0" "0" "7" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" ""  "0" "65535" "4278190080"    "0" "0" "0" "0" "9" "0" "0" "0" "0" "0" "0" "9" "0" "0" "0" "0" "70"    "0" "0" "0" "0" "0" "0" "0" "0" ""  "-1"    "9" "0" "0" "0" "0" "0" "757"   "IT63"  "0" "29"    "0" "0" "0" "0" "Fabled Forest Loop"    "0" "1" "70"    "0" "0" "0" "0" "0" "0" "1" "0" "0" "0" "65535" "0" "0" "0" "50"    "5" "0" "0" "-1"    "0" "18"    "-1"    "0" "0" "0" "0" "0" "0" "1" "0" "1" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "2011-12-17 08:41:34"   ""  "0" "0" "0" "0" "1" "0" "0" ""  "0" "-1"    "0" "0" "0" "0" "-1"    "0" "0" "0" "0" "0" "0" "0" "0" "-1"    "0" "0" "0" "0" NULL    "2009-05-08 23:58:57"   NULL    "13THFLOOR" "0" ""  "1" "0" "0" "0" "0" "0" "0" "0" "0" "-1"    "0" "0" "0000000000000000000"   "0" ""  "-1"    "0" "0" "0" "0" ""  "-1"    "0" "0" "0" "0" "0" ""  "-1"    "0" "0" "0" "0" "0" ""  "-1"    "0" "0" "0" "0" "0" ""  "-1"    "0" "0" "0" ""  ""  ""  ""  ""  "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "2005-03-31 19:47:57"   "0" "70"    "0" "0" "0" "-1"    "0" "0" "0" "0" "0" "0" "0" "0" ""  "-1"    "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" "0" 
```

这些是我使用上述查询在 HP 列中完全相同的两个项目，我想让“项目”或条目相同，除了 ID 和名称，它们必须是唯一的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:00:08.603

You could do an UPDATE statement specifying two tables (even though it's the same table)

```
UPDATE 
    items a, 
    items b
SET 
    a.minstatus = b.minstatus,
    a.aagi = b.aagi,
    a.ac = b.ac,
    ...
    a.UNK242 = b.UNK242
WHERE 
    a.name = 'Fabled Hope Stone'
AND
    b.name = 'Hope Stone' 
```

Probably want to test on a scratch database, or put it in a transaction before running however.`

# javascript - 如何使用使用主干的 if 语句删除和添加视图

> ID：15778472
> 
> 赞同：1
> 
> 时间：2013-04-03T03:44:40.367
> 
> 标签：javascript, backbone.js

单击按钮后，我正在尝试删除旧的`carView`并添加下一个。`NEXT`

一切都来自 JSON 文件并且正在正确递增，但我想查看也可以更改。

这是我的观点的代码：

```
window.CarContainerView = Backbone.View.extend({
    el: $('#car-container'),
    template:_.template($('#tpl-car-container').html()),
    initialize:function () { 
        _.bindAll(this, 'clickNext');
        this.car_number = 0;
        this.car_model = this.model.get('carCollection').models[this.question_number];
        this.question_view = null;
    },
    render:function () {
        $(this.el).html(this.template()); 
        this.car_view = new CarView({el: $(this.el).find('#car'), model: this.car_model});
        this.question_view.render();
        $('#next').bind('click', this.clickNext);        
        return this;
    },
    createNewCar: function () {
        //build
        console.log('createNewCar');
        if(condition) {
            //if the next button is pressed, clear screen and add new screen
        }
    },
    clickNext: function () {
        this.car_number++;
        console.log(this.car_number);
        createNewCar();
    }, 
    clickPrevious: function () { 

    } 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:19:17.610

评论解释了这些变化。基本上，每次都创建一个新的 CarView。并且不要将其传递`el`给视图，否则当您调用[`remove`](http://backbonejs.org/#View-remove)该元素时，该元素将消失。`#car`相反，每次都渲染新视图。

```
window.CarContainerView = Backbone.View.extend({
    el: $('#car-container'),
    template:_.template($('#tpl-car-container').html()),
    // use events hash instead of directly using jquery.
    events: {
        'click #next': 'clickNext'
    },
    initialize:function () { 
        // no need to use bindAll since using events hash
        // binds the context of clickNext to this view already.
        this.car_number = 0;
    },
    render:function () {
        // use this.$el instead.
        this.$el.html(this.template()); 
        this.createNewCar();      
        return this;
    },
    createNewCar: function () {
        if(this.car_view){
            // cleanup old view.
            this.car_view.remove();
        }
        // do some bounds checking here, or in clickNext... or both!
        var car_model = this.model.get('carCollection').models[this.car_number];

        // create a new view for the new car.
        this.car_view = new CarView({model: car_model});

        // render into #car instead of passing `el` into the view.
        // let Backbone generate a div for the view, you dont need to 
        // set an `el` in the CarView either.
        this.$('#car').html(this.car_view.render().el);
    },
    clickNext: function () {
        this.car_number++;
        this.createNewCar();
    }, 
    clickPrevious: function () { 

    } 
}); 
```

# django - 我可以将 Django 模型函数用作管理员中的字段吗？

> ID：15778474
> 
> 赞同：0
> 
> 时间：2013-04-03T03:44:49.333
> 
> 标签：django, django-models, django-admin

我有一个返回数值的模型函数。我希望能够按该值进行过滤和排序。当我尝试将它添加到`list_filter`Django 时抱怨模型没有这样的字段。我可以告诉 Django 将其视为一个字段吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:48:54.473

您是否尝试将其用作类属性，尽管我没有尝试过？

```
class SomeModel(models.Model):
    @property
    def list_filter(self):
        """ Do your stuffs here """ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:51:26.490

您可以编写自定义过滤器并将其传递给`list_filter`：

```
from django.contrib.admin import SimpleListFilter

class CustomFilter(SimpleListFilter):
    # Human-readable title which will be displayed in the
    # right admin sidebar just above the filter options.
    title = _('active status')

    # Parameter for the filter that will be used in the URL query.
    parameter_name = 'status'

    def lookups(self, request, model_admin):
        if request.user.is_superuser:
            return (
                ('active', _('Active')),
                ('not_active', _('Not Active')),
            )

    def queryset(self, request, queryset):
        # do something here with queryset

class MyAdmin(admin.ModelAdmin):
    list_filter = (CustomFilter, 'other_model_field') 
```

请参阅[此处](https://docs.djangoproject.com/en/dev/ref/contrib/admin/)了解更多信息`ModelAdmin.list_filter`

# jsf - 如何在jsf bean和restful资源bean之间共享数据？

> ID：15778480
> 
> 赞同：1
> 
> 时间：2013-04-03T03:45:18.210
> 
> 标签：jsf, javabeans, resteasy, primepush

使用 JBoss 7.1.1.Final 并运行一个非常基本的 restful web 服务。我有一个运行节点 js http 客户端的 linux 梦想插件盒，该客户端连接到端口 8080 上的 Web 服务。它发送一个请求并从 Web 服务取回 JSON 数据就好了。我有一个非常简单的 jsf 页面，只有一个按钮，操作就可以说是 Xbean。然后 Xbean 对此操作向节点 js 应用程序发出一个 primepush 事件。然后 Node JS 应用程序获取此事件并执行一些后台进程以获取一些数据，然后使用 http get 请求将一些数据发送回某个预定义的 rest URL。所以我的浏览器当前位于我点击按钮的 jsf 页面上，我希望该页面显示从节点 js 应用程序返回的信息。该信息驻留在推送资源 bean 中，但不在用于在 jsf 上显示的 bean 中。我如何让 jsf 从 resteasy 资源中获取信息并将其显示在 jsf 页面中？我使用applicationscoped bean吗？谢谢

# ios - ios实现在Photos中定位的视频分享

> ID：15778481
> 
> 赞同：0
> 
> 时间：2013-04-03T03:45:18.993
> 
> 标签：ios

我`UIActivityViewController`用来实现电子邮件和消息。

```
NSArray *activityItems;
activityItems = @[[self.mURL path],self.mURL];
UIActivityViewController *activityController =
[[UIActivityViewController alloc] initWithActivityItems:activityItems
                                  applicationActivities:nil];

[self presentViewController:activityController
                   animated:YES completion:nil]; 
```

但是如何在 iOS6 上实现以下视图，尤其是**youtube**、**youku**和**土豆**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:24:55.793

您的应用必须提供一个自定义 UIActivity 来处理 URL 和文件路径。例如，请参阅我的书：[http ://www.aeth.com/iOSBook/ch26.html#_activity_view](http://www.apeth.com/iOSBook/ch26.html#_activity_view)

查看该部分的一半，我在其中创建了一个名为 Be Cool 的自定义活动。

您将实际使用 URL 做什么（即您将如何将此视频发送到 YouTube，或者您想要做什么）完全取决于您。

# git - 在 git 中创建一个零文件的新分支

> ID：15778482
> 
> 赞同：0
> 
> 时间：2013-04-03T03:45:21.617
> 
> 标签：git, github

我在 GitHub 中有一个存储库。我在本地做了很多更改，如果我现在推送它，我会遇到很多冲突。所以我决定创建一个新的分支，但我希望这个分支看起来像一个新的存储库，这样我在 git 中有两个不同的版本在两个不同的分支下。我怎么做？

需要一些指导......对不起，如果这是一个菜鸟问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T03:49:52.267

如果我正确理解了您的问题，我相信您正在寻找一个孤立分支，一个没有父分支的分支，并帮助您开始一组与任何其他提交无关的新提交。

从手册页[`git checkout`](https://www.kernel.org/pub/software/scm/git/docs/git-checkout.html)：

> - 孤儿
> 
> 创建一个新的孤立分支，命名为 ，开始于并切换到它。在这个新分支上进行的第一次提交将没有父母，它将成为与所有其他分支和提交完全断开的新历史的根。
> 
> 索引和工作树的调整就像您之前运行过“git checkout”一样。这允许您开始一个新的历史记录，该历史记录记录一组类似于通过轻松运行“git commit -a”来进行根提交的路径。
> 
> 当您想从提交中发布树而不暴露其完整历史时，这可能很有用。您可能希望这样做以发布一个项目的开源分支，该项目的当前树是“干净的”，但其完整历史记录包含专有或其他受累的代码位。
> 
> 如果您想开始一个断开的历史记录，记录一组与 完全不同的路径，那么您应该在创建孤立分支后立即通过运行“git rm -rf”清除索引和工作树。从工作树的顶层开始。之后，您将准备好准备新文件、重新填充工作树、从其他地方复制它们、提取 tarball 等。

这些是实现这一目标的步骤：

```
git checkout --orphan my-new-orphan-branch
git rm -rf .
< Create your new files here >
git add <FILE1> <FILE2> ...
git commit -m 'Initial commit'

# Push the changes into the remote named origin
git push origin my-new-orphan-branch 
```

# mysql - 在 MYSQL 中存储图片和个人资料图片？

> ID：15778486
> 
> 赞同：0
> 
> 时间：2013-04-03T03:46:47.077
> 
> 标签：mysql, database, photo

我正在尝试创建一个页面，其中用户有自己的照片，但也有他自己的个人资料照片。我将实际照片上传到文件服务器，然后将照片名称插入 MYSQL 数据库。所以到目前为止我的桌子是，

**相片**

-photo_id

-照片名称

-用户身份

那么如何将照片声明为个人资料照片？常用的方法是什么？我要创建一个不同的表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:54:34.173

根据同一个表中的其他照片，将个人资料照片文件名放在单独的表中或在表中为布尔 photo_type 创建另一列可能是有意义的。阅读[设计数据结构](http://en.wikipedia.org/wiki/Database_design)和[范式](http://en.wikipedia.org/wiki/Database_normalization)。

# embedded - ATmega16通过I2C访问RTC(DS1307)

> ID：15778487
> 
> 赞同：0
> 
> 时间：2013-04-03T03:46:46.870
> 
> 标签：embedded, microcontroller, i2c, avr-gcc, real-time-clock

我已经编写了一个代码来使用 ATmega16 通过 I2C 访问 RTC（DS1307），并且我正在使用编译器 AVR Studio 4。

代码如下： -

```
#include<avr/io.h>
#include<util/delay.h>
#define F_CPU 1000000UL

void rtc_init(void)
{
TWSR=0x00;
TWBR=0x47;
TWCR=0x04;

}

void rtc_start(void)
{
TWCR=(1<<TWEN)|(1<<TWSTA)|(1<<TWINT);

while(TWCR & (1<<TWINT)==0);

}

unsigned char rtc_read(void)
{
TWCR=(1<<TWINT)|(1<<TWEN);
while(!(TWCR & (1<<TWINT)));
return(TWDR);
}

void rtc_write(unsigned char data)
{
TWDR=data;// sending address
TWCR=(1<<TWINT)|(1<<TWEN);
while(TWCR & (1<<TWINT)==0);
}

void rtc_stop()
{
TWCR=(1<<TWINT)|(TWSTO)|(1<<TWEN);
while(TWCR & (1<<TWINT)==0);

}

main()
{
unsigned char sec,min,hr;
DDRA=0xFF;
DDRB=0xFF;

rtc_init();
_delay_ms(1000);

rtc_start();

rtc_write(0b11010000);   // 1101000=adress of ds1307 and bit 0= write   
rtc_write(0x00);  // pointing address location 00 i.e seconds
rtc_write(0x00);// set sec=0
rtc_write(0x00);// set min=0
rtc_write(0x00);// set hr=0

rtc_stop();

while(1)
{

rtc_start();
rtc_write(0b11010001);   // 1101000=adress of ds1307 and bit 1= read   
rtc_write(0x00);  // pointing address location 00 i.e seconds
sec=rtc_read();
rtc_stop();
PORTA=sec;
PORTB=0x01;
_delay_ms(5000);
rtc_start();
rtc_write(0b11010001);   // 1101000=adress of ds1307 and bit 1= read   
rtc_write(0x01);  // pointing address location 00 i.e seconds
min=rtc_read();
rtc_stop();
PORTA=min;
PORTB=0x02;
_delay_ms(5000);
rtc_start();
rtc_write(0b11010001);   // 1101000=adress of ds1307 and bit 1= read   

hr=rtc_read();
rtc_stop();
PORTA=hr;
PORTB=0b00000100;
_delay_ms(5000);
}
} 
```

我已经成功构建了上面的代码。当我在 PROTEUS 模拟器上运行此代码时，我没有得到任何输出，但在代码中轮询正常工作以应用延迟。

我想知道我在哪里做错了以及如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:30:29.167

我认为您没有正确生成启动条件等。从数据表（第 183 页）：

> TWI 传输的第一步是传输 START 条件。这是通过将特定值写入 TWCR 来完成的，指示 TWI 硬件发送 START 条件。稍后将描述要写入的值。但是，重要的是在写入的值中设置 TWINT 位。向 TWINT 写入 1 会清除该标志。只要 TWCR 中的 TWINT 位置位，TWI 就不会启动任何操作。应用程序清除 TWINT 后，TWI 将立即开始发送 START 条件。

数据表中有一个详细的 C 示例，如下所示：

```
TWCR = (1<<TWINT)|(1<<TWSTA)|(1<<TWEN)  //Send START condition
while (!(TWCR & (1<<TWINT)));           // Wait for TWINT Flag set. This indicates
                                        // that the START condition has been transmitted
if ((TWSR & 0xF8) != START)             // Check value of TWI Status Register. Mask
    ERROR();                            // prescaler bits. If status different from
                                        // START go to ERROR
TWDR = SLA_W;                           // Load SLA_W into TWDR Register. Clear
TWCR = (1<<TWINT) | (1<<TWEN);          // TWINT bit in TWCR to start transmission
                                        // of address
while (!(TWCR & (1<<TWINT)));           // Wait for TWINT Flag set. This indicates
                                        // that the SLA+W has been transmitted,
                                        // and ACK/NACK has been received.
if ((TWSR & 0xF8) != MT_SLA_ACK)        // Check value of TWI Status Register. Mask
    ERROR();                            // prescaler bits. If status different from
                                        // MT_SLA_ACK go to ERROR
TWDR = DATA;                            // Load DATA into TWDR Register. Clear
TWCR = (1<<TWINT) | (1<<TWEN);          // TWINT bit in TWCR to start transmission
                                        // of data
while (!(TWCR & (1<<TWINT)));           // Wait for TWINT Flag set. This indicates
                                        // that the DATA has been transmitted, and
                                        // ACK/NACK has been received.
if ((TWSR & 0xF8) != MT_DATA_ACK)       // Check value of TWI Status Register. Mask
    ERROR();                            // prescaler bits. If status different from
                                        // MT_DATA_ACK go to ERROR
TWCR = (1<<TWINT)|(1<<TWEN)|(1<<TWSTO); // Transmit STOP condition 
```

这与您的代码非常不同。我将从数据表中的示例开始，然后从那里开始。

# javascript - 如何检索 TinyMCE 的值

> ID：15778490
> 
> 赞同：0
> 
> 时间：2013-04-03T03:47:45.757
> 
> 标签：javascript, jquery, tinymce, return-value

我在'textarea'中遇到问题，我想取“TinyMCE”的值如何用jquery取“TinyMCE”的值

```
<td>
  <textarea id="body" name="body" rows="20" cols="50" class="mceEditor"><c:out value="${article.body}"/></textarea>
  <form:errors path="body" cssClass="fieldError"/>
</td> 
```

萤火虫后的这段代码

```
<table id="body_editor_tbl" class="mceLayout" cellspacing="0" cellpadding="0" style="width: 341px; height: 303px;">
  <tbody id="">
    <tr class="mceFirst">
    <tr class="mceLast">
    <td class="mceIframeContainer mceFirst mceLast">
      <iframe id="body_editor_ifr" frameborder="0" src="javascript:""" style="width: 100%; height: 257px;">
        <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
        <html>
          <head xmlns="http://www.w3.org/1999/xhtml">
          <body id="tinymce" class="mceContentBody " spellcheck="false" dir="ltr">
            <br mce_bogus="1">
          </body>
        </html>
      </iframe>
    </td>
  </tr>
</tbody>
</table> 
```

我如何检索 TinyMCE 的值，当 tinymce 没有价值时，karenasaya 想发出一条消息，如果没有价值将被忽略

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:32:26.347

这将为您提供 tinymce 编辑器的内容

```
$('#your_editor_id').tinymce().getContent()); 
```

# jquery - 如何像在 mashable.com 中一样计算来自 Facebook、Twitter、G+ 等的总份额

> ID：15778492
> 
> 赞同：0
> 
> 时间：2013-04-03T03:47:52.080
> 
> 标签：jquery, social-networking, share-button

有谁知道[http://mashable.com](http://mashable.com)是如何建立一个巧妙的社交小部件来计算来自不同社交网站的总分享数的吗？我只是想知道你是否可以通过 jQuery 来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T06:58:26.453

您还可以向每个 api 发出单独的请求（通过 PHP，因为 Google 和 Twitter 不允许跨域） - 创建一个包装类调用，这将计算您服务器上的单独计数。

类似的实现 (php) - [http://www.saladappstore.com/page/social-analytics](http://www.saladappstore.com/page/social-analytics)

使用 jQuery - [http://jsfiddle.net/sanchit_gupta/f9kqm/](http://jsfiddle.net/sanchit_gupta/f9kqm/)

```
(function() {

var url = "http://www.cnn.com";
$.getJSON('http://api.sharedcount.com/?url=' + url, function(data){
    $('body').append('<p></p>Google Plus ' + JSON.stringify(data['GooglePlusOne']));
    $('body').append('<p></p>Twitter ' + JSON.stringify(data['Twitter']));
    $('body').append('<p></p>Facebook ' + JSON.stringify(data['Facebook']['total_count']));
}); 
```

})();

# android - Android 显示带有图片且没有互联网连接的 html 文件

> ID：15778493
> 
> 赞同：0
> 
> 时间：2013-04-03T03:47:56.073
> 
> 标签：android, webserver

我想在 Android 平板电脑上加载一个 html 文件（带有图片和视频），但是，没有互联网连接，因此我不能使用 url 来获取图片和内容....

是否有任何免费的网络服务器允许我这样做（在本地主机上显示网络内容）？

或者有什么办法可以通过为它编写一个android应用程序来做到这一点？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:50:56.333

Webview 的 LoadURL 方法可以获取本地内容。使用`file`uri 从您的资产中检索内容并以这种方式呈现。假设您遵循基本 HTML 网站的标准文件夹结构。

如果您甚至没有互联网连接，为什么还要询问“免费网络服务器”......所有内容**都**必须在应用程序本地加载或即时下载（假设您也没有下载很多..如果它太多，那么你最好将它打包在应用程序中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:05:03.230

如果没有 Internet，您的 html 页面是静态页面。
您可以将 html 文件存储在本地资产文件夹中，然后：

```
url = "file:///android_asset/" + mName + ".html";    
mWebView.loadUrl(url); 
```

如果您还想在网页中显示图像，请将 html 页面源代码中图像的源路径更改为本地文件夹，并将所有图像粘贴到该文件夹​​中。

# .htaccess - htaccess 阻止文件但不是目录

> ID：15778495
> 
> 赞同：0
> 
> 时间：2013-04-03T03:48:12.203
> 
> 标签：.htaccess

由于 filesmatch 标志，我有一个 htaccess 问题，它阻止了我的目录。我试图阻止日志文件，但在我的网站上也维护一个博客。发生的情况是，如果人们访问 site.com/blog，他们会收到 403 错误，而 site.com/blog/ 工作正常。由于此错误，博客中的其他一些功能也会失败。
我想我不确定文件匹配是否正确/工作正常或如何解决这个问题。htaccess 文件从来都不是我的朋友：p

```
Options +SymLinksIfOwnerMatch

# Prevent Directoy listing 
Options -Indexes

# Prevent Direct Access to files
 <FilesMatch ".(tpl|log|ini)">
 Order allow,deny
 Deny from all
 </FilesMatch>

# SEO URL Settings
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^site.com [NC]
RewriteRule ^(.*)$ http://www.site.com/$1 [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:54:21.380

您需要`.`在`<FilesMatch>`容器中逃脱。它需要一个正则表达式，并且该`.`字符表示*“任何不是换行符的字符”*。

```
 <FilesMatch "\.(tpl|log|ini)">
   Order allow,deny
   Deny from all
 </FilesMatch> 
```

# java - 自定义java颜色创建器？

> ID：15778496
> 
> 赞同：0
> 
> 时间：2013-04-03T03:48:12.583
> 
> 标签：java, swing, colors

[API - Java.Color](http://docs.oracle.com/javase/6/docs/api/java/awt/Color.html)中只有几种标准颜色可用。我想要更多的颜色。我想使用一些 GUI 颜色生成器创建我的自定义颜色，然后获取代码并将其保存为自定义颜色，以便以后使用。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T03:51:55.237

看看[JColorChooser](http://docs.oracle.com/javase/7/docs/api/javax/swing/JColorChooser.html)。它使用户能够从调色板中进行选择。[在如何使用颜色选择器](http://docs.oracle.com/javase/tutorial/uiswing/components/colorchooser.html)中阅读更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T03:52:45.527

查看这个小程序，当我想为自定义颜色查找特定颜色代码时使用它

[http://www.javaview.de/vgp/tutor/color/PaColorDemo.html](http://www.javaview.de/vgp/tutor/color/PaColorDemo.html)

只需记下 RGB 值并使用这些值构建自定义颜色

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T04:03:26.377

转到[http://www.colorspire.com/rgb-color-wheel/](http://www.colorspire.com/rgb-color-wheel/)并选择您的颜色并在代码中创建具有 r、g、b 值的颜色对象。

# c# - 如何将新事件附加到 sitecore 发布按钮

> ID：15778499
> 
> 赞同：1
> 
> 时间：2013-04-03T03:48:26.943
> 
> 标签：c#, asp.net, tree, sitecore

发布项目后，我需要刷新我的站点核心树节点。在核心数据库中，当我们转到 sitecore/content/Applications/Content Editor/Ribbons/Chunks/Publish/Publish 项时，有一个名为“Click”的字段。item:publishnow 已经在那里了。我的问题是如何在此处添加我自己的活动。

![在此处输入图像描述](https://i.stack.imgur.com/u73NY.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:54:36.327

尽管正如 TwentyGotoTen 提到的那样，这个问题已经得到了回答，但还有更多信息：
如果您打开 Commands.config（位于 App_Config 文件夹中），您会`<command name="item:publishnow" type="Sitecore.Shell.Framework.Commands.PublishNow,Sitecore.Kernel" />`在某处看到或类似的东西。您可以创建自己的发布事件并替换`item:publishnow`命令，也可以使用可以在`<events>`web.config 的节点中定义的事件。那里应该有一个事件`publish:end`。如果您创建自己的事件，您可以在之后调用它`publish end`并让它重新加载您的项目。

正如另一个问题中提到的，John West 有一篇关于[在 Sitecore 中加载或重新加载项目](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/08/Load-or-Reload-an-Item-in-the-Sitecore-ASPNET-CMS.aspx)的精彩文章。
此外，John Wests 的另一篇文章是[关于 Sitecore 中的事件的全部内容](http://www.sitecore.net/unitedkingdom/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/05/All-About-Events-in-the-Sitecore-ASPNET-CMS.aspx)，如果您想创建自己的事件，这将是一本不错的读物。

# mysql - mysql正确索引位置和组

> ID：15778506
> 
> 赞同：0
> 
> 时间：2013-04-03T03:49:43.943
> 
> 标签：mysql, indexing, group-by, where

我有这样的桌子

```
tbl_reg_process
- id, bigint(20)
- x1, varchar(255) nullable
- x2, varchar(255) nullable
- x3, varchar(255) nullable
- date1, datetime, nullable 
```

这是解释查询：

```
EXPLAIN SELECT x1,COUNT(x1) FROM tbl_reg_process WHERE date1 >= '2013-04-01 00:00:00' AND x3='U' GROUP BY x1 
```

这是结果（未**使用索引**），我得到了超慢的响应

```
+----+-------------+-----------------+------+---------------+--------+---------+-------+--------+----------------------------------------------+
| id | select_type | table           | type | possible_keys | key    | key_len | ref   | rows   | Extra                                        |
+----+-------------+-----------------+------+---------------+--------+---------+-------+--------+----------------------------------------------+
|  1 | SIMPLE      | tbl_reg_process | ref  | x3,date1      | status | 768     | const | 585521 | Using where; Using temporary; Using filesort |
+----+-------------+-----------------+------+---------------+--------+---------+-------+--------+----------------------------------------------+ 
```

问题是，我应该创建什么索引，以便可以使用包括 date1、x3 和 x1 在内的 where 条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:06:57.863

如果`x1`and `x3`will 完全匹配，并且`date1`通常是不等式，则索引应该在`(x1, x3, date1)`或上`(x3, x1, date1)`。一般的想法是，WHERE 子句中的不等式应该使用索引中的最后一列。

# algorithm - 访问无向图中的边、顶点

> ID：15778519
> 
> 赞同：0
> 
> 时间：2013-04-03T03:50:57.043
> 
> 标签：algorithm, graph, graph-algorithm, depth-first-search

问题：您有一个无向图`G = (V, E)`（V = 顶点，E = 边），您必须访问每个顶点并在两个方向上通过每个边。

我所知道的关于图的唯一算法是 DFS、BFS 和一些 MST（Kruskal 等）。我和朋友正在讨论这个问题，如果它是直接的，我会简单地 DFS，然后 DFS 转置，但不幸的是，图表是无向的。我的朋友建议我们执行 MST 并对 MST 进行 DFS，然后通过迭代那些不在 MST 中的边来找到剩余的边。我有点明白他的意思，但我不确定这是一个好方法吗？意见？另外，如果它是无向的，我如何能够在两个方向上通过边缘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:16:44.013

图形是有向还是无向都没有关系。你可以用两条有向边替换每条无向边，并为有向图执行任何算法。DFS 和 BFS 都会遍历整个顶点和边。

我认为您正在寻找的是所谓的[Graph Traversal](http://en.wikipedia.org/wiki/Graph_traversal)。BFS 和 DFS 是两种图遍历算法，它们不需要图是有向的。另一方面，MST 不是图遍历算法。

# php - 获取 %'s 最常用的行值

> ID：15778525
> 
> 赞同：0
> 
> 时间：2013-04-03T03:51:40.263
> 
> 标签：php, mysql

我在我的网站上跟踪访问者国家/地区，并使用此 mysql 查询来获取顶级访问者国家/地区名称。

```
mysql_query("SELECT id,country, count(*) as num FROM track GROUP BY country ORDER BY count(*) desc limit 5") 
```

它完美地工作。但是，我想获得 %s 的国家/地区。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:58:13.697

你是说百分比吗？您可以在 MySQL 中执行一些基本的数值运算 - [http://dev.mysql.com/doc/refman/5.0/en/numeric-functions.html](http://dev.mysql.com/doc/refman/5.0/en/numeric-functions.html)

如果您希望在同一个查询中执行此操作，您可以添加另一个调用所有行的 COUNT() 的语句，然后使用除法运算符来获取百分比。您还可以将两者分开为不同的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:02:31.153

此联接将报告百分比：

```
select id, country, num, num*100/total pct
from (SELECT id,country, count(*) as num
      FROM track GROUP BY country
      ORDER BY num desc limit 5) x
join (select count(*) total from track) y 
```

# javascript - 为什么单个 var 在 javascript 中很好用？

> ID：15778527
> 
> 赞同：8
> 
> 时间：2013-04-03T03:51:52.017
> 
> 标签：javascript

谁能告诉我为什么对多个变量使用一个 var 声明并在换行符上声明每个变量认为是一种好的编程行为？

```
// bad
var items = getItems();
var goSportsTeam = true;
var dragonball = 'z';

// good
var items = getItems(),
    goSportsTeam = true,
    dragonball = 'z'; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T03:53:14.017

它不被认为是“好”或“坏”。这是一个偏好问题。

构建代码质量工具 JSLint 的人 Douglas Crockford 喜欢它。

它可能具有的一个“优势”是它避免了[可变提升](https://stackoverflow.com/questions/3725546/variable-hoisting)的可能性。在 JavaScript 中，所有`var`声明都会自动移到其作用域的顶部。

这就是 Crockford 认为第二种选择更好的原因：

> 在具有块范围的语言中，通常建议在第一次使用的地方声明变量。但是因为 JavaScript 没有块作用域，所以在函数顶部声明函数的所有变量更为明智。建议每个函数使用单个 var 语句。这可以使用 vars 选项来拒绝。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T03:55:55.197

这是一种偏好，我不会说好或坏。是的，JSLint 抱怨它，我真的不喜欢它抱怨`for`循环变量也是内联的。将其放入 JSLint 的原因是为了防止可能的提升混淆。

此外，在某些情况下，在顶部声明所有变量会导致文件稍小。考虑以下：

```
var a = 10;
a++;
var b = 20; 
```

在 Google Closure 运行之后

```
var a=10;a++;var b=20; 
```

与此相反，如果我们将`b`' 声明拉到顶部。

```
var a=10,b;a++;b=20; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:15:24.483

主要的好处（除了风格偏好，我猜）是它可以防止你编写遭受意外变量提升后果的代码。

举个例子：

```
var foo = function(){alert('foo');}
function bar(){
  foo();
  var foo = function(){alert('foobar')};
  foo();
}
bar(); 
```

通过阅读这段代码，的意图`bar`似乎如下：

1.  调用外部`foo`函数来提醒字符串`'foo'`。
2.  创建一个局部变量，`foo`.
3.  调用本地`foo`函数来提醒字符串`'foobar'`。

实际上，发生的事情是这样的：

1.  局部变量`foo`被提升到`bar`函数的顶部。
2.  `foo`现在实际上是指局部变量而不是同名的外部变量。但是由于尚未分配本地，因此其值未定义。因此，当你尝试调用时`foo`，你会得到一个 TypeError。
3.  没有。因为你抛出了一个错误。就是这样。你的代码坏了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-22T15:28:17.860

支持 Crockfords 偏好的论点已经充分提出并且是有效的。然而，我现在才刚刚开始回到第一种格式，因为我相信对于了解变量提升并且不太可能犯规的有经验的开发人员来说，我能想到两个优点：

1.  当新变量添加到定义列表中时，比较变得更容易。这意味着您在分析差异时可能会遇到更少的合并冲突（尽管它们可能要解决但很简单）和更少的认知负担。出于类似的原因，我也被转换为悬空逗号，这是我从没想过的 xD

2.  正如@ldsenow 所指出的，它可以使搜索变量定义更加简单。您将始终能够搜索`var <name>`并获得您想要的结果，除此之外别无其他。

# iphone - iOS - backbarButtonItem：取消返回？

> ID：15778531
> 
> 赞同：0
> 
> 时间：2013-04-03T03:52:05.853
> 
> 标签：iphone, ios

我在 ViewController2 中有一个 backbarButtonItem，当屏幕返回其父视图控制器 ViewController1 时，我想询问用户是否准备好返回。如果他还没有准备好，我想给他一个留在 ViewController 中的选项。所以问类似 - “你准备好离开这个屏幕了吗？ - 是或否”

我知道 backbarButtonItem 不能调用 Apple 文档中定义的“动作”。你有什么好的解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:59:56.840

我会将您自己的自定义 leftBarButtonItem 添加到导航项，并添加您想要的任何操作方法。它的外观与标准后退按钮不同，但我认为这是一件好事——用户希望标准按钮具有标准行为。使用常规的矩形按钮会提醒用户正在发生不同的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T05:26:38.393

在视图中的 didLoad 方法中写入：

```
 UIImage* myimage = [UIImage imageNamed:@"ButtonImage.png"];
    CGRect backFrame = CGRectMake(0, 0, 80, 30);
    backButton = [[UIButton alloc] initWithFrame:backFrame];
    [backButton setBackgroundImage:myimage forState:UIControlStateNormal];
    [backButton addTarget:self action:@selector(MyBtnclicked)
         forControlEvents:UIControlEventTouchUpInside];

    UIBarButtonItem *btn = [[UIBarButtonItem alloc]initWithCustomView:backButton];
    self.navigationItem.leftBarButtonItem = btn; 
```

然后编写ibaction如下

```
-(IBAction)MyBtnclicked
{
    UIAlertView *av=[[UIAlertView alloc] initWithTitle:nil message:@"Do you really want to Go back" delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes",nil]; 
    [av show];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T03:55:50.040

一种方法是对`UINavigationController`对象进行子类化并覆盖该`popViewController:animated:`方法。然后，您可以根据用户的响应来决定是否调用 super 的`popViewController:animated:`。

# java - 从数据库中获取状态

> ID：15778534
> 
> 赞同：1
> 
> 时间：2013-04-03T03:52:12.883
> 
> 标签：java, mysql

`id (PK)`我有一个包含、`tid (FK)`、`lid(FK)`和列的表`status (Varchar)`。每个`tid`都有几个`lid`，每个`lid`都有一个`status`：“完成”或“正在进行”。

我想获取每个 的状态`tid`，其中 a`tid`的状态是：如果所有状态`lid`为“完成”，`tid`则`tid`状态为“完成”，如果任何`lid`状态为“进行中”，则`tid`状态为“进行中”。

这是我到目前为止所做的：

```
st2=con.createStatement();
String QueryString2 = "SELECT status from lo_status where topic_id='"+topicid+"'";
rs2 = st2.executeQuery(QueryString2);
while (rs2.next()) {
    status=rs2.getString(1);
}

if(status == null){
    status="Pending";
}
else if(status.equals("Finished")){
    status="Finished";
}else{
    status="Ongoing";
} 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:01:08.590

Do something like the following.

```
SELECT count(rowid) total from lo_status where topic_id='"+topicid+"' and status="Finished"; 
```

If total = 0, the status is finished, else it is ongoing.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:05:03.500

You can try the Following Query.

```
Select  count(status) As total  from lo_status where topic_id='"+topicid+"' and status =ongoing";
if(total>0){
 status="OnGoing";
}else
{
 status="Finished";
} 
```

You can try it and If any query then asked.

# asp.net - 发送模型以供从布局链接的所有视图中使用

> ID：15778535
> 
> 赞同：1
> 
> 时间：2013-04-03T03:52:17.437
> 
> 标签：asp.net, asp.net-mvc-4, view, model, controller

我正在开发基于 ASP.NET MVC 4 构建的 Web 服务，并且在确定如何在登录后管理模型以使其可广泛用于后端创建的所有操作功能时遇到了一些麻烦。

例如）假设我已经构建了一个允许用户登录和管理多个数据库的服务。在他登录后，他被重定向到一个视图，该视图允许他选择他想要管理的数据库，该数据库继承了旧的布局。在他点击他想要管理的数据库后，这个数据库的模型被传递到管理控制器的索引视图中，该控制器使用了与以前不同的布局。所有管理操作链接都在布局中编码，但模型被传递到索引页面。他需要模型可用于管理控制器中的所有 ActionResult，但模型不能传递给布局，所以这就是我卡住的地方。

有没有人知道关于如何在整个布局中使用模型的任何好的参考或指南？或者这些线很长？我不确定我用来解决这个问题的技术是最好的，但我不知道该怎么做。如果有人知道更好的解决方法，请告诉我。

谢谢！

# php - 读取 Wordpress 数据库数据

> ID：15778538
> 
> 赞同：0
> 
> 时间：2013-04-03T03:52:28.480
> 
> 标签：php, wordpress

我不完全确定该怎么称呼它，而且我很难找到有用的结果。

我有一个用于联系表单的 wordpress 插件，可以像这样将数据输入数据库。

```
 a:37:{i:0;a:8:{s:2:"id";s:2:"20";s:4:"slug";s:11:"enfant-kind";
s:4:"name";s:13:"options_other";s:0:"";s:9:"parent_id";s:2:"21";s:5:"value";s:0:"";}} 
```

这只是其中的一部分，而且很长。我想知道如何使用 PHP 来分解表单字段和输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:54:57.273

[http://www.php.net/manual/en/function.unserialize.php](http://www.php.net/manual/en/function.unserialize.php)

那应该将该字符串变成一个对象。

$data = unserialize($raw_data_from_db);

对于轶事信息，a:37 表示长度为 37 个元素的数组，i:0 表示整数 0，s:'s 是字符串及其大小。还有两个字母，但只要您使用序列化和反序列化，就可以了。

# git - 如何为网站设置混合 (S)FTP + Git 工作流程

> ID：15778543
> 
> 赞同：5
> 
> 时间：2013-04-03T03:53:02.957
> 
> 标签：git, sftp, autocommit

我有很多虚拟主机网站，目前正在通过 chrooted SFTP 进行更新。更新由客户（通常使用 Dreamweaver 和 CuteFTP/Filezilla）和我公司的员工（通常使用 Eclipse Team Syncronisation 和 JCraft SFTP）完成。除非客户与我们同时编辑他们的网站，否则此设置可以正常工作。在这种情况下，我们必须不断同步以检查既慢又不可靠的变化。考虑到每个站点中的大量文件、缓慢的目录遍历和缺乏增量压缩，SFTP 传输也很慢。

我想转向（部分）Git 工作流程，主要是为了从增量压缩中受益，同时也引入一些基本的修订控制。我说“初级”是因为在将更改捆绑到 git 提交之前在本地开发和测试的典型 git 工作流程不适合我们的需求，因为：

*   为了方便或兼容，我们的一些客户**需要使用 SFTP，而不是 Git**
*   我不想强制使用特定的 SFTP 客户端（如 git-ftp）。我们的客户对自己的选择感到满意（例如 Dreamweaver 或 CuteFTP）。它们可能在任何操作系统上，并且不使用 shell。
*   **我们**的客户都不能在本地进行测试，每个小的更改都**必须**上传到网络服务器并立即“上线”（我们有测试站点，所以在这种情况下“上线”不一定意味着“生产”或“公开”）
*   大约 90% 的更改将是小的 1 行 CSS/HTML 更改，这使得提交消息非常耗时。
*   一些更改是通过 shell 或脚本直接在服务器 webroot 上完成的。

我想我想要的是远程 git repo 使用 webroot 作为工作目录，并自动提交在那里更改的任何文件，并带有一条通用消息，指示哪些文件已更改。但是，我一直在阅读，项目的主仓库不应该有工作目录（git init --bare），即使有，通常也不会提交在那里所做的更改。我不在乎此设置是否会丢失提交的所有权详细信息（因为它不知道谁更改了文件，我通常不在乎）。

失败了，我基本上想使用 Git 作为 Rsync-over-SSH 的替代品（Eclipse Team Sync 似乎不支持它）。任何暗示另一种技术的答案都需要支持 Eclipse（我选择的工具）和 Dreamweaver（我的客户选择的主要工具）。我意识到这并不理想，但没有商量余地。如果我可以强制使用 Git，我会的，这个问题将无关紧要。我必须与数百个客户打交道，主要是 Mac 上的图形设计师。

PS。我意识到当客户端没有足够定期地重新同步他们的本地文件时会出现问题。任何有关处理的建议将不胜感激。

任何人都可以提供有关此设置的指导（Centos 6.4 linux）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T19:43:58.320

**对于直接在服务器上（或通过 SFTP）进行的更改**：

看看[Gitwatch](https://github.com/n3v1k/gitwatch)，它是“用于监视文件或文件夹并将更改提交到 git 存储库的 bash 脚本”。它似乎正是您正在寻找的东西。

您可能希望您的 webroot 不是作为主要存储库，而是作为远程克隆存储库。在其他地方（如 github 或 bitbucket）设置您的主节点，将其克隆到网络服务器上。用于`gitwatch`监控更改、自动提交和推送到您的主/github 存储库。

使用 github/bitbucket 等单独的主存储库的一大好处是，您可以轻松查看/查看正在进行的更改，并根据需要自行在本地将其拉下，而无需直接访问网络服务器上的 git 存储库。

**对于通过 git 进行的更改**：

您是否还希望通过 git 进行更改并将它们自动拉到网络服务器上？从理论上讲，您可以在 git 中连接一个接收后挂钩来为您执行此操作。但是，如果同时直接在服务器上进行更改，则很容易发生合并冲突。

再三考虑，避免这种情况。坚持使用单向网络服务器 -> 本地提交 -> 推送到主 git 存储库。

*在此处插入免责声明，说明这不是 git 的正确用户、违反各种规则并违反最佳实践。您似乎已经很清楚这一点，所以我将跳过它。=)*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T21:25:23.923

对我来说，您应该设置一个持续集成工具，例如[Jenkins](http://jenkins-ci.org/)、[CruiseControl](http://cruisecontrol.sourceforge.net/)或[许多其他替代方案](http://en.wikipedia.org/wiki/Continuous_integration#Software)之一，配置为部署在 Web 服务器上。

你需要：

1.  每个网站的存储库，可通过 sftp 访问并观看**`gitwatch`以提交更改**（如[jszobody](https://stackoverflow.com/a/15855261/412808)建议的那样）和一个**用于拉/推/ask_for_help_via_email_to_a_developer_if_merge_fails****[的gitook](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)**
2.  一个“中央”存储库，开发人员和钩子将推送每个提交。
3.  您选择的 CI 工具，在中央存储库收到的每次推送时，都会唤醒并将更新的内容发送到网络服务器（sftp、直接 fs 访问……什么对您更好）。
4.  一个 Web 服务器，现在不需要通过 git 或通过 sftp 提供公共访问。

优点：

*   涵盖您的所有要求
*   不需要中央存储库中的工作目录
*   无需在网络服务器上打开更多端口（显然，http/https 除外）
*   无需在 Web 服务器上安装 git
*   无需使用存储库历史（包含在`.git/`文件夹中）重载 Web 服务器的文件系统
*   相当灵活
*   易于演变为功能齐全的 CI 解决方案（自动化测试、代码指标等）
*   处理不同步的客户端，因为钩子将无法合并，并且会警告开发人员

缺点：

*   复杂，因此设置成本高
*   您必须告知您的客户要使用的新 sftp 地址（除非您明智地使用了不同的子域并且您可以**等待**DNS 更新）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T20:15:23.740

我没有看到让一百个开发人员部署到单个 Web 服务器并尝试在那里跟踪他们的更改的意义，但是快速而肮脏的方法是使用 cron 作业`git add .`并将`git push --force`服务器克隆到其他地方的适当镜像您可以更好地管理合并并推回服务器克隆（应该在不同的分支上）。服务器克隆（对于那些不可见 git 的设计人员）从外观上看几乎总是很脏，因此您可能希望放宽 cron 间隔。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-12T13:15:09.963

也许在 dulwich 之上定制的东西会满足你的需要，某种基于 python 的网络服务器来管理 repos。[https://github.com/jelmer/dulwich](https://github.com/jelmer/dulwich)

# android - 集成 AdMob 时出现资源未找到异常

> ID：15778550
> 
> 赞同：1
> 
> 时间：2013-04-03T03:53:53.380
> 
> 标签：android, admob

安卓 2.3.3

我已按照[本](http://manijshrestha.wordpress.com/2011/07/27/integrating-admob-in-your-android-app-and-make-money/)教程中的步骤进行操作。当我在我的设备（移动设备）中运行该应用程序时，广告正在显示。这里没问题。但是当我尝试在我的 Eclipse 中查看活动时，我得到一个带有 NullPointerException 的空白屏幕。我已经截取了屏幕截图。请参考它。

![在此处输入图像描述](https://i.stack.imgur.com/ni9d9.jpg)

然后，我点击了异常的“详细信息”（SourceFile:670）中给出的链接，我得到了以下详细信息。

![在此处输入图像描述](https://i.stack.imgur.com/CnB4d.jpg)

我单击了添加源，并浏览到我的 application->libs 文件夹中的 jar 文件。然后我得到以下...

![在此处输入图像描述](https://i.stack.imgur.com/wzMxe.jpg)

这是我使用过的xml和java代码...

XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="140dp"
        android:background="#000000"
        android:orientation="vertical" >

        <com.google.ads.AdView android:id="@+id/adView"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         ads:adUnitId="a151xxxxxxxxx"
                         ads:adSize="BANNER"
                         ads:loadAdOnCreate="true"/>

        <TextView
            android:id="@+id/txtViewPrevious"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:gravity="right"
            android:height="25dp"
            android:singleLine="true"
            android:text=""
            android:textSize="16sp" />

.....
..... 
```

爪哇

```
private AdView adView;
adView = (AdView) findViewById(R.id.adView);
        AdRequest adRequest = new AdRequest();
        adView.loadAd(adRequest); 
```

库

![在此处输入图像描述](https://i.stack.imgur.com/UuY0p.jpg)

我如何摆脱这些异常？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:58:42.513

有时候是这样的。这是正常的。Eclipse 有时（实际上大部分时间）无法显示自定义视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T00:53:41.630

[下载](https://developers.google.com/mobile-ads-sdk/download)最新的 SDK。根据[发行说明](https://developers.google.com/mobile-ads-sdk/docs/rel-notes)，这已在 v6.3.0 中修复。

# javascript - 更改折线的颜色和宽度 - ESRI Javascript API

> ID：15778555
> 
> 赞同：1
> 
> 时间：2013-04-03T03:54:22.393
> 
> 标签：javascript, esri, polyline, arcgis-js-api

我有一张 ESRI 地图，上面有 11 条折线。我希望这样当用户将鼠标悬停在一条线上时，这条线会改变不同的颜色并改变为更大的宽度。当用户将鼠标移出线时，线将恢复到原来的颜色和宽度。所有这些行都在同一层上（var 到达）。

我有检测用户鼠标悬停或鼠标移出一行的代码：

```
dojo.connect(reaches, "onMouseOver", function(evt) 
{ });

dojo.connect(reaches, "onMouseOut", function() 
{ }); 
```

它们正确地检测鼠标何时越过一条线以及何时鼠标离开一条线。我拥有这两个功能的方式是，它们检测鼠标何时位于`reaches`图层中的任何一条线上。我希望该`onMouseOver`函数知道将鼠标悬停在哪条线上并更改线的颜色和宽度。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:20:15.770

> 我希望 onMouseOver 函数知道鼠标悬停在哪一行

`evt`为您的事件处理函数提供的参数应该有一个`.graphic`属性，其中包含您悬停的要素的几何形状。

> 并更改线条的颜色和宽度

您不能直接在要素上执行此操作而不使用其字段值，但您可以将新要素添加到`map.graphics`图层以用作突出显示的要素。[ESRI 的论坛](http://forums.esri.com/Thread.asp?c=158&f=2396&t=301591)上有一个很好的例子：

```
dojo.connect(pdaGraphicsLayer, "onMouseOver", function(evt) {
map.graphics.clear();
var highlightGraphic = new esri.Graphic(evt.graphic.geometry,highlightSymbol);
map.graphics.add(highlightGraphic);
}); 
```

# java - 使用另一个列表的选择侦听器清除 JList 不起作用

> ID：15778560
> 
> 赞同：0
> 
> 时间：2013-04-03T03:54:52.697
> 
> 标签：java, swing, user-interface, jlist, indexoutofboundsexception

我在三个单独的滚动窗格中有三个列表。当我从第一个到第三个选择项目时，代码应该用向量动态填充列表。

从理论上讲，代码使得如果我从列表 1 中选择一个项目，则列表 2 会被填充。如果选择列表 2 中的某些内容，则列表 3 将被填充。

该代码还应该可以从列表 1 中选择另一个项目，填充列表 2 中的另一组项目并将列表 3 留空。

这是代码：

```
list1 = new JList(vector1);
list2 = new Jlist(vector2);
list3 = new Jlist(vector3);
s1 = new JScrollPane(list1);
s2 = new JScrollPane(list2);
s3 = new JScrollPane(list3);
list1.addListSelectionListener(new OneListener());
list2.addListSelectionListener(new TwoListener());

//add panes to gui and start gui. Listeners are inner classes.

 public class OneListener implements ListSelectionListener
{
    public void valueChanged(ListSelectionEvent e)  
    {
        if(!e.getValueIsAdjusting())
        {
            //getting a vector from another class called return_value
                            vector2 = return_value;
                            vector3.removeAllElements();
            list2.setListData(vector2);
            list3.setListData(vector3);
            s2.repaint();
            s3.repaint();
        }
    }
}
public class TwoListener implements ListSelectionListener
{
    public void valueChanged(ListSelectionEvent e)  
    {  
        if(!e.getValueIsAdjusting())
        {
                            //geting a vector from another class named return_value
                            vector3 = return_value;
            list3.setListData(vector3);
            s3.repaint();
        }
    }
} 
```

在我尝试从 list1、list2 和 list 3 填充中选择另一个项目之前，一切正常。

OneListener 被解雇。

List2 更新得很好，但 List 3 保持不变，不会变成空白/清除列表。

一旦 TwoListener 被触发，list3 就会相应地更新。

此外，控制台会抛出以下内容

> 线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException：-1

这不是交易破坏者，因为该程序仍在运行。我想解决这个问题，以便实现在扩展和工作中幸存下来。

我尝试实现[this](http://www.coderanch.com/t/338860/GUI/java/Clearing-JList)和[this](https://stackoverflow.com/questions/4162078/java-swing-clear-jlist-without-triggering-listener)。他们没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:18:19.690

编辑 DefaultListModels 而不是包含列表的向量是要走的路。另外，一个小费。当您在选择某些内容时“清空”列表时会引发 Array 越界异常。将默认列表选择设置为 0 来处理它。

# c# - 反序列化混合内容的 JSON 数组

> ID：15778566
> 
> 赞同：1
> 
> 时间：2013-04-03T03:55:43.080
> 
> 标签：c#, json, silverlight

**Apolgies：我忘了提到这是针对 Silverlight 解决方案的。**

从服务返回的 JSON 字符串为：

```
{
   "710 HUVAL ST (N), LAFAYETTE LA":{
      "confidence":0.844,
      "fips_county":"22055",
      "country_code":"US",
      "country_code3":"USA",
      "latitude":30.234912,
      "street_address":"710 Huval St",
      "country_name":"United States",
      "longitude":-92.034597,
      "street_number":"710",
      "region":"LA",
      "street_name":"Huval St",
      "locality":"Lafayette"
   },
   "200 ASHLAND PARK, LAFAYETTE LA":{
      "confidence":0.844,
      "fips_county":"22055",
      "country_code":"US",
      "country_code3":"USA",
      "latitude":30.159882,
      "street_address":"200 Ashland Park Dr",
      "country_name":"United States",
      "longitude":-92.035342,
      "street_number":"200",
      "region":"LA",
      "street_name":"Ashland Park Dr",
      "locality":"Lafayette"
   }
} 
```

我正在尝试将其反序列化为 .NET 类。但是，我遇到了麻烦，因为数组中的每个对象（它可能非常大，我在上面的示例中只显示了两个）看起来与 .NET 中的 JSON 反序列化器是不同的对象类型。

使用 JSON 到 C# 之类的工具生成类将为每个数组对象创建一个类，这并不理想，因为结果因响应而异。

为了能够反序列化它，我终生无法找出要在 .NET 中生成的适当类。我对 JSON 服务没有任何控制权，我被卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:19:19.137

尝试使用[来自 nuget 的 JSON.NET 包](http://nuget.org/packages/Newtonsoft.Json)。该类`Newtonsoft.Json.Linq.JObject`将为您提供一个类似于`System.Xml.Linq.XElement`允许您解析 JSON 而无需将其反序列化为单个具体对象的接口。

# php - 当买家支付订阅费用时，notify_url 从不调用

> ID：15778567
> 
> 赞同：1
> 
> 时间：2013-04-03T03:55:43.580
> 
> 标签：php, paypal, sandbox, subscription, paypal-ipn

现在我正在尝试使用贝宝沙箱从我的网站制定订阅计划。我已经在企业帐户中设置了 notify_url 并打开了此功能。退货和取消退货正常工作。但是当用买家（个人）账户测试并同意订阅付款时，没有交易日志永远不会调用我的网站 notify_url。

我的问题与 [question] 类似：[notify_url is not reached or may be false response in sandbox paypal](https://stackoverflow.com/questions/13090099/notify-url-is-not-reached-or-may-be-false-response-in-sandbox-paypal)

感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T13:39:59.193

如果您在您的帐户中启用了 IPN，请登录该帐户并查看 IPN 历史记录。您应该能够从这里判断您的 IPN 是否正在发送，或者它们是否处于重试或失败状态。如果您在这里看到您的 IPN，您可以单击消息 ID，它会显示您的服务器正在返回的状态（如果它正在返回一个状态）。这可能有助于隔离问题的原因。此外，这里还有一些可能有助于解决 IPN 问题的基本故障排除步骤。

此外，如果您使用的是自定义脚本，请尝试使用[PayPal 的示例 IPN 脚本](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)之一。它们是非常基本的脚本，但它们是经过测试的工作示例。这有助于确定您的脚本或一般 IPN 是否存在问题。

**IPN 故障排除提示**

这些是使用 IPN 时影响开发人员的最常见问题。还记录了最常见的解决方案。希望这些信息可以帮助那里的人！

**无效的原因**

*   确保您回发所有变量/值。

要让 PayPal 返回 VERIFIED，您的 IPN 脚本需要回发所有最初发布给它的变量。换句话说，如果您的脚本只需要操作 1 或 2 个变量，那么仅将您的脚本所关注的变量/值发回 PayPal 是不够的。您的脚本应该发回最初从 PayPal 发布到它的所有内容。这是 PayPal 返回 VERIFIED 的唯一方式

*   确保您没有发回错误的 URL。

如果您在沙盒中进行测试，您需要确保您的脚本回传到 www.sandbox.paypal.com。如果您在实时站点上，则该脚本应发回 www.paypal.com。如果您在沙盒中进行测试并且您的脚本发布回实时站点（反之亦然），您将收到 INVALID

*   编码

PayPal 的 IPN 服务器期望您的脚本将 POST 回发布到它的所有变量，更重要的是，它们的编码方式与发送到您的脚本的方式相同。如果您的脚本无意中更改了字符的编码或将编码字符解释为另一个字符并返回，您可能会看到 INVALID。这可能偶尔发生并且往往会发生，例如，当收到付款并且买家的名称中可能有重音字符或订单是针对某些商品名称中包含非标准字符的商品时。这些实例很难排除故障，但在此处列出，因为当您期望 VERIFIED 时，它可能会导致 INVALID。当您看到某些 IPN 无效且所有其他 IPN 均已验证时，请查找此问题。

故障排除提示 - IPN 未发布！

*   接收帐户上的电子邮件地址。

确保您已确认收款帐户上的电子邮件地址。

*   访问日志

如果您觉得 IPN 没有发布到您的脚本，您可以通过检查服务器的访问日志来验证这一点。服务器访问日志将告诉您 PayPal 是否完全“命中您的脚本”。访问日志跟踪访问服务器的计算机的 IP 地址和/或主机名。您是否可以访问服务器的访问日志取决于服务器管理员。如果您不知道日志在哪里，请咨询他们。

*   错误日志 如果在运行脚本时发生错误，大多数脚本语言都会输出到错误日志。如果您在访问日志中看到 PayPal 正在发送 IPN，但您没有从脚本中看到预期的最终结果，那么您很可能在脚本中存在逻辑或语法错误。检查您的错误日志以进行验证。同样，如果您不知道如何或在何处检查这些日志，则需要咨询服务器管理员。

*   检查路径

一个容易犯的错误。在测试/使用 IPN 时，请始终确保脚本的路径正确，并且您会发现您没有收到 IPN 帖子。例如，避免使用“localhost”网址。由于这是后端服务器到服务器的通信，因此设置到 localhost 的路径将导致 IPN 尝试发布到自身而不是网络外部到您自己的服务器/脚本。

*   防火墙

IPN 是从 PayPal 发起的 HTTP POST。如果您的服务器上有防火墙，请确保您的防火墙没有阻止来自 PayPal 的帖子。

*   测试以确保您的脚本按预期工作。

如果您的脚本中有语法或逻辑错误，那么您很可能看不到正确的结果。测试脚本的一种简单方法是向脚本发送“虚拟”帖子，并在 PayPal 的响应无效时编写一些代码来“做某事”。本质上，如果您将验证来自 PayPal 的响应时要触发的代码复制到响应无效时运行的脚本部分，您可以向脚本发送虚拟帖子以查看您的代码是否有效。由于脚本的虚拟帖子将返回 INVALID（因为帖子不是来自 PayPal），这就是为什么要将代码添加到脚本的“if INVALID”部分的原因。

*   帖子到您的返回 URL（返回方法）

一些商家设置为希望将 IPN 数据发布到其按钮代码（返回）中的返回变量的值。这是 PayPal 付款后买家被定向到的 URL。要将 IPN 数据发布到您的返回 URL，您必须在按钮代码中将 rm 变量设置为等于“2”，否则您可能看不到任何 IPN 数据发布到您的返回 URL。有关更多信息，请参阅这篇文章。** 请注意，此信息是关于 IPN 数据可以通过返回传递以及它如何与您的返回 URL 一起使用（按钮代码变量“返回”）。如果您启用了启用 PDT 的自动返回，则此信息不适用于您，因为 PDT 是它自己的独立功能。有关 PDT 的更多信息，请参见此处。

**故障排除提示 - IPN 延迟**

在大多数情况下，当您的服务器对您的许多事务 IPN 没有响应 200ok 时，会导致 IPN 持续延迟。例如，当您的服务器没有回复 200ok 时，PayPal 会尝试重新发布数据。在大量转发未收到 200ok 的数据之后，您的 IPN 将被移动到较慢的循环服务器，因此会出现延迟。

首先检查您的 IPN 日志以了解 POST 的状态：

在您的帐户历史记录部分下，您应该有一个“IPN 历史记录”部分，您可以在其中查看过去 28 天的 IPNs，并且在某些情况下可以重新发送它们。如果您登录帐户时未显示此链接，请访问此处： [https ://www.paypal.com/us/cgi-bin/webscr?cmd=_display-ipns-history](https://www.paypal.com/us/cgi-bin/webscr?cmd=_display-ipns-history)

这些日志将有几个不同的状态：

Sent - 表示 PayPal 将消息发送到您的 IPN 侦听器 Failed - 表示 PayPal 未收到对原始 POST 尝试或重新 POST 消息的确认 (200ok) 排队 - 表示 PayPal 已准备好发送消息 Retrying -表示 PayPal 没有收到 200ok 并且消息被重新发送了 1 到 15 次，并且 PayPal 正在继续重新发送消息 Disabled - 表示由于 IPN/帐户已被禁用，因此不会重新发送消息

如果您看到 Failed 或 Retrying 这很可能是解决此问题的原因，您将需要查看您的服务器日志以确定为什么没有将 200ok 发送回 PayPal IPN。一旦确定并纠正了这一点，并且您的服务器以 200ok 响应，它会将这个百分比/计数从该限制中降低，并且它将开始从正常周期服务器发布 IPN。

如果没有失败，则可能是 PayPal 服务器本身出现延迟，在这种情况下，您需要创建一个到 PayPal Merchant Technical Services 的工单 paypal.com/mts 以供进一步审查。

Curl vs fsockopen：这通常是个人喜好，但在某些情况下，您要使用的主机提供商不支持其中一个，因此您可能需要在两者之间切换。以下是使用 fsockopen 的示例：

```
$header = "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Host: www.paypal.com\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n";
$header .= "Connection: Close\r\n\r\n";
$fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30); 
```

这是同样的事情，但使用 curl：

```
$url= 'https://www.sandbox.paypal.com/cgi-bin/webscr';

$curl_result=$curl_err='';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/x-www-form-urlencoded", "Content-Length: " . strlen($req)));
curl_setopt($ch, CURLOPT_HEADER , 0);   
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_TIMEOUT, 30);
$res = @curl_exec($ch);
$curl_err = curl_error($ch);
curl_close($ch); 
```

基本上，如果您在使用其中一种方法时遇到问题，并且您认为主机/服务器不支持一种方法，而不是简单地将您正在使用的一种方法替换为另一种方法。

**本地测试：**
这可能是生产和测试任何脚本中最重要的步骤之一。关于 IPN，这可用于将您需要的任何参数传递给您自己的脚本以测试语法以及该脚本将如何与预期的变量一起运行。所有这一切真正需要的是设置一个表单，其中包含对您自己的 IPN 处理程序的发布操作以及您要测试的变量/值的隐藏输入。

例如：

```
<form target="_new" method="post" action="https://www.YourDomain.com/Path/IPNhandler.php">
<input type="hidden"  name="SomePayPalVar" value="SomeValue1"/>
<input type="hidden"  name="SomeOtherPPVar" value="SomeValue2"/>

Than etc for all  other variables you want to test with.

</br>
<input  type="submit"/>
</form> 
```

正如 angelleye 的许多线程中所列出的，这里是一个链接，指向他设置的[本地测试的一个很好的示例。](http://www.usbswiper.com/blog/2008/12/29/how-to-test-paypal-instant-payment-notification-ipn/)

# java - 如何从 ContextListener 停止执行 Servlet WebApp？

> ID：15778571
> 
> 赞同：1
> 
> 时间：2013-04-03T03:55:52.720
> 
> 标签：java, tomcat, servlets

我有一个 Java Web 应用程序，它有非常严格的安全要求。在启动时，它会尝试配置 Web 容器以强制它使用 SSL 会话 ID 来建立 http 会话 ID。如果在此配置中失败，我希望应用程序停止并且不处理请求。我可以`System.exit()`像在下面的示例中那样使用，但我想知道是否有一种很好的方法可以在不杀死 JVM 的情况下做到这一点。安全管理员也可能妨碍`System.exit()`

我正在使用tomcat 7。

```
public class SessionTrackingModeListener implements ServletContextListener
{
    @Override
    public void contextInitialized(ServletContextEvent event)
    {
        try
        {
            ServletContext context = event.getServletContext();
            EnumSet<SessionTrackingMode> modes = EnumSet.of(SessionTrackingMode.SSL);
                context.setSessionTrackingModes(modes);
                    System.out.println("SSL based Session tracking enabled");
        } catch (Exception e)
        {
            System.err.println("Unable to setup SSL based session tracking");
            e.printStackTrace();
            System.exit(1);

           // Question How do I get the container to not start the app without using exit?
        }
    }

    @Override
    public void contextDestroyed(ServletContextEvent event)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:45:23.827

首先，我认为使用它不是一个好主意

```
System.exit(1) 
```

在 servlet 环境中，因为某些 web 容器可能使用安全管理器来防止您的 webapp 杀死整个服务器。

当您在 contextInitialized 函数中抛出运行时异常时，servlet 规范并不严格。根据我的经验，servlet 容器会中止 webapp 的启动，但它可能又取决于您的容器，因此您应该对其进行测试。如果您使用的是普通的旧 servlet，那么创建一个 ServletFilter 来检查安全约束是否正常或将请求重定向到错误页面可能是一个不错的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:47:08.697

您能否详细解释一下“希望应用程序停止而不处理请求”。您的意思是您的 Web 应用程序或 Web 容器。当容器中出现问题时，您是否想在 Web 应用程序上显示一些人类可读的消息给用户？ .当有异常时tomcat无法启动。你必须重新启动它。

# javascript - 防止 Node.js 中的 SQL 注入

> ID：15778572
> 
> 赞同：101
> 
> 时间：2013-04-03T03:55:53.810
> 
> 标签：javascript, mysql, node.js, sql-injection, node-mysql

是否有可能以与 PHP 具有防范它们的 Prepared Statements 相同的方式防止 Node.js 中的 SQL 注入（最好使用模块）。

如果是这样，怎么做？如果没有，**有哪些示例**可能会绕过我提供的代码（见下文）。

* * *

一些背景：

[我正在使用node-mysql](https://github.com/felixge/node-mysql)模块制作一个由 Node.js + MySql 组成的后端堆栈的 Web 应用程序。从可用性的角度来看，这个模块很棒，但是它还没有实现类似于 PHP 的[Prepared Statements](http://php.net/manual/en/pdo.prepared-statements.php)的东西（尽管我知道它在[todo](https://github.com/felixge/node-mysql#todo)上）。

据我了解，PHP 对预准备语句的实现等对防止 SQL 注入有[很大帮助。](https://stackoverflow.com/questions/5741187/sql-injection-that-gets-around-mysql-real-escape-string/12118602#12118602)不过，我担心我的 node.js 应用程序可能会受到类似的攻击，[即使默认提供了字符串转义](https://github.com/felixge/node-mysql#escaping-query-values)（如下面的代码片段所示）。

node-mysql 似乎是 node.js 最流行的 mysql 连接器，所以我想知道其他人可能会做什么（如果有的话）来解决这个问题 - 或者它是否甚至是 node.js 开始的问题（不知道这是怎么回事，因为涉及到用户/客户端输入）。

**我是否应该暂时切换到[node-mysql-native](https://github.com/sidorares/nodejs-mysql-native)，因为它确实提供了准备好的语句？**我对此犹豫不决，因为它似乎不像 node-mysql 那样活跃（尽管这可能只是意味着它已经完成）。

这是一段用户注册代码，它使用了[sanitizer](https://github.com/theSmaw/Caja-HTML-Sanitizer)模块，以及 node-mysql 准备好的语句式语法（正如我上面提到的，它会进行字符转义），分别防止跨站点脚本和 sql 注入：

```
// Prevent xss
var clean_user = sanitizer.sanitize(username);

// assume password is hashed already
var post = {Username: clean_user, Password: hash};

// This just uses connection.escape() underneath
var query = connection.query('INSERT INTO users SET ?', post,
   function(err, results)
   {
       // Can a Sql injection happen here?
   }); 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-03T04:24:19.267

该`node-mysql`库在您已经在使用时自动执行转义。见[https://github.com/felixge/node-mysql#escaping-query-values](https://github.com/felixge/node-mysql#escaping-query-values)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-03T05:50:24.907

该库在自述文件中有一个关于转义的[部分](https://github.com/felixge/node-mysql#escaping-query-values)。它是 Javascript-native，所以我不建议切换到[node-mysql-native](https://github.com/sidorares/nodejs-mysql-native)。该文档说明了这些转义准则：

**编辑：** [node-mysql-native](https://github.com/sidorares/nodejs-mysql-native)也是一个纯 Javascript 解决方案。

*   数字保持不变
*   布尔值转换为`true`/`false`字符串
*   日期对象转换为`YYYY-mm-dd HH:ii:ss`字符串
*   缓冲区被转换为十六进制字符串，例如`X'0fa5'`
*   字符串被安全转义
*   数组变成列表，例如`['a', 'b']`变成`'a', 'b'`
*   嵌套数组变成分组列表（用于批量插入），例如`[['a', 'b'], ['c', 'd']]`变成`('a', 'b'), ('c', 'd')`
*   对象变成`key = 'val'`对。嵌套对象被转换为字符串。
*   `undefined`/`null`转换为`NULL`
*   `NaN`/`Infinity`保持原样。MySQL 不支持这些，并且尝试将它们作为值插入将触发 MySQL 错误，直到它们实现支持。

这允许您执行以下操作：

```
var userId = 5;
var query = connection.query('SELECT * FROM users WHERE id = ?', [userId], function(err, results) {
  //query.sql returns SELECT * FROM users WHERE id = '5'
}); 
```

还有这个：

```
var post  = {id: 1, title: 'Hello MySQL'};
var query = connection.query('INSERT INTO posts SET ?', post, function(err, result) {
  //query.sql returns INSERT INTO posts SET `id` = 1, `title` = 'Hello MySQL'
}); 
```

除了这些函数，您还可以使用转义函数：

```
connection.escape(query);
mysql.escape(query); 
```

要转义查询标识符：

```
mysql.escapeId(identifier); 
```

作为对您对准备好的陈述的评论的回应：

> 从可用性的角度来看，这个模块很棒，但它还没有实现类似于 PHP 的 Prepared Statements 的东西。

准备好的语句在此连接器的[待办事项](https://github.com/felixge/node-mysql#todo)列表中，但此模块至少允许您指定与准备好的语句非常相似的自定义格式。这是自述文件中的一个示例：

```
connection.config.queryFormat = function (query, values) {
  if (!values) return query;
  return query.replace(/\:(\w+)/g, function (txt, key) {
    if (values.hasOwnProperty(key)) {
      return this.escape(values[key]);
    }
    return txt;
  }.bind(this));
}; 
```

这会更改连接的查询格式，因此您可以使用如下查询：

```
connection.query("UPDATE posts SET title = :title", { title: "Hello MySQL" });
//equivalent to
connection.query("UPDATE posts SET title = " + mysql.escape("Hello MySQL"); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-12-14T13:34:21.557

关于测试您正在使用的模块是否安全，您可以采取多种途径。我将讨论每种方法的优缺点，以便您做出更明智的决定。

目前，您正在使用的模块没有任何漏洞，但是，这通常会导致错误的安全感，因为目前很可能存在漏洞正在利用您正在使用的模块/软件包，而您不会在供应商应用修复程序/补丁之前收到问题警报。

1.  为了及时了解漏洞，您需要关注邮件列表、论坛、IRC 和其他与黑客相关的讨论。专业人士：您经常会在供应商收到警报或发布修复/补丁以修复对其软件的潜在攻击途径之前意识到库中的潜在问题。CON：这可能非常耗时且占用大量资源。如果您确实使用 RSS 提要、日志解析（IRC 聊天日志）和/或使用关键短语（在本例中为 node-mysql-native）和通知的网络**爬虫**程序，可以帮助减少花费在这些资源上的时间。

2.  创建一个 fuzzer，使用一个[fuzzer](https://www.owasp.org/index.php/Fuzzing)或其他漏洞框架，如[metasploit](http://www.metasploit.com)、[sqlMap](https://github.com/sqlmapproject/sqlmap)等来帮助测试供应商可能没有寻找的问题。PRO：这可以证明是确保您正在实施的模块/软件对于公众访问是安全的达到可接受水平的可靠方法。CON：这也变得耗时且昂贵。另一个问题将源于误报以及对存在问题但未被注意到的结果的未受过教育的审查。

真正的安全性和一般的应用程序安全性可能非常耗时且资源密集。管理人员将始终使用的一件事是确定执行上述两个选项的成本效益（人力、资源、时间、薪酬等）的公式。

无论如何，我意识到这不是可能一直希望的“是”或“否”答案，但我认为在他们对相关软件进行分析之前，任何人都不能给你这个答案。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-08-24T18:53:34.777

Mysql-native 已经过时，所以它变成[了 MySQL2](https://github.com/sidorares/node-mysql2)，这是一个在原始 MySQL 模块团队的帮助下创建的新模块。这个模块有更多的特性，我认为它有你想要的，因为它已经准备了语句（通过 using.execute()），就像在 PHP 中一样，以提高安全性。

它也非常活跃（最后一次更改是 2-1 天）我之前没有尝试过，但我认为这是你想要的，还有更多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-07T16:11:13.673

**防止 SQL 注入**

**SQL 注入**是一种常见的网络黑客技术，用于破坏或滥用您的数据库。为防止 SQL 注入，当查询值是用户提供的变量时，应使用转义值。

**使用 mysql.escape() 方法转义查询值：**

```
var adr = 'Mountain 21';
var sql = 'SELECT * FROM customers WHERE address = ' + mysql.escape(adr);
con.query(sql, function (err, result) {
  if (err) throw err;
  console.log(result);
}); 
```

**使用占位符转义查询值？方法：**

```
var adr = 'Mountain 21';
var sql = 'SELECT * FROM customers WHERE address = ?';
con.query(sql, [adr], function (err, result) {
  if (err) throw err;
  console.log(result);
}); 
```

[更多详情](https://www.w3schools.com/nodejs/nodejs_mysql_where.asp)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-06-15T22:59:28.313

最简单的方法是在导出到路由的自己的模块中处理所有数据库交互。如果您的路线没有数据库的上下文，那么 SQL 无论如何都无法触及它。

# nxbre - 将集合传递给 xbre 规则

> ID：15778574
> 
> 赞同：2
> 
> 时间：2013-04-03T03:55:58.073
> 
> 标签：nxbre

我有一个 .NET 对象，它是一个集合，例如一个`Employee`包含员工列表的对象。

我需要将其传递给规则引擎以在规则文件中进行循环。

你能帮我处理来自.NET的代码以及在`xbre`文件中循环吗？我已经成功传递了一个带有单条记录的对象。但是需要通过收集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:46:59.397

我建议您`EmployeeWrapper`使用标准方法将对象本身传递给 NxBRE：

```
bre.RuleContext.SetObject("EmployeeWrapper", employeeWrapper); 
```

然后反思性地提取员工列表：

```
<ObjectLookup id="Employees" objectId="EmployeeWrapper" member="Employees" /> 
```

*假设该`EmployeeWrapper`对象有一个名为的属性`Employees`，它返回员工的集合*。

然后使用一个`ForEach`块来迭代员工：

```
<ForEach id="Employee" valueId="Employees">
    ...
</ForEach> 
```

# php - html 编辑器，在 php echo 中为 html 代码着色

> ID：15778576
> 
> 赞同：0
> 
> 时间：2013-04-03T03:56:04.807
> 
> 标签：php, html, ide

当我们`echo`在 PHP 中使用时，引号内的代码是 HTML。

在我使用的一些 HTML 编辑器中，它们只是以一种颜色突出显示所有 HTML，因此有点混乱。

有没有可以在里面着色的IDE `echo`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:20:28.640

唯一真正让您感到困惑的是回显 HTML 是否有很多。你总是可以：

```
 echo {
 ?>
 HTML
 <?php
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:01:27.883

Do you mean the colouring for text inside " "? Try PHPStorm ([http://www.jetbrains.com/phpstorm/](http://www.jetbrains.com/phpstorm/)). They offer a 30 day free license to try out the product.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T03:58:52.303

I'm not fully confident I understand what you want, but I believe you're asking if a code editor can also do HTML syntax-highlighting for HTML that exists inside PHP's `echo/print` statements. Normally not, because most editors see these as `strings`. However, you can embed PHP into HTML and that usually works a lot better:

```
<h1><?php print $someVar ?></h1> 
```

If I misunderstood you, and you want syntax-highlighting for the web page...

There are plenty of javascript-based syntax-highlighters out there:

*   [Rainbow](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDUQFjAA&url=http%3A%2F%2Fcraig.is%2Fmaking%2Frainbows&ei=uKhbUcjiEYicjALK3YDwDg&usg=AFQjCNFM5mj9Y65PNInr-lNDMr2D4GYDgA&sig2=JWj1OqCjOk2I36YULtJGWA&bvm=bv.44697112,d.cGE)
*   [Prism](http://prismjs.com/)
*   [Sunlight](http://sunlightjs.com/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T04:19:36.783

尝试使用记事本++。它对许多脚本语言都很方便。这是下载链接[Notepad++ 下载链接](http://notepad-plus-plus.org/download/v6.3.2.html)。它也是免费的。我们将其用于 javascript 编辑。它也适用于php

# google-maps - 使用 Google Maps API 跟踪特定设备 GPS

> ID：15778578
> 
> 赞同：-1
> 
> 时间：2013-04-03T03:56:17.043
> 
> 标签：google-maps

我想创建一个网站，其中包含可以跟踪我手机位置的地图。我不是在这里询问细节。是否可以不在我的手机上创建自己的应用程序并使用 Google Maps API，或者我还需要更多？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:20:38.207

您需要两个应用程序：

*   监听电话并显示电话位置的服务器应用程序
*   手机上的一个应用程序，向服务器报告地理位置

两者都应该是相当微不足道的，但这确实意味着您必须将服务器应用程序托管在某个地方。你不能只是远程“调出”手机的位置——那将是一个巨大的安全漏洞。想象一下，如果一个跟踪者抓住了它......

# php - 返回 MySQL 中添加的最新行

> ID：15778580
> 
> 赞同：-2
> 
> 时间：2013-04-03T03:56:28.763
> 
> 标签：php, database, primary-key, mysql

我想知道代码会是什么样子进入一个表，然后在添加到表的最后一行中获取主键。

如果有帮助，您将如何处理我在表中没有数据库中行的时间戳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:06:13.863

纯MySQL解决方案：

```
SELECT LAST_INSERT_ID(); 
```

* * *

对于带有[pdo](/questions/tagged/pdo "显示标记为“pdo”的问题")方法的 PHP

```
$lastId = $con->lastInsertId(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:09:52.123

```
 $link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
    if (!$link) {
    die('Could not connect: ' . mysql_error());
    }
    mysql_select_db('mydb');
    mysql_query("INSERT INTO mytable (product) values ('kossu')");
    printf("Last inserted record has id %d\n", mysql_insert_id()); 
```

# php - php中构造函数和统一构造函数的区别

> ID：15778582
> 
> 赞同：2
> 
> 时间：2013-04-03T03:56:35.820
> 
> 标签：php

构造函数或统一构造函数有什么区别。我有一个类，它有一个构造函数和一个统一的构造函数。当我初始化类的对象时，统一的构造函数调用为什么不是普通的构造函数。

```
<?php 

class test {

    function __construct() {
       print "In BaseClass constructor\n";
    }

    function test() {
        echo 'Class loeaded';                   
    }
}

$obj = new test();

?> 
```

输出接口

在 BaseClass 构造函数中

PHP 版本 5.2.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:09:16.643

自 PHP 5 起，在类中声明构造方法的最佳方式是使用标准化的

```
__construct() 
```

所以如果你有

```
class myA {

  public function __construct() {
    echo "hello construct myA";
  }

  public function myA() {
    echo "hello basic way myA";
  }
}

$myA = new myA(); 
```

它会回响

```
hello construct myA 
```

因为`__constructor()`有优先权

但是，出于兼容性原因，如果没有`__construct()`方法，旧方法可能会起作用。和：

```
class myA {

  //public function __construct() {
  //  echo "hello construct A";
  //}

  public function myA() {
    echo "hello basic way myA";
  }
}

$myA = new myA(); 
```

会给你：

```
hello basic way myA 
```

在所有情况下，我建议您使用`__construct()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:00:51.827

旧的构造函数（具有类名的方法）仅出于兼容性原因而存在。因此，如果您在类 php 中有新的构造函数（__construct），就不会费心去调用旧的构造函数。

## 编辑

有趣的是，`parent::__construct`当被扩展的类只有旧的构造函数类型时调用仍然有效（它就像真正构造函数的别名）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T04:01:53.400

具有构造函数方法的类在每个新创建的对象上调用此方法，因此它适用于对象在使用之前可能需要的任何初始化。

阅读构造函数的文档（[链接](http://php.net/manual/en/language.oop5.decon.php)）

* * *

类的实例是使用 new 关键字创建的。在 new 调用期间发生的情况是，为一个新对象分配了它自己在您请求的类中定义的属性的副本，然后调用该对象的构造函数，以防定义了一个。构造函数是一个名为 的方法`__construct()`，在创建对象后由 new 关键字自动调用。它通常用于自动执行各种初始化，例如属性初始化。构造函数也可以接受参数，在这种情况下，当编写 new 语句时，您还需要向构造函数发送括号之间的函数参数。

在 PHP 4 中`__construct()`，您必须使用类的名称定义一个方法，而不是用作构造函数的名称，例如 C++。这仍然适用于 PHP 5，但您应该为新应用程序使用新的统一构造函数命名约定。

在下面的类示例中，我们可以在新行中传递人的姓名：

```
class Person {

function __construct($name)

{

$this->name = $name;

}

function getName()

{

return $this->name;

}

private $name;

};

$judy = new Person("Judy") . "\n";

$joe = new Person("Joe") . "\n";

print $judy->getName();

print $joe->getName(); 
```

*提示：因为构造函数不能返回值，所以在构造函数中引发错误的最常见做法是抛出异常。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T04:02:16.743

根据[文档](http://php.net/manual/en/language.oop5.decon.php)从 PHP 5.3.3 开始，与类同名的方法将不再被视为构造函数.. 它们就像常规方法...

```
 <?php

 class myclass 
  {
     public function myclass() 
    {
    // treated as constructor in PHP 5.3.0-5.3.2
    // treated as regular method as of PHP 5.3.3
    }
   }
     ?> 
```

`

为了向后兼容，如果 PHP 5 找不到给定类的 __construct() 函数，并且该类没有从父类继承一个，它将按类的名称搜索旧式构造函数。

这意味着如果你有构造函数 myclass() 和 __construct .. 那么 __construct 将首先被搜索并作为构造函数而不是 myclass()

```
 class myclass 
          {
             public function myclass() 
            {
               echo 'hello';
            }

            function __construct() {
               print "new constructor"
           }

           }
     $obj = new myclass();  // will echo new constructor 
```

# java - 在Java中将字符串拆分为多个部分的安全方法是什么？

> ID：15778587
> 
> 赞同：0
> 
> 时间：2013-04-03T03:57:13.720
> 
> 标签：java, string, split, readline

让我澄清一下我要问的问题。我有一个我正在开发的 java 程序，它通过一个名为 JLine2 的 readline 库从键盘获取输入。该库将整个行类型作为命令，而不是将其分解为空格分隔的命令和参数。我正在寻找的是一种安全的方法来分解作为输入传递的字符串。

我尝试过使用数组，但由于我处于概念的早期阶段，我还不知道我的最大命令将有多少个参数，因此使用预初始化的数组我认为不会起作用。我遇到的问题是当我检查数组中的空值或检查是否存在特定命令或参数时。Java 不断抛出关于数组索引超出范围之类的异常。因为数组实际上没有数组索引 1 的值，它是数组索引 0 中命令的参数。

所以我正在寻找一种方法来获取一个字符串并安全地将其拆分为多个部分，而不会在发生数组异常时让 Java 对我大喊大叫。

这是我可以提供的非常苗条的代码...

**ConfigShell.class**

```
package shell; 

import java.io.IOException;

import configFS.ConfigFS;
import jline.console.ConsoleReader;

public class ConfigShell {

    private ConfigFS config;

    public ConfigShell() throws IOException {

        config = new ConfigFS();

    }

    public void init() throws IOException {

        ConsoleReader console = new ConsoleReader();

        // When the program starts we want to be placed at / (root).
        console.setPrompt(">> ");

        // In this case an infinite loop is better than a loop based on whether line is equal to null.
        // This allows line to be equal to null and still stay inside the shell.
        while (true) {

            String line = console.readLine();

            if (line != null) {

                // If pre-initialize the array I can check for null as a value for an array index.
                // If I did this at time I needed the array and there were not enough index occupied the system would return an exception.
                String[] cmdArgs = new String[4];

                // We need to split up the incoming line because JLine2 does not do it for me.
                // This allows me to evaluate the entire command piece by piece rather all at once.
                cmdArgs = line.split("\\s+");

                if (cmdArgs[0] != null && cmdArgs[0].equals("add")) {

                    if (cmdArgs[1] != null && cmdArgs[1].equals("server")) {

                        if (cmdArgs[2] != null) {

                            config.addServer(cmdArgs[2]);
                            System.out.println("Added server " + cmdArgs[2] + " to the configuration successfully.");

                        }

                    }

                }

                if (cmdArgs[0].equals("exit")) {

                    System.exit(0);

                }

            }

        }

    }

} 
```

**测试注意事项：我的 Start.class 主方法调用了上述文件中的 init 方法。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:18:04.640

你可以做：

```
 String cmdArgs = line.split("\\s+"); 
```

然后，在访问任何特定索引之前，请检查数组的*大小*，以免出现 ArrayIndexOutOfBoundException

像这样的东西：

```
if(cmdArgs.length>=2){
//It means you have at least 2 elements
//Now its safe to access cmdArgs[0] and cmdArgs[1]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:22:01.323

如果您的所有问题是存储可变数量的字符串，您可以使用`ArrayList<String>`object.

你声明它像`ArrayList<String> as = new ArrayList<String>();`

然后，当您从命令字符串中拆分某些内容时，您只需使用`add`方法： `as.add(yourString);`

如果您需要检索 ArrayList 的特定元素，可以使用它的`get`方法： `as.get(0);`

`for each`您可以使用循环处理所有元素：

```
for(String str: as) {
println(str):
} 
```

看看这里的[信息](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)和这里[的例子](http://www.javaprogrammingforums.com/java-se-api-tutorials/471-how-use-arraylist-what-its-advantage-over-array.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:28:20.127

我认为您可以根据需要使用`StringTokenizer`类及其方法。

请参阅下面的示例代码：

```
 if(line!=null)
    {
     StringTokenizer st=new StringTokenizer(line);// by default it takes space as delimiter....you can use as required as second argument in constructor...
     while(st.hasMoreTokens())
     {
      String token1=st.nextToken();
     // do your stuffs here..........
     // I don't know exactly about your required logic here......

   /* if(token1.equals("add"))
      {
         String token2=st.nextToken();
         if(token2.equals("server"))
         {
           String token3=st.nextToken();
             config.addServer(token3);
             System.out.println("Added server " + token3 + " to the configuration successfully.");
         }
       }
     */
    }// while closing...
   }// outer if closing... 
```

或者正如 PM 77-1 所说，您可以使用 ArrayList。但我认为 LinkedList 应该是一个更好的选择。

# jquery - 在 jvectormap 中设置单个区域的样式

> ID：15778588
> 
> 赞同：5
> 
> 时间：2013-04-03T03:57:27.440
> 
> 标签：jquery, svg, maps, region, jvectormap

所以，

我有一个自定义的 jVectorMap，我已经成功地使用 jVectorMap API 中的代码更改了区域的颜色：

```
regionStyle: {
      initial: {
      fill: '#5e7073',
      "fill-opacity": 1,
      stroke: 'none',
      "stroke-width": 0,
      "stroke-opacity": 1
      },
      hover: {
      fill: 'black'
      }, 
```

但我试图单独控制地图每个区域的填充/悬停*属性*。有没有人这样做或知道如何实现它？我查看了 jVectorMap API，但无济于事。

马卡

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T12:37:47.110

首先，您需要知道要更改的区域的代码。您可以从您正在使用的地图文件中获取这些信息。以下示例适用于美国地图。

要更改填充，您可以在创建地图时自定义区域：

```
regionStyle: {
    //...
},
series: {
    regions: [{
        values: {
            'US-CA': '#3e9d01',
            'US-WA': '#4b93c1',
            'US-TX': '#c1a14b'
        },
        attribute: 'fill'
    }]
} 
```

或者您可以即时自定义它们（并且不需要上面的“值”参数）：

```
$(function(){
    var map = $('#map').vectorMap('get', 'mapObject');
    map.series.regions[0].setValues({
        'US-CA': '#3e9d01'
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:19:57.810

我在 jquery-jvectormap-1.1.1.js 中放了一个自定义方法

[检查http://pastebin.com/MSt94XuH](http://pastebin.com/MSt94XuH)中的所有脚本

```
setSelectedRegionStyle : function (r,c) {
return this.regions[r].element.style.selected.fill = c;
}, 
```

您需要参考地图：

```
map = $("#world-map-gdp").vectorMap('get', 'mapObject'); 
```

并为每个国家/地区设置自定义样式：

```
map.setSelectedRegionStyle('IT', '#b2c9cb');
map.setSelectedRegionStyle('AT', '#b2c9cb');
map.setSelectedRegionStyle('BE', '#b2c9cb'); 
```

如果您需要清除所有样式，请使用：

```
map.clearSelectedRegions(); 
```

# c# - Windows 8 App - Creating and sending XML to a remote server within an App

> ID：15778589
> 
> 赞同：0
> 
> 时间：2013-04-03T03:57:29.020
> 
> 标签：c#, web-services, sqlite, windows-runtime, xml-serialization

I have a Windows 8 App that uses a SQLite database and I'm trying to backup an entire table on a remote server (SQLServer, but not Windows Azure). What are the best practices for accomplishing this?

Ideally, I was thinking that I could create an XML stream in the App and post to a page that I created that would parse the XML and then insert the rows into our SQLServer db...but it seems that all of the examples of XML for Windows 8 only deal with *receiving* XML...not creating and posting XML.

(a) is there a better way to accomplish this?

(b) if not, is there a good example of an XML post that you can point me to?

(c) I can do JSON as well if that's an alternative.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:24:58.367

同步是更好的做法，而不是备份。我建议阅读这篇博文。

[使用 Sync Framework Toolkit 同步 WinRT/SQLite](http://jtabadero.wordpress.com/2013/01/09/synchronizing-winrtsqlite-using-sync-framework-toolkit/)（带有示例应用程序）

# iphone - 使图像适合 UINavigationBar 栏

> ID：15778591
> 
> 赞同：1
> 
> 时间：2013-04-03T03:57:40.210
> 
> 标签：iphone, ios, objective-c, xcode, cocoa

我得到了想在导航控制器中使用的这张图片：

![在此处输入图像描述](https://i.stack.imgur.com/0bKFK.png)

我是这样设置的（根据[这个](https://stackoverflow.com/questions/11401768/iphone-setting-background-image-in-navigationbar-is-not-fitting)问题的建议）：

```
UINavigationBar *theBar = self.navigationController.navigationBar;
if ( [theBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)] ) {
    UIImage *image = [UIImage imageNamed:@"cabecalho.jpg"];
    [theBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];
} 
```

但是当我运行我的应用程序时，我得到了这个：

![在此处输入图像描述](https://i.stack.imgur.com/1GMW3.png)

我该怎么做才能使我的图像适合导航控制器？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:10:35.727

尝试使用以下代码

```
[self.navigationBar setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"myImage.png"]]]; 
```

请参阅[如何在 iphone 导航栏上添加背景图像？](https://stackoverflow.com/questions/1692487/how-to-add-background-image-on-iphone-navigation-bar)这个问题可能对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:26:48.440

[我在this](https://stackoverflow.com/questions/1692487/how-to-add-background-image-on-iphone-navigation-bar) question的示例之后找到了解决方案。

当我创建我的 UINavigationController 时，我这样做：

```
UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:viewLista];

if ([nav.navigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)] ) {
    UIImage *image = [UIImage imageNamed:@"cabecalho.png"];
    [nav.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];
} 
```

# wxpython - wxPython CSheet 问题和替换

> ID：15778593
> 
> 赞同：0
> 
> 时间：2013-04-03T03:57:46.763
> 
> 标签：wxpython

我想将电子表格功能添加到我在 Windows 上运行的 wxpython 应用程序中。CSheet 模块在最新的 2.9 版本中似乎损坏了。它显示：TypeError: EndEdit() 正好需要 4 个参数（给定 5 个）

我可以知道是否有任何建议来修复它或任何其他具有良好电子表格功能的 python 模块？我尝试了一些，但大多数都建立在 CSheet 之上。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:21:29.953

CSheet 似乎只是 Grid 的子类，因此您可能只使用 Grid 小部件。或者您可以访问 wxPython 网站上的错误跟踪器并将其作为错误提交。他们通常很快就会修补东西，尤其是在 2.9 分支中。

# c# - How to optimize Performance Remote Desktop C#

> ID：15778596
> 
> 赞同：3
> 
> 时间：2013-04-03T03:57:58.820
> 
> 标签：c#, windows, remote-desktop, rdp

I'm building a **C#** program like Windows Remote Desktop Connection.

I use Microsft RDP Client Control - version 8 to do that

There are some features I don't know how to do.

*   Disable (Enable) Desktop Backround
*   Font Smoothing
*   Visual style

I've found most of features at **AdvancedSettings** -> **AdvancedSettings8**. But I can't find these features there.

Can anybody help me?

# asp.net-mvc - 淘汰赛日期在发布到 mvc 控制器时被重置

> ID：15778599
> 
> 赞同：3
> 
> 时间：2013-04-03T03:58:23.210
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3, datetime, knockout.js

我有一个淘汰赛/mvc3 应用程序。我将日期传递回控制器。

**控制器**

```
public ActionResult PackageUpdate(Package updatePackage){
\\do some stuff but dates are set to zero?
} 
```

**查看模型和保存方法**

```
var Package = function (data) {
    self = this;
    self = ko.mapping.fromJS(data);
    self.save = function(){
        $.ajax({
            url: '/MediaSchedule/PackageUpdate', 
            data:ko.toJSON({ updatePackage: self })
        }).success(function (results) {
            console.log(results);
        }).error(function (er) { 
            console.error('Ah damn you broke it.')
            console.log(er);
        });
    }
    return self;
} 
```

**Json 被通过**。

```
{"updatePackage":{"Id":"82e3bc7e-27b8-49c2-b1fa-1ee2ebffbe66","Name":"28a38","SecondaryName":"è€å­æˆ‘è¦é’±","IsLocked":true},"DateCreated":"/Date(1357650000000+1100)/","DateStart":"/Date(1365080400000+1100)/","DateEnd":"/Date(1365516000000+1000)/"} 
```

ID、姓名和其他属性正在通过，但日期正在重置为 {1/1/0001 12:00:00 AM}。我的假设是因为它没有被反序列化，它正在设置一个最小日期。问题：如何正确反序列化我的日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:01:21.620

我认为问题在于您如何获得这些日期。您展示了一个使用 MS 日期格式的示例，例如`/Date(1357650000000+1100)/`它不是标准化的，并且正在慢慢被弃用以支持 ISO8601，它看起来像`2013-01-08T13:00:00.000+11:00`.

实际上，当您`JSON.stringify`使用 javascript`Date`对象时，它使用 ISO8601 格式。这也发生在`ko.mapping.toJSON`.

这个问题有几种解决方案，客户端和服务器端。[这篇文章](https://stackoverflow.com/q/726334/634824)详细描述了这个问题，并有一些很好的答案可以帮助你。

恕我直言，最好的解决方案是让您的 MVC 控制器发出和使用 ISO8601，而不是旧的 Microsoft 日期格式。最简单的方法是使用[Json.Net 库](http://json.codeplex.com/) [，它现在具有 ISO8601 作为默认值](http://james.newtonking.com/projects/json/help/index.html?topic=html/DatesInJSON.htm)，因此您甚至不需要自定义它。在客户端，您可能还想查看[Moment.js](http://momentjs.com/) - 它可以轻松解析和格式化 ISO 日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:29:07.213

我认为它只是你推送给你 updatePackage 对象的数据类型。以下是我的代码并且运行良好，我使用从 jQuery Datepicker 读取日期并使用格式为“dd MM，yy”（2013 年 1 月 1 日）

```
 var iEndInsuredDate = $('#dpkEndInsuredDate').val();
            var iEndPolicyDate = $('#dpkEndPolicyDate').val();

            $.ajax({
                url: '@Url.Action("DeleteClientMember", "ClientMember")',
                type: "POST",
                dataType: "json",
                data: { clientMemberID: id, endInsuredDate: iEndInsuredDate, endPolicyDate: iEndPolicyDate },
                success: function (result) {
                    ShowWaiting("Reloading...");
                    Search(1);
                }
            }); 
```

和我的 ActionResult

```
public ActionResult DeleteClientMember(int clientMemberID, DateTime? endInsuredDate, DateTime? endPolicyDate)
    {
        ClientMember model = clientMemberService.GetById(clientMemberID);

        //model.EndPolicyDate = endPolicyDate;
        model.EndInsuredDate = endInsuredDate;
        foreach (ClientMemberProduct item in model.ProductList)
        {
            item.EndDate = endInsuredDate;
        }
        model.IsActive = false;
        model.ActionStatus = ClientMemberActionStatus.PendingDelete.ToString();
        clientMemberService.CalculateInsFee(model);
        clientMemberService.Update(model);
        return null;
    } 
```

希望这有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T23:24:42.980

感谢[马特约翰逊](https://stackoverflow.com/users/634824/matt-johnson)，我能够改变日期被发送到浏览器的方式。这是一个相对简单的修复，取自 Perishable Dave 对[ASP.NET MVC JsonResult Date Format的类似问题的回答](https://stackoverflow.com/questions/726334/asp-net-mvc-jsonresult-date-format)

我的 JsonNetResult 类现在看起来像

```
public class JsonNetResult : ActionResult
{
    private const string _dateFormat = "yyyy-MM-dd hh:mm:ss";

    public Encoding ContentEncoding { get; set; }
    public string ContentType { get; set; }
    public object Data { get; set; }

    public JsonSerializerSettings SerializerSettings { get; set; }
    public Formatting Formatting { get; set; }

    public JsonNetResult()
    {
        SerializerSettings = new JsonSerializerSettings();
        Formatting = Formatting.Indented;
        SerializerSettings.ReferenceLoopHandling = ReferenceLoopHandling.Serialize;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        if (context == null)
            throw new ArgumentNullException("context");

        HttpResponseBase response = context.HttpContext.Response;

        response.ContentType = !string.IsNullOrEmpty(ContentType)
          ? ContentType
          : "application/json";

        if (ContentEncoding != null)
            response.ContentEncoding = ContentEncoding;

        if (Data != null)
        {
            var isoConvert = new IsoDateTimeConverter();
            isoConvert.DateTimeFormat = _dateFormat;

            JsonTextWriter writer = new JsonTextWriter(response.Output) { Formatting = Formatting };

            JsonSerializer serializer = JsonSerializer.Create(SerializerSettings);
            serializer.Converters.Add(isoConvert);

            serializer.Serialize(writer, Data);

            writer.Flush();
        }
    }
} 
```

我已将 iso 日期转换器添加到 serizer

在控制器中，您通过以下方式调用它：

```
public JsonNetResult YourAction(){
    //your logic here
    return JsonNetResult(/*your object here*/);
} 
```

当我写这篇文章时，我不知道 Web API。值得一看，因为它会在您的对象序列化方面做很多繁重的工作。结帐[ASP.NET Web API 2 入门](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)

# python - 我什么时候应该在 Python 函数名称中的单词之间使用下划线（根据样式指南）？

> ID：15778601
> 
> 赞同：12
> 
> 时间：2013-04-03T03:58:54.103
> 
> 标签：python, coding-style

[样式指南](http://www.python.org/dev/peps/pep-0008/#function-names)说应该使用下划线，但许多 Python 内置函数没有。下划线的标准应该是什么？我想与 Python 风格指南保持一致，但这个领域似乎有点模糊。是否有一个好的经验法则，是基于我自己的判断，还是两者都无关紧要？

例如，我应该命名我的函数`isfoo()`以匹配旧函数，还是应该命名它`is_foo()`以匹配样式指南？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T04:11:32.223

风格指南留给您：

> 函数名称应为小写，**必要时用下划线分隔单词以提高可读性。**

换句话说，如果您想在方法名称中添加下划线会使其更易于阅读——请务必在其中添加一个（或两个！）。如果您认为标准库中还有足够多的其他类似案例，请随意将其排除在外。 **这里没有硬性规定**（尽管其他人可能不同意这一点）。我认为唯一*被*普遍接受的是你不应该在你的方法中使用“CapWords”或“camelCase”。“CapWords”应该保留给课程，我不确定任何地方的“camelCase”是否有任何优先级（尽管我可能错了）......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T04:19:25.057

> 样式指南说应该使用下划线，但许多 Python 内置函数没有。

以内置[`isinstance()`](http://docs.python.org/2/library/functions.html#isinstance)为例，[这是 1997 年写的](http://hg.python.org/cpython/annotate/341fcb7bad90/Python/bltinmodule.c#1621)。

[PEP 8——Python 代码样式指南](http://www.python.org/dev/peps/pep-0008/#function-names) [直到 2001 年才发布](http://hg.python.org/peps/rev/4c31c25bdc03)，这可能是造成这种差异的原因。

> 下划线的标准应该是什么？我想与 Python 风格指南保持一致，但这个领域似乎有点模糊。是否有一个好的经验法则，是基于我自己的判断，还是两者都无关紧要？

**[“如有疑问，请使用最佳判断。”](http://www.python.org/dev/peps/pep-0008/#a-foolish-consistency-is-the-hobgoblin-of-little-minds)**

这是风格*指南*，而不是法律！在适当的地方遵循指南，牢记警告（强调我自己的）：

> 函数名应该是小写的，单词**之间用下划线分隔，以提高可读性**。
> 
> **混合大小写仅在已经是流行样式**（例如 threading.py）的上下文中被允许，**以保持向后兼容性**。

所以...

> 例如，我应该命名我的函数`isfoo()`以匹配旧函数，还是应该命名它`is_foo()`以匹配样式指南？

您可能应该*调用*它`isfoo()`，以遵循类似函数的约定。它是可读的。[“可读性很重要。”](http://www.python.org/dev/peps/pep-0020/)

# r - 在 R 中使用 file() 无限期地打开连接

> ID：15778602
> 
> 赞同：1
> 
> 时间：2013-04-03T03:58:59.030
> 
> 标签：r, sockets, connection

我有这个功能可以将来自 Twitter 的流数据写入一个文件 12 小时，然后再写入另一个文件 12 小时。这样我们就可以每天两次清理、解析和存储数据。

```
conn <- file(description = "after12.json", open = "a")
conn2 <- file(description = "before12.json", open = "a")
write.tweets <- function(x) {
  if (nchar(x) > 0 && format(Sys.time(), " %H") >= 12){
    writeLines(x, conn, sep = "")
  } else {
    writeLines(x, conn2, sep = "")
  }
} 
```

这是一个更大的函数来提取和写入数据。我的问题很简单。我想无限期地打开两个连接，以便能够在 12 小时不活动后调用连接。有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:20:19.487

采用`open`

```
conn <- file(description = "after12.json")
open(conn, open = "a") 
```

根据`?open`：

> open 打开一个连接。一般来说，使用连接的函数会在它们未打开时打开它们，然后再次关闭它们，因此要使连接打开调用显式打开。

# javascript - LocalStorage, stops at browser refresh...Why?

> ID：15778606
> 
> 赞同：0
> 
> 时间：2013-04-03T03:59:25.217
> 
> 标签：javascript, html, local-storage

I am new to JavaScript, i did this simple code to check local Storage. I just expected this to keep on the storage after refreshing or reopening the file...

Here is my code:

```
function save()
{
   localStorage.setItem('test', 'sometext');
} 
```

I call it through a button on HTML. I open it on the Web Inspector and it's there, but once I refresh it's gone. It should stay there right?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:10:02.180

对我来说看起来不错，我认为问题是当您刷新 Web Inspector 时没有正确显示它。

试试下面的测试用例

```
<html>
<head>
    <script type="text/javascript">
        function save(){
            localStorage.setItem('test', 'sometext');
        }
        function getItem(){
            alert(localStorage.getItem('test'))
        }
    </script>
</head>
<body>
    <button onclick="save()">Save</button>
    <button onclick="getItem()">Get</button>
</body>
</html> 
```

单击`save`后刷新页面并单击以`get`进行验证。

演示：[小提琴](http://jsfiddle.net/arunpjohny/c6E5s/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:20:03.980

是的，它应该留在那里。除非您`file://`在 Internet Exlporer 或旧版本的 Firefox 中使用 URL。这里有一个深入的分析[——Firefox中的“localStorage”是否只有在页面在线时才有效？](https://stackoverflow.com/questions/1492942/is-localstorage-in-firefox-only-working-when-the-page-is-online)[当直接从文件系统访问网站时，IE9 中的本地存储会](https://stackoverflow.com/questions/8706006/local-storage-in-ie9-fails-when-the-website-is-accessed-directly-from-the-file-s)失败。

# entity-framework-5 - 实体框架我的数据库上下文在其他项目中引用时没有连接

> ID：15778612
> 
> 赞同：0
> 
> 时间：2013-04-03T04:00:15.673
> 
> 标签：entity-framework-5

所以这是我的问题伙计们

在我的解决方案中，

1.  我有 ORM 类库，在其中添加了 EntityFramework 5（包含 Context.tt Designer.cs、edmx.diagram 和 .tt 的 .edmx 文件也是如此。到目前为止一切顺利
2.  我有一个名为 Repositories 的项目，并且上面有 ORM 项目的参考。
3.  在 Repositories Project 的 HeaderRepository 类中，当我编写以下代码时，

    using(UFPEntities ufpEntities = new UFPEntities()) { try{ 标头标头 = ufpEntities.Headers.Single(x => x.VendorId == id); }catch(Exception e) { } } 注意：智能感知工作正常编译器在编写上述代码时不会出错，它发生在运行时

但是，我得到“在应用程序配置文件中找不到名为 'UFPEntities' 的连接字符串。”

App.config 在 ORM 项目中，而不是在我正在处理上述数据的存储库项目中。

你能帮我，以便我可以从存储库项目中创建我的模型类（例如标题）吗？或者我做错了什么，所以它给了我例外？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:04:17.747

连接字符串必须在入口程序集的配置中 - 它是 web 应用程序的 web.config 或可执行或单元测试库的 app.config。刚刚被执行代码引用的任意库的 App.config 被完全忽略。

# git - 如何在 smartgit 中添加孤立分支

> ID：15778613
> 
> 赞同：2
> 
> 时间：2013-04-03T04:00:23.717
> 
> 标签：git, smartgit, orphan

我需要创建一个没有父级的孤儿分支。我如何在 Smartgit 中做到这一点？

需要一些指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:41:03.197

这是一个实例，如果 SmartGit 不支持 GUI 中的孤立选项，您也可以使用 CLI（命令行界面）并快速键入：

```
git checkout --orphan newbranch 
```

（如“[在 git 中，是否有一种简单的方法可以将不相关的分支引入存储库？](https://stackoverflow.com/a/4288660/6309) ”）

提交至少一个文件（仍然通过 GUI）：

```
git add afile
git commit -m "a first commit in orphan branch"
# no push here, this is purely a local operation in your local repo 
```

然后你回到 SmartGit，你的新（孤立）分支应该在那里。

# java - 我如何使用从另一种方法中学到的东西？

> ID：15778621
> 
> 赞同：0
> 
> 时间：2013-04-03T04:01:19.163
> 
> 标签：java

我希望方法 4 使用从方法 3 中学到的东西。那可能吗？

```
`public class MethodHelp {
public static void main(String[] args) 
 {
    MethodHelp main = new MethodHelp();

      System.out.println("Enter a date (use the format -> (MM/DD/YYYY)");

      //declare Scanner
      Scanner in = new Scanner (System.in);

      System.out.println("Enter a month (MM): ");
      String month = in.nextLine();

      System.out.println("Enter a day (DD): ");
      String day = in.nextLine();

      System.out.println("Enter a year (YYYY): ");
      String year = in.nextLine();

    String enteredDate = month + "/" + day + "/" + year;
      //System.out.println(enteredDate);

    if (main.method1(enteredDate)) 
      {
        main.method2(month, day, year);
        main.method3(year);
        main.method4(month, day);
    }
}

private boolean method1(String enteredDate) 
 {
   //some code
}

private void method2(String month, String day, String year) 
 {
        //somecode
}

private void method3(String year) 
 {
        //somecode
}

private static void method4(String month, String day)
 {
     //somecode
}} 
```

我想我需要method3将一些东西返回给main方法，然后将它传递给method4。但这似乎行不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:06:45.740

我想这就是你要找的

将您的代码编码`method3`为返回年份，并向您添加一个参数`method4`以接受年份。

```
private String method3(String year) 
{
   //some calculations
   return year;  
}

main.method4(month, day,main.method3(year)); 
```

# java - Saving captured image as PNG of JPEG

> ID：15778629
> 
> 赞同：0
> 
> 时间：2013-04-03T04:01:53.907
> 
> 标签：java, android, image

I am new to Android. I am using a camera application in Eclipse. The captured image is stored to **APPLICATION FOLDER(INTERNAL STORAGE)**. The image is stored as JPEG Format, but I want it to be save as PNG Format. However, I don't want to save the image on **EXTERNAL STORAGE DIRECTORY**.

Here is my code :

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyymmddhhmmss");
        String date = dateFormat.format(new Date());
        String photoFile = "Picture_" + date + ".JPEG";

        String filename = pictureFileDir.getPath() + File.separator + photoFile;
        File pictureFile = new File(filename);    

        try {
          FileOutputStream fos = new FileOutputStream(pictureFile);
          bmp.compress(Bitmap.CompressFormat.PNG,100,fos);

          fos.flush();
          // fos.write(data);
          fos.close();
          Toast.makeText(context, "New Image saved:" + photoFile,Toast.LENGTH_LONG).show();
        } catch (Exception error) {
        //Log.d(IntersaActivity.DEBUG_TAG, "File" + filename + "not saved: "+ error.getMessage());
      Toast.makeText(context, "Image could not be saved.",
          Toast.LENGTH_LONG).show();
    }
  }

  private File getDir() {
      String filepath = "MyFileStorage";
      ContextWrapper contextWrapper = new ContextWrapper(context);
        File sdDir = contextWrapper.getDir(filepath, Context.MODE_PRIVATE);
    //File sdDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
    return new File(sdDir, "CameraAPIDemo");
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:23:47.363

利用

```
private void savePicture(String filename, Bitmap b, Context ctx){
    try {
        ObjectOutputStream oos;
        FileOutputStream out;// = new FileOutputStream(filename);
        out = ctx.openFileOutput(filename, Context.MODE_PRIVATE);
        oos = new ObjectOutputStream(out);
        b.compress(Bitmap.CompressFormat.PNG, 100, oos);

        oos.close();
        oos.notifyAll();
        out.notifyAll();
        out.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

并将文件名的扩展名设置为PNG

希望能帮助到你。

编辑：您调用此方法的总代码。

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyymmddhhmmss");
String date = dateFormat.format(new Date());
String photoFile = "Picture_" + date + ".PNG";

String filename = pictureFileDir.getPath() + File.separator + photoFile;   

try {
    savePicture(filename, bmp, context);
    Toast.makeText(context, "New Image saved:" + photoFile,Toast.LENGTH_LONG).show();
} catch (Exception error) {
    Toast.makeText(context, "Image could not be saved.", Toast.LENGTH_LONG).show();
} 
```

# jquery - 使用动画宽度时 jQuery 动画不流畅：使用水平手风琴菜单“切换”

> ID：15778630
> 
> 赞同：0
> 
> 时间：2013-04-03T04:02:02.517
> 
> 标签：jquery, toggle, accordion

不知道为什么，但是当我回到原来的状态时，我的动画有点断断续续。下面是 jsfiddle 的链接：

```
$('.char-more').click(function () {
    var $curr = $(this).closest('.widgetWrap'),
        $prevActive = $('.activeClass').not($curr);
    //$prevActive.removeClass('activeClass');
    $prevActive.find('.acontent').animate({
        width: 'toggle'
    }, {
        duration: 500,
        easing: 'easeOutExpo',
        queue: false
    });
    $curr.toggleClass('activeClass').find('.acontent').animate({
        width: 'toggle'
    }, {
        duration: 500,
        easing: 'easeOutExpo',
        queue: false,
        complete: function () {
            $prevActive.removeClass('activeClass');
        }
    });
}); 
```

[http://jsfiddle.net/EKZq8/3/](http://jsfiddle.net/EKZq8/3/)

任何想法都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T04:19:27.783

这是因为你的填充。如果将其设置为零，则很平滑：

```
.widgetWrap > .acontent {
    background: none repeat scroll 0 0 #F7F7F7;
    display: none;
    float: right;
    font-size: 10px;
    height: 93px;
    margin: 0;
    padding: 0px;
    width: 240px;
} 
```

工作小提琴：http: [//jsfiddle.net/basarat/EKZq8/6/](http://jsfiddle.net/basarat/EKZq8/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:06:32.800

你想过使用[jQuery UI Accordion](http://jqueryui.com/accordion/#hoverintent)吗？或[引导崩溃](http://twitter.github.com/bootstrap/javascript.html#collapse)？您可以轻松地逆向工程为水平。如果你不能使用 CSS3 过渡来执行动画，这将是平滑的，因为如果你需要旧的浏览器支持，你可以实现 jQuery 版本作为后备。

# android - Images from URL

> ID：15778632
> 
> 赞同：1
> 
> 时间：2013-04-03T04:02:21.207
> 
> 标签：android

I started to build a game, this game gets images from server.

I used Bitmap to convert the IMAGE**S** and its works slowly.

Its take 25 - 40 seconds to load 22 images (100KB for each image).

* * *

```
public static Bitmap getBitmapFromURL(String src) {
    try {
        URL url = new URL(src);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setDoInput(true);
        connection.connect();
        InputStream input = connection.getInputStream();
        Bitmap myBitmap = BitmapFactory.decodeStream(input);
        return myBitmap;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
} 
```

Implementation:

* * *

```
Bitmap pictureBitmap = ImageFromUrl.getBitmapFromURL(path); 
```

PS..

I used LazyList before ,and it's not for my goal.

More offers?

Tnx....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:22:30.863

您在解码时尝试**`getInputStream()`**从 HTTP 连接使用**`BitmatpFactory`**，因此`BitmatpFactory`工厂总是必须等待输入流来收集数据。

而且我没有看到任何`close()`输入流 - 期待锡`finally`块，这可能会导致进一步的错误。

尝试这个：

*   在单独的线程中创建 HTTP 连接，以便您可以同时下载图像。

*   仅在文件下载后解码位图（您可能必须为位图解码器打开另一个流，但它比您当前的解决方案更快、更清晰）。

让我们还检查您的连接带宽，以确保您所做的事情受到此因素（网络带宽）的限制。

**[更新] 这些是一些实用功能：**

```
/**
 * Util to download data from an Url and save into a file
 * @param url
 * @param outFilePath
 */
public static void HttpDownloadFromUrl(final String url, final String outFilePath)
{
    try
    {
        HttpURLConnection connection = (HttpURLConnection) (new URL(url)).openConnection();
        connection.setRequestMethod("GET");
        connection.setDoOutput(true);
        connection.connect();

        FileOutputStream outFile = new FileOutputStream(outFilePath, false);
        InputStream in = connection.getInputStream();

        byte[] buffer = new byte[1024];
        int len = 0;
        while ((len = in.read(buffer)) > 0)
        {
            outFile.write(buffer, 0, len);
        }
        outFile.close();
    }
    catch (MalformedURLException e)
    {
        e.printStackTrace();
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }
}

/**
 * Spawn a thread to download from an url and save into a file
 * @param url
 * @param outFilePath
 * @return
 *      The created thread, which is already started. may use to control the downloading thread.
 */
public static Thread HttpDownloadThreadStart(final String url, final String outFilePath)
{
    Thread clientThread = new Thread(new Runnable()
    {
        @Override
        public void run()
        {
            HttpDownloadFromUrl(url, outFilePath);
        }
    });
    clientThread.start();

    return clientThread;
} 
```

# c# - 软件模式——这是什么？

> ID：15778643
> 
> 赞同：-6
> 
> 时间：2013-04-03T04:03:39.863
> 
> 标签：c#, templates, generics, c++-cli

这是否类似于您可能知道的某些软件设计模式？

我有一个界面：

```
public interface IA {
} 
```

及其密封的子类：

```
sealed public class A: IA {
} 
```

现在我有了另一个模板类`B`，我想在其中使用类型对象来`A`代替`T`类型：

```
template<class T>
public class B {
    T a;
    IA pa;

    B() {

    }
} 
```

但是，构造函数`A`不允许我将模板指定为`B<A>`，并且错误状态`A`是*密封*的，`A`不能在模板中使用。

为了解决这个问题，我创建了另一个类：

```
public class C {
    A a;

    A GetA() {
        return a;
    }
} 
```

然后重写模板类`B`：

```
template<class T>
public class B {
    C c;
    IA pa;

    B() {
        // initialize c=new C();
        // initialize pa=c.GetA();
    }
} 
```

我认为我的类层次结构有一些缺陷，我希望它是模板化的或通用的，但是引入类似的类`C`似乎不再支持我正在使用的东西。

如果我有更多的类`X`, `Y`and`Z`等也实现了`IA`接口怎么办？

* * *

**编辑**

我的程序现在工作正常，我只是不知道我是否应用了上述任何模式。而且一旦我有另一堂课`X`：

```
public class X: IA {
} 
```

并且为了将其`X`用作 的参数`B<X>`，我必须添加*X 的代表类*的新定义为

```
public class RX {
    X x;

    RX() {
        x=new X();
    }

    X GetX() {
        return x;
    }
} 
```

所以我还必须将 B 类重写为：

```
template<class T>
public class B {
    C c;
    RX x;
    IA pa;

    B() {
        // initialize c=new C();
        // initialize pa=c.GetA();;
        // if parameter X is used 
        // pa=x.GetX();
    }
} 
```

你看，它看起来并不整洁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:53:25.350

我想它被称为[代理模式](http://en.wikipedia.org/wiki/Proxy_pattern)。

# ios - UIViewAnimation setAnimationDidStopSelector 未声明的选择器，会崩溃吗？

> ID：15778644
> 
> 赞同：1
> 
> 时间：2013-04-03T04:03:56.297
> 
> 标签：ios, objective-c, uiview, uiviewanimation

我想知道当您将选择器分配给未声明的 animationDidStopSelector 时会发生什么。

例如：

```
[UIView setAnimationDidStopSelector:@selector(doThis)]; 
```

我有这行代码。调用动画后应该调用方法doThis吧？但是如果我没有声明 doThis 或者假设我忘记声明 doThis，我的应用程序会崩溃吗？还是 UIView 会忽略它？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T04:07:42.903

*如果*动画有委托 ( `setAnimationDelegate:`) 并且*该*委托没有实现，它将崩溃`doThis`。

但如果动画没有委托，它不会崩溃，因为没有人可以向其发送消息。什么都不会发生。

此外，以上所有内容都假设您使用的是老式动画“块”，以 . 构造动画`[UIView beginAnimations:nil context:nil]`并以`[UIView commitAnimations]`. 如果您使用现代形式的动画构造 with `animateWithDuration:delay:options:animations:completion:`and its friends，则没有 delegate 和 no `didStopSelector`；您在这方面的调用将被忽略，因为`completion:`处理程序履行了该角色。

# java - 仅将 ArrayList 作为值而不是引用传递

> ID：15778645
> 
> 赞同：40
> 
> 时间：2013-04-03T04:03:58.303
> 
> 标签：java, reference, arraylist, pass-by-reference

简单地说，我有一个带有 ArrayList 参数的方法。在该方法中，我修改 ArrayList 的内容仅与该方法返回的内容相关。因此，我不希望作为参数传递的 ArrayList 受到影响（即不作为参考传递）。

我所尝试的一切都未能达到预期的效果。我需要做什么才能仅在方法中使用 ArrayList 的副本，而不是让它更改实际变量？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-03T04:07:00.150

即使您有办法将数组列表作为副本而不是通过引用传递，它也只是一个浅拷贝。

我会做类似的事情：

```
void foo(final ArrayList list) {

    ArrayList listCopy = new ArrayList(list);
    // Rest of the code

} 
```

只需在复制的列表上工作。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-03T04:09:50.440

您可以使用 ArrayList 的复制构造函数创建 ArrayList 的副本：

```
ArrayList copy = new ArrayList(original); 
```

但是如果列表的元素也是对象，那么您必须知道修改副本的成员也会修改原始成员中的那个成员。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-03T04:07:10.193

您可以通过[`Collections#unmodifiableList(yourList)`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableList(java.util.List))以发送列表的不可修改副本。顺便说一句，你`List<Whatever>`是按值传递的，因为[Java 总是按值传递](https://stackoverflow.com/q/40480/1065197)，注意在`foo(List<Whatever> list)`方法中你不能修改`list`值，但**你可以修改它的内容**。

```
public class MyClass {

    List<Whatever> list = new ArrayList<Whatever>();

    public void bar() {
        //filling list...
        foo(Collections.unmodifiableList(list));
    }

    public void foo(List<Whatever> list) {
        //do what you want with list except modifying it...
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-03T04:06:30.877

您可以使用该`.clone`方法或 a`CopyOnWriteArrayList`进行复制，从而不会影响原件。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-03T04:11:53.470

在你的方法中试试这个：

```
void method(List<Integer> list) {
        List copyList =  new ArrayList<Integer>();
        copyList.addAll(list); // This will create a copy of all the emlements of your original list
    } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-01-21T12:34:41.143

我不确定为什么，即使`new ArrayList<MyObj>(old)`对象仍在不应该更改的地方更改引用。所以我不得不在里面实例化一个新的对象副本。

我制作了一个复制构造函数，就像 ArrayList 上的一样，并且确实喜欢

```
 newArray = new ArrayList<MyObj>();
        for (int i = 0; i < oldArray.size(); i++) {
            newArray.add(new MyObj(ondArray.get(i)));
        } 
```

如果 Avi 的答案在您的情况下还不够，只是希望能帮助其他人，就像我的代码太乱，甚至无法理解 =P

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-03T04:07:11.613

只需克隆它。

```
public ArrayList cloneArrayList(ArrayList lst){
    ArrayList list = new ArrayList();
    for (int i=0; i<lst.size(); i++){
        list.add(lst.get(i));
    }
    return list;
} 
```

在评论中添加建议，您也可以使用

```
ArrayList copy = new ArrayList(original); 
```

并且

```
ArrayList copy = new ArrayList();
copy.addAll(original); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-07T04:36:56.863

根据现有答案，但使用 ArrayList API。你可以使用`subList(fromIndex, toIndex)`方法。它显式地创建仅包含所需元素的列表视图（当然，按顺序）。在这里，即使你用添加/删除等操作修改了视图，它也不会改变原来的列表。它使您免于显式创建副本。

像这样的东西：

```
public void recursiveMethod(List<Integer> list) {
    if(base)
         return;
    recursiveCall(list);

    // following will just create a tail list but will not actually modify the list
    recursiveCall(list.subList(1, list.size());
} 
```

# gcc - GCC arm-elf linker error: undefined reference to "strlen", "malloc", "strcpy"

> ID：15778648
> 
> 赞同：0
> 
> 时间：2013-04-03T04:04:05.820
> 
> 标签：gcc, linker, makefile, cygwin, elf

I'm using GCC (CygWin) cross-compiling targeting an Arm7 processor. the problem is none of the standard library functions are available for my program. as I understand it, libc.a is the library i should be using. strangely, this file has been copied to the application source directory.

I would've thought if I did the following, I should be able to use these functions:

1.  have included (enclosed in <>) string.h and stdlib.h in my LCD.c file
2.  mention libc.a to the linker

During make, here's what it says:

```
$ make
.compiling
..linking
arm-elf-ld -v -Map main.map -nostartfiles -T simple.cmd -o main.out start.o ivt.
o main.o libc.a LCD.o
GNU ld version 2.14 20030612
LCD.o(.text+0x75c): In function `LCD_DispSmallDigits':
: undefined reference to `strlen'
LCD.o(.text+0x22d4): In function `LCD_DispSelMsgAt':
: undefined reference to `malloc'
LCD.o(.text+0x22e0): In function `LCD_DispSelMsgAt':
: undefined reference to `strcpy'
LCD.o(.text+0x2308): In function `LCD_DispSelMsgAt':
: undefined reference to `free'
LCD.o(.text+0x2358): In function `LCD_DispNumMsgAt':
: undefined reference to `malloc'
LCD.o(.text+0x2368): In function `LCD_DispNumMsgAt':
: undefined reference to `sprintf'
LCD.o(.text+0x2384): In function `LCD_DispNumMsgAt':
: undefined reference to `free' 
```

the code I'm using is quite mundane:

```
void LCD_DispSelMsgAt(int iRow, int iCol, int bSelected, char* s)
{
    int i;
    char* sBuffer = (char*) malloc(100);

    strcpy(sBuffer, s);

    if (bSelected)
        for (i=0; i<strlen(sBuffer); i++)
        if ((*(sBuffer + i)>='a') && (*(sBuffer + i)<='z'))
            *(sBuffer + i) = (*(sBuffer + i)) - 0x20;

    LCD_DispMsgAt(iRow, iCol, sBuffer);

    free(sBuffer);
} 
```

how can I get access to those standard routines?

thank you!

PS: it seems to me I'm having quite a "general" problem so what I'm about to say is not central to this question but i'll mention it anyway...

I noticed something that specifically relates to strlen( ). the prototype for strlen( ) has the parameter as "const char* s". it seems then it works fine with:

```
i = strlen("abc") 
```

but not in the code sample routine shown above. that wouldn't be a very helpful library routine that can't be used as strlen(char* s).

reply to @n.m.:

adding /gnude/arm-elf/lib/libc.a to the linker command line introduced a "thousand" errors.

```
$ make
..linking
arm-elf-ld -v -Map main.map -nostartfiles -T LinkerScript.cmd -L /gnude/arm-elf/
lib -o main.out start.o ivt.o main.o LCD.o /gnude/arm-elf/lib/libc.a
GNU ld version 2.14 20030612
/gnude/arm-elf/lib/libc.a(syscalls.o)(.text+0x714): In function `_sbrk':
: undefined reference to `end'
/gnude/arm-elf/lib/libc.a(vfprintf.o)(.text+0x8c0): In function `_vfprintf_r':
: undefined reference to `__eqdf2'
/gnude/arm-elf/lib/libc.a(vfprintf.o)(.text+0x1054): In function `_vfprintf_r':
: undefined reference to `__nedf2'
/gnude/arm-elf/lib/libc.a(vfprintf.o)(.text+0x155c): In function `_vfprintf_r':
: undefined reference to `__umoddi3'
/gnude/arm-elf/lib/libc.a(vfprintf.o)(.text+0x1578): In function `_vfprintf_r':
: undefined reference to `__udivdi3'
/gnude/arm-elf/lib/libc.a(vfprintf.o)(.text+0x1834): In function `_vfprintf_r':
: undefined reference to `__ltdf2'
/gnude/arm-elf/lib/libc.a(vfprintf.o)(.text+0x1d98): In function `cvt':
: undefined reference to `__eqdf2'
/gnude/arm-elf/lib/libc.a(vfprintf.o)(.text+0x1e10): In function `cvt':
: undefined reference to `__nedf2'
/gnude/arm-elf/lib/libc.a(vfprintf.o)(.text+0x1e30): In function `cvt':
: undefined reference to `__negdf2'
/gnude/arm-elf/lib/libc.a(dtoa.o)(.text+0x7c): In function `_dtoa_r':
: undefined reference to `__eqdf2' 
```

not sure what i should do next. i think i'll start by removing the explicit libc.a from the linker command line.

# android - Android ContentResolver does not find music on my device

> ID：15778659
> 
> 赞同：2
> 
> 时间：2013-04-03T04:05:36.860
> 
> 标签：android, android-contentresolver, playlists

My application worked fine when I used the original Google Music Player. It found songs and playlists, no problem. Since I started using Play Music, my application can't find any of this. Here is my code:

```
 Cursor cursor = contentResolver.query(uri, null, MediaStore.Audio.Media.IS_MUSIC + " = 1", null, null);

    if (cursor == null || !cursor.moveToFirst()) {
        Log.e(TAG, "Could not locate any music on device.");
        return;
    }

    cursor.close(); 
```

Any Idea why this happens. I just got my first complaint that someon who purchased my application could not play music.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T04:11:44.347

也许为时已晚，但我做了这样的事情：

```
String[] projection = {
            MediaStore.Audio.Media._ID,
            MediaStore.Audio.Media.ARTIST,
            MediaStore.Audio.Media.TITLE,
            MediaStore.Audio.Media.DATA,
            MediaStore.Audio.Media.DISPLAY_NAME,
            MediaStore.Audio.Media.ALBUM_ID,
            MediaStore.Audio.Media.DURATION
    };
    String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";
    Cursor cursor = context.getContentResolver().query(
            MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
            projection,
            selection,
            null,
            null); 
```

# c - Passing an array created from fscanf into a new function

> ID：15778663
> 
> 赞同：2
> 
> 时间：2013-04-03T04:06:06.743
> 
> 标签：c, scanf

I have successfully fscanf a text file and saved in to an array E2N1\. I am trying to pass this into a function as a pointer but it is not working. Whenever I try to call E2N1[0][0], it says that E2N is neither an array or a pointer. I've been looking all over for a solution on this. (Sorry E2N was meant to be E2N1) I use fscanf as:

```
int E2N1[noz.rowE2N][Q.N];

FILE* f = fopen("E2N.txt", "r");
for(i=0; i<noz.rowE2N; i++){
    for (j=0; j<Q.N; j++){
        fscanf(f,"%d",&E2N1[i][j]);

    }
    fscanf(f,"\n");

}
fclose(f); 
```

and again I can't pass E2N1 into function.

Your help will be greatly appreciated.

The function is:

```
double *dudtF = stiffness(&U, &massM, &noz, &newV, &E2N1, &I2E, &B2E, &PP, &QQ); 
```

and I write the function header as:

```
double *stiffness(double *U, double *massM, MESH *meshN, double *V1, int *E2N1, int *I2E, int *B2E, ordApprox *pp, ordApprox *qq) 
```

V1, I2E, B2E are three arrays and I'm trying to do the same with them as I am trying to do with E2N1.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:10:17.097

您不能通过点引用来引用传递给函数的多维数组，如下所示：

```
int iVals[10][10];
foo(iVals);

void foo(int** pvals)
{
    // accessing the array as follows will cause an access violation
    cout << pvals[0][1]; // access violation or unpredictable results
} 
```

您需要在函数原型中指定数组的第二维，例如：

```
foo(int ivals[][10])
{
    cout << ivals[0][1];  // works fine
} 
```

如果不知道尺寸，那么我建议您遵循此处概述的原则：

```
void foo(int *p, int r, int c)
{
    for(int i=0; i<r; i++)
    {
        for(int j=0; j<c; j++)
        {
            printf("%d\n", p[i*c+j]);
        }
    }
}

int c[6][6];

// pointer to the first element
foo(&c[0][0], 6, 6);

// cast
foo((int*)c, 6, 6);

// dereferencing
foo(c[0], 6, 6);

// dereferencing
foo(*c, 6, 6); 
```

我希望这有帮助。

或者，您可以使用 SAFEARRAY - 请参阅： http: [//limbioliong.wordpress.com/2011/06/22/passing-multi-dimensional-managed-array-to-c-part-2/](http://limbioliong.wordpress.com/2011/06/22/passing-multi-dimensional-managed-array-to-c-part-2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:52:11.943

Here is the example how to transfer matrix from one function to another ...

```
void foo (int **a_matrix)
{
int value = a_matrix[9][8];
a_matrix[9][8] = 15;
}

void main ()
{
#define ROWS 10
#define COLUMNS 10

int **matrix = 0;
matrix = new int *[ROWS] ;
for( int i = 0 ; i < ROWS ; i++ )
matrix[i] = new int[COLUMNS];

matrix[9][8] = 5;

int z = matrix[9][8] ;

foo (matrix);

z = matrix[9][8] ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:42:25.520

数组的有趣之处在于它们实际上充当了指针。

如果您有数组`char a[3]`，则变量等效于`char* p`相同的方式，如果您有数组`char b[3][4]`，则变量`b`等效于`char** q`. 换句话说，您应该考虑更改方法中的处理以将引用引用（并且可能再次引用）引用为整数。

试试谷歌...这是我得到的一些结果。

[http://www.dailyfreecode.com/code/illustrate-2d-array-int-pointers-929.aspx](http://www.dailyfreecode.com/code/illustrate-2d-array-int-pointers-929.aspx)

[http://www.cs.cmu.edu/~ab/15-123S09/lectures/Lecture%2006%20-%20%20Pointer%20to%20a%20pointer.pdf](http://www.cs.cmu.edu/~ab/15-123S09/lectures/Lecture%2006%20-%20%20Pointer%20to%20a%20pointer.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T04:43:02.043

您不需要传递 as `&E2N1`，只需传递 as `E2N1`no `&`，因为数组名称本身会转换为指针。

```
double *dudtF = stiffness(&U, &massM, &noz, &newV, E2N1, &I2E, &B2E, &PP, &QQ); 
```

此外，您需要将其`int **`视为其二维数组。

```
double *stiffness(double *U, double *massM, MESH *meshN, double *V1, int **E2N1, int *I2E, int *B2E, ordApprox *pp, ordApprox *qq) 
```

# php - 在 Yii 中，为什么教程用 :: 来引用类方法

> ID：15778665
> 
> 赞同：0
> 
> 时间：2013-04-03T04:06:14.250
> 
> 标签：php, yii

这是一个简单的问题，但由于我是初学者，所以让我感到困惑。

在教程中，例如：[http](http://www.yiiframework.com/doc/guide/1.1/en/database.dao) ://www.yiiframework.com/doc/guide/1.1/en/database.dao它引用了这样的方法：

> 1.  执行 SQL 语句
> 
> 建立数据库连接后，可以使用 CDbCommand 执行 SQL 语句。通过使用指定的 SQL 语句调用 CDbConnection::createCommand() 创建一个 CDbCommand 实例：

但在规范[http://www.yiiframework.com/doc/api/1.1/CDbConnection#createCommand-detail](http://www.yiiframework.com/doc/api/1.1/CDbConnection#createCommand-detail)它说 `public CDbCommand createCommand(mixed $query=NULL)`

据我所知，`::`它们是用于静态方法/属性的。

我知道我遗漏了一些东西，因为他们到处都使用这种格式。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:12:37.657

在这种情况下，[*Paamayim Nekudotayim*](http://php.net/manual/en/language.oop5.paamayim-nekudotayim.php) `::`仅用于指出方法是类的一部分：方法`createCommand`是`CDbConnection`方法，但这并不意味着您必须将其用作静态方法。

# file-upload - How to do a File upload using selenium grid using the MacOS as a hub and WinOS as a node?

> ID：15778668
> 
> 赞同：0
> 
> 时间：2013-04-03T04:06:39.277
> 
> 标签：file-upload, automation, selenium-webdriver, selenium-grid

My Code is as below, I'm executing the script using the Mac and running 2 nodes, 1 on windows and 1 on the mac itself. The upload on the Mac works perfect but the windows upload doesnt work.

```
Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();    
StringSelection str = new StringSelection("C:\\Sheyan.pdf");   
clipboard.setContents(str, str);
if (systemType=="http://192.168.1.100:5555/wd/hub")    **(THIS IS THE WINDOWSOS NODE)**     
{       
    Robot robot = new Robot();      
    robot.keyPress(KeyEvent.VK_CONTROL);        
    robot.keyPress(KeyEvent.VK_V);        
    robot.keyRelease(KeyEvent.VK_V);        
    robot.keyRelease(KeyEvent.VK_CONTROL);        
    robot.keyPress(KeyEvent.VK_ENTER);        
    robot.keyRelease(KeyEvent.VK_ENTER);        
}   
else **(FOR MAC OS NODE)**
{       
    selenium.click(driver, UploadButton);       
    WebElement fileInput = driver.findElement(UploadButton);        
    fileInput.sendKeys("/Users/accesstesting/Documents/Sheyan.pdf");        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:30:21.497

这永远不会起作用，机器人命令在运行脚本的机器上运行，它们不会传递给节点。仅当测试在本地机器上运行时，使用您正在使用的机器人实现才会起作用。

如果您正在针对远程节点运行测试，您想要做的是使用本地文件检测器：

```
driver.setFileDetector(new LocalFileDetector()) 
```

然后，您只需使用普通的 sendKeys() 方法使用本地文件填充上传输入，Selenium 将在后台执行一些魔术以将任何文件传递通过网格，以便它们可以正确上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:55:21.197

我知道这更像是一个问题而不是一个答案，但仍然：你为什么在 Windows 节点上使用 Robot 而在 Mac 节点上使用 Selenium？

如果你这样做会发生什么？

```
 if (systemType=="http://192.168.1.100:5555/wd/hub")    **(THIS IS THE WINDOWSOS NODE)** 
 {       
  selenium.click(driver, UploadButton);       
  WebElement fileInput = driver.findElement(UploadButton);        
  fileInput.sendKeys("C:\\Sheyan.pdf");        
} 
```

因为如果在 Windows 节点上正确初始化 selenium 和驱动程序，这应该可以工作

# c++ - 如何在詹金斯上构建 Cpp 代码？

> ID：15778673
> 
> 赞同：2
> 
> 时间：2013-04-03T04:07:05.153
> 
> 标签：c++, windows, jenkins

我在 Jenkins 中执行一个批处理文件来构建一个 cpp 代码，我在两者之间有一个命令来构建可执行文件，如“g++ sourcefile.cpp -o executablefile”，它给出错误“g++”不被识别为内部或外部命令.如何解决这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:37:59.427

当 Jenkins 在 Windows 机器上作为服务运行时，它在系统帐户下运行，而不是用户帐户（或您的帐户）。因此，您需要确保您需要为路径（等）设置的所有内容都是为系统帐户完成的，或者包含在 Jenkins 中作为“Windows 批处理脚本”的一部分。（实际上我自己在几个项目中都使用了这种方法。）

要测试系统帐户是否可以进行编译，您需要打开一个 CMD 提示符作为系统帐户。这个问题应该对您有所帮助：[How Do You Run CMD under System Account](https://stackoverflow.com/questions/77528/how-do-you-run-cmd-exe-under-the-local-system-account)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:11:40.730

1.  安装 GCC 和 bintools
2.  将系统的环境变量：设置为`PATH`包含的文件夹`gcc.exe`，`g++.exe`
3.  完毕！

# ubuntu - 在存储在主机上的 LXC 容器内运行程序

> ID：15778675
> 
> 赞同：2
> 
> 时间：2013-04-03T04:07:09.350
> 
> 标签：ubuntu, lxc

我正在编写一个将在 LXC 容器中运行的二进制文件。我控制二进制文件的源代码，但不控制它将在其中运行的容器的内容。特别是，我不想通过将二进制文件写入容器来污染容器。

有什么方法可以运行存储在主机上的二进制文件，但在容器的执行上下文（命名空间、chroot、删除的功能等）内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T21:11:42.427

你可以让你编程到[setns(2)](http://man7.org/linux/man-pages/man2/setns.2.html)（一些，但不是所有的命名空间），chroot 然后删除功能。

你也可以通过[dived](https://github.com/vi/dive)获得类似的东西（实际上不是chroot，但可以访问容器的chroot）。

您可以在容器内运行 [静态链接]（使用适当的选项，例如，`--client-chroot --root-to-current`），在容器和主机上都可见的某些文件系统部分上侦听 UNIX 套接字；并运行`dive`以要求`dived`在容器的命名空间中启动您的非静态链接程序。根文件系统将与您的主机保持相同（因此您的程序可以找到库），并且容器的根文件系统将设置为当前目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T15:22:41.807

我不认为这是可能的。您可以做的是在容器和主机之间挂载一个共享文件夹（使用绑定挂载）。然后，您可以使用 启动二进制文件（现在是容器 FS 的一部分）`chroot`，例如：

`sudo chroot <container_rootfs> /bin/bash -c 'cd <your shared folder>; ./<your_binary>'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-05T02:05:37.133

您可以在主机上安装并应用升级到您的程序，然后使用[此答案中描述的 lxc 容器](https://stackoverflow.com/a/46045959/1616424)

性能或磁盘空间成本几乎为零

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-03T06:43:54.837

我认为您可以将 samba 服务从主机导出到容器。您只需将您的东西放到 samba 的共享文件夹中，不要污染容器。

# lua - 使用 lua_pushnumber 时我可以调整堆栈的最大大小吗

> ID：15778678
> 
> 赞同：1
> 
> 时间：2013-04-03T04:07:28.380
> 
> 标签：lua, stack-overflow

```
We have a problem in our project,we use lua 5.1 as our scripting language. 
```

但是当在一个函数中使用 lua_pushnumber 从 C++ 向 lua 传递太多数据时，lua 堆栈看起来像堆栈溢出，导致 C++ 中的其他部分内存已写入，并且在回调返回 C++ 时导致我们的系统崩溃。我想知道是否有一些参数可以控制lua堆栈大小的大小。我尝试更改在 lua.h 中定义的参数 LUA_MINSTACK，但似乎不起作用。我也尝试使用 lua_checkstack() 来避免将太多数字推送到 lua 堆栈，但它也不起作用

```
getNineScreenEntity(lua_State* L)
{
    DWORD screenid = GET_LUA_VALUE(DWORD,1)
    struct EntryCallback : public ScreenEntityCallBack
    {
        EntryCallback(){ }
        bool exec(ScreenEntity * entity)
        {
            list.push_back(entity)
            return true;
        }
        std::vector<ScreenEntity*> list;
    };
    EntryCallback exec;
    Screen* screen = ScreenManager::getScreenByID(screenid);
    if (!screen)
        return 0;
    screen->execAllOfScreenEntity(exec);
    int size = 0;
    std::vector<ScreenEntity*>::iterator vit = exec.list.begin();
    for (; vit != exec.list.end(); ++vit)
    {
        lua_pushnumber(L,(*vit)->id);
        ++size;    
    }
    return size;
} 
```

似乎当一个屏幕中有太多实体时，我们的程序会崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T01:50:52.370

也许这会有所帮助（来自 Lua 5.2 手册）

```
int lua_checkstack (lua_State *L, int extra); 
```

“确保堆栈中至少有‘额外’的空闲堆栈槽。如果它不能满足请求，它会返回 false，因为它会导致堆栈大于固定的最大大小（通常至少有几千个元素）或者因为它无法为新的堆栈大小分配内存。此函数从不收缩堆栈；如果堆栈已经大于新大小，则保持不变。

这是一个示例 c 函数...

```
static int l_test1 (lua_State *L) {
    int i;
    printf("test1: on the way in"); stackDump(L);
    int cnt = lua_tointeger(L, 1);
    printf("push %d items onto stack\n", cnt);
    printf("try to grow stack: %d\n", lua_checkstack(L, cnt));
    for (i=0; i<cnt; i++) {
        lua_pushinteger(L, i);                      /* loop -- push integer */          
    }
    printf("test1: on the way out"); stackDump(L);
    return 1;
} 
```

这段代码：

*   在进入函数的途中转储堆栈。(1)
*   尝试扩展堆栈大小以拥有“cnt”空闲插槽（它返回 true，它有效，或 false，它没有）。
*   将“cnt”个整数压入堆栈
*   在出路时转储堆栈。

* * *

```
$ lua demo.lua 
running stack test with 10 pushes
test1: on the way in
---1--
[1] 10
-----
push 10 items onto stack
test1: on the way out
---11--
[11] 9
[10] 8
[9] 7
[8] 6
[7] 5
[6] 4
[5] 3
[4] 2
[3] 1
[2] 0
[1] 10
-----
running stack test with 1000 pushes
test1: on the way in
---1--
[1] 1000
-----
push 1000 items onto stack
try to grow stack: 1
test1: on the way out
---1001--
[1001] 999
[1000] 998
[999] 997
[998] 996
[997] 995
[996] 994
... 
```

* * *

当上面的代码没有 lua_checkstack() 调用时，我们会在尝试将 1000 个项目压入堆栈时遇到错误。

* * *

```
running stack test with 1000 pushes
test1: on the way in
---1--
[1] 1000
-----
push 1000 items onto stack
Segmentation fault (core dumped) 
$ 
```

* * *

(1) stackDump() 类似于 PiL 第 3 版中出现的内容。用于转储堆栈内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:46:26.290

你应该在每次推入之前检查 Lua 堆栈。
堆栈大小默认为 20，如果需要更多空间，应手动放大。
[Lua手册](http://www.lua.org/manual/5.2/manual.html#lua_checkstack)

# php - 第一个可选路由段作为子路由的强制段

> ID：15778679
> 
> 赞同：2
> 
> 时间：2013-04-03T04:07:35.483
> 
> 标签：php, url-routing, zend-framework2, segment

我有以下路由定义：

```
'admin_default' => array( 
    'type'    => 'segment', 
    'options' => array( 
        'route'    => '[/:lang]/administrator[/:module][/:action]', 
        'constraints' => array( 
            'lang' => '[a-zA-Z]{2}', 
            'module' => '[a-zA-Z0-9_-]*', 
            'action' => '[a-zA-Z0-9_-]*', 
        ), 
        'defaults' => array( 
            'module' => 'Application', 
            'controller' => 'Admin', 
            'action'     => 'index', 
            'lang' => 'ru' 
        ), 
    ), 
    'may_terminate' => true, 
    'child_routes'  => array( 
        'wildcard' => array( 
            'type' => 'wildcard', 
            'may_terminate' => true, 
            'options' => array( 
                'key_value_delimiter' => '/', 
                'param_delimiter' => '/' 
             ), 
        ), 
    ), 
), 
```

所以，我无法摆脱 URL 字符串中的段 [/:lang]

例如：

URL 视图助手`$this->url('admin_default', array('module' => 'albums'))`返回以下 URL 字符串：

```
/administrator/albums 
```

而`$this->url('admin_default/wildcard', array('module' => 'albums', 'action' => 'edit', 'id' => album_id_here))`返回：

```
/ru/administrator/albums/edit/id/album_id_here 
```

在第二种情况下，如何从 URL 字符串中删除 [/:lang] 段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:54:05.733

那么那个“ru”是怎么回事？

您必须扩展 zend 视图帮助程序 URL 以将您当前的语言环境注入到 URL

看看我为我目前的项目做了什么：

```
 <?php

namespace PatrickCore\View\Helper;

use Doctrine\ORM\EntityManager;
use Zend\View\Helper\Url;

class I18nUrl extends Url {

    /**
     * @var String
     */
    protected $lang;
    protected $router;

    public function __construct($locale,$router) {

        $arraylanguagemapping = array(
            'en_US' => 'en',
            'fa_IR' => 'fa'
        );
        $this->lang = $arraylanguagemapping[$locale];
        $this->router = $router;
    }

    public function __invoke($name = null, array $params = array(), $options = array(), $reuseMatchedParams = false) {

        $this->setRouter($this->router);

        if (!array_key_exists('lang', $params)) {
            $params['lang'] = $this->lang;
        }

        return parent::__invoke($name,$params,$options,$reuseMatchedParams);

    }

}

?> 
```

# asp.net - 将 Windows 8 主题仪表板应用到我用 ASP.NET 设计的网站

> ID：15778685
> 
> 赞同：6
> 
> 时间：2013-04-03T04:08:09.153
> 
> 标签：asp.net, html, css, microsoft-metro

任何人都可以帮我将 Windows 8 Metro-ui 主题应用到我的网站主页。我在 ASP.NET 中设计了我的网站，但希望我的仪表板看起来像 Metro-ui 风格。但是我发现很难将这些 CSS 样式应用到我的仪表板。我想用图像滑块、瓷砖滑块等应用不同的瓷砖，以及一些瓷砖按钮，我可以在其点击事件上调用我的 aspx 页面。请任何人都可以帮助我完成我的任务。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T04:49:07.760

您可以将以下网站用于模板 4 Metro ui 样式...

[站点1](http://www.shoutmeloud.com/free-windows8-metro-ui-templates.html)

[站点2](http://metroui.org.ua/)

[站点2](http://metro-webdesign.info/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T05:18:21.117

这里还有一些网站

[Metro-bootstrap](http://talkslab.github.com/metro-bootstrap/index.html)基于[twitter bootstrap](https://github.com/twitter/bootstrap/)

[5 个最佳 Metro 风格 Bootstrap 主题的集合](http://enbeeone3.com/collection-of-5-best-metro-style-bootstrap-theme/)

[BootMetro : Metro 风格的 Web 框架](http://aozora.github.com/bootmetro/)

[10 个 Metro Bootstrap 模板：Twitter Bootstrap 的 Metro 主题](http://www.ma-no.org/en/content/index_10-metro-bootstrap-templates_1265.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:57:53.920

这个特定的链接也帮助我实现了我的目标： http: [//metroui.org.ua/tiles.php](http://metroui.org.ua/tiles.php)

# .htaccess - 使用 .htaccess 将 index.php 请求重定向到 http://localhost/website/

> ID：15778687
> 
> 赞同：0
> 
> 时间：2013-04-03T04:08:10.700
> 
> 标签：.htaccess, mod-rewrite

我对配置我的 .htaccess 还不是很熟悉，所以请帮帮我。

我有一个指向 index.php 的链接，但我不希望 index.php 出现在我的网址中

```
eg. 
http://localhost/website/index.php 
```

我希望它被重定向到根文件夹

```
http://localhost/website/ 
```

所以我试着寻找答案，这就是我到目前为止所得到的。

```
RewriteEngine on

Options +FollowSymLinks
RewriteCond %{THE_REQUEST} ^.*/index.php
RewriteRule ^(.*)index.php$ http://localhost/website/$1 [R=301,L] 
```

现在，当我尝试在本地网站中单击主页时，而不是将我重定向到

```
http://localhost/website 
```

它被重定向到这个 -

```
http://localhost/Applications/XAMPP/xamppfiles/htdocs/website/localhost/website/ 
```

谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:01:15.230

刷新页面后，我对 .htaccess 所做的更改不会立即生效。我花了一些时间来清除缓存以查看效果。我尝试了不同的方法来解决我的问题：

```
Options +FollowSymLinks
RewriteEngine on

#RewriteCond %{THE_REQUEST} ^.*/index.php
#RewriteRule ^(.*)index.php$ http://localhost/website/$1 [R=301,L]

#RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /?(.*)/index\.php
#RewriteRule ^ /%1 [L,R=301]

#RewriteRule ^(.*)$ /index.php/$1 [L] 
```

带有# 的行没有解决我的问题，可能是因为缓存没有被清除，但无论如何，下面的这一行解决了我的问题，但在我真正看到结果之前花了我 5 次来清除我的缓存。

```
RewriteRule ^index.php(.*)$ http://localhost/website/$1 [R=301,NC] 
```

我从[htaccess 生成器得到它](http://www.webconfs.com/htaccess-redirect-generator.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:33:51.540

你试过这个吗

```
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# networking - 计算子网掩码

> ID：15778690
> 
> 赞同：0
> 
> 时间：2013-04-03T04:08:33.953
> 
> 标签：networking, ip, subnet

我在计算子网掩码时遇到问题。

假设 xyz 学院正计划建立一个带有网络地址的小型专用网络`192.168.20.0`。学院有7个系，最大系数。每个部门的主机数为25。如何计算子网掩码？

当我试图在谷歌上找到一个计算此类问题的教程时，一无所获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:16:18.950

/27 的掩码将为您提供 5 位主机 IP 地址，而 5 位足以表示 25 台主机。每个部门可以使用不同的网络，例如：Dept A 可以是 192.168.20.0/27，Dept B 可以是 192.168.21.0/27 等等...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-05T04:28:44.840

我意识到这个问题已经有 2 年历史了，但我想如果其他人来这里有与这个类似的家庭作业问题，我会添加它。假设每个网络不需要超过 30 个主机（它声明最多 25 个），那么您可以为每个网络使用 5 个主机位和 27 个子网标识符位。

5 位可以代表 30 台主机，因为：

*   2^5 = 32

所以 32 个数字可以用 5 个二进制位表示。

减去 2，因为每个子网中的最低地址是网络地址，而最高地址是广播地址

*   32-2=30 可分配地址

4 位是不够的，因为 (2^4)-2=14。

如果您使用更多位，您将在子网和可能浪费的地址之间有更大的差距。

通常，这些被分配为最低的可用地址（至少它们是为了您的家庭作业）。

192.168.20.0 二进制 = 11000000.10101000.00010100.00000000

虽然 sashan 的答案有效，但如果这是家庭作业，您的教授将首先寻找您更新最正确的子网标识符（或网络标识符）位。我们知道子网标识符中有 27 位来自 CIDR 表示法中的“/27”。它们是下面粗体字的前 27 位。

**11000000.10101000.00010100.000** 00000

如果您从最右边递增并创建 7 个子网，您将获得以下子网地址。我将只加粗将改变的二进制数字，而不是左边的网络地址的其余部分。

11000000.10101000.00010100。**000** 00000 = 192.168.20.0/27 11000000.10101000.00010100。**001** 00000 = 192.168.20.32/27 11000000.10101000.00010100。**010** 00000 = 192.168.20.64/27 11000000.10101000.00010100。**011** 00000 = 192.168.20.96/27 11000000.10101000.00010100。**100** 00000 = 192.168.20.128/27 11000000.10101000.00010100。**101** 00000 = 192.168.20.160/27 11000000.10101000.00010100。**110** 00000 = 192.168.20.192/27

# php - 如何将一类当前添加到我的导航列表项和链接？

> ID：15778692
> 
> 赞同：0
> 
> 时间：2013-04-03T04:08:54.813
> 
> 标签：php, navigation

我已经尝试了几种不同的方法来在我的导航中添加一个 current 类。

我在以下网址阅读了一篇关于这样做的文章： http: [//alistapart.com/article/keepingcurrent](http://alistapart.com/article/keepingcurrent)

到目前为止，我没有运气将任何方式合并到我的网站中。

我觉得我错过了什么。

我使用名为 nav.php 的包含文件将导航拉入站点：

```
 <div id="nav">
    <div id="nav-container">
        <ul id="nav-content" class="top menu">
            <li<?php if ($thisPage=="home") 
            echo " id=\"currentpage\""; ?>>
            <a href="/index2013.php">Home</a></li>

            <li<?php if ($thisPage=="portfolio") 
            echo " id=\"currentpage\""; ?>>
            <a href="/design/designsystems/unitedway/unitedway.php">Portfolio</a></li>

            <li<?php if ($thisPage=="services") 
            echo " id=\"currentpage\""; ?>>
            <a href="/services/services.php">Services</a></li>

            <li<?php if ($thisPage=="resources") 
            echo " id=\"currentpage\""; ?>>
            <a href="/resources/resources.php">Resources</a></li>

            <li<?php if ($thisPage=="blog") 
            echo " id=\"currentpage\""; ?>>
            <a href="http://kristinemorical.com/wordpress/kristine-blog/">Blog</a></li>

            <li<?php if ($thisPage=="contact") 
            echo " id=\"currentpage\""; ?>>
            <a href="/contactinfo/contact.php">Contact</a></li>
        </ul>
    </div>
    </div> 
```

这是我在索引页正文中的内容：

```
<?php $thisPage="home"; ?>
<!DOCTYPE html>
<html lang="en">
<head>
<title>Kristine Morical : Home</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="description" content="" />
<meta name="keywords" content="" />
<meta name="author" content="Kristine Morical" />
<?php include('http://www.kristinemorical.com/includes/head.php'); ?>
</head>

    <body id="body">

        <?php include('http://www.kristinemorical.com/includes/header.php'); ?>

        <?php include('http://www.kristinemorical.com/includes/nav.php'); ?>

        <div id="outer" class="clearfix">

        <div id="sidebar-wrapper">
        <?php //include('http://www.kristinemorical.com/includes/sidebar.php'); ?>
        </div>

        <div id="content" role="main">      

        </div> <!-- end #main -->

        </div> <!-- end #outer -->

        <?php include('http://www.kristinemorical.com/includes/footer.php'); ?>

    </body>

</html> 
```

我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:37:55.130

尝试这个：

```
<div id="nav">
    <div id="nav-container">
        <ul id="nav-content" class="top menu">
            <?php if ($thisPage=="home")  echo "<li id=\"currentpage\">"; else echo "<li>";?>
            <a href="/index2013.php">Home</a></li>

            <?php if ($thisPage=="portfolio")  echo "<li id=\"currentpage\">"; else echo "<li>";?>
            <a href="/design/designsystems/unitedway/unitedway.php">Portfolio</a></li>

            <?php if ($thisPage=="services")  echo "<li id=\"currentpage\">"; else echo "<li>";?>
           <a href="/services/services.php">Services</a></li>

            <?php if ($thisPage=="resources")  echo "<li id=\"currentpage\">"; else echo "<li>";?>
            <a href="/resources/resources.php">Resources</a></li>

            <?php if ($thisPage=="blog")  echo "<li id=\"currentpage\">"; else echo "<li>";?>
            <a href="http://kristinemorical.com/wordpress/kristine-blog/">Blog</a></li>

            <?php if ($thisPage=="contact")  echo "<li id=\"currentpage\">"; else echo "<li>";?>
           <a href="/contactinfo/contact.php">Contact</a></li>
        </ul>
    </div>
</div> 
```

如果您使用 ID 标签，这将起作用，但如果您真的想使用一个类，那么您应该使用类标签。这取决于您如何在网页的 head 标记或 css 文件中声明该类。如果您使用# 符号声明类，那么上面的代码将起作用，但这不是最佳实践。您可能希望使用句号声明类，然后在您的网页中使用类标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:13:05.650

首先，您可以使用[三元](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)条件来获得更简洁的代码，其次，使用 css`class`来简化样式（如果添加其他导航元素，这将允许多个）：

```
<li<?= ($thisPage=="services" ? ' class="currentPage"' : '') ?>>
    <a href="/services/services.php">Services</a>
</li> 
```

总是设置也会变得乏味`$thisPage`，所以你可以更进一步，让 PHP 尝试根据当前请求 uri 来解决它。

如果您遇到问题，该类从不应该打印，然后做一个`var_dump`或某事`$thisPage`以确保它被正确设置。

# scheme - 对的有序流 - 方案

> ID：15778697
> 
> 赞同：2
> 
> 时间：2013-04-03T04:09:28.303
> 
> 标签：scheme, racket

我正在尝试根据对的权重排序对流 - 对中两个数字的总和。（我不排除重复项。）我的代码似乎不起作用

```
(define (merge-weighted s1 s2 weight)
  (let ((h1 (stream-car s1))
        (h2 (stream-car s2)))
    (if ((weight h1) < (weight h2))
        (cons-stream h1 (merge-weighted (stream-cdr s1) s2 weight))
        (cons-stream h2 (merge-weighted new1 (stream-cdr s2) weight))))) 
```

当使用另一个整数流 (s2) 对整数流 (s1) 调用合并加权并使用以下 weight1 时：

```
(define (weight1 pair)
  (+ (car pair) (cdr pair))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:31:50.117

试试这个，它解决了一个放错位置的问题，`<`并添加了几个基本案例来处理空流：

```
(define (merge-weighted s1 s2 weight)
  (cond ((stream-null? s1) s2)
        ((stream-null? s2) s1)
        (else
         (let ((h1 (stream-car s1))
               (h2 (stream-car s2)))
           (if (< (weight h1) (weight h2))
               (cons-stream h1 (merge-weighted (stream-cdr s1) s2 weight))
               (cons-stream h2 (merge-weighted s1 (stream-cdr s2) weight))))))) 
```

可以肯定的是，您应该在问题中发布一个示例，其中包含给定输入的预期输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:31:33.207

```
(define (merge-weighted s1 s2 weight)
(let ((h1 (stream-car s1))
    (h2 (stream-car s2)))
(cond
((null? s1) s2)
((null? s2) s1)
((< (weight h1) (weight h2))
        (cons-stream h1 (merge-weighted (stream-cdr s1) s2 weight)))
(else
      (cons-stream h2 (merge-weighted s1 (stream-cdr s2) weight))))) 
```

试试这个。终止条件是我认为的问题。

# python - 理解 Python 中的多个赋值

> ID：15778699
> 
> 赞同：0
> 
> 时间：2013-04-03T04:09:58.797
> 
> 标签：python

这有什么区别：

```
a, b = b, a+b 
```

还有这个：

```
a = b
b = a+b 
```

我正在尝试按照文档中的示例进行操作，而第一种形式（多重赋值语法）对我来说似乎很复杂。我试图用第二个例子来简化它，但它没有给出相同的结果。我清楚地解释了第一句话是错误的。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T04:11:21.200

在更改左侧的任何值*之前*，多重赋值会评估右侧*所有内容的值。*

 *换句话说，区别在于：

```
a = 1
b = 2
a = b                  # a = 2
b = a + b              # b = 2 + 2 
```

与这个：

```
a = 1
b = 2
a, b = b, a + b        # a, b = 2, 1 + 2 
```

* * *

另一种思考方式是，它相当于构造一个元组，然后再次解构它（这实际上正是正在发生的事情，除非没有显式的中间元组）：

```
a = 1
b = 2
_tuple = (b, a+b)
a = _tuple[0]
b = _tuple[1] 
```*

# python - 序列化python列表的性能

> ID：15778701
> 
> 赞同：0
> 
> 时间：2013-04-03T04:10:09.497
> 
> 标签：python, performance, wsgi

我在 Python 中的性能有些问题。在我的 wsgi 应用程序中，我将序列化为 json 类列表。这是我的代码：

```
class Foo (object):
    def __init__(self, id,object_id, name_id,name,val,val2):
        self.id = id
        self.object_id = object_id 
        self.name_id = name_id 
        self.name = name
        self.val = val 
        self.add_val = val2

def application(environ, start_response):
        status = '200 OK'
        q = list()
        response_headers = [('Content-type', "application/json")]
        start_response(status, response_headers)
        for i in range(1,50001):
            p = Foo(str(i),random.random(), 'col_3','col_4','col_5','col_6')
            q.append(p.__dict___)
        return json.dumps(q) 
```

我的回答很慢（大约 18 秒）。然后我将代码重写为：

```
class Foo (object):
    def __init__(self, id,object_id, name_id,name,val,val2):
        self.id = id
        self.object_id = object_id 
        self.name_id = name_id 
        self.name = name
        self.val = val 
        self.add_val = val2

def application(environ, start_response):
        status = '200 OK'
        q = list()
        response_headers = [('Content-type', "application/json")]
        start_response(status, response_headers)
        yield '['
        for i in range(1,50001):
            p = Foo(str(i),random.random(), 'col_3','col_4','col_5','col_6')
            yield json.dumps(p.__dict___)
        yield ']' 
```

它运行得更快（大约 4-6 秒）。我不明白为什么。你能解释一下为什么我有这个结果吗？PS 我尝试了不同的 json 库并得到了相同的结果。

# apache - URL 重写 - 有些规则有效，有些则无效

> ID：15778710
> 
> 赞同：0
> 
> 时间：2013-04-03T04:11:23.183
> 
> 标签：apache, url-rewriting, apache2, rewrite, httprequest

我的 Apache2.2 似乎是这样工作的：当我`www.site.com/name`首先请求时，它正在寻找 folder `/name/`，如果没有找到，接下来它正在寻找 file `name.php`。

但是当我打开`RewriteEngine On`.htaccess 并添加时，尽管有 RewriteRule `RewriteRule ^name$ name2.php`，Apache 仍然会查看是否有文件夹或文件`name`。

如何给予 RewriteRule 优先级？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:41:01.073

我在这里找到了解决方案[http://httpd.apache.org/docs/2.2/content-negotiation.html](http://httpd.apache.org/docs/2.2/content-negotiation.html) - “Apache 中的协商”部分，“Multiviews”副标题：

> MultiViews 的效果如下：如果服务器收到对 /some/dir/foo 的请求，如果 /some/dir 启用了 MultiViews，并且 /some/dir/foo 不存在，则服务器读取目录寻找名为 foo.* (...) 的文件

所以就我而言（我使用 mod_userdir），我编辑了`/etc/apache2/mods-enabled/userdir.conf`

```
<IfModule mod_userdir.c>
  (...)
  <Directory /home/*public_html>
    (...)
    #Options MultiViewes # I COMMENTED OUT THIS OPTION
  </Directory>
</IfModule> 
```

现在，如果我请求`www.domain.com/foo`apache**将不会**搜索目录中命名`foo`的文件！从现在开始`RewriteRule ^name$ another-name.php` **就可以**了。

# database - 由于索引导致记录数增加，SQLite 插入速度变慢

> ID：15778716
> 
> 赞同：63
> 
> 时间：2013-04-03T04:12:06.983
> 
> 标签：database, optimization, sqlite, insert

## 原始问题

### 背景

众所周知，[需要对 SQLite 进行微调](https://stackoverflow.com/questions/1711631/how-do-i-improve-the-performance-of-sqlite)以实现 50k 插入/秒的插入速度。这里有很多关于插入速度慢的问题以及大量的建议和基准。

还有人[声称 SQLite 可以处理大量数据](https://stackoverflow.com/questions/784173/what-are-the-performance-characteristics-of-sqlite-with-very-large-database-file?lq=1)，50+ GB 的报告不会导致正确设置出现任何问题。

我已按照此处和其他地方的建议来实现这些速度，我对 35k-45k 插入/秒感到满意。我遇到的问题是，所有基准测试都只展示了 < 1m 记录的快速插入速度。我看到的是*插入速度似乎与表大小成反比*。

### 问题

我的用例需要在链接表中存储 500m 到 1b`[x_id, y_id, z_id]`个元组 ( ) 几年（1m 行/天）。这些值都是介于 1 和 2,000,000 之间的整数 ID。上只有一个索引`z_id`。

前 10m 行的性能非常好，大约 35k 插入/秒，但是当表有大约 20m 行时，性能开始受到影响。我现在看到大约 100 次插入/秒。

桌子的大小不是特别大。20m 行，磁盘大小约为 500MB。

该项目是用 Perl 编写的。

### 问题

这是 SQLite 中大型表的现实，还是有任何秘诀可以为超过 10m 行的表*保持*高插入率？

### 如果可能的话，我想避免的已知解决方法

*   *删除索引，添加记录，然后重新索引*：这作为一种解决方法很好，但当数据库在更新期间仍然需要可用时不起作用。使数据库在*x*分钟/天内完全无法访问是行不通的
*   *将表格分成更小的子表格/文件*：这将在短期内起作用，我已经尝试过。问题是我需要能够在查询时从整个历史记录中检索数据，这意味着最终我将达到 62 个表附件的限制。在临时表中附加、收集结果以及每次请求分离数百次似乎是很多工作和开销，但如果没有其他选择，我会尝试的。
*   *Set* [`SQLITE_FCNTL_CHUNK_SIZE`](http://www.sqlite.org/c3ref/c_fcntl_chunk_size.html#sqlitefcntlchunksize) : 我不知道 C (?!)，所以我宁愿不学习它只是为了完成它。不过，我看不到任何使用 Perl 设置此参数的方法。

## 更新

根据[Tim 的建议](https://stackoverflow.com/questions/15778716/sqlite-insert-speed-slows-as-number-of-records-increases-due-to-an-index#comment22443079_15778716)，尽管 SQLite 声称它能够处理大型数据集，但索引导致插入时间越来越慢，我对以下设置进行了基准比较：

*   插入行数：*1400 万*
*   提交批量大小：*50,000 条记录*
*   `cache_size`杂注：*10,000*
*   `page_size`编译指示：*4,096*
*   `temp_store`语用：*记忆*
*   `journal_mode`杂注：*删除*
*   `synchronous`杂注：*关闭*

在我的项目中，如下面的基准测试结果所示，创建了一个基于文件的临时表，并使用了 SQLite 对导入 CSV 数据的内置支持。然后将临时表附加到接收数据库，并使用 `insert-select`语句插入 50,000 行的集合。因此，插入时间并不反映 *文件到数据库*的插入时间，而是*表到表的*插入速度。考虑到 CSV 导入时间会降低 25-50% 的速度（一个非常粗略的估计，导入 CSV 数据不需要很长时间）。

显然，随着表大小的增加，拥有索引会导致插入速度变慢。

![SQLite 插入速度和表大小图](https://i.stack.imgur.com/UMDAM.png)

从上面的数据中可以清楚地看出，正确的答案可以分配给[Tim 的答案](https://stackoverflow.com/a/15809806/918938)，而不是 SQLite 无法处理的断言。显然，*如果*索引该数据集不是您的用例的一部分，它*可以*处理大型数据集。为此，我一直在使用 SQLite 作为日志系统的后端，现在它*不需要*被索引，所以我对我所经历的减速感到非常惊讶。

 **## 结论

如果有人发现自己想要使用 SQLite 存储大量数据*并*对其进行索引，那么[使用分片](https://stackoverflow.com/questions/128919/extreme-sharding-one-sqlite-database-per-user)可能是答案。我最终决定使用 MD5 哈希的前三个字符作为唯一列`z`来确定分配给 4,096 个数据库中的一个。由于我的用例本质上主要是存档，因此模式不会改变，查询也永远不需要分片遍历。数据库大小是有限制的，因为非常旧的数据将被减少并最终被丢弃，所以这种分片、杂注设置甚至一些反规范化的组合*给*了我一个很好的平衡，基于上面的基准测试，保持插入速度至少 10k 次插入/秒。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-04T11:25:50.123

如果您的要求是找到一个特定`z_id`的`x_ids`和`y_ids`链接到它（与快速选择范围不同`z_ids`），您可以查看一个非索引哈希表嵌套关系数据库，它可以让您立即找到通往特别`z_id`是为了获得它的`y_ids`和`x_ids`- 没有索引开销以及随着索引增长而在插入期间伴随的性能下降。为了避免聚集（又名桶冲突），请选择一种密钥散列算法，该算法将最大权重放在`z_id`具有最大变化（右加权）的数字上。

PS 使用 b-tree 的数据库起初可能比使用线性散列的 db 更快，但是随着 b-tree 的性能开始下降，插入性能将保持与线性散列相同。

PPS 回答@kawing-chiu 的问题：这里相关的核心特征是这样的数据库依赖于所谓的“稀疏”表，其中记录的物理位置由以记录键作为输入的散列算法确定。这种方法允许*直接*查找表中记录的位置，*而无需索引的中介*. 由于不需要遍历索引或重新平衡索引，因此随着表变得更加密集，插入时间保持不变。相比之下，对于 b 树，插入时间会随着索引树的增长而降低。具有大量并发插入的 OLTP 应用程序可以从这种稀疏表方法中受益。记录分散在整个表中。记录分散在稀疏表的“苔原”中的缺点是收集具有共同值的大型记录集（例如邮政编码）可能会更慢。散列稀疏表方法经过优化，可以插入和检索单个记录，以及检索相关记录的*网络*，而不是具有某些共同字段值的大型记录集。

嵌套关系数据库是一种允许*在*一行的列中使用元组的数据库。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-14T13:47:12.623

很好的问题和非常有趣的后续行动！

我只想简短地说一下：您提到将表分成较小的子表/文件并稍后附加它们不是一种选择，因为您将很快达到 62 个附加数据库的硬限制。虽然这完全正确，但我认为您没有考虑过中间选项：将数据分片到多个表中*，但*继续使用相同的单个数据库（文件）。

* * *

我做了一个非常粗略的基准测试，以确保我的建议确实对性能产生影响。

## 架构：

```
CREATE TABLE IF NOT EXISTS "test_$i"
(
    "i" integer NOT NULL,
    "md5" text(32) NOT NULL
); 
```

## 数据 - 200 万行：

*   `i`= 1..2,000,000
*   `md5`= md5 十六进制摘要`i`

每笔交易 = 50,000`INSERT`秒。

* * *

## 数据库：1；表：1；索引：0

```
0..50000 records inserted in 1.87 seconds
50000..100000 records inserted in 1.92 seconds
100000..150000 records inserted in 1.97 seconds
150000..200000 records inserted in 1.99 seconds
200000..250000 records inserted in 2.19 seconds
250000..300000 records inserted in 1.94 seconds
300000..350000 records inserted in 1.94 seconds
350000..400000 records inserted in 1.94 seconds
400000..450000 records inserted in 1.94 seconds
450000..500000 records inserted in 2.50 seconds
500000..550000 records inserted in 1.94 seconds
550000..600000 records inserted in 1.94 seconds
600000..650000 records inserted in 1.93 seconds
650000..700000 records inserted in 1.94 seconds
700000..750000 records inserted in 1.94 seconds
750000..800000 records inserted in 1.94 seconds
800000..850000 records inserted in 1.93 seconds
850000..900000 records inserted in 1.95 seconds
900000..950000 records inserted in 1.94 seconds
950000..1000000 records inserted in 1.94 seconds
1000000..1050000 records inserted in 1.95 seconds
1050000..1100000 records inserted in 1.95 seconds
1100000..1150000 records inserted in 1.95 seconds
1150000..1200000 records inserted in 1.95 seconds
1200000..1250000 records inserted in 1.96 seconds
1250000..1300000 records inserted in 1.98 seconds
1300000..1350000 records inserted in 1.95 seconds
1350000..1400000 records inserted in 1.95 seconds
1400000..1450000 records inserted in 1.95 seconds
1450000..1500000 records inserted in 1.95 seconds
1500000..1550000 records inserted in 1.95 seconds
1550000..1600000 records inserted in 1.95 seconds
1600000..1650000 records inserted in 1.95 seconds
1650000..1700000 records inserted in 1.96 seconds
1700000..1750000 records inserted in 1.95 seconds
1750000..1800000 records inserted in 1.95 seconds
1800000..1850000 records inserted in 1.94 seconds
1850000..1900000 records inserted in 1.95 seconds
1900000..1950000 records inserted in 1.95 seconds
1950000..2000000 records inserted in 1.95 seconds 
```

数据库文件大小：89.2 MiB。

* * *

## 数据库：1；表：1；索引：1 ( `md5`)

```
0..50000 records inserted in 2.90 seconds
50000..100000 records inserted in 11.64 seconds
100000..150000 records inserted in 10.85 seconds
150000..200000 records inserted in 10.62 seconds
200000..250000 records inserted in 11.28 seconds
250000..300000 records inserted in 12.09 seconds
300000..350000 records inserted in 10.60 seconds
350000..400000 records inserted in 12.25 seconds
400000..450000 records inserted in 13.83 seconds
450000..500000 records inserted in 14.48 seconds
500000..550000 records inserted in 11.08 seconds
550000..600000 records inserted in 10.72 seconds
600000..650000 records inserted in 14.99 seconds
650000..700000 records inserted in 10.85 seconds
700000..750000 records inserted in 11.25 seconds
750000..800000 records inserted in 17.68 seconds
800000..850000 records inserted in 14.44 seconds
850000..900000 records inserted in 19.46 seconds
900000..950000 records inserted in 16.41 seconds
950000..1000000 records inserted in 22.41 seconds
1000000..1050000 records inserted in 24.68 seconds
1050000..1100000 records inserted in 28.12 seconds
1100000..1150000 records inserted in 26.85 seconds
1150000..1200000 records inserted in 28.57 seconds
1200000..1250000 records inserted in 29.17 seconds
1250000..1300000 records inserted in 36.99 seconds
1300000..1350000 records inserted in 30.66 seconds
1350000..1400000 records inserted in 32.06 seconds
1400000..1450000 records inserted in 33.14 seconds
1450000..1500000 records inserted in 47.74 seconds
1500000..1550000 records inserted in 34.51 seconds
1550000..1600000 records inserted in 39.16 seconds
1600000..1650000 records inserted in 37.69 seconds
1650000..1700000 records inserted in 37.82 seconds
1700000..1750000 records inserted in 41.43 seconds
1750000..1800000 records inserted in 49.58 seconds
1800000..1850000 records inserted in 44.08 seconds
1850000..1900000 records inserted in 57.17 seconds
1900000..1950000 records inserted in 50.04 seconds
1950000..2000000 records inserted in 42.15 seconds 
```

数据库文件大小：181.1 MiB。

* * *

## 数据库：1；表：20 个（每 100,000 条记录一个）；索引：1 ( `md5`)

```
0..50000 records inserted in 2.91 seconds
50000..100000 records inserted in 10.30 seconds
100000..150000 records inserted in 10.85 seconds
150000..200000 records inserted in 10.45 seconds
200000..250000 records inserted in 10.11 seconds
250000..300000 records inserted in 11.04 seconds
300000..350000 records inserted in 10.25 seconds
350000..400000 records inserted in 10.36 seconds
400000..450000 records inserted in 11.48 seconds
450000..500000 records inserted in 10.97 seconds
500000..550000 records inserted in 10.86 seconds
550000..600000 records inserted in 10.35 seconds
600000..650000 records inserted in 10.77 seconds
650000..700000 records inserted in 10.62 seconds
700000..750000 records inserted in 10.57 seconds
750000..800000 records inserted in 11.13 seconds
800000..850000 records inserted in 10.44 seconds
850000..900000 records inserted in 10.40 seconds
900000..950000 records inserted in 10.70 seconds
950000..1000000 records inserted in 10.53 seconds
1000000..1050000 records inserted in 10.98 seconds
1050000..1100000 records inserted in 11.56 seconds
1100000..1150000 records inserted in 10.66 seconds
1150000..1200000 records inserted in 10.38 seconds
1200000..1250000 records inserted in 10.24 seconds
1250000..1300000 records inserted in 10.80 seconds
1300000..1350000 records inserted in 10.85 seconds
1350000..1400000 records inserted in 10.46 seconds
1400000..1450000 records inserted in 10.25 seconds
1450000..1500000 records inserted in 10.98 seconds
1500000..1550000 records inserted in 10.15 seconds
1550000..1600000 records inserted in 11.81 seconds
1600000..1650000 records inserted in 10.80 seconds
1650000..1700000 records inserted in 11.06 seconds
1700000..1750000 records inserted in 10.24 seconds
1750000..1800000 records inserted in 10.57 seconds
1800000..1850000 records inserted in 11.54 seconds
1850000..1900000 records inserted in 10.80 seconds
1900000..1950000 records inserted in 11.07 seconds
1950000..2000000 records inserted in 13.27 seconds 
```

数据库文件大小：180.1 MiB。

* * *

如您所见，如果您将数据分片到多个表中，则插入速度几乎保持不变。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T04:28:55.313

不幸的是，我想说这是 SQLite 中大型表的限制。它[不是](http://www.sqlite.org/whentouse.html)为在大规模或大容量数据集上运行而设计的。虽然我知道这可能会大大增加项目的复杂性，但您最好研究适合您需求的更复杂的数据库解决方案。

从您链接的所有内容来看，表大小与访问速度似乎是直接的权衡。不能两者兼得。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-08T16:21:16.337

在我的项目中，我无法对数据库进行分片，因为它在不同的列上进行了索引。为了加快插入速度，我在创建过程中将数据库放在 /dev/shm (=linux ramdisk) 上，然后将其复制到本地磁盘。这显然只适用于一次写入、多次读取的数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-11T15:29:43.713

我怀疑索引的哈希值冲突会导致插入速度变慢。

当我们在一张表中有很多很多行时，索引列的哈希值冲突就会更频繁地发生。这意味着 Sqlite 引擎需要计算 2 次或 3 次，甚至 4 次的 hash 值，才能得到不同的 hash 值。

所以我想这是当表有很多行时 SQLite 插入速度慢的根本原因。

这一点可以解释为什么使用分片可以避免这个问题。谁是 SQLite 领域的真正专家来证实或否认我的观点？**

# ruby-on-rails - 使用带有引导表的nested_form 样式不正确

> ID：15778718
> 
> 赞同：0
> 
> 时间：2013-04-03T04:12:11.080
> 
> 标签：ruby-on-rails, nested-form-for

我有以下代码在我的发票模型中创建嵌套模型 (invoice_line_items)：

```
 = nested_form_for @invoice, mutipart: true, class: "form-horizontal" do |f|

    ...

    %table.table.table-bordered{:id => "line-items"}
      %thead
        %tr
          %th
          %th Description
          %th Quantity
          %th Rate
      %tbody
        %tr
          = f.fields_for :invoice_line_items do |line_item|
            %td= line_item.link_to_remove "X"
            %td= line_item.text_field :description
            %td= line_item.text_field :quantity, :class => "input-mini"
            %td= line_item.text_field :rate, :class => "input-mini"
    = f.link_to_add "Add", :invoice_line_items, :data => { :target => "#line-items" } 
```

我有两个问题：1）当我通过单击“添加”添加新行时......它与表格格式不匹配并且不插入表格中。我尽一切努力让它工作，但它没有。我还尝试添加 ryanb 在他的 gem 文档中提到的“：target”。2) 我想在发票页面上为用户准备 3 个 invoice_line_items，但我不知道该怎么做。

编辑：自从我一直在玩它以来，我现在有了一些不同的东西。我不认为我做对了，但现在每次我点击“添加”时它都会创建一个新表单：

```
 .row-fluid
  = f.fields_for :invoice_line_items, :wrapper => false do |line_item|
    %table.table.table-bordered#tasks
      %thead
        %th
        %th Description
        %th Quantity
        %th Rate
      %tr.fields
        %td= line_item.link_to_remove "X"
        %td= line_item.text_field :description
        %td= line_item.text_field :quantity, :class => "input-mini"
        %td= line_item.text_field :rate, :class => "input-mini"
  .row-fluid
    = f.link_to_add "Add", :invoice_line_items, :data => { :target => "#tasks" } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:49:25.363

这是一个很难弄清楚的问题，但事实证明，nested_form gem 的最新版本没有附带最新版本的 jquery_nested_form.js 文件（即使文档说要使用这个函数）。所以，要让它工作，我必须将它添加到我的 application.js 中：

```
$(function ($) {
  window.NestedFormEvents.prototype.insertFields = function(content, assoc, link) {
    var target = $(link).data('target');
    if (target) {
      return $(content).appendTo($(target));
    } else {
      return $(content).insertBefore(link);
    }
  };
}); 
```

这覆盖了 jquery_nested_form.js 中的函数，现在一切正常。

# php - 用户登录无法正常工作（致命错误）

> ID：15778724
> 
> 赞同：-1
> 
> 时间：2013-04-03T04:12:47.723
> 
> 标签：php, mysql, database

所以我目前正在创建用户登录，我已将以下代码添加到 checklogin.php 页面，并且每次尝试登录时都会收到以下致命错误。

'
致命错误：在第 36 行调用 C:\xampp\htdocs\php\login\checklogin.php 中未定义的函数 session_register()

我看不到问题不知道你们是否能看到问题的根源？谢谢

```
<?php
    phpinfo();

    ob_start();
    $host="localhost"; // Host name
    $username=""; // Mysql username
    $password=""; // Mysql password
    $db_name="test"; // Database name
    $tbl_name="members"; // Table name

    // Connect to server and select databse.
    mysql_connect("$host", "$username", "$password")or die("cannot connect");
    mysql_select_db("$db_name")or die("cannot select DB");

    // Define $myusername and $mypassword
    $myusername=$_POST['myusername'];
    $mypassword=$_POST['mypassword'];

    // To protect MySQL injection (more detail about MySQL injection)
    $myusername = stripslashes($myusername);
    $mypassword = stripslashes($mypassword);
    $myusername = mysql_real_escape_string($myusername);
    $mypassword = mysql_real_escape_string($mypassword);

    $sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
    $result=mysql_query($sql);

    // Mysql_num_row is counting table row
    $count=mysql_num_rows($result);

    // If result matched $myusername and $mypassword, table row must be 1 row

    if($count==1){

    // Register $myusername, $mypassword and redirect to file "login_success.php"
    session_register("$myusername");
    session_register("mypassword");
    header("location:login_success.php");
    }
    else {
    echo "Wrong Username or Password";
    }

    ob_end_flush();
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:16:27.193

`session_register`需要版本 < 5.4.0

检查你的版本。我确信它> 5.4.0。

因此，它给出了未定义函数的错误。

**来自文档**

**自 PHP 5.3.0 起，该函数已被弃用，自 PHP 5.4.0 起已移除。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:16:44.783

您正在使用一种已弃用的方式来设置会话。考虑使用：

```
$_SESSION['username'] = $myusername; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:16:45.833

[session_register()](http://php.net/manual/en/function.session-register.php)已从 php > 5.4.0.. 中删除。

[而是](http://www.php.net/manual/en/reserved.variables.session.php)用于`$_SESSION[]`注册您的会话位

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T04:18:44.860

```
session_register("$myusername");
session_register("mypassword"); 
```

我认为您缺少 $ 符号。

# javascript - 使用 cellindex() 定位可能移动的单元格

> ID：15778729
> 
> 赞同：0
> 
> 时间：2013-04-03T04:13:29.847
> 
> 标签：javascript, html-table

我刚刚开始学习 JavaScript，在将单元格插入表格时遇到了一些麻烦。我有一个包含 3 个单元格的 1 行表，我想在单击的单元格的左侧插入一个新单元格，但只有在我单击“插入”按钮之后。

这是表格的 HTML：

```
<table border="1" id="table1">
    <tr id="row1">
        <td id="c1" onclick="c1()">Cell 1</td>
        <td id="c2" onclick="c2()">Cell 2</td>
        <td id="c3" onclick="c3()">Cell 3</td>
    </tr>
</table>
<br>
<button onclick="insert()">Insert</button> 
```

如果我像使用 Cell 2 一样手动指定单元格索引，它可以正常工作，但如果我尝试像使用 Cell 3 一样检测单元格的索引，它只会在索引 0 处插入新单元格。

JavaScript：

```
var cell1=false,
    cell2=false,
    cell3=false,
    x;

function c1() {
    cell1=true;
}
function c2() {
    cell2=true;
}
function c3() {
    cell3=true;
    x=getElementById("c3").cellIndex;
}
function insert() {
    if (cell1==true) {
        // Not used yet
    }
    if (cell2==true) {
        document.getElementById("table1").rows[0].insertCell(1).innerHTML="New1";
    }
    if (cell3==true) {
        document.getElementById("table1").rows[0].insertCell(x).innerHTML="New3";
    }
    cell1=false;
    cell2=false;
    cell3=false;
}; 
```

我在`c3()`函数和`insert()`函数中都尝试了一些变体，但每次它要么根本没有插入，要么在索引 0 处插入。

顺便说一句，我正在尝试使用纯 JavaScript 来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:23:52.057

您需要检查您的 Javascript 控制台是否有错误，它会报告：

> 未捕获的 ReferenceError：未定义 getElementById

更改`getElementById`为`c3()`解决`document.getElementById`此问题。

# mysql - phpmyadmin 和 Codeigniter 的 $this->db->query() 函数的结果不一致

> ID：15778736
> 
> 赞同：2
> 
> 时间：2013-04-03T04:13:51.040
> 
> 标签：mysql, codeigniter, phpmyadmin

用户表

```
id  stamp_created          email_address
1   2013-03-06 22:00:01    test+1@gmail.com
2   2013-03-20 22:00:08    test+2@gmail.com
3   2013-03-27 22:00:17    test+3@gmail.com
4   2013-04-01 22:00:27    test+4@gmail.com 
```

我有这个查询

```
SELECT
    `user`.*
FROM
    `user`
WHERE
    `user`.`email_address` IS NOT NULL
    AND (`user`.`stamp_created` BETWEEN '2013-04-01 00:00:00' AND '2013-04-01 23:59:59') 
```

在 phpmyadmin 中运行查询时，我得到了正确的结果

```
4   2013-04-01 22:00:27    test+4@gmail.com 
```

但是当我通过运行查询时

```
$sql = "SELECT
    `user`.*
FROM
    `user`
WHERE
    `user`.`email_address` IS NOT NULL
    AND (`user`.`stamp_created` BETWEEN '2013-04-01 00:00:00' AND '2013-04-01 23:59:59')
";

$this->db->query($sql)->result_array(); 
```

我得到一个空数组。

知道为什么会这样吗？

PS 已经确认 CI 和 phpmyadmin 使用的是同一个数据库，所以这不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:56:22.687

如果你尝试怎么办

```
$query = $this->db->sql('yourquery');

if($query->num_rows() > 0){
   foreach($query->result() as $row){
      $retdat[] = array(
           'test1' => $row->stamp_created
     ); 
  }
    print_r($retdat);
} 
```

# angularjs - AngularJS 所需的单选按钮需要两个点击事件才有效

> ID：15778739
> 
> 赞同：18
> 
> 时间：2013-04-03T04:13:59.597
> 
> 标签：angularjs

我有一个非常简单的表单，需要选择一个单选按钮才能使表单有效。单选按钮由 生成`ngRepeat`。

正如您从这个小提琴中看到的那样，虽然所需的行为是当第一次单击单选按钮时，这应该验证表单（是唯一的元素），但是请注意它需要额外的点击（在同一个单选按钮或任何其他）来验证表单：

[http://jsfiddle.net/Xsk5X/3/](http://jsfiddle.net/Xsk5X/3/)

我错过了什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2015-10-23T05:47:54.207

**所有其他解决方案都是变通方法：**您所要做的就是删除该`name`属性，当您使用`ng-model`不需要它的属性并且它们发生冲突时。

指定`name`会导致 Angular 感到困惑，因为它会更改一次 Angular 模型的值和另一次更改表单元素名称的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-04T15:19:20.323

我遇到了这个问题，因为一位同事复制了同一页面中的单选按钮并将它们隐藏以供临时参考，因此重复具有相同名称的单选输入

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T23:33:41.360

这是破坏的原因 - 是因为您将所有单选框设置为必需。结果，取决于您如何编写它 - angularjs 说它是无效的，因为并非所有内容都在某个时候被选中。

解决此问题的方法是执行以下操作：

[使用复选框和 AngularJS 必需](https://stackoverflow.com/questions/13567235/using-checkboxes-and-required-with-angularjs)

（检查第一个和第二个答案）。这将解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-02T12:05:14.070

似乎是 AngularJS 1.0.3 $scope.$apply 更新问题。在 1.0.2 中测试了您的确切 Fiddle（自己检查一下），它也按您期望的方式工作。

您的代码似乎没有任何问题，只是 $scope.$apply(或 $digest) 在第一次选择时没有按预期工作。

一个非常简单的解决方法是强制 $scope 在每次选择时也更新，尝试更改表单中的以下代码行：

```
<p>Favorite Beatle</p> 
```

也改变它：

```
<p>Favorite Beatle: {{name}}</p> 
```

即使在第一次单击之后，您也会看到 myForm.$invalid 是如何更新的。

我会尝试使用最新的 AngularJs 版本，如果那里也发生这种情况，请告诉我们。我可以想到的另一个解决方案是设置默认选择的单选，这将导致 myForm.$invalid 从一开始就为假。您可以通过在控制器代码中添加以下行来做到这一点：

```
$scope.name = "John"; 
```

或您想要的任何默认名称。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-02T16:51:30.937

有时 $digest 循环不会 $apply(fn) 因为您有两个或多个实例。为了解决这个问题，你需要手动 $apply 这个技巧，所以把它放在你的指令中：

```
angular.('myApp',[])
.directive('ngRadioExtend', ['$rootScope', function($rootScope){
        return {
            require: 'ngModel',
            restrict: 'A',
            link: function(scope, iElm, iAttrs, controller) {
                iElm.bind('click', function(){
                    $rootScope.$$phase || $rootScope.$apply()
                });
            }
        };
    }]) 
```

并将其用作：

```
<input type="radio" name="input_name" ng-model="some" value="F" ng-required="true" ng-radio-extend>

<input type="radio" name="input_name" ng-model="some" value="M" ng-required="true" ng-radio-extend> 
```

DONE 这是正确的方法！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-02T23:51:52.190

尝试将 ng-click 属性添加到您的单选按钮输入中。

感谢 Manny D 首先注意到这一点。是的，这有点骇人听闻，但它确实有效。例如，

```
<input type="radio" 
       name="groupName"  
       ng-model="editObject.Property"                             
       ng-value="someValue"
       ng-click /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-13T22:19:00.093

1.1.5仍然出现范围不更新的问题

一个简单的解决方法是添加 `<span ng-show="false"> {{name}} </span>`

小提琴：http: [//jsfiddle.net/jonyschak/xaQJH/](http://jsfiddle.net/jonyschak/xaQJH/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-28T08:52:22.600

对于 IONIC v1，添加`name=""`以防止 ionic auto-generate 属性`name`。然后，我可以一键更改所选项目。

```
<ion-radio class="label-ticket" 
    ng-repeat="topic in vm.listTopic track by $index"
    ng-value="topic"
    ng-model="vm.topicSupport"
    name="">
    {{ topic.title }}
</ion-radio> 
```

# jquery - jQuery - 带有徽标的淡入淡出错误

> ID：15778740
> 
> 赞同：0
> 
> 时间：2013-04-03T04:14:17.540
> 
> 标签：jquery, animation

我在动画不断排队和翻转时遇到问题。我在这方面花了太长时间，我需要一些认真的帮助，哈哈。您的帮助将不胜感激:)

所以我想要实现的是在“用户”滚动到标题/横幅之后，导航和徽标重新调整大小并将其自身固定到查看窗口的顶部。因此，当他们滚动时，它会停留在顶部，因此他们可以在页面上的任何位置使用导航，当他们返回顶部时，它会全部变回之前的标题/横幅。

现在我的问题是，当它更改徽标并使其淡入淡出时，如果您上下滚动到顶部几次，它们会排队并不断淡入淡出，看起来真的很麻烦……我不确定如何解决这个问题。（顺便说一句，下面的一些代码运行良好，但并非全部相关，问题在于#banner & #banner_mini）

```
 <script>
$(document).ready(function() {
    var yOffset = $("#header").offset().top;
    $(window).scroll(function() {
        if ($(window).scrollTop() >= 200) {
            $("#header").css({
                'top': 0,
                'background-color' : '#000',
                'position': 'fixed',
                'filter': 'alpha(opacity=90)',
                'height': '50px',
                '-moz-opacity': '0.9',
                '-khtml-opacity': '0.9',
                'opacity': '0.9'
            });
            $("#banner").fadeOut(100).delay(400);
            $("#banner_mini").fadeIn(300);
            $("#menu").css({'margin-top':'0px'});
            $("#menu ul li a").css({'font-size':'12px', 'padding':'5px', 'margin-top':'0px'});

        } else {
            $("#header").css({
                'background-color' : '',
                'top': yOffset + 'px',
                'position': 'absolute',
                'height': '200px',
                'filter': 'alpha(opacity=100)',
                '-moz-opacity': '1',
                '-khtml-opacity': '1',
                'opacity': '1'
            });
            $("#banner_mini").fadeOut(100).delay(400);
            $("#banner").fadeIn(300);
            $("#menu ul li a").css({'font-size':'14px', 'padding':'10px', 'margin-top':''});
            $("#menu").css({'margin-top':'147px'});
            }
    });
});

</script> 
```

这些是它正在改变的两个 div：

```
<div id="banner">
        <img src="img/Logo_PNG_edit.png"  width="193" height="187" />
        </div>
        <div id="banner_mini" style="display:none">
        <img src="img/Logo_mini.png" width="162" height="29">
        </div> 
```

我真的很感激任何帮助来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:16:24.950

您需要使用[jQuery .stop()](http://api.jquery.com/stop/)。它将停止所有当前正在运行的动画。在开始下一个动画之前执行此操作。

这是应用于您的代码时的用法示例。

```
$("#banner").stop(true, true).fadeOut(100).delay(400);
$("#banner_mini").stop(true, true).fadeIn(300); 
```

第一个参数将在传递 true 时清除您的队列。第二个参数将当前动画移动到它的结束状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:20:13.660

`if ($(window).scrollTop() >= 200)``true`//一旦传递 200 ，就会产生 这种情况，`scrollTOP`即它将在 201、210、500、600 等处被调用，`else`部件也是如此。

因此，只需检查他们是否已经实现了`position`您想要的。

```
var yOffset = $("#header").offset().top;
$(window).scroll(function () {

    if ($(window).scrollTop() >= 200) {
        if ($("#header").css('position') !== 'fixed') {
            $("#header").css({
                'top': 0,
                'background-color': '#000',
                'position': 'fixed',
                'filter': 'alpha(opacity=90)',
                'height': '50px',
                '-moz-opacity': '0.9',
                '-khtml-opacity': '0.9',
                'opacity': '0.9'
            });
            $("#banner").fadeOut(100).delay(400);
            $("#banner_mini").fadeIn(300);
            $("#menu").css({
                'margin-top': '0px'
            });
            $("#menu ul li a").css({
                'font-size': '12px',
                'padding': '5px',
                'margin-top': '0px'
            });
        }
    } else {
        if ($("#header").css('position') !== 'absolute') {
            $("#header").css({
                'background-color': '',
                'top': yOffset + 'px',
                'position': 'absolute',
                'height': '200px',
                'filter': 'alpha(opacity=100)',
                '-moz-opacity': '1',
                '-khtml-opacity': '1',
                'opacity': '1'
            });
            $("#banner_mini").fadeOut(100).delay(400);
            $("#banner").fadeIn(300);
            $("#menu ul li a").css({
                'font-size': '14px',
                'padding': '10px',
                'margin-top': ''
            });
            $("#menu").css({
                'margin-top': '147px'
            });
        }
    }
}); 
```

# android - android如何在onCreateView中获取高度和宽度

> ID：15778743
> 
> 赞同：4
> 
> 时间：2013-04-03T04:14:34.900
> 
> 标签：android, layout

我正在以编程方式创建我的视图，根本没有 xml，需要我正在工作的区域的实际大小。我一直在使用这段代码：

```
public static class DummySectionFragment extends Fragment {
   @Override
            public View onCreateView(LayoutInflater inflater, ViewGroup container,  Bundle savedInstanceState) {

                if (container == null) {
                    return null;
                }

                Context context = getActivity();
                int tabNo = getArguments().getInt(ARG_SECTION_NUMBER);
                Display display = ((WindowManager) context.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();

                // check display size to figure out what image resolution will be loaded
                DisplayMetrics metrics = new DisplayMetrics();
                display.getMetrics(metrics);

                Point size = new Point();
                display.getRealSize(size);
                display.getSize(size);
                int width = size.x;
                int height = size.y; 
```

但这并没有考虑到标题栏和导航栏等所有其他“装饰”

文档说不要使用显示指标来获取大小，但我怎样才能在 onCreateView 中找出视图的大小？我试过 container.getHeight() 但返回 0

我想问题是视图尚未创建，但必须有一个 onCreateView 的父级知道视图有多大是对的？

我怎么找到那个？

谢谢

仅供参考，这有效：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,  Bundle savedInstanceState) {

    if (container == null) {
        return null;
    }

    Context context = getActivity();
    int tabNo = getArguments().getInt(ARG_SECTION_NUMBER);
    Display display = ((WindowManager) context.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();

    // check display size to figure out what image resolution will be loaded
    DisplayMetrics metrics = new DisplayMetrics();
    display.getMetrics(metrics);
    Point size = new Point();
    display.getRealSize(size);
    display.getSize(size);
    int width = size.x;
    int height = size.y;

    switch (metrics.densityDpi) {
        case DisplayMetrics.DENSITY_XXHIGH:     height -= 72;      break;
        case DisplayMetrics.DENSITY_XHIGH:      height -= 64;      break;
        case DisplayMetrics.DENSITY_HIGH:       height -= 48;      break;
        case DisplayMetrics.DENSITY_MEDIUM:     height -=  32;      break;
        case DisplayMetrics.DENSITY_LOW:        height -=  24;      break;
        default:
            Log.e("onCreateView", "Unknown density");
        }
    } 
```

但这似乎不是一种干净的方法。我猜到了 xhigh 和 xxhigh，我还没有找到实际数字

另外我应该补充一点，视图是从 MainActivity 中的 onTabSelected 创建的，如下所示

```
@Override
    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        // When the given tab is selected, show the tab contents in the
        // container view.
        Fragment fragment = new DummySectionFragment();

        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, tab.getPosition() + 1);
        fragment.setArguments(args);
        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragment).commit();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:28:38.410

我想我有

我认为 getSize 返回 realsize 减去导航栏，所以我需要减去操作栏

所以现在我这样做：

```
@Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,  Bundle savedInstanceState) {

            if (container == null) {
                return null;
            }

            Context context = getActivity();
            int tabNo = getArguments().getInt(ARG_SECTION_NUMBER);
            Display display = ((WindowManager) context.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();

            // check display size to figure out what image resolution will be loaded
            DisplayMetrics metrics = new DisplayMetrics();
            display.getMetrics(metrics);
            Point size = new Point();
            display.getSize(size);
            int width = size.x;
            int height = size.y;

            TypedValue tv = new TypedValue();
            int actionBarHeight=0;
            if (context.getTheme().resolveAttribute(android.R.attr.actionBarSize, tv, true))
            {
                actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics());
            }

            height -= actionBarHeight;

            //Log.d("MainActivity", "onCreateView tabNo="+tabNo +" display width="+width+" height="+height+" rotation="+rotation);

            switch(tabNo){
            case 1:
                return onCreateViewScoreFragment(context, width, height);
            case 2:
                return onCreateViewFilesFragment(context, inflater, width>height);
            default:
                return onCreateViewSettingsFragment(context, inflater, width>height);
            }
        } 
```

它适用于我的平板电脑，我不能 100% 确定其他设备，我将不得不等待，看看我的客户怎么说

# java - Liferay Portlet 基本 MVC 流程和视图选择

> ID：15778745
> 
> 赞同：1
> 
> 时间：2013-04-03T04:14:38.950
> 
> 标签：java, liferay, portlet

我正在尝试使用 LifeRay 6.1 开发一个基本的 portlet。我精通各种 MVC 实现，但我发现 Liferay / java portlet 有点令人困惑——尤其是执行管道。

对于我使用过的大多数 MVC 框架，前提是简单的请求 > 路由器 > 控制器 > 视图。视图选择通常基于控制器/动作命名约定，随请求传入的参数或手动加载到控制器动作中。

使用 LifeRay MVCPortlet 它不能像这样工作；至少可以生成两种类型的 URL - 渲染 URL 和操作 URL。

渲染 URL 似乎完全绕过了我认为的控制器——MVCPortlet 的子类。似乎这些 url 相对容易生成并且请求加载了预期的视图，如果您可以调用它，考虑到所有意图和目的，它完全绕过控制器并且与模型无关。

```
<portlet:renderURL var="badminURL"><portlet:param name="mvcPath" value="/views/edit.jsp" /></portlet:renderURL> 
```

动作 URL 通过控制器，调用动作，然后使用默认视图呈现 portlet，而不管我作为 mvc 路径提供什么。

```
<portlet:actionURL var="adminURL" name="editSlide"><portlet:param name="mvcPath" value="/views/edit.jsp" /></portlet:actionURL> 
```

阅读类树，我可以看到一个属性用于定义根据 portlet 模式使用的视图。IE

```
this.viewTemplate = "/views/edit.jsp";
this.editTemplate = "/views/edit.jsp"; 
```

在调用 init() 之后再次设置它似乎只有在不通过 actionURL 访问时才有效。

所以我想我的问题是非常基本的，如何选择视图以及如何在通过 actionURL 时选择要使用的视图。此外，任何关于执行管道的大纲都会非常有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:22:02.177

我找到了解决方案。您可以在传递给控制器​​操作的 ActionResponse 对象上分配渲染参数。这告诉 liferay 加载提供的视图。IE

```
public void editSlide(ActionRequest actionRequest, ActionResponse actionResponse) throws IOException, PortletException {

    // action code goes here

    // set up the view
    actionResponse.setRenderParameter("mvcPath", "/views/edit.jsp");        

} 
```

# python - python中re.findall()方法的说明

> ID：15778747
> 
> 赞同：0
> 
> 时间：2013-04-03T04:15:12.873
> 
> 标签：python, regex, string, str-replace, replace

我想去掉一串标点符号，最后我使用了

```
re.findall(r"[\w]+|[^\s\w]", text) 
```

它工作正常，它确实解决了我的问题。我不明白的是括号内的细节和整个*模式*的东西。`r"[\w]+|[^\s\w]"`真正的意思是什么？我在 Python 标准库中查找了它，它说：

```
re.findall(pattern, string, flags=0) 
```

> 返回字符串中模式的所有非重叠匹配，作为字符串列表。从左到右扫描字符串，并按找到的顺序返回匹配项。如果模式中存在一个或多个组，则返回组列表；如果模式有多个组，这将是一个元组列表。空匹配包含在结果中，除非它们触及另一个匹配的开始。

我不确定我是否明白这一点，而且澄清对我来说有点含糊。谁能告诉我这种情况下的模式是什么意思以及它在 findall() 方法中是如何定义的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:29:45.740

为了分解它，`[]`创建一个[*字符类*](http://www.regular-expressions.info/charclass.html)。您经常会看到类似which `[abc]`will match`a`或. 相反，您也可能会看到will 匹配任何*不是*,或. 最后，您还会看到字符范围： . 这引入了两个范围，它将匹配, , , , ,中的任何一个。 `b``c``[^abc]` *`a``b``c``[a-cA-C]``a``b``c``A``B``C`*

 *在这种情况下，您的角色类包含特殊标记。 `\w`和`\s`。 `\w`匹配任何类似字母的东西。 实际上取决于您的语言环境，但它通常与匹配范围、或.中的任何内容`\w`相同。 是相似的，但它匹配任何可以被认为是空白的东西。`[a-zA-Z0-9_]``a-z``A-Z``0-9``_``\s`

这`+`意味着您可以重复上一场比赛 1 次或多次。所以`[a]+`将匹配整个字符串`aaaaaaaaaaa`。在您的情况下，您正在匹配彼此相邻的字母数字字符。

`|`基本上就像“或” 。匹配左边的东西，如果左边的东西不匹配，则匹配右边的东西*。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:29:53.823

`\w`表示字母数字字符加“_”。并且`\s`表示空白字符，包括“\t\r\n\v\f”和空格字符“”。因此，`[\w]+|[^\s\w]`表示仅包含单词和“_”的字符串。*

# objective-c - 登录控制在IOS中不起作用

> ID：15778748
> 
> 赞同：0
> 
> 时间：2013-04-03T04:15:21.640
> 
> 标签：objective-c, ios5, xcode4.5

我正在尝试自己学习 ios 编码我正在创建一个包含登录页面和欢迎屏幕的测试应用程序我正在使用情节提要，并且整个布局和功能都已完成，但我遇到了一个问题。成功登录后，我需要从登录视图移动到欢迎视图，如果登录失败，它将显示一条错误消息，除了登录失败的情况外，当登录尝试失败时，一切正常，不仅显示错误消息，而且还移动到欢迎观看。我当前的代码如下

```
if ([response statusCode] >=200 && [response statusCode] <300)
{
    responseData = [[NSString alloc]initWithData:webServiceData encoding:NSUTF8StringEncoding];
    NSLog(@"Response ==> %@", responseData);

    SBJsonParser *jsonParser = [SBJsonParser new];
    NSDictionary *jsonData = (NSDictionary *) [jsonParser objectWithString:responseData error:nil];
    NSLog(@"%@",jsonData);
    NSInteger success = [(NSNumber *) [jsonData objectForKey:@"success"] integerValue];
    NSLog(@"%d",success);
    if(success == 1)
    {
        NSLog(@"Login Success");
        [self performSegueWithIdentifier: @"LoginSucceeded" sender:self];

    }
    else
    {

        NSLog(@"Login Failed");
        [txtPassword setText:@""];
        [txtUser setText:@""];
        [self alertStatus:@"Username and/or password is invalid." :@"Login Failed"];
    }

}
else
{
    [self alertStatus:@"Connection Failed" :@"Login Failed!"];
} 
```

我无法找出这个问题背后的原因。请指出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:54:58.443

如果您正在执行某些操作，请不要连接情节提要中的视图。在这种情况下你可以这样做

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
FirstViewController *myVC = (FirstViewController *)[storyboard instantiateViewControllerWithIdentifier:@"FirstViewController1"];
[self presentViewController:myVC animated:YES completion:nil]; 
```

通过执行此操作手动推送或展示您的视图。

# php - 未定义属性“CMemCacheServerConfiguration.connectionID”

> ID：15778751
> 
> 赞同：0
> 
> 时间：2013-04-03T04:15:33.923
> 
> 标签：php, caching, yii, memcached, yii-components

当我在 Yii 中激活 memcached 时，会出现此错误消息

未定义属性“CMemCacheServerConfiguration.connectionID”。

如何解决此错误？

这是我的配置：

```
 ...
    'cache'=>array(
        'class'=>'CMemCache',
        'servers'=>array(array('host'=>'localhost','port'=>11211,'weight'=>60,),
        ),),
        .... 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:36:33.937

..hmmmm 我对你的尾随数组逗号感到困惑，还有更多代码吗？

```
'cache'=>array( 
            'class'=>'CMemCache',
            'servers'=>array( 
    array('host'=>'localhost','port'=>11211,'weight'=>60))) 
```

# php - PHP 从单选数据中获取输入并插入 MySQL 表

> ID：15778752
> 
> 赞同：0
> 
> 时间：2013-04-03T04:15:39.670
> 
> 标签：php, mysql, get, radio-button

我需要一些帮助来从用户选择的单选按钮中获取数据并将信息输入到我的数据库中的表中。

我的目的是尝试创建一个动态网站，该网站可以抓取输入的带有数据的新表格，并自动将其发布在主页上。这将是一种投标/拍卖类型的网站。

第一个问题是我试图让它检查是否有错误（用户有意或无意输入）

如果可能的话，下面的信息是否也可以输入到数组中进行存储？（不知道我问的对不对）

```
<form action="" method="post">
<ul>
<li>
Assault Ships:<br>
<input type="radio" name="item_ship" value="item_cruiser">Cruiser<br>
<input type="radio" name="item_ship" value="item_carrier">Carrier<br>
</li>
<li>
Pick a ticket:<br>
<input type="radio" name="item_tickets" value="ticket_one">One<br>
<input type="radio" name="item_tickets" value="ticket_two">Two<br>
<input type="radio" name="item_tickets" value="ticket_three">Three<br>
<input type="radio" name="item_tickets" value="ticket_four">Four<br>
<input type="radio" name="item_tickets" value="ticket_five">Five<br>
<input type="radio" name="item_tickets" value="ticket_six">Six<br>
<input type="radio" name="item_tickets" value="ticket_seven">Seven<br>
<input type="radio" name="item_tickets" value="ticket_eight">Eight<br>
</li>
<li>
<input type="submit" value="List Item">
</li>
</ul>
</form> 
```

那么完成后会发生什么，用户将选择他们想要列出的项目，然后选择他们想要购买的票，这些数据输入到我的 db_table 中，然后我的其他脚本将显示在主页上其他人将购买剩余的门票。

如果我遗漏了任何东西，请询问...对此有点陌生。期待这些板上的一些伟大思想！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:20:27.017

这是一个示例，考虑到您有一个具有以下`name`属性的单选按钮`radio_name`-

HTML：

```
<input type="radio" checked="checked" name="radio_name" /> 
```

获取 POST 值：

```
if(isset($_POST['radio_name']) && !empty($_POST['radio_name'])){
    $radioContent= $_POST['radio_name'];
} 
```

插入数据库（使用`mysqli`准备好的语句）：

```
$sql = "INSERT INTO yourTable(
        rowName
        ) 
        VALUES (?)";

if($stmt = $mysqli->prepare($sql)){
    $stmt->bind_param("i", $radioContent);
    $stmt->execute();
    $stmt->close();
}
else{
    error_log($mysqli->error);
} 
```

**使用资源：**

[插入（MYSQL）](http://www.w3schools.com/php/php_mysql_insert.asp#gsc.tab=0)

[单选按钮 POST](http://www.homeandlearn.co.uk/php/php4p10.html)

# python - Python 中带有 pandas + statsmodels 的 VAR 模型

> ID：15778753
> 
> 赞同：5
> 
> 时间：2013-04-03T04:15:43.403
> 
> 标签：python, pandas, var, statsmodels

我是 R 的狂热用户，但最近出于几个不同的原因切换到 Python。但是，我在 statsmodels 中运行 Python 中的矢量 AR 模型时遇到了一些困难。

问#1。运行此程序时出现错误，我怀疑它与我的向量类型有关。

```
 import numpy as np
    import statsmodels.tsa.api
    from statsmodels import datasets
    import datetime as dt
    import pandas as pd
    from pandas import Series
    from pandas import DataFrame
    import os

    df = pd.read_csv('myfile.csv')
    speedonly = DataFrame(df['speed'])
    results = statsmodels.tsa.api.VAR(speedonly)

    Traceback (most recent call last):
    File "<pyshell#14>", line 1, in <module>
      results = statsmodels.tsa.api.VAR(speedonly)
    File "C:\Python27\lib\site-packages\statsmodels\tsa\vector_ar\var_model.py", line 336, in __init__
      super(VAR, self).__init__(endog, None, dates, freq)
    File "C:\Python27\lib\site-packages\statsmodels\tsa\base\tsa_model.py", line 40, in __init__
      self._init_dates(dates, freq)
    File "C:\Python27\lib\site-packages\statsmodels\tsa\base\tsa_model.py", line 54, in _init_dates
      raise ValueError("dates must be of type datetime")
    ValueError: dates must be of type datetime 
```

[现在，有趣的是，当我从这里https://github.com/statsmodels/statsmodels/blob/master/docs/source/vector_ar.rst#id5](https://github.com/statsmodels/statsmodels/blob/master/docs/source/vector_ar.rst#id5)运行 VAR 示例时，它工作正常。

我尝试使用 Wes McKinney 的“Python for Data Analysis”第 293 页中的第三个较短向量 ts 的 VAR 模型，但它不起作用。

好的，所以现在我想这是因为向量是不同的类型：

```
 >>> speedonly.head()
         speed
    0  559.984
    1  559.984
    2  559.984
    3  559.984
    4  559.984
    >>> type(speedonly)
    <class 'pandas.core.frame.DataFrame'> #DOESN'T WORK

    >>> type(data)
    <type 'numpy.ndarray'> #WORKS

    >>> ts
    2011-01-02   -0.682317
    2011-01-05    1.121983
    2011-01-07    0.507047
    2011-01-08   -0.038240
    2011-01-10   -0.890730
    2011-01-12   -0.388685
    >>> type(ts)
    <class 'pandas.core.series.TimeSeries'> #DOESN'T WORK 
```

所以我将 speedonly 转换为 ndarray ......它仍然无法正常工作。但这一次我得到另一个错误：

```
 >>> nda_speedonly = np.array(speedonly)
   >>> results = statsmodels.tsa.api.VAR(nda_speedonly)

   Traceback (most recent call last):
   File "<pyshell#47>", line 1, in <module>
     results = statsmodels.tsa.api.VAR(nda_speedonly)
   File "C:\Python27\lib\site-packages\statsmodels\tsa\vector_ar\var_model.py", line 345, in __init__
     self.neqs = self.endog.shape[1]
   IndexError: tuple index out of range 
```

有什么建议么？

问#2。我的数据集中有似乎对预测有用的外生特征变量。来自 statsmodels 的上述模型是否是最好的模型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T16:45:31.203

当您将 pandas 对象提供给时间序列模型时，它期望索引是日期。当前源中的错误消息已得到改进（即将发布）。

```
ValueError: Given a pandas object and the index does not contain dates 
```

在第二种情况下，您将单个 1d 系列提供给 VAR。当您有多个系列时使用 VAR。这就是你有形状错误的原因，因为它期望你的数组中有第二个维度。我们可能会在这里改进错误消息。对于具有外生变量的单系列 AR 模型，您可能希望使用 sm.tsa.ARMA。请注意，ARMA.predict 中存在一个[已知错误](https://github.com/statsmodels/statsmodels/issues/736)，该错误将很快修复具有外生变量的模型。如果您可以为此提供一个测试用例，那将很有帮助。

# erlang - 如何使用动态监督确定 RestartStrategy

> ID：15778760
> 
> 赞同：2
> 
> 时间：2013-04-03T04:16:35.940
> 
> 标签：erlang, erlang-otp

如果静态启动子规范：

```
init(...) ->
    {ok, {{RestartStrategy, MaxR, MaxT},
          [ChildSpec, ...]}}. 
```

但是，如果我动态启动子规范：

```
start_child(SupRef, ChildSpec) -> startchild_ret() 
```

如何确定 RestartStrategy、 MaxR 和 MaxT ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:15:38.480

您无法在 start_child 或其他任何地方动态地确定 RestartStrategy、MaxR 和 MaxT。这些是主管的属性（不是孩子的），您只能在主管的 init/1 回调中确定它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:12:16.300

鉴于`RestartStrategy`是主管而不是其子级的属性，您可以在监督树中添加一个额外的层，并将多个主管作为*根*主管的子级。每个*下级主管*将指定不同的`RestartStrategy`. 然后，您会将孩子添加到相应的主管。

![在此处输入图像描述](https://i.stack.imgur.com/LedtY.png)

图片来自[Learn You Some Erlang](http://learnyousomeerlang.com/supervisors)。

# android - 通过其 ID (R.id.) 获取 String 的长度

> ID：15778768
> 
> 赞同：0
> 
> 时间：2013-04-03T04:17:21.417
> 
> 标签：android, database, string, android-listview, int

我在我的应用程序中有一个列表视图，显示来自数据库的元素。列表视图的每个元素都显示了我的数据库元素中的一些内容，以及一个按钮。

稍后，我会让这个按钮打开电话的拨号菜单，并在点击时拨打一个号码。我现在想要的是仅当我的数据库中与列表视图关联的元素的长度等于 7 时才显示此按钮。我的问题是使用对象的 id 从我的数据库中调用该字符串的长度.

这是我的代码，我想检查长度的元素是带有 R.id.telephone 的“电话”，它从数据库中调用，然后发送到另一个活动：

```
private void displayListView() {

    // getExtra
    Bundle bundle = getIntent().getExtras();
    String title = bundle.getString("title", "Choose here :");
    String inInterval = bundle.getString("inInterval");
    Log.d(TAG, "inInterval = " + inInterval);

    poititle.setText(title);

    // put the results of the method in a cursor
    Cursor c = dbHelper.findPoiInTable(inInterval);
    String[] columns = new String[] { DatabaseAdapter.COL_NAME,
            DatabaseAdapter.COL_STREET, DatabaseAdapter.COL_WEBSITE,
            DatabaseAdapter.COL_TELEPHONE, DatabaseAdapter.COL_REMARKS,
            DatabaseAdapter.COL_PRICE };
    int[] to = new int[] { R.id.name, R.id.street, R.id.website,
            R.id.telephone, R.id.remarks, R.id.price };
    cursorAdapter = new SimpleCursorAdapter(this, R.layout.poi_info, c,
            columns, to, 0);

    ListView listView = (ListView) findViewById(R.id.poilistview);
    // Assign adapter to ListView
    listView.setAdapter(cursorAdapter);

    listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        // Comportement des éléments de la listview
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            Intent i = new Intent(getApplicationContext(),
                    POIActivity.class);

            String name = ((TextView) view.findViewById(R.id.name))
                    .getText().toString();
            String website = ((TextView) view.findViewById(R.id.website))
                    .getText().toString();
            String telephone = ((TextView) view
                    .findViewById(R.id.telephone)).getText().toString();
            String remarks = ((TextView) view.findViewById(R.id.remarks))
                    .getText().toString();
            String price = ((TextView) view.findViewById(R.id.price))
                    .getText().toString();
            // i.putExtra(ID_EXTRA, name) ;
            i.putExtra(ID_NAME, name);
            i.putExtra(ID_WEBSITE, website);
            i.putExtra(ID_TELEPHONE, telephone);
            i.putExtra(ID_REMARKS, remarks);
            i.putExtra(ID_PRICE, price);
            startActivity(i);
        }

    }); } 
```

这是我尝试过的：我在同一个活动中创建了一个方法 callbuttonManagement()，我从上面的 diplsayListView() 方法调用了该方法，并且我以这种方式定义：

```
public void callbuttonManagement() {

    int countTelephone = ID_TELEPHONE.length();
    if (countTelephone == 7)
    {
        callButton.setVisibility(View.VISIBLE);
    }
    else
    {
        callButton.setVisibility(View.GONE);
    }

} 
```

它使我的应用程序崩溃，并且 logcat 指示空指针异常。有什么建议么 ？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:35:28.090

```
class member boolean mShowButton;
String telephone = ((TextView) view
                .findViewById(R.id.telephone)).getText().toString();

if (telephone.length() == 7)
{
     mShowButton = true:
}

public void callbuttonManagement() {

if (mShowButton)
{
    callButton.setVisibility(View.VISIBLE);
}
else
{
    callButton.setVisibility(View.GONE);
}

} 
```

# mysql - 在 MySQL 中，我们如何在查询中使用定义的变量

> ID：15778770
> 
> 赞同：1
> 
> 时间：2013-04-03T04:17:36.853
> 
> 标签：mysql

```
set @total_balance=0;
select total_balance=if(a.transaction_type='+c') then total_balance=total_balance+a.tran_amount
else if(a.transaction_type='-p'or '-r') then total_balance=total_balance-a.tran_amount
END
from lib_user_account a
where employee_Id='1004'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:22:08.543

```
SUM(IF(a.transaction_type='+c', a.tran_amount, -a.tran_amount)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:35:46.137

正如 zerkms 所提到的，最好在查询中使用 sum 函数，但是要回答有关如何在 MYSQL 中使用用户定义变量的问题，您可以在查询中以下列方式使用它

```
select 
  @total_balance:=if(a.transaction_type='+c', @total_balance+a.tran_amount, if(a.transaction_type='-p' or a.transaction_type='-r', @total_balance-a.tran_amount, a.tran_amount))
from 
  lib_user_account a
join 
  (select @total_balance:=0) userVar
where 
  employee_Id='1004'; 
```

**[有关用户定义变量的更多信息，请参阅](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)**

# wordpress - 如何默认启用菜单屏幕选项 CSS 类？

> ID：15778772
> 
> 赞同：0
> 
> 时间：2013-04-03T04:17:43.613
> 
> 标签：wordpress, wordpress-theming

![菜单屏幕选项](https://i.stack.imgur.com/QyK27.png)

我想`CSS classes`默认启用菜单屏幕选项。
我应该使用什么代码来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T05:02:07.220

您可以在函数中检查用户元键的`get_user_option_{$option}`位置添加过滤器。如果元值是，这将是用户第一次登录，它会设置默认的隐藏选项。如果您对此进行了挂钩，则可以设置自己的默认值并确保它永远不会返回。`{$option}``managenav-menuscolumnshidden``wp_nav_menu_setup()``false``false`

```
// add a filter to catch unset hidden options
add_filter( 'get_user_option_managenav-menuscolumnshidden', 'my_default_menuscolumnshidden', 99, 3 );
function my_default_menuscolumnshidden( $result, $option, $user_id ){
    if( $option == "managenav-menuscolumnshidden" ){
        // remove this function to prevent a loop
        remove_filter( 'get_user_option_managenav-menuscolumnshidden', 'my_default_menuscolumnshidden', 99 );
        // check if it is false (first login)
        $result = get_user_option( $option );
        if ( false === $result ) {
            // update with your own defaults (omits CSS from the hidden options)
            $result = array( 0 => 'link-target', 1 => 'xfn', 2 => 'description' );
            update_user_option($user->ID, 'managenav-menuscolumnshidden',
                $result,
                true);
        }
        // re-add filter in case it gets called again
        add_filter( 'get_user_option_managenav-menuscolumnshidden', 'my_default_menuscolumnshidden', 99 );
    }
    // if this was false before, now it is set to custom defaults
    return $result;
} 
```

# sql - 根据另一张表中的数据更新一张表

> ID：15778773
> 
> 赞同：1
> 
> 时间：2013-04-03T04:17:50.610
> 
> 标签：sql, sql-update

我有 2 张桌子，`table1`带有 cols`v1`和`v2`，`table2`带有 cols`v3`和`v4`。

我想更新`table2.v2`是否`table1.v1`有匹配的值`table2.v3`。

我有以下似乎有效的代码

```
UPDATE table1
SET v2 = 99
WHERE exists(select v3 from table2
where table2.v3=table1.v1); 
```

我还尝试了一个失败的相交版本（更新 v2 的两行）

```
UPDATE table1
SET v2 = 99
WHERE exists(select v1 from table1
intersect select v3 from table2); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T04:57:39.000

为此，我们有两个答案

1）内连接

```
UPDATE table1
SET v2 = 99
FROM table2 
     INNER JOIN table1
     ON table2.v3= table1.v1 
```

2) with in 子句

```
 UPDATE table1
 SET v2 = 99
 Where v1 in (Select v3 FROM table2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T05:05:05.463

根据我的观点，首先通过“如果存在”检查表的值，如下所示，然后应用于更新。

```
IF EXISTS
(
 select V1 from T2
 where v1 in (select v1 from t2)
)

BEGIN
UPDATE T1
SET v2 = 99
end 
```

干杯.....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T04:22:12.353

请检查以下是否是您的要求：

```
UPDATE table1
SET v2 = 99
WHERE v1 IN (select v3 from table2) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T04:29:17.923

我认为您不能在此查询中使用 intersect ，因为您没有在子查询和外部查询之间使用任何连接条件。我确实认为 Exists 期望这种情况。

试试用这个，

```
UPDATE table1
SET v2 = 99
WHERE v1 in (select v1 from table1
intersect select v3 from table2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T04:23:29.353

使用连接更新表。

```
UPDATE table2
SET v2 = 99
From table2 Inner Join table1 on  table1.v1=table2.v3 
```

# ffmpeg - 使用 FFMPEG 将 YUV 无损转换为另一种格式，以便在 Adob e Premier 中进行编辑

> ID：15778774
> 
> 赞同：31
> 
> 时间：2013-04-03T04:17:55.677
> 
> 标签：ffmpeg, yuv

我有一个原始 YUV 视频文件，我想在 Adob​​e CS6 Premiere 中对其进行一些基本编辑，但它无法识别该文件。我想使用 ffmpeg 将其转换为 Premiere 可以接受的内容，但我希望它是无损的，因为之后我将再次需要 YUV 格式的它。我想到了 avi、mov 和 prores，但我似乎无法弄清楚 ffmpeg 的正确命令行以及如何确保它是无损的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-03T07:08:38.400

是的，这是可能的。您无法打开该原始视频文件是正常的，因为它只是一个巨大文件中的原始数据，没有任何标题。所以 Adob​​e Premiere 不知道尺寸是多少，帧率是多少等。

首先确保您下载了[FFmpeg](https://ffmpeg.org/download.html)命令行工具。然后在安装后，您可以通过运行带参数的命令开始转换。在开始转换之前，您必须自己填写一些参数：

1.  您使用的是什么类型的 YUV 像素格式？最常见的格式是 YUV4:2:0 平面 8 位 ( `YUV420p`)。您可以键入`ffmpeg -pix_fmts`以获取所有可用格式的列表。
2.  什么是帧率？在我的示例中，我将使用`-r 25`fps。
3.  你想用什么编码器？libx264 (H.264) 编码器非常适合无损压缩[。](http://www.videolan.org/developers/x264.html)
4.  你的框架尺寸是多少？在我的示例中，我将使用`-s 1920x1080`

然后我们得到这个命令来做你的压缩。

`ffmpeg -f rawvideo -vcodec rawvideo -s 1920x1080 -r 25 -pix_fmt yuv420p -i inputfile.yuv -c:v libx264 -preset ultrafast -qp 0 output.mp4`

对所有其他参数的一点解释：

*   将`-f rawvideo`输入格式设置为原始视频容器
*   将`-vcodec rawvideo`输入文件设置为未压缩
*   随着`-i inputfile.yuv`您设置输入文件
*   `-c:v libx264`设置编码器以将视频编码为 libx264 。
*   该`-preset ultrafast`设置只是加快压缩速度，因此您的文件大小将大于将其设置为`veryslow`.
*   与`-qp 0`您一起设置最高质量。在我们的示例中，0 是最好的，51 是最差的质量。
*   然后`output.mp4`是您存储数据的新容器。

在 Adob​​e Premiere 中完成后，您可以通过反转所有参数将其转换回 YUV 文件。FFmpeg 可以识别 mp4 容器内的内容，因此您无需为输入提供参数。

`ffmpeg -i input.mp4 -f rawvideo -vcodec rawvideo -pix_fmt yuv420p -s 1920x1080 -r 25 rawvideo.yuv`

# jquery - jQuery Show Div 清除

> ID：15778775
> 
> 赞同：0
> 
> 时间：2013-04-03T04:17:55.883
> 
> 标签：jquery, css, show-hide, jquery-isotope

我正在尝试这样做，以便当您单击此[**页面**](http://bvh.delineamultimedia.com/?page_id=2)上的图像时，下拉菜单将清除第二行图像。

我有一个

```
clear:both; 
```

&

```
float:left 
```

上`.superbox-show`

但它仍然没有清除第二行并在显示 onclick 时推送下面的图像。`.superbox-show`理想情况下，如果有意义的话，我希望所有的div 都显示在行下的同一位置，将所有图像向下推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:32:49.690

您正在使用 transform css 属性按绝对位置定位图像。

这意味着图像的定位独立于任何浮动，浮动清除不会影响它们的定位。

要解决此问题，请使用`align: left`定位您的图像。然后，当您在图像之间插入一个项目时`clear:both`，它将导致您的图像从新行恢复。

**不推荐：**或者，当您显示对话框时，您需要更改`.superbox-show`.

# c# - 将 MVC 4 应用程序中的 DateTime.Now 转换为我所在国家/地区的标准时间（当应用程序部署在美国时）

> ID：15778784
> 
> 赞同：1
> 
> 时间：2013-04-03T04:19:12.880
> 
> 标签：c#, asp.net-mvc, azure

我已经开发了一个带有 C# 应用程序的 MVC 4，我已经使用 Windows Azure 将它部署到了他们在弗吉尼亚州的数据中心。我在我的应用程序中记录用户活动，记录用户名和活动启动的时间。记录的时间需要转换为斐济标准时间。根据我在网上找到的内容，我编写了一个扩展方法来帮助实现此功能。

```
public static DateTime ToFijiTime(this DateTime datetime)
{

        datetime = DateTime.SpecifyKind(datetime, DateTimeKind.Utc);
        TimeZoneInfo tz = TimeZoneInfo.FindSystemTimeZoneById("Fiji Standard Time");
        DateTime MyDateTime = TimeZoneInfo.ConvertTime(datetime, tz);
        return TimeZoneInfo.ConvertTimeToUtc(MyDateTime, tz);        
} 
```

但是，一旦部署，这并不能很好地工作。我得到了正确的日期和几乎正确的时间。由于某种原因，它总是将时间作为“上午”时间。例如，如果时间应该是 2/04/2013 6:30:19 PM（斐济标准时间）记录的时间实际上是 2/04/2013 6:30:19 AM（斐济标准时间），但时间在早上喜欢 2/04/2013 1:30:19 AM 正确保存。谁能告诉我我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:39:26.070

然后存储用户时区服务器端，

**使用以下：**

```
@TimeZoneInfo.ConvertTimeFromUtc(Model.CreatedOn, TimeZoneInfo.FindSystemTimeZoneById("E. US Standard Time")) 
```

另请参阅：

[将 UTC/GMT 时间转换为本地时间](https://stackoverflow.com/questions/179940/c-sharp-convert-utc-gmt-time-to-local-time)

# perl - 管道 Perl 命令？

> ID：15778786
> 
> 赞同：0
> 
> 时间：2013-04-03T04:19:17.767
> 
> 标签：perl, unix, piping

我目前正在尝试使用我的程序并让它接受用户输入，通常是一个文本文件，然后调用一个外部脚本来计算单词。我正在处理的脚本本质上是一个“中间人”，我正在尝试更熟悉到外部脚本/命令的管道。它目前没有正确执行单词计数器脚本。这是代码：

我仍然收到 ./word_counter.pl 的错误消息，说“glue.pl 中没有这样的文件或目录（您在此处看到的脚本）”。

```
#!usr/bin/perl
use warnings;
use strict;
use IO::Handle qw();

open (PIPE_TO, "|-", "./word_counter.pl");
While(<>)
{
$PIPE_TO -> autoflush(1);
print PIPE_TO $_;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:45:29.857

受缓冲之苦？

```
use IO::Handle qw( );
PIPE_TO->autoflush(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:09:56.383

这是你想要做的吗？

```
#!/usr/bin/perl
use warnings;
use strict;

open (my $PIPE_TO, "|-", "./word_counter.pl") or die $!;
while(<>) {
  print $PIPE_TO $_;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:54:00.053

The reason it doesn't work is probably that you have syntax errors.

Otherwise: Other than introducing line-buffered semantics, you are really doing nothing here (you just pipe what you read to another program, which is in this case equivalent to just running the program)

Modulo the buffering (which you don't seem to explicitly need) an equivalent script would be:

```
#!/usr/bin/perl

exec ("./word_counter.pl"); 
```

# mysql - 在mysql中查找最小访问记录

> ID：15778791
> 
> 赞同：0
> 
> 时间：2013-04-03T04:19:52.063
> 
> 标签：mysql, database

我有一个表，其中包含`id, name and address`并且该表可能包含 1000 条记录。现在我想为可能早于 1 个月的最少（最少）访问记录进行备份。较旧的记录是根据其访问权限选择的。主**表**只包含*经常*访问的记录。是否可以在mysql（查询）中找到最少访问的记录？？？

# python - Python 日历小部件

> ID：15778792
> 
> 赞同：0
> 
> 时间：2013-04-03T04:20:02.663
> 
> 标签：python, calendar, tkinter

我通过[这篇文章找到](https://stackoverflow.com/questions/4443786/how-do-i-create-a-date-picker-in-tkinter)[了这个](http://svn.python.org/projects/sandbox/trunk/ttk-gsoc/samples/ttkcalendar.py)Python 日历小部件。我正在尝试打印出用户在日历上选择的日期。我尝试的是这样的

```
mycalendar=Calendar()
print mycalendar.selection() 
```

我知道仅这一小段代码并不能说明问题。"Calendar" 是一个类，而 selection(self) 是 Calendar 类中的一个函数，具有返回值。为了清楚地理解，请参阅我上面提供的链接，因为代码太长，无法在此处发布。

我的问题是一旦我运行脚本，而不是给我函数的返回号，它给了我这个错误消息“TypeError：'NoneType' object is not callable”。有没有办法让用户在日历上选择的日期打印出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:40:14.353

在您发布的课程中，该`_pressed`函数在用户在日历窗口内单击鼠标后被调用。

要打印日期，`print self.selection`请在以下代码块之后添加：

```
 # update and then show selection
    text = '%02d' % text
    self._selection = (text, item, column)
    self._show_selection(text, bbox)

    print self.selection  # print the date selected to the console 
```

# java - 如何获取类中属性的所有访问器方法？

> ID：15778801
> 
> 赞同：0
> 
> 时间：2013-04-03T04:20:37.883
> 
> 标签：java

我想检索 Java 类中给定属性的所有访问器。我已经尝试了一些东西，但它没有给出我期望的输出。例如：

```
public class demo {
    private String abc;

    public String getAbc() {
        return abc;
    }

    public void setAbc(String abc) {
        this.abc = abc;
    }

    public String fetchAbc() {
        return abc;
    }
} 
```

在这里，该`abc`属性有两个 getter，我想在我的项目中找到出现的情况。我尝试了以下代码，它使用了 BeanInfo API，但它只给了我一个访问器：

```
import java.beans.BeanInfo;
import java.beans.IntrospectionException;
import java.beans.Introspector;
import java.beans.PropertyDescriptor;

public class BeanDemo {

    public void myMethod() throws IntrospectionException {
        BeanInfo beanInfo = Introspector.getBeanInfo(demo.class);

        for (PropertyDescriptor property : beanInfo.getPropertyDescriptors()) {
            //all attributes of class.
            property.getReadMethod(); // getter
            property.getWriteMethod(); // setter
        }
    }
} 
```

谁能告诉是否有另一个 API 可以用来完成这个？我可以玩反射，但这不是正确的方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:36:22.203

首先： [遵循 JavaBean 约定是有帮助的。](http://en.wikipedia.org/wiki/JavaBeans#JavaBean_conventions) 如果您有一个说“检索”的方法，但它是一个实际的 getter，那么它比 Java 更让您感到困惑 - 为什么应该有不止一种方法来获取一个字段？

第二： **反思是你的朋友。** 您可以以非常轻松的方式反射性地提取有关对象的信息，并检索您想要的结果。您应该查看[Reflection Trail](http://docs.oracle.com/javase/tutorial/reflect/)，因为它包含大量有用的信息来帮助您入门。

这是一个小示例 - 它将获取此类中标记为“get”的所有方法。

```
public class StackOverflow {
    public static void main(String[] args) throws ClassNotFoundException {
        Method[] methods = Class.forName("Fake").getMethods();
        for(Method m : methods) {
            if(!m.getDeclaringClass().equals(Object.class) && m.toGenericString().contains("get")) {
                System.out.println(m.toGenericString());
            }
        }
    }
}

class Fake {
    private String objField;
    private int primitiveField;
    private boolean[] arrayField;

    public void setObjField(final String theObjField) {
        objField = theObjField;
    }

    public void setPrimitiveField(final int thePrimitiveField) {
        primitiveField = thePrimitiveField;
    }

    public void setArrayField(final boolean[] theArrayField) {
        arrayField = theArrayField;
    }

    public String getObjField() {
        return objField;
    }

    public int getPrimitiveField() {
        return primitiveField;
    }

    public boolean[] getArrayField() {
        return arrayField;
    }
} 
```

上述输出：

```
public java.lang.String Fake.getObjField()
public int Fake.getPrimitiveField()
public boolean[] Fake.getArrayField() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:50:44.460

Reflection is going only to look at the names and signatures of the methods, it does not look at what they actually do. So can you reliably identify an get/set on that basis?

You can identify all fields: aaa, bbb etc, and then look for all methods whose signatures look like accessors and whose names contain aaa or bbb etc. So you'd find getAaa(), setBbb() and fetchAaa(), and perhaps even bbbFetcher(), but you cannot be sure that any of these really are what you are looking for. Even were you to scan the source it's tricky: Consider

```
getMagnitude() { return squareRoot( x squared plus y squared) } 
```

is that a getter?

Bottom line: pattern matching on names of fields and methods will give you candidates, but you have to devise the matching rules that fit your needs.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:27:48.857

我会鼓励你“玩反射”，因为这正是正确的方法。

[**从这里**](http://docs.oracle.com/javase/tutorial/reflect/)开始，进行一般的反思，或者从[**这里开始**](http://docs.oracle.com/javase/tutorial/reflect/class/index.html)，进行课程。您可能还会发现[**此参考页面**](http://docs.oracle.com/javase/tutorial/reflect/class/classMembers.html)很有用。

这里有一个提示：

```
Method[] methods = demo.class.getMethods();
for (int i=0; i<methods.length; i++) {
    Method method = methods[i];
    // Take a look at the Method documentation to find out more:
    // http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html

    // Or, look at the Method tutorial here:
    // http://docs.oracle.com/javase/tutorial/reflect/member/method.html
} 
```

至少检查一下[`Class<T>`班级](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html)和[`Method`班级。](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html)

# c++ - 为什么 ++i 比 i++ 更有效？

> ID：15778806
> 
> 赞同：3
> 
> 时间：2013-04-03T04:21:11.627
> 
> 标签：c++, for-loop, while-loop, do-while

根据[Google C++ Style Guide](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml?showone=Preincrement_and_Predecrement#Preincrement_and_Predecrement)，“当返回值被忽略时，'pre' 形式 ( `++i`) 的效率永远不会低于 'post' 形式 ( `i++`)，而且通常更有效。”

该指南继续解释原因，但我并不完全理解。想法？也许有人可以提供这个概念的例子？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T04:25:12.020

`i++`递增`i`并返回 的初始值`i`。意思是：

```
int i = 1;
i++; // == 1 but i == 2 
```

但`++i`返回实际增加的值：

```
int i = 1;
++i; // == 2 and i == 2 too, so no need for a temporary variable 
```

在第一种情况下，编译器必须创建一个临时变量（使用时）来返回`1`而不是`2`（在它当然不是常量而是动态值的情况下，例如从调用返回）。

在第二种情况下，它不必。因此，保证第二种情况至少同样有效。

通常，编译器能够将第一种情况优化为第二种情况，但有时它可能无法做到。

无论如何，我们谈论的是微不足道的影响。

但是在更复杂的对象上，例如`iterators`-like 对象，如果迭代数百万次，具有临时状态可能会非常慢。

**经验法则**

除非您特别想要后缀语义，否则请使用前缀版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T04:25:24.250

引用自：

[http://www.parashift.com/c++-faq/increment-pre-post-speed.html](http://www.parashift.com/c++-faq/increment-pre-post-speed.html)

++i 有时比 i++ 快，而且从不慢于 i++。

对于像 int 这样的内在类型，这并不重要：++i 和 i++ 的速度相同。对于像迭代器这样的类类型，++i 很可能比 i++ 快，因为后者可能会复制 this 对象。

i++ 的开销（如果有的话）可能不会产生任何实际影响，除非您的应用程序受 CPU 限制。例如，如果您的应用程序大部分时间都在等待某人单击鼠标、执行磁盘 I/O、网络 I/O 或数据库查询，那么浪费几个 CPU 周期不会影响您的性能。然而，键入 ++i 和键入 i++ 一样容易，所以为什么不使用前者，除非您确实需要 i 的旧值。

因此，如果您将 i++ 编写为语句而不是更大表达式的一部分，为什么不直接编写 ++i 呢？你永远不会失去任何东西，有时你会有所收获。老 C 程序员习惯于编写 i++ 而不是 ++i。例如，他们会说，

```
for (i = 0; i < 10; i++) .... 
```

由于这将 i++ 用作语句，而不是更大表达式的一部分，因此您可能希望使用 ++i 代替。对于对称性，我个人提倡这种风格，即使它不会提高速度，例如，对于内在类型和带有返回 void 的后缀运算符的类类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:25:34.543

i++ - 使用 i 后值递增 ++i - 值立即递增。

可能存在性能差异，因为 ++i 要求 i 立即递增，期间。i++ 继续建议在增加之前可能需要 i 。该值可能会在增加之前存储在某处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T04:25:53.067

递增（或递减）运算符涉及两个操作：递增和取两个值（旧值或新值）之一作为表达式的结果。区别在于拿哪一个。

如果您采用预制件，您首先增加然后采用新的值。

在你讲述后表单时，你获取旧值，保留它，增加它，将新值放入旧位置并返回旧值。这听起来更复杂 - 确实如此。

但是如果表达式的返回值被忽略，它应该没有任何区别，不管你有一个内置的类型还是一个对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T04:26:06.960

对于迭代器和其他模板类型，使用预增量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T04:26:21.583

这是因为当您进行后增量时，您必须：

1.  更改值并同时
2.  将旧值分配给其他东西。

只需保留该变量的两个副本，而复制和删除需要额外的时间......

# android - 如何检测用户何时打开/关闭 GPS 状态？

> ID：15778807
> 
> 赞同：24
> 
> 时间：2013-04-03T04:21:13.210
> 
> 标签：android, gps, broadcastreceiver

我想阻止用户从我的应用程序中更改 WiFi、GPS 和加载设置。运行我的应用程序时，用户不需要打开/关闭 WiFi 和 GPS。（来自通知栏）。有没有`BroadcastReceiver`听GPS开/关的存在？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2016-09-26T12:23:32.370

好吧，我做了很多挖掘，发现它 `addGpsStatusListener(gpsStatusListener)`在 API 24 中已被弃用。对我来说，这甚至都行不通！因此，这是另一个替代解决方案。

如果在您的应用程序中，您想收听 GPS 状态变化*（我的意思是用户开/关）*。使用**广播**肯定是最好的方法。

执行：

```
/**
 * Following broadcast receiver is to listen the Location button toggle state in Android.
 */
private BroadcastReceiver mGpsSwitchStateReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {

        if (intent.getAction().matches("android.location.PROVIDERS_CHANGED")) {
            // Make an action or refresh an already managed state.
        }
    }
}; 
```

不要忘记在 Fragment/Activity Lifecycle 中有效地注册和取消注册。

```
registerReceiver(mGpsSwitchStateReceiver, new IntentFilter(LocationManager.PROVIDERS_CHANGED_ACTION)); 
```

例如，如果您正在使用此 a `Fragment`，请在 中注册并在 中`onResume`取消注册`onDestroy`。此外，如果您将用户引导至启用位置开关的设置，则在其中取消注册`onStop`将不起作用，因为您的活动将进入`onPause`并且片段已停止。

这个解决方案可能有很多答案，但是这个解决方案很容易管理和使用。如果有的话，提出你的解决方案。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-03T04:51:19.273

You can listen the GPS status with a GpsStatus.Listener and register it with the LocationManager.

```
LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
lm.addGpsStatusListener(new android.location.GpsStatus.Listener()
{
    public void onGpsStatusChanged(int event)
    {
        switch(event)
        {
        case GPS_EVENT_STARTED:
            // do your tasks
            break;
        case GPS_EVENT_STOPPED:
            // do your tasks
            break;
        }
    }
}); 
```

You need to have access to the context (for example in an "Activity" or "Application" class).

*   [https://developer.android.com/reference/android/location/GpsStatus.Listener.html](https://developer.android.com/reference/android/location/GpsStatus.Listener.html)
*   [https://developer.android.com/reference/android/location/LocationManager.html](https://developer.android.com/reference/android/location/LocationManager.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-08T09:12:22.570

`LocationManager.PROVIDERS_CHANGED_ACTION`在您的活动方法中收听事件`onResume()`：

```
IntentFilter filter = new IntentFilter(LocationManager.PROVIDERS_CHANGED_ACTION);
filter.addAction(Intent.ACTION_PROVIDER_CHANGED);
mActivity.registerReceiver(gpsSwitchStateReceiver, filter); 
```

将此实例添加`BroadcastReceiver`到您的活动中：

```
private BroadcastReceiver gpsSwitchStateReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {

            if (LocationManager.PROVIDERS_CHANGED_ACTION.equals(intent.getAction())) {

                LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
                boolean isGpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
                boolean isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

                if (isGpsEnabled || isNetworkEnabled) {
                    // Handle Location turned ON
                } else {
                    // Handle Location turned OFF
                }
            }
        }
    }; 
```

在您的活动方法中取消注册接收器`onPause()`：

```
mActivity.unregisterReceiver(gpsSwitchStateReceiver); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-03T04:24:24.663

这是不可能的。您无法随心所欲地控制/限制硬件的状态。这在 API 中是很危险的，因此不存在这样的 API 是理所当然的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-06-08T04:44:03.977

在*Kotlin*中试试这个：

添加一个扩展**BroadcastReceiver**的类：

```
class GPSCheck(private val locationCallBack: LocationCallBack) :
    BroadcastReceiver() {
    interface LocationCallBack {
        fun turnedOn()
        fun turnedOff()
    }

    override fun onReceive(context: Context, intent: Intent) {
        val locationManager =
            context.getSystemService(LOCATION_SERVICE) as LocationManager
        if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) locationCallBack.turnedOn() else locationCallBack.turnedOff()
    }

} 
```

然后作为示例以这种方式使用它：

```
class MainActivity :AppCompatActivity(){

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        registerReceiver(GPSCheck(object : GPSCheck.LocationCallBack {
            override fun turnedOn() {
                Log.d("GpsReceiver", "is turned on")
            }

            override fun turnedOff() {
                Log.d("GpsReceiver", "is turned off")
            }
        }), IntentFilter(LocationManager.MODE_CHANGED_ACTION))
    }} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-03T04:41:05.967

您可以注册一个`BroadcastReceiver`用于收听`Intent`Action `PROVIDERS_CHANGED_ACTION`。这将在配置的位置提供程序更改时广播。你可以参考这个[链接](http://developer.android.com/reference/android/location/LocationManager.html#PROVIDERS_CHANGED_ACTION)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-06-10T11:36:16.007

我们可以使用**LocationListener**来了解 GPS 何时开启以及何时关闭。

```
class HomeActivity : AppCompatActivity() {
    private var locManager: LocationManager? = null
    private val locListener: LocationListener =
        object : LocationListener {
            override fun onLocationChanged(loc: Location) {
            }

            override fun onProviderEnabled(provider: String) {
                Log.d("abc", "enable")
            }

            override fun onProviderDisabled(provider: String) {
                Log.d("abc", "disable")
            }

            override fun onStatusChanged(
                provider: String,
                status: Int,
                extras: Bundle
            ) {
            }
        }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        locManager = getSystemService(Context.LOCATION_SERVICE) as LocationManager
    }

    override fun onResume() {
        super.onResume()
        startRequestingLocation()
    }

    override fun onStop() {
        super.onStop()
        try {
            locManager!!.removeUpdates(locListener)
        } catch (e: SecurityException) {
        }
    }

    private fun startRequestingLocation() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M &&
            checkSelfPermission(Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED
        ) {
            requestPermissions(
                arrayOf(Manifest.permission.ACCESS_FINE_LOCATION),
                PERMISSION_REQUEST
            )
            return
        }
        locManager!!.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0f, locListener)
    }

    companion object {
        private const val PERMISSION_REQUEST = 1
    }
} 
```

有关更多详细信息，请参阅此项目：[https ://github.com/pR0Ps/LocationShare](https://github.com/pR0Ps/LocationShare)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-03T04:50:07.637

You can detect status of GPS by following way.

Look at [GpsStatus.Listener](http://developer.android.com/reference/android/location/GpsStatus.Listener.html). Register it with locationManager.addGpsStatusListener(gpsStatusListener).

Also check this SO [link](https://stackoverflow.com/questions/13524164/how-to-get-notified-when-the-gps-in-disabled-by-the-user-in-android) for better understanding.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-13T14:17:06.760

从 API 19 开始，您可以注册一个`BroadcastReceiver`用于监听意图操作`LocationManager.MODE_CHANGED_ACTION`

参考：[https ://developer.android.com/reference/android/location/LocationManager.html#MODE_CHANGED_ACTION](https://developer.android.com/reference/android/location/LocationManager.html#MODE_CHANGED_ACTION)

您可以使用

```
try
{
    int locationMode = android.provider.Settings.Secure.getInt(context.getContentResolver(), android.provider.Settings.Secure.LOCATION_MODE);
} catch (android.provider.Settings.SettingNotFoundException e)
{
    e.printStackTrace();
} 
```

返回的值应该是以下之一：

```
android.provider.Settings.Secure.LOCATION_MODE_BATTERY_SAVING
android.provider.Settings.Secure.LOCATION_MODE_HIGH_ACCURACY
android.provider.Settings.Secure.LOCATION_MODE_OFF
android.provider.Settings.Secure.LOCATION_MODE_SENSORS_ONLY 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-12-03T11:48:46.977

您不能使用 GpsStatus.Listener 来执行此操作。您必须使用广播接收器。使用 LocationManager.PROVIDERS_CHANGE_ACTION。不使用 Intent.ACTION_PROVIDER_CHANE。祝你好运 ！

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-07-31T09:07:33.010

我`android.location.LocationListener`为此目的使用：

```
`class MyOldAndroidLocationListener implements android.location.LocationListener {
    @Override public void onLocationChanged(Location location) { }

    //here are the methods you need
    @Override public void onStatusChanged(String provider, int status, Bundle extras) {}
    @Override public void onProviderEnabled(String provider) { }
    @Override public void onProviderDisabled(String provider) { }
}` 
```

注意（来自[文档](https://developer.android.com/reference/android/location/LocationListener)）：*如果 LocationListener 已使用该方法向位置管理器服务注册，则调用这些`LocationManager.requestLocationUpdates(String, long, float, LocationListener)`方法*

由于我使用 Fused Location API 来处理与位置相关的内容，因此我只需设置 `long minTime`= 1 小时 `float minDistance`= 1 公里，`requestLocationUpdates` 这对我的应用程序产生的开销非常小。

当然，完成后不要忘记`locationManager.removeUpdates`。

# java - 如何在关闭窗口/框架之前执行任务？

> ID：15778813
> 
> 赞同：1
> 
> 时间：2013-04-03T04:21:52.800
> 
> 标签：java, swing, jframe

提供`JFrame`了一种方法`setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)`。我想在这个 Frame 实际关闭之前运行一些代码。我怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:25:13.890

实现 WindowListener 并捕获窗口关闭事件。就像是-

```
 yourWindow.addWindowListener(new WindowAdapter() {
        @Override
         public void windowClosing(WindowEvent e) {
             // do something here
         }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T04:27:49.413

```
JFrame frame = new JFrame();
frame.addWindowListener(new WindowAdapter(){

    public void windowClosing(WindowEvent e){
        // The window is closing
    }

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T04:28:34.983

做这个

```
frame.addWindowsListener(new WindowAdapter() {

    public void windowClosing() {
        // do your work here
        frame.dispose();
    }         
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T04:25:04.470

请参考[WindowListener](http://docs.oracle.com/javase/tutorial/uiswing/events/windowlistener.html)文档

# android - 看不到按钮是否被点击

> ID：15778815
> 
> 赞同：0
> 
> 时间：2013-04-03T04:22:06.690
> 
> 标签：android, image, button

我正在android上制作一个应用程序，我制作了一些按钮，这些按钮是图像，问题是，你知道当你点击一个按钮时，它看起来有点像被按下。您无法判断按钮何时是图像。如果您不知道我的意思，请复制我的代码，然后将默认按钮拖到图形布局上并尝试同时按下两个按钮。

```
 <Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/btnFindMe"
    android:background="@drawable/iw_p"
    android:text="@string/about_us" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:27:03.127

在您的可绘制文件夹中创建一个名为`button_effect.xml` 并添加以下内容的新文件

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item 
    android:state_enabled="false"
        android:drawable="@drawable/aud_disable" />
    <item 
        android:state_pressed="true" 
        android:state_enabled="true"
        android:drawable="@drawable/aud_center_gray" />
    <item 
        android:state_focused="true" 
        android:state_enabled="true"
        android:drawable="@drawable/aud_center_gray" />
    <item 
        android:state_enabled="true"
        android:drawable="@drawable/speaker_side" />
</selector> 
```

在这里确保为每个状态添加图像，例如当按钮被禁用、按下、聚焦等时的图像是什么。

现在改变你的按钮背景如下

```
android:background="@drawable/button_effect" 
```

把它们放在一起，如下所示

```
<Button
android:id="@+id/button2"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:layout_below="@+id/btnFindMe"
android:background="@drawable/button_effect"
android:text="@string/about_us" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:26:02.483

发生这种情况的原因是因为您要替换处于打开和关闭状态的图像按钮的图像。您需要实现一个选择器，然后将其应用于您的按钮以确定它是打开还是关闭。

参考：http: [//developer.android.com/guide/topics/ui/controls/button.html](http://developer.android.com/guide/topics/ui/controls/button.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:30:27.163

我确定您想根据按钮的不同状态提供不同的颜色/可绘制对象，如果是这种情况，那么您必须为按钮定义**自定义选择器（XML）文件**。

句法：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android"
    android:constantSize=["true" | "false"]
    android:dither=["true" | "false"]
    android:variablePadding=["true" | "false"] >
    <item
        android:drawable="@[package:]drawable/drawable_resource"
        android:state_pressed=["true" | "false"]
        android:state_focused=["true" | "false"]
        android:state_hovered=["true" | "false"]
        android:state_selected=["true" | "false"]
        android:state_checkable=["true" | "false"]
        android:state_checked=["true" | "false"]
        android:state_enabled=["true" | "false"]
        android:state_activated=["true" | "false"]
        android:state_window_focused=["true" | "false"] />
</selector> 
```

你可以阅读更多关于它的信息：[Drawable Resources](http://developer.android.com/guide/topics/resources/drawable-resource.html)

# big-o - 嵌套顺序循环的大 O 表示法

> ID：15778817
> 
> 赞同：0
> 
> 时间：2013-04-03T04:22:10.983
> 
> 标签：big-o

我一直在搜索有关大 O 表示法的论坛并学到了很多东西。我的问题非常具体，我认为一个独特的案例将更好地帮助我理解大 O，我忽略了常量。

据我了解，如果循环遍历所有元素而不是 O(n)。

```
for(int i = 0; i < n; i++)
{   

} 
```

如果一个循环遍历所有 n，在另一个遍历所有 n 的循环内，它乘以 n * n = n^2

```
for(int i = 0; i < n; i++)
{
    for(int j = 0; j < n; j++)
    {

    }
} 
```

最后，如果一个循环后面跟着另一个遍历所有元素的循环，它是 n + n = 2n

```
for(int j = 0; j < n; j++)
{

}
for(int k = 0; k < n; k++)
{

} 
```

我的问题直接进行了这些代码行

```
for(int i = 0; i < n; i++)
{             
    for(int j = 0; j < n; j++)    
    {

    }
    for(int k = 0; k < n; k++)
    {

    }
    for(int l = 0; l < n; l++)
    {
        for(int m = 0; m < n; m++)
        {

        }
    } 
```

}

所以根据上面的规则，我计算大 O 为 n * (n + n + n * n)，即 n^3 + 2n^2。那么这会使我的大 O（n^3）还是我的大 O 是 O（n^3 +2n^2）。我对这一切都错了吗？还是我在球场附近的某个地方？主要是我想弄清楚这些循环是否小于 O(n^4)。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:05:58.877

big-O 表示法用于表征算法的渐近行为，该算法取决于指示数据量的某个值 n，但与任何常数（例如处理器速度）无关。
在您的示例中，n^3 的增长速度比 2n^2 快，即对于较大的 n，与 n^3 相比，2n^2 可以忽略不计。因此，嵌套循环的渐近行为具有 O(n^3) 阶。

# msbuild - MSBuild：增量构建问题

> ID：15778819
> 
> 赞同：1
> 
> 时间：2013-04-03T04:22:14.813
> 
> 标签：msbuild, incremental-build

我有与部分构建有关的问题。场景如下。

我有包含 Windows 窗体应用程序项目及其支持类库项目的解决方案。我正在使用 MSBuild 构建解决方案。在构建之前，我使用 msbuild 自定义任务更改每个项目的程序集文件版本。这会导致 AssemblyInfo 文件被修改。由于 assemblyinfo 文件已修改，因此 msbuild 会构建每个项目，即使除了 assemblyInfo 文件中的更改之外没有真正的代码更改。因此，每次我构建解决方案时，它都会构建所有项目，在理想情况下，它应该只构建那些发生真正代码更改的项目。由于这个解决方案的构建时间保持不变，即使单个项目发生了变化。这还有另一个副作用。我正在使用 clickonce 发布此应用程序。因此，每次构建解决方案时，它都会构建解决方案中的每个项目。这会导致每次我进行新构建时都会为清单文件中的每个程序集/exe 生成新的哈希签名。因此，当发布应用程序更新时，clickonce 会强制用户下载应用程序中的每个 dll/exe。而理想情况下，应该只在用户系统上下载更新的（可能是一个或两个）文件。

基本上我想要的是。1\. 只编译那些修改过的项目。2\. 只为修改过的项目更新汇编文件版本。

这样，我将能够减少构建时间并解决 clickonce 问题。有什么解决方案/解决方法吗？

# virtualization - 检查 WFP 中 FWPM_LAYER_EGRESS_VSWITCH_TRANSPORT_V4 层的标注驱动程序中的数据

> ID：15778827
> 
> 赞同：1
> 
> 时间：2013-04-03T04:22:49.687
> 
> 标签：virtualization, virtual-machine, hyper-v, wfp

我正在为 Hyper-V 2012 编写标注驱动程序，我需要在其中过滤从虚拟机发送的数据包。

我在 WFP 的 FWPM_LAYER_EGRESS_VSWITCH_TRANSPORT_V4 层添加了过滤器。标注函数接收数据包缓冲区，我将其转换为 NET_BUFFER_LIST。我正在执行以下操作以获取数据指针

pNetBuffer = NET_BUFFER_LIST_FIRST_NB((NET_BUFFER_LIST*)pClassifyData->pPacket); pContiguousData = NdisGetDataBuffer(pNetBuffer, NET_BUFFER_DATA_LENGTH(pNetBuffer), 0, 1, 0);

我有简单的客户端-服务器应用程序来测试数据包数据。客户端在虚拟机上，服务器是另一台机器。正如我所观察到的，从客户端发送到服务器的数据被截断，最后添加了一些垃圾值。从服务器向客户端发送消息没有问题。如果我不添加此层过滤器客户端服务器工作没有任何问题。

回调函数接收包含 ipHeaderSize 和 transportHeaderSize 的元数据。这两个值都为零。这些是正确的值还是应该是非零的？有人可以帮我在标注功能中从数据包中提取数据并将其安全地转发到其他层吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:00:47.633

这些是 TCP 数据包。我查看了大小和偏移信息。似乎问题在数据包中是一致的。我在 (NET_BUFFER_LIST*)pClassifyData->pPacket 中检查了以下值。

NET_BUFFER_LIST->NetBUfferListHeader->NetBUfferListData->FirstNetBuffer->NetBufferHeader->NetBufferData->CurrentMdl->MappedSystemVa

前 24 个字节仅正确发送，其余为垃圾。

例如数据包的总大小是 0x36 + 0x18 = 0x4E 我不知道前 0x36 字节中有什么对于所有数据包都是恒定的。它是 TCP/IP 标头吗？第二部分 0x18 是我发送的实际数据。

我什至尝试使用 API NdisQueryMdl() 从 MDL 列表中检索。

所以在接收端我只有 24 个字节是正确的，剩下的是垃圾。如何从 NET_BUFFER_LIST 读取完整的缓冲区？

# ruby-on-rails - ubuntu 服务器启动时启动独角兽应用服务器

> ID：15778828
> 
> 赞同：10
> 
> 时间：2013-04-03T04:23:01.553
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, unicorn

我正在使用 ruby​​ 企业版和独角兽作为应用服务器运行我的 rails 应用程序。我运行这个命令

```
bundle exec unicorn -D -c /home/ubuntu/apps/st/config/unicorn.rb 
```

我需要在系统重新启动或启动后立即运行此命令。我在 ubuntu 10.04 LTS EC2 实例上运行该应用程序。[我尝试了几个在这个网站](http://codetunes.com/2012/nginxunicorn-configuration-for-multi-app-servers)和[这个网站](http://robert-reiz.com/2012/02/29/running-unicorn-as-a-service-on-debian-linux/)上提到的例子，但它对我不起作用。任何抬头

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-03T06:11:50.970

试试它作为一个新贵。为此，您需要在目录**/etc/init/中创建一个****myapp.conf**文件，其内容如下：

 **```
description "myapp server"

start on runlevel [23]
stop on shutdown
exec sudo -u myuser sh -c "cd /path/to/my/app && bundle exec unicorn -D -c /home/ubuntu/apps/st/config/unicorn.rb"

respawn 
```

之后，您应该能够使用以下命令启动/停止/重新启动您的应用程序：

```
start myapp
stop myapp
restart myapp 
```

使用**ps -aux | grep myapp**检查您的应用程序是否正在运行。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-03T09:04:36.337

您可以[将此文件](https://github.com/defunkt/unicorn/blob/master/examples/init.sh)用作模板，设置此文件中提到的适当路径，使其可执行并符号链接到`/etc/init.d/my_unicorn_server`. 现在您可以使用以下命令启动服务器：

```
sudo service my_unicorn_server start 
```

然后你可以这样做：

```
sudo update-rc.d my_unicorn_server defaults 
```

在系统重启时自动启动独角兽服务器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-08T08:52:05.687

就我而言，我只是想要它快点，所以我将启动命令放在`/etc/rc.local`下面。请注意，我正在使用`RVM`.

```
# By default this script does nothing.
cd <your project dir>
/usr/local/rvm/gems/ruby-2.2.1/wrappers/bundle exec unicorn -c <your project dir>/config/unicorn.conf -D
test -e /etc/ssh/ssh_host_dsa_key || dpkg-reconfigure openssh-server
exit 0 
```

`ps -aux | grep unicorn`确保您的启动命令在出口 0 上方。重新启动后，通过直接点击应用程序的 url 或使用命令来检查它是否正在运行。

注意* 以前我使用 Phusion Passenger 但我无法查看它的错误日志，所以我回到了 unicorn。我也尝试了@warantesbr，但没有成功，我猜它失败了，因为我的整个环境都是使用root访问设置的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-19T06:18:46.407

如果您使用的是 unicorn_init 脚本，
您可以配置一个 cron 作业以在重新启动时启动 unicorn 服务器

```
crontab -e 
```

并添加

```
@reboot /bin/bash -l -c 'service unicorn_<your service name> start >> /<path to log file>/cron.log 2>&1' 
```**

# java - 如何在 Liferay 中将 freemarker 电子邮件模板作为电子邮件传递？

> ID：15778836
> 
> 赞同：1
> 
> 时间：2013-04-03T04:23:45.657
> 
> 标签：java, email, liferay, freemarker

我使用 Freemarker 创建了一个模板，我将使用它作为电子邮件发送。这是我希望包含在模板中的参数片段。我正在使用java..

//使用 freemarker 配置 config = new Configuration(); config.setTemplateLoader(new ClassTemplateLoader(getClass(), "/"));

```
 Template template = config.getTemplate("helloworld.ftl");

        // Build the data-model
        Map<String, Object> data = new HashMap<String, Object>();
        data.put("message", "Hello!! You have got a new approval mail!");

        //List parsing 
        List<String> mailDetails = new ArrayList<String>();
        mailDetails.add(fromAddress);
        mailDetails.add(fromName);
        mailDetails.add(toAddress);
        mailDetails.add(toName);
        mailDetails.add(subject);
        mailDetails.add(body);

        data.put("mailDetails", mailDetails);

        // Console output
        Writer out = new OutputStreamWriter(System.out);
        template.process(data, out);
        out.flush(); 
```

这是经过测试的，它成功地在指定的文件夹中创建了一个模板。我只想知道如何在发送邮件时传递作为参数生成的模板？

我在 Liferay 中按如下方式发送电子邮件 发送邮件时我应该如何将模板作为参数传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:46:43.130

你写信给`System.out`

```
 // Console output
    Writer out = new OutputStreamWriter(System.out);
    template.process(data, out);
    out.flush(); 
```

您可以写入字符串：

```
 StringWriter out = new StringWriter();
    template.process(data, out);
    String finishedMessage = out.toString(); 
```

或将任何其他编写器传递给该`process()`方法。

# postgresql - 如何在 PostgreSQL 中获取数据时扩展数据？

> ID：15778843
> 
> 赞同：1
> 
> 时间：2013-04-03T04:24:28.467
> 
> 标签：postgresql, datetime

我正在尝试在选择时间数据时将其转换为 JavaScript 时间。JavaScript 时间是 unix 时间乘以 1000。

我已经使用此查询获得了 unix 时间：

```
SELECT date_part('epoch',time) as unixtime FROM mytable; 
```

有没有办法修改此查询以将“000”附加到每个结果？或者以任何其他聪明的方式让它进入 JavaScript 时间。

我很感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:30:32.967

乘以 1000：

```
SELECT extract(epoch from current_timestamp) * 1000; 
```

或以您的形式：

```
SELECT date_part('epoch',time) * 1000 as unixtime FROM mytable; 
```

如果您希望将其四舍五入为整数：

```
SELECT CAST(round(date_part('epoch',time) * 1000) AS bigint) as unixtime FROM mytable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:30:50.493

为什么不像这样简单地乘以呢`1000`？

```
SELECT date_part('epoch',time)*1000 as unixtime FROM mytable 
```

# mysql - 如何将数据表绑定到报表查看器运行时

> ID：15778844
> 
> 赞同：5
> 
> 时间：2013-04-03T04:24:31.503
> 
> 标签：mysql, winforms, c#-4.0, data-binding, reportviewer

我想用下面的代码将**数据表**绑定到**reportviewer 。****我在reportviewer**中没有看到结果，下面缺少什么脚本？

 ****```
// create dataset
DataSet ds = new DataSet("myDataset");

// create datatable
DataTable dt = new DataTable("myDatatable");

// add columns
dt.Columns.Add("column1", typeof(string));
dt.Columns.Add("column2", typeof(string));
dt.Columns.Add("column3", typeof(string));

// insert data rows
dt.Rows.Add("row1-col1", "row1-col2", "row1-col3");
dt.Rows.Add("row2-col1", "row2-col2", "row2-col3");

// add datatable to dataset 
ds.Tables.Add(dt);

// bind datatable to report viewer
this.reportViewer.Reset();
this.reportViewer.ProcessingMode = ProcessingMode.Local;
this.reportViewer.LocalReport.ReportEmbeddedResource = "Test.Report1.rdlc";
this.reportViewer.LocalReport.DataSources.Clear();
this.reportViewer.LocalReport.DataSources.Add(new ReportDataSource(dt.TableName, dt));
this.reportViewer.RefreshReport(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T10:24:38.703

> 我找到了如何将数据表绑定到reportviewer的答案，我将在这里分享可能对其他人有用。
> 
> 1.  添加到表单**clsTables 类**、**Report1.rdlc 文件**、**reportViewer1**。
> 2.  **然后点击reportViewer1**的右上角，设置**选择报告**为**Test.Report1.rdlc**。
> 3.  在 Report1.rdlc 上
>     *   点击**新建**，
>     *   添加**数据集名称**：dsBody **数据源**：测试 **可用数据集**：clsTables
>     *   点击**确定**
>     *   右键单击 Report1.rdlc 选择**Insert Table**，将 dsBody 元素( **Column0, Colum1, Column2** )**拖到 Report1.rdlc table 中**。

```
Namespace Test{
    public class clsTables {
        // constructor
        public clsTables(string col0, string col1, string col2) {
            this.Column0= col0;
            this.Column1= col1;
            this.Column2= col2;
        }

       // properties
       public string Column0{ get; set; }
       public string Column1{ get; set; }
       public string Column2{ get; set; }
    }
}

namespace Test{
    public class clsMain{
        public void BindToRepprtViewer() {        
            // create dataset
            DataSet ds = new DataSet("myDataset");

            // create datatable
            DataTable dt = new DataTable("myDatatable");

            // add columns
            dt.Columns.Add("column1", typeof(string));
            dt.Columns.Add("column2", typeof(string));
            dt.Columns.Add("column3", typeof(string));

            // insert data rows
            dt.Rows.Add("row1-col1", "row1-col2", "row1-col3");
            dt.Rows.Add("row2-col1", "row2-col2", "row2-col3");

            // add datatable to dataset 
            ds.Tables.Add(dt);

            // save rows to rowList 
            List<clsTables> rowList = new List<clsTables>();
            rowList .Clear();
            foreach (DataRow row in dt.Rows) {
                rList.Add(new clsTables(Convert.ToInt32(row.ItemArray[0]), row.ItemArray[1].ToString(), row.ItemArray[2].ToString()));
            }

            // binding rowList to bs
            BindingSource bs = new BindingSource();
            bs.DataSource = rowList;

            // binding bs to rds
            ReportDataSource rds = new ReportDataSource();
            rds.Name = "dsBody";
            rds.Value = bs;

            // binding rds to report viewer
            reportViewer1.Reset();
            reportViewer1.LocalReport.ReportEmbeddedResource =  "Test.Report1.rdlc";
            reportViewer1.LocalReport.DataSources.Clear();
            reportViewer1.LocalReport.DataSources.Add(rds);
            reportViewer1.RefreshReport();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:17:27.733

我做的唯一不同的事情是我做了：

```
reportViewer1.LocalReport.DataSources.Clear(); 
```

在设置数据源之前，我做了一个：

```
reportViewer1.LocalReport.Refresh(); 
```

而不是在 reportviewer 控件上调用 RefreshReport()。

我不确定**ReportEmbeddedResource**正确地做了什么，也许也尝试摆脱它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-08T22:20:18.577

我只是遇到了同样的问题，我从谷歌搜索中找到的答案都没有为我做任何事情。最后，我让它工作了。这是我遵循的步骤：

1.  将一个新的 DataSet 添加到您的项目中（即`MyDataSet`）。
2.  向此 DataSet ( ) 添加一个新的 DataTable `MyDataTable`。
3.  添加您的列，并设置它们的类型。
4.  将新报告添加到您的项目 ( `Report1.rdlc`)。
5.  将表添加到报表并添加来自 MyDataSet 的列。
6.  将一个新的 ReportViewer 对象添加到您的表单 ( `reportViewer`)。
7.  单击右上角的箭头并选择`Report1.rdlc`。这将自动将 DataSet 和 BindingSource 添加到您的表单中。
8.  在表单加载事件（或任何有意义的地方）中执行以下操作：

```
MyDataSetBindingSource.DataSource = GetDataTable();
reportViewer.RefreshReport(); 
```

确保 DataTable 中的列名与您在 MyDataTable 中定义的列名匹配。****

# extjs - 如何在网格面板中显示“-”代替空值

> ID：15778846
> 
> 赞同：1
> 
> 时间：2013-04-03T04:24:56.880
> 
> 标签：extjs

如何在此处的网格面板代码中显示“-”代替空值-

```
var store = Ext.getStore('someStore');
store.each(function (rec) {
    if(rec.get('comment')=="") {
        //what code i will write here to edit that cell with '-'
    }

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T05:36:15.070

您可以尝试将列渲染器添加到网格中。

```
{ 
  text: 'Comments', 
  dataIndex: 'comment', 
  renderer: function(value, metaData, record, row, col, store, gridView) {
    if (record.get('comment') == "") {
      return "-";
    } else {
      return record.get('comment');
    }
  }
} 
```

查看[ExtJS API 中的 Column 渲染器以](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-cfg-renderer)获取更多详细信息。

# php - PHP：为什么 strtotime 转换给出不同的值并且只限于特定的日期？

> ID：15778849
> 
> 赞同：1
> 
> 时间：2013-04-03T04:25:06.313
> 
> 标签：php, centos, strtotime, opensuse

我有两个具有不同操作系统的 Web 服务器。

**SERVER 1**在带有 LAMP Server 的 Centos 5 中运行。PHP 版本 5.3.21

**SERVER 2**在带有 LAMP Server 的 openSUSE 11.3 中运行。PHP 版本 5.3.5

两个 PHP 配置是相同的。有些是默认的。

我有一个包含如下代码的 php 文件：

```
<?php
/* TEST STRTOTIME */
echo "<br /><br />".strtotime("2038-01-01");
echo "<br /><br />".strtotime("2039-01-01");
?> 
```

当我在**SERVER 1**中运行此文件时，结果是：

> 2145934800
> 
> 2177470800

但是当我在**SERVER 2**中运行这个文件时，第二次转换不会产生任何东西。只显示结果是：

> 2145891600

为什么两台服务器上的转换结果给出不同的值​​​​ 而同一个文件。为什么在**SERVER 2**上无法在上述日期**2038-01-01**转换？这个问题有解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T04:26:52.277

您的远程服务器可能是 32 位的。您将需要一个 64 位服务器来处理[*大约*](http://en.wikipedia.org/wiki/Year_2038_problem)[2038](http://en.wikipedia.org/wiki/Year_2038_problem)[之后](http://en.wikipedia.org/wiki/Year_2038_problem)*的日期。*

 *原因是您的远程服务器将其整数存储为带符号的 32 位整数。可以存储为有符号 32 位整数的最大数是`2,147,483,647`( `2^31 - 1`)。由于这个数字是 1970 年 1 月 1 日（Unix 纪元）之后的秒数，你可以看到这个数字最终会被耗尽（如果没有检查边界，可能会溢出）。

![例子](https://i.stack.imgur.com/RKkKz.gif)

图片来源：[维基百科](http://en.wikipedia.org/wiki/Year_2038_problem)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T04:34:33.553

从[手册中`DateTime`](http://www.php.net/manual/en/intro.datetime.php)

> 日期和时间信息在内部存储为 64 位数字，因此支持所有可能有用的日期（包括负年份）。范围从过去约 2920 亿年到未来相同。

此外，`strtotime()`有太多的不一致是可靠的。我*总是*建议`DateTime`改用。

```
$dt = DateTime::createFromFormat('Y-m-d', '2039-01-01');
echo $dt->getTimestamp(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-21T10:22:15.980

您可以检查服务器的时区。

您也可以使用该`date_default_timezone_set('UTC');`命令设置默认时区。

希望这可以帮助。*

# javascript - 使用 D3 正交法进行圆形剪辑和投影

> ID：15778856
> 
> 赞同：10
> 
> 时间：2013-04-03T04:25:51.473
> 
> 标签：javascript, d3.js, projection, orthographic

我正在解决[这个](http://bl.ocks.org/tomstove/5243213)问题，我在剪裁红色圆圈元素时遇到了麻烦，因为它们出现在地球上，即使超过 90˚ 剪裁角度。此外，有没有一种方法可以将投影应用于红色圆圈，因为看起来它们相对于正交角度位于地球表面上？目前，它们只是相对于屏幕显示为 2d 圆圈。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-04T08:15:06.630

您可以使用 GeoJSON 点几何而不是使用`<circle>`元素：

```
{type: "Point", coordinates: [λ, φ]} 
```

然后可以通过 D3 的投影系统对这些进行剪辑，具体取决于您设置的 clipAngle。所以你可能有类似的东西：

```
var path = d3.geo.path().projection(…);

data.forEach(function(d) {
  svg.append("path")
      .datum({type: "Point", coordinates: [d.Lon, d.Lat]})
      .attr("d", path.pointRadius(d.Magnitude));
}); 
```

请注意如何通过每个点的路径设置点的半径。您还可以将 pointRadius 设置为一个函数，因此您可以执行以下操作：

```
var path = d3.geo.path()
    .projection(…)
    .pointRadius(function(d) { return d.radius; });

svg.selectAll("path.point")
    .data(data)
  .enter().append("path")
    .datum(function(d) {
       return {type: "Point", coordinates: [d.Lon, d.Lat], radius: d.Magnitude};
    })
    .attr("class", "point")
    .attr("d", path); 
```

您问题的第二部分询问这些圆圈是否可以是真正的地理圆圈。[d3.geo.circle](https://github.com/mbostock/d3/wiki/Geo-Paths#wiki-circle)可以生成地理圈特征（同样，作为 GeoJSON），将被正确裁剪：

```
var path = d3.geo.path().projection(…),
    circle = d3.geo.circle();

svg.selectAll("path.point")
    .data(data)
  .enter().append("path")
    .datum(function(d) {
       return circle
           .origin([d.Lon, d.Lat])
           .angle(d.Magnitude)();
    })
    .attr("class", "point")
    .attr("d", path); 
```

# soap - 如何更改（或删除）CXF 中的 wsdl 输入元素名称属性？

> ID：15778865
> 
> 赞同：0
> 
> 时间：2013-04-03T04:26:29.193
> 
> 标签：soap, cxf

我正在使用 CXF 创建 SOAP 服务，CXF 创建的 wsdl 片段如下：

```
<wsdl:operation name="ping">
<soap:operation soapAction="http://www.example.org/ex/ping" style="document"/>
<wsdl:input name="ping">
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output name="pingResponse">
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation> 
```

由于遗留系统的原因，我需要删除输入元素属性名称，如下所示：

```
<wsdl:operation name="ping">
<soap:operation soapAction="http://www.example.org/ex/ping" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation> 
```

如何CXF是否支持这样的交易？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:03:45.933

我认为没有办法消除它。这些名字不应该对肥皂信息或任何东西有任何影响，所以我不确定你为什么需要删除它们。最坏的情况是，获取 WSDL 并将其复制到本地以用于这些系统，然后在其上运行 xslt 以删除名称。

# python - ConfigParser 不支持的操作数类型

> ID：15778866
> 
> 赞同：1
> 
> 时间：2013-04-03T04:26:36.233
> 
> 标签：python, parsing, types, configparser

我正在尝试制作一个游戏，玩家每次玩时都会从 ini 文件中的值中扣除 0.5。但是我不断收到错误，我不知道该怎么做。这是我的代码。不要担心评论，这些是给我的，我稍后会关闭 while 循环。这只是代码的一部分。顺便说一句，代码有效，只是不是这个。谢谢。

```
def rerun():
import ConfigParser
from ConfigParser import ConfigParser

parser = ConfigParser()
parser.read('Game.ini')

PlrMny = parser.get('money_value', 'Amount')
#config = ConfigParser.ConfigParser()
configFile = open("C:\Python27\Game.ini", "w")
#config.read(configFile)
#valueamount = config.getfloat("section","starting_value")
print PlrMny

print "You will be given a $10 starting amount. Each game costs $.50 to play and is 
deducted when you input the first value."
print "\nGetting one match gives $1 and the output is multiplied by 2 for each extra 
match."
print "\nCurrent Amount =",PlrMny,

def gamble():

    import random
    import sys
    number1 = random.randint (1, 20)
    number2 = random.randint (1, 20)
    number3 = random.randint (1, 20)
    number4 = random.randint (1, 20)
    number5 = random.randint (1, 20)

    def input():
        c = 0
        PlrMny == type(int)
        print "\n\n\n\nTry guess what five numbers the computer will guess. Type '100' 
        in any of the inputs to close program prematurely"    
        print "Money =",PlrMny,
        #parser.set("money_value", "Amount",10000)
        #parser.write ('Game.ini')

        while True:
            try:
                User11 = int(raw_input( "\n\nNumber 1 : "))
                parser.set('money_value','Amount',PlrMny - .5)
                parser.write (configFile)
                if User11 < 1:
                    print "Error"
                elif User11 == 100:
                    sys.exit()
                elif User11 > 20:
                    print "Error"
                else:
                    break
            except ValueError:
                print "Error" 
```

这是错误：

```
 Traceback (most recent call last):
  File "C:\Python27\Gamb Game.py", line 181, in <module>
    rerun()
  File "C:\Python27\Gamb Game.py", line 180, in rerun
    gamble()
  File "C:\Python27\Gamb Game.py", line 174, in gamble
    input()
  File "C:\Python27\Gamb Game.py", line 42, in input
    parser.set('money_value','Amount',PlrMny - .5)
    TypeError: unsupported operand type(s) for -: 'str' and 'float' 
```

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:43:41.243

您试图从字符串中减去 0.5，而不是浮点数。也就是说，您的变量 PlrMny 是一个字符串。

换行

```
parser.set('money_value','Amount',PlrMny - .5) 
```

和

```
parser.set('money_value','Amount',str(float(PlrMny) - .5)) #if you want money_value to be a string 
```

但是，使用`parser.set`不会改变`PlrMny`正在运行的程序中的值。它只会更改 .ini 文件上下文中的值。因此，您可能想要做的是使用以下代码：

```
PlrMny = float(PlrMny) - .5
parser.set('money_value','Amount',str(PlrMny)) 
```

写入 ini 时需要将 PlrMny 转换为字符串，以避免读取 ini 文件时出错。

# azure - 如何清除 Azure 移动服务中的控制台日志？

> ID：15778867
> 
> 赞同：4
> 
> 时间：2013-04-03T04:26:41.380
> 
> 标签：azure, azure-mobile-services

有什么方法可以清除 Azure Mobiles Services 中的应用程序写入的日志

```
console.log()
console.error()
... 
```

我会对带有代码或通过管理门户的程序感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:27:41.590

目前无法清除日志 - 它们会在 7 天后自动删除。如果您觉得这对您很重要，您可以在[UserVoice 页面](https://mobileservices.uservoice.com/forums/182281-feature-requests)中创建新功能请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-18T11:55:34.647

其实你现在可以。连接到 WAMS kudu 端点：

`https://<yourservicename>.**scm**.azure-mobile.net` （注意，这不是服务的公共端点）

并使用 cmd 控制台导航到 D:\Home\Logfiles\Application 并在控制台中输入 del *.txt。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T17:03:04.970

我找到了一种方法在 Visual Studio 2012 中我连接到 Azure 帐户然后在服务器资源管理器中我选择了 WADLogsTable 然后查看我从弹出菜单中选择并删除的内容选择

# java - 痛饮命名空间错误？不是有效的基类

> ID：15778870
> 
> 赞同：0
> 
> 时间：2013-04-03T04:27:00.493
> 
> 标签：java, c++, swig

我正在使用 SWIG 来包装 C++ 库。我收到一个错误，我认为这与我使用命名空间有关，但我不确定。不幸的是，SWIG 的文档似乎都集中在内联文档上，我不知道它从我的头文件中提取了什么。

这是我的 .i 文件：

```
%module cStopPow
%{
    #include "../src/StopPow.h"
    #include "../src/StopPow_SRIM.h"
    #include "../src/StopPow_LP.h"
    #include "../src/StopPow_BetheBloch.h"
%}

%include "cpointer.i"
%pointer_functions(int, intp);
%pointer_functions(float, floatp);

%include "std_vector.i"
#include <vector>
// Instantiate templates
namespace std {
   %template(IntVector) vector<int>;
   %template(FloatVector) vector<float>;
}

%include "std_string.i"
#include <string>
%include "../src/StopPow.h"
%include "../src/StopPow_SRIM.h"
%include "../src/StopPow_LP.h"
%include "../src/StopPow_BetheBloch.h" 
```

这是一个裁剪的示例标题（它们的定义都非常相似）：

```
#include ...

namespace StopPow
{

class StopPow_BetheBloch : StopPow
{ ... 
```

其中三个类扩展了 StopPow。该库在 C++ 下编译良好，但 SWIG 给了我以下错误：

```
swig -java -c++ StopPow.i
../src/StopPow_BetheBloch.h:26: Warning 319: No access specifier given for base class 'StopPow' (ignored).
../src/StopPow_SRIM.h:27: Error: 'StopPow' is not a valid base class.
../src/StopPow.h:28: Error: See definition of 'StopPow'.
../src/StopPow_SRIM.h:27: Warning 401: Nothing known about base class 'StopPow'. Ignored.
../src/StopPow_LP.h:27: Error: 'StopPow' is not a valid base class.
../src/StopPow.h:28: Error: See definition of 'StopPow'.
../src/StopPow_LP.h:27: Warning 401: Nothing known about base class 'StopPow'. Ignored.
../src/StopPow_BetheBloch.h:26: Error: 'StopPow' is not a valid base class.
../src/StopPow.h:28: Error: See definition of 'StopPow'.
make: *** [StopPow] Error 6 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:17:47.763

好的，经过多次故障排除后，我发现了这一点。这些问题是在我将代码放入非标准命名空间后出现的，当我的所有代码都在标准中时，上面的 .i 文件有效。

有两个问题。首先，必须在 .i 文件中明确定义基类，这在文档中有所提及，但我错过了。此外，显然 SWIG 不支持定义了构造函数的基类。向 StopPow 类添加方法 StopPow() 会导致从它继承的三个类的“错误：'StopPow' 不是有效的基类”。

这是正在工作的 StopPow.i：

```
// StopPow.i - SWIG interface
%module cStopPow
%{
    #include "../src/StopPow.h"
    #include "../src/StopPow_SRIM.h"
    #include "../src/StopPow_LP.h"
    #include "../src/StopPow_BetheBloch.h"
%}

%include "cpointer.i"
%pointer_functions(int, intp);
%pointer_functions(float, floatp);

%include "std_vector.i"
#include <vector>
// Instantiate templates
namespace std {
   %template(IntVector) vector<int>;
   %template(FloatVector) vector<float>;
}

%include "std_string.i"
#include <string>

//%nspace StopPow::StopPow;
//%nspace StopPow::StopPow_LP;

// Need to define the base class:
namespace StopPow
{
class StopPow {
public:
    //StopPow();
    virtual float dEdx_MeV_um(float E) = 0;
    virtual float dEdx_MeV_mgcm2(float E) = 0;
    virtual float get_Emin() = 0;
    virtual float get_Emax() = 0;
    float dEdx(float E);
    float Eout(float E, float x);
    float Ein(float E, float x);
    float Thickness(float E1, float E2);
    float get_dx();
    void set_dx(float new_dx);
    int get_mode();
    void set_mode(int new_mode);

    static const float DEFAULT_DX;
    static const float DEFAULT_DRHOR;
    static const int MODE_LENGTH;
    static const int MODE_RHOR;
};
};

%include "../src/StopPow_SRIM.h"
%include "../src/StopPow_LP.h"
%include "../src/StopPow_BetheBloch.h" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:26:21.117

SWIG 可以很好地处理带有构造函数/析构函数的基类。问题是有一个与类同名的命名空间。示例（对于 Python）：

### 演示.i

```
%module demo

%begin %{
#pragma warning(disable:4127 4100 4211 4701 4706)
%}

%{
#include "demo.h"
%}

%include <std_vector.i>
%include <std_string.i>
%template(IntVector) std::vector<int>;
%include "demo.h" 
```

### 演示.h

```
#include <iostream>
#include <string>
#include <vector>

namespace C {
    class A {
    public:
        A() { std::cout << __FUNCSIG__ << std::endl; }
        virtual std::vector<int> func(int a, int b) { return std::vector<int>(a,b); }
        std::string func2() { return std::string("From A"); }
        virtual ~A()  { std::cout << __FUNCSIG__ << std::endl; }
    };
    class B : public A {
    public:
        B() { std::cout << __FUNCSIG__ << std::endl; }
        std::vector<int> func(int a, int b) { return std::vector<int>(b,a); }
        std::string func3() { return std::string("From B"); }
        ~B()  { std::cout << __FUNCSIG__ << std::endl; }
    };
} 
```

### 结果

构建和运行在 SWIG 代码生成期间显示错误，但仍可成功编译。

结果有两个问题：

*   该`B`实例不知道基类`A`。
*   实例在`B`删除时不会调用其析构函数。

输出：

```
C:\>swig -c++ -python demo.i
demo.h(13) : Error: 'A' is not a valid base class.
demo.h(8) : Error: See definition of 'A'.
demo.h(13) : Warning 401: Nothing known about base class 'A'. Ignored.

C:\>cl /EHsc /LD /W4 /MD demo_wrap.cxx /I%PYTHON_ROOT%\include /nologo -link /nologo /LIBPATH:%PYTHON_ROOT%\libs /OUT:_demo.pyd
demo_wrap.cxx
   Creating library demo_wrap.lib and object demo_wrap.exp

C:\>py -3
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:57:17) [MSC v.1600 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import demo
>>> a=demo.A()
__cdecl A::A::A(void)
>>> a.func(3,4)
(4, 4, 4)
>>> a.func2()
'From A'
>>> b=demo.B()
__cdecl A::A::A(void)
__cdecl A::B::B(void)
>>> b.func(3,4)
(3, 3, 3, 3)
>>> b.func2()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File ".\demo.py", line 167, in <lambda>
    __getattr__ = lambda self, name: _swig_getattr(self, B, name)
  File ".\demo.py", line 55, in _swig_getattr
    raise AttributeError(name)
AttributeError: func2
>>> b.func3()
'From B'
>>> del a
__cdecl A::A::~A(void)
>>> del b
>>> 
```

命名空间更改为后的输出`C`：

```
C:\>swig -c++ -python demo.i

C:\>cl /EHsc /LD /W4 /MD demo_wrap.cxx /I%PYTHON_ROOT%\include /nologo -link /nologo /LIBPATH:%PYTHON_ROOT%\libs /OUT:_demo.pyd
demo_wrap.cxx
   Creating library demo_wrap.lib and object demo_wrap.exp

C:\>py -3
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:57:17) [MSC v.1600 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import demo
>>> a=demo.A()
__cdecl C::A::A(void)
>>> a.func(3,4)
(4, 4, 4)
>>> a.func2()
'From A'
>>> b=demo.B()
__cdecl C::A::A(void)
__cdecl C::B::B(void)
>>> b.func(3,4)
(3, 3, 3, 3)
>>> b.func2()
'From A'
>>> b.func3()
'From B'
>>> del a
__cdecl C::A::~A(void)
>>> del b
__cdecl C::B::~B(void)
__cdecl C::A::~A(void) 
```

# perl - perl 如何调用“ulimit -n”

> ID：15778874
> 
> 赞同：0
> 
> 时间：2013-04-03T04:27:17.263
> 
> 标签：perl, shell

1.  `ulimit -n`是 perl 不能通过`system`或````直接调用的内部 shell。那么当我想获取 ulimit 值时 perl 如何处理它
2.  做`ulimit -n`并`sh -c ulimit -n`拥有不同的价值观。当我使用`ulimit -n`该值为 1024 但当我使用时`sh -c ulimit -n`该值是无限的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T04:40:43.253

对于问题 #2，您需要引用命令：

```
sh -c 'ulimit -n' 
```

你这样做的方式相当于：

```
sh -n -c ulimit 
```

并且`ulimit`没有选项等同于`ulimit -f`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:57:35.660

程序不必使用`ulimit`来获取打开文件描述符的最大数量——事实上，`ulimit`必须从其他地方获取该值！令人惊讶的是，Perl 函数`BSD::Resource::getrlimit`只是调用了一个名为 C 的函数，[`getrlimit`](http://pubs.opengroup.org/onlinepubs/000095399/functions/getrlimit.html)并使用它直接从操作系统中检索值，与`ulimit`获取它的方式相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:43:45.663

对于您的第一个问题，请在此处检查：

[设置 ulimit](https://stackoverflow.com/questions/2226329/how-do-i-set-a-ulimit-from-inside-a-perl-script-that-applies-to-its-children)

对于第二点，

用于：

```
sh -c 'ulimit -n' 
```

如果您检查手册页：

> 如果存在 -c 选项，则从字符串中读取命令。如果字符串后面有参数，则将它们分配给位置参数，从 $0 开始。

# ms-access - 将 ListObject 从 Excel 导出到 Access

> ID：15778876
> 
> 赞同：1
> 
> 时间：2013-04-03T04:27:36.983
> 
> 标签：ms-access, excel, vba

我正在编写一个宏，它将从一个 Excel 工作簿运行并将其中一个 ListObjects 导出到我的访问文件中。

我现在有这个 VBA 代码：

```
Sub AccessImport()

' Create connection
Dim Path As String
Dim conn As Object
Dim connectstr As String
Dim recordset As Object
Dim strSQL As String

Path = "P:\CALIBRE-YSP Implementation\11 General\CDM Database"

Set conn = CreateObject("ADODB.Connection")

connectstr = "Provider=Microsoft.Jet.OLEDB.4.0;" & _
    "Data Source=" & Path & "\CDM_Database_DataOnly.mdb;"

strSQL = "SELECT * INTO DeliverablesLivesheet FROM [Excel 8.0;HDR=YES;DATABASE=P:\CALIBRE-YSP Implementation\11 General\CDM Database\CDMv2 - Development.xlsm].[DeliverablesImport];"

conn.Open connectstr
Set recordset = conn.Execute(strSQL)

recordset.Close
Set recordset = Nothing

conn.Close
Set conn = Nothing

End Sub 
```

它应该从 Excel 中获取一个 ListObject，然后将数据传输到一个新的访问表，覆盖旧的访问表。

它在尝试执行 SQL 时抛出错误：

```
strSQL = "SELECT * INTO DeliverablesLivesheet FROM [Excel 8.0;HDR=YES;DATABASE=P:\CALIBRE-YSP Implementation\11 General\CDM Database\CDMv2 - Development.xlsm].[DeliverablesImport];" 
```

所以我猜SQL有问题？

我似乎无法解决它

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:37:56.297

```
strSQL="insert into DeliverablesLivesheet Select * FROM [Excel 8.0;HDR=YES;DATABASE=P:\CALIBRE-YSP Implementation\11 General\CDM Database\CDMv2 - Development.xlsm].[DeliverablesImport];" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:38:34.183

好的，我没有意识到连接字符串的工作方式如下：

[Excel 8.0;HDR=YES;DATABASE={文件地址}].[{工作表名称}]

我在那里有 ListObject 的名称。

现在我遇到了“数据库或对象是只读的。

# java - 正则表达式 获取所有索引

> ID：15778877
> 
> 赞同：1
> 
> 时间：2013-04-03T04:27:38.140
> 
> 标签：java, regex, match

我需要获取包含此文本的所有字符串 %variables% 此处的一些文本 %/variables%

例子

```
%enca% something here %variables% take this text %/variables% 
other stuffs here, I dont need this 
%variables% I need this too %/variables%
other stuffs, etc 
```

我所拥有的是：

我试试这个：
%variables%(.*?)%/variables%

像这样工作（只有一场比赛）

[http://regexr.com?34cge](http://regexr.com?34cge)

但在 Java 中不起作用：

```
private boolean variablesTag(String s)
    {
    Pattern pattern = Pattern.compile("/%variables%(.*?)%/variables%/gs");
    Matcher matcher = pattern.matcher(s);

    while (matcher.find()) {
     //do some stuff...stored, work with the string, etc...
    };

    return true;
} 
```

如果你能告诉我把绳子带进去的方法，我真的很感激。我想要的是这样的：

把这个文本也拿走

我正在使用 NetBeans ...

**解决方案**

```
Pattern pattern = Pattern.compile("%variables%(.*?)%/variables%",Pattern.MULTILINE|Pattern.DOTALL); 
```

没有标志不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:38:21.953

尝试使用这种模式：-

```
Pattern.compile("%variables%(.*?)%/variables%"); 
```

然后像这样获取所需的值。选择你想要的。

```
while(matcher.find()){
        System.out.println(matcher.group()); //Prints this "%variables% take this text %/variables%"
        System.out.println(matcher.group(1)); //Prints this " take this text"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:39:38.100

在 Java 中，您不需要正则表达式上的“/”分隔符，实际上使用它们是不正确的。如果您想在正则表达式中添加标志，则有两个参数版本`Pattern.compile`（请参阅[API 文档](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#compile%28java.lang.String,%20int%29)）。

改变

```
Pattern pattern = Pattern.compile("/%variables%(.*?)%/variables%/gs"); 
```

例如：

```
Pattern pattern = Pattern.compile("%variables%(.*?)%/variables%", Pattern.DOTALL); 
```

`matcher.group(1)`然后在循环内部访问捕获的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:30:54.207

```
public static void main(String... args) {

    String input = "%enca% something here %variables% take this text %/variables% "
            + "other stuffs here, I dont need this"
            + "%variables% I need this too %/variables%"
            + "other stuffs, etc";

    Pattern pattern = Pattern.compile("%variables%(.*?)%/variables%");
    Matcher matcher = pattern.matcher(input);
    while (matcher.find()) {
        String s = matcher.group(1);
        System.out.format("%s\n", s);
    }
} 
```

输出

```
 take this text 
 I need this too 
```

# asp.net-mvc-4 - ASP.NET MVC 4 AttributeRouting Per-Route DelegatingHandler

> ID：15778883
> 
> 赞同：2
> 
> 时间：2013-04-03T04:28:18.580
> 
> 标签：asp.net-mvc-4, asp.net-web-api, attributerouting

我正在使用 nuget 包[http://nuget.org/packages/AttributeRouting/](http://nuget.org/packages/AttributeRouting/)并为我的 web api 指定了自定义路由。当我尝试在 WebApiConfig 中向我的路由添加自定义委托处理程序 (dh) 时，我的 dh 永远不会被调用。这是有道理的，因为 dh 被分配给默认路由，而不是分配给我用我的 web api 控制器装饰的自定义路由。我可以全局注册 dh 并执行它，但是，我想为每个路由注册自定义 dh（不同的路由需要做不同的事情，我不想将大量逻辑放入一个全局 dh）。

在使用 AttributeRouting 包时，有谁知道如何做到这一点？我已经搜索了网站上的文档，但没有找到任何东西。

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:52:30.280

According to the [AttributeRouting website](http://attributerouting.net/#asp-net-web-api), it does not support some features under WebApi, including custom handlers. Think you might be out of luck.

> Beware! Due to integration issues with the Web API WebHost framework, the following features will not work:
> 
> performance enhancements when matching routes, custom route handlers, querystring parameter constraints, subdomain routing, localization applied to inbound/outbound urls, and lowercasing, appending prefixes, etc to generated routes. These features all have to wait for vNext of the Web API.

If you don't need all the extensive routing that AttibuteRouting provides, you could use your own route attribute and then register routes based on that during startup. e.g.:

```
public class RouteAttribute : Attribute
{
    public string Value { get; private set; }

    public RouteAttribute (string value)
    {
        Value = value;
    }
} 
```

then register routes based on decorating class or action in your controller:

```
 foreach (var controllerType in controllers)
        {
        var attributes = System.ComponentModel.TypeDescriptor.GetAttributes(controllerType);
        var uriattribute = (RouteAttribute)attributes[typeof(RouteAttribute)];
        var controllerName = controllerType.Name.Replace("Controller", "");

        string uri = uriattribute.Value;

        config.Routes.MapHttpRoute(
            name: controllerName,
            routeTemplate: uri,
        handler: new YourCustomHandler()
        }
    } 
```

Obviously you don't want to rewrite AttributeRouting, but if your needs are simple it could be an option.

# python - pandas/python 中的箱线图是如何工作的？

> ID：15778886
> 
> 赞同：2
> 
> 时间：2013-04-03T04:28:33.647
> 
> 标签：python, pandas, boxplot

我找到了这个链接，我试图了解 boxplot 是如何工作的。

[http://pandas.pydata.org/pandas-docs/dev/visualization.html#box-plotting](http://pandas.pydata.org/pandas-docs/dev/visualization.html#box-plotting)

```
df = DataFrame(np.random.rand(10,5))

plt.figure();
bp = df.boxplot() 
```

我希望 boxplot 需要每个框有 4 个值，但是它似乎为每 10 个点构建一个框，我想知道后台发生了什么..

我指的四个点是胡须高、低、盒子高、低

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T07:44:08.717

您的`DataFrame`（实际数字可能因 而有所不同`rand`）：

```
In [13]: df = DataFrame(np.random.rand(10, 5))

In [14]: df
Out[14]:
          0         1         2         3         4
0  0.199953  0.261683  0.582105  0.969489  0.351161
1  0.424425  0.901810  0.942510  0.985630  0.947160
2  0.809123  0.311318  0.954326  0.022269  0.472182
3  0.685818  0.172807  0.093368  0.406808  0.590702
4  0.590784  0.291439  0.139792  0.243264  0.671586
5  0.215574  0.253957  0.257037  0.895526  0.903883
6  0.469410  0.062405  0.518797  0.706974  0.956250
7  0.320845  0.924984  0.740085  0.939595  0.258833
8  0.058665  0.364624  0.832847  0.790947  0.835429
9  0.924942  0.077599  0.411044  0.075257  0.703015 
```

Boxplot 创建五个框，对应于`DataFrame`. 每个方框描绘了中位数（红线）、第 25 个百分位（方框的下边缘）、第 75 个百分位（方框的上边缘）和最极端的观察值（胡须）。

那有意义吗？

# ruby-on-rails-3.2 - 具有单数父级的嵌套资源...复数名称

> ID：15778893
> 
> 赞同：0
> 
> 时间：2013-04-03T04:29:12.053
> 
> 标签：ruby-on-rails-3.2, routes, form-for

用户有一组单一的“偏好”。资源应该是单一的，因为用户只有一组他们应该知道的偏好。该名称应该是复数，因为该资源代表过多的设置。我现在遇到路由问题，我相信它源于此。

我已经宣布路线，

```
 resource 'preferences', only: [:show, :edit, :update] do
    resources :weight_based_rates
  end 
```

运行的输出`rake routes`包含以下条目，

```
 preferences_weight_based_rates GET      /preferences/weight_based_rates(.:format)          weight_based_rates#index
                                   POST     /preferences/weight_based_rates(.:format)          weight_based_rates#create
 new_preferences_weight_based_rate GET      /preferences/weight_based_rates/new(.:format)      weight_based_rates#new
edit_preferences_weight_based_rate GET      /preferences/weight_based_rates/:id/edit(.:format) weight_based_rates#edit
     preferences_weight_based_rate GET      /preferences/weight_based_rates/:id(.:format)      weight_based_rates#show 
```

然后，在相关的部分中，我声明了这样的形式，

```
= form_for [@preference, WeightBasedRate.new], :remote => true do |f| 
```

最后，我在 Preferences#show 中得到一个 `NoMethodError

```
undefined method `preference_weight_based_rates_path' for #<#<Class:0x0000000572d2b0>:0x000000057b4800> 
```

请注意，这种未定义的方法涉及单数形式的“偏好”。

也许我背叛了某种程度的天真，但这并不是 Rails 的魔力第一次让我失望：rails 是基于对我的模型的奇异性的一些假设来构造一个奇异的名称吗？或者也许基于我正在传递一个实例的事实？那么导轨是否无法将这些部件组合在一起？我只是对 form_for 的论点安排得很差吗？

轨道是混乱的，还是我？

# ios - 每个 Time Plist 文件都会被覆盖

> ID：15778895
> 
> 赞同：0
> 
> 时间：2013-04-03T04:29:26.893
> 
> 标签：ios, objective-c, xcode, plist

我已经使用以下代码来访问数据并将其附加到 plist 中。但是每次plist中的数据都会被覆盖。

**代码有错误吗？**

请帮忙。

```
NSString* plistPath = nil;
NSFileManager* manager = [NSFileManager defaultManager];
if ((plistPath = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"stores.plist"]))
{
    if ([manager isWritableFileAtPath:plistPath])
    {
        NSArray * infoArray = [NSMutableArray arrayWithContentsOfFile:plistPath];
        NSMutableArray * newArray = [infoArray mutableCopy];

        NSMutableDictionary *infoDict = [[NSMutableDictionary alloc]init];
        [infoDict setObject:@"a object" forKey:@"Lname"];
        [infoDict setObject:@"3s3z32 object" forKey:@"Fname"];

        [newArray addObject:infoDict];

        [newArray writeToFile:plistPath atomically:TRUE];

        [manager setAttributes:[NSDictionary dictionaryWithObject:[NSDate date] forKey:NSFileModificationDate] ofItemAtPath:[[NSBundle mainBundle] bundlePath] error:nil];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:32:48.983

问题是你的 plist 没有更新任何东西，因为你试图在主包中写 plist，而在主包中你不能写任何东西，所以它可能只采用默认值..

在这里查看我的答案[NSDictionary 值替换而不是添加到 Plist](https://stackoverflow.com/questions/15607725/nsdictionary-value-replacing-instead-of-adding-in-plist/15607793#15607793)

# ruby-on-rails-3 - Rails 教程 (Hartl) - 注册确认扩展

> ID：15778898
> 
> 赞同：0
> 
> 时间：2013-04-03T04:29:53.053
> 
> 标签：ruby-on-rails-3, railstutorial.org

我刚刚完成了**Ruby on Rails**教程 (Michael Hartl)。

在上一章的最后，他推荐了一些对示例应用程序的扩展。这些扩展之一是`"Signup confirmation"`他总结如下：

> “除了电子邮件正则表达式，示例应用程序目前无法验证用户电子邮件地址的有效性。添加电子邮件地址验证步骤以确认用户的注册。新功能应创建处于非活动状态的用户，通过电子邮件发送用户激活 URI，然后在 URI 被命中时将用户更改为活动状态。您可能需要阅读 Rails 中的状态机以帮助您进行非活动/活动转换。

问题：

有没有一种常见的**“Rails 方式”**来做到这一点？我做了很多搜索，但没有找到明确的解决方案。此外，我发现的任何潜在解决方案都没有提到状态机。然而，既然迈克尔哈特尔提到了它，我觉得我应该考虑他的建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:09:53.313

有人可能会想出更好的答案，但为什么不给 User 模型一个布尔激活字段，一个激活令牌字符串，发送一封带有它的 url 的电子邮件，然后通过该令牌进行识别并激活用户。激活成员操作应该这样做。

当然人们可能会说这不是 REST，但有时在某些情况下创建自己的资源有点过于广泛。

我认为在 railscasts 上有一个关于 statemashines 的插曲。

# python - Flask 应用程序中的远程数据库初始化

> ID：15778910
> 
> 赞同：1
> 
> 时间：2013-04-03T04:31:41.067
> 
> 标签：python, flask

我有烧瓶应用程序在带有 mysqlDB 的服务器 A 上运行。在使用该应用程序之前，我们做了这样的事情：

```
$ python -c "from your_app import db; db.create_all()" 
```

初始化数据库。现在我们计划将 DB 移动到新服务器 Server-B。所以应用程序将在服务器 A 上运行，其 mysql 数据库将在服务器 B 上。在这种情况下，我需要如何初始化数据库？我需要在哪里执行`create_all()`命令？Server-B 是否需要任何 Flask 特定的 mysql 包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:51:54.633

假设您已经更新了应用程序的数据库连接信息，`db`现在指向服务器 B 上的 MySQL 数据库，您应该能够在服务器 A 上使用完全相同的命令。无论您使用什么来创建表，仍然应该在服务器 B 上的数据库。

# java - Spring MVC：如何重定向到有错误的页面？

> ID：15778913
> 
> 赞同：2
> 
> 时间：2013-04-03T04:32:37.377
> 
> 标签：java, spring, jsp, spring-mvc

我试图让我的控制器重定向到带有自定义错误消息的页面：

```
 @RequestMapping(method=RequestMethod.POST)
    public String processSubmit(@Valid Voter voter, BindingResult result, HttpServletRequest request) {
        if (result.hasErrors()) {
            logger.info("RegisterController encountered form errors ");
            return "registerPage";
        }
        if (service.isVoterRegistered(voter.getVoterID())) {
          logger.info("VoterID exists");

          request.setAttribute("firstName", voter.getFirstName());
          request.setAttribute("lastName", voter.getLastName());
          request.setAttribute("ssn", voter.getSsn());
          return "forward:/question";

        }else {
          logger.info("RegisterController is redirecting because it voter info failed to authenticate");
          //TODO: should re-direct to register page with error

          return "redirect:registerPage";
        }
       }
} 
```

```
 <!-- registerPage.jsp -->
    <div class="container">
        <h1>
            Voter Registration
        </h1>
        <div class="span-12 last">  
            <form:form modelAttribute="voter" method="post">
                <fieldset>      
                    <legend>Voter Fields</legend>
                    <p>
                        <form:label for="firstName" path="firstName" cssErrorClass="error">First Name : </form:label></br>
                        <form:input path="firstName" /><form:errors path="firstName"/>
                    </p>
                    <p> 
                        <form:label for="lastName" path="lastName" cssErrorClass="error">Last Name : </form:label> </br>
                        <form:input path="lastName" /> <form:errors path="lastName" />
                    </p>
                    <p> 
                        <form:label for="ssn" path="ssn" cssErrorClass="error">Social Security Number : </form:label> </br>
                        <form:input path="ssn" /> <form:errors path="ssn" />
                    </p>
                    <p> 
                        <input type="submit"/>
                    </p>
                </fieldset>
            </form:form>
        </div>
        <hr>    
    </div> 
```

在重定向到 register.jsp 页面时，我希望页面显示一条错误消息，说明选民未注册。我的问题是如何让 Controller 返回页面，就好像表单有验证错误一样（即 result.hasErrors() == true) 。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T05:09:32.940

您可以在您的 jsp 中添加以下部分——

```
<c:choose>
<c:when test="${not empty  errors}">
    <div class="error">
    <c:forEach items="${errors}" var="err">
        ${err.defaultMessage}
        <br/>
    </c:forEach>
    </div>
</c:when>
</c:choose> 
```

这里`c`只有这个——

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %> 
```

您还需要将错误传递给模型并在控制器方法的 if 块中像这样查看 -

```
model.addAttribute("errors",result.getFieldErrors()); 
```

`error`**DIV**中的类不过是我的自定义 css，显示为红色块——

```
.error{
    color: red;
    border:2px solid red;
    padding:10px;

} 
```

你也可以看看[这个](http://www.mkyong.com/spring-mvc/spring-3-mvc-and-jsr303-valid-example/)
希望我的回答对你有帮助..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-26T13:07:44.900

你的控制器方法有问题。从结果中调用`getAllErrors()`方法会比从`getFieldErrors()`. 当然，如果结果是`BindingResult`type 。像这样：

`model.addAttribute("errors", result.getAllErrors());`

# indexing - 如何从 sybase 表中获取索引名称、键和描述

> ID：15778914
> 
> 赞同：0
> 
> 时间：2013-04-03T04:32:41.190
> 
> 标签：indexing, backup, sybase, table-index

我想从 Unix shell 脚本为特定表创建索引，因此我需要该特定表的索引名称、索引键和索引描述。

“sp_helpindexes”用一些不需要的行给出了所有这些细节，但我需要其他方法来只获取索引名称、键和描述。

有人请帮我解决这个问题......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:25:51.123

从 sysindexes 表中获取索引名称
select name,indid,keycnt from sysindexes where id=object_id("table_name")
然后使用 index_col(table_name,indexid,keycnt-1) 查找键。

希望这会有所帮助

谢谢，
戈帕尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T07:08:55.250

## 自定义 SQL 请求

您可以使用 sp_helptext 命令找到 sp_helpindex 的描述，如下所示：

```
use sybsystemprocs
go

sp_helptext sp_helpindex
go 
```

这将为您提供存储过程的定义。然后您可以提取所需的 SQL 请求（这可能很棘手，另一个 store_proc）。

## 用于处理 sp_helpindex 输出的 Shell 脚本

另一方面，它似乎只是一个shell问题，一旦你可以调用你的SQL服务器。例如，使用 sqsh 程序（类似 isql 的程序），您可以拥有一个 myindexes.sql 文件，其中包含：

```
use databaname
go
sp_helpindex tablename
go 
```

然后命令

```
sqsh -U username -P password -S SYBASESERVER -i myindexes.sql -h > myindexes.txt 
```

将为您提供可以处理的 sp_helpindex 输出。使用 sqsh 输出，第 3 行包含索引名称和键，第 4 行包含描述。我用 ：

```
#!/bin/bash

# Call sqh command : output in myindex.txt
sqsh -U username -P password -S SYBASESERVER -i myindexes.sql -h > myindex.txt

# Then process the output
INAME=`sed '3!d' myindex.txt | tr -s ' ' | cut -d ' ' -f 2`
IKEYS=`sed '3!d' myindex.txt | tr -s ' ' | cut -d ' ' -f 3`
IDESC=`sed '4!d' myindex.txt | tr -s ' ' | cut -f 2`

# print out the values
echo "$INAME $IKEYS $IDESC"

# Clean up the files
rm myindex.txt 
```

希望这有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-08T17:52:55.610

在 Sybase 版本 SAP IQ/16 中，您可以获得以下索引列表（表名 my_table 区分大小写）：

```
select *
from sys.sysindexes
where tname = 'my_table'; 
```

# php - PHP：考虑夏令时获取 EST 时区的当前日期

> ID：15778920
> 
> 赞同：4
> 
> 时间：2013-04-03T04:32:56.860
> 
> 标签：php

我已尝试使用此代码获取 EST 时区的当前日期，

```
$currentDate=date("Y-m-d h:i A");
$timezone='EST';
date_default_timezone_set($timezone);
$storedate=date("Y-m-d h:i A");
echo $currentDate."  ===  ".$storedate."<br/><br/>"; 
```

存储的日期显示延迟 1 小时。我认为这是因为夏令时。考虑到夏令时，请为我提供获取 EST 时区当前日期的最佳方法。

# jquery - 在chrome中使用jquery处理click()和调试jquery

> ID：15778922
> 
> 赞同：0
> 
> 时间：2013-04-03T04:33:04.617
> 
> 标签：jquery, html

概念：

我在struts2 java中有一个动态表单，当用户单击“添加新Edu”链接时，将触发一个jquery函数来扩展动态表单。这是我的jsp：

```
<html>
<head>
<script language="text/javascript" src="js/jquery-1.9.0.js"></script>
<script language="text/javascript" src="js/common.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Education List</title>
</head>
<body>
<s:form action="/save" method="POST">   
    <div class="educationForm">
        <c:if test="${ (not empty educations) }"> 
            <c:if test="${ fn:length(educations) ge 1 }">
                <c:forEach items="${educations}" var="edu" varStatus="status">
                    <div class="educations">                    
                        <label>Position</label><input type="text" name="educations[${ status.index }].index" value="${ educations[status.index].index }" /><br/>
                        <label>School</label><input type="text" name="educations[${ status.index }].school" value="${ educations[status.index ].school }" /><br/>
                        <label>Degree</label><input type="text" name="educations[${ status.index }].degree" value="${ educations[status.index ].degree }" /><br/>
                        <label>GPA</label><input type="text" name="educations[${ status.index }].scored" value="${ educations[status.index ].scored }" /><br/>
                        <label>Start Date</label><input type="text" name="educations[${ status.index }].startDate" value="${ educations[status.index].startDate }" /><br/>
                        <label>End Date</label><input type="text" name="educations[${ status.index }].endDate" value="${ educations[status.index].endDate }" /><br/>
                    </div>
                </c:forEach>        
            </c:if>         
        </c:if>
        <div class="educations">
            <label>Position</label><input type="text" name="educations[${fn:length(educations)}].index" value="${fn:length(educations) + 1}" /><br/>
            <label>School</label><input type="text" name="educations[${fn:length(educations)}].school" /><br/>
            <label>Degree</label><input type="text" name="educations[${fn:length(educations)}].degree" /><br/>
            <label>GPA</label><input type="text" name="educations[${fn:length(educations)}].scored" /><br/>
            <label>Start Date</label><input type="text" name="educations[${fn:length(educations)}].startDate" /><br/>
            <label>End Date</label><input type="text" name="educations[${fn:length(educations)}].endDate" /><br/>
        </div>
    </div>  
    <a href="#" id="addButton">Add new Edu</a>
    <input type="submit" value="Save" />        
</s:form>

<div class="template_educations" style="display:none">
    <div class="educations">
        <label>Position</label><input type="text" name="educations[_X_].index" /><br/>
        <label>School</label><input type="text" name="educations[_X_].school" /><br/>
        <label>Degree</label><input type="text" name="educations[_X_].degree" /><br/>
        <label>GPA</label><input type="text" name="educations[_X_].scored" /><br/>
        <label>Start Date</label><input type="text" name="educations[_X_].startDate" /><br/>
        <label>End Date</label><input type="text" name="educations[_X_].endDate" /><br/>
    </div>
</div>
</body>
</html> 
```

Common.js 文件：

```
$(document).ready(function(){
    $("#addButton").click(function(event){
        event.preventDefault();
        $(".educationForm").append($(".template_educations").html);
        $(".educationForm").children(".educations").last().children("input").each(function(){           
            var count = $(".educationForm").children(".education").length();
            var value = $(this).attr("name");
            value.replace("_X_", count + 1);
            $(this).attr("name", value);
        });         
    });
}); 
```

问题：

*   jquery 函数似乎无法正常工作。[我在Use jquery click to handle anchor onClick()](https://stackoverflow.com/questions/8908191/use-jquery-click-to-handle-anchor-onclick)中尝试了一些建议，但没有帮助。

*   通常，我使用 chrome 来调试 javascript。但是在这种情况下，js文件没有出现在chrome开发工具的sources选项卡中，所以我无法在chrome中调试它。

对我的问题有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:16:26.047

您的脚本标记定义无效，语言属性应该具有值`javascript`而不是 if `text/javascript>`。

```
<script language="javascript" src="js/jquery-1.9.0.js"></script>
<script language="javascript" src="js/common.js"></script> 
```

# javascript - HighCharts 工具提示即将推出，但图表未推出

> ID：15778924
> 
> 赞同：0
> 
> 时间：2013-04-03T04:33:16.497
> 
> 标签：javascript, jquery, highcharts

我已经包含了 jquery 1.8.2 和 highcharts 2.1.2 有什么我错过的吗？

我该如何解决它..只有工具提示来了，而不是图表

![在此处输入图像描述](https://i.stack.imgur.com/2rQdN.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:17:15.273

如果你升级 jquery，你也应该升级你的 Highcharts。所以我建议将 jquery 1.8.2 与 Highcharts 3.0 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:36:45.943

如果您使用的是日期时间 x 轴，则需要将数据按升序排列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:04:24.480

用 jQuery 1.4.2 替换 jQuery 1.8.2

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T05:23:16.647

几天前我也遇到了同样的问题。我使用的是 jQuery 1.8。经过相当长的一段时间后，我用 jQuery 1.7 替换了 jQuery 文件。它对我来说就像一个魅力。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T13:57:31.870

用 3.0 替换 Highchart 对我有用..Sebastian Bochan 也回答了同样的问题

# iphone - 如何通过项目模板定义向 AppDelegate.m 添加方法

> ID：15778925
> 
> 赞同：0
> 
> 时间：2013-04-03T04:33:27.407
> 
> 标签：iphone, ios

我克隆并修改了 Apple 的 iOS 项目模板，并且能够将其方法之一定义如下：

```
<key>Definitions</key>
<dict>
    <key>___VARIABLE_classPrefix:identifier___AppDelegate.m:applicationdidFinishLaunchingWithOptions</key>
    <string>- (BOOL)application:(UIApplication *)application
        didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        UIViewController *mainViewController = [[AppMainViewController alloc] init];
                   self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        self.window.backgroundColor = [UIColor whiteColor];
            [self.window makeKeyAndVisible];

            self.window.rootViewController = mainViewController;

            return YES;
    }
    </string> 
```

该代码在 AppDelegate.m 中很好地生成了但是以下不会生成“myMethod”

```
<key>___VARIABLE_classPrefix:identifier___AppDelegate.m:myMethod</key>
        <string>- (void)myMethod:(NSManagedObjectContext *) managedObjectContext
        {
              //my code
        }
        </string> 
```

如何通过模板定义将我自己的方法引入到类中？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:57:24.897

您的方法没有出现的原因是您所做的还不够。模板形成统一的层次结构。你只是给出一个方法的定义。您还必须声明该方法存在。查看模板的祖先 Cocoa Touch Application 的 templateInfo.plist，您将看到发生这种情况的位置。有一个 Nodes 数组列出了所有可能的方法。

# java - 用于自定义需求的 Antlr 解析器

> ID：15778927
> 
> 赞同：0
> 
> 时间：2013-04-03T04:33:43.643
> 
> 标签：java, antlr, antlr3

我对使用 ANTLR 解析输入有一个非常特殊的要求。我希望能够解析如下表达式；

**正确的输入**

*   用户名
*   用户名用户名
*   | EATALL 任何东西都可以来这里/ok | 全部吃掉 ...

**无效输入**

*   用户名
*   用户名^人脸

好吧，任何出现在`| EATALL`和之前`| EATALL`（如果有的话）的表达式都必须作为单个标记获得。而在`| EATALL`没有出现其他简单输入的情况下，只有`_`, `-`,的有效组合`[a-zA-Z0-9]`被标记为一个标记。在伪代码中，

*   用户名 -> [用户] [名称]
*   用户名 -> [用户名]
*   |EATALL 用户/命名我的用户 -> [用户/命名我的用户]

对我来说，这似乎是一个模棱两可的标记化案例。我正在寻求您对在 antlr 中处理此类问题的建议。提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:00:24.967

那么，你尝试过什么？您的问题是针对 Antlr 3 还是您可以使用 Antlr 4？

对于 Antlr 3，您可以使用语义谓词来条件标记规则选择。由于 Antlr 4 没有符号语义谓词，因此您可以使用本机代码操作来实现基本相同的结果。例如（未经测试）：

```
lexer grammar eatall ;

ValidSimple : { isCurrenLineJustTEXTandWS() }? TEXT ;
-- or --
ValidSimple : TEXT ( WS TEXT)* EOL?  { emitEachTEXTasNewValidSimpleToken(); } ;

ValidEatAll : IgnoreL .*? IgnoreR    { trimIgnoreLRTextfromTokenText(); } ;
Invalid     : WS+ | .*? EOL?         -> channel(HIDDEN) ;

IgnoreL : .*? MARK ;
IgnoreR : MARK .*? EOL? ;

fragment MARK : '| EATALL' ;
fragment TEXT : [a-zA-Z0-9_-] ;
fragment EOL  : '\r'? '\n' ;
fragment WS   : [ \t] ; 
```

# c++ - 为什么我的一些立方体面没有按照我想要的方式渲染？

> ID：15778929
> 
> 赞同：3
> 
> 时间：2013-04-03T04:33:46.840
> 
> 标签：c++, opengl, depth-buffer

## 左侧正面；右脸在右边

![立方体正面](https://i.stack.imgur.com/wJE2l.png)

## 左侧背面；左边脸右边

![立方体背面](https://i.stack.imgur.com/WwJJj.png)

经过一番调试，我得出了几个结论：

*   面部剔除（在照片中关闭）似乎使情况变得更糟。

*   深度缓冲（在照片中打开）似乎无济于事。

`glFrontFace( GL_CW ) | glFrontFace( GL_CCW )`与 结合使用的面剔除`glCullFace( GL_BACK_FACE )`。

# 更新

以下是 Need4Sleep 提供的代码片段的结果：

（注意：GL_LESS 深度比较本身似乎并没有改变任何东西）

## 左前脸；右面右面 - 面剔除开启

![带剔除](https://i.stack.imgur.com/TgYNH.png)

* * *

## 代码概述

顶点和颜色在结构中按顶点、颜色排序，称为`simdColorVertex_t`，其中结构的颜色和顶点分量均由 4 个浮点数组成，每个浮点数在各自的数组中：

```
typedef float simdVec4_t[ 4 ];

typedef struct simdColorVert4_s
{
    simdVec4_t position;
    simdVec4_t color;
}
simdColorVert4_t; 
```

### 颜色立方体类

构造函数创建其各自的程序。然后指定顶点和索引数据，并绑定到各自的缓冲区：

（为简洁起见省略了着色器程序的创建）

```
 const float S = 0.5f;

    const simdColorVert4_t vertices[] =
    {
        /*! Positions */                    /*! Colors */           /*! Indices */
        { {  S,  S,  S, 1.0f },     { 0.0f, 0.0f, 1.0f, 1.0f } },   //! 0

        { { -S,  S,  S, 1.0f },     { 1.0f, 0.0f, 0.0f, 1.0f } },   //! 1

        { { -S, -S,  S, 1.0f },     { 0.0f, 1.0f, 0.0f, 1.0f } },   //! 2

        { {  S, -S,  S, 1.0f },     { 1.0f, 1.0f, 0.0f, 1.0f } },   //! 3

        { {  S,  S, -S, 1.0f },     { 1.0f, 1.0f, 1.0f, 1.0f } },   //! 4

        { { -S,  S, -S, 1.0f },     { 1.0f, 0.0f, 0.0f, 1.0f } },   //! 5

        { { -S, -S, -S, 1.0f },     { 1.0f, 0.0f, 1.0f, 1.0f } },   //! 6

        { {  S, -S, -S, 1.0f },     { 0.0f, 0.0f, 1.0f, 1.0f } }    //! 7
    };

    const GLubyte indices[] =
    {
        1, 0, 2,    2, 0, 3,    //! Front Face

        3, 6, 4,    4, 0, 3,    //! Right Face

        3, 6, 2,    2, 6, 7,    //! Bottom Face

        7, 6, 4,    4, 5, 7,    //! Back Face

        7, 5, 2,    2, 1, 5,    //! Left Face

        5, 1, 4,    4, 0, 1,    //! Top Face
    };

    //! The prefix BI_* denotes an enum, standing for "Buffer Index"

    {
        glBindBuffer( GL_ARRAY_BUFFER, mBuffers[ BI_ARRAY_BUFFER ] );
        glBufferData( GL_ARRAY_BUFFER, sizeof( vertices ), vertices, GL_DYNAMIC_DRAW );
        glBindBuffer( GL_ARRAY_BUFFER, 0 );

        glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, mBuffers[ BI_ELEMENT_BUFFER ] );
        glBufferData( GL_ELEMENT_ARRAY_BUFFER, sizeof( indices ), indices, GL_DYNAMIC_DRAW );
        glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, 0 );
    } 
```

从那里（仍在构造函数中）创建并绑定顶点数组，以及其各自的属性和缓冲区数据：

```
 glBindVertexArray( mVertexArray );

    glBindBuffer( GL_ARRAY_BUFFER, mBuffers[ BI_ARRAY_BUFFER ] );

    glEnableVertexAttribArray( 0 );
    glEnableVertexAttribArray( 1 );

    glVertexAttribPointer( 0, 4, GL_FLOAT, GL_FALSE, sizeof( float ) * 8, ( void* ) offsetof( simdColorVert4_t, simdColorVert4_t::position ) );
    glVertexAttribPointer( 1, 4, GL_FLOAT, GL_FALSE, sizeof( float ) * 8, ( void* ) offsetof( simdColorVert4_t, simdColorVert4_t::color ) );

    glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, mBuffers[ BI_ELEMENT_BUFFER ] );

    glBindVertexArray( 0 ); 
```

### 杂项

在多维数据集初始化之前，调用此函数：

```
void MainScene::setupGL( void )
{
    glEnable( GL_DEPTH_TEST );
    glDepthFunc( GL_LEQUAL );
    glDepthRange( 0.0f, 1.0f );

    glClearDepth( 1.0f );

    int width, height;

    gvGetWindowSize( &width, &height );

    glViewport( 0, 0, width, height );
} 
```

`mCube->draw(...)`并且在调用函数之前清除深度缓冲区。

我认为很明显我在这里做错了什么，但我不确定它可能是什么。在弄乱了背面剔除并在正面的逆时针和顺时针缠绕顺序之间移动之后，它只会让事情变得更糟。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:41:40.700

尝试将这段代码添加到程序的顶部

```
//screen cleared as blue
glClearColor(0.0f, 0.0f, 0.4f, 0.0f);
glEnable(GL_DEPTH_TEST);
glDepthFunc(GL_LESS);
glEnable(GL_CULL_FACE); 
```

这是来自我编写的纹理立方体程序，您可能已经实现了其中一些功能，但据我所知，您可能会丢失`glDepthFunc(GL_LESS)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:49:45.417

根据@JasonD 关于有缺陷的索引绘制顺序的通知，索引已编辑如下：

```
const GLubyte indices[] =
{
    1, 0, 2,    2, 0, 3,    //! Front Face

    3, 7, 4,    4, 0, 3,    //! Right Face (edited)

    3, 7, 2,    2, 6, 7,    //! Bottom Face (edited)

    7, 6, 4,    4, 5, 6,    //! Back Face

    6, 5, 2,    2, 1, 5,    //! Left Face (edited)

    5, 1, 4,    4, 0, 1,    //! Top Face
}; 
```

如果将上述指标与问题中提到的原始指标进行比较，不难发现人为错误的缺陷之美！

（不用说，立方体现在可以正确渲染）

# oracle - ORA-01407: 无法更新为 null

> ID：15778930
> 
> 赞同：2
> 
> 时间：2013-04-03T04:34:22.963
> 
> 标签：oracle

我用于更新列“p1_high_edu_ctry”的 sql 查询是：-

```
 update ps_personal_data J
 set (J.p1_high_edu_ctry) = (SELECT P.p1_high_edu_ctry FROM PS_PERS_DATA_EFFDT P 
 WHERE P.EFFDT=(SELECT MAX(K.EFFDT) FROM PS_PERS_DATA_EFFDT K
 WHERE K.EFFDT<=SYSDATE
 AND   J.EMPLID IN(SELECT H.EMPLID FROM PS_AUDIT_PER_EFFDT H 
 where h.AUDIT_OPRID='CHGH00000063232')))
 where exists(select 1 from PS_AUDIT_PER_EFFDT q where q.emplid=j.emplid) ; 
```

但是我在更新时收到错误消息：-

```
ERROR at line 2:
ORA-01407: cannot update ("SYSADM"."PS_PERSONAL_DATA"."P1_HIGH_EDU_CTRY") to NULL 
```

请有任何建议，为什么即使我在存在的地方处理它也不起作用？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:41:35.797

您对此字段有一个非空约束，而您的子查询不返回任何数据，返回空值。这是[标量子查询表达式的记录行为](http://docs.oracle.com/cd/B19306_01/server.102/b14200/expressions010.htm#i1033549)

```
12:28:52 SYSTEM@dwal> create table n (t number not null);

Table created.

Elapsed: 00:00:00.31
12:39:18 SYSTEM@dwal> insert into n values (1);

1 row created.

Elapsed: 00:00:00.01
12:40:12 SYSTEM@dwal> update n set t = (select 2 from dual where 1 = 2);
update n set t = (select 2 from dual where 1 = 2)
             *
ERROR at line 1:
ORA-01407: cannot update ("SYSTEM"."N"."T") to NULL

Elapsed: 00:00:00.03 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:59:54.323

试试这个

```
 MERGE INTO ps_personal_data J
 USING
 (
   SELECT P.p1_high_edu_ctry, p.emplid 
   FROM PS_PERS_DATA_EFFDT P 
   WHERE P.EFFDT=
              (
                SELECT MAX(K.EFFDT) FROM PS_PERS_DATA_EFFDT K
                WHERE K.EFFDT<=SYSDATE AND P.EMPLID = K.EMPLID 
                -- updated this condition , 
                -- you need to check max date by emplid 
                -- not max date from full table               
               )
   AND   P.EMPLID IN (SELECT H.EMPLID FROM PS_AUDIT_PER_EFFDT H 
                where h.AUDIT_OPRID='CHGH00000063232')
 ) v ON (J.emplid = v.emplid)
 WHEN MATCHED THEN UPDATE
 set J.p1_high_edu_ctry = nvl(v.p1_high_edu_ctry,' '); 
```

# php - 使用 CodeIgniter，您将如何创建用户帐户，然后发送包含表单值的电子邮件？

> ID：15778936
> 
> 赞同：0
> 
> 时间：2013-04-03T04:34:50.477
> 
> 标签：php, codeigniter

使用 CodeIgniter，我正在使用表单来创建用户。用户确实在数据库中创建。在我的用户模型中，我在将 verify_hash 的值插入数据库之前对其进行操作：

```
public function set_user(){

    $data = array(
        'temporary_email'   => $this->input->post('email'),
        'password'          => $this->input->post('password'),
        'verification_hash' => sha1(mt_rand(1000, 9999999))
    );

    $this->db->set('created', 'NOW()', FALSE);

    return $this->db->insert('users', $data);
} 
```

然后，我希望能够使用 Email 类发送电子邮件。我需要能够在我的电子邮件中使用“verification_hash”的新值。

如果有更好的方法来做到这一点，我全神贯注，我仍在学习 CI。谢谢，杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:01:07.143

您可以只返回`$data`数组，然后您的控制器代码将类似于

```
public function foo()
{
 if($this->input->post('user'))
 {
    //Validation rules

    if($this->form_validation->run())
    {
        $user = $this->user_model->set_user();
        $this->load->library('email');

        $this->email->from('email@email.com', 'Name');
        $this->email->to($user['temporary_email']);

        $this->email->subject('Welcome');
        $this->email->message($user['verification_hash']);

        $this->email->send();

    } else {
        //Reloads Same form with errors
    }
 }
} 
```

但是我不知道为什么要为这样的临时数据创建`unique_hash/url | user_id | status` 用户网站上更重要的东西必须将**hash_status**设置为 used

# ipython - Ipython 配置 - 配置类概述

> ID：15778937
> 
> 赞同：3
> 
> 时间：2013-04-03T04:34:52.640
> 
> 标签：ipython

我已经阅读、检查了 <0.11 文档，然后重新阅读了 IPython 手册。诚然，我可能没有记住每一页，但对于初学者来说，组织性和清晰度明显不足。请知道 Ipy-Fu 的人教我方法……我想要的只是一个在 Windows 上工作的外壳。

我试图在 0.12 和 0.13 上解决这个问题，但都没有证明是成功的。手册页提供了大量示例，但没有一个示例真正匹配 Ipython 安装的默认配置文件（尤其是关于配置文件）。我在 Windows7-64 上，尽管我认为这并不重要。我的大部分*问题*都与 QtConsole 有关，但我什至不确定我是如何让终端正常工作的，而且我现在什至不敢触摸我的配置。我只有一个配置文件（“默认”），我无法协调我的配置。

请解释配置类的继承，不是很明显，不深入开发章节就很少解释。

这些是什么，我为什么要它们，它们是做什么的：

```
-InteractiveShellApp
-TerminalIPythonApp
-ZMQTerminalIPythonApp
-TerminalInteractiveShell
-IPKernelApp
-ZMQTerminalInteractiveShell
-ZMQInteractiveShell
-Session (zmq sessions i think)
-IPythonQtConsoleApp
-IPythonWidget 
```

我无法更改 QtConsole IPy 上的横幅。配置madness.r 20小时后感觉迟钝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:22:55.373

对混乱的文档感到抱歉，我们计划在可能的情况下编写对用户更友好的内容，但还有很多工作要做。

如果你这样做，`ipython profile create profile_name`ipython 将创建一个名为 profile_name 的新配置，你可以随意使用它而不会感到害怕，只需使用 ì`ipython [subcommand] [options] --profile=profile_name`来使用它。

配置与实现直接相关，因此“解释”每一个都是困难且冗长的。简而言之，如果您在 IPython 中定义以下内容：

```
class FooBar(Configurable):

    myvar = Unicode('empty', config=True)

    .... rest of implementation 
```

在您的配置文件中，您可以执行

```
c.FooBar.myvar = 'Hello World' 
```

它会做你所期望的，每个实例都`FooBar`将`myvar`设置为`'Hello World'`. 因此，实现和配置之间的紧密关系得到了相同的继承图。

我建议您看一下`ipython --help-all` `ipython qtconsole --help-all`...等帮助是动态生成的，因此将始终与您使用的版本保持同步。

至于 qtconsole 横幅，我什至不确定这个横幅是否可配置。

如果您对想要做什么以及出了什么问题有更精确的问题，您可以来 ML。

也很抱歉在 windows 特定的东西上缺乏帮助，我们使用 windows 的用户太少（而且没有开发人员），所以很难提供帮助。

注意，您还可以在运行时使用 config 来玩`%config`魔术。

# post - 在服务器端 - Worklight 上解压缩/提取文件

> ID：15778940
> 
> 赞同：0
> 
> 时间：2013-04-03T04:35:02.910
> 
> 标签：post, cordova, phonegap-plugins, ibm-mobilefirst

有没有办法将带有 POST 的 zip 文件下载到服务器并解压缩？我正在使用 HTTP 适配器。另外，我不明白如何在 worklight 中向服务器执行 POST 请求。

我尝试使用基于 java 的适配器向服务器添加 http post 请求，但我不知道如何访问文件系统来保存文件。是否可以在 worklight 上的基于 java 的适配器中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:47:23.367

如果我理解正确，那么您的问题与 Worklight 无关。

您可以使用 http 适配器调用您需要创建的 Web 服务来处理它（例如，Web 服务将通过 post 对 zip 文件执行 cURL，将其解压缩并将 XML 发送回 Worklight 服务器和从那里到客户）。

您可以使用可以执行相同操作的 Java 适配器来执行此操作，但我强烈建议您不要这样做。Worklight 服务器不应该用于这样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:02:00.023

*   有关如何在 Worklight 适配器中使用 POST 的信息，请参阅[模块 4_2 HTTP 适配器中的第 15 页。](http://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v506/04_02_HTTP_adapter_-_Communicating_with_HTTP_back-end_systems.pdf)

*   您可以使用[Cordova FileTransfer API](http://docs.phonegap.com/en/2.5.0/cordova_file_file.md.html#FileTransfer)将文件下载到**设备文件系统**。

据我所知，您无法将数据下载到**Worklight Server**并在之后使用它。

# mongodb - 复合键的 $max 评估

> ID：15778947
> 
> 赞同：0
> 
> 时间：2013-04-03T04:35:58.480
> 
> 标签：mongodb, aggregation-framework

聚合框架的`$max`运算符如何评估复合键。例如：

```
{
  $project: { 
    user: 1, 
    record: { date: "$upload_date", comment: 1, some_integer: 1 }
  }
},
{
  $group: {
    _id: "$user",
    latest: { $max : "$record" }
  }
} 
```

`date`它会通过、`comment`或获得最大值`some_integer`吗？我只是假设它会得到最新的`date`。如果错了，找到最大值的正确方法是`date`什么？

**编辑**

从我目前所尝试的来看，最新的记录是由第一个键决定的。这是正确的行为吗？

**编辑**

为了了解我的用例，我有以下文档：

```
 > db.logs.findOne()
  {
  'id': ObjectId("50ad8d451d41c8fc58000003")
  'name': 'Sample Log 1',
  'uploaded_at': ISODate("2013-03-14T01:00:00+01:00"),
  'case_id': '50ad8d451d41c8fc58000099',
  'result': 'passing'
  'tag': ['TAG-XYZ']
  } 
```

我有以下聚合：

```
 db.test_case_logs.aggregate(
  {$project: {tag:'$tag', case:'$case_id',
    latest: {upload_date:1, date:'$upload_date', result:'$result',
    passing : { $cond : [ { $eq : ["$result","passing"] }, 1, 0 ] },
    failing : { $cond : [ { $eq : ["$result","failing"] }, 1, 0 ] }}
  }},
  {$unwind: '$tag'},
  {$group: {_id:{tag:'$tag',case:'$case'}, latest:{$max:'$latest'}}},
  {$group: {_id:'$_id.tag',total:{$sum:1}, passing:{$sum:{$latest.passing}},
    failing:{$sum:{$latest.failing}, date:{$max:{$latest.upload_date}}}
  },
  {'$sort': {'date':-1}}
  ) 
```

日志可以具有相同的名称`tag`，`case_id`并且在分组两次之后，我需要结果只是`upload_date`每个`tag`.

**编辑**

我的预期结果是这样的：

```
 {
    '_id':'TAG-XYZ',
    'total':'1'
    'passing':'1'
    'failing':'0'
  } 
```

每个计数对应于给定案例的最新日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:43:14.053

根据[`$max`文档](http://docs.mongodb.org/manual/reference/aggregation/max/)，此运算符

> 返回该组选择的所有文档中字段的所有值中的最大值。

您可以通过 { $max : "$record.date" } 指定日期的最大操作

聚合操作是这样的：

```
db.collection.aggregate ([
    { $project: { 
        user: 1, 
        record: { date: "$upload_date", comment: 1, some_integer: 1 }
    }},
    { $group: {
        _id: "$user",
        latest: { $max : "$record.date" }
    }}
]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:05:41.730

对于您的案例，您可以使用`$sort`运算符按 $uploaded_at 字段对所有日志进行排序，并按标签和 case_id 对排序结果进行分组，然后使用[`$first`](http://docs.mongodb.org/manual/reference/aggregation/first/)运算符获取每个组的第一项。

```
db.logs.aggregate([

    // Rename the fields and process the result field
    { $project : {
          tag : 1,
          case : "$case_id",
          date : "$uploaded_at",
          result : {
              passing : { $cond : [ { $eq : ["$result","passing"] }, 1, 0 ] },
              failing : { $cond : [ { $eq : ["$result","failing"] }, 1, 0 ] }}
    }},

    // Create a stream of documents from the tag array 
    { $unwind : "$tag" },

    // Sort by uploaded date descending
    { $sort : { date : -1 }},

    // Group the documents by tag and case_id, and use $first operation to get the latest log for each group
    { $group : {
          _id : { tag : "$tag", case : "$case" },
          latest : { $first : "$result" },
    }},

    // Group the document by tag, and caculate the total/pass/fail results
    { $group : {
          _id : "$_id.tag",
          total : { $sum : 1 },
          passing : { $sum : "$latest.passing" },
          failing : { $sum : "$latest.failing" }
    }}
]) 
```

# list - 如何在prolog中模式匹配列表中的元素？

> ID：15778952
> 
> 赞同：2
> 
> 时间：2013-04-03T04:36:28.427
> 
> 标签：list, prolog, pattern-matching

在 prolog 中，如何对列表中的元素进行模式匹配？例如，如果列表像

```
[1/2,1/3,2/5,3/6] 
```

然后你可以做类似的事情

```
one([..,1/A,..]) :- A=2.
one([..,1/A,..]) :- A=3. 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:17:47.170

选择列表的元素可以通过多种方式完成，这取决于你想用它做什么。例如，使用`select/3`：

```
?- select(1/A, [1/2,1/3,2/5,3/6], Rest).
A = 2,
Rest = [1/3, 2/5, 3/6] ;
A = 3,
Rest = [1/2, 2/5, 3/6] ;
false. 
```

或使用`member/2`：

```
?- member(1/A, [1/2,1/3,2/5,3/6]).
A = 2 ;
A = 3 ;
false. 
```

您可以将`select`and`member`与收集所有回溯结果的谓词组合在一起，例如`bagof`or `findall`, or `forall`（如果您需要副作用）

或者，如果您愿意，您实际上可以枚举所有元素，只匹配您需要的元素：

```
foo([1/A|Xs]) :- !, write(A), nl, foo(Xs).
foo([_X|Xs]) :- foo(Xs).
foo([]).

?- foo([1/2,1/3,2/5,3/6]).
2
3
true. 
```

虽然我觉得最后一个不是很好的Prolog，因为它使用了一个cut并且谓词有副作用。重点是展示如何使用匹配和遍历列表的元素。

# ios - 如何在 xcode 中编写所有尺寸的 iphone 都支持的代码

> ID：15778954
> 
> 赞同：3
> 
> 时间：2013-04-03T04:36:40.260
> 
> 标签：ios, xcode, ios6, xcode4

问题是，在 viewcontroller.xib 中保持大小为 none，并编写了在 iphone4 和普通 iphone 中运行的代码，但视图不支持 iphone5 请告诉我如何为所有 iphone 尺寸设计

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:43:15.963

我们需要记住的一件重要事情是您必须放置**Default-568h@2x.png**。然后才开始支持 iPhone 5 。您必须编写此行来处理 iPhone 5 。iPhone5 屏幕尺寸为 640x1136 。因此，您用于 iPhone 4/4s 的图像也适用于 iPhone 5，但背景图像除外，因为 iPhone 5 中的视图高度多 176 像素。

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].scale * [UIScreen mainScreen].bounds.size.height>=1136)
    {
    // write some code here for positioning the element 

    } 
```

如果您有任何问题，请告诉我

# python - Python 的包路径

> ID：15778963
> 
> 赞同：2
> 
> 时间：2013-04-03T04:37:47.923
> 
> 标签：python, package

我想在`/usr/local/lib/python2.6/dist-packages/<this package>`. 但是从我检查的内容来看`sys.path`，这个包不在路径中，所以 Python 使用了这个包`/usr/lib/python2.6/dist-packages`。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:41:09.657

如果这仅适用于一个脚本/程序，我只会添加到脚本的顶部：

```
import sys
sys.path.insert(0, '/usr/local/lib/python2.6/dist-packages') 
```

`/usr/lib/python2.6/dist-packages`如果这种情况更频繁地发生，那么如果可以的话，要么删除包，要么`PYTHONPATH`在登录期间设置环境变量。

# clojure - 如何使用 leiningen 的 maven 插件

> ID：15778970
> 
> 赞同：5
> 
> 时间：2013-04-03T04:38:30.990
> 
> 标签：clojure, jruby, compass-sass, leiningen

我希望能够使用的特定插件是[jruby-maven-plugin](https://github.com/torquebox/jruby-maven-plugins)，因此我可以在 clojure 项目中轻松使用 compass。

如果无法使用 maven 插件，那么在 clojure 项目中使用 ruby​​ gem 的最佳策略是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-12T09:13:20.383

以下两个项目提供 ruby​​ gem 支持。 [lein](https://clojars.org/clogems) [-ruby阻塞](https://clojars.org/lein-ruby)

clogems 项目在文档方面没有任何东西，因此您可能需要自己处理。

lein-ruby 在它的[github](https://github.com/mental/lein-ruby)页面上提供了一些文档。来自 lein-ruby 的 github 页面。

## 用法

### 任务

该插件为 Leiningen 添加了一项任务：

*   `lein ruby CMD [ARGS...]`- 运行 Ruby 命令

您负责将所需版本的 jruby-complete 添加到项目的依赖项中。

### 挂钩

该插件还包括一组钩子（在`leiningen.ruby.bundler` 命名空间中），它们完成三件事：

*   增加`lein deps`将捆绑器和项目 Gemfile 中指定的任何 gem 安装到`vendor/gems`

*   添加`vendor/gems`到项目的类路径

*   将 gem`vendor/gems`作为项目 jar 的一部分打包

### 选项

lein-ruby 还引入了两个可以在 project.clj 中设置的选项：

*   `:ruby-version`- 用于 Ruby 版本`lein ruby`：“1.8”或“1.9”（默认）

*   `:ruby-gem-dir`- 用于 gems 的目录，相对于项目根目录（默认为`vendor/gems`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-09T22:06:55.100

似乎可以使用 Maven 插件和依赖项。查看 Leiningen 的[GitHub](https://github.com/technomancy/leiningen/blob/stable/doc/TUTORIAL.md#overview)，我发现以下似乎相关的信息：

```
:dependencies [[org.clojure/clojure "1.8.0"]
               [clj-http "2.0.0"]] 
```

> Leiningen 将自动下载 clj-http jar 并确保它在您的类路径中。

...

> Leiningen 重用了现有的 JVM 存储库基础架构。有几个流行的开源存储库。Leiningen 默认使用其中的两个：clojars.org 和 Maven Central。
> 
> 您可以通过在 project.clj 中设置 :repositories 键来添加第三方存储库。有关如何执行此操作的示例，请参见[sample.project.clj 。](https://github.com/technomancy/leiningen/blob/stable/sample.project.clj)

# ember.js - 如何限制路线？

> ID：15778971
> 
> 赞同：0
> 
> 时间：2013-04-03T04:38:31.570
> 
> 标签：ember.js

我必须通过更改浏览器中的 url 来限制用户重新路由页面。有没有办法使用 ember 来限制它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:03:14.647

是的。如果您根本不希望浏览器的 URL 与您的应用程序交互，您可以禁用位置 API

```
App.Router.reopen({
  location: 'none'
}); 
```

请参阅[http://emberjs.com/guides/routing/specifying-the-location-api/](http://emberjs.com/guides/routing/specifying-the-location-api/)

# javascript - 用字符串替换 css 值

> ID：15778972
> 
> 赞同：0
> 
> 时间：2013-04-03T04:38:36.913
> 
> 标签：javascript, jquery, regex, dom, html-parsing

我需要将 div 的高度和顶部更改为“$$height$$”和“$$top$$”，然后再将其发布到 php 中。但是 jquery 没有这样做（我认为是为了防止错误）：

```
$("#myobject").css("width", "$$height$$");
$("#myobject").css("top", "$$top$$"); 
```

我想过正则表达式，但它有点不安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:41:23.097

我认为任何浏览器都不会让您设置无效的样式属性，您可能必须通过设置样式属性手动完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:28:30.630

你有没有试过：`$("#myobject").attr("style", "width: $$height$$; top: $$top$$;");`？这有点“hacky”，但最终结果是相同的，并且允许您添加这些值。

**编辑：**实际上，这在 IE 中不起作用。. . 仍然不会接受无效的 CSS 值。您可能需要寻找替代方法。

# gwt - Google Web Toolkit 和 3rd 方 Java 库

> ID：15778973
> 
> 赞同：0
> 
> 时间：2013-04-03T04:38:37.723
> 
> 标签：gwt, gwt-rpc

在我们的 GWT 应用程序开发过程中，我们将使用第三方 Java 库与一些硬件进行交互。用户将使用最终从 3rd Party Library API 调用 Method() 的接口。这可能会在 GWT 开发模式下工作，但是当 Java 代码转换为 javascript 时编译应用程序以进行部署时可能会出现问题，因为该库不支持 javascript。

我不确定我们将如何克服这个问题。但是，目前看来 RPC 模式可能对我们有所帮助。请纠正我对 RPC 的假设理解所犯的任何错误。用户将执行一个操作，该操作将发送一个 RPC 请求到包含第三方 Java API 调用的服务器，该服务器将执行必要的信息并相应地更新 GWT 用户界面。我的问题归结为 - 当我认为 GWT 应用程序不会将应用程序编译成 java 脚本时，如何在我的 GWT 应用程序中使用第三方库。

我觉得好像我不是完全描述性的，但这是一个我们没有考虑过的问题，希望我们能以某种方式解决这个问题。

非常感谢任何和所有反馈！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T04:44:56.340

服务器端代码不会转换为 Javascript，因此如果您通过 RPC 将调用包装到 3rd 方库，您应该没问题。

这扩展到参数并将值返回到您的 3rd 方库。即您不能在 RPC 接口中使用第 3 方类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:44:36.197

如果你想添加第三方库，那么它也必须有源文件，因为 GWT 会将所有代码转换为 javascript。请参阅此答案[将外部 jar 添加到 GWT](https://stackoverflow.com/questions/14515459/adding-external-jar-in-gwt/14515943#)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T20:13:30.857

如果可以通过 JavaScript 访问 3rd 方库，那么您可以在 GWT 客户端代码中使用 JSNI。

[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)

# java - 在java中验证串行端口输入

> ID：15778974
> 
> 赞同：0
> 
> 时间：2013-04-03T04:38:43.897
> 
> 标签：java, mysql, serial-port

我需要验证我正在使用的串行端口输入，并从 mysql 中创建的数据库中验证它。我已经设法接受串行输入，但在验证部分找不到任何相关内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:41:55.773

你可以在[这里](http://dev.mysql.com/usingmysql/java/)找到详细的描述（也许是详细的）你如何使用 JDBC 从 java 连接到 MySQL 数据库。如果您已经有串行输入，只需检查您需要的数据库。

# javascript - css点击子菜单加粗主菜单

> ID：15778978
> 
> 赞同：0
> 
> 时间：2013-04-03T04:39:10.170
> 
> 标签：javascript, jquery, css

当我单击子菜单时，我想要主菜单突出显示背景。

我的编码如下：

```
<div id="dmenubg">
    <ul id="nav" class="drop">
     <li><a href="index.php">Home</a></li>
        <li><a href="#">Services</a>
            <ul>
                <li><a href="aaa.php">AAA</a></li>
                <li><a href="#">BBB</a></li>
                <li><a href="#">CCC</a></li>
            </ul>
        </li>
    </ul>
</div>
<script type="text/javascript">
    $(document).ready(function(){
        var str=location.href.toLowerCase();
        $(".drop li a").each(function() {
            //alert(str.indexOf(this.href.toLowerCase()));
            if (str.indexOf(this.href.toLowerCase()) > -1) {
                $("li.highlight").removeClass("highlight");
                $(this).parent().addClass("highlight");
            }
        });
        $(".drop li ul a").each(function() {
                if (str.indexOf(this.href.toLowerCase()) > -1) {
                $(".drop.li.ul.highlight").removeClass("highlight");
                $(this).parent().addClass("highlight");
            }
        });
     })
</script>

Result of my menu:

Home      **Service**
          **AAA**
          BBB
          CCC 
```

单击 AAA 项目时，我想突出显示服务和 AAA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:24:44.337

我稍微修改了你的javascript。基本思想是现在我们查看每个锚点是否匹配，然后检查它是否有一个有效的菜单父级要匹配。

请注意，如果您只想突出显示父级的文本，则需要执行 outerNav.find(">a").addClass()。

```
$(".drop li a").each(function() {

  if (str.indexOf($(this).attr("href").toLowerCase()) > -1) {
       $("li.highlight").removeClass("highlight");
       $(this).parent().addClass("highlight");
       var outerNav = $(this).parent().parent().parent();
       if(outerNav.is("li")) {
          /* Use this code to highlight the entire ul contents */
          //outerNav.addClass("highlight");
          /* Use this code to highlight just the parent li a */
          outerNav.find(">a").addClass("highlight");
       }
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T05:39:25.810

$(".drop > li > a") as Selector 它将仅突出显示第一级菜单。并非所有.drop li 下的锚链接。

我希望这能解决你的问题

# python - 如何从 HTML 页面获取内容并在 Python 中打印？

> ID：15778981
> 
> 赞同：0
> 
> 时间：2013-04-03T04:39:34.637
> 
> 标签：python, html

我想在此页面上获取当前的“最大”预测值：http: [//www.bom.gov.au/nsw/forecasts/sydney.shtml?ref=hdr](http://www.bom.gov.au/nsw/forecasts/sydney.shtml?ref=hdr)并通过 Python 打印该值。

我该怎么做呢？（抱歉，如果这是一个非常基本的问题，对编程来说非常陌生！）

注意我目前在 Mac 上安装了 Python 3.3.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:47:28.960

使用[`lxml.html`](http://lxml.de/lxmlhtml.html)：

```
In [1]: import lxml.html as lh

In [2]: doc = lh.parse('http://www.bom.gov.au/nsw/forecasts/sydney.shtml?ref=hdr')

In [3]: doc.xpath('.//div[@class="day main"]//em[@class="max"]/text()')
Out[3]: ['21'] 
```

*但是*，我猜你真正想做的是看看一个[网络抓取教程](http://www.youtube.com/watch?v=52wxGESwQSA)。

# python - 随机纸牌游戏

> ID：15778982
> 
> 赞同：0
> 
> 时间：2013-04-03T04:39:36.417
> 
> 标签：python, random

我目前正在做一个随机纸牌游戏项目，程序应该向用户显示 5 张随机纸牌，（第一个问题）：我不知道如何随机排列字母列表，这是我的代码：

```
def play():
    hand = ["A","2","3","4","5","6","7","8","9","T","J","Q","K"]

    for i in range(len(hand)):
        card = random.choice[{hand},4]   

    print "User >>>> ",card
    return card 
```

第二个问题：如果用户想改变卡片的位置。用户应输入编号。的位置变化，那么程序应该随机改变卡。例如：AJ891，用户输入：1，--> A2891。我应该怎么办？这是我的原始代码，但它不起作用

```
def ask_pos():
    pos_change = raw_input("From which position (and on) would you want to change? (0 to 4)? ")
    while not (pos_change.isdigit()):
        print "Your input must be an integer number"
        pos_change = raw_input("From which position (and on) would you want to change? (0 to 4)? ")
        if (pos_change > 4) :
            print "Sorry the value has to be between 0 and 4, please re-type"
            pos_change = raw_input("From which position (and on) would you want to change? (0 to 4)? ")
    return pos_change

    hand = ["A","2","3","4","5","6","7","8","9","T","J","Q","K"]

    for i in range(len(hand)):
        card = random.choice[{hand},4]
        new = random.choice[{hand},1]

            for i in range(len(card)):
                if (card[i] == pos_change):
                    card = card + new

    return card 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:16:08.370

1)

```
random.choice[{hand},4] 
```

那行不通，语法错误。选择也不会奏效，样品就是你想要的：

```
random.sample(hand, 5) 
```

2)

```
pick = random.sample(hand, 5)

change = 2  # Entered by the user

pick[change] = random.choice([x for x in hand if x not in pick]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:24:42.480

要回答您的第一个问题：

```
import random
hands = ["A","2","3","4","5","6","7","8","9","T","J","Q","K"]
def play():
    cards = random.sample(hands,5)
    print "User >>>> ", cards
    return cards 
```

`random.choice[{hand},4]`应该会导致语法错误。首先，调用函数时使用括号`()`而不是方括号`[]`。另外，我不明白你为什么需要`{}`在手边放大括号，因为它已经是一个列表，所以不需要做任何事情。

我重写了你的第二个问题：

```
def ask_pos(hand):
    while 1:
        pos_change = raw_input("From which position (and on) would you want to change? (0 to 4)? ")
        if int(pos_change) < 0 or int(pos_change) > 4:
            continue
        else:
            break
    hand[int(pos_change)] = random.choice(hands)
    return hand 
```

运行时：

```
>>> myhand = play()
User >>>>  ['6', '8', 'A', '9', '4']

>>> ask_pos(myhand)
From which position (and on) would you want to change? (0 to 4)? 0
['Q', '8', 'A', '9', '4'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:49:30.750

You could use random.randrange(number), and then pull out the index at that position.

# jquery - 在 jQuery 中，为什么在触发单击未选中的复选框后，事件处理程序报告它未选中？

> ID：15778985
> 
> 赞同：3
> 
> 时间：2013-04-03T04:40:04.907
> 
> 标签：jquery, javascript-events

我可以将行为简化为最简单的情况（在最新的 Chrome、Safari、Firefox、IE 9 和 10 中测试（jsfiddle 在 IE 8 上不起作用））：

[http://jsfiddle.net/fjvqa/1](http://jsfiddle.net/fjvqa/1)

```
$("input").click(function (evt) {
    console.log("click event handler invoked", evt);
    console.log($("input").attr("checked"));
    console.log($("input").prop("checked"));
    console.log($("input").is(":checked"));
});

$("input").click(); 
```

使用 HTML：

```
<input type="checkbox"></input> 
```

输出是：

```
undefined
false
false 
```

那么它应该报告未选中复选框是否应该是正确的？

如果它是正确的，那么为什么在 jQuery 1.9.1 中，行为完全相反？ [http://jsfiddle.net/fjvqa/2](http://jsfiddle.net/fjvqa/2)

如果它不正确，我想知道为什么在 2012 年 11 月 13 日发布的 jQuery 1.8.3 中仍然存在这样一个简单的错误，也就是大约 4 个月前......对于如此明显的错误？

PS我明白（1）`attr()`不应该使用，而是`prop()`应该使用。我打印出来只是为了看看发生了什么。(2)如果使用 jQuery 1.8.3 ，`change`处理程序实际上会报告与报告相反的内容：http: [//jsfiddle.net/fjvqa/3](http://jsfiddle.net/fjvqa/3)如果是 jQuery 1.9.1，它们会报告相同的内容：[http://jsfiddle .net/fjvqa/4](http://jsfiddle.net/fjvqa/4) 我正在寻找的是应该发生的真实情况。`click`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:49:55.903

评论给了你答案 - 点击之后发生的变化。您正在绑定到使更改发生的事件。我猜您会看到版本之间的差异，因为对此没有明确的定义。解决方案是使用 .change 而不是 .click：

更新小提琴：http:
[//jsfiddle.net/fjvqa/22/](http://jsfiddle.net/fjvqa/22/)

```
$("input").change(function (evt) {
    console.log("click event handler invoked", evt);
    console.log($("input").attr("checked"));
    console.log($("input").prop("checked"));
    console.log($("input").is(":checked"));
});

$("input").click(); 
```

输出：

```
checked
true
true 
```

# jquery - JQuery - Toggle() - 使用 TR 类但需要来自 Image 的操作

> ID：15778992
> 
> 赞同：0
> 
> 时间：2013-04-03T04:40:29.027
> 
> 标签：jquery, image, toggle

对一些 JQuery 进行一些清理工作。

我有一种情况，我需要使用 JQuery Toggle 折叠行。我在 SO 上找到了一个很好的示例，您可以在其中使用 TR 类设置切换范围的外部边界。

这很好用，但是 TR 中的每个元素都是“可点击的”，例如包含财务金额的 TD。

制定了一个功能，将图像添加到第一列。该图像应该是唯一可点击切换的东西。单击时，图像本身会在状态之间交换（显示“+”或“-”）。

我认为最好的方法是让类选择器关注第一个 TD 中的 IMG。但我无法正确使用语法。我想知道由于图像是由 Prepend 注入的，所以会导致问题。

我简要测试了将行切换驻留在图像交换函数中的想法，但遇到了问题。

这是JSFiddle：

[http://jsfiddle.net/novadar/Gnnue/94/](http://jsfiddle.net/novadar/Gnnue/94/)

这是稍微起作用的功能：

```
// Enable Row Toggle
$(document).ready(function () {
    $(".rowToClick").click(function () {
        $(this).nextUntil(".rowToClick").toggle();
    });
}); 
```

这是一个专注于第一个 TD 但不能正确切换的函数（仅切换 TR 中的剩余列）。

```
// Enable Row Toggle  toggle from first cell
$(document).ready(function () {
    $(".rowToClick td:nth-child(1)").click(function () {
        $(this).nextUntil(".rowToClick").toggle();
    });
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:48:34.417

由于图像是该行的孙子，您需要向上导航到切换代码的​​祖父：

```
$(document).ready(function () {
    $(".rowToClick td:nth-child(1) img").click(function () {
        $(this).closest(".rowToClick").nextUntil(".rowToClick").toggle();
    });
}); 
```

[小提琴](http://jsfiddle.net/barmar/Gnnue/95/)

# javascript - 是否可以输入 CSS 边框

> ID：15778993
> 
> 赞同：0
> 
> 时间：2013-04-03T04:40:30.467
> 
> 标签：javascript, html, css

我正在做一个网站，我遇到了一个问题。在我的 CSS 代码中，我有一些社交图标左侧的边框。它在我的社交内容旁边制作了一个 50 像素的框。

我可以在 50px 边框框中输入内容吗？我想使用在字体中有图标的外部字体并在边框框中使用它们

**CSS：**

```
google {
border-left: 50px solid #db4a39;
color: #db4a39;
-webkit-transition: all 0.5s ease;
-moz-transition: all 0.5s ease;
-o-transition: all 0.5s ease;
-ms-transition: all 0.5s ease;
transition: all 0.5s ease;

} 
```

如果我无法输入边框，有人可以为我建议一个替代选项吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T04:55:36.920

在当前的左边创建一个 50px 宽`<div>`的，而不是边框​​，是一个很好的解决方案：http: [//jsfiddle.net/KzMKB/](http://jsfiddle.net/KzMKB/)

编辑：我认为额外的动机`<div>`是这种东西属于子元素，而不是硬塞进边界，在我看来。它在语义上是合乎逻辑的，并且很容易将您想要的任何类型的内容放入`<div>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:52:11.200

如果您无法控制标记，则可以使用 :before 伪元素。

`border`从原始元素中移除并设置为`margin-left`50px；

```
google {
    margin-left:50px;
    color: #db4a39;
    -webkit-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    -ms-transition: all 0.5s ease;
    transition: all 0.5s ease;
}
google:before {
    content: "hello";
    margin-left:-50px;
    background-color: #db4a39;
    color: black;
    display: block;
    width:50px;
    height:100%;
} 
```

查看完整示例：

[http://jsfiddle.net/6zX8y/1/](http://jsfiddle.net/6zX8y/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:50:13.687

您可以使用 text-indent 属性将文本移动到边框中。

```
#border-box {
  text-indent:-10px;
} 
```