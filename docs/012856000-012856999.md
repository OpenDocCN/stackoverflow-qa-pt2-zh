# StackOverflow 问答 12856000-12856999

# objective-c - 目标C：不显示UIButton

> ID：12856000
> 
> 赞同：1
> 
> 时间：2012-10-12T09:24:21.790
> 
> 标签：objective-c

> **可能重复：**
> [C 函数调用目标 C 函数](https://stackoverflow.com/questions/12854195/c-function-calling-objective-c-functions)

我在 ViewController.m 中完成了以下代码

```
-(void) callIncomingCreateButton
{

        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];

        //set the position of the button
        button.frame = CGRectMake(100, 170, 100, 30);

        //set the button's title
        [button setTitle:@"Click Me!" forState:UIControlStateNormal];

        //add the button to the view
        [self.view addSubview:button];
}

- (IBAction)DemoCall:(id)sender {

    callIncoming(1, "a");
}

int callIncoming(int a, char* b)
{
    ViewController * tempObj = [[ViewController alloc] init];
    [tempObj callIncomingCreateButton];

    return a;

} 
```

但是 UIButton 仍然没有显示，我在这里缺少什么。

编辑：这是针对 iOS 的，是的，该函数确实被调用了。我设置了一个断点并逐步通过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:28:50.457

```
ViewController * tempObj = [[ViewController alloc] init];
[tempObj callIncomingClass]; 
```

从您的示例中很难看出，但假设这`-callIncomingClass`实际上是定义的一部分`ViewController`并且`callIncoming()`是从其他地方调用的，那么一个可能的问题是这`tempObj`不是当前的视图控制器。您需要推`tempObj`送到导航堆栈，以模态方式呈现它，或者以其他方式使其成为活动视图控制器，以便加载其视图。如果它的视图没有加载，那么就没有视图可以添加按钮，即使它有一个视图，那个视图也不会出现在窗口中。

# sharepoint - Sharepoint 2010 - 找到尚未签入的新站点

> ID：12856005
> 
> 赞同：1
> 
> 时间：2012-10-12T09:24:36.327
> 
> 标签：sharepoint, sharepoint-2010

如果用户创建了一个新站点并且只是保存而不签入站点，那么位置在哪里？

我想测试如果场管理员尝试发布不是“草稿”或已发布站点的站点会发生什么。（无需通过工作流程即可获得自定义“立即发布”按钮）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:58:58.403

由于 Sharepoint dot 不支持网站的草稿版本，我认为您的意思是列表项或尚未由您的用户签入的文档。

要查看这些项目，您可以使用站点内容和结构工具。检查这篇文章：

[http://arabic2000.com/blog/index.php/archives/364](http://arabic2000.com/blog/index.php/archives/364)

# php - 通过搜索标签组合查找 id

> ID：12856006
> 
> 赞同：1
> 
> 时间：2012-10-12T09:24:36.993
> 
> 标签：php, mysql, sql, join

我有一个包含两个字段候选 ID 和关键字 ID 的表。我需要列出所有具有关键字 ID 5 和 6 的候选人/候选人 ID。请有人帮我为此编写一个 mysql 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:34:35.397

尚不清楚您到底想要什么，但是此查询为您提供了与给定关键字至少匹配一次的所有候选人（使用 LIKE 搜索关键字中的匹配项。如果给出关键字“php”并且您的数据库中的关键字是'php 程序员'，这个匹配会出现）。如果这是你所追求的，这样的事情应该可以解决问题。

```
 $sQueryExtension = '';
  foreach($keywords as $keyword) {
    $sQueryExtension .= " OR `keyword` LIKE '%$keyword%'";
  }
  $sQueryExtension = substr($sQueryExtension, 3); // skip first OR

  $sQuery = "
    SELECT candidate.* 
    FROM candidate, match_table 
    WHERE candidate.id = match_table.candidate_id 
    AND match_table.keyword_id IN (
      SELECT * FROM keyword WHERE $sQueryExtension
    );"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:53:58.557

一个易于适应两个以上keyword_id的选项是......

```
SELECT
  candidate_id
FROM
  yourTable
WHERE
  keyword_id IN (1,2)
GROUP BY
  candidate_id
HAVING
  COUNT(DISTINCT keyword_id) = 2 
```

一个替代方案可能是...

```
SELECT
  k1.candidate_id
FROM
  yourTable  AS k1
INNER JOIN
  yourTable  AS k2
    ON k1.candidate_id = k2.candidate_id
WHERE
      k1.keyword_id = 1
  AND k2.keyword_id = 2 
```

然而，应该注意的是，这些选项都不能很好地扩展（当您增加候选者、关键字和搜索的关键字数量时。

如何处理这种糟糕的扩展完全取决于您的数据和您的需求。在 SO 答案中讨论的主题过于广泛和主观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:44:51.280

您是否需要具有 1\. 5 或 6 或 2\. 的记录。您需要同时具有 5 和 6 的候选人吗？

对于案例 1，

```
SELECT candidate_id
FROM <table>
WHERE keyword_id in (5,6); 
```

对于案例 2，

```
SELECT candidate_id
FROM (SELECT candidate_id, count(distinct keyword_id)
      FROM <table>
      WHERE keyword_id in (5, 6)
      GROUP BY candidate_id
      HAVING COUNT(DISTINCT keyword_id) > 1); 
```

# php - Vaadin FormSender HTTP POST 到 php 页面

> ID：12856008
> 
> 赞同：2
> 
> 时间：2012-10-12T09:24:43.780
> 
> 标签：php, http-post, vaadin

我写了 2 页，一个在 php 中，接收到 HTTP Post 变量并保存在文件中

```
<?php
$myFile = "testFile.txt";
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData =$_POST['var'];
fwrite($fh, $stringData);
fclose($fh);
?> 
```

以及带有此代码的 vaadin 页面：

```
package com.example.primovaadin;

import org.vaadin.risto.formsender.FormSender;
import com.vaadin.Application;
import com.vaadin.ui.*;
import com.vaadin.ui.Button.ClickEvent;

public class PrimovaadinApplication extends Application {

private static final long serialVersionUID = 1L;
FormSender formSender = new FormSender();

@Override
public void init() {
    Window mainWindow = new Window("Primovaadin Application");

    formSender.setFormMethod(FormSender.Method.POST);
    formSender.setFormTarget("http://127.0.0.1/writer.php");

    Button sendVariable = new Button("Send");
    sendVariable.addListener(new Button.ClickListener() {
        private static final long serialVersionUID = 1L;

        public void buttonClick(ClickEvent event) {
            // TODO Auto-generated method stub
            formSender.addValue("var", "vaadin");
            formSender.submit();
        }
    });

    mainWindow.addComponent(sendVariable);
    setMainWindow(mainWindow);
  }
} 
```

但是当我单击 vaadin 应用程序上的 bottun 时，变量不会发送到 php 页面...请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:11:31.760

我认为这个问题的答案是：

```
private void runReport(HashMap<String, String> params) {
        // TODO Enviar post ao BIRT
        final FormSender formSender = new FormSender();
        Window mainWindow = new Window();
        formSender.setFormMethod(FormSender.Method.POST);
        formSender.setFormTarget("http://localhost:8080/birt/frameset");

        formSender.addValue("", "");

        for (Entry<String, String> entry : params.entrySet()) {
            formSender.addValue(entry.getKey(), entry.getValue());
        }

        mainWindow.setImmediate(true);
        mainWindow.addComponent(formSender); << You just forgot to add the component to the screen.
        formSender.submit();

        getMainWindow().setContent(mainWindow);
    } 
```

# javascript - 为什么此日志输出在每次迭代中都显示相同的答案？

> ID：12856011
> 
> 赞同：-1
> 
> 时间：2012-10-12T09:24:51.863
> 
> 标签：javascript

> **可能重复：**
> [console.log 中的值错误](https://stackoverflow.com/questions/11214430/wrong-value-in-console-log)
> [|= 在 JavaScript 中的作用是什么？](https://stackoverflow.com/questions/12854644/what-does-in-javascript)

好的，当我看到这个代码示例时，我正在[阅读一篇关于为 Googles V8 引擎优化 JS 的文章......](http://www.html5rocks.com/en/tutorials/speed/v8/)

我几乎略过它，但后来我看到了这个；|=; **a[0] |= b;**

```
a = new Array();
a[0] = 0;
for (var b = 0; b < 10; b++) {
  console.log(a, b)
  a[0] |= b;  // Much better! 2x faster.
} 
```

a[0] |= b;

所以我在我的控制台中运行它，在循环中使用 console.log 并得到 15；

```
[15] 0
[15] 1
[15] 2
[15] 3
[15] 4
[15] 5
[15] 6
[15] 7
[15] 8
[15] 9 
```

什么？！？！每次迭代它从哪里得到 15？！？！？！

我已经做了 7 年的网络开发人员，这让我和一位同事感到难过。

有人可以通过这段代码告诉我吗？

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:32:03.553

`[15]`它在每次迭代中显示的原因是因为`console.log()`输出是缓冲的，并且传递给它的对象或数组不会立即评估。

您的循环计算`0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9`15。

到时候`console.log()`调用`a.toString()`已经完成的循环，所以它显示了 15 的最终结果，而不是中间结果。

如果您已经记录`a[0]`而不是`a`每次都会看到真实结果，因为原始值会立即被评估：

```
a = new Array();
a[0] = 0;
for (var b = 0; b < 10; b++) {
  console.log(a[0], b)
  a[0] |= b;  // Much better! 2x faster.
}

0 0
0 1
1 2
3 3
3 4
7 5
7 6
7 7
7 8
15 9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:27:55.120

`|`是按位或 [更多信息在这里](http://en.wikipedia.org/wiki/Bitwise_operation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:26:59.490

```
 a[0] |= b; 

is equal to

  a[0] =  a[0]| b;  //bit wise operation 
```

# javascript - 谷歌距离计算器和自动完成

> ID：12856014
> 
> 赞同：3
> 
> 时间：2012-10-12T09:25:03.053
> 
> 标签：javascript, google-maps, google-maps-api-3, map, autocomplete

我正在尝试使用 google maps 和 auto-complete 做一些工作。我采用了谷歌距离脚本并尝试将谷歌的自动完成功能与其集成。距离计算和路线方向工作正常。但是我在***开始***和***结束***输入字段中的自动完成失败了。如果我在结束和开始字段中手动输入位置，它可以工作，但谷歌不会自动完成工作。

```
<style type="text/css">
html {
    height: 100%
}
body {
    height: 100%;
    margin: 0px;
    padding: 0px
}
</style>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
    //<![CDATA[
      var map = null;
      var directionDisplay;
      var directionsService = new google.maps.DirectionsService();

      function initialize() {
        directionsDisplay = new google.maps.DirectionsRenderer();
        var mapOptions = {
          zoom: 7,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: new google.maps.LatLng(41.850033, -87.6500523)
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
        directionsDisplay.setMap(map);
        directionsDisplay.setPanel(document.getElementById('directions-panel'));

        var control = document.getElementById('control');
        control.style.display = 'block';
        map.controls[google.maps.ControlPosition.TOP].push(control);
      }

      function calcRoute() {
        var start = document.getElementById('start').value;
        var end = document.getElementById('end').value;
        var request = {
          origin: start,
          destination: end,
          travelMode: google.maps.DirectionsTravelMode.DRIVING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
            computeTotalDistance(response);
          }
        });
      }
      function computeTotalDistance(result) {
      var total = 0;
      var myroute = result.routes[0];
      for (i = 0; i < myroute.legs.length; i++) {
        total += myroute.legs[i].distance.value;
      }
      total = total / 1000.
      document.getElementById("total").innerHTML = total + " km";
      }

    function auto() {
    var input = document.getElementById[('start'), ('end')];
    var types
    var options = {
       types: [],
       componentRestrictions: {country: ["AUS"]}
        };
        var autocomplete = new google.maps.places.Autocomplete(input, options);
     }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
</head>
<body onLoad="initialize()">
<div id="total"></div>
<div id="control"> <strong>Start:</strong>
<input type="text" id="start"><input type="text" id="end"><input type="button" value="GO" onClick="calcRoute();">
</div>
<table border="1" style="height:100%; width:100%;">
  <tr>
    <td style="width: 70%; height: 100%;"><div id="map_canvas" style="width:100%;height:100%;"></div></td>
    <td  style="width: 30%; height: 100%;"><div id="directions-panel" style="width:100%;height: 100%;"></div></td>
  </tr>
</table>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T19:44:31.833

改变

```
 <script type="text/javascript"
     src="https://maps.googleapis.com/maps/api/js?sensor=false"></script> 
```

到

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script> 
```

后

```
map = new google.maps.Map(document.getElementById('map_canvas'),
        mapOptions); 
```

添加

```
 //Find From location    
    var fromText = document.getElementById('start');
    var fromAuto = new google.maps.places.Autocomplete(fromText);
    fromAuto.bindTo('bounds', map);
    //Find To location
    var toText = document.getElementById('end');
    var toAuto = new google.maps.places.Autocomplete(toText);
    toAuto.bindTo('bounds', map);
    // 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-16T17:35:57.083

您可以将此代码用于国家/地区限制：

```
var autocomplete = new google.maps.places.Autocomplete(
    input,
    // Options
    {
        types: ['(cities)'],
        componentRestrictions: {country: 'au'}
    }
);
autocomplete.bindTo('bounds', map); 
```

我知道我回复晚了，但它也会帮助其他人。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-03-09T11:13:16.993

```
$url = 'https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=Hyderabad+Telangana+India&destinations=Mumbai+Maharashtra+India';
// Get the data from Google Maps API
$json = file_get_contents($url);
// Convert it from JSON to PHP array
$result = json_decode($json, true);
$mi = $result['rows'][0]['elements'][0]['distance']['text'];
echo $km = $mi*1.60934." KM <br/>";
echo $result['rows'][0]['elements'][0]['duration']['text']; 
```

# objective-c - 将参数传递给 UILabel [ 2 ] *

> ID：12856015
> 
> 赞同：0
> 
> 时间：2012-10-12T09:25:05.537
> 
> 标签：objective-c, xcode, arguments, uilabel

我正在尝试从 viewcontroller 类调用以下（滚动动画类）类型的方法。

```
-(void)CreateLabel:(CGRect )frame andLabel:(UILabel *[NUM_LABELS])label andview:(UIView *)view; 
```

当我尝试传递参数时出现了一些错误。关于如何调用它的任何建议？

这就是我调用该方法的方式

```
ScrollAnimation *newAnimation = [[ScrollAnimation alloc] init];
[newAnimation CreateLabel:CGRectMake(0, 50, 300,30) andLabel:animateLabel[NUM_LABELS] andview:self.view]; 
```

我有错误

```
 /Volumes/Red Drive/CarTransition/CarTransition/ViewController.m:120:66: Implicit conversion of an Objective-C pointer to 'UILabel **' is disallowed with ARC 

 /Volumes/Red Drive/CarTransition/CarTransition/ViewController.m:120:66: Incompatible pointer types sending 'UILabel *__strong' to parameter of type 'UILabel **' 
```

创建标签方法：

```
 -(void)CreateLabel:(CGRect )frame andLabel:(UILabel *[NUM_LABELS])label andview:(UIView *)view{
for (int i = 0; i<NUM_LABELS ; i++){

    if(i == 0){
        label[0] = [[UILabel alloc] initWithFrame:CGRectMake(frame.origin.x, frame.origin.y, frame.size.width,frame.size.height)];
        label[i].text = @"MINI ";
    }else if(i == 1){
        label[1] = [[UILabel alloc] initWithFrame:CGRectMake(frame.origin.x, frame.origin.y - 40 ,frame.size.width, frame.size.height)];
        label[1].text = @"COOPER ";
    }else if(i == 2){
        label[2] = [[UILabel alloc] initWithFrame:CGRectMake(frame.origin.x, frame.origin.x-120 ,frame.size.width,frame.size.height)];
        label[2].text = @"STYLING";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:03:12.087

您的方法是询问一个指针数组。

这是一个肮脏的例子：

```
- (void)passArgument:(NSObject *[])anObject total:(uint)total{
    for (int i = 0; i < total; i++) {
        NSLog(@"list --> %@", anObject[i]);
    }
} 
```

现在调用：

```
NSString* object[5] = {@"a", @"b", @"c", @"d", @"e"};
[self passArgument: object total: 5];
[self passArgument: &object[2] total: 3]; 
```

1.  注意：object 是一个指针数组，(*)
2.  &object[2] 是指针的地址 (&**)
3.  object[1] 是指向指针 (**) 的指针，这不是您想要的

# python - Python将记录添加到数组

> ID：12856017
> 
> 赞同：0
> 
> 时间：2012-10-12T09:25:13.063
> 
> 标签：python, arrays, numpy

我有一个数组定义为 -

```
import numpy as np
A = np.recarray((3,),dtype=[('x',float), ('y', float), ('z',float)]) 
```

加上另一个从 CSV 文件中读取的数组 B -

```
>>> print B
[(7.0, 0.0, 7.0) (16.0, 0.0, 1.0)] 
```

当我尝试将元素添加到数组时，如下所示 -

```
for i in range(B.size):
    if(B[i][0] != 0.):
        A.append((0.,B[i][1],B[i][2]))
    if(B[i][1] != 0.):
        A.append((B[i][0],0.,B[i][2]))
    if(B[i][2] != 0.):
        A.append((B[i][0],B[i][1],0.)) 
```

我收到如下错误 -

```
File "/usr/lib/python2.7/dist-packages/numpy/core/records.py", line 416, in __getattribute__
    raise AttributeError, "record array has no attribute %s" % attr
    AttributeError: record array has no attribute append 
```

我无法理解这个字符串属性 (%s) 在哪里出现？

有人可以帮忙吗？

**更新：** 我将代码更改为`np.append(A,(0.,B[i][1],B[i][2]))`，但是我收到另一个错误 -`TypeError: invalid type promotion`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:49:19.100

该错误只是说recarray没有任何称为append的方法。

我还没有真正使用过 numpy，但一种解决方案可能是将 A 转换为列表

```
A.tolist() 
```

将记录附加到此列表，然后执行类似的操作

```
np.fromiter(x, A.dtype) 
```

得到新的rearray。当然，这看起来不是一个好的解决方案。

也许更熟悉 numpy 的人将能够参与并改进它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:31:54.637

附加到 numpy 数组是一个缓慢的操作，因为必须分配新内存并且必须复制整个数组。对每一行都这样做`B`是低效的。如果可以，请避免这种情况。

如果您事先知道和的形状`A`（`minors(B)`见下文），最好从一开始就制作一个足够大的数组以容纳两者。

有很多是按照你的要求去做的。@seberg 的`np.lib.recfunctions.stack_arrays`想法将成为一个可行的解决方案，只要 dtypes`A`和`B`是相同的。

这是另一种可能性，即使`B`具有不同的 dtype，或者只是一个 ndarray 或列表列表，它也可以工作。

```
import itertools
import numpy as np

def minors(arr):
    for row in arr:
        row = list(row)
        for i, elt in enumerate(row):
            if elt != 0:
                for val in row[:i]+[0]+row[i+1:]:
                    yield val

A = np.recarray((3,),dtype=[('x',float), ('y', float), ('z',float)])
B = [(7.0, 0.0, 7.0), (16.0, 0.0, 1.0)]

C = np.fromiter(itertools.chain(A.view(float), minors(B)), dtype = float)
C = C.view(A.dtype) 
```

# ios5 - iCrousel 中的 ARC 问题

> ID：12856020
> 
> 赞同：1
> 
> 时间：2012-10-12T09:25:26.113
> 
> 标签：ios5, automatic-ref-counting, coverflow

我正在使用[来自 github 的 icarousel 示例项目，](https://github.com/nicklockwood/iCarousel)该项目在 iphone 和 ipad 应用程序上使用 storyboard 和 ios 5 创建了一个封面流。但是由于 ARC，Tehre 总共有 19 个错误。

我已经通过禁用 ARC 来编译它，但这并没有解决我的问题。

我该如何解决这个问题？

任何帮助...

**编辑**

我正在使用 XCode 4.2 和 Mac 10.6.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T04:05:48.777

据我所知，iCarousel 的较新版本与 Xcode 4.2 不兼容，请尝试更新您的 xcode 并使用它。您也可以在 iCarousel 上下载旧版本并使用它。

我从未尝试过，但旧版本应该可以正常工作。

希望这会有所帮助。

# jsf - JSF托管上传bean？

> ID：12856026
> 
> 赞同：1
> 
> 时间：2012-10-12T09:25:45.523
> 
> 标签：jsf, jakarta-ee, upload, multipart, managed-bean

我有一个适用于 servlet 的上传例程。现在我试图把这个例程放在一个 jsf 托管 bean 中，如下所示：

```
 public void uploadFile() throws IOException, ServletException{

    FacesContext facesContext = FacesContext.getCurrentInstance();
    ExternalContext externalContext = facesContext.getExternalContext();
    HttpServletRequest request = (HttpServletRequest) externalContext.getRequest();
    HttpServletResponse response = (HttpServletResponse) externalContext.getResponse();

    Part filePart = request.getPart("item");
    String filename = getFilename(filePart);
    InputStream filecontent = filePart.getInputStream();

    //persist the data here

} 
```

当尝试在服务器上运行它时，当然会出现错误消息：“PWC4016：Request.getPart 在没有多部分配置的情况下被调用。要么将@MultipartConfig 添加到 servlet，要么将 multipart-config 元素添加到 web.xml”

但是我不知道在哪里放置这个注释，我也没有我的托管 bean 的 jsf 生成的 servlet 的名称，所以我也不能把它放到 web.xml 中。将此例程放入托管 bean 通常是一个坏主意，还是应该坚持使用 servlet 变体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:40:27.703

`@MultipartConfig`基本上需要`FacesServlet`放在. 你不能自己做，但是这已经[在即将到来的 JSF 2.2](http://jdevelopment.nl/jsf-22/#802)中完成了，包括一个支持 ajax 的新标准`<h:inputFile>`组件，另见[JSF 规范问题 802](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-802)。

在那之前，您最好的选择是获取 3rd 方组件库或自制自定义组件。

*   [Tomahawk`<t:inputFileUpload>`](http://myfaces.apache.org/tomahawk-project/tomahawk20/tagdoc/t_inputFileUpload.html) - 另见[JSF 2.0 文件上传](https://stackoverflow.com/questions/5418292/jsf-2-0-file-upload/5424229#5424229)
*   [PrimeFaces`<p:fileUpload>`](http://www.primefaces.org/showcase/ui/fileUploadSimple.jsf) - 另请参阅[如何使用 PrimeFaces p:fileUpload？](https://stackoverflow.com/questions/8875818/how-to-use-primefaces-pfileupload-listener-method-is-never-invoked/8880083#8880083)
*   自定义`<x:inputFile>`- 另请参阅[使用 JSF 2.0 和 Servlet 3.0 上传文件](http://balusc.blogspot.com/2009/12/uploading-files-with-jsf-20-and-servlet.html)

# css - 为什么我们在这里没有 IE 8 的背景颜色？

> ID：12856034
> 
> 赞同：0
> 
> 时间：2012-10-12T09:26:17.817
> 
> 标签：css

更新到真实案例：

如果您在 IE8 上看到以下内容并且您注意到锚点背景颜色已经消失。

```
<a class="button-white" href="/contacts/index">Contacte-nos</a>

.button-white {
    display: block;
    text-decoration: none;
    text-align: center;
    outline: none;
    cursor: pointer;
    width: 7em;
    font-size: 1.25em;
    color: #000;
    padding: .4em 1em .4em; /* tamanho */
    border-radius: .5em;
    box-shadow: 0 1px 2px rgba(0,0,0,.2);
    -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.2);
    -moz-box-shadow: 0 1px 2px rgba(0,0,0,.2);
    background: #ffffff; /* Old browsers */
    background: -moz-linear-gradient(top, #ffffff 0%, #dddddd 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#dddddd)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #ffffff 0%,#dddddd 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #ffffff 0%,#dddddd 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #ffffff 0%,#dddddd 100%); /* IE10+ */
    -webkit-border-radius: .5em;  
    -moz-border-radius: .5em;   
} 
```

我不能将背景标记为重要，否则，好的浏览器将具有白色背景而不是渐变背景。

我试图将背景更改为“背景颜色”无效。

会是什么呢 ？

我们启用了 HTC。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:52:07.977

如果你禁用`behavior: url(http://yoururl.com/css/PIE.htc)`，那么按钮在 IE8 中应该是白色的。

您的 CSS 是正确的，但 htc 文件有一个覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:28:39.420

你有背景。你只是看不到它，因为它是白色的：http: [//jsfiddle.net/y5YfE/2/](http://jsfiddle.net/y5YfE/2/)

编辑：改变

```
background: #ffffff; /* Old browsers */ 
```

到

```
background: #f90; /* Old browsers */ 
```

你应该得到一个橙色的背景。在win7上在IE8中测试。

# selenium - 文本框限制（特殊字符/数字等）不适用于 selenium 自动测试执行

> ID：12856036
> 
> 赞同：0
> 
> 时间：2012-10-12T09:26:20.343
> 
> 标签：selenium, selenium-rc

我正在测试一个 Web 应用程序，其中某些文本字段具有基于要求的限制（例如，数量文本字段不允许使用字母和特殊字符，而名称文本字段不允许使用数字和特殊字符。），因此在浏览器中手动尝试时，限制工作正常。但是在自动化相同的测试用例时，这样的文本字段接受所有数据（例如字母（小写和大写），数字，特殊字符。）......意味着自动化没有任何限制工作......我在 Eclipse 中使用 Selenium 编写自动化测试（testNG 框架）并使用 SeleniumRC 运行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:52:43.327

我建议使用 RegExps 来验证字符串格式。例如，我非常喜欢构建版本格式

```
@Test
    public void buildVersionFormatVerify() throws IOException {

    String buildVersion = findElementByCssSelector("home.buildversion.label").getText().trim();
    String extractedVer;
    extractedVer = buildVersion.substring(buildVersion.indexOf(':')+1,buildVersion.length()).trim();

    Assert.assertTrue("build version does not match regexp",extractedVer.matches("\\d.\\d\\s.\\s\\d{2}"));

} 
```

另一种方法如下：您输入一个不满足输入格式的特定字符串，以符合功能规范。然后你可以触发输入被接受的方式（没有错误消息出现或验证器没有处理不正确的输入），你可以阻止“接受的输入”不符合功能规范，例如

```
 Assert.assertFalse("improper input format",isElementPresent(By.xpath(...xpath of the error message...))); 
```

恕我直言，这是我解决这个问题的愿景。

# c# - 带有空值检查的 C# AND 运算符

> ID：12856039
> 
> 赞同：6
> 
> 时间：2012-10-12T09:26:27.533
> 
> 标签：c#, operators

我读到`&&`.NET 中的 AND 运算符有条件地评估其第二个参数。

检查 null 然后检查单个语句中的某些字段是否安全？

例如，假设我们有一个类 SomeClass，它有一个整数字段 Id：

```
class SomeClass
{
   public Int32 Id { get; set; }
} 
```

然后，我们在某处接收到这种类型的对象并尝试对其执行一些操作：

```
public void SomeMethod(SomeClass obj)
{
   if (obj != null)
      if (obj.Id == 1)
      {
         // do some actions
      }
} 
```

我们可以将其重写如下以减少代码量吗？空检查会安全吗？

```
public void SomeMethod(SomeClass obj)
{
   if (obj != null && obj.Id == 1)
      // do some actions
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T09:27:35.247

是的，这将是安全的，&& 条件从“左到右”处理，如果第一个与您的情况不匹配，则不会评估第二个

[微软](http://msdn.microsoft.com/en-us/library/2a723cdk%28v=vs.100%29.aspx)

> 操作
> 
> x && y
> 
> 对应操作
> 
> x 和 y
> 
> **除了如果 x 为假，则不计算 y，因为无论 y 的值是多少，AND 运算的结果都是假的。这称为“短路”评估。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T09:27:30.687

是的，这样做绝对安全。

正如您在问题中所述，如果对象为空，则仅评估第一个条件，因此永远不会执行第二个条件（会引发 NullReferenceException）。这也称为“短路”评估。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:29:55.850

是的...这在 C# 和许多其他语言中是安全的。如果程序知道以下检查不能使整个 if 语句变为真，则甚至无需查看它们。

这种类型的评估称为[惰性评估](http://en.wikipedia.org/wiki/Lazy_evaluation)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T09:29:56.643

这里的术语是[“短路”](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。使用 and`(&&)`运算符，如果第一个条件失败，则不会继续下一个条件。他们的做法不仅是保存，而且是正确的做法。

[7.11 条件逻辑运算符 - C# 参考 MSDN](http://msdn.microsoft.com/en-us/library/aa691310%28VS.71%29.aspx)

> && 和 || 运算符称为条件逻辑运算符。它们也被称为“短路”逻辑运算符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T09:30:34.390

是的，这就是简单的逻辑，如果在几个 AND 语句中，一个为假，则无需继续评估它们，因为结果将为 FALSE，因此编译器在找到第一个 FALSE 时停止评估

# c++ - 指向数组的指针作为模板参数

> ID：12856041
> 
> 赞同：1
> 
> 时间：2012-10-12T09:26:31.650
> 
> 标签：c++, templates, pointers

我只想用模板参数实例化我的**对象**。其中一个参数是指向数组的指针，我正在寻找正确的语法。

```
const MyCustomType* array[2] = { &object1, &object2 };

OBJ1 < 10, 10, array > myobj1; 
```

下面是该类的示例`OBJ1`。

```
template < int a, int b, /* help ! */ >
class OBJ1
{
  public:
    OBJ1();
    ~OBJ1();

  private:
    //methods
}; 
```

使用第三个模板参数的正确语法是什么？这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:37:23.700

对于大小为 n 的 int 类型的数组，语法为

```
int (*paramname)[N]; 
```

或使用辅助类型别名

```
template<typename T>
using type = T; 
```

然后

```
type<int[N]> *paramname; 
```

在你的情况下，你传递一个指向数组第一个元素的指针，而不是一个指向数组的指针。传递数组时，您需要在数组名称前面加上前缀`&`以执行后者。

# html - 在 Windows 平板电脑上以桌面模式和 Metro 模式运行 IE10 的主要区别是什么？

> ID：12856056
> 
> 赞同：1
> 
> 时间：2012-10-12T09:27:07.943
> 
> 标签：html, windows-8, microsoft-metro, internet-explorer-10

我正在调试一个在 Windows 8 平板电脑上的 IE10 桌面版上运行良好的应用程序，但是当我在 IE10 的 Metro 版本中打开相同的应用程序时，点击界面中的按钮似乎不起作用。这与 IE10 如何处理屏幕上的点击有关。

Metro 模式下的 IE10 和支持触摸屏的桌面模式下的 IE10 之间是否有清晰完整的区别列表？如果是，这些区别是什么？

# c# - windows phone 7 - xna 编程输入手势

> ID：12856057
> 
> 赞同：0
> 
> 时间：2012-10-12T09:27:09.287
> 
> 标签：c#, windows-phone-7, touch, xna-4.0

任何事件或如何将点击（向下触摸）和点击（向上触摸）识别为 XNA + windows phone 7 中的两种不同手势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:53:31.480

就这样：

```
TouchCollection touchCollection = TouchPanel.GetState();
        foreach (TouchLocation tl in touchCollection)
        {
            if (tl.State == TouchLocationState.Pressed)
            {
                  ...on touch down code
            }

            if (tl.State == TouchLocationState.Released)
            {
                  ...on touch up code
            }

        } 
```

# c# - Catching general exceptions

> ID：12856083
> 
> 赞同：4
> 
> 时间：2012-10-12T09:28:16.617
> 
> 标签：c#, exception, exception-handling

According to [this MSDN article](http://msdn.microsoft.com/en-us/library/ms182137%28v=vs.80%29.aspx), you should not catch general exceptions. I'm sure there's a stackoverflow question dealing with that, and I understand why it's not a good practice but I just saw this example on [another MSDN article](http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx) today:

```
using System;
using System.IO;

class Test
{
    public static void Main()
    {
        try
        {
            using (StreamReader sr = new StreamReader("TestFile.txt"))
            {
                String line = sr.ReadToEnd();
                Console.WriteLine(line);
            }
        }
        catch (Exception e)
        {
            Console.WriteLine("The file could not be read:");
            Console.WriteLine(e.Message);
        }
    }
} 
```

Is there any justification to catching a general exception in that example or is it just that they were lazy to write an example catching all the specific exceptions?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:31:01.127

In this case, this is an *example* and is a poor one at that, like *many* code examples on MSDN.

This should be catching an IO Exception instead of the base class.

The only place it would make sense to catch `Exception` is in a global exception handler for logging, provided you rethrow.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T15:36:25.413

Rule "*CA1031: Do not catch general exception types*" is [utterly useless](https://softwareengineering.stackexchange.com/a/264977/6559). (not it's intent per se, but it's implementation and description)

*In this specific case* it **may** be feasible to catch the more specific `IOException` as it covers "most" of the exceptions the [`StreamReader` constructor](http://msdn.microsoft.com/en-us/library/f2ke0fzy%28v=vs.110%29.aspx) is documented to throw.

(oh wait, and then you also need to factor in all the stuff that could be thrown by `ReadToEnd`)

(oh, wait, *maybe* it's a legitimate exception catch case to have an `ArgumentException` for the case the passed string is empty -- that is, I *want* to catch that generically and not explicitly test for it.)

Except that:

*   The set of exceptions that *possibly* can be thrown from any function is

    1.  often poorly documented
    2.  potentially unbounded (there may lurk some `OutOfMemoryException`; bugs in the implementation that lead to other exceptions, etc.)
    3.  largely irrelevant (modulo some bug catching with things like `ArgumentNullException`)

Given *roughly* the example given, **all you care about is that reading the file failed** - IFF it failed, you need to communicate that up the call chain.

To repeat: You want to communicate up the call chain that *reading the file failed* and *why* is only secondary.

When did reading (processing) the file fail: When *any* exception is thrown.

So what you really want to do is catch any exception, contextualize it with what you wanted to do (say, add the filename) and then *return or rethrow* something that indicates *what* went wrong and *why* it went wrong ( that would be the actual "inner" exception).

For this, **the example is (nearly) spot on**:

*   "Up the call chain" in this case is the user directly at the console
*   It "returns" the error as a string to be read by the "user", which is appropriate for a simple consle program.
*   It communicates what went wrong clearly. (It should include the filename passed to `StreamReader` though.)
*   It includes *why* it went wrong, namely the exception message. (It possibly should also include the call stack.)

* * *

By example:

Say that this example is slightly more complex and the file name is user provided. The the string being empty is then (a) a normal case and maybe (b) a user error that might *not warrant* special handling in the code, because the general handling provided -- that is, reporting that reading the file failed -- is totally enough.

By catching only `IOException` as recommended above, the user entering an empty filename would either crash the application or require an additional catch block that would essentially do the same thing as the other catch block: Report that reading the file failed and why.

* * *

Independent observations: Found this nice piece: [http://www.codeproject.com/Articles/7557/Exception-Handling-in-C-with-the-quot-Do-Not-Catch](http://www.codeproject.com/Articles/7557/Exception-Handling-in-C-with-the-quot-Do-Not-Catch) where the author is certainly more constructive than my "utterly useless" statement but essentially has a similar conclusion (with a different, certainly valid, solution): (emph. added)

> If we follow Microsoft's guidelines then we have to catch only those exceptions that could be triggered by the `File.Copy` method. If you look in the .NET Framework's Class Library, you'll see that this is UnauthorizedAccessException, (...). **If you ask me, catching all these exceptions individually is not doable. All I wanted to know is whether or not a file copy failed or not.** It would be sufficient to only capture IOException, ArgumentException and NotSupportedException (because all the other exceptions derive from these three exceptions) but **to know this I have to read the documentation again.** I really don't want to go through that much trouble to simply copy a file.
> 
> The guideline assumes that we know all the exceptions that can be thrown by the task executed. Copying a file is a very simple operation that is properly documented by Microsoft. But what if we're using some third-party tool? The stability of our unattended tool depends on the quality of the documentation of this tool. If this third-party forgets to mention one of the exceptions that their tool throws in the documentation, then our unattended application could stop prematurely.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:31:14.367

Examples should be clear and simple. This is the example of clear and simple example. But we should not catch general exeption in our code.

# c++ - 带指针的 C++ 结构：构造函数和析构函数

> ID：12856085
> 
> 赞同：3
> 
> 时间：2012-10-12T09:28:23.807
> 
> 标签：c++, dll, struct, destructor

我在调用 DLL 以执行优化任务的模拟程序时遇到问题。在研究了这个问题一段时间后，我认为我的问题在于我在 DLL 返回所需信息后用于释放内存的析构函数。仿真程序是在 Borland C++ Builder v6 上开发的，DLL 是在 MS Visual C++ 2005 上开发的。

为了模拟程序 (P) 和 DLL 交换数据，我创建了两个结构体`InputCPLEX`和`OutputCPLEX`一个函数`optimize`，它接受两个参数：一个类型的对象`InputCPLEX`和一个类型的对象`OutputCPLEX`。这两种结构都在`structures.h`属于 P 项目和 DLL 项目的头文件中声明。

`InputCPLEX`和`OutputCPLEX`结构都有和`int`成员`int*`，所以基本上文件`structures.h`看起来像：

```
//structures.h
struct InputCPLEX{
  public:
  int i;
  int* inputData;
}
struct OutputCPLEX{
  public:
  int j;
  int* outputData;
} 
```

这个想法是，在模拟过程（P的执行）中，我定期调用DLL来解决优化问题，`inputData`与我的优化问题中的变量对应`outputData`的数组也是我的变量的最优值数组。我知道使用 STL 容器会更容易`vector<int>`，但是 - 如果我错了，请纠正我 - 在两个不同的编译器之间交换 STL 对象似乎很困难。

这是我的主文件（在 P 中）中的情况：

```
//main.h
InputCPLEX* input;
OutputCPLEX* output;
int* var;
int* sol;

//main.cpp    
[...] //lots of code
input = new InputCPLEX;
output = new OutputCPLEX;
int n = X; //where X is an integer 
var = new int[n]; 
[...] //some code to fill var
input->i = n; 
input->inputData = var; 
optimize(input,output); //calls the DLL
int m = output->j; 
sol = new int[n];
sol = output->outputData;
[...] //some code to use the optimized data
delete[] var;
delete[] sol;
delete input;
delete output;
[...] //lots of code 
```

一年多以来，我一直在使用此代码，文件中没有任何构造函数或析构函数`structures.h`，因此没有执行结构成员的初始化。您可能已经猜到了，我不是 C++ 专家，事实上恰恰相反。我还想强调一下，我没有编写大部分模拟程序，只是一些功能，这个程序是由几个开发人员开发了 10 多年，结果相当混乱。

但是，直到最近，一切都运行良好。我决定向 DLL 提供更多信息（出于优化目的），因此在运行大型模拟（涉及大型数据集）时，模拟程序会系统性地崩溃。额外的信息是两个结构中的指针，我的猜测是程序正在泄漏内存，所以我尝试编写构造函数和析构函数，以便分配给结构的内存`input`可以`output`正确管理。我尝试了以下代码，我发现在互联网上搜索：

```
//structures.h
struct InputCPLEX{
  public:
  int i;
  int* inputData;
  int* inputData2; // extra info
  int* inputData3; // extra info
  InputCPLEX(): i(0), inputData(0), inputData2(0), inputData3(0) {}
  ~InputCPLEX(){ 
    if (inputData) delete inputData;
    if (inputData2) delete inputData2;
    if (inputData3) delete inputData3;
  }
}
struct OutputCPLEX{
  public:
  int j;
  int* outputData;
  int* outputData2;
  int* outputData3;
  OutputCPLEX(): j(0), outputData(0), outputData2(0), outputData3(0) {}
  ~OutputCPLEX(){ 
    if (outputData) delete outputData;
    if (outputData2) delete outputData2;
    if (outputData3) delete outputData3;
  }
} 
```

但它似乎不起作用：程序崩溃得更快，只用了很短的时间。有人可以帮我找出代码中的问题吗？我知道可能还有其他因素影响我的程序的执行，但是如果我在`structures.h`文件中删除了构造函数和析构函数，那么模拟程序仍然能够执行小型模拟，涉及小型数据集。

非常感谢您的帮助，大卫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:36:34.763

您必须使用一致的新方式 - 删除。如果某些东西被你获取了，`new[]`你应该删除它`delete[]`，如果是`new`-> 删除`delete`。在您的代码中，您创建`input`并`output`通过`new`但删除 via `delete[]`。

顺便说一句，您不必在删除之前检查指针是否为零。`delete`处理零指针没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:35:39.947

我在您的代码中看到了几个问题：

1）内存泄漏/双重删除：

```
sol = new int[n];
sol = output->outputData; 
```

在这里，您`sol`在初始化后立即覆盖指针，并且分配的数据`new int[n]`被泄露。您还可以`sol`在`output`. 同样的问题`var`- 你删除它两次，通过显式`delete[]`和析构函数`input`。

添加析构函数后会引发双重删除问题`delete`，看起来之前没有问题。

同样正如@Riga 提到的，您使用`new[]`分配数组，而`delete`不是`delete[]`在析构函数中。这是不正确的，这是未定义的行为。尽管这看起来不像是崩溃的原因。在现实世界中，大多数编译器对于内置和 POD 类型的实现`delete`并没有什么不同。只有当您使用非平凡析构函数的对象数组`delete[]`时才会出现严重问题。`delete`

2）在哪里`output->outputData`分配？如果在 DLL 中，这是另一个问题，因为如果在使用另一个编译器实现的 DLL 中分配内存，您通常无法在主程序中安全地释放内存。原因是`new/delete`主程序和 DLL 的运行时使用不同的实现和不同的堆。

您始终应在同一侧分配/取消分配内存。或使用一些常见的低级 API - 例如`VirtualAlloc()/VirtualFree()`或`HeapAlloc()/HeapFree()`使用相同的堆句柄。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:47:30.927

这看起来很奇怪：

```
int m = output->j; 
sol = new int[n];
sol = output->outputData; 
```

据我了解，您以 m 为单位返回大小，但使用 n 进行分配，然后通过将指针（sol）设置为 outputData 来覆盖数组，我认为您的意思是：

```
int m = output->j; 
sol = new int[m];
memcpy(sol,output->outputData,sizeof(int)*m); 
```

# php - 使用循环提取 $_GET 数据并创建多维数组

> ID：12856088
> 
> 赞同：1
> 
> 时间：2012-10-12T09:28:30.043
> 
> 标签：php, loops, multidimensional-array

我正在为客户创建结帐，并且有关他们购物车中的内容的数据正在通过 $_GET 发送到页面（目前）。

我想提取该数据，然后使用循环用它填充一个多维数组。

这是我命名数据的方式：

```
$itemCount = $_GET['itemCount'];
$i = 1;
while ($i <= $itemCount) {
  ${'item_name_'.$i} = $_GET["item_name_{$i}"];
  ${'item_quantity_'.$i} = $_GET["item_quantity_{$i}"];
  ${'item_price_'.$i} = $_GET["item_price_{$i}"];
  //echo "<br />Name: " .${'item_name_'.$i}. " - Quantity: " .${'item_quantity_'.$i}. " - Price: ".${'item_price_'.$i};
  $i++;
} 
```

从这里我想创建一个像这样的多维数组：

```
Array
(
[Item_1] => Array
  (
  [item_name] => Shoe
  [item_quantity] => 2
  [item_price] => 40.00
  )
[Item_2] => Array
  (
  [item_name] => Bag
  [item_quantity] => 1
  [item_price] => 60.00
  )
[Item_3] => Array
  (
  [item_name] => Parrot
  [item_quantity] => 4
  [item_price] => 90.00
  )
  .
  .
  .
) 
```

我想知道是否有一种方法可以在现有`while`循环中创建这个数组？我知道能够`$data = []`在删除一个空数组之后将数据添加到数组中，但实际的语法却让我无法理解。

也许我完全偏离了正确的轨道，有更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:34:08.390

尝试这样的事情......

```
 $itemCount = $_GET['itemCount'];
    $i = 1;
    $items = array();

    while ($i <= $itemCount) {
      $items['Item_'.$i]['item_name'] = $_GET["item_name_{$i}"];
      $items['Item_'.$i]['item_quantity'] = $_GET["item_quantity_{$i}"];
      $items['Item_'.$i]['item_price'] = $_GET["item_price_{$i}"];
      $i++;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:34:21.893

```
$result = array();
$itemCount = $_GET['itemCount'];

$i = 1;
while ($i <= $itemCount) {
  $tmp = array();
  $tmp['item_name'] = $_GET["item_name_{$i}"];
  $tmp['item_quantity'] = $_GET["item_quantity_{$i}"];
  $tmp['item_price'] = $_GET["item_price_{$i}"];
  //echo "<br />Name: " .${'item_name_'.$i}. " - Quantity: " .${'item_quantity_'.$i}. " - Price: ".${'item_price_'.$i};
  $i++;
  $result['Item_{$i}'] = $tmp;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:35:00.427

```
$itemCount = $_GET['itemCount'];
$i = 1;
my_array = [];
while ($i <= $itemCount) {
  ${'item_name_'.$i} = $_GET["item_name_{$i}"];
  ${'item_quantity_'.$i} = $_GET["item_quantity_{$i}"];
  ${'item_price_'.$i} = $_GET["item_price_{$i}"];
  //echo "<br />Name: " .${'item_name_'.$i}. " - Quantity: " .${'item_quantity_'.$i}. " - Price: ".${'item_price_'.$i};

my_array["Item_".$i] = array(
   "item_name"=>$_GET["item_name_{$i}"],
   "item_quantity"=>$_GET["item_quantity_{$i}"],
   "item_price"=>$_GET["item_price_{$i}"]
);

  $i++;
}

var_dump(my_array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T09:35:53.000

```
$arr = array();
for($i = 1; isset(${'item_name_'.$i}); $i++){
    $arr['Item_'.$i] = array(
        'item_name' => ${'item_name_'.$i},
        'item_quantity' => ${'item_quantity_'.$i},
        'item_price' => ${'item_price_'.$i},
    );
} 
```

# c# - 如何在c#中将毫秒转换为日期时间

> ID：12856095
> 
> 赞同：0
> 
> 时间：2012-10-12T09:28:53.897
> 
> 标签：c#

```
private static DateTime FromMS(long microSec)
{           
    long milliSec = (long)(microSec / 1000);
    DateTime startTime = new DateTime(1970, 1, 1);

    TimeSpan time = TimeSpan.FromMilliseconds(milliSec);
    DateTime v = new DateTime(time.Ticks);

    DateTime result = new DateTime(startTime.Year + v.Year, startTime.Month +            v.Month, startTime.Day + v.Day, startTime.Hour + v.Hour, startTime.Minute + v.Minute, startTime.Millisecond + v.Millisecond);

    return result;
} 
```

这个结果是错误的……为什么？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T09:43:08.710

当您执行以下操作时，您已经获得了转换为毫秒的结果：

```
TimeSpan time = TimeSpan.FromMilliseconds(milliSec);
DateTime v = new DateTime(time.Ticks); //This is the result 
```

如果要将毫秒添加到 UNIX 时间，那么您所要做的就是：

```
TimeSpan time = TimeSpan.FromMilliseconds(milliSec);
DateTime result = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
result = result.Add(time); 
```

如果时间不是 UTC，则省略 DateTimeKind.Utc 部分，但通常最好将时间保持为 UTC，并且仅在需要时转换为本地时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T09:35:20.563

```
private static DateTime FromMS(long microSec)
{
    long milliSec = (long)(microSec / 1000);
    DateTime startTime = new DateTime(1970, 1, 1);

    TimeSpan time = TimeSpan.FromMilliseconds(milliSec);
    return startTime.Add(time);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:37:59.203

我使用此方法将 Unix Epoch（以毫秒为单位）转换为 DateTime 对象

```
private static readonly DateTime UnixEpochStart = 
               DateTime.SpecifyKind(new DateTime(1970, 1, 1), DateTimeKind.Utc);

public static DateTime ToDateTimeFromEpoch(this long epochTime)
{
   DateTime result = UnixEpochStart.AddMilliseconds(epochTime);
   return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T09:38:03.403

```
long ticks = new DateTime(1970, 1, 1).Ticks;
DateTime dt = new DateTime(ticks);
dt.AddMilliseconds(milliSec); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-10-30T10:42:40.510

尝试这个。

```
TimeSpan time = TimeSpan.FromMilliseconds(1509359657633);
DateTime date = new DateTime(1970, 1, 1).AddTicks(time.Ticks); 
```

这会将毫秒转换为正确的日期时间。

**注意：-**如果您从 JS 获得毫秒，例如`Date.now()`您在此处收到的毫秒是 UTC 的。因此，当您转换为 C# DateTime 时，您将获得 UTC 时间的 DateTime

# ios - ios中的空闲计时器被禁用后如何重新启用它（以允许显示器再次休眠）？

> ID：12856099
> 
> 赞同：10
> 
> 时间：2012-10-12T09:29:14.570
> 
> 标签：ios, uiapplication

我已经想出了如何阻止 iOS 设备进入睡眠状态（见下文），但我在撤消该设置时遇到了麻烦。根据[Apple Documentation](https://developer.apple.com/documentation/uikit/uiapplication/1623070-idletimerdisabled)，它应该只是更改`idleTimerDisabled`属性的值。但是当我对此进行测试时，它不起作用。

这就是我最初阻止设备进入睡眠状态的方式：

```
 //need to switch off and on for it to work initially
    [UIApplication sharedApplication].idleTimerDisabled = NO;
    [UIApplication sharedApplication].idleTimerDisabled = YES; 
```

我原以为以下方法可以解决问题：

```
 [UIApplication sharedApplication].idleTimerDisabled = NO; 
```

从[苹果文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)：

* * *

> 此属性的默认值为 NO。当大多数应用程序在短时间内没有用户输入触摸时，系统会将设备置于屏幕变暗的“睡眠”状态。这样做是为了节省电量。但是，没有用户输入的应用程序除了加速度计——例如游戏——可以通过将此属性设置为 YES 来禁用“空闲计时器”来避免系统睡眠。

> 重要提示：您应该仅在必要时设置此属性，并且应确保在不再需要时将**其重置为 NO 。**大多数应用程序应该让系统在空闲计时器结束时关闭屏幕。这包括音频应用程序。通过适当使用音频会话服务，当屏幕关闭时，播放和录制不会中断。唯一应该禁用空闲计时器的应用程序是映射应用程序、游戏或具有零星用户交互的类似程序。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-12T09:33:48.133

当你从 Xcode 运行时，你在尝试这个吗？无论您是否设置，从 Xcode 运行总是会禁用空闲计时器`[UIApplication sharedApplication].idleTimerDisabled`。您可以通过从 iPhone/iPod touch/iPad 手动打开应用程序来尝试。

# joomla - RSS 订阅到 Joomla

> ID：12856105
> 
> 赞同：0
> 
> 时间：2012-10-12T09:29:37.097
> 
> 标签：joomla, rss

有没有办法在“**自动”模式下让****RSS**提要进入 Joomla ？

 **意思是，每次更新提要时，都会在 Joomla 上创建一篇新文章/内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:06:49.957

应该看看扩展目录。有几个解决方案：

[http://extensions.joomla.org/extensions/social-web/social-edition/automatic-articles](http://extensions.joomla.org/extensions/social-web/social-edition/automatic-articles)

Rss2Content、rssfactorypro 等等。**

# jquery-ui - 使用带有 jquery ui 滑块的淘汰赛 js

> ID：12856112
> 
> 赞同：12
> 
> 时间：2012-10-12T09:30:07.330
> 
> 标签：jquery-ui, knockout.js

我试图弄清楚淘汰赛 js 是否可以很好地解决以下问题：

我有多个要链接到文本框的滑块。

当文本框更改时，相应的滑块必须更新为新值，反之亦然。

在更改滑块值或文本框时，需要调用一个函数，该函数使用来自所有文本框的输入来计算结果。

[我在这里](http://jsfiddle.net/9cA4Q/4/)有我快速而肮脏的 jQuery 解决方案。

使用淘汰赛js以更优雅的方式实现相同的结果是否容易？

我想我需要创建一个自定义绑定处理程序，就像它在[jQuery UI 日期选择器更改事件中完成的那样，没有被 KnockoutJS 捕获](https://stackoverflow.com/questions/6612705/knockout-with-jquery-ui-datepicker)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-12T10:47:22.667

这是一个例子：http: [//jsfiddle.net/jearles/Dt7Ka/](http://jsfiddle.net/jearles/Dt7Ka/)

我使用自定义绑定来集成 jquery-ui 滑块并使用 Knockout 来捕获输入并计算净额。

--

用户界面

```
<h2>Slider Demo</h2>

Savings: <input data-bind="value: savings, valueUpdate: 'afterkeydown'" />
<div style="margin: 10px" data-bind="slider: savings, sliderOptions: {min: 0, max: 100, range: 'min', step: 1}"></div>

Spent: <input data-bind="value: spent, valueUpdate: 'afterkeydown'" />
<div style="margin: 10px" data-bind="slider: spent, sliderOptions: {min: 0, max: 100, range: 'min', step: 1}"></div>

Net: <span data-bind="text: net"></span> 
```

查看模型

```
ko.bindingHandlers.slider = {
  init: function (element, valueAccessor, allBindingsAccessor) {
    var options = allBindingsAccessor().sliderOptions || {};
    $(element).slider(options);
    $(element).slider({
        "slide": function (event, ui) {
            var observable = valueAccessor();
            observable(ui.value);
        },
        "change": function (event, ui) {
            var observable = valueAccessor();
            observable(ui.value);
        }
    });
    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
        $(element).slider("destroy");
    });
  },
  update: function (element, valueAccessor) {
    var value = ko.unwrap(valueAccessor());
    if (isNaN(value)) {
        value = 0;
    }
    $(element).slider("value", value);
  }
};

var ViewModel = function() {
    var self = this;

    self.savings = ko.observable(10);
    self.spent = ko.observable(5);
    self.net = ko.computed(function() {
        return self.savings() - self.spent();
    });
}

ko.applyBindings(new ViewModel()); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-20T09:33:13.287

我知道那是几天前的事了，但我对 John Earles 代码做了一些调整：

```
ko.bindingHandlers.slider = {
init: function (element, valueAccessor, allBindingsAccessor) {
    var options = allBindingsAccessor().sliderOptions || {};
    $(element).slider(options);
    ko.utils.registerEventHandler(element, "slidechange", function (event, ui) {
        var observable = valueAccessor();
        observable(ui.value);
    });
    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
        $(element).slider("destroy");
    });
    ko.utils.registerEventHandler(element, "slide", function (event, ui) {
        var observable = valueAccessor();
        observable(ui.value);
    });
},
update: function (element, valueAccessor, allBindingsAccessor) {
    var value = ko.utils.unwrapObservable(valueAccessor());
    if (isNaN(value)) value = 0;
    $(element).slider("option", allBindingsAccessor().sliderOptions);
    $(element).slider("value", value);
}
}; 
```

这样做的原因是，如果您使用更改的选项（fx 另一个 observable），那么即使您希望它这样做，它也不会影响滑块。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-24T12:51:49.187

@John Earles 和 @Michael Kire Hansen：感谢您的精彩解决方案！

我使用了 Michael Kire Hansen 的高级代码。我将滑块的“max：”选项绑定到 ko.observable，结果发现在这种情况下滑块没有正确更新值。示例：假设滑块位于最大值 25 的值 25 并且您将最大值更改为 100，滑块停留在最右边的位置，表示它处于最大值（但值仍然是 25，而不是 100）。只要向左滑动一点，值就会更新为 99。

解决方案：在“更新：”部分只需将最后两行切换为：

```
$(element).slider("option", allBindingsAccessor().sliderOptions);
$(element).slider("value", value); 
```

这首先改变了选项，然后改变了价值，它就像一个魅力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-29T10:00:38.070

非常感谢您的帮助，我需要在我的场景中使用范围滑块，所以这里是 @John Earles 和 @Michael Kire Hansen 的扩展

```
ko.bindingHandlers.sliderRange = {
init: function (element, valueAccessor, allBindingsAccessor) {
    var options = allBindingsAccessor().sliderOptions || {};
    $(element).slider(options);
    ko.utils.registerEventHandler(element, "slidechange", function (event, ui) {
        var observable = valueAccessor();
        observable.Min(ui.values[0]);
        observable.Max(ui.values[1]);
    });
    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
        $(element).slider("destroy");
    });
    ko.utils.registerEventHandler(element, "slide", function (event, ui) {
        var observable = valueAccessor();
        observable.Min(ui.values[0]);
        observable.Max(ui.values[1]);
    });
},
update: function (element, valueAccessor, allBindingsAccessor) {
    var value = ko.utils.unwrapObservable(valueAccessor());
    if (isNaN(value.Min())) value.Min(0);
    if (isNaN(value.Max())) value.Max(0);

    $(element).slider("option", allBindingsAccessor().sliderOptions);
    $(element).slider("values", 0, value.Min());
    $(element).slider("values", 1, value.Max());
}
}; 
```

然后是伴随它的 HTML

```
<div id="slider-range" 
             data-bind="sliderRange: { Min: 0, Max: 100 }, 
                                sliderOptions: { 
                                    range: true,
                                    min: 0,
                                    max: 100,
                                    step: 10,
                                    values: [0, 100]
                                }"></div> 
```

# excel - How to CountIf in multiple columns?

> ID：12856114
> 
> 赞同：8
> 
> 时间：2012-10-12T09:30:18.257
> 
> 标签：excel, vba, excel-formula

```
x = 0
For Each cell in Sheets("01").Range("A:A").Cells
If cell.Value = "aaa" And cell.Offset(0, 1).Value = "bbb" Then
x = x+1
End If
Next cell
MsgBox x 
```

Is there a shorter way, pls ?

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-12T09:37:59.730

You can do this with a formula, like this

(Excel 2007 or later)

```
=COUNTIFS(A:A,"aaa",B:B,"bbb") 
```

(Excel 2003 or earlier)

```
=SUMPRODUCT(--(A:A="aaa")*--(B:B="bbb")) 
```

Or, if you have to do it in VBA, use `Evaluate`

```
MsgBox Evaluate("=COUNTIFS(A:A,""aaa"",B:B,""bbb"")")

MsgBox Evaluate("=SUMPRODUCT(--(A:A=""aaa"")*--(B:B=""bbb""))") 
```

* * *

**EDIT** based on your comment

If `rDat` and `rSec` are `Range`'s, and `ct` is the sheet `CodeName` do it like this

```
Dim rDat As Range
Dim rSec As Range
Set rDat = ct.[A:A]
Set rSec = ct.[B:B]
ct.Range("C6").Value = Evaluate("=COUNTIFS(" & rDat.Address(, , , True) & " ,""a""," & rSec.Address(, , , True) & ",""1"")") 
```

* * *

If `ct` is the sheet `Name`, use this

```
Dim ws As Worksheet
Dim rDat As Range
Dim rSec As Range
Set ws = ActiveWorkbook.Worksheets("ct")
Set rDat = ws.[A:A]
Set rSec = ws.[B:B]
ws.Range("C6").Value = Evaluate("=COUNTIFS(" & rDat.Address(, , , True) & " ,""a""," & rSec.Address(, , , True) & ",""1"")") 
```

If `rDat` and `rSec` are strings, use this

```
Dim ws As Worksheet
Dim rDat As String
Dim rSec As String
Set ws = ActiveWorkbook.Worksheets("ct")
rDat = "ct!A:A"
rSec = "ct!B:B"
ws.Range("C6").Value = Evaluate("=COUNTIFS(" & rDat & " ,""a""," & rSec & ",""1"")") 
```

* * *

Another option (for `rDat`, `rSec` as ranges)

```
ct.Range("C6").Value = Application.WorksheetFunction.CountIfs(rDat, "a", rSec, "1") 
```

# actionscript-3 - AdvancedDatagrid 列 Itemeditor 和设置 dataprovider 值的问题

> ID：12856116
> 
> 赞同：3
> 
> 时间：2012-10-12T09:30:23.697
> 
> 标签：actionscript-3, apache-flex, air, flex4, flex3

我有一个可编辑的高级数据网格（可编辑列）。我提供 arraycollection 作为数据提供者。（fname（字符串），lname（字符串），bdate（日期））。（3 列）

我为 fname、lname 和 bdate 创建了 VO。每当我编辑 bdate 并聚焦时，它都会尝试将字符串值保存为 Date 并失败（这很明显）。默认情况下，编辑器将“TextInput”视为 itemeditor 并将插入的日期保存为文本，并且该文本值被预期行为的 VO 拒绝。

1.  我试图更新“ItemEditEnd”事件处理程序中的值，但它不允许我这样做。
2.  我还尝试在 VO 上进行检查，但从未到达那里。（我不知道为什么）

我必须严格将 VO 保留为日期而不是文本。

无论如何我们可以将字符串转换为 Date 吗？还有什么地方吗？我可以在收藏更改中做些什么吗？

如果可能，请帮助我。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:58:58.527

为此，我将使用另一种方法，而不是您建议的方法。

```
<s:GridColumn headerText="Birth Date" dataField="bdate" rendererIsEditable="true">
     <s:itemRenderer>
         <fx:Component>
             <s:GridItemRenderer>
                 <mx:DateField selectedDate="@{data.bdate}"/>
             </s:GridItemRenderer>
         </fx:Component>
     </s:itemRenderer>
 </s:GridColumn> 
```

在此示例中，我使用了一个 ItemRenderer，它也将用作 ItemEditor。在这种情况下，它是一个 DateField，它将能够处理您在 VO 中拥有的日期属性，而无需[手动解析日期](http://blog.flexmp.com/2008/04/08/datefield-itemeditor-when-date-is-a-string/)。

建议您阅读：

*   [http://www.adobe.com/devnet/flex/articles/itemeditors_pt1.html](http://www.adobe.com/devnet/flex/articles/itemeditors_pt1.html)
*   [http://livedocs.adobe.com/flex/3/html/help.html?content=cellrenderer_3.html](http://livedocs.adobe.com/flex/3/html/help.html?content=cellrenderer_3.html)

# javascript - 如何从钛手机上的其他 JS 文件中关闭模态窗口？

> ID：12856117
> 
> 赞同：0
> 
> 时间：2012-10-12T09:30:24.927
> 
> 标签：javascript, titanium, titanium-mobile

我在钛手机中创建了这个简单的登录应用程序。这是我的代码：

登录.js

```
function Login() {
    var loginView = Titanium.UI.createView({
        backgroundColor:'#C4FBFF',
        layout:'vertical'
    });

    var txtUsername = Titanium.UI.createTextField({
        width:'75%',
        hintText:'Username',
        borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED
    });

    var txtPassword = Titanium.UI.createTextField({
        width:'75%',
        hintText:'Password',
        borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
        passwordMask:true
    });

    var btnLogin = Titanium.UI.createButton({
        title:'Login',
        width:'75%'
    });

    loginView.add(txtUsername);
    loginView.add(txtPassword);
    loginView.add(btnLogin);

    btnLogin.addEventListener('click',function(e){
        var alertDialog = Titanium.UI.createAlertDialog({ 
            title: 'Confirmation', 
            message: 'You will be logged in as ' + txtUsername.value + ', continue?',
            buttonNames: ['Yes','No'] 
        });

        alertDialog.addEventListener('click',function(e){
            if (e.index === 0){ //Yes Pressed
                var MainMenu = require('ui/common/MainMenu');

                var mainMenuWindow = Titanium.UI.createWindow({
                    backgroundColor:'#336699',
                    title:'Main Menu',
                    modal:true
                });

                var mainMenu = new MainMenu();
                mainMenuWindow.add(mainMenu);

                mainMenuWindow.open();
            }
            else{ // No Pressed
                makeAlert('Login','Please contact your system administrator');
            }
        });

        alertDialog.show();
    });

    function makeAlert(title, message) {
        var customAlertDialog = Titanium.UI.createAlertDialog({ 
            title: title, 
            message: message,
            buttonNames: ['Ok']
        });
        return customAlertDialog.show();
    }

    return loginView;
}

module.exports = Login; 
```

这是我的 MainMenu.js ：

```
function MainMenu(){
    var mainMenuView = Titanium.UI.createView({
        backgroundColor:'#C4FBFF',
        layout:'vertical'
    });

    var btnClose = Titanium.UI.createButton({
        title:'Close',
        height:30,
        width:150
    });

    mainMenuView.add(btnClose);

    btnClose.addEventListener('click',function(e){
    //What should i do here?
    }); 
    return mainMenuView;
}    
module.exports = MainMenu; 
```

主要问题是我想在按下关闭按钮时关闭模式窗口。我已经尝试过`Titanium.UI.currentWindow.close()`，但它关闭了我所有的应用程序，并且无法在 iOS 设备上执行。有什么建议吗？？非常感谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:02:48.217

```
// pass parent window in as parameter
var mainMenu = new MainMenu(mainMenuWindow);
mainMenuWindow.add(mainMenu); 
```

现在使用参数

```
function MainMenu(_parent /*parent window*/){

    // other code ...

    btnClose.addEventListener('click',function(e){
        _parent.close();
    });

} 
```

# xcode - Instruments 4.5 和 ios 模拟器 6.0。没有开始

> ID：12856124
> 
> 赞同：4
> 
> 时间：2012-10-12T09:30:46.457
> 
> 标签：xcode, ios-simulator, instruments, ios-ui-automation

在 IOS Simulator 5.1 中，此代码有效：

```
`instruments -t /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Instruments/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate /Users/administrator/Library/Application\ Support/iPhone\ Simulator/6.0/Applications/$numbersstrings/myapp.app/ -e UIASCRIPT /Users/administrator/Desktop/Tests/smoke.js` 
```

xcode 更新后，ios 模拟器 6.0 此代码不起作用并显示此错误：

```
`Instruments Usage Error : The specified template 'file://localhost/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Instruments/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate' does not exist.` 
```

文件夹：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library 不包含文件夹/Instruments。

在哪里找到它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T23:58:15.353

Instruments 4.5 中跟踪模板的路径已更改。

改用这个：

```
instruments -t /Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate /Users/administrator/Library/Application\ Support/iPhone\ Simulator/6.0/Applications/$numbersstrings/myapp.app/ -e UIASCRIPT /Users/administrator/Desktop/Tests/smoke.js 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T21:31:53.977

也许你需要再次安装开发者工具：Xcode > Preferences > Download。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T05:12:43.583

iOS 6 中 Instrument 自动化的路径发生变化。验证路径，然后尝试使用命令

# javascript - 在 document.write 中使用 javascript 延迟

> ID：12856125
> 
> 赞同：0
> 
> 时间：2012-10-12T09:30:47.103
> 
> 标签：javascript, function, delay

有人可以帮我在这段代码中输入 javascript 延迟。我想让这段代码在 2 秒后打开。当您打开网址时。网站的其余部分正常加载。

```
<script type="text/javascript">

var avail=$z:value[article.availableinstock];

if ($z:value[article.availableinstock] < 1)
{
document.write('<div class="shop_not">');
document.write("In order!");
}
else if ($z:value[article.availableinstock] >=100)
{
document.write('<div class="shop_ok">');
document.write(" 100+ in stock" );
}
else if ($z:value[article.availableinstock] >=50 )
{
document.write('<div class="shop_ok">');
document.write(" 50+ in stock" );
}
else if ($z:value[article.availableinstock] >=25 )
{
document.write('<div class="shop_ok">');
document.write(" 25+ in stock" );
}
else
{
document.write('<div class="shop_bob">');
document.write(+ avail.toFixed(0));
document.write(" in stock" );
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:33:12.703

解决方案是将所有内容都放在一个`setTimeout(function() {... your stuff ...}, 2000)`调用中。

这应该看起来像：

```
function yourStuff() {
  var avail=$z:value[article.availableinstock];

  if ($z:value[article.availableinstock] < 1) {
    document.write('<div class="shop_not">');
    document.write("In order!");
  } else if ($z:value[article.availableinstock] >=100) {
    document.write('<div class="shop_ok">');
    document.write(" 100+ in stock" );
  } else if ($z:value[article.availableinstock] >=50 ) {
    document.write('<div class="shop_ok">');
    document.write(" 50+ in stock" );
  } else if ($z:value[article.availableinstock] >=25 ) {
    document.write('<div class="shop_ok">');
    document.write(" 25+ in stock" );
  } else {
    document.write('<div class="shop_bob">');
    document.write(+ avail.toFixed(0));
    document.write(" in stock" );
  }
} 
```

然后，在页面内的某个地方，`body`您只需调用

```
<script type="text/javascript">setTimeout(yourStuff, 2000);</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:33:11.237

将您的代码包含在一个函数中并使用`setTimeout`JS 函数。

```
function function_name () {
    var avail=$z:value[article.availableinstock];

    if ($z:value[article.availableinstock] < 1)
    {
        document.write('<div class="shop_not">');
        document.write("In order!");
    }
    else if ($z:value[article.availableinstock] >=100)
    {
        document.write('<div class="shop_ok">');
        document.write(" 100+ in stock" );
    }
    else if ($z:value[article.availableinstock] >=50 )
    {
        document.write('<div class="shop_ok">');
        document.write(" 50+ in stock" );
    }
    else if ($z:value[article.availableinstock] >=25 )
    {
        document.write('<div class="shop_ok">');
        document.write(" 25+ in stock" );
    }
    else
    {
        document.write('<div class="shop_bob">');
        document.write(+ avail.toFixed(0));
        document.write(" in stock" );
    }
}

setTimeout('function_name()', 2000); 
```

# .net - 如何从 VM 管理表单控件？

> ID：12856129
> 
> 赞同：0
> 
> 时间：2012-10-12T09:31:01.033
> 
> 标签：.net, wpf, design-patterns, mvvm

我想控制以下过程。我想用订单保存客户。

![在此处输入图像描述](../Images/cf0c1c32ecc612eea51cc50f5ef8e1e5.png)

1）写客户的名字，姓氏，电话 2）选择产品 3）按插入

我可以在上面使用 MVVM 做到这一点！

但是我不能 ：

如何在 InsertCommand 之后显示消息框？以及如何激活 wpf 选项卡控件的第一个选项卡，也显示在网格中仅选定产品的客户订单中？

![在此处输入图像描述](../Images/4f62ce6aea04532c1bd866401a6b4b95.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:36:41.423

可以想出两种我已经做到这一点的方法。

一种方法是控制包含您的消息的表单。通常它的可见性是折叠的，但作为保存过程的一部分，您设置其可见性绑定为可见的属性。控件变为可见，直到您单击确定按钮，此时它变为不可见。对于小型解决方案，这是一种快速简便的方法，但是如果您有更大的解决方案，那么您将需要更频繁的对话-因此您将需要一个更具可扩展性的解决方案-因此您可以将对话服务注入您的视图模型中，或使用消息传递在要显示的窗口上获取对话框控件。

例如，在我目前正在处理的项目中，我们使用 mvvm light 并且有一个带有子窗口的主窗口。主窗口注册对话框消息，当子窗口发布该消息时，它会显示对话框。所以例如：

```
 public MainPage()
    {
        this.InitializeComponent();

        // http://mvvmlight.codeplex.com/discussions/209338?ProjectName=mvvmlight
        Messenger.Default.Register<DialogMessage>(this, OnDialogMessage);

    }

private static void OnDialogMessage(DialogMessage message)
{
    MessageBoxResult result = MessageBox.Show(message.Content, message.Caption, message.Button);
    message.ProcessCallback(result);
} 
```

在您想要显示消息的表单中，您可以发布一个 DialogMessage 并且已订阅该消息的窗口将显示它。我们目前正在使用 ServiceLocator 来处理查找我们的消息框服务，尽管根据您的项目，注入它可能会更好。

```
ServiceLocator.Current.GetInstance<IMessageBoxDisplayer>().Show(
                        "Selected Product has been saved", "Product Saved", false); 
```

然后你的 messageBoxDisplayer 将通过发布消息来显示消息框：

```
 public Task<bool> Show(string messageBoxText, string caption, bool displayCancelButton)
    {
        if (caption == null)
        {
            throw new ArgumentNullException("caption");
        }

        var tcs = new TaskCompletionSource<bool>();

        var message = new DialogMessage(messageBoxText, mbr => tcs.SetResult(mbr == MessageBoxResult.OK))
            {
                Button = displayCancelButton ? MessageBoxButton.OKCancel : MessageBoxButton.OK,
                Caption = caption,
            };
        Messenger.Default.Send(message);

        return tcs.Task;
    } 
```

显然，实现消息服务、服务定位器等需要更多的代码，但这应该为您提供一些可能的实现方式的一般要点。如果你已经在使用一个框架，那么你很可能已经有了很多这样的东西，如果不值得研究的话。

查看有关 mvvmlight 对话框消息和对话框的讨论：http://mvvmlight.codeplex.com/discussions/209338?ProjectName= [mvvmlight](http://mvvmlight.codeplex.com/discussions/209338?ProjectName=mvvmlight)

编辑：刚刚注意到问题的第二部分。要激活第二个选项卡，取决于您如何创建它。TabControl 本质上是一个项目控件，因此您可以将其项目源绑定到视图模型集合，然后将 SelectedItem 绑定到 Windows 视图模型上的 ActiveTabViewModel 属性（模式=TwoWay），然后您可以将 ActiveTabViewModel 设置为您想要的它应该改变。或者，我想您可能可以绑定 SelectedIndex （尽管我自己还没有尝试过这种方式），例如：

```
<TabControl SelectedIndex="{Binding SelectedTabIndex, Mode=TwoWay}"/> 
```

并且在视图模型上有属性： public int SelectedTabIndex { get { return _selectedTabIndex; }

```
 set
        {
            this._selectedTabIndex = value;
            this.RaisePropertyChanged(() => this.SelectedTabIndex);
        }
    } 
```

假设您有一个处理 NotifyPropertyChanged 的​​ RaisePropertyChanged 事件 - 如果您使用的是 mvvmlight，它应该在那里。

然后在您的保存方法中设置 SelectedTabIndex = x ，它应该有望更改为正确的选项卡。

# python - Django - 如何将用户对象传递给views.py中的表单

> ID：12856133
> 
> 赞同：3
> 
> 时间：2012-10-12T09:31:08.100
> 
> 标签：python, django

我是 django 的新手，并且一直在尝试将 User 对象传递给 ModelForm，然后对其进行验证。也就是最后将 User 对象作为 ForeignKey 添加到 Note 对象中，其中 ModelForm 是 Note 类的 Meta。

我的forms.py：

```
 class NoteForm(ModelForm):
     class Meta:
        model = Note 
```

我的意见.py：

```
 def addNote(request):
     if request.method == 'POST':
        user = User.objects.get(username=request.POST['user'])
        model_form = NoteForm(request.POST, request.FILES, user)
        if model_form.is_valid():
           model_form.save()
           return HttpResponseRedirect(reverse('index'))
        return HttpResponse('De indtastede data er ikke gyldige')
     return render(request, 'studies/uploadfile.html') 
```

我的模板.html：

```
<form enctype="multipart/form-data" method="post" action="/notes/add/">
Note Title: <input type="text" name="name"  /> <br />
Select Note: <input type="file" name="note" /> <br /> 
<input type="hidden" name="user" value="{{ user.id }}">
<input type="submit" value="submit" />
{% csrf_token %}
</form> 
```

我尝试使用 request.user，因为我试图让当前用户登录并将该用户添加为 ForreignKey。任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T09:52:08.050

我不确定要将其发送到模板有什么意义。毕竟，您在验证之前和之后都可以在视图中看到它：最好在那里处理它。

要做的是`user`从表单定义中排除该字段，然后在保存时手动设置：

```
class NoteForm(ModelForm):
   class Meta:
      model = Note
      exclude = ('user',)

if request.method == 'POST':
   model_form = NoteForm(request.POST, request.FILES)
   if model_form.is_valid():
       note = model_form.save(commit=True)
       note.user = request.user
       note.save()
       return... 
```

另请注意，您的视图永远不会向模板发送任何验证错误，并且您的模板不会显示错误或用户输入的无效值。请遵循文档中规定的结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T16:09:33.830

您可以扩展表单的保存方法，

```
def save(self, user):
    note = super(NoteForm, self)
    note.user = user
    note.save()
    return note 
```

此外，您的视图必须采用以下结构：

```
from django.shortcuts import render
from django.http import HttpResponseRedirect

def contact(request):
     if request.method == 'POST': # If the form has been submitted...
        form = ContactForm(request.POST) # A form bound to the POST data
        if form.is_valid(): # All validation rules pass
            # Process the data in form.cleaned_data
            # ...
            # note: NoteForm.save(request.user)
            return HttpResponseRedirect('/thanks/') # Redirect after POST
    else:
        form = ContactForm() # An unbound form

    return render(request, 'contact.html', {
        'form': form,
    }) 
```

[（从https://docs.djangoproject.com/en/dev/topics/forms/](https://docs.djangoproject.com/en/dev/topics/forms/)复制）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:37:52.873

看这里[https://docs.djangoproject.com/en/1.2/ref/templates/api/#subclassing-context-requestcontext](https://docs.djangoproject.com/en/1.2/ref/templates/api/#subclassing-context-requestcontext)

# android - 移动社交 SDK

> ID：12856137
> 
> 赞同：0
> 
> 时间：2012-10-12T09:31:15.893
> 
> 标签：android, ios, mobile

1.  我想让用户通过 Facebook、Twitter 等在 Android 上发帖吗？是否有一个 SDK 可以让我轻松做到这一点？
2.  我想知道是否有可用于虚拟货币和计费的 SDK。
3.  已经在使用 Parse 和 Flurry。

我知道 HeyZap（仅适用于游戏）、GetSocialize（自定义内容有点复杂）。我研究并发现：木瓜，scoreloop，游泳，skiller，格力。但是哪一个是最好的？理想情况下，SDK 是多平台的，但我现在愿意只看 Android 的东西。此外，理想情况下，相同的 SDK 可以让我同时执行 1 和 2。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:35:16.670

见这里分享：http: [//developer.android.com/training/sharing/shareaction.html](http://developer.android.com/training/sharing/shareaction.html)

请参阅此处了解应用内付款：http: [//developer.android.com/guide/google/play/billing/index.html](http://developer.android.com/guide/google/play/billing/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T06:55:51.977

你检查过 Skiller SDK 吗？如果您需要更多详细信息，请通过 developers@skiller-games.com 与我们联系，我们将非常乐意回答您的问题并查看我们的 SDK 是否是您正在寻找的。

# c# - 加密和解密密码

> ID：12856140
> 
> 赞同：1
> 
> 时间：2012-10-12T09:31:24.897
> 
> 标签：c#, asp.net, passwords, encryption

我正在使用以下代码来加密和解密 asp.net 中的密码。加密工作完美，但解密时会引发此错误**`Invalid length for a Base-64 char array.`**

我的密码是 123，我使用它来加密：`HttpUtility.UrlEncode(CryptorEngine.Encrypt(strpassword, true));` 和解密我使用它如下：

```
CryptorEngine.Decrypt(HttpUtility.UrlDecode(strpassword), true)); 
```

这是代码：

```
 public class CryptorEngine
    {
        /// <summary>
        /// Encrypt a string using dual encryption method. Return a encrypted cipher Text
        /// </summary>
        /// <param name="toEncrypt">string to be encrypted</param>
        /// <param name="useHashing">use hashing? send to for extra secirity</param>
        /// <returns></returns>
        public static string Encrypt(string toEncrypt, bool useHashing)
        {
            byte[] keyArray;
            byte[] toEncryptArray = UTF8Encoding.UTF8.GetBytes(toEncrypt);

            System.Configuration.AppSettingsReader settingsReader = new AppSettingsReader();
            // Get the key from config file
            string key = (string)settingsReader.GetValue("SecurityKey", typeof(String));
            //System.Windows.Forms.MessageBox.Show(key);
            if (useHashing)
            {
                MD5CryptoServiceProvider hashmd5 = new MD5CryptoServiceProvider();
                keyArray = hashmd5.ComputeHash(UTF8Encoding.UTF8.GetBytes(key));
                hashmd5.Clear();
            }
            else
                keyArray = UTF8Encoding.UTF8.GetBytes(key);

            TripleDESCryptoServiceProvider tdes = new TripleDESCryptoServiceProvider();
            tdes.Key = keyArray;
            tdes.Mode = CipherMode.ECB;
            tdes.Padding = PaddingMode.PKCS7;

            ICryptoTransform cTransform = tdes.CreateEncryptor();
            byte[] resultArray = cTransform.TransformFinalBlock(toEncryptArray, 0, toEncryptArray.Length);
            tdes.Clear();
            return Convert.ToBase64String(resultArray, 0, resultArray.Length);
        }
        /// <summary>
        /// DeCrypt a string using dual encryption method. Return a DeCrypted clear string
        /// </summary>
        /// <param name="cipherString">encrypted string</param>
        /// <param name="useHashing">Did you use hashing to encrypt this data? pass true is yes</param>
        /// <returns></returns>
        public static string Decrypt(string cipherString, bool useHashing)
        {
            byte[] keyArray;
            byte[] toEncryptArray = Convert.FromBase64String(cipherString);

            System.Configuration.AppSettingsReader settingsReader = new AppSettingsReader();
            //Get your key from config file to open the lock!
            string key = (string)settingsReader.GetValue("SecurityKey", typeof(String));

            if (useHashing)
            {
                MD5CryptoServiceProvider hashmd5 = new MD5CryptoServiceProvider();
                keyArray = hashmd5.ComputeHash(UTF8Encoding.UTF8.GetBytes(key));
                hashmd5.Clear();
            }
            else
                keyArray = UTF8Encoding.UTF8.GetBytes(key);

            TripleDESCryptoServiceProvider tdes = new TripleDESCryptoServiceProvider();
            tdes.Key = keyArray;
            tdes.Mode = CipherMode.ECB;
            tdes.Padding = PaddingMode.PKCS7;

            ICryptoTransform cTransform = tdes.CreateDecryptor();
            byte[] resultArray = cTransform.TransformFinalBlock(toEncryptArray, 0, toEncryptArray.Length);

            tdes.Clear();
            return UTF8Encoding.UTF8.GetString(resultArray);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:39:05.043

在 URL 中有与加密输出冲突的字符，至少在我的代码中，这就是问题所在。所以我使用这两个函数来改变这个字符并避免这种情况。

```
public static string ChangeSPChart(string sTheInput)
{
    StringBuilder sRetMe = new StringBuilder(sTheInput);

    sRetMe.Replace('+', '-');
    sRetMe.Replace('/', '*');
    sRetMe.Replace('=', '!');

    return sRetMe.ToString();
}

public static string FixSPChart(string sTheInput)
{
    StringBuilder sRetMe = new StringBuilder(sTheInput);

    sRetMe.Replace('-', '+');
    sRetMe.Replace('*', '/');
    sRetMe.Replace('!', '=');

    return sRetMe.ToString();
} 
```

并且加密/解密代码将是：

```
public static string Encrypt(string toEncrypt, bool useHashing)
{
    byte[] keyArray;
    byte[] toEncryptArray = UTF8Encoding.UTF8.GetBytes(toEncrypt);

    System.Configuration.AppSettingsReader settingsReader = new AppSettingsReader();
    // Get the key from config file
    string key = (string)settingsReader.GetValue("SecurityKey", typeof(String));
    //System.Windows.Forms.MessageBox.Show(key);
    if (useHashing)
    {
        MD5CryptoServiceProvider hashmd5 = new MD5CryptoServiceProvider();
        keyArray = hashmd5.ComputeHash(UTF8Encoding.UTF8.GetBytes(key));
        hashmd5.Clear();
    }
    else
        keyArray = UTF8Encoding.UTF8.GetBytes(key);

    TripleDESCryptoServiceProvider tdes = new TripleDESCryptoServiceProvider();
    tdes.Key = keyArray;
    tdes.Mode = CipherMode.ECB;
    tdes.Padding = PaddingMode.PKCS7;

    ICryptoTransform cTransform = tdes.CreateEncryptor();
    byte[] resultArray = cTransform.TransformFinalBlock(toEncryptArray, 0, toEncryptArray.Length);

    tdes.Clear();
    var encrypted = Convert.ToBase64String(resultArray, 0, resultArray.Length);

    // here I change it
    return  ChangeSPChart(encrypted);
}
/// <summary>
/// DeCrypt a string using dual encryption method. Return a DeCrypted clear string
/// </summary>
/// <param name="cipherString">encrypted string</param>
/// <param name="useHashing">Did you use hashing to encrypt this data? pass true is yes</param>
/// <returns></returns>
public static string Decrypt(string cipherString, bool useHashing)
{
    cipherString = FixSPChart(cipherString);

    byte[] keyArray;
    byte[] toEncryptArray = Convert.FromBase64String(cipherString);

    System.Configuration.AppSettingsReader settingsReader = new AppSettingsReader();
    //Get your key from config file to open the lock!
    string key = (string)settingsReader.GetValue("SecurityKey", typeof(String));

    if (useHashing)
    {
        MD5CryptoServiceProvider hashmd5 = new MD5CryptoServiceProvider();
        keyArray = hashmd5.ComputeHash(UTF8Encoding.UTF8.GetBytes(key));
        hashmd5.Clear();
    }
    else
        keyArray = UTF8Encoding.UTF8.GetBytes(key);

    TripleDESCryptoServiceProvider tdes = new TripleDESCryptoServiceProvider();
    tdes.Key = keyArray;
    tdes.Mode = CipherMode.ECB;
    tdes.Padding = PaddingMode.PKCS7;

    ICryptoTransform cTransform = tdes.CreateDecryptor();
    byte[] resultArray = cTransform.TransformFinalBlock(toEncryptArray, 0, toEncryptArray.Length);

    tdes.Clear();
    return UTF8Encoding.UTF8.GetString(resultArray);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:43:09.450

您提供的代码工作正常。我用这个小程序对其进行了测试：

```
void Main()
{
    var cryptB64 =CryptorEngine.Encrypt("123", true);
    var encoded = HttpUtility.UrlEncode(cryptB64);
    var decoded = HttpUtility.UrlDecode(encoded);
    var decrypted = CryptorEngine.Decrypt(decoded, true);

    bool matches = (decrypted=="123");
    Console.WriteLine(matches);
} 
```

它按预期返回true。

问题可能是您在某些时候破坏了您的加密值。我猜它是通过 HTTP 传输的，我猜这就是问题发生的地方。

**附加说明：**

调用时`CryptorEngine.Decrypt(HttpUtility.UrlDecode(strpassword), true));`，您需要确保这`strpassword`是密码的*加密*形式，而不是您要比较的明文密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:48:48.937

hiii 请使用此代码，这很好用

//信用卡的加密方式

```
public string EncryptTripleDES(string Plaintext, string Key)
{

    System.Security.Cryptography.TripleDESCryptoServiceProvider DES =

    new System.Security.Cryptography.TripleDESCryptoServiceProvider();

    System.Security.Cryptography.MD5CryptoServiceProvider hashMD5 =

    new System.Security.Cryptography.MD5CryptoServiceProvider();

    DES.Key = hashMD5.ComputeHash(System.Text.ASCIIEncoding.ASCII.GetBytes(Key));

    DES.Mode = System.Security.Cryptography.CipherMode.ECB;

    System.Security.Cryptography.ICryptoTransform DESEncrypt = DES.CreateEncryptor();

    Buffer = System.Text.ASCIIEncoding.ASCII.GetBytes(Plaintext);
   string TripleDES = Convert.ToBase64String(DESEncrypt.TransformFinalBlock(Buffer, 0, Buffer.Length));

    return TripleDES;

}
//Decryption Method 

public string DecryptTripleDES(string base64Text, string Key)
{

    System.Security.Cryptography.TripleDESCryptoServiceProvider DES =

    new System.Security.Cryptography.TripleDESCryptoServiceProvider();

    System.Security.Cryptography.MD5CryptoServiceProvider hashMD5 =

    new System.Security.Cryptography.MD5CryptoServiceProvider();
    DES.Key = hashMD5.ComputeHash(System.Text.ASCIIEncoding.ASCII.GetBytes(Key));
    DES.Mode = System.Security.Cryptography.CipherMode.ECB;
    System.Security.Cryptography.ICryptoTransform DESDecrypt = DES.CreateDecryptor();
    Buffer = Convert.FromBase64String(base64Text);

    string DecTripleDES = System.Text.ASCIIEncoding.ASCII.GetString(DESDecrypt.TransformFinalBlock(Buffer, 0, Buffer.Length));
   return DecTripleDES;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-03T15:20:26.510

这里有点晚了，但问题可能是别的（对我来说）。

Request.Querystring 已经进行了一些解码。就我而言，我基本上是解码了两次。添加第二个“HttpUtility.UrlEncode”就可以了（至少在 20 次不同的测试之后）。

我还没有完全找到微软关于这种行为的确切文档，旧书被存放起来（我尽量不离开我的椅子），但这些链接很有帮助：

[Request.Querystring 会自动对字符串进行 url 解码吗？](https://stackoverflow.com/questions/13095416/does-request-querystring-automatically-url-decode-a-string)

[http://forums.asp.net/t/1354726.aspx?Request+Querystring+without+decoding+possible+](http://forums.asp.net/t/1354726.aspx?Request+Querystring+without+decoding+possible+)

# php - 两个虚拟主机 PHP 中的 SSO 实现

> ID：12856143
> 
> 赞同：0
> 
> 时间：2012-10-12T09:31:31.267
> 
> 标签：php, single-sign-on

我有两个虚拟主机：

```
Ex. testproject1.net and
    testproject2.net 
```

我在那里创建了两个简单的登录脚本。我想为它实现 SSO 实现。一旦用户使用 testproject1.net 进行身份验证，我想为两个虚拟主机（testproject1.net 和 testproject2.net）设置会话。意味着如果我打开 testproject2.net，它会通过获取会话值自动进行身份验证。

请帮助处理这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:43:24.170

好的，就到这里。如果你愿意，可以再买一个`Virtual Host`。`authproject.net`并将身份验证信息发布到那里的表单中。让它在会话中设置。

现在，一旦您将凭据提供给`authproject.net`域以及身份验证后的去向，它将身份验证数据发布到相应的目的地。

### 来源`testproject1.net/index.php`：

```
<?php
    if (isset($_SESSION["user"]))
        die($_SESSION["user"]["name"] . " is logged in!");
    else
        die('<a href="auth.php">Login</a>');
?> 
```

### 来源`testproject1.net/auth.php`：

```
<?php
    if (isset($_SESSION["user"]) && !count($_POST))
    {
        header("Location: index.php");
        die();
    }
    elseif (count($_POST))
        if ($_POST["username"] == "admin" && $_POST["password"] == "letmein")
            $_SESSION["user"]["title"] = "Administrator"; # The session is set
        else
            showForm(); # Invalid Password
    else
        showForm(); # Log In Screen
?>

<?php
    session_start();
    if (isset($_SESSION["user"]) && !count($_POST))
    {
        header("Location: index.php");
        die();
    }
    elseif (count($_POST))
        if ($_POST["username"] == "admin" && $_POST["password"] == "letmein")
        {
            $_SESSION["user"]["title"] = "Administrator"; # The session is set
            if (isset($_GET["redirect"]))
            {
                # Start crappy implementation :P
                echo '<form method="post" action="', $_GET["redirect"], '/auth.php" id="authfrm"><input type="hidden" name="username" value="', $username, '"><input type="hidden" name="password" value="', $password, '"></form><script type="text/javascript">document.getElementById("authfrm").submit();</script>';
            }
            else
                header("Location: index.php");
        }
        else
            showForm(); # Invalid Password
    else
        showForm(); # Log In Screen
?> 
```

### 在所有站点中执行相同的操作。希望你能明白。

# c - malloc（）中的分段错误？

> ID：12856145
> 
> 赞同：0
> 
> 时间：2012-10-12T09:31:41.573
> 
> 标签：c, segmentation-fault, malloc, stack-trace

我在 malloc() 例程中遇到分段错误。这是来自 gdb 的堆栈跟踪：

```
#0  0x00007ffff787e882 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#1  0x00007ffff787fec6 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#2  0x00007ffff7882a45 in malloc () from /lib/x86_64-linux-gnu/libc.so.6
#3  0x0000000000403ab0 in xmalloc (size=1024) at global.c:14
#4  0x00000000004020fb in processConnectionQueue (arguments=0x60a4e0)
    at connection.c:117
#5  0x00007ffff7bc4e9a in start_thread ()
   from /lib/x86_64-linux-gnu/libpthread.so.0
#6  0x00007ffff78f24bd in clone () from /lib/x86_64-linux-gnu/libc.so.6
#7  0x0000000000000000 in ?? () 
```

这是怎么回事？什么可能导致 malloc() 段错误？

编辑：这是来自 xmalloc() 的代码。这是非常标准的，从堆栈跟踪中可以看出，它正在调用大小为 1024 的 malloc。

```
void* xmalloc(size_t size)
{
    void* result = malloc(size);
    if(!result)
    {
        if(!size)
        {
            result = malloc(1);
        }
        if(!result)
        {
            fprintf(stderr, "Error allocating memory of size %zu\n", size);
            exit(-1);
        }
    }
    return result;
} 
```

connection.c 中的第 117 行：

```
 item->readBuffer = xmalloc(kInitialPacketBufferSize); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T09:38:55.507

您很可能会在代码中的其他地方看到错误的影响，即访问分配之外的内存。如果你足够幸运，你的代码可以触及 malloc 用来跟踪分配的一些内部值。

如果您有可能，请尝试将您的代码与 libefence 或类似的分配检查器链接，并使用它来定位真正的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:44:41.027

你能检查一下线路吗

```
#3  0x0000000000403ab0 in xmalloc (size=1024) at global.c:14 
```

大小 = 1024 的 global.c。您还可以使用*Wegge*提到的一些工具来检测一些重新分级此段错误的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:18:19.097

这至少有三个基本原因。

1.  您覆盖了 malloc() 返回的项目，并在其开始之前或结束之后写了一些东西。

2.  你释放了两次东西，这在某种程度上是一个特例

3.  你释放了一些不是 malloc() 结果的东西。

任何这些操作都会破坏 malloc)) 堆，从而导致它发生故障。

# postgresql - （显然）相等的输入数据的不同结果？

> ID：12856146
> 
> 赞同：0
> 
> 时间：2012-10-12T09:31:48.657
> 
> 标签：postgresql

要计算表中的平均角度（角度单位为度`[0, 360]`），我使用以下语句：

```
SELECT 
    (CASE WHEN (a < 0.0) 
    THEN a + 360.0 
    ELSE a END) as angle
FROM (
    SELECT 
        degrees(atan2(avg(sin(radians(x))), avg(cos(radians(x))))) as a
    FROM
        angle_t
    ) as t
UNION
SELECT
    x
FROM
    angle_t 
```

在进行测试时，我尝试了包含雅虎天气数据的表格：

```
WITH angle_t(x) AS (
    SELECT 
        cast(wind_direction as double precision)
    FROM
        weather_yahoo
    WHERE 
        time >= current_date - interval '1 days' - interval '1 hours'
    AND 
        time <= current_date - interval '1 days') 
```

输出是：

```
246.670436944698
250.0
240.0 
```

我想知道为什么平均角度不是 245 而是 246.67 ......所以我用明显相等的输入数据进行了另一个测试：

```
WITH angle_t(x) AS (VALUES 
    (240 :: double precision),
    (250)) 
```

输出显示了（未）预期的结果：

```
245.0
250.0
240.0 
```

谁能给我解释一下？（这是 PostgreSQL 8.4）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:30:49.943

`UNION`操作员消除重复条目。

从[文档](http://www.postgresql.org/docs/8.4/static/queries-union.html)[强调我的]：

> UNION 有效地将 query2 的结果附加到 query1 的结果（尽管不能保证这是实际返回行的顺序）。**此外，它以与 DISTINCT 相同的方式从其结果**中消除重复行，除非使用 UNION ALL。

因此，如果`UNION ALL`使用，对意外结果的解释是显而易见的：

```
246.670436944698
250.0
240.0
250.0 
```

# c# - 如何操作标签的值？

> ID：12856151
> 
> 赞同：0
> 
> 时间：2012-10-12T09:32:15.707
> 
> 标签：c#, asp.net-mvc, translation

这是翻译页面的不同方法。这并不意味着本地化。我创建了类 TransModel，我的所有 ViewModel 都继承自该类。此类从数据库中获取与当前 ViewModel 相关的字符串对并将它们存储在“标签”字典中。该对的键是此处“用户名”字符串的值，值是翻译后的值。

```
[Display(Name = "User Name")]
public string UserName { get; set; } 
```

我没有在 View 中使用 Html.LabelFor，而是使用它的扩展名为 TransLabelFor

```
 public static MvcHtmlString TransLabelFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression,TransModel model)
    {  
        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);         
        string trans = "";
        model.labels.TryGetValue(metadata.DisplayName, out trans);
        if (trans == null)
        {
            trans = metadata.DisplayName;
        }
        return MvcHtmlString.Create(String.Format("<label for='{0}'>{1}</label>", metadata.DisplayName, trans)); 
    } 
```

现在我想用它替换我返回的东西。我想要由此返回的原始标签：

```
 MvcHtmlString originalTag = System.Web.Mvc.Html.LabelExtensions.LabelFor(html, expression); 
```

但我的翻译。

是否有任何巧妙的方法来代替字符串查找/替换？我不喜欢我也必须传递模型，有更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:57:28.197

或“改进”您的解决方案（也包括反射，但这将避免将 TransModel 放入您的助手中）

```
public static IHtmlString TransLabelFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression)
        {
            var metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);
            var htmlFieldName = ExpressionHelper.GetExpressionText(expression);
            var modelType = typeof (TModel);

            var resolvedLabelText = metadata.DisplayName ?? metadata.PropertyName;
            if (String.IsNullOrEmpty(resolvedLabelText))
                return MvcHtmlString.Empty;

            var labelProperty = modelType.GetProperty("labels");
            if (labelProperty != null)
            {
                var labels = labelProperty.GetValue(html.ViewData.Model, null) as Dictionary<string, string>;
                if (labels != null && labels.ContainsKey(resolvedLabelText))
                    resolvedLabelText = labels[resolvedLabelText];
            }

            var tag = new TagBuilder("label");
            tag.Attributes.Add("for", TagBuilder.CreateSanitizedId(html.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(htmlFieldName)));
            tag.SetInnerText(resolvedLabelText);
            return MvcHtmlString.Create(tag.ToString());
        } 
```

但这意味着您必须将所有内容更改`LabelFor`为`TransLableFor`（所有解决方案中的字符串替换）：但至少您不必在替换过程中添加“TransModel”。

# c# - MSIL代码调查

> ID：12856155
> 
> 赞同：2
> 
> 时间：2012-10-12T09:32:42.290
> 
> 标签：c#, .net, cil

我现在正在使用 IL 代码，将来需要自己编写。由于误解，我有些担心。这是C#中的一个简单方法

```
public static string Method1(int id)
 {
   return Method2(id);
 } 
```

这是它的 IL 代码

```
.method public hidebysig static string 
          Method1(int32 id) cil managed
  {
    // 
    .maxstack  1
    .locals init ([0] string CS$1$0000)
    IL_0000:  nop          // Why?
    IL_0001:  ldarg.0
    IL_0002:  call       string MyNamespace.MyClass::Method2(int32)
    IL_0007:  stloc.0    // storing a return value of MyClass::Method2 to local variable.
    IL_0008:  br.s       IL_000a   // Why?

    IL_000a:  ldloc.0    // Does it really require and why?
    IL_000b:  ret
  } // end of method MyClass::Method1 
```

**CIL 中的每个**方法都`nop`因某种原因而起作用。为什么会有它？就我而言，是否有必要使用`br.s IL_000a`它并且没有它会起作用吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T09:35:25.223

nops 允许您调试（设置断点），如果您在发布模式下编译，您将在代码中看到更少的 nope。

如果您在发布/优化模式下编译相同的代码，IL 应该看起来更清晰：

```
.method public hidebysig static string Method1(int32 id) cil managed
{
    .maxstack 8
    L_0000: ldarg.0 
    L_0001: call string MyNamespace.MyClass::Method2(int32)
    L_0006: ret 
} 
```

# eclipse - gwt - 在 Eclipse 中使用 Maven 导入导入 gwt 项目时出错

> ID：12856158
> 
> 赞同：0
> 
> 时间：2012-10-12T09:32:55.900
> 
> 标签：eclipse, gwt, maven, import, gwt-maven-plugin

我正在使用`Eclipse`, `Version: Indigo Service Release 1`。

我的`GWT version is 2.4.0`. 我安装了 GWT 和 Maven 相关插件之类的所有东西。

我正在尝试导入一个`existing gwt-maven project`. 导入时，我看到此对话框：

![导入时出错](../Images/afd6b95128de74c0554e1c490ab2945b.png)

谁能告诉我为什么以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:37:01.633

谷歌是你亲爱的朋友。

通过输入“没有找到处理 gwt-mavn-plugin 的市场条目”，我得到：

[导入 Maven-GWT 项目时出错（“未找到处理 gwt-maven-plugin 的市场条目”）](https://stackoverflow.com/questions/7916308/error-when-importing-maven-gwt-project-no-marketplace-entries-found-to-handle)

[gwt-maven-plugin 与 Eclipse Indigo](https://stackoverflow.com/questions/7410338/gwt-maven-plugin-with-eclipse-indigo)

[Eclipse：导入 Maven 项目，缺少 maven-gae-plugin](https://stackoverflow.com/questions/6742979/eclipse-import-maven-project-missing-maven-gae-plugin)

**编辑 ：**

实际上，我建议您`maven`从命令行使用，而不是`Maven plugin`在 Eclipse 中使用，因为我遇到过很多问题。

从命令行，运行以下命令：

*   编译和安装：`mvn clean install`
*   生成eclipse项目：`mvn eclipse:eclipse`

然后，从您的 Eclipse 中，将您生成的项目作为普通项目导入，瞧！

希望这可以帮助！

# java - 按时间顺序排列日期

> ID：12856163
> 
> 赞同：0
> 
> 时间：2012-10-12T09:33:17.320
> 
> 标签：java, android

朋友我有一个包含日期记录的字符串

```
String date=10-Oct-2012 @12-Oct-2012 @$12-Oct-2012 @12-Oct-2012 @$12-Sept-2012 13:50@12-Oct-2012 13:50@$12-Feb-2012 13:50@12-Oct-2012 13:50@$

List<Date> myList=new ArrayList<Date>() ; 
```

我需要比较日期，`10-Oct-2012,12-OCt-2012,12-Sept-2012,12-Feb-2012`即每个奇数日期，以便我可以按时间顺序排列它们。我对这个实现感到困惑，请为我提供解决问题的指导/提示。

在这种情况下，按时间顺序后的解决方案将是`12-Feb-2012 @12-Oct-2012 @12-Sept-2012 @12-Oct-2012 @$10-Oct-2012 @12-Oct-2012 @$12-Oct-2012 @12-Oct-2012`

朋友们，为了解决这个问题，我创建了一个 Hashmap，我计划将第一个日期保存为键，并将整个字符串保存为值。

```
String[] tokens=date.split("\\$");
    demo[0]=demo[0].replaceAll("-", ".");
if(tokens.length>0)
        {
            for(int iTmp=tokens.length-1;iTmp>=0;iTmp--)
            {
                String []demo = tokens[iTmp].split("\\@");
                    demo[0] = demo[0].replace("Jan", "1")
                    .replace("Feb", "2").replace("March","3").replace("April","4").replace("May","5").replace("Jun","6").replace("July","7").replace("Aug","8")
                    .replace("Sept","9").replace("Oct","10").replace("Nov","11").replace("Dec","12");
                    demo[0]=demo[0]+" 00:05:00";
                    Date date1 = null;
                    SimpleDateFormat formatter = new SimpleDateFormat("dd.MM.yy");

                    try {
                        date1 = (Date)formatter.parse(demo[0]);

                    } catch (ParseException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    myList.add(date1);
                    System.out.println("ADDED DATE IS"+date1);
                    //System.out.println("KEY VALUE PAIRS  "+key+"  "+tokens[iTmp]);
                }
            }
            System.out.println("READING LISTs");
            for(int iTmp=0;iTmp<myList.size();iTmp++)
            {

                System.out.println(myList.get(iTmp));
            }
            Collections.sort(myList);
            System.out.println("After Sorting");
            for(int iTmp=0;iTmp<myList.size();iTmp++)
            {

                System.out.println(myList.get(iTmp));
                System.out.println();
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:35:59.170

对我来说这听起来很简单：

*   将每个值解析为更合适的类型（`Calendar`, `Date`, Joda Time's [`LocalDate`](http://joda-time.sf.net)）
*   按自然顺序排序

（使用 Joda Time 是 IMO 的首选选项，因为既不`Calendar`也不`Date`真正代表“只是一个日期”；您必须将所有值放入同一时区等。）

我绝对*不*建议尝试将它们*作为字符串*进行比较。像往常一样，尽可能早地将您的数据转换为最适合它试图表示的信息的类型 - 并尽可能晚地将其转换为序列化表示（例如，用于存储、传播到 Web 服务等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:35:24.247

拆分字符串，然后

您可以使用公历日历（内置）

或者你可以使用 yoda-time 图书馆

我不能说更多关于排序的事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:49:19.773

如果您正在为 Android 开发（您的问题上有一个 Android 标签），那么您应该了解 Android SDK 中的[时间](http://developer.android.com/reference/android/text/format/Time.html)结构和方法。

如果可能，请尝试使用本身可以自然排序的日期/时间戳的字符串表示形式，例如[RFC 3339](http://www.ietf.org/rfc/rfc3339.txt)格式（Android 通过内置方法支持）。这将使您更轻松地使用字符串时间戳，并且如果需要，还可以为您提供一种简单的方法来转换为规范或整数类型格式。

# android - TextView 上的 NullPointerException

> ID：12856164
> 
> 赞同：-1
> 
> 时间：2012-10-12T09:33:21.927
> 
> 标签：android, layout, textview, nullpointerexception

每次我想使用 setText() 更新高分文本时，都会出现空指针异常并且程序崩溃。是什么导致了这个问题？
这段代码是当我设置我的布局时，布局是使用opengl的gameView的一部分，我把高分文本视图放在左上角

```
public void onCreate(Bundle savedInstanceState) {
    SFEngine.display = ((WindowManager)getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();//ambl ukuran width height layar
    super.onCreate(savedInstanceState);
    gameView = new SFGameView(this);
    gameView.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

    RelativeLayout layout = new RelativeLayout(this);
    layout.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

    TextView textBox = new TextView(this);
    textBox.setId(1);
    textBox.setText("HIGH SCORE");
    textBox.setBackgroundColor(Color.BLUE);
    textBox.setWidth(SFEngine.display.getWidth()/2);
    textBox.setHeight(50);
    Button pauseButton = new Button(this);
    pauseButton.setText("PAUSE");
    pauseButton.setHeight(50);
    pauseButton.setWidth(SFEngine.display.getWidth()/2);
    pauseButton.setOnTouchListener(new OnTouchListener(){
        public boolean onTouch(View v, MotionEvent e) {
            //pause game
            SFEngine.isPlaying = false;
            Intent i1 = new Intent(SFGames.this, pause.class);
            gameView.onPause();
            startActivityForResult(i1,0);//hrs pk result soalny mw blk lg
            return true;
        }
    });

    RelativeLayout.LayoutParams lp_pause = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);

    RelativeLayout.LayoutParams lp_hs = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);

    lp_hs.addRule(RelativeLayout.ALIGN_PARENT_LEFT);

    lp_pause.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    lp_pause.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);

    textBox.setLayoutParams(lp_hs);
    pauseButton.setLayoutParams(lp_pause);

    layout.addView(gameView);
    layout.addView(textBox);        
    layout.addView(pauseButton);
    setContentView(layout); 
```

这是setText代码

```
public boolean onTouchEvent (MotionEvent event){//buat nerima input user
    if(!SFEngine.isPlaying){
        finish();
    }
    textBox.setText("High Score :" + SFEngine.score);//here is the source of the prob
..... 
```

错误日志：

```
 10-13 22:38:34.207: E/AndroidRuntime(528): FATAL EXCEPTION: main
10-13 22:38:34.207: E/AndroidRuntime(528): java.lang.NullPointerException
10-13 22:38:34.207: E/AndroidRuntime(528):  at com.starfighter.SFGames.onTouchEvent(SFGames.java:136)
10-13 22:38:34.207: E/AndroidRuntime(528):  at  android.app.Activity.dispatchTouchEvent(Activity.java:2367) 
```

更新：我已经更新了源代码，所以 textview 声明在 onCreate 之外，它现在似乎工作正常..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:37:21.020

您应该将文本视图定义为活动中的类字段，在`onCreate`：

```
TextView textBox;

public void onCreate(Bundle savedInstanceState) {
    ....
    textBox = new TextView(this);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:37:57.973

你`textBox`是`onCreate()`方法中的一个局部变量。我认为您也有一个同名的成员变量。所以你实际上用错了。

尝试删除`TextView`您的`onCreate()`

```
// in onCreate
textBox = new TextView(this);
textBox.setId(1);
textBox.setText("HIGH SCORE"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:38:45.147

将 TextView 声明放在 onCreate() 之外

```
TextView textBox;

public void onCreate(Bundle savedInstanceState) {
    textBox = (TextView)findViewById(id.TextBoxNameFromLayout);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-12T09:37:33.943

您的文本框应定义为全局变量。

像这样

```
class MyActivity extends Activity{
    TextView textBox = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        ...
        textBox = new TextView(this); 
```

# javascript - 将jsp列表的第一个元素传递给javascript

> ID：12856165
> 
> 赞同：0
> 
> 时间：2012-10-12T09:33:23.887
> 
> 标签：javascript, jsp, jstl, el

好的，所以我正在尝试访问 JSP 列表的第一个元素，

这是我到目前为止没有任何运气的想法：

`onclick="alert('<%=list[0]%>');"`

访问第一个元素并最终将其传递给 javascript 变量/函数的最佳方法是什么？

我听说`<% %>`标签已被弃用，有些人建议在 JSTL/EL 上中继，如何使用这些标签而不必迭代整个列表并为迭代器设置断点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:37:50.580

如果您事先知道您总是需要第一个元素，您可以删除列表的第一个元素并将其放入请求属性本身。然后使用 request.getAttribute()
所以不用理会 JSTL。

或者如果你想使用 EL，${list[0]} 应该可以工作。

# php - 研究和替换 Word Rtf

> ID：12856177
> 
> 赞同：2
> 
> 时间：2012-10-12T09:34:15.060
> 
> 标签：php, regex, word, rtf

我正在开发一个具有邮政邮件工作流程的应用程序。这些邮件是根据我的应用业务规则生成的。

模型在 html 或 Rtf 中，只要用户不使用 word 创建 rtf，它就可以完美地工作。这不在规范范围内，但如果不涉及太多工作，我的层次结构会欢迎 Word 兼容性，它会取悦并简化我们客户的生活。

Rtf 模型具有由应用程序值替换的标签。在大多数 RTF 中，标签没有被分割，因此搜索和替换工作完美。我希望通过少量修改来处理单词。

示例数据： [[FooBuzz]] 在大多数 rtf 中它没有被拆分。

在 2003 年的单词中：

```
{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 [[}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid2708730 FooBuzz}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 ]]} 
```

他们的话（word 2007）也分裂了 Foo{garbage inside} Buzz。

所以我希望能够完美地处理常见的 RTF，并检测标签，即使它们被分割了。

我有2个限制。首先没有回归，其次它必须保持简单。性能在这里不是问题。

我正在使用 symfony 1.4。实际相关研究代码部分：

```
$regExpression = '/\[\[([^\[\]]*)\]\]/';  

preg_match_all($regExpression, $sTemplate, $outKeys); 
```

**更新 ：**

我想我最需要完善这个正则表达式。我正在研究一些正则表达式，但他们仍然需要一些改进：

```
/([\a-zA-Z0-9]+)/ 
```

生产 ：

```
[0] => Array
    (
        [0] => \rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 [[
        [1] => \rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid2708730 FooBuzz
        [2] => \rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 ]]
    ) 
```

**更新 2：**

我仍然对正则表达式有一些问题。它实际上为第一个找到标签值和纯文本。我不确定在合理的时间内我想要什么。

我需要修改正则表达式，所以她得到了相同的结果，但在 [[ ]] 内部，它实际上也适用于纯文本。

更难的是，我必须能够通过我必须做的任何事情来捕获我的所有示例数据（但不是纯文本）。

对于我的替换正则表达式，它替换了我的标签和所有垃圾。我几乎成功了：

```
/{.*?\[\[.*(?<!\\)\w+\b.*\]\].*?}/ 
```

但是太贪心了。我想匹配组 { [[}{tag}{ ]]} 并且它匹配 {plain text}{ [[}{tag}{ ]]}{plain text}

我添加 ? 因为我读过它会使 .* 不贪婪，但它不起作用。有任何想法吗 ？

我不明白这个正则表达式有什么问题（标签查找的名称）：

```
\[\[(\b(?<!\\)\w+\b)\]\] 
```

根据我的理解。它说在 [[ ]] 内，找到任何不以反斜杠开头的单词，后跟任何单词字符。我对吗 ？

**更新 3：**

对不起，我不清楚。

我的第一个正则表达式旨在捕捉 [[FooBuzz]] 中的 FooBuzz。以及第二次抓住 [[FooBuzz]]。所以在第一个正则表达式中，我只想捕获文本 FooBuzz，而忽略其他所有内容（如 {} \eoeoe）。

其次，我必须完全替换 [[FooBuzz]]。所以我必须抓住 {[[}{FooBuzz}}{]]} 仅此而已。

实际上我正在捕捉{我不能捕捉的纯文本} {[[}{FooBuzz}}{]]}}。看我在这里也必须抓到。我正在捕捉：纯文本我不能捕捉 [[FooBuzz]]。

对于 [[ 部分，我只需要抓住这个：{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 [[}。我想那是因为他找不到不贪心的匹配。所以他处于贪婪模式。并以这个数据样本失败：

```
{\toto toto}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 [[}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid2708730 FooBuzz}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 ]]}{\toto toto} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:37:34.597

编辑后，查找 FooBuzz 或您可以搜索的任何其他标签

```
(?<=\[\[).+?\b(?<!\\)(\w+)\b(?=.+?\]\]) 
```

并匹配第一组。

它找到一个前面没有`\`使用否定lookbehind的整个单词`(?<!\\)`也告诉它需要在它前面`[[`和后面`]]`

[这](http://rubular.com/r/wm7vobi4fr)是一个示例，您可以看到第一组正确包含`FooBar`:)

为了更好地理解 RTF ，[我找到了一个很好的链接](http://latex2rtf.sourceforge.net/rtfspec_45.html)，我认为您也可以考虑使用非正则表达式方法，即使在这种情况下我没有任何线索。

编辑：

您的最后一个正则表达式是错误的，因为它期望`\w+`在最后一个方括号之后正好有一个，它只会匹配类似`[[wordWithoutSpaces]]`.

第一个“update 1”正则表达式正确匹配整个字符串，你说：“从第一个开始`{`，找到所有东西”。让我们来看看：

*   `{.*?\[\[`匹配和之间`{`的所有内容`[[`
*   `.*(?<!\\)\w+\b`匹配前面没有反斜杠`[[`的第一个单词字符之后和之前的所有内容（可能在这里你想要一个在否定的lookbehind和之前）`\w``\b``\w`
*   `.*\]\].*?}/`匹配和你找到`]]`的第一个之间的所有内容（非贪婪）`}`

但是如果要匹配单个部分，则需要创建不同的匹配项或不同的组

**编辑**：

因为只有一个正则表达式可以合并两个正则表达式，所以这个答案是：

```
{[^{]?[[.(?<=[[).+?\b(?]].?} 
```

`Preg_match_all`将返回 2 个标签。1 包含与正则表达式匹配的数据，第二个包含标签。

然后由于 strtr 功能，只有与翻译匹配的标签被替换。（工作流程中的 3 轮）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:16:48.870

以防有些人遇到同样的问题。更好的全球解决方案。文字的 RTF 表示取决于……警察。因此，在 time new roman 中对 [[FooBuzz]] 进行简单的文本搜索即可。但是在 Arial 中，这个词是爆炸式的，你需要一个聪明的正则表达式。

例子 ：

```
Police                Text                                RTF
 Times new roman        [[FooBuzz]]                       {\someRtfTags [[FooBuzz]]}
  Arial                 [[FooBuzz]]                         {\hich\af1\dbch\af12\loch\f1 [[Signature}{\rtlch\fcs1 \af0 \ltrch\fcs0 \i\insrsid15225063 \hich\af1\dbch\af12\loch\f1 President}{\rtlch\fcs1 \af0 \ltrch\fcs0 \i\insrsid1974114\charrsid1974114 \hich\af1\dbch\af12\loch\f1 ]]} 
```

所以使用 Times new Roman 作为标签。

# compiler-construction - 在不同的二进制文件上使用相同的所有寄存器吗？

> ID：12856182
> 
> 赞同：0
> 
> 时间：2012-10-12T09:34:38.200
> 
> 标签：compiler-construction, dalvik

当您在 Java 中编写一个方法然后将其编译为 dalvik 时，是否确定所有正在使用的寄存器在我生成的每个二进制文件上都是相同的（例如在不同的机器上但使用相同的编译器）？

那么可以确定寄存器值总是以相同的顺序应用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:11:36.007

无法保证 dx 将使用确定性算法来选择寄存器。我怀疑它们通常是相同的，但你不应该依赖于此。

实际上，您通常根本不需要考虑 dalvik 寄存器，但我会给您带来疑问。

# android - Android键盘无法点击视图

> ID：12856186
> 
> 赞同：0
> 
> 时间：2012-10-12T09:35:00.497
> 
> 标签：android, input, keyboard

我正在开发一个基于 android LatinIME 的键盘，问题是我无法点击 InputView 后面的任何内容。（例如，在 android 键盘中，此视图在进行 google 搜索时是可见且可点击的）。

准确地说，这是可以从 input-view.xml 在原始键盘中单击的视图

```
 <View
    android:id="@+id/key_preview_backing"
    android:layout_width="match_parent"
    android:layout_height="@dimen/key_preview_backing_height" /> 
```

我通过将 LatinIMELogger.java 中的 sVISUALDEBUG 设置为 true 来打开可视化调试，所以我可以看到这些是透明的红色。

关于什么可以被打破的任何可能的建议，所以它以这种方式工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:14:58.883

我解决了这个问题。问题在于兼容性。`InputMethodService.Insets`在 android 2.1 中不支持`TOUCHABLE_INSETS_REGION`常量，所以我不得不更改它`TOUCHABLE_INSETS_VISIBLE`以启用点击我的键盘的不可见视图（即`SuggestionsView`）

# postgresql - Postgresql -> 来自简单更新的死锁。我找不到原因

> ID：12856192
> 
> 赞同：8
> 
> 时间：2012-10-12T09:35:22.343
> 
> 标签：postgresql, deadlock, database-deadlocks

这是表格（简化）：

```
                                       表“public.link”
    专栏 | 类型 | 修饰符                     
---------------+------------------+---- -----------------------------------------------------------
 编号 | 整数 | 不为空默认 nextval('link_id_seq'::regclass)
 page_id | 整数 |
 放置_at | 没有时区的时间戳| 现在默认（）
索引：
    "link_pkey" 主键，btree (id)
    "link_page_id_index" btree (page_id)
外键约束：
    "link_page_id_foreign_key" FOREIGN KEY (page_id) REFERENCES page(id) ON UPDATE RESTRICT ON DELETE RESTRICT

```

这是查询（简化）：

```
更新链接 SET page_id = ?，placed_at = now() 
WHERE id IN (SELECT id FROM link ...) AND page_id IS NOT NULL

```

死锁消息：

```
错误：检测到死锁
  详细信息：进程 5822 等待事务 19705 上的 ShareLock；被进程 5821 阻止。
进程 5821 等待事务 19706 上的 ShareLock；被进程 5822 阻止。
  提示：查询详情请查看服务器日志。

```

**由多个进程并行执行的查询如何导致死锁？**
谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-12T11:56:45.853

会话 A 尝试更新 id 10、2、30、4，会话 B 尝试更新 40、30、20、10

他们都尝试锁定各自的行以准备更新，A 获得 10 并等待 30，而 B 获得 30 并等待 10。死锁。

您的基本问题是您试图在并发事务中更新（某些）相同的 id。

如果不知道您的数据库结构以及您正在尝试做什么，就很难提出最佳解决方案。通常，您要么确保不同的后端不更新相同的行，要么减少超时并在随机暂停后重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-06T21:13:33.313

在大多数情况下，由于行之间的循环等待会更新死锁，所以如果你想解决死锁，你可以简单地对你想更新的行使用排序

```
UPDATE link SET page_id = ?, placed_at = now() 
WHERE id IN ( SELECT id FROM link ... order by page_id ) AND page_id IS NOT NULL 
```

# c# - javascript中代码后面的按钮单击事件

> ID：12856196
> 
> 赞同：0
> 
> 时间：2012-10-12T09:35:30.050
> 
> 标签：c#, c#-3.0

我正在尝试实现一个按钮单击事件并尝试在我的 java 脚本函数中调用它而不实际单击该按钮。

```
protected void btn_hid_Click(object sender, EventArgs e) {

        string fbid = tb_id.Text;
        query = "select userid from users where fbid='" + fbid + "'";
        ds = db.SelectDs(query);

    } 
```

现在我想在页面加载发生并调用 java 脚本后立即在 javascript 函数中调用此函数。

```
function func() {

 alert("hiden");
 $(document).ready(function () {
                   control or simple html control
                   $("[id*='btn_hid']").click();
                  });
 alert("hiden end");
} 
```

但这没有发生。您能告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:40:47.427

您可以尝试使用此代码

```
 btn_hid.Attributes.Add("onclick","return YourFunction()"); 
```

注意：如果您还希望动态注册您的脚本，您可以使用

```
var script = "";
Page.RegisterStartupScript("YourkeyOfScript",script); 
```

注意：您也可以`OnClientClick`在您的界面中使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:40:36.753

你的代码是对的。但这可能是一些问题。您可以尝试使用备用代码。

使用以下代码行。

```
__doPostBack('<%= btn_hid.ClientID %>', '') 
```

# entity-framework - 可选实体框架复杂类型的必需属性

> ID：12856202
> 
> 赞同：10
> 
> 时间：2012-10-12T09:36:05.183
> 
> 标签：entity-framework, entity-framework-5

我想`[Required]`在实体框架中定义复杂类型的属性。例如，我有一个`Customer`带有可选的实体`Address`。Address 实体具有必需的`PostCode`属性。

```
[ComplexType]
public class Address {
    public string Address1 { get; set; }
    [Required]
    public string PostCode { get; set; }
}

public class Customer {
    public int CustomerId {get;set;}
    public Address Address {get;set;}
} 
```

我不想将我的 Complex 类型存储为单独的实体（我实际上并没有使用 Address，这只是问题的一个简单说明）。我不能让 Customer.Address 为空，因为这会产生错误：

> 不可为空的成员的空值。成员：'地址'。

如果我提供一个空的地址实体，则 PostCode 字段上的验证会因为Required 属性而失败。

有什么办法可以做到这一点？我正在使用 EF5/NET4.5。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T11:18:09.013

复杂类型是不可能的。如果您希望它可以为空，则需要创建一个地址实体。

EF 将对复杂类型执行的操作是将属性映射到同一个表 - 这听起来像是您的意图。

因此 - 您的示例架构将如下所示：

![在此处输入图像描述](../Images/224cd399b8fea963983f7b2c4f286fba.png)

对于 Address_PostCode 的不可为空的列，由于它在数据库中无效，因此 EF 无法在您的对象没有地址和邮政编码的情况下创建行。

# iphone - 多按钮、多视图的相同 UIalertview

> ID：12856203
> 
> 赞同：0
> 
> 时间：2012-10-12T09:36:08.333
> 
> 标签：iphone, ios, uialertview

在我的应用程序中，我有 4 个 UI 按钮。单击显示相同警报视图的每个按钮包含学习和播放选项，在单击警报视图时，想要显示不同的视图取决于 uibutton 选择。这是我的警报视图代码。请帮我在点击选项上执行不同的视图。

```
-(IBAction)animals
{
UIAlertView *alert1=[[UIAlertView alloc]initWithTitle:@"" message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:@"LEARN",@"PLAY",@"CANCEL",nil];     
[alert1 show];
}
-(IBAction)birds
{
UIAlertView *alert2=[[UIAlertView alloc]initWithTitle:@"" message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:@"LEARN",@"PLAY",@"CANCEL",nil];
[alert2 show];    
}
-(IBAction)direct
{ 
UIAlertView *alert3=[[UIAlertView alloc]initWithTitle:@"" message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:@"LEARN",@"PLAY",@"CANCEL",nil];
[alert3 show];
}
-(IBAction)fruit
{
UIAlertView *alert4=[[UIAlertView alloc]initWithTitle:@"" message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:@"LEARN",@"PLAY",@"CANCEL",nil];
[alert4 show];
}
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
NSString *buttonTitle=[alertView buttonTitleAtIndex:buttonIndex];

if ([buttonTitle isEqualToString:@"LEARN"]) 
{

    animallearn *aview=[[animallearn alloc]initWithNibName:@"animallearn" bundle:nil];
    [self.navigationController pushViewController:aview animated:YES];
}
else if([buttonTitle isEqualToString:@"PLAY"])
{ 
    birdslearn *bview=[[birdslearn alloc]initWithNibName:@"birdslearn" bundle:nil];
    [self.navigationController pushViewController:bview animated:YES];
 }
else
{
    return;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:43:01.383

您有 UIAlertView 的标签属性。这是一个整数。您应该为您的标签分配不同的值。

```
-(IBAction)direct
{ 
  UIAlertView *alert3=[[UIAlertView alloc]initWithTitle:@"" message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:@"LEARN",@"PLAY",@"CANCEL",nil];
  [alert3 setTag:3];
  [alert3 show];
} 
```

然后 clickedButtonAtIndex 委托方法，您应该观察当前警报视图的标记：

```
if(alertView.tag == 3) //etc ... 
```

而且我不知道您是否正在使用 ARC，但如果没有，您必须在实例化警报视图时添加自动释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:44:11.027

```
-(IBAction)animals
{
    UIAlertView *alert1=[[UIAlertView alloc]initWithTitle:@"" message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:@"LEARN",@"PLAY",@"CANCEL",nil];     
    alert1.tag = 1;  
    [alert1 show];
}
-(IBAction)birds
{
    UIAlertView *alert2=[[UIAlertView alloc]initWithTitle:@"" message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:@"LEARN",@"PLAY",@"CANCEL",nil];
    alert2.tag = 2;  
    [alert2 show];    
}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *buttonTitle=[alertView buttonTitleAtIndex:buttonIndex];

    if(alertView.tag == 1)
    {
            //animal alert
    }
    else if(alertView.tag == 2)
    {
            //birds alert
    }
    // and so on......
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:46:24.170

声明你的`UIAlertView`全局然后你可以将它们与`UIAlertView`委托对象进行比较，如下所示 -

```
 UIAlertView *alert1;
 UIAlertView *alert2;

-(IBAction)animals
{
   alert1=[[UIAlertView alloc]initWithTitle:@"" message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:@"LEARN",@"PLAY",@"CANCEL",nil];     
   [alert1 show];
}

-(IBAction)birds
{
    alert2=[[UIAlertView alloc]initWithTitle:@"" message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:@"LEARN",@"PLAY",@"CANCEL",nil]; 
    [alert2 show];    
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
   if(alertView ==alert1)
  {
    if (buttonIndex==1)
    {

    }
    if(buttonIndex == 2)
    {

    }
 }    

if(alertView == alert2)
{
    if (buttonIndex==1) 
    {

    }
} 
```

根据这个你不需要标签:)只需使用条件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T09:48:56.953

```
-(IBAction)animals
{
    UIAlertView *alert1=[[UIAlertView alloc]initWithTitle:@"" message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:@"LEARN",@"PLAY",@"CANCEL",nil];
    [alert1 show];
    [alert1 setTag:101];
 }
-(IBAction)birds
{
    UIAlertView *alert2=[[UIAlertView alloc]initWithTitle:@"" message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:@"LEARN",@"PLAY",@"CANCEL",nil];
    [alert2 show];
    [alert2 setTag:102];
 }

-(IBAction)direct
{
    UIAlertView *alert3=[[UIAlertView alloc]initWithTitle:@"" message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:@"LEARN",@"PLAY",@"CANCEL",nil];
    [alert3 show];
    [alert3 setTag:103];
 }

-(IBAction)fruit
{
    UIAlertView *alert4=[[UIAlertView alloc]initWithTitle:@"" message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:@"LEARN",@"PLAY",@"CANCEL",nil];
    [alert4 show];
    [alert4 setTag:104];
 }

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

    // learn has indextag = 0 ,play =1 cancel = 2

    NSString *buttonTitle=[alertView buttonTitleAtIndex:buttonIndex];

    if (alertView.tag == 101) {

    switch (buttonIndex) {
        case 0:
            animallearn *aview=[[animallearn alloc]initWithNibName:@"animallearn" bundle:nil];
            [self.navigationController pushViewController:aview animated:YES];

            break;
        case 1:
            birdslearn *bview=[[birdslearn alloc]initWithNibName:@"birdslearn" bundle:nil];
            [self.navigationController pushViewController:bview animated:YES];

            break;

        case 2:
            return;
            break;

        default:
            break;
    }

         }

    if (alertView.tag == 102) {

        switch (buttonIndex) {
            case 0:
                animallearn *aview=[[animallearn alloc]initWithNibName:@"animallearn" bundle:nil];
                [self.navigationController pushViewController:aview animated:YES];

                break;
            case 1:
                birdslearn *bview=[[birdslearn alloc]initWithNibName:@"birdslearn" bundle:nil];
                [self.navigationController pushViewController:bview animated:YES];

                break;

            case 2:
                return;
                break;

            default:
                break;
        }

    }

    // perform the same for tag = 103 and 104
} 
```

# magento - 如何在 Magento 中为普通客户和批发商显示不同的登录页面？

> ID：12856204
> 
> 赞同：0
> 
> 时间：2012-10-12T09:36:12.057
> 
> 标签：magento, registration

我需要在前端为普通客户组和批发商客户组保留 2 个登录页面

管理员将确认客户为批发商

那么如何检查客户是否已注册为一般或批发商

请指教..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:55:44.950

目前magento为客户提供组，因此您可以在注册页面中放置组下拉列表供用户选择他想要注册的组，并且在管理员中您可以看到分配给用户的组。

# php - 从链接复制文件时更改错误消息

> ID：12856205
> 
> 赞同：1
> 
> 时间：2012-10-12T09:36:15.747
> 
> 标签：php

我想从链接中复制一些文档文件。但是，有时存在我们无权访问的链接或链接已过期。对于我们没有权限的链接，有解决办法吗？我想在它发生时更改错误消息，我得到的错误消息是：

```
Warning: copy(http://www-cgi.cs.cmu.edu/afs/cs.cmu.edu/Web/People/ngm/15-721/summaries/12.pdf) [function.copy]: failed to open stream: HTTP request failed! HTTP/1.1 403 Forbidden in D:\AppServ\www\academicopter\functionWrapper.php on line 33 
```

我尝试使用（`or die ('CANNOT COPY')`）以下代码更改错误消息：

```
copy($Link, $savePath . basename($Link)) or die ('CANNOT COPY'); 
```

但是，错误信息仍然相同`warning .....`如何更改它？谢谢你 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:38:16.457

您可以使用运算符消除警告`@`。请注意，它仍会运行您可能已配置的任何自定义错误处理程序。

```
if (false === @copy(...)) {
    // copy failed
} 
```

AFAIK 没有其他方法可以消除警告，除非您使用 cURL 来复制文件。

**编辑**

您也可以使用`get_headers($url)`并查找`HTTP/x.x 403`. 这是另一个要求，我个人会为自己省去麻烦:)

# websphere-7 - 解决 WebSphere Commerce 实例创建中的大量加载问题

> ID：12856207
> 
> 赞同：0
> 
> 时间：2012-10-12T09:36:25.547
> 
> 标签：websphere-7, websphere-commerce, wcs

我正在尝试使用 WCS 7 的配置管理器创建一个实例。我正在使用 DB2 9.5 64 位版本的 Win 7 x64 机器。

当实例创建发生时，我对这个 Massloading 错误感到震惊：

在 createInstanceANT.log 文件中：

> [Massload] Massloading C:\IBM\WebSphere\CommerceServer\schema\xml\wcs.keys.xml MassLoading 出错，详情请查看日志。

错误日志显示以下错误：

> [jcc][10165][10044][4.3.111]**无效的数据库 URL 语法：jdbc:db2://:0/WCSDEMO。ERRORCODE=-4461, SQLSTATE=42815** C:\IBM\WEBSPH~1\COMMER~2\config\DEPLOY~1\xml\createBaseSchema.xml:185: 批量加载错误

WCSDEMO 是数据库名称。Massloader 无法获取要连接的 URL 和端口。据说是从 createInstance.properties 文件中获取它们，但它不起作用。createInstance.properties 文件包含要连接的数据库的所有详细信息。

此错误的原因可能是什么以及如何解决？我缺少任何配置更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-09T10:01:41.740

我一直遇到外部系统的大量加载问题。例如。数据库与 WAS 安装不在同一台机器上。

在这些情况下，我寻找

如您所见，将 loaderDBName 设置为仅在本地计算机上显示的数据库名称。但是通过更改此语句，您可以使用语法加载

loaderDBName=[DATABASE_SERVER_NAME]:[PORT]/[DATABASE_NAME]

您将能够使用商业标准脚本进行批量加载。这些更改需要在许多脚本中完成。用于更新修订包和启用功能。如果您在没有更改的情况下运行数据库更新，它将首先崩溃并且已经对数据库进行了所有架构更改，然后您需要在重试之前将其注释掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:24:24.653

您能否提供更多详细信息。

查看位于 WC_install_dir/instances/instance_name/logs 中的 messages.txt 文件并确认确切的问题是什么。如果它与 jdbc 驱动程序错误有关，我可以帮助你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T00:48:41.600

IBM 软件支持是您的朋友。他们会帮你解决的。

# javascript - 阻止 Javascript 在 Safari 中执行

> ID：12856211
> 
> 赞同：0
> 
> 时间：2012-10-12T09:36:37.083
> 
> 标签：javascript, safari, smooth-scrolling

下面的平滑滚动脚本弄乱了我在 Safari 中的导航（锚标签不再起作用）。我是 Javascript 新手，谁能告诉我如何在这个脚本中检测 Safari 并阻止它在检测到 Safari 时执行？非常感谢！

```
// JavaScript Document
$(document).ready(function() {
  function filterPath(string) {
  return string
    .replace(/^\//,'')
    .replace(/(index|default).[a-zA-Z]{3,4}$/,'')
    .replace(/\/$/,'');
  }
  var locationPath = filterPath(location.pathname);
  var scrollElem = scrollableElement('html', 'body');

  $('a[href*=#]').each(function() {
    var thisPath = filterPath(this.pathname) || locationPath;
    if (  locationPath == thisPath
    && (location.hostname == this.hostname || !this.hostname)
    && this.hash.replace(/#/,'') ) {
      var $target = $(this.hash), target = this.hash;
      if (target) {
        var targetOffset = $target.offset().top;
        $(this).click(function(event) {
          event.preventDefault();
          $(scrollElem).animate({scrollTop: targetOffset}, 1300, function() { // scroll speed
            location.hash = target;
          });
        });
      }
    }
  });

  // use the first element that is "scrollable"
  function scrollableElement(els) {
    for (var i = 0, argLength = arguments.length; i <argLength; i++) {
      var el = arguments[i],
          $scrollElement = $(el);
      if ($scrollElement.scrollTop()> 0) {
        return el;
      } else {
        $scrollElement.scrollTop(1);
        var isScrollable = $scrollElement.scrollTop()> 0;
        $scrollElement.scrollTop(0);
        if (isScrollable) {
          return el;
        }
      }
    }
    return [];
  }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:39:59.810

参考：[http](http://api.jquery.com/jQuery.browser/) ://api.jquery.com/jQuery.browser/ ，检测浏览器并仅在不是 safari 时执行脚本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:41:03.297

```
var isSafari = navigator.userAgent.indexOf("Safari") > -1 && navigator.userAgent.indexOf("Chrome") == -1;
if(!isSafari){
    // do your magic
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:47:17.873

也许是这样：

```
$(document).ready(function()
{
    if (navigator.appVersion.match(/WebKit/) && !navigator.vendor.match(/Google/))
    {
        return;
    }
    //rest of your code
}); 
```

如果您在 $(document).ready 回调之外有任何代码，则可以通过在脚本顶部编写以下代码来抛出错误来终止脚本：

```
if (navigator.appVersion.match(/WebKit/) && !navigator.vendor.match(/Google/))
{
    throw new Error('Safari not supported');
} 
```

# android - 在android中同时从NDK写入和读取文件

> ID：12856215
> 
> 赞同：0
> 
> 时间：2012-10-12T09:36:46.823
> 
> 标签：android, android-ndk, android-file

我正在使用 android-ndk 写入文件。因此，写入文件是使用本机 c 代码进行的。

它包含一些我正在使用 ndk 的读数。单击按钮开始写入文件。同时我想读取文件的内容并将它们用于另一个线程以显示值，因为写入操作可能会持续 15 秒，用户将不得不等待很长时间才能看到结果，所以我想通过一个，只要我把它放进那个文件。

是否可行，如果可以，可以告诉我如何去做吗？

好吧，我从它开始，现在我是怎么做的，，

```
Thread thr1 = new Thread(r1);
Thread thr2 = new Thread(r2);
thr1.start();
thr2.start();

r1 = new Runnable() {
          public void run() {
            File sdcard= Environment.getExternalStorageDirectory();
            nativeFunction(sdcard +"/readings.txt");
            //takingReading=false;
            readingFile = new File(sdcard +"/readings.txt");

            Log.i("length of file", ""+readingFile.length());
          }
        };

r2 = new Runnable() {
          public void run() {
            try {

                  Thread.sleep(3000);
                  File sdcard= Environment.getExternalStorageDirectory();

                readingFile = new File(sdcard +"/readings.txt");

                Log.i("length of file", ""+readingFile.length());

            } catch (InterruptedException iex) {}
          }
        }; 
```

nativeFunction 打开

```
file= fopen(location,"w+"); 
```

这个函数继续在文件中写东西大约 2 分钟，但我需要不断地获取通过本机函数输入的值，所以我启动了第二个线程，但是当我检查 file.length() 时它始终为 0。

当 nativefunction 写入完成时，就会出现实际的文件大小。那么如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:02:56.373

这应该可以使用 pthreads 来实现。因此，您需要生成 2 个线程，一个用于写入，另一个用于读取。如果您从同一个文件中执行此操作，您可能会遇到竞争条件，所以要小心。

有关 pthreads 的更多信息，请谷歌。它被 Linux 世界广泛使用。

# apache-flex - Flex中高级网格中树列的展开和折叠

> ID：12856220
> 
> 赞同：0
> 
> 时间：2012-10-12T09:37:05.613
> 
> 标签：apache-flex, tree, expand, collapse, advanceddatagrid

谁能说我如何在特定父级下的 Flex 中的 advancedGrid 中展开和折叠 treeColumn 值。我只想展开和折叠网格中特定父节点下的子节点。在此先感谢毗湿奴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:33:34.803

您可以展开/折叠特定项目，只需将此声明提供给您的广告：

```
adg.expandItem(<your_item>, !adg.isItemOpen(<your_item>)) 
```

your_item 是您要在广告中展开/折叠的 dataProvider 项目

# regex - 使用 sed 更改配置的 Bash 脚本

> ID：12856229
> 
> 赞同：1
> 
> 时间：2012-10-12T09:37:37.100
> 
> 标签：regex, linux, bash, sed

我正在尝试通过 bash 脚本将 malloc 的值更改为 1234m，但没有看到任何更改。我认为这是我的正则表达式的问题，任何人都可以看到我做错了什么吗？

细绳

```
DAEMON_OPTS="-a :6081 \
             -T localhost:6082 \
             -f /etc/varnish/default.vcl \
             -S /etc/varnish/secret \
             -s malloc,256m" 
```

代码

```
# get the memory allocation
echo "Enter the memory allocation"
read malloc

# update the default config
sed -ie 's/malloc,.*[0-9m]$/malloc,'$malloc'/gI' /etc/default/varnish 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:41:54.947

您在 sed 模式中缺少`"`一个`$`。

顺便说一句，您的模式有效，但与您可能想要的方式不同：在这种情况下`[0-9m]`，字符类只匹配一个字符。`m`该号码正在被 匹配`.*`。更好的模式可能是`malloc,[0-9]\+m"$`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:46:06.437

试试这个 sed 命令：

在 Mac 上：

```
sed -E 's/malloc,[0-9]+m/malloc,'$malloc'/' /etc/default/varnish 
```

或在 Linux 上：

```
sed -r 's/malloc,[0-9]+m/malloc,'$malloc'/' /etc/default/varnish 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:53:31.937

以下`sed`行对我有用，将其包含在`"`而不是`'`：

```
 sed -ie "s/malloc,[0-9]\+m$/malloc,$malloc/gI" /etc/default/varnish 
```

# vbscript - 如果值被双引号括起来，如何拆分忽略的逗号

> ID：12856230
> 
> 赞同：0
> 
> 时间：2012-10-12T09:37:41.167
> 
> 标签：vbscript

如果值被双引号括起来，如何拆分忽略的逗号。

可用数据：

> 3545，Albert，“Mathias Albert、Lars-Erik Cederman 和 Alexander Wendt（编）”，2010

应该拆分成一个数组：

```
arr(0) = "3545"
arr(1) = "Mathias Albert, Lars-Erik Cederman and Alexander Wendt (eds)"
arr(2) = "2010" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:58:28.007

虽然从长远来看，使用 ADO 文本驱动程序可能是最好的方法，但您可以使用特定/自定义 RegExp 来获得快速而肮脏的“仅使用一次”脚本：

```
>> Set r = New RegExp
>> r.Pattern = "^([^,]+),([^,]+),""([^""]+)"",(.+)$"
>> s = "3545,Albert,""Mathias Albert, Lars-Erik Cederman and Alexander Wendt (eds)"",2010"
>> Set m = r.Execute(s)
>> ReDim a(3)
>> For i = 0 To UBound(a)
>>     a(i) = m(0).SubMatches(i)
>> Next
>> WScript.Echo Join(a, vbCrLf)
>>
3545
Albert
Mathias Albert, Lars-Erik Cederman and Alexander Wendt (eds)
2010
>> 
```

为了处理空字段，.Pattern 需要进一步摆弄。

如果你喜欢`Split()`，像这样：

```
>> s = "3545,Albert,""Mathias Albert, Lars-Erik Cederman and Alexander Wendt (eds)"",2010"
>> ReDim a(3)
>> q = Split(s, """")
>> WScript.Echo Join(q, vbCrLf)
>>
3545,Albert,
Mathias Albert, Lars-Erik Cederman and Alexander Wendt (eds)
,2010
>> c = Split(q(0), ",")
>> WScript.Echo Join(c, vbCrLf)
>>
3545
Albert

>> a(0) = c(0)
>> a(1) = c(1)
>> a(2) = q(1)
>> a(3) = Mid(q(2), 2)
>> WScript.Echo Join(a, vbCrLf)
>>
3545
Albert
Mathias Albert, Lars-Erik Cederman and Alexander Wendt (eds)
2010
>> 
```

应该让你开始。

# google-maps-api-3 - Google Places Api：无法显示所有搜索结果

> ID：12856232
> 
> 赞同：2
> 
> 时间：2012-10-12T09:37:45.603
> 
> 标签：google-maps-api-3, google-places-api

我无法显示从 Google Places Api 请求的所有结果。

```
var Latlng = new google.maps.LatLng(Latitute, Longitute);
        map = new google.maps.Map(document.getElementById('map_canvas'), {
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    center: Latlng,
                    zoom: 10});
        var request = {location: Latlng,types: [type]};
        var service = new google.maps.places.PlacesService(map);
        service.search(request, callback);
  }

  function callback(results,status,pagination) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < results.length; i++) {
        createMarker(results[i]);
        }
        if (pagination.hasNextPage) {
         pagination.nextPage(); }}}

   function createMarker(place) {
            var placeLoc = place.geometry.location;
            var marker = new google.maps.Marker({map: map,zIndex: 100,position: place.geometry.location});
            var request = {reference : place.reference,};
            service = new google.maps.places.PlacesService(map);
            service.getDetails(request, function detailsDisplay(details, status){
                if (status === google.maps.places.PlacesServiceStatus.OK) {
                    console.log(status);
                    $('#placesdata').append('<tr><td><a href='+details.url+'>' + details.name+ '</a></td></tr>');
                } else if (status === google.maps.GeocoderStatus.OVER_QUERY_LIMIT) {
                    setTimeout(function() {
                    createMarker(place);
                    }, 200);}});} }; 
```

我使用了分页并获得了 60 个结果，但使用 settimeout() 函数只能显示 20..和 40...得到以下错误：未捕获的类型错误：无法读取 null 的属性“长度”。有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:04:57.437

您很可能正在`OVER_QUERY_LIMIT`上线：

```
if (status == google.maps.places.PlacesServiceStatus.OK) 
```

因为您已经在创建标记，这会占用您的配额。

在完成所有列表后尝试将详细信息请求排队，并添加相同的超时逻辑以`google.maps.places.PlacesServiceStatus.OVER_QUERY_LIMIT` 在此行上进行检查。

例如你可以说：

```
if (pagination.hasNextPage) {
  //add all places to the list
  setTimeout('pagination.nextPage()',2000);
}  else {
  createMarkers(placesList);
} 
```

顺便提一句。Places 等效于 `google.maps.GeocoderStatus.OVER_QUERY_LIMIT`is `google.maps.places.PlacesServiceStatus.OVER_QUERY_LIMIT`，您应该在使用 Places 时使用它。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T11:58:42.417

我已经做了所有这些努力。感谢你们发帖，但我得到了解决方案。真的是一个很好的解决方案。请参阅下面的工作示例。

当你调用这个方法来检查它是否有页面时

```
if(pagination.hasNextPage){
    pagination.nextPage(); // let this do recursive loop against request.
} 
```

// 当 nextPage() 请求完成时

```
if(pagination.b == null){ 
```

// 这里 pagination.b 有下一页标记。所以它在最后一个请求发送时返回 null 。

```
createMarkers(placesList);

} 
```

# php - 生成带有图像的 Doc 文件

> ID：12856237
> 
> 赞同：2
> 
> 时间：2012-10-12T09:37:58.943
> 
> 标签：php, image, file, doc

```
<?php

    $docName = "testdoc";

    header("Expires: Mon, 26 Jul 2020 05:00:00 GMT"); 
    header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT"); 
    header("Cache-Control: no-store, no-cache, must-revalidate");
    header("Cache-Control: post-check=0, pre-check=0", false);
    header("Pragma: no-cache"); 

    header("Content-Type: application/msword; charset=ISO-8859-1");
    header("Content-Disposition: attachment; filename=\"".$docName.".doc"); 

    #/ Create and format your text using HTML, its simple stuff ... trial and error ;)
    echo '<img src="logo.gif" />';

?>

Soumya Sarkar 
```

嗨，我从 google 获得了以下代码，以通过 php 生成 Doc 文件。但我无法在那里放置任何图像。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:10:20.627

它需要链接，您需要在线托管图像才能在文档中显示图像。

试试这个，它正在工作： -

```
echo "<img src='http://i.imgur.com/MJ5Sa.jpg' />"; 
```

# c# - 未在 Visual Studio 中调试时应用程序挂起

> ID：12856241
> 
> 赞同：1
> 
> 时间：2012-10-12T09:38:03.670
> 
> 标签：c#, windows, microsoft-metro, windows-runtime

我有这个应用程序，它使用外部 Web 服务对用户进行身份验证，并且在通过身份验证后应该导航到不同的视图。

身份验证在 HttpWebRequest 中完成：

```
 private void btnLogin_Click(object sender, RoutedEventArgs e)
    {
        HttpWebRequest request = (HttpWebRequest)System.Net.WebRequest.Create("http://webservice");
        request.Method = "GET";
        request.BeginGetResponse(new AsyncCallback(CheckLogin), request);
    } 
```

然后这里是回调：

```
 private void CheckLogin(IAsyncResult asynchronousResult)
    {
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
        bool success = false;

        try
        {
            // End the operation
            HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
            Stream streamResponse = response.GetResponseStream();
            StreamReader streamRead = new StreamReader(streamResponse);
            string responseString = streamRead.ReadToEnd();
            if (responseString.Contains("ok"))
            {
                success = true;
            }

            streamResponse.Dispose();
            streamRead.Dispose();
            response.Dispose();
        }
        catch (Exception e)
        {

        }

        request.Abort();
        request = null;

        if (success)
        {
            this.Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () =>
            {
                Frame.Navigate(typeof(Main2));
            }).AsTask().Wait();
        }
    } 
```

这在 Visual Studio 中调试时运行良好，但是当我发布应用程序并安装包时，它挂在 Frame.Navigate 上。我猜这是因为 CheckLogin 方法没有在 UI 线程中运行。

关于如何在后台线程中 Frame.Navigate(..) 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:43:36.133

Dispatcher.RunAsync 和 Frame.Navigate 之间似乎没有真正的问题。所以我假设你没有朝着正确的方向寻找。

也许您的页面内容有问题，而不是导航。

# wpf - 用户控件中的 WPF 数据网格

> ID：12856245
> 
> 赞同：2
> 
> 时间：2012-10-12T09:38:19.413
> 
> 标签：wpf

```
 <DataGrid  Width="auto"  AutoGenerateColumns="False"  Name="dgData" >

        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding HODAppID}" Width="75" Header="HOD APPID" />
            <DataGridTextColumn Binding="{Binding Req}"   Header="CandidateID" Visibility="Hidden" />
            <DataGridTextColumn Binding="{Binding Req}"  Header="RequisitionNo" Visibility="Hidden" />
            <DataGridTextColumn Binding="{Binding Candidate}" Width="1.3*" Header="CANDIDATE NAME" />
            <DataGridTextColumn Binding="{Binding Req}" Width="*" MinWidth="200"  Header="REQUIREMENT"/>
            <DataGridTextColumn Binding="{Binding status}" Width="80" Header="Status" />
            <DataGridTextColumn Binding="{Binding daysopen}" Width="120" x:Name="noDays" Header="# of Days Open" /> 
```

嗨，我有一个数据网格，类似于上面的内容，我试图在 noDays 列中获取单元格值，并根据其中的值更改前景色。请在这方面提供帮助。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:47:15.823

使用创建转换器`IValueConverter`并将其添加到您的 noDays 列`Foreground`属性。转换器应该根据`daysopen`属性的值返回一个画笔值。

[http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)

**编辑：**

显然`IValueConverter`不能直接工作`DataGridTextColumn`。更多信息和示例可以在[http://social.msdn.microsoft.com/Forums/en/wpf/thread/77a9f317-d0be-4aed-9dc9-9917ad98ffc8](http://social.msdn.microsoft.com/Forums/en/wpf/thread/77a9f317-d0be-4aed-9dc9-9917ad98ffc8)找到。

# codeigniter - CodeIgniter 验证：使用 PHP 函数

> ID：12856251
> 
> 赞同：0
> 
> 时间：2012-10-12T09:38:41.653
> 
> 标签：codeigniter, codeigniter-2

我想`htmlentities`在我的 CI 验证/准备过程中使用它。CI 说我可以使用任何接受 1 个参数的函数，比如 htmlentities。但是，我实际上需要以这种方式使用它：

```
htmlentities($foo, ENT_COMPAT, 'UTF-8'); 
```

意思是，我需要传递标志和编码。有没有一种方法可以在不尝试创建回调的情况下进行 CI 验证的这一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:07:10.300

如果您扩展 form_validation 类，并将其添加为函数 - 那么您可以在所有验证中全局使用它。

```
public function htmlentities($str)
{       
       return htmlentities($str, ENT_COMPAT, 'UTF-8');
} 
```

然后像这样使用它

```
$this->form_validation->set_rules('text', 'Text', 'required|htmlentities'); 
```

# java - 是否可以在 JAVA 中以非字母顺序返回 SOAP 消息？

> ID：12856252
> 
> 赞同：2
> 
> 时间：2012-10-12T09:38:43.840
> 
> 标签：java, soap, alphabetical

我试图在我的肥皂返回消息中设置返回类型的顺序，但它一直按字母顺序打印出来。有没有办法改变我的返回类型的顺序？

我按 C、A、B 的顺序设置类型，但它总是打印出 ABC。

网络方法

```
@WebMethod(operationName = "Method")
    @WebResult(name="myType")    
    public MyType Method(@WebParam(name = "string1") String string1, @WebParam(name = "string2") String string2,@WebParam(name = "string3") String string3) {

        MyType mt = new MyType();

        mt.setC(string3);
        mt.setA(string1);
        mt.setB(string2);

        return mt;
    } 
```

MyType 类

```
public class MyType {

    private String a;
    private String b;
    private String c;

    public String getA() {
        return a;
    }

    public void setA(String a) {
        this.a = a;
    }

    public String getB() {
        return b;
    }

    public void setB(String b) {
        this.b = b;
    }

    public String getC() {
        return c;
    }

    public void setC(String c) {
        this.c = c;
    }

} 
```

当前的肥皂反应

```
<?xml version="1.0" encoding="UTF-8"?><S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
        <ns2:MethodResponse xmlns:ns2="http://bbb/">
            <myType>
                <a>one</a>
                <b>two</b>
                <c>three</c>
            </myType>
        </ns2:MethodResponse>
    </S:Body>
</S:Envelope> 
```

理想的肥皂反应

```
<?xml version="1.0" encoding="UTF-8"?><S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
        <ns2:MethodResponse xmlns:ns2="http://bbb/">
            <myType>
                <c>three</c>
                <a>one</a>
                <b>two</b>
            </myType>
        </ns2:MethodResponse>
    </S:Body>
</S:Envelope> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T10:16:09.470

您可以通过向`MyType`类添加 JAXB 注释来做到这一点：

```
import javax.xml.bind.annotation.*;

@XmlType(propOrder = {"c", "a", "b"})
public class MyType {
  //... 
```

但是，如果您尝试复制现有服务，那么迄今为止最好的方法是使用`wsimport`生成与现有 WSDL 匹配的 Java 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:45:39.390

更改 bean 中方法的顺序，也许不是调用顺序，这对生成的 XML 绝对没有影响。但更重要的是，使用 WSDL，您可以在其中正确指定响应的模式，然后使用`wsdl2java`.

# lucene - 我正在使用 Lucene 的 WildcardQuery 执行查询，但它不起作用

> ID：12856255
> 
> 赞同：2
> 
> 时间：2012-10-12T09:38:51.827
> 
> 标签：lucene, hibernate-search

我正在使用 Lucene 的 WildcardQuery 执行查询。但我不知道为什么找不到结果。以下是详细信息。

这是创建通配符查询的代码，并且字段名称：'全名'值：'ABC123DD456CC'的记录存在索引文档。

```
BooleanQuery booleanQuery = new BooleanQuery();
for (IndexQueryField field : quickSearchFields)
{
    Query query = new WildcardQuery(new Term(queryField.getFieldName(),"ABC*DD*CC"));
    booleanQuery.add(query, BooleanClause.Occur.SHOULD);
} 
```

代码部分：执行查询：

```
Session hibernateSession               = (Session) em.getDelegate();
FullTextSession session                = SwitchSession.getFullTextSession(hibernateSession, specifyIndexName);

// Set Hibernate flushMode
session.setFlushMode(FlushMode.MANUAL);
// Ignore Hibernate Cache
session.setCacheMode(CacheMode.IGNORE);

            FullTextQuery query = session.createFullTextQuery(booleanQuery,XXX.class);
List list = query.setFirstResult(1).setMaxResults(100).list(); 
```

该列表为空，我确信 Lucene 文档中存在“ABC123DD456CC”。我只想用 WildcardQuery 来做。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:31:09.513

我相信最后一行应该是：

```
List list = query.setFirstResult(0).setMaxResults(100).list(); 
```

由于结果从 0 开始编号。如果只有 1 个文档与该搜索匹配，这似乎很可能，这可能解释了为什么您什么也得不到（在索引 0 处跳过了第一个也是唯一的结果）。

# java - Spnego / Kerberos 支持与 hessian

> ID：12856260
> 
> 赞同：0
> 
> 时间：2012-10-12T09:38:58.233
> 
> 标签：java, kerberos, hessian, spnego

我爬了很多谷歌来找到一些关于这个主题的文档，但没有找到任何东西。我正在尝试使用 kerberos 票证访问受保护的服务器，但出现 401 错误。

我所做的是在调用 Web 服务之前添加带有 base64 编码令牌的标头

```
HessianConnection conn = ...    
conn.addHeader("Authorization", "Negotiate " + token);
...
conn.sendRequest(); 
```

我知道 hessian 支持基本身份验证（HessianProxyFactory => setUser/PWD/BasicAuth），但我不确定 Spnego/Negotiate。

请注意，我们设法在另一个项目中使用 cxf 设置 spnego（它有 HttpAuthSupplierImpl），但这个使用的是 hessian。

问题：有可能还是我在浪费时间？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:17:22.027

实际上我用wireshark检查了HTTP流量服务器端，似乎标头是用这个代码正确发送的。所以这行得通，这个问题可以结束。然而，票证没有被正确识别，但这是另一个问题......

# iphone - 如何在新的 iPhone 应用中显示现有的应用商店应用链接

> ID：12856262
> 
> 赞同：-1
> 
> 时间：2012-10-12T09:39:02.990
> 
> 标签：iphone, ios, app-store

我想在表格视图中显示许多与我相关的 iPhone 应用程序，并包含在 LinkShare 和 TradeDoubler 帐户中，因此在进行任何购买时都会给我佣金。我在一些应用程序中看到了更多很棒的应用程序按钮，该按钮在网络视图中打开一个链接，在单击其中一个应用程序后在表格视图中显示许多应用程序，iTunes 应用程序商店的链接将打开，如果您购买任何应用程序，那么佣金将转到应用程序所有者.

我已附上屏幕截图以快速清除它 - 任何帮助将不胜感激，谢谢

![在此处输入图像描述](../Images/a5af1ca9bb45e8d5dc63fb9c5f1f45b2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:44:28.273

您可以创建一个文件并将其放置在服务器中，并在其中存储您的 URL（您可以添加元数据、imageURL，...）然后在您的应用程序中，如果您可以访问互联网，则显示带有从文件加载的数据的 tableview . 如果您无权访问它或者它已损坏，请使用其他内容呈现视图。您还可以根据 TeenDev 的回答将此占位符用于 Apple 验证；-)

# c# - OrderBy 带有 linq 的日期字段并返回 ToList()

> ID：12856266
> 
> 赞同：-1
> 
> 时间：2012-10-12T09:39:22.187
> 
> 标签：c#, linq

我正在从表中获取记录列表，它工作正常，但是当我使用 orderby 时，如果我使用这样的代码，它会显示错误，它工作正常：

```
var Item = from itm in DB.Items
orderby itm.ExpiryDate ascending
select new Item
{

};
return Item.ToList(); 
```

以上工作正常，但我有一个条件，这就是为什么我需要使用以下给出错误的

```
var Item = from itm in DB.Items
select new Item
{ 
```

};

```
if (Order == "NearExpire")
{
return Item.OrderBy(e=>e.ExpiryDate).ToList();
}
else
{
return Item.ToList();
} 
```

这是解决方案

```
var Item = (from itm in DB.Items
select new Item
{

}).ToList();

if (Order == "NearExpire")
{
return Item.OrderBy(e=>e.ExpiryDate).ToList();
}
else
{
return Item.ToList();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:00:24.937

你的问题不清楚。我认为您只想在`order`变量值变为 "NearExpire" 时添加 order by。

尝试以下。

```
if (Order == "NearExpire")
{ 
    return DB.Item.OrderBy(e=>e.ExpiryDate).ToList(); 
}else
{
   return DB.Item.ToList(); 
} 
```

如果你想要降序，你可以使用以下。

```
return DB.Item.OrderByDescending(e=>e.ExpiryDate).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:36:36.370

您的问题不清楚，但可能这会给您一个想法：如果您有这样的课程

```
class Item
{
    private string m_Order;
    private DateTime m_ExpiryDate;

    public string Order
    {
        get { return m_Order; }
        set { m_Order = value; }
    }

    public DateTime ExpiryDate
    {
        get { return m_ExpiryDate; }
        set { m_ExpiryDate = value; }
    }

} 
```

这是您在集合中的数据

```
 var Items = new List<Item>();
        Items.Add(new Item() { Order = "NearExpire", ExpiryDate = DateTime.Now.AddDays(4) });
        Items.Add(new Item() { Order = "FutureExpire", ExpiryDate = DateTime.Now.AddDays(15) });
        Items.Add(new Item() { Order = "NearExpire", ExpiryDate = DateTime.Now.AddDays(3) });
        Items.Add(new Item() { Order = "Expire", ExpiryDate = DateTime.Now }); 
```

那么你可以使用这样的查询：

```
 var Item = (from itm in Items
                    where itm.Order == "NearExpire"
                    orderby itm.ExpiryDate ascending
                    select itm).ToList(); 
```

请注意，添加到第 3 位的对象比添加到第 1 位的对象具有过期日期，但在结果中，它们按升序排列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:45:06.133

这是解决方案。

```
var Item = (from itm in DB.Items
select new Item
{

}).ToList();

if (Order == "NearExpire")
{
return Item.OrderBy(e=>e.ExpiryDate).ToList();
}
else
{
return Item.ToList();
} 
```

# c# - RegisterStartupScript 或 RegisterClientScriptBlock 哪个更快？

> ID：12856269
> 
> 赞同：1
> 
> 时间：2012-10-12T09:39:23.210
> 
> 标签：c#, javascript, asp.net

`RegisterStartupScript`我看到了这里和`RegisterClientScriptBlock`从[这里](https://stackoverflow.com/questions/666519/difference-between-registerstartupscript-and-registerclientscriptblock)的区别。
描述了使用它们两者的服务器端的注入 javascript 代码。
现在我还从 ASP.NET 服务器控件注入客户端脚本，但我的客户端脚本只是指向外部 JavaScript 文件。

```
string jsString="<script src="myscripts.js"></script>"
ClientScript.RegisterClientScriptBlock(this.GetType(), "JSScriptBlock",jsString); 
```

我正在使用`RegisterClientScriptBlock`，但我想知道我应该使用`RegisterStartupScript`更快。哪个更快`RegisterStartupScript`或`RegisterClientScriptBlock`在我的情况下？
谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T09:49:10.807

`The RegisterClientScriptBlock`方法立即插入客户端脚本`below the opening tag of the Page object's element`。代码无法访问表单的任何元素，因为当时这些元素还没有被实例化。

该`RegisterStartupScript`方法仅插入指定的客户端脚本`before the closing tag of the Page object's element`。代码可以访问表单的任何元素，因为那时元素已被实例化。

使用哪种方法的选择实际上取决于您希望浏览器在呈现页面时运行脚本的“顺序”。

# php - jQuery 悬停效果 iPhone/iPod touch/iPad 不工作

> ID：12856272
> 
> 赞同：2
> 
> 时间：2012-10-12T09:39:42.543
> 
> 标签：php, jquery, css

我正在使用 jQuery 悬停效果创建一个网站。该网站在桌面上非常完美，鼠标在图像上我有一个悬停效果，在图像上放置一个黑色层并显示框内的文本，然后单击里面的链接，我将重定向到页面，但是当我尝试使用 ipod touch/iphone/ipad 时，它不起作用。

这是小提琴：http: [//jsfiddle.net/IronFeast/RvfQg/](http://jsfiddle.net/IronFeast/RvfQg/)

如何修改我的代码？我想重新双击该框以显示里面的内容：第一次单击）选择；第二次单击）开始效果。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T12:35:48.007

我喜欢你在这里使用所有 CSS 的方式。你的问题并不完全清楚，但我认为这就是你想要的：http: [//jsfiddle.net/howlermiller/fUSXp/2/](http://jsfiddle.net/howlermiller/fUSXp/2/)（在 iPad 上尝试）

使用 jQuery 获得此功能会非常简单，但由于您已经投入了一些工作以使其全部使用 CSS，因此我将答案保留为所有 CSS。我使用了[checkbox hack](http://css-tricks.com/the-checkbox-hack/)，并在 iPad 上对其进行了测试以确保它可以正常工作。

这个 hack 也适用于桌面浏览器，所以如果你点击这个框，那么样式将保持不变，而不是在鼠标关闭时消失。这可能是好事也可能是坏事，这取决于您将如何处理它。

PS 使用纯 CSS（又名复选框 hack）并不是最好的方法。它使您的代码不太灵活且可重用性降低。但它确实工作得很好。

**编辑：**停止印刷机，Safari 5 中有一个错误。由于[这个 StackOverflow 问题](https://stackoverflow.com/questions/5421659/html-label-command-doesnt-work-in-iphone-browser)，我找到了它。修复它所需要做的就是在标签上添加一个空的 onclick（是的，是的，另一个 hack，我知道，我也不满意）。在我自己的测试中，Safari 6 似乎没有这个错误，所以除非你支持 Safari 5，否则你不需要它（实际上，现在这可能是一个好主意。如果你在少数情况下使用它不过几个月，那么您可能可以使用旧小提琴）。这是固定的 jsfiddle：http: [//jsfiddle.net/howlermiller/fUSXp/3/](http://jsfiddle.net/howlermiller/fUSXp/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:04:51.733

作为替代方案，您还可以尝试在单击元素时向元素添加类似“悬停”的类，并修改您的 CSS 以在两种情况下进行动画处理：使用伪选择器（如 :hover）和元素实际具有类“悬停”时。

在添加到当前单击的元素之前，您可能希望从单击的元素的所有其他同级中删除该类。

CSS 中的更改将与此类似：

```
.view-sixth.hover a.info,
.view-sixth:hover a.info {...} 
```

所以基本上为每个动画元素添加两个类似的选择器。

# clearcase - 查找所有未添加到 ClearCase 的文件

> ID：12856274
> 
> 赞同：8
> 
> 时间：2012-10-12T09:39:54.590
> 
> 标签：clearcase

我在不同的目录中创建了一些文件。我创建时无法添加它们，因此我需要稍后再添加。

有没有办法获取 ClearCase 视图中所有文件的列表，这些文件实际上不在源代码控制之下？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T09:59:27.510

是的：您可以使用 ClearCase 列出您的所有**私人**文件，使用

*   `cleartool lsprivate`（仅适用于动态视图，不适用于快照视图）
*   `cleartool ls -rec -view_only`

不过，您将需要 grep 特定文件的输出。
有关更多信息，请参阅“[命令以递归方式查找当前目录中的所有查看私有文件](https://stackoverflow.com/questions/7657084/command-to-find-all-view-private-files-in-the-current-directory-recursively/7657120#7657120)”。

# pusher - 推杆断开连接和超时

> ID：12856276
> 
> 赞同：3
> 
> 时间：2012-10-12T09:40:01.423
> 
> 标签：pusher

我的服务器会在客户端收到有关断开连接的通知吗？如果断开连接像下面这样显式发生，我认为答案是肯定的。

```
pusher.disconnect() 
```

但是如果用户简单地关闭浏览器会发生什么？

另一件事是有没有办法通知服务器某个通道已经有一段时间没有被客户端使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T21:36:59.837

[连接状态文档](https://pusher.com/docs/channels/using_channels/connection/#connection-states)显示了如何绑定到连接状态更改。

> 但是如果用户简单地关闭浏览器会发生什么？

这实际上取决于浏览器是否调用`webSocketInstance.onclose`，以便在浏览器关闭之前通知 Pusher JavaScript 库。您始终可以使用或`window.onbeforeunload`版本自己检测到这一点。`window.onunload``addEventListener`

> 另一件事是有没有办法通知服务器某个通道已经有一段时间没有被客户端使用？

您可以使用[WebHooks](http://pusher.com/docs/webhooks)，以便在通道空闲时通知您的应用服务器。

# hadoop - Hadoop Mapper：适当的输入文件大小？

> ID：12856277
> 
> 赞同：1
> 
> 时间：2012-10-12T09:40:05.007
> 
> 标签：hadoop, mapreduce

我有集群 HDFS 块大小为 64 MB。我有包含 100 个纯文本文件的目录，每个文件的大小为 100 MB。这份`InputFormat`工作是`TextInputFormat`。将运行多少个 Mapper？

我在 Hadoop Developer 考试中看到了这个问题。答案是 100。其他三个答案选项是 64、640、200。但我不确定 100 是怎么来的，或者答案是错误的。

请指导。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T10:42:59.663

我同意你的评估，这似乎是错误的

除非当然还有更多未发布的考试问题：

*   这些“纯”文本文件是否经过 gzip 压缩 - 在这种情况下它们不可拆分？）
*   集群拆分大小可能是 64MB，但输入文件的分配拆分大小是多少 - 128MB？

为了公平对待考试问题和“正确”答案，我们需要完整的考试问题。

正确答案应该是 200（如果文件块大小都是默认的 64MB，并且文件要么未压缩，要么使用 snappy 等可拆分编解码器压缩）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:06:44.010

看起来答案对我来说是错误的。

但在以下情况下可能是正确的：

1) 如果我们重写 isSplitable 方法并且如果我们返回 false，那么 map 任务的数量将与输入文件的数量相同。在这种情况下，它将是 100。

2）如果我们配置mapred.min.split.size，mapred.max.split.size变量。默认min split size为0，max split size为Long.MAX。

下面是它用来识别映射器数量的函数。

最大值（mapred.min.split.size，最小值（mapred.max.split.size，blocksize））

在这种情况下，如果我们将 mapred.min.split.size 配置为 100，那么我们将有 100 个映射器。

但根据给定的信息，我认为 100 不是正确答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-07T20:16:02.277

由于块大小 (64 MB) 小于文件大小 (100 MB)，每个文件将被拆分为两个，因此将运行 200 个映射器

# html - li 标签周围的边框

> ID：12856279
> 
> 赞同：35
> 
> 时间：2012-10-12T09:40:17.423
> 
> 标签：html, css, border

li 标签中的边框是否包含数字而不仅仅是内容？

这是我想要做的事情的jsfiddle：http: [//jsfiddle.net/Markinhos/VSnnd/8/](http://jsfiddle.net/Markinhos/VSnnd/8/)

我希望边框包括第二个。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-12T09:42:12.757

添加`list-style-position:inside;`

```
.borderlist {
    list-style-position:inside;
    border: 1px solid black;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-12T09:42:28.690

```
list-style-position: inside; 
```

是您要查找的 CSS 属性，它会将列表编号视为在 CSS 框模型中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-12T09:43:38.623

你可以这样做`list-style-position: inside;`

> list-style-position CSS 属性指定标记框在主体块框中的位置。：[***MDN***](https://developer.mozilla.org/en-US/docs/Web/CSS/list-style-position)

[jsFiddle](http://jsfiddle.net/hEHrp/)

# objective-c - 问题：找不到属性 tasklistviewcontroller 对象类型“timertasklistviewcontroller”

> ID：12856280
> 
> 赞同：0
> 
> 时间：2012-10-12T09:40:20.153
> 
> 标签：objective-c, ios4, xcode4

我有以下问题

属性 tasklistviewcontroller 未找到对象类型“timertasklistviewcontroller”。

我无法将属性一个视图控制器访问到另一个视图控制器。我在标题中声明所有类和控制器。你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:09:49.163

它在告诉你真相。 `tasklistviewcontroller`是 的属性`TimerAddViewController`，而不是 的属性`TimerTaskListViewControllerViewController`。

# javascript - Backbone - 在实例化时为模型分配索引

> ID：12856283
> 
> 赞同：0
> 
> 时间：2012-10-12T09:40:28.220
> 
> 标签：javascript, backbone.js

有没有办法让新实例化的模型知道其集合中基于 0 的索引并分配它？就像是：

```
var m = Backbone.Model.extend({
    initialize: function() {
        this.set('index', '// 0-based index inside the parent collection//');
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:46:43.950

您可以使用 indexOf 获取集合上模型的索引

```
collection.indexOf(model) 
```

或者，如果您无权访问视图中的集合，但您知道模型位于特定集合中，则始终可以像这样获取集合：

```
model.collection.indexOf(model) 
```

我不建议将索引存储在模型上，因为每次添加其他模型时，都必须更新集合中每个模型的索引值。

# meteor - Meteor：无法替换受限集合中的文档

> ID：12856284
> 
> 赞同：6
> 
> 时间：2012-10-12T09:40:33.180
> 
> 标签：meteor

我正在使用 Meteor 4.2 (Windows)，当我尝试更新集合中的对象时，总是收到“更新失败：403 -- 访问被拒绝。无法替换受限集合中的文档”。奇怪的是，我插入新的没有问题，只有更新失败。

我试图“允许”我收藏的所有内容：

```
Maps.allow({
    insert: function () { return true; },
    update: function () { return true; },
    remove: function () { return true; },
    fetch: function () { return true; }
}); 
```

但是，此更新仍然失败：

```
Maps.update({ 
    _id: Session.get('current_map') 
}, {
    name: $('#newMapName').val()
}); 
```

还有什么我可以检查的吗？或者也许我的代码错了？上次我玩我的项目是使用以前版本的 Meteor (< 4.0)。

谢谢你的帮助。

PS：仅供参考，当我进行此更新时，本地集合已更新，我可以在 UI 中看到更改。然后很快它与错误消息一起恢复，因为更改已被服务器端拒绝。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T01:36:44.413

Alright, the syntax was actually incorrect. I don't understand really why as it was working well before, but anyway, here is the code that works fine:

```
Maps.update({ 
    Session.get('current_map') 
}, {
    $set: { 
        name: $('#newMapName').val()
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:35:45.890

似乎它必须与您在“current_map”会话变量中存储的内容有关。如果它是一个 db 对象，那么它可能看起来`{_id:<mongo id here>}`会让更新查找器正常工作。

我遇到了同样的问题，发现以下工作

```
Blocks.update {_id:block_id}, {$set: params} 
```

其中 params 是我要更新的所有位的哈希，而 block_id 是我要更新的 Block 的 mongo 对象 id。

您关于客户端更新（闪烁更新然后恢复）的注释是预期的行为。[如果您在数据和安全部分](http://docs.meteor.com/#dataandsecurity)查看他们的文档：

> 不过，Meteor 有一个可爱的技巧。当客户端向服务器发出写入时，它也会立即更新其本地缓存，而无需等待服务器的响应。这意味着屏幕将立即重绘。如果服务器接受了更新——在正常行为的客户端中大部分时间都应该发生这种情况——那么客户端就会对更改进行跳转，而不必等待往返更新自己的屏幕。如果服务器拒绝更改，Meteor 会使用服务器的结果修补客户端的缓存。

# c# - Windows 移动 C# 针对 Active Directory 验证用户名和密码？

> ID：12856285
> 
> 赞同：0
> 
> 时间：2012-10-12T09:40:33.837
> 
> 标签：c#, active-directory, windows-mobile

我尝试从 Windows Mobile 设备验证针对 Active Director 的用户名和密码。在 XP 上我使用这个：

```
 using System.Security;
    using System.DirectoryServices;
    using System.DirectoryServices.ActiveDirectory;
    ...
    DirectoryEntry entry = new DirectoryEntry(srvr, usr, pwd);
            object nativeObject = entry.NativeObject;
    ... 
```

但这些在 Windows Mobile 中不可用。

有没有办法在 Windows Mobile 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:19:35.930

.NET Compact Framework 不支持 LDAP（因此是 Active Directory 身份验证）。

不过，您可以使用 P/invoke 从 .Net 调用本机方法。下面的链接中提供了有关如何通过 C++ 执行此操作的示例。

[http://msdn.microsoft.com/en-us/library/aa912620.aspx](http://msdn.microsoft.com/en-us/library/aa912620.aspx)

# c++ - if else 语句和字符串长度之间的代码性能

> ID：12856288
> 
> 赞同：1
> 
> 时间：2012-10-12T09:40:37.930
> 
> 标签：c++, string, performance, if-statement, string-length

我正在编写代码，该代码从用户那里获取一个数字并以字母形式作为字符串打印回来。我想知道，在性能方面，有 if 语句，比如

```
if (n < 100) {
    // code for 2-digit numbers
} else if (n < 1000) {
    // code for 3-digit numbers
} // etc.. 
```

或将数字放入字符串中并获取其长度，然后将其作为字符串处理。

代码是用 C++ 编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:49:28.180

当然`if-else`会更快。

要比较两个数字，您只需按位比较它们（有不同的方法可以做到，但这是一个非常快的操作）。

要获得字符串的长度，您需要制作字符串，将数据放入其中并以某种方式计算长度（也可以有不同的方法，最简单的是计算所有符号）。当然，这需要更多的时间。

在一个简单的例子中，虽然你不会注意到任何区别。人们常常关心这些事情（无意冒犯），这常常让我感到惊讶。如果代码将在`0.003`几秒钟内而不是`0.001`几秒钟内执行，这对您没有任何影响......只有在您*知道*这个确切位置是您的应用程序的瓶颈并且*确定*您可以将性能提高相当多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:18:16.243

答案很好，但请考虑一下相对时间。

即使通过你能想到的最慢的方法，程序也可以在几分之一秒内完成，比如 100 微秒。

将其与您可以想象的最快的用户进行平衡，谁可以在 500 毫秒内输入数字，谁可以在另外 500 毫秒内读取输出，然后再执行下一步操作。

好的，这台机器在 1000 毫秒内基本上什么都不做，而在中间它必须疯狂地运行 100 微秒，因为毕竟我们不希望用户认为程序很慢 ;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:54:22.300

在您测量并且这确实是一个瓶颈之前，不要担心性能。

也就是说，以下内容应该更快（为了便于阅读，假设您使用的类型介于 0 和 99999999 之间）：

```
if (n < 10000) {
    // code for less or equal to 4 digits
    if (n < 100)
    {
       //code for less or equal to 2 digits
       if (n < 10)
          return 1;
       else
          return 2;
    }
    else
    {
       //code for over 2 digits, but under or equal to 4
       if (n>=1000)
          return 4;
       else
          return 3;
    }
} else {
    //similar
} // etc.. 
```

基本上，它是二分搜索的一种变体。在最坏的情况下，这将`O(log(n))`与`O(n)`-`n`作为最大位数相反。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T12:41:05.050

`string`变体会更慢：

```
std::stringstream ss;       // allocation, initialization ...
ss << 4711;                 // parsing, setting internal flags, ...
std::string str = ss.str(); // allocations, array copies ...    

// cleaning up (compiler does it for you) ...
str.~string();
ss.~stringstream();         // destruction ... 
```

表明有更多的`...`事情发生。

一个紧凑的（适用于缓存）循环（适用于分支预测）可能是您想要的：

```
int num_digits (int value, int base=10) {
    int num = 0;
    while (value) {
        value /= base;
        ++num;
    }
    return num;
}

int num_zeros (int value, int base=10) {
    return num_decimal_digits(value, base) - 1;
} 
```

根据情况，因为它对缓存和预测友好，所以这可能比基于关系运算符的解决方案更快。

模板化变体使编译器能够为您的部门进行一些微优化：

```
template <int base=10>
int num_digits (int value) {
    int num = 0;
    while (value) {
        value /= base;
        ++num;
    }
    return num;
} 
```

# validation - 未映射到表的域对象的 Grails 级联验证

> ID：12856290
> 
> 赞同：0
> 
> 时间：2012-10-12T09:40:39.560
> 
> 标签：validation, grails, cascade

请您帮我解决以下问题：

我有 2 个域类（父、子），我不想映射到表，所以我把`mapWith=none`. 但是，当我这样做时，`parent.validate()`我希望将验证级联给孩子。如何为未映射到表的域对象启用级联验证？

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:04:28.133

不知道能不能按设计来。

您可以选择在父对象上添加 customValidation() 方法以启动检查，该检查循环遍历子对象并调用它们的 validate() 方法。然后可以将子对象上的任何错误添加到父对象的错误对象中。

```
boolean cascadedValidation() {
    this.validate();

    children.each {
        if (!it.validate()) {
           it.errors.allErrors.each { err ->
               // Bind somewhere on parent object
           }
        }
    }

    return this.hasErrors();
} 
```

# windows - Windows 和 Linux 上的 ImageMagick 'convert -sepia-tone' 不同

> ID：12856293
> 
> 赞同：1
> 
> 时间：2012-10-12T09:40:40.940
> 
> 标签：windows, linux, imagemagick, imagemagick-convert

我对下面的 2 个图像有疑问：第一个是在 Linux 上创建的，第二个是在 Windows 上使用相同的命令、相同版本的 ImageMagick (6.6.5-0) 创建的。尝试了较新版本的 ImageMagick，它们似乎都提供了 Windows 与 Linux 不同的结果。

```
convert c.jpg -sepia-tone 80% 1.jpg (on Linux)
convert c.jpg -sepia-tone 80% 2.jpg (on Windows) 
```

结果非常不同，我不知道为什么。

我究竟做错了什么？

[![](../Images/de4e735f49152f08093e504cc3e3914b.png)](https://i.stack.imgur.com/o2XH7.jpg)
[（来源：[selfip.com](http://s45.selfip.com/1.jpg)）][（来源：][[selfip.com](http://s45.selfip.com/2.jpg)][）]
 [![](../Images/f8c174975f3dbf7836cde6722d997580.png)](https://i.stack.imgur.com/47GHT.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:27:40.997

我实际上不得不做

```
convert c.jpg -set colorspace RGB -sepia-tone 80% 1.jpg 
```

基本上强制使用 RGB 颜色空间，这解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:31:25.210

很可能，您在 Linux 和 Windows 上安装的 ImageMagick 的发行版本在很多方面都不同，而不仅仅是版本号......

要进行验证，请运行此命令并*详细*比较两个平台的输出：

```
convert -version 
```

此外，您可能希望查看输出的`convert -list configure`不同之处。（注意，这个命令给出的输出格式在两个平台上是不同的——它们不能直接比较）。

# php - 密码和密码存储问题

> ID：12856296
> 
> 赞同：4
> 
> 时间：2012-10-12T09:40:54.870
> 
> 标签：php, password-encryption

相关问题：

[我是否正确使用了 PHP 的 crypt() 函数？](https://stackoverflow.com/questions/3820977/am-i-using-phps-crypt-function-correctly)

[使用 SHA-512 的密码存储散列或使用河豚 (bcrypt) 的 crypt()](https://stackoverflow.com/questions/12468063/passwords-storage-hash-with-sha-512-or-crypt-with-blowfish-bcrypt)

我试图弄清楚我应该如何使用 PHP 安全地存储密码。经过一番阅读后，我发现我应该使用 crypt() 而不是 hash() 并且我应该使用河豚（bcrypt）或 SHA-512 算法，我相信 bcrypt 被更频繁地推荐，尽管有显着也支持基于 SHA-512 的算法。

还有很多建议我的盐应该尽可能随机，有很多建议`openssl_random_pseudo_bytes()`在核心`rand()`和`mt_rand()`.

我的主要问题是：

1.  如果我选择使用 bcrypt，我应该考虑使用哪些负载因子？我注意到对于 PHP 5.5，新密码 API 中的默认加载因子是 10，所以我想我至少想要这个值。

2.  负载因子与密码安全性有何关联？据我了解，该算法将迭代`2^load_factor`次数，但我更感兴趣的是这如何转化为针对暴力破解方法的安全性。“安全”是什么意思？破解需要10年吗？5年？1年？

3.  为什么我应该选择 bcrypt 而不是基于 SHA-512 的方法（反之亦然）？我听说 SHA-512 被设计为一种快速散列方法，因此随着时间的推移，它不会像 bcrypt 那样持久。这是真的？这两种方法都有盐参数，允许 crypt 迭代多次。

4.  据我所知，我实现了以下生成 bcrypt salt 的测试代码。是推荐的方法吗？有更好的方法吗？

_

```
function gen_salt($cost)
{
    return "$2y$" . $cost . "$" . str_replace('+', '.', base64_encode(openssl_random_pseudo_bytes(22)));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:11:11.667

因此，根据评论，我创建了一个简单的基准来测试各种散列方法需要多长时间。

```
function bcrypt_salt($cost)
{
    return "$2y$" . $cost . "$" . str_replace('+', '.', base64_encode(openssl_random_pseudo_bytes(22))) . '$';
}

function sha512_salt($cost)
{
    return "\$6\$rounds=" . $cost . "\$" . openssl_random_pseudo_bytes(16) . '$';
}

$password = "stackoverflow";
$times = 1;
echo "<p>bcrypt method</p>";
for($iters = 10; $iters < 15; ++$iters)
{
    $salt = bcrypt_salt(strval($iters));
    $pword_crypt = crypt($password, $salt);
    $start_time = microtime(true);
    for($i = 0; $i < $times; ++$i)
    {
        crypt($password, $pword_crypt);
    }
    $end_time = microtime(true);
    echo "<p> cost = $iters: " . ($end_time - $start_time) . "</p>";
}

echo "<p>SHA512 method</p>";
for($iters = 1024; $iters < 1000000; $iters *= 2)
{
    $salt = sha512_salt(strval($iters));
    $pword_crypt = crypt($password, $salt);
    $start_time = microtime(true);
    for($i = 0; $i < $times; ++$i)
    {
        crypt($password, $pword_crypt);
    }
    $end_time = microtime(true);
    echo "<p> log2(iters) = ". log($iters,2) . ": " . ($end_time - $start_time) . "</p>";
} 
```

基准测试结果（以秒为单位的时间）：

用 i5-m430 在我的笔记本电脑上运行：

> bcrypt 方法
> 
> 成本 = 10：0.11740303039551
> 
> 成本 = 11：0.23875308036804
> 
> 成本 = 12：0.46739792823792
> 
> 成本 = 13：0.96053194999695
> 
> 成本 = 14：1.8993430137634
> 
> SHA512 方法
> 
> log2(iters) = 10: 0.0034840106964111
> 
> log2(iters) = 11: 0.0077731609344482
> 
> log2(iters) = 12: 0.014604806900024
> 
> log2(iters) = 13: 0.02855396270752
> 
> log2(iters) = 14: 0.068222999572754
> 
> log2(iters) = 15: 0.12677311897278
> 
> log2(iters) = 16: 0.24734497070312
> 
> log2(iters) = 17: 0.54663610458374
> 
> log2(iters) = 18: 1.0215079784393
> 
> log2(iters) = 19: 2.0223300457001

在所有条件相同的情况下，SHA-512 方法与 bcrypt 相比需要更多的迭代次数才能花费相同的时间。话虽如此，我猜任何至少需要十分之一秒的方法都绰绰有余。

# c# - 多线程：在 lock 语句中使用 BeginInvoke 好吗？

> ID：12856298
> 
> 赞同：2
> 
> 时间：2012-10-12T09:40:57.597
> 
> 标签：c#, multithreading

在锁结构中使用异步操作是一种好的编程习惯吗？例如，

```
lock(objLocker)
{

    myDispatchder.BeginInvoke(
        System.Windows.Threading.DispatcherPriority.Render,
        new Action(() =>
                    {
                      // ..code..

                    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T09:43:29.370

如果这是您*唯一*要保护的东西，那将是多余的；没有必要`lock`for `BeginInvoke`。实际上，如果是，那将是非常*有害*`Invoke`的，并且名为 (the `// ..code..`)的方法*也*试图锁定`objLocker`- 你会自己死锁。目前，它没有任何用处，并且有*可能*对 3 个维护版本造成伤害。在更一般的情况下，如果有需要保护*的*东西，我会将这两个任务分开，即

```
lock(objLocker)
{
    // do some stuff
}
myDispatcher.BeginInvoke(...); 
```

这样可以避免以后出现任何潜在问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T10:05:38.060

a 中的异步操作`lock`除了无缘无故地使代码更加复杂并引入可能的死锁之外，什么都不做。

给出您的代码示例，我可以建议以下内容可能更有用：

```
myDispatchder.BeginInvoke(
    System.Windows.Threading.DispatcherPriority.Render,
    new Action(() =>
    {
        lock(objLocker)
        {
            // ..code..
        }
    })); 
```

# javascript - Math.round 返回 NaN

> ID：12856300
> 
> 赞同：2
> 
> 时间：2012-10-12T09:41:04.690
> 
> 标签：javascript, jquery

我需要更新 x 和 y 值以通过 Ajax 和 PHP 裁剪图像。

此代码在单击按钮时打开一个带有图像的对话框窗口。工作正常，但 Firebug 显示 NaN 后变量。如何获得正确的值？我试过 parseFloat() 和 parseInt() 来返回一个数字变量。

```
jQuery(function($) {

    jQuery('#jc-hidden-image').Jcrop({
        onChange: showCoords,
        onSelect: showCoords
    });

});

function showCoords(c) {
    jQuery('#x1').val(c.x);
    jQuery('#y1').val(c.y);
    jQuery('#x2').val(c.x2);
    jQuery('#y2').val(c.y2);
    jQuery('#w').val(c.w);
    jQuery('#h').val(c.h);
};
jQuery(function($) {

    $('#jc-dyn-btn').click(function() {
        var jcrop_api;
        var id = $(this).attr('data-id');
        var rel = $(this).attr('data-rel');
        var value = $(this).attr('data-value');
        var mainImage = rel + '/' + id;
        var x, y, w, h;
        x = Math.round($('#x1').val());
        y = Math.round($('#y1').val());
        w = Math.round($('#w').val());
        h = Math.round($('#h').val());
        $("
    img.jc - hidden - image ").attr("
    src ", mainImage);
        var $dialog = $(" < div > < div id = \"jc-dialog\ class=\"jc-dialog\"><img class=\"jc-hidden-image\" src=\"" + mainImage + "\" /><form id=\"coords\" class=\"coords\"><label>X1<input type=\"text\" size=\"4\" id=\"x1\" name=\"x1\" /></label><label>Y1 <input type=\"text\" size=\"4\" id=\"y1\" name=\"y1\" /></label><label>X2 <input type=\"text\" size=\"4\" id=\"x2\" name=\"x2\" /></label><label>Y2 <input type=\"text\" size=\"4\" id=\"y2\" name=\"y2\" /></label><label>W <input type=\"text\" size=\"4\" id=\"w\" name=\"w\" /></label><label>H <input type=\"text\" size=\"4\" id=\"h\" name=\"h\" /></label></form></div>");

        $dialog.find('img').Jcrop({
            onChange: showCoords,
            onSelect: showCoords
        }, function() {
            jcrop_api = this;
            jcrop_api.animateTo([259, 81, 469, 304]);
            $dialog.dialog({
                modal: true,
                title: 'Jcrop in jQuery-ui Dialog (Dynamic)',
                close: function() {
                    $dialog.remove();
                },
                width: jcrop_api.getBounds()[0] + 34,
                resizable: false,
                buttons: {
                    "SAVE": function() {
                        $.ajax({

                            url: "crop.php",
                            type: "POST",
                            data: "x=" + x + "&y=" + y + "&w=" + w + "&h=" + h + "&src=" + mainImage,

                            success: function() {
                                //  $dialog.dialog('close');
                            }
                        });
                    },
                    "CLOSE": function() {
                        $dialog.dialog('close');
                    }
                }
            }) //dialog
        }); //function
        return false;
    }); //clik
}); //jquery​ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T16:25:07.513

试试这个，`parseFloat`像这样使用

```
Math.round(parseFloat($('#x1').val())); 
```

**更新：**

还要确保您使用 right `id`s 作为输入，无论它应该是`$('#x1')`还是`$('#x')`. [**这是一个例子**](http://jsfiddle.net/ku25C/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T16:26:17.253

您首先需要使用`parseFloat`. 将语句更改为：

```
x = Math.round( parseFloat($('#x1').val()) );
y = Math.round( parseFloat($('#y1').val()) );
w = Math.round( parseFloat($('#w').val()) );
h = Math.round( parseFloat($('#h').val()) ); 
```

# jsf - JSF 中有没有类似细节视图的东西？

> ID：12856302
> 
> 赞同：0
> 
> 时间：2012-10-12T09:41:05.963
> 
> 标签：jsf

我正在尝试实现这样的目标：

```
<f:detailview item="#{bean.getOne()}" var="p">
    <h:outputText value="#{p.name}" />
</f:detailview> 
```

detailview 标签将获取范围内的一个对象，以便子组件可以使用其属性。JSF中有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:08:46.750

听起来您只需要将长 EL 表达式“别名”为短表达式。

你可以使用`<c:set>`它。

```
<html ... xmlns:c="http://java.sun.com/jsp/jstl/core">
...
<c:set var="p" value="#{bean.getOne()}" scope="request" />
<h:outputText value="#{p.name}" />
<h:outputText value="#{p.email}" />
<h:outputText value="#{p.birthdate}" />
... 
```

# cakephp - 在 CakePHP API 路由中执行用户令牌检查

> ID：12856303
> 
> 赞同：0
> 
> 时间：2012-10-12T09:41:06.633
> 
> 标签：cakephp, rest

我正在创建一个 API，我想知道检查用户令牌的最佳做法是什么。

这是我正在使用的路径及其随附规则的示例：

[http://www.domain.com/api/user/ede12-snip-f50b9/project/1](http://www.domain.com/api/user/ede12-snip-f50b9/project/1)

```
路由器::连接(
    "/api/user/:token/project/:projectid/issues",
    array("action" => "issues", "controller" => "projects", "[method]" => "GET"),
    array("id" => "[0-9]+", 'pass' => array('token', 'projectid'))
);

```

这可行，但是我必须在每个操作中检查令牌凭据。我不希望那样。

有谁知道另一种方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:46:26.903

```
This works, but then I have to check the token credentials in every action. And I don't want that. 
```

如果您的 API 是无状态的，则没有其他方法。

# windows-8 - SharpDX：启用 BlendState

> ID：12856304
> 
> 赞同：2
> 
> 时间：2012-10-12T09:41:08.083
> 
> 标签：windows-8, directx, sharpdx

我试图让“SharpDX.Direct3D11.DeviceContext.OutputMerger.Blendstate”工作。没有这个，我有很好的场景（带有纹理的多边形，用于 Spaceshooter）。我在过去三年中完成了 OpenGL 图形，所以我认为它可能和 OpenGL 一样简单——只需启用混合并设置正确的 Dst/Src 模式。但是如果我设置一个新的 BlendStateDescription，所有的输出都是黑色的，即使“RenderTarget[x].IsBlendEnabled”设置为“false”。我搜索了一个教程或其他东西，找到了一个 - 但它使用了效果。所以我的问题很简单——我必须在 SharpDX 中使用技术和效果吗？没有其他方法可以进行简单的混合吗？

这就是我所做的：

```
mBackBuffer = Texture2D.FromSwapChain<Texture2D>(mSwapChain, 0);
mRenderView = new RenderTargetView(mDevice, mBackBuffer);
mContext.OutputMerger.SetTargets(mDepthStencilView, mRenderView);
mContext.OutputMerger.SetBlendState(new BlendState(mDevice, new BlendStateDescription()), new SharpDX.Color4(1.0f), -1);

mContext.OutputMerger.BlendState.Description.RenderTarget[0].IsBlendEnabled = true;
mContext.OutputMerger.BlendState.Description.RenderTarget[0].SourceBlend = BlendOption.SourceAlpha;
mContext.OutputMerger.BlendState.Description.RenderTarget[0].DestinationBlend = BlendOption.InverseSourceAlpha;
mContext.OutputMerger.BlendState.Description.RenderTarget[0].BlendOperation = BlendOperation.Add;           
mContext.OutputMerger.BlendState.Description.RenderTarget[0].SourceAlphaBlend = BlendOption.One;            
mContext.OutputMerger.BlendState.Description.RenderTarget[0].DestinationAlphaBlend = BlendOption.Zero;          
mContext.OutputMerger.BlendState.Description.RenderTarget[0].AlphaBlendOperation = BlendOperation.Add;          
mContext.OutputMerger.BlendState.Description.RenderTarget[0].RenderTargetWriteMask = ColorWriteMaskFlags.All; 
```

而且，即使只是简单地做：

```
mContext.OutputMerger.SetBlendState(new BlendState(mDevice, new BlendStateDescription()), new SharpDX.Color4(1.0f), -1);
mContext.OutputMerger.BlendState.Description.RenderTarget[0].IsBlendEnabled = false; 
```

输出全黑..也许我只需要更改像素着色器中的某些内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T11:20:02.203

Direct3D11 中的所有资源都是不可变的，因此当您创建新的 Blendstate(mDevice, new BlendStateDescription()) 时，您以后无法更改描述。正常的工作流程是：

```
var blendDescription = new BlendDescription();
blendDescription.RenderTarget[0].IsBlendEnabled = .. // 设置所有值
[...]
var blendState = new BlendState(device, blendDescription);
context.OutputMerger.SetBlendState(blendState, ...);

```

此外，资源对象需要存储在某个地方并在您完全使用它们时进行处置（大多数时间用于混合状态，在您的应用程序结束时），否则您将出现内存泄漏。

当您不确定 API 的使用情况时，我建议您更仔细地查看一些 Direct3D11 C++ 示例。另外，我建议您阅读 Frank.D.Luna 撰写的“使用 DirectX 11 进行 3D 游戏编程介绍”之类的书，非常适合开始和学习 Direct3D11 API。

# windows-phone-7 - Windows Phone：滑块移动被文本块绑定锁定

> ID：12856307
> 
> 赞同：0
> 
> 时间：2012-10-12T09:41:22.810
> 
> 标签：windows-phone-7, xaml

我正在尝试做一个绑定到文本块的典型slider.value 的简单示例。我试图保持它如此简单，以至于我找不到这里的问题。

我有这个简单的 XAML 代码，后面没有代码：

```
<phone:PhoneApplicationPage 
    .......
    .......
    .......

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Slider x:Name="mySlider" />
        <TextBlock Text="{Binding ElementName=mySlider, Path=Value, Mode=OneWay}" />
    </Grid>

</phone:PhoneApplicationPage> 
```

使用此代码，滑块运动被锁定。如果我删除 TextBlock 绑定，那么一切正常（当然，TextBlock 没有价值）:-)

这似乎很简单，以至于我知道一些非常非常愚蠢的事情正在锁定我的大脑。

无论如何，我已经尝试过您可以想象的“绑定”，但目前没有运气。

请问有什么帮助和解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:45:04.083

尝试在滑块上设置最大和最小属性。

好的，为您的布局尝试堆栈面板：

```
<StackPanel x:Name="LayoutRoot" Background="White">
    <Slider x:Name="mySlider" />
    <TextBlock Text="{Binding ElementName=mySlider, Path=Value, Mode=OneWay}" Height="30" />
</StackPanel> 
```

我认为问题在于您的控件彼此重叠。

# android - 带有 SQL 和 SDcard 数据的 Android ListView

> ID：12856310
> 
> 赞同：2
> 
> 时间：2012-10-12T09:41:49.193
> 
> 标签：android, listview, lazy-loading, adapter, sd-card

> **可能重复：**
> [Android - 如何在 ListView 中延迟加载图像](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

我有一个自定义的联系人列表。它包含名称、描述（来自数据库）和来自文件系统的相应图像。SimpleCursorAdapter 不适用于图标。如何用这些数据制作惰性初始化列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:30:53.950

你可以看看这篇不错的[文章](http://www.vogella.com/articles/AndroidListView/article.html)，

还有[这个](http://www.javacodegeeks.com/2012/10/android-listview-example-with-image-and.html)，

# p2p - 用于 webrtc 的媒体服务器，用于点对点连接

> ID：12856318
> 
> 赞同：5
> 
> 时间：2012-10-12T09:42:35.330
> 
> 标签：p2p, webrtc

大家好，我是 webrtc 的新手，刚开始使用 localhost 运行我的第一个应用程序，我知道如何访问摄像头和麦克风。我有一个问题，如果我们想建立对等连接或任何免费媒体，是否有任何媒体服务器可以购买服务器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T00:42:18.410

对于使用 WebRTC 的 P2P 连接，您可以使用[serverless-webrtc](https://github.com/cjb/serverless-webrtc/)。它是纯粹的客户端，只是一点点 HTML + JS + CSS。

WebRTC 之上的另一个 P2P 库是[PeerJS](http://peerjs.com)。

或者，您可以使用例如[EasyRTC](https://github.com/priologic/easyrtc) - 基于 node.js 的开源 WebRTC 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:44:00.200

看看 OpenTok WebRTC：[http ://labs.opentok.com/try/](http://labs.opentok.com/try/)

它有一个庞大的功能库，您可以轻松使用它，并且完美地支持点对点。

# c# - MVC - 如果不是 POST，如何避免操作返回 404

> ID：12856320
> 
> 赞同：0
> 
> 时间：2012-10-12T09:42:37.457
> 
> 标签：c#, asp.net-mvc, http-post

我在控制器中有两个动作：

```
 public ActionResult ReportRequest()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Report(ReportRequestObj rr, FormCollection formValues)
    {
        if (Request.HttpMethod != "POST")
            return RedirectToAction("ReportRequest");

        ReportingEngine re = new ReportingEngine();

        Report report = re.GetReport(rr);

        return View(report);
    } 
```

我的问题是，“报告”页面的 URL 保存在浏览器中，当我点击它时，我得到一个 404，因为请求尚未发布。

我放入了一个处理程序以重定向到报告请求页面，但是在调试时它似乎根本没有遇到这个问题。

有没有其他方法可以确定请求是否是帖子，如果不是重定向回另一个页面？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:48:51.183

添加操作

```
public ActionResult Report()
{
    return RedirectToAction("ReportRequest");
} 
```

或者只是`[HttpPost]`从行动中移除`Report`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:49:19.373

您无法在此处处理 404 错误，因为该请求永远不会到达您的操作。您正在使用一个动作过滤器来确保只有 POST 请求到达那段代码。

您应该创建另一个操作方法来响应 GET 请求并在其中返回您的视图。

```
[HttpGet]
public ActionResult Report()
{
    return View("ReportRequest");
} 
```

# qt - 文本下方的 Qt QPushbutton 图标

> ID：12856324
> 
> 赞同：0
> 
> 时间：2012-10-12T09:42:55.440
> 
> 标签：qt, pyqt

当我创建一个带有图标的 QPushButton 时，默认情况下它会在图标右侧显示文本。有没有办法让文字显示在图标上方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:18:49.403

最简单的方法是使用 a`QToolButton`代替。这个类有一个名为 的方法`setToolButtonStyle`，它允许你做你想做的事。

在 C++ 中（我从来没有搞砸过 PyQt）：

```
QToolButton *button = new QToolButton(this);
button->setToolButtonStyle(Qt::ToolButtonTextUnderIcon); 
```

链接到 C++ 文档：[QToolButton](http://qt-project.org/doc/qt-4.8/qtoolbutton.html#toolButtonStyle-prop)和[Qt::ToolButtonStyle](http://qt-project.org/doc/qt-4.8/qt.html#ToolButtonStyle-enum)

# c# - winRT中的联系合同是什么？

> ID：12856326
> 
> 赞同：0
> 
> 时间：2012-10-12T09:43:00.057
> 
> 标签：c#, windows-runtime, contacts

对于我的 winRT 应用程序，我正在使用 [http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.contacts.contact.aspx#properties](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.contacts.contact.aspx#properties)

我想向应用程序添加新联系人，允许我使用联系人选择器选择联系人。我可以使用上面链接中的联系人类添加新联系人。如果是，那么如何？提前谢谢。我正在使用 Windows.ApplicationModel.Contacts 命名空间。我正在使用 c#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:47:35.363

> [手册](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.contacts.provider.aspx)：
> 
> 要作为联系人提供者启动并让其他应用访问您应用的联系人数据，请将您的应用注册为提供者，方法是在应用清单的扩展部分中包含以下内容。XML
> 
> ```
> <Extension Category=”windows.contactPicker” /> 
> ```

# c# - 将数据从 SQL 数据库加载到 C# 中的列表中

> ID：12856328
> 
> 赞同：0
> 
> 时间：2012-10-12T09:43:01.563
> 
> 标签：c#, sql

我正在开发一个显示（突出显示）某个事件将发生的日期的应用程序。在我必须使用的数据库中，有一个表包含日期间隔或具有特殊含义的日期集合（如假期集合、学校假期......）。定义事件时，用户定义该事件在哪一天发生（如果它定期发生），但用户也可以定义该特定事件在特殊间隔发生或不发生。例如 - 如果那几天不是假期，那么每个星期天都会发生一个事件。现在我'

```
for (DateTime day = start; day < end;day = day.AddDays(1))
{
    if (Sunday && day.DayOfWeek == DayOfWeek.Sunday)
    {
        MarkedDates.Add(day);
    }
    monthCalendar1.BoldedDates = MarkedDates.ToArray();
} 
```

现在，为了让这段代码正常工作，我需要跳过属于特殊间隔的日期（在这种情况下，如果该日期是假期）。可以通过在 if 子句中添加另一个条件来轻松完成：

```
!SpecialDates.Contains(day) 
```

问题是我不知道如何用数据库中的这些特殊日期填充列表。我不能简单地“硬编码”它，因为这些特殊的日期集合/间隔可以随时更改。所以，我的问题是 - 我怎样才能通过使用 SQL 和 C# 命令从数据库中读取数据并将其保存在列表中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:04:33.753

看起来您使用的是 SQL Server 2008 R2，我建议您使用[ADO.NET Entity Framework](http://msdn.microsoft.com/en-us/data/ef.aspx)之类的 ORM 工具来访问您的数据库——最好使用最新版本的[EF 5](http://blogs.msdn.com/b/adonet/archive/2012/08/15/ef5-released.aspx)。

网上有大量关于如何启动和运行它的教程——一个很好的教程是[使用实体框架创建模型类](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/creating-model-classes-with-the-entity-framework-cs)。

为了让您了解它的简单程度，这里有一个示例，说明您实现所需的最少代码量：

```
using (var db = new MyDbContext())
{
    var specialDates = db.SpecialDatesTable.ToList();
} 
```

# memory-leaks - 任何可以找到内存泄漏java代码的java静态代码分析器？

> ID：12856340
> 
> 赞同：2
> 
> 时间：2012-10-12T09:43:47.580
> 
> 标签：memory-leaks, jvm, profiling, profiler, static-code-analysis

    是否有任何 Java 静态代码分析器可以检测可能导致内存泄漏的代码？我知道 JVM 分析器用于此目的，但这无助于我们在开发过程中放置​​检查点。

   教育开发人员了解最佳实践是一方面，但我如何将自动化流程作为检查点？

欢迎任何想法或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:41:47.530

从我的研究人员的角度来看，我能想到的最接近的是`COSTA`：[http ://costa.ls.fi.upm.es/](http://costa.ls.fi.upm.es/)

这是一个使用静态分析计算程序/方法使用的内存量的工具。也许开发人员（随意询问，他们是好人）可以告诉您是否`COSTA`是满足您需求的好选择（或者他们可能知道更好的东西）。

# android - ViewPager 和 Toast

> ID：12856341
> 
> 赞同：0
> 
> 时间：2012-10-12T09:43:52.087
> 
> 标签：android, android-viewpager, toast

我有一个`ViewPager`从远程服务器加载图像的。我的问题是，一旦选择了特定位置（未单击），我不知道如何为其赋予功能。比方说，我滑动视图寻呼机，直到它到达特定图像，如图像编号 5，我想显示一些吐司说“图像 5”。

```
pager.setOnItemClickListener(new OnItemClickListener() {
public void onItemClick(AdapterView<?> arg0, View arg1, int position,long id) {  

 public class ImagePagerActivity extends BaseActivity {

    private ViewPager pager;

    private DisplayImageOptions options;

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.ac_image_pager);
    Bundle bundle = getIntent().getExtras();
    String[] imageUrls = bundle.getStringArray(Extra.IMAGES);
    int pagerPosition = bundle.getInt(Extra.IMAGE_POSITION, 0);

    options = new DisplayImageOptions.Builder()
                .showImageForEmptyUri(R.drawable.image_for_empty_url)
                .cacheOnDisc()
                .imageScaleType(ImageScaleType.IN_SAMPLE_INT)
                .build();

    pager = (ViewPager) findViewById(R.id.pager);
    pager.setAdapter(new ImagePagerAdapter(imageUrls));
    pager.setCurrentItem(pagerPosition);

    }

    protected void onStop() {
    imageLoader.stop();
    super.onStop();
    }

    private class ImagePagerAdapter extends PagerAdapter {

    private String[] images;
    private LayoutInflater inflater;

    ImagePagerAdapter(String[] images) {
    this.images = images;
    inflater = getLayoutInflater();
    }

    public void destroyItem(View container, int position, Object object) {
    ((ViewPager) container).removeView((View) object);
    }

    public void finishUpdate(View container) {
    }

    public int getCount() {
    return images.length;
    }

    public Object instantiateItem(View view, int position) {
                final View imageLayout = inflater.inflate(R.layout.item_pager_image, null);
                final ImageView imageView = (ImageView) imageLayout.findViewById(R.id.image);
                final ProgressBar spinner = (ProgressBar) imageLayout.findViewById(R.id.loading);

    imageLoader.displayImage(images[position], imageView, options, new ImageLoadingListener() {

    public void onLoadingStarted() {
    spinner.setVisibility(View.VISIBLE);
    }

    public void onLoadingFailed(FailReason failReason) {
    String message = null;
    switch (failReason) {
    case IO_ERROR:
    message = "Input/Output error";
    break;
    case OUT_OF_MEMORY:
    message = "Out Of Memory error";
    break;
    case UNKNOWN:
    message = "Unknown error";
    break;
    }
    Toast.makeText(ImagePagerActivity.this, message, Toast.LENGTH_SHORT).show();

    spinner.setVisibility(View.GONE);
                              imageView.setImageResource(android.R.drawable.ic_delete);
                    }

    public void onLoadingComplete(Bitmap loadedImage) {
    spinner.setVisibility(View.GONE);
    Animation anim = AnimationUtils.loadAnimation(ImagePagerActivity.this, R.anim.fade_in);
    imageView.setAnimation(anim);
    anim.start();
    }

    public void onLoadingCancelled() {
    // Do nothing
    }
    });

    ((ViewPager) view).addView(imageLayout, 0);
    return imageLayout;
    }

    public boolean isViewFromObject(View view, Object object) {
    return view.equals(object);
    }

    public void restoreState(Parcelable state, ClassLoader loader) {
    }
    public Parcelable saveState() {
    return null;
    }

    public void startUpdate(View container) {
    }
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:50:22.903

You can implement `onPageChangeListener`, Than you can set this pageChageListener to your ViewPager using (`setOnPageChangeListener()`) ...

```
public class ImagePagerActivity extends BaseActivity implements onPageChangeListener {
    private ViewPager pager;
    // other variables here

    public void onCreate(Bundle savedInstanceState) {
        // create view Pager 
        // other variables 
        pager.setOnPageChangeListener(this);
    }

    // methods for Page Change Listener
    @Override
    public void onPageSelected(int pos) {
        if (pos==5) {
          //show Toast here 
        }
    }

    @Override
    public void onPageScrollStateChanged(int arg0) {
        // do Nothing
    }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {
        // do Noting
    }

}// class def ends here 
```

**edit..**

Use this short hand version

```
Pager.setOnPageChangeListener(new OnPageChangeListener() {

    @Override
    public void onPageSelected(int arg0) {
        if (pos==5) {
            //show Toast here 
        }
    }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {
        // TODO Auto-generated method stub
    }

    @Overridee3public void onPageScrollStateChanged(int arg0) {
        // TODO Auto-generated method stub
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:49:27.740

您应该使用[OnPageChangeListener](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html)。

您可以使用as`onPageSelected(int position)`方法获取当前位置。

就像是

```
pager.setOnPageChangeListener(this); 
```

然后让你`ImagePagerActivity`实现`OnPageChangeListener`接口：

```
public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
}

public void onPageSelected(int position) {
    Toast.makeText(getApplicationContext(), "image " + position, Toast.LENGTH_SHORT).show();
}

public void onPageScrollStateChanged(int state) {
} 
```

# java - Java 套接字写入挂起？

> ID：12856342
> 
> 赞同：1
> 
> 时间：2012-10-12T09:43:54.950
> 
> 标签：java, sockets, stream, block

我的一个详尽的 JUnit 在重复过程中被阻塞。

该流程非常类似于 FTP 上的被动检索：

```
JUnit ----------- MOVE_REQ (dst port 4104) --------------------> Server
loop {
    JUnit <------ SEND_REQ with the object (dst port 1104) ---------- Server
    JUnit --------------- SEND_RSP  (same connection) --------------> Server
}
JUnit <-------- MOVE_RSP (same connection as first one) ----------- Server 
```

所有该链都由 JUnit 同时在多个线程中同时执行。JUnit 端的服务器（参加 SEND_REQ 的那个）是一个 5 个线程的池，与另一端的服务器完全相同。

在调试中，我可以看到服务器在 16384 字节的 OutputStream.write 中挂起 SEND_REQ。另一方面，jUnit 的服务器在读取流时卡住了，而 InputStream.read 只有 6 个字节。

我想到的第一件事是我没有关闭所有连接，因此缓冲区有任何泄漏。但是我已经用 TcpView 验证过了，没问题，**当时只有一个连接**：

![在此处输入图像描述](../Images/6f9092d29ef8dd9f31ecc39ce63c92f5.png)

知道为什么会发生这种情况吗？

# iphone - 在 iOS6 中将 shouldAutorotate 传播到深度模式视图控制器的正确方法

> ID：12856344
> 
> 赞同：2
> 
> 时间：2012-10-12T09:43:56.603
> 
> 标签：iphone, objective-c, ios, xcode, ipad

`shouldAutorotate`传播到`modal viewcontroller`iOS6深处的正确方法是什么

考虑以下示例：

1.  `Tabbed Application`在 XCode 4.5 中创建一个新示例
2.  在 中`Summary`，选择**所有方向**
3.  创建一个新的简单`UITabBarController`，例如`MyTabBarViewController`并添加代码

    ```
    - (BOOL)shouldAutorotate {
        return YES;
    }

    - (NSUInteger)supportedInterfaceOrientations {
        return UIInterfaceOrientationMaskAll;
    } 
    ```

4.  在 AppDelegate 中，替换为`UITabBarController`by`MyTabBarViewController`以挂钩旋转

    ```
    self.tabBarController = [[MyTabBarViewController alloc] init]; 
    ```

5.  现在旋转应该可以工作了，并在 中`FirstViewController`添加代码以在单击时显示**模态视图控制器**

    ```
    -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

        UIViewController * viewController2 = [[SecondViewController alloc] 
            initWithNibName:@"SecondViewController_iPhone" bundle:nil];

        [self presentViewController: [[UINavigationController alloc] 
            initWithRootViewController:viewController2] 
            animated:YES 
            completion:nil];
    } 
    ```

**问题：**

现在由于`SecondViewController`被 a 包裹`UINavigationController`，即使我已经添加`shouldAutorotate`到 SecondViewController 中，也无法正确完成倒置旋转。

唯一的解决方法是创建一个自定义`UINavigationController`并实现`shouldAutorotate`，这应该可以工作。

但是这种方法听起来很愚蠢，它需要我通过实现来修复所有 UI 类`shouldAutorotate`，我不能再使用速记`[UINavigationController alloc] initWithRootViewController...`，我必须实现所有这些`UITabBarController`和`UINavigationController`.

有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:50:13.013

这并不愚蠢，而且似乎是正确的方法。您可以创建 UINavigationController 的子类，并使用 `[[MyNavigationController alloc] initWithRootViewController:...]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:50:49.567

Have you tried this:

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didRotate:) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

It's a notification sent by the device which tell the observer about the rotation. Do not forget to removeObserver when you don't need anymore

# android - 无法打开 Eclipse

> ID：12856347
> 
> 赞同：2
> 
> 时间：2012-10-12T09:44:08.217
> 
> 标签：android, eclipse

我通过帮助->检查 eclipse JUNO 中的更新进行了更新。

下载更新后，它要求我重新启动，现在我在开始时收到一条错误消息，要求我检查日志文件。

我该如何解决这个问题。？

ENTRY org.eclipse.osgi 4 0 2012-10-12 15:16:08.385 !MESSAGE 应用程序错误 !STACK 1 java.lang.RuntimeException: 在注册表中找不到应用程序“org.eclipse.ui.ide.workbench” . 可用的应用程序有：org.eclipse.ant.core.antRunner、org.eclipse.equinox.app.error、org.eclipse.equinox.p2.director、org.eclipse.equinox.p2.garbagecollector.application、org.eclipse .equinox.p2.publisher.InstallPublisher、org.eclipse.equinox.p2.publisher.EclipseGenerator、org.eclipse.equinox.p2.publisher.ProductPublisher、org.eclipse.equinox.p2.publisher.FeaturesAndBundlesPublisher、org.eclipse.equinox .p2.reconciler.application、org.eclipse.equinox.p2.repository.repo2runnable、org.eclipse.equinox.p2.repository.metadataverifier、org.eclipse.equinox.p2.artifact.repository.mirrorApplication、org.eclipse.equinox .p2.metadata.repository。构建。构建。在 org.eclipse.equinox.internal.app.EclipseAppContainer.startDefaultApp(EclipseAppContainer.java:248) 在 org.eclipse.equinox.internal.app.MainApplicationLauncher.run(MainApplicationLauncher.java:29) 在 org.eclipse.core.runtime .internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79) 在 org.eclipse.core.runtime.adaptor.EclipseStarter .run(EclipseStarter.java:353) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke （未知来源）在 sun.reflect.DelegatingMethodAccessorImpl.invoke（未知来源）在 java.lang.reflect.Method。

# inheritance - 身体标签内忽略了 Wicket 1.5/6 片段标记 - 解决方法？

> ID：12856351
> 
> 赞同：1
> 
> 时间：2012-10-12T09:44:21.227
> 
> 标签：inheritance, wicket, fragment

在从 1.4x 迁移过程中，我遇到了查找片段标记的问题。

我使用页面继承，并且在子页面上有我的片段定义，由**wicket:extend**包围。我在**包含**. 生成的 MarkupStream 然后包含正文标记内的片段代码。

[在标记查找期间，将跳过](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.wicket/wicket-core/6.0.0-beta2/org/apache/wicket/markup/Markup.java#209)整个部分：

```
if (tag.isOpen() && !tag.hasNoCloseTag() && !(tag instanceof WicketTag) &&
                    !"head".equals(tag.getName()) && !tag.isAutoComponentTag())
                {
                    stream.skipToMatchingCloseTag(tag);
                } 
```

我不明白为什么要跳过 MarkupStream 中 90% 的元素。这样所有片段都需要在首页的标记中定义......

任何解决方法建议？转换为面板不可行。可能的反特征？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:24:18.777

找到有关此（已知问题）的更多信息：

[https://issues.apache.org/jira/browse/WICKET-4545](https://issues.apache.org/jira/browse/WICKET-4545)

[http://apache-wicket.1842946.n4.nabble.com/MarkupNotFoundException-for-Fragment-and-TransparentWebMarkupContainer-td4619968.html](http://apache-wicket.1842946.n4.nabble.com/MarkupNotFoundException-for-Fragment-and-TransparentWebMarkupContainer-td4619968.html)

# python - 关闭窗口时崇高文本未保存的文件

> ID：12856359
> 
> 赞同：2
> 
> 时间：2012-10-12T09:44:57.337
> 
> 标签：python, sublimetext2

我想知道当我关闭整个窗口（如`alt-f4`）时究竟会发生什么，并且它不会要求我提供文件名来保存文件。令人惊讶的是，在重新打开时，一切都会按原样重新打开。我怎么知道缓冲区被保存在哪里？

# java - 比较不同文件的java文件中的值

> ID：12856364
> 
> 赞同：-1
> 
> 时间：2012-10-12T09:45:37.203
> 
> 标签：java, text-files

在 Java 中，如果我在一个大文件中有一个变量的值，并且我想快速将该变量值与其在其他文件中的值进行比较，那么最好的方法是什么？第一个文件可能有超过一百万个唯一变量，我想将它们与其他文件中的值进行比较。也可以有很多比较文件。

有关文件的详细信息：文件存储不同时间片的不同变量的值，并包含数百万条记录和可能数百万个唯一变量。

格式
变量，值 A 为变量，值 B 为变量，值 C 为变量
id 1，一些值，一些值，一些值
id 2，一些值，一些值，一些值
id 3，一些值，一些值，一些值
.
.
.
id 3000000，一些值，一些值，一些值

我必须对 A、B、C 的值进行统计。我想我可以将结果保存在一个对象中一个时间片，但不能保存其他时间片，所以我应该写入文件并再次读取吗？也可能有很多时间片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:56:11.957

Your question is short on many important details, but I'm assuming that you are talking about files consisting of name-value pairs in some format, and that a given name appears at most once in each file.

This lends itself to the classic sort-merge approach:

1.  Sort all files based on the names.
2.  Pick 2 files to be compared:
3.  Read the name/value pairs from the 2 files in parallel:
    *   when names are equal, compare the corresponding values, then skip both pairs
    *   when the names are not equal, skip the pair that has the smaller name, and read the next one from that file.
4.  Stop when you reach the end of either file.

Reference: [http://en.wikipedia.org/wiki/Mainframe_sort_merge](http://en.wikipedia.org/wiki/Mainframe_sort_merge)

* * *

Note: If you have of the order of a few million records, you should be able to do the sorting and merging in memory ... on a current generation home PC. If you have billions of records, you will need to use a sort algorithm that splits each (large) input file into subfiles, sorts each subfile, and then merges the result.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:50:21.183

使用 Java 属性文件。[甲骨文文档](http://docs.oracle.com/javase/tutorial/essential/environment/properties.html)

它很好地管理了这样的键值对。

# bash - 检查流程输出的每一行，如果满足条件则执行操作

> ID：12856372
> 
> 赞同：1
> 
> 时间：2012-10-12T09:46:10.887
> 
> 标签：bash, unix

我不太擅长 bash 语法和 bash 本身。基本上，我想在进程创建输出时实时检查，是否打印了具有特定内容的特定行，以及是否执行某些操作。

```
 processName | while read myLine; if [ $myLine -eq "Loading X module" ]; then echo 'OMG' fi; done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:07:26.507

您的语法看起来不错，但您可能会遇到输出缓冲的问题。

最好让您`processName`认为它在终端中运行。这可以使用一个名为的程序来实现`unbuffer`：

```
unbuffer processName | while read myLine; if [ $myLine -eq "Loading X module" ]; then echo 'OMG' fi; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:26:35.637

引用你的变量：

```
if [ "$myLine" -eq "Loading X module" ]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T13:40:09.430

哦，如果您的问题是“bash：意外标记‘完成’附近的语法错误”，那么请执行！

```
while read myLine; do if [ $myLine -eq "Loading X module" ]; then echo 'OMG' fi; done 
```

如果您发布您收到的错误消息，您将获得更多相关的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-29T17:15:17.890

你应该能够做到这一点：

```
processname | sed -n -e "/^Loading X Module$/p" | sed "s/^.*$/OMG/" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T16:25:58.053

你应该替换这个

```
if [ $myLine -eq "Loading X module" ]; 
```

if [ "$myLine" == "加载 X 模块" ];

该`-eq`运算符用于整数比较。你应该引用`$myLine`，因为它包含导致测试表达式不起作用的空格。

# domain-driven-design - 持久性和存储库

> ID：12856373
> 
> 赞同：2
> 
> 时间：2012-10-12T09:46:12.907
> 
> 标签：domain-driven-design

我在网上浏览了不同的例子。我已经在很多地方看到存储库仅在 DDD 中用于聚合根的持久性。然而在 DDDSample.Net 上，似乎在持久层中有存储库，用于持久化非聚合单个实体。

这是我期望找到的，所以我认为存储库不仅保留在 DDD 中仅用于持久聚合根，这是否正确？

干杯，阿德里安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T10:37:43.203

领域驱动设计中的存储库是关于聚合的。实体通过它们的聚合根访问。还有 Fowler 对[存储库模式](http://martinfowler.com/eaaCatalog/repository.html)的定义，它是关于“域对象”的。

# ruby-on-rails - 使用 ILIKE 访问 url 时出错

> ID：12856374
> 
> 赞同：0
> 
> 时间：2012-10-12T09:46:12.977
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试根据指定的 url 访问页面，但出现以下错误

> SQLite3::SQLException：靠近“ILIKE”：语法错误：SELECT“pages”。* FROM “pages” WHERE（'testimonials.html' ILIKE path || '%' AND path <> ''） LIMIT 1

我正在尝试这样的事情

```
@page = Page.where("'#{params[:url]}' ILIKE path || '%' AND path <> ''").first 
```

有什么建议么 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:58:32.630

By the very little i got your question i think you want something like following

```
@page = Page.where("(path LIKE '#{params[:url]}' OR path = '%') AND path != ''").first 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:43:10.177

```
 @page = Page.where("(path LIKE ? OR path = '%') AND path != ''",params[:url]).first 
```

# sql - 从具有单引号数据的 csv 文件加载 postgreSQL 数据的正确 COPY 命令？

> ID：12856377
> 
> 赞同：18
> 
> 时间：2012-10-12T09:46:28.420
> 
> 标签：sql, postgresql, csv, copy, quote

我有 csv 文件，其内容如下：

```
10,53073,0,0,'Y','2008-05-30 21:46:55',0,'2008-05-30 21:48:04',0,53071,2 
```

我想将 csv 数据加载到 my_table 中。

```
CREATE TABLE my_table
(
  ad_tree_id numeric(10,0) NOT NULL,
  node_id numeric(10,0) NOT NULL,
  ad_client_id numeric(10,0) NOT NULL,
  ad_org_id numeric(10,0) NOT NULL,
  isactive character(1) NOT NULL DEFAULT 'Y'::bpchar,
  created timestamp without time zone NOT NULL DEFAULT now(),
  createdby numeric(10,0) NOT NULL,
  updated timestamp without time zone NOT NULL DEFAULT now(),
  updatedby numeric(10,0) NOT NULL,
  parent_id numeric(10,0),
  seqno numeric(10,0),
  CONSTRAINT ad_treenodemm_pkey PRIMARY KEY (ad_tree_id , node_id ),
  CONSTRAINT adtree_adtreenodemm FOREIGN KEY (ad_tree_id)
      REFERENCES ad_tree (ad_tree_id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE CASCADE DEFERRABLE INITIALLY DEFERRED,
  CONSTRAINT ad_treenodemm_isactive_check CHECK (isactive = ANY (ARRAY['Y'::bpchar, 'N'::bpchar]))
) 
```

当我在 pgAdmin III 工具中运行此命令时：

```
COPY my_table FROM 'c:\downloads\file.csv' DELIMITERS ',' CSV; 
```

我收到错误：

```
ERROR:  value too long for type character(1)
CONTEXT:  COPY my_table, line 1, column isactive: "'Y'" 
```

然后我修改了这样的命令：

```
COPY my_table FROM 'c:\downloads\file.csv' DELIMITERS ',' CSV QUOTE ''';
COPY my_table FROM 'c:\downloads\file.csv' DELIMITERS ',' CSV QUOTE '\'';
COPY my_table FROM 'c:\downloads\file.csv' DELIMITERS ',' CSV QUOTE '\'' ESCAPE '\';
COPY my_table FROM 'c:\downloads\file.csv' DELIMITERS ',' CSV QUOTE '\'' ESCAPE \; 
```

尝试时都失败了。

那么，任何人都可以向我展示这种情况下正确的 COPY 命令吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-12T10:27:57.590

双单引号（如果`standard_conforming_strings`打开，请参阅[文档](http://www.postgresql.org/docs/current/static/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS)）

```
COPY my_table FROM 'c:\downloads\file.csv' DELIMITERS ',' CSV QUOTE ''''; 
```

或使用非标准 PostgreSQL 特定的[转义字符串](http://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-STRINGS-ESCAPE)：

```
COPY my_table FROM 'c:\downloads\file.csv' DELIMITERS ',' CSV QUOTE E'\''; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-01T12:52:17.120

遇到此错误的其他一些人可能想要检查文件以查看它是否在第一行包含标题。虽然这不是您的问题，但值得注意的是解决它的方法：

```
COPY my_table FROM 'c:\downloads\file.csv' WITH DELIMITER ',' CSV HEADER; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T10:20:16.127

没关系，我得到了答案：

```
COPY my_table FROM 'c:\downloads\file.csv' DELIMITERS ',' CSV QUOTE ''''; 
```

# php - PHP echo -> 字符串为 0？

> ID：12856382
> 
> 赞同：0
> 
> 时间：2012-10-12T09:46:50.403
> 
> 标签：php, preg-match, echo

我将如何避免以下情况：

```
$_SESSION['myVar']=preg_match("[^a-zA-Z]",'',$_SESSION['myVar']);

echo $_SESSION['myVar']; 
```

显示

```
0 
```

而是显示/输出 var 内容？**preg_match**给出**混合**类型，但这不应该是问题......

为什么，字符串本身的值不能用 echo 寻址（通过对其内容进行**映射**，就**可以**了）？

以前我有

```
$_SESSION['myVar']=ereg_replace("[^a-zA-Z]",'',$_SESSION['myVar']); 
```

ant 的输出 óf **ereg_replace**正确显示了变量内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T09:49:08.403

PHP 中的 PCRE 需要[分隔符*^([docs])*](http://php.net/manual/en/regexp.reference.delimiters.php)并且您可能需要[`preg_replace` *^([docs])*](http://php.net/manual/en/function.preg-replace.php)：

```
preg_replace("/[^a-zA-Z]/",'',$_SESSION['myVar']); 
```

假设您有`preg_replace`，即使那样，括号 ( `[...]`) 也会被解释为分隔符，因此引擎会从字面上尝试匹配`a-zA-Z`字符串的开头，并且不会将构造函数解释为字符类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:50:54.387

`preg_match`返回一个 int，不混合： http: [//php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

使用matches 参数来获取您的匹配项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:55:18.970

问题是 preg_match 返回一个布尔值，如果模式匹配则返回 1，如果不匹配则返回 0。preg_match 只是匹配出现，它不会替换它们。以下是您使用 preg_match 的方法：

```
$matched = array();
preg_match("/[^a-zA-Z]/", $_SESSION["myVar"], $matches);

print_r($matches); // All matches are in the array. 
```

# c# - 在 ItemTemplate 选择上添加命令

> ID：12856391
> 
> 赞同：1
> 
> 时间：2012-10-12T09:47:17.407
> 
> 标签：c#, wpf, click, itemtemplate

我认为这是一个非常简单的问题，但我找不到答案。我在数据模板中定义了一个 itemtemplate。当一个项目被选中时，我想触发一个命令来选择我的元素的名称并将其应用到其他地方。目前 MouseDown 事件不接受我的命令。

```
<ListView Margin="4" Grid.Row="1" Grid.ColumnSpan="2" ItemsSource="{Binding Path=ExistingStateInfos, ElementName=Window}"
                  SelectedItem="{Binding Path=SelectedStateInfo, ElementName=Window}" x:Name="statinfoListview">
            <ListView.ItemTemplate>
                <DataTemplate DataType="{x:Type States:StateInfo}">
                    <TextBlock Text="{Binding Path=Name}" MouseDown="{x:Static MyWindow.ApplyStateInfoNameToStateCommand}" />
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:51:19.037

您不能将命令直接设置为事件处理程序。

`EventToCommand`从[MVVM LightToolkit](http://www.galasoft.ch/mvvm/)使用

```
<DataTemplate DataType="{x:Type States:StateInfo}">
    <TextBlock Text="{Binding Path=Name}">
       <i:Interaction.Triggers>
         <i:EventTrigger EventName="MouseDown">
            <Command:EventToCommand Command="{Binding YourCommand, Mode=OneWay}" />
         </i:EventTrigger>
       </i:Interaction.Triggers>
    </TextBlock>
 </DataTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:57:26.237

事实上，这不是我胡说的，我只是添加做

```
<TextBlock Text="{Binding Path=Name}" MouseDown="{x:Static ApplyStateInfoNameToState_Click}" /> 
```

抱歉今天是星期五。周末愉快 ：）

# jquery - Jquery前置不起作用

> ID：12856392
> 
> 赞同：-1
> 
> 时间：2012-10-12T09:47:30.527
> 
> 标签：jquery

我正在练习一些 jquery 函数，但我被困在这里，prepend 不适合我。谁能请为什么它不起作用？

*HTML：*

```
<html>
    <head><title>BLAH</title></head>

    <body>
<div id="waterwheel-carousel-default">
    <a href="#" id="Up" class="UpLink">Up</a>
    </div>
    </body>
</html> 
```

*JavaScript：*

```
var noofpagelinks = 2;
var count;
for (count = 0; count < noofpagelinks; count++) {
    $(".waterwheel-carousel-default").prepend("<a href=# class=PageLink id=PageLink" + count + "/>" + count + "</a>");
}​ 
```

*JSFiddle：http:* [//jsfiddle.net/YGSS4/4/](http://jsfiddle.net/YGSS4/4/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T09:49:22.453

您应该使用 ID 选择器，而不是类

更改`$(".waterwheel-carousel-default")` 为`$("#waterwheel-carousel-default")`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T10:02:42.963

```
<div id="waterwheel-carousel-default"> 
```

代码中的小错误。

```
$(".waterwheel-carousel-default") 
```

`.`是一个类选择器，它将选择具有 name 的元素`waterwheel-carousel-default`。但是在您的代码中，您正在使用`id="waterwheel-carousel-default"` . 所以你需要使用

```
$('#waterwheel-carousel-default') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T09:49:54.863

`waterwheel-carousel-default`是 ID，所以你应该使用 hash `#`：

```
var noofpagelinks = 2;
for (var count = 0; count < noofpagelinks; count++) {
    $("#waterwheel-carousel-default")
      .prepend("<a href='#' class='PageLink' id='PageLink"
        + count + "'>" + count + "</a> ");
}​ 
```

**演示：http:** [//jsfiddle.net/YGSS4/10/](http://jsfiddle.net/YGSS4/10/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T09:50:35.177

```
$(".waterwheel-carousel-default")
   ^-----here is the problem it should be # since the "waterwheel-carousel-default"
                        is id (<div id="waterwheel-carousel-default"> ) 
```

还

```
prepend("<a href=#      class=PageLink    id=PageLink"

                 ^^          ^^^^^^^^^^     ^^^^^^^^^^
 should be    href='#'   class='PageLink'  id='PageLink' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T09:52:08.583

试试这个代码：它工作正常：

```
var noofpagelinks = 2;
var count;
for (count = 0; count < noofpagelinks; count++) {
    $("#waterwheel-carousel-default").prepend('<a href="#" class="PageLink" id="PageLink"' + count + '>' + count + '</a>');
} 
```

JSFIDDLE：http: [//jsfiddle.net/fQQ68/](http://jsfiddle.net/fQQ68/)

# javascript - 从jQuery中的对象数组中提取单个属性的每个值

> ID：12856393
> 
> 赞同：10
> 
> 时间：2012-10-12T09:47:31.977
> 
> 标签：javascript, jquery

我需要创建一个新对象，迭代最初看起来像这样的对象数组：

```
startObj = [{'prop': true}, {'prop': false}]; 
```

我希望结果是：

```
endObj = {0: true, 1: false} 
```

我正在考虑使用`$.each`，但后来我不知道如何从这里开始。有什么提示吗？

```
$.each([{'prop': true}, {'prop': false}], function (i, o) {
    var newObj;
    // the new object should look like this
    // newObj = {0: true, 1: false}
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T09:53:23.147

这是一个单线。

```
var newObj = $.map(oldObj, function(val) { return val.prop; }); 
```

[js小提琴](http://jsfiddle.net/V9gej/)。

如果 OP 真的想要一个对象（或者更确切地说，不想要一个数组）......

```
var newObj = $.extend({}, $.map(oldObj, function(val) { return val.prop; })); 
```

[js小提琴](http://jsfiddle.net/8wYJG/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-12T09:50:29.943

```
var newObj = {};
$.each([{'prop': true}, {'prop': false}], function (i, o) {
    newObj[i] = o.prop;
}); 
```

现场示例：http: [//jsfiddle.net/8X48q/](http://jsfiddle.net/8X48q/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:52:03.303

首先，这只是原生 JS，这里不需要 jQuery。

```
var startObj = [{'prop': true}, {'prop': false}],
    endObj = [], // This could also be {} if you want but if you just have an array in startObj, it doesn't make much sense
     i = 0,
     i_max = startObj.length;

for (i; i < i_max; i++) {
    endObj.push( startObj[i].prop );
    // if you changed endObj to be {} then use the following line instead of the one above
    // endObj[i] = startObj[i].prop;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T09:53:50.953

您实际上并不是在这里创建一个对象，而是一个数组：

```
var newObj = [];//array
$.each([{'prop': true}, {'prop': false}], function (i, o)
{
    newObj[i] = o.prop
}); 
```

但是为了避免全局变量，您可能需要使用 IIFE：

```
var newObj = (function()
{//takes any amount of objects as argument
    var returnArray = [];
    var argumentsToArray = Array.prototype.slice.apply(arguments,[0]);//create array of objects passed
    $.each(argumentsToArray, function (i, o)
    {
        returnArray[i] = o.prop
    });
    return returnArray;//is assigned to newObj
})({'prop': true}, {'prop': false});//1 obj, 2, 3, 4, 5... doesn't matter 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-10-12T10:02:56.590

```
var obj = "{";
$.each([{'prop': true}, {'prop': false}], function (index, o) {
    obj += '"' + index  + '":'  + o.prop + ",";
});
var newObj = obj.substring(0, obj.length - 1);
newObj += "}";
console.log(newObj);
console.log($.parseJSON(newObj));
​ 
```

# selenium - 如何通过 id 的存在来查找页面上的所有 WebElement？

> ID：12856397
> 
> 赞同：1
> 
> 时间：2012-10-12T09:47:38.277
> 
> 标签：selenium, webdriver, selenium-webdriver, xpath

我知道我可以通过以下方式找到元素`id`：

```
driver.findElement(By.xpath("//*[@id='some_id']")); 
```

我可以找到所有带有 this 的元素`id`，但我想找到带有`id`属性的所有元素。我正在寻找类似的东西：

```
driver.findElements(By.xpath("//*[@id]"));
// or
driver.findElements(By.xpath("//*[@id='*']"));
// or
driver.findElements(By.xpath("//*[contains(@id)]")); 
```

我正在使用 Java。谢谢！

UPD：对我来说唯一的解决方案是通过 获取所有元素`"//*"`，遍历它们并获取它们的`id`属性。有没有办法一次获取所有属性，比如`"//*@A"`从 Java 中获取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:55:45.500

*A 包含“t”的元素的属性 A*

```
//E[contains(@A,'t')]/@A 
```

或者

```
//E[contains(@A,'t')]@A 
```

*任何元素的属性 A*

```
//*/@A 
```

或者`//*@A`

所以我也用java。因此，如果您需要查找具有 id 属性的所有元素，您可以简单地使用

```
driver.findElements(By.xpath(//*@id)) 
```

希望这对您有所帮助。也看[这里](http://www.simple-talk.com/dotnet/.net-framework/xpath,-css,-dom-and-selenium-the-rosetta-stone/)。不错的 xpath 和 css 选择器手册

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T19:13:11.213

你有没有尝试过`"//*[contains(@id, '')]"`

# c# - 使用实体框架进行插入时的 C# 动态转换

> ID：12856401
> 
> 赞同：0
> 
> 时间：2012-10-12T09:47:52.617
> 
> 标签：c#, entity-framework

我有一个数据库，其中包含各种对象的映射值表。

例如，`Colour`表包含`BLK > Black, BLU > BLUE, ORA > ORANGE`等...而`CarType`表包含`4DH > Four-door hatchback, 4WD > Four wheel drive`等...

我首先使用实体​​框架代码，所以我有一个类似这样的上下文设置。

```
public class MappingContext : DbContext
{
    public MappingContext ()
        : base("Mappings")
    {
    }

    public DbSet<Colour> ColourMappings { get; set; }
    public DbSet<CarType> CarTypeMappings { get; set; }
} 
```

与我的数据库中的每个表相关的每个对象都`Mapping`继承自一个基类，如下所示：

```
public class Mapping
{
    public int Id { get; set; }

    public string OrignalValue { get; set; }

    public string MappedValue { get; set; }
}

public class CarType : Mapping{}
public class Colour : Mapping{} 
```

现在我要做的是从一个填充了“模板”的 XML 文件中读取这些映射，其中包含映射并将它们插入数据库中。

我有以下方法可以做到这一点：

```
public void InsertMappings(XDocument xml, string templateName, Type typeToInsert)
{
    // Here I find the relevent mappings 

    using (var repo = new Repository())
    {
        var mapppings = mappings.Select(mapping => new Mapping
        {
            MappedValue = mapping.Value,
            OrignalValue = GetCode(mapping)
        });

        foreach (var mapping in mapppings.ToList())
        {
            var map = (typeToInsert)mapping  // << This line will not compile

            repo.Insert(map);
        }

    repo.Save();
   }
} 
```

这将不符合要求，因为它无法识别尝试的强制转换“(typeToInsert)mapping”。

所以基本上我需要知道的是在将它插入数据库时​​如何将这个映射对象转换为特定的映射对象？或者任何关于更好的方法的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:34:51.877

从它的外观来看，您正试图将一个实例转换`Mapping`为 a`CarType`或`Colour`它不起作用，因为`Mapping`它对这些类型一无所知，因为它是**基**类。

您的代码需要创建具体类型的实例，即`typeToInsert`并将其转换为`Mapping`. 您可以执行以下操作：

```
public void InsertMappings(XDocument xml, string templateName, Type typeToInsert)
{
    // Here I find the relevent mappings 

    using (var repo = new Repository())
    {
        foreach (var m in mappings)
        {
            // XML -> Entity
            var mapping = (typeToInsert)Activator.CreateInstance(typeToInsert);
            (mapping as Mapping).MappedValue = m.Value;
            (mapping as Mapping).OriginalValue = GetCode(m);
            // Update database
            repo.Insert(mapping);
        }
        repo.Save();
   }
} 
```

您可能也应该在这里使用泛型，您可以将您的方法重构为：

```
public void InsertMappings<T>(XDocument xml, string templateName)
{
    // Here I find the relevent mappings 

    using (var repo = new Repository())
    {
        foreach (var m in mappings)
        {
            // XML -> Entity
            var mapping = (T)Activator.CreateInstance(typeof(T));
            (mapping as Mapping).MappedValue = m.Value;
            (mapping as Mapping).OriginalValue = GetCode(m);
            // Update database
            repo.Insert(mapping);
        }
        repo.Save();
   }
} 
```

**用法**

```
InsertMappings<CarType>(xmlDoc, "CarTemplate");
InsertMappings<Colour>(xmlDoc, "ColourTemplate"); 
```

# python - 如何在 wxPython 的多行文本控件中禁用文本换行？

> ID：12856404
> 
> 赞同：1
> 
> 时间：2012-10-12T09:47:58.740
> 
> 标签：python, wxpython

我正在创建这样的文本控件：

```
wx.TextCtrl(
    panel, style=wx.NO_BORDER | wx.TE_MULTILINE | wx.TE_DONTWRAP | wx.HSCROLL
) 
```

我已经尝试了所有的组合，`wx.TE_DONTWRAP`但`wx.HSCROLL`我的文本输入仍然包含所有文本。我希望文本控件**从不**换行，而是添加一个水平滚动条。[这是完整的代码](http://pastebin.com/Le9P3KeU)，有趣的行是*171:187*。

* * *

我在**OSX 10.8.1**（Mountain Lion）上使用**wxPython 2.9.4.0 。**

 **结果截图：

![在此处输入图像描述](../Images/b9507b7db16a897a19014a8cbb045845.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:11:59.647

事实证明，这在带有 Python 2.9 的 OSX 上不起作用。我改用[StyledTextCtrl](http://www.wxpython.org/docs/api/wx.stc.StyledTextCtrl-class.html)代替它工作得很好。**

# sql - TSQL Running Totals 从前几行的总和聚合

> ID：12856406
> 
> 赞同：2
> 
> 时间：2012-10-12T09:48:05.123
> 
> 标签：sql, sum, aggregate-functions, rows

不知道该怎么说。假设我有一个选择返回这个。

```
Name, month, amount
John, June, 5
John, July,6
John, July, 3
John August, 10 
```

我想汇总并报告每个月的初始余额。

姓名、月份、期初余额。

```
john, may, 0
john, june, 0
john, july, 5
john, august, 14
john, September, 24 
```

我可以在 Excel 中使用单元格公式执行此操作，但是如何在 SQL 中执行此操作而不将值存储在某处？我有另一个带有财政月份的表，我可以使用左外连接来报告所有月份，只是不确定如何在 sql 中从前几个月汇总。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:53:43.777

```
select
name
, month
, (select sum(balance) from mytable 
   where mytable.month < m.month and mytable.name = m.name) as starting_balance
from mytable m
group by name, month 
```

这不如窗口函数好，但由于它们因数据库而异，因此您需要告诉我们您使用的是哪个系统。

***它是一个内联子查询，***性能不是很好。但至少很容易理解发生了什么！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:51:14.863

像这样使用分组

```
SELECT NAME, MONTH , SUM(Balance) FROM table GROUP BY NAME, MONTH 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:54:46.093

假设您的月份表示为日期，这将为您提供运行总数。

```
select t1.name, t1.month, sum(t2.amount)
from yourtable t1
left join yourtable t2 
     on t1.name = t2.name
     and t1.month>t2.month
group by t1.name, t1.month 
```

# authentication - 您知道哪种易于使用的嵌入式设备身份验证算法？

> ID：12856407
> 
> 赞同：0
> 
> 时间：2012-10-12T09:48:42.593
> 
> 标签：authentication, cryptography, embedded

我有一个代码大小有限的嵌入式设备 (E)。它使用 UART（USB、串行、..）与主机处理器 (H) 通信。我需要实现一个简单的主机处理器身份验证来解锁功能是我的嵌入式设备。

重要的问题是 USB/串行/UART 可以被嗅探，因此通道不安全。

用法应该如下：在制造过程中，我们生成一对密钥 Ke 和 Kh。E 存储 Ke E 生成 N 个随机字节 R，用密钥 Ke 将 R 加密为秘密 S 并发送给 H H 应该使用 Kh 加密 S 以显示 R H 将 R 发送给 E 并且 E 解锁一些功能

所以，

```
S = u(R, Ke)
R = v(S, Kh) 
```

一些加密功能在哪里`u()`以及在哪里`v()`（可能是那个`u = v`，但`u`必须易于在占用少量代码空间的嵌入式设备中实现）。

最好找到一个允许同一 Ke 有许多 Kh 的 alog，以便将它们提供给不同的用户。但这是可选的。

如上所述，通道是不安全的，所以我们不希望坐在 USB 上的邪恶（使用 USB 嗅探器）仅从 R 和 S 揭示 Ke 或 Kh（或从 S 生成 R 的方式）。

所以，异或将不起作用；）

请提出一些建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:02:01.267

您可以查看 CHAP，这是 PPP 支持的身份验证协议之一。 [查看关于 CHAP 的 Wikipedia 页面。](http://en.wikipedia.org/wiki/Challenge-Handshake_Authentication_Protocol)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:19:56.593

您的设备可以给处理器一些随机数并使用一些轻量级加密算法（例如 RC5）将答案验证为加密随机数吗？这也可以帮助您在设备和处理器之间建立安全通道。例如，答案可以是`RC5_CBC( CONCAT(key_for_secure_channel, nonce) )`。注意：nonce 必须写在最后，因此新的密钥完整性将由它们验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:23:03.110

您需要执行多少次？ K_h 和 K_e 每对是唯一的吗？最简单的方法是在设备和主机上生成一个随机的、预先共享的秘密（在制造期间），然后将其用作一次性密码。

一次性便笺的基本思想是你接受你的信息，异或是一个秘密。只要您的秘密与您的信息一样长，并且您只执行一次，那么您就可以了。嗅探您频道的人应该无法弄清楚消息是什么，因为他们也不知道秘密是什么。当然，当您发送解密后的回复时，在频道上嗅探的人将能够解密所有内容。

# jquery - 不同样式的无序列表上的手风琴滑块

> ID：12856414
> 
> 赞同：1
> 
> 时间：2012-10-12T09:49:12.857
> 
> 标签：jquery, accordion

这是我的html

```
<div id="1" class="category_group">
<ul class="top_level_category">
    <li><a>top level title 1</a>
        <ul class="sub_level_category">
            <li>lower level links</li>
            <li>lower level links</li>
            <li>lower level links</li>
            <li>lower level links</li>
        </ul>
    </li>
</ul> 
```

```
<div id="2" class="category_group">
<ul class="top_level_category">
    <li><a>top level title 2</a>
        <ul class="sub_level_category">
            <li>lower level links</li>
            <li>lower level links</li>
            <li>lower level links</li>
            <li>lower level links</li>
        </ul>
    </li>
</ul> 
```

这将是我的 jquery

```
$('div ul li ul').hide();
$('div ul li a').click(function() {
$(this).find('ul').show();
}); 
```

我正在制作手风琴但做不到，列表结构与正常的不同

[样本](http://jsfiddle.net/zU6wD/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:52:04.913

`find()`搜索选定元素的指定后代元素，您可以使用`next`方法：

```
$('div ul li a').click(function(e) {
    e.preventDefault();
    $(this).next('ul').toggle();
}); 
```

[http://jsfiddle.net/6rXp2/](http://jsfiddle.net/6rXp2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:51:11.563

Change `$(this).find('ul').show();` with `$(this).parent().find('ul').show();` or `$(this).next('ul').show();`

# typo3 - 排版内容本地化

> ID：12856419
> 
> 赞同：1
> 
> 时间：2012-10-12T09:49:19.840
> 
> 标签：typo3, typoscript, templavoila

我正在开发一个支持多语言的 TYPO3 网站。我正在使用 TemplaVoila 进行模板映射。网站以两种语言工作。但是**在 TemplaVoila 映射中使用 Typoscript 添加的内容仅以默认语言呈现，而其他语言的 Typoscript 内容则缺失。**

这是我的打字稿：

```
 lib.autherInfo = CONTENT
    lib.autherInfo {
      table = tt_content
  select {
            selectFields = cruser_id
         }
  renderObj = COA
  renderObj {

        10 = RECORDS
        10{
          source.field = cruser_id 
          tables = be_users
          dontCheckPid = 1
          conf.be_users = COA
          conf.be_users {
            10 = TEXT
            10.field = realName
            10.noTrimWrap = ||, |
            15 = RECORDS
            15{
                  source.field = usergroup 
                  tables = be_groups
                  dontCheckPid = 1
                  conf.be_groups = COA
                  conf.be_groups {
                  10 = TEXT
                  10.field = title
                  10.noTrimWrap = ||, |
              }
            }
            20 = TEXT
            20.dataWrap = <span><a href="mailto:{field:email}" >{field:email}</a></span>      
           }
         }
      }
    }
    lib.autherInfo.wrap = <p>by:&nbsp|</p> 
```

上述印刷品的输出标记为：

```
 <p>by:&nbsp;Administrator, admin, <span><a href="mailto:admin@kultur.com">admin@kultur.com</a></span></p> 
```

在其他语言中，输出为：

```
 <p>by:&nbsp;</p> 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T09:25:53.340

您的问题缺少您的typo3 语言配置。您至少可以设置**语言回退以获得一些输出。**示例配置

```
config {
    linkVars = L
    sys_language_uid = 0
    language = de
    locale_all = de_DE
    htmlTag_langKey = de
    sys_language_mode = content_fallback
    sys_language_overlay = hideNonTranslated

    linkVars := addToList(L)

    uniqueLinkVars = 1  
    // content fallback
    sys_language_fallBackOrder = 1,0
    sys_language_mode = content_fallback ; 1,0
    sys_language_overlay = 1
    sys_language_content = 1    
} 
```

尝试设置

```
sys_language_overlay = hideNonTranslated 
```

至

```
sys_language_overlay = 0 
```

# mongodb - 显示用户是否存在的 MongoDB 命令行（用于 puppet 'unless' 子句）

> ID：12856420
> 
> 赞同：11
> 
> 时间：2012-10-12T09:49:21.877
> 
> 标签：mongodb, puppet

我们正在使用基于 MongoDB 用户的身份验证，我想快速运行一个命令来检查数据库中是否已经创建了一个用户，这样 puppet 就不会重复尝试创建用户。

以下是我们如何检查副本集是否已初始化：

```
/usr/bin/mongo --host ${members[0]} --quiet --eval 'rs.status().ok' | grep -q 1 
```

身份验证是否可以使用类似的技巧？我已经检查了这里的文档[http://www.mongodb.org/display/DOCS/dbshel](http://www.mongodb.org/display/DOCS/dbshell+%28mongo%29+Reference) ​​l+%28mongo%29+Reference ，我看不到这样做的方法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-12T10:04:16.837

是的，在给定的数据库上，`db.system.users.find({user:'login'}).count()`如果用户不存在，您可以使用 which 将返回 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-06T09:58:11.630

感觉这个方法已经被弃用了，我需要下面的命令才能工作：

```
db.getUsers({filter: {'user': 'login'}}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-22T07:44:39.277

今天我刚刚尝试`-u`了命令`-p`选项`mongo`，它对我有用：

```
mongo --port 27037 --quiet -u superuser -p pwd 
    --eval "db.system.users.find({user:'user3'}).count()" admin 
```

请注意最后一个“admin”参数 - 它是您正在对其进行身份验证的数据库的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-31T18:30:36.787

检查用户是否`username`存在：

```
db.runCommand({ usersInfo: { user: "username", db: "admin" } }).users.length == 1 
```

如果用户存在则返回`true`，`false`否则返回。（如果用户是在另一个数据库中创建的，则替换`admin`为数据库的名称。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-21T06:08:40.800

你也可以使用`findOne`

`db.system.users.findOne({user:'login'})`

*   `null`如果没有用户，它会
*   如果找到它将返回用户

# objective-c - 在 Mac App Store 中搜索应用程序以打开文件

> ID：12856428
> 
> 赞同：0
> 
> 时间：2012-10-12T09:49:39.003
> 
> 标签：objective-c, macos, cocoa, app-store

有什么方法可以打开 Mac App Store 并搜索可以处理给定文件类型的应用程序？就像在 Finder 中一样：

```
Right Click > Open With > App Store... 
```

并将`uti:public.image`被插入搜索字段（用于图像）。

我可以通过搜索 App Store`macappstore://ax.search.itunes.apple.com/WebObjects/MZSearch.woa/wa/search?q=<searchstring>`但这不适用于某些链接`uti:public.image`，仅适用于像“iPhoto”这样的*正常搜索，例如*

遗憾的是，这些特定搜索只能在搜索字段中使用。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:24:00.643

在 App Store 搜索框中，输入`extension:`后跟有问题的扩展名。

# magento - 保存属性集时了解magento的错误

> ID：12856435
> 
> 赞同：0
> 
> 时间：2012-10-12T09:50:15.347
> 
> 标签：magento

从 exception.log 我有这个，我无法弄清楚究竟是什么意思。

```
Exception message: SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`shop`.`eav_attribute_group`, CONSTRAINT `FK_EAV_ATTR_GROUP_ATTR_SET_ID_EAV_ATTR_SET_ATTR_SET_ID` FOREIGN KEY (`attribute_set_id`) REFERENCES `eav_attribute_set` (`attribute_set_id`) ON DELETE) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:57:38.667

将 eav_attribute_set 从 MyISAM 更改为 InnoDB 解决了这个问题！

# silverlight - Windows Phone 中的九补丁图像

> ID：12856436
> 
> 赞同：2
> 
> 时间：2012-10-12T09:50:17.953
> 
> 标签：silverlight, windows-phone-7, nine-patch, brush, frameworkelement

在 Windows Phone UI 设计原则中，MS 建议使用纯色矩形或编码渐变控制背景，以避免多屏不兼容。但在很多需求中，使用图像作为控制背景是必要的。然后，使用 9-patch 图像技术。在 Android 和 IO 中，它是核心支持，但在 WP 中则缺乏。我尝试通过 3 种方法在 WP 中使用它：

1.  使用 9-cells Grid：将图像剪辑成 9 个补丁并将它们放置到单元格中。它工作正常，但我担心当有很多控制时应用程序性能会降低。

2.  使用自定义画笔：只有自定义画笔才能将 9-patch 图像绘制为 ImageBrush，但似乎 MS 不允许自定义画笔。

3.  使用 FramworkElement：像 Rectangle、Ellipse... 我想创建一个 FrameworkElement 可以绘制一个 9-patch 图像。但是，不能使用低级渲染。

我如何实施第二种和第三种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-09T23:24:31.010

我为 Windows Phone 创建了一个与 Android NinePatchDrawable 完全一样的库。你只需要设置一个位图image.9.png，宽度和高度......就完成了！你有你新的图像缩放到你想要的大小。好好享受 ：）。将来我会添加更多选项:)。

[GitHub链接](https://github.com/Douvi/WindowsPhone_NinePatch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:15:59.243

您可以使用 WriteableBitmap 来弥补低级渲染和自定义画笔的不足：http: [//msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap (v=vs.95 ).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap(v=vs.95).aspx)

这样，您可以完全控制如何渲染背景，然后可以将其分配给单个 Image 控件。但它比“使用带有 9 个图像控件的网格”方法复杂得多，而且性能提升可能微不足道。

# php - 使用 SimpleXML 获取 XML 属性

> ID：12856445
> 
> 赞同：1
> 
> 时间：2012-10-12T09:50:37.880
> 
> 标签：php, simplexml, youtube-api

我正在尝试获取该`$xml->entry->yt:statistics->attributes()->viewCount`属性，并且我尝试了一些使用 SimpleXML 的东西，但我真的无法让它工作！

尝试#1

```
<?php
$xml = simplexml_load_file("http://gdata.youtube.com/feeds/api/videos?author=Google");
echo $xml->entry[0]->yt:statistics['viewCount'];
?> 
```

尝试#2

```
<?php
$xml = simplexml_load_file("http://gdata.youtube.com/feeds/api/videos?author=Google");
echo $xml->entry[0]->yt:statistics->attributes()->viewCount;
?> 
```

两者都返回空白，尽管 SimpleXML 正在工作，但我试图获取提要的标题，这很有效！

有任何想法吗？

我在 SO 和其他网站上查看了大量其他示例，但不知何故这不起作用？PHP是否将'：'识别为截止，或者我只是在做一些愚蠢的事情？

谢谢，任何回复都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:06:17.623

如果您只想获取 youtube 视频的观看次数，则必须指定视频 ID。youtube ID 位于每个视频网址中。例如“http://www.youtube.com/watch?v=ccI-MugndOU”所以 id 是 ccI-MugndOU。为了获得观看次数，请尝试以下代码

```
$sample_video_ID = "ccI-MugndOU";
$JSON = file_get_contents("http://gdata.youtube.com/feeds/api/videos?q={$sample_video_ID}&alt=json");
$JSON_Data = json_decode($JSON);
$views = $JSON_Data->{'feed'}->{'entry'}[0]->{'yt$statistics'}->{'viewCount'};
    echo $views; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:09:35.773

我会使用 zend 框架中的[gdata 组件](http://framework.zend.com/manual/1.12/en/zend.gdata.youtube.html)。也可作为单独的模块使用，因此您不需要使用整个 zend。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T21:09:56.530

前缀将该`yt:`元素标记为与文档的其余部分不同的“XML 名称空间”。`->children()`您必须使用该方法告诉 SimpleXML 切换到该名称空间。

您尝试的行实际上应该如下所示：

```
echo (string)$xml->entry[0]->children('yt', true)->statistics->attributes(NULL)->viewCount; 
```

要打破这一点：

*   `(string)`- 这只是一个好习惯：你想要属性的字符串内容，而不是代表它的 SimpleXML 对象
*   `$xml->entry[0]`- 正如预期的那样
*   `->children('yt', true)`- 切换到具有本地别名 'yt' 的命名空间
*   `->statistics`- 正如预期的那样
*   `->attributes(NULL)`- 从技术上讲，属性“viewCount”回到了默认命名空间，因为它没有以“yt:”为前缀，所以我们必须切换回来才能看到它
*   `->viewCount`- running`->attributes()`只给我们提供了属性，这些属性可以通过`->foo`not访问`['foo']`

# primefaces - 如何在 FullCalendar/Primefaces 的“agendaWeek”视图中隐藏时间段 ?

> ID：12856449
> 
> 赞同：2
> 
> 时间：2012-10-12T09:50:51.353
> 
> 标签：primefaces, hide, fullcalendar, schedule

是否可以在“agendaWeek”视图中隐藏时间段？我正在使用`<p:schedule>`基于 FullCalendar 的 Primefaces。我只将 AllDay-Events 添加到这个特定的时间表中，所以我的客户决定隐藏时间段。

我希望有办法。

最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:04:43.647

你不能只使用 basicDay 和 basicWeek 视图吗？而不是议程周/议程日？这两个视图没有显示时间段......节省了 CSS 等的混乱！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-14T12:34:51.510

自定义标题模板，它将为您节省大量的 CSS 更改。

```
 <p:schedule id="mySechedule" 
rightHeaderTemplate="month, basicWeek, basicDay" 
value="#{myBean.eventModel}"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T07:52:50.370

不知道这是否是你的意思

但是要隐藏计划中的第一列，请尝试使用这个 css 选择器（`formID\3A`如果您`prependId = "false"`的表单包含计划程序，请删除）

```
#formID\3A scheduleID th.fc-agenda-axis{
    display:none
} 
```

或运行此 js 代码（在 primefaces 展示柜上测试）

```
jQuery("th.fc-agenda-axis").hide() 
```

* * *

**更新**

这是隐藏时隙的方法（OP真正在寻找什么）

```
#formID\3A scheduleID table.fc-agenda-slots{
    display:none
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-13T08:26:34.667

要隐藏*月份*按钮，只需使用此代码。

```
<style type="text/css">
.fc-button-month{ display: none; }
</style> 
```

对于*Week* -Button 使用 CSS 选择器`.fc-button-agendaWeek`，对于*Day* -Button：`.fc-button-agendaDay`

问候！

# html - Unable to select text inside a tag

> ID：12856455
> 
> 赞同：0
> 
> 时间：2012-10-12T09:51:08.350
> 
> 标签：html, css, hyperlink, copy

I have the following sample code:

```
<a href="http://example.com">
   <p>...</p>
   <img src="" />
</a> 
```

Need to be able to copy text from `p` tag. The problem that `p` and `img` inside `a` and I can't select it.

I need exactly this HTML structure, as user should be able to copy link from that block. How can I do that?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-12T09:56:48.933

好吧，如果您开始从外部拖动鼠标，则可以复制链接。

如果您想要更自然的感觉，您可以为您的用户提供一个**复制此链接**按钮，并让 JavaScript 为他复制它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T10:00:54.823

也许您可以在链接后附加一个文本输入，仅用于第一次单击。

**[演示](http://jsfiddle.net/gionaf/eKFnB/)**

HTML：

```
<a href="http://example.com" class="selectable">
   <p>...</p>
   <img src="" />
</a> 
```

jQuery：

```
$('.selectable').one('click',function(ev){
    ev.preventDefault();
    var el = $(this);
    var txt = el.find('p').text();
    $('<input type="text" value="'+txt+'" style="display:block">')
            .insertAfter(el)
            .select();
});​ 
```

# c# - c#序列化没有父节点的字典参数

> ID：12856456
> 
> 赞同：1
> 
> 时间：2012-10-12T09:51:08.710
> 
> 标签：c#, serialization, dictionary

我有一个类并希望将其序列化为 xml。该类包含一个字典..将其切换为可序列化版本（使用 writexml / readxml）。

问题是当字典参数被序列化时..它用父元素“属性”包装字典元素，我不想要那个。

例子：

```
public class Product
{
    public String Identifier{ get; set; }
    [XmlElement]
    public SerializableDictionary<string,string> Attributes { get; set; } //custom serializer
} 
```

这个 Product 类被放入一个 List 结构中，然后整个序列化，结果是：

```
<Products>
<Product>
     <Identifier>12345</Identifier>
     <Attributes>
          <key1> value 1</key1>
          <key2> value 2</key2>
     </Attributes>
</Product>
</Products> 
```

我想没有节点包装器。

我使用了一个序列化的字典类，但是通过它的 WriteXml 我只能影响键值对..而不是父元素。

任何我可以插入说linqpad的自给自足的例子都会很棒..这是可序列化字典的简短版本..

```
 [XmlRoot("dictionary")]
public class SerializableDictionary<TKey, TValue> : Dictionary<TKey, TValue>, IXmlSerializable
{
    #region IXmlSerializable Members
    public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(System.Xml.XmlReader reader)
    {
        //not including for the sake of brevity
    }
    public void WriteXml(System.Xml.XmlWriter writer)
    {
        XmlSerializer keySerializer = new XmlSerializer(typeof(TKey));
        XmlSerializer valueSerializer = new XmlSerializer(typeof(TValue));
        foreach (TKey key in this.Keys)
        {
            writer.WriteStartElement(key.ToString());
            TValue value = this[key];
            if (value == null)
                writer.WriteValue(String.Empty); //render empty ones.
            else
                writer.WriteValue(value.ToString());
            writer.WriteEndElement();
        }
    }
    #endregion
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:54:39.380

此处的属性是字典键值对的名称。如果那不存在，您将无法将其反序列化回字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:39:56.377

如果您不想要该`<Attributes>`元素，则需要将该`WriteXml`方法移至`Product`-class。

```
public void WriteXml(XmlWriter writer)
{
    writer.WriteElementString("Identifier", Identifier.ToString("d"));
    XmlSerializer valueSerializer = new XmlSerializer(typeof(TValue));
    foreach (TKey key in Attributes.Keys)
    {
        writer.WriteStartElement(key.ToString());
        TValue value = Attributes[key];
        if (value == null)
            writer.WriteValue(String.Empty); //render empty ones.
        else
            writer.WriteValue(value.ToString());
        writer.WriteEndElement();
    }
} 
```

# c++ - C++中类的提前定义

> ID：12856464
> 
> 赞同：0
> 
> 时间：2012-10-12T09:51:27.743
> 
> 标签：c++, class, pointers

> **可能重复：**
> [带有前向声明错误的循环依赖](https://stackoverflow.com/questions/10114078/circular-dependency-with-forward-declaration-error)

我有两个文件，一个定义结构（这里：端口），另一个定义一个类（这里：设备）。由于类使用这些结构作为端口，因此它们需要链接到类，最好是通过指针。但是如果设备类还没有定义，我该如何创建这个指针呢？

这大致是我希望代码看起来像......

骨干.h：

```
typedef struct aPort {
    std::string portName;
    Device *ptrDeviceThatOwnsPort;
} port; 
```

设备.h：

```
#include "backbone.h"

class Device {
} 
```

...但这显然会在backbone.h中抛出一个错误，说*Device has not been defined*。我尝试简单地将设备头包含在主干头文件中，在 typedef 前面，但这不起作用，因为每个头都依赖于另一个头。我在某处读过，在 Objectve-C 中有一些类似于“超前类定义”的东西（已经有一段时间没有在 Obj-C 中编码了），那么在 C++ 中是否有类似的东西？或者对我的问题有更好的解决方案吗？

非常欢迎任何帮助，并提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T09:53:32.027

使用前向声明。

```
class Device;

typedef struct aPort {
    std::string portName;
    Device *ptrDeviceThatOwnsPort;
} port; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T09:53:45.987

您只需要添加 Device 的前向声明。为此，请将您的“backbone.h”文件修改为以下内容：

```
class Device;
typedef struct aPort {
    std::string portName;
    Device *ptrDeviceThatOwnsPort;
} port; 
```

这里的所有都是它的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T09:53:59.547

由于您的结构只有一个指向您的指针，因此`Device`您可以通过前向声明类来了解。只需添加

```
 class Device; 
```

在你的`aPort`头文件中声明之前。如果您不使用指针，则需要包含头文件`Device`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T09:53:43.590

在骨干网.h。添加

```
class Device; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T09:54:28.127

问题显然是因为当编译器到达该行时

```
Device *ptrDeviceThatOwnsPort; 
```

它不知道是什么`Device`。但是，此时您不需要包含`Device`' 标头。由于您正在创建一个指针，因此编译器知道这`Device`是一个类名就足够了。通过添加一个看起来像的前向声明

```
class Device; 
```

在前面，你会让编译器知道它，它就能生成那个指针。

# iphone - 如何处理 3G 网络上的 purgeIdleCellConnections？

> ID：12856466
> 
> 赞同：6
> 
> 时间：2012-10-12T09:51:36.173
> 
> 标签：iphone, ios, networking, 3g

我在项目中添加了第三方 SDK，使用慢速 3G 网络时出现 purgeIdleCellConnections 错误。

```
purgeIdleCellConnections: found one to purge conn = 0x1f55b300 
```

wifi网络没有问题，因为它不使用蜂窝网络进行图像下载。

我必须确定网络类型是 wifi 还是 3G ：

```
+ (BOOL) IsEnableWIFI {
    return ([[Reachability reachabilityForLocalWiFi]
             currentReachabilityStatus] != NotReachable);
}

+ (BOOL) IsEnable3G {
    return ([[Reachability reachabilityForInternetConnection]
             currentReachabilityStatus] != NotReachable);
} 
```

但我认为这不是一个好主意。如何处理？

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T20:59:48.740

我观察到来自 iOS 6.0 SDK 的此调试消息（在连接到蜂窝网络的设备上）与我的应用程序中正在终止的活动 AJAX 调用相关。然而，证明任何事情都非常困难，因为这只发生在 UIWebView 中呈现网页时。我只是说我不认为这些信息是良性的。我认为它们可能表明 Apple 框架中的一个错误，该错误在终止连接时过于激进。很难对在 UIWebView 内运行的、进行 AJAX 调用的 javascript 进行检测，因此目前这一切都是高度推测性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:35:25.610

我相信这是IOS6 SDK中的调试日志，不用担心。

# c# - c#在txt文件中搜索字符串

> ID：12856471
> 
> 赞同：24
> 
> 时间：2012-10-12T09:51:58.467
> 
> 标签：c#, string, file-io

如果字符串比较，我想在 txt 文件中找到一个字符串，它应该继续读取行，直到我用作参数的另一个字符串。

例子：

```
CustomerEN //search for this string
...
some text which has details about the customer
id "123456"
username "rootuser"
...
CustomerCh //get text till this string 
```

否则，我需要详细信息才能与他们合作。

我正在使用 linq 搜索“CustomerEN”，如下所示：

```
File.ReadLines(pathToTextFile).Any(line => line.Contains("CustomerEN")) 
```

但是现在我一直坚持阅读行（数据）直到“CustomerCh”来提取细节。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-12T10:02:45.180

如果您的一对行只会在您的文件中出现一次，您可以使用

```
File.ReadLines(pathToTextFile)
    .SkipWhile(line => !line.Contains("CustomerEN"))
    .Skip(1) // optional
    .TakeWhile(line => !line.Contains("CustomerCh")); 
```

如果您可以在一个文件中多次出现，则最好使用常规`foreach`循环 - 读取行，跟踪您当前是在客户内部还是外部等：

```
List<List<string>> groups = new List<List<string>>();
List<string> current = null;
foreach (var line in File.ReadAllLines(pathToFile))
{
    if (line.Contains("CustomerEN") && current == null)
        current = new List<string>();
    else if (line.Contains("CustomerCh") && current != null)
    {
        groups.Add(current);
        current = null;
    }
    if (current != null)
        current.Add(line);
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-12T10:05:56.510

你必须使用`while`因为`foreach`不知道索引。下面是一个示例代码。

```
int counter = 0;
string line;

Console.Write("Input your search text: ");
var text = Console.ReadLine();

System.IO.StreamReader file =
    new System.IO.StreamReader("SampleInput1.txt");

while ((line = file.ReadLine()) != null)
{
    if (line.Contains(text))
    {
        break;
    }

    counter++;
}

Console.WriteLine("Line number: {0}", counter);

file.Close();

Console.ReadLine(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-12T10:02:43.077

使用 LINQ，您可以使用`SkipWhile`/`TakeWhile`方法，如下所示：

```
var importantLines = 
    File.ReadLines(pathToTextFile)
    .SkipWhile(line => !line.Contains("CustomerEN"))
    .TakeWhile(line => !line.Contains("CustomerCh")); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T10:01:37.277

如果你只想要一个第一个字符串，你可以使用简单的 for 循环。

```
var lines = File.ReadAllLines(pathToTextFile);

var firstFound = false;
for(int index = 0; index < lines.Count; index++)
{
   if(!firstFound && lines[index].Contains("CustomerEN"))
   {
      firstFound = true;
   }
   if(firstFound && lines[index].Contains("CustomerCh"))
   {
      //do, what you want, and exit the loop
      // return lines[index];
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-09T19:01:28.733

我使用了 Rawling 在此处发布的方法，以在同一文件中找到不止一行，直到最后。这对我有用：

```
 foreach (var line in File.ReadLines(pathToFile))
                {
                    if (line.Contains("CustomerEN") && current == null)
                    {
                        current = new List<string>();
                        current.Add(line);
                    }
                    else if (line.Contains("CustomerEN") && current != null)
                    {
                        current.Add(line);
                    }
                }
                string s = String.Join(",", current);
                MessageBox.Show(s); 
```

# php - 如何使用 PHP 和 MySQL 转换或查询此 Jquery 数据，如表单 - 选择 - 选项示例

> ID：12856475
> 
> 赞同：4
> 
> 时间：2012-10-12T09:52:05.340
> 
> 标签：php, jquery

我正在尝试像在

```
<form name="" action="test" method="post" 
    <select  name="people">
        <option value="1">1 Person</option>
        <option value="2">2 People</option>
        <option value="3">3 People</option>
        <option value="4">4 People</option>
        <option value="5">5 People</option>
        <option value="6">6 People</option>
    </select>
</form> 
```

这是我需要查询的代码：

```
<div id='content'>
    <script type="text/javascript">
        $(document).ready(function () {
            var source = [
                "Select Your location",
                "North London",
                "South London",
                "West London",
                "East London",
                "City of London",  
            ];

            // Create a jqxDropDownList  
            $("#jqxDropDownList").jqxDropDownList({ 
                source: source,    
                selectedIndex: 0, 
                width:   '250px', 
                height: '35px', 
                theme: 'summer' 
            });
        });
    </script>
<div id='jqxDropDownList'> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:06:19.510

看看[这个演示](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxdropdownlist/loadfromselect.htm)并查看源代码。可以`jqxDropDownList`从标签复制项目`<select>`并将其用作其来源。

**JavaScript**

```
// grab all the original options
var select_options = $('#people option');

// hide the original select box
$('#people').hide();

// Create a jqxDropDownList
$("#jqxDropDownList").jqxDropDownList({ width: '200px', height: '25px' });

// Load the data from the Select html element.
$("#jqxDropDownList").jqxDropDownList('loadFromSelect', 'people');

// updates the select's selection.
$("#jqxDropDownList").bind('select', function (event) {
    if (event.args) {
        var args = event.args;
        // select the item in the 'select' tag.
        var index = args.item.index;
        select_options[index].attr("selected", "true");
    }
});

// selects the first item.
$("#jqxDropDownList").jqxDropDownList('selectedIndex', '0'); 
```

**的HTML**

```
<form method="post" action="">

  <label for="people">Number of People</label>
  <select name="people" id="people">
    <option value="1">1 Person</option>
    <option value="2">2 People</option>
    <option value="3">3 People</option>
    <option value="4">4 People</option>
    <option value="5">5 People</option>
    <option value="6">6 People</option>
  </select>

  <div id="jqxDropDownList"></div>

</form> 
```

# c# - 决定是否禁用/启用 javascript 并执行服务器端代码

> ID：12856480
> 
> 赞同：0
> 
> 时间：2012-10-12T09:52:10.330
> 
> 标签：c#, jquery, asp.net, ajax, browser

我有一个 aspx 页面，它在检测到客户端的屏幕尺寸后加载了几个图像。我是这样做的：在 jquery 代码中，我首先检测用户屏幕大小，然后根据大小，我进行一些计算来确定要从数据库中获取的图像数量。然后使用 jquery ajax，我调用了一个返回 json 响应的 web 服务。代码获取 json 并创建页面。

现在，如果用户禁用了 javascript，则此方法不起作用。现在我必须在后面的代码上使用 c# 代码创建页面。问题是，我无法检测到是否从后面的代码中禁用了 javascript（我认为这是不可能的）。我不想在顶部显示一个按钮，上面写着“您的浏览器中禁用了Javascript。请单击此处显示此页面”。我可以将此按钮放在 noscript 标签中。但我不希望用户在看到页面上的图像之前必须单击按钮。

我想要的是，如果禁用了 javascript，系统应该检测到它并立即从后面的代码运行一个函数。（在这种情况下，页面大小将是固定的，不会根据用户屏幕而变化）我不能使用隐藏字段或 cookie 来检测它，因为它们都需要在检测 javascript 被禁用之前进行回发。（我们知道 js 代码不能在任何页面生命周期事件之前运行）。

好吧，我不太希望我的问题能得到解决，但我仍然想试一试。可能有人已经有了解决方案。如果您可以就更改/更新逻辑提出意见或建议，那将非常有帮助。

任何帮助将不胜感激。

感谢和问候普拉文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:02:44.253

1.) 使用 JavaScript 设置 cookie，然后在后续页面查看时使用服务器端脚本测试该 cookie；适当地传递内容。

**[如何检测 JavaScript 是否被禁用？](https://stackoverflow.com/questions/121203/how-to-detect-if-javascript-is-disabled)**

2.）您可以使用**`<noscript>`标签**。

**`<noscript>`标签**: 可用于为在浏览器中禁用脚本或浏览器不支持客户端脚本的用户提供替代内容。

```
<noscript>
    ....
</noscript> 
```

3.)**[检测是否在 ASPX 中启用了 JavaScript](http://www.codeproject.com/Articles/23831/Detect-if-JavaScript-is-enabled-in-ASPX)**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Session["JSChecked"] == null)
    //JSChecked -indicates if it tried to run the javascript version
    {
        // prevent infinite loop
        Session["JSChecked"] = "Checked";
        string path = Request.Url + "?JScript=1";
        Page.ClientScript.RegisterStartupScript(this.GetType(), "redirect", 
          "window.location.href='" + path + "';", true);
    }
    if (Request.QueryString["JScript"] == null)
        Response.Write("JavaScript is not enabled.");
    else
        Response.Write("JavaScript is enabled.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:59:39.320

如果启用了 javascript，则制作没有 javascript 的默认版本并重定向到 javascript 版本。[如果禁用了javascript，如何重定向？](https://stackoverflow.com/q/2489376/1735047)

# c# - 如何设置窗口服务的 onStart() 方法，以便安装后首先在凌晨 12 点执行

> ID：12856481
> 
> 赞同：0
> 
> 时间：2012-10-12T09:52:19.893
> 
> 标签：c#, windows-services

如何设置窗口服务的 onStart() 方法，以便在安装后第一次在上午 12 点执行，时间间隔工作正常，服务在提到的时间间隔后执行，但不在给定时间启动。

```
 public static System.Timers.Timer Timer;
            Double _timeinterval = 300 * 1000;// 6 mins
            protected override void OnStart(string[] args)
            {
            Timer = new System.Timers.Timer();

            Timer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
            Timer.Interval = _timeinterval;
            Timer.Enabled = true;
            //method call to do operation
           }
            private void OnTimedEvent(object source, ElapsedEventArgs e)
              {
                //method call to do operation
              } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:03:29.490

```
 protected override void OnStart(string[] args)
    {

        aTimer = new System.Timers.Timer();

        string starttime = "01.25";
        //start time is 01.25 means 01:15 AM

        double mins = Convert.ToDouble(starttime);
        DateTime t = DateTime.Now.Date.AddHours(mins);
        TimeSpan ts = new TimeSpan();
        // ts = t - System.DateTime.Now;
        ts = t.AddDays(1) - System.DateTime.Now;
        if (ts.TotalMilliseconds < 0)
        {
            ts = t.AddDays(1) - System.DateTime.Now;
            // ts = t - System.DateTime.Now;
        }
        _timeinterval = ts.TotalMilliseconds;
       // _timeinterval now set to 1:15 am (time from now to 1:15AM)
        aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
        aTimer.Interval = _timeinterval;
        aTimer.Enabled = true;
       }
        private static void OnTimedEvent(object source, ElapsedEventArgs e)
         {

           // operation to perform
           aTimer.Interval = 86400000; // now interval sets to 24 hrs

    } 
```

# c - VirtualProtectEx 失败并出现 ERROR_NOACCESS（错误代码 998）

> ID：12856485
> 
> 赞同：2
> 
> 时间：2012-10-12T09:52:35.900
> 
> 标签：c, winapi

```
CreateProcess("something.exe", NULL, NULL, NULL, FALSE, CREATE_SUSPENDED, 
    NULL, NULL, &sInfo, &pInfo);

ReadProcessMemory(pInfo.hProcess, (LPCVOID) (contx.Ebx + 8),
  (LPVOID) &baseAddress, sizeof(baseAddress), NULL);

hProcess=OpenProcess(PROCESS_VM_READ|PROCESS_VM_WRITE|PROCESS_VM_OPERATION,
  FALSE, pInfo.dwProcessId);

VirtualProtectEx(hProcess, (LPVOID) baseAddress, sizeof(IMAGE_DOS_HEADER),
    PAGE_EXECUTE_READWRITE, NULL);

WriteProcessMemory(hProcess, (LPVOID) baseAddress, (LPCVOID) pidh,
    sizeof(IMAGE_DOS_HEADER), NULL); 
```

为什么 VirtualProctecEx 给我 ERROR_NOACCESS ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T09:57:39.040

VirtualProtectEx[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366899%28v=vs.85%29.aspx)说

> lpflOldProtect [out] 指向变量的指针，该变量接收指定页面区域中第一页的先前访问保护。如果此参数为 NULL 或未指向有效变量，则函数失败。

关于最后一个论点。您正在传递 NULL 所以应该期望它失败。

它可能还有其他问题。例如，您不检查[ReadProcessMemory](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680553%28v=vs.85%29.aspx)的返回值，因此`baseAddress`可能无效。

# html - 移动 Safari 未调整 Unicode 象形文字的大小

> ID：12856486
> 
> 赞同：0
> 
> 时间：2012-10-12T09:52:38.973
> 
> 标签：html, unicode

看下面的代码：

```
 <?xml version="1.0" encoding="utf-8"?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta name="generator" content="HTML Tidy for Linux (vers 25 March 2009), see www.w3.org" />
    <title></title>
    <style type="text/css">
    /*<![CDATA[*/
    body.c1 {font-size:66pt}
    /*]]>*/
    </style>
    </head>
    <body id="body" class="ignoreWebkitDefault c1">
    A &#128276;
    </body>
    </html> 
```

当我在 MacBook 上的 Safari 中运行它时，字符和象形文字都会调整大小。在我的 iPad 上，只有角色会调整大小。任何解决方法？

![iPad 6.0 模拟器](../Images/156423d4a5183559ecafbc311d530adf.png)

![苹果浏览器](../Images/f55e63ed1e18bdf8961147c0f075b925.png)

# iphone - AVErrorInvalidVideoComposition = -11841

> ID：12856488
> 
> 赞同：8
> 
> 时间：2012-10-12T09:52:50.133
> 
> 标签：iphone, objective-c, ios, arrays, ios5

我正在合并多个视频和多首歌曲，我发现代码中有什么问题，因为昨天相同的代码运行得非常好，但今天我得到了以下响应 `AVAssetExportSessionStatus = 4,error = Error Domain=AVFoundationErrorDomain Code=-11841 "The operation couldn’t be completed. (AVFoundationErrorDomain error -11841.)"` ，我做了一些研究，发现导出失败是由于视频合成无效。请找出视频合成有什么问题。

```
- (void)mergeAllselectedVideos
{
    NSArray *pathArray = [DocumentDirectory getUrlFromDocumentDirectoryOfList:self.selectedClipsArray];
    AVMutableComposition *mixComposition = [[AVMutableComposition alloc]init];
    NSMutableArray *layerinstructions = [[NSMutableArray alloc]init];
    CMTime time = kCMTimeZero;
    CMTime previousSongDuration = kCMTimeZero;
    for (int i = 0 ; i < pathArray.count; i++)
    {
        //VIDEO TRACK//
        time = CMTimeAdd(time, previousSongDuration);
        NSURL *url = [NSURL URLWithString:[pathArray objectAtIndex:i]];
        AVAsset *avAsset = [AVAsset assetWithURL:url];
        AVMutableCompositionTrack *track = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
        [track insertTimeRange:CMTimeRangeMake(kCMTimeZero, avAsset.duration) ofTrack:[[avAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:time error:nil];
    previousSongDuration = avAsset.duration;
    }
    CMTime audioTime = kCMTimeZero;
    for (int i = 0; i < self.selectedSongsArray.count; i++)
    {
        MPMediaItem * songItem = [self.selectedSongsArray objectAtIndex:i];
        NSURL *songURL = [songItem valueForProperty: MPMediaItemPropertyAssetURL];
        AVAsset *audioAsset = [AVAsset assetWithURL:songURL];
        AVMutableCompositionTrack *AudioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
        CMTimeRange timeRange = CMTimeRangeMake(audioTime, audioAsset.duration);
        if(CMTimeGetSeconds(CMTimeAdd(audioTime, audioAsset.duration)) > CMTimeGetSeconds(time))
        {
            timeRange = CMTimeRangeMake(audioTime, CMTimeSubtract(time,audioTime));
        }
        [AudioTrack insertTimeRange:timeRange ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:kCMTimeZero error:nil];
        audioTime = CMTimeAdd(audioTime, audioAsset.duration);
    }

    AVMutableVideoCompositionInstruction * MainInstruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
    MainInstruction.timeRange = CMTimeRangeMake(kCMTimeZero, time);
    MainInstruction.layerInstructions = layerinstructions;

    AVMutableVideoComposition *MainCompositionInst = [AVMutableVideoComposition videoComposition];
    MainCompositionInst.instructions = [NSArray arrayWithObject:MainInstruction];
    MainCompositionInst.frameDuration = CMTimeMake(1, 30);
    MainCompositionInst.renderSize = CGSizeMake(320.0, 480.0);

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    movieName = [CoreDataFunctions getNameForMovieForDate:[CalendarFunctions getCurrentDateString]];
    self.moviePlayButton.titleLabel.text = movieName;
    NSString *myPathDocs =  [documentsDirectory stringByAppendingPathComponent:movieName];

    NSURL *url = [NSURL fileURLWithPath:myPathDocs];

    AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetHighestQuality];
    exporter.outputURL=url;
    exporter.outputFileType = AVFileTypeQuickTimeMovie;
    exporter.videoComposition = MainCompositionInst;
    exporter.shouldOptimizeForNetworkUse = YES;
    [exporter exportAsynchronouslyWithCompletionHandler:^{dispatch_async(dispatch_get_main_queue(), ^{[self exportDidFinish:exporter];});}];
}
- (void)exportDidFinish:(AVAssetExportSession*)session
{
    //Printing error
    NSLog(@"AVAssetExportSessionStatus = %i,error = %@",session.status,session.error);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T23:37:13.917

我在遇到同样问题时发现了您的问题。我在这个问题上的理论是视频合成的所有属性都没有在导出时设置，所以它很糟糕。这是我现在使用的节，它现在导致无错误导出：

```
AVMutableVideoComposition *videoComposition = [AVMutableVideoComposition videoComposition];
videoComposition.frameDuration = CMTimeMake(1,30);
videoComposition.renderScale = 1.0;
videoComposition.renderSize = CGSizeMake(352.0, 288.0);
instruction.layerInstructions = [NSArray arrayWithObject: layerInstruction];
instruction.timeRange = CMTimeRangeMake(kCMTimeZero, videoAsset.duration);
videoComposition.instructions = [NSArray arrayWithObject: instruction]; 
```

就我而言，我错过了指令中的 timeRange 属性。检查您自己的属性以确保它们获得正确的值。祝你好运！这东西很难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-13T14:17:13.977

如果您碰巧将多个主指令传递给 AVMutableVideoComposition 的指令数组，请确保时间范围不重叠，否则会导致此错误。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-12-30T01:58:41.013

您需要`opacity`为第一个设置`LayerInstruction`，例如：

```
[FirstlayerInstruction setOpacity:0.0 atTime:firstAsset.duration]; 
```

# swig - 当值为 SWIGTYPE 时如何将值传递给函数

> ID：12856490
> 
> 赞同：0
> 
> 时间：2012-10-12T09:53:06.220
> 
> 标签：swig

我在java中有一个这样的包装函数：

```
dosomething(SWIGTYPE_sometypeSTRUCT STRUCTtype); 
```

最初在 C 代码中，声明看起来是这样的：

```
dosomething(sometypeSTRUCT* structtype); 
```

如何将 SWIGTYPE 传递给 java 函数。如果我这样做： SWIGTYPE_sometypeSTRUCT something = new SWIGTYPE_sometypeSTRUCT ();

它不起作用..只有当我设置 somthing = null 时它才会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:45:29.997

问题是 SWIG 还没有看到- 只要它知道您的函数采用的指针是不透明类型的*定义。*`sometypeSTRUCT``dosomething`

当 SWIG 不知道细节时，它无法有意义地包装它，唯一安全的做法是让您使用这种类型在 C 中执行您可以执行的操作。

要解决此问题，您可能希望使用`%include`引入结构的定义，或者可能在 SWIG 接口文件中提供定义。

# ios - 在外部触发器上启动或关闭应用程序

> ID：12856492
> 
> 赞同：0
> 
> 时间：2012-10-12T09:53:17.390
> 
> 标签：ios, automation

在当前的 iOS SDK 中是否有 API 可以让我做以下事情？

**1）在什么时候启动一个特定的应用程序**

a) 我通过一个地理围栏（例如到家）

b) 我使用特定 SSID 登录到 WiFi 热点

c) 设备已插入电源

**2）关闭某个应用程序时**

a) 我通过地理围栏（例如离开家）

b) GPS/Geo/Location 已关闭

c) WiFi 已开启

d) 我从具有特定 SSID 的 WiFi 热点注销

e) 设备已从电源上拔下

万一我错过了，iOS（6）本身是否已经可以在不需要额外应用程序的情况下完成上述任何事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:15:39.057

好吧，是的，不是的。

地理围栏选项适用于 iOS 5 及更高版本。您所做的是开始使用 监控位置[`CLLocationManager`](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)并调用[`startMonitoringForRegion:desiredAccuracy`](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/instm/CLLocationManager/startMonitoringForRegion%3adesiredAccuracy%3a). 请务必为您的应用程序添加位置更新的后台运行支持，否则如果用户将您的应用程序设置为后台运行，您将不会收到任何位置更改。在收到位置更改后，您可以使用它[`UILocalNotification`](http://developer.apple.com/library/ios/#documentation/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html)来提醒用户。但是您不必担心启动或关闭，操作系统会为您处理。

如果您的应用程序没有运行，您将无法检测到更改状态，也无法告诉操作系统在应用程序开始更改时启动您的应用程序。

检测 WiFi 并不是真的不可能，您可以告诉操作系统您可以使用某个 SSID 登录 WiFi 网络。但我从未尝试过，但我知道 FON 和 T-Mobile（欧洲）应用程序可以做到这一点。

# ios - 如何以编程方式捕获的屏幕截图保存到文件夹中并压缩？

> ID：12856501
> 
> 赞同：2
> 
> 时间：2012-10-12T09:53:48.567
> 
> 标签：ios, xcode

我需要将以编程方式捕获的屏幕截图保存到文件夹中并压缩它。那可能吗？有人帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:39:01.007

第一步 - 创建屏幕截图：[如何以编程方式截取屏幕截图](https://stackoverflow.com/questions/2200736/how-to-take-a-screenshot-programmatically)

第二 - 保存它：[如何使用 NSFileManager 将 UIImage 保存到文件中？](https://stackoverflow.com/questions/10094195/how-to-save-uiimage-to-file-with-nsfilemanager)

第三 - 压缩它。您可以使用 zlib 包装器[objective-zip](http://code.google.com/p/objective-zip/)

已编辑：这是来自 Objective-zip 嵌入式示例的一些代码：

```
 ZipFile *zipFile= [[ZipFile alloc] initWithFileName:filePath mode:ZipFileModeCreate];
    [self performSelectorOnMainThread:@selector(log:) withObject:@"Adding first file..." waitUntilDone:YES];
    ZipWriteStream *stream1= [zipFile writeFileInZipWithName:@"abc.txt" fileDate:[NSDate dateWithTimeIntervalSinceNow:-86400.0] compressionLevel:ZipCompressionLevelBest];
    [self performSelectorOnMainThread:@selector(log:) withObject:@"Writing to first file's stream..." waitUntilDone:YES];
    NSString *text= @"abc";
    [stream1 writeData:[text dataUsingEncoding:NSUTF8StringEncoding]];
    [self performSelectorOnMainThread:@selector(log:) withObject:@"Closing first file's stream..." waitUntilDone:YES];
    [stream1 finishedWriting];

    [self performSelectorOnMainThread:@selector(log:) withObject:@"Adding second file..." waitUntilDone:YES];

    ZipWriteStream *stream2= [zipFile writeFileInZipWithName:@"x/y/z/xyz.txt" compressionLevel:ZipCompressionLevelNone];

    [self performSelectorOnMainThread:@selector(log:) withObject:@"Writing to second file's stream..." waitUntilDone:YES];
    NSString *text2= @"XYZ";
    [stream2 writeData:[text2 dataUsingEncoding:NSUTF8StringEncoding]];

    [self performSelectorOnMainThread:@selector(log:) withObject:@"Closing second file's stream..." waitUntilDone:YES];
    [stream2 finishedWriting];
    [self performSelectorOnMainThread:@selector(log:) withObject:@"Closing zip file..." waitUntilDone:YES];

    [zipFile close];
    [zipFile release]; 
```

# encoding - 在美国 En-US 之类的挪威编码？

> ID：12856507
> 
> 赞同：0
> 
> 时间：2012-10-12T09:54:00.533
> 
> 标签：encoding, character-encoding

在编程时，我在编码方面遇到了一些问题..

在美国 En-US 像挪威编码？

我想要挪威编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:15:49.797

没有这样的编码，或者最多它们是编码的非官方（和误导性）名称。有一个字符编码[注册表](http://www.iana.org/assignments/character-sets)（由 IANA 提供），带有首选名称和别名。

“United States En-US”听起来像是试图给一个区域设置一个“友好”的名称。语言环境并不意味着特定的编码。

我的猜测是，“挪威编码”现在意味着 windows-1252 或 ISO-8859-1，但它也可能是一些旧编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:03:38.700

*不是一个可靠的答案*，而是我想提及的参考来源：

[语言字符编码推荐](http://scratchpad.wikia.com/wiki/Character_Encoding_Recommendation_for_Languages)。请注意，**ISO-8859-4**是针对北部斯堪的纳维亚语的。虽然我没有经验。**Windows-1252**似乎也有可能，但可能缺少一些挪威符号，这与美国相同：Windows 对 Latin-1 的扩展。

一般来说，如果**UTF-8**是可能的，那将是最好的：全 Unicode，适用于所有语言。

# ruby-on-rails - Rails 引擎常量

> ID：12856509
> 
> 赞同：1
> 
> 时间：2012-10-12T09:54:05.427
> 
> 标签：ruby-on-rails, ruby, constants, nameerror

我有一个带有最新 Rails 和 ruby​​ 的 Rails 引擎。

我有一个名为 cms 的控制器，带有一个名为 update 的操作。我使用此更新操作来更新不同的表。例如，我有一个名为 setting 的表。这种技术在普通的 Rails 应用程序中运行良好，但在我的 Rails 引擎中它会抛出这个错误：

```
NameError (uninitialized constant Setting): 
```

我有一个名为 Setting 的模型，为什么给我一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:17:24.960

文件命名对于自动加载工作很重要。应用程序和引擎中的命名约定是相同的。事实上，应用程序*就是*一个引擎。

所以，`my_rails_app/app/models/cms/setting.rb`等价于`my_engine/app/models/cms/setting.rb`

如果您仍然遇到问题，请尝试使用显式命名空间访问常量`Cms::Setting`。

您可以通过执行从适当的命名空间动态获取常量

```
Cms.const_get(table.capitalize) 
```

但是，请谨慎使用这种方法，因为黑客可以向您发送任何内容，从而访问任何常量。

# php - MySQL表关系，继承与否？

> ID：12856512
> 
> 赞同：0
> 
> 时间：2012-10-12T09:54:23.680
> 
> 标签：php, mysql, doctrine, relational-database

我正在构建一个微型 CMS。使用 Mysql 作为 RDMS，使用 Doctrine ORM 进行映射。

我想要两种类型的页面。静态页面和博客页面。静态页面会有 page_url 和 page_content 存储在数据库中。博客页面会有 page_url，但没有 page_content。博客会有帖子、类别...

可以说我有这样的路线：

```
/{pageurl} 
```

这是页面，页面 url 可以是主页、新闻或博客……该页面可以是静态页面，然后我会打印 page_content。但它也可以是博客页面，然后我会打印最新的帖子作为内容。

我应该如何关联这些静态页面和博客页面表？这是继承吗，因为两者都是页面，具有它们的 URL，但它们具有不同的内容？我应该使用继承，以便静态页面和博客页面都扩展具有 page_url 的页面吗？或者我应该创建另一个表 page_types 并存储有关可用页面类型的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:10:03.487

一般来说，我说的是 MVC 框架，当你使用路由时，你会有一个特定的模式，你可以匹配不同的控制器/动作，然后可以映射到不同的模型和视图。

例如，标准页面 URL 的格式为：

```
/{pageurl} 
```

而博客页面的页面 URL 将是：

```
/blog/{pageurl} 
```

这将使区分两者并相应地路由变得非常容易。如果它与模式匹配`/blog/*`，那就是博客！但是，假设您不想采用最简单的方法，而是决定让所有 URL 都遵循相同的模式：`/{pageurl}`. 您的实际 URL 列表应全部存储在数据库中的单个表中，假设它名为`site_pages`. `site_pages`您和之间的关系将是命名中`blogs`的一列，它是返回表的外键。`blogs``page_id``site_pages`

有了这个，您有几种方法可以确定您正在查看的页面*类型：*

*   向表中添加新列`site_pages`，例如`is_blog`; 它设置好了，你有一个博客！
*   每次在数据库中查找页面时，也会得到`count()`特定页面的博客条目；如果是`> 0`，您有一个博客页面。否则将其显示为静态内容。
*   假设如果`page_content`为空，则为博客。

一旦确定页面是静态页面还是博客页面，您可以加载相应的模型 - “页面”或“博客页面”。BlogPage 可以并且可能应该扩展 Page，因为它们具有相同的目的。两者之间的唯一区别是“页面”只是加载页面的文本内容，而视图只是将其写出来。另一方面，“博客页面”将加载类别、帖子等列表，视图将遍历它们并以您认为合适的方式显示它们。

# sugarcrm - Sugarcrm 使用 webservice 检索网页中的帐户列表

> ID：12856516
> 
> 赞同：0
> 
> 时间：2012-10-12T09:54:36.397
> 
> 标签：sugarcrm

我想使用 webservice 检索 Sugarcrm 数据库中的所有帐户数据和联系人数据。

我希望它在网页中显示。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:22:18.513

根据您的要求修改以下代码。它使用 SugarCRM 的 SOAP API。

```
$user_name      = 'admin';
$user_password  = 'admin';
$sugarcrm_url   = 'http://example.com/'
$options = array(
  "uri" => $sugarcrm_url,
  "trace" => true
);

$offset = 0;
$limit  = 100;

try {
  $client = new SoapClient($sugarcrm_url.'service/v4_1/soap.php?wsdl', $options);

  $response = $client->__soapCall('login',array(
    'user_auth'=>array(
      'user_name'=>$user_name,
      'password'=>md5($user_password), 
      'version'=>'.01'
    ), 
    'application_name'=>'SoapTest'
  ));
  $session_id = $response->id;

  $response = $client->__soapCall('get_entry_list',array(
    'session'=>$session_id,
    'module_name'=>'Contacts',
    'query'=>'',
    'order_by'=>'contacts.last_name asc',
    'offset'=>$offset, 
    'select_fields'=>array(), 
    'max_results'=>$limit)
  );
  print_r($response);

  $response = $client->__soapCall('get_entry_list',array(
    'session'=>$session_id,
    'module_name'=>'Accounts',
    'query'=>'',
    'order_by'=>'accounts.name asc',
    'offset'=>$offset, 
    'select_fields'=>array('id', 'name', 'email1'), 
    'max_results'=>$limit)
  );
  print_r($response);

  $response = $client->__soapCall('logout',array('session'=>$session_id));

} catch (Exception $ex) {
  echo $ex->getMessage();
} 
```

# asp.net-mvc-3 - SignalR 为同一用户打开新连接

> ID：12856520
> 
> 赞同：1
> 
> 时间：2012-10-12T09:54:47.047
> 
> 标签：asp.net-mvc-3, signalr, signalr-hub, signalr.client

我是 SignalR 的新手，正在尝试实现长期运行的结果池。我已将 JS 添加到我的 ASP.NET MVC 应用程序并创建了错误类。

JS

```
 <script type="text/javascript">
        var message= $.connection.messageHub;
        $(function () {
            message.addMessage = function (htmlstring) {            
                alert(htmlstring);
            };

            $.connection.hub.start(function () {
                message.longRunningMethod('@HttpContext.Current.Session.SessionID');
            });        
        });
    </script> 
```

c# 代码

```
[HubName("messageHub")]
public class MessagesHub : Hub
{
public void longRunningMethod(string sessionId)
{
   var repeatChecking = 0;
   while (repeatChecking < 3000000)
       {
          Caller.addMessage("Test");
          repeatChecking++;
          Thread.Sleep(TimeSpan.FromSeconds(1));                        
       }
}
} 
```

代码工作正常，但有一个问题。每次同一用户刷新网页时，都会创建新的 Hub 类并执行新的 longRunningMethod 方法。我想恢复连接并附加到同一个集线器实例并恢复接收消息。谁能解释如何实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:45:57.183

集线器的创建和销毁非常频繁，因此永远不要将您希望持续的任何数据放在它们上（除非它是静态的）。

我不太确定您为什么要寻找一种可以接收数据的长时间运行的方法（因为 SignalR 始终处于启动状态并且可以接收/处理数据），但您可以这样做：

查看 SignalR 股票代码示例（您可以通过 Nuget 获取）。它创建一个触发计时器的单个实例类。该计时器用于将数据向下广播到客户端。[https://github.com/SignalR/SignalR-StockTicker](https://github.com/SignalR/SignalR-StockTicker)

您还可以查看 ShootR。这是一款使用 SignalR 构建的多人游戏，具有很多相同的功能。创建一个后台计时器，充当服务器上的游戏循环，然后将数据向下推送到客户端。[https://github.com/NTaylorMullen/ShootR](https://github.com/NTaylorMullen/ShootR)

最终，您的解决方案将涉及制作单例或静态计时器作为您的“长时间”运行方法。

希望这可以帮助！

# json - JSON 本地存储 | 基于 Raymond Camden RSS 查看器

> ID：12856521
> 
> 赞同：0
> 
> 时间：2012-10-12T09:54:49.973
> 
> 标签：json, jsonp, local-storage

我尝试重现[Raymond Camden Rss Viewer](http://www.raymondcamden.com/index.cfm/2012/1/24/PhoneGap-RSS-Reader--Part-3)，但我使用的是 JSON 提要而不是常规的 RSS xml 提要。

当 feed 正常时，使用 localStorage 来存储条目。

请看一下：http: [//jsfiddle.net/elektrorl/QQhU7/](http://jsfiddle.net/elektrorl/QQhU7/)

为什么我只得到一个条目，而这个条目接近列表的末尾。为什么只有这一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:46:01.940

这是雷蒙·卡姆登本人的答案；它解决了这个话题：

“这一行：

```
entries = []; 
```

在每个循环内，这意味着数组每次都会被破坏。将它移到每个循环之前。”

# c# - 如何访问 TreeViewItem 对象的数据

> ID：12856522
> 
> 赞同：0
> 
> 时间：2012-10-12T09:54:53.227
> 
> 标签：c#, wpf, mvvm, model, treeviewitem

我构建了一个 MVVM 模式 TreeView

-根 --Item ---子
项

单击任何 TreeViewItems 时，我想在单独的窗口中显示实际对象（模型）的详细信息。

但我不确定如何访问对象的数据。

```
private void TreeView_OnSelectedItemChanged(object sender, RoutedEventArgs e)
{
    TreeViewItem tvi = e.OriginalSource as TreeViewItem;
    MessageBox.Show(tvi.ToString());
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T10:03:35.727

我不建议`TreeView_OnSelectedItemChanged`在`MVVM`样式应用程序中使用`WPF`。

`ModelView`在绑定的 [IsSelected](http://msdn.microsoft.com/en-us/library/system.windows.controls.treeviewitem.isselected.aspx)属性上定义绑定`TreeeViewItem`，您将*始终*知道选择，并且也可以从代码中选择感兴趣的项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T11:46:10.110

我之前的回答是解决的问题比所要求的要多。

由于您想通过显示 TreeViewItem 绑定对象的详细信息来对 TreeView 中的选择更改做出反应，因此您可以使用[Caliburn Micro](http://caliburnmicro.codeplex.com/ "卡利本微")的`Action`机制。您可以`SelectedItemChanged`将 TreeView 的事件连接到 ViewModel 中的方法。

例如在您的视图中：

```
<TreeView 
    ItemsSource="{Binding YourDataObjects}"
    cal:Message.Attach="[Event SelectedItemChanged] = [Action OnSelectedItemChanged($this)]"/> 
```

在您的 ViewModel 中，您将拥有以下方法：

```
public void OnSelectedItemChanged(YourDataObject selectedItem)
{
    //Do something with the selected item here 
} 
```

如果您在设置时遇到问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:01:03.777

在您的 ViewModel 中，创建 TreeViewItem 类型的依赖项属性，并在 View 中将 TreeView 的 SelectedValuePath 属性绑定到您的新依赖项属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T11:18:55.840

在 MVVM 模式中，与控件关联的数据应该位于**DataContext**依赖属性中。

# iphone - GCDAsyncSocket - 读取流永远不会完成

> ID：12856524
> 
> 赞同：4
> 
> 时间：2012-10-12T09:54:54.850
> 
> 标签：iphone, objective-c, ios, gcdasyncsocket

我正在玩 GCDAsyncSocket (MRC / iOS5.1) 一段时间，尤其是“大”文件 (5 - 10 mb)。不幸的是，有时读取流永远不会完成（例如，它被卡住了）只有几个字节在流的末尾；`didReadPartialDataOfLength:`停止向我提供信息并且根本`didReadData`没有被解雇。

这是我的一些代码（对于编写/阅读示例，主机和客户端之间的连接已经建立）

### 写作

```
#define kHeadTag 0
#define kDataTag 1

typedef struct {
    NSUInteger size;
} head_t;

-(void)sendData:(NSData *)__data  {
    _sendData = [__data retain];

    head_t header;
    header.size = __data.length;
    [_socket writeData:[NSData dataWithBytes:&header
                                   length:sizeof(header)]
       withTimeout:-1
       tag:kHeadTag];
}

-(void)socket:(GCDAsyncSocket *)sock
       didWriteDataWithTag:(long)tag {
    if (tag == kHeadTag) {
        [sock writeData:_sendData withTimeout:-1 tag:kDataTag];
        [_sendData release];
        _sendData = nil;
    }
} 
```

### 阅读

```
-(void)socket:(GCDAsyncSocket *)sock
       didReadData:(NSData *)data
       withTag:(long)tag {
    switch (tag) {            
            // ------------------------------------- HEAD
        case kHeadTag:{
            head_t head;
            [data getBytes:&head length:sizeof(head)];
            _readHead = head;
            NSLog(@"Received header (total size = %i bytes)", head.size);
            [sock readDataToLength:head.size
                withTimeout:-1
                tag:kDataTag];
        }
            break;

            // ------------------------------------- BODY
        case kDataTag: {
             NSLog(@"Data received with %i bytes", data.length);
             [sock readDataToLength:sizeof(head_t) withTimeout:-1 tag:kHeadTag];
        }
            break;
    }
};

-(void)socket:(GCDAsyncSocket *)sock
       didReadPartialDataOfLength:(NSUInteger)partialLength
       tag:(long)tag {
    if (tag == kDataTag) {
        NSLog(@"Data read with %i bytes", partialLength);
    }
}; 
```

我希望这是足够的代码来查看我做错了什么，或者这对于写入/读取大块数据来说是一种不好的做法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-02T07:26:11.713

我
`[self.partnerSocket writeData:[GCDAsyncSocket CRLFData] withTimeout:-1 tag:0];` 在 sendData: 方法的末尾添加了，它对我来说很好用。您只需在数据末尾附加分隔符。我可以将大约 48MB 的文件从一个 iDevice 传输到另一个 iDevice

# javascript - Android：如何在 WebView 中请求配额

> ID：12856531
> 
> 赞同：2
> 
> 时间：2012-10-12T09:55:23.507
> 
> 标签：javascript, android, android-webview, html5-filesystem

与问题[Android 相关：WebView 中的 requestFileSystem 导致崩溃](https://stackoverflow.com/questions/12855822/android-requestfilesystem-in-webview-causing-crash)这个问题出现了。

要请求空间并获得访问权限，您必须致电`window.storageInfo.requestQuota()`。在 Chrome 中这没问题，但在 android WebView 中，该功能是未知的。

在 Chrome 中，您必须使用`window.webkitStorageInfo`-> Android 是否有类似的前缀？

# xml - ajax Opera and Chrome bug

> ID：12856532
> 
> 赞同：1
> 
> 时间：2012-10-12T09:55:27.913
> 
> 标签：xml, ajax, google-chrome, opera

I have the following method, but it doesn't work in Opera and Google Chrome. I need to read xml file offline on CD. How can I fix this?

```
 $(document).ready(function(){

    $.ajax({

        type: "POST",
        url: "items.xml",
        dataType: "xml",
        success: function(xml) {

            $(xml).find('item').each(function(){

                var id = $(this).find('id').text();
                var name = $(this).find('name').text();
                var alcohol = $(this).find('alcohol').text();
                var volume = $(this).find('volume').text();
                $('<div class="items" id="link_'+id+'"></div>').html('<a href="files/'+name+'">'+name+'</a>').appendTo('#page-wrap');
            });

        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:47:05.500

那里的代码很好，尽管可以稍微优化一下。它在我测试过的每个浏览器中都能完美运行。

[http://jsfiddle.net/SgUKY/](http://jsfiddle.net/SgUKY/)

我相信问题的根源是 XML 内容。是否可以根据验证器检查您的 XML 数据？

为了更好地回答这个问题，我真的需要更多信息。

*   你能把XML贴在这里吗？
*   您正在测试哪个版本的 Opera/Chrome？

# iphone - Performance issues with asp.net &/or jQuery - Safari iPhone 5

> ID：12856535
> 
> 赞同：1
> 
> 时间：2012-10-12T09:55:34.987
> 
> 标签：iphone, asp.net, performance, jquery-ui, mobile-safari

I've built an asp.net (VB) web app at work that uses SQL Server backend for data with stored procedures. The front end is built in VS2008 and also uses bits of jQuery, Dundas charts, JavaScript, CSS etc.

It's largely accessed on desktop machines but also mobile. On the iPad 2 & 3, iPhone 4/4s performance is great and pages load close to instantly. I've just received an iPhone 5, and accessing the site in Safari and Chrome takes between 2x to 5x longer to load, and some image buttons/JavaScript is slow/unresponsive?

Has anybody else run into any problems, or does anyone know a good way I can go about testing what is the cause of the problem, or the best way to develop a workaround?

Thanks in advance (first post but have used the fantastic answers from this site constantly in the last 2 years).

# java - Error occur during running the tesseract OCR engine in my application

> ID：12856536
> 
> 赞同：0
> 
> 时间：2012-10-12T09:55:37.350
> 
> 标签：java, android, tesseract

Can I know what is the error when I debug my application? Below is my coding and the tessdata is saved inside my phone.

```
public class testingtesting extends Activity {

private static final String data_path = "/mnt/sdcard/tessdata";

 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    //    setContentView(R.layout.image);

        ImageView a = (ImageView) findViewById (R.id.testingtesingt);
        Bitmap aa =  grayScale.bitmap_in_binarize;
  //      a.setImageBitmap(aa);

        TessBaseAPI baseApi = new TessBaseAPI();
        baseApi.setDebug(true);
        System.out.println("GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG");
        //error

      //  File myDir = getExternalFilesDir(Environment.DIRECTORY_DOWNLOADS);
        baseApi.init(data_path, "eng");
        //error
        baseApi.setImage(aa);
        System.out.println("adwdwawdada");
        String recognizedText = baseApi.getUTF8Text();
        baseApi.end();
        System.out.println("cimcaoioievfoaemmov");
        Intent intent = new Intent(testingtesting.this, result.class);
        intent.putExtra("title_input", recognizedText);
        startActivity(intent);

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:40:06.330

请提供错误信息。

据我所知，你遇到了麻烦`System.out.println("GGGGGGGGGGGGGGGGGGGG");`

Android 不使用标准的 Java 控制台。相反，像这样使用 Logcat：

```
Log.d("testingtesting", "GGGGGGGGGGGGGGGGG"); 
```

如果您使用的是 Eclipse，请在启动时打开 LogCat 视图以查看应用程序的输出：

窗口→显示视图→其他→Android→LogCat

有关 LogCat 的更多信息，请[点击此处](https://developer.android.com/tools/help/logcat.html)

# java - 是否可以参数化 Java Aspect

> ID：12856537
> 
> 赞同：1
> 
> 时间：2012-10-12T09:55:38.233
> 
> 标签：java, annotations, aspectj

是否可以参数化一个方面？现在我有一个@Integration Aspect，我的切入点如下：

```
@AfterReturning(pointcut = "@annotation(Integration)",returning = "result") 
```

所以，无论在哪里找到@Integration，它都会调用这个方法。我可以实现这样的事情：

```
@Integration("new") or @Integration("deleted"), 
```

避免为每个案例创建新的注释？

此外，如果可能，如何访问此提供的值（“新”或“已删除”）。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:58:43.490

1.  是的，这是可能的
2.  以下是如何为注释添加值的[描述](http://docs.oracle.com/javase/1.5.0/docs/guide/language/annotations.html)
3.  这是[一篇](http://www.ibm.com/developerworks/java/library/j-aopwork8/)充满了使用 AspectJ 进行注释处理的示例的文章；例如，清单 8 展示了如何访问方面内的注释值

# javascript - Avoid page submit when displaying alert message in javascript

> ID：12856542
> 
> 赞同：2
> 
> 时间：2012-10-12T09:55:42.247
> 
> 标签：javascript, asp.net, alert

I am using this code block from a previous SO post [showing ClientScript Alerts before Redirecting to another page in ASP.NET c#?](https://stackoverflow.com/a/11993160/247562) that will display an alert message in an aspx page before redirecting to another page. I modified this script to avoid the redirect part.

However, this page does a submit. How can I avoid doing a page submit?

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

    public class HTMLHelper
    {
        public static void jsAlertAndRedirect(System.Web.UI.Page instance, string Message,string url)
        {
            instance.Response.Write(@"<script language='javascript'>alert('" + Message + "'); </script>");
        }
    }

HTMLHelper.jsAlertAndRedirect(this, "This is an alert."); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T10:01:09.723

您可以添加`return false;`到您的代码

```
<script language='javascript'>instructions ....; return false; </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:47:28.073

如果你想在任何按钮上调用它，那么你可以这样做：Javascript代码

```
$('[id$=btntest]').live('click',function(e){
    e.preventdefault();
    }); 
```

或者你也可以像下面那样做

```
 $('[id$=btntest]').live('click',function(e){
    return false;
    }); 
```

# javascript - Combining google places api, and directions-map api v3

> ID：12856546
> 
> 赞同：0
> 
> 时间：2012-10-12T09:55:54.417
> 
> 标签：javascript, html, google-maps-api-3, google-places-api, w3c-geolocation

I have the following code in my page (based at the moment around the google examples. I have however hit a snag, i can't seem to make places work (the markers wont show), this is my code . . . it should show all cafes, restaurants and dars within 10km's of the users location with geolocation, it also gives directions to Darwin in Australia from the users current position.

this is the code:

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Directions Complex</title>
    <style>

    html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}

  #map_canvas {
    height: 650px;
  }

      #directions-panel {
        height: 100%;
        float: right;
        width: 390px;
        overflow: auto;
      }

      #map-canvas {
        margin-right: 400px;
      }

      #control {
        background: #fff;
        padding: 5px;
        font-size: 14px;
        font-family: Arial;
        border: 1px solid #ccc;
        box-shadow: 0 2px 2px rgba(33, 33, 33, 0.4);
        display: none;
      }

      @media print {
        #map-canvas {
          height: 500px;
          margin: 0;
        }

        #directions-panel {
          float: none;
          width: auto;
        }
      }

.gmnoprint {display:none;}
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=true&libraries=places"></script>
    <script>
      var directionDisplay;
      var directionsService = new google.maps.DirectionsService();
      var a;
      var b;
      var latandlon;

      function initialize()
       {
        navigator.geolocation.getCurrentPosition(create_a_var);
       }

      function create_a_var(position)
       {

        a = position.coords.latitude;

        b = position.coords.longitude;

        latandlon = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

        loadmapscript();

       }

      function loadmapscript() {
        directionsDisplay = new google.maps.DirectionsRenderer();
        var mapOptions = {
          zoom: 15,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: new google.maps.LatLng(a, b),
          disableDefaultUI: true
        };
        var map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
        directionsDisplay.setMap(map);
        directionsDisplay.setPanel(document.getElementById('directions-panel'));

        var control = document.getElementById('control');
        control.style.display = 'block';
        map.controls[google.maps.ControlPosition.TOP].push(control);

        var request = {
        location: latandlon,
        radius: 10000,
        types: ['bar', 'restaurant', 'cafe']
        };

      }

      function calcRoute() {
        var start = latandlon;
        var end = "Darwin, NT, Australia";
        var request = {
          origin: start,
          destination: end,
          travelMode: google.maps.DirectionsTravelMode.DRIVING,
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
          }
        });
      }

      function createMarker(place) {
      var placeLoc = place.geometry.location;
      var marker = new google.maps.Marker({
      map: map,
      position: place.geometry.location
      });

      google.maps.event.addListener(marker, 'click', function() {
      alert(place.name);
      });
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="control">
      <strong>Start:</strong>
      <button id="start" onclick="calcRoute();">Click Me Please :)</button>
    </div>
    <div id="directions-panel"></div>
    <div id="map_canvas"></div>
  </body>
</html> 
```

> var directionDisplay; var directionsService = new google.maps.DirectionsService(); var a; var b; var latandlon; var map; function initialize() { navigator.geolocation.getCurrentPosition(create_a_var); }
> 
> ```
>  function create_a_var(position)
>    {
> 
>     a = position.coords.latitude;
> 
>     b = position.coords.longitude;
> 
>     latandlon = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
> 
>     loadmapscript();
> 
>    }
> 
>   function loadmapscript() {
>     directionsDisplay = new google.maps.DirectionsRenderer();
>     var mapOptions = {
>       zoom: 15,
>       mapTypeId: google.maps.MapTypeId.ROADMAP,
>       center: new google.maps.LatLng(a, b),
>       disableDefaultUI: true
>     };
>     map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
>     directionsDisplay.setMap(map);
>     directionsDisplay.setPanel(document.getElementById('directions-panel'));
> 
>     var control = document.getElementById('control');
>     control.style.display = 'block';
>     map.controls[google.maps.ControlPosition.TOP].push(control);
> 
>     var request2 = {
>     location: latandlon,
>     radius: 10000,
>     types: ['bar', 'restaurant', 'cafe']
>     };
> 
>   }
> 
>   function calcRoute() {
>     var start = latandlon;
>     var end = "Darwin, NT, Australia";
>     var request = {
>       origin: start,
>       destination: end,
>       travelMode: google.maps.DirectionsTravelMode.DRIVING
>     };
>     directionsService.route(request, function(response, status) {
>       if (status == google.maps.DirectionsStatus.OK) {
>         directionsDisplay.setDirections(response);
>       }
>     });
>   }
> 
>   function createMarker(place) {
>   var placeLoc = place.geometry.location;
>   var marker = new google.maps.Marker({
>   map: map,
>   position: place.geometry.location
>   });
> 
>   google.maps.event.addListener(marker, 'click', function() {
>   alert(place.name);
>   });
>   }
> 
>   google.maps.event.addDomListener(window, 'load', initialize); 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:38:54.333

'map' 是 loadmapscript 函数的局部变量。然后，您尝试在您的 createMarker 函数中引用它，该函数无权访问该变量。改为将 map 设为全局变量。

在此处删除 TravelMode 行末尾的尾随逗号。这将在 Internet Explorer 上引发错误：

```
 var request = {
          origin: start,
          destination: end,
          travelMode: google.maps.DirectionsTravelMode.DRIVING,
        }; 
```

**您有一个 createMarker 函数，但您的代码中没有任何内容调用该函数....因此没有标记。**

# java - 小程序不适用于 Java 7

> ID：12856547
> 
> 赞同：0
> 
> 时间：2012-10-12T09:55:54.877
> 
> 标签：java, browser, applet, java-7

在生产环境中，我们使用第三方供应商提供的小程序进行 2FA 登录。我们没有任何源代码，只有 jar 文件。小程序基本上加密了登录信息。现在它适用于大多数用户，但很少有人在使用 Java 7 时遇到问题。它显示了我们放在 applet 标记中的消息，如果浏览器不支持 Java，通常会显示该消息。由于我们只保存 jar 文件，如何自行解决问题（没有 2FA 团队支持）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:50:54.537

> 由于我们只保存 jar 文件，如何自行解决问题（没有 2FA 团队支持）？

好容易。

除非您可以通过灵感来确定问题的原因，否则您将需要对小程序进行反编译和逆向工程以尝试找出问题所在。很有可能小程序已被混淆以使逆向工程更难，并且您与供应商签署的许可证无论如何都禁止逆向工程。

与 2FA 供应商支持联系。

# javascript - 如何翻转jquery的索引？

> ID：12856548
> 
> 赞同：0
> 
> 时间：2012-10-12T09:56:02.640
> 
> 标签：javascript, jquery, each

> **可能重复：**
> [JQuery .each() 向后](https://stackoverflow.com/questions/1394020/jquery-each-backwards)

我正在使用此代码显示每个 div -> 延迟动画：

```
$.fn.slideDelay = function(){
    var delay = 0;
    return this.each(function(){
        $(this).delay(delay).animate({
            opacity: 1,
            top: 0
        }, 2000);
        delay += 1000;
    });
}; 
```

到目前为止效果很好......我遇到的唯一问题是我需要从最后一个索引而不是第一个索引开始。这意味着最后一个 div 首先被动画化，然后是 beforelast，依此类推，直到第一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:58:12.897

理论上，以下应该有效：

```
$.fn.slideDelay = function() {
    var len = this.length,
        delay = (len - 1) * 1000;

    return this.each(function() {
        $(this).delay(delay).animate({
            opacity: 1,
            top: 0
        }, 2000);
        delay -= 1000;
    });
}; 
```

**演示：http:** [//jsfiddle.net/q4cGP/](http://jsfiddle.net/q4cGP/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:58:18.680

你可以反转收藏...

```
collection = Array.prototype.reverse.call(collection); 
```

[js小提琴](http://jsfiddle.net/CHdDU/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:59:46.353

只需从 jQuery 对象中检索数组并将其反转：

```
var items = jQuery(this).get();
items.reverse();
jQuery.each(items, function() {..... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T10:00:35.763

使用如下函数映射延迟：

```
$.fn.slideDelay = function(){
    var max = this.length - 1;
    return this.each(function(i){
        $(this).delay((max - i) * 1000).animate({
            opacity: 1,
            top: 0
        }, 2000);
    });
}; 
```

# php - 我想知道如何将多个值从 php 传递给 jquery 看看下面的情况

> ID：12856549
> 
> 赞同：-1
> 
> 时间：2012-10-12T09:56:08.120
> 
> 标签：php, jquery

示例我在 PHP 中有这行代码，我想在单击按钮时传递这些值并由 jquery 接收它。我该怎么做？我已经启动了这些代码，但我不知道下一步是什么。

PHP代码：

```
 <?php

echo '<button>Get the values</button>';
$name = 'sample name';
$age = 'sample age';
$add = 'sample add';

?> 
```

jQuery代码：

```
 $(function() {
    $('button').live('click', function() {
        $.ajax({
            url: 'recieve.php',
            type: 'post',
            data: { get_name: pass_name, get_age: pass_age, get_add: pass_add  },
            success:function(){

            }
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:07:08.623

你能不能让 php 回显 JS 中的变量。像这样：

```
$(function() {
  $('button').live('click', function() {
    $.ajax({
        url: 'recieve.php',
        type: 'post',
        data: { get_name: <?=$name ?>, get_age: <?=age ?>, get_add: <?=add ?>  },
        success:function(){

        }
    });
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:43:47.560

我更喜欢在 JSON 变量中打印 PHP 值，然后直接在 JS 中访问这些值。通过这种方式，您可以将您的 JS 代码放在不同的文件中，而无需由 PHP 解释器解析。

```
<?php
$my_values = array(
    'name' => 'Sample name',
    'age' => 'Sample age',
    'add' => 'Sample add',
);
?>
<html>
  <head>

    <script type="text/javascript">
      var my_values = <?php print json_encode($my_values); ?>;

      $(document).ready(function() {
        $('button').live('click', function() {
          $.ajax({
            url: 'recieve.php',
            type: 'post',
            data: { get_name: my_values.name, get_age: my_values.age, get_add: my_values.add },
            success:function() {

            }
          });
      });
     });

    </script>
  </head>
  <body>
    <button>Get the values</button>
  </body>
</html> 
```

# iphone - iPhone , SLComposeViewController xcode 4.5

> ID：12856552
> 
> 赞同：0
> 
> 时间：2012-10-12T09:56:12.430
> 
> 标签：iphone, ios6, slcomposeviewcontroller

I have written this code:

```
self.accountStore = [[ACAccountStore alloc]init];
ACAccountType *FBaccountType= [self.accountStore accountTypeWithAccountTypeIdentifier:
     ACAccountTypeIdentifierFacebook];
NSString *key = @"987654"; //put your own key from FB here
NSDictionary *dictFB = //use ACAccountStore to help create your dictionary

[self.accountStore requestAccessToAccountsWithType:FBaccountType
                                           options:dictFB
                                        completion: ^(BOOL granted, NSError *e) {
                                                if (granted)
                                                {
                                                    NSArray *accounts = [self.accountStore accountsWithAccountType:FBaccountType];
                                                    //it will always be the last object with SSO
                                                    self.facebookAccount = [accounts lastObject];
                                                }
                                                else
                                                {
                                                    //Fail gracefully...
                                                    NSLog(@"error getting permission %@",e);
                                                }
                                            }];

NSURL *requestURL = [NSURL URLWithString:@"https://graph.facebook.com/me"];
SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                        requestMethod:SLRequestMethodGET
                                                  URL:requestURL
                                           parameters:nil];

request.account = self.facebookAccount;
[request performRequestWithHandler:^(NSData *data,
                                     NSHTTPURLResponse *response,
                                     NSError *error) {
                                         if(!error)
                                         {
                                             NSDictionary *list =[NSJSONSerialization JSONObjectWithData:data
                                                                               options:kNilOptions error:&error];

                                             NSLog(@"Dictionary contains: %@", list );
                                         }
                                         else
                                         {
                                             //handle error gracefully
                                         }                     
                                     }];

-(void)accountChanged:(NSNotification *)notif//no user info associated with this notif
{
    [self attemptRenewCredentials];
}

-(void)attemptRenewCredentials
{
    [self.accountStore renewCredentialsForAccount:(ACAccount *)self.facebookAccount
                                       completion:^(ACAccountCredentialRenewResult renewResult, NSError *error) {
                                           if(!error)
                                           {
                                              switch (renewResult)
                                              {
                                                  case ACAccountCredentialRenewResultRenewed:
                                                      NSLog(@"Good to go");
                                                      [self get];
                                                      break;
                                                  case ACAccountCredentialRenewResultRejected:
                                                      NSLog(@"User declined permission");
                                                      break;
                                                  case ACAccountCredentialRenewResultFailed:
                                                      NSLog(@"non-user-initiated cancel, you may attempt to retry");
                                                      break;
                                                  default:
                                                      break;
                                              }

                                         }
                                         else
                                         {
                                             //handle error gracefully
                                             NSLog(@"error from renew credentials%@",error);
                                         }
                                     }];
} 
```

It works great on iPhone simulator (iOS 6) but it dosent work on my iPhone (iOS 6). It dosen't show the SLComposeViewController.

# html - 在 Css 中将块元素居中，彼此相邻放置，没有任何巨大的空间

> ID：12856554
> 
> 赞同：1
> 
> 时间：2012-10-12T09:56:24.860
> 
> 标签：html, css, menu, block, center

我想将我的块菜单居中放在中间，但我也希望它彼此相邻放置而没有任何巨大的空间。我试图浮动整个东西并将左边距和右边距设置为自动。但是在网上搜索后，我发现无法将浮动的东西居中。

然后我尝试将块设置为 inline-block 并带走浮动元素。并再次将边距设置为自动。现在这似乎也不起作用。我在某个地方读到您可以将文本对齐设置为居中，这是将我的文本居中在块中，但块本身并没有进入中间。

此时我在 css 中的整个菜单代码：

```
a.menyStil
{
display: inline-block; 
width:150px; 
height:25px;
margin-right:auto;
margin-left:auto;
background:#dca; border:1px solid #000;
text-align:center; 
text-decoration:none; font-family:verdana, arial, sans-serif; font-size:12px; color:#000;
line-height:25px; 
overflow:hidden;
}

a.menyStil:hover {background:#764;}
a.menyStil:active {background:#c00;} 
```

和相关的html代码：

```
<p> <a class="menyStil" href="Hjem.html"> Hjem</a>
<a class="menyStil" href="Kontakt.html"> Kontakt oss</a>
<a class="menyStil" href="om_oss.html"> om osst</a>
<a class="menyStil" href="testing.html"> Testing</a></p> 
```

我真的很感激帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:05:38.333

将此添加到您的 CSS 代码中

```
p{
 width: 650px;
margin: auto;
} 
```

演示：[小提琴](http://jsfiddle.net/A96L3/1/)

你应该在`p`. 因为它包含`a`. 所以它来到中心。
我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:03:30.197

```
p {
    text-align: center;
} 
```

[http://jsfiddle.net/B8gFC/](http://jsfiddle.net/B8gFC/)

# facebook - 更新 fb iframe 高度

> ID：12856556
> 
> 赞同：1
> 
> 时间：2012-10-12T09:56:28.907
> 
> 标签：facebook, facebook-javascript-sdk

是否可以更新 Facebook iframe 高度？

这是场景。我有一个内部包含 PHP 页面的 Facebook 应用程序，但是当我单击菜单时，它会获取以前的 iframe 高度，并且不会自动调整当前内容的 iframe 高度。

```
 <link rel="stylesheet" href="" type="text/css" >
    <style>
    .nav li {
    background-color: #fff;

    font-family: Century Gothic;
    list-style: none outside none;
    margin-bottom: 1px;
    padding-bottom: 5px;
    padding-left: 10px;
    padding-top: 5px;
    font-size:9pt;
    border-left:6px solid #7b7b7b;
    color:#7c7c7c;
    }
    li a {
    text-decoration: none;
    color: inherit;
    }
    .title {
    margin:0px;
    }
    .navigation ul {
    padding:0px;
    margin:0px;
    }
    .logo {
    margin-bottom: 10px;
    padding-left: 10px;
    }
    .sidebar {
    width:177px;
    float:left;
    margin-right:10px;
    }
    .ui-state-active, .ui-widget-content .ui-state-active, .ui-widget-header .ui-state-active {
    background-color: #515151;
    font-family: Century Gothic;
    list-style: none outside none;
    margin-bottom: 1px;
    padding-bottom: 5px;
    padding-left: 10px;
    padding-top: 5px;
    font-size:9pt;
    border-left:6px solid #FAB101;
    color:#fff;
    }
    .titlewrapper {
    background-color: #FEFEFE;
    border: 1px solid #B6CADC;
    color: #BFBFBF;
    font-size: 28pt;
    margin-bottom: 5px;
    padding: 5px  10px;
    width: 768px;
    }
    </style>
    <div id="fb-root"></div>
    <script type="text/javascript">
            window.fbAsyncInit = function(){
                FB.init({appId: 'APPID', status: true, cookie: true, xfbml: true});
                FB.Canvas.setSize();
            };
            (function() {
                var e = document.createElement('script'); e.async = true;
                e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';  // all.js
                document.getElementById('fb-root').appendChild(e);
                setTimeout(sizeChangeCallback,5000);
            }());

            // Do things that will sometimes call sizeChangeCallback()

            function sizeChangeCallback() {
              FB.Canvas.setSize();
            }
    </script>
    </head>

    <body style="background-color:#e4e4e4;">
    <div class="clearfix" style="width:1007px;margin:auto;">
        <div id="tabs">
            <div class="sidebar">
                <div class="logo">
                    <img src="../images/gotodo_direct_logo.png">
                </div>

                <div class="navigation">
                     <ul class="nav">
                        <li id="tabs"><a href="app_page.php"><h3 class="title">Hotel Demo</h3><i>Indvidual hotel booking</i></a></li>
                        <li id="tabs"><a href="hotel.php"><h3 class="title">All Hotel List Demo</h3><i>all occupancy plus hotel partner</i></a></li>
                        <li id="tabs"><a href="hotel.php"><h3 class="title">Instruction</h3><i>how to install this app?</i></a></li>
                        <li id="tabs"><a href="hotel.php"><h3 class="title">Faq</h3> <i>frequently ask question</i></a></li>
                    </ul>
                </div>
            </div>
            <div class="main-content" style="float:left;width:790px;height:1000px;">
                    <div id="tabs-1">
                        <div class="titlewrapper" style="float:left;"><div style="float:left"><img src="images/hotel.png" style="margin-right: 10px; vertical-align: middle;"></div><div style="float:left;width:700px;">Hotel Demo<br /><i style="font-size:10pt;">let's take a look a quick demo at how hotel app look like when you install it on your facebook fan page</i></div></div>
                        <div class="rooms" style="float:left;">
                        <?php include'../hotel.php';?>
                        </div>
                    </div>
            </div>
        </div>
    </div>
    </body> 
```

这是我的应用程序的[链接](https://apps.facebook.com/hotel-reserve-app/)。

# delphi - Delphi - 单元隔离

> ID：12856559
> 
> 赞同：2
> 
> 时间：2012-10-12T09:56:38.527
> 
> 标签：delphi, components, vcl

我的新组件 (TComponent) 使用 DsgnIntf​​，因为我使用自定义属性编辑器。问题是在自定义 VCL 应用程序中使用组件时 - 未找到 DSGNINTF.DCU！一种解决方案是将命令行开关添加到编译器（不记得它是什么了），但我不喜欢那个解决方案。第二种解决方案是单元隔离。我找到了这个：

[http://edn.embarcadero.com/article/27717](http://edn.embarcadero.com/article/27717)

问题是 - 我不太了解这篇文章。我不知道在我的组件单元中究竟需要做什么才能将设计时与运行时代码分开。有人可以举个最简单的例子并解释一下吗？当人们使用我的组件时，我只想避免出现“dsgnintf.dcu not found”的问题。谢谢你。

编辑：我看了这篇文章多一点，我意识到第二个单元注册了第一个。为了避免 dsgnintf.dcu 问题，我假设第二个单元必须在它自己的 .pas 文件中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T10:26:16.853

通常您创建一个单元来在 IDE 中注册您的包，如下所示：

```
unit RegPackage;

interface

uses
  Classes, MyUnit;

procedure Register;

implementation

procedure Register;
begin
  RegisterComponents('MyPage', [TMyComponent]);
end;

end. 
```

并将此单元包含在仅设计包中：

```
package MyPackD;

{$R *.res}
..

requires
  rtl, MyPackR; // your runtime package

contains
  RegPackage in 'RegPackage.pas';

end. 
```

您链接的文章还涵盖了属性编辑器。所有与 IDE 无关的包代码都应包含在仅运行包中：

```
package MyPackR;

{$R *.res}
..

requires
  rtl,
  vcl;

contains
  MyUnit in 'MyUnit.pas';

end. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T00:41:19.337

您必须将运行时代码和设计时代码分开到单独的包中。创建一个仅包含您的组件代码的运行时包。创建一个仅设计时包，`DesignIDE`在其`requires`列表中指定您的仅运行时包和 IDE 的包，并且仅包含您的属性编辑器和注册代码。然后，您可以将仅设计时包安装到 IDE 中，并在您的项目中引用仅运行时包。包`DesignIDE`解析`DsgnInf`引用，但**不允许**链接到运行时可执行文件！它仅供 IDE 使用。

# objective-c - UITableview 在 reloadData 调用时抛出“无效的行数”错误，但仅适用于 iPad 1 而不是 iPad 2

> ID：12856561
> 
> 赞同：0
> 
> 时间：2012-10-12T09:56:45.207
> 
> 标签：objective-c, ios, multithreading, ipad, thread-safety

我有一个 iOS 应用程序，简而言之，它使用 UITableView 和几个按钮来更改表格的内容。我在开发的早期遇到了一个错误，即在 reloadData 调用之前和之后的行数不一致，但后来发现我做错了什么。

然而，现在我从测试人员那里得到一份报告，说他的 iPad 1 崩溃了，查看堆栈跟踪我可以看到同样的错误，如上所述，正在发生。但所有其他 iPad 2 测试人员似乎都可以正常工作，并且他们都使用相同的数据集来填充表格。

这是我填充表格视图的方式：

```
[tableviewController.data removeAllObjects] //Delete the old data. Tableviewcontroller is the delegate for self.tableview
[self.tableview performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO];
[tableviewController setData:[newDataSetArray mutableCopy]]; //Copy over a new dataset array
[self.tableview performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO]; 
```

如果有人知道为什么会发生这种情况并可以指出，我将非常感激。

**编辑**：更多细节。在听到这个问题后，我们让测试人员删除了应用程序的本地副本，并获取最新版本。此外，他和其他测试人员都在运行 iOS 5.1.1，据我所知，唯一的不一致是硬件版本。但这没有意义：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:08:31.197

我的想法是为什么不这样做：

```
[tableviewController setData:[newDataSetArray mutableCopy]]; //Copy over a new dataset array
[self.tableview performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO]; 
```

你真的不需要清除旧的并重新加载，然后设置新的并重新加载。

但是，我会小心线程。看起来这段代码是从非主线程运行的，这意味着表的数据源可能会与数据设置竞争。另一种方法是像这样在主线程上敲打所有东西：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [tableviewController setData:[newDataSetArray mutableCopy]]; //Copy over a new dataset array
    [self.tableview reloadData];
}); 
```

但我也很困惑的是，`tableviewController`如果您重新加载的表格视图是`self.tableview`什么？`self`不一样吗`tableviewController`？

# list - Scala：如何使用多个分隔符进行拆分

> ID：12856564
> 
> 赞同：6
> 
> 时间：2012-10-12T09:56:54.183
> 
> 标签：list, scala, split

我想知道如何在 Scala 中使用多个分隔符来拆分字符串。

例如，如果我有一个分隔符列表：

```
List("Car", "Red", "Boo", "Foo") 
```

还有一个要收获的字符串：

```
Car foerjfpoekrfopekf Red ezokdpzkdpoedkzopke dekpzodk Foo azdkpodkzed 
```

我希望能够输出如下内容：

```
List(   ("Car", " foerjfpoekrfopekf "),
    ("Red", " ezokdpzkdpoedkzopke dekpzodk "),
    ("Foo", " azdkpodkzed")     
) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T10:26:06.453

您可以使用列表创建正则表达式并使用其拆分方法：

```
val regex = List("Car", "Red", "Boo", "Foo").mkString("|").r
regex.split("Car foerjfpoekrfopekf Red ezokdpzkdpoedkzopke dekpzodk Foo azdkpodkzed") 
```

但是，这并不能告诉您在哪里使用了哪个分隔符。如果你需要，我建议你试试 Scala 的解析器库。

编辑：

或者您可以使用正则表达式一次提取一对，如下所示：

```
def split(s:String, l:List[String]):List[(String,String)] = {
  val delimRegex = l.mkString("|")
  val r = "("+delimRegex+")(.*?)(("+delimRegex+").*)?"
  val R = r.r
  s match {
    case R(delim, text, rest, _) => (delim, text) :: split(rest, l)
    case _ => Nil
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:10:57.313

有点冗长，但它有效：不
**推荐使用的版本：（**它有一个错误，把它留在这里，因为你已经接受了答案）

```
def f(s: String, l: List[String], g: (String, List[String]) => Int) = {
    for {
        t <- l
        if (s.contains(t))
        w = s.drop(s.indexOf(t) + t.length)
    } yield (t, w.dropRight(w.length - g(w, l)))
}

def h(s: String, x: String) = if (s.contains(x)) s.indexOf(x) else s.length

def g(s: String, l: List[String]): Int = l match {
    case Nil => s.length
    case x :: xs => math.min(h(s, x), g(s, xs))
}

val l = List("Car", "Red", "Boo", "Foo")

val s = "Car foerjfpoekrfopekf Red ezokdpzkdpoedkzopke dekpzodk Foo azdkpodkzed" 
```

**输出：**

```
f(s, l, g).foreach(println)
> (Car, foerjfpoekrfopekf )
> (Red, ezokdpzkdpoedkzopke dekpzodk )
> (Foo, azdkpodkzed) 
```

它返回`Array[String]`而不是列表。但你也可以这样做：`f(s, l, g).toList`

**编辑：** 刚刚注意到如果分隔符仅在字符串中出现一次，则此代码很好。如果定义`s`如下：

```
val s = "Car foerjfpoekrfopekf Red ezokdpzkdpoedkzopke dekpzodk Foo azdkpodkzed Car more..." 
```

我仍然会得到相同的结果，而不是另一对`("Car"," more...")`

**编辑#2：无漏洞版本**这里是固定片段：

```
def h(s: String, x: String) = if (s.contains(x)) s.indexOf(x) else s.length

def multiSplit(str: String, delimiters: List[String]): List[(String, String)] = {
    val del = nextDelimiter(str, delimiters)
    del._1 match {
        case None => Nil
        case Some(x) => {
            val tmp = str.drop(x.length)
            val current = tmp.dropRight(tmp.length - nextDelIndex(tmp,delimiters))
            (x, current) :: multiSplit(str.drop(x.length + current.length), delimiters)
        }
    }
}

def nextDelIndex(s: String, l: List[String]): Int = l match {
    case Nil => s.length
    case x :: xs => math.min(h(s, x), nextDelIndex(s, xs))
}

def nextDelimiter(str: String, delimiters: List[String]): (Option[String], Int) = delimiters match {
    case Nil => (None, -1)
    case x :: xs => {
        val next = nextDelimiter(str, xs)
        if (str.contains(x)) {
            val i = str.indexOf(x)
            next._1 match {
                case None => (Some(x), i)
                case _ => if (next._2 < i) next else (Some(x), i)
            }
        } else next
    }
} 
```

**输出：**

```
multiSplit(s, l).foreach(println)
> (Car, foerjfpoekrfopekf )
> (Red, ezokdpzkdpoedkzopke dekpzodk )
> (Foo, azdkpodkzed)
> (Car, more...) 
```

现在它可以工作了:)

# php - 仅在登录脚本中使用参数化就足够了吗？

> ID：12856566
> 
> 赞同：0
> 
> 时间：2012-10-12T09:56:57.530
> 
> 标签：php, sql, code-injection, parameterized

更多的是风险评估问题而不是技术问题。

所以我一直在阅读很多关于防止 SQL 注入的内容。让我们假设我有一个大型 Web 应用程序，该应用程序大多未受保护，我需要进行一些改进以防止出现此问题。使用动态查询读取大量 SQL 交互，但很少（少于 100 个注册用户）。

我的问题是......如果我已经使用参数化查询保护了主登录脚本（唯一公开可用的用户输入），是否真的有必要为网站的其余部分做同样的工作？我的意思是，如果潜在的攻击者无法登录，他还能造成多少其他损害？

当然，假设我的注册用户都没有恶意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:04:35.277

是什么让您确定没有一个合法用户不会尝试攻击您的系统？

我很高兴我的银行不这么认为。现在有人会清空我的帐户，只需使用 sql 注入攻击。

即使这样，你也应该小心事故。如果您使用参数化查询，`'`则在值中使用 a 的人不会引起问题。

它允许参数中的类型安全。

它产生了更好的编程习惯。

它允许执行计划缓存。 *（没有它，每个具有不同参数的查询看起来都像是一个完全不同的查询。不仅会阻止缓存这些查询的计划，而且会过度填充缓存，因此真正可以重复使用的计划会被丢弃。）*

它不仅更安全，而且更可靠。除了实验和一次性代码之外，我想不出任何项目我都不会容忍不使用参数化查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:05:54.643

永远不要相信你的用户！

即使你这样做了（也没有人可以注册），例如 CSRF 总是有潜力的；攻击者会将该系统的用户引导至带有图像的看似无害的页面。该图像将具有以下代码：

```
<img src="http://yourserver.com/profile?user_id='; DROP TABLE users" /> 
```

我的黑客技能几乎是 zilch，但你可以想象会发生什么 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:03:02.907

> 当然，假设我的注册用户都没有恶意。

永远不要假设:) 如果您的用户拥有不同的权限，那么几乎没有权限的用户可以找到获得管理员访问权限的方法......等等。

此外，防止 SQL 注入不会使您的登录安全，并且有人可能会通过它进行暴力破解，或者只是从您*信任*的用户那里嗅探数据包。确保保护您的整个应用程序，不要假设您计划的入口点（登录脚本）是唯一可用的.​​.....

如果您的网站包含或需要用户提供任何敏感数据，请使用 SSL。

# c# - 如何为自定义控件使用嵌套命名空间？

> ID：12856568
> 
> 赞同：1
> 
> 时间：2012-10-12T09:57:11.233
> 
> 标签：c#, winforms, user-controls, namespaces, windows-forms-designer

我在命名空间下定义了一个用户控件 ExpressionControl：

```
TriggerEditor.UserControls 
```

我在命名空间下有一个表单“IfEditor”：

```
TriggerEditor.Forms 
```

当我将我的控件实例添加到表单（将其命名为 expCondition）时，在设计器中生成以下代码来创建控件：

```
this.expCondition = new TriggerEditor.UserControls.ExpressionControl(); 
```

这会导致以下编译错误：

```
The type name 'UserControls' does not exist in the type 'TriggerEditor.Forms.TriggerEditor' 
```

我不明白为什么它在“TriggerEditor.Forms.TriggerEditor”中寻找；这不是代码所说的。现在，我可以通过修改行来手动解决此错误，删除“TriggerEditor”。在“TriggerControls”之前，例如：

```
this.expCondition = new UserControls.ExpressionControl(); 
```

这满足了编译器的要求，但是我显然不想在每次将我的 ExpressionControl 的实例添加到表单时都这样做。我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:58:05.233

看起来您可能`TriggerEditor`在命名空间中有一个类`TriggerEditor.Forms`；是这样吗？

如果是这样，因为`TriggerEditor`该类在您当前的命名空间中，您“更接近”这个类，因此它正在寻找一个子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:02:31.753

避免对类和命名空间使用相同的名称！？

显然，在 namespace`TriggerEditor.Forms`中，您有一个`TriggerEditor`与 IfEditor 类在同一命名空间中命名的类。

因此，在查找 时`TriggerEditor.UserControls.ExpressionControl`，编译器会查找`TriggerEditor`类（在同一个命名空间中，因此更接近）而不是`TriggerEditor`命名空间......

通常，为避免这种情况，您将使用[命名空间别名 qualifier](http://msdn.microsoft.com/en-us/library/c3ay4x3d%28v=vs.80%29.aspx)，但在 Designer 生成的类中，您无法真正控制它。

# c# - 有没有办法使用 AppSettings 中的键访问自定义配置部分的值？

> ID：12856569
> 
> 赞同：6
> 
> 时间：2012-10-12T09:57:12.410
> 
> 标签：c#, asp.net, web-config, custom-configuration

我的 web.config 中有一个自定义配置部分，如下所示：

```
 <configSection>
            <section name="CustomConfig" type="ConfigSectionRoot" allowLocation="true" allowDefinition="Everywhere"/>
        </configSection>

    <CustomConfig>
    <ConfigRoot>
        <add key="DataBase" value="CouchDB"/>
        <add key="FrontEnd" value="Asp.Net"/>
        <add key="AppName" value="Virtual WorkPlace"/>
      </ConfigRoot>
    </CustomConfig>

<AppSettings>
<add key="DataBase" value="CouchDB"/>
</AppSettings> 
```

我的 ConfigSectionRoot.cs 是这样的：

```
public class ConfigSectionRoot:ConfigurationSection
    {

        [ConfigurationProperty("key", DefaultValue = "", IsKey = true, IsRequired = true)]
        public string Key
        {
            get
            {
                return ((string)(base["key"]));
            }
            set
            {
                base["key"] = value;
            }
        }

        [ConfigurationProperty("value", DefaultValue = "", IsKey = false, IsRequired = false)]
        public string Value
        {
            get
            {
                return ((string)(base["value"]));
            }
            set
            {
                base["value"] = value;
            }
        }
    } 
```

如果我使用 AppSettings 而不是自定义配置，我可以像这样访问它：

```
string results= ConfigurationManager.AppSettings["Database"];
// results wil contain "CouchDB" 
```

有没有办法在自定义配置部分实现同样的事情？？？请帮帮我

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T22:10:44.787

### NameValueSectionHandler

If your configuration doesn't need to be more than a key-value store, I'd go for a [NameValueSectionHandler](http://www.c-sharpcorner.com/uploadfile/shyjumohan/creating-custom-sections-and-encryption-in-web-config/).

```
<section name="customConfig" type="System.Configuration.NameValueSectionHandler"/>
<!-- ... -->
<customConfig>
  <add key="DataBase" value="CouchDB" />
  <add key="FrontEnd" value="Asp.Net" />
  <add key="AppName" value="Virtual WorkPlace" />
</customConfig> 
```

You can then read it out, just like the appSettings:

```
var customConfig = (System.Collections.Specialized.NameValueCollection)System.Configuration.ConfigurationManager.GetSection("customConfig");//i have changed like this and it worked fine
var database = customConfig["DataBase"]; 
```

### SingleTagSectionHandler

You could also achieve the same with a SingleTagSection:

```
<section name="customConfig" type="System.Configuration.SingleTagSectionHandler"/>
<!-- ... -->
<customConfig database="CouchDB" frontEnd="Asp.Net" appName="Virtual Workplace" /> 
```

And then query it with:

```
var customConfig = (System.Collections.Hashtable) System.Configuration.ConfigurationManager.GetConfig("customConfig");
var database = customConfig["database"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T20:41:09.963

.NET 配置框架提供了用于表示元素列表的[ConfigurationElementCollection](http://msdn.microsoft.com/en-us/library/system.configuration.configurationelementcollection.aspx)类。在上面的示例中，您的 ConfigurationElementCollection 实现由*ConfigRoot* xml 元素表示。该集合应具有“ConfigSectionRoot”类型的子元素。ConfigSectionRoot 类应该继承自 ConfigurationElement，而不是 Configuration Section。

您必须创建一个单独的类来表示 CustomConfig xml 元素。此类是您配置的根，必须从 ConfigurationSection 继承。

```
public class CustomConfigConfigurationSection : ConfigurationSection
{
    public static CustomConfigConfigurationSection Section
    {
        get
        {
            return ConfigurationManager.GetSection("customConfig") as CustomConfigConfigurationSection;
        }
    }

    public ConfigConfigurationElementCollection ConfigRoot
    {
        get
        {
            return this["configRoot"] as ConfigConfigurationElementCollection;
        }
    }
}

public class ConfigConfigurationElement : ConfigurationElement
{
    [ConfigurationProperty("key")]
    public string Key
    {
        get
        {
            return (string)this["key"];
        }
    }

    [ConfigurationProperty("value")]
    public string Value
    {
        get
        {
            return (string)this["value"];
        }
    }
}

public class ConfigConfigurationElementCollection : ConfigurationElementCollection
{
    protected override ConfigurationElement CreateNewElement()
    {
        return new ConfigConfigurationElement();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((ConfigConfigurationElement)element).Key;
    }

    // Slight hack to look up the direct value property of the ConfigConfigurationElement from the collection indexer
    public new string this[string key]
    {
        get
        {
            return (base[key] as ConfigConfigurationElement).Value;//I m getting the error in this line
        }
    }
} 
```

直接使用：

```
var section = CustomConfigConfigurationSection.Section;
var value = section.ConfigRoot["key"]; 
```

# php - 我正在尝试从存储在服务器中的 .php file.php 文件中获取 json 数据。我编写了以下代码。但我无法获取数据

> ID：12856570
> 
> 赞同：1
> 
> 时间：2012-10-12T09:57:16.477
> 
> 标签：php, html, json, parsing, cordova

我是这个 jquery 和 phonegap 的新手。我发现从本地服务器解析 .php 文件中的数据几乎没有困难。请帮助我这样做。

这是我的 index.html 页面：

```
 <!DOCTYPE HTML>
    <html>
    <h2>JSON Parser</h2>
     <script type="text/javascript" src="jquery.js"/></script>
    <script type="text/javascript">
        function parseJSON()
           {

               var json;
               $.ajax({
                    type: 'POST',
                    url: 'http://192.168.1.12/training/services/login.php',
                    cache: false,
                    // data: $('#abc').serialize(),
                    dataType: 'json',
                    success: function(data){
                            alert(data);
                            $('#data').append(data);
                       }
                    });

              }
    </script>
    </head>
    <body onload="parseJSON()">
    <p>Employee's Information</p>
    <form id="abc" method ="post">
    <div id="data"></div>
    </form>
    </body>
    </html> 
```

login.php 文件包含一个示例 json 数据，如下所示：

```
{"username":"test@test.com","password":"password"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:03:35.407

如果您尝试使用 php 和 ajax 获取数据，请使用 jsonp，

在您的 PHP 文件中为 json 输出添加回调：

```
echo $_GET['callback'] . '('.json_encode($data).')';exit; 
```

在您的 ajax 调用中附加回调

Javascript：

```
$.ajax({
    url: 'http://192.168.1.12/training/services/login.php?callback=?',              
    cache: false,
    type: "GET",
    dataType: "jsonp",
    contentType: "application/json; charset=utf-8",
    success: function(data) {

    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {
        alert(errorThrown);
    }
}); 
```

最后但并非最不重要的一点是，不要忘记为您的本地主机添加域白名单

在 corodova.xml 中：

```
<access origin="http://192.168.1.12"/> OR
<access origin="*"/> to allow all domains 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:06:16.373

如果我理解正确，您可能会做类似的事情。如果您的 php 页面将数据发送到您的 html 页面，您可以使用 GET 而不是 POST

```
<!DOCTYPE HTML>
<html>
<h2>JSON Parser</h2>
<script type="text/javascript" src="jquery.js"/></script>
<script type="text/javascript">
    function parse()
       {
           var json;
           $.ajax({
                type: 'GET',
                url: 'http://192.168.1.12/training/services/login.php',
                cache: false,
                dataType: 'json',
                success: function(data)
                   {
                        var obj = jQuery.parseJSON(data);
                        $('#data').html(obj["username"]);
                   }
                });
          }
</script>
</head>
<body onload="parse()">
<p>Employee's Information</p>
<form id="abc" method ="post">
<div id="data"></div>
</form>
</body>
</html> 
```

# character-encoding - XML 中的字符编码问题

> ID：12856571
> 
> 赞同：0
> 
> 时间：2012-10-12T09:57:28.433
> 
> 标签：character-encoding

这个词给我带来了麻烦。布鲁考普

在我的 cms 中，在网页顶部我有这一行。

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

数据库将上面的单词存储为`BrÃºÃ°kaup`并有一个字符集`latin1`

在我的 xml 文件的顶部，我有以下内容：

```
<?xml version="1.0" encoding="UTF-8" ?> 
```

数据库是否使用了错误的字符编码？即使是这样。为什么在 html 中我指定了 utf8 字符集并且单词显示正确。然而在 XML 中我做了类似的事情，但它没有？

XML 由 PHP 生成。我试图在我的脚本中添加以下内容。

```
header('charset=utf-8'); 
```

这没有任何区别。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:10:16.777

由于数据是 latin1（= ISO-8859-1 或 windows-1252）编码的，因此需要将其转换为 UTF-8 才能以 UTF-8 编码显示在页面上。用于此的工具取决于您用来从数据库中获取数据并将其放入 HTML 或 XML 文档的软件。

如果 HTML 文件正确显示，则要么在某个时间进行了此类转换，要么 HTML 文件实际上被浏览器解释为 latin1 编码。如果服务器发送指定 charset 参数的 HTTP Content-Type 标头会发生这种情况 - HTTP 标头覆盖`meta`标签。

# ios - 应用更新后显示的旧界面

> ID：12856573
> 
> 赞同：0
> 
> 时间：2012-10-12T09:57:32.737
> 
> 标签：ios, xcode

有时，我在运行新版本的应用程序（本机 ios 应用程序，在 XCode 4.3 下开发）时会出现奇怪的行为。

在运行新版本的应用程序时，似乎显示了一些旧的界面部分。

它发生在 IOS 模拟器和真实设备上，连接到开发人员机器。

删除派生数据没有帮助。清洁来源没有帮助。删除和重新安装应用程序有**帮助**，但我担心某些用户会看到旧界面。

如何完全确定用户会看到什么新界面？

[我在这里](https://stackoverflow.com/questions/5714372/how-to-empty-caches-and-clean-all-targets-xcode-4 "这里")和[那里](https://stackoverflow.com/questions/12236450/xcode-simulators-shows-correct-xib-interface-but-on-device-its-showing-old-i "那里")查看了类似的问题，但没有找到答案 - 如何确定在应用程序更新后用户会看到哪些新界面。重新安装应用程序不是解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:05:02.753

我认为您在通过 App Store 更新时不必担心会发生这种情况，因为实际的应用更新过程是更新安装到新目录，然后复制用户文档，然后删除旧应用。更好地描述在这里[当 iOS 安装应用程序更新时究竟会发生什么？](https://stackoverflow.com/questions/5225974/what-precisely-happens-when-ios-installs-an-update-to-an-app)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:28:23.287

我确信已删除或重命名的资源文件（如 .xib 文件或图像）仍保留在设备或模拟器上的包中，即使您清理/重建 xcode 项目也是如此。

确保这些文件完全消失的唯一方法是从主屏幕上删除应用程序，就像你描述的那样。所以我认为未删除的文件可能是您问题的一部分。

还要检查您是否更改了本地化 .xib 文件或 .strings 文件的某些内容。

我很确定，如果当您从主屏幕删除应用程序时问题就消失了，那么最终用户将不会遇到您不需要的界面部分。

# java - “线程饥饿死锁”是否发生在这里

> ID：12856574
> 
> 赞同：0
> 
> 时间：2012-10-12T09:57:37.630
> 
> 标签：java, multithreading, deadlock

我正在尝试使用 Callables 和 ThreadPool 通过 Web 服务（通过它的 Java API）同时处理一些事务

```
public class CallableTxSender implements Callable<Transaction> {

    private Transaction transaction;
    private Engine engine;

    public CallableTxSender(Transaction transaction, Engine engine) {
        this.transaction = transaction;
        this.engine= engine;
    }

    @Override
    public Transaction call() throws Exception {
        return engine.processTx(transaction);
    }

} 
```

其中`Engine`- 是执行 Web 服务调用的 Api。

我正在创建一个由 50 个线程组成的池；

```
ExecutorService executorService = Executors.newFixedThreadPool(50);
List<Transaction> transactions = transactionDao.getPaidTxs();

Engine engine= new Engine();
for (Transaction transaction : transactions) {
    CallableTxSender txSender = new CallableTxSender(transaction, engine);
    executorService.submit(txSender);
} 
```

当我尝试处理 100 个事务时，它从前 20-30 个事务开始正常，然后在某个地方它只是挂起。我不确定 API 是否支持同时请求，但应该支持。

我要确定的是我的客户部分没问题。你怎么看？

**编辑**：我将池大小减少到 10，并且处理得很好。感谢评论中的*马尔科*。问题仍然是，是什么让池挂起 50 个并发任务而不是 10 个？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:34:39.240

当提交给执行器服务的任务提交其他任务并等待它们完成时，就会发生线程饥饿死锁。您的问题中的代码中没有任何内容表明这里正在发生这种情况。

您的代码的某些其他部分导致线程饥饿死锁并非不可能，但您还应该考虑其他类型的死锁的可能性。

* * *

> 问题仍然是，是什么让池挂起 50 个并发任务而不是 10 个？

无法肯定地说。然而，一种可能的解释是，同时执行更多任务会增加特定锁定场景发生的可能性。（类比是生日悖论......）

推论是减少池大小已经大大降低了死锁的可能性，但你不能*确定*你已经完全消除了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:00:58.427

我在您提供的代码中没有看到问题。

我不会猜测挂起可能在哪里，而是使用`jstack`or获得堆栈跟踪，`jvisualvm`并找到挂起线程的行和堆栈跟踪以及它们共享的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:07:26.663

如果事务不相互依赖，那么您的代码就可以了。为确保，请使用 newCachedThreadPool 而不是 newFixedThreadPool。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:18:16.110

[java.util.concurrent 中的ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)实现可以帮助您调整线程池大小、workQueue 大小和其他各种可扩展性挂钩。队列大小和最大池大小可以相互权衡。当所有 corePoolSize 线程都忙时，新任务将在 workQueue 中等待，或者创建新线程达到最大池大小。如果两个 workQueue 都已满且最大池线程忙，则提交给 Executor 的新任务将被拒绝，并且其中一项任务拒绝策略将发挥作用。当 workQueue 很大时，任务应该相互独立，这一点很重要。

# asp.net - how to continue any tag inline after

> ID：12856577
> 
> 赞同：5
> 
> 时间：2012-10-12T09:57:39.920
> 
> 标签：asp.net, html, css, html-table

First See the image given below.

![enter image description here](../Images/a0a584b9e8b3b999187fa89f018dbbc1.png)

code here:

```
 <h5>
        Login!</h5>
    <table>
        <tr>
            <td>
                User Name:
            </td>
            <td>
                <asp:TextBox ID="_userName" runat="server"></asp:TextBox>
            </td>
            <td>
                Password:
            </td>
            <td>
                <asp:TextBox ID="_password" TextMode="Password" runat="server"></asp:TextBox>
            </td>
            <td>
                <asp:Button ID="_login" runat="server" Text="Login" OnClick="_login_Click" />
            </td>
        </tr>
        <tr>
            <td colspan="5">
                <asp:Label ID="_wrongDetails" runat="server"></asp:Label>
            </td>
        </tr>
    </table> 
```

I want username immediately after login text. I have tried position:inline. but it's not working. or can anyone help me to get started in css stuff. Thanks in Advance.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T10:47:24.843

You need to set display:inline style in both h5 tag and table tag also. Then it will not cause both tag to break a line and hence display it in a single line.

fix it:

```
 <h5 style="display:inline">
    Login!</h5>
<table style="display:inline">
..
.. 
```

hope this helps you.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:05:11.580

Set the `<h5>` to be `display: inline` or `display: inline-block`.

That would cause it not to break the line.

You may want to use a `<form>` for the login **form** instead of a `<table>`.

# javascript - 动态调用属性的方法

> ID：12856580
> 
> 赞同：1
> 
> 时间：2012-10-12T09:57:50.213
> 
> 标签：javascript

好的，看下面的代码：

```
function person(name){
    this.name = name;
    this.say = function(){
        alert(this.name);
    }
};

Main = {};

Main.person1 =  new person("p1");

Main.person2 =  new person("p2");

Main.person3 =  new person("p3");

executeSay = function(argument1){
 //Implementation
} 
```

应该做`executeSay`的是，调用给定参数的 say 方法，我不确定它是怎么回事，但让我把这个方法`executeSay("person1")`应该执行`Main.person1.say()`等等。我认为我们可以通过`call`方法实现这一点，但我不确定实施。

**请不要建议以下方法**

```
say = function(){
  alert(this.name);
}
say.call(Main.person1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:13:12.017

我会这样做：

```
function Person(name){
  this.name = name
}

Person.prototype.say = function () {alert(this.name)}

var main = {
  person1: new Person('p1')
, person2: new Person('p2')
, person3: new Person('p3')
}

function executeSay(personStr) {main[personStr].say()} 
```

（更新以反映 executeSay 的字符串参数）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:00:05.577

如果你已经在函数中传递了对象，你可以在那里访问它的所有方法，所以使用：

```
executeSay = function(person){
  person.say();
} 
```

然后通过例如调用此函数

```
executeSay( Main.person1 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:04:43.263

这不工作吗？

```
executeSay = function(person){person.say()} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T10:03:09.877

Let`executeSay`调用参数对象的 say 方法：

```
executeSay = function(person){
 person.say();
} 
```

[演示](http://jsfiddle.net/bDn4k/)。

# c# - 设置 DisplayPropertyName 值

> ID：12856581
> 
> 赞同：0
> 
> 时间：2012-10-12T09:57:57.450
> 
> 标签：c#, asp.net-mvc, data-annotations, t4

我想知道是否有一种方法（可能带有数据注释）来设置

> property.DisplayPropertyName

.

请问你有什么想法吗？！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-16T11:52:48.693

实际上，我认为您的意思是要问如何选择*不同*的属性作为显示属性（即，用于在 UI 中简要表示类的对象的属性）。

为脚手架生成元数据的实体框架服务选择字符串类型的第一个属性（据我所知），但您可以通过将`DisplayColumn`属性应用于您的类来更改它：

```
[DisplayColumn("Alias")]
public class Person {
    public string Name { get; set; }
    public string Alias { get; set; }
} 
```

但是请注意，这仅适用于实际映射到数据库中列的属性。（我试图使用计算属性，而不是映射，但是在搭建脚手架时会导致错误消息。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:04:47.047

这很容易做到：

```
[DisplayName("RenamedProperty")] 
```

你甚至可以添加描述

```
[Description("Demonstrates DisplayNameAttribute.")] 
```

或者您可能希望它引用您的资源，以便它适应所选语言：

```
[Display(Name = "Description", ResourceType = typeof(Resources))] 
```

# nhibernate - 在 nhibernate 中通过代码映射

> ID：12856583
> 
> 赞同：0
> 
> 时间：2012-10-12T09:58:04.433
> 
> 标签：nhibernate

我正在检查一些使用代码映射的映射示例，我有一个简单的问题如果我有两个像这样映射的属性

```
Property(x => x.UserName, m => 
        {
            m.Length(50);
            m.NotNullable(true);
        });

Property(x => x.UpperUserName, m => 
        {
            m.Length(50);
            m.NotNullable(true);
            m.UniqueKey(“UniqueUpperUserName”);
            m.Access(Accessor.Field);
        }); 
```

这`m.Access(Accessor.Field);`意味着什么？

为什么它用于第二个属性 UpperUserName 而不是第一个？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:02:37.587

这意味着 NHibernate 在读取和写入值时不会使用属性本身，而是使用底层字段。

```
// This will be used
var string upperUserName;

public string UpperUserName
{
    get { return upperUserName; }
    // Maybe this is a read-only property, 
    // so we must allow NHibernate to update the value somehow
    // set { upperUserName = value; }
} 
```

[您可以在NHibernate 文档](http://nhforge.org/doc/nh/en/index.html#mapping-declaration-property)中阅读有关可用访问类型的更多信息。只需向下滚动到访问和命名策略表。

# c - 在计时器运行时执行任务

> ID：12856585
> 
> 赞同：2
> 
> 时间：2012-10-12T09:58:05.260
> 
> 标签：c, linux, ubuntu, timer

请帮助我，我创建了一个计时器，我想在我的计时器运行时执行特定任务。但是我的代码不允许我在计时器运行时运行任务。它只在定时器运行时休眠。我的代码是

```
#include<stdio.h>
#include<unistd.h>
#include<sys/time.h>
#include<signal.h>
#include <time.h>
#define INTERVAL 10

void timerhandler(int signum)
{

printf("\ni m manoj doing some specila task\n");

}

int timer()
{
    int i;
    struct itimerval val;
    struct sigaction action;

    sigemptyset(&action.sa_mask);
    action.sa_handler=&timerhandler;
    action.sa_flags=SA_RESTART;
    if(sigaction(SIGALRM,&action,NULL)==-1)
    {   
        perror("sigaction");
        return 1;
    }

    val.it_interval.tv_sec  = 0;
    val.it_interval.tv_usec = 0;
    val.it_value.tv_sec = 3;
    val.it_value.tv_usec    = 0;

    if(setitimer(ITIMER_REAL,&val,0)==-1)

        perror("alarm");

    else 

    for(;;)
    {
    Sleep(10);
    printf("timer val is  %d", &val.it_value.tv_sec );
    printf("\ni m manoj doing normal task\n");

    return 0;
    }
    return 0;
}

int main()
{
timer();
} 
```

# ruby-on-rails - 如何修改我的部分表单以处理 has_one 关联？

> ID：12856587
> 
> 赞同：0
> 
> 时间：2012-10-12T09:58:10.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3, has-one

这是我的相关部分`_form.html.erb`

```
<%= form_for(@score) do |f| %>
  <% if @score.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@score.errors.count, "error") %> prohibited this score from being saved:</h2>
      <ul>
      <% @score.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

    <div class="field">
      <%= f.label :client_id %><br />
      <%= f.select :client_id, @clients.collect { |c| [c.name, c.id] }, {:include_blank => 'None'} %>
    </div>  

  <div class="field">
    <%= f.label :firm_size %><br />
    <%= f.text_field :firm_size %>
  </div>
    .
    .
    .
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

当我有一个用于创建 a 的泛型`Score`并且有一组通过控制器通过`clients`.

问题是当只有一条`client`记录时....比如说一个 URL，例如： `myapp.com/client/6/scores/new/`

鉴于我`client_id`在参数中有一个，它给了我一个零错误：

```
undefined method `collect' for nil:NilClass 
```

如何为一条`@client`记录解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:03:43.017

看起来您正在使用嵌套资源，因此应该调用`myapp.com/client/6/scores/new/`您的`new`方法。`ScoreController`

在此方法中（或在前过滤器中），我假设您有一行类似于：

```
@client = Client.find(params[:client_id]) 
```

现在，如果您想按照构建的方式使用您的部分，您要么必须确保有一个对象响应`collect`名称为的方法（即数组），`@clients`要么您可以继续重写您的部分和拆分它分成`if`几部分左右......

您收到的错误消息基本上意味着，当`ScoreController#new`方法被渲染时，没有调用任何对象，`@clients`因此它是 nil，并且`NilClass`没有方法`collect`

所以我会在你的`ScoreController#new`方法中执行以下操作：

```
# get your single client
@client = Client.find(params[:client_id])

# and simply put it in an array with the name your partial uses
@clients = [ @client ] 
```

现在，我不确定这是一个优雅的解决方案，但它应该让你继续......

# javascript - Ember Data 中的两种方式一对一关联

> ID：12856590
> 
> 赞同：1
> 
> 时间：2012-10-12T09:58:17.453
> 
> 标签：javascript, ember.js, ember-data

在我的应用程序中，模型之间有两种方式 1:1 的关系。当试图在它们之间建立关联时，我得到......

```
Uncaught RangeError: Maximum call stack size exceeded 
```

...并且跟踪重复

```
OrderedSet.forEach
Map.forEach
DS.Model.Ember.Object.extend.toJSON
DS.Model.Ember.Object.extend.addBelongsToToJSON
DS.Model.Ember.Object.extend.toJSON
Map.forEach
OrderedSet.forEach 
```

代码的相关部分：

```
App.Employee = DS.Model.extend( {
    // ... 
    recruitment:DS.belongsTo( 'App.Recruitment', { embedded: true } )
} );

App.Recruitment = DS.Model.extend( {
    // ...
    employee:DS.belongsTo( 'App.Employee', { embedded: true } ),
} );

// ...

recruitment.set('employee', employee);
employee.set('recruitment', recruitment);
App.store.commit(); // <= boom 
```

这是 Ember Data 应该支持的东西，还是我处理这一切都错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:56:17.900

Ember-Data 目前不支持一对一关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-24T08:54:12.600

这已得到修复，现在是使模型相互归属的直接过程：

```
App.User = DS.Model.extend({
  profile: DS.belongsTo('profile')
});

App.Profile = DS.Model.extend({
  user: DS.belongsTo('user')
}); 
```

[以上是来自http://emberjs.com/guides/models/defining-models/](http://emberjs.com/guides/models/defining-models/)的示例

# django - django-admin.py makemessages -l 的问题

> ID：12856599
> 
> 赞同：1
> 
> 时间：2012-10-12T09:58:54.347
> 
> 标签：django, django-multilingual

我想在我的应用程序中使用**多种语言**

我不想要 LOCALE 文件夹中的英语语言环境文件，但我错误地使用它创建了这个文件

`django-admin.py makemessages -l en`

所以请告诉我如何删除我创建的这个“en”文件夹。因为现在如果我尝试使用它为另一种语言创建语言文件夹，`django-admin.py makemessages -l es`它不会创建。

为什么这样？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:16:14.817

首先，在语言环境中拥有英文“en”目录与未创建“es”之间没有关系。

其次，如果你想删除 en 你可以通过 rm -r en/ 删除它

正如您尝试做的那样，es 有几个变体。也许你可以尝试给出一个特定的变体。这将帮助您处理语言代码。[http://www.science.co.il/language/locale-codes.asp](http://www.science.co.il/language/locale-codes.asp)

# c# - Rally SOAP API - 导入 .net 项目后缺少类 RallyServiceService

> ID：12856603
> 
> 赞同：2
> 
> 时间：2012-10-12T09:59:15.793
> 
> 标签：c#, .net, soap, rally

我正在使用 Rally 试用帐户进行集成概念验证，因此我可以估计将我们的系统与 Rally 集成需要多少成本。

我正在尝试将 Rally SOAP API 与 .net 一起使用，遵循 Rally 文档 (/doc/webservice/dotnetsoap.jsp) 我已成功将 Rally Web 服务导入到我的 c# 项目中，但随后 Rally 文档说我必须创建一个来自类 RallyServiceService 的对象，虽然我有一堆可用的类，但这个不存在。

有没有其他人有这个问题？

我将不胜感激任何帮助。谢谢

编辑：（在 Jérémie 评论之后）

我的代码如下所示：

```
using MyProject.MyNamespace.Rally;

namespace MyProject.MyNamespace {
  public class MyClass: MyInterface {
    public void MyMethod() {
      *RallyServiceService doesn't exist here* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:25:54.587

我们实际上建议使用我们的 REST API 而不是 SOAP，尤其是对于新开发。有一个很好的 .NET 工具包可以帮助您入门。文档、代码示例等可以在这里找到：

[http://developer.rallydev.com/help/rest-api-net](http://developer.rallydev.com/help/rest-api-net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:47:26.240

对 Kyle 使用 Rally 的 .NET 的 REST API 的建议给予响亮的 +1。Rally 的 REST API 更健壮、更易于使用且性能更高。如果您刚刚开始集成 - 您绝对应该使用 REST :)

但是，如果您选择使用 .NET SOAP，您描述的问题通常是由于将 Rally WSDL 添加为 ServiceReference，而不是将其添加为所需的 WebReference。

以下是将其添加为 Web 参考的方法：

1.  在 Visual Studio 中打开您的项目
2.  右键单击服务引用 -> 添加服务引用

![添加服务参考](../Images/09290907523e62d1cd7b306ef8742ef7.png)

3.  单击高级

![高级按钮](../Images/ed074a4c6f61c0af576844a731eb212a.png)

4.  单击添加 Web 参考

![添加网络参考](../Images/26904d02bb68e54dcb22a3df6a91f802.png)

5.  粘贴 WSDL URL 并单击绿色箭头

![添加 WSDL](../Images/aa39a5014b296e8d2baf1ca7fa3eaaf2.png)

6.  输入凭据

![输入凭据](../Images/b7fe9fa569aabd43b690f183fe8e8fcf.png)

7.  单击混合区域安全警告

![在此处输入图像描述](../Images/0a065018b596f8a718d57c3e400fdcff.png)

8.  根据需要命名服务

![名称服务](../Images/513e311d1d8c66f764ffecf91db49107.png)

9.  注意解决方案资源管理器中存在 Web 参考

![网络参考](../Images/71ff04921bf5380e6ce2030f3c61e512.png)

10.  在对象/方法层次结构中观察 RallyServiceService

![RallyServiceService](../Images/d3724c11e5bd2ff508afdd680c722ab3.png)

# android - 安卓媒体播放器无法正常工作

> ID：12856604
> 
> 赞同：1
> 
> 时间：2012-10-12T09:59:17.907
> 
> 标签：android, android-mediaplayer

我有两个按钮，第一次点击时它会播放声音，如果点击第二个按钮，它会播放不同的声音，但我有一个问题，如果我点击第一个按钮然后它会播放声音，但是如果我点击第二个按钮然后它之后它会播放声音那个按钮不起作用？可能是什么问题。

# android - Service.onStartCommand() - 是否可以返回多个标志？

> ID：12856605
> 
> 赞同：4
> 
> 时间：2012-10-12T09:59:20.757
> 
> 标签：android, service, low-memory

我必须确保我`Service`会运行，直到我明确调用`stopService()`. `onStartCommand()`所以我应该从`START_STICKY`国旗回来。

我还希望以防我的服务因内存不足而被系统破坏，当系统重新创建它时 - 将以最初启动服务的相同意图调用 onStartCommand() 。因为这个原因——我想使用`START_FLAG_REDELIVERY`标志。[根据文档 - http://developer.android.com/reference/android/app/Service.html#ProcessLifecycle](http://developer.android.com/reference/android/app/Service.html#ProcessLifecycle)，我所描述的肯定会发生（并且实际上发生在我身上）

我知道我可以使用 启动服务`startForground()`，这可以防止服务在内存不足时被系统杀死，但我不喜欢使用这种方法，无论如何 - 根据文档：系统仍然可以在下杀死它极低的内存压力。

所以如果我能从那里回来就完美了`onStartCommand()` `START_STICKY|START_FLAG_REDELIVERY`

但根据文档，您似乎只能使用其中一个标志（也许我错了？？）。

那么是否有可能以某种方式启动以我所描述的方式工作的服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T10:23:45.920

您不能返回多个值。相反，我建议您`START_STICKY`在`onStartCommand`. 但是第一次，将 Intent 包的必要值保存在`SharedPreference`存储中。下一次，当你`onStartCommand`被重新调用（从内存不足或其他原因恢复后）并且发现意图为*null*时，只需从首选项中加载值并继续使用你想要的任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:57:12.690

`START_STICKY`据我所知，两者之间的区别`START_FLAG_REDELIVERY`只是它将以空意图或再次以相同意图重新交付。这就是你想要的编程方式。您应该只返回一个标志，因为它们是不同的操作模式。

# domain-driven-design - 使用 CQRS 时同步本地域实体更改

> ID：12856609
> 
> 赞同：0
> 
> 时间：2012-10-12T09:59:42.930
> 
> 标签：domain-driven-design, cqrs

假设我有一个`CustomerEntity`具有以下属性的基础

*   姓名
*   姓
*   是首选

以最简单的形式采用 CQRS 我将获得以下服务

*   客户指挥服务
*   客户查询服务

如果在`CustomerCommandService`我调用`UpgradeToPreferred(CustomerEntity)`它背后的商店将更新并且任何查询都会反映这一点。到现在为止还挺好。

我的问题是如何将其同步回我拥有的本地实体？我已经`UpgradeToPreferred()`在服务上调用了该方法而不是在实体上，因此它不会反映在本地副本中，除非我查询`CustomerQueryService`并获取似乎有点多余的更新。

..还是我做错了？

编辑：

为了澄清，问题是。如果我正在通过命令服务修改存储中的实体，而不是直接在实体上调用命令或编辑它的属性，我应该如何处理我在内存中的实体的相同修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:12:07.277

这里很少出错。您的命令服务接受命令，而不是实体。因此，如果您想将该客户升级为首选，那么命令将是意图（makecustomerpreferred）和执行命令所需的数据（客户标识就足够了）。该服务将使用标识加载实体，并在实体上调用 makepreferred 行为。该实体将在内部进行更改。持久性会将其映射回数据库。因此，无需与数据库重新同步。

# javascript - 得到所有 下拉列表中的值

> ID：12856610
> 
> 赞同：0
> 
> 时间：2012-10-12T09:59:43.287
> 
> 标签：javascript, jquery

如何获取下拉菜单的所有选项值？我可以通过它们的价值隐藏它们吗？例如，我有 12 个月的下拉列表，现在是 2012 年 10 月 11 日，我想隐藏过去的所有月份，只显示 3 - 10 月、11 月、12 月。

这是我尝试这样做的方法，你能告诉我，我怎样才能在那个循环中获得选项值，因为`this.val()`不返回它？

```
var currentTime = new Date();
var month = currentTime.getMonth();
var year = currentTime.getFullYear();
if (year == $('#yearSelected', '#BookingCalendar').val()){
  $('#monthSelected option', '#BookingCalendar').each(
    function (){
      if(this.val() < month) this.hide();
    }
  );     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:01:19.230

检查以下行：

```
if (this.value < month)   // 'this' is DOM object
    $(this).hide();       // '$(this)' is jQuery object 
```

# javascript - 从另一个帧的对象中获取 .data()

> ID：12856613
> 
> 赞同：1
> 
> 时间：2012-10-12T09:59:51.790
> 
> 标签：javascript, jquery

我正在使用 .data() 将对象实例存储到 DOM 元素。这在我所在的框架内有效，但由于我正在处理的应用程序内的规定，所有 jQuery 对话框都使用 iframe 填充。出于某种原因，我似乎无法从框架外部访问 .data() 存储的对象。有什么办法可以访问它？

我存储对象的代码（这是一个 CodeMirror 实例）。

`$('#MyTextArea').data('CodeMirrorEditor', editor);`（`editor`实例在哪里）

当我想访问它时，我正在使用：

```
var context = document.getElementById('DialogFrame').contentWindow.document);
console.log($('#MyTextArea', context);
console.log($('#MyTextArea', context).data('CodeMirrorEditor')); 
```

第一个日志导致 textarea 被记录。这是正确的，因为引用的 ID 是`<textarea>`. 第二个日志导致`undefined`. 由于某种原因，存储的实例`editor`丢失或无法从框架外部访问。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:36:15.873

您的问题不在于上下文，而在于 jQuery 对象本身。由于 data() 属性是在原始页面中定义的 jQuery 对象中设置的，因此新的 jQuery 对象当然无法访问它们。

为了解决这个问题，使用原始的 jQuery 对象：

```
myOrigWindow.jQuery('some-selector').data(...); 
```

# blackberry - 在 BlackBerry 中发送消息中的运行时异常

> ID：12856616
> 
> 赞同：1
> 
> 时间：2012-10-12T10:00:11.960
> 
> 标签：blackberry, sms, blackberry-simulator, blackberry-jde, sms-gateway

我在运行此代码时遇到运行时异常。如果您有任何想法，请通过它并帮助我。谢谢..

```
private void sendSMS(String phone, String message) throws IOException 
    {

//       TODO Auto-generated method stub
        Dialog.alert("Hello..In Send SMS Function");
        System.out.println("in send sms function");

        MessageConnection conn =
            (MessageConnection)Connector.open("sms://+919099956325");
        TextMessage tmsg = (TextMessage) conn.newMessage(MessageConnection.TEXT_MESSAGE);
        tmsg.setAddress("sms://+919429441335");
        tmsg.setPayloadText("HIIiii");
        System.out.println("Text message is>>"+tmsg);
        conn.send(tmsg);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:09:15.313

代替 `System.out.println("Text message is>>"+tmsg);`

利用

`System.out.println("Text message is>>"+tmsg.getPayloadText());`

也是`Connector.open`一个阻塞操作，不应从主事件线程调用。

你有`Dialog.alert`它只能在事件线程上工作。做这个

```
UiApplication.getUiApplication().invokeLater(new Runnable() {
                public void run() {
                Dialog.alert("Hello..In Send SMS Function");
                }
            }); 
```

试试这个代码。这会启动一个新线程并调用 sendms 方法

```
new Thread(new Runnable() {

        public void run() {
             try {
                sendSMS("123456789","message");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    }).start();

          private void sendSMS(String phone, String message) throws IOException 
          {
    try {
        UiApplication.getUiApplication().invokeLater(new Runnable() {
            public void run() {
            Dialog.alert("Hello..In Send SMS Function");
            }
        });
        System.out.println("in send sms function");

        MessageConnection conn =
            (MessageConnection)Connector.open("sms://+919099956325");
        TextMessage tmsg = (TextMessage) conn.newMessage(MessageConnection.TEXT_MESSAGE);
        tmsg.setAddress("sms://+919429441335");
        tmsg.setPayloadText("HIIiii");
        System.out.println("Text message is>>"+tmsg.getPayloadText());
        conn.send(tmsg);
    } catch (Exception e) {
        System.out.println("Exception is >>"+e.toString());
    }
} 
```

# bash - 如何在同步执行期间处理 bash 中的信号？

> ID：12856620
> 
> 赞同：6
> 
> 时间：2012-10-12T10:00:33.337
> 
> 标签：bash, signals

我有一个 bash 脚本进程，它有时会同步执行一个长时间运行的子进程。在该子进程运行期间，会直接向 bash 脚本进程发送一个信号，请求脚本终止。有没有办法拦截该信号，终止子进程然后退出 bash 进程？

显然，bash 的信号处理永远不会中断同步调用？

我无法控制将终止信号发送到 bash 进程的事实。虽然如果信号可以传播到子进程，那也可以解决我的问题。

在此先感谢，兄弟

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T13:22:42.427

请参阅 bash 的手册页，**SIGNALS**一章：

如果 bash 正在等待命令完成并接收到已设置陷阱的信号，**则在命令完成之前不会执行陷阱**。当 bash 通过 wait builtin 等待异步命令时，接收到设置了陷阱的信号将导致 wait builtin 立即返回，退出状态大于 128，然后立即执行陷阱。

因此，异步运行您的外部程序并使用等待。使用 $! 杀死它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-11T14:36:03.353

这是我编写的用于处理此问题的 bash 实用程序函数。它被证明是有用且强大的。希望对你有帮助。

```
# Run a command in a way that can be interrupted by a signal (eg SIGTERM)
#
# When bash receives a SIGTERM it normally simply exits. If it's executing a subprocess
# that subprocess isn't signaled. (Typically that's not a problem for interactive shells
# because the entire Process Group gets sent the signal.)
#
# When running a script it's sometimes useful for the script to propagate a SIGTERM
# to the command that was running. We can do that by using the trap builtin to catch
# the signal. But it's a little tricky, per the bash manual:
#
#    If bash is waiting for a command to complete and receives a signal for
#    which a trap has been set, the trap will not be executed until the
#    command completes.
#
# so a script executing a long-running command with a signal trap set won't
# notice the signal until later. There's a way around that though...
#
#    When bash is waiting for an asynchronous command via the wait builtin, the
#    reception of a signal for which a trap has been set will cause the wait
#    builtin to return immediately with an exit status greater than 128,
#    immediately after which the trap is executed.
#
# Usage:
#
#   interruptable [options] command [args]
#
# Options:
#   --killall - put the child into a process group (via setsid)
#               and send the SIGTERM to the process group
#   --debug   - print a message including pid of the child
#
# Usage examples:
#
#   interruptable sleep 3600
#
# If not interrupted, the exit status of the specified command is returned.
# If interrupted, the specified command is sent a SIGTERM and the current
# shell exits with a status of 143.

interruptable() {

    # handle options
    local setsid=""
    local debug=false
    while true; do
        case "${1:-}" in
            --killall)      setsid=setsid; shift ;;
            --debug)        debug=true; shift ;;
            --*)            echo "Invalid option: $1" 1>&2; exit 1;;
            *)              break;; # no more options
        esac
    done

    # start the specified command
    $setsid "$@" &
    local child_pid=$!

    # arrange to propagate a signal to the child process
    trap '
        exec 1>&2
        set +e
        trap "" SIGPIPE # ensure a possible sigpipe from the echo does not prevent the kill
        echo "${BASH_SOURCE[0]} caught SIGTERM while executing $* (pid $child_pid), sending SIGTERM to it"
        # (race) child may have exited in which case kill will report an error
        # if setsid is used then prefix the pid with a "-" to indicate that the signal
        # should be sent to the entire process group
        kill ${setsid:+-}$child_pid
        exit 143
    ' SIGTERM
    # ensure that the trap doesn't persist after we return
    trap 'trap - SIGTERM' RETURN

    $debug && echo "interruptable wait (child $child_pid, self $$) for: $*"

    # An error status from the child process will trigger an exception (via set -e)
    # here unless the caller is checking the return status
    wait $child_pid # last command, so status of waited for command is returned
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:36:33.670

是的，可以用`trap`命令截取信号。请参见下面的示例：

```
#!/bin/bash
function wrap {
local flag=0
trap "flag=1" SIGINT SIGTERM
xeyes &
subppid=$!

while : 
    do
        if [ $flag -ne 0 ] ; then
            kill $subppid
            break 
        fi
            sleep 1        
    done
}
flag=0
trap "flag=1" SIGINT SIGTERM
wrap &
wrappid=$!
while :                 # This is the same as "while true".
    do
        if [ $flag -ne 0 ] ; then
            kill $wrappid
            break
        fi
        sleep 1        # This script is not really doing anything.
done
echo 'end' 
```

基本上做`trap`的是它执行“”之间的命令。所以这里的主要功能在下面的while循环中。在每次迭代中，脚本都会检查是否设置了标志，如果没有，它会休眠一秒钟。在此之前，我们通过 记住了子进程的 pid `$!`。当`SIGINT`或`SIGTERM`被捕获时，陷阱会发出命令（有关其他信号，请参阅`kill`手册）。

包装函数的作用与主函数相同。此外，它调用实际`subprocess`函数（在这种情况下 subprocess 是`xeyes`）。当包装函数接收到来自主函数`SIGTERM`的信号（主函数也捕捉到其中一个信号）时，包装函数可以在实际杀死子进程之前清理东西。之后，它从 while 循环中中断并退出包装函数。然后 main 函数也中断并打印`'end'`。

编辑：希望我理解正确，你被迫执行`xeyes &`. 然后步骤如下（在终端中）：

```
xeyes &
subpid=$!
trap "kill $subpid && exit " SIGINT SIGTERM
.... other stuff
.... more stuff
^C #TERMINATE - this firstly kills xeyes and then exits the terminal 
```

# javascript - Sahi 专业测试套件仅运行一个测试用例

> ID：12856622
> 
> 赞同：1
> 
> 时间：2012-10-12T10:00:35.560
> 
> 标签：javascript, sahi

我是 sahi pro 的新手，我想用两个测试用例运行测试套件。

我在 Test2.suite 中给出了两个测试用例，并通过给出命令开始运行`testrunner.bat <sahi suite file name> <start url> <browser type>`

问题是它只运行第二种情况。请问有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:56:03.890

您如何在套件中提供两个测试用例？我希望你的 Test2.suite 是这样的：

```
test_script1.sah // script for first test case
test_script2.sah // script for second test case 
```

当您使用 testrunner 运行它时，您的报告将显示 Test2.suite 的结果。单击名称时，您可以分别查看两个脚本的结果。

此外，如果您可以提及您正在使用的 Sahi OS 或 Sahi Pro 版本，我可以检查该特定版本。

谢谢，维维克

# python - 当通过 Python 调用时，如何确保所有 git 输出都发送到日志文件？

> ID：12856623
> 
> 赞同：0
> 
> 时间：2012-10-12T10:00:36.273
> 
> 标签：python

我的部分代码：

```
import subprocess
import logging
logging.basicConfig(filename='daily_backup_run.log', level=logging.DEBUG)

try:
  git_command = subprocess.Popen("git status", shell="true")
  git_status_output = git_command.stdout.readline()
except subprocess.CalledProcessError, e:
  git_status_output = e.output
logging.debug(' Output of git status: ' + git_status_output)
exit() 
```

当我尝试运行它时，我的输出是：

```
[~/experiment_folder]# python git.py
Traceback (most recent call last):
  File "git.py", line 35, in ?
    except subprocess.CalledProcessError, e:
AttributeError: 'module' object has no attribute 'CalledProcessError'
fatal: Not a git repository (or any of the parent directories): .git 
```

目前我并不关心 Python 错误，但我需要git 发送的*所有*输出进入`daily_backup_run.log`- 甚至是`fatal: Not a repo`错误。我如何确保这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T10:04:37.347

从[子流程](http://docs.python.org/library/subprocess.html)模块文档中：

> stdin、stdout 和 stderr 分别指定执行程序的标准输入、标准输出和标准错误文件句柄。有效值为 PIPE、现有文件描述符（正整数）、现有文件对象和无。PIPE 表示应该创建一个通往子级的新管道。

您可以按如下方式修改代码：

```
# working dir in which git [command] is called
cwd = '/path/to/git/repository' 

p = subprocess.Popen("git status", shell="true", cwd=cwd,
                     stdout=subprocess.PIPE, stderr=subprocess.PIPE)
outdata, errdata = p.communicate()

logging.debug('Output of git status: {}. Error data if any: {}'
              .format(outdata, errdata)) 
```

# .net - 像 3 位整数一样表示 double

> ID：12856625
> 
> 赞同：0
> 
> 时间：2012-10-12T10:00:41.407
> 
> 标签：.net, string-formatting

```
?string.Format("{0:D3}", 10/2)
{"Format specifier was invalid."}
    _HResult: -2146233033
    _message: "Format specifier was invalid." 
```

我需要表示一个像 3 位整数一样的双精度数。说“5.2”应该表示为“005”，说“5.9”应该更好地表示为“006”，但即使是“005”也可以。

框架不支持像整数一样表示 Double 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:07:15.347

用于`Math.Round`舍入为整数（可选），然后`int`在使用`D3`格式之前强制转换为：

```
string.Format("{0:D3}", (int)Math.Round(10/2)); 
```

强制转换以`int`防止出现“无效格式说明符”错误，这是因为您为浮点参数提供了整数格式选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:20:50.843

找到了另一种使用的解决方案

`?string.Format("{0:000}", 5.9)`反而。

我不能使用“D”或“d”说明符，因为它是“支持者：仅整数类型”。（[标准数字格式字符串 - MSDN](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)）

# vb.net - 在 rowLeave 上删除 DataGridView 中的一行

> ID：12856627
> 
> 赞同：0
> 
> 时间：2012-10-12T10:00:44.213
> 
> 标签：vb.net, datagridview

我有一个 vb.net 形式的 DataGridView，没有连接到任何源。当用户传递到另一行或关注 DGV 时，我想删除一行。如果其中有一个空单元格，则应删除该行。

那是我的代码：

```
Private Sub dgvSpSettings_RowLeave(sender As Object, e As System.Windows.Forms.DataGridViewCellEventArgs) Handles dgvSpSettings.RowLeave
    If e.RowIndex < (dgvSpSettings.Rows.Count - 1) Then 'Esclude l'ultima riga dal controllo sulle righe vuote
        If Me.dgvSpSettings.Rows(e.RowIndex).Cells(0).Value Is Nothing OrElse Me.dgvSpSettings.Rows(e.RowIndex).Cells(0).Value.ToString() = "" OrElse Me.dgvSpSettings.Rows(e.RowIndex).Cells(1).Value Is Nothing OrElse Me.dgvSpSettings.Rows(e.RowIndex).Cells(1).Value.ToString() = "" Then
            Me.dgvSpSettings.Rows.RemoveAt(e.RowIndex)
        End If
    End If
End Sub 
```

这不起作用，因为我无法`Me.dgvSpSettings.Rows.RemoveAt(e.RowIndex)`在此事件中执行该方法。我试图将该行存储在一个私有变量中，然后在其他事件（如单击）中将其删除，但结果不是我所期望的。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:20:29.677

这可能不是最好的解决方案，但至少我想出了一些可能对你有用的东西。基本上，您将该行设置为只读而不是删除它。而且由于在您离开行时会调用paint，因此您可以将删除代码放入paint中。

```
Private Sub DataGridView1_RowLeave(sender As System.Object, e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DataGridView1.RowLeave
    DataGridView1.CommitEdit(DataGridViewDataErrorContexts.Commit)
    If e.RowIndex < (DataGridView1.Rows.Count - 1) Then
        If Me.DataGridView1.Rows(e.RowIndex).Cells(0).Value Is Nothing OrElse _
            Me.DataGridView1.Rows(e.RowIndex).Cells(0).Value.ToString() = "" OrElse _
            Me.DataGridView1.Rows(e.RowIndex).Cells(1).Value Is Nothing OrElse _
            Me.DataGridView1.Rows(e.RowIndex).Cells(1).Value.ToString() = "" Then
            Me.DataGridView1.Rows(e.RowIndex).ReadOnly = True
        End If
    End If
End Sub

Private Sub DataGridView1_Paint(sender As System.Object, e As System.Windows.Forms.PaintEventArgs) Handles DataGridView1.Paint
    Dim i As Integer = 0
    While i <> DataGridView1.Rows.Count - 1
        If DataGridView1.Rows(i).ReadOnly Then
            DataGridView1.Rows.RemoveAt(i)
            If i = DataGridView1.Rows.Count - 1 Then
                Exit While
            End If
        Else
            i += 1
        End If
    End While
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T11:09:53.673

您不能删除 RowLeave 事件处理中的行，因为它“忙”。我有时应用的这种情况的解决方案是调用 application.Idle 事件（我不太喜欢它，因为它感觉很笨拙，但效果很好）：

```
 Private Sub dgvSpSettings_RowLeave(sender As Object, e As DataGridViewCellEventArgs) Handles dgvSpSettings.RowLeave
    Dim row As DataGridViewRow = dgvSpSettings.Rows(e.RowIndex)
    If Me.dgvSpSettings.Rows(e.RowIndex).Cells(0).Value Is Nothing OrElse
      e.dgvSpSettings.Rows(e.RowIndex).Cells(0).Value.ToString() = "" OrElse   
      Me.dgvSpSettings.Rows(e.RowIndex).Cells(1).Value Is Nothing OrElse 
      Me.dgvSpSettings.Rows(e.RowIndex).Cells(1).Value.ToString() = "" Then

      Me._rowToDelete = row
      AddHandler Application.Idle, AddressOf AppIdle
    End If
  End Sub

  Private _rowToDelete As DataGridViewRow

  Private Sub AppIdle(sender As Object, e As EventArgs)
    If Me._rowToDelete IsNot Nothing Then
      dgvSpSettings.Rows.Remove(Me._rowToDelete)
      Me._rowToDelete = Nothing
    End If
    RemoveHandler Application.Idle, AddressOf AppIdle
  End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:42:43.237

这是我的最终解决方案。它对我有用，我希望它在概念上是正确的。我使用了代表和*Leave* + *LostFocus*事件。

```
'**********
'* Controllo righe da eliminare
'**********
Private Sub dgvSpSettings_RowLeave(sender As Object, e As System.Windows.Forms.DataGridViewCellEventArgs) Handles dgvSpSettings.RowLeave
    Me.dgvSpSettings.CommitEdit(0)

    Dim row As DataGridViewRow = Me.dgvSpSettings.Rows(e.RowIndex)

    For Each cell In row.Cells
        cell.Style.BackColor = Color.White
    Next

    If Not row.IsNewRow() Then 'Esclude l'ultima riga dal controllo sulle righe vuote
        If String.IsNullOrEmpty(row.Cells(0).Value) OrElse String.IsNullOrEmpty(row.Cells(1).Value) Then
            _rowBlank = row
        End If
    End If

End Sub

Private Delegate Sub setCurrentCellDelegate()

Private Sub setCurrentCell()
    For Each cell In _rowBlank.Cells
        cell.Style.BackColor = Color.LightSalmon
    Next

    Me.dgvSpSettings.CurrentCell = _rowBlank.Cells(0)
    Me.dgvSpSettings.BeginEdit(True)
    _rowBlank = Nothing
End Sub

Private Delegate Sub removeRowDelegate()

Private Sub removeRow()
    Me.dgvSpSettings.Rows.Remove(_rowBlank)
    _rowBlank = Nothing
    _rowBlankDeleting = False
End Sub

'**********
'* Controllo righe da eliminare
'**********
Private Sub dgvSpSettings_Leave(sender As Object, e As System.EventArgs) Handles dgvSpSettings.Leave
    If _rowBlank IsNot Nothing AndAlso _rowBlankDeleting = False Then
        If MsgBox("Alcuni campi della riga non sono stati valorizzati. Eliminare la riga?", vbYesNo + vbInformation, "Eliminare") = MsgBoxResult.Yes Then
            _rowBlankDeleting = True
            Me.dgvSpSettings.BeginInvoke(New removeRowDelegate(AddressOf removeRow))
        Else
            Me.dgvSpSettings.BeginInvoke(New setCurrentCellDelegate(AddressOf setCurrentCell))
        End If
    End If
End Sub

'**********
'* Controllo righe da eliminare
'**********
Private Sub dgvSpSettings_LostFocus(sender As Object, e As System.EventArgs) Handles dgvSpSettings.LostFocus
    If _rowBlank IsNot Nothing AndAlso _rowBlank IsNot Me.dgvSpSettings.CurrentRow AndAlso _rowBlankDeleting = False Then
        If MsgBox("Alcuni campi della riga non sono stati valorizzati. Eliminare la riga?", vbYesNo + vbInformation, "Eliminare") = MsgBoxResult.Yes Then
            _rowBlankDeleting = True
            Me.dgvSpSettings.BeginInvoke(New removeRowDelegate(AddressOf removeRow))
        Else
            Me.dgvSpSettings.BeginInvoke(New setCurrentCellDelegate(AddressOf setCurrentCell))
        End If
    End If
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-26T03:12:44.217

实际上问题是你不能从下往上删除（1、2、3等），你必须像这样从上到下（3、2、1）：

```
For j = DataGrid1.Rows.Count - 2 To 0 Step -1
   DataGrid1.Rows.RemoveAt(j)
Next 
```

问题是VB认为第一行是不包含任何数据的行（你可以输入信息的空行）。这对我有用。

# sql - 将表 0 的行复制到表 2，其中表 1 中不存在相同的行（PostgreSQL）

> ID：12856629
> 
> 赞同：0
> 
> 时间：2012-10-12T10:00:47.077
> 
> 标签：sql, performance, postgresql, plpgsql, temp-tables

谁能告诉我以下哪一项更有效？我有数千万行要处理，性能至关重要。

在第二个示例中，`table0`是一个临时表，它的创建似乎比第一个示例中的 table0 快得多。（为什么？）在第一个示例中我不能使用临时表，因为在创建表之前无法声明变量行。（`table0`保存原始表的所有不同行，下面的代码中没有显示。）

我想在第二个示例中为 、 和 of 创建哈希索引是个好主意`blah2`，尽管写入`blah3`表需要更长的时间。`blah4``blah5``table1`

* * *

```
FOR row IN SELECT * FROM table0
LOOP
  IF NOT EXISTS (SELECT 1 FROM table1
                   WHERE blah2 = row.blah2 AND blah3 = row.blah3
                     AND blah4 = row.blah4 AND blah5 = row.blah5) THEN
    INSERT INTO table2
      (blah0, blah1, blah2, blah3, blah4, blah5)
      VALUES (row.blah0, row.blah1, row.blah2, row.blah3, row.blah4, row.blah5);
  END IF;
END LOOP; 
```

* * *

```
INSERT INTO table2
  (blah0, blah1, blah2, blah3, blah4, blah5)
  SELECT blah0, blah1, blah2, blah3, blah4, blah5 FROM table0
    WHERE NOT EXISTS
      (SELECT 1 FROM table1
         WHERE table1.blah2 = table0.blah2
           AND table1.blah3 = table0.blah3
           AND table1.blah4 = table0.blah4
           AND talbe1.blah5 = table0.blah5); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:48:11.753

### 问题

> 在第二个示例中，table0 是一个临时表，它的创建似乎比第一个示例中的 table0 快得多。（为什么？）

临时表通常比常规表*快得多*，因为它们的内容不会持久化到磁盘。当您创建一个时，您仍然有少量磁盘活动，因为系统目录接收条目。

一旦临时缓冲区用完，临时表的性能就会下降，因为系统开始将页面换出到磁盘。您可以`temp_buffers`在会话开始时设置为临时表提供更多 RAM。[此相关答案](https://stackoverflow.com/questions/8290900/pg-best-way-to-delete-millions-of-rows-by-id/8290958#8290958)中的更多详细信息。

如果最终您想将结果保存在某个地方，那么您不妨在第二个示例中立即使用常规表。

第一个示例也慢*得多*，因为循环单个行通常比使用 SQL 命令的基于集合的操作昂贵得多*。*

> 在第一个示例中我无法使用临时表，因为在创建表之前无法声明变量行。（table0 包含原始表的所有不同行，下面的代码中没有显示。）

好吧，在创建表之前，您不能在函数中使用*行类型。*但是您可以只使用匿名记录：

```
DECLARE
   rec record;
BEGIN
   FOR rec IN SELECT * FROM table0 ... 
```

### 替代解决方案

但是无论如何，您的第一种方法都不好。你的第二种方法看起来很好。应该是最快的方法。另一种选择是：

```
INSERT INTO table2 (blah0, blah1, blah2, blah3, blah4, blah5)
SELECT t0.blah0, t0.blah1, t0.blah2, t0.blah3, t0.blah4, t0.blah5
FROM   table0 t0
LEFT   JOIN table1 t1 USING (blah2, blah3, blah4, blah5)
WHERE  t1.t1_id IS NULL -- or any other column defined NOT NULL 
```

如果您有重复的 in 条目`(blah2, blah3, blah4, blah5)`，`table1`那么您的查询`EXISTS`可能会更快。否则这个带有`LEFT JOIN`/的`IS NULL`可能会排在首位。

### 索引和测试

当然，in 上的索引`(blah2, blah3, blah4, blah5)`会有`table1`很大帮助——增加了在 .in 中写入操作的一些成本`table1`。让它成为一个普通的 b-tree 索引（就像@Craig 在评论中已经建议的那样），但我会选择一个[**multi-column index**](http://www.postgresql.org/docs/current/interactive/indexes-multicolumn.html)。这种情况下更便宜，更快！

`EXPLAIN ANALYZE`正如@Craig 在评论中建议的那样用于测试性能 - 或者只是首先[`EXPLAIN`](http://www.postgresql.org/docs/current/interactive/sql-explain.html)（没有`ANALYZE`），因为你的表似乎很大并且`EXPLAIN ANALYZE`假执行它以获得实时。

# php - 通过url访问wordpress函数

> ID：12856630
> 
> 赞同：0
> 
> 时间：2012-10-12T10:00:47.197
> 
> 标签：php, wordpress

是否有任何选项可以通过 url 访问 function.php 中的函数？

就像 joomla[有这个](http://www.example.com/index.php?option=com_users&controller=login&task=mytask)。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:05:43.043

functions.php 是主题核心的一部分，并且会*自动包含在内*。

要访问您的功能，只需在主题文件中使用它，如下所示：

```
<?php myfunc(); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:11:18.570

使用 wordpress 的 ajax 功能：

[这里](http://codex.wordpress.org/AJAX_in_Plugins)

您可以`nopriv`为此使用操作。 `wp-admin/admin-ajax.php`是wordpress的ajax页面的url。

**或者**，您可以制作仅提供内容的模板页面并创建简码并添加到特定页面。

# android - 使用 HTML5 标签播放视频

> ID：12856643
> 
> 赞同：2
> 
> 时间：2012-10-12T10:01:12.693
> 
> 标签：android, html, video, ffmpeg

我正在创建一个需要流式传输视频的网站。内容创建者将 .mov 文件上传到服务器。上传后，我使用 FFMPEG、.mp4、.webm 和 .ogg 转换为以下格式。

我现在正试图允许从多个浏览器和手持设备查看视频。代码如下：

```
<head>

<script> 
var video = document.getElementById('video');
video.addEventListener('click',function(){
 video.play();
 },false);
</script>

<script type="text/javascript" src="jwplayer.js"></script>

</head>
<body>
<video id="video" autobuffer height="240" width="360" controls>
  <source src="output.mp4">
  <source src="output.ogv" type="video/ogg">
  <source src="output.webm" type="video/webm">
</video>

<script type="text/javascript">
  jwplayer("video").setup({
    modes: [
       { type: 'html5' },
       { type: 'flash', src: 'player.swf' }
    ]
  });
</script>

</body> 
```

该视频适用于所有浏览器。但是，它拒绝在 Android 上播放。当我单击播放按钮时，它显示为仅加载。

我正在测试 4.0.3。

### FFMPEG 转换代码：

网站

```
exec("ffmpeg -y -i file.mov -acodec libvorbis -ac 2 -ab 96k -ar 44100 -b 345k -s 640x360 output.webm", $command_output, $result); 
```

ogg

```
exec("ffmpeg -y -i file.mov -acodec libvorbis -ac 2 -ab 96k -ar 44100 -b 345k -s 640x360 output.ogv", $command_output, $result); 
```

flv

```
exec("ffmpeg -y -i file.mov -ar 44100 -ab 96 -f flv output.flv", $command_output, $result); 
```

对于 MP4：

```
 sudo ffmpeg -i file.mov -s 320x240 -c:v libx264 -pix_fmt yuv420p -profile:v baseline -preset slow -acodec aac -strict experimental -ac 2 -r 15 -ab 44100 -aspect 16:9 output.mp4
ffmpeg version git-2012-10-11-492b8ec Copyright (c) 2000-2012 the FFmpeg developers
  built on Oct 11 2012 19:59:50 with gcc 4.6 (Ubuntu/Linaro 4.6.3-1ubuntu5)
  configuration: --enable-gpl --enable-libfaac --enable-libfdk-aac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-librtmp --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-nonfree --enable-version3
  libavutil      51\. 74.100 / 51\. 74.100
  libavcodec     54\. 65.100 / 54\. 65.100
  libavformat    54\. 31.100 / 54\. 31.100
  libavdevice    54\.  3.100 / 54\.  3.100
  libavfilter     3\. 19.102 /  3\. 19.102
  libswscale      2\.  1.101 /  2\.  1.101
  libswresample   0\. 16.100 /  0\. 16.100
  libpostproc    52\.  1.100 / 52\.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x23f3220] Stream #1: not enough frames to estimate rate; consider increasing probesize
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x23f3220] Stream #2: not enough frames to estimate rate; consider increasing probesize
Guessed Channel Layout for  Input Stream #0.1 : stereo
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'file.mov':
  Metadata:
    major_brand     : qt  
    minor_version   : 537199360
    compatible_brands: qt  
    creation_time   : 2012-09-07 11:10:10
  Duration: 00:01:41.83, start: 0.000000, bitrate: 186917 kb/s
    Stream #0:0(eng): Video: qtrle (rle  / 0x20656C72), rgb24, 1920x1080, 185371 kb/s, SAR 1920:1920 DAR 16:9, 29.97 fps, 29.97 tbr, 30k tbn, 30k tbc
    Metadata:
      creation_time   : 2012-09-07 11:10:10
      handler_name    : Apple Alias Data Handler
      timecode        : 00:00:00;03
    Stream #0:1(eng): Audio: pcm_s16le (sowt / 0x74776F73), 48000 Hz, stereo, s16, 1536 kb/s
    Metadata:
      creation_time   : 2012-09-07 11:10:10
      handler_name    : Apple Alias Data Handler
      timecode        : 00:00:00;03
    Stream #0:2(eng): Data: none (tmcd / 0x64636D74)
    Metadata:
      creation_time   : 2012-09-07 11:31:37
      handler_name    : Apple Alias Data Handler
      timecode        : 00:00:00;03
File 'output.mp4' already exists. Overwrite ? [y/N] y
using SAR=4/3
[libx264 @ 0x240bf60] using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle SSE4.2 AVX
[libx264 @ 0x240bf60] profile Constrained Baseline, level 1.2
[libx264 @ 0x240bf60] 264 - core 128 r2 198a7ea - H.264/MPEG-4 AVC codec - Copyleft 2003-2012 - http://www.videolan.org/x264.html - options: cabac=0 ref=5 deblock=1:0:0 analyse=0x1:0x111 me=umh subme=8 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=0 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=1 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=0 weightp=0 keyint=250 keyint_min=15 scenecut=40 intra_refresh=0 rc_lookahead=50 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'output.mp4':
  Metadata:
    major_brand     : qt  
    minor_version   : 537199360
    compatible_brands: qt  
    encoder         : Lavf54.31.100
    Stream #0:0(eng): Video: h264 ([33][0][0][0] / 0x0021), yuv420p, 320x240 [SAR 4:3 DAR 16:9], q=-1--1, 15360 tbn, 15 tbc
    Metadata:
      creation_time   : 2012-09-07 11:10:10
      handler_name    : Apple Alias Data Handler
      timecode        : 00:00:00;03
    Stream #0:1(eng): Audio: aac ([64][0][0][0] / 0x0040), 48000 Hz, stereo, fltp, 44 kb/s
    Metadata:
      creation_time   : 2012-09-07 11:10:10
      handler_name    : Apple Alias Data Handler
      timecode        : 00:00:00;03
Stream mapping:
  Stream #0:0 -> #0:0 (qtrle -> libx264)
  Stream #0:1 -> #0:1 (pcm_s16le -> aac)
Press [q] to stop, [?] for help
frame=   25 fps=0.0 q=0.0 size=       0kB time=00:00:01.32 bitrate=   0.frame=   47 fps= 47 q=0.0 size=       0kB time=00:00:02.68 bitrate=   0.frame=   67 fps= 44 q=27.0 size=      12kB time=00:00:04.05 bitrate=  23frame=   88 fps= 44 q=27.0 size=      23kB time=00:00:05.41 bitrate=  34frame=  108 fps= 43 q=27.0 size=      35kB time=00:00:06.78 bitrate=  42frame=  128 fps= 42 q=27.0 size=      47kB time=00:00:08.14 bitrate=  47frame=  150 fps= 43 q=27.0 size=      64kB time=00:00:09.51 bitrate=  54frame=  172 fps= 43 q=27.0 size=      81kB time=00:00:10.88 bitrate=  61frame=  193 fps= 43 q=27.0 size=     106kB time=00:00:12.24 bitrate=  70frame=  214 fps= 42 q=27.0 size=     119kB time=00:00:13.61 bitrate=  71frame=  235 fps= 42 q=27.0 size=     127kB time=00:00:14.97 bitrate=  69frame=  254 fps= 42 q=27.0 size=     144kB time=00:00:16.34 bitrate=  72frame=  272 fps= 41 q=27.0 size=     157kB time=00:00:17.70 bitrate=  72frame=  289 fps= 41 q=27.0 size=     174kB time=00:00:19.07 bitrate=  74frame=  309 fps= 41 q=27.0 size=     183kB time=00:00:20.28 bitrate=  73frame=  329 fps= 41 q=27.0 size=     191kB time=00:00:20.77 bitrate=  75frame=  349 fps= 41 q=27.0 size=     200kB time=00:00:22.08 bitrate=  74frame=  369 fps= 41 q=27.0 size=     215kB time=00:00:23.38 bitrate=  75frame=  389 fps= 41 q=27.0 size=     225kB time=00:00:24.72 bitrate=  74frame=  408 fps= 40 q=27.0 size=     235kB time=00:00:26.02 bitrate=  74frame=  428 fps= 40 q=27.0 size=     247kB time=00:00:27.32 bitrate=  73frame=  448 fps= 40 q=27.0 size=     256kB time=00:00:28.65 bitrate=  73frame=  468 fps= 40 q=27.0 size=     264kB time=00:00:30.01 bitrate=  72frame=  489 fps= 40 q=27.0 size=     273kB time=00:00:31.38 bitrate=  71frame=  507 fps= 40 q=27.0 size=     299kB time=00:00:32.72 bitrate=  74frame=  527 fps= 40 q=27.0 size=     317kB time=00:00:34.09 bitrate=  76frame=  547 fps= 40 q=27.0 size=     336kB time=00:00:35.45 bitrate=  77frame=  565 fps= 40 q=27.0 size=     344kB time=00:00:36.82 bitrate=  76frame=  586 fps= 40 q=27.0 size=     352kB time=00:00:38.18 bitrate=  75frame=  607 fps= 40 q=27.0 size=     361kB time=00:00:39.55 bitrate=  74frame=  627 fps= 40 q=27.0 size=     370kB time=00:00:40.91 bitrate=  74frame=  647 fps= 40 q=27.0 size=     384kB time=00:00:42.28 bitrate=  74frame=  665 fps= 40 q=27.0 size=     408kB time=00:00:43.64 bitrate=  76frame=  684 fps= 40 q=27.0 size=     418kB time=00:00:45.01 bitrate=  76frame=  704 fps= 40 q=27.0 size=     427kB time=00:00:46.37 bitrate=  75frame=  721 fps= 40 q=27.0 size=     453kB time=00:00:47.74 bitrate=  77frame=  741 fps= 40 q=27.0 size=     463kB time=00:00:49.10 bitrate=  77frame=  761 fps= 40 q=27.0 size=     472kB time=00:00:50.47 bitrate=  76frame=  784 fps= 40 q=27.0 size=     481kB time=00:00:51.84 bitrate=  76frame=  804 fps= 40 q=27.0 size=     498kB time=00:00:53.20 bitrate=  76frame=  822 fps= 40 q=27.0 size=     518kB time=00:00:54.57 bitrate=  77frame=  843 fps= 40 q=27.0 size=     529kB time=00:00:55.93 bitrate=  77frame=  862 fps= 40 q=27.0 size=     547kB time=00:00:57.30 bitrate=  78frame=  882 fps= 40 q=27.0 size=     558kB time=00:00:58.13 bitrate=  78frame=  903 fps= 40 q=27.0 size=     568kB time=00:00:58.98 bitrate=  78frame=  923 fps= 40 q=27.0 size=     578kB time=00:01:00.35 bitrate=  78frame=  943 fps= 40 q=27.0 size=     588kB time=00:01:01.67 bitrate=  78frame=  964 fps= 40 q=27.0 size=     598kB time=00:01:03.06 bitrate=  77frame=  984 fps= 40 q=27.0 size=     607kB time=00:01:04.42 bitrate=  77frame= 1004 fps= 40 q=27.0 size=     626kB time=00:01:05.72 bitrate=  78frame= 1026 fps= 40 q=27.0 size=     638kB time=00:01:07.20 bitrate=  77frame= 1047 fps= 40 q=27.0 size=     655kB time=00:01:09.58 bitrate=  77frame= 1069 fps= 40 q=27.0 size=     670kB time=00:01:10.95 bitrate=  77frame= 1089 fps= 40 q=27.0 size=     691kB time=00:01:12.32 bitrate=  78frame= 1108 fps= 40 q=27.0 size=     710kB time=00:01:12.64 bitrate=  80frame= 1126 fps= 40 q=27.0 size=     731kB time=00:01:13.85 bitrate=  81frame= 1142 fps= 40 q=27.0 size=     759kB time=00:01:15.05 bitrate=  82frame= 1157 fps= 39 q=27.0 size=     787kB time=00:01:16.41 bitrate=  84frame= 1174 fps= 39 q=27.0 size=     796kB time=00:01:17.78 bitrate=  83frame= 1192 fps= 39 q=27.0 size=     806kB time=00:01:19.14 bitrate=  83frame= 1209 fps= 39 q=27.0 size=     821kB time=00:01:19.38 bitrate=  84frame= 1227 fps= 39 q=27.0 size=     831kB time=00:01:20.59 bitrate=  84frame= 1248 fps= 39 q=27.0 size=     840kB time=00:01:21.96 bitrate=  84frame= 1267 fps= 39 q=27.0 size=     848kB time=00:01:23.24 bitrate=  83frame= 1289 fps= 39 q=27.0 size=     857kB time=00:01:24.73 bitrate=  82frame= 1309 fps= 39 q=24.0 size=     877kB time=00:01:26.03 bitrate=  83frame= 1329 fps= 39 q=27.0 size=     892kB time=00:01:27.40 bitrate=  83frame= 1351 fps= 39 q=27.0 size=     901kB time=00:01:28.85 bitrate=  83frame= 1372 fps= 39 q=27.0 size=     912kB time=00:01:30.28 bitrate=  82frame= 1394 fps= 39 q=27.0 size=     925kB time=00:01:32.52 bitrate=  81frame= 1418 fps= 39 q=27.0 size=     936kB time=00:01:34.16 bitrate=  81frame= 1441 fps= 40 q=27.0 size=     947kB time=00:01:35.53 bitrate=  81frame= 1464 fps= 40 q=27.0 size=     957kB time=00:01:36.89 bitrate=  80frame= 1488 fps= 40 q=27.0 size=     969kB time=00:01:38.26 bitrate=  80frame= 1509 fps= 40 q=27.0 size=     981kB time=00:01:39.62 bitrate=  80frame= 1526 fps= 40 q=27.0 size=     993kB time=00:01:41.90 bitrate=  79frame= 1530 fps= 40 q=27.0 Lsize=    1038kB time=00:01:42.00 bitrate=  83.4kbits/s dup=0 drop=1522    
video:406kB audio:590kB subtitle:0 global headers:0kB muxing overhead 4.258083%
[libx264 @ 0x240bf60] frame I:15    Avg QP:16.30  size:  2928
[libx264 @ 0x240bf60] frame P:1515  Avg QP:22.12  size:   245
[libx264 @ 0x240bf60] mb I  I16..4: 72.9%  0.0% 27.1%
[libx264 @ 0x240bf60] mb P  I16..4:  3.9%  0.0%  0.7%  P16..4:  3.2%  1.1%  0.5%  0.0%  0.0%    skip:90.5%
[libx264 @ 0x240bf60] coded y,uvDC,uvAC intra: 12.1% 38.2% 14.8% inter: 1.2% 2.7% 0.9%
[libx264 @ 0x240bf60] i16 v,h,dc,p: 29% 23%  4% 44%
[libx264 @ 0x240bf60] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 19% 16% 30%  6%  8%  8%  5%  6%  3%
[libx264 @ 0x240bf60] i8c dc,h,v,p: 50% 27% 18%  5%
[libx264 @ 0x240bf60] ref P L0: 80.0%  8.9%  6.1%  2.7%  2.3%
[libx264 @ 0x240bf60] kb/s:32.58 
```

我决定远程调试看看发生了什么。我意识到视频状态正在等待。

![调试](../Images/40fbd1de803ba2136de8060de242f0ac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:05:58.413

这是工作。原帖中的修改为最终版本！希望它可以帮助其他可能有类似问题的人。只需检查您是否在服务器中设置了任何身份验证，如果它首先不起作用。:)

# serial-port - 使用并行有线 RS232 从多个设备接收数据

> ID：12856645
> 
> 赞同：2
> 
> 时间：2012-10-12T10:01:20.503
> 
> 标签：serial-port

我目前正在开发一个小型应用程序来监控我们的太阳能收集器正在产生的功率/电流。

该阵列连接到 3 个逆变器。每台逆变器都有一个RS232接口，每10秒传输一条信息（当前状态）。

由于我想使用只有一个串行端口的设备进行监控，因此我需要想出一种能够并行读取所有逆变器数据的方法。我不需要向其中一个逆变器发送任何东西！

是否可以将 3 根 RS232 线并行连接到一个串行端口？由于每个逆变器仅传输 64Byte / 10 秒并以换行符结尾，因此不太可能发生冲突，因此我可以检查可变的行长度以检测冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-10T15:16:42.423

我有点对世界末日和古怪的答案嗤之以鼻，这些答案经常出现在stackoverflow上......

但无论如何，在过去的几年里，我使用了使用二极管的并联 RS-232 传输线，它可以在不太可能发生碰撞的情况下正常工作。在一个特定的应用程序中，我使用了这种技术，有两个输入终端，用户可以在其中键入简单的命令来控制系统（一个专门的安全系统），两个人不太可能同时试图从两个不同的终端。令人惊讶的是，我当时测试的大多数 RS-232A 接收器的电压电平都没有问题，并且它们能够容忍由于简单地使用与 TXD 信号串联的二极管而产生的信号特性（无负电压）。然而，

在任何情况下，我都建议不要使用这种技术，除非在非常具体、有限和非关键任务的情况下，并且不会在您有多个设备以编程的间隔发送信息的情况下使用它，就像 OP 的情况一样或者有软件握手的地方。

In 可以是解决串行输入端口不足问题的简单解决方案，但只能在非常有限的一组环境中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:19:08.733

**不**，您**不应该**并联 3 个串行输出端口。如果这样做，您可能会损坏逆变器的 RS232 输出电路。

您有 3 个 RS232 输出，因此您需要 3 个 RS232 输入，然后您可以按照自己喜欢的方式管理这 3 个输入：也许您可以缓冲每个输入的数据，然后在单个 RS232 输出上重新输出数据，以连接到您的监控设备....但您应该在数据流中添加一些代码来区分来自 3 个逆变器的数据。

也许你可以使用某种 IC 来为你完成这项工作，我不确定，但也许已经存在一些在单个 RS232 输出上多路复用多个 RS232 输入的 IC。试试这个搜索：[Google 上的 rs232 端口输入多路复用器](https://www.google.com/search?hl=en&safe=off&tbo=d&q=rs232+port+input+multiplexer&oq=rs232+port+input+multiplexer&gs_l=serp.3...8458.8827.0.8940.4.4.0.0.0.1.143.340.3j1.4.0.les%3B..0.0...1c.1.Anu6I-WWLus)

或者，如果监控设备是 Window 计算机，您可以使用 3 个串口转 USB 转换器：这将在您的计算机上创建 3 个虚拟 COM 端口，您可以使用任何软件从中读取数据。

**更新**
关于使用二极管保护输出电路以阻止重新进入电流的假设，我认为它不会起作用......
自上次我在低电平使用 RS232 链路以来已经过去了很多年（所以也许我'm错了）但我认为RS232输入和输出端口（使用速度，奇偶校验，停止位......）之间正在进行某种握手。
每个 RS232 端口都有用于数据和传输控制的输入和输出信号，因此您的多个 RS232 输出确实有一些输入信号，而您的单个 RS232 输入确实有一些输出。
这意味着您的输入监控 RS323 端口将尝试同时与 3 个 RS323 端口握手......并且 3 个 RS232 端口可能会同时响应......所以我认为它不会去工作。

除此之外，如果您在输出端放置二极管，您将失去 0.7v，我不记得 RS232 信号电平的容差，但也许 0.7v 可能是相关的。

# c# - 找到左上角单元格的坐标？使用 EPPlus

> ID：12856646
> 
> 赞同：4
> 
> 时间：2012-10-12T10:01:35.203
> 
> 标签：c#, excel, epplus

我正在尝试将图像映射到 excel 电子表格中，我需要找到当前单元格的坐标是什么？

我的代码目前循环遍历每个单元格，直到它在 excel 中找到一个匹配的标签，它知道这是放置图片的单元格。

我有单元格，我只是不知道如何获得单元格的顶部和左侧属性？

```
foreach (ExcelRangeBase cell in range1)
     {

     } 
```

请帮忙！

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:34:26.070

```
int row = cellAddress.Start.Row;
int column = cellAddress.Start.Column;

if (mCellsResult.Count() > 0)
{
var mCells = mCellsResult.First();

//if the cell and the merged cell do not share a common start address then skip this cell as it's already been covered by a previous item
if (mCells.Start.Address != cellAddress.Start.Address)
                                                        continue;

if (mCells.Start.Column != mCells.End.Column)
{
colSpan += mCells.End.Column - mCells.Start.Column;
}

if (mCells.Start.Row != mCells.End.Row)
{
   rowSpan += mCells.End.Row - mCells.Start.Row;
}
}
double height = 0, width = 0;
for (int h = 0; h < rowSpan; h++)
{
height += xlWorkSeet1[k].Row(row + h).Height;
}
for (int w = 0; w < colSpan; w++)
{
 width += xlWorkSeet1[k].Column(column + w).Width;
}

double pointToPixel = 0.75;

height /= pointToPixel;
width /= 0.1423;

picture = xlWorkSeet1[k].Drawings.AddPicture(System.Guid.NewGuid().ToString() + row.ToString() + column.ToString(), image);
picture.From.Column = column - 1;
picture.From.Row = row - 1;
picture.SetSize((int)width, (int)height); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-18T06:25:56.317

Cell.Top 和 Cell.Left 会很好，但它们在 EPPlus 中不存在。我受到 Pomster 的启发，做了这个功能：

```
/// <summary>Get top, left, width and height of a given cell.</summary>
    Rectangle GetCellTopLeftCoordinates(ExcelWorksheet worksheet, ExcelRangeBase cell)
    {
        double top = 0, left = 0, width = 0, height = 0;

        //Get top and left position:
        for (int i = 1; i < cell.Start.Row; i++)
            top += worksheet.Row(i).Height;

        for (int i = 1; i < cell.Start.Column; i++)
            left += worksheet.Column(i).Width;

        //Get width and height:
        if (cell.Merge)  //Then the cell are merged with others:
        {
            foreach (string address in worksheet.MergedCells)  //Loop through all merged cells:
                if (Intersect(worksheet.Cells[address], cell))  //Then we have found the particular, merged range:
                {
                    ExcelRange range = worksheet.SelectedRange[address];

                    for (int i = range.Start.Row; i <= range.End.Row; i++)
                        height += worksheet.Row(i).Height;

                    for (int i = range.Start.Column; i <= range.End.Column; i++)
                        width += worksheet.Column(i).Width;

                    break;
                }
        }
        else //No merges - just get dimensions:
        {
            width = worksheet.Column(cell.Start.Column).Width;
            height = worksheet.Row(cell.Start.Row).Height;
        }

        //Convert point to pixels:
        top /= 0.75;
        left /= 0.1423;
        height /= 0.75;
        width /= 0.1423;
        return new Rectangle((int)left, (int)top, (int)width, (int)height);
    }

    bool Intersect(ExcelRange range, ExcelRangeBase cell)
    {
        foreach (ExcelRangeBase item in range)
            if (item.Address == cell.Address)
                return true;

        return false;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:15:36.873

试试`cell.top`and `cell.left`，它们存在于 excel 对象模型中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-08-24T10:29:28.823

如何获取excel范围的左上角：

```
using Excel = Microsoft.Office.Interop.Excel;
...
// get upper left corner of range defined by a RangeStr like "B2:D4"
Excel.Range UpperLeftCell = (Excel.Range)wsheet.get_Range(RangeStr).Cells[1,1]; 
```

其中 wsheet 是 Worksheet 对象。

# ruby-on-rails-3 - 乘客+Nginx 显示自定义500页面

> ID：12856648
> 
> 赞同：5
> 
> 时间：2012-10-12T10:01:37.483
> 
> 标签：ruby-on-rails-3, nginx, passenger

我将 Rails 3.2 与乘客 + nginx 一起使用。当数据库服务器关闭时，我想显示漂亮的自定义 500 页面。当我的 Rails 应用程序无法启动时，我想显示一些东西。这是我的 nginx：

```
server {
  listen 80;
  server_name localhost;
  root /var/www/store/public;
  error_page   500  /500.html;

  # root
  location / {
    passenger_enabled on;
    rails_env production;
    passenger_use_global_queue on;
  }

} 
```

上面的配置根本不起作用。当它发生时，它只显示：

> 内部服务器错误 (500)

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-26T07:50:30.700

Phusion 乘客作者在这里。使用[passenger_intercept_errors off](https://www.phusionpassenger.com/documentation/Users%20guide%20Nginx.html#passenger_intercept_errors)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T16:27:05.193

来自乘客文档[http://www.modrails.com/documentation/Users%20guide%20Nginx.html#PassengerFriendlyErrorPages](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#PassengerFriendlyErrorPages)

`passenger_friendly_error_pages off`

可以放置在 http 块、服务器块或位置块内，不会显示启动失败的乘客错误，我相信链接到 nginx 提供的 500 错误页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-13T18:32:29.990

mariow 的链接让我找到了答案。错误文件位于模板文件夹中。我使用 rvm，所以我的模板文件夹位于`/home/forest.handford/.rvm/gems/ruby-2.0.0-p481/gems/passenger-4.0.50/resources/templates/`. 用来`find / -name templates | grep passenger`找到你的。我正在`undisclosed_error.html.template`为我的网站进行更改，因为这是人们键入无效 URL 时发生的错误。

# java - 如何在 java servlet 或 jsp 中获取客户端下载位置的路径？

> ID：12856649
> 
> 赞同：0
> 
> 时间：2012-10-12T10:01:37.093
> 
> 标签：java, javascript, jsp, servlets

假设在我的网络应用程序中，用户单击下载按钮，以便将文件下载到他的系统中。那么我能否获得该客户端的下载位置，例如我的客户端系统中最近下载的文件的位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:04:18.067

您无法获取此信息。它是沙盒的，客户端不会通知服务器有关位置的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:04:18.170

这是不可能的，因为您无法通过浏览器 (JavaScript) 访问用户的文件系统。

也许直接在浏览器中使用模块或其他任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:04:21.063

你没有。你得到的只是文件名......无论如何它对你有什么帮助，因为你的服务器没有相同的结构。

# sql-server - 在 sql join 中使用 OR 很慢

> ID：12856651
> 
> 赞同：0
> 
> 时间：2012-10-12T10:02:00.393
> 
> 标签：sql-server, tsql

我有一个场景如下。

员工表

```
EmpId X_Id  Flag
--------------------------------
1      123     0 
```

部门表

```
DeptId D.Name X_Id  Flag
----------------------------------------------
1        a     123    0
2        b     123    1 
```

我需要编写一个基于标志获取行的查询。即，如果 EmpTable 中的 flag 为 0，则仅获取 flag 为 0 的行，如果 EmpTable 中的 flag 设置为 1，则获取所有行（标志为 0 和 1）。为此，我编写了以下查询

```
SELECT E.EmpId, E.X_Id, D.Did, D.Dname
FROM EmpTable E INNER JOIN DeptTable D
ON E.X_Id = D.X_Id
AND (D.Flag = 0 or D.Flag = E.Flag) 
```

上面的查询返回正确的行，但正如我所见，使用 OR 不是一个好主意。查询很慢。任何替代方案可以实现相同的最佳性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:44:42.797

唯一明显的选择是

```
SELECT E.EmpId,
       E.X_Id,
       D.Did,
       D.Dname
FROM   EmpTable E
       INNER JOIN DeptTable D
         ON E.X_Id = D.X_Id
            AND D.Flag = E.Flag
UNION
SELECT E.EmpId,
       E.X_Id,
       D.Did,
       D.Dname
FROM   EmpTable E
       INNER JOIN DeptTable D
         ON E.X_Id = D.X_Id
            AND D.Flag = 0 
```

有时重写`OR`as`UNION`可以帮助提高性能。如果这没有帮助，您将需要查看执行计划以查看是否缺少任何必需的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:59:26.053

一个范围，但也许值得一试。
有时连接会建立在一个索引上。
如果将其拆分，则有时它将使用单独的索引。
查看查询计划。

```
SELECT E.EmpId, E.X_Id, D.Did, D.Dname
FROM EmpTable E 
JOIN DeptTable D1
  ON E.X_Id = D1.X_Id 
JOIN DeptTable D2
  ON D2.Flag = E.Flag
  OR D2.Flag = 0

SELECT E.EmpId, E.X_Id, D.Did, D.Dname
FROM EmpTable E 
JOIN DeptTable D1
  ON E.X_Id = D1.X_Id 
WHERE D2.Flag = E.Flag
   OR D2.Flag = 0 
```

# facebook - 重新发布已删除的帖子

> ID：12856656
> 
> 赞同：0
> 
> 时间：2012-10-12T10:02:17.110
> 
> 标签：facebook

我使用连接到应用程序的第 3 方发布工具向 Facebook 发布了一些评论

当我因为工具更改从 facebook 帐户中删除应用程序时，所有过去通过应用程序发布的帖子也被删除。

我不想删除这些帖子。是否有可能以某种方式恢复已删除的评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:09:03.647

您无法取回这些，因为 FB 不支持此功能。您删除了发布这些项目的应用程序，因此它们被删除了。

# jasper-reports - 根据 iReport 中的变量对结果集进行排序

> ID：12856658
> 
> 赞同：0
> 
> 时间：2012-10-12T10:02:23.223
> 
> 标签：jasper-reports, ireport

我有一个带有列的*结果集：*

```
interval_start(timestamp) , camp  , queue , other columns
2012-09-10 11:10            c1      q1
2012-09-10 11:20            c1      q2 
```

**interval_start**具有 10 分钟间隔内的值，例如：

```
2012-09-10 11:10,

2012-09-10 11:20,

2012-09-10 11:30 .... 
```

使用*Joda Time*库和**interval_start**字段，我创建了一个变量来创建字符串，这样如果**interval_start**的分钟位于 00-30 之间，则以分钟为单位设置 30，否则以分钟为单位设置 00。

我想将数据分组为：

```
camp as group1
variable created as group2
queue as group3 
```

并做了一些聚合

但在我的报告结果中，我在相同的时间间隔内多次获得相同的队列。
我用过`order by camp, interval_start, queue`，但问题依然存在。

附上截图供您参考：

![在此处输入图像描述](../Images/4739428652e8314a20f3a0f6a79cd8da.png)

有没有办法根据创建的变量对*结果集进行排序？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:26:58.707

最好的猜测是您的实际 SQL 查询存在问题。您说正在重复相同的队列，但是从查看您的图像来看，实际上并没有重复它是不同的行。

您的查询将很难完成，因为您真的希望您的查询有一个 order by of `order by camp, (rounded)interval_start, queue`。没有它，它是按列排序，然后`camp`是非四舍五入的版本。何时表示数据的顺序不正确，Jasper Reports 无法按照您想要的方式对它们进行分组。然后真正的问题是 Jasper Reports 没有在获得数据后对数据进行排序的功能。由开发商来提供。`interval_start``camp`

所以你有几个选择：

1.  更新您的 SQL 查询以对您的时间进行四舍五入。根据您的数据库，这以不同的方式完成，但可能需要某种类型的存储过程或函数来处理它（例如，参见这个[TSQL 函数](https://stackoverflow.com/a/249828/3340)）。
2.  而不是在报表中使用 sql 查询，将其移到报表之外，并处理数据，在 java 端进行舍入和排序。然后将其作为`REPORT_DATASOURCE`参数传递。
3.  在表中添加一列以存储四舍五入的时间。您可以在数据库中创建一个触发器来处理这一切，而无需更改应用程序中的任何其他代码。

老实说，这两种选择都不理想，我希望有人能提供一个证明我错的答案。但我认为目前没有更好的方法。

# sql - 检查最大最小值中的序列

> ID：12856659
> 
> 赞同：0
> 
> 时间：2012-10-12T10:02:32.577
> 
> 标签：sql, max, min, lag

我有一个存储产品最大和最小价格中断的数据库表。 ![在此处输入图像描述](../Images/308ed5caced3d877dc1ab6855a16a9bb.png)

有谁知道 SQL，如果我从一个 Max 到下一个项目的 Min 有一个休息时间。例如 1-10 12-20 如果它可以通过每个范围检测到绝对最小值和绝对最大值的中断，我希望它返回丢失的数字或至少一个计数或布尔值。

SQL 服务器 (MSSQL) 2008

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T10:32:04.780

对于支持窗口函数的数据库，如 Oracle：

```
SELECT t.*
     , CASE LAG(maxq+1, 1, minq) OVER (PARTITION BY prod ORDER BY minq)
          WHEN minq
          THEN 0
          ELSE 1
       END AS is_gap
  FROM tbl t
; 
```

这将为与前一行（按 minq 排序）形成间隙的行生成 is_gap = 1。如果您的数量范围可能重叠，则需要提供所需的逻辑。

[http://sqlfiddle.com/#!4/f609e/4](http://sqlfiddle.com/#!4/f609e/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:16:56.427

像这样的东西，给出的最大数量不是产品的整体最大数量，并且后面没有最小数量：

```
select prev.tbProduct_Id,prev.MaxQuantity
  from yourtable prev
  left join (select tbProduct_ID, max(MaxQuantity) MaxQuantity from yourtable group by tbProduct_id) maxes
    on maxes.tbProduct_ID=prev.tbProduct_Id and maxes.MaxQuantity=prev.MaxQuantity
  left join yourtable next
    on next.tbProduct_Id=prev.tbProduct_Id and next.MinQuantity=prev.MaxQuantity+1
  where maxes.tbProduct_Id is null and next.tbProduct_Id is null; 
```

但是，这会在您的示例数据上失败，因为它会期望 MinQuantity 为 21 而不是 20 的行。

# android - 如何在我的应用程序中使按钮透明但可见

> ID：12856661
> 
> 赞同：5
> 
> 时间：2012-10-12T10:02:36.603
> 
> 标签：android, button, transparency

我希望我的按钮是透明的，因为我在活动上有一个图像作为背景。如果按钮不透明，则这些按钮会覆盖图像并且图像背景似乎无用。

如果我使用`android:background="@android:color/transparent"`，它会使我的按钮完全不可见，除了上面的文字。所以，我需要按钮是透明的，只要它应该是可见的有一个按钮。代码片段将不胜感激。

```
<Button
android:id="@+id/new_button"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@android:color/transparent"  //this line makes the button completely invisible.
android:text="@string/label" /> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-16T05:25:57.757

如果您只想要白色边框和按钮中的文本/图标，但按钮背景透明，请创建以下可绘制对象（我将其命名为 button_border.xml）：

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape>
            <stroke
                android:color="@android:color/white"
                android:width="1dp" />
            <solid android:color="@android:color/transparent" />
        </shape>
    </item>
</selector> 
```

并将其用作按钮的背景：

```
<Button
    .
    .
    .
    android:background="@drawable/button_border"
    /> 
```

我猜想有一种更优雅的方式来处理主题，但我还没有那么远。在 button_border 可绘制对象中，您可以添加圆角等等...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T06:05:41.833

```
android:background="#A0FFFFFF" 
```

我已经对颜色进行了硬编码，但您应该将其存储在 colors.xml 中

修改前两个字符 A0，调整您想要的透明度，最后 6 个字符调整您想要的颜色。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T10:10:24.667

为按钮应用选择器，像这样

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_pressed="true"><shape>
        <solid
            android:color="@color/color_1_end" />

        <stroke 
            android:width="1dp"
            android:color="@android:color/transparent" /> // transparent patametr

        <corners 
            android:radius="4dp" />

        <padding 
            android:bottom="10dp" 
            android:left="10dp" 
            android:right="10dp" 
            android:top="10dp" />
    </shape></item>
<item>
    <shape>
        <gradient android:angle="270"
             android:endColor="@color/color_1_start" 
             android:startColor="@color/color_1_end" /> // maybe transparent 

        <stroke 
            android:width="1dp" 
            android:color="@color/color_1_start" /> //maybe transparent 

        <corners android:radius="4dp" />

        <padding android:bottom="10dp" 
            android:left="10dp" 
            android:right="10dp" 
            android:top="10dp" />
    </shape>

    </item> 
```

为你修改这个=）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T10:15:27.067

为按钮应用边框

```
<item>
    <shape>
        <padding
            android:bottom="1dp"
            android:left="1dp"
            android:right="1dp"
            android:top="1dp" />

        <solid android:color="#FF000000" />

        <corners android:radius="3dp" />
    </shape>
</item>
<item>
    <shape>
        <padding
            android:bottom="2dp"
            android:left="2dp"
            android:right="2dp"
            android:top="2dp" />

        <gradient
            android:angle="315"
            android:centerColor="#FFFFFFFF"
            android:endColor="#FFB0B0B0"
            android:startColor="#FFB0B0B0" />
    </shape>
</item> 
```

```
 <Button
        android:id="@+id/btnLeft"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_margin="7dip"
        android:background="@drawable/button_border"
        android:scaleType="centerInside"
 /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-12T22:32:45.270

只需尝试在java中使用以下代码

```
<br/>
    button.getBackground().setAlpha(int);<br/>
correct range of input parameter is between 1 and 255 and the '1' is more transparent.
common pitfall is using:<br/>
    button.setAlpha(float);<br/> 
```

使所有按钮透明。

# php - 从 PHP 中的查询调用的数组中选择一个值

> ID：12856662
> 
> 赞同：0
> 
> 时间：2012-10-12T10:02:37.117
> 
> 标签：php, sql-server, arrays

基本上我有一个使用 PHP 调用的查询：

```
<?php $result = mssql_query("SELECT * FROM Colours WHERE Type = 'type1' ");

while ($row = mssql_fetch_array($result)) { 

if ($row['ColourID'] == "1") {

    $sayclass1="imgactive";

    }else{

    $sayclass1="imginactive"; }

            ?> 
```

正如你所看到的，一旦我执行查询然后循环它，问题是它返回一个数组，现在在某些情况下我需要使用完整的数组，但我希望能够从中选择一个条目 if声明之类的。例如：

```
<img id="h" src="<?php echo $row['thumbimg']; ?> 
```

现在 thumbimg 是我数据库中的一列，它只包含一个 url。然而，由于它是一个数组，所以图片不会显示，因为它会回显所有值，因此不是**images** /image1.png ，而是回**显 images/image1.png images/image2.png images/image3.png**等ETC...

我希望这是有道理的，谁能告诉我如何操作查询/代码轻微仍然返回所有条目，但请从数组中选择某些值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:31:15.133

如果要显示所有图像，则需要为每个使用 img 标签

```
foreach($row[thumbimg] as $img):
<img id="h" src="<?php echo $img; ?>
end foreach; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:10:07.093

```
<?php $result = mssql_query("SELECT * FROM Colours WHERE Type = 'type1' ");

while ($row = mssql_fetch_array($result)) { 

     if ($row['ColourID'] == "1") {

        $sayclass1="imgactive";

    }else{

        $sayclass1="imginactive"; 
    }
 echo '<img id="h" src="'.$row['thumbimg'].'">';
}

?> 
```

使用上面的代码，您将从数据库中每行获得一张图像。您复制粘贴的代码部分不足以确定您的错误在哪里以及为什么`$row['thumbimg']`包含结果的连接值。

# c# - 在 C# 中执行按位 OR 的逆运算（或反转）

> ID：12856679
> 
> 赞同：7
> 
> 时间：2012-10-12T10:03:36.527
> 
> 标签：c#, .net, operators, bit-manipulation

如何`|=`在 C# 中执行按位 OR ( ) 运算符的逆运算？我可以使用 C# 中的 NOR 位运算符吗？

**设想：**

我从 .NET 框架继承了一个基类。这个类有一个设置标志的操作。

**例子：** `flags |= 0x200;`

在我的派生类中，我想省略这个标志设置，就好像该操作`flags |= 0x200;`从未发生过一样。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T10:05:51.640

您可以 AND ( ) 与要删除的值`&`的倒数 ( )：`~`

```
flags &= ~0x200; 
```

如果您打算确保未设置此标志。如果您想撤消对此标志的先前更改，那么正如@Russell 所说，XOR 可能就是您所追求的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-12T10:07:29.230

您可以对标志进行异或以将其删除

```
flags ^= 0x200 
```

如果它关闭，同样的操作也会打开该标志。与掩码进行异或运算的行为类似于切换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T10:06:33.163

异或不会工作吗？`flags ^ 0x200`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T10:12:35.290

您很难知道标志的原始值是否设置了这些位。说标志已经`0x200`在您的代码执行时出现，那么您的操作将不会更改任何 xor 或也不或将确保检索先前的值。我看到的一种方法是在虚拟方法中进行此操作并在派生类中覆盖它而不进行任何更改。另一种方法是使这个魔法值成为一个属性，并在派生类构造函数中将其设置为 0。这将阻止更改。

# facebook - Facebook API 提要对话框 - 防止不必要的点击

> ID：12856682
> 
> 赞同：0
> 
> 时间：2012-10-12T10:03:37.837
> 
> 标签：facebook

你好，

使用 Facebook 的 API，可以提示用户使用[提要对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)在他/她的墙上发帖。但是，使用 javascript SDK，这需要两次单击：一次是在弹出对话框的按钮上，另一次是在对话框中的“共享”按钮上。

是否有可能摆脱这些点击之一？我想到了两种方法：

*   在 iframe 中嵌入对话框，因为 Facebook 提供了一个完整页面对话框的 URL。这将要求用户仅单击“共享”按钮。显然 Facebook 阻止了该选项。
*   使用访问令牌和`display=iframe`，但我想避免用户必须授权我的应用程序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:43:55.627

我建议您改用 fb.api。

```
function PostToMyWall(){

        FB.login(function(response)
        {
            if (response.authResponse)
            {

                  //Post to my wall
                  FB.api('/me/feed', 'post', { 
                  message: lnk,link: lnk

                  }, 
                  function(response) {
                    if (!response || response.error) {
                     // //alert('Error occured');

                   } else {
                     // //alert("Successfully Posted to My Wall!");

                    }
                  });}else
            {
                alert('Not logged in');
            }}, { scope : 'publish_stream' });
         } 
```

我的应用程序有类似的功能，请访问 www.wootube.woolei.com -“发布到 WooTube 页面和组”

或者当页面使用 jquery 时弹出

```
$(document).ready(function() {   FB.ui({method: 'feed',
            name: mdtxt,
            link: lnk,
            picture: hackImageUrl(img,fld),
            caption: '<?php echo $clickme; ?>',
            description: '<?php echo $app_desc; ?>'
        }, 
         function(response) {
           if (!response || response.error) {
             alert('Error occured');

          } else {
             alert("Successfully Posted to Group");

           }
         });}); 
```

# oracle10g - Oracle 10g 到 11g 迁移..连接字符串

> ID：12856684
> 
> 赞同：0
> 
> 时间：2012-10-12T10:03:39.193
> 
> 标签：oracle10g, migration, oracle11g, compatibility, jdbc-odbc

我有一个查询。我们正在从 Oracle 10g 迁移到 Oracle 11g。在 Java 代码中，我们将 jdbc:oracle:oci8:@XYZ 用于 oracle 10g。但是在 11g 升级之后，我们保持上面的代码不变。现在我在 QA 测试期间连接到数据库时“**不”面临任何问题。****它工作得很好。我们正在使用 JDK 1.5。**

我的查询是*我需要将字符串更改为 jdbc:oracle:oci:@XYZ for 11g 吗？*或现有的将起作用（向后兼容性）。这是否会在将来引起任何问题。

另外，从 10g 迁移到 11g 时，从 JAVA 的角度来看，还有哪些需要注意的事项。

友善的建议。

感谢您。高拉夫·卡拉勒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:37:52.697

如果服务名称相同，则无需更改连接字符串。

# liferay - “未找到请求的资源”在 liferay portlet 中提交表单时

> ID：12856685
> 
> 赞同：0
> 
> 时间：2012-10-12T10:03:47.920
> 
> 标签：liferay

我正在开发一个liferay portlet。这不是我第一次这样做，而是得到一个简单的错误，我不明白为什么会出现这个错误。当我单击提交按钮时，我收到此错误

> 未找到请求的资源。“http://localhost:8081/addProduct”

我试图解决它超过几个小时，我知道我犯了一个愚蠢的错误。任何机构都可以帮我解决这个问题吗？提前感谢任何帮助。这是我的jsp代码：

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>
<%@ taglib uri="http://liferay.com/tld/aui" prefix="aui" %>
<%@ page import="javax.portlet.PortletURL" %>

<portlet:defineObjects />

This is the <b>ServiceBuilderTest</b> portlet.
<portlet:actionURL var="addProduct" name="addProductAction"/>

<aui:form method="post" action="addProduct">
    <aui:fieldset>
        <aui:input name="productName" label="Product Name"></aui:input>
        <aui:input name="userID" label="User ID"></aui:input>
        <aui:input name="companyID" label="company ID"></aui:input>
        <aui:input name="groupID" label="Group ID"></aui:input>     
        <aui:input name="serialNumber" label="Serial Number"></aui:input>   
        <aui:button type="submit" value="Submit"></aui:button>  
    </aui:fieldset>
</aui:form> 
```

这是我的 portlet 类代码：

```
public class ServiceBuilderPortlet extends MVCPortlet{
    public void addProductAction(ActionRequest actionReauest, ActionResponse         actionResponse) throws SystemException, PortalException
    {               
        String productName = actionReauest.getParameter("productName");
        String userID = actionReauest.getParameter("userID");
        String companyID = actionReauest.getParameter("companyID");
        String groupID = actionReauest.getParameter("groupID");
        String serialNumber = actionReauest.getParameter("serialNumber");
        PRProduct product =     PRProductLocalServiceUtil.addProduct(Long.parseLong(companyID), Long.parseLong(groupID),     productName, 
                serialNumber, Long.parseLong(userID));                  
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:03:55.077

做了

```
<portlet:actionURL var="addProduct" name="addProductAction"/>
<aui:form method="post" action="<%=addProduct%>">
   ... 
```

实际上，我认为最好的做法是不将动作命名为“addProductAction”，而只命名为“addProduct”，因此更改将是这样的（包括一行 java，其余看起来不错（视觉上，未尝试/测试):

```
<portlet:actionURL var="addProduct" name="addProduct"/>
<aui:form method="post" action="<%=addProduct%>">
  .... 
```

和

```
public class ServiceBuilderPortlet extends MVCPortlet{
   public void addProduct(ActionRequest request, ActionResponse response) throws SystemException, PortalException { 
       // ...
   }
} 
```

# api - 您可以在应用程序中从 Google 文档创建 Google 表单吗？

> ID：12856686
> 
> 赞同：0
> 
> 时间：2012-10-12T10:03:57.477
> 
> 标签：api, google-apps-script, google-docs, google-forms, google-docs-api

我正在考虑将使用谷歌表单的应用程序，我需要从该应用程序创建表单。有没有一种方法可以在不使用网站但通过一些 api 或其他方式的情况下在谷歌文档中创建表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T13:24:57.187

我可以提供一个使用 Google App Script 的解决方案的想法。

自 2013 年初以来，您可以非常轻松地使用 App Script [Forms Service API创建新表单。](https://developers.google.com/apps-script/reference/forms/)

```
var form = FormApp.create(title)
  .setDescription(description)
  .setConfirmationMessage('Thanks for responding!')
; 
```

现在的问题是如何从您的非 App Script 代码中运行该 App Script。

您可以使用 App Script 创建一个响应 HTTP GET 请求的[Web App 。](https://developers.google.com/apps-script/execution_web_apps)

因此，将它们放在一起，您可以创建一个响应 GET 请求的 App Script Web App，当它获得正确的 URL 参数时，它会创建表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-15T23:02:14.693

**（2020 年 11 月）**是的，可以以[编程方式创建 Google 表单](https://developers.googleblog.com/2016/06/auto-generating-google-forms.html)。您可以通过[Google Apps Script](https://developers.google.com/apps-script)使用它的[Forms 服务](https://developers.google.com/apps-script/reference/forms)来做到这一点。您还可以扩展代码以从 Google Docs 中读取内容（使用 Apps Script 的[Document 服务](https://developers.google.com/apps-script/reference/document)）并将其用于创建 Google 表单。

我创建了一个[Google Workspace（以前称为 G Suite）](https://developers.google.com/gsuite/add-ons)插件，您可以将其视为 Google Docs 扩展，名为[GFormIt](https://gsuite.google.com/marketplace/app/gformit_for_docs/183004038754)。其最初目的是让教师在 Google Docs 中编写考试/测验，可能还有答案，然后自动将它们转换为 Google Forms 以分发给将答案提交到 Google Sheets（Google Forms 提交的目的地）的学生。

此外，如果您（老师）提供了测试问题的答案，GFormIt 还会像您是学生一样自动将您的答案提交给工作表。如果您这样做**，**并使用[Flubaroo](http://flubaroo.com/)之类的工具对考试进行评分，则可以将工作表中的行指定为“答案键”。您可以在上面链接的 GFormIt 页面上了解有关其工作原理的更多信息，包括观看短视频。

此[Google Docs 插件](https://developers.google.com/gsuite/add-ons/editors/docs)以及其他 Google Docs、表格、幻灯片、表单等都已通过 Google 认证/验证，并可免费提供给[Google Workspace Marketplace](http://gsuite.google.com/marketplace)中的任何人。（但是，您的管理员可能必须授予您权限才能尝试将它们安装到您的公司 Workspace 帐户。）如果有兴趣构建您自己的附加组件，请参阅[开发人员文档](https://developers.google.com/gsuite/add-ons/how-tos/building-gsuite-addons)以及[我的一些介绍性视频](https://developers.google.com/apps-script/guides/videos)以开始使用，最相关的是与此答案顶部相关的那个。

Apps Script 是一种无服务器的 Google 技术，这意味着您在浏览器中编写代码（使用 JavaScript），它由 Google 服务器托管和执行。如果您想创建自己的网络应用程序（并托管在任何地方），您将不得不等待在撰写本文时不存在的 Google Forms REST API。（如果我们推出了一个，您会在[https://developers.google.com/forms](https://developers.google.com/forms)以及其他文档，如 Sheets [https://developers.google.com/sheets](https://developers.google.com/sheets)、Gmail [https://developers 找到它的文档。 google.com/gmail](https://developers.google.com/gmail)，驱动器[https://developers.google.com/drive](https://developers.google.com/drive)等）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T18:13:37.253

抱歉，API 不支持以编程方式创建表单。

# nhibernate - 如何使用 FluentNHibernate 上的 EntityBase 类映射派生类

> ID：12856687
> 
> 赞同：2
> 
> 时间：2012-10-12T10:03:58.887
> 
> 标签：nhibernate, fluent

我有一个 FluentNHibernate 的 EntityBase 类：

```
public abstract class EntityBase<T>
{
    public EntityBase()
    {

    }

    public static T GetById(int id)
    {
        return (T)Hibernate.Session.Get<T>(id);
    }
    public virtual void Save()
    {
        using (var transaction = Hibernate.Session.BeginTransaction())
        {
            Hibernate.Session.SaveOrUpdate(this);
            transaction.Commit();
        }
    }
    public static IList<T> List()
    {
        return Hibernate.Session.CreateCriteria(typeof(T)).List<T>();
    }
    public static IList<T> ListTop(int i)
    {
        return Hibernate.Session.CreateCriteria(typeof(T)).SetMaxResults(i).List<T>();
    }
    public virtual void Delete()
    {
        using (var transaction = Hibernate.Session.BeginTransaction())
        {
            Hibernate.Session.Delete(this);
            transaction.Commit();
        }
    }
} 
```

我有一个基成员类，也是数据库中的一个表：

```
abstract public class BaseMember:EntityBase<BaseMember>
{
    public virtual int Id { get; set; }
    public virtual string Email { get; set; }
    public virtual string Password { get; set; }
    public virtual string RecordDate { get; protected set; }

    public BaseMember()
    {

    }
} 
```

我有另一个派生自 BaseMember 类的成员类：

```
public class IndividualMember : BaseMember
{
    public virtual int Id { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
    public virtual string PhoneNumber { get; set; }
    public virtual string MobilePhoneNumber { get; set; }
    public virtual DateTime BirthDate { get; set; }
    public virtual bool Gender { get; set; }
    public virtual string ProfileImage { get; set; }
    public virtual string AddressDefinition { get; set; }
    public virtual string ZipCode { get; set; }
    public virtual DateTime RecordDate { get; set; }

    public IndividualMember()
    {

    }
} 
```

如何将这些类与数据库中的 BaseMember 和 IndividualMember 表映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:56:06.923

See here: [https://github.com/jagregory/fluent-nhibernate/wiki/Fluent-mapping](https://github.com/jagregory/fluent-nhibernate/wiki/Fluent-mapping)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T12:57:59.230

Fluent NHibernate 中有不同类型的继承映射策略。您可以对派生类使用 SubclassMap 映射。

策略：每类层次结构表、每子类表和每具体类表。

对于 table-per-class-hierarchy 策略，您只需要指定鉴别器列。

更多参考：

[http://www.codeproject.com/Articles/232034/Inheritance-mapping-strategies-in-Fluent-Nhibernat](http://www.codeproject.com/Articles/232034/Inheritance-mapping-strategies-in-Fluent-Nhibernat) [https://github.com/jagregory/fluent-nhibernate/wiki/Fluent-mapping#wiki-subclasses](https://github.com/jagregory/fluent-nhibernate/wiki/Fluent-mapping#wiki-subclasses)

# vb.net - Windsor 的调试器视图中的“错误：没有可用的子级”

> ID：12856688
> 
> 赞同：2
> 
> 时间：2012-10-12T10:04:04.620
> 
> 标签：vb.net, castle-windsor

我有一个解决问题，我正在尝试：http: [//docs.castleproject.org/Windsor.Debugger-views.ashx](http://docs.castleproject.org/Windsor.Debugger-views.ashx)

但是，当我展开容器（或内核）变量的任何节点时，它会出现：错误：没有可用的子节点。

但是我可以看到：

```
All Components                        Count=6
All Services                          Count=5
Potentially Misconfigured Components  Count=1
Objects tracked by release policy     Count=0 
```

我已经安装了 VS 2010 SP1 和 Castle Windsor 3.1.0。可能是什么问题呢？

谢谢！

# asp.net - Asp.net ListView：如何为表格的列设置固定大小？

> ID：12856690
> 
> 赞同：0
> 
> 时间：2012-10-12T10:04:06.283
> 
> 标签：asp.net, listview

我在这样的 Asp.Net ListView 上有一个“结构”（它是一个摘录）：

```
 <asp:ListView ID="lvSchede" runat="server" DataSourceID="dsWrkCtrTable" GroupItemCount="1">

    <GroupTemplate>
        <tr id="itemPlaceholderContainer" runat="server">
            <td id="itemPlaceholder" runat="server" style="width: 100%">
            </td>
        </tr>
    </GroupTemplate>
    <ItemTemplate>
        <td id="Td2" runat="server" style="vertical-align: top;">
            <table style="background-color: #EEDFCC; padding: 10px 10px 10px 10px; border-style: solid;
                border-width: 1px; border-color: Gray;">
                <tr>
                    <td> 
```

…………

```
 <LayoutTemplate>
        <table runat="server">
            <tr runat="server">
                <td runat="server">
                    <table id="groupPlaceholderContainer" runat="server" border="0" style="background-color: #FFFFFF;
                        border-color: #999999; border-style: none; font-family: Verdana, Arial, Helvetica, sans-serif;">
                        <tr id="groupPlaceholder" runat="server" style="padding: 20px 20px 20px 20px;">
                        </tr>
                    </table>
                </td>
            </tr>
            <tr runat="server">
                <td runat="server" style="text-align: center; background-color: #CCCCCC; font-family: Verdana, Arial, Helvetica, sans-serif;
                    color: #000000;">
                </td>
            </tr>
        </table>
    </LayoutTemplate> 
```

问题是我的输出是不同大小的列（按照图片，我已经手动删除了我公司隐私的字符串内容）： ![在此处输入图像描述](../Images/e470f4955c0a063796d4d39b71a3da48.png)

我必须在哪里设置列大小以使其全部相同？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:42:39.757

这是一个如何在 1 列的表中设置列宽的示例：

```
<table border="1" width="100%">
  <col width="100">
  <tr>
    <th>Month</th>
  </tr>
  <tr>
    <td>January</td>
  </tr>
  <tr>
    <td>February</td>
  </tr>
</table> 
```

这是一个有 2 列的示例：

```
<table border="1" width="100%">
  <col width="100">
  <col width="50">
  <tr>
    <th>Month</th>
    <th>Savings</th>
  </tr>
  <tr>
    <td>January</td>
    <td>$100</td>
  </tr>
  <tr>
    <td>February</td>
    <td>$80</td>
  </tr>
</table> 
```

这是一个包含 3 列的示例：

```
<table border="1" width="100%">
  <col width="40">
  <col width="40">
  <col width="20">
  <tr>
    <th>Month</th>
    <th>Savings</th>
    <th>Loans</th>
  </tr>
  <tr>
    <td>January</td>
    <td>$100</td>
    <td>$10</td>
  </tr>
  <tr>
    <td>February</td>
    <td>$80</td>
    <td>$8</td>
  </tr>
</table> 
```

希望这至少会有所帮助。

# java - Eclipse 插件，在选项卡标题旁边的轮廓上添加按钮

> ID：12856692
> 
> 赞同：1
> 
> 时间：2012-10-12T10:04:09.433
> 
> 标签：java, eclipse, plugins, jface

我有一个带有编辑器和内容大纲的自定义 Eclipse 插件，我在其上添加了操作（按钮）

```
@Override
public void setActionBars(IActionBars actionBars)
{       

    actionBars.getToolBarManager().add(new CustomAction());     
    actionBars.getToolBarManager().update(false);       
    actionBars.updateActionBars();      
} 
```

该按钮正确显示并且功能正常，但它显示在名为 Outline 的选项卡标题下方的工具栏上，我希望该按钮显示在该选项卡标题旁边，就像在 JDT 中一样。

两张图说明：

这就是我所拥有的

![是）我有的](../Images/24d8e9e2aa374c379f8374a19772ac2e.png)

我想要什么

![我想要的是](../Images/0eb0897bb8ba6d0762d6505e280387d0.png)

在 JDT 中，当没有足够的空间来显示所有按钮时会发生第一个行为，但在我的大纲中，按钮始终位于选项卡标题下方

正如您在图片中看到的那样，我阅读了 JDT 大纲源代码，但没有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:34:21.400

我找到了一个解决方案，我的按钮使用的高度图像太大了，JDT 使用的图像是 16x16，所以我只是缩小了我的，按钮移动到选项卡标题旁边。

# java - textView如何显示文字

> ID：12856693
> 
> 赞同：0
> 
> 时间：2012-10-12T10:04:11.517
> 
> 标签：java, android

调用后如何`TextView`在获取视图中显示文本

```
 ListAdapter adapter = new MyCustomAdapter ( 
                      ManageSection.this,  studentList, 
                        R.layout.list_student, new String[] { TAG_StudentID, 
                              TAG_StudentNo,TAG_FullName}, 
                        new int[] { R.id.StudentID, R.id.StudentNo,R.id.FullName}); 
               setListAdapter(adapter); 
```

并且类`MyCustomAdapter`有一个获取视图，我将显示文本

```
 holder.FullName= (TextView) convertView.findViewById(R.id.FullName);
        holder.FullName.setText();
        holder.StudentNo=(TextView) convertView.findViewById(R.id.StudentNo);
        holder.StudentNo.setText(); 
```

所以在设置文本我应该写什么因为我做

```
no=student.get(holder.position).get(TAG_StudentNo);
            name =student.get(holder.position).get(TAG_FullName); 
```

并取 no, name 但文本在整个列表中重复

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {

     final ViewHolder holder;
        if(convertView==null)
        {
            LayoutInflater mInflater = (LayoutInflater)  context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = mInflater.inflate(resource, parent, false);
            holder = new ViewHolder();
            no=student.get(holder.position).get(TAG_StudentNo);
            name =student.get(holder.position).get(TAG_FullName);
            holder.StudentID= (TextView) convertView.findViewById(R.id.StudentID);
            holder.FullName= (TextView) convertView.findViewById(R.id.FullName);
            holder.FullName.setText();
            holder.StudentNo=(TextView) convertView.findViewById(R.id.StudentNo);
            holder.StudentNo.setText();
            holder.DeleteStudent = (ImageView) convertView.findViewById(R.id.DeleteStudent);
            holder.AlertIcon = (ImageView) convertView.findViewById(R.id.Alert);

         // add a listener for phone call
            holder.DeleteStudent.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                 id = student.get(holder.position).get(TAG_StudentID);
                Toast.makeText(getContext(),id,Toast.LENGTH_LONG).show();

                }

            });

            holder.AlertIcon.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                 //   String email = MyCustomAdapter.listMap.get(holder.position).get("email");
                  //  ActivityHelper.startActivity(ActivityManager.EMAIL, email);
                }

            });

            convertView.setTag(holder);

        }
        else
        {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.position = position;
        return convertView;
   }

    private static class ViewHolder
    {
        ImageView DeleteStudent;

        ImageView AlertIcon;

        TextView StudentID, StudentNo ,FullName;

        int position;
    }

} 
```

谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:14:18.363

试试这个代码。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

 final ViewHolder holder;
    if(convertView==null)
    {
        LayoutInflater mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = mInflater.inflate(resource, parent, false);
        holder = new ViewHolder();
        convertView.setTag(holder);

    }
    else
    {
        holder = (ViewHolder) convertView.getTag();
    }
    holder.position = position;
    no=student.get(holder.position).get(TAG_StudentNo);
    name =student.get(holder.position).get(TAG_FullName);
    holder.StudentID= (TextView) convertView.findViewById(R.id.StudentID);
    holder.FullName= (TextView) convertView.findViewById(R.id.FullName);
    holder.FullName.setText();
    holder.StudentNo=(TextView) convertView.findViewById(R.id.StudentNo);
    holder.StudentNo.setText();
    holder.DeleteStudent = (ImageView) convertView.findViewById(R.id.DeleteStudent);
        holder.AlertIcon = (ImageView) convertView.findViewById(R.id.Alert);

     // add a listener for phone call
        holder.DeleteStudent.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

             id = student.get(holder.position).get(TAG_StudentID);
            Toast.makeText(getContext(),id,Toast.LENGTH_LONG).show();

            }

        });

        holder.AlertIcon.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

             //   String email = MyCustomAdapter.listMap.get(holder.position).get("email");
              //  ActivityHelper.startActivity(ActivityManager.EMAIL, email);
            }

        });

    return convertView; 
```

}

```
private static class ViewHolder
{
    ImageView DeleteStudent;

    ImageView AlertIcon;

    TextView StudentID, StudentNo ,FullName;

    int position;
} 
```

}

您所做的只是仅在 convertView 为空时设置数据，如果不是，您只需在某些 Holder 操作后返回视图。在每种情况下，您都需要在 textView 中设置 Text 等。如果您需要更多解释，请询问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:21:37.110

它的简单伙伴你只需要把这一行而不是空白`setText()`

```
no=student.get(holder.position).get(TAG_StudentNo);// the roll_number string
name =student.get(holder.position).get(TAG_FullName);//full name string
holder.StudentID= (TextView) convertView.findViewById(R.id.StudentID);
holder.FullName= (TextView) convertView.findViewById(R.id.FullName);
holder.FullName.setText(name);//pass fullname
holder.StudentNo=(TextView) convertView.findViewById(R.id.StudentNo);
holder.StudentNo.setText(no);//pass roll no. 
```

你只需要传递`no` and 'name `variable to`setText()` 方法。

# php - 如何使用 foreach 获取具有特定名称的所有 GET 元素

> ID：12856699
> 
> 赞同：0
> 
> 时间：2012-10-12T10:04:24.697
> 
> 标签：php, loops, foreach, get

他stackoverflow，

今天我忙于一个函数，它可以获取所有具有特定名称的元素。现在我在创建这个函数时遇到了一个问题。具体名称是动态的，因此可以是：“conf_1=data&conf_2=data”，也可以是：“conf_1=data&conf_2=data&conf_3=data”

一些代码来启发你，

```
foreach($_GET as $key => $value) {
  $a++;
  if (strpos($key, "conf_$a") === 0) {
    $conf[$key] = $value;
  }
} 
```

假设我们有这个 URL，

naam=name&dom=domain&id=41&conf_1=data&conf_2=data&conf_3=data&this_1=data&this_2=opt1

现在我正在尝试使用 foreach 循环获取所有 conf 元素，但我需要 $a 参数是 1,2 en 3 数字。当我尝试将所有这些元素 $a 关闭时，给出 1 和 2。

我该如何声明，或者如何使用不同的循环来做到这一点。下一步当然是将元素放入这样的数组中：

```
 $conf = Array
        (
            [1] => data
            [2] => data
            [3] => data
        )

 $this = Array
        (
            [1] => data
            [2] => data
        ) 
```

编号不是自动完成的，这一点很重要。数组中的数字关闭是元素名称中的数字。基本上 conf_1=data 必须变成 [1] => data

我知道有多种方法可以做到这一点，但我不知道女巫是最好和最快的方法。我现在这样做的方式是完全错误的：

```
for($a = 0; $a < 99; $a++){
    // Get all the data
    $conf = array();
    foreach($_GET as $key => $value) {
        if (strpos($key, "conf_$a") === 0) {
            $conf[$key] = $value;
        }
    }

    $finalconf = array();
    //order all data
    $finalconf[$a] = $conf['conf_' . $a];               

    print_r ($conf);
    print_r ($finalconf);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:08:51.447

你可以试试

```
$list = array();
foreach($_GET as $key => $data)
{
    (strpos($key,"conf_") === 0) AND $list[ltrim(strstr($key,"_"),"_")] = $data ;
}
var_dump($list); 
```

输出

```
array
  1 => string 'data' (length=4)
  2 => string 'data' (length=4)
  3 => string 'data' (length=4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:31:30.193

如果您使用表单提交（例如，而不是使用 javascript），则可以通过将“conf”输入元素转换为数组来使其更容易。

```
<input name="conf[]" ... >
<input name="conf[]" ... >
<input name="conf[]" ... > 
```

提交后，这些将作为表单中的数组提供；

```
$_GET['conf'] = array('foo', 'bar', 'baz') 
```

**这仅在您提交html 表单**时才有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:21:36.437

试试这个代码：

```
$conf = array();
function check( $key ) {
   if( preg_match( '/conf_([0-9]+)/i', $key, $matches ) ) {
        return $matches[ 1 ];
   } else {
        return false;
   }
}

foreach( $_GET as $key => $val ) {
   $index = check( $key ) ;
   if( $index !== false ) {
       $conf[ $index ] = $val;
  }
} 
```

# php - 语法错误，意外的 T_ELSE

> ID：12856700
> 
> 赞同：0
> 
> 时间：2012-10-12T10:04:26.510
> 
> 标签：php

您能看出我会收到意外 T_ELSE 错误的任何原因吗？我一定是瞎了。。

```
<?php
//Check if form was submitted
if(isset($_POST['submit']))
{   
    //Form was submitted.
    if($_POST['paypalemail'] != '');
    {
        //An email was submitted.
    } 
    else
        {
            //There was nothing in the field. Tell them.
            echo "<script language=\"javascript\">alert('The field was left empty. Please insert your PayPal email address and try again.');</script>";
        }
} 
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T10:05:25.697

你有一个 ; 如果之后。只需删除它，你会没事的......;）

```
if($_POST['paypalemail'] != ''); //<-- Remove this ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:07:19.610

您必须删除第`;`6 行，如下所示

```
if($_POST['paypalemail'] != '')
    {
        //An email was submitted.
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T10:06:06.273

请更改脚本

```
if($_POST['paypalemail'] != '');
{
     //An email was submitted.
} 
```

至

```
if($_POST['paypalemail'] != '') 
{
    //An email was submitted.
} 
```

您在 if 循环的末尾输入了分号。请删除它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T10:05:57.740

你的 if 结尾有一个分号

```
if($_POST['paypalemail'] != ''); <--- 
```

# c++ - 应用程序崩溃 C++/MFC 的通用日志

> ID：12856702
> 
> 赞同：0
> 
> 时间：2012-10-12T10:04:31.700
> 
> 标签：c++, mfc

我们有一个问题，我正在寻找方向。我们有一个旧的基于 MFC 的应用程序，由于各种原因，该应用程序有时会在一些奇怪的情况下间歇性地崩溃。甚至使用我们的应用程序并遇到这些崩溃的客户也很难确定崩溃的模式。所以，我有一个想法，如果我们可以有一种机制，我们可以在应用程序崩溃时生成日志。例如，调用堆栈或该日志中的任何其他信息。我知道，在这种情况下，我们可以使用故障转储，但我觉得拥有日志是一个更好的选择。因此，这方面的任何帮助或信息都会非常有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:15:25.653

[您可以在此处](http://www.codeproject.com/Articles/5257/XCrashReport-Exception-Handling-and-Crash-Reportin)的链接中找到崩溃报告器的良好实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:25:47.213

编译发布版本时，请确保同时启用/MAP`DEBUG`和[/MAP 。](http://msdn.microsoft.com/en-us/library/k7xkk3e2%28VS.80%29.aspx)将您的二进制文件与您的文件一起`.map`存储，让您的客户运行此版本，直到产生崩溃。在事件查看器中，您将找到带有*崩溃偏移量*的崩溃日志。然后调试步骤进入您的代码 (F10) 并使用*崩溃偏移*以及一些[漂亮的技巧](http://home.hiwaay.net/~georgech/WhitePapers/MapFiles/MapFiles.htm)和[技巧](http://www.shcherbyna.com/?p=1234)来跳转（将`EIP`寄存器设置为......好吧，您必须用谷歌搜索一下）到崩溃发生的位置。您现在应该能够找到错误！

# .net - SystemInformation.FrameBorderSize 返回错误的大小

> ID：12856708
> 
> 赞同：1
> 
> 时间：2012-10-12T10:04:44.853
> 
> 标签：.net, winforms, debugging, visual-studio-2012

我在我的一个项目中发现了这个奇怪的问题。问题的确切原因是[SystemInformation.FrameBorderSize](http://msdn.microsoft.com/en-us/library/system.windows.forms.systeminformation.framebordersize.aspx)返回不同的值取决于应用程序是否在 VS2012 中在调试器下运行。我正在使用以下测试：

```
public partial class Form1 : Form {
    public Form1() {
        InitializeComponent();
    }
    protected override void OnLoad(EventArgs e) {
        base.OnLoad(e);
        this.label1.Text = SystemInformation.FrameBorderSize.ToString();
    }
} 
```

在调试器下它返回错误的大小`(4,4)`，但不是在调试器下它返回正确的值`(8,8)`。相关的 WinAPI 调用 ( [GetSystemMetrics](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724385%28v=vs.85%29.aspx) ) 得到相同的（不正确的）结果。

**更新：**
当项目的目标框架设置为“.Net Framework 3.5 客户端配置文件”并进行调试时，我们得到不正确的结果 (4,4)。当目标框架是“.Net Framework 4.5”时，无论是否调试，我们总是得到不正确的结果（4,4）。

有人会告诉我为什么会发生这种情况（此代码在同一台机器上的 VS2010/VS2008/VS2005 下正常工作）？VS2012 调试器或 .Net Framework 版本如何影响系统指标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T13:03:49.353

我在 msconnect 上找到了一个相关的错误报告：[回归：::GetSystemMetrics 提供不同的值](http://connect.microsoft.com/VisualStudio/feedback/details/753224/regression-getsystemmetrics-delivers-different-values)：

> 这是因为 VS 2010 与 VS 2012 中链接器的最低版本不同。AppCompat shim 基于链接器定义的最低支持操作系统，而不是应用程序编译时使用的 _WIN_32_WINNT 值。

与之相关的另一个问题：

1.  [当 FormBorderStyle 在表单代码隐藏中设置时，*.vshost.exe 和 *.exe 使用 VS 2012 以不同方式显示 WinForm 对话框](http://connect.microsoft.com/VisualStudio/feedback/details/759413/winform-dialogs-displayed-differently-by-vshost-exe-and-exe-using-vs-2012-when-formborderstyle-set-in-form-codebehind)
2.  [如果附加了调试器，则 SystemInformation.FrameBorderSize 属性返回错误值](https://connect.microsoft.com/VisualStudio/feedback/details/767777/the-systeminformation-framebordersize-property-returns-a-wrong-value-if-a-debugger-is-attached)

不幸的是，所有这些问题都**无法解决**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-30T23:10:04.730

如果您在受影响的平台上构建，请检查**Debugger.IsAttached**，如果返回**true ，则将****SystemInformation.FrameBorderSize**的值加倍。

像这样：

```
public static Size RealFrameBorder {
  get {
    return new Size(
      SystemInformation.FrameBorderSize.Width * (Debugger.IsAttached ? 2 : 1),
      SystemInformation.FrameBorderSize.Height * (Debugger.IsAttached ? 2 : 1)
    );
  }
} 
```

我知道这是一个黑客。但它有效。如果您在显示此内容的平台上*无法解决*问题。

# jsf - Liferay：如何获取 Web 内容的文档和媒体的相对路径

> ID：12856709
> 
> 赞同：0
> 
> 时间：2012-10-12T10:04:44.980
> 
> 标签：jsf, liferay, portlet

在**Web 内容**下，我将**结构**设置为具有应用程序字段：“**记录媒体**”。

通过这个字段，用户可以添加各种文件，然后显示在我的 .xhtml 中。

用户可以使此“**文档和媒体**”字段**可重复**以添加更多文件。

我如何遍历**所有添加的文件**并获取它们的相对路径。

如果我的 Documents and media 字段不可重复，我可以得到这样的相对路径：

```
 public String getWebContentTitle(String title, String nodeName) throws PortalException, SystemException {
        FacesContext context = FacesContext.getCurrentInstance();
        ThemeDisplay themeDisplay = (ThemeDisplay) context.getExternalContext().getRequestMap().get(WebKeys.THEME_DISPLAY);
        long groupId = themeDisplay.getScopeGroupId();
        JournalArticle article = JournalArticleLocalServiceUtil.getArticleByUrlTitle(groupId, formatUrlTitle(title));
        String languageKey = context.getExternalContext().getRequestLocale().toString();
        JournalArticleDisplay articleDisplay = JournalContentUtil.getDisplay(groupId, article.getArticleId(), article.getTemplateId(), languageKey, themeDisplay);
        JournalArticle journalArticle = JournalArticleLocalServiceUtil.getArticle(groupId, article.getArticleId());
        String myContent = journalArticle.getContentByLocale(languageKey);

        if (nodeName != null) {
            String nodeText=getParseValue(nodeName, journalArticle, myContent);
            return nodeText;
        } else
        {
            String ret=articleDisplay.getContent(); 
            return ret;
        }
    }

    private String getParseValue(String fieldname, JournalArticle article, String locale) {
        String nodeText = "";
        try {
              Document document = SAXReaderUtil.read(article.getContentByLocale(locale));
              Node node = document.selectSingleNode("/root/dynamic-element[@name='" + fieldname +"']/dynamic-content");
              nodeText = node.getText(); 
        } catch(Exception e){

        }
        return nodeText; 
    } 
```

此方法返回我添加的文档的相对路径（例如 horses.pdf）。

我怎样才能获得通过“文档和媒体字段”添加的更多文档的相对路径，这是可重复的并且已经定义了特定的变量名称（比如 HorsesPdfs？）

任何帮助将不胜感激！

![文档和媒体字段 - 可重复（图片上的绿色加号）](../Images/75594549df864e803dc60d234adf47b4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:53:35.857

你可以试试

```
DLAppLocalServiceUtil.getFileEntries(REPOSITORY_ID, FOLDER_ID), probably better than DLFileEntry as its the new approach that takes workflows in consideration. 
```

在哪里

```
REPOSITORY_ID = parent group, which is by default LR´s one GroupLocalServiceUtil.getGroup(COMPANY_ID, GroupConstants.GUEST).getGroupId()

COMPANY_ID = PortalUtil.getDefaultCompanyId(); //If just one instance, if not, better to play with CompanyLocalServiceUtil to match your Id 
```

对于文件夹 ID，您可以使用 LR´s Doc & Media 的 root 旧版本，即

```
FOLDER_ID = DLFolderConstants.DEFAULT_PARENT_FOLDER_ID; //or find it e.g DLAppLocalServiceUtil.getFolder( repositoryId, DLFolderConstants.DEFAULT_PARENT_FOLDER_ID, FOLDER_NAME).getFolderId();  if you programtically used addFolder(long userId, long repositoryId, long parentFolderId, String name, String description, ServiceContext serviceContext) 
```

# c# - 在后面的代码中向 Select 查询添加参数

> ID：12856723
> 
> 赞同：0
> 
> 时间：2012-10-12T10:05:35.570
> 
> 标签：c#, asp.net

我想用数据库中的数据填充 GridView，并让用户选择显示“Cursussen”表的哪一部分。他可以通过更改下拉框中的参数选择来做到这一点。

**错误：** 方法“Add”没有重载需要 2 个参数。

```
protected void Page_Load(object sender, EventArgs e)
{
    ConnectionStringSettings planner =
        ConfigurationManager.ConnectionStrings["CursusDatabase"];
    DbConnection connection = new SqlConnection(planner.ConnectionString);
    DbCommand cmd = connection.CreateCommand();
    cmd.CommandType = CommandType.Text;
    cmd.CommandText =
        "SELECT * FROM Cursussen " +
        "WHERE CursusId = @CursusId";
    cmd.Parameters.Add("CursusId", DropDownList1.SelectedValue); // <-- here

    connection.Open();
    DbDataReader rdr = cmd.ExecuteReader();
    DataTable planning = new DataTable();
    planning.Load(rdr);
    connection.Close();

    GridView1.DataSource = planning;
    GridView1.DataBind();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T10:10:22.203

编辑：

正如 Oded 在评论中指定的那样，我错过了您正在使用 DbCommand

```
var parameter = cmd.CreateParameter();
parameter.ParameterName = "CursusId";
parameter.Value = DropDownList1.SelectedValue;
cmd.Parameters.Add(parameter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:16:11.060

您正在使用`DbCommand`- 如果将其更改为`SqlCommand`，则可以执行以下操作：

```
cmd.Parameters.AddWithValue("CursusId", DropDownList1.SelectedValue); 
```

否则，您需要使用采用以下`Add`方法的方法`DbParameter`：

```
cmd.Parameters.Add(new DbParameter { ParameterName = "CursusId", 
                                     Value = DropDownList1.SelectedValue}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:16:21.367

```
Dim myParamList As New List(Of SqlParameter)()
Dim myParam As SqlParameter = Nothing

myParam = New SqlParameter("@X", SqlDbType.Int)
myParam.Value = Y
myParamList.Add(myParam) 
```

然后将参数列表添加到命令中。

# php - 使用表达式删除部分字符串

> ID：12856727
> 
> 赞同：0
> 
> 时间：2012-10-12T10:05:39.167
> 
> 标签：php, regex

这可能很简单但是我不是最好的表达式..我正在尝试从中获取以下字符串..

```
http://www.yoursite.com/offers/838?&SITEID=2172 
```

为此..使用将删除 ?&SITEID 和动态 id 的表达式会有所不同

```
http://www.yoursite.com/offers/838 
```

谁能建议最好/最简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:17:16.593

这是一个 URL，因此将其解析为一个，使用**[`parse_url()`](http://il.php.net/manual/en/function.parse-url.php)**.

```
$url = "http://www.yoursite.com/offers/838?&SITEID=2172";
$parts = parse_url($url);

$url = $parts["scheme"] . "://" . $parts["host"] . $parts["path"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:17:35.163

使用explode函数返回一个数组

```
$url=http://www.yoursite.com/offers/838?&SITEID=2172
$result=explode('?',$url)
print_r($result); 
```

**输出**

```
array
{
 [0]=>http://www.yoursite.com/offers/838
 [1]=>?&SITEID=2172
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T10:34:46.373

检查此功能：

```
$str = 'http://www.yoursite.com/offers/838?&SITEID=2172';

function remove_query_arg($var, $url = NULL){
    if(!$url){
        $url = $_SERVER['REQUEST_URI'];
    }
    $parsed_url = parse_url($url);

    $query_vars = explode('&', $parsed_url['query']);

    foreach($query_vars as $key => $value){
        $query_vars[$key] = explode('=', $query_vars[$key]);
        $query_variables[$query_vars[$key][0]] = $query_vars[$key][1];
    }

    if(is_array($var)){
        foreach($var as $value){
            unset($query_variables[$value]);
        }
    }
    elseif(is_string($var)){
        unset($query_variables[$var]);
    }

    $query_vars = array();

    foreach($query_variables as $key => $value){
        $query_vars[] = $key.($value !== NULL || !empty($value) ? '='.$value : '');
    }
    $query_str = '';
    $query_str = implode('&',$query_vars);

    return (isset($parsed_url['scheme']) && !empty($parsed_url['scheme']) ? $parsed_url['scheme'].'://' : '').$parsed_url['host'].(isset($parsed_url['path']) && !empty($parsed_url['path']) ? $parsed_url['path'] : '').(!empty($query_str) ? '?'.$query_str : '');
}

echo remove_query_arg('SITEID', $str); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T10:13:26.417

一个有效的 URL 只有一个`?`，所以你可以`explode`把它分成两部分

```
$url = "http://www.yoursite.com/offers/838?&SITEID=2172";
list($path, $query) = explode("?", $url, "2");
var_dump($path); 
```

输出

```
string 'http://www.yoursite.com/offers/838' (length=34) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T10:10:36.850

```
$url = "http://www.yoursite.com/offers/838?&SITEID=2172"; 
$str = substr($url, strpos($url, 0, "?&SITEID"));
// $str results in "http://www.yoursite.com/offers/838" 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-12T10:09:50.963

如果您想保留之前的部分，`?`您可以搜索

```
^(.+?)(\?&SITEID|$) 
```

并替换为

```
$1 
```

*您从行* `^`首到第一行非贪婪地搜索，`?&SITEID`而忽略其余部分。如果没有`?&SITEID`找到，则通过到达字符串的末尾来获得整行`$`

`|`是告诉正则表达式“在`?&SITEID`字符串的第一个或结尾处停止”的 OR 运算符

**编辑**：

在您解释需要保留其余查询字符串的评论之后，我建议您采用不同的方法：find

```
&?SITEID=[^&\s]+ 
```

存在

*   `&?`字符串开头的可选 &
*   `SITEID=`您要查找的字符串后跟
*   `[^&\s]+`任意数量的非`&`、非空格字符

并将其从字符串中删除。但是，在这种情况下，我会采用其他答案中建议的非正则表达式、特定于 url 的方法。

# iphone - 以编程方式为 UIView 添加目标

> ID：12856728
> 
> 赞同：7
> 
> 时间：2012-10-12T10:05:42.533
> 
> 标签：iphone, ios, cocoa-touch, uiview

在我看来，我想添加一个在单击视图时应该触发的目标。我可以通过 IB 来做同样的事情，或者即使在代码中我也可以为按钮做同样的事情。但是我不知道如何以编程方式为 UIView 做到这一点。

任何人以前都这样做过。

帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T10:14:30.377

要单击 a`UIView`您必须使用`UIGestureRecognizer`或`UITouch`。这只会有助于促使采取行动。有`UIButton`一个选择器方法，而 UIView 没有任何这样的方法。此外，这对于`UIImageViews`等也是相同的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-17T13:45:10.423

您可以使用`UIGestureRecognizer`.

第1步：

在视图控制器中添加您`UIView`的属性

```
@property (strong, nonatomic) IBOutlet UIView *yourView; 
```

第2步：

为您的 UIView设置`UIGestureRecognizer`。

```
- (void)viewDidLoad {
    [super viewDidLoad];
    UIGestureRecognizer *gesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleGesture:)];
    [self.yourView addGestureRecognizer:gesture];
} 
```

第 3 步：

处理 UIView 上的点击。

```
- (void)handleGesture:(UIGestureRecognizer *)gestureRecognizer {
    //to get the clicked location inside the view do this.
    CGPoint point = [gestureRecognizer locationInView:self.yourView];
} 
```

请记住，A UIGestureRecognizer 将与单个视图一起使用。

# javascript - 如何使用规则验证用户名

> ID：12856730
> 
> 赞同：-3
> 
> 时间：2012-10-12T10:05:43.467
> 
> 标签：javascript, jquery

我为 ma 应用程序用户名设置了一些规则，例如最少 3 个字符和最多 20 个字符，并且只允许使用小写字母和数字，并且只允许 2 个特殊章程，例如 . 而且_也只有一次。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:08:29.580

使用正则表达式：

```
if(username.match(/^[a-z0-9_\.]{3,20}$/)==null) alert('Error!'); 
```

# java - 之间的区别 .class 和 this（代表 )

> ID：12856732
> 
> 赞同：2
> 
> 时间：2012-10-12T10:05:47.663
> 
> 标签：java, map, hashmap

我`class`喜欢`Test`。我`class`作为论据传递。

下面的代码有什么区别：

```
 Map maps = new HashMap();
    maps.put("ARG_ID",Test.class); 
```

和

```
 Map maps = new HashMap();
     maps.put("ARG_ID",this); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T10:07:31.713

好吧，第一种形式传递了对`Class`. 第二种形式传递`this`引用 - 这是一个类的*实例*......它们是两个完全不同的对象。

如果您使用泛型来描述您的键/值类型应该是什么，它会让您尝试做的事情更加清晰，并且编译器会阻止您尝试添加错误类型的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T10:07:21.217

`Test.class`是`Class`表示 的对象`Test`，它用于反射和泛型。`this`，当在类中引用时，是您正在处理的类的当前实例。

# iphone - 我想在 UIImageView 上应用动画（通过 UIBuilder 创建）

> ID：12856734
> 
> 赞同：0
> 
> 时间：2012-10-12T10:05:52.903
> 
> 标签：iphone, objective-c, ios, xcode

我已经添加了一个 UIView，在那个 UIImageView 上使用 UIBuider，现在我想在那个 imageView 上应用动画，所以我拍摄了一组图像并通过这段代码将该数组添加到 imageView

```
 NSArray *animationArray=[[NSArray alloc]init];
        animationArray=[NSArray arrayWithObjects:
                        [UIImage imageNamed:@"rabbit1.png"],
                        [UIImage imageNamed:@"rabbit2.png"],
                        [UIImage imageNamed:@"rabbit3.png"],
                        [UIImage imageNamed:@"rabbit4.png"],
                        [UIImage imageNamed:@"rabbit5.png"],
                        [UIImage imageNamed:@"rabbit6.png"],
                        [UIImage imageNamed:@"rabbit7.png"],
                        [UIImage imageNamed:@"rabbit8.png"],
                        [UIImage imageNamed:@"rabbit9.png"],
                        [UIImage imageNamed:@"rabbit10.png"],
                        [UIImage imageNamed:@"rabbit11.png"],
                        [UIImage imageNamed:@"rabbit12.png"],
                        [UIImage imageNamed:@"rabbit13.png"], nil];

        tempImageView.animationImages=animationArray;
        tempImageView.animationDuration=2;
        tempImageView.animationRepeatCount=0;
        [tempImageView startAnimating]; 
```

tempImageView 是使用 UIBuider 创建的，但它没有工作，没有显示任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:29:32.117

故事板自动布局中似乎有一个错误..我发现同样没有结果..

通过代码尝试它，这有效..

```
mainImageView = [[UIImageView alloc]init];
    NSArray *animationArray = [[NSArray alloc]init];
    animationArray = [NSArray arrayWithObjects:[UIImage imageNamed:@"first.png"],[UIImage imageNamed:@"second.png"],[UIImage imageNamed:@"first.png"],[UIImage imageNamed:@"second.png"],[UIImage imageNamed:@"first.png"],[UIImage imageNamed:@"second.png"],[UIImage imageNamed:@"first.png"],[UIImage imageNamed:@"second.png"],[UIImage imageNamed:@"first.png"],[UIImage imageNamed:@"second.png"], nil]; //add your images here

    [mainImageView  setFrame:CGRectMake(50,50,100,100)];
    mainImageView.animationImages = animationArray; //mainImageView is   imageview
    mainImageView.animationDuration = 2;
    mainImageView.animationRepeatCount = 0;
    [mainImageView startAnimating];

      [self.view addSubview:mainImageView]; 
```

# c# - 获取成像设备

> ID：12856741
> 
> 赞同：2
> 
> 时间：2012-10-12T10:06:05.633
> 
> 标签：c#, webcam, device-driver

**我可以在 Windows 8 中的设备管理器 -> 成像设备**中列出网络摄像头。如何使用 C# 获取此列表？以及如何从这些项目中获取流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:14:06.163

您可以查看[DirectX.Capture 类库](http://www.codeproject.com/Articles/3566/DirectX-Capture-Class-Library)。

# android - 应用程序之间的交互

> ID：12856744
> 
> 赞同：-1
> 
> 时间：2012-10-12T10:06:14.203
> 
> 标签：android

大家好，我正在攻读计算机科学的 Mphil……我发现移动应用程序之间的互操作性很难实现…………所以我将尝试在我的 Mphil 甜点中回答这个问题…… ......所以想做一些地面工程......如果你们能帮助我实现它，那将是一种荣幸......

1.  同一设备上的不同应用程序可以交互吗？
2.  有没有现有的方法可以做到这一点？如果有，它们是什么？
3.  这在工业中是常见的吗？
4.  如果是这样，所涉及的间接费用是多少？
5.  以前有人试过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:18:42.853

当然，您可以使用绑定服务和 Android 接口定义语言 (AIDL)。 [绑定服务](http://developer.android.com/guide/components/bound-services.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:29:29.780

其中一种方法是在两端使用[**BroadcastReceiver来交换信息。**](http://developer.android.com/reference/android/content/BroadcastReceiver.html)在应用程序之间共享日期是一种常用的技术。

使用[**内容提供者**](http://developer.android.com/guide/topics/providers/content-providers.html)可能是您考虑的另一种选择。

据我所知，这两种是在应用程序之间共享数据的最简单方式。

# javascript - jQuery Chosen 插件 - 第一个选项不会触发更改事件？

> ID：12856750
> 
> 赞同：2
> 
> 时间：2012-10-12T10:06:26.470
> 
> 标签：javascript, jquery, jquery-chosen

所以我使用了相当不错的 jQuery 插件 Chosen；[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

我正在做的实际上是以“非此即彼”的方式使用两个选择样式的下拉菜单，即用户需要从一个或另一个中选择一个选项。

因此，当用户选择其中一个下拉菜单时，另一个（通过 javascript）将设置回其默认禁用值。

两个下拉菜单都由一个隐藏参数支持，以实际保存所选值，无论它来自哪个下拉菜单。`.chosen().change()`这是通过在事件的两个下拉列表中都有侦听器来填充的。

唯一的问题是，当用户在任一下拉列表中选择第一个选项之一时，它似乎不会触发“更改”事件，我猜因为这似乎是已选择的选项，因此不是“更改”。但是两个下拉菜单的实际第一个选项（即在 jsp 中）是一个禁用选项，带有正常的“请选择”文本。

即使已经选择了所选选项，是否有办法触发更改事件？或者是否只有一个“选择”事件即使没有发生变化也会触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:30:59.623

您可以在 jquery 对象上使用 .trigger("change") 或 .change() 来手动触发更改事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:21:59.573

这对我有用：

```
//Get the dynamic id given to your select by Chosen
var selId = $('your_select').attr('id');
//Use that id to remove the dynamically created div (the foe select box Chosen creates)
$('#'+ selId +'_chzn').remove();
//Change the value of your select, trigger the change event, remove the chzn-done class, and restart chosen for that select
$('#'+selId).val('your_new_value').change().removeClass('chzn-done').chosen(); 
```

简而言之，您正在为您的选择选择硬重置。可能有比这更简单的方法，但这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-22T09:27:04.490

我只是在使用 Select2 插件（重制选择插件）时遇到了同样的问题。

当我将 Combobox 声明为 select2 时，我忘记了“allowClear: true”这一行。

```
$('#selectLabelMap').select2({
                   placeholder: "Sélectionner un label",                 
                   allowClear: true    // <=  don't forget "allowClear: true (re-init the comboBox)
               } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-29T11:50:01.943

当（DOM）准备好时第一次触发更改。

```
 jQuery(function ($) {

        $('#myselect').trigger("change");   

    }); 
```

# c - 使用 fclose 功能的原因

> ID：12856753
> 
> 赞同：1
> 
> 时间：2012-10-12T10:06:31.867
> 
> 标签：c, file, file-io

> **可能的重复：**
> [在 C 中没有 fclose 的 fopen](https://stackoverflow.com/questions/3353214/fopen-without-fclose-in-c)

为什么我需要在**C中使用****fclose**函数？每次在 c 中打开文件时我都会关闭文件，仍然只是为了了解我想知道如果我不使用**fclose**函数会发生什么？如果有人因不使用**fclose**而遇到问题，请分享。

 ******* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T10:10:57.240

如果您不关闭文件，您将耗尽更多文件的资源。在 Linux 中，每个进程默认打开 1024 个文件，这是因为“文件句柄”是表的索引（即索引数组）。我不知道它在 Windows 上是如何处理的，但如果你只是继续打开文件但不关闭它们，这个过程迟早会耗尽资源。

另一方面，如果您打开一个在程序的整个生命周期中都使用的文件，则无需一直打开/关闭它。打开一次并保持打开状态。此外，退出进程时所有打开的文件都将关闭，因此如果您的程序只是对文件进行一些快速处理然后退出，则不必*关闭*它。但是，如果我正在查看代码，我仍然会添加关于它的注释，如果您分配资源（内存、文件、其他东西），我认为您应该在完成后释放它，即使它是由系统自动完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:10:52.040

任何文件都是**i/o 源**，因此类似于任何源：**使用它之后，释放它**。
`fclose`出于这个原因使用函数，它允许文件被另一个管理器/处理器等使用。
如果您不使用 fclose 函数，这可能会导致另一个进程/管理器无法访问给定文件的情况

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:12:02.513

如果您不关闭文件，则可能不会将所有信息存储在内存中。文件也不能被其他人打开******

# javascript - 使用 jQuery 添加/删除选择选项在 IE 中不起作用

> ID：12856759
> 
> 赞同：1
> 
> 时间：2012-10-12T10:06:51.967
> 
> 标签：javascript, jquery, html

选择第一个下拉列表时，我正在尝试动态更新第二个下拉列表中的选项。它在 FF、Chrome 等中运行良好，但在 IE 8/9 中无法运行，我不明白为什么。这是一个[jsFiddle](http://jsfiddle.net/artzone/FrMr7/)

```
<div class="custom-field">            
    <label for="dropdown1">Select country:</label>
    <select id="dropdown1" name='properties[country]'>
        <option value="USA">USA</option>
        <option value="JAPAN">JAPAN</option>
    </select>
</div>
<div class="custom-field">            
    <label for="dropdown2">Select font:</label>
    <select id="dropdown2" name='properties[font]'>
        <option class="us" value="font1">Font1</option>
        <option class="us" value="font2">Font2</option>
        <option class="us" value="font3">Font3</option>
        <option class="jp" value="font4">Font4</option>
        <option class="jp" value="font5">Font5</option>
        <option class="jp" value="font6">Font6</option>              
    </select>
</div>  

function showFont(fontOpt){
    if (jQuery('#dropdown1').val() === 'USA'){
        var showOptions = fontOpt.filter('.us');
    } else {    
        var showOptions = fontOpt.filter('.jp');
    }
    jQuery('#dropdown2').html(showOptions);
    jQuery('#dropdown2').prop('selectedIndex', 0);
}

$(document).ready(function() {
    // get the child elements of font dropdown
    var fontOptions = $("#dropdown2").children('option');    
    $("#dropdown2").html('');

    showFont(fontOptions);

    $('#dropdown1').on("change", function(e){
        showFont(fontOptions);
    });    

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T10:13:39.883

```
$("#dropdown2").html(''); 
```

问题出在这条线上。删除此行，您的代码将正常工作。

取而代之的是，您可以使用

```
$("#dropdown2").children('option').remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:13:22.607

这是你上面的HTML代码吗？如果是这样，那么您需要将**script = 'text/javascript'**从*函数 showFont*放到末尾。这使计算机将代码读取为 javascript 而不是我认为您要求它执行的 HTML。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:15:53.963

在 jquery 中注释以下行；

```
//$("#dropdown2").html(''); 
```

它会起作用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T10:58:54.520

您可以使用以下简短方法：

```
 var fontOptions = $("#dropdown2").children('option');    
 $("#dropdown2").html(''); 
```

代替

```
var fontOptions = $("#dropdown2").children('option').remove(); 
```

# c# - 从 C#.net 中的字典中检索字典

> ID：12856760
> 
> 赞同：0
> 
> 时间：2012-10-12T10:06:56.787
> 
> 标签：c#, dictionary

我有一本这样的字典

```
{
  "A" : {
    "A1" : {
      "er" : false,
       "hy" : false,
       "fv" : false,
       "fr" : false
          },
     "A2" : {
       "fr" : false,
       "ty" : false,
       "ty" : false,
          },
   "B" : {
     "B1" : {
       "er" : false,
       "hy" : false,
       "fv" : false,
       "fr" : false
         },
     "B2" : {
      "fr" : false,
      "ty" : false,
      "ty" : false,
   },
  }
} 
```

我正在尝试将 A1 和 A2 字典的值作为单独的字典检索

我努力了

```
 Dictionary<string, Dictionary<string, object>> dict =
 jss.Deserialize<Dictionary<string, Dictionary<string, object>>>json.ToString());

       Dictionary<string, object> dict1 = dict["A"];

 Dictionary<string, object> dict2 = dict1["A1"];//error here 
```

无法将类型“object”隐式转换为“System.Collections.Generic.Dictionary”。存在显式转换（您是否缺少演员表？）

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:10:19.440

我认为这将解决它：

`Dictionary<string, object> dict2 = (Dictionary<string, object>) dict1["A1"];`

# php - PHP 文件创建和即时下载

> ID：12856761
> 
> 赞同：1
> 
> 时间：2012-10-12T10:06:59.603
> 
> 标签：php, xml, html

嘿伙计们，我想知道如何下载由 PHP 动态生成的文件。我要下载的文件是 XML 文件。目前，我的代码所做的只是创建一个包含要放入文件中的所有数据的长字符串，然后它只是将字符串写入文件并使用 .XML 扩展名保存它。这目前正在使用网站副本在我的本地计算机上运行，​​但由于读/写权限，它无法在 Web 服务器上运行。

那么有没有一种方法可以即时生成文件以立即下载而不将其存储在网络服务器上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T10:08:34.503

如果相同的脚本正在生成文件，您可以`echo`或`print`将内容放在页面上并用于`header`强制下载。

```
<?php
    header('Content-type: text/xml');
    header('Content-Disposition: attachment; filename="file.xml"');

    echo $XMLString;
?> 
```

如果您有不同的文件用于下载文件，只需使用`file_get_contents`并输出文件数据！

你应该这样做:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T10:09:58.643

只需在文档顶部给出这两件事：

```
<?php
    header('Content-type: text/xml');
    header('Content-Disposition: attachment; filename="myxml.xml"');
?> 
```

# ruby-on-rails - Rails - 使用 jBuilder 创建 json 文件

> ID：12856763
> 
> 赞同：2
> 
> 时间：2012-10-12T10:07:02.717
> 
> 标签：ruby-on-rails, json, jbuilder

我正在尝试使用 jBuilder 创建一个 json 文件（根据timeline.verite.co 时间线要求）-但结果只是空白，而不是一对{}。该文件的 html 版本正在获取正确的信息，所以这不是因为当前用户没有任何事件。有人知道为什么吗？谢谢！

这是文件（`@events`指当前用户的所有事件）：

```
json.key_format! :camelize => :lower
Jbuilder.encode do |json|
    json.timeline do
        json.headline current_user.first_name
        json.type "default"
        json.text "A Timeline"
        json.start_date
        json.array!(@events) do |event|
            json.start_date event.start_date
            json.end_date event.end_date
            json.headline event.headline
            json.text event.text
            json.asset do
                json.media event.media
                json.credit event.credit
                json.caption event.caption
            end
        end
    end
end 
```

更新：

我尝试了一些非常简单的方法，但文件仍然是空白的。我不知道为什么！！

这仍然给出了一个空白文件：

```
Jbuilder.encode do |json|
    json.id current_user.id
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T02:06:58.813

我不需要在视图文件中编码为 json。您的视图文件应如下所示：

```
json.id current_user.id
json.name current_user.name 
```

# iphone - scrollview sub uiscrollviews uiimageview viewForZoomingInScrollView

> ID：12856770
> 
> 赞同：0
> 
> 时间：2012-10-12T10:07:17.177
> 
> 标签：iphone, objective-c, ios, uiscrollview, uiscrollviewdelegate

我有主`UIScrollView`

```
mainScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 440)];
mainScrollView.pagingEnabled = YES;
imageScrollView.contentSize = CGSizeMake(320 * [myImage count], 440); 
```

, 其中包含许多 sub `UIScrollView`, 每个 sub`UIScrollView`包含`UIImageView`

```
for (int i = 0; i < [myImage count]; i++)
{
    imageView = [[UIImageView alloc] init];
    [imageView setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight];

    NSString *strimage = [myImage objectAtIndex:i];
    NSURL *imageUrl = [NSURL URLWithString:strimage];

    [imageView setImageWithURL:imageUrl placeholderImage:[UIImage imageNamed:@"Placeholder"]];

    imageView.frame = CGRectMake(0, 0, 320, 440);

    subScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(320 * i, 0, 320, 440)];
    subScrollView.contentSize =
    CGSizeMake(imageView.frame.size.width, imageView.frame.size.height);
    subScrollView.pagingEnabled = YES;
    subScrollView.showsHorizontalScrollIndicator = NO;
    subScrollView.showsVerticalScrollIndicator = NO;
    subScrollView.delegate = self;
    subScrollView.bouncesZoom = YES;
    subScrollView.clipsToBounds = YES;

    subScrollView.maximumZoomScale = 3.0;
    subScrollView.minimumZoomScale = 1.0;
    subScrollView.zoomScale = 1.0;

    [mainScrollView addSubview:subScrollView];
    [subScrollView addSubview:imageView];
} 
```

，我实现

```
#pragma mark UIScrollViewDelegate methods

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return imageView;
} 
```

问题是当我放大时`UIImageView`，假设有 3 个 sub `UIScrollView`，最后一个 sub`UIScrollView`可以`UIImageView`正常缩放，但是当我放大另外 2 个时，它会缩放 sub`UIScrollView`而不是`UIImageView`，并且它会影响最后一个 sub`UIScrollView`也缩放，我是不是做错什么了吗？

我怀疑在 viewForZoomingInScrollView 中，它只是最后一次缩放`UIImageView`（最后一个 sub `UIScrollView`）。

先感谢您 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:06:18.970

最后我想通了，我只需要`UIImageView`在放大特定的`UIImageView` In - (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView 时更新我的​​，如下所示：

```
#pragma mark -
#pragma mark UIScrollViewDelegate methods

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    for (UIImageView *iv in [scrollView subviews]) {
        imageView = iv;
        break;
    }

    return imageView;
} 
```

希望它可以帮助像我一样在这一点上挣扎的人，所以您不必浪费时间:)。

# php - 使用移动网页检测设备上是否已安装 Android 应用程序 - PHP 和 JS

> ID：12856773
> 
> 赞同：15
> 
> 时间：2012-10-12T10:07:23.850
> 
> 标签：php, javascript, android, jquery

我有这样的要求，Android Pit 应用商店已经实现了类似的要求。

我需要使用移动网页（PHP 和 JS）检查 Android 应用程序是否已安装在设备上，如果已安装，请立即启动该应用程序。

这些是安卓坑使用的中间页面。

**未安装应用程序时**- [http://www.androidpit.com/en/android/market/app-center-mobile?pname=com.ocito.laredoute](http://www.androidpit.com/en/android/market/app-center-mobile?pname=com.ocito.laredoute)

**当应用程序已经安装时**- [http://www.androidpit.com/en/qrdl/com.mobage.ww.a692.Bahamut_Android](http://www.androidpit.com/en/qrdl/com.mobage.ww.a692.Bahamut_Android)

有谁知道如何实现这个？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-12T11:21:43.057

幸运的是，出于明显的隐私原因，这是不可能的。

您可以做的最接近的做法是在应用程序中拥有一个具有`<intent-filter>`某种 URL 结构的活动，并在移动网站中拥有一个指向匹配 URL 的链接。

如果用户单击链接并安装了应用程序，则该活动将成为用户的选择器选项。

如果用户单击该链接但未安装应用程序，或者他们从选择器中选择坚持使用 Web 浏览器，则将显示该 URL 处存在的任何网页（例如，如何下载应用程序的说明）。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-12-03T14:54:07.597

有一种方法可以实现这一点。找到[了这个](https://stackoverflow.com/questions/6888867/detect-from-browser-if-a-specific-application-is-installed-in-android/12901352#12901352)答案

出于安全和隐私原因，您无法检测是否安装了特定应用程序。但是，如果已安装，您可以打开应用程序，如果未安装，您可以打开其 Google Play 页面。

为此，您必须在应用程序的主要活动上创建一个意图过滤器，以便在调用给定 URL 时打开它。像这样：

```
<activity android:name=".MainActivity >
    <intent-filter>
        <data
            android:host="www.myurl.com"
            android:pathPrefix="/openmyapp"
            android:scheme="http" >
        </data>

        <action android:name="android.intent.action.VIEW" />

        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <category android:name="android.intent.category.VIEW" />
    </intent-filter>
</activity> 
```

说明：当用户导航到[http://www.myurl.com/openmyapp](http://www.myurl.com/openmyapp)时，如果安装了应用程序，则会创建一个意图并显示 Activity。

但是如果用户没有安装应用程序怎么办？然后你需要在你的[http://www.myurl.com/openmyapp/index.html](http://www.myurl.com/openmyapp/index.html)上创建一个重定向页面。当用户到达这个地址时，你的服务器必须重定向到 market://details?id=com.your.app.package。

这样，当用户导航到[http://www.myurl.com/openmyapp](http://www.myurl.com/openmyapp)后没有创建 Intent 时，Web 服务器将调用另一个 URL。反过来，该 URL 将直接在应用程序页面上打开设备上的 Google Play。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-09T21:22:24.263

的情况下

```
<data
    android:host="www.myurl.com"
    android:pathPrefix="/openmyapp"
    android:scheme="http" >
</data> 
```

它会询问用户通过哪种方式打开内容。

[![在此处输入图像描述](../Images/1db4a17d2fd41b90936626afaa1ffc81.png)](https://i.stack.imgur.com/nrr9S.jpg)

为避免这种情况或避免将您的应用程序连接到某个 url，您可以使用 PHP 和 JS 做另一个技巧来实现它。

1.  您必须在应用的主要活动上创建一个意图过滤器，如下所示：

```
<intent-filter android:label="filter_react_native">
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="MyCustomScheme" android:host="MyCustomHost" />
</intent-filter> 
```

2.  创建 PHP 文件`redirect_to_app.php`，如果用户安装了应用程序，该文件将起作用。

```
<?php
header('Location: MyCustomScheme://MyCustomHost'); 
```

3.  `check_redirect_to_app.php`创建必须为尚未安装您的应用程序的用户显示的HTML/PHP 文件。

```
...
<a href="https://play.google.com/store/apps/details?id=YOUR_APP_PACKAGE_NAME">Please install the application</a>
...

<script>
    location.href = '...redirect_to_app.php';
</script> 
```

4.  将用户重定向到`check_redirect_to_app.php`. `check_redirect_to_app.php`将尝试`MyCustomScheme://MyCustomHost`自动重定向到。如果找不到这样的应用程序，它将继续显示`check_redirect_to_app.php`内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-23T07:09:06.913

您可以使用手机上的浏览器执行此操作

```
 intent://scan/#Intent;scheme=clashofclans;package=com.supercell.clashofclans;S.browser_fallback_url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.supercell.clashofclans&amp;%26referrer%3Dkinlan;end

 intent://scan/#Intent;scheme=vnd.youtube://www.youtube.com/watch?v=QXhoNI4O99A;package=com.google.android.youtube;S.browser_fallback_url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.google.android.youtube&amp;%26referrer%3Dkinlan;end 
```

[你也可以试试这个](https://stackoverflow.com/questions/29250152/what-is-the-intent-to-launch-any-website-link-in-google-chrome)

有问题的应用程序必须具有 AndroidManifest 部落冲突// 或其他方案中的方案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-14T05:27:37.680

有一个更好的把戏。您将查看 URL 是否返回 404，表示未找到。如果没有安装应用程序，URL 将不起作用。

# mysql - 迁移数据，连接字符集

> ID：12856780
> 
> 赞同：0
> 
> 时间：2012-10-12T10:07:42.617
> 
> 标签：mysql, character-encoding, database-connection, mysqldump

***（编辑 2：谢天谢地，信息已经进来。它只能通过 ODBC 访问，我可以在其中设置连接*字符集以匹配我为 MySQL 数据库设置的任何内容。所以整个问题简化为：如果我同时设置 ODBC 和数据库到 UTF-8，我完成了吗，它不会破坏数据吗？（服务器/数据库字符集是 latin1）。我很乐意接受简单的是或否，并简要解释原因。**

--------------- 其余的是原始背景信息，不再相关。--------------

（编辑：澄清：数据已经正确导入，这只是关于*连接*字符集的问题。）

我正在尝试决定是否将***连接***字符集更改为我新创建的 MySQL 数据库的排序规则和服务器。

它的服务器和排序规则字符集设置为与运行 MySQL 4.1 - latin1的*旧服务器相同。*一些数据已经用 mysql.exe 导入并被验证为正确。

当服务器管理员安装 MySQL 5.5 并在某个时间点创建新数据库时，连接字符集没有从默认的 UTF-8 更改。

旧服务器报告没有为排序规则或连接字符集设置变量，所以我的问题是：（我假设当前设置 UTF-8 应该是最正确的路线）

*   在哪里寻找将其设置为的内容（经验提示）
*   如果我选择将其设置为 latin1，如果脚本写入数据库某处可能会再次损坏数据
*   或者它是否可以随意打开和关闭而不会损坏数据，即我是否可以推迟决定。

数据库服务器管理员没有给我答案的信息，并且由于旧数据库中缺少信息，我想确保但不能。

这是一个 1GB 的 .sql 文件，需要在 TextPad 中逐步编辑才能导入，因此了解这是否是关键设置可以节省时间。

目前我最好的计划是不更改设置、导入数据和备份 - 如果脚本由于连接字符集设置不正确而损坏数据，则恢复备份。你觉得这个计划有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:12:45.033

哦，天哪，我真的应该花更多时间阅读您的问题，是的，拥有数据库的全部意义在于数据的持久性，如果由于不正确的字符集问题而继续恢复备份，则数据不会持久，更好的计划是更新您的脚本，以便所有人都使用相同的字符集，并将数据库中不在该字符集中的任何字段转换为相同的字符集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:01:01.467

迁移数据时，

1.  将目标数据字符集+排序规则设置为与古代 MySQL 数据库版本相同。您可能必须将 Type= 更改为 Engine=，timestamp(xx) 更改为 timestamp，以及*一些*float(xx,xx) 以使用 f.ex 在巨大的 sqldump 中加倍。使用 mysql.exe 导入之前的 TextEdit

2.  找出连接将写入表的内容（如果有）以及它们的源字符集是否与数据库的不同。如果是这样，请修改数据源的连接属性，以便连接将源数据转换为数据库字符集。

# mysql - 当同名表已经存在时，使用 mysql innodb 重命名大表的最佳实践

> ID：12856783
> 
> 赞同：3
> 
> 时间：2012-10-12T10:07:46.067
> 
> 标签：mysql, sql, performance, database-performance, sqlperformance

我使用 Mysql 5.5 .. + INNODB 和 windows 服务器。

案例（让它简单然后真实案例）：

我有 2 个 1GB 的表，名称为`new_car`1GB `car`。

我每 10 小时`car`用表替换表，`new_car`而不是手动（通过代码自动） - 快速完成（真实网站数据）很重要。

我读过（说在innodb中删除它的问题）：[http ://www.mysqlperformanceblog.com/2011/02/03/performance-problem-with-innodb-and-drop-table/](http://www.mysqlperformanceblog.com/2011/02/03/performance-problem-with-innodb-and-drop-table/)

解决方案1：

```
DROP TABLE car;
RENAME TABLE new_car TO car; 
```

解决方案2（最终删除 - 也许它不会阻止表访问在删除期间发生的情况）：

```
RENAME TABLE car TO temp_car;
RENAME TABLE new_car TO car;
DROP TABLE temp_car; 
```

解决方案3（快速删除表并创建空表然后可能会非常快地删除操作）：

```
TRUNCATE TABLE car;
DROP TABLE car;
RENAME TABLE new_car TO car; 
```

解决方案4：

```
RENAME TABLE car TO temp_car;
RENAME TABLE new_car TO car;
TRUNCATE TABLE temp_car;
DROP TABLE temp_car; 
```

哪个解决方案是最好的，为什么或者请写其他更好的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T15:34:32.057

我不明白你为什么要放弃这张桌子。你总是想要那两张桌子，你会（我假设要重新填满 New_Car 桌子......

```
RENAME TABLE car TO temp_car;
RENAME TABLE new_car TO car;
TRUNCATE TABLE temp_car;
RENAME TABLE temp_car TO new_car; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T00:24:51.613

```
RENAME TABLE car TO temp_car, new_car TO car;
TRUNCATE TABLE temp_car;
DROP TABLE temp_car; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-03T20:16:01.730

如[重命名表](https://dev.mysql.com/doc/refman/8.0/en/rename-table.html)文档中所述：

> RENAME TABLE 重命名一个或多个表。重命名操作从左到右执行。

您可以在单个查询中执行多个表重命名，而不是运行多个重命名查询，如下所示：

```
RENAME TABLE car TO temp_car, new_car TO car
DROP TABLE temp_car 
```

尽管请注意这样的表重命名可能会导致几秒钟的锁定/延迟问题。这取决于您的应用程序是否可以接受。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-10T20:58:35.367

使用 replace into 大约需要 5 分钟或使用 Load infile 来批量处理

# asp.net-mvc - 在 ASP.NET MVC4 中存储访问令牌的安全位置

> ID：12856784
> 
> 赞同：1
> 
> 时间：2012-10-12T10:07:49.107
> 
> 标签：asp.net-mvc, asp.net-mvc-4, security, access-token, formsauthenticationticket

我已经成功登录到 Web Api 并且收到了“ **accessToken** ”。现在我需要多次使用该 accessToken 来调用该公共 WebApi。在 ASP.NET MVC4 应用程序**中存储 accessToken**的最佳位置在哪里？

如果我将 accessToken 存储到会话怎么办？如果我将 accessToken 存储到 FormsAuthenticationTicket 中的 userData 怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:46:48.463

APS.NET Session 存储在服务器上，因此这在安全性方面是最好的。表单身份验证票的用户数据部分也是一个好地方。表单身份验证会自动加密票证，因此您也应该没问题。表单身份验证 cookie 的优点是您无需担心分布式环境。例如，如果您在网络场中运行，您将不得不使用进程外会话状态，而 cookie 位于客户端上。这真的取决于你。两种解决方案都足够好。

# android - 确定 android 应用程序是否已崩溃或被用户退出

> ID：12856786
> 
> 赞同：3
> 
> 时间：2012-10-12T10:07:53.723
> 
> 标签：android, crash

我想知道我的应用程序是否已崩溃或被用户退出。有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T10:22:47.800

看到这个：[https://developer.android.com/reference/java/lang/Thread.html#setDefaultUncaughtExceptionHandler(java.lang.Thread.UncaughtExceptionHandler)](https://developer.android.com/reference/java/lang/Thread.html#setDefaultUncaughtExceptionHandler%28java.lang.Thread.UncaughtExceptionHandler%29)，它可能会有所帮助:)

没有用户退出应用程序这样的事情。当你的主要活动的onStop() 或[onBackPressed()](https://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29)被调用时，你总是可以做一些事情，但仅此而已。请注意，这并不意味着应用程序已“退出”，而只是用户“离开”。您当然可以从那里完成活动，以确保应用程序真正退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:11:28.227

从技术上讲，Android 中没有退出意识形态。应用程序保持在后台运行，并且（如有必要）Android 的 VM 在需要释放内存时会自动终止陈旧的应用程序。

关于应用程序崩溃，如果应用程序崩溃了，那么如果用户选择报告崩溃，您可能会在 Google Play 的开发者控制台上收到通知。

# symfony - Symfony 自己的私人供应商

> ID：12856800
> 
> 赞同：0
> 
> 时间：2012-10-12T10:09:01.010
> 
> 标签：symfony, bundle, composer-php, vendor

我有一个在供应商中导入的私有包。

现在，我正在我的项目中工作，并想编辑供应商包中的一些代码。

现在我已经完成了并且想要提交代码，所以我去那个包的目录并说：“ `git commit -a`”所以我给出了一条消息，保存，现在我有一个提交。好的，“ `git push`”并给出响应“一切都是最新的”......所以我不能推动它，但我可以提交？

这不是一种承诺吗？我应该克隆回购并在那里工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-02T10:28:08.707

你不应该直接编辑供应商代码——这是依赖管理的重点。

Composer 基本上通过查看您的`composer.json`文件并获取您指定的存储库和版本来工作。如果您需要更改您的依赖项之一，您应该在原始存储库中进行更改，将更改推送到 GitHub（或您托管代码的任何地方）并运行`composer update`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:39:15.693

当 Composer 安装供应商时，它会签出特定的提交，因此您不在分支上。你需要检查`master`分支——或者你正在使用的任何一个分支——并提交它并推送它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-04T08:11:01.187

很久以前，我问过这个问题。同时，我得到了答案，但从未更新我的 stackoverflow 问题，对此感到抱歉！

我自己的问题的答案是使用 composer 获得依赖`--prefer-source`。

[https://getcomposer.org/doc/03-cli.md#install](https://getcomposer.org/doc/03-cli.md#install)

> --prefer-source：下载包有两种方式：`source`和`dist`. 对于稳定版本，composer`dist`默认使用 。这`source`是一个版本控制存储库。如果`--prefer-source`启用，composer 将安装从`source`如果有的话。如果您想对项目进行错误修复并直接获取依赖项的本地 git 克隆，这将非常有用。

# ios - 需要一些关于 AVAudioPlayer 的帮助

> ID：12856803
> 
> 赞同：0
> 
> 时间：2012-10-12T10:09:10.157
> 
> 标签：ios, avfoundation, core-audio

这是录制和播放音频的代码，它完美地创建了音频文件，但播放代码没有播放文件。我不明白出了什么问题我尝试了所有 nslog，音频文件也在文件夹中完美生成。

```
- (IBAction)recStartStop:(id)sender
{
    if(toggle)
    {
        [recStartStopBtn setImage:[UIImage imageNamed:@"StopRed"] forState:UIControlStateNormal];
        toggle = NO;
        playBtn.enabled = toggle;
        playBtn.hidden = !toggle;
        NSMutableDictionary* recordSetting = [[NSMutableDictionary alloc] init];
        [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatAppleIMA4] forKey:AVFormatIDKey];
        [recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey];
        [recordSetting setValue:[NSNumber numberWithInt: 2] forKey:AVNumberOfChannelsKey];
        recordedTmpFile = [NSURL fileURLWithPath:[NSTemporaryDirectory() stringByAppendingPathComponent: [NSString stringWithFormat: @"%.0f.%@", [NSDate timeIntervalSinceReferenceDate] * 1000.0, @"caf"]]];
        NSLog(@"Using File called: %@",recordedTmpFile);
        recorder = [[ AVAudioRecorder alloc] initWithURL:recordedTmpFile settings:recordSetting error:nil];
        [recorder setDelegate:self];
        [recorder prepareToRecord];
        [recorder record];
    }
    else
    {
        recStartStopBtn.enabled = NO;
        recStartStopBtn.hidden = YES;
        playAudioBtn.hidden = NO;
        NSLog(@"Using File called: %@",recordedTmpFile);
        [recorder stop];
    }
}

- (IBAction)playAudio:(id)sender
{
    AVAudioPlayer * avPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:recordedTmpFile error:nil];
    [avPlayer prepareToPlay];
    [avPlayer play];

    NSLog(@"%@",recordedTmpFile);
} 
```

# android - 使用 Android Admob sdk 我一直收到相同的横幅

> ID：12856805
> 
> 赞同：0
> 
> 时间：2012-10-12T10:09:12.420
> 
> 标签：android, admob

使用 Android Admob sdk 我一直收到相同的横幅。在不同的设备上，banner 是不同的。跟踪显示广告请求和响应。没有关于 admob 的错误或警告。我的程序中的代码：

```
OnCreate()
{
....
    AdRequest adRequest = new AdRequest();
    m_adView.loadAd(adRequest);
} 
```

这是从 admob sdk 发送到服务器的请求：

10-12 13:09:28.828: I/Ads(3865): adRequestUrlHtml: AFMA_buildAdURL({"preqs":10,"session_id":"5459438313201923230","u_sd":1.5,"seq_num":"19"," slotname":"a14faa4a66469eb","u_w":320,"msid":"com.datecs.bgmaps","js":"afma-sdk-a-v6.1.0","toar":0,"mv" :"8014017.com.android.vending","isu":"CF95DC53F383F9A836FD749F3EF439CD","cipa":0,"format":"320x50_mb","net":"wi","app_name":"25.android. com.datecs.bgmaps","hl":"bg","extras":{"_norefresh":"t","gw":1,"mad_hac":"1"},"u_h":533,"运营商":"28401","ptime":362288,"u_audio":3});

我在请求 url 中看到“_norefresh”，但我控制来自 admob 站点的横幅 - 刷新率 45sek。所以这不是问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:38:27.797

即使我停止上网 - 我的广告继续显示在屏幕上。sdk 重复缓存在设备某处的最后一个横幅。在 20-30 的广告请求中，我收到一次：“没有广告可以为您服务”或类似的内容。因此，当 Google 没有连接或没有新广告时，Admob 会重复最后的横幅。虚惊一场，花了2天时间解决不存在的问题。

# c# - 使用 string.format 的 SQL 查询

> ID：12856807
> 
> 赞同：0
> 
> 时间：2012-10-12T10:09:28.957
> 
> 标签：c#, sql-server

我正在用 C# 开发一个 Web 应用程序，我想使用 string.format 函数编写 sql 查询，如下所示：

```
string sSql = string.Format("Select * From {0}", DbReference.TABLE_NAME_SEC_ROLES);
                if (roleCriteria._roleName != null && roleCriteria._isEnabled == true)
                    sSql += string.Format(" where {0}={1} and {2}={3} " + DbReference.ROLE_NAME_COL, roleCriteria._roleName, DbReference.IS_ENABLED_COL, roleCriteria._isEnabled);
                if (roleCriteria._roleName != null)
                    sSql += string.Format(" where {1} = {2} " + DbReference.ROLE_NAME_COL, roleCriteria._roleName);
                if (roleCriteria._isEnabled == true)
                    sSql += string.Format("where {0}" + DbReference.IS_ENABLED_COL + "'false'"); 
```

它给了我如下例外：

> 索引（从零开始）必须大于或等于零且小于参数列表的大小。

所以，请给我这个例外的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:13:34.707

这不起作用并引发[`FormatException`](http://msdn.microsoft.com/en-us/library/system.formatexception%28v=vs.80%29.aspx)：

```
string.Format(" where {1} = {2} " + DbReference.ROLE_NAME_COL, roleCriteria._roleName); 
```

相反，您需要从零开始，因为`{2}`它等于 args 数组的长度，这是不允许的：

```
string.Format(" where {0} = {1} " + DbReference.ROLE_NAME_COL, roleCriteria._roleName); 
```

[`String.Format`方法（字符串，对象 []）](http://msdn.microsoft.com/en-us/library/b1csw23d%28v=vs.80%29.aspx)

**编辑**：发现另一个错误：

代替

```
string.Format("where {0}" + DbReference.IS_ENABLED_COL + "'false'") 
```

和

```
string.Format("where {0}", DbReference.IS_ENABLED_COL + "'false'") 
```

此处您已指定格式项但未添加参数。

> 表示要格式化的参数的数字小于零，**或者大于或等于 args 数组的长度**。

* * *

**>>>**但我建议改用[参数](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:22:23.723

*这么*短的一段代码有很多错误。我认为您想要的内容如下，但我*强烈*建议您切换到使用[参数](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)。将所有内容都视为字符串会招来麻烦：

```
string sSql = string.Format("Select * From {0}", DbReference.TABLE_NAME_SEC_ROLES);
if (roleCriteria._roleName != null && roleCriteria._isEnabled == true)
   sSql += string.Format(" where {0}={1} and {2}={3} " ,/* , not + */ DbReference.ROLE_NAME_COL, roleCriteria._roleName, DbReference.IS_ENABLED_COL, roleCriteria._isEnabled); 
else if (roleCriteria._roleName != null) /* else added, otherwise this will fire if the above if did, and add a second WHERE clause */
   sSql += string.Format(" where {0} = {1} " ,/* , not + */ DbReference.ROLE_NAME_COL, roleCriteria._roleName); 
else if (roleCriteria._isEnabled == true) /* else added, otherwise this will fire if the first if did, and add another WHERE clause */
   sSql += string.Format(" where {0} = 'false'" , DbReference.IS_ENABLED_COL); /* , not +, and moved 'false' */
   /* Also, indented the `where`, since if only this if is true, it would mash the `where` onto the table name */ 
```

而且我们可能仍然需要在某些`'`地方插入一些 ( ) 引号字符，因为我猜测其中一些格式化的值将是字符串。然后我们必须处理转义引号*。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:18:48.277

这是给出错误的行

```
if (roleCriteria._roleName != null)                     
sSql += string.Format(" where {1} = {2} " + DbReference.ROLE_NAME_COL, roleCriteria._roleName); 
```

在这里，您使用了不存在的索引 2。您应该使用 0 和 1。

# audio - 在 AVI 复用时在 AVISTREAMHEADER 结构中设置 dwScale 和 dwRate 值

> ID：12856809
> 
> 赞同：0
> 
> 时间：2012-10-12T10:09:35.993
> 
> 标签：audio, video, synchronization, directshow, avi

在从一些音频和视频源捕获并在 AVI 容器中进行编码以同步音频和视频期间，我将音频设置为主流，这为同步提供了最佳结果。

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd312034(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd312034(v=vs.85).aspx)

但是这种方法会产生更高的 FPS 值。大约 40 或 50 而不是 30 FPS。如果此媒体文件只是播放 - 一切正常，但如果尝试在不同的软件重新编码为另一种视频格式，则会出现不同步。

如何在 AVI 复用的 AVISTREAMHEADER 结构中以编程方式设置 dwScale 和 dwRate 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:11:11.507

> 如何在 AVI 复用的 AVISTREAMHEADER 结构中以编程方式设置 dwScale 和 dwRate 值？

MSDN：

> 此方法通过调整 AVISTREAMHEADER 结构中的 dwScale 和 dwRate 值来工作。

您要求多路复用器管理比例/速率值，因此您无法调整它们。您应该在文件中看到更多奇怪的东西，而不仅仅是更高的 FPS。文件本身可能不同步，一旦您使用其他不进行播放微调的应用程序处理它，您就会开始看到问题。您可能有显示一种帧速率的视频媒体类型，但实际上该速率是不同的。

# java - 康威的人生游戏

> ID：12856811
> 
> 赞同：4
> 
> 时间：2012-10-12T10:09:45.580
> 
> 标签：java

我的问题是`boolean isLive = false;`为什么这被指定为假？我见过非常相似的例子，但我从来没有完全理解它。谁能解释这条线在做什么？

```
/**
 * Method that counts the number of live cells around a specified cell

 * @param board 2D array of booleans representing the live and dead cells

 * @param row The specific row of the cell in question

 * @param col The specific col of the cell in question

 * @returns The number of live cells around the cell in question

 */

public static int countNeighbours(boolean[][] board, int row, int col)
{
    int count = 0;

    for (int i = row-1; i <= row+1; i++) {
        for (int j = col-1; j <= col+1; j++) {

            // Check all cells around (not including) row and col
            if (i != row || j != col) {
                if (checkIfLive(board, i, j) == LIVE) {
                    count++;
                }
            }
        }
    }

    return count;
}

/**
 * Returns if a given cell is live or dead and checks whether it is on the board
 * 
 * @param board 2D array of booleans representing the live and dead cells
 * @param row The specific row of the cell in question
 * @param col The specific col of the cell in question
 * 
 * @returns Returns true if the specified cell is true and on the board, otherwise false
 */
private static boolean checkIfLive (boolean[][] board, int row, int col) {
    boolean isLive = false;

    int lastRow = board.length-1;
    int lastCol = board[0].length-1;

    if ((row >= 0 && row <= lastRow) && (col >= 0 && col <= lastCol)) {             
        isLive = board[row][col];
    }

    return isLive;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T10:11:50.297

这只是默认值，如果 test (`if`子句) 被验证，它可能会被更改。

它定义了板外单元不活动的约定。

这可以写成：

```
private static boolean checkIfLive (boolean[][] board, int row, int col) {

    int lastRow = board.length-1;
    int lastCol = board[0].length-1;

    if ((row >= 0 && row <= lastRow) && (col >= 0 && col <= lastCol)) {             
        return board[row][col];
    } else {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:12:41.003

首先我们将布尔值分配为'false'（确保默认条件）
然后如果找到有效条件我们更改值，否则将返回默认false。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T10:13:17.487

```
boolean isLive = false; 
```

这是布尔变量的默认值。如果您声明为实例变量，它会自动初始化为 false。

> 为什么这被分配为假？

好吧，我们这样做，只是从默认值开始，然后我们可以稍后`true`根据特定条件更改为值。

```
if ((row >= 0 && row <= lastRow) && (col >= 0 && col <= lastCol)) {             
    isLive = board[row][col];
}
return isLive; 
```

所以，在上面的代码中，如果你的`if`条件为假，那么它类似于返回一个`false`值。因为，变量`isLive`没有改变。

但是，如果您的条件为真，那么`return value`将取决于 的值`board[row][col]`。如果是`false`，返回值仍然是`false`，否则`true`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T10:13:51.093

```
boolean isLive = false; 
```

它是分配给布尔变量的默认值。

就像：

```
int num = 0; 
```

# css - 宽度不是从父级继承的？

> ID：12856812
> 
> 赞同：0
> 
> 时间：2012-10-12T10:09:45.610
> 
> 标签：css

我正在尝试叠加图像。我以前做过一点，但由于某种原因，今天我显然忘记了一些事情。它似乎占用了整个页面的宽度，而不是其父级：

```
 #work_item {
        position: relative;
        width: auto;
    }

    #work_item img {}

    #work_item a {
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        z-index: 30;
        height: 100%;
        width: 100%;
        background: #000;
        color: #FFF;
           }

            <div id='work_item'>
        <img src="" />
        <a href="#">Click Here!</a>
    </div> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:39:43.120

```
#work_item {
    display: inline-block;
    position: relative;
    left: 0px;
    top: 0px;
    z-index: 1;
    height: auto;
    width: auto;
}

#work_item img {
    position: relative;
    z-index: 1;
    left: 0px;
    top: 0px;
}

#work_item a {
    display: block;
    position: absolute;
    top: 0px;
    left: 0px;
    z-index: 30;
    height: 100%;
    width: 100%;
    background: rgba(0,0,0,0.8);
    color: #FFF;
}​

<div id='work_item'> 
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQfMwj05-cLtN4hGPTSKJcsElDOeNTW65rlmQKXzRo5ZCbFmvuY0dccZMU" /> 
    <a href="#">Click Here!</a> 
</div> 
```

**演示：http:** [//jsfiddle.net/38v3h/](http://jsfiddle.net/38v3h/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:30:28.250

`div`是一个块元素，它占据其父元素的整个宽度，而不管其内容的宽度。有很多方法可以让 div`#work_item`来包装内容。

显示内联块；

```
 #work_item {
        position: relative;
        width: auto;
        display inline-block;
    } 
```

您还可以浮动 div：

```
 #work_item {
        position: relative;
        width: auto;
        float: left;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:12:34.370

添加此代码，如果您的意思是`#work_item`：

```
#work_item {
    position: relative;
    width: auto;
    display: inline-block;
} 
```

### 小提琴：http: [//jsfiddle.net/CRY3g/](http://jsfiddle.net/CRY3g/)

# php - 如何防止多次登录zendframework

> ID：12856814
> 
> 赞同：0
> 
> 时间：2012-10-12T10:09:52.007
> 
> 标签：php, zend-framework, zend-auth

我有一个网站，我想检查用户是否已经从另一台设备登录。我在用户表中存储了一个会话值，我需要一些条件来防止这种情况发生。

我有这个登录过程的代码：

```
public static function login($request)
{

    if (empty($request)) {
         return false;
    }

    Zend_Session::regenerateId();

    $authAdapter = new Zend_Auth_Adapter_DbTable();
    $authAdapter->setTableName('ah_users');
    $authAdapter->setCredential($request['password']);
    $authAdapter->setCredentialTreatment('MD5(?)');
    $authAdapter->setCredentialColumn('password');
    $authAdapter->setIdentity($request['username']);
    $authAdapter->setIdentityColumn('nname');

    $auth = Zend_Auth::getInstance();

    $result = $auth->authenticate($authAdapter);

    if ($result->isValid()) {
        $authData = $authAdapter->getResultRowObject();
        $user = new Model_AhUsers((array) $authData);

        if(!$user->isActive()) return 3; //if user is activated
        if($authData->role == 'admin' && $authData->payment != 'completed') return 4;
        //here i want to query if user is logged in from another browser / pc device to return 1

        $user->seskey = Zend_Session::getId();
        $user->update();
        self::setLoggedUser($user);
        return 0;
    }

    return 2;
} 
```

而且我也有这些功能，但无论我如何组合它们，它都不能正常工作。

```
public static function isLogged()
{
    $auth = Zend_Auth::getInstance();
    return $auth->hasIdentity();
}

public static function setLoggedUser(Model_AhUsers $user)
{
    $auth = Zend_Auth::getInstance();
    $storage = $auth->getStorage();
    $storage->write($user);
}

/**
 * @return Model_AhUsers|null
 */
public static function getLoggedUser()
{
    $auth = Zend_Auth::getInstance();
    return $auth->getIdentity();
}

public function logout()
{
    $auth = Zend_Auth::getInstance();
    $auth->clearIdentity();
} 
```

# android - 学习安卓NDK

> ID：12856817
> 
> 赞同：3
> 
> 时间：2012-10-12T10:10:02.770
> 
> 标签：android, android-ndk, java-native-interface

我是一名 android 应用程序开发人员并使用 android sdk 开发应用程序，但现在我想学习使用 NDK、JNI 和使用库。我已成功执行 Markana [Learning JNI的教程](http://marakana.com/forums/android/examples/49.html)

我想知道与 NDK 或 JNI 相关的教程的其他链接，或者任何可以让我在高级级别使用 NDK 的东西。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T10:11:39.840

请参阅本教程： http: [//mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/](http://mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/)

[http://mobile.tutsplus.com/tutorials/android/ndk-tutorial/](http://mobile.tutsplus.com/tutorials/android/ndk-tutorial/)

电子书：[http ://www.ebook3000.com/Android-NDK-Beginner-s-Guide_155154.html](http://www.ebook3000.com/Android-NDK-Beginner-s-Guide_155154.html)

# css - Compass/Sass 函数和 mixin 语法

> ID：12856818
> 
> 赞同：3
> 
> 时间：2012-10-12T10:10:05.290
> 
> 标签：css, sass, compass-sass

我目前正在为 Compass/Sass 编写我的第一个 mixin。经过短暂的战斗，我已经得到它来生成我需要的确切 CSS；因此我的问题不是关于修复输出，而是更多关于清理我完成它的方式。

这是我正在使用的代码的两个片段。完整的代码会生成一个`background-image:`CSS 规则，其中包含任意数量的逗号分隔的线性渐变，带有`-webkit`、`moz`和最新 W3C 格式的无前缀渐变声明（例如，使用`to top`而不是`bottom`）。

正如我所说，我对 API 和输出感到满意。我只想清理这段代码。

首先，在下面的`w3c`条件块中，我怎样才能避免我想要的：

```
@return linear-gradient($direction, $color-stops); 
```

... 调用内置的 Compass `linear-gradient`mixin？（我在我的项目中包括了所有的 CSS3 Compass 助手）。我想要的只是输出一个字符串，插入括号的值`$direction`和`$color-stops`括号内：

```
@function -gradient-rule($type, $direction, $color-stops) {
    @if $type == ('moz') {
        @return -moz-linear-gradient($direction, $color-stops);
    }
    @if $type == ('webkit') {
        @return -webkit-linear-gradient($direction, $color-stops);
    }
    @if $type == ('w3c') {

        // Terrible, terrible hack. Just couldn't work out how to write this without invoking the built-in Compass linear-gradient() function
        $prefix: linear-gradient;
        @return #{$prefix}unquote("(")#{$direction}, #{$color-stops}unquote(")");
    }
} 
```

其次，有没有更简洁的方法来编写下面的代码？我想循环所有的`$gradients`，并且对于每个`$gradient`，假设第一项是方向声明，其余的是色标。所以第一项应该设置在变量`$to-direction`中，其余的设置在一个名为的逗号列表中`$color-stops`。我怎样才能更好地做到这一点，即不需要`$i`柜台？

```
@each $gradient in $gradients {

    $i: 1;
    $to-direction: nth($gradient, 1);
    $color-stops: comma-list();

    @each $prop in $gradient {
        @if $i > 1 {
            $color-stops: append($color-stops, $prop);
        }
        $i: $i+1;
    }

    // old syntax is the origin of the gradient, not the destination
    $from-direction: -from-direction($to-direction);
    $moz-value: append($moz-value, -gradient-rule('moz', $from-direction, $color-stops));
    $webkit-value: append($webkit-value, -gradient-rule('webkit', $from-direction, $color-stops));

    // new syntax is the destination
    $w3c-value: append($w3c-value, -gradient-rule('w3c', $to-direction, $color-stops));

    ...
    (continues)
} 
```

非常感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:04:36.667

1）除了将其插入引号之外，您无能为力。这是一个更干净的hack：

```
@return #{"linear-gradient("+ $direction +", "+ $color-stops +")"} 
```

PS你如何使用这个代码？放一个有点奇怪

2）确实有一种更清洁的方法！

```
@for $gradient-number from 2 through length($gradients) {
  $gradient: nth($gradients, $gradient-number);

  $to-direction: nth($gradient, 1);
  $color-stops: comma-list();

  @each $prop in $gradient {
    $color-stops: append($color-stops, $prop); }

  ... 
```

`$gradient-number`基本上是一样的，`$i`所以在逻辑上差别不大，但在代码整洁度上差别很大。

当我第一次开始使用这个技巧时，我有点不舒服，但后来我看到 SASS 大师也在使用它（示例：[1、2](https://github.com/Snugug/respond-to/blob/master/compass/stylesheets/_respond-to.scss) [）](https://github.com/scottkellum/Singularity/blob/master/stylesheets/singularitygs/helpers/_lists.scss)，所以我可以毫不犹豫地向你推荐它。

# c++ - 在 X11 上设置 OpenGL

> ID：12856820
> 
> 赞同：1
> 
> 时间：2012-10-12T10:10:11.163
> 
> 标签：c++, opengl, x11

我有一个`Window`X11 窗口的标识符。我没有设置这个窗口，我只是可以获得它的 id（我想是`visual`id）。如何为此窗口设置 OpenGL 上下文？

特别是，我想使用`glXMakeCurrent`，但是这个函数接收`Display`和`GLXContext`对象。我可以使用创建上下文，`glXCreateContext(display, vi, 0, GL_TRUE);`但我再次需要 in`Display`和`XVisualInfo`对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:27:01.877

这段代码完全创建了一个窗口，并初始化了 opengl 上下文。

```
Display *dpy( XOpenDisplay( NULL );
int screen = XDefaultScreen( dpy );
const int fbCfgAttribslist[] =
        {
            GLX_RENDER_TYPE, GLX_RGBA_BIT,
            GLX_DRAWABLE_TYPE, GLX_PBUFFER_BIT,
            None
        };
int nElements = 0;
GLXFBConfig * glxfbCfg = glXChooseFBConfig( dpy,
                                      screen,
                                      fbCfgAttribslist,
                                      & nElements );

const int pfbCfg[] =
        {
            GLX_PBUFFER_WIDTH, WINDOW_WIDTH,
            GLX_PBUFFER_HEIGHT, WINDOW_HEIGHT,
            GLX_PRESERVED_CONTENTS, True,
            GLX_LARGEST_PBUFFER, False,
            None
        };
GLXPbuffer pBufferId = glXCreatePbuffer( dpy, glxfbCfg[ 0 ], pfbCfg );

XVisualInfo * visInfo = glXGetVisualFromFBConfig( dpy, glxfbCfg[ 0 ] );

GLXContext  glCtx = glXCreateContext( dpy, visInfo, NULL, True );

glXMakeContextCurrent( dpy,
                       pBufferId,
                       pBufferId,
                       glCtx ); 
```

实际上，这是设置一个 pbuffer，而不是一个窗口，但在您的情况下，由于您创建了窗口并设置了视觉效果，您可以跳过第一部分，继续创建 opengl 上下文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T13:25:07.943

我的一个代码示例（基于 FTB/fungus 的示例）涵盖了在 X11 窗口上设置 OpenGL 上下文，显着的区别在于使用 FBConfig 而不是常规的 Visual。

[https://github.com/datenwolf/codesamples/blob/master/samples/OpenGL/x11argb_opengl/x11argb_opengl.c](https://github.com/datenwolf/codesamples/blob/master/samples/OpenGL/x11argb_opengl/x11argb_opengl.c)

你只得到一个窗口，而不是一个显示是一个问题。你不能只是假设窗口在默认显示上，所以无论你从哪里得到那个窗口，它也*必须*给你相应的显示连接。对于 X11，仅仅传递窗口 ID 是 API 设计的失败。

# iphone - 如何检查设备是否运行 iOS 6？

> ID：12856821
> 
> 赞同：6
> 
> 时间：2012-10-12T10:10:10.657
> 
> 标签：iphone, objective-c, ios, ios6

> **可能重复：**
> [我们如何以编程方式检测设备在哪个 iOS 版本上运行？](https://stackoverflow.com/questions/7848766/how-can-we-programmatically-detect-which-ios-version-is-device-running-on)

如何检查设备是否运行 iOS 6？我需要检查操作系统是否为 iOS 6，以便更改我的 youtube 视频网址，因为 Apple 发布了关于如何在 iOS6 中处理它们的发行说明

> [从 iOS 6 开始， http://www.youtube.com/watch?v=](http://www.youtube.com/watch?v=oHg5SJYRHA0) oHg5SJYRHA0 形式的嵌入式 YouTube URL 将不再有效。这些 URL 用于查看 YouTube 网站上的视频，而不是用于嵌入网页。相反，应该使用的格式在 [https://developers.google.com/youtube/player_parameters](https://developers.google.com/youtube/player_parameters)中描述。

我正在考虑一个 if else 语句来处理这个问题。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-12T10:41:33.663

正如在比较浮点参数之前，您应该将 6.0 放入浮点变量中，以便 LHS 和 RHS 应该相同以进行比较：

```
float currentVersion = 6.0;

if ([[[UIDevice currentDevice] systemVersion] floatValue] >= currentVersion)
{
    NSLog(@"Running in IOS-6");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:23:53.133

```
NSString *versionString = [[UIDevice currentDevice] systemVersion]; // iOS version as string
int versionStringInt = [ver intValue]; // iOS version as int
float versionStringFloat = [ver floatValue]; // iOS version as float 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:21:18.247

试试下面

```
 float deviceVersion   = [[[UIDevice currentDevice] systemVersion] floatValue];
 NSLog(@"My Device version is :%f ",deviceVersion); 
```

我希望它会帮助你。

# grails - Grails Log4J 尝试为一个控制器登录单独的文件仅失败

> ID：12856823
> 
> 赞同：7
> 
> 时间：2012-10-12T10:10:12.380
> 
> 标签：grails, logging, log4j

我想将来自我的 grails 应用程序中的一个控制器的消息以信息级别记录到特定文件中。info 或任何其他级别的所有其他内容都应转到另一个默认日志记录文件。

但是，我根本无法`log4J`填充 usage.log 文件，尽管它很高兴地记录到下面定义的“默认”附加程序。

任何人都可以就我的设置为什么不起作用提供任何线索吗？

我的 log4j 设置如下：

```
log4j = {

appenders {

    console name: 'stdout', 
    layout: pattern(conversionPattern: '%d %-5p %c{1} - %m%n')

    appender new DailyRollingFileAppender(
            name: 'default', 
            datePattern: "'.'yyyy-MM-dd",
            layout: pattern(conversionPattern: '%d %-5p %c{1} - %m%n'),
            file: 'C:/logs/default.log'
         )

    //daily usage log
    appender new DailyRollingFileAppender(
            name: 'usage', datePattern: "'.'yyyy-MM-dd",
            layout: pattern(conversionPattern: '%d %-5p %c{1} - %m%n'),
            file: 'C:/logs/usage.log'
         )
}

info usage: "grails.app.controllers.com.example.MyController", 
additivity: false

root {
    info 'stdout', 'default'
    additivity = true
}

     info 'grails.app'
} 
```

**更新**

我已经能够通过替换特定的控制器类映射来解决这个问题

```
info usage: 'usage', additivity: true 
```

然后使用

```
private static final log = LogFactory.getLog("usage") 
```

似乎没有其他记录或描述的方式有效，理想情况下我可以在包或类的基础上对其进行配置，但这有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:06:45.743

您需要小心使用`info`et 的命名参数类型。人。预计。以下配置适用于 Grails 2.1.1 测试项目：

```
// log4j configuration
log4j = {
    appenders {
        def logPattern = '%d{dd-MM-yyyy HH:mm:ss,SSS} %5p %c{2} - %m%n'
        console name: 'stdout', layout: pattern(conversionPattern: logPattern)

        appender new DailyRollingFileAppender(
            name: 'usage', datePattern: "'.'yyyy-MM-dd",
            layout: pattern(conversionPattern: logPattern),
            file: 'usage.log'
        )
    }

    root {
        error 'stdout'
    }

    info additivity: false, usage: ["grails.app.controllers.com.example.MyController"]
} 
```

# jquery-ui - Jquery UI Spinner - UI V1.8.10

> ID：12856828
> 
> 赞同：0
> 
> 时间：2012-10-12T10:10:24.983
> 
> 标签：jquery-ui

我想在网站上使用新的 Jquery UI Spinner 小部件。我的问题是该网站已经使用 jquery UI 1.8.10，当我尝试更新到 1.9 时，由于其他插件依赖于 V 1.8，我遇到了很多错误。

是否可以在已经加载 jquery ui 1.8 的页面上加载微调器小部件？是否可以串联加载 jquery ui 1.9，以便我可以加载微调器小部件？是否可以修改微调器小部件以使用 1.8？任何帮助将不胜感激。

这是我想使用的微调器的快速小提琴（选择小时和分钟，步长半小时） - [http://jsfiddle.net/fDpE9/5/](http://jsfiddle.net/fDpE9/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:06:32.413

我决定制作一个 JavaScript 函数来创建我自己的不带 jQuery UI 的小部件。我添加了一个创建函数来用与 Jquery UI 微调器相同的 HTML 替换输入，并将我自己的微调函数附加到按钮单击中。仍然需要在按钮上添加按住鼠标事件，但你明白了。

```
function createHourMinSpinner(elementSelector) {
    $(elementSelector).replaceWith('<span class="ui-spinner ui-state-default ui-widget ui-widget-content ui-corner-all"><input id="' + $(elementSelector).attr('id') + '" class="ui-spinner-input" value="' + $(elementSelector).val() + '" name="' + $(elementSelector).attr('name') + '" style="width:' + $(elementSelector).width() + 'px;" aria-valuenow="0" autocomplete="off" role="spinbutton"><a onclick="spinHourMin(\'#' + $(elementSelector).attr('id') + '\', true);" class="ui-spinner-button ui-spinner-up ui-corner-tr ui-button ui-widget ui-state-default ui-button-text-only" tabindex="-1" role="button" aria-disabled="false"><span class="ui-button-text"><span class="ui-icon ui-icon-triangle-1-n">▲&lt;/span></span></a><a onclick="spinHourMin(\'#' + $(elementSelector).attr('id') + '\', false);" class="ui-spinner-button ui-spinner-down ui-corner-br ui-button ui-widget ui-state-default ui-button-text-only" tabindex="-1" role="button" aria-disabled="false"><span class="ui-button-text"><span class="ui-icon ui-icon-triangle-1-s">▼&lt;/span></span></a>');
}

function spinHourMin(elementSelector, goingUp) {
    var originalVal = $(elementSelector).val() + "";
    var originalWhole = parseInt(originalVal.split(':')[0]);
    var originalFract = parseInt(originalVal.split(':')[1]);
    var newValue = "0:00";

    if (!goingUp && originalWhole == 0) {
        newValue = "0:00";
    } else if (goingUp && (originalFract == undefined || originalFract < 30 || isNaN(originalFract))) {
        newValue = originalWhole + ":30";
    } else if (goingUp && originalFract >= 30) {
        newValue = (originalWhole + 1) + ":00";
    } else if (!goingUp && (originalFract == undefined || originalFract == 0 || isNaN(originalFract))) {
        newValue = (originalWhole - 1) + ":30";
    } else if (!goingUp && originalFract > 30) {
        newValue = originalWhole + ":30";
    } else if (!goingUp && originalFract <= 30 && originalFract != 0 && originalFract != undefined) {
        newValue = originalWhole + ":00";
    }

    $(elementSelector).val(newValue);
} 
```

# jquery - 所有子元素都在变化，只希望父被点击的div子元素发生变化。

> ID：12856835
> 
> 赞同：1
> 
> 时间：2012-10-12T10:11:01.070
> 
> 标签：jquery, html, css, parent-child

试图让父母的孩子`<div>`改变。页面上总共有 5 个面板，当我单击其中一个父级时，所有面板的所有子级都会更改。

除了下面的代码，我在这里上传了它：http: [//intp.co/dev](http://intp.co/dev)

**jQuery：**

```
 <script>
        $("div.click").click(function() {
        $("div.click > img").toggleClass("rotated");
        }); 
    </script> 
```

**的HTML**

```
 <div class="panel">
        <div class="expander2 click">
            <img src="images/chev.png">
        </div>
        <h1>The Best Header Sample Text</h1>
    </div>
    <div id="segment2">
        <p>Lorem Ipsum Dolor Sit Amet</p>
    </div> 
```

**CSS**

```
.click img
{
    -webkit-transform: rotate(-90deg);
    -moz-transform: rotate(-90deg);
    -o-transform: rotate(-90deg);
    -ms-transform: rotate(-90deg);
    margin-top:34px;
    margin-right:22px;
}

img.rotated 
{
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T10:13:02.730

这是因为`$("div.click > img")`它与上下文无关 - 它只选择文档中适用于此选择器的所有元素，无论您在何处执行它。

要选择合适的元素，您可以使用遍历函数，从某个元素开始，然后遍历 DOM。请记住，这`this`是单击的`div.click`元素，因此：

```
$(this).children("img").toggleClass("rotated"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:13:11.067

失败是，您在 click 函数中再次选择所有元素，只需参考`$(this)`

```
<script>
  $("div.click").click(function() {
    $(this).children("img").toggleClass("rotated");
  }); 
</script> 
```

# android - 在 Android 手机上使用 Intent 从一个类切换到另一个类时出现 NullPointer 异常

> ID：12856838
> 
> 赞同：0
> 
> 时间：2012-10-12T10:11:20.750
> 
> 标签：android

我的应用程序在模拟器上完美运行，没有任何错误，但是当我在 android 真实设备/手机上运行它时，它会意外停止！logcat 错误是：`java.lang.NullPointerException`. 此应用程序失败的代码，或者换句话说，它在模拟器上运行正确但在真实手机上无法运行的代码是：

```
 Intent intent = new Intent(FacebookActivity.this, GoogleMapActivity.class);
 startActivity(intent); 
```

我只是无法理解问题，请帮助。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:18:09.360

添加`<activity android:name=.AnotherActivity />`到 AndroidManifest.xml

# c++ - GDI 函数在绘制时将 alpha 通道设置为 0。为什么？

> ID：12856839
> 
> 赞同：2
> 
> 时间：2012-10-12T10:11:21.227
> 
> 标签：c++, transparency, gdi

我创建了 32 位 DIB 部分，用一些非零值 (FillMemory) 填充它并使用 GDI 函数对其进行绘图。我查看了 DIB 部分的内存，发现现在每个第 4 个字节（alpha 通道）都有一个 0。几年前我对这种行为有过解释，但没能再次找到它（并且不记得为什么 GDI 会那样做）。有人知道为什么 GDI 函数将 alpha 通道设置为 0 吗？这种行为有什么规范吗？

这个想法是这样的：

```
 dib = CreateDIBSection(hdc..., &bytes);
    FillMemory(bytes,...255);
    memdc = CreateCompatibleDC(hdc);
    SelectObject(memdc, bid);
    MoveTo(memdc,...);
    LineTo(memdc,...);
    // look at every pixel in bytes
    // if alpha == 255 then it is undrawn pixel
    // and set alpha + premultiply colors otherwise
    AlphaBlend(hdc, ... memdc,...); 
```

此代码有效。但它假定 GDI 函数将 alpha 设置为 0。我想确定它是“合法行为”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T10:31:29.370

这是因为在最初设计 Windows GDI 很久之后，Alpha 混合已经成为绘图功能的一部分。您必须使用相对较新的函数，如[AlphaBlend()](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183351%28v=vs.85%29.aspx)（自 Windows 2000 AFAIK 以来就存在）来获得该功能。

最初 GDI 被设计成由宏组成的32 位颜色值[COLORREF](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183449%28v=vs.85%29.aspx)`RGB`包含这样的颜色`0x00bbggrr`。所以就像你看到的......你认为的阿尔法通道位不是。这些实际上由 GDI 设置为零。透明度是通过使用蒙版而不是 alpha 混合实现的。

GDI 的二进制形式`COLORREF`由我给出的链接记录，因此您的代码行为是合法的（除非 MS 更改文档的可能性很小）。

# jsf - Primefaces p：commandButton，未调用操作

> ID：12856843
> 
> 赞同：15
> 
> 时间：2012-10-12T10:11:45.830
> 
> 标签：jsf, jsf-2, primefaces, actionlistener

我在使用 Primefaces 3.2 和 JSF 2.1 时遇到了一些麻烦。

我的代码是这样的：

```
<p:toolbar id="jeditortoolbar" styleClass="jeditortoolbar">
      <p:toolbarGroup align="left" height="25" style="height:25px">
        <p:commandButton type="button" title="#{msg.beenden}"/>
        <p:commandButton type="button" title="#{msg.neu}"/>
      </p:toolbarGroup>
</p:toolbar> 
```

当我看一下 Primefaces Showcase 我的 p:commandButton 需要

```
actionListener="#{myBean.myActionMethod}" 
```

我的 Bean 需要一个类似的方法

```
public void myActionMethod(){} 
```

我的标签`h:form`周围有一个！`p:toolbar`

我的 Bean 是 ViewScoped。

我的解决方法在`*.xhtml`文件中

```
<p:commandButton type="button" title="#{msg.neu}" onclick="addNewEmptyFile()"/>
<p:remoteCommand name="addNewEmptyFile" update=":codeTabForm">
   <f:setPropertyActionListener value="#{true}" target="#{myBean.myEvent}"/>
</p:remoteCommand> 
```

在 MyBean.java 中

```
private String myEvent;

public void setMyEvent(String value){ myActionMethod();} 
```

这对我有用，但我认为这是非常脏的代码。

每个人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T11:04:34.020

试试这个

**Bean.java**

```
@ManagedBean
@ViewScoped
public class Bean {

    public String testButtonAction() {
        System.out.println("testButtonAction invoked");
        return "anotherPage.xhtml";
    }

    public void testButtonActionListener(ActionEvent event) {
        System.out.println("testButtonActionListener invoked");
    }

} 
```

页面.xhtml

```
<p:toolbar>
  <p:toolbarGroup>
    <p:commandButton action="#{bean.testButtonAction}"/>
    <p:commandButton actionListener="#{bean.testButtonActionListener}"/>
  </p:toolbarGroup>
</p:toolbar> 
```

# c++ - 遍历 const char* 数组

> ID：12856845
> 
> 赞同：3
> 
> 时间：2012-10-12T10:11:53.240
> 
> 标签：c++

我有一个非常简单的 const char 数组示例和一个应该将它们打印出来的函数（遍历所选的一个）。与我的所有期望相反，它正在遍历所有这些，而不仅仅是作为参数传递的那个。

```
#include <iostream>

const char* oranges[] = {
    "ORANGE",
    "RED ORANGE"
};

const char* apples[] = {
    "APPLE"
};

const char* lemons[] = {
    "LEMON"
};

void printFruit(const char** fruit){
    int i =0;
    while (fruit[i] != '\0'){
        std::cout << "---------------------\n";
        std::cout << fruit[i] << "\n";
        i++;
    }
}

int main (int argc, const char * argv[])
{
   printFruit(oranges); 
   return 0;
} 
```

我期望的结果是函数 printFruit 以橙子作为参数将打印 ORANGE 和 RED ORANGE，同时我打印了所有定义的水果（来自其他数组），如下所示：

```
---------------------
ORANGE
---------------------
RED ORANGE
---------------------
APPLE
---------------------
LEMON 
```

对不起我的无知，但为什么会发生这种情况？

编辑：我关注了这个问题：在与我的类似[的 c 中定义和迭代字符串数组。](https://stackoverflow.com/questions/6812242/defining-and-iterating-through-array-of-strings-in-c)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T10:16:31.627

你在这里有UB。你的情况

```
while (fruit[i] != '\0') 
```

永远不会满足，因为没有元素等于`\0`.

所有的数组都一个接一个地放置在内存中。你的`i`不断增加永远。`i = 1`你在第一个字符串上`oranges`。`i = 2`你在第二个元素上。

之后，`i`变为 3。因为在 之后`oranges`，数组中存在`apples`数组，您的指针开始指向它并且应用程序打印`APPLE`。`i = 4`指针位于数组上`lemons`，应用程序打印`LEMONS`. 在那之后，你有效地走出了你自己的记忆，这对我来说会导致崩溃。

要解决这个问题，您需要在每个数组中显式添加一个空元素，例如

```
const char* oranges[] = {
    "ORANGE",
    "RED ORANGE",
    0
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T10:15:29.737

你正在检查那个`fruit[i] != '\0'`。这是错误的，因为`fruit[i]`它是一个`char *`，而不是一个字符。此外，您的向量不会终止。您可能想检查是否`fruit[i] != 0`或`*fruit[i] != '\0'`。在第一种情况下，您需要像这样终止向量：

```
const char* oranges[] = {
    "ORANGE",
    "RED ORANGE",
    0  // or NULL
}; 
```

在第二：

```
const char* oranges[] = {
    "ORANGE",
    "RED ORANGE",
    ""
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T10:32:04.793

恕我直言，你最好确切地知道你正在处理多少个元素。坏消息是一个简单的字符指针数组不会告诉你（它不是 a `std::vector`），所以你将无法在你的`printFruit`函数中发现它。

然而，好消息是它在编译时可用，因此您不必担心查找它的开销。以下显示了我的意思：

```
void printFruit(const char** fruit, int fruitSize){
    int i =0;
    while (i < fruitSize){
        std::cout << "---------------------\n";
        std::cout << fruit[i] << "\n";
        i++;
    }
}

int main (int argc, const char * argv[])
{
   // The second parameter can be worked out by the compiler.
   printFruit(oranges, sizeof(oranges)/sizeof(const char*) ); 
   return 0;
} 
```

由于您使用的是 C++，我强烈建议您使用其中一种标准集合类型，例如`vector`它们在边界检查、内存分配等方面更安全。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T10:18:15.007

```
const char* oranges[] = {
    "ORANGE",
    "RED ORANGE"
};

const char* apples[] = {
    "APPLE"
};

const char* lemons[] = {
    "LEMON"
}; 
```

在记忆中看起来像

“橙子”“红橙子”“苹果”“柠檬”

```
while (fruit[i] != '\0'){
    std::cout << "---------------------\n";
    std::cout << fruit[i] << "\n";
    i++;
} 
```

当您到达“大数组”的末尾即“柠檬”时将结束

要使您的代码正常工作，您需要内存看起来像 "ORANGE""RED ORANGE"0"APPLE"0"LEMON"0 所以

```
 const char* oranges[] = {
        "ORANGE",
        "RED ORANGE",
    0
    };

    const char* apples[] = {
        "APPLE",
    0
    };

    const char* lemons[] = {
        "LEMON"
     ,0
    }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T10:14:29.743

```
const char* oranges[] = {
    "ORANGE",
    "RED ORANGE",
    "\0"
}; 
```

您的数组一个接一个地位于内存中，因此它会继续打印其他数组，因为`while`条件是`false`

# javascript - 如何在 jquery 中隐藏像 acordian 这样的 td

> ID：12856848
> 
> 赞同：0
> 
> 时间：2012-10-12T10:12:08.430
> 
> 标签：javascript, html

我有一张如下表：

左侧列出了菜单，顶部是徽标，右侧是列出数据等实际内容。

现在我想在用户点击时隐藏菜单并在再次点击时启用。

如何在java脚本中做到这一点？

下面是示例的图像：

![在此处输入图像描述](../Images/89624031ada3614529b33994b44c0993.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:24:56.563

这帮助我实现了我想要的。

```
<!DOCTYPE html>
<html>
<head>

  <script src="jquery-latest.js"></script>

</head>

<body>
  <table>
    <tr>
        <td id="cell">
            Some info
        </td>
    </tr>
</table>

<input type="button" id="button" value="Show/hide" />
<script>
$("#button").click(function(){
     $("#cell").toggle();
});
</script>
</body>
</html> 
```

更新

在线演示：http: [//jsfiddle.net/DVxSy/](http://jsfiddle.net/DVxSy/)

# excel - 我的 Excel 工作簿有多个未知编码，因此相等性测试失败

> ID：12856849
> 
> 赞同：0
> 
> 时间：2012-10-12T10:12:11.580
> 
> 标签：excel, unicode, vlookup

这些年来，我积累了很多日文汉字数据，刚刚整理了一些有趣的列表的工作簿。我希望用来`VLOOKUP`加入其中的一些但失败了，因为虽然两个汉字看起来一样，但我猜它们的编码不同，所以它们不完全匹配（`range_lookup = FALSE`给出`#N/A`它应该返回一个值的时间，使用`TRUE`给出一个合理但无用价值）。

我刚刚解决了这个问题 - 我将两个相同但不匹配的字符粘贴到记事本中，将其保存为 UTF-8，然后将它们粘贴回它们的来源，现在`VLOOKUP`可以按预期工作。

如果有人知道为什么记事本如此聪明而 Excel 如此愚蠢，请告诉我。我知道日本在 unicode 之前有自己的编码方案，但它们不显示为 ??? 在记事本中？我猜编码“足够接近”，因此记事本（和 Excel）会将它们显示为相同的字符。我接近了吗？此外，是否有一个工作簿函数可以将这些编码表亲“标准化”为默认值以进行比较？

# database - Prolog 数据库：为什么程序只运行一次？

> ID：12856850
> 
> 赞同：2
> 
> 时间：2012-10-12T10:12:18.370
> 
> 标签：database, prolog

我得到了这个代码，只要 N > Order 就必须运行数据库。我的代码只运行一次：/？

```
display(N) :-
    w(Order,_,Word,Class),
    N > Order -> (write(Word), write(' '), write(Class)),
    nl, fail . 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T10:58:55.187

你的问题是你使用的方式`->`

首先，代码被解释为：

```
display(N) :-
    (  w(Order,_,Word,Class),
       N > Order ) 
    ) -> 
      (  write(Word), 
         write(' '), 
         write(Class)
      ),
    nl, fail . 
```

`->`破坏选择点，这意味着它不会`w/3`再次尝试调用。

你可以（可能）让它像这样工作：

```
display(N) :-
    (w(Order,_,Word,Class),
    N > Order )-> (write(Word), write(' '), write(Class)),
    nl, fail . 
```

但最终它是非常丑陋的代码，而且如您所见，容易出现错误。更好的方法是使用`forall/2`：

```
display2(N) :-
    forall(w(Order, _, Word, Class),
           (N > Order ->
           writef("%t %t \n", [Word,Class]); true)). 
```

尽管如此，这将检查整个数据库并打印 if `N>Order`。从您的描述中有点不清楚这是否是所需的行为，但如果您想停在第一个更大的元素上，您可以执行以下操作：

```
display2(N) :-
    catch((forall(w(Order, _, Word, Class),
           (N > Order ->
           writef("%t %t \n", [Word,Class]); throw(end))), end, true)). 
```

不是最具声明性的方法，但我不确定在不知道是什么的情况下建模它的最佳方法是什么`w/4`（我假设它是一些序言子句，但它可能是通过 ODBC 层访问数据库的谓词）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T10:53:40.010

我认为您忘记了“其他”分支，并且 (->)/2 的优先级高于 (,)/2，从而抑制了预期的顺序。尝试

```
display(N) :-
    w(Order,_,Word,Class),
    ( N > Order -> write(Word), write(' '), write(Class), nl ; true ),
    fail . 
```

# javascript - jQuery Modal 窗口仅适用于 Chrome，但不适用于 FF 和 IE9

> ID：12856851
> 
> 赞同：0
> 
> 时间：2012-10-12T10:12:21.123
> 
> 标签：javascript, jquery, modal-window

Login popup style=display:none 只在 Chrome 中弹出，在 Firefox16.0.1 和 IE9 中不弹出。

欢迎任何建议或修复。我在以下教程中学习：[教程](http://freetexthost.com/ydjkbmwixb)

[http://jsfiddle.net/6TaQt/8/](http://jsfiddle.net/6TaQt/8/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:35:08.453

这也是标记问题。[更新了 Fiddle](http://jsfiddle.net/6TaQt/7/) 这也适用于 FF 和 chrome。

您必须将按钮包含在标签内。不是按钮标签内的标签。

其他都是对的，你有过度标签功能的错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:27:06.707

尝试首先调试此错误消息“Uncaught TypeError: Object [object Object] has no method 'overlabel'”，实际上我不明白这在 Chrome 中是如何工作的 :)

# php - Apache重定向所有文件

> ID：12856852
> 
> 赞同：1
> 
> 时间：2012-10-12T10:12:22.480
> 
> 标签：php, apache

如何将每个 URI 重写为 index.php？

```
RewriteRule . index.php 
```

这只会重写当前目录中的文件，因此 example.org/folder 不会重写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:18:33.987

如果该规则位于文档根目录中的 htaccess 文件中，那么它将重定向所有内容。而不是`.`，它应该是`.*`：

```
RewriteEngine On
RewriteRule .* index.php 
```

# asp.net-mvc-4 - WebApi Json.NET 自定义日期处理

> ID：12856853
> 
> 赞同：13
> 
> 时间：2012-10-12T10:12:28.847
> 
> 标签：asp.net-mvc-4, asp.net-web-api, json.net

我已将我的 MVC4 应用程序全局显式配置为使用 JSON.NET 序列化程序。我知道在序列化日期时我可以选择使用 ISO 标准日期或旧的 Microsoft 日期格式。

但是我怎样才能输出我自己的自定义日期时间格式字符串，比如：“dd/MM/yyyy hh:mm”。

当插入 Json.NET 作为默认序列化程序时，我可以在 MVC3 中执行此操作，但在 MVC4 中似乎无法执行此操作。

到目前为止，在 application_start 我已经完成了：

```
 var settings =     GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings;            
        JsonSerializerSettings jSettings = new Newtonsoft.Json.JsonSerializerSettings()
        {
            Formatting = Formatting.Indented,
            DateTimeZoneHandling = DateTimeZoneHandling.Utc,

        };
        jSettings.Converters.Add(new MyDateTimeConvertor() );
        settings = jSettings; 
```

我试图暗示的自定义转换器是这样的：

```
 public class MyDateTimeConvertor : DateTimeConverterBase
    {
        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            return DateTime.Parse(reader.Value.ToString());
        }

        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {
            writer.WriteValue(((DateTime)value).ToString("dd/MM/yyyy hh:mm"));
        }
    } 
```

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-12T11:25:20.733

像这样更改您的设置设置代码：

```
JsonMediaTypeFormatter jsonFormatter = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
JsonSerializerSettings jSettings = new Newtonsoft.Json.JsonSerializerSettings()         
{
    Formatting = Formatting.Indented,
    DateTimeZoneHandling = DateTimeZoneHandling.Utc
};
jSettings.Converters.Add(new MyDateTimeConvertor());
jsonFormatter.SerializerSettings = jSettings; 
```

在您的代码中，您只是在更改局部变量值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T21:25:58.473

谢谢，我快疯了，这对我来说效果很好，将其粘贴到 Global.asax.cs

```
JsonMediaTypeFormatter jsonFormatter = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
JsonSerializerSettings jSettings =... 
```

创建一个 MyDateTimeConvertor 类，将其粘贴到类中

```
public class MyDateTimeConvertor : DateTimeConverterBase
{
    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        return DateTime... 
```

wep api mvc4，网络服务，自定义日期格式。

# javascript - 对象上的 Backbonejs 事件语法

> ID：12856856
> 
> 赞同：0
> 
> 时间：2012-10-12T10:12:35.797
> 
> 标签：javascript, javascript-events, backbone.js

假设我有以下观点：

```
 var SampleView = Backbone.View.extend({
        initialize: function() {
            this.child_element = this.$('#new-catalog>button:first');                
        },
        events: {
            'click #new-catalog>button:first': function() { alert('clicked'); },
        },
        el: '#some-element',
    }); 
```

如果您对自定义子项有一些重要的选择（比如我`child_element`用 选择的`#new-catalog>button:first`，是否可以避免在`events`属性中重新定义它，而是参考`this.child_element`?

当然可以`this.child_element.on('click', ...`，但我想使用提供的事件字典。谢谢

# objective-c - TableViewCell 子类未初始化

> ID：12856858
> 
> 赞同：1
> 
> 时间：2012-10-12T10:12:36.623
> 
> 标签：objective-c, ios, uitableview

我想以编程方式创建一个自定义 tableViewCell。这就是我所做的：

1.  创建 tableViewCell 子类并将其导入 tableViewController

2.  在 tableViewController m 中：

    ```
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *CellIdentifier = @"StoreCell";

    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if (cell == nil) {
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    return cell;} 
    ```

3.  在 CustomCell m 中：

    ```
    -(id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
    {

        self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
        if (self) {

        NSLog(@"Hello!");

        }
        return self;
    } 
    ```

（很抱歉没有让代码突出显示的东西起作用）

我的问题是 CustomCell 没有被初始化。initWithStyle 永远不会被触发。我遵循了几个教程，他们做了完全相同的事情，但成功了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:15:54.280

在 iOS 6 中， dequeReusableCellWithIdentifier:forIndexPath: 总是返回一个单元格，所以你的 if-case 永远不会被调用。如果具有该标识符的单元格不可用，它将自行初始化。尝试在 UITableViewCell 子类中实现 initWithCoder:，这就是在这种情况下调用的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:47:10.337

在 cellForRowAtIndexPath 试试这个

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{
    static NSString *CellIdentifier = @"StoreCell";

    CustomCell *cell = (CustomCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T09:39:52.667

我终于弄明白了。单元格没有被初始化，因为我在情节提要中使用了原型单元格。我将原型单元格设置为 0 并且它可以工作:)

# sql - SQL Join，消除重复结果

> ID：12856863
> 
> 赞同：0
> 
> 时间：2012-10-12T10:12:51.210
> 
> 标签：sql, join

我有以下加入声明：

```
SELECT DISTINCT dn.fname, dn.lname,w.websit,q.qual,q.year,q.postqual,p.pnumber,a.accred,n.nspecial
FROM cur_doctor_names dn
LEFT JOIN cur_website w ON dn.userid = w.userid
LEFT JOIN cur_qualification q ON dn.userid = q.userid
LEFT JOIN (Select * from cur_phone_numbers where type="primary") p On dn.userid = p.userid
Left JOIN cur_accreditation a On dn.userid = a.userid
Left JOIN cur_niche n On dn.userid = n.userid
WHERE dn.userid =69
GROUP BY p.pnumber 
```

对于表 cur_phone_numbers (p) 、 cur_accreditation(a) 、 cur_niche (n) ，结果可以包含用户的 0 到 3 条记录，我目前得到的结果为我提供了数据的所有可能组合。我尝试在列上单独使用 group by ，但这会消除其他列的结果。我不介意用 nulls 得到结果。这是我目前得到的结果：

```
fname         lname        website  qual  year  postqual    pnumber  accred    nspecial
===========================================================================================
First Doctor  Last Doctor  NULL     NULL  NULL  NULL        123      ISO 9001  one
First Doctor  Last Doctor  NULL     NULL  NULL  NULL        123      ISO 9001  two
First Doctor  Last Doctor  NULL     NULL  NULL  NULL        123      ISO       one
First Doctor  Last Doctor  NULL     NULL  NULL  NULL        123      ISO       two
First Doctor  Last Doctor  NULL     NULL  NULL  NULL        1234     ISO 9001  one
First Doctor  Last Doctor  NULL     NULL  NULL  NULL        1234     ISO 9001  two
First Doctor  Last Doctor  NULL     NULL  NULL  NULL        1234     ISO       one
First Doctor  Last Doctor  NULL     NULL  NULL  NULL        1234     ISO       two 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:42:53.313

您必须使用 选择其中一个值`aggregate functions`，例如`max`：

```
SELECT dn.fname, dn.lname,w.websit,q.qual,q.year,q.postqual,max(p.pnumber),max(a.accred),max(n.nspecial)
FROM cur_doctor_names dn
LEFT JOIN cur_website w ON dn.userid = w.userid
LEFT JOIN cur_qualification q ON dn.userid = q.userid
LEFT JOIN (Select * from cur_phone_numbers where type="primary") p On dn.userid = p.userid
Left JOIN cur_accreditation a On dn.userid = a.userid
Left JOIN cur_niche n On dn.userid = n.userid
WHERE dn.userid =69
GROUP BY p.pnumber 
```

# php - Mysql从每个类别中选择1张图片？

> ID：12856868
> 
> 赞同：0
> 
> 时间：2012-10-12T10:13:15.763
> 
> 标签：php, mysql

我正在尝试进行 SQL 查询以从每个类别中选择 1 个图像。

这两个图像都是类别存储到数据库中，在差异表中。

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:17:11.867

```
SELECT it.img_name FROM category_table ct INNER JOIN image_table it ON ct.id=it.cat_id
GROUP BY ct.id 
```

这将为每个类别提供一个 img。但它不会选择哪个，可能是随机选择...

```
SELECT it.img_name FROM category_table ct 
INNER JOIN image_table it ON ct.id=it.cat_id AND it.is_cat_default=1
GROUP BY ct.id 
```

此代码显示使用列 (is_cat_default) 来选择图像。使用它，您可以定义图像是否是图像表中的默认图像。删除`GROUP BY`最后一个中的语句将选择一个以上的图像 par 类别是有多于一个`is_cat_default=1`。

# oracle - ORA-00933: SQL 命令未在插入命令中正确结束

> ID：12856875
> 
> 赞同：3
> 
> 时间：2012-10-12T10:13:35.967
> 
> 标签：oracle, sqlfiddle

有很多同名的问题，但我在其中找不到答案。

我究竟做错了什么？

```
CREATE TABLE J
    (A integer)
;

INSERT INTO J (A)
VALUES
    (1),
    (2),
    (3),
    (4),
    (5),
    (6),
    (7),
    (8),
    (9),
    (10)
; 
```

`create`独自工作。问题只是插入。我在 SQL Fiddle 中尝试过。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T10:18:06.973

您可以通过多种方式进行操作（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!4/48053)）：

```
INSERT ALL 
    INTO J (A) VALUES (1)
    INTO J (A) VALUES (2)
    INTO J (A) VALUES (3)
    INTO J (A) VALUES (4)
    INTO J (A) VALUES (5)
    INTO J (A) VALUES (6)
    INTO J (A) VALUES (7)
    INTO J (A) VALUES (8)
SELECT * FROM dual
; 
```

或者（参见[SQL Fiddle With Demo](http://sqlfiddle.com/#!4/f315a)）：

```
INSERT INTO J (A)
select  (1) from dual union all
select  (2) from dual union all
select  (3) from dual union all
select  (4) from dual union all
select  (5) from dual union all
select  (6) from dual union all
select  (7) from dual union all
select  (8) from dual union all
select  (9) from dual union all
select  (10) from dual 
```

甚至`INSERT`每个单独的声明：

```
INSERT INTO J (A) VALUES (1);
INSERT INTO J (A) VALUES (2);
INSERT INTO J (A) VALUES (3);
INSERT INTO J (A) VALUES (4);
INSERT INTO J (A) VALUES (5);
INSERT INTO J (A) VALUES (6); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:18:46.617

您正在将多个值添加到 1 列表中。

你需要 `Insert into J (A) values (1);`

`Insert into J (A) values (2);`

ETC

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T10:19:16.343

尝试：

```
INSERT INTO J (A) VALUES (1);
INSERT INTO J (A) VALUES (2);
INSERT INTO J (A) VALUES (3);
INSERT INTO J (A) VALUES (4);
...
INSERT INTO J (A) VALUES (10); 
```

# c++ - linux守护进程的结构

> ID：12856879
> 
> 赞同：0
> 
> 时间：2012-10-12T10:13:44.700
> 
> 标签：c++, linux, parsing, logging, daemon

我尝试用 c++ 编写一个小守护进程，而不是在 linux 中运行。

我喜欢守护进程每分钟解析一个 iptables 日志文件。

构建代码的最佳方式是什么，也许是睡眠、线程或其他东西？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T10:16:11.483

你需要一个守护进程吗？即你需要一个一直运行的进程吗？

根据上面的描述，我很想调用一个脚本每分钟通过`cron`.

# php - 按比例缩放 HTML 以完全适合 PDF A4 大小

> ID：12856880
> 
> 赞同：9
> 
> 时间：2012-10-12T10:13:47.400
> 
> 标签：php, jquery, pdf, pdf-generation, wkhtmltopdf

我正在使用 PHP、Mysql、jQuery。我有一个要转换成高分辨率 A4 尺寸 PDF 的网页：http: [//optisolbusiness.com/funeral_site/sample/index/id/255](http://optisolbusiness.com/funeral_site/sample/index/id/255)。

我已经使用 将 HTML 转换为 PDF `wkhtmltopdf`，效果很好。

这是生成的 PDF [http://optisolbusiness.com/Guru/Gurupdf/optisol.pdf](http://optisolbusiness.com/Guru/Gurupdf/optisol.pdf)。但是 HTML 并不完全适合 PDF 大小；PDF 中的 HTML 周围有空格。如何缩放 HTML 以适应 A4 PDF 大小 100%？重要的是 html 内的内容（即）文本大小、图像宽度和高度、背景图像也按比例缩放。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T10:41:23.347

您的背景图像不是完全高分辨率，这在打印时看起来不太好。

我不知道 wkhtmltopdf 本身，但是您的身体已经设置了绝对尺寸（以英寸为单位）。这大概就是问题所在。你的身体有一个最大尺寸，内容也有一个绝对尺寸（由于背景图像像素尺寸）。

对于 html 到打印的转换来说，这不是一个好的起点，而 PDF 本质上是打印的。

**做什么（中级）**

*   消除身体的任何尺寸限制
*   wkhtml... 有一个名为 的开关`zoom`，`1.5`应该是填充页面的适当值
*   使用页面大小 a4

**做什么（“正确”的方式）**

*   消除身体的尺寸限制
*   使用 html 元素和 css 样式构建背景边框（黑色的）
    *   避免为这些定义“宽度”规则。您只需定义一次“宽度”，所有其他宽度都应设置为“自动”。
    *   高度将被证明是麻烦的，因为 div 仅与内容所需的高度一样高。但是设置 height: 100% 不考虑边框和边距大小。
*   那个黄色十字也可以用css设计，或者更高分辨率的png/jpeg
*   仅使用“真实”尺寸。这意味着不要*使用*像素，使用点、英寸或毫米。您可以使用 % 值，但要确保这些是实际尺寸的 % 值（这意味着在某些时候父元素具有实际尺寸）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:22:09.170

我会说你总是会努力让它变得完美。在我看来，您最好直接编写 PDF，而不是依赖第三方工具。

考虑研究[FPDF](http://www.fpdf.org/)，一个开源 PHP PDF 编写库。请注意，该网站看起来已经过时，但功能运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:19:23.457

You can set the size of the body to the size of the page.. in case of A4 that is 210x297mm.

Btw: you should only be using width in percentage, otherwise wkhtmltopdf will have to try and convert it.

So make sure you use `width: 100%;` if you want it to fill all the room. ;)

BTW: If you want real high quality PDFs you will need to create them conforming to at least the [PDF/X-3 standard](http://www.prepressure.com/pdf/basics/pdfx-3). I don't think `wkhtmltopdf` does that tho.

# php - PHP / mySQL 日期/时间计算 (OTRS)

> ID：12856889
> 
> 赞同：0
> 
> 时间：2012-10-12T10:14:33.440
> 
> 标签：php, mysql, otrs

我正在尝试将几个 PHP 页面放在一起作为 OTRS 的仪表板。想法是将其输出到办公室的显示器上，以显示接近第一响应和更新升级的工单。到目前为止，我还不是一个为此苦苦挣扎的开发人员。我已经设法让它只输出设置了升级时间的票......太棒了！但是我想显示升级之前的时间。这是我完全无能为力的地方。我试过在没有太多运气的情况下通过 php/mysql 指南混淆我的方式。

到目前为止，我已经包含了我的代码......不仅希望有人可以指出我在升级列中添加时间的方向（我猜这涉及根据当前日期操作 escalation_update_time （Unix） /时间？），但它也可以帮助某人做我想要实现的同样的事情......这将非常有用！（obv 更改了 IP/用户名/密码）。

所以总结一下；理想情况下，我想添加到以下脚本的内容是：

能够以标准日期/时间格式（而不是 Unix）显示升级时间 能够显示升级前的倒计时，例如每张工单的 3 小时 15 分钟或 2 天 3 小时 14 分钟等

我猜这不是 OTRS 特有的，它适用于任何 mySQL/PHP 环境，所以希望那里有一个能理解这些东西的神童！

预先感谢您提供任何指导或帮助，任何人都可以提供:)

```
<html><head><title>OTRS - First Contact</title>
<link rel="stylesheet" type="text/css" href="styles.css" />
</head><body>
<?php
$db_host = '192.168.1.254';
$db_user = 'myuser';
$db_pwd = 'mypassword';

$database = 'otrs';
$table = 'users';

if (!mysql_connect($db_host, $db_user, $db_pwd))
die("Can't connect to database");

if (!mysql_select_db($database))
die("Can't select database");

// sending query
$result = mysql_query("SELECT  q.name AS queue_name, t.tn, t.customer_id,a .a_from,      t.title, a.create_time, create_time_unix, escalation_update_time
FROM    queue AS q, ticket AS t, article AS a, (
        SELECT  _a.ticket_id, MAX(_a.create_time) AS create_time
        FROM    ticket AS _t, ticket_state AS _t_s, article AS _a
        WHERE   _t_s.name IN ('new', 'open')
        AND     _t.ticket_state_id = _t_s.id
        AND     _a.ticket_id = _t.id            
        GROUP   BY _a.ticket_id
    ) a_max
WHERE   q.id = t.queue_id
AND     t.id = a_max.ticket_id
AND     a.create_time = a_max.create_time
AND     q.name = 'Service Desk'
AND      escalation_response_time >0
GROUP   BY t.id
ORDER   BY a.create_time ASC");
if (!$result) {
die("Query to show fields from table failed");
}

$fields_num = mysql_num_fields($result);

echo "<h1>Ticket Escalations (First Contact)</h1>";
echo "<table border='1'><tr>";
// printing table headers

echo "<td>Queue</td>";
echo "<td>Ticket#</td>";
echo "<td>Store</td>";
echo "<td>Customer</td>";
echo "<td>Subject</td>";
echo "<td>Last Update</td>";
echo "<td>Created Time (Unix)</td>";
echo "<td>Escalation Time</td>";

echo "</tr>\n";
// printing table rows

while($row = mysql_fetch_row($result))
{
echo "<tr>";

// $row is array... foreach( .. ) puts every element
// of $row to $cell variable
foreach($row as $cell)
    echo "<td>$cell</td>";   
echo "</tr>\n";
}
mysql_free_result($result);
?>
</body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:37:57.000

您应该尝试使用 php date() 和 strtotime() 函数。对于倒计时选项[http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:46:05.573

我认为你应该改变你的方法：如果你使用 Perl 和[OTRS API](http://dev.otrs.org/3.1/)，你可以使用 TicketSearch 对象，它允许你搜索升级时间：

```
 # you can use all following escalation options with this four different ways of escalations
    # TicketEscalationTime...
    # TicketEscalationUpdateTime...
    # TicketEscalationResponseTime...
    # TicketEscalationSolutionTime...

    # ticket escalation time of more than 60 minutes ago (optional)
    TicketEscalationTimeOlderMinutes => -60,
    # ticket escalation time of less than 120 minutes ago (optional)
    TicketEscalationTimeNewerMinutes => -120,

    # tickets with escalation time after ... (optional)
    TicketEscalationTimeNewerDate => '2006-01-09 00:00:01',
    # tickets with escalation time before ... (optional)
    TicketEscalationTimeOlderDate => '2006-01-09 23:59:59', 
```

# scala - 为什么以下 scala 代码有效？

> ID：12856893
> 
> 赞同：9
> 
> 时间：2012-10-12T10:14:55.290
> 
> 标签：scala

我的理解是`Unit`= `void`，但为什么我可以传入多个参数？

那么任何人都可以解释为什么以下代码有效吗？

```
def foo(x: Unit) = println("foo")                 
foo("ss", 1) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-12T10:21:29.720

如果您运行代码片段，`scala -print`您将大致获得以下代码输出：

```
/* Definition of foo */
private def foo(x: scala.runtime.BoxedUnit): Unit = {

/* Invocation of foo */
foo({
  new Tuple2("ss", scala.Int.box(1));
  scala.runtime.BoxedUnit.UNIT
}); 
```

如您所见，to 的参数`foo`被重写为创建元组但随后返回 UNIT 的代码块。

我看不出这种行为的充分理由，我宁愿抛出编译器错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T11:14:05.107

一个相关的问题给出了一个不错的答案：

[Scala：为什么我可以将 Int 转换为 Unit？](https://stackoverflow.com/questions/3513364/scala-why-can-i-convert-int-to-unit)

来自[Scala 语言规范 v2.9](http://www.scala-lang.org/docu/files/ScalaReference.pdf)的第 6.26.1 节，“值丢弃”：

> 如果 e 具有某个值类型并且预期类型是 Unit，则通过将 e 嵌入到术语 { e; 中将其转换为预期类型。() }。

因此，在您的情况下，似乎 ("ss", 1) 正在转换为元组，以便可以将其视为单个参数，然后由于该参数类型不是 Unit，因此将其转换为计算该元组的块value 然后返回单位以匹配所需的参数类型。

# mysql - 如何在 Rails 中集成“您的意思是”功能？

> ID：12856897
> 
> 赞同：11
> 
> 时间：2012-10-12T10:15:05.657
> 
> 标签：mysql, ruby-on-rails, full-text-search, search-engine

[您如何像 Google 在某些搜索查询](http://www.google.com/search?hl=en&q=spellling&btnG=Search)中那样实现“您的意思是：” ？

***PS：****我在我的产品中使用狮身人面像。你能建议我如何实现这一点。任何具有此功能的其他搜索引擎的指南或建议都非常受欢迎。我正在使用 rails2.3.8，如果有帮助的话*

**一种解决方案可以是：**

制作一个已知“关键字”或“短语”的字典，如果没有找到任何内容，则在搜索操作中运行该字典中的辅助查询。每当创建可搜索条目时更新该字典，例如博客文章或用户名。

*   查询=“超人”

*   dictionary = ["superman", "batman", "hanuman" ...] (在 DB 表中)

*   搜索（查询）

*   如果没有结果，那么

在字典中搜索（其中“关键字”LIKE 查询或“短语”LIKE 查询）=>“超人”

检查 sphinx 或 solr 文档。他们可能有一个更好的“喜欢”查询的实现，它返回一个匹配的百分比。

*   display -> 你的意思是“超人”吗？

但关键是如何使其高效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T05:14:12.263

看看[Damerau-Levenshtein](http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance)距离算法。它计算两个字符串之间的“距离”，并确定将一个字符串转换为另一个字符串需要多少步。步数越少，两根弦越接近。

[本文](https://samjlevy.com/mysql-levenshtein-and-damerau-levenshtein-udfs/)展示了作为 MySQL 存储函数实现的算法。

该算法比 LIKE 或 SOUNDEX 好得多。

我相信谷歌使用众包数据而不是算法。即，如果用户键入 abcd，单击后退按钮，然后立即搜索 abd，则它会在两个搜索词之间建立关系，因为用户对结果不满意。一旦你有一个非常大的社区搜索，就会出现这种模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T19:12:55.663

您应该看看 Google 如何实现类似这样的实际理论：[如何编写拼写校正器](http://norvig.com/spell-correct.html)。

尽管那篇文章是用 Python 编写的，但在文章底部有指向其他语言实现的链接。这是一个[Ruby 实现](http://lojic.com/blog/2008/09/04/how-to-write-a-spelling-corrector-in-ruby/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-01T13:28:38.183

这对我有用：

```
SELECT * FROM table_name WHERE soundex(field_name) LIKE CONCAT('%', soundex('searching_element'), '%') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T14:03:21.680

现在，您的意思是基于语音拼写校正器实现功能。当我们拼写错误时，我们通常会写出发音相似的单词。基于这个想法，语音拼写校正器在其数据库中搜索最相似的单词。使用上下文（对于多词查询，其他词也有助于确定正确的词）和词的流行度来打破相似性关系。如果两个词在语音上与拼写错误的词非常接近，则选择符合上下文且在日常生活中更频繁使用的词。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T11:45:52.653

我认为您正在寻找字符串匹配算法。

我记得当*初始化*稍微拼错时， [mislav 的要点](https://gist.github.com/3387743)会引发错误。那可能是一本好书。

 *另外，看看他建议的一些文章：

*   [http://www.catalysoft.com/articles/StrikeAMatch.html](http://www.catalysoft.com/articles/StrikeAMatch.html)
*   [http://www.catalysoft.com/articles/MatchingSimilarStrings.html](http://www.catalysoft.com/articles/MatchingSimilarStrings.html)*

# jquery - jQuery 动画悬停菜单栏改进

> ID：12856898
> 
> 赞同：0
> 
> 时间：2012-10-12T10:15:07.270
> 
> 标签：jquery, css, jquery-animate

我做了一个小提琴，可以在这里找到：

[http://jsfiddle.net/MCPke/1/](http://jsfiddle.net/MCPke/1/)

这是一个具有活动状态的导航栏，当您将鼠标悬停在导航栏中的另一个链接上时，活动状态图像会动画到该位置。

我认为这很笨拙，所以我希望有人可以帮助进行一些改进？

我想做的是在链接之间使用填充，以便在将鼠标悬停在链接之间的空白上时不会回弹，它实际上会在该空白左侧的导航项上保持活动状态。

希望这是有道理的。

通常我也会在问题中发布代码，但 jQuery 很长，但如果被要求，我会用它更新问题。

# java - a4j:ajax 监听异常 MethodNotFoundException

> ID：12856902
> 
> 赞同：2
> 
> 时间：2012-10-12T10:15:28.373
> 
> 标签：java, ajax, jsf, listener, ajax4jsf

我开始研究 RichFaces 4.2.2 并在简单示例中遇到问题，我有一个 xml：

```
<ui:define name="content">       
        <h:form>
            <rich:panel style="width: 50%">
                <h:panelGrid columns="2">
                    <h:outputText value="Name:"/>
                    <h:inputText id="inp" value="#{echoBean.name}">
                        <a4j:ajax event="keyup" render="echo count"  listener="#{echoBean.countListener}"/>
                    </h:inputText>

                    <h:outputText value="Echo:"/>
                    <h:outputText id="echo" value="#{echoBean.name}"/>

                    <h:outputText value="Count:"/>
                    <h:outputText id="count" value="#{echoBean.count}"/>
                </h:panelGrid>
                <a4j:commandButton value="Submit" actionListener="#{echoBean.countListener}" render="echo, count"/>
            </rich:panel>
        </h:form>

</ui:define> 
```

和一个简单的bean：

```
@Component("echoBean")
@Scope(value = "session")
public class EchoBean {
private String name;
private Integer count = 0;

//getter setter methods here

public void countListener(ActionEvent event) {
    count++;
    }
} 
```

当我尝试在 inputText 中打印时出现异常：

```
Caused by: javax.el.MethodNotFoundException: /home.xhtml @35,112 listener="#{echoBean.countListener}": Method not found: com.example.training.bean.EchoBean@d523fa.countListener()
at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:102)
at org.ajax4jsf.component.behavior.MethodExpressionAjaxBehaviorListener.processAjaxBehavior(MethodExpressionAjaxBehaviorListener.java:71)
at javax.faces.event.AjaxBehaviorEvent.processListener(AjaxBehaviorEvent.java:113)
at javax.faces.component.behavior.BehaviorBase.broadcast(BehaviorBase.java:98)
at org.ajax4jsf.component.behavior.AjaxBehavior.broadcast(AjaxBehavior.java:348)
at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:763)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:775)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1267)
at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:82)
... 19 more 
```

但为什么？使用按钮，这个相同的监听器工作得很好，并且在 a4j:ajax 中的“监听器”参数的文档中它说：

*表达式必须计算为接受 ActionEvent 参数、返回类型为 void 的公共方法，或者计算为不接受任何参数且返回类型为 void 的公共方法*

为什么它`countListener()`不使用`ActionEvent`参数？我不明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T01:29:46.887

为了能够在`listener`RF4 中使用该属性，您的侦听器方法应该采用`AjaxBehaviorEvent`类型的参数，而不是`ActionEvent`类型。从错误消息中可以看出，另一种替代方法是定义一个标准的 java 方法，该方法不接受参数并且具有 void 返回类型，如

```
 public void countListener(); 
```

> 为什么它使用 countListener() 没有 ActionEvent 参数？我不明白。

这是 API 的合同，您必须遵守才能使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-15T13:03:21.830

使用具有以下签名的 bean 函数 void 作为返回类型 ActionEvent 对象作为参数 bean 函数的示例如下

```
public void countListener(ActionEvent event) {} 
```

# makefile - 使目标名称从另一个

> ID：12856904
> 
> 赞同：0
> 
> 时间：2012-10-12T10:15:28.677
> 
> 标签：makefile

*使用.SECONDEXPANSION*动态“创建”目标名称时遇到问题：

 *小**Makefile**重现问题：

```
CONFIGS = test1 test2 test3

.SECONDEXPANSION:

all: $(CONFIGS)

OBJECTS=$$(CFG_NAME)_OBJECTS

$(CONFIGS) : CFG_NAME=$@
$(CONFIGS) : $(OBJECTS) 
    @echo $(CFG_NAME) $@ from $^

$(OBJECTS):
    @echo OBJECTS $@ from $^
    @echo DO IT 
```

它说：“没有规则来制作目标'test1_OBJECTS'。我该如何解决这个问题？

**编辑：改变答案**

非常感谢您的回答。这是我任务的简单变体。

所以我尝试用另一种方式来回答。

```
CONFIGS = test1 test2 test3
PLATFORMS = x86 ppc arm
#will be test1x86 test2x86 ... test1ppc ... test3arm,
#so it is long way to enumarate all variants
VARIANTS = $(foreach c, $(CONFIGS), $(foreach p, $(PLATFORMS), $(c)$(p)))
#C FILE LIST
CFILES:=$(shell /bin/find -name "*.c")

.SECONDEXPANSION:

all: $(VARIANTS)

#More Comlex Rule
#Want to corresponding objects be in bins/test1x86/
OBJECTS:=$(CFILES:%.c=bins/$$(CFGNAME)%.o)

$(CONFIGS) : CFG_NAME=$@
$(CONFIGS) : $(OBJECTS) 
    @echo $(CFG_NAME) $@ from $^

#More complex prerequisites
#I understand that $$(CFGNAME) will be resolve incorrect.
#For each *.c file in subdir I would have object in corresponding path.
#For example, '1/2/3/test.c' will use for generate 
#object file 'bins/test1x86/1/2/3/test.o',
#when I call 'make testx86' or 'make all' (it will build all VARIANTS),
#in 'bins/test1x86/1/2/3/'.
#So what have I do?
$(OBJECTS): bins/$$(CFGNAME)_OBJECTS/%o : %.c
    @echo OBJECTS $@ from $^
    @echo DO IT 
```

所以，我想避免递归调用。你能帮助我吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:15:43.033

您有一个 规则`$(OBJECTS)`，但该目标扩展为`$(CFG_NAME)_OBJECTS`，*不再*（永远）扩展，因此它无法匹配任何内容。试试这个：

```
test1_OBJECTS test2_OBJECTS test3_OBJECTS:
    @echo OBJECTS $@ from $^
    @echo DO IT 
```

或更好：

```
OBJECT_SETS = $(addsuffix _OBJECTS, $(CONFIGS))

$(OBJECT_SETS):
    @echo OBJECTS $@ from $^
    @echo DO IT 
```

（我敢肯定你意识到你的例子根本不需要`SECONDEXPANSION`。）

**编辑：**

这应该是一个单独的问题，但我会在这里尝试回答。（并且请在您的 makefile 的注释中使用标点符号；它们很难理解。）

您的问题有不止一种解决方案。这是一个：

```
vpath %.c $(dir $(CFILES))

CFILES := $(notdir $(CFILES)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:50:42.603

我明白了。

```
CONFIGS = test1 test2 test3
PLATFORMS = p1 p2
#Will be testp1 test1p2 .. test3p2
VARIANTS = $(foreach c, $(CONFIGS), $(foreach p, $(PLATFORMS), $(c)$(p)))

.SECONDEXPANSION:
#.c files list in all subfolders
cfiles = $(shell /bin/find -name "*.c")
#objects for these .c files for custom VARIANT
objects = $(patsubst %.c,%.o,$(addprefix bins/$1/,$(cfiles)))
#Get .c source for object (e.g. bins/test1p1/tests/main_test.o => tests/main_test.c)
get_src=$(shell echo $1 | sed 's/[^\/]*\/[^\/]*\/\(.*\)/\1.c/')

#Build All Variants
all: $(VARIANTS)

#Build objects. Target list contains all objects for all variants.
#Prerequisites get .c sources from the pattern rule for targets
$(foreach v, $(VARIANTS), $(call objects,$(v))) : %.o : $$(call get_src,$$*)
    @echo OBJECTS $@ FROM $^

#Variants rule, depends on objects 
$(VARIANTS): $(call objects,$$@)
    @echo $@ from $^ 
```

谢谢你，贝塔。你只是尝试过。:) 也许有人有风格或效率建议。*

# php - Git WebHook 不会拉（PHP）

> ID：12856907
> 
> 赞同：1
> 
> 时间：2012-10-12T10:15:41.390
> 
> 标签：php, git, webhooks

我有一个 PHP 文件，`hook.php`看起来像这样：

`<?php `cd .. && git pull`;`

该文件位于`/var/www/oliverash.me/site/`. 但是，需要拉取的 git 仓库是`/var/www/oliverash.me/`. `./site`是 Apache 将其视为文档根目录的文件夹。

当我在浏览器中运行该文件时，它似乎并没有拉取存储库。

我也尝试过回显结果，但页面是空白的。

`<?php echo `cd .. && git pull`;`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T06:52:02.603

我不能发表评论来回复你，但我假设你正在运行一个 *nix 系统。如果您的 apache/php 守护进程没有访问权限，您将获得权限被拒绝`.git/`。`.git/`您可以递归地更改目录的所有者/组。或者做一个`chmod -R o+rw .git/*`给每个人（即不是所有者，不是组）在 git 目录中读写的权限，这应该清除你得到的权限错误。

**编辑** 只需重新阅读问题，因此可能不需要以下内容，但以防万一。

但是，这样做，您需要记住，任何有权访问您的服务器的人都可以通过`http://myurl/.git/`etc 访问这些服务器。因此，作为安全预防措施，我会添加一个`.htaccess`文件，例如：

```
order deny, allow
deny from all 
```

在`.git`目录中，这样 apache 将拒绝从 Web 浏览器访问其中的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T14:49:36.030

你肯定有一个权限问题，也许是几个。

1.  php页面将以apache用户身份执行
2.  该用户必须能够写入有问题的 git 存储库
3.  该用户必须能够进行有问题的拉动
4.  您没有指定拉取的来源是什么，但如果它是例如 git: 或 ssh: repo，那么该用户将需要权限（密钥、用户名/密码等）来访问远程执行从拉。
5.  刚刚看到它想要 /var/www/.ssh - 所以你使用的是 ssh:// 远程，这很好，但由于它作为用户 apache 运行（/var/www 是用户 apache 的主目录），它正在寻找/var/www/.ssh 中的键，它没有找到，因此失败。解决方案：
    1.  使用 sudo 切换到具有 perms 的用户并以该用户身份运行 git pull（在您的 php 中，执行 'sudo git pull'，并在您的 /etc/sudoers 中放置一行允许用户 apache 运行 'git pull ' 命令）
    2.  设置一个 .ssh/config 文件，该文件指定一个`Host`是远程的，一个`User`用于登录的，一个`Identity`是远程允许 ssh 进入并执行拉取的私钥的路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-11T12:21:55.150

在根目录或您可以访问它的任何地方创建 webhook.php

$result = exec("cd /path/to/repo && git pull origin branch");

确保权限是 775 并且您的文件的用户和您的站点目录是 www-data 所有者

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T14:24:23.623

您在这里执行命令的用户有问题。

根据您的各种评论，系统命令以名为 **`apache`**(homedir is `/var/www`) 的用户身份执行。`whoami`您可以通过在 PHP 脚本中运行命令来验证这一点：

```
<?php echo `whoami`; 
```

该用户**`apache`**通常是您的网络服务器在其下运行的用户，然后运行 ​​PHP，然后运行 ​​shell 命令。

显然您想以其他用户的身份运行该命令，但到目前为止您还没有共享哪一个用户的信息。

在正确的用户下运行 shell 命令，问题应该会消失。

在 linux 系统上，在不同用户下运行其他命令的命令称为`sudo`另一个`su`：

*   [sudo(8) - Linux 手册页](http://linux.die.net/man/8/sudo)
*   [su(1) - Linux 手册页](http://linux.die.net/man/1/su)

或者，您可以使用 suexec 在与 webserver 用户不同的用户下执行 PHP。

在任何情况下，您都需要确保您有一个能够执行 git 命令的用户。我不知道你是如何自己测试的，我知道的最好方法是 ssh 进入服务器，手动执行 git pull 并收集所需的数据，如用户名、主目录等。

# c# - 从编译成 .NET 程序集的文本文件资源中读取

> ID：12856912
> 
> 赞同：2
> 
> 时间：2012-10-12T10:16:04.117
> 
> 标签：c#, .net, resources

> **可能重复：**
> [如何读取嵌入的资源文本文件](https://stackoverflow.com/questions/3314140/how-to-read-embedded-resource-text-file)

我尝试创建一个从“资源”文件中读取的简单应用程序，该文件已添加到我的解决方案中。我试过这个，但这不起作用：

```
static void Main(string[] args)
{
    StreamResourceInfo streamResourceInfo = Application.GetContentStream(new Uri("pack://application:,,,/myfile.txt", UriKind.Absolute));
    StreamReader sr = new StreamReader(streamResourceInfo.Stream);
    var content = sr.ReadToEnd();
    Console.WriteLine(content);
} 
```

它说：“无效的 URI：指定的端口无效。”

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:51:49.783

我的最终解决方案：

```
class Program
{
    static void Main(string[] args)
    {
        Stream stream = typeof(Program).Assembly.GetManifestResourceStream("TheNameOfMyProject.TheNameOfSubFolder.file.txt");
        StreamReader sr = new StreamReader(stream);
        var content = sr.ReadToEnd();
        Console.WriteLine(content);
        Console.ReadLine();
    }
} 
```

# android - 我们可以从屏幕中间的某个地方打开滑动抽屉吗？

> ID：12856920
> 
> 赞同：1
> 
> 时间：2012-10-12T10:16:29.010
> 
> 标签：android, android-layout, layout

我希望滑动抽屉从屏幕中间打开，而不是像往常那样从屏幕的左侧、右侧、顶部或底部打开。

可能吗？我该怎么做 ？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T04:50:22.443

最后我解决了我的问题。解决方案是-采用父布局相对布局。在滑动抽屉里放

```
 android:layout_above="@+id/your_below_layout . 
```

我的问题是，我使用的是线性布局。谢谢

# iphone - iOS 6 UIAutomation - “尝试运行脚本时发生错误”

> ID：12856925
> 
> 赞同：3
> 
> 时间：2012-10-12T10:16:36.163
> 
> 标签：iphone, objective-c, instruments, ui-automation

> **可能重复：**
> [为什么我看到“尝试运行脚本时发生错误”。在 UI 自动化工具中？](https://stackoverflow.com/questions/8906375/why-am-i-seeing-an-error-occurred-while-trying-to-run-the-script-in-the-ui-au)

我完全被困住了。每次我尝试启动 UIAutomation 工具时，我都会收到错误消息： ![在此处输入图像描述](../Images/5817359ce376dceeedd5de1fd8a46214.png)

我必须遵循[本教程](http://blog.manbolo.com/2012/04/08/ios-automated-tests-with-uiautomation)

任何帮助都会得到帮助！补充：iOS部署目标设置为：4.0 尝试在iPhone Simulator 5.0、5.1、6.0上启动

# winapi - 隐藏 MFC 对话窗口

> ID：12856926
> 
> 赞同：5
> 
> 时间：2012-10-12T10:16:40.220
> 
> 标签：winapi, visual-c++, mfc

我编写了一个基于 MFC 对话框的应用程序，该应用程序由另一个应用程序启动。目前，我还没有添加任何代码。这只是我得到的默认文件。其他应用程序可以成功启动我的应用程序。

当另一个应用程序启动它时，我试图隐藏我的应用程序的窗口。

```
BOOL CMyApp::InitInstance()
{
    CMyAppDlg dlg;
    m_pMainWnd = &dlg;        

    INT_PTR nResponse = dlg.DoModal();

    if (nResponse == IDOK)
    {
    }
    else if (nResponse == IDCANCEL)
    { 
    }

    return FALSE;
} 
```

我尝试使用：

```
dlg.ShowWindow(SW_HIDE) 
```

但它仍然没有隐藏窗口。

我怎样才能完成这项任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T10:30:16.817

我建议你在某个地方遇到另一个问题。

如果您创建一个全新的空白 MFC 应用程序 (Visual Studio 2010)，那么在 App::InitInstance 中，设置 SW_HIDE 而不是 SW_SHOW**确实**会导致结果窗口被隐藏。

```
BOOL CProj1App::InitInstance()
{

// boilerplate code
      . . . 

// The one and only window has been initialized, so show and update it
m_pMainWnd->ShowWindow(SW_HIDE);   // WORKS!
m_pMainWnd->UpdateWindow();

return TRUE;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T13:03:55.570

一旦你打电话，`DoModal`你的对话框就注定要显示出来。只有一种解决方法可以成功避免焦点/闪烁问题。在这里查看我的答案：[隐藏 MFC 对话框](https://stackoverflow.com/questions/8255106/hiding-an-mfc-dialog-box)

因此，您的代码应如下所示：

```
BOOL CMyApp::InitInstance() 
{ 
    CMyAppDlg dlg;
    dlg.SetVisible(FALSE); // Sets m_visible flag to FALSE.

    m_pMainWnd = &dlg;         

    INT_PTR nResponse = dlg.DoModal(); 

    if (nResponse == IDOK) 
    { 
    } 
    else if (nResponse == IDCANCEL) 
    {  
    } 

    return FALSE; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T13:49:49.810

解决上述问题。InitInstance 代码应如下所示：

```
BOOL CMyApp::InitInstance()
{
    CWinApp::InitInstance();
    AfxEnableControlContainer();

    CMyAppDlg dlg;
    dlg.Create(IDD_MyAppUI_DIALOG,NULL);
    dlg.ShowWindow(SW_HIDE);
    dlg.UpdateWindow();
    m_pMainWnd = &dlg;

    return TRUE;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T16:22:04.337

您必须从内部隐藏对话框。

1.  重载 OnInitDialog
2.  调用 CDialogEx::OnInitDialog()
3.  隐藏你的窗口并返回

这是代码

```
BOOL CMyAppDlg::OnInitDialog()
{
    BOOL result = CDialogEx::OnInitDialog();

    this->ShowWindow(SW_HIDE);

    return result;  // return TRUE  unless you set the focus to a control
} 
```

还有[另一种带有标记值的方法](http://www.codeproject.com/Articles/1724/Some-handy-dialog-box-tricks-tips-and-workarounds)，YMMV。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-13T13:44:38.113

首先让我解决以前解决方案的一些问题。

**chintan s：** 当函数超出范围时，确实对话框将被终止。如果对话框被声明为应用程序类的成员变量，这将是一个有效的解决方案。

**Vikky：** 不需要调用 Windows API，因为对话框是从 CWnd 派生的，它继承了 ShowWindow 成员，它只接受一个参数：show 命令。

**ixe013：** 此解决方案将起作用，但是，在对话框隐藏之前，它会闪烁，因为在调用 OnInitDialog 之前调用了 ShowWindow。

**Pete：** 这行不通，因为模态对话框在 m_pMainWnd 分配任何值之前就开始了。

**解决方案由 ixe013 指出。**

这是迄今为止唯一可行的解​​决方案，但您必须在对话框类中声明**成员**变量，如文章中所述。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T10:19:57.687

showWindow 方法有 2 个变量。

*   窗户把手
*   nCmdShow（控制窗口的显示方式）

    **BOOL WINAPI ShowWindow（ *在* HWND hWnd 中， *在* int nCmdShow 中）；**

    HWND hWnd = GetSafeHwnd();

    ShowWindow(hWnd,SW_HIDE);

看[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548%28v=vs.85%29.aspx)

# python - 如何将我的 Python C 模块放入包中？

> ID：12856931
> 
> 赞同：7
> 
> 时间：2012-10-12T10:17:08.487
> 
> 标签：python, setuptools, python-module, distutils

我想在一个包下收集多个 Python 模块，因此它们不会从全局 Python 包和模块集中保留太多名称。但是我对用 C 编写的模块有问题。

这是一个非常简单的示例，直接来自官方 Python 文档。您可以从此处在页面底部找到它：http: [//docs.python.org/distutils/examples.html](http://docs.python.org/distutils/examples.html)

```
from distutils.core import setup
from distutils.extension import Extension
setup(name='foobar',
      version='1.0',
      ext_modules=[Extension('foopkg.foo', ['foo.c'])],
      ) 
```

我的 foo.c 文件看起来像这样

```
#include <Python.h>

static PyObject *
foo_bar(PyObject *self, PyObject *args);

static PyMethodDef FooMethods[] = {
    {
        "bar",
        foo_bar,
        METH_VARARGS,
        ""
    },
    {NULL, NULL, 0, NULL}
};

static PyObject *
foo_bar(PyObject *self, PyObject *args)
{
    return Py_BuildValue("s", "foobar");
}

PyMODINIT_FUNC
initfoo(void)
{
    (void)Py_InitModule("foo", FooMethods);
}

int
main(int argc, char *argv[])
{
    // Pass argv[0] to the Python interpreter
    Py_SetProgramName(argv[0]);

    // Initialize the Python interpreter.  Required.
    Py_Initialize();

    // Add a static module
    initfoo();

    return 0;
} 
```

它可以正常构建和安装，但我无法导入 foopkg.foo！如果我将它重命名为“foo”，它会完美运行。

有什么想法可以让“foopkg.foo”工作吗？例如，将 C 代码中的 Py_InitModule() 中的“foo”更改为“foopkg.foo”并没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T10:44:04.343

`__init__.py`文件夹中必须有`foopkg`文件，否则 Python 无法识别为包。

在其中创建一个`foopkg`文件夹`setup.py`，并在其中放置一个空文件`__init__.py`，并在其中添加`packages`一行`setup.py`：

```
from distutils.core import setup
from distutils.extension import Extension
setup(name='foobar',
      version='1.0',
      packages=['foopkg'],
      ext_modules=[Extension('foopkg.foo', ['foo.c'])],
      ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-30T08:11:17.537

[`distutils`自 python 3.10 起将被弃用](https://www.python.org/dev/peps/pep-0632/)，您可以改为使用[`setuptools`](https://setuptools.readthedocs.io/en/latest/)，这是 的增强替代品`distutils`，因此您无需`packages`在`setup()`. 例如 ：

```
from setuptools import setup, Extension
setup(name='foobar',
      version='1.0',
      ext_modules=[Extension('foopkg.foo', ['foo.c'])],
      ) 
```

然后构建并安装你的 C 扩展

```
python /PATH/TO/setup.py install 
```

成功构建 C 扩展后，通过运行以下命令测试是否可以按预期导入：

```
python -c "from foopkg import foo" 
```

[旁注] 还有一件事`setuptool`是您可以通过简单地运行来卸载 C 扩展包`pip uninstall`，例如：`python -m pip uninstall foobar`

# java - Java：用对象填充 JComboBox

> ID：12856934
> 
> 赞同：0
> 
> 时间：2012-10-12T10:17:16.167
> 
> 标签：java, swing, object, arraylist, jcombobox

我正在尝试用对象填充 jComboBox。我让它在一个类中工作，但在这个类中它给出了一个`NullPointerException`但代码几乎相同。我在这里想念什么？

我用来填充组合框的代码：

我已将每个变量都翻译成英文并删除了一些不必要的东西。我希望你们现在更清楚：

```
package unive.billing.boundary.clientmanager.frames;

import unive.billing.control.ClientsManager;
import unive.billing.control.InsuranceManager;

/**
 *
 * @author Forza
 */

public class ClientFrame extends javax.swing.JFrame {

/**
 * Creates new form AddClientGUI
 */
private ClientsManager clientmanager;
private InsuranceManager insurancemanager;

public ClientFrame() {
    initComponents();
    clientmanager = new ClientsManager();
    clientmanager.printList();
    updateComboBoxCompany();
    updateComboBoxInsurance();
}

private ClientsManager clientmanager;
private InsuranceManager insurancemanager;

public ClientFrame() {
    initComponents();
    clientmanager = new ClientsManager();
    clientmanager.printList();
    updateComboBoxCompany();
    updateComboBoxInsurance();
}

public void updateComboBoxCompany() 
{
    for (Object object : insurancemanager.getCompanyNames()) 
    {
        companyComboBox.addItem(object);
    }   
}

public void updateComboBoxInsurance() 
{
    for (Object object : insurancemanager.getPolicyNames()) 
    {
        insuranceComboBox.addItem(object);
    }   
} 
```

以下是使用的方法：

```
public Object[] getCompanyNames() 
{
    ArrayList<String> cnames = new ArrayList<String>();
    for (InsurancesCompany company : insurancecompanyList) 
    {
        cnames.add(company.getCompanyName());
    }
    return cnames.toArray();
}

public Object[] getPolicyNames() 
{
    ArrayList<String> vnames = new ArrayList<String>();
    for (Insurance insurance : insuranceList) 
    {
        vnames.add(insurance.getPolicyName());
    }
    return vnames.toArray();
} 
```

这就是我的列表的初始化方式：

```
public class InsuranceManager {

private String insurancePath;
private String insurancecompanyenPath;
private static List<InsurancesCompany> insurancecompanyList;
private static List<Insurance> insuranceList;
private Insurance currentInsurance;

public InsuranceManager() {
    insurancecompanyenPath = "Files/company.txt";
    insurancePath = "Files/insurance.txt";
    insuranceList = new List<>();
}

public void createNewList() 
{
    insurancecompanyList = new List<>();
    System.out.println("Creates list");
}

public Object[] getCompanyNames() 
{
    ArrayList<String> cnames = new ArrayList<String>();
    for (InsurancesCompany company : insurancecompanyList) 
    {
        cnames.add(company.getCompanyName());
    }
    return cnames.toArray();
}

public Object[] getPolicyNames() 
{
    ArrayList<String> vnames = new ArrayList<String>();
    for (Insurance insurance : insuranceList) 
    {
        vnames.add(insurance.getPolicyName());
    }
    return vnames.toArray();
} 
```

编辑：这是调用 createNewList (maakLijstAan) 的 MainGUI

```
private ClientsManager clientsmanager;
private BillingManager billingmanager;
private InsuranceManager insurancemanager;            

public MainGUI() {
    clientsmanager = new ClientsManager();  
    clientsmanager.CreateNewList();
    insurancemanager = new InsuranceManager();
    insurancemanager.CreateNewList();
    insurancemanager.loadInsuranceCompanyList();
    initComponents();
    jMenuItem1.setText("Save clients"); 
    jMenuItem2.setText("Load clients"); 
    jMenuItem3.setText("Exit");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:58:37.470

您永远不会初始化`verzekeringBeheer`，因此`NullPointerException`当您尝试调用该变量的方法时会得到一个。

您的构造函数中应该有某个地方，如下所示：

```
verzekeringbeheer = new VerzekeringBeheer(); 
```

此外，请尽量避免使您的代码与代码的其他部分耦合。例如：

```
public VerzekeringBeheer() {
    ...
    //verzekeringmaatschappijLijst is never initialized!!!
}

public void maakLijstAan() 
{
    verzekeringmaatschappijLijst = new Lijst<>();
    System.out.println("Maak lijst aan");
}

public Object[] getMaatschappijNamen() 
{
    ArrayList<String> mnamen = new ArrayList<String>();
    // Here you use verzekeringmaatschappijLijst without checking that is not null!!!
    for (VerzekeringsMaatschappij maatschappij : verzekeringmaatschappijLijst) 
    {
        mnamen.add(maatschappij.getMaatschappijNaam());
    }
    return mnamen.toArray();
} 
```

如果没有人打电话，`maakLijstAan`你会得到一个`NullPointerException`。`getMaatschappijNamen`尽量避免如此依赖外部代码的代码，以便顺利运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:54:37.657

*   所有数据[`JComboBox`都存储在`ComboBoxModel`](https://stackoverflow.com/a/7388965/714968)

*   设置[`ComboBoxModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/ComboBoxModel.html)正确的`Objects`类型（`String`,或 simple ） `Integer`， Java7 实现了泛型，[与 Java6 相比](http://docs.oracle.com/javase/6/docs/api/javax/swing/ComboBoxModel.html)存在显着差异`Icon``Object`

*   所有更新（对 the`JComboBox`或其`Model`）必须在[`Event Dispatch Thread`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:24:52.740

我只看到你使用变量，但对我来说它们是初始化的。所以它们是空的，你得到一个 NPE。

`verzekeringmaatschappijLijst`那么又 是如何`verzekeringLijst`初始化的呢？

# algorithm - 归并排序的时间复杂度

> ID：12856939
> 
> 赞同：3
> 
> 时间：2012-10-12T10:17:29.073
> 
> 标签：algorithm, merge

为什么自上而下合并排序的最佳情况的时间复杂度在 O(nlogn) 中？我认为自上而下合并排序的最佳情况是 1，只需要比较 1 次。在最坏情况，最佳情况和平均情况下，自下而上合并排序的时间复杂度如何。

还有一个问题是为什么每次迭代都需要 O(n)？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T10:33:22.903

> 为什么自上而下合并排序的最佳情况的时间复杂度在 O(nlogn) 中？

因为在每次迭代中，您将数组拆分为两个子列表，并递归调用算法。在最好的情况下，您将其完全拆分为一半，从而将（每个递归调用的）问题减少到原始问题的一半。您需要 log_2(n) 次迭代，并且每次迭代都精确`O(n)`（每次迭代都在所有子列表上，总大小仍然是`n`），所以在 total `O(nlogn)`。

但是，通过简单的预处理来检查列表是否已经排序 - 它可以简化为`O(n)`.

由于检查列表是否已排序本身`O(n)`- 它不能在`O(1)`. 请注意，“最佳情况”是 general 的“最佳情况” `n`，而不是特定大小。

> 在最坏情况，最佳情况和平均情况下，自下而上合并排序的时间复杂度如何。

同样的方法可以为您提供 O(n) 自下而上的最佳情况（简单的预处理）。自下而上合并排序的最坏情况和最好情况是`O(nlogn)`- 因为在这种方法中，列表总是被分成 2 个等长（直到差异 1）列表。

# c - C中的整数数组库

> ID：12856941
> 
> 赞同：0
> 
> 时间：2012-10-12T10:17:33.207
> 
> 标签：c, arrays, static-libraries

也许这是一个愚蠢的问题，但是：我正在寻找一个用于 C 中整数数组（排序、搜索......）的经典函数的库，有人知道一个好的库吗？

我可以重写这些函数，但老实说，我很懒惰。

更一般地说，某处是否有已知库的列表？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:21:16.903

GNU C 库对这些功能很有帮助：

[http://www.cs.utah.edu/dept/old/texinfo/glibc-manual-0.02/library_1.html#SEC2](http://www.cs.utah.edu/dept/old/texinfo/glibc-manual-0.02/library_1.html#SEC2)

# screen-scraping - 有没有办法从同一个 IP 发出超过 10K 的 Google 搜索请求？

> ID：12856944
> 
> 赞同：1
> 
> 时间：2012-10-12T10:17:38.313
> 
> 标签：screen-scraping, scrape, google-search

我目前正在开发一个需要从 Google 搜索结果中抓取数据的应用程序。例如`google.com/search?q=domain.com`等等。但谷歌在提出一些请求后阻止了我的 IP 地址。我知道有 Google API，但是周围有很多网站只是直接抓取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:43:26.357

抓取 Google 搜索结果违反了服务条款。谷歌积极劝阻并阻止那些这样做的人。他们免费与您分享他们的信息，但他们不欣赏您尝试获取所有信息的副本。

最好自己爬网域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T16:57:29.113

太糟糕了，如果还不算太晚，我之前没有看到你的问题：

刮谷歌确实违反了他们的服务条款，另一方面你可以选择不接受他们。例如，当您创建 Google 帐户时，您会接受他们的 TOS，但据我所知，您也可以再次拒绝接受（至少在他们更改时）。

对于较少量的数据，您可以使用他们的 API 或他们的商业 API，但如果您需要结果和排名与用户看到的完全一致（SEO 目的），我不知道获得他们许可的官方方法。

我不是律师，因此如果您想确定法律后果，您可能需要咨询律师。

但是，抓取 Google 通常不会导致任何法律问题。我记得即使是必应（微软的引擎）也被抓到在谷歌搜索未知关键词。那发生在几年前。我个人的猜测是，他们的大部分原始结果都是从谷歌秘密复制的。

有一个开源项目[http://google-rank-checker.squabbel.com](http://google-rank-checker.squabbel.com)确实可以抓取大量 Google 结果。据我记得，如果不进行修改，它每天限制为大约 50-70k 个结果页。我建议看一下代码，它是带有 libcURL 的 PHP。

您还需要正确的 IP 地址（未共享，未曾被滥用）。使用单个 IP 抓取将导致在一小时内被 Google 阻止。通常发生的第一件事是验证码，通过解决验证码生成一个允许您继续发出请求的 cookie。如果您继续，您将获得完全禁止。如果你用大量请求“锤击”谷歌，你会提醒他们的员工，他们可以手动禁止整个 ISP 或网络块。

一个合适的数量是每小时大约 10 个请求，一个 IP，这就是我在相关项目中一直坚持的。

因此，如果有人抓取 Google，请确保您具有验证结果并注意意外返回的功能。在这种情况下，您的代码应立即停止访问 Google，以防止进一步访问仅显示验证码的页面。

# android - 可以为Android自动发送短信

> ID：12856946
> 
> 赞同：0
> 
> 时间：2012-10-12T10:17:58.873
> 
> 标签：android

我不确定这个问题是否适合我是 Android 新手。我正在考虑解决一个问题，即当我开车时，我希望我的 Android 自动发送或自动回复任何传入的短信。如果您能指导我或提供一些关于此的教程或代码，将不胜感激。这个任务可以在Android中完成吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:30:04.210

您可以使用[Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html) (GCM) 服务，每次收到传入消息时都会从服务器获得回复。每次您通过广播事件从 GCM 服务器收到回复时，您都可以发送自动回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:30:49.477

您可以使用它来发送消息，但首先您需要在 android 清单文件中设置权限

```
 SmsManager smsManager = SmsManager.getDefault();
                smsManager.sendTextMessage(phoneNumber, null,, smsText, null, null); 
```

有关传入消息或呼叫，请参阅本教程：[Android BroadcastReceiver 教程](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-28T09:45:51.723

```
sendButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {

                if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.M) {
                    int hasSMSPermission = checkSelfPermission(SEND_SMS);
                    if (hasSMSPermission != PackageManager.PERMISSION_GRANTED) {
                        if (!shouldShowRequestPermissionRationale(SEND_SMS)) {
                            showMessageOKCancel("You need to allow access to Send SMS",
                                    new DialogInterface.OnClickListener() {
                                        @Override
                                        public void onClick(DialogInterface dialog, int which) {
                                            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
                                                requestPermissions(new String[] {SEND_SMS},
                                                        REQUEST_SMS);
                                            }
                                        }
                                    });
                            return;
                        }
                        requestPermissions(new String[] {SEND_SMS},
                                REQUEST_SMS);
                        return;
                    }
                    sendMySMS();
                }
            }
        });

sendButton.performClick(); 
```

来源：[https ://github.com/delaroy/SendSms/blob/master/app/src/main/java/com/delaroystudios/sendsms/MainActivity.java](https://github.com/delaroy/SendSms/blob/master/app/src/main/java/com/delaroystudios/sendsms/MainActivity.java)

只需在侦听器后添加“sendButton.performClick()”。我尝试过这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-14T04:55:36.707

1.  你可以试试安卓无障碍服务。

[https://developer.android.com/guide/topics/ui/accessibility/index.html](https://developer.android.com/guide/topics/ui/accessibility/index.html)

通过android中的无障碍服务，您可以获取当前屏幕，并可以让系统自动为您点击按钮或发送短信。

可以获取当前画面并点击进入短信，获取文本框并设置文本，最后点击发送按钮。

2.  有一个有用的 repo 被发现是

[https://github.com/PrivacyStreams/PrivacyStreams](https://github.com/PrivacyStreams/PrivacyStreams)

您可以将这个 build.gradle 添加到您的项目中，然后只需几行即可获得文本框。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-28T09:41:34.407

```
sendButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {

                if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.M) {
                    int hasSMSPermission = checkSelfPermission(SEND_SMS);
                    if (hasSMSPermission != PackageManager.PERMISSION_GRANTED) {
                        if (!shouldShowRequestPermissionRationale(SEND_SMS)) {
                            showMessageOKCancel("You need to allow access to Send SMS",
                                    new DialogInterface.OnClickListener() {
                                        @Override
                                        public void onClick(DialogInterface dialog, int which) {
                                            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
                                                requestPermissions(new String[] {SEND_SMS},
                                                        REQUEST_SMS);
                                            }
                                        }
                                    });
                            return;
                        }
                        requestPermissions(new String[] {SEND_SMS},
                                REQUEST_SMS);
                        return;
                    }
                    sendMySMS();
                }
            }
        });

sendButton.performClick(); 
```

# teamcity - Maven站点，将TeamCity设置为ciManagement系统？

> ID：12856948
> 
> 赞同：4
> 
> 时间：2012-10-12T10:18:04.537
> 
> 标签：teamcity, maven-site-plugin

有没有办法可以配置我的 Maven 站点以将 TeamCity 显示为 CI 管理工具？我尝试指定“TeamCity”、“Team City”甚至“http://www.jetbrains.com/teamcity/”，但生成的 Maven 站点只是显示

```
"This project uses Continuous Integration System." 
```

POM 的这一部分似乎只识别特定的关键字，例如 Jenkins 或 Continuum - 对吗？Team City 是否有特殊关键字，或者我可以强制它显示名称的其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:08:19.340

参考：[https ://maven.apache.org/pom.html#Continuous_Integration_Management](https://maven.apache.org/pom.html#Continuous_Integration_Management)

尝试这个：

```
<project>
  ...
  <ciManagement>
    <system>TeamCity</system>
    <url>http://path.to.your/host</url>
  </ciManagement>
</project> 
```

# html - 为除 div 的边框之外的所有内容设置不透明度

> ID：12856953
> 
> 赞同：2
> 
> 时间：2012-10-12T10:18:13.993
> 
> 标签：html, css, border, opacity

是的，我想要一些 div，其中的所有内容都具有一定的不透明度，但 div 的边框是正常的。现在我知道当您为 div 设置不透明度时，它会将其应用于所有内容。

所以。我尝试将它们分成两个 div，如下所示：

```
<div id="border">
<div class="content">
hello
</div>
</div> 
```

和

```
#border{
border: 1px solid #000;
}

.content{
opacity:0.1;
} 
```

这给出了我想要的不透明度，但它没有正确的高度或宽度。我不想在#border 中定义宽度（我有随机尺寸）它似乎使它成为全屏宽度和 0px 高。

或者，有没有人有任何替代方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:21:28.070

是的，使用：

```
#border{ display: inline-block; } 
```

还删除任何声明`width`或`height`为`#border`或将它们设置为`auto`

[演示](http://jsfiddle.net/USPgZ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:28:39.767

您不必使用两个不同的 div！只需使用此 css 语法：

```
.parent {
 border:1px solid black;
}
.parent .child {
 opacity:0.5;
} 
```

如果你不想给每个子元素一个类，你可以使用 * 选择器：

```
.parent * {
 opacity:0.5;
} 
```

# windows-phone-7 - 使用 Bing 地图 REST API 获取国家/地区代码

> ID：12856957
> 
> 赞同：0
> 
> 时间：2012-10-12T10:18:19.703
> 
> 标签：windows-phone-7, geocoding, bing-maps

我是一名 WP7 开发人员。我有一个位置的经度和纬度，并通过使用 Bing 地图 API 获取由坐标定义的完整信息，即经度和纬度

```
http://dev.virtualearth.net/REST/v1/Locations/37.09024,-95.712891?o=json&key=APIKEY 
```

纬度和经度以上是美国位置，我可以得到`addressLine`, `adminDistrict`, `adminDistrict2`, `countryRegion`,但不是`formattedAddress`,在 json 响应中包含国家/地区名称，我的应用程序限制是使用国家/地区代码而不是国家/地区名称。我在 API url 中错过了什么。请帮我`postalCode``country code(ISO ALPHA-2 Code) like IN for India, US for United States``countryRegion`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-24T11:19:26.813

您需要为国家代码添加一个单独的参数“incl=ciso2”，因为它位于附加信息下。像这样修改您的查询字符串。 [http://dev.virtualearth.net/REST/v1/Locations/37.09024,-95.712891?incl=ciso2&o=json&key=APIKEY](http://dev.virtualearth.net/REST/v1/Locations/37.09024,-95.712891?incl=ciso2&o=json&key=APIKEY)。

这样做您将在地址对象“countryregioniso2”中有一个附加字段，该字段将具有 2 位国家代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-18T11:33:01.543

如果您已将 &incl=ciso2 添加到 url，则字段名称将是“countryRegionIso2”，这仍然有效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T11:27:57.430

我建议您考虑改用 Geonames 国家/地区代码服务。

文档：[http ://www.geonames.org/export/web-services.html#countrycode](http://www.geonames.org/export/web-services.html#countrycode)

示例：[http ://api.geonames.org/countryCode?lat=37.09024&lng=-95.712891&username=demo](http://api.geonames.org/countryCode?lat=37.09024&lng=-95.712891&username=demo)

# android - 图像显示在图库中，但在重新启动模拟器后

> ID：12856960
> 
> 赞同：1
> 
> 时间：2012-10-12T10:18:25.173
> 
> 标签：android, emulation, android-gallery

我已经实现了一个应用程序，在该应用程序中，我从 url 下载图像并将其存储在 SD 卡上。
重新启动后它会显示在模拟器库中。是否可以在不重新启动模拟器的情况下在图库中显示图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:43:03.477

方法：

#1 如果您想立即获得结果，请使用 MediaScannerConnection。

```
MediaScannerConnection.scanFile(ctx,new String[] { path.toString() },null,new    MediaScannerConnection.OnScanCompletedListener() {    

  public void onScanCompleted(String path, Uri uri) {    
    Log.i("ExternalStorage", "Scanned " + path + ":");    
    Log.i("ExternalStorage", "-> uri=" + uri);   
  }   
}); 
```

#2 如果您不需要立即获得结果（例如，您创建了新的 100 张图像），那么当您下载完所有文件后，您可以通过告诉系统该卡是您自己触发整个 SD 卡的扫描刚刚安装：

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"+ Environment.getExternalStorageDirectory()))); 
```

结论：如果你写的很少。一次使用多个文件，然后使用#1，否则当您处理非常大的编号时，#1 会很快。要扫描的文件。

# iphone - 使用 BarButtonItem 作为 MKPinAnnotationView 的 leftCallOutAccessoryView？

> ID：12856962
> 
> 赞同：0
> 
> 时间：2012-10-12T10:18:28.550
> 
> 标签：iphone, ios, uibutton, uibarbuttonitem, mkpinannotationview

标题几乎解释了它。是否可以？我试图这样分配它：

```
UIBarButtonItem *leftButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemSave target:self action:@selector(saveAnnotation:)];
pinView.leftCalloutAccessoryView = leftButton; 
```

我也尝试将其转换为 UIButton 和 UIView。我想要这个的主要原因是因为我想要那个小保存按钮已经集成在 UIBarButtonSystemItemSave 中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:04:55.160

不，这不可能，主要是因为`UIBarButtonItem`它不是`UIView`.

将其转换为`UIButton`or`UIView`不起作用，因为转换不会*将*对象从一种类型转换为另一种类型。它只是让您通知编译器某些变量可以被视为其他类型（如果该变量不是真正的其他类型，您将得到一个异常或者它不起作用）。

`UIBarButtonItem`是 的子类`UIBarItem`（它是 的子类`NSObject`），仅设计用于 a`UIToolbar`或`UINavigationBar`.

我不建议尝试将 a`UIToolbar`放入标注中只是为了使用`UIBarButtonItem`.
[这是一个使用 UISegmentedControl 的类似解决方法，](https://stackoverflow.com/questions/4015694/iphone-how-can-i-use-an-uibarbuttonitem-style-without-the-uitoolbar)但分段控件在标注中也可能看起来不正确。

`UIButton`我建议使用带有自定义图像或按钮类型`UIButtonTypeContactAdd`（带有加号的蓝色圆圈）的常规。

# nuget - nuget - 包还原不起作用

> ID：12856964
> 
> 赞同：2
> 
> 时间：2012-10-12T10:18:35.913
> 
> 标签：nuget

我的目标是让包还原在构建服务器上工作，这样我就不必签入二进制文件。目前，我只是想让它使用 Visual Studio 在我自己的机器上运行。

这是我到目前为止所做的：

1.  按照这里的说明[http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)，包括设置工具选项标志和环境变量（皮带和大括号）
2.  按照此处的建议安装了 NuGetEnablePackageRestore 包[NuGet 包恢复同意，无需 NuGet](https://stackoverflow.com/questions/11828115/nuget-package-restore-consent-without-nuget)
3.  检查（.nuget 解决方案文件夹及其内容）中的所有内容，但不是我要引用的二进制文件，因为这是练习的重点

这就是我正在做的事情：

1.  查看解决方案
2.  验证 nunit.framework.dll 和 moq.dll 不存在于签出的解决方案中
3.  构建解决方案

Visual Studio 抱怨缺少最小起订量。我在解决方案目录中搜索 dll 并发现：

1.  nunit.framework.dll 存在于相应的 bin 文件夹中
2.  Moq.dll 无处可寻

但还有更多。这确实很神秘，但如果我重新结帐，断开互联网连接并构建，我会得到完全相同的结果 - nunit.framework.dll 存在，但 moq.dll 不存在。**构建过程不知从哪里召唤出了 nunit.framework.dll。**

所以说我完全困惑是轻描淡写的。任何人都可以建议以下问题的答案：

1.  为什么包还原不下载起订量？
2.  如果不是互联网，构建过程到底在哪里获取 nunit.framework.dll？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:50:19.430

在 vs，选项，包管理器...有一个“包缓存”部分，如果您单击“浏览”按钮，它将带您到机器中 nuget 缓存的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:36:50.263

好的，我在文档中注意到启用包还原应该修改项目文件以添加新目标。我的项目文件没有这个变化。右键单击 VS 中的解决方案标题并选择“管理 NuGet 包...”，然后添加所需的更改和应构建的所有内容。

我检查了一下，当我无法访问互联网时，包还原似乎仍然有效，所以我仍然对此感到困惑。NuGet 是否在解决方案之外维护某种二进制文件缓存？

# sql - 基于记录间条件的不同SQL选择

> ID：12856965
> 
> 赞同：1
> 
> 时间：2012-10-12T10:18:36.273
> 
> 标签：sql, oracle, date, group-by, max

我有一个表格，其中包含问题报告 (PR) 的分配，如下所示：

```
TABLE "ALLOCATIONS"

ALLOCATIONID    PRID    DATEALLOCATED        ENG_ID
1               401     20-SEP-06 10.48.00   1
2               401     20-SEP-06 10.48.00   2
3               401     20-SEP-06 10.48.00   2
4               402     20-SEP-06 12.35.00   1
5               402     20-SEP-06 12.43.00   1
6               402     20-SEP-06 13.43.00   2
7               700     14-OCT-12 13.30.05   1
8               700     14-OCT-12 13.30.35   2
9               700     14-OCT-12 14.30.35   2 
```

最近的分配决定了 PR 现在分配给哪个工程师。例如，我想查找分配给工程师 2 的所有 PR。因此，我查找每个 PRID 的最新分配，检查 ENG_ID，如果 ENG_ID 正确，则从该表中提取信息。

此表包含实际的 PR 描述（为了清楚起见，此处省略了其他信息）。

```
TABLE "PROBLEMS"

PRID     TITLE
401      Something
402      Something
700      Something 
```

为此，我使用了 DATEALLOCATED 字段，如下所示：

```
SELECT PRID, TITLE FROM PROBLEMS p WHERE p.PRID IN
(
    SELECT GROUPEDALLOC.PRID FROM allocations alloc INNER JOIN
    ( 
        SELECT PRID, MAX(DATEALLOCATED) AS MaxAllocationDate    
        FROM allocations   
        GROUP BY PRID
    ) 
    groupedAlloc ON alloc.PRID = groupedAlloc.PRID 
    AND ALLOC.DATEALLOCATED = groupedAlloc.MaxAllocationDate 
    AND ENG_ID = 2
) 
ORDER BY PRID DESC; 
```

现在这对于上面插入的包含秒数的长日期格式的记录 7、8、9 工作正常，但是对于没有记录秒数的旧记录，这显然不起作用。对于这些记录，我想依靠allocationID（显然可能是顺序的，也可能不是顺序的——但这是最后的手段，总比没有好）。

我的问题是，如何修改我的查询以在 DATEALLOCATED 上执行这个额外的条件（我只是想看看它们对于特定的 PRID 是否都相等），然后使用 ALLOCATIONID 代替？

我正在使用 OracleXE，但如果可能的话，我想坚持使用标准 SQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:34:58.203

这对你有用吗？

```
WITH 
  BY_DATE
  AS (SELECT PRID, MAX (DATEALLOCATED) AS MAXDATE FROM ALLOCATIONS GROUP BY PRID),

  BY_ALLOC
  AS (SELECT A.PRID, MAXDATE, MAX (ALLOCATIONID) AS MAXALLOC
        FROM ALLOCATIONS A JOIN BY_DATE B ON 
             A.PRID = B.PRID AND 
             A.DATEALLOCATED = B.MAXDATE
      GROUP BY A.PRID, MAXDATE)

SELECT A.PRID, A.ENG_ID
  FROM ALLOCATIONS A JOIN BY_ALLOC B ON 
       A.ALLOCATIONID = B.MAXALLOC; 
```

# transactions - Ejb3 CMT 未提交外键约束

> ID：12856973
> 
> 赞同：2
> 
> 时间：2012-10-12T10:18:49.120
> 
> 标签：transactions, foreign-keys, ejb-3.0

我正在尝试进行以下交易：

1.  创建一个客户端
2.  创建一个带有外键的地址到客户端表
3.  将客户端的组合外键更新到地址表

**问题：**

1.  运行 testMethod() 时，我得到一个 关于 ADDRESSES 约束的**java.sql.SQLIntegrityConstraintViolationException**
2.  如果我在一个事务中更改代码并创建客户端，然后在另一个事务中创建地址并更新客户端字段，一切正常
3.  如果我更改代码并在一个事务中创建客户端和地址并在另一事务中更新客户端字段，一切正常
4.  **如果我使用本地查询而不是 EntityManager 中的持久和合并方法，一切正常**

    ```
    @Stateless
    public class Test implements TestLocal {

    @PersistenceContext(unitName = "testPU")
    private EntityManager em;

    @Override
    public void testMethod(Client client, Address address, boolean mainAddress) {
      client.setIdcliente(new Long(110));
      em.persist(client);

      address.setAddressPK(new AddressPK(new Long(120), client.getIdcliente()));
      em.persist(address);

      if (mainAddress) {
        client.setMainAddress(address);
        em.merge(client);
      }
    } 
    ```

我的模型：

客户：
- IDCLIENTE pk
- NMORADAPRI 可为空

外键 (IDCLIENTE, NMORADAPRI) 参考地址 (IDCLIENTE, IDMORADA)

```
@Entity
@Table(name = "CLIENTS")
public class Client implements Serializable {

@Id
@Basic(optional = false)
@NotNull
@Column(name = "IDCLIENTE")
private Long idcliente;

@JoinColumns({
    @JoinColumn(name = "IDCLIENTE",  referencedColumnName = "IDCLIENTE", insertable = false, updatable = false),
    @JoinColumn(name = "NMORADAPRI", referencedColumnName = "IDMORADA")})
@OneToOne(optional = false)
private Address main_address;

@OneToMany(cascade = CascadeType.ALL, mappedBy = "client")
private Collection<Address> addressesCollection; 
```

地址：
- IDMORADA pk
- IDCLIENTE pk

外键 (IDCLIENTE) 参考客户 (IDCLIENTE)

```
@Entity
@Table(name = "ADDRESSES")
public class Address implements Serializable {
private static final long serialVersionUID = 1L;

@EmbeddedId
protected AddressPK addressPK;

@JoinColumn(name = "IDCLIENTE", referencedColumnName = "IDCLIENTE", insertable = false, updatable = false)
@ManyToOne(optional = false)
private Client client; 
```

组合键

```
@Embeddable
public class AddressPK implements Serializable {

@Basic(optional = false)
@NotNull
@Column(name = "IDMORADA")
private long idmorada;

@Basic(optional = false)
@NotNull
@Column(name = "IDCLIENTE")
private long idcliente; 
```

# vba - 如何在 vba 中的 excel 中刷新/加载 RTD Bloomberg 函数 (BDH)

> ID：12856979
> 
> 赞同：7
> 
> 时间：2012-10-12T10:19:12.180
> 
> 标签：vba, excel, bloomberg

我想知道VBA代码中是否有办法强制bloomberg函数（在电子表格中）更新其值（任何BDH函数）

**目标开发人员面临类似问题/拥有彭博终端**

我试过什么——

```
Application.RTD.RefreshData
Application.RTD.throttleInterval = 0
Application.CalculateFull 
```

BDH 功能不会自行重新加载。

我现在可以刷新它们的唯一方法是：单击 BloomBerg 加载项功能区上的“刷新工作簿”按钮。

由于 Bloomberg 插件被锁定在 VBE 中，我找不到必要的代码。我是否缺少任何彭博参考资料？任何彭博专家/用户可以指出我正确的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T04:23:37.257

我通过在记事本中打开它在 xla 中搜索了关键字“刷新”。找到以下目标：

```
RefreshAllWorkbooks
blpmain.xla!RefreshAllStaticData
blpmain.xla!'RefreshWorkbookFundamentalsData
blp.xla!IsBlpRefreshAvailable 
```

我一个一个地尝试了它们，前两个通过调用来工作：

```
Application.run "RefreshAllWorkbooks"
Application.run "RefreshAllStaticData" 
```

但不要单独调用它们（我想这是因为我可以使用 Application.run 调用受保护的 PUBLIC 过程）

```
RefreshAllWorkbooks 
```

或者

```
RefreshAllStaticData 
```

感谢所有的帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-04-22T19:19:26.893

我最近从 bbg chat 收到了这个答案。我想这就是我们都在寻找的...

**bbg 帮助台：**通常我们不会在帮助台上提供有关 VBA 的帮助，但我找到了以下内容。您可以使用以下 VBA 命令刷新 BDx() 公式：

```
Refresh based on default option setting: Application.Run "RefreshData"  
Refresh current selection: Application.Run "RefreshCurrentSelection"
Refresh current worksheet: Application.Run "RefreshEntireWorksheet"
Refresh current workbook: Application.Run "RefreshEntireWorkbook"
Refresh all workbooks: Application.Run "RefreshAllWorkbooks" 
```

注意：使用 VBA 宏刷新 Bloomberg 公式时，在触发刷新的宏正在运行时，公式无法完成请求数据。您必须使用 Application.OnTime() 安排第二个函数在触发刷新退出的子例程之后运行。以下代码片段演示了刷新所有工作簿的 VBA 代码，然后在调用 processSheet 子例程之前有 10 秒的延迟：

```
 Sub refreshSheet()
        Application.Run "RefreshEntireWorksheet"  
        Application.OnTime (Now + TimeValue("00:00:10")), "processSheet"
    End Sub

    Sub processSheet()
        ' perform processing here
    End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T17:44:54.430

我从来没有设法做你要求的。我发现获取最新数据的唯一可靠方法是直接从 VBA 调用 API `BLP_DATA_CTRLLib.BlpData`，等待答案，然后将结果放入工作表中。

关于打开受密码保护的 VBA 代码，google 或 stackoverflow 搜索应该会给你答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-25T18:46:34.847

我发现更改 BDH 公式中的某些内容会导致刷新。找到并替换`=`标志就可以了。

```
Public Sub Recalc()
    Dim ws As Worksheet, FormulaCells As Range, c As Range
    Application.Calculation = xlCalculationManual
    For Each ws In ThisWorkbook.Worksheets
        On Error Resume Next
        ws.Activate
        Set FormulaCells = ws.UsedRange.SpecialCells(xlCellTypeFormulas).Cells
        If Err = 0 Then
            For Each c In FormulaCells
                c.Formula = Replace(c.Formula, "=", "=")
            Next 'c
        Else
            Err.Clear
        End If
    Next 'ws
    Application.Calculation = xlCalculationAutomatic
End Sub 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-31T09:15:55.743

这对我有用：

```
WS.Select
WS.Range("A5").Select 'the cell that contains the BDH function
Application.Run "RefreshCurrentSelection" 
```

# php - LAMP 上的 php5 不显示 E_ALL 的所有错误

> ID：12856981
> 
> 赞同：1
> 
> 时间：2012-10-12T10:19:22.320
> 
> 标签：php, reporting, lamp

这有点奇怪，我一直在研究 LAMP，突然意识到我放在“/etc/php5/cli”和“/etc/php/apache2”中的 php.ini 文件显示错误为 On 并且错误报告设置为 E_ALL .

据我所知，下面这个简单的代码应该会出错

```
<?
echo "hello";

header('location:http://google.com');

?> 
```

我期望出现的错误应该是

> hello Warning: Cannot modify header information - headers already sent by (output started at writecodeonline.com/php:1) on line 3

but it does not shows the error rather open google.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:05:19.383

您可能已启用输出缓冲。

尝试设置`output_buffering = Off`

# node.js - Http Filter in Node.js

> ID：12856984
> 
> 赞同：0
> 
> 时间：2012-10-12T10:19:26.350
> 
> 标签：node.js

我想过滤 http 请求并只允许来自我感兴趣的某些域的调用。是否可以将其作为应用程序配置的一部分来执行？- 有任何可用的库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:52:27.933

`req.connection.remoteAddress`将拥有发出请求的系统的 IP 地址；您可以对其进行反向 DNS 查找并与返回的域进行匹配。如果您使用的是 express 或 connect，您可以编写一个中间件函数来执行此操作。

# objective-c - 验证访问令牌时出错：用户 XXX 未授权应用程序 YYY

> ID：12856987
> 
> 赞同：5
> 
> 时间：2012-10-12T10:19:37.373
> 
> 标签：objective-c, facebook

我正在尝试处理权限错误，并且基本上我从 www.facebook.com 应用设置中删除了该应用。在应用程序中，我使用此方法登录：

```
[FBSession openActiveSessionWithReadPermissions:nil allowLoginUI:YES
completionHandler:^(FBSession *session, FBSessionState    status, NSError *error) { 
```

由于某种原因，令牌被缓存并且应用程序没有意识到我从网络上删除了权限。因此，在 openActiveSessionWithReadPermissions 之后，会话始终处于打开状态，然后我发出请求并得到下一个响应：（不是在错误对象中，而是在响应中）：

验证访问令牌时出错：用户 XXX 未授权应用程序 YYY。

所以我处理它，因为令牌无效，我这样做：

```
[[FBSession activeSession] closeAndClearTokenInformation]; 
```

并再次尝试登录，但同样的问题。

似乎如果用户从网络上删除权限，聚会就永远结束了？？有办法回去吗？

# c# - 是否可以在将重定向响应发送回用户之前更改某些表单数据字段？

> ID：12856988
> 
> 赞同：0
> 
> 时间：2012-10-12T10:19:45.423
> 
> 标签：c#, asp.net, redirect, webforms, response

我想像这样使用 307 重定向将用户的 POST 请求与表单数据重定向

```
protected void RedirectTemporary(string url)
{
    Response.ClearContent();
    Response.StatusCode = 307;
    Response.StatusDescription = "Temporary Redirect";
    Response.RedirectLocation = ResolveClientUrl(url);
    Response.Flush();
} 
```

但是是否可以在将重定向响应发送回用户之前更改一些表单数据字段？ `Request["someField"]`是只读的，`Response`似乎也没有任何可写的数据集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:45:05.967

我会回答自己 - 不，这是不可能的，因为重定向 307 不返回任何表单字段，只是告诉浏览器重复它对新位置的请求。退出是`WebRequest`与 new一起使用`NameValueCollection`，从客户请求中复制。

# c# - C# 将“旧”WinForms 转换为 Web 应用程序，还是在新平台上重写？

> ID：12856990
> 
> 赞同：1
> 
> 时间：2012-10-12T10:19:56.210
> 
> 标签：c#, wpf, winforms, silverlight

我正在开发 WinForms 应用程序。到目前为止，我已经完成了大约 50% 的工作。

无论如何我可以将其转换为 Web 应用程序而无需重写整个 GUI？

如果没有，我应该在哪个平台上使用（重写我的项目）来轻松同时拥有 Web 和 Windows UI？

在过去的 3 年里，这个主题有什么新的东西吗？

我当然知道 WPF 和 Silverlight 非常相似，但我不确定这是最失败的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T10:33:44.823

这将取决于您如何构建架构。WPF 和 Silverlight 可以互换的主要原因是因为它们倾向于使用 MVVM 模式和架构（还有 PRISM 之类的东西）

> [http://msdn.microsoft.com/en-us/library/ff921075(v=pandp.20).aspx](http://msdn.microsoft.com/en-us/library/ff921075(v=pandp.20).aspx)

理论上，如果你遵循这种模式，你可以随时放下前面，并使用完全不同的东西来设计它。这被称为：

> 使您的 UI 松散耦合。

如果您想将前端显示切换到 Web 应用程序，您显然必须更改要使用的 UI 层`HTML`，理论上如果您为应用程序提供了合适的架构，您的业务逻辑应该能够保持不变，但是如果您有很多逻辑绑定到多个`Windows Forms`我担心你会遭受一个漫长而痛苦的迁移过程，一路上有许多错误。

将您的应用程序视为房屋 - 您拥有房屋的主要基础（绝缘材料、砖块等），您可能希望不时更改这些基础以使结构保持最新，但基本基础通常保持不变. 但是，您可以在不影响基本原理的情况下随意装饰房屋（抱歉，类比不佳）。

希望这会有所帮助。

编辑：

我刚刚注意到您想知道与项目一起使用的最佳架构，就我个人而言，我知道我会使用 PRISM、WPF 和 MVVM - 您可以[使用 Prism 使用单一代码库构建 WPF 和 Silverlight 应用程序](http://msdn.microsoft.com/en-us/magazine/ee321573.aspx)

# c# - 拆分字符串接受一些字符

> ID：12856995
> 
> 赞同：0
> 
> 时间：2012-10-12T10:20:13.120
> 
> 标签：c#, string, split

我在拆分字符串时遇到了一些麻烦。

我的字符串：

```
"SG_ PJB_ : 1|10@0+ (0.25,-60) [-60|195.75] "Degrees Celcius"  PCM,TCM,AFCM"; 
```

我想拥有：

```
SG_
PJB_ 
1
10
0+
0.25
-60
-60
195.75
Degrees Celcius
PCM
TCM
AFCM 
```

我尝试过的代码：

```
string s = "SG_ PJB_ : 1|10@0+ (0.25,-60) [-60|195.75] \"Degrees Celcius\"  PCM,TCM,AFCM";
string[] res = s.Split(new char[] { ' ', ',', ':', '|', '@', '(', ')', '[', ']', ';' }, StringSplitOptions.RemoveEmptyEntries);
for (int i = 0; i < res.Length; i++)
{
   // Console.WriteLine("           ");
    Console.WriteLine("{0}", res[i]);
}
Console.ReadKey(); 
```

但它将“摄氏度”分成了 2 个数组。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:36:16.137

使用这种方式：

```
var result = input.Split(new[] { '"' }).SelectMany((s, i) =>
  {
      if (i%2 == 1) return new[] {s};
      return s.Split(new[] { ' ', ',', ':', '|', '@', '(', ')', '[', ']', ';' },
                               StringSplitOptions.RemoveEmptyEntries);
  }).ToList(); 
```

# objective-c - 无法在 ios 应用程序中导入雅虎联系人出现 BadExcess 错误

> ID：12856999
> 
> 赞同：2
> 
> 时间：2012-10-12T10:20:16.957
> 
> 标签：objective-c, ios, yahoo-api

我已经从[https://github.com/yahoo/yos-social-objc](https://github.com/yahoo/yos-social-objc)下载了这个项目。我已经更改了 ConsumerKey、ConsumerSecret 和 ApplicationId，但是当我运行应用程序时它崩溃了。它给出了 BAD-Excess 的错误。有没有人对此有任何想法？请告知 谢谢 基本上它刚刚从雅虎的开发者页面下载的项目仍然存在。这是我的完整代码 **SocialSampleAppDelegate.h**文件

```
#import <UIKit/UIKit.h>
#import "YOSSession.h"

@class SocialSampleViewController;

@interface SocialSampleAppDelegate : NSObject <UIApplicationDelegate> {
    UIWindow *window;
    SocialSampleViewController *viewController;

    YOSSession                  *session;
    NSMutableDictionary         *oauthResponse;
    BOOL                        launchDefault;
}

    @property BOOL launchDefault;
    @property (nonatomic, readwrite, retain) YOSSession *session;
    @property (nonatomic, readwrite, retain) NSMutableDictionary *oauthResponse;

    @property (nonatomic, retain) IBOutlet UIWindow *window;
    @property (nonatomic, retain) IBOutlet SocialSampleViewController *viewController;

    - (void)getUserProfile;
    - (void)createYahooSession;
    - (void)handlePostLaunch;

    @end 
```

**SocialSampleAppDelegate.m**

```
#import "SocialSampleAppDelegate.h"
#import "SocialSampleViewController.h"

#import "YOSUser.h"
#import "YOSUserRequest.h"
#import "NSString+SBJSON.h"

@implementation SocialSampleAppDelegate

@synthesize window;
@synthesize viewController;
@synthesize session;
@synthesize launchDefault;
@synthesize oauthResponse;

    - (void)applicationDidFinishLaunching:(UIApplication *)application {    

        // Override point for customization after app launch    
        [window addSubview:viewController.view];
        [window makeKeyAndVisible];

        launchDefault = YES;
        [self performSelector:@selector(handlePostLaunch) withObject:nil afterDelay:0.0];
    }

    - (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url 
    {
        launchDefault = NO;

        if (!url) { 
            return NO; 
        }

        NSArray *pairs = [[url query] componentsSeparatedByString:@"&"];
        NSMutableDictionary *response = [NSMutableDictionary dictionary];

        for (NSString *item in pairs) {
            NSArray *fields = [item componentsSeparatedByString:@"="];
            NSString *name = [fields objectAtIndex:0];
            NSString *value = [[fields objectAtIndex:1]   stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

            [response setObject:value forKey:name];
        }

        self.oauthResponse = response;

        [self createYahooSession];

        return YES;
    }

    - (void)handlePostLaunch
    {
        if(self.launchDefault) {
            [self createYahooSession];
        }
    }

    - (void)createYahooSession
    {
            // create session with consumer key, secret and application id
         // set up a new app here: https://developer.yahoo.com/dashboard/createKey.html
    // because the default values here won't work
        self.session = [YOSSession sessionWithConsumerKey:@"MYConsumer KEy" 
                                    andConsumerSecret:@"MY Secret" 
                                     andApplicationId:@"My APPID"];

        if(self.oauthResponse) {
            NSString *verifier = [self.oauthResponse valueForKey:@"oauth_verifier"];
            [self.session setVerifier:verifier];
        }

        BOOL hasSession = [self.session resumeSession];

        if(!hasSession) {
            [self.session sendUserToAuthorizationWithCallbackUrl:nil];
        } else {
            [self getUserProfile];
        }
    }

    - (void)getUserProfile
    {
    // initialize the profile request with our user.
        YOSUserRequest *userRequest = [YOSUserRequest requestWithSession:self.session];

    // get the users profile
        [userRequest fetchProfileWithDelegate:self];
    }

    - (void)requestDidFinishLoading:(YOSResponseData *)data
    {
        NSDictionary *userProfile = [[data.responseText JSONValue] objectForKey:@"profile"];
        // NSLog(@"%@",[userProfile description]);
        if(userProfile) {
            [viewController setUserProfile:userProfile];
        }
    }

    - (void)dealloc {
        [viewController release];
        [window release];
        [super dealloc];
    }

    @end 
```

**SocialSampleViewController.m**

```
 - (void)viewDidLoad {
        [super viewDidLoad];

        [nicknameLabel setText:@"loading..."];
    }

    - (void)setUserProfile:(NSDictionary *)data
    {
        NSString *welcomeText = [NSString stringWithFormat:@"Hey %@ %@!", 
                             [[data objectForKey:@"profile"] objectForKey:@"givenName"],
                             [[data objectForKey:@"profile"] objectForKey:@"familyName"]];

        [nicknameLabel setText:welcomeText];
    } 
```

信息列表 ![在此处输入图像描述](../Images/92bdadce98ae9f7a4a75b7670af8b515.png)