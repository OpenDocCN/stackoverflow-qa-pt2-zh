# StackOverflow 问答 13589000-13589999

# python - 使用表面和线框使用 Matplotlib 对小行星进行建模

> ID：13589004
> 
> 赞同：8
> 
> 时间：2012-11-27T16:47:28.517
> 
> 标签：python, matplotlib, plot, wireframe, geometry-surface

我正在尝试使用`plot_surface`and对小行星进行建模`plot_wireframe`。我有小行星表面上的点的 xy 和 z 值。线框精确到小行星的形状，但表面图不适合线框。如何让曲面图适合线框，或者如何使用线框获得 3d 实体模型？这是我的模型代码：

```
from mpl_toolkits.mplot3d import axes3d
import matplotlib.pyplot as plt
import numpy as np
from matplotlib import cm
from matplotlib.mlab import griddata

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
data = np.genfromtxt('data.txt')
x = data[:,0]
y = data[:,1]
z = data[:,2]

ax.plot_wireframe(x, y, z, rstride=1, cstride=1, alpha=1)

xi = np.linspace(min(x), max(x))
yi = np.linspace(min(y), max(y))

X, Y = np.meshgrid(xi, yi)
Z = griddata(x, y, z, xi, yi)

surf = ax.plot_surface(X, Y, Z, rstride=1, cstride=1, cmap=cm.coolwarm,
        linewidth=0, antialiased=False)
ax.set_zlim(-1.01, 1.01)

plt.show() 
```

数据采用这种格式，尽管原始文件中有很多行：

```
-1.7738946051191869E-002   4.3461451610545973E-002   1.3393057231408241     
-0.29733561550902488       0.32305812106837900        1.3393057231408241     
-0.29733561550902488       0.16510132228266330        1.3548631099230350     
-0.21872587865015569        2.4170900455101410E-002   1.3610011616437809     
1.4452975249810950E-002 -0.20900795344486520        1.3610011616437809    
1.5732454381265970E-002 -0.20900795344486520        1.3608751439485580    
-0.34501536374240321       0.51320241386595655        1.3158820995876130     
-0.40193014435941982       0.45628763324893978        1.3158820995876130     
-0.42505849480150409       0.28183419537116011        1.3307863198123011     
-0.18994178462386799      -0.19294290416565860        1.3424523041534830     
1.4452975249810939E-002 -0.39733766403933751        1.3424523041534830     
5.8021940902131752E-002 -0.57108837516584876        1.3210481842104100     
9.3746267961881152E-002 -0.61017602710257668        1.3136798474111200     
0.26609469681891229      -0.43782759824554562        1.3136798474111200     
  0.17938460413447810       0.39179924148155021        1.2357401964919650     
   8.9613011902522258E-002  0.42818009222325598        1.2584008460875080     
  0.33671539027096409      -0.47165177581327772        1.2965073126705291     
  0.53703772594296528      -0.47165177581327777        1.2357401964919561     
 -0.19242375014122229       0.71021685426700043        1.2584008460875080     
 -0.34501536374240321       0.66763766324752027        1.2904902860951690 
```

希望你能帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:01:19.170

你能提供一张正在发生的事情的图片吗？我猜你得到的图像是小行星表面似乎在到处跳跃。那是对的吗？如果是这样，可能是由于绘图仪不知道点的顺序造成的。

如果我们有一组点，其中包含单位圆的所有点，那么我们希望这些点的绘图可以创建一个单位圆。但是，如果您决定将每个点连接到其他两个点，那么它不一定看起来像一个圆圈。如果（出于某种原因）您将一个点连接到圆另一侧的另一个点并继续这样做，直到每个点连接到其他两个点，它可能看起来像一个圆，也可能不像一个圆，因为每个点都不是必然连接到相邻的点。

你的小行星也是如此。您需要提出一些方案，以便绘图仪知道如何连接点，否则您将继续遇到同样的问题。

以下圆圈示例应说明我的观点：

```
import math
import matplotlib.pylab as plt
import random

thetaList = range(360)
random.shuffle(thetaList)
degToRad = lambda x: float(x) * math.pi / float(180)
x = [math.cos(degToRad(theta)) for theta in thetaList]
y = [math.sin(degToRad(theta)) for theta in thetaList]       

#plot the cirlce
plt.plot(x,y)
plt.show() 
```

# pid - 如何在 unix 中查找特定进程 ID 的端口号？

> ID：13589006
> 
> 赞同：13
> 
> 时间：2012-11-27T16:47:33.737
> 
> 标签：pid, ps, netstat, uname

> 在 UNIX 操作系统中，当我知道进程名称或 pid 时如何找到端口号？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-27T16:52:53.367

```
netstat -pl | grep NAME_OR_PID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-11T17:38:50.093

ss-plnt | grep PID | gawk '{打印 $4}' | sed -e 's/[^0-9]//g'

# c# - 循环通过编程创建的文本框时“无法投射对象”

> ID：13589008
> 
> 赞同：1
> 
> 时间：2012-11-27T16:47:48.573
> 
> 标签：c#, asp.net, .net, c#-4.0

我有一些动态创建的文本框——

```
int i = 1;
while (reader.Read())
{
    System.Web.UI.WebControls.TextBox textBox = new System.Web.UI.WebControls.TextBox();
    textBox.ID = reader["field_id"].ToString();
    textBox.Enabled = false;
    HtmlGenericControl div = new HtmlGenericControl("div");

    if(i%2 != 0)
        div.Attributes.Add("style", "margin-right:120px;padding-bottom:20px;");

    if (i % 2 == 0)
        div.Attributes.Add("style", "padding-bottom:20px;");

    div.Attributes.Add("class", "inline fourcol");
    div.InnerHtml = "<label>" + reader["field"] + "</label>"; 
    div.Controls.Add(textBox);
    panelId.Controls.Add(div);
    textBox.Text = reader["field_value"].ToString();
    ++i;
} 
```

这很好用（至少我确定 - 他们会展示他们应该如何）。但是，当我尝试循环访问它们以启用它们或获取它们的值时，我得到一个“**无法将'System.Web.UI.LiteralControl'类型的对象转换为'System.Web.UI.WebControls.TextBox'。** “ 错误。

这就是我一直在尝试的方式——

```
public void EditPanel(System.Web.UI.WebControls.Panel panel)
{
    foreach (System.Web.UI.WebControls.TextBox t in panel.Controls)
    {
        t.Enabled = true;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T16:54:37.957

您正在循环`panel.Controls`，它将遍历面板中的每个控件。这不一定与循环遍历您添加的所有内容相同。如果您开始时面板中存在其他内容，那么您最终也会得到它。

你可能想要的是这样的：

```
foreach (var t in panel.Controls.OfType<System.Web.UI.WebControls.TextBox>())
{
    t.Enabled = true;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T18:35:37.537

您将每个文本框放在一个“div”控件中`HtmlGenericControl`，然后放在面板控件中。所以首先你必须寻找`HtmlGenericControl`内部`panelId.Controls`

可能对您有所帮助的示例代码：

```
public void EditPanel(System.Web.UI.WebControls.Panel panel)
{
    foreach (Control c in panelId.Controls)
            {
                if (c is HtmlGenericControl)
                {
                    foreach (var textbox in c.Controls.OfType<TextBox>()) //ofType returns IEnumerable<TextBox>
                        textbox.Enabled = true;
                }
            }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T16:51:13.447

你的 里面有一个控件`Panel`，它不是 a`TextBox`并且不能被转换为它。您应该在循环之前放置一个断点并`panel.Control`在调试模式下检查集合内容。

如果您没有在`foreach`循环中指定类型并自己进行安全转换，则可以避免该问题。

```
foreach (var t in panel.Controls)
{
    var textbox = t as System.Web.UI.WebControls.TextBox;
    if(textbox != null)
    {               
        textbox.Enabled = true;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T16:51:29.900

您应该检查控件是否为 TextBox

```
public void EditPanel(System.Web.UI.WebControls.Panel panel)
{
    foreach (var t in panel.Controls)
    {
        if (t is System.Web.UI.WebControls.TextBox)
            ((System.Web.UI.WebControls.TextBox)t).Enabled = true;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T16:53:54.847

您将文本框添加到 div 元素并将 div 元素添加到面板。因此您需要选择面板中的控件，然后找到文本框。

```
foreach (var t in panel.Controls.Cast<Control>().SelectMany(c => c.Controls))
{
    if (t is TextBox == false) continue;

    ((TextBox)t).Enabled = true;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T16:59:15.210

该`Controls`集合将包含面板中所有控件的集合——不仅仅是文本框。您可以遍历所有控件并使用`as`运算符执行类型转换。如果类型转换成功，那么您可以启用文本框。

```
public void EditPanel(System.Web.UI.WebControls.Panel panel)
{
    foreach (var control t in panel.Controls)
    {
        System.Web.UI.WebControls.TextBox textBox = control as System.Web.UI.WebControls.TextBox;
        if (textBox != null)
        {
            control.Enabled = true;
        }    
    }
} 
```

# sql - 为什么 MS Access 不显示表列“X”？

> ID：13589013
> 
> 赞同：2
> 
> 时间：2012-11-27T16:48:02.063
> 
> 标签：sql, ms-access

我的 MS Access 表中有一个名为“Shift”的列。

但是，此列不会显示在表的视图中。

我可以编写一个查询来过滤 Shift 列（如 show all `WHERE Shift='1'`），并且查询有效，但该列永远不会通过 MS Access 界面可见。

![截屏](../Images/a2a8687831212200c45c49a10928bced.png)

它不会伤害任何东西，但我无法让它显示真的很令人沮丧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T16:50:48.807

也许你不小心隐藏了它，试试这个步骤

*   在`Format`菜单上，单击`Unhide Columns`。
*   在“*取消隐藏列”对话框中*，选择要显示的列的名称。

# ios - iOS Provisioning Portal - 2 个开发者 - 一个开发者的配置文件无效

> ID：13589014
> 
> 赞同：0
> 
> 时间：2012-11-27T16:48:03.257
> 
> 标签：ios, provisioning

我无法弄清楚使用 Provisioning Portal 的正确方法是什么。这是我们的情况：

*   2 个开发者账号，2 台不同的电脑，同一个团队
*   供应门户 > 证书 > 分发中的一个证书。该证书包括两个分发配置文件

我的问题是这两个分发配置文件对于其中一位开发人员总是无效的。我们通过“重新开始”进入这种情况：撤销开发证书和分发证书，然后从开发人员的机器中创建新证书。一旦创建了新证书，配置文件就会失效。我想我明白为什么会这样。我无法理解的是如何做所有事情，以便两个开发人员都可以使用有效的证书。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T16:54:43.897

让其中一位开发人员从钥匙串中导出他的证书以及它的私钥并将其发送给另一位开发人员。两者都应该这样工作。

# windows-phone-8 - windows phone 8：如何一直检查数据库（服务器）上是否有新消息（即使应用程序没有运行）？

> ID：13589017
> 
> 赞同：3
> 
> 时间：2012-11-27T16:48:04.783
> 
> 标签：windows-phone-8

多年来我一直在开发 Windows 桌面应用程序，但刚刚开始开发 Windows Phone 8 应用程序，因此，正如您想象的那样，我有很多问题和疑问。

到目前为止，这是我的问题：

我需要一个应用程序来检查服务器数据库中是否有新消息/通知，即使应用程序没有运行，并在手机上显示（以某种方式，不确定如何）。最后，我想要类似于 Facebook 应用程序（或其他应用程序）的东西，即使我没有使用手机，它也会不断检查是否有新消息。我怎样才能做到这一点？是否有任何教程或指南可以解释这一点？

非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:14:56.753

Windows Phone 上有两种机制可用于定期检查数据源并显示通知：

1.  推送通知：服务器直接向手机发送通知。它提供了最佳的用户体验，因为通知是（几乎）即时发送的，并且因为所有处理都是在服务器端完成的（因此它不会影响手机的自主性）。明显的缺点是您需要一个服务器基础架构来发送通知。

2.  后台代理：您的应用程序在后台运行，定期唤醒（每 30 分钟左右），并允许运行约 15 秒。在这 15 秒内，您可以检查数据源，并在需要时显示通知。两个主要缺点是您无法选择何时执行后台代理（因此通知可以延迟 30 分钟显示），并且会影响电池寿命。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:12:49.843

您需要的是推送通知。

Microsoft 已经通过 Azure 移动服务提供了此功能，这里有一些东西可以帮助您入门：[移动服务中的推送通知入门](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-push-dotnet/)

# entity-framework - 更新到 EF 6.0.0-alpha 后无法使用 EF 迁移更新数据库

> ID：13589020
> 
> 赞同：10
> 
> 时间：2012-11-27T16:48:08.943
> 
> 标签：entity-framework, code-first, entity-framework-migrations, entity-framework-6

将我的实体框架更新到版本 6.0.0-alpha1 后，我无法更新数据库。这是我得到的错误：

```
PM> update-database -verbose
Using StartUp project 'DataCenter'.
Using NuGet project 'DataCenter.Domain'.
Specify the '-Verbose' flag to view the SQL statements being applied to the target database.
Target database is: 'datacenter' (DataSource: ., Provider: System.Data.SqlClient, Origin: Configuration).
Upgrading history table.
ALTER TABLE [dbo].[__MigrationHistory] ADD [ContextKey] [nvarchar](512) NOT NULL DEFAULT 'DataCenter.Domain.Migrations.Configuration'
ALTER TABLE [dbo].[__MigrationHistory] DROP CONSTRAINT [PK_dbo.__MigrationHistory]
System.Data.SqlClient.SqlException (0x80131904): 'PK_dbo.__MigrationHistory' is not a constraint.
Could not drop constraint. See previous errors.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at System.Data.Entity.Migrations.DbMigrator.ExecuteSql(DbTransaction transaction, MigrationStatement migrationStatement)
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.ExecuteSql(DbTransaction transaction, MigrationStatement migrationStatement)
   at System.Data.Entity.Migrations.DbMigrator.ExecuteStatements(IEnumerable`1 migrationStatements)
   at System.Data.Entity.Migrations.Infrastructure.MigratorBase.ExecuteStatements(IEnumerable`1 migrationStatements)
   at System.Data.Entity.Migrations.DbMigrator.UpgradeHistory(IEnumerable`1 upgradeOperations)
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.UpgradeHistory(IEnumerable`1 upgradeOperations)
   at System.Data.Entity.Migrations.DbMigrator.Update(String targetMigration)
   at System.Data.Entity.Migrations.Infrastructure.MigratorBase.Update(String targetMigration)
   at System.Data.Entity.Migrations.Design.ToolingFacade.UpdateRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run()
ClientConnectionId:eda1a366-d3c8-44de-8cc9-8f64e2511b4e
'PK_dbo.__MigrationHistory' is not a constraint.
Could not drop constraint. See previous errors. 
```

这是什么原因？我查询了 sysobjects 表中的 'PK_dbo.__MigrationHistory'，但它不存在。任何的想法？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T17:36:17.743

好的。我找到了解决方案。看来 EF 期望`__MigrationHistory`table 的 Primary Key 约束具有 name `PK_dbo.__MigrationHistory`。但它是`PK___MigrationHistory`。

所以下面的 sql 语句可以解决问题。

```
ALTER TABLE __MigrationHistory
drop CONSTRAINT PK___MigrationHistory
ALTER TABLE __MigrationHistory
ADD CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY (MigrationId) 
```

在此之后，我使用了 update-database 没有错误。

# javascript - 我可以在 TR 点击事件中排除按钮点击吗？

> ID：13589022
> 
> 赞同：13
> 
> 时间：2012-11-27T16:48:15.630
> 
> 标签：javascript, jquery, twitter-bootstrap

我目前在选中时突出显示表格行，但在其中一个单元格中我有一个按钮。当我单击按钮时，我正在触发表格行单击事件。有没有可能把两者分开？

我的两个电话目前看起来像这样：

```
$('table.table-striped tbody tr').on('click', function () {
   $(this).find('td').toggleClass('row_highlight_css');
}); 

$(".email-user").click(function(e) {
    e.preventDefault();
    alert("Button Clicked");
}); 
```

我的 HTML 如下所示：

```
<table class="table table-bordered table-condensed table-striped">
  <thead>
    <tr>
      <th>col-1</th>
      <th>col-2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Some Data</td>
      <td><button class="btn btn-mini btn-success email-user" id="email_123" type="button">Email User</button></td>
    </tr>
  </tbody>
</table> 
```

知道如何阻止按钮单击事件触发行单击事件吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-27T16:52:27.833

你必须使用`stopPropagation`：

```
$(".email-user").click(function(e) {
    e.preventDefault();
    e.stopPropagation();
    alert("Button Clicked");
}); 
```

（另请参阅：[event.stopPropagation 和 event.preventDefault 有什么区别？](https://stackoverflow.com/questions/5963669/whats-the-difference-between-event-stoppropagation-and-event-preventdefault)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:52:20.307

我相信这是由事件冒泡引起的，请尝试`e.stopPropagation();`在之后使用`e.preventDefault();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:58:48.343

**试试这个：**

```
$('.table-striped').find('tr').on('click', function() {
    $(this).find('td').toggleClass('row_highlight_css');
});

$(".email-user").on('click', function(e) {
    e.preventDefault();
    e.stopPropagation();
});​ 
```

# jquery - Superfish 下拉菜单在刷新时在 Chrome 中呈现过多的空白区域

> ID：13589025
> 
> 赞同：1
> 
> 时间：2012-11-27T16:48:26.490
> 
> 标签：jquery, css, drupal, superfish

我希望有人以前遇到过这个问题，或者至少可以告诉我为什么 Chrome 会这样做：http: [//imgur.com/IJvge,Vsvcj#0](http://imgur.com/IJvge,Vsvcj#0)

在第一张图片中，菜单正确呈现。首次访问该站点将正确显示空白。但是，在刷新或访问网站的其他部分时，空白区域会放大以显示第二张图像是什么。

如果我手动将菜单项的宽度更改为 (80%)，空白仍然会呈现太大。手动更改 default.css superfish 下拉主题的 .module 或 .css 也不会改变这一点。Chrome 会不断覆盖更改。这在 IE/Firefox/Opera/Safari 中不是问题，仅在 Chrome 中出现。

该网站位于：axiombeta.scdmarketing.com（对不起，显然还不能有两个超链接......）

# ruby-on-rails - Ruby on Rails - 将 URL 映射到控制器、方法和参数

> ID：13589030
> 
> 赞同：1
> 
> 时间：2012-11-27T16:48:35.880
> 
> 标签：ruby-on-rails, ruby-on-rails-3, url-routing, rails-console

我知道 Rails 应用程序中的文件 routes.rb 将 URL 映射到控制器、方法和 params 哈希中的一组参数。这在某种程度上因“资源”、嵌套资源和非 RESTful 路由而变得复杂。

有没有办法在 Rails 控制台上运行命令来映射 URL 并准确确定哪个控制器、哪个方法、哪个 http 方法以及来自给定 URL 的参数哈希的确切值？

那么是否可以在rails控制台上使用参数哈希运行控制器方法并将控制器的输出发送到STDOUT？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:48:24.883

试试这些

```
Rails.application.routes.named_routes.each{|p,s| puts p,s} 
Rails.application.routes.url_helpers.my_path_helper   # To get url for a path helper 
```

或者

```
route = Rails.application.routes
route.recognize_path "/poweruser/3"           # will give you result exactly you wanted 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:53:23.727

试试跑步

```
bundle exec rake routes 
```

请参阅[确定路径是否作为 Rails 控制器中的路由存在](https://stackoverflow.com/questions/3273715/determine-if-path-exists-as-route-in-rails-controller)

```
Rails.application.routes.recognize_path 
```

# hibernate - 查询给定类的实体在特定属性中更改的修订版

> ID：13589032
> 
> 赞同：0
> 
> 时间：2012-11-27T16:48:46.260
> 
> 标签：hibernate, hibernate-envers

在这里寻找 Envers 文档 [http://docs.jboss.org/envers/docs/index.html#revisions-of-entity](http://docs.jboss.org/envers/docs/index.html#revisions-of-entity)

我正在尝试查询更改特定对象属性的修订版（LIST！）。在文档示例中，您有一个带有 id、name、surname 和 address 的人员类。

第 5.2 段展示了如何找到满足某些最大化/最小化条件的特定修订。

我可以找到更改特定类实例的所有修订

```
auditReader.getRevisions(entityClass, entityName, id); 
```

但这不是一个查询。

我正在尝试做类似的事情（给定 entityClass、id 和 attributeName？）：

```
auditReader.createQuery().forRevisionsOfEntity(entityClass, false, true)
.add(AuditEntity.id().eq(id))
.add(AuditEntity.property(attributeName).ne(AuditEntity.GETPREVIOUS?().property(attributeName))) 
```

换句话说，作为hibernate envers文档，我正在搜索所有具有一个id（=一个人）的人员修订版，其中只有名称被更改（地址可以在中间多次更改）。

我不知道如何将限制写到查询中，看到只有一个属性的更改，或者如何写属性与该对象的先前版本不同。

谢谢

弗朗切斯科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:25:53.547

要查询属性更改，您需要在审计实体中包含实体的部分或全部属性的属性更改标记。这是 Hibernate 4.1 中较新版本的 Envers 的一个特性。

请参阅文档： [http ://docs.jboss.org/hibernate/core/4.1/devguide/en-US/html/ch15.html#envers-envers-tracking-properties-changes-queries](http://docs.jboss.org/hibernate/core/4.1/devguide/en-US/html/ch15.html#envers-envers-tracking-properties-changes-queries)

# python - 如何使用 Python 从网站获取和验证 JSON 数据？

> ID：13589033
> 
> 赞同：2
> 
> 时间：2012-11-27T16:48:51.647
> 
> 标签：python, json

我需要创建 cronjob 来测试网站是否每隔一小时检索一次数据。

最初尝试将 json 数据粘贴到文本文件中，并通过编码和解码来验证数据。现在我需要在每次运行 cron 作业时加载实时数据（json 数据）。使用 urllib2 但它没有从 url 获得请求响应。

网址->加载时->通过萤火虫提供要执行的网址并从中获取json数据。我如何将这样的 url 导入或解析到 python 中。请举个例子。

我的步骤：创建时间表

```
 1.45 08 * * 1-5 /home/user/myfile/daily_verifydata.sh >> /home/user/cronlog.log 
```

daily_verifydata.sh

```
 #!/bin/sh
    python /home/user/path/Dashboard_test.py 
```

Dashboard_test.py

```
 import json
    import urllib2

    f = open('test.txt','r') # open in read mode
    data = f.read()
    print data

    # How to Parse the json from the URL to python

    data_string = json.dumps(data)
    print '\n''ENCODED:', data_string

    decoded = json.loads(data_string)
    print '\n''DECODED:', decoded

    # Validating data through decoded output. 
```

如果可能通过 curl 解析，需要知道语法

谢谢，维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:03:17.267

要在 bash 脚本中检索 JSON — 您可以使用不错的工具[httpie](https://github.com/jkbr/httpie#json)

如果你想从 python 脚本中提取 JSON——最好的选择是[requests](http://docs.python-requests.org/en/latest/user/quickstart/#json-response-content) lib

对于验证，它很复杂[——JSONSchema](http://json-schema.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:00:18.833

我建议使用请求

```
import requests
import simplejson

session = requests.session()
# I presume your site has authentication
response = session.post(URL_TO_LOGIN, {
            'username': username,
            'password': password
        })
response = session.get(URL_TO_JSON)
if response.ok:
    simplejson.loads(response.text) 
```

# asp.net-mvc - 在 Asp.Net MVC 4 中使用 SimpleMembership 保护文件夹

> ID：13589042
> 
> 赞同：3
> 
> 时间：2012-11-27T16:49:10.687
> 
> 标签：asp.net-mvc, asp.net-mvc-4, simplemembership

我在我的 ASP.NET MVC 4 项目中使用 SimpleMembership Provider。为什么 web.config 中的以下代码不能为未经授权的用户保护文件夹的内容？

```
<location path="Content/documents">
    <system.web>
      <authorization>
        <deny users="?" />
      </authorization>
    </system.web>
</location> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:52:19.293

> 它应该可以工作，检查路径是否设置正确，也许你有其他网络配置，并且最内部的路径不正确。
> 
> 您还应该尝试使用 asp.net 配置。点击项目，然后从 **> 菜单 -> 项目 -> asp.net 配置 -> 安全 -> 创建访问规则**

. 从这里你可以自己处理。

# ruby-on-rails - 为什么在 ApplicationController 上定义为私有的方法可以在派生类的方法内部调用，但不能在派生类本身内部调用？

> ID：13589046
> 
> 赞同：3
> 
> 时间：2012-11-27T16:49:22.623
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, oop

我在敏捷 Rails 书中做练习，application_controller.rb 中有一个私有方法，定义为：

```
private 
  def current_cart
    Cart.find(session[:cart_id])
  rescue ActiveRecord::RecordNotFound 
    cart = Cart.create session[:cart_id] =  cart.id cart 
  end 
```

可以从 UserController#index(method) 内部调用此方法，但我不能这样称呼它：

```
class UserController < ApplicationController 
  @cart = current_cart
  ... 
```

这是为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T17:17:40.480

您定义的方法`ApplicationController`是实例方法。因此，它可以从派生控制器的另一个实例方法中调用。这里：

```
class UserController < ApplicationController 
  @cart = current_cart 
```

你试图在类定义中调用它，而不是在类的实例方法中，所以它正在寻找一个不存在的类方法。

至于能够在派生控制器中调用私有方法，请参见[Rails 中的受保护方法和私有方法](https://stackoverflow.com/questions/4495078/protected-and-private-methods-in-rails)。

编辑：来自[http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Classes#Declaring_Visibility](http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Classes#Declaring_Visibility)：

> 在 Ruby 中，“私有”可见性类似于 Java 中的“受保护”可见性。Ruby 中的私有方法可以从子级访问。你不能在 Ruby 中拥有真正的私有方法。你不能完全隐藏一个方法。

# eclipse - OSGi + Logback + slf4j - Eclipse 运行配置

> ID：13589048
> 
> 赞同：7
> 
> 时间：2012-11-27T16:49:26.963
> 
> 标签：eclipse, osgi, slf4j, equinox, tycho

这是我的配置：

我们正在开发一个 OSGi 应用程序并希望包含日志记录。我决定使用 slf4j + logback。

我们使用 Eclipse 作为 IDE 和 Tycho 以从 Eclipse IDE（如 Manifest Editor 等）中受益。

所以我尝试了以下方法：

使用以下 Manifest.mf 创建了一个新插件：

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: Createcommand
Bundle-SymbolicName: de.hswt.oms.ws.wsr.createcommand
Bundle-Version: 1.0.0.qualifier
Bundle-RequiredExecutionEnvironment: JavaSE-1.7
Import-Package: de.hswt.oms.ws.command.wsr,
 de.hswt.oms.ws.ds.core.data.impl,
org.slf4j
Service-Component: OSGI-INF/component.xml 
```

现在，当我转到运行 -> 运行配置 -> OSGi 框架并选择我的 Bundle 并单击“添加必需的插件”时，将选择 100 多个 Bundle，我会收到很多错误和异常。

所以我从现有的罐子里想出了一个新的插件，其中包括以下三个罐子：

*   logback-classic-1.0.7
*   logback-core-1.0.7
*   com.springsource.slf4j.api-1.6.1（我不相信这是个好主意，但是嘿......）

如果我手动创建一个新的运行配置（不单击“添加所需的捆绑包”，它会按预期工作，但只要我点击“添加所需的捆绑包”，我就会回到 100 多个带有很多错误的捆绑包（一些 Jetty 的东西例子...）

所以我的问题是：如何在我的 OSGi 应用程序中启用 logback 和 slf4j 并在 eclipse 中使用它并正确配置它？

如果您需要更多信息，请随时询问。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T07:09:02.433

AFAIK 当前官方 Logback/SLF4J jar 中的捆绑清单标头中存在一些问题。但是，您只需要以下三个 jars/bundles。基本功能不需要其他任何东西。

*   SLF4J API
*   Logback 核心
*   Logback 经典

在 Eclipse 中，我们将包放在 Orbit 中，以便跨项目重复使用。我们对清单标头应用了一些我们认为有益的修改。例如，我们将实际的 SLF4J 绑定作为片段交付，以避免原始 SLF4J API jar 的循环依赖。

以下是捆绑包的下载链接：

*   [org.slf4j.api](http://www.eclipse.org/downloads/download.php?r=1&file=/tools/orbit/downloads/drops/R20120526062928/repository/plugins/org.slf4j.api_1.6.4.v20120130-2120.jar)
*   [ch.qos.logback.core](http://www.eclipse.org/downloads/download.php?r=1&file=/tools/orbit/downloads/drops/R20120526062928/repository/plugins/ch.qos.logback.core_1.0.0.v20111214-2030.jar)
*   [ch.qos.logback.classic](http://www.eclipse.org/downloads/download.php?r=1&file=/tools/orbit/downloads/drops/R20120526062928/repository/plugins/ch.qos.logback.classic_1.0.0.v20111214-2030.jar)
*   [ch.qos.logback.slf4j](http://www.eclipse.org/downloads/download.php?r=1&file=/tools/orbit/downloads/drops/R20120526062928/repository/plugins/ch.qos.logback.slf4j_1.0.0.v20120123-1500.jar)

您可能还想要：

*   [org.slf4j.ext](http://www.eclipse.org/downloads/download.php?r=1&file=/tools/orbit/downloads/drops/R20120526062928/repository/plugins/org.slf4j.ext_1.6.4.v20120130-2120.jar)
*   [org.slf4j.jcl](http://www.eclipse.org/downloads/download.php?r=1&file=/tools/orbit/downloads/drops/R20120526062928/repository/plugins/org.slf4j.jcl_1.6.4.v20120130-2120.jar)（通过 SLF4J 进行公共日志记录）
*   [org.slf4j.jul](http://www.eclipse.org/downloads/download.php?r=1&file=/tools/orbit/downloads/drops/R20120526062928/repository/plugins/org.slf4j.jul_1.6.4.v20120130-2120.jar)（Java 日志桥）
*   [org.slf4j.log4j](http://www.eclipse.org/downloads/download.php?r=1&file=/tools/orbit/downloads/drops/R20120526062928/repository/plugins/org.slf4j.log4j_1.6.4.v20120130-2120.jar)（通过 SLF4J 的 LOG4J）

请注意，“添加必需的插件”不够聪明。它可能选择了太多或太少的插件。有时服务 API 在一个包中提供，但实际的服务实现在第二个包中提供。它可能不会选择该捆绑包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T06:44:02.970

有一个复选框，上面写着“解决可选导入”之类的内容。默认情况下它处于打开状态，但这几乎总是会导致您描述的行为，即它想要添加所有内容。

关闭它应该会有所帮助。此外，PDE 往往会添加很多不需要的片段。

总而言之，我很少相信 Eclipse 会为运行时添加“正确”的包。我只是使用“验证”并手动添加所需的内容，然后再次检查。这可能需要几分钟，但是当你把它留给 PDE 时找出问题所在可能需要几个小时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:40:25.823

不确定 logback，但您可能还想尝试[pax logging](http://team.ops4j.org/wiki/display/paxlogging/Pax+Logging)。只需安装 pax logging api 和 pax logging 服务，它应该可以工作。还有一个[文档如何在 eclipse 中设置它](http://team.ops4j.org/wiki/display/paxlogging/PaxLogging+inside+PDE)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-27T21:41:21.253

如果您希望它与 Eclipse Equinox 一起使用，您可以尝试 Eclipse-BuddyPolicy。这使一个插件能够从另一个插件加载所有类，而无需显式导入它。这可能会解决您的问题。

从带有罐子的捆绑包中添加到您的清单中：

> Eclipse-BuddyPolicy：依赖

并使用日志记录到捆绑包

> Eclipse-RegisterBuddy：com.other.plugin

见[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fbundle_manifest.html](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fbundle_manifest.html)

# ruby-on-rails - rails服务器无法启动，捆绑安装但失败

> ID：13589051
> 
> 赞同：0
> 
> 时间：2012-11-27T16:49:29.650
> 
> 标签：ruby-on-rails, gem

> 你怎么解决这个问题？我做了捆绑安装，但我仍然从下面收到错误。

当显示所有捆绑包都已安装时，无法运行 rails server。请帮帮我。

```
Master:disrupreneurs shaunstanislaus$ bundle install
Using rake (10.0.2) 
Using i18n (0.6.1) 
Using multi_json (1.3.7) 
Using activesupport (3.2.8) 
Using builder (3.0.4) 
Using activemodel (3.2.8) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.2) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.1.3) 
Using actionpack (3.2.8) 
Using mime-types (1.19) 
Using polyglot (0.3.3) 
Using treetop (1.4.12) 
Using mail (2.4.4) 
Using actionmailer (3.2.8) 
Using arel (3.0.2) 
Using tzinfo (0.3.35) 
Using activerecord (3.2.8) 
Using activeresource (3.2.8) 
Using coffee-script-source (1.4.0) 
Using execjs (1.4.0) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using json (1.7.5) 
Using rdoc (3.12) 
Using thor (0.16.0) 
Using railties (3.2.8) 
Using coffee-rails (3.2.2) 
Using diff-lcs (1.1.3) 
Using multipart-post (1.1.5) 
Using faraday (0.8.4) 
Using hashie (1.2.0) 
Using httpauth (0.2.0) 
Using jquery-rails (2.1.4) 
Using jwt (0.1.5) 
Using oauth (0.4.7) 
Using oauth2 (0.8.0) 
Using omniauth (1.1.1) 
Using omniauth-oauth2 (1.1.1) 
Using omniauth-facebook (1.4.1) from git://github.com/mkdynamic/omniauth-facebook.git (at                master)
Using omniauth-google-oauth2 (0.1.13) 
Using omniauth-google-plus-oauth2 (0.0.1) from https://github.com/luke-gru/omniauth-        google-plus-oauth2.git (at master) 
Using omniauth-oauth (1.0.1) 
Using omniauth-twitter (0.0.14) from https://github.com/arunagw/omniauth-twitter.git (at master) 
Using bundler (1.2.2) 
Using rails (3.2.8) 
Using rb-readline (0.4.2) 
Using rspec-core (2.12.0) 
Using rspec-expectations (2.12.0) 
Using rspec-mocks (2.12.0) 
Using rspec (2.12.0) 
Using sass (3.2.3) 
Using sass-rails (3.2.5) 
Using sqlite3 (1.3.6) 
Using twitter-bootstrap-rails (2.1.6) from git://github.com/seyhunak/twitter-bootstrap-    rails.git (at master) 
Using uglifier (1.3.0) 
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

> 从这部分开始，它一直无法运行 rails s
> 
> 我该如何解决这个问题？

```
Master:disrupreneurs shaunstanislaus$ rails s
=> Booting WEBrick
=> Rails 3.2.8 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/railties-    3.2.8/lib/rails/railtie/configuration.rb:85:in `method_missing': undefined method `less' for #    <Rails::Application::Configuration:0x007fe5032ffa18> (NoMethodError)
    from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/bundler/gems/twitter-bootstrap-    rails-4ac83ab51931/lib/twitter/bootstrap/rails/engine.rb:15:in `block in <class:Engine>'
    from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
from /Users/shaunstanislaus/Documents/developer/web/disrupreneurs/config/environment.rb:5:in `<top (required)>'
from /Users/shaunstanislaus/Documents/developer/web/disrupreneurs/config.ru:4:in `require'
from /Users/shaunstanislaus/Documents/developer/web/disrupreneurs/config.ru:4:in `block in <main>'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
from /Users/shaunstanislaus/Documents/developer/web/disrupreneurs/config.ru:1:in `new'
from /Users/shaunstanislaus/Documents/developer/web/disrupreneurs/config.ru:1:in `<main>'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/server.rb:46:in `app'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/server.rb:70:in `start'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:55:in `block in <top (required)>'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
from /Users/shaunstanislaus/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:52:47.147

还添加`gem 'less-rails'`

也看看这个帖子：

[Rails railties gem 错误“未定义的方法：'less'”](https://stackoverflow.com/questions/13284077/rails-railties-gem-error-undefined-method-less)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:51:27.280

添加gemfile：

```
gem "therubyracer" 
```

并再次运行 bundle install

# jquery - jQuery Mobile addClass 不影响样式

> ID：13589052
> 
> 赞同：0
> 
> 时间：2012-11-27T16:49:30.750
> 
> 标签：jquery, jquery-mobile

我在 jQuery Mobile 中使用 addClass 函数。我可以在代码中看到该类已添加，但应应用到它的样式被忽略了。

如果我将类添加到 html 并刷新页面，则该类是样式化的。所以在我看来，这可能与 JQM 如何呈现页面有关。

```
 $('.slider1').click(function(){
        $('.sliders').addClass('.slidersPosTwo');
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:59:43.937

查看以下文档`.addClass()`：[http ://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

请注意示例如何省略`.`了类名开头的句点 ( )。如果您离开句点，那么它将作为类名的一部分添加，仅应用作选择器。

如果您进行此更改，您的代码将起作用：

```
...
$('.sliders').addClass('slidersPosTwo');//notice, no period before the class name
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:06:58.200

以编程方式修改 JQM 内容后，您通常需要刷新增强功能。例如，这可以通过`$(".slider").slider("refresh");`. 此外，增强后的元素在增强后具有完全不同的结构（例如，为单个滑块添加了许多新的 DOM 元素）。可能是您没有将类添加到正确的 DOM 元素（除非您设置 jsfiddle 或类似元素，否则无法验证这一点）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T20:42:00.933

代替 ：

```
 $('.sliders').addClass('.slidersPosTwo'); 
```

和：

```
 $('.sliders').addClass('slidersPosTwo'); 
```

更好的是，[在这里](http://jsfiddle.net/Gajotres/fmJhF/)您可以找到一个实时的 jsFiddle 示例，如何修改每个滑块元素。例如：

```
// Slider label
$('div[data-role="fieldcontain"] label#slider-label').addClass('custom-slider-label');
// Slider text box
$('div[data-role="fieldcontain"] input#slider').addClass('custom-slider');
// Slider element
$('div[data-role="fieldcontain"] div[role="application"]').addClass('custom-slider-element');
// Slider button
$('div[data-role="fieldcontain"] div[role="application"] a span').addClass('custom-slider-button'); 
```

# javascript - Google Maps v3 标记始终出现在左上角

> ID：13589053
> 
> 赞同：0
> 
> 时间：2012-11-27T16:49:32.327
> 
> 标签：javascript, google-maps, google-maps-api-3, maps, coffeescript

我正在编写一些 Google Maps API v3 代码，它似乎与多个标记一起工作得很好，但是当只有 1 个时，它总是将标记绘制在地图的左上角，就在可见区域之外：

![地图外观的屏幕截图](../Images/db77672d6a60f2c7b8a977fa7565624a.png)

这是我的咖啡脚本代码：

```
class SimpleMap
    constructor: (div_id, lat = 40.783627, lng = -73.942583) ->
        # L.Icon.Default.imagePath = "/assets"
        @div_id = div_id
        @map_options = {center: new google.maps.LatLng(lat, lng), zoom: 10, mapTypeId: google.maps.MapTypeId.ROADMAP}
        @markers = []
        @map = new google.maps.Map document.getElementById(div_id), @map_options
        @loadMarkers() # gets them and plots on the map
        @autoFit()
    loadMarkers: ->
        items = $(".grid-item[data-lat], .apartment[data-lat]")
        for item in items
        console.log "Adding #{item}"
        @addMarker(item)
    @autoFit()

    addMarker: (item) ->
        console.log "Adding marker"
        lat = $(item).attr("data-lat")
        lng = $(item).attr("data-lng")

        console.log "#{lat}, #{lng}"

        marker = new google.maps.Marker(
            position: new google.maps.LatLng lat, lng
            map: @map
            title: "This is my marker"
        )

        @markers.push marker

    autoFit: ->
        bounds = new google.maps.LatLngBounds()
        for marker in @markers
            bounds.extend marker.getPosition()
        @map.fitBounds bounds
        # if you leave out the below, the marker appears int he same position as in the screenshot (slightly off screen) but at the max zoom level. 
        listener = google.maps.event.addListener(@map, "idle", =>
            @map.setZoom 9 if @map.getZoom() > 8
            @map.setCenter @markers[0].getPosition()
            google.maps.event.removeListener listener
        ) 
```

地图似乎忽略了我设置的尝试`setCenter(@markers[0].getPosition())`。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:29:56.813

在评论之后，仅当有 1 个标记时才会出现此问题。

基于这一事实，我将问题归结为这一行：

```
@map.fitBounds bounds 
```

当只有 1 个标记时，边界的 NE 角等于 SW 角。

在这种情况下，当您使用边界作为 fitBounds() 参数时，我注意到了意外的交互。

**建议：**

仅当至少有 2 个标记时才使用 fitBounds()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:44:14.063

我相信问题出在：

```
 bounds = new google.maps.LatLngBounds()
    for marker in @markers
        bounds.extend marker.getPosition()
    @map.fitBounds bounds 
```

如果您正在扩展当前地图边界以包含所有标记，但您只有一个标记，则边界将以标记位于地图限制边界中的方式扩展。

问候

# dojox.mobile - addFixedBar (vs. addChild) 改变标题中按钮的行为

> ID：13589054
> 
> 赞同：1
> 
> 时间：2012-11-27T16:49:37.013
> 
> 标签：dojox.mobile

HTML

```
<div id="activities"></div>
<div id="activity-edit"></div>​ 
```

JavaScript

```
require([
    'dojo/ready', 'dojo/dom', 'dijit/registry', 'dojox/mobile/parser', 'dojox/mobile/deviceTheme', 'dojox/mobile/compat', 'dojox/mobile/Icon', 'dojox/mobile/ScrollableView', 'dojox/mobile/Heading', 'dojox/mobile/ToolBarButton', 'dojox/mobile'
],
function(ready, dom, registry, parser, deviceTheme, compat, Icon, ScrollableView, Heading, ToolBarButton, mobile) {
    ready(function() {
        var view_activities = new ScrollableView(null, 'activities');
        view_activities.selected = true;

        var heading = new Heading({
            label: 'Activities',
            fixed: 'top'
        });
        view_activities.addFixedBar(heading);

        var button = new ToolBarButton({
            icon: 'mblDomButtonWhitePlus',
            style: 'float:right;',
            moveTo: 'activity-edit',
            onClick: function(e) {
                click_activity_edit(e, 0);
            }
        });
        heading.addChild(button);

        var view_activity_edit = new ScrollableView(null, 'activity-edit');

        view_activities.startup();
    });

    this.click_activity_edit = function(e, activityid) {
        var view_activity_edit = registry.byId('activity-edit');
        view_activity_edit.destroyDescendants(false);

        heading = new Heading({
            id: 'heading-activity-edit',
            label: 'Activity',
            fixed: 'top'
        });
        view_activity_edit.addChild(heading);

        var button = new ToolBarButton({
            label: 'Cancel',
            moveTo: 'activities',
            transitionDir: -1,
            arrow: 'left'
        });
        heading.addChild(button);

        button = new ToolBarButton({
            label: 'Save',
            style: 'float:right;',
            moveTo: 'activities',
            transitionDir: -1,
            onClick: function(e) {
                click_activity_save(e, activityid, function() {
                    data.get_activities(request, handle_getActivities);
                });
            }
        });
        heading.addChild(button);

        view_activity_edit.startup();
    };

    parser.parse();
});​ 
```

重新创建行为的步骤：

单击“+”按钮，单击“取消”，再次单击“+”按钮，再次单击“取消”按钮不再起作用。

如果将 addFixedBar 替换为 addChild，则该按钮每次都按预期工作。我会这样做，但我需要修复标题，因为它位于 ScrollableView 上。

我知道 addFixedBar 将小部件添加到 domNode 而不是 containerNode，但我不明白为什么这会影响按钮的行为并且仅在第二遍时才会影响。我的猜测是它与使用 addFixedBar 时没有实际删除标题的 destroyDescendants 调用有关。我尝试在调用 destroyDescendants 后手动销毁标题，但这没有用。无论我是通过“dom”还是“registry”获取标题，第二遍标题都是未定义/空的。

任何帮助或解释表示赞赏。

**编辑**

这是 JSFiddle：http: [//jsfiddle.net/MPUvk/](http://jsfiddle.net/MPUvk/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:50:53.533

关键是 startup() 调用。

view_activity_edit.startup() 调用只会工作一次（startup() 设置一个内部 _started 标志并且在它已经设置时什么都不做）。第二次创建视图时，startup() 什么都不做。

addFixedBar 和 addChild 之间的不同行为是因为 addChild 在内部调用 startup()，而 addFixedBar 没有。

所以要修复，只需在 addFixedBar 调用之后添加 heading.startup() ，这应该可以工作。另一种可能性是在销毁视图时重置 view_activity_edit._started = false。

# ruby-on-rails - Refinery CMS：为引擎中的现有模型生成迁移

> ID：13589064
> 
> 赞同：5
> 
> 时间：2012-11-27T16:50:11.763
> 
> 标签：ruby-on-rails, ruby, database-migration, refinerycms, refinery

我想向我在 Refinery CMS 引擎中创建的模型添加一个属性。我知道我可以做到以下几点：

1.  `rails generate migration AddPartNumberToProducts part_number:string`
2.  手动将迁移文件`db/migrate`从`vendor/extensions/products/db/migrate`

但是是否有一个命令可以首先将迁移生成到正确的文件夹中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:59:05.740

根据@parndt（[炼油厂项目的首席开发人员](http://refinerycms.com/about)）的说法，我上面概述的方法是正确的。

# windows-phone-7 - ArgumentException 随机发生

> ID：13589068
> 
> 赞同：0
> 
> 时间：2012-11-27T16:50:16.347
> 
> 标签：windows-phone-7, startup, argumentexception

有时，当我的应用程序尝试启动时，会引发 ArgumentException“参数不正确”。不幸的是，异常是随机发生的，因此很难修复。

InnerException 和 StackTrace 是空的 :(。

这是输出：

```
'TaskHost.exe' (Managed): Loaded 'mscorlib.dll'
'TaskHost.exe' (Managed): Loaded 'System.Windows.RuntimeHost.dll'
'TaskHost.exe' (Managed): Loaded 'System.dll'
'TaskHost.exe' (Managed): Loaded 'System.Windows.dll'
'TaskHost.exe' (Managed): Loaded 'System.Net.dll'
'TaskHost.exe' (Managed): Loaded 'System.Core.dll'
'TaskHost.exe' (Managed): Loaded 'System.Xml.dll'
'TaskHost.exe' (Managed): Loaded '\Applications\Install\35353739-1684-48DB-A5D2-F849FC676154\Install\SmartLib.dll', Symbols loaded.
'TaskHost.exe' (Managed): Loaded '\Applications\Install\35353739-1684-48DB-A5D2-F849FC676154\Install\RestSharp.WindowsPhone.dll'
'TaskHost.exe' (Managed): Loaded 'Microsoft.Phone.dll'
'TaskHost.exe' (Managed): Loaded 'Microsoft.Phone.Interop.dll'
'TaskHost.exe' (Managed): Loaded '\Applications\Install\35353739-1684-48DB-A5D2-F849FC676154\Install\JeffWilcox.PhoneThemeManager.dll'
'TaskHost.exe' (Managed): Loaded 'System.Xml.Linq.dll'
'TaskHost.exe' (Managed): Loaded '\Applications\Install\35353739-1684-48DB-A5D2-F849FC676154\Install\System.Windows.Interactivity.dll'
'TaskHost.exe' (Managed): Loaded '\Applications\Install\35353739-1684-48DB-A5D2-F849FC676154\Install\Microsoft.Expression.Interactions.dll'
'TaskHost.exe' (Managed): Loaded '\Applications\Install\35353739-1684-48DB-A5D2-F849FC676154\Install\Microsoft.Phone.Controls.Toolkit.dll'
'TaskHost.exe' (Managed): Loaded '\Applications\Install\35353739-1684-48DB-A5D2-F849FC676154\Install\System.Threading.Tasks.dll'
A first chance exception of type 'System.MethodAccessException' occurred in mscorlib.dll
'TaskHost.exe' (Managed): Loaded 'System.Runtime.Serialization.dll'
'TaskHost.exe' (Managed): Loaded '\Applications\Install\35353739-1684-48DB-A5D2-F849FC676154\Install\WPExtensions.dll', Symbols loaded.
'TaskHost.exe' (Managed): Loaded '\Applications\Install\35353739-1684-48DB-A5D2-F849FC676154\Install\Microsoft.Phone.Controls.dll'
'TaskHost.exe' (Managed): Loaded '\Applications\Install\35353739-1684-48DB-A5D2-F849FC676154\Install\Silverlight_ZXing_Core.dll'
'TaskHost.exe' (Managed): Loaded '\Applications\Install\35353739-1684-48DB-A5D2-F849FC676154\Install\Microsoft.Threading.Tasks.dll'
A first chance exception of type 'System.MethodAccessException' occurred in mscorlib.dll
A first chance exception of type 'System.ArgumentException' occurred in System.Windows.dll
A first chance exception of type 'System.ArgumentException' occurred in System.Windows.dll
A first chance exception of type 'System.ArgumentException' occurred in System.Windows.dll
A first chance exception of type 'System.ArgumentException' occurred in System.Windows.dll
'TaskHost.exe' (Managed): Loaded 'System.SR.dll' 
```

有时一切正常，但有时我无法连续运行 10 次应用程序。

编辑 1：调用堆栈：

> SmartLib.dll!SmartLib.App.Application_UnhandledException(object sender = {SmartLib.App}, System.Windows.ApplicationUnhandledExceptionEventArgs e = {System.Windows.ApplicationUnhandledExceptionEventArgs}) 第 348 行 + 0x5 字节 C# System.Windows.dll!MS.Internal。 Error.CallApplicationUEHandler(System.Exception e = {"参数不正确。"}) + 0x30 bytes
> System.Windows.dll!MS.Internal.Error.CallAUEHandler(uint hr = 2147942487, out uint bIsHandled = 0) + 0x6 bytes
> [本机到托管转换]

编辑 2：堆栈跟踪：

```
at MS.Internal.XcpImports.CheckHResult(UInt32 hr)
   at MS.Internal.XcpImports.Collection_AddValue[T](PresentationFrameworkCollection`1 collection, CValue value)
   at MS.Internal.XcpImports.Collection_AddDependencyObject[T](PresentationFrameworkCollection`1 collection, DependencyObject value)
   at System.Windows.PresentationFrameworkCollection`1.AddDependencyObject(DependencyObject value)
   at System.Windows.Controls.UIElementCollection.AddInternal(UIElement value)
   at System.Windows.PresentationFrameworkCollection`1.Add(UIElement value)
   at System.Windows.Controls.ItemsControl.AddVisualChild(Int32 index, DependencyObject container, Boolean needPrepareContainer)
   at System.Windows.Controls.ItemsControl.AddContainers()
   at System.Windows.Controls.ItemsControl.RecreateVisualChildren(IntPtr unmanagedObj)
   at MS.Internal.XcpImports.MeasureOverrideNative(IntPtr element, Single inWidth, Single inHeight, Single& outWidth, Single& outHeight)
   at MS.Internal.XcpImports.FrameworkElement_MeasureOverride(FrameworkElement element, Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(Size availableSize)
   at Microsoft.Phone.Controls.Pivot.MeasureOverride(Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(IntPtr nativeTarget, Double inWidth, Double inHeight, Double& outWidth, Double& outHeight)
   at MS.Internal.XcpImports.MeasureOverrideNative(IntPtr element, Single inWidth, Single inHeight, Single& outWidth, Single& outHeight)
   at MS.Internal.XcpImports.FrameworkElement_MeasureOverride(FrameworkElement element, Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(IntPtr nativeTarget, Double inWidth, Double inHeight, Double& outWidth, Double& outHeight)
   at MS.Internal.XcpImports.MeasureOverrideNative(IntPtr element, Single inWidth, Single inHeight, Single& outWidth, Single& outHeight)
   at MS.Internal.XcpImports.FrameworkElement_MeasureOverride(FrameworkElement element, Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(Size availableSize)
   at Microsoft.Phone.Controls.PhoneApplicationFrame.MeasureOverride(Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(IntPtr nativeTarget, Double inWidth, Double inHeight, Double& outWidth, Double& outHeight) 
```

编辑 3：

根据 Stack Trace 的说法，这似乎是由可视化首页的一些错误引起的。但根据我的分析:) 这似乎是由于从服务器获取错误导致的错误。

# 应用信息：

我的应用程序提供有关图书馆书籍的信息。有时，当应用程序启动并尝试更新图书评分时，应用程序会崩溃。应用程序在得到响应之前崩溃。我使用 RestSharp 库发送 HTTP 请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:27:36.527

行。似乎问题与此问题相同：

[WP7 中的 UnhandledException](https://stackoverflow.com/questions/7413293/unhandledexception-in-wp7)

如果您有同样的问题，请在这里投票： [http ://connect.microsoft.com/VisualStudio/feedback/details/731082/windows-phone-forum-when-adding-multi-usercontrol-with-x-name-attribute -to-visualtree-exception-the-parameter-is-incorrect-is-throw](http://connect.microsoft.com/VisualStudio/feedback/details/731082/windows-phone-forum-when-adding-multi-usercontrol-with-x-name-attribute-to-visualtree-exception-the-parameter-is-incorrect-is-thrown)

*非常感谢 KooKiz 向我展示了如何查看异常堆栈跟踪 :)。它帮助我找到解决问题的方法。*

# php - 在我自己的脚本中使用 jimport

> ID：13589069
> 
> 赞同：3
> 
> 时间：2012-11-27T16:50:16.443
> 
> 标签：php, joomla, joomla2.5, joomla-extensions

当我尝试使用 jimport('joomla.user.helper') 它给了我这个错误。

> 致命错误：在第 223 行的 /home/joomclan/public_html/quiz/pop_fetching.php 中调用未定义函数 jimport()

这是我使用它的代码：

```
 function addJoomlaUser($name, $username, $password, $email) {
  jimport('joomla.user.helper');
  $salt   = JUserHelper::genRandomPassword(32);
  $crypted  = JUserHelper::getCryptedPassword($password, $salt);
  $cpassword = $crypted.':'.$salt;

  $data = array(
      "name"=>$name,
      "username"=>$username,
      "password"=>$password,
      "password2"=>$password,
      "email"=>$email,
      "block"=>0,
      "groups"=>array("1","2")
  ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:58:15.987

在顶部添加

`include(JPATH_BASE.'libraries/loader.php')`

但是，害怕，你的代码有问题

[http://www.webdeveloper.com/forum/showthread.php?226904-jimport-in-Joomla-how-does-it-work](http://www.webdeveloper.com/forum/showthread.php?226904-jimport-in-Joomla-how-does-it-work)

> 它在“libraries/loader.php”中定义，它包含在“libraries/joomla/import.php”中，它包含在“includes/framework.php”中，它包含在“index.php”中（所有路径都相对到基本的 Joomla 目录）。

可能这也会有所帮助 [jimport 在 Joomla 1.5 中不起作用](https://stackoverflow.com/questions/3871800/jimport-not-working-in-joomla-1-5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-03T06:05:00.177

在您的脚本中，在顶部，初始化 joomla 框架，如下所示。

```
`define( '_JEXEC', 1 );
define('JPATH_BASE', dirname(__FILE__) );
define( 'DS', DIRECTORY_SEPARATOR );
require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );
$app =& JFactory::getApplication('site');
$app->initialise();
jimport( 'joomla.user.user' );` 
```

我总是用那个。

# javascript - nodejs fs.exists()

> ID：13589070
> 
> 赞同：30
> 
> 时间：2012-11-27T16:50:17.530
> 
> 标签：javascript, node.js

我正在尝试调用`fs.exists`节点脚本，但出现错误：

> TypeError: Object # has no method 'exists'

我已经尝试用甚至替换`fs.exists()`（`require('fs').exists`以防`require('path').exists`万一），但这些都没有列出`exists()`我的 IDE 中的方法。`fs`在我的脚本顶部声明为`fs = require('fs');`，我以前用它来读取文件。

我怎么打电话`exists()`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-27T16:59:19.100

您的要求声明可能不正确，请确保您有以下内容

```
var fs = require("fs");

fs.exists("/path/to/file",function(exists){
  // handle result
}); 
```

在此处阅读文档

[http://nodejs.org/api/fs.html#fs_fs_exists_path_callback](http://nodejs.org/api/fs.html#fs_fs_exists_path_callback)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-10-05T14:03:55.627

您应该使用`fs.stats`or`fs.access`代替。从[节点文档](https://nodejs.org/api/fs.html#fs_fs_exists_path_callback)中，不推荐使用存在（可能已删除。）

如果您试图做的不仅仅是检查存在，文档说使用`fs.open`. 举个例子

```
fs.access('myfile', (err) => {
  if (!err) {
    console.log('myfile exists');
    return;
  }
  console.log('myfile does not exist');
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-14T18:36:46.033

不要使用 fs.exists [请阅读其 API 文档以获取替代信息](http://nodejs.org/api/fs.html#fs_fs_exists_path_callback)

这是建议的替代方法：继续打开文件，然后处理错误（如果有）：

```
var fs = require('fs');

var cb_done_open_file = function(interesting_file, fd) {

    console.log("Done opening file : " + interesting_file);

    // we know the file exists and is readable
    // now do something interesting with given file handle
};

// ------------ open file -------------------- //

// var interesting_file = "/tmp/aaa"; // does not exist
var interesting_file = "/some/cool_file";

var open_flags = "r";

fs.open(interesting_file, open_flags, function(error, fd) {

    if (error) {

        // either file does not exist or simply is not readable
        throw new Error("ERROR - failed to open file : " + interesting_file);
    }

    cb_done_open_file(interesting_file, fd);
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-01-17T18:21:29.610

正如其他人指出的那样，`fs.exists`已弃用，部分原因是它使用单个`(success: boolean)`参数，而不是几乎在其他任何地方都存在*的更*常见的参数。`(error, result)`

但是，`fs.existsSync`不推荐使用（因为它*不*使用回调，它只返回一个值），并且如果整个脚本的其余部分依赖于检查单个文件的存在，它可以使事情变得比必须处理更容易回调或用`try`/包围调用`catch`（在 的情况下`accessSync`）：

```
const fs = require('fs');
if (fs.existsSync(path)) {
  // It exists
} else {
  // It doesn't exist
} 
```

当然`existsSync`是同步和*阻塞*。虽然这有时很方便，但如果您需要并行执行其他操作（例如一次检查多个文件是否存在），您应该使用其他基于回调的方法之一。

现代版本的 Node 还支持基于 promise 的`fs`方法版本，人们可能更喜欢回调：

```
fs.promises.access(path)
  .then(() => {
    // It exists
  })
  .catch(() => {
    // It doesn't exist
  }); 
```

# jquery - jQuery - 选中复选框时更改值

> ID：13589071
> 
> 赞同：0
> 
> 时间：2012-11-27T16:50:17.190
> 
> 标签：jquery, checkbox

我在 HTML 中有三个复选框

```
<input type="checkbox" id="a1"/>
<input type="checkbox" id="a2" />
<input type="checkbox" id="a3" />
<span class="price"></span> 
```

我想这样做：如果选中了 id A1，则将 span 中的文本更改为 priceUp。如果选中了 ids A1 和 A2，则将 span 中的文本更改为 priceDown。如果选中了 ID A1、A2 和 A3，请将 span 中的文本更改为 priceNormal。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:02:40.907

使用 jQuery，您可以监听您想要观看的元素的“更改”。

这可能看起来像这样（例如，仅适用于 id "a1"）：

```
$("#a1").change( function() {
  if ( $(this).is(":checked") ) {
    // do something if a1 is checked
  } else if ( $(this).not(":checked") ) {
    // do something if a1 is unchecked
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T16:59:57.443

试试这个

```
$('#a1 ,#a2 , #a3').on('click' , function(){
    var $a1Check  = $('#a1').is(':checked');
    var $a2Check  = $('#a2').is(':checked');
    var $a3Check  = $('#a3').is(':checked');
    var text = '' ;
    if( $a1Check && $a2Check && $a3Check){
        text = 'priceNormal';
    }
    else if($a1Check && $a2Check){
          text = 'priceDown';
    }    
    else if($a1Check)  {
        text = 'priceUp';
    }        

    $('.price').html(text);
}); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/UNhNc/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T16:52:52.840

这样您就可以查看您的复选框是否被选中。

```
$('#a1').click (function ()
{
    var thisCheck = $(this);
    if (thischeck.is (':checked'))
    {
        // Do stuff
    }
}); 
```

# maven - 詹金斯矩阵工作用逗号

> ID：13589072
> 
> 赞同：7
> 
> 时间：2012-11-27T16:50:23.660
> 
> 标签：maven, jenkins

我正在尝试制作一个使用配置矩阵的詹金斯工作，以便使用不同的 Maven 配置文件构建我的应用程序的多个版本。我最初的想法是在配置文件的幌子下创建一堆配置，例如：

XXX,YYY,ZZZ

XXX,YYY,AAA

然后作为构建命令使用： mvn -P $profile

获得所有不同的构建。

可悲的是，这似乎不起作用，詹金斯似乎因在配置矩阵中使用逗号而感到困惑。我尝试查看 url 编码是否有效（它进一步但实际的 maven 命令失败，因为它包含混淆 maven 的逗号的 url 编码版本）。

我意识到我可以输入一个允许的无意义字符，然后在脚本中用逗号替换它，但这似乎不正确。一定有更好的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-25T23:52:02.093

您可以在不使用逗号的情况下指定多个 Maven 配置文件，`-Pprofile1 -Pprofile2`并使用引号来转义空格。

我的配置矩阵如下所示：

[![在此处输入图像描述](../Images/1e4228e4a77152a5c1d4ab9cf6cd860b.png)](https://i.stack.imgur.com/fCZU3.png)

Maven命令是

[![Maven 命令](../Images/608e703311c4342d73cf33662c89f455.png)](https://i.stack.imgur.com/0k7B2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:22:43.757

您是否尝试过空格而不是逗号？

帮助链接说`Values assigned to variables. Multiple values are separated by whitespace or newlines. Use shell quoting syntax for a value that contains whitespace.`

![Jenkins 矩阵配置截图](../Images/367b2830cdce74514b62e4920ad201bd.png)

# java - 如何在 Android 中制作 Java 线程转储？

> ID：13589074
> 
> 赞同：14
> 
> 时间：2012-11-27T16:50:34.963
> 
> 标签：java, android, dump

我只想从 java 虚拟机线程中获取所有转储，以查看线程锁定的内容以及等待解锁某些资源的线程。[这里](http://www.cubrid.org/blog/dev-platform/how-to-analyze-java-thread-dumps/)描述了类似的东西。我试图杀死 Zygote 进程但没有结果。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-27T21:00:17.787

最简单的方法是使用 DDMS，或 Eclipse 中的 ADT 插件。有关基本说明，请参阅 [http://developer.android.com/tools/debugging/ddms.html](http://developer.android.com/tools/debugging/ddms.html)。简而言之，进入设备视图，选择您感兴趣的应用程序，确保启用线程更新，然后切换到线程视图。您将在该进程中获得实时更新的线程列表。双击线程将获取当前堆栈状态的快照。

您可以在线程转储中使用全选和复制来复制和粘贴堆栈跟踪。

如果你有一个开发者/root 设备，你可以要求 Dalvik VM 转储线程堆栈，方法是`SIGQUIT`向你感兴趣的应用程序进程发送一个。例如，如果你想查看日历应用程序中所有线程的堆栈，你可以这样做：

```
% adb shell ps | grep android.calendar
u0_a6     2596  127   912804 48296 ffffffff b6f62c10 S com.google.android.calendar
# 2596 is the process ID
% adb shell run-as com.google.android.colendar kill -3 2596 
```

logcat 输出将显示如下内容：

```
I/dalvikvm( 2596): Wrote stack traces to '/data/anr/traces.txt' 
```

所以，拉那个：

```
% adb pull /data/anr/traces.txt . 
```

每次您发出进程信号时，日志都会附加到该文件中。里面可能还有其他东西，所以你需要搜索`pid 2596`：

```
----- pid 2596 at 2012-11-27 12:48:38 -----
Cmd line: com.google.android.calendar

DALVIK THREADS:
... 
```

这样做相对于 DDMS 线程视图的优势在于，如果线程卡在监视器上，堆栈转储将为您提供有关锁定的对象以及当前持有锁定的线程的指示。

zygote 过程在这里不相关；根据定义，它没有运行应用程序。由于它没有 JDWP 线程，并且不监听 SIGQUIT，因此无论如何您都无法从中获取堆栈跟踪。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-11-24T06:49:35.430

只需在 Android Studio 中调试您手机上的应用即可；然后在“调试视图”中`Alt+5`，只需按下左下角的“相机”按钮，即可获取所有堆栈跟踪的转储，包括它们持有的锁。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-22T09:02:28.287

从[答案](https://stackoverflow.com/questions/13589074/how-to-make-java-thread-dump-in-android/13592951#13592951)中获取命令，并将它们放在一起，这是以下脚本。将其放入 dump.sh 文件并执行，它将找到所需的 PID，创建一个具有当前时间戳的新文件，然后将 Thread-Dump 提取到其中。当一个人有很短的时间来获取转储时，这个命令会很有用。在使用它之前，请确保将跟踪放入文件`/data/anr/traces.txt`中或在脚本中替换此值。

```
#!/bin/sh

pid=`./adb shell ps | grep android.calendar | awk '{print $2}'`
echo $pid
f=$(date +%s%N)
echo $f
./adb shell run-as com.google.android.calendar kill -3 $pid
./adb pull /data/anr/traces.txt $f 
```

作为替代文件名，可以`f=$(date +"%T.%6N")`用来获取人类可读的时间戳。找到所需的文件会更容易。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-07T11:34:34.700

如果您没有 root 设备并且您的应用程序不是调试版本，您仍然可以从开发人员选项生成错误报告以获取线程转储。转储位于 bugreport*.txt 文件的 VM TRACES JUST NOW 部分下。

如果您知道您怀疑的线程的 ID，它会更快。您可以通过调用以下方式获取应用程序的 PID：

```
adb shell ps -A | grep com.example.myapp 
```

和线程ID：

```
adb shell ps -T | grep <pid> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T17:12:44.183

如果您切换到 Eclipse 中的 DDMS 视图，您有一些工具可以查看线程。那是你要找的吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T17:13:36.903

我猜你需要应用程序中的线程。为此，您可以使用 ADT eclipse 插件上的 DDMS 视图。这是文档[http://developer.android.com/tools/debugging/ddms.html#thread](http://developer.android.com/tools/debugging/ddms.html#thread)

# python - C++ Python 模块未使用 g++ 链接到 Python

> ID：13589075
> 
> 赞同：0
> 
> 时间：2012-11-27T16:50:39.393
> 
> 标签：python, linux, gcc, g++, python-2.6

我有一个自定义 C++ Python 模块，我想将它构建到 Python 中，它构建得很好，但在进入链接阶段时会失败。我已经确定问题在于它使用 gcc 链接而不是 g++，这就是导致我在尝试链接 std 库时看到的所有错误的原因。如何让 Python 构建过程与 g++ 而不是 gcc 链接？我必须手动编辑 Makefile 还是在配置它时需要设置它。我正在 CentOS 5.8 上编译 Python 2.6。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:54:44.483

我能够通过手动编辑配置脚本生成的 Makefile 来解决我的问题，以便链接器使用 g++ 而不是 gcc，从而解决了我的问题。感谢您提供可能的建议！

# php - MYSQL 显示错误 :: 每个派生表必须有自己的别名 om PHP MYSQL

> ID：13589076
> 
> 赞同：1
> 
> 时间：2012-11-27T16:50:40.657
> 
> 标签：php, mysql, sql

> **可能重复：**
> [每个派生表都必须有自己的别名](https://stackoverflow.com/questions/1888779/every-derived-table-must-have-its-own-alias)

晕，我正在尝试获取一个表记录，它可以通过组合一个表的两个结果来显示结果。在我的表“updatez”中，我正在存储来自用户的所有更新（朋友表存储用户对朋友的可访问性）和更换器（更换器表存储更换器上的用户可访问性）到此表中......在这里我想通过对创建的时间和订单0,5进行排序来显示所有朋友和更换器更新（如果他们被批准）......

有没有其他更简单的解决方案来做到这一点我正在尝试的代码

```
SELECT *
FROM (
        SELECT M.updt_id AS updt_id,
                M.user_id_fk AS user_id_fk,
                M.updates AS updates,
                M.created AS created,
                M.uploads AS uploads
        FROM updatez M
        WHERE updatez.user_id_fk = friends.friendA
                AND friends.friendB = $USER

        UNION

        SELECT A.updt_id AS updt_id,
                changer_id_fk AS changer_id_fk,
                A.updates AS updates,
                A.created AS created,
                A.uploads AS uploads
        FROM updatez A
        WHERE updatez.changer_id_fk = changer.changer_id
                AND changer.user_id = $USER
        ) 
ORDER BY created DESC 
LIMIT 0, 5 
```

任何形式的帮助将不胜感激.. 提前谢谢蒂姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T16:51:42.397

你只需要添加`ALIAS`子查询

```
SELECT *
FROM (
        SELECT M.updt_id AS updt_id,
                M.user_id_fk AS user_id_fk,
                M.updates AS updates,
                M.created AS created,
                M.uploads AS uploads
        FROM updatez M
        WHERE updatez.user_id_fk = friends.friendA
                AND friends.friendB = $USER

        UNION

        SELECT A.updt_id AS updt_id,
                changer_id_fk AS changer_id_fk,
                A.updates AS updates,
                A.created AS created,
                A.uploads AS uploads
        FROM updatez A
        WHERE updatez.changer_id_fk = changer.changer_id
                AND changer.user_id = $USER
        ) derivedTable                            // -- <<< HERE
ORDER BY created DESC 
LIMIT 0, 5 
```

# android - 是否有隐式 ListFragment 边距/填充？如何删除它？

> ID：13589079
> 
> 赞同：4
> 
> 时间：2012-11-27T16:50:47.157
> 
> 标签：android, android-layout

在我的布局中使用`ListFragment`时，我发现它有不需要的左边距 - 图像上的红色部分（上升到操作栏。

我没有找到关于这个问题的任何文档，但希望有人会知道 - 我怎样才能删除这个空间？

您可以从图像中看到边距不在列表项级别，但在更高级别 - 所以我猜它是片段边距。

值得注意的是，其他片段很好，可以拉伸到全屏宽度。唯一有问题的片段是那些扩展的片段`ListFragment`。

![不需要的边距是红色的](../Images/c2dd43233e62c90380ff82b883f9d91f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-07T06:18:04.567

您最好覆盖布局，因为填充是 ListFragment 默认布局的一部分。

[http://developer.android.com/reference/android/app/ListFragment.html](http://developer.android.com/reference/android/app/ListFragment.html)

所以布局类似于以下内容：-

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:orientation="vertical">

<ListView
    android:id="@id/android:list"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:visibility="gone"
    android:drawSelectorOnTop="false" />

<TextView
    android:id="@id/android:empty"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="No data" />
</LinearLayout> 
```

然后将其填充到 onCreateView()

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    final View view = inflater.inflate(R.layout.fragment_bet_statement_list, container, false);
...
} 
```

有点冗长，但这是最灵活的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T09:15:47.680

我有同样的问题。我正在使用 ActionBarSherlock 并且能够使用[Styles 和 Themes](http://developer.android.com/guide/topics/ui/themes.html)解决这个问题。

首先，我将它添加到我的主题.xml 中：

```
<style name="Theme.Base" parent="@style/Theme.Sherlock.Light.DarkActionBar">
    ...
    <item name="android:listViewStyle">@style/ListViewStyle.MyApp</item>
    ...
</style> 
```

这告诉`SherlockListFragment`将我的自定义样式用于其`ListView`. 然后我将此自定义样式添加到我的 styles.xml 中：

```
<style name="ListViewStyle.MyApp" parent="android:Widget.ListView">
    ...
    <item name="android:paddingLeft">0dp</item>
    ...
</style> 
```

您也可以尝试以下设置之一：

```
 <item name="android:layout_marginLeft">0dp</item>
    <item name="android:padding">0dp</item> <!-- Instead of paddingLeft, if you want 0, everywhere --> 
```

将 ListView 指向我的自定义样式为我解决了这个问题。本质上，在 ListView Widget 上设置样式应该可以解决问题。

# wpf - 当我在 Treeview 项目中使用文本块时，内容绑定不适用于文本块

> ID：13589080
> 
> 赞同：3
> 
> 时间：2012-11-27T16:50:59.667
> 
> 标签：wpf, xaml, mvvm

我有一个树视图，我在树视图项中使用文本块。当我为树视图项使用“数据上下文”时，我无法为文本块绑定文本。任何人都可以帮助我解决此问题。

```
 here is my xaml code..

<TreeViewItem ItemsSource="{Binding}" DataContext="{Binding XYZ}">
     <TreeViewItem.Header>
          <StackPanel>
             <Image Source="abc.png" />
             <TextBlock Text="{Binding BindContent}"></TextBlock>
           </StackPanel>
     </TreeViewItem.Header>
</TreeViewItem>

 in My View Model, I am using  

private string _content;
   public string BindContent
   {
     get{ return _content;}
     set{_content= value;}
   }

In my constructor I am setting value for Content... 
```

当我使用静态内容（或）当我不使用 Treeview 项目的数据上下文时，它工作正常。但由于其他一些原因，我需要使用数据上下文。当我将数据上下文用于树视图项时，如何为文本块绑定内容...

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:33:41.453

我认为问题可能是您没有实现`INotifyPropertyChanged`或者您没有引发通知属性更改事件。默认情况下，文本为 null，然后在`ViewModel`的构造函数中设置它，但如果不是，`INotifyPropertyChanged`则不会通知视图。

希望这可以帮助您解决问题...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T04:37:25.973

你可以做两件事，

确保您的视图模型`INotifyPropertyChanged`按照 Raul Otario 的建议实现，并在属性更改时引发事件，

其次，您可以在绑定中使用相对源，例如，如果您的 xaml 在用户控件上，则 UserControl 其他窗口

```
<TextBlock Text="{Binding Path=DataContext.BindContent, 
                  RelativeSource={RelativeSource FindAncestor, 
                  AncestorType={x:Type UserControl}}}"/> 
```

希望能帮助到你...

# java - 静态类是单例吗？

> ID：13589087
> 
> 赞同：1
> 
> 时间：2012-11-27T16:51:20.030
> 
> 标签：java, static, singleton

> **可能重复：**
> [静态类和单例模式之间的区别？](https://stackoverflow.com/questions/519520/difference-between-static-class-and-singleton-pattern)

我在想，

像 Java 的 Math 类这样所有方法都是静态的类会被认为是单例吗？还是单身人士必须有一个实例，例如`Math.getInstance().abs(...`：)才能成为单身人士？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T16:53:25.070

在一个类中只有静态方法并不限定它是 a `Singleton`，因为如果你有 a ，你仍然可以创建该类的尽可能多的实例`public constructor`。

对于一个有资格的类`Singleton`，它应该有`private constructor`, 以便它不能从类外部实例化，并且有一个`static factory`返回`same instance`每次调用的。

如果您真的是说`static class`，那么首先，您不能将您的`top-level`课程设置为`static`。您只能拥有`static nested class`，在这种情况下，您不需要创建该类的任何实例，但是您可以并且可以创建多个实例，因此它不是`Singleton`。

另外，您提到的类 -`java.lang.Math`不是静态类。你应该看到那个文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T16:58:38.777

Java中的静态类只是*不是*内部类的嵌套类。（例如，它们不像 C# 中的静态类。）它们仍然可以有实例方法、状态等 - 并且可以有多个实例。

`java.lang.Math`不是*静态*类。

And no, a class which never has an instance is not a singleton. The important difference is that a singleton can implement an interface (or even derive from an abstract class) whereas if you never create an instance of a class, any instance methods are pointless.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T16:53:04.363

应用单例模式的类在 JVM 上任何时候都有**一个或没有**实例。这就是为什么它被称为单吨。拥有`static`或`non-static`成员与*单身*或非*单身*没有关系。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T16:54:58.717

静态类通常提供一些辅助方法。事实上，我认为将静态类与单例类进行比较并不合适。两者完全不同。

我们可以创建一个静态类的多个实例，但单例保证（至少在理论上）只有一个实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T16:52:30.920

它必须有一个具有 Singleton 意义的实例才能被初始化一次。

编辑：[这是维基百科文章的链接](http://en.wikipedia.org/wiki/Singleton_pattern)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T16:56:17.623

单例保证环境中最多只有一个该类的实例。它与具有一堆静态方法的类不同。单例携带状态并且可以携带运行时值，而类的静态方法则不携带。

您可以争辩说您可以使用静态值来执行此操作，但是静态变量的目的是不同的（有时像全局变量一样被滥用）。因此，单例在与静态方法不同的上下文中运行。

单例通常还与某些资源（与另一台服务器的某些连接，对某些文件的访问等）相关联，而静态实例对于这些资源来说并不是那么理想。单例还允许延迟加载（如果连接或访问资源很昂贵），而当类加载器遇到对它们的引用时，类会被加载。

# php - 如何使用 PHPseclib 捕获未处理的错误？

> ID：13589093
> 
> 赞同：7
> 
> 时间：2012-11-27T16:51:31.370
> 
> 标签：php, phpseclib

假设我有以下代码。

为了测试这一点，我更改了服务器 IP 以模仿错误消息。下面的 IP 不存在，所以`Unhandled Exception`消息是：`Cannot connect to 10.199.1.7\. Error 113\. No route to host`

这将显示一个带有 PHP 代码的丑陋屏幕。是否有可能捕获此错误？

```
try {
      $ssh = new Net_SSH2('10.199.1.7');        
  if (!$ssh->login('deploy', $key)) {
       throw new Exception("Failed login");
  }
} catch (Exception $e) {
     ???
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T17:08:50.830

翻阅图书馆。

```
user_error('Connection closed by server', E_USER_NOTICE); 
```

它触发错误。[您可以使用http://php.net/manual/en/function.set-error-handler.php](http://php.net/manual/en/function.set-error-handler.php)处理这些错误

例如

```
// Your file.php
$ssh = new Net_SSH2('10.199.1.7');        
$ssh->login('deploy', $key);

// bootstrap.php
// This will catch all user notice errors!!!
set_error_handler ('errorHandler', E_USER_NOTICE)

function errorHandler($errno, $errstr, $errfile, $errline) {
    echo 'Error';
    // Whatever you want to do.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:55:35.900

您可以在函数调用前使用 @ 。[@ 操作员](http://www.php.net/manual/en/language.operators.errorcontrol.php)

# java - Struts2 jQuery 网格插件

> ID：13589099
> 
> 赞同：0
> 
> 时间：2012-11-27T16:51:41.873
> 
> 标签：java, jquery, jsp, struts2, struts

我有一个 userDetails 类的数组列表。userDetails 类有 3 个字段用户 id、用户名和用户城市

我想使用 jQuery 插件在网格中填充数组列表用户。

```
 <sjg:grid gridModel="users"  caption="Users"
            dataType="json"
            href="%{remoteurl}"
            pager="true"
            rowList="10,15,20"
            rowNum="15"
            rownumbers="true"
            onSelectRowTopics="rowselect"

          >
  <sjg:gridColumn name="userId" index="id" title="ID" formatter="integer" sortable="false"/>
  <sjg:gridColumn name="userName" index="name" title="User Name" sortable="true"/>
  <sjg:gridColumn name="userCity" index="name" title="User City" sortable="true"/>
  </sjg:grid> 
```

这就是我所做的。但是用户没有显示在网格中。

关于问题是什么的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:01:39.463

尝试像这样更改 gridModel 和 index 属性：

```
<sjg:grid gridModel="gridModel"  caption="Users"
            dataType="json"
            href="%{remoteurl}"
            pager="true"
            rowList="10,15,20"
            rowNum="15"
            rownumbers="true"
            onSelectRowTopics="rowselect"

          >
     <sjg:gridColumn name="userId" index="userId" title="ID" 
                     formatter="integer" sortable="false"/>
     <sjg:gridColumn name="userName" index="userName" 
                     title="User Name" sortable="true"/>
     <sjg:gridColumn name="userCity" index="userCity" 
                     title="User City" sortable="true"/>
  </sjg:grid> 
```

# moodle - 在 Moodle 2.x 中设置注册

> ID：13589103
> 
> 赞同：0
> 
> 时间：2012-11-27T16:51:52.803
> 
> 标签：moodle

Moodle 1.9x 中的注册插件可以有一种`setup_enrolments(&$user)`方法来设置用户注册。当用户登录时，此方法由 lib 调用。

Moodle 2.x 是否使用类似的方法？

我找不到任何对`setup_enrolments()`方法的调用。它必须有另一个名字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:04:23.680

是的，我相信 enrol_plugin::sync_user_enrolments() 可以做到。从[lib/enrollib.php](https://github.com/moodle/moodle/blob/master/lib/enrollib.php#L1473)：

```
/**
 * Forces synchronisation of user enrolments.
 *
 * This is important especially for external enrol plugins,
 * this function is called for all enabled enrol plugins
 * right after every user login.
 *
 * @param object $user user record
 * @return void
 */
public function sync_user_enrolments($user) {
    // override if necessary
} 
```

# sql - 使用 WITH ROLLUP + HAVING 的意外结果

> ID：13589108
> 
> 赞同：2
> 
> 时间：2012-11-27T16:52:04.833
> 
> 标签：sql, sql-server-2008, tsql

此查询来自“Microsoft SQL Server 2008 - 数据库开发”（如果您有这本书，请参见第 26 页）。而且，由于在本书中找到了查询，因此我正在针对 AdventureWorks2008 数据库运行。问题是由发布的第一个查询引起的，但是下面有第二个查询和解决方法。

问题：当使用 WITH ROLLUP 和 HAVING 子句时，为什么我们缺少 ProductCategoryID = 2 的小计行，以及以下查询中的总计行？

在删除 HAVING 子句时，所有 ProductCategoryID 都有一个小计行，并且一个总计行包含在结果集中。

询问：

```
SELECT
    Production.ProductCategory.ProductCategoryID
    , Production.Product.ProductSubcategoryID
    , AVG(ListPrice) AS 'Average'
    , MIN(ListPrice) AS 'Minimum'
    , MAX(ListPrice) AS 'Maximum'
FROM Production.Product
JOIN Production.ProductSubcategory ON Production.ProductSubcategory.ProductSubcategoryID = Production.Product.ProductSubcategoryID
JOIN Production.ProductCategory ON Production.ProductSubcategory.ProductCategoryID = Production.ProductCategory.ProductCategoryID
WHERE
    ListPrice <> 0
GROUP BY
    Production.ProductCategory.ProductCategoryID
    , Production.Product.ProductSubcategoryID
WITH ROLLUP
HAVING
    MIN(ListPrice) > 200 
```

结果：

```
ProductCategoryId   ProductSubcategoryId    Average     Minimum Maximum
1                   1                       1683.365    539.99  3399.99
1                   2                       1597.45     539.99  3578.27
1                   3                       1425.2481   742.35  2384.07
1                   NULL                    1586.737    539.99  3578.27
2                   12                      678.2535    249.79  1364.50
2                   14                      780.0436    337.22  1431.50
2                   16                      631.4155    333.42  1003.91 
```

* * *

以我期望在原始查询中看到的结果结束的查询（通过用子查询替换我们的 HAVING 子句来解决问题）：

```
SELECT
    Production.ProductCategory.ProductCategoryID
    , Production.Product.ProductSubcategoryID
    , AVG(ListPrice) AS 'Average'
    , MIN(ListPrice) AS 'Minimum'
    , MAX(ListPrice) AS 'Maximum'
FROM Production.Product
JOIN Production.ProductSubcategory ON Production.ProductSubcategory.ProductSubcategoryID = Production.Product.ProductSubcategoryID
JOIN Production.ProductCategory ON Production.ProductSubcategory.ProductCategoryID = Production.ProductCategory.ProductCategoryID
WHERE
    ListPrice <> 0
    AND Production.Product.ProductSubcategoryID IN 
    (
        SELECT
            Production.Product.ProductSubcategoryID
        FROM Production.Product
        GROUP BY
            Production.Product.ProductSubcategoryID
        HAVING
            MIN(ListPrice) > 200
    )
GROUP BY
    Production.ProductCategory.ProductCategoryID
    , Production.Product.ProductSubcategoryID
WITH ROLLUP 
```

结果：

```
ProductCategoryId   ProductSubcategoryId    Average     Minimum Maximum
1                   1                       1683.365    539.99  3399.99
1                   2                       1597.45     539.99  3578.27
1                   3                       1425.2481   742.35  2384.07
1                   NULL                    1586.737    539.99  3578.27
2                   12                      678.2535    249.79  1364.50
2                   14                      780.0436    337.22  1431.50
2                   16                      631.4155    333.42  1003.91
2                   NULL                    710.1015    249.79  1431.50
NULL                NULL                    1193.2472   249.79  3578.27 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-17T21:43:53.127

我同意“这些行丢失，因为 HAVING 子句是在 ROLLUP 子句之后应用的”。取回行的一种方法是将 HAVING 子句从以下位置更改：

```
HAVING
     MIN(ListPrice) > 200 
```

至：

```
HAVING
     (MIN(ListPrice) > 200)
  or (Grouping (Production.ProductCategory.ProductCategoryID) = 1)
  or (Grouping (Production.Product.ProductSubcategoryID) =  1) 
```

此外，应该有一个订单条款。就像是：

```
Order by Case
            When (Grouping (Production.ProductCategory.ProductCategoryID) = 1) Then 1
            Else 0
            End,
         Production.ProductCategory.ProductCategoryID,
         Case
            When (Grouping (Production.Product.ProductSubcategoryID) =  1) Then 1
            Else 0
            End,
         Production.Product.ProductSubcategoryID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T09:44:43.217

缺少这些行是因为在 ROLLUP 子句之后应用了 HAVING 子句，并且这些行的 MIN(ListPrice) 小于 200（~~ProductSubcategoryId~~ ProductCategoryId 2 的总和为 20.24，总计为 2.29）。

要获得与第二个查询相同的结果，您还可以使用：

```
SELECT
    c.ProductCategoryID
    , s.ProductSubcategoryID
    , AVG(ListPrice) AS 'Average'
    , MIN(ListPrice) AS 'Minimum'
    , MAX(ListPrice) AS 'Maximum'
FROM (
    SELECT *, MIN(ListPrice) OVER (PARTITION BY ProductSubcategoryID) AS MinimumListPriceForSubcategory
    FROM Production.Product
) p
JOIN Production.ProductSubcategory s ON s.ProductSubcategoryID = p.ProductSubcategoryID
JOIN Production.ProductCategory c ON s.ProductCategoryID = c.ProductCategoryID
WHERE ListPrice <> 0
AND MinimumListPriceForSubcategory>200
GROUP BY c.ProductCategoryID, s.ProductSubcategoryID
WITH ROLLUP 
```

# listview - 使用什么组件在 wxwidgets 上创建类似列表的 Twitter 时间线？

> ID：13589114
> 
> 赞同：0
> 
> 时间：2012-11-27T16:52:23.607
> 
> 标签：listview, wxwidgets

我是 wxWidgets 的新手，很抱歉，如果术语不正确或者我在问一些明显的问题，请以正确的方式指出我。

我正在为我创建的 Web 服务创建一个客户端应用程序，我想在某些列表类型的 UI 上显示信息，只是我希望它是一个包含多条信息、图像、日期、在某些地方有几个文本。

那么，有没有

1.  一些可以做到这一点的扩展库
2.  自定义 wxListCtrl 或其他一些现有库并从中继承

我没有使用任何表单构建器工具，只是直接在代码中编码坐标和大小。

**编辑：**

这是我现在所做的，

在构造函数上，

```
m_timeline = new wxListCtrl( this, wxID_ANY, wxPoint( -1, 30), wxSize( 950, 600 ), wxLC_REPORT );

m_timeline->InsertColumn(0, _("icon"));
m_timeline->InsertColumn(1, _("post_owner"));
m_timeline->InsertColumn(2, _("body), wxLIST_FORMAT_LEFT, 700); 
```

然后在需要的时候，

```
wxListItem tweet;
note.SetId(i);

m_noteTimeline->InsertItem( i, tweet );
m_noteTimeline->SetItem( i, 0, xxxxx);
m_noteTimeline->SetItem( i, 1, xxxxx );
m_noteTimeline->SetItem( i, 2, xxxx ); 
```

我并不是说这行不通，但这并不完全符合我的想法，主要是因为，

1.  我宁愿有一个包含所有信息的列

2.  这个实现不允许每一行都有按钮（如果它是一个 twitter 客户端，它需要有一个回复按钮，删除等）

3.  要放在正文中的文本可以是多行的，它似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:30:03.193

如果您需要列表项中的每条数据以特殊字体/样式显示，您也可以尝试使用[wxHtmlListBox （可能在虚拟模式下）。](http://docs.wxwidgets.org/trunk/classwx_html_list_box.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:06:50.053

一目了然，wxListCtrl 无需任何定制就可以满足您的需求。你试过了吗？你遇到了什么问题？

如果您想要在您的列中收集不同的小部件，例如按钮，那么我建议最简单的方法是使用单列 wxFlexGridSizer。

# expressionengine - 在相关条目中使用外部通道字段

> ID：13589115
> 
> 赞同：0
> 
> 时间：2012-11-27T16:52:24.707
> 
> 标签：expressionengine

是否有可能（或最好的方法是什么）使用来自相关条目标签外部的频道字段名称？像这样：

```
{exp:channel:entries channel="test"}
    {channel_field_name} <!-- Works here! -->
    {related_entries id="test2"}
        {channel_field_name} <!-- This won't work! -->
    {/related_entries}
{/exp:channel:entries} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:46:43.590

看起来这个主题早先在 ExpressionEngine Stack Exchange 上介绍过：

[https://expressionengine.stackexchange.com/questions/496/is-it-possible-to-access-channel-variables-inside-of-a-reverse-related-entries-t#answer-512](https://expressionengine.stackexchange.com/questions/496/is-it-possible-to-access-channel-variables-inside-of-a-reverse-related-entries-t#answer-512)

# gdb - ra 和 pc 等于 0000000 的 MIPS 核心转储

> ID：13589121
> 
> 赞同：1
> 
> 时间：2012-11-27T16:52:35.027
> 
> 标签：gdb, mips, coredump

我在我们的一个流程中遇到了间歇性的核心转储。所有线程的堆栈，除了崩溃的堆栈，看起来都不错，并且解析正确。

崩溃的线程有一个明显损坏的调用堆栈。堆栈有两个帧，它们都是 0x00000000。查看寄存器，PC和RA都是0（这解释了调用堆栈......）原因寄存器是00800008。

1.  有没有办法获得有关崩溃线程的更多信息？
2.  寄存器本身是如何损坏的？（或者相反，在核心转储中，调试器根据堆栈填充这些寄存器？）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T00:51:37.317

首先回答（2）——因为了解实际发生的事情对于找出有关崩溃根本原因的更多信息很重要：

真正是寄存器本身，在运行时的机器中，是 0；但这并不是寄存器本身损坏了；相反，内存损坏了，然后损坏的内存被复制回寄存器，最终导致崩溃。

正在发生的事情是这样的：堆栈被损坏，包括（a）特别是 RA，*当它存储在堆栈内存中*时，被清零。然后，当函数准备好返回时，它 (b) 从堆栈中恢复 RA 寄存器——因此 RA*寄存器*现在为 0——然后 (c) 跳转返回到 RA，从而将 PC 设置为指向0；下一条指令将导致崩溃，而 RA 和 PC 都为 0。

例如，在[http://logos.cs.uic.edu/366/notes/mips%20quick%20tutorial.htm](http://logos.cs.uic.edu/366/notes/mips%20quick%20tutorial.htm)（强调我的）中解释了关于 RA 存储在堆栈上然后从中恢复的业务：

> 返回地址存储在寄存器 $ra 中；如果子程序将调用其他子程序，或者是递归的，**返回地址应该从 $ra 复制到堆栈上以保存它**，因为 jal 总是将返回地址放在这个寄存器中，因此会覆盖以前的值。

这是一个示例程序，它在 PC 和 RA 都为 0 时崩溃，它很好地说明了上述序列（可能需要调整确切的数字，具体取决于系统）：

```
#include <string.h>

int bar(void)
{
    char buf[10] = "ABCDEFGHI";
    memset(buf, 0, 50);
    return 0;
}

int foo(void)
{
    return bar();
}

int main(int argc, char *argv[])
{
    return foo();
} 
```

如果我们看一下 foo() 的反汇编：

```
(gdb) disas foo
Dump of assembler code for function foo:
   0x00400408 <+0>:     addiu   sp,sp,-32
   0x0040040c <+4>:     sw      ra,28(sp)
   0x00400410 <+8>:     sw      s8,24(sp)
   0x00400414 <+12>:    move    s8,sp
   0x00400418 <+16>:    jal     0x4003a0 <bar>
   0x0040041c <+20>:    nop
   0x00400420 <+24>:    move    sp,s8
   0x00400424 <+28>:    lw      ra,28(sp)
   0x00400428 <+32>:    lw      s8,24(sp)
   0x0040042c <+36>:    addiu   sp,sp,32
   0x00400430 <+40>:    jr      ra
   0x00400434 <+44>:    nop
End of assembler dump. 
```

我们很好地看到 RA 在函数开始时存储在堆栈中（`<+4> sw ra,28(sp)`），然后在结束时恢复（`<+28> lw ra,28(sp)`），然后跳转返回到（`<+40> jr ra`）。我展示了 foo() 因为它更短，但是 bar() 的结构完全相同——除了在 bar() 中间还有 memset() ，它在堆栈上覆盖 RA（它是将 50 个字节写入大小为 10 的数组中）；然后恢复到寄存器中的是0，最终导致崩溃。

所以，现在我们知道崩溃的根本原因是某种堆栈损坏，这让我们回到问题（1）：有没有办法获得有关崩溃线程的更多信息？

好吧，这有点困难，并且调试变得更像一门艺术而不是一门科学，但以下是要牢记的原则：

*   基本思想是找出导致堆栈损坏的原因——很可能是对某个本地缓冲区的写入，如上例所示。
*   尽量将腐败发生在流程中的位置归零。日志在这里可以提供很大帮助：您看到的最后一个日志显然发生在崩溃之前（尽管不一定在损坏之前！） - 在可疑区域添加更多日志以在崩溃位置归零。当然，如果您可以访问调试器，您也可以单步执行代码以找出崩溃的位置。
*   一旦找到崩溃位置，从那里向后工作就容易多了：首先，在崩溃之前，PC 尚未设置为 0，因此您应该能够看到回溯（不过，请注意回溯本身是使用存储*在堆栈*中的值“计算”的——一旦它们被损坏，就无法计算超出损坏的回溯。但这在这种情况下实际上很有帮助：这可以非常准确地告诉您*损坏*在内存中的位置是：回溯被截断的点是被损坏的 RA（在堆栈上）。）
*   一旦你发现了什么被破坏了，但你仍然不知道是什么导致了破坏，使用观察点：一旦你进入将最终被覆盖的 RA 放置在堆栈上的函数，就在它上面设置一个观察点。一旦发生腐败，这应该会导致中断......

希望这可以帮助！

# android - 从 AsyncTask 访问操作栏

> ID：13589126
> 
> 赞同：0
> 
> 时间：2012-11-27T16:52:43.990
> 
> 标签：android, android-asynctask

我想从扩展 AsyncTask 的类中禁用我的 ActionBar 中的按钮。我目前使用构造函数将操作栏菜单传递给我的任务，但我得到一个空引用异常：

**主要活动：**

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.mainmenu, menu);
    actionbarMenu = menu;

    return true;
} 
```

* * *

**异步任务类：**

```
protected void onPreExecute(){

    actionbarMenu.findItem(R.id.refresh).setEnabled(false);

} 
```

我应该如何知道何时通过 AsyncTask 设置菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:06:09.800

您没有显示的是 AsyncTask 子类或构造函数的定义，或者您创建 AsyncTask 的位置。onCreateOptionsMenu 仅在调用选项菜单时调用，当显示选项菜单时。如果还没有，那么 actionbarMenu 将为空。

# android - 在 Project 中添加 Aursama 内核后，AAPT.exe 崩溃

> ID：13589134
> 
> 赞同：0
> 
> 时间：2012-11-27T16:53:01.480
> 
> 标签：android, eclipse, aapt, aurasma

我正在尝试将 Aurasma 内核与我的 android 应用程序集成。我按照[http://www.aurasma.com/partners/support/Aurasma%20Kernel%20Guidelines.pdf](http://www.aurasma.com/partners/support/Aurasma%20Kernel%20Guidelines.pdf)中的说明进行操作。构建失败，aapt.exe 在预编译阶段崩溃。

清单文件的设置为 - minSDKversion: 8 targetSDKversion: 14

以下是我的应用程序中的库：

android-support-v4.jar facebookSDK.jar FlurryAgent.jar httpclient-4.1.2.jar httpcore-4.1.2.jar httpmime-4.1.2.jar apache-mime4j-core-0.7.jar myttjson-1.7.1.jar scribe-1.1.0.jar trace.jar

我在 aurasma 内核构建路径中找到了 httpmime-4.11.jar 和 apache-mime4j-0.6.1.jar。因此，我收到一个错误，即有多个 dex 文件。我从应用程序的构建路径中删除了这些 jar。解决了多个 dex 文件的问题，但 Aapt 崩溃仍然存在。

假设问题可能仅限于 Windows 版本的 Aapt，我在 Mac 上进行了尝试。经过几乎相同的时间和步骤，Aapt 以错误代码 139 终止。

我已将 Windows > Preference > Andriod > Build > Output 更改为 Normal 和 Verbose，但 Aapt 崩溃仍然存在。

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T13:14:49.153

我已经解决了这个问题，在我的项目 style.xml 中，一些样式定义有 android:id ，这会导致 aapt 崩溃，在我删除它之后它工作正常。

# ruby - `Thread.current.object_id` 可以在线程本身内部更改吗？

> ID：13589140
> 
> 赞同：2
> 
> 时间：2012-11-27T16:53:29.127
> 
> 标签：ruby, multithreading, thread-safety

我想知道是否`Thread.current.object_id`可以*在同一个线程内*更改；那是：

```
Thread.current.object_id #=> 11429860
# some ruby code
Thread.current.object_id #=> 11749360 different from the previous result 
```

我想它不会改变，但也许`Thread.current`可以通过一些内部 Ruby 调用重新初始化......

我的意思是，如果我今天运行一个 ruby​​ 循环/守护程序/长期脚本（例如 Rails 应用程序），我应该期望`Thread.current.object_id`从现在起 6 个月后会是一样的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:59:04.167

Thread.current 可以改变导致它返回当前正在执行的线程，线程对象 id 不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:14:51.800

```
puts Thread.current
#=> #<Thread:0x00000001d87fd8>
Thread.new{puts Thread.current}.join
#=> #<Thread:0x00000001f97120> 
```

对于您更新的问题。是的，只要没有重新启动，线程就会保持不变。计算机不会像您那样感觉到几秒钟和六个月之间的差异。

# knockout.js - 淘汰赛：从 getJSON 更新 javascript 中数组的数组

> ID：13589151
> 
> 赞同：0
> 
> 时间：2012-11-27T16:54:21.353
> 
> 标签：knockout.js, getjson

这是我的代码：

```
var Feed = function (searchTerm, feeditems)
    {
        this.ID = 1;
        this.SearchTerm = searchTerm;
        this.FeedItems = ko.observableArray(feeditems);
    };

    var FeedItem = function(userName, message)
    {
        this.UserName = userName;
        this.Message = message;
    };

    var viewModel = {
        Feeds: ko.observableArray()
    };

    ko.applyBindings(viewModel);

    function getFeedData()
    {
        var url = "/Feed/GetFeedData";
        $.getJSON(url, function (data)
        {
            $.each(data, function ()
            {
                viewModel.Feeds[0].FeedItems.unshift(new FeedItem(this.UserName, this.Message));
            });
        });

        window.setInterval("getFeedData()", TIMEDELAY);
    } 
```

我不知道如何更新 Feed 的第一个 Array 元素的 FeedItems。基本上：viewModel.Feeds[0].FeedItems.unshift 不起作用... :(

当我只是检查 viewModel.Feeds 时，它给了我所有的方法，但是对于 viewModel.Feeds[0] 它说它是未定义的。

那么，如何更新可观察数组的第一个元素的可观察数组呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:57:23.923

首先 viewModel.Feeds 是一个空数组。所以 Feeds[0] 将是未定义的。确保初始化它。如果不能，则考虑创建一个新对象并推入数组，如果数组长度为 0。

# c++ - Doxygen 包含图

> ID：13589152
> 
> 赞同：2
> 
> 时间：2012-11-27T16:54:23.303
> 
> 标签：c++, c, header, include, doxygen

我知道有一个 doxygen 选项，用于显示包含图，例如
`a.cpp`包含`a.h`和`b.h`
`a.h`包含`c.h`
`c.h`包含`<unistd.h>`

但`unistd.h`也包括`<features.h>`例如！
如何将“系统”标头中的包含，如`unistd.h`or `windows.h`，添加到 doxygen 的包含依赖关系图中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T21:23:39.403

`INPUT`尽管您可以按照 pmr 的建议将系统标头路径添加到变量中，但我会提出一个*不*将它们添加到包含图中的案例。

如果您想这样做以便您可以说“啊，`unistd.h`已经包含`features.h`，所以我不需要自己包含它”，那么我建议您不要这样做。这是一个实现细节：你不应该关心它，因为它可能会在未来的版本中改变。如果您需要某些内容（例如）`features.h`，那么您应该始终包含它，因为您不能依赖它已经被不同的标题包含。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:23:45.433

这很难，因为这可能会记录包含在您自己文档中的这些标头中的代码。

通常 doxygen 会在`INPUT`. 您可以将您的系统包含目录添加到`INPUT`并希望最好。

一般来说，我更喜欢包含文档以在库边界处结束。

# javascript - 为什么不显示此 HTML5 画布？

> ID：13589156
> 
> 赞同：0
> 
> 时间：2012-11-27T16:54:39.140
> 
> 标签：javascript, html, canvas

```
<!doctype html>
<html>
<head>
<title>Canvas test</title>
</head>
<body>
<script type="text/javascript">
c = getElementById('canvas');
ctx = c.getContext("2d")'
ctx.fillRect(10,10,10,10);
</script>
<canvas id="canvas" height ="100" width = "100"></canvas>
</body>
</html> 
```

我在 Chrome 和 IE 9 上试过这个，但它们都没有显示任何东西。你知道为什么这不起作用吗？

这可能是一些愚蠢的事情，我的朋友要求我发布这个，因为他懒得注册，但我自己无法弄清楚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T16:56:13.997

您需要将代码放入`onload`函数中。

例如：

```
window.onload = function() {
    c = document.getElementById('canvas');
    ctx = c.getContext("2d");
    ctx.fillRect(10,10,10,10);
}; 
```

这样做的原因是因为您的 javascrpt 代码将在渲染**之前**`<canvas>`运行，并且您希望它在**afterwords**运行。

演示：http: [//jsfiddle.net/maniator/nCf7Y/](http://jsfiddle.net/maniator/nCf7Y/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T16:56:38.247

这里的语法错误：

```
ctx = c.getContext("2d")' 
```

改成：

```
ctx = c.getContext("2d"); 
```

此外，您需要使用文档对象：

```
c = document.getElementById('canvas'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T16:57:37.347

您缺少“文档”。

`var c = document.getElementById('canvas');`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T16:56:21.360

脚本运行时画布不存在。移动`<canvas>`标签，使其位于标签*之前*`<script>`。

# java - 单例类中的邮件会话

> ID：13589162
> 
> 赞同：2
> 
> 时间：2012-11-27T16:55:04.167
> 
> 标签：java, singleton, jakarta-mail

将邮件会话 (javax.mail.Session) 存储在单例中是一种好习惯吗？我和我的团队决定在 Singleton 类的静态变量中保留一个邮件会话。

因此，在私有构造函数中，我们这样做：

```
try {
        Properties props = new Properties();

        props.put("mail.transport.protocol", config.getMailTransportProtocol());
        props.put("mail.smtp.starttls.enable", config.getMailStarttlsEnable());
        props.put("mail.smtp.host", config.getMailHost());
        props.put("mail.smtp.auth", config.getMailAuth());
        props.put("mail.smtp.user", config.getMailFrom());
        props.put("mail.debug", config.getMailDebug());
        props.put("mail.smtp.port", config.getMailPort());
        props.put("mail.smtp.socketFactory.port", config.getMailPort());
        props.put("mail.smtp.socketFactory.class", config.getMailSocketFactoryClass());
        props.put("mail.smtp.socketFactory.fallback", config.getMailSocketFactoryFallback());

        props.put("mail.pop3.host", config.getMailPop3Host());
        props.put("mail.store.protocol", config.getMailStoreProtocol());

        SimpleAuth auth = new SimpleAuth(config.getMailUser(), config.getMailPass());

        MailSession.session = Session.getDefaultInstance(props, auth);
        session.setDebug(config.getMailDebug());
    } catch (Throwable ex) {
        System.err.println("Initial MailSession creation failed." + ex);
        throw new ExceptionInInitializerError(ex);
    } 
```

但我担心最好是保持这种状态，还是为每封电子邮件打开和关闭一个会话。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T20:43:07.080

首先，您需要阅读有关[常见错误](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)的 JavaMail FAQ 条目。

如果您阅读[Session.getDefaultInstance 方法的 javadocs](http://javamail.kenai.com/nonav/javadocs/javax/mail/Session.html#getDefaultInstance%28java.util.Properties,%20javax.mail.Authenticator%29)，您会看到 JavaMail 已经为您维护了一个单例 Session。如果您从不更改 Session 的配置，这可能对您有用，尽管我通常不建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:10:12.343

我宁愿不采用这种解决方案，因为在线程之间共享可变对象可能很麻烦。考虑实现一个邮件会话工厂，您可以从中获取已配置好的会话。这并不意味着对每封邮件都使用一个新会话：如果您要发送一批邮件，可以重复使用同一个会话发送一批邮件。

# c++ - 声明向量时出现神秘的malloc内存分配错误

> ID：13589165
> 
> 赞同：1
> 
> 时间：2012-11-27T16:55:10.810
> 
> 标签：c++, vector, malloc

我完全被这个错误迷惑了，我希望你能帮助我！我有一个具有结构向量的类（该结构称为粒子）。我只是在编写一个 getter，它返回结构中某个字段的向量；一次用于名为 x 的字段，然后再次用于名为 v 的字段：

```
vector<double> x = s.getx();
vector<double> v = s.getv(); 
```

出于某种原因，getx 有效，但 getv 无效：它给了我“malloc()：内存损坏：”。

下面是 getx 和 getv 类：

```
vector<double> getx() {

    vector<double> ret(number-2);

    for(int i = 1; i < number; i++) {

        ret[i-1] = masses[i].x;

    }

    return ret;

}

vector<double> getv() {

    vector<double> ret(number-2);

    for(int i = 1; i < number; i++) {

        ret[i-1] = masses[i].v;

    }

    return ret;

} 
```

错误发生在这一行：

```
vector<double> ret(number-2); 
```

在格特夫。

我很困惑的原因是这两种方法本质上是相同的！当我用常数（例如 4）替换 (number-2) 时，我什至得到同样的错误。它根本无法分配内存！

我希望你能看到我做错了什么......

非常感谢您的帮助，祝您好运，夜光

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T16:59:51.233

内存损坏错误很少出现在它们发生的地方；它们稍后会出现，当某些东西击中损坏的内存时。在这种情况下，两个函数都在写入不属于它们的内存。每个都`vector`用`number - 2`元素初始化 a ，然后写入`vector[number - 1]`不存在的 。

# derby - 从现有文件创建 derby 数据库

> ID：13589167
> 
> 赞同：1
> 
> 时间：2012-11-27T16:55:15.063
> 
> 标签：derby

我的问题很简单。我显然有一个包含 derby 数据库的文件夹： - 3 个文件夹（log - seg0 - tmp） - db.lck - service.properties

在 seg0 : dat 文件列表

我该如何使用它？如何将它集成到 Netbeans 中？我的应用程序如何使用数据库？

我想它必须放在服务器上？什么服务器？

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:37:27.953

db.lck 文件的存在表明数据库在上次使用时没有正确关闭，这意味着数据库损坏的可能性非零。

仍然......尝试访问它没有错。

只需安装 Derby 的副本，调出 IJ 工具，然后键入

```
connect 'jdbc:derby:/full/path/to/the/database/folder'; 
```

您可以从[http://db.apache.org/derby](http://db.apache.org/derby)获取 Derby 。

如果您不知道如何运行“ij”，请查看 Derby 文档中的 Derby 教程，并完成它；然后返回尝试打开您的数据库。

# css - 在浏览器中使用 OpenType 字体

> ID：13589179
> 
> 赞同：4
> 
> 时间：2012-11-27T16:56:17.933
> 
> 标签：css, fonts, cross-browser, opentype

我想使用的特定字体种类（带有连字）只能作为 OpenType 使用。

我正在尝试找出哪些浏览器能够正确显示它，以及我应该如何将它添加到 CSS 中。

我从 2012 年 7 月发现这篇文章，其中包括 Paul Irish 的贡献，这表明它可能是权威的：

[http://www.typotheque.com/articles/opentype_features_in_web_browsers](http://www.typotheque.com/articles/opentype_features_in_web_browsers)

但我不明白 OpenType 字体和 OpenType 功能之间的区别：

```
But while all modern browsers can display OpenType *fonts*, only Firefox 
(since version 4) [1], Internet Explorer 10 (preview version)[2] and 
the latest versions of Google Chrome[12] are currently able to display 
OpenType *features*. 
```

所以：

1.  我可以在现代浏览器中使用这种 OpenType 字体吗？OpenType 字体和功能有什么区别？我希望能够显示 ASCII 字符和连字。
2.  我应该如何在 CSS 中实际包含这个 OpenType 字体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T18:28:05.550

在浏览器中使用字体（一种可以合法用作可下载字体的字体）的实用方法是使用 FontSquirrel [@font-face Generator](http://www.fontsquirrel.com/fontface/generator)之类的服务来创建所需的不同字体格式并使用它生成的 CSS 代码, 酌情决定（如果您使用斜体、粗体或任何其他非常规字体，则可能需要进行调整）。

假设字体最初包含连字定义并且转换器保留了信息（您需要在转换后运行一些测试），“标准”连字将默认在现代版本的 Firefox 中使用。要让 Chrome 和 Safari 使用它们，请添加 CSS 声明

```
text-rendering: optimizeLegibility 
```

（适用于应使用连字呈现的任何元素），并且还涵盖 IE 10，还添加

```
-ms-font-feature-settings: "liga"; 
```

为了安全起见，还添加了建议的标准设置：

```
font-feature-settings: "liga"; 
```

我认为这为您提供了您现在或不久的将来可以获得的一切。

如果字体包含上下文 ( `clig`)、任意 ( `dlig`) 或历史 ( `hlig`) 连字的定义，您可以在某些浏览器上启用它们。例如，除了标准连字之外，以下内容还启用了自由连字：

```
-ms-font-feature-settings: "liga", "dlig";
-webkit-font-feature-settings: "liga", "dlig";
-moz-font-feature-settings: "liga", "dlig";
font-feature-settings: "liga", "dlig"; 
```

您可以使用[Google 网络字体](http://www.google.com/webfonts)Source Sans Pro 进行测试，它具有标准的“ff”和“ft”连字（至少在足够大的字体大小下可以与非连字渲染区分开来）。

关于理论，OpenType 是一种规范和字体格式，它允许将印刷信息嵌入字体文件等。浏览器可能支持该格式而不支持使用嵌入信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:11:14.903

我认为 OpenType 功能可以在 OpenType 字体中的字符之间使用连字。这就是浏览器能够互连字母并拥有大量标签的方式。

您可以在本文中查看更多详细信息：http: [//ilovetypography.com/OpenType/opentype-features.html](http://ilovetypography.com/OpenType/opentype-features.html)。

您也可以查看维基百科文章中的标签规范。Paul Irish 和其他人说并不是每个浏览器都支持这些功能，但几乎每个现代浏览器都倾向于支持 css3 属性，其中之一就是通过`@font-face`规则包含字体类型。=> [http://www.w3schools.com/css3/css3_fonts.asp](http://www.w3schools.com/css3/css3_fonts.asp)

如果您需要对字体进行一些转换，您可以查看 fontsquirrel 服务：www.fontsquirrel.com

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:16:59.947

1.  将您的 otf 上传到 font-squirrel - [http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)
2.  使用 fontspring 提供的语法 - [http://www.fontspring.com/blog/further-hardening-of-the-bulletproof-syntax](http://www.fontspring.com/blog/further-hardening-of-the-bulletproof-syntax)

# iphone - 从 tableview 获取数据并存储到 sqlite 数据库

> ID：13589182
> 
> 赞同：0
> 
> 时间：2012-11-27T16:56:23.003
> 
> 标签：iphone, ios, uitableview, nsarray

我有一个带有表格视图和自定义单元格的表单，其中包含许多文本字段、标签和文本视图。如果用户填写所有字段并且他想保存表单，那么我如何才能在我的按钮单击方法上获取所有字段值？

如果有人可以通过向我展示如何做到这一点来帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:33:48.357

// 从行和节中获取单元格的路径

```
-(void)btnClick
{
    NSIndexPath *path = [NSIndexPath indexPathForRow:0 inSection:0];
    customTxtField *cellCustomTxtField  = (customTxtField *)[mytableview cellForRowAtIndexPath:path];
    NSString *str =  cellCustomTxtField.text1.text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T23:23:07.763

不要等到按钮单击事件来检索单元格内容。因为单元格被重复使用（例如，在滚动期间），每个单元格中的值将不会被保留。

随着单元格值的变化，通过使 tableViewController 成为相应输入字段的委托来更新驱动表格的模型。

例如，使 tableViewController 成为 textField 委托并在用户输入数据时更新模型。要区分tableViewController 中的textField，请在创建单元格时为每个textField 分配一个标签（即tableView:cellForRowAtIndexPath）。

# java - 向下转换是否会抵消 short 的性能/内存优势？

> ID：13589183
> 
> 赞同：6
> 
> 时间：2012-11-27T16:56:28.387
> 
> 标签：java, performance, primitive, downcast

我正在编写一个大型应用程序，我试图在其中尽可能多地节省内存并提高性能。因此，当我知道一个字段的值只会从 0 到 10 或从 -100 到 100 时，我会尝试使用`short`数据类型而不是`int`.

然而，这对于其余代码意味着什么，当我调用这些函数时，我必须将简单`int`的 s 向下转换为`short`s。例如：

*方法签名*

```
public void coordinates(short x, short y) ... 
```

*方法调用*

```
obj.coordinates((short) 1, (short) 2); 
```

在我的代码中都是这样，因为文字被视为`int`s 并且不会根据函数参数自动向下转换或键入。

因此，一旦发生这种向下转换，任何性能或内存增益实际上是否显着？还是转换过程如此高效以至于我仍然可以获得一些收益？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T17:25:01.487

在 32 位平台上使用 short 与 int 并没有性能优势，除了 short[] 与 int[] 的情况外 - 即便如此，缺点通常超过优点。

假设您在 x64、x86 或 ARM-32 上运行：

*   使用时，16 位 SHORT 存储在 32 位或 64 位长的整数寄存器中，与整数相同。即，当使用short 时，与int 相比，您不会获得内存或性能优势。
*   在堆栈上时，16 位 SHORT 存储在 32 位或 64 位“槽”中，以保持堆栈对齐（就像整数一样）。将 SHORT 与 INT 用于局部变量没有任何性能或内存优势。
*   当作为参数传递时，SHORT 在被压入堆栈时会自动扩展为 32 位或 64 位（与刚刚压入的 int 不同）。与使用 int 相比，此处的代码实际上性能略低，（代码）内存占用略大。
*   在存储全局（静态）变量时，这些变量会自动扩展为占用 32 位或 64 位插槽，以保证指针（引用）对齐。这意味着将 SHORT 与 INT 用于全局（静态）变量相比，您不会获得性能或内存优势。
*   存储字段时，它们存在于堆内存中的结构中，该结构映射到类的布局。在此类中，字段会自动填充为 32 位或 64 位，以保持堆上字段的对齐。将 SHORT 用于字段与 INT 相比，您不会获得性能或内存优势。

使用 SHORT 与 INT 相比，您将看到的*唯一*好处是在您分配它们的数组的情况下。在这种情况下，*N*个short 数组的长度大约是*N*个int 数组的一半。

除了在大量短裤中进行复杂但局部数学运算的情况下，在热循环中将变量放在一起带来的性能优势之外，您永远不会看到使用 SHORTS 与 INT 相比的优势。

在*所有*其他情况下——例如用于字段、全局变量、参数和局部变量的 short，除了它可以存储的位数之外， SHORT 和 INT 之间*没有*区别。

我的建议一如既往地建议，在使您的代码更难阅读和人为限制之前，请尝试对代码进行*基准*测试以查看内存和 CPU 瓶颈在哪里，然后解决这些问题。

我强烈怀疑，如果您遇到过您的应用程序使用整数而不是短裤的情况，那么您早就放弃 Java 以获得更少的内存/CPU 运行时，所以提前完成所有这些工作是白费力气。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-27T17:09:43.180

据我所知，强制转换本身应该没有运行时成本（是否使用`short`而不是`int`实际提高性能是有争议的，并且取决于您的应用程序的具体情况）。

考虑以下：

```
public class Main {
    public static void f(short x, short y) {
    }

    public static void main(String args[]) {
        final short x = 1;
        final short y = 2;
        f(x, y);
        f((short)1, (short)2);
    }
} 
```

最后两行`main()`编译为：

```
 // f(x, y)
   4: iconst_1      
   5: iconst_2      
   6: invokestatic  #21                 // Method f:(SS)V

  // f((short)1, (short)2);
   9: iconst_1      
  10: iconst_2      
  11: invokestatic  #21                 // Method f:(SS)V 
```

如您所见，它们是相同的。强制转换发生在编译时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T17:09:23.293

`int`从文字到的类型转换`short`发生在编译时，对运行时性能没有影响。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T17:54:20.350

您需要一种方法来检查类型选择对内存使用的影响。如果在给定情况下 short 与 int 将通过减少内存占用来获得性能，那么对内存的影响应该是可测量的。

这是一种测量正在使用的内存量的简单方法：

```
 private static long inUseMemory() {
        Runtime rt = Runtime.getRuntime();
        rt.gc();
        final long memory = rt.totalMemory() - rt.freeMemory();
        return memory;
      } 
```

我还包括一个程序示例，该程序使用该方法检查某些常见情况下的内存使用情况。分配一百万个短数组的内存增加证实了短数组每个元素使用两个字节。各种对象数组的内存增加表明更改一个或两个字段的类型几乎没有区别。

这是一次运行的输出。YMMV。

```
Before short[1000000] allocation: In use: 162608 Change 162608
After short[1000000] allocation: In use: 2162808 Change 2000200
After TwoShorts[1000000] allocation: In use: 34266200 Change 32103392
After NoShorts[1000000] allocation: In use: 58162560 Change 23896360
After TwoInts[1000000] allocation: In use: 90265920 Change 32103360
Dummy to keep arrays live -378899459 
```

本文其余部分为程序源码：

```
 public class Test {
      private static int BIG = 1000000;
      private static long oldMemory = 0;

      public static void main(String[] args) {
        short[] megaShort;
        NoShorts[] megaNoShorts;
        TwoShorts[] megaTwoShorts;
        TwoInts[] megaTwoInts;
        System.out.println("Before short[" + BIG + "] allocation: "
            + memoryReport());
        megaShort = new short[BIG];
        System.out
            .println("After short[" + BIG + "] allocation: " + memoryReport());
        megaTwoShorts = new TwoShorts[BIG];
        for (int i = 0; i < BIG; i++) {
          megaTwoShorts[i] = new TwoShorts();
        }
        System.out.println("After TwoShorts[" + BIG + "] allocation: "
            + memoryReport());
        megaNoShorts = new NoShorts[BIG];
        for (int i = 0; i < BIG; i++) {
          megaNoShorts[i] = new NoShorts();
        }
        System.out.println("After NoShorts[" + BIG + "] allocation: "
            + memoryReport());
        megaTwoInts = new TwoInts[BIG];
        for (int i = 0; i < BIG; i++) {
          megaTwoInts[i] = new TwoInts();
        }
        System.out.println("After TwoInts[" + BIG + "] allocation: "
            + memoryReport());

        System.out.println("Dummy to keep arrays live "
            + (megaShort[0] + megaTwoShorts[0].hashCode() + megaNoShorts[0]
                .hashCode() + megaTwoInts[0].hashCode()));

      }

      private static long inUseMemory() {
        Runtime rt = Runtime.getRuntime();
        rt.gc();
        final long memory = rt.totalMemory() - rt.freeMemory();
        return memory;
      }

      private static String memoryReport() {
        long newMemory = inUseMemory();
        String result = "In use: " + newMemory + " Change "
            + (newMemory - oldMemory);
        oldMemory = newMemory;
        return result;
      }
    }

    class NoShorts {
      //char a, b, c;
    }

    class TwoShorts {
      //char a, b, c;
      short s, t;
    }

    class TwoInts {
      //char a, b, c;
      int s, t;
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-27T17:05:38.893

首先，我想确认内存节省，因为我看到了一些疑问。`short`根据教程中的文档：http: [//docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

> **short**：short 数据类型是一个 16 位有符号二进制补码整数。它的最小值为 -32,768，最大值为 32,767（含）。与 byte 一样，适用相同的准则：**在内存节省实际上很重要的情况下，您可以使用 short 来节省大型数组中的内存。**

通过使用`short`您确实可以将内存保存在**大型数组中（希望是这种情况），**因此使用它是个好主意。

现在回答你的问题：

> 向下转换是否会抵消 short 的性能/内存优势？

**简短的回答是否定的。**向下转换 from `int`to`short`发生在编译时本身，因此从性能角度来看没有向下影响，但**由于您正在节省内存，它可能会在内存阈值场景中产生更好的性能**。

# jquery - 在 jquery 上显示和隐藏 div

> ID：13589188
> 
> 赞同：0
> 
> 时间：2012-11-27T16:56:57.210
> 
> 标签：jquery

我有这段 jquery 代码。这个想法是在单击 div1 时显示 div2 ，反之亦然。我正在缓慢加载 div。我看到了一些非常奇怪的东西。在加载 div 的动画发生并且用户单击两次之前，两个 div 都会显示在页面上。jquery 中是否有一种方法可以确保页面加载，然后如果单击 div2 会显示出来。我想一次显示一个 div。

```
 $(function () {

                $('#div1').click(function () {
                    $('#div1').hide();                
                    $('#div2').show(3000);
                });
                $('#div2').click(function () {
                    $('#div2').hide();
                    $('#div1').each(function()
                    {
                        if($(this).html()!='')    
                        $(this).show(3000);
                    }); 
                });
             }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:03:13.907

您可以尝试在调用之前清除动画队列`hide`。

```
$(function () {
    $('#div1').click(function () {
        $('#div1').stop(true).hide();                
        $('#div2').show(3000);
    });
    $('#div2').click(function () {
        $('#div2').stop(true).hide();
        $('#div1').each(function()
        {
            if($(this).html()!='')    
            $(this).show(3000);
        }); 
    });
 }); 
```

[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:03:10.340

代码是正确的，但在回调中显示 div。例子：

```
$('#div1').click(function () {
     $('#div1').hide(100, function() {
          $('#div2').show(3000);
     });                 
}); 
```

你可以发布你的页面的链接吗？也许依赖于 CSS。

# php - 目录的 Mamp Pro 别名？

> ID：13589189
> 
> 赞同：2
> 
> 时间：2012-11-27T16:57:02.393
> 
> 标签：php, mysql, mamp, apache

试图将这个简单的代码添加到我的 httpd.conf 但每次我启动服务器时它都会被覆盖

```
Alias /ws /path/to/public
<Directory /path/to/public>
    Order allow,deny
    Allow from all
</Directory> 
```

mamp pro 中有一些地方可以输入内容，但我找不到任何关于他们所做工作的文档。

[http://wes.io/L9t9/content](http://wes.io/L9t9/content)

帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-12T12:43:52.827

答案可能有点晚了......但对于每个搜索

第一个字段“自定义虚拟主机目录设置将添加到目录部分：

```
<Directory /path/to/public>
    Order allow,deny
    Allow from all

    #My directory options
</Directory> 
```

第二个字段“自定义虚拟主机常规设置”将粘贴在虚拟主机部分：

```
<VirtualHost *:80>
    #My virtual host options
</VirtualHost> 
```

因此，在您的情况下，只需将所有内容放入 SECOND 框中，默认设置将如下所示：

```
<VirtualHost *:80>
    ServerName your-servername.dev

    DocumentRoot "/your/path/to/public"

    <Directory "/your/path/to/public">
    Options Includes FollowSymLinks  
    AllowOverride All
        Order allow,deny
        Allow from all  
    </Directory>
    Alias /ws /path/to/public
    <Directory /path/to/public>
        Order allow,deny
        Allow from all
   </Directory>
</VirtualHost> 
```

您可以随时检查以下路径中发生的情况：

```
/Users/<YOUR-USERNAME>/Library/Application Support/appsolute/MAMP PRO/httpd.conf 
```

# jquery - 使用选择框按顺序增加克隆的 div id 和标签

> ID：13589204
> 
> 赞同：2
> 
> 时间：2012-11-27T16:57:46.740
> 
> 标签：jquery, input, clone

我正在使用一个选择框来克隆一个 div（基于数字选择）并增加新 div 的 ID 和标签。我有这个工作，但我的问题是，如果你选择一个大于 2 的数字，div 不会按顺序递增。如果您选择 2 然后 3 然后 4 等等，他们会这样做。

基本上，如果您在选择框中选择 3，我希望结果为：

> 成人会员计划 #1
> 成人会员计划 #2 成人
> 会员计划 #3

而不是：

> 成人会员计划 #1
> 成人会员计划 #3 成人
> 会员计划 #2

这是我的JS：

```
$(document).ready(function () {
    //onchange of rooms-count
    $('#num-adults').change(function() {
        var roomsSelected = $('#num-adults option:selected').val();
        var roomsDisplayed = $('[id^="program-"]:visible').length;
        var roomsRendered = $('[id^="program-"]').length;

        if (roomsSelected > 0) {
            $('.membership-programs.adult label').show();
        }
        else {
            $('.membership-programs.adult label').hide(); 
        }

        //if room count is greater than number displayed - add or show accordingly
        if (roomsSelected > roomsDisplayed) {
            for (var i=1;i<=roomsSelected;i++){
                var r = $('#program-' + i);
                if (r.length == 0) {
                    var clone = $('#program-1').clone(); //clone
                    clone.children(':first').text("Membership Program for Adult #"+i);

                    //change ids appropriately
                    setNewID(clone, i);
                    clone.children('div').children('select').each(function() {
                        setNewID($(this),i);
                    });
                    $(clone).insertAfter($('#program-'+roomsRendered));
                }
                else {
                    //if the room exists and is hidden 
                    $(r).show();
                }
            }
        }
        else {
            //else if less than room count selected - hide
            for (var i=++roomsSelected;i<=roomsRendered;i++){
                $('#program-'+i).hide();
            }
        }
    });

    function setNewID(elem, i) {
        oldID = elem.attr('id');
        newId = oldID.substring(0, oldID.indexOf('-')) + "-" + i;
        elem.attr('id',newId);
    }
});​ 
```

这是我的 HTML：

```
<div id="hotel-guests">
    <span class="wrapper">
        <label for="num-adults"># of Adults:</label>
        <select tabindex="4" name="amtrakadults" id="num-adults" class="traveler-dropdown">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
        </select>
    </span>    
</div>
<div class="membership-programs adult">
    <div id="program-1" class="program">
        <span>Membership Program for Adult #1:</span>
        <span class="wrapper">
            <select tabindex="4" name="program" class="membership-program">
                <option value="None">None</option>
                <option value="AAA">AAA</option>
                <option value="Student Advantage">Student Advantage</option>
                <option value="Veterans Advantage">Veterans Advantage</option>
                <option value="NARP">NARP</option>
                <option value="ISIC">ISIC</option>
            </select>
        </span>
    </div>
</div>​ 
```

这是一个[显示问题的小提琴](http://jsfiddle.net/kBPEL/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:05:55.293

改变这个：

```
$(clone).insertAfter($('#program-'+roomsRendered)); 
```

对此：

```
$(clone).appendTo('.membership-programs'); 
```

[**更新的小提琴**](http://jsfiddle.net/kBPEL/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:09:15.693

替换此行

```
$(clone).insertAfter($('#program-'+roomsRendered)); 
```

和

```
$('.adult').append($(clone)); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/kBPEL/2/)**

# git - Jenkins 和 Stash 设置 ssh 密钥

> ID：13589205
> 
> 赞同：1
> 
> 时间：2012-11-27T16:57:52.550
> 
> 标签：git, ssh, jenkins, bitbucket-server

我正在同一台服务器上设置 jenkins 和 stash。Stash 通过 http 运行良好。为了让 Jenkins 连接到 Stash，我创建了一个 ssh（使用 Jenkins 用户，并且密钥存储在 /var/lib/jenkins/.ssh/id_rsa.pub 中）。正如指南所说，我将此密钥添加到我的个人资料中并在管理启动>服务器设置中启用了 ssh。

在 jenkins 中，我安装了 Git 插件和 genarl 配置：

全局配置用户名值

全局配置 user.email 值

在项目配置中，我设置了以下字段：

存储库 URL：ssh://git@10.10.2.40:7999/AT/repository1.git

如果我运行该作业，则会收到以下错误：

```
Building in workspace /var/lib/jenkins/jobs/Test Job/workspace
Checkout:workspace / /var/lib/jenkins/jobs/Test Job/workspace - hudson.remoting.LocalChannel@6bbef70
Using strategy: Default
Cloning the remote Git repository
Cloning repository ssh://git@10.10.2.40:7999/AT/repository1.git
git --version
git version 1.7.12.4
ERROR: Error cloning remote repo 'origin' : Could not clone ssh://git@10.10.2.40:7999/AT/repository1.git
hudson.plugins.git.GitException: Could not clone ssh://git@10.10.2.40:7999/AT/repository1.git
    at hudson.plugins.git.GitAPI.clone(GitAPI.java:273)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1044)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:986)
    at hudson.FilePath.act(FilePath.java:852)
    at hudson.FilePath.act(FilePath.java:825)
    at hudson.plugins.git.GitSCM.determineRevisionToBuild(GitSCM.java:986)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1142)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1324)
    at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:676)
    at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:581)
    at hudson.model.Run.execute(Run.java:1518)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:236)
Caused by: hudson.plugins.git.GitException: Command "/home/danilo/libexec/git-core/git clone --progress -o origin ssh://git@10.10.2.40:7999/AT/repository1.git /var/lib/jenkins/jobs/Test Job/workspace" returned status code 128:
stdout: Cloning into '/var/lib/jenkins/jobs/Test Job/workspace'...

stderr: Host key verification failed.
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.

    at hudson.plugins.git.GitAPI.launchCommandIn(GitAPI.java:897)
    at hudson.plugins.git.GitAPI.access$000(GitAPI.java:42)
    at hudson.plugins.git.GitAPI$1.invoke(GitAPI.java:269)
    at hudson.plugins.git.GitAPI$1.invoke(GitAPI.java:248)
    at hudson.FilePath.act(FilePath.java:852)
    at hudson.FilePath.act(FilePath.java:825)
    at hudson.plugins.git.GitAPI.clone(GitAPI.java:248)
    ... 14 more
Trying next repository
ERROR: Could not clone repository
FATAL: Could not clone
hudson.plugins.git.GitException: Could not clone
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1056)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:986)
    at hudson.FilePath.act(FilePath.java:852)
    at hudson.FilePath.act(FilePath.java:825)
    at hudson.plugins.git.GitSCM.determineRevisionToBuild(GitSCM.java:986)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1142)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1324)
    at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:676)
    at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:581)
    at hudson.model.Run.execute(Run.java:1518)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:236) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:23:22.560

我有一个类似的问题 - 你需要将你的存储服务器添加到你的詹金斯服务器上的 known_hosts 。

登录到您的 jenkins 服务器并 ssh 到您的存储服务器。这将在您用户的 known_hosts 文件中为存储服务器添加一个条目。

然后将 known_hosts 文件复制到 $JENKINS_HOME/.ssh 并将文件所有者更改为 jenkins。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:56:26.590

我有一个无效的 URL，它通常看起来像一个 SCP 命令，这与 git 命令不同，我得到了同样的错误。

我原来有：

```
ssh://jenkins@machinename:~/repos/newrepo.git 
```

并改为：

```
ssh://jenkins@machinename/~/repos/newrepo.git 
```

我正在为詹金斯做准备。一旦我让它在命令行中正常工作，我在 Jenkins 的工作就会正常工作。

# python - 如何使用python刷新树视图？

> ID：13589208
> 
> 赞同：1
> 
> 时间：2012-11-27T16:58:09.773
> 
> 标签：python, pygtk, gtktreeview

我是 python 和 gui 编程的新手。我正在编写一个程序，它将列出 root(/) 中的所有目录以及这些目录中的所有子目录。我正在使用树视图来显示这些目录和子目录。为了加快速度在我的程序中，我正在使用多线程，但我面临一个问题，即仅在执行所有线程后才显示树。我希望在执行任何线程时显示树，并且其他节点像其他线程一样动态附加到树被执行。在此先感谢。这是我的代码

```
import os
import threading
import gtk

class FileBrowser:      
    def __init__(self):
        self.window = gtk.Window()
        self.window.show_all()
        self.window.connect("destroy", gtk.main_quit)

        box = gtk.VBox()
        box.show()

        self.scrolled_w = gtk.ScrolledWindow()
        self.scrolled_w.show()
        self.window.add(box)

        button = gtk.Button("start")
        button.show()
        button.connect("clicked", self.start_scanning)
        button.set_size_request(30, 50)
        box.pack_start(button, False, False, 4)

        self.model=gtk.TreeStore(str)
        self.treeview = gtk.TreeView(self.model)
        self.treeview.show()

        col = gtk.TreeViewColumn("FileName")
        cell = gtk.CellRendererText()

        self.treeview.append_column(col)
        col.pack_start(cell, 0)
        col.set_attributes(cell, text=0)        

        box.pack_start(self.scrolled_w, 10)
        self.scrolled_w.add(self.treeview)
        self.window.set_size_request(600, 300)

    def start_scanning(self, w):
        self.model.clear()
        main_dir = "/"
        list_dir = os.listdir(main_dir)
        no_of_threads = len(list_dir)
        threads = []

        for i in range(no_of_threads):
            t = threading.Thread(target=self.thread_scanning,
                                 args=(main_dir,list_dir[i],))
            threads.append(t)
            t.start()   
            for t in threads:
                t.join()

    def thread_scanning(self, main_d, list_d):
        path = main_d+""+list_d
        if os.path.isdir(path):
            list_subd = os.listdir(path)
            par = self.model.append(None, [list_d])
            for sub in list_subd:
                self.model.append(par, [sub])

    def main(self):
        gtk.main()

if __name__=="__main__":
    fb = FileBrowser()
    fb.main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:43:36.760

因此，您的代码存在两个基本问题。

1.  正如@windfinder 指出的那样，`gobject.threads_init()`如果您希望线程更新您的gui，则需要运行线程才能与您的gtk 应用程序正常工作。实际上，如果您不运行，它可能会导致许多奇怪的问题`gobject.threads_init()`

2.  直到所有线程都完成后，按钮的回调才会完成，因为您在将控制权返回给主循环之前要求线程加入。您可以通过添加超时来解决此问题`gobject`。

我对您的代码进行了一些更改（我还要求线程进入睡眠状态，以便在线程仍在运行时看到 gui 已更新）。

```
#!/usr/bin/env python

import gobject
import time  # This is just used for slowing down the threads
import os
import threading
import gtk

class FileBrowser:

    def __init__(self):
        self.window = gtk.Window()
        self.window.show_all()
        self.window.connect("destroy", self._destroy)

        box = gtk.VBox()
        box.show()

        self.scrolled_w = gtk.ScrolledWindow()
        self.scrolled_w.show()
        self.window.add(box)

        self.status = gtk.Label("...")  # I added a status label to see when scan is done
        self.status.show()
        box.pack_start(self.status, False, False, 2)

        self.button = gtk.Button("start")
        self.button.show()
        self.button.connect("clicked",self.start_scanning)
        self.button.set_size_request(30,50)
        box.pack_start(self.button,False,False,4)

        self.model=gtk.TreeStore(str)
        self.treeview = gtk.TreeView(self.model)
        self.treeview.show()

        col = gtk.TreeViewColumn("FileName")
        cell = gtk.CellRendererText()

        self.treeview.append_column(col)
        col.pack_start(cell,0)
        col.set_attributes(cell,text=0)

        box.pack_start(self.scrolled_w,10)
        self.scrolled_w.add(self.treeview)
        self.window.set_size_request(600,300)

        self.threads = list()  # I made this be part of the full application
        """ That allows us to wait for all threads on close-down, don't know how
        necessary it is."""

    def start_scanning(self,w):

        self.button.set_sensitive(False)  # To disallow stacking scan-stats
        self.status.set_text("Scanning...")  # Let user know it is started
        self.model.clear()
        main_dir= os.path.expanduser("~")  # I just wanted my home-dir instead
        list_dir = os.listdir(main_dir)
        no_of_threads = len(list_dir)
        for i in range(no_of_threads):
            t = threading.Thread(target=self._thread_scanning,args=(main_dir,list_dir[i],))
            self.threads.append(t)
            t.start()

        gobject.timeout_add(200, self._callback)  # This will cause the main app to
        #check every 200 ms if the threads are done.

    def _callback(self):

        if threading.active_count() == 1:  # If only one left, scanning is done
            self.status.set_text("Done!")
            self.button.set_sensitive(True)  # Allow button being pressed again
            return False  # False make callback stop

        print threading.active_count()
        return True

    def _thread_scanning(self,main_d,list_d):
        path = os.sep.join((main_d, list_d))  # Made use of os's sep instead...
        if os.path.isdir(path):
            list_subd = os.listdir(path)
            par = self.model.append(None,[list_d])
            for sub in list_subd:
                self.model.append(par,[sub])

        time.sleep(3)  # Useless other than to delay finish of thread.

    def main(self):

        gtk.main()

    def _destroy(self, *args, **kwargs):

        #Own destroy that waits for all threads...
        for t in self.threads:
            t.join()

        gtk.main_quit(*args, **kwargs)

if __name__=="__main__":
    gobject.threads_init()
    fb=FileBrowser()
    fb.main() 
```

# c++ - C++11 标准是否保证跨实现的相同种子具有相同的随机数？

> ID：13589215
> 
> 赞同：23
> 
> 时间：2012-11-27T16:58:33.410
> 
> 标签：c++, random, c++11, standards

例如，如果我`std::mt19937`在 GCC 和 MSVC 下使用完全相同的种子和参数实例化 a，我应该得到相同的随机数序列吗？如果是这样，我假设这个属性通常适用于 mersenne_twister_engine，因为 mt19937 只是具有特定参数的一个。在 C 语言中情况并非如此`rand()`。看起来标准记录了根据特定代码应用的转换，所以我怀疑它应该总是相同的，但魔鬼在细节中......

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-27T17:01:39.537

对于新的随机数引擎，是的，对于相同的种子和参数，您将在所有平台上获得相同的值序列。对于`rand()`，没有。您也没有随机数分布的保证，即使它们被输入相同的输入值序列。

# c# - 循环遍历文本文件中的数据

> ID：13589217
> 
> 赞同：-1
> 
> 时间：2012-11-27T16:58:34.383
> 
> 标签：c#, io

> **可能重复：**
> [在 C# 中读取/写入 INI 文件](https://stackoverflow.com/questions/217902/reading-writing-ini-file-in-c-sharp)

我有一个文本文件来为我的解析器存储某些数据。存储的数据如下所示：

```
[Yandex]
Hostname=http://yandex.ru
Query=yandsearch?text=[QUERY]&lr=213
LinksMask=<a class="b-serp-item__title-link" tabindex="2"[...]href="[LINK]" onmousedown=
TotalPages=100
NextPage=<a id="next_page" class="b-pager__next" href="[LINK]" onmousedown
NextPage2=<a id="next_page" class="b-pager__next" href="[LINK]" onmousedown
CaptchaURL=showcaptcha?retpath
CaptchaImage=captchaimg?
CaptchaField=rep
[Google Classic]
Hostname=http://[GOOGLEHOST]
Query=search?as_q=[QUERY]&num=100&hl=en&output=ie&filter=0
LinksMask=<li class="g"><h3 class="r"><a[...]href="[LINK]"
TotalPages=10
NextPage=<td class="b" style="text-align:left"><a href="[LINK]"
NextPage2=</font></a></td><td><a href="[LINK]"
CaptchaURL=
CaptchaImage=
CaptchaField= 
```

我想解析出每个 [XXXX] 下的数据并将 Hostname=、Query= 等保存到字符串中。

实现这一目标的最简单方法是什么？

不希望以文本文件以外的其他方式存储数据，我希望它很容易为用户更改:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:03:09.613

这称为ini文件格式，您可以使用Win32 API GetPrivateProfileString 读取它，使用P/Invoke 调用API。请参阅[此处](http://www.pinvoke.net/default.aspx/kernel32.getprivateprofilestring)了解更多详情。不过，LB 链接的[文章提供了更好/更简单的解决方案。](https://stackoverflow.com/questions/217902/reading-writing-ini-file-in-c-sharp)

# javascript - 在 jQuery DateTimePicker 中的 Next/Previous 操作期间禁用自动日期值更改

> ID：13589221
> 
> 赞同：1
> 
> 时间：2012-11-27T16:58:51.350
> 
> 标签：javascript, jquery, jquery-ui, datetimepicker, jquery-ui-datepicker

我正在为 jQuery UI 的 datepicker 使用 Trent Richardson 的出色的 Datetimepicker 插件。

然而，我希望解决的一个问题是，当您选择一个字段，然后浏览它时，输入字段中的日期值会发生变化。因此，如果您选择了一个日期，然后决定导航以查看其他选项，它会在此过程中更改日期。

例如，您可以在[此处](http://trentrichardson.com/examples/timepicker/#slider_examples)查看示例页面（使用下拉菜单而不是滑块）。

这是我的初始化代码：

```
$('input[name=valueTextField]').addClass('datepicker');

                $( ".datepicker" ).datetimepicker({
                        dateFormat: 'm/d/yy ',
                        timeText: 'Test',
                        controlType: 'select',
                        timeFormat: "h:mm TT",
                        ampm: true,
                        onChangeMonthYear: function(year, month, dpInst, tpInst) {
                            alert(dpInst);
                            alert(dpInst.dateDefined);
                            if(!tpInst.timeDefined && !dpInst.dateDefined) {
                                this.value = '';
                                dpInst.dateDefined = null;
                            }
                            if (dpInst.dateDefined) {

                            }
                        },
                        onSelect: function(date, dpInst) {
                            dpInst.dateDefined = true;
                        }

                });
                $("#ui-datepicker-div").addClass("meta_datepicker");
                $('input[name=valueTextField]').attr('readonly', 'readonly'); 
```

[你可以在这里](http://jsfiddle.net/3DzTu/)看到一个 JSFiddle 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:16:02.753

`keyup`您可以在每个and之后保存以前的值，并在 a or`select`期间恢复它：`changeMonthYear``close`

```
$( ".datepicker" ).datetimepicker({
    ...
    onSelect: function() {
        $(this).data("oldValue",this.value);
    },
    onChangeMonthYear: function(year, month, dpInst, tpInst) {
        this.value = $(this).data("oldValue");
    },
    onClose: function() {
        this.value = $(this).data("oldValue");
    }
}).keyup(function() {
    $(this).data("oldValue",this.value);
}); 
```

工作[示例](http://jsfiddle.net/3DzTu/4/)。不漂亮，但可以完成工作......一些边缘情况：

*   当您浏览弹出窗口时，一切正常，但如果您尝试编辑文本字段，它会返回到当前月份（虽然不是真正的问题）。
*   **如果您使用鼠标**将一些日期粘贴到文本字段中，然后立即单击“下一个”或“上一个”，它将不会保持正确的值（虽然不知道一个简单的跨浏览器解决方案）。
*   如果您更改月份然后选择时间，日期也将更改为当前月份，正如@streetlight 所指出的那样。为防止这种情况，`controlType`可能会使用自定义，但完整的实现超出了此答案的范围。

**更新：**正如@streetlight 指出的*另一个*问题——使用“现在”按钮后，一切似乎都变得“有问题”（有时它使用旧值，有时是新值）——我得出的结论是，工作量太大了在用户代码中执行。假设实际上在导航日历时不自动更改值对可用性更好，我建议与 jQuery 团队一起打开 RFE 以提出此选项。

# html - 该表格样式的 CSS 等效项是什么？

> ID：13589224
> 
> 赞同：2
> 
> 时间：2012-11-27T16:59:05.213
> 
> 标签：html, css

我真的很想使用这个表格的布局，但是我怎样才能把它提升到与 HTML5 等效的 CSS 标准呢？

```
<html>
<head></head>
<body>
<table border="1" bordercolor="#000000" style="background-color:#ffffff" width="100%" cellpadding="3" cellspacing="1">
    <tr>
        <td>Table Cell</td>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:01:25.027

```
table {
    background-color: #fff;
    border:1px solid #000;
    border-spacing: 1px;
    border-collapse: separate;
    width: 100%;
}

table td {
    margin: 1px;
    padding: 3px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:02:27.333

创建一个 .css 文件，然后使用标记从您的 HTML 页面链接到该文件

给你的桌子一个 id="mytable"

```
#mytable {
background-color:#ffffff;
border:1px solid #000000;
width:100%;
}

#mytable td {
padding:3px;
} 
```

正在编辑，然后看到其他海报回复。所以是的，他已经确定了。

# css - CSS 容器 DIV 未扩展

> ID：13589226
> 
> 赞同：1
> 
> 时间：2012-11-27T16:59:10.517
> 
> 标签：css, internet-explorer, internet-explorer-9

我已经研究了几个小时，这似乎是 IE 的问题，但我的问题是我有一个容器 DIV，在 IE9 中，它不会扩展并在大约 400 像素后切断所有内容。当然，Chrome 和 FF 可以完美运行。

**容器 DIV**

```
#main_container{
font-family: arial, verdana;
width: 920px;
top: 0;
margin-left: auto;
margin-right: auto;
background-color: #fff;
overflow-x: hidden;
} 
```

**页面容器 DIV**

```
#page_container{
font-family: arial, verdana;
font-size: 14px;
width: 900px;
color: #000;
border: 0px solid;
overflow: hidden;
} 
```

页面块的标准标记看起来像这样

```
<div id="main_container">
  <div id="page_container">
    Variable page data goes here
  </div>
</div> 
```

我的 CSS 是否存在我遗漏的问题，或者我需要应用 IE hack？

**更新的屏幕截图**

IE9 ![这是 IE 9](../Images/f35cdfed6a2571f5f58eb3b3042c14f3.png)

铬/FF ![这是 Chrome 和 FF](../Images/171c9ee313386b47fc00f9d5722a80d7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:02:14.463

中断可能来自“#page_container”中的“溢出：隐藏”。

你试过了`overflow: auto`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:12:17.380

感谢大家的建议和帮助，非常感谢。留了几根头发！

@crowjonah 的解决方案

> 尝试给 #main_container, #page_container { position: relative; 浮动：无；height: auto;} – crowjonah 2 分钟前

解决了这个问题。

# objective-c - 优化从 CoreData 加载 UITableViewCell 缩略图

> ID：13589227
> 
> 赞同：0
> 
> 时间：2012-11-27T16:59:13.940
> 
> 标签：objective-c, uitableview

我目前正在从 CoreData 检索我的 UITableViewCell 缩略图。它是最大 2k 的 png。

它实际上工作正常，用户没有注意到任何缓慢，但我想改进机制以避免过多的 CoreData 请求。

事实上，在需要时会加载单元格，这很好，但关键是始终对传递给显示的每个单元格发出对 CoreData 的请求。一种可能的解决方案是仅在表格视图停止滚动时才加载缩略图，但使用此解决方案，单元格会显示为公共共享图像，因为我已经实现了实际重置单元格的 prepareForReuse。

那么，有没有一种简单的方法来缓存 CoreData 图像（我想在内存中）并检索它？

我的Objective-c知识还是有限的，所以我能想到的最快的解决方案是NSIndexPath.row->UIImage字典（我的表没有section），但不知道能不能实现其他简单优雅的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:05:14.467

该解决方案对我来说似乎非常简单和优雅。由于各种原因，我只能指出您要注意使用 NSCache 而不是字典。自动删除就是其中之一，您还可以设置不同的删除策略、限制等等（来自不同线程且没有锁定的访问似乎不适合您的情况）。因此，这可能会为您节省那几行代码。

# windows - wxWidgets GUI问题

> ID：13589243
> 
> 赞同：0
> 
> 时间：2012-11-27T17:00:04.713
> 
> 标签：windows, debugging, visual-c++, user-interface, wxwidgets

我刚刚将 wxWidgets 从 2.8.12 更新到 2.9.4。我像以前一样构建了所有库并由程序编译。我遇到了几个问题。

1）我在编译后得到这个：![在此处输入图像描述](../Images/7ceaa8e866569f857376a65134663e2b.png)

2）当我单击取消时，我的 GUI 显示为灰色，如下所示：![在此处输入图像描述](../Images/45fac9a627c5979b643ebb01bd3c9682.png)

顶部和底部的灰色条是工具栏，在 Windows 上通常具有蓝色渐变作为背景。此外，这些按钮也有一个深色的边框。

只是想知道是否有人遇到过这个？需要注意的一点是，我正在使用 MSVC，并且正在使用 vc_lib 中的调试库。如果我恢复，一切似乎在 2.8.12 上运行良好。我真的很感激一些反馈。

3）2.8.12截图（正常）：![在此处输入图像描述](../Images/4969f5c36be26b50d116b9c369fcf7c4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:14:11.033

断言表明您的代码中存在问题：您在创建时使用了多个模式`wxListCtrl`。你只需要解决这个问题。

问题的其余部分不太清楚，也许您应该展示使用 wxWidgets 2.8 构建相同的 UI 时的外观。

# logging - Websphere 共享库中的 MyBatis 日志记录

> ID：13589244
> 
> 赞同：0
> 
> 时间：2012-11-27T17:00:07.337
> 
> 标签：logging, log4j, mybatis, websphere-portal

当mybatis在共享jar中使用时，如何让mybatis记录sql语句？使用该共享应用程序的应用程序正在使用 log4j，所以我尝试调用`org.apache.ibatis.logging.LogFactory.useLog4JLogging()`，但这没有帮助。

我还尝试将不同 mybatis 类和 java.sql 类的 websphere 日志详细级别设置为“全部”，但这也无济于事。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:34:19.587

我之前一直在 Portal 中使用 JDK 日志记录 API（我建议将其用于新开发）。但我认为在 Portal 上的 portlet/shared lib 中设置 Log4J 与为任何 WAS 应用程序设置它是相同的。与 WAS 相比，Portal 没有什么特别之处。

尽管如此，我有一些链接，您可以尝试查看这些链接，以帮助您走上使用 Log4J 的正确道路。

[http://www.alexander-bown.com/2009/08/using-commons-logging-1-1-with-log4j-on-websphere-6-0/](http://www.alexander-bown.com/2009/08/using-commons-logging-1-1-with-log4j-on-websphere-6-0/)

[log4j 在 WebSphere 中不起作用](https://stackoverflow.com/questions/7276305/log4j-not-working-in-websphere)

[http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14045904](http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14045904)

# c - 在c中生成随机矩阵

> ID：13589248
> 
> 赞同：-3
> 
> 时间：2012-11-27T17:00:34.997
> 
> 标签：c, matrix, row

所以我得到了从矩阵中的每一行中找到最大值的程序，现在如何生成随机矩阵，例如：n 长度和 m 高度？

```
#include <stdlib.h>
#include <stdio.h>
void max_per_row( double *result, 
                      double matrix[][3], 
                      const int xmax, 
                      const int ymax)
{
int x=0, y=0;

 for(y=0; y < ymax; y++)
    result[y]=y;
for(y=0; y < ymax; y++)
{
    for(x=0; x < xmax; x++)
    {
        if ( matrix[y][x] > result[y] )
            result[y]=matrix[y][x];
    }
}
}

int main(int argc, char **argv)
{
double test1[3][3]={ {-10, -20, 0},
                     {-13, 0,  13},
                     {-99, 99.99, 100.01}};
double result[10]={0};
int y=0;
max_per_row(result, test1, 3, 3 );
for(y=0; y < 3 ; y++)
    printf("max row %d = %f\n", y, result[y]);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:44:15.643

```
int main()
{
    int random[3][3];
    int i, o;

    srand(time(NULL));
    for(o = 0; o<3; o++)
        for(i = 0; i<3; i++)
            random[o][i] = rand();
    return 0;
} 
```

这样就可以了。如果您想要特定的数据子集，您可以`%`在 的输出上使用运算符`rand()`，例如：

```
rand() % 10; // generates a random number 0-9 
```

# ios - iOS：两个位置之间的路线距离（路线，不是直线）

> ID：13589251
> 
> 赞同：0
> 
> 时间：2012-11-27T17:00:53.067
> 
> 标签：ios, dictionary, mkmapview, google-directions-api

我有一个带有多个注释的 MKMapview。当用户选择注释时，“标注”视图会显示位置的名称以及位置与用户位置之间的距离。

我被困在距离上。在 iOS 5 之前，我可以使用 Google 方向 API 来获取距离，但现在我不能。有没有替代的解决方案？

谢谢！

编辑：

我指的距离是两个位置之间的路线距离。该路线有许多路线。这不是“distanceFromLocation：”结果的直线距离

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:05:12.030

如果您有两个 CLLocation，则可以使用该`distanceFromLocation:`方法获取它们之间的距离（以米为单位）。

例子：

```
CLLocation* first = [[CLLocation alloc] initWithLatitude:firstLatitude longitude:firstLongitude];
CLLocation* second = [[CLLocation alloc] initWithLatitude:secondLatitude longitude:secondLongitude];

CGFloat distance = [first distanceFromLocation:second]; 
```

您可以从注释类上的或类似属性中获取注释（而不是注释*视图*）的纬度和经度。`coordinate`

如果您有一个注释列表并且想要获取它们之间的路径距离，只需：

```
CGFloat distance = 0;
for(int idx = 0; idx < [mapView.annotations count] - 1; ++idx) {
    CLLocationCoordinate2D firstCoord = [mapView.annotations[idx] coordinate];
    CLLocationCoordinate2D secondCoord = [mapView.annotations[idx + 1] coordinate];

    CLLocation* first = [[CLLocation alloc] initWithLatitude:firstCoord.latitude longitude:secondCoord.latitude];
    CLLocation* second = [[CLLocation alloc] initWithLatitude:secondCoord.latitude longitude:secondCoord.longitude];

    distance += [first distanceFromLocation:second];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-27T03:21:15.127

现在（iOS 7 和更高版本）您可以使用 MKDirections、MKDirectionsRequest 和 MKDirectionsResponse 获取路由。

路线信息是 MKRoute（有一个距离属性）。

例如，请[点击此链接](http://technet.weblineindia.com/mobile/draw-route-between-2-points-on-map-with-ios7-mapkit-api/)。

# xml - 在 XMLELEMENT XMLFOREST 中使用 LISTAGG

> ID：13589258
> 
> 赞同：0
> 
> 时间：2012-11-27T17:01:21.593
> 
> 标签：xml, oracle, oracle11g

想象两张桌子`sites`& `buildings`，其中一个站点可能有多个建筑物。我有一个查询，它为地理空间数据映射生成一个 xml，并尝试添加属于一个站点的所有建筑物，考虑使用`LISTAGG`函数。

添加建筑物之前的工作查询

```
SELECT XMLELEMENT("rss", 
            XMLATTRIBUTES('http://www.georss.org/georss' AS "xmlns:georss"),
                    XMLELEMENT("channel",
                                 XMLAGG(XMLELEMENT("item",
                                                   XMLFOREST(title AS "title",
                                                              description AS "description",
                                                              point AS "georss:point"))))).EXTRACT('/*')
    FROM (SELECT trim(s.sitedesc) AS title, 
          'Employee Count: ' || s.sitefte || '. Bldg Gross SF: ' || s.bldgarea || '. ' || CASE WHEN s.leasestat = '0' THEN 'Owned' WHEN s.leasestat = '1' THEN 'Leased, end date: ' || trim(l.edate) END AS description, 
          trim(s.latitude) || ' ' || trim(s.longitude) AS point
          FROM site s, leases l
          WHERE s.sold <> 1
            AND s.longitude != ' '
            AND s.sitecode = l.sitecode
        ) 
```

我可以让 LISTAGG 函数自己工作。

```
SELECT LISTAGG(trim(b.bldgcode)||' '||trim(b.bldgdesc), ', ') WITHIN GROUP (ORDER BY b.bldgcode) AS Bldgs
FROM buildings b, sites s
WHERE b.sitecode = s.sitecode
GROUP BY s.sitedesc 
```

但是，该`GROUP BY`子句在 xml“不是按表达式分组”中引发错误（我期待但似乎无法修复）。下面的示例，是否可以在 XMLELEMENT 中使用 LISTAGG ？

```
SELECT XMLELEMENT("rss", 
            XMLATTRIBUTES('http://www.georss.org/georss' AS "xmlns:georss"),
                    XMLELEMENT("channel",
                                 XMLAGG(XMLELEMENT("item",
                                                   XMLFOREST(title AS "title",
                                                              description AS "description",
                                                              point AS "georss:point"))))).EXTRACT('/*')
    FROM (SELECT trim(s.sitedesc) AS title, 
          'Employee Count: ' || s.sitefte || '. Bldg Gross SF: ' || s.bldgarea || '. ' || CASE WHEN s.leasestat = '0' THEN 'Owned' WHEN s.leasestat = '1' THEN 'Leased, end date: ' || trim(l.edate) END || LISTAGG(trim(b.bldgcode)||' '||trim(b.bldgdesc), ', ') WITHIN GROUP (ORDER BY b.bldgcode) AS description, 
          trim(s.latitude) || ' ' || trim(s.longitude) AS point
          FROM site s, lease l, buildings b
          WHERE s.sold <> 1
            AND s.longitude != ' '
            AND s.sitecode = l.sitecode
            AND b.sitecode = s.sitecode
          GROUP BY s.sitedesc
        ) 
```

所需的 XML 样本

```
<rss xmlns:georss="http://www.georss.org/georss">
<channel>
    <item>
        <title>SITE DESCRIPTION</title>
        <description>Employee Count: ###. Bldg Gross SF: ####. Owned/Leased Building1, building2, etc.</description>
        <georss:point>LAT LON</georss:point>
    </item>
....
</channel>
</rss> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:15:49.963

更改您的组。

```
select xmlelement("rss", xmlattributes('http://www.georss.org/georss' as "xmlns:georss"), xmlelement("channel", xmlagg(xmlelement("item", xmlforest(title as "title", description as "description", point as "georss:point")))))
       .extract('/*')
  from (select trim(s.sitedesc) as title,
                'Employee Count: ' || s.sitefte || '. Bldg Gross SF: ' || s.bldgarea || '. ' || case
                  when s.leasestat = '0' then
                   'Owned'
                  when s.leasestat = '1' then
                   'Leased, end date: ' || trim(l.edate)
                end || listagg(trim(b.bldgcode) || ' ' || trim(b.bldgdesc), ', ') within group(order by b.bldgcode) as description,
                trim(s.latitude) || ' ' || trim(s.longitude) as point
           from site s, lease l, buildings b
          where s.sold <> 1
            and s.longitude != ' '
            and s.sitecode = l.sitecode
            and b.sitecode = s.sitecode
          group by s.sitedesc, s.sitefte, s.bldgarea, s.leasestat, l.edate, s.latitude, s.longitude) 
```

这应该可以正常工作。

# vb.net - 如何从文件的一部分中仅提取 Xyz 值

> ID：13589260
> 
> 赞同：-2
> 
> 时间：2012-11-27T17:01:30.543
> 
> 标签：vb.net, parsing, extract

我有一个如下所示的输入文件：

```
ID= 57010101-1
X= 0.0005
Y= 0.0006
Z= 0.0000
Avg= -0.0058

ID= 57010101-2
X= 0.0005
Y= 0.0005
Z= -0.0001
Avg= -0.0057

ID= 57010101-3
X= 0.0005
Y= 0.0007
Z= -0.0001
Avg= -0.0056
C= -0.0031 
```

我需要从 id 中提取 xyz。我已经搞砸了一段时间，但我无法让它从我给它的特定 ID 中获取它。有什么建议么？我正在使用 vb.net

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:33:24.510

如果您想将整个文件加载到内存中，我建议您按照这些方式进行操作。首先，创建一个类来存储文件中每个项目的数据，例如：

```
Public Class MyItem
    Public Id As String
    Public X As Decimal
    Public Y As Decimal
    Public Z As Decimal
    Public Avg As Decimal
    Public C As Decimal
End Class 
```

为简单起见，我只是为每个数据创建了公共字段，但它们应该是公共属性。接下来，创建一个将文件加载到这些对象列表中的方法。例如，这样的事情会起作用：

```
Public Function LoadItems(ByVal filePath As String) As Dictionary(Of String, MyItem)
    Dim items As New Dictionary(Of String, MyItem)()
    Dim item As MyItem = New MyItem()
    For Each line As String In File.ReadAllLines(filePath)
        Dim parts() As String = line.Split(New String() {"= "}, StringSplitOptions.RemoveEmptyEntries)
        If parts.Length = 2 Then
            Select Case parts(0)
                Case "ID"
                    item = New MyItem()
                    item.Id = parts(1)
                    items.Add(item.Id, item)
                Case "X"
                    item.X = Decimal.Parse(parts(1))
                Case "Y"
                    item.Y = Decimal.Parse(parts(1))
                Case "Z"
                    item.Z = Decimal.Parse(parts(1))
                Case "Avg"
                    item.Avg = Decimal.Parse(parts(1))
                Case "C"
                    item.C = Decimal.Parse(parts(1))
            End Select
        End If
    Next
    Return items
End Function 
```

上面的示例使用 ID 作为每个项目的键返回字典中的项目。这样做可以非常快速和轻松地通过 ID 访问列表中的对象。例如：

```
Dim items As Dictionary(String, MyItem) = LoadItems("C:\Test.txt")
Dim item As MyItem = items("57010101-3")
Console.WriteLine("{0}, {1}, {2}", item.X, item.Y, item.Z) 
```

但是，如果您不想将整个文件加载到内存中，您会想要做一些非常相似的事情，但不是让 load 方法返回项目列表，而是希望它只返回单个项目. 在 load 方法中，您希望使用文件流一次读取一行，然后立即关闭文件并在找到对象后返回对象，而不是一次加载所有行。

# linux - linux环境下使用php的web服务

> ID：13589275
> 
> 赞同：0
> 
> 时间：2012-11-27T17:02:25.700
> 
> 标签：linux, windows

我们想知道我们是否有可能建立一个基于 php 的 web 服务在 linux 环境下运行在 apache web 服务器上？这里的问题是我们不时地插入一个 mysql 数据库。然后在 windows 环境下，需要尽快插入相同的数据。网络服务会是这里最好的方法还是任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:14:08.150

PHP 是构建 Web 服务的一种出色且简单的方法。您可以使用[JSON](http://www.json.org)或[Soap](http://www.w3.org/TR/soap/)在服务之间传输数据。

PHP 有一个很好的 SOAP 插件库，称为[NuSoap](http://sourceforge.net/projects/nusoap/)。

请注意，制作示例 php 客户端来测试您的服务是一个很好的做法。使用 PHP 客户端调试服务比使用 Objective-c 或 java 客户端要容易得多。

数据库。PHP 能够写入远程数据库，因此如果您需要写入 Windows 机器上的 SQL Server，这应该是可能的。

# android - 无法让纹理发挥作用

> ID：13589281
> 
> 赞同：1
> 
> 时间：2012-11-27T17:02:36.500
> 
> 标签：android, opengl-es

我得到一个白色的方框，而不是屏幕上的纹理。哦，我认为这无关紧要，但以防万一我先放置线性布局视图然后放置表面视图。

这是我的代码：

```
public class GameEngine {

    private float vertices[];
    private float textureUV[];

    private int[] textureId = new int[1];

    private FloatBuffer vertextBuffer;
    private FloatBuffer textureBuffer;

    private short indices[] = {0,1,2,2,1,3};
    private ShortBuffer indexBuffer;

    private float x, y, z;
    private float rot, rotX, rotY, rotZ; 

    public GameEngine() {

    }

    public void setEngine(float x, float y, float vertices[]){
        this.x = x;
        this.y = y;
        this.vertices = vertices;

        ByteBuffer vbb = ByteBuffer.allocateDirect(this.vertices.length * 4);
        vbb.order(ByteOrder.nativeOrder());

        vertextBuffer = vbb.asFloatBuffer();
        vertextBuffer.put(this.vertices);
        vertextBuffer.position(0);
        vertextBuffer.clear();

        ByteBuffer ibb = ByteBuffer.allocateDirect(indices.length * 2);
        ibb.order(ByteOrder.nativeOrder());

        indexBuffer = ibb.asShortBuffer();
        indexBuffer.put(indices);
        indexBuffer.position(0);
        indexBuffer.clear();
    }

    public void draw(GL10 gl){
        gl.glLoadIdentity();
        gl.glTranslatef(x, y, z);
        gl.glRotatef(rot, rotX, rotY, rotZ);

        gl.glBindTexture(GL10.GL_TEXTURE_2D, textureId[0]);

        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

        gl.glVertexPointer(2, GL10.GL_FLOAT, 0, vertextBuffer);
        gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

        gl.glDrawElements(GL10.GL_TRIANGLES, indices.length, GL10.GL_UNSIGNED_SHORT, indexBuffer);

        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    }

    public void LoadTexture(float textureUV[], GL10 gl, InputStream is) throws IOException{

        this.textureUV = textureUV;

        ByteBuffer tbb = ByteBuffer.allocateDirect(this.textureUV.length * 4);
        tbb.order(ByteOrder.nativeOrder());
        textureBuffer = tbb.asFloatBuffer();
        textureBuffer.put(this.textureUV);
        textureBuffer.position(0);
        textureBuffer.clear();

        Bitmap bitmap = null;

        try{
            bitmap = BitmapFactory.decodeStream(is);

        }finally{
            try{
                is.close();
                is = null;
                gl.glGenTextures(1, textureId,0);   
                gl.glBindTexture(GL10.GL_TEXTURE_2D, textureId[0]);

                gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
                gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

                //Different possible texture parameters, e.g. GL10.GL_CLAMP_TO_EDGE
                gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_REPEAT);
                gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);

                //Use the Android GLUtils to specify a two-dimensional texture image from our bitmap
                GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);

                gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);

                //Clean up
                gl.glBindTexture(GL10.GL_TEXTURE_2D, textureId[0]);

                bitmap.recycle();
            }catch(IOException e){

            }

        }

    }

    public void setVector(float x, float y, float z){
        this.x = x;
        this.y = y;
        this.z = z;
    }

    public void setRot(float rot, float x, float y, float z){
        this.rot = rot;
        this.rotX = x;
        this.rotY = y;
        this.rotZ = z;
    }

    public float getZ(){
        return z;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:08:59.207

确保您的纹理是二次方大小。您不能将 NPO2 纹理与 GL_REPEAT 一起使用。

我也看不到`glEnable(GL_TEXTURE_2D)`任何地方。

# networking - IPv4 标头中的总长度

> ID：13589282
> 
> 赞同：0
> 
> 时间：2012-11-27T17:02:40.283
> 
> 标签：networking, ipv4

我正在尝试了解 IPV4 标头并使用 Wireshark 查看一些数据包。

![在此处输入图像描述](../Images/09943f150f506ed3b1ad239bb7310dc5.png)

总长度（头长度+数据长度）为76字节。报头长度为 20 字节，数据长度为 24 字节。总长度字段中的其他 32 个字节是从哪里来的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:06:46.693

我认为您缺少 TCP 标头。数据负载确实是 24 字节，IPv4 头是 20 字节，TCP 头必须是 (76 - 24 - 20) = 32 b。

# wordpress - 将静态内容添加到 Wordpress 帖子页面？

> ID：13589288
> 
> 赞同：4
> 
> 时间：2012-11-27T17:02:55.857
> 
> 标签：wordpress, blogs

我知道我在 Wordpress 中的主页有一个静态页面。我还有一个名为“评分条目”的页面作为我的博客页面。在向我的客户展示了这个，然后向她展示了 Wordpress 的管理部分后，她开始在***Pages >> All Pages >> "Rate Entries" >> Edit***中输入一个段落。

众所周知，这里最大的问题是，如果“评分条目”是我的帖子页面，则该*页面*内容不会显示在那里，只有*帖子*。有没有办法将该页面内容添加到帖子页面的顶部？我曾希望找到一个插件来做到这一点，但无济于事。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-04T12:34:13.833

假设您在 Wordpress 后端*（设置 > 阅读）*中为帖子设置了自定义页面，您只需在主题中的**index.php**文件中添加几行代码。像这样：

```
//grab the id of the page set in the backend 
$posts_page_id = get_option('page_for_posts');

//grab the post object related to that id
$posts_page = get_post($posts_page_id);

//display the content if any
if( $posts_page->post_content ){
    echo wpautop( $posts_page->post_content ); //uses wpautop to automatically add paragraphs
} 
```

在您的情况下，您可以添加代码以在此代码下方显示循环。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:14:42.157

这是我发现必须插入到*index.php*页面才能完成我需要完成的内容。***正如crowjonah***提到的那样，就在循环遍历帖子的循环之前。

```
 <?php $page = get_page_by_title( 'Rate Entries' ); ?>
    <header class="entry-header">
        <h1 class="etnry-title"><?=$page->post_title;?></h1>
        <p><?=$page->post_content;?></p>
    </header> 
```

这样做是获取页面的页面标题和内容，并将其放在帖子溢出的正上方。这样，她可以编辑该文本，并且它将在帖子页面上更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-01T02:30:04.367

我通过使用文本小部件解决了这个问题。通过使用名为“显示小部件”的插件，我可以确保此文本仅显示在博客页面上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T17:56:32.957

假设您希望在所有条目列表之前的条目页面顶部有一个硬编码段落，为什么不创建一个模板页面，将其分配给您的费率条目页面并在代码中硬编码您的段落，使其始终位于顶部。

[在此处](http://codex.wordpress.org/Pages#Page_Templates)阅读有关页面模板的信息

**更新**

你试过做一个[粘性帖子吗？](http://codex.wordpress.org/Sticky_Posts) 那应该可以解决您的问题

# linux - Gnome 3 依赖问题

> ID：13589293
> 
> 赞同：0
> 
> 时间：2012-11-27T17:03:11.873
> 
> 标签：linux, desktop, gnome, gentoo

我在从这个网站安装 Gnome 3 时遇到问题：http: [//oleeekchoff.blogspot.co.il/2011/10/gnome-3-on-gentoo.html](http://oleeekchoff.blogspot.co.il/2011/10/gnome-3-on-gentoo.html)

我已经有 Gnome 2，所以当我尝试出现 -avuND 世界时我得到了这个

**冲突：7 块（4 块不满足）**

 **！！！单个包槽内的多个包实例已被拉取！！！进入依赖图，导致槽冲突：

系统-fs/udev:0

（sys-fs/udev-171-r9::gentoo，已安装）由

（sys-fs/udev-195::gentoo，ebuild 计划合并）由** 

> **=sys-fs/udev-187 需要 (sys-fs/udev-init-scripts-17-r1::gentoo, ebuild 计划合并) (还有 1 个有同样的问题)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:23:40.370

冲突意味着不同的软件包需要不同版本的`sys-fs/udev`. 例如，在您的情况下，版本 171-r9 是您机器上的当前版本。其他一些包需要版本 195。包`udev-init-scripts`需要版本 187。不允许同一包的多个版本，除非它们位于不同的插槽中。

安装 Gnome 3 时，会有很多包可能需要同一个包的不同版本。一种解决方法是用来`equery g <package>`检查它所依赖的包，并`equery d <package>`检查哪些包需要这个包。找到导致冲突的包并尝试删除和中的一些标志`/etc/portage/make.conf`，`/etc/portage/package.use`或屏蔽.中的一些包`/etc/portage/package.mask`。与使用 Gnome 3 相比，在安装 Gnome 3 时解决这些冲突要有趣得多。祝你好运。

# sql - 内连接与普通查询

> ID：13589296
> 
> 赞同：1
> 
> 时间：2012-11-27T17:03:29.667
> 
> 标签：sql, join

> **可能重复：**
> [ANSI 连接与“where 子句”连接](https://stackoverflow.com/questions/1613304/ansi-joins-versus-where-clause-joins)

我们可以使用以下方法查询两个表，对吗？

```
SELECT customer.name
FROM customer
INNER JOIN order
ON customer.cus_id=order.cus_id
ORDER BY customer.name

SELECT c.name
FROM customer c, order o
WHERE 
c.cus_id=o.cus_id
ORDER BY c.name 
```

与后者相比，使用 join 有什么优势？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:05:31.250

执行上没有区别。这两个是相同的查询，只是写法不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:24:48.337

对于这两个确切的查询，没有区别。查询计划器将为它们创建完全相同的查询计划。

一般来说，使用`join`比较灵活，除了`inner join`你还有`left outer join`,`right outer join`和`cross join`。

“旧式”连接的这些变体有语法，但这是非标准的，例如在 SQL Server 2005 中已弃用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T17:51:20.013

对于它的价值，`INNER JOIN`与“正常”查询的区别是不准确的。

逗号样式的连接语法在 ANSI SQL-89 标准中定义。然后他们意识到他们无法使用该语法进行某些类型的连接。正如@Guffa 所提到的，Oracle 和 Sybase 发明了他们自己的专有增强来连接语法来处理外连接。

在 ANSI SQL-92 中，该标准引入了`INNER`/`OUTER JOIN`语法选项。但是为了向后兼容，旧的语法仍然受到支持，直到今天它仍然在规范中。所以它们*都是*标准的。

自从显式连接语法成为官方 SQL 标准的一部分以来，已经有 20 年了。是时候接受*它*作为“正常”语法了。

哪个表现更好？它们的表现完全相同。所有合理的 SQL 实现都以相同的方式处理连接，并且两种语法形式都调用相同的代码。

我发现 SQL-92 JOIN 语法更清晰。如果您有多个表的连接，您可以将连接表达式放置在连接的表旁边。如果您使用旧语法，您的 WHERE 子句会被许多术语弄得杂乱无章，并且很难区分每个术语与哪个连接表一起使用。

有些人坚持旧的 SQL-89 风格更清晰，但他们错了。:-)

# c# - 带有附加项目的 NLog 配置

> ID：13589297
> 
> 赞同：0
> 
> 时间：2012-11-27T17:03:36.413
> 
> 标签：c#, .net, app-config, nlog

在我的解决方案中，有一个使用 NLog 的主项目，还有另一个小型（独立）项目，其目的是允许更新`<nlog>`解决方案配置文件中该部分的属性。（解决方案名称.exe.config）

我创建了从 ConfigurationElement、ConfigurationElementCollection 和 ConfigurationSection 继承的类，以便能够读取和写入配置文件。

我必须在配置文件中定义 NLog 部分，否则 NLog 将无法工作。我的配置文件如下所示：

```
<configSections>
  <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog" /> <- need to remove this to make it work
  <section name="nlog" type="ReadWriteConfig.NLogSection, ReadWriteConfig" />
</configSections> 
```

我不能允许 ReadWriteConfig 引用 NLog，它是一个独立的应用程序。

如果我以这种方式运行 ReadWriteConfig，它会引发找不到 NLog 程序集的异常。如果我删除 NLog`<section>`它工作正常。

```
ExeConfigurationFileMap configFileMap = new ExeConfigurationFileMap();
configFileMap.ExeConfigFilename = @"somepath\SolutionName.exe.config";

// Get current configuration file.
Configuration config = ConfigurationManager.OpenMappedExeConfiguration(configFileMap, ConfigurationUserLevel.None);

NLogSection myUrlsSection = config.GetSection("nlog") as NLogSection; 
```

处理配置文件的正确方法是什么？

# styles - 如何使用 Bullets 为 StyledText 小部件的不同部分保留样式？

> ID：13589302
> 
> 赞同：1
> 
> 时间：2012-11-27T17:04:13.403
> 
> 标签：styles, swt, bulletedlist, styledtext

我是社区的新手，因此期待通过帮助和获得帮助来开始参与。

现在我有一个问题，也许有人已经经历过。

我正在尝试拥有一个 StyledText 小部件（SWT）并显示每行的行号，但我需要这些行号也有自己的样式。我无法让小部件的两个部分都具有两种不同的样式（StyleRanges），因为它只获取与行号项目符号关联的样式并完全丢弃实际源代码的样式。

有人可以帮忙吗？

提前致谢。

# gnuplot - 如何在 ax ylabel2 上显示值

> ID：13589303
> 
> 赞同：0
> 
> 时间：2012-11-27T17:04:17.823
> 
> 标签：gnuplot

这是我的代码：

```
set title "courbe"
set xlabel "first" 
set ylabel "second"
set y2label "third"
plot "File.txt" using 1:2 with linespoints tit 'first', "File.txt" using 1:3 with linespoints tit 'second', "File.txt" using 1:4 with points tit 'third' 
```

拜托，第三把斧头上没有显示数字..你有什么想法吗？ ![在此处输入图像描述](../Images/c3d28d4848188e3e94c99464849f1b4c.png)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:28:27.047

我怀疑这是您用来生成该图的实际脚本，因为第二个绘图命令的标题不匹配。除此之外，您实际上并没有在 y2 轴上绘制任何东西。要将某些东西放在 y2 轴上，您需要明确指定（例如`axes x1y2`）。就像是：

```
set title "courbe"
set xlabel "first" 
set ylabel "second"
set y2label "third"
plot "File.txt" using 1:2 with linespoints title 'first',\
     "File.txt" using 1:3 with linespoints title 'second', \
     "File.txt" axes x1y2 using 1:4 with points title 'third' 
```

应该做的伎俩。

# visual-c++ - 如何正确地将静态类实例导入到跨平台的 DLL 中？

> ID：13589306
> 
> 赞同：1
> 
> 时间：2012-11-27T17:04:35.897
> 
> 标签：visual-c++, dll, cmake

我有一个共享库（Linux 中的 .so，Windows 中的 .dll）需要访问包含在它加载的任何可执行文件中的静态变量。这个变量恰好是一个类模板类型，并且在一个命名空间内。**尽管将变量声明为“extern”（在 Windows 上为“__declspec(dllimport)”），VC10在链接 DLL 时**为该变量给出“未解析的外部符号”错误。这对我来说似乎很奇怪，因为它确实*不*应该解决，而是留给加载时间。

标题：

```
// a header demonstrating MSVC-compatible linkage
#ifdef _MSC_VER

#ifdef I_AM_DLL
#define TO_DLL_LINKAGE __declspec( dllimport )
#else
#define TO_DLL_LINKAGE __declspec( dllexport )
#endif

#else  // not MSVC
#define TO_DLL_LINKAGE
#endif

template<class T>
class TheClass
{
public:
   TheClass(T t) : value_(t) {}

   T value() const
   {
      return value_;
   }
private:
   T value_;
};

typedef TheClass<int> MyClass; 
```

和DLL：

```
// a test library (DLL) for linkage experiment
#define I_AM_DLL
#include "theclass.hpp"

#include <iostream>

namespace foo {
extern TO_DLL_LINKAGE MyClass theObject;
}

void bar() {
   int i = foo::theObject.value();
   std::cout << "object value is " << i << std::endl;
} 
```

错误：

> 错误 LNK2001：无法解析的外部符号“_ *declspec(dllimport) class TheClass foo::theObject”（* _imp_?theObject@foo@@3V?$TheClass@H@@A）

我想不用说这在 gcc 中可以正常工作。我还查看了许多类似的 StackOverflow 问题，但它们要么推荐我已经在做的事情，要么由于各种原因不适用（例如导出而不是导入，类而不是类实例等）。

我需要什么额外的魔法才能让 MSVC10 开心？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:38:41.840

事实证明这里有两个基本问题：

1.  在 Windows 上，符号解析是在链接时执行的，即使对于共享库也是如此
2.  dllimport 和 dllexport 是不对称的 - 所有 dllimports 都必须被解析

在 Linux 下使用 gcc 运行时，我的程序可以正常工作，因为对对象的“外部”引用在程序加载时被解析。共享库 (a .so) 列出了它正在导出和正在导入的符号，并且操作系统的程序加载器验证在程序启动时是否满足主程序和共享库的所有导入。

相比之下，在 Windows/VC++ 世界中，必须将满足导入符号的特定模块标识*为链接共享库*- 通常通过“导入库”或 .lib 文件。这不能推迟到程序加载时间。因此，链接步骤失败。

在我的特定情况下，我有一个可执行模块，它既需要来自共享库的符号，也需要向共享库提供（一个）符号。对于静态库和 gcc/Linux，这不是问题，但对于 Windows/VC++，这会产生循环依赖。有一个解决方案，但它需要一些额外的努力，在[这个 StackOverflow 问题](https://stackoverflow.com/questions/362830/circular-dependencies-between-dlls-with-visual-studio)和[Microsoft 文档中进行了](http://msdn.microsoft.com/en-us/library/kkt2hd12%28v=vs.100%29.aspx)讨论。底线是要做到这一点需要一个更复杂的链接步骤，其中*从可执行文件*生成导入库以在共享库的链接阶段使用。如果您有**__dllspec(dllexport) ，则会自动生成这样的库**任何数据的存储类。最后一步是将此导入库添加到共享库 DLL 的链接阶段。

如果您像我一样是 CMake 用户，那么这个过程会通过一个名为[ENABLE_EXPORTS](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#prop_tgt:ENABLE_EXPORTS)的特殊目标属性变得更加容易，它允许库“链接到”可执行文件。

# javascript - $(document).ready(initialize) 和 $(document).on('ready', initialize) 有什么区别？

> ID：13589307
> 
> 赞同：18
> 
> 时间：2012-11-27T17:04:46.680
> 
> 标签：javascript, jquery

有什么区别：

```
$(document).ready(initialize); 
```

和

```
$(document).on('ready', initialize); 
```

在我看来，它们似乎以同样的方式工作。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-27T17:07:23.783

`$(document).on('ready',initialize);` 如果在执行文件时 DOM 已经准备好，则不会工作。

`$(document).ready()`对此有一个特殊处理：它确保它总是被调用

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-27T17:15:28.977

## TL;博士

*   `$(document).on('ready', ...)`已***弃用***，因为它不执行DOM 完全解析后绑定的*回调。*它获取事件对象作为第一个参数。

*   `$().ready()`将引用`jQuery`作为第一个参数传递。

* * *

# 详细解答

> `$(document).on('ready', initialize);`

该表达式将一个`ready`事件处理程序绑定到，就像您对任何其他*事件处理程序*`document`所期望的一样。从 jQuery 1.8开始，[不推荐](http://api.jquery.com/ready/)使用它来监听 DOM 就绪：

 *> 从 jQuery 1.8 开始，还有`$(document).bind("ready", handler)`,***已弃用***。这与该方法的行为类似，`ready`但如果 ready 事件已经触发并且您尝试`.bind("ready")`绑定的处理程序将不会被执行。以这种方式绑定的就绪处理程序在上述其他三种方法的任何绑定之后执行。

请注意，这`ready`是一个自定义事件，由 jQuery[内部](https://github.com/jquery/jquery/blob/1.8.3/src/core.js#L396)触发。这也意味着您可以手动触发它，这可能会搞砸。

* * *

> `$(document).ready(initialize);`

此表达式并不真正绑定事件处理程序。[`jQuery.fn.ready`](https://github.com/jquery/jquery/blob/1.8.3/src/core.js#L230-235)是一种专用方法，用于**注册回调**，以便在 DOM 完全解析时运行。jQuery 正在将回调添加到一个*promise*对象，而您传递给哪个选择器并不重要`$`。

此外，回调传递的是对 jQuery 对象的引用，而不是*事件*对象。

* * *

[源代码](https://github.com/jquery/jquery/blob/1.8.3/src/core.js#L391-397)的以下部分很好地显示了像这样注册的回调的处理方式不同：

```
// If there are functions bound, to execute
readyList.resolveWith(document, [jQuery]);

// Trigger any bound ready events
if (jQuery.fn.trigger) {
    jQuery(document).trigger("ready").off("ready");
} 
```*

# visual-studio-2010 - 如何在客户端上配置 VSTO 应用程序

> ID：13589308
> 
> 赞同：0
> 
> 时间：2012-11-27T17:04:57.960
> 
> 标签：visual-studio-2010, vsto

在我的 Visual Studio VSTO 解决方案中，我可以在我的 app.config 文件中配置我的加载项（例如 WCF 端点）。在客户端站点上部署后，如何配置我的加载项？

我以前无法设置我的服务位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:39:22.310

您没有提到加载项适用于哪个应用程序，所以我假设它是 Excel（任何办公应用程序的说明应该相同，因此只需将 Excel.exe 替换为您正在开发的应用程序）。

您应该将 app.config 文件中的配置部分添加到 Excel 的 app.config 文件中，因为 excel 是运行加载项的应用程序。

该文件应名为 Excel.exe.config，并且应位于与 Excel.exe 相同的目录中（文件夹位置当然取决于您的 office 版本）。如果配置文件不存在，您可以创建它。

# jquery - jQuery：将焦点放在 searchabledropdown

> ID：13589310
> 
> 赞同：1
> 
> 时间：2012-11-27T17:05:05.563
> 
> 标签：jquery, select, input, focus

我正在使用 jQuery 插件**searchabledropdown**，它本质上将`<select>`选择元素转换为`input`在您键入时显示结果的字段（尽管它看起来和行为仍然像下拉选择！）。

现在我想将焦点传递给这样一个转换的元素。我做了什么：

*   我在 Chrome 网络工具中查找了上述元素，
*   然后写了一个匹配的 jQuery 选择器，
*   终于调用`focus()`它了。

我的代码似乎适用于其他元素（尝试使用*未转换*的常规`<select>`元素，它工作正常）。

```
jQuery(".map-searchbox input").focus(); 
```

然而，将焦点放在`input`由 searchabledropdown 创建的元素上不起作用......这是转换*后*的 html 元素的轮廓。（对不起所有的风格垃圾，但我不确定它是否重要......）

```
<div class="map-hudbox map-searchbox">
  <select class="searchselect" style="text-decoration: none; width: 163px; height: 19px;">
    <option value="...">...</option>
    ...
  </select> 
  <input type="text" style="height: 17px; position: absolute; top: 0px; left: 0px; margin: 0px; padding: 2px 0px 0px 3px; outline-style: none; border-style: solid solid none; border-color: transparent; background-color: transparent; border-left-width: 1px; border-top-width: 1px; font-size: 12px; font-variant: normal; font-weight: normal; color: rgb(68, 68, 68); text-align: -webkit-auto; text-indent: 0px; text-shadow: none; text-transform: none; width: 140px; z-index: 2;">
  <div style="position: absolute; top: 0px; left: 0px; width: 165px; height: 19px; background-color: rgb(255, 255, 255); opacity: 0.01; z-index: 1;"></div>
</div> 
```

`input`和底部`div`元素是由*searchabledropdown*插件从`select`顶部创建的元素。这个领域是我希望重点关注的领域。*`input`*

 ***任何想法为什么正常`.focus()`通话没有帮助？**

帮助将不胜感激！:)

* * *

*PS 为了避免检查 jQuery 选择器的通常建议：选择器有效，如果通过 Chrome JS 控制台打印出来，我会准确地显示`input`上面列出的元素。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:14:44.347

我认为标签`outline-style: none;`上的 css 属性`input`使它看起来好像输入实际上没有集中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:02:18.970

再试一试。

我意识到问题是可见性之一。searchabledropdown 插件改变了输入和选择元素的可见性，并且将焦点放在不可见的元素上显然不起作用。

在弄清楚当上述内容`jQuery(".map-searchbox input").focus();`像魅力一样时要使什么可见之后。*

# .net - 从 F# 调用 DateTime.TryParse 的正确方法是什么？

> ID：13589311
> 
> 赞同：35
> 
> 时间：2012-11-27T17:05:09.607
> 
> 标签：.net, f#, tryparse

从 F# 调用 DateTime.TryParse 的正确方法是什么？我正在尝试测试 F# 交互中的一些代码，但我不知道如何通过 ref 将可变的 DateTime 传递给第二个参数。F# 中的 in/out/ref 语法是什么？

这是我正在查看的方法签名：http: [//msdn.microsoft.com/en-us/library/ch92fbc1.aspx ?cs-save-lang=1&cs-lang=fsharp#code-snippet-1](http://msdn.microsoft.com/en-us/library/ch92fbc1.aspx?cs-save-lang=1&cs-lang=fsharp#code-snippet-1)

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-11-27T17:21:41.273

如果你真的需要`DateTime`通过引用传递一个可变的，克里斯的回答是正确的。`out`但是，在 F# 中使用编译器将尾随参数视为元组返回值的能力更为惯用：

```
let couldParse, parsedDate = System.DateTime.TryParse("11/27/2012") 
```

这里，第一个值是`bool`返回值，而第二个是分配的参数。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-27T17:09:17.133

以下是在 F# 中执行 DateTime.TryParse 的方法：

```
let mutable dt2 = System.DateTime.Now
let b2 = System.DateTime.TryParse("12-20-04 12:21:00", &dt2) 
```

操作员在哪里`&`找到 dt2 的内存地址以修改引用。

以下是有关 F# 参数语法的一些[附加信息。](http://msdn.microsoft.com/en-us/library/dd233213.aspx)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-27T17:56:42.507

只是为了完整起见，另一种选择是使用参考单元，例如

```
let d = ref System.DateTime.MinValue
if (System.DateTime.TryParse("1/1/1", d)) then
   // ... 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-02-15T12:19:39.417

我发现了另一种方式，它似乎更具功能性（来自[https://stackoverflow.com/a/4950763/1349649](https://stackoverflow.com/a/4950763/1349649)）

```
match System.DateTime.TryParse "1-1-2011" with
| true, date -> printfn "Success: %A" date
| _ -> printfn "Failed!" 
```

不幸的是，我找不到任何关于它是如何工作的信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-01-03T20:15:45.940

我有一个我喜欢包含在我所有项目中的辅助模块。我收集这样的东西，将所有命令式 -> 函数式转换放在一个地方以供重用：

```
 module helper = 

    //if some, unwrap input and call fun
    let inline ( |>- ) x f  = Option.bind f x //bind f x
    //if some, unwrap input, call fun, and wrap output 
    let inline ( |>-+ ) x f = Option.map f x 

    module dateTime =

      let tryParse (input: string) : DateTime option =
        let mutable dt = DateTime.Now
        if DateTime.TryParse(input, &dt) then Some dt else None 
```

# ruby-on-rails-3 - 多个视图编辑相同的 Rails 资源

> ID：13589315
> 
> 赞同：1
> 
> 时间：2012-11-27T17:05:19.027
> 
> 标签：ruby-on-rails-3

我有一个复杂的模型，想创建不同的屏幕来编辑它。举个愚蠢的例子，假设它是一个用户模型，一个屏幕让您编辑姓名，另一个屏幕编辑电话号码，另一个页面编辑用户的偏好。

为每个视图创建新动作、表单、路由等很容易，但诀窍是当您实际点击提交时，它会调用`update`，然后......然后呢？如果有错误，它应该返回用于编辑模型的页面，而不是通用的“编辑”视图。即使成功，返回调用更新的页面也可能会很好。

用会话破解一些东西一点也不难，但我总是想知道“有没有更好的方法？”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:32:32.760

我找不到比这更好的方法了，需要赶紧做：

```
def edit
  flash[:edit_user_return_to] = :edit
...

def other_edit
  flash[:edit_user_return_to] = :other_edit
... 
```

其次是

```
render(:action => flash[:edit_user_return_to] || :edit) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:12:48.517

您可以使用 http 引荐来源网址和 URI 解析功能来执行此操作。就像是

```
redirect_to(URI.parse(request.env['HTTP_REFERER'][5])) 
```

此行从请求中获取 HTTP REFERER，并使用 URI 模块对其进行解析。引用路径应该是数组中的第 6 个元素。

# .net - 如何最好使用调试 API 在内存上找到 Win32 入口点和代码注入？

> ID：13589317
> 
> 赞同：0
> 
> 时间：2012-11-27T17:05:36.870
> 
> 标签：.net, debugging, winapi, code-injection, entry-point

我知道嗅探器，我可以使用 win32 调试 api 编写一个。但是在这里我想找到可执行文件的入口并在那里注入代码。调试api可以做到这一点吗？或者任何其他处理代码的方式，而不是像 olly 这样的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:56:12.417

您需要查看 Portable Executable 文件格式并理解它，这里有一些资源可以帮助您入门：

*   [http://msdn.microsoft.com/en-us/library/ms809762.aspx](http://msdn.microsoft.com/en-us/library/ms809762.aspx)
*   [http://msdn.microsoft.com/en-us/magazine/cc301805.aspx](http://msdn.microsoft.com/en-us/magazine/cc301805.aspx)
*   [http://msdn.microsoft.com/en-us/magazine/cc301808.aspx](http://msdn.microsoft.com/en-us/magazine/cc301808.aspx)
*   [http://tuts4you.com/download.php?view.235](http://tuts4you.com/download.php?view.235)
*   [http://net.pku.edu.cn/~course/cs201/2003/mirrorWebster.cs.ucr.edu/Page_TechDocs/pe.txt](http://net.pku.edu.cn/~course/cs201/2003/mirrorWebster.cs.ucr.edu/Page_TechDocs/pe.txt) - 这个特别有用。

供您使用，AddressOfEntryPoint 指针可以位于 IMAGE_OPTIONAL_HEADER 结构中，该结构位于 IMAGE_FILE_HEADER 结构中，它是要执行的第一条指令的 RVA（相对虚拟地址）。如果要从一开始就转移执行流程，则需要将此字段中的值更改为新的 RVA，然后将首先执行新 RVA 处的指令。

# sql - 搜索相似整数列表的算法

> ID：13589324
> 
> 赞同：3
> 
> 时间：2012-11-27T17:06:00.680
> 
> 标签：sql, algorithm, sqlite, data-mining, cluster-analysis

我有一个包含两个表的 SQLite 数据库：

```
Objects:
  object_id int,
  name varchar(50)

Values:
  key char(12),
  value int,
  object_id int 
```

如您所见，每个对象都包含一个键值对列表。该列表通常包含 10 到 60 个条目。(key, object_id) 的组合在值表中是唯一的。

然后我从用户那里得到一个键值对列表，并想在数据库中搜索最相似的对象。用户提供的对象在大多数情况下不会直接匹配我数据库中的任何对象。

相似性意味着，两个对象的键列表几乎相等，并且这些键的值相似（在大多数情况下，值也不相等）。该列表可以是可变长度的。

考虑以下列表：

```
A = { a: 10, b: 20, c: 30 }
B = { a: 11, c: 80, d: 90 }
C = { c: 70, d: 89, e: 40, f: 100 }
D = { c: 65, d: 80, e: 41 } 
```

A 和 B 都包含键*a*和*c*而*b*和*d*只包含在其中一个中。因此，如果我们只看键，相似度将是 0.5。A 和 D 只有*c*相同，*a* , *b* , *d*和*e*只包含在一个列表中。所以它们不会很相似。

在下一步中，我必须查找匹配键的值。因此，在 A 和 B 的示例中，必须比较键*a*和*c的值。**a*非常相似，而*c*不是很好的匹配。

是否可以直接使用 SQLite 进行这样的搜索？如果不是，那么进行搜索的最佳方式/算法是什么？搜索应该尽可能快，但不应该消耗太多的计算能力/内存，因为我在移动设备上这样做。

我非常感谢有关此主题的任何帮助、链接或资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:49:50.067

如果我理解正确，您想将所有记录与来自用户输入的一组固定记录进行比较（假设它是一个结构与 相同的表`Values`）=> **O(n*m [1] *m [2] )** *（其中 n=对象数，n*m [1] =值中的记录数，m [2] =用户输入中的键） -如果 m* [1, 2]是常数因子，则基本上是 O(n) ：

```
select
  v1.object_id,
  count(distinct v1.key) cnt_obj_keys,
  count(distinct v2.key) cnt_usr_keys, --replace with a constant from outside code
  count(case
          when v1.key = v2.key
          then 1
        end) cnt_similar_keys,
  count(case
          when v1.key = v2.key and v1.value = v2.value
          then 1
        end) cnt_similar_values
from values v1
cross join values_from_user v2
group by v1.object_id
; 
```

那么您只需要为每个对象使用一个公式，即**O(n)**来计算用于对对象进行排序并获取第一个对象的未指定索引`x`- 例如：

```
order by
  cnt_similar_keys / (cnt_obj_keys + cnt_usr_keys - cnt_similar_keys),
  cnt_similar_values / cnt_similar_keys 
```

# java - Android - 保留方向变化的数据

> ID：13589328
> 
> 赞同：1
> 
> 时间：2012-11-27T17:06:16.807
> 
> 标签：java, android, android-layout

需要帮助，方向不会更改为横向的 xml 文件，如果我设置 onConfiguration Changed 来更改内容视图，我会丢失所有数据。关于如何改变方向的任何想法都使用相同的数据，但使用不同的 xml 文件夹。xml 文件都是正确的，并且位于正确的文件夹中。布局和布局-土地

```
public class ArticleDetailFragment extends Fragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setHasOptionsMenu(true);

        Bundle detailBundle = getArguments();
        clickedArticleID = detailBundle.getLong(ArticleFragment.CLICKED_ARTICLE_ID);

        uri = Uri.parse(ArticleContentProvider.CONTENT_URI + "/" + clickedArticleID);

        parent = (SlidingArea) getActivity();

        parent.getSupportActionBar().setDisplayShowCustomEnabled(false);
        parent.getSupportActionBar().setDisplayHomeAsUpEnabled(true);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View V = inflater.inflate(R.layout.kpmg_fragment_article_detail, null);

        reportBar = (LinearLayout) V.findViewById(R.id.kpmg_article_detail_report_bar);
        emailBar = (LinearLayout) V.findViewById(R.id.kpmg_article_detail_email_bar);

        //progressBar = (ProgressBar) V.findViewById(R.id.progress);
        image = (ImageView) V.findViewById(R.id.kpmg_article_detail_image);
        downloadReportImage = (ImageView) V.findViewById(R.id.kpmg_article_detail_download_report_image);
        contactAuthorImage = (ImageView) V.findViewById(R.id.kpmg_article_detail_contact_author_image);

        textTitle = (TextView) V.findViewById(R.id.kpmg_article_detail_title);
        textDate = (TextView) V.findViewById(R.id.kpmg_article_detail_date);
        textCategory = (TextView) V.findViewById(R.id.kpmg_article_detail_category);
        textContent = (TextView) V.findViewById(R.id.kpmg_article_detail_content);
        textPDFSize = (TextView) V.findViewById(R.id.kpmg_article_detail_file_size);

        return V;
    }

    @Override
    public void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

        parent.getSupportActionBar().setCustomView(R.layout.kpmg_actionbar_article_detail_view);
        parent.getSupportActionBar().setDisplayShowCustomEnabled(true);
        parent.getSupportActionBar().setDisplayHomeAsUpEnabled(true);

        String[] projection = { ArticleTable.TABLE_NAME + "." + ArticleTable.ID, 
                ArticleTable.TABLE_NAME + "." + ArticleTable.TITLE,  
                ArticleTable.TABLE_NAME + "." + ArticleTable.DATE_PUBLISHED,  
                ArticleTable.TABLE_NAME + "." + ArticleTable.CONTENT, 
                ArticleTable.TABLE_NAME + "." + ArticleTable.IMAGE_URL,
                ArticleTable.TABLE_NAME + "." + ArticleTable.SLUG,
                ArticleTable.TABLE_NAME + "." + ArticleTable.PDF_SIZE,
                ArticleTable.TABLE_NAME + "." + ArticleTable.PDF_URL,
                ArticleTable.TABLE_NAME + "." + ArticleTable.CONTACT_EMAIL,
                ArticleTable.TABLE_NAME + "." + ArticleTable.IS_FAVOURITE,
                ArticleTable.TABLE_NAME + "." + ArticleTable.SHARE_URL,
                ArticleTable.TABLE_NAME + "." + ArticleTable.VIDEO_URL,
                ArticleCategoryTable.TABLE_NAME + "." + ArticleCategoryTable.CATEGORY_NAME,
                ArticleCategoryTable.TABLE_NAME + "." + ArticleCategoryTable.ICON_NAME};

        String selection = ArticleTable.TABLE_NAME + "." + ArticleTable.ID + "=?";
        String[] selectionArgs = new String[] {"" + clickedArticleID};
        Cursor row = parent.getContentResolver().query(ArticleJoinContentProvider.CONTENT_URI, projection, selection, selectionArgs, null);

        if (row.moveToFirst()) {

            textTitle.setText(row.getString(row.getColumnIndexOrThrow( ArticleTable.TITLE)));
            emailSubject = textTitle.getText().toString();

            String dateStr = row.getString(row.getColumnIndexOrThrow(ArticleTable.DATE_PUBLISHED));
            String formattedDate = AppHelper.calculateRelativeDate(dateStr);
            textDate.setText(formattedDate + " - ");

            textCategory.setText(row.getString(row.getColumnIndexOrThrow( ArticleCategoryTable.CATEGORY_NAME)));

            textContent.setText(row.getString(row.getColumnIndexOrThrow( ArticleTable.CONTENT)));

            textPDFSize.setText(row.getString(row.getColumnIndexOrThrow( ArticleTable.PDF_SIZE)));

            parent.imageLoader.DisplayImage(row.getString(row.getColumnIndexOrThrow( ArticleTable.IMAGE_URL)), image, false);

            //Check if PDF Exists based on slug name

            pdfURL = row.getString(row.getColumnIndexOrThrow(ArticleTable.PDF_URL));
            Log.i("pdf",pdfURL);
            slug = row.getString(row.getColumnIndexOrThrow(ArticleTable.SLUG));

            if (pdfURL == null || pdfURL.equals("")) {
                reportBar.setVisibility(View.GONE);
            }

            contactEmail = row.getString(row.getColumnIndexOrThrow(ArticleTable.CONTACT_EMAIL));

            if (contactEmail == null || contactEmail.equals(""))  {
                emailBar.setVisibility(View.GONE);
            }

            shareURL = row.getString(row.getColumnIndexOrThrow(ArticleTable.SHARE_URL));
            videoURL = row.getString(row.getColumnIndexOrThrow(ArticleTable.VIDEO_URL));
        }

        row.close();

        if (!(pdfURL == null || pdfURL.equals(""))) {

            File file = new File(Environment.getExternalStorageDirectory()+"/" + slug + ".pdf");

            if (file.exists()) {                

                downloadReportImage.setImageResource(R.drawable.kpmg_image_open_report);
                downloadReportImage.setOnTouchListener(new View.OnTouchListener() {

                    @Override
                    public boolean onTouch(View v, MotionEvent event) {
                        if (event.getAction() == android.view.MotionEvent.ACTION_DOWN) {

                            downloadReportImage.setImageResource(R.drawable.kpmg_image_open_report_pressed);
                            showPdf(slug);

                        } else if (event.getAction() == android.view.MotionEvent.ACTION_UP) {
                            downloadReportImage.setImageResource(R.drawable.kpmg_image_open_report);
                        }
                        return true;
                    }
                });

            } else {

                downloadReportImage.setOnTouchListener(new View.OnTouchListener() {

                    @Override
                    public boolean onTouch(View v, MotionEvent event) {
                        if (event.getAction() == android.view.MotionEvent.ACTION_DOWN) {

                            if (isNetworkAvailable()) {

                                pDialog = new ProgressDialog(parent);
                                pDialog.setMessage("Downloading file. Please wait...");
                                pDialog.setIndeterminate(false);
                                pDialog.setMax(100);
                                pDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
                                pDialog.setCancelable(true);

                                downloadReportImage.setImageResource(R.drawable.kpmg_image_download_report_pressed);
                                new DownloadFileFromURL().execute(pdfURL);

                            }
                            else {
                                Toast toast = Toast.makeText( parent , "You are not connected to the internet. Please check your connection, or try again later",
                                        Toast.LENGTH_SHORT);
                                toast.show();
                            }

                        } else if (event.getAction() == android.view.MotionEvent.ACTION_UP) {
                            downloadReportImage.setImageResource(R.drawable.kpmg_image_download_report);
                        }
                        return true;
                    }
                });

            }

        }

        if (!(contactEmail == null || contactEmail.equals(""))) {

            contactAuthorImage.setOnTouchListener(new View.OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    if (event.getAction() == android.view.MotionEvent.ACTION_DOWN) {

                        contactAuthorImage.setImageResource(R.drawable.kpmg_image_contact_author_pressed);

                        Intent emailIntent = new Intent(Intent.ACTION_SEND);
                        emailIntent.setType("message/rfc822");
                        emailIntent.putExtra(Intent.EXTRA_EMAIL  , new String[]{contactEmail});
                        emailIntent.putExtra(Intent.EXTRA_SUBJECT, emailSubject);
                        try {
                            startActivity(Intent.createChooser(emailIntent, "Contact the author"));
                        } catch (android.content.ActivityNotFoundException ex) {
                            Toast.makeText(parent, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
                        }   

                    } else if (event.getAction() == android.view.MotionEvent.ACTION_UP) {
                        contactAuthorImage.setImageResource(R.drawable.kpmg_image_contact_author);
                    }
                    return true;
                }
            });
        }

        final View shareDivider = (View) parent.findViewById(R.id.divider1);
        final ImageView shareButton = (ImageView) parent.findViewById(R.id.kpmg_actionbar_image_share);

        if (shareURL == null || shareURL.equals("")) {
            shareDivider.setVisibility(View.GONE);
            shareButton.setVisibility(View.GONE);
        }
        else {

            shareButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    Intent i = new Intent(Intent.ACTION_SEND);
                    i.setType("text/plain");
                    i.putExtra(Intent.EXTRA_SUBJECT, "Sharing URL");
                    i.putExtra(Intent.EXTRA_TITLE, "This is the Title");
                    i.putExtra(Intent.EXTRA_TEXT, shareURL);
                    startActivity(Intent.createChooser(i, "Share URL"));

                }

            }); 
        }

        final ImageView favouriteButton = (ImageView) parent.findViewById(R.id.kpmg_actionbar_image_favourite);

        projection = new String[] {ArticleTable.TABLE_NAME + "." + ArticleTable.ID, ArticleTable.TABLE_NAME + "." + ArticleTable.IS_FAVOURITE};
        selection = ArticleTable.TABLE_NAME + "." + ArticleTable.ID + "=?";
        selectionArgs = new String[] {"" + clickedArticleID};
        Cursor articleRow = parent.getContentResolver().query(ArticleContentProvider.CONTENT_URI, projection, selection, selectionArgs, null);

        articleRow.moveToFirst();

        if (articleRow.getInt(articleRow.getColumnIndexOrThrow( ArticleTable.IS_FAVOURITE )) == 1) {
            Log.i("Status","Is Favourite");
            favouriteButton.setImageResource(R.drawable.kpmg_actionbar_favourite);

        } else {
            Log.i("Status","Is Not Favourite");
            favouriteButton.setImageResource(R.drawable.kpmg_actionbar_not_favourite);

        }

        articleRow.close();

        favouriteButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                String[] projection = new String[] {ArticleTable.TABLE_NAME + "." 
                + ArticleTable.ID, ArticleTable.TABLE_NAME + "." 
                + ArticleTable.IS_FAVOURITE};
                String selection = ArticleTable.TABLE_NAME + "." + ArticleTable.ID + "=?";
                String[] selectionArgs = new String[] {"" + clickedArticleID};

                Cursor articleRow = parent.getContentResolver().query(ArticleContentProvider.CONTENT_URI, projection, selection, selectionArgs, null);

                articleRow.moveToFirst();

                ContentValues values = new ContentValues();

                if (articleRow.getInt(articleRow.getColumnIndexOrThrow(ArticleTable.IS_FAVOURITE)) == 1) {
                    //Is favourite currently
                    values.put(ArticleTable.IS_FAVOURITE, 0);
                    parent.getContentResolver().update(uri, values, null, null);
                    favouriteButton.setImageResource(R.drawable.kpmg_actionbar_not_favourite);
                } else {
                    //Is not favourite currently
                    values.put(ArticleTable.IS_FAVOURITE, 1);
                    parent.getContentResolver().update(uri, values, null, null);
                    favouriteButton.setImageResource(R.drawable.kpmg_actionbar_favourite);
                }

                articleRow.close();
            }

        }); 

        if (videoURL.length() > 0) {

            image.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(videoURL)));
                }

            }); 
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:14:20.537

[Android : Save application state on screen orientation change](https://stackoverflow.com/questions/8093213/android-save-application-state-on-screen-orientation-change)是否解决了您的问题？应该只是一个清单行。

如果没有，请查阅[http://developer.android.com/guide/topics/resources/runtime-changes.html#RetainingAnObject](http://developer.android.com/guide/topics/resources/runtime-changes.html#RetainingAnObject)，它解释了如何在配置更改时捕获和重新加载对象（例如旋转屏幕）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:14:41.327

使用片段时不能保存数据，但是可以使用状态，可以将状态保存在 中`onSaveInstanceState()`，以后可以在`onCreate()`或中检索它`onActivityCreate()`。

之后，您必须将 FragmentTransaction 添加到后台堆栈，您可以保留保存它的包中的状态。

`FragmentManager`将在当前视图中处理方向并恢复您的片段。

# http-get - WordNet 和 HTTP GET

> ID：13589338
> 
> 赞同：0
> 
> 时间：2012-11-27T17:07:00.580
> 
> 标签：http-get, wordnet

我想使用 http get 从 java 代码中查询 wordnet 的端点。我得到了到端点“wordnet.rkbexplorer.com”的连接，但我收到一个错误，即 sparsql-query 不正确。当我在 wordnet.rkbexplorer.com 网站上键入它时，查询本身就会执行。我的 GTTP GET 网址的语法不正确吗？我在这方面没有太多经验。

**我的代码：**

```
URL url = new URL("http://wordnet.rkbexplorer.com/sparql/?query="+query);
HttpURLConnection con = (HttpURLConnection) url.openConnection();
con.setRequestMethod("GET");
String query =  "PREFIX id:   <http://wordnet.rkbexplorer.com/id/> "
              + "PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> "
              + "SELECT * WHERE { ?s rdfs:label ?o } LIMIT 10"; 
```

**错误：**

```
error at URI 3store:default#:1 - syntax error, unexpected $end, expecting identifier 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T23:45:15.783

[这可以用Firebug](https://addons.mozilla.org/en-us/firefox/addon/firebug/)之类的东西进行调试。它的网络选项卡显示了在 HTTP 级别上发送到服务器的内容。在这种情况下，您可以看到网页上的表单正在使用 POST。服务器似乎期待 POST，这有效：

```
curl --data "query=PREFIX id:   <http://wordnet.rkbexplorer.com/id/> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> SELECT * WHERE { ?s rdfs:label ?o } LIMIT 10" "http://wordnet.rkbexplorer.com/sparql/" 
```

因此，只需将您的代码切换为使用 POST 而不是 GET。

# iphone - 当用户触摸 uiscrollview 时隐藏表格

> ID：13589340
> 
> 赞同：0
> 
> 时间：2012-11-27T17:07:19.143
> 
> 标签：iphone, ios, ios5

我在 UIview 中添加了 UIScrollView，并在滚动视图中添加了一个按钮，当我按下该按钮时，它会在 uiscrollview 中生成表格。现在我的问题是，当用户触摸滚动视图中的任何位置时，我想删除该表格。我尝试使用 touches started 方法，但对于滚动视图它不起作用。如果有人知道，请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:05:45.180

`touchesBegan`除非您子类化，否则方法将不起作用。

`UITapGestureRecognizer`是您的解决方案。您可以按如下方式使用它。

...

```
UITapGestureRecognizer *tapRecognizer=[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(didTapScrollView)];
[scrollView addRecognizer:tapRecognizer];
[tapRecognizer release];  //If not ARC

-(void)didTapScrollView
{
    [tableView removeFromSuperview];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:15:02.567

如果用户点击按钮，滚动视图将不会接收到触摸。相反，创建如下所示的方法并将其添加为按钮的目标。

```
- (void)hideTable {
    [yourTableView setHidden:YES];
} 
```

创建按钮时，或者`viewDidLoad`如果它是从 nib 加载的，请将方法添加为按钮的目标：

```
[yourButton addTarget:self action:@selector(hideTable) 
    forControlEvents:UIControlEventTouchUpInside]; 
```

# sql - 使用格式文件在 SQL 中批量插入 csv 以删除双引号

> ID：13589343
> 
> 赞同：4
> 
> 时间：2012-11-27T17:07:22.470
> 
> 标签：sql, sql-server, csv, bulkinsert

我有以下格式的 CSV 文件：

```
data, data, "timestamp", data, data, data, data, data 
```

我需要从时间戳数据周围删除双引号，然后将其作为`DATETIME`数据类型插入表中。

在研究了格式文件之后，我想出了这个：

```
10.0
8
1   SQLCHAR 0   12  ","     1   Data        SQL_Latin1_General_CP1_CI_AS
2   SQLCHAR 0   12  ","     2   Data        SQL_Latin1_General_CP1_CI_AS
3   SQLCHAR 0   26  "",""   3   Timestamp   SQL_Latin1_General_CP1_CI_AS
4   SQLCHAR 0   41  ","     4   Data        SQL_Latin1_General_CP1_CI_AS
5   SQLCHAR 0   41  ","     5   Data        SQL_Latin1_General_CP1_CI_AS
6   SQLCHAR 0   41  ","     6   Data        SQL_Latin1_General_CP1_CI_AS
7   SQLCHAR 0   5   ","     7   Data        SQL_Latin1_General_CP1_CI_AS
8   SQLCHAR 0   12  "0x0a"  6   Data        SQL_Latin1_General_CP1_CI_AS 
```

其中第三行 Timestamp 是带有双引号的项目。

尝试在批量插入中使用此文件会导致错误消息

> 消息 4823，级别 16，状态 1，行 2 无法批量加载。格式文件中的列号无效。

有没有办法可以改变格式文件来做我需要的事情？我正在使用 MSSQL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T23:07:52.900

那么您的无效列号错误可能是由于在您的目标字段编号中重复了第 6 列而不是第 8 列。

但是要删除“”，您需要在第 2 列和第 3 列的分隔符中使用 \"，如下所示...

```
SQLCHAR 0   12  ","     1   Data        SQL_Latin1_General_CP1_CI_AS
SQLCHAR 0   12  ",\""   2   Data        SQL_Latin1_General_CP1_CI_AS
SQLCHAR 0   26  "\","   3   Timestamp   SQL_Latin1_General_CP1_CI_AS
SQLCHAR 0   41  ","     4   Data        SQL_Latin1_General_CP1_CI_AS
SQLCHAR 0   41  ","     5   Data        SQL_Latin1_General_CP1_CI_AS
SQLCHAR 0   41  ","     6   Data        SQL_Latin1_General_CP1_CI_AS
SQLCHAR 0   5   ","     7   Data        SQL_Latin1_General_CP1_CI_AS
SQLCHAR 0   12  "\r\n"  6   Data        SQL_Latin1_General_CP1_CI_AS

-- note: use \r\n for row terminator for an Excel file saved as CSV 
```

因此，对于第 2 列的分隔符实际上是“”，而第 3 列（时间戳）的分隔符是“，” - 因为它是分隔符的一部分，所以从数据中删除了“。

注意：**如果**您的第一行中有列标题，这将无法正常工作，即如果您的第一行包含列标题，例如...

```
Field1Name,Field2Name,Timestamp,Field3Name ... 
```

那么上面的分隔符将不适用于该行，因为列标题时间戳周围没有引号。这样做的结果是您的第一行将在第 1 列和第 2 列中包含正确的数据，但是第 3 列在第 1 行 (",) 中没有有效的分隔符，因此它包含所有其余的列标题和前 3第 2 行的字段，直到它最终在第 2 行的第 3 列末尾找到正确的分隔符 (",)。然后第 2 行的其余部分出现在后面的列中。一团糟。你不能通过使用来绕过它

```
FIRSTROW = 2 
```

您必须删除标题行，**或**在第 3 列标题周围加上引号 -

```
Field1Name,Field2Name,"Timestamp",Field3Name ... 
```

**或**在完成批量插入后通过 SQL 删除引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:25:40.223

这行得通吗：

```
SQLCHAR 0   12  ","     1   Data        SQL_Latin1_General_CP1_CI_AS
SQLCHAR 0   12  ","     2   Data        SQL_Latin1_General_CP1_CI_AS
SQLCHAR 0   26  '","'   3   Timestamp   SQL_Latin1_General_CP1_CI_AS
SQLCHAR 0   41  ","     4   Data        SQL_Latin1_General_CP1_CI_AS
SQLCHAR 0   41  ","     5   Data        SQL_Latin1_General_CP1_CI_AS
SQLCHAR 0   41  ","     6   Data        SQL_Latin1_General_CP1_CI_AS
SQLCHAR 0   5   ","     7   Data        SQL_Latin1_General_CP1_CI_AS
SQLCHAR 0   12  "0x0a"  6   Data        SQL_Latin1_General_CP1_CI_AS 
```

# dojo - 道场轮播标题位置

> ID：13589345
> 
> 赞同：1
> 
> 时间：2012-11-27T17:07:23.830
> 
> 标签：dojo, dojox.mobile

我正在使用[dojox/mobile/Carousel](http://dojotoolkit.org/reference-guide/1.8/dojox/mobile/Carousel.html#id2)。

我想`mblCarouselHeaderBar`在控件的底部而不是顶部显示。任何人都知道如何快速完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:22:29.977

您可以通过 css 更改轮播位置，方法是设置轮播标题栏的 margin-top 并将位置更改为绝对而不是轮播页面的相对位置。

轮播页眉

```
.mblCarouselHeaderBar {
padding: 1px;
margin-top: 123px;
} 
```

轮播的页面或图像

```
.mblCarouselPages {
text-align: center;
margin-top: -153px;
position: absolute;
} 
```

# c++ - C++中带有二维数组的for循环

> ID：13589346
> 
> 赞同：0
> 
> 时间：2012-11-27T17:07:33.350
> 
> 标签：c++, for-loop, nested, multidimensional-array

```
int count = 0;
for(int x = 1; x < 79; x++)
{
    for(int y = 1; y < 21; y++)
    {
        char surroundingCells[] = {arr[x-1][y-1], arr[x][y-1], arr[x-1][y], arr[x+1][y+1], arr[x+1][y-1], arr[x-1][y+1], arr[x][y+1], arr[x+1][y]};
        for(int z = 0; z < 8; z++)
        {
            if((surroundingCells[z] == 'x' || surroundingCells[z] == 'd') && arr[x][y] == 'x')
                count++;
            else if((surroundingCells[z] == ' ' || surroundingCells[z] == 'l') && arr[x][y] == ' ')
                count++;
        }
        if(arr[x][y] == 'x' && (count != 2 || count != 3))
            arr[x][y] = 'd';
        else if(arr[x][y] == ' ' && count == 3)
            arr[x][y] = 'l';
        count = 0;
    }
} 
```

当我在运行此代码后打印数组时，所有有 x 的地方都有一个“d”，但不应该发生某些情况允许保留一个“x”。有人能看到我的逻辑错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:14:57.347

您的代码正在制作它，因此“x”的每个实例都被更改为“d”。在线上

```
if(arr[x][y] == 'x' && (count != 2 || count != 3)) 
```

当`arr[x][y]`为“x”时，条件始终评估为真。如果`count`是2，那么它不是3，如果是3，那么它不是2。所以程序总是在`arr[x][y]`'x'时进入这个块。如果您希望它在`count`2 或 3 时不更改为“d”，则将该行更改为

```
if(arr[x][y] == 'x' && (count != 2 && count != 3)) 
```

# graphite - 石墨总结数据点

> ID：13589350
> 
> 赞同：20
> 
> 时间：2012-11-27T17:07:50.023
> 
> 标签：graphite

我正在使用[石墨](http://graphite.wikidot.com/)来收集数据，并且我想检索一段时间内某些事件的总数。比如说，每周的登录次数。

但是，我只需要总数，不需要看它如何随着时间的推移而演变。

当我使用类似的东西时，`from=-1w&target=summarize(stats.events.login.success,"1w")&format=json`我仍然得到***两个***数据点，而不是一个。

有没有办法从函数中获取**单个数据点？**`summarize`或使用不同的函数返回单个数据点值？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-30T00:06:55.007

这里的问题是，summary 默认情况下与 from 字段不对齐。

```
summarize(seriesList, intervalString, func='sum', alignToFrom=False) 
```

如果你这样做

```
from=-1w&target=summarize(stats.events.login.success,"1w","sum",true)&format=json 
```

你应该只得到一个数据点。它现在正在做的是将您的存储桶与从您的 from 参数开始的不适合一周范围内的日期对齐，因此您最终得到 2 个存储桶。从[石墨文档](http://graphite.readthedocs.org/en/0.9.10/functions.html)总结：

> 默认情况下，桶是通过四舍五入到最接近的间隔来计算的。这适用于小于一天的间隔。例如，当间隔 = 1 小时时，22:32 将最终进入存储桶 22:00-23:00。
> 
> 传递 alignToFrom=true 将改为从 from 时间开始创建存储桶。在这种情况下，22:32 的存储桶取决于开始时间。如果 from=6:30 则 22:32 的 1 小时时段为 22:30-23:30。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:57:36.613

所以对我来说，它把每周的周三和每月的 15 日、16 日或 17 日分开。另外我的似乎忽略了 alignToFrom 值。同事的想法可能是基于安装日期或 whispher db 首次实例化的时间。我可以相信一周中的某天可能是这种情况，但我怀疑我们都在月中安装了东西。

# c - C递归函数找到最小值

> ID：13589351
> 
> 赞同：3
> 
> 时间：2012-11-27T17:07:49.847
> 
> 标签：c, algorithm

我正在编写一个程序：

例如输入是 5 （它不仅可以是 5 ）数字，我读取数组中的数据：`1, 2, 3, 4, 5`。我可以从这个数组中选择一些元素（不是第一个或最后一个），例如 3，然后我在数组中删除这个数字，然后`sum`（最初是 0）将相乘的第一个到左边与第一个相加相加正确的元素（`2*4`在这种情况下是指）。结果数组是`1, 2, 4, 5`，然后我一次又一次地这样做，直到元素数等于 2 （`1 and 5`正如我们不能删除这些数字一样）。

例如：（其中 A、B、C、D 是成对的数字 1 和 2、2 和 3 等。）

```
 A B C D
1 2 3 4 5 
```

删除元素的顺序有 6 种可能的组合（并将左右乘法添加到 sum ）：

```
A (B (C D))
A ((B C) D)
(A B) (C D)
(A (B C)) D
((A B) C) D
A (B (C D)) 
```

目标是找到最小的总和！有两种解决方法，一些聪明的算法或对每个组合使用递归，然后选择最小的一个。谁能给我一个提示如何编写这样的递归，从哪里开始编写（或者可能是一些聪明的算法）。肿瘤坏死因子

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T18:13:52.403

递归回溯解决方案相当简单（伪代码）：

```
def solve (list): 
    if list.length == 2:
        return 0
    ans = INFINITY
    for each interior element:
        remove element from list
        ans = min(ans, leftelement * rightelement + solve(list))
        place element back in original position in list
    return ans 
```

然而，这个算法不够快，无法处理非平凡的数据集，因为它的运行时间是阶乘的`(O(n!))`。优化递归解决方案的常用方法是[动态规划](http://en.wikipedia.org/wiki/Dynamic_programming)。让我们提出子状态：

```
dp[a][b]: minimum cost to reduce array[a .. b] to two elements on the edge
          (array[a] and array[b]) 
```

基本情况是`dp[i][i + 1], i = {0 .. size - 1)`（两个相邻的元素）。由于没有要删除的内部元素，因此此子状态设置为 0。

对于所有其他情况`dp[a][b]`，`b - a >= 2`我们可以`array[a .. b]`通过删除在 之间索引的任何内部元素来进行划分`[a + 1, b - 1]`。如果我们在元素 i 上划分子数组，则成本为`dp[a][i] + dp[i][b] + array[a] * array[b]`。我们希望最小化每个子状态的成本，因此我们将对所有可能的划分元素取这些值中的最小值。最后的答案很简单`dp[0][size - 1]`。

由于存在`O(n^2)`子状态，每个子状态都需要考虑平均`O(n)`划分元素，因此总运行时间为三次`(O(n ^ 3))`，它应该在合理的时间内针对中小型数据集运行。

# version-control - TFS 2012 版本树 - ClearCase 之类的？

> ID：13589353
> 
> 赞同：4
> 
> 时间：2012-11-27T17:08:06.740
> 
> 标签：version-control, tfs

TFS 2012 中是否有任何工具允许给定文件的 ClearCase 之类的图形版本树？根据谷歌搜索和我的实验，TFS 2012 中的版本树功能似乎都围绕着变更集。更改集是在哪个分支上创建的，它是在哪里合并的，等等。但这还不够细化。很多时候，开发人员在文件中看到一段代码并想知道它来自哪里。ClearCase 的版本树非常适合这种情况。

在 TFS 2012（可能还有 2010 年）中，您可以查看分支（即主）上文件的历史记录，它将以文本形式显示该文件的所有更改集以及合并来自哪些分支。这似乎基本上是 ClearCase 中的版本树，但采用文本形式。是否有任何第三方工具可以将此历史记录转换为图形形式？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-22T14:22:48.777

不，Microsoft 没有提供类似 ClearCase 的版本树。

Visual Studio 中有两种可用的图形表示。

1.  分支树：右键单击“分支”>“分支”>“查看层次结构”

2.  跟踪变更集：右键单击文件或文件夹 > 查看历史记录 > 选择变更集并右键单击 > 跟踪变更集

此外，还有可用于 VS2012 和 VS2013 的付费（可试用）版本树扩展。

检查此链接[http://visualstudiogallery.msdn.microsoft.com/e0c5cd21-1371-4032-84f3-8a2be88e2875](http://visualstudiogallery.msdn.microsoft.com/e0c5cd21-1371-4032-84f3-8a2be88e2875)

它确实作为 ClearCase 版本树工作，并允许您通过合并和通过标签等搜索变更集来跟踪变更集。

谢谢， TFSExtensions.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T12:20:56.367

您可以将 nice [gitk工具与](https://stackoverflow.com/tags/gitk/info)[cygwin](http://www.cygwin.com/)中的 X11和[git-tf](https://stackoverflow.com/tags/git-tf/info)或[git-tf](https://stackoverflow.com/tags/git-tfs/info)结合使用（例如，这不是一键式解决方案）。

在某些方面 gitk 不如 clearcase 版本树，例如您可以不移动和隐藏/显示（部分）分支，但另一方面我喜欢它提供的即时内联差异视图。

# php - 在 Wordpress 3.4 中使用 add_theme_page

> ID：13589357
> 
> 赞同：2
> 
> 时间：2012-11-27T17:08:32.807
> 
> 标签：php, wordpress

我正在尝试添加一个主题选项页面，这是我正在使用的一段代码..

`add_theme_page('Theme Options', 'Theme Options', 'read', 'theme-option-slug' , 'theme_settings_page');`

我想知道参数列表中的“读取”是什么意思。另外，如果我用管理员替换它，它就不起作用。

我可以使用哪些值来替换“读取”。我在 Wordpress CodeX 上阅读过，它是 Capability 的领域。但是，在函数中输入 、 等选项`Editor`不起作用`Administrator`。

所以，我需要知道我可以使用的代码的确切值......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:24:18.443

[Codex](http://codex.wordpress.org/Function_Reference/add_theme_page)提供了一些关于每个参数是什么以及它如何工作的有用信息。至于“读取”值，您几乎知道它是一种仅允许某些用户查看给定页面的功能。

不幸的是，您无法定义角色来确定哪些人可以看到您的页面，哪些人不能看到您的页面。您必须定义一个[Capability](http://codex.wordpress.org/Roles_and_Capabilities)。如果您只希望具有管理权限的人查看您的页面，则需要选择管理员角色独有的功能。

将“read”更改为“create_users”之类的内容，这应该可以满足您的需要。[该表](http://codex.wordpress.org/Roles_and_Capabilities#Capability_vs._Role_Table)应该对您有所帮助。

# apache - Mono 3.0.0：无法加载文件或程序集：System.Web.Extensions.dll，版本 = 4.0.0.0

> ID：13589364
> 
> 赞同：4
> 
> 时间：2012-11-27T17:08:54.023
> 
> 标签：apache, mono, servicestack, mod-mono

我在 Apache 中使用 mod-mono 托管 ServiceStack Web 服务，我有 mono-3.0.0 和 xsp-2.10.2。我托管了面向 .Net 框架 2.0 并使用 mod-mono-server2 的 hello world 示例，它运行良好。然后我将项目更改为以 .Net 框架 4.0 为目标并使用 mod-mono-server4。我收到此错误：

> 无法加载文件或程序集“System.Web.Extensions，Version=4.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。
> 
> System.IO.FileNotFoundException：无法加载文件或程序集“System.Web.Extensions，Version=4.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。**该系统找不到指定的文件。文件名：'System.Web.Extensions，版本=4.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35'** 在 System.AppDomain.Load (System.String assemblyString, System.Security.Policy.Evidence assemblySecurity, Boolean refonly) [0x00000] 在：0 在 System.AppDomain.Load (System.String assemblyString) [0x00000] 在：0 在 ( wrapper remoting-invoke-with-check) System.AppDomain:Load (string) at System.Reflection.Assembly.Load (System.String assemblyString) [0x00000] in :0 at System.Web.Compilation.BuildManager.LoadAssembly (System. Web.Configuration.AssemblyInfo 信息，System.Collections.Generic.List`1 al) [0x00000] 在 System.Web.Compilation.BuildManager.GetReferencedAssemblies () [0x00000] 在 :0 在 System.Web.Compilation.BuildManager .CallPreStartMethods () [0x00000] in :0

但是文件 System.Web.Extensions 安装在 GAC 中：

> # gacutil -l System.Web.Extensions
> 
> 以下程序集安装到 GAC 中：System.Web.Extensions，Version=1.0.61025.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35 System.Web.Extensions，Version=3.5.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35 **System.Web .Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35** 项目数= 3

即使我将 MonoPath 设置为专门获取 4.0 版本，也会发生相同的错误：

> MonoPath /usr/local/lib/mono/4.0

我也注意到了这一点：

> 版本信息：Mono 运行时版本：2.10.5（tarball Fri Oct 28 10:20:24 IST 2011）；ASP.NET 版本：4.0.30319.1

Mono Runtime 版本说 2.10.5 虽然我安装了 mono-3.0.0，但我不知道这些信息是否对这个问题有价值。

我尝试直接运行 mod-mono-server4 并收到以下错误消息：

> # mod-mono-server4
> 
> mod-mono-server4 在程序集 /usr/local/lib/mono/4.0/System.dll 中缺少方法 System.Configuration.IConfigurationSectionHandler::Create(object,object,XmlNode)，在程序集 /usr/local/lib/mono 中引用/4.0/System.Configuration.dll 读取配置文件时捕获的异常：System.MissingMethodException：找不到方法：'System.Configuration.IConfigurationSectionHandler.Create'。在 System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection (System.String configKey) [0x00000] 在：0 在 System.Configuration.ConfigurationManager.GetSection (System.String sectionName) [0x00000] 在：0 在系统.Configuration.ConfigurationManager.get_AppSettings () [0x00000] 在 Mono.WebServer.Apache.Server.get_AppSettings () [0x00000] 在 Mono.WebServer.Apache.Server.get_AppSettings () [0x00000] 在 Mono.WebServer.Apache 的 0 中。

我用谷歌搜索了这个错误，它导致我发现了这个错误：

> [https://bugzilla.xamarin.com/show_bug.cgi?id=7967](https://bugzilla.xamarin.com/show_bug.cgi?id=7967)

也许 mod-mono-server4 上的错误是另一个错误的根源......我将尝试获取 xsp 3.0 并查看它是否解决了问题。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T21:01:51.573

此错误是由 Mod_Mono / XSP 使用时Mono 的**.NET 4.0 框架**实现的 System.Configuration 程序集中的问题引起的。它正在尝试读取“ **MonoServerDefaultIndexFiles** ” appSetting 键，但找不到 Create factory 方法。

花了一两天的时间才弄清楚解决方案是编辑以下文件...

> /opt/mono/bin/mod-mono-server4

...通过在此行中将默认值**4.0**更改为***4.5 ：***

> 执行 /opt/mono/bin/mono $MONO_OPTIONS "/opt/mono/lib/mono/ **4.5** /mod-mono-server4.exe" "$@"

解决了这个问题后，我面临的下一个问题是 Mono 通过其设置映射功能将内置的 AspNetMembershipProvider 替换为 SqliteMembershipProvider。我在 Web.config 的 appSettings 部分添加了以下行来禁用此默认行为：

> "<add key="MonoAspnetInhibitSettingsMap" value="disabled"/>"

经过几天的追逐，我的 MVC3 应用程序在 Mono 3.0.3（撰写本文时的最新版本）/XSP 2.10/Mod_Mono 2.10 上成功运行

# android - 我有一个包含 EditText 的片段，在我更改片段并将其更改回来后，编辑文本不起作用

> ID：13589365
> 
> 赞同：0
> 
> 时间：2012-11-27T17:08:54.957
> 
> 标签：android, focus, android-edittext, fragment, android-fragmentactivity

这是我的片段的代码：

```
public class MainFragment extends Fragment {

private final AnimEffect forwardAnimation = AnimEffect.LEFT_TO_RIGHT;
private String couponNumber;
private EditText couponET;
@Override
public void onResume() {
    ((MainActivity) getActivity()).toggleBtn(false);
    super.onResume();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.mainfragment, container, false);
    ImageButton profile = (ImageButton) view.findViewById(R.id.Profile);
    ImageButton scan = (ImageButton) view.findViewById(R.id.Scan);
    Button validate = (Button) view.findViewById(R.id.Validate);
    couponET = (EditText) view.findViewById(R.id.couponET);

    OnClickListener profileListener = new OnClickListener() {

        @Override
        public void onClick(View v) {
            ((MainActivity) getActivity()).navigateTo(ProfileFragment.class, forwardAnimation);
        }
    };
    profile.setOnClickListener(profileListener);
    OnClickListener scanListener = new OnClickListener() {

        @Override
        public void onClick(View v) {
            ((MainActivity) getActivity()).navigateTo(ScannerFragment.class, forwardAnimation);
        }
    };
    scan.setOnClickListener(scanListener);

    OnClickListener validateListener = new OnClickListener() {

        @Override
        public void onClick(View v) {
            String response = couponET.getText().toString();
            if (response.contentEquals("ok")) {
                ((MainActivity) getActivity()).navigateTo(OKResponseFragment.class, forwardAnimation);
            }

        }
    };
    validate.setOnClickListener(validateListener);

    return view;
}

@Override
public void onStart() {
    super.onStart();
    if ((couponET != null) && (couponNumber != null)) {
        couponET.setText(couponNumber);
    }
}

public void setCouponNumber(String number) {
    couponNumber = number;
    if (couponET != null) {
        couponET.setText(number);
    }
}

public void alert() {
    final Dialog dialog = new Dialog(getActivity());
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setContentView(R.layout.warningdialog);
    dialog.setCancelable(true);
    Button ok = (Button) dialog.findViewById(R.id.cancel);
    ok.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            dialog.dismiss();
        }
    });

    dialog.show();
}

} 
```

现在，第一次，编辑文本完美运行，我可以使用它，可以在上面写字，任何东西。如果我改变片段，然后回来，我什么也做不了。如果我按下编辑文本，键盘不会出现。更重要的是，如果我不关闭键盘，在我更改片段之后，以便在我返回时打开键盘，如果我按下 EditText 然后在键盘上写字，什么也不会出现。

这是我的 FragmentActivity，如果有帮助的话：

```
public class MainActivity extends android.support.v4.app.FragmentActivity {

public static boolean scanner_active;

private Fragment f;

public static Intent login;

SharedPreferences settings;

private AnimEffect backPressAnimation = AnimEffect.LEFT_TO_RIGHT;

private ImageButton backButton;

@Override
public void onCreate(Bundle savedInstanceState) {
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    init();
    login = new Intent(MainActivity.this, WelcomeActivity.class);

}

private void init() {
    backButton = (ImageButton) findViewById(R.id.backButton);
    OnClickListener backButtonListener = new OnClickListener() {

        @Override
        public void onClick(View v) {
            Class<?> previousFragment = getPreviousScreen();
            if (previousFragment != null) {
                navigateTo(previousFragment, backPressAnimation);
            } else {
                finish();
                if(!Constants.remind){
                    startActivity(login);
                }
            }
        }
    };
    backButton.setOnClickListener(backButtonListener);
    String name;
    TextView nameTV = (TextView) findViewById(R.id.nameTV);
    if (Constants.remind) {
        settings = getSharedPreferences("PrefFile", 0);
        name = settings.getString("email", null);
    } else {
        name = Constants.email;
    }
    nameTV.setText(name);
    navigateTo(MainFragment.class, AnimEffect.FADE_IN);
}

@Override
public void onBackPressed() {
    Class<?> previousFragment = getPreviousScreen();
    if (previousFragment != null) {
        navigateTo(previousFragment, backPressAnimation);
    } else {
        finish();
        if(!Constants.remind){
            startActivity(login);
        }
    }
}

public void navigateTo(Class<?> fragmentClass, AnimEffect effect) {
    removeOldFragment(effect);
    int animIn = Util.getInAnimation(effect);
    try {
        f = (Fragment) fragmentClass.newInstance();
    } catch (Exception e) {
        LogService.err("navigate", e.getMessage(), e, LogService.LOG_LEVEL_LITE);
    }

    if (f != null) {
        getSupportFragmentManager().beginTransaction().disallowAddToBackStack().setCustomAnimations(animIn, 0).add(R.id.fragment, f, fragmentClass.getSimpleName()).commitAllowingStateLoss();
    }
}

public Class<?> getPreviousScreen() {
    if ((f instanceof MainFragment) && f.isAdded()) {
        return null;
    } else if ((f instanceof ProfileFragment) && f.isAdded()) {
        backPressAnimation = AnimEffect.LEFT_TO_RIGHT;
        return MainFragment.class;
    } else if ((f instanceof HelpFragment) && f.isAdded()) {
        backPressAnimation = AnimEffect.LEFT_TO_RIGHT;
        return MainFragment.class;
    } else if ((f instanceof ScannerFragment) && f.isAdded()) {
        backPressAnimation = AnimEffect.LEFT_TO_RIGHT;
        return MainFragment.class;
    } else if ((f instanceof OKUserResponseFragment) && f.isAdded()) {
        backPressAnimation = AnimEffect.LEFT_TO_RIGHT;
        return MainFragment.class;
    } else if ((f instanceof OKResponseFragment) && f.isAdded()) {
        backPressAnimation = AnimEffect.LEFT_TO_RIGHT;
        return MainFragment.class;
    }
    return null;
}

private void removeOldFragment(AnimEffect effect) {
    if ((f != null) && f.isAdded()) {
        int animOut = Util.getOutAnimation(effect);
        getSupportFragmentManager().beginTransaction().setCustomAnimations(0, animOut).remove(f).commitAllowingStateLoss();
        getSupportFragmentManager().executePendingTransactions();
    }
}

public void toggleBtn(boolean b) {
    backButton.setEnabled(b);
    if(b){
        backButton.setImageResource(R.drawable.back);
    }else{
        backButton.setImageResource(R.drawable.besmart2);
    }

}

public void setCouponText(String text) {
    // TODO Auto-generated method stub
    navigateTo(MainFragment.class, backPressAnimation);
    if ((f != null) && (f instanceof MainFragment)) {
        ((MainFragment) f).setCouponNumber(text);
    }
}

} 
```

编辑：它适用于 4.x，但不适用于以前的操作系统，如 2.3.5 或 3.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:24:10.750

我看到如果我按下验证按钮，如果编辑文本不起作用，则会出现一个警报，然后如果我关闭警报，它就会起作用。所以我所做的是，将一个布尔参数传递给警报，以便如果为真，则调用 dialog.dismiss();。我调用我的 onCreateView() 函数：

```
alert(true); 
```

这会创建一个警报，并快速解除它，而不显示它，使编辑文本工作

# wpf - 数据网格按钮列

> ID：13589368
> 
> 赞同：2
> 
> 时间：2012-11-27T17:09:07.563
> 
> 标签：wpf, mvvm, datagrid

我想在其中创建`DataGridColumn`一个`Button`。看起来很容易对吧？

仅有的：

*   客户应该能够使用箭头导航网格列。
*   当它`DataGridGolumn`具有`Button`焦点时，输入应该激活命令。（例如，无需按 Tab 即可将焦点放在按钮上）
*   使用`Enter`或`Space`单击按钮

我试过`DataGridTemplateColumn`a `CellTemplate`：

```
<DataGridTemplateColumn CellStyle="{StaticResource ResourceKey=Button}">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <Button Style="{StaticResource LinkButton}" FocusManager.FocusedElement="{Binding RelativeSource={RelativeSource Self}}">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="Click">
                        <i:InvokeCommandAction Command="Delete" />
                    </i:EventTrigger>
                </i:Interaction.Triggers>
                <Image Source="Delete.ico"/>
            </Button>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:58:25.703

如果您想在 Cell 获得焦点后立即聚焦您的按钮，您应该设置`KeyboardNavigation.IsTabStop`为`False`on DataGridCell -

```
<DataGridTemplateColumn CellStyle="{StaticResource ResourceKey=Button}">
    <DataGridTemplateColumn.CellTemplate>
        ....
    </DataGridTemplateColumn.CellTemplate>
    <DataGridTemplateColumn.CellStyle>
        <Style TargetType="DataGridCell">
            <Setter Property="KeyboardNavigation.IsTabStop" Value="False"/>
        </Style>
     </DataGridTemplateColumn.CellStyle>
</DataGridTemplateColumn> 
```

因此，当您按下 时`Tab`，它会发现这`DataGridCell`不是此处的停止点，因此请移至下一个制表位，这将是您的`Button`.

您可以创建`Style`in 资源并在任何需要相同行为的地方使用它。

# php - 对 PHP 数组值进行升序排序，但保留相同的值顺序结构

> ID：13589371
> 
> 赞同：0
> 
> 时间：2012-11-27T17:09:15.957
> 
> 标签：php, arrays, sorting, filter

> **可能重复：**
> [使用 PHP 的 uasort 进行排序时保留键顺序（稳定排序）](https://stackoverflow.com/questions/4353739/preserve-key-order-stable-sort-when-sorting-with-phps-uasort)

我有一个数组：

```
$temp = Array('a' => 0, 'b' => 0,'c' => 1,'d' => 1,'e' => 0,'f' => 0,'g' => 2,'h' => 0); 
```

我想通过它的值按升序排序：

```
asort($temp);
print_r($temp); 
```

给出：

```
Array
    (
        [e] => 0
        [a] => 0
        [h] => 0
        [b] => 0
        [f] => 0
        [d] => 1
        [c] => 1
        [g] => 2
    ) 
```

但我想保留具有相同值的条目的结构，例如：

```
Array
    (
        [a] => 0
        [b] => 0
        [e] => 0
        [f] => 0
        [h] => 0
        [c] => 1
        [d] => 1
        [g] => 2
    ) 
```

我认为这与其说是“排序”，不如说是数组函数 filter/map/walk，但我看不到任何有效的方法来完成这项工作。

更多信息：我需要对多达 500 个值进行排序，大约 3500 次，因此速度和效率至关重要。这些数字将每天增长，因为该过程将在一夜之间运行。

有任何想法吗？谢谢。

编辑：我需要保留键和值，因此使用 asort。我只能按值排序，因为会有多个具有相同值的条目。我的字母示例中的键更容易解释我的查询，但实际上是数字，不会按时间顺序排列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:26:06.410

我的解决方案（当然不是最好的）基于[array_multisort()](http://www.php.net/manual/function.array-multisort.php)函数：

```
<?php
$temp = array('a' => 0, 'b' => 0,'c' => 1,'d' => 1,'e' => 0,'f' => 0,'g' => 2,'h' => 0);

$keys   = array_keys($temp);
$values = array_values($temp);

array_multisort($values, $keys);

$temp = array_combine($keys, $values); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:15:04.697

排序值不保留键，排序键不保留值。如果你有带有闭包的 php 5.3，你可以填充它，但这不是最干净的方法：

```
uksort($temp,function($a,$b)use($temp){
    if($temp[$a] < $temp[$b]){
        return -1;
     }
     if($temp[$a] > $temp[$b]){ 
        return 1;
     }
     return strcmp($a,$b);
  }); 
```

# android - 在 android 或 ios 上实现以下内容的最佳方法

> ID：13589375
> 
> 赞同：0
> 
> 时间：2012-11-27T17:09:24.090
> 
> 标签：android, iphone, ios, ipad

我正在创建一个平板电脑应用程序（iOS 和 Android）我有一个菜单系统，我在其中显示不同菜单的不同内容。一个菜单包含购物中心，其中包含详细信息，例如 1\. 照片 2\. 视频 3\. 文本

我们希望这个应用程序可以离线运行，因此所有数据都存储在平板电脑上。但有时我们需要数据也可以更新。

我们考虑使用的选项之一是 1\. HTML 文件并显示 HTML 文件（问题 - 没有获得所需的流动性和可定制性） 2\. 对所有数据进行硬编码（这有更新新数据的问题，我不想要以编程方式更新数据）

实现这一点的最佳方法是什么？使用 webviews 或其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:14:21.883

不了解 android，但 ios 我会使用核心数据来存储数据，我会使用 Web 服务进行更新。客户端可以检查 Web 服务以查看是否有可用的更新，如果有则下载它们。然后，您的客户端代码可以根据这些更新更新核心数据对象。

同样的方法也适合android，我只是不知道android的实现细节。

对于 ios，AFNetworking 和 JSONkit 等一些库将证明是有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:14:10.437

我会做以下工作：

1.  编写应用程序，以便在首次启动时需要网络连接并将数据下载到 SQLite 数据库/iOS 的 CoreData
2.  在每次启动或作为服务时检查有效的网络连接，如果存在，请联系您的服务并检查上次更新时间。如果这与设备不同，请更新本地数据库。如果没有网络，则不执行检查。
3.  照常进行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:16:24.083

如果您想使用一个工具开发此应用程序，请使用 Titanium 之类的框架。否则你可以在 SQLite 中设计一个好的数据库，它可以在 Android 和 iOS 上工作，你可以通过 web 服务使用服务器数据库进行更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T21:21:29.520

您可能会使用像 Phonegap 这样的第三方工具，它允许您使用 CSS/HTML/JavaScript 等标准 Web 开发工具跨不同的移动平台进行部署。

在高层次上，一种方法如下： - 使用 CSS/HTML/Javascript 开发客户端应用程序，并利用 PhoneGap 公开的 API，提供跨不同移动平台的本地存储的单一访问点。- PhoneGap 为每个单独的移动平台创建一个本地应用程序，并将 Web 客户端直接存储在设备上。由于客户端 HTML/CSS/JS 存储在设备上，因此可以在离线时使用设备的浏览器进行渲染。- 在运行时，您可以检查设备是否可以访问互联网并通过 RESTful Web 服务获取更新，如果没有，则直接从本地存储加载。

如果该功能不需要广泛的设备功能或访问图形引擎等功能，那么绝对值得研究。

[http://phonegap.com/](http://phonegap.com/)

# python - 如何将 numpy.where 与逻辑运算符一起使用

> ID：13589390
> 
> 赞同：46
> 
> 时间：2012-11-27T17:10:18.703
> 
> 标签：python, numpy, where, logical-operators

我正在尝试查找数组中大于 a 但小于 b 的所有元素的索引。这可能只是我的语法有问题，但这不起作用：

```
numpy.where((my_array > a) and (my_array < b)) 
```

我应该如何解决这个问题？或者有更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-11-27T17:19:36.017

这里有两种方法：

```
In [1]: my_array = arange(10)

In [2]: where((my_array > 3) & (my_array < 7))
Out[2]: (array([4, 5, 6]),)

In [3]: where(logical_and(my_array > 3, my_array < 7))
Out[3]: (array([4, 5, 6]),) 
```

对于第一个（替换`and`为`&`），请注意适当地添加括号： `&`具有比比较运算符更高的优先级。你也可以使用`*`，但我不推荐它：它很老套，不利于代码的可读性。

```
In [4]: where((my_array > 3) * (my_array < 7))
Out[4]: (array([4, 5, 6]),) 
```

# iphone - xcode：使用带有 NSTimers 的 UIImageView 子类

> ID：13589392
> 
> 赞同：2
> 
> 时间：2012-11-27T17:10:28.297
> 
> 标签：iphone, xcode

我正在创建一个程序，其中一只鸟的图像不断从屏幕顶部落下（如“下雨”的鸟）。为了让每只鸟都有一个 NSTimer，我创建了一个 UIImageView 子类（称为“BirdUIImageView”）。但是，我不确定如何正确实现代码——在哪里放什么等等。

这是我在 ViewController.m 中的代码：

```
#import "ViewController.h"

#import "BirdUIImageView.h"

@interface ViewController ()

@end

@implementation ViewController {

    BirdUIImageView *_myImage;

}

- (void)viewDidLoad
{

    //IMAGE CREATOR TIMER
    createImagesTimer = [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(createImages) userInfo:nil repeats:YES];

}

  //CREATES AN IMAGE
-(void) createImages {  
    srand(time(NULL));
    int random_x_coordinate = rand() % 286;
    CGRect myImageRect = CGRectMake(random_x_coordinate, 0.0f, 40.0f, 40.0f);
    BirdUIImageView *myImage = [[BirdUIImageView alloc] initWithFrame:myImageRect];
    [myImage setImage:[UIImage imageNamed:@"flake.png"]];
    myImage.opaque = YES;
    [self.view addSubview:myImage];
    _myImage = myImage;

} 
```

这是我在 BirdUIImageView.m 中的代码。我完全不知道在这个文件中做什么，但我做了一个尝试：

```
#import "BirdUIImageView.h"

@implementation BirdUIImageView  

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)viewDidLoad
{
    //FALLING BIRDS TIMER
    moveObjectTimer = [NSTimer scheduledTimerWithTimeInterval:0.001 target:self selector:@selector(moveObject) userInfo:nil repeats:YES];
}

//FALLING BIRDS MOVER
-(void) moveObject {

    _myImage.center = CGPointMake(_myImage.center.x, _myImage.center.y +1);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:39:41.190

首先，从您的类中删除`viewDidLoad`and`moveObject`方法`BirdUIImageView`，然后在您的类上尝试以下代码`ViewController.m`。您可以使用计时器设置来获得所需的效果：

在`ViewController.m`

```
- (void)viewDidLoad {
    [super viewDidLoad];
    createImagesTimer = [NSTimer scheduledTimerWithTimeInterval:2.5
                                                         target:self
                                                       selector:@selector(createImages)
                                                       userInfo:nil
                                                        repeats:YES];
}

  //CREATES AN IMAGE
-(void) createImages {
    srand(time(NULL));
    int random_x_coordinate = rand() % 286;
    CGRect myImageRect = CGRectMake(random_x_coordinate, 0.0f, 40.0f, 40.0f);
    BirdUIImageView *myImage = [[BirdUIImageView alloc] initWithFrame:myImageRect];
    [myImage setImage:[UIImage imageNamed:@"flake.png"]];
    myImage.opaque = YES;
    [self.view addSubview:myImage];
    _myImage = myImage;

    [self move];
}

-(void)move {

    //FALLING BIRDS TIMER
    moveObjectTimer = [NSTimer scheduledTimerWithTimeInterval:0.01 target:self selector:@selector(moveObject) userInfo:nil repeats:YES];

}

//FALLING BIRDS MOVER
-(void) moveObject {

    _myImage.center = CGPointMake(_myImage.center.x, _myImage.center.y +1);

} 
```

# php - 将数组值传递给javascript函数并将其存储在变量中

> ID：13589396
> 
> 赞同：0
> 
> 时间：2012-11-27T17:10:57.363
> 
> 标签：php, javascript, html, arrays, function

大家好，请在下面找到我的代码，因为您可以看到我正在尝试将 php 数组值传递给 js 函数，如果我运行此 scipt 我会得到 3 个警报 parameter0=1,parameter1=2 和 parameter2=3 不同...我想做什么我需要保存parameter0，parameter1和parameter3，以便我可以再传递一个函数......请帮我这样做......

```
<script type="text/javascript">
function mufunc(a)
{
    var temp = new Array();
    dump(temp);
    temp = a.split('~');
    var parameter;
    for(i=0;i<temp.length;i++)
    {
        alert('parameter'+i+'='+temp[i]);               
    }
    //alert('sri'+i+'='+temp[i]);
}
</script>

<?php
$a = array('1','2','3');
$b = implode("~",$a);
?>
<a href="javascript:void(0)" onClick="mufunc('<?php echo $b; ?>')">Click Here</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:14:09.877

这样[做](http://de2.php.net/json_encode)

```
$b = json_encode($a); 
```

并在 stackoverflow 或 Google 上查找 JSON 以了解如何访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:14:00.033

您可以`temp`在全局范围内声明，以便以后可以在任何范围内使用：

```
var temp = new Array();

function mufunc(a)
{
    dump(temp);
    temp = a.split('~');
    var parameter;
    for(i=0;i<temp.length;i++)
    {
        alert('parameter'+i+'='+temp[i]);               
    }
    //alert('sri'+i+'='+temp[i]);
} 
```

或者：

```
var params = new Array();

function mufunc(a)
{
    var temp= new Array();
    dump(temp);
    temp = a.split('~');
    var parameter;
    for(i=0;i<temp.length;i++)
    {
        alert('parameter'+i+'='+temp[i]);   
        params['parameter'+i] = temp[i];          
    }
} 
```

现在您可以像这样访问它：

```
alert( params['parameter0'] );
alert( params['parameter1'] ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:14:59.667

它在编写您的代码时工作。

你的计数不同，一个从 0 开始，一个从 1 开始：

尝试将 for 循环中的 start 变量更改为 1，然后将 temp 中的 i 减去 1，您应该得到：

参数1=1，参数2=2，参数3=3

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T17:16:04.800

只需使用全局数组变量，并为其分配参数。

```
var parameter = [];
function mufunc(a)
{
var temp = new Array();
dump(temp);
temp = a.split('~');    
for(i=0;i<temp.length;i++)
{
    alert('parameter'+i+'='+temp[i]); 
    parameter[i] = temp[i];              
 }    
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T17:18:03.910

在这一点上利用 PHP 的[json_encode](http://php.net/manual/en/function.json-encode.php)函数。

```
<script type="text/javascript">

function mufunc(a)
{
    // removed "var" to make "temp" global.
    // and we don't have to parse anything, the JS engine did
    // it for us already!
    temp = new Array();
    for(var i=0; i < temp.length; i++)
    {
        alert(i + ": " temp[i]); 
    }
}
</script>

<?php
$a = array('1','2','3');
$object_string = json_ecode($a);
?>
<a href="javascript:void(0)" onClick="mufunc(<?php print $object_string; ?>)">Click Here</a> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T17:28:34.663

由于我的评论可以被视为一个答案，我将（重新）在这里发布：

在您的 php 脚本中，只需像这样传递参数：

```
onclick="<?php echo implode(',',$b);?>">
//or if the you're dealing with strings:
onclick="<?php echo '"'.implode('","',$b).'"';?>"> 
```

然后在`myfunc`

```
function myfunc()
{
    var parameters = Array.prototype.slice.apply(arguments,[0]);
} 
```

参数在所有函数中都可用，并且包含作为参数传递给该函数的所有数据，无论该函数是否定义了一定数量的参数。[在 MDN 上阅读所有相关信息](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)

该`arguments`对象*看起来*像一个数组，但不是一个，这就是为什么-要对其进行切片-您需要使用原型中`apply`的切片方法。[MDN - 申请](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)更多信息。`Array`

总而言之，这是获得所需内容的最快方法，恕我直言
*：不要使用数组构造函数，请使用数组文字符号：`[]`。数组构造函数有时可能会表现得有些奇怪*

# codeigniter - codeigniter ion auth https 重定向无限循环

> ID：13589399
> 
> 赞同：0
> 
> 时间：2012-11-27T17:11:13.320
> 
> 标签：codeigniter, redirect, ssl, https, ion-auth

我在尝试通过 https 访问页面时遇到问题。我正在使用 Codeigniter 和 Ion Auth

这是我的配置：

```
$config['base_url'] = "http".((isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == "on") ? "s" : "")."://".$_SERVER['HTTP_HOST'].str_replace(basename($_SERVER['SCRIPT_NAME']),"",$_SERVER['SCRIPT_NAME']); 
```

这是我的 .htaccess 文件

```
<IfModule mod_rewrite.c>
RewriteEngine on
Options +FollowSymLinks
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1

RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} (auth|login|pages)
RewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301]

RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !(css|images|js|style)
RewriteRule ^(.*)$ http://%{SERVER_NAME}%{REQUEST_URI} [R=301]
</IfModule>

<IfModule !mod_rewrite.c>
ErrorDocument 404 /index.php
</IfModule> 
```

错误 310 (net::ERR_TOO_MANY_REDIRECTS)：重定向太多。

**https://subdomain.domain.tld/auth/login**的网页导致了过多的重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:35:15.273

如果用户通过重定向回 https 的 https 访问，您将重定向到非 SSL 页面：

```
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} (auth|login|pages)
RewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301] 
```

这会将用户发送到`https`（这将触发以下 Cond）

```
RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !(css|images|js|style)
RewriteRule ^(.*)$ http://%{SERVER_NAME}%{REQUEST_URI} [R=301] 
```

这会将用户重定向*回*http，这会将其无限重定向回此处

根据你的情况试试这个`%{HTTPS} on`：

```
RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !(css|images|js|style)
RewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301] 
```

（注意 https 中的`RewriteRule`）

# iphone - 应用程序终止时删除本地通知

> ID：13589401
> 
> 赞同：0
> 
> 时间：2012-11-27T17:11:17.440
> 
> 标签：iphone, ios, xcode, uilocalnotification, application-lifecycle

在我的应用程序中，我设置了本地通知以在应用程序运行时通知用户。为了在应用程序终止时清理这些通知，我已设置`applicationWillTerminate:`清除这些通知：

```
- (void)applicationWillTerminate:(UIApplication *)application
{
    NSLog(@"applicationWillTerminate");
    [[UIApplication sharedApplication] cancelAllLocalNotifications];
} 
```

不幸的是，如果应用程序崩溃，或者我终止调试，则不会调用此函数，因此我仍然会收到发送到设备的本地通知。

有没有办法确定应用程序是否意外退出，以便我整理这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:57:37.837

我使用这个**KSCrash**库取得了巨大的成功。也许它也可以帮助你：

```
https://github.com/kstenerud/KSCrash 
```

或者，您是否设置`UIApplicationExitsOnSuspend`了 .plist 文件？如果不这样做，则无法保证`applicationWillTerminate`在使用 iOS 4 时会被调用。

# mysql - 如何在 Ruby 中找到 MySQL ENUM 类型的列定义？

> ID：13589402
> 
> 赞同：0
> 
> 时间：2012-11-27T17:11:19.360
> 
> 标签：mysql, ruby

我有一个 Mysql 表定义为：

```
CREATE TABLE `Events` (
 `entity` enum('CLN','TDS','TMS','VTMS') NOT NULL DEFAULT 'CLN',
 `type` enum('INFO','STAT','WARN') NOT NULL) 
```

如何在 Ruby 中找到 ENUM 类型的列定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:38:00.987

我认为会有一种更简单的方法来找出 ENUM 类型的列定义，但这是我的解决方案：

```
>> ActiveRecord::Migration.select("show create table Events")
.first.values.to_s
.split("\n")
.select{ |line| line.match(/entity/) }
.pop
.match(/enum\(([',\w]*)/)[1]
.gsub("'",'')
.split(',') 
```

-- select("show create table Events") -> 0.0004s

=> [“CLN”，“TDS”，“TMS”，“VTMS”]

# c# - 在 ANT 分析器信息的帮助下识别性能瓶颈

> ID：13589405
> 
> 赞同：1
> 
> 时间：2012-11-27T17:11:32.963
> 
> 标签：c#, linq, profiler, red-gate-ants

这段代码运行得很慢：

```
public static class DB
    {
        readonly static InlineSql sql = new InlineSql();

        public static IEnumerable<LabItem> GetLabItemsFromLabLineItems(IEnumerable<LabLineItem> items)
        {
            /*
             * Business Rule : 
             * The sproc used to retrieve lab line items has no way of "grouping" lab items out of line items.
             * To compensate, the sproc orders its results by IDCode, we group everything and use the first of each grouping to represent that ID Code.
             * That very same item is also the first item in its Items property.
             * */
            return items
                .GroupBy(c => c.IDCode , c => c, (c, d) => d.First())
                .Select(c => new LabItem(c.IDCode, c.OrderGuid, c.Name, c.SignificantDtm, c.Status, c.Description, items.Where(d => string.Compare(d.IDCode, c.IDCode, true) == 0 )));
        }        
    } 
```

特别是我们将 d.IDCode 与 c.IDCode 进行比较的 select 语句似乎是问题所在。该行报告来自 ANTS 的命中数为 9000 万，时间百分比为 14.8。 `items.count`大约是9千。

我知道我的断点没有被命中 9000 万次。这里的命中数是什么意思？

其他有用的代码：

`LabItem`有`List<LabLineItem>`这就是我们在这里比较的。 `LabLineItem.Equals`：

```
 public override bool Equals(object obj)
    {
        LabLineItem otherItem = obj as LabLineItem;

        if (otherItem == null) return false;

        return
            OrderGuid == otherItem.OrderGuid
            && IDCode == otherItem.IDCode
            && SignificantDtm == otherItem.SignificantDtm
            && ObservationGuid == otherItem.ObservationGuid
            && string.Compare(Value, otherItem.Value, true) == 0;
    }
    public override int GetHashCode()
    {
        return
            OrderGuid.GetHashCode()
            ^ IDCode.GetHashCode()
            ^ SignificantDtm.GetHashCode()
            ^ ObservationGuid.GetHashCode();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:40:11.317

ANTS 是说`Select`with`string.Compare`调用被点击了 9000 万次，因为对于主列表中的每个项目，它都会再次搜索整个列表。

主要的 9000 次迭代中的每一次都会导致 9000 次额外的迭代，因此`string.Compare`必须至少调用 81,000,000 次。

我建议构建分组的缓存，然后使用它来构建`LabItem`.

也许是这样的：

```
var groupedItems = items.GroupBy(c => c.IDCode);

return items.Select(c => 
                new LabItem(c.IDCode, c.OrderGuid, c.Name, c.SignificantDtm, c.Status, c.Description, 
                groupedItems.Where(d => string.Compare(d.Key, c.IDCode, true) == 0 ).SelectMany(group => group))); 
```

# javascript - 等到ajax完成

> ID：13589411
> 
> 赞同：0
> 
> 时间：2012-11-27T17:11:56.387
> 
> 标签：javascript, ajax

我有这样的代码：

```
var links="";
function upload(file){
   var fd = new FormData();
   fd.append("image", file); // Append the file 
   // Create the XHR (Cross-Domain XHR FTW!!!)
   var xhr = new XMLHttpRequest();
   xhr.open("POST", "http://someapi.com");
   xhr.onload = function() {
      // Big win!
      // The URL of the image is:         
        links += "[IMG]"+JSON.parse(xhr.responseText).upload.links.original+"[/IMG]\n";                 
        //showResult(JSON.parse(xhr.responseText).upload.link);
   }
   // Ok, I don't handle the errors. An exercice for the reader.
   // And now, we send the formdata
   xhr.send(fd);
}
function catchFiles(files){
    nfiles = files.length;
    //var links="";
    for(var i=0;i<nfiles;i++){
        upload(files[i]);
    }                       
}
function showResult(links){     
    document.getElementById('div_result').innerText = links;                    
} 
```

我想要的是如何等到 catchFiles 完成（上传完成的所有文件）之后，将调用 showResult。

有什么解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:24:40.080

当 XHR 调用完成时，它会触发`onreadystatechange`with `readyState`== 4。因此您需要为该事件分配一个函数，而不是`onload`：

```
xhr.onreadystatechange = function(){
    if (xhr.readyState == 4){

        console.log(xhr.responseText);

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:50:22.417

我找不到我提到的 jQuery 功能（也许是我想象的），所以我想出了另一个答案：

添加变量`ajaxcounter`并将其设置为您要发送的文件数，您可以在上传时计算它们，但这可能会带来在所有请求开始之前它达到 0 的风险，您最好对值进行硬编码，或者，如果它是动态设置的，则将所有准备好的 XHR 存储在一个数组中，并在您知道自己拥有所有内容时发送它们。

然后在您的上传功能中执行此操作：

```
xhr.onreadystatechange = function () {
    if(xhr.readystate == 4) {
        // Process the responseText
        ajaxDidFinish();
    }
} 
```

并使其成为`ajaxDidFinish`功能：

```
function ajaxDidFinish() {
    ajaxCounter--;
    if(ajaxCounter == 0) {
        // All your requests should be ready now
    }
} 
```

希望对你有帮助，我没有测试过。

# asp.net-mvc-3 - 从一种方法启动任务并从另一种方法取消它

> ID：13589412
> 
> 赞同：1
> 
> 时间：2012-11-27T17:11:57.847
> 
> 标签：asp.net-mvc-3, c#-4.0, task-parallel-library

我开始使用任务机制，我不知道如何制作

*   开始工作的方法
*   另一个取消这个。

从相同的方法进行创建和取消是有效的（就像使用 StartTask 中的注释代码一样）。

但是当我使用我的 CancelTask​​ 方法时，它不起作用！（作业继续转动，taskProgress 继续递增）。

我的框架版本是 .NET 4，项目是 ASP.NET MVC 3

提前谢谢！

```
private static int taskProgress = 0;
public CancellationTokenSource ts = new CancellationTokenSource();

public ActionResult StartTask()
{
    Task.Factory.StartNew(() =>
    {
        while (true)
        {
            if (ts.IsCancellationRequested)
                break;

            Thread.Sleep(100);
            taskProgress++;
        }
    }, ts.Token);

    //Thread.Sleep(3000);
    //ts.Cancel();

    return RedirectToAction("GetTaskProgress");
}

public ActionResult CancelTask()
{
    ts.Cancel();
    return Content("Cancelled (percentage="+taskProgress.ToString()+")");
}

public ActionResult GetTaskProgress()
{
    return Content(taskProgress.ToString());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:17:51.587

我刚刚找到了解决方案。CancellationTokenSource 必须是静态的。

```
public static CancellationTokenSource ts = new CancellationTokenSource(); 
```

# c++ - 如何重载运算符 -= C++

> ID：13589413
> 
> 赞同：1
> 
> 时间：2012-11-27T17:11:58.363
> 
> 标签：c++, operator-overloading

我需要重载赋值/减量运算符 (-=) 以便代码

```
object -= int 
```

按 rhs 上的值递减`object.life`类成员。这是我的代码：

```
const Object& Object::operator -= (const Object& obj)
{ 
    if (life == obj.life)`
    {   
        this->life -= obj.life;
        return *this;
    }
} 
```

我如何在我的主要实现这一点？

```
int main()
{ 
    Object o1;
    o1 -= 5; //DOESN'T WORK
} 
```

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T17:14:33.677

当您从一个对象中减去一个对象时，您会重载这种情况，但您展示的示例是减去一个整数。我想重载接受整数的运算符：

```
const Object& Object::operator-= (int x); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T17:14:41.857

重载应该采取`int`，而不是`Object`：

```
Object& Object::operator -= (int amount); 
```

或者，或者，**如果有意义**，您可以编写一个构造函数，该构造函数采用一个`int`来允许从类型到类型的*隐式*转换。该参数应用于初始化.`int``Object``life`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:15:24.677

你可以尝试使用这个：-

```
const Object& Object::operator-= (int x) 
```

因为过载应该采取`int`

# ravendb - 在 RavenDB 工作室查询时是否可以排序结果？

> ID：13589416
> 
> 赞同：1
> 
> 时间：2012-11-27T17:12:14.260
> 
> 标签：ravendb, ravendb-studio

有时，我只是在 RavenDB 工作室中查看数据，通常是按索引，我想知道是否有办法指定排序选项？

例如，如果我有这样的简单索引：

```
from doc in docs.Pages
select new
{
    Query = new[] { page.Text, page.Views },
    page,
    Views = page.Views
} 
```

如果我想查看`stackoverflow`按最多视图排序的文本中的所有页面，我将如何在 RavenDB Studio 中查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T18:59:15.653

当您执行查询时，有一个“添加排序依据”按钮。单击它，您将获得可用于排序的索引值的下拉列表。

在 RavenDB 2.0 中，它看起来像这样：

![在此处输入图像描述](../Images/049cd1fa0b10d32f2f1cf7edae753ea9.png)

如果您仍在使用 RavenDB 1.0，它看起来有点不同：

![在此处输入图像描述](../Images/598418a56ebe1b112a9ea32c8498e6ca.png)

# python - 在 Django Admin 中停用不必要的属性

> ID：13589417
> 
> 赞同：0
> 
> 时间：2012-11-27T17:12:14.930
> 
> 标签：python, django

我们的动物模型具有三个属性：

1.  狗名
2.  猫名
3.  猴子名字

其中一个必须填写（不再有！动物是狗、猫或猴子），如果我设置例如 cat_name，我希望停用 dog_name 和 monkey_name（用户不应设置多个名称）。

**是否可以在 django admin 中设置它？** 这个例子可能很愚蠢，但我试图解释我的意图 - 停用不必要的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:29:21.453

如果可能的话，我会尽量避免涉及冗余字段的数据库模式。考虑一个单独的“动物类型”表，在你的动物表中有一个 fkey。

所以：

动物类型：

```
id       type_name
1        cat
2        dog
3        monkey 
```

动物：

```
id       name          type
1        kitty         1
2        fido          2
3        rover         2
4        mr banannas   3 
```

等等，从长远来看会为您减轻痛苦

编辑：要在下面回答您的进一步评论，您可以尝试覆盖模型的 clean() 函数，所以

```
class YourModel(models.Model):
    first_property = models.FileField()
    second_property = models.ImageField()

    def clean(self)
        from django.core.exceptions import ValidationError
        if self.first_property.name not in ['', None] and \
           self.second_property.name not in ['', None]:
            raise ValidationError('Cannot have a first_property and a second_property!.') 
```

每当您尝试保存模型时，这将引发错误消息，尽管它不会阻止他们在表单中实际输入这两个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:33:07.227

假设您知道您想要什么，您可以创建[模型代理](https://docs.djangoproject.com/en/1.4/topics/db/models/#proxy-models)，向 Django 管理员注册它们并使用`exclude`,`fields`或`fieldsets`管理员模型中的属性停用不必要的字段。

```
# models.py

class Animal(models.Model):
    dog_name = models.CharField()
    cat_name = models.CharField()
    monkey_name = models.CharField()

class Dog(models.Model):
    class Meta:
        proxy = True

class Cat(models.Model):
    class Meta:
        proxy = True

class Monkey(models.Model):
    class Meta:
        proxy = True

# admin.py

class DogAdmin(models.Model):
    exclude = ['cat_name', 'monkey_name']

class CatAdmin(models.Model):
    fields = ['cat_name', 'other_field']

class MonkeyAdmin(models.Model):
    exclude = ['cat_name', 'monkey_name']

admin.site.register(Dog, DogAdmin)
admin.site.register(Cat, CatAdmin)
admin.site.register(Monkey, MonkeyAdmin) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T23:19:44.970

如果不同的动物代表存储在数据库中的不同事物，那么您可能只想使用它们自己的表创建单独的模型对象，并使用[GenericForignKeys](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#django.contrib.contenttypes.generic.GenericForeignKey)将它们链接在一起。

这增加了各种复杂性，但 django 更擅长处理常见的事情而不是不寻常的事情，而且看起来你想要存储信息的方式（这实际上是很常见的恕我直言）对于传统的关系数据库来说是困难的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T18:30:09.510

解决此问题的另一种方法是添加 javascript，当您设置一个时禁用“其他”字段。然后，您可以在表单/模型验证中强制执行此操作。

但我应该说，如果它可以应用于您的问题，我认为处理这个问题的最佳方法是 PT114 建议的方式。

# oracle - 如果一列是主键，它是否需要在索引中

> ID：13589419
> 
> 赞同：0
> 
> 时间：2012-11-27T17:12:19.753
> 
> 标签：oracle, oracle10g, indexing

我有一个使用 ENC_ID 作为 PK 的表。该字段也是许多其他表（在这些其他表之一中创建）的 FK（另一个表控制其创建）。

它有两个索引：

1.  IX_00 - DEPT_ID、ARRIVAL_TIME、ENC_ID - 服务 SELECT 查询；WHERE 子句中的 DEPT_ID、ARRIVAL_TIME；JOIN 子句中的 ENC_ID
2.  IX_01 - DEPARTURE_TIME、ENC_ID - 服务 DELETE、INSERT 和 UPDATE 查询；WHERE 子句中的 DEPARTURE_TIME；JOIN 子句中的 ENC_ID

问题：

1.  将 ENC_ID 定义为 PK 是否会自动创建索引？
2.  在任一索引中都有 ENC_ID 字段是否有任何价值？还是应该是第三个索引中的唯一列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:23:23.017

1.  仅当一个索引（唯一或非唯一）不可用时，它才会创建一个索引。即，如果您在（ENC_ID，其他）上说了一个索引，那么添加一个 PK 将只使用该索引而不会创建另一个。

2.  因为您没有在 ENC_ID 上进行过滤并且仅加入然后可能不会加入，就好像您从该表驱动一样，那么过滤列就是您需要索引的内容（根据查询，它可能仍然有好处（例如，如果它可以使用另一个加入索引以在表访问完成之前消除行）。如果您从另一个表中开车，那么它会希望在前沿使用带有 ENC_ID 的索引。我们需要查看 SQL 以提供更明确的回答虽然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:22:47.263

> 将 ENC_ID 定义为 PK 是否会自动创建索引？

是的。PK 始终由唯一索引支持（如果您只是在列上声明 PK 约束）

> 在任一索引中都有 ENC_ID 字段是否有任何价值

它取决于查询，例如索引是否包含 SQL 语句中使用的所有列，那么这确实有好处，因为 Oracle 可以在这种情况下使用索引扫描。如果 SQL 语句使用的列多于索引中定义的列，则添加 PK 列可能没有任何优势。

是否使用索引取决于几件事（查询、表中的行数、索引值的分布......），所以不可能给你一个一般规则“这将始终被使用”或“这永远不会被使用”。

您可能还想阅读概念手册：[http ://docs.oracle.com/cd/E11882_01/server.112/e25789/indexiot.htm#BABHJAJF](http://docs.oracle.com/cd/E11882_01/server.112/e25789/indexiot.htm#BABHJAJF)

# unicode - Erlang inets httpc:request with Unicode

> ID：13589422
> 
> 赞同：1
> 
> 时间：2012-11-27T17:12:30.330
> 
> 标签：unicode, erlang, inets

如果 URL 是 Unicode 字符串，如何使用 httpc:request？

```
get_songs(Findstring) ->
application:start(inets),
application:start(crypto),
application:start(public_key),
application:start(ssl),       
Uf = normalize(Findstring),
Ufs = unicode:characters_to_list(Uf),
Token= "e...2",
Req1="https://api.vk.com/method/audio.search?q="++Ufs++"&access_token="++Token,
case httpc:request(get, {Req1,[]}, [], []) of
{ok, {{_Version, 200, _ReasonPhrase}, _Headers, Body}} ->
    Result = io_lib:format("~ts",[Body]),
    Result;
Resp ->
    Result = io_lib:format("response: ~p ~n", [Resp]),
    Result   
end. 
```

如果我将 Findstring 作为 Latin1 发送，则代码可以正常工作。但是如果 Findstring 是 Unicode，我会得到一个错误。

> 崩溃：
> 初始调用：httpc_handler:init/1
> pid：<0.172.0>
> 注册名称：[]
> 异常错误：
> 函数 iolist_to_binary/1 中的错误参数
> 称为 iolist_to_binary(["GET"," ",
> [47,109,101,116,104,111,100,47,97,117,
> 100,105,111115,115,1115,1115,115,115,115,1115,1151015,1115,1115,1151015,1151015,11510515,115.1115
> _
> _
> _
> 101,50,101,101,52,55,51,48,97,51,101,50,
> 100,102,102,55,54,57,101,101,50,101,102,
> 101,50,101,49,48,53,48,101,98,50,53,97,
> 101, 50,49,51,50,98,98,55,98,100,56,57,
> 101,99,55,56,53,101,99,50],
> " ","HTTP/1.1","\r\n" ,
> "te: \r\nhost: api.vk.com\r\nconnection: keep-alive\r\n",
> "\r\n",[]])

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:31:27.713

您必须对查询字符串参数进行[urlencode ,,,](https://stackoverflow.com/questions/114196/url-encode-in-erlang)

Erlang HTTP(S) 模块不包含那个有用的例程可能看起来很奇怪，但可能与模块排列有关（我不是 Erlang 大师）

# maven - maven, maven-glassfish-plugin, 域创建

> ID：13589426
> 
> 赞同：0
> 
> 时间：2012-11-27T17:12:45.320
> 
> 标签：maven, glassfish

我尝试通过 maven 创建域

```
<plugin>
    <groupId>org.glassfish.maven.plugin</groupId>
    <artifactId>maven-glassfish-plugin</artifactId>
    <version>2.1</version>
    <configuration>
        <glassfishDirectory>${glassfish.home}</glassfishDirectory>
        <user>${glassfish.username}</user>
        <adminPassword>${glassfish.password}</adminPassword>
        <autoCreate>true</autoCreate>
        <debug>true</debug>
        <echo>true</echo>
        <terse>true</terse>
        <domain>
            <name>${project.artifactId}</name>
            <adminPort>4048</adminPort>
            <httpPort>4080</httpPort>
            <httpsPort>4043</httpsPort>
            <iiopPort>4037</iiopPort>
            <reuse>false</reuse>
        </domain>
        <components>
            <component>
                <name>${project.artifactId}</name>
                <artifact>${project.build.directory}/${project.build.finalName}.war</artifact>
            </component>
        </components>
    </configuration>
</plugin> 
```

域已创建但未启动

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building EventLogger
[INFO]    task-segment: [org.glassfish.maven.plugin:maven-glassfish-plugin:2.1:deploy]
[INFO] ------------------------------------------------------------------------
[INFO] [glassfish:deploy {execution: default-cli}]
[INFO] Domain event-logger isn't started. Starting it for you.
[INFO] Domain event-logger does not exist. Creating it for you.
[INFO] CLI031 Warning: Option "profile" is obsolete and will be ignored.
[INFO] asadmin --host localhost --port 4848 --user admin --passwordfile /tmp/mgfp1661748332213879832.tmp --interactive=false --echo=true --terse=true create-domain --adminport 4048 --profile developer --domaindir /home/makaka/glassfish3/glassfish/domains --instanceport 4080 --savemasterpassword=false --usemasterpassword=false --domainproperties http.ssl.port=4043:orb.listener.port=4037 --savelogin=false --nopassword=false --checkports=true event-logger
[INFO] The AS_ADMIN_ADMINPASSWORD option in the password file is deprecated.
[INFO] Use AS_ADMIN_PASSWORD instead.
[INFO] Distinguished Name of the self-signed X.509 Server Certificate is:
[INFO] [CN=ubuntu,OU=GlassFish,O=Oracle Corporation,L=Santa Clara,ST=California,C=US]
[INFO] Distinguished Name of the self-signed X.509 Server Certificate is:
[INFO] [CN=ubuntu-instance,OU=GlassFish,O=Oracle Corporation,L=Santa Clara,ST=California,C=US]
[INFO] No domain initializers found, bypassing customization step
[INFO] Domain event-logger created.
[INFO] Domain event-logger admin port is 4048.
[INFO] Domain event-logger admin user is "admin".
[INFO] asadmin --host localhost --port 4848 --user admin --passwordfile /tmp/mgfp1661748332213879832.tmp --interactive=false --echo=true --terse=true start-domain --verbose=false --upgrade=false --debug=true --_dry-run=false --domaindir /home/makaka/glassfish3/glassfish/domains event-logger
[ERROR] The Master Password is required to start the domain.  No console, no prompting possible.  You should either create the domain with --savemasterpassword=true or provide a password file with the --passwordfile option.
[ERROR] Unable to start domain "event-logger".
[ERROR] For more detail on what might be causing the problem try running maven with the --debug option
[ERROR] or setting the maven-glassfish-plugin "echo" property to "true".
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Unable to start domain "event-logger".
[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 14 seconds
[INFO] Finished at: Tue Nov 27 21:03:48 MSK 2012
[INFO] Final Memory: 4M/74M
[INFO] ------------------------------------------------------------------------ 
```

创建后，我可以手动启动域，但无法登录管理面板 - 密码无效。

如果创建后我手动重置密码 - Maven 仍然无法启动域。但我可以从命令行手动启动域，然后登录到管理面板......

我尝试使用 passwordFile 而不是 adminPassword。没有任何改变...该文件的内容（我手动创建）：

```
AS_ADMIN_MASTERPASSWORD myPass
AS_ADMIN_USERPASSWORD myPass
AS_ADMIN_ALIASPASSWORD myPass 
```

另外我想知道为什么 asadmin 需要主密码 - 它不是用于认证[主密码描述](https://blogs.oracle.com/alexismp/entry/what_is_a_glassfish_master)

有什么想法有什么问题吗？

PS 我使用 ubunutu 12.10，glassfish 3.1.2.2，使用开发者配置文件安装 glassfish

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:37:58.520

我有一个错误的密码文件。它应该包含

```
AS_MASTER_PASSWORD=myPass1
AS_ADMIN_PASSWORD=myPass2
AS_ADMIN_USERPASSWORD=myPass3 
```

# wordpress - Wordpress WP 电子商务插件最大类别数

> ID：13589427
> 
> 赞同：0
> 
> 时间：2012-11-27T17:12:45.327
> 
> 标签：wordpress, wp-list-categories

我正在通过代码动态添加产品类别，这一切都很好（从 xml 文件导入产品），但由于某种原因，当我获得 46 个产品类别时，我无法再自动添加，我找不到任何发生这种情况的原因。

第 47 个类别已添加到数据库中，并且与所有其他类别一样具有所有需要的信息。它只是没有出现在产品类别中，因此也没有出现在网站的菜单中。令人困惑的事情是：

1.  它出现在“外观 > 菜单”列表中，与他的父母有正确的关系
2.  产品类别说它列出了 47 项，但我只能数 46
3.  只有当我删除所有类别时才会出现第 47 个
4.  显示产品类别的查询是正确的

这里发生了什么？谁能给我一些关于我应该在哪里搜索来解决这个问题的线索？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:00:12.807

最后我发现了问题。

首先，该问题与最大类别数或任何种类的类别限制无关。这是一个缓存错误。

在我的具体情况下，我一次添加了 46 个术语，并且该插件创建了一个缓存来保存我的分类中的所有子项。后来当我尝试添加第 47 项时，它实际上是正确添加的，但是由于某种原因缓存从未更新，这就是所有麻烦的原因。

解决方案：通过删除 {$taxonomu}_children 选项清除该缓存。

```
delete_option("{$taxonomy}_children"); 
```

更多关于这个：

[在层次分类法中插入术语](https://wordpress.stackexchange.com/questions/8357/inserting-terms-in-an-hierarchical-taxonomy/8921#8921 "在层次分类法中插入术语")

# c - c alarm() 和 pause() 导致永远暂停

> ID：13589433
> 
> 赞同：3
> 
> 时间：2012-11-27T17:12:54.823
> 
> 标签：c

在下面的程序中，暂停被中断一次，但之后暂停永远不会返回。我已经设置了闹钟来中断暂停，所以我很困惑为什么暂停永远不会返回？

```
#include <setjmp.h>
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <unistd.h>

static void sig_alrm(int);
static jmp_buf env_alrm;

int main(int arc, char **argv)
{

    int x;
    x = setjmp(env_alrm);
    printf("setjmp was created with return value: %d\n", x);

    if(signal(SIGALRM, sig_alrm) == SIG_ERR)
    {
            printf("Error settting SIGALRM\n");
            exit(1);
    }

    if((x!= 0) && (x!=1))
    {

            printf("Error setting setjmp\n");
            exit(1);
    }

    printf("Line next to setjmp\n");
    x = alarm(2);
    printf("Alarm set for 2 seconds, remaning secs from previous alarm: %d\n");
    pause();
    printf("Line next to pause()\n");
    alarm(0);
    return 0;
}

static void sig_alrm(int signo)
{
    longjmp(env_alrm, 1);
} 
```

这是输出，最后一行显示应用程序暂停的位置

```
setjmp was created with return value: 0
Line next to setjmp
Alarm set for 2 seconds, remaining secs from previous alarm: 0
setjmp was created with return value: 1
Line next to setjmp
Alarm set for 2 seconds, remaining secs from previous alarm: 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:30:00.183

使用`sigsetjmp()`and`siglongjmp()`来保存和恢复 Linux 默认情况下不保存的信号掩码，以清除来自 man [setjmp()](http://linux.die.net/man/3/setjmp)的任何未决信号：

> POSIX 没有指定 setjmp() 是否会保存信号掩码。在 System V 中不会。默认情况下，Linux/glibc 遵循 System V 的行为。**如果要便携式保存和恢复信号掩码，请使用 sigsetjmp() 和 siglongjmp()**。

注意：我不确定您要完成什么，但您的代码看起来应该在无限循环中运行，调用`longjmp()`恢复执行就好像它刚刚返回`setjmp()`并永远继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:27:04.830

根据[http://linux.die.net/man/2/pause](http://linux.die.net/man/2/pause)：

> pause() 仅在捕获信号并且**信号捕获函数返回时返回**。

在您的情况下，它永远不会返回，它会`longjmp`退出。

# c++ - Mangle dll 使用 DEF 文件导出名称

> ID：13589435
> 
> 赞同：3
> 
> 时间：2012-11-27T17:13:05.930
> 
> 标签：c++, dll, hyperlink, function

我正在尝试创建一个代理 dll 并遇到了这个问题。假设我有以下文件：

一个.cpp：

```
extern "C" int __declspec(dllexport) func(int x) {return x;} 
```

a.定义：

```
EXPORTS
func
??4Test@@QAEAAU0@ABU0@@Z = func 
```

然后我运行：

```
cl /c c.cpp
link /RELEASE /DLL /DEF:c.def /OUT:c.dll c.obj 
```

输出`dumpbin /exports c.dll`显示以下符号已导出： func ??4Test

“测试”导出名称的其余部分在哪里？有什么办法可以找回来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:31:25.177

试一试，而不使用 DEF 文件：

> extern "C" __declspec(dllexport) int __cdecl func(int x) {return x;}

现在它根本不应该破坏函数名称。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-20T20:51:17.533

我想到了一个想法：使用与“@”不同的占位符（例如“^”）导出符号，然后通过将 DLL 视为 PE 文件并在磁盘上重写导出表条目来重写导出表。

# asp.net - 将 ASP.Net GridView HTML 转换为字符串

> ID：13589440
> 
> 赞同：2
> 
> 时间：2012-11-27T17:13:23.867
> 
> 标签：asp.net, vb.net, stringbuilder, string-conversion, rendercontrol

我们正在尝试从 GridView 中获取 HTML 并将其存储到 String 中，以便字符串可以用作电子邮件的正文。

到目前为止，我们已经在代码隐藏中使用了这种编码：

```
Protected Sub EmailStudentList()

    ' Get the rendered HTML.
    '-----------------------
    Dim SB As New StringBuilder()
    Dim SW As New StringWriter(SB)
    Dim htmlTW As New HtmlTextWriter(SW)

    GridViewSummary.RenderControl(htmlTW)

    ' Get the HTML into a string.
    ' This will be used in the body of the email report.
    '---------------------------------------------------
    Dim dataGridHTML As String = SB.ToString()

    MsgBox(Server.HtmlEncode(dataGridHTML))
End Sub 
```

当应用程序运行时，会显示此错误：

```
Control 'BodyPlaceholder_GridViewSummary' of type 'GridView' must be placed 
inside a form tag with runat=server. 
```

所以我在标记中的这个位置放置了一个表单标签：

```
<asp:Content
    ID="ContentBody"
    ContentPlaceHolderID="BodyPlaceholder"
    runat="server">

<form runat="server"> 
```

现在我们得到这个错误：

```
A page can have only one server-side Form tag. 
```

标记中的其他任何地方都没有其他表单标签。

这是 GridView 的标记：

```
<asp:GridView 
    ID="GridViewSummary" 
    runat="server" 
    AllowPaging="True" 
    AllowSorting="True" 
    AutoGenerateColumns="False">

    <Columns>
        <asp:BoundField DataField="Surname" HeaderText="Last Name" SortExpression="Surname" />
        <asp:BoundField DataField="Forename" HeaderText="First Name" SortExpression="Forename" />
        <asp:BoundField DataField="ParentName" HeaderText="Parents" SortExpression="ParentName" />
    </Columns>

</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T18:00:04.427

在您的页面中添加以下子，然后重试：

```
Public Overrides Sub VerifyRenderingInServerForm(control As Control)
    Return
End Sub 
```

编辑：

要关闭事件验证，只需将 EnableEventValidation="False" 添加到您的 aspx 页面指令中。例如

```
<%@ Page EnableEventValidation="False" %> 
```

# macos - 沙盒 mac osx 应用程序

> ID：13589441
> 
> 赞同：1
> 
> 时间：2012-11-27T17:13:28.420
> 
> 标签：macos, sandbox

我开发了一个不使用沙箱的 mac 应用程序。现在我想把它发送到mac appSore，我买了我的证书，一切都很好。我读到这个：[Apple doc](https://developer.apple.com/library/mac/#documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/EnablingAppSandbox.html#//apple_ref/doc/uid/TP40011195-CH4)并在 xcode 中我将`user selected file`, `music folder`... 设置为`read/write access`. 我的应用程序让用户从文件夹中选择任何类型的文件，进行一些处理并让用户选择保存新文件的位置。要选择文件，用户可以打开带有`NSOpenPanel`或带有`open with`功能的文件夹或拖放文件。

该应用程序还可以删除文件。

我不知道是否还有其他事情可以对应用程序进行沙盒处理（或测试它是否被沙盒处理的工具）我来自 ios 这就是我问的原因:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:24:40.257

您可以在应用程序运行时查看控制台，以查看 sandboxd 或 pboxd 是否记录了与您的应用程序相关的消息。

格式为：`sandboxd[53037] ([53035]): AppName(53035)`

我不知道是否有其他进程可能会记录沙盒违规，但如果它们指的是您的应用程序，您可以看到它们。

# wpf - WPF ItemsControl 分组

> ID：13589445
> 
> 赞同：1
> 
> 时间：2012-11-27T17:13:41.443
> 
> 标签：wpf, grouping, itemscontrol

视图类具有、`ID`和`Link`属性。一些数据从 SQL Server 获取并在视图类中处理，以将它们分成, , . 通过这个过程，我有这样的数据：`Name``Prop``ObservableCollection``ID``Name``Prop``ObservableCollection`

```
2011 xxx item with property yyy
2012 xxx item with property yyy
2013 xxx item with property yyy
2014 zzz item with property zzz
2015 zzz item with property zzz 
```

2011, 2012, 2013, ... 是`ID`带有超链接的 s，xxx 和 zzz 是`Names`, yyy 和 zzz `Props`。

我不知道它是分组还是其他，但我想这样显示这些数据`ItemsControl`：

```
2011, 2012, 2013 xxx item with property yyy
2014, 2015 zzz item with property zzz 
```

我怎么能做这样的事情？感谢您的回答。

# c# - 从 Windows Phone 8 共享

> ID：13589448
> 
> 赞同：9
> 
> 时间：2012-11-27T17:13:46.460
> 
> 标签：c#, windows-phone, sharing, windows-phone-8

我正在开发**Windows Phone 8**应用程序并尝试通过 DataTransferManager 共享内容。Windows API 文档说它在 Windows Phone 中受支持，但是当`DataTransferManager.GetForCurrentView()`调用该函数时出现异常

```
System.NotSupportedException was unhandled by user code
  HResult=-2146233067
  Message=Specified method is not supported.
  Source=Windows
  InnerException: 
```

我一直在寻找答案，找不到其他人有同样的问题，任何帮助将不胜感激。此主题的所有示例似乎都是特定于 Windows 8 的，但 Phone 8 确实包含这些功能。这是我的应用程序中的示例代码。

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        DataTransferManager dataTransferManager = DataTransferManager.GetForCurrentView();
        dataTransferManager.DataRequested += new TypedEventHandler<DataTransferManager, DataRequestedEventArgs>(dataTransferManager_DataRequested);
    }

    private void dataTransferManager_DataRequested(DataTransferManager sender, DataRequestedEventArgs e)
    {
        DataPackage requestData = e.Request.Data;
        requestData.Properties.Title = "Share Text Example";
        requestData.Properties.Description = "An example of how to share text.";
        requestData.SetText("Hello World!");
    }

    private void Button_Tap_1(object sender, System.Windows.Input.GestureEventArgs e)
    {
        DataTransferManager.ShowShareUI();
    } 
```

同样，当页面加载到`DataTransferManager.GetForCurrentView();`函数上时会显示异常，因此它不会到达其他行，但无论如何都会包含它们。我已经尝试添加/删除权限和程序集，但一定缺少一些东西。我还尝试将函数放在不同的事件中（例如 onTap 函数），结果相同。

**如果有人有兴趣自己尝试，这里有一些文档：**

[数据传输管理器](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.applicationmodel.datatransfer.datatransfermanager.aspx)

[数据请求](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.datatransfer.datatransfermanager.datarequested.aspx)

[数据包](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.datatransfer.datapackage)

[获取当前视图（）](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.datatransfer.datatransfermanager.getforcurrentview)

**更新**

尽管考虑到这个问题的上下文，它可能不是最好的解决方案，但我正在执行如下所述的电子邮件/短信/链接任务，而不是使用 DataTransferManager。似乎 DataTransferManager 在 WP8 中可能无法访问，尽管这些任务将采用许多不同的功能，但它们似乎是执行预期功能的最佳方式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T14:37:28.283

我想我已经找到了我在 Launchers 中寻找的大部分内容……而不仅仅是使用 Windows 8 的一般共享功能，我还可以使用 Tasks/Launchers。

不幸的是，它没有魅力那么多的共享选项，我将为电子邮件/短信/社交实现几个功能，但到目前为止这是最好的解决方案。

这是我将要实现的功能

```
 private void ShareLink(object sender, System.Windows.Input.GestureEventArgs e)
    {
        ShareLinkTask shareLinkTask = new ShareLinkTask()
            {
                Title = "Code Samples",
                LinkUri = new Uri("http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff431744(v=vs.92).aspx", UriKind.Absolute),
                Message = "Here are some great code samples for Windows Phone."
            };

        shareLinkTask.Show();
    }

    private void ShareEmail(object sender, System.Windows.Input.GestureEventArgs e)
    {
        EmailComposeTask emailComposeTask = new EmailComposeTask()
            {
                Subject = "message subject",
                Body = "message body",
                To = "recipient@example.com",
                Cc = "cc@example.com",
                Bcc = "bcc@example.com"
            };

        emailComposeTask.Show();
    }

    private void ShareSMS(object sender, System.Windows.Input.GestureEventArgs e)
    {
        SmsComposeTask smsComposeTask = new SmsComposeTask()
            {
                Body = "Try this new application. It's great!"
            };

        smsComposeTask.Show();
    } 
```

参考：

[Windows Phone 启动器](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769550%28v=vs.105%29.aspx)

[分享链接任务](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394009%28v=vs.105%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T01:15:49.300

根据我的 API 参考，`DataTransferManager`仅保留给本机应用程序。[Windows Phone API 快速入门](http://cmsresources.windowsphone.com/devcenter/en-us/downloads/064028-microsoft-poster.pdf)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T21:16:39.980

您是否尝试过使用完全限定的方法？它会是这样的：

```
DataTransferManager dataTransferManager = indows.ApplicationModel.DataTransfer.DataTransferManager.getForCurrentView(); 
```

此外，请确保您的目标是 Windows Phone 8。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T01:57:30.467

WP8 不支持 Windows 8 共享合同。WP8 上什至没有分享魅力。为什么要尝试使用 DataTransferManager？

大多数用例无需使用共享合同，而是可以与 WP8 [app2app 自定义协议和文件扩展名](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987%28v=vs.105%29.aspx)一起正常工作。使用 WP8 应用程序，您可以跨应用程序传输文件和数据。尽管共享合约的标准化合约已经消失，但应用程序可以使用自定义协议和文件扩展名创建自己的合约。

例如，您可以在此处了解有关[诺基亚音乐自定义协议](http://channel9.msdn.com/Events/Build/2012/2-031)的真实第 3 方实施的更多信息。

# ruby - 如何在 sinatra 中引发自定义错误代码？

> ID：13589450
> 
> 赞同：27
> 
> 时间：2012-11-27T17:13:52.763
> 
> 标签：ruby, error-handling, sinatra

我在我的 sinatra 应用程序中执行了以下操作：

```
disable :show_exceptions
disable :raise_errors

error do
  haml :error, :locals => {:error_message => request.env['sinatra.error'].to_s}
end

get '/error' do
  raise "ERROR!!"
end 
```

如果我访问`/error`，我会得到一个`500 - Internal Server Error`响应代码，这是上帝和想要的。但是如何将代码更改为例如 404 或 501？

**答案：**

```
disable :show_exceptions
disable :raise_errors

get '/error' do
  halt(404,haml(:error, :locals => {:error_message => request.env['sinatra.error'].to_s}))
end 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-29T04:12:48.047

就像`raise 404`会引发错误一样`raise ZeroDivisionError`，这会导致您的应用程序抛出 500 内部服务器错误。返回特定错误的最简单方法是使用`status`

```
get '/raise404' do
    status 404
end 
```

您还可以添加自定义响应正文`body`

```
get '/raise403' do
    status 403
    body 'This is a 403 error'
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-10T14:01:52.313

我在块中使用它

```
如果'条件'然后
   做一点事
别的
   停止 500 ，“错误消息”
结尾
#只有没有错误
erb :my_template

```

如果出现错误，我的日志就像这样
HTTP/1.1" 500 13 0.1000

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T17:27:06.930

而不是`raise "ERROR!!"`，尝试在状态码之后只做`error 404`或`error 501`使用可选的状态消息。

更新：例如，如果您定义错误处理程序 `error 400..501 do...`，则可以`error 501 "ERROR!!"`在您的`"/error"`路线中使用。这也会把你的“错误！！” 中的消息 `env['sinatra.error'].message`。

# ruby - 在 Ruby 中查找多个正则表达式匹配的模式和位置

> ID：13589460
> 
> 赞同：5
> 
> 时间：2012-11-27T17:14:12.340
> 
> 标签：ruby, regex

这应该是一个简单的问题，但我找不到任何关于它的信息。

给定 Ruby 中的正则表达式，对于每个匹配项，我都需要检索匹配的模式`$1`, `$2`，但我还需要匹配位置。

我知道`=~`操作员给了我第一个匹配的位置，同时`string.scan(/regex/)`给了我所有匹配的模式。如果可能的话，我需要在同一步骤中获得两个结果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T17:20:10.373

[匹配数据](http://www.ruby-doc.org/core-1.9.3/MatchData.html)

```
string.scan(regex) do
  $1           # Pattern at first position
  $2           # Pattern at second position
  $~.offset(1) # Starting and ending position of $1
  $~.offset(2) # Starting and ending position of $2
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:26:01.593

您可以像这样在扫描中访问匹配数据：

```
"abcdefghij".scan(/\w/) {p $~} 
```

# php - PHP 查询脚本 - 查询前检查空变量

> ID：13589462
> 
> 赞同：0
> 
> 时间：2012-11-27T17:14:15.590
> 
> 标签：php, database

我有 php 脚本，它从 JavaScript 搜索表单接收许多变量。问题是其中一些变量可能是空的，所以我必须在查询之前检查每个变量。例如：用户可以输入学生的姓名和身份证并将性别字段留空，那么我应该如何编写查询？我读过我可能需要使用 append 但我不知道该怎么做。还有其他更好的主意吗？

**一段脚本：**

```
$name = ($_GET['name']); 
$id = ($_GET['id']);
$gender = ($_GET['gender']);

 (!$con) {
    throw new Exception("Error in connection to DB");
     }

   $query ="SELECT grade FROM students  WHERE name ILIKE '%$name%' ";
   $result = pg_query($query); 
```

**编辑**

好吧，如果我使用空函数和 isset 函数，那么我必须检查每个变量并编写新查询？检查后如何更新原始查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:17:32.263

使用 PHP，您可以`empty`这样使用`isset`：

```
if (!isset($_GET['name']) || empty($_GET['name'])) {
  // Error detection, this field isn't available
} 
```

请注意，`isset`在此示例中实际上是多余的，`empty`如果未设置将返回 false。

可以在[此处](http://php.net/manual/en/function.empty.php)和[此处找到文档](http://php.net/manual/en/function.isset.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:17:04.893

**空的 （ ）**

判断一个变量是否为空：

[http://php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)

**伊塞特 ( )**

确定变量是否已设置且不为 NULL ：

[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:17:58.997

您可以像这样检查变量内容：

```
if (!empty($_GET['name'])) {
    // make your query
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T17:33:55.817

创造性思考。

```
<?php
$first = TRUE;
$var_names = array('name', 'age', 'gender');

$query = "SELECT * FROM table WHERE"

foreach( $_GET as $key => $value ) {
    if( in_array($key, $var_names) && !empty($_GET[$key]) ) {
        if( $first ) {
            $query .= sprintf(" %s = '%s'", $key, $value);
            $first = FALSE;
        } else {
            $query .= sprintf(" AND %s = '%s'", $key, $value);
        }
    }
}
if( $first ) { die('no parameters given, query will error out.'); }
echo $query; 
```

这对于 SQL 注入也是非常不安全的，但我不打算在这里实现参数化查询。

# javascript - 查找字符串中某个字符的所有出现的索引

> ID：13589463
> 
> 赞同：1
> 
> 时间：2012-11-27T17:14:16.897
> 
> 标签：javascript, jquery

如何查找字符串中所有出现的字符。例如，字符串是：“Hello world”，用户现在想要找到存在“L”的字符串的索引。在示例 2,3 和 9 中。如何在 java-script/jquery 中找到这样的索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:16:39.153

例如，如果您想找到所有 b，然后将它们写入文档 -

```
var foo = "foo bar baz bat";

var pos = foo.indexOf("b");
while(pos > -1) {
    document.write(pos + "<br />");
    pos = foo.indexOf("b", pos+1);
} 
```

输出：

```
4
8
12 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:16:51.180

这是一些伪代码。这就是您在尝试开始编码之前应该如何尝试解决问题的逻辑。

```
var indeces = {};

for(each character in string)
   if(character == characterImLookingFor)
       indeces.add(currentIndex);

return indeces; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T17:19:58.637

您可以从此[答案](https://stackoverflow.com/a/3410557/712603)尝试以下代码：

```
function getIndicesOf(searchStr, str, caseSensitive) {
    var startIndex = 0, searchStrLen = searchStr.length;
    var index, indices = [];
    if (!caseSensitive) {
        str = str.toLowerCase();
        searchStr = searchStr.toLowerCase();
    }
    while ((index = str.indexOf(searchStr, startIndex)) > -1) {
        indices.push(index);
        startIndex = index + searchStrLen;
    }
    return indices;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T17:27:37.053

```
function getIndexes(str,char) {
    var index = str.indexOf(char);
    var indexes = [];

    while(index != -1) {
        indexes.push(index);
        index = str.indexOf(char,index+1);
    }

    return indexes;
} 
```

用法：

```
getIndexes("Hello world","l"); // returns [2,3,9] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T17:24:37.667

您还可以使用正则表达式来实现这一点：

```
var str = "Give me indexes of i in this string";
var regex = /i/gi, result;
while ((result = regex.exec(str)) ) {
    console.log(result.index);
}

//Output: 1, 8, 19, 21, 26, 32 
```

[演示](http://jsfiddle.net/Xqp8p/)

# java - 匹配的通配符是严格的，但找不到元素 'context:component-scan 的声明

> ID：13589470
> 
> 赞同：75
> 
> 时间：2012-11-27T17:14:32.777
> 
> 标签：java, spring

在尝试我的第一个春季项目时出现以下错误：

```
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'context:component-scan 
```

这是`applicationContext.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

        <context:component-scan base-package="com.xyz" />

</beans> 
```

是什么导致了错误？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-11-27T17:21:57.277

您尚未指定上下文命名空间的架构位置，这就是此特定错误的原因：

```
<beans .....
  xmlns:context="http://www.springframework.org/schema/context"
  xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
    http://www.springframework.org/schema/aop
    http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd"> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-16T05:46:33.417

我遇到了问题

```
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'security:http' 
```

对我来说，我必须将 spring-security-config jar 添加到类路径中

[http://docs.spring.io/spring-security/site/docs/3.1.x/reference/ns-config.html](http://docs.spring.io/spring-security/site/docs/3.1.x/reference/ns-config.html)

编辑：

可能是您在 pom.xml 中有正确的依赖关系。

但...

如果您使用多个 spring 依赖项并组装到一个 jar 中，那么`META-INF/spring.schemas`可能会被`spring.schemas`另一个 spring 依赖项覆盖。

（从您组装的 jar 中提取该文件，您就会明白）

Spring 模式只是一堆看起来像这样的行：

```
http\://www.springframework.org/schema/p=org.springframework.beans.factory.xml.SimplePropertyNamespaceHandler
http\://www.springframework.org/schema/beans/spring-beans-3.0.xsd=org/springframework/beans/factory/xml/spring-beans-3.0.xsd 
```

但是，如果另一个依赖项覆盖了该文件，则将从 http 检索定义，如果您有防火墙/代理，它将无法获取它。

一种解决方案是将 spring.schemas 和 spring.handlers 附加到一个文件中。

查看：

[避免在单个 jar 中合并多个 spring 依赖项时覆盖 spring.handlers/spring.schemas 的想法](https://stackoverflow.com/questions/5586515/idea-to-avoid-that-spring-handlers-spring-schemas-get-overwritten-when-merging-m)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-02-08T08:39:13.303

这个模式位置的路径是错误的：

```
http://www.springframework.org/schema/beans 
```

正确的路径应该以`/`：

```
http://www.springframework.org/schema/beans/ 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-04T03:07:22.930

如果包含所需 XSD 的 jar 文件未包含在已部署的类路径中，也会导致此错误。

确保依赖项在您的容器中可用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-14T12:18:05.497

如果使用[STS](http://spring.io/tools/sts)，您可以在 Eclipse 中将配置文件标记为“Bean Configuration”文件（您可以在创建或右键单击 XML 文件时指定）：

[![Spring 工具 > 添加为 Bean 配置](../Images/13624801935d631e697e3c35289afcb2.png)](https://i.stack.imgur.com/JC0oL.png)

您的项目必须具有 Spring Nature（例如，右键单击 maven 项目）：

[![Spring 工具 > 添加 Spring 项目性质](../Images/d1518899d14d87414b5be2bdd493ceb8.png)](https://i.stack.imgur.com/UNubM.png)

然后`spring.xml`默认使用 Spring Config Editor 打开

[![打开方式 > Spring 配置编辑器](../Images/36011c508ddc26542ddbc33779bac501.png)](https://i.stack.imgur.com/5vVL0.png)

这个编辑器有命名空间选项卡

[![Spring Config Editor - 命名空间选项卡](../Images/94fabee513ec51e83c4895f9613908d6.png)](https://i.stack.imgur.com/OnFUV.png)

这使您能够指定命名空间：

[![Spring 配置编辑器 - 命名空间示例](../Images/116cb65c9e04681f4894b958ed58111a.png)](https://i.stack.imgur.com/BFUSD.png)

请注意，它依赖于依赖项（使用 maven 项目），因此如果`spring-tx`未在 maven 的 pom.xml 中定义，则选项不存在，这会阻止您拥有[匹配的通配符是严格的，但找不到元素的声明'tx:annotation-driven' 'context:component-scan'](https://stackoverflow.com/questions/34779551/the-matching-wildcard-is-strict-but-no-declaration-can-be-found-for-element-tx/34789179#34789179)问题...

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-07-04T05:19:43.700

为时已晚，但对其他人可能有用

> 匹配的通配符是严格的，但找不到元素 'context:component-scan 的声明

这意味着您**错过了一些声明**或在您的 XML 中**找不到所需的声明**

就我而言，我忘了添加以下内容

*   [http://www.springframework.org/schema/aop](http://www.springframework.org/schema/aop)

*   [http://www.springframework.org/schema/aop/spring-aop-4.0.xsd](http://www.springframework.org/schema/aop/spring-aop-4.0.xsd)

*   [http://www.springframework.org/schema/tx](http://www.springframework.org/schema/tx)

*   [http://www.springframework.org/schema/tx/spring-tx-4.0.xsd](http://www.springframework.org/schema/tx/spring-tx-4.0.xsd)

添加后问题消失了

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd"> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-12-15T08:07:10.947

当您第一次在 xml 中添加 context:component-scan 时，需要添加以下内容。

```
xmlns:context="http://www.springframework.org/schema/context"

xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-05-14T22:46:51.417

正确的路径不应该以“/”结尾，我弄错了导致麻烦

正确的方法：

[http://www.springframework.org/schema/context](http://www.springframework.org/schema/context) [http://www.springframework.org/schema/context/spring-context.xsd](http://www.springframework.org/schema/context/spring-context.xsd)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-08-08T09:33:41.723

通过命名空间声明和模式位置，您还可以检查命名空间使用的语法，例如：-

```
<beans xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation= http://www.springframework.org/`enter code here`schema/context
        http://www.springframework.org/schema/context/spring-context.xsd">

<context:annotation-driven/>   <!-- This is wrong -->
<context:annotation-config/> <!-- This should work --> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-01-26T06:56:40.547

添加带有 http 的 xmlns 上下文，如下所示

`xmlns:context="http://www.springframework.org/schema/context"`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-03-13T07:08:48.893

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-3.0.xsd"> 
```

*以上链接需要包含*

```
 <context:property-placeholder location="classpath:sport.properties" />

    <bean id="myFortune" class="com.kiran.springdemo.HappyFortuneService"></bean>

    <bean id="myCoach" class="com.kiran.springdemo.setterinjection.MyCricketCoach">
        <property name="fortuner" ref="myFortune" />

        <property name="emailAddress" value="${ipl.email}" />
        <property name="team" value="${ipl.team}" />

    </bean>

</beans> 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-03-26T16:55:15.317

添加这两个架构位置。这已经足够且高效，而不是添加所有不必要的架构

```
 http://www.springframework.org/schema/context
 http://www.springframework.org/schema/context/spring-context.xsd 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-04-28T21:45:39.253

在各种 Spring jar 中有“META-INF/spring.schemas”文件，其中包含为本地解析而截获的 URL 的映射。如果这些文件中没有列出特定的 xsd URL（例如从 http 切换到 https 之后），Spring 会尝试从 Internet 加载模式，并且如果系统没有 Internet 连接，它会失败并导致此错误。

这可能是 Spring Security v5.2 及更高版本的情况，其中 xsd 文件没有 http 映射。

修复它改变

```
xsi:schemaLocation="
    http://www.springframework.org/schema/beans     
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/security  
    http://www.springframework.org/schema/security/spring-security.xsd" 
```

到

```
xsi:schemaLocation="
    http://www.springframework.org/schema/beans     
    https://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/security  
    https://www.springframework.org/schema/security/spring-security.xsd" 
```

请注意，只有实际的 xsd URL 从 http 修改为 https（仅上面两个位置）。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-05-28T08:22:05.500

将*http*更改为标记错误***的****http***或所有以 *.xsd 扩展名结尾的 URL。**

 *** * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-05-24T11:27:16.813

这里有一种可能性没有提到，但我认为它很重要。

通常，当您执行验证时，应该根据`xsi:schemaLocaation`提供的参数来完成，即如果验证器没有在上下文中加载模式，它会尝试从提供的位置卸载它。**但是**，默认情况下，Java 使用的 Xerces 解析器启用一个名为**USE_GRAMMAR_ONLY_POOL_FEATURE** ( *[http://apache.org/xml/features/internal/validation/schema/use-grammar-pool-only](http://apache.org/xml/features/internal/validation/schema/use-grammar-pool-only)* ) 的标志，该标志禁用任何模式卸载. 因此，如果您没有在验证器的语法池中预加载模式，您将遇到该消息。

使问题进一步复杂化的是，无法直接在验证器中启用该功能。您必须在更广泛的模式工厂范围内启用它：

```
SchemaFactory sf = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
try {
    sf.setFeature(Constants.XERCES_FEATURE_PREFIX + Constants.USE_GRAMMAR_POOL_ONLY_FEATURE, false);
    ...
} 
```**

# javascript - JQuery Toggle 在 URL 后添加 #，e.preventDefault(); 不工作

> ID：13589475
> 
> 赞同：0
> 
> 时间：2012-11-27T17:14:41.677
> 
> 标签：javascript, jquery

在 IE 上遇到问题，在单击切换按钮后，将 # 添加到 URL 的末尾。（即 website.com/direc/main.html* *#* *

这将禁用所有切换功能。无法在 FireFox 上复制该问题。我有一个 e.preventDefault(); 在每个功能中，但我无法通过将 e.prevent 放在不同的位置来解决此问题。

下面的代码：

```
 $(document).ready(function(){
      $("#1_EH").click(function(e){ 
        $("#1_S").slideToggle("slow");
e.preventDefault(); 
        }); 
    });
    $(document).ready(function(){
      $("#2_EH").click(function(e){ 
        $("#2_S").slideToggle("slow"); 
        e.preventDefault(); 
        }); 
     });

<a href="#" id="1_EH"><img src="pic.jpg" border="0" alt="" /></a>
<div class="client_box" id="1_S">
    <h2>text</h2>
    <p>text<a href="http://www.url.com" target="_blank">Directions &raquo;</a></p>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:21:41.330

ID不能以数字开头；结果是未定义的，并且（可能）在 Internet Explorer 中被破坏。修复您的 ID 属性 ( `1_EH`/ `1_S`/etc) 以字母而不是数字开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:21:32.550

e.preventDefault() 应该是函数(e) 之后的第一行：

```
 $("#2_EH").click(function(e){ 
            e.preventDefault(); 
    ...stuff to be done...
    }); 
```

此处修复的示例代码：http: [//jsbin.com/welcome/54005/](http://jsbin.com/welcome/54005/)

**但是，不删除，请注意，从正确答案的海报中，这个答案实际上是不正确的，应该被忽略。**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-27T17:18:38.250

尝试从链接中的 href 中删除哈希标签。

# wordpress - 管理员在wordpress中添加帖子时如何在appspot中发布数据

> ID：13589479
> 
> 赞同：0
> 
> 时间：2012-11-27T17:14:54.820
> 
> 标签：wordpress, google-app-engine

我是wordpress的新手。我有一个 wordpress 网站，管理员可以在其中添加帖子。但是当他添加帖子时，还应该向 apppot 提交 GET 方法`http://jhal-muri.appspot.com/sendAll?emailId=emailid&mssg=msg`。

我怎样才能做到这一点？我知道我必须更改 wordpress 管理面板中的 add_post 选项但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:26:41.883

**对于 WordPress**

您可以将表单声明为`POST`. 然后，将您的 URL 字符串构造为`http://jhal-muri.appspot.com/sendAll?emailId=emailid&mssg=msg`where`emailId`和`mssg`参数将自动变为`GET`. 其余的`input`名称和值将变为`POST`.

**示例代码**

```
<form method="post" acion="http://jhal-muri.appspot.com/sendAll?emailId=emailid&mssg=msg">
<input type="text" value="" name="emailId" />
<input type="text" value="" name="msg" />
<input type="submit" name="submit" value="Send All" />
</form> 
```

# asp.net-mvc - Windows 8 上的 Asp.Net MVC 4 Windows 身份验证 IIS 返回域名\机器名而不是用户名

> ID：13589482
> 
> 赞同：1
> 
> 时间：2012-11-27T17:14:57.810
> 
> 标签：asp.net-mvc, windows, iis

我有一个使用 Windows 身份验证在 Windows 8/VS 2012 上运行的 MVC 4 应用程序。它与返回 DOMAINNAME\USERNAME 作为身份的 VS 开发服务器一起工作得很好。但是，在部署到本地 IIS 后，它会返回 DOMAINNAME\MACHINENAME。

我已经检查了 W8 IIS 上的常规内容。我唯一能看到的是虚拟目录上缺少 Windows 窗体身份验证作为选项，但无论如何我都看不到/找不到添加它。

在时间上有点压力，所以确实非常受欢迎！

# asp.net - HMAC 和 WCF 服务 .net

> ID：13589491
> 
> 赞同：2
> 
> 时间：2012-11-27T17:15:12.660
> 
> 标签：asp.net, wcf, wcf-data-services, wcf-security, hmac

所以我对 HMAC 身份验证非常陌生，我真的不知道自己在做什么，也不知道在读 atm。

我一直在尝试正确理解以下文章/链接/讨论：

[如何在 RESTful WCF API 中实现 HMAC 身份验证](https://stackoverflow.com/questions/8363315/how-to-implement-hmac-authentication-in-a-restful-wcf-api)

[http://blogs.microsoft.co.il/blogs/itai/archive/2009/02/22/how-to-implement-hmac-authentication-on-a-restful-wcf-service.aspx](http://blogs.microsoft.co.il/blogs/itai/archive/2009/02/22/how-to-implement-hmac-authentication-on-a-restful-wcf-service.aspx)

[http://buchananweb.co.uk/security01.aspx](http://buchananweb.co.uk/security01.aspx)

话虽如此，我有几个问题：

1.  了解第一个链接，例如，如果我在 .net 中创建了一个 loginAuthentication 服务并将从 iPhone 应用程序访问，我是否为此传递了一个未加密的用户名（消息）并且应该只返回一个真/假，或者它应该返回一个加密的我稍后将在其中用于其他事务（删除、插入服务等）的字符串？

    ```
    [ServiceContract]

    public partial class LoginService
    {

     [OperationContract]
     bool Authenticate(string username) {
       // stuffs
     } 
    ```

    }

2.  话虽如此，在我验证了用户之后，这就是我迷路的地方。我在数据库中保存一些“带有时间戳”的东西会更好吗（有人告诉我这个，我也读过一些关于这个的讨论）？还是我只是将其与加密消息一起返回（取决于第一个问题），以便每次发出请求时都已经附加了时间戳？

    一种。我该怎么处理那个时间戳？

    湾。一旦再次发送消息以进行另一笔交易，是否会使用它？

3.  密钥和秘密消息。我理解的方式是密钥将是用户的密码。因此，如果用户发送他的用户名，我可以使用该用户的密码打开消息吗？如果用户已经有一个会话并且只是请求获取数据或请求删除、插入等，这是有道理的。如果它只是验证用户的用户名和密码，是否仍然是相同的方式？

感谢您的时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:51:01.690

首先我要提到的是 WCF Web Api 是一个 beta 项目，不再被开发。它被 ASP.NET Web API 取代，这是一个用于开发 RESTful 服务的出色框架。

如果您想了解 RESTful 服务和身份验证的工作原理，Netflix API 将是一个很好的起点。他们有很多关于安全部分的文档，这有助于我更多地了解 HMAC。

HMAC 使用密钥创建散列。客户端和服务器都维护一个密钥的副本，以便它们可以生成匹配的哈希值。这使您可以“签署”一个请求，该请求既可用作身份验证（您知道发送它的人就是他们所说的身份）和消息完整性（知道他们发送的消息是原始消息并且没有被篡改）。

签名是通过组合创建的

```
1\. Timestamp (unix epoc is the easiest to send in urls)
2\. Nonce (a random number that can never be used twice to protect against someone re-using it)
3\. Message (for a GET request this would be the URL, a POST would be the whole body)
4\. Signature (the three previous items combined and hashed using the secret key) 
```

上述每一项都可以在请求的查询字符串中发送，然后服务器可以使用前 3 个及其密钥副本重新创建签名。如果签名匹配，那么一切都很好。

在一个基于普通 HTTP 的 RESTful API（不使用基于 ssl 的 HTTPS）中，我会签署每个发送的请求，因为这再次验证并提供消息完整性。否则，如果您只是发送一个身份验证令牌，您知道用户已通过身份验证，但是如果您没有要比较的消息摘要（HMAC 哈希），您怎么知道消息没有被篡改？

实现签名的服务器端检查的一种简单方法是覆盖 System.Web.Http.AuthorizeAttribute 的 OnAuthorization（确保不使用 Mvc autorize 属性）。让它重建签名，就像您在客户端使用他们的密钥一样，如果它不匹配，您可以返回 401。然后您可以使用新的授权属性装饰所有需要身份验证的控制器。

希望这有助于消除您的一些困惑，并且不会进一步混淆水。如果您需要，我稍后可以提供一些更具体的示例。

**参考：**

**Netflix Api Docs： http:** [//developer.netflix.com/docs/Security#0_18325](http://developer.netflix.com/docs/Security#0_18325)（转到关于创建签名的部分，他们还有一个链接显示了用于创建 HMAC 签名的完整 .NET 示例）

**用于创建 HMAC 签名的 .NET 类** [http://oauth.googlecode.com/svn/code/csharp/OAuthBase.cs](http://oauth.googlecode.com/svn/code/csharp/OAuthBase.cs)

**我写的 Netflix API 包装器**：[https ://bitbucket.org/despertar1318/netflix-api/overview](https://bitbucket.org/despertar1318/netflix-api/overview)

**ASP.NET Web API**：[http ://www.asp.net/web-api](http://www.asp.net/web-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:19:29.057

依次看你的问题

*...我是否为此传递了一个未加密的用户名（消息）并且应该只返回一个真/假，还是应该返回一个加密的字符串，我稍后将在其中用于其他事务（删除、插入服务等）？*

如果您只是返回一个布尔值，那么您将无法将身份验证请求与后续请求进行匹配。您需要返回某种身份验证指示符，在经典网站上，这将是会话 cookie，在您的实例中，您希望传递一个充当共享密钥的值。

*我在数据库中保存一些“带有时间戳”的东西会更好吗？还是我只是将其与加密消息一起返回，以便每次发出请求时都已附加时间戳？*

回到会话类比，您希望将问题一的密钥存储在某个地方（数据库？），并带有一个时间戳，该时间戳指示会话的生命周期/密钥的有效性。如果它是永远的，那么我不会打扰时间戳，如果它是其他任何东西，你需要在它到期时说些什么。

*我理解的方式是密钥将是用户的密码。因此，如果用户发送他的用户名，我可以使用该用户的密码打开消息吗？如果用户已经有一个会话并且只是请求获取数据或请求删除、插入等，这是有道理的。如果它只是验证用户的用户名和密码，是否仍然是相同的方式？*

这就是 HMACing 发生的地方。你有你的共享秘密，你有一条消息，这就是我通常将它们组合在一起的方式。

使用所有消息作为要散列的数据主体（这样您就可以确定某人不只是复制了散列和消息的一部分）。使用我们在第一步中共享的密钥对消息正文进行哈希处理。如果需要，你可以加盐，我会使用用户名。

最后确保消息包含时间戳（最好是UTC），这样您可以帮助防止以后重播消息。响应消息的服务可以将时间戳与它认为的时间进行比较。如果超出给定范围，则消息失败。因为时间戳将是 HMAC 的一部分，所以不能只更新日期并重播消息，一旦消息被篡改，哈希值就不会匹配。

# matplotlib - 邮件列表似乎已经死了

> ID：13589497
> 
> 赞同：4
> 
> 时间：2012-11-27T17:15:37.490
> 
> 标签：matplotlib

嗨，我知道 matplotlib 从 sourceforge 迁移到 github 发生了一些变化。

有一件事尚不清楚，恶意列表会发生什么？

sourceforge 中的 matplotlib-users 显示活动直到 7 月 [https://sourceforge.net/mailarchive/forum.php?forum_name=matplotlib-users](https://sourceforge.net/mailarchive/forum.php?forum_name=matplotlib-users) 但检查 nabble 我们可以看到更多最近的活动。 [http://matplotlib.1069221.n5.nabble.com/](http://matplotlib.1069221.n5.nabble.com/)

这有点令人困惑，文档将我们引导回 sourceforge.... 或者我们应该对每个与用户相关的问题、评论等使用 stackoverflow。我猜 github 上的问题是为开发过程而保留的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:36:39.163

感谢您提出这个问题。邮件列表并没有死，尽管您提供的存档链接看起来确实是！[几周前](http://matplotlib.1069221.n5.nabble.com/mailing-list-archive-broken-td39227.html)mpl-user 的邮件列表上有一个类似的问题，我将继续跟进。

干杯，

# svn - 制作 staging SVN 存储库的简单方法是什么

> ID：13589498
> 
> 赞同：0
> 
> 时间：2012-11-27T17:15:38.513
> 
> 标签：svn

我想通过在我的本地机器上为我自己拥有一个单独的 SVN 存储库来模拟“私人签到”。我的想法是我可能想要版本控制的功能，如差异、回滚、提交，但我还没有准备好让整个团队都可以使用变更集。两个主要原因是，一个损坏的构建。我可能想在功能/可共享代码之间标记进度。二，慢速连接上的大型变更集。

我认为这是 TFS 的核心概念，但我无法控制我们使用哪个 VCS。更灵活的是 git 和 Hg 等 DVSC 类型的产品，但我不能再更改系统，我们也不需要完整分布式版本控制系统的高级灵活性。

为了简单起见，我想解决的两个问题是：

1）**回购到回购提交。**如果我现在提交到这个不同的存储库，我需要一种简单的方法来将更改提交到团队的存储库。

2)**更新正确性。**如果我正在更新我的副本以获取来自团队其他成员的所有变更集，我需要它仍然可以将更改拉回我的 privaterepo 的工作副本。

有人做过吗？大多数类似的问题都是用 git 来回答的。我相信这对我的情况来说是矫枉过正的。我可以让我的本地仓库成为我想要的任何东西，但我无法控制团队的服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:27:40.150

可能最简单的方法是将您的更改分支到主 Subversion。

完成后，将分支合并回主干。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:24:57.680

您可能想阅读[http://hginit.com/](http://hginit.com/) ——它讲述了一个关于发现 hg 的 SVN 用户的故事，以及他是如何学习的（艰难的方式），以及他可以用他所学的东西做什么。

在您的情况下，我建议`hg`在您自己的机器上创建您自己的个人存储库，创建本地分支和提交，将整个开发过程保留在内部，并仅在准备好时提交到团队服务器。

hginit 解释了如何在您和您的团队存储库之间设置“中间”存储库，如果他们需要，没有理由说明其中之一可能不是 SVN。

# android - 带有电话号码的 Android 列表视图。想要点击并拨打电话或发送电子邮件

> ID：13589499
> 
> 赞同：0
> 
> 时间：2012-11-27T17:15:40.243
> 
> 标签：android, listview

我制作了一个列表视图，其中有 2 个对象，名称和电话。现在，我想单击列表视图并使用列出的电话号码拨打电话。

我不知道该怎么做。请帮忙。谢谢。

```
import java.util.ArrayList;
import java.util.HashMap;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.ListView;
import android.widget.SimpleAdapter;

public class Express extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            activitylink.getInstance().addActivity(this);

            final String Item_Name = "NAME", Item_Hotline = "HOTLINE";

            ArrayList<HashMap<String,String>> myListData = new ArrayList<HashMap<String,String>>();

            String[] hotlines = new String[]{ "11112222" , "22223333", "44445555" };

            for( int i=0;i<getResources().getStringArray(R.array.item).length ; ++i) {
                    HashMap<String,String> item = new HashMap<String,String>();
                    item.put(Item_Name,getResources().getStringArray(R.array.item)[i]);
                    item.put(Item_Hotline,hotlines[i]);
                    myListData.add(item);
            }

            setListAdapter( new SimpleAdapter(
                    this,
                    myListData,
                    R.layout.list_item,
                    new String[] { Item_Name, Item_Hotline },
                    new int[] { android.R.id.text1, android.R.id.text2 } )
            );
    }
    @Override
    public void onListItemClick(ListView list, View v, int position, long id) {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:53:19.273

试试这个，希望对你有帮助...

```
@Override
public void onListItemClick(ListView list, View v, int position, long id) {
       String hotline = (String) myListData.get((int) id)
                        .values().toArray()[1];

       Log.d("hotline", hotline);
       callHotline(hotline);
    }
}
private void callHotline(String hotlineStr){ 
   Intent callIntent = new Intent(Intent.ACTION_CALL);
   callIntent.setData(Uri.parse("tel:"+hotlineStr));
   startActivity(callIntent);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:13:33.143

@Override public void onListItemClick(ListView list, View v, int position, long id) { String hotline = myListData.get(position);

```
 Intent tocall = new Intent(Intent.ACTION_CALL);
         tocall.setData(Uri.parse("tel:"+hotline ));
          startActivity(tocall);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T19:52:53.567

`OnItemClickListener`：

```
@Override
public void onListItemClick(ListView list, View v, int position, long id) {

    Intent callIntent = new Intent(Intent.ACTION_CALL);
    callIntent.setData(Uri.parse("tel:" + hotlines[position]));
    startActivity(callIntent);

    }
} 
```

# android - 全局存储静态 xml 数据

> ID：13589502
> 
> 赞同：0
> 
> 时间：2012-11-27T17:15:54.927
> 
> 标签：android, xmlpullparser

我有一些静态 xml 数据，我想读取一次并在全局范围内存储。最初我只是将文件从活动读取到地图中，但是，我现在需要访问来自多个活动的数据，所以我想避免从每个活动的文件中读取它。

我正在使用需要上下文的 XmlPullParser。我的问题是我想将它存储到像这样的静态变量中......

```
public static Map<String,String> myXmlData=getXmlData(???); 
```

但我不知道如何以静态方式获取应用程序上下文。

```
public static Map<String, String> getXMLData(Context ctx){
    Map<String, String> data = new HashMap<String, String>();
    XmlPullParser parser = ctx.getResources().getXml(R.xml.mydata );
    ... 
```

}

我尝试从上面的静态方法中删除 ctx 参数并调用 GetApplicationContext() 但编译器不喜欢我试图从静态方法进行调用。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:17:53.383

您应该在您的应用程序上扩展[Application 类](http://developer.android.com/reference/android/app/Application.html)。这是需要初始化的应用范围资源的入口点。

Application.onCreate 将是用户启动应用程序时要执行的应用程序的第一件事。

由于 Application 扩展了上下文，您可以获得初始化应用程序可能需要的任何内容（资源、引用、系统服务等）。

这是一个教程[http://www.helloandroid.com/tutorials/maintaining-global-application-state](http://www.helloandroid.com/tutorials/maintaining-global-application-state)

# php - Facebook PHP SDK - getUser() 突然返回 0

> ID：13589510
> 
> 赞同：8
> 
> 时间：2012-11-27T17:16:27.060
> 
> 标签：php, facebook, facebook-php-sdk, facebook-login

首先，为了解决这个问题，我花了几个小时在 StackOverflow 上查看这个问题的答案，并试图自己解决它，但它只是不起作用（不再）。所以无论如何...

昨天，一切正常。上床睡觉，醒来，在我的 2 个网站上使用 facebook 登录不再起作用。登录链接将我发送到需要我批准该应用程序的 Facebook 页面，但在将我重定向回该站点后，它并没有让我登录。我很快跟踪到 getUser() 始终返回 0 的问题。所以我使用非常非常基本的代码设置一个新的（测试）应用程序，看看它是否有效。它没有。这是代码：

```
<?php

        session_start();

        require_once("facebook.php");

        $config = array();
        $config['appId'] = '199971880127910'; //test app so I don't mind showing these
        $config['secret'] = 'e065588cb1edd96f821de8b3d362c488';
        $config['trustForwarded'] = true;

        $facebook = new Facebook($config);

        try {
            $user = $facebook->getUser();
            var_dump($user);

        } catch (Exception $e) {
            $e->getMessage();
        }

        $loginUrl = $facebook->getLoginUrl(array('redirect_uri' => 'http://gtcrais.redirectme.net/test/'));

        echo "<a href='".$loginUrl."'>Login</a>";
?> 
```

[这里](https://stackoverflow.com/questions/6790272/why-is-facebook-php-sdk-getuser-always-returning-0)的第二个答案引起了我的注意。我尝试了那个解决方案，但它没有用，所以我打开了 base_facebook.php 并滚动到将“代码”传递给某个变量的行 - 第 458 行：

> $code = $this->getCode();

我回应了这个，它正确显示了从 URL 传递的代码参数。有问题的行原来是那一行下面的几行：

> $access_token = $this->getAccessTokenFromCode($code);

此函数在传递 $code 变量时向 $access_token 返回 false 值。在该函数中，这部分代码会引发异常：

```
try {
      // need to circumvent json_decode by calling _oauthRequest
      // directly, since response isn't JSON format.
      $access_token_response =
        $this->_oauthRequest(
          $this->getUrl('graph', '/oauth/access_token'),
          $params = array('client_id' => $this->getAppId(),
                          'client_secret' => $this->getAppSecret(),
                          'redirect_uri' => $redirect_uri,
                          'code' => $code));
    } catch (FacebookApiException $e) {
      // most likely that user very recently revoked authorization.
      // In any event, we don't have an access token, so say so.
      print_r($e);
      return false;
    } 
```

print_r($e) 显示一大堆乱码（我有点菜鸟，所以我几乎无法从中读取任何有意义的内容）。我看到在那里重复的唯一一件事是

> SSL证书问题，验证CA证书是否OK。详细信息：错误：14090086：SSL

这就是我调试它的程度。任何帮助表示赞赏。再次，昨天，一切正常。今天，如果没有更改任何一行代码，它就不再工作了。令人难以置信=（哦，是的，我正在使用 PHP 5.4.3 运行 WAMP

编辑：这是错误消息：http: [//i.imgur.com/TeY8h.png](https://i.imgur.com/TeY8h.png)

EDIT2：已解决：

在 base_facebook.php 中，在 $CURL_OPTS 下添加以下 2 行：

```
CURLOPT_SSL_VERIFYPEER => false,
CURLOPT_SSL_VERIFYHOST => 2 
```

这使它...

```
public static $CURL_OPTS = array(
    CURLOPT_CONNECTTIMEOUT => 10,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_TIMEOUT        => 60,
    CURLOPT_USERAGENT      => 'facebook-php-3.2',
    CURLOPT_SSL_VERIFYPEER => false,
    CURLOPT_SSL_VERIFYHOST => 2
  ); 
```

我不确定这是一个多大的安全问题，但它使使用 Facebook 登录工作，所以你有它（我有它。一整天都在这个，fml）。

**EDIT3：新的 SDK 发布，解决了这个问题：[https ://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T19:50:44.710

在 base_facebook.php 中，在 $CURL_OPTS 下添加以下 2 行：

```
CURLOPT_SSL_VERIFYPEER => false,
CURLOPT_SSL_VERIFYHOST => 2 
```

这使它...

```
public static $CURL_OPTS = array(
    CURLOPT_CONNECTTIMEOUT => 10,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_TIMEOUT        => 60,
    CURLOPT_USERAGENT      => 'facebook-php-3.2',
    CURLOPT_SSL_VERIFYPEER => false,
    CURLOPT_SSL_VERIFYHOST => 2
  ); 
```

我不确定这是一个多大的安全问题，但它使登录 Facebook 工作，所以你有它。

**编辑：发布了解决此问题的新 SDK：[https ://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:55:45.617

我认为您需要在调用任何 facebook 方法之前 setAccessToken()，即使用户已授权您的应用程序并已登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T07:32:29.443

我有同样的问题。**原来我使用的是 localhost**。尽管允许访问对话框出现在 facebook 上并且我被重定向回我的网页，但 getUser 仍然返回零。

> 我的解决方案

一旦我上传了我的代码并***在线测试，就会***出现合理的 facebook 错误，然后必须将我的“App Domains”和“Site Url”更改为我的在线测试网站而不是 localhost 的相关值。然后它起作用了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-03T20:06:25.353

我遇到了这个问题，结果证明这是一个损坏的证书。我想我在 Git 中打开了 autocrlf。我不知道这是否解决了它，但是吹走我的整个回购并从源头重新克隆导致这个问题立即解决！

# xaml - Xaml 错误 - System.Windows.DataTrigger, c#

> ID：13589511
> 
> 赞同：1
> 
> 时间：2012-11-27T17:16:32.367
> 
> 标签：xaml, c#-4.0, datatrigger

我有以下 xaml 代码：

```
<ControlTemplate x:Key="ViewItemTemplate"
                         TargetType="ListViewItem">
        <StackPanel Orientation="Horizontal">
            <CheckBox Margin="0,0,3,0" x:Name="CkBox">
                <CkBox.IsChecked>
                    <Binding Path="IsSelected"
                                 Mode="TwoWay">
                        <Binding.RelativeSource>
                            <RelativeSource Mode="TemplatedParent" />
                        </Binding.RelativeSource>
                    </Binding>
                </CkBox.IsChecked>
                 <DataTrigger Binding="{Binding InvalidForeground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" Value="true">
                    <Setter TargetName="CkBoxVisual" Property="Foreground" Value="#999999"/>
                </DataTrigger>
            </CheckBox>
            <ContentPresenter />
        </StackPanel>
    </ControlTemplate>

Public class Demo
{
  private bool _invalidForeGround;
        public bool InvalidForeground
        {
            get
            { return _invalidForeGround; }
            set
            {
                _invalidForeGround = value;
                Notify("InvalidForeground");
            }
        }
        private void Notify(string propName)
        {
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propName));
        }
        public event PropertyChangedEventHandler PropertyChanged;
} 
```

Xaml.cs 文件：

```
private readonly RangeObservableCollection<SlotInfo> _validDemo;
public ReadOnlyObservableCollection<SlotInfo> DemoChecks
        {
            get { return ( ReadOnlyObservableCollection<SlotInfo> )GetValue( DemoChecksProperty ); }
            set
            {
                SetValue( DemoChecksProperty, value );
                this.CheckInvariants();
            }
        }

        foreach(var demo in DemoChecks)
        { 
               demo.InvalidForeground = true;
               _validDemo.Add(demo);            
        } 
```

从这段代码中，我希望复选框文本 Demo1、Demo2 和 Demo3 应该是红色的：

```
_
|_| Demo1  
 _
|_| Demo2
 _
|_| Demo3

But instead i get it like this:
 _
|_| System.Windows.DataTrigger Demo1  
 _
|_| System.Windows.DataTrigger Demo2
 _
|_| System.Windows.DataTrigger Demo3 
```

谁能帮忙，我做错了什么？

# c++ - 静态链接 MFC 时未修改的 Visual Studio 2012 MFC 模板中的链接错误

> ID：13589518
> 
> 赞同：6
> 
> 时间：2012-11-27T17:16:48.870
> 
> 标签：c++, visual-c++, mfc, visual-studio-2012, linker-errors

在 Visual Studio 2012 中创建最简单类型的新 MFC 应用程序并将其设置为静态链接到 MFC 时，链接失败。

**这是一个[包含 7 个屏幕截图的画廊，](https://imgur.com/a/PLpvH)**从通过向导创建项目到构建（导致链接器错误）。 **中间没有进行源代码编辑。**

错误日志状态：

```
1>------ Build started: Project: Test, Configuration: Debug Win32 ------
1>  stdafx.cpp
1>  TestDlg.cpp
1>  Test.cpp
1>  Generating Code...
1>uafxcwd.lib(afxctrlcontainer2.obj) : error LNK2005: "void __cdecl AfxRegisterMFCCtrlClasses(void)" (?AfxRegisterMFCCtrlClasses@@YAXXZ) already defined in afxnmcdd.lib(afxctrlcontainer2.obj)
1>uafxcwd.lib(afxctrlcontainer2.obj) : error LNK2005: "protected: void __thiscall CMFCControlContainer::PreUnsubclassControl(class CWnd *)" (?PreUnsubclassControl@CMFCControlContainer@@IAEXPAVCWnd@@@Z) already defined in afxnmcdd.lib(afxctrlcontainer2.obj)
1>uafxcwd.lib(afxctrlcontainer2.obj) : error LNK2005: "public: int __thiscall CMFCControlContainer::SubclassDlgControls(void)" (?SubclassDlgControls@CMFCControlContainer@@QAEHXZ) already defined in afxnmcdd.lib(afxctrlcontainer2.obj)
1>C:\Users\XXXXXXXX\Documents\Visual Studio 2012\Projects\Test\Debug\Test.exe : fatal error LNK1169: one or more multiply defined symbols found
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

这只是我吗？你对如何解决这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-15T05:37:35.893

当我尝试将我的项目静态链接在一起时，我遇到了同样的问题。

正如 Michael Burr 所建议的那样，在 stdafx.h 中注释掉 #define _AFX_NO_MFC_CONTROLS_IN_DIALOGS 行之后似乎很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-13T17:47:38.550

我遇到了同样的问题。如果您决定`#define _AFX_NO_MFC_CONTROLS_IN_DIALOGS`摆脱大量 MFC 开销，您还应该确保将对话框基类、方法调用等`CDialogEx`从`CDialog`.

如果您不更改对话框的背景颜色或图像，您会发现`CDialogEx`无论如何这都毫无用处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:42:50.290

经测试，v100 运行良好，v110 不行。尝试将此链接报告给 MS 连接： [http ://connect.microsoft.com/VisualStudio/feedback/details/581084/linker-cant-locate-some-external-symbol-when-use-mfc-in-a-静态库](http://connect.microsoft.com/VisualStudio/feedback/details/581084/linker-cant-locate-some-external-symbol-when-use-mfc-in-a-static-library)

# c# - 需要在对 Web 服务的 SOAP 请求中具有自闭合元素

> ID：13589524
> 
> 赞同：2
> 
> 时间：2012-11-27T17:17:02.320
> 
> 标签：c#, soap, soaphttpclientprotocol

我正在开发一个使用第三方 Web 服务的 C# 客户端。我有他们的 wsdl 和 xsd，几乎一切正常。我遇到的唯一问题是该服务需要在数组参数中自动关闭元素，但是 SoapHttpClientProtocol（VS 在从 wsdl 创建 Web 引用类时用作继承类）正在发送空元素。我已经使用soapUI对此进行了测试，并验证了该服务将接受数组中的自关闭元素或具有数组名称的自关闭元素（因此没有子元素），但是当它接收到空元素时会引发错误.

当没有数据存在时，如何将 SOAP 工厂设置为使用自闭合元素？我在网上搜索过，似乎以前没有问过这个问题。

# ruby - 在 EventMachine 上运行时，Thin 无法生成工作人员

> ID：13589526
> 
> 赞同：1
> 
> 时间：2012-11-27T17:17:07.443
> 
> 标签：ruby, eventmachine, thin

我有一个建立在 Sinatra 基础上的 ruby​​ 网络/数据服务器应用程序。我正在添加 EventMachine 和 em-websocket，以便我可以进行异步数据传输连接。

```
#! /usr/bin/env ruby

require 'yajl'
require 'json'
require 'em-websocket'
require 'sinatra/base'
require 'thin'
require './Actors/DataProvider.rb'

my_host = '10.2.56.87'
my_web_port = '4004'
my_web_sock = '8008'

EventMachine.epoll  # choose kernel epoll over select for deterministic execution under load
EventMachine.run do

   class SinatraApp < Sinatra::Base

    configure do
      set :bind, '10.2.56.87'
      set :port, '4004'
    end

    encoder = Yajl::Encoder.new
    communicator = DataProvider.new( encoder )

    get '/' do
      redirect '/index-work.html'
    end

    before do
      content_type 'application/json'
    end

    post '/auth' do
    end

    post '/data/:id' do
      puts 'got d i '
    end
  end
  EventMachine::WebSocket.start( :host => my_host, :port => my_web_sock ) do | ws |
    ws.onopen do

    end
    ws.onmessage do

    end
    ws.onclose do

    end
  end
  begin
    SinatraApp.run!
  rescue => ex
    puts "#{ ex.class}: #{ ex.message }"
  end
end 
```

瘦服务器在为 Sinatra 服务时运行良好，但现在我添加了 EM 基础，会发生以下情况：

```
/usr/local/rvm/gems/ruby-1.9.3-p286/gems/thin-2.0.0.pre/lib/thin/server.rb:192:in `block (2 levels) in start': undefined method `attach_server' for EventMachine:Module (NoMethodError)
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/thin-2.0.0.pre/lib/thin/server.rb:191:in `each'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/thin-2.0.0.pre/lib/thin/server.rb:191:in `block in start'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/thin-2.0.0.pre/lib/thin/backends/prefork.rb:30:in `block (2 levels) in start'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `call'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/thin-2.0.0.pre/lib/thin/backends/prefork.rb:23:in `block in start'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/preforker-0.1.1/lib/preforker/worker.rb:52:in `call'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/preforker-0.1.1/lib/preforker/worker.rb:52:in `work'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/preforker-0.1.1/lib/preforker.rb:129:in `block (2 levels) in spawn_missing_workers'
from (eval):6:in `block in fork'
from (eval):6:in `fork'
from (eval):6:in `fork'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/preforker-0.1.1/lib/preforker.rb:126:in `block in spawn_missing_workers'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/preforker-0.1.1/lib/preforker.rb:124:in `times'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/preforker-0.1.1/lib/preforker.rb:124:in `spawn_missing_workers'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/preforker-0.1.1/lib/preforker.rb:44:in `run'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/thin-2.0.0.pre/lib/thin/backends/prefork.rb:37:in `start'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/thin-2.0.0.pre/lib/thin/server.rb:187:in `start'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/rack-1.4.1/lib/rack/handler/thin.rb:13:in `run'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/sinatra-1.3.3/lib/sinatra/base.rb:1350:in `run!'
from /home/devel/ISF_Server/server-work.rb:122:in `block in <top (required)>'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `call'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'
from /home/devel/ISF_Server/server-work.rb:15:in `<top (required)>'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/ruby-debug-ide-0.4.17.beta14/lib/ruby-debug-ide.rb:127:in `debug_load'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/ruby-debug-ide-0.4.17.beta14/lib/ruby-debug-ide.rb:127:in `debug_program'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/ruby-debug-ide-0.4.17.beta14/bin/rdebug-ide:118:in `<top (required)>'
from -e:1:in `load'
from -e:1:in `<main>' 
```

我确实注意到 Thin gem 最近更新了，但 EM 还没有。这是我的下一个调查点。其他人发布了 Thin 不应从 EM.run 块中运行，但我正在构建的示例是这样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:44:53.857

好的。我直接与 Marc-Andre Cournoyer 通信。他说，首先，不要在 EM.run 块中生成 This（通过 Sinatra）。

其次，错误是从需要 EventMachine live Edition 或 gem eventmachine-le 的 Thin 2 (pre) 生成的。

莫贝塔现在。:D

# javascript - 隐藏（）与隐藏（“慢”）

> ID：13589528
> 
> 赞同：6
> 
> 时间：2012-11-27T17:17:26.487
> 
> 标签：javascript, jquery, html

我需要隐藏一个 div，并且使用此代码可以正常工作：

```
 var idObj = $(this).attr('key');
var valH = $(this).attr('hideval');
var valS = $(this).attr('showval');

if ($('div[name='+idObj+']').attr('isdisplay') == 'no') {
    $('div[name='+idObj+']').children().show("slow");
    $('div[name='+idObj+']').attr('isdisplay','yes');
    var divTitle = $('div[name='+idObj+']').children().first();
    var divArrow = $(this).children().first();
    //.attr('src',prefixImg+valH);

    //divTitle.show();
    //divArrow.show();
    $(this).children().first().attr('src',prefixImg+valH);
} else {

    var divTitle = $('div[name='+idObj+']').children().first();
    var divArrow = $('div[name='+idObj+']').children().last();
    //.attr('src',prefixImg+valS);

    $('div[name='+idObj+']').children().hide();
    $('div[name='+idObj+']').attr('isdisplay','no');

    divTitle.show();
    divArrow.show();
    $(this).children().first().attr('src',prefixImg+valS);
} 
```

我的 div 被隐藏，并且显示了重新打开 div 的标题和箭头。但是如果我尝试使用 hide("slow") divTitle 和 divArrow 在我的 div 关闭时不会出现。使用 hide(1000) 时同样的问题。

有和没有“慢”参数的隐藏有区别吗？

谢谢，安德里亚

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T17:21:27.713

来自官方网站

> 匹配的元素将立即隐藏，没有动画。这大致相当于调用 .css('display', 'none')，只是 display 属性的值保存在 jQuery 的数据缓存中，以便稍后可以将 display 恢复为其初始值。如果一个元素的显示值为 inline，然后被隐藏并显示，它将再次被显示为 inline。
> 
> 当提供持续时间时， .hide() 成为动画方法。.hide() 方法同时为匹配元素的宽度、高度和不透明度设置动画。当这些属性达到 0 时，显示样式属性设置为 none，以确保元素不再影响页面的布局。

因此，如果没有延迟地使用 hide，它会立即隐藏而不设置动​​画 - 例如，噗。

如果它随着时间的推移而使用，它就会变成动画，所以它会随着时间的推移而消失。

对于你的问题，没有相应的html代码是很难判断的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T17:24:51.427

`$(element).hide()`立即隐藏一个元素，在那里`$(element).hide('slow')`将动画它的消失（慢慢地）。

*看起来*（虽然我不确定）你想在动画完成*后做一些事情。*在这种情况下，请执行以下操作：

```
var that = this;  // here to preserve scope for the block below
$('div[name='+idObj+']').children().hide('slow', function() {

    // This stuff happens after the hide animation is done.
    $('div[name='+idObj+']').attr('isdisplay','no');

    divTitle.show();
    divArrow.show();
    $(that).children().first().attr('src',prefixImg+valS);  // <= note "that" instead of "this"

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T17:21:19.617

根据 jQuery 文档

> 可以提供字符串 'fast' 和 'slow' 分别表示 200 和 600 毫秒的持续时间。

也可以提供以毫秒为单位的持续时间..

# python - Python csv写入列表

> ID：13589533
> 
> 赞同：1
> 
> 时间：2012-11-27T17:17:46.160
> 
> 标签：python, list, csv

我有一个将一堆行写入 csv 文件的代码。它写了我想要的，但是......它在每一列中插入括号......代码是：

```
 root_text_csv = "C:/Users/s/Desktop/text/knife"+numarul_folderelor+".csv"
    fisier_text_knife = csv.writer(open(root_text_csv,'wb'))
    row_test = []
    for filenames in os.listdir(foldere_prrra):
        knife = filenames.replace("<SP>", " ").replace(".sys", "")
        test = ['cut '+knife+' off for fuged,', 'cut '+knife+' off,', 'cut '+knife+' fool alabala,', 'cut '+knife+' nieh,', 'prrra '+knife+' alabala,',
                'cut '+knife+' fuged streaming,', 'cut '+knife+' alabala fuged,', 'cut '+knife+' off alabala,', 'prrra '+knife+' fool alabala,',
                'cut '+knife+' off fuged,', 'prrra '+knife+' niether alabala,', 'cut off '+knife+' for fuged,' 'cut '+knife+' fuged fool alabala,',
                'cut '+knife+' off niether,', 'where to cut '+knife+',', ''+knife+' fool alabala off,', 'steel '+knife+' off fuged,', 'cut '+knife+' fuged niether,',
                ''+knife+' fool alabala off,', 'fuged streaming '+knife+',', 'cut '+knife+' niether,', 'cut '+knife+' fuged,', 'red '+knife+' off,', ''+knife+' off,',
                'red '+knife+',', 'cut '+knife+',', ''+knife+' fuged,', 'fuged '+knife+',', ''+knife+' off,', 'off '+knife+',', ''+knife+',']
        random.shuffle(test)
        scris = [x for x in test if len(x) <= 30]
        row_test.append(scris) #row_test.append(scris[0])
    fisier_text_knife.writerow(row_test) 
```

如果我用它替换`row_test.append(scris[0:7])`它，`row_test.append(scris[0])`它只写一个字符串（但写它时不带括号--> [] <--）。

我想写七八行。我在这段代码上浪费了我的大脑。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:24:06.403

发生这种情况的原因是因为`scris`是一个列表。

代替：

```
row_test.append(scris[0:7]) 
```

而是这样做：

```
row_test += scris[0:7] 
```

这也有效（见下面的评论）：

```
row_test.extend(scris[0:7]) 
```

如果仍然没有意义，请打开控制台并输入下面的示例内容。每次更改都`l`打印出来。

下面的示例应该向您展示为什么会这样：

```
l = [1,2,3]          #    l = [1,2,3]
l.extend([4,5])      #now l = [1,2,3,4,5]
l.append([6,7])      #now l = [1,2,3,4,5,[6,7]]
l.extend('hi there') #raises an exception 
```

当你调用它时，`some_list.append(some_item)`它就放在`some_item` *里面* `some_list`。所以如果`some_item`也是一个列表，那么你会在列表中得到一个*列表*。

当你调用`some_list.extend(some_item)`它时，它会*加入* `some_item`到`some_list`. 因此，如果`some_item`不是列表，那么这将出错。

**编辑**我想我现在明白你想要什么了......

因此，给定一个列表，例如`[['1','2','3'],['4','5','6'],['7','8','9']]`您希望 csv 看起来像：`123,456,789`，对吗？

代替：

```
fisier_text_knife.writerow(row_test) 
```

试试这个：

```
csv_friendly = [''.join(l) for l in row_test]
fisier_text_knife.writerow(csv_friendly) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:30:20.223

将写入文件的字符串与您 print(row_test) 时的字符串相同 - 作为列表列表。

您可以使用 join 为每一行创建一个大字符串，例如：

```
row_test+= ','.join(scris) + '\n' 
```

# php - 发布多个数据时，jQuery ajax 不返回任何内容

> ID：13589535
> 
> 赞同：1
> 
> 时间：2012-11-27T17:17:48.687
> 
> 标签：php, ajax, jquery

你好，我想用 jQuery ajax 将多个数据发布到一个 php 文件，但是当我执行该函数时，它什么也没有重新调整，而且 php 也没有得到数据

我的功能如下所示：

```
function sendForm(){
  jQuery.ajax({
   url: <?php echo $path; //this the url where the php file is ?>,
   type: 'POST',
   data: {
    addressOne: jQuery('#Form #table .key :input').serialize(),
    addressTwo: jQuery('#Form #table_2 .key :input').serialize(),
    additionalData: jQuery('#Form #More :input').serialize(),
    preloaded: <?php echo serialize($array); ?>,
    action: 'sendIt'
   },
   async: false,
   cache: false,
   success: function(data){
     alert(data); //or console.log(data);
   }
  });
} 
```

在php中我做了这样的事情：

```
<?php
function handleData() {
  parse_str($_POST['addressOne'], $arrayOne);
  parse_str($_POST['addressTwo'], $arrayTwo);
  parse_str($_POST['additionalData'], $arrayThree);
  $preloaded = unserialise($_POST['preloaded']);
  //than do some stuf here for example print_r all...
}

if(isset($_POST['action']) && !empty($_POST['action'])) {
    $action = $_POST['action'];
    switch($action) {
        case 'sendIt' : handleData();
        break;
        //etc...
    }
}
?> 
```

我不知道我做错了什么？有没有更好的方法来发布多个数据？

如果我只使用一个数据，比如我正在序列化整个表单并且不发布序列化的 php 数组，那么它可以正常工作，但我想使用这四个单独的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:21:16.297

您输入错误的 ajax`url`查询`ulr`

考虑为你的浏览器使用一个插件，比如[Web Developer](http://chrispederick.com/work/web-developer/)，我很确定它会发现错误，你不需要在这里问。

**编辑**：如果您仍然遇到问题，请使用 some`alert`验证您要发送的数据，通过从浏览器手动导航到它来验证您的`php`脚本是否执行您希望它执行的操作，因为您提供了一个`success`回调，任何原因您re not`async`等...验证一切

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:20:47.437

你在 ajax 函数中有错字，

```
 url: <?php echo $path; ?>, //needs to be url, not ulr 
```

您也不需要`serialize`文本字段中的值。就这样做，

```
jQuery.ajax({
url: <?php echo $path; //this the url where the php file is ?>,
type: 'POST',
data: {
addressOne: $('#Form #table .key :input').val(),
addressTwo: $('#Form #table_2 .key :input').val(),
additionalData: $('#Form #More :input').val(),
preloaded: <?php echo serialize($array); ?>,
action: 'sendIt'
 },
async: false,
cache: false,
success: function(data){
alert(data); //or console.log(data);
 }
}); 
```

# android - 对 WCF 服务的 Android SSL 证书身份验证（使用 Android KeyChain API）

> ID：13589545
> 
> 赞同：2
> 
> 时间：2012-11-27T17:18:40.587
> 
> 标签：android, wcf, ssl, keychain

我在让证书在 android 下运行时遇到了很大的问题。我有一个连接到 WCF 服务的 android 客户端。

我认为问题是，证书没有被转移。我收到一条错误消息：403 禁止（在响应中）。我真的希望你能帮助我。=> 在我的安卓客户端

在 Internet Explorer 中，它工作得很好 => 状态 200

我发现这篇文章： [http ://android-developers.blogspot.de/2012/03/unifying-key-store-access-in-ics.html](http://android-developers.blogspot.de/2012/03/unifying-key-store-access-in-ics.html)

“私钥的常见用途是用于 SSL 客户端身份验证。这可以通过使用带有自定义 X509KeyManager 的 HttpsURLConnection 来实现，该自定义 X509KeyManager 返回从 KeyChain API 检索的 PrivateKey。ICS 的开源电子邮件应用程序使用带有 X509ExtendedKeyManager 的 KeyChain。了解更多信息，请查看源代码（在 SSLUtils.java 中）。”

我已经检查了 SSLUtils 类，我正在尝试使用它。

这是一些代码：

```
private void setHttpsAdvanced() {
    HostAuth ht = new HostAuth();
    ht.mPort = 443;
    ht.mClientCertAlias = "jensZert";

    HttpParams params = getHttpParams();
    MyThreadSafeClientConnManager ccm = MyThreadSafeClientConnManager
            .newInstance(params, true, 443);

    try {
        MyThreadSafeClientConnManager.makeScheme(true, false,    
                          ht.mClientCertAlias);

        ccm.registerClientCert(getApplicationContext(), ht);
        // checkCertificate(ht.mClientCertAlias);

    } catch (CertificateException e) {
        Log.d(TAG, e.getMessage());
        e.printStackTrace();
    }

    this.httpclient = new DefaultHttpClient(ccm, params);

    connectionInfo = this.getConnectionInfo();

    this.url = String.format("%1$s://%2$s/%3$s/%4$s",
            connectionInfo.Protocol, connectionInfo.ServerName,
            connectionInfo.WebserviceName, connectionInfo.Path);

    httpGet = new HttpGet(url);
}

private String callTheWebserviceCertificate() {
    this.setupClient();
    String result = "";

    HttpResponse response = null;
    try {
        response = (HttpResponse) this.httpclient.execute(httpGet);
        result = EntityUtils.toString(response.getEntity());

    } catch (ClientProtocolException e) {

        e.printStackTrace();
    } catch (IOException e) {

        result = e.getMessage() + "\n";

        for (StackTraceElement el : e.getStackTrace()) {
            result += el.toString() + "\n";
        }

        Log.d(TAG, result);
    }
    return result;
} 
```

问候，詹斯

# c - 单行表达式分支并清除布尔标志？

> ID：13589547
> 
> 赞同：1
> 
> 时间：2012-11-27T17:19:03.147
> 
> 标签：c, bit-manipulation

前几天，一位同事注意到他正在做的常见模式：

```
if (someBooleanFlag)
{
    someBooleanFlag = FALSE;
    ...do some more stuff...
} 
```

基本上，一个读时清除锁存器。并问我是否知道一种聪明的方法来测试标志并将其清除为单行，这样他就可以摆脱样板 someBooleanFlag = FALSE; 少量。关于这是否是好风格的问题，我发现我能为他做的最好的事情就是

```
#define TESTANDCLEAR(var) (var ? var-- : 0) 
```

这假设只使用 1 和 0，并且它也不适用于位掩码。我想我会求助于堆栈巫师，看看是否有更好的方法和其他可以使用的技术。

（同样，无需讨论执行 TESTANDCLEAR() 表达式的风格是好是坏，如果我们真的能做到，那更多的是学术练习，以及如何普遍）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:25:47.550

我认为您不需要做出 0/1 假设，即使您已经采用了这种方法。赋值是返回值的表达式，因此您可以将该宏定义为：

```
(var ? !(var = false) : false) 
```

或者，您可以使用逗号运算符：

```
(var ? ((var = false), true) : false) 
```

如果您希望它与`N`第 th 位的位域测试一起使用，这将有所帮助：

```
(((var & (1 << N)) ? ((var = var & ~(1 << N)), true) : false) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T17:29:07.587

丑陋，但我认为这应该工作：

```
if (someBooleanFlag && !(someBooleanFlag = !someBooleanFlag)) 
```

看在上帝的份上，永远不要在生产代码中这样做。

# java - Java中的位图

> ID：13589550
> 
> 赞同：2
> 
> 时间：2012-11-27T17:19:31.240
> 
> 标签：java, swing, awt

不懂java（一般用c写）

我怎样才能有效地以某种方式将像素数组内容blitting到java中的窗口上？

我需要（循环）`blit pixels[][]`到一个窗口

我可以使用类似的东西

```
 pixels[][] -> MemoryImageSource -> Image -> drawImage 
```

但是在每一帧中创建和删除 `MemoryImageSource`和`Image` 对我来说似乎很奇怪 - 如何简单有效地完成它？有人可以给出一个代码示例，tnx

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T18:37:57.680

`Image`通常在 Java 中，使用原生类型和使用它们的派生图形更容易。[在幕后，](http://hg.openjdk.java.net/jdk7/jdk7-gate/jdk/file/e947a98ea3c1/src/share/classes/sun/java2d/pipe/DrawImage.java) Java 也使用 blit，因此进行了更高级别的抽象以减轻工作量。

但是，如果无法对像素数据进行抽象，您可以使用[Raster](http://docs.oracle.com/javase/7/docs/api/java/awt/image/WritableRaster.html)和[WritableRaster](http://docs.oracle.com/javase/7/docs/api/java/awt/image/WritableRaster.html)（您可以在其中替换部分数组）作为解决方案的替代方案。这些栅格可以与[BufferedImage](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html)一起使用，然后可以使用您提到的 drawImage 方法进行绘制。[我在这里](http://www.cap-lore.com/code/java/JavaPixels.html)找到了一种方法，它基本上创建图像，然后检索光栅以供将来操作。

```
int x, y = 100;
BufferedImage image   = new BufferedImage(x, y, BufferedImage.TYPE_INT_RGB);
WritableRaster raster = image.getRaster(); 
```

然后可以操纵和重新绘制该光栅（或只是它的一小部分）。

这可能会稍微提高性能，因为从像素阵列到屏幕的距离更短。但我认为很少有人完全理解 AWT api 的全部深度——当然这一切都取决于本机实现——所以我的想法包含了一个健康的推测部分 ;-) 但我希望它有所帮助..

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T18:49:31.703

对于速度，您可以预先计算 的变化`ColorModel`，如本[例](https://stackoverflow.com/a/7546025/230513)所示。

![图片](../Images/3f493f0f1cf5ab5e6a413f9109d0e331.png)

# sql - 选择从今天到本月最后 15 日的数据？

> ID：13589553
> 
> 赞同：3
> 
> 时间：2012-11-27T17:19:40.973
> 
> 标签：sql, sql-server, tsql

我想选择从今天到最后 15 日（所以本月或上个月）的一系列数据。这将如何在 TSQL 中完成？

在[Get last Friday's Date 之后，除非今天是使用 T-SQL 的星期五，否则](https://stackoverflow.com/questions/11912181/get-last-fridays-date-unless-today-is-friday-using-t-sql)我似乎`DATEDIFF`至少必须使用它。

我正在考虑构建一个日期字符串，例如：

```
set @date='yyyy-mm-15' 
```

但是`yyyy`or`mm`不能简单地是当前的年/月，以防它必须回顾一个月/年。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:35:48.803

这应该给你你想要的

```
SELECT *
FROM YourTable
WHERE YourDate > CAST((
            CASE 
                WHEN DAY(getdate()) < 15
                    THEN (CAST(YEAR(GETDATE()) AS CHAR(4)) + CAST(MONTH(dateadd(month, - 1, getdate())) AS CHAR(2)) + '15')
                ELSE CAST(YEAR(GETDATE()) AS CHAR(4)) + CAST(MONTH(GETDATE()) AS CHAR(2)) + '15'
                END
            ) AS DATETIME) 
```

**编辑** 将 WHEN DAY(getdate()) > 15**更改为**WHEN DAY(getdate()) < 15，因为结果被反转了:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T17:39:50.397

将当前日期格式化为 格式`yyyy-mm-15`，转换回日期，与当前日期进行比较，如果比今天晚，则减去 1 个月。

这就是我在 ANSI SQL 中所做的……但显然，MS SQL Server 不知道“间隔”。好吧，您可以改用[DateAdd](http://www.siccolo.com/Articles/SQLScripts/how-to-create-sql-to-get-last-day-in-month.html)：

> DateAdd() - 根据向指定日期添加间隔返回新的日期时间值。其中第一个参数指定在日期的哪一部分返回新值：yy(yyyy) 表示年，mm(m) 表示月，dd(d) 表示日等。例如：select dateadd(d,2,getdate( )) - 将 2 天添加到当前日期并返回新日期。

# ruby-on-rails - 有没有办法或 gem 在推送到 Heroku 时使用 Rails 3.2 混淆 javascript 函数名称？

> ID：13589555
> 
> 赞同：4
> 
> 时间：2012-11-27T17:19:44.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, asset-pipeline, obfuscation

我们有一个在 Heroku 上运行的 rails 3.2 应用程序。在开发中我们不编译资产，在 Heroku 上的生产中我们执行“rake assets:precompile”（推送时）。

我们的大部分前端业务逻辑都在 Javascript 中，因此我们想混淆变量名，据我所知，rails 资产管道 yui 压缩器无法做到这一点。

是否有一种智能的“自动推送到 Heroku”（我想宝石会更好）方法来做到这一点？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T04:12:07.747

您可以使用[uglifier gem](https://github.com/lautis/uglifier)，它是 UglifyJS 的包装器...它可以破坏您的 js.. 混淆有很多技术

[在此处](http://lisperator.net/uglifyjs/#demo)查看 uglifyjs 演示

如您所见，变量名被混淆了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:07:52.653

正如@jdoe 在上面的评论中所说：“那么你可以坚持使用 var doSomething = function() { ... } 定义函数的方式（这是 CoffeScript 产生的）。”

# c# - RadGrid 底部的水平滚动空白

> ID：13589557
> 
> 赞同：2
> 
> 时间：2012-11-27T17:19:50.453
> 
> 标签：c#, asp.net, .net, telerik

我正在使用 RadGrid 从数据库中检索数据。我的 RadGrid 中有更多列，因此我需要显示 RadGrid 水平滚动以防止页面扩展但禁用垂直滚动，因此网格的高度应该扩展以始终显示网格中的所有行。我得到了结果，但 RadGrid 的底部有空格。

## 我的 RadGrid 用户界面：

```
<table style="table-layout: fixed;" width="100%" cellpadding="0" cellspacing="0"    border="0">

    <tr>

        <td>

            <telerik:RadGrid ID="RadGrid1" runat="server" AllowPaging="false" PagerStyle-AlwaysVisible="true"

                CellPadding="0" CellSpacing="0" GridLines="None" Skin="Metro" CssClass="RadGrid_CBGrid"

                HorizontalAlign="Left" AutoGenerateColumns="False" OnItemCommand="RadGrid1_ItemCommand"

                OnDataBound="RadGrid1_DataBound">

                <ClientSettings>

                    <Selecting CellSelectionMode="SingleCell"></Selecting>

                    <Scrolling AllowScroll="true" UseStaticHeaders="True"></Scrolling>

                </ClientSettings>

                <MasterTableView HierarchyLoadMode="Client" DataKeyNames="EmpID" AllowMultiColumnSorting="true"

                    Name="Parent">

                    <CommandItemSettings ExportToPdfText="Export to PDF"></CommandItemSettings>

                    <RowIndicatorColumn Visible="True" FilterControlAltText="Filter RowIndicator column">

                    </RowIndicatorColumn>

                    <ExpandCollapseColumn Visible="True" FilterControlAltText="Filter ExpandColumn column">

                    </ExpandCollapseColumn>

                    <Columns>

                        <telerik:GridBoundColumn DataField="EmpID" EmptyDataText="NA" HeaderText="Emp ID"

                            UniqueName="EmpID">

                        </telerik:GridBoundColumn>
                      and so on......
                      -------------------
                    </Columns>

                    <EditFormSettings>

                        <EditColumn FilterControlAltText="Filter EditCommandColumn column">

                        </EditColumn>

                    </EditFormSettings>

                </MasterTableView>

                <FilterMenu EnableImageSprites="False">

                </FilterMenu>

            </telerik:RadGrid>

        </td>

    </tr>

</table> 
```

如果我在 RadGrid 中更改了 ClientSettings-Scrolling-AllowScroll="true" 和

我得到了结果，RadGrid 底部没有空格，但水平滚动条没有出现在我的 RadGrid 中。

所以任何人都可以给我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T13:33:53.083

或者，如果您不想担心高度计算，请执行此操作！

```
// radgrid scroll horizontal only
<ClientSettings AllowDragToGroup="True" AllowGroupExpandCollapse="true">                    
        <Scrolling AllowScroll="true" />
        <ClientEvents OnGridCreated="GridCreated" />
 </ClientSettings>

function GridCreated(sender, args) {
       $('.rgDataDiv').removeAttr('style');
       $('.rgDataDiv').attr('style', 'overflow-x: scroll;');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-08T12:50:19.553

只需将数据网格的 overflow-x 属性值更改为 scroll ，而不是应用 auto。如果您在 IE9 中遇到此问题。

# javascript - 闭包名称与其中的同名函数冲突，但仅限于 Chrome

> ID：13589559
> 
> 赞同：5
> 
> 时间：2012-11-27T17:19:52.657
> 
> 标签：javascript, google-chrome, closures

这会被视为 Chrome 错误还是 Safari/Firefox 宽大处理？

当我创建一个闭包函数时，我给它一个任意的名字，“按钮”。在闭包中，我有一个函数，它是闭包创建的主对象的构造函数，也称为“按钮”。

闭包返回一个对 Button 的引用，大概是内部函数 Button()。

```
var closure = (function Button(){

    //the closure's primary object
    function Button(target) {
        //constructor for our button object
    }

    Button.prototype = e.inherit(e.Plugin.prototype);
    Button.prototype.constructor = Button;

    return {
            Button: Button,
        };

}());

//now let's call our closure to create a new Button
var newButton = new closure.Button() 
```

在 Safari 和 Firefox 中，这不是问题。调用 newclosure.Button() 返回内部 Button() 的一个实例。然而，在 Chrome 中，当内部函数名称与闭包函数名称匹配时，构造函数似乎不会被调用。返回的似乎是闭包函数本身。当然，当内部函数定义我稍后尝试调用的方法时，这会导致错误。

我发布这个问题有两个原因：

1）我花了一天多的时间才找到问题的原因，这是Chrome报告我的Button没有方法.activate（在我的真实代码中，Button继承自提供.activate（）的父对象方法）。如果其他人遇到这个问题，那么他们可能会在这里找到我的问题并节省一些时间。

2）我想知道：如果这是我的错误，要对闭包和闭包内的函数使用相同的名称，为什么它在 Safari/Firefox 中工作？更具体地说，Chrome 是否确实以某种方式使闭包返回本身而不是预期的内部功能？这是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:51:08.847

可能不是确切的问题，但您不必要地命名了函数表达式。

```
var closure = (function Button(){

    //the closure's primary object
    function Button(target) {
        //constructor for our button object
    }

    Button.prototype = e.inherit(e.Plugin.prototype);
    Button.prototype.constructor = Button;

    return {
            Button: Button,
        };

}());
//now let's call our closure to create a new Button
var newButton = new closure.Button() 
```

应该

```
var closure = (function (){

    //the closure's primary object
    function Button(target) {
        //constructor for our button object
    }

    Button.prototype = e.inherit(e.Plugin.prototype);
    Button.prototype.constructor = Button;

    return {
            Button: Button
        };

}());

//now let's call our closure to create a new Button
var newButton = new closure.Button(); 
```

不同之处在于顶层函数未命名。无需命名您将永远不会再使用的东西。

此外，返回对象中不应包含逗号。这应该作为语法错误出现。

此外，最后一行没有结束分号。

# python - 如何在不考虑特殊字符且不区分大小写的情况下对字符串列表进行排序

> ID：13589560
> 
> 赞同：3
> 
> 时间：2012-11-27T17:19:53.137
> 
> 标签：python, python-2.7, sorting

请让我知道如何在不考虑特殊字符和大小写的情况下按升序/降序对字符串列表进行排序。

前任：

```
list1=['test1_two','testOne','testTwo','test_one'] 
```

应用 list.sort /sorted 方法产生排序列表

```
['test1_two', 'testOne', 'testTwo', 'test_one'] 
```

但不考虑特殊字符和大小写应该是

```
['testOne','test_one', 'test1_two','testTwo'] OR 
['test_one','testOne','testTwo', 'test1_two' ] 
```

list.sort /sorted 方法根据字符的 ascii 值进行排序，但请让我知道如何实现我的预期

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T17:27:43.267

如果通过特殊字符您的意思是“所有不是字母的东西”：

```
sorted(list1, key=lambda x: re.sub('[^A-Za-z]+', '', x).lower()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T17:48:22.663

这取决于你所说的“特殊”字符是什么意思——但无论你的定义是什么，最简单的方法是定义一个`key`函数。

如果你只关心字母：

```
from string import letters, digits

def alpha_key(text):
    """Return a key based on letters in `text`."""
    return [c.lower() for c in text if c in letters]

>>> sorted(list1, key=alpha_key)
['testOne', 'test_one', 'test1_two', 'testTwo'] 
```

如果您也关心数字：

```
def alphanumeric_key(text):
    """Return a key based on letters and digits in `text`."""
    return [c.lower() for c in text if c in letters + digits]

>>> sorted(list1, key=alphanumeric_key)
['test1_two', 'testOne', 'test_one', 'testTwo'] 
```

如果您关心字母和数字*，并且*希望数字在字母之后排序（从您的示例输出中看起来可能就是这种情况）：

```
def alphanum_swap_key(text):
    """Return a key based on letters and digits, with digits after letters."""
    return [ord(c.lower()) % 75 for c in text if c in letters + digits]

>>> sorted(list1, key=alphanum_swap_key)
['testOne', 'test_one', 'testTwo', 'test1_two'] 
```

最后一个利用了“z”在 ASCII 中位于“0”之后 74 位这一事实。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-10T05:45:55.573

你也可以这样排序：

```
new_item_list.sort(key= lambda x: ''.join(e for e in x.get_author_name() if e.isalnum())) 
```

# ajax - 使用 Mootools 的 AJAX 请求错误地作为 GET 而不是 POST 发送

> ID：13589562
> 
> 赞同：0
> 
> 时间：2012-11-27T17:19:54.617
> 
> 标签：ajax, post, get, xmlhttprequest, mootools

我遇到了大量与请求相关的错误报告，这些请求应该作为 POST 传入，但被请求作为 GET。大多数请求都是专门使用带有 MooTools 库 (1.4.5) 的 JavaScript 发出的。

这些报告也来自各种不同的页面和浏览器（IE 7 - 9 和 Firefox 14 - 16）。一些直接使用 XMLHttpRequest 的 MooTools 请求包装器，而另一些使用 Element.send 方法。

我猜这很可能是某种客户端问题，但我无法准确定位问题，因为我无法在本地重现它。关于这种行为的常见原因有什么建议吗？

一个示例基于一种基本形式：

```
<div id="myParent">
    <form action="/DoSomething/Regular" class="validate" method="post">
        <textarea class="grow required" name="MyInfo"></textarea>
    </from>
</div> 
```

并且，以下 JavaScript：

```
var myFormParent = $('myParent');
var myForm = myFormParent.getElement('form');

myForm.set('send', {
    url: '/DoSomething/Ajax',
    method: 'POST',
    noCache: true,
    onSuccess: doSuccessFunction
    onFailure: doFailureFunction
}).send(); 
```

**更新**

看起来代理服务器支持这些奇怪的请求，特别是[WildBlue](http://www.wildblue.com/customers/optimizer) Optimizer。当站点的所有普通用户都正确执行 POST 请求时，是否有任何事情可以使这些代理服务器不断尝试以 GET 请求的形式访问这些文件。

# c# - 无法隐式转换类型 System.Collections.Generic.IList System.Collections.Generic.List

> ID：13589569
> 
> 赞同：1
> 
> 时间：2012-11-27T17:20:26.550
> 
> 标签：c#, list, generics

基本上，我正在将 SQL 数据表转换为可以成功完成的通用列表。但我不知道如何返回列表对象。我收到一个错误，说是 - 无法将类型 System.Collections.Generic.IList 隐式转换为 System.Collections.Generic.List

将 theList 作为 List 类型返回的正确方法是什么？

```
public List<MyObject> GetAllMyObjects()
{
    String command = "select * from names ";
    DataTable tableResult = DataTableToList.ExecuteDataTable(command, CommandType.Text, null,connectionString);

    IList<MyObject> theList = DataTableToList.ConvertTo<MyObject>(tableResult);

    return // I’m not sure how to return theList here...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T17:28:38.050

调用`ToList`你的`theList`对象。

```
return theList.ToList(); 
```

# javascript - 位置：相对于前景的运动图像

> ID：13589573
> 
> 赞同：0
> 
> 时间：2012-11-27T17:20:35.733
> 
> 标签：javascript, html, css

我正在尝试在我的网站上实施 Comodo 信任徽标。这是一个图像，当您将鼠标悬停在它上面时，它会弹出一个 iframe，其中包含有关该站点的一些安全信息。执行此操作的代码来自第三方。

当徽标靠近相对定位的图像时，问题就出现了。图像显示在 iframe 的顶部。如果我`position:relative;`从页脚图像中删除，iframe 会显示在图像顶部。不过，我不能只删除相对定位，因为它会影响页面其余部分的外观。

我已将问题提炼为 jsFiddle [HERE](http://jsfiddle.net/SCSFP/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:27:28.443

信任标志将`div`一个设置为 0 的页面注入到页面中`z-index`，因此基本上它被放置在其他所有内容（包括您的图像）之后。

将 更改`z-index`为任何其他正整数将更改`iframe`的堆叠顺序并将其放在图像的顶部（只要它高于您的图像`z-index`，除非明确设置，否则为 1）。

将此添加到您的样式表应该可以解决问题（假设徽标始终生成`div`具有相同 ID 的）：

```
#tl_popupSC5{
    z-index:1 !important;        
} 
```

请注意，`div`包含框架的`z-index`设置是通过内联样式设置的，因此您需要确保它被正确覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:27:58.313

使用`z-index`css 属性。

```
#baselineImage
{
    height:10px;
    width:100%;
    position:relative;
    top:-6;
    z-index:-1;
}​ 
```

[http://jsfiddle.net/SCSFP/1/](http://jsfiddle.net/SCSFP/1/)

# c - Fork/Dup2/Exec 不能与 mkstemp 一起使用

> ID：13589574
> 
> 赞同：0
> 
> 时间：2012-11-27T17:20:36.520
> 
> 标签：c, exec, fork, stdio

为什么字数统计在下面的程序中输出 0 0 0？

```
int main(int argc, char **argv) {
    pid_t pid = fork();
    const char *data = "THIS IS MY DATA.";
if(pid == 0) {
    // Child Process
    char *tmpname = malloc(15);
    strcpy(tmpname, "/tmp/datXXXXXX");
    int f = mkstemp(tmpname);
    //int f = open("tmpfile", O_RDWR | O_CREAT, S_IRWXU);
    if(f == -1) {
        perror("");
        return;
    }
    int written = write(f, data, strlen(data));
    dup2(f, STDIN_FILENO);
    close(f);
    char *wcargs[5] = {"wc", NULL};
    execvp("wc", wcargs);
    fprintf(stderr, "ERROR");
}
return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:24:17.927

尝试使用 lseek(0, 0, SEEK_SET) 在 dup2() 后倒带标准输入。在您的代码中， wc 将尝试从文件末尾读取，显然不会有任何字节要读取。

# json - 如何让 mosync 应用程序使用 RESTful APi 和 json 有效负载

> ID：13589575
> 
> 赞同：0
> 
> 时间：2012-11-27T17:20:37.327
> 
> 标签：json, web-services, mosync

我编写了一个与我们服务的 REST 交互的 mosync 应用程序。我正在使用 AMDownload 包。Wat 是发送 REST API 所需的 json 有效负载的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:55:04.727

HTTP 400 错误请求的发生可能是因为 MoSync Android 运行时弄乱了 URL，导致服务器返回此错误。或者，也许 MoSync Android 运行时认为 URL 错误，并发回 HTTP 400 错误请求。

您可以在 Android 设备上进行测试吗？看看结果是否一样。

此外，是否可以找到发送到服务器的确切 URL/数据？也许使用一些网络监控软件。如果你可以访问服务器，你能看到它收到的请求吗？如果您在 Firefox RESTClient 之类的客户端中输入相同的请求，您会得到相同的响应吗？

# overflow - 如果字段是组，Jaspersoft iReport Designer Stretch With Overflow 不起作用

> ID：13589577
> 
> 赞同：1
> 
> 时间：2012-11-27T17:20:47.333
> 
> 标签：overflow, ireport, stretch

对大量报告使用 4.5.0，每个报告都使用相同的数据字段 SVC_METH_NM。除非该字段是一个组，否则对数据字段 SVC_METH_NM 进行自动换行（使用 Stretch With Overflow）没有问题。当字段是组时，数据将被截断而不是包装。如果我将评估时间设置为现在，这会清除评估组，它会正确换行（但报告无法正确显示）。我尝试删除下面一行中的字段，并尝试使用 Position Type 和 Stretch Type 选项，但无济于事。

```
<group name="ServiceMethodName">
<groupExpression><![CDATA[$F{SVC_METH_NM}]]></groupExpression>
<groupHeader>
<band height="20">
<textField isStretchWithOverflow="true" evaluationTime="Group" evaluationGroup="ServiceMethodName">
<reportElement x="23" y="0" width="180" height="20" printWhenGroupChanges="ServiceMethodName"/>
<textElement>
<font isBold="true" isItalic="false"/></textElement>
<textFieldExpression><![CDATA[$F{SVC_METH_NM}]]></textFieldExpression>
</textField> 
```

有没有其他人遇到过这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-19T00:51:07.677

我现在正在处理这个问题。你找到解决办法了吗？我希望避免它，但认为我必须尝试使用​​子报告解决问题。相当肯定我可以以这种方式适当地显示文本，但我觉得我不应该用子报表使事情过于复杂。

编辑：测试解决方案 - 在您的组标题中放置一个子报告。子报表的查询应该是“select * from dual”，因为您实际上将从主报表中传递所有数据。将字段作为参数传递给子报表，并完全按照您在组标题中的方式显示它们，但在详细信息带中进行。iReport 将处理文本的换行，因为它位于详细信息带中。确保在子报表上设置了“当详细信息溢出时打印”，并在您的子报表字段上设置了“溢出时拉伸”。

# matlab - 更改轴上指定的值 - matlab

> ID：13589580
> 
> 赞同：-1
> 
> 时间：2012-11-27T17:20:57.820
> 
> 标签：matlab, graph, plot, octave

我正在尝试生成以下图表：

![附上图片。](../Images/08f548ac6cbc54eca6d12ebc56dc3a8b.png)

到目前为止，我设法做到了以下几点：

> > 关闭所有
> 图(1)
> x=-12:0.3:12;
> y=gaussmf(x,[3 3]);
> xlim([-12,12])
> 绘图(x,y,'go-','LineWidth',2)
> y1=gaussmf(x,[3 -3]);
> xlim([-15,15])
> 保持
> 绘图(x,y1,'bs','LineWidth',2)
> 保持
> 在线([-3,-3],[1,0],'color','黑色','线宽',2);
> 保持
> 在线([3,3],[1,0],'color','black','LineWidth',2);

我没有设法调整 x 轴，因此它将标记值 -12:3:12 而不是 -15:5:15。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:36:19.923

你想要你的刻度位置在不同的地方吗？您可以通过更改图形对象的“Xtick”属性来手动设置它们，如

```
set(gca,'xtick', -12:3:12) 
```

# java - 我想要将文件标记中表示的图像文件的完整文件路径放入我的 servlet

> ID：13589581
> 
> 赞同：0
> 
> 时间：2012-11-27T17:21:02.157
> 
> 标签：java, file, input

/*这是我的html页面*/

```
<form method="post"  action="/college/reg" >
<input type="file" name="image" ></input>

<input type="submit" name="submit" value="Submit" ></input>

</form> 
```

这是我的问题。
我在这里上传图像文件。我给出的路径是一个图像文件，即 F:\photos\flower.jpg 但我在 servlet 中没有得到这个路径。我得到这样的如下：

```
String s1=request.getParameter("image");
System.out.println("s1"); 
```

我得到这样的输出“flower.jpg”，但我想要总文件路径，即F：\照片\花.jpg

然后我可以将它保存在我的 oracle 数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:38:37.677

路径“F:\photos\flower.jpg”是在客户端给出的，那么为什么它对服务器端很重要呢？

如果它非常重要，您还可以发送（作为隐藏输入字段）的值`<input type="file" name="image" >`。只需设置（提交时）隐藏输入的值等于文件输入值。

# ruby-on-rails - Ajax 更新后可以使用 ERB/slim 模板而不是 EJS (JST) 吗？

> ID：13589582
> 
> 赞同：1
> 
> 时间：2012-11-27T17:21:06.310
> 
> 标签：ruby-on-rails, ruby-on-rails-3, coffeescript, ejs, slim-lang

我已经看到很多关于这个主题的问题，但没有明确的解决方案。我有一个利用 ERB/slim 和 Coffeescript/EJS/Backbone 的 Rails 3.2 应用程序。我继承了这个代码库，所以其中一些外围设备有点超出我的想象。

**问题**

我的`venue`视图有一个部分显示`tips`已提交给`venue`. 该列表`tips`具有由 JavaScript 促进的“排序”功能。关联的 CoffeeScript 文件具有事件侦听器，用于单击“最近”和“流行”链接。单击时，JS 会做一些工作并利用 Rails 范围来处理列表。我正在构建这个`tips`列表以包含更多数据，特别是包含 Rails 助手`time_ago_in_words`。原始代码使用 Javascripts/templates 资产目录中的 JST/EJS 模板更新了包含提示的 div。

这些是我遇到的具体问题：

1.  如果我将 .erb 添加到文件链（在更新 EJS 解释器以寻找不与 ERB 冲突的不同评估和插值模式之后），我可以评估基本的 Ruby 表达式。但是，部分无法访问`tip`JavaScript 引用的相同变量。我知道这是因为 Rails 是服务器端，而 JS 是客户端。似乎没有共识，但是有没有办法将这些数据获取到 Rails 中？
2.  虽然可以评估基本的 Ruby 表达式（`Time.now`例如），但 Rails 助手（例如`time_ago_in_words`失败）抱怨该方法未为类定义，尽管我绝对传入了正确的日期对象。不能在这个 .EJS.ERB 链中评估 Rails/helpers 吗？
3.  如果有办法在执行排序后引用加载时使用的原始 ERB/slim 部分，我可以规避所有这些问题。这可能吗？现在名为使用`render`和`JST`调用 EJS 模板的 Coffeescript 文件。是否可以以某种方式引用原始部分但使用更新的排序？

这是相关的代码。

```
 ##show.html.erb (venue)##
  #tips
    p.sort.span4
      | Sort by: 
      = link_to 'Recent', '#', class: 'selected', id: 'sort-tips-recent'
      |  | 
      = link_to 'Popularity', '#', id: 'sort-tips-popularity'
    #tip-list
      = render resource.tips.by_recent

##tip_list_view.js.coffee##
class CS.TipListView extends Backbone.View
  el: "#tip_module"

  events:
    "click #sort-tips-recent": "sortByRecent"
    "click #sort-tips-popularity": "sortByPopularity"

  initialize: ->
    console.log("ERROR: View must be initialized with a model") unless @model
    @model.bind('reset', @render)

  render: =>
    tips = @model.map (tip) -> JST['templates/tip'](tip: tip)
    @$('#tip-list').html(tips.join("\n"))

  sortByRecent: (e) ->
    e.preventDefault()
    @model.enableSortRecent()
    @updateSelectedFilter('recent')

  sortByPopularity: (e) ->
    e.preventDefault()
    @model.enableSortPopularity()
    @updateSelectedFilter('popularity')

  updateSelectedFilter: (sort) ->
    @$('p.sort a').removeClass('selected')
   @$("p.sort a#sort-tips-#{sort}").addClass('selected')

##tip.jst.ejs.erb (called from tip_list_view.js.coffee after sort change##
<div class="tip">
  <p class="tip-author">
    <$= tip.get('user').username $>
  </p>
  <p class="tip-timestamp">
    Eventually, time goes here
  </p>
  <p class="tip-likes pull-right">
    <$= tip.upvoteCountText() $>
  </p>
  <p id="<$= tip.domId() $>">
    <$= tip.get('text') $>
    <$ if(tip.get('can_upvote')) { $>
      <a href="<$= tip.upvoteUrl() $>">upvote</a>
    <$ } $>
  </p>
<div> 
```

在这里绝对不知所措 - 非常感谢任何和所有帮助。如果我可以为背景提供任何其他细节或代码，请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T23:26:49.740

使用您的 ejs.erb，Rails 正在生成模板，但不知道您将使用它来做什么。然后，您的 Backbone 应用程序通过 ajax 从 Rails 获取提示，并相应地填充模型。然后是您的主干应用程序填充和呈现模板。Rails 无法在此处使用，至少在骨干需要 json 然后呈现模板的配置中不会。一切都发生在前端。

您唯一能做的就是让 Rails 在 json 中为您提供帮助程序的结果。我猜你有一个 Tip.rb 模型，它应该实现：

```
include ActionView::Helpers::DateHelper
...
def as_json(options = {})
  {
    :name => self.name,
    ... (all the model attributes that you want to expose)
    :date_age => time_ago_in_words self.created_at
  }
end 
```

话虽如此，我会使用客户端解决方案，也是因为：[http ://rails-bestpractices.com/posts/105-not-use-time_ago_in_words](http://rails-bestpractices.com/posts/105-not-use-time_ago_in_words)

# c# - DLL 大小重要吗？

> ID：13589589
> 
> 赞同：8
> 
> 时间：2012-11-27T17:21:26.960
> 
> 标签：c#, .net, performance, dll

我不认为这是一个问题。这是我被问到的问题：

我的一位同事问了我一个问题。

“我想在我的项目中使用一小部分 c# dll（可能是他可能会问的一个辅助函数），我需要使用整个包吗？但似乎它的大小很大。所以它会产生任何问题与表演有关？”

但我**说不**。我回答的原因是：

“假设我们正在构建一个包含 200 个页面的 Web 应用程序，并且所有内容最终都将转换为单个 dll。您是否会为每个请求保留一个页面/dll 的一部分？不！我们构建为单个程序集（应用程序）并使用。同样的答案也适用于此”。

我对吗？还是真的有什么不同？

每个库都打包为一个组件，以适应不同需求的不同目的。怎么会出现性能问题？

有没有关于加载大型程序集和响应时间的文章？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T17:23:51.020

拥有一个大的 DLL 比拥有许多较小的 DLL 更好——DLL 的大小并不重要。加载大 DLL 的成本基本上等于加载小 DLL。

# c - 结构声明中的多个变量

> ID：13589601
> 
> 赞同：-1
> 
> 时间：2012-11-27T17:21:58.223
> 
> 标签：c, sockets

我想知道这在 C 中意味着什么：

```
struct sockaddr_in serv_addr, cli_addr; 
```

如，是`serv_addr`和`cli_addr`结构变量`sockaddr_in`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:23:56.373

是的。他们是。

假设以下示例：

```
struct sockaddr_in
{
    /*some variable declaration*/

}

struct sockaddr_in serv_addr, cli_addr;

// This means that. serv_addr and cli_addr are varibles of structre sockaddr_in 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:25:17.323

像

`int a,b; // declaring two variables of type int`

相似地

```
struct sockaddr_in serv_addr, cli_addr; 
```

以相同的方式声明变量，所以不会混淆

# html - 使用网络表单上的单选按钮打开另一个可以输入数据的字段

> ID：13589602
> 
> 赞同：0
> 
> 时间：2012-11-27T17:22:01.283
> 
> 标签：html

我有带有几个标准字段的网络表单，但是我希望缩小或变灰或隐藏 1 个字段，直到其上方的字段...带有是或否选项的单选按钮选择框被选中是...甚至是复选框可以工作...没关系

```
<tr>
 <td style="width: 143px"><b>Add Notes:
 </b></td>
<td><input type="radio" name="cmtad" value=Yes>Yes
    <input type="radio" name="cmtad" value=No>No
</td>
</tr>

<tr>
 <td style="width: 143px" class="style10"><b>Notes:
 </b></td>
<td >
<textarea input name=info rows="5" cols="32"  style="color: black;background-color:#FFFF66"></textarea></td>
</tr> 
```

我希望只有在添加注释上方的单选按钮中单击是时才会显示注释文本区域。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:31:19.520

您可以使用 javascript 或 jquery 来执行此操作。

下面是一个 jquery 的例子。

```
$(document).ready(function() {
   $('input[name="cmtad"][value="Yes"]').click(function() {
      $(this).parent().parent().next().show();
   }
   $('input[name="cmtad"][value="No"]').click(function() {
      $(this).parent().parent().next().hide();
   }
}); 
```

上面的代码应该隐藏包含单选按钮的`tr`紧随其后的内容。`tr`这些`parent()`调用允许 jquery 冒泡 DOM 以选择下一个`tr`. 这是一个示例代码，根据需要进行编辑。

PS，复选框不是更好的选择吗？

# php - 如何确定 Magento 是否以编程方式在 Apache 上运行？

> ID：13589604
> 
> 赞同：0
> 
> 时间：2012-11-27T17:22:06.170
> 
> 标签：php, apache, magento, nginx

我正在寻找一个优雅的解决方案来确定 Magento 是否以编程方式在 Apache 或 Nginx 上运行。一旦我知道了网络服务器，我还需要知道是否`mod_rewrite`启用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:53:41.807

感谢用户“实用程序”的链接，我能够找到最接近的解决方案。我必须检查服务器软件密钥。最终我将不得不要求用户确认...

```
$_SERVER["SERVER_SOFTWARE"]. 
```

谢谢！

查克

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-27T18:21:53.420

```
<?php
phpinfo(); 
?> 
```

这将为您提供比您需要的更多信息..

我认为这会告诉您是否启用了 mod_rewrite，但不会。

您可以随时在`.htaccess`文件中检查。如果你设置`RewriteEngine On`它应该按照你的要求做......即：

```
RewriteRule ^link([^/]*).html$ yourfile.php?link=$1 [L] 
```

如果您知道的重写规则失败...... mod_rewrite 很可能被禁用。

# regex - 9-10个字符之间的单词，其中0-2是数字

> ID：13589608
> 
> 赞同：5
> 
> 时间：2012-11-27T17:22:25.343
> 
> 标签：regex

[http://regexr.com?32uvo](http://regexr.com?32uvo)

我目前拥有的：

```
\b(?=[A-Z\d]{10})(?:[A-Z]*\d){0,2}[A-Z]*\b 
```

这只会匹配长度为 10 的字符串。我想将其更改为 9 到 10 个字符之间，其中 2 可以是数字。为什么这不起作用？

```
\b(?=[A-Z\d]{9,10})(?:[A-Z]*\d){0,2}[A-Z]*\b 
```

AFAIK，`{9,10}`应该是长度间隔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:25:54.913

你很亲近

```
 \b(?=[A-Z\d]{9,10}\b)(?:[A-Z]*\d){0,2}[A-Z]*\b
                   --            
                    |->you missed this 
```

[在这里](http://regexhero.net/tester/)试试

所以这个正则表达式将匹配一个包含 9 到 10 个字符[大写和数字] 的单词，其中包含 1 到 2 个数字

* * *

如果你想匹配你最好使用的整个字符串`^`（字符串的开头）和`$`（字符串的结尾）

# linq - NuGet 上“System.Linq.Dynamic”、“Dynamic Expression API”和“DynamicLINQ”之间的区别？

> ID：13589609
> 
> 赞同：2
> 
> 时间：2012-11-27T17:22:26.180
> 
> 标签：linq, dynamic, expression, nuget, nuget-package

我注意到 NuGet 上有 3 个具有相同功能的版本？

*   System.Linq.Dynamic (微软)
*   动态表达式 API（微软）
*   DynamicLINQ (大卫福勒)

有人可以解释这些差异吗？哪一个是最好的包装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:37:49.953

唯一的区别是动态表达式 API (DynamicQuery) 支持 .NET 3.5，而 System.Linq.Dynamic 也支持 .NET 4.0

DynamicLinq 包具有完全不同的用法和 API。

# firebird - Firebird 2.5 数据库恢复使用 gbak 和 fix_fss_data 返回格式错误的字符串

> ID：13589615
> 
> 赞同：1
> 
> 时间：2012-11-27T17:22:53.440
> 
> 标签：firebird, firebird2.5

我有一个旧数据库，我想将其转换为 Firebird 2.5。在包含众所周知的问题“gbak：错误：格式错误的字符串 gbak：检测到无效数据”的表上还原包含 blob 文本字段的数据时会出现问题

执行的步骤：

1.  gfix -user SYSDBA -password masterkey f:\dbb.db -shut -force 0
2.  gfix -v -full -user SYSDBA -password masterkey f:\dbb.db
3.  gbak -v -t -g -ig -user SYSDBA -YF:\backup.log -password "masterkey" f:\dbb.db F:\dbb1.db
4.  gbak -r -v -o -p 16384 -YF:\log.txt -user SYSDBA -password masterkey "f:\dbb1.db" "f:\new.db" -fix_fss_data win1251 -rep

用 win1252,utf8 或 unicode_fss 替换字符集并不能解决问题。

我还尝试使用 InterBase Data Pump 3.4 版迁移数据。

脚步：

1.  备份元表
2.  在新数据库上恢复元表
3.  使用 InterBase 数据泵迁移数据

遇到错误“格式错误的字符串”。

所有发生错误的表都有一个类型为“BLOB SUB_TYPE 1 SEGMENT SIZE 80”的字段

我怀疑一开始数据库的字符集是 WIN1252。之后，有人将字符集更改为 UTF8，并将字符集和整理的所有字段定义从 WIN1252 更改为 UTF8。否则我不明白为什么会收到这些格式错误的字符串错误。另外，我知道这个问题在 FireBird 2.0 到 FireBird 2.5 的迁移中很常见。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T20:28:42.593

格式错误的字符串错误可能来自数据，您可以使用开关 -fix_fss_d 更正此错误，但它也可能来自元数据，您必须使用开关 -fix_fss_m

> -FIX_FSS_D[ATA]
> 
> 此开关强制 gbak 在还原期间修复格式错误的 UNICODE_FSS 字符数据。
> 
> 在正常情况下，不应需要此开关以及以下开关。但是，如果还原操作因“格式错误的字符串”错误而失败，则 gbak 的消息输出将引导用户使用这些开关中的一个或两个，以适当地修复格式错误的 UNICODE_FSS 数据或元数据。
> 
> -FIX_FSS_M[ETADATA]
> 
> 此开关强制 gbak 在还原期间修复格式错误的 UNICODE_FSS 元数据。
> 
> 在正常情况下，不应需要此开关和前一个开关。但是，如果还原操作因“格式错误的字符串”错误而失败，则 gbak 的消息输出将引导用户使用这些开关中的一个或两个，以适当地修复格式错误的 UNICODE_FSS 数据或元数据。

链接到[firebird gbak 实用程序](https://www.firebirdsql.org/file/documentation/html/en/firebirddocs/gbak/firebird-gbak.html#gbak-cmdline)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:10:25.770

即使听起来很愚蠢，我也是这样修复的：

备份元表
创建还原到新数据库文件
使用 IBExpert 从旧表中提取数据到脚本
中 运行脚本以将数据添加到新数据库

-fix_fss_D 或 fix_fss_m 与不同字符集的组合都没有将所有数据导入新数据库。尝试了所有免费和共享软件工具，但没有结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-05T10:47:42.330

最后使用 -fix_fss_metadata WIN1252。这有助于我解决这个问题。

例如：

`gbak -c -r -v -user SYSDBA -password masterkey C:\backup\Example.bkp C:\TEST7.fdb -fix_fss_metadata WIN1252`

# javascript - console.log 剥离回车（显示为文字 ↵）

> ID：13589618
> 
> 赞同：5
> 
> 时间：2012-11-27T17:23:03.453
> 
> 标签：javascript, firebug, google-chrome-devtools

我正在尝试编写一个 JavaScript 函数，通过 console.log 将字符串打印到控制台。但是，字符串中有回车符，它显示为文字 ↵ 字符，而不是创建一个新行。这是 console.log 的限制，还是有办法解决这个问题？

谢谢！

**编辑：**我实际上是想在一个对象中打印这个函数。就像是：

```
function blah() {
};
console.log({ "function" : blah }); 
```

我最初并没有想到要提及它，但是在尝试了 crowjonah 的解决方案之后，我意识到 console.log 显然将直接传递的字符串与在另一个对象内部传递的字符串区别对待。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T21:08:24.677

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:26:39.043

这是控制台的限制。但您可以创建一个解决方法：

```
function multiLineLog(msg) {
    msg = msg.split(/[\r\n]+/g);
    for (var a=0; a < msg.length; a++) console.log(msg[a]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T17:26:47.757

在日志消息中使用`\n`任何您希望有换行符的地方。

```
console.log('first line \nsecond line'); 
```

如果“回车”是 html 元素，例如`<br>`，您可以在字符串上运行替换以自动执行此操作

```
var newLogMessage = multiLineLogMessage.replace('<br>', '\n');
console.log(newLogMessage); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-09T18:08:27.493

这是[SReject 解决方案](https://stackoverflow.com/a/13589697/1762224)的修改版本：

```
const log = line => console.log(line);
const multiLineLog = msg => msg.split(/[\r\n]+/g).forEach(log);

const data = { a: { b: { c: null } } };

multiLineLog(JSON.stringify(data, null, 2));
```

```
.as-console-wrapper { top: 0; max-height: 100% !important; }
```

# c++ - C++ 中的重载运算符给了我一个错误

> ID：13589622
> 
> 赞同：0
> 
> 时间：2012-11-27T17:23:28.740
> 
> 标签：c++, overloading, operator-keyword

当我尝试在 main.cpp 中使用这一行时：

```
m3.array = m1.array+m2.array; 
```

其中 m3、m1 和 m2 都是类类型 Matrix 的所有对象，带有一个 int[3][3] 数组 - 我不断收到一个错误，处理 int[3][3] 和 int[ 类型的不兼容分配3][3] 操作数“+”。我不知道确切的错误，因为我不在计算机上编译程序。

这是我拥有的matrix.cpp：

```
#include <iostream>
#include <string>
#include "matrix.h"

using namespace std;

Matrix::Matrix()
{
    m1.array = 0;
}

istream& opeator >>(istream& inp, Matrix& m1)
{
         int i, j;

         for (i = 0; i < 3;i++)
         {
             for (j=0; j < 3;j++)
             {
                 inp >> m1.array[i][j];
             }
         }
         return inp;
}
ostream& operator <<(istream& outp, Matrix& m1)
{
         int i, j;
         for (i = 0;i<3;i++)
         {
             for (j = 0;j<3;j++)
             {
                 out<<m1.array[i][j]<<" "<<endl;
             }
         }
         return outp;
}

Matrix operator + (const Matrix& m1, const Matrix& m2)
{
        Matrix answer;
        int i,j;
        for (i = 0;i<3;i++)
        {
            for (j = 0;j<3;j++)
            {
                answer.array[i][j] = m1.array[i][j] + m2.array[i][j];
            }
        }
        return answer;
}

Matrix operator - (const Matrix& m1, const Matrix& m2)
{
        Matrix answer;
        int i, j;
        for (i = 0;i<3;i++)
        {
            for (j = 0;j<3;j++)
            {
                answer.array[i][j] = m1.array[i][j] - m2.array[i][j];
            }
        }
        return answer;
}

Matrix operator * (const Matrix& m1, const matrix& m2)
{
       Matrix answer;
       int i, j, k;
       for (i = 0;i<3;i++)
       {
           for (j = 0; j<3;j++)
           {
               for (k = 0; k<3;k++)
               {
                   answer.array[i][j] = m1.array[i][k] + m2.array[k][j];
               }
           }
       }
       return answer;
} 
```

和matrix.h：

```
#ifndef MATRIX_H
#define MATRIX_H

using namespace std;

class Matrix
{
      public:
             Matrix();
             friend istream& operator >>(istream&, Matrix&);
             friend ostream& operator <<(ostream&, const Matrix&);
             friend Matrix& operator +(const Matrix&, const Matrix&);
             friend Matrix& operator -(const Matrix&, const Matrix&);
             friend Matrix& operator *(const Matrix&, const Matrix&);
             int array[3][3];

};

#endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:26:55.160

```
Matrix operator + (const Matrix& m1, const Matrix& m2) 
```

这告诉计算机如何添加两个`Matrix`对象，干得好。

```
m3.array = m1.array+m2.array; 
```

`m1`并且`m2`是`Matrix`对象，但`m1.array`不是。 *那*是一个`int[3][3]`对象。幸运的是，修复非常简单：

```
m3 = m1 + m2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:26:15.287

该成员`array`的类型为`int[3][3]`。您正在尝试添加这两个在 C++ 中没有意义的多维数组。

我假设你真正想要的是：

```
m3 = m1 + m2; 
```

这将调用您的重载运算符。

其他值得怀疑的事情是您的朋友声明和您的实际定义不匹配。返回类型不同。

# groovy - 如何在 Groovy 中 grep 制表符分隔文件的第 n 列？

> ID：13589629
> 
> 赞同：1
> 
> 时间：2012-11-27T17:23:40.990
> 
> 标签：groovy, grep, csv

我的源文件是制表符分隔的，我需要对第 4 列值进行 grep。我怎样才能在 Groovy 中做到这一点？这是我的代码不起作用。它甚至接近吗？

```
 def tab_file = new File('source_file.tab')
 tab_file.eachline { line -> println line.grep('\t\t\t\t'} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:43:01.427

您可以按制表符拆分，这将为您提供一个可以索引的数组以获取该列：

```
groovy:000> s = "aaa\tbbb\tccc\tddd\teee";
===> aaa        bbb     ccc     ddd     eee
groovy:000> s.split("\\t")[3]
===> ddd 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:56:17.120

像下面这样的东西应该可以工作：

```
tab_file.eachLine { line -> 
    println ((line =~ /([^\t]*\t){3}([^\t]*)/)[0][2])
} 
```

**说明：** 操作员使用右侧的模式`=~`创建一个对象。Groovy 允许您通过数组下标运算符`java.util.regex.Matcher`隐式执行。`find()`如果您的正则表达式中有组，则`List`每个结果都会产生一个。该列表将整个匹配区域作为元素 0，然后将组作为其他元素。`[0][2]`正则表达式的第一个匹配（零索引）也是如此，特别是第二组匹配。（顺便说一句，如果正则表达式中没有组，则结果只是一个匹配的字符串）。详细信息/示例[在这里](http://groovy.codehaus.org/Regular+Expressions)。

**更新/旁白：** 我只是在研究添加到[Object](http://groovy.codehaus.org/groovy-jdk/java/lang/Object.html#grep%28java.lang.Object%29)`grep()`的fxnality ，因为我很好奇。我不确定我是否看到了集合类型之外的实用程序，但是当应用于字符串时，它不会像您预期的那样 - 它似乎循环遍历字符串中的字符，并将每个字符与传入的字符进行比较字符串（收集列表中的匹配项）。如果您传入的字符串大于 1 个字符，则您将永远无法匹配，因为每次迭代检查的字符永远不会等于传入的整个字符串（在您的示例中， any ）`\t != "\t\t\t\t"`

# c# - NHibernate Queryable 不允许字符串比较

> ID：13589635
> 
> 赞同：5
> 
> 时间：2012-11-27T17:23:58.697
> 
> 标签：c#, nhibernate, iqueryable

我有以下代码

```
var results =
                repository.GetItemsAsQuery<User>().Where(
                    user => user.EmailAddress.Equals(emailAddress, StringComparison.CurrentCultureIgnoreCase));

            return results.Any(); 
```

Repository 只是我对 NHibernate 会话的包装，该方法具有以下签名

```
public IQueryable<T> GetItemsAsQuery<T>()
        {
            try
            {
                CheckHasErrored();

                return _connection.Session.Query<T>();
            }
            catch (Exception ex)
            {
                HasErrored = true;
                throw new DataRepositoryException(string.Format("Error getting collection of items of type '{0}'", typeof(T).Name), "DataRepository.GetItems<>", ex);        
            }
        } 
```

当我运行第一种方法时，我收到错误 NotSupportException - Boolean Equals(System.String, System.StringComparison) with source NHibernate。

这似乎暗示错误来自我试图过滤 NHibernate 查询的 LINQ lambda 表达式

```
user.EmailAddress.Equals(emailAddress, StringComparison.CurrentCultureIgnoreCase) 
```

我使用 NHibernate Queryable 错误吗？我希望它生成的等效 SQL 是

```
select * from User where emailAddress = @emailAddress 
```

所以我只得到通过数据网络返回的一行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T18:21:16.230

我看到您的问题/您想要的两个大问题：

*   您所需的 SQL 查询与您的字符串比较方法不兼容。比较“StRiNg”和“string”时，您的字符串比较方法将返回 true，因为它忽略了字符串的大小写，而您的 SQL 查询在比较这些字符串时将返回 false。如果您想在比较时忽略大小写，则应将查询更改为：

repository.GetItemsAsQuery().Where(user => user.EmailAddress.ToLower() == emailAddress.ToLower());

如果我没记错的话，NHibernate 已经可以做到这一点。

*   您的下一个大问题是尝试在 SQL 查询中进行文化感知比较。NHibernate 尚无法做到这一点。如果您想要了解文化的字符串比较 SQL 查询，您将不得不用纯 SQL 编写这些查询。但是，对于简单的相等比较，您可能不会遇到问题：只需使用`==`运算符进行字符串比较，就可以了。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-02T20:51:03.210

`String.Compare`现在支持`NHibernate`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T17:33:41.123

LINQ 还不是 100% 兼容 Nhibernate。尝试`String.Compare(string a, string b)`改用。

# python - 如何在 python 子列表中填写未使用的 IP 地址？

> ID：13589638
> 
> 赞同：3
> 
> 时间：2012-11-27T17:24:01.983
> 
> 标签：python, sorting, ip, dhcp

我创建了一个 python 脚本来尝试让我作为系统管理员的生活更轻松。此脚本的重点是将 Microsoft DHCP 服务器转储文件转换为排序的 CSV 文件。

我将在此处包含代码，并感谢各种改进。

**我的问题**

我的脚本创建了一个列表列表（每个 dhcp 预留一个）。例如：

```
[
  # [DHCP SERVER, IP ADDRESS, MAC ADDRESS, HOSTNAME, DESCRIPTION]
  [server1,172.16.0.120,31872fcefa33,wks120.domain.net,Description of client]
  [server1,172.16.0.125,4791ca3d7279,wks125.domain.net,Description of client]
  [server1,172.16.0.132,6035a71c930c,wks132.domain.net,Description of client]
  ...
] 
```

未列出未使用的 IP 地址。但我希望我的脚本能够自动为所有未使用的 IP 地址添加子列表，并给他们一个评论，说“未注册”之类的。

我什至不知道如何开始在谷歌上搜索如何完成这项任务，所以任何帮助将不胜感激:)

**剧本**

```
#!/usr/bin/python
import sys, shlex
from operator import itemgetter

# Function: get_dhcp_reservations
#
# Extracts a list of ip reservations from a Microsoft DHCP server dump file
# then it stores the processed reservations them in a nested list

def get_dhcp_reservations(dmpFile):

  # Setup empty records list
  records = []

  # Open dump file for reading
  dmpFile = open(dmpFile,"r")

  # Iterate dump file line by line
  for line in dmpFile:

    # Only user lines with the word "reservedip" in it
    if "reservedip" in line:

      # Split the line into fields excluding quoted substrings
      field = shlex.split(line)

      # Create a list of only the required fields
      result = [field[2][1:9], field[7], field[8], field[9], field[10]]

      # Append each new record as a nested list
      records.append(result)

  # Return the rendered data
  return records

# Function: sort_reservations_by_ip
#
# Sorts all records by the IPv4 address field

def sort_reservations_by_ip(records):

  # Temporarily convert dotted IPv4 address to tuples for sorting
  for record in records:
    record[1] = ip2tuple(record[1])

  # Sort sublists by IP address
  records.sort(key=itemgetter(1)) 

  # Convert tuples back to dotted IPv4 addresses
  for record in records:
    record[1] = tuple2ip(record[1])

  return records

# Function: ip2tuple
#
# Split ip address into a tuple of 4 integers (for sorting)

def ip2tuple(address):
  return tuple(int(part) for part in address.split('.'))

# Function: tuple2ip
#
# Converts the tuple of 4 integers back to an dotted IPv4 address

def tuple2ip(address):

  result = ""

  for octet in address:
    result += str(octet)+"."

  return result[0:-1]

# Get DHCP reservations
records = get_dhcp_reservations(sys.argv[1])

# Sort reservations by IP address
records = sort_reservations_by_ip(records)

# Print column headings
print "DHCP Server,Reserved IP,MAC Address,Hostname,Description"

# Print in specified format records
for record in records:
  print record[0]+","+record[1]+",\""+record[2]+"\","+record[3]+","+record[4] 
```

注意：我也尝试过使用 python [socket.inet_ntoa](http://docs.python.org/2/library/socket.html#socket.inet_ntoa)进行 IPv4 排序，如本网站其他主题中所建议的那样，但未能成功使其正常工作。

**转储文件示例**

根据请求，这里是一些转储文件

```
[Ommited content]

# ======================================================================
#  Start Add ReservedIp to the Scope : 172.16.0.0, Server : server1.domain.net            
# ======================================================================

    Dhcp Server \\server1.domain.net Scope 172.16.0.0 Add reservedip 172.16.0.76 0800278882ae "wks126devlin.domain.net" "Viana (VM)" "BOTH"
    Dhcp Server \\server1.domain.net Scope 172.16.0.0 Add reservedip 172.16.0.118 001e37322202 "WKS18.domain.net" "Kristof (linux)" "BOTH"
    Dhcp Server \\server1.domain.net Scope 172.16.0.0 Add reservedip 172.16.0.132 000d607205a5 "WKS32.domain.net" "Lab PC" "BOTH"
    Dhcp Server \\server1.domain.net Scope 172.16.0.0 Add reservedip 172.16.0.156 338925b532ca "wks56.domain.net" "Test PC" "BOTH"
    Dhcp Server \\server1.domain.net Scope 172.16.0.0 Add reservedip 172.16.0.155 001422a7d474 "WKS55.domain.net" "Liesbeth" "BOTH"
    Dhcp Server \\server1.domain.net Scope 172.16.0.0 Add reservedip 172.16.0.15 0800266cfe31 "xpsystst.domain.net" "Pascal (VM)" "BOTH"

[Ommited content] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:00:53.287

我首先创建了一个所有空预订的列表，然后用你开始的非空列表覆盖它：

```
#!/usr/bin/env python

reservations = [
    # [DHCP SERVER, IP ADDRESS, MAC ADDRESS, HOSTNAME, DESCRIPTION]
    ['server1','172.16.0.120','31872fcefa33','wks120.domain.net','Description of client'],
    ['server1','172.16.0.125','4791ca3d7279','wks125.domain.net','Description of client'],
    ['server1','172.16.0.132','6035a71c930c','wks132.domain.net','Description of client'],
]

def reservationlist(reservations, serverpattern, addresspattern, hostpattern,
        start, end):
    result = []
    for i in range(start, end + 1):
        result.append([
            serverpattern % i,
            addresspattern % i,
            '[no mac]',
            hostpattern % i,
            'Unregistered'])

    for reservation in reservations:
        index = int(reservation[1].split('.')[3]) - start
        result[index] = reservation

    return result

print reservationlist(
    reservations,
    'server%d',
    '172.16.0.%d',
    'wks%d.domain.net',
    120,
    132) 
```

最终结果如下所示：

```
[['server1', '172.16.0.120', '31872fcefa33', 'wks120.domain.net', 'Description of client'],
['server121', '172.16.0.121', '[no mac]', 'wks121.domain.net', 'Unregistered'],
['server122', '172.16.0.122', '[no mac]', 'wks122.domain.net', 'Unregistered'],
['server123', '172.16.0.123', '[no mac]', 'wks123.domain.net', 'Unregistered'],
['server124', '172.16.0.124', '[no mac]', 'wks124.domain.net', 'Unregistered'],
['server1', '172.16.0.125', '4791ca3d7279', 'wks125.domain.net', 'Description of client'],
['server126', '172.16.0.126', '[no mac]', 'wks126.domain.net', 'Unregistered'],
['server127', '172.16.0.127', '[no mac]', 'wks127.domain.net', 'Unregistered'],
['server128', '172.16.0.128', '[no mac]', 'wks128.domain.net', 'Unregistered'],
['server129', '172.16.0.129', '[no mac]', 'wks129.domain.net', 'Unregistered'],
['server130', '172.16.0.130', '[no mac]', 'wks130.domain.net', 'Unregistered'],
['server131', '172.16.0.131', '[no mac]', 'wks131.domain.net', 'Unregistered'],
['server1', '172.16.0.132', '6035a71c930c', 'wks132.domain.net', 'Description of client']] 
```

呸! 我忍不住了。此版本接受 IP 地址作为起始值和结束值：

```
#!/usr/bin/env python

reservations = [
    # [DHCP SERVER, IP ADDRESS, MAC ADDRESS, HOSTNAME, DESCRIPTION]
    ['server1','172.16.0.120','31872fcefa33','wks120.domain.net','Description of client'],
    ['server1','172.16.0.125','4791ca3d7279','wks125.domain.net','Description of client'],
    ['server1','172.16.0.132','6035a71c930c','wks132.domain.net','Description of client'],
]

def addr_to_int(address):
    """Convert an IP address to a 32-bit int"""
    a, b, c, d = map(int, address.split('.'))
    return a * 256 * 256 * 256 + b * 256 * 256 + c * 256 + d

def int_to_addr(value):
    """Convert a 32-bit int into a tuple of its IPv4 byte values"""
    return value >> 24, value >> 16 & 255, value >> 8 & 255, value & 255

def reservationlist(reservations, serverpattern, addresspattern, hostpattern,
        start, end):

    reservationdict = dict((addr_to_int(item[1]), item)
            for item in reservations)
    startint = addr_to_int(start)
    endint = addr_to_int(end)
    for i in range(startint, endint + 1):
        try:
            item = reservationdict[i]
        except KeyError:
            addressbytes = int_to_addr(i)
            item = [
                serverpattern.format(*addressbytes),
                addresspattern.format(*addressbytes),
                '[no mac]',
                hostpattern.format(*addressbytes),
                'Unregistered']
        yield item

for entry in reservationlist(
    reservations,
    'server{3}',
    '172.16.{2}.{3}',
    'wks{3}.domain.net',
    '172.16.0.120',
    '172.16.1.132'):
    print entry 
```

这个版本使用`yield`关键字`reservationlist()`变成生成器。它不是一次将所有值保存在 RAM 中，而是一次发出一个值，直到循环完成。对于每次通过循环，它都会尝试从您的预订列表中获取实际值（使用 a`dict`进行快速访问）。如果不能，则使用该`string.format`方法用 IPv4 地址字节填充字符串模板。

## 关于地址操作的快速说明

该`int_to_addr`函数采用 32 位 IP 地址，例如：

```
AAAAAAAABBBBBBBBCCCCCCCCDDDDDDDD 
```

并返回 0-255 范围内的 4 个字节，例如：

```
AAAAAAAA, BBBBBBBB, CCCCCCCC, DDDDDDDD 
```

在该函数中，`>>`表示“将值向右旋转多少位”，“& 255”表示“仅返回最后 8 位 (128 + 64 + 32 + 16 + 8 + 4 + 2 + 1)”。

因此，如果我们传入上面的“AAAA...DDDD”数字：

*   `value >> 24`=> AAAAAAA
*   `value >> 16`=> AAAAAAABBBBBBBB。该值 & 255 => BBBBBBBB
*   `value >> 8`=> AAAAAAABBBBBBBBCCCCCCCC。该值 & 255 => CCCCCCCC
*   `value & 255`=> DDDDDDDD

这是将 32 位 IPv4 地址转换为 4 字节列表的或多或少的标准方法。当您将这些值与一个点连接在一起时，您将获得正常的“ABCD”地址格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:00:16.813

这是一个计划：

1.  将您的所有 IP 转换为`int`. 也就是说，`IP[0]*(256**3) + IP[1]*(256**2) + IP[2]*256 + IP[3]`对于 IPv4。
2.  将您获得的所有 IP 存储在一个字典中，以 IP_as_int 作为键
3.  遍历子网的所有 ip（作为整数，`range()`用于此），以及`get()`每个 IP 的 dict。如果`get()`返回 None，则打印您的默认消息以及当前 IP。否则，打印返回的列表。

所以，我们计划的第一步：

```
def ip_tuple2int(ip_tuple):
     return sum(ip_part * 256**(len(ip_tuple) - no) for no, ip_part in enumerate(ip_tuple, start=1)) 
```

稍后我们将需要一个函数来打印它们。假设我们使用：

```
def ip_int2str(ip_int):
    l = []
    while ip_int > 0:
        l.insert(0, ip_int % 256)
        ip_int /= 256

    if len(l) > 4:
        return socket.inet_ntop(socket.AF_INET6, ''.join(chr(i) for i in l))
    else:
        return '.'.join(str(i) for i in l) 
```

第二步：

```
d = {}
for rec in records:
    d[ip_tuple2int(ip2tuple(rec[1]))] = rec 
```

第三步，我们需要网络掩码。我们将假设它存储在 中`nmask`，如下所示：（`nmask = ip_tuple2int(ip2tuple("255.255.254.0"))`是的，这个掩码很不寻常，因为它最好解决更普遍的问题。

```
min_ip = d.keys()[0] & nmask
max_ip = min_ip | nmask ^ 2**int(math.ceil(math.log(nmask, 2))) - 1
    # the right-hand of the '|' is just the bitwise inversion of nmask
    # because ~nmask gives a negative number in python

for ip_int in range(min_ip, max_ip + 1):
    row = d.get(ip_int)
    if row:
        print row
    else:
        print [None, ip_int2str(ip_int), None, None, None] 
```

.

所以，这结束了解决方案。此处提供的代码同时支持 IPv4 和 IPv6：它已在两种情况下的某些输入上进行了测试，具有以下内容`ip2tuple()`

```
def ip2tuple(ip_str):
    try:
        ip_bin = socket.inet_pton(socket.AF_INET, ip_str)
    except socket.error:
        ip_bin = socket.inet_pton(socket.AF_INET6, ip_str)

    return [ord(c) for c in ip_bin] 
```

如果您还想接受 IPv6，您的问题中的代码仍然需要调整。

最后，此代码还支持任何网络掩码，只要设置了地址类型的最高有效位即可。

**编辑：**更多关于两个复杂的行：min_ip 和 max_ip

所以，我们有

```
min_ip = d.keys()[0] & nmask
max_ip = min_ip | nmask ^ 2**int(math.ceil(math.log(nmask, 2))) - 1 
```

计算我们范围的最小和最大 ip。让我们分解它们！

```
min_ip = d.keys()[0] & nmask 
```

我们在这里取一个任意的 ip `d.keys()[0]`，并将其与网络掩码进行“与”运算：我们按原样保存 ip 中不变的位，并将构成可变部分的位归零。

```
max_ip = min_ip | nmask ^ 2**int(math.ceil(math.log(nmask, 2))) - 1 
```

为了计算最大 ip，我们将子网的 ips 的常数部分存储在 min_ip 中，然后我们“添加”（二进制或）ips 的可变部分，所有位都设置为 1。这是通过计算 a与 nmask大小相同的 1 的二进制行`2**int(math.ceil(math.log(nmask, 2))) - 1`并与 nmask 进行异或运算，以便 nmask 中设置为 1 的所有位变为 0，并且网络掩码的所有低位 0 变为 1。

为什么这个解决方案？因为即使它不太清楚，它也会自动适应地址类型。它甚至可能支持 4096 位地址——甚至更多！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T18:22:58.873

用 numpy 完成

```
import numpy as np

reservations = [
    # [DHCP SERVER, IP ADDRESS, MAC ADDRESS, HOSTNAME, DESCRIPTION]
    ['server1','172.16.0.120','31872fcefa33','wks120.domain.net',
    'Description of client'],
    ['server1','172.16.0.125','4791ca3d7279','wks125.domain.net',
    'Description of client'],
    ['server1','172.16.0.132','6035a71c930c','wks132.domain.net',
    'Description of client'],
]
occupied_ip = []
for i in reservations:
    occupied_ip.append(int(i[1][-3:]))
occupied_ip = np.array(occupied_ip)

iplist = np.arange(256)
idx = np.in1d(iplist,occupied_ip)    #Where are the two arrays equual?
idx = np.logical_not(idx)            #Where are they NOT equal
freeip = iplist[idx]

unreserved = []
for i in range(len(freeip)):
    unreserved.append(["server1", "172.16.0."+str(freeip[i]), "Unassigned MAC",
    "unknown domain"])
    print unreserved[i] 
```

生产

```
....
    ['server1', '172.16.0.117', 'Unassigned MAC', 'unknown domain']
    ['server1', '172.16.0.118', 'Unassigned MAC', 'unknown domain']
    ['server1', '172.16.0.119', 'Unassigned MAC', 'unknown domain']
    ['server1', '172.16.0.121', 'Unassigned MAC', 'unknown domain']
    ['server1', '172.16.0.122', 'Unassigned MAC', 'unknown domain']
    ['server1', '172.16.0.123', 'Unassigned MAC', 'unknown domain']
    ['server1', '172.16.0.124', 'Unassigned MAC', 'unknown domain']
    ['server1', '172.16.0.126', 'Unassigned MAC', 'unknown domain']
    ['server1', '172.16.0.127', 'Unassigned MAC', 'unknown domain']
    ['server1', '172.16.0.128', 'Unassigned MAC', 'unknown domain']
    ['server1', '172.16.0.129', 'Unassigned MAC', 'unknown domain']
    ['server1', '172.16.0.130', 'Unassigned MAC', 'unknown domain']
    ['server1', '172.16.0.131', 'Unassigned MAC', 'unknown domain']
    ['server1', '172.16.0.133', 'Unassigned MAC', 'unknown domain']
... 
```

# php - Php file_get_contents 在本地服务器中不起作用

> ID：13589639
> 
> 赞同：1
> 
> 时间：2012-11-27T17:24:04.407
> 
> 标签：php, macos, localhost, file-get-contents

我在我的 MAC osX 中启用了 php 并且正常的 php 代码可以正常工作，但是我今天遇到了一个奇怪的错误

```
<?php 
$hi = file_get_contents("https://ojooo.com");
echo $hi;
?> 
```

对于上面的代码，我在本地服务器上得到以下错误。但上面的代码在我的主机上运行良好。

```
Warning: file_get_contents() [function.file-get-contents]: SSL operation failed with code 1\. OpenSSL Error messages: error:14077458:SSL routines:SSL23_GET_SERVER_HELLO:reason(1112) in /Library/WebServer/Documents/hi/index.php on line 2

Warning: file_get_contents() [function.file-get-contents]: Failed to enable crypto in /Library/WebServer/Documents/hi/index.php on line 2

Warning: file_get_contents(https://ojooo.com) [function.file-get-contents]: failed to open stream: operation failed in /Library/WebServer/Documents/hi/index.php on line 2 
```

正常`file_get_content(https://yahoo.com);`工作正常。请有人帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:27:38.917

问题是您尝试调用重定向到 SSL(https) 的该站点。然后你需要`php_openssl.dll`模块。否则它不工作。

编辑您的活动`php.ini`查找行：

`;extension=php_openssl.dll`

并取消注释。

**编辑：**

您可以制作`phpinfo()`并查看输出的顶部。在那里你可以看到`php.ini`加载了哪个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-22T09:57:33.517

`file_get_contents`我有同样的问题，我终于通过调用替换解决了`curl`。

```
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_HEADER, false);
curl_setopt($curl, CURLOPT_SSLVERSION, 3);
$content = curl_exec($curl);
curl_close($curl); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:26:28.303

您必须激活 OpenSSL。

```
;extension=php_openssl.dll 
```

消除 ;

```
extension=php_openssl.dll 
```

在你的 php.ini 文件中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-27T17:25:25.600

您的服务器 SSL 证书似乎有问题，如果甚至应该有的话。

`$hi = file_get_contents("http://ojooo.com");`改为使用

# javascript - 可访问“this”范围的模块中的 javascript 私有内部函数

> ID：13589644
> 
> 赞同：2
> 
> 时间：2012-11-27T17:24:09.427
> 
> 标签：javascript, function, scope

> **可能重复：**
> [Javascript 外部范围变量访问](https://stackoverflow.com/questions/2274162/javascript-outer-scope-variable-access)

我有一个如下所示的 javascript 模块。我遇到的主要问题是如何从私有访问“this”范围内的变量`someOtherFunc`。有没有办法`this.myvar`私下访问`someOtherFunc`

```
var mymodule = (function(){

    return {   
        MyObj : function() {

            this.myvar = 123;

            this.publicfunc = function() {
                someOtherFunc();
            };

            var someOtherFunc = function() {
                //this doesn't seem to work
                this.myvar = 456;
            };

        }
     }
} 
```

这个想法是我希望能够做类似的事情

`new mymodule.MyObj().publicfunc`，但使`someOtherFunc`私有

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:32:20.803

忘记我之前的回答。您*可以*通过添加 this 的私有版本来做到这*一点*。

```
var mymodule = (function() {
    return {   
        MyObj : function() {
            this.myvar = 123;
            var that = this;

            this.publicfunc = function() {
                someOtherFunc();
            };

            var someOtherFunc = function() {
                that.myvar = 456;
            };
            return this;
        }
    };
}); 
```

请记住，使用您的代码，每次调用 MyObj 时都会得到*一个新对象*。
所以这会做你想要的：

```
>var o = new mymodule().MyObj()
>o.myvar
123
>o.publicfunc()
>o.myvar
456 
```

但不是这个

```
>var m = new mymodule()
>m.MyObj().myvar
123
>m.MyObj().publicfunc()
>m.MyObj().myvar
123 
```

如果这不是你想要的，考虑做这样的事情

```
var mymodule = (function() {
    var myObj = null;
    this.MyObj = function() {
        if(myObj != null)
            return myObj;
        myObj = {};
        myObj.myvar = 123;

        myObj.publicfunc = function() {
            someOtherFunc();
        };

        var someOtherFunc = function() {
            myObj.myvar = 456;
        };
        return myObj;
    };
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:35:51.557

为什么不更刻意地建造它呢？

```
// this one returns an object used like:
// myModule.myInt; /* 456 */
// myModule.myFunc(); /* 124 */
var myModule = (function () {
    var secretData = 123,
        publicData = 456,

        publicFunc = function () { return privateFunc(secretData); },
        privateFunc = function (num) { return num + 1; },

        public_interface = {
            myInt  : publicData,
            myFunc : publicFunc
        };

    return public_interface;

}()); 
```

我经历了显式命名返回的公共对象的麻烦，但现在很清楚什么是公共的，什么不是公共的，然而，这些东西中的每一个都可以访问彼此的可变版本，除了一个例外如果你改变`myModule.myInt`or `publicData`，它们将不再相等。

* * *

为了演示我在下面的评论中的意思，使用它们自己的私有数据/方法创建多个实例，我只是添加了一层函数范围：

```
var myModule = (function () {

    var static_int = 789,

        makeInstance = function (/* any constructor values */) {
            var secretData = 123,
                publicData = 456,

                publicFunc = function () { return privateFunc(secretData); },
                privateFunc = function (num) {
                    console.log(static_int);
                    return num + 1;
                },

                public_interface = {
                    myInt  : publicData,
                    myFunc : publicFunc
                };

            return public_interface;
        };

    return makeInstance;
}()); 
```

你现在像这样使用它：

```
var newModule = myModule(/* instance parameters */);
newModule.myFunc(); 
```

...或者

```
var num = myModule(/* instance parameters */).myFunc(); 
```

如果你想节省内存，你可以在静态层中使用静态*辅助函数：*

```
var myModule = (function () {

    var static_int = 789,

        static_addOne = function (num) { return num + 1; },
        static_divideBy = function (dividend, divisor) { return dividend/divisor; },

        makeInstance = function (/* any constructor values */) {
            var secretData = 123,
                publicData = 456,

                publicFunc = function () { return privateFunc(secretData); },
                privateFunc = function (num) {
                    console.log(static_int);
                    return num + 1;
                },

                public_interface = {
                    myInt  : publicData,
                    myFunc : publicFunc
                };

            return public_interface;
        };

    return makeInstance;
}()); 
```

现在您拥有只编写一次的“私有”函数（即：节省内存），但任何实例都可以使用这些函数。

**这里有一个问题：**
由于作用域和闭包的工作方式，静态函数无法***访问***实例内部的值（***内部***的函数可以访问静态函数，而不是相反）。

因此，任何静态辅助函数都***必须***将值作为参数传递给它们，并且如果您要修改数字或字符串，则***必须***从该函数中返回值。

```
// inside of a private method, in any instance
var privateString = "Bob",

    privateFunc = function () {
        var string = static_helper(privateString);
        privateString = string;
        //...
    }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T17:38:31.363

`myvar`使用关键字声明`var`，将其设为私有，然后在没有`this.`:的情况下访问它

```
function MyObj(){

        var myvar = 123;

        this.publicfunc = function() {
            someOtherFunc();
        };

        var someOtherFunc = function(){

            alert(myvar);

        };            
}

var o = new MyObj();
o.publicfunc(); 
```

如果您需要公共访问权限，`myvar`则创建一个公共 getter/setter。

[jsFiddle 演示](http://jsfiddle.net/mp7sz/) ​</p>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T17:52:18.893

我认为您正在寻找的是一种封装`myvar`更改的方法。当其他一些答案运行时，`myvar`通常会保持原样，`123`因为最初返回的对象 from`mymodule`持有该初始值。

返回一个`myvar`即使在修改后也能获得值的函数，我认为这对您的问题有帮助。

这是对我有用的代码：

```
var mymodule = (function(){
    var myvar = 123,
        publicfunc = function() { myvar = 456 },
        getMyVar = function() { return myvar; };

    return {
        someOtherFunc : publicfunc,
        myPublicVar : getMyVar
     };
}());

mymodule.someOtherFunc();
alert(mymodule.myPublicVar());​  //gives you 456 
```

JSFiddle[在这里](http://jsfiddle.net/dhoerster/MRcYh/)。

我希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T17:32:28.000

你什么都不`return`是`MyObj`。

```
return this; 
```

应该修复它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T17:32:42.450

使用绑定方法：

```
var someOtherFunc = function() {
     this.myvar = 456;
}.bind(this); 
```

# soa - 在 Lotus Notes 6.5 中使用 Web 服务

> ID：13589645
> 
> 赞同：0
> 
> 时间：2012-11-27T17:24:15.247
> 
> 标签：soa, lotus-notes, lotus-domino, lotus, lotusscript

我们如何使用 Lotus Notes 6.5 中的任何 Web 服务。我看过对 Soap Connect API 的引用。这是唯一的方法吗..？

任何例子都会有很大的帮助..

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:28:31.317

R6 中没有针对 LotusScript 和 WS Consumers 的现成解决方案。您需要创建自己的系统来调整 SOAP 请求，将其发送到服务器并解析 SOAP 响应。

您不会从以这种方式使用 Web 服务中获得好处。关键是你不应该这样做。

如果您使用 Java 路由，您可以使用 Apache Axis 库来添加消费功能。

[http://axis.apache.org/axis/](http://axis.apache.org/axis/)

这是一篇非常古老的 developerworks 文章：

[http://www.ibm.com/developerworks/lotus/library/domino-webservices/](http://www.ibm.com/developerworks/lotus/library/domino-webservices/)

最终，尽管我建议升级到在 LotusScript 中支持 WS 使用者的更高版本。尽管请注意，由于编程语言的限制，LS 在 WS 中会受到影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:48:57.330

我在 R6 中所做的是使用行为类似于 Web 服务的 LotusScript 创建基于 Web 的代理。对于没有被太多用户同时调用的服务（据我记得......），它的表现相当不错 -

此演示文稿/示例可能对您有所帮助： [http](http://www.slideshare.net/billbuchan/jmp206-lotus-domino-web-services-jumpstart#btnNext) : //www.slideshare.net/billbuchan/jmp206-lotus-domino-web-services-jumpstart#btnNext Bill 演示文稿的完整文件（包括示例）可在此处下载： [http： //www.hadsl.com/HADSL.nsf/Documents/Lotusphere+2008+-+JMP206+-+Web+Services+Bootcamp!OpenDocument](http://www.hadsl.com/HADSL.nsf/Documents/Lotusphere+2008+-+JMP206+-+Web+Services+Bootcamp!OpenDocument)

另一个有用的链接（如果您想使用 SOAP/Java）： [http ://www.ibm.com/developerworks/lotus/tutorials/lswsdom65/lswsdom65-pdf.pdf](http://www.ibm.com/developerworks/lotus/tutorials/lswsdom65/lswsdom65-pdf.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T00:05:39.167

如果您使用的是 Windows，则可以使用 LotusScript 中的 COM 对象来调用 Web 服务。我自己使用的一个好方法是 PocketSOAP：[http](http://www.pocketsoap.com/) ://www.pocketsoap.com/ 。它有很多特性，比如支持 https、使用 SOAP 标头和发送附件。

许多 PocketSOAP 功能即使在本机 R8 Web 服务使用者中也不可用或难以实现，因此对于高于 Lotus Notes 6.5 的版本来说，这也是一个选项。

# ios - 在 iOS 上使用带有 Phonegap 的 HTML5 缓存清单

> ID：13589646
> 
> 赞同：4
> 
> 时间：2012-11-27T17:24:15.920
> 
> 标签：ios, html, cordova, browser-cache

我一直在尝试让我的 HTML5 缓存清单在 iOS 设备上与 phonegap 一起工作，但我无法让它工作（尽管它确实适用于应用程序的纯 Web 版本）。

有人成功使用过吗？（我只创立了两个人说它有效（[1](https://stackoverflow.com/a/3586498/1812349) , [2](http://artem.savelev.com/2012/08/phonegap-cordova-appcache/)），但我正在寻找更多反馈）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:45:52.657

试着看看这篇文章

[http://tmkmobile.wordpress.com/2012/03/04/html5-offline-solution/](http://tmkmobile.wordpress.com/2012/03/04/html5-offline-solution/)

我自己没有在 iOS 上工作过，但从它的声音来看，只要你正确设置了缓存规范，它就应该可以在 iOS 上工作。只有 Android 需要一些额外的工作。

# c# - Silverlight ListBox 不在 XAML 树中时不更新

> ID：13589651
> 
> 赞同：1
> 
> 时间：2012-11-27T17:24:29.053
> 
> 标签：c#, silverlight, xaml, listbox, observablecollection

问题的简化版本。因此，专注于技术问题而不是用户友好性。;)

我有一个列表框，里面装满了 ObservableCollection 中的项目。它显示在我的第一个视图中。

通过选择列表中的项目，用户转到另一个视图。我交换了这个视图，所以第一个不在 xaml 树中。

在第二个视图中，他们可以执行操作。其中一项操作使项目远离顶部列表（如将项目传递给另一个用户）。

第一个视图侦听该事件并可以从列表中删除该项目。Items.Remove(item) 问题是该项目并不总是从 ListBox 中消失（但它确实从基础列表中消失，我已经通过调试进行了检查）。我认为这可能与更新集合时未显示的视图有关。我已经将 SelectedItem 设置为 null 进行了测试，认为选择可能会在删除后保留在那里，但它没有任何区别。

这是一个已知的限制，列表框更新必须可见才能生效？

我可以触发一些东西来让 observablecollection 重新触发通知吗？

# c# - pinvoke SysListView 获取上下文菜单

> ID：13589665
> 
> 赞同：5
> 
> 时间：2012-11-27T17:25:13.093
> 
> 标签：c#, pinvoke

我正在尝试从**[SysListView](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318554%28v=vs.85%29.aspx)**中的 Item获取上下文菜单（*右键*单击） 。

[我知道 user32.dll GetMenu](http://www.pinvoke.net/default.aspx/user32/GetMenu.html)和[GetMenuItemCount](http://www.pinvoke.net/default.aspx/user32/GetMenuItemCount.html)等中有一个函数。

但是我怎样才能在 SysListView 中获取项目的**句柄**..

下一个问题是，我如何从菜单中“*单击*”一个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:22:26.690

首先尝试获取包含列表视图的主窗口的句柄，然后轻松找到您想要的内容，您将需要 Microsoft spy++ 才能准确找到程序窗口中的列表视图

# php - 将数组传递给文件（）？

> ID：13589668
> 
> 赞同：-2
> 
> 时间：2012-11-27T17:25:20.677
> 
> 标签：php, arrays, file

我有一个包含可变数量文件的目录，每个文件在第一行包含一个字符，其余文件内容为 CSV，例如：

```
 U
 Status4,jwalker,Tech Manual 03264
 Status3,jwalker,Status Report 3213
 Status4,rmartino,Tech Manual 52002
 ... 
```

使用此代码，我可以轻松获取目录中所有报告文件名的列表：

```
 <?php
 // Open session
 session_start();

 // Get array of reports from directory
 $files = scandir('reports');
 $files <= array_pop($files);
 $files <= array_shift($files);
 $files <= array_shift($files);

 // Extract summaries
 for ($i=0; $i <= count($files)-1; $i++) {
   $summaries[$i] = file($files[$i]);
   }
 ?> 
```

我想在第 13 行使用 file() 函数的原因是因为它可以方便地将文件分成一个数组，这样我就可以轻松引用特定的行，例如 $summaries[3][2] 来获取第三行从目录中的第四个文件（请记住，我在这里从 PHP 默认值 0 开始计算）。PHP.net 文档没有说明不使用数组作为要传递给 file() 的字符串，所以我认为有办法做到这一点。但是我只找到了常量和字符串，而不是正在传递的数组。

有人对这里有任何见解吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:48:32.253

只要数组元素的值是表示文件路径的字符串，就没有问题`$arr[$k]`。`file()`

问题是您正在扫描`reports`文件夹，并获取文件名列表而不是文件路径。您需要`reports`在文件名前添加。`file()`当找不到文件时，不这样做会导致异常。

```
 <?php
 // Open session
 session_start();

 // Get array of reports from directory
 $files = scandir('reports');

 // Extract summaries
 for ($i=0; $i <= count($files)-1; $i++) {
   if ($files[$i] == '.' || $files[$i] == '..') continue;
   $summaries[$i] = file('reports' . DIRECTORY_SEPARATOR . $files[$i]);
 }
 ?> 
```

另外，不确定以下内容是什么意思，但它实际上是在删除最后一个文件，我在回答中省略了它

```
$files <= array_pop($files); 
```

以下两行可能是删除`.`和`..`路径，我已经用循环中的检查替换了它们。

```
$files <= array_shift($files);
$files <= array_shift($files); 
```

# powershell - Powershell循环遍历两个数组并将内容添加到文件

> ID：13589669
> 
> 赞同：0
> 
> 时间：2012-11-27T17:25:21.860
> 
> 标签：powershell, powershell-2.0

我必须将一个文件中的文本添加到另一个文件的末尾，但是一个文件的内容比另一个文件短得多，所以我想继续循环遍历较短的文件，直到较长的文件完成。我使用以下代码生成初始文件（scopeout.txt）

```
$a = "NETSH Dhcp Server 192.168.10.1 Scope "
$b = " set optionvalue 6 IPADDRESS "
$Scopelist = Get-Content C:\ListOfScopes.txt

foreach ($i in $ListOfScopes)

{
$a + $i + $b >> C:\TestArea\scopeout.txt
} 
```

然后我有一个名为 newdns.txt 的文件，其中包含 4 个条目（192.168.0.10、192.168.0.11、192.168.0.12、192.168.0.13）。我想读取 scopeout.txt 的每一行，从 newdns.txt 添加 1 个条目，然后移到每个文件的下一行。我想重复这个过程，直到 scopeout.txt 完成，所以最终文件将类似于以下内容：

```
NETSH Dhcp Server 192.168.10.1 Scope 192.168.50.1 set optionvalue 6 IPADDRESS 192.168.0.10
NETSH Dhcp Server 192.168.10.1 Scope 192.168.51.0 set optionvalue 6 IPADDRESS 192.168.0.11
NETSH Dhcp Server 192.168.10.1 Scope 192.168.52.0 set optionvalue 6 IPADDRESS 192.168.0.12
NETSH Dhcp Server 192.168.10.1 Scope 192.168.53.0 set optionvalue 6 IPADDRESS 192.168.0.13
NETSH Dhcp Server 192.168.10.1 Scope 192.168.54.0 set optionvalue 6 IPADDRESS 192.168.0.10
NETSH Dhcp Server 192.168.10.1 Scope 192.168.55.0 set optionvalue 6 IPADDRESS 192.168.0.11
NETSH Dhcp Server 192.168.10.1 Scope 192.168.56.0 set optionvalue 6 IPADDRESS 192.168.0.12
NETSH Dhcp Server 192.168.10.1 Scope 192.168.57.0 set optionvalue 6 IPADDRESS 192.168.0.13
NETSH Dhcp Server 192.168.10.1 Scope 192.168.58.0 set optionvalue 6 IPADDRESS 192.168.0.10
NETSH Dhcp Server 192.168.10.1 scope 192.168.59.0 set optionvalue 6 IPADDRESS 192.168.0.11 
```

我已经尝试过使用 foreach 语句，但我不确定如何组合 2 个 foreach 语句以及如何继续循环遍历 newdns.txt 直到 scopeout.txt 完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:51:13.120

试试这个：

```
$c = 0
$ip = Get-Content C:\newdns.txt

Get-Content C:\ListOfScopes.txt | Foreach-Object{
    if ($c -gt 3) {$c=0} 
    "NETSH Dhcp Server 192.168.10.1 Scope $_ set optionvalue 6 IPADDRESS $($ip[$c])"
    $c++
} 
```

# zend-framework - 关于脚本文件夹

> ID：13589670
> 
> 赞同：0
> 
> 时间：2012-11-27T17:25:22.980
> 
> 标签：zend-framework

我在zf1 教程的[这一](http://framework.zend.com/manual/1.12/en/learning.quickstart.create-model.html)部分。

它说：

> 此时我们已经连接到数据库；在我们的例子中，它连接到位于我们的 application/data/director 中的 Sqlite 数据库..",

然后它显示了一个 sql 子句，我应该将它保存在一个名为 的文件夹中`scripts`，但是......那个文件夹在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:48:36.800

如果该文件夹不存在，您可以创建该文件夹。它的位置并不重要，因为它的内容不会被您的应用程序直接使用，但按照惯例，该文件夹将位于应用程序的根目录中。

作为参考，他是 ZF1 应用程序的推荐文件夹结构：http: [//framework.zend.com/manual/1.12/en/project-structure.project.html](http://framework.zend.com/manual/1.12/en/project-structure.project.html) - 脚本文件夹位于第 35 行。这是一个极端的例子——你的应用程序的文件夹可能比该指南中显示的要少得多。

# json - 使用 Json.NET 到数据集的 JSON

> ID：13589675
> 
> 赞同：2
> 
> 时间：2012-11-27T17:25:46.827
> 
> 标签：json, dataset, json.net

希望有人可以伸出援助之手...我正在尝试使用下面的示例将 JSON 转换为 DataSet，但是遇到了问题。我已经验证 JSON 是正确的，使用了 Kent 建议的方法。感谢您的时间和帮助！

**以下是我的 JSON：**

```
{"jsonData":[{"item1":"one"},{"item2":"two"}]} 
```

**这是我的网络服务 C# 代码：**

```
[WebMethod]
        public string setWorkOrdersUpdated(object jsonData)
        {
            try
            {
                XmlDocument xd = new XmlDocument();
                xd = (XmlDocument)JsonConvert.DeserializeXmlNode(jsonData.ToString());
                DataSet ds = new DataSet();
                ds.ReadXml(new XmlNodeReader(xd));
                return "success";
            }
            catch (Exception e)
            {
                return "ERROR: " + e + "!";
            }
        } 
```

这是我的错误输出之一：d：“错误：Newtonsoft.Json.JsonReaderException：解析值时遇到意外字符：S.路径''，第0行，位置0......”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:30:03.477

您使用的是哪个版本？因为我遇到了另一个错误（Json.net 4.5）。我已经完成了以下操作并且异常已经消失（基本上是通过根元素名称）。

**编辑：添加了完整的代码**

```
string jsonData = "{\"jsonData\":[{\"item1\":\"one\"},{\"item2\":\"two\"}]}";
XmlDocument xd = new XmlDocument();
//xd = (XmlDocument)JsonConvert.DeserializeXmlNode(jsonData.ToString()); //Throws exception "This document already has a 'DocumentElement' node."
xd = (XmlDocument)JsonConvert.DeserializeXmlNode(jsonData.ToString(), "jsonData");
DataSet ds = new DataSet();
ds.ReadXml(new XmlNodeReader(xd)); 
```

如果这不能解决您的问题，请告诉我。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T02:48:49.300

通过更新我的 c# webservice 方法解决了这个问题。

传入的 JSON 如下所示：

```
'{"data":{"jsonData":[{"id":"1","name":"Alan","url":"http://www.google.com"},{"id":"2","name":"Louis","url":"http://www.yahoo.com"}]}}' 
```

c# webservice 方法如下所示：

```
[WebMethod]
        public string myUpdate(object data)
        {
            try
            {
                string json = JsonConvert.SerializeObject(data);
                XmlDocument xd = new XmlDocument();
                xd = (XmlDocument)JsonConvert.DeserializeXmlNode(json, "jsonData");
                DataSet ds = new DataSet();
                ds.ReadXml(new XmlNodeReader(xd));
                return "success"; //return ds.Tables[0].Rows[0][2].ToString(); //just to test
            }
            catch (Exception e)
            {
                return "ERROR: " + e + "!";
            }
        } 
```

# xaml - 带有图像的按钮和带有文本的堆栈面板错过了 Windows 应用商店应用程序中的鼠标单击事件？

> ID：13589677
> 
> 赞同：0
> 
> 时间：2012-11-27T17:25:48.263
> 
> 标签：xaml, windows-store-apps

在我的 Windows 应用商店应用程序中，我使用了一个带有一些文字的星形按钮。我对按钮使用以下 XAML 代码：

```
 <Button  Name="goButton" BorderThickness="0" FontWeight="Bold" HorizontalAlignment="Right"  VerticalAlignment="Top" Margin="0,-91,33,0"  FontSize="25" IsEnabled="True" Click="goButton_Click" >
        <Grid Width="227" Height="222">
            <Image Source="Assets/redstar.png" />
            <StackPanel Orientation="Vertical" Margin="77">
                <TextBlock TextAlignment="Center" Text="Tag"></TextBlock>
                <TextBlock TextAlignment="Center" Text="ist um!"></TextBlock>
            </StackPanel>

        </Grid>
    </Button> 
```

这是按钮的样子：
![星形按钮](../Images/b60305deb2d5158c6d8e766af576468b.png)

不幸的是，通常无法识别星形区域中的点击，例如事件处理程序不是 startet。我想它与图像有关，因为如果我从网格中删除图像，它就可以正常工作。但这并不能解决我的问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:00:33.760

不要从顶部看到任何错误。你可以尝试几件事：

*   不要单击，而是尝试按钮的 Tapped 事件。
*   尝试点击容器网格。
*   摆脱网格并将所有按钮内容放在 StackPanel 中，然后尝试点击/单击它。
*   使用 MVVM 之类的模式并将您的按钮与命令相关联。

希望这些帮助！

# python - InterfaceError：无法获取Oracle环境句柄；ORACLE_HOME 正确，SQL*Plus 将连接

> ID：13589683
> 
> 赞同：12
> 
> 时间：2012-11-27T17:26:10.073
> 
> 标签：python, oracle, cx-oracle

尝试导入 cx_Oracle 时出现标准的“DLL 加载失败；找不到模块”错误。我安装了正确的即时客户端，路径都正确...运行 Dependency Walker 告诉我我缺少以下 .dll 的 MSVCR90、GPSVC、IESHIMS。

我正在为 Oracle 11g 和 Python 2.7 运行即时客户端。有人有想法么？我发现的大多数答案都包含不正确的路径，但似乎并非如此……此外，我在系统的其他任何地方都找不到这些 .dll 中的任何一个。

编辑：我最终安装了 Oracle XE 11g（32 位）；Python 2.7 和 cx_Oracle 也是 32 位的（我还应该补充一点，我在 Windows 上）。cx_Oracle 现在安装干净；但是在连接时我收到一个错误：

```
InterfaceError: Unable to acquire Oracle environment handle 
```

ORACLE_HOME 路径正确，PATH 文件夹中的 bin 也是正确的...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T19:07:42.927

您运行的是哪个版本的 Windows？它是 32 位还是 64 位？

您的 Oracle Instant Client 是[32](http://www.oracle.com/technetwork/topics/winsoft-085727.html)位还是[64](http://www.oracle.com/technetwork/topics/winx64soft-089540.html)位？

你的 Python 安装是[32](http://www.python.org/ftp/python/2.7.3/python-2.7.3.msi)位还是[64](http://www.python.org/ftp/python/2.7.3/python-2.7.3.amd64.msi)位？

你的 cx_oracle 是正确的版本吗？[32](http://prdownloads.sourceforge.net/cx-oracle/cx_Oracle-5.1.2-11g.win32-py2.7.msi?download)位还是[64](http://prdownloads.sourceforge.net/cx-oracle/cx_Oracle-5.1.2-11g.win-amd64-py2.7.msi?download)位？

MSVCR90.dll 是 Microsoft Visual C++ 2008 SP1 Redistributable 包的一部分。

[这里](http://www.microsoft.com/en-us/download/details.aspx?id=2092)有 32 位版本，[这里](http://www.microsoft.com/en-us/download/details.aspx?id=5582)有64 位版本。

如果您`C:\Program Files\Internet Explorer\Ieshims.dll`的版本为Windows 是 Vista 或更新版本。

GPSVC.dll 应该存在于`C:\Windows\System32`.

Dependency Walker 将最后 2 个 DLL 报告为缺失，因为 Windows 错误报告使用 IEFrame.DLL 并延迟加载，这意味着它们可能永远不会真正需要。

我发现为了让 cx_oracle 干净地导入，您需要确保其依赖项的版本匹配。您还需要确保 Oracle 客户端安装与您匹配`ORACLE_HOME`，并且您的 PATH 变量包含`%ORACLE_HOME%/bin`设置为环境变量或在注册表中，并且您的 tnsnames.ora 文件位于 TNS_ADMIN 设置的值中。正如**Emmanuel**的回答中所述，未设置的 TNS_ADMIN 设置的默认值为`%ORACLE_HOME%\network\admin`.

除非绝对必要，否则我也很少使用 oracle 安装程序的即时客户端版本，因为与其他版本不同，它不会始终确保正确设置或维护路径、ORACLE_HOME 或 TNS_ADMIN，这会导致 tnsnames.ora 和 OCI.dll 不存在成立。当您在同一台机器上有多个 Python 版本或 Oracle 版本时，这会变得更加复杂。

要显式设置它们，您可以使用环境变量（用户或系统），它们位于控制面板中的系统图标、高级系统设置任务、高级选项卡、环境按钮下。

关于`InterfaceError: Unable to acquire Oracle environment handle`，这特别发生在与不解析 OCI.dll 相对的情况下，cx_Oracle 不知道要使用哪个 OCI.dll，通常是这种情况，因为 PATH 变量包含两个或多个包含 OCI.dll 的搜索目录。

特别是确保您的 PATH 仅包含来自即时客户端安装或 Oracle 11G XE 安装的一个即时 OCI.dll 应该可以解决您的问题。

您是否在安装 Oracle 11G XE 之前卸载了即时客户端？

将以下内容粘贴到命令提示符中。

`echo The current ORACLE_HOME is %ORACLE_HOME%`

`echo The current TNS_ADMIN is %TNS_ADMIN%`

`echo The current PATH is %PATH%`

查看这些变量的当前值。

**更多资源**

*   [设置环境变量示例图](http://lh5.ggpht.com/_0E9WO5RZWuc/TTSeprYupvI/AAAAAAAACSU/KVeURAM90Is/image_thumb%5B3%5D.png?imgmax=800)
*   [cx_oracle 关于缺少 TNS_ADMIN 的邮件](http://comments.gmane.org/gmane.comp.python.db.cx-oracle/2173)
*   [Windows 上 cx_oracle 的安装说明](http://mostperfect.net/blog/2010/07/28/installing-cx_oracle-on-windows/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T18:42:24.560

我遇到了同样的问题：您必须设置变量`ORACLE_HOME`以匹配您的 Oracle 客户端文件夹（在 Unix 上：例如通过 shell；在 Windows 上：如果配置面板的环境变量中不存在新变量，则创建一个新变量）因为这是`cx_Oracle`模块可以链接到它的方式。

您的文件夹`$ORACLE_HOME/network/admin`（`%ORACLE_HOME%\network\admin`在 Windows 上）是您的`tnsnames.ora`文件应该存在的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-19T09:14:00.040

## 更新 06.10.2020

[出于安全原因](https://developer.apple.com/library/archive/documentation/Security/Conceptual/System_Integrity_Protection_Guide/RuntimeProtections/RuntimeProtections.html)，MacOS DYLD_LIBRARY_PATH 似乎未设置：

> 生成受系统完整性保护限制的进程的子进程，例如通过在与 NSTask 的捆绑中启动辅助进程或调用 exec(2) 命令，重置该子进程的 Mach 特殊端口。启动受保护进程时会清除任何动态链接器 (dyld) 环境变量，例如 DYLD_LIBRARY_PATH。

几种可能的解决方案：

*   将脚本中的 shebang 行从 env (eg `#!/usr/bin/env python2.7`) 替换为 python ( `#!.../venvs/project11/bin/python2.7`)，如下所述
*   在调用 python 脚本的脚本中设置 DYLD_LIBRARY_PATH
*   像这样调用脚本：`DYLD_LIBRARY_PATH=... <script-to-run>`
*   在 shell（.bash_profile 或类似）中设置 DYLD_LIBRARY_PATH 并使用`source/. <script-to-run>`

## 较早的分析

我在我的案例中发现如下：

*   可重定位模式下的 virtualenv 设置 (--relocatable) 使用[/usr/bin/env](https://en.wikipedia.org/wiki/Env)实用程序作为django-admin.py 的[shebang](https://en.wikipedia.org/wiki/Shebang_(Unix))：

    ```
    #!/usr/bin/env python2.7 
    ```

*   [env](https://en.wikipedia.org/wiki/Env)是编写可在各种*n* x 环境中运行的 unix 脚本的便捷实用程序

*   **在 OSX**（我使用的是 macos 10.12 Sierra）上，出于某种原因**/usr/bin/env 隐藏了一些在父进程中可见的系统变量**- 在这种情况下，**DYLD_LIBRARY_PATH**不会转移到子进程。测试：

    ```
    set|grep DYLD_LIBRARY_PATH
    DYLD_LIBRARY_PATH=.../oracle/instantclient_11_2

    env|grep DYLD_LIBRARY_PATH
    # nothing 
    ```

*   再检查一次::

    ```
    python -c "import os; print os.environ.get('DYLD_LIBRARY_PATH')"
    .../instantclient_11_2:/usr/local/opt/openssl/lib

    # put the same line in first line of django-admin.py 
    # and you will get no output for DYLD_LIBRARY_PATH 
    ```

*   有趣的是，在 Linux（例如 CentOS）上，情况并非如此，DYLD_LIBRARY_PATH 和 LD_LIBRARY_PATH 在子进程中可见

*   由于这个 cx_oracle.so 无法加载所需的 oracle 库，它失败并出现错误：

    ```
    Unable to acquire Oracle environment handle 
    ```

解决方案是在 django-admin.py 中更改 shebang：

*   从：

    ```
    #!/usr/bin/env python2.7 
    ```

*   类似于（检查您的python venv安装：哪个python）：

    ```
    #!.../venvs/project11/bin/python2.7 
    ```

*   它也像这样工作 - 但不如以前的解决方案灵活::

    ```
    #!/usr/bin/env DYLD_LIBRARY_PATH=<put-full-path->/instantclient_11_2 python2.7 
    ```

*   或者在使用 cx_Oracle 或任何其他 DYLD_LIBRARY_PATH 依赖模块时，最简单的方法**是不要在 OSX 中使用可重定位的 virtualenv 设置**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-24T22:21:15.680

我记得不得不把它弄得一团糟*才能*让它工作。在我`.bash_profile`运行 Oracle XE 的系统上，我有：

```
export ORACLE_HOME=/usr/lib/oracle/xe/app/oracle/product/10.2.0/server
export SID=XE
export LD_LIBRARY_PATH=$ORACLE_HOME:$ORACLE_HOME/lib
export PATH=$PATH:$ORACLE_HOME/bin 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-05-07T07:25:14.647

也许您可以将所有带有“.dll”扩展名的文件复制到 Python 的安装路径中，例如“%python_home%\Lib\site-packages”。

# asp.net-mvc-3 - 如何在 MVC 中显示下拉菜单中的文本

> ID：13589687
> 
> 赞同：0
> 
> 时间：2012-11-27T17:26:20.320
> 
> 标签：asp.net-mvc-3, jquery

我有一个部分视图，必须显示下拉更改的记录。值正确出现，但未显示在 tex 框中。请帮忙。我的部分视图的代码如下所示

```
@using (Ajax.BeginForm("W2State", new AjaxOptions() { UpdateTargetId = "model", OnSuccess = "w2Updated", InsertionMode = InsertionMode.Replace, HttpMethod = "Post" } ))
{

    <fieldset id="currencyView" class="detailView">
        <table>
            <tr>
                <td style="width: 100px;">Select Agency </td> 
                <td> 
                @*@Html.DropDownListFor(model => model.ReportingAgencies, new SelectList(Model.ReportingAgencies, "SelectedAgency.AgencyGuid", "SelectedAgency.Name"), new { id = "dropDownReportAgencies" })*@
               @Html.DropDownListFor(model => model.ReportingAgencies, new SelectList(Model.ReportingAgencies, "SelectedAgency.AgencyGuid", "SelectedAgency.Name"), "--Select An Agency--", new { id = "dropDownReportAgencies" })
                </td>              
            </tr>
            <tr class="seperator"></tr>
            <tr class="seperator"></tr>

            <tr>
                <td style="width: 100px;">@Html.LabelFor(model => model.W2StateLocal.Wages)</td> 
                <td> @Html.TextBoxFor(model => model.W2StateLocal.Wages)</td> 
            </tr>
            <tr>
                <td style="width: 100px;">@Html.LabelFor(model => model.W2StateLocal.Tax)</td> 
                <td>@Html.TextBoxFor(model => model.W2StateLocal.Tax)</td> 
            </tr>
        </table>
        <div id="rightButtonControls">        
            @if (Model.IsEditable)
            {
                <button id="btnSave" value="save">Save</button>                
            }
        </div>    
    </fieldset>
}

        @Html.HiddenFor(model => model.CompanyId, new { id = "CompanyId" })
        @Html.HiddenFor(model => model.EmployeeId, new { id = "EmployeeId" })
        @Html.HiddenFor(model => model.FilingYear, new { id = "FilingYear" })

<script type="text/javascript">
    $(document).ready(function () {
        $("#divLoader").css('display', 'none');
        $('#dropDownReportAgencies').change(function () {

            var selectedAgency = $('#dropDownReportAgencies option:selected').val();

            var CompanyId = $('#CompanyId').val();

            var EmployeeId = $('#EmployeeId').val();

            var FilingYear = $('#FilingYear').val();

            var url = '@Url.Action("W2State", "W2Generation")';
            $.get(url, { agencyId: selectedAgency, companyId: CompanyId, employeeId: EmployeeId, filingYear: FilingYear },
                function (data) {
                            });

        });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:38:16.493

您想通过 jQuery 从 mvc 中的下拉列表中获取文本...

您的代码是正确的，但只是缺少一些东西..您使用过

```
var selectedAgency = $('#dropDownReportAgencies option:selected').val(); 
```

但是你必须使用'text'而不是'val'..这意味着

```
var selectedAgency = $("#dropDownReportAgencies option:selected").text(); 
```

试试这个....

# java - 带圆角和透明背景的位图

> ID：13589691
> 
> 赞同：1
> 
> 时间：2012-11-27T17:26:28.183
> 
> 标签：java, android, bitmap

我正在尝试使用下面的代码来圆位图的角落。问题是，无论我将油漆的颜色设置为什么，例如`Color.TRANSPARENT`，它始终是黑色的。我如何才能*实际*剪辑位图的角，而不仅仅是将它们涂成黑色？

谢谢！

```
 public static Bitmap roundCorners(Bitmap src, int radius) {
    //Create a *mutable* location, and a canvas to draw into it
    int width = src.getWidth();
    int height = src.getHeight();
    Bitmap result = Bitmap.createBitmap(width, height, Config.ARGB_8888);
    Canvas canvas = new Canvas(result);
    Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
    RectF rect = new RectF(0, 0, width, height);
    Shader bitmapShader = new BitmapShader(src, TileMode.CLAMP, TileMode.CLAMP);
    paint.setColor(0xFF000000);
    paint.setShader(bitmapShader);
    canvas.drawRoundRect(rect, radius, radius, paint);
    return result;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:30:07.213

有一种更简单的方法可以一次性使用。只需绘制一个圆角矩形，但在 Paint 上设置一个 BitmapShader。这将用您的位图填充圆角矩形。无需更改 xfermode 或调用 drawBitmap。

# android - 在 Eclipse 中通过 Intent 在 Facebook 上共享图像

> ID：13589695
> 
> 赞同：0
> 
> 时间：2012-11-27T17:26:35.750
> 
> 标签：android, facebook

我正在使用以下代码将图像共享到 facebook，但它不起作用。

```
 Intent share = new Intent(Intent.ACTION_SEND);
                share.setType("image/png");
                share.putExtra(Intent.EXTRA_STREAM,
                Uri.parse("/sdcard/img1.png"));
                startActivity(Intent.createChooser(share, "Share Image")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:43:32.987

```
Intent sharingIntent = new Intent(Intent.ACTION_SEND);
Uri screenshotUri = Uri.parse(path);
sharingIntent.setType("image/png");
sharingIntent.putExtra(Intent.EXTRA_STREAM, screenshotUri);
startActivity(Intent.createChooser(sharingIntent, "Share image using")); 
```

一，它应该按照这个顺序只是为了可读性和合理的原因

1.  你需要说错误是什么......

2.  永远不要硬编码图像“/sdcard/img1.png”的路径，而是使用 getExternalStorageDirectory()

# sas - 使用输入捕获行的其余部分

> ID：13589696
> 
> 赞同：2
> 
> 时间：2012-11-27T17:26:38.287
> 
> 标签：sas

我有一些代码，我试图将前两个单词保存到它们自己的变量中，并将它们之后的所有内容保存到第三个变量中。有没有一种优雅的方法可以通过输入语句来做到这一点？

我知道我可以将整个字符串读入一个变量，然后将它分成我需要的部分，但是可以使用`input`命令吗？

```
data email_list;
  attrib word1 word2 everything_else length=$1000;
  infile datalines truncover;
  input word1 $
        word2 $
        everything_else $
        ;
datalines;
one two blah di blah
;
run; 
```

解决方案将具有：

```
word1 = "one"
word2 = "two"
everything_else = "blah di blah" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:40:58.130

我不认为你可以用列表输入来做到这一点。但是，您可以通过在中途切换来做到这一点：

```
data email_list;
  attrib word1 word2 everything_else length=$1000;
  infile datalines truncover;
  input word1 $
        word2 $ @;

  input everything_else $1000\. ;
  put _all_;
datalines;
one two blah di blah
;
run; 
```

# c# - 当 TreeView 失去焦点时，如何保持 KMLTreeView 项目“选中”？

> ID：13589700
> 
> 赞同：2
> 
> 时间：2012-11-27T17:26:42.810
> 
> 标签：c#, winforms, treeview, google-earth-plugin

在 Google 地球中，当单击地球时，KMLTreeView 中选定项目的背景颜色会变暗。在我基于 C# 的应用程序中，TreeView 节点失去了所有颜色，所以我不知道选择了哪个项目。

同样，当我单击其关联的地标时，我希望树视图节点突出显示，这在 GE 中也是如此。

我认为这是默认行为，因此我不能将地标与 kmltreeview 正确关联。下面是我用于创建节点并将其添加到地球以及 kmltreeview 控件的代码。是否有什么我做错或没有做才能使用默认行为？

谢谢！

```
dynamic placemark = KmlHelpers.CreatePlacemark(ge1,
                                               Coord,
                                               d.sSerialNumber,
                                               d.sNickname,
                                               "Device Type: " + d.sName + "<p>" +
                                               "IP Address: " + d.sIPAddress + "<p>" +
                                               "ESN: " + d.sSerialNumber + "<p>" +
                                               "<a href=\"http://localhost/index.html#"
                                               + d.sSerialNumber + "\">Details</a>");

var styleMap = ge1.createStyleMap("");

// Create normal style for style map.
var normalStyle = ge1.createStyle("");
var normalIcon = ge1.createIcon("");
normalIcon.setHref("http://maps.google.com/mapfiles/kml/shapes/truck.png");
normalStyle.getIconStyle().setIcon(normalIcon);

// Create highlight style for style map.
var highlightStyle = ge1.createStyle("");
var highlightIcon = ge1.createIcon("");
highlightIcon.setHref("http://maps.google.com/mapfiles/kml/shapes/truck.png");
highlightStyle.getIconStyle().setIcon(highlightIcon);
highlightStyle.getIconStyle().setScale(2.0);
styleMap.setNormalStyle(normalStyle);
styleMap.setHighlightStyle(highlightStyle);

// Apply stylemap to a placemark.
placemark.setStyleSelector(styleMap);

kmlTreeView.ParseKmlObject(placemark); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:55:21.870

KmlTreeView继承自标准[TreeView 控件](http://msdn.microsoft.com/en-us/library/ch6etkw4.aspx)，因此您可以使用[HideSelection](http://code.google.com/p/winforms-geplugin-control-library/wiki/KmlTreeView)[属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.hideselection.aspx)。默认情况下，这设置为，但是...`True`

> 当此属性设置为 false 时，TreeView 控件中的选定节点保持突出显示的颜色与 TreeView 控件失去焦点时当前选择的颜色不同。当用户单击表单上的不同控件或移动到不同的窗口时，您可以使用此属性使用户选择的项目保持可见。

要在代码中执行此操作，例如：

```
kmlTreeView.HideSelection = False; 
```

此外，可以在控件的可视化设计器中设置属性，只需选择 KmlTreeView，然后查看属性。最后双击`HideSelection`设置为`False`

**更新：**

对于问题的第二部分，当单击相应功能时突出显示一个节点，您需要编写一个自定义事件处理程序，然后使用 KmlTreeView 的`GetNodeById`方法。像下面这样的东西应该可以工作。

```
private void GEWebBrowser1OnPluginReady(object sender, GEEventArgs geEventArgs)
{
    this.geWebBrowser1.AddEventListener(geEventArgs.ApiObject.getGlobe(), EventId.MouseDown);
    this.geWebBrowser1.KmlEvent += geWebBrowser1_KmlEvent;
}

void geWebBrowser1_KmlEvent(object sender, GEEventArgs e)
{
    // the feature that the mousedown event fired on
    dynamic feature = e.ApiObject.getTarget();

    // If you have other events added you will need some conditional logic here
    // to sort out which event has fired. e.g.
    // if(e.EventId == EventId.MouseDown)
    // if(GEHelpers.IsApiType(feature, ApiType.KmlPlacemark);
    // etc..

    string id = feature.getId(); // the features id
    KmlTreeViewNode node = myKmlTreeView.GetNodeById(id);   // find the corresponding node...    
    if(node == null) { return; } // no corresponding node...

    // set the selected node to the feature node.
    myKmlTreeView.SelectedNode = node; 

    // make sure the node is visible in the treeview
    if (!node.IsVisible)
    {
        node.EnsureVisible();
    }
} 
```

# php - 如何使用 php 搜索文件（需要 linux find 的替代方法）

> ID：13589703
> 
> 赞同：0
> 
> 时间：2012-11-27T17:26:47.827
> 
> 标签：php, file, search, find

我需要执行以下 linux find 命令

```
find /home/*/mail/ -type d -name ".test" > tmp_file 
```

但是使用 php （因为 find 命令由于某种原因在某些操作系统中冻结）。如何使用 php 进行此搜索并将结果放入 tmp_file？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:32:24.230

你可以随时使用`FilesystemIterator`，`DirectoryIterator`

[http://ca2.php.net/manual/en/class.filesystemiterator.php](http://ca2.php.net/manual/en/class.filesystemiterator.php)

[http://ca2.php.net/manual/en/class.directoryiterator.php](http://ca2.php.net/manual/en/class.directoryiterator.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:39:19.473

您可以使用 glob 函数。

看看[http://php.net/manual/en/function.glob.php](http://php.net/manual/en/function.glob.php)

# php - PHP修改代码以避免匿名函数

> ID：13589707
> 
> 赞同：2
> 
> 时间：2012-11-27T17:26:55.493
> 
> 标签：php, anonymous-function

我找到了一些解决我一直遇到的排序问题的方法，但是代码在 PHP 中使用了匿名函数。我使用的是 5.2.17 版本，我相信不支持匿名函数。

我将如何更改以下代码块以便在 PHP 5.2.17 中使用它们

```
$keys = array_flip($order);

usort($items, function($a, $b) use($keys)
{
    return $keys[$a['id']] - $keys[$b['id']];
}); 
```

从[PHP按其他数组排序多维数组](https://stackoverflow.com/questions/8437076/php-sort-multidimensional-array-by-other-array)

和

```
$sorted = array_map(function($v) use ($data) {
    return $data[$v - 1];
}, $order); 
```

来自[PHP - 按另一个数组对多维数组进行排序](https://stackoverflow.com/questions/7814420/php-sort-multi-dimensional-array-by-another-array)

更新：问题之一是我不确定如何使用变量 $a、$b 和 $v。所以我不确定如何创建普通函数，从而绕过匿名函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:37:17.450

这两个匿名函数都使用该`use`子句将变量传递到本地范围。

您可以使用对象方法实现相同的目的，其中对象具有这些变量作为属性。

在对象方法中，您可以访问这些。

```
$sorted = array_map(function($v) use ($data) {
    return $data[$v - 1];
}, $order); 
```

示例性映射对象可能如下所示：

```
class MapObj
{
    private $data;
    public function __construct($data) {
        $this->data = $data;
    }

    public function callback($v) {
        return $this->data[$v - 1];
    }
} 
```

如您所见，它具有相同的功能，但只是用 PHP 5.2 语法编写的。

它的用法：

```
$map = new MapObj($data);
$callback = array($map, 'callback');
$sorted = array_map($callback, $order); 
```

这就是它的工作原理。对象方法的回调总是以`array`带有两个成员的形式编写，第一个是对象实例，第二个是对象方法的名称。

当然，您可以将其扩展为将映射函数放入映射对象中，因此更直接：

```
class MapObj
{
    ...

    public function map(array $order) {
        $callback = array($this, 'callback');
        return array_map($callback, $order);
    }
} 
```

新用法：

```
$map = new MapObj($data);
$sorted = $map->map($order); 
```

如您所见，这可能会使用法更直接。我必须承认，我的方法命名在这里并不是很出色，所以我为您的改进留出了一些空间。

另一个好处是，您可以将回调方法的可见性设为私有。

* * *

在回调中将要使用的数据作为参数传递给映射函数的情况。那是因为你写了你已经有一个你想使用的类，但是你不能触摸构造函数。所以给定的例子有点短。

这是另一个不使用构造函数的示例，我将其删除：

```
class MyObj
{
    private $data;

    private function callback($v) {
        return $this->data[$v - 1];
    }

    public function map($order, $data) {
        $callback = array($this, 'callback');
        $this->data = $data;
        return array_map($callback, $order);
    }
} 
```

如您所见，不再需要构造函数来传递`$data`，而是将其`map()`作为附加参数传递给方法。用法：

```
$myObj = new MyObj(....); // somewhere.

// later on:

$myObj->map($order, $data);

// could be also:

$this->map($order, $data); 
```

如您所见，如何设置私有成员变量取决于您。做适合工作的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:36:52.903

你这里有一个闭*包*`$data`——没有匿名函数就不可能 100% 重写它。这是最接近的可能近似值：

```
function _array_sort_callback($a, $b) {
    global $_array_sort_callback__keys;
    return $_array_sort_callback__keys[$a['id']] - $_array_sort_callback__keys[$b['id']];
}

... {
    $keys = array_flip($order);
    global $_array_sort_callback__keys;
    $_array_sort_callback__keys = $keys;
    usort($items, "_array_sort_callback");
} 
```

请注意，我在全局名称前面加上了前缀，以避免发生冲突。函数名称和全局名称在您的应用程序中都必须是唯一的。

另外，请记住 PHP 5.2.17 已过时且不受支持。您应该尽快迁移出去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:40:31.460

如果你想模拟一个闭包，在特定时间对变量进行快照，你可以使用一个简单的基类作为值的容器，然后只定义子类来实现比较逻辑。

未经测试

```
// base class exists purely to capture the value of some variables at instantiation time
// kinda like a closure
class VarCapture {
    protected $vars;
    function __construct($vars) {
        $this->vars = $vars;
    }
}
class ItemComparer extends VarCapture {
    function compare($a, $b) {
       $keys = $this->vars['keys'];
       return $keys[$a['id']] - $keys[$b['id']];
    }
}

class PluckMapper extends VarCapture {
    function pluck($v) {
        $data = $this->vars['data'];
        return $data[$v - 1];
    }
}
$keys = array_flip($order);
$ic = new ItemComparer(compact('keys'));
$callable = array($ic, 'compare');
usort($items, $callable);

$pm = new PluckMapper(compact('data'));
$callable = array($mp, 'pluck');
$sorted = array_map($callable, $order); 
```

请注意，我使用了 php 的回调伪类型 [http://php.net/manual/en/language.types.callable.php](http://php.net/manual/en/language.types.callable.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T01:35:31.017

您还可以将其重写为 5.3 之前的匿名函数，例如 la `create_function()`。尽管`create_function()`函数通常不充当闭包，但您可以使用一些技巧（不使用全局变量）使它们在某些有限的情况下充当闭包。您将封闭变量直接编码到函数的源代码中。限制是数据只能单向 - 在; 封闭变量只能是“简单”数据类型，如数字、字符串和数组；和创建的函数`create_function`永远不会被释放，内存泄漏；加上它不是很有效。但我认为这对你的例子来说已经足够了（假设你只使用数组和字符串等）。

```
$keys = array_flip($order);

usort($items, create_function('$a,$b', '$keys = '.var_export($keys,true).';
    return $keys[$a["id"]] - $keys[$b["id"]];
')); 
```

和

```
$sorted = array_map(create_function('$v', '$data = '.var_export($data,true).';
    return $data[$v - 1];
'), $order); 
```

The more general pre-5.3 solution, though, is to use an object and method as the closure, as in hakra's answer.

# java - 从字节缓冲区构建 xml 消息

> ID：13589709
> 
> 赞同：0
> 
> 时间：2012-11-27T17:27:03.803
> 
> 标签：java, xml, state-machine

我有一个传递字节数组的函数。这些字节可能包含 xml 消息的一部分、一个整体或一个整体和一部分。我已经成功地使用状态机尝试解析消息，直到今天我们意识到如果第二个来源正在向我们发送数据，我可以得到消息的前半部分，并且在第二个来源的另一条消息开始之后立即. 我希望能够通过丢弃出现故障的消息来纠正这一点。我认为我不应该存储它并保留它直到完成。

这是我的状态机：

```
for (int i = 0; i < bytes.length; i++)
    {
        byte data = bytes[i];

        //based on the read state, perform an action.  This is attempting to 
        //determine if we are reading the beginning of a message, or the end of the message.
        if (bufferIndex == BmsConstants.MAX_DRAWING_LENGTH)
        {
            resetState();               
        }

        switch (readState)
        {
            case SYNC:
                //we've read:  <
                if (data == '<')
                {
                    readState = DrawingDeviceParserState.START_LT;
                    buff[bufferIndex++] = (char) data;
                } else
                {
                    resetState();
                }
                break;
            case START_LT:
                //we've read:  <?
                if (data == '?')
                {
                    readState = DrawingDeviceParserState.START_QM;
                    buff[bufferIndex++] = (char) data;
                } else
                {
                    resetState();
                }
                break;
            case START_QM:
                //we've read:  <?x
                if (data == 'x')
                {
                    readState = DrawingDeviceParserState.START_X;
                    buff[bufferIndex++] = (char) data;
                } else
                {
                    resetState();
                }
                break;
            case START_X:
                //we've read:  <, now just read until we get to the </event>
                if (data == '<')
                {
                    readState = DrawingDeviceParserState.END_LT;
                    buff[bufferIndex++] = (char) data;
                }
                else
                {
                    buff[bufferIndex++] = (char) data;
                }
                break;
            case END_LT:
                //we've read:  </
                if (data == '/')
                {
                    readState = DrawingDeviceParserState.END_SLASH;
                    buff[bufferIndex++] = (char) data;
                }
                else
                {
                    readState = DrawingDeviceParserState.START_X;
                    buff[bufferIndex++] = (char) data;
                }
                break;
            case END_SLASH:
                //we've read:  </e
                if (data == 'e')
                {
                    readState = DrawingDeviceParserState.END_E;
                    buff[bufferIndex++] = (char) data;
                }
                else
                {
                    readState = DrawingDeviceParserState.START_X;
                    buff[bufferIndex++] = (char) data;
                }
                break;
            case END_E:
                //we've read:  </ev
                if (data == 'v')
                {
                    readState = DrawingDeviceParserState.END_V;
                    buff[bufferIndex++] = (char) data;
                }
                else
                {
                    readState = DrawingDeviceParserState.START_X;
                    buff[bufferIndex++] = (char) data;
                }
                break;
            case END_V:
                //we've read:  </eve
                if (data == 'e')
                {
                    readState = DrawingDeviceParserState.END_E1;
                    buff[bufferIndex++] = (char) data;
                }
                else
                {
                    readState = DrawingDeviceParserState.START_X;
                    buff[bufferIndex++] = (char) data;
                }
                break;
            case END_E1:
                //we've read:  </even
                if (data == 'n')
                {
                    readState = DrawingDeviceParserState.END_N;
                    buff[bufferIndex++] = (char) data;
                }
                else
                {
                    readState = DrawingDeviceParserState.START_X;
                    buff[bufferIndex++] = (char) data;
                }
                break;
            case END_N:
                //we've read:  </event
                if (data == 't')
                {
                    readState = DrawingDeviceParserState.END_T;
                    buff[bufferIndex++] = (char) data;
                }
                else
                {
                    readState = DrawingDeviceParserState.START_X;
                    buff[bufferIndex++] = (char) data;
                }
                break;
            case END_T:
                //we've read:  </event>  
                //End of the message, now we can parse it.
                if (data == '>')
                {
                    //readState = DrawingDeviceParserState.END_GT;
                    buff[bufferIndex++] = (char) data;

                    parseXml(new String(buff, 0, bufferIndex));
                    resetState();
                }
                else
                {
                    readState = DrawingDeviceParserState.START_X;
                    buff[bufferIndex++] = (char) data;
                }
                break;
        }
    } 
```

弱点是此状态机位于案例 START_X 内。我将继续阅读，直到找到标签，在 2 条消息乱七八糟地塞在一起的情况下，该标签将位于第二条消息的末尾。我希望有人能做的是要么告诉我状态机不是我应该做的，要么修改我的代码/逻辑以更好地处理这种边缘情况。

# android - Eclipse 和 Ant 构建中的 Android 资源

> ID：13589712
> 
> 赞同：0
> 
> 时间：2012-11-27T17:27:06.797
> 
> 标签：android, ant

如果我尝试在 Eclipse 中构建我的项目，它可以正常工作，但如果我使用 Ant 构建它，我会看到如下错误：

```
[javac] /mnt/sda1/development/workspaces/ws_arealpilot/ArealPilot/src/com/example/myapp/MyActivity.java:29: cannot find symbol
[javac] symbol  : variable mylayout
[javac] location: class com.example.myapp.R.id
[javac]         myLayout = (View) findViewById(com.example.myapp.R.id.mylayout); 
```

事实上，Ant 生成的 R 类不包含一些 id 和字符串，但如果我使用 Eclipse 构建项目，它们就会包含在内。

我想有些资源是“错误的”或类似的东西。所以我的问题是如何找出哪些资源会造成问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:33:22.187

那么你的项目设置有问题。

您的活动包似乎是 com.example 而 R 包是 com.example.myapp

# javascript - 在执行任何其他操作之前从 $.post 设置变量

> ID：13589714
> 
> 赞同：0
> 
> 时间：2012-11-27T17:27:13.160
> 
> 标签：javascript, jquery, ajax

我必须从数据库中加载一些数据**数组**，我这样做是这样的：

```
var priorities, users;

$.post("http://"+ document.domain + "/priority",
                function(dat){
                priorities = dat;                       
});

$.post("http://"+ document.domain + "/users",
                function(dat){
                users= dat; 
}); 
```

然后我想在插件中使用这个变量，我意识到插件在设置这个变量之前被触发，即使这个代码位于 JS 文件的开头。

有没有更好的方法从数据库加载数据数组？如果没有，我该如何在执行任何其他代码之前设置此变量？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:31:31.003

```
$.post("http://"+ document.domain + "/priority",
      function(priorities){
            $.post("http://"+ document.domain + "/users",
                function(users){
                DoSomething(priorities, users);
            });                 
       });

function DoSomething(priorities, users){
// User Priorities and Users here
} 
```

其他选择是同步调用 ajax，但我不建议这样做:)

编辑：

```
var priorities, users;

function getPriority(){
    $.post("http://"+ document.domain + "/priority",
            function(dat){
            priorities = dat;                       
    });
}

function getUsers(){
    $.post("http://"+ document.domain + "/users",
            function(dat){
            users= dat; 
    });
}

var dfd = $.Deferred();
dfd
.done([getPriority, getUsers])
.done(function() {
     //here you will have priorities and users
});

dfd.resolve(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:36:49.487

你会想使用一个控制流库，我个人喜欢使用异步[https://github.com/caolan/async](https://github.com/caolan/async)，它在浏览器和服务器端都可以工作。

**使用异步**

```
 async.waterfall([
    function(callback){
        $.post("http://"+ document.domain + "/priority", function(dat){
            callback(null, dat); 
        });
    },
    function(priorities, callback){
        $.post("http://"+ document.domain + "/users", function(dat){
            callback(null, priorities, dat);
        });
    }
], function (err, priorities, users) {
    //work with users & priorities
}); 
```

**使用回调**

```
$.post("http://"+ document.domain + "/priority", function(priorities){
    $.post("http://"+ document.domain + "/users", function(users){
          //work with users & priorities
    });                     
}); 
```

您遇到问题的原因是因为 ajax 操作是异步执行的，因为代码不会等待操作完成，而是触发回调。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:32:29.280

听起来您想要 jQuery**延迟对象**。

```
var priorities, users;
$.when(
  $.post("foo", function(data) { priorities = data; } ), 
  $.post("bar", function(data) { users = data; } )
).done(function() {
  someFunction(priorities, users); // Call your function. Values are set!
}) 
```

这只会`someFunction`在所有`post()`功能都已解决时调用。然后，您可以将`post()`函数中接收到的数据存储在更高的范围内，并在`someFunction()`.

# drupal - 用于阿拉伯语 PDF 的 Solr

> ID：13589715
> 
> 赞同：6
> 
> 时间：2012-11-27T17:27:17.420
> 
> 标签：drupal, solr, arabic, right-to-left, apache-tika

我正在尝试在 Apache Solr 中搜索阿拉伯语 PDF。问题似乎是 Tika 以相反的顺序（从左到右）而不是（从右到左）索引 PDF。

我在这里找到了关于这个问题的参考资料：

*   [Solr 阿拉伯语](https://stackoverflow.com/questions/7834401/solr-for-arabic)
*   [如何使用 Tika 解析阿拉伯文 pdf](https://stackoverflow.com/questions/10076959/how-to-parse-arabic-pdf-with-tika)
*   [http://www.linnovate.net/blog/apache-solr-search-hebrew-and-probably-arabic-documents-drupal-pdf-problem-solution](http://www.linnovate.net/blog/apache-solr-search-hebrew-and-probably-arabic-documents-drupal-pdf-problem-solution)

但是，我不知道如何在我的 apache solr 中包含最新版本的 PDFBOX 或 ICU4J。我的`Apache Solr Contrib/extraction/lib`文件夹包含`pdfbox-1.6.0.jar`和`icu4j-4.8.1.1.jar`. 从他们的项目页面中删除提到的文件并用最新的库替换它们是否足以迫使 TIKA 使用它们？

请解释一下，因为我以前没有使用 Java servlet 的经验。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:57:37.753

从您问题的标签中，我假设您正在使用 Drupal 来连接 Apache Solr。当您发送二进制文档时，Tika 可以在 Solr 中运行，或者您可以在将文档发送到 Solr 之前使用它。Drupal Solr 附件模块有一个“Tika（本地java应用程序）”的设置。在您提供的第二个链接中，他们修补了 Solr 附件模块以使用 PDFBox 而不是 Tika 来解析二进制文件，然后再将其发送到 Solr。如果您不使用 Drupal，您应该尝试类似的方法。

# jsf-2 - myfaces 2.1 h:commandButton 呈现“提交查询”

> ID：13589716
> 
> 赞同：0
> 
> 时间：2012-11-27T17:27:18.887
> 
> 标签：jsf-2, myfaces

奇怪的问题，我已经阅读了各种帖子，但还没有找到有效的答案。

当我有 ah:commandButton，我想在其中显示一个图标而不是文本时，我已经尝试过了。

```
<h:commandButton value=" " image="UpArrow.png" style="position: absolute; left: 36px; top: 17px; width: 18px; height: 18px; cursor: pointer;" title="Pan up" actionListener="#{SarWindsImagesBean.panUp('testImage.jpg')}">
    <f:ajax  render="imagePan2"/>
</h:commandButton>

<h:commandButton image="UpArrow.png" style="position: absolute; left: 36px; top: 17px; width: 18px; height: 18px; cursor: pointer;" title="Pan up" actionListener="#{SarWindsImagesBean.panUp('testImage.jpg')}">
    <f:ajax  render="imagePan2"/>
</h:commandButton> 
```

首先，大小是正确的，但我得到的不是图像，而是“提交查询”。在第二个中，我遇到了同样的问题。

为什么会呈现“提交查询”？如果我添加 value=" "，它不会显示图标，只是一个空框。

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:38:49.837

这是省略`<input type="submit">`该属性时 HTML 元素的浏览器默认值。`value`这不是由 JSF 生成的。在纯 HTML 页面中自己尝试使用这样的 HTML 元素。

至于为什么在属性存在`value`时添加`image`属性会导致空框，这可能是 MyFaces 特定的。我无法在 Mojarra 中复制它。

至于（ab）使用`image`属性来呈现背景图像，这毕竟不完全正确。您应该改用 CSS`background-image`属性，

```
<h:commandButton value=" " style="background-image: url(UpArrow.png)" /> 
```

或者只是`<h:commandLink><h:graphicImage>`如果您根本不想拥有按钮的外观：

```
<h:commandLink ...>
    <h:graphicImage value="UpArrow.png" />
</h:commandLink> 
```

# c - 为什么这个程序一直显示结果？

> ID：13589720
> 
> 赞同：0
> 
> 时间：2012-11-27T17:27:36.423
> 
> 标签：c

我编写了这个程序，它将输入的高度（以厘米为单位）更改为英尺和英寸。当我运行它时，结果不断出现而不会停止。有谁知道为什么？

```
#include <stdio.h>

int main (void)
{
  float heightcm;
  float feet;
  float inch;

  printf("Enter height in centimeters to convert \n");
  scanf("%f", &heightcm);

  while (heightcm > 0)
  {
   feet = heightcm*0.033;
   inch = heightcm*0.394;

   printf("\n %0.1f cm = %0.2f feet and %0.2f inches \n", heightcm,feet,inch);
  }
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:14:34.553

你做了一个无限循环：

```
 while (heightcm > 0)   // if user enters a height > 0 we get in
  {
   feet = heightcm*0.033; // update feet 
   inch = heightcm*0.394; // update inches

   // print the result
   printf("\n %0.1f cm = %0.2f feet and %0.2f inches \n", heightcm,feet,inch); 
  } 
```

循环中的任何地方都没有`heightcm`改变，这意味着它总是`> 0`并且你的函数将永远循环并且永远不会终止。检查在`if`这里更有意义：

```
 if (heightcm > 0)   // if user enters a height > 0 we get in
  {
   feet = heightcm*0.033; // update feet 
   ... 
```

或者您可以使用您的 while 循环并继续要求更多输入：

```
 while (heightcm > 0)
  {
    printf("Enter height in centimeters to convert \n");
    scanf("%f", &heightcm);
    ... 
```

这可能是你想要的（循环直到用户输入一个非正数）

# ruby-on-rails - 一个参数的存根方法，其他参数调用原始方法

> ID：13589726
> 
> 赞同：2
> 
> 时间：2012-11-27T17:27:47.897
> 
> 标签：ruby-on-rails, rspec, mocking, stub

对于测试期间的 API 调用，我想存根 OpenURI-open-method 以返回一个文件，该文件的内容我打包在一个常量中。但是，在同一个解析方法中，所有其他对 OpenURI open 的调用都应该正常处理

```
@obj.should_receive(:open).with do |arg|
  if arg == mypath # mypath is a string constant like "http://stackoverflow.com/questions"
    obj=double("object_returned_by_openuri_open") # create a double
    obj.stub(:read).and_return(TESTFILE) # with a stub
    obj #return the double
  else
    open(arg) # call original Open URI method in all other cases
  end
end 
```

但是，在调用解析方法时，这不起作用，它会在我的解析方法`"NoMethodError: undefined method read for nil:NilClass"`的行中返回。`f = open(mypath).read`

有谁知道如何实现这种“部分方法存根”（为一个特定参数存根方法，为其他参数调用原始方法）。其他文件是图像，所以我不想将它们作为常量存储在我的源代码中。在使测试独立于网络的扩展中，我还可以在`else`-case 中返回本地图像文件。

我会很高兴任何建议和提示:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:50:33.467

非常类似于这个[问题](https://stackoverflow.com/questions/7206453/rspec-2-detect-call-to-method-but-still-have-it-perform-its-function)

这应该工作

```
original_method = @obj.method(:open)
@obj.should_receive(:open).with do |arg|
  if arg == mypath # mypath is a string constant like "https://stackoverflow.com/questions"
   obj=double("object_returned_by_openuri_open") # create a double
   obj.stub(:read).and_return(TESTFILE) # with a stub
   obj #return the double
 else
   original_method.call(arg) # call original Open URI method in all other cases
 end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:41:30.187

您是否考虑过使用[`fakeweb`](https://github.com/chrisk/fakeweb)宝石？我相信它修补了 OpenURI 的`open`方法包装的 Net::HTTP。

```
FakeWeb.register_uri(:get, "http://stackoverflow.com/questions", :body => File.open(TESTFILE, "r")) 
```

# mysql - INSERT INTO SELECT - 用 NULL 替换一个字段

> ID：13589731
> 
> 赞同：1
> 
> 时间：2012-11-27T17:28:16.740
> 
> 标签：mysql, insert, insert-into

我正在尝试执行 INSERT INTO SELECT 语句，但是在执行此操作时，我希望 SELECT 语句中的一个字段返回 NULL 而不是原来的内容。

到目前为止，我有：

```
INSERT INTO `archive`
    SELECT *
    FROM `product`
    WHERE `id` = ? 
```

我考虑过使用以下内容，但它不起作用，因为它添加了一个额外的字段而不是替换现有的字段：

```
INSERT INTO `archive`
    SELECT *, '' AS `image`
    FROM `product`
    WHERE `id` = ? 
```

我知道我可以列出所有字段以便执行此操作，但这意味着我每次添加新字段等时都必须更新此语句。

有没有办法用上面的简短版本来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:35:49.457

不，您的两个选择是：

1.  `SELECT`在语句中单独列出字段
2.  `UPDATE`之后执行将`INSERT`列重新设置为`NULL`

第一个是正确的解决方案，IMO。它使将来的维护变得更容易（而不是看起来更困难），并且当您（或新程序员）从现在开始 6 个月后访问代码时，它会变得更加清晰。

# python - 如何在另一个模块中设置断点（不要在函数定义行设置，如果你想在函数开始执行时中断）

> ID：13589736
> 
> 赞同：44
> 
> 时间：2012-11-27T17:28:34.447
> 
> 标签：python, pdb

我正在尝试调试一个模块“main”，该模块在“another_module”的第 356 行调用了一个函数“broken_function”。我在那个函数中有一个错误，想在它的开始处放置一个断点。下面是列表。难道我做错了什么？原因，断点不起作用：

```
$ python -m pdb main
(Pdb) import sys
(Pdb) sys.path.append("/home/user/path/to/another/module")
(Pdb) import another_module
(Pdb) b another_module:356
Breakpoint 1 at /home/user/path/to/another/module/another_module.py:356
(Pdb) c
Traceback (most recent call last):
...
File "/home/user/path/to/another/module/another_module.py", line 383, in broken_function
f=open("../jobs/temptree.tre", "r")
IOError: [Errno 2] No such file or directory: '../jobs/temptree.tre'
Uncaught exception. Entering post mortem debugging
... 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-27T17:58:38.917

您正在正确设置断点。我想它不会停止，因为您正在中断的代码行没有被调用。将中断放在第 383 行。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-10-10T18:37:04.213

您还可以直接使用文件和行号设置断点，而无需导入`sys`或`another_module`。

```
(Pdb) b /home/user/path/to/another/module/another_module.py:383
Breakpoint 1 at /home/user/path/to/another/module/another_module.py:383 
```

请注意`/home/user/path/to/another/module/another_module.py`，正如其他人指出的那样，需要导入并且第 383 行需要可执行并且在执行路径中才能中断。

如需更多帮助，请键入`help b`（或就此而言，`help`后跟任何其他命令）以获取有关该命令的更多信息。

# java - 我可以将字符添加到字符串中的变量指定位置吗？

> ID：13589739
> 
> 赞同：2
> 
> 时间：2012-11-27T17:28:52.297
> 
> 标签：java, string, char

好的，这是我正在处理的行：

```
newstring.charAt(w) += p; 
```

试图在由 int 'w' 定义的字符串中的特定位置向字符串 'newstring' 添加一个字符/字符（p）。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:31:13.903

字符串在 Java 中是不可变的，所以答案是否定的。但是有很多方法可以解决它。最简单的方法是创建一个[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#StringBuilder%28java.lang.String%29)并使用该[`setCharAt()`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#setCharAt%28int,%20char%29)方法。或者`insert()`，如果您想在给定位置插入新字符。

如果您对字符串进行多次修改，您可以（并且确实应该）重用您的`StringBuilder`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:30:07.727

好吧，你不能修改你的字符串，因为`Strings`在 Java 中是不可变的。如果您尝试更改字符串，您将得到一个新的字符串对象。

现在，您可以为此使用[`String#substring`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int,%20int%29)方法，使用它可以获取由原始字符串`new string`的某些子字符串生成的方法：-`concatenation`

```
str = str.substring(0, w) + "p" + str.substring(w); 
```

但是，当然，`StringBuilder`按照@biziclop 的答案中指定的方式使用是您可以遵循的最佳方法。

# android - 在项目选择上更改选项菜单的项目

> ID：13589741
> 
> 赞同：0
> 
> 时间：2012-11-27T17:29:03.547
> 
> 标签：android, refresh, optionmenu

选择菜单上的项目后，我正在尝试更改选项菜单。这是我尝试过的：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {

    if(refresh) {

        menu.clear();
        menu.add(0, Menu.FIRST, 0, "Changed item");

    }

    return super.onPrepareOptionsMenu(menu);

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    if(item.getItemId() == R.id.refresh)
    {
        refresh = true;
        closeOptionsMenu();
        invalidateOptionsMenu();
        openOptionsMenu();
    }
    return super.onOptionsItemSelected(item);
} 
```

但我得到：

```
W/InputManagerService(192): Window already focused, ignoring focus gain of:     com.android.internal.view.IInputMethodClient$Stub$Proxy@4147c778 
```

并且代码不起作用..有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:35:55.927

> 菜单将关闭而不重新打开，只有当我重新单击菜单按钮时，我才会看到新值

我不知道在选择项目后是否保持选项菜单打开，但是您可以使用 Handler 和 Runnable 自动重新打开它。

创建几个新的字段变量：

```
private Handler handler = new Handler();
private Runnable reopenMenu = new Runnable() {
    @Override
    public void run() {
        openOptionsMenu();
    }
}; 
```

和内部`onOptionsItemSelected()`使用：

```
if(item.getItemId() == R.id.refresh)
{
    refresh = true;
    invalidateOptionsMenu(); // This is only necessary for changing an ActionBar
    handler.postDelayed(reopenMenu, 100);
} 
```

（请注意，我删除了关闭和打开菜单的调用。）
最后你应该设置`refresh = false;`，`onPrepareOptionsMenu()`因为你只需要进行一次更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:30:44.397

将第二个按钮已经在菜单上但将可见性设置为 GONE 可能会更容易，然后在需要时使其可见。

```
MenuItem = menu.findItem(R.id.menuItem);

MenuItem.setVisible(false); 
```

# jquery - 当我们切换标签时，是否可以在 jquery 标签插件上触发事件

> ID：13589743
> 
> 赞同：0
> 
> 时间：2012-11-27T17:29:16.430
> 
> 标签：jquery, jquery-ui

我使用 jquery 选项卡插件，但无法弄清楚当用户在选项卡之间切换时如何设置事件。

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T17:30:45.293

您正在寻找[`activate()`](http://api.jqueryui.com/tabs/#event-activate)活动。

```
$(".selector").tabs({
    activate: function(event, ui) {
        alert("You changed tabs");
        // Or do something more constructive...
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:31:47.533

```
activate( event, ui ) 
```

在选项卡被激活后触发（动画完成后）。如果选项卡先前已折叠，则 ui.oldTab 和 ui.oldPanel 将是空的 jQuery 对象。如果选项卡正在折叠，则 ui.newTab 和 ui.newPanel 将是空的 jQuery 对象。

```
$( ".selector" ).tabs({
    activate: function( event, ui ) {}
}); 
```

将事件监听器绑定到 tabsactivate 事件：

```
$( ".selector" ).on( "tabsactivate", function( event, ui ) {} ); 
```

# android - 如何确定 EditText 中的突出显示/下划线是否来自自动完成

> ID：13589754
> 
> 赞同：1
> 
> 时间：2012-11-27T17:29:30.127
> 
> 标签：android, autocomplete, android-edittext

我有一个扩展 EditText 的自定义视图，该视图具有用于富文本编辑的 ToggleButtons。如果我允许自动完成，我想这样做，当前单词的指示器会触发我对样式跨度的检测。

例如，在大多数设备上，自动更正符合条件的单词是下划线。当您键入时，我有一个文本观察器，它跟踪应用于文本的当前样式，并在用户切换样式按钮时添加新的 spannables。这最终会检测到下划线并打开切换。

我可以编写代码来检查是否在我们找到跨度之前设置了下划线切换。（我实际上需要为我的所有样式执行此操作，因为某些设备使用背景颜色来指示当前的自动更正单词。）但我不确定我会使用什么来触发将切换回关闭。检查他们是否输入了空格？当您选择建议的单词时会发生什么？

有人做过吗？有没有办法询问跨度是否来自自动完成或任何其他通知以知道操作系统绘制了跨度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-05T22:40:44.783

这是一个老问题，但刚才我有一个类似的问题，即在将跨度转换为 HTML 之前消除不需要的下划线。我在源代码中找到了答案`TextView`。

有一种方法`TextView#clearComposingText()`可以在自动建议期间删除 IME 应用的所有样式，保留所有其他样式。您可能会在每次用户击键后调用它，这将删除下划线。

希望这可以帮助某人。

# c# - 从数据库或标签填充文本框

> ID：13589755
> 
> 赞同：0
> 
> 时间：2012-11-27T17:29:33.917
> 
> 标签：c#, asp.net, gridview

我很难弄清楚这一点，而且应该不会太难。我想`textbox`从我的数据库或从`label`（标签已经从数据库中提取信息，因此基本上将标签中的内容复制到文本框中）填充我的。我正在使用 a `GridView`，这是我一直在尝试的代码：

C＃：

```
for (int i = 0; i < GridView1.Rows.Count; i++)
            {

                TextBox timeR = GridView1.Rows[i].FindControl("rTime") as TextBox;
                Label timeRL = GridView1.Rows[i].FindControl("labelRunScore") as Label;
                if (timeR.Text == "")
                {
                    timeR.Text = timeRL.Text;

                }

            } 
```

.aspx：

```
<asp:TemplateField  HeaderText = "Run Time">
        <ItemTemplate>
            <asp:Label ID="labelRunScore" Visible="true" runat="server" Text='<%# Eval("rTime") %>' />
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Run Time">
        <ItemTemplate>
           <div style="display:none"> <asp:TextBox ID="rTime" runat="server" type="number" Text='<%# Eval("rTime") %>' ></asp:TextBox></div>
           <input onblur="document.getElementById('<%# ((GridViewRow)Container).FindControl("rTime").ClientID %>').value = this.value" 
    type="number" style="width: 100px; height: 31px;" />
        </ItemTemplate>
    </asp:TemplateField> 
```

# java - 在这种情况下，Java 中绕过了 try catch？

> ID：13589757
> 
> 赞同：0
> 
> 时间：2012-11-27T17:29:36.570
> 
> 标签：java, multithreading, exception-handling, try-catch

通过嵌套多个线程，我设法绕过了 try catch 块。

当异常绕过try catch块时，是否有一些规则记录在案？

```
try{
  Runnable r = new Runnable() {

    @Override
    public void run() {
      System.out.println("Thread");

      Display.getDefault().syncExec(new Runnable() {
        @Override
        public void run() {
          System.out.println("ThreadGUI");
          throw new NullPointerException();
        }
      });

    }
  };

  Thread t = new Thread(r);
  t.start();

} catch(NullPointerException e) {
  //nothing
}

System.out.println("Ende"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:31:42.977

异常不会自动跨线程边界传播。如果在特定线程中抛出异常，则只能在该线程中捕获它。您的代码的词法结构在这方面没有任何区别。

以下是[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)的相关部分：

> **在抛出异常的过程中，Java 虚拟机会突然将所有在当前线程**中已经开始但尚未完成执行的表达式、语句、方法和构造函数调用、初始化器和字段初始化表达式一个一个地完成。这个过程一直持续到找到一个处理程序，该处理程序通过命名异常的类或异常类的超类来指示它处理该特定异常（第 11.2 节）。如果没有找到这样的处理程序，则异常可能由未捕获的异常处理程序的层次结构之一处理（第 11.3 节） - 因此会尽一切努力避免让异常未处理。
> 
> ...
> 
> 如果找不到`catch`可以处理异常的子句，**则终止当前线程（遇到异常的线程）。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:31:55.037

您的异常在不同的线程中被抛出。这就是为什么它没有被抓住。您可能想在新线程中捕获它并以某种方式将其传播到主线程。

# php - 使用访问令牌对 Twitter 进行经过身份验证的调用

> ID：13589761
> 
> 赞同：0
> 
> 时间：2012-11-27T17:29:45.460
> 
> 标签：php, twitter

总而言之，我有以下 PHP 代码可以从我的 Twitter 个人资料中提取最新状态。我正在使用以下代码实现此目的：

```
$url = "http://api.twitter.com/1/statuses/user_timeline.json?screen_name={$username}&count={$how_many}"; 
```

我在我的 twitter 页面上创建了应用程序并创建了一个访问令牌。我是否必须对此使用 oAuth，或者我可以简单地更新我的 twitter API 调用以使用我的访问令牌。

我询问如何执行此操作的原因是因为我已经达到了每小时 150 个请求的 API 限制。我需要使用经过身份验证的方法，这样我每小时可以接听 350 个电话。

是否有一个简单的方法或者我需要使用 Twitter oAuth 包装器才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:36:27.370

我的经验是，如果您不进行身份验证，它总是 150/小时。但请确保在获取推文后关闭与推特的连接。我不知道我们是否可以绕过这一点。我使用的是使用“https://api.twitter.com/1/statuses/user_timeline.json?screen_name=twitterusername&include_entities=1&count=5&callback=?”为用户（不是我自己）获取推文。

其中 twitterusername 可以是任何 twitter 用户

# java - springframework 3.2 Servlet 3 异步支持

> ID：13589764
> 
> 赞同：3
> 
> 时间：2012-11-27T17:29:59.457
> 
> 标签：java, spring, spring-3

我在这里阅读了新的 springframework 3.2 功能，Servlet 3 Async 支持：

[http://blog.springsource.org/2012/05/07/spring-mvc-3-2-preview-introducing-servlet-3-async-support](http://blog.springsource.org/2012/05/07/spring-mvc-3-2-preview-introducing-servlet-3-async-support)

我有一个问题。

博客文章指出spring现在支持：

1.  控制器返回一个 Callable
2.  可调用对象在后台线程 ( `TaskExecutor`)中调用
3.  响应保持打开状态 ( `request.startAsync()`)。

声明的动机是避免占用所有 Web 容器线程。不过，我的理解是这样的：

1.  Web 容器线程池是可调的。
2.  该线程池有一个硬性限制，因为最好降低服务质量，而不是通过耗尽所有资源来降低进程（例如，无界线程池和足够多的请求会发生）。
3.  servlet-3/comet 的重点是限制打开线程的数量，同时不限制与 Web 服务器的打开连接数量（因为线程很昂贵，而套接字很便宜）

因此，鉴于此，Spring 提出的功能对我来说意义不大。他们不只是在容器的有界池之上破解一个无界线程池吗？这不会错过限制线程数的要点吗？

# c++ - 识别变体类型

> ID：13589766
> 
> 赞同：1
> 
> 时间：2012-11-27T17:30:00.143
> 
> 标签：c++, boost, boost-variant

`boost::variant`通过识别其中的特定类型并将其作为成员函数参数传递给类对象，我混淆了以下问题 。考虑以下代码

```
typedef boost::variant<int, string, double> Variant;

class test{ 

  void func1 (Variant V); 
  void func2 (string s); 
  void func3 ();

}; 

test::func1(Variant V){
    // How can I identify the type of V inside the body of this function? 
Or how can I call the apply_visitor inside this function.
  /*
  if(v.type() == string) 
    func2(); 
  else if(v.type() == double) 
    funct3(); 
  */
}
int test::func2(){ cout << "func3" << endl;}
int test::func3(){ cout << "func4" << endl;}
...

int main ()
{
  test t;
      Variant V = 3;
      t.func1(V); 
      V = "hello"; 
      t.func1(V);

} 
```

我想确定在类测试中实现访问类/结构（apply_visitor）。但是，我从访问者类中实现的重载运算符调用外部成员函数，即 func3(string s) 被卡住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:06:16.160

访问者模式具体化将使编译器为您进行类型检查。您需要做的就是告诉编译器当 a在 中时*该做什么*：`string``Variant`

（查看 [http://www.boost.org/doc/libs/1_35_0/doc/html/variant/tutorial.html](http://www.boost.org/doc/libs/1_35_0/doc/html/variant/tutorial.html)中的示例）

```
struct my_dispatcher : public boost::static_visitor<> {

    test* t;
    my_dispatcher(test* t): t(t) {}

    void operator()( string s ) { t.func3(s); }
    void operator()( double d ) { t.func4(d); }
    //... for each supported type
}; 
```

并用于`boost::apply_visitor`选择正确的功能：

```
int main ()
{
  test t;
  my_dispatcher dispatcher(&t);

  Variant V = 3;
  boost::apply_visitor( dispatcher, v );

  V = "hello"; 
  boost::apply_visitor( dispatcher, v );    
} 
```

这`my_dispatcher(&t)`将创建您的 static_visitor 实现的对象，该对象将被`apply_visitor`魔术使用。

希望这就是您所期待的，因为您的问题并不是很清楚。

注意：或者，您`test`从`static_visitor`.

# c# - 如何阻止 Visual Studio 2010 在模板中自动生成控件？

> ID：13589771
> 
> 赞同：1
> 
> 时间：2012-11-27T17:30:21.033
> 
> 标签：c#, asp.net, visual-studio-2010, visual-studio-2008, asp.net-4.0

我正在创建一个`UserControl`包含一个`ListView`. 我声明如下，我尝试了其他使用`ParseChildren`and`PersistChildren`属性的方法。

```
[AspNetHostingPermission(SecurityAction.InheritanceDemand, 
    Level=AspNetHostingPermissionLevel.Minimal),
AspNetHostingPermission(SecurityAction.Demand,
    Level = AspNetHostingPermissionLevel.Minimal),
Designer(typeof(ListViewItem)),
ParseChildren(false), PersistChildren(false)]
public partial class CustomListView : System.Web.UI.UserControl, IPaneControl, INamingContainer
{ 
```

在里面我有以下代码来`ItemTemplace`设置`ListView`

```
[Browsable(false),
    DefaultValue(null),
    PersistenceMode(PersistenceMode.InnerProperty),
    TemplateContainer(typeof(ListViewDataItem), BindingDirection.TwoWay)]
public virtual ITemplate ItemTemplate
{
    get { return _lvChild.ItemTemplate; }
    set { _lvChild.ItemTemplate = value; }
} 
```

现在在该控件的使用者的模板中，我将使用

```
<ItemTemplate><asp:HiddenField runat="server" ID="ShippingAddressID" Value='<%#Eval("AddressID") %>' /></ItemTemplate> 
```

在 Visual Studio 2008 中，这导致设计器文件不会自动生成`HiddenField`ShippingAddressID，但在转到 Visual Studio 2010 时会自动生成。我怎样才能阻止它在 2010 年自动生成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:13:08.520

如果您不需要在代码隐藏的任何地方引用它，您就不能删除“runat = server”吗？

# django - 如何从 Django 中的模型中获取有投票的对象？

> ID：13589773
> 
> 赞同：0
> 
> 时间：2012-11-27T17:30:36.057
> 
> 标签：django

我正在创建一个系统来对视频的评论进行评分，例如 youtube，您可以对评论投票“喜欢或不喜欢”（带有布尔字段的 1,0），如果喜欢的次数较多，这些将出现在顶部，我知道如何获取视频的评论并显示它们，但我的问题是当我尝试获取每个评论的投票时：

我有这些模型：

```
class Video(models.Model):
    name = models.CharField()
    #and more things

class Comment(models.Model):
    text = models.TextField(max_length=250)
    video = models.ForeignKey(Video)
    user = models.ForeignKey(User)

class RatingComment(model.Model):
    comment = models.ForeignKey(Comment)
    user = models.ForeignKey(User)
    vote = models.BooleanField() 
```

因此，在我看来，我可以通过以下方式获得视频的评论：

res = Video.objects.get(alias__exact=something)

coms = Comment.objects.filter(video=res)

然后我用这个值对模板生成一个 render_to_response。但我需要用喜欢和不喜欢的数量来获得评论。

¿ 我怎样才能创建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:50:46.400

使用[额外的](https://docs.djangoproject.com/en/dev/ref/models/querysets/#extra)查询集修饰符：

```
Comment.objects.select_related('ratingcomment_set').extra(
    select={
        'likes': 'SELECT COUNT(*) FROM applabel_ratingcomment WHERE applabel_ratingcomment.comment_id = applabel_comment.id and applabel_ratingcomment.vote = 1'
        'dislikes': 'SELECT COUNT(*) FROM applabel_ratingcomment WHERE applabel_ratingcomment.comment_id = applabel_comment.id and applabel_ratingcomment.vote = 0'
    },
) 
```

# java - 詹金斯奴隶找不到Java

> ID：13589774
> 
> 赞同：1
> 
> 时间：2012-11-27T17:30:37.267
> 
> 标签：java, windows-xp, jenkins

我将这台 XP 机器正确配置为 Jenkins 从站。但现在...

当我尝试启动节点时，我发现没有找到 Java，正在下载 JDK，然后它失败了

我确实安装了java，因为奴隶以前工作过。在从机控制台上，我可以运行 java，它发现它可以我添加 JAVA_HOME 和从机配置屏幕的正确路径。没运气。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:41:26.407

Jenkins 的最新升级消除了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:20:25.793

看起来这似乎是由于某些版本的 Windows 中 32 位与 64 位进程的使用不一致造成的。我在 Jenkins JIRA 中发现[了这个问题](https://issues.jenkins-ci.org/browse/JENKINS-6957)，它为您的错误提供了一些建议的解决方法 - 试一试，让我知道它们是否有效。

# pdf - 是否可以在经典 asp 框架内的 pdf 内的新选项卡中打开超链接？

> ID：13589777
> 
> 赞同：0
> 
> 时间：2012-11-27T17:30:44.870
> 
> 标签：pdf, hyperlink, frame

我有一个我正在开发的经典 asp 网站。该页面有两个框架，一个位于另一个的正下方。客户必须能够查看 pdf 才能继续到下一页。要进入下一页，他们必须单击正在查看的 pdf 内的超链接。如果他们看不到 pdf，那么他们必须下载 adobe reader，我在顶部框架中包含了一个链接。（顶部框架有一些文本和链接）现在底部框架（包含 pdf）这工作正常，除非当我单击 pdf 页面中的链接，然后在包含 pdf 的同一底部框架中打开。它需要是目标_blank。或者无论你怎么称呼它，基本上要么覆盖这两个框架，然后在浏览器中打开，要么在新的选项卡或窗口中打开，我无法做到这一点。这个问题出现在 IE 和 Firefox 中，但在 chrome 中，它跨越了两个框架并正确打开。有什么办法可以在 IE 和 Firefox 中发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:41:00.213

我找到了有关您的问题的资源： [http ://forums.adobe.com/thread/853394](http://forums.adobe.com/thread/853394)

他们说没有要设置的目标属性。但他们认为（我也认为）如果你放置一个：

```
javascript:window.open('http://yoururl.com'); 
```

如果您可以接受安全警报消息，它应该可以正常工作（Abobe PDF 正在尝试执行脚本......等等）

如果您继续仔细阅读，他们似乎使用 inDesign 中的 Adob​​e 脚本解决了问题

希望这可以帮助...

# sql-server - 在动态 SQL 中将 varchar 转换为日期时间

> ID：13589779
> 
> 赞同：3
> 
> 时间：2012-11-27T17:30:54.903
> 
> 标签：sql-server, datetime, casting, dynamic-sql

我不断收到以下错误：

> 消息 241，级别 16，状态 1，第 9 行从字符串转换日期时间时转换失败。

这是我要执行的代码：

```
 DECLARE @v_sql  varchar(max),
  @v_database varchar(25),
  @vStartTime     DATETIME,
  @vEndTime       DATETIME

SELECT @v_database = N'[DATABASE_NAME]', @vStartTime = '2012-09-27', @vEndTime = '2012-11-27'

SELECT @v_sql = N'SELECT
  (SELECT ID FROM DATASTORE.DBO.PLANT WHERE DESCRIPTION = ''Henderson''),
  SEQ, 
  AID, 
  NAME, 
  GRP, 
  AREA, 
  PRIO,
  CASE ITIME WHEN ''-'' THEN NULL ELSE CAST(SUBSTRING(ITIME,1,8) + '' '' + SUBSTRING(ITIME,9,2) + '':'' + SUBSTRING(ITIME,11,2) + '':'' + SUBSTRING(ITIME,13,2) AS DATETIME) END ITIME,
  CASE ATIME WHEN ''-'' THEN NULL ELSE CAST(SUBSTRING(ATIME,1,8) + '' '' + SUBSTRING(ATIME,9,2) + '':'' + SUBSTRING(ATIME,11,2) + '':'' + SUBSTRING(ATIME,13,2) AS DATETIME) END ATIME,
  CASE NTIME WHEN ''-'' THEN NULL ELSE CAST(SUBSTRING(NTIME,1,8) + '' '' + SUBSTRING(NTIME,9,2) + '':'' + SUBSTRING(NTIME,11,2) + '':'' + SUBSTRING(NTIME,13,2) AS DATETIME) END NTIME,
  DUR, 
  MSG,
  VAR1,
  VAR2,
  VAR3,
  VAR4, 
  OPR, 
  USER_COMMENT
FROM ' + @v_database + '.PROD.ALARM
WHERE CAST(substring(ITIME, 1, 4) + ''-'' + substring(ITIME, 5, 2) + ''-'' + substring(ITIME, 7, 2) + '' '' + substring(ITIME,9,2) + '':'' + substring(ITIME,11,2) + '':'' + substring(ITIME,13,2) + substring(ITIME,15,3) AS DATETIME) BETWEEN  ' + @vStartTime +' AND ' + @vEndTime + ' ORDER BY ITIME'
EXEC(@v_sql) 
```

任何帮助将不胜感激，我正在为一位同事调查这个问题，这让我们俩都难过。

**通过更多挖掘进行**编辑**`sp_executesql`，我们能够自己解决它，将参数传递给：**

 **```
declare
  @vSql     NVARCHAR(MAX),
  @vParam    NVARCHAR(MAX),
  @vDatabase       VARCHAR(15)

SET @vParam = '@vStartTime DATETIME, @vEndTime DATETIME'

 SELECT @vSql = '
    SELECT ''
      '+ @vDatabase + ''',
      ITEM_CODE,
      SOURCE,
      DEST,
      TRAN_DT,
      MILL_NAME,
      NULL
    FROM ' + @vDatabase + '.PROD.GRD_LOG
    WHERE TRAN_DT BETWEEN @vStartTime AND @vEndTime'

EXEC sp_executesql @vSql, @vParam, @vStartTime, @vEndTime 
```

通过制作变量`NVARCHAR(MAX)`，然后使用`sp_executesql`而不是仅仅执行`@vSql`变量，我们能够解决我们的问题。

感谢任何可能一直在研究这个问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:55:00.663

在您的原始动态 SQL 中，您试图将 datetime 变量添加到文本字符串中，这导致 SQL 尝试将文本字符串转换为 datetime 值（按转换的优先顺序）。您还需要将变量设置为 nvarchar 以避免在原始动态 SQL 中进行转换。**

# build - 如何告诉 VS 将本机 dll 复制到“最终目标文件夹”

> ID：13589785
> 
> 赞同：1
> 
> 时间：2012-11-27T17:31:11.090
> 
> 标签：build, visual-studio-2012

在我的项目中，我有

*   本机 c++ dll 项目（输出到 x64/）
*   c++/cli 包装器（输出到 x64/）
*   几个 c# 项目（输出到 projectName\bin\x64）

在构建第一个 dll 时将其复制到“x64/”，然后将包装器复制到“x64/”。在最后阶段，包装器 dll 被复制到“projectName\bin\x64”文件夹，但没有复制原始的原生 dll。

我需要本机 dll 也转到最终文件夹，这样我就可以运行应用程序，该怎么做？

我曾尝试将“本机 dll”添加为依赖项，但 VS 表示这是不可能的。

**upd**另外，如果我自己复制 dll 然后调试我无法进入本机 dll，我会收到“当前不会命中断点。没有为此文档加载任何符号”错误。所以我认为这个问题是相关的。我希望复制本机 dll，并且希望能够进行调试。

**upd**这个答案帮助我[从 C# 调试无法调试非托管 Dll，](https://stackoverflow.com/questions/1744888/cannot-debug-unmanaged-dll-from-c-sharp)但是我仍然必须自己复制 dll。奇怪的是，每次我构建项目时，我都会收到“本机 dll”项目已过时的警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:01:51.503

据我所知，您需要使用构建后步骤。这里有几个例子：

[如何从我的 msbuild AfterBuild 目标中排除特定文件](https://stackoverflow.com/questions/11120819/how-do-i-exclude-a-specific-file-from-my-msbuild-afterbuild-target)

```
<Target Name="AfterBuild">
    <ItemGroup>
      <BinFiles Include="bin\$(ConfigurationName)\**\*.*" />
    </ItemGroup>
    <Copy SourceFiles="@(BinFiles)" DestinationFiles="@(BinFiles->'$(ProjectDir)\relativePathToDirectory" />
  </Target> 
```

# scripting - 如何使用 VBS 在文本文件中搜索变量

> ID：13589788
> 
> 赞同：1
> 
> 时间：2012-11-27T17:31:20.753
> 
> 标签：scripting, vbscript, wsh

需要我正在编写的一段代码的帮助。我是脚本新手，请见谅。

基本上在下面的代码中，每次找到文本“Busy working Thread Id =”时，我`intBusyThreads`都会增加 1。

```
Do While oTextFile.AtEndOfStream <> True
  strLine = oTextFile.ReadLine
  If inStr(strLine, "Busy Working Thread Id=") Then
    intBusyThreads = intBusyThreads + 1
  End If
Loop 
```

但是，如果线程 ID 不同，我只希望它增加。

例如：

> 繁忙工作线程 Id=0x01
> 繁忙工作线程 Id=0x05
> 繁忙工作线程 Id=0x01

在这个例子中，我的代码只会增加`intBusyThreads`2，因此线程 ID 01 和 05 是唯一的。我在试图找到允许我这样做的代码时遇到了麻烦。由于线程 ID 总是会改变，我不知道如何指定该变量。（希望这是有道理的）我尝试了一些东西，例如`strcomp()`. 建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:42:14.010

创建具有唯一线程 ID 的[字典](http://msdn.microsoft.com/en-us/library/x4k5wbx4%28v=vs.84%29)，并仅在字典中不存在当前 ID 时才增加计数器：

```
Set uniqueIDs = CreateObject("Scripting.Dictionary")

Do While oTextFile.AtEndOfStream <> True
  strLine = oTextFile.ReadLine
  If inStr(strLine, "Busy Working Thread Id=") Then
    id = Split(strLine, "=")(1)
    If Not uniqueIDs.Exists(id) Then
      intBusyThreads = intBusyThreads + 1
      uniqueIDs.Add id, True
    End If
  End If
Loop 
```

# jquery - 如何在 ColorBox 上的鼠标悬停时暂停幻灯片

> ID：13589791
> 
> 赞同：1
> 
> 时间：2012-11-27T17:31:22.030
> 
> 标签：jquery, slideshow, colorbox, onmouseover

我正在尝试使用 ColorBox 进行幻灯片放映。但我似乎无法弄清楚如何在鼠标悬停时暂停幻灯片。到处寻找，但一无所获。我认为这应该是一个普遍的要求。

[http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

任何帮助，将不胜感激，

男@

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:13:05.500

正如凯文评论的：

```
jQuery(document).ready(function($){

    $('#cboxContent').hover(function(){
        $('.cboxSlideshow_on #cboxSlideshow').click();
    },function(){
        $('.cboxSlideshow_off #cboxSlideshow').click();
    })
}); 
```

基本上，当鼠标悬停在内容上时，我们触发点击停止幻灯片按钮

# actionscript-3 - 错误 #2148：SWF 文件无法访问本地资源

> ID：13589795
> 
> 赞同：1
> 
> 时间：2012-11-27T17:31:26.730
> 
> 标签：actionscript-3, resources

我正在尝试加载本地视频以显示它，并且在运行时出现此错误（错误 #2148），我在很多地方都阅读过这个问题是什么，关于闪存安全性和所有这些东西，但在任何地方都没有解决方案也有人说做不到。

从 Internet 加载时，我的 swf 工作正常，我的服务器上有我的跨域，但我完全有必要创建一个可以在没有 Internet 连接的情况下运行并从文件系统加载视频的独立版本。

可能有不同的编译选项？我正在使用 Flash Builder 4.6 知道如何实现本地资源加载吗？

PD 我知道受信任的文件夹可以解决问题，但这意味着它运行的每台计算机的配置都会发生变化，我需要它像 USB 一样便携，以便在任何具有 Flash Player 的计算机上运行。

# ios - 可连接到互联网

> ID：13589798
> 
> 赞同：0
> 
> 时间：2012-11-27T17:31:28.780
> 
> 标签：ios, xcode

我只想执行一些代码，并且只有当我连接到互联网时：

```
//Reachability

[[NSNotificationCenter defaultCenter] addObserver:self
                                      selector:@selector(reachabilityChanged:)
                                      name:kReachabilityChangedNotification
                                      object:nil];

Reachability * reach = [Reachability reachabilityWithHostname:@"www.dropbox.com"];

reach.reachableBlock = ^(Reachability * reachability)
{
    dispatch_async(dispatch_get_main_queue(), ^{

        NSLog(@"Block Says Reachable");

        connect = @"yes";

    });
};

reach.unreachableBlock = ^(Reachability * reachability)
{
    dispatch_async(dispatch_get_main_queue(), ^{

        connect = @"no";

    });

};

[reach startNotifier];

//Reachability

if (connect == @"no") {

    UIAlertView *alert1 = [[UIAlertView alloc] initWithTitle:@"" message:@"There is no internet connection. Please connect to the internet. If you are already connected, there might be a problem with our server. Try again in a moment." delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles: nil];
    [alert1 show];

} else if (titleSet == NULL){

    UIAlertView *alert1 = [[UIAlertView alloc] initWithTitle:@"" message:@"Please select a group or create a new one" delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles: nil];
    [alert1 show];

}else if (NavBar.topItem.title.length < 1){

    UIAlertView *alert1 = [[UIAlertView alloc] initWithTitle:@"" message:@"Please select a group or create a new one" delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles: nil];
    [alert1 show];

} else if (newmessagename.text.length < 4){

    UIAlertView *alert1 = [[UIAlertView alloc] initWithTitle:@"" message:@"Please give a name to your event that is at least 4 characters long" delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles: nil];
    [alert1 show];

} 
```

似乎代码没有按顺序执行。我认为检查 Internet 连接所花费的时间比执行代码所花费的时间要多。我怎样才能解决这个问题？请不要告诉我将代码直接放在括号中`connect = @"no";`的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:43:29.087

这些块不是**按顺序**执行的，它们是**异步**执行的。

这意味着您无法判断块内的代码何时会被调用。使用该块的代码可能会在您的方法的其余部分之前完成并执行（但这不太可能，尤其是在 Internet 连接的情况下）。

您应该将您`ifs`的方法放在一个在有效时间调用的方法中。这一次可能是您收到来自您的块的响应，或者，如果我的记忆正确，`[reach startNotifier];`可以在可达性状态发生变化时通知您，这似乎是您的`reachabilityChanged:`方法：

```
-(void) reachabilityChanged:(id) parameter
{
   //Query reachability and notify / cache as required.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:43:41.277

当然它不是按顺序执行的，这些方法的全部目的是在您获得可达性响应时停止 ui 冻结。基本上，您设置了可达性响应，并在尚未检查任何内容时立即询问结果。你真正要做的是将它移动到括号内。

您可以做的其他事情是使用这些结果创建一个函数，并在两个块中调用此函数。

如果您想在视图控制器的负载上或在显示其他任何内容之前使用它，那么您必须在显示此控制器之前检查可访问性，或者添加“加载”屏幕。

编辑：我不明白的其他事情是，这些可达性方法在获得结果时似乎会触发一个块，但您也在注册通知。而且我没有看到您为此发布通知。您在这里使用了 2 个异步方法（块和通知）

# jquery - jquery滑动/计时问题

> ID：13589801
> 
> 赞同：2
> 
> 时间：2012-11-27T17:31:36.377
> 
> 标签：jquery, css, animation

所以我设置了一个小 jquery 动画，其中用户将鼠标悬停在容器上一段时间，这会导致容器拆分，然后显示里面的信息。

我不希望鼠标一进入容器就开始动画，所以我`delay()`在动画上放了一个。现在动画不会立即开始。

但是，有一个问题。如果您快速将鼠标悬停在该区域上，动画就会开始并且非常快地开始。

这是一个 jsfiddle 来说明... [http://jsfiddle.net/Rh96d/](http://jsfiddle.net/Rh96d/)

除非用户将鼠标悬停在蓝色区域上一段时间，否则我不希望播放动画。在此示例中，即使用户将鼠标移出该区域，动画也会播放，这是不应该发生的。

对不起，如果我不够清楚。我不知道如何让它工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:43:21.103

我是[jQuery hoverIntent 插件](http://cherne.net/brian/resources/jquery.hoverIntent.html)的忠实粉丝。

这是一个[小提琴实现](http://jsfiddle.net/crowjonah/Rh96d/7/)。

包含插件后，您的脚本将更改为

```
function hoverIn () {
    $('#one').stop().animate({marginTop:'-250px'});
    $('#two').stop().animate({marginTop:'500px'});
}
function hoverOut () {
    $('#one').stop().animate({marginTop:'0px'});
    $('#two').stop().animate({marginTop:'0px'});
}
var config = {
    over: hoverIn,
    timeout: 0,
    out: hoverOut,
    interval: 600
};

$('#main').hoverIntent(config); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:41:27.917

解决方案示例：http: [//jsfiddle.net/Rh96d/8/](http://jsfiddle.net/Rh96d/8/)

在这里，您正在设置一个函数，一旦经过 500 毫秒就会触发。一旦鼠标离开该区域，关闭动画代码就会运行。

JavaScript

```
var myTimeout;
$('#main').mouseenter(function() {
    myTimeout = setTimeout(function() {
        $('#one').stop().delay(600).animate({marginTop:'-250px'});
        $('#two').stop().delay(600).animate({marginTop:'500px'});
        },function () {
    }, 5500);
}).mouseleave(function() {
    clearTimeout(myTimeout);
    $('#one').stop().animate({marginTop:'0px'});
    $('#two').stop().animate({marginTop:'0px'});
});

$('#main').mouseleave(function() {
    clearTimeout(myTimeout);
    $('#one').stop().animate({marginTop:'0px'});
    $('#two').stop().animate({marginTop:'0px'});
});​ 
```

​</p>

# java - 如何在“”中使用带有“”的 .properties 文件值？

> ID：13589805
> 
> 赞同：0
> 
> 时间：2012-11-27T17:31:42.157
> 
> 标签：java, jvm

如果找到值，我想在现有项目中添加一个功能，然后使用

`System.setProperty("javaplugin.vm.options","-Xmx512m");`

实际上，我通过变量 a 获得价值 -Xmx512m。那么如何写这个语句

`System.setProperty("javaplugin.vm.options",""Xmx"");`

我试图在谷歌上搜索它，但没有找到它......请任何人建议......提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:33:43.717

你应该试试

```
System.setProperty("javaplugin.vm.options","\"-Xmx512m\""); 
```

使用`\`，您可以转义字符串中的双引号，使它们显示为双引号。

# python - 有没有更好的方法来编写这个“if”布尔评估？

> ID：13589811
> 
> 赞同：12
> 
> 时间：2012-11-27T17:31:55.713
> 
> 标签：python, if-statement

我有我写的一小段python代码。它有效，但我认为应该有一种更简化的方法来实现相同的结果。我只是没看到。有任何想法吗？

```
if tx_avt >= 100: tx = 1 
elif tx_avt < 100 and tx_avt >= 50: tx = 2 
elif tx_avt < 50 and tx_avt >= 25: tx = 3
elif tx_avt < 25 and tx_avt >= 12.5: tx = 4 
else: tx = 5 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-27T17:34:11.897

您可以将其更改为：

```
if tx_avt >= 100: tx = 1 
elif tx_avt >= 50: tx = 2 
elif tx_avt >= 25: tx = 3
elif tx_avt >= 12.5: tx = 4 
else: tx = 5 
```

**解释：**

*   如果`if tx_avt >= 100`不是真的，那么你可以推断它`tx_avt < 100` **一定**是真的。
*   这消除了`tx_avt < 100`在检查“”中执行“”部分的需要`elif tx_avt < 100 and tx_avt >= 50:`。

相同的逻辑级联并适用于其余`elif`情况。

* * *

相关阅读：[为什么 Python 没有 Switch 语句及其替代方案](https://stackoverflow.com/questions/374239/why-doesnt-python-have-a-switch-statement)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-27T17:34:45.427

你不需要 elifs 的上限，因为这些是由它们上面的子句解决的......

```
elif tx_avt >= 50 : #do something
elif tx_avt >= 25 : #somthing else 
```

在 python 的旁注中，你可以做

```
if 3 < ab < 10 : #check if ab is between 3 and 10 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-27T17:36:07.303

如果你的 if-elif-else 链变得很长，你可以使用这个方法：

```
for amt, tx in [(100, 1), (50, 2), (25, 3), (12.5, 4)]:
    if tx_avt >= amt:
        break
else:
    tx = 5 
```

**注意：**循环的`else`子句在没有遇到时执行。在这种情况下，它用于提供默认情况。`for``break`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-27T18:53:13.167

换个思路，这可以使用 bisect 模块中的二分搜索功能在单列中完成。

```
In [106]: def index(a,x):
   .....:         return len(a) - bisect.bisect_right(a, x) + 1
   .....:

In [107]: a=[12.5,25,50,100]

In [108]: index(a,15)
Out[108]: 4

In [109]: index(a,25)
Out[109]: 3

In [110]: index(a,35)
Out[110]: 3

In [111]: index(a,50)
Out[111]: 2

In [112]: index(a,100)
Out[112]: 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T19:20:01.560

另一个想法基于 [12.5, 25, 50, 100] 是一个系列这一事实：

```
MAX_BOUNDARY = 5
for tx, boundary in [(n, 25 * 2**(-n+3)) for n in range(1, MAX_BOUNDARY)]:
    if tx_avt >= boundary:
        break
else:
    tx = MAX_BOUNDARY 
```

（这是略微修改的@StevenRumbalski 版本）

`bisect`如果 tx_avt 的分布是均匀的（wrt 系列函数）并且您的列表变得非常大，这可以与 @WaiYipTung 关于O(log(n)) 搜索的想法相结合。

否则，您应该坚持使用@JoranBeasley 和@SampsonChen 建议的更简单、更容易理解的解决方案。

# c# - MATLAB .NET Builder 速度下降

> ID：13589812
> 
> 赞同：1
> 
> 时间：2012-11-27T17:31:58.613
> 
> 标签：c#, visual-studio-2010, matlab

我在使用 MATLAB .NET Builder 时遇到了速度性能下降问题。我正在集成的只是一个简单的绘图 MATLAB 函数。在我创建一个 .dll 并在 C# Visual Studio 中执行它之后，会有很长的时间延迟。是否有提高性能速度的解决方案或解决方法？

谢谢，阿曼达

# android - 如何从 Eclipse 中混淆 Android 库（.jar 文件）

> ID：13589814
> 
> 赞同：-1
> 
> 时间：2012-11-27T17:31:59.727
> 
> 标签：android

嗨，我需要创建一个创建混淆的 jar。我想分发它的客户端，所以希望我的代码被混淆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:42:42.723

[http://www.preemptive.com/products/dasho/overview](http://www.preemptive.com/products/dasho/overview)

试试那个混淆器，效果很好

# c++ - Linux system() 调用偶尔会阻塞

> ID：13589815
> 
> 赞同：3
> 
> 时间：2012-11-27T17:32:03.183
> 
> 标签：c++, linux, multithreading, embedded

我们有一个多线程嵌入式应用程序，由于硬件限制太普通，无法在此讨论，因此无论何时输出到文件，都必须将其文件系统重新挂载为 RW。

我们目前正在通过`system()`调用执行此操作，并运行`mount`命令。但是，此调用有时会阻塞，并导致应用程序陷入死锁。

在我的调试过程中，我已经`system(NULL)`在原始`system()`调用之前放置了，这似乎有时也会阻塞。

一般来说，在什么情况下可能会`system()`永远阻塞？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T17:40:39.847

这是Linux吗？在 Linux 上的 glibc 中，system() 阻塞 SIGCHLD，更改几个信号处理程序、分叉、等待子进程死亡，然后修复它对信号掩码所做的事情。在子进程中，它撤消信号掩码更改并执行 shell 以运行您的命令。这甚至在您调用时也会发生`system(NULL)`--- 唯一的区别是被调用的 shell 被称为`sh -c exit 0.`

总之，您正在生成一个进程，加载 shell（及其所有相关库），并等待 shell 终止。你可能会因为加载外壳而被咬伤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:39:51.143

[`system()`](http://linux.die.net/man/3/system)阻塞直到被调用的命令完成，所以如果`mount`命令永远不会完成，那么`system()`将永远不会返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T17:44:21.833

我想如果你运行 mount 比你需要 root 权限，所以也许这就是你的情况（摘自`man system`Linux）：

```
 Do not use system() from a program with set-user-ID or set-group-ID privileges, because strange values  for  some  environment
   variables  might  be  used  to  subvert  system  integrity.  Use the exec(3) family of functions instead, but not execlp(3) or
   execvp(3).  system() will not, in fact, work properly from programs with set-user-ID or set-group-ID privileges on systems  on
   which  /bin/sh  is  bash  version 2, since bash 2 drops privileges on startup.  (Debian uses a modified bash which does not do
   this when invoked as sh.) 
```

# zend-framework2 - 翻译表单错误信息

> ID：13589822
> 
> 赞同：0
> 
> 时间：2012-11-27T17:32:41.343
> 
> 标签：zend-framework2

我从 alpha 开始就一直在使用 ZF2，所以我不是全新的。但是为了不打扰我当前的项目，我设置了一个新的 SkeletonApp 并且它正在工作。我已经添加了英语和德语所需的翻译，它们按预期工作。但是，表单错误消息没有被翻译成德语或任何其他语言。

我已经阅读了手册，但它只介绍了如何基于工厂设置翻译，并且没有关于如何在 module.config.php 内部进行设置的详细信息。就像在 ZF1 中一样，ZF2 也有一个资源/语言文件夹，其中包含所有已翻译的表单验证错误消息。我想用那些！这就是我的问题所在。我不知道如何添加配置以使其适用于我的所有表单。

在我基于 SkeletonApp 的 module.config.php 文件中，它已经支持翻译，所以我采用了该配置并添加了另一个数组，假设这会起作用。

```
'translator' => array( 
    'locale' => 'en_US', 
    'translation_file_patterns' => array( 
        array( 
            'type'        => 'gettext', 
            'base_dir'    => __DIR__ . '/../language', 
            'pattern'     => '%s.mo' 
        ), 
        array( 
            'type'        => 'phparray', 
            'base_dir'    => __DIR__ . '/../resources/languages', 
            'pattern'     => '%s.php' 
        ) 
    ) 
), 
```

然而这无济于事。在我的控制器中，我有一个 eventManager，我在其中设置我的语言环境，如下所示：

$self->getServiceLocator()->get('translator')->setLocale('en_US'); // 将德语改为 de_DE

正如我上面提到的那样，这样做确实将我的文本从英语翻译成德语等等。

我缺少什么来翻译我的表单错误？感谢您就这种情况提供任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:00:12.077

两个源使用相同的文本域，gettext 源具有更高的优先级。这意味着它将从 gettext 源加载您的语言环境，然后停止，因为已经加载了语言环境 + 文本域组合。

解决方案：为每个来源使用不同的文本域。

# iphone - ARC 方法中的 autoreleasepool

> ID：13589825
> 
> 赞同：1
> 
> 时间：2012-11-27T17:32:50.893
> 
> 标签：iphone, ios, ipad, memory, automatic-ref-counting

我想知道在方法内的 ARC 代码上使用 @autoreleasepool 是否有任何好处。

我的意思是这个。假设我有一个按顺序调用多次的内存密集型方法。就像是

```
// this is my code
for (id oneObject in objects {
  [self letsUseMemory];
} 
```

进而

```
- (void) letsUseMemory {

  // heavy use of memory here

} 
```

我这样做

```
- (void) letsUseMemory {

  @autoreleasepool {

    // heavy use of memory here

  }

} 
```

有什么好处吗？我的意思是，当方法完成时，方法变量无论如何都会被释放，所以在理论上添加一个自动释放池会有任何好处，对吧？

还是该方法中的 autoreleasepool 会加速释放？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:51:41.943

> 有什么好处吗？我的意思是，当方法完成时，方法变量无论如何都会被释放，所以在理论上添加一个自动释放池会有任何好处，对吧？

这取决于。在池耗尽之前，任何自动释放的临时对象都不会被释放，无论您是否使用 ARC。IE：

```
NSString* foo = [NSString stringWithFormat:@"Bar: %@", baz]; 
```

如果没有封闭的@autoreleasepool，则该对象实例可能会一直存在，直到您返回运行循环。如果该行代码存在于循环中，则您可能会累积大量这些临时对象。

一般的经验法则是，如果您有一个可能创建自动释放对象的潜在大循环，请使用@autoreleasepool 将循环内部包装起来。

将单个方法包装在 @autoreleasepool 中不太常见，而且可能有些无意义，因为它通常只有在循环中多次调用该方法时才会产生有意义的效果。将@autorelease 池放入循环中会使意图更加清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:41:23.353

我相信，那里发生了许多“取决于”的事情。

从显而易见的开始，如果没有自动释放的对象，那没关系。如果您的代码在枚举完成后立即返回运行循环，那没关系。

这就留下了使用包含枚举的方法进行大量初始化然后继续进行更多处理的情况。对于那个，您可以通过摆脱标记为以后发布的临时对象而受益。

# forms - jqgrid 错误：对象不支持属性或方法“拆分”

> ID：13589829
> 
> 赞同：0
> 
> 时间：2012-11-27T17:33:07.537
> 
> 标签：forms, jqgrid, edit

我正在使用 JQGrid v4.4.1 和 MVC3。

在 JQGrid 编辑表单上选择“下一条记录”或“上一条记录”图标时，我收到 Microsoft JScript 运行时错误：对象不支持方法“拆分”的属性。

如果突出显示 jquery.jqgrid.min.js 模块中的代码块：**var j=g.split(",")**

有时 intellesense 说 g=0，其他时候是 -2：我猜它与数据有关，但我看不到任何可能导致这种情况的东西！我试图包含这个模块的一部分，包括这个调用，但我正在努力做它的头部或尾部！

谁能帮我确定这个错误的原因？

**jquery.jqGrid.min.js 提取**

```
2*k+"'>"+t.rowcontent+"</td></tr>"),a(h).append(r),r[0].rp=u);0===m.length&&(m=a("<tr "+q+" rowpos='"+u+"'></tr>").addClass("FormData").attr("id","tr_"+f),a(m).append(p),a(h).append(m),m[0].rp=u);a("td:eq("+(y-2)+")",m[0]).html("undefined"===typeof t.label?e.p.colNames[o]:t.label);a("td:eq("+(y-1)+")",m[0]).append(t.elmprefix).append(l).append(t.elmsuffix);n[j]=o;j++}});if(0<j&&(o=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*k-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+
e.p.id+"_id' value='"+d+"'/></td></tr>"),o[0].rp=j+999,a(h).append(o),c[b.p.id].checkOnSubmit||c[b.p.id].checkOnUpdate))c[b.p.id]._savedData[e.p.id+"_id"]=d;return n}function r(d,e,h){var f,k=0,g,m,j,q,l;if(c[b.p.id].checkOnSubmit||c[b.p.id].checkOnUpdate)c[b.p.id]._savedData={},c[b.p.id]._savedData[e.p.id+"_id"]=d;var o=e.p.colModel;if("_empty"==d)a(o).each(function(){f=this.name;j=a.extend({},this.editoptions||{});if((m=a("#"+a.jgrid.jqID(f),"#"+h))&&m.length&&null!==m[0])if(q="",j.defaultValue?
(q=a.isFunction(j.defaultValue)?j.defaultValue.call(b):j.defaultValue,"checkbox"==m[0].type?(l=q.toLowerCase(),0>l.search(/(false|0|no|off|undefined)/i)&&""!==l?(m[0].checked=!0,m[0].defaultChecked=!0,m[0].value=q):(m[0].checked=!1,m[0].defaultChecked=!1)):m.val(q)):"checkbox"==m[0].type?(m[0].checked=!1,m[0].defaultChecked=!1,q=a(m).attr("offval")):m[0].type&&"select"==m[0].type.substr(0,6)?m[0].selectedIndex=0:m.val(q),!0===c[b.p.id].checkOnSubmit||c[b.p.id].checkOnUpdate)c[b.p.id]._savedData[f]=
q}),a("#id_g","#"+h).val(d);else{var n=a(e).jqGrid("getInd",d,!0);n&&(a('td[role="gridcell"]',n).each(function(m){f=o[m].name;if("cb"!==f&&"subgrid"!==f&&"rn"!==f&&!0===o[m].editable){if(f==e.p.ExpandColumn&&!0===e.p.treeGrid)g=a(this).text();else try{g=a.unformat.call(e,a(this),{rowId:d,colModel:o[m]},m)}catch(i){g="textarea"==o[m].edittype?a(this).text():a(this).html()}b.p.autoencode&&(g=a.jgrid.htmlDecode(g));if(!0===c[b.p.id].checkOnSubmit||c[b.p.id].checkOnUpdate)c[b.p.id]._savedData[f]=g;f=
a.jgrid.jqID(f);switch(o[m].edittype){case "password":case "text":case "button":case "image":case "textarea":if("&nbsp;"==g||"&#160;"==g||1==g.length&&160==g.charCodeAt(0))g="";a("#"+f,"#"+h).val(g);break;case "select":var j=g.split(","),j=a.map(j,function(b){return a.trim(b)});a("#"+f+" option","#"+h).each(function(){this.selected=!o[m].editoptions.multiple&&(a.trim(g)==a.trim(a(this).text())||j[0]==a.trim(a(this).text())||j[0]==a.trim(a(this).val()))?!0:o[m].editoptions.multiple?-1<a.inArray(a.trim(a(this).text()),
j)||-1<a.inArray(a.trim(a(this).val()),j)?!0:!1:!1});break;case "checkbox":g+="";o[m].editoptions&&o[m].editoptions.value?o[m].editoptions.value.split(":")[0]==g?(a("#"+f,"#"+h)[b.p.useProp?"prop":"attr"]("checked",!0),a("#"+f,"#"+h)[b.p.useProp?"prop":"attr"]("defaultChecked",!0)):(a("#"+f,"#"+h)[b.p.useProp?"prop":"attr"]("checked",!1),a("#"+f,"#"+h)[b.p.useProp?"prop":"attr"]("defaultChecked",!1)):(g=g.toLowerCase(),0>g.search(/(false|0|no|off|undefined)/i)&&""!==g?(a("#"+f,"#"+h)[b.p.useProp?
"prop":"attr"]("checked",!0),a("#"+f,"#"+h)[b.p.useProp?"prop":"attr"]("defaultChecked",!0)):(a("#"+f,"#"+h)[b.p.useProp?"prop":"attr"]("checked",!1),a("#"+f,"#"+h)[b.p.useProp?"prop":"attr"]("defaultChecked",!1)));break;case "custom":try{if(o[m].editoptions&&a.isFunction(o[m].editoptions.custom_value))o[m].editoptions.custom_value.call(b,a("#"+f,"#"+h),"set",g);else throw"e1";}catch(q){"e1"==q?a.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose):
a.jgrid.info_dialog(jQuery.jgrid.errors.errcap,q.message,jQuery.jgrid.edit.bClose)}}k++}}),0<k&&a("#id_g",i).val(d))}}function u(){a.each(b.p.colModel,function(a,b){b.editoptions&&!0===b.editoptions.NullIfEmpty&&k.hasOwnProperty(b.name)&&""===k[b.name]&&(k[b.name]="null")})}function t(){var e,f=[!0,"",""],m={},g=b.p.prmNames,j,o,l,n,v,p=a(b).triggerHandler("jqGridAddEditBeforeCheckValues",[a("#"+h),z]);p&&"object"===typeof p&&(k=p);a.isFunction(c[b.p.id].beforeCheckValues)&&(p=c[b.p.id].beforeCheckValues.call(b,
k,a("#"+h),"_empty"==k[b.p.id+"_id"]?g.addoper:g.editoper))&&"object"===typeof p&&(k=p);for(l in k)if(k.hasOwnProperty(l)&&(f=a.jgrid.checkValues.call(b,k[l],l,b),!1===f[0]))break;u();f[0]&&(m=a(b).triggerHandler("jqGridAddEditClickSubmit",[c[b.p.id],k,z]),void 0===m&&a.isFunction(c[b.p.id].onclickSubmit)&&(m=c[b.p.id].onclickSubmit.call(b,c[b.p.id],k)||{}),f=a(b).triggerHandler("jqGridAddEditBeforeSubmit",[k,a("#"+h),z]),void 0===f&&(f=[!0,"",""]),f[0]&&a.isFunction(c[b.p.id].beforeSubmit)&&(f=c[b.p.id].beforeSubmit.call(b,
k,a("#"+h))));if(f[0]&&!c[b.p.id].processing){c[b.p.id].processing=!0;a("#sData",i+"_2").addClass("ui-state-active");o=g.oper;j=g.id;k[o]="_empty"==a.trim(k[b.p.id+"_id"])?g.addoper:g.editoper;k[o]!=g.addoper?k[j]=k[b.p.id+"_id"]:void 0===k[j]&&(k[j]=k[b.p.id+"_id"]);delete k[b.p.id+"_id"];k=a.extend(k,c[b.p.id].editData,m);if(!0===b.p.treeGrid)for(v in k[o]==g.addoper&&(n=a(b).jqGrid("getGridParam","selrow"),k["adjacency"==b.p.treeGridModel?b.p.treeReader.parent_id_field:"parent_id"]=n),b.p.treeReader)b.p.treeReader.hasOwnProperty(v)&&
(m=b.p.treeReader[v],k.hasOwnProperty(m)&&!(k[o]==g.addoper&&"parent_id_ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:46:43.213

在奥列格指出我正确的方向之后（感谢奥列格！）。我已设法解决此错误。

使用**jquery.jqgrid.src.js**（更具可读性）我设法做出有根据的猜测，即问题出在我的 Grid 中使用 FORMATTER 的列上。然后我注意到，即使在加载编辑表单时——该列的值不正确——并且因为编辑类型是“选择”，它默认为值列表中的第一项。

格式化程序将获取列的值（在这种情况下可以是 -2、0 或 1）并将其转换为 gif 以便在列中显示。那工作很可爱。

然而，UnFormatter 试图将图像转回其各自的编号（基于其标题）。然后我返回一个数值（即-2、0或1）。**我需要返回一个字符串值。（即“-2”、“0”或“1”）**

因此，对于 Unformatters，您似乎无法返回这样的数值。

为了清楚起见，我在下面添加了工作代码:)

**工作格式化程序**

```
function EnabledFormatter(cellvalue, options, rowObject) {
    var cellValueInt = parseInt(cellvalue);
    switch (cellValueInt)
    {
        case 1:
            return "<img src='@Url.Content("~/Content/images/tick.gif")' title='Enabled' />";
            break;
        case -2:
            return "<img src='@Url.Content("~/Content/images/tick-grey.png")' title='Inherited' />";
            break;
        default:
            return "<img src='@Url.Content("~/Content/images/cross.gif")' title='Disabled' />";
            break;
    };
};

function EnabledUnformatter (cellvalue, options, cell) {
    var sTitle = $('img', cell).attr('title');

    switch (sTitle)
    {
        case 'Enabled':
            return '1';
            break;
        case 'Inherited':
            return '-2';
            break;
        default:
            return '0';
            break;
    };
}; 
```

**Broken Unformatter**请注意返回的值周围缺少 ''。EnabledFormatter 未更改

```
function EnabledUnformatter (cellvalue, options, cell) {
    var sTitle = $('img', cell).attr('title');

    switch (sTitle)
    {
        case 'Enabled':
            return 1;
            break;
        case 'Inherited':
            return -2;
            break;
        default:
            return 0;
            break;
    };
}; 
```

# asp.net - asp.net 动态主题变化

> ID：13589833
> 
> 赞同：0
> 
> 时间：2012-11-27T17:33:39.643
> 
> 标签：asp.net, stylesheet

在我的 asp.net 应用程序中，每个用户都必须可以在他/她的管理页面中更改页面的主题或皮肤及其内容，例如标题图像、背景图像、背景颜色等。用户的数量是无限的和分层的，那么我不能为应用程序创建一些 pr-edefault 主题或皮肤，并在 PreRender 事件中设置主题属性。你对这种情况有什么建议？

# sql-server - 如何在具有可信连接的 SQL Server 上模拟用户权限问题？

> ID：13589835
> 
> 赞同：0
> 
> 时间：2012-11-27T17:33:40.447
> 
> 标签：sql-server, testing, user-roles

我开发了一个小型 C# 实用程序来执行数据验证、清理和导出。现在我正在为用户编写手册，我想模拟用户可能没有足够权限对特定表执行某些数据库操作（SELECT 或 UPDATE）的情况。

该实用程序非常小，仅通过使用与数据库的受信任连接来依赖当前用户的 Windows 凭据，这意味着它使用从 AD 传播的我的 Windows 帐户的凭据。我在数据库服务器上拥有完全权限，但我无法撤销自己的某些权限或将我的登录名映射到另一个权限较少的数据库用户，因为我的登录名已经映射到 dbo 并且我无法取消映射（错误消息如果我尝试，“dbo 用户不能被删除”）。

那么，如何模拟我的实用程序缺乏必要的权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:08:50.327

您可以在测试中创建并抛出 SqlException 来模拟无权执行特定操作的情况。

您需要使用一些反射（检查[此](http://blogs.msdn.com/b/rido/archive/2006/11/26/mocking-sqlexception.aspx)帮助程序类）来将正确的错误添加到异常的 Errors 属性中。

# jenkins - Jenkins 作业的日历视图

> ID：13589836
> 
> 赞同：2
> 
> 时间：2012-11-27T17:33:40.950
> 
> 标签：jenkins, jenkins-plugins

是否有 jenkins(hudson) 的插件可以直观地显示所有工作，并且在未来和过去都运行。

例如：如果作业 A 计划在每天上午 8 点运行一次。该插件应显示作业的先前运行以及将来的预定运行。

我在[Jenkins Plugins Link](https://wiki.jenkins-ci.org/display/JENKINS/Plugins)中搜索并找到了[Google Calendar](https://wiki.jenkins-ci.org/display/JENKINS/Google+Calendar+Plugin)，但是这个插件有两点不同

1.  它与工作状态相关，因此我假设它只会显示以前的运行
2.  它需要一个在线日历帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:17:40.523

不，您必须编写这样的插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-05T10:02:29.283

“下一次执行”插件有点帮助： [https ://wiki.jenkins-ci.org/display/JENKINS/Next+Executions](https://wiki.jenkins-ci.org/display/JENKINS/Next+Executions)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-05T17:30:35.560

插件[日历视图](https://plugins.jenkins.io/calendar-view/)正在做您正在寻找的事情。

版本的功能版本：0.3.1：

### 特征

*   提供过去和未来构建的月、周和日视图
*   通过颜色指示过去构建的状态
*   显示未来计划的构建何时发生
*   显示未来计划构建的估计持续时间
*   可配置的日期和时间设置

# ruby-on-rails-3 - 在我的 Rails 项目中无法使用 rake

> ID：13589842
> 
> 赞同：0
> 
> 时间：2012-11-27T17:33:49.487
> 
> 标签：ruby-on-rails-3, sqlite, rake

每次我尝试在我的 rails 项目中使用 rake 时，它​​都会向我抛出以下消息。我尝试重新安装 ruby​​、rails、rake，重新创建项目，使用*sudo启动我的**rake db:migrate*但似乎没有任何效果......我通过脚手架命令创建了对象：

 *```
rails generate scaffold User nom:string email:string 
```

成功执行此命令后，我启动

```
rake db:migrate 
```

它返回此消息：

```
rake aborted!
GONE
/var/lib/gems/1.9.1/gems/railties-3.0.5/lib/rails/tasks/documentation.rake:1:in `require'
/var/lib/gems/1.9.1/gems/railties-3.0.5/lib/rails/tasks/documentation.rake:1:in `<top (required)>'
/var/lib/gems/1.9.1/gems/railties-3.0.5/lib/rails/tasks.rb:15:in `load'
/var/lib/gems/1.9.1/gems/railties-3.0.5/lib/rails/tasks.rb:15:in `block in <top (required)>'
/var/lib/gems/1.9.1/gems/railties-3.0.5/lib/rails/tasks.rb:6:in `each'
/var/lib/gems/1.9.1/gems/railties-3.0.5/lib/rails/tasks.rb:6:in `<top (required)>'
/var/lib/gems/1.9.1/gems/railties-3.0.5/lib/rails/application.rb:213:in `require'
/var/lib/gems/1.9.1/gems/railties-3.0.5/lib/rails/application.rb:213:in `initialize_tasks'
/var/lib/gems/1.9.1/gems/railties-3.0.5/lib/rails/application.rb:139:in `load_tasks'
/var/lib/gems/1.9.1/gems/railties-3.0.5/lib/rails/application.rb:77:in `method_missing'
/home/bassochette/Dev/rails/tuto/demo_app/Rakefile:7:in `<top (required)>'
(See full trace by running task with --trace) 
```

ps：我是rails新手，处于学习阶段。*

# c# - 将 ViewModel 中包含的 ObservableCollection 绑定到 ListView

> ID：13589843
> 
> 赞同：1
> 
> 时间：2012-11-27T17:33:54.473
> 
> 标签：c#, wpf, mvvm, visual-studio-2012

我已经搜索和搜索，但无法获得正确、有用的答案。

我有一个 MainWindow wpf 窗口。它的 DataContext 设置为它的 ViewModel。

我有一个绑定到 ViewModel 中的 ObservableCollection 的 ListView：

```
 <ListView Grid.Row="1" Grid.Column="0" Margin="2" Name="sources_ListView" Grid.RowSpan="1" ItemsSource="{Binding Path=Sources}">
            <ListView.View>
                <GridView>
                    <GridViewColumn Width="290" Header="Name"
                                    DisplayMemberBinding="{Binding Path=OriginalPath}"/>
                    <GridViewColumn Width="80" Header="Type" 
                                    DisplayMemberBinding="{Binding Path=Type}"/>
                </GridView>
            </ListView.View>
        </ListView> 
```

中继命令：

```
 public ICommand BrowseFileFolderCommand
        {
            get
            {
                if (_browseFileFolderCommand == null)
                {
                    _browseFileFolderCommand = new RelayCommand(o => 
                               {
                                  _sources.Add(new SourceItem(selectedPath, new DirectoryInfo(selectedPath)));
                               }, null);
                }
                return _browseFileFolderCommand;
            }
        } 
```

现在很明显 Lambda 函数的作用在现实世界中不起作用，因为我已经将它从上下文中删除，但接受它确实将 SourceItem 添加到 ObservableCollection _sources 并且有一个获取 _sources 的 Public Sources 的事实。我还使 ObservableCollection 采用的类型使用 INotifyChangedProperty。

当我使用按钮内的 RelayCommand 将源添加到 ObservableCollection 时，ListView 不会更新？

谢谢你的帮助

编辑源项：

```
public class SourceItem : ISourceItem, INotifyPropertyChanged
{
    DirectoryInfo _sourceFolder;
    public DirectoryInfo SourceFolder { get { return _sourceFolder; } private set { _sourceFolder = value; } }

    FileInfo _sourceFile;
    public FileInfo SourceFiles { get { return _sourceFile; } private set { _sourceFile = value; } }

    string _originalPath;
    public string OriginalPath { get { return _originalPath; } private set { _originalPath = value; OnPropertyChanged("OriginalPath"); } }

    bool _isFolder;
    public bool IsFolder { get { return _isFolder; } }

    // display friendly property of IsFolder
    public string Type { get { return _isFolder == true ? "Folder" : "File"; } }

    public SourceItem(string originalPath, DirectoryInfo sourceFolder)
    {
        _originalPath = originalPath;
        _sourceFolder = sourceFolder;
        _sourceFile = null;

        _isFolder = true;
    }

    public SourceItem(string originalPath, FileInfo sourceFile)
    {
        _originalPath = originalPath;
        _sourceFile = sourceFile;
        _sourceFolder = null;

        _isFolder = false;
    }

    #region INotifyPropertyChanged Members

    /// <summary>
    /// Raised when a property on this object has a new value.
    /// </summary>
    public event PropertyChangedEventHandler PropertyChanged;

    /// <summary>
    /// Raises this object's PropertyChanged event.
    /// </summary>
    /// <param name="propertyName">The property that has a new value.</param>
    protected virtual void OnPropertyChanged(string propertyName)
    {
        this.VerifyPropertyName(propertyName);

        PropertyChangedEventHandler handler = this.PropertyChanged;
        if (handler != null)
        {
            var e = new PropertyChangedEventArgs(propertyName);
            handler(this, e);
        }
    }

    #endregion // INotifyPropertyChanged Members

    #region Debugging Aides

    /// <summary>
    /// Warns the developer if this object does not have
    /// a public property with the specified name. This 
    /// method does not exist in a Release build.
    /// </summary>
    [Conditional("DEBUG")]
    [DebuggerStepThrough]
    public void VerifyPropertyName(string propertyName)
    {
        // Verify that the property name matches a real.
        // public, instance property on this object
        if (TypeDescriptor.GetProperties(this)[propertyName] == null)
        {
            string msg = String.Format("Invalid property name: {0}", propertyName);

            if (this.ThrowOnInvalidPropertyName)
                throw new Exception(msg);
            else
                Debug.Fail(msg);
        }
    }

    /// <summary>
    /// Returns whether an exception is thrown, or if a Debug.Fail() is used
    /// when an invalid property name is passed to the VerifyPropertyName method.
    /// The default value is false, but subclasses used by unit tests might 
    /// override this property's getter to return true.
    /// </summary>
    protected virtual bool ThrowOnInvalidPropertyName { get; private set; }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:36:29.703

使用公共版本的属性添加新项目

```
Sources.Add(new SourceItem(selectedPath, new DirectoryInfo(selectedPath))); 
```

您当前正在将项目添加到属性的私有版本 ( `_sources`)，而您的 UI 绑定到属性的公共版本 ( `Sources`)，因此您的 UI 不会收到`CollectionChanged`属性的私有版本引发的通知，因此知道它需要更新。

另一种方法是简单地手动为您的类引发`PropertyChanged`事件以告诉 UI 进行更新。当我想同时向我的收藏中添加大量项目时，通常会这样做，但只更新一次 UI。

```
_sources.Add(new SourceItem(selectedPath, new DirectoryInfo(selectedPath)));
RaisePropertyChanged("Sources"); 
```

# javascript - Javascript 文件在链接时不工作，但在内部工作？

> ID：13589844
> 
> 赞同：1
> 
> 时间：2012-11-27T17:33:54.227
> 
> 标签：javascript, jquery, hyperlink

直到最近我才遇到问题，但由于某种原因，当我链接我的 JS 文件时，它们根本不会执行。jQuery 可以工作，但是任何需要 jQuery 的文件（例如 easing 和其他概念文件）都拒绝在我机器上的任何浏览器中运行。

但是，这是奇怪的部分。如果我将所有代码包装在 HTML 文档中的“脚本”标签中，一切正常；没有问题，错误，任何东西。（jquery.js 也仍然链接到文档）。

我正在使用 Dreamweaver，它告诉我它们已正确链接。我完全迷失了这一点，我无法解决。

这是 HTML：http: [//jsbin.com/iyagub/1](http://jsbin.com/iyagub/1)

我不明白是什么导致 JS 文件无法工作。

我在本地运行它，但不是在本地主机上，而是通过 Windows 资源管理器。我在 Windows 8 64 位上。我不确定这是否是一个安全问题，但我不明白我所说的；就像我从事的任何其他项目一样，这一切都运行良好。

请记住，如果我将链接的 JS 文件中的任何代码直接使用脚本标签粘贴到 HTML 文档中，它就可以完美运行。

有谁知道它可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:48:23.677

在您的 JSBin 示例中：

```
<script src="js/script.js" type="text/javascript"></script>
<script src="js/totop.js" type="text/javascript"></script>
<script src="js/easing.js" type="text/javascript"></script>
<script src="js/menu.js" type="text/javascript"></script>
<script src="js/jquery.js" type="text/javascript"></script> 
```

将顺序更改为：

```
<script src="js/jquery.js" type="text/javascript"></script>
<script src="js/totop.js" type="text/javascript"></script>
<script src="js/easing.js" type="text/javascript"></script>
<script src="js/menu.js" type="text/javascript"></script>
<script src="js/script.js" type="text/javascript"></script> 
```

您的问题是由于在其他脚本尝试使用它之前没有将 jquery 加载到文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:47:17.847

如果您在带有打开控制台的浏览器中打开您的 URL：例如 Firefox + firebug，您会注意到您的某些脚本无法加载。

例如： http: [//jsbin.com/iyagub/js/easing.js](http://jsbin.com/iyagub/js/easing.js) 未找到。

这可能是由于许多原因： 错误的路径？服务器配置错误？错误的 Rewritecond -s 错误的 .htacces ？

# facebook - 禁用我的 Facebook 应用程序的安装

> ID：13589847
> 
> 赞同：0
> 
> 时间：2012-11-27T17:34:02.993
> 
> 标签：facebook, facebook-graph-api

有没有办法阻止用户使用下面的链接将我的 facebook 应用程序安装到他们的页面？

[https://www.facebook.com/add.php?api_key=API_KEY&pages](https://www.facebook.com/add.php?api_key=API_KEY&pages)

注意：我不想禁用我的应用程序，我只想禁用新安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T21:52:26.900

实现此目的的最快方法是解析`signed_request`页面信息并将其与您已授权使用该应用程序的页面 ID 列表进行比较。

一个*非常*简单的实现将沿着

```
<?php

$app_secret = 'APPSECRET';

$signed_request = parse_signed_request($_REQUEST['signed_request'], $app_secret);

$page_whitelist = array(PAGEID1, PAGEID2);

if (in_array($signed_request['page']['id'], $page_whitelist)) {
    // do stuff
} else {
   // output some error message
} 
```

[https://gist.github.com/4157347](https://gist.github.com/4157347)

# sql - SQL中字符串的比较

> ID：13589852
> 
> 赞同：0
> 
> 时间：2012-11-27T17:34:18.030
> 
> 标签：sql, oracle

您好，我想比较同一列中的两个 CLOBS。为此，我知道我必须首先将它们转换为 varchar。

我想从查询中检索的字符串始终具有这样的结构，即一个字符串是另一个字符串的子集。这意味着一个字符串包含另一个字符串。总是从 1...n 开始

因此，如果 string1 的长度为 k，而 string2 的长度为 n，其中 k < n，那么 string2 匹配 string1 到 k。情况总是如此。n!= k

无论如何，下面是我的代码，我无法将 CLOB 相互映射。我从来没有得到任何结果。到目前为止，我的方法是将较长的字符串转换为较短的字符串，然后检查它们是否匹配。然而这不起作用。我没有得到任何结果。

```
SELECT 
 s1.signaturedescription,
 s2.signaturedescription,
 s1.signdate,
 s2.signdate
FROM
signature s1,
signature s2
WHERE
s1.signatureid = 'VerificationSignature'
AND
s2.signatureid = 'EbrCorrectActualValues'
AND
 s1.username = s2.username
AND 
 dbms_lob.compare(s1.signaturedescription, s2.signaturedescription, 106, 1, 1) = 0; 
```

上面的代码有效，但是我想用 s1.signaturedescription 的长度替换“106”。我尝试通过执行以下操作来完成此操作：

```
dbms_lob.compare(s1.signaturedescription, s2.signaturedescription, length((TO_CHAR(SUBSTR(s1.signaturedescription,1,4000)))), 1, 1) = 0; 
```

然而，这不起作用。我没有得到任何返回的结果。你知道如何将 106 更改为 s1.signaturedescription 的长度吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:17:05.687

You should use dbms_lob_compare function.

Read the following link about this:

[http://dba-oracle.com/t_compare_clob_columns_dbms_lob.htm](http://dba-oracle.com/t_compare_clob_columns_dbms_lob.htm)

# c# - 以毫秒为单位的时间流逝计算 C#

> ID：13589853
> 
> 赞同：36
> 
> 时间：2012-11-27T17:34:30.097
> 
> 标签：c#, time, timer

我需要计时执行用 C# 编写的代码序列。使用 DateTime.Now 我得到的毫秒字段值不正确。例如：

```
 int start_time, elapsed_time;

 start_time = DateTime.Now.Millisecond;

 for(int i = 0; i < N_ITER; i++) {
       // cpu intensive sequence
 }

 elapsed_time = DateTime.Now.Millisecond - start_time; 
```

elapsed_time 给出负值。

如何替换 DateTime 以获得经过时间的实际值？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-11-27T17:38:10.957

```
using System.Diagnostics;

//...

var stopwatch = new Stopwatch();
stopwatch.Start();
for (int i = 0; i < N_ITER; i++) {
    // cpu intensive sequence
}
stopwatch.Stop();
elapsed_time = stopwatch.ElapsedMilliseconds; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-27T17:37:20.190

## 根据评论编辑答案

这个答案只是试图计算两次之间经过的总毫秒数，其中时间直接来自`DateTime.Now`. 根据谈话，据了解，这`DateTime.Now`很容易受到外部影响。因此，最好的解决方案是使用`Stopwatch`该类。这是一个链接，可以更好地解释（IMO）并讨论[DateTimeNow、DateTime.Ticks、StopWatch 之间的性能](https://stackoverflow.com/questions/243351/environment-tickcount-vs-datetime-now)。

**原始答案**

您将其转换为 int 的方式是问题所在。您需要更好的转换和额外的元素 :) 与高效的计时器相比，这可能看起来很简单。但它有效：

```
DateTime startTime, endTime;
startTime = DateTime.Now;

//do your work

endTime = DateTime.Now;
Double elapsedMillisecs = ((TimeSpan)(endTime - startTime)).TotalMilliseconds; 
```

网上有[参考](http://www.codeproject.com/Articles/61964/Performance-Tests-Precise-Run-Time-Measurements-wi)，你也可以看看。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-27T17:37:24.040

您正在寻找[秒表](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类。它专为带回高精度时间测量而设计。

```
var stopwatch = new Stopwatch();

stopwatch.Start();
for (int i = 0; i < N_ITER; i++)
{
     // cpu intensive sequence
}
stopwatch.Stop();

var elapsed = stopwatch.ElapsedMilliseconds; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T17:37:44.360

[DateTime.Millisecond](http://msdn.microsoft.com/en-us/library/system.datetime.millisecond.aspx)仅返回从 0 到 999 秒的毫秒小数部分。在进行计时时，您需要考虑其余的日期时间。

但是，您应该考虑将[StopWatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类用于这些类型的性能计时。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-12-27T16:06:17.660

秒表 URL 中有示例
[https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.stopwatch?view=netframework-4.8](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.stopwatch?view=netframework-4.8)

```
using System.Diagnostics;
//...
Stopwatch watch = new Stopwatch();
watch.Start();
// here the complex program. 
//...
watch.Stop();
TimeSpan timeSpan = watch.Elapsed;
Console.WriteLine("Time: {0}h {1}m {2}s {3}ms", timeSpan.Hours, timeSpan.Minutes, 
timeSpan.Seconds, timeSpan.Milliseconds); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T10:56:34.277

这是我用来获取简单计算时间的方法：

```
class Program
{
    static void Main(string[] args)
    {
        Decimal p = 0.00001m;
        Decimal i = 0m;
        DateTime start = new DateTime();
        DateTime stop = new DateTime();

        for (i = p; i <= 5; i = i + p)
        {
            Console.WriteLine("result is: " + i);
            if (i==p) start = DateTime.Now;
            if (i==5) stop = DateTime.Now;
        }

        Console.WriteLine("Time to compute: " + (stop-start));

    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-10T05:21:00.923

这对我有用：

```
var lapsedTime = DateTime.Now.Subtract(beginTime).TotalMilliseconds; 
```

# javascript - iScroll url 哈希更改支持

> ID：13589855
> 
> 赞同：1
> 
> 时间：2012-11-27T17:34:37.703
> 
> 标签：javascript, iscroll

这是 iScroll 的一个已知问题，它似乎只发生在菜单完全停止工作的 iOS5 中。我在 iScroll 中的所有子链接都是哈希锚。有没有人有解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:56:51.953

我处理它的方式是自己劫持锚链接并用`scrollToElement`调用替换它们。

```
// Hijack hash anchors and scroll to them
$('a').click ( function (e) {
    var id = $(this).attr('href');
    if (id.substr(0,1) == '#') {
        e.preventDefault();
        setTimeout( function() {
            scroller.scrollToElement ( id, 0 );
        }, 0);
        return false;
    } else {
        return true;
    }
}); 
```

此代码应该只劫持以 . 开头的链接`#`。然后它处理修复了一些其他间歇性错误的`scrollToElement`in a 。`setTimeout`只要您的锚点正确命名为 id，它对我来说效果很好。如果您使用`name`属性而不是`id`属性，则需要重写这些。

如果为空，此代码将复制`name`属性并将它们放入属性中。`id`不过，您可能不需要这个。

```
$('a').each (function (i, e) {
    var n = $(e).attr('name');
    var id = $(e).attr('id');
    if ( typeof id == 'undefined' || id === null || id === '') {
        $(e).attr('id', n);
    }
}); 
```

# java - ClassNotFoundException：以前工作的 Android 项目

> ID：13589862
> 
> 赞同：1
> 
> 时间：2012-11-27T17:35:05.057
> 
> 标签：java, android, eclipse, android-4.2-jelly-bean

我有一个工作的 android 项目，但需要从头开始。我复制了我所有的源文件和布局文件。没有编译错误，但是当我尝试运行时，出现以下错误。

```
11-27 17:21:56.793: E/AndroidRuntime(1450): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{projects.mobile.mapappproject/projects.mobile.mapappproject.MainActivity}: java.lang.ClassNotFoundException: Didn't find class "projects.mobile.mapappproject.MainActivity" on path: /data/app/projects.mobile.mapappproject-1.apk 
```

我正在运行 eclipse juno 并尝试在 Android 4.2 上运行。谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T17:42:05.390

而不是复制粘贴尝试以下

1.创建一个android应用项目

2.删除创建的文件Eg.MainActivity和布局。

2.右键单击项目名称并单击导入，然后从文件系统。转到您的项目目录从那里导入源

3.选择那个，然后完成。

4.清理并构建然后运行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:40:29.493

试试这些

1.  将 Activity 添加到 AndroidManifest.xml
2.  您的文件夹名称有区别吗？例如 projects.mobile.mapappproject-1 或 projects.mobile.mapappproject ！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T17:46:17.003

> 我复制了我所有的源文件和布局文件。

但是，您似乎忘记复制 AndroidManifest.xml 中存在的条目。每个`Activity`都有一个条目，该条目是框架查找和启动 UI 所必需的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T18:58:06.267

我有同样的问题，但我发现库引用路径不正确。在我修复后一切正常。您可以在右键单击您的项目 => 属性 => Android -> (Library) 处查看此内容

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-25T08:43:13.490

*仅作记录，以防我可以帮助某人：*
我有一个项目在从 git 导入后不知何故无法工作。我通过明确给出活动的名称来解决这个问题。

**示例：**
之前：（ `<activity android:name=".Main" [...] />`相对）
之后：（`<activity android:name="com.example.package.Main" [...] />`绝对）

如果您更改清单包并保留您的相对引用（我认为这是默认值），也可能会发生这种情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-29T07:47:51.493

就我而言，以下两个步骤解决了问题

一种。在 build.gradle 中将 compileSdkVersion、buildToolsVersion、targetSdkVersion 设置为相同的 SDK 版本。

湾。我在 AndroidManifest.xml 中的应用程序类名称中缺少一个点（例如 android:name=".ui.ApplicationLoader"）

# c++ - 将函数元组应用于一个值并返回一个元组

> ID：13589867
> 
> 赞同：7
> 
> 时间：2012-11-27T17:35:42.433
> 
> 标签：c++, c++11, tuples

现在，我有以下将两个函数应用于一个值并返回一个 2 值元组：

```
template<typename F1, typename F2>
class Apply2
{
public:
    using return_type = std::tuple<typename F1::return_type, typename F2::return_type>;

    Apply2(const F1& f1, const F2& f2) : f1_(f1), f2_(f2) {}

    template<typename T> return_type operator()(const T& t) const
    {
        return std::make_tuple(f1_(t), f2_(t));
    }

protected:
    const F1& f1_;
    const F2& f2_;
}; 
```

我想将其推广到 N 个函数：

```
template<typename ...F>
class ApplyN
{
public:
    using return_type = std::tuple<typename F::return_type...>;

    ApplyN(const std::tuple<F...>& fs) : functions_(fs) {}

    template<typename T> return_type operator()(const T& t) const
    {
        return ???;
    }

protected:
    std::tuple<F...> functions_;
}; 
```

我知道我可能需要以某种方式使用模板递归，但我无法理解它。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T19:57:31.933

我花了一段时间，但在这里（使用[索引](http://loungecpp.wikidot.com/tips-and-tricks%3aindices)）：

```
template<typename ...F>
class ApplyN
{
public:
    using return_type = std::tuple<typename F::return_type...>;

    ApplyN(const F&... fs) : functions_{fs...} {}

    template<typename T> return_type operator()(const T& t) const
    {
        return with_indices(t, IndicesFor<std::tuple<F...> >{});
    }

protected:
    std::tuple<F...> functions_;

    template <typename T, std::size_t... Indices>
    return_type with_indices(const T& t, indices<Indices...>) const
    {
        return return_type{std::get<Indices>(functions_)(t)...};
    }
}; 
```

之前有人有一个（不完整的）答案，但他/她删除了它 - 那是我的起点。不管怎样，谢谢陌生人！也感谢 R. Martinho Fernandes！

# vb.net - 如何在 VB.NET 中创建报表查看器绑定到对象

> ID：13589868
> 
> 赞同：0
> 
> 时间：2012-11-27T17:35:42.297
> 
> 标签：vb.net, bindingsource, reportviewer2008

我有名为“用户”的类，代码：

```
 Public Class User

    Private m_id As String
    Private m_user_name As String

    Public Sub New(ByVal id As String, ByVal name As String, ByVal pwd As String)
      m_id = id
      m_user_name = name
      m_pwd = pwd
    End Sub

    Public Property Id() As String
      Get
          Return m_id
      End Get
      Set(ByVal value As String)
          m_id = value
      End Set
    End Property

    Public Property Name() As String
      Get
          Return m_user_name
      End Get
      Set(ByVal value As String)
          m_user_name = value
      End Set
    End Property

 End Class 
```

而我想上报所有用户的信息，所以我还有另外一个名为“Users”的类，代码：

```
 Public Class Users
       inherits List(Of User)
       Public Sub New()
              'Query users' information from Table in Database
              Add(New User(...)
       End Sub
 End Class 
```

当我点击“打印”按钮时，它会弹出报告。我只有一个带有 Report Viewer 的表单，但是我有很多使用带有 Report Viewer 的表单的报表。所以我这样编码：

```
 Public Class Form1
        Private Sub Form1_Load(...) Handles MyBase.Load

            Dim bs As New BindingSource
            bs.DataSource= New Users

            Dim rpt As New Microsoft.Reporting.WinForms.ReportDataSource
            rpt.Name = "Report_User"
            rpt.Value = bs
            ReportViewer1.LocalReport.DataSources.Add(rpt)
            ReportViewer1.LocalReport.ReportEmbeddedResource = rpt.Name
            ReportViewer1.RefreshReport()
        End Sub 
```

但它没有显示任何东西......请帮助我......我真的需要你的帮助..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:54:12.643

现在我可以解决我的问题了..[点击这里参考](http://www.vbdotnetheaven.com/uploadfile/mahesh/building-reports-from-object-collection-using-reportviewer/)

# sql - SQL - SUBSTRING 和 CHARINDEX

> ID：13589871
> 
> 赞同：0
> 
> 时间：2012-11-27T17:35:49.677
> 
> 标签：sql, sql-server

> **可能重复：**
> [T-SQL：与字符串连接相反 - 如何将字符串拆分为多个记录将](https://stackoverflow.com/questions/314824/t-sql-opposite-to-string-concatenation-how-to-split-string-into-multiple-reco)
> [可变长度分隔的字符串拆分为多行（SQL）](https://stackoverflow.com/questions/3457106/splitting-variable-length-delimited-string-across-multiple-rows-sql)

我有一个包含如下列数据的数据库表：

```
Data (field name)
1111,44,666,77
22,55,76,54
32,31,56 
```

我意识到这是一个非常糟糕的设计，因为它没有标准化（我没有设计它 - 我继承了它）。是否有一个查询会返回这样的数据：

```
1111
44
666
77
22
55
76
54
32
31
56 
```

我习惯使用 CHARINDEX 和 SUBSTRING，但我想不出这样做的方法，因为每个单元格中的元素数量（由逗号分隔）是未知的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T21:47:32.570

我创建了一个名为 [dbo].[stack] 的表，并用您提供的数据填充它，这个脚本产生了您需要的数据。可能有一种更有效的方法可以做到这一点，但这完全符合您的要求。

```
 BEGIN
        DECLARE @tmp TABLE (data VARCHAR(20))
        DECLARE @tmp2 TABLE (data VARCHAR(20))

        --Insert all fields from your table
        INSERT INTO @tmp (data)
        SELECT [data]           
        FROM   [dbo].[stack] -- your table name here

        --Loop through all the records in temp table
        WHILE EXISTS (SELECT 1
                                    FROM   @tmp)            
            BEGIN 
                DECLARE @data VARCHAR(100) --Variable to chop up 
                DECLARE @data1 VARCHAR(100) -- Untouched variable to delete from tmp table
                SET @data =  (SELECT TOP 1 [data]
                                            FROM   @tmp)
                SET @data1 =  (SELECT TOP 1 [data]
                                             FROM   @tmp)

                --Loop through variable to get individual value 
                WHILE PATINDEX('%,%',@data) > 0     
                    BEGIN
                        INSERT INTO @tmp2
                        SELECT SUBSTRING(@data,1,PATINDEX('%,%',@data)-1);
                        SET @data = SUBSTRING(@data,PATINDEX('%,%',@data)+1,LEN(@data))
                        IF PATINDEX('%,%',@data) = 0
                            INSERT INTO @tmp2
                            SELECT @data            
                    END

                DELETE FROM @tmp 
                WHERE [data] = @data1

            END     

        SELECT * FROM @tmp2     
    END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T21:58:47.340

您可以使用 CTE 拆分数据：

```
;with cte (DataItem, Data) as
(
  select cast(left(Data, charindex(',',Data+',')-1) as varchar(50)) DataItem,
         stuff(Data, 1, charindex(',',Data+','), '') Data
  from yourtable
  union all
  select cast(left(Data, charindex(',',Data+',')-1) as varchar(50)) DataItem,
    stuff(Data, 1, charindex(',',Data+','), '') Data
  from cte
  where Data > ''
) 
select DataItem
from cte 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c3a38/2)

结果：

```
| DATAITEM |
------------
|     1111 |
|       22 |
|       32 |
|       31 |
|       56 |
|       55 |
|       76 |
|       54 |
|       44 |
|      666 |
|       77 | 
```

或者您可以创建一个拆分功能：

```
create FUNCTION [dbo].[Split](@String varchar(MAX), @Delimiter char(1))       
returns @temptable TABLE (items varchar(MAX))       
as       
begin      
    declare @idx int       
    declare @slice varchar(8000)       

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

    while @idx!= 0       
    begin       
        set @idx = charindex(@Delimiter,@String)       
        if @idx!=0       
            set @slice = left(@String,@idx - 1)       
        else       
            set @slice = @String       

        if(len(@slice)>0)  
            insert into @temptable(Items) values(@slice)       

        set @String = right(@String,len(@String) - @idx)       
        if len(@String) = 0 break       
    end   
return 
end; 
```

您可以在查询时使用它，这将产生相同的结果：

```
select s.items declaration
from yourtable t1
outer apply dbo.split(t1.data, ',') s 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:38:02.453

```
SELECT REPLACE(field_name, ',', ' ') from table 
```

编辑：当你改变你的问题时，不要介意这个答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T19:50:32.043

不谈论性能，您可以将数据连接到单个列中，然后将其拆分。

连接数据：[http ://sqlfiddle.com/#!6/487a4/3](http://sqlfiddle.com/#!6/487a4/3)

拆分它：[T-SQL：与字符串连接相反 - 如何将字符串拆分为多条记录](https://stackoverflow.com/questions/314824/t-sql-opposite-to-string-concatenation-how-to-split-string-into-multiple-reco)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T21:36:14.760

看看在类似问题中引用的这篇文章：

[http://www.codeproject.com/Articles/7938/SQL-User-Defined-Function-to-Parse-a-Delimited-Str](http://www.codeproject.com/Articles/7938/SQL-User-Defined-Function-to-Parse-a-Delimited-Str)

如果您创建他们在那篇文章中拥有的函数，您可以使用以下方法调用它：

`select * from dbo.fn_ParseText2Table('100|120|130.56|Yes|Cobalt Blue','|')`

# java - 如何像在 java 中一样在 oracle 中定义 arraysize？

> ID：13589873
> 
> 赞同：-1
> 
> 时间：2012-11-27T17:35:53.667
> 
> 标签：java, sql, oracle, plsql

在 java 中：

```
Date d[] = new Date[2];
Date temp[] = {new Date(),new Date()}; 
```

在甲骨文中

```
temp date = (sysdate,sysdate);--it works 
```

但是如何将 temp 的大小定义为 2，就像我们在 java 代码中所做的那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:44:16.657

我不太确定我是否理解这个问题。您已将其标记为 PL/SQL，因此我假设您的“in Oracle”代码旨在成为语法正确的 PL/SQL 代码，但您发布的语法无效。

在 PL/SQL 中，您拥有三种不同类型的集合。您有嵌套表、关联数组和可变数组。您不会在编译时声明嵌套表或关联数组的大小——它们将使用它们需要的任何空间。您确实在编译时声明了可变数组的大小，因此您可以声明一个存储两个日期的可变数组。不过，我无法想象我会想要声明一个大小为 2 的 varray 而不是使用嵌套表的情况，因为将自己限制为 2 元素集合没有任何好处。但是，如果您愿意，可以像我在下面那样声明变量。

```
SQL> ed
Wrote file afiedt.buf

  1  declare
  2    -- Nested table
  3    type date_nt is table of date;
  4    -- Associative array
  5    type date_aa is table of date index by pls_integer;
  6    -- VArray
  7    type date_va is varray(2) of date;
  8    l_date_nt date_nt := date_nt( sysdate, sysdate );
  9    l_date_va date_va := date_va( sysdate, sysdate );
 10    l_date_aa date_aa;
 11  begin
 12    l_date_aa(1) := sysdate;
 13    l_date_aa(100) := sysdate;
 14* end;
 15  /

PL/SQL procedure successfully completed. 
```

# javascript - 从字符串中提取时间

> ID：13589877
> 
> 赞同：3
> 
> 时间：2012-11-27T17:36:11.420
> 
> 标签：javascript, jquery

我有一个格式如下的字符串：“7:18 am”

我想做的是将“718”（不是中间的冒号）和“am”提取到两个单独的变量中。

我尝试做这样的事情，但它只返回第一个整数——在本例中为 7。

```
var time = parseInt("7:18") 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:41:00.287

一种方法是将其拆分，然后将您想要的值连接在一起：

```
var timeAm = "7:18 am".split(' '); // ["7:18", "am"]
var hourMin = timeAm[0].split(':'); // ["7", "18"]
var time = parseInt(hourMin.join(''), 10); // 718 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:37:28.740

```
var str = "7:18 am".split(" "),
    time = parseInt(str[0].replace(":", ""), 10),
    ampm = str[1];

console.log(time, ampm);  // 718 "am" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T17:41:56.360

```
var str = "7:18 am";
var ampm = str.split(" ")[1];
var time = str.split(" ")[0].split(":").join("");
console.log(ampm+" "+time); 
```

# r - 当标题是ggplot2中的变量时，如何更改绘图标题的字体大小？

> ID：13589878
> 
> 赞同：7
> 
> 时间：2012-11-27T17:36:11.183
> 
> 标签：r, ggplot2

我正在使用 ggplot2 生成散点图。我把标题变成了一个变量，我怎样才能改变字体大小？代码如下：

```
library("ggplot2")
plotfunc <- function(x){
    x +
    geom_point() +
    geom_smooth(se = FALSE, method = "lm",  color = "blue", size = 1) +
    opts(title = plottitle,
           axis.title.x = theme_text(size = 8, colour = 'black'),
         axis.title.y = theme_text(size = 8, colour = 'black', angle = 90))
}

plottitle <- "This is Title"
p <- ggplot(data = iris, aes(x = Sepal.Length, y = Sepal.Width))
plotfunc(p) 
```

我试过了

```
opts(title = plottitle (size = 10),... 
```

但有一个错误：

```
Error in opts(title = plottitle(size = 10),
axis.title.x = theme_text(size = 8,  : could not find function "plottitle" 
```

它被认为不是我想要的功能。我应该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T18:17:17.297

如果**opts()**仍然适用于您，那么您使用的是旧版本的 ggplot2。较新的命令是**theme()**。在任何情况下，您都不想将实际的标题标签放入**opts**或**主题**中——使用**labs()**

```
plotfunc <- function(x) {
  x +
    geom_point() +
    geom_smooth(se = FALSE, method = "lm",  color = "blue", size = 1) +
    theme_bw() +
    theme(axis.title.x = element_text(size = 8, colour = 'black'),
          axis.title.y = element_text(size = 8, colour = 'black', angle = 90)) +
    labs(title='this', x='that', y='the other')
}

## plottitle <- "This is Title"
p <- ggplot(data = iris, aes(x = Sepal.Length, y = Sepal.Width))
plotfunc(p) 
```

![在此处输入图像描述](../Images/710560e006d1873653141d10eff45da8.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-22T18:56:08.210

可笑的迟到的答案，但我认为现有的答案并没有解决实际问题：

> 我把标题变成了一个变量，我怎样才能改变字体大小？

这对我有用，并且是更新的`ggplot`语法（`theme()`vs. `opts()`）：

```
library(ggplot2)
plotfunc <- function(x){
    x +
    geom_point() +
    geom_smooth(se = FALSE, method = "lm",  color = "blue", size = 1) +
    labs(title = plottitle) +
    ### pay attention to the ordering of theme_bw() vs. theme()
    theme_bw() +
    theme(plot.title = element_text(size = 20),
          axis.title.x = element_text(size = 12),
          axis.title.y = element_text(size = 8))

}

plottitle <- "This is Title"
p <- ggplot(data = iris, aes(x = Sepal.Length, y = Sepal.Width))
plotfunc(p) 
```

我得到以下信息：

![ggplot 主题（plot.title）](../Images/1b3dd9b740cea17a02738701e43a3fa8.png)

关于我的`theme_bw()`评论的注释：尝试运行上面的内容，但`theme_bw()`最后放在`theme(plot.title, ...)`位之后，就像上面斯蒂芬亨德森的回答一样。您会注意到没有任何字体大小生效。这是因为这是一个预设，如果您在添加后传递它`theme_bw()`，它将覆盖各种自定义选项。`theme()`

只是一件需要注意的小事；我只是因为使用`theme_bw()`了很多东西才学会了它，而且我的头撞在墙上试图弄清楚为什么其他`theme()`选项不起作用，然后才意识到这`ggplot`毕竟不是我的语法，而是我的设置顺序。一定要喜欢编码:)

此外，这里是您可以传递[的选项的完整列表，](http://docs.ggplot2.org/current/theme.html)`theme()`作为您可以调整的内容和方式的参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T17:43:44.660

你把一个“（”作为下一个非空白字符，`plottitle`所以解释器决定它必须是一个函数。试试

```
 .... opts( title=plottile, size=10) 
```

这是一长串变暖信息：

```
Warning messages:
1: 'opts' is deprecated.
Use 'theme' instead.
See help("Deprecated") 
2: 'theme_text' is deprecated.
Use 'element_text' instead.
See help("Deprecated") 
3: 'theme_text' is deprecated.
Use 'element_text' instead.
See help("Deprecated") 
4: In opts(title = plottitle, axis.title.x = theme_text(size = 8, colour = "black"),  :
  Setting the plot title with opts(title="...") is deprecated. Use labs(title="...") or ggtitle("...") instead. 
```

# javascript - 在自定义类上使用 JSON.stringify

> ID：13589880
> 
> 赞同：7
> 
> 时间：2012-11-27T17:36:18.267
> 
> 标签：javascript, json, node.js

我试图在redis中存储一个对象，它是一个类的实例，因此具有功能，这是一个例子：

```
function myClass(){
    this._attr = "foo";
    this.getAttr = function(){
        return this._attr;
    }
} 
```

有没有办法将此对象与函数一起存储在 redis 中？我试过`JSON.stringify()`了，但只保留了属性。如何存储函数定义并能够执行以下操作：

```
var myObj = new myClass();
var stringObj = JSON.stringify(myObj);
// store in redis and retreive as stringObj again
var parsedObj = JSON.parse(stringObj);

console.log(myObj.getAttr()); //prints foo
console.log(parsedObj.getAttr()); // prints "Object has no method 'getAttr'" 
```

`foo`打电话的时候怎么接`parsedObj.getAttr()`？

先感谢您！

**编辑**

有人建议修改 MyClass.prototype 并存储值，但是像这样的东西呢（除了 setter/getter 之外的函数）：

```
function myClass(){
    this._attr = "foo";
    this._accessCounts = 0;
    this.getAttr = function(){
        this._accessCounts++;
        return this._attr;
    }
    this.getCount = function(){
        return this._accessCounts;
    }
} 
```

我试图说明一个函数，它在调用时计算诸如计数或平均值之类的东西，除了做其他事情。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T18:12:12.947

首先，您没有定义一个类。

它只是一个对象，其属性的值是一个函数（它在构造函数中定义的所有成员函数将在创建新*实例时被***复制**，这就是为什么我说它不是一个类。）

 *使用时会被剥离`JSON.stringify`。

考虑到您使用的是使用 V8 的 node.js，最好的方法是定义一个真实的类，并使用`__proto__`. 无论您在类中使用了多少属性（只要每个属性都使用原始数据类型），哪个都可以正常工作。）

这是一个例子：

```
function MyClass(){
  this._attr = "foo";
}
MyClass.prototype = {
  getAttr: function(){
    return this._attr;
  }
};
var myClass = new MyClass();
var json = JSON.stringify(myClass);

var newMyClass = JSON.parse(json);
newMyClass.__proto__ = MyClass.prototype;

console.log(newMyClass instanceof MyClass, newMyClass.getAttr()); 
```

这将输出：

```
true "foo" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T18:06:21.723

不，JSON 不存储函数（这也会非常低效）。相反，使用序列化方法和反序列化构造函数。例子：

```
function MyClass(){
    this._attr = "foo";
    this.getAttr = function(){
        return this._attr;
    }
}
MyClass.prototype.toJSON() {
    return {attr: this.getAttr()}; // everything that needs to get stored
};
MyClass.fromJSON = function(obj) {
    if (typeof obj == "string") obj = JSON.parse(obj);
    var instance = new MyClass;
    instance._attr = obj.attr;
    return instance;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T12:18:57.487

Scanales，我遇到了同样的问题，并尝试了一种类似于 Bergi 建议的创建新的序列化/反序列化方法的技术......但发现它对我不起作用，因为我有对象嵌套在对象中（几个深）。如果这是你的情况，那么这就是我解决它的方法。我编写了一个基类（clsPersistableObject），我想要持久化的所有对象都从该基类继承。基类有一个名为 deserialize 的方法，它传递 JSON 字符串。此方法一一设置属性（但不会清除存在的方法），然后递归地推迟到子对象执行相同操作（根据需要多次）。

```
deserialize: function (vstrString) {
                //.parse: convert JSON string to object state

                //Use JSON to quickly parse into temp object (does a deep restore of all properties)
                var tmpObject = JSON.parse(vstrString);

                //objZoo2.animal.move();

                //Note: can't just do something like this: 
                //  CopyProperties(tmpObject, this);
                //because it will blindly replace the deep objects 
                //completely...inadvertently wiping out methods on it.  Instead:
                //1) set the properties manually/one-by-one.
                //2) on objects, defer to the deserialize on the child object (if it inherits clsPersistableObject)
                //2b) if it doesn't inherit it, it's an intrinsic type, etc...just do a JSON parse.

                //loop through all properties
                var objProperty;
                for (objProperty in tmpObject) {

                    //get property name and value
                    var strPropertyName = objProperty;
                    var strPropertyValue = tmpObject[objProperty]; //note: doing this .toString() will cause

                    if (objProperty !== undefined) {
                        //check type of property
                        if (typeof strPropertyValue == "object") {
                            //object property: call it recursively (and return that value)

                            var strPropertyValue_AsString = JSON.stringify(strPropertyValue);

                            //see if has a deserialize (i.e. inherited from clsPeristableObject)
                            if ("deserialize" in this[objProperty]) {
                                //yes: call it
                                this[objProperty]["deserialize"](strPropertyValue_AsString);
                            }
                            else {
                                //no: call normal JSON to deserialize this object and all below it
                                this[objProperty] = JSON.parse(strPropertyValue_AsString);
                            }  //end else on if ("deserialize" in this[objProperty]) 
                        }
                        else {
                            //normal property: set it on "this"
                            this[objProperty] = tmpObject[objProperty];
                        } //end else on if (typeof strPropertyValue == "object") 
                    } //end if (objProperty !== undefined) 
                }

            } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-12-13T07:21:13.680

看起来你试图对一个封闭的函数进行字符串化。您可以使用 ()=>{} 来解决范围问题。

```
function myClass(){
    this._attr = "foo";
    this._accessCounts = 0;
    this.getAttr = ()=>{
        this._accessCounts++;
        return this._attr;
    }
    this.getCount = ()=>{
        return this._accessCounts;
    }
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-11-27T17:52:10.160

你得到的 grom JSON.stringify() 是一个字符串。字符串没有方法。您需要先评估该字符串，然后才能获取原始对象及其方法。

```
var myObj = new myClass();
var stringObj = JSON.stringify(myObj); 
```

- - 编辑 - - -

```
//Sorry use this:
var getBackObj  = JSON.parse(stringObj);
//Not this
var getBackObj = eval(stringObj);

console.log(getBackObj.getAttr()); // this should work now 
```*

# html - Chrome、Safari 和 Firefox 中的行内块元素之间的幽灵空间

> ID：13589883
> 
> 赞同：4
> 
> 时间：2012-11-27T17:36:29.647
> 
> 标签：html, css

如何删除行内块元素之间的重影空间？

这是一个 jsfiddle [http://jsfiddle.net/hFDcV/](http://jsfiddle.net/hFDcV/)，您可以在其中清楚地看到 div 之间的水平空间。

StackOverflow 规定的示例代码：

```
<div id='row'>
  <div class='box'>Something</div>
  <div class='box'>Something</div>
  <div class='box'>Something</div>
  <div class='box'>Something</div>
</div>

#row {
  background-color: red;
}

.box {
  width: 150px;
  height: 150px;
  background-color: yellow;
  display: inline-block;
  margin: 0;
  padding:0;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:42:39.870

一种解决方案：http: [//jsfiddle.net/hFDcV/4/](http://jsfiddle.net/hFDcV/4/)

将父容器的字体大小设置为`0`并在子元素上重置。

```
#row {
    font-size:0;
}

.box {
    font-size:12pt;
} 
```

另一个解决方案：http: [//jsfiddle.net/hFDcV/10/](http://jsfiddle.net/hFDcV/10/)

您可以向左浮动`box`元素。设置`overflow:hidden;`将`row`防止它塌陷到`0`高度。

```
#row {
    overflow:hidden;
}

.box {
    float:left;
} 
```

在@RickCalder 分享的关于这个问题的精彩文章中还有其他解决方案：http: [//css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T15:05:51.313

实现这一点的一种简单方法是在行内块元素之间插入注释！

像这样 ：

```
<div id='row'>
  <div class='box'>Something</div><!--
  --><div class='box'>Something</div><!--
  --><div class='box'>Something</div><!--
  --><div class='box'>Something</div>
</div> 
```

希望这对某人有帮助！

# r - 合并数据框中的日期向量

> ID：13589884
> 
> 赞同：0
> 
> 时间：2012-11-27T17:36:34.393
> 
> 标签：r, date, datetime, data-management

我有一个`df`带有一些日期向量的数据结构，一到五个，像这样，

```
df <- structure(list(one.date = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, "2012-09-23", "2012-09-23", NA, NA, NA, NA, NA, NA, NA, NA, NA), two.date = c(NA, "2012-11-13", NA, "2012-11-19", NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "2012-09-24", NA, NA, NA), three.date = c(NA, NA, "2012-11-19", NA, NA, NA, NA, NA, "2012-09-22", NA, NA, NA, NA, NA, NA, NA, NA, "2012-09-24", NA, NA), four.date = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "2012-09-02", "2012-09-10","2012-09-23", NA, NA, NA, NA, NA, NA), five.date = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "2012-09-24", "2014-09-09", NA, NA, NA, NA)), .Names = c("one.date", "two.date", "three.date", "four.date", "five.date"), row.names = c(NA, 20L), class = "data.frame")
# > df
     one.date   two.date three.date  four.date  five.date
1        <NA>       <NA>       <NA>       <NA>       <NA>
2        <NA> 2012-11-13       <NA>       <NA>       <NA>
3        <NA>       <NA> 2012-11-19       <NA>       <NA>
4        <NA> 2012-11-19       <NA>       <NA>       <NA>
5        <NA>       <NA>       <NA>       <NA>       <NA>
6        <NA>       <NA>       <NA>       <NA>       <NA>
7        <NA>       <NA>       <NA>       <NA>       <NA>
8        <NA>       <NA>       <NA>       <NA>       <NA>
9        <NA>       <NA> 2012-09-22       <NA>       <NA>
10 2012-09-23       <NA>       <NA>       <NA>       <NA>
11 2012-09-23       <NA>       <NA>       <NA>       <NA>
12       <NA>       <NA>       <NA> 2012-09-02       <NA>
13       <NA>       <NA>       <NA> 2012-09-10       <NA>
14       <NA>       <NA>       <NA> 2012-09-23       <NA>
15       <NA>       <NA>       <NA>       <NA> 2012-09-24
16       <NA>       <NA>       <NA>       <NA> 2014-09-09
17       <NA> 2012-09-24       <NA>       <NA>       <NA>
18       <NA>       <NA> 2012-09-24       <NA>       <NA>
19       <NA>       <NA>       <NA>       <NA>       <NA>
20       <NA>       <NA>       <NA>       <NA>       <NA> 
```

现在，我想将它们组合或合并到一个向量中。像这样，

```
 date  one.date   two.date three.date  four.date  five.date
  1        <NA>       <NA>       <NA>       <NA>       <NA>       <NA>
  2  2012-11-13       <NA> 2012-11-13       <NA>       <NA>       <NA>
  3  2012-11-19       <NA>       <NA> 2012-11-19       <NA>       <NA>
  4  2012-11-19       <NA> 2012-11-19       <NA>       <NA>       <NA>
  5        <NA>       <NA>       <NA>       <NA>       <NA>       <NA>
  6        <NA>       <NA>       <NA>       <NA>       <NA>       <NA>
  7        <NA>       <NA>       <NA>       <NA>       <NA>       <NA>
  8        <NA>       <NA>       <NA>       <NA>       <NA>       <NA>
  9  2012-09-22       <NA>       <NA> 2012-09-22       <NA>       <NA>
  10 2012-09-23 2012-09-23       <NA>       <NA>       <NA>       <NA>
  11 2012-09-23 2012-09-23       <NA>       <NA>       <NA>       <NA>
  12 2012-09-02       <NA>       <NA>       <NA> 2012-09-02       <NA>
  13 2012-09-10       <NA>       <NA>       <NA> 2012-09-10       <NA>
  14 2012-09-23       <NA>       <NA>       <NA> 2012-09-23       <NA>
  15 2012-09-24       <NA>       <NA>       <NA>       <NA> 2012-09-24
  16 2014-09-09       <NA>       <NA>       <NA>       <NA> 2014-09-09
  17 2012-09-24       <NA> 2012-09-24       <NA>       <NA>       <NA>
  18 2012-09-24       <NA>       <NA> 2012-09-24       <NA>       <NA>
  19       <NA>       <NA>       <NA>       <NA>       <NA>       <NA>
  20       <NA>       <NA>       <NA>       <NA>       <NA>       <NA> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:43:37.733

我假设`NA`每行最多有 1 个非条目：

```
as.vector(apply(df,1,function(x) ifelse(all(is.na(x)),NA,x[!is.na(x)])))
 [1] NA           "2012-11-13" "2012-11-19" "2012-11-19" NA          
 [6] NA           NA           NA           "2012-09-22" "2012-09-23"
[11] "2012-09-23" "2012-09-02" "2012-09-10" "2012-09-23" "2012-09-24"
[16] "2014-09-09" "2012-09-24" "2012-09-24" NA           NA 
```

或者将其作为原始数据中的一个因素：

```
cbind(list(date=as.factor(apply(df,1,function(x) ifelse(all(is.na(x)),NA,x[!is.na(x)])))),df)
         date   one.date   two.date three.date  four.date  five.date
1        <NA>       <NA>       <NA>       <NA>       <NA>       <NA>
2  2012-11-13       <NA> 2012-11-13       <NA>       <NA>       <NA>
3  2012-11-19       <NA>       <NA> 2012-11-19       <NA>       <NA>
4  2012-11-19       <NA> 2012-11-19       <NA>       <NA>       <NA>
5        <NA>       <NA>       <NA>       <NA>       <NA>       <NA>
6        <NA>       <NA>       <NA>       <NA>       <NA>       <NA>
7        <NA>       <NA>       <NA>       <NA>       <NA>       <NA>
8        <NA>       <NA>       <NA>       <NA>       <NA>       <NA>
9  2012-09-22       <NA>       <NA> 2012-09-22       <NA>       <NA>
10 2012-09-23 2012-09-23       <NA>       <NA>       <NA>       <NA>
11 2012-09-23 2012-09-23       <NA>       <NA>       <NA>       <NA>
12 2012-09-02       <NA>       <NA>       <NA> 2012-09-02       <NA>
13 2012-09-10       <NA>       <NA>       <NA> 2012-09-10       <NA>
14 2012-09-23       <NA>       <NA>       <NA> 2012-09-23       <NA>
15 2012-09-24       <NA>       <NA>       <NA>       <NA> 2012-09-24
16 2014-09-09       <NA>       <NA>       <NA>       <NA> 2014-09-09
17 2012-09-24       <NA> 2012-09-24       <NA>       <NA>       <NA>
18 2012-09-24       <NA>       <NA> 2012-09-24       <NA>       <NA>
19       <NA>       <NA>       <NA>       <NA>       <NA>       <NA>
20       <NA>       <NA>       <NA>       <NA>       <NA>       <NA> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:53:34.790

```
df$onedate <- apply(df, 1, function(x) head(x[!is.na(x)], 1) ) 
```

我将 head( ., 1) 放入以处理可能有多个日期的情况。

# xml - 替换 XML 属性值

> ID：13589885
> 
> 赞同：2
> 
> 时间：2012-11-27T17:36:41.170
> 
> 标签：xml, vbscript, nodes, xmlnode

在过去的几天里，我一直在阅读有关使用 XML 文件的信息，并且正在努力解决问题。

获取属性并更改值似乎很简单，但我无法实现。

我有以下名为 input.xml 的 XML 文件：

```
<gs:GlobalizationService xmlns:gs="urn:longhornGlobalizationUnattend">
    <gs:UserList>
        <gs:User UserID="Current"/>
    </gs:UserList>
    <gs:InputPreferences>
        <gs:InputLanguageID Action="add" ID="0409:00000409" Default="true"/>
    </gs:InputPreferences>
</gs:GlobalizationServices> 
```

我需要能够更改属性 ID 的值。似乎我应该能够使用 selectSingleNode 和 setAttribute 命令的组合来完成此操作，但我无法让它工作。

下面是我一直在尝试的一个片段。值根据用户选择在主脚本的其他地方定义。

```
Dim xmlDoc, xmlNode
Set xmlDoc = CreateObject("Microsoft.XMLDOM")
xmlDoc.Async = "False"
xmldoc.Load("input.xml")

Set xmlNode = xmlDoc.selectSingleNode("gs:GlobalizationServices/gs:InputPreferences/gs:InputLanguageID")
xmlNode.setAttribute "ID", Value
xmlDoc.save("input.xml") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:38:19.330

(1) 使用带有基本错误检查的骨架，例如

```
Dim oFS    : Set oFS  = CreateObject("Scripting.FileSystemObject")
Dim sFSpec : sFSpec   = oFS.GetAbsolutePathName("...")
Dim oXML   : Set oXML = CreateObject("Msxml2.DOMDocument")
oXML.setProperty "SelectionLanguage", "XPath"
' If namespace(s)
' oXML.setProperty "SelectionNamespaces", "...'"
oXML.async = False
oXML.load sFSpec
If 0 = oXML.parseError Then
   WScript.Echo oXML.xml
   WScript.Echo "-----------------"
   Dim sXPath : sXPath    = "..."
   Dim ndFnd  : Set ndFnd = oXML.selectSingleNode(sXPath)
   If ndFnd Is Nothing Then
      WScript.Echo sXPath, "not found"
   Else
      WScript.Echo ndFnd.nodeName, ndFnd.getAttribute("UserID")
      WScript.Echo "-----------------"
      ndFnd.setAttribute "UserID", "Changed"
      WScript.Echo oXML.xml
      oXML.save Replace(sFSpec, ".xml", "-o.xml")
   End If
Else
   WScript.Echo oXML.parseError.reason
End If 
```

(2) 填写文件规范后，您意识到您的 XML 格式不正确。

```
script 13589885.vbs
nd tag 'gs:GlobalizationServices' does not match the start tag 'gs:GlobalizationService'. 
```

(3) 由于 XML 包含 (a) 命名空间，您需要

```
oXML.setProperty "SelectionNamespaces", "xmlns:gs='urn:longhornGlobalizationUnattend'"
...
Dim sXPath : sXPath    = "/gs:GlobalizationService/gs:UserList/gs:User" 
```

(4) 现在它没有明显崩溃：

```
cscript 13589885.vbs
<gs:GlobalizationService xmlns:gs="urn:longhornGlobalizationUnattend">
        <gs:UserList>
                <gs:User UserID="Current"/>
        </gs:UserList>
        <gs:InputPreferences>
                <gs:InputLanguageID Action="add" ID="0409:00000409" Default="true"/>
        </gs:InputPreferences>
</gs:GlobalizationService>

-----------------
gs:User Current
-----------------
<gs:GlobalizationService xmlns:gs="urn:longhornGlobalizationUnattend">
        <gs:UserList>
                <gs:User UserID="Changed"/>
        </gs:UserList>
        <gs:InputPreferences>
                <gs:InputLanguageID Action="add" ID="0409:00000409" Default="true"/>
        </gs:InputPreferences>
</gs:GlobalizationService> 
```

(5) 反思为什么`xmldoc.Load("input.xml")`和`xmlDoc.save("input.xml")`是坏的VBScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T21:38:17.830

您应该使用 XPath 选择器，然后编译选择器。我认为您不需要使用任何 3rd 方库。我认为 JDK 有你需要做的东西。如果你用谷歌搜索，就有例子。

# maven - Maven 在大型项目中构建快照工件时使用不同的时间戳

> ID：13589893
> 
> 赞同：4
> 
> 时间：2012-11-27T17:37:07.380
> 
> 标签：maven, timestamp, snapshot

我们有一个包含大约 250 个模块的大型 maven 3 项目。所有模块都有 1.0-SNAPSHOT 版本，并且模块树具有与树根相同版本的单个父模块。项目每晚使用 Bamboo 构建，并且使用命令“mvn clean install”将工件安装到 Nexus 存储库。

碰巧部分模块是用一个时间戳构建的，而其余模块是用另一个时间戳构建的，例如：module1-1.0-20121127.150154-7.jar module100-1.0-20121127.150527-7.jar

在另一个项目中，我试图使用特定版本的快照依赖项（如本问题[Maven specific version of a snapshot dependency 中所述](https://stackoverflow.com/questions/1368625/maven-specific-version-of-a-snapshot-dependency)）将依赖项设置为该项目的工件，但由于上述问题而未能构建。

有谁知道为什么 Maven 会使用不同的时间戳以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-23T14:42:39.043

[MNG-6754](https://issues.apache.org/jira/browse/MNG-6754)最终在 3.8.2 中得到修复。

# actionscript-3 - MOUSE_OUT 动作不起作用？

> ID：13589894
> 
> 赞同：3
> 
> 时间：2012-11-27T17:37:08.117
> 
> 标签：actionscript-3, flash

我的目标是：当您将鼠标放在它播放的剪辑上然后停留在最后一帧直到鼠标移开时，剪辑应该返回到第一帧。

到目前为止，这段代码有效，当您将鼠标放在上方时，剪辑开始然后在最后一帧停止。

我还希望即使您在剪辑到达最后一帧之前关闭鼠标，它仍然会返回到第一帧。

```
stop();

stage.addEventListener(MouseEvent.MOUSE_OVER, playMovie); function playMovie(event) { play(); }
stage.addEventListener(MouseEvent.MOUSE_OUT, stopMovie); function stopMovie(event) { stop(); }

stop(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:46:46.083

不要`stop()`在您的`stopMovie`函数中使用，而是使用`gotoAndStop(1)`将其重置为第一帧。

`Event.MOUSE_LEAVE`如果您希望在鼠标完全离开 SWF 时发生这种情况，您可能需要使用而不是 mouse out。

# regex - 用于从文本文件中删除 ^M 字符的 Shell 命令

> ID：13589895
> 
> 赞同：7
> 
> 时间：2012-11-27T17:37:13.933
> 
> 标签：regex, linux, awk, sed, grep

> **可能重复：**
> [在 Unix 中删除回车](https://stackoverflow.com/questions/800030/remove-carriage-return-in-unix)

我正在阅读由外部第三方生成的一些数据。我注意到文件中的 ASCII 文本散布着 ^M 字符，我相信它是 ASCII 中的字符 13，表示没有换行的回车。

是否有一个衬里可以用来从文件中删除 ^M 字符？

我在 Linux（Ubuntu）上运行。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T17:46:43.990

您可以像这样使用 sed：

```
sed -i.bak 's/^M$//' infile.txt 
```

要键入`^M`，您需要键入`CTRL-V`然后`CTRL-M`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-27T17:50:06.640

或者

```
dos2unix infile.txt file2.txt .... 
```

或者

```
man dos2unix 
```

更多细节。

# c# - WPF DataGrid 行高

> ID：13589898
> 
> 赞同：3
> 
> 时间：2012-11-27T17:37:20.330
> 
> 标签：c#, .net, wpf, datagrid, rows

我在 WPF 项目中有一个数据网格。我已将列宽设置为具有最大限制，
并且我希望数据同样被拉伸以适合行。但这不会发生......内容只是保持相同的大小并且单元格被切断。有任何想法吗？

这是代码：

```
<DockPanel>
<DataGrid x:Name="nirGrid" x:Uid="nirGrid" AutoGenerateColumns="False"      AlternationCount="2" SelectionMode="Single" DockPanel.Dock="Top" Margin="10,50,10,50" FlowDirection="RightToLeft" ColumnWidth="SizeToCells" CanUserSortColumns="False" CanUserResizeColumns="False" CanUserReorderColumns="False" GridLinesVisibility="None" HeadersVisibility="None" SelectionUnit="Cell" VerticalAlignment="Stretch" EnableRowVirtualization="False" IsReadOnly="True" RowDetailsVisibilityMode="Visible" MinRowHeight="0" CanUserResizeRows="True" RowHeaderWidth="0">
        <DataGrid.Style>
            <Style>
                <Setter Property="ScrollViewer.CanContentScroll" Value="False" />
            </Style>
        </DataGrid.Style>
        <DataGrid.Columns >
            <DataGridTextColumn Binding="{Binding Path=task_desc}" IsReadOnly="True" Header="test1" Width="SizeToCells" MaxWidth="330" >

            </DataGridTextColumn>
            <DataGridTextColumn Binding="{Binding Path=task_req_date}" IsReadOnly="True" Header="test2" Width="SizeToCells" MaxWidth="70" >

            </DataGridTextColumn>

            <DataGridTemplateColumn Header="delete" >
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button Content="delete" ToolTip="delete" Opacity="0.8" Click="Button_Click" MouseEnter="Button_MouseEnter" MouseLeave="Button_MouseLeave">
                            <Button.Template>
                                <ControlTemplate>
                                    <Border HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <Image Source="/exhibits;component/Images/exit1.png" Width="15" Height="15" />
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

        </DataGrid.Columns>

    </DataGrid> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T17:56:40.617

尝试使用文本块。它应该自动将内容包装成您想要的大小。

```
 <DataGridTemplateColumn Width="*" Header="Column 2">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Path=task_req_date}" TextWrapping="Wrap" AcceptsReturn="true" />  
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn> 
```

# java - 尝试通过 Runtime.exec() 运行 cvs 时出错

> ID：13589902
> 
> 赞同：0
> 
> 时间：2012-11-27T17:37:36.523
> 
> 标签：java, windows-7, cvs, runtime.exec, wincvs

我通常使用 WinCVS，但我正在尝试编写一个 Java 应用程序来自动化一些构建/部署任务。如果我从命令行运行`cvs -n update`，我会得到查询结果。如果我通过 Runtime.exec() 运行它，我会收到以下错误。有任何想法吗？在 Windows 7 机器上运行。

```
cvs update: warning: unrecognized response 'error: Failed to create SSH connection server' from cvs server
cvs update: warning: unrecognized response 'error: Error (0x80090006): Invalid Signature.' from cvs server
cvs [update aborted]: end of file from server (consult above messages if any) 
```

# c# - 如何在不删除数据库的情况下更新 C# 中对 SampleData Seed 所做的更改？

> ID：13589904
> 
> 赞同：4
> 
> 时间：2012-11-27T17:37:43.907
> 
> 标签：c#, asp.net-mvc, entity-framework, dbcontext

我是 Entity Framework 和 MVC 4 的新手，我一直在关注 Microsoft 网站上的 Music Store 应用程序教程（对我的需要进行了一些轻微的调整）。我有一个使用 Code First 创建的远程数据库。这包括一个`SampleData`包含有关歌曲、艺术家、流派等信息的类......并在创建所有表后用它填充数据库。这工作正常。

但是，现在我对我的`SampleData`类进行了一些更改，我希望它使用该数据更新数据库（删除已删除的行，插入已添加的新行等），**而不会**删除数据库。我的数据库管理员不允许我运行 DROP 命令，因此`DropCreateDatabaseAlways`与我的 Seed 一起使用是行不通的。我已经在本地完成了这项工作，它可以工作，删除数据库，使用表（模型相同）和新的示例数据再次创建它。

有什么方法可以做到这一点，而不必在每次我想更新示例数据时删除数据库？也许代码优先迁移（即使我的模型没有改变，只是数据）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T04:33:05.137

此方法已贬值，直接跳到最下面。

您可以使用代码优先数据迁移。

为了更新您的示例数据（在 EF 中称为种子数据），您可以编辑 Migrations 文件夹中的 Configuration.cs 并添加或更新您想要更改的数据，如下所示：

```
protected override void Seed(icicle.Models.icicleEntities context)
{
    //  This method will be called after migrating to the latest version.

    //   You can use the DbSet<T>.AddOrUpdate() helper extension method 
    //   to avoid creating duplicate seed data. E.g.

    context.Widgets.AddOrUpdate(new Widget()
    {
         Id = 1,
         Name = "My Really Awesome Widget"
    });
} 
```

* * *

在新范例下，您只需转到 Tools->Library Package Manager->Package Manager Console 并运行以下脚本行：

```
Update-Database -ConnectionStringName "YourConnectionStringNameGoesHere" -Verbose 
```

# design-patterns - 对记录的访问限制建模

> ID：13589907
> 
> 赞同：2
> 
> 时间：2012-11-27T17:37:47.553
> 
> 标签：design-patterns, database-design

从数据设计大师那里寻找一些集体智慧......

我正在编写一个基于网络的游戏（本质上是一个网络应用程序）。游戏动态需要在授予/拒绝成就之前进行访问检查。

我的游戏需要精细控制谁/何时可以访问某些成就。这些成就要求各不相同，可能是以下任何一项的组合：

*   用户必须查看某些内容（有一个存储此访问信息的表）
*   用户必须等到访问被批准（例如，创建帐户后 2 周才能访问记录）
*   用户必须响应事件（例如消息）
*   用户必须回答过一个问题（例如游戏内投票）

但是我不能对这些进行硬编码，因为游戏允许为每个游戏大师创建自定义“宇宙”。因此，每个游戏大师都应该能够创建/更改在他/她的“宇宙”中授予成就的方式。

我在想出一个数据库设计来允许存储这些限制以获取成就记录时遇到了困难。有没有什么好的通用设计模式来存储这种信息？有什么有用的书籍、网站吗？

欢迎任何想法，建议。

*PS。我已经尝试过 Google-ing，但返回的大多数点击都是关于如何控制对数据库的访问，而不是如何设计存储这些信息的表。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:47:23.440

你正在做的是建模状态。对状态建模的最常见方法是使用状态转换表。

```
 View something | Wait     | Respond | Answer
            ----------------------------------------
User 1        view action  |          | resp act|
User 2                     | wait act |         |
User 3                     |          |         | answer act 
```

等等。

编辑添加：该表仅包含状态信息。您的代码必须知道如何设置状态表以及完成状态或状态组合时要执行的操作。

# powershell - 实时控制台屏幕

> ID：13589913
> 
> 赞同：0
> 
> 时间：2012-11-27T17:38:14.750
> 
> 标签：powershell

有没有办法获取服务器列表，执行“ForEach”命令来 ping 并响应控制台窗口，在 $x 列中显示所有服务器，覆盖它们的服务器名？如果服务器启动，我想将他们的名字显示为绿色，如果服务器关闭，则更改为红色。

到目前为止我得到了什么：

```
$ServerL = "filename.txt"
$ScreenD = "ScreenDisplay.ps1"

while ($true) {
    if(Test-Path $ScreenD) { 
        Remove-item $ScreenD
    }

    function GetStatusCode {
        param([int] $StatusCode)

        switch($StatusCode) {
            0 {"Success"}
            11001{"Buffer Too Small"}
            11002{"Destination Net Unreachable"}
            11003 {"Destination Host Unreachable"}
            11004 {"Destination Protocol Unreachable"}
            11005 {"Destination Port Unreachable"}
            11006 {"No Resources"}
            11007 {"Bad Option"}
            11008 {"Hardware Error"}
            11009 {"Packet Too Big"}
            11010 {"Request Timed Out"}
            11011 {"Bad Request"}
            11012 {"Bad Route"}
            11013 {"TimeToLive Expired Transit"}
            11014 {"TimeToLive Expired Reassembly"}
            11015 {"Parameter Problem"}
            11016 {"Source Quench"}
            11017 {"Option Too Big"}
            11018 {"Bad Destination"}
            11032 {"Negotiating IPSEC"}
            11050 {"General Failure"}
            default {"Failed"}
        }
    }

    Write-Host "`n"

    foreach($Server In Gc $ServerList) {

        $PingStatus = Gwmi Win32_PingStatus -Filter "Address ='$Server'" | Select-Object StatusCode

        if ($PingStatus.StatusCode -eq 0) {    
            Add-Content ($filename) "write-host $Server is up -foreground green"
        }    
        else {    
            Add-Content ($filename) "write-host $Server is up -foreground red"
        }    
    }

    ./screendisplay.ps1 | Format-Wide {$_} -Column 4 -Force

    # Gc $filename  | Format-Wide {$_} -Column 4 -Force

    Write-Host "`n"    

    Sleep -seconds (2)    
} 
```

# mysql - JDBC MySQL 连接错误

> ID：13589923
> 
> 赞同：-1
> 
> 时间：2012-11-27T17:38:46.040
> 
> 标签：mysql, jdbc

尝试与 mysql 数据库建立 jdbc 连接时出现以下错误：

> 试图连接到 jdbc:mysql://localhost/
> castel castel castel com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Access denied for user 'castel'@'%' to database 'castel'

我可以使用相同的凭据通过命令行毫无问题地连接到数据库。我认为这可能是一个特权问题，所以我跑了：

```
GRANT ALL PRIVILEGES ON mysql.* TO 'castel'@'%' 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:21:07.250

好的，问题与数据库配置完全无关。事实证明，我的机器将 iptables 配置为将端口 3306 上的所有流量转发到另一台机器，所以我没有像我认为的那样与数据库交谈。

# java - 如何使用 ASM 创建局部变量？

> ID：13589924
> 
> 赞同：3
> 
> 时间：2012-11-27T17:38:50.300
> 
> 标签：java, variables, local, bytecode, java-bytecode-asm

我正在尝试用 ASM 修补一个类。我需要在函数中添加一些逻辑。这个逻辑需要一个新的局部变量。这是我所做的：

```
class CreateHashTableMethodAdapter extends MethodAdapter {
    @Override  
    public void visitMethodInsn(int opcode, String owner,String name, String desc){
        System.out.println(opcode + "/" + owner + "/" + name + "/" + desc);

        if(opcode == Opcodes.INVOKESPECIAL &&
                "javax/naming/InitialContext".equals(owner) &&
                "<init>".equals(name) &&
                "()V".equals(desc)){

            System.out.println("In mod");
            //  83: new #436; //class javax/naming/InitialContext
            //  86: dup

            mv.visitMethodInsn(Opcodes.INVOKESPECIAL, "javax/naming/InitialContext", "<init>", "()V");
            mv.visitVarInsn(Opcodes.ASTORE, 1);

            Label start_patch = new Label();
            Label end_patch = new Label();

            mv.visitLabel(start_patch);

            mv.visitTypeInsn(Opcodes.NEW,"java/util/Hashtable");
            mv.visitInsn(Opcodes.DUP);
            mv.visitMethodInsn(Opcodes.INVOKESPECIAL, "java/util/Hashtable", "<init>", "()V");  
            mv.visitVarInsn(Opcodes.ASTORE,9);

            // ........ sNip ..........

            mv.visitLabel(end_patch);
            mv.visitLocalVariable("env","Ljava/util/Hashtable;",null,start_patch,end_patch,9);

            //    127:  astore_1

        }
        else {
            mv.visitMethodInsn(opcode, owner, name, desc);
        }
    }
} 
```

当我针对它运行此方法适配器时`CheckClassAdapter`，状态如下：

```
org.objectweb.asm.tree.analysis.AnalyzerException: Error at instruction 51: Trying to access an inexistant local variable 9
.... sNiP ....
00050 R R . . .  : R R  :     INVOKESPECIAL java/util/Hashtable.<init> ()V
00051 R R . . .  : R  :     ASTORE 9 
```

我想我滥用了 visitLocalVariable，但我找不到我应该在哪里调用它。

当我 javap 生成字节码（不检查）时，我得到以下局部变量表：

```
LocalVariableTable: 
Start  Length  Slot  Name   Signature
91      40      9    env       Ljava/util/Hashtable;
0      343      0    this       Lpmu/jms/ServerJMS;
132      146      1    initialContext       Ljavax/naming/InitialContext;
153      125      2    topicConnectionFactory       Ljavax/jms/TopicConnectionFactory;
223      55      3    topic       Ljavax/jms/Topic;
249      29      4    topicSubscriber       Ljavax/jms/TopicSubscriber;
279      55      1    ex       Ljava/lang/Exception;
281      53      2    codeMessage       I
289      45      3    params       Lpmu/data/Parameters;
325      9      4    messageError       Ljava/lang/String; 
```

您可能会注意到，我的变量在这里但最上面？！任何的想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:26:46.280

创建新局部变量的一种便捷方法是扩展 LocalVariablesSorter 而不是 MethodAdapter。然后，您可以根据需要分配局部变量，`newLocal()`而不会干扰现有变量。[有关详细信息，请参阅ASM 主页](http://asm.ow2.org/)上的*ASM 4.0 A Java 字节码工程库*的第 3.3.3 节。

# objective-c - 从远程 URL 创建图像并将其添加到单元格

> ID：13589927
> 
> 赞同：1
> 
> 时间：2012-11-27T17:38:59.257
> 
> 标签：objective-c, rubymotion

我正在使用 Rubymotion 构建一个 iOS 应用程序。我正在创建一个自定义 tableview 行，我想从远程 API 向它添加一个大图像（从 JSON 对象获取 URL）。

我怎样才能做到这一点？我在任何地方都找不到如何从远程 URL 创建图像然后将其添加到单元格中。

感谢所有帮助！

**更新**

我现在正在使用此代码，但滚动表格时性能非常差。

```
url = NSURL.URLWithString("http://www.gravatar.com/avatar/1d92e61d7066383b1e3c797ea635f86e?s=128&d=identicon&r=PG")
    data = NSData.dataWithContentsOfURL(url)
    remote = UIImage.imageWithData(data)
    image = UIImageView.alloc.initWithFrame([[50, 50],[150, 50]])
    image.contentMode = UIViewContentModeScaleAspectFit
    image.image = remote 
```

**更新 2**

我最终得到了这个性能良好的代码。现在我只需要弄清楚我们如何缓存图像。

```
Dispatch::Queue.concurrent.async do
      data = NSData.alloc.initWithContentsOfURL(NSURL.URLWithString(post.image_medium))
      if data
        image = UIImage.alloc.initWithData(data)
        Dispatch::Queue.main.sync do
          image_view = UIImageView.alloc.initWithFrame([[210, 10],[80, 80]])
          image_view.image = image
          view.addSubview(image_view)
        end
      end
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:49:15.420

如果它只是一个单元格中的一张图像，请使用

```
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.example.com/exampleImage.png"]];
yourCell.image = [UIImage imageWithData:data]; 
```

如果你有很多或者不想阻止 UI 使用[AsyncImageView](https://github.com/nicklockwood/AsyncImageView)

# performance - 在 Chrome / Webkit 中禁用抗锯齿

> ID：13589928
> 
> 赞同：5
> 
> 时间：2012-11-27T17:39:01.800
> 
> 标签：performance, google-chrome, webkit, interpolation, antialiasing

有没有办法禁用 Chrome/Webkit 中图像的抗锯齿功能？出于性能原因，我不希望浏览器平滑图像大于实际文件。

[Chrome/Safari 中的图像插值模式？](https://stackoverflow.com/questions/5403955/image-interpolation-mode-in-chrome-safari)一年半前就提到了这个问题，所以希望 Webkit 从那时起增加了某种支持。

编辑：经过进一步研究，[在画布（和 img）上使用 CSS 缩放的最近邻](https://stackoverflow.com/questions/8028864/using-nearest-neighbor-with-css-zoom-on-canvas-and-img)似乎更进一步，但尚不清楚究竟什么是有效的。

# jquery - jQuery 单击链接以同时在两个位置显示带有 div 标题的 var div 图像

> ID：13589929
> 
> 赞同：0
> 
> 时间：2012-11-27T17:39:16.277
> 
> 标签：jquery, jquery-ui, jquery-plugins

单击文本菜单时，照片淡入和标题也会淡入放置在单独的位置。我无法整合标题。如果有更好的方法可以做到这一点，我将不胜感激。

演示：http: [//jsfiddle.net/Tacbs/4/](http://jsfiddle.net/Tacbs/4/)

```
$(document).ready(function() {
$("div#photos, div#photo-titles").hide();
var divs = $("#Photo1, Photo1-Title, #Photo2,  Photo2-Title, #Photo3, Photo3-Title,");
$("li a").click(function () {
$(divs).hide();
$("#" + $(this).attr("class")).fadeIn();
});
});​

#photo-titles {
margin-top: 0;
}
#photos {
margin-top: 100px;
}
#photo-titles {
margin-top: 200px;
}​

<div id="photo-links">
<ul>
<li><a href="#" class="Photo1 Photo1-Title">Photo 1 Button</a></li>
<li><a href="#" class="Photo2 Photo2-Title">Photo 2 Button</a></li>
<li><a href="#" class="Photo3 Photo3-Title">Photo 2 Button</a></li>
</ul>
</div>

<div id="photos">
<div id="Photo1"><img src="Photo1.jpg"/></div>
<div id="Photo2"><img src="Photo1.jpg"/></div>
<div id="Photo3"><img src="Photo1.jpg"/></div>
</div>

<div id="photo-titles"> // text
<div id="Photo1-Title">Photo Title 1</div>
<div id="Photo2-Title">Photo Title 2</div>
<div id="Photo3-Title">Photo Title 3</div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:53:39.427

您缺少很多逻辑，缺少`#`ID 选择器，而且您正在抓取您想要显示的 div，`.attr('class')`但没有将它们按空格拆分并选择它们。

[http://jsfiddle.net/6krwX/](http://jsfiddle.net/6krwX/)

```
$("div#photos, div#photo-titles").hide();

// you were missing # ID selector for some selectors here
var divs = $("#Photo1, #Photo1-Title, #Photo2,  #Photo2-Title, #Photo3, #Photo3-Title");

$("li a").click(function () {

    $(divs).hide();
    $('#photos, div#photo-titles').show(); // show the areas

    var locations = $(this).attr('class').split(' '); // split the classes up

    for (i = 0; i < locations.length; i++) {
        $("#" + locations[i]).show(); // show photo & title
    }
}); 
```

可以进行任何改进，但是 jist 就在那里并且它正在工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:09:42.853

有几件事，我认为你使用了太多的 id。使用类可以更好地控制这一点。如果您尝试一次做多件事，这就是存在类的原因（有点）。使用 id，您必须隔离每一个。所以我将一些 id 更改为 classes 并让它运行良好。

HTML

```
<div id="photo-links">
<ul>
<li><a href="#" class="Photo1">Photo 1 Button</a></li>
<li><a href="#" class="Photo2">Photo 2 Button</a></li>
<li><a href="#" class="Photo3">Photo 3 Button</a></li>
</ul>
</div>

<div id="photos">
<div class="Photo1 hide"><img src="Photo1.jpg"/></div>
<div class="Photo2 hide"><img src="Photo1.jpg"/></div>
<div class="Photo3 hide"><img src="Photo1.jpg"/></div>
</div>

<div id="photo-titles">
<div class="Photo1 hide">Photo Title 1</div>
<div class="Photo2 hide">Photo Title 2</div>
<div class="Photo3 hide">Photo Title 3</div>
</div>​ 
```

JS $(文档).ready(函数() {

```
$("#photos, #photo-titles, .hide").hide();

$("li a").click(function () {
    $("#photos, #photo-titles, .hide").hide(); // Hide everything every time
    var c = $(this).attr('class').split(' ')[0]; // Get first class of link
    $("." + c).parent().show(); // Show the parent div
    $("." + c).fadeIn(); // Show the object you want to show
    });
});​ 
```

可能有一种更有效的方法可以做到这一点，但效果很好。

**更新** 我意识到我创建了那个隐藏类并且没有解释它。首先，这取决于您是否要隐藏父 div`#photos`和`#photo-titles`. 这将取决于您使用它们的目的。如果您不需要隐藏这些 div 本身以及其中的所有内容，则可以`#photos, #photo-titles`从`hide()`调用中删除 以及该行`$("." + c).parent().show();`，因为始终会显示父母。然后你可以隐藏`.hide`类。

# c++ - 如何将结构内容复制到另一个数组结构

> ID：13589939
> 
> 赞同：0
> 
> 时间：2012-11-27T17:39:52.917
> 
> 标签：c++, visual-c++, struct

我有这个 c++ 结构

```
struct PACKET
{
    BOOL isTCPPacket;
    BOOL isUDPPacket;
    BOOL isICMPPacket;
    BOOL isIGMPPacket;
    BOOL isARPPacket;
    BOOL isIPPacket;

    struct PETHER_HEADER
    {
        string  DestinationHost;
        string  SourceHost;
        struct PROTOCOL_TYPE
        {
            string  Name;
            WORD    Identifier;
        } ProtocolType;
    } EthernetHeader;
}; 
```

我有

```
PACKET* Packet;
PACKET* Packets[6]; 
```

例如，我如何将 Packet 的内容复制到 Packets[3] 中，知道 Packet [INDEX] 中每个数组的数据包内容会有所不同

我已经尝试过 memcpy

```
memcpy((void*)&Packets[i],(void*)&Packet,sizeof(PACKET)); 
```

没有运气

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T17:42:49.360

怎么样`Packets[3] = Packet;`？这完全符合您的要求（将`Packet`作为指针的 的内容复制到`Packets[3]`）。

如果要复制值，也可以使用赋值：`*(Packets[3]) = *Packet;`假设指针有效。编译器生成的赋值运算符 for`PACKET`应该可以正常工作。

在这种情况下我会避免`memcpy`，因为有些成员是`std::string`- 你一定会遇到麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:04:58.813

啊! 就一件事：

```
PACKET* Packets[6]; 
```

不同于：

```
PACKET (*Packets)[6]; 
```

前者是一个指针数组（即6个指针），但后者是一个保存`PACKET[6]`数组地址的指针！

无论哪种情况，您都必须为`Packet`变量分配内存。`memcpy`否则分配将不起作用，除非分配了一些堆或堆栈内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:44:43.333

希望数据包包含有效对象。Packets[i] 也指向分配的对象。

这样做： Packet[i] = Packet;

由于字符串对象在其对象中存储指针，并且只能使用赋值运算符进行复制。

# fullcalendar - 仅在 dayView 中更改完整日历事件高度

> ID：13589940
> 
> 赞同：2
> 
> 时间：2012-11-27T17:39:59.010
> 
> 标签：fullcalendar

Full Calendar dayView 高度调整似乎是不可能的。我已经看过并尝试了几乎所有东西。我可以调整高度，但事件重叠？我在 stackoverflow 上看过几篇文章，但没有一个能解决我的问题。

```
eventAfterRender: function(event, element, view) {
                console.log($(view));
                //$('div.fc-day-content').css({"height":"50px"});
                $('.fc-event').css({"height":"50px"});

             }, 
```

这是它吐出的CSS。

```
element.style {
    background-color: #2E3436;
    border-color: #2E3436;
    color: #FFFFFF;
    height: 50px;
    left: 3px;
    position: absolute;
    top: 36px;
    width: 1439px;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:25:06.647

假设您要为其设置高度的视图是 basicDay，您需要的是类似

```
eventRender: function(event, element, view) {
    if(view.name === 'basicDay') {
        $(element).height(100);
    }
} 
```

请参阅[jsfiddle 示例](http://jsfiddle.net/MsjjW/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T16:13:41.457

这不起作用，因为元素具有“位置：绝对”，并且每个元素都通过“顶部”属性设置在另一个下方，因此如果您更改它们的所有高度，它们将溢出并相互阻塞，我所做的是改变它们的高度，但也增加它们与顶部的距离，使用：

```
$('.fc-event').css('height', '100px'); 
```

接着 -

```
$('.fc-event').css('top', function(i, v) {
return (((parseFloat(v)-18)/20)*100 + 18) + 'px';
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-30T04:34:49.460

是的，你可以在事件渲染选项中做到这一点

```
 eventRender: function (event, element,view) {
                 debugger; 
             if(view.type == "agendaDay"){
                 $('.fc-time-grid .fc-slats td').css('height','2.8em');}
             else
                 $('.fc-time-grid .fc-slats td').css('height','1.8em');} 
```

# php - mysqli 转义字符串附加参数

> ID：13589941
> 
> 赞同：1
> 
> 时间：2012-11-27T17:40:01.253
> 
> 标签：php

为什么`mysqli_real_escape_string`要询问附加参数？在程序方法中，我们还必须包括连接建立。这背后的逻辑是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:41:51.770

您正在提供数据库连接链接。这样您就可以同时拥有多个 MySQL 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:53:17.113

在某些情况下，您可能希望打开多个连接并连接到多个 MySQL 数据库。明确说明您要使用的连接链接标识符允许您查询多个 MySQL 数据库而不必担心冲突。

```
//Open connections to two separate databases. For example: DatabaseOne and DatabaseTwo
$databaseOne = mysqli_connect("example.com", "user", "password", "DatabaseOne");
$databaseTwo = mysqli_connect("example.com", "user", "password", "DatabaseTwo");

//Make variable clean for first connection to DatabaseOne
$var= mysqli_real_escape_string($databaseOne, $var);

//QUERY TABLE FROM DATABASE ONE
$res1 = mysqli_query($databaseOne, "SELECT col FROM tableInDatabaseOne WHERE col = '$var'");
//do something with $res1

//QUERY TABLE FROM DATABASE TWO
$res2 = mysqli_query($databaseTwo, "SELECT col FROM tableInDatabaseTwo");
//do something with $res2 
```

# java - 从没有模式的 xml 创建 Jaxb 类

> ID：13589942
> 
> 赞同：4
> 
> 时间：2012-11-27T17:40:00.583
> 
> 标签：java, jaxb

如何创建一个简单的 jaxb Java 类来表示以下 xml

```
<rootelem>
  <myelem name="abc" myatt="true"/>

  <myelem name="def">
     <Key value="newvalue"/>
  </myelem>
  <myelem name="xyz">
     <Key value="42"/>
  </myelem>
</rootelem> 
```

可以有多个`myelem`，每个`myelem`可以包含多个`key`

我不想使用 xsd

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T18:24:18.887

这是一个基本示例：

```
import java.io.FileReader;
import java.util.List;

import javax.xml.bind.JAXB;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name="rootelem")
class RootElem {
    List<MyElem> myelem;
}

@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name="myelem")
class MyElem {
    @XmlAttribute
    String name;
    @XmlAttribute
    Boolean myatt;
    @XmlElement(name="Key")
    List<Key> keys;
}

@XmlAccessorType(XmlAccessType.FIELD)
class Key {
    @XmlAttribute
    String value;
}

public class Test1 {

    public static void main(String[] args) throws Exception {
        RootElem r = JAXB.unmarshal(new FileReader("test.xml"), RootElem.class);
        System.out.println(r);
        JAXB.marshal(r, System.out);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:54:12.830

这是一个类的副本，我们使用 JAXB 使用类而不是 XSD 与 XML 进行转换。（我们还使用 JAXB 来生成我们的 XSD）。

编辑：我只是重新阅读了这个问题。如果您询问如何从该 XML 生成 Java 源代码，那么您将不得不自己解决这个问题，或者使用 XSD 并使用 JAXB 将其转换为类。如果您已经拥有该类并且想要将 XML 转换为 Java 对象，那么我下面的代码将为您工作。

```
package com.mycompany.types;

import java.io.StringReader;
import java.io.StringWriter;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.bind.Unmarshaller;
import javax.xml.bind.annotation.XmlTransient;

/**
 * Utility class to make it convenient to marshal and unmarshal the classes
 * generated by JAXB.
 */
@XmlTransient
public final class Utility {

  //
  // Static initialization
  //

  static {
    try {
      JAXB_CONTEXT = JAXBContext.newInstance(TestClass.class);
// The following fails with a javax.xml.bind.JAXBException.
// class mycompany.types.TestClass nor any of its super class is known
// to this context.
//      JAXB_CONTEXT =
//        JAXBContext.newInstance("com.mycompany.types",
//                                Utility.class.getClassLoader());
    }
    catch (Exception e) {
      throw new ExceptionInInitializerError(e);
    }
  }

  //
  // Constructors
  //

  //
  // Hidden constructor that prevents an object from being created.
  //
  private Utility() {
    // Do nothing.
  }

  //
  // Additional methods
  //

  /**
   * Unmarshals an XML string to a TestClass object.
   *
   * @param xml the XML string to parse
   * @return the resulting TestClass
   * @throws JAXBException if there are XML errors
   */
  public static TestClass parseTestClass(String xml) throws JAXBException {
    Unmarshaller unmarshaller = JAXB_CONTEXT.createUnmarshaller();
    return (TestClass)unmarshaller.unmarshal(new StringReader(xml));
  }

  /**
   * Marshals a TestClass object to an XML string.
   *
   * @param testClass
   * @return the resulting XML string
   * @throws JAXBException if there are XML errors
   */
  public static String printTestClass(TestClass testClass) throws JAXBException {
    Marshaller marshaller = JAXB_CONTEXT.createMarshaller();
    marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
    StringWriter writer = new StringWriter();
    marshaller.marshal(testClass, writer);
    return writer.toString();
  }

  //
  // Attributes
  //

  private static final JAXBContext JAXB_CONTEXT;

} 
```

# playframework - 为什么 playorm 不支持 play 2.x

> ID：13589943
> 
> 赞同：0
> 
> 时间：2012-11-27T17:40:02.027
> 
> 标签：playframework, playorm

我注意到 playorm github 页面上已经提到了速度方面的考虑，但是是否有任何技术限制阻止了它的实现？

是否有任何项目正在进行中以添加 2.x 支持？

如果那里已经有解决方案，我宁愿不必自己写这个......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:56:21.397

目前没有解决办法。玩 2.x 非常慢....编译，对 html 的更改需要重新编译，对于那些来自 1.x 世界的人来说，这非常令人沮丧。许多来自 1.x 的人都试图转到 2.x，甚至我的一个客户从 2.x 开始写，现在由于失去了如此巨大的生产力而向后移植到 play1.x（我也喜欢 scala，但循环生产力在 2.x 中要慢得多）。

这就是我们先做 1.x 的原因。不过，我们目前不支持 2.x。请在 github 上提交问题，因为我们一直在等到我们看到用户提出请求……我们第一个想要播放集成的用户也是 1.x 的人，我们也使用 play 1.x。

**那么，提出问题，您使用的是 scala 2.x 还是 java 2.x？** （我的意思是你的代码将在 scala 或 java 中？）。

此外，playORM 具有更紧密的集成，因为在 play1.x 重新启动时会重新扫描注释，并且在 play2.x 中我们也计划将其保留在那里。

谢谢，院长

# c++ - 如何将 C++11 std::stoi 与 gcc 一起使用？

> ID：13589947
> 
> 赞同：4
> 
> 时间：2012-11-27T17:40:05.490
> 
> 标签：c++, gcc, c++11, qt-creator

> **可能重复：**
> [如何在 C++ 中将数字转换为字符串，反之亦然](https://stackoverflow.com/questions/5290089/how-to-convert-a-number-to-string-and-vice-versa-in-c)

我正在使用 Qt Creator **2.5.0**和 gcc 4.7 (Debian **4.7.2** -4)。我在 .pro 文件中添加了“QMAKE_CXXFLAGS += -std=c++11”。一切似乎都很好，我使用了 C++11 std::for_each 等等。但是当我包含“字符串”标题并想使用 stoi 时，出现以下错误：

```
performer.cpp:336: error: 'std::string' has no member named 'stoi' 
```

我发现了一些与[MinGW相关的](https://stackoverflow.com/questions/8542221/stdstoi-doesnt-exist-in-g-4-6-1-on-mingw)[问题](http://gcc.gnu.org/ml/gcc-patches/2012-10/msg02544.html)，还有一个与[Eclipse CDT](https://stackoverflow.com/questions/13453765/does-libstdc-not-implement-stdstoi)相关的问题，他们得到了答案。但是我使用Linux，为什么它在这里不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:47:29.353

```
#include <iostream>
#include <string>

int main()
{
    std::string test = "45";
    int myint = stoi(test);
    std::cout << myint << '\n';
} 
```

或者

```
#include <iostream>
#include <string>

using namespace std    

int main()
{
    string test = "45";
    int myint = stoi(test);
    cout << myint << '\n';
} 
```

看看[http://en.cppreference.com/w/cpp/string/basic_string/stol](http://en.cppreference.com/w/cpp/string/basic_string/stol)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T18:20:22.447

`std::stoi`是命名空间范围内的函数，以字符串为参数：

```
std::string s = "123";
int i = std::stoi(s); 
```

从错误消息来看，您似乎希望它是 的成员`string`，被调用为`s.stoi()`（或可能`std::string::stoi(s)`）；事实并非如此。如果这不是问题，那么请发布有问题的代码，这样我们就不需要猜测它有什么问题。

# oracle11g - 如何在oracle中使用参数安排包内的过程

> ID：13589962
> 
> 赞同：0
> 
> 时间：2012-11-27T17:41:02.897
> 
> 标签：oracle11g

我有一个名为 mypackage 的包，它有一个过程 myproc。过程 myproc 接受两个日期参数。在接收到参数后，它会进行一些比较并检索数据。现在我的问题是我们如何安排这个过程 myproc ，它位于带有两个 i/p 参数的包 mypackage 中？

我正在使用 oracle11g，我同时拥有 sys 和普通用户访问权限。

一个演示示例将有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:48:07.807

详细信息：http: [//docs.oracle.com/cd/B28359_01/server.111/b28310/scheduse002.htm#i1009668](http://docs.oracle.com/cd/B28359_01/server.111/b28310/scheduse002.htm#i1009668)

您关心的工作是：

```
 BEGIN
     DBMS_SCHEDULER.CREATE_JOB (
        job_name            =>  'my_new_job', 
        program_name        =>  'mapackage.myproc', 
        schedule_name       =>  'my_schedule');
 END; 
```

然后将参数设置为：

```
 BEGIN
    DBMS_SCHEDULER.SET_JOB_ARGUMENT_VALUE (
    job_name                => 'my_new_job',
    argument_position       => 1,
    argument_value          => '27-NOV-12');
 END; 
```

/

# ios - 用于委托的“Self”关键字为空

> ID：13589972
> 
> 赞同：0
> 
> 时间：2012-11-27T17:41:36.510
> 
> 标签：ios

我正在尝试合并 OAuthConsumer 以与 API 交互。当“self”关键字为空时，我遇到了委托问题。

当下面的代码放在唯一的 viewController 内时，一切正常。当代码放在名为 wpOAuth 的类中时，然后从 viewController 调用“self”关键字为空，这会导致此错误： **requestTokenTicket:didFinishWithData:]: unrecognized selector sent to instance 0x7172ac0**

```
-(void)getKey:(UIViewController *) uiViewController{
    NSLog(@"\n\nGet Key!!!!!");
    OAConsumer *consumer = [[OAConsumer alloc] initWithKey:@"fsdfsdsdfsdfsdf"
                                                    secret:@"sdfdsfsdfsdf"];

    NSURL *url = [NSURL URLWithString:@"http://api-public.netflix.com/oauth/request_token"];

    OAMutableURLRequest *request = [[OAMutableURLRequest alloc] initWithURL:url
                                                                   consumer:consumer
                                                                      token:nil   // we don't have a Token yet
                                                                      realm:nil   // our service provider doesn't specify a realm
                                                          signatureProvider:nil]; // use the default method, HMAC-SHA1

    [request setHTTPMethod:@"POST"];

    OADataFetcher *fetcher = [[OADataFetcher alloc] init];

    [fetcher fetchDataWithRequest:request
                         delegate:self
                didFinishSelector:@selector(requestTokenTicket:didFinishWithData:)
                  didFailSelector:@selector(requestTokenTicket:didFailWithError:)];
}

- (void)requestTokenTicket:(OAServiceTicket *)ticket didFinishWithData:(NSData *)data {
    if (ticket.didSucceed) {
        NSString *responseBody = [[NSString alloc] initWithData:data
                                                       encoding:NSUTF8StringEncoding];
        //requestToken = [[OAToken alloc] initWithHTTPResponseBody:responseBody];
        NSLog(@"%@",[[OAToken alloc] initWithHTTPResponseBody:responseBody]);
        NSLog(@"\nticket is????????????????????????????= %@ ",ticket.body);
    }
} 
```

任何有关 self 关键字为何为空的见解都将不胜感激！

谢谢，4D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:14:00.147

我不熟悉以这种方式处理的委托，但我认为您需要添加`- (void)requestTokenTicket:(OAServiceTicket *)ticket didFinishWithData:(NSData *)data;`到您的标题中以定义该方法。看起来`OADataFetcher`没有使用协议，因此当它尝试调用对象上的方法时，它是不可见的，因为您没有定义它。

# ios - 计算 iOS 的 CoreMIDI 弯音值？

> ID：13589979
> 
> 赞同：1
> 
> 时间：2012-11-27T17:41:57.730
> 
> 标签：ios, endianness, coremidi

我需要从 iOS 中的原始 UInt16 值手动组装 14 位**MIDI Pitch Bend值。**我想知道是否有人有机会提出一个优雅的解决方案？这就是我所在的位置 - 我可能会在今天晚些时候有机会对此进行测试，但如果我在那之前收到回复，那就太好了：

首先，为好奇的人准备一些 MIDI 预备知识。

MIDI Pitch Bend 被分解为一个状态字节，然后是**两个**数据字节（它是一个 14 位控制器），这两个数据字节与它们的状态字节相关联，它们都以零状态**位**开头，MIDI 规范让它们按以下顺序出现最高位 -> 最低位

（编辑：更新，它实际上是**Status** -> **LSB** -> **MSB**）

（即 1110 0000、0111 1111、0111 1111）

挑战是如何在 iOS 上将 ARM/Intel 16 位 UInt16 分解为两个 7 位段，并且对 MIDI 有意义吗？

请记住，因为我们处理的是无符号整数，所以 0 值不是中性弯音，而是完全向下弯音——其中性弯音被定义为 8192——而 16,383 是向上弯音。

所以这是我对如何做到这一点的最佳猜测：

```
UInt16 msbAnd = base10ValueUInt16 & 16256; //clearing out LSB 
UInt16 msbAndShift = msbAnd << 1; //shift into leading Byte, with 0 status bit

UInt16 lsbAnd = base10ValueUInt16 & 127; //isolating LSB
UInt16 finalTwoBytePitchWord = msbFinalAndShift | lsbAnd; //make UInt16 word

UInt16 finalTwoBytePitchWordFlipped = CFSwapInt16HostToBig(finalTwoBytePitchWord); //Endian tweak 
```

这段代码运行良好，似乎创建了两个具有所需零状态位的数据字节，并从小端英特尔/ARM 翻转它们，这似乎是 MIDI 所必需的（MIDI 是 STATUS -> MSB -> LSB ）：我可以拍稍后使用适当的 MIDI 通道在前导状态字节上。

那么，这有意义吗？有没有人想出一个更优雅的解决方案？（有没有我忽略的图书馆？）......我稍后会回来检查并让人们知道这是否真的适用于我必须针对它的采样器。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T06:55:50.183

我认为您的代码接近正确，但它过于复杂。这个问题与 iOS 或字节序或 ARM 或 Intel 无关；它只是简单的旧 C 位玩弄。如果您正确编写代码，它将在[任何合理的平台](https://stackoverflow.com/a/13413892/1218876)上运行而无需修改。你不需要图书馆；这只是几行代码。

最好逐字节地使用 MIDI。您需要一个函数，它接受一个 16 位无符号整数（我们相信它最多具有 14 位值）并返回两个单字节值，一个具有最高有效位，一个具有最低有效位。

稍后，当您发送消息时，您以适当的顺序组装字节。[根据规范](http://www.midi.org/techspecs/midimessages.php)，音高轮消息是三个字节：STATUS，然后是 LSB，然后是 MSB。你的问题倒退了！

最不重要的 7 位很简单：只需从原始值中屏蔽掉这些位。最重要的 7 位类似：从原始值屏蔽下一个较高的 7 位，然后将它们向下移动。

16 位整数在您机器的内存中是小端还是大端无关紧要。编译器会处理这个问题。

这是一个函数和一个测试工具。

```
#include <stdio.h>
#include <stdint.h>  // for C standard uint8_t and uint16_t
// or, if you prefer, use unsigned char and unsigned short, or Byte and UInt16;
// they'll all work, although some are more portable than others

void encode14BitValue(uint16_t value, uint8_t *out_msb, uint8_t *out_lsb)
{
    uint16_t mask = 0x007F;  // low 7 bits on
                             // "(1 << 7) - 1" is arguably clearer
    *out_lsb = value & mask;
    *out_msb = (value & (mask << 7)) >> 7;
}

int main(int argc, const char * argv[])
{
    typedef struct {
        uint16_t in;
        uint8_t expected_msb;
        uint8_t expected_lsb;
    } test_case;

    test_case cases[] = {
        { 0x0000, 0x00, 0x00 },
        { 0x0001, 0x00, 0x01 },
        { 0x0002, 0x00, 0x02 },
        { 0x0004, 0x00, 0x04 },
        { 0x0008, 0x00, 0x08 },
        { 0x0009, 0x00, 0x09 },
        { 0x000F, 0x00, 0x0F },
        { 0x0010, 0x00, 0x10 },
        { 0x0011, 0x00, 0x11 },
        { 0x001F, 0x00, 0x1F },
        { 0x0020, 0x00, 0x20 },
        { 0x0040, 0x00, 0x40 },
        { 0x0070, 0x00, 0x70 },
        { 0x007F, 0x00, 0x7F },
        { 0x0080, 0x01, 0x00 },
        { 0x0081, 0x01, 0x01 },
        { 0x008F, 0x01, 0x0F },
        { 0x0090, 0x01, 0x10 },
        { 0x00FF, 0x01, 0x7F },
        { 0x0100, 0x02, 0x00 },
        { 0x0200, 0x04, 0x00 },
        { 0x0400, 0x08, 0x00 },
        { 0x0800, 0x10, 0x00 },
        { 0x1000, 0x20, 0x00 },
        { 0x1FFF, 0x3F, 0x7F },
        { 0x2000, 0x40, 0x00 },
        { 0x2001, 0x40, 0x01 },
        { 0x3FFF, 0x7F, 0x7F },
    };

    int passed = 1;
    for (int i = 0, c = sizeof(cases) / sizeof(cases[0]); i < c; i++) {
        uint8_t msb, lsb;
        encode14BitValue(cases[i].in, &msb, &lsb);

        if (cases[i].expected_msb != msb || cases[i].expected_lsb != lsb) {
            printf("failed: 0x%04hX expected 0x%02hhX 0x%02hhX got 0x%02hhX 0x%02hhX\n", cases[i].in, cases[i].expected_msb, cases[i].expected_lsb, msb, lsb);
            passed = 0;
        }
    }

    return passed ? 0 : 1;
} 
```

在您的代码中，试图将结果的两个字节打包成一个 16 位整数只会增加混乱。我不知道您为什么要这样做，因为无论何时您将 MIDI 发送到其他任何地方，您都必须再次提取单个字节。这就是担心字节顺序的地方，因为您的打包和解包代码必须一致。你不妨不打扰。我敢打赌你的代码是不正确的，但是你在交换 MSB 和 LSB 时的错误弥补了它。

# javascript - JavaScript 噪声函数问题

> ID：13589980
> 
> 赞同：2
> 
> 时间：2012-11-27T17:42:03.240
> 
> 标签：javascript, html, canvas, noise

我一直在尝试学习如何产生噪音，并发现我了解其中的大部分内容，但我在编写脚本时遇到了一些麻烦。

我使用[这个页面](http://freespace.virgin.net/hugo.elias/models/m_perlin.htm)作为指南，用[JavaScript 编写这个脚本，](http://jsfiddle.net/L2VsP/2/)最终目的是在画布上创建一些噪音。

它肯定在创造一些东西，但它一直藏在左边。此外，刷新页面似乎会一遍又一遍地创建相同的模式。

1.  我做错了什么，图像的“嘈杂”部分在左侧被弄脏了？我怎样才能让它看起来更像多云的柏林噪音？
2.  我真的不明白为什么它每次都不会产生新的模式。为了在每次运行脚本时接收随机模式，我需要更改什么？

谢谢您的帮助！

```
/* NOISE—Tie it all together
*/
function perlin2d(x,y){
    var total = 0;

    var p = persistence;
    var n = octaves - 1;

    for(var i = 0; i <= n; i++) {
        var frequency = Math.pow(2, i);
        var amplitude = Math.pow(p, i);

        total = total + interpolatenoise(x * frequency, y * frequency) * amplitude;
    }
    return total;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T17:47:32.343

我已经分叉了你的小提琴并修复了一些事情以使其工作：http: [//jsfiddle.net/KkDVr/2/](http://jsfiddle.net/KkDVr/2/)

主要问题是有缺陷的伪随机生成器“噪声”，对于足够大的 x 和 y 值，它总是返回 1。我已将其替换为使用整数坐标查询的随机值表：

```
var values = [];
for(var i = 0; i < height; i++) {
    values[i] = [];
    for(var j = 0; j < width; j++) {
        values[i][j] = Math.random() * 2 - 1;
    }
}
function noise(x, y) {
    x = parseInt(Math.min(width - 1, Math.max(0, x)));
    y = parseInt(Math.min(height - 1, Math.max(0, y)));
    return values[x][y];
} 
```

但是，您遵循的教程中提供的实现使用了优化得很差的简化算法。我建议您在[http://scratchapixel.com/lessons/3d-advanced-lessons/noise-part-1](http://scratchapixel.com/lessons/3d-advanced-lessons/noise-part-1)上获得出色的真实世界噪音教程。

最后，也许你会对我的一个项目感兴趣：http: [//lencinhaus.github.com/canvas-noise](http://lencinhaus.github.com/canvas-noise)。这是一个 javascript 应用程序，可以在 html5 画布上呈现 perlin 噪声，并允许在视觉上调整几乎任何参数。我已将 Ken Perlin 的原始噪声算法实现移植到 javascript，因此这可能对您有用。你可以在这里找到源代码：[https](https://github.com/lencinhaus/canvas-noise/tree/gh-pages) ://github.com/lencinhaus/canvas-noise/tree/gh-pages 。

希望对你有帮助，再见！

# vim - 病原体未加载插件 - 未找到匹配项

> ID：13589985
> 
> 赞同：1
> 
> 时间：2012-11-27T17:42:19.747
> 
> 标签：vim, pathogen

我正在尝试使病原体起作用，但出现未找到匹配错误：

我按照[此处](https://github.com/tpope/vim-pathogen)的说明操作并收到上述错误。

```
mkdir -p ~/.vim/autoload ~/.vim/bundle; \
curl -Sso ~/.vim/autoload/pathogen.vim \
    https://raw.github.com/tpope/vim-pathogen/master/autoload/pathogen.vim 
```

并且在 autoload 文件夹中创建了 Pathogen.vim，并且还创建了一个 bundle 文件夹。

我收到的错误是

```
~/.vim]$ source ~/.vimrc    
/Users/malugus/.vimrc:1: no matches found: pathogen#infect 
```

我在 mac 10.7.5 上，我正在使用 zsh shell。Vim 版本是 7.3

其他相关帖子似乎出现了不同的错误 - 未找到任何功能。我怀疑自动加载没有做它应该做的事情。

我尝试过的相关SO帖子无济于事：

*   [病原体不加载插件](https://stackoverflow.com/questions/3383502/pathogen-does-not-load-plugins)
*   [使用带有病原体的 .vim 插件](https://stackoverflow.com/questions/7278036/using-vim-plugins-with-pathogen)

更新：我也把我的 .vim 文件放在这里 - [https://github.com/prolificcoder/vim](https://github.com/prolificcoder/vim)。安装 ruby​​ doc 插件后，我运行了 rake。创建的文件很少，包括 ~/.vim/plugin/ruby-doc.vim。所以我回到 vim 并打开一个 rails 文件。当我在 ruby​​ 方法上按 RR 时，我看到屏幕闪烁，但没有打开浏览器。该插件的功能是在浏览器窗口中打开 ruby​​ 文档。

所以考虑一下 - 问题可能与我的 vim 配置有关，但与病原体无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:17:37.177

`pathogent#infect`是一个错误的名字：有一个不应该在那里的`t`就在前面。`#`

但是我看到您的问题有所不同：`~/.vim]$`表明您`source ~/.vimrc`在*zsh*时正在做。这是完全错误的，`~/.vimrc`是一个 vim 配置文件，你必须`source ~/.vimrc`在现有的*vim*会话中执行（在新的 vim 会话中不需要这样做：vim 源文件自动）。我仍然不明白为什么在我的系统 zsh 报告您应该使用`parse error near `\n'`的行上出现“找不到匹配项错误”。`call pathogen#infect()`

# entity-framework - EF5 迁移 - 删除约束时重复/重新定义的变量错误 | 使用 SQL GO 命令的问题

> ID：13589986
> 
> 赞同：17
> 
> 时间：2012-11-27T17:42:23.393
> 
> 标签：ef-migrations, entity-framework, tsql, entity-framework-5, entity-framework-migrations

## 背景：

我们有一个项目使用[ef-migrations](/questions/tagged/ef-migrations "显示标记为“ef-migrations”的问题")，其中包含在长期开发过程中创建的多个（读取约 60 个）迁移。当然，其中一些迁移还涉及：

*   删除约束^([1](http://entityframework.codeplex.com/workitem/317) , [2](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/ab58489e-d173-4b54-a3a8-281dca1fc614))
*   创建触发器

当我们奔跑时，一切都是独角兽和彩虹

```
Update-Database 
```

因为每个迁移都作为单独的批次运行。但是在`SQL Scripts`为这些迁移创建时使用

```
Update-Database -Script 
```

我们遇到了一些问题，如下所述：

## 问题1：

当跨多个迁移文件删除多个约束时，EF 生成的脚本倾向于重新声明它用于删除的变量。这是因为它确保了同一迁移文件中变量名称的唯一性，但在文件更改时，它会重置计数器，从而重叠名称。

## 问题2：

SQL 强制它`CREATE TRIGGER`始终是批处理中的第一条语句。生成脚本时，EF 不知道其中的内容，`Sql("CREATE TRIGGER ... ");`因此不会对其进行任何特殊处理。因此，该语句可能会出现在脚本文件的中间，并且会出错。

## 解决方案：（或者我们认为！）

这两个问题的常见/常识性解决方案是在正确的位置插入 Begin/End sql 批处理。手动执行此操作会使我成为一个非常富有的人，因此这不是一个有效的解决方案。

相反，我们使用了[@DavidSette 提供](https://stackoverflow.com/a/10931725/476786)的技术。创建一个新的`BatchSqlServerMigrationSqlGenerator`继承`SqlServerMigrationSqlGenerator`，有效地覆盖`dropColumnOperation`，`sqlOperation`然后`GO`围绕敏感的强制声明：

```
protected override void Generate (System.Data.Entity.Migrations.Model.DropColumnOperation dropColumnOperation)
{
    base.Generate(dropColumnOperation);
    Statement("GO");
} 
```

## 嘘嘘：

`Update-Database`此解决方案在没有标志的情况下中断运行，`-Script`并出现以下错误：

```
System.Data.SqlClient.SqlException (0x80131904): Could not find stored procedure 'GO'. 
```

这是由我们的自定义生成器添加的。现在我不确定为什么，但应该有一个很好的理由 EF 无法识别`GO`！

**更多信息：**

1.  [迁移：在删除两个约束的脚本中重复 @var0 变量](http://entityframework.codeplex.com/workitem/317)
2.  [变量名称“@number”已被声明](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/ab58489e-d173-4b54-a3a8-281dca1fc614)
3.  [如何覆盖 MigratorScriptingDecorator 生成的 SQL 脚本](https://stackoverflow.com/questions/10930259/how-can-i-override-sql-scripts-generated-by-migratorscriptingdecorator)
4.  [实体框架迁移：仅在 -Script 输出中包含 Go 语句](https://stackoverflow.com/questions/11548959/entity-framework-migrations-including-go-statement-only-in-script-output)

**完整错误：**

```
Applying code-based migration: 201205181406363_AddTriggerForOverlap.
GO
System.Data.SqlClient.SqlException (0x80131904): Could not find stored procedure 'GO'.
    at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
    at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
    at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
    at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
    at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout)
    at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite)
    at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
    at System.Data.Entity.Migrations.DbMigrator.ExecuteSql(DbTransaction transaction, MigrationStatement migrationStatement)
    at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.ExecuteSql(DbTransaction transaction, MigrationStatement migrationStatement)
    at System.Data.Entity.Migrations.DbMigrator.ExecuteStatements(IEnumerable`1 migrationStatements)
    at System.Data.Entity.Migrations.Infrastructure.MigratorBase.ExecuteStatements(IEnumerable`1 migrationStatements)
    at System.Data.Entity.Migrations.DbMigrator.ExecuteOperations(String migrationId, XDocument targetModel, IEnumerable`1 operations, Boolean downgrading, Boolean auto)
    at System.Data.Entity.Migrations.DbMigrator.ApplyMigration(DbMigration migration, DbMigration lastMigration)
    at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.ApplyMigration(DbMigration migration, DbMigration lastMigration)
    at System.Data.Entity.Migrations.DbMigrator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
    at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
    at System.Data.Entity.Migrations.DbMigrator.Update(String targetMigration)
    at System.Data.Entity.Migrations.Infrastructure.MigratorBase.Update(String targetMigration)
    at System.Data.Entity.Migrations.Design.ToolingFacade.UpdateRunner.RunCore()
    at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run()
ClientConnectionId:ac53af4b-1f9b-4849-a0da-9eb33b836caf
Could not find stored procedure 'GO'. 
```

**所以基本上修复脚本会破坏一个基本命令。请帮我决定哪一个是两害相权取其轻！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:59:32.640

我放了一个 Sql("--<GO>"); 在每次迁移结束时。这作为应用迁移运行正常，当我编写 SQL 脚本时，我只是在“--<GO>”上查找并替换为“GO”。有点手动，但对我有用。你可以把 Sql("--<GO>"); 围绕您的创建触发器语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:52:59.837

根据[msdn](http://msdn.microsoft.com/en-us/library/ms188037.aspx)

“GO 不是 Transact-SQL 语句；它是 sqlcmd 和 osql 实用程序以及 SQL Server Management Studio Code 编辑器识别的命令。”

由于您没有使用上述任何工具，而是使用 SqlCommand 类来执行您的 Sql 语句 Sql Server（而不是 EF - 请参阅异常起源的堆栈跟踪）正在阻塞它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T20:17:35.700

在我亲身经历了这个[问题](https://stackoverflow.com/questions/11548959/entity-framework-migrations-including-go-statement-only-in-script-output "实体框架迁移：仅在 -Script 输出中包含 Go 语句")之后..

我们决定创建更小的迁移。如果更改足够大以至于需要 GO 命令，那么开发人员试图在迁移中进行太多更改。不幸的是，控制迁移内容的唯一方法是注释掉更改。

我也思考过为什么我那么想要这个剧本。这不像我不相信 EF 能够正确执行迁移（前提是我先对其进行了测试）。理想情况下，我永远不会也（谢天谢地）还没有理由修改它。当我开始使用 EF Code First 时，我只看过几次。

我不喜欢这个答案，但我认为它除了调试 Entity Framework Code First 的迁移之外没有其他目的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-11T04:29:42.580

只需删除此行的所有重复项：

```
DECLARE @var0 nvarchar(128) 
```

只有第一个声明就足够了。您的脚本将顺利运行！:)

# ldap - WebSphere MQ 文件传输版和 LDAP 兼容性？

> ID：13589987
> 
> 赞同：2
> 
> 时间：2012-11-27T17:42:28.120
> 
> 标签：ldap, scheduling, ibm-mq, spring-integration, websphere-mq-fte

我对 WebSphere MQ/FTE 软件非常陌生，我正在尝试评估 FTE 软件以满足我们的文件传输需求。

我有以下要求。

1.  我们的接口需要一个调度工具。
2.  我们的接口主要包括文件传输。它们可以是事件驱动的（在某个位置存在文件），也可以安排它们以预定的时间间隔运行。
3.  某些用户可以根据他们的权限启动/停止文件传输。
4.  负责维护此类接口的用户需要通过 LDAP 进行身份验证。

根据我迄今为止能够阅读的文献，我得出以下结论。

1.  WebSphere FTE 可以处理基于事件的文件传输，但其调度能力相当有限。因此，需要为其余部分创建自定义调度程序。

2.  MQ ID-s 与 LDAP ID-s 不兼容。换言之，MQ 用户和组仅限于 MQ。为了将 LDAP 用作身份验证工具，您需要一个自定义解决方案，将组/单个 LDAP 用户映射到负责将消息写入代理命令队列的特定 MQ FTE 用户/组。

**我想知道上面的结论是否正确。**

我还有以下**无法找到答案的问题**：

1.  如果您在特定机器上安装 FTE 客户端，您可以在该机器上创建多少个代理？（我认为一篇文章暗示您可以实例化多个，但不清楚）

2.  是否可以从 Spring Integration 访问代理队列，特别是是否可以远程访问？

我确实尝试在我的开发人员笔记本电脑 (Windows) 上安装 WebSphere MQ 和 FTE，但是当 MQ 需要域用户时安装遇到了麻烦（*我的域 ID 不起作用，我猜是因为我已经在管理员组中在我的本地机器上*）。我需要将此作为一种可能的解决方案进行评估，而且时间对于提出原型所需的学习曲线来说太短了。

如果有人对此有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:18:24.863

多部分问题，所以让我尝试按顺序解决这些问题。

是的，您对代理调度功能中的功能是正确的，并且 MQ 不会针对外部 LDAP 提供程序进行身份验证或授权。FTE 中的日程安排由代理执行，不包括假期日程安排等内容。一些商店使用他们的企业调度系统，使用记录在案的 XML 模式将 FTE 作业直接提交到代理命令队列。

如果 WMQ UNIX/Linux 服务器使用 PAM，它可以使用 Active Directory 或 LDAP 作为其身份和组存储库，但即便如此，它也不会在没有通道安全出口的情况下执行密码验证。Windows QMgrs 本身使用 Active Directory 作为其身份和组存储库，但也不检查密码。

特定机器上的代理数量仅受内存和处理器等资源的限制。任何两个代理都不应具有相同的名称，即使跨不同的服务器也是如此。

如果“访问代理队列”是指将 XML 命令放在代理的命令队列中，那是肯定的。您不想从代理的队列中获取消息，也不想将消息放入命令队列以外的任何队列。在这些限制内，将命令放入代理队列是启动代理操作的规定方式。事实上，FTE 行命令就是这样工作的，*并且*他们使用用户的凭据远程访问队列管理器。任何被授权远程使用 FTE 命令的用户都可以使用相同的凭据和访问权限，使用 Spring、DataPower、调度程序等将 XML 消息放入命令队列。通常，使用相互验证的 SSL 通道，因此无头代理不需要提供密码。SSL 证书公用名映射到授权连接和访问代理的命令队列的本地用户 ID。

WMQ 和 FTE 都不需要域 ID 来执行安装或运行。但是，如果 WMQ 遇到无法在本地解析的 ID，Windows 会尝试在它所连接的任何域中解析该 ID。这意味着安装 WMQ 或运行 WMQ 的 ID 需要能够查询域中的 ID 和组。为 POC 设置 WMQ 的最简单方法是在不支持域的 VM 中。如果您必须使用连接域的 Windows 实例，请参阅[*Windows 安全性的特殊注意事项*](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/fa13360_.htm)。请注意，有一节描述了如何使用域 ID 来运行队列管理器，但这并不意味着您*必须*使用域 ID。

# python - Python：自动获取用户的国家？

> ID：13589993
> 
> 赞同：0
> 
> 时间：2012-11-27T17:42:42.087
> 
> 标签：python, geolocation

使用一些 API 可能有一种简单的方法可以做到这一点，但网络编程不是我的强项。 **如何在 Python 中找出用户所在的国家/地区？** 我需要使用与操作系统无关的解决方案，而且我宁愿只使用标准库。有什么我可以用 IP 地址做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:49:14.203

您可以为 Python 使用 geo-ip： [http](http://code.google.com/p/python-geoip/) ://code.google.com/p/python-geoip/ 它的默认免费数据库足以准确地获取用户所在的国家/地区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T02:44:55.673

[Joran Beasely](https://stackoverflow.com/users/541038/joran-beasley "乔兰·比斯利")[在这里](https://stackoverflow.com/questions/13589993/python-getting-the-users-country-automatically#comment18627121_13589993)给出了一个很好的答案，但由于它以评论而不是回复的形式出现，我无法将其标记为我接受的答案。不过，感谢您的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-15T16:56:16.577

如果您知道用户的公共 IP，那么您可以使用[freegeip](https://freegeoip.net/)来做到这一点。下面是获取位置和时区的 Python 3.4.2 代码。

```
>>> import requests
>>> ip = '141.70.111.66'
>>> url = 'http://freegeoip.net/json/'+ip
>>> r = requests.get(url)
>>> js = r.json()
>>> js['country_code']
'DE'
>>> js['country_name']
'Germany'
>>> js['time_zone']
'Europe/Berlin'
>>> js['city']
'Stuttgart'
>>> js.items()
dict_items([('latitude', 48.7667), ('ip', '141.70.111.66'), ('region_code', 'BW'), ('country_code', 'DE'), ('city', 'Stuttgart'), ('zip_code', '70173'), ('country_name', 'Germany'), ('longitude', 9.1833), ('region_name', 'Baden-Württemberg Region'), ('time_zone', 'Europe/Berlin'), ('metro_code', 0)]) 
```

# c# - 有人可以解释这种 RegEx 行为吗？

> ID：13589995
> 
> 赞同：1
> 
> 时间：2012-11-27T17:42:57.690
> 
> 标签：c#, .net, regex

使用 RegEx 时，我遇到了一种奇怪的行为。

```
dataString = "#Name #Location New York #Rating"
string[] rawValues = Regex.Split(dataString.Trim(), "(^|\\s)+#\\w+"); 
```

模式匹配：（`"#Name", " #Location", " #Rating"`这是我打算匹配的）。
拆分返回：`["", "", "", " ", "New York", " ", ""]`

问题#1：cunfusion 已经从这里开始了。为什么位置有空字符串`0,1,2`？两个用于匹配，一个是因为它位于字符串的第一个位置？

但这并不是奇怪的部分。

```
string[] rawValues = Regex.Split(dataString.Trim(), "(\\s|^)+#(\\w*[A-Za-z_]+\\w*)"); 
```

模式匹配：（`"#Name", " #Location", " #Rating"`与之前相同）。
但是拆分返回：`["", "", "Name", "", " ", "Location"," New York", " ", "Rating",""]`

问题 #2：导致完全相同匹配的模式会导致完全不同的拆分输出。这怎么可能？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:52:11.260

原因是来自[MSDN](http://msdn.microsoft.com/en-us/library/8yttk7sy.aspx)的这句话：

> 如果在 Regex.Split 表达式中使用捕获括号，则任何捕获的文本都将包含在结果字符串数组中。

`Split`如果您真的只想在匹配时拆分字符串，则不应使用捕获组。你可以避免捕获组，通过使用`(?:...)`代替`(...)`你拥有的每一个。

另外，正如您正确假设的那样。第一个和最后一个`""`源于字符串以匹配开始和结束的事实（因此这些匹配之前和之后的空字符串将在拆分中报告）。

这是一个更适合您目的的正则表达式：

```
@"(?:^|\s+)#\w*[A-Za-z_]+\w*" 
```

请注意，拥有`+`第一个子模式的外部也是不必要的，并且会导致尴尬的副作用。首先，它允许该组多次捕获（这就是为什么你有两个加法`""`，`""`：一个 for`^`和一个 for `\s`）。其次，在第一个空格字符匹配后不需要重复`^`，所以只重复空格字符就足够了。此外，根本不需要对单词进行分组`#`。

但是，如果您只想匹配`#name`位于字符串开头或前面有空格的内容（即**不是* 前面有 ** 非空格**字符），为什么要在匹配中包含可能的空格。消极的向后看给你一个很好的出路：

```
@"(?<!\S)#\w*[A-Za-z_]+\w*" 
```

这正是上面描述的。如果`(?<!\S)`没有剩余非空格字符，则匹配（如果有，则在匹配中不包括空格字符）。这涵盖了两种情况，无需交替，**您**不需要`Trim`键名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:03:14.463

因为您要拆分的正则表达式匹配 1 个或多个空格，后跟一个哈希 ('#')，后跟 1 个或多个单词字符。

任何匹配但未包含在结果中的内容。

有两种方法可以做到这一点：

1.  拆分不需要的内容并过滤结果。
2.  积极地只寻找想要的东西。

这是具有上述两个选项的一些代码：

```
static void Main( string[] args )
{
    string   sourceText = "#Name #Location New York #Rating" ;

    // option 1: split on whitespace and then toss whatever isn't wanted
    string[] hashTokens1 = sourceText.Split().Where( x => x.StartsWith("#") ).ToArray() ;

    // option 2: actively search for what is desired
    string[] hashTokens2 = ParseSourceData( sourceText ).ToArray() ;

    return ;

}

private static readonly Regex hashTokenPattern = new Regex( @"#\w+");
private static IEnumerable<string> ParseSourceData( string s )
{
    for ( Match m = hashTokenPattern.Match( s ) ; m.Success ; m = m.NextMatch() )
    {
        yield return m.Value ;
    }
} 
```

我自己，我会使用第二个选项，因为它更好地说明了你想要完成的事情。一个好的一般规则是更喜欢积极的断言或测试而不是消极的。

您还可以将第二个选项写为“单行”，因此：

```
// option 2: actively search for what is desired
Regex hashTokenPattern = new Regex( @"#\w+");
string[] hashTokens2 = hashTokenPattern.Matches(sourceText).Cast<Match>().Select(x=>x.Value).ToArray(); 
```

# perl - 使用 HTML::TreeBuilder 从 HTML 中提取文本

> ID：13589996
> 
> 赞同：0
> 
> 时间：2012-11-27T17:42:56.593
> 
> 标签：perl, html-parsing

您好，我正在使用[`HTML::TreeBuilder`](https://metacpan.org/module/HTML%3a%3aTreeBuilder)/[`HTML::Element`](https://metacpan.org/module/HTML%3a%3aElement)来清理一些由 Microsoft Word 等程序生成的不良 HTML。

鉴于示例中的错误 HTML 片段，我需要提取 和 之间的`mosh="start"`文本`mosh="stop"`。请注意，这是代码中其他地方设置的任意属性。

另请注意，这只是一个示例：唯一的保证是`div`mosh 开始和停止的位置。这些也可以是表格或`<p><b>`.

下面的代码实现了这一点，但每一行都被多次提取，因为每个孩子也有孩子。

`$MoshText`应该

```
Good Text can be pattern matched Wanted Text More Wanted TextYet More Wanted Text 
```

但是上桌后

`$MoshText`是

```
Good Text can be pattern matched Good Text can be pattern matched Good Text can be pattern matched Good Text can be pattern matched 
```

然后我需要拆分成两个字符串并删除原始文本所在的任何对象`$MoshText`。`m/matched/`

如何修改下面的代码来实现这一点？

```
#!/usr/bin/perl
use HTML::TreeBuilder;
use HTML::Element;

my $body =qq(
<body>
  <div mosh="start">Div where mosh set to start</div
  <div>
<table>
  <tr>
    <td></td><td</td>
    <th>Good Text can be pattern matched</th>
    <td></td><td</td>
  </tr> 
</table
</div>
<p>

   <p>
      <b>Wanted Text</b>
   <br>
      <p><b>More Wanted Text</b></p>
   <div>
      <p><b>Yet More Wanted Text</b></p>
   </div>
  </p>
<div mosh="stop">Div where mosh set to stop bellow here is not needed</div>
);

my ($MoshText, $Flag);

my @kids = $body->content_list();
while (@kids) {
    my $child = shift @kids;
    if (ref $child) {
        my $Mosh = child->attr("mosh");
        if ($Mosh eq "start") {
            $Flag = 1;
        }
        if ($Mosh eq "stop") {
            $Flag = 0;
            last;
        }
        if ($Flag == 1) {
            my $T = $child->as_trimmed_text;
            $MoshText = $MoshText . " " . $T;
        }
        unshift @kids, $child->content_list;
    }
}
print $MoshText . "\n"; 
```

**编辑**

澄清我的意思是 *删除原始文本所在的任何对象*

包含“Good Text can be pattern matching”的表格不应该在表格中，而应该在 div 中

我很有趣是一个对象，所以我会用一个新的 div 对象替换这个对象，比如

```
my $new = HTML::Element->new('tag','div');
$new->attr('class', 'MyClass');
$new->push_content('Good Text can be pattern matched'); 
```

但是我现在如何找到表删除并插入 $new

**清洁输出**

```
 <div>
      Div where mosh set to start
    </div> 
    <div class ='MyClass'>
      Good Text can be pattern matched
    </div>
    <div class ='AnotherClass' >
      Wanted Text More Wanted Text Yet More Wanted Text
    </div>
    <div mosh="stop">Div where mosh set to stop bellow here is not needed</div> 
```

希望这更有意义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:36:17.003

我想你明白为什么你的代码不工作了。您正在打印 HTML 中所有元素的文本值，并且因为一个元素的文本值包括其*所有*后代的文本节点，所以多段文本出现了不止一次。

您需要递归处理 HTML 树，检查`mosh`每个元素的属性值并相应地保留一个标志（就像您已经做的那样），并且只有在设置了标志时才在遇到它们时打印文本节点。

这个程序演示。我已经展示了在 上拆分字符串`matched`，但我不清楚*删除原始文本所在的任何对象是*什么意思。

```
use strict;
use warnings;

use HTML::TreeBuilder;
use HTML::Element;

my $tree = HTML::TreeBuilder->new->parse_file(*DATA);

my $wanted;
my @mosh_text;
my @nodes = ($tree);

while (@nodes) {

  my $node = shift @nodes;

  if (not ref $node) {
    push @mosh_text, $node if $wanted;
  }
  else {

    my $mosh = lc($node->attr('mosh') // '');
    if ( $mosh eq 'start' or $mosh eq 'stop' ) {
      $wanted = $mosh eq 'start';
    }

    unshift @nodes, $node->content_list;
  }
}

my $mosh_text = "@mosh_text";
print "$_\n" for split/\s*matched\s*/, $mosh_text;

__DATA__
<body>
  <div mosh="start">Div where mosh set to start</div
  <div>
<table>
  <tr>
    <td></td><td</td>
    <th>Good Text can be pattern matched</th>
    <td></td><td</td>
  </tr> 
</table
</div>
<p>

   <p>
      <b>Wanted Text</b>
   <br>
      <p><b>More Wanted Text</b></p>
   <div>
      <p><b>Yet More Wanted Text</b></p>
   </div>
  </p>
<div mosh="stop">Div where mosh set to stop bellow here is not needed</div> 
```

**输出**

```
Div where mosh set to start Good Text can be pattern
Wanted Text More Wanted Text Yet More Wanted Text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T22:17:57.603

使用 HTML::TreeBuilder 解析 HTML 页面，然后使用 HTML::Element 的 look_down()/look_up()/right()/left() 方法来查找您的 mosh 属性边界。

给定您的边界，您可以使用 look_up/look_down 方法（在边界元素上，而不是树根上）来查找包含要更改的文本的元素。更改元素中的文本，然后您可以使用树根或任何其他元素中的 as_HTML 方法生成 HTML。

所以在伪代码中：

```
$tree = HTML::TreeBuilder->parse($something)
$mstart = $tree->look_down(
                            _tag => "div",
                            class  => "mosh_start"
                           )
###
# 1\. now use HTML::Element traversal methods to find the element that contains the text to match

# 2\. use the content manipulation methods to change the content

# 3\. rewrite the file
$tree->as_HTML(). 
```

另请参阅[HTML::Element](https://metacpan.org/module/HTML%3a%3aElement)，它与[HTML::TreeBuilder](https://metacpan.org/module/HTML%3a%3aTreeBuilder)一起是CPAN 上[HTML::Tree版本的一部分。](https://metacpan.org/release/HTML-Tree)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T11:33:59.243

```
use HTML::TreeBuilder;
my $t = HTML::TreeBuilder->new->parse_file("China.data");

sub list
 {my ($t, $d) = @_;
  $d //= 0;
  if (ref($t))
   {say "  "x$d, $t->tag;
    for($t->content_list)
    {list($_, $d+1);
    }
  }
 else {say "  "x$d, dump($t)}
} 
```

列表（$t）；

# java - 使用java中的一组规则修改消息

> ID：13589998
> 
> 赞同：2
> 
> 时间：2012-11-27T17:42:59.327
> 
> 标签：java

例如，我有一条消息`KU7`。另外，我有一套规则，如下所示：

```
Q K S 7 J ... U 
R Y L B 8 ... W 
```

等等。我需要使用此规则翻译消息。有~20个。翻译的消息将是`YWB`。

**我试过的：**

要创建一个带有`char`as 和参数的方法，方法有很多`case blocks`（所有规则）并返回 translate `char`。然后使用`for loop`我遍历消息并逐个符号翻译。但我认为这不是一个好的解决方案。

任何人都可以向我提供其他想法/解决方案/类似问题的链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:44:06.187

您可以`HashMap`用于存储密钥和相应的条目。

```
HashMap<String,String> map = HashMap<String,String>();
map.put("Q","R");
...

String input  = "KU7";
String result = "";

for(char c : input.toCharArray())
    result += map.get(c+""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:44:43.027

> 但我认为这不是一个好的解决方案。

是的，这不是一个好主意`20 different`。

> 任何人都可以向我提供其他想法/解决方案/类似问题的链接吗？

满足您要求的理想解决方案是创建一个`HashMap<String, String>`包含所有规则的 . 并用它来转换你的字符串。

因此，您的 Map 将包含如下形式的映射`key-value`：-

```
{"Q":"R", "K":"Y", ...} 
```

要获得特定键的值，您可以使用：-

```
map.get("Q"); 
```