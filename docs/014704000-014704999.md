# StackOverflow 问答 14704000-14704999

# javascript - $.text(["someText"]) - 这是什么意思？

> ID：14704000
> 
> 赞同：6
> 
> 时间：2013-02-05T09:24:21.293
> 
> 标签：javascript, jquery

我最近遇到了一个我必须使用的代码示例，并且我能够使用它，但我不太明白到底发生了什么。

以下是部分代码：

```
.sortElements(function(a, b){
    return $.text([a]) > $.text([b]) ? 
        inverse ? -1 : 1 
        : inverse ? 1 : -1;
} 
```

我知道这个函数正在决定应该首先从`a`and中排序哪个元素`b`，并且我知道 inverse 正在决定排序顺序，但我不知道`$.text([a])`在做什么。它是否解析`a`为类似于`parseInt(a)`and的文本`Date.parse(a)`？

谷歌帮不了我。我也查看了该`jQuery`网站，我发现的只是

`$(selector).text()`,`$(selector).text(newText)`函数。

这是我基于[http://jsfiddle.net/gFzCk/的代码的小提琴](http://jsfiddle.net/gFzCk/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T09:33:48.777

`jQuery.text`为该方法的[实现](https://github.com/jquery/jquery/blob/master/src/manipulation.js#L32-L38)做了繁重的工作`.text()`——它似乎是一个未记录的函数，具有 的核心功能`.text()`，但缺少一些 jQuery 润色。

它是[从 Sizzle “导入”的](https://github.com/jquery/jquery/blob/master/src/sizzle-jquery.js#L7)，它显示为`Sizzle.getText`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-05T09:36:18.623

检查[jQuery 源代码](http://code.jquery.com/jquery-1.9.1.js)会发现`$(selector).text()`您熟悉的在`$.text`内部使用：

```
jQuery.fn.extend({
    text: function( value ) {
        return jQuery.access( this, function( value ) {
            return value === undefined ?
                jQuery.text( this ) :
                this.empty().append( ( this[0] && this[0].ownerDocument || document ).createTextNode( value ) );
        }, null, value, arguments.length );
    }, 
```

这是一个未记录的函数（这意味着进一步的 jQuery 修订可能会随意删除它，而不通知您）。你会发现它的定义是这样的：

```
jQuery.text = Sizzle.getText; 
```

`Sizzle.getText`，反过来，被记录为“用于检索 DOM 节点数组的文本值的实用程序函数”。鉴于这`Sizzle.getText`是一个记录在案的功能，我建议使用它而不是 jQuery 速记，因为我不希望 jQuery 很快放弃 Sizzle。

那么，这个函数就是产生 DOM 节点文本内容的一段代码。您的排序方法是按其文本内容的字母顺序对 DOM 节点进行排序。我不知道为什么作者决定获取仅包含一个元素的数组的文本（`[a]`），而不是立即传递元素（`a`），这同样可以。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T09:39:44.067

在查看您的 jsfiddle 之后，它似乎是一个从元素中获取文本的函数，类似于 .text()

`console.log(a)`登录`<td>28/02/2013</td>`

尽管

`console.log($.text[a])`登录`28/02/2013`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T09:34:43.453

如果上面的代码做了一些有用的事情（= 根据 jQuery 文档没有任何指示），那么它可能会`.text()`调用`a`and `b`。

我想知道为什么作者不使用`$(a).text()`，因为*应该*这样做。也许无论是否`a`是 jquery 包装节点，代码也可以工作：-/

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T09:41:48.613

首先是括号。if`a`是一个元素，`[a]`是一个元素数组，因此对的调用`$.text(...)`将数组作为参数传递。

我找不到任何有关`jQuery.text`但仅适用于[`jQuery.fn.text`](http://api.jquery.com/text/). 但是，您可以看到将[`jQuery.text`](http://james.padolsey.com/jquery/#v=1.7.2&fn=jQuery.text)数组作为参数和标量值处理的实现。

在这种情况下，`$.text([a])`可能与`$.text(a)`.

# java - 谷歌方向 api 无法正常工作

> ID：14704010
> 
> 赞同：0
> 
> 时间：2013-02-05T09:24:54.260
> 
> 标签：java, google-maps

我正在开发一个使用文本搜索和方向 api 的 java 程序，但在某些情况下，api 无法正常工作。

例如：我必须搜索附近的“餐厅” `Hyundai Car Center,Sector 63, Noida`。

为此，我使用了文本搜索 api 来获取所需餐厅的格式化地址。现在当我使用direction api计算位置之间的最短时间和距离时，我没有找到任何结果。

```
String addressFrom = "Mother Dairy, Bhim Nagri, Hauz Khas, New Delhi, India";
String addressTo = "Hyundai Car Center,Sector 63,Noida";
String urlString = "http://maps.googleapis.com/maps/api/directions/xml?sensor=true&origin="
                + addressFrom + "&destination=" + addressTo;
System.out.println(urlString); 
```

我得到以下输出：

```
http://maps.googleapis.com/maps/api/directions/xml?sensor=true&origin=Mother+Dairy%2C+Bhim+Nagri%2C+Hauz+Khas%2C+New+Delhi%2C+India&destination=Hyundai+Car+Center%2CSector+63%2CNoida
<?xml version="1.0" encoding="UTF-8"?>
<DirectionsResponse>
 <status>NOT_FOUND</status>
</DirectionsResponse> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:16:59.583

问题是找不到“Mother Dairy, Bhim Nagri, Hauz Khas, New Delhi, India”。[您可以通过在Google Geocoder Sample page](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple)中输入端点（一次一个）来测试是否可以找到端点。

*但是，可以*找到“Bhim Nagri, Hauz Khas, New Delhi, India” ，并且与地图上标有“Mother Dairy”的位置相当接近。

# asp.net-mvc-3 - asp.net 中 griffin.mvccontrib 包的服务器错误

> ID：14704014
> 
> 赞同：2
> 
> 时间：2013-02-05T09:25:17.913
> 
> 标签：asp.net-mvc-3, griffin.mvccontrib

为了能够用资源文件翻译我的模型中的数据注释，我看到很多人推荐[jgauffin](https://stackoverflow.com/users/70386/jgauffin)提供的解决方案。

但是，当我按照[本地化教程](http://www.codeproject.com/Articles/352583/Localization-in-ASP-NET-MVC-with-Griffin-MvcContri)进行操作时，我的项目无法启动。

有问题的代码是这个，它应该放在`Global.asax.cs`文件中：

```
ModelValidatorProviders.Providers.Add(
  new LocalizedModelValidatorProvider(stringProvider)
); 
```

它说`LocalizedModelValidatorProvider`构造函数不接受任何参数，其他教程也显示了这一点。

但是当我像这样改变这一行时：

```
ModelValidatorProviders.Providers.Add(
  new LocalizedModelValidatorProvider()
); 
```

我在浏览器中收到以下错误：

> 试图以与数组不兼容的类型访问元素。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.ArrayTypeMismatchException：尝试将元素作为与数组不兼容的类型进行访问。

这些`griffin.mvccontrib`包是在 Visual Studio 2012 下与 NuGet 一起安装的。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T14:07:09.420

您可能会发现 [此链接](http://ahmadflex.blogspot.com/2014/01/mvc-simple-example-for-localization.html)有帮助

这是我在上面的链接中进行注册的方式：

```
ResourceStringProvider myResouceFile = new ResourceStringProvider(ModelsResources.ResourceManager);
//ModelsResources is my resource file generated class
GriffinStringsProvider griffinStringsProvider = new GriffinStringsProvider(myResouceFile);
ValidationMessageProviders.Clear();
ValidationMessageProviders.Add(griffinStringsProvider);

ModelMetadataProviders.Current = new LocalizedModelMetadataProvider(myResouceFile);
ModelValidatorProviders.Providers.Clear();
ModelValidatorProviders.Providers.Add(new LocalizedModelValidatorProvider()); 
```

确保您包含正确的程序集

```
using System.Resources;
using Griffin.MvcContrib.Localization;
using Griffin.MvcContrib.Localization.ValidationMessages; 
```

也是您的资源文件的程序集。

# c# - 如何从 c# 调用 c 非托管 dll 中的类 ref 对象

> ID：14704016
> 
> 赞同：0
> 
> 时间：2013-02-05T09:25:21.703
> 
> 标签：c#, c++, visual-c++, unmanaged

我正在尝试调用 c++ 未管理的 dll ref。来自 c# 应用程序的类对象。DLL 函数调用使用 VC++。

我的 VC++ 代码如下

```
class  METHOD_TYPE CDeskApi
{
public:
    CDeskApi(void);

        /*
    Description : Initiates a connection to NEST system
    Parameters  : 1\. serialkey provided to implement the api
                  2\. object of CDeskApiCallback implemented

    Return      : 0 in case of success and -1 in case of error  
        */  
    int Initialise(char *serialkey, CDeskApiCallback* callback);
        /*
        Description : Request data from the server
        Parameters  : 1\. symbol of interest
                      2\. intervals of 1 min, multiples of 1 min, DAILY_PERIOD in case of daily.
                      3\. data to be retrieved from. in no of seconds since epoch
                      4\. identifier, which is returned in the callback          
        Return      : 0 in case of success and -1 in case of error  
        */      

    ~CDeskApi(void);
};

class METHOD_TYPE CDeskApiCallback    
{
public:    
};

class Myhandler : public CDeskApiCallback    
{    
public:

    virtual int quote_notify( const char* symbol, int size, Quotation *pQuotes, unsigned long echo)
    {
        return 0;    
    };    
};

Myhandler handler;

void Cnest_desk_appDlg::OnBnClickedOk()    
{    
    if(odesk.Initialise("VWAP", &handler))    
    {    
        AfxMessageBox("Error!");

        return;//error
    }    
} 
```

我的C#代码如下

```
[DllImport("DeskApi.dll", EntryPoint = "?Initialise@CDeskApi@@QAEHPADPAVCDeskApiCallback@@@Z")]
static extern void DeskApiInitialize(IntPtr symbol, callback fn);

private delegate int callback(IntPtr symbol, int nMaxSize, ref Quotation pQuotes, ulong echo);

private callback mInstance;

private void btnFetch_Click(object sender, EventArgs e)
{
    IntPtr ptrCString = (IntPtr)Marshal.StringToHGlobalAnsi(txtFetch.Text);

    CallTest.DeskApiGetQuote(ptrCString,quote_notify);

    Marshal.FreeHGlobal(ptrCString);    
}

private int quote_notify(IntPtr symbol, int nMaxSize, ref Quotation pQuotes, ulong echo)
{
    return 0;    
} 
```

在 C# 中一切正常，但它不调用**quote_notify**函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:11:30.080

这是完整的代码吗？我对此表示怀疑，因为您甚至在 CDeskApiCallback 中没有任何方法（这可能是一些用于回调的类接口类）。无论哪种方式，C++“回调”对象与 .NET 委托非常不同，这就是您尝试使用它的方式。

另一个主要缺陷是您试图通过 dll 导入 C++ 方法 (CDeskApi::Initialise)。那部分可以正常工作，但是您将如何实例化 C++ 类以便可以在其上调用 Initialise？

我相信您可以通过某种方式开始使用 P/Invoke，但为此目的，COM 或 C++/CLI 会更好。任何 COM 或 C++/CLI 类和接口都将对 C# 直接可见，而无需在 C# 代码中编写奇怪的编组指令。

# javascript - for循环中的Javascript数组返回未定义

> ID：14704020
> 
> 赞同：-1
> 
> 时间：2013-02-05T09:25:34.763
> 
> 标签：javascript, jquery

当我用 for 循环循环这个数组时，它以某种方式给了我 undefined in

```
updateField(this.value, vehicles[i]+"_brand" 
```

尽管

```
$("#"+vehicles[i]+"_year").change(function(){ 
```

确实获得了数组的正确值。这怎么可能，我该如何解决？

```
var vehicles = new Array();
    vehicles[0] = "auto";
    vehicles[1] = "truck";
    vehicles[2] = "motor";

for(var i = 0;i < vehicles.length;i++){
    $("#"+vehicles[i]+"_year").change(function(){
       updateField(this.value, vehicles[i]+"_brand", 1, 2, this.parentNode.id), resetBelow(0,'auto'), show('auto_brand');
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:27:54.797

将再次评估将触发更改事件的时间`vehicles[i]`，您将获得最后一个值`i`.

改变

```
vehicles[i]+"_brand" 
```

至

```
this.id.split('_')[0]+"_brand" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:29:54.383

看起来你在我应该分号的地方有逗号：

```
updateField(this.value, vehicles[i]+"_brand", 1, 2, this.parentNode.id); resetBelow(0,'auto'); show('auto_brand'); 
```

...或者您的`updateField()`函数可能有更多参数，而您只是过早地关闭了该函数？

# php - 将 phpUri 调用转换为 CI 库调用

> ID：14704023
> 
> 赞同：1
> 
> 时间：2013-02-05T09:25:43.510
> 
> 标签：php, codeigniter, hyperlink, singleton-methods

本机 PHP 中的代码：

```
$href = phpUri::parse($target_url)->join($href); 
```

我在 CI 中尝试的代码不起作用：

```
$CI->load->library('Phpuri', array($target_url));
$href = $CI->phpuri->parse($target_url);
$href = $CI->phpuri->join($href); 
```

[您可以在此处](https://github.com/monkeysuffrage/phpuri)查看 phpUri 本机库。我刚刚更改了类名 rest is same 的情况，使其在 CI 中工作。我在另一个库中使用它，所以使用 CI 实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:36:28.700

CodeIgniter 的模式是单例。phpUri 使用静态调用。我建议您熟悉它们之间的巨大差异。

这里的重点是`phpUri`使用从类请求的静态调用`parse`，而不是对象本身，因为 CodeIgniter 是一个单例，它是一个带有子对象的对象（为了简单起见，请阅读更多信息）。话虽如此，这不起作用的原因是它`phpUri`的行为不像一个对象，并且只在静态调用之后产生（返回）对象：

```
$href = phpUri::parse($target_url)->join($href); 
```

可以简化为：

```
$parsed = phpUri::parse($target_url);
$href = $parsed->join($href); 
```

第一行是静态调用，它将一个对象返回给`$parsed`变量，然后你可以使用它。

在单例中，您不能通过将类定义为对象属性来创建“类父级”。这就是为什么要使用这个库，你应该首先重写所有的静态调用。

But it is much easier to write an abstraction layer library in CodeIgniter that uses static calls in it's object's non-static methods:

```
class MyPhpUri {
    function parse($target_url) {
        return phpUri::parse($target_url);        
    }
} 
```

Then in your library

```
$CI =& get_instance();
$CI->load->library('MyPhpUri');
$href = $CI->myphpuri->parse($target_url)->join($var); 
```

That is what an abstract class is - the one that gives you an interface.

# macos - NSOutlineView: 'outlineView: heightOfRowByItem:' vs. 动画行高

> ID：14704030
> 
> 赞同：0
> 
> 时间：2013-02-05T09:26:04.527
> 
> 标签：macos, cocoa, animation, nsoutlineview

我有`NSOutlineView`几行变量（在运行时）高度。`outlineView: heightOfRowByItem:`使用委托中的方法立即更改高度很简单。但我想在展开/折叠动画期间为行高设置动画。

这该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:38:25.567

在您的`NSOutlineView`通话[中 noteHeightOfRowsWithIndexesChanged:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSTableView_Class/Reference/Reference.html#//apple_ref/doc/uid/20000118-SW130)像：

```
// index set with all rows that did change height
NSIndexSet *rows = [NSIndexSet indexSetWithIndex:1];
[self.outlineView noteHeightOfRowsWithIndexesChanged:rows]; 
```

这会将行设置为`outlineView:heightOfRowByItem:`委托方法返回的新高度。

从文档中：

> 对于基于视图的表，此方法将设置动画。
> [...]
> 对于基于单元格的表格，此方法通常不会设置动画。但是，如果您在 beginUpdates/endUpdates 块中调用它，它将动画化。

# excel - 粘贴有时会抛出错误： Range 类的 Pastespecial 方法失败

> ID：14704036
> 
> 赞同：0
> 
> 时间：2013-02-05T09:26:24.190
> 
> 标签：excel, vba, paste

我正在尝试将手动复制的工作表粘贴到名为“数字 - 输入”的工作表中。

我有时会收到错误

> Range 类的 Pastespecial 方法失败

这是我的粘贴声明：

```
 Worksheets("Digital - Input").range("A1").PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False 
```

这是我的完整代码：

```
Sub pasteDigitalInput()

    Application.ScreenUpdating = False

    'open the source sheet
    Call unlockAll

    'show the input sheet
    Call showerfunc("Digital - Input")

    'paste values
    'On Error GoTo feilmeld
    Worksheets("Digital - Input").range("A1").PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False

    'Update cell references
    Call getTotals

    'Set the start of ukestrykk for digital
    showerfunc ("Kilder")
    Sheets("Kilder").Select
    range("J2").Select
    Call findAnd("Netto spend pr uke:", "Kilder", "Digital - Input", 2, 0, , , True)
    hiderfunc ("Kilder")

    'Hide sheet
    Call hiderfunc("Digital - Input")
    Sheets("Digital").Select
    Application.ScreenUpdating = True

    'locks the sheet again
    Call lockAll

    Exit Sub

feilmeld:
    'hiderfunc ("Digital - Input")
    Sheets("Digital").Select
    Call lockAll
    Application.ScreenUpdating = True

    MsgBox ("Du må kopiere planen fra excel utskriften til Adform før du bruker denne knappen. OBS! kopier planen på nytt og lås opp Digital arket før du prøver igjen.")

End Sub 
```

**编辑：** 打开两个工作簿后似乎可以正常工作。但是，如果我使用任何其他宏，尤其是清理输入表的宏，我会收到错误消息。

清理输入表宏：

```
Sub clearInputDigital()

Call ClearInput("Digital - Input", "Digital")

End Sub

Sub ClearInput(inputsheet As String, sourceSheet As String)

Application.ScreenUpdating = False

'Show the sheet
showerfunc (inputsheet)

Sheets(inputsheet).Select

Cells.Select
Selection.ClearContents

'Hide the sheet
hiderfunc (inputsheet)

Sheets(sourceSheet).Select

Application.ScreenUpdating = True

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:11:59.367

（显然我不确定你打电话的`sub`s 和`function`s 发生了什么）

我并不总是相信 excel VBA 编译器会引用我正在对其进行编码以引用的对象，因此我总是尝试完全限定我的代码，如下所示

```
Sub pasteDigitalInput()

    Excel.Application.ScreenUpdating = False

    'open the source sheet
    Call unlockAll

    'show the input sheet
    Call showerfunc("Digital - Input")

    'paste values
    'On Error GoTo feilmeld
    Excel.ThisWorkbook.Worksheets("Digital - Input").Range("A1").PasteSpecial Paste:=Excel.xlPasteValues, Operation:=xlNone, SkipBlanks:=False, Transpose:=False

    'Update cell references
    Call getTotals

    'Set the start of ukestrykk for digital
    showerfunc ("Kilder")
    With Excel.ThisWorkbook.Sheets("Kilder")
        .Activate
        .Range("J2").Select
    End With
    Call findAnd("Netto spend pr uke:", "Kilder", "Digital - Input", 2, 0, , , True)
    hiderfunc ("Kilder")

    'Hide sheet
    Call hiderfunc("Digital - Input")
    Excel.ThisWorkbook.Sheets("Digital").Activate
    Excel.Application.ScreenUpdating = True

    'locks the sheet again
    Call lockAll

    Exit Sub

feilmeld:
    'hiderfunc ("Digital - Input")
    Excel.ThisWorkbook.Sheets("Digital").Activate
    Call lockAll
    Excel.Application.ScreenUpdating = True

    MsgBox ("Du må kopiere planen fra excel utskriften til Adform før du bruker denne knappen. OBS! kopier planen på nytt og lås opp Digital arket før du prøver igjen.")

End Sub 
```

如果您只是移动值，也许您可​​以尝试避免完全使用剪贴板，其结构更像这样：

```
Sub WithoutPastespecial()

'WORKING EAXAMPLE

Dim firstRange As Excel.Range
Dim secondRange As Excel.Range

Set firstRange = Excel.ThisWorkbook.Worksheets("Cut Sheet").Range("S4:S2000")
With Excel.ThisWorkbook.Worksheets("Cutsheets")
    Set secondRange = .Range("A" & .Rows.Count).End(Excel.xlUp).Offset(1)
End With

With firstRange
      Set secondRange = secondRange.Resize(.Rows.Count, .Columns.Count)
End With
secondRange.Value = firstRange.Value

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:49:28.350

通常，当当前打开的窗口（工作表）与您粘贴内容的窗口不同时，会出现此错误。Excel对此非常严格。当您手动执行此操作时，在粘贴之前明显选择了工作表，因此您永远不会看到错误。

因此，在粘贴到工作表“数字 - 输入”之前，只需在其上方插入一行以选择要粘贴的工作表，然后粘贴。另外，如果您要处理多个文件，我建议您使用“Thisworkbook”，这样...您知道...excel 不会混淆您指的是哪个工作簿。所以你的代码是

```
Thisworkbook.Worksheets("Digital - Input").Select
Worksheets("Digital - Input").range("A1").PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
:=False, Transpose:=False 
```

希望这可以帮助。

# r - R：生成没有重复元素的向量的所有排列

> ID：14704039
> 
> 赞同：17
> 
> 时间：2013-02-05T09:26:33.857
> 
> 标签：r

是否有一种直接的方法来生成专门排除重复元素的整数向量（1 到最大 999）的所有可能排列？

例如，对于具有 1 到 9 范围内的三个元素的向量，该序列`1 2 3`是可以接受的，`1 2 9`但`1 2 2`会是无效的。序列必须包含准确的`n`元素（在本例中为三个）。编辑：为避免混淆，订单很重要，因此`1 2 9`并且`9 2 1`都是有效的和必需的。

关于在 SO 上使用 R 的排列和组合有很多问题（例如[this](https://stackoverflow.com/questions/9422945/generate-all-possible-permutations)和[this](https://stackoverflow.com/questions/12084947/how-to-generate-all-combinations-of-a-vector)），但似乎没有一个适合这种特殊情况。我希望有一个不起眼的基本 R 或包函数可以处理它，而无需我自己编写一个不优雅的函数。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-05T09:29:34.033

使用`gtools`包：

```
require(gtools)
permutations(n = 9, r = 3, v = 1:9)
# n -> size of source vector
# r -> size of target vector
# v -> source vector, defaults to 1:n
# repeats.allowed = FALSE (default) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-05T13:14:58.757

`utils::combn` ; `combinat::combn`或者`combinat::permn` 是替代品。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-05T09:33:25.703

**编辑：这不是 OP 要求的，但我留下了这个答案，以避免混淆。**

我的数学有点生疏，但我认为您描述的是组合，而不是排列。基函数`combn()`返回组合。

我用一个可管理的集合来说明 - 所有长度为 3 的组合，来自向量`1:4`：

```
combn(4, 3)
     [,1] [,2] [,3] [,4]
[1,]    1    1    1    2
[2,]    2    2    3    3
[3,]    3    4    4    4 
```

* * *

`combinations`和之间的区别在于`permutations`顺序`combinations`无关紧要。所以`(2, 3, 4)`和`(4, 3, 2)`是相同的组合，但排列不同。

# verilog - 可以在 Systemverilog 中的输入端口上强制值吗？

> ID：14704043
> 
> 赞同：-1
> 
> 时间：2013-02-05T09:26:36.390
> 
> 标签：verilog, system-verilog

我有这个 SV 代码：

```
module m1 (input int a);
    always begin #1; force a=a+1; end
endmodule

module m ();
    int a;  
    m1 m1(a);
endmodule 
```

上面代码中的这条语句有效`force a=a+1;`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:10:29.077

它可能在您的模拟器中工作，但不建议这样做。

在 IEEE 标准 1800-2009 第 10.6 节中，将强制语句定义为“程序连续分配”。LRM 中有一个示例说明，如果等式右侧的值发生变化，则它将强制将新值传递给右侧变量。在这种情况下`a=a+1`，技术上应该会导致无限循环，但可能不会因为调度规则。

通常`force`应谨慎使用，并用于测试台和行为建模。函数表达式可以强制使用，但需要避免循环依赖。最好分配一个常量表达式`force`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:12:39.863

是的，我相信在这种情况下，行为是明确定义的。模块 m1 将看到强制值，但封闭模块不会。

# android - 我如何在android中标准化图像？

> ID：14704044
> 
> 赞同：0
> 
> 时间：2013-02-05T09:26:42.130
> 
> 标签：android, image, image-processing

我正在研究基于相机的应用程序。我想标准化设备相机捕获的图像。是否可以在android中标准化图像？知道我该怎么做吗？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-10T08:50:51.243

尝试使用[Catalano 框架](https://code.google.com/archive/p/catalano-framework/)。这里包含您可以学习如何使用的[文章。](https://www.codeproject.com/articles/656059/catalano-framework)

我使用这种方法实现了图像标准化。

```
FastBitmap fb = new FastBitmap("image.jpg");
fb.toGrayscale();

ImageNormalization in = new ImageNormalization();
in.applyInPlace(fb); 
```

# php - 使用 php、mysql 和 flash 跟踪信息

> ID：14704049
> 
> 赞同：0
> 
> 时间：2013-02-05T09:26:51.280
> 
> 标签：php, mysql, actionscript

因为我对使用 php mysql 从 flash 文件的不同部分跟踪信息的要求很小。意味着在 Flash 游戏中，我将在游戏中包含预加载器部分、更多游戏按钮和徽标。因为我想跟踪使用 php mysql 从这些地方获得的点击次数。任何人都可以给我任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:58:59.990

使用 ActionScript 的[URLRequest](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/net/URLRequest.html) / [URLLoader](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/net/URLLoader.html)类向您的网站发送请求。使用 PHP 解析请求，提取[GET](http://www.php.net/manual/en/reserved.variables.get.php)或[POST](http://www.php.net/manual/en/reserved.variables.post.php)变量[并将它们插入](http://www.php.net/manual/en/mysqli.query.php)到您的数据库中。

# iphone - 从 iOS 应用发布时出现 Facebook SDK 3.1 错误

> ID：14704050
> 
> 赞同：2
> 
> 时间：2013-02-05T09:27:03.680
> 
> 标签：iphone, ios, facebook, facebook-graph-api, nsuserdefaults

我的 iOS 应用程序面临以下问题：

1.  在发布到用户朋友的墙上时，使用 iOS 应用程序我收到错误“ `com.facebook.sdk error 5`”。

2.  每次我检查“ `FBSession.activeSession.isOpen`”时，该应用程序都会要求登录。

之前一切正常。但是由于我已经更改了我的应用程序 ID（因为现在我必须使用不同的 Facebook 应用程序）。我得到了错误。

我对此进行了一些研究并找到[了一些解决方案](http://www.abdus.me/ios-programming-tips/com-facebook-sdk-error-5-irritating-isnt-it/)。我都试过了，但没有任何效果。

我编写了以下代码来登录 Facebook：

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
comingfromFB = YES;
NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"friends_birthday",
                        nil];

return [FBSession openActiveSessionWithReadPermissions:permissions
                                               allowLoginUI:allowLoginUI
                                          completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                              [self sessionStateChanged:session state:state error:error];
                                          }];
} 
```

以及以下用于发布故事的代码：

```
if ([FBSession.activeSession.permissions
         indexOfObject:@"publish_actions"] == NSNotFound) {
        // No permissions found in session, ask for it
        [FBSession.activeSession
         reauthorizeWithPublishPermissions:
         [NSArray arrayWithObject:@"publish_actions"]
         defaultAudience:FBSessionDefaultAudienceFriends
         completionHandler:^(FBSession *session, NSError *error) {
             if (!error) {
                 // If permissions granted, publish the story
                 [self publishStory];
             }
         }];
    } else {
        // If permissions present, publish the story
        [self publishStory];
} 
```

当我运行应用程序时，我收到以下错误：

```
Error: HTTP status code: 403

2013-02-05 14:36:47.109 <appname>[1705:c07] Error Domain=com.facebook.sdk Code=5 "The operation couldn’t be completed. (com.facebook.sdk error 5.)" UserInfo=0xaa9af20 {com.facebook.sdk:ParsedJSONResponseKey={
    body =     {
        error =         {
            code = 200;
            message = "(#200) The user hasn't authorized the application to perform this action";
            type = OAuthException;
        };
    };
    code = 403;
}, com.facebook.sdk:HTTPStatusCode=403} 
```

请帮助我了解我哪里出错了。

我还添加了一些键值对到`NSUserDefaults`. 这可能是一个可能的原因吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:46:54.307

当您第一次使用发布按钮显示您的视图时，您可能想要检查会话是否打开并根据会话状态设置您的发布按钮标题。假设您的按钮最初具有“发布”标题：

```
[FBSession openActiveSessionWithAllowLoginUI: NO];

if (![FBSession.activeSession isOpen]) 
{
    [self setSendButtonTitle:NSLocalizedString(@"Log in",@"")];
} 
```

然后将以下代码添加到您的发布按钮操作：

```
- (void) send: (UIButton*) sender
{
    if (![FBSession.activeSession isOpen]) 
    {
        [FBSession openActiveSessionWithPublishPermissions: [NSArray arrayWithObjects: @"publish_stream", nil]
                                       defaultAudience: FBSessionDefaultAudienceEveryone
                                          allowLoginUI: YES

                              completionHandler: ^(FBSession *session,
                                                  FBSessionState status,
                                                  NSError *error) 
                              {
                                  if (error)
                                  {
                                      NSLog(@"error");
                                  } 
                                  else 
                                  {
                                      [FBSession setActiveSession:session];
                                      [self setSendButtonTitle: NSLocalizedString(@"Post",@"")];
                                  }
                              }];

        return;
    }

    // here comes the code you use for sending the message
} 
```

因此，如果用户按下发送并且应用程序未授权，它将执行登录操作并将您的发布按钮标题从“登录”更改为“发布”。然后用户将能够通过再次按下按钮来发布消息。

希望能帮助到你

# scala - “新”关键字不适用于不可变队列

> ID：14704066
> 
> 赞同：4
> 
> 时间：2013-02-05T09:28:13.347
> 
> 标签：scala, stack, queue

我试图用新的关键字创建一个队列。我为可变队列和不可变队列做了这件事。

但是当我尝试使用不可变队列时，它给出了错误：

```
<console>:8: error: constructor Queue in class Queue cannot be accessed in object $iw
 Access to protected constructor Queue not permitted because
 enclosing class object $iw in object $iw is not a subclass of 
 class Queue in package immutable where target is defined
       val a=new Queue[Int]()
             ^

scala> import scala.collection.immutable.Queue
import scala.collection.immutable.Queue

scala> val a=new Queue[Int]()
<console>:8: error: constructor Queue in class Queue cannot be accessed in object $iw
 Access to protected constructor Queue not permitted because
 enclosing class object $iw in object $iw is not a subclass of 
 class Queue in package immutable where target is defined
       val a=new Queue[Int]() 
```

但是当我用可变队列、不可变堆栈、可变堆栈尝试这段代码时......效果很好

```
scala> import scala.collection.mutable.Queue
import scala.collection.mutable.Queue

scala> val a=new Queue[Int]()
a: scala.collection.mutable.Queue[Int] = Queue()

scala> import scala.collection.immutable.Stack
import scala.collection.immutable.Stack

scala> val a=new Stack[Int]()
a: scala.collection.immutable.Stack[Int] = Stack()

scala> import scala.collection.mutable.Stack
import scala.collection.mutable.Stack

scala> val a=new Stack[Int]()
a: scala.collection.mutable.Stack[Int] = Stack() 
```

谁能告诉我，为什么会这样？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T10:00:04.210

快速浏览一下[源代码](https://github.com/scala/scala/blob/v2.10.0/src/library/scala/collection/immutable/Queue.scala)，我敢肯定，不可变版本本质上是通过几个`List`s 实现的，这些 s 根据需要在*读取*和*写入*之间提供良好的性能（队列/出队）。

这与其他集合完全不同，因为它需要两个提到`List`的 s 作为`class`构造函数的参数。
另一方面，伴随对象通过接受可变数量的`Queue`内容初始值来提供与其他集合一致的公共工厂方法。

缺少的是该类的公共构造函数，它将`apply`通过获取初始值并使用它们来构建“入队/出队”来模仿伴随对象的调用`Lists`。

也许它被认为不是必需的，或者它是一个疏忽，或者有一个我无法弄清楚的更深层次的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T09:32:40.160

编译器已经告诉你为什么它不起作用，因为构造函数是`protected`. 您必须使用`apply`同伴的方法来创建`immutable.Queue`：

```
val queue = immutable.Queue(1,2,3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T10:00:34.143

我将这个问题解释为“为什么构造函数受到保护”。我们只能猜测，但我倾向于认为这是一个简单的疏忽。就风格而言，通常最好使用伴随对象来实例化集合，但考虑到您也可以直接实例化其他具体集合，这应该与`Queue`. 换句话说，我绝对认为`Queue`应该有这个没有参数的构造函数来创建一个空队列，如果只是为了保持一致性：

```
class Queue[+A] extends ... {
  ...
  def this() { this( Nil, Nil ) }
  ...
} 
```

虽然这是非常主观的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T14:57:25.927

我猜是因为鼓励使用它`empty`来创建 void 不可变集合，因为它避免了开销（如果你多次这样做）并最大限度地利用了不变性。只是不需要每次都创建新实例，因为“世界上只有一个空队列”。对于可变集合，显然这是行不通的。

# emacs - 如何在 Emacs Org-babel 中启用自动完成？

> ID：14704077
> 
> 赞同：9
> 
> 时间：2013-02-05T09:28:53.263
> 
> 标签：emacs, autocomplete, org-mode, babeljs

我想在以下位置启用`auto-complete`Babel 代码块`org-mode`：

```
#+begin_src emacs-lisp
(setq )                 <--- language-aware auto-completion here
#+end_src 
```

`.emacs`为了配置`auto-complete`执行此操作，我需要添加什么到我的文件中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-03-14T04:57:04.240

派对迟到了，但今天默认（并且推荐的方式没有其他黑客）是使用今天映射到的 'org-edit-special 切换到该“大块”的专用 elisp 缓冲区

> 抄送-'

点击相同的返回到您的组织文件编辑。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-25T22:55:20.160

`C-c C-v z`当您在代码块中时，您可以切换到具有正确模式和自动完成的专用会话。

`C-c C-v z`或者`C-c C-v` `org-babel-switch-to-session-with-code`

查看 org-documentation 14.11 键绑定和有用的功能以获取更多信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-05T04:41:34.587

最强大（且完全不`org-mode`具体）的方法是使用`indirect buffer`. [这](http://demonastery.org/2013/04/emacs-narrow-to-region-indirect/)是一篇深入解释间接缓冲区的博客文章。基本上，间接缓冲区反映了另一个缓冲区的一部分的内容。

```
(defun narrow-to-region-indirect (start end)
  "Restrict editing in this buffer to the current region, indirectly."
  (interactive "r")
  (deactivate-mark)
  (let ((buf (clone-indirect-buffer nil nil)))
    (with-current-buffer buf
      (narrow-to-region start end))
      (switch-to-buffer buf))) 
```

此时，您将拥有一个包含您之前创建的区域的新缓冲区。您可以为该缓冲区启用主要模式并进行满意的编辑——您所做的更改（就像任何好的镜像应该做的那样）反映在原始文档中。

# hudson - Hudson CI：如何从报告文件中提取指标

> ID：14704078
> 
> 赞同：1
> 
> 时间：2013-02-05T09:28:57.767
> 
> 标签：hudson

我正在使用 Hudson CI 自动集成我的 FPGA 项目。在其中一个构建步骤中，我运行了一个逻辑综合工具，该工具生成一个纯文本报告文件。该报告包含一些指标，例如最大频率，我想随着时间的推移对其进行监控。以下是最大频率在报告中的显示方式：

```
Minimum period: 5.720ns (Maximum Frequency: 174.821MHz) 
```

如何在 Hudson 中提取和监控/绘制此类指标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:39:34.867

这个问题已在 Hudson 论坛上得到解答：http: [//www.eclipse.org/forums/index.php/mv/msg/452719/1007740/#msg_1007740](http://www.eclipse.org/forums/index.php/mv/msg/452719/1007740/#msg_1007740)

解决方案是使用[Plot 插件](http://wiki.hudson-ci.org/display/HUDSON/Plot+Plugin)。

# javascript - JQuery 对话框滚动条位置

> ID：14704087
> 
> 赞同：0
> 
> 时间：2013-02-05T09:29:36.253
> 
> 标签：javascript, jquery

如何将我的对话框中的滚动条设置为默认设置为底部，这样当对话框打开时，滚动条位于底部

```
 $( "#report-dialog" ).dialog({
            modal: true,
            autoOpen: false,
            show: "blind",
            hide: "fold",
            width: 850,
            height: 600,

            buttons: {
                Close: function() {
                    $( this ).dialog( "close" );
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:07:52.167

你可以这样做：

```
$('#element').dialog({
    open: function(){
        var el = $(this);
        var scrollY = this.scrollHeight;

        el.scrollTop(scrollY);
        el.parent().queue(function(next){
            el.scrollTop(scrollY);
            next();
        });
    }
}); 
```

第一个 scrollTop 在对话框打开时设置滚动，但显然 jQueryUI 在动画完成时重置滚动，所以我们在元素的父队列（做动画的那个）中添加了另一个函数，所以它可以在之后再次重置高度动画完成。

# math - 求解形式 T(ni) + f(n) 的递归示例

> ID：14704094
> 
> 赞同：-1
> 
> 时间：2013-02-05T09:30:10.670
> 
> 标签：math, complexity-theory, asymptotic-complexity, recurrence

我现在一直在研究一个问题集，我似乎已经掌握了用于重复示例的主方法。但是，我发现自己在使用其他方法（递归树、替换）时遇到了困难。这是我坚持的问题： T(n) = T(n-2) + n^2 是否有如下模式？n^2 + T(n-2) + T(n-4) +... 直到没有剩下的 n 为止。所以大约 n/2 次，这是否意味着 n^2 + (n-2)^2 + (ni) ^2 所以渐近界将是 theta(n^2)？

老实说，我在这里在黑暗中拍摄，所以我希望有人可以帮助指导我如何解决这些问题。也许不是对这个问题的直接回答，但最好是暗示我应该从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:47:27.650

正如你所说，结果将是 n^2 + (n-2)^2 + (n-4)^2 + ...

直觉上你可以感觉到，因为总和中有很多 (n/2) 个元素，所以它会超过 O(n^2) - 与 1 + 2 + 3 + ... + n 相同的方式更多比 O(n)。

证明它的一种方法是，您可以用所有平方数之和的一半来近似总和，对此有一个[公式](http://en.wikipedia.org/wiki/Square_pyramidal_number)。所以它是 Theta(n^3)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:10:53.030

以下是如何将总和按摩到结果中

```
n^2 + (n-2)^2 + ... + (n -2i) + ...

= {just writing in a different way}

(2n/2) + (2n/2 - 2)^2 + ... + (2n/2 -2i)^2 + ...

= {write m = n/2}

(2m)^2 + (2m-2)^2 + ... (2m - 2i)^2 + ...

= 4 ( m^2 + (m-1)^2 + ... (m-i)^2 ...)

= 4 ( sum (k^2) from k=1 to m)

= 4 ( sum (k^2) from k=1 to n/2)

= (n^3 + 3n^2 + 2n)/6 
```

使用[公式](http://en.wikipedia.org/wiki/Square_pyramidal_number)

# maven - 使用带有flyway maven插件的Maven密码加密

> ID：14704095
> 
> 赞同：1
> 
> 时间：2013-02-05T09:30:10.497
> 
> 标签：maven, password-encryption, flyway

我正在使用 flyway 及其 maven 插件进行数据库迁移，并且我的数据库凭据以纯文本格式存储在 .m2/settings.xml 的服务器部分中。

我想避免这种情况并使用 Maven 加密机制对它们进行加密，如[Maven 密码加密迷你指南](http://maven.apache.org/guides/mini/guide-encryption.html)中所述。不幸的是，我总是使用 settings.xml 中的加密密码得到登录被拒绝错误。所以看起来flyway maven插件没有解密密码。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:02:01.163

尚不支持此功能。请在[问题跟踪器](https://code.google.com/p/flyway/issues/list)中提交错误。

**更新：**今天我在火车上度过了一些时间。实施的。

# c# - 枢轴导航

> ID：14704096
> 
> 赞同：0
> 
> 时间：2013-02-05T09:30:13.757
> 
> 标签：c#, .net, silverlight, windows-phone-7

我的应用程序中有 Pivot：

```
<phone:Pivot x:Name="menuPivot" SelectionChanged="PivotSelectionChanged">
            <phone:PivotItem Header="Search" Margin="0,10,0,0">
                <local:SearchControl x:Name="search"/>
            </phone:PivotItem>

            <phone:PivotItem Header="Favorites">
                <local:FavoritesControl x:Name="favorites" />
            </phone:PivotItem>

            <phone:PivotItem Header="History">
                <local:HistoryControl x:Name="history" />
            </phone:PivotItem>

            <phone:PivotItem Header="NowPlaying">
                <local:NowPlayingPageControl x:Name="nowPlaying" />
            </phone:PivotItem>

        </phone:Pivot> 
```

而且我想知道如何在控件中设置 Pivot 索引。就像用户按下 SearchControl 中的按钮，这样枢轴将导航到现在播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:50:07.000

```
menuPivot.SelectedItem = nowPlaying; 
```

[http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.pivot.selecteditem](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.pivot.selecteditem)

# c# - 已经添加了 LinqToSql 项。输入字典

> ID：14704100
> 
> 赞同：2
> 
> 时间：2013-02-05T09:30:21.523
> 
> 标签：c#, linq-to-sql

很随机，我们收到一条错误消息，提示项目已添加。当我们查询 LinqToSql 数据上下文时键入字典，停止它的唯一方法是重新启动 IIS。

错误信息：

> > 错误消息：项目已添加。字典中的键：'Int32 Single1[System.Int32]">Int32' 添加的键：'Int32 Single[Int32](System.Collections.Generic.IEnumerable1[System.Int32])'
> 
> 堆栈跟踪：
> 
> > 堆栈跟踪：在 System.Reflection.CerHashtable `2.Insert(K[] keys, V[] values, Int32& count, K key, V value) at System.Reflection.CerHashtable`2.Preallocate(Int32 count) 在 System.RuntimeType.RuntimeTypeCache.GetGenericMethodInfo(RuntimeMethodHandleInternal genericMethod) 在 System.RuntimeType.GetMethodBase(RuntimeType reflectType, RuntimeMethodHandleInternal methodHandle) 在 System.Reflection.RuntimeMethodInfo.MakeGenericMethod(在 System.Linq.Queryable.Count[TSource](IQueryable 中键入 [] methodInstantiation)`1 source) at Triton.CRM.OrganisationType.LoadOrganisationTypeInformation() in c:\Users\timg\Documents\Visual Studio 2012\Projects\Triton V2\TritonDataSets\Organisation\OrganisationType.cs:line 82 at Triton.CRM.OrganisationType.get_OrganisationTypeName() in c:\Users\timg\Documents\Visual Studio 2012\Projects\Triton V2\TritonDataSets\Organisation\OrganisationType.cs:line 31 at Triton.CRM.OrganisationType.GetAllData(Int32 PageSize, Int32 Currentpage, String sortField, String sortOrder, String query, Int32 personId, Int64 organisationId, String groupIdListCtv, String select, String searchValue, Boolean useFullTextSearch, List`1 groupIdList) 在 c:\Users\timg\Documents\Visual Studio 2012\Projects\Triton V2\TritonDataSets\Organisation\OrganisationType.cs: 255 行 CustomPages_GetFranchiseeSummary.Page_Load(Object sender, EventArgs e) at System.Web.Util。 CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)

我发现很多帖子都提到它与一个错误有关，`System.Reflection.RuntimeMethodInfo.MakeGenericMethod`但没有解决方案。

我也在 Microsoft Connect 上找到了这个，但他们说它已在 .net 4 中修复并且我正在运行 .net 4.5

[https://connect.microsoft.com/VisualStudio/feedback/details/738253](https://connect.microsoft.com/VisualStudio/feedback/details/738253)

# bash - Shell 重复执行 ssh 和 scp 命令

> ID：14704103
> 
> 赞同：0
> 
> 时间：2013-02-05T09:30:34.583
> 
> 标签：bash, shell

我有两行需要在 for 循环中重复执行

```
ssh tam@192.168.174.43 mkdir -p $location
scp -r $i tam@192.168.174.43:$location 
```

但是每次都需要输入密码，我怎样才能改变密码然后只需要输入一次或更多的快速方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:01:28.623

[您可以使用 ssh-keygen ( https://help.ubuntu.com/community/SSH/OpenSSH/Keys](https://help.ubuntu.com/community/SSH/OpenSSH/Keys) )使用公钥/私钥生成方法，然后使用以下脚本。

```
for VARIABLE in dir1 dir2 dir3
do
ssh tam@192.168.174.43 mkdir -p $location
scp -r $i tam@192.168.174.43:$location
done 
```

替代解决方案：您可以使用[sshpass](http://sourceforge.net/projects/sshpass/)

```
for VARIABLE in dir1 dir2 dir3
do
ssh tam@192.168.174.43 mkdir -p $location sshpass -p '<password>' <command>
scp -r $i tam@192.168.174.43:$location sshpass -p '<password>' <command>
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:22:19.787

虽然公钥/私钥是最简单的选择，但无需更改现有脚本，还有另一种选择，即使用[`sshfs`](http://linux.die.net/man/1/sshfs). 默认情况下可能未安装 sshfs。

使用这种方法，您基本上`mount`可以通过 ssh 协议将远程文件系统转移到本地目录。然后您可以简单地使用 mkdir / cp 等命令。

**注意**：这些命令来自您的系统而不是远程系统。

通过 ssh 挂载是一项一次性工作，需要您手动干预。在运行脚本之前执行此操作。
例如，对于您的情况：

```
mkdir /tmp/tam_192.168.174.43
sshfs tam@192.168.174.43:/ /tmp/tam_192.168.174.43
tam@192.168.174.43's password: <ENTER PASSWORD HERE> 
```

& 然后，在您的脚本中，使用简单的命令，例如：

```
mkdir -p /tmp/tam_192.168.174.43/$location
cp -r $i /tmp/tam_192.168.174.43/$location 
```

& 卸载：

```
fusermount -u /tmp/tam_192.168.174.43 
```

# iphone - 从精简版到完整版，适用于 APP 旧/当前用户的完整版，无需应用内购买

> ID：14704104
> 
> 赞同：0
> 
> 时间：2013-02-05T09:30:37.097
> 
> 标签：iphone, in-app-purchase

在我当前在应用商店中的应用中..

我添加了精简版和完整版的功能。

购买精简版的用户可以通过应用内购买获得完整版。

**问题**

但我的问题是，对于应用程序的所有当前用户来说，应该在不支付任何 IAP 费用的情况下获得完整版本。

我们可以这样做吗？有可能吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:36:50.960

如果应用程序的功能被任何服务器相关事件解锁，您可以这样做。如果您的应用通过在服务器上注册或从那里获取任何特定事件来解锁功能，那么这是可能的。

如果您必须更改代码，那么不将更新推送到 App Store 是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:46:06.350

**当 IAP 获准出售时，您将无法对应用内购买进行任何更改，但定价和可用性的更改除外。**

因此，在有限时间内将价格设为第 1 层（`no free pricing for IAP`），通过推送通知/您的网站通知现有用户。

或者，

***免费提供完整版。***

# sql - 在 SQL Server 的存储过程中搜索文本

> ID：14704105
> 
> 赞同：981
> 
> 时间：2013-02-05T09:30:39.060
> 
> 标签：sql, sql-server, stored-procedures

我想从我的所有数据库存储过程中搜索文本。我使用下面的 SQL：

```
SELECT DISTINCT
       o.name AS Object_Name,
       o.type_desc
FROM sys.sql_modules m
       INNER JOIN
       sys.objects o
         ON m.object_id = o.object_id
WHERE m.definition Like '%[ABD]%'; 
```

我想在所有存储过程中搜索，`[ABD]`包括方括号，但它没有给出正确的结果。如何更改查询以实现此目的？

* * *

## 回答 #1

> 赞同：649
> 
> 时间：2013-02-05T09:33:42.153

转义方括号：

```
...
WHERE m.definition Like '%\[ABD\]%' ESCAPE '\' 
```

然后方括号将被视为字符串文字而不是通配符。

* * *

## 回答 #2

> 赞同：383
> 
> 时间：2013-08-21T14:39:19.403

试试这个请求：

**询问**

```
SELECT name
FROM   sys.procedures
WHERE  Object_definition(object_id) LIKE '%strHell%' 
```

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2013-09-05T10:55:19.523

您是否尝试过使用一些第三方工具进行搜索？那里有几个免费的，过去为我节省了大量时间。

以下是我成功使用的两个 SSMS 插件。

[ApexSQL 搜索](http://www.apexsql.com/sql_tools_search.aspx)– 搜索数据库中的模式和数据，并具有附加功能，例如依赖关系跟踪等……

[SSMS 工具包](http://www.ssmstoolspack.com/)- 具有与前一个相同的搜索功能和其他几个很酷的功能。SQL Server 2012 不是免费的，但仍然非常实惠。

我知道这个答案不是 100% 与问题相关（更具体），但希望其他人会觉得这很有用。

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2013-02-05T09:33:10.227

我通常运行以下命令来实现：

```
select distinct object_name(id) 
from syscomments 
where text like '%[ABD]%'
order by object_name(id) 
```

* * *

## 回答 #5

> 赞同：41
> 
> 时间：2015-11-10T13:23:10.253

使用 SQL Server 的良好做法。

创建下面的存储过程并设置快捷键，

```
CREATE PROCEDURE [dbo].[Searchinall]       
(@strFind AS VARCHAR(MAX))
AS
BEGIN
    SET NOCOUNT ON; 
    --TO FIND STRING IN ALL PROCEDURES        
    BEGIN
        SELECT OBJECT_NAME(OBJECT_ID) SP_Name
              ,OBJECT_DEFINITION(OBJECT_ID) SP_Definition
        FROM   sys.procedures
        WHERE  OBJECT_DEFINITION(OBJECT_ID) LIKE '%'+@strFind+'%'
    END 

    --TO FIND STRING IN ALL VIEWS        
    BEGIN
        SELECT OBJECT_NAME(OBJECT_ID) View_Name
              ,OBJECT_DEFINITION(OBJECT_ID) View_Definition
        FROM   sys.views
        WHERE  OBJECT_DEFINITION(OBJECT_ID) LIKE '%'+@strFind+'%'
    END 

    --TO FIND STRING IN ALL FUNCTION        
    BEGIN
        SELECT ROUTINE_NAME           Function_Name
              ,ROUTINE_DEFINITION     Function_definition
        FROM   INFORMATION_SCHEMA.ROUTINES
        WHERE  ROUTINE_DEFINITION LIKE '%'+@strFind+'%'
               AND ROUTINE_TYPE = 'FUNCTION'
        ORDER BY
               ROUTINE_NAME
    END

    --TO FIND STRING IN ALL TABLES OF DATABASE.    
    BEGIN
        SELECT t.name      AS Table_Name
              ,c.name      AS COLUMN_NAME
        FROM   sys.tables  AS t
               INNER JOIN sys.columns c
                    ON  t.OBJECT_ID = c.OBJECT_ID
        WHERE  c.name LIKE '%'+@strFind+'%'
        ORDER BY
               Table_Name
    END
END 
```

现在 - 如下设置快捷键，

[![在此处输入图像描述](../Images/c2b52cee1809807982bcaee68286ce0c.png)](https://i.stack.imgur.com/221dl.png)

因此，下次当您想在四个对象中的任何一个中查找特定文本时，例如`Store procedure`、和。您只需要编写该关键字并按快捷键即可。`Views``Functions``Tables`

**例如：**我想搜索“PaymentTable”，然后输入“PaymentTable”，并确保您在查询编辑器中选择或突出显示所写的关键字并按下快捷键`ctrl+4`- 它会为您提供完整的结果。

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2013-11-03T07:56:28.547

[Redgate 的 SQL Search](http://www.red-gate.com/products/sql-development/sql-search/)是一个很好的工具，它是 SSMS 的免费插件。

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2017-01-24T19:36:00.983

**请将此视为“肮脏”的替代方案**，但这多次拯救了我，尤其是当我不熟悉数据库项目时。有时您试图在所有 SP 中搜索一个字符串，却忘记了一些相关逻辑可能**隐藏在函数和触发器之间，**或者它的措辞可能与您想象的不同。

在您的 MSSMS 中，您可以右键单击数据库并选择 **`Tasks -> Generate Scripts`**向导以将所有 SP、Fns 和触发器输出到单个 .sql 文件中。

[![在此处输入图像描述](../Images/2ac22ef817b6e0fb4c691e4914626d4c.png)](https://i.stack.imgur.com/1WXVg.png)

确保也选择触发器！

[![在此处输入图像描述](../Images/d9accfeef106a831ae68567cf816cc89.png)](https://i.stack.imgur.com/7VNYf.png)

**然后只需使用 Sublime 或 Notepad**搜索您需要查找的字符串。**我知道这可能是非常低效和偏执的方法，但它有效:)**

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2013-10-04T12:28:16.833

你也可以使用这个：

```
SELECT * 
FROM INFORMATION_SCHEMA.ROUTINES 
WHERE ROUTINE_DEFINITION like '%Search_String%' 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2013-05-22T07:42:34.617

```
select top 10 * from
sys.procedures
where object_definition(object_id) like '%\[ABD\]%' 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2015-06-11T06:30:19.053

它可能对你有帮助！

```
SELECT DISTINCT 
      A.NAME AS OBJECT_NAME,
      A.TYPE_DESC
      FROM SYS.SQL_MODULES M 
      INNER JOIN SYS.OBJECTS A ON M.OBJECT_ID = A.OBJECT_ID
      WHERE M.DEFINITION LIKE '%['+@SEARCH_TEXT+']%'
      ORDER BY TYPE_DESC 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2013-03-26T16:25:35.733

您也可以使用：

```
SELECT OBJECT_NAME(id) 
    FROM syscomments 
    WHERE [text] LIKE '%flags.%' 
    AND OBJECTPROPERTY(id, 'IsProcedure') = 1 
    GROUP BY OBJECT_NAME(id) 
```

那包括评论

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2015-03-24T08:31:47.103

```
SELECT DISTINCT 
   o.name AS Object_Name,
   o.type_desc
FROM sys.sql_modules m        INNER JOIN        sys.objects o 
     ON m.object_id = o.object_id WHERE m.definition Like '%[String]%'; 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2017-06-29T11:12:14.013

```
 SELECT DISTINCT OBJECT_NAME([id]),[text] 

 FROM syscomments   

 WHERE [id] IN (SELECT [id] FROM sysobjects WHERE xtype IN 

 ('TF','FN','V','P') AND status >= 0) AND  

 ([text] LIKE '%text to be search%' ) 
```

OBJECT_NAME([id]) --> 对象名（视图、存储过程、标量函数、表函数名）

id (int) = 对象标识号

xtype char(2) 对象类型。可以是以下对象类型之一：

FN = 标量函数

P = 存储过程

V = 查看

TF = 表函数

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2017-08-14T19:07:44.147

我创建了一个过程来搜索过程/函数、表、视图或作业中的文本。第一个参数@search 是搜索条件，@target 是搜索目标，即过程、表等。如果不指定，则搜索全部。@db 是指定要搜索的数据库，默认为你当前的数据库。这是我在动态 SQL 中的查询。

```
ALTER PROCEDURE [dbo].[usp_find_objects]
(
    @search VARCHAR(255),
    @target VARCHAR(255) = NULL,
    @db VARCHAR(35) = NULL
)
AS

SET NOCOUNT ON;

DECLARE @TSQL NVARCHAR(MAX), @USEDB NVARCHAR(50)

IF @db <> '' SET @USEDB = 'USE ' + @db
ELSE SET @USEDB = ''

IF @target IS NULL SET @target = ''

SET @TSQL = @USEDB + '

DECLARE @search VARCHAR(128) 
DECLARE @target VARCHAR(128)

SET @search = ''%' + @search + '%''
SET @target = ''' + @target + '''

IF @target LIKE ''%Procedure%'' BEGIN
    SELECT o.name As ''Stored Procedures''
    FROM SYSOBJECTS o 
    INNER JOIN SYSCOMMENTS c ON o.id = c.id
    WHERE c.text LIKE @search
        AND o.xtype IN (''P'',''FN'')
    GROUP BY o.name
    ORDER BY o.name
END

ELSE IF @target LIKE ''%View%'' BEGIN
    SELECT o.name As ''Views''
    FROM SYSOBJECTS o 
    INNER JOIN SYSCOMMENTS c ON o.id = c.id
    WHERE c.text LIKE @search
        AND o.xtype = ''V''
    GROUP BY o.name
    ORDER BY o.name
END

/* Table - search table name only, need to add column name */
ELSE IF @target LIKE ''%Table%'' BEGIN
    SELECT t.name AS ''TableName''
    FROM sys.columns c 
    JOIN sys.tables t ON c.object_id = t.object_id
    WHERE c.name LIKE @search
    ORDER BY TableName
END

ELSE IF @target LIKE ''%Job%'' BEGIN
    SELECT  j.job_id,
        s.srvname,
        j.name,
        js.step_id,
        js.command,
        j.enabled 
    FROM    [msdb].dbo.sysjobs j
    JOIN    [msdb].dbo.sysjobsteps js
        ON  js.job_id = j.job_id 
    JOIN    master.dbo.sysservers s
        ON  s.srvid = j.originating_server_id
    WHERE   js.command LIKE @search
END

ELSE BEGIN 
    SELECT o.name As ''Stored Procedures''
    FROM SYSOBJECTS o 
    INNER JOIN SYSCOMMENTS c ON o.id = c.id
    WHERE c.text LIKE @search
        AND o.xtype IN (''P'',''FN'')
    GROUP BY o.name
    ORDER BY o.name

    SELECT o.name As ''Views''
    FROM SYSOBJECTS o 
    INNER JOIN SYSCOMMENTS c ON o.id = c.id
    WHERE c.text LIKE @search
        AND o.xtype = ''V''
    GROUP BY o.name
    ORDER BY o.name

    SELECT t.name AS ''Tables''
    FROM sys.columns c 
    JOIN sys.tables t ON c.object_id = t.object_id
    WHERE c.name LIKE @search
    ORDER BY Tables

    SELECT  j.name AS ''Jobs''
    FROM    [msdb].dbo.sysjobs j
    JOIN    [msdb].dbo.sysjobsteps js
        ON  js.job_id = j.job_id 
    JOIN    master.dbo.sysservers s
        ON  s.srvid = j.originating_server_id
    WHERE   js.command LIKE @search
END
'

EXECUTE sp_executesql @TSQL 
```

> **更新：** 如果您重命名了一个过程，它只会更新`sysobjects`而不是`syscomments`，它会保留旧名称，因此该过程将不会包含在搜索结果中，除非您删除并重新创建该过程。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2021-06-01T17:02:55.433

```
SELECT name , type_desc , create_date , modify_date
FROM   sys.procedures 
WHERE  Object_definition(object_id) LIKE '%High%' 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2013-02-05T09:34:07.180

使用[CHARINDEX](http://msdn.microsoft.com/en-us/library/ms186323.aspx)：

```
SELECT DISTINCT o.name AS Object_Name,o.type_desc
FROM sys.sql_modules m 
INNER JOIN sys.objects  o 
ON m.object_id=o.object_id
WHERE CHARINDEX('[ABD]',m.definition) >0 ; 
```

使用[PATINDEX](http://msdn.microsoft.com/en-us/library/ms188395.aspx)：

```
SELECT DISTINCT o.name AS Object_Name,o.type_desc
FROM sys.sql_modules m 
INNER JOIN sys.objects  o 
ON m.object_id=o.object_id
WHERE PATINDEX('[[]ABD]',m.definition) >0 ; 
```

使用这个 double`[[]ABD]`类似于转义：

```
WHERE m.definition LIKE '%[[]ABD]%' 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2017-11-04T11:27:15.117

也试试这个：

```
 SELECT ROUTINE_NAME 
    FROM INFORMATION_SCHEMA.ROUTINES 
    WHERE ROUTINE_DEFINITION like '%\[ABD\]%' 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2017-10-13T02:12:30.063

此查询是从所有数据库的存储过程中搜索文本。

```
DECLARE @T_Find_Text VARCHAR(1000) = 'Foo'

IF OBJECT_ID('tempdb..#T_DBNAME') IS NOT NULL DROP TABLE #T_DBNAME
IF OBJECT_ID('tempdb..#T_PROCEDURE') IS NOT NULL DROP TABLE #T_PROCEDURE

CREATE TABLE #T_DBNAME
(
    IDX int IDENTITY(1,1) PRIMARY KEY 
    , DBName VARCHAR(255)
)

CREATE TABLE #T_PROCEDURE
(
    IDX int IDENTITY(1,1) PRIMARY KEY 
    , DBName VARCHAR(255)
    , Procedure_Name VARCHAR(MAX)
    , Procedure_Description VARCHAR(MAX)
)

INSERT INTO #T_DBNAME (DBName)
SELECT name FROM master.dbo.sysdatabases

DECLARE @T_C_IDX INT = 0
DECLARE @T_C_DBName VARCHAR(255)
DECLARE @T_SQL NVARCHAR(MAX)
DECLARE @T_SQL_PARAM NVARCHAR(MAX) 

SET @T_SQL_PARAM =   
    '   @T_C_DBName VARCHAR(255)
        , @T_Find_Text VARCHAR(255)
    '  

WHILE EXISTS(SELECT TOP 1 IDX FROM #T_DBNAME WHERE IDX > @T_C_IDX ORDER BY IDX ASC)
BEGIN

    SELECT TOP 1 
    @T_C_DBName = DBName 
    FROM #T_DBNAME WHERE IDX > @T_C_IDX ORDER BY IDX ASC

    SET @T_SQL = ''

    SET @T_SQL = @T_SQL + 'INSERT INTO #T_PROCEDURE(DBName, Procedure_Name, Procedure_Description)'
    SET @T_SQL = @T_SQL + 'SELECT SPECIFIC_CATALOG, ROUTINE_NAME, ROUTINE_DEFINITION '
    SET @T_SQL = @T_SQL + 'FROM ' + @T_C_DBName +  '.INFORMATION_SCHEMA.ROUTINES  '
    SET @T_SQL = @T_SQL + 'WHERE ROUTINE_DEFINITION LIKE ''%''+ @T_Find_Text + ''%'' '
    SET @T_SQL = @T_SQL + 'AND ROUTINE_TYPE = ''PROCEDURE'' '

    BEGIN TRY
        EXEC SP_EXECUTESQL  @T_SQL, @T_SQL_PARAM, @T_C_DBName, @T_Find_Text
    END TRY
    BEGIN CATCH
        SELECT @T_C_DBName + ' ERROR'
    END CATCH

    SET @T_C_IDX = @T_C_IDX + 1
END

SELECT IDX, DBName, Procedure_Name FROM #T_PROCEDURE ORDER BY DBName ASC 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-11-26T05:33:18.897

```
Select distinct OBJECT_NAME(id) from syscomments where text like '%string%' AND OBJECTPROPERTY(id, 'IsProcedure') = 1 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-03-12T08:38:13.680

不同的版本，使查询更适合不同的编码实践。

```
SELECT DISTINCT
       O.NAME AS OBJECT_NAME,
       O.TYPE_DESC
  FROM SYS.SQL_MODULES M
       INNER JOIN
       SYS.OBJECTS O
         ON M.OBJECT_ID = O.OBJECT_ID
 WHERE UPPER(M.DEFINITION) LIKE UPPER('%Your Text%'); 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-07-02T16:32:12.403

```
/* 
    SEARCH SPROCS & VIEWS

    The following query will allow search within the definitions 
    of stored procedures and views.

    It spits out the results as XML, with the full definitions, 
    so you can browse them without having to script them individually.

*/

/*
   STEP 1: POPULATE SEARCH KEYS. (Set to NULL to ignore)
*/
DECLARE 
    @def_key varchar(128) = '%foo%',      /* <<< definition search key */
    @name_key varchar(128) = '%bar%',     /* <<< name search key       */
    @schema_key varchar(128) = 'dbo';     /* <<< schema search key     */

;WITH SearchResults AS (
    /* 
       STEP 2: DEFINE SEARCH QUERY AS CTE (Common Table Expression)
    */
    SELECT 
        [Object].object_id                       AS [object_id],    
        [Schema].name                            AS [schema_name], 
        [Object].name                            AS [object_name],
        [Object].type                            AS [object_type],
        [Object].type_desc                       AS [object_type_desc],
        [Details].definition                     AS [module_definition]
    FROM  
        /* sys.sql_modules = where the body of sprocs and views live */
        sys.sql_modules AS [Details] WITH (NOLOCK)
    JOIN
        /* sys.objects = where the metadata for every object in the database lives */
        sys.objects AS [Object] WITH (NOLOCK) ON [Details].object_id = [Object].object_id
    JOIN 
        /* sys.schemas = where the schemas in the datatabase live */
        sys.schemas AS [Schema] WITH (NOLOCK) ON [Object].schema_id = [Schema].schema_id
    WHERE 
        (@def_key IS NULL OR [Details].definition LIKE @def_key)      /* <<< searches definition */
        AND (@name_key IS NULL OR [Object].name LIKE @name_key)       /* <<< searches name       */
        AND (@schema_key IS NULL OR [Schema].name LIKE @schema_key)   /* <<< searches schema     */
)
/* 
   STEP 3: SELECT FROM CTE INTO XML
*/

/* 
    This outer select wraps the inner queries in to the <sql_object> root element 
*/
SELECT 
(
    /* 
        This inner query maps stored procedure rows to <procedure> elements
    */
    SELECT TOP 100 PERCENT
        [object_id]                            AS [@object_id], 
        [schema_name] + '.' + [object_name]    AS [@full_name],
        [module_definition]                    AS [module_definition]
    FROM
        SearchResults
    WHERE
        object_type = 'P'
    ORDER BY
        [schema_name], [object_name]
    FOR XML
        PATH ('procedure'), TYPE
) AS [procedures],  /* <<< as part of the outer query, 
                           this alias causes the <procedure> elements
                           to be wrapped within the <procedures> element */
(
    /* 
        This inner query maps view rows to <view> elements
    */
    SELECT TOP 100 PERCENT 
        [object_id]                            AS [@object_id], 
        [schema_name] + '.' + [object_name]    AS [@full_name],
        [module_definition]                    AS [module_definition]
    FROM
        SearchResults
    WHERE
        object_type = 'V'
    ORDER BY
        [schema_name], [object_name]
    FOR XML
        PATH ('view'), TYPE
) AS [views]  /* <<< as part of the outer query, 
                     this alias causes the <view> elements
                     to be wrapped within the <views> element */
FOR XML 
    PATH ('sql_objects') 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-12-07T15:37:54.097

每隔一段时间，我就会使用这个脚本来确定要修改哪些 proc，或者找出什么使用表的列，或者根本不使用该表来删除一些旧的垃圾。它检查由出色提供的 sp_msforeachdb 运行的实例上的每个数据库。

```
if object_id('tempdb..##nothing') is not null
    drop table ##nothing

CREATE TABLE ##nothing
(
    DatabaseName varchar(30),
    SchemaName varchar(30),
    ObjectName varchar(100),
    ObjectType varchar(50)
)

EXEC master.sys.sp_msforeachdb 
'USE ?
insert into ##nothing
SELECT 
db_name() AS [Database],
[Scehma]=schema_name(o.schema_id), 
o.Name, 
o.type 
FROM sys.sql_modules m
INNER JOIN sys.objects o
    ON o.object_id = m.object_id
WHERE 
    m.definition like ''%SOME_TEXT%'''  
--edit this text

SELECT * FROM ##nothing n
order by OBJECTname 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-07-23T14:06:36.023

```
-- Applicable for SQL 2005+
USE YOUR_DATABASE_NAME //;
    GO

SELECT [Scehma] = schema_name(o.schema_id)
    ,o.NAME
    ,o.type
FROM sys.sql_modules m
INNER JOIN sys.objects o ON o.object_id = m.object_id
WHERE m.DEFINITION LIKE '%YOUR SEARCH KEYWORDS%'
GO 
```

* * *

## 回答 #24

> 赞同：-2
> 
> 时间：2014-09-25T13:35:21.447

你也可以使用

```
CREATE PROCEDURE [Search](
    @Filter nvarchar(max)
)
AS
BEGIN

SELECT name
FROM   procedures
WHERE   definition LIKE '%'+@Filter+'%'

END 
```

然后运行

```
exec [Search] 'text' 
```

# asp.net - : 不是有效的标识符

> ID：14704114
> 
> 赞同：0
> 
> 时间：2013-02-05T09:31:28.387
> 
> 标签：asp.net, vb.net

.NET 控件的 ID 中不能使用冒号。我引用以下网站：http: [//msdn.microsoft.com/en-us/library/system.web.ui.control.id.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.id.aspx)

“只有字母数字字符和下划线字符 (_) 的组合是此属性的有效值。包含空格或其他无效字符将导致 ASP.NET 页面解析器错误。”

是否有必须使用字母数字字符的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:11:02.587

[在 MSN 上](http://msdn.microsoft.com/en-us/library/system.web.ui.control.id.aspx)很容易找到...

> 只有字母数字字符和下划线字符 (_) 的组合是此属性的有效值。包含空格或其他无效字符将导致 ASP.NET 页面解析器错误。

至于为什么，我无法给出答案，除了对我作为开发人员来说，除了字母数字和下划线之外的变量名，你从不使用任何东西是有意义的。没有明显的理由不应该扩展到控制 ID。

# awk - linux/ubuntu awk 匹配唯一值（而不是 bash“排序唯一 grep”唯一值）

> ID：14704115
> 
> 赞同：1
> 
> 时间：2013-02-05T09:31:29.463
> 
> 标签：awk, grep

我的命令如下所示：

> cut -f 1 dummy_FILE | 排序 | 唯一的-c | awk '{打印 $2}' | 对于我在 $(cat -); 做 grep -w $i dummy_FILE |
> awk -v VAR="$i" '{距离+=$3-$2} END {打印 VAR，距离}'; 完毕

```
cat dummy_FILE
Red   13    14
Red   39    46
Blue   45    23
Blue   34    27
Green   31    73 
```

我想：
对于 $1 dummy_FILE（红色、蓝色、绿色）中的每个单词 - 计算 $3 和 $2 之间的差异总和。

要获得这样的输出：

```
Red 8  
Blue -29  
Green 42 
```

我的问题是：

1.  是否可以更换`cut -f 1 dummy_FILE | sort | uniq -c | awk '{print $2}'`？
    我`sort | uniq -c`用来从数据集中提取每个单词 - 可以用 awk 来做吗？

2.  我怎样才能克服无用`cat`的`for i in $(cat -)`？

3.  `grep -w $i dummy_FILE`工作正常，但我想用 awk 替换它（我应该吗？）；如果是这样，我该怎么做？
    当我尝试时，`awk -v VAR="$i" '/^VAR/ '{distance+=$3-$2} END {print VAR, distance}'`我得到了`"fatal: division by zero attempted"`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T09:46:45.417

我得到它使用：

```
awk '{a[$1] = a[$1] + $3 - $2;} END{for (x in a) {print x" "a[x];}}' dummy_FILE 
```

输出：

```
Blue -29
Green 42
Red 8 
```

如果要对输出进行排序，只需在命令`sort`后追加即可`AWK`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:48:40.107

这是一种使用方法`awk`：

```
awk '{ a[$1]=a[$1] + $3 - $2 } END { for(i in a) print i, a[i] }' dummy 
```

结果：

```
Red 8
Blue -29
Green 42 
```

如果您需要排序输出，您可以`sort`像 arutaku 建议的那样简单地输入：

```
awk '{ a[$1]=a[$1] + $3 - $2 } END { for(i in a) print i, a[i] }' dummy | sort 
```

但是，您可以打印到`sort`（在`awk`语句内），如下所示：

```
awk '{ a[$1]=a[$1] + $3 - $2 } END { for(i in a) print i, a[i] | "sort" }' dummy 
```

# html - 我正在努力让这个简单的 ASP 登录工作，任何人都可以看到我哪里出错了吗？

> ID：14704120
> 
> 赞同：0
> 
> 时间：2013-02-05T09:31:41.993
> 
> 标签：html, asp-classic

我正在创建一个带有 Web 前端的新数据库，其中一个要求是登录页面。我在网上找到了一个简单的页面，并认为它看起来不错并且可以解决问题。我正在努力让它正常工作，如果用户名和密码正确，它将转到我想要的页面。如果我输入其中任何一个不正确，它会转到一个空白页。如果我更改表单的操作，它不会转到任何页面。如果用户名或密码不正确，表单上的操作会将其指向空白页。请看下面的代码：

形式

```
<!-- #include file="inc.head.asp" -->
<html>

<head>
</head>

<body>

<h1><i>Login</i></h1>
<div id="displayBox" style="border: 3px solid #9C9595; height: 245px; width: 300px" class="blackBox">

<form name="myForm" action="login.asp" method="post">
<h3>Username: &nbsp;<input type="text" name="username" size="30"></h3>
<h3>Password: &nbsp;<input type="password" name="password" size="30"></h3>
<input type="submit" name="submit" value="Submit">
<br>
<br>
<p> If you want to request a new mobile phone, please click on the link below. </p>
<br>
<br>
<a href="newRequestHome.asp"><img src="images\nav_MobilephoneBigger.png"></a>
</form>

</body>
</div>
</html> 
```

登录信息

```
<%
response.buffer=true

Dim username
Dim password

username=request.form("username")
password=request.form("password")

if username="" then 
if password="" then 
response.redirect("page.index.asp")
else
response.redirect("loginFail.asp")
response.write("Please Enter a Valid Username and Password")
end if 
end if 
%> 
```

正如我所提到的，我在网上找到了这个，并尝试根据我的需要对其进行调整。我删除了用户名和密码，因为它们与我工作的公司有关，并且不希望被发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:45:09.970

做它喜欢

```
 if username="" or password="" then 
   response.redirect("page.index.asp")
else
   response.redirect("loginFail.asp")
   response.write("Please Enter a Valid Username and Password")
end if 
```

# c# - 使用线程本地存储的内存泄漏？

> ID：14704121
> 
> 赞同：1
> 
> 时间：2013-02-05T09:31:42.727
> 
> 标签：c#, asp.net-mvc, memory-leaks, windbg, thread-local-storage

几天后，我们的网站明显出现了内存泄漏（> 2Gb /pool）。所以，我在 windbg 上运行了一些命令，终于发现了一些东西：有很多`System.LocalDataStoreElement`. 在源代码中快速搜索（见下文）后，我发现了一个非常奇怪的类：

```
public class HomeController
{
    public HomeController()
    {
        CultureInfoManager.SetCulture(MyCompany.Internal.Enumerations.Site.GbEn);
    }
}
public class CultureInfoManager
{
    [ThreadStaticAttribute]
    private static Language _language;

    public static void SetCulture(Site site)
    {
        if (site == Site.Undefined) return;

        //strange ???
        var localSlot = Thread.AllocateDataSlot();
        Thread.SetData(localSlot, site.Code());

        _language = site.GetLanguage();

        var cultureInfo = CreateCultureInfo(site);
        Thread.CurrentThread.CurrentCulture = cultureInfo;
        Thread.CurrentThread.CurrentUICulture = cultureInfo;
    }

    private static CultureInfo CreateCultureInfo(Site site)
    {
        if (site == Site.Undefined) site = Site.GbEn;
        var languageCode = site.GetLanguage().Code();
        switch (languageCode)
        {
            case "f2":
                return new CultureInfo("fr-FR");
            case "br":
                return new CultureInfo("pt-BR");
            case "s1":
                return new CultureInfo("es-AR");
            case "s2":
                return new CultureInfo("es-CL");
            case "e1":
                return new CultureInfo("en-CA");
            default:
                return new CultureInfo(languageCode);
        }
    }

    public static Language GetCurrentLanguage()
    {
        return _language;
    }

} 
```

所以，我的问题：

*   在这里使用 Thread.AllocateDataSlot 显然没用，但它可以解释内存泄漏吗？因为经过完整的负载测试（超过 400 000 个请求），我无法重现泄漏。
*   将 TLS/ThreaStatic 用于 Web 应用程序是否相关？因为在 asp.net 中，我们不控制线程寿命，因为工作线程将执行许多请求。

我还在[此处](http://support.microsoft.com/kb/2540745)的 MS KB 中发现了一个问题。

总之，一切似乎都在这段代码上，但我无法重现这个问题。

# asp.net-mvc - 从 IResultFilter.OnResultExecuted 中获取路由数据

> ID：14704125
> 
> 赞同：1
> 
> 时间：2013-02-05T09:32:00.520
> 
> 标签：asp.net-mvc

当视图已经在内存中渲染并且在它作为响应发送给客户端之前，我想拦截调用，检查正在渲染的视图，动作和控制器是什么，并做一些内务处理。

因此，我正在实现一个`ResultFilter`并覆盖该`OnResultExecuted`方法。

在此方法中，如何获取路由数据以确定调用了哪个视图、操作、控制器？

**更新** 我深表歉意。我只是在反射器中查找了 ResultExecutedContext，它只显示了一个 Exception、Canceled 和 ActionResult 属性。它没有向我显示任何 RouteData。当我启动 IDE 时，它确实显示了路线数据。问这个问题我感觉像个混蛋。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:33:46.647

您可以从`filterContext`'s[`RouteData`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllercontext.routedata%28v=vs.108%29.aspx)属性中获取它：

```
public override void OnResultExecuted(ResultExecutedContext filterContext)
{
    RouteData rd = filterContext.RouteData;
    // read from the current request RouteData the information
    // you were looking for. For example to get the current controller
    // and action:
    string currentController = rd.GetRequiredString("controller");
    string currentAction = rd.GetRequiredString("action");
} 
```

至于呈现哪个视图，您可以从[`Result`](http://msdn.microsoft.com/en-us/library/system.web.mvc.resultexecutedcontext.result%28v=vs.108%29.aspx)属性中检索此信息：

```
var viewResult = filterContext.Result as ViewResultBase;
if (viewResult != null)
{
    // the controller action returned a view result (either a ViewResult or PartialViewResult)
    // so we could retrieve the view name here:
    string viewName = viewResult.ViewName;
} 
```

另一方面，如果控制器操作返回一个 JsonResult 你也可以提取检索它：

```
var jsonResult = filterContext.Result as JsonResult; 
```

等等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:34:11.320

`ResultExecutedContext`有一个`RouteData`属性应该给你你需要的东西

# unicode - 使用 wcstombs() 将 wchar_t*（包含 Unicode）转换为 MBCS（char*），具体取决于语言环境

> ID：14704130
> 
> 赞同：0
> 
> 时间：2013-02-05T09:32:15.997
> 
> 标签：unicode

我的输入是 Unicode 字符，例如："(U+00DB) (U+0081)" (wchar_t*)。我使用 wcstombs 将此宽字符字符串转换为 char * (MBCS)。由于 Unicode 已经以 UTF-8 编码，我希望它以 DB81 char* 形式返回逐字节复制的 Unicode 序列。但相反，我得到了 c3 9b。这发生在 Linux 和 Windows 上，我只得到“DB 81”。

我需要打开一个名为 DB 81 的文件（如 hexdump 所示），但 fopen 使用 char* 文件名。因此我必须将此 wchar_t* 转换为 MBCS。请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:31:16.537

不，你想做的不是你认为你应该做的。

fopen() 在任何情况下都无法处理系统上所有可能的文件名，因为它缺乏 unicode 支持。

请参阅[http://www.utf8everywhere.org](http://www.utf8everywhere.org)以了解如何使用 _wfopen() 进行操作。

# c++ - 超过 5 个参数的绳索表达模板未能正确内联

> ID：14704131
> 
> 赞同：5
> 
> 时间：2013-02-05T09:32:21.583
> 
> 标签：c++, templates, optimization

我一直在尝试使用富有表现力的模板和绳索数据结构来尝试看看可以实现什么样的收益。到目前为止，它工作得很好。但是，当尝试将超过 5 个参数连接在一起时，编译器无法正确优化并生成不必要的临时变量。有人能告诉我为什么会这样吗？是编译器限制还是我的优化选项需要调整？

我正在使用带有以下选项的 g++ 4.4.1 (mingw32)：-O3 -Winline -Wextra -Wall -fno-exceptions -fno-rtti -fomit-frame-pointer -fexpensive-optimizations -fverbose-asm -S

代码如下，它只是一个实验，所以它并不真正遵循任何标准：

```
#include <stdio.h>

template<typename Derived>
struct rope_base {
    const Derived & ref() const;
};

struct string {
    size_t m_length;
    char * m_value;

    template<typename Derived>
    string(const rope_base<Derived> & rope);
    ~string();

    const char * data() const;
    size_t length() const;
    char * write_to(char * dst) const;
};

struct static_string {
    const char * m_value;
    const size_t m_length;

    static_string(const char * value);

    size_t length() const;
    char * write_to(char * dst) const;
};

template<typename T>
struct rope_traits {
    typedef const T type;
};

template<>
struct rope_traits<string> {
    typedef const string & type;
};

template<>
struct rope_traits<static_string> {
    typedef const static_string & type;
};

template<typename Left, typename Right>
struct rope : public rope_base<rope<Left, Right> > {
    typename rope_traits<Left>::type m_left;
    typename rope_traits<Right>::type m_right;

    rope(const Left & left, const Right & right);

    size_t length() const;
    char * write_to(char * dst) const;
};

inline static_string::static_string(const char * value)
: m_value(value)
, m_length(__builtin_strlen(m_value)) {}

inline size_t static_string::length() const {
    return m_length;
}

inline char * static_string::write_to(char * dst) const {
    __builtin_memcpy(dst, m_value, m_length);
    return dst + m_length;
}

template<typename Derived>
inline string::string(const rope_base<Derived> & rope)
: m_length(rope.ref().length())
, m_value(new char[m_length + 1]) {
    *rope.ref().write_to(m_value) = 0;
}

inline string::~string() {
    delete[] m_value;
}

inline const char * string::data() const {
    return m_value;
}

inline size_t string::length() const {
    return m_length;
}

template<typename Derived>
inline const Derived & rope_base<Derived>::ref() const {
    return static_cast<const Derived &>(*this);
}

template<typename Left, typename Right>
inline rope<Left, Right>::rope(const Left & left, const Right & right)
: m_left(left)
, m_right(right) {}

template<typename Left, typename Right>
inline size_t rope<Left, Right>::length() const {
    return m_left.length() + m_right.length();
}

template<typename Left, typename Right>
inline char * rope<Left, Right>::write_to(char * dst) const {
    return m_right.write_to(m_left.write_to(dst));
}

inline rope<static_string, static_string> operator+(const static_string & left, const static_string & right) {
    return rope<static_string, static_string>(left, right);
}

template<typename Left>
inline rope<Left, static_string> operator+(const rope_base<Left> & left, const static_string & right) {
    return rope<Left, static_string>(left.ref(), right);
}

template<typename Right>
inline rope<static_string, Right> operator+(const static_string & left, const rope_base<Right> & right) {
    return rope<static_string, Right>(left, right.ref());
}

template<typename Left, typename Right>
inline rope<Left, Right> operator+(const rope_base<Left> & left, const rope_base<Right> & right) {
    return rope<Left, Right>(left.ref(), right.ref());
}

typedef static_string ss;

int main(int, char **)
{
    // works up to 5
    string s(ss("111111111111") + "222222222222" + "333333333333" + "444444444444" + "555555555555");
    printf("%d %s\n", s.length(), s.data());
    return 0;
} 
```

上面的代码生成了非常好的汇编程序输出，它是完全内联的，并且所有参数都被简化为常量：

```
.def    ___main;    .scl    2;    .type    32;    .endef
.section .rdata,"dr"
LC0:
.ascii "444444444444\0"
LC1:
.ascii "333333333333\0"
LC2:
.ascii "222222222222\0"
LC3:
.ascii "111111111111\0"
LC4:
.ascii "555555555555\0"
LC5:
.ascii "%d %s\12\0"
.text
.p2align 2,,3
.globl _main
.def    _main;    .scl    2;    .type    32;    .endef
_main:
pushl    %ebp     #
movl    %esp, %ebp     #,
andl    $-16, %esp     #,
pushl    %edi     #
pushl    %esi     #
pushl    %ebx     #
subl    $20, %esp     #,
call    ___main     #
movl    $LC3, %esi     #, D.2495
movl    $61, (%esp)     #,
call    __Znaj     #
movl    %eax, %ebx     #, D.3126
movl    $3, %ecx     #, tmp74
movl    %eax, %edi     # D.3126, D.3125
rep movsl
leal    12(%eax), %eax     #, D.3180
movb    $3, %cl     #,
movl    %eax, %edi     # D.3180, D.3180
movl    $LC2, %esi     #, D.2496
rep movsl
leal    24(%ebx), %eax     #, D.3186
movb    $3, %cl     #,
movl    %eax, %edi     # D.3186, D.3186
movl    $LC1, %esi     #, D.2502
rep movsl
leal    36(%ebx), %eax     #, D.3192
movb    $3, %cl     #,
movl    %eax, %edi     # D.3192, D.3192
movl    $LC0, %esi     #, D.2539
rep movsl
leal    48(%ebx), %eax     #, D.3198
movl    $LC4, %esi     #, tmp87
movb    $3, %cl     #,
movl    %eax, %edi     # D.3198, D.3198
rep movsl
movb    $0, 12(%eax)     #,
movl    %ebx, 8(%esp)     # D.3126,
movl    $60, 4(%esp)     #,
movl    $LC5, (%esp)     #,
call    _printf     #
testl    %ebx, %ebx     # D.3126
je    L2     #,
movl    %ebx, (%esp)     # D.3126,
call    __ZdaPv     #
L2:
xorl    %eax, %eax     #
addl    $20, %esp     #,
popl    %ebx     #
popl    %esi     #
popl    %edi     #
leave
ret
.def    __Znaj;    .scl    2;    .type    32;    .endef
.def    _printf;    .scl    2;    .type    32;    .endef
.def    __ZdaPv;    .scl    2;    .type    32;    .endef 
```

将一个或多个参数添加到串联时内联失败，导致临时对象被复制并且参数被视为变量：

```
 .def    ___main;    .scl    2;    .type    32;    .endef
    .section .rdata,"dr"
LC0:
    .ascii "777777777777\0"
LC1:
    .ascii "666666666666\0"
LC2:
    .ascii "555555555555\0"
LC3:
    .ascii "444444444444\0"
LC4:
    .ascii "333333333333\0"
LC5:
    .ascii "222222222222\0"
LC6:
    .ascii "111111111111\0"
LC7:
    .ascii "888888888888\0"
LC8:
    .ascii "%d %s\12\0"
    .text
    .p2align 2,,3
.globl _main
    .def    _main;    .scl    2;    .type    32;    .endef
_main:
    pushl    %ebp     #
    movl    %esp, %ebp     #,
    andl    $-16, %esp     #,
    pushl    %edi     #
    pushl    %esi     #
    pushl    %ebx     #
    subl    $228, %esp     #,
    call    ___main     #
    movl    $LC0, 168(%esp)     #, D.2650.m_value
    movl    $12, 172(%esp)     #, D.2650.m_length
    movl    $LC1, 176(%esp)     #, D.2613.m_value
    movl    $12, 180(%esp)     #, D.2613.m_length
    movl    $LC2, 184(%esp)     #, D.2576.m_value
    movl    $12, 188(%esp)     #, D.2576.m_length
    movl    $LC3, 192(%esp)     #, D.2539.m_value
    movl    $12, 196(%esp)     #, D.2539.m_length
    movl    $LC4, 200(%esp)     #, D.2502.m_value
    movl    $12, 204(%esp)     #, D.2502.m_length
    movl    $LC5, 208(%esp)     #, D.2496.m_value
    movl    $12, 212(%esp)     #, D.2496.m_length
    movl    $LC6, 216(%esp)     #, D.2495.m_value
    movl    $12, 220(%esp)     #, D.2495.m_length
    leal    216(%esp), %eax     #, tmp78
    movl    %eax, 152(%esp)     # tmp78, D.2571.m_left.m_left.m_left
    leal    208(%esp), %eax     #, tmp79
    movl    %eax, 156(%esp)     # tmp79, D.2571.m_left.m_left.m_right
    leal    200(%esp), %eax     #, tmp80
    movl    %eax, 160(%esp)     # tmp80, D.2571.m_left.m_right
    leal    192(%esp), %eax     #, tmp81
    movl    %eax, 164(%esp)     # tmp81, D.2571.m_right
    leal    132(%esp), %edi     #, tmp82
    leal    152(%esp), %esi     #, tmp83
    movl    $4, %ecx     #, tmp84
    rep movsl
    leal    184(%esp), %eax     #, tmp85
    movl    %eax, 148(%esp)     # tmp85, D.2608.m_right
    leal    108(%esp), %edi     #, tmp86
    leal    132(%esp), %esi     #, tmp87
    movb    $5, %cl     #,
    rep movsl
    leal    176(%esp), %eax     #, tmp89
    movl    %eax, 128(%esp)     # tmp89, D.2645.m_right
    leal    80(%esp), %edi     #, tmp90
    leal    108(%esp), %esi     #, tmp91
    movb    $6, %cl     #,
    rep movsl
    leal    168(%esp), %eax     #, tmp93
    movl    %eax, 104(%esp)     # tmp93, D.2682.m_right
    leal    48(%esp), %edi     #, tmp94
    leal    80(%esp), %esi     #, tmp95
    movb    $7, %cl     #,
    rep movsl
    movl    48(%esp), %ebx     # D.2719.m_left.m_left.m_left.m_left.m_left.m_left.m_left, SR.35
    movl    52(%esp), %edx     # D.2719.m_left.m_left.m_left.m_left.m_left.m_left.m_right, SR.34
    movl    56(%esp), %eax     # D.2719.m_left.m_left.m_left.m_left.m_left.m_right,
    movl    %eax, 36(%esp)     #, %sfp
    movl    60(%esp), %eax     # D.2719.m_left.m_left.m_left.m_left.m_right,
    movl    %eax, 32(%esp)     #, %sfp
    movl    64(%esp), %eax     # D.2719.m_left.m_left.m_left.m_right,
    movl    %eax, 28(%esp)     #, %sfp
    movl    68(%esp), %eax     # D.2719.m_left.m_left.m_right,
    movl    %eax, 24(%esp)     #, %sfp
    movl    72(%esp), %eax     # D.2719.m_left.m_right,
    movl    %eax, 20(%esp)     #, %sfp
    movl    4(%ebx), %eax     # <variable>.m_length, tmp97
    addl    4(%edx), %eax     # <variable>.m_length, tmp97
    addl    $12, %eax     #,
    movl    %eax, 44(%esp)     #, %sfp
    movl    36(%esp), %eax     # %sfp,
    movl    4(%eax), %eax     # <variable>.m_length,
    addl    %eax, 44(%esp)     #, %sfp
    movl    32(%esp), %eax     # %sfp,
    movl    4(%eax), %eax     # <variable>.m_length,
    addl    %eax, 44(%esp)     #, %sfp
    movl    28(%esp), %eax     # %sfp,
    movl    4(%eax), %eax     # <variable>.m_length,
    addl    %eax, 44(%esp)     #, %sfp
    movl    24(%esp), %eax     # %sfp,
    movl    4(%eax), %eax     # <variable>.m_length,
    addl    %eax, 44(%esp)     #, %sfp
    movl    20(%esp), %eax     # %sfp,
    movl    4(%eax), %eax     # <variable>.m_length,
    addl    %eax, 44(%esp)     #, %sfp
    movl    44(%esp), %eax     # %sfp, tmp105
    incl    %eax     # tmp105
    movl    %eax, (%esp)     # tmp105,
    movl    %edx, 16(%esp)     #,
    call    __Znaj     #
    movl    %eax, 40(%esp)     #, %sfp
    movl    (%ebx), %esi     # <variable>.m_value, <variable>.m_value
    movl    4(%ebx), %ecx     # <variable>.m_length, <variable>.m_length
    movl    %eax, %edi     #, D.3662
    rep movsb
    movl    40(%esp), %eax     # %sfp, D.3735
    addl    4(%ebx), %eax     # <variable>.m_length, D.3735
    movl    16(%esp), %edx     #,
    movl    (%edx), %esi     # <variable>.m_value, <variable>.m_value
    movl    4(%edx), %ecx     # <variable>.m_length, <variable>.m_length
    movl    %eax, %edi     # D.3735, D.3735
    rep movsb
    addl    4(%edx), %eax     # <variable>.m_length, D.3741
    movl    36(%esp), %edx     # %sfp,
    movl    (%edx), %esi     # <variable>.m_value, <variable>.m_value
    movl    4(%edx), %ecx     # <variable>.m_length, <variable>.m_length
    movl    %eax, %edi     # D.3741, D.3741
    rep movsb
    addl    4(%edx), %eax     # <variable>.m_length, D.3747
    movl    32(%esp), %edx     # %sfp,
    movl    (%edx), %esi     # <variable>.m_value, <variable>.m_value
    movl    4(%edx), %ecx     # <variable>.m_length, <variable>.m_length
    movl    %eax, %edi     # D.3747, D.3747
    rep movsb
    addl    4(%edx), %eax     # <variable>.m_length, D.3753
    movl    28(%esp), %edx     # %sfp,
    movl    (%edx), %esi     # <variable>.m_value, <variable>.m_value
    movl    4(%edx), %ecx     # <variable>.m_length, <variable>.m_length
    movl    %eax, %edi     # D.3753, D.3753
    rep movsb
    addl    4(%edx), %eax     # <variable>.m_length, D.3759
    movl    24(%esp), %edx     # %sfp,
    movl    (%edx), %esi     # <variable>.m_value, <variable>.m_value
    movl    4(%edx), %ecx     # <variable>.m_length, <variable>.m_length
    movl    %eax, %edi     # D.3759, D.3759
    rep movsb
    addl    4(%edx), %eax     # <variable>.m_length, D.3765
    movl    20(%esp), %edx     # %sfp,
    movl    (%edx), %esi     # <variable>.m_value, <variable>.m_value
    movl    4(%edx), %ecx     # <variable>.m_length, <variable>.m_length
    movl    %eax, %edi     # D.3765, D.3765
    rep movsb
    addl    4(%edx), %eax     # <variable>.m_length, D.3771
    movl    $LC7, %esi     #, tmp148
    movb    $3, %cl     #,
    movl    %eax, %edi     # D.3771, D.3771
    rep movsl
    movb    $0, 12(%eax)     #,
    movl    40(%esp), %eax     # %sfp,
    movl    %eax, 8(%esp)     #,
    movl    44(%esp), %edx     # %sfp,
    movl    %edx, 4(%esp)     #,
    movl    $LC8, (%esp)     #,
    call    _printf     #
    movl    40(%esp), %eax     # %sfp,
    testl    %eax, %eax     #
    je    L2     #,
    movl    40(%esp), %eax     # %sfp,
    movl    %eax, (%esp)     #,
    call    __ZdaPv     #
L2:
    xorl    %eax, %eax     #
    addl    $228, %esp     #,
    popl    %ebx     #
    popl    %esi     #
    popl    %edi     #
    leave
    ret
    .def    __Znaj;    .scl    2;    .type    32;    .endef
    .def    _printf;    .scl    2;    .type    32;    .endef
    .def    __ZdaPv;    .scl    2;    .type    32;    .endef 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:43:50.730

一些事情（根据评论中的讨论）：

升级你的 gcc。在 4.6 系列中进行了很多优化改进，包括对内联的一些改进。

使用较新的 gcc -Winline 警告您的字符串构造函数不会被内联：

```
warning: inlining failed in call to 'string::string(const rope_base<Derived>&) [with Derived = rope<rope<rope<rope<rope<static_string, static_string>, static_string> static_string>, static_string>, static_string>]': call is unlikely and code size would grow [-Winline] 
```

我不太清楚为什么 gcc 会给出这个特定的消息（这通常与不太可能的分支中的内联调用非常明显相关），但问题的根源是该构造函数中对 new() 的调用。使用静态固定大小的缓冲区会产生很好的紧凑 asm。使用 malloc 或在非内联函数调用中包装 new 允许内联构造函数（但不是 malloc/函数）。

采取哪种方法实际上取决于您的具体用例。如果在编译时可以知道字符串的长度，或者给定一个最大值，如您的示例所示，您显然可以完全内联。但在一般情况下，你总是不得不放弃一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:16:34.303

正如 jmetcalfe 所澄清的那样，g++ 未能正确折叠所有临时文件的原因是由于 g++ 版本过时。从 4.4.1 升级到 4.7.2 解决了这个问题。g++ 的变更日志很可能包含有关我触发了哪些错误或添加了哪些优化以生成正确结果的信息。

# haskell - 匹配 Maybe 和 Either 组合的模式

> ID：14704138
> 
> 赞同：-2
> 
> 时间：2013-02-05T09:32:48.470
> 
> 标签：haskell

如何匹配模式

```
Maybe (Either (Int, String) String) 
```

我需要用这种输入编写函数，如何解析这种输入？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T09:36:20.890

`Maybe a`类型有模式`Just a`和`Nothing`。`Either a b`类型有模式`Left a`和`Right b`。因此类型的值`Maybe (Either (Int, String) String)`可以匹配以下模式：

*   `Nothing`
*   `Just (Left (x,y))`哪里`x`是一个`Int`并且`y`是一个`String`
*   `Just (Right z)`哪里`z`是`String`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T09:36:26.837

```
f :: Maybe (Either (Int, String) String) -> <SOMETHING>
f x = case x of
    Just (Left (i, s)) -> <...>
    Just (Right s) -> <...>
    Nothing -> <...> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T09:38:12.167

```
matchme Nothing = "Nothing"
matchme (Just (Left (x,y)) = "Left " ++ show x ++ " " + y
matchme (Just (Right z)) = "Right " ++ z 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T10:33:29.073

也可以使用`maybe`and`either`函数，如下所示：

```
matchit = maybe nothing (left `either` right)
  where
      nothing = {- value for the nothing case -}
      left (x,y) = {- code for the (Just (Left (x,y)) case -}
      right z = {- code for the (Just (Right z)) case -} 
```

# javascript - 更改未触发功能的 Javascript

> ID：14704139
> 
> 赞同：0
> 
> 时间：2013-02-05T09:32:54.830
> 
> 标签：javascript, html

我有以下 Javascript 函数：

```
function showRSS(str, year, month, day) {
    if (str.length == 0) {
        document.getElementById("rssOutput").innerHTML = "";
        return;
    }
    if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else { // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById("rssOutput").innerHTML = xmlhttp.responseText;
        }
    }

    xmlhttp.open("GET", "domain.com/script.php?days=" + str + "&year=" + year + "&month=" + month + "&day=" + day, true);

    xmlhttp.send();
} 
```

以及以下选择字段（下拉菜单），但是当其中的值发生更改时，不会触发该功能：

```
<div id="calendar-container">

<input type="text" onchange="checkAge( this );" onkeypress="return isNumberKey(event)" alt="Test" value="" onkeyup="showRSS(this.value, document.getElementById('yearSel').value, document.getElementById('monthSel').value, document.getElementById('daySel').value)" name="nights" id="field2">

    <select id="monthSel" name="monthSel"
    onchange="showRSS(document.getElementById('field2').value, document.getElementById('yearSel').value, document.getElementById('monthSel').value, document.getElementById('daySel').value)">
        <option value="0">January</option>
        <option value="1">February</option>
        <option value="2">March</option>
        <option value="3">April</option>
    </select>
    <select id="daySel" name="daySel" 
    onchange="showRSS(document.getElementById('field2').value, document.getElementById('yearSel').value, document.getElementById('monthSel').value, document.getElementById('daySel').value)">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
    </select>
</div> 
```

任何人都知道为什么没有触发该功能的解决方案？

# java - 通过 Java 调用非托管 C++

> ID：14704143
> 
> 赞同：2
> 
> 时间：2013-02-05T09:33:04.670
> 
> 标签：java, c++, java-native-interface

我需要一个 Java 应用程序来调用非托管 C++。我将 MSVCR90.dll 从 Visual Studio 2008 redist 路径手动复制到 vmware 的 Windows Server Datacenter。

这是我得到的错误：

> Java 运行时环境检测到一个致命错误：
> 
> ```
>  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x73b4ae7a, pid=1108, tid=2272
> 
>  JRE version: 6.0_38-b05
>  Java VM: Java HotSpot(TM) Client VM (20.13-b02 mixed mode, sharing windows-x86 )
>  Problematic frame:
>  C  [MSVCR90.dll+0x3ae7a]
> 
>  An error report file with more information is saved as:
>  ...\hs_err_pid1108.log
> 
>  If you would like to submit a bug report, please visit:
>  http://java.sun.com/webapps/bugreport/crash.jsp
>  The crash happened outside the Java Virtual Machine in native code.
>  See problematic frame for where to report the bug. 
> ```

这是 C++ 代码：

```
 #include "stdafx.h"

 #include <stdio.h>

 #include "CCCheckString.h"

 #include <vector>

 #include <String>

 using namespace std;
 #include "jobHandler.h"

JNIEXPORT jbolean JNICALL Java_CCCheckString_Login
  (JNIEnv *env, jobject object, jstring host, jstring UserName, jstring Domain, jstring Password)
{
    bool result;

    jobHandler *handler = new jobHandler(); 

     const char *hostStr = (env)->GetStringUTFChars(host, NULL);
     string hostS(hostStr);
     const char *UserNameStr = (env)->GetStringUTFChars(UserName, NULL);
     string UserNameS(UserNameStr);
     const char *DomainStr = (env)->GetStringUTFChars(Domain, NULL);
     string DomainS(DomainStr);
     const char *PasswordStr = (env)->GetStringUTFChars(Password, NULL);
     string PasswordS(PasswordStr); 

         //if comment this line everthing is okey 
     **result = handler->Login(hostS,UserNameS,DomainS,PasswordS);**

    (env)->ReleaseStringUTFChars(host, NULL);
    (env)->ReleaseStringUTFChars(UserName, NULL);
    (env)->ReleaseStringUTFChars(Domain, NULL);
    (env)->ReleaseStringUTFChars(Password, NULL);

    delete handler;

    return result;

} 
```

下面是Java中的处理代码：

```
CCCheckString ccCheckString = new CCCheckString();

 result=ccCheckString.Login("xxx", "xxx", "xx", "xxx"); 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:03:21.533

**我解决了**。

问题是 Login() 接受 std::string 但我们不能发送它

我们重新组织我们的 Login() 并且它必须采用 const char []

前任：

```
bool ClassName::Login(std::string host,std::string userName,std::string userDomain,std::string userPassword)
{ //Orginal Code Here ....}

bool ClassName::Login(const char host[],const char userName[],const char userDomain[],const char userPassword[])
{
std::string strHost(host);
std::string strUserName(userName);
std::string strUserDomain(userDomain);
std::string strUserPassword(userPassword);
return Login(strHost,strUserName,strUserDomain,strUserPassword);

} 
```

一切都很好。

# angularjs - 如何使用 ng-repeat 迭代 AngularJS 中的地图条目

> ID：14704147
> 
> 赞同：69
> 
> 时间：2013-02-05T09:33:22.617
> 
> 标签：angularjs

您将如何迭代 map 中的条目以便可以打印条目键和值？例如，我想做这样的事情：

```
<ul>
    <li ng-repeat='mapEntry in {"First Name":"John", "Last Name":"Smith"}'>
        <span>Key: {{mapEntry.key}}, value: {{mapEntry.value}}</span>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-02-05T09:33:22.617

从[文档](https://docs.angularjs.org/api/ng/directive/ngRepeat#ngRepeat-arguments)中，我发现这种语法有效：

```
<ul>
    <li ng-repeat='(key, value) in {"First Name":"John", "Last Name":"Smith"}'>
        <span>Key: {{key}}, value: {{value}}</span>
    </li>
</ul> 
```

# html - 页脚放置，不是在窗口底部，而是在内容的底部

> ID：14704152
> 
> 赞同：0
> 
> 时间：2013-02-05T09:33:34.353
> 
> 标签：html, css, footer

我曾经得到这个模板，它的页脚的css是这样的

```
footer{
position: absolute;
bottom: -3em;
left: 0;
right: 0;
font-size: 12px;
text-align: center;
text-shadow: 1px 1px 1px rgba(0, 0, 0, .8);
color: rgb(160, 160, 160);
} 
```

我正在为动态内容使用 php，但是，每次我的内容（包含在 div 中，就在页脚之前）发生变化时，随着它的长度（高度）发生变化，这个页脚突然改变了它的位置并突然放置在顶部附近（最高网页上的 div) div。

我想知道如何让这个页脚留在页面底部，我正在寻找一个，但我刚刚找到 {postition:fixed;}，我打算将我的页脚“作为最后一个内容，在底部”而不是“留在屏幕/窗口的底部”..

谁能帮忙？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:53:55.923

如果您的 CODE 像爆炸一样，那么您就可以开始了

**HTML**

```
<div class="wrapper">
    <div class="footer">Lorem Ipsum</div>
</div> 
```

**css**

```
.wrapper{
    position:relative; background:grey;
    height:200px    
}
.footer{
position: absolute;
bottom: -3em;
left: 0;
right: 0;
font-size: 12px;
text-align: center;
text-shadow: 1px 1px 1px rgba(0, 0, 0, .8);
color: rgb(160, 160, 160);
} 
```

**[演示](http://jsfiddle.net/xbc4k/)**

更改`wrapper`高度以查看差异

# c - Linux 内核 - 内部加密 API

> ID：14704153
> 
> 赞同：1
> 
> 时间：2013-02-05T09:33:36.653
> 
> 标签：c, linux-kernel, cryptography, kernel

由于我将使用 Linux 的内置加密 API 用于不同的目的，因此我一直在仔细阅读源代码。
在试图了解发生了什么时，我对代码的*实例处理*部分感到震惊。

代码是 C，不过这部分显然是面向对象的。因此，当*用户*需要执行某种加密时，它会要求分配*转换*实例，这将涉及在特定加密模式下使用特定算法。这对（*算法*，*模式*）将在加密 API 中以这种方式处理：

1.  “纯”算法存储在一个`struct crypto_alg`结构中。
2.  模式是通过 a 定义的`struct crypto_template`，它说明了如何初始化特定的`struct crypto_instance`

以下是结构的定义`crypto_instance`和`crypto_spawn`

```
struct crypto_instance {
    struct crypto_alg alg;
    /*
     * The alg struct will be filled according to the template 'alloc' method
     */
    struct crypto_template *tmpl;
    struct hlist_node list;

    void *__ctx[] CRYPTO_MINALIGN_ATTR;
};

struct crypto_spawn {
    struct list_head list; // Embedded list_head to list the spawns
    struct crypto_alg *alg; // Ptr to the underlying algorithm
    struct crypto_instance *inst;
    const struct crypto_type *frontend;
    u32 mask;
} 
```

然后，对我来说，它看起来像是一种层次结构：在`crypto_spawn`这里管理由 a 定义的加密模式`crypto_instance`和由 a 定义的*纯*加密算法的组合`crypto_alg`。在模型对象方面，我们可以看到`crypto_instance`继承`crypto_alg`，并且在给定算法上考虑“级联”模板是完全合理的。

我不明白的是为什么`crypto_spawn`和`crypto_instance`结构没有合并在一起。当我遇到实例分配代码时，这个问题让我更加震惊：

```
struct crypto_instance *crypto_alloc_instance(const char *name,
                                struct crypto_alg *alg)
{
    struct crypto_instance *inst;
    struct crypto_spawn *spawn;
    int err;

    inst = crypto_alloc_instance2(name, alg, 0);
    if (IS_ERR(inst))
        goto out;

    spawn = crypto_instance_ctx(inst);
    /*
     * This line expands to :
     * spawn = inst->__ctx;
     */
    err = crypto_init_spawn(spawn, alg, inst,
                CRYPTO_ALG_TYPE_MASK | CRYPTO_ALG_ASYNC);

    if (err)
        goto err_free_inst;

    return inst;

err_free_inst:
    kfree(inst);
    inst = ERR_PTR(err);

out:
    return inst;
} 
```

`crypto_alloc_instance2`只是分配物理内存来保存结构并填充结构的`inst->alg`名称字段：

```
void *crypto_alloc_instance2(const char *name, struct crypto_alg *alg,
                        unsigned int head)
{
    struct crypto_instance *inst;
    char *p;
    int err;

    p = kzalloc(head + sizeof(*inst) + sizeof(struct crypto_spawn),
                GFP_KERNEL);
    if (!p)
        return ERR_PTR(-ENOMEM);

    inst = (void *)(p + head);
    /* Names editing + error checking ... */
    return p;
} 
```

如您所见，spawn 是“物理上”绑定到实例的，那么为什么要单独定义它们。当我试图了解整个事情是如何混合和处理时，我发现它非常令人不安。

目前，我想到的唯一原因是它允许 API使对象的底层算法变得**不透明**`crypto_instance`。但是由于结构的最后一个字节很容易通过`spawn = inst->__ctx`指令给出 spawn，所以它不是很不透明。

回想一下这堆代码和注释，问题是： *是什么原因导致开发人员在实例和生成结构之间进行这种“分离”？*

提前感谢您的任何启发！

**注意**：我添加了标签加密，因为我认为对此标签感兴趣的开发人员可能已经查看了 Linux 内核加密部分。

# ios - 使用块、集合和 ARC 时泄漏

> ID：14704155
> 
> 赞同：4
> 
> 时间：2013-02-05T09:33:40.620
> 
> 标签：ios, objective-c, automatic-ref-counting

我正在尝试使用 ARC 了解为什么此代码会泄漏：

```
- (IBAction)block2:(id)sender {
    NSMutableString *aString = [[NSMutableString alloc] init];

    void (^aBlock)() = ^{
        NSMutableString __unused *anotherString = aString;
    };

    NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithObject:aBlock forKey:@"Key"];

} 
```

如您所见，我在集合中放置了一个块（NSMutableDictionary，但如果我使用 NSDictionary、NSArray ecc...），然后方法返回并释放字典。然后应该释放块。但是，使用仪器，我看到了泄漏

![泄漏](../Images/63e0601ada24a26b98b9d990374f8d3f.png)

![泄漏2](../Images/496bb7182ed0618d63a22386fcc0e180.png)

![泄漏3](../Images/319e2c523b934444e42d9f310c1de361.png)

“只是为了确定”该块没有其他引用，我在方法的末尾添加了这一行：

```
[dict setObject:[NSNull null] forKey:@"Key"]; 
```

同样的结果。

我找到了这篇文章，但答案指向另一个问题： [NSMutableArray 中的块泄漏（ARC）](https://stackoverflow.com/questions/10512793/blocks-inside-nsmutablearray-leaking-arc)

然后，这就是魔法：如果我改变这一行：

```
NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithObject:aBlock forKey:@"Key"]; 
```

至：

```
NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithObject:[aBlock copy] forKey:@"Key"]; 
```

泄漏消失。

我知道，在非 ARC 下，在传递块文字的引用之前，我必须复制它（当声明文字时，它在堆栈上，所以我需要在传递到函数范围之外之前将它复制到堆已声明）......但使用ARC我不应该关心它。有什么迹象吗？从 5.0 到 6.1 的所有版本都会发生这种情况。

编辑：我做了一些测试，试图了解我是否做错了什么或者是否有一些错误......

第一：我读错了仪器信息吗？我不认为，泄漏是真实的，而不是我的错误。看这张图……执行该方法 20 次后：

![仪器泄漏](../Images/8b0acadace23ce7025172dbe37a72cef.png)

第二：如果我尝试在非弧环境中做同样的事情会发生什么？这增加了一些奇怪的行为：

NON-ARC 环境中的相同功能：

```
- (IBAction)block2:(id)sender {
    NSMutableString *aString = [[NSMutableString alloc] init];

    void (^aBlock)() = ^{
        NSMutableString __unused *anotherString = aString;
    };

    [aString release];

    NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithObject:[[aBlock copy] autorelease] forKey:@"Key"];
} 
```

对于之前的非弧实现，我只对块（不是字符串）有泄漏 将实现更改为在可变字符串声明上使用自动释放解决了泄漏！我不明白为什么，我不确定它是否与主要帖子问题有关

```
// version without leak
- (IBAction)block2:(id)sender {
    NSMutableString *aString = [[[NSMutableString alloc] init] autorelease];

    void (^aBlock)() = ^{
        NSMutableString __unused *anotherString = aString;
    };

    NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithObject:[[aBlock copy] autorelease] forKey:@"Key"];
} 
```

**结论**：

经过各种答案和进一步调查，我明白了一些事情：

1- Apple 文档说，当您将块传递给集合时，您*必须使用 [^{} copy]。*这是因为 ARC 不添加副本本身。如果您不这样做，则集合（数组、字典..）会在堆栈分配对象上发送保留 - 它什么也不做。当方法结束时，块超出范围并变为无效。使用它时，您可能会收到错误的访问权限。但请注意：这不是我的情况，我遇到了不同的问题

2-我遇到的问题不同：该块被过度保留（相反的问题->即使不应该存在该块仍然存在）。为什么？我发现了这一点：在我的示例中，我正在使用此代码

```
void (^aBlock)() = ^{
    NSMutableString __unused *anotherString = aString;
}; 
```

此代码在 NON-ARC 下存储对文字块的引用（aBlock）。该块是在堆栈上分配的，所以如果你 NSLog(@"%p", aBlock) -> 你会看到一个堆栈内存地址

但是，这是“奇怪的”（我在 Apple 文档中没有找到任何指示），如果您在 ARC 和 NSLog aBlock 地址下使用相同的代码，您会看到它现在在 HEAP 上！出于这个原因，行为是不同的（没有错误的访问）

因此，两者都是不正确但不同的行为：

```
// this causes a leak
- (IBAction)block2:(id)sender {
    NSMutableString *aString = [[NSMutableString alloc] init];

    void (^aBlock)() = ^{
        NSMutableString __unused *anotherString = aString;
    };

    NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithObject:aBlock forKey:@"Key"];

}

// this would cause a bad access trying to retrieve the block from the returned dictionary
- (NSMutableDictionary *)block2:(id)sender {
    NSMutableString *aString = [[NSMutableString alloc] init];

    return [NSMutableDictionary dictionaryWithObject:^{
        NSMutableString __unused *anotherString = aString;
    } forKey:@"Key"];

} 
```

3 - 关于我在 NON-ARC 下的最后一次测试，我认为发布位置错误。在使用 copy-autorelease 将块添加到字典之前，我释放了字符串。块自动保留块内引用的变量，但保留消息是在复制时刻发送的，而不是在声明时发送的。*所以，如果我在复制块之前*释放aString ，它的保留计数变为0，然后块向“僵尸”对象发送保留消息（出现意外行为，它可能会泄漏块、崩溃、ecc ecc）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:12:15.950

请参阅此问题以供参考[iOS 5 Blocks ARC bridged cast](https://stackoverflow.com/questions/7723864/ios-5-blocks-arc-bridged-cast)；它展示了 Blocks 和 ARC 的噩梦。

通常，如果您将块分配给超出当前范围的变量，编译器将能够自动将该块复制到堆中。这意味着当你掉出范围时，你仍然有块在附近徘徊。同样，块参数也是如此。编译器知道它需要**复制**这些参数，因此这样做了。

诸如此类的问题`NSArray`是它们通常不需要复制对象来正确保存它；通常他们只保留对象。超出范围的对象是语言的一部分（因此它是复制的），而将其保留在对象中就像`NSArray`是应用程序级别的操作。因此，编译器还不够聪明，无法确定块需要复制（块毕竟是标准的 Obj-C 对象，它认为它需要做的就是保留它）。同样徒劳无功，这就是为什么任何包含块的属性都需要指定`copy`关键字的原因。属性方法的自动合成不知道正在存储块，并且需要在设置时轻推以复制它们。

这说明了为什么当你在你的块上使用时整个事情都有效`- copy`，你正在做编译器应该做的事情，但还不够聪明......Apple甚至在其[过渡到ARC](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)文档中推荐了这种技术，请参阅常见问题解答。

**Bootnote：**如果您想知道我为什么要保留，即使您使用的是 ARC，这就是 ARC 在幕后所做的。内存管理模型仍然和以前一样，但是现在系统有责任根据命名和约定为我们管理它，而以前开发人员有责任正确管理他们的内存。只是对于区块来说，系统无法做到应有的全面管理，因此开发者需要不时介入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T11:49:56.073

出于性能原因，块在堆栈中开始它们的生命。如果它们的生存时间比堆栈周围的时间长，则必须将它们复制到堆中。

在 MRR 中，您必须自己复制。如果您将块向上传递到堆栈（即从方法中返回它），ARC 会自动为您执行此操作。但是如果将一个块向下传递到堆栈中（例如，将其存储在`NSMutableDictionary`or中`NSMutableArray`），您必须自己复制它。

这记录在 Apple 的[Transitioning to ARC](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)文档中，在该文档中搜索“How do blocks work in ARC”。

对于您的非 ARC 示例（正如您在结论中所写的那样），`copy`块的 应该在 release 之前发生`aString`，就像`aString`复制块时保留的那样。否则您的代码将显示未定义的行为，甚至可能崩溃。下面是一些演示非 ARC 问题的代码：

```
NSObject *object = [[NSObject alloc] init];
void (^aBlock)() = ^{
    NSLog(@"%@", object);
};
[object release];
aBlock(); // undefined behavior. Crashes on my iPhone. 
```

# r - 在 ggplot2 中添加自定义图例

> ID：14704163
> 
> 赞同：1
> 
> 时间：2013-02-05T09:33:53.400
> 
> 标签：r, ggplot2

我正在`ggplot2`生成一些`geom_line`我已经从另一个`data.frame`不重要的地块生成的图。但它也包含与`id`以下数据框相同的值。

我有一个名为 df 的数据框：

```
id    X   Y     total
1   3214 6786   10000
2   4530 5470   10000
3   2567 7433   10000
4   1267 8733   10000
5   2456 7544   10000
6   6532 6532   10000
7   5642 4358   10000 
```

我想要做的是创建`custom legend`为特定 id 呈现变量相同时每个for的百分比`X`和百分比。所以基本上对于每个eg( ，在图中绘制百分比)`Y``geom_line``id``geom_line``id=1``id``geom_line`

我尝试使用`geom_text`，但问题是它在一行中打印所有内容，我看不到任何内容。

这怎么能做到？

***编辑***

`olddf`数据框是这样的：

```
id pos X Y Z
1
1.....
1
2
3
4
3 ......
.
. 
```

这是我尝试过的代码

```
for(i in df$id)
{
test = subset(olddf, id==i)
mdata <- melt(test, id=c("pos","id"))
pl = ggplot() + geom_line(data=mdata, aes(x=pos, y=value, color=variable)) + geom_text(data=df, aes(x=6000, y=0.1, label=(X*total)/100), size=5)
} 
```

![在此处输入图像描述](../Images/fbe9960ce9faf2712ddd015b051facee.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:07:47.273

答案（如聊天中所讨论的）非常简单：

更改`geom_text(data = df, ...)`为`geom_text(data = df[df$id == i, ], ...)`

# playframework - 是否可以通过 RequireJS 强制 Play Framework 仅将所有 js 文件编译为一个？

> ID：14704169
> 
> 赞同：7
> 
> 时间：2013-02-05T09:34:12.190
> 
> 标签：playframework, requirejs, playframework-2.1

使用 Play-Framework 2.1(rc4) 和“内置”RequireJS，一切正常，Play 成功压缩（uglify）我在 PROD 中的所有 JS 文件，但我希望它将所有这些文件加入一个 JS 文件.

这可能吗？如果是，该怎么做？是否有使用这些指令制作的 build.js ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:37:39.537

是的，有可能。

您必须`requireJsShim`在 Build.scala 文件中添加。通常， 的价值`requireJsShim`与财产相同`requireJs`。

完成后，所有内容都将编译到一个文件中！

有一个 Play 2.1.0 的示例项目：[https](https://github.com/schleichardt/play-2.1-features/tree/stackoverflow-question-14704169) ://github.com/schleichardt/play-2.1-features/tree/stackoverflow-question-14704169 （它不在 master 中，而是在 stackoverflow-question-14704169 分支中)

播放区

（！表示 JAR 或 ZIP 格式）

和 dist/play-2-1-features-1.0-SNAPSHOT.zip!play-2-1-features-1.0-SNAPSHOT/lib/play-2-1-features_2.10-1.0-SNAPSHOT.jar!public/javascripts -min/main.js 包含所有 JavaScript/CoffeeScript 代码。

# android - Achartengine 可移动折线图

> ID：14704172
> 
> 赞同：3
> 
> 时间：2013-02-05T09:34:13.313
> 
> 标签：android, charts, achartengine

![在此处输入图像描述](../Images/c51ae0ff3a70b5b018e4fdfb480a8d9a.png)我只是用 achartengine 创建了一个新图表，我注意到当我移动图表时，它会越过 x 和 y 轴。有什么办法可以防止图表越过 x 和 y 轴？

我还注意到在 achartengine 附带的演示中发生了这种情况。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:44:54.413

此错误现已在 SVN 中修复。[您可以在此处](https://repository-achartengine.forge.cloudbees.com/snapshot/org/achartengine/achartengine/1.1.0/)下载包含此修复程序的版本。

# tastypie - 使用 sweetpie 进行自定义搜索

> ID：14704173
> 
> 赞同：1
> 
> 时间：2013-02-05T09:34:15.720
> 
> 标签：tastypie

实际上我们有 2 个模型

```
class Event(Basetable):
    title = models.CharField(max_length=150)
    event_description = models.TextField()
    image = ThumbnailerImageField(upload_to=get_eventlogo_path, resize_source=dict(size=(700, 0), crop='smart'),)
    category = models.ManyToManyField("EventCategory")
    venue = models.ForeignKey(Venue,null=True)

class Venue(models.Model):
venue   = models.CharField(max_length=100)
address1 = models.CharField(max_length=200)
address2 = models.CharField(max_length=200,blank=True)
slug = models.CharField(max_length=150,blank=True,null=True)
country = models.ForeignKey(Countries,null=True,blank=True,on_delete=models.SET_NULL)
state = models.ForeignKey(States,null=True,on_delete=models.SET_NULL)
city = models.ForeignKey(City,null=True,on_delete=models.SET_NULL) 
```

美味的代码

```
class EventResource(ModelResource):
venue      = fields.ForeignKey(VenueResource, 'venue')    

class Meta:
    queryset = Event.objects.filter(status='P').order_by('-id').distinct()
    resource_name = 'eventlist'
    filtering = {
        "slug": ('exact', 'startswith',),
        "title": ALL,
    } 
```

我的问题是我需要使用场地中的城市来获取活动结果

ex www.example.com/api/v1/eventlist/?format=json&city="chicago" 但它不会来帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:39:42.840

您必须允许按场地过滤：

```
filtering = { 'venue': ALL_WITH_RELATIONS

               } 
```

该链接将起作用。www.example.com/api/v1/eventlist/?format=json&venue_city_name="chicago " *_*

# c++ - 用于 windows 的 c/c++ 中的 DNS 服务器

> ID：14704174
> 
> 赞同：1
> 
> 时间：2013-02-05T09:34:32.193
> 
> 标签：c++, c, visual-studio, visual-c++, dns

是否有任何可以在 Windows 上使用 Visual Studio 编译的 C/C++ 编写的 DNS 服务器？我找到了许多 DNS 服务器，但它们似乎都只在 Linux 上运行或需要 MinGW 编译器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:55:19.793

[本教程](http://www.wikihow.com/Build-ISC-BIND-DNS-in-Windows)使用 Visual Studio 编译器构建 BIND dns 服务器，但使用的是命令行。它还解释了如何正确编译 OpenSSL，这可能会很痛苦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T09:53:22.073

如果不存在这样的项目，将打算在 MinGW 中构建的项目移植到 Visual Studio 应该不会太困难（尽管很难）。

# php - php循环foreach重复

> ID：14704175
> 
> 赞同：-1
> 
> 时间：2013-02-05T09:34:32.943
> 
> 标签：php, arrays, loops, foreach

我有一个线程表和一个评论表。当我做mysql查询时，一个线程可以有很多评论。由于许多评论，它成为重复线程。如何分组 tid？

我在php中尝试了foreach，但仍然不知道。

```
 Array
(
    [0] => Array
        (
            [tid] => 110
            [title] => This is question
            [vid] => 175
            [yesno] => 1
        )

    [1] => Array
        (
            [tid] => 110
            [title] => This is question
            [vid] => 179
            [yesno] => 0
        )
) 
```

我真的想要这个

```
 Array
(
   [0] => Array
        (
            [tid] => 110
            [title] => This is question

            [0] => Array(
                         [vid] => 175
                         [yesno] => 1
                   )
            [1] => Array(
                         [vid] => 176
                         [yesno] => 0
                   )
        )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:41:46.303

您可以使用类似这样的查询

```
"SELECT ... FROM tablename GROUP BY thread.tid"
         ^ --- Field name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:04:52.287

```
$query='select distinct tid,title from thread order by tid';
$thread_id=mysql_query($query);
while($result=mysql_fetch_assoc($thread_id))
{
   $data[]=$result;
   $query1='select vid,yesno from comments where tid='.$result['tid'];
   $comment=mysql_query($query1);
   while($result1=mysql_fetch_assoc($comment))
   {
      $data['comments'][]=$result1;
   }
}
print_r($data); 
```

# jquery - 如何在 div 中不显示所有 ul,li 标签，除了 li 有一个带有类 html 的标签

> ID：14704176
> 
> 赞同：-1
> 
> 时间：2013-02-05T09:34:33.570
> 
> 标签：jquery

我有一个包含内容的 Div

```
<div id="dv">

<ul><li><a class="html">abcd</a></li></ul>

<ul><li><a class="bold">cdef</a></li></ul>

<ul><li><a class="bold">xyz</a></li></ul>

</div> 
```

我想动态显示第二个和第三个 ul。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T09:37:43.040

您可以找到 div 的所有子项，隐藏它们，然后找到`ul`包含`li`with 类`"html"`并显示`ul`：

```
$("#dv").children('ul').hide().find('li.html').closest('ul').show(); 
```

[实例](http://jsbin.com/iyavuk/1)| [资源](http://jsbin.com/iyavuk/1/edit)

那是做什么的：

*   [`$("#dv")`](http://api.jquery.com/jQuery/#jQuery1)- 找到相关的 div
*   [`.children('ul')`](http://api.jquery.com/children)- 找到它的子`ul`元素
*   [`.hide()`](http://api.jquery.com/hide)- 隐藏它们
*   [`.find('a.html')`](http://api.jquery.com/find)- 在那些s 中查找任何具有类的`a`元素`ul``"html"`
*   [`.closest('ul')`](http://api.jquery.com/closest)- 获取`ul`包含该`a`元素
*   [`.show()`](http://api.jquery.com/show)- 显示它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:42:55.893

我能想到的最简单的是这个

```
$("#dv li a:not(.html)").parent().hide(); 
```

编辑：@ByScripts 建议使用`closest()`而不是`parent()`.

```
$("#dv li a:not(.html)").closest("ul").hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T09:40:56.957

您可以在下面使用`jQuery`

```
$("#dv ul:nth-child(2),#dv ul:nth-child(3)").hide() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:42:07.703

据我了解，您想删除`<li>`with `a`class 'html' 。下面是代码

```
$("#div ul li a.html").hide(function(){
    $(this).parent().hide();    
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T09:48:25.213

基于 xFortyFourx 答案：

```
$("#dv a:not(.html)").closest('ul').hide(); 
```

**编辑：**我认为很多参与者没有阅读标题。OP想要`<ul>`根据元素隐藏`class="html"`。不是解决方案；）`<a>``slice()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T09:37:24.070

这是你想要的吗？

```
$("#dv ul").hide(); // hide all divs
$("#dv a.html").closest("ul").show(); // show the div that contains a.html 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-05T09:38:57.970

如果您想显示除第一个 ul 之外的所有 ul，请尝试以下代码：

```
$("#dv ul").css('display','none');
if($("#dv ul").hasClass('html')){
$(".html").closest('ul').('display','block');
 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-05T09:39:18.623

如果需要隐藏第二个和第三个，我建议使用[slice](http://api.jquery.com/slice/)`ul`。

```
$('#dv ul').slice(1).hide(); 
```

# c# - 通过单击两个按钮从.aspx网页获取数据c#.net

> ID：14704180
> 
> 赞同：0
> 
> 时间：2013-02-05T09:34:38.447
> 
> 标签：c#, asp.net, forms, http-post

我是编程新手。我有一个项目，我必须从网站获取数据（我将在下面发布网站）。但碰巧我首先必须选择一个日期并按下“开始”按钮，然后单击另一个按钮/链接“在 Excel 中查看”以下载此数据。在选择所需日期后，我找不到首先单击“开始”按钮，然后通过我的 c# 代码单击第二个按钮“在 Excel 中查看”的方法。任何帮助将不胜感激。

PS：你可以自己查看链接[http://www.mcxindia.com/sitepages/BhavCopyDateWiseArchive.aspx](http://www.mcxindia.com/sitepages/BhavCopyDateWiseArchive.aspx)

```
private void Form1_Load(object sender, EventArgs e)
    {
        WebClient webClient = new WebClient();

        byte[] b = webClient.DownloadData("http://www.mcxindia.com/sitepages/BhavCopyDatewise.aspx");

        string s = System.Text.Encoding.UTF8.GetString(b);

        var __EVENTVALIDATION = ExtractVariable(s, "__EVENTVALIDATION");

        //__EVENTVALIDATION.Dump();

        var forms = new NameValueCollection();

        forms["__EVENTTARGET"] = "btnLink_Excel";
        forms["__EVENTARGUMENT"] = "";
        forms["__VIEWSTATE"] = ExtractVariable(s, "__VIEWSTATE");
        forms["mTbdate"] = "01%2F15%2F2013";
        forms["__EVENTVALIDATION"] = __EVENTVALIDATION;

        webClient.Headers.Set(HttpRequestHeader.ContentType, "application/x-www-form-urlencoded");

        var responseData = webClient.UploadValues(@"http://www.mcxindia.com/sitepages/BhavCopyDatewise.aspx", "POST", forms); 
        System.IO.File.WriteAllBytes(@"c:\11152011.csv", responseData);
    }

    private static string ExtractVariable(string s, string valueName)
    {   
        string tokenStart = valueName + "\" value=\"";
        string tokenEnd = "\" />";

        int start = s.IndexOf(tokenStart) + tokenStart.Length;
        int length = s.IndexOf(tokenEnd, start) - start;
        return s.Substring(start, length);
    } 
```

上面的代码只为我提供了最后一个可用日期的文件。我无法在我想要的日期得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:44:17.300

似乎您需要使用一个发布数据（日期）发出 HTTP Post 请求。这应该很容易。看看这个问题，看看它是否对你有帮助。 [通过 ASP.net 发送 HTTP Post 请求](https://stackoverflow.com/questions/10797995/send-http-post-request-through-asp-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:23:22.057

我找到了这个问题的解决方案。请看[这里](https://stackoverflow.com/questions/8644433/how-to-click-a-button-in-an-webpage/14729753#14729753 "解决方案")

# grid - 我怎样才能拥有可以在 GXT 3 中充当容器的单元格网格？

> ID：14704183
> 
> 赞同：0
> 
> 时间：2013-02-05T09:34:51.020
> 
> 标签：grid, cell, gxt, custom-cell

我怎样才能拥有可以充当 GXT 3 中的容器的单元格网格，以便它们可以将任何对象从其他容器保存到任何小部件。

我正在开发具有**行扩展器网格**的小型应用程序。GXT 演示有很好的例子。

从类层次结构中很明显，Grid 单元格是允许使用`render()`方法的 Cell 接口，因此我可以添加任何可以在其中显示的 html 代码。

但是我想创建一个单元格小部件，它可以具有`add()`允许将其他小部件（例如**ContentPanel** ）添加到任何其他小部件的方法

有什么建议吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-12-24T12:00:41.290

这是我写的代码。不是一个完美的，但工作。

```
public class MyRowExpander extends
    RowExpander<GridModel> {

public MyRowExpander (
        IdentityValueProvider<GridModel> valueProvider,
        AbstractCell<GridModel> contentCell) {
    super(valueProvider, contentCell);

}
@Override
protected boolean beforeExpand(GridModel model, Element body,
        XElement row, int rowIndex) {
    super.beforeExpand(model, body, row, rowIndex);
    BeforeExpandItemEvent<GridModel> e = new BeforeExpandItemEvent<GridModel>(
            model);
    if (!e.isCancelled()) {
        if (body.hasChildNodes())
            body.removeChild(body.getChild(0));
        body.setInnerText("");
        Widget customWidget = getWidget(model);
        body.appendChild(customWidget.getElement());
        ComponentHelper.doAttach(customWidget);
        return true;
    }
    return false;
} 
```

# sql - 如何从 SQL Server 中的日期获取月份编号（不是月份名称）？

> ID：14704186
> 
> 赞同：32
> 
> 时间：2013-02-05T09:34:56.337
> 
> 标签：sql, sql-server, sql-server-2008

如何在sql中获取月份数？我使用以下代码，但它返回月份名称。

```
SELECT DATENAME(mm, GETDATE()) 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-05T09:39:22.527

使用带有 m 扩展名的 datepart 函数。

```
SELECT DATEPART(m, getdate()) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-05T09:38:51.273

使用月份功能 -`SELECT MONTH(GETDATE())`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-05T09:38:33.660

使用[日期部分](http://msdn.microsoft.com/en-us/library/ms174420.aspx)：

```
DATEPART(mm,getdate()); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-05T09:36:53.303

你想要[`DATEPART`](http://msdn.microsoft.com/en-us/library/ms174420.aspx)：

```
select datepart(mm, getdate()) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-01-08T16:52:45.940

您也可以使用它来填充月份编号

```
SELECT RIGHT('00' + RTRIM( CAST( DATEPART( MONTH, GETDATE() ) AS varchar(2)) ) , 2) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-05T09:36:57.487

试试下面的：

```
SELECT DATEPART(mm,getdate()) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-27T11:14:58.373

在 Jan-Sep 的情况下，这将返回两个字符：

```
SELECT CASE WHEN LEN(MONTH(GETDATE())) = 1 THEN '0' + CAST(MONTH(GETDATE()) AS VARCHAR(2)) 
WHEN LEN(MONTH(GETDATE())) = 2 THEN CAST(MONTH(GETDATE()) AS VARCHAR(2)) END 
```

# php - 防止 XSS - 用户提供部分 url

> ID：14704187
> 
> 赞同：0
> 
> 时间：2013-02-05T09:34:58.590
> 
> 标签：php, mysql, xss

我明白为什么下面这样不好，并且必须使用 htmlspecialchars 来防止某些 xss 漏洞：

```
<?php $url = '<plaintext>';
echo $url;?> 
```

像这样：

```
<?php $url = '<plaintext>';
htmlspecialchars($url, ENT_QUOTES, "UTF-8");
echo $url;?> 
```

在我的数据库中，我只存储用户提供的文件名。（我相信这会随着我对这个主题的了解更多而改变）

我想知道的是，如果下面的内容实际上是在做任何事情来防止 XSS？与之前的案例相比，它的漏洞是否更少？

我尝试过注入带有和不带有 htmlspecialchars 的脚本标签，在这两种情况下似乎都没有做任何事情。脚本代码不会执行。

它安全吗？htmlspecialchars 是适合这项工作的工具吗？我怎样才能让它变得更好？

$sql['image'] 是从我的数据库中获取的，下面是显示图像的代码。

```
<?php $url = "/images/" . $sql['image'] . ".jpg";
$url = htmlspecialchars($url, ENT_QUOTES, "UTF-8");?>
<img src="<?php echo $url;?>"> 
```

输出：

```
<img src="/images/test.jpg"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:48:23.657

原则上，您永远不能信任任何用户输入。如果`$sql['image']`将由用户直接或间接提供，那么是否将常量添加到该字符串的开头和结尾都没有关系。无论哪种方式，您都必须依赖`htmlspecialchars()`不包含任何允许注入脚本的错误。

在这种情况下，要真正提高安全性，您必须采取更严厉的措施。一种流行的方法是自己简单地分配文件名，例如通过对文件的内容进行散列并使用该散列而不是原始文件名来存储文件。`md5()`并且`sha1()`往往会派上用场。

此外，假设用户提供了您要存储其文件名的图像，您必须确保这些图像也不能用于完成工作。例如，用户可能会上传带有嵌入脚本的 SVG 而不是 JPEG，从而可能完全避免对文件名本身进行任何验证或修改。

# objective-c - 使用块发送 AsynchronousRequest - 正确的方式

> ID：14704194
> 
> 赞同：0
> 
> 时间：2013-02-05T09:35:34.480
> 
> 标签：objective-c

在我的应用程序中，我正在向服务器发送请求。该请求位于其他一些名为 的类中`requestClass`，并且正在从主视图类中调用。（我正在使用 cocos2d）。

我的问题是，我将如何通知主班（来自`requestClass`）操作已完成？当它完成请求时，它的回调在它自己的 class( `requestClass`) 中，并且 NSLog 在`requestClass`.

我不认为`NSNotification`是正确的方法

requestClass 就像：

```
[NSURLConnection
     sendAsynchronousRequest:request
     queue:[[NSOperationQueue alloc] init]
     completionHandler:^(NSURLResponse *response,
                         NSData *data,
                         NSError *error)
     {

         if ([data length] >0 && error == nil)
         {
             **// HOW SHOULD I INFORM THE CLASS THAT CALL ME NOW ???**

         }
         else if ([data length] == 0 && error == nil)
         {
             NSLog(@"Nothing ");
         }
         else if (error != nil){
             NSLog(@"Error = %@", error);
         }

     }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:16:07.347

好的，写一个委托协议......

假设您的连接文件名为 MyRequestClass。

在 MyRequestClass.h...

```
@protocol MyRequestClassDelegate <NSObject>

- (void)requestDidFinishWithDictionary:(NSDictionary*)dictionary;

//in reality you would pass the relevant data from the request back to the delegate.

@end

@interface MyRequestClass : NSObject // or whatever it is

@property (nonatomic, weak) id <MyRequestClassDelegate> delegate;

@end 
```

然后在 MyRequestClass.h

```
[NSURLConnection
     sendAsynchronousRequest:request
     queue:[[NSOperationQueue alloc] init]
     completionHandler:^(NSURLResponse *response,
                         NSData *data,
                         NSError *error)
     {

         if ([data length] >0 && error == nil)
         {
             [self.delegate requestDidFinishWithDictionary:someDictionary];

             //you don't know what the delegate is but you know it has this method
             //as it is defined in your protocol.
         }
         else if ([data length] == 0 && error == nil)
         {
             NSLog(@"Nothing ");
         }
         else if (error != nil){
             NSLog(@"Error = %@", error);
         }

     }]; 
```

然后在任何你想要的班级......

在 SomeOtherClass.h

```
#import "MyRequestClass.h"

@interface SomeOtherClass : UIViewController <MyRequestClassDelegate>

blah... 
```

在 someOtherClass.m

```
MyRequestClass *requestClass = [[MyRequestClass alloc] init];

requestClass.delegate = self;

[requestClass startRequest]; 
```

...并确保也编写委托函数...

```
- (void)requestDidFinishWithDictionary:(NSDictionary*)dictionary
{
    //do something with the dictionary that was passed back from the URL request class
} 
```

# asp.net-mvc-3 - 关于在 mvc3 中使用缓存

> ID：14704198
> 
> 赞同：2
> 
> 时间：2013-02-05T09:35:45.230
> 
> 标签：asp.net-mvc-3, caching

我正在使用 MVC3 并从数据库中获取国家表并存储在缓存中。它第一次从缓存中获取数据，但是当我刷新页面时，它只给我数据表模式。它只给我字段 countryid、countryname、countrycode。但它不给我数据。

```
 DataTable dt_Country = (DataTable)HttpContext.Current.Cache["Countries"];
        if (dt_Country == null)
        {
            DataTable dt_State1 = new DataTable();
            SqlConnection con = new SqlConnection(Common.ConnectionString);
            con.Open();
            SqlCommand cmd = new SqlCommand("ConstantsCountriesSelectAll", con);
            SqlDataAdapter ada = new SqlDataAdapter(cmd);
            ada.Fill(dt_State1);

            HttpContext.Current.Cache["Countries"] = dt_State1;
            dt_Country = (DataTable)HttpContext.Current.Cache["Countries"];
        }
        //dt_Country = (DataTable)HttpContext.Current.Cache["Countries"];
        return dt_Country; 
```

# sql - 如何将此不可扩展的查询转换为动态列的窗口函数？

> ID：14704205
> 
> 赞同：0
> 
> 时间：2013-02-05T09:36:15.740
> 
> 标签：sql, postgresql, rollup

我有一个查询，用于为客户生成总订单金额，并将它们按月分组到代表总订单金额的另一列旁边。

这是架构：

```
temp=# \d+ customers;
                          Table "pg_temp_2.customers"
   Column   |            Type             | Modifiers | Storage  | Description 
------------+-----------------------------+-----------+----------+-------------
 id         | integer                     | not null  | plain    | 
 created_at | timestamp without time zone |           | plain    | 
 name       | text                        |           | extended | 
Indexes:
    "customers_pkey" PRIMARY KEY, btree (id)
Referenced by:
    TABLE "orders" CONSTRAINT "orders_customer_id_fkey" FOREIGN KEY (customer_id) REFERENCES customers(id)
Has OIDs: no

                             Table "pg_temp_2.orders"
   Column    |            Type             |   Modifiers   | Storage | Description 
-------------+-----------------------------+---------------+---------+-------------
 id          | integer                     | not null      | plain   | 
 created_at  | timestamp without time zone | default now() | plain   | 
 customer_id | integer                     |               | plain   | 
 amount      | integer                     |               | plain   | 
Indexes:
    "orders_pkey" PRIMARY KEY, btree (id)
Foreign-key constraints:
    "orders_customer_id_fkey" FOREIGN KEY (customer_id) REFERENCES customers(id)
Has OIDs: no 
```

为方便起见，我添加了 create table 语句：

```
create temporary table customers ( id integer primary key, created_at timestamp without time zone, name text); 

create temporary table orders ( id integer primary key, created_at timestamp without time zone, customer_id integer references customers(id)); 
```

这是我正在使用的查询：

```
SELECT
  c.name,
  sum(o.amount),
  CAST(SUM(
   CASE
        WHEN date_trunc('month', o.created_at) BETWEEN '2012-10-01' AND ('2012-11-01'::date - '1 day'::interval)
        THEN o.amount
        ELSE 0
   END
   ) / 100.0 AS MONEY) october2012,
   CAST(SUM(
   CASE
        WHEN date_trunc('month', o.created_at) BETWEEN '2012-11-01' AND ('2012-12-01'::date - '1 day'::interval)
        THEN o.amount
        ELSE 0
   END
   ) / 100.0 AS MONEY) as november2012
FROM orders o
INNER JOIN customers c ON o.customer_id = c.id
WHERE o.created_at >= '01 October 2012'
  AND o.created_At < '01 December 2012'
GROUP BY
 c.name
ORDER BY
  october2012 desc; 
```

我怎样才能摆脱那个丑陋的案例陈述？*必须*有一种更优雅的方式在某个时间片内汇总这些查询。我尝试使用窗口函数，但失败得很惨。任何援助将不胜感激！

我正在使用 postgresql 9.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:36:55.603

这并不简单，但更具可扩展性：

```
select *
from crosstab($$
    with orders as (
        select
            customer_id,
            date_trunc('month', created_at) created_at,
            cast(amount / 100.0 as money) amount
        from orders
        where
            created_at >= '2012-10-01'
            and created_at < '2012-12-01'
    ), months as (
        select
            c.name,
            to_char(o.created_at, 'YYYY-MM') created_at,
            sum(o.amount) amount
        from
            orders o
            inner join
            customers c on c.id = o.customer_id
        group by 1, 2
    )
    select name, created_at, amount
    from months
    union all
    select name, 'Total', sum(amount)
    from months
    group by 1, 2
    order by 1, 2
    $$, $$
    select distinct to_char(created_at, 'YYYY-MM')
    from orders
    where
        created_at >= '2012-10-01'
        and created_at < '2012-12-01'
    union select 'Total'
    order by 1
    $$
) as (name text, "2012-10" money, "2012-11" money, "Total" money) 
```

# eclipse - vm参数中的eclipse斜线

> ID：14704216
> 
> 赞同：0
> 
> 时间：2013-02-05T09:36:29.230
> 
> 标签：eclipse, jvm-arguments, slash

我在 Java 6 和 Java 7 上运行了相同的代码，但在 Java 7 中它不能像我预期的那样工作。

我在 VM 参数中写道：

```
-Dmy.root=D:\mvobs\S.4.8.600_view\ 
```

当我使用 Java 6 运行它时，一切正常：

```
my.root=[D:\mvobs\S.4.8.600_view\\] 
```

但在 Java 7 中，我得到了：

```
my.root=[D:\mvobs\S.4.8.600_view] 
```

最后一个斜线去哪儿了？

我还将 eclipse 3.4.0 移至 Juno（为了使用 Java 7）

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:40:58.887

我不确定它去了哪里，但无论如何你可能不应该依赖它。

要构建路径，请使用`new File(String, String)`or`new File(File, String)`因为这些方法可以在每个操作系统上正确使用。所以要打开一个相对于的文件`my.root`：

```
File myRoot = new File( System.getProperty( "my.root" ) );
File file = new File( myRoot, "filename" ); 
```

# android - Proguard 的 Admob 问题

> ID：14704221
> 
> 赞同：0
> 
> 时间：2013-02-05T09:36:42.537
> 
> 标签：android, crash, runtime, admob, proguard

使用 proguard 运行应用程序时发生崩溃。这发生在 Admob 上。我正在使用 Admob 6。

Stacktrace：java.lang.NoSuchMethodError：com.google.ads.internal.da 上的 com.google.ads.internal.AdWebView.setWebViewClient（SourceFile:311） com.google.ads.internal.d.（SourceFile:285）在 com.google.ads.AdView.a(SourceFile:538) 在 com.google.ads.AdView.(SourceFile:91)

我也没有运气将这些添加到我的 proguard.cfg 中：

# 阿德莫布

```
-dontwarn com.google.ads.** 

-keep public class com.google.ads.** {*;}

-keep public class com.google.gson.** {
    public protected *;
}

-keep public class com.google.ads.internal.** {*;} 
-keep public class com.google.ads.internal.AdWebView.** {*;} 
-keep public class com.google.ads.internal.state.AdState {*;} 
-keep public class com.google.ads.mediation.** {*;} 
-keep public class com.google.ads.mediation.adfonic.** {*;} 
-keep public class com.google.ads.mediation.admob.** {*;} 
-keep public class com.google.ads.mediation.adfonic.util.** {*;} 
-keep public class com.google.ads.mediation.customevent.** {*;} 
-keep public class com.google.ads.searchads.** {*;} 
-keep public class com.google.ads.util.** {*;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:49:55.143

好的，我找到了原因。打包时，我在项目中留下了自己的 WebViewClient 版本。一旦我删除它，问题就消失了。

# ios - 推送一个新的 ViewController 并从 NavigationStack 中弹出最后一个

> ID：14704222
> 
> 赞同：1
> 
> 时间：2013-02-05T09:36:43.993
> 
> 标签：ios, cocoa-touch, uinavigationcontroller

嘿伙计们，我想将一个新控制器推送到导航堆栈上，然后删除我从中推送的控制器。这是我的代码：

```
WishDetailViewController *detailView = [self.storyboard instantiateViewControllerWithIdentifier:@"WishDetailView"];
                                             detailView.transferWishID = [NSNumber numberWithFloat:[[response objectForKey:@"id"]floatValue]];
                                             [self.navigationController pushViewController:detailView animated:YES];
                                             [self.navigationController popViewControllerAnimated:NO]; 
```

一切正常，但我在控制台内收到了这条消息：

```
2013-02-05 10:32:42.029 BWMApp[1444:1a603] nested pop animation can result in corrupted navigation bar
2013-02-05 10:32:42.392 BWMApp[1444:1a603] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted. 
```

那么我做错了什么，如何防止我的应用程序抛出此错误消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:43:06.287

您可以使用 setViewController。这个例子删除所有并插入其他，但给你基本的想法:)

```
NSMutableArray *viewCons = [[[self navigationController]viewControllers] mutableCopy];
[viewCons removeAllObjects];
[viewCons addObject:portraitTemp];
[viewCons addObject:self];

[[self navigationController] setViewControllers:viewCons]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:43:17.460

无需弹出“旧”视图控制器。navigationController 自动创建一个后退按钮。如果您从堆栈中弹出视图控制器，则没有视图控制器可以“跳”回来。这是控制台内出现消息的原因。导航控制器无法正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T07:08:29.270

```
WishDetailViewController *detailView = [self.storyboard instantiateViewControllerWithIdentifier:@"WishDetailView"];
detailView.transferWishID = [NSNumber numberWithFloat:[[response objectForKey:@"id"]floatValue]];
[self.navigationController popViewControllerAnimated:NO];
[self.navigationController pushViewController:detailView animated:YES]; 
```

# java - 读取 .bmp 图像并从图像的第 10 个字节中减去 10 并在 Java 中重新创建图像

> ID：14704238
> 
> 赞同：0
> 
> 时间：2013-02-05T09:37:31.747
> 
> 标签：java, image, image-processing, bmp, steganography

我正在创建一个应用程序，它将从 .bmp 图像中读取图像字节/像素/数据并将其存储在 byte/char/int/etc 数组中。

现在，从这个数组中，我想从数组第 10 个索引中存储的数据中减去 10（十进制）。

我能够成功地将图像信息存储在创建的数组中。但是当我尝试将数组信息写回 .bmp 图像时，创建的图像是不可见的。

这是我试图这样做的一段代码。

***在这段代码中，我不是从数组的第 10 个索引中减去 10***。

```
public class Test1 {

    public static void main(String[] args) throws IOException{
        File inputFile = new File("d://test.bmp");
        FileReader inputStream = new FileReader("d://test.bmp");
        FileOutputStream outputStream = new FileOutputStream("d://test1.bmp");
        /*
         * Create byte array large enough to hold the content of the file.
         * Use File.length to determine size of the file in bytes.
         */
        char fileContent[] = new char[(int)inputFile.length()];

        for(int i = 0; i < (int)inputFile.length(); i++){
            fileContent[i] = (char) inputStream.read();
        }

        for(int i = 0; i < (int)inputFile.length(); i++){
            outputStream.write(fileContent[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:47:47.257

代替 char[]，使用 byte[]

如果您的代码有效，这是一个修改版本：

```
public class Test {

public static void main(String[] args) throws IOException {
    File inputFile = new File("someinputfile.bmp");
    FileOutputStream outputStream = new FileOutputStream("outputfile.bmp");
    /*
     * Create byte array large enough to hold the content of the file.
     * Use File.length to determine size of the file in bytes.
     */
    byte fileContent[] = new byte[(int)inputFile.length()];

    new FileInputStream(inputFile).read(fileContent);

    for(int i = 0; i < (int)inputFile.length(); i++){
        outputStream.write(fileContent[i]);
    }

    outputStream.close();
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:23:03.417

要使现有代码正常工作，您应该将 FileReader 替换为 FileInputStream。根据 FileReader javadoc：

> FileReader 用于读取字符流。要读取原始字节流，请考虑使用 FileInputStream。

如下修改您的示例

```
 public static void main(String[] args) throws IOException
 {
File inputFile = new File("d://test.bmp");
FileInputStream inputStream = new FileInputStream("d://test.bmp");
FileOutputStream outputStream = new FileOutputStream("d://test1.bmp");
/*
 * Create byte array large enough to hold the content of the file.
 * Use File.length to determine size of the file in bytes.
 */
byte fileContent[] = new byte[(int)inputFile.length()];

for(int i = 0; i < (int)inputFile.length(); i++){
    fileContent[i] =  (byte) inputStream.read();
}

inputStream.close();
for(int i = 0; i < (int)inputFile.length(); i++){
    outputStream.write(fileContent[i]);
}

outputStream.flush();
outputStream.close(); 
```

}

这项工作为我创建了原始图像的副本。

尽管如上面的评论中所述，这可能不是您要实现的目标的正确方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:33:16.917

其他人指出您的代码中有错误（使用`char`而不是`byte`主要使用），但是，即使您修复了该问题，如果您更改文件中第 10 个字节的值，您最终可能会得到一个不可加载的图像。

这是因为，`.bmp`图像文件以包含有关文件的信息（颜色深度、尺寸……请参阅[BMP 文件格式](http://en.wikipedia.org/wiki/BMP_file_format)）的标题开始，然后是任何实际图像数据。具体来说，第 10 个字节是 4 字节整数的一部分，用于存储实际图像数据（像素阵列）的偏移量。所以从这个值中减去 10 可能会使偏移量指向文件中的错误点，并且你的图像加载器进行边界检查可能会认为这是无效的。

您真正想要做的是将图像作为图像加载并直接操作像素值。像这样的东西：

```
BufferedImage originalImage = ImageIO.read(new File("d://test.bmp"));
int rgb = originalImage.getRGB(10, 0);
originalImage.setRGB(rgb >= 10 ? rgb - 10 : 0);
ImageIO.write(originalImage, "bmp", new File("d://test1.bmp")); 
```

# c# - 查询远程计算机设备管理器的磁盘驱动器

> ID：14704239
> 
> 赞同：0
> 
> 时间：2013-02-05T09:37:32.670
> 
> 标签：c#, sql, powershell

我需要使用 Powershell 脚本从远程计算机上的设备管理器中找出磁盘驱动器的名称。有谁知道怎么做？非常具体，到目前为止，我已经能够获得物理驱动器和分区，但不是必需的。请找到我所需要的截图。

这是截图：http: [//imgur.com/wY46Rnb](http://imgur.com/wY46Rnb)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:48:43.507

使用 wmi：

```
 gwmi Win32_DiskDrive -ComputerName remotecomputername | select model 
```

用户必须具有远程计算机的本地管理员凭据，并且远程计算机防火墙不得阻止 wmi 查询。

# windows-phone-8 - Libusb 与 Windows Phone 8 的兼容性

> ID：14704242
> 
> 赞同：1
> 
> 时间：2013-02-05T09:37:35.967
> 
> 标签：windows-phone-8, libusb

有没有人有任何关于 libusb 与 Windows Phone 8 兼容性的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:10:27.520

这是行不通的，因为无法在平台上访问所需的 USB API，更不用说让它们以跨平台的方式可用了。

# c# - 时间：2019-05-10 标签：c#metroappsliveconnect

> ID：14704244
> 
> 赞同：1
> 
> 时间：2013-02-05T09:37:56.070
> 
> 标签：c#, microsoft-metro, live

我正在 c# 中创建新的 Metro 应用程序，我想使用 MS Live 连接登录用户。互联网上有很多示例如何做到这一点，但 Live SDK 已更改（live:SignInButton 不可用），Live Connect 开发人员中心已更改（我无法找到包显示名称，发布者文本框， ...）。

当前如何在 C# Metro 应用程序中使用 Live SDK 的最佳方式是什么，或者是否可以使用 WebAuthenticationBroker？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:40:40.650

查看 DotNetOpenAuth 库，它允许您轻松集成您的 live id 和其他 openid 提供程序以进行身份​​验证。仅供参考，这个库也可以作为 nuget 包使用。

可用示例@ [http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122](http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122)

# c++ - 如何检查显卡是否适合应用需求？

> ID：14704250
> 
> 赞同：0
> 
> 时间：2013-02-05T09:38:28.183
> 
> 标签：c++, gpu, directx-11

我有一个应用程序，它使用 DirectX11 的特定功能。除了尝试创建 ID3D11Device 之外，还有其他方法可以确定卡是否支持此版本的 DirectX？

第二个问题：如何确定显卡有多少 VRAM？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:25:47.330

[DirectXSetupGetVersion()](http://doc.51windows.net/Directx9_SDK/?url=/directx9_sdk/setup/reference/functions/directxsetupgetversion.htm)似乎能够检测到当前安装的 dx 版本。
在寻找如何检测 VRAM 数量的解决方案时，我遇到了[这个库](http://www.ozone3d.net/zoomgpu/)，它似乎能够检测到你的视频卡的大量属性，它可能值得研究 ;)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:35:58.950

检查显卡是否支持 DirectX 11 的最简单方法似乎（不幸的是）只是尝试创建具有特定功能集的 ID3D11Device。我没有找到任何更简单的方法。

要验证显卡有多少 VRAM，可以使用IDXGIAdapter 接口的[GetDesc](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb174526%28v=vs.85%29.aspx "获取描述")方法。

# html - 如何在四个表格列的中心（水平）放置一个css按钮

> ID：14704252
> 
> 赞同：2
> 
> 时间：2013-02-05T09:38:28.480
> 
> 标签：html, forms, css, css-tables

我的网站[tjsoldit.com](http://tjsoldit.com)的首页上有一个家庭搜索表。该表格不是我编码的，它是由我的房屋搜索房地产公司提供的，我通过插入调用该表格的两行脚本来嵌入它。我只能在我的自定义 css 表中为表单设置一些自定义 css 规则，因为我提供了表单不同元素的 css 类。该表单呈现在一个表中，其中包含所有搜索字段及其匹配标签的行。可以在此处查看表单的结构[http://tjsoldit.com/wp-content/uploads/2013/02/4-columns.jpg](http://tjsoldit.com/wp-content/uploads/2013/02/4-columns.jpg)。

正如您在结构中看到的，按钮是表单第一列的元素。我想要的只是将按钮居中，以便按钮位于其行的水平中心（几乎一半在第 2 列下方，一半在第 3 列下方）。我已经尝试了所有显示属性，例如`display:inline;`，`display:table`等等。但不能这样做。请帮忙。

搜索按钮的 css 类是：`.ds-quick-search-button`，表单字段`.ds-quick-search-name`类是，字段值类是`.ds-quick-search-name`，更多关于表单结构的信息可以在这里阅读：www.diversesolutions.com/design-tips/idx-quick-search-styling -guide-6744

注意：我只提供了一个嵌入代码。所以不能改变html。我可以玩它的css。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:43:10.267

添加`colspan="4"`（合并 4 个单元格）和`align="center"`

```
<tr>
<td colspan="4" align="center">
<input type="button" value="Search" class="ds-quick-search-button">
</td>
</tr> 
```

**或者**

为您的表格创建一个外部 div 并将表格样式添加到外部 div，增加填充值`padding: 6px 24px 36px 24px;`

然后尝试添加这个

```
.ds-quick-search tr:last-child input{margin:2% 0 0 25%; position:absolute; } 
```

**[演示 2](http://jsfiddle.net/CBmmt/)**

* * *

在第 1 列和第 2 列之间以及第 3 列和第 4 列之间留出空间

```
.ds-quick-search td:first-child{padding-right:15px}
.ds-quick-search td:nth-child(3){padding-right:15px} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:42:20.317

设置按钮的边距`50%`，如下所示：

```
.ds-quick-search-button { 
   margin-left:50%;
} 
```

# c# - VCard 4.0 电话正则表达式？

> ID：14704255
> 
> 赞同：1
> 
> 时间：2013-02-05T09:38:38.017
> 
> 标签：c#, .net, regex, c#-4.0, vcf-vcard

我想阅读 VCard 4.0 文件。

我使用这个样本。

但是当我对这个文件使用这个解决方案时。

```
BEGIN:VCARD
VERSION:4.0
N:Gump;Forrest;;;
FN: Forrest Gump
ORG:Bubba Gump Shrimp Co.
TITLE:Shrimp Man
PHOTO:http://www.example.com/dir_photos/my_photo.gif
TEL;TYPE=work,voice;VALUE=uri:tel:+1-111-555-1212
TEL;TYPE=home,voice;VALUE=uri:tel:+1-404-555-1212
ADR;TYPE=work;LABEL="42 Plantation St.\nBaytown, LA 30314\nUnited States of America"
 :;;42 Plantation St.;Baytown;LA;30314;United States of America
EMAIL:forrestgump@example.com
REV:20080424T195243Z
END:VCARD 
```

它没有找到电话参数 - 例如，我将此正则表达式用于电话号码：

```
 RegexOptions options = RegexOptions.IgnoreCase | RegexOptions.Multiline | RegexOptions.IgnorePatternWhitespace;
    regex = new Regex(@"(\n(?<strElement>(TEL)) (;*(?<strAttr>(HOME|WORK)))* (;(?<strType>(VOICE|CELL|PAGER|MSG|FAX)))*  (;(?<strPref>(PREF)))* (;[^:]*)*  (:(?<strValue>[^\n\r]*)))", options);

 mc = regex.Matches(s);
            if (mc.Count > 0)
            {
                Phones = new Phone[mc.Count];
                for (int i = 0; i < mc.Count; i++)
                {
                    m = mc[i];
                    Phones[i].number = m.Groups["strValue"].Value;
                    ss = m.Groups["strAttr"].Value;
                    if (ss == "HOME")
                        Phones[i].homeWorkType = HomeWorkType.home;
                    else if (ss == "WORK")
                        Phones[i].homeWorkType = HomeWorkType.work;

                    if (m.Groups["strPref"].Value == "PREF")
                        Phones[i].pref = true;

                    ss = m.Groups["strType"].Value;
                    if (ss == "VOICE")
                        Phones[i].phoneType = PhoneType.VOICE;
                    else if (ss == "CELL")
                        Phones[i].phoneType = PhoneType.CELL;
                    else if (ss == "PAGER")
                        Phones[i].phoneType = PhoneType.PAGER;
                    else if (ss == "MSG")
                        Phones[i].phoneType = PhoneType.MSG;
                    else if (ss == "FAX")
                        Phones[i].phoneType = PhoneType.FAX;

                }
            } 
```

但 strAttr,strType 的值为空。

如何为这些设置正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:48:57.853

代替正则表达式尝试 vCard 类库，我在 google 上找到了它：

[http://www.thoughtproject.com/Libraries/vCard/index.htm](http://www.thoughtproject.com/Libraries/vCard/index.htm)

# java - 同一类中的嵌入式父/子关系

> ID：14704258
> 
> 赞同：1
> 
> 时间：2013-02-05T09:38:39.207
> 
> 标签：java, hibernate, parent-child, composite-key, composite-primary-key

我正在尝试在具有复合 ID 的单个表中映射父子关系。但是我遇到了一些困难，似乎无法通过 Google 和 Stackoverflow 找到正确的答案。

现在，在写这篇文章时，我想通了！我将这个解决方案发布给其他可能遇到同样“挑战”的人。

**注意：**我省略了所有的 getter 和 setter 以保持紧凑。

首先，表格`PlanDBtasktree`原样（高度简化）：

```
taskID    mainTaskID      planID
---------------------------------
1         NULL            42
2         1               42
3         1               42
4         2               42
5         2               42
1         NULL            102 
```

所以结构将是：

```
1-42
    2-42
        4-42
        5-42
    3-42
1-102 
```

taskID & planID 写成`@EmbeddedId`：

```
@Embeddable
public class PlanDBtasktreeID implements Serializable {
  @Basic( optional = false )
  @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
  @JoinColumn(name="planID")
  private PlanDBinstance planID;

  @Basic( optional = false )
  @Column(name = "taskID")
  private Long taskID;
  // equals & hashcode...
} 
```

类中的映射`PlanDBtasktree`：

```
@EmbeddedId
private PlanDBtasktreeID tId; 
```

现在我想在同一个类中检索父/子关系，因为它是一个递归树。

该列`mainTaskID`是“父”引用。知道了这一点，我创建了另一个`Embeddable`对象：

```
@Embeddable
public class PlanDBmaintreeID implements Serializable {

  @Basic( optional = false )
  @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
  @JoinColumn(name="planID", insertable = false, updatable = false)
  private PlanDBinstance planID;

  @Basic( optional = false )
  @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
  @JoinColumns({
      @JoinColumn(name = "planID", insertable = false, updatable = false),
      @JoinColumn(name = "maintaskID", insertable = false, updatable = false)
  })
  private PlanDBtasktree maintaskID;
} 
```

以及在`PlanDBtasktree`类中的映射：

```
@Embedded
private PlanDBmaintreeID mtId; 
```

最后，从以下位置检索孩子`PlanDBtasktree`：

```
@OneToMany(mappedBy = "mtId", cascade = CascadeType.ALL)
private List<PlanDBtasktree> PlanDBtasktree_children_List; 
```

类的完整映射`PlanDBtasktree`：

```
public class PlanDBtasktree {
  @EmbeddedId
  private PlanDBtasktreeID tId;

  @Embedded
  private PlanDBmaintreeID mtId;

  @OneToMany(mappedBy = "mtId", cascade = CascadeType.ALL)
  private List<PlanDBtasktree> PlanDBtasktree_children_List;
} 
```

如果有人有一些改进/补充，我很乐意阅读它们。

这是我第一次尝试解决这个问题，所以这可能不是最干净的解决方案。这是我在这里的第一篇文章，因此由于缺乏经验，格式可能有点不确定:-)

# git - 将 git repo 历史修改为线性

> ID：14704261
> 
> 赞同：4
> 
> 时间：2013-02-05T09:38:45.223
> 
> 标签：git, tfs, git-tf

我们需要从 Git 源代码库生成 TFS 存储库，我们想保留原始提交历史记录，所以我尝试使用 Tf-Git "git tf checkin --deep" 命令创建 TFS 变更集每个 Git 提交。

不幸的是，这一步失败了，因为 Git 存储库中的许多提交由于合并而有两个父级，并且 TFS 要求提交历史是线性的才能导入它。所以我收到以下错误：

```
git-tf: cannot check in - commit 2b15822 has multiple parents, please rebase to form a linear history or use --shallow or --autosquash 
```

这是可以理解的。但是，如果现有的 Git 存储库有很长的此类提交链，可以做些什么呢？我知道可以花一两天时间手动修改提交历史记录，但这不是我们想要花费的时间。我是否正确理解没有将提交历史记录变为线性的自动化方法，所以除非我们想在手动工作上花费大量时间，否则我们应该将整个历史记录作为单个变更集导入？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T09:47:41.383

变基实际上应该为您解决这个问题。

```
git rebase -i <hash of commit before first branch has been created> 
```

在执行该命令时弹出的窗口中，不要更改任何内容。只需保存并关闭。

插图：

```
A <- B <- E <-----F <- G      master
     ^            ^
      \          /
       - C <- D -             branch 
```

提交`C`并`D`在一个分支上，并已通过合并提交合并到 master 中`F`。

现在，执行`git rebase -i B`将产生以下结果，当从 执行时`master`：

```
A <- B <- C <- D <- E <- G    master 
```

请注意，合并提交`F`消失了，因为它将是空的。

# javascript - JavaScript 和 JQuery 在 eclipse android 模拟器中不起作用

> ID：14704263
> 
> 赞同：0
> 
> 时间：2013-02-05T09:38:49.390
> 
> 标签：javascript, android, jquery

```
<html>
<head><title>ABC</title>
<!--<script src="jquery.gamequery-0.7.0.js"></script>-->
<!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js" type="text/javascript"></script>
<style>
#abc{
    height:200px;
    width:200px;
    left: 400px;
    background: darkblue;
    position: absolute;

}
#def{
    left:  25%;
    top: 25%;
    position: absolute;
}
#ball{
    position: absolute; 
    top: 100px; 
    left: 180px;  
    line-height: 80px;
    opacity: 0;
}    

</style>
<script> 
document.addEventListener("deviceready", onDeviceReady, true); 
function onDeviceReady(){
    //set the opacity of #abc to 0(Fade)
    $("#abc").css('opacity', 0)
  //Effect Function 

  //Create fade out effect for #abc
    $("#abc").animate({ 
      top: '200px',
      opacity:'1'

    });

    //Enlarge of #def
    $("#def").animate({ 
        height: '75px',
        width: '75px'
    });

    //Blink effect for #abc
    $("#abc").effect("pulsate", { times:3 }, 100);

    //Shake effect for #def
    $( "#def" ).effect( "shake" ,{ times:3 }, 50);

    //#ball turn orbit around #abc
    var angle = 0;     // starting position (degrees)
    var distance = 100; // distance of b from a
    var speed = 300;    // revolution speed in degrees per second
    var rate  = 10;    // refresh rate in ms

    function f() {

        var o = $('#def').offset();

        var t = o.top + (distance * Math.sin(angle * Math.PI/180.0));
        var l = o.left+ (distance * Math.cos(angle * Math.PI/180.0));

        $('#ball').css({
            top: t,
            left: l
        });
        angle += (speed * (rate/1000)) % 360;
     }
    setInterval(f, rate);
    //Let the #ball to appear
    $("#ball").css('opacity',1);

};

</script> 
</head>
<body onload="onDeviceReady()">
<button id="btnTry">Try Me</button>
<button id="btnReturn" onclick="window.location.reload();">Return To Normal</button>
<div id="abc">
<img src="pix/Diamond%20Heart.gif" id="def" />
</div>
<img src="pix/Orange.gif" id="ball" />

</body>
</html> 
```

* * *

测试.html

```
public class BbbMainActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.bbb_main);
        WebView wv = (WebView) findViewById(R.id.webview);
        wv.getSettings().setJavaScriptEnabled(true);
        wv.loadUrl("file:///android_asset/test.html");
            } 
```

## }

BbbMainActivity.java

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".BbbMainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />
<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/> 
```

bbb_main.xml

我对这段代码的问题是我可以在网络浏览器中正确运行代码，但是当涉及到我使用 eclipse（Android 2.1 和 Android 2.2）运行的设备模拟器时。

我能知道我犯了什么错误吗？

该代码将显示多种效果。随意将其复制到记事本中并将其保存为 .html 并运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-30T07:22:28.580

```
WebSettings webSettings = webView.getSettings();
webSettings.setJavaScriptEnabled(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T08:05:57.767

尝试在 java 代码中添加 .setWebChromeClient 或 .setWebViewClient 。 [http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

```
public class BbbMainActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.bbb_main);
        WebView wv = (WebView) findViewById(R.id.webview);
        wv.getSettings().setJavaScriptEnabled(true);
        wv.setWebChromeClient(new WebChromeClient());
        wv.loadUrl("file:///android_asset/test.html");
        } 
```

# php - 在 Silex 中使用 db 支持的 UserProvider 进行用户身份验证

> ID：14704266
> 
> 赞同：8
> 
> 时间：2013-02-05T09:38:58.483
> 
> 标签：php, security, silex

我正在开发一个 Silex 应用程序，现在我处于安全阶段。我已经阅读了我在网上找到的关于这个主题的所有文档，但我有很多疑问，如果可能的话，我希望有人能帮助我。

基本上，我遵循[了 Johann Reinke 的本教程](http://www.bubblecode.net/en/2012/08/28/mysql-authentication-in-silex-the-php-micro-framework/)。

当然还有[Silex 文档](http://silex.sensiolabs.org/doc/providers/security.html)：

还有我在谷歌上找到的所有东西。

但是，我认为 Silex 仍然缺乏很多文档，我在很多方面都迷失了方向。

我的代码：

```
 $app->register(new Silex\Provider\SessionServiceProvider(), array(
  'session.storage.save_path' => __DIR__.'/../vendor/sessions',
 ));

$app->register(new Silex\Provider\DoctrineServiceProvider(), array(
'db.options' => array(
'driver'    => 'pdo_mysql',
'host'      => 'localhost',
'dbname'    => 'dbname',
'user'      => 'someuser',
'password'  => 'somepass',
'charset'   => 'utf8',
),
));

$app['security.encoder.digest'] = $app->share(function ($app) {
    return new MessageDigestPasswordEncoder('sha1', false, 1);
});

$app['security.firewalls'] = array(
    'acceso' => array(
    'pattern' => '^/confirmar',
    'form' => array('login_path' => '/acceso', 'check_path' => '/confirmar/comprobar_acceso'),
    'logout' => array('logout_path' => '/confirmar/salir'),
    'users' => $app->share(function() use ($app) {
     return new Acme\User\UserProvider($app['db']);
    }),
),
);

$app->register(new Silex\Provider\SecurityServiceProvider(array(
'security.firewalls' => $app['security.firewalls'],
'security.access_rules' => array(
array('^/confirmar', 'ROLE_USER'),
),
))); 
```

我对控制器有很多疑问：

```
$app->match('/acceso', function(Request $request) use ($app) {

$username = $request->get('_username');
$password = $request->get('_password');

if ('POST' == $request->getMethod())
    {
    $user = new Acme\User\UserProvider($app['db']);
    $encoder = $app['security.encoder_factory']->getEncoder($user);
    // compute the encoded password
    $encodedPassword = $encoder->encodePassword($password, $user->getSalt());

    // compare passwords
        if ($user->password == $encodedPassword)
            {
            // set security token into security
            $token = new UsernamePasswordToken($user, $password, '', array('ROLE_USER'));
            $app['security']->setToken($token);
           //return $app->redirect('/jander');
           // redirect or give response here
         } else {
         // error feedback
         }

         }

return $app['twig']->render('login.twig', array(
    'error'         => $app['security.last_error']($request),
    'last_username' => $app['session']->get('_security.last_username'),
));
})
->bind('acceso'); 
```

这是我的课程，用户提供者：

```
// src/Acme/User/UserProvider.php
namespace Acme\User;

use Symfony\Component\Security\Core\User\UserProviderInterface;
use Symfony\Component\Security\Core\User\UserInterface;
use Symfony\Component\Security\Core\User\User;
use Symfony\Component\Security\Core\Exception\UsernameNotFoundException;
use Symfony\Component\Security\Core\Exception\UnsupportedUserException;
use Doctrine\DBAL\Connection;

class UserProvider implements UserProviderInterface
{
private $conn;

public function __construct(Connection $conn)
{
    $this->conn = $conn;
}

public function loadUserByUsername($username)
{
    $stmt = $this->conn->executeQuery('SELECT * FROM compradores WHERE idemail = ?', array(strtolower($username)));
    if (!$user = $stmt->fetch()) {
        throw new UsernameNotFoundException(sprintf('Username "%s" does not exist.', $username));
    }

    return new User($user['idemail'], $user['pass'], explode(',', $user['roles']), true, true, true, true);
}

public function refreshUser(UserInterface $user)
{
    if (!$user instanceof User) {
        throw new UnsupportedUserException(sprintf('Instances of "%s" are not supported.', get_class($user)));
    }

    return $this->loadUserByUsername($user->getUsername());
}

public function supportsClass($class)
{
    return $class === 'Symfony\Component\Security\Core\User\User';
}
} 
```

我的表格：

```
<form action="{{ path('confirmar_comprobar_acceso') }}" method="post">
{{ error }}
<input type="text" name="_username" value="{{ last_username }}" />
<input type="password" name="_password" value="" />
<input type="submit" />
</form> 
```

这是我的mysql表：

```
id          int(15) 
idemail varchar(255)
nombre  varchar(255) 
apellidos   varchar(255)
telefono    int(11)
activo  tinyint(4)
pass    varchar(40)
roles   varchar(255)
iva         tinyint(4)
nifcif      varchar(255) 
```

尝试登录时，我总是收到“错误凭据”响应。有任何想法吗？谢谢和干杯！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-29T17:54:08.013

在 40 个字符处，您的密码字段“pass”可能会截断加密密码。尝试将字段更改为 varchar(255)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T14:54:19.583

我在使用默认编码器时遇到了类似的问题，我怀疑这与数据库整理有关，或者可能与多个 base64 编码有关。

我用简单的 sha1 替换它，相当不安全，但这给出了一个大致的想法（你可以用 sha2 替换它以确保安全）。在注册您的安全提供商后添加：

```
$app['security.encoder.digest'] = $app->share(function ($app) {
    // use the sha1 algorithm
    // don't base64 encode the password
    // use only 1 iteration
    return new MessageDigestPasswordEncoder('sha1', false, 1);
}); 
```

而且您必须确保您存储的密码使用相同的哈希算法。

# xml - Orbeon 中的派生字段

> ID：14704267
> 
> 赞同：0
> 
> 时间：2013-02-05T09:39:12.893
> 
> 标签：xml, orbeon

是否有某种方法可以借助一些 xml 脚本从 Orbeon CE 中的其他字段派生字段值？

我希望它将一些字段作为输入参数，进行一些计算，然后生成一个输出参数以放入不可编辑的字段中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:38:28.227

我假设这是您使用表单生成器创建的表单。如果是这种情况：

1.  通过单击齿轮图标并输入名称来命名“输入”字段。说`first-name`。
2.  创建一个*文本输出*字段，单击该字段旁边的*验证设置图标，然后在对话框中的**Calculated Value*中，键入一个 XPath 表达式，例如：`concat('Hello ', $first-name, '!')`。从这个例子中可以看出，您可以使用`$gaga`变量来引用名为 的字段`gaga`。

# java - 在不同的JVM中运行java命令

> ID：14704272
> 
> 赞同：1
> 
> 时间：2013-02-05T09:39:30.730
> 
> 标签：java, jvm

目标：我有客户端-服务器程序，其中客户端和服务器在不同的 jvm 中运行。为了测试相同，我想以编程方式在不同的 JVM 中调用服务器，然后使用当前 jvm 运行客户端并执行不同的 C/S 测试。

有什么方法可以以编程方式在不同的 jvm 中执行方法或运行 Java 命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T09:49:12.443

1）java中最强大的运行进程的工具是[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)：

```
ProcessBuilder pb = new ProcessBuilder("java", "-server", "-jar", "yourJar.jar");

Process p = pb.start(); 
```

与使用[Process](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)相比，您可以操作子进程，例如读取[InputStream](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#getInputStream%28%29)、[销毁](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#destroy%28%29)等

* * *

2）如果您能够编辑两个源代码，请[查看此问题以在同一主机上的 JVM 之间建立有效的通信](https://stackoverflow.com/questions/14580337/most-efficient-performance-wise-for-inter-jvm-communication/14580459#14580459)。如果您无法更改代码，只需创建自己的加载器来加载服务器并实现 JVM 之间的通信并调用您需要的方法，因为它在同一个 JVM 空间中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:51:10.543

您几乎可以运行您手动运行的任何命令

```
 Runtime.getRuntime().exec(command); 
```

有关更多信息，请参阅 Runtime.getRuntime().exec(...) 文档。

但还要注意，使用 exec 运行任何特定于平台的命令将剥夺您的程序的平台独立性。

前段时间我看到有人使用“mv”来移动文件。这使得整个程序特定于基于 Unix 的操作系统。Java 或任何基于虚拟机的语言的魅力在于其平台独立性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:44:06.940

您可以使用命令行：

```
 Runtime.getRuntime().exec("java -server MyServer") 
```

或者，如果您想构建一些更复杂的调用，只需使用[http://commons.apache.org/exec/](http://commons.apache.org/exec/)来构建和运行程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:45:50.930

据我所知，这对于普通的 java 是不可能的。可能启用网格的框架可以提供一种在多个 JVM 上运行 java 程序的方法。这里解决了一个类似的问题：

[如何运行-a-java-file-project-in-remote-jvm-which-is-present-in-other-network](https://stackoverflow.com/questions/1705651/how-to-run-a-java-file-project-in-remote-jvm-which-is-present-in-other-network)

# ios - 在窗口顶部添加的 UIView 在 iOS 上不旋转

> ID：14704273
> 
> 赞同：0
> 
> 时间：2013-02-05T09:39:33.767
> 
> 标签：ios, uiview, rotation, uitabbar, uiwindow

我有一个`tabBar`基于应用程序的应用程序，想在整个屏幕上方显示一些自定义视图（而不是模态视图），我这样做：

```
[self.view.window addSubview:self.myViewController.view]; 
```

我这样做的原因是因为这种方式视图位于上方`UITabBar`。

无论如何，视图都很好地呈现出来，它像我想要的那样覆盖了整个屏幕。但有一个问题。当我旋转设备时，这个顶视图不会旋转，但下面的视图会旋转。

我已经测试过`iOS5`并且`iOS6`没有运气。也将此代码放在委托中：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return UIInterfaceOrientationMaskAll;
} 
```

类似的代码在 myViewController 的视图中：

```
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
} 
```

视图只是不旋转...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:44:31.933

据我所知，只有窗口的第一个子视图会获取旋转事件。您正在向窗口添加另一个视图（您的视图），因此需要自己处理传播旋转事件。

为您提供一些真正的快速帮助，只需查看以下实现：[AGWindowView](https://github.com/hfossli/AGWindowView)（自 2016 年起未维护）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-13T12:20:11.853

你可以为你的 UIWindow 设置 rootController。例如：

```
fileprivate(set) var bottonOverlayWindow = UIWindow()

self.bottonOverlayWindow.rootViewController = self; 
```

// 'self' 将是您在其上添加 UIWindow 视图的 ViewController。所以每当你 ViewController 改变方向时，你的窗口视图也会改变它的方向。

如果您遇到任何问题，请告诉我。

# shell - 如何编写用于查找 PDF 中页数的 shell 脚本？

> ID：14704274
> 
> 赞同：41
> 
> 时间：2013-02-05T09:39:41.523
> 
> 标签：shell, pdf

我正在动态生成 PDF。如何使用 shell 脚本检查 PDF 中的页数？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-06T18:53:23.740

没有任何额外的包装：

```
strings < file.pdf | sed -n 's|.*/Count -\{0,1\}\([0-9]\{1,\}\).*|\1|p' \
    | sort -rn | head -n 1 
```

使用 pdfinfo：

```
pdfinfo file.pdf | awk '/^Pages:/ {print $2}' 
```

使用 pdftk：

```
pdftk file.pdf dump_data | grep NumberOfPages | awk '{print $2}' 
```

* * *

您还可以通过 pdfinfo 递归汇总所有 PDF 中的总页数，如下所示：

```
find . -xdev -type f -name "*.pdf" -exec pdfinfo "{}" ";" | \
    awk '/^Pages:/ {n += $2} END {print n}' 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-06T14:16:28.357

imagemagick 库提供了一个名为 identify 的工具，它与计算输出行数相结合，可以让你得到你想要的……imagemagick 是一个在 osx 上使用 brew 轻松安装的工具。

这是一个功能性 bash 脚本，它将其捕获到 shell 变量并将其转储回屏幕......

```
#/bin/bash
pdfFile=$1
echo "Processing $pdfFile"
numberOfPages=$(/usr/local/bin/identify "$pdfFile" 2>/dev/null | wc -l | tr -d ' ')
#Identify gets info for each page, dump stderr to dev null
#count the lines of output
#trim the whitespace from the wc -l outout
echo "The number of pages is: $numberOfPages" 
```

运行它的输出......

```
$ ./countPages.sh aSampleFile.pdf 
Processing aSampleFile.pdf
The number of pages is: 2
$ 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-04-22T18:45:34.203

The `pdftotext` utility converts a pdf file to text format inserting page breaks between the pages. (aka: form-feed characters `$'\f'` ):

```
NAME
       pdftotext - Portable Document Format (PDF) to text converter.

SYNOPSIS
       pdftotext [options] [PDF-file [text-file]]

DESCRIPTION
       Pdftotext converts Portable Document Format (PDF) files to plain text.

       Pdftotext  reads  the PDF file, PDF-file, and writes a text file, text-file.  If text-file is
       not specified, pdftotext converts file.pdf to file.txt.  If text-file is  ´-',  the  text  is
       sent to stdout. 
```

There are many combinations to solve your problem, choose one of them:

1) pdftotext + grep:

`$ pdftotext file.pdf - | grep -c $'\f'`

2) pdftotext + awk (v1):

`$ pdftotext file.pdf - | awk 'BEGIN{n=0} {if(index($0,"\f")){n++}} END{print n}'`

3) pdftotext + awk (v2):

`$ pdftotext sample.pdf - | awk 'BEGIN{ RS="\f" } END{ print NR }'`

4) pdftotext + awk (v3):

`$ pdftotext sample.pdf - | awk -v RS="\f" 'END{ print NR }'`

Hope it Helps!

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-01-20T17:50:44.953

Here is a version for the command line directly (based on pdfinfo):

```
for f in *.pdf; do pdfinfo "$f" | grep Pages | awk '{print $2}'; done 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-04-06T05:49:24.023

Here is a total hack using `pdftoppm`, which comes preinstalled on Ubuntu (tested on Ubuntu 18.04 and 20.04 at least):

```
# for a pdf withOUT a password
pdftoppm mypdf.pdf -f 1000000 2>&1 | grep -o '([0-9]*)\.$' \
| grep -o '[0-9]*'

# for a pdf WITH a password which is `1234`
pdftoppm -upw 1234 mypdf.pdf -f 1000000 2>&1 | grep -o '([0-9]*)\.$' \
| grep -o '[0-9]*' 
```

How does this work? Well, if you specify a `f`irst page which is larger than the pages in the PDF (I specify page number `1000000`, which is too large for all known PDFs), it will print the following error to `stderr`:

> Wrong page range given: the first page (1000000) can not be after the last page (142).

So, I pipe that `stderr` msg to `stdout` with `2>&1`, [as explained here](https://stackoverflow.com/a/16497456/4561887), then I pipe that to grep to match the `(142).` part with this regular expression (`([0-9]*)\.$`), then I pipe that to grep again with this regular expression (`[0-9]*`) to find just the number, which is `142` in this case. That's it!

## Wrapper functions and speed testing

Here are a couple wrapper functions to test these:

```
# get the total number of pages in a PDF; technique 1.
# See this ans here: https://stackoverflow.com/a/14736593/4561887
# Usage (works on ALL PDFs--whether password-protected or not!):
#       num_pgs="$(getNumPgsInPdf "path/to/mypdf.pdf")"
# SUPER SLOW! Putting `time` just in front of the `strings` cmd shows it takes ~0.200 sec on a 142
# pg PDF!
getNumPgsInPdf() {
    _pdf="$1"

    _num_pgs="$(strings < "$_pdf" | sed -n 's|.*/Count -\{0,1\}\([0-9]\{1,\}\).*|\1|p' \
        | sort -rn | head -n 1)"

    echo "$_num_pgs"
}

# get the total number of pages in a PDF; technique 2.
# See my ans here: https://stackoverflow.com/a/66963293/4561887
# Usage, where `pw` is some password, if the PDF is password-protected (leave this off for PDFs
# with no password):
#       num_pgs="$(getNumPgsInPdf2 "path/to/mypdf.pdf" "pw")"
# SUPER FAST! Putting `time` just in front of the `pdftoppm` cmd shows it takes ~0.020 sec OR LESS
# on a 142 pg PDF!
getNumPgsInPdf2() {
    _pdf="$1"
    _password="$2"

    if [ -n "$_password" ]; then
        _password="-upw $_password"
    fi

    _num_pgs="$(pdftoppm $_password "$_pdf" -f 1000000 2>&1 | grep -o '([0-9]*)\.$' \
        | grep -o '[0-9]*')"

    echo "$_num_pgs"
} 
```

Testing them with the `time` command in front shows that the `strings` one is extremely slow, taking **~0.200 sec** on a 142 pg pdf, whereas the `pdftoppm` one is very fast, taking **~0.020 sec or less** on the same pdf. The `pdfinfo` technique in Ocaso's answer below is also very fast--the same as the `pdftoppm` one.

## See also

1.  [These awesome answers by Ocaso Protal](https://stackoverflow.com/a/14736593/4561887).
2.  These functions above will be used in my `pdf2searchablepdf` project here: [https://github.com/ElectricRCAircraftGuy/PDF2SearchablePDF](https://github.com/ElectricRCAircraftGuy/PDF2SearchablePDF).

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-06T13:55:03.643

刚刚挖出一个旧脚本（在 ksh 中），我发现：

```
#!/usr/bin/env ksh
# Usage: pdfcount.sh file.pdf
#
# Optimally, this would be a mere:
#       pdfinfo file.pdf | grep Pages | sed 's/[^0-9]*//'

[[ "$#" != "1" ]] && {
   printf "ERROR: No file specified\n"
   exit 1
}

numpages=0
while read line; do
   num=${line/*([[:print:]])+(Count )?(-)+({1,4}(\d))*([[:print:]])/\4}
   (( num > numpages)) && numpages=$num
done < <(strings "$@" | grep "/Count")
print $numpages 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-11-10T03:41:24.863

mupdf/mutool solution:

```
mutool info tmp.pdf | grep '^Pages' | cut -d ' ' -f 2 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-03-06T06:14:47.427

If you're on macOS you can query pdf metadata like this:

```
mdls -name kMDItemNumberOfPages -raw file.pdf 
```

as seen here [https://apple.stackexchange.com/questions/225175/get-number-of-pdf-pages-in-terminal](https://apple.stackexchange.com/questions/225175/get-number-of-pdf-pages-in-terminal)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-17T17:53:35.200

I made a few improvement in [Marius Hofert](https://stackoverflow.com/questions/14704274/how-to-write-shell-script-for-finding-number-of-pages-in-pdf/54279233#54279233) tip to sum the returned values.

```
for f in *.pdf; do pdfinfo "$f" | grep Pages | awk '{print $2}'; done | awk '{s+=$1}END{print s}' 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-03T23:41:14.423

To build on Marius Hofert's answer, this command uses a bash for loop to show you the number of pages, display the filename, and it will ignore the case of the file extension.

```
for f in *.[pP][dD][fF]; do pdfinfo "$f" | grep Pages | awk '{printf $2 }'; echo " $f"; done 
```

# asp.net - 使用 ViewModel 模式在 MVC 中放置逻辑的位置

> ID：14704275
> 
> 赞同：3
> 
> 时间：2013-02-05T09:39:42.343
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, viewmodel

我在 asp.net mvc 3 中使用 ViewModel。

在我的情况下，我有一个控制器，它启动一个连接到视图的 ViewModel。

如果`DateForLookUp`URL 中没有附加变量，则控制器使用 DateTime.UctNow 初始化 ViewModel，否则使用该变量。

我需要在视图上创建链接。当用户单击链接时，我必须`DateForLookUp`取值并加减一天。

我的问题：

*   将这个逻辑、ServiceLayer、ViewModel、Controller 或 View 放在哪里合适？

看法

```
@Html.ActionLink("Next Day", "Daily")

@Html.ActionLink("Previous Day", "Daily") 
```

* * *

控制器

```
 public ActionResult Daily(string dateForLookUp)
    {
        DateTime dateTimeForLookUp;
        if (string.IsNullOrWhiteSpace(dateForLookUp))
            dateTimeForLookUp = DateTime.UtcNow;
        else 
            dateTimeForLookUp = DateTime.Parse(dateForLookUp);

        var eventsInDate = eventAggregateService.FindAllForDate(dateTimeForLookUp);
        EventsAggregateDailyListViewModel eventDailyVM = new EventsAggregateDailyListViewModel();
        eventDailyVM = new EventsAggregateDailyListViewModelBuilder().Build(eventDailyVM, dateTimeForLookUp);
        return View(eventDailyVM);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:17:55.927

在我看来（并且在实践中），我会将任何和所有逻辑都放在服务层中。

我将我的 MVC 应用程序分成几个不同的项目，以保持所有层很好地分开：

*   AppName.Configuration：处理应用程序的任何配置（即拉入 web.config/app 设置、资源文件等）
*   AppName.Data：这是执行所有数据库访问的数据层（无业务逻辑）。DBML/EDMX 在这里，我的存储库类也在这里。
*   AppName.Models：这是我为 MVC 定义的所有 ViewModel 以及整个应用程序所需的其他模型对象的地方。
*   AppName.Services：这是我的业务层，一切都必须经过这里才能到达数据层或表示/Web 层。ViewModels 是从数据库对象构建的，数据验证发生在这里，等等。
*   AppName.Web：这将是 MVC 应用程序。
*   AppName.Data.Test：数据应用的单元测试
*   AppName.Services.Test：服务的单元测试
*   AppName.Web.Test：MVC 控制器的单元测试
*   AppName.Web.UI.Test：Web 用户界面的单元测试（使用 WATIN）

我还有一组打包到 NuGet 包中的类，如果需要，我可以将它们添加到我的应用程序中，即（对于本示例）：

*   CompanyName.Data：数据层逻辑的通用库
*   CompanyName.MVC：用于 ASP.NET MVC 集成的通用库
*   CompanyName.Utilities：杂项实用程序的公共库

我的控制器什么都不做，除了从服务层获取 ViewModel 发送到视图，然后在从视图发布时接收数据并将其发送到服务层进行验证、处理、保存回存储库、其他业务逻辑，等等

# wordpress - EC2 服务器上的 WordPress FTP 更新

> ID：14704278
> 
> 赞同：1
> 
> 时间：2013-02-05T09:39:46.887
> 
> 标签：wordpress, ftp, ubuntu-12.04

我有一个运行我托管 Wordpress 的 Ubuntu 12.04 Web 服务器的 AWS EC2 实例。要更新 Wordpress，它要求我提供 FTP 凭据。我已经根据这篇文章设置了 FTP：http: [//stephen-white.blogspot.co.uk/2012/05/how-to-set-up-wordpress-on-amazon-ec2_31.html](http://stephen-white.blogspot.co.uk/2012/05/how-to-set-up-wordpress-on-amazon-ec2_31.html)

但是我创建的 FTP 用户（ftpuser）无法登录。WP 只给出了非常模糊的错误，但我尝试在 OSX 终端中使用 FTP，它给出了“登录不正确”，但密码肯定是正确的。我可以使用我的正常用户名和密码进行 FTP 访问。

这是我的 vsftpd.conf 文件的内容（我已经删除了所有注释掉的行）：

```
listen=YES
anonymous_enable=NO
local_enable=YES
write_enable=YES
local_umask=022
dirmessage_enable=YES
use_localtime=YES
xferlog_enable=YES
connect_from_port_20=YES
secure_chroot_dir=/var/run/vsftpd/empty
pasv_enable=YES
pasv_min_port=14000
pasv_max_port=14050
port_enable=YES
pasv_address=54.241.13.224
pasv_addr_resolve=NO 
```

这是服务器端口的 nmap：

```
PORT      STATE  SERVICE
20/tcp    closed ftp-data
21/tcp    open   ftp
22/tcp    open   ssh
80/tcp    open   http
443/tcp   closed https
14000/tcp closed unknown 
```

/var/www（我安装了 Wordpress）文件夹归 ftpuser 所有，这是文件 /etc/passwd 中 ftpuser 的条目：

```
ftpuser:x:1001:1001::/var/www:/sbin/nologin 
```

我只是一个业余的服务器管理员，所以对我在做什么并不完全了解。任何人都知道为什么会发生这种情况以及需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T19:03:28.407

If you are receiving the following error message "Login incorrect" on AWS EC2:

> 331 Please specify the password.
> 
> Password:
> 
> 530 Login incorrect.
> 
> ftp: Login failed

There is a problem with login using Shell. To overcome this there is one further step missing after the following in that Blog Post:

> Add an FTP user, giving access only to the WordPress files and for additional security >ensuring the user can not open a shell:
> 
> > useradd ftpuser -d /var/www/html -s /sbin/nologin

Add the following:

Add /usr/sbin/nologin on to the last line of /etc/shells file:

> $ vi /etc/shells
> 
> /usr/sbin/nologin

Try logging in again using your FTP client. That's how I got it working on my instances.

# c# - 当文件充满空闲页面时，SQLite 插入速度很慢

> ID：14704288
> 
> 赞同：0
> 
> 时间：2013-02-05T09:40:14.463
> 
> 标签：c#, sqlite

我有一个 SQLite 数据库，我正在其上运行一组特定的查询。如果数据库文件是新的，那么这些查询将在大约半毫秒内运行。

现在，如果我填满一个表并删除所有文件，该文件不会缩小，而是 sqlite 文件中的页面将被标记为空闲。但是，下次我运行这些相同的查询时，它们现在需要 9 到 11 毫秒。这是 20 倍的减速，这让我很担心。任何人都可以解释为什么会发生这种情况以及我能做些什么来解决这个问题？（如果可能的话）

我在 c# 上使用 System.Data.Sqlite 访问 SQLite 数据库

我也在为此使用交易。我知道没有它们插入很慢，但是这个问题绝对不是由这个引起的，因为我确定我自己打开了一个事务（没有事务，它们需要超过 20 毫秒）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:55:45.380

# c# - 将日期时间转换为英国格式

> ID：14704289
> 
> 赞同：15
> 
> 时间：2013-02-05T09:40:15.390
> 
> 标签：c#, datetime

我想将日期“01/22/2013 10:00:00”转换为“22/01/2013 10:00:00”，但我的方法无法识别我的日期字符串。

```
 DateTime dt = DateTime.ParseExact(StartDate, "MM dd yyyy h:mm", CultureInfo.InvariantCulture);
            StartDate = dt.ToString("dd/M/yyyy");
 dt = DateTime.ParseExact(EndDate, "MMM dd yyyy h:mm", CultureInfo.InvariantCulture);
            EndDate = dt.ToString("dd/M/yyyy"); 
```

我收到此错误：

> System.FormatException - 字符串未被识别为有效的 DateTime。

ParseExact 的正确字符串格式是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-05T09:42:58.220

您的日期格式错误，对于美国来说`01/22/2013 10:00:00`是`MM/dd/yyyy HH:mm:ss`. 对于英国来说，它会是`dd/MM/yyyy`等等。

```
DateTime dt = DateTime.ParseExact(StartDate, "MM/dd/yyyy HH:mm:ss", CultureInfo.InvariantCulture);

dt.ToString("dd/MM/yyyy"); 
```

注意我假设这里是 24 小时制，这就是我使用`HH`. 如果你想要一个 12 小时制的时钟，`hh`那么你也应该输入 AM/PM 等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T09:45:54.133

使用此代码：

```
DateTime dt = DateTime.ParseExact(StartDate, "MM/dd/yyyy hh:mm:ss", CultureInfo.InvariantCulture);
            StartDate = dt.ToString("dd/MM/yyyy hh:mm:ss"); 
```

注意格式字符串的变化`ParseExact`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T09:44:22.870

您正在使用斜杠，并且日期字符串中有“秒”部分。您需要更改`ParseExact`方法中提供的格式：

```
string StartDate = "01/22/2013 10:00:00";            
DateTime dt = DateTime.ParseExact(StartDate, "MM/dd/yyyy HH:mm:ss", CultureInfo.InvariantCulture);
StartDate = dt.ToString("dd/M/yyyy"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T09:46:16.033

尝试这个

```
var str = "01/22/2013 10:00:00";
var date = DateTime.ParseExact(str, "MM/dd/yyyy HH:mm:ss", new CultureInfo("en-GB"));
var res = date.ToString("dd/MM/yyyy HH:mm:ss", new CultureInfo("en-GB"));
Console.WriteLine(res);
Console.WriteLine("22/01/2013 10:00:00" == res); 
```

# javascript - 样式表未在使用 iframe 的 Internet Explorer 中应用

> ID：14704290
> 
> 赞同：2
> 
> 时间：2013-02-05T09:40:21.670
> 
> 标签：javascript, jquery, internet-explorer, html, iframe

您好，我在所有 IE 浏览器中都面临问题，我正在使用 js 代码在 div 中加载 iframe，但不知何故，css 类没有应用到我的 iframe 组件中，如文本框、按钮等。. 相同的代码适用于 chrome 和 forefox ，只有 IE 会产生问题。我的代码就像...

```
var head = document.getElementsByTagName('head')[0];
    var myCSS = document.createElement("link");
    myCSS.rel= "stylesheet";
    myCSS.type= "text/css";
    myCSS.href= Url + "/public/css/mycss.css";
    head.appendChild(myCSS);

//for IE
if (window.attachEvent) {
            window.attachEvent("onload", function() {
                var divforIframe = document.createElement("div");
                divforIframe.id = "divforIframe";
                var i = document.createElement("iframe");
                i.id = "myIFrame";
                i.src = Url;
                i.scrolling = "no";
                i.frameborder = "0";
                i.width = "500px";
                i.height = "300px";
                divforIframe.appendChild(i);
                document.getElementById("myDiv").appendChild(divforIframe);
    });
} 
```

# ruby-on-rails - 保护我的 Rails API

> ID：14704291
> 
> 赞同：1
> 
> 时间：2013-02-05T09:40:22.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api, oauth

我正在开发一个我想要安全的基本 Rails API。

我有一个只有属性“状态”的模型设备。设备属于给定用户。

*   此特定设备的所有者必须能够安全地更新其状态。
*   其他一些用户必须能够安全地读取状态（但不能更新）。

我正在考虑一种 OAuth 方法：
- 设备所有者使用身份验证过程来更新状态
- 设备用户使用令牌来读取其状态

这是一个好方法吗？是真的，对使用的宝石有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:30:55.597

检查这个，如果你发现比这更多的东西，请告诉我

[http://railscasts.com/episodes/352-securing-an-api?view=asciicast](http://railscasts.com/episodes/352-securing-an-api?view=asciicast)

# variables - 在控制器 symfony2 中声明变量

> ID：14704294
> 
> 赞同：1
> 
> 时间：2013-02-05T09:40:37.580
> 
> 标签：variables, symfony, controllers

我有一个疑问，我知道（Symfony2）控制器的功能，所以我认为在这些类中声明变量是不正确的。**但是有可能吗？**

通过这种方式，我可以在所有方法中使用一个变量来保持其状态。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:44:55.677

是的，这是**可能的**并且是正确的。

# ios - 如何动画滚动视图，如“拉动刷新”？

> ID：14704297
> 
> 赞同：0
> 
> 时间：2013-02-05T09:40:47.640
> 
> 标签：ios, objective-c, uiscrollview, pull-to-refresh

我的应用程序显示以下内容：

![样品 1](../Images/7d56229d8bf029a11c309a8362df1ea8.png)

'Sample 1' 只是一个显示内容的视图。单击向上按钮后，“示例 1”将向上滚动，并从底部显示新视图“示例 2”，最终结果为：

![样品 2](../Images/128f16e4fd238f91ac3a80027a534721.png)

我想我应该在向上按钮的末尾附加示例 2 视图，只需调整示例 1 和向上按钮的框架以显示示例 2。

但我不知道如何实现它的细节。有没有一种简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:59:41.610

只需将您的按钮和 2 个示例视图放在 UIScrollview 中，并将滚动视图的内容大小设置为按钮和 2 个示例视图的总高度。

接下来，您可以禁用 UIScrollView 上的滚动并将按钮连接到向上滚动 UIScrollView 的方法。

假设您将 UIScrollView 和“示例”视图作为自定义 UIViewController 类中的属性，您可以执行以下操作：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //disable scrolling
    self.scrollView.scrollEnabled = NO;
}

//connect this action to you button
- (IBAction)buttonPressed:(id)sender{

    //if current position is top scroll down, otherwise scroll up.
    if(self.scrollView.contentOffset.y < 1){
        [self.scrollView setContentOffset:CGPointMake(0, self.sample1.frame.size.height) animated:YES];
    }else{
        [self.scrollView setContentOffset:CGPointMake(0, 0) animated:YES];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:46:14.930

你可以试试[enormego (EGO)](http://developers.enormego.com/)。参考这个问题：

[拉动刷新 (ios)](https://stackoverflow.com/q/5133567/1548523)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:54:54.427

您可以使用滚动视图来实现这一点。在滚动视图中添加视图，当按下向上按钮时，只需滚动到相应的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:03:42.067

在我之前和之前我都做过这个，你要小心，因为你正在创建一个比屏幕尺寸更大的视图，因此你在技术上一直在渲染一个比普通视图更大的视图。如果可以的话，避免这种情况（虽然没有必要）可能会让您从屏幕上卸载视图。

除此之外，让您的主视图出现在 UIScrollView 中，以便您可以调整视图的位置。

代码可能如下所示：

```
- (IBAction)upButtonPress:(id)sender
{
    [UIView animateWithDuration:2.0 animations:^{
        // Approximate frame origin difference
        self.scrollView.contentOffset.y = self.view.frame.size.height - upButton.frame.size.height;
    } completion:^(BOOL finished) {
        // if necessary, do something when animation completes
    }];
} 
```

# php - 对安全域的 POST 操作是否始终安全

> ID：14704304
> 
> 赞同：1
> 
> 时间：2013-02-05T09:41:01.397
> 
> 标签：php, html, security

是具有以下操作标记的常规域 ( **http://www.domainname.com/form.php** ) 上的表单：

```
<form action="https://www.domainname.com/mail.php" method="POST"> 
```

确实安全吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T09:42:37.490

不。

表单可以在发送给用户（中间人攻击）的途中被拦截，并修改页面，以便将数据提交到其他地方（可能使用 JavaScript，因此更难发现数据盗窃）。

对 HTTPS 站点的请求将是安全的，但不能及时避免数据被截获。

此外，包含表单的页面不会被标记为安全的，这不会引起用户的非法信任。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T09:44:10.080

技术上是的。但是，如果表单的 HTML 位于不安全的页面上，您就不能信任表单本身。

# objective-c - 错误：无法实现结构：无法读取 eax

> ID：14704310
> 
> 赞同：21
> 
> 时间：2013-02-05T09:41:30.923
> 
> 标签：objective-c, debugging

对于 iOS 模拟器上的调试，我曾经能够读出 $eax 寄存器并得到错误消息。但是，我不知道是不是新的XCode 4.6版和iOS 6.1，我不能再这样做了。

```
(lldb) po $eax
error: Couldn't materialize struct: Couldn't read eax (materialize)
Errored out in Execute, couldn't PrepareToExecuteJITExpression 
```

现在怎么办？另外eax不在真实设备中，我该怎么办？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-10T19:24:55.243

虽然 trojanfoe 给出了一个很好的答案，但也可能对其他人有所帮助的是，如果您由于未显示消息的异常而尝试打印 $eax，请确保您位于 Debug Navigator 的 objc_exception_throw 框架中(`⌘</kbd>+`6`) when printing it out. Otherwise you'll get the "couldn't materialize" error above.`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-05T10:00:53.533

根据[此 LLDB 指南](http://lldb.llvm.org/lldb-gdb.html)，您可以使用：

```
register read 
```

检查当前线程的通用寄存器

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-17T09:55:18.650

确保您当前的构建方案处于调试模式，否则编译的应用程序将通过剥离额外的调试信息来优化。

如果您正在设置自己的构建方案，请转到构建设置 -> 代码生成 -> 优化级别，将值设置为“无 [-O0]”。

# java - 如何在 ZK 中关闭一个窗口？

> ID：14704311
> 
> 赞同：1
> 
> 时间：2013-02-05T09:41:32.367
> 
> 标签：java, zk

如何在 ZK 中关闭窗口而不使用单击取消按钮时的窗口 ID？

zul文件的一些代码

```
<window apply="org.zkoss.bind.BindComposer" width="700px"
        height="500px" title="ReDefault Folder" mode="modal" border="normal"
        closable="true"
        viewModel="@id('vm') @init('web.viewmodel.FolderRedefaultViewModel')" visible="@load(vm.showDialog)">

<x:table border="0" align="right">
                <x:tr>

                    <x:td align="right" width="20px">

                        <button label="OK" width="80px"
                            onClick="@command('insertDefaultOnOk')">
                        </button>
                    </x:td>
                    <x:td align="left">

                        <button label="Cancle" width="80px"
                            onClick="@command('nOk')">
                        </button>
                    </x:td>
                </x:tr>
            </x:table>
    </window> 
```

单击此按钮我想关闭窗口

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T10:42:19.040

**你可以试试这个：**
1.给你的窗口一个id：`<window id="mywin"...`
2.添加onClick到你的按钮：`<button onClick="mywin.detach()"...`

或者，如果您想从**命令处理程序**中执行此操作，请将窗口作为参数传递：
1\. `<window id="mywin"...`
2\. `<button onClick="@command('test', cmp=mywin)"`
3。

```
@Command
public void test(@BindingParam("cmp")  Window x) {
    x.detach();
} 
```

或者**没有分配 id**：
只需`getParent().getParent().getParent().getParent()`在 ZUL 中使用而不是`mywin`. 这将得到：

*   按钮的父级：`td`
*   td的父母：`tr`
*   tr的父母`table`
*   表的父级：`window`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-16T20:52:14.687

基本上可以通过在里面写来完成

```
<window apply="org.zkoss.bind.BindComposer" width="700px"
        height="500px" title="ReDefault Folder" mode="modal" border="normal"
        closable="true"
        viewModel="@id('vm') @init('web.viewmodel.FolderRedefaultViewModel')" visible="@load(vm.showDialog)"> 
```

这个：

```
<window apply="org.zkoss.bind.BindComposer" width="700px"
        height="500px" title="ReDefault Folder" mode="modal" border="normal"
        closable="true"
        viewModel="@id('vm') @init('web.viewmodel.FolderRedefaultViewModel')" visible="@load(vm.showDialog)" onCancel="self.detach();"> 
```

简而言之，只需`onCancel="self.detach();"`在窗口内添加

# linux - 如何链接共享库的特定名称（版本）

> ID：14704314
> 
> 赞同：4
> 
> 时间：2013-02-05T09:41:36.117
> 
> 标签：linux, gcc, linker, shared-libraries

我在这里搜索了这个问题并找到了一些类似的问题，但那里的解决方案对我不起作用。这是我的问题：我的应用程序正在使用 openldap-2.3 的共享库进行编译。Openldap 有 /usr/lib/libldap-2.3.so.0 链接到 /usr/lib/libldap-2.3.so.0.2.31。我将`-lldap`选项传递给 gcc，它将 libldap-2.3.so.0 文件链接到我的应用程序。

但我想链接特定名称，如 libldap.so。**请纠正我**，将来如果我在开发系统中将 openldap 版本更改为 2.4，它将链接到 libldap-2.4.so.XXX 版本。

那么如何将我的应用程序链接到特定名称，以便它始终寻找相同的名称，如 libldap.so。

**注意：**我创建了 /usr/lib/libldap-2.3.so.0 作为 /usr/lib/libldap.so 的软链接，然后将库名称传递`/usr/lib/libldap.so`给编译器，`-l`然后应用程序编译成功，没有任何链接错误，但仍然显示相同的 libldap -2.3.so.0 依赖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:37:11.943

[共享库](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)机制（链接是旧的，但仍然相关）在 Unix 中通过在构建时将可执行文件链接到例如 liba.so 来工作，liba.so 是 liba.so.1 的符号链接，而 liba.so.1 又是 liba.so.1.2 的链接. 然后可执行文件记录 liba.so.1 以在启动时加载。如果你更新 liba.so，它可能是 liba.so.1.5（没有 ABI 变化，第一个数字没有变化），链接看起来像 liba.so --> liba.so.1 --> liba.so .1.5，您的可执行文件现在透明地使用 1.5。如果版本转到 liba.so.2.0（API 更改！），系统将生成 liba.so --> liba.so.2 --> liba.so.2.0。您的旧可执行文件仍然使用 1.5，任何新构建的程序现在都将引用 2。显然，只要 1.x 存在，所有这些都有效。大概你的发行版提供了可以并行安装的库包，或者一些`compat-liba-1`为了旧可执行文件的利益而打包。

# python - 强制覆盖字段/方法？

> ID：14704315
> 
> 赞同：3
> 
> 时间：2013-02-05T09:41:38.040
> 
> 标签：python

如何在 Python 父类中指定某些字段/方法需要在子类中覆盖？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T09:44:28.533

你可以提出一个`NotImplementedError`：

```
def my_method(self, arg):
    raise NotImplementedError('Implement me') 
```

对于属性，您可以使用`@property`装饰器：

```
@property
def my_property(self):
    raise NotImplementedError('Implement me as well') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:46:11.953

您可以查看[抽象基类](http://docs.python.org/2/library/abc.html)模块。

然而，一个更简单的替代方法是定义一个不做任何事情的存根实现，或者引发`NotImplementedError`.

# c# - 为方法参数创建自定义 FilterAttribute

> ID：14704319
> 
> 赞同：1
> 
> 时间：2013-02-05T09:41:51.520
> 
> 标签：c#, asp.net-mvc

是否可以为传入参数创建自定义 FilterAttribute？大多数属性用于方法和类；

例如我的想法是：

`public HttpResponseMessage GetAll([CultureInfo]string culture)`

`{ if(valid) { // code here } }`

CultureInfo 是一个继承自 ActionFilterAttribute 的类 (CultureInfoAttribute)，我可以在其中使用 2 个称为 OnActionExecuted 和 OnActionExecuting 的方法。在我的课堂上，我使用了下一个属性，所以我可以在参数上使用它：

`[AttributeUsage(AttributeTargets.Parameter)]`

当我构建并调用 GetAll("culture") 时，我的自定义过滤器中的 OnActionExecuting 方法永远不会被调用....当我将属性放在我的方法 GetAll() 之上时，它确实如此。

有人有经验吗？

我想这样做的原因是因为我可以将属性放在不同的参数上，而不是一次放在整个方法上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:11:03.950

[我想你的问题在这里](https://stackoverflow.com/questions/13346801/register-global-filters-in-asp-net-mvc-4-and-autofac)得到了回答：

您应该像这样注册您的过滤`GlobalFilters`器`Global.asax.cs`：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
    filters.Add(new CultureInfoAttribute());
} 
```

# excel - Excel 公式结合文本字段

> ID：14704323
> 
> 赞同：-1
> 
> 时间：2013-02-05T09:42:00.473
> 
> 标签：excel

我想制作一个包含文本的公式，输出也将是不同的文本。像：

```
G8 = I am Red,
G9 = I am Green, 
G10 = I am White. 
```

现在，我需要一个公式，它会给出如下输出： `"Red" (in H8 field)`当我输入“我是红色”等其他输入时。

我尝试过使用“嵌套 if”，但只能添加 7 个嵌套 if，而我至少有 40 多个值要输入，并且需要为这些输入获得不同的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:52:51.843

假设您的数据在 G8 开始的 G 列中，请执行以下操作：

1.  输入 H8: `=RIGHT(G8,LEN(G8)-MAX(IF(MID(G8,ROW(INDIRECT("1:"&LEN(G8))),1)=" ",ROW(INDIRECT("1:"&LEN(G8))),0)))`。
2.  按`CTRL`+ `SHIFT`+`ENTER`而不是通常的`ENTER`- 这将定义一个 ARRAY 公式并在`{}`其周围产生括号（但不要手动输入它们！）。
3.  自动填充公式在您的范围内。

它将返回字符串中的最后一个“单词”，或者更准确地说 - 在最后一个空格和它的结尾之间的字符串的一部分，无论实际符号如何。

示例文件：[https ://www.dropbox.com/s/dfkk1cqy1z0o3pz/ColorName.xlsx](https://www.dropbox.com/s/dfkk1cqy1z0o3pz/ColorName.xlsx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:36:32.427

vlookup 可以在这里工作。您将输入所有数据组合，然后使用 vlookup，基于“我是红色”列，它会在表中找到相应的值并返回它。根据数据的类型，使用 index 和 match 方法而不是 vlookup 可能会更成功。

# asp.net - 过期的asp.net中的活动注册链接

> ID：14704324
> 
> 赞同：1
> 
> 时间：2013-02-05T09:42:03.133
> 
> 标签：asp.net, email, confirmation-email

作为用户在我的网站上注册，注册链接将发送给他。我想要的是在 48 小时后使此链接失效。有没有办法做到这一点？非常感谢。这是我的代码：在激活页面中：

```
 string userID = Request.QueryString["userID"];
   Guid gd = new Guid(userID);
   Membership.UpdateUser(user); 
```

在激活页面：

```
 MembershipUser user = Membership.CreateUser(TextBox_email.Text, TextBox_Pass.Text, TextBox_email.Text);

                   Roles.AddUserToRole(TextBox_email.Text, "Author");
                   user.IsApproved = false;
                   Membership.UpdateUser(user);

                   //  StringBuilder bodyMsg = new StringBuilder();

                   Guid userID = (Guid)user.ProviderUserKey; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:06:33.973

我想这与激活链接中的特殊查询字符串/路由参数有关

例如，您可以：

*   将链接标识符及其发布日期存储在数据存储/数据库中。然后检查当用户使用它访问您的网站时用户链接不超过 48 小时。
*   在链接本身中存储时间戳（不需要数据库），以及连接到您的密钥的时间戳的哈希码。当用户自带链接时，验证哈希码和时间戳是否匹配，然后验证时间戳不超过 48 小时

# javascript - 如何使用 Javascript 从 URL 获取响应

> ID：14704331
> 
> 赞同：3
> 
> 时间：2013-02-05T09:42:14.587
> 
> 标签：javascript, android, html, dom-events

我正在做电话间隙申请，我会从这个网址得到回复

**[http://www.apexweb.co.in/apex_quote/uname_validation.asp](http://www.apexweb.co.in/apex_quote/uname_validation.asp)**。

我不知道如何得到回复，谁能帮我写代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:56:06.873

如果您的应用程序需要从另一个网站连接到该应用程序，您可以使用 JSONP

[http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

也就是说，如果您知道 uname_validation.asp 支持 JSONP

如果您的页面位于同一个域 ( [http://www.apexweb.co.in](http://www.apexweb.co.in) ) 上，那么您可以使用 xmlhttprequest。

两者都非常容易使用 jQuery $.getJSON 与几乎所有浏览器兼容：

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

这是连接到 google 的示例：

```
$(document).ready(function(){
    var url = 'http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q="
     +"someting&callback=?';
    $.getJSON(url, function(data){
        console.log(data);
    });
}); 
```

请注意，您的 asp 应该有一个响应标头，将 contentType 设置为 application/javascript 并生成有效的 JSONP（我的 asp 是一个但生锈的，所以这里是一些伪代码）：

```
request("callback")&"("&jsonString&");" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:57:29.693

在 javascript 中使用 ajax 可以获得响应。

```
var invocation = new XMLHttpRequest();
var url = 'http://www.apexweb.co.in/apex_quote/uname_validation.asp';

function checkURL(){
        invocation.open('GET', url, true);
        invocation.onreadystatechange = handler;
        invocation.send(); 
}

function handler(evtXHR){
    if (invocation.readyState == 4)
    {
            if (invocation.status == 200)
            {
                //success
            }
            else {
                //failure
            }
    }
} 
```

# copy - 将通配符与 DOS COPY 命令一起使用会损坏目标文件

> ID：14704333
> 
> 赞同：6
> 
> 时间：2013-02-05T09:42:20.237
> 
> 标签：copy, dos, wildcard

我不理解使用通配符时 COPY 命令的行为。

我有一个`C:\Source`名为的文本文件`mpt*.asm`，我想将其复制到`C:\Dest`. 这是批处理脚本所需要的，我不能确定确切的名称`mpt*.asm`（例如可能是`mpt001.asm`）。目标名称应该完全是 mpt.asm。

如果我使用：

```
COPY C:\Source\mpt*.asm C:\Dest\mpt.asm 
```

文件文件被复制，但`0x1A`在文件末尾附加了一个额外的 ( ) 字符。

如果我使用：

```
COPY C:\Source\mpt*.asm C:\Dest\mpt.asm /B 
```

我不明白这个虚假的角色。

如果我不使用通配符，我也不会得到虚假字符。中似乎不太可能存在错误`COPY`，但这种行为似乎出乎意料。

有没有办法在不求助于 using 的情况下进行此复制`/B`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T09:51:49.270

我以前从未见过，但它也为我附加了一个额外的箭头字符。

您可以使用`xcopy`来解决此问题。

```
echo f| xcopy C:\Source\mpt*.asm C:\Dest\mpt.asm 
```

如果你读到`copy /?`它说

> 要附加文件，请为目标指定单个文件，但为源指定多个文件（使用通配符或 file1+file2+file3 格式）。

因此，通过使用单个文件名作为 dest，并在源中使用通配符，它​​可能会将其解释为附加，这可能是额外字符的用途，但由于您没有附加任何可以看到的内容。

我只是猜测，但这可以解释。

# knockout.js - 淘汰赛 - 将多个参数传递给函数

> ID：14704334
> 
> 赞同：1
> 
> 时间：2013-02-05T09:42:33.423
> 
> 标签：knockout.js

有以下视图模型：

```
Config.User = function (data) {

    var self = this;

    self.username = ko.observable();
    self.password = ko.observable();

    if (data !== undefined) {
        self.username(data.Username);
        self.password(data.Password);

    }

};

Config.Merchant = function (data) {
    var self = this;

    // Underlying data
    self.id = ko.observable();
    self.name = ko.observable();
    self.users = ko.observableArray();
    if (data !== undefined) {
        self.id(data.Id);
        self.name(data.Name);

        if (data.Users !== undefined) {
            var mappedUsers = $.map(data.Users, function (item) {
                return new Config.User(item);
            });
            self.users(mappedUsers);
        }
    }       
    });
};

Config.MerchantsViewModel = function (options) {
    var self = this;

    // Underlying data
    self.merchants = ko.observableArray();
    $.getJSON(options.loadMerchantsUrl, function (result) {
        if (result !== undefined) {
            //Set available merchants
            var mappedMerchants = $.map(result, function (item) {
                return new Config.Merchant(item);
            });
            self.merchants(mappedMerchants);
        }
    });

    self.deleteUser = function (user, merchant, viewmodel) {

            $.post(options.saveMerchantUrl, merchant, function (result) {
            if (result.success == true) {
                merchant.users.remove(user);
            }
            else {
                //TODO
            }
        });
    };
} 
```

Html 是这样的：

```
<div data-bind="foreach: merchants(), visible: merchants().length > 0">
    <div>
        <label>Merchant Id :</label><input  data-bind="value: id" />
        <label>Merchant Name :</label><input  data-bind="value: name"/>
        <table>   
            <tbody data-bind="foreach: users(), visible: users().length > 0">
                <tr>
                    <td>
                        <a href="#"  data-bind="click: function(){$root.deleteUser($data, $parent.users, $root);}"><i class="icon-remove"></i></a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div> 
```

一切似乎都正常工作，除了在 js 中，来自 $root.deleteUser 的 $parent.users 的 id 和 name 属性设置正确，但 users 属性是一个 0 元素的数组。此外，来自 $root.deleteUser 的 $root 将商家属性设置为 0 个元素的数组。我不太明白为什么会这样/

# migradoc - MigraDoc 段落文本，可以截断吗？

> ID：14704338
> 
> 赞同：0
> 
> 时间：2013-02-05T09:42:51.150
> 
> 标签：migradoc

MigraDoc 中的段落自动换行并自动调整高度。我希望能够截断文本，并尽可能将其缩小以适应。有没有人做到这一点或知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:41:13.703

您可以使用 PDFsharp 中的函数来查询文本的大小 - 然后减小字体大小或缩短文本直到合适为止。

另请参阅：http:
[//forum.pdfsharp.net/viewtopic.php?p=6158#p6158](http://forum.pdfsharp.net/viewtopic.php?p=6158#p6158)

# c# - Windows Phone 中的 SqlConnection

> ID：14704339
> 
> 赞同：1
> 
> 时间：2013-02-05T09:42:51.323
> 
> 标签：c#, .net, database, windows-phone-7, ado.net

是否可以通过移动设备使用 WP7 将日期保存在远程数据库（在服务器上）？
我想使用 ADO.NET 并插入一些值。如果不可能，我还能使用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:47:01.533

AFAIK 你不能——我 100% 肯定你不能在 WP8 或 WinRT 中，所以我认为它也适用于 WP7。

您可以做的最好的事情是在某个地方托管一个 Web 服务，该服务将提供对数据库的 RESTful 访问，然后`WebClient`在电话应用程序中使用（或任何您喜欢的 HTTP 请求方式）来调用该服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T10:49:02.860

这是一个非常酷的教程： [http ://studentguru.gr/b/dt008/archive/2010/12/02/querying-a-database-on-windows-phone-7-using-wcf.aspx](http://studentguru.gr/b/dt008/archive/2010/12/02/querying-a-database-on-windows-phone-7-using-wcf.aspx)

# java - 如何使过滤后的搜索结果显示在listview（android）中

> ID：14704342
> 
> 赞同：1
> 
> 时间：2013-02-05T09:43:04.840
> 
> 标签：java, android, listview, search

我有一个edittext和一个包含数据的listview，所以在edittext中给出关键字后，应该显示listview中的相关关键字。为此我已经完成了编码.. 问题是过滤的搜索项在 toast 中显示为再见，但我需要它显示在列表视图中，有人能告诉我哪里出错了吗？

```
public class Home extends ListActivity {
ArrayList<HashMap<String, String>> songsList;
ListView list;
LazyAdapter adapter;
JSONArray posts;

 //ArrayList thats going to hold the search results
  ArrayList<HashMap<String, String>> searchResults;
  LayoutInflater inflater;
// All static variables
static final String URL = "http://exm/ads/?json=get_recent_posts";

 static final String KEY_POSTS = "posts";
 static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_DATE = "date";
static final String KEY_CONTENT = "content";
static final String KEY_AUTHOR = "author";
static final String KEY_NAME = "name";
static final String KEY_ATTACHMENTS = "attachments";
static final String KEY_SLUG = "slug";
static final String KEY_THUMB_URL = "thumbnail";
static final String KEY_IMAGES = "images";
static final String KEY_URL = "url";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final EditText searchBox=(EditText) findViewById(R.id.search);
    final ListView  list=(ListView)findViewById(android.R.id.list);

    //get the LayoutInflater for inflating the customomView
     //this will be used in the custom adapter
     inflater=(LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

 final  ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
                final JSONParser jParser = new JSONParser();

                // getting JSON string from URL
                JSONObject json = jParser.getJSONFromUrl(URL);
                try {
                     posts = json.getJSONArray(KEY_POSTS);

        // looping through all song nodes <song>
                for(int i = 0; i < posts.length(); i++){
                    JSONObject c = posts.getJSONObject(i);
                    // Storing each json item in variable
                    String id = c.getString(KEY_ID);
                    String title = c.getString(KEY_TITLE);
                    String date = c.getString(KEY_DATE);
                    String content = c.getString(KEY_CONTENT);
                    // to remove all <P> </p> and <br /> and replace with ""
                     content = content.replace("<br />", "");
                     content = content.replace("<p>", "");
                     content = content.replace("</p>", "");

                    //authornumber is agin  JSON Object
                    JSONObject author = c.getJSONObject(KEY_AUTHOR);
                    String name = author.getString(KEY_NAME);

                    String url = null;
                    String slug = null;
                    try {
                    JSONArray atta = c.getJSONArray("attachments");
                    for(int j = 0; j < atta.length(); j++){
                        JSONObject d = atta.getJSONObject(j);

                        slug = d.getString(KEY_SLUG);

                        JSONObject images = d.getJSONObject(KEY_IMAGES);

                        JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                        url = thumbnail.getString(KEY_URL);

                    }
                    } catch (Exception e) {
                        e.printStackTrace();

                    }

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(KEY_ID, id);
            map.put(KEY_TITLE, title);
            map.put(KEY_DATE, date);
            map.put(KEY_NAME, name);
            map.put(KEY_CONTENT, content);
            map.put(KEY_SLUG, slug);
            map.put(KEY_URL, url);

            // adding HashList to ArrayList
            songsList.add(map);
                }   
                }catch (JSONException e) {
                    e.printStackTrace();

                    }

              //searchResults=OriginalValues initially
                searchResults=new ArrayList<HashMap<String, String>>(songsList);

         // Getting adapter by passing json data ArrayList
            adapter=new LazyAdapter(this, songsList);    
             list.setAdapter(adapter);

             searchBox.addTextChangedListener(new TextWatcher() {

                 public void onTextChanged(CharSequence s, int start, int before, int count) {
                   //get the text in the EditText
                   String searchString=searchBox.getText().toString();
                   int textLength=searchString.length();

                          //clear the initial data set
                   searchResults.clear();

                   for(int i=0;i<songsList.size();i++)
                   {
                  String playerName=songsList.get(i).get("title").toString();

                  if(textLength<=playerName.length()){

                  //compare the String in EditText with Names in the ArrayList
                    if(searchString.equalsIgnoreCase(playerName.substring(0,textLength)))
                          Toast.makeText(getApplicationContext(),playerName,1).show();
                    searchResults.add(songsList.get(i));
                  }
                   }

                   adapter.notifyDataSetChanged();
                 }

                 public void beforeTextChanged(CharSequence s, int start, int count,
                     int after) {

                   }

                   public void afterTextChanged(Editable s) {

                   }
                  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:51:01.670

**SOLUTION**

You are not changing the underlying data in the adapter. You should change the data of the adapter: For example, try to replace

```
adapter.notifyDataSetChanged(); 
```

with adapter=new LazyAdapter(this, searchResults);
list.setAdapter(adapter);

to Tell the adapter that the new data is `searchResults`.

* * *

**GOOD SOLUTION** You shoudl use a [Filter](http://developer.android.com/reference/android/widget/Filter.html) in your adapter to filter the results.

# actionscript - Adobe Flex：无法使用 XIFF 库连接到 XMPP 服务器

> ID：14704348
> 
> 赞同：1
> 
> 时间：2013-02-05T09:43:18.173
> 
> 标签：actionscript, xmpp, xiff

我正在尝试使用[XIFF 库](http://www.igniterealtime.org/projects/xiff/)连接到我的本地 XMPP 服务器，但是我无法这样做。

我在我的本地主机上安装了[eJabberd](http://www.process-one.net/en/ejabberd/downloads/)并使用 XMPP 客户端（[Pandion](http://pandion.im/download)）连接到它，这工作正常......我能够连接到本地 jabber 服务器。

接下来，我尝试使用以下代码连接到 XMPP 服务器：

登录视图.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="Login">
    <s:layout>
        <s:FormLayout/>
    </s:layout>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script source="connection/Connection.as"/>
    <s:Spacer/>
    <s:Label text="Username"/>
    <s:TextInput id="txtUsername" width="200"/>
    <s:Spacer/>
    <s:Label text="Password"/>
    <s:TextInput id="txtPassword" width="200" displayAsPassword="true"/>
    <s:Button id="btnLogin" label="Login" click="login(txtUsername.text, txtPassword.text)" mouseUp="navigator.pushView(HomeView)"/>
</s:View> 
```

连接.as：

```
import org.igniterealtime.xiff.conference.Room;
import org.igniterealtime.xiff.core.UnescapedJID;
import org.igniterealtime.xiff.core.XMPPConnection;
import org.igniterealtime.xiff.events.LoginEvent;

private var con:XMPPConnection;
private var room:Room;

private function login (username:String, password:String): void {
    con = new XMPPConnection ();
    con.username = username + "@mydomain";
    con.password = password;
    con.server = "localhost";
    con.port = 5222;
    con.connect (0);
} 
```

但是，我无法使用上面的 ActionScript 代码连接到 XMPP 服务器。只是想知道我可能哪里出错了。

任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T07:17:25.823

看起来像一个跨域策略问题。尝试：

1.  首先[找到您的策略日志文件](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7ec4.html)

2.  启动您的 SWF

3.  检查策略文件内容

另一种做同样事情的方法是打开浏览器网络日志并检查 Flash 是否正在尝试加载类似`http://localhost/crossdomain.xml`.

这个问题有两种通用的解决方案：

*   [从您的服务器提供](https://docs.google.com/viewer?url=http://www.adobe.com/devnet-docs/acrobatetk/tools/AppSec/CrossDomain_PolicyFile_Specification.pdf)[正确`crossdomain.xml`](https://docs.google.com/viewer?url=http://www.adobe.com/devnet-docs/acrobatetk/tools/AppSec/CrossDomain_PolicyFile_Specification.pdf) 的服务**或**

*   从与 XMPP 数据相同的主机提供 SWF 文件

出于调试目的，[添加 SWF 文件位置做本地受信任的沙箱](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000459.html)应该可以解决所有问题。

# javascript - Chrome 中的 DOM 操作缓慢（隐藏/显示元素）

> ID：14704350
> 
> 赞同：2
> 
> 时间：2013-02-05T09:43:46.773
> 
> 标签：javascript, google-chrome, dom, pagination

我今天早上在[http://jsfiddle.net/Hwqb3/3/上做了一个小测试。](http://jsfiddle.net/Hwqb3/3/)这是一个更大的分页项目的背后。我已经用原生 JS 和 jQuery 试过了。测试使用 jQuery。

对 SO 的快速搜索表明，如果设置了 background-size，Chrome 处理的效果很差，但这里不是这种情况。源中没有背景大小的痕迹，并且检查元素显示没有设置/继承背景大小。

在将 5,000 个元素添加到列表时忽略初始页面加载。它只有几秒钟，但它只是有一些要测试的元素。

在 Firefox 18.0.1 中，页面之间的移动几乎是即时的，而在 IE9 中，鼠标点击和分页结果刷新之间可能有 0.1 秒的延迟；然而，在 Chrome (24.0.1312.57 m) 中，延迟是明显的 1-2 秒。

昨晚我花了大部分时间在我的代码上倾注，看看我是否能在编写这个测试之前找到原因。这是赤裸裸的，仍然存在问题。

我只能假设 Chrome 正在处理 element.style.display=''; 不良。没有它（甚至循环遍历 5,000 个元素以显示='none'），事情就会变得活泼。

有任何想法吗？客户希望对大约 4,000 - 7,500 的结果集进行分页，但不希望重新加载页面，并且不明白他们应该应用过滤器将该列表缩减到 <100，因为没有人会翻页到 200 - 375 页寻找特定的东西。

最后的手段是 AJAX 调用，它在 Chrome 上可能会稍微快一些。虽然尚未测试。

提前致谢。

来自 jsfiddle 的代码，不包括 jQuery CDN 链接

HTML：

```
<a href="javascript:jump('first');">First</a>
<a href="javascript:jump('-1');">Previous</a>

<a href="javascript:jump('+1');">Next</a>
<a href="javascript:jump('last');">Last</a>
<br>
<ul id='list'>
</ul> 
```

JS：

```
window.onload=function() { 
    window.list=$('#list'), window.max=20, window.page=0, window.pages=0, window.elements;

    var i=0;
    while(i<5000) {   
        i++;
        list.append("<li>"+i+"</li>");
    }

    jump('first');
};

function jump(operation) {

    window.elements=list.find('li');
    window.pages=Math.ceil(window.elements.length/window.max);

    if(operation=='first') {
        window.page=0;
    }
    else if(operation=='last') {
        window.page=(window.pages-1);
    }
    else if(operation=='+1') {
        window.page=(window.page+1);
        if(window.page>=window.pages) {
            window.page=(window.pages-1);
        }
    }
    else if(operation=='-1') {
        window.page=(window.page-1);
        if(window.page<0) {
            window.page=0;
        }
    }

    var showing=0, total=0;

    window.elements.each(function() {
        var show=false, self=$(this);

        if(showing<window.max) {
            if(total>=(window.page*window.max) && total<((window.page*window.max)+window.max)) {
                self[0].style.display='';
                showing++;
                show=true;
            }
        }

        if(!show) {
            self[0].style.display='none';
        }
        total++;
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:15:37.667

检查这个

```
window.onload = function() { 
    window.list = $('#list'), 
    window.max = 20, 
    window.page = 0, 
    window.pages = 0, 
    window.elements;

    var i = 0;
    var html = '';
    while(i < 5000) { 
        i++
        html += '<li>' + i + '</li>';
    }    
    list.append(html);

    window.elements = list.find('li');
    window.pages = Math.ceil(window.elements.length/window.max);    

    jump('first');
};

function jump(operation) {

    if (operation == 'first') 
        window.page = 0;
    else if (operation == 'last') 
        window.page = window.pages - 1;
    else if (operation == '+1') 
        (window.page + 1 >= window.pages) ? window.page = window.pages - 1 : window.page++ ;
    else if (operation == '-1') 
        (window.page - 1 < 0) ? window.page = 0 : window.page--;

    var index = page * window.max;
    window.elements.hide().slice(index, index + window.max).show();
} 
```

[http://jsfiddle.net/Hwqb3/16/](http://jsfiddle.net/Hwqb3/16/)

# cakephp - 在 cakephp 中执行简单查询

> ID：14704353
> 
> 赞同：0
> 
> 时间：2013-02-05T09:44:04.350
> 
> 标签：cakephp, has-many

电影有很多关系，关系属于电影。关系表有电影 _id 字段。我想根据电影模型显示关系列表。所以在 MoviesController.php 我有：

```
public function view($id = null) {
    if (!$id) {
        $this->Session->setFlash(__('Invalid Movie', true));
        $this->redirect(array('action' => 'index'));
        }
    $this->set('Movie', $this->Movie->read(null, $id));
    $cid = $this->Movie->read('Relation.id');
    $cid_extract = Set::extract($cid, 'Relation.id');
    $this->set('planComps', $this->Movie->find('all',array('conditions' => array("movie_id" => $cid_extract))));
} 
```

但我明白了

```
Error:  SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Relation.id' in 'field list'

SQL Query:  SELECT `Relation`.`id`, `Movie`.`id` FROM `myproject`.`movies` AS `Movie` WHERE `Movie`.`id` = 1 LIMIT 1 
```

但我需要的查询是：

```
SELECT `Relation`.`id` FROM `myproject`.`relations` AS `relation` WHERE `Movie`.`id` = 1 LIMIT 1 
```

我是 cakephp 的新手。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:03:45.267

```
$this->loadModel('Relation');
$records = $this->Relation->find('all', array(
                'recursive' => -1,
                'conditions' => array('Relation.movie_id' => $movie_id),
                'fields' => array('Relation.id')
            )); 
```

# php - 应用程序将我返回到主页

> ID：14704357
> 
> 赞同：0
> 
> 时间：2013-02-05T09:44:15.560
> 
> 标签：php, facebook, facebook-graph-api

我目前正在尝试使用 Facebook 登录我的网站。

目前我刚刚制作了一个简单的应用程序，它应该回显用户的名字，但它只是将我重定向到`http://facebook.com/`

编辑：我这里是我的 PHP 源代码，我的例子：

```
require_once 'facebook.php';
$facebook = new Facebook(array(
'appId' => '****************',
'secret' => '****************',
'cookie' => true, ));
$req_perms = "publish_stream,offline_access,user_status,email,read_stream";

$session = $facebook->getSession();

$loginUrl = $facebook->getLoginUrl(array('canvas'=>1,'fbconnect' => 0,'req_perms'=>$req_perms));
$me = null;

if (!$session) { echo "<script>top.location.href= '$loginUrl';</script>";exit;}

else{

 try {
        $uid    =   $facebook->getUser();
        $me     =   $facebook->api('/me');
     } 
 catch (FacebookApiException $e) 
   { echo $me['firstname']; exit;}
}

 ?> 
```

编辑：我进行了重制，将 getSession() 升级到 getUser()。

但它仍然只是重定向到 Facebook 的主页。有任何想法吗？

新来源：

```
<?php

require_once("facebook.php");

$config = array();
$config[‘appId’] = '116624645175305';
$config[‘secret’] = 'a6b557e6d703328d0cac9db47b20ae98';
$config[‘fileUpload’] = false; // optional
$config[‘cookie’] = true;

$facebook = new Facebook($config);

$req_perms = "publish_stream,offline_access,user_status,email,read_stream";

$user = $facebook->getUser();
$loginUrl = $facebook->getLoginUrl(array('canvas'=> 1,'fbconnect' => 0,'req_perms' => $req_perms));
$user_info = null;
if (!$user) {
    echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";exit;
}else{
    try {
        $user_info = $facebook->api('/me');
    } 
    catch (FacebookApiException $e) {
        echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>"; exit;
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:55:27.607

Facebook SDK for PHP 没有方法 getSession();

# android - 处理小屏幕上的editText编辑

> ID：14704359
> 
> 赞同：0
> 
> 时间：2013-02-05T09:44:20.627
> 
> 标签：android, scroll, android-edittext, android-screen-support

## 背景

我有我的活动的下一个布局：

*   垂直线性布局
    *   带有 viewPager 的 TabHost。
    *   “状态栏”（imageView/textView）。

有时，在 viewPager 中，我有一个带有 EditText 的片段。

## 问题

在某些屏幕（如 Galaxy mini）上，我注意到当您单击 editText（以便写入）时，软键盘会隐藏所有内容，因此您只剩下 actionBar、选项卡和状态栏.

## 我试过的

这就是为什么我决定在清单上为此活动添加下一个标志：

```
android:windowSoftInputMode="adjustPan|adjustResize|stateHidden" 
```

这看起来是一个完美的解决方案 - 它在键入时隐藏了操作栏、选项卡，甚至状态栏，为 editText 留下了足够的空间来显示（并且还可以滚动到它）。

但是，在更大的屏幕上测试它（比如 Galaxy S3 的屏幕），这会导致在 editText 位于底部的情况下，softKeyboard 会覆盖 editText。

我试图删除 adjustPan 标志，它适用于大屏幕，但在小屏幕上，即使它已滚动到 editText，状态栏也会隐藏它。

我还尝试将某些视图的[isScrollContainer](http://developer.android.com/reference/android/view/View.html#attr_android%3aisScrollContainer)设置为 true ，希望它会导致它们在编辑时调整大小，但它没有做任何事情。

## 问题

我该怎么做才能解决这个问题并处理各种屏幕？

我可以检查屏幕的类型并以编程方式使用适当的标志（如[这里](http://developer.android.com/reference/android/view/Window.html#setSoftInputMode%28int%29)），但我不确定规则应该是什么（密度/分辨率/屏幕尺寸），以及我是否真的涵盖了它们的所有类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:05:08.290

尝试`android:windowSoftInputMode="adjustPan`

具有附加功能

制作另一个像这样的课程

```
package com.example.customLayout;

import android.content.Context;
import android.util.AttributeSet;
import android.widget.RelativeLayout;

public class MyRelativeLayout extends RelativeLayout
{
    private OnRelativeLayoutChangeListener layoutChangeListener;

    public interface OnRelativeLayoutChangeListener 
    {
        void onLayoutPushUp();
        void onLayoutPushDown();
    }

    public MyRelativeLayout(Context context, AttributeSet attributeSet) 
    {
        super(context, attributeSet);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) 
    {
        try 
        {
            final int proposedheight = MeasureSpec.getSize(heightMeasureSpec);
            final int actualHeight = getHeight();
            if (actualHeight > proposedheight)
            {
                // Keyboard is shown
                layoutChangeListener.onLayoutPushUp();
            }
            else if(actualHeight < proposedheight)
            {
                // Keyboard is hidden
                layoutChangeListener.onLayoutPushDown();
            }
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }   

        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }

    public void setLayoutChangeListener(OnRelativeLayoutChangeListener layoutChangeListener) 
    {
        this.layoutChangeListener = layoutChangeListener;
    }

    public OnRelativeLayoutChangeListener getLayoutChangeListener() 
    {
        return layoutChangeListener;
    }
} 
```

现在在您的布局 xml 文件中将此类的自定义视图作为父级，如下所示

```
<com.example.customLayout.MyRelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:custom="http://schemas.android.com/apk/res/com.example.customLayout"

    android:id="@+id/customRelativeLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

// your original layout file

</com.example.customLayout.MyRelativeLayout> 
```

在你的java文件中尝试以下代码

myRelativeLayout=(MyRelativeLayout)findViewById(R.int.customRelativeLayout);

```
 myRelativeLayout.setLayoutChangeListener(new OnRelativeLayoutChangeListener() {

                public void onLayoutPushUp() 
                {
                    Controller_Test1.tabWidget.setVisibility(View.GONE);    
                }

                public void onLayoutPushDown() 
                {
                    Controller_Test1.tabWidget.setVisibility(View.VISIBLE);
                }
            }); 
```

# c# - c#：字符串类与字符串结构

> ID：14704361
> 
> 赞同：0
> 
> 时间：2013-02-05T09:44:24.540
> 
> 标签：c#, string, class, struct, naming-conventions

> **可能重复：**
> [字符串和字符串有什么区别？](https://stackoverflow.com/questions/7074/whats-the-difference-between-string-and-string)

我使用 C# 已经有一段时间了，我曾经注意到这两种类型之间的任何区别。

```
String myStringAsClass;
string myStringAsStruct; 
```

除了您可以在代码或约定上使用的说明以使用来自 String 类的静态函数和来自字符串结构的声明之外，还有什么不同吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T09:45:50.793

他们是一样的。它们都是引用类型。

```
System.String == string
System.Object == object
System.Int32 == int
System.Int64 == long 
```

...ETC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:47:13.937

`string`是 的别名`System.String`，就像`int`的别名一样`System.Int32`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:47:05.427

C# 中的类和结构之间是有区别的。然而，这在这里**无关紧要**，因为

`String == string` 两者都是 `class`

因此，总而言之，两者之间没有区别，并且`string`是一个类。

# mysql - 多属性三类属性产品的MySQL数据库设计

> ID：14704362
> 
> 赞同：1
> 
> 时间：2013-02-05T09:44:25.133
> 
> 标签：mysql, database-design, metadata

我需要为具有一组通用属性（例如名称、价格、尺寸等）的产品建立一个数据库。我做得很好。但是，每种产品都有一组营养价值，需要将其作为单独的设计放在一个表格中，因为许多产品具有独特的特性，这些特性在产品之间并不通用。

产品不仅必须具有独特的属性（有时在产品之间共享），而且必须每 100 克、每份和 %RDA 值存储这些属性。

例如，一种产品必须显示钾含量：每 100 克 = 702 毫克，每份 = 393 毫克，%RDA = 20%。

```
 per 100g      per 56g        %RDA
    Protien         71g           40g            -
    Potassium       702mg         393mg          20% 
```

这就是理想情况下应该在每个产品页面上呈现结果的方式，记住每个产品将有多达大约 20 个属性，有些可能是唯一的，有些可能会被多次使用。

我想有2张桌子：

```
Products Table: Product ID, Product name, Price

Product_meta Table: Pmeta_id, Product ID, metaKey, metaValue 
```

但我不确定如何存储每 100 克、每份和 %RDA 的值。

还有什么是查询数据库以插入这些值的好方法？每个产品有这么多信息似乎很复杂..

# uitableview - 从服务器加载数据表视图将其挂起

> ID：14704366
> 
> 赞同：0
> 
> 时间：2013-02-05T09:44:29.360
> 
> 标签：uitableview

我正在使用下面的代码用数据填充表格视图，它也被填充，但问题是在滚动表格视图时它会挂起，并且在一段时间后它会滚动一小段距离。.h 文件是

```
#import <UIKit/UIKit.h>
#import "JSON.h"
@interface HomeViewController : UIViewController <UITabBarControllerDelegate,UINavigationControllerDelegate,UIActionSheetDelegate,UIImagePickerControllerDelegate>

@property (strong, nonatomic) IBOutlet UINavigationBar *navigationBar;
@property (strong,nonatomic) IBOutlet UITableView *homeProfileTableview;
@property (nonatomic ,retain) UIImageView *clockImage;
@property (nonatomic,strong) UIImageView *ItemImage;
@property (nonatomic,strong) UIImageView *locationImage;
@property (nonatomic, retain) NSArray *Tableata;

@end 
```

.m 文件

```
#import "HomeViewController.h"
#import "CameraViewController.h"
#import "JSON.h"
#import "SBJsonParser.h"

@interface HomeViewController ()

@end

@implementation HomeViewController
@synthesize homeProfileTableview,clockImage,Tableata,ItemImage,locationImage;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    self.tabBarController.delegate=self;
    [self.navigationBar setBackgroundImage:[UIImage imageNamed:@"yellow_bar.png"] forBarMetrics:UIBarMetricsDefault];
    [self.navigationBar setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor colorWithRed:0.0/255.0 green:0.0/255.0 blue:0.0/255.0 alpha:1.0], UITextAttributeTextColor,[UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0], UITextAttributeTextShadowColor,[NSValue valueWithUIOffset:UIOffsetMake(0, 1)], UITextAttributeTextShadowOffset,[UIFont fontWithName:@"Georgia-BoldItalic" size:25.0], UITextAttributeFont,nil]];

    UIImage *image = [UIImage imageNamed:@"refresh.png"];
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setBackgroundImage:image forState:UIControlStateNormal];
    button.frame = CGRectMake(0.0, 0.0, image.size.width, image.size.height);
    [button addTarget:self action:@selector(refreshButtonTapped) forControlEvents:UIControlEventTouchUpInside];
    UIView *buttonView = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, image.size.width, image.size.height)];
    [buttonView addSubview:button];
    UIBarButtonItem *backItem = [[UIBarButtonItem alloc] initWithCustomView:buttonView];
    [self.navigationBar.topItem setRightBarButtonItem:backItem];

//    NSString *jsonString = [NSString
//                            stringWithContentsOfURL:[NSURL URLWithString:@"http://izisstechnology.com/garage/index.php?method=login&username=ashu&password=1234"]
//                            encoding:NSStringEncodingConversionAllowLossy
//                            error:nil];
    NSString *jsonString = [NSString
                            stringWithContentsOfURL:[NSURL URLWithString:@"http://izisstechnology.com/garage/index.php?method=home&start=0"]
                            encoding:NSStringEncodingConversionAllowLossy
                            error:nil];

    SBJsonParser *parser=[[SBJsonParser alloc]init];

    NSDictionary *results=[parser objectWithString:jsonString ];

    //NSDictionary *results = [parser objectWithString:jsonString error:nil];
    //[parser release], parser = nil;
    NSLog(@"%@",results);
    // Set tableData
    [self setTableata:[results objectForKey:@"new"]];
    [super viewDidLoad];

}
- (void)refreshButtonTapped {

}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 1;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [Tableata count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"homeProfileTableIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;
    }
    NSDictionary *item = [Tableata objectAtIndex:[indexPath row]];
    NSURL *url = [NSURL URLWithString:[item objectForKey:@"seller_image"]];

    NSData *data = [[NSData alloc] initWithContentsOfURL:url];
    UIImage *image = [[UIImage alloc] initWithData:data];

    //clock image
    CGRect imageFrame = CGRectMake(240,10, 20, 20);
    self.clockImage = [[UIImageView alloc] initWithFrame:imageFrame];    
    self.clockImage.image = [UIImage imageNamed:@"clock.jpg"];    
    [cell.contentView addSubview:self.clockImage];

    //location image
    CGRect imageFrame1 = CGRectMake(80,20, 20, 20);
    self.locationImage = [[UIImageView alloc] initWithFrame:imageFrame1];
    self.locationImage.image = [UIImage imageNamed:@"location.jpg"];
    [cell.contentView addSubview:self.locationImage];

    //username
    UILabel *username=[[UILabel alloc] initWithFrame:CGRectMake(80,0, 70, 20)];
    username.text=[item objectForKey:@"seller_name"];
    UIFont *myFont = [ UIFont fontWithName: @"futura" size: 18.0 ];
    username.font  = myFont;
    [cell.contentView addSubview:username];

    //user location
    UILabel *userlocation=[[UILabel alloc] initWithFrame:CGRectMake(100,20, 70, 20)];
    userlocation.text=[item objectForKey:@"prod_country"];
    UIFont *myFont2 = [ UIFont fontWithName: @"futura" size: 18.0 ];
    userlocation.font  = myFont2;
    [cell.contentView addSubview:userlocation];

    //item image
    NSURL *url1 = [NSURL URLWithString:[item objectForKey:@"item_image1"]];

    NSData *data1 = [[NSData alloc] initWithContentsOfURL:url1];
    UIImage *image1 = [[UIImage alloc] initWithData:data1];
    CGRect imageFrame2 = CGRectMake(20,40, 280, 320);
    self.ItemImage = [[UIImageView alloc] initWithFrame:imageFrame2] ;

    self.ItemImage.image = image1;

    [cell.contentView addSubview:self.ItemImage];

    UIButton *playButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    playButton.frame = CGRectMake(20, 5, 30, 30);
    [playButton setTitle:@"" forState:UIControlStateNormal];
    playButton.backgroundColor = [UIColor clearColor];
    [playButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal ];
    UIImage *buttonImageNormal = image;
    UIImage *strechableButtonImageNormal = [buttonImageNormal stretchableImageWithLeftCapWidth:12 topCapHeight:0];
    [playButton setBackgroundImage:strechableButtonImageNormal forState:UIControlStateNormal];
    [cell.contentView addSubview:playButton];
    return cell;

}
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 380;
}
- (void)viewDidUnload {
    [self setNavigationBar:nil];
    [super viewDidUnload];
}
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController
{
    if ([viewController isKindOfClass:[CameraViewController class]]) {
        UIActionSheet *actionSheet = [[UIActionSheet alloc]
                                      initWithTitle:@"Choose Source Type?"
                                      delegate:self
                                      cancelButtonTitle:@"Cancel"
                                      destructiveButtonTitle:nil
                                      otherButtonTitles:@"Select From Library", @"Capture From Camera", nil];
        [actionSheet showFromTabBar:tabBarController.tabBar];
        return NO;
    }
    return YES;
}
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    switch (buttonIndex) {
        case 0:
        {
            CameraViewController *cameraViewController=[self.tabBarController.viewControllers objectAtIndex:2];
            if (!cameraViewController.imagePicker) {
                cameraViewController.imagePicker =[[UIImagePickerController alloc] init];
                cameraViewController.imagePicker.allowsEditing = YES;
            }
            cameraViewController.imagePicker.delegate=self;
            cameraViewController.imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
            [self presentViewController:cameraViewController.imagePicker
                               animated:YES completion:nil];
        }
            break;
        case 1:
        {
            CameraViewController *cameraViewController=[self.tabBarController.viewControllers objectAtIndex:2];
            if (!cameraViewController.imagePicker) {
                cameraViewController.imagePicker =[[UIImagePickerController alloc] init];
                cameraViewController.imagePicker.allowsEditing = YES;
            }
            if ([UIImagePickerController isSourceTypeAvailable:
                 UIImagePickerControllerSourceTypeCamera])
            {
                cameraViewController.imagePicker.delegate=self;
                cameraViewController.imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
                [self presentViewController:cameraViewController.imagePicker
                                   animated:YES completion:nil];
            }
        }
            break;
        case 2:
            [self dismissViewControllerAnimated:YES completion:nil];
            break;
        default:
            break;
    }
}
-(void)imagePickerController:
(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    CameraViewController *cameraViewController=[self.tabBarController.viewControllers objectAtIndex:2];
    cameraViewController.imageSelected=nil;
    UIImage *image = info[UIImagePickerControllerEditedImage];
    cameraViewController.imageSelected=image;
    cameraViewController.imagePicker.delegate=cameraViewController;
    [self dismissViewControllerAnimated:YES completion:nil];
    self.tabBarController.selectedViewController=cameraViewController;
}

-(void)imagePickerControllerDidCancel:
(UIImagePickerController *)picker
{
    [self dismissViewControllerAnimated:YES completion:nil];
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T22:32:14.990

您的代码充满了同步请求。例如：

```
 NSString *jsonString = [NSString
                            stringWithContentsOfURL:[NSURL URLWithString:@"http://izisstechnology.com/garage/index.php?method=home&start=0"]
                            encoding:NSStringEncodingConversionAllowLossy
                            error:nil]; 
```

或者

```
NSData *data = [[NSData alloc] initWithContentsOfURL:url];
    UIImage *image = [[UIImage alloc] initWithData:data]; 
```

当您执行同步请求时，整个 UI 都会被阻塞，因为请求是在主线程上执行的。基本上，UIKit 的大部分事情都是在主线程上完成的，例如处理触摸、绘制 UI 等。因此，例如触摸在所有数据下载完成之前不会被处理。结果，您的应用程序出现错误。

我最近观看了一个名为“在 iOS 上构建并发用户界面”的 WWDC 2012 会议。这很有趣也很有帮助。主题演讲中的插图使理解材料变得容易。无论如何，关于这个主题有大量的资源，你只需要谷歌“异步 iOS”，你会发现非常有用的教程等。

# c# - Windows 窗体图标未显示在任务栏中 C#

> ID：14704370
> 
> 赞同：16
> 
> 时间：2013-02-05T09:44:37.583
> 
> 标签：c#, .net, winforms

我正在向我创建的表单添加一个图标。当我通过 VS2012 运行程序时，图标会出现在任务栏上。但在发布项目并安装后，图标会显示在表单边框中，但不会显示在任务栏中。我在这里做错了什么？

我试过调整图标的大小。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-05T09:46:58.100

您是否转到项目的属性并在“应用程序”选项卡中设置了一个图标（这当然应该与用于主窗口的图标相同以避免任何混淆）？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-04-11T14:55:07.193

您是否转到表单的属性并检查行：显示图标 =“真”？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-14T13:22:15.487

对话框/表单图标在获得正确的键盘焦点之前不会出现在任务栏上。我不太确定什么是“正确”的焦点，但那些制作窗户的人都不是。这个问题通常伴随着缺少第一个表单激活事件（哦，是的，它经常发生）。当您隐藏所有表单（在 Windows 应用程序中）然后显示下一个表单时，可能会发生这种情况。

所以这不起作用：

```
newForm.Show () ;
currentForm.Hide () ; //The newForm does not have the proper focus yet

// actualy in this moment (I think) your application loose focus beacuse there is no application window. 
```

这可能会奏效：

```
newForm.Shown += newForm_Shown ;
newForm.Show () ;
void newForm_Shown ( object sender , EventArgs e )
{
    currentForm.Hide () ;
} 
```

只要有可能，您应该在隐藏前一个表单之前显示下一个表单，然后在新表单的显示/激活事件期间隐藏当前表单。我知道的其他工作是做一些延迟的表单激活。您可以在某种表单激活方法上尝试类似 BeginInvoke 的方法，但这通常是个坏主意。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-07-08T19:34:48.020

Go to Properties->Application->Icon and manifest

[![enter image description here](../Images/a226e3fca3946045ff98490486bb4f18.png)](https://i.stack.imgur.com/Ztgp7.jpg)

# text - 每个项目的 Redmine 文本格式

> ID：14704375
> 
> 赞同：0
> 
> 时间：2013-02-05T09:44:54.447
> 
> 标签：text, formatting, markdown, redmine, textile

我想在不同的 Redmine 项目中设置不同的文本格式化程序。例如，一个项目的用户更喜欢纺织品，另一个项目的用户 - 降价。但是 Redmine 对`text formatter`.

目前我们使用Redmine 2.1.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-19T11:04:57.083

Redmine 没有开箱即用的此类功能，但您可以安装一个插件，让您拥有基于每个项目的格式。

一个这样的插件是这样的： [https ://github.com/a-ono/redmine_per_project_formatting](https://github.com/a-ono/redmine_per_project_formatting)

要安装它：

1.  导航到您的 redmine 根文件夹，例如 /opt/redmine
2.  下载解压，或者git clone：

    git clone [https://github.com/a-ono/redmine_per_project_formatting.git](https://github.com/a-ono/redmine_per_project_formatting.git) plugins/redmine_per_project_formatting

3.  执行迁移：

    bundle exec rake redmine:plugins:migrate RAILS_ENV=production

4.  启动或重新启动您的 Redmine

# ios - 在 uiwebviews 中滚动时的空白区域

> ID：14704376
> 
> 赞同：1
> 
> 时间：2013-02-05T09:44:55.847
> 
> 标签：ios, html, uiwebview, scroll

![在 uiwebviews 中滚动页面时出现问题](../Images/f5bf12124fc57d16d5cceb24f6259fa6.png)

我正在寻找一种方法来阻止页面滚动太远，当离应该停止的位置太远时留下一个空白的灰色

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:47:40.293

```
webView.scrollView.bounces = NO; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:58:38.507

你可以这样设置

```
webView.scrollView.bounces = NO; 
```

# jsf - Primefaces：如果关闭对话框，则使用 modal=true 停用背景

> ID：14704378
> 
> 赞同：0
> 
> 时间：2013-02-05T09:44:57.690
> 
> 标签：jsf, dialog, primefaces, modal-dialog

我正在使用`modal= true`和`appendToBody=true`在我的对话框中，它在 Chrome 和 Firefox 中运行良好，但在 IE8 中运行良好。对话框出现了，但是如果我关闭对话框，背景仍然是蓝色的，因为`modal=true`，但我必须使用它。

这是我的代码：

```
 <ui:composition template="../templates/site.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:sec="http://www.springframework.org/security/tags">

    <ui:define name="content">

        <h:form id="form">

            <p:commandButton value="Button" type="button" id="myButton"
                onclick="form:testDialog.show()" />

        <p:dialog id="testDialog" widgetVar="testDialog"
            header="My Test Dialog" modal="true" appendToBody="true">
            <h:form>

                <p:fieldset legend="Dialog">
                    <p:spacer height="30" />

                </p:fieldset>
            </h:form>
        </p:dialog>
        </h:form>
    </ui:define>
</ui:composition> 
```

**编辑：**

问题是对话框的命名。ID 和 widgetVar 不能同名。与[此帖相关](https://stackoverflow.com/questions/10579619/primefaces-3-component-id-and-widget-var-should-not-have-the-same-name)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:05:35.053

你`<p:layout>`在你的模板文件中使用吗？

当我混合布局和模式对话框时，我总是会遇到问题。

在我的父模板中，我通常使用以下方式定义一个空间来放置我的模式对话框`<ui:insert>`：

### 主模板：xhtml：

```
<h:body>
    <p:layout>
        <p:layoutUnit position="cemter">
            <ui:insert name="content"/>
        </p:layoutUnit>
    <p:layout>

    <ui:insert name="dialogs"/>
</h:body> 
```

### someXhtml.xhtml

```
<ui:composition template="mainTemplate.xhtml">
    <ui:define name="content">
        bla bla bla
    </ui:define>

    <ui:define name="dialogs">
        <p:dialog modal="true" appendToBody="false">
            ....
        </p:dialog>
    </ui:define>
</ui:composition> 
```

使用它，您可以将表单“手动附加”到正文，因此不需要将附加到正文设置为 true。这使我可以在任何 xhtml 页面中插入表单，而不必担心布局中的模态表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:52:45.573

您在这里有嵌套的表单，这在 HTML 中是不允许的。尝试在按钮之后和对话框之前立即关闭第一个公司：

```
<h:form id="form">
  <p:commandButton value="Button" type="button" id="myButton"
      onclick="testDialog.show()"/>
</h:form>

<p:dialog id="testDialog" widgetVar="testDialog"
    header="My Test Dialog" modal="true" appendToBody="true">
  <h:form>
    <p:fieldset legend="Dialog">
      <p:spacer height="30" />
    </p:fieldset>
  </h:form>
</p:dialog> 
```

我也改成`form:testDialog.show()`，`testDialog.show()`你的表述似乎不起作用。

# css - 相对父级中的绝对定位元素不与其他元素重叠

> ID：14704382
> 
> 赞同：1
> 
> 时间：2013-02-05T09:45:17.477
> 
> 标签：css, css-position, z-index

我有一个列表（ul - li），其中 li 是浮动的，所以我有一个带有块的网格。每个 li 都有相对位置。

在每个 li 中，我都有一个隐藏的 div（带有“more”类），只有当你将鼠标悬停在它的父 li 时才会显示。我想将 .more div 附加在 li 底部的 STARTING 向下并重叠任何其他 li 而不将其他 li 推开/向下。因为它附加到底部，所以我将 .more div 的底部位置设置为与 more div 的确切高度匹配的负值。

这或多或少有效，但 .more div 总是显示在其他 li 的下方。它只是重叠它的父级。

我已经尝试将所有 li 的静态 z-index 设为 5，并将所有 .more div 的静态 z-index 设为 500，但这仍然无济于事。

A 做了一个 jsFiddle：http: [//jsfiddle.net/yNS6R/](http://jsfiddle.net/yNS6R/)

相关代码：

```
 ul li
    {
        background: yellow;
        border: 1px solid green;
        float: left;
        height: 200px;
        margin: 0 10px 10px 0;
        position: relative;
        width: 22%;
        z-index: 2;
    }

    ul li .more
    {
        background: red;
        border-bottom: 1px solid green;
        border-left: 1px solid green;
        border-right: 1px solid green;
        bottom: -50px;
        display: none;
        height: 50px;
        left: -1px;
        position: absolute;
        width: 100%;
        z-index: 500;
    }

    ul li:hover .more
    {
        display: block;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:07:51.933

从`z-index`你的`ul li`and中删除`ul li .more`，并将其添加到`:hover`状态：

```
ul li:hover .more {             
   display: block;
   z-index: 1;
} 
```

[更新了 jsfiddle](http://jsfiddle.net/yNS6R/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:09:44.960

这只是因为您将 z-index 添加到 li。如果您删除 li 的 z-index，那么它将正常工作。

```
ul li
{
    background: yellow;
    border: 1px solid green;
    float: left;
    height: 200px;
    margin: 0 10px 10px 0;
    position: relative;
    width: 22%;
    z-index: 2; // here you add z-index to li
} 
```

# unix - 如何在引号中激活/运行 Unix 命令？

> ID：14704383
> 
> 赞同：0
> 
> 时间：2013-02-05T09:45:19.500
> 
> 标签：unix, command, arguments, symbols, quote

嗨，从下面的问题： [如何连续显示其最后几行内容的文件](https://stackoverflow.com/questions/14604397/how-to-continuously-display-a-file-of-its-last-several-lines-of-contents/14610848#14610848)

我有一个基于最佳答案的新问题，作者是 William Pursell。如何编写自定义命令，例如 watch2。它运行如下：

$>watch2 job.sta

因此，它将从命令行参数中获取文件名。我没有键入命令头和尾。

我已经尝试了很多。但我对引号符号很生气。这些符号只是停用命令。各位有什么要解开的吗？

非常感谢你们所有人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:03:17.687

你可以这样做

在文件 watch2

```
watch "head -n 2 $1; tail $1" 
```

然后你可以像这样运行它

```
./watch2 job.sta 
```

# python - 如何使用 Python(re) 解析格式化的字符串

> ID：14704384
> 
> 赞同：0
> 
> 时间：2013-02-05T09:45:24.333
> 
> 标签：python, regex, python-3.x

我要解析的字符串就像“{average:12.1km/ltr}”。我想从这个字符串中提取 12.1。我知道的唯一方法是使用 split(":") 和 split("km/ltr") 左右，但这些似乎没有用。我想用scanf-like方法提取12.1，但是在python文档中显示使用正则表达式比scanf-like函数好。我虽然不能在提取中使用正则表达式。我应该如何使用 re 提取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:47:58.497

我认为您可以简单地使用以下内容从字符串中提取数字部分。

*   诀窍是，只有一个数字，中间有一个句点。
*   期间可能是可选的，因为您的数字可能是整数
*   您可能还会遇到小数

这是示例

```
>>> re.findall("\d+\.?\d*|\.\d+",st)
>>> st = "{average:12.1km/ltr}"
>>> re.findall("\d+\.?\d*|\.\d+",st)
['12.1']
>>> st = "{average:12km/ltr}"
>>> re.findall("\d+\.?\d*|\.\d+",st)
['12']
>>> st = "{average:.5km/ltr}"
>>> re.findall("\d+\.?\d*|\.\d+",st)
['.5']
>>> st = "{average:12.km/ltr}"
>>> re.findall("\d+\.?\d*|\.\d+",st)
['12.']
>>> st = " {max:26.9kgm@6100rpm}"
>>> re.findall("\d+\.?\d*|\.\d+",st)
['26.9', '6100'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:51:59.653

只是`strip`你不想要的所有字符 - 不需要正则表达式（虽然我喜欢它们......）

```
>>> import string
>>> s = "{average:12.1km/ltr}"
>>> s2 = s.strip(string.ascii_letters + "{}:/")
>>> print s2
12.1
>>> number = float(s2)
>>> print number
12.1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T09:52:15.133

试试这个，假设数字可能没有点。

```
import re
re.findall('[0-9]+(\.[0-9]+)?', str) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:48:46.617

又脏又快怎么样

```
re.findall('[\d.]+',s) 
```

这适用于您的示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T10:05:59.510

你说你试过`split(":")`and `split("km/ltr")`，所以我假设字符串的格式总是像`:__X__km/ltr`，其中`__X__`是一个数字。

以下正则表达式将起作用：

```
:(\d.+)km 
```

例子：

```
>>> import re
>>> re.findall(':(\d.+)km', '{average:12.1km/ltr}')
['12.1']
>>> 
```

然后您可以使用该`float()`函数将其解析为浮点数。

# javascript - RDFa 属性的事件监听器

> ID：14704388
> 
> 赞同：1
> 
> 时间：2013-02-05T09:45:34.783
> 
> 标签：javascript, html, listener, rdfa

是否有任何方法可以为特定 HTML 页面中的所有 RDFa 属性实现事件侦听器机制？

也就是说，当我点击一个单词/句子时，如果这个文本属于嵌入在 HTML 页面中的一些 RDFa 属性，会调用一个 javascript 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:46:57.023

这是一个 Firefox 插件，它正是这样做的：

*   [语义雷达](https://addons.mozilla.org/en-US/firefox/addon/semantic-radar/)

[破解 XPI](http://kb.mozillazine.org/Editing_an_add-on_to_change_its_compatibility)并寻找相应的 JavaScript，或加入[开发组](https://groups.google.com/forum/?fromgroups#!forum/sioc-dev)。

# c# - 以编程方式禁用 Outlook 插件

> ID：14704389
> 
> 赞同：2
> 
> 时间：2013-02-05T09:45:39.123
> 
> 标签：c#, office-interop, outlook-addin

我正在开发一个 Outlook 插件，它通过 Web 服务进行身份验证以从数据库中获取数据并将数据存储在数据库中。当插件启动时，它会查询 Web 服务以确定所安装插件的版本是否是当前版本，如果不是，则它会通过以下方式从 Outlook 卸载插件

```
Application.COMAddIns.Item("foo").Connect = false; 
```

为了查询 Web 服务，它必须对其进行身份验证。凭据是从 Windows 注册表中的加密字符串中检索的。这些凭据来自一个 Form 对象，该对象在插件启动或对 Web 服务进行查询并且无法从注册表中检索用户名和/或密码时运行，通常是由于有人删除了所述值。

每当保存凭据时，这些凭据都会用于查询 Web 服务以检查插件是否是正确的版本。如果不是，则 COM 插件将与 Outlook 断开连接。

每当出于其他目的查询 Web 服务时，首先会进行查询以检查插件是否是正确的版本。如果不是，则 COM 插件将与 Outlook 断开连接。

据我所知，断开插件只能从 Outlook.Application 对象完成，到目前为止我只能从我的 Addin 对象访问。

我需要弄清楚的是，当我不在我的 Addin 对象中时，如何断开 Outlook Addin 或以其他方式禁用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:07:15.760

我设法通过功能区的上下文访问 COM 对象，所以我通过创建一个以 COMAddIn 对象作为参数的公共静态方法解决了这一切，从那里我可以做任何我想做的事情:)

可以通过 Ribbon 的 Context 属性引用对所有插件的引用，如下所示：

```
Microsoft.Office.Core.COMAddIns comaddins = ((this.Context as Outlook.Explorer).Application.COMAddIns.Application as Outlook.Application).COMAddIns; 
```

静态方法如下所示：

```
public static void ThisAddIn_CheckVersion(Microsoft.Office.Core.COMAddIn ThisAddIn)
    {
        var rk = Registry.CurrentUser.OpenSubKey("Software\\Microsoft\\Office\\Outlook\\Addins\\My Outlook Add-in");
        if (rk.GetValue("Username") == null || rk.GetValue("Password") == null)
        {
            new EditSettingsForm(ThisAddIn).Show();
            return;
        }

        var sc = new MyWebService.WebServiceClient();
        sc.ClientCredentials.UserName.UserName = (rk.GetValue("Username") == null ? null : rk.GetValue("Username").ToString());
        sc.ClientCredentials.UserName.Password = (rk.GetValue("Password") == null ? null : Encryptor.Decrypt(rk.GetValue("Password").ToString()));

        if (sc.GetMyOutlookAddinVersionNumber() != "TESTING")
        {
            System.Windows.Forms.MessageBox.Show("The version of My Outlook 2013 Add-in you're using is too old. Please update to the latest version at http://www.foo.bar/");
            ThisAddIn.Connect = false;
        }

        sc = null;
    } 
```

# algorithm - 找出一个数字属于哪个组？

> ID：14704390
> 
> 赞同：3
> 
> 时间：2013-02-05T09:45:44.880
> 
> 标签：algorithm

我正在处理一个编码问题，作为它的子部分，我遇到了这个问题：

我们得到一个数字 x，我们将它平方，所以数字变成 x^2。现在我们有从 1 到 x^2 的数字，例如： if number=4; 那么 4^2=16

```
 1             ----->1
      2     3          ----->2
   4     5     6       ----->3
7     8     9    10    ----->4
  11    12    13       ----->5
     14    15          ----->6
        16             ----->7 
```

现在给我一个数字说 k，我需要告诉它属于哪个组。这里 8 属于第 4 组。

我的想法是从 1 开始并保持计数初始化为 1 并检查 1<8 是否？如果是，则将 2 加到 1（上一个总和），将计数增加到 2 并检查 3<8 是否？如果是，则将 3 添加到 3（上一个总和），将计数增加到 3 并检查是否 6<8 如果是，则将 4 添加到 6，将计数增加到 4 并检查是否 10<9？如果没有，则退出。所以组号。是计数，即 4。

但是有什么比我的方法更快的方法吗？

**编辑 1：** 我忘了在我的算法中提到，当计数达到给定数字（在上一个示例中为 4）时，我不应该添加 5，而是添加 3。例如：

如果要搜索的数字是 14，那么

```
1<14 yes then add 2

3<14 yes then add 3

6<14 yes then add 4

10<14 yes then add **3**  ---->here I need to add 3 instead of 5

13<14 yes then add **2**  ---->here I need to add 2 instead of 6

15<14 No so output count. 
```

可以使用 if 条件添加 3 而不是 5，但是是否有任何方法可以根据 x 的值自动增加然后减少要添加的值（请参阅上面的示例以了解 x 指的是什么）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T10:07:18.277

矩形的上半部分是一个三角形：

```
 1             ----->1
      2     3          ----->2
   4     5     6       ----->3
7     8     9    10    ----->4 
```

右边的数字（1、3、6、10）称为[三角数](http://en.wikipedia.org/wiki/Triangular_number)。那里的逆公式（在副标题“三角根和三角数测试”下）可用于解决您的问题：

```
def group(x, number):
    if number <= x^2 / 2 :
        return ceiling( (sqrt(8*number+1) - 1) / 2 )
    else:
        return 2*x - group(x, x^2+1-number) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T10:02:43.257

上半场，小组`i`以数字结束`i*(i+1)/2`。所以让我们假设给你一个数字`n`，`n <= x^2/2`你需要找到最小`i`的`i*(i+1)/2 <= n`。

求解产量 ：`i*i+i-2n = 0`例如：`i``((sqrt(1+8n)-1/2)``n = 8``i = ceil((sqrt(65)-1)/2) = 4`

当然，情况`n > x^2/2`稍微复杂一些。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T10:07:54.127

首先为简单起见假设**x <= n^2 / 2**和**x**属于组**t**。然后：

```
t*(t-1)/2 < x <= t*(t+1)/2 
```

从这里我们得到两个二次不等式：

```
t^2 - t - 2x < 0
t^2 + t - 2x >= 0 
```

在这里`D=1+8x`，因为 t > 0 他们的共同解决方案将是

```
t ∈ [ (-1-sqrt(D))/2; (1+sqrt(D))/2 ) 
```

现在记住 t 是一个整数（并且根据定义是唯一的），所以我们将得到解决方案：

```
t = floor( 1+sqrt(D))/2 ) 
```

这是 case **x <= n^2 / 2**的解决方案。在其他情况下，我们可以通过执行以下操作来解决它：

1.  x := n^2 - x + 1
2.  如上所述找到 t
3.  t := n - t + 1

希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T10:11:29.940

右上角对角线上的数字是所谓的“三角形数字”，它们有公式`n(n+1)/2`。

右下角的数字等于 16 减去一个三角形数，它们有公式`x^2 - (2*x-n-1)(2*x-n)/2`。

因此，给定`k`and `x`，您正在寻找`n`公式大于或等于 的`k`最小值，根据是否`k`大于或小于`x`第 th 个三角形数`x(x+1)/2`（在本例中为 10）选择哪个公式。由于这两个函数都是单调的（总是增加），您可以通过求解`n`浮点的二次方程（使用二次公式）然后四舍五入到下一个整数（所谓的“上限”）来做到这一点。

为了在不引入太多复杂性的情况下解决浮点不准确性，您应该使用整数算术检查结果。浮点计算可能会略微超出或低于正确结果，并舍入到错误的整数值。对于小数字，在最坏的情况下它不会超过 1，因此检测和纠正它的代码很简单，只需与`k`通过将`n`结果放入公式中得到的值和`n`任一侧的值进行比较即可。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T10:25:24.113

首先，您需要观察该`xth`行恰好是中间行并且其中有 x 个元素。那么这个特定行中的元素是什么 - 它们来自`[x(x+1)/2-x, x(x+1)/2]`. 所以算法是这样的：

1.  检查要搜索的数字是否在中间行，小于或大于该数。
2.  如果在中间行打印 x。
3.  如果小于中间行，那么您需要观察所有行都以三角形数字结尾。您可以使用公式`ceil((sqrt(8x+1)-1)/2)`来获取确切的行。
4.  否则，如果数字大于中间行，那么您可以将下三角形视为：

    6 5 4

    3 2

    1

也就是说，所有数字都等于`x^2+1-that number`。`x^2+1-number to be searched`因此，现在您将使用上述公式本身在下三角形中搜索。这以倒置的形式给出了行号。让那个数字变成`k`。那么正确形式的值为`x-1+k+1`。最后添加`x`到值以将答案转移到下三角形。因此答案变为`2x+k`。

这是该问题的 O(1) 解决方案。

# database - 将 sqlite 数据库连接到 linqpad 时出现连接错误

> ID：14704391
> 
> 赞同：0
> 
> 时间：2013-02-05T09:45:47.253
> 
> 标签：database, sqlite, linqpad

我有一个扩展名为 .sql 的 sqlite 数据库文件。我可以使用 sqlite 控制台应用程序访问数据库。现在我想通过 linqpad 访问这个数据库。我正在使用 IQ 驱动程序（MySQL、SQLite、Oracle）版本 2.0.7.0 来连接 sqlite 数据库。但是，我收到此错误消息： **连接错误：打开的不是数据库文件文件的文件已加密或不是** 我不知道的数据库，出了什么问题，我只是使用驱动程序定位数据库文件。谁能帮助我并找出我的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:17:26.600

架构和数据都存在于同一个文件中，因此我收到了这个错误。所以我在 sqlite 控制台中读取了 xyz.sql 文件，然后创建了备份。然后我使用 IQ 驱动程序在 linqpad 中加载了该备份文件，然后每件事都表现良好。

# google-oauth - 如何从 OAuth 对 Latitude 服务的令牌响应中获取 Google 用户 ID？

> ID：14704392
> 
> 赞同：0
> 
> 时间：2013-02-05T09:45:49.250
> 
> 标签：google-oauth

我正在尝试设置一项服务，以便 Google 用户授权我的平台，然后我可以随时获取他/她的 Latitude 数据。

目前我得到了 GoogleTokenResponse 所以我得到了访问和刷新令牌。但是，我需要识别该响应，因此如果多个用户想以某种方式同时启用该服务，我可以将令牌响应与相应的用户匹配。

我应该如何实现这一目标？我尝试解析 id 令牌，但我得到一个空异常：

```
GoogleIdToken gidt = tokenResponse.parseIdToken(); 
```

（tokenResponse 不为空；如前所述，我可以毫无问题地获得令牌）。但是，API javadoc 说它会返回一个混淆的用户 ID，所以它可能还不够。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:04:23.623

此问题中缺少详细信息，并且此代码中有很多路径。如果您获得一个 ID 令牌，您可以解析它并发现它属于哪个用户，请参阅[http://javadoc.google-api-java-client.googlecode.com/hg/1.8.0-beta/com/之类的内容google/api/client/googleapis/auth/oauth2/GoogleIdToken.html#verify(com.google.api.client.googleapis.auth.oauth2.GoogleIdTokenVerifier)](http://javadoc.google-api-java-client.googlecode.com/hg/1.8.0-beta/com/google/api/client/googleapis/auth/oauth2/GoogleIdToken.html#verify(com.google.api.client.googleapis.auth.oauth2.GoogleIdTokenVerifier))

# java - 我可以将 JTidy 配置为忽略某些错误和警告吗？

> ID：14704396
> 
> 赞同：3
> 
> 时间：2013-02-05T09:45:55.823
> 
> 标签：java, unit-testing, jtidy

我正在使用 JTidy 来验证在 Java 中生成的 HTML 片段的渲染类。我想忽略某些警告~~和错误~~。

（编辑：重新考虑我可能不想抑制**错误**）

例如，生成的以下代码段：

```
<img src='/images/icon.gif'> 
```

导致此警告：

`line 5 column 7 - Warning: img lacks "alt" attribute`

我可以将 JTidy 配置为忽略特定检查，例如此项检查吗？

我用来检查的方法是：

```
public static boolean isValidHtml(String htmlSnippet) {
    String untestedHtml = "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"><HTML>" +
            "<head><title>Wrapper HTML For Testing</title></head>" +
            htmlSnippet +
            "</HTML>";

    final Tidy tidy = new Tidy();
    final Writer writer = new StringWriter();
    tidy.setErrout(new PrintWriter(writer, true));

    tidy.parseDOM(new StringReader(untestedHtml), writer);

    if (tidy.getParseErrors() > 0 || tidy.getParseWarnings() > 0) {
        System.err.println(writer);
        return false;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T03:11:28.643

使用[配置类](http://jtidy.sourceforge.net/apidocs/org/w3c/tidy/Configuration.html)来做到这一点：

```
 Tidy tidy = new Tidy();
  tidy.setShowErrors(0);
  tidy.setForceOutput(true); 
```

# asp.net - asp.net 中的子控件事件

> ID：14704397
> 
> 赞同：0
> 
> 时间：2013-02-05T09:46:04.543
> 
> 标签：asp.net, events, repeater, datalist, childcontrol

我的结构如下repeater1->datalist->repeater2

这里的孩子是repeater2，它的父母是datalist，它的父母是repeater1。

如何获取repeater2控制事件，因为它直接是孩子我无法获取任何事件。

```
<asp:Repeater ID="rptMenu" runat="server">
                    <ItemTemplate>
                        <li class="menu_li"><a href="#" class="drop">
                            <%#XPath("@title")%></a>
                            <div class="dropdown_4columns">
                                <div class="col_1">
                                    <asp:DataList ID="dlCategory" runat="server" DataSource='<%# XPathSelect("category") %>'
                                        RepeatDirection="Horizontal" RepeatColumns="4">
                                        <ItemStyle CssClass="menuItems" />
                                        <HeaderTemplate>
                                        </HeaderTemplate>
                                        <ItemTemplate>
                                            <h3>
                                                <%#XPath("@title")%></h3>
                                            <ul class="submenu">
                                                <asp:Repeater ID="rptItem" runat="server" DataSource='<%# XPathSelect("item") %>'>
                                                    <ItemTemplate>
                                                        <li><asp:LinkButton ID="hlSubmenuItem" runat="server" PostBackUrl='<%# XPath("@url") %>'
                                                                ToolTip='<%# string.Format("{0}", XPath("@title")) %>'><%#XPath("@title")%></asp:LinkButton> </li>
                                                    </ItemTemplate>
                                                </asp:Repeater>
                                            </ul>
                                        </ItemTemplate>
                                    </asp:DataList>
                                </div>
                            </div>
                        </li>
                    </ItemTemplate>
                </asp:Repeater> 
```

在这里，我想要链接按钮单击事件，无论如何我都找不到这样做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:55:28.907

不太确定您想要实现什么，我想`RaiseBubbleEvent`应该有所帮助：

[http://msdn.microsoft.com/en-us/library/system.web.ui.control.raisebubbleevent.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.raisebubbleevent.aspx)

# android - 在堆栈跟踪中没有应用程序代码的列表视图中滚动时的 IndexOutOfBounds

> ID：14704408
> 
> 赞同：1
> 
> 时间：2013-02-05T09:46:17.540
> 
> 标签：android, listview, simplecursoradapter, indexoutofboundsexception

我发现了一些类似的问题，但是任何被指出的问题似乎都不适用于这里。
我有一个带有 MatrixCursor 和 SimpleCursorAdapter 作为数据提供者的 ListView。只有一种列表项样式，没有页眉或页脚左右。当我在列表中快速上下滚动时，可能只有在弹跳到列表顶部时，有时我会得到一个 IndexOutOfBounds 异常，而堆栈跟踪中没有我的任何应用程序代码。所以我什至无法抓住它。
这在华为 Ideos U8510 / Android 2.3.3 和 Acer Iconia Tab A510 / Android 4.1.2 上发生（至少经过测试）。
任何想法如何解决或规避赞赏。
蒂亚

```
02-05 10:17:12.980: E/AndroidRuntime(1517): FATAL EXCEPTION: main
02-05 10:17:12.980: E/AndroidRuntime(1517): java.lang.ArrayIndexOutOfBoundsException
02-05 10:17:12.980: E/AndroidRuntime(1517):     at android.view.MotionEvent.getY(MotionEvent.java:903)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at android.widget.AbsListView.onTouchEvent(AbsListView.java:2189)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at android.widget.ListView.onTouchEvent(ListView.java:3486)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at android.view.View.dispatchTouchEvent(View.java:3885)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:903)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1693)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1125)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1677)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2257)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1881)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at android.os.Looper.loop(Looper.java:123)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at android.app.ActivityThread.main(ActivityThread.java:3695)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at java.lang.reflect.Method.invokeNative(Native Method)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at java.lang.reflect.Method.invoke(Method.java:507)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
02-05 10:17:12.980: E/AndroidRuntime(1517):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:18:50.063

我通过重新实现 ListView.onTouchEvent() 修复了它。我想我会分享代码：

```
public class MyListView extends ListView 
{

    public MyListView(Context context) 
    {
        super(context);
    }

    public MyListView(Context context, AttributeSet attrs) 
    {
        super(context, attrs);
    }

    public MyListView(Context context, AttributeSet attrs, int defStyle) 
    {
        super(context, attrs, defStyle);
    }

    @Override public boolean onTouchEvent(MotionEvent ev)
    {
        try { return super.onTouchEvent(ev); }
        catch(ArrayIndexOutOfBoundsException e)
        {
            Log.w("Catched ArrayIndexOutOfBoundsException");
            return true; // handled
        }       
    }   
} 
```

您必须在 layout.xml 文件中使用 <Your.path.to.MyListView> 而不是 <ListView> 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:52:05.433

该程序正在尝试从特定索引处访问`Array`或您用于设置listView 的适配器的元素。`ArrayList`但是该索引处的元素尚未初始化。

如果您使用自定义适配器来设置列表，请检查`getCount()`适配器类中的方法返回什么。它应该返回用于设置列表的`Array`or的大小。`ArrayList`

# mysql - MySQL查找哪些数据插入到了哪个地方

> ID：14704409
> 
> 赞同：0
> 
> 时间：2013-02-05T09:46:17.253
> 
> 标签：mysql, sql

我想知道是否可以找到受`INSERT`.

数据是从文件中读取的，我想避免重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:50:49.233

为避免重复，只需添加适当`INDEX` `UNIQUE`的子句。

`LAST_INSERT_ID()`在声明适当的`AUTO_INCREMENT` [列](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)键后，您可以获得与“插入的行 ID”最接近的东西（感谢@mvp！）。

如果您使用该`INSERT IGNORE`语法，数据将自动成为唯一的，即重复的行将被静默忽略并且不会插入。您可能还想`ON DUPLICATE KEY...` [查看](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html).`INSERT`

至于哪些列受插入影响，这很容易——*所有*列:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:50:23.243

如果您不想再次使用相同的数据，可以查看将[主键](http://dev.mysql.com/doc/refman/5.5/en/optimizing-primary-keys.html)添加到表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:56:22.147

如果您有未知的 SQL 语句，您将在批处理过程中执行，您可以动态解析您的 SQL 语句以找出使用了哪些列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:52:16.913

您可以将[ServerLog](http://dev.mysql.com/doc/refman/5.0/en/server-logs.html)用于协议语句，或在所有表上设置[触发器](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)，该触发器插入有关您在其中写入插入的列/原始的 Log 表中的所有插入的协议。

# sitecore - Sitecore 评论模块

> ID：14704425
> 
> 赞同：0
> 
> 时间：2013-02-05T09:47:06.200
> 
> 标签：sitecore, sitecore6

我正在尝试使用 Sitecore 6.5 进行开发。

该要求包括`comment feature`文章和图像。

他们想要一个简单的`WYSIWYG`编辑器并能够上传图像。

我相信 Sitecore 没有为此提供内置功能。

我正在使用关键字查看 sdn 和市场，`comment feature`但找不到任何相关功能。

即使它不满足所有要求，是否有任何相关功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:27:45.773

还有[Facebook 评论插件](https://developers.facebook.com/docs/reference/plugins/comments/)，如果您使用的是[社交连接](http://sdn.sitecore.net/Products/Social%20Connected%20Module.aspx)模块，可能会很有用，但这实际上取决于您需要/想要多少控制。

我们之前推出了自己的评论系统，它只是文字没有图片上传。需要注意的是评论也需要添加到主数据库中，否则下次完整发布时您将丢失它们。根据您的服务器架构，这可能会给您带来一些问题，因为我们的 CD 实例无法访问主数据库，我们已经编写了一些部署到我们的 CMS 环境的 Web 服务（即使那样打开端口也很麻烦）。这确实有一个优势，即我们能够在发布到我们的网站之前通过工作流程和批准流程放置所有评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:34:24.900

您可能还想查看[DISQUS](http://disqus.com/)。据说，它不是 Sitecore 模块，但我过去曾在 Sitecore 项目中使用它来满足评论要求。集成到站点中非常容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:36:20.863

您可能想查看 Sitecore Marketplace 上的[论坛模块](http://marketplace.sitecore.net/en/Modules/Sitecore_YAF.aspx)和[博客模块](http://marketplace.sitecore.net/en/Modules/WeBlog.aspx)。它们不完全是您所需要的，但确实包含添加评论和上传的功能。由于它是共享源，您可以下载完整的源并重新使用您需要的部分。

# django - 如何在 Django 中使用缓存？（最好在 GAE 中）

> ID：14704427
> 
> 赞同：9
> 
> 时间：2013-02-05T09:47:18.797
> 
> 标签：django, google-app-engine, memcached

我无法让 memcached 与 GAE 一起工作。当我使用谷歌缓存后端时，按照[GAE 网站](https://developers.google.com/appengine/docs/python/memcache/usingmemcache)上的教程，视图没有被缓存。所以我按照 Django 教程中的建议使用缓存 url（例如：

```
`(r'^example$', cache_page(60*15)(views.example)), 
```

然后我得到这个：

```
File "/python27_runtime/python27_lib/versions/third_party/django-1.4/django/middleware/cache.py", line 205, in __init__
self.cache_timeout = self.cache.default_timeout

 AttributeError: 'Client' object has no attribute 'default_timeout' 
```

AttributeError：'Client' 对象没有属性'default_timeout'，如果我使用谷歌后端（`django.core.cache.backends.memcached.MemcachedCache`）我得到

```
Error: ImproperlyConfigured: Error importing middleware django.contrib.sessions.middleware: "No module named memcache". 
```

这里有人之前问过使用 Django 缓存后端并建议安装 python-memcached，我这样做了，但它仍然不起作用。

有人建议为 GAE 编写后端。我不太明白。如果对这个问题的最佳回答是逐步解释如何非常粗略地编写后端，那么我会接受这个答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T23:26:39.383

并非所有 Django 的功能都适用于 App Engine。因此，由于 App Engine 基础架构的限制，您尝试使用的功能对于 App Engine Django 库是不可接受的。

如果我理解正确，你想缓存整个页面，或者换句话说，整个视图的响应？你可以这样做（*只是例子*）：

```
# Django on App Engine view example
from google.appengine.api import memcache
from django.http import HttpResponse

def cached_index_page(request):
  output_html = memcache.get('index_page')  # here we "take" from cache
  if output is not None:
    pass
  else:
    output_html = get_page_content()
    memcache.add('index_page', output_html, 60)  # here we "put" to cache" (timeout also here)
  HttpResponse(output_html) 
```

出于您的目的，您可以创建 Django 的中间件，并自动缓存您需要的任何页面。

还要确保您从配置文件中删除了 App Engine 上所有不相关/不可接受的内容。考虑到帮助页面（[https://developers.google.com/appengine/articles/django](https://developers.google.com/appengine/articles/django)），最小的配置如下：

```
import os

# 'project' refers to the name of the module created with django-admin.py
ROOT_URLCONF = 'project.urls'

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
#    'django.contrib.sessions.middleware.SessionMiddleware',
#    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.middleware.doc.XViewMiddleware',
    'google.appengine.ext.ndb.django_middleware.NdbDjangoMiddleware', # NoSQL db middleware
)

INSTALLED_APPS = (
#    'django.contrib.auth',
    'django.contrib.contenttypes',
#    'django.contrib.sessions',
    'django.contrib.sites',
)

ROOT_PATH = os.path.dirname(__file__)
TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or
    # "C:/www/django/templates".  Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    ROOT_PATH + '/templates',
) 
```

请记住，App Engine 有自己的本地缓存，例如 Python 运行时环境在单个 Web 服务器上的请求之间缓存导入的模块，您可以告诉 App Engine 缓存 CGI 处理程序脚本本身，以及导入的模块。

有用的链接： [https ://developers.google.com/appengine/articles/django-nonrelhttps://developers.google.com/appengine/docs/python/tools/libraries27](https://developers.google.com/appengine/articles/django-nonrelhttps://developers.google.com/appengine/docs/python/tools/libraries27)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T19:35:01.773

恕我直言，在此添加另一个问题并没有使这变得不那么令人困惑.. [Django-nonrel ≤1.3 和 Google App Engine 上的 Memcache](https://stackoverflow.com/q/4010950/383793)可能会回答您的问题。

# bash - 在单独的应用程序中执行时，NodeJS 脚本不会启动

> ID：14704433
> 
> 赞同：1
> 
> 时间：2013-02-05T09:47:40.207
> 
> 标签：bash, node.js

我有一个单独的应用程序，它运行一个名为 test.sh 的 shell 脚本：

```
node server.js;   //listen on port 5555 
```

如果我以 root 身份运行该脚本，它可以正常工作：`./test.sh`？

**也许...**

*   nodejs的权限错误？
*   nodejs脚本崩溃，因为它将服务器状态写入stdout但stdout不存在？

先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:32:59.293

永远使用来运行你的节点服务器 通过 npm 永远安装

npm 永远安装 -g

您可以配置日志以写入您的标准输出

您可以将您的应用程序作为永远的 server.js 运行

您也可以在 .sh 文件中提供相同的内容

# sql - 增强 EclipseLink 生成的 DDL

> ID：14704452
> 
> 赞同：2
> 
> 时间：2013-02-05T09:48:40.090
> 
> 标签：sql, eclipselink, ddl

是否可以在创建过程中更改 EclipseLink 生成的 DDL 语句？在persistence.xml 中，我使用了table-creation-suffix，但它只向CREATE TABLE 语句添加了一些内容。还有很多 ALTER TABLE 语句，我无法更改。像 table-alteration-suffix 这样的东西会很好。

```
<property name="eclipselink.ddl-generation.table-creation-suffix" value=";" />
<property name="eclipselink.ddl-generation" value="drop-and-create-tables" />
<property name="eclipselink.ddl-generation.output-mode" value="sql-script" />
<property name="eclipselink.application-location" value="/path" />
<property name="eclipselink.create-ddl-jdbc-file-name" value="create.sql" />
<property name="eclipselink.drop-ddl-jdbc-file-name" value="drop.sql" /> 
```

# prolog - Prolog atom_chars错误

> ID：14704453
> 
> 赞同：1
> 
> 时间：2013-02-05T09:48:40.847
> 
> 标签：prolog

使用 atom_chars 时出现以下错误

```
 9 ?- atom_chars(9abc,X).
 ERROR: Syntax error: Operator expected
 ERROR: atom_chars(9
 ERROR: ** here **
 ERROR: abc,X) . 
```

谁能解释为什么会发生这个错误？我需要一个可以将 abc、910、abc910、910abc 等各种输入转换为字符列表的谓词。对于这种情况，有什么可以替代 atom_chars 的吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:16:00.780

你应该用*单*引号将你的原子括起来：

```
?- atom_chars('9abc',X). 
```

大约，当 Prolog 原子具有 C 标识符“形状”时，它们可以不带引号，但以*小写*字符开头（大写名称引入*变量*）。用单引号包围你会很安全。要知道一个原子是否*需要*单引号才能安全读取，您可以使用类似

```
shape_to_read(Atom) :- format('~q', [Atom]). 
```

*编辑*或更简单的[writeq](http://www.swi-prolog.org/pldoc/doc_for?object=writeq/1) /1

```
shape_to_read(Atom) :- writeq(Atom). 
```

# java - 如何使用 GSON 解析 JSON 对象之前的数字

> ID：14704456
> 
> 赞同：0
> 
> 时间：2013-02-05T09:48:43.597
> 
> 标签：java, gson

我如何用 GSON 解析这个？因为这个以数字“1”和“2”开头。我已经为以 entity_id 开头的对象创建了一个对象，并且当我删除了外部 json（其中包含“1”）时它正在工作。

但我想解析这一大堆代码。那么我应该怎么做来解析“1”和“2”呢？像 String id 和 List innerobjects 之类的东西？

```
{
  "1": {
    "entity_id": "1",
    "status": "complete",
    "coupon_code": null,
    "shipping_description": "Flat Rate - Fixed",
    "customer_id": null,
    "base_discount_amount": "0.0000",
    "base_grand_total": "3422.3800",
    "base_shipping_amount": "90.0000",
    "base_shipping_tax_amount": "0.0000",
    "base_subtotal": "3332.3800",
    "base_tax_amount": "0.0000",
    "base_total_paid": "3422.3800",
    "base_total_refunded": null,
    "discount_amount": "0.0000",
    "grand_total": "3422.3700",
    "shipping_amount": "90.0000",
    "shipping_tax_amount": "0.0000",
    "store_to_order_rate": "1.0000",
    "subtotal": "3332.3700",
    "tax_amount": "0.0000",
    "total_paid": "3422.3700",
    "total_refunded": null,
    "base_shipping_discount_amount": "0.0000",
    "base_subtotal_incl_tax": "3332.3800",
    "base_total_due": "0.0000",
    "shipping_discount_amount": "0.0000",
    "subtotal_incl_tax": "3332.3700",
    "total_due": "0.0000",
    "increment_id": "100000001",
    "base_currency_code": "EUR",
    "discount_description": null,
    "remote_ip": "472.15.1.83",
    "store_currency_code": "EUR",
    "store_name": "Main Website\nMain Website Store\nDefault Store View",
    "created_at": "2012-08-10 09:37:17",
    "shipping_incl_tax": "90.0000",
    "payment_method": "checkmo",
    "gift_message_from": null,
    "gift_message_to": null,
    "gift_message_body": null,
    "tax_name": null,
    "tax_rate": null,
  },
  "2": {
    "entity_id": "2",
    "status": "pending",
    "coupon_code": null,
    "shipping_description": "Flat Rate - Fixed",
    "customer_id": null,
    "base_discount_amount": "0.0000",
    "base_grand_total": "1140.7900",
    "base_shipping_amount": "30.0000",
    "base_shipping_tax_amount": "0.0000",
    "base_subtotal": "1110.7900",
    "base_tax_amount": "0.0000",
    "base_total_paid": null,
    "base_total_refunded": null,
    "discount_amount": "0.0000",
    "grand_total": "1140.7900",
    "shipping_amount": "30.0000",
    "shipping_tax_amount": "0.0000",
    "store_to_order_rate": "1.0000",
    "subtotal": "1110.7900",
    "tax_amount": "0.0000",
    "total_paid": null,
    "total_refunded": null,
    "base_shipping_discount_amount": "0.0000",
    "base_subtotal_incl_tax": "1110.7900",
    "base_total_due": null,
    "shipping_discount_amount": "0.0000",
    "subtotal_incl_tax": "1110.7900",
    "total_due": null,
    "increment_id": "100000002",
    "base_currency_code": "EUR",
    "discount_description": null,
    "remote_ip": "182.11.7.52",
    "store_currency_code": "EUR",
    "store_name": "Main Website\nMain Website Store\nDefault Store View",
    "created_at": "2012-08-15 15:19:35",
    "shipping_incl_tax": "30.0000",
    "payment_method": "checkmo",
    "gift_message_from": null,
    "gift_message_to": null,
    "gift_message_body": null,
    "tax_name": null,
    "tax_rate": null,
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:54:10.967

`Map`对奇数`"1", "2", ...`对象使用 a ：

```
Map<String, Order> map = gson.fromJson(json, Map.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T08:33:05.757

我找到了另一个解决方案。

```
GsonBuilder builder = new GsonBuilder();
builder.setFieldNamingStrategy( new FieldNamingStrategy() {
   @Override
   public String translateName( Field field ) {
       if( field.getName().equals( "myNewVariableName" ) ) {
          return "1";
       } else {
          return field.getName();
       }
}
} );
Gson gson = builder.create();
MyCustomClass queryResult = gson.fromJson( json, MyCustomClass.class ); 
```

现在写下我在示例“MyCustomClass”中调用的自定义 gson 类。添加一个名为“myNewVariableName”的字段。如果 Gson 序列化或反序列化 json 或您的自定义类，它使用 FieldNamingStrategy 并将您的字段“myNewVariableName”替换为“1”。通过这种方式，您可以减少自己的完整解析，并为您重用 gson 的强大功能，例如“entity_id”等格式正确的字段名称。

# php - PHP中日期范围内两周的开始日期和结束日期

> ID：14704459
> 
> 赞同：1
> 
> 时间：2013-02-05T09:48:49.507
> 
> 标签：php, date

我想在 PHP 的日期范围内获取两周的开始日期和结束日期。

周开始 = 周日，周末 = 周六

即）例如，如果日期范围是

> $start = '2013-01-01' 和
> $end ='2013-02-28'

**要求的结果**

> 开始日期-->2013-01-01 结束日期-->2013-01-12
> 开始日期-->2013-01-13 结束日期-->2013-01-26
> 开始日期-->2013-01-27结束日期-->2013-02-09
> 开始日期-->2013-02-10 结束日期-->2013-02-23
> 开始日期-->2013-02-24 结束日期-->2013-02-28

**代码**

```
 <?php
$st = '2013-01-01';
$et ='2013-02-28';
$start_date = date('Y-m-d', strtotime($st));
$end_date = date('Y-m-d', strtotime($et));
$end_date1 = date('Y-m-d', strtotime($et. '+ 6 days'));

$weekfrom = array();
$weekto = array();

for($date = $start_date; $date <= $end_date1; $date = date('Y-m-d', strtotime($date. ' + 14 days')))
{

    $week =  date('W', strtotime($date));
    $year =  date('Y', strtotime($date));
    $from = date("Y-m-d", strtotime("{$year}-W{$week}+1")); //Returns the date of monday in week
    if($from < $start_date) $from = $start_date;
    $to = date("Y-m-d", strtotime("{$year}-W{$week}-6"));   //Returns the date of sunday in week
    if($to > $end_date)
     {
        $to = $end_date;       

     }
    if($from < $to)
    {
    array_push($weekfrom,$from);
    array_push($weekto,$to);
    }

}
$n = count($weekfrom);

for($i = 0;$i<$n;$i++)
{
  echo "Start Date-->".$weekfrom[$i];
  echo " End Date -->".$weekto[$i]."\n";
}

?> 
```

**当前结果**

> 开始日期-->2013-01-01 结束日期-->2013-01-05
> 开始日期-->2013-01-13 结束日期-->2013-01-19
> 开始日期-->2013-01-27结束日期-->2013-02-02
> 开始日期-->2013-02-10 结束日期-->2013-02-16
> 开始日期-->2013-02-24 结束日期-->2013-02-28

[**演示**](http://codepad.org/H0vIdNn0)

在当前结果中，开始日期是正确的。但问题在结束日期内。帮我找出问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:56:42.260

换这个就行了...

```
$to = date("Y-m-d", strtotime("{$year}-W{$week}-6 + 1 week")); 
```

见**[键盘](http://codepad.org/WP6dDnqX)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:53:11.173

第一天：

```
if is Sunday == true
 today
else
 strtotime('last sunday'); 
```

最后一天：

```
if is Saturday == true
 today
else
 strtotime('next saturday'); 
```

# javascript - 未找到 Jpegcam _snap 方法

> ID：14704460
> 
> 赞同：0
> 
> 时间：2013-02-05T09:48:51.953
> 
> 标签：javascript, html, webcam

我一直在尝试构建一个简单的网页，只允许用户使用他们的网络摄像头拍照，然后在网络摄像头提要旁边显示结果。为了实现这一点，我一直在使用 Jpegcam 插件。

但是，当我运行（假定功能齐全）测试示例时，我能够让网络摄像头显示输入，但是当我单击“拍摄快照”时，控制台返回“SCRIPT438：对象不支持属性或方法'_snap ’”。

相关的 html 文件可以在[这里找到](https://github.com/mattclements/jpegcam/blob/master/htdocs/test.html)，而 javascript 文件[可以在这里找到](https://github.com/mattclements/jpegcam/blob/master/htdocs/webcam.js)。插件有很好的文档记录，但我是 JS 的新手，所以任何帮助都将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:09:04.703

好的，这里的解决方案是，如果您从文件目录（例如 C://....）运行该文件，则该文件不起作用.

# ruby-on-rails - 未登录时允许 User#Show。remember_token IS NULL

> ID：14704461
> 
> 赞同：0
> 
> 时间：2013-02-05T09:48:54.897
> 
> 标签：ruby-on-rails

已解决：当没有人登录并且没有当前用户时，问题是在控制器中调用 current_user，它会引发错误，感谢您的努力/时间。

我希望人们能够在我的应用程序中查看个人资料页面，无论他们是否在我的网站上拥有帐户。目前我收到错误：

SQL：

```
Started GET "/users/1" for 127.0.0.1 at 2013-02-05 05:08:50 -0500
Processing by UsersController#show as HTML
Parameters: {"id"=>"1"}
User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "1"]]
User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1

NoMethodError (undefined method `microposts' for nil:NilClass):
app/controllers/users_controller.rb:34:in `show' 
```

我认为它试图定义一个记住令牌，而当某人实际上没有登录时不应该有一个。

用户控制器：

```
def show
  @user = User.find_by_id(params[:id])
  @microposts = @user.microposts.paginate(page: params[:page])
  @micropost  = current_user.microposts.build
End 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:59:37.597

该`find_by_foo`实用程序不会抛出“Record-not-found”错误，而`find`-method 会。当`find`得到一个整数时，它会自动通过 Id 查找。

```
def show
  @user = User.find(params[:id])
  @microposts = @user.microposts.paginate(page: params[:page])
  @micropost  = current_user.microposts.build
End 
```

如果没有具有此 id 的用户，这将抛出 RecordNotFound；结果，在生产中，404。

编辑：看到您更新的代码后，您的问题似乎出在`current_user`辅助方法上，而不是在 User.find 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:20:16.943

试试这个..

```
 def show
   @user = User.find(params[:id])
   @microposts = @user.microposts.paginate(page: params[:page]) if !@user.nil?
   @micropost  = current_user.microposts.build
   End 
```

它将避免错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:17:39.800

问题是 current_user 为 nil 并且在没有人登录时在控制器中调用它。结果是它抛出了一个错误。

我添加了 if signed_in? 在那些包含 current_user 的特定行旁边，现在一切都正确呈现。

```
def signed_in?
  !current_user.nil?
end

def current_user
  @current_user ||= User.find_by_remember_token(cookies[:remember_token])
end 
```

# asp.net - 浮动下方的 ASP.net 强制面板

> ID：14704467
> 
> 赞同：-2
> 
> 时间：2013-02-05T09:49:15.967
> 
> 标签：asp.net

我有两个并排的面板浮动，另一个我想坐在它们下面：

```
 ----------  -----
|p1        ||p2   |
|          ||     |
|          | -----
|          |
 ----------
-------------------
p3
------------------- 
```

但是，当我创建 p3 时，它出现在 p2 的右侧。我怎样才能在下面强制它？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:55:54.213

在 p3 中添加：

```
style="clear:left" 
```

这将确保它的左侧没有任何东西漂浮。

（`clear:both`用于左右..）

# jpa - 在 JSF 视图中显示 BLOB 类型

> ID：14704469
> 
> 赞同：3
> 
> 时间：2013-02-05T09:49:21.593
> 
> 标签：jpa, jsf-2, blob

我正在使用 JBoss AS7、JSF2、MySQL、EJB 和 JPA 为我的公司创建一个 Java EE 应用程序。

我的 JSF 视图中有一个数据表，其中包含从我的数据库中检索到的数据的几行。在这个数据中，我有一个 BLOB 列，它可以包含任何文件类型，如图像、PDF、文本。

我想在每一行中放置一个链接，以便在新窗口中打开文件。

1.  如何将 BLOB 类型转换为字节？
2.  我怎么能做这样的工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:26:17.133

> *如何将 BLOB 类型转换为字节？*

只需在JPA`@Lob`的属性上添加注释即可。`byte[]``@Entity`

* * *

> *我怎么能做这样的工作？*

您需要让 JSF 在表中生成所需的链接，并将实体 ID 作为请求参数。

```
<h:dataTable value="#{bean.entities}" var="entity">
    <h:column>
        <h:outputLink value="#{request.contextPath}/fileservlet?id=#{entity.id}" target="_blank">#{entity.filename}</h:outputLink>
    <h:column>
</h:dataTable> 
```

然后创建一个简单的[文件 servlet](https://stackoverflow.com/tags/servlets/info)`byte[]` ，它将响应流式传输到`doGet()`（省略了明显的参数验证和异常处理）。

```
@WebServlet("/fileservlet")
public class FileServlet extends HttpServlet {

    @EJB
    private EntityService service;

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        Entity entity = service.find(request.getParameter("id"));
        response.setContentType(entity.getContentType());
        response.setContentLength(entity.getContent().length);
        response.setHeader("Content-Disposition", "inline;filename=\"" + URLEncoder.encode(entity.getFilename(), "UTF-8") + "\"");
        response.getOutputStream().write(entity.getContent());
    }

} 
```

哪里`getContent()`返回`@Lob byte[]`财产。

# symfony - Symfony2 与动态元素

> ID：14704470
> 
> 赞同：-1
> 
> 时间：2013-02-05T09:49:24.250
> 
> 标签：symfony

Symfony2中的Bundle之类的东西我可以做到吗？我搜索了很多。

[http://www.thatsquality.com/examples/todo/advanced](http://www.thatsquality.com/examples/todo/advanced)

**更新**

我确实有带有 id 和 item 的表。我从数据库加载它。所有项目都显示在一个文本字段中，所以我可以编辑它们，底部有一个空的文本字段。如果我按 Enter 或提交，所有更改都会保存到数据库中。该页面将被重新加载，所有项目也将被列出，并带有一个额外的空白底部文本字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:08:36.530

没有任何捆绑软件可以让您做到这一点，但开发起来并不难。

因此，您可以使用事件订阅者来获得相同的行为，然后将根据您的表格内容生成字段。只要您单击保存，您的表单就会再次生成，考虑到最后添加的元素，您的订阅者还应该附加一个额外的字段以允许添加新元素。

# php - CodeIgniter 将多维数组作为单独的行插入到数据库表中

> ID：14704472
> 
> 赞同：1
> 
> 时间：2013-02-05T09:49:27.720
> 
> 标签：php, mysql, codeigniter

将 post 值保存到数组中。

```
$data2 = array(
  'invoice_id' =>($id),
  'order_id' => $this->input->post('order_id'),
  'invoiceitems_servicetype' =>$this->input->post('type'),
  'invoiceitems_quantity' => $this->input->post('quantity'),
  'invoiceitems_unitprice' => $this->input->post('rate'),
  'invoiceitems_notes' => $this->input->post('description')
      );

 $this->db->insert('abc_invoiceitems', $data2);

print_r($data2); 
```

数组结构。

```
Array
(
    [invoice_id] => 21
    [order_id] => 1
    [invoiceitems_servicetype] => Array
        (
            [0] => Order
            [1] => Miscellaneous
            [2] => Order
        )

    [invoiceitems_quantity] => Array
        (
            [0] => 5
            [1] => 64
            [2] => 88
        )

    [invoiceitems_unitprice] => Array
        (
            [0] =>  5
            [1] =>  6
            [2] =>  8
        )

    [invoiceitems_notes] => Array
        (
            [0] => test Data1
            [1] => test Data2
            [2] => test Data3
        )

) 
```

将数组值插入数据库表。

```
TABLE NAME --- abc_invoiceitems 
 +------------+----------+--------------------------+-----------------------+------------------------+--------------------+
 | invoice_id | order_id | invoiceitems_servicetype | invoiceitems_quantity | invoiceitems_unitprice | invoiceitems_notes |
 +------------+----------+--------------------------+-----------------------+------------------------+--------------------+ 
```

我收到以下错误，错误是：

这些值作为数组返回。

> 插入`abc_invoiceitems`( `invoice_id`, `order_id`, `invoiceitems_servicetype`, `invoiceitems_quantity`, `invoiceitems_unitprice`, `invoiceitems_notes`) 值 ('21', '1', 数组, 数组, 数组, 数组)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T10:23:38.547

获取帖子值：

```
$temp =count($this->input->post('type'));//counting number of row's
$type= $this->input->post('type');
$quantity = $this->input->post('quantity');
$rate = $this->input->post('rate');
$description = $this->input->post('description'); 
```

循环遍历键值：

```
for($i=0; $i<$temp;$i++){
  $data2 = array(
  'invoice_id' =>($id),
  'order_id' => $this->input->post('order_id'),
  'invoiceitems_servicetype' =>$type[$i],
  'invoiceitems_quantity' => $quantity[$i],
  'invoiceitems_unitprice' => $rate[$i],
  'invoiceitems_notes' => $description[$i]
      );
   $this->db->insert('abc_invoiceitems', $data2);
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:56:22.283

将数组转换为[序列化](http://php.net/manual/en/function.serialize.php)字符串怎么样？

```
$data2 = array(
    'invoice_id' =>($id),
    'order_id' => $this->input->post('order_id'),
    'invoiceitems_servicetype' => serialize($this->input->post('type')),
    'invoiceitems_quantity' => serialize($this->input->post('quantity')),
    'invoiceitems_unitprice' => serialize($this->input->post('rate')),
    'invoiceitems_notes' => serialize($this->input->post('description'))
);

$this->db->insert('abc_invoiceitems', $data2); 
```

当您想将数据从数据库中拉回时，您可以对字符串进行反[序列化。](http://php.net/manual/en/function.unserialize.php)

# java - CYK算法伪代码混淆

> ID：14704473
> 
> 赞同：3
> 
> 时间：2013-02-05T09:49:34.167
> 
> 标签：java, algorithm, context-free-grammar, cyk

所以我一直在阅读维基百科和许多 powerpoints/pdf 中的[CYK 算法](http://en.wikipedia.org/wiki/CYK_algorithm)。

在维基百科中，有一部分我不是 100% 想要说的。你们能帮我分解一下吗？

```
let the input be a string S consisting of n characters: a1 ... an.
let the grammar contain r nonterminal symbols R1 ... Rr.
This grammar contains the subset Rs which is the set of start symbols.
let P[n,n,r] be an array of booleans. Initialize all elements of P to false.
for each i = 1 to n
  for each unit production Rj -> ai
     set P[i,1,j] = true

for each i = 2 to n -- Length of span
 for each j = 1 to n-i+1 -- Start of span
  for each k = 1 to i-1 -- Partition of span
   for each production RA -> RB RC
    if P[j,k,B] and P[j+k,i-k,C] then set P[j,i,A] = true

if any of P[1,n,x] is true (x is iterated over the set s, where s are all the indices for Rs) then S is member of language
  else
S is not member of language 
```

真正让我困惑的部分是“如果 P[1,n,x] 中的任何一个为真（x 在集合 s 上迭代，其中 s 是 Rs 的所有索引），那么 S 是语言的成员，否则 S 不是成员语言"

如果它是真的，它是说存在的任何 n 和 x，那么它是一个成员吗？还是说字符串长度 n 和 x 如果它是真的那么它是一个成员？还是完全不同的东西？

X究竟是什么？

编辑：

谢谢大家，我确实学会了怎么做。希望我能将您的两个答案都作为选定的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:09:46.360

当您执行 CYK 算法时，您基本上是从底部到最上面的元素填充底部三角矩阵。每当列索引、`(j,i,x)`行索引和非终结符号的某个元素为真时，这意味着您可以从符号生成单词的子序列。`j``i``x``j``j+i-1``Rx`

您的目标是从一个起始符号生成整个单词。与生成整个单词的可能性相对应的元素是`(1,n,x)`- 矩阵的最左边和最上面的元素，其中`x`是您的非终结符号的索引。由于您必须从一个开始符号开始，您正在寻找所有非终结符的子集 - 的子集`s`。如果您设法从一个开始符号生成整个单词，您只需声明该单词是该语言的一部分。如果不存在这样的开始符号，您将无法生成该单词，并且该单词不是语法描述的语言的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:03:42.867

它的意思是，如果 P[1,n,x] 对于任何开始的非终结符 x 为真，则将整个字符串（从 1 到 n 的词汇标记）解析为非终结符 x。在这个算法中，P[a,b,c] = true 意味着从索引 a 开始并且长度为 b 的词法标记的子串可以被解析为非终结符 c。

# ios - 在后台模式下实现的 Core Motion 加速度计的奇怪行为

> ID：14704478
> 
> 赞同：5
> 
> 时间：2013-02-05T09:49:41.620
> 
> 标签：ios, accelerometer, background-process, core-motion, cmmotionmanager

我正在 iOS 上实现计步器。一个重要的要求是，即使应用程序进入后台模式（例如，设备被锁定或用户按下主页按钮），它也必须工作。您可以在 App Store 中看到这样的实现，例如 Nike+、Runtastic Pedometer 等。

一些 SO 帖子证实，这可以通过 Core Motion 实现，或者特别是`CMMotionManager`通过附加属性`Required background modes`set to `location`。

我用下面的代码进行了快速测试，发现了一个奇怪的问题：

```
// AppDelegate.m
- (void)applicationDidEnterBackground:(UIApplication *)application
{ 
    if(self.motionManager==nil) {
        self.motionManager=[[CMMotionManager alloc] init];
    }
    self.motionManager.accelerometerUpdateInterval=1/50;

    if(self.accelerometerReadings==nil) 
        self.accelerometerReadings=[[NSMutableArray alloc] init];

    [self.motionManager startAccelerometerUpdatesToQueue:[NSOperationQueue mainQueue] withHandler:^(CMAccelerometerData *accelerometerData, NSError *error) {
        dispatch_async(dispatch_get_main_queue(), ^{
            [self.accelerometerReadings addObject:accelerometerData];
        });
    }
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    NSLog(@"The number of readings %d",self.accelerometerReadings.count);

    // do something with accelerometer data...
} 
```

我在 iPhone 4S 和 iOS 6.1 上尝试了这段代码。当应用程序启动时，我按下主页按钮并摇动它（模拟步行）5 秒钟，然后再次打开应用程序。这些动作会重复几次。我得到的输出是：

```
2013-02-05 16:41:42.028 [1147:907] readings 0
2013-02-05 16:41:51.572 [1147:907] readings 444
2013-02-05 16:42:00.386 [1147:907] readings 1032
2013-02-05 16:42:08.026 [1147:907] readings 1555
... 
```

我没有检查读数的正确性，但快速观察已经发现了一些问题。此应用程序第一次在后台模式下运行时没有读数（或有时只有一个读数）。

我在这里做错了什么？这是实现计步器的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T16:46:24.027

在 iPhone5s 中嵌入 M7 芯片，Apple 内置类 CMStepCounter 可能是最好的方法。

[https://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMStepCounter_class/Reference/Reference.html#//apple_ref/doc/uid/TP40013504](https://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMStepCounter_class/Reference/Reference.html#//apple_ref/doc/uid/TP40013504)

# javascript - 无法从外部 JS 文件调用函数以进行 onsubmit

> ID：14704480
> 
> 赞同：0
> 
> 时间：2013-02-05T09:49:42.120
> 
> 标签：javascript, html

我无法弄清楚为什么我的函数在提交时无法被我的 html 表单调用。当我将 javascript 直接放在头部时，它可以正常工作，但是当它位于自己的 .js 文件中时，它就不行了。

我的 validate.js

```
function validateForm()
{
if (document.forms[0].myName.value == "" )
    {alert("Name field cannot be empty.");
        return false;
   } // end if
   if (document.forms[0].myEmail.value == "")
   {
  alert("Email field cannot be empty");
  return false;
   }  // end if
   if (document.forms[0].myJob.value == "")
   {
        alert(" Job Description cannot be empty");
    return false;
}//end if
   if (document.forms[0].myPhone.value == "")
   {
        alert(" Phone Number cannot be empty");
        return false;
    }//end if
   alert("Name, email, job description and phone number are valid.");
   document.forms[0].myName.value = document.forms[0].myName.value.toUpperCase();
   return true;
} // end function validateForm 
```

还有我的 HTML

```
<title>Pasha the Painter Estimates</title>
<link href="painter.css" rel="stylesheet" type="text/css" />
<link href="favicon.ico" rel="icon" type="images/x-icon" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type=“text/javascript” src=“validate.js”&gt;</script>
</head>
<body> 
<div id="container">
<h1 id="logo"><img src="painterlogo.gif" alt="Pasha the Painter" width="620" height="120" /></h1>
<div id="leftcolumn">
  <ul>
     <li><a href="index.html">Home</a></li>
     <li><a href="services.html">Services</a></li>
     <li><a href="testimonials.html">Testimonials</a></li>
     <li><a href="estimates.html">Estimates</a></li>
  </ul>
</div>
<div id="rightcolumn">
  <p>Request a Free Estimate.</p>
  <form method="post" action="http://webdevfoundations.net/scripts/painter.asp" onsubmit="return validateForm();">
    <div class="myRow">
        <label class="labelCol" for="myName">Name: </label>
        <input type="text" name="myName" id="myName" /> 
    </div>
    <div class="myRow">
        <label class="labelCol" for="myEmail">E-mail: </label>
        <input type="text" name="myEmail" id="myEmail" />
    </div>
    <div>
        <label class="labelCol" for="myJob">Description </label>
        <textarea name="myJob" id="myJob" rows="2" cols="20"></textarea>
    </div>
    <div>
        <label class="labelCol" for="myPhone">Phone Number: </label>
        <input type="text" name="myPhone" id="myPhone" />
    <div class="mySubmit">
        <input type="submit" value="Free Estimates" />
    </div>
  </form>
  <div id="footer">Copyright &copy; 2011 Pasha the Painter<br />
  <a href="mailto:yourfirstname@yourlastname.com">yourfirstname@yourlastname.com</a>
  </div>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:51:41.780

您使用了错误的引号符号：

```
<script type=“text/javascript” src=“validate.js”&gt;</script>
             ^               ^     ^           ^ 
```

应该：

```
<script type="text/javascript" src="validate.js"></script>
             ^               ^     ^           ^ 
```

# google-chrome - Testacular：在禁用 Chrome 扩展的情况下运行测试

> ID：14704481
> 
> 赞同：0
> 
> 时间：2013-02-05T09:49:42.440
> 
> 标签：google-chrome, command-line, karma-runner

在配置了 Testacular 的 Google Chrome 中运行冒烟测试时，`singleRun: true`我发现一些像 LastPass 这样的扩展程序每次都会打开第一个运行窗口，并带有是/否提示。您必须单击 LastPass 提示才能完成测试套件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:49:42.440

您可以使用自定义浏览器脚本解决此问题。

1.  在您的 Testacular conf 中，更改`browsers = ['Chrome']`为`[__dirname + '/chrome_without_extensions.sh']`（我认为路径必须是绝对的）

2.  **在包含testacular.conf.js**的同一文件夹中创建一个名为**chrome_without_extensions.sh**的新文件；

     **```
    #!/bin/bash

    exec "/Applications/Google Chrome.app/Contents/MacOS/Google Chrome" \
    --user-data-dir="/tmp/testacular" \
    --disable-extensions \
    --no-default-browser-check \
    --no-first-run \
    --disable-default-apps \
    --use-fake-device-for-media-stream \
    "$@" 
    ```** 

 **您可能需要`chmod 775 chrome_without_extensions.sh`授予运行脚本的权限。

现在，当您下次运行 Testacular 时 - 任何像 LastPass 这样的扩展都不应该打扰您。

希望这可以帮助某人。**

# c# - 跨线程操作

> ID：14704483
> 
> 赞同：3
> 
> 时间：2013-02-05T09:49:51.130
> 
> 标签：c#, multithreading

谁能告诉我 if 和 else 语句在这个函数中是如何相关的。我正在将来自另一个线程的文本显示到 GUI 线程。执行的顺序或方式是什么。else 语句是否必要？

```
delegate void SetTextCallback(string text);

    private void SetText(string text)
    {
        // InvokeRequired required compares the thread ID of the
        // calling thread to the thread ID of the creating thread.
        // If these threads are different, it returns true.
        if (this.textBox7.InvokeRequired)
        {
            SetTextCallback d = new SetTextCallback(SetText);
            this.Invoke(d, new object[] { text });
        }
        else
        {
            this.textBox7.Text = text;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T09:53:41.540

1.  另一个线程调用 SetText
2.  因为它不是创建它需要的表单的线程`Invoke`。
3.  `this.Invoke`再次使用给定参数调用 SetText。还要检查[这个](https://stackoverflow.com/questions/14703698/c-invokedelegate/14703910)
4.  现在从 UI 线程调用 SetText，不需要 Invoke
5.  在`else`块中，我们确定文本已安全设置线程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T09:52:07.470

`InvokeRequired`用于检查语句是在主 UI 线程中执行还是在 UI 线程以外的其他线程中执行。

如果语句在 UI 线程之外的其他线程中执行，`Invoke`则用于不引起任何`CrossThread`异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T09:52:28.143

`else`绝对是必要的。

这段代码的作用是让您可以安全地`SetText`从任何线程调用。如果您从 UI 线程（块）以外的线程调用它，`if`它会透明地将调用转发到 UI 线程（`else`块），这是唯一可以访问控件以读取或设置其文本的线程。

如果没有在 UI 线程上完成，盲目地进行`this.textBox7.Text`将会导致异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T09:57:17.353

只是为了添加其他答案，这是一种常见模式（尤其是在被调用方法包含大量逻辑的情况下） - 如果`InvokeRequired`返回 true，则从 UI 线程回调到相同的方法：

```
private void SetText(string text)
{
    if (InvokeRequired)
        BeginInvoke(new Action<string>((t) => SetText(text)));
    else
        textBox7.Text = text;
} 
```

这样您就不必在 和 中重复您的`if`逻辑`else`。

# python - Python 的 simplejson 不解析简单的 json 字符串

> ID：14704488
> 
> 赞同：3
> 
> 时间：2013-02-05T09:50:21.993
> 
> 标签：python, json

我尝试解析从网上获得的一个非常简单的 json 字符串：**{"price" : '10.25'}** 如您所见，数字 (10.25) 在单引号之间，对于简单的 json 来说似乎是个问题：

再生产：

```
import simplejson as json
json_str = """ {"price" : '10.25'} """
json.loads(json_str) 
```

结果：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/pymodules/python2.5/simplejson/__init__.py", line 307, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/pymodules/python2.5/simplejson/decoder.py", line 335, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/pymodules/python2.5/simplejson/decoder.py", line 353, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded 
```

但是，如果我将单引号更改为双引号 - 它可以工作。\不幸的是，我得到的 json 并不像上面的示例那么简单，所以我不能用字符串替换命令替换所有单引号。

有人知道解析这个json的正确方法是什么吗？

PS我使用python 2.5。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:52:22.540

`{"price" : "10.25"}`, JSON 仅包含双引号。

带单引号的 JSON 无效（参见：www.jsonlint.com）：

```
Parse error on line 2:
{    "price": '10.25'}
--------------^
Expecting 'STRING', 'NUMBER', 'NULL', 'TRUE', 'FALSE', '{', '[' 
```

您可以使用正则表达式替换更正您的 json，或使用 ast.literal eval 将其加载为 python 对象（或将其转储为 json 并再次加载）

```
>>> a = """ {"price" : '10.25'} """
>>> import ast
>>> new_dict = ast.literal_eval(a.strip())
>>> import json
>>> json.dumps(new_dict)
'{"price": "10.25"}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:52:44.653

单引号不是有效的 JSON，所以 simplejson 正在做它应该做的事情。不幸的是，问题是您收到的 JSON。我看不到一点 regex-fu 无法帮助您查找和替换您需要的单引号的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:54:00.390

如果只有数字或应该双引号，则不应引用该值。所以正确的做法是：

```
import simplejson as json
json_str = """ {"price" : 10.25} """
json.loads(json_str) 
```

并且要替换它，您可以使用例如 finditer 用一些正则表达式解析 json 字符串

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:58:54.570

[在json.org](http://www.json.org/)检查什么是有效的 JSON 格式。

如您所见，只有双引号对字符串（字典键）有效。

# android - ActionBarSherlock 库无法识别

> ID：14704490
> 
> 赞同：0
> 
> 时间：2013-02-05T09:50:34.183
> 
> 标签：android, eclipse, actionbarsherlock

我将android项目从idea导入到eclipse，我遇到了一个问题：无法识别ActionBarSherlock、MediaLibrary等。在项目属性中我看到了这样的事情![在此处输入图像描述](../Images/92c2a20da96a343f526c963851b972db.png)

在图书馆树中，情况是：

![在此处输入图像描述](../Images/bdf88be41662bdf1c53776fe994e37ca.png)

根元素是我的主要项目。如何使这个 actionbarsherlock 和其他人可以识别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:11:20.360

项目是否位于不同的驱动器上？我遇到了同样的问题，然后注意到如果您查看 android 项目文件，您会注意到这些库的位置设置为相对位置。在 Eclipse 中，实际代码的位置与工作区中的数据存在差异。您需要注意这种差异。

我将 ABS (action bar sherlock) 的源和我的 android 项目的源移动到同一个磁盘 - 逻辑或物理上，并重新选择了对 ABS 项目的引用。这有效并为我解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:56:06.063

如果您的配置以前有效，请尝试从您的项目中删除所有库，进行干净的构建（我不知道这是否有必要，但只是为了确定）。然后再次打开您的项目属性并将您的库添加到项目中。现在在您单击确定并且项目已重建后检查您的库是否已被识别。

# weka - 如何从 ImageJ 宏调用/执行 java 程序？

> ID：14704500
> 
> 赞同：0
> 
> 时间：2013-02-05T09:51:07.377
> 
> 标签：weka, imagej

我想做的是使用训练有素的 WEKA 模型对图像进行分类。我知道 ImageJ/Fiji 的 Advanced Weka Segmentation 插件的存在，但我使用的是定制的特征向量，它无法使用它。

无论如何，在我试图执行的 ImageJ 宏中：

```
exec("java", "-cp", "/home/dionysis/weka-3-7-7/weka.jar", "weka.classifiers.trees.RandomForest",  "-T", "/home/dionysis/Desktop/CNH/cnh-data/2class-deffeat-data-20121218.arff", "-l", "/home/dionysis/Desktop/CNH/cnh-data/2class-deffeat-ranfor-classifier-20121218.model.model", "-p", "0", ">", "/home/dionysis/Desktop/testrun-data.out"); 
```

这实质上是为 weka 运行终端命令。在 linux 终端中，它运行良好，但是，在宏中调用它并没有做任何事情。它甚至不会产生错误。

一开始，我认为问题在于我试图在系统的 JVM 上运行一个 java 程序，该程序是从运行在不同 JVM 上的 java 程序调用的（ImageJ/Fiji 与他们自己的 JVM 捆绑在一起）。出于这个原因，我尝试使用系统的 JVM 运行 ImageJ/Fiji，但没有运气。

有人对此有任何提示吗？我将不胜感激...谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:17:47.687

由于您在运行 ImageJ/Fiji 时已经在运行 Java，因此无需再次通过 调用 Java 运行时`exec`，只需使用[`call("Class.method", arg1, ...)`](http://imagej.nih.gov/ij/developer/macro/functions.html#call)宏函数即可。

随着 Weka 包含在 Fiji 中，您应该能够运行任何公共静态方法，例如`call("trainableSegmentation.Weka_Segmentation.loadData", "/home/user/data.arff");`（参见[此处](http://fiji.sc/wiki/index.php/Advanced_Weka_Segmentation#Macro_language_compatibility)）。但是，如果您喜欢与 Java 类进行更多交互，建议使用一些更强大的脚本语言，如[JavaScript](http://fiji.sc/wiki/index.php/Javascript_Scripting)或[Python](http://fiji.sc/wiki/index.php/Jython_Scripting)，它们也包含在 Fiji 中。

# android - 即使使用 startforeground，应用程序也会崩溃

> ID：14704501
> 
> 赞同：4
> 
> 时间：2013-02-05T09:51:08.237
> 
> 标签：android, background-process, foreground

即使使用前台服务，我的 android 应用程序也会在后台被杀死。这是漏洞清单：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true" >
</supports-screens>

<application
    android:debuggable="true"
    android:icon="@drawable/icon"
    android:label="TritonHK"
    android:theme="@android:style/Theme.NoTitleBar" >
    <activity
        android:name=".LoginActivity"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <service
        android:name=".MyService"
        android:icon="@drawable/icon"
        android:label="TritonHK"
        android:process=":my_process" >
    </service>

    <activity
        android:name="Setting"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="MenuScreen"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="TaskSheetList"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="TaskDetails"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="CreditsList"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="SectionsList"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="SuperDashboard"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="InspectionActivity"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="Inbox"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="InspectionDetail"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="StaffListView"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="MultiTaskSheetListView"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="CheckListItemDetails"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="OpenJobs"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="GuestDetails"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="MessageList"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="ImageCollectionActivity"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="NewBGMessages"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
    </activity>
</application>
<!-- Added for 4.1 Android os -->
<uses-sdk android:minSdkVersion="7" />

<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" />
<uses-feature android:name="android.hardware.telephony" />

<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.INTERNET" >
</uses-permission>
<uses-permission android:name="android.permission.READ_PHONE_STATE" >
</uses-permission>
<uses-permission android:name="android.permission.CALL_PHONE" >
</uses-permission>
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.SET_WALLPAPER" >
</uses-permission>
<uses-permission android:name="android.permission.GET_TASKS" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

这是代码`service`

```
 MLog.w(getClass().getName(), "TritonHK started");

         Notification note=new Notification(R.drawable.icon,
                                             "TritonHK is running",
                                             System.currentTimeMillis());
         Intent i=new Intent(this, BGMessages.class);

         i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|
                    Intent.FLAG_ACTIVITY_SINGLE_TOP);

         PendingIntent pi=PendingIntent.getActivity(this, 0,
                                                     i, 0);

         note.setLatestEventInfo(this, "TritonHK",
                                 "TritonHK",
                                 pi);
         note.flags|=Notification.FLAG_NO_CLEAR;

         startForeground(1337, note); 
```

这就是我开始我的方式`service`：

```
Intent i=new Intent(this, MyService.class);

        startService(i); 
```

这是刚刚被杀死时的logcat：

```
02-05 10:04:16.676 D/dalvikvm(20458): GC_CONCURRENT freed 2010K, 54% free 3862K/8327K, external 11961K/14009K, paused 13ms+2ms
02-05 10:04:20.576 D/dalvikvm(19610): GC_CONCURRENT freed 511K, 52% free 2973K/6151K, external 2171K/2711K, paused 2ms+2ms
02-05 10:04:28.256 D/dalvikvm(19610): GC_CONCURRENT freed 449K, 52% free 2966K/6151K, external 2112K/2638K, paused 2ms+11ms
02-05 10:04:32.626 D/dalvikvm(20458): GC_CONCURRENT freed 1970K, 54% free 3862K/8327K, external 11961K/14009K, paused 7ms+2ms
02-05 10:04:43.216 D/dalvikvm(19610): GC_CONCURRENT freed 498K, 52% free 2974K/6151K, external 2140K/2672K, paused 2ms+2ms
02-05 10:04:48.266 D/dalvikvm(20458): GC_CONCURRENT freed 1974K, 54% free 3869K/8327K, external 11961K/14009K, paused 3ms+3ms
02-05 10:04:58.746 D/dalvikvm(19610): GC_CONCURRENT freed 510K, 52% free 2973K/6151K, external 2140K/2672K, paused 1ms+2ms
02-05 10:05:00.176 D/kernel  (  120): [40912.899353] max17040 0-0036: batt:100%, 4126 mV
02-05 10:05:03.686 D/dalvikvm(20458): GC_CONCURRENT freed 1979K, 54% free 3862K/8327K, external 11961K/14009K, paused 7ms+3ms
02-05 10:05:13.616 D/dalvikvm(19610): GC_CONCURRENT freed 510K, 52% free 2973K/6151K, external 2202K/2750K, paused 2ms+2ms
02-05 10:05:19.706 D/dalvikvm(20458): GC_CONCURRENT freed 1970K, 54% free 3862K/8327K, external 11961K/14009K, paused 14ms+2ms
02-05 10:05:21.346 D/dalvikvm(19610): GC_CONCURRENT freed 449K, 52% free 2962K/6151K, external 2112K/2638K, paused 2ms+3ms
02-05 10:05:35.526 D/dalvikvm(20458): GC_CONCURRENT freed 2038K, 54% free 3871K/8327K, external 11961K/14009K, paused 1ms+3ms
02-05 10:05:36.676 D/skia    (20458): purging 194K from font cache [25 entries]
02-05 10:05:36.936 D/dalvikvm(19610): GC_CONCURRENT freed 498K, 52% free 2974K/6151K, external 2202K/2750K, paused 1ms+5ms
02-05 10:05:44.656 D/dalvikvm(  238): GC_CONCURRENT freed 1828K, 42% free 7427K/12743K, external 6677K/8035K, paused 5ms+20ms
02-05 10:05:46.206 I/ActivityManager(  238): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10100000 cmp=com.tritonhk.android/.LoginActivity } from pid 238
02-05 10:05:46.266 I/ActivityManager(  238): Start proc com.tritonhk.android for activity com.tritonhk.android/.TaskDetails: pid=20479 uid=10124 gids={1006, 3003, 1015}
02-05 10:05:46.336 W/InputManagerService(  238): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@2b4a1708 
```

我正在开始我`service`的.`onCreate``first activity`

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:49:34.463

您有 2 个单独的进程。您的活动在一个进程中运行，而您的服务在另一个进程中运行。你告诉 Android 你的**服务**是一个前台服务，应该防止 Android 杀死它。但是，您的活动正在另一个进程中运行，当该进程进入后台时，Android 只会将其杀死。

要解决此问题，请将您的服务和您的活动置于同一流程中。然后，Android 不会终止该进程，因为您在其中运行了一个前台服务。当然，不能保证 Android 无论如何都不会杀死您的进程（如果它需要资源），但是如果您的应用程序不是资源占用者，那么它很有可能会继续存在。

要将服务和活动放在同一流程中，请从`<service>`清单中的描述中删除此行：

```
 android:process=":my_process" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:16:24.400

不幸的是，没有任何可能保证您的服务不会被 android 杀死：请参阅[http://www.androidguys.com/2009/09/09/diamonds-are-forever-services-are-not/](http://www.androidguys.com/2009/09/09/diamonds-are-forever-services-are-not/)

让服务无限期地保持活力也不是一个好主意：[http ://www.androidguys.com/2010/03/29/code-pollution-background-control/](http://www.androidguys.com/2010/03/29/code-pollution-background-control/)

您可以使用一些方法来提高服务的优先级，但在某一时刻，该服务会被杀死。

# ruby-on-rails - 如何更改 Spree 默认主页？

> ID：14704503
> 
> 赞同：10
> 
> 时间：2013-02-05T09:51:12.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, spree

我想将 spree 站点的根路径更改为静态页面。

谁能告诉我如何更改狂欢默认主页？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T11:40:32.827

一种简单的解决方案是：在您的`public`目录中放置静态`index.html`. 然后在你的`routes.rb`：

```
mount Spree::Core::Engine, :at => '/store' 
```

想法将链接从您`index.html` 指向`yoursite.com/store`.

# apache - Apache 在 Redhat OpenShift 上从 /static/root/ 重写根静态文件

> ID：14704504
> 
> 赞同：0
> 
> 时间：2013-02-05T09:51:13.197
> 
> 标签：apache, mod-rewrite, openshift

我正在使用[这个项目](https://github.com/openshift/bottle-openshift-quickstart)部署在 Redhat Openshift 和 mod_wsgi + apache

重写文件放置的`/wsgi/.htaccess`内容是：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{DOCUMENT_ROOT}/wsgi/static/root/%{REQUEST_FILENAME} -f
RewriteRule ^(.*)$ static/root/$1 [L]
</IfModule> 
```

如您所见，我想重写

```
http://mysite/favicon.ico 
```

到服务器上的这个位置

```
wsgi/static/root/favicon.ico 
```

但是我的配置根本不起作用。我尝试的每条静态路径都不会被这条规则捕获。由于我无法`strace`在 Redhat Openshift 上安装 apache，所以我不知道出了什么问题。

有什么帮助吗？TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:18:09.350

那么指定 rewriteBASE 呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:54:31.863

好的，我设法`strace -fp $APACHE_PID`并发现了如何：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{DOCUMENT_ROOT}/static/root%{REQUEST_URI} -f
RewriteRule . static/root%{REQUEST_URI} [L]
</IfModule> 
```

有几个试验和错误。

1.  `REQUEST_FILENAME`原来是本地文件路径。所以改用`REQUEST_URI``

2.  OpenShift 定义`DocumentRoot`到项目`wsgi`目录

3.  并且`Rewriterule`不应该`$1`用于正则表达式匹配，因为它将被映射到`static/root/application/file_path`. 我猜 mod_wsgi 做了一些有趣的别名。

# jquery - 使用 jQuery 检查多组单选按钮

> ID：14704505
> 
> 赞同：0
> 
> 时间：2013-02-05T09:51:16.083
> 
> 标签：jquery, html

我在表单中使用了多组单选按钮。它看起来像这样：

```
<input name='project[0]' type='radio' />
<input name='project[0]' type='radio' />
<input name='project[0]' type='radio' />

<input name='project[1]' type='radio' />
<input name='project[1]' type='radio' />
<input name='project[1]' type='radio' /> 
```

我也可以使用以下语法：

```
<input name='project_0' type='radio' />
<input name='project_0' type='radio' />
<input name='project_0' type='radio' />

<input name='project_1' type='radio' />
<input name='project_1' type='radio' />
<input name='project_1' type='radio' /> 
```

如何检查是否使用 jQuery 检查了每组按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:55:29.603

```
if ($('input[type="radio"][name^="project_"]:checked').length === 2) {
   //ok
} else //not ok 
```

以.`2`开头的无线电组的数量在哪里？`project_``name`

[**演示**](http://jsbin.com/oxogiw/1/edit)

请注意，W3C 建议始终保留预先选择的选项，因为用户无法轻松地将收音机返回到未确定（未选择）状态。来自[HTML4.01 表单规范](http://www.w3.org/TR/html401/interact/forms.html#h-17.2.1)：

> 如果在一个集合中没有共享相同控件名称的单选按钮最初是“开”的，则用于选择哪个控件最初是“开”的用户代理行为是未定义的。**笔记。**由于现有实现对这种情况的处理方式不同，因此当前规范不同于 RFC 1866（[[RFC1866]](http://www.w3.org/TR/html401/references.html#ref-RFC1866)第 8.1.2.4 节），其中指出：
> 
> > 在任何时候，都会检查一组中的一个单选按钮。如果一组单选按钮的任何元素都没有指定“已检查”，则用户代理必须首先检查该组的第一个单选按钮。
> 
> 由于用户代理行为不同，作者应确保在每组单选按钮中，一个最初是“打开”的。

这也减少了所需的前端检查量。不过，我不记得有任何主要浏览器强制检查收音机，并且当前的[HTML5.1 表单规范](http://www.w3.org/TR/html51/forms.html#radio-button-state-%28type=radio%29)标准化了最初不选中所有收音机的能力：

> ***注意：如果单选按钮组中的单选按钮在插入文档时没有被选中，那么它们在界面中最初都将被取消选中，直到其中一个被选中（由用户或由脚本）。***

# dependency-injection - 依赖注入中的可选性（StructureMap）

> ID：14704506
> 
> 赞同：0
> 
> 时间：2013-02-05T09:51:23.507
> 
> 标签：dependency-injection, structuremap

我知道在管理类的正确工作和行为真正需要的依赖项时，应该应用构造函数的注入。

尽管如此，我还是想公开这个例子。让我们假设一个 MailServer 类：

```
public class MailServer : IMailServer
{
    public MailServer(ServerData serverData)
    {
        _serverData = serverData;
    }

    public void SendMail(MailData mailData)
    {
        //Work with mailData instance and send mail
        ...
        smtp.Send(mail);
    }
} 
```

ServerData 包含知道如何发送邮件所需的信息，例如：服务器 IP 地址、FROM 源地址、FROM 密码。MailData 包含所需的正文和您要发送邮件的地址。

两者都是必需的依赖项。**困扰我并且我不知道如何解决的是 ServerData 在应用程序的不同位置可能不同**。如果在发票系统中使用了 IMailServer，则邮件可能应该来自“invoices@domain.com”，但如果它用于其他区域，则应该来自“notifications@domain.com”。

我不知道这是管理这个的正确方法。至于与依赖注入相关的一切，我想知道与暴露的功能相关的良好实践。这段代码几乎总是出现在每个应用程序中，很高兴知道它必须如何完成。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:27:31.933

为什么不`MailServer`使用源地址等的适当设置注册类的不同实例并将它们注入应用程序的各个组件中？消费者`IMailService`不需要知道这个细节。

* * *

**更新**

我不是 StructureMap 配置引擎的专家，但如果你使用这样的东西

```
var registry = new Registry();
registry.For<IMailServer>().Use<MailServer>();
registry.For<ServerData>().ConditionallyUse(x =>
{
  x.If(c => c.Root.RequestedType == typeof(Consumer1)).ThenIt.IsThis(new ServerData("1"));
  x.If(c => c.Root.RequestedType == typeof(Consumer2)).ThenIt.IsThis(new ServerData("2"));
});
var container = new Container(registry);
var consumer1 = container.GetInstance<Consumer1>();
Assert.AreEqual("1", consumer1.Server.ServerData.Foo);
var consumer2 = container.GetInstance<Consumer2>();
Assert.AreEqual("2", consumer2.Server.ServerData.Foo); 
```

您应该能够将一个非常具体的`ServerData`对象注入到各个消费者的每个实例中。

# java - Android：Thread.sleep() 不工作

> ID：14704507
> 
> 赞同：2
> 
> 时间：2013-02-05T09:51:24.947
> 
> 标签：java, android, android-animation

在我的 android 应用程序中，我想`animation`在一些`imageViews`实施延迟的情况下应用。当第一个`imageView`动画 50% 时，我想从`animation`第二个开始，`imageView`然后像这样继续。

我`Thread.sleep()`为此使用了方法。

```
public void showImage() throws IOException, InterruptedException{
    final Animation anim = AnimationUtils.loadAnimation(Home.this,R.anim.myanimation);

    image_1.setImageUrl(links[0]); 
    image_2.setImageUrl(links[1]); 
    image_3.setImageUrl(links[2]);
    image_4.setImageUrl(links[3]);

    image_5.setImageUrl(links[4]); 
    image_6.setImageUrl(links[5]); 
    image_7.setImageUrl(links[0]); 
    image_8.setImageUrl(links[1]); 
    //System.out.println("me");

    image_1_layer.setAnimation(anim); 
    Thread.sleep(5000);
    image_2_layer.setAnimation(anim); 
    Thread.sleep(5000);
    image_3_layer.setAnimation(anim);
    Thread.sleep(5000);
     image_4_layer.setAnimation(anim); 
     Thread.sleep(5000);

     image_5_layer.setAnimation(anim);
     Thread.sleep(5000);
     image_6_layer.setAnimation(anim);
     Thread.sleep(5000);
     image_7_layer.setAnimation(anim);
     Thread.sleep(5000);
     image_8_layer.setAnimation(anim);
     Thread.sleep(5000);
} 
```

但是当它运行应用程序时，它会在启动之前延迟`animation`，然后对所有`imageViews`. 如何在前一个 5 秒后开始为下一个设置`imageView`动画？`imageView``animation`

我从 override 方法中调用了上述`showImage()`方法`onPostExecute()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:04:20.663

使用`Thread.sleep`是实现你想要的不正确的方式。你应该看看这个[`Animation`](http://developer.android.com/reference/android/view/animation/Animation.html)类，特别是[`setStartTime`](http://developer.android.com/reference/android/view/animation/Animation.html#setStartTime%28long%29).

您可以构建具有不同（复合）开始时间的不同动画对象并将它们全部应用于视图，或者您可以使用监听动画事件[`setAnimationListener`](http://developer.android.com/reference/android/view/animation/Animation.html#setAnimationListener%28android.view.animation.Animation.AnimationListener%29)

# java - 为非常大的 N 找到斐波那契的第 N 项

> ID：14704512
> 
> 赞同：1
> 
> 时间：2013-02-05T09:51:48.763
> 
> 标签：java, fibonacci, largenumber

我使用了迭代方法和递归方法，但在这两种情况下，我都没有更快地得到 fibo(10^6) 的结果，即。复杂度为 O(logN)。

迭代方法：

```
static BigInteger fibo(long n){
    BigInteger a=new BigInteger("1");
    BigInteger b=new BigInteger("2");
    BigInteger c=new BigInteger("0");
    for(long i=3;i<=n;i++){
        c=a.add(b);
        a=b;
        b=c;
    }
    return c;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:29:15.507

仅计算`n`th 值的封闭形式：

![封闭式斐波那契公式](../Images/799fcacba34be4dddb85599b0740d9c5.png)

[您可以在Wolfram MathWorld](http://mathworld.wolfram.com/FibonacciNumber.html)和[Wikipedia](http://en.wikipedia.org/wiki/Fibonacci_number)上阅读有关该主题（包括此公式）的更多信息。

不幸的是，你不能`BigInteger`在这里使用，但我认为你应该可以用 a 来做到这一点`BigDecimal`（虽然我还没有测试过）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-17T07:43:34.717

如果您想找出大 n 的*fib(n)*的值，您需要使用**矩阵求幂法**，即用于求解线性递推方程的方法。

矩阵求幂的最大优势在于其运行时间只需 O(k^3 * logN)，其中 N 是我们正在计算的矩阵的幂，k 是矩阵的大小。

*检查下面提到的计算大 n 的斐波那契的 python 代码片段（具有 10^9+7 的模型，使数字在 int 范围内）。*[您可以在此](http://fusharblog.com/solving-linear-recurrence-for-programming-contest/)博客中找到相同的详细说明。

*matrix_mult*函数将作为参数给出的两个矩阵相乘并返回它们的乘积。

```
def matrix_mult(A, B):
    C = [[0, 0], [0, 0]]
    for i in range(2):
        for j in range(2):
            for k in range(2):
                C[i][k] = (C[i][k] + (A[i][j]*B[j [k])%mod)%mod
return C 
```

*fast_expo*函数计算并返回 (matrix^power)，这是负责 O(logn) 运行时间的函数。

```
def fast_expo(matrix, power):
    if(power==1):
        return matrix
    else:
        if(power%2==0):
            matrix1 = fast_expo(matrix, power/2)
            return matrix_mult(matrix1, matrix1)
        else:
            return matrix_mult(matrix, fast_expo(matrix, power-1)) 
```

使用预先计算的矩阵作为参数之一调用该函数。在斐波那契的情况下，矩阵是 [[1, 1], [1, 0]]。

```
matrix = [[1, 1], [1, 0]]
matrix_n = fast_exponentiation(matrix, number-2)
print (matrix_n[0][0] + matrix_n[0][1]) % 1000000007 
```

对于所有 n>2，这里的幂应该是 M^(n-2)，其中 M 是基本矩阵，因为您已经有了 f(n) 的前 2 个值，即 f(1) 和 f(2)。

# titanium-mobile - 在活动/非活动状态下自定义选项卡组图标

> ID：14704513
> 
> 赞同：0
> 
> 时间：2013-02-05T09:51:51.970
> 
> 标签：titanium-mobile, appcelerator-mobile

标签处于活动状态时如何更改标签的图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:35:40.610

您可以使用更改此设置

```
Ti.UI.currentTab.icon = 'icon_image.png'; 
```

另请参阅此[链接](http://developer.appcelerator.com/question/135063/how-to-change-active-tab-icon)。希望它会有所帮助。

# javascript - HTML 自定义属性和 IE

> ID：14704515
> 
> 赞同：1
> 
> 时间：2013-02-05T09:51:56.377
> 
> 标签：javascript, jquery, html, css, jquery-selectors

有没有办法添加自定义 HTML 属性来表示 DIV 元素，然后能够在 IE 中使用 CSS 属性选择器？

在 FF 中有效但在 IE 中无效的示例（变为绿色）：

在 JavaScript 中：

```
element.setAttribute('newAttr', 'green'); 
```

在 CSS 中：

```
[newAttr=green] {
   background-color: green;
} 
```

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:10:19.133

```
var attribute = document.createAttribute("size");
attribute.nodeValue = "15"
document.getElementById("text").setAttributeNode(attribute); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:56:13.933

你可以这样做：

```
<div id="some" data-newattr="green"></div> 
```

# c# - WCF 身份验证错误“调用方未由服务进行身份验证”

> ID：14704520
> 
> 赞同：0
> 
> 时间：2013-02-05T09:52:02.837
> 
> 标签：c#, wcf, authentication

我有以下情况：

*   客户端应用程序正在工作组中的 PC 上运行。
*   WCF 服务库托管在域中 PC 上的 Windows 服务下。
*   Windows 服务允许所有人访问，并且自从我拥有 XP 以来，我已经使用**HTTPCFG注册了 HTTP 地址。**
*   禁用防火墙。
*   我正在使用**wsHttpBinding**。
*   我已经为 a 添加了一个自定义`bindingConfiguration`，`<security mode="None">`但它没有用！
*   尝试添加以下代码以授予对服务的访问权限：

    ```
    var objVerifyService = new VerifyClient();
    objVerifyService.ClientCredentials.Windows.ClientCredential.UserName = "xxx@domain.com";
    objVerifyService.ClientCredentials.Windows.ClientCredential.Password = "111"; 
    ```

但这返回了一条错误消息：

> 从另一方收到不安全或不正确安全的故障。有关故障代码和详细信息，请参阅内部 FaultException。验证失败

我应该多做些什么？我无法将客户端 PC 加入域

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:56:49.143

从您发布的内容很难看出问题，您可以发布您的完整配置吗？

您可能需要阅读[**Codeplex 应用场景指南**](http://wcfsecurity.codeplex.com/wikipage?title=Application%20Scenarios&referringTitle=Home)，它为您提供了许多场景，其中包含您需要的代码和配置清单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:57:53.487

如果将安全模式添加为 none，则服务无法进行身份验证，如果仅使用 HTTP，则应将其设置为 Message，如果使用 HTTPS，则应将其设置为 TransportWithMessageCredential。还要确保两个配置文件都设置正确。

# jquery - 如何使用 jQuery 访问不同的对象？

> ID：14704523
> 
> 赞同：0
> 
> 时间：2013-02-05T09:52:08.333
> 
> 标签：jquery

我已经开发了一些用于图像滑动的代码，其中每当发生鼠标事件时，我都想要`id`另一个`div`，但鼠标所在的位置除外。

我的代码是：

```
$('#div1,#div2,#div3,#div4,#div5,#div6').mouseover(function () {
    $('#div1,#div2,#div3,#div4,#div5,#div6').css('width', '100px')
    $("." + $(this).data('class')).animate({                   
        'width':"400px",                   
    }, {
        'duration':1500,
        easing:'easeOutBack',
    })
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:56:06.253

我建议将其更改为使用类而不是 id。它会让你的代码更整洁。

给每个你想产生这种效果的元素一个类，`animated`然后试试这个代码。

```
$('.animated').mouseover(function () {
  $(this).removeClass('animated');
  $('.animated').css('width', '100px')
  $(this)
    .addClass('animated')
    .animate({                   
      'width':"400px",                   
    }, 1500);
}); 
```

[这是一个](http://jsfiddle.net/R6aS7/1/)展示它的例子。虽然我不认为你的代码做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:55:18.843

用于`.not`从匹配元素集中移除悬停在 div 上的元素。

```
$('#div1,#div2,#div3,#div4,#div5,#div6').mouseover(function () {
    $('#div1,#div2,#div3,#div4,#div5,#div6').not(this).css('width', '100px')
    $("." + $(this).data('class')).animate({                   
                    'width':"400px",                   
                }, {
                    'duration':1500,
                    easing:'easeOutBack',
                })
    }); 
```

附带说明一下，在这种情况下使用类选择器会更干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:59:02.873

```
$( function() {
$("[id^=div]").mouseover( function() {
  var my = $(this).attr("id");
  var id = new Array;
  $("[id^=div]").each( function() {
    if($(this).attr("id") != my) {
       id.push($(this).attr("id"));
    }
  });
});
}); 
```

[工作小提琴或示范](http://jsfiddle.net/hHgpS/)

您可以访问每个属性。

我已获取所有 id 并将所有 id 添加到 array `id`。您可以在您的函数中进一步访问它。

# android - 如何在非相机应用程序中使用 Android 相机 API？

> ID：14704524
> 
> 赞同：11
> 
> 时间：2013-02-05T09:52:11.073
> 
> 标签：android, camera, android-image, face-detection, image

我想在非相机应用程序中使用一些 Android 4 API。

API 包括一些非常好的人脸检测类，包括`Camera.Face`自 API 14 以来可用的类。我想应用相同的人脸检测类，以便对保存在设备上的图像实现人脸检测。我更愿意使用它来处理存储在设备本身上的图片（例如：社交标签、面部图像处理等）

我需要有关如何完成此重用任务的指导。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T18:41:21.433

如果您需要检测设备上存储的图像中的人脸，您绝对可以在不破解 android 源代码的情况下做到这一点！

[`FaceDetector`](http://developer.android.com/reference/android/media/FaceDetector.html)自 API 1 起，包下就有一个API **`android.media`**，它接受`Bitmap`输入（*格式为 565 格式*）并为您提供该图片中人脸的位置。

以下是您需要的步骤：

1-加载`Bitmap`并将其转换为`565 format`（假设您`facesPicture`的可绘制资源下有文件）

```
Bitmap originalBitmap = 
            BitmapFactory.decodeResource(getResources(),R.drawable.facesPicture);

Bitmap bitmap = originalBitmap .copy(Bitmap.Config.RGB_565, true);

originalBitmap .recycle(); // allow the GC to collect this object 
```

2-定义`Face`数组来保存检测到的人脸信息并初始化`FaceDetector`

```
int MAX_FACES = 20; // assuming that the image will have maximum 20 faces

FaceDetector.Face[] faces = new FaceDetector.Face[MAX_FACES];

FaceDetector faceDetector = 
             new FaceDetector(bitmap.getWidth(), bitmap.getHeight(), MAX_FACES); 
```

3- 搜索人脸并处理结果

```
int facesCount = faceDetector.findFaces(bitmap, faces);

for(int i=0; i<facesCount; i++) {
    FaceDetector.Face face = faces[i];

    float detectionConfidence = face.confidence(); // over 0.3 is OK

    PointF eyesMidPoint = new PointF();

    face.getMidPoint(eyesMidPoint);

    float eyesDistance = face.eyesDistance();

    float rotationX = face.pose(FaceDetector.Face.EULER_X);

    float rotationY = face.pose(FaceDetector.Face.EULER_Y);

    float rotationZ = face.pose(FaceDetector.Face.EULER_Z);

    // Do something with these values

} 
```

[您可以在此处](http://www.developer.com/imagesvr_ce/5130/AndroidFaceDetection_source.zip)下载完整的项目示例，该示例在本文[使用 Android API 进行人脸检测中进行了说明](http://www.developer.com/ws/android/programming/face-detection-with-android-apis.html)

如果你想要更高级的东西，你应该考虑使用 OpenCV

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T15:20:13.927

FaceDetectionListener 是您想要用来检测人脸的工具，但它只在相机上进行侦听。这是它唯一的本机功能。如果您真的想在用户设备上的图片上使用它，我建议您只需下载相机 API 的源代码并根据您的需要调整您想要的方法。

您可以在此处找到所有库存 android 代码的来源： [https ://android.googlesource.com/](https://android.googlesource.com/)

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T18:39:42.353

你知道[FaceDetector](http://developer.android.com/reference/android/media/FaceDetector.html)类吗？它自 API v1 以来就存在，并且运行良好。如果您需要更*高级*的东西，您可以随时使用一些专用框架，例如[OpenCV](http://opencv.org/)（还提供了一些 Java 绑定，以便轻松集成到 Android 应用程序中）

您可以查看我前段时间与一位同事撰写的几篇（有点过时，但仍然有用）的文章：

1.  [Andriod Part-I 上的人脸检测](http://www.smallscreendesign.com/2011/01/25/about-face-detection-on-android-part-1/)
2.  [Andriod Part-II 上的人脸检测](http://www.smallscreendesign.com/2011/02/07/about-face-detection-on-android-%E2%80%93-part-1/)

# android - 使用 Google Map Android API v2 标记的错误标题

> ID：14704529
> 
> 赞同：4
> 
> 时间：2013-02-05T09:52:23.227
> 
> 标签：android, google-maps-android-api-2

我正在尝试开发一些用于在地图上聚类标记的算法。显示标记的数量应取决于当前的缩放级别。如果我从 10 个组中显示一个标记，我想将其标题设置为“10”。问题是现在有时可见的标记根本没有标题，我不知道这怎么可能。这是我的代码：

```
public class MainActivity extends FragmentActivity {
private ArrayList<Marker> markers = new ArrayList<Marker>();
private Bitmap markerImage;
private float oldZoom = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    markerImage = BitmapFactory.decodeResource(this.getResources(), R.drawable.ic_launcher);

    setContentView(R.layout.activity_main);

    final GoogleMap map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
    map.getUiSettings().setMyLocationButtonEnabled(true);
    map.setOnCameraChangeListener(new GoogleMap.OnCameraChangeListener() {
        @Override
        public void onCameraChange(CameraPosition cameraPosition) {
            if (cameraPosition.zoom != oldZoom) {
                checkMarkers(map);
            }
            oldZoom = cameraPosition.zoom;
        }
    });
    createMarkers(map);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

private void createMarkers(GoogleMap map) {
    double initLat = 48.462740;
    double initLng = 35.039572;
    for (float i = 0; i < 2; i += 0.2) {
        LatLng pos = new LatLng(initLat + i, initLng);
        Marker marker = map.addMarker(new MarkerOptions()
                .position(pos)
                .icon(BitmapDescriptorFactory.fromBitmap(markerImage)));
        markers.add(marker);
    }
    for (float i = 0; i < 2; i += 0.2) {
        LatLng pos = new LatLng(initLat, initLng + i);
        Marker marker = map.addMarker(new MarkerOptions()
                .position(pos)
                .icon(BitmapDescriptorFactory.fromBitmap(markerImage)));
        markers.add(marker);
    }

    initLat = 40.462740;
    initLng = 30.039572;
    for (float i = 0; i < 2; i += 0.2) {
        LatLng pos = new LatLng(initLat + i, initLng + i);
        Marker marker = map.addMarker(new MarkerOptions()
                .position(pos)
                .icon(BitmapDescriptorFactory.fromBitmap(markerImage)));
        markers.add(marker);
    }

}

private void checkMarkers(GoogleMap map) {
    Projection projection = map.getProjection();
    LatLngBounds bounds = map.getProjection().getVisibleRegion().latLngBounds;
    HashMap<Marker, Point> points = new HashMap<Marker, Point>();
    for (Marker marker : markers) {
        if (bounds.contains(marker.getPosition())) {
            points.put(marker, projection.toScreenLocation(marker.getPosition()));
            marker.setVisible(false);
        }
    }
    CheckMarkersTask checkMarkersTask = new CheckMarkersTask();
    checkMarkersTask.execute(points);
}

private class CheckMarkersTask extends AsyncTask<HashMap<Marker, Point>, Void, HashMap<Point, ArrayList<Marker>>> {

    private double findDistance(float x1, float y1, float x2, float y2) {
        return Math.sqrt(((x1 - x2) * (x1 - x2)) + ((y1 - y2) * (y1 - y2)));
    }

    @Override
    protected HashMap<Point, ArrayList<Marker>> doInBackground(HashMap<Marker, Point>... params) {
        HashMap<Point, ArrayList<Marker>> clusters = new HashMap<Point, ArrayList<Marker>>();
        HashMap<Marker, Point> points = params[0];
        boolean wasClustered;
        for (Marker marker : points.keySet()) {
            Point point = points.get(marker);
            wasClustered = false;
            for (Point existingPoint : clusters.keySet()) {
                if (findDistance(point.x, point.y, existingPoint.x, existingPoint.y) < 25) {
                    wasClustered = true;
                    clusters.get(existingPoint).add(marker);
                    break;
                }
            }
            if (!wasClustered) {
                ArrayList<Marker> markersForPoint = new ArrayList<Marker>();
                markersForPoint.add(marker);
                clusters.put(point, markersForPoint);
            }
        }
        return clusters;
    }

    @Override
    protected void onPostExecute(HashMap<Point, ArrayList<Marker>> clusters) {
        for (Point point : clusters.keySet()) {
            ArrayList<Marker> markersForPoint = clusters.get(point);
            Marker mainMarker = markersForPoint.get(0);
            mainMarker.setTitle(Integer.toString(markersForPoint.size()));
            mainMarker.setVisible(true);
        }
    }

}
} 
```

如您所见，所有可见标记都应该有标题，但实际上通常没有。有什么问题吗？

**UPD：**我刚刚发现，如果在每个 CameraChange 上调用 map.clear() 和 readd 标记（而不是替换标题和可见性），一切正常。对我来说看起来很奇怪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:28:12.250

我已经通过清除每个 CameraChange 事件上的地图然后添加所需的标记来解决这个问题。这对我来说可以。

# iphone - 从 sqLite 数据库 ios iphone 应用程序中检索数据

> ID：14704536
> 
> 赞同：0
> 
> 时间：2013-02-05T09:52:41.250
> 
> 标签：iphone, ios, database, sqlite

我正在构建一个数据库，我想从保存在数据库中的对象中检索特定数据。

这是我的代码：

```
//databaseMainViewController.m
//Create and database and save data

@implementation databaseMainViewController

@synthesize customer, code1,code2;

-(void) createTable: (NSString*)tableName
         withField1: (NSString*)field1
         withField2: (NSString*)field2
         withField3: (NSString*)field3
         withField4: (NSString*)field4; {

    char*err;
    NSString*sql = [NSString stringWithFormat:@"CREATE TABLE IF NOT EXISTS '%@' ('%@'"
                                              "TEXT PRIMARY KEY, '%@'TEXT, '%@'TEXT, '%@'TEXT);", tableName, field1, field2, field3, field4];

    if(sqlite3_exec(db, [sql UTF8String], NULL, NULL, &err)!=SQLITE_OK){

        sqlite3_close(db);
        NSAssert(0, @"DCould not create table");

    }

    else {
        NSLog(@"table created");
    }
}

//file path to database
-(NSString*)filePath {
    NSArray*paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[paths objectAtIndex:0]stringByAppendingPathComponent:@"bp.sql"];
}

//open database
-(void)openDB {

    if(sqlite3_open([[self filePath]UTF8String], &db) !=SQLITE_OK) {
        sqlite3_close(db);
        NSAssert(0, @"Databese failed to open");
    }

        else {
            NSLog(@"database opemed");
        }

}

- (IBAction)save:(id)sender {

    NSString*customers = customer.text;
    NSString*codeOne = code1.text;
    NSString*codeTwo = code2.text;
    NSDate*theDate = [NSDate date];

    NSString*sql= [NSString stringWithFormat:@"INSERT INTO summary ('theDate','customer','code1','code2')VALUES ('%@','%@','%@','%@')", theDate, customers,codeOne, codeTwo];

    char*err;

    if(sqlite3_exec(db, [sql UTF8String], NULL, NULL, &err)!=SQLITE_OK){

        sqlite3_close(db);
        NSAssert(0, @"Could not update table");

    }

    else {
        NSLog(@"table updated");
    }

    customer.text = @"";
    code1.text = @"";
    code2.text = @"";

}

- (void)viewDidLoad
{
    [self openDB];
    [self createTable:@"summary" withField1:@"theDate" withField2:@"customer" withField3:@"code1" withField4:@"code2"];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

然后我有代码来检索数据并将它们放在主列表中

```
#import "databaseFlipsideViewController.h"
#import "detailViewController.h"

@interface databaseFlipsideViewController ()

@end

@implementation databaseFlipsideViewController

@synthesize entries;

//file path to database
-(NSString*)filePath {
    NSArray*paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[paths objectAtIndex:0]stringByAppendingPathComponent:@"bp.sql"];
}

//open database
-(void)openDB {

    if(sqlite3_open([[self filePath]UTF8String], &db) !=SQLITE_OK) {
        sqlite3_close(db);
        NSAssert(0, @"Databese failed to open");
    }

    else {
        NSLog(@"database opemed");
    }

}

- (void)viewDidLoad
{
    entries = [[NSMutableArray alloc]init];
    [self openDB];
    NSString*sql = [NSString stringWithFormat:@"SELECT * FROM summary"];
    sqlite3_stmt*statement;

    if (sqlite3_prepare_v2(db, [sql UTF8String], -1, &statement, nil)==SQLITE_OK) {

        while (sqlite3_step(statement)==SQLITE_ROW) {
            char*field1 = (char*)sqlite3_column_text(statement, 0);
            NSString*field1Str = [[NSString alloc]initWithUTF8String:field1];

            char*field2 = (char*)sqlite3_column_text(statement, 1);
            NSString*field2Str = [[NSString alloc]initWithUTF8String:field2];

            char*field3 = (char*)sqlite3_column_text(statement, 2);
            NSString*field3Str = [[NSString alloc]initWithUTF8String:field3];

            char*field4 = (char*)sqlite3_column_text(statement, 3);
            NSString*field4Str = [[NSString alloc]initWithUTF8String:field4];

            NSString*str = [[NSString alloc]initWithFormat:@"%@", field2Str ];
            [entries addObject:str];
        }
    }

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Actions

- (IBAction)done:(id)sender
{
    [self.delegate flipsideViewControllerDidFinish:self];
}

-(NSInteger)numberOfSectionsInTableView:(UITableView*)tableView {

    //Return the number of sections
    return 1;
}

-(NSString*)tableView:(UITableView*)tableView titleForHeaderInSection:(NSInteger)section {
    NSString*myTitle = [[NSString alloc]initWithFormat:@"History"];
    return myTitle;
}

-(NSInteger)tableView:(UITableView*)tableView numberOfRowsInSection:(NSInteger)section{

    return [entries count];
    NSLog(@"%d",[entries count]);

}

-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"test");

    static NSString*cellIdentifier = @"Cell";
    UITableViewCell*cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier forIndexPath:indexPath];

    cell.textLabel.text = [self.entries objectAtIndex:indexPath.row];
    return cell;

} 
```

在此之后我遇到了一个问题，因为当我单击列表中的一个名称时，应用程序会转到另一个视图，其中包含有关该名称的详细信息。但是每个名字的细节都是一样的。

这是 detailViewController 的代码：

```
#import "detailViewController.h"

@interface detailViewController ()

@end

@implementation detailViewController

@synthesize customerLabel,code1Label,code2Label,dateLabel;

//file path to database
-(NSString*)filePath {
    NSArray*paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[paths objectAtIndex:0]stringByAppendingPathComponent:@"bp.sql"];
}

//open database
-(void)openDB {

    if(sqlite3_open([[self filePath]UTF8String], &db) !=SQLITE_OK) {
        sqlite3_close(db);
        NSAssert(0, @"Databese failed to open");
    }

    else {
        NSLog(@"database opemed");
    }

}

- (IBAction)back:(id)sender
{
    [self.delegate detailViewControllerDidFinish:self];
}

- (void)viewDidLoad
{
    [self openDB];
    NSString*sql = [NSString stringWithFormat:@"SELECT * FROM summary"];
    sqlite3_stmt*statement;

    if (sqlite3_prepare_v2(db, [sql UTF8String], -1, &statement, nil)==SQLITE_OK) {

        while (sqlite3_step(statement)==SQLITE_ROW) {

            char*field1 = (char*)sqlite3_column_text(statement, 0);
            NSString*field1Str = [[NSString alloc]initWithUTF8String:field1];

            char*field2 = (char*)sqlite3_column_text(statement, 1);
            NSString*field2Str = [[NSString alloc]initWithUTF8String:field2];

            char*field3 = (char*)sqlite3_column_text(statement, 2);
            NSString*field3Str = [[NSString alloc]initWithUTF8String:field3];

            char*field4 = (char*)sqlite3_column_text(statement, 3);
            NSString*field4Str = [[NSString alloc]initWithUTF8String:field4];

            customerLabel.text = field2Str;
            code1Label.text = field3Str;
            code2Label.text =field4Str;
            dateLabel.text = field1Str;

        }
    }

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

那么在详细信息屏幕中显示所选对象的详细信息的最佳方式是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:32:46.463

这个解决方案对我有用

我已将此代码添加到 databaseFlipsideViewController

```
//databaseFlipsideViewController.m

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"showDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        detailController = segue.destinationViewController;
        detailController.customerName = [keys objectAtIndex:indexPath.row];
        NSLog(@"%@", detailController.customerName);
  }
} 
```

我的 detailViewController 代码是这样的：

```
@implementation detailViewController

@synthesize customerLabel,code1Label,code2Label,dateLabel,customerName,code1Name;

//file path to database
-(NSString*)filePath {
    NSArray*paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[paths objectAtIndex:0]stringByAppendingPathComponent:@"bp.sql"];
}

//open database
-(void)openDB {

    if(sqlite3_open([[self filePath]UTF8String], &db) !=SQLITE_OK) {
        sqlite3_close(db);
        NSAssert(0, @"Databese failed to open");
    }

    else {
        NSLog(@"database opemed");
    }

}

- (IBAction)back:(id)sender
{
    [self.delegate detailViewControllerDidFinish:self];
}

- (void)viewDidLoad
{

    [self openDB];
    NSString*sql = [NSString stringWithFormat:@"SELECT theDate, customer,code1,code2 FROM summary WHERE key=\"%@\"", customerName];
     const char *query_stmt = [sql UTF8String];
    sqlite3_stmt*statement;

    if (sqlite3_prepare_v2(db, query_stmt, -1, &statement, nil)==SQLITE_OK) {

        if (sqlite3_step(statement)==SQLITE_ROW) {

            NSString *date = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 0)];
            dateLabel.text = date;

            NSString *customer = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 1)];
            customerLabel.text = customer;

            NSString *code1 = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 2)];
            code1Label.text = code1;

            NSString *code2 = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement,3)];
            code2Label.text = code2;

        }
        sqlite3_finalize(statement);

            [super viewDidLoad];
        }
    sqlite3_close(db);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:10:06.597

因为`- (void)viewDidLoad`从`detailViewController`您的 select 查询中 in**没有指定 user/summary**，而不是那样，**它选择了 everything**。

在您的 while 循环中，您覆盖数据库中每一行的所有标签属性。所以结果看起来总是一样的，显示数据库的最后一个结果..

答案是实现 tableView 的[didSelectRowAtIndexPath](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3adidSelectRowAtIndexPath%3a)函数，并将用户的 ID 传递给 detailView 控制器，然后使用更具体的查询来获取正确的条目，即：

> @"SELECT * FROM x WHERE id = '%@'", _id;

但我真的认为你需要一个基本的SQL[课程。](https://www.google.com/search?q=sql%20basics)

Protip：考虑使用Core Data，它就是为此而生的。当 Core Data 限制功能或性能时，你真的只需要 iPhone 上的 SQLite。

# ruby-on-rails - 接收适当的 Json 模型 - rails

> ID：14704542
> 
> 赞同：0
> 
> 时间：2013-02-05T09:52:59.143
> 
> 标签：ruby-on-rails, ruby, json

我一直在试图弄清楚当我的 REST API 接收到 JSON 有效负载以执行 UPDATE 操作时，它的外观应该如何。目前，我正在为 json 请求获取每个参数并将其分配给一个新对象，然后将其持久化到数据库中。我知道如果我的项目变得更大，这是不现实的。那么我将如何构造 Json，这样我就可以调用 :Account 来获取整个包而不是每个参数。

```
def update
    respond_with Account.update(params[:id], params[:account])
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:15:34.337

哦，没关系，我最终得到了它。

```
{
    "created_at": "2013-02-04T21:23:06Z",
    "email": "dat_email@gmail.com",
    "updated_at": "2013-02-06T04:06:02Z",
    "username": "Rizowski"
} 
```

我只需要将 Http 请求上的有效负载参数分配给上面的 json 即可。然后我把它从 json 解析为一个可用的哈希。

```
id = params[:id]
user = JSON.parse params[:user]

if User.update(id, user)
    render json: @user
else
    render :status => 400,
        :json => { :message => "Something went wrong with saving user changes."}
    return
end 
```

# c# - ASP.NET DataGrid - 让“选择”工作

> ID：14704543
> 
> 赞同：0
> 
> 时间：2013-02-05T09:53:01.070
> 
> 标签：c#, asp.net

我一直在网上寻找一种让“选择”按钮工作的方法。我有一个可以获取数据的成员表，但我无法选择单个成员并从数据库中获取有关他的更多信息。IE。我希望数据库更改“视图”并向我显示成员详细信息。

我在网上找到的所有在线指南都只讨论“编辑”和“删除”键。

一张显示我在 VS10 中的数据库的图片。 [http://i46.tinypic.com/szznmq.png](http://i46.tinypic.com/szznmq.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:00:15.533

我不确定*让“选择”按钮起作用*是什么意思- 添加 SelectCommand 后，您应该订阅`SelectedIndexChanged`网格命令并在该事件中执行您想要的任何操作。

例如：

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
        var row = GridView1.SelectedRow;
        // Do whatever you want
        row.BackColor = Color.Red;
} 
```

# algorithm - 解决填字游戏的算法

> ID：14704546
> 
> 赞同：3
> 
> 时间：2013-02-05T09:53:09.670
> 
> 标签：algorithm, data-structures

我刚刚解决了这个问题，我想不出比暴力破解更好的方法给定一个二维字符数组和一个有效单词的原始列表。1）从数组中找到所有有效的单词。从数组中的每个元素，您可以向上、向下、向右或向左遍历。例如，

```
g o d b o d y
t a m o p r n 
u i r u s m p 
```

上述二维数组中的有效单词 -> god, goat, godbody, amour,....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:02:41.137

您应该将此列表预处理为前缀树，而不是在前缀树上的二维数组中使用蛮力搜索。

您还可以对数组的已处理路径和单词部分的类似输入使用记忆化

记忆示例：

```
RecursiveMatch(i,j,wordPart)

 if ((i,j,wordPart) in cache) 
   print cache[i,j,wordPart]
   return;
 if a[i,j] on the prefixTreePath){
   cache[i,j,wordPart]+=RecursiveMatch(i+1,j,wordPart[1:])
   cache[i,j,wordPart]+=RecursiveMatch(i-1,j,wordPart[1:])
   cache[i,j,wordPart]+=RecursiveMatch(i,j+1,wordPart[1:])
   cache[i,j,wordPart]+=RecursiveMatch(i,j-1,wordPart[1:])
   print cache[i,j,wordPart]
 } 
```

我没有添加任何结束案例，例如边框，很容易添加。我的目的是给你一个大致的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:20:16.867

确保您有一个按字母顺序排列的有效单词列表。您可以在 n lg n 时间内构建它。

现在你有了这个排序列表，你可以在 lg n 时间内验证一个字符序列是否是一个正确单词的开始。

使用一组有效词来验证字母序列是否是有效词（在恒定时间内）。

现在为每个 startposition 调用 getWords(input, startX, startY, new ArrayList(), "") 并合并结果列表：

```
public List<String> getWords(char[][] input, int x, int y, List<String> result, String current){
    if(isValidWord(current))
         result.add(current);

    if(isValidStartOfWord(current)){
         // call getWords recursively for all valid directions, concatenating the char to current
    }

    return result;
 } 
```

这样，您将在 O(x^2 * y^2 * lg w) 时间内找到答案，其中 char 数组的 x 和 y 维度以及有效单词列表的大小。这并不比最坏的情况好（鉴于 lg w 验证），但这对我来说似乎是不可能的。这样，预期的运行时间会更好。

如果有效单词列表很小，您还可以为正确单词的所有有效开头构建一个集合。在这种情况下，您可以在恒定时间内验证您是否正在寻找正确的单词，最坏的情况会减少到 O(x^2 * y^2)。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:05:39.533

一种算法依赖于称为前缀树或[树](http://en.wikipedia.org/wiki/Trie)的合适数据结构。

第一步是预处理您的有效单词字典并将它们放入 trie 中。这使您可以有效地回答这样的问题：

给定的前缀是有效的前缀吗？

`O(lenght of the prefix)`您可以使用 trie 及时回答这个问题。

然后假设您选择了单词的起始方格。您现在需要在 4 个方向上遍历网格并检查到目前为止获得的前缀是否为有效前缀。如果不是，那么您将不会朝着这个方向进一步前进。另一方面，如果到目前为止的前缀是一个有效的单词，你可以打印它。可以使用 DFS 或 BFS 完成遍历（并不重要）。重要的部分是使用 trie 快速检查有效前缀和有效单词。

# xml - 使用 XSLT 执行合并后的 XML 连接？

> ID：14704551
> 
> 赞同：1
> 
> 时间：2013-02-05T09:53:14.910
> 
> 标签：xml, xslt, merge, concatenation

## 文件1.xml

```
<config>
 <state version="10">
  <root value="100" group="5">
     <leaf number = "2"/>
  </root>
  <action value="2" step="4">
     <get score = "5"/>
  </action>
 </state>
</config> 
```

## 文件2.xml

```
<config>
 <state version="10">
  <root value="100" group="5">
     <leaf number = "6"/>
  </root>
  <parent>
      <child node="yes"/>
  </parent>
 </state>
</config> 
```

## 输出.xml

```
<config>
 <state version="10">
  <root value="100" group="5">
     <leaf number = "2"/>
     <leaf number = "6"/>
  </root>
  <action value="2" step="4">
     <get score = "5"/>
  </action>
  <parent>
      <child node="yes"/>
  </parent>
 </state>
</config> 
```

这是对此处问题的后续问题：[Merge 2 XML files based on attribute values using XSLT?](https://stackoverflow.com/questions/14702554/merge-2-xml-files-based-on-attribute-values-using-xslt)

我在每个 XML 文件中有 2 个不同的标签（file1.xml 中的操作标签和 file2.xml 中的父标签），并且在遍历公共标签 () 后，我需要它们都出现在输出文件中。

请帮助我编写一个 XSLT 以确保这两个标签都反映在输出中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:15:32.730

查看 JLRishie 的好答案，给出了以下复制匹配**根**元素的模板：

```
<xsl:template match="root">
   <xsl:copy>
    <xsl:apply-templates select="@* | node()" />
    <xsl:copy-of
      select="document('file2.xml')
          /config/state[@version = current()/../@version]
                 /root[@value = current()/@value and
                       @group = current()/@group]/*" />

  </xsl:copy>
</xsl:template> 
```

要扩展它以从 file2.xml 获取非**根**元素，您可以添加一个新模板以匹配 file1.xml 中的**状态**元素，然后从 file2.xml 复制非根元素

```
<xsl:template match="state">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()" />
     <xsl:copy-of
      select="document('file2.xml')
            /config/state[@version = current()/@version]/*[not(self::root)]" />
  </xsl:copy>
</xsl:template> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output indent="yes" omit-xml-declaration="yes"/>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="state">
      <xsl:copy>
         <xsl:apply-templates select="@* | node()"/>
         <xsl:copy-of select="document('file2.xml')
              /config/state[@version = current()/@version]
                     /*[not(self::root)]"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="root">
      <xsl:copy>
         <xsl:apply-templates select="@* | node()"/>
         <xsl:copy-of select="document('file2.xml')
              /config/state[@version = current()/../@version]
                     /root[@value = current()/@value and
                           @group = current()/@group]/*"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的两个 XML 文件时，输出如下

```
<config>
   <state version="10">
      <root value="100" group="5">
         <leaf number="2"/>
         <leaf number="6"/>
      </root>
      <action value="2" step="4">
         <get score="5"/>
      </action>
      <parent>
         <child node="yes"/>
      </parent>
   </state>
</config> 
```

# php - x轴移动到highcharts的中间

> ID：14704552
> 
> 赞同：1
> 
> 时间：2013-02-05T09:53:15.723
> 
> 标签：php

我想将 highcharts 升级到最新的 2.3.5 版本。

一切似乎都很好，除非“areaspline”类型高图的绘图点的所有输入都是零值，x 轴阴影线移动到图表的中间而不是显示在底部。在以前的版本中，它显示在底部。

当输入为非零值时，x 轴阴影线显示在底部。

请告诉我避免x轴线偏移的原因和可能的解决方案。

非常感谢您的宝贵帮助。

谢谢，

基兰

# php - 如何创建一个链接，将用户发送到另一个页面，然后将其转移到与该链接关联的另一个页面？

> ID：14704556
> 
> 赞同：2
> 
> 时间：2013-02-05T09:53:28.207
> 
> 标签：php, html

如何创建一个链接，将用户发送到另一个页面，然后将其转移到与该链接关联的另一个页面？

我想创建一个 html URL 列表，当单击其中任何一个时，它会将用户发送到一个中间页面，该页面询问用户是否同意条款和条件。如果他们这样做，他们将被转移到与他们单击的那个链接相对应的那个页面。与此图类似。 ![在此处输入图像描述](../Images/f3d1d5c2204f2b2eaf53975d0131770d.png)

```
Link 1 ==> Intermediary Page ==> Page 1,
Link 2 ==> Intermediary Page ==> Page 2,
Link 3 ==> Intermediary Page ==> Page 3,
Link 4 ==> Intermediary Page ==> Page 4,
Link 5 ==> Intermediary Page ==> Page 5 
```

我不知道它叫什么进程。我打算使用 HTML 和 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:03:00.527

第一个 HTML 页面

```
<a href="intermediary.php?q=1">Link 1</a>
<a href="intermediary.php?q=2">Link 2</a>
<a href="intermediary.php?q=3">Link 3</a>
<a href="intermediary.php?q=4">Link 4</a>
<a href="intermediary.php?q=5">Link 5</a> 
```

中介.php

```
<?php
$link = (int)$_GET["q"];
?>
<a href="page<?=$link?>.html">I agree to the terms and conditions</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:04:22.393

HTML

```
<a href="inter.php?target=1">Some page</a>
<a href="inter.php?target=2">Some page</a>
<a href="inter.php?target=something_else">Some page</a> 
```

PHP：inter.php

```
<?php
session_start();
$link='#';
switch($_GET['target']) {
 case 1:
       $link = "http://nexttarget.com";
       break;
 case 2:
       $link = "http://nexttarget2.com";
       break;
 case "something_else":
       $link = "http://nexttarget3.com";
       break;
}
$_SESSION['prev_link'] = "http://source_url";
?>

<form action="<?php echo $link; ?>" method="post">
<p>Your T&C here</p>
<input type="checkbox" name="agree" value="agreed" />
<input type="submit" value="go" />
</form> 
```

PHP：目标.php

```
<?php
session_start();
if( !isset($_POST['agreed']) || $_POST['agreed'] != 'agreed' ){
 header("Location: ".$_SESSION['prev_link']);
 exit;
}
?>
Your target page content here 
```

编辑：编辑显示 T&C 页面而不是直接重定向。

**编辑 2**：*现在中间页面将在同意/单击复选框后自动重定向。*

PHP：inter.php

```
<?php
session_start();

$link='#';
switch($_GET['target']) {
  case 1:
    $link = "http://nexttarget.com";
    break;

  case 2:
    $link = "http://nexttarget2.com";
    break;

  case "something_else":
    $link = "http://nexttarget3.com";
    break;
}
$_SESSION['prev_link'] = "http://source_url";
?>

<form action="<?php echo $link; ?>" method="post" id="tc_form" >
  <p>Your T&amp;C here</p>
  <input type="checkbox" name="agree" value="agreed" onclick="javascript: this.parentNode.submit();" id="check" />
  <label for="check">I agree to the T&amp;C.</label>
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T10:01:13.427

您可以在 URL 中使用 GET 变量。例如[http://www.mysite.com/intermediary-page?page=page1](http://www.mysite.com/intermediary-page?page=page1)

所以这将链接到中介页面。然后在该页面上，您将有一个查看 url 最后一部分的`page=page1.`函数然后该函数会将用户重定向到正确的页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:59:26.467

一个使用很多的方法是这样的：

```
intermediary-page.php?proceedTo=some/url/to-go-next.php 
```

在 intermediary-page.html（或 php 或其他）页面上，您执行必要的验证并将用户重定向到`proceedTo`GET 变量中可用的 url。

之后，这取决于您的要求。您想要安全还是确保用户已接受条款和条件或其他什么？然后你应该像这样在每个页面上执行额外的验证：

> 链接 1 -> 第 1 页（检查用户是否已经接受了条款？否？那么：） -> intermediary?proceedTo=page1 ->（要求用户接受！接受？然后：） -> 第 1 页（用户有现在接受条款了吗？是吗？然后:) -> 留在这里...

这种方法的优点是：

1.  您很确定即使用户绕过了中间页面并直接前往最终目的地 - (s)他也会被扔回中间页面（就像您正在验证用户一样）。
2.  您不需要创建类似 的链接`href="intermediary.php?next=abc.php"`，而只需使用`href="abc.php"`将自行处理重定向的简单链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T10:00:04.520

第一页：

```
<a href="intermediary.php?next_page=somepage.php">link to Intermediary Page</a> 
```

中介页面：

```
<?php

$next_page = $_REQUEST["next_page"];
header("Location: " . $next_page);

?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T10:08:30.493

您的 HTML 链接：

```
<a href="/links.php?page=1">Link 1</a>
<a href="/links.php?page=2">Link 1</a> 
```

你的 PHP 代码在`links.php`：

```
<?php

$page = !empty($_REQUEST['page']) ? $_REQUEST['page'] : null;

if (!empty($page)) {

    switch ($page) {

        case 1:
            header('Location: abc.php');
            break;

        case 2:
            header('Location: xyz.php');
            break;
    }
} 
```

其他选项是：

```
$pages[1] = 'abc.php';
$pages[2] = 'xyz.php';

header('Location: ' . $pages[$page]); 
```

`$page`注意：在使用之前尝试保护变量。

# java - 使用 Jenkins JBoss 插件

> ID：14704558
> 
> 赞同：1
> 
> 时间：2013-02-05T09:53:36.583
> 
> 标签：java, jboss, jenkins

我真的找不到如何使用**Jenkins 的 jboss 插件**。我经历了一些显而易见的事情，但例如我不知道如何使用该组件，添加什么属性等。

我想部署一个 EAR 和多个 WAR，即使启动 JBoss 也有问题。我意识到 JBoss 7 不会运行，它只是支持早期版本。我明白了，我遇到了 15 秒的超时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:09:10.710

我只能用 ANT 解决方法。我希望它对下一个认为 Jenkins 的 jboss 插件有效的人有所帮助......它肯定不适用于 v7.1.1。

所以解决方法：

检查 JBoss 是否响应

```
 <condition property="jboss.online">
    <socket server="localhost" port="8080"/>
  </condition> 
```

如果是，停止 JBoss 并删除所有部署

```
<target name="stop" depends="-check-status" if="${start.successful}">
    <java jar="${jboss.home}/jboss-modules.jar" fork="true">
        <arg line="-mp ${jboss.home}/modules org.jboss.as.cli -c command=:shutdown" />
    </java>

    <sleep seconds="10" />
    <delete quiet="false" includeEmptyDirs="true">
        <fileset dir="${jboss.home}/standalone/deployments/">
            <include name="**/*" />
        </fileset>
    </delete>
</target> 
```

将所有耳朵和战争复制到部署中

```
 <copy file="${publish.dir}/main.ear" overwrite="true" todir="${jboss.home}/standalone/deployments" />
        <copy file="${publish.dir}/first.war" overwrite="true" todir="${jboss.home}/standalone/deployments" />
        <copy file="${publish.dir}/second.war" overwrite="true" todir="${jboss.home}/standalone/deployments" /> 
```

启动 JBoss

```
<exec executable="${jboss.home}/bin/standalone.bat" spawn="true"> 
```

等待部署并开始单元测试

```
<!-- startup, deploy -->
<target name="deploy-war" description="deploy war file" depends="-start">
    <condition property="jboss.online">
        <socket server="localhost" port="8080"/>
    </condition>

    <echo message="${jboss.online}"> ONLINE STATUS</echo>
  <sequential>
    <echo>WAITING FOR DEPLOYMENT...</echo>
    <waitfor>
        <or>
            <available file="${jboss.home}/standalone/deployments/main.ear.deployed" />
            <available file="${jboss.home}/standalone/deployments/main.ear.failed" />
        </or>
    </waitfor>
    <condition property="deployed">
        <available file="${jboss.home}/standalone/deployments/main.ear.deployed" />
    </condition>

    <antcall target="deploy.failed"/>
    <antcall target="deploy.success"/>

    <echo>+----------------------------+</echo>
    <echo>|   W A R  D E P L O Y E D   |</echo>
    <echo>+----------------------------+</echo>

  </sequential>
</target>

<!-- Deploy success, run unit tests -->
 <target name="deploy.success" if="deployed">
   <echo>DEPLOY SUCCESS</echo>
    <sleep seconds="10" />
    <antcall target="unit-test.-multi-only-unit-test-noreport"></antcall>
 </target>

<!-- Deploy failed, fail -->
 <target name="deploy.failed" unless="deployed">
   <echo>DEPLOY FAILED</echo>
    <fail/>
 </target> 
```

如果有任何失败调用 ant 错误，Jenkins 将发送有关错误的邮件。

当我重构我的代码时，我将发布最终版本

# mysql - 如何在 mysql 数据库（表）中插入图像？

> ID：14704559
> 
> 赞同：21
> 
> 时间：2013-02-05T09:53:37.217
> 
> 标签：mysql, database, blob, mysql-loadfile

我想将图像插入到表格中

```
 CREATE TABLE XX_SAMPLE(ID INT
                       ,IMAGE BLOB); 
```

那么你能帮助形成如何将图像插入上表。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-05T10:01:52.473

请尝试以下代码

```
INSERT INTO xx_BLOB(ID,IMAGE) VALUES(1,LOAD_FILE('E:/Images/jack.jpg')); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-05T09:57:31.297

您应该像这样使用[LOAD_FILE](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_load-file)：

```
LOAD_FILE('/some/path/image.png') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-03-06T10:32:24.310

第 1 步：打开您的 mysql 工作台应用程序选择表。选择图像单元格右键单击选择“在编辑器中打开值” [![在此处输入图像描述](../Images/4c18206407492b1ab933d11803f7cb43.png)](https://i.stack.imgur.com/sUrTF.jpg)

第二步：点击加载按钮，选择图片文件 [![在此处输入图像描述](../Images/5eca9746644f7c2ade7cbc44f4737087.png)](https://i.stack.imgur.com/9erBU.jpg)

第三步：然后点击应用按钮[![在此处输入图像描述](../Images/45c9faa7eb06774be0d06330fbd5748a.png)](https://i.stack.imgur.com/nlkww.jpg)

第4步：然后应用查询保存图像。不要忘记图像数据类型是“BLOB”。第5步：您可以查看上传的图片 [![在此处输入图像描述](../Images/4326bee053a9deb5fdb2a9288978ca72.png)](https://i.stack.imgur.com/fmwao.jpg)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-19T08:46:12.237

你可以试试这样的..

```
CREATE TABLE 'sample'.'picture' ( 
'idpicture' INTEGER UNSIGNED NOT NULL AUTO_INCREMENT, 
'caption' VARCHAR(45) NOT NULL, 
'img' LONGBLOB NOT NULL, 
 PRIMARY KEY('idpicture')) TYPE = InnoDB; 
```

**或参考以下链接获取可能对您有所帮助的教程和示例。**

[http://forums.mysql.com/read.php?20,17671,27914](http://forums.mysql.com/read.php?20,17671,27914)

[http://mrarrowhead.com/index.php?page=store_images_mysql_php.php](http://mrarrowhead.com/index.php?page=store_images_mysql_php.php)

[http://www.hockinson.com/programmer-web-designer-denver-co-usa.php?s=47](http://www.hockinson.com/programmer-web-designer-denver-co-usa.php?s=47)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-13T07:10:11.860

如果我使用以下查询，

```
INSERT INTO xx_BLOB(ID,IMAGE) 
VALUES(1,LOAD_FILE('E:/Images/xxx.png')); 
```

错误：没有这样的功能：LOAD_FILE

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-29T17:48:59.977

对于这个问题，我有三个答案：

1.  在字符串中使用 BLOB 和 CLOB 数据类型并从 SQL 数据库中检索二进制数据是违反**用户体验**UX 最佳实践的，因此建议您使用涉及存储图像 URL（或数据库中的任何二进制文件）的技术）。此 URL 将帮助用户应用程序检索和使用此二进制文件。

2.  其次，BLOB 和 CLOB 数据类型仅适用于许多 SQL 版本，因此诸如 LOAD_FILE 之类的函数或数据类型本身在某些版本中可能会丢失。

3.  第三不要使用 BLOB 或 CLOB。存储网址；让用户应用程序从项目目录中的文件夹访问二进制文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-01T02:09:16.913

我尝试了上述所有解决方案并失败了，它只是向数据库添加了一个空文件。

但是，我能够通过`fileName.jpg`首先将图像（）文件移动到下面的文件夹（在我的情况下）来完成它`C:\ProgramData\MySQL\MySQL Server 5.7\Uploads`，然后我执行下面的命令，它对我有用，

```
INSERT INTO xx_BLOB(ID,IMAGE) VALUES(1,LOAD_FILE('C:/ProgramData/MySQL/MySQL Server 5.7/Uploads/fileName.jpg')); 
```

希望这可以帮助。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-01-07T08:54:17.347

这是在 mysql 工作台上——给出图像文件路径：

```
INSERT INTO XX_SAMPLE(id,image) VALUES(3,'/home/ganesan-pc/Documents/aios_database/confe.jpg'); 
```

# c# - 无法从 Web 应用程序访问文件夹，并且在重新启动机器后能够访问它。

> ID：14704566
> 
> 赞同：1
> 
> 时间：2013-02-05T09:54:07.937
> 
> 标签：c#

我有一个网络应用程序。我们可以通过两种方式将文件上传到某个位置。

1.  我们有一个 Fileupload 控件，用户可以从该控件将文件上传到一个位置（例如：\testmachine\share），该位置与所有人共享。

2.  我们还有一项自动化工作，它会自动执行此操作。因此，当我们将文件放在特定的文件位置（例如：\testmachine2\share2）或 FTP 时，作业会将这个文件下载到共享位置（例如：\testmachine\share）。

但有时，用户无法使用第一种情况上传文件。整个问题发生在我没有任何访问权限的生产服务器上。在处理这个问题时，我得到了踪迹。下面是踪迹。

```
Access to the path **\\testmachine\share\test.zip** is denied.,mscorlib, at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy)
at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)
at System.IO.FileStream..ctor(String path, FileMode mode)
at System.Web.HttpPostedFile.SaveAs(String filename)
at System.Web.UI.WebControls.FileUpload.SaveAs(String filename) 
```

现在我试图在我的本地机器上重现相同的行为并且能够重现这种情况。

这是代码：

```
public static IList<DownloadInfo> Download(XmlDataDocument xDoc)
    {
      List<DownloadInfo> downloadedList = new List<DownloadInfo>();

      WebClient request = new WebClient();

      string user = xDoc.SelectSingleNode("configurationSettings/fileSourceServer").Attributes.GetNamedItem("user").Value;
      string password = xDoc.SelectSingleNode("configurationSettings/fileSourceServer").Attributes.GetNamedItem("password").Value;
      //domain is not used Curretly. This might be useful when UNC is implemented in authenticated mode.
      string domain = xDoc.SelectSingleNode("configurationSettings/fileSourceServer").Attributes.GetNamedItem("domain").Value;

      request.Credentials = new NetworkCredential(user, password);

      FileStream file = null;
      try
      {
        string serverType = xDoc.SelectSingleNode("configurationSettings/fileSourceServer").Attributes.GetNamedItem("type").Value;
        string serverPath = xDoc.SelectSingleNode("configurationSettings/fileSourceServer").Attributes.GetNamedItem("path").Value;
        if (serverType.Equals("ftp"))
        {
          if (!serverPath.ToLower().StartsWith("ftp://"))
          {
            serverPath = "ftp://" + serverPath.Trim();
          }
          else
          {
            serverPath = serverPath.Trim();
          }
          FtpWebRequest fwr = (FtpWebRequest)FtpWebRequest.Create(new Uri(serverPath));
          fwr.Credentials = request.Credentials;
          fwr.Method = WebRequestMethods.Ftp.ListDirectory;
          StreamReader sr = new StreamReader(fwr.GetResponse().GetResponseStream());
          string str = sr.ReadLine();
          while (str != null)
          {
            if (str.ToUpper().EndsWith(".ZIP"))
            {
              DownloadInfo dwnInfo = new DownloadInfo();
              dwnInfo.SourceServerZipFilePath = str;
              downloadedList.Add(dwnInfo);
            }
            str = sr.ReadLine();
          }
          // construct the server path, if file location is provided instead directory location.
          if (downloadedList.Count == 1)
          {
            if (serverPath.EndsWith(downloadedList[0].SourceServerZipFilePath))
            {
              string[] delimiter = { downloadedList[0].SourceServerZipFilePath };
              serverPath = serverPath.Split(delimiter, StringSplitOptions.RemoveEmptyEntries)[0];
            }
          }
          sr.Close();
          sr = null;
          fwr = null;

        }

        else if (serverType.Equals("file"))
        {
          //TODO in authenticated mode.
          if (!serverPath.ToLower().StartsWith(@"\\"))
          {
            serverPath = Path.GetFullPath(@"\\" + serverPath.Trim());
          }
          else
          {
            serverPath = Path.GetFullPath(serverPath.Trim());
          }

          DirectoryInfo dInfo = new DirectoryInfo(serverPath);
          FileInfo fInfo = new FileInfo(serverPath);
          if (dInfo.Exists)
          {
            FileInfo[] filelist = dInfo.GetFiles("*.zip");
            foreach (FileInfo f in filelist)
            {
              DownloadInfo dwnInfo = new DownloadInfo();
              dwnInfo.SourceServerZipFilePath = f.Name;
              downloadedList.Add(dwnInfo);
            }

          }
          else if (fInfo.Exists && fInfo.Extension.ToUpper() == ".ZIP")
          {
            DownloadInfo dwnInfo = new DownloadInfo();
            dwnInfo.SourceServerZipFilePath = fInfo.Name;
            downloadedList.Add(dwnInfo);
            serverPath = fInfo.DirectoryName;
          }
          else if (!dInfo.Exists || !fInfo.Exists)
            Logger.Error(String.Format("{0} is not accessible. Make sure the folder exists and the machine account where the system agent is installed has access to the folder.", serverPath));
        }

        if (downloadedList.Count == 0)
          Logger.Warn(string.Format("{0} does not have a ZIP file. Make sure the folder contains the ZIP file for each dataset.", serverPath));

        //Copy files to destination location (upload folder)
        foreach (DownloadInfo dwnInfo in downloadedList)
        {
          string strFile = dwnInfo.SourceServerZipFilePath;
          DateTime time = new DateTime();
          time = DateTime.Now;
          string date = time.ToString("yyyyMMdd-HHmmss_");

          Uri UriPath = new Uri(serverPath + "/" + strFile);
          byte[] filedata = request.DownloadData(UriPath);
          // create the destination path.
          string destPath = xDoc.SelectSingleNode("configurationSettings/fileDestinationServer").Attributes.GetNamedItem("path").Value;
          destPath = Path.Combine(destPath.Trim(), date + strFile);

          file = File.Create(destPath);
          file.Write(filedata, 0, filedata.Length);
          file.Close();
          file = null;
          //changing source server path to full path. Earlier only file name was assigned.
          dwnInfo.SourceServerZipFilePath = UriPath.OriginalString;
          dwnInfo.DestinationServerZipFilePath = destPath;
          //System.Console.WriteLine(strFile + " - Download Complete.");
        }

        //Extract all the downloded zip files at destination location.
        extractFile(downloadedList);
      }
      catch (Exception ex)
      {
        Logger.Error(String.Format("Exception occured: {0}", ex.Message), ex);
      }
      finally
      {
        if (file != null)
          file.Close();
      }

      return downloadedList;
    }

    private static void extractFile(IList<DownloadInfo> fileList)
    {
      ZipUtils zip = new ZipUtils();

      foreach (DownloadInfo dwnInfo in fileList)
      {
        try
        {
          FileInfo fInfo = new FileInfo(dwnInfo.DestinationServerZipFilePath);
          zip.extract(fInfo.FullName, fInfo.FullName.Replace(fInfo.Extension, ""));
          dwnInfo.DestinationServerUnzipFilePath = fInfo.FullName.Replace(fInfo.Extension, "");
        }
        catch (Exception ex)
        {
          Logger.Error(String.Format("Exception occured during extracting {0}", dwnInfo.SourceServerZipFilePath), ex);
        }
      }
    } 
```

但是当我重新启动共享文件夹所在的机器时，我不再遇到问题了。

任何人都可以帮我解决这个问题，而且重现这个问题也很好。

谢谢，

维奈。

# c# - 在表单构造函数中初始化的对象为空

> ID：14704570
> 
> 赞同：1
> 
> 时间：2013-02-05T09:54:28.750
> 
> 标签：c#, winforms, class, constructor, null

我的表单初始化中的对象 ChartSettings 有问题。

这是我自己的类添加下面的`Form1`代码：

```
public partial class Form1 : Form
{

    public Form1(bool archivePlotPreview)
    {
        InitializeComponent();
        ChartSettings chartOne = new ChartSettings(this.chart1, archivePlotPreview);
    }

    public ChartSettings chartOne;

    //Form1 variables and functions
}

public class ChartSettings
{

    public ChartSettings(Chart settingsRelatedChart, bool archivePlotPreview)
    {
        // przypisanie wykresu do ktorego odnosza sie ustawienia
        ChartObject = settingsRelatedChart;
        ChartObject.MouseMove += new System.Windows.Forms.MouseEventHandler(this.chart1_MouseMove);

        barchivePlotPreview = archivePlotPreview;

    }

    // other variables and functions
} 
```

创建此类的原因是需要与图表对象（在设计器窗口中添加的图表 1）相关的其他变量，例如 CSV 保存选项、最小/最大标记选项等。所以在 Form1 的构造函数中，我添加了创建我的 ChartSettings 对象的行可以在上面看到。它将 chart1 分配给它，在进一步的代码中我想使用**chartOne.ChartObject**而不是**this.chart1**。

当我创建新的 Form1 实例时，会显示一个窗口，chart1 是可见的，等等。但是当我按下使用**chartOne.ChartObject**引用的“加载数据”按钮时，它会崩溃，因为 chartOne 为空：/ 对 this.chart1 的直接操作似乎是行。当我调试我的代码时，chartOne 是在构造函数中创建的，并且不是 null，但是当我按下提到的按钮时，它的行为就像上面一样。为什么我的 chartOne 在两者之间消失？应该如何以正确的方式完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T09:56:48.187

您没有初始化属性`ChartSettings chartOne`，而是在构造函数中创建了一个实例，并且在构造函数完成时将其释放。这意味着您从未初始化类级别属性 chartOne；因此它将始终为空。

当您使用 this.chartOne 时，您声明要使用该类中定义的属性。

将其更改为；

```
public ChartSettings chartOne{ get; set;}

public Form1(bool archivePlotPreview)
{
    InitializeComponent();
    chartOne = new ChartSettings(this.chart1, archivePlotPreview);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T09:58:49.463

您在构造函数中创建的 ChartSettings chartOne 与您在类中声明的全局对象不同。构造函数中的 ChartSettings chartOne 仅在该范围内可用，因此该类的 ChartSettings chartOne 保持为空。

# c++ - 使用 MinGW 在 C++ 中生成异常堆栈跟踪

> ID：14704576
> 
> 赞同：5
> 
> 时间：2013-02-05T09:55:02.310
> 
> 标签：c++, exception-handling, mingw, stack-trace

“[当我的 gcc C++ 应用程序崩溃时](https://stackoverflow.com/questions/77005/how-to-generate-a-stacktrace-when-my-gcc-c-app-crashes)如何生成堆栈跟踪”一文解释了当应用程序崩溃时如何生成堆栈跟踪。但是 gcc 版本在 windows MinGW 上不起作用。事实上，由于缺少头文件 execinfo.h，它甚至无法编译。

Windows XP 及更高版本上的 MinGW 是否已经有可用的东西？

**编辑**

Stackwalking 可以通过下面提到的步骤进行。但是当我尝试在异常发生后在 catch 块中遍历堆栈时，我没有得到想要的结果。我只能得到抛出异常的函数的名称，然后它显示列表-->主-->等等

**脚步 ：**

1.  [为使用 MinGW/MSYS 的 Win32 API stack walk](https://stackoverflow.com/questions/3318564/win32-api-stack-walk-with-mingw-msys)提供的第一个答案？由 José Luis Cebrián 提供的链接可以找到 Mr.Edd 的堆栈跟踪库[http://www.mr-edd.co.uk/code/stack_trace](http://www.mr-edd.co.uk/code/stack_trace)

2.  上述链接中可用的 stackwalker 依赖于 dbghelp.dll。由于 MinGW 没有为此提供导入库，因此它是使用 mingw 的 dlltool 生成的。其命令是

    dlltool -k -d dbghelp.def -l dbghelp.a

    Note1: .def 文件是在 Wine 项目中找到的

    注意 2：库生成不适用于所有版本的 MinGW。我在使用 4.4.1 版生成它时遇到了问题，但它在 4.6.1 版中运行良好

3.  库 -lbfd、-lintl 和 -liberty 也与 -ldbghelp 一起用于链接

4.  从链接 [http://www.programmingunlimited.net/siteexec/content.cgi?page=mingw-seh使用结构化异常处理](http://www.programmingunlimited.net/siteexec/content.cgi?page=mingw-seh)

**代码视图**

1.  “尝试”实现如下。这部分注册异常处理程序

    ```
    { 
    __SEH_EXCEPTION_REGISTRATION _lseh_er;
    __SEH_HANDLER _lseh_handler;
    _lseh_er.handler =
    reinterpret_cast<PEXCEPTION_HANDLER>(__SEH_HANDLER::ExceptionRouter);
    _lseh_er.exthandler = &_lseh_handler;
    asm volatile ("movl %%fs:0, %0" : "=r" (_lseh_er.prev));
    asm volatile ("movl %0, %%fs:0" : : "r" (&_lseh_er));
    int _lseh_setjmp_res = setjmp(_lseh_handler.context);
    while(true) {
     if(_lseh_setjmp_res != 0) {
       break;
     } 
    ```

2.  ExceptionRounter 函数调用另一个函数 ExceptionHandler，其中复制了上下文和记录。实现如下。

    ```
    EXCEPTION_DISPOSITION __SEH_HANDLER::ExceptionHandler(PEXCEPTION_RECORD pRecord, 
    __SEH_EXCEPTION_REGISTRATION* pReg,
    PCONTEXT pContext,
    PEXCEPTION_RECORD pRecord2)
    {

    CopyMemory(&excContext, pContext, sizeof(_CONTEXT));
    CopyMemory(&excRecord, pRecord, sizeof(_EXCEPTION_RECORD));

    // Jump back to the function where the exception actually occurred.  The 1 is the
    // return code that will be returned by set_jmp.
    longjmp(context, 1);
    } 
    ```

3.  在此之后是我的引发异常的代码

4.  随后执行“catch”或 seh_excep。

    ```
    break;
    }
    PEXCEPTION_RECORD rec = &_lseh_handler.excRecord;
    PCONTEXT ctx = &_lseh_handler.excContext;

    asm volatile ("movl %0, %%fs:0" : : "r" (_lseh_er.prev));
    if(_lseh_setjmp_res != 0) 
    ```

5.  然后是从 Mr.Edd 的 stackwalker 中遍历堆栈的代码。

    ```
    lock lk(g_fill_frames_mtx);

    symbol_context sc;
    bfd_context bfdc;

    STACKFRAME frame = empty_pod;
    CONTEXT context = empty_pod;
    context.ContextFlags = CONTEXT_FULL;

    /*Below part is commented as the context of the exception causing code has to be  used and not the current context*/
    /*
    windows_dll kernel32("kernel32.dll");
    void (WINAPI *RtlCaptureContext_)(CONTEXT*) =  kernel32.function("RtlCaptureContext");
    RtlCaptureContext_(&context);
    */

    context = _lseh_handler.excContex;

    frame.AddrPC.Offset = context.Eip;
    frame.AddrPC.Mode = AddrModeFlat;
    frame.AddrStack.Offset = context.Esp;
    frame.AddrStack.Mode = AddrModeFlat;
    frame.AddrFrame.Offset = context.Ebp;
    frame.AddrFrame.Mode = AddrModeFlat;

    HANDLE process = GetCurrentProcess();
    HANDLE thread = GetCurrentThread();

    bool skip = true;
    bool has_limit = limit != 0;
    char symbol_buffer[sizeof(IMAGEHLP_SYMBOL) + 255];
    char module_name_raw[MAX_PATH];

    const DWORD machine = IMAGE_FILE_MACHINE_I386;

    while(StackWalk(machine, process, thread, &frame, &context, 0, SymFunctionTableAccess, SymGetModuleBase, 0))
    {
        if (skip)
        {
            skip = false;
            continue;
        }

        if (has_limit && limit-- == 0) break;

        IMAGEHLP_SYMBOL *symbol = reinterpret_cast<IMAGEHLP_SYMBOL *>(symbol_buffer);
        symbol->SizeOfStruct = (sizeof *symbol) + 255;
        symbol->MaxNameLength = 254;
        DWORD module_base = SymGetModuleBase(process, frame.AddrPC.Offset);
        std::string module_name = unknown_module;
        if (module_base && GetModuleFileNameA(reinterpret_cast<HINSTANCE>(module_base), module_name_raw, MAX_PATH))
            module_name = module_name_raw;
            std::string func = bfdc.get_function_name(frame.AddrPC.Offset);

            if (func.empty())
            {
                DWORD dummy = 0;
                BOOL got_symbol = SymGetSymFromAddr(process, frame.AddrPC.Offset, &dummy, symbol);
                func = got_symbol ? symbol->Name : unknown_function;
            }

        dbg::stack_frame f(reinterpret_cast<const void *>(frame.AddrPC.Offset), func, module_name);
        frames.push_back(f);
        }
      }
    }
    std::copy(frames.begin(), frames.end(), std::ostream_iterator<dbg::stack_frame>(std::cout, "\n")); 
    ```

问候， Shreyas

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:15:59.020

[链接http://www.programmingunlimited.net/siteexec/content.cgi?page=libseh](http://www.programmingunlimited.net/siteexec/content.cgi?page=libseh)中提供的 LibSEH解决了该问题。

从我得到的回复中，我可以得出结论，在我的实现中，异常处理代码是在与引发异常的代码相同的上下文中调用的。这会导致覆盖堆栈中现在不相关的部分。

但是，异常处理过滤器函数在不同的上下文中执行，通过将堆栈跟踪器放入过滤器函数中，可以获得所需的结果。

因此，我使用了 libseh，它提供了类似于 MSVC 中的异常处理功能，并在过滤器函数中编写了堆栈跟踪器。

# mysql - cron 作业任务的日期时间问题

> ID：14704577
> 
> 赞同：0
> 
> 时间：2013-02-05T09:55:05.933
> 
> 标签：mysql, sql, database, datetime

我正在开发一个汽车列表网站，我被困在如何正确设置日期背后的一些逻辑上。

我为数据库 [http://www.sqlfiddle.com/#!2/e111e/3创建了一个 sql fiddle](http://www.sqlfiddle.com/#!2/e111e/3)

我想每天上午 12 点运行一个 cron，并且我想通过电子邮件向其列表将在一天内过期（忽略已经过期的列表）的用户发送电子邮件，但他们之间必须有 24 小时的差异，因为我想告诉他们最低限度提前 24 小时，那里的列表将过期。此外，它应该只选择那些将在一天后到期且不超过 1 天的列表。

这是我到目前为止尝试过的

```
SELECT DATE_FORMAT(expiry_date, '%b %d %Y %T') AS expiry_date, DATEDIFF(expiry_date, NOW()) AS days_left FROM `test` WHERE DATEDIFF(expiry_date, NOW()) = 1 
```

但它也在选择哪些将在 24 小时内到期。

请帮帮我。

编辑 ///////////////////////////////////////////////// //////////////

我已经想通了。告诉我它是否正确。

```
 SELECT DATE_FORMAT(expiry_date, '%b %d %Y %T') AS expiry_date, DATEDIFF(expiry_date, NOW()) AS days_left, HOUR(TIMEDIFF(expiry_date, NOW())) as hours FROM `test` 
```

WHERE DATEDIFF(expiry_date, NOW()) = 1 AND HOUR(TIMEDIFF(expiry_date, NOW())) > 24

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:05:29.627

MySQL`datediff`只考虑实际天数，而不是小时数。尝试使用`TO_SECONDS`并将差异视为秒。

更新：这是与小提琴一起使用的代码：

```
SELECT DATE_FORMAT(expiry_date, '%b %d %Y %T') AS expDate,
  to_seconds(expiry_date) - to_seconds(NOW()) AS seconds_left
FROM `test`
WHERE
  to_seconds(expiry_date)- to_seconds(now()) <= 86400
  -- AND ... (only include non-expired entries) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:10:53.643

建议您[创建一个事件调度程序](http://dev.mysql.com/doc/refman/5.1/en/create-event.html)：

```
CREATE EVENT EXIPRIYALERT 
ON SCHEDULE EVERY DAY AT '00:00:00' STARTING FROM  '2013-02-04'
DO 
  --- 
```

对于您的查询，请尝试以下操作：[TIMESTAMPDIFF](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_timestampdiff)：

`TIMESTAMPDIFF(second,Now(),expiry_date)`

```
SELECT DATE_FORMAT(expiry_date, '%b %d %Y %T') AS expiry_date, 
DATEDIFF(expiry_date, NOW()) AS days_left 
FROM `test` 
WHERE TIMESTAMPDIFF(second,Now(),expiry_date) = 86400
; 
```

# jmeter - JMeter CPU 利用率报告

> ID：14704580
> 
> 赞同：0
> 
> 时间：2013-02-05T09:55:18.593
> 
> 标签：jmeter, jmeter-plugins

我们可以在有 1000 个用户的 Jmeter 上执行负载测试时获得 CPU 利用率吗？
JMeter 中是否有可用于 CPU 利用率、内存计算的插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:00:04.097

jmeter 的 perfmon 插件是：[http ://code.google.com/p/jmeter-plugins/wiki/PerfMon](http://code.google.com/p/jmeter-plugins/wiki/PerfMon)

# php - 从 php 数组生成菜单

> ID：14704590
> 
> 赞同：1
> 
> 时间：2013-02-05T09:55:31.180
> 
> 标签：php, html, menu

我正在从 php 数组生成菜单

```
$MENU["HOME"] = array( 'enabled'=>true, 'text'=>'Home' ,'link'=> 'public/home' );
$MENU["SHOP"] = array( 'enabled'=>true, 'text'=>'Shop' ,'link'=> 'public/shop' ); 
```

生成菜单的代码是

```
function show_menu(){

  $menu_string = '<ul>';

 foreach( $MENU as $item )
 {

    if( $item['enabled'] )
    {

       $menu_string .= '<li>'.$item['text'].'</li>';

    }

 }

echo $menu_string.'</ul>';
} 
```

但现在我有很多级别的菜单如下，所以我将配置更改为

```
$MENU["HOME"] = array
(
'parent'=>true, // parent == true ? show in top level menu : do not show in top level
'enabled'=>true,
'text'=>'Home',
'link'=> 'public/home',
'sub_modules' => array()   // empty sub modules means no sub menus need to display
);

 $MENU["SHOP"] = array
( 
'parent'=>true,
'enabled'=>true,
'text'=>'Shop',
'link'=> 'public/shop',
'sub_modules' => array('SALES') // SALES is a sub menu of SHOP,which is also configured as another module
);

$MENU["SALES"] = array
( 
'parent'=>FALSE, // PARENT = FALSE (this is a sub menu of SHOP)
'enabled'=>true,
'text'=>'Sales',
'link'=> 'public/shop/sales',
'sub_modules' => array('SALES_RETURN','SALES_REPORT') //have 2 sub menu's
);

$MENU["SALES_RETURN"] = array
( 
'parent'=>FALSE, 
'enabled'=>true,
'text'=>'Sales Return',
'link'=> 'public/shop/sales/return',
'sub_modules' => array() 
);

 $MENU["SALES_REPORT] = array
( 
'parent'=>FALSE, 
'enabled'=>true,
'text'=>'Sales Report',
'link'=> 'public/shop/sales/report',
'sub_modules' => array() 
); 
```

现在我不能使用相同的功能，因为菜单越来越深，

如果`parent`是`true`，则表示该特定模块/菜单已启用，

我怎样才能做到这一点？（菜单可能有子模块，但子模块也可能有其他菜单，这就是问题所在）

预期的结果是

```
<UL>

 <li>Home</li>
 <li>
  Shop 
    <UL>   
         <LI>
           SALES 
           <UL>
               <LI>Sales Return</LI>
               <LI>Sales Report</LI>
           </UL>  
         </LI>
    </UL> 
 </li>

</UL> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:44:53.017

测试，工作...

```
<?php

    $MENU=array();

    $MENU["HOME"] = array
    (
    'parent'=>true, // parent == true ? show in top level menu : do not show in top level
    'enabled'=>true,
    'text'=>'Home',
    'link'=> 'public/home',
    'sub_modules' => array()   // empty sub modules means no sub menus need to display
    );

     $MENU["SHOP"] = array
    ( 
    'parent'=>true,
    'enabled'=>true,
    'text'=>'Shop',
    'link'=> 'public/shop',
    'sub_modules' => array('SALES') // SALES is a sub menu of SHOP,which is also configured as another module
    );

    $MENU["SALES"] = array
    ( 
    'parent'=>FALSE, // PARENT = FALSE (this is a sub menu of SHOP)
    'enabled'=>true,
    'text'=>'Sales',
    'link'=> 'public/shop/sales',
    'sub_modules' => array('SALES_RETURN','SALES_REPORT') //have 2 sub menu's
    );

    $MENU["SALES_RETURN"] = array
    ( 
    'parent'=>FALSE, 
    'enabled'=>true,
    'text'=>'Sales Return',
    'link'=> 'public/shop/sales/return',
    'sub_modules' => array() 
    );

     $MENU["SALES_REPORT"] = array
    ( 
    'parent'=>FALSE, 
    'enabled'=>true,
    'text'=>'Sales Report',
    'link'=> 'public/shop/sales/report',
    'sub_modules' => array() 
    );

    function show_menu(&$MENU,$subIndex=false){

        $menu_string = '<UL>';

        if(!$subIndex){
            foreach($MENU as $item)
            {
                if( $item['enabled']&&$item['parent'] )
                {
                    $_subString="";
                    if(!empty($item['sub_modules'])){
                        foreach($item['sub_modules'] as $sub){
                            $_subString .= show_menu($MENU,$sub);
                        }
                    }
                    $menu_string .= '<LI>'.$item['text'].$_subString.'</LI>';
                }
            }
        }else{
            if(@$MENU[$subIndex]['enabled']&&!@$MENU[$subIndex]['parent'])
            {
                $_subString="";
                if(!empty($MENU[$subIndex]['sub_modules'])){
                    foreach($MENU[$subIndex]['sub_modules'] as $sub){
                        $_subString .= show_menu($MENU,$sub);
                    }
                }
                $menu_string .= '<LI>'.$MENU[$subIndex]['text'].$_subString.'</LI>';
            }
        }

        return $menu_string.'</UL>';
    }

    echo show_menu($MENU);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:18:56.777

使用递归函数很容易做到这一点，我会给你一个第一个版本（未经测试）：

```
function parse_menu($menu){
    echo "<li>".$menu['text']."</li>"
    if(!empty($menu['sub_modules'])){
        echo "<ul>";
        foreach($menu['sub_modules'] as $e){
            parse_menu($menus_array[$e]); //or whatever you are calling the generic array
        }
        echo "</ul>";
    }
} 
```

您应该调用每个没有父级的 $menus_array 元素（树的第 0 级）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-30T11:35:43.507

仅仅因为其他两个答案根本不是这个问题的解决方案，我在这个主题中搜索了几天，发现那里相当不错和有效的解决[方案](https://www.copterlabs.com/build-menu-with-recursive-functions/)。我发布此内容是因为其他人将来会阅读此内容，并希望这会像它对我一样对任何人都有帮助。此外，数组的样式也必须更改。阅读整篇文章。

编辑：这可能是数组

```
$menu = array(
'about' => array(
'display' => 'About Us'),
'blog' => array(
'display' => 'Read Our Blog'),
'links' => array(
'display' => 'Recommended Links',
'sub' => array(
'products' => array(
'display' => 'High-Quality Products',
'url' => 'links/#products'),
'services' => array(
'display' => 'Helpful Services',
'url' => 'links/#services',
'sub' => array(
'local' => array(
'display' => 'Local Services',
'url' => 'links/#services_local'),
'online' => array(
'display' => 'Online Services',
'url' => 'links/#services_online')
)))),
'contact' => array(
'display' => 'Contact Us'
)); 
```

这就是功能。我测试了它并且它正在工作。

```
function buildMenu($menu_array, $is_sub = FALSE){
$attr =
(!$is_sub) ? ' id="menu"' : ' class="submenu"';
$menu = "<ul$attr>";
foreach($menu_array as $id => $properties) {        
foreach($properties as $key => $val) {
if (is_array($val)) {
$sub = buildMenu($val, TRUE);
}else{
$sub = NULL;
$$key = $val;
}}
if (!isset($url)) {
$url = $id;
}
$menu.="<li><a href=" . $url . ">$display</a>$sub</li>";
unset($url, $display, $sub);
}
return $menu . "</ul>";
} 
```

只需`echo buildMenu($menu);`在代码中的某个地方调用即可。输出预期的代码：

```
<ul id="menu">
   <li><a href=about>About Us</a></li>
   <li><a href=blog>Read Our Blog</a></li>
   <li>
      <a href=links>Recommended Links</a>
      <ul class="submenu">
         <li><a href=links/#products>High-Quality Products</a></li>
         <li>
            <a href=links/#services>Helpful Services</a>
            <ul class="submenu">
               <li><a href=links/#services_local>Local Services</a></li>
               <li><a href=links/#services_online>Online Services</a></li>
            </ul>
         </li>
      </ul>
   </li>
   <li><a href=contact>Contact Us</a></li>
</ul> 
```

# c++ - 致命错误 LNK1112：模块机器类型“X86”与 2010 的目标机器类型“x64”冲突

> ID：14704592
> 
> 赞同：2
> 
> 时间：2013-02-05T09:55:33.333
> 
> 标签：c++, visual-studio-2010, linker

我正在尝试运行一个示例应用程序。此应用程序适用于 32 位机器。但我想在 64 位机器上运行它，但我收到以下错误：

**AFE\AnyFirewallEngine\Unicode Debug\AfBenchmark.obj：致命错误 LNK1112：模块机器类型“X86”与目标机器类型“x64”冲突**

我在这里使用两个第三方库 1\. Openssl-0.9.8e
2\. boost

已经为 64 位构建。

我的编译器是visual studio 2010

请帮助我........

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-31T13:12:39.750

就我而言，我遇到了同样的问题`openssl 1.0.2d`：

```
fatal error LNK1112: module machine type 'X86' conflicts with target machine type 'x64' 
```

当我运行`vcvars64.bat`insted of时问题解决了`vcvars32.bat`。在 VS15 中，它位于：

```
C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\bin\amd64\vcvars64.bat 
```

然后我能够运行`ms\do_win64a`并且 nmake -f`ms\nt.mak`没有问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:57:24.430

您显然正在使用至少[一个其他第三方库](http://www.anyfirewallengine.com/)，并且您尝试链接的二进制文件是为 x86 构建的。您将不得不查找或生成 AFE 的 x64 二进制文件。

# javascript - 如何根据查询字符串设置活动链接

> ID：14704593
> 
> 赞同：0
> 
> 时间：2013-02-05T09:55:39.523
> 
> 标签：javascript, jquery, prestashop

我需要激活引用用户正在查看的页面的 URL 的链接。那不是问题，问题在于 URL 中的查询字符串；我尝试了不同的解决方案来查看相关答案，唯一发生的事情是链接只有在我单击它时才会获得颜色，然后立即返回与以前相同的颜色。

我正在使用 prestashop，这个菜单是一个已安装的模块，如果不是因为这个小问题，它可以完美运行。

这是HTML（里面有javascript）。该模块被发送到一个 XML 文件中，以供 smarty 获取和编译：

```
<div class="left_nav">
    <h3>VIAGGIA CON NOI</h3>
    <ul class="left_list">
        <li><a href="../../cms.php?id_cms=10">I nostri viaggi spiegati</a></li>
        <li><a href="../../cms.php?id_cms=11">Vostro viaggio su misura</a></li>
        <li><a href="../../cms.php?id_cms=12">Attività ed estensioni </a></li>
        <li><a href="../../cms.php?id_cms=17">Turismo accessibile</a></li>
        <li><a href="../../cms.php?id_cms=18">Collaborare con noi</a></li>
    </ul>

    <h3>DICONO DI NOI</h3>
    <ul class="left_list">
        <li><a href="../../cms.php?id_cms=19">I nostri viaggiatori</a></li>
        <li><a href="../../cms.php?id_cms=20">Stampa e altri media</a></li>
    </ul>
</div>

<script type="text/javascript">// <![CDATA[
    $(function() {
        var filename = window.location.href.substr(window.location.href.lastIndexOf("/") + 1);
        $('ul.left_list li a[href*=" + filename + "]').each(function() {
            if (window.location.href.indexOf($(this).find('a').attr('href'))) {
                $(this).addClass('active').siblings().removeClass('active');
            }
        });
    });
// ]]></script> 
```

有谁知道如何使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:16:50.037

试试这个 jquery 代码：

```
$(function()
 {
    $('.left_list li a').each(function(){
        loc= window.location.pathname;
        path=$(this).attr('href');
        alert(loc+'-'+path);

        if(loc==path)
        {
           alert('ok');
           $(this).addClass('active');
        }
    });
}); 
```

我已经放了几个警报来查看链接和页面中 href 之间的区别，以便您可以看到它的不同之处。（我用不同的链接测试了代码，它可以工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:58:10.163

注意到你忘了逃跑：

```
 $('ul.left_list li a[href*="'+filename+'"]').each(function()
                             ^ here      ^here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:23:27.507

我认为你需要这个：http: [//jsbin.com/amucep/2/edit](http://jsbin.com/amucep/2/edit)

```
$(function() {
   var winurl = window.location.href;
   var url = winurl.substr(winurl.lastIndexOf('/')+1);

   $('ul.left_list li a').each(function() {
      $('ul.left_list li a[href$="'+url+'"]').addClass('active');   
   });
}); 
```

# paypal - 如何在 PayPal 沙盒网站上测试“没有 PayPal 帐户的结帐”？

> ID：14704599
> 
> 赞同：1
> 
> 时间：2013-02-05T09:56:03.663
> 
> 标签：paypal, paypal-sandbox

一位客户报告说，在他创建一个 Paypal 帐户之前，他无法使用 Paypal 支付我们的服务费用。由于我们[启用了必要的设置](https://www.paypal.com/cgi-bin/webscr?cmd=p/mer/WAX_landing-outside)，因此需要调试。

我想在[https://developer.paypal.com/](https://developer.paypal.com/)上重现该问题，但如果不登录帐户或在那里创建帐户，我看不到如何“付款”。

如何在 Paypal 沙盒网站上测试“没有 PayPal 帐户的结帐”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:10:26.647

如果您使用的是 Payments Standard，那么这将基于 cookie。如果正在使用的计算机/浏览器上的任何用户曾经登录过 PayPal 帐户，它将假定您将使用 PayPal，并且不会为您提供访客结帐选项。清除浏览器缓存/cookies 应该可以解决这个问题，但只有在您再次登录之前。

如果您想避免这种情况，可以使用 SOLUTIONTYPE=Sole 和 LANDINGPAGE=Billing 的 Express Checkout。无论浏览器中设置了任何 cookie，这都会强制执行访客结帐选项。

# clojure - db.part/db 的所有字段是什么意思？

> ID：14704604
> 
> 赞同：7
> 
> 时间：2013-02-05T09:56:09.307
> 
> 标签：clojure, datomic

我是 datomic 的新手，我仍在试图弄清楚系统是如何构建的。特别是，我不明白 :db.part/db 扮演什么角色，因为每次安装架构时似乎都需要它。有人可以阐明这一切意味着什么吗？

```
（需要'[datomic.api :as d]）
(def uri "datomic:mem://sample")
(d/create-database uri)
(def conn (d/connect uri))

(pprint (seq (d/entity dbval :db.part/db)))

;; =>
;; ([:db/doc "系统分区的名称。系统分区包括datomic的核心，以及用户模式：类型定义、属性定义、分区定义、数据函数定义。"]
;; [:db.install/function #{:db.fn/cas :db.fn/retractEntity}]
;; [:db.install/属性
;; #{:db/noHistory :db.install/partition :db/cardinality
;; :db.install/attribute :db/index :db/unique :db/fulltext
;; :db/txInstant :db/lang :db/doc :db.install/valueType :db/code
;; :db/isComponent :db/fn :db.install/function :db/valueType :db/ident
;; :fressian/标签}]
;; [:db.install/valueType
;; #{:db.type/uuid :db.type/bigint :db.type/uri :db.type/ref
;; :db.type/keyword :db.type/bytes :db.type/string :db.type/instant
;; :db.type/fn :db.type/long :db.type/bigdec :db.type/boolean
;; :db.type/double :db.type/float}]
;; [:db.install/partition #{:db.part/db}]
;; [:db/ident :db.part/db])

```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T01:12:47.597

`:db.part/db`是架构实体的分区（请参阅[partitions](http://docs.datomic.com/schema.html#sec-2)上的架构文档）。这些 db.install 属性用于触发安装某些实体的挂钩。断言它们`:db.part/db`没有特殊意义（afaik），这只是 Datomic 团队选择用于表示属性安装等的约定。

因此，例如，当您提交如下交易时：

```
[{:db/ident :person/name
  :db/cardinality :db.cardinality/one
  :db/valueType :db.type/string
  :db.install/_attribute :db.part/db
  :db/id #db/id[:db.part/db]}] 
```

这相当于（现在在 Clojure 中而不是 edn 中）：

```
(let [id (datomic.api/tempid :db.part/db)]
  [[:db/add id :db/ident :person/name]
   [:db/add id :db/cardinality :db.cardinality/one]
   [:db/add id :db/valueType :db.type/string]
   [:db/add :db.part/db :db.install/attribute id]]) 
```

然后 Datomic 注意到您已经为`:db.part/db`'s添加了一个值`:db.install/attribute`，验证您是否为某个属性提供了所需的属性，并将新属性安装到数据库中，以便您可以在事务之后使用它。

同样，您可以使用`:db.install/_partition :db.part/db`安装新分区。请参阅有关[安装属性定义](http://docs.datomic.com/schema.html#sec-1-4)和[创建新分区](http://docs.datomic.com/schema.html#sec-2-1)的文档。

`:db.install/valueType`有朝一日可以用来安装你自己的自定义值类型，但这个功能还没有准备好。`:db.install/function`似乎是供内部使用。我不确定它的目的。[安装数据库功能](http://docs.datomic.com/database-functions.html#sec-1-2)的文档化方式是不同的。

这些属性（除了`:db.install/function`）也便于查询和检查数据库。例如，我们可以提取所有已安装值类型的集合，以防我们忘记：

```
user> (:db.install/valueType (datomic.api/entity db :db.part/db))
#{:db.type/uuid :db.type/bigint :db.type/uri :db.type/ref
  :db.type/keyword :db.type/bytes :db.type/string :db.type/instant
  :db.type/fn :db.type/long :db.type/bigdec :db.type/boolean
  :db.type/double :db.type/float} 
```

或者我们可以在现有属性上编写查询：

```
user> (datomic.api/q '[:find ?ns (distinct ?attr) :where
                       [:db.part/db :db.install/attribute ?a]
                       [?a :db/ident ?attr]
                       [(namespace ?attr) ?ns]]
                     db)
[["db" #{:db/noHistory :db/cardinality :db/index :db/unique
         :db/fulltext :db/txInstant :db/lang :db/doc
         :db/code :db/isComponent :db/fn :db/valueType
         :db/ident}]
 ["db.install" #{:db.install/partition :db.install/attribute
                 :db.install/valueType :db.install/function}]
 ["fressian" #{:fressian/tag}]] 
```

# java - 在 Excel 文件 (*.xlsx) 中添加数据验证

> ID：14704613
> 
> 赞同：-2
> 
> 时间：2013-02-05T09:56:33.103
> 
> 标签：java, excel-2007, apache-poi

我想添加一个条件来检查第一列的数据，如下所示：

```
0 < data <= 1 
```

那么，我该如何通过 Apache Poi 库来做到这一点？

太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:12:39.697

提示：使用下面的类；

```
import org.apache.poi.hssf.usermodel.DVConstraint;

import org.apache.poi.hssf.usermodel.HSSFDataValidation;

import org.apache.poi.ss.usermodel.DataValidation;

import org.apache.poi.ss.util.CellRangeAddressList; 
```

# php - 如何在 PHP 中使用 Pagination 进行 xml 响应

> ID：14704614
> 
> 赞同：1
> 
> 时间：2013-02-05T09:56:35.903
> 
> 标签：php, web-services, pagination

我有一个 PHP REST 网络服务。客户端是PHP，服务器端是codeigniter。响应数据或 XML 太长，所以我正在考虑使用分页。我想以带有分页的表格的形式列出数据。在这种情况下是否有任何可能的分页方法？

如果我在客户端将整个请求 XML 数据转换为 PHP 数组，是否可以进行分页？

# windows-phone-7 - WP8提醒太慢

> ID：14704615
> 
> 赞同：2
> 
> 时间：2013-02-05T09:56:39.010
> 
> 标签：windows-phone-7, windows-phone-8

我正在制作一个使用大量提醒的 Windows 手机应用程序，我决定从测试 ScheduledActionService 方法（添加、删除、替换、查找）的性能开始，看看什么是最快/最简单的方法.

我开始测试，应用程序花了 1.5 秒删除 14 个提醒，然后创建新的 14 个提醒。查找/替换花费了相同的时间。这比我预期的要慢得多。该测试是在 HTC 8X 上进行的。然后我在三星 Omnia 7 上做了同样的事情，而且速度要快得多。替换 14 个提醒大约需要 200 毫秒。删除/添加慢了大约 100 毫秒。两个测试都没有调试，我做了好几次，看看它是否是随机的，不是。

这是测试的代码：

```
 public void RefreshReminders() {
        var st = new System.Diagnostics.Stopwatch();
        st.Start();

        foreach (var reminder in ScheduledActionService.GetActions<Reminder>()) {
            ScheduledActionService.Remove(reminder.Name);
        }

        for (int i = 0; i < 14; i++) {
            string reminderName = i.ToString();

            Reminder reminder = new Reminder(reminderName);
            reminder.Title = "Reminder";
            reminder.Content = string.Format("Some data: {0}", i);
            reminder.BeginTime = DateTime.Now.AddSeconds(2000);
            reminder.RecurrenceType = RecurrenceInterval.None;

            ScheduledActionService.Add(reminder);
        }

        st.Stop();
        LogToIS("Reminders replaced (remove/add) in: " + st.ElapsedMilliseconds + "ms");

        st = new System.Diagnostics.Stopwatch();
        st.Start();
        for (int i = 0; i < 14; i++) {
            string reminderName = i.ToString();

            Reminder reminder = (Reminder)ScheduledActionService.Find(reminderName);
            reminder.Content = string.Format("Some data: {0}", i + 5);
            reminder.BeginTime = DateTime.Now.AddSeconds(2000);

            ScheduledActionService.Replace(reminder);
        }
        st.Stop();
        LogToIS("Reminders replaced (find/replace) in: " + st.ElapsedMilliseconds + "ms");
    } 
```

LogToIS 只是将字符串写入隔离存储中的文件。

任何想法为什么这会在速度更快的手机上运行得更慢？

**编辑：** HTC 8X 上的结果是一样的，无论应用程序是 WP7.1 应用程序还是 WP8 应用程序。

# xslt - xslt 函数停止重复代码

> ID：14704620
> 
> 赞同：0
> 
> 时间：2013-02-05T09:56:57.247
> 
> 标签：xslt, umbraco

嗨，我是 xslt 的完整初学者，并且刚刚开始使用它，因为我正在使用 Umbraco 构建站点。我想知道是否有任何方法可以在 xslt 中创建函数，所以我不必重复同样的事情。我看了几个网站，但不是很明白

我的代码是：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE xsl:stylesheet [ <!ENTITY nbsp "&#x00A0;"> ]>
<xsl:stylesheet 
  version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
  xmlns:msxml="urn:schemas-microsoft-com:xslt" 
  xmlns:umbraco.library="urn:umbraco.library"
  exclude-result-prefixes="msxml umbraco.library">

<xsl:output method="xml" omit-xml-declaration="yes"/>

<xsl:param name="currentPage"/>

<xsl:template match="/">

<xsl:variable name="items" select="$currentPage/ancestor-or-self::* [@isDoc and @level = 1]/* [@isDoc and string(umbracoNaviHide) != '1']"/>

<!-- The fun starts here -->

<xsl:if test="count($items) &gt; 0">
<ul id="SubNav" class="level{@level}">
  <xsl:for-each select="$items">
  <li>
    <a href="{umbraco.library:NiceUrl(@id)}">
      <xsl:value-of select="@nodeName"/>
    </a>
    <xsl:if test="count(./child::*[@isDoc and string(umbracoNaviHide) != '1']) &gt; 0">
        <ul class="level{@level}">
        <xsl:for-each select="./child::*[@isDoc and string(umbracoNaviHide) != '1']">
          <li>
            <a href="{umbraco.library:NiceUrl(@id)}">
              <xsl:value-of select="@nodeName"/>
            </a>
            <xsl:if test="count(./child::*[@isDoc and string(umbracoNaviHide) != '1']) &gt; 0">
                <ul class="level{@level}">
                <xsl:for-each select="./child::*[@isDoc and string(umbracoNaviHide) != '1']">
                  <li>
                    <a href="{umbraco.library:NiceUrl(@id)}">
                      <xsl:value-of select="@nodeName"/>
                    </a>
                  </li>
                </xsl:for-each>
                </ul>
            </xsl:if>
          </li>
        </xsl:for-each>
        </ul>
    </xsl:if>
  </li>
  </xsl:for-each>
</ul>
</xsl:if>

</xsl:template>

</xsl:stylesheet> 
```

正如您所看到的 foreach 节点我正在重用相同的代码来列出孩子所以我想知道是否可以将其拉出到一个函数中，这样我就不必为我需要的每个级别的孩子嵌套相同的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:25:20.780

XSLT 中的想法是使用与 XML 结构中的某些节点匹配的模板。您甚至可以使用“模式”应用具有不同处理指令的相同模板。

我不知道您的 XML 结构，但我认为这将是要走的路。在 stackoverflow 中搜索也提供了信息：[https ://stackoverflow.com/questions/tagged/templates+xslt](https://stackoverflow.com/questions/tagged/templates+xslt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:27:00.440

XSLT 2.0 允许您编写可以从代码中的 XPath 表达式调用的函数。例如，您可以定义

```
<xsl:function name="f:isRelevant" as="xs:boolean">
  <xsl:param name="node" as="element()"/>
  <xsl:sequence 
    select="count($node/child::*[@isDoc and string(umbracoNaviHide) != '1'])"/>
</xsl:function> 
```

然后你可以写，例如

```
<xsl:if test="f:isRelevant(.)">...</xsl:if> 
```

如果您在一个限制您使用 XSLT 1.0 的平台上，那么您将不得不忍受更冗长的代码。您可以将命名模板和 xsl:call-template 指令用于常见的 XSLT 代码块，但它们不如函数方便，例如，您不能在 xsl:if 的测试表达式中调用它们例子。

# c# - 从嵌套列表中提取数据

> ID：14704622
> 
> 赞同：0
> 
> 时间：2013-02-05T09:57:12.153
> 
> 标签：c#, asp.net, .net, list

**编码：**

```
List<Expense> exp = new List<Expense>();
List<Budget> bud = new List<Budget>();

     bud.Add(new Budget()
     {
         sal_tp = 0,
         sal_fos_veri = 1
     });

     exp.Add(new Expense()
       {
             sal_tp =2,                                             
             sal_fos_veri = 3                            
       });
bud.Add(new Budget()
     {
         sal_tp = 4,
         sal_fos_veri = 5
     });

     exp.Add(new Expense()
       {
             sal_tp =6,                                             
             sal_fos_veri = 7                            
       });

bud.Add(new Budget()
     {
         sal_tp = 8,
         sal_fos_veri = 9
     });

     exp.Add(new Expense()
       {
             sal_tp =10,                                             
             sal_fos_veri = 11                            
       });

bud.Add(new Budget()
     {
         sal_tp = 12,
         sal_fos_veri = 13
     });

     exp.Add(new Expense()
       {
             sal_tp =14,                                             
             sal_fos_veri = 15                            
       });

bud.Add(new Budget()
     {
         sal_tp = 16,
         sal_fos_veri = 17
     });

     exp.Add(new Expense()
       {
             sal_tp =18,                                             
             sal_fos_veri = 19                            
       });

bud.Add(new Budget()
     {
         sal_tp = 20,
         sal_fos_veri = 21
     });

     exp.Add(new Expense()
       {
             sal_tp =22,                                             
             sal_fos_veri = 23                            
       });

bud.Add(new Budget()
     {
         sal_tp = 24,
         sal_fos_veri = 25
     });

     exp.Add(new Expense()
       {
             sal_tp =26,                                             
             sal_fos_veri = 27                            
       }); 
```

***部分课程结束***

```
public class Expense
                    {
                        public int sal_tp { get; set; }
                        public int sal_fos_veri { get; set; }
                    }
            public class Budget
                {
                    public int sal_tp { get; set; }
                    public int sal_fos_veri { get; set; }
                  } 
```

**期望输出如下：**

* *0 2 1 4 3 5 .... 等等.... **

> 如何一次迭代两个列表？我尝试过这样的事情

```
for(int i=0;i<bud.Count;i++)
{
                       Expense explist=exp[i];
                       Budget budlist=bud[i];
                       Response.Write(budlist.sal_tp);
                       Response.Write(explist.sal_tp);
                       Response.Write(budlist.sal_fos_veri);
                       Response.Write(explist.sal_fos_veri);
 } 
```

**问题：**这会增加代码，我也想遍历那个“budlist”。就像我以前在java中做这样的事情

```
for(int i=0;i<data.size();i++)
       {
          for(int j=0;j<((ArrayList)data.get(i)).size();j++)
           {
               out.print("<td>");
               out.print(((ArrayList)data.get(i)).get(j));
               out.print("</td>");
               out.print("<td>"+((ArrayList)exp_data.get(i)).get(j)+"</td>");
           }
           out.println("</tr>");
       } 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:07:21.353

尝试提取常见的抽象为

```
public interface  IMoneyTransaction
{
    int sal_tp { get; set; }
    int sal_fos_veri { get; set; }
} 
```

你的类声明会改变一点：

```
public class Expense : IMoneyTransaction
{
    public int sal_tp { get; set; }
    public int sal_fos_veri { get; set; }
}

public class Budget : IMoneyTransaction
{
    public int sal_tp { get; set; }
    public int sal_fos_veri { get; set; }
} 
```

将列表填写为：

```
var exp = new List<IMoneyTransaction>{
    new Budget
    {
        sal_tp = 0,
        sal_fos_veri = 1
    }};

var bud = new List<IMoneyTransaction>{
    new Expense
    {
        sal_tp =2,                                             
        sal_fos_veri = 3                            
    }}; 
```

现在，您可以使用`Union`一个通用接口来合并数据并对其进行迭代

```
var allItems = exp.Union(bud).ToArray();

for(int i = 0; i < allItems.Length; i++)
{
    Console.WriteLine (allItems[i].sal_fos_veri);
    Console.WriteLine (allItems[i].sal_tp);
} 
```

# asp.net-mvc - 如何阻止资源管理器 Json 下载奇怪的行为？

> ID：14704623
> 
> 赞同：0
> 
> 时间：2013-02-05T09:57:14.383
> 
> 标签：asp.net-mvc, json, knockout.js, knockout-mapping-plugin

我无法将 Json 数据绑定到表。Internet Explorer 也想下载 Json 数据。如何停止资源管理器下载请求并填写表格。我一直在阅读更多 stackoverflow 问题和谷歌搜索文章。我不明白为什么 knockout.js 不能绑定数据。我在淘汰赛和 json 绑定中学习了绑定架构。

像那样：

[http://jsfiddle.net/madcapnmckay/3rRUQ/1/](http://jsfiddle.net/madcapnmckay/3rRUQ/1/)

[http://jsfiddle.net/rniemeyer/5EWDG/](http://jsfiddle.net/rniemeyer/5EWDG/)

我想使用绑定这些方法。但我无法阻止 iexplorer 下载行为。

```
 var result = function () {
    $.ajax({
        type: "get",
        url: "/Contact/GetEmployees/",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {

            viewModel = ko.mapping.fromJS(data, self.Employees);

        },
        error: function (error) {
            alert(error.status + "<--and--> " + error.statusText);
        }
    });
};

ko.utils.arrayMap(result, function (i) { Directory.list.push(new Employee(i.EmployeeCode, i.EmployeeName)); }); 
```

### 还 ：

```
 @{
    ViewBag.Title = "GetPerson";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>GetPerson</h2>
<script type="text/javascript">
    function Person(FirstName, LastName, Friends) {
        var self = this;
        self.FirstName = ko.observable(FirstName);
        self.LastName = ko.observable(LastName);
        self.FullName = ko.computed(function () {
            return self.FirstName() + ' ' + self.LastName();
        })
        self.Friends = ko.observableArray(Friends);
        self.AddFriend = function () {
            self.Friends.push(new Person('new', 'friend'));
        };
        self.DeleteFriend = function (friend) {
            self.Friends.remove(friend);
        };
    }

    var viewModel = new Person();

    $(document).ready(function () {
        $.ajax({
            url: 'Person/GetPerson',
            dataType: 'json',
            type: 'GET',
            success: function (jsonResult) {
                viewModel = ko.mapping.fromJS(jsonResult, mapping);
                console.log(viewModel);
                ko.applyBindings(viewModel);
            }
        });
    });

    var mapping = {
        create: function (options) {
            var person = options.data,
            friends = ko.utils.arrayMap(person.Friends, function (friend) {
                return new Person(friend.FirstName, friend.LastName);
            });

            return new Person(person.FirstName, person.LastName, friends);
        }
    };

</script>

@using (Html.BeginForm())
{
<p>First name: <input data-bind="value: FirstName" /></p>
<p>Last name: <input data-bind="value: LastName" /></p>
<p>Full name: <span data-bind="text: FullName" /></p>
<p>#Friends: <span data-bind="text: Friends().length" /></p>
@*Allow maximum of 5 friends*@
<p><button data-bind="click: AddFriend, text:'add new friend', enable:Friends().length < 5" /></p>

@*define how friends should be rendered*@
<table data-bind="foreach: Friends">
    <tr>
        <td>First name: <input data-bind="value: FirstName" /></td>
        <td>Last name: <input data-bind="value: LastName" /></td>
        <td>Full name: <span data-bind="text: FullName" /></td> 
        <td><button data-bind="click: function(){ $parent.DeleteFriend($data) }, text:'delete'"/></td> 
    </tr>
</table>
} 
```

控制器方法：

```
 public class PersonController : Controller
    {
        //
        // GET: /Person/

        public ActionResult GetPerson()
        {
            Person person = new Person
            {
                FirstName = "My",
                LastName = "Name",
                Friends = new List<Person>
                        {
                             new Person{FirstName = "Friend", LastName="Number1"},
                             new Person{FirstName = "Friend", LastName="Number2"}
                        }
            };
            return Json(person, "text/html", JsonRequestBehavior.AllowGet);
 //return Json(person,  JsonRequestBehavior.AllowGet);  Not working
        }
    } 
```

如何解决绑定和下载问题？

# android - 蚀。如何删除已删除导入的所有调用？

> ID：14704626
> 
> 赞同：0
> 
> 时间：2013-02-05T09:57:25.470
> 
> 标签：android, eclipse, import

我必须用自定义系统替换 Android 标准日志记录系统。我删除了所有 *.java 文件，现在我必须手动`import android.util.Log;`删除所有调用，例如. `Log.i(MY_TAG, "Something")`我的日志系统的方法有不同的签名；所以，我不能简单地运行“组织导入”来导入我的日志记录类并留下标准`Log`类的调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:24:54.633

在您的工作区进行文件搜索，查找导入日志类（“import ...Log”），检查结果。再做一次，但按下替换按钮并将该字段留空。

最后将您的通话更改为记录。

# titanium - Titanium Ti.GeoLocation.forwardGeocoder() 不会将非美国地址转换为 lat 和 long 值

> ID：14704628
> 
> 赞同：1
> 
> 时间：2013-02-05T09:57:28.850
> 
> 标签：titanium, titanium-mobile

`Ti.GeoLocation.forwardGeocoder()`没有将非美国地址转换为 lat 和 long 值。

下面的示例代码。

```
Ti.GeoLocation.forwardGeocoder('Hyderabad, India', function(e){
var lat = e.latitude;
var long = e.longitude;
}); 
```

使用这段代码，我们得到 lat 和 long 值是未定义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:06:22.440

获取美国地址以及世界其他任何地方（谷歌可以找到）并在钛地图上显示经度/纬度的正确方法。

下面的代码使用字符串变量：myAddress

```
var myAddress = address + ','+ city + ',' + postal + ',' + country //'Vieux Port, Montreal, Quebec, H2X3R4, Canada'
var xhrGeocode = Ti.Network.createHTTPClient();
xhrGeocode.setTimeout(120000);
xhrGeocode.onerror = function (e) {
    alert('Google couldn\'t find the address... check your address');
};
xhrGeocode.onload = function (e) {
    var response = JSON.parse(this.responseText);
    if (response.status == 'OK' && response.results != undefined && response.results.length > 0) {
        longitude = response.results[0].geometry.location.lng;
        latitude = response.results[0].geometry.location.lat;
    }
};
var urlMapRequest = "http://maps.google.com/maps/api/geocode/json?address=" + myAddress.replace(/ /g, '+');
urlMapRequest += "&sensor=" + (Ti.Geolocation.locationServicesEnabled == true);
xhrGeocode.open("GET", urlMapRequest);
xhrGeocode.setRequestHeader('Content-Type', 'application/json; charset=utf-8');
xhrGeocode.send(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T19:21:32.860

```
 var addrReq = Titanium.Network.createHTTPClient();
            var addrUrl = "http://maps.googleapis.com/maps/api/geocode/json?sensor=true&address="+ query;
            addrReq.open("GET",addrUrl);
            addrReq.send(null);

            addrReq.onload = function()
            {
                 var response = JSON.parse(this.responseText);

                  if(response.status == "OK"){

                    LT.Customlat=response.results[0].geometry.location.lat; 
                    LT.Customlon=response.results[0].geometry.location.lng; 
```

}

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T15:10:46.057

您需要使用 google REST API 推出自己的解决方案，底层 Titanium API 不支持非美国地址

# hadoop - 使用 copyFromLocal 开关将数据移动到 hdfs

> ID：14704633
> 
> 赞同：12
> 
> 时间：2013-02-05T09:57:37.623
> 
> 标签：hadoop, hdfs

我不知道这里发生了什么，但我正在尝试将一个简单文件从本地文件系统中的目录复制到为 hdfs 指定的目录。

在我的 hdfs-site.xml 中，我使用以下属性指定 hdfs 的目录将是 /home/vaibhav/Hadoop/dataNodeHadoopData -

```
<name>dfs.data.dir</name>
<value>/home/vaibhav/Hadoop/dataNodeHadoopData/</value>

and 

<name>dfs.name.dir</name>
<value>/home/vaibhav/Hadoop/dataNodeHadoopData/</value> 
```

我正在使用以下命令 -

```
bin/hadoop dfs -copyFromLocal /home/vaibhav/ml-100k/u.data /home/vaibhav/Hadoop/dataNodeHadoopData 
```

将文件 u.data 从其本地文件系统位置复制到我指定为 Hdfs 目录的目录。但是当我这样做时，什么都没有发生——没有错误，什么都没有。并且没有文件被复制到 hdsf。难道我做错了什么？可能存在任何权限问题吗？

需要的建议。

我正在使用伪分布式单节点模式。

另外，在相关说明中，我想问一下，在我的 map reduce 程序中，我已将配置设置为指向 inputFilePath 作为 /home/vaibhav/ml-100k/u.data。那么它不会自动将文件从给定位置复制到 hdfs 吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-05T20:35:17.737

我相信`dfs.data.dir`并且`dfs.name.dir`必须指出两个不同的现有目录。此外，请确保在更改配置中的目录后格式化了 namenode FS。

在复制到 HDFS 时，您错误地指定了目标。将本地文件复制到 HDFS 的正确语法是：

```
bin/hadoop dfs -copyFromLocal <local_FS_filename> <target_on_HDFS> 
```

例子：

```
bin/hadoop dfs -copyFromLocal /home/vaibhav/ml-100k/u.data my.data 
```

这将`my.data`在 HDFS 中用户的主目录中创建一个文件。在将文件复制到 HDFS 之前，请确保首先掌握列出目录内容和目录创建。

# php - 按子数组的计数对数组进行排序

> ID：14704634
> 
> 赞同：4
> 
> 时间：2013-02-05T09:57:42.040
> 
> 标签：php, multidimensional-array

我有一个看起来像这样的数组：

```
Array(
   ['some_first_category'] => Array(
            ['some_first_name'] => Array(
                           [0]=>'first@email.com',
                           [1]=>'second@email.com',
                           [2]=>'third@email.com',
                           [3]=>'fourth@email.com' )
             ['some_second_name'] => Array (
                           [1]=>'first@email.com',
                           [2]=>'second@email.com')
             ['some_third_name'] => Array(
                           [1]=>'first@email.com',
                           [2]=>'second@email.com',
                           [3]=>'third@email.com',
                           [4]=>'fourth@email.com' )
   ['some_second_category'] => Array(
            ['some_first_name'] => Array(
                           [0]=>'first@email.com' )
             ['some_second_name'] => Array(
                           [1]=>'first@email.com',
                           [2]=>'second@email.com',
                           [3]=>'third@email.com',
                           [4]=>'fourth@email.com')
             ['some_third_name'] => Array(
                           [1]=>'first@email.com',
                           [2]=>'second@email.com')) 
```

我想按具有名称的值的数量对数组进行排序，在我的情况下，我想成为这个数组：

```
Array(
   ['some_first_category'] => Array(
             ['some_third_name'] => Array(
                           [1]=>'first@email.com',
                           [2]=>'second@email.com',
                           [3]=>'third@email.com',
                           [4]=>'fourth@email.com' )
            ['some_first_name'] => Array(
                           [0]=>'first@email.com',
                           [1]=>'second@email.com',
                           [2]=>'third@email.com',
                           [3]=>'fourth@email.com' )
             ['some_second_name'] => Array (
                           [1]=>'first@email.com',
                           [2]=>'second@email.com')

   ['some_second_category'] => Array(
             ['some_second_name'] => Array(
                           [1]=>'first@email.com',
                           [2]=>'second@email.com',
                           [3]=>'third@email.com',
                           [4]=>'fourth@email.com')
             ['some_third_name'] => Array(
                           [1]=>'first@email.com',
                           [2]=>'second@email.com')
            ['some_first_name'] => Array(
                           [0]=>'first@email.com' )) 
```

这意味着按名称值的数量（计数）按名称对类别进行排序。有人可以帮助我吗？提前致谢，

亚伦

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-05T10:05:11.660

**您只需要 [uasort](http://www.php.net/manual/en/function.uasort.php)**

```
uasort($list, function ($a, $b) {
    $a = count($a);
    $b = count($b);
    return ($a == $b) ? 0 : (($a < $b) ? -1 : 1);
}); 
```

**完整示例**

```
$list = Array(
   'some_first_category' => Array(
            'some_first_name' => Array(
                           0=>'first@email.com',
                           1=>'second@email.com',
                           2=>'third@email.com',
                           3=>'fourth@email.com' ),
             'some_second_name' => Array (
                           1=>'first@email.com',
                           2=>'second@email.com'),
             'some_third_name' => Array(
                           1=>'first@email.com',
                           2=>'second@email.com',
                           3=>'third@email.com',
                           4=>'fourth@email.com' )
        ),
   'some_second_category' => Array(
            'some_first_name' => Array(
                           0=>'first@email.com' ),
             'some_second_name' => Array(
                           1=>'first@email.com',
                           2=>'second@email.com',
                           3=>'third@email.com',
                           4=>'fourth@email.com'),
             'some_third_name' => Array(
                           1=>'first@email.com',
                           2=>'second@email.com'))

    );

$list = array_map(function ($v) {
    uasort($v, function ($a, $b) {
        $a = count($a);
        $b = count($b);
        return ($a == $b) ? 0 : (($a < $b) ? 1 : - 1);
    });
    return $v;
}, $list);

print_r($list); 
```

输出

```
Array
(
    [some_first_category] => Array
        (
            [some_first_name] => Array
                (
                    [0] => first@email.com
                    [1] => second@email.com
                    [2] => third@email.com
                    [3] => fourth@email.com
                )

            [some_third_name] => Array
                (
                    [1] => first@email.com
                    [2] => second@email.com
                    [3] => third@email.com
                    [4] => fourth@email.com
                )

            [some_second_name] => Array
                (
                    [1] => first@email.com
                    [2] => second@email.com
                )

        )

    [some_second_category] => Array
        (
            [some_second_name] => Array
                (
                    [1] => first@email.com
                    [2] => second@email.com
                    [3] => third@email.com
                    [4] => fourth@email.com
                )

            [some_third_name] => Array
                (
                    [1] => first@email.com
                    [2] => second@email.com
                )

            [some_first_name] => Array
                (
                    [0] => first@email.com
                )

        )

) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-31T12:48:54.850

使用[uksort](http://php.net/uksort)：

```
uksort($yourArray, function($a, $b) { return count($b) - count($a); }); 
```

使用**array_multisort：**

```
array_multisort(array_map('count', $yourArray), SORT_DESC, $yourArray); 
```

你也可以看到[uasort](http://php.net/en/uasort)

祝你好运:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T10:05:14.827

您应该使用 usort 功能。参考[这里](https://stackoverflow.com/questions/9455537/sort-a-multi-dimensional-array-by-the-size-of-its-sub-arrays)。

```
function sort_sub($a,$b)
{
$res= count($b)-count($a);
return $res;
}

usort($array_name,'sort_sub') 
```

# android - 外部页面的数据转换 - Jquery Mobile

> ID：14704637
> 
> 赞同：0
> 
> 时间：2013-02-05T09:57:52.767
> 
> 标签：android, jquery-mobile

如何在 Jquery Mobile 中链接外部页面以进行数据转换？

```
<a href="appleave.html" rel="external" data-transition="slide"><img
                src="images/image.png" alt="NoImage" /></a> 
```

转换在上述代码中不起作用。帮帮我。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:07:27.393

不幸的是，您在这里无能为力，官方文档指出：

> 指向其他域或具有 rel="external"、data-ajax="false" 或 target 属性的链接将不会被 Ajax 加载。相反，这些链接将导致整个页面刷新而没有动画过渡。两个属性（rel="external" 和 data-ajax="false"）具有相同的效果，但语义不同：链接到另一个站点或域时应使用 rel="external"，而 data-ajax=" false" 对于简单地选择域中的页面不通过 Ajax 加载很有用。由于安全限制，框架总是选择链接到外部域的 Ajax 行为。

这是官方的[jQuery Mobile 文档](http://jquerymobile.com/demos/1.2.0/docs/pages/page-links.html)；搜索：**不使用 Ajax 的链接**

你真的需要**rel="external"**吗？因为页面没有加载到 DOM 中，jQM 无法创建过渡效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:07:05.143

你有没有`<script src="Your JQuery Mobile js file path"></script>`在`<head>`标签中添加`<html>`.

# gwt - GWT requestfactory：如何在服务器端捕获我在定位器中抛出的异常？

> ID：14704640
> 
> 赞同：0
> 
> 时间：2013-02-05T09:57:57.483
> 
> 标签：gwt, requestfactory

在客户端：

```
factory.find(proxyId).fire(new Receiver<P>()
{
    @Override
    public void onSuccess( P response )
    {
        proxy = response;
        ...
    }

    @Override
    public void onFailure( com.google.web.bindery.requestfactory.shared.ServerFailure error )
    {
        Window.alert( error.getMessage() );
    }
} 
```

在服务器端，我使用如下定位器：

```
public class myLocator extends Locator<T, String>
{
    @Injector LocatorHook hook;

    @Override
    public T find( Class<? extends T> clazz, String id )
    {
        T result = ...;
        hook.run( result );
        return result;
    }

    ....
} 
```

该`hook.run()`方法可能会`RunTimeException("validation exception")`在那里抛出，我希望在客户端捕获异常`onFailure()`，但是，我确实捕获了异常，但消息是**“内部服务器错误”**，而不是我抛出的异常`hook.run()`：**“验证异常”**。

有什么想法可以让客户端捕获我在服务器端抛出的异常吗？

* * *

更新：正如托马斯所说，验证来自数据存储的新鲜对象很奇怪，但我遇到了一种我不知道如何使用服务方法的情况：在客户端我获取`EntityProxyId`对象，通过`factory.find( proxyId ).fire(...)`我可以从数据存储获取实体，但实体可能不适合用户访问，在这种情况下我需要在服务器端检查它，但我找不到**合适的地方**进行验证，对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:41:45.423

RequestFactory 不希望定位器抛出异常。异常应该只由服务方法抛出，并将被定向到`Receiver`客户端的适当位置（附加到抛出的服务方法的那个）。

在服务方法之外，唯一路由到客户端的异常是`ReportableException`s，它只能从 a`ServiceLocatorDecorator`的`report()`方法中抛出。这意味着您可以使用自己的钩子`ServiceLocatorDecorator`来捕获定位器中的异常并将`report()`它们发送出去。

* * *

也就是说，验证来自数据存储的新鲜对象似乎很奇怪。您可能希望提供一个`ServiceLocatorDecorator`覆盖`validate()`（在应用来自客户端的更改后验证对象）。错误将返回到`Receiver`'s中的客户端，`onConstraintViolations`并且's`RequestContext`将被*解冻*，因此您可以进一步编辑您的代理并`fire()`再次。

# c# - 使用 fileHelpers 库读取 CSV 中的列标题

> ID：14704642
> 
> 赞同：2
> 
> 时间：2013-02-05T09:58:01.940
> 
> 标签：c#, csv, filehelpers

我有一个 CSV 文件，其中标题指示信息将按什么顺序出现在详细信息行中。一个例子是：

```
COLUMN1,COLUMN2,COLUMN3
VALUE1,VALUE2,VALUE3 
```

但也可能是

```
COLUMN2,COLUMN3,COLUMN1
VALUE2,VALUE3,VALUE1 
```

这个类看起来像这样

```
public class CSVImportLineItem
{
    public string Column1 {get; set;}
    public string Column2 {get; set;}
    public string Column3 {get; set;}
} 
```

有没有办法（使用[FileHelpers](http://filehelpers.sourceforge.net/)）读取标题，然后根据标题顺序确定到属性的映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:53:52.617

您可以使用[ClassBuilder 帮助类](http://filehelpers.sourceforge.net/runtime_classes.html)之一。

```
DelimitedClassBuilder cb = new DelimitedClassBuilder("LineItem");
// First field
cb.AddField("Column2", typeof(string));
// Second field
cb.AddField("Column1", typeof(string));
// Third field
cb.AddField("Column3", typeof(string));

engine = new FileHelperEngine(cb.CreateRecordClass());
LineItem[] lineItems = engine.ReadFile("FileIn.txt") as LineItem[]; 
```

您可以根据第一行的内容更改字段的顺序（您可以在 FileHelpers 之外阅读）。

另请参阅[此处的答案](https://stackoverflow.com/a/8833322/1077279)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:17:49.437

为什么您必须专门使用该`FileHelpers`库？

```
 //Use File.ReadAllLines();
  List<string> lines = new List<string>() { "Column1, Column2, Column3", "1,2,3" };
  var cols = lines.First().Split(',');
  List<CSVImportLineItem> imported = new List<CSVImportLineItem>();
  var v = lines.Skip(1).ToList().Select(line =>
     {
       CSVImportLineItem item = new CSVImportLineItem();
       var values = line.Split(',');
       for (int i = 0; i < cols.Count(); i++)
       {
         item.GetType().GetProperty(cols[i].Trim()).SetValue(item, values[i], null);
       }
       return item;
     }).ToList(); 
```

# php - Laravel 不会遵守状态码

> ID：14704644
> 
> 赞同：6
> 
> 时间：2013-02-05T09:58:03.780
> 
> 标签：php, json, laravel, http-status-codes

我只是无法理解，也不知道在哪里看，因为以下代码的响应状态代码始终为 200，即使我在主 Response 类中将其设置为 400。

```
class Api_Controller extends Base_Controller
{

    public function __construct()
    {
          parent::__construct();

          //header("HTTP/1.0 404 Not Found"); ##> This works
          //die();

          $test = array('1' => '2');
          die(Response::json($test, 400));
    } 
```

我错过了什么？我没有使用任何扩展类，只是默认的......

## 更新

这是`Response::json...`上面的输出：http: [//pastebin.com/RGcinSdg](http://pastebin.com/RGcinSdg)

如您所见，输出具有已设置的值......但仍然由于某种原因，返回 200

## 更新2

的输出`var_dump(http_response_code());`总是`200`

## Update3 - 临时修复

我已经激活了扩展版本，`Response::json`并在其中添加了以下行

```
http_response_code($status); 
```

但我仍然很想知道它为什么不这样做，它应该如何

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T22:06:11.027

你不能从控制器构造函数返回响应——它只是不符合 Laravel 中请求生命周期的流程。

有两种方法可以做到这一点。您可以：

a) 设置一个响应过滤器来处理您尝试实现的任何功能，或者 b) 强制控制器 ACTION 返回响应。这将像这样完成：

```
class Api_Controller extends Base_Controller
{
    public $restful = true;

    public function get_index()
    {
        return Response::json($test, 400);
    }
} 
```

它确实有效 - 你只是做错了:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-05T15:40:46.217

如果您忘记了**return**语句，也会出现同样的问题：

```
Response::json(array(
   'error' => true,
   'msg' => 'Bad request'
), 403); 
```

代替：

```
return Response::json(array(
   'error' => true,
   'msg' => 'Bad request'
), 403); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-06T14:16:24.283

试试`response()->json()`语法。

因此，例如，要从自定义 FormResquest 中标记验证错误，您可以这样做：

```
/**
 * Get validation response for the request.
 *
 * @param  array $messages
 * @return \Symfony\Component\HttpFoundation\Response
 */
public function response(array $messages)
{
    return response()->json($messages, 422);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:34:22.820

控制器方法总是必须返回响应。但我认为您不能从构造函数返回响应。您将需要使用过滤器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-27T01:17:13.040

为了让 Google 网站管理员工具满意，我在标题中检测并使用以下内容：

```
META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW" 
```

# sql-server-2008 - 在执行存储过程时随机传递输入值

> ID：14704645
> 
> 赞同：0
> 
> 时间：2013-02-05T09:58:10.333
> 
> 标签：sql-server-2008, sql-server-2005

我有存储过程，使用这个 Sp 将数据插入到员工表中，并将值作为输入参数传递，例如，

```
create procedure sp_inputvalues
@ename varchar(50),
@enum int,
@address varchar(100),
@sal int
as
begin

insert into employee(ename,enum,address,salary)values(@ename,@enum,@address,@sal) 

end 
```

要执行 Sp ，

```
exec sp_inputvalues 'venkat',1252,'nrl',20000 
```

但现在我的要求是我需要以随机顺序传递输入值，例如，

```
exec sp_inputvalues 1252,'venkat','nrl',20000 
```

如果我按上述格式传递，则存储过程应该可以工作并且存储过程应该保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:05:13.367

您需要指定参数的名称

```
exec sp_inputvalues 
    @enum = 1252, 
    @ename = 'venkat', 
    @address = 'nrl', 
    @sal = 20000; 
```

# javascript - Angular js ng-disabled 不起作用

> ID：14704650
> 
> 赞同：6
> 
> 时间：2013-02-05T09:58:38.033
> 
> 标签：javascript, angularjs

这是我的表格

```
<form name="myForm">
<input ng-disabled="true" type="text" >*
</form> 
```

但是我试图理解为什么这个输入字段没有被禁用？

我还尝试了 $scope，所以在 CTRL 中：

```
$scope.diss=true; 
```

在 html 中：

```
<form name="myForm">
<input ng-disabled="diss" type="text" >*
</form> 
```

它仍然不起作用，有什么提示吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T10:06:11.877

`ng-disabled`这是该指令的一个简单工作示例：

```
<form ng-app> 
   <input ng-disabled="checked" type="text" />
    Click me to disable: <input type="checkbox" ng-model="checked"><br/>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T20:41:01.027

在 1.2.x 版之前（我使用的是 1.0.8），我无法使用 ng-disabled 和 angular，因为我的 jQuery 版本是 1.4.2。

angularJS 1.0.x 需要 jQuery 1.6 或更新版本。

升级您的 jQuery 或 angularJS 将解决问题 - angularJS 1.2.x 检测到您的 jQuery 版本并将回退到其内部 jQLite。

# java - Hibernate类设计，持久化List和HashMap

> ID：14704652
> 
> 赞同：0
> 
> 时间：2013-02-05T09:58:45.600
> 
> 标签：java, hibernate, annotations

在我的应用程序中，我有两个类：`Activity`和`User`. 它们之间的关系是：

*   一个活动可以有多个用户。我`List<User>`在课堂上有一个为此目的的领域`Activity`。
*   一个用户可以属于多个活动，并且在每个活动中他/她可以具有特定的角色。我已经提炼了一个`Map<String, String>`in `User`，其中`key`this`Map`是 the`activityId`并且值是`roleId`。我没有任何`Role`表格，因为只有四个预定义角色。

我无法理解 和 之间是否存在任何`ManyToOne`或`OneToMany`或`ManyToMany`关系。或者我应该简单地将整个对象与数据库一起存储。如果是这样，我怎样才能存储一个整体和一个.`User``Activity``List<User>``Activity``Map<String, String>``User``List``Map`

任何指针都会对我很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:15:28.397

我首先会考虑数据库中的设计。如果我理解正确，您将有 3 个表：

*   用户
*   活动
*   参与

其中 Participation 将具有用户的外键、活动的外键和角色。

所以我会把它简单地映射为

*   用户有一个参与的 OneToMany
*   活动有一个参与的 OneToMany

当然，您可以使这两个关联成为双向的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:17:38.627

`User <-> Activity`是`many to many`。可导航性可以`bidirectional`——选择权在你。您还需要一个`UserActivityMap`具有三个属性（userId、ActivityId、roleId）的对象。RoleId 可以是枚举或 RoleObject 的 id。在后者的情况下，您可以定义一个查找表并将 RoleObject 映射到该表。

# asp.net - 如何防止用户使用登录页面上的下一步按钮返回登录页面

> ID：14704661
> 
> 赞同：0
> 
> 时间：2013-02-05T09:59:17.797
> 
> 标签：asp.net, security, caching, browser

我想阻止用户在使用后退按钮返回登录页面后使用下一个按钮返回登录页面。

例如：

有两个页面登录和默认

第一次用户在登录页面输入他的登录名和密码并转到默认页面

然后使用浏览器返回按钮进入登录页面

问题是如果用户在登录页面上按下下一步按钮，他可以在没有任何身份验证的情况下进入默认页面。

我希望用户再次输入用户名和密码。

我使用 Response.Cache.SetNoStore 来防止用户在注销后进入登录页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:35:29.510

在您的登录页面

*   On Page load 清除会话状态。然后继续你的过程。
*   加载登录页面后，限制用户单击浏览器后退或前进按钮。
*   在此浏览器限制之后，将焦点带到用户名文本框。它有效检查以下 URL 链接希望对您有所帮助。

[http://viralpatel.net/blogs/disable-back-button-browser-javascript/](http://viralpatel.net/blogs/disable-back-button-browser-javascript/)

# android - 地理编码器 - 服务在 Android 2.3 上不可用

> ID：14704662
> 
> 赞同：1
> 
> 时间：2013-02-05T09:59:19.717
> 
> 标签：android

我知道这个问题已经被问过好几次了，但我仍然收到这个错误。

在模拟器和实际设备上都尝试过，将模拟器的目标更改为 Google API，并将项目的目标构建更改为 Google API

在这些方面需要帮助:(谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:45:50.093

我希望你现在解决了。正如你所说，它有很多线程。在研究了所有线程之后，我得到的答案是 Geocoder 并不总是返回一个值。您可以尝试在 for 循环中发送 3 次请求。我至少可以回来一次。如果不是，那么它们可能是连接问题，也可能是服务器未回复您的请求等其他问题。

我也有一个while循环，但我曾经最多尝试10次。有时，即使它连接到互联网，它也不会返回任何东西。然后，我每次都使用[这种](https://developers.google.com/maps/documentation/geocoding/index)更可靠的方式来获取地址：

我曾经获取纬度和经度，然后请求谷歌服务器，回复一个 JSON 对象，其中包含有关位置坐标的各种信息。这种获取地址字符串的方式不需要地理编码器。这是功能：

```
public JSONObject getLocationInfo() {

        HttpGet httpGet = new HttpGet("http://maps.google.com/maps/api/geocode/json?latlng="+lat+","+lng+"&sensor=true");
        HttpClient client = new DefaultHttpClient();
        HttpResponse response;
        StringBuilder stringBuilder = new StringBuilder();

        try {
            response = client.execute(httpGet);
            HttpEntity entity = response.getEntity();
            InputStream stream = entity.getContent();
            int b;
            while ((b = stream.read()) != -1) {
                stringBuilder.append((char) b);
            }
        } catch (ClientProtocolException e) {
            } catch (IOException e) {
        }

        JSONObject jsonObject = new JSONObject();
        try {
            jsonObject = new JSONObject(stringBuilder.toString());
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return jsonObject;
    } 
```

我这样称呼它：

```
JSONObject ret = getLocationInfo(); 
JSONObject location;
String location_string;
try {
    location = ret.getJSONArray("results").getJSONObject(0);
    location_string = location.getString("formatted_address");
    Log.d("test", "formattted address:" + location_string);
} catch (JSONException e1) {
    e1.printStackTrace();

} 
```

希望这可以帮助。我也厌倦了依赖 Geocoder。这对我有用。虽然它可能比地理编码器慢一点。为了测试其功能，您只需将您拥有的纬度和经度坐标放入 URL 中。尝试在 Web 浏览器中查看返回的 JSON 对象。您将看到如何提取地址字符串。尝试并阅读这些线程：

[Geocoder 并不总是返回值](https://stackoverflow.com/questions/4169189/geocoder-doesnt-always-return-a-value)，并且[geocoder.getFromLocationName 仅返回 null](https://stackoverflow.com/questions/4567216/geocoder-getfromlocationname-returns-only-null)

# c# - 正则表达式替换字符组合

> ID：14704665
> 
> 赞同：0
> 
> 时间：2013-02-05T09:59:28.130
> 
> 标签：c#, .net, regex, visual-studio

我正在尝试使用正则表达式过滤字符串，我想`PÑ`从我的字符串中过滤出组合，还有一些 Seperate `P`，但是在提供的字符串中还有一些文本部分，例如：`PB00121324`，我想保留它`P`.

这是字符串：

```
PB014EC8F;1359300102;NL1200000001 ;Ey³ PÑ PÑ B014EC8F;1359 P B014EC8F;1359 
```

我想过滤掉：seperate `P`'s and `PÑ`'s

所以输出将是这样的：

```
PB014EC8F;1359300102;NL1200000001 ;Ey³ 
```

我现在正在使用此代码：

```
string CleanString = Regex.Replace(DirtyString, @"[\\PÑ?]", ""); 
```

问题是它会导致：

```
B014EC8F;1359300102;NL1200000001 ;Ey³ 
```

而不是这个：

```
PB014EC8F;1359300102;NL1200000001 ;Ey³ 
```

有人知道这个正则表达式吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T10:03:17.017

您可以使用它`\b`来查找单词边界，例如，正则表达式`\bP\b`将`P`孤立地查找 a。

与`\bP\b`...

输入`Hello P Goodbye`->`P`匹配，因为它与空格相邻（非单词字符）

输入`HelloP Goodbye`->`P`不匹配，因为它与前一个单词相邻

输入`Hello.P.Hello`->`P`匹配，因为它与非单词字符相邻

输入`P Hello`->`P`匹配，因为它与字符串的开头和空格相邻。

回应您下面的评论 - 如果第一个正则表达式`[..]`旨在找到两个句号/句点，那么这*不是*它会做的事情。`[]`表示字符类，在字符类中提供重复字符是没有意义的。要匹配两个句号，请使用`\.\.`

我不确定是否可以组合成一个正则表达式，因为执行顺序非常重要......

`Hello..P..S`是一个孤立的P。但是，在删除之后，`..`我们有`HelloPS`which 不是孤立的 P。组合多个替换很容易，但它们都将有效地“同时”发生，而您当前的方法是先做一个，然后是下一个，然后是下一个。ie - 每次输入都不同。

但是要结合替换你会做的......

```
 string cleanData = 
 Regex.Replace(DisplayText, @"(\.\.|\bPÑ?\b| )", ""); //untested :) 
```

[某种演示](http://rubular.com/r/EN8ehllq5w)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T10:07:17.300

试试这个正则表达式：

```
\bPÑ?\b 
```

输入：

```
PB014EC8F;1359300102;NL1200000001 P ;Ey³ PÑ PÑ 
```

输出：

```
PB014EC8F;1359300102;NL1200000001  ;Ey³ 
```

# c++ - 不需要安装运行时/依赖项的编程语言

> ID：14704668
> 
> 赞同：1
> 
> 时间：2013-02-05T09:59:36.770
> 
> 标签：c++, dependencies, runtime

我想知道一种不需要在目标系统上安装运行时/依赖项的编程语言。我的主要目标是 Windows XP 及更高版本。

我尝试了 Autohotkey，但它没有许多高级功能。

首先，请确认 'C++' 需要在目标系统上安装运行时/依赖项是 Win XP 或更高版本。其次，请建议我一个不需要安装依赖项的 C++ 替代方案。

**更新**：我将使用 CodeBlocks！用它编译的 C++ 代码是否需要依赖项？

**更新**：抱歉误解，CodeBlocks 是指 CodeBlocks 的默认编译器（即：`GNU GCC Compiler`或`MinGW`）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T10:01:48.703

一切通常取决于*项目*，而不是*语言*。例如，在 Visual Studio 的 C++ 中编译的程序使用一些运行时库才能正常工作。但是，您可以通过这样的方式配置项目，使这些库包含在可执行文件中，因此不需要额外的依赖项。Delphi 的工作原理类似。

这是 Visual Studio 项目的设置：

![在此处输入图像描述](../Images/7dfa9d02caa12db715b4641e0ba6dad4.png)

如果您选择“DLL”选项，您的程序将需要运行时 DLL。否则它将是独立的，运行时将被合并到您的二进制文件中。

* * *

**编辑：**回应问题编辑

我再说一遍：它取决于*project*，而不是编译器或 IDE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:06:51.240

如果你想创建一个不需要任何其他东西就可以运行的程序，除了基本操作系统（没有 .NET、没有 Java、没有 Perl、没有运行时库等），那么你最好的选择是使用`C`or`C++`和将您的程序编译为单个静态编译的可执行文件。

在实践中实现起来相当困难，但可以做到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:12:20.837

Codeblocks 不是编译器，而是可以使用不同编译器的 IDE。最常见的是**MinGW**。

要遵守 minGW 以便静态链接所有标准库，您需要配置项目（请参阅“项目设置”），以便链接器选项包含`-static`标志。

您甚至可以通过 stecifying 更具体

```
-static-libgcc
-static-libstdc++ 
```

![在此处输入图像描述](../Images/5dd3b17cdfb243d3a3cb4ed9e3e20643.png)

# windows-phone-7 - USSD 不显示诺基亚 Lumia 710 (Windows 7.8)

> ID：14704672
> 
> 赞同：1
> 
> 时间：2013-02-05T09:59:53.480
> 
> 标签：windows-phone-7, nokia

我无法在诺基亚 Lumia 710 上使用 USSD 字符串。使用 *121# (Airtel-India) 号码后正在拨号，但未显示响应屏幕。

我向运营商提出问题，因为他们告诉我在诺基亚 Lumia 710 手机上安装 SMS 2.0。

我无法在 windows phone 市场中找到建议的软件。

您能否在这方面帮助我或提供替代方案以在诺基亚 Lumia 710 手机上使用 USSD 字符串。

# c# - 如何断言调用方法而不执行方法中的代码？

> ID：14704683
> 
> 赞同：0
> 
> 时间：2013-02-05T10:00:20.323
> 
> 标签：c#, unit-testing, rhino-mocks, partial-mocks

想象一下，我们有以下代码

```
public class test
  {
   public void Condition(x,y)
   {
       if (x == y)
       {
           methodOne();
       }
       else
       {
           methodTwo();
       }
   }
    public void methodOne(){//do some database stuff}
    public void methodTwo(){//do some database stuff}
 } 
```

我想断言，如果在 x==y 时调用了methodone，但不希望我的测试在我的方法一中执行代码，因为它会做一些数据库的东西......

我正在写这样的东西

```
 MockRepository mockRepository=new MockRepository();
 var Mock = mockRepository.PartialMock<test>();
 mock.Replay();
 mock.condition(1,1);
 mock.AssertWasCalled(x=>x.methodOne);
 mock.VerifyAllExpectations(); 
```

但它也尝试运行方法一中的东西，我不希望我的测试进行数据库连接，我只需要确保我的条件正常工作并且它是否调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:04:51.670

您将关注点、业务逻辑和数据访问混合在一个类中。您需要考虑[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)和[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)。

您`public void Condition(x,y)`可能应该在具有数据**访问层的****业务逻辑层**`methodOne()`中。`methodTwo()`

 **应该将数据访问层 ( [IoC](http://en.wikipedia.org/wiki/Inversion_of_control) ) 注入到业务逻辑层中，以便对其进行模拟。这样，当您测试 Condition 方法时，您将传入一个实际上并不连接到数据库的模拟数据访问层。

这样您就可以像现在一样检查 Condition 是否被调用，而不会产生任何副作用，例如写入数据库。当您遇到这样的情况时，它可以帮助您将代码分解为更好的架构，并最终引导您研究[测试驱动开发](http://en.wikipedia.org/wiki/Test-driven_development)。**

# eclipse - 无法在我的系统中启动 Eclipse IDE

> ID：14704684
> 
> 赞同：0
> 
> 时间：2013-02-05T10:00:20.820
> 
> 标签：eclipse, eclipse-plugin, eclipse-indigo

我今天有 Eclipse indigo ide 我通过 eclipse 市场更新了一个添加的`SpringSource Tool Suite (STS)`ide 下载了所需的文件并像`restart`我重新启动 eclipse 一样询问但它给出了错误

`![在此处输入图像描述](../Images/c9486b6b0a269799d3dfff537faaadc3.png)

在那个 liog 文件中，一个例外是这样的

```
 !ENTRY org.eclipse.osgi 4 0 2013-02-05 15:19:06.515
!MESSAGE Application error
!STACK 1
java.lang.IllegalStateException: Unable to acquire application service. Ensure that the org.eclipse.core.runtime bundle is resolved and started (see config.ini).
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

那么如何解决这个问题？？？？

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:02:53.723

看来你有问题`eclipse.core.runtime`我会重新安装IDE。

# iphone - 如何在 UIToolBar 中添加条形按钮

> ID：14704686
> 
> 赞同：2
> 
> 时间：2013-02-05T10:00:28.477
> 
> 标签：iphone, ios, objective-c, ios6

我创建了一个`UIToolBar`并想在其中添加三个项目，例如联系人、日期和消息。我试过了，但我做不到。请帮助，因为我是新手`Objective C`。这是我的`"ViewController.m"`

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];
UIToolbar *toolbar = [[UIToolbar alloc] init];
toolbar.frame = CGRectMake(0, 414, self.view.frame.size.width, 44);
UIBarButtonItem *contact = [[UIBarButtonItem alloc]   initWithBarButtonSystemItem:UIBarButtonSystemItemEdit target:self action:nil];
UIBarButtonItem *message = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:nil];

NSMutableArray *items = [[NSMutableArray alloc] initWithObjects:contact,message, nil];
[toolbar setItems:items animated:NO];
[items release];
[self.view addSubview:toolbar];
[toolbar release];
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
}

@end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T10:02:34.300

在以下代码中，我 `UIBarButton`用**flexSpace**添加了两个..
**您可以根据需要添加 UIBarButton**

```
UIToolbar *Toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    Toolbar.barStyle = UIBarStyleBlackTranslucent;
    [Toolbar sizeToFit];

     NSMutableArray *barItems = [[NSMutableArray alloc] init];
    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    [barItems addObject:flexSpace];
    [flexSpace release];

    UIBarButtonItem *btnCancel = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(Cancel)];
    [barItems addObject:btnCancel];

    UIBarButtonItem *btnDone = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleBordered target:self action:@selector(done)];
    [barItems addObject:btnDone];

    [Toolbar setItems:barItems animated:YES]; 
```

**点击栏按钮时调用以下方法**

```
-(void)Cancel
{
  // Write Code for Cancel Method
}

-(void)done
{
  // Write Code for Done Method
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T10:23:16.737

试试这个...

```
UIToolbar *myToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 300, 44)];
    myToolbar.barStyle = UIBarStyleBlackOpaque;

    UIBarButtonItem *flexibleSpaceLeft = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

    UIBarButtonItem *contactBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(contact:)];

UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

 UIBarButtonItem *dateBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(date:)];

UIBarButtonItem *flexibleSpaceRight = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

 UIBarButtonItem *msgBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(message:)];

[myToolbar setItems:[NSArray arrayWithObjects: flexibleSpaceLeft, doneBtn, flexibleSpace, dateBtn, flexibleSpaceRight, msgBtn, nil]]; 
```

# iphone - UIScrollView 的触摸事件

> ID：14704688
> 
> 赞同：0
> 
> 时间：2013-02-05T10:00:37.473
> 
> 标签：iphone, uiscrollview, xcode4.5

如何获取 UIScrollView 的触摸事件。我有一个 UIViewController，我在 viewController 中放置了一个 scrollView。我需要将 imageViews 添加到 scrollView，如果单击特定图像，它应该重定向到其相应的 viewController。我知道如何将触摸事件添加到 UIViewController。但这不适用于滚动视图。

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch= [touches anyObject];
    if ([touch view] == img1)
    {

        ViewController2 *viewController2=[[ViewController2 alloc]initWithNibName:@"ViewController2" bundle:nil];
        [self presentViewController: viewController2 animated:YES completion:nil];

    }
} 
```

如何获得滚动视图的触摸事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:03:14.317

设置如下：

```
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTapGestureCaptured:)];
[scrollView addGestureRecognizer:singleTap];    

and you get the touch in:

- (void)singleTapGestureCaptured:(UITapGestureRecognizer *)gesture
  { 
    CGPoint touchPoint=[gesture locationInView:scrollView];
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:03:15.253

您可以使用 ScrollViewDelegate 并且可以使用函数“ScrollViewDidScroll”来获取滚动视图滚动事件。

设置点击手势识别器：

```
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTapGestureCaptured:)];
[scrollView addGestureRecognizer:singleTap];   

- (void)singleTapGestureCaptured:(UITapGestureRecognizer *)gesture
  { 
    CGPoint touchPoint=[gesture locationInView:scrollView];
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:02:19.383

做到这一点的唯一方法是创建一个自定义`UIScrollView`您的自定义`UIScrollView`将是`UIScrollView`.

此外，您可以查看更多[选项](https://stackoverflow.com/questions/5216413/uiscrollview-getting-touch-events)

# jwplayer - 从头开始播放而不加载整个文件 + 能够流式传输文件的未加载部分

> ID：14704690
> 
> 赞同：0
> 
> 时间：2013-02-05T10:00:41.887
> 
> 标签：jwplayer

我有 JWPlayer 版本：5.8.2011

当我流文件播放器需要完全加载文件，直到它开始播放时，我试图找到一种方法让它从一开始就开始播放文件并继续加载。我还需要另一件事。

我想要实现的另一件事是能够流式传输文件的不同部分，假设尚未加载 3:20，但是当我单击它时，我希望播放器立即开始播放 3:20 并从中加载.

互联网上几乎到处都有这样的东西，我认为它只是一个网站应该提供的正常要求，我还没有做到这一点

```
jwplayer("stream").setup({
    flashplayer: "http://xxx/views/default/js/jwplayer/player.swf",
    provider:"video",
    file: "http://xxx/stream/tcNEJlYrSj2WsU5U",
    image: "http://xxx/stream/sYPCUgIMYCMsP3RM",
    screencolor: "000000",
    width: "640",
    height: "360",
    stretching: "uniform",
    skin: "http://xxx/views/default/js/jwplayer/skins/lulu.zip",
}); 
```

我在 Fatcow.com 进行托管，请告诉我一些事情，如果他们对服务器也有任何要求，我需要请托管服务提供商为我提供。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T17:58:30.673

在播放之前需要完全下载文件是关于文件如何编码的问题。

如果您的 MP4 文件在完全下载之前无法搜索，则必须修复位于视频末尾的 MOOV atom（它包含搜索信息）。使用这个小应用程序来解析您的视频并添加必要的提示点。

[http://renaun.com/blog/2010/06/qtindexswapper-2/](http://renaun.com/blog/2010/06/qtindexswapper-2/)

# windows-8 - 为基于 Intel 的处理器和基于 ARM 的处理器开发 Metro 风格应用程序

> ID：14704695
> 
> 赞同：-1
> 
> 时间：2013-02-05T10:01:02.333
> 
> 标签：windows-8, microsoft-metro, arm, c#-5.0, conditional-compilation

我想问一下，当我为基于 Intel 的处理器设备或基于 ARM 的处理器开发 Metro 风格应用程序时，是否有任何区别？

代码有限制吗？还是某些 API 不起作用？或者我可以只编写一个 Windows 8 Metro 风格的应用程序并在*两者*上运行它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:33:56.717

如果您使用 C#，则可以为这两个平台编译，而无需跳过任何特殊的环节。仅当您使用具有特定平台相关代码的库（如今已不多）时，您才需要小心。

在 API 中，我也没有遇到仅限于其中一个平台的功能。

# java - 为什么这不覆盖类构造函数？

> ID：14704699
> 
> 赞同：0
> 
> 时间：2013-02-05T10:01:26.067
> 
> 标签：java

```
public class ExtAA extends AA {
   static int iTime;

   public static void main(String argv[]) {
       ExtAA d = new ExtAA();
       d.func(iTime);
   }

   public static void func(int iTime) {
      System.out.println(iTime);
   }

   public ExtAA() { }
}

class AA {
   public AA() { System.out.println("AA");  }
} 
```

印刷：

```
AA
0 
```

我本来希望`public ExtAA() { }`覆盖构造函数`AA`，因此不打印 AA，只是`0`. 有人可以解释我错在什么地方，如果我想覆盖构造函数，我该怎么办？

PS 我的问题完全有可能是愚蠢的，但我不明白 public `ExtAA()`{ } 应该或可以做什么。这是在测试中，我搞砸了，我想知道实际发生了什么（是的，我确实进入调试并逐步检查它，我只是不知道为什么`new ExtAA`使用`AA`而不是它自己定义的构造函数）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T10:03:05.017

Java中超类的构造函数总是被调用。你不能阻止它。如果有更多构造函数，您可以控制调用哪个构造函数。

请考虑阅读一些 Java 基础教程，这是 Java OOP 的基本内容。

隐含地，您的构造函数如下所示：

```
public ExtAA() {
    super(); // Constructor of super class call, always first line of code in child constructor
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T10:05:36.860

想象一下，如果您可以从基础中跳过构造函数。它可能会使对象的父部分处于极其不稳定的状态。

考虑基类在构造函数中进行某种有意义的初始化的情况。如果这没有完成，那么你的对象的基类部分突然就在疯狂的城镇。这几乎肯定是 Java 决定这样工作的原因。

作为一个非常简单的例子，想象一下如果你有一个扩展 ArrayList 的 SortedArrayList 类。如果 SortedArrayList 不知何故没有调用任何 ArrayList 构造函数，你认为对象的内部结构有意义吗？在某个地方会有一个无效的数据结构，这意味着事情会崩溃和燃烧。在某些情况下，重写构造函数可能是有意义的，但显然 Java 人认为不值得冒意外这样做的风险（而且在设计良好的类图中*很少*有意义——如果子类以某种方式不依赖于基类，那为什么要从子类开始呢？）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T10:06:54.607

一个对象有它自己的类的字段加上它的父类、祖父类的所有字段，一直到根类Object。必须初始化所有字段，因此必须调用所有构造函数！Java 编译器会在构造函数链接过程中自动插入必要的构造函数调用，或者您可以显式地进行。

# c# - 是否有命名缓存键的规则

> ID：14704702
> 
> 赞同：0
> 
> 时间：2013-02-05T10:01:34.847
> 
> 标签：c#, asp.net, caching

是否有任何规则为我们在 ASP.Net 中使用的缓存键提供正确的名称。

```
 string cacheKey = "aaaabbbbbsssssssss";
 ObjectCache cache = MemoryCache.Default;
 CacheItemPolicy cacheItemPolicy = new CacheItemPolicy();
 cacheItemPolicy.AbsoluteExpiration = DateTime.Now.AddDays(15);
 cache.Add(cacheKey, definitions, cacheItemPolicy); 
```

这里的cacheKey =需要是任何字符串..我关心**“cacheKey”的值**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:11:32.113

如果你在谈论`HttpContext.Current.Cache`，那么没有。一般来说，使用此缓存的是您的应用程序，因此您可以完全控制您所说的键。

也就是说：如果您担心冲突（例如，您正在使用的其他程序集之间），请考虑使用命名空间限定名称——拥有缓存值的类的类型名可能有效。或者，您可以使用 URI - 它们适用于相对唯一的名称，因为人们不太可能毫无意义地使用您的域名。当然，总是有 GUID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:05:07.930

你的意思是说在mvc中使用的动作过滤器我猜它像一个属性一样使用

[输出缓存（10）]

或者

在派生类中重写时，尝试将缓存条目作为 CacheItem 实例插入缓存，并添加有关应如何驱逐该条目的详细信息。（继承自 ObjectCache。）

# php - 我想将变量发送到 R，然后 R 将图像发送到浏览器

> ID：14704703
> 
> 赞同：0
> 
> 时间：2013-02-05T10:01:34.267
> 
> 标签：php, ajax, image, r, rapache

我正在开发一个将 R 环境与 RApache 结合使用的 Web 应用程序。我使用 AJAX.updater 函数将几个变量发送到 R 脚本，然后返回给浏览器一个 ResponseText 以显示。没有问题，但现在我希望将变量发送到绘制图形的 R 脚本，然后我想将图像返回到浏览器。

我可以在浏览器中显示 R 使用该脚本绘制的图像，例如：

```
 <% setContentType("image/png")
t <- tempfile()

load(file="/var/www/oraculo/brew/ICER")

png(t, width=3.25, height=3.25, units="in", res=1200, pointsize=4)
plot(G,vertex.size=1,vertex.label=NA)
dev.off()
sendBin(**readBin**(t,'raw',n=file.info(t)$size))
unlink(t)

DONE
%> 
```

另一个发送变量并返回文本字符串的脚本：

```
new  Ajax.Updater( 'numFermin', '../brew/shortestPath.rhtml',
            {
                'method': 'GET', 
                'parameters': {'autini': autini, 'autfin':centro, 'XarXaj':                    red},
                'onSuccess': function(transport) {

                         txtRespuesta = transport.responseText;

                         if (txtRespuesta.lastIndexOf("Error")==-1){
                            var rutaMin = transport.**responseText**;
                            var accion = "";
                                    var url    = "index.src.php?accion=obtener&rutaMin="+rutaMin+"&numF=1";         
                            document.getElementById("oculto1").src=url;
                         }else{
                                                 ... 
```

使用 RApache 的 GET 变量，我可以在 R 脚本中使用“autini”。

一种可能的解决方案是将图像保存在文件中，但我不太喜欢它。有什么办法可以将“ **readbin** ”中读取的比特流放入“ **responseText** ”中，然后在php中构建图像？我应该使用 AJAX 的哪个功能？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:18:42.570

我用安装在服务器上的 FastRWeb 和 Rserve 解决了类似的问题，使用 jquery.js 在你的 html 页面中传递这样的 json 格式数据。如果使用此解决方案，一个重要的细节是，如果您尝试使用 $.ajax 检索二进制数据，您将需要复制 jquery.js 并修复 2 行，如[http://bugs.jquery.com/ticket/11461中所述](http://bugs.jquery.com/ticket/11461)

```
 var myjsondata = '{ "entries": { "Labels": "MyTitle","Order": "1,2,3", "Class": "AM,PM,XF","Hwy": "29,29,31,20,29,26,29,29,24,44,29,26,29,32,49,29,23,24,44,41,29,26,28,29,39,29,28,29,26,26" } }';

   var request = $.ajax({         
        url: "http://Rserverip/cgi-bin/R/myboxplot",
        type: "POST",             
        xhrFields: {
              responseType : "arraybuffer"
        },
        contentType: "application/x-www-form-urlencoded; charset=UTF-8",
        dataType:  "binary",
        processData: false,
        crossDomain : true,
        data: myjsondata 
      });

    request.done(function(msg,ret_status,xhr) {
        var uInt8Array = new Uint8Array(msg);
            var i = uInt8Array.length;
            var binaryString = new Array(i);
            while (i--)
            {
              binaryString[i] = String.fromCharCode(uInt8Array[i]);
            }
            var data = binaryString.join('');
            var base64 = window.btoa(data);
            $(img).attr('src', "data:image/png;base64,"+base64 );
       }); 
```

在服务器端，您将需要一个名为 myboxplot.R 的 R 程序，其中包含（例如）以下代码：

```
 run <- function(MyTable) {
 # read json into data frame
 mytmp <- fromJSON(rawToChar(.GlobalEnv$request.body))
 axes <- sapply(strsplit(json_data[['entries']][['Labels']], ",") , as.character)
 x <- sapply(strsplit(json_data[['entries']][['Class']], ",") , as.character)
 y <- sapply(strsplit(json_data[['entries']][['Hwy']], ",") , as.numeric )
 z <- sapply(strsplit(json_data[['entries']][['Order']], ",") , as.numeric ) 
 mydata <-  data.frame(x,y,z)
 mydata$count <- ave(as.numeric(mydata$x), mydata$x, FUN = length)
 #add the count to the x label
 mydata$x <- factor(do.call(paste, c(mydata[c("count", "x" )], sep = "]-")))
 mydata$x <- paste( "[",mydata$x, sep = "" ) 
 #reorder by z which is the order number
 mydata$reord <- reorder(mydata$x, mydata$z)
 p <- WebPlot(1191, 842)  # A3
 print( ggplot(mydata, aes(reord,y) ) + geom_boxplot (aes(fill=reord), alpha=.25, width=1, outlier.colour = "green") + labs(x = axes[1], y = axes[2]) + scale_fill_discrete(name=axes[3]) + stat_summary(aes(label=sprintf("%.02f",..y..)), fun.y=mean, geom="text", size=3) + theme_bw() + theme(axis.title.x = element_text(face="bold", colour="#990000", size=14, vjust = -1), axis.text.x  = element_text(angle=-90, hjust=1, size=12), plot.margin=unit(c(1,1,1.5,1),"lines"))  )
 p 
 } 
```

阅读 FastRweb 文档，了解该程序的放置位置以及如何设置 FastRWeb。

在服务器端需要更少设置的更简单的解决方案是使用 R websockets 包。对我来说工作得很好。

# c++ - 如何正确链接提升？

> ID：14704704
> 
> 赞同：1
> 
> 时间：2013-02-05T10:01:36.877
> 
> 标签：c++, linker

> **可能重复：**
> [GCC：使用 OpenSSL 的 SHA256 函数](https://stackoverflow.com/questions/13784434/gcc-use-openssls-sha256-functions)

尽管我指定了 boost，但我不断收到这些链接器错误。

```
~/cli$ make
g++ -pthread -lboost_system-mt -lboost_program_options-mt -lboost_thread-mt
-lboost_filesystem-mt ./main.o -o cli
./main.o: In function `main':
/home/mistapink/cli/main.cpp:123: undefined reference to
`boost::program_options::options_description::m_default_line_length' 
```

该系统是 32 位的 Ubuntu。boost 库是`/usr/lib/`随 aptitude 一起安装的。

谁能告诉我我做错了什么？我对此有点迷茫。

# design-patterns - 我应该尝试在 MacRuby 中实现 MVVM 模式，还是有另一种更适合的模式？

> ID：14704706
> 
> 赞同：0
> 
> 时间：2013-02-05T10:01:41.840
> 
> 标签：design-patterns, user-interface, mvvm, macruby

我正在使用 MacRuby 创建一个小型 GUI 应用程序，并且由于我来自 .NET 世界 (WPF)，因此我想在我的应用程序中使用 MVVM 模式。但我不确定是否可以使用 Ruby 走 MVVM 方式，因为在 MacRuby 生态系统中可能还有另一种更合适的方式。那么我应该使用 MVVM 还是其他任何东西来创建精益关注分离类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:15:13.463

对于 Cocoa 框架，[MVC 设计模式](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html)是良好设计的核心。

这是关于[MVC 和 MVVM 之间差异](https://stackoverflow.com/questions/667781/what-is-the-difference-between-mvc-and-mvvm)的讨论。

# csv - CSV 文件中的多级/嵌套标题

> ID：14704712
> 
> 赞同：4
> 
> 时间：2013-02-05T10:01:57.557
> 
> 标签：csv, export-to-csv

请问如何在 CSV 文件中“制作”多级/嵌套标题？

例子：

```
-----------------------------------------
|        Big 1      |        Big 2      |
-----------------------------------------
| Small A | Small B | Small C | Small D |
-----------------------------------------
|                  ...                  | 
```

# c# - 寻找孩子的孩子

> ID：14704713
> 
> 赞同：0
> 
> 时间：2013-02-05T10:01:59.747
> 
> 标签：c#, wpf, parent-child

我有以下代码 -

```
WebBrowser bw = new WebBrowser();
Grid gr = new Grid();
gr = ((ClosableTab)tabControl1.Items[tabControl1.SelectedIndex]).Content as Grid;
Grid grc = new Grid();
grc = gr.Children[1] as Grid;
bw = grc.Children[0] as WebBrowser;
bw.Source = new Uri(txtBoxUrl.Text); 
```

但是我能够满足我的要求，但所有元素都是硬编码的。我知道有更好的方法和一行代码。请建议一个标准代码来执行此操作。

**更新**

```
<TabControl x:Name="tabControl1" FontWeight="UltraBlack" BorderThickness="1" BorderBrush="Black" Background="LightBlue" >
            <local:ClosableTab Background="LightBlue" Title="Preview" x:Name="PreviewWindow">
                <Grid>
                    <Border Name="mask" Background="Black" CornerRadius="5"/>
                    <Grid>
                        <Grid.OpacityMask>
                            <VisualBrush Visual="{Binding ElementName=mask}"/>
                        </Grid.OpacityMask>
                        <WebBrowser Name="webBrowser" Source="http://www.google.com" Margin="0" />
                    </Grid>
                </Grid>
            </local:ClosableTab>
            <local:AddableTab Background="LightBlue">
                Click '+' to add a New Tab
            </local:AddableTab>
        </TabControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:20:56.547

您可以使用辅助函数按名称查找孩子。试试这个[答案](https://stackoverflow.com/a/1759923/799558)

然后，您可以像这样调用该函数：

```
DependencyObject parent = tabControl1.Items[tabControl1.SelectedIndex])
WebBrowser wb = UIHelper.FindChild<WebBrowser>(parent, "WebBrowser");
wb.Source = new Uri(txtBoxUrl.Text); 
```

# loops - 处理 ArrayIndexOutOfBoundsException

> ID：14704715
> 
> 赞同：0
> 
> 时间：2013-02-05T10:02:00.280
> 
> 标签：loops, switch-statement, processing

我正在为我正在制作的具有三种状态的交互式图形编写一些代码。我使用 switch 语句在展示一系列图像的状态之间移动。我上传了所有图像，但是当我调用一个包含 8 个图像数组的状态时，我上传了一条错误消息：`ArrayIndexOutOfBoundsException 8`

即使我的草图中加载了正确数量的图像，我似乎也无法摆脱它。

下面是我的代码，我正在使用 Processing 2.0b7 开发 Macbook Pro OSX

```
PImage[] teams;
int n = 24;
PImage[] teams2;
int m = 16;
PImage [] quarterFinalWinners;
int o = 7;
PImage bg;
float damping = 0.1;
PFont font;
String[] positions, prevPositions;
float x;
float y;

int afconState = 3;

/**----------------------------------------------------------------------------------------------------------------------------**/

public void setup() {
  size(600, 1600);
   bg = loadImage("football-pitch-hi.png");

  positions = new String[]{"18", "26", "32", "45", "58", "56", "59", "61", "66", "69", "71", "85", "98", "100", "116", "133"};
  prevPositions = new String[]{"14", "19", "25", "30", "34", "45", "52", "69", "71", "72", "87", "84", "89", "105", "107", "110"};
  int a = 16;

  font = loadFont("Calibri-Bold-48.vlw");
  textFont(font);

  frame.setResizable(true);

  teams = new PImage[n];
    for (int i = 0; i < teams.length; i++) {
      teams[i] = loadImage(i + ".png");
    }

  teams2 = new PImage[m];
    for (int i = 0; i < teams2.length; i++) {
      teams2[i] = loadImage(i + ".gif");
    }

   quarterFinalWinners = new PImage[o];
    for (int o = 0; o < quarterFinalWinners.length; o++); {
   quarterFinalWinners[o] = loadImage(o + "_.png");
   }
}

/**----------------------------------------------------------------------------------------------------------------------------**/

void draw() {
  background(#000000);
  if ((x < width) && (y < height)) {
for (int i = 0; i < 16; i++);
    }

  }

/**----------------------------------------------------------------------------------------------------------------------------**/

public void keyPressed() {
  noLoop();

  switch(afconState) {
  case 1:
   afconState = 1;
   background(#000000);
  for (int i = 0; i < 16; i++) {
  image(teams[i], 150, 60*i);
  }
  }

  if ((key == 's') || (key == 'S')) {

    afconState = 2;
    background(#000000);
  for (int i = 0; i < 16; i++) {
  image(teams2[i], 150, 60*i);
  }
  }

  else if ((key == 'q') || (key == 'Q')) {
    afconState = 3;
    background(#000000);
  for (int i = 0; i < 16; i++) {
  image(quarterFinalWinners[i], 150, 60*i);
  }
  }
  break;

/**----------------------------------------------------------------------------------------------------------------------------**/    
    case 2:
    if((key == 's') || (key == 'S')) {

    afconState = 2;
  background(#000000);
  for (int i = 0; i < 16; i++) {
  image(teams2[i], 150, 60*i);
  }
  }

  else if ((key == 'q') || (key == 'Q')) {
    afconState = 3;
  for (int i = 0; i < 16; i++) {
  image(quarterFinalWinners[i], 150, 60*i);
  }
  }

  break;

  case 3:
  background(#000000);
  if ((key == 'q') || (key == 'Q')) {
    afconState = 3;
  for (int i = 0; i < 16; i++) {
  image(quarterFinalWinners[i], 150, 60*i);
  }
  }

  else if((key == 's') || (key == 'S')) {

    afconState = 2;
  background(#000000);
  for (int i = 0; i < 16; i++) {
  image(teams2[i], 150, 60*i);
  }
  }

  break;

  default:
  afconState = 1;
   background(#000000);
  for (int i = 0; i < 16; i++) {
  image(teams[i], 150, 60*i);
  }  

  if ((key == 's') || (key == 'S')) {
    afconState = 2;
  // modify the positions list
  for (int i = 0; i < 16; i++) {
  image(teams2[i], 150, 60*i);
  }
  }

  else if ((key == 'q') || (key == 'Q')) {
    afconState = 3;
  for (int i = 0; i < 16; i++) {
  image(quarterFinalWinners[i], 150, 60*i);
  }
  }

  }
  redraw();
}

void mousePressed () {
      // revert to previous array. We can only do this once.
  // if someone pressed the key seven times, we can't revert
  // seven times, because the code only has one history state
  // that is updated every time a key is pressed
  // redraw now that our state has changed

  redraw();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:05:36.013

大多数语言从 0 开始索引（即 8 项将被索引为 0 到 7） - 看起来您正在尝试引用索引为 8 的数组项，该数组项可能不存在。

# javascript - FileContentResult 不在视图中显示图像

> ID：14704717
> 
> 赞同：0
> 
> 时间：2013-02-05T10:02:19.197
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-4

我有一个控制器，它在调用时会创建一个文件内容结果，但是当我尝试将其设置为图像的源时，图像不会显示。我已经使用 firebug 进行调试，并且已经看到某些内容返回到视图中，但看起来它认为它无效。

控制器

```
 [HttpPost]
    public ActionResult BespokeAnalysis(MemberModel model)
    {

        if (ModelState.IsValid)
        {
            var CostVariations = CostVariationRepository.GetAll();
            if (model.SelectedYears != null && model.SelectedTypes != null && model.SelectedCostTypes != null)
            {
                var variations = CostVariations.Where(m => model.SelectedYears.Contains(m.Year));
                variationresults = variations.Where(m => model.SelectedTypes.Contains(m.CategoryId)).ToList();
                selectedtypes = model.SelectedCostTypes.ToList();

            }
        }

return Json(new { chartUrl = Url.Action("CreateChart", "Member", new { chartType = SeriesChartType.Column, selectedtypes = selectedtypes, variationresults = variationresults }) });
    } 
```

剧本：

```
 $(function () {
        $('form').submit(function () {

                $.ajax({
                    url: this.action,
                    type: this.method,
                    data: $(this).serialize(),
                    success: function (result) { 

                      $('#result').html(
                            $('<img/>', {
                                src: result.chartUrl,
                                alt: 'this is a super chart'
                            })
                        );

                    }
                });
                return false;

        });
    }); 
```

风景：

```
 <div id="slideleft" class="tslide">
          <div id="result"></div>
          <img id="image" src="" alt="none"/>
          @using (Html.BeginForm())
          {
          <div class="inner"><a href="#" class="toggle">Parameters</a>
             <div class="dropdowntoggle">
                <div class="buttonnarrow">Select</div>
                <div class="ui-widget-content">
                    @Html.CheckBoxListFor(model => model.SelectedSectors, new MultiSelectList(Model.Sectors, "Id", "Name", Model.SelectedSectors))                          
                </div>
             </div>
              </div>
             <input type="submit" value="Create" onfocus="this.blur()" class="createbutton"/>
          </div>
          }
       </div> 

   </div> 
```

返回 ActionResult 的方法

```
 public ActionResult CreateChart(SeriesChartType chartType)
    {
        Chart chart = new Chart();
        chart.Width = 700;
        chart.Height = 400;
        chart.BackColor = Color.FromArgb(211, 223, 240);
        chart.BorderlineDashStyle = ChartDashStyle.Solid;
        chart.BackSecondaryColor = Color.White;
        chart.BackGradientStyle = GradientStyle.TopBottom;
        chart.BorderlineWidth = 1;
        chart.Palette = ChartColorPalette.BrightPastel;
        chart.BorderlineColor = Color.FromArgb(26, 59, 105);
        chart.RenderType = RenderType.BinaryStreaming;
        chart.BorderSkin.SkinStyle = BorderSkinStyle.Emboss;
        chart.AntiAliasing = AntiAliasingStyles.All;
        chart.TextAntiAliasingQuality = TextAntiAliasingQuality.Normal;

        foreach (var type in selectedtypes)
        {
            switch (type)
            {
                case 1:
                    foreach (var result in variationresults)
                    {
                        Dictionary<string, double> retVal = new Dictionary<string, double>();
                        retVal.Add("Stuff1", Math.Round(result.Stuff1, 3, MidpointRounding.ToEven));
                        chart.Series.Add(CreateSeries(retVal, result.Description + type, Color.Lavender, chartType));
                    }
                    break;
                case 2:
                    foreach (var result in variationresults)
                    {
                        Dictionary<string, double> retVal = new Dictionary<string, double>();
                        retVal.Add("Stuff2", Math.Round(result.Stuff2, 3, MidpointRounding.ToEven));
                        chart.Series.Add(CreateSeries(retVal, result.Description + type, Color.Aqua, chartType));
                    }
                    break;
                case 3:
                    foreach (var result in variationresults)
                    {
                        Dictionary<string, double> retVal = new Dictionary<string, double>();
                        retVal.Add("Stuff3", Math.Round(result.Stuff3, 3, MidpointRounding.ToEven));
                        chart.Series.Add(CreateSeries(retVal, result.Description + type, Color.Azure, chartType));
                    }
                    break;
                case 4:
                    foreach (var result in variationresults)
                    {
                        Dictionary<string, double> retVal = new Dictionary<string, double>();
                        retVal.Add("Stuff4", Math.Round(result.Stuff4, 3, MidpointRounding.ToEven));
                        chart.Series.Add(CreateSeries(retVal, result.Description + type, Color.Bisque, chartType));
                    }
                    break;
                    default:
                    foreach (var result in variationresults)
                    {
                        Dictionary<string, double> retVal = new Dictionary<string, double>();
                        retVal.Add("Crew Other", Math.Round(result.Crew_Other, 3, MidpointRounding.ToEven));
                        chart.Series.Add(CreateSeries(retVal, result.Description + type, Color.Lavender, chartType));
                    }
                    break;
            }

        }

        chart.ChartAreas.Add(CreateChartArea());

        using (var ms = new MemoryStream())
       {
           chart.SaveImage(ms, ChartImageFormat.Png);
           ms.Seek(0, SeekOrigin.Begin);

           return File(ms.ToArray(), "image/png", "Variations.png");
       }                      
    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:13:10.450

您的问题中有太多不必要的噪音。我将尝试简化事情并举例说明如何使用这个 Chart 类。

我将从编写一个自定义 ActionResult 开始，它将图表呈现给响应，而不是使用一些丑陋的 MemoryStreams（顺便说一下，你正在处理，也不是在将它传递给`FileResult`类之前移动）：

```
public class ChartResult : ActionResult
{
    private readonly Chart chart;
    public ChartResult(Chart chart)
    {
        this.chart = chart;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        var httpContext = context.RequestContext.HttpContext;
        var response = httpContext.Response;
        response.ContentType = "image/png";
        chart.SaveImage(response.OutputStream, ChartImageFormat.Png);
    }
} 
```

接下来我们可以有一个控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    [HttpPost]
    public ActionResult GetChartUrl()
    {
        return Json(new { chartUrl = Url.Action("Chart") });
    }

    [OutputCache(Duration = 0, Location = OutputCacheLocation.None)]
    public ActionResult Chart()
    {
        var chart = BuildChart();
        return new ChartResult(chart);
    }

    private Chart BuildChart()
    {
        Chart chart = new Chart();
        chart.Width = 700;
        chart.Height = 400;

        var series = new Series("Some stuff")
        {
            ChartType = SeriesChartType.Line,
            ChartArea = "MyArea"
        };
        for (int i = 0; i < 100; i++)
        {
            series.Points.AddXY(i, 3 * i);
        }
        chart.Series.Add(series);
        chart.ChartAreas.Add("MyArea");
        return chart;
    }
} 
```

最后是一个观点：

```
@using (Html.BeginForm("GetChartUrl", null))
{
    <button type="submit">Submit this form using AJAX and show chart dynamically</button>
}

<script type="text/javascript">
    $('form').submit(function () {
        $.ajax({
            url: this.action,
            type: this.method,
            data: $(this).serialize(),
            success: function (result) {
                $('#image').html(
                    $('<img/>', {
                        src: result.chartUrl,
                        alt: 'this is a super chart'
                    })
                );
            }
        });
        return false;
    });
</script>

<div id="image"></div> 
```

# java - 我的 JFrame 不刷新

> ID：14704719
> 
> 赞同：1
> 
> 时间：2013-02-05T10:02:22.550
> 
> 标签：java, swing, jframe

有谁知道如何刷新我的`JFrame`，所以我可以显示我的新的`JButton`？

```
private void displayGrid()
{
   Case arrayGrid [][] = Grid.returnArray();

   for(int i = 0; i < Settings.returnYGrid(); i++)
    {
        for(int j = 0; j < Settings.returnXGrid(); j++)
        {
             Case caase = arrayGrid [i][j];
             panel.add(caase.getButton());
        }
} 
```

这是我创建`JFrame`. 然后，我想`JFrame`用同样的方法刷新我的，因为`Case`我的一些`arrayGrid`已经改变并且什么都没有发生......

我试图设置`revalidate()`，`repaint()`也没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:12:01.563

尝试在方法的末尾添加对`revalidate`和的调用...`repaint`

```
private void displayGrid()
{
   Case arrayGrid [][] = Grid.returnArray();

   for(int i = 0; i < Settings.returnYGrid(); i++)
    {
        for(int j = 0; j < Settings.returnXGrid(); j++)
        {
             Case caase = arrayGrid [i][j];
             panel.add(caase.getButton());
        }
    }
    panel.revalidate();
    panel.repaint();
} 
```

**更新了工作示例**

```
public class TestFrame02 {

    public static void main(String[] args) {
        new TestFrame02();
    }

    public TestFrame02() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                final JPanel panel = new JPanel(new GridLayout(0, 4));
                JButton update = new JButton("Update");
                update.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        for (int index = 0; index < 20; index++) {
                            panel.add(new JLabel(Integer.toString(index)));
                        }
                        panel.revalidate();
                        panel.repaint();
                    }
                });

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(panel);
                frame.add(update, BorderLayout.SOUTH);
                frame.setSize(100, 100);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

} 
```

# activerecord - Yii 框架 CActiveRecord

> ID：14704720
> 
> 赞同：1
> 
> 时间：2013-02-05T10:02:24.733
> 
> 标签：activerecord, constructor, yii, overriding, http-status-code-404

我想制作一个通用的 CActiveRecord 可以与任何表一起操作。我添加了一个班级成员`$table`并覆盖`tableName()`

```
public function tableName()
{

    return $this->table;

} 
```

在最后一步中，我覆盖了 c-tor：

```
public function __construct($table , $scenario = 'insert')
{

    $this->table = $table;
    parent::__construct($scenario);

} 
```

CActiveRecord 的 c-tor 调用 a`tableName()`所以我们必须在调用它之前定义表名。

我很确定这会正常工作，但是`404 Not Found`在尝试创建我的类的实例时我得到了一个：

```
$foo = new Foo('table_foo'); 
```

Yii 没有显示错误，php 也没有，只是 404 错误...如果我删除此行，应用程序将完美运行...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:50:53.467

如果你有 nginx 404 这**不是**yii 问题。检查你的重写规则。也许，当您遇到应用程序错误时，会发生一些导致 404 的重定向？

另外我认为你不应该像那样过度使用 ctor。您在开始时将参数添加到 ctor，因此一些 yii 内部实例可能会`insert`作为第一个参数传递，在您的情况下它将作为表名！

# gwt - 谷歌地图 V3 调整大小

> ID：14704723
> 
> 赞同：0
> 
> 时间：2013-02-05T10:02:32.753
> 
> 标签：gwt, google-maps-api-3

我是 gwt-maps-3.8.0 v3 的新手，如果我尝试在多个窗口中显示地图，它不会完全显示，而是在窗口中显示一半的地图。请检查我的代码，并告诉我是否缺少任何东西..

```
public class MapTest extends HorizontalPanel {
    GoogleMap map;
    VerticalPanel mapVp = new VerticalPanel();

    public MapTest(){
        mapVp.setSize(String.valueOf(BodyPanel.bodyWidth - 505),
                      String.valueOf(BodyPanel.bodyHeight + 5));
        LatLng myLatLng = LatLng.create(30.440099, 36.843498);
        MapOptions myOptions = MapOptions.create();
        myOptions.setZoom(5);
        myOptions.setCenter(myLatLng);
        myOptions.setMapTypeId(MapTypeId.TERRAIN);
        myOptions.setMapTypeControl(true);
        map = GoogleMap.create(mapVp.getElement(), myOptions);
        add(mapVp)
    }
} 

TabItem tabItem = new TabItem("MapTest");
tabItem.add(new MapTest()); 
```

这显示了完整的地图...当我执行相同的代码并将其添加到另一个选项卡中时，它会减小地图大小..尝试解决此问题，请帮助...即，再次初始化 tabitem 并尝试添加相同的其他选项卡中的页面为

```
tabItem = new TabItem("MapTest");
tabItem.add(new MapTest()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:30:16.293

我通过在使用 GWT 计时器加载地图时添加延迟来解决这个问题。参考[Joomla](https://stackoverflow.com/questions/8735740/setting-google-map-v3-size-on-map-options-solved)解决方案并在 GWT 中实现...这里是[链接](http://www.ameenit.blogspot.in/2013/02/maps-v3gwt-maps-380-using-gwt-240.html)

# c# - 电子邮件更改发件人：地址

> ID：14704725
> 
> 赞同：0
> 
> 时间：2013-02-05T10:02:33.220
> 
> 标签：c#, asp.net, contact-form

我正在做一个房产列表网站，现在正在为每个房产准备一份联系表。

由于我的客户还使用了一个票务系统来解析来自专用邮箱的电子邮件，因此我需要将联系表格配置为通过电子邮件发送到专用邮箱，以便他们的系统接收它。我正在使用 ASP C#。

我需要帮助将联系表单中的“发件人”地址更改为表单中的发件人电子邮件地址，代码如下所示：

这是我的 aspx.cs

```
protected void SendMail()
{
    var fromAddress = "email@domain.com";
    var toAddress = "dedicatedmailbox@domain.com";
    const string fromPassword = "password";
    string subject = PropertyNameOnContact.Text.ToString();
    string body = "Subject: Online Enquiry for " + PropertyNameOnContact.Text + "\n";
    body += "Email: " + txtemail.Text + "\n";
    body += "From: " + txtname.Text + "\n";
    body += "Preferred contact Method: \n" + PreferredContact.Text + "\n";

    var smtp = new System.Net.Mail.SmtpClient();
    {
        smtp.Host = "smtp.gmail.com";
        smtp.Port = 587;
        smtp.EnableSsl = true;
        smtp.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
        smtp.Credentials = new System.Net.NetworkCredential(fromAddress, fromPassword);
        smtp.Timeout = 20000;
    }

    smtp.Send(fromAddress, toAddress, subject, body);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:30:50.860

对于这样的联系表格，用户填写的地址绝不应该是用作发件人地址的地址。它应该是回复地址。这样做是为了让接收邮件服务器可以进行正确的验证。

我建议您创建一个对象，您可以在其上设置速记所没有`MailMessage`的所有这些参数。`SmtpClient.Send`在那您可以添加您应该回复的地址，并将发件人地址添加`MailMessage.ReplyToList`为`MailMessage.From`。

该`SmtpClient.Send`方法还接受一个`MailMessage`对象，因此应该相当简单。

这是 MSDN 上的 MailMessage 对象：http: [//msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:08:26.463

众所周知，有两种方法。这不会影响任何现有的流程，试试这个

*   从数据库中获取 From Email-ID (fromAddress)
*   在 Web Config File 中配置 From Email_ID (fromAddress)，您可以为整个应用程序访问它。

您可以随时更改它们。无需更改 C# 源代码。

# javascript - Javascript 正则表达式（提取字符串）

> ID：14704727
> 
> 赞同：0
> 
> 时间：2013-02-05T10:02:35.190
> 
> 标签：javascript, regex, node.js

尽管使用更复杂的正则表达式进行项目，但我总是忘记如何创建简单的正则表达式......

我有字符串：

```
var s = "qwehref=\"1232.css\"qwasd asd asdqq eehref=\"asd.css\"" 
```

我想捕获 href 标签内的文本：`1232.css`和`asd.css`.

我试过这个正则表达式：

```
var re = /href="(.+\.css)"/g 
```

但这是我得到的（`re.exec(s)`）：

```
'1232.css"qwasd asd asdqq eehref="asd.css' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T10:08:18.573

尝试

```
/href="([^"]+\.css)"/g 
```

您不想匹配结束引号作为文件名的一部分。或者只是使用我猜的非贪婪匹配......

```
/href="(.+?\.css)"/g 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T10:08:50.603

贪心问题试试

```
var re = /href="(.+?\.css)"/g 
```

[在 Regexr 上](http://regexr.com?33ljj)查看

量词之后会更改该`?`量词的匹配行为以**尽可能少地匹配**

# azure - 如何确定获取 blob 租约的时间

> ID：14704729
> 
> 赞同：0
> 
> 时间：2013-02-05T10:02:41.977
> 
> 标签：azure

我正在获得关于 blob 的**无限**租约，但希望能够确定任何此类租约可能有多“旧”。即它最初是什么时候获得的？有没有办法确定这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:58:41.777

目前无法通过 API 实现。您需要单独维护它。一种可能是将此信息保存在 blob 的元数据中。当您获得租约时，您会获得日期/时间，然后将其保存为 blob 的元数据之一。

# iphone - 调整条形图的大小

> ID：14704736
> 
> 赞同：1
> 
> 时间：2013-02-05T10:02:53.767
> 
> 标签：iphone, ios, objective-c, image

我正在调整图像大小以使其适合条形图。我需要调整它的大小，因为图像在数据库中，这也用于 android 中的同一个应用程序。问题是这段代码运行良好，`iOS 6.1`但在较低的情况下`5.0 5.1`，我在栏中有一个黑色图像。代码如下：

```
CGSize newSize=CGSizeMake(320,44);
UIGraphicsBeginImageContext(newSize);
[image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
[self.navigationController.navigationBar setBackgroundImage:newImage  forBarMetrics:UIBarMetricsDefault]; 
```

这种错误行为的一些想法？

![好的](../Images/d1e65b2f22ff4dc78af65a3dd7da931d.png)

![坏的](../Images/06461df763a706698c390d052e7f1125.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:13:11.873

**对图像的特定****高度**和**宽度**使用以下方法

 **```
+ (UIImage*)resizeImage:(UIImage*)image withWidth:(int)width withHeight:(int)height
{
    CGSize newSize = CGSizeMake(width, height);
    float widthRatio = newSize.width/image.size.width;
    float heightRatio = newSize.height/image.size.height;

    if(widthRatio > heightRatio)
    {
        newSize=CGSizeMake(image.size.width*heightRatio,image.size.height*heightRatio);
    }
    else
    {
        newSize=CGSizeMake(image.size.width*widthRatio,image.size.height*widthRatio);
    }

    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

此方法返回**NewImage**，具有您指定的特定大小:)
此代码可能对您有帮助:)**

# android - 在 Activity 中查看导致崩溃

> ID：14704738
> 
> 赞同：0
> 
> 时间：2013-02-05T10:02:56.200
> 
> 标签：android, view, crash

我正在尝试使用全屏活动布局。我希望主视图是自定义视图。当我尝试将任何创建新视图类的内容添加到全屏活动类时，它会导致程序在模拟器中运行时崩溃。

我是否必须告诉 xml 文件它是一个自定义类？任何帮助或指示将不胜感激。

错误：02-05 10:11:06.231：E/AndroidRuntime(823)：java.lang.RuntimeException：无法启动活动 ComponentInfo{com.unibitri.zoobies/com.unibitri.zoobies.ZoobiesMain}：android.view.InflateException : 二进制 XML 文件第 14 行：膨胀类 com.unibitri.zoobies.ZooView 时出错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:10:39.887

*   检查你的logcat，它会给你一个关于发生了什么的提示
*   根据日志检查您的自定义视图代码和活动代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:07:45.820

不确定这是否是您的意思...您必须在您的 android xml 文件中正确引用您的自定义视图以进行布局。像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/framelayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

<packagename.CustomView
  android:id="@+id/customView"
  android:layout_width="match_parent"
  android:layout_height="match_parent" />
</FrameLayout> 
```

其中 packagename 类似于 com.example.myapplication 和 CustomView 是您的自定义视图的类名

编辑：确保您的 CustomView 构造函数接受两个参数上下文上下文，AttributeSet attr

```
 public CustomView(Context context, AttributeSet attr) {
        super(context, attr);

    } 
```

# jquery - 打开具有特定日期的日期选择器

> ID：14704741
> 
> 赞同：3
> 
> 时间：2013-02-05T10:03:00.257
> 
> 标签：jquery, date, datepicker

我正在输入一个过去的日期。我要做的就是在当前日期打开该输入的日期选择器。

示例：输入填充为 2011 年 11 月 10 日，onclick 应从 2013 年 2 月 5 日开始打开日期选择器

html:

`<input type="text" id="datepicker" data-today="5-2-2013" value="10-11-2011" />`

Javascript：

```
var currentDate = $.datepicker.parseDate('dd-mm-yy', $('#datepicker').data('today'));
    $('#datepicker').datepicker({
        defaultDate: currentDate,
        dateformat: 'dd-mm-yy'
    }); 
```

使用此代码示例，日期选择器仍会在 2011 年 11 月打开

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:09:34.917

你可以试试[setDate()](http://api.jqueryui.com/datepicker/#method-setDate)

> 设置日期选择器的日期。新日期可以是 Date 对象或当前日期格式的字符串（例如，“01/26/2009”）、从今天开始的天数（例如，+7）或一串值和句点（“y " 代表年，"m" 代表月，"w" 代表周，"d" 代表天，例如，"+1m +7d")，或 null 以清除所选日期。

```
$( "#datepicker" ).datepicker( "setDate", currentDate ); 
```

# r - 使用 for 循环在 ggplot2 的单个图中绘制多条线

> ID：14704742
> 
> 赞同：7
> 
> 时间：2013-02-05T10:03:00.380
> 
> 标签：r, ggplot2

我尝试在单个图中绘制多条线，如下所示：

```
y <- matrix(rnorm(100), 10, 10)
m <- qplot(NULL)
for(i in 1:10) {
    m <- m + geom_line(aes(x = 1:10, y = y[,i]))
}
plot(m) 
```

但是，似乎会在where is期间`qplot`解析，因此仅生成单行。`m``plot(m)``i``10``plot(m)`

我期望看到的类似于：

```
plot(1,1,type='n', ylim=range(y), xlim=c(1,10))
for(i in 1:10) {
    lines(1:10, y[,i])
} 
```

其中应包含 10 个不同的行。

有没有`ggplot2`办法做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T10:14:47.290

您应该以 ggplot2 方式执行此操作，而不是运行循环。ggplot2 想要长格式的数据（您可以使用 reshape2::melt() 进行转换）。然后通过一列（此处为 Var2）拆分行。

```
y <- matrix(rnorm(100), 10, 10)
require(reshape2)
y_m <- melt(y)

require(ggplot2)
ggplot() +
  geom_line(data = y_m, aes(x = Var1, y = value, group = Var2)) 
```

![在此处输入图像描述](../Images/7cbdc144bb252f957ed960631b689298.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-05T10:55:36.113

EDi提出的方式是最好的方式。如果您仍想使用`for`循环，则需要使用 for 循环来生成数据框。

如下所示：

```
# make the data
> df <- NULL
> for(i in 1:10){
+ temp_df <- data.frame(x=1:10, y=y[,i], col=rep(i:i, each=10))
+ df <- rbind(df,temp_df)} 

> ggplot(df,aes(x=x,y=y,group=col,colour=factor(col))) + geom_line() # plot data 
```

这输出：

![在此处输入图像描述](../Images/c886e1082016748e29cfe4e0229f364b.png)

# iphone - iPhone - 如何在 ios 中添加 AdSupport.framework？

> ID：14704747
> 
> 赞同：4
> 
> 时间：2013-02-05T10:03:12.923
> 
> 标签：iphone, ios, frameworks, admob

当我朗姆我的应用程序时，我试图在我的测试应用程序中使用 AdMob，我收到以下错误，如下所示。

```
Undefined symbols for architecture i386:
"_OBJC_CLASS_$_ASIdentifierManager", referenced from:
  objc-class-ref in libGoogleAdMobAds.a(GADIdentifierUtilities.o)
"_OBJC_CLASS_$_SKStoreProductViewController", referenced from:
  objc-class-ref in libGoogleAdMobAds.a(GADOpener.o)
"_SKStoreProductParameterITunesItemIdentifier", referenced from:
  -[GADOpener openInAppStore:fallbackURLString:] in libGoogleAdMobAds.a(GADOpener.o)
ld: symbol(s) not found for architecture i386  
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我用谷歌搜索了这个错误，每个人都告诉我要添加 AdSupport.framework。但是当我尝试在我的 Xcode4.1 和 Xcode4.4 中添加该框架时，没有 AdSupport.framework 没有丢失。我在哪里可以获得它以及如何添加该框架。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T10:08:57.700

AdSupport.framework 仅在 iOS6+ 中可用，因此您将无法在 4.5 之前的 XCode 版本中找到它

**升级版：**

根据 AdMob 6.2.0 更新日志：

*   需要使用 Xcode 4.5 并针对 iOS 6 构建。最低部署是 iOS 4.3。

# java - 按符号计算文件中的单词

> ID：14704756
> 
> 赞同：-2
> 
> 时间：2013-02-05T10:03:33.583
> 
> 标签：java

我需要计算文件中所有以字母“A”开头和结尾的单词。虽然我能够计算文件中的所有单词。这是代码...

```
public class task_1 {

public static int i;

/**
 * @param args the command line arguments
 */
public static void main(String[] args) throws IOException {
    Scanner sc = new Scanner (System.in);
    String name = sc.nextLine();
    sc.close();
    FileReader fr2 = new FileReader(name);
    BufferedReader r = new BufferedReader(fr2);

    String s=r.readLine();

    int n=0;
    while(s!=null) {
        System.out.println(s);
        String [] words = s.split(" ");
        n += words.length;
        for(String str : words)
        {
            if(str.length()==0) n--;
        }
        s=r.readLine();
    }
    fr2.close();
    System.out.println(n);                                                          
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:09:21.023

```
while(s != null) {
    String [] words = s.split(" ");
    for(String str : words) {
        if((str.startsWith("a") || str.startsWith("A")) 
              && (str.endsWith("a") || str.endsWith("A"))) {
            ++n;
        }
    }
    s = r.readLine();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:09:45.577

更改 while 块：

```
while(s!=null) {
                    System.out.println(s);
                    String [] words = s.split(" ");
                    for(int i=0; i < s.length(); i++) {
                        String current = words[i];
                        if(current != null && current.startsWith("A") && current.endsWith("A")) {
                            n++;
                        }
                    }
                    s=r.readLine();
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:10:52.613

添加条件以检查 for 循环内单词的开始字母和结束字母

for（字符串str：单词）{

```
 if(str.length()==0) n--;
    } 
```

[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#startsWith(java.lang.String)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#startsWith(java.lang.String))

[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#endsWith(java.lang.String)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#endsWith(java.lang.String))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:11:16.280

`你只需要添加这个条件：

```
for(String str : words)
{
    if(str.length()==0){
     n--;
    }else if(str.startWith("A") && str.endsWith("A")){
       // increment the variable that counts words starting and ending with "A"
       // note this is case sensitive, 
       //so it will search for words that starts and ends with "A" (capital)
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T10:25:49.900

```
public static void main(String[] args) throws Exception {
    File file = new File("sample.txt");
    Scanner sc = new Scanner(new FileInputStream(file));
    int count = 0;
    while (sc.hasNext()) {
        String s = sc.next();
        if (s.toLowerCase().startsWith("a")
                && s.toLowerCase().endsWith("a"))
            count++;
    }
    System.out.println("Number of words that starts and ends with A or a: "
            + count);
} 
```

如果您想计算总字数，只需删除`if`条件即可。

# iphone - NSUserDefault 内存管理问题

> ID：14704760
> 
> 赞同：0
> 
> 时间：2013-02-05T10:03:44.437
> 
> 标签：iphone, ios, objective-c, nsuserdefaults

我正在使用以下代码将包含一些数据（图像、字符串、数组等）的类实例保存到我的 NSUserDefaults 中：

```
NSData *encodedData = [NSKeyedArchiver archivedDataWithRootObject:myClassInstance];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:encodedData forKey:@"myClassData"];
[defaults synchronize]; 
```

如果我没有互联网连接，我这样做是为了使用这些数据。

所有这些数据是否使用 NSuserDefaults 加载到内存中？或者当我使用它时它会加载：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSData *encodedData = [defaults objectForKey:@"myClassData"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:10:10.643

调用时会加载

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSData *encodedData = [defaults objectForKey:@"myClassData"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:12:15.293

我不确定何时加载数据，但根据 Apple 的指导方针，您不应该使用 nsuserdefaults 来存储任何数量的数据，因为它很慢。您应该只将数据写入文件。NSDictionary 和 NSArray 可以将它们自己写入文件并直接读回。

你真的不应该这样做。NSUserdefaults 仅用于进行首选项和设置，非常小的东西

# python - 将用户对象和过滤后的对象列表传递给自定义 SearchView 子类

> ID：14704761
> 
> 赞同：1
> 
> 时间：2013-02-05T10:03:55.453
> 
> 标签：python, django, django-templates, django-views, django-haystack

所以我有一个设置为通用 haystack url 的模板：

> ```
> url(r'^$', search_view_factory(
>     view_class=SearchView,
>     template='base.html',
>     searchqueryset=sqs,
>     form_class=ModelSearchForm
> ), name='haystack_search'), 
> ```

我需要在其中删除类似`tasks.filter(completed=False).order_by('priority', 'dueDate')`.

现在在模板中，我可以通过 获得任务，`user.get_profile.task_set.all`但我无法执行过滤和排序。

这很容易通过视图条目解决，但是由于干草堆不指向视图，我如何将过滤和排序的列表传递到模板中？

我需要提一下，过滤和排序列表与 haystack 的搜索功能无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:08:14.180

而不是使用`SearchView`，创建一个子类并定义方法`extra_context`：

```
class MySearchView(SearchView):

    def extra_context(self):
        return { 'ordered_tasks': ... } 
```

此方法必须返回带有附加上下文变量的字典。

最后，`view_class`在对`search_view_factory`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:15:33.410

感谢 Simeon 的回答，以及其他一些让我意识到在类的方法`self.request.user`内部使用的可能性的 stackoverflow 问题，我能够像这样解决我的问题。 内部：`def extra_context(self):``CustomSearchView(SearchView)`
`views.py`

```
from haystack.views import SearchView
class MySearchView(SearchView):    

    def extra_context(self):
        if self.request.user.is_authenticated:
            member = self.request.user.get_profile()
        else:
            # just fooling the haystack config, since this view is set to localhost
            return { 'x' : 0 }  # which would be equivalent to a direct_to_template view

        # getting member tasks
        tasks = list()
        for elem in member.task_set.all().filter(completed=False).order_by('priority', 'dueDate')[:5]:
            tasks.append(elem)

        return { 'tasks': tasks } 
```

在模板中：

```
<a href="tasks/" style="color: #ffffff">Tasks</a>
    <ul id="tasksPane">
        {% for task in tasks %}
            <li><a href="/tasks/{{ task.id }}" id="tasksP" {% if task.priority == 'c' %} style="color: #99ff44" {% endif %}
                                                            {% if task.priority == 'b' %} style="color: #024dac" {% endif %}
                                                            {% if task.priority == 'a' %} style="color: #aa0022" {% endif %}
                ><input type="checkbox" name="task" value="completed">{{ task.task }}</a></li>
        {% endfor %}
    </ul> 
```

这样，*我不需要在模板中执行任何主要逻辑*，这正是我所需要的，而且我认为 django 会不赞成这种方法，因为它不允许模板中的`filter`and`order_by`方法。
当然，在我的`urls.py`：

```
# haystack
from haystack.forms import ModelSearchForm
from haystack.query import SearchQuerySet
from haystack.views import SearchView, search_view_factory
sqs = SearchQuerySet()
from member.views import MySearchView

urlpatterns = patterns('',
    url(r'^$', search_view_factory(
        view_class=MySearchView,
        template='base.html',
        searchqueryset=sqs,
        form_class=ModelSearchForm
    ), name='haystack_search'),
) 
```

# sql - 查找同一张表中两个字段之间的差异

> ID：14704763
> 
> 赞同：2
> 
> 时间：2013-02-05T10:03:59.490
> 
> 标签：sql, sql-server, database, tsql

我有一个存储每月账单信息的表格。

```
CREATE TABLE [dbo].[billing_history](
[id] [numeric](18, 0) IDENTITY(1,1) NOT NULL,
[reading_date] [date] NOT NULL,
[reading] [numeric](18, 0) NOT NULL,
[consumer_id] [int] NOT NULL) 
```

consumer_id 是引用消费者详细信息表的外键。

我想要的是从上个月的读数中减去每个客户当前的读数。这将生成当前账单。有任何想法吗。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T10:10:38.957

您可以使用与此类似的内容，在其中替换要返回的月/年的值：

```
select b1.consumer_id,
  sum(b1.reading - isnull(b2.reading, 0)) Total
from billing_history b1
left join billing_history b2
  on b1.consumer_id = b2.consumer_id
  and month(b2.reading_date) =12
  and year(b2.reading_date) = 2012
where month(b1.reading_date) = 1
  and year(b1.reading_date) = 2013
group by b1.consumer_id; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/72971/2)。

如果您不想传入 and 的值`month`来`year`搜索并且您只想要当前/上个月，那么您可以使用 CTE 使用与此类似的内容：

```
;with cur as
(
  select consumer_id,
    reading,
    month(getdate()) curMonth,
    year(getdate()) curYear,
    case when month(getdate()) = 1 then 12 else month(getdate()) -1 end preMonth,
    case when month(getdate()) = 1 then year(getdate())-1 else year(getdate()) end preYear
  from billing_history
  where month(reading_date) = month(getdate())
    and year(reading_date) = year(getdate())
)
select c.consumer_id, 
  sum(c.reading - isnull(pre.reading, 0)) TotalReading
from cur c
left join billing_history pre
  on c.consumer_id = pre.consumer_id
  and month(pre.reading_date) = c.preMonth
  and year(pre.reading_date) = c.preYear
group by c.consumer_id 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/83c14/36)

此版本获取要使用的当前/上个月和年份值。如果你不熟悉 CTE 语法，也可以写成：

```
select c.consumer_id, 
  sum(c.reading - isnull(pre.reading, 0)) TotalReading
from
(
  select consumer_id,
    reading,
    month(getdate()) curMonth,
    year(getdate()) curYear,
    case when month(getdate()) = 1 then 12 else month(getdate()) -1 end preMonth,
    case when month(getdate()) = 1 then year(getdate())-1 else year(getdate()) end preYear
  from billing_history
  where month(reading_date) = month(getdate())
    and year(reading_date) = year(getdate())
) c
left join billing_history pre
  on c.consumer_id = pre.consumer_id
  and month(pre.reading_date) = c.preMonth
  and year(pre.reading_date) = c.preYear
group by c.consumer_id; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/83c14/38)。

正如您在我的查询中看到的那样，我使用了聚合函数`SUM()`和`GROUP BY`. `consumer_id`如果您对每个客户的阅读次数超过一次，我会这样做。如果您知道每个月只有一次读数，那么您可以删除汇总。

# c - 谁在堆栈上的结构内初始化 char 指针

> ID：14704764
> 
> 赞同：0
> 
> 时间：2013-02-05T10:04:03.720
> 
> 标签：c, pointers, nullpointerexception

众所周知，栈上的东西默认是不初始化的。我试图用堆栈上的结构来证明这一点，但出乎意料的是，我的指针被初始化为 null，但为什么呢？什么是初始化这个指针？

```
#include <stdio.h>
#include <string.h>

struct strustri {
    int var1;
    char *var2;
};

int main()
{
    struct strustri test1 = {
            .var1 = 12,
            .var2 = "Teststring",
    };
    struct strustri test2;

    printf("test1.var1 is %d\n", test1.var1);
    printf("test2.var1 is %d\n", test2.var1);

    printf("test1.var2 points to %p\n", test1.var2);
    printf("test2.var2 points to %p\n", test2.var2);
    return 1;
} 
```

这是我机器上的输出（Ubuntu 12.10）：

```
test1.var1 is 12
test2.var1 is -1271814320
test1.var2 points to 0x400634
test2.var2 points to (nil) 
```

我多次运行我的示例。我每次都得到 var1 的另一个值，但 var2 总是指向零（空指针）......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T10:05:25.230

什么都没有初始化它。

这只是你的堆栈上发生的任何垃圾的人工制品。切换变量声明的顺序，或者多加一些局部变量，你会得到不同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:09:46.327

如果你把你的测试结构放在一个单独的函数中，然后有另一个函数创建一个 char 数组，比如 200 字节长，你用一些字母填充，然后交替调用这两个函数，你会注意到你在 test2 中的值会有所不同[很可能，但不能 100% 保证——因为我们正在处理“未定义的行为”，可能会发生其他事情]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:36:55.150

当执行 int var1 为 test2 创建空间时，它会为自己创建空间，但是如果您不为其分配值，那么它将显示已经存在的值..

但在 var2 的情况下，它是一个指针。如果指针未初始化，则它不指向任何东西，使其为 nil 或 NULL 或 '\0'

# shell - 复制标准输出，将其传送到两个不同的命令，将结果从两个命令收集到最终程序的标准输入

> ID：14704766
> 
> 赞同：8
> 
> 时间：2013-02-05T10:04:06.907
> 
> 标签：shell, unix, pipe

假设我有三个程序：**生成器**，它产生输入数据馈送到**处理器**和**验证器**，它可以检查处理器输出对于给定输入是否正确（因此它需要两个文件）。

我目前做的是：

生成器> in.txt && 处理器< in.txt > out.txt && cat in.txt out.txt | 验证者

是否可以在不使用显式文件的情况下获得相同的结果？我已经阅读了有关使用 tee 和进程替换复制输入的信息，但我没有找到一种方法将两个流收集到一个流中以供最后一步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:04:15.407

I have not tested this, but try:

```
{ generator | tee /dev/stderr | processor ; } 2>&1  | verifier 
```

This will redirect *a copy of* `generator` output to `stderr`. Then run `processor` on `stdout` of `generator`. Then combine both & pipe to `verifier`.

However, this cannot guarantee the order, in which lines from generator & processor would reach verifier.

* * *

Alternately, you can try process substitution like below:

```
( generator | tee >(processor) ) | verifier 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T10:54:06.020

如果您不想在慢速硬盘上创建真实文件，则可以使用 FIFO（先进先出），由于它们的行为，也称为*命名管道。*

```
mkfifo myfifo
generator | tee myfifo | processor | verifier myfifo 
```

这会将生成的内容流式传输到`tee`，然后将其复制到`myfifo`和`stdout`，然后通过管道传输`processor`到`verifier`. 并且`verifier`还从`myfifo`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T10:40:56.033

如果您可以将处理器代码更改为按顺序输出，`stdin`那么`stdout`单行命令可以很简单，如下所示：

```
generator | processor | verifier 
```

否则你可以使用这个

```
generator | tee in.txt | processor | verifier in.txt 
```

tee 命令复制`stdout`并将一个流重定向到`in.txt`下一个管道，另一个重定向到下一个管道。在这种情况下，您必须修改`verifier`以读取 的输出，`processor`并且`stdin`生成的文件`generator`作为参数传递。

我知道您正在寻找一种复制和重定向`stdin`到的方法，`stdout`但我不知道这一点，老实说，我认为这是不可能的

# dart - 在 Dart 中动态加载类

> ID：14704770
> 
> 赞同：0
> 
> 时间：2013-02-05T10:04:26.780
> 
> 标签：dart, dart-mirrors

所以，我查看了镜子，它们可能是一个选择，但考虑到它们的异步特性，它们可能真的很难使用，或者从长远来看是不可行的。由于它们目前不受支持（只是一个玩物），因此无论如何它们目前都不是真正可行的。

*问题*：给定一系列字符串，例如。`[ "Foo", "Bar" ]`基类`Application`和`Widget`in`library corelib;`以及每个字符串的对应类`FooWidget`in `BarWidget`，这是目前将字符串转换为对应类的实例的`library applibrary;`最优雅的方法**，适用于 dart2js**。`Application`

 **为了清楚起见，等效的 PHP 伪示例，

```
<?php # example

namespace corelib;

class Widget {
    function name() { 
        return \get_called_class(); 
    }
}

class Application {
    static function resolve($name, $library) { 
        $class = $library.'\\'.$name.'Widget'; 
        return new $class;
    }
}

namespace applibrary;

class FooWidget extends \corelib\Widget {
    // ...
}

class BarWidget extends \corelib\Widget {
    // ...
}

$foowidget = \corelib\Application::resolve('Foo', 'applibrary');
$barwidget = \corelib\Application::resolve('Bar', 'applibrary');

echo "{$foowidget->name()} <br> {$barwidget->name()}"; 
```

输出

```
applibrary\FooWidget 
applibrary\BarWidget 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:25:24.427

如果您可以验证字符串列表，那么目前最好的方法（直到 dart2js 中的镜像支持变得更好）可能是一个`if`声明。

```
// toy implementation
Widget getWidget(name) {
  switch (name) {
     case "Foo": return new FooWidget();
     case "Bar": return new FooWidget();
     default: // handle error
  } 
} 

// elsewhere:
var fooWidget = getWidget("Foo");
var barWidget = getWidget("Bar"); 
```

类列表`xyzWidget`将是一个有限列表（因为无论如何您都无法在运行时动态链接代码）。

当然，更优雅的实现是使用镜像（如下所示，供参考，虽然它目前不满足 dar2js 标准）

```
Future<Widget> getWidget(library, name) {
  var completer = new Completer<Widget>();
  MirrorSystem ms = currentMirrorSystem();
  ClassMirror cm = ms.libraries[library].classes[name];
  // instantiate an instance of the class
  cm.newInstance(null,[]).then((instance) => completer.complete(instance));

  return completer.future;
}

// elsewhere:   
getWidget("applibrary","FooWidget").then((Widget widget) {
  // do something with widget
}); 
```**

# clojure - 如何删除一个 datomic 模式以及相关数据会发生什么？

> ID：14704773
> 
> 赞同：0
> 
> 时间：2013-02-05T10:04:34.483
> 
> 标签：clojure, datomic

我很好奇在给定 Datomic 的基于事务的系统的情况下更改架构和数据是多么容易。有人可以阐明一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:19:58.680

没有办法收回您的架构。

[https://groups.google.com/forum/?fromgroups=#!topic/datomic/7-9lUE9Nm4k](https://groups.google.com/forum/?fromgroups=#!topic/datomic/7-9lUE9Nm4k)

# android - 锁定方向直到 Asynctask 完成

> ID：14704774
> 
> 赞同：10
> 
> 时间：2013-02-05T10:04:37.633
> 
> 标签：android, android-asynctask, screen-orientation

只想阻止方向，直到所有数据都加载到我的视图中。所以我想到了下面的代码，但它不起作用。

```
private class task extends AsyncTask<String, Void, String> {

   protected String doInBackground(String... params) {
      ...
   }

   protected void onPostExecute(String result) {
      ...
      setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
   }

   protected void onPreExecute() {
      ...
      setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR);
   }
} 
```

当我运行这两行`SENSOR`并且`NOSENSOR`我的屏幕自动变为水平时，不明白为什么。这可能正在发生？

**编辑：** 我输入以下几行来检查当前方向，结果如下：

```
 protected void onPreExecute() {
        if (getResources().getConfiguration().orientation==Configuration.ORIENTATION_LANDSCAPE) {
            Log.e("TAG","LANDSCAPE");
        }else{
            Log.e("TAG","PORTRAIT");
        }
      setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR);
   } 
```

**Logcat 的结果：**

```
LANDSCAPE 
```

但是，如果我删除两行（`SetRequestedOrientation`），我会在 logcat 中得到这个：

```
PORTRAIT 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T10:08:03.147

只需替换`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);`为`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);`

让我知道发生了什么..

入门级

```
 protected void onPreExecute() {
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR);
} 
```

在退出层

```
 protected void onPostExecute(String result) {
      ...
     setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);
   } 
```

**更新：**

有线行为（在您的情况下）但是，您可以使用任何方式获取当前方向，

```
int currentOrientation = getResources().getConfiguration().orientation; 
```

现在将此方向设置为`onPreExecute()`..

喜欢，

```
protected void onPreExecute() {
  ...
  int currentOrientation = getResources().getConfiguration().orientation; 
   if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE) {
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE);
   }
   else {
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
   }
} 
```

简单的.. ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:12:06.513

可能是一个错误，但也许更好的方法是锁定您的方向，这样您就不必担心正在创建的活动......或者更好。

在活动清单中使用它：

```
android:configChanges="orientation|screenSize|screenLayout" 
```

然后您的活动不会在旋转时重新创建（从 HoneyComb/3.0 开始，活动也不会在旋转时重新创建）。

只需覆盖：

```
onConfigurationChanged(Configuration newConfig){
  //Handle new orientation
} 
```

那么你就不需要让用户在操作过程中为什么手机停止旋转了。

* * *

如果您想要生命周期的异步任务，也值得一看[Robospice 。](https://github.com/octo-online/robospice)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:30:21.857

您这样做是因为您发现您的异步任务在活动销毁和重新创建期间被终止。我对吗？

处理此问题的正确方法是**不要**在任务运行时锁定方向。我不同意这种`setRequestedOrientation`方法不起作用是一个错误。而是不支持锁定活动方向然后从异步任务解锁的想法。

我已经[详细解释了](https://stackoverflow.com/questions/11975763/threads-and-device-orientation/11977070#11977070)如何通过将异步任务与您的活动生命周期解除关联来确保您的异步任务不会被杀死。回顾我提供的解决方案，我发现了检查服务正在运行的更好方法（进程间控制和*绑定*服务），但总体原则适用。以不知道的方向托管异步任务，`android.app.Service`并允许异步任务仅与服务通信，而服务仅与绑定到它的那些活动通信。

我认为这是一种更标准的方法。

# javascript - 时间函数，找到更好的解决方案

> ID：14704776
> 
> 赞同：0
> 
> 时间：2013-02-05T10:04:43.343
> 
> 标签：javascript, jquery, performance, time

我用一堆 if else 语句制作了这个时间和日期函数。但是有没有更好的方法来做到这一点？我认为它使用了大量的处理器能力。

该函数增加时间。每个数字都是一个 var。所以以秒为单位，我们有单秒 (sec) 和数十秒 (tense)。

在这里查看 jsfiddle：http: [//jsfiddle.net/MLgbs/1/](http://jsfiddle.net/MLgbs/1/)

```
$seconds = $('.seconds .one');
$tenseconds = $('.seconds .ten');
$minutes = $('.minutes .one');
$tenminutes = $('.minutes .ten');
$hours = $('.hours .one');
$tenhours = $('.hours .ten');
$days = $('.days .one');
$tendays = $('.days .ten');
$months = $('.months .one');
$tenmonths = $('.months .ten');
$years = $('.years .one');
$tenyears = $('.years .ten');
$houndredyears = $('.years .houndred');

var sec = 0;
var tensec = 0;
var min = 0;
var tenmin = 0;
var hours = 0;
var tenhours = 0;
var days = 0;
var tendays = 0;
var months = 0;
var tenmonths = 0;
var years = 0;
var tenyears = 0;
var houndredyears = 0;

function clock(){
    //Seconds
    if(sec < 9){
        sec++;
        console.log($seconds, sec);
    } else {
        sec = 0;
        console.log($seconds, sec);
        //Tenseconds
        if(tensec<5){
            tensec++;
            console.log($tenseconds, tensec);
        } else {
            tensec = 0;
            console.log($tenseconds, tensec);

            //minutes
            if(min<9){
                min++;
                console.log($minutes, min);
            } else {
                min = 0;

                console.log($minutes, min);
                //tenminutes
                if(tenmin<5){
                    tenmin++;

                    console.log($tenminutes, tenmin);
                } else {
                    tenmin=0;

                    console.log($tenminutes, tenmin);
                    //hours
                    if(hours<9 && (tenhours*10+hours<23)){
                        hours++;

                        console.log($hours, hours);
                    } else {
                        hours=0;

                        console.log($hours, hours);
                        //tenhours
                        if(tenhours<2 && (tenhours*10+hours<23)){
                            tenhours++;
                            console.log($tenhours, tenhours);
                        } else {
                            tenhours=0;
                            console.log($tenhours, tenhours);
                            if(days < 9 && (tendays*10+days<30)){
                                days++;
                                console.log($days, days);
                            } else {
                                if(days !== 0){
                                    days = 0;
                                    console.log($days, days);
                                }
                                if(tendays<2){
                                    tendays++;
                                    console.log($tendays, tendays);
                                } else {
                                    tendays = 0;
                                    console.log($tendays, tendays);
                                    if(months<9 && (tenmonths*10+months<11)){
                                        months++;
                                        console.log($months, months);
                                    } else {
                                        months = 0;
                                        console.log($months, months);
                                        if(tenmonths<0){
                                            tenmonths++;
                                            console.log($tenmonths, tenmonths);
                                        } else {
                                            tenmonths = 0;
                                            console.log($tenmonths, tenmonths);
                                            if(years < 9){
                                                years++;
                                                console.log($years, years);
                                            } else {
                                                years = 0;
                                                console.log($years, years);
                                                if(tenyears<9){
                                                    tenyears++;
                                                    console.log($tenyears, tenyears);
                                                } else {
                                                    tenyears = 0;
                                                    console.log($tenyears, tenyears);
                                                    if(houndredyears<9){
                                                        houndredyears++;
                                                        console.log($houndredyears, houndredyears);
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }

    }
}
setInterval(function(){clock();},1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:14:32.923

为什么不直接使用`Date()`对象？而不是所有这些计算，只需以固定的时间间隔（例如每秒几次）从中提取时间，然后显示 - 这样，它将与客户端计算机上的时间同步，而不是不准确的`setInterval`函数，这将很长一段时间后可能无法准确反映时间（尤其是考虑到您在十几个嵌套条件下所做的所有跑腿工作！）

如果您有多个用户都需要参考公共时钟，请改用 PHP 获取日期 - 这将返回服务器日期/时钟，而不是客户端。

# asp.net-mvc-3 - MVC3从控制器持久化数据以查看回控制器

> ID：14704779
> 
> 赞同：0
> 
> 时间：2013-02-05T10:04:47.197
> 
> 标签：asp.net-mvc-3, razor

我有一个包含几个列表的模型：

```
[Display(Name = "Facilities")]
public List<facility> Facilities { get; set; }

[Display(Name = "Accreditations")]
public List<accreditation> Accreditations { get; set; } 
```

我最初从我的控制器填充这些列表：

```
public ActionResult Register()
{
    var viewModel = new RegisterModel();

    viewModel.Facilities = m_DBModel.facilities.ToList();
    viewModel.Accreditations = m_DBModel.accreditations.ToList();

    return View(viewModel);
} 
```

当他们到达我的视野时，他们会填充数据库记录（很棒）。然后，我将模型传递给将这些列表显示为复选框的局部视图，以供用户操作（我根据另一个建议尝试使用 for 循环而不是 foreach 循环，没有区别）：

```
@model LanguageSchoolsUK.Models.RegisterModel

@foreach (var item in Model.Facilities)
{
    @Html.Label(item.name);
    @Html.CheckBox(item.name, false, new { id = item.facility_id, @class = "RightSpacing", @description = item.description }) 
} 
```

当我提交表单并最终回到我的控制器时，这次调用控制器上的重载注册函数：

```
[HttpPost]
public ActionResult Register(RegisterModel model)
{
    if (ModelState.IsValid)
    {
        // Do stuff
    }

    return View(model); 
} 
```

问题是包含列表（设施和认证）的模型参数告诉我列表为空。

请有人告诉我我做错了什么，为什么它们没有填充我最初通过的集合，并希望有一种方法可以询问哪些已经检查过的集合？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:09:09.087

> 我已经尝试基于另一个建议使用 for 循环而不是 foreach 循环，没有区别

再试一次，我相信这一次你会有更多的运气。哦，使用强类型助手：

```
@model LanguageSchoolsUK.Models.RegisterModel
@for (var i = 0; i < Model.Facilities.Count; i++)
{
    @Html.HiddenFor(x => x.Facilities[i].name)
    @Html.LabelFor(x => x.Facilities[i].IsChecked, Model.Facilities[i].name);
    @Html.CheckBoxFor(
        x => x.Facilities[i].IsChecked, 
        new { 
            id = item.facility_id, 
            @class = "RightSpacing", 
            description = item.description // <!-- HUH, description attribute????
        }
    ) 
} 
```

此外，您无疑会从我的回答中注意到复选框与模型上的布尔字段一起使用，而不是整数、小数、字符串 => 布尔值。

因此，请确保您的模型上有一个布尔字段，它将保存复选框的状态。在我的示例中，此字段被调用`IsChecked`，但显然您完全可以随意找到一个更好的名称。

# php - 解析错误：语法错误，意外的 T_STRING，期待 ',' 或 ';' 对于带有变量的 echo 语句

> ID：14704786
> 
> 赞同：-3
> 
> 时间：2013-02-05T10:04:59.373
> 
> 标签：php

我有一个 php 文件，其中有一个带有复选框的表，其值等于 MYSQL 表中的 ID。当我运行它时，我得到了错误。我知道“和”有一些问题，有人可以帮助解决这个问题吗？

```
 while ($row = mysqli_fetch_array($result))
    {
    echo "<tr>";
    ***//I get error in the following line*** 
    echo"<td> <form action="del_prod.php" method="post">input type="checkbox" name="product_id" value="$row["product_id"]"></td>"
    echo "<td>" . $row['product_id'] . "</td>";
    echo "<td >" . $row['product_name'] . "</td>";
    echo "<td>" . $row['weight'] . "</td>";
    echo "</tr>";
    }
    echo "</table>";
    ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T10:08:35.410

你的线路有几个问题。

```
echo "<td><form action=\"del_prod.php\" method=\"post\"><input type=\"checkbox\" name=\"product_id\" value=\"".$row['product_id']."\" /></td>"; 
```

*   你没有逃避双引号。
*   您缺少输入标记上的开头 <。
*   您没有关闭输入标签。
*   您没有正确连接字符串中的 $row['product_id'] 。
*   你少了一个分号。

除了 form 标签不应该在`<td>`. 它应该在桌子外面，或者更好的是根本没有桌子！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:07:01.173

```
echo"<td><form action='del_prod.php' method='post'><input type='checkbox' name='product_id' value='".$row['product_id']."'></td>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:07:10.367

改变 -

```
echo"<td> <form action="del_prod.php" method="post">input type="checkbox" name="product_id" value="$row["product_id"]"></td>"; 
```

到

```
echo'<td> <form action="del_prod.php" method="post">input type="checkbox" name="product_id" value="$row["product_id"]"></td>'; 
```

你的报价在最后`conflicting`没有`;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:07:25.050

你错过`;`了这一行，也逃脱了`"`双引号。

```
echo"<td> <form action=\"del_prod.php\" method=\"post\"><input type=\"checkbox\" name=\"product_id\" value=\"$row[\"product_id\"]\"></td>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T10:07:31.803

您必须转义引号并且缺少半列，您可以像这样更正

```
echo"<td> <form action=\"del_prod.php\" method=\"post\">input type=\"checkbox\" name=\"product_id\" value=".$row["product_id"]."></td>"; 
```

或者，您可以使用单引号使生活更轻松。

此链接可能会有所帮助： http: [//php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T10:07:36.437

您必须`"`像这样在您的声明中转义：

```
echo'<td> <form action="del_prod.php" method="post">input type="checkbox" name="product_id" value="' . $row["product_id"] . '"></td>'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-05T10:08:53.037

代替

```
echo"<td> <form action="del_prod.php" method="post">input type="checkbox" name="product_id" value="$row["product_id"]"></td>" 
```

到

```
echo"<td> <form action='del_prod.php' method='post'>input type='checkbox' name='product_id' value='$row['product_id']'></td>" 
```

您可以在 echo strong 中使用单引号。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-05T10:10:43.087

代码应该写成

```
while ($row = mysqli_fetch_array($result))
{
    echo "<tr>";
    //I get error in the following line*** 
    echo "<td> 
        <form action='del_prod.php' method='post'>
            <input type='checkbox' name='product_id' value='".$row["product_id"]."'/>
        </form>
    </td>";
    echo "<td>" . $row['product_id'] . "</td>";
    echo "<td >" . $row['product_name'] . "</td>";
    echo "<td>" . $row['weight'] . "</td>";
    echo "</tr>";
}
echo "</table>"; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-05T10:26:16.887

```
 while ($row = mysqli_fetch_array($result))
    {
    echo "<tr>";
    //***//I get error in the following line*** 
    echo"<td> <form action=\"del_prod.php\" method=\"post\">input type=\"checkbox\ name=\"product_id\" value=\"$row['product_id']\"></td>";
    echo "<td>" . $row['product_id'] . "</td>";
    echo "<td >" . $row['product_name'] . "</td>";
    echo "<td>" . $row['weight'] . "</td>";
    echo "</tr>";
    }
    echo "</table>"; 
```

# string-formatting - 为什么调用 CString::Format 时 std::string 对象无法正确输出

> ID：14704791
> 
> 赞同：0
> 
> 时间：2013-02-05T10:05:11.180
> 
> 标签：string-formatting

我写了以下声明：

```
 CString strResult;
   std::string errorReason("no this item");
   strResult.Format("the error reason is: %s", errorReason); 
```

它似乎无法正确格式化 std::string 对象；但是，如果我只是将 std::string 替换为 CStirng，那么 strResult 可以正确格式化。

为什么`va_arg`可以支持`CStirng`，而不是`std::string`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:19:30.383

与`CString`,`std::string`不提供隐式转换`const char*`（出于[充分的理由](https://stackoverflow.com/a/492112/471164)），而且在这种情况下更重要的是， 的二进制布局`std::string`可能与`const char*`. 你应该`errorReason.c_str()`改用。

# javascript - 图像重新加载仅在 Firefox 中导致闪烁

> ID：14704796
> 
> 赞同：2
> 
> 时间：2013-02-05T10:05:20.617
> 
> 标签：javascript, image, firefox, refresh

我正在创建一个网站，它从远程系统流式传输实时数据图像并将它们显示在网站上。这些图像每 5 秒在远程站点更改一次，因此我们会自动重新加载/刷新这些图像。 **问题**：图像刷新在 IE 和 chrome 上正确流畅地进行，但在 Firefox 中，每次自动刷新都会导致闪烁。这是不受欢迎的行为。我该如何解决？ **PS**我正在使用joomla文章，其中我嵌入了所需的javascript

```
 <center>  
     <img id="pic" src="images/CB1.jpeg" border="0" width="700" height="700"/></center>
     <script language="javascript" type = "text/javascript">
      function refresh() 
       {         
      document.images["pic"].src = "images/CB1.jpeg" + "?" + new Date().getTime();
       }
      window.onload=function(){
      setInterval(function(){refresh()}, 5000 ); 
      }
     </script> 
```

这是嵌入在 joomla 文章中的脚本。图片大小约为 300~350 KB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:42:30.653

由于无法在您的机器上进行测试，我不能肯定地说，但我认为 Cobra_Fast 是正确的，因为图像在完成加载之前正在渲染。要解决此问题，请确保在新图像完成加载之前不要替换旧图像。这应该有效：

```
<img id="pic" src="images/CB1.jpeg">

<script language="javascript" type = "text/javascript">
function refresh() {
    // create new image obj
    var image = new Image();

    // replace the existing image once the new image has loaded
    image.onload = function () {
        document.images["pic"].src = image.src;
    }

    // set the source of the new image to trigger the load 
    image.src = "images/CB1.jpeg" + "?" + new Date().getTime();
}

window.onload=function(){
    setInterval(function(){refresh()}, 5000 ); 
}
</script> 
```

# node.js - Express 3.0 + Everyauth + HTTPS

> ID：14704803
> 
> 赞同：1
> 
> 时间：2013-02-05T10:05:40.427
> 
> 标签：node.js, express, everyauth

我将nodejs与express 3和everyauth一起用于google oauth。

实现如下所示：

```
everyauth.google 
/* snip */
.callbackPath('/loggedin');

var app = express();
app.configure(function(){
  /* snip */
  app.use(everyauth.middleware());
}

var server = https.createServer(sslOptions, app);
server.listen(app.get('port'), function(){
// ...
}); 
```

现在，当我转到谷歌登录路径时，它说：

> 请求中的重定向 URI：`http://localhost:4545/loggedin`与注册的重定向 URI 不匹配

这是正确的，因为我只是在 google api 控制台中添加了 httpS URI。

请注意，我只使用 HTTPS（安全！），everyauth 出于某种原因将我的网址中的 https 替换为 http。

我认为这可能是因为我在`app.use(everyauth.middleware());`声明之后创建了 https 服务器。但是我如何重写代码以便everyauth 不会忽略 https ？

是否有可能`app.use(everyauth.middleware());`在创建 https 服务器后将语句移动到某处？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T18:59:05.947

通过添加以下内容，我能够在 Facebook auth 上解决此问题：

```
everyauth.facebook.myHostname('https://www.example.com') 
```

# asp.net-mvc - REST API 的 Google SEO 性能如何？

> ID：14704806
> 
> 赞同：0
> 
> 时间：2013-02-05T10:05:54.817
> 
> 标签：asp.net-mvc, rest, url-rewriting

`Asp.Net` `MVC4`我有一个使用 REST API开发的网站。我们的 URL 就像`"/categories/{categoryname}/games/{gamename}"`使用 REST API 精心设计的一样。所以我的问题是，

使用 Google 搜索索引的 REST API 功能怎么样？它对谷歌搜索引擎优化友好吗？

我们是否应该通过使用模块来更改 URL 以`urlrewrite`更好地进行 Google 索引？如果是，我们应该使用`urlrewriting`模块，还是应该改变我们的路线`routeconfig`？`url rewriting`in的最佳做法是`asp.net` `mvc`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:47:35.897

只要您的类别名称和游戏名称不太罗嗦，您现在的策略就可以了。

前坏：/categories/first-person-shooter-mild-violence/games/kill-or-be-killed-by-some-company-here。

Ex Good: /categories/first-person-shooter/games/kill-or-be-killed

您对哪些重写包的使用取决于您，但是根据您的示例，ASP.NET MVC 中的开箱即用路由就可以了。

# unit-testing - 无法使用 Powermock 模拟静态方法（使用 EasyMock）

> ID：14704808
> 
> 赞同：1
> 
> 时间：2013-02-05T10:05:59.390
> 
> 标签：unit-testing, junit, mocking, easymock, powermock

我想模拟一个静态方法以及一个类的非静态方法。我的来源看起来像：

```
 `public class XDSUtilityManager
    {

        private static XDSUtilityManager xdsUtilMgr = new XDSUtilityManager();
        private XDSUtilityManager()
        {
            xdsUtilMgrImpl = new XDSUtilityManagerImpl();
        }

        public static XDSUtilityManager getInstance()
        {
            return (xdsUtilMgr == null ) ? new XDSUtilityManager() : xdsUtilMgr;
        }
        public XMLDocument getXMLDocument(final String absoluteKey, final XDSClient xdsClient)
        {
            return getXMLDocument(absoluteKey, xdsClient, false);
        }
    }` 
```

`我想模拟静态方法**getInstance()**。我希望 getInstance() 返回**XDSUtilityManager**类的模拟对象。我还想模拟不是静态的**getXMLDocument() 。**`

 `在我的测试用例中，我尝试了以下操作：

```
`XMLDocument xmlDocument = PowerMock.createMock(XMLDocument.class);

XDSUtilityManager xdsUtilityManager  = PowerMock.createPartialMock(XDSUtilityManager.class,"getXMLDocument");

PowerMock.mockStaticPartial(XDSUtilityManager.class, "getInstance");
expect(XDSUtilityManager.getInstance()).andReturn(xdsUtilityManager).anyTimes();

expect(xdsUtilityManager.getXMLDocument((String)anyObject(), anyObject(XDSClient.class))).andReturn(xmlDocument).anyTimes();

PowerMock.replay(xdsUtilityManager);
PowerMock.replay(xmlDocument);`

但事情并没有按预期工作。请帮忙

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2013-03-19T20:24:33.813

我发现最简单的方法是使用[PowerMockito](http://code.google.com/p/powermock/wiki/MockitoUsage13)。PowerMockito 是 Mockito 和 PowerMock 的组合，它允许模拟静态对象。

我使用的模式是使用你的静态模拟`getInstance()`来返回你的非静态模拟的副本，然后你可以正常扩展它。[使用PowerMockito](http://powermock.googlecode.com/svn/docs/powermock-1.3.7/apidocs/org/powermock/api/mockito/PowerMockito.html)的示例是：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest({SingletonObject.class})
public class SingletonTester {
  @Mock
  private SingletonObject singleMock;

  @Before
  public void setup(){
      // initialize all the @Mock objects
      MockitoAnnotations.initMocks(this);
      // mock all the statics
      PowerMockito.mockStatic(SingletonObject.class);
  }

  @Test
  public void mockTester(){
      // Mock the static getInstance call to return the non-Static Mock
      Mockito.when(SingletonObject.getInstance()).thenReturn(singleMock);

      // Mock the non static version as normal
      PowerMockito.when(singleMock.nonStaticMethodCall()).thenReturn("Whatever you need.");
      //..........
  }
} 
```

您获取单例对象的静态调用`getInstance()`返回您还定义的实例化模拟对象。一旦你告诉静态返回什么，你就可以像往常一样继续模拟非静态调用。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2013-06-07T14:16:40.610

它不需要调用`getInstance()`方法来创建`XDSUtilityManager`. 使用`PowerMockito`，因为您的构造函数是私有的，您需要`suppress the constructor`在调用 create mock 之前，如下所示..

```
PowerMockito.suppress(PowerMockito.constructor(XDSUtilityManager.class));
// enable static mocking for all the methods in the class   
PowerMockito.mockStatic(XDSUtilityManager.class); 
XDSUtilityManager xDSUtilityManager =  PowerMockito.mock(XDSUtilityManager.class);
XMLDocument xmlDocument = PowerMock.createMock(XMLDocument.class); 
PowerMockito.when(xDSUtilityManager.getXMLDocument(
    Mockito.anyString(),Mockito.anyObject())).thenReturn(xmlDocument); 
``` 
````

# java - Java 的 FutureTask 可组合性

> ID：14704812
> 
> 赞同：6
> 
> 时间：2013-02-05T10:06:12.100
> 
> 标签：java, android, concurrency

我尝试使用 Java 的、`FutureTask`、`Future`和`Runnable`类型。`Callable``ExecutorService`

组成这些构建块的最佳实践是什么？

鉴于我有多个`FutureTask`s 并且我想按顺序执行它们。

当然，我可以创建另一个 FutureTask，它按顺序为每个子任务提交/等待结果，但我想避免阻塞调用。

另一种选择是让这些子任务在完成时调用回调，并在回调中安排下一个任务。但是走这条路，我如何创建一个适当的外部 FutureTask 对象，该对象还可以处理子任务中的异常而不产生那么多样板文件？

我在这里想念什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T12:36:12.913

非常重要的事情，虽然通常不会在教程中描述：

`Runnables to be executed on an ExecutorService should not block`. 这是因为每次阻塞都会关闭一个工作线程，如果 ExecutorService 的工作线程数量有限，就有陷入死锁（线程饥饿）的风险，如果 ExecutorService 的工作线程数量不受限制，那么就有风险内存不足。任务中的阻塞操作只会破坏 ExecutorService 的所有优点，因此只能在普通线程上使用阻塞操作。

`FutureTask.get()`是阻塞操作，所以可以在普通线程上使用，而不是来自 ExecutorService 任务。也就是说，它不能作为构建块，而只是将执行结果传递给主线程。

从任务构建执行的正确方法是在下一个任务的所有输入数据都准备好时启动下一个任务，这样任务就不必阻塞等待输入数据。因此，您需要一种门来存储中间结果并在所有参数到达时启动新任务。因此，任务不会显式地启动其他任务。因此，由用于参数的输入套接字和用于计算它们的 Runnable 组成的门可以被视为 ExcutorServices 上计算的正确构建块。

这种方法称为数据流或工作流（如果不能动态创建门）。

像 Akka 这样的 Actor 框架使用这种方法，但受限于 Actor 是具有单个输入套接字的门这一事实。

我编写了一个真实的数据流库，发布在[https://github.com/rfqu/df4j](https://github.com/rfqu/df4j)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:14:23.360

我尝试对 ScheduledFuture 做类似的事情，试图在向用户显示内容之前造成延迟。这就是我想出的，只需对所有“延迟”使用相同的 ScheduledFuture。代码是：

```
 public static final ScheduledExecutorService scheduler = Executors
        .newScheduledThreadPool(1);
    public ScheduledFuture delay = null;

    delay = scheduler.schedule(new Runnable() {
    @Override
    public void run() {
    //do something
    }
    }, 1000, TimeUnit.MILLISECONDS);

    delay = scheduler.schedule(new Runnable() {
    @Override
    public void run() {
    //do something else
    }
    }, 2000, TimeUnit.MILLISECONDS); 
```

希望这可以帮助安迪

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:16:59.023

通常的做法是：

*   决定 ExecutorService（哪种类型，多少个线程）。
*   决定任务队列（它可以是非阻塞的多长时间）。

如果您有一些外部代码等待任务结果： * 将任务作为 Callables 提交（只要您没有用完队列，这就是非阻塞的）。* 呼叫获得未来。

如果您希望在任务完成后自动执行某些操作：

*   您可以作为 Callables 或 Runnables 提交。
*   只需添加您需要在最后执行的任务作为任务中的最后一个代码。使用 Activity.runOnUIThread 这些最终动作需要修改 GUI。

通常，您不应该主动检查何时可以提交更多任务或安排回调以提交它们。线程队列（阻塞，如果愿意）将为您处理这个问题。

# c# - 如何从我的 TextFile 列表中保存？

> ID：14704814
> 
> 赞同：0
> 
> 时间：2013-02-05T10:06:23.790
> 
> 标签：c#

我需要将我`List<Cupon>`的保存到文本文件中。我正在使用这段代码：

```
File.WriteAllText(@"C:\Users\urim.sadiku\Desktop\Loja.txt", Cupo.ToString());
List<string> myList = new List<string>(Cupo.ToString().Split(',')); 
```

但 txtFile 中的输出是：

> System.Collections.Generic.List`1[LojeShperblyese2.Coupon]

注意：我需要用 保存`Split()`，但我不知道该怎么做。

我需要做什么才能正确保存我的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:09:19.790

`ToString`on`List`不会连接列表的所有元素并返回它，你需要一个自定义实现（或者可能有一个现有的类型*确实*像这样，但不是`List`）。

请注意您正在调用的方法的名称，尤其是`Text`部分。

要纠正您的具体情况，您需要定义一个`string`变量，并在构建输出时循环列表的所有元素以写入 ( `youstring += item`)，然后使用`File.WriteAllText(yourstring)`- 或此方法的某些变体，毫无疑问，您可以询问任何人所以对于“在一行中完成它？！”的方法。

但是，您可以使用[`File.WriteAllLines`](http://msdn.microsoft.com/en-us/library/system.io.file.writealllines.aspx)，它会为您做同样的事情，但会为您处理每个元素的迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:11:16.167

默认情况下，`ToString`方法返回类型名称，如果它没有在子类中被覆盖。

尝试使用

```
File.WriteAllText(@"C:\Users\urim.sadiku\Desktop\Loja.txt",
                 string.Join(",", Cupo)); 
```

这假设您已经在您的类上正确地实现`ToString`了方法`LojeShperblyese2.Coupon`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:58:16.653

I should add that you should override `ToString()` Method of class `Coupon` to return your desired string that you want to be written to file, then Ilya Ivanov's answer will work.

# iphone - 如何自定义 UIAlert 视图..？

> ID：14704817
> 
> 赞同：3
> 
> 时间：2013-02-05T10:06:31.497
> 
> 标签：iphone, ios, cocoa-touch, uilabel, uialertview

我已经`UIViews`通过添加图像来自定义它，使其看起来像单选按钮或复选框，但是对于我的规范，我想让它`UIAlertView`看起来像这样......

![在此处输入图像描述](../Images/b89da2cc865112567176b2ee1a69b83e.png)

谁能建议如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:33:59.850

您可以设计自定义视图，并可以使用此代码为其提供动画作为警报视图

```
 -(void)initialDelayEnded 
{

    alert_upload.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.001, 0.001);
    alert_upload.alpha = 1.0;
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:1/1.5];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(bounce1AnimationStopped)];
    alert_upload.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1.1, 1.1);
    [UIView commitAnimations];
}

- (void)bounce1AnimationStopped {
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:1.5/2];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(bounce2AnimationStopped)];
    alert_upload.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.9, 0.9);
    [UIView commitAnimations];
}

- (void)bounce2AnimationStopped {
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:1.5/2];
    alert_upload.transform = CGAffineTransformIdentity;
    [UIView commitAnimations];

} 
```

alert_upload 是 UIView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:13:55.180

以前有[很多关于这个主题](https://stackoverflow.com/search?q=uialertview+customize)的问题，其中一个链接[了这个组件](https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets)，让您可以创建自定义警报和操作表。可能是一个很好的开始方式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T12:50:33.063

您可以创建自己的自定义警报视图，除非用户交互，否则 Apple 不会拒绝它。

# javascript - jQuery 隐藏、更改内容、显示

> ID：14704820
> 
> 赞同：1
> 
> 时间：2013-02-05T10:06:37.100
> 
> 标签：javascript, jquery, html

我想用ajax chage 一个div 内容，但是在隐藏它之前和改变之后，用jQuery 动画显示它。

我当前的代码：

```
$(document).on("click", ".menuItem", function(){
    var contentName = $(this).attr("name");
    $( "#content > div" ).hide(1000, function(){
        $.ajax({ type: "GET",
            url: contentName,
            dataType: 'html',
            success : function(responseText){
                $("#content").html(responseText);
                $("#content").show(1000);
            }
        });
    });
}); 
```

但它不起作用，因为当调用 html 方法时，新的内容突然出现。有没有办法解决这个问题？

提前致谢！

理查德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:10:06.767

这里的问题是`$("#content")`元素总是可见的。`#content`在 ajax 调用之前，您在->中隐藏了一个 div `$("#content > div")`。

`$("#content")`您可以在添加内容之前隐藏。

```
$("#content").hide().html(responseText).show(1000); 
```

或者

```
 $("#content").hide(1000, function(){
        $.ajax({ type: "GET",
            url: contentName,
            dataType: 'html',
            success : function(responseText){
                $("#content").html(responseText).show(1000);
            }
        });
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T10:11:59.197

试试这个

```
$(document).on("click", ".menuItem", function(){
    var contentName = $(this).attr("name");
    $( "#content > div" ).hide(1000, function(){
        $.ajax({ type: "GET",
            url: contentName,
            dataType: 'html',
            success : function(responseText){
                $("#content").hide().html(responseText).show(1000);
            }
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:10:57.780

您可以先尝试隐藏内容：

```
$(document).on("click", ".menuItem", function(){
    var contentName = $(this).attr("name");
    $("#content > div" ).hide(1000, function(){
        $.ajax({ type: "GET",
            url: contentName,
            dataType: 'html',
            success : function(responseText){
                $("#content").hide();
                $("#content").html(responseText);
                $("#content").show(1000);
            }
        });
    });
}); 
```

# javascript - 将两个 CDN 用于 Javascript 库是不是很糟糕？

> ID：14704821
> 
> 赞同：3
> 
> 时间：2013-02-05T10:06:43.250
> 
> 标签：javascript, cdn, redundancy

客户的网站依赖于 jquerytools.org CDN，该 CDN 目前无法正常工作，因此他的网站已损坏（忽略优雅的 Javascript 降级）。他可以在本地托管相关文件，但是他没有获得 CDN 的优势。为了冗余而在两个独立的 CDN 上引用表面上相同的 Javascript 文件有多糟糕？

```
<script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>
<script src="http://jquerytools.flowplayer.netdna-cdn.com/1.2.6/all/jquery.tools.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T10:10:36.203

在加载第二个脚本之前，您应该检查第一个 CDN 是否实际交付了 jQuery：

```
<script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>
<script type="text/javascript">
if (typeof jQuery.tools === 'undefined') {
    document.write('<script src="http://jquerytools.flowplayer.netdna-cdn.com/1.2.6/all/jquery.tools.min.js"><\/script>');
}
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T10:11:20.943

[您可以使用http://html5boilerplate.com](http://html5boilerplate.com)中的方法轻松安全地执行此操作：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.9.1.min.js"><\/script>')</script> 
```

它基本上测试 jQuery 对象，如果它不存在，则尝试从备用源包含它。只需将 URL 和对象测试更改为您的备用 CDN 并测试 jQuery 工具库。

这个答案：[测试 jQueryTools 是否已加载](https://stackoverflow.com/questions/12654409/testing-if-jquerytools-has-loaded)应该可以帮助您测试 jQuery 工具，但是为了节省您的点击，以下（未经测试）应该可以做到：

```
<script type="text/javascript" src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>
<script>window.jQuery.fn.tabs || document.write('<script src="http://jquerytools.flowplayer.netdna-cdn.com/1.2.6/all/jquery.tools.min.js"><\/script>')</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T10:10:46.127

我不会同时加载它们。我们对 jquery 执行以下操作：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>!window.jQuery && document.write(unescape('%3Cscript src="/static/js/jquery-1.7.1.min.js"%3E%3C/script%3E'))</script> 
```

仅加载本地版本，如果 CDN 版本加载失败。我不确定这是否是最佳做法，但它对我们有用。当然，您需要找到一种方法来识别是否已加载 jquery-tools。如果它稍后被初始化，（DomReady）或类似的东西，这将不起作用。

# java - 在jade中定义一个新的ObjectSchema

> ID：14704822
> 
> 赞同：0
> 
> 时间：2013-02-05T10:06:45.453
> 
> 标签：java, schema, message, agents-jade

我正在与[玉](http://jade.tilab.com/)合作，并有一些相互[通信](http://www.iro.umontreal.ca/~vaucher/Agents/Jade/primer4.html)的代理。我可以设计新的消息类型，例如 bookinfo `(String name, float prize, boolean availible)`。但我只能使用这些基本变量创建消息，如本例所示：

```
ConceptSchema cs = (ConceptSchema) getSchema(BOOKINFO);
cs.add(NAME, (PrimitiveSchema) getSchema(BasicOntology.STRING), ObjectSchema.MANDATORY);
cs.add(PRIZE, (PrimitiveSchema) getSchema(BasicOntology.FLOAT), ObjectSchema.MANDATORY);
cs.add(AVAILIBLE, (PrimitiveSchema) getSchema(BasicOntology.BOOLEAN), ObjectSchema.MANDATORY); 
```

这就是我在[本体中定义消息的方式](http://www.iro.umontreal.ca/~vaucher/Agents/Jade/Ontologies.htm)

但现在我想发送一个`ArrayList`（例如 bookinfo `(String name, float prize, arrayList authers)`）。

我想要的是这样的：

```
ConceptSchema cs = (ConceptSchema) getSchema(BOOKINFO);
cs.add(NAME, (PrimitiveSchema) getSchema(BasicOntology.STRING), ObjectSchema.MANDATORY);
cs.add(PRIZE, (PrimitiveSchema) getSchema(BasicOntology.FLOAT), ObjectSchema.MANDATORY);
cs.add(AUTHERS, **ObjectSchema-of-an-arrayList**, ObjectSchema.MANDATORY); 
```

必须定义 **ObjectSchema-of-an-arrayList** 以便我可以在代码中使用它。所以我[必须](http://jade.tilab.com/doc/api/jade/content/schema/ObjectSchema.html)为`ArrayList`.

我已经搜索了几个小时来解决这个问题，但没有找到任何解决方案。有谁能够帮我？

问候汉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T12:00:03.373

你能在消息中发送一个对象吗？您可以将 ArrayList 作为对象传递，然后接收者可以将其转换回 ArrayList 以供使用。只是给出一个想法，因为我不精通玉石（我以前用过石匠）。

# android - LocationManager providerDisabled()

> ID：14704823
> 
> 赞同：0
> 
> 时间：2013-02-05T10:06:46.873
> 
> 标签：android, android-location

我想知道某个提供商是否已禁用，是否会`LocationManager`停止侦听该提供商的位置更改？如果没有，那么我如何手动停止侦听该提供商的更新。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:14:39.083

试一试

```
 myLocationManager = (LocationManager)this.getSystemService(LOCATION_SERVICE);
 myListener = new LocationListener() {
    public void onLocationChanged(Location location) {
        Log.i("LocationListener", "Logging Change");
    }

  }

myLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
            5000, 1, myListener);

myLocationManager.removeUpdates(myListener); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:17:46.463

在您调用之前，您的位置监听器不会停止`myLocationManager.removeUpdates(myListener);`。查看我对另一个问题的回答 [此处] 以了解您还需要为连接状态更新[1](https://stackoverflow.com/questions/14702015/is-there-any-thing-wrong-with-my-getting-location-approach/14702108#14702108)做些什么。

# android - 使用 WakefulIntentService 安排多个警报

> ID：14704824
> 
> 赞同：0
> 
> 时间：2013-02-05T10:06:47.493
> 
> 标签：android, commonsware-cwac

我正在尝试安排几个警报将帖子发布到 Twitter。我不确定用法，因为我收到 NullPointerException。

我有一个帖子列表，我想将它们发布到 Twitter，所以这就是我所做的。在 WakefulIntentService 类的 scheduleAlarms 方法中，我有一个 for 循环遍历帖子列表并将帖子对象添加到 putExtra 方法：

```
public static void scheduleAlarms(AlarmListener listener, Context ctxt,
        boolean force) {
    SharedPreferences prefs = ctxt.getSharedPreferences(NAME, 0);
    long lastAlarm = prefs.getLong(LAST_ALARM, 0);

    if (lastAlarm == 0
            || force
            || (System.currentTimeMillis() > lastAlarm && System
                    .currentTimeMillis() - lastAlarm > listener.getMaxAge())) {
        AlarmManager mgr = (AlarmManager) ctxt
                .getSystemService(Context.ALARM_SERVICE);
        for (Iterator<Post> iterator = AlarmActivity.posts.iterator(); iterator
                .hasNext();) {
            Post post = (Post) iterator.next();

            Intent i = new Intent(ctxt, AlarmReceiver.class);
            i.putExtra("post", post);
            PendingIntent pi = PendingIntent.getBroadcast(ctxt,
                    (int) post.getId(), i, 0);
            listener.scheduleAlarms(mgr, pi, ctxt);
        }

    }
} 
```

然后在我的 AppService doWakefulWork 方法中，我得到 Parcelable post 对象，但我得到一个空指针异常：

```
@Override
protected void doWakefulWork(Intent intent) {
    Log.i("AppService", "I'm awake! I'm awake! (yawn)");
    Post post = intent.getParcelableExtra("post");
    System.out.println("- " + post.getPost());
} 
```

这是做我想要实现的正确方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:09:35.197

> NullPointerException 声明 intent.getParcelableExtra("post") 为空。

我的猜测是，`BroadcastReceiver`作为`post`对`sendWakefulWork()`.

> 这是做我想要实现的正确方法吗？

可能不会，因为您只会发送一个帖子，而忽略所有其他帖子，如果用户关闭或重新启动他们的设备，您甚至都不会正确地做到这一点。

将*一个*预定闹钟与*一个* `PendingIntent`. 由于您的帖子需要位于持久数据存储中，因此请`WakefulIntentService`加载要从数据存储发送的帖子。消除 中的所有额外`PendingIntent`内容，因为它们不再需要并且在断电或重新启动事件的情况下无法轻易重新构建。

# css - 测试网站的最佳实践

> ID：14704825
> 
> 赞同：1
> 
> 时间：2013-02-05T10:06:49.310
> 
> 标签：css, testing, web, sandbox

在用 PHP 编码之前，我正在为我的网站创建一个设计。

问题是我的图像/css/javascript 的路径是这样的：link="/stylesheets/style.css" 所以当我在本地打开它时它不起作用（它到达我的 c:/ 硬盘驱动器）。

如果我将其更改为相对路径以使其在本地工作，那么当我想开始编码时，我必须将所有内容都改回来。

你们有什么方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:43:13.837

您可以安装`xampp`，也可以在`PHP`.

从这里安装它：http: [//www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html)。您可以直接从您的计算机保存，然后您可以在`localhost`.

# ruby-on-rails-3 - Rails 3 中的 SMS 集成

> ID：14704827
> 
> 赞同：0
> 
> 时间：2013-02-05T10:06:51.620
> 
> 标签：ruby-on-rails-3, sms-gateway

是否有任何 gem 或 API 在 rails 3 应用程序中提供 SMS 集成。我尝试使用 sms_fu，但该运营商不适用于印度。是否还有其他选择。请尽快帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-24T05:00:06.120

Use Twilio Api First register in twilio and get sample Phone-No and follow the below link

[http://www.twilio.com/docs/ruby/install](http://www.twilio.com/docs/ruby/install)

# sql - 将 SQL 标准应用于脚本

> ID：14704829
> 
> 赞同：7
> 
> 时间：2013-02-05T10:06:53.083
> 
> 标签：sql, sql-server, sql-standards

我有以下脚本并想更改它以使其符合国际标准。我使用 SQL-Server，但只要有可能，我想遵循 SQL 的国际标准。我不相信方括号是标准的 - 我应该用双引号替换它们吗？

无需付费即可获得标准文档的副本，互联网上是否有任何资源可以提供完全符合标准要求的格式和布局的脚本示例？

```
SELECT 
    a.UserAccountKey,
    SUM(ISNULL(b.[measure Y],0.0)) AS "measure Y",
    SUM(ISNULL(c.[measure Z],0.0)) AS "measure Z"
FROM 
    XXX a
    LEFT OUTER JOIN YYYY b ON
        a.UserAccountKey = b.UserAccountKey
    LEFT OUTER JOIN ZZZZ c ON
        a.UserAccountKey = c.UserAccountKey
GROUP BY
    a.UserAccountKey 
```

* * *

**编辑**

我唯一不是经典标准的轻微偏好如下。这是由 AaronBertrand 提出的，我同意它更具可读性 - 特别是如果该`SELECT`子句有 20 或 30 个字段：

```
SELECT 
    a.UserAccountKey,
    "measure Y"             = SUM(ISNULL(b."measure Y",0.0)),
    "measure Z"             = SUM(ISNULL(c."measure Z",0.0)),
    "measure longertitle"   = SUM(ISNULL(c."measure longertitle",0.0)),
    "me short"              = SUM(ISNULL(c."me short",0.0))
FROM 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T10:11:33.600

更改`ISNULL`为`COALESCE`和方括号`"`，然后[验证](http://developer.mimer.com/validator/parser200x/index.tml#parser).

```
SELECT a.UserAccountKey,
       SUM(COALESCE(b."measure Y", 0.0)) AS "measure Y",
       SUM(COALESCE(c."measure Z", 0.0)) AS "measure Z"
FROM   XXX a
       LEFT OUTER JOIN YYYY b
         ON a.UserAccountKey = b.UserAccountKey
       LEFT OUTER JOIN ZZZZ c
         ON a.UserAccountKey = c.UserAccountKey
GROUP  BY a.UserAccountKey; 
```

这确实意味着您需要确保它[`QUOTED_IDENTIFIER`](http://msdn.microsoft.com/en-us/library/ms174393.aspx)在`ON`SQL Server 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T18:48:17.023

一个很好的在线免费 T-SQL 格式化程序是[http://www.tsqltidy.com/](http://www.tsqltidy.com/)，即用于 SQL Server。请小心，因为您的防火墙管理员可能会突然收到有关 SQL 注入攻击的警报（一些防火墙错误地使用该站点进行攻击）。否则，有具有格式化功能的商业工具 - SQL Complete (DevArt) 和 SQL Prompt (Red Gate)。

至于“国际标准 SQL”，那将更像是它自己的博客站点。哪个 ANSI 标准（1992、SQL3、...）以及达到什么级别？

虽然可以帮助您使用引号，但请使用 SET QUOTED_IDENTIFIER ON; 在你的 SQL 之前，然后关闭（SET QUOTED_IDENTIFIER OFF;）。这意味着您不需要为整个数据库打开它。但是，最好不要使用带有空格和非标准字符的标识符（就像 C# 中的代码一样，“... new Object type I just made up ~() ...” - 不太实用）。

这算作 2 个答案和另一个问题吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T12:16:45.047

这是一个很好的 SQL 标准资源列表，包含不同的文档和所有内容：http: [//gerardnico.com/wiki/language/sql/ansi](http://gerardnico.com/wiki/language/sql/ansi)

如果您正在为现有代码寻找 t-SQL 格式化程序，您还可以查看[ApexSQL Refactor](http://www.apexsql.com/sql_tools_refactor.aspx)。这是一个免费的 SSMS 插件，类似于 Red Gate 的 SQL Promt。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T10:51:31.807

另一个很棒的资源是 SQL Cop，它是一个免费工具，可以识别问题并提出最佳实践建议：

[http://sqlcop.lessthandot.com/](http://sqlcop.lessthandot.com/)

# java - SmartGWT ListGrid - 从选择中排除字段

> ID：14704834
> 
> 赞同：0
> 
> 时间：2013-02-05T10:07:07.413
> 
> 标签：java, gwt, smartgwt, listgrid

我想请您帮忙解决以下问题。

我有一个 SmartGwt ListGrid，其中有多行。这个 ListGrid 有一个 SelectionChangedHandler 工作得很好。

我在这个 ListGrid 中添加了一个特殊的列（ListGridField），基本上我想防止在单击时触发 selectionChangeEvent。

这个特殊的列有它自己的recordclickHandler。

我只想排除此列表单更改 ListGrid 中的选定记录。

在您的知识范围内有没有办法做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:44:00.290

由于行选择事件不会告诉您单击了哪个单元格，因此无法告诉您哪一列，我认为您需要使单元格可选，如果单元格位于排除列中，则忽略该事件。

```
myGrid.setCanSelectCells(true);

myGrid.addCellSelectionChangedHandler(new CellSelectionChangedHandler() {
  public void onCellSelectionChanged(CellSelectionChangedEvent event) {  
    CellSelection selection = countryGrid.getCellSelection();

    //use to determine if excluded column is clicked:
    int[][] selectedCells = selection.getSelectedCells();

    //use to get selected row: 
    ListGridRecord record = selection.getSelectedRecord();

    //etc...
  }
} 
```

# google-maps - Google Location Api V3 未返回位置 ID 节点，但在 v2 上可用

> ID：14704838
> 
> 赞同：-1
> 
> 时间：2013-02-05T10:07:12.203
> 
> 标签：google-maps, google-maps-api-3, google-maps-api-2

位置 ID 节点存在于位置 Google Location API V2 中，使用以下 URL： [https ://maps.googleapis.com/maps/api/place/autocomplete/xml?input=london,%20Canada&types=geocode&sensor=true&key=my_key](https://maps.googleapis.com/maps/api/place/autocomplete/xml?input=london,%20Canada&types=geocode&sensor=true&key=my_key)

最终返回结果，其中一部分如下所示：

```
<prediction>
<description>London, ON, Canada</description>
<type>locality</type>
<type>political</type>
<type>geocode</type>
<reference>
CjQqAAAAbN8JV6qwIOKVmGuRGXNc53ihbUG9GlHkRhwUh8ABdUgGC1IbdTRGVIdq5GtkATC_EhAKYnqcPv4ouW5QG5mG1AlOGhSa9oE0Cts801iMReUGyqG7mWZlfw
</reference>
<id>fab6815aadba41e81aa7bd51a445c4924317ec88</id> 
```

但是当我使用以下网址使用较新版本的谷歌位置 Api v3 时： [http ://maps.googleapis.com/maps/api/geocode/xml?sensor=false&address=london+canada](http://maps.googleapis.com/maps/api/geocode/xml?sensor=false&address=london+canada)

它不包括`<id>`，请帮助需要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:19:14.463

您问题中的第一个链接请求**[placesWebService](https://developers.google.com/places/)**，但第二个链接请求**[geocodingWebService](https://developers.google.com/maps/documentation/geocoding)**。

您仍然可以使用第一个链接，**V3是 Maps-** **Javascript** -API的当前版本，但您不使用 Javascript-API，您请求网络服务（对 Maps-Javascript-API 的更改没有任何对 Web 服务的影响）。

# backbone.js - 模板重新渲染后卓别林没有上下文

> ID：14704841
> 
> 赞同：0
> 
> 时间：2013-02-05T10:07:21.070
> 
> 标签：backbone.js, chaplinjs

我正在尝试拥有一个可以具有可互换模板的视图。因此，单击其中一个复选框会重新呈现视图。这实际上正在发生。但是在视图重新渲染并正确显示新模板后，我失去了上下文并且所有单击绑定到该视图不再起作用。[http://pastebin.com/bFJ5Yuer](http://pastebin.com/bFJ5Yuer)

```
View = require 'views/base/view'
template = require 'views/templates/list_view_a'

module.exports = class OfferListView extends View
autoRender: true
container: "[data-role='content']"
containerMethod: 'html'
   initialize: ->
    super
    @template = template
    #views
    @delegate 'change', '#list_view_a', @change_list_view
    @delegate 'change', '#list_view_b', @change_list_view
    @delegate 'change', '#list_view_c', @change_list_view
    @delegate 'click',  @click_ev

change_list_view: (event) =>
    console.log('change')
    @template = require 'views/templates/' + event.target.id
    @render()

click_ev: =>
    console.log('click')

getTemplateData: =>
    @collection.toJSON() 
```

任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:46:07.050

`@render`是的，对in的调用`change_list_view`正在清除`initialize`方法中事件绑定到的元素。

如果您必须重新渲染视图（例如，如果您正在更改模板），那么您只需在调用`@delegateEvents`下方添加`@render`调用`change_list_view`。

**更新**

如果您想切换到子视图方法，您可能可以摆脱第二次调用渲染。像这样的东西：

```
# snipped all the outer require js stuff

class InnerViewBase extends Chaplin.View # Or whatever your base view is
  autoRender: true
  container: "#innerViewContainer"
  containerMethod: "html"

  initialize: (templateName) ->
    @template = require templateName

    super

class ListViewA extends InnerViewBase
  initialize: ->
    super "views/templates/list_view_a"

    # Do any event handlers in here, instead of the outer view
    # @delegate 'click',  @click_ev

class ListViewB extends InnerViewBase
  initialize: ->
    super "views/templates/list_view_b"

class ListViewC extends InnerViewBase
  initialize: ->
    super "views/templates/list_view_b"

class OfferListView extends View
  autoRender: true
  container: "[data-role='content']"
  containerMethod: 'html'

  initialize: ->
    super
    @template = template

    #views
    # Consider changing these three id subscriptions to a class
    @delegate 'change', '#list_view_a', @change_list_view
    @delegate 'change', '#list_view_b', @change_list_view
    @delegate 'change', '#list_view_c', @change_list_view
    @delegate 'click',  @click_ev

  afterRender: ->
    # Add a default ListView here if you want
    # @subview "ListView", new ListViewA

  change_list_view: (event) =>
    console.log('change')

    # Make a hacky looking map to the subview constructors
    viewNames = 
      "list_view_a": ListViewA
      "list_view_b": ListViewB
      "list_view_c": ListViewC

    @subview "ListView", new viewNames[event.target.id]

  click_ev: =>
    console.log('click')

  getTemplateData: =>
    @collection.toJSON() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:29:57.373

对@delegateEvents 的调用并没有起到作用。但感谢您为我指明了正确的方向。这也很有帮助。[Backbone：重新渲染中丢失的事件](https://stackoverflow.com/questions/12028835/backbone-event-lost-in-re-render)

注意我的错误缩进

```
View = require 'views/base/view'
template = require 'views/templates/list_view_a'

module.exports = class OfferListView extends View
autoRender: true
container: "[data-role='content']"
containerMethod: 'html'
template: template
initialize: (options) ->
    super        
    #views
change_list_view: (event) =>
    @template = require 'views/templates/' + event.target.id
    @render()

initEvents: =>
    @delegate 'change', '#list_view_a', @change_list_view
    @delegate 'change', '#list_view_b', @change_list_view
    @delegate 'change', '#list_view_c', @change_list_view
    @delegate 'click',  @click_ev
click_ev: ->
    console.log('click')
render: =>
    super

afterRender: =>
    super
    @initEvents() 
```

# asp.net-mvc - @Html.ActionLink 如何添加查询字符串

> ID：14704859
> 
> 赞同：16
> 
> 时间：2013-02-05T10:07:57.430
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我需要使用 MVC 和 Razor 在视图中设置查询字符串。

这是我的代码

```
Controller: Home
ActionResult: Daily
QueryString: DateForLookUp 

@Html.ActionLink("Next Day", "Daily", "Home", new { @DateForLookUp = @Model.AddOneDay() }) 
```

目前的结果是

```
http://mysite.com/Home/Daily?lenght=4 
```

它应该是

```
http://mysite.com/Home/Daily?DateForLookUp=01/01/2014 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-05T10:11:19.167

有`Html.ActionLink`很多[重载](http://msdn.microsoft.com/en-us/library/dd505040%28v=vs.108%29.aspx)。

而且您使用了[错误的重载](http://msdn.microsoft.com/en-us/library/dd492124%28v=vs.108%29.aspx)，它将您的控制器名称解释`"Home"`为路由值。

正确的[重载](http://msdn.microsoft.com/en-us/library/dd504972%28v=vs.108%29.aspx)/sysntax 之一是：

```
@Html.ActionLink(
    "Next Day", //linkText
    "Daily", //actionName
    "Home", //controllerName
     new { @DateForLookUp = @Model.AddOneDay() }, //routeValues
     null //htmlAttributes
) 
```

# java - Spring + Maven + Hadoop

> ID：14704861
> 
> 赞同：4
> 
> 时间：2013-02-05T10:08:05.707
> 
> 标签：java, spring, maven, hadoop

我在 Spring + Maven + Hadoop 环境中遇到问题。我正在使用 Apache Hadoop，但不要使用 SpringSource 提供的 spring-hadoop。我在 Maven 中添加了以下依赖项，以便在 java 中使用 hadoop。

```
<dependency>
        <groupId>org.apache.hadoop</groupId>
        <artifactId>hadoop-core</artifactId>
        <version>0.20.2</version>
        <exclusions>
            <exclusion>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jetty</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jetty-util</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jsp-2.1</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jsp-api-2.1</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>servlet-api-2.1</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.servlet</groupId>
                <artifactId>servlet-api</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.servlet.jsp</groupId>
                <artifactId>jsp-api</artifactId>
            </exclusion>
            <exclusion>
                <groupId>tomcat</groupId>
                <artifactId>jasper-compiler</artifactId>
            </exclusion>
            <exclusion>
                <groupId>tomcat</groupId>
                <artifactId>jasper-runtime</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

我执行了 hadoop mapreduce 工作。Mapreduce 工作运行良好。

[但我在 Hadoop Web UI ( http://xxx.xxx.xxx.xxx:50030/jobtracker.jsp](http://xxx.xxx.xxx.xxx:50030/jobtracker.jsp) )的“正在运行的作业”列表中看不到已执行的作业

我开始时没有 hadoop 命令（ex-bin/hadoop -jar ....jar），而只是 java 应用程序。这可能是原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T04:39:08.857

Hadoop 提供 API 来在本地运行 MR 作业，无需设置 Hadoop 集群。如果您没有在 Hadoop Web UI 中看到您的作业正在运行/完成 - 似乎您在本地运行 MR 作业。

要远程运行 - 指定适当的作业跟踪器主机，在您的情况下为[http://xxx.xxx.xxx.xxx:9001](http://xxx.xxx.xxx.xxx:9001)

# ruby-on-rails - 为 Rails has_many_through 分配条件，并保持条件

> ID：14704862
> 
> 赞同：1
> 
> 时间：2013-02-05T10:08:07.107
> 
> 标签：ruby-on-rails, has-many-through

给定以下模型

```
class Team < ActiveRecord::Base
  has_many :memberships, class_name: "TeamMembership"
  has_many :members, -> { uniq(true) }, source: :user, through: :memberships
  has_many :owners,  -> { where('team_memberships.owner' => true) }, source: :user, through: :memberships
end 
```

这很好用（奇怪`uniq`的语法是因为我在 Rails 4 上），但是在我的规范中：

```
describe Team do
  describe "users and owners" do
    fixtures :users
    subject     { create :team  }
    let(:bob)   { users  :bob   }
    let(:alice) { users  :alice }
    it "doesn't allow a member to be added more than once" do
      subject.members << bob
      subject.members.should include(bob)
      subject.members << bob
      subject.members.count.should == 1
    end
    it "doesn't allow an owner to be added more than once" do
      subject.owners << bob
      subject.owners.should include(bob)
      subject.owners << bob
      subject.owners.count.should == 1
    end
  end
end 
```

您会注意到第二个示例“它不允许多次添加所有者”，我正在检查是否`bob`已正确添加到所有者列表中，但他没有。他在`member`列表中，但他的`TeamMembership`实例缺少`owner = true`标志。

我确定我在以前的 Rails 版本中已经有这个工作，但那时它是`conditions: { owner: true }`关系的一个选项，而不是一个惰性求值的 lambda。

我可以通过以下方式解决：

```
subject.owners << bob
subject.members.should include(bob)
subject.memberships.find_by_user_id(bob.id).update_attribute(:owner, true) 
```

这工作得很好，但似乎还有很长的路要走。简而言之，我想要一种方法来覆盖`owners<<()`模型`Team`，然后从那里运行，但我不确定从哪里开始。在短期内，我的工作就足够了，但我希望做得更好。

我如何`team.owners << bob`让他新创建的成员设置为`team_membership.owner = true`分配？

# javascript - IE 9 上的 setTimeout() 问题

> ID：14704865
> 
> 赞同：1
> 
> 时间：2013-02-05T10:08:10.567
> 
> 标签：javascript, object, internet-explorer-9, settimeout

我有一个像这样的简单 js 结构：

```
var Waiting = (function () {

    function Waiting() {
        this.timer;
    }

    Waiting.prototype.show = function () {
        var self = this;

        clearTimeout( self.timer );
        self.timer = setTimeout( function(){ self.hideLogo(); },3000);
    }

     Waiting.prototype.hideLogo = function () {
         console.log("ok i passed timeout");
     };

     return Waiting;
})(); 
```

正如预期的那样，当我第一次执行 show 函数（称为 hideLogo 函数）时，我在每个浏览器上都会收到“ok i pass timeout”日志。当我第二次调用 show 函数时，问题出现在 IE9 中。这一次，hideLogo 函数永远不会被调用（日志永远不会出现在 IE 控制台中）。我尝试了很多东西都没有成功。

如果有人作为一个想法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:17:32.160

当您使用`setTimeout`时，被调用的函数会丢失*上下文*：换句话说`this`，不再发布到调用该方法的实例。你`self`用来取消这个问题，但`self`它本身就是一个*不确定*的词（如保留关键字）。也许使用`that`, 并在调用中使用 IIFE `setTimeout`：

```
this.timer = setTimeout((function (that)
{
    return function()
    {
        clearTimeout(that.timer);//perhaps clear timeout here?
        that.hideLogo.apply(that,[]);//double dutch, the apply _shouldn't_ be required
    };
}(this)), 3000); 
```

乍一看，这是我唯一能看到的可能是您的代码的问题：`clearTimeout`调用不应该是一个问题，但我喜欢在超时本身结束时调用它，以及`self`模棱两可的事情。如果这对您有任何改变，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:22:30.107

我不确定您如何使用提供的代码第二次调用 show，也许您创建了一个新的 Waiting()？

这是适用于 IE8 的方法

```
var Waiting=(function () {

    function Waiting() {
        this.timer;
    }

    Waiting.prototype.show = function () {
        var self = this;
        console.log("will clear pref timeout");
        clearTimeout( self.timer );
        self.timer = setTimeout( 
          function(){ 
            self.hideLogo(); 
           },30);
    }

     Waiting.prototype.hideLogo = function () {
         console.log("ok i passed timeout");
     };
     return new Waiting();
})();
// shows only one time
Waiting.show();
Waiting.show();
// next one will show because it lets the prefious one
// finish without clearing the pref timeout.
setTimeout(function(){
Waiting.show();
},1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-16T04:56:10.843

尝试：

```
setTimeout( function(){
    clearTimeout( that.timer );
    that.hideLogo();
},3000); 
```

在 IE 和 Chrome 上为我工作。IE 在所有方面都非常落后。

# android - 丢弃 | 完成模式如何正确实现与返回按钮的结合？

> ID：14704868
> 
> 赞同：0
> 
> 时间：2013-02-05T10:08:27.403
> 
> 标签：android, user-interface

我已经成为 Android 用户 3 年多了，我习惯于进入屏幕（活动），更改一些设置并按下返回。更改会自动保存。

现在我正在开发一个应用程序，我想使用 Discard | ActionBar 中的完成按钮。此活动是一个设置活动，因此用户更改了一些内容，然后按完成。但是现在我很困惑，因为如果用户按下返回，我该怎么办？我应该保存设置还是应该丢弃它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:18:21.697

在我看来，只保留“放弃”按钮，并在按下后退按钮时保存设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T14:54:18.837

对我来说，系统返回按钮应该提供与按钮相同的功能`DISCARD`。该`DONE`按钮不应该被忽视 - 它仍然很常见（在移动或基于桌面的应用程序中）确认操作，或在表单中主动保存/发送信息。

删除`DONE`Sporniket 建议的按钮意味着有两个*负面*交互（都等于取消）并且没有向用户确认保存操作 - 对我来说，我想知道如何保存我输入的信息/改变了。

使用 system-back 作为默认保存操作是违反直觉的；系统后退按钮通过活动堆栈向后导航 - 它与普通用户的“退出”相关联，而不是保存。

如果您决定继续执行（`DISCARD`仅），请确保您有一些**视觉反馈**，让用户知道信息已保存并帮助培训他们（让他们放心）在您的应用程序中，系统返回将保存您的更改。这可以通过`Crouton`在用户按下时使用 a 来实现，它会显示一条消息，告诉用户数据已保存。

- 编辑：

我应该补充一点，我的上述建议适用于`DISCARD/DONE`模式合适的地方。您在问题中提到您习惯于更改设置，然后按回，让它自动保存您的更改，我认为这些区域主要是切换，而不是正在编辑的内容。

Roman Nurik 的帖子***[在这里](https://plus.google.com/u/0/+RomanNurik/posts/R49wVvcDoEW)***提供了更多指导，甚至提到了一种`system-back`默认保存信息的方式。在这种情况下，他描述了`DONE`替换功能，并在溢出菜单`up`中隐藏`DISCARD`按钮，引用了用户不太可能想要丢弃信息的用例。（恕我直言，我不同意他的观点——我认为如果有可见`DONE`或`Save`动作，那么`system-back`应该丢弃，原因如上所述。也就是说，至少它是该模式的一些指导以及该模式的支持者之一的使用指南.)

总体而言，我认为如果您提供有关用户将在此屏幕中编辑的信息的更多上下文，则可以更好地回答这个问题。

# java - Hibernate-NamedSqlQuery UserType 作为 ReturnType

> ID：14704875
> 
> 赞同：2
> 
> 时间：2013-02-05T10:08:45.597
> 
> 标签：java, hibernate, orm, hibernate-mapping, usertype

我在 Hibernate 中有一个映射类，其中包含一个命名的 sql 查询，它计算某些搜索参数的整数的最小值。实际的查询非常复杂（所以我既不能把它写成 Criteria 也不能写成 Hibernate 版本的 HQL）。

数据库中的返回类型是一个整数，但我有一个用户类型，可以将该整数映射到一个日期（在我的情况下，db-schema 修改也是不可能的）。

问题是：如何为通过 Custom-UserType 解析的命名查询指定返回类型。

我尝试了以下。我的用户类型是

```
<hibernate-mapping>
    <typedef class="com.package.MyUserType" name="MyUserType"/>
    <class>...</class>
    <sql-query name="queryName">
        <return-scalar column="alpha" type="MyUserType"/>
        select min(myColumn) as alpha from Table01 where attribute=:param
    </sql-query>
</hibernate-mapping> 
```

但是执行该命名查询会导致

```
org.hibernate.MappingException: could not determine type null 
```

但是`MyUserType`在我的类映射中工作正常。

**编辑：**

我刚刚发现，如果我`com.package.MyUserType`用作类型，它工作正常。所以问题似乎是我的 typedef 在我的 sql-query 中无法正常工作。在我的课堂上它工作正常。（注意上面显示的 hibernate-mapping 中的 typedef-line）

我必须使用的休眠版本：3.2.7.ga

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T08:32:04.913

如我的编辑所述：

```
<return-scalar column="alpha" type="com.package.MyUserType"/> 
```

工作正常。typedef 定义由于某种原因不起作用。对于我的休眠版本，我没有找到任何类似的错误报告。

# php - 将数组从 PHP（从 DB）传递给 JS？

> ID：14704877
> 
> 赞同：-1
> 
> 时间：2013-02-05T10:08:47.263
> 
> 标签：php, javascript, jquery, ajax

我的目标是——最终——在我的 js 文件中获得一个“正常”的 JS 数组。也许 json 是这样做的方法 - 但数组中的元素应该保持有序，它只是三个数组的数组： [["1","2","3"]["1","2" ,"3"]["1","2","3"]]。

我的 php 查询（它确实产生了上面的数组 - 我的意思是：它确实有效）：

// 这是文件'dbquery.php'

```
<?php
    include_once('../resources/init.php');

    $query = mysql_query("SELECT `useranswer`, `solution`, `time` FROM `results`");
    $qlen = mysql_query("SELECT COUNT(1) FROM `results`");
    $len = mysql_result($qlen, 0);

    $user_a = array();
    $solu_a = array();
    $time_a = array();

    while($row = mysql_fetch_assoc($query)){

       array_push($user_a, $row['useranswer']);
       array_push($solu_a, $row['solution']);
       array_push($time_a, $row['time']);
    }

    $cd_result = array($user_a, $solu_a, $time_a);
    $cd_answer = json_encode($cd_result);
    echo $cd_answer;
?> 
```

我认为 json 不是这里的适当形式。

现在我想要的只是我的 js 文件中的一个 js 数组，例如：**my_array = [[1,2,3],[1,2,3],[1,2,3]]**

但我非常未能做到这一点。

使用 $.ajax() 我不知道如何在没有 'data: ' 每个值的情况下一次获取所有数据。我只想从 php 中“捕捉”我的回声 - 怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:36:26.623

这样做

```
<?php
    include_once('../resources/init.php');

    $query = mysql_query("SELECT `useranswer`, `solution`, `time` FROM `results`");
    $qlen = mysql_query("SELECT COUNT(1) FROM `results`");
    $len = mysql_result($qlen, 0);

    $user_a = array();
    $solu_a = array();
    $time_a = array();

    while($row = mysql_fetch_assoc($query)){

       array_push($user_a, $row['useranswer']);
       array_push($solu_a, $row['solution']);
       array_push($time_a, $row['time']);
    }

    $cd_result = array($user_a, $solu_a, $time_a);
    $cd_answer = json_encode($cd_result);
    echo json_encode ($cd_answer);  // encode in json format
?> 
```

并在 ajax 中：

```
$.ajax({
  type: "GET",
  url: "test.php",
  dataType: "json",
  data : {anything : 1},
  success:function(data){ 
    var x = jQuery.parseJSON( data ); // parse the answer
    // if you want in an array format then just use eval()
    x = eval(x);
    alert(x);
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:43:37.007

如果您只需要在呈现页面时将 PHP 变量传递给 JS，请在您的 PHP 视图层中执行此操作：

```
<script type="text/javascript">
    var myInt = <?php echo $int ?>;
    var myString = '<?php echo $string ?>'; 
    var myArray = <?php echo json_encode($array) ?>;

    // All these JS variables can now be used here
</script> 
```

显然，你需要确保变量是有效的——所以在 int 的情况下，如果它是 null 或 undefined，你需要确保你不渲染赋值——否则会产生客户端错误。

# iphone - _main 中的重复符号

> ID：14704879
> 
> 赞同：0
> 
> 时间：2013-02-05T10:08:50.757
> 
> 标签：iphone, build-error

有人可以告诉我为什么会收到此错误。我曾多次尝试清洁和建造。但我仍然收到此错误。

```
duplicate symbol _main in:
/Users/outthinkingindiapvtltd/Library/Developer/Xcode/DerivedData/PatternTest-     axdlojadtjwkbvdioeiumrzlovix/Build/Intermediates/PatternTest.build/Debug-iphoneos/PatternTest.build/Objects-normal/armv7/main-EC3660AC7D58737D.o
/Users/outthinkingindiapvtltd/Library/Developer/Xcode/DerivedData/PatternTest-axdlojadtjwkbvdioeiumrzlovix/Build/Intermediates/PatternTest.build/Debug-iphoneos/PatternTest.build/Objects-normal/armv7/main-6C8789F4078B135A.o
ld: 1 duplicate symbol for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:10:41.460

这意味着，您的 Xcode 项目中有一个文件两次。检查项目文件夹，您将在两个不同的组或同名文件夹中找到一个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:18:11.720

您可能导入了 .m 文件而不是 .h，例如：

```
#import "DemoView.m" 
```

只需检查您最近导入的文件的扩展名，之后您就会收到此错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:11:14.267

看来您在 Targets/Compiled Sources 下有多个条目。删除它们，问题就解决了。

# vbscript - VBS - 在保存对话框中显示多种文件类型

> ID：14704880
> 
> 赞同：1
> 
> 时间：2013-02-05T10:08:52.897
> 
> 标签：vbscript, savefiledialog

我得到以下代码以使用**一个 FileType**打开保存对话框：

```
Set objDialog = CreateObject("SAFRCFileDlg.FileSave")
objDialog.FileName = "Automatic Generated Presentation"
objDialog.FileType = "PowerPoint 97-2003 Presentation (*.ppt)"
objDialog.OpenFileSaveDlg 
```

如何将另一个 FileType 添加到对话框中的组合框/列表框中？
我尝试使用'|'，使用'，'，使用';'来分隔它们 还有更多 - 当然没有任何效果。

这甚至可能吗？
我在互联网上没有找到类似的东西。

将感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:58:18.953

我发现了一篇有趣的文章，作者在其中调试`SAFRCFileDlg.FileSave`对象进行的 Windows API 调用，以确定它是否允许多个文件过滤器：
[调试 SAFRCDLG.DLL FileType 过滤器字符串](http://rrudek.wordpress.com/2007/09/12/debugging-the-safrcdlg-dll-filetype-filter-string/)

答案是**否定**的。

# ruby - 如何使用 ruby gem 发送带有正文的 DELETE 请求？

> ID：14704885
> 
> 赞同：3
> 
> 时间：2013-02-05T10:09:07.300
> 
> 标签：ruby, httprequest, curb

我正在与需要使用 JSON 正文的 DELETE 请求的 API 进行通信。这适用于控制台：

`curl -XDELETE http://api.com/endpoint_path/rest_resource -d '{"items":[{"type":"type1","item_id":"item1"}]}'`

似乎大多数用于发出 HTTP 请求的 gem 不支持带有正文的 DELETE 请求（我尝试过 RestClient 和 Curb）。有没有办法使用一些 Ruby gem（最好是 Curb）或 Net::HTTP 来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T10:23:49.463

[这是使用HTTParty](https://github.com/jnunemaker/httparty)的一种方法：

```
HTTParty.delete("http://api.com/endpoint_path/rest_resource", { 
  :body => '{"items":[{"type":"type1","item_id":"item1"}]}'
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-02T10:37:50.873

它可以被她使用。这是 api 的 ORM。[https://github.com/remiprev/her](https://github.com/remiprev/her)

使用示例：

```
RestResource.destroy_existing(id, body_params) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-08T14:13:21.943

我也花了一些时间在这个问题上，@Casper 的回答阐明了这一点。

在我看来，关键是**将正文值作为 JSON string 传递**，这在我发现的大多数文档中都没有写。

这是另一个使用[httpclient的示例](https://github.com/nahi/httpclient)

```
require 'json'
body = { 'items': [{ 'type': 'type1', 'item_id': 'item1' }]}
HTTPClient.new.delete('http://api.com/endpoint_path/rest_resource', body.to_json) 
```

# jquery - 两个表的列高

> ID：14704886
> 
> 赞同：1
> 
> 时间：2013-02-05T10:09:08.153
> 
> 标签：jquery, css, html, twitter-bootstrap

我有两个并排的表，如何使用 jQuery 使两个表的列高相同？它们都有相同数量的行。并且表的内容是动态创建的。所以高度可能会有所不同。

```
<div class="row">
  <div class="span2 pull-left">
    <table class="table table-bordered pull-left" id="compare-tbl-1" border="1">
      <thead>
        <th>Column 1</th>
      </thead>
      <tbody>
        <tr>
          <td>Row1</td>
        </tr>
        <tr>
          <td>Row2</td>
        </tr>
        <tr>
          <td>Row3</td>
        </tr>
        <tr>
          <td>Row4</td>
        </tr>
        <tr>
          <td>Row5</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="span10 pull-right">
    <table class="table table-bordered" id="compare-tbl-2">
      <thead>
          <th>Column 1</th>
          <th>Column 2</th>
          <th>Column 3</th>
          <th>Column 4</th>
          <th>Column 5</th>
      </thead>
      <tbody>
        <tr>
          <td>Row1 Column1</td>
          <td>Row1 Column2</td>
          <td>Row1 Column3</td>
          <td>Row1 Column4</td>
          <td>Row1 Column5</td>
        </tr>
        <tr>
          <td>Row2 Column1</td>
          <td>Row2 Column2</td>
          <td>Row2 Column3</td>
          <td>Row2 Column4</td>
          <td>Row2 Column5</td>
        </tr>
        <tr>
          <td>Row3 Column1</td>
          <td>Row3 Column2</td>
          <td>Row3 Column3</td>
          <td>Row3 Column4</td>
          <td>Row3 Column5</td>
        </tr>
        <tr>
          <td>Row4 Column1</td>
          <td>Row4 Column2</td>
          <td>Row4 Column3</td>
          <td>Row4 Column4</td>
          <td>Row4 Column5</td>
        </tr>
        <tr>
          <td>Row5 Column1</td>
          <td>Row5 Column2</td>
          <td>Row5 Column3</td>
          <td>Row5 Column4</td>
          <td>Row5 Column5</td>
        </tr>
      </tbody>
    </table>
  </div>
</div> 
```

基本上，table1 中的 Row1 必须与 table2 中的 Row1 相同，row2 = row2，row3 = row3 等等。table1 跟随 table2 的高度

我的代码在这里[http://jsfiddle.net/Q4tLX/8/](http://jsfiddle.net/Q4tLX/8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:24:06.347

尝试这个：

```
$('#compare-tbl-1 tr').each(function(){
    var i = $('#compare-tbl-1 tr').index($(this));
    if($(this).outerHeight() > $('#compare-tbl-2 tr:eq('+i+')')){
        $('#compare-tbl-2 tr:eq('+i+') td').css('height',$(this).outerHeight());
    } else {
        $(this).children().css('height',$('#compare-tbl-2 tr:eq('+i+')').outerHeight());
    }
}); 
```

**演示 - [http://jsfiddle.net/PVZw7/](http://jsfiddle.net/PVZw7/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:22:19.343

使用循环解析第一个表行，并带有索引。

对于每一行，查看单元格的高度。将其与第二个表的同一行索引中的单元格高度进行比较。

如果第一个单元格高度 > 第二个单元格高度，则将第二个单元格高度设置为第一个单元格的高度。反之亦然。

# java - 一个复杂的 PlayFramework 查询

> ID：14704888
> 
> 赞同：0
> 
> 时间：2013-02-05T10:09:12.293
> 
> 标签：java, jpa, playframework, playframework-1.x

我正在尝试构建以下内容：

我有类似 Pinterest 模型的东西，其中用户可以关注多个板，每个板都包含多个 Pin 图。现在，我需要构建类似于 Pinterest 主页的东西，其中会根据用户的关注操作出现许多新的 pin，按最新的在顶部排序。

换句话说，我需要类似下面的伪查询：

```
Select all the Pins whose Board is contained within currentUser.followedBoards and order by dateAdded Desc and select the first 20; 
```

我对“包含在”部分有一点问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:20:08.400

如果您有一个带有 followBoards 属性的 User 类和一个带有 pin 属性的 Board 类，则类似于

```
select pin from User user join user.followedBoards board join board.pins pin .... 
```

# sql - 如何将存储过程输出值设置为声明变量

> ID：14704900
> 
> 赞同：0
> 
> 时间：2013-02-05T10:09:55.737
> 
> 标签：sql, sql-server-2008, tsql

我的 Store 过程将在插入日期后返回一个 ID，我成功插入数据，但每次我的`@test`值都是 0，但实际上我的 Store 过程返回的 ID 为 123。

我的代码如下

```
declare @INS_ID int, @test int

EXEC @test = Ins_Data 4,'Apple','Apple','Apple',@INS_ID OUTPUT
select @test 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:32:08.067

似乎您将存储过程返回值与输出参数混淆了 - 考虑这个过程

```
CREATE PROCEDURE dbo.TestProc @i INT OUTPUT
AS
    SET @i = 2;
    RETURN 1; 
```

如果你再打电话

```
DECLARE @a INT, @b INT;
EXECUTE @a = dbo.TestProc @b OUT;
SELECT  @a, @b; 
```

@a 将是 1（因为`RETURN 1`在过程中），@b 将是 2，因为它在过程中被设置为 2。

**[SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/aefb6/2)**

# php - 看看30分钟过去了吗？

> ID：14704906
> 
> 赞同：1
> 
> 时间：2013-02-05T10:10:13.577
> 
> 标签：php, mysql

我从 MySQL 中连续选择以下时间：

```
2013-02-05 11:05:20 
```

我想看看是否过了30分钟..

这是我迄今为止尝试过的，但似乎无法让它工作：

```
if(strtotime($row['last_visit']) > strtotime("-30 minutes")) {
        $database->query("UPDATE `visit_count` SET visitCount = visitCount + 1, cookieId = '$sid', last_visit='$idag' WHERE cookieId = '$sid' AND ipaddress = '$ip'");

} 
```

> last_visit = 2013-02-05 11:05:20 在数据库中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:12:32.750

您必须与当前时间进行比较

```
if(strtotime($row['last_visit']) < (time() -(30*60)) {
        $database->query("UPDATE `visit_count` SET visitCount = visitCount + 1, cookieId = '$sid', last_visit='$idag' WHERE cookieId = '$sid' AND ipaddress = '$ip'");

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:34:13.923

```
$database->query("UPDATE `visit_count` SET visitCount = visitCount + 1, cookieId = '$sid',   last_visit='$idag' WHERE cookieId = '$sid' AND ipaddress = '$ip'" and MINUTES(last_visit)=MINUTES(TIMESTAMP())-30); 
```

它可能会对你有所帮助。可能存在一些语法错误。互联网在这里制造了问题。[优化来自http://dev.mysql.com/doc/refman/5.1/en/datetime.html](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)的语法错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:13:21.720

试试这个：

```
if((time()-1800) > strtotime($row['last_visit']) { // 3600 is one hour, so 1800 is 30 minutes 
```

# r - 使用 ggplot 在“时间序列”中绘制深度范围

> ID：14704909
> 
> 赞同：1
> 
> 时间：2013-02-05T10:10:23.007
> 
> 标签：r, ggplot2

我有一个数据集，其中包含 53 条鱼的深度位置的平均值和最小值最大值，跨越 3 个月。我想制作一个`ggplot`包括所有鱼（可能会有点混乱），将平均值和最小值最大值显示为阴影“平均值周围的变化” - 这些值不是 SD 值。

这就是我希望它看起来的样子

![在此处输入图像描述](../Images/1b91600e7579eb6586b498573b368bad.png)

（在这篇文章中找到；[使用 ggplot 绘制时间序列中多个变量的平均值](https://stackoverflow.com/q/13341056/2017461)）

我已经尝试替换和摆弄该示例中使用的代码（当然还有其他代码），并且我创建了一个“不错”的情节（不是我现在所追求的） - 但不能发布图像，但我使用的代码如下；

```
ggplot(data=Dybde_mnd_gjsn, aes(x=MONTH, y=MEAN, colour=factor(ID))) +
geom_line() 
```

只有几个变量：

```
names(Dybde_mnd_gjsn)
[1] "MONTH" "MEAN"  "ID" 
```

我现在将用于绘制振幅的数据集还有几个变量：

```
names(Dybde_amplitude)
[1] "MONTH" "DAY"   "MEAN"  "MIN"   "MAX"   "ID" 
```

这是我要使用的数据片段

```
> dput(Dybde_amplitude)
structure(list(MONTH = c(5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
9L, 9L, 9L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 
10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 
10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 11L, 11L, 11L, 
11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L), DAY = c(7L, 
8L, 9L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 
22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 1L, 2L, 3L, 
4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 
18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 
1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 
15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 
28L, 29L, 30L, 31L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 
11L, 12L, 13L, 14L, 26L, 27L, 28L, 29L, 30L, 31L, 1L, 2L, 3L, 
7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 
20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 1L, 
2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 
16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 
29L, 30L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 
13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 
26L, 27L, 28L, 29L, 30L, 31L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 
9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 
22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 1L, 2L, 3L, 
4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 
18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 
1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 
15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 
28L, 29L, 30L, 31L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 
11L, 12L, 13L), MEAN = c(9.540647, 9.288714, 8.432471, 7.377365, 
6.76296, 6.276494, 12.972529, 18.019079, 6.788923, 6.215657, 
8.04514, 5.633161, 8.073261, 6.390555, 7.356341, 6.908082, 7.733372, 
7.702988, 8.027043, 7.180671, 8.35001, 8.806448, 9.189368, 11.639917, 
11.278741, 8.360776, 10.257245, 10.149662, 12.750096, 8.278289, 
5.989309, 12.213945, 8.508868, 12.648187, 12.878193, 14.39192, 
7.623049, 11.484679, 10.60802, 8.295495, 8.845541, 8.139116, 
9.62127, 10.122368, 9.006005, 10.353516, 12.176356, 8.705348, 
8.43072, 13.068286, 15.310207, 15.686594, 14.840801, 11.393752, 
12.468137, 17.784591, 8.108516, 14.655444, 10.515425, 12.431097, 
9.919435, 10.394816, 11.558687, 15.752784, 15.442462, 12.866537, 
13.900521, 11.482066, 6.671224, 8.342884, 16.114621, 16.629631, 
8.660017, 14.224467, 15.533569, 12.41233, 5.960347, 9.871627, 
7.989248, 8.348769, 10.795695, 18.17083, 15.11693, 14.552147, 
11.116431, 13.92426, 15.067066, 16.546982, 12.09092, 15.489066, 
16.386997, 16.369983, 16.666472, 16.439537, 14.961976, 8.400368, 
9.243826, 8.860606, 15.482827, 5.891674, 12.889285, 8.104939, 
17.531697, 10.702164, 13.657768, 14.816514, 10.093246, 9.122293, 
4.729045, 5.458503, 5.705868, 12.748805, 14.904001, 17.692, 6.036507, 
6.629023, 6.006198, 6.620014, 6.388301, 4.964946, 5.70888, 6.731503, 
4.177703, 5.707092, 5.419896, 5.743811, 6.914309, 8.771285, 10.280664, 
8.882466, 10.232784, 10.717011, 10.578657, 11.56234, 12.180956, 
11.682375, 10.127121, 11.493758, 10.475167, 9.530382, 7.278434, 
11.031396, 7.510209, 11.197544, 11.953527, 11.764005, 10.732215, 
6.84638, 11.731543, 11.593536, 7.999654, 9.747014, 8.357976, 
7.9729, 14.120155, 11.902921, 10.197552, 8.073362, 10.317106, 
13.507428, 14.653348, 10.425436, 13.372142, 14.139852, 8.292127, 
13.026231, 10.412969, 15.822424, 16.974569, 18.421219, 14.874954, 
15.19774, 16.192414, 13.456357, 18.018939, 13.06192, 8.639087, 
12.765785, 11.764159, 8.551737, 14.76467, 10.406063, 11.606126, 
14.361956, 12.14953, 11.489708, 15.935027, 17.127559, 16.522154, 
10.894316, 13.134836, 13.114416, 13.727499, 15.169832, 15.189013, 
16.968254, 15.396868, 14.64583, 14.812744, 15.053284, 15.157046, 
16.467487, 16.665042, 15.150461, 14.635215, 14.721557, 15.840516, 
17.882953, 15.356118, 16.391199, 15.900671, 15.42199, 10.389486, 
7.947174, 12.650666, 14.631651, 12.691862, 11.540124, 11.898669, 
11.366367, 12.491286, 12.607952, 12.714351, 14.942454, 12.351443, 
13.195234, 12.010512, 12.305635, 12.216722, 12.777485, 9.775835, 
11.955268, 11.368552, 11.016467, 9.721845, 10.806302, 10.9171, 
10.453463, 12.844585, 11.418213, 10.494833, 11.628353, 11.089386, 
10.114644, 11.518541, 10.556667, 9.999429, 6.240064, 7.614508, 
2.759079, 8.675967, 7.665187, 9.996974, 9.409778, 11.284177, 
9.915669, 10.073183, 12.478693, 9.344805, 9.985623, 10.137344, 
10.899548, 10.987574, 9.602739, 9.522853, 6.755497, 5.770355, 
5.752236, 7.560061, 8.650949, 9.461071, 10.349785, 9.341064, 
9.639314, 8.979398, 9.63129, 10.736764, 9.131154, 8.569252, 9.456744, 
8.771311, 10.607428, 8.951906, 8.621349, 7.685053, 8.024678, 
5.514734, 7.39701, 4.573696, 4.639201, 4.925964, 11.295734, 4.381326, 
4.320309, 5.210907, 5.367718, 4.563952, 4.744356, 2.950165), 
    MIN = c(8.797308, 8.678333, 7.766875, 6.853333, 5.61875, 
    5.353125, 11.882128, 17.313191, 5.425833, 5.225, 6.31375, 
    4.785, 6.648333, 5.077917, 5.8925, 5.627083, 6.487917, 6.67875, 
    7.119792, 5.867872, 7.636512, 7.513556, 7.923125, 10.500426, 
    10.328667, 6.31617, 8.871875, 8.767872, 11.512979, 6.486809, 
    4.961702, 10.671042, 7.100851, 11.570208, 11.542766, 12.385238, 
    6.311087, 10.100208, 9.577805, 7.345227, 7.866042, 7.204, 
    8.253023, 8.769375, 7.894167, 9.400851, 11.269744, 7.655417, 
    6.812979, 11.394375, 13.8175, 14.294375, 13.165208, 9.943191, 
    11.276444, 16.884167, 7.246889, 12.704375, 8.956889, 11.251277, 
    8.311458, 8.62383, 10.030833, 14.564375, 14.605417, 11.158542, 
    12.42125, 10.294, 5.315208, 7.044792, 14.696458, 15.389167, 
    7.3975, 13.421489, 14.955319, 11.108478, 4.849167, 8.50125, 
    6.776957, 7.408723, 9.500625, 17.558511, 14.387708, 13.864167, 
    9.728542, 13.374, 14.145833, 15.628542, 10.460213, 14.234565, 
    16.26875, 16.195833, 16.179167, 16.118182, 14.107083, 7.67125, 
    9.060638, 7.975833, 13.734687, 4.4, 11.070444, 6.305641, 
    16.709574, 9.93, 12.559792, 14.010417, 9.10587, 7.900345, 
    4.048, 4.371304, 5.315833, 11.510833, 13.698125, 16.65375, 
    5.158542, 5.748667, 4.957083, 5.524583, 5.204375, 4.235, 
    4.8025, 5.868913, 3.491915, 5.030435, 4.711458, 4.958958, 
    5.879348, 7.601087, 8.915, 7.87275, 9.358261, 9.74625, 9.087708, 
    10.858723, 11.538333, 10.801489, 9.237333, 10.321042, 9.425217, 
    8.394444, 6.378182, 9.80766, 6.812667, 10.236667, 10.202917, 
    10.403333, 9.350238, 6.253902, 10.940233, 10.502766, 7.186667, 
    8.949773, 7.541395, 7.541395, 13.215435, 11.171064, 9.319302, 
    7.197021, 9.524043, 12.797292, 13.830208, 9.306809, 12.304043, 
    12.910976, 7.762778, 12.136429, 9.322826, 15.460625, 16.665333, 
    18.2125, 13.856087, 13.862979, 15.556136, 12.174118, 16.92, 
    11.778857, 7.635263, 11.865909, 10.958444, 7.853404, 14.153095, 
    9.717955, 10.932955, 13.724667, 10.874146, 10.57119, 15.215714, 
    16.384186, 15.662791, 9.91617, 12.607442, 12.325217, 12.901163, 
    14.532326, 14.454091, 16.248222, 14.838511, 14.012708, 14.251489, 
    14.418125, 14.396522, 16.020625, 15.897447, 14.54413, 13.964375, 
    14.271064, 15.27625, 17.429787, 14.618444, 15.641489, 15.257174, 
    14.84186, 9.652708, 7.102667, 12.118261, 14.130513, 12.154, 
    10.940698, 11.418913, 10.768043, 11.788085, 12.017556, 12.192326, 
    14.272895, 11.660417, 12.43619, 11.482766, 11.761304, 11.775, 
    12.280435, 9.125217, 11.464348, 10.741522, 10.584783, 9.086957, 
    10.062667, 10.385652, 9.785, 12.26, 10.839268, 9.808864, 
    10.80025, 10.574419, 9.469583, 10.794634, 9.949149, 9.406458, 
    4.863617, 6.528125, 2.577143, 7.9805, 7.077083, 9.406585, 
    8.903556, 10.933, 9.384146, 9.681778, 11.786, 8.873478, 9.341333, 
    9.362, 10.171282, 10.353, 9.095435, 8.736087, 5.785208, 4.785152, 
    5.163871, 6.848333, 7.645862, 9.119714, 9.895143, 8.720227, 
    9.019048, 8.169231, 8.652553, 9.837872, 8.077708, 7.354043, 
    8.591556, 8.024894, 9.41766, 7.989535, 7.86973, 6.921111, 
    6.793939, 5.034815, 6.788718, 4.00119, 3.939778, 4.139545, 
    10.178667, 3.931915, 3.692174, 4.627273, 4.967568, 4.021395, 
    4.380652, 2.825263), MAX = c(10.215385, 9.747708, 8.920625, 
    8.013958, 8.067917, 7.41, 14.122128, 18.531277, 8.23375, 
    7.503125, 9.537083, 6.659375, 9.591458, 7.88625, 8.799167, 
    8.335417, 8.806875, 8.7025, 8.793125, 8.531702, 8.967209, 
    10.017556, 10.391042, 12.829574, 12.124667, 10.097447, 11.530625, 
    11.344043, 14.207872, 9.877021, 7.166809, 14.081875, 10.238723, 
    13.89375, 14.41383, 16.892143, 8.935217, 12.958542, 11.717805, 
    9.260455, 9.698958, 9.1995, 10.746744, 11.263542, 10.07375, 
    11.502553, 13.095641, 9.9025, 10.048511, 14.837708, 16.728125, 
    17.283333, 16.538333, 12.96383, 13.912889, 18.56875, 8.991333, 
    16.5925, 11.898222, 13.544681, 11.173958, 12.095106, 12.826667, 
    16.841667, 16.102083, 14.120833, 15.475, 12.647111, 8.1475, 
    10.014792, 17.6, 17.7, 10.006875, 14.974468, 16.187234, 13.607174, 
    7.147083, 11.132917, 9.376739, 9.333404, 11.991875, 18.652979, 
    15.874375, 15.365417, 12.478958, 14.561333, 15.710417, 17.25625, 
    13.652128, 16.800435, 16.4375, 16.50625, 17.383333, 16.870455, 
    15.819167, 8.9865, 9.429149, 9.826667, 17.449375, 7.644615, 
    14.726, 10.080769, 18.468511, 11.542292, 14.902708, 15.435, 
    10.948261, 10.493103, 5.148, 6.656957, 6.126458, 14.110417, 
    16.245833, 18.708542, 6.928542, 7.402889, 7.362292, 7.847917, 
    7.513542, 5.682292, 7.056667, 7.581087, 4.830213, 6.350435, 
    6.203125, 6.69625, 7.854565, 9.83, 12.218043, 9.91375, 11.210217, 
    11.911667, 11.977917, 12.235319, 12.869792, 12.59, 10.904, 
    12.784583, 11.599565, 10.868889, 8.172955, 12.354894, 8.29, 
    12.584792, 13.69875, 13.4375, 12.084762, 7.459268, 12.525814, 
    12.690638, 8.770889, 10.471364, 9.085349, 8.343256, 14.877391, 
    12.579574, 10.923953, 9.053191, 11.291277, 14.24, 15.647083, 
    11.66, 14.248723, 15.392927, 8.849722, 13.746905, 11.335, 
    16.13875, 17.231333, 18.5625, 16.004348, 16.694894, 16.927727, 
    14.602941, 19.270526, 14.102857, 9.673158, 13.643409, 12.648222, 
    9.327447, 15.280238, 11.120227, 12.355682, 14.967556, 13.422927, 
    12.263095, 16.472381, 17.768372, 17.498605, 11.689787, 13.640233, 
    13.728696, 14.696744, 15.730698, 15.930455, 17.747111, 15.903404, 
    15.326667, 15.362979, 15.710417, 15.831957, 17.023333, 17.588085, 
    15.782609, 15.255833, 15.112766, 16.508958, 18.248936, 16.036222, 
    17.105532, 16.641739, 15.978372, 11.263333, 8.832889, 13.246957, 
    15.210769, 13.252444, 12.264651, 12.448696, 11.922174, 13.205106, 
    13.237333, 13.215349, 15.572368, 12.949792, 13.973571, 12.448936, 
    12.824348, 12.726304, 13.20587, 10.500435, 12.617826, 12.051087, 
    11.623043, 10.586739, 11.522, 11.592826, 11.18, 13.480811, 
    12.013171, 11.237727, 12.2745, 11.579767, 10.610417, 12.045854, 
    11.186596, 10.53375, 7.959787, 8.633437, 2.954286, 9.378, 
    8.316875, 10.447073, 9.791556, 11.7455, 10.434878, 10.571111, 
    13.021429, 9.997391, 10.452, 10.915111, 11.569231, 11.545, 
    10.148478, 10.29087, 8.039375, 6.98697, 6.281935, 8.181429, 
    9.577241, 9.891429, 11.002857, 9.821136, 10.195714, 9.894359, 
    10.444681, 11.646596, 10.203125, 9.886383, 10.184444, 9.619149, 
    11.618511, 10.00093, 9.375405, 8.419333, 9.280606, 6.762222, 
    7.907179, 5.254048, 5.393556, 5.644773, 12.823778, 5.107447, 
    5.060652, 5.784318, 5.773514, 5.135814, 5.240652, 3.08), 
    ID = c(7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 
    7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 
    7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 
    7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 
    7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 
    7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 
    7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 
    7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 
    7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 
    7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 
    7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 
    7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 7288L, 
    7288L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 7293L, 
    7293L, 7293L, 7293L)), .Names = c("MONTH", "DAY", "MEAN", 
"MIN", "MAX", "ID"), class = "data.frame", row.names = c(NA, 
-299L)) 
```

这可以理解吗？！我是 R 和 ggplot 的新手，所以这篇文章可能看起来有点傻。

非常感谢您对此事的任何帮助！另外，这`merge`与数据集有什么关系？重要吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:31:38.917

一种解决方案是使用`geom_ribbon()`with`geom_line()`来绘制这些数据。将根据 from和值`geom_ribbon()`产生灰色区域。`MIN``MAX`

在您的示例数据中，有单独的列，`DAY`并`MONTH`创建了新列，其中包含这两个列的组合以及添加的 2012 年（您可以用实际年份替换）。然后将此列用作 x 值。

```
df$date<-as.Date(paste("2012",df$MONTH,df$DAY,sep="/"))

ggplot(data=df)+
  geom_ribbon(aes(x=date,ymin=MIN,ymax=MAX,group=ID),fill="grey") + 
  geom_line(aes(x=date,y=MEAN,group=ID,colour=as.factor(ID))) 
```

![在此处输入图像描述](../Images/f08869c88e1e6ac2024668020aa343d1.png)

# javascript - 表达式值

> ID：14704910
> 
> 赞同：1
> 
> 时间：2013-02-05T10:10:26.273
> 
> 标签：javascript

我有这些声明：

```
var a;
var b = 1;
var c = 2;
var d = a || b, c; 
```

`d`是 1 ，那么`,c`表达式中的 是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T10:14:13.420

构造

```
var d=a||b, c; 
```

做两件事：

*   它声明`d`并为其赋值`a||b`
*   它声明了`c`变量

正如`c`已经声明的那样，我会说它完全没用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T10:14:47.693

`var d = a || b, c;`简单地说`var d = a || b; var c;`“逗号”用于分隔多个变量的声明。这里`,c`不需要，因为`var c = 2;`已经定义了`c`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T10:13:38.757

您的代码被有效解释如下：

```
var a; // Variable declarations are hoisted to top of scope
var b;
var c;
var d;

b = 1;
c = 2;
d = a || b; 
```

所以最终的`c`声明根本没有做任何事情。请注意，这`var x = y, z;`只是一个包含两个声明（其中一个包括赋值）的*变量语句。*

# c++ - 从共享库中提取文件名

> ID：14704912
> 
> 赞同：1
> 
> 时间：2013-02-05T10:10:35.330
> 
> 标签：c++, linux

是否可以从共享库或二进制文件中获取文件名/函数名。我需要调试共享库但无法从共享库中确定文件名

# pdf - phpexcel pdf渲染库尚未定义

> ID：14704914
> 
> 赞同：1
> 
> 时间：2013-02-05T10:10:35.610
> 
> 标签：pdf, pdf-generation, phpexcel

在尝试使用 PHPExcel 1.7.6（内存不足错误）生成 PDF 失败后，我升级到 1.7.8。我无法为我的生活弄清楚如何让它工作。我试过 tcPDF 和 mPDF，两者都是一样的。

将其放回 Excel 输出，我可以看到我正在正确设置路径。我所能得到的只是“尚未定义 PDF 渲染库”，我无法弄清楚它想要什么 - 我试过 'mPDF5.4'、'MPDF54'（文件夹本身的实际名称）、' mpdf'、'mpdf.php'...每次都一样。

我已经使用 PHPExcel 一年多了，所以我对它并不陌生。我在这个问题上浪费的时间比我愿意承认的要多，而且我还没有发现任何地方描述过这个问题，所以我觉得有点愚蠢，我似乎是唯一一个无法理解的人这个出来。

我正在使用的实际代码如下：

```
ini_set('include_path', ini_get('include_path').'\\Classes\\');

$rendererName = PHPExcel_Settings::PDF_RENDERER_MPDF;
$rendererLibrary = 'mPDF5.4';
$rendererLibraryPath = ini_get('include_path') . $rendererLibrary; 
```

（也就是说，很好地复制了示例代码。）

为了完整起见，我使用的标题是

```
echo header("Content-Type: application/pdf");
echo header("Content-Disposition: attachment; filename=".$filename.".pdf" );
echo header('Cache-Control: max-age=0'); 
```

这些自然而然地位于文件顶部附近。

在文件末尾附近，输出代码是

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'PDF');
$objWriter->save('php://output'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:21:59.480

我让它工作了。尽管我想说我有一个突破性的时刻并且完全理解它，但我不知道我是如何让它发挥作用的。但是，希望它可以帮助某人，让我列出我做了什么。

我在 Windows 上运行 XAMPP。我的文件结构在 xampp\php\PEAR\Classes 中有 PHPExcel 本身的文件夹。domPDF 在同一个文件夹中，我将其重命名为“dompdf”。

由于我不再记得的原因，我将包含路径设置为：

```
ini_set('include_path', ini_get('include_path').'\\Classes\\'); 
```

为了设置渲染路径，我使用了以下内容：

```
$rendererName = PHPExcel_Settings::PDF_RENDERER_DOMPDF;
$rendererLibrary = 'dompdf';
$rendererLibraryPath = ini_get('include_path') . $rendererLibrary; 
```

对于实际的作家创作，我使用以下内容：

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'PDF');
$objWriter->save($path.$fullFileName); 
```

我注意到可能使事情有所不同的一件事是这样做：

```
// include 'PHPExcel/Writer/Excel2007.php'; 
```

也就是说，与我在 PHPExcel 中所做的一切不同，我根本不包括 Writer 文件夹中的任何内容。我记得最清楚了，这一次与一周前我问这个问题时完全不同。一旦我从 1.7.8 的 Tests 文件夹中获取了 01simple-download-pdf.php 文件，主要是从其中复制代码并将其调整到我的路径。

总而言之，不要管 $rendererName。$rendererLibrary 是包含库的文件夹的名称，在我的例子中是“dompdf”。$rendererLibraryPath 实际上是设置该文件夹的路径，因此它以包含 pdf 库文件夹的路径结束。

很明显，我不是 uber-leet hax0r，但是 SO 已经为我回答了很多很多编程问题。我希望这对其他人有帮助，所以他们不会像我那样浪费时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T19:37:34.800

PHPOffice 还包含 PHPWord。我对 PHPWord 有同样的错误信息。这是针对 LINUX 的。用“PhpExcel”替换“PhpWord”应该可以解决这种情况。您必须根据需要修改路径 $rendererLibraryPath。

```
$rendererName = \PhpOffice\PhpWord\Settings::PDF_RENDERER_DOMPDF;
$rendererLibraryPath = realpath(__DIR__ . '/../../../../../dompdf-0.6.1');
\PhpOffice\PhpWord\Settings::setPdfRenderer($rendererName, $rendererLibraryPath);
$objWriter = \PhpOffice\PhpWord\IOFactory::createWriter($phpWord, 'PDF');
$objWriter->save('helloWorld.pdf'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-19T06:51:00.177

如果您收到此错误并且您已将正确的路径设置为 TCPDF 或 DOMPDF 文件夹（您不必编写完整路径），那么还要确保您有这些行：

```
if (!PHPExcel_Settings::setPdfRenderer(
        $rendererName,
        $rendererLibraryPath
    )) {
    die(
        'NOTICE: Please set the $rendererName and $rendererLibraryPath values' .
        EOL .
        'at the top of this script as appropriate for your directory structure'
    );
} 
```

# android - Android：应用内计费 V3 超时返回哪个响应代码？

> ID：14704920
> 
> 赞同：6
> 
> 时间：2013-02-05T10:10:43.123
> 
> 标签：android, google-play, in-app-billing

Google Play 应用内结算服务{ice,er} V3 将在网络超时条件下返回哪些响应状态代码？这是其所有功能中的统一吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T10:10:09.867

我将在这里描述我的发现。我已经在安装了全功能 GP（GP Store V3.10.10、GP Services 2.0.12、G Services Framework 4.1.2）的 AVD 上测试了这一点，方法是拔掉主机的插头。

*   如果可能，该`getPurchases()`方法返回一个缓存的结果（请注意，我们这里*不是*在讨论*Service 之外的*缓存，而是*直接*调用 getPurchases）。当然，这意味着几乎总是会得到一个缓存的结果，除非由于本地数据丢失而重新初始化服务 - 这种情况不太可能并且通常不需要在应用层。
*   该`consumePurchase()`方法将在假定的内部网络超时 20 秒后返回整数值 6 ( `BILLING_RESPONSE_RESULT_ERROR`)（因此添加一点时间，直到调用者看到结果代码）。尽管`BILLING_RESPONSE_RESULT_ERROR`被描述为 a ，但我还是怀疑这一点，`Fatal error during the API action`因为这里没有其他错误代码有意义；不幸的是，对于诸如超时之类的临时情况，*致命一词仍然有些不合适。*
*   `getSkuDetails()`似乎表现得就像`consumePurchase()`. **更新**：现在有证据表明也`getSkuDetails()`可以访问本地服务中的缓存信息。
*   `getBuyIntent()`如果该项目已为服务所知，则看起来在没有连接的情况下也可以正常工作。这就解释了为什么 Hartok 会看到空白的 GP 购买屏幕：在没有连接的情况下从 IAB V3 获得购买意图不是问题。

结论：应用内计费服务 V3 似乎可以使用内部缓存和 20 秒的服务器连接超时。对于本地缓存无法解决的服务器通信错误，使用响应代码 6。

# php - 生成后即时下载生成的excel文件

> ID：14704927
> 
> 赞同：0
> 
> 时间：2013-02-05T10:10:56.403
> 
> 标签：php, phpexcel

我已经用 phpexcel 创建了一个 excel 文件并成功地将它保存在服务器上。但我真正想做的是让浏览器即时下载这个文件。有什么解决办法吗？
这是我的代码：

```
$objPHPExcel = new PHPExcel();

        $objPHPExcel->setActiveSheetIndex(0);

        $col = 0;
        foreach ($json[0] as $key => $value) {
            $a = $key;
            $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, 1, $key);
            $col++;
        }

        $row = 2;
        foreach ($json as $itemGroup) {
            $col = 0;
            foreach ($itemGroup as $key => $value) {
                $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $value);
                $col++;
            }
            $row++;
        }

        $objPHPExcel->getActiveSheet()->setTitle('Report');

        $objWriter = new PHPExcel_Writer_Excel2007($objPHPExcel);
        try {
            $fileName = date("Y-m-d H:i:s");
            $objWriter->save('/uploaded_images/generatedReports/' . $fileName . '.xlsx');
            return true;
        } catch (Exception $exc) {
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:09:52.370

查看示例 01simple-download-xlsx.php，它显示了要设置的标头，并且您应该保存到 php://output 而不是“命名”文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:12:57.870

```
header('Location : /uploaded_images/generatedReports/' . $fileName . '.xlsx'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:14:05.857

尝试使用附件标题？

```
header("Content-Disposition: attachment; filename=your_file.xls"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:16:47.870

```
Berofe returning true in try block you have to use header method for downloadable action

$filename ="excelreport.xls";
header('Content-type: application/ms-excel');
header('Content-Disposition: attachment; filename='.$filename);
echo "your content \t you next tabcontent \n your next line content \t" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T10:26:30.383

您可以设置适当的标题，并使用 'php://stdout' 作为输出文件名。

例如

```
$filename = date("Y-m-d H:i:s").'.xls';
header('Content-type: application/ms-excel');
header('Content-Disposition: attachment; filename='.$filename);
$objWriter->save('php://stdout');
return true; 
```

# ios - UITableView 附件视图

> ID：14704928
> 
> 赞同：1
> 
> 时间：2013-02-05T10:10:57.293
> 
> 标签：ios

我创建了一个由来自 mysql 的数据填充的 UITableView（使用 NSJSONSERIALIZATION）。现在问题是一回事。我检索到的是产品名称。我想要一个附件视图（像单元格右侧的箭头）。单击后，将在那里查看并加载该产品的详细信息。

我知道它可以完成，但不知道如何或在哪里寻找一个好的教程。有什么建议吗？

我对 iOS 开发真的很陌生。

多谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T10:15:21.133

使用这个 tableview 委托。

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath 
```

...并在 cellForRowAtIndexPath: 添加这个。

```
cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton; 
```

# javascript - KnockoutJS 绑定未使用可观察集合更新

> ID：14704930
> 
> 赞同：0
> 
> 时间：2013-02-05T10:11:04.603
> 
> 标签：javascript, html, knockout.js

我正在使用 KnockoutJS 创建一个简单的旋转动画。我有一些包含标题和描述的项目，我正在通过这些项目骑自行车。

在标题和描述下方，我显示了一些分页按钮，并且活动按钮应该应用了样式。

但是，分页按钮的样式不会更新。当前，所有分页按钮都应用了样式，而不是仅设置活动页面的样式。我创建了一个[jsFiddle](http://jsfiddle.net/WgCJA/)来显示我的问题。

我究竟做错了什么？

JavaScript：

```
var AppViewModel = function () {
    this.currentItem = ko.observable();
    this.items = ko.observableArray([
    new Item("titleA", "descriptionA"),
    new Item("titleB", "descriptionB"), ]);

    this.tick = function () {
        var item = this.items.shift();
        if (item) {
            item.visible(false);
            this.items.push(item);
        }
        this.items()[0].visible(true);
    };

    this.tick();
    setInterval(function () {
        _this.tick();
    }, 1000);
}

var Item = function (title, description) {
    this.title = title;
    this.description = description;
    this.visible = ko.observable(false);
}

ko.applyBindings(new AppViewModel()); 
```

HTML：

```
<div data-bind="foreach: items">
    <div data-bind="visible:visible"> <span data-bind="text: title"></span>

        <blockquote data-bind="text: description"></blockquote>
    </div>
</div>
<nav>
    <ul data-bind="foreach: items">
        <li data-bind="style: { color: visible ? 'red' : 'black'} ">X</li>
    </ul>
</nav> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:15:27.370

我认为当您在测试条件下使用 observable 时，您需要正确调用它，否则您要求它解决的是可见是否是 js 中的真实条件，函数是：

```
<ul data-bind="foreach: items">
    <li data-bind="style: { color: visible() ? 'red' : 'black'} ">X</li>
</ul> 
```

这似乎在你的 jsFiddle 中为我解决了这个问题。

# java - 道。多对多关系

> ID：14704931
> 
> 赞同：5
> 
> 时间：2013-02-05T10:11:14.490
> 
> 标签：java, oop, repository-pattern, dao

使用DAO模式时如何处理多对多关系？DAO 是否负责使用 3-rd Link 表链接两个实体？例如，我有 2 个实体：`Customer`和`Product`.

我需要提供如下方法：

```
public void assignCustomerToProduct(...);
public List<Product> getSelledProducts(long customerId); 
```

这种方法需要使用 3-rd 表作为 Linkage 表。`CustomerDao`负责提供这个方法吗？或者最好将此方法排除在服务层中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:33:39.060

其中一个对象应该拥有该关系。例如，仅当您保存员工时才会保存职位。

如果你这样做，那么 Employee 就会（有点）像聚合根（如果你在谈论 DDD 存储库）。然后，如果需要，存储库负责创建位置并在链接表中插入多对多条目。

如果 Position 本身是一个聚合根，那么 EmployeeRepository 只负责更新链接表，而不负责持久化 Positions。

# python - 应该先构造cookie

> ID：14704939
> 
> 赞同：0
> 
> 时间：2013-02-05T10:11:21.733
> 
> 标签：python, django

我会在所有网页之前调用 cookie。出于这个原因，我应该在调用所有页面或模块之前创建值键。就我而言，在调用任何页面之前，应该首先构造 cookie。我该如何管理？我应该把它放在哪里，`request.session['id']=Null`以便在调用任何其他页面之前先调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:26:44.023

您需要编写一个自定义装饰器来处理这种情况。

您可以在此处阅读有关装饰器的更多信息：[https ://docs.djangoproject.com/en/dev/topics/http/decorators/](https://docs.djangoproject.com/en/dev/topics/http/decorators/)

例如，`csrf_exempt`装饰器允许在没有 csrf 令牌工具的情况下处理请求，这对于基于 JSON 的请求非常有用。

```
@csrf_exempt
def new(request):
    if request.method == 'POST':
        json_data = simplejson.loads(request.raw_post_data)
        try: 
```

同样有一个自定义装饰器来确保烹饪并将其用作：

```
@ensure_cookie
def new(request):
... 
```

编写自定义装饰器：[如何在 django 中编写自定义装饰器？](https://stackoverflow.com/questions/5469159/how-to-write-a-custom-decorator-in-django)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:34:05.437

您可以将此代码放在自定义[中间件](https://docs.djangoproject.com/en/dev/topics/http/middleware/#writing-your-own-middleware)的 process_request 或 process_view 方法中。

# c - 如何正确地从 int 的内容创建指针？

> ID：14704940
> 
> 赞同：0
> 
> 时间：2013-02-05T10:11:24.520
> 
> 标签：c, pointers

由于各种限制，我有一个只接受`int`参数的方法。但是，我想将此方法传递给 Struct。

到目前为止，我已经...

```
main(int argc, char* argv){
    Somestructure * name;
    //Name is malloced, things are put in it, etc.

    int address = (int) &name;
    method(address);
}

void method(int arg){
     Somestructure* thisStruct = (Somestructure*) arg;
     //Do stuff with thisStruct.
} 
```

我认为这将分配`thisStruct`指向与 main 方法中的 name 相同的结构，但是当我尝试使用`thisStruct`in 时`method`，我得到一个总线错误。当我使用此代码时...

```
 int structAddress = (int) &thisStruct;
    printf("[Method] Address : %d\n", structAddress); 
```

似乎`name`(inside `main`) 和`thisStruct`(inside `method`) 的地址不同。

我对 C 有点陌生，但是，有人知道这里发生了什么吗？

这段代码只能在 32 位系统上运行，所以我不必担心任何 64 位 int/address 问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T10:13:21.470

您的问题是您传入了`&name`，它是指向结构指针的指针。因此，在 中`method`，您正在访问 ，`Somestructure **`就好像它是`Somestructure *`.

就进去吧`(int)name`。

（PS 定义“通用参数”的常用方法是使用`void *`.）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T10:14:19.123

因为`name`是 类型`Somestructure*`，所以该行

```
int address = (int) &name; 
```

视为. `address`_ `Somestructure**`使用

```
int address = (int)name; 
```

会做你想做的。当然总是假设`sizeof(int) == sizeof(Somestructure*)`。

# cakephp - 从支付网关返回时蛋糕会话丢失

> ID：14704941
> 
> 赞同：1
> 
> 时间：2013-02-05T10:11:27.047
> 
> 标签：cakephp

在我的应用程序中，我有一个会话，当用户从一个页面移动到另一个页面时它会持续存在。但是，该应用程序使用支付网关，如果用户转到支付网关，然后按下返回以尝试返回我的应用程序，Cake 将丢弃旧会话（以及其中包含的所有数据）并创建一个新会话。

我发现[这个问题](https://stackoverflow.com/questions/4989946/https-to-https-redirect-session-issue)有点像同一个问题，除了它发生在用户从支付网关按下“返回”时，我真的不认为它会被归类为被引用。

无论如何，该问题的建议是更改`Configure::write('Security.level')`为，`low`但我使用的是 CakePHP 2.3，我从[更改日志](http://bakery.cakephp.org/articles/lorenzo/2013/01/28/cakephp_2_3_0_is_out)中注意到已经完成的一件事是“从 core.php 中删除了 Security.level”——这似乎因为这个特定的设置不再用于任何事情。

所以，我的问题是，当用户从支付网关被推荐（或简单地回击）时，我如何禁用导致 Cake 丢弃并重新生成会话的任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:04:06.137

我建议更改以下`core.php`设置：

```
Configure::write('Session', 
    array(
        'defaults' => 'php',
        'timeout' => '30',
        'autoRegenerate' => false
    )
); 
```

我有一个类似的问题，并为我解决了它。

谢谢，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:05:13.187

带有 chormeframe 的 IE 习惯于将第一个请求发送到具有普通 IE-useragent 标头的“不同”站点，而随后在其中包含“chromeframe”。在非 Cake 网站上，我在检查用户代理时遇到了同样的会话问题。

# android - 自定义指南针以在两个地理点之间工作

> ID：14704948
> 
> 赞同：0
> 
> 时间：2013-02-05T10:11:37.683
> 
> 标签：android, compass-geolocation

我有一个要求，我想从当前位置向一个位置显示箭头。此外，它应该根据设备旋转移动，并且应该在一个位置之后指向相同的位置。这可能吗？如何？

我已经提交了这个链接[Rotating an ImageView like a compass（在其他地方设置了“北极”）](https://stackoverflow.com/questions/7978618/rotating-an-imageview-like-a-compass-with-the-north-pole-set-elsewhere)，但它对我不起作用。

# java - 具有边界的泛型与具有泛型类型的接口

> ID：14704949
> 
> 赞同：2
> 
> 时间：2013-02-05T10:11:39.770
> 
> 标签：java, generics

考虑以下代码

```
/**
 * Generic method with bounds
 */
public static <T> int countGreaterThan(Comparable<T>[] anArray,
        T elem) {
    int count = 0;
    for (Comparable<T> e : anArray)
        if (e.compareTo(elem) > 0)
            ++count;
    return count;
}
/**
 * Alternative to above
 */
public static <T extends Comparable<T>> int countGreaterThan(T[] anArray, T elem) {
    int count = 0;
    for (T e : anArray)
        if (e.compareTo(elem) > 0)
            ++count;
    return count;
} 
```

看起来两者在功能上是相同的。但是，它们可以出现在同一个类中，显然彼此重载。当我使用以下代码时，似乎调用了第二种方法。如果没有第二个重载方法，则调用第一个方法。有人可以提供深入的解释吗？

```
 Integer[] array = new Integer[10];
    for (int i = 0; i < array.length; ++i)
        array[i] = i;

    System.out.println("Count > 5 = " + countGreaterThan(array, 5)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:43:50.440

好吧，这不是完全擦除。

第一种方法

```
<T> int countGreaterThan(Comparable<T>[] anArray,T elem) 
```

适用于数组`Comparable<T>`，但不强制要求`elem`也是`Comparable`。

你可以检查一下：

```
static class Y {
   int val;
   public Y(int val){
      this.val=val;
   }
} 

static class W extends Y implements Comparable<Y>{
   public W(int val){
      super(val);
   }
   public int compareTo(Y o){
      return this.val-o.val;
   } 
}

W[] array = new W[10];
for (int i = 0; i < array.length; ++i)
    array[i] = new W(i);

System.out.println("Count > 5 = " + countGreaterThan(array, new Y(5))); 
```

第一个方法将被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:39:32.783

（它们可以出现在同一个类中，因为它们没有相同的擦除。第一个具有 type 的第一个参数和 type`Comparable[]`的第二个参数`Object[]`。）

两种方法都可以应用；在 Java 中，要调用的方法是在编译时确定的，并且始终是基于参数的引用类型的更具体的重载。

Carlo Pellegrini 提出了一个很好的观点，即第一个将被称为任何旧的`Comparable`。更高级的专家可能会纠正我，但我相当肯定这是由于拳击。您的示例中的调用首先绑定`Integer[]`到`T[]`，然后这导致了`int`现在`T`被具体化为的装箱`Integer`。在他的例子`Y`中，它只能匹配第一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:29:28.967

那是因为在 Java 中，an`Integer[]`也是`Comparable[]`. 如果您使用列表而不是数组作为参数的相同方法，则它不会以相同的方式工作，因为 a`List<Integer>`不是 a `List<Comparable>`。所以只有第二个版本会接受 a`List<Integer>`作为参数。

集合比数组更具有类型安全性，并且与泛型一起使用更好。一般来说，您应该更喜欢它们而不是数组。

# javascript - 创建 Javascript 按钮

> ID：14704953
> 
> 赞同：0
> 
> 时间：2013-02-05T10:11:44.713
> 
> 标签：javascript, jquery

我已经使用 javascript 创建了按钮，这些按钮是由 javascript 页面在加载时创建的。创建的按钮数量以及按钮属性（id、名称）取决于从数据库表中获取的信息。现在我需要独立使用按钮，但我事先不知道 id，所以我可以在任何功能上提及它，请帮忙。

```
var CABLE_BOM_ALT_QUERY_PAGE = 'GetAltFromBom.json.aspx';

var WIRE_TYPE = 'AVSSXF2B';
var WIRE_LENGTH = 2000;

$(document).ready(function () {
    FetchCableBom();
});

function FetchCableBom() {
    $.ajax({
        url: CABLE_BOM_ALT_QUERY_PAGE
      , data: "WireType=" + WIRE_TYPE + "&WireLength=" + WIRE_LENGTH
      , dataType: 'json'
      , success: DisplayButtons
      , error: ErrorHandler
      , async: false
    });
}

function createButtons(tbID, tbClass, tbType, tbValue, onClick) {
    return '\n<input'
        + (tbID ? ' id=\'' + tbID + '\'' : '')
        + (tbClass ? ' class=\'' + tbClass + '\'' : '')
        + (tbType ? ' type=\'' + tbType + '\'' : '')
        + (tbValue ? ' value=\'' + tbValue + '\'' : '')
        + (onClick ? ' onclick=\''+ onClick + '\'':'')
        + '>';
}

function DisplayButtons(cableData) {
    var newContent = '';
    $.each(cableData, function (i, item) {
        newContent += createButtons(item.CommonCable, null, "submit", item.CommonCable, toggle);
    });
    $('#Categories').html(newContent);          
}

function toggle() {
    console.log("P@ssw0rd");
    return;
}

function ErrorHandler() { 
    alert('ERROR: ' + jqXHR.status + '\r\nURL: ' + this.url + '\r\nContact the I.T Department.');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:23:37.070

即使在阅读了几次之后，我也不太确定我知道您要做什么。但这是我的猜测：您有一些包含来自数据库的按钮属性的结果集。你想要这些按钮“独立”，我假设没有查询数据库，因为你需要某种 ID。

您是否考虑过在尚未查询数据库时静态预填充结果集？类似这样的东西：

```
if (hasDatabaseResult) {
  buttonData = getDatabaseResult();
} else {
  buttonData = [ {id : 1, name : "First record"} ]
} 
```

# qt - 写入 Qt 小部件的 Python 日志记录配置

> ID：14704954
> 
> 赞同：1
> 
> 时间：2013-02-05T10:11:48.853
> 
> 标签：qt, logging, python-2.7, sys

我还没有在其他标题相似的主题中找到答案。假设我有一个如下所示的 logging.conf：

```
[loggers]
keys=root,analyzer

[handlers]
keys=consoleHandler,analyzerFileHandler

[formatters]
keys=consoleFormatter,logFormatter

[logger_root]
level=DEBUG
handlers=consoleHandler,analyzerFileHandler

[logger_analyzer]
level=DEBUG
handlers=consoleHandler,analyzerFileHandler
qualname=analyzer
propagate=0

[handler_consoleHandler]
class=StreamHandler
level=INFO
formatter=consoleFormatter
args=(sys.stdout,)

[handler_analyzerFileHandler]
class=FileHandler
level=DEBUG
formatter=logFormatter
args=('analyzer.log','w')

[formatter_consoleFormatter]
format=%(asctime)s - %(name)s - %(levelname)s | %(message)s
datefmt=%m/%d/%Y %X

[formatter_logFormatter]
format=%(asctime)s - %(levelname)s | %(message)s
datefmt=%m/%d/%Y %X 
```

A *logger = logging.getLogger('analyzer')*会将文本发送到日志文件和控制台，我怎样才能使 sys.stdout 转到 QPlainTextEdit() 小部件而不是控制台？

**编辑**

好的，看看这篇[文章](https://stackoverflow.com/questions/11465971/redirecting-output-in-pyqt "邮政")，我做了这段代码。该帖子的代码很好，但由于某种原因它没有解决问题，您可以注释掉记录器的所有实例，但最终仍会将打印事件发送到 Qwidget。记录器与程序的其余部分没有真正的交互，它就在那里。我想我可以通过编写一个类来解决这个问题，该类将我想要的任何内容作为文本并将其分别发送到打印和记录器：

```
import logging
from logging.config import fileConfig
from os import getcwd
import sys

from PyQt4.QtCore import QObject,\
                         pyqtSignal

from PyQt4.QtGui import QDialog, \
                        QVBoxLayout, \
                        QPushButton, \
                        QTextBrowser,\
                        QApplication

class XStream(QObject):
    _stdout = None
    _stderr = None

    messageWritten = pyqtSignal(str)

    def flush( self ):
        pass

    def fileno( self ):
        return -1

    def write( self, msg ):
        if ( not self.signalsBlocked() ):
            self.messageWritten.emit(unicode(msg))

    @staticmethod
    def stdout():
        if ( not XStream._stdout ):
            XStream._stdout = XStream()
            sys.stdout = XStream._stdout
        return XStream._stdout

    @staticmethod
    def stderr():
        if ( not XStream._stderr ):
            XStream._stderr = XStream()
            sys.stderr = XStream._stderr
        return XStream._stderr

class XLogger():
    def __init__(self, name):
        self.logger = logging.getLogger(name)
    def debug(self,text):
        print text
        self.logger.debug(text)
    def info(self,text):
        print text
        self.logger.info(text)
    def warning(self,text):
        print text
        self.logger.warning(text)
    def error(self,text):
        print text
        self.logger.error(text)

class MyDialog(QDialog):
    def __init__( self, parent = None ):
        super(MyDialog, self).__init__(parent)

        # setup the ui
        self._console = QTextBrowser(self)
        self._button  = QPushButton(self)
        self._button.setText('Test Me')

        # create the layout
        layout = QVBoxLayout()
        layout.addWidget(self._console)
        layout.addWidget(self._button)
        self.setLayout(layout)

        # create connections
        XStream.stdout().messageWritten.connect( self._console.insertPlainText )
        XStream.stderr().messageWritten.connect( self._console.insertPlainText )

        self.xlogger = XLogger('analyzer')

        self._button.clicked.connect(self.test)

    def test( self ):

        # log some stuff
        self.xlogger.debug("Testing debug")
        self.xlogger.info('Testing info')
        self.xlogger.warning('Testing warning')
        self.xlogger.error('Testing error')

if ( __name__ == '__main__' ):
    fileConfig(''.join([getcwd(),'/logging.conf']))

    app = None
    if ( not QApplication.instance() ):
        app = QApplication([])

    dlg = MyDialog()
    dlg.show() 
```

“交叉记录器”将所有内容发送到日志和 Qwidget，但它也将除调试之外的所有内容发送到 aptana 控制台：

```
02/05/2013 17:38:42 - analyzer - INFO | Testing info
02/05/2013 17:38:42 - analyzer - WARNING | Testing warning
02/05/2013 17:38:42 - analyzer - ERROR | Testing error 
```

虽然analyzer.log 有：

```
02/05/2013 17:38:42 - DEBUG | Testing debug
02/05/2013 17:38:42 - INFO | Testing info
02/05/2013 17:38:42 - WARNING | Testing warning
02/05/2013 17:38:42 - ERROR | Testing error 
```

奇怪的是，调试是唯一没有进入 Aptana 控制台的，从我的 logging.conf 中 [logger_analyzer] 下的处理程序中删除*consoleHandler*解决了它写入 Aptana 控制台的问题，可能与[handler_consoleHandler] 下的*args=(sys.stdout,) 。*我想它可以解决我的问题，而无需在 Qtext 对象的处理程序中编写代码，从而否定 logging.conf 文件。如果有人有更优雅的解决方案来使用 logging.conf 文件，该文件以某种方式设法将其控制台输出重定向到您选择的 Qwidget，请随时发布。谢谢。

# android-fragments - 如何从片段启动子活动？

> ID：14704956
> 
> 赞同：3
> 
> 时间：2013-02-05T10:11:53.653
> 
> 标签：android-fragments, android-fragmentactivity

我正在使用片段活动代替选项卡组活动。像这样。

```
public class TabGroup1Activity extends Fragment {
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if (container == null) {

        return null;
    }

    Intent intent = new Intent(getActivity(), HomeActivity.class);
    getActivity().startActivity(intent);

    return (RelativeLayout) inflater.inflate(R.layout.home, container,
            false);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}
} 
```

它不是作为孩子开始活动（以全屏开始），但我不知道如何从孩子开始。

请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:39:10.870

活动被设计成占据整个屏幕，而片段被设计成占据全部、部分或不占据屏幕。你不应该`Fragment`为你的扩展`Activity`，而是这样做。

```
public class TabGroup1Activity extends FragmentActivity { 
```

您不想`Activity`在. `FragmentActivity`_ `Fragment`_ `TabGroup1Activity`_ `getSupportFragmentManager()`_`getFragmentManager()``FragmentTransaction`

请参阅[http://developer.android.com/training/basics/fragments/creating.html](http://developer.android.com/training/basics/fragments/creating.html)

# linux - 如何使用 iptables 重定向 IP 地址

> ID：14704957
> 
> 赞同：3
> 
> 时间：2013-02-05T10:11:54.213
> 
> 标签：linux, redirect, iptables

我有 5 台计算机的小型本地网络。我的提供商给了我真实的 IP 地址（194.187...），但网络中的计算机看不到它。所以我必须在我的路由器（使用 linux 系统）上进行重定向，这会将真实 IP 地址（194.187 ...）重定向到我在提供商网络中的 IP 地址（10.12.205.26）。

如何在路由器上使用 iptables 执行此操作。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:27:18.877

我希望这对你有用：

```
 Add (prerouting,postrouting) rules in you NAT table using

iptables -t nat -A POSTROUTING -o eth0 -j SNAT --to-source ip_address
iptables -t nat -A PREROUTING -i eth0 -j DNAT --to-destination ip_address

    and then use :

    iptables -t nat -A PREROUTING -d 194.187... -j DNAT --to-destination 10.12.205.26

    iptables -t nat -A POSTROUTING -s 10.12.205.26 -j SNAT --to-source 194.187... 
```

# java - 如何在一行代码中配置 JacksonJaxbJsonProvider？

> ID：14704959
> 
> 赞同：4
> 
> 时间：2013-02-05T10:11:54.840
> 
> 标签：java, json, jaxb, jackson

我在这样的 REST 应用程序中使用 Jackson 进行 JSON 序列化：

```
import javax.ws.rs.core.Application;

import org.codehaus.jackson.jaxrs.JacksonJaxbJsonProvider;
import org.codehaus.jackson.map.SerializationConfig;

public class MyApplication extends Application {

    public Set<Class<?>> getClasses() {
        Set<Class<?>> classes = new HashSet<Class<?>>();
        classes.add(MyResource1.class);
        classes.add(MyResource2.class);
        ...
        return classes;
    }

    public Set<Object> getSingletons() {
        Set<Object> singletons = new HashSet<Object>();
        singletons.add(new JacksonJaxbJsonProvider().configure(
            SerializationConfig.Feature.WRITE_NULL_PROPERTIES, false)); // (*)
        return singletons;
    }

} 
```

(*) 否则用@XmlElementRef 注释的必要字段将在JSON 输出中显示为`"myField": null`null（而不是不出现），而用@XmlElement 注释的字段很好。

但是，`SerializationConfig.Feature.WRITE_NULL_PROPERTIES`不推荐使用 来支持`SerializationConfig.setSerializationInclusion(..)`（1），不推荐使用它本身来支持`SerializationConfig.withSerializationInclusion(..)`或*通过 ObjectMapper 配置*（2）

但我认为使用`new JacksonJaxbJsonProvider().configure(..)`的确实是配置一个 ObjectMapper （我看了一下代码）。

所以我的问题是：如何在不使用任何已弃用的属性且不（重新）创建新的配置类的情况下正确配置它？

(1) [http://jackson.codehaus.org/1.9.4/javadoc/org/codehaus/jackson/map/SerializationConfig.Feature.html#WRITE_NULL_PROPERTIES](http://jackson.codehaus.org/1.9.4/javadoc/org/codehaus/jackson/map/SerializationConfig.Feature.html#WRITE_NULL_PROPERTIES)

(2) [http://jackson.codehaus.org/1.9.4/javadoc/org/codehaus/jackson/map/SerializationConfig.html#setSerializationInclusion(org.codehaus.jackson.map.annotate.JsonSerialize.Inclusion)](http://jackson.codehaus.org/1.9.4/javadoc/org/codehaus/jackson/map/SerializationConfig.html#setSerializationInclusion(org.codehaus.jackson.map.annotate.JsonSerialize.Inclusion))

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T10:23:52.380

我使用下一个配置和 OM：

```
public class JaxbJacksonObjectMapper extends ObjectMapper {

    public JaxbJacksonObjectMapper() {
        configure(Feature.WRAP_ROOT_VALUE, false); // IMPORTANT must be false
        configure(Feature.WRITE_EMPTY_JSON_ARRAYS, true);
        configure(Feature.WRAP_EXCEPTIONS, true);
        configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false);

        final AnnotationIntrospector introspector = new JaxbAnnotationIntrospector();

        super.getSerializationConfig().withSerializationInclusion(Inclusion.ALWAYS);
        super.getDeserializationConfig()
                .withAnnotationIntrospector(introspector);
        super.getSerializationConfig()
                .withAnnotationIntrospector(introspector);

    }

} 
```

希望它有所帮助

UPD：对不起，我忘记了下一部分。您还需要注册它，例如：

```
@Provider
public final class ReContextResolver implements ContextResolver<ObjectMapper> {

    private final ObjectMapper jacksonObjectMapper;

    public ReContextResolver() throws Exception {
        jacksonObjectMapper = new JaxbJacksonObjectMapper();
    }

    @Override
    public ObjectMapper getContext(final Class<?> objectType) {
        return jacksonObjectMapper;
    }

} 
```

你可以将它组合在一个类中，对我来说——我使用 POJO 映射和直接解析，所以对我来说更好。

# ios - Restkit：如何从多个源获取和映射数据

> ID：14704961
> 
> 赞同：0
> 
> 时间：2013-02-05T10:11:58.390
> 
> 标签：ios, restkit, tastypie

我目前正在使用 RestKit 0.20 开发 iOS 应用程序，以从 Tastypie API 访问数据。

我正在尝试从这样的 URL 获取提要数据

```
/api/v2/feed/?format=json 
```

然后我会得到如下的提要数组。

```
{
  "meta": {
    "limit": 20,
    "next": null,
    "offset": 0,
    "previous": null,
    "total_count": 2
  },
  "objects": [
    {
      "id": 1,
      "info": "This is my first post",
      "pub_date": "2013-02-03T15:59:33.311000",
      "user": "/api/v2/user/1/",
      "resource_uri": "/api/v2/feed/1/"
    },
    {
      "id": 2,
      "info": "second post, yeah",
      "pub_date": "2013-02-03T16:00:09.350000",
      "user": "/api/v2/user/1/",
      "resource_uri": "/api/v2/feed/2/"
    }
  ]
} 
```

如果我想获取更多关于 Tastypie 将其作为 url 发送的用户数据，就像外键一样 `"user": "/api/v2/user/1/"`，我是否必须嵌套调用 objectRequestOperation.

我很困惑，因为我在成功加载数据时使用块来回调。那么有没有比在请求提要完成后再次为每个提要请求用户数据更好的方法了。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:30:31.727

您必须在 Feed 资源中定义：

```
user = fields.ToOneField(UserResource, full=True) 
```

美味派文档中的更多信息[http://django-tastypie.readthedocs.org/en/latest/resources.html](http://django-tastypie.readthedocs.org/en/latest/resources.html)

为什么是资源 URI？资源 URI 在 Tastypie 传递数据的方式中扮演着重要角色。这似乎与其他简单地内联相关数据的解决方案非常不同。尽管 Tastypie 可以内联这样的数据（在具有关系的字段上使用 full=True），但默认情况下是提供 URI。

URI 很有用，因为它会产生更小的有效负载，让您只获取对您重要的数据。您可以想象一个实例，其中一个对象有数千个您可能不感兴趣的相关项目。

URI 也非常可缓存，因为每个端点的数据不太可能频繁更改。

URI 鼓励正确使用每个端点来显示端点覆盖的数据。

除了意识形态，你应该使用适合你的任何东西。如果您喜欢更少的请求和更少的端点，可以使用 full=True，但请注意每种方法的后果。

# asp.net-mvc - 将提交按钮转换为 ActionLink

> ID：14704965
> 
> 赞同：0
> 
> 时间：2013-02-05T10:12:02.500
> 
> 标签：asp.net-mvc, button, actionlink

有没有办法用 转换提交按钮`ActionLink`？

我得到了这个`ActionLink`，它将用户重定向到索引页面：

```
@Html.ActionLink("Cancel", "Index", null, new { @class = "k-button" }) 
```

还有一个保存按钮，用于提交以保存创建或更改的任何内容：

```
<input type="submit" value="Save" /> 
```

如果提交按钮的代码与`ActionLink`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T12:20:11.287

您可以直接使用`<a>`标签，尝试这样的事情：

```
<a onclick="$('#YourForm').submit();" class="k-button">Save</a> 
```

在您的表单的 Action Post 中：

```
[HttpPost]
public ActionResult Post(..)
{
   /// process something...
   return RedirectToAction("Index");
} 
```

## HTML 助手

如评论中所示，您可以创建自己的 html 助手，试试这个：

```
using System;
using System.Web.Mvc;

namespace MvcApplication.Helpers
{
     public static class HtmlExtensions
     {
          public static string SubmitLink(this HtmlHelper helper, string text, string formId)
          {
               return string.Format("<a class='k-button' onclick='$(\"#{1}\").submit();'>{1}</a>", text, formdId);
          }
     }
} 
```

并使用它：

```
@Html.SubmitLink("Save", "formId") 
```

# javascript - 获取谷歌图表中列的总和

> ID：14704967
> 
> 赞同：3
> 
> 时间：2013-02-05T10:12:07.013
> 
> 标签：javascript, google-visualization

有什么方法可以获取`sum`, `avg`,`count`中某一列的数据`google chart table`？我想把那张`metadata`桌子展示出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T01:18:14.070

或者，如果您有手动输入的 DataTable，则可以执行以下操作：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['x', 'Cats'],
    ['A',   1],
    ['B',   2],
    ['C',   4],
    ['D',   8],
    ['E',   7],
    ['F',   7],
    ['G',   8],
    ['H',   4],
    ['I',   2],
    ['J',   3.5],
    ['K',   3],
    ['L',   3.5],
    ['M',   1],
    ['N',   1]
  ]);

  // Create an Array to hold column data
  var tmpColumn = new Array();

  // Add each data value to the array with push()
  for(var i = 0; i < data.getNumberOfColumns(); ++i) {
    tmpColumn.push(data.getValue(i, 1));
  }

  // Use built-in Google Functions on the array
  alert(google.visualization.data.avg(tmpColumn));
  alert(google.visualization.data.sum(tmpColumn));
  alert(google.visualization.data.count(tmpColumn));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T10:16:17.807

也许您正在寻找这样的东西：

```
var query = new google.visualization.Query(DATA_SOURCE_URL);
query.setQuery('select dept, sum(salary) group by dept');
query.send(handleQueryResponse); 
```

`DATA_SOURCE_URL`可以对应于 Google Chart Data Source URL。

来自：[https ://developers.google.com/chart/interactive/docs/querylanguage](https://developers.google.com/chart/interactive/docs/querylanguage)

# forms - selenium：网络表单提交

> ID：14704968
> 
> 赞同：0
> 
> 时间：2013-02-05T10:12:07.730
> 
> 标签：forms, selenium, selenium-rc

我有这个任务作为面试的作业 - 测试流行网站的网页。得到一个弹出表单，在字段中包含一些文本。任务是检查是否有字段已更改。以这种方式构建的页面，无论数据是否更改，弹出窗口都只是关闭而没有额外的文本。我不知道如何处理它。如果表单已发送，硒检查中是否有任何命令？

# 添加1

这是一个弹出式更改配置文件窗口。如下所示，我的翻译为红色字体。很明显，当这个窗口打开时，一些值已经在文本字段中（即你之前输入的你的名字/姓氏）。当您按下保存按钮时，此页面会检查自此窗口打开后数据是否已更改（您是否真的更改了任何内容）。“保存”按钮的html代码已显示在pic2上。您可以在保存按钮上看到 javaScript 侦听器。必须有一个JS代码，检查数据是否更改并发送表单，如果没有更改则取消表单发送。

![图1](../Images/6b4ff50475c54b6d81c41053d16c9ab5.png) ![在此处输入图像描述](../Images/fe10a8a3b74e6dee6f918ca755344f22.png) 我的目标是使用 selenium 检查表单是否已发送。

# sql-server-2008 - tsql 用 where 更新

> ID：14704970
> 
> 赞同：0
> 
> 时间：2013-02-05T10:12:11.307
> 
> 标签：sql-server-2008, tsql, sql-update

目前我的工作台是这样的：

```
Portfolio    SEDOL    Grouped    Level
1            111      As Primary 2
1            111      Energy     2
1            122      Financial  2
2            111      Financial  1
2            133      As Primary 1 
2            133      Gas        1
2            123      Oil        1 
```

基本上我想做的是更新分组=“作为主要”的工作表。您将看到 As Primary 记录与应该匹配的 Primary 具有相同的 SEDOL。它必须在级别上匹配，并且投资组合可能只持有二级，因此必须在具有相同级别的投资组合上匹配，这样就不会出现错误。

我猜测脚本必须看起来像这样：

```
UPDATE @WorkTable
SET Grouped = (SELECT Grouped FROM @Worktable
               WHERE ............... 
WHERE (Select  ............. 
```

但是我对在我的选择中添加什么感到困惑。在正确的方向上的一点会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:49:02.897

您可以使用`UPDATE`with来执行此操作`JOIN`。像这样的东西：

```
UPDATE t1
SET t1.Grouped = t2.Grouped
FROM @WorkTable t1
INNER JOIN @Worktable t2 ON -- a condition
WHERE -- you can also add conditions here 
```

# c# - 无法将图像绑定到列表框并在 wpf 中获取所选项目

> ID：14704978
> 
> 赞同：0
> 
> 时间：2013-02-05T10:12:41.860
> 
> 标签：c#, wpf, image, listbox, selected

我需要在一个`ListBox`我可以实现的水平方向显示一组图像。但是，这里面临的挑战是，当我单击或选择其中的任何图像并在代码隐藏中获取所选图像时，无法将所选项目 ( `Image`) 绑定到项目属性。`ListBox-selected``ListBox`

以下是我的 XAML 代码，稍后是我的`XAML.cs`代码。如果我缺少解决问题的方法，请告诉我。

谢谢。

```
<ListBox Grid.Row="1" x:Name="ThumbnailPanel" ItemsSource="{Binding Frames}"
              SelectedItem="{Binding Path=MediaFrame,Mode=TwoWay}"
              ScrollViewer.CanContentScroll="True"
              ScrollViewer.VerticalScrollBarVisibility="Disabled"
              ScrollViewer.HorizontalScrollBarVisibility="Hidden">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <UniformGrid Columns="20" Rows="1">
                </UniformGrid>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
    </ListBox>

    public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged(string property)
    {
        var propertyChanged = PropertyChanged;
        if (propertyChanged != null)
        {
            propertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }

    public ObservableCollection<Image> Frames { get; set; }

    public Image MediaFrame
    {
        get
        {
            return mediaFrame;
        }
        set
        {
            if (mediaFrame != value)
            {
                mediaFrame = value;
                OnPropertyChanged("MediaFrame");
            }
        }
    }

    private Image mediaFrame;

    if (Frames == null)
            {
                Frames = new ObservableCollection<Image>();

            }

            Frames.Add(
                new Image
                {
                    Source = imageSource,
                    ToolTip = _mediaPlayer.Position,
                    MaxWidth = _mediaPlayer.NaturalVideoWidth,
                    MaxHeight = _mediaPlayer.NaturalVideoHeight,
                    Margin = new Thickness(2)
                });

            ThumbnailPanel.DataContext = Frames; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:50:38.563

不是很清楚，但是当你写的时候

```
ThumbnailPanel.DataContext = Frames; 
```

那是`Frames`财产吗？那么`ItemsSource="{Binding Frames}"`绑定将如何工作？我想您需要将 设置为`DataContext`具有`Frames`and`MediaFrame`属性的对象。也许：

```
ThumbnailPanel.DataContext = this; 
```

# cakephp - 如何在 nginx 中配置 cakephp

> ID：14704982
> 
> 赞同：2
> 
> 时间：2013-02-05T10:12:49.987
> 
> 标签：cakephp, nginx, memcached, centos, vhosts

目前我正在使用 nginx 开发 cakephp。我在使用 Fact CGI 运行 Nginx 的 Centos 服务器上设置了 cakephp 环境。问题是我无法在我的虚拟主机中设置正确的重写规则，以便蛋糕正确呈现页面，即样式等。我的 .conf 文件为 -

```
#The default server

server {    
listen  80 default_server;    
server_name  1 23.123.123.123;

#charset koi8-r;

#access_log  logs/host.access.log  main;

location / {
    root   /usr/share/nginx/html;
    index  index.php index.html index.htm;
}

error_page  404              /404.html;
location = /404.html {
    root   /usr/share/nginx/html;
}

# redirect server error pages to the static page /50x.html
#
error_page   500 502 503 504  /50x.html;
location = /50x.html {
    root   /usr/share/nginx/html;
}

# proxy the PHP scripts to Apache listening on 127.0.0.1:80
#
#location ~ \.php$ {
#    proxy_pass   http://127.0.0.1;
#}

# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
#
location ~ \.php$ {
    root           html;
    fastcgi_pass   127.0.0.1:9000;
    fastcgi_index  index.php;
    fastcgi_param  SCRIPT_FILENAME  /usr/share/nginx/html$fastcgi_script_name;
    include        fastcgi_params;
}

# deny access to .htaccess files, if Apache's document root
# concurs with nginx's one
#
location ~ /\.ht {
    deny  all;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-27T17:00:18.977

Luchomolina 在下面的回答让我朝着正确的方向开始。但是，CSS 和 JS 文件停止在不是顶级 URL 的 URL 上工作，例如 /posts 工作但 /posts/title123 没有。

这最终为我工作：

```
location / {
   if (-f $request_filename) {
       break;
   }
   if (!-f $request_filename) {
      rewrite ^/(.+)$ /index.php?url=$1 last;
      break;
   }

   set $new_uri $uri;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-05T08:22:59.973

使用打击代码

```
 location / {
   if (-f $request_filename) {
       break;
   }
   if (!-f $request_filename) {
      rewrite ^/(.+)$ /index.php?url=$1 last;
      break;
   }

   set $new_uri $uri;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:43:09.970

这对我有用：

```
server {  
  listen 80 ;

  server_name example.com;    

  root /www/example.com/app/webroot;
  index index.html index.php;

  location / {
    try_files $uri $uri/ /index.php?$uri&$args;
    set $new_uri $uri;
  }

  location ~ \.php$ {
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    # NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini

    fastcgi_pass 127.0.0.1:9000;
    fastcgi_index index.php;
    include fastcgi_params;
    fastcgi_param PATH_INFO $new_uri;
  }

  location ~ /(\.ht|\.git|\.svn) {
    deny  all;
  }

} 
```

添加规则是为了使一些特殊的`$new_uri`路由在我的站点上工作，也许这不适用于您，但请注意 CakePHP 假设`PATH_INFO`已设置，因此这些规则不会损害将其留在那里。

希望能帮助到你。

# sql - T SQL Case Statement with between to Show ALL

> ID：14704983
> 
> 赞同：2
> 
> 时间：2013-02-05T10:12:52.623
> 
> 标签：sql, tsql, case, between

我想我在这里尝试了不可能的事情，但由于我对 SQL 的了解有限，我需要一些帮助来看看是否有一些我可以做的事情。

我的问题是我正在处理非常糟糕的数据，我需要能够链接和拆分数据然后加入。

例如，我正在使用的 2 个表

```
TABLE 1
---------
From    To  Street Name
5       10  ADAMS WAY

TABLE 2
-----------
Number
1
2
3
4
5
6
7
8
9
10 
```

我想要的输出是

```
from    To  StreetName  Number
5       10  ADAMS WAY   5
5       10  ADAMS WAY   6
5       10  ADAMS WAY   7
5       10  ADAMS WAY   8
5       10  ADAMS WAY   9
5       10  ADAMS WAY   10 
```

到目前为止，我已经能够把它放在一起

```
SELECT *,
CASE
When T1.From = T2.NO
    THEN ???? 'What do i do here'
    END as Table 'What do i do next to get the rows to show'
From
T1
FULL JOIN
Numbers 
ON
T1.AFrom = T2.NO 
```

我知道这可能是一个长镜头，但任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T10:17:25.627

也许：

```
SELECT [from], 
       [to], 
       streetname, 
       number 
FROM   t1 
       LEFT OUTER JOIN t2 
                    ON t2.number >= t1.[from] 
                   AND t2.number <= t1.[to] 
```

[**SQL小提琴**](http://sqlfiddle.com/#!6/ae50e/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:19:23.983

select * from Table1 t1, Table2 t2 where t2.Number between t1.[From] and t1.[To]

请注意，FROM 列必须写成 [From]，因为它是保留关键字

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T10:23:02.570

试试这个，

```
SELECT *
FROM table1, table2
WHERE num >= table1.[from]
AND num <= table1.[to]; 
```

# php - 使用点符号访问多维数组

> ID：14704984
> 
> 赞同：18
> 
> 时间：2013-02-05T10:12:54.643
> 
> 标签：php, arrays

我正在寻找一个能够使用点符号访问多维数组的类：

```
$config->get('bar.baz.foo'); 
```

代替：

```
$config['bar']['baz']['foo'] 
```

这是课程：

```
<?php

class DotNotation
{
    /**
     * @var array
     */
    protected $values = array();

    public function __construct(array $values)
    {
        $this->values = $values;
    }

    /**
     * @param string $path
     * @param string $default
     * @return mixed
     */
    public function get($path, $default = null)
    {
        $array = $this->values;

        if (!empty($path)) {
            $keys = explode('.', $path);
            foreach ($keys as $key) {
                if (isset($array[$key])) {
                    $array = $array[$key];
                } else {
                    return $default;
                }
            }
        }

        return $array;
    }

    /**
     * @param string $path
     * @param mixed $value
     */
    public function set($path, $value)
    {
        $link = & $this->values;

        if (!empty($path)) {
            $keys = explode('.', $path);
            foreach ($keys as $key) {

                if (!isset($link[$key])) {
                    $link[$key] = array();
                }

                if (!is_array($link[$key])) {
                    throw new \RuntimeException("Can not set value for `$key` in `$path` path because it is not array.");
                }

                $link = & $link[$key];
            }
        }

        $link = $value;
    }

    /**
     * @param $path
     * @param array $values
     */
    public function add($path, array $values)
    {
        $get = (array)$this->get($path);
        $this->set($path, $this->arrayMergeRecursiveDistinct($get, $values));
    }

    /**
     * @param mixed $parameters
     */
    public function merge($parameters)
    {
        $this->add(null, (array)$parameters);
    }

    /**
     * @param string $path
     * @return bool
     */
    public function have($path)
    {
        $keys = explode('.', $path);
        $array = $this->values;
        foreach ($keys as $key) {
            if (isset($array[$key])) {
                $array = $array[$key];
            } else {
                return false;
            }
        }

        return true;
    }

    /**
     * array_merge_recursive does indeed merge arrays, but it converts values with duplicate
     * keys to arrays rather than overwriting the value in the first array with the duplicate
     * value in the second array, as array_merge does. I.e., with array_merge_recursive,
     * this happens (documented behavior):
     *
     * array_merge_recursive(array('key' => 'org value'), array('key' => 'new value'));
     *     => array('key' => array('org value', 'new value'));
     *
     * arrayMergeRecursiveDistinct does not change the datatypes of the values in the arrays.
     * Matching keys' values in the second array overwrite those in the first array, as is the
     * case with array_merge, i.e.:
     *
     * arrayMergeRecursiveDistinct(array('key' => 'org value'), array('key' => 'new value'));
     *     => array('key' => array('new value'));
     *
     * Parameters are passed by reference, though only for performance reasons. They're not
     * altered by this function.
     *
     * If key is integer, it will be merged like array_merge do:
     * arrayMergeRecursiveDistinct(array(0 => 'org value'), array(0 => 'new value'));
     *     => array(0 => 'org value', 1 => 'new value');
     *
     * @param array $array1
     * @param array $array2
     * @return array
     * @author Daniel <daniel (at) danielsmedegaardbuus (dot) dk>
     * @author Gabriel Sobrinho <gabriel (dot) sobrinho (at) gmail (dot) com>
     * @author Anton Medvedev <anton (at) elfet (dot) ru>
     */
    protected function arrayMergeRecursiveDistinct(array &$array1, array &$array2)
    {
        $merged = $array1;

        foreach ($array2 as $key => &$value) {
            if (is_array($value) && isset ($merged[$key]) && is_array($merged[$key])) {
                if (is_int($key)) {
                    $merged[] = $this->arrayMergeRecursiveDistinct($merged[$key], $value);
                } else {
                    $merged[$key] = $this->arrayMergeRecursiveDistinct($merged[$key], $value);
                }
            } else {
                if (is_int($key)) {
                    $merged[] = $value;
                } else {
                    $merged[$key] = $value;
                }
            }
        }

        return $merged;
    }
} 
```

我怎样才能提高这个类不使用`explode`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-05T11:19:27.630

您可以使用`strtok()`而不是编写它`explode()`：

```
$a = array('foo' => array('bar' => array('baz' => 1)));

function resolve(array $a, $path, $default = null)
{
  $current = $a;
  $p = strtok($path, '.');

  while ($p !== false) {
    if (!isset($current[$p])) {
      return $default;
    }
    $current = $current[$p];
    $p = strtok('.');
  }

  return $current;
}

var_dump(resolve($a, 'foo.bar'));

// array('baz' => 1) 
```

# java - 是否可以在没有 JCO 的情况下连接 SAP Server 和 JAVA？

> ID：14704986
> 
> 赞同：1
> 
> 时间：2013-02-05T10:12:58.727
> 
> 标签：java, jco

有什么方法可以**不使用 JCO 通过 JAVA 连接 SAP Server**吗？如果有任何建议，请提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:09:38.867

查看 SAP Web 应用程序服务器[Web 服务文档](http://help.sap.com/saphelp_nw04/helpdata/en/9b/dad1ae3908ee44a5caf57e10918be9/content.htm)。您可以使用 SOAP 运行时来公开和使用 ABAP 和 Java Web 服务。

# java - 结合 jMockit 的测试覆盖率报告

> ID：14704989
> 
> 赞同：3
> 
> 时间：2013-02-05T10:13:16.047
> 
> 标签：java, unit-testing, ant, code-coverage, jmockit

我正在将 jmockit 与 Ant 一起使用。对于每个测试文件运行，`index.html`都会在覆盖率报告文件夹中创建/覆盖一个文件。

对于多个测试文件，这`index.html`会被覆盖。

我正在寻找所有文件的合并报告。应该做什么？我已阅读有关使用`.ser`文件的信息，但我不知道如何创建然后使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:21:39.670

看看[这里](http://jmockit.org/tutorial/CodeCoverage.html#merging)。诀窍是设置

```
-Djmockit-coverage-output=merge 
```

（或`serial`- 阅读上面链接中的差异）。

干杯，

# git - 为什么 Tools->Git->Stash 在 Qt Creator 中失败，而 Tools->Git->Undo Uncommitted Changes 没有？

> ID：14704990
> 
> 赞同：0
> 
> 时间：2013-02-05T10:13:16.073
> 
> 标签：git, qt-creator, git-stash

即使我可以使用未提交的更改手动备份项目文件夹，有时 git stash 也会失败，然后调用“撤消未提交的更改”。

例如，如果我将一个新文件添加`foo.cpp`到我的项目中，就会发生这种情况。当我想稍后存储更改时，我得到一个错误。这是来自 Qt Creator 中的版本控制输出窗格：

```
14:07 Executing in C:\MyProject: git.exe add --intent-to-add foo.cpp
14:07 Executing in C:\MyProject: git.exe stash save QtCreator 2013-02-05T14:07:18
Cannot stash in "C:\MyProject": error: Entry 'foo.cpp' not uptodate. Cannot merge.
Cannot save the current worktree state 
```

git stash 的重点不是自动化这个过程，为什么简单地撤消更改成功时它会失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T03:51:24.663

`--intent-to-add`处于`foo.cpp`未添加但仍处于跟踪状态。（Do `git cat-file -p $(git write-tree)`: foo.cpp 是正确的，不存在。Do `git status`：它被跟踪。但我相信没有人被教导`git stash`要记住这一点，因此合并它保存的状态`foo.cpp`不会被跟踪。因为`git stash pop`实际上合并到索引和工作树——你可以隐藏你的更改，从当前的 HEAD 为父，完全检查其他内容，然后`git stash pop`将隐藏内容中的更改应用到新的工作树——你看到的消息来自测试飞行合并`stash`运行以验证立即`git stash pop`数是否会使您的工作树和索引保持原样。但在这种情况下，它不会。 `foo.cpp`在您的索引中被跟踪，并且在隐藏的树中不存在。在该树中合并时（在没有意图添加数据的情况下），唯一明智的做法是将其解释为删除。但是你已经对你要求跟踪的文件进行了更改：合并可以看到你会丢失你告诉 git 你关心的内容。因此，合并拒绝运行，直到您自己删除文件或将其提交到存储库，并且 stash 拒绝创建您无法安全弹出的存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:21:45.300

尝试运行`git stash save -u`而不是`git stash`.

# javascript - 在表单中添加值 Sencha Touch 2

> ID：14704991
> 
> 赞同：0
> 
> 时间：2013-02-05T10:13:16.777
> 
> 标签：javascript, extjs, sencha-touch-2, sencha-touch-2.1

我有几个FormPanel。您可以在其中的每一个中输入值。我需要一些东西来添加所有这些值。我可以用循环或函数来做吗？这是我的代码：

view1.js：

```
Ext.define('myApp.view.fp2', {
extend: 'Ext.form.Panel',
alias: 'widget.fp2',

config: {
    id: 'fp2',
    styleHtmlContent: true,
    items: [
        {
            xtype: 'fieldset',
            styleHtmlContent: true,
            title: 'Prueba 3',
            items: [
                {
                    xtype: 'selectfield',
                    docked: 'bottom',
                    id: 'f3',
                    margin: 10,
                    labelWidth: '0%',
                    autoSelect: false,
                    options: [
                        {
                            text: '0',
                            value: 0
                        },
                        {
                            text: '1',
                            value: 1
                        }
                    ]
                }
            ]
        },
        {
            xtype: 'fieldset',
            styleHtmlContent: true,
            title: 'Prueba 4',
            items: [
                {
                    xtype: 'selectfield',
                    docked: 'bottom',
                    id: 'f4',
                    margin: 10,
                    labelWidth: '0%',
                    autoSelect: false,
                    options: [
                        {
                            text: '0',
                            value: 0
                        },
                        {
                            text: '1',
                            value: 1
                        },
                        {
                            text: '2',
                            value: 2
                        }
                        ]
                }
            ]
        },
        {
            xtype: 'fieldset',
            styleHtmlContent: true,
            title: 'Prueba 5',
            items: [
                {
                    xtype: 'selectfield',
                    docked: 'bottom',
                    id: 'f5',
                    margin: 10,
                    labelWidth: '0%',
                    autoSelect: false,
                    options: [
                        {
                            text: '0',
                            value: 0
                        },
                        {
                            text: '1',
                            value: 1
                        },
                        {
                            text: '2',
                            value: 2
                        },
                        {
                            text: '3',
                            value: 3
                        }
                    ]
                }
            ]
        },
        {
            xtype: 'fieldset',
            html: 'pregunta 6',
            styleHtmlContent: true,
            title: 'Prueba 6',
            items: [
                {
                    xtype: 'selectfield',
                    docked: 'bottom',
                    id: 'f6',
                    margin: 10,
                    labelWidth: '0%',
                    autoSelect: false,
                    options: [
                        {
                            text: '0',
                            value: 0
                        },
                        {
                            text: '1',
                            value: 1
                        }
                    ]
                }
            ]
        }
        {
            xtype: 'button',
            docked: 'bottom',
            itemId: 'button2',
            margin: 10,
            ui: 'forward',
            text: 'siguiente'
            //go to view2.js
        }
    ]
}
}); 
```

view2.js 与 view1 类似，但具有其他值。总结所有值的最佳方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:28:56.290

总结？我认为您想将它们全部作为键值获取？

对于每个`Ext.form.FormPanel`呼叫

```
var valueObj = formRef.getForm().getValues(); 
```

如果您现在想将它们合并到一个对象中，您可以这样做

```
Ext.apply(sumValueObj, valueObj ); // will override already existing props 
```

或者

```
Ext.applyIf(sumValueObj, valueObj ); // will not override already existing props 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:58:51.900

您可以拥有一个函数，它将汇总您需要的所有值，并从所有选择字段的更改事件中触发该函数。

在控制器中，您可以像这样收听更改事件：

```
'fp2 selectfield' : {
            change  : 'onDataChange'
}, 
```

在`onDataChange`方法中你可以这样做：

```
var values = Ext.getCmp("fp2").getValues();
// code to add/subtract whatever you want 
```

*PS*我没有测试过这段代码，所以请忽略错误

# java - 转义的 html 不会转义（现在：未转义的 html 不会转义）

> ID：14704997
> 
> 赞同：15
> 
> 时间：2013-02-05T10:13:28.943
> 
> 标签：java, html, character-encoding, apache-commons

所以我目前正在使用 commons lang apache 库。

当我尝试取消转义此字符串时：`&#128512;` 这将返回相同的字符串：`&#128512;`

```
String characters = "&#128512;"
StringEscapeUtils.unescapeHtml(characters); 
```

输出：`&#128512;`

但是当我尝试用较少的字符对字符串进行转义时，它可以工作：

```
String characters = "&#12851;"
StringEscapeUtils.unescapeHtml(characters); 
```

输出：㈳

有任何想法吗？当我尝试`"&#128512;"`在[在线取消转义实用程序](http://www.htmlescape.net/htmlunescape_tool.html)上取消转义此字符串时，它可以工作，所以也许它是 apache common langs 库中的错误？或者有人可以推荐另一个图书馆吗？

谢谢。

更新：

我现在能够成功地对字符串进行转义。现在的问题是，当我试图逃避该 unescape 的结果时，它不会带回字符串（

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:07:47.723

`unescapeHtml()`保持`&#128512;`不变，因为 - 正如[文档](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html#unescapeHtml%28java.lang.String%29)所说 - 它只对 HTML 4.0 实体进行转义，限制为 65,536 个字符。不幸的是，128,512 远远超出了这个限制。

你试过使用`unescapeXml()`吗？

XML 最多支持 1,114,111 (10FFFFh) 个字符实体（[链接](https://en.wikipedia.org/wiki/Valid_characters_in_XML)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T18:35:49.753

这是一个 unicode 字符，其索引为`U+1F600 (128512)`- GRINNING FACE

详情请参考[网址](http://www.charbase.com/1f600-unicode-grinning-face)

您提到的字符串是 U+1F600 的 HTML Escape，如果您使用 Apache commons lang 取消它，它将为您绘制屏幕截图中提供的所需笑脸

从 U+0000 到 U+FFFF 的字符集有时称为基本多语言平面 (BMP)。码位大于 U+FFFF 的字符称为补充字符。Java 平台在 char 数组以及 String 和 StringBuffer 类中使用 UTF-16 表示。在此表示中，补充字符表示为一对 char 值，第一个来自高代理范围 (\uD800-\uDBFF)，第二个来自低代理范围 (\uDC00-\uDFFF)。

关于您的更新，它没有转换回

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T04:08:48.530

好吧 - 解决方案很简单：改用[org.apache.commons.lang3.StringEscapeUtils.unescapeHtml4](http://commons.apache.org/lang/api/org/apache/commons/lang3/StringEscapeUtils.html#unescapeHtml4%28java.lang.String%29)！（除非您使用的是 Java <1.5，否则您可能不会）

```
String characters = "&#128512;";
StringEscapeUtils.unescapeHtml4(characters); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T17:45:33.440

我认为问题在于没有 unicode 字符`"&#128512;"` ，因此该方法仅返回此字符串。

该[函数的文档](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html#unescapeHtml(java.lang.String))只说

返回：一个新的非转义字符串，如果为空字符串输入则为空

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T14:36:03.423

如果这是一个特定于 HTML 的问题，那么您可以为此目的使用 JavaScript。你可以做

```
 escape("&#128512;") which gives you %26%23128512%3B
    unescape("%26%23128512%3B") which gives you back &#128512; 
```

# php - Laravel 图片库逻辑

> ID：14704998
> 
> 赞同：8
> 
> 时间：2013-02-05T10:13:33.370
> 
> 标签：php, image, image-processing, laravel

我最近开始开发一个相当大的网站。在网站上，我想允许用户上传他们的样本作品。我们目前非常有限，因此图像将存储在我们的服务器上。

我有点坚持逻辑。所以我的逻辑是这样的。

用户创建一个文件夹，其名称存储在数据库中，`users id`并附有附件

**文件夹表**

**行**

```
id | folder        | user_id 
1  | Some folder   | 1
2  | New folder    | 4
3  | Nother folder | 7 
```

**图像表**

**行**

```
id | image_name        | folder_id |
1  | image1.jpg        | 1
2  | image2.jpg        | 1
3  | image3.jpg        | 1
4  | image4.jpg        | 2
5  | image5.jpg        | 2
6  | image6.jpg        | 2 
```

关系

```
class Folder extends Eloquent 
{
    public function images()
    {
        return static::has_many('Images');
    }
}

class Image extends Eloquent 
{
    public function folder()
    {
        return static::belongs_to('Folder');
    }
} 
```

服务器上的文件夹结构

```
- samples
  -user_id
   - folder_id
     - image1
     - image2
     - image3 
```

如您所见，用户创建了一个文件夹，创建文件夹后，`user`将图像名称上传到数据库中`folders id`，并显示图像将是上面描述的方式。

所以我的问题。

*   你认为这是一个很好的逻辑吗
*   这会导致将来出现问题吗
*   你会为这个功能提供什么

我最神圣的是两件事。

我认为这将导致一个巨大的数据库，其次是`id's`，在 x 次之后会有更多的用户，`id's`会增加，我知道这听起来很奇怪，但是由于很多用户会上传图片会导致巨大的 id，我的意思是它可能会达到数百万，有没有办法解决这个问题？

感谢您的帮助

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-07T13:20:53.767

好的-让我们将其分解为几个子答案；

**问题：**

```
- Is this a good logic in your opinion
- Can this lead problems in the future
- What would you offer for this functionality 
```

**回答：**

逻辑似乎听起来 - 但我很好奇你会将图像存储在哪里*？*在 public_html 内部 - 还是在 Web 根目录之外？如果您在 public_html 中有图像 - 并允许浏览器直接访问它们，它将允许用户“猜测”其他用户文件夹并访问这些文件夹。您需要安全地存储数据。

要在 webroot 之外制作图像，并确保只有授权用户可以访问它们 - 您应该使用[readfile()](http://php.net/manual/en/function.readfile.php)。像这样的东西可以解决问题

```
function user_file($file_name = "")
{
    if ($file_name)
    {
         // Ensure no funny business names to prevent directory transversal etc.
         $file_name = str_replace ('..', '', $file_name);
         $file_name = str_replace ('/', '', $file_name);

         // now do the logic to check user is logged in
         if (Auth::check())
         {
                // Serve file via readfile() - we hard code the user_ID - so they
                // can only get to their own images
               readfile('../your_app/samples/'.Auth::user()->id.'/'.$file);
         }
    }
} 
```

**问题：**

> 我认为这会导致一个巨大的数据库，其次是 id 的，x 次之后会有更多的用户，id 会增加，我知道这听起来很奇怪，但是由于很多用户会上传图片会导致巨大的id，我的意思是它可能会达到数百万

**回答：**

根据[mySQL 功能页面](http://dev.mysql.com/doc/refman/5.1/en/features.html)：

> 我们将 MySQL 服务器与包含 5000 万条记录的数据库一起使用。我们还知道使用 MySQL 服务器的用户有 200,000 个表和大约 5,000,000,000 行。

所以那是 50 亿行。你可能会得到几百万。所以你在这里是安全的（取决于你的硬件）。

**问题：**

> ...但是由于很多用户会上传图片会导致巨大的 id，我的意思是它可能会达到数百万，有没有办法解决这个问题？

**回答：**

如果您不想存储数百万条记录，并且担心性能，一种选择是保留文件夹表，但删除图像表。相反，您可以在文件夹上使用[scandir()](http://php.net/manual/en/function.scandir.php) - 并让 PHP 从目录本身检索文件名。那么你就没有那么多开销了。

```
<?php
    $list_of_user_files = scandir("$user_id/$folder_id");
    foreach ($list_of_user_files as $file) {
          echo "File: $file <br>";
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:56:08.827

存储文件夹表和使用scandir函数的方法是一个标准的过程。并允许 php 从文件夹中检索文件名。如果您有许多文件，请尝试使用 wordpress 中的年月顺序对它们进行分类。像

```
2012
  01
  02
  03
2013
  01
  02
  03 
```

文件夹ID内的等。所以一个文件夹中的图像总数会相对较少。